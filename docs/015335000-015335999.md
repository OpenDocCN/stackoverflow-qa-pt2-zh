# StackOverflow 问答 15335000-15335999

# proxy - nginx简单的proxy_pass到localhost不起作用

> ID：15335002
> 
> 赞同：49
> 
> 时间：2013-03-11T09:27:01.600
> 
> 标签：proxy, nginx

我正在尝试运行一个极简的反向代理，并想出了以下内容：

```
events {
    worker_connections 4096;
}   

http {
    server {
        listen 80;
        location / {
            proxy_pass http://127.0.0.1:3000/;
        }   
    }   
} 
```

`

但是，当我访问此服务器时，我得到的是标准的“欢迎使用 nginx 页面”，而不是来自运行在端口 3000 上的服务器的响应。

如果我 ssh 到机器并运行`curl http://127.0.0.1:3000/`，我会得到想要的结果（最终我在端口上运行了该服务器`80`并且它工作正常，所以我知道它与反向代理配置有关）。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-26T22:25:48.130

我有完全相同的问题。我刚刚在我的 nginx.conf 文件中注释掉了一行：

```
包括/etc/nginx/sites-enabled/*；

```

变成

```
#include /etc/nginx/sites-enabled/*;

```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-12-31T04:01:26.233

通过回答来解释 Vijay 的帖子，因为交流不会让我发表评论。

可能需要注释掉启用站点的目录，因为您使用的是标准 nginx.conf 文件。您会注意到该行已经在 http 指令中。如果您使用的是标准配置，您将在另一个 http 指令中重新定义一个 http 指令。您还可以将站点文件更新为仅包含 server 指令而不包含 http 指令。

标准的 nginx.conf 文件：

```
worker_processes  4;

error_log  /var/log/nginx/error.log;
pid        /var/run/nginx.pid;

events {
  worker_connections  1024;
}

http {

  include       /etc/nginx/mime.types;
  default_type  application/octet-stream;

  access_log    /var/log/nginx/access.log;

  sendfile on;
  tcp_nopush on;
  tcp_nodelay on;

  keepalive_timeout  65;

  gzip  on;
  gzip_http_version 1.0;
  gzip_comp_level 5;
  gzip_proxied any;
  gzip_vary off;
  gzip_types text/plain text/css application/x-javascript text/xml application/xml application/rss+xml application/atom+xml text/javascript application/javascript application/json text/mathml;
  gzip_min_length  1000;
  gzip_disable     "MSIE [1-6]\.";

  server_names_hash_bucket_size 64;
  types_hash_max_size 2048;
  types_hash_bucket_size 64;
  client_max_body_size 1024;

  include /etc/nginx/conf.d/*.conf;
  include /etc/nginx/sites-enabled/*;
} 
```

启用站点中的示例兼容站点文件：

```
server {
    server_name {server name};
    listen 80;
    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;
    location / {
        proxy_pass http://example.com:8080;
        proxy_set_header Host $host;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-24T05:42:14.490

我注释掉 inculude /etc/nginx/conf.d/*.conf

```
# inculude /etc/nginx/conf.d/*.conf 
```

里面包含

```
server {
   listen       80;
   server_name  localhost;

#charset koi8-r;
#access_log  /var/log/nginx/host.access.log  main;

location / {
    root   /usr/share/nginx/html;
    index  index.html index.htm;
}

#error_page  404              /404.html;

# redirect server error pages to the static page /50x.html
#
error_page   500 502 503 504  /50x.html;
location = /50x.html {
    root   /usr/share/nginx/html;
}

# proxy the PHP scripts to Apache listening on 127.0.0.1:80
#
#location ~ \.php$ {
#    proxy_pass   http://127.0.0.1;
#}

# pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
#
#location ~ \.php$ {
#    root           html;
#    fastcgi_pass   127.0.0.1:9000;
#    fastcgi_index  index.php;
#    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
#    include        fastcgi_params;
#}

# deny access to .htaccess files, if Apache's document root
# concurs with nginx's one
#
#location ~ /\.ht {
#    deny  all;
#}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-19T10:13:40.530

检查从启用站点到可用站点的链接也可能会有所帮助。我的符号链接指向无处，因此 nginx 从未读取配置。就我而言，它是

```
ls -lh /etc/nginx/sites-enabled
lrwxrwxrwx 1 root root 23 Feb 19 11:11 default -> sites-available/default 
```

代替

```
ls -lh /etc/nginx/sites-enabled
lrwxrwxrwx 1 root root 23 Feb 19 11:11 default -> ../sites-available/default 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-04-06T05:49:32.643

就我而言，我总是得到默认的 nginx 页面。事实证明，问题在于某些工具（我假设 Let's Encrypt / Certbot）添加了一些条目`sites-enabled/default`，覆盖了我的`sites-enabled/mysite.com`.

删除条目`sites-enabled/default`解决了问题。

# assembly - x86保护模式下段寄存器的目的是什么？

> ID：15335003
> 
> 赞同：13
> 
> 时间：2013-03-11T09:27:04.707
> 
> 标签：assembly, x86, cpu-registers, memory-segmentation

我需要修改一些 dll，但我不知道，段寄存器 ( `DS`, `SS`, ...) 在保护模式下的作用是什么。我在学校学习了真正的 16 位模式，其中段寄存器乘以 16 加上普通寄存器中的偏移量给出物理内存中的有效地址。在保护模式下，有一些平面内存模型和虚拟内存，其中每个进程“拥有”4GB 内存，所以如果寄存器有 32 位，那么我只能通过“偏移”寄存器来寻址虚拟内存的每个字节。那么哪些 puproses 在保护模式下具有段寄存器，例如

```
mov eax, dword ptr ds:[20037DA0] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-11T10:50:12.013

*一些历史背景*

8086 总是使用每个段的固定 64KiB 窗口，其起始地址由（段寄存器 * 16）计算。由于 80286 内存中有一些特殊的表（GDT 和 LDT）。这些表包含段的起始地址、长度和访问权限。段寄存器（CS、DS、ES、SS - 以及自 80386 起：FS、GS）包含这些表的索引。

所以理论上操作系统可能会以它想要的方式设置段的偏移量和长度：在 8086 上 DS=0x0123 意味着：段是从地址 0x01230 开始的 64KiB。在 32 位模式下，DS=0x0123 可能意味着：段从地址 0xABCD 开始，长度为 0xEF 字节 - 这取决于操作系统创建的 GDT 和 LDT 表的内容。尝试访问此范围之外的段（如果长度 < 0x1000，则为 DS:0x1000）将导致异常（中断）。

*现在的情况*

然而，大多数现代 32 位操作系统不再真正使用段寄存器。由于访问权限问题，它们的值是根据模式（内核或用户）设置的。起始地址通常为 0，长度为 4GiB。

实际内存保护是使用 MMU 完成的，因此在用户模式下无法访问某些内存区域。在现代操作系统中，MMU 绝对是必不可少的。它将“绝对”虚拟地址映射到真实物理地址，检查访问权限是否违反。

有一个例外：一些操作系统（例如 Windows 和 Linux）使用 FS 和/或 GS 段来真正指向不同的内存区域。

因此，在 64 位模式下，x86 处理器仅将 CS 寄存器用于访问权限问题，而 FS 和 GS 可用于为每个地址添加偏移量。据我所知，不使用 DS、ES 和 SS，而寄存器 FS 和 GS 的内容无关紧要，但是有一些特殊的寄存器明确给出了要添加到使用 FS 或 GS​​ 的操作的偏移量。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-11T10:19:31.443

基本上目的与实模式相同，只是它们的工作方式略有不同。您的示例中的 DS 在您的 GDT 中选择一个内存描述符（如果您真的想了解这一点，请谷歌这个术语，“全局描述符表”），其中包含基地址、结束地址、粒度等信息。然后将您的偏移量添加到基地址， 结束。如果您在 Windows 上（我打赌在 linux 上也一样），您通常不必担心这些段寄存器，正如您所说的它的平面模型，这意味着所有内存应该只有一个描述符，所以如果你不改变这些寄存器应该像它们甚至不存在一样工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-03T13:41:36.453

我会给你一个简单的答案，但要了解更多信息，我推荐下面的链接到 AMD 的架构文档，非常容易阅读。PS：我没有在这里介绍 Xeon 或 PAE ..

IA-32 (x86) 架构具有用于 RAM 的 32 位物理地址总线。

32 位总线进一步分为 2 个 16 位段，每个段能够访问 2GB 的 RAM，总共 4GB。
这称为存储库切换。

为了提供保护，Intel 和 MS 决定将一个段用于内核模式，另一个用于用户模式——这就是 Windows 历史上拥有 2GB 用户模式地址空间的原因。这是 x86 硬件限制，而不是 Windows 限制。

段寄存器分隔内核空间和用户空间地址。这就是内存保护的实现方式。

此外，IA-32 通用也有 32 位内部寄存器，所以它不能分页。这是实模式（无地址转换）。

分页需要 36 位我认为（不要引用我的话）这就是 IA32e 的用武之地。IA-32e 上的额外位允许从 HDD 分页，这是它可以在 x64 Windows 上运行的唯一方式，因为 x64 需要 NX，它位于位 63。

请阅读 AMD 架构文档，我个人觉得它们比 Intel 版本提供更多信息。

[http://developer.amd.com/wordpress/media/2012/10/24593_APM_v21.pdf](http://developer.amd.com/wordpress/media/2012/10/24593_APM_v21.pdf)

引入了带有 AMD64 平面内存的 PS，取消了分段。

但是 32 位进程仍然需要段寄存器。在 AMD64 上，当 32 位进程到达栈顶时，会抛出一个指向新段寄存器的基地址的指针。这样 32 位应用程序可以有效地消耗尽可能多的 RAM，没有限制。在合理的范围内... :)

希望这可以帮助。

# c++ - 如何使用包括派生接口在内的接口正确公开 C++ API？

> ID：15335007
> 
> 赞同：0
> 
> 时间：2013-03-11T09:27:13.113
> 
> 标签：c++, interface, casting

下面的代码说明了这个问题。我正在尝试为仅使用接口（C++ 虚拟类）的 C++ 组件创建 API。我有一个 Base 和 Derived 类，并且有相应的 IBase 和 IDerived 接口，但是当我尝试将 IBase 强制转换为 Derived 时，这会导致错误。错误 C2594：“类型转换”：从“IBase *”到“派生 *”的模糊转换

这似乎是我正在尝试做的一件合理的事情，Java 或 C# 不会对此嗤之以鼻。有没有办法在 C++ 中实现这样的东西

```
class IBase
{
public :
  virtual int method_A(void) = 0;
  virtual int method_B(void) = 0;
  virtual int method_C(void) = 0;
};

class IDerived : public IBase
{
public :
  virtual int method_D(void) = 0;
};

class Base : public IBase
{
  int method_A(void) {return 1;};
  int method_B(void) {return 2;};
  int method_C(void) {return 3;};
};

class Derived : public IDerived, private Base
{
public:
  int method_D(void) {return 4;};
};

class HandleDerived
{
public :
  int handle_base(IBase * i_base)
  {
    Derived * derived = (Derived *) i_base;
    return derived->method_D();
  }
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T09:38:05.580

您正在查看的是多重继承。您`Derived`来自：

*   `IDerived`，它来源于`IBase`
*   `Base`, 这*也*源自`IBase`

因此，当您想处理函数中的`IBase`指针之类的指针时，不清楚您指的是哪个：来自 的那个，还是来自 的那个。`Derived``handle_base()``IBase``IDerived``Base`

解决方案可能是使用`public virtual`继承。但是，您可能应该查看有关此事的[C++ FQA Light 。](http://yosefk.com/c++fqa/inheritance-multiple.html)

您关于“Java 或 C# 不会眨眼”的评论并不完全正确。即使是 C++ 中的纯虚拟基类仍然是*类*，而不是接口（在 Java 的意义上），即您仍然有多重继承的情况。Java的解决方案是区分类和接口；（之一）C++ 的解决方案是虚拟继承。

# javascript - jquery flash 外部接口

> ID：15335009
> 
> 赞同：0
> 
> 时间：2013-03-11T09:27:15.673
> 
> 标签：javascript, jquery, flash, externalinterface

我现在是一个安静的绝望。

我正在尝试像这里的许多其他人一样让外部接口的东西与我的页面一起使用。不管我做什么或如何以正确的方式更改代码，我总是从 Firefox 或 chrome获得**“没有方法”报告！**

我正在尝试通过 jQuery 在 HTML 中使用“播放”链接触发 Flash 中的播放功能。想不通，怎么回事！

Flash CS6中的AS3.0（播放声音文件-在Flash中没问题，播放正常）：

```
import flash.external.ExternalInterface;

ExternalInterface.addCallback("playMusicJS", playMusic);

function playMusic(evt:MouseEvent):void {
  soundChannel.stop();
  soundChannel = sound.play();
  soundTimer.start(); // volume levels and time
  INSTPlayPause.gotoAndStop(2);
  soundChannel.addEventListener(Event.SOUND_COMPLETE, soundComplete);
  INSTPlayPause.INSTPauseBTN.addEventListener(MouseEvent.CLICK, pauseMusic);
} 
```

Javascript（jQuery）：

```
$(document).ready(function() {
  $('#play').click(function() {
    // var flash = document.getElementById("ASPlayer"); // tried as well - no luck
    var flash = $('#ASPlayer').get(0)
    flash.playMusicJS();
    alert("TEST");
  });
}); 
```

和 HTML：

```
<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="350" height="30"     id="ASPlayer" title="Player">
  <param name="movie" value="../_flash/TEST -ExternalInterface-.swf">
  <param name="quality" value="high">
  <param name="wmode" value="opaque">
  <param name="swfversion" value="11.0.0.0">
  <param name="expressinstall" value="../_flash/expressInstall.swf">
  <param name="allowScriptAccess" value="always" />
  <!--[if !IE]>-->
  <object type="application/x-shockwave-flash" data="../_flash/TEST -ExternalInterface-.swf" width="350" height="30" id="ASPlayer" title="Player">
    <!--<![endif]-->
    <param name="quality" value="high">
    <param name="wmode" value="opaque">
    <param name="swfversion" value="11.0.0.0">
    <param name="expressinstall" value="../_flash/expressInstall.swf">
    <param name="allowScriptAccess" value="always" />
    <!-- -->
    <embed src="../_flash/TEST -ExternalInterface-.swf" width="350" height="30" name="ASPlayer" quality="high" wmode="opaque" >
    <!-- -->
    <div>
      <p>Content on this page requires a newer version of Adobe Flash Player.</p>
      <p><a href="http://www.adobe.com/go/getflashplayer"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" width="112" height="33" /></a></p>
    </div>
    <!--[if !IE]>-->
  </object>
  <!--<![endif]-->
</object>
<p><a href="#" id="play">play</a></p>
</body>
<script type="text/javascript" src="TEST.js"></script>
</html> 
```

我认为这可能是DOM加载顺序问题，我尝试了很多组合来调用函数或在文档中放置文件的位置，但也没有运气！

我也检查了其他用户关于该问题的大多数条目并尝试了它们，但仍然没有用！我感谢任何想法或提示:)！

来自德国柏林的美好祝愿！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:32:14.480

1.  确保您的脚本被拉入页面，一种检查方法是使用 Chrome 调试器/FireFox Firebug 中的“源”选项卡并搜索文件。

2.  确保在包含 jQuery 之后包含脚本，因为它肯定依赖于它。

3.  确保您只包含了一个 jQuery 库。包含多个版本可能会导致问题。

4.  如果有其他一些库覆盖`$`，那么您的代码将无法正常工作，因为`$`它不再是别名`jQuery`。您可以使用它`jQuery.noConflict()`来避免与页面上使用相同变量的其他库发生冲突`$`。

# javascript - requirejs - 无法使用相对路径加载模块

> ID：15335015
> 
> 赞同：0
> 
> 时间：2013-03-11T09:27:28.657
> 
> 标签：javascript, requirejs, amd

在我的项目中，我有一个包含多个文件的 js 文件夹。js 文件夹下的一个文件 app.js 依赖于该文件夹下的其他文件。

我在这里读到（[define() 中的相对模块名称](http://requirejs.org/docs/api.html#modulenotes)），如果您使用“本地要求”，则可以使用相对路径加载模块。例如，如果我有：

```
js
|- app.js
|- util.js
|- logger.js 
```

然后我可以这样做：

```
//in app.js
define(function(require){
 var util = require("./util");
 var logger = require("./logger");    
 ...
}); 
```

但由于某种原因，这对我不起作用。我所看到的情况是，模块 util & logger 被请求相对于我在我的 require 配置中定义的 baseUrl。

这不是我所期望的，我无法真正理解它为什么会发生，特别是因为我的项目中有其他模块可以在相对路径下正常工作。

任何帮助表示赞赏。

* * *

**更新**

是否有可能在这里发生这种情况，因为我正在使用全局要求从另一个模块加载 app.js？

在 init.js 我有：

```
//in init.js
require(["config"], function (config) {
    require(["app"], function (app) {
    });
}); 
```

这会导致问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:26:36.637

第一个。尽量避免 CommonJS 风格调用`require`Go for AMD 风格。

CommonJS 风格：

```
var result = require(resource) 
```

AMD风格：

```
require([resource], function(result){}) 
```

RequireJS 不会**同步**加载 CJS 样式资源。它通过检查函数体并将需求注入定义来模拟它。你没有看到它，但你在那里写的实际上是这样运行的：

```
// app.js
define(['require', 'exports', 'module', './util', './logger'], function(require){
    var util = require("./util"); // <- "sync" call is ok because it's pre-loaded
    var logger = require("./logger"); // <- "sync" call is ok because it's pre-
}); 
```

你正在进入那里的巫毒教领域。尝试明确说明您需要的东西：

```
// app.js
define(['./util', './logger'], function(util, logger){
    ...
}); 
```

但是，如果您真的想使用“本地”需求，请以 AMD 方式进行，因为它肯定会启动所有模块 ID 解析规则：

```
// app.js
define(['require'], function(require){
    require(
        ['./util', './logger']
        , function(util, logger){
            ...
        }
    )
}); 
```

另外，这部分对我来说没有意义：

```
require(["config"], function (config) {
    require(["app"], function (app) {
    });
}); 
```

我希望是-的价值`"app"`是什么？`"js/app"``baseUrl``'js'`

app.js 中定义的路径看起来是正确的，但 RequireJS 解决的方式`"app"`可能是个问题。

# c - GCC - Signed Long within limits 在编译期间导致警告

> ID：15335020
> 
> 赞同：2
> 
> 时间：2013-03-11T09:27:34.890
> 
> 标签：c, gcc

在我的limits.h中，有符号长整数的限制为 - 定义LONG_MAX 2147483647L

但是，以下代码行会导致“表达式中的整数溢出”警告但程序运行文件并产生预期值。

```
long universe_of_defects = 1L * 1024L * 1024L * 1024L * 2L - 1L;
printf("The entire universe has %ld bugs.\n", universe_of_defects); 
```

打印的值为 - 2147483647

那么这个警告的原因是什么以及如何解决呢？我有 GCC - gcc (Ubuntu/Linaro 4.4.4-14ubuntu5) 4.4.5

注意 - 代码来自“Learn C the hard way”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:29:59.413

因为中间结果之一溢出，这在技术上会导致未定义的行为。

为避免这种情况，也许在可以保存中间结果的类型中进行计算，例如 unsigned long ( `UL`) 或 long long ( `LL`)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T09:36:10.197

该计算的第一部分溢出：

```
 1L * 1024L * 1024L * 1024L * 2L  -  1L
//  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//  2,147,483,648  >  2,147,483,647    It's too late!
//  Overflow occurs                    previous value is overflowed 
```

尝试

```
long universe_of_defects = 1LL * 1024 * 1024 * 1024 * 2 - 1; 
```

将`LL`值提升为`long long`类型，然后在`-1`它可以再次适合 a`long`之后。

# java - 如何在java中刷新网络名称的解析？

> ID：15335021
> 
> 赞同：1
> 
> 时间：2013-03-11T09:27:37.840
> 
> 标签：java, spring, networking, lucene

我目前正在编写一个 Java EE 应用程序来使用 Lucene 搜索索引。

我的应用程序驻留在 Windows 机器上的 Tomcat 服务器中，而索引数据位于另一台机器上。

有时（显然是随机的）网络名称变得无法访问。

这是我得到的例外：

```
12:29:39.011 [ajp-8039-5] ERROR o.f.c.d.p.viewmodel.PilotViewModel - The specified network name is no longer available: SimpleFSIndexInput(path="\\INDEXFILEPATH\indexfile.ext")
java.io.IOException: The specified network name is no longer available: SimpleFSIndexInput(path="\\INDEXFILEPATH\indexfile.ext")
at org.apache.lucene.store.SimpleFSDirectory$SimpleFSIndexInput.readInternal(SimpleFSDirectory.java:140) ~[lucene-core-3.6.1.jar:3.6.1 1362471 - thetaphi - 2012-07-17 12:40:12] 
```

这是相关的代码。异常被抛出`FSDirectory.open`

```
private void addReaderForRegistry(String indexDirectoryPath, List<IndexReader> readers) throws IOException{

    File indexFolder = new File(indexDirectoryPath);

    if (!(indexFolder.exists() || !(indexFolder.isDirectory()))) {
          throw new IOException(indexFolder.getName() + "is not a valid index location");
    }else{

        // search for subfolders
        List<String> subfolders = FileSystemHelper.listDirectories(indexFolder.getAbsolutePath());

        if(subfolders.isEmpty()){
            Directory fsDirectory = FSDirectory.open(indexFolder);
            IndexReader reader = IndexReader.open(fsDirectory);
            readers.add(reader);                
        }
    }
} 
```

我确定服务器已启动。

要解决此问题，我必须重新启动 Tomcat 应用程序服务器。我可以做些什么来做一些错误恢复吗？

请注意，FSDirectory 在每次请求时都会打开，因此简单的 bean 重新初始化不起作用。

谢谢。

编辑：这是一个更完整的堆栈跟踪

```
java.io.IOException: The specified network name is no longer available: SimpleFSIndexInput(path="\\hqwprceb1\DRMS-STRUCTURE\indexes_ready\AG\_o48.nrm")
at org.apache.lucene.store.SimpleFSDirectory$SimpleFSIndexInput.readInternal(SimpleFSDirectory.java:140) ~[lucene-core-3.6.1.jar:3.6.1 1362471 - thetaphi - 2012-07-17 12:40:12]
at org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java:156) ~[lucene-core-3.6.1.jar:3.6.1 1362471 - thetaphi - 2012-07-17 12:40:12]
at org.apache.lucene.index.SegmentNorms.bytes(SegmentNorms.java:164) ~[lucene-core-3.6.1.jar:3.6.1 1362471 - thetaphi - 2012-07-17 12:40:12]
at org.apache.lucene.index.SegmentReader.norms(SegmentReader.java:575) ~[lucene-core-3.6.1.jar:3.6.1 1362471 - thetaphi - 2012-07-17 12:40:12]
at org.apache.lucene.search.TermQuery$TermWeight.scorer(TermQuery.java:107) ~[lucene-core-3.6.1.jar:3.6.1 1362471 - thetaphi - 2012-07-17 12:40:12]
at org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuery.java:298) ~[lucene-core-3.6.1.jar:3.6.1 1362471 - thetaphi - 2012-07-17 12:40:12]
at org.apache.lucene.search.ConstantScoreQuery$ConstantWeight.scorer(ConstantScoreQuery.java:145) ~[lucene-core-3.6.1.jar:3.6.1 1362471 - thetaphi - 2012-07-17 12:40:12]
at org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuery.java:298) ~[lucene-core-3.6.1.jar:3.6.1 1362471 - thetaphi - 2012-07-17 12:40:12]
at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:577) ~[lucene-core-3.6.1.jar:3.6.1 1362471 - thetaphi - 2012-07-17 12:40:12]
at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:383) ~[lucene-core-3.6.1.jar:3.6.1 1362471 - thetaphi - 2012-07-17 12:40:12] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T12:28:17.940

我遇到了类似的问题（有时会丢失一个后来自动恢复的网络驱动器；IndexSearcher 没有从中恢复）。

我的***解决方法***是捕获 IndexSearcher#search 调用的很少发生的 IOException，然后删除此 IndexSearcher 实例（将对它的引用设置为 null）。下一个请求会懒惰地创建一个新的 IndexSearcher 实例（也可能会失败），希望网络驱动器现在可用。系统迟早会自行恢复。

我使用 lucene 3.5、JDK 1.6 和 Windows 7。

如果有人知道更好的解决方案->感谢您指出它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T10:20:53.180

看看下面的设置。

[http://www.vertigrated.com/blog/2009/11/disable-default-java-dns-caching/](http://www.vertigrated.com/blog/2009/11/disable-default-java-dns-caching/)

# javascript - 我怎样才能改变内容

> ID：15335025
> 
> 赞同：-1
> 
> 时间：2013-03-11T09:27:46.047
> 
> 标签：javascript, html, css

I have a page in HTML and I need to replace the content inside tag

```
<style type="text/css">
</style> 
```

injecting the content of another **.css** file hosted on the same domain.

Any idea how to do it in javascript?

```
<html>
  <head>
    <style type="text/css">
      h1 {color:red;}
      p {color:blue;}
    </style>
  </head>

  <body>
    <h1>A heading</h1>
    <p>A paragraph.</p>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T09:32:04.770

Add an id attribute to the style tag. Use this hook to change the contents of the style tag with Javascript.

**HTML**

```
<style id="myStyle" type="text/css">
h1 {color:red;}
p {color:blue;}
</style>

<h1>Something</h1> 
```

**Javascript**

```
var elem = document.getElementById("myStyle");
elem.innerHTML = "h1{color:blue;}"; 
```

**Working Example** [http://jsfiddle.net/4xAHr/](http://jsfiddle.net/4xAHr/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T09:30:35.927

If you just want to add those styles, you don't need to inject the content into the `style` element, just link that other file as a stylesheet:

```
var link = document.createElement('link');
link.rel = "stylesheet";
link.href = "/path/to/the/file.css";
document.getElementsByTagName('style')[0].parentNode.appendChild(link); 
```

That will "inject" the relevant styles into the document.

[Live Example using your markup](http://jsbin.com/igogoy/1) | [Source](http://jsbin.com/igogoy/1/edit)

# java - 如何修改 WTPartDescribeLink？

> ID：15335033
> 
> 赞同：1
> 
> 时间：2013-03-11T09:28:11.493
> 
> 标签：java, ptc-windchill

我有一个 WTPart 对象，它有一些与它关联的描述链接（作为 WTDocument）。现在我需要通过代码修改描述链接。

以下是我到目前为止尝试过的代码

```
Vector localVector=new Vector();
   QueryResult localQueryResult=WTPartHelper.service.getDescribedByWTDocuments(part,false);
    System.out.println("size is "+localQueryResult.size());
    if((localQueryResult!=null)&&(localQueryResult.hasMoreElements()))
    {
        while(localQueryResult.hasMoreElements())
        {
               WTObject localObject=(WTObject) localQueryResult.nextElement();
           localVector.addElement(localObject);
        }
    }
    if((localVector!=null)&&(localVector.size()>0))
    {
        for(int i=0;i<localVector.size();i++)
        {
            WTPartDescribeLink localPartlink=(WTPartDescribeLink) localVector.elementAt(i);
            WTDocument localWTDocument=localPartlink.getDescribedBy();
            System.out.println("values are "+localWTDocument.getNumber());
            RevisionControlled localRevisionControlled=null;
            localRevisionControlled=(RevisionControlled) VersionControlHelper.service.newVersion(localWTDocument);
            localRevisionControlled=(RevisionControlled) PersistenceHelper.manager.save(localRevisionControlled);

        }
    } 
```

此代码仅修改作为 Describelink 链接的 WTDocument 对象，但不修改 Describelink。如果我像这样直接传递描述链接对象

```
localRevisionControlled=(RevisionControlled) VersionControlHelper.service.newVersion((Versioned)localPartlink); 
```

意味着我收到如下错误消息

```
Exception in thread "main" java.lang.ClassCastException: wt.part.WTPartDescribeLink cannot be cast to wt.vc.Versioned
    at ext.gt.test.CheckLink.getPartlink(CheckLink.java:100)
    at ext.gt.test.CheckLink.searchPart(CheckLink.java:52)
    at ext.gt.test.CheckLink.main(CheckLink.java:32) 
```

我不知道如何解决这个问题，但我需要通过代码修改 Part describelink。建议我这个所需的 API 或一些示例代码片段对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T07:52:52.783

如果您需要更新 WTPartDescribeLink 上的某些属性，那么您应该创建一个新版本的 WTPart（而不是 WTDocument）。
可以使用以下代码完成：

```
part = VersionControlHelper.service.newVersion(part);
QueryResult qr =WTPartHelper.service.getDescribedByWTDocuments(part,false);

if(qr!=null)
{
    while(qr.hasMoreElements())
    {
       WTPartDescribeLink link =(WTPartDescribeLink) localQueryResult.nextElement();
       /** ...
       Update some attributes on the link
       ... **/
       link= PersistenceServerHelper.manager.save(link);
    }
} 
```

执行签出/签入以创建 WTPart 的新迭代并使用 Windchill 事务围绕操作可能会更好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:44:22.593

根据@Julien Boulay 上面给出的答案，我创建了一个方法来查询文档对象，然后在我用我的部分创建一个新链接后修改该文档。

```
private WTPartDescribeLink getPartlink(WTPart target) throws WTException, WTPropertyVetoException {
        WTDocument localWTDocument=null;
        if(target==null)
            return null;
        QueryResult localQueryResult=WTPartHelper.service.getDescribedByWTDocuments(target, false);
        ilogger.info("size of query result is "+localQueryResult.size());
        if((localQueryResult!=null)&&(localQueryResult.hasMoreElements()))
        {
            while(localQueryResult.hasMoreElements())
            {

                 WTObject localObject=(WTObject) localQueryResult.nextElement();
                 WTPartDescribeLink localPartlink=(WTPartDescribeLink) localObject;
                 localWTDocument=localPartlink.getDescribedBy();
            }
        }

        WTDocument docm=(WTDocument) VersionControlHelper.service.allVersionsOf(localWTDocument).nextElement();
        ilogger.info("values are "+docm.getNumber());
        String version=docm.getVersionIdentifier().getValue();
        String iteration=docm.getIterationIdentifier().getValue();
        ilogger.info("Object passing with version and iteration of"+version+"."+iteration);
        RevisionControlled localRevisionControlled=null;
        localRevisionControlled=(RevisionControlled) VersionControlHelper.service.newVersion(docm);
        localRevisionControlled=(RevisionControlled) PersistenceHelper.manager.save(localRevisionControlled);
        createLink(target,docm);
        return null;
    }

    private void createLink(WTPart spart, WTDocument localWTDocument) throws WTException {

                WTPartDescribeLink link=WTPartDescribeLink.newWTPartDescribeLink(spart, localWTDocument);
                PersistenceServerHelper.manager.insert(link);
                ilogger.info("Link saved ");

        } 
```

上面的代码现在可以正常工作了。

# sql - 通过默认成员身份进行 SQL 注入。

> ID：15335034
> 
> 赞同：0
> 
> 时间：2013-03-11T09:28:14.220
> 
> 标签：sql, asp.net-mvc, security

我正在使用 memebership.validateuser 函数来验证 Asp.net MVC 3 中的用户，但我发现它对于 SQL 注入来说不够安全。

该方法采用两个参数用户名和密码，然后服务从存储在其成员表中的值中进行检查，该表使用盐加密。

我们是否可以对这个功能有另一种方法，它比会员资格或 Asp.net 会员身份验证用户服务安全得多，我应该坚持下去？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:33:35.863

与其创建一个基本上可以完成`membership.validateuser`已经在做的事情的新方法，不如创建一个在将输入的用户名和/或密码传递给之前对输入的用户名和/或密码进行清理的方法`membership.validateuser`？

LINQ to SQL 和 Entity Framework 生成参数化 SQL，因此您可以防止 SQL 注入开箱即用。

回答你的最后一个问题：坚持下去。:)

# shell - 外壳比较号

> ID：15335036
> 
> 赞同：0
> 
> 时间：2013-03-11T09:28:18.197
> 
> 标签：shell

我正在尝试比较 2 个数字，下面的代码有什么问题？

```
 filesize=$(stat -c '%s' ${FILENAME})

    if [ $filesize -gt 12  ] ; then
        echo "Yes bigger ";
    fi 
```

我没有收到任何错误，但我从来没有打印过“是的更大”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:39:37.953

解决了。在比较之前，我正在回显“文件大小”。

```
filesize=$(stat -c '%s' ${FILENAME})

if [ $filesize -gt '12'  ] ; then
    echo "Yes bigger ";
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:41:56.037

为了完整起见，这会告诉你这是怎么回事：

```
filesize=$(stat -c '%s' ${FILENAME})

if [ $filesize -gt 12 ]
then
    echo "bigger"
elif [ $filesize -lt 12 ]
then
    echo "smaller"
else
    echo "equal"
fi 
```

并且：可能会出现您使用的外壳很重要**的情况。**因此，在您的问题中包含这些信息可能会有所帮助。

# neo4j - 根据关系参数排除关系

> ID：15335038
> 
> 赞同：1
> 
> 时间：2013-03-11T09:28:27.653
> 
> 标签：neo4j, cypher

我有一个 neo4j 密码遍历问题。

设置：我有一个从节点“a”开始的查询，并为我提供了关系为“FOO”的所有路径。所有这些“FOO”关系都有一个参数“BAR”。参数“BAR”可以有 2 个（或更多）值“1”和“2”。现在我想排除所有包含一个或多个 FOO.BAR="2" 关系的路径。

查询： START a=node(x) MATCH a-[rh:FOO*]->b RETURN rh; rh 为我提供了所有可能的路径，但我不知道如何添加有关关系的标准。

我在控制台中创建了一个场景（[http://console.neo4j.org/?id=219eub](http://console.neo4j.org/?id=219eub)）

```
    创造
    (a {name:"A"}),
    (b {name:"B"}),
    (c {name:"C"}),
    (d {name:"D"}),
    b-[:FOO{BAR:'1'}]->a,
    d-[:FOO{BAR:'1'}]->a,
    c-[:FOO{BAR:'2'}]->b,
    d-[:FOO{BAR:'1'}]->c

    开始 n=节点（4）
    匹配 n-[rh:FOO*]-b
    返回 rh;

```

这给了我查询结果

```
    +-------------------------------------------------- --------------------------+
    | n.name | 右下角 | b.名称 |
    +-------------------------------------------------- --------------------------+
    | "D" | [:FOO[2] {BAR:"1"}] | “一个” |
    | "D" | [:FOO[3] {BAR:"1"}] | "C" |
    | "D" | [:FOO[3] {BAR:"1"},:FOO[1] {BAR:"2"}] | "B" |
    | "D" | [:FOO[3] {BAR:"1"},:FOO[1] {BAR:"2"},:FOO[0] {BAR:"1"}] | “一个” |
    +-------------------------------------------------- --------------------------+

```

但我只想

```
    +-------------------------------------------------- --------------------------+
    | n.name | 右下角 | b.名称 |
    +-------------------------------------------------- --------------------------+
    | "D" | [:FOO[2] {BAR:"1"}] | “一个” |
    | "D" | [:FOO[3] {BAR:"1"}] | "C" |
    +-------------------------------------------------- --------------------------+

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:01:47.123

由于`rh`是一个集合，您可以应用[谓词函数](http://docs.neo4j.org/chunked/stable/query-function.html#_predicates)：

```
START n=node(4) 
MATCH n-[rh:FOO*]->b 
WHERE not any(r in rh where r.BAR="2") 
RETURN rh; 
```

# python - 使用 python 脚本删除文件夹

> ID：15335045
> 
> 赞同：-2
> 
> 时间：2013-03-11T09:28:39.137
> 
> 标签：python, file, directory

```
a = '/mnt/task/a'
b = '/mnt/task/b' 
```

在`a`和下`b`，
有一些文件夹，名称`201212194546921-6ab-45654545d-5445c`
如您所见，文件夹的名称由序列号和文件夹生成日期等内容组成。
如果我想删除在某个时间点之前生成的文件夹，如何找到并删除它们，
例如删除上周之前的文件夹

这里有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:56:01.693

有几个 python 模块可以帮助您做到这一点： `os.walk(path)`遍历给定路径上的所有文件夹， `os.path.getctime(fileName)`返回文件的创建日期。 `shutil.rmtree(folder)`删除文件夹及其内容

如果你把它们放在一起，你会得到这样的东西：

```
import os
import time
import shutil

for folder ,subFolder, filenames in os.walk('/mnt/task/a'):
    print folder , time.ctime( os.path.getctime(folder) )

    if os.path.getctime(folder) < (time.time() - 60*60*24*7):  
        print 'deleting: ' , folder
        #shutil.rmtree(folder)  
        while subFolder:
            subFolder.pop() 
```

**请注意**，此代码仅根据文件创建时间删除文件夹！除了文件日期之外，您可能还需要更多逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:52:04.067

假设您要删除的文件夹直接位于`a`or中`b`：
以下代码为每个文件夹创建一个日期时间对象，然后使用日期之间的差异来确定要删除哪个文件夹。

```
import os, datetime, errno, stat, shutil
a = 
b = 

date = ''
ref = datetime.date(2013,12,20)

def parse_name(fname):
    '''Returns False when unsucessful, datatime.date() when successful'''
    if len(fname) > 9:
        try:
            year = int(fname[:4])
            month = int(fname[4:6])
            day = int(fname[6:8])
            return datetime.date(year, month, day)
        except ValueError,e:
            return False
    else:
        return False

f2remove = []
for dirc in (a,b):
    for item in os.listdir(dirc):
        if os.path.isdir(os.path.join(dirc,item)):
            x = parse_name(item)
            if x and (ref - x).days >= 0:
                f2remove.append(os.path.join(dirc,item))

# --- deleting files --- #
for filename in f2remove:
    print 'removing', filename.split('\\')[-1]
    shutil.rmtree(filename) 
```

# android - GCM onMessage 未调用

> ID：15335050
> 
> 赞同：2
> 
> 时间：2013-03-11T09:28:56.817
> 
> 标签：android, google-cloud-messaging

我搜索了互联网，但无法让我的 GCM 服务器/客户端正常工作。

我怀疑这是客户端的问题，因为我从服务器端获得了成功响应。

无论如何，我正在剪辑客户端代码和服务器代码。

顺便说一句，我可以注册我的设备 ID。

服务器端

```
 Sender sender = new Sender(apiKey);

        Message message = new Message.Builder()
        .delayWhileIdle(true)
        .addData("AUB",text)
        .build(); 

        Result result = null;
        try {
            result = sender.send(message, deviceID, 5);
            return "sent " + "Message ID:" + result.getMessageId() + message.getData();
        } catch (IOException e) {
            e.printStackTrace();
            return "error: " + result.getErrorCodeName();
        } 
```

客户端

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mainactivity);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

        GCMRegistrar.checkDevice(this);
        GCMRegistrar.checkManifest(this);

        registerReceiver(mHandleMessageReceiver, new IntentFilter(
                Constants.DISPLAY_MESSAGE_ACTION));
        String regId = GCMRegistrar.getRegistrationId(this);
        if (regId.equals("")) {
            GCMRegistrar.register(this, Constants.SENDER_ID);
            Log.v(TAG, "Registered");
        } else {
            Log.v(TAG, "Already registered");
            Log.v(TAG, GCMRegistrar.getRegistrationId(this));
        }

    }

private final BroadcastReceiver mHandleMessageReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String newMessage = intent.getExtras().getString(
                    Constants.EXTRA_MESSAGE);
            Log.v(TAG, newMessage);
        }
    }; 
```

GCMIntentService

```
public class GCMIntentService extends GCMBaseIntentService {

    public GCMIntentService() {
        super(Constants.SENDER_ID);
    }

    @Override
    protected void onError(Context arg0, String arg1) {

    }

    @Override
    protected void onRegistered(Context context, String registrationId) {
        Log.v(TAG, "Device registered: regId = " + registrationId);

    }

    @Override
    protected void onUnregistered(Context arg0, String arg1) {
        // TODO Auto-generated method stub

    }

    @Override
    protected void onMessage(Context context, Intent intent) {
        Log.i(TAG, "Received message");
        String message = "AUB";
        Constants.displayMessage(context, message);
        // notifies user
        generateNotification(context, message);
    }

    private static void generateNotification(Context context, String message) {
        int icon = R.drawable.ic_launcher;
        long when = System.currentTimeMillis();
        NotificationManager notificationManager = (NotificationManager)
                context.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(icon, message, when);
        String title = context.getString(R.string.app_name);
        Intent notificationIntent = new Intent(context, MainActivity_.class);
        // set intent so it does not start a new activity
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |
                Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent intent =
                PendingIntent.getActivity(context, 0, notificationIntent, 0);
        notification.setLatestEventInfo(context, title, message, intent);
        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        notificationManager.notify(0, notification);
    }

} 
```

显现

```
<receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                <category android:name="PACKAGE" />
            </intent-filter>
        </receiver>

        <service android:name=".GCMIntentService" android:enabled="true"/>

<permission
        android:name="PACKAGE.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />
    <!-- Permissions for GCM -->
    <!-- App receives GCM messages. -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <!-- GCM requires a Google account. -->
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <!-- Keeps the processor from sleeping when a message is received. -->
    <!--  -->
<uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="PACKAGE.permission.C2D_MESSAGE" />
    <uses-permission android:name="PACKAGE.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

我已经解决了这个问题。显然我们的网络阻塞了 5228 端口。

# python - Python 2/3 中的编码/解码有什么区别

> ID：15335052
> 
> 赞同：2
> 
> 时间：2013-03-11T09:29:03.957
> 
> 标签：python, string, encoding

在 Python 3 中，我们使用`"string".encode()`and`"string".decode()`将 Unicode 字符串转换为字节字符串，或者将字节字符串转换为 Unicode 字符串。

在 Python 2 中，我们有`str()`and `unicode()`，我们也可以`encode()`和`decode()`to 他们。但是，Python 3 之间有什么区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:37:10.460

在python2中，str是字节字符串，unicode是unicode字符串。但是编码和解码有些傻，详情参考[http://nedbatchelder.com/text/unipain.html](http://nedbatchelder.com/text/unipain.html)

# dart - 如何独立使用 Google Dart web-ui @observable？

> ID：15335056
> 
> 赞同：5
> 
> 时间：2013-03-11T09:29:11.257
> 
> 标签：dart, dart-webui

我不知道如何使用@observable 注释/Observable 类在对象状态发生变化时获得简单的通知。

```
import 'package:web_ui/observe.dart';

@observable class T{
  String x;
// what else is needed?
}

T t = new T();
observe(t, (e) => print ("Value changed"));
t.x = "Changed"; 
```

如果可能的话，我想在没有 web-ui 其余部分的情况下使用 observables（作为骨干网的替代品）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T05:55:31.270

您将需要运行 dwc 编译器，它会查找 @observable 并生成实际实现观察的新源代码。我从来没有尝试在没有 Web UI 的情况下运行 observables，但你肯定需要 dwc 来生成正确的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-05T15:24:06.367

我只是花了一些时间尝试做同样的事情。如上面的答案所述，您不能在`@observable`没有 WebUI/Polymer 的情况下使用注释。但是，您可以使用 observable 包。这是一个简单的例子：

```
import 'package:observe/observe.dart';

void main() {
  var person = new Person(18, false);

  person.changes.listen((List<ChangeRecord> changes) {
    changes.forEach((PropertyChangeRecord change) {
      print("$change");
    });
  });

  person.changes.listen((List<ChangeRecord> changes) {
    changes.where((PropertyChangeRecord c) => c.name == #employed).forEach((PropertyChangeRecord change) {
      print("Employment status changed!");
    });
  });

  print("start changing");

  person.age =  19;
  person.age =  19;
  person.age =  19;
  person.age = 20;
  person.employed = true;
  person.age = 21;
  person.age = 22;

  print("finish changing");
}

class Person extends ChangeNotifier {

  int _age;
  int get age => _age;
  void set age (int val) {
    _age = notifyPropertyChange(#age, _age, val);
  }

  bool _employed;
  bool get employed => _employed;
  void set employed (bool val) {
    _employed = notifyPropertyChange(#employed, _employed, val);
  }

  Person(this._age, this._employed);
} 
```

这些事件是异步的，因此如果您依赖这些事件的顺序，请小心。上述程序的输出是

```
start changing
finish changing
#<PropertyChangeRecord Symbol("age") from: 18 to: 19>
#<PropertyChangeRecord Symbol("age") from: 19 to: 20>
#<PropertyChangeRecord Symbol("employed") from: false to: true>
#<PropertyChangeRecord Symbol("age") from: 20 to: 21>
#<PropertyChangeRecord Symbol("age") from: 21 to: 22>
Employment status changed! 
```

# hive - 在从 HIVE 表中查询 S3 数据的单个列时获取 FileNotFoundException

> ID：15335057
> 
> 赞同：3
> 
> 时间：2013-03-11T09:29:11.457
> 
> 标签：hive

我使用以下语句在 HIVE 中创建了一个表。我的输入数据位于`S3(s3n://test/hiveTest/01/)`.

```
CREATE external TABLE tests3(firstName STRING, lastName STRING) ROW FORMAT
DELIMITED FIELDS TERMINATED BY '\t'
STORED AS TEXTFILE
location 's3n://test/hiveTest/01/'; 
```

当我发出以下命令时，我可以看到结果数据。

> 蜂巢>从测试3中选择*；OK 第一 第二 第三 第四 所用时间：1.647 秒

但是当我从表中选择特定列时会出现以下错误

> 蜂巢>从测试3中选择名字；总 MapReduce 作业 = 1 正在启动作业 1 / 1 由于没有 reduce 运算符 java.io.FileNotFoundException：文件不存在：/tests3/hiveTest/01/abc.txt 在 org.apache，因此减少任务的数量设置为 0。 hadoop.hdfs.DistributedFileSystem.getFileStatus(DistributedFileSystem.java:736) at org.apache.hadoop.mapred.lib.CombineFileInputFormat$OneFileInfo.(CombineFileInputFormat.java:462) at org.apache.hadoop.mapred.lib.CombineFileInputFormat.getMoreSplits (CombineFileInputFormat.java:256) 在 org.apache.hadoop.mapred.lib.CombineFileInputFormat.getSplits(CombineFileInputFormat.java:212) 在 org.apache.hadoop.hive.shims.HadoopShimsSecure$CombineFileInputFormatShim.getSplits(HadoopShimsSecure.java:387) ) 在 org.apache.hadoop.hive.shims。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T10:16:23.627

请尝试在查询运行之前设置波纹管参数：

```
SET hive.input.format=org.apache.hadoop.hive.ql.io.HiveInputFormat; 
```

# sql-server - 将字符串从 PowerShell 转换为 sqldbtype。约会时间

> ID：15335063
> 
> 赞同：0
> 
> 时间：2013-03-11T09:29:22.173
> 
> 标签：sql-server, powershell

我有两个参数，`from`和`to date`。我需要从 PowerShell 传递到 SQL[存储过程](http://en.wikipedia.org/wiki/Stored_procedure)。我创建了一个 GUI 以“YYYY-MM-DD”的格式输入参数。但是，它是一个字符串，我需要将其转换为 'YYYY-MM-DD, 00:00:000' 格式的 sqldatetime，以便它可以正确生成 SQL。

我尝试了以下方法，但它不起作用。我做错什么了？

```
$SqlConnection = New-Object System.Data.SqlClient.SqlConnection
$SqlConnection.ConnectionString = "Server=localhost;Database=AMSDataWarehouse     test;Integrated Security=SSPI"
$SqlCmd = New-Object System.Data.SqlClient.SqlCommand
$SqlCmd.Connection = $SqlConnection
$SqlCmd.CommandText = "YQBreport1"
SqlParameter param1 = new SqlParameter("@from",System.Data.SqlDbType.DateTime);
param1.Value = $from;
SqlParameter param2 = new SqlParameter("@to",System.Data.SqlDbType.DateTime);
param2.Value = $to;
$SqlConnection.Open()
$sqlcmd.ExecuteNonQuery()
$SqlAdapter = New-Object System.Data.SqlClient.SqlDataAdapter
$SqlAdapter.SelectCommand = $SqlCmd
$DataSet = New-Object System.Data.DataSet
$SqlAdapter.Fill($DataSet)
$SqlConnection.Close()
$SQLResult =$DataSet.Tables[0]
$commands = $SQLResult | foreach-object -process { $_.output }> output.ps1
.\output.ps1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:41:59.440

您的语法不是有效的 PowerShell：

```
SqlParameter param1 = new SqlParameter("@from",System.Data.SqlDbType.DateTime);
param1.Value = $from; 
```

试试这个：

```
$param1 = $SqlCmd.Parameters.Add("@from", [System.Data.SqlDbType]::DateTime)
$param1.Value = Get-Date $from
$param2 = $SqlCmd.Parameters.Add("@to", [System.Data.SqlDbType]::DateTime)
$param2.Value = Get-Date $to 
```

# url - 需要使用 Application for BlackBerry 处理 URL 响应

> ID：15335064
> 
> 赞同：0
> 
> 时间：2013-03-11T09:29:41.627
> 
> 标签：url, browser, blackberry

我正在开发一个应用程序，我需要在其中启动和实现以下功能：

1.  当我在桌面浏览器中注册网站时，它会向用户邮件发送一个 URL 链接。
2.  当用户从他的移动设备单击邮件中的链接时，它将移动到浏览器并显示一个页面，时间只有几分之一秒。
3.  然后立即，它将得到正确的响应并打开应用程序。根据响应，我需要显示屏幕。
4.  如果用户直接在浏览器中键入相同的 URL，则不应打开应用程序或启动应用程序。

现在，如果我单击 BlackBerry Mail 中的 URL，它将启动浏览器。之后它显示一个对话框：

***“您选择的项目无法显示。您要保存该项目吗？”***

那么如果我需要实现上述功能，我应该实现哪些 API？我尝试过使用 HttpFilter Registry。但主要问题是，如果我直接在浏览器中键入相同的 URL，它将启动应用程序。在我的情况下不应该发生这种情况。

但是，我如何跟踪/识别使用我的应用程序从邮件中打开的 URL？而不是下载响应文件（基本上是一个 xml 响应），我怎样才能获得对我的应用程序的响应。

请给出一些解决方案/建议。提前致谢。

# android - 用户单击按钮时手机的位置

> ID：15335067
> 
> 赞同：0
> 
> 时间：2013-03-11T09:30:00.457
> 
> 标签：android, android-location

在我的应用程序中，一旦用户单击按钮，我就需要获取电话位置。这是我的代码。

```
import android.location.*;
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {

    private double latitude;
    private double longitude;
    private Button sendrequest;
    private TextView text;
    private LocationManager locationManager;
    private String provider;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        setViews();
    }

    private void setViews() {
        text = (TextView) findViewById(R.id.textView);
        sendrequest = (Button) findViewById(R.id.button);

        sendrequest.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
                Criteria criteria = new Criteria();
                provider = locationManager.getBestProvider(criteria, false);
                Location location = locationManager.getLastKnownLocation(provider);
                if (location != null) {
                    text.append("Provider " + provider + " has been selected.");
                    //onLocationChanged(location);
                  } else {
                      text.append("Location not avilable");
                  }
            }
        });
    }
} 
```

但它没有返回我的位置。它只是将“位置不可用”字符串附加到文本 TextView。我知道这是因为它返回最后一个存储的位置，它是空的。但我不想使用 LocationListener 因为我只想要一次位置。即当用户启动应用程序时。请帮忙。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-11T09:34:44.320

您必须在您的 android manifest xml 文件中设置以下权限才能访问位置。

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.INTERNET" /> 
```

# ffmpeg - 我可以使用 FFmpeg 为视频流设置旋转字段吗？

> ID：15335073
> 
> 赞同：39
> 
> 时间：2013-03-11T09:30:12.587
> 
> 标签：ffmpeg, video-conversion

我有一个视频文件。我用 MediaInfo 实用程序打开它，我可以在这个文件中看到一个视频流，其属性为 Rotation 90（以及其他属性，如 CodecID、比特率等）。

现在我有另一个没有Rotation 90 属性的视频文件，它根本没有Rotation 属性。

我可以使用 ffmpeg.exe 来生成添加了 Rotation 90 属性且没有其他更改的输出文件吗？我真的不想做任何变换，只想设置 Rotation 属性。

我试过这个`-metadata`选项无济于事。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-03-11T10:44:01.303

这适用于最近的 FFmpeg：

```
ffmpeg -i input.mp4 -c copy -metadata:s:v:0 rotate=90 output.mp4 
```

这将[流式复制](https://ffmpeg.org/ffmpeg.html#Stream-copy)比特流，因此不执行编码。此处仅更改了第一个视频流 ( `v:0`) 的元数据，播放器将以旋转方式显示视频。（并非所有玩家都会支持这一点。）

补充笔记：

*   如果要“物理”旋转视频，则必须[使用`transpose`filter](https://stackoverflow.com/a/9570992/435093)。过滤将需要重新编码，因此您必须删除`-c copy`.

*   如果您省略`-c copy`，并且想要编码而不是仅重新混合，那么`ffmpeg`如果存在任何现有的旋转元数据，则将自动旋转视频。您可以使用 禁用此行为`-noautorotate`。

# android - 滚动视图在android中太慢了

> ID：15335075
> 
> 赞同：1
> 
> 时间：2013-03-11T09:30:14.827
> 
> 标签：android, scrollview, android-linearlayout, slidingdrawer

我正在显示 6`TextViews`中的`LinearLayout`. 我保留`ScrollView`了所有这些 LinearLayout。

```
My Code is as follows...
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/mobilepage"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:gravity="center"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="160dp"
            android:layout_height="30dp"
            android:src="@drawable/logo" />

    </LinearLayout>

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <FrameLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_marginTop="10dp" >

                <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:gravity="center_horizontal"
                    android:orientation="vertical" >

                    <LinearLayout
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center_horizontal"
                        android:orientation="horizontal" >

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:paddingTop="5dp"
                            android:text="SIGN IN"
                            android:textColor="@color/white"
                            android:textSize="18dp"
                            android:typeface="sans" />

                    </LinearLayout>

                    <EditText
                        android:id="@+id/etUsername"
                        android:layout_width="230dp"
                        android:layout_height="40dp"
                        android:layout_marginTop="8dp"
                        android:background="@drawable/edittext_bg_siginusername"
                        android:hint="Email or username"
                        android:textSize="14dp"
                        android:typeface="sans" />

                    <EditText
                        android:id="@+id/etPassword"
                        android:layout_width="230dp"
                        android:layout_height="40dp"
                        android:background="@drawable/edittext_bg_signinpassword"
                        android:hint="Password"
                        android:password="true"
                        android:textSize="14dp"
                        android:typeface="sans" />

                    <LinearLayout
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_horizontal"
                        android:gravity="center_horizontal" >

                        <CheckBox
                            android:id="@+id/cbUserpass"
                            android:layout_width="122dp"
                            android:layout_height="wrap_content"
                            android:layout_marginRight="100dp"
                            android:paddingTop="3dp"
                            android:text="Remember me"
                            android:textColor="@color/white"
                            android:textSize="10dp"
                            android:textStyle="bold" />

                    </LinearLayout>

                    <Button
                        android:id="@+id/bSignin"
                        android:layout_width="186dp"
                        android:layout_height="38dp"
                        android:layout_gravity="center"
                        android:background="@drawable/signinbutton"
                        android:paddingBottom="6dp"
                        android:text="SIGN IN"
                        android:textColor="@color/white"
                        android:textSize="14dp"
                        android:typeface="sans" />

                    <Button
                        android:id="@+id/bSigninFacebook"
                        android:layout_width="186dp"
                        android:layout_height="38dp"
                        android:layout_gravity="center"
                        android:layout_marginTop="20dp"
                        android:background="@drawable/signinbutton"
                        android:paddingBottom="6dp"
                        android:text="Login via Facebook"
                        android:textColor="@color/white"
                        android:textSize="14dp"
                        android:typeface="sans" />

                </LinearLayout>

                <SlidingDrawer
                    android:id="@+id/SlidingDrawer"
                    android:layout_width="fill_parent"
                    android:layout_height="300dp"
                    android:content="@+id/contentLayout"
                    android:handle="@+id/slideButton"
                    android:orientation="horizontal" >

                    <Button
                        android:id="@+id/slideButton"
                        android:layout_width="34dp"
                        android:layout_height="65dp"
                        android:background="@drawable/slidedrawer" >
                    </Button>

                    <LinearLayout
                        android:id="@+id/contentLayout"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:layout_gravity="center_horizontal"
                        android:gravity="center_horizontal" >

                        <ScrollView
                            android:layout_width="fill_parent"
                            android:layout_height="fill_parent">

                            <LinearLayout
                                android:layout_width="fill_parent"
                                android:layout_height="fill_parent"
                                android:background="@drawable/royalblue_transparent"
                                android:gravity="center"
                                android:orientation="vertical" >
        .............6 textViews                
                            </LinearLayout>
                        </ScrollView>
                    </LinearLayout>
                </SlidingDrawer>
            </FrameLayout>
        </LinearLayout>
    </ScrollView>
</LinearLayout> 
```

当我将`LinearLayout`id(contentlayout) 作为内容添加到滑动抽屉时，`ScrollView`速度非常慢。当我为它保留的相同 ID`ScrollView`不起作用时。

请帮助我使滚动视图正常。我已经搜索过此类问题，但没有得到任何有用的答案。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T13:39:53.933

避免在 LinearLayout 中使用 LinearLayout。限制自己最多 2 个线性布局级别（即线性内线性）。需要多次迭代才能在屏幕上显示最终布局。它会在一定程度上提高你的表现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-12T04:31:12.643

在我的情况下，我的图像几乎有 2000x2000 像素，我正在调整大小为 50x50。

删除`imageview`标签布局返回正常响应。

所以提示是，尝试将图像调整为像素较少的图像并放入正确的可绘制文件夹中。

看看：[不同分辨率支持android](https://stackoverflow.com/questions/16706076/different-resolution-support-android)

# iphone - 让 iOS 应用程序在前台运行

> ID：15335083
> 
> 赞同：0
> 
> 时间：2013-03-11T09:30:44.533
> 
> 标签：iphone, ios, xcode, background, foreground

我想知道是否有办法让应用程序在特定的间隔时间内保持在前台运行。

我有一个线程在 3 分钟内准确运行，我需要用户不能离开应用程序。如果这样的事情是不可能的，我会问另一个问题。

我可以让用户将应用程序设置为后台模式，因为我使用该`applicationDidEnterBackground:(UIApplication *)application`方法来保存我需要的数据，但是如果用户单击电源按钮，我该如何保存数据？

会`applicationWillTerminate:(UIApplication *)application`被称为？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:54:37.613

您可能需要查看`beginBackgroundTaskWithExpirationHandler`，它可以让您的应用程序在后台运行时请求额外的处理时间来完成任务。

也就是说，不建议您这样做。您应该确保您的应用程序可以从您的三分钟任务中恢复，以防意外终止或失败。例如，您的应用程序可能会因内存不足而意外崩溃或终止 - 在这些情况下，您不会收到对`applicationWillTerminate`或的任何回调`applicationDidEnterBackground`。

因此，我的建议是考虑使用 iOS 的后台任务支持，以便在用户离开应用程序时让您的保存在后台继续，但还要确保如果您的应用程序在没有警告的情况下被系统终止，您的任务是可恢复的/可以安全地被重绕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:21:44.747

您需要使用`beginBackgroundTaskWithExpirationHandler`来处理您的进程。使用此代码。

在这里，我从 applicationDidEnterBackground:(UIApplication *)application 调用此方法以将数据存储在 SQlite 中，即使应用程序进入后台或 UIApplicationStateInactive（按电源按钮）。如果 application.backgroundTimeRemaining 为 0，则根据 IOS 标准，保存过程将持续 10 分钟 使用此代码并自定义您的流程。

```
-(void)handleBackgroundSavingingProcess:(UIApplication *)application
    {
        NSLog(@"background task remaining time before background %f",application.backgroundTimeRemaining);

        if ((([application applicationState] == UIApplicationStateBackground) || ([application applicationState] == UIApplicationStateInactive)) && [application respondsToSelector:@selector(beginBackgroundTaskWithExpirationHandler:)])
  {

     self.bgTaskId = [application beginBackgroundTaskWithExpirationHandler:^{
     // Synchronize the cleanup call on the main thread in case
     // the task actually finishes at around the same time.
                NSLog(@"background task remaining time in expiration handler %f",application.backgroundTimeRemaining);

                dispatch_queue_t concurrentQueue;
                if([[[UIDevice currentDevice] systemVersion] doubleValue] >= 5.0)
                    concurrentQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0UL);
                else
                    concurrentQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0UL);

                if (concurrentQueue == nil)
                    return;

                dispatch_async(concurrentQueue, ^{

                    if (self.bgTaskId != UIBackgroundTaskInvalid){
                        NSLog(@"background task remaining time in dispatch queue %f",application.backgroundTimeRemaining);
                        NSLog(@" Downloading status %d",self.isDownloadingInComplete);
                        if(self.isDownloadingInComplete)
                        {
                            [application presentLocalNotificationNow:localNotification];
                            NSLog(@"Local notification fired.");
                        }
                        [DataManager managedObjectContext] save:nil];
                        [application endBackgroundTask:self.bgTaskId];
                        self.bgTaskId = UIBackgroundTaskInvalid;
                        NSLog(@"Initialization invalid.");
                    }
                });
            }];
        }

    } 
```

# xpages - 富文本和表格

> ID：15335087
> 
> 赞同：0
> 
> 时间：2013-03-11T09:30:52.517
> 
> 标签：xpages

我有一个数据库，人们可以在其中使用笔记客户端和网络浏览器创建和编辑文档。只要涉及到富文本和表格，一切都可以正常工作。在 Web 中创建和编辑的表（使用 ckeditor）在 Notes 客户端中看起来很糟糕。据我所知，这是因为富文本字段正在更改为 mime 字段。更改表单中的字段属性以将其内容存储为 HTML 并没有帮助。有什么方法可以像在 xpage 中一样在笔记客户端中显示表格？由于我无法将扩展库分发给所有客户端，因此我需要在没有 xpinc 且不将表单显示为 Xpage 的情况下执行此操作。

这是表格在 Web 和客户端中的外观：

网址：http: [//y73i.img-up.net/web1dfd0.png](http://y73i.img-up.net/web1dfd0.png)

客户端[http://n68i.img-up.net/client1ecc0.png](http://n68i.img-up.net/client1ecc0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:00:14.973

HTML -> RichtText -> HTML 转换是 Notes 中的一个挑战。您拥有的选项是：

*   XPiNC（如果您仔细观察，部署扩展库并不太难（使用更新站点和策略）
*   Coex Edit（[Geniisoft的商业产品](http://www.geniisoft.com/showcase.nsf/CoexEdit)
*   具有嵌入式浏览器的复合应用程序（您可以教复合应用程序打开页面而不是表单
*   Notes 表单中的嵌入式浏览器控件

无论如何，您都希望坚持使用 HTML/MIME，因为它是更中性的格式。

# coldfusion - 谁能解释 fusebox 框架（coldfusion）中“做动作”的所有属性

> ID：15335088
> 
> 赞同：0
> 
> 时间：2013-03-11T09:30:55.093
> 
> 标签：coldfusion, fusebox

谁能解释**fusebox**框架（coldfusion）中“做动作”的所有属性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:50:06.197

这个链接很有用：http: [//www.dopefly.com/projects/fuseboxxmlcheatsheet.cfm](http://www.dopefly.com/projects/fuseboxxmlcheatsheet.cfm)

/fusebox/circuit.dtd 中的文档也有一些解释：

**操作**必需。定义要添加到 Fuseaction 队列的 fuseaction。可以是完全合格的熔断器（例如 someCircuit.someFuseaction），也可以是同一电路中的另一个熔断器（例如 someOther）。

**内容变量**可选。如果指定了内容变量名，则action属性中fuseaction的所有输出都会保存到这个变量名中。

**append**可选，默认为 false。确定 fuseaction 的输出是附加到 (true) 还是覆盖 (false) 在 contentvariable 属性中指定的 contentvariable。

**覆盖**可选，默认为真。如果指定了 contentvariable 并且此属性为“false”，则仅当指定的 contentvariable 尚未定义时才包含模板。

# android - 一个日期选择器的更改反映到活动中的其他日期选择器

> ID：15335090
> 
> 赞同：1
> 
> 时间：2013-03-11T09:30:56.853
> 
> 标签：android

我的活动有 3 个日期选择器。当我单击第一个日期选择器并进行更改时，它会反映到其他日期选择器。但是当我点击它时，每个日期选择器都应该显示当前日期。

当我在第一个日期选择器上选择日期 23-07-1993 并将其设置在编辑文本中时，然后我单击第二个日期选择器它显示日期 23-07-1993。因此我在第一个选择器中所做的更改反映在这里.

我想要的是每次单击日期选择器时它都应该显示当前日期，它不应该反映其他选择器的更改。

我的 .java 类是

```
 private void setDateOfBirth() {
  DatePickerDialog.OnDateSetListener dateOfBirth = new DatePickerDialog.OnDateSetListener() {
           @Override
           public void onDateSet(DatePicker view, int year, int monthOfYear,int dayOfMonth) {
             calendar.set(Calendar.YEAR, year);
             calendar.set(Calendar.MONTH, monthOfYear);
             calendar.set(Calendar.DAY_OF_MONTH, dayOfMonth);
             updateDateOfBirth();
           }//onDateSet

           private void updateDateOfBirth() {
              String myFormat = "yyyy-MM-dd"; //In which you need put here
              SimpleDateFormat sdf = new SimpleDateFormat(myFormat, Locale.US);
              date_of_birth = sdf.format(calendar.getTime());
              Log.d("date_of_birth",date_of_birth);
              edittext_dateOfBirth.setText(date_of_birth);
           }//updateRenewalDate
    };//DatePickerDialog
}

private void setJoinDate() {
DatePickerDialog.OnDateSetListener joinDate = new DatePickerDialog.OnDateSetListener() {
           @Override
           public void onDateSet(DatePicker view, int year, int monthOfYear,int dayOfMonth) {
             calendar.set(Calendar.YEAR, year);
             calendar.set(Calendar.MONTH, monthOfYear);
             calendar.set(Calendar.DAY_OF_MONTH, dayOfMonth);
             updateJoinDate();
           }//onDateSet

           private void updateJoinDate() {
              String myFormat = "yyyy-MM-dd"; //In which you need put here
              SimpleDateFormat sdf = new SimpleDateFormat(myFormat, Locale.US);
              join_date = sdf.format(calendar.getTime());
              Log.d("join_date",join_date);
              edittext_joinDate.setText(join_date);
           }//updateJoinDate
        };//DatePickerDialog
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:25:35.200

您在它们之间使用相同的日历对象，这就是它们都被反映的原因。为每个日期选择器制作三个单独的日历对象。

# c# - 如何在代码中设置属性值？

> ID：15335092
> 
> 赞同：1
> 
> 时间：2013-03-11T09:31:01.677
> 
> 标签：c#, wpf, xaml

如何在代码中设置样式的属性值？我有一个资源字典，我想更改代码中的一些属性，我该怎么做？

wpf代码：

```
<ResourceDictionary 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Style
        x:Key="ButtonKeyStyle"
        TargetType="{x:Type Button}">

        <Setter Property="Width" Value="{Binding MyWidth}"/>
        .... 
```

C#代码：

```
Button bt_key = new Button();
bt_key.SetResourceReference(Control.StyleProperty, "ButtonKeyStyle");
var setter = new Setter(Button.WidthProperty, new Binding("MyWidth"));
setter.Value = 100;
... 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:40:44.060

您还没有解释运行代码时发生了什么（或没有发生）。但是，您发布的代码正在创建一个`new Setter(...)`但不会显示您正在使用它做什么。您需要将创建的 setter 添加到样式中才能生效。

但是，您所引用的样式的 Xaml 中已经有一个宽度属性的设置器。所以，我怀疑你实际上想要编辑现有的 setter 而不是创建一个新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:15:36.457

为什么不在 XAML 中创建按钮，然后`INotifyPropertyChanged`在代码中实现 -Interface 并为“MyWidth”创建一个属性？它可能看起来像这样：

XAML：

```
<Button Name="MyButton" Width="{Bindind Path=MyWidth}" /> 
```

视图模型/代码隐藏：

```
// This is your private variable and its public property
private double _myWidth;
public double MyWidth
{
    get { return _myWidth; }
    set { SetField(ref _myWidth, value, "MyWidth"); } // You could use "set { _myWidth = value; RaisePropertyChanged("MyWidth"); }", but this is cleaner. See SetField<T>() method below.
}

// Feel free to add as much properties as you need and bind them. Examples:
private double _myHeight;
public double MyHeight
{
    get { return _myHeight; }
    set { SetField(ref _myHeight, value, "MyHeight"); }
}

private string _myText;
public double MyText
{
    get { return _myText; }
    set { SetField(ref _myText, value, "MyText"); }
}

// This is the implementation of INotifyPropertyChanged
public event PropertyChangedEventHandler PropertyChanged;
protected void RaisePropertyChanged(String propertyName)
{
    if (PropertyChanged != null)
        PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
}

// Prevents your code from accidentially running into an infinite loop in certain cases
protected bool SetField<T>(ref T field, T value, string propertyName)
{
    if (EqualityComparer<T>.Default.Equals(field, value))
            return false;

    field = value;
    RaisePropertyChanged(propertyName);
    return true;
} 
```

然后，您可以将按钮的宽度属性绑定到此“MyWidth”属性，每次您在代码中设置“MyWidth”时它都会自动更新。您需要设置属性，而不是私有变量本身。否则它不会触发它的更新事件，你的按钮也不会改变。

# c++ - 虚拟继承中派生类的大小

> ID：15335093
> 
> 赞同：1
> 
> 时间：2013-03-11T09:31:03.327
> 
> 标签：c++, sizeof, virtual-inheritance, memory-layout, vptr

```
#include "stdafx.h"
#include <iostream>
using namespace std;

class ClassA
{
    protected:
       int width, height;
    public:
       void set_values(int x, int y)
       {
         width = x;
         height = y;
       }
};

class ClassB : virtual public ClassA
{
   //12(int + int + vptr)
};

class ClassC : virtual public ClassA
{
  //12(int + int + vptr)
};

class ClassD : public ClassB, public ClassC
{
};

int main()
{
  ClassA A;
  ClassB B;
  ClassC C;
  ClassD D;
  cout << "size = " << sizeof(A) << endl;
  cout << "size = " << sizeof(B) << endl;
  cout << "size = " << sizeof(C) << endl;
  cout << "size = " << sizeof(D) << endl;
  return 0;
} 
```

我得到的输出是：

```
size of ClassA = 8
size of ClassB = 12
size of ClassC = 12
size of ClassD = 16 
```

在上面的代码中，为什么 ClassD 的输出是 16。请清楚地解释一下这个虚拟继承是如何工作的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T09:45:20.227

虚拟继承意味着虚拟基类只存在*一次*而不是多次。这就是为什么 8 个字节`ClassA`只出现`ClassD`一次的原因。虚拟继承本身需要一定的开销，因此您会得到一个额外的指针。C++ 标准未指定确切的实现以及因此的确切开销，并且可能会因您正在创建的层次结构而异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T09:44:05.390

当 ClassD 继承 ClassB 和 ClassC 时，将有两个 vptr（一个来自 B，一个来自 C）。Scott Meyers 的“更有效的 C++”，第 24 项（各种语言特性的成本）中描述了这种确切的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-16T01:54:08.737

## 虚拟基类实现

虚拟基类与虚拟函数完全一样：它们的地址（或相对地址，也就是偏移量）在编译时是未知的：

```
void f(ClassB *pb) {
    ClassA *pa = pb;
} 
```

在这里，编译器必须计算`ClassA`基础子对象与`ClassB`子对象（或主要是派生对象）的偏移量。一些编译器只是在里面有一个指向它的指针`ClassB`；其他人使用 vtable，就像虚拟功能一样。

在这两种情况下，开销`ClassB`都是一个指针。

类似`ClassC`，但 vptr 将指向`ClassC`vtable，而不是`ClassB`vtable。

因此一个`ClassD`对象将包含（这不是一个有序列表）：

*   单个`ClassA`子对象
*   一个`ClassB`主题
*   一个`ClassC`主题

所以`ClassD`有两个继承的 vptr： from`ClassB`和`ClassC`. 在一个`ClassD`对象中，两个 vptr 都将指向*某个* `ClassD`vtable，但同一个`ClassD`vtable：

*   a `ClassB`subject指向ClassB-in-ClassD vtable，表示`ClassA`base与`ClassB`base的相对位置
*   a `ClassC`subject指向ClassC-in-ClassD vtable，表示`ClassA`base与`ClassC`base的相对位置

## 可能的优化

我想你的问题是：**我们需要两个不同的 vptr 吗？**

从技术上讲，有时可以通过覆盖基类子对象来优化类的大小。这是技术上可行的情况之一：

覆盖（或统一）意味着两者`ClassB`和`ClassC`将共享相同的 vptr：给定`d`一个实例`ClassD`: `&d.ClassB::vptr == &d.ClassC::vptr`so`d.ClassB::vptr == d.ClassC::vptr`但是`d.ClassB::vptr == &ClassC_in_ClassD_vtable`和`d.ClassC::vptr == &ClassC_in_ClassD_vtable`, so`ClassB_in_ClassD_vtable`必须与 统一`ClassC_in_ClassD_vtable`。在这种特殊情况下，两者`ClassB_in_ClassD_vtable`和`ClassC_in_ClassD_vtable`仅用于描述`ClassA`子对象的偏移量；如果`ClassB`和`ClassC`子对象在 中统一`ClassD`，那么这些偏移量也是统一的，因此 vtable 的统一是可能的。

请注意，这仅在此处是可能的，因为它们具有完全的相似性。如果`ClassB`和`ClassC`被修改为在每个中添加一个虚函数，例如这些虚函数不等价（因此不可统一），则 vtable 统一是不可能的。

## 结论

这种优化只有在像这样的非常简单的情况下才有可能。这些情况不是 C++ 编程的典型情况：人们通常将虚拟基类与虚拟函数结合使用。空基类优化很有用，因为许多 C++ 习惯用法使用没有数据成员或虚函数的基类。OTOH，针对虚拟基类的特殊用途的微小（一个 vptr）空间优化似乎对现实世界的程序没有用。

# sql - 使用 SQL Server 将分隔字符串转换为表

> ID：15335107
> 
> 赞同：1
> 
> 时间：2013-03-11T09:31:28.710
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

我有 2 列

```
ID          value
---      ----------
1        "1,abc,,3"
2        "2,qwe,the,4" 
```

如何将分隔值转换为表格

IE：

```
col1         col2        col3       col4
-----        -----       -----      ----
1            abc                      3
2            qwe         the          4 
```

希望很快能得到一些帮助。提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:58:59.483

根据您的问题，这只是 4 列的示例。这可以概括为：

```
with cte as(
SELECT id,CHARINDEX(',', value) First_occurence,

CHARINDEX(',', value, CHARINDEX(',', value)+1) Second_occurrence,

CHARINDEX(',', value, CHARINDEX(',', value, CHARINDEX(',', value)+1)+1) Third_occurrence

from test)

select  substring(value,1,first_occurence-1) col1,
substring(value,first_occurence+1,Second_occurrence-(first_occurence+1)) col2,
substring(value,Second_occurrence+1,Third_occurrence-(Second_occurrence+1)) col3,
substring(value,Third_occurrence+1,len(value)) col4

from test a
inner join 
cte b
on a.id=b.id 
```

**广义：**

```
Declare @col_count  int=1

;with cte as(
SELECT id, @col_count col,value,CHARINDEX(',', value) occurence,substring(value,1,CHARINDEX(',', value)-1) col_val from test

  union all
select id, col+1 col,value, CHARINDEX(',', value, occurence+1),
  substring(value,occurence+1,CHARINDEX(',', value, occurence+1)-(occurence+1))

  from cte
 where  (occurence+1)< len(value)
union all

select id, col+1 col,value, occurence+1,
  substring(value,occurence+1,len(value))
  from cte
 where  (occurence+1)= len(value)
)

SELECT [1], [2], [3], [4]
from
(
  SELECT col, col_val,
    row_number() over(partition by col order by col_val) rn
  from cte
) as st
pivot
(
  max(col_val)
  FOR col in ([1], [2], [3], [4])
) as pivottable 
```

只需添加 [5] ,[6],.... 即可在 final 中添加更多列`select`。

[SQL小提琴](http://sqlfiddle.com/#!3/a54e2/40)

# jsf-2 - 从 jsf 中的另一个表单更新一个表单内容

> ID：15335109
> 
> 赞同：2
> 
> 时间：2013-03-11T09:31:43.263
> 
> 标签：jsf-2

我需要从 jsf 中的另一个表单更新一个表单内容。如果我给另一个表单 id，它会显示一个错误，比如找不到组件 id。

我的编码是

```
<h:form id="form1" name="form1">
 <h:commandLink value="Tab1" id="Tab1">
  <f:ajax listener="#{managedBean.tabChange}" event="click" render="form2"></f:ajax>
 </h:commandLink></li>
</h:form>
<h:form id="form2" name="form2">
   <h:outputText value="#{managedBean.text}" id="text"/>
</h:form> 
```

在渲染属性中

@all 为我工作。但 form2/text 不起作用。

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T09:44:31.947

客户端 ID 与它们的命名容器相关，因此 JSF 会查找名称`form2`仅在内部的组件`form1`。如果你想逃离这个容器，你需要在你的 id 前面加上一个冒号。

所以以下应该工作：

```
<f:ajax listener="#{managedBean.tabChange}" event="click" render=":form2"/> 
```

# php - Cron 执行的 Bash 脚本中的 PHP 脚本序列未运行

> ID：15335113
> 
> 赞同：5
> 
> 时间：2013-03-11T09:31:52.150
> 
> 标签：php, bash, ubuntu, cron

我有四个 PHP 脚本，它们执行需要按顺序执行的各种任务。

我没有为每个 PHP 脚本创建一个 cron 条目，而是认为我会很聪明，并将其包装为 Bash 脚本，如下所示：

```
#!/bin/bash

# set notification email.
NOTIFYEMAIL="webmaster@example.com"

# set PHP path.
PHP="$(which php)"

# set folder path.
FOLDER="/var/www/example.com/processors/"

# list of scripts.
SCRIPTS=("script_1" "script_2" "script_3" "script_4")

# execute each script.
for i in "${SCRIPTS[@]}"
do
    SCRIPT="$FOLDER/$i.php"
    printf "Processing: %s\n" $i
    chmod +x $SCRIPT
    $PHP $SCRIPT
done

echo "Scripts have been processed." | mail -s "Scripts Processed" $NOTIFYEMAIL 
```

我已经单独测试了所有脚本，它们可以正常工作，将处理信息输出到终端。

```
/usr/bin/php /var/www/example.com/processors/script_1.php 
```

我什至测试了通过终端手动依次调用四个 PHP 脚本的 bash 脚本，它也可以正常工作。

```
/bin/bash /var/www/example.com/processors/run.sh 
```

**但是由于某种原因，当我离开 cron 以在root**用户 crontab上使用以下命令运行 PHP 脚本时，它们不会执行。

```
# process daily.
0 1 * * * /bin/bash /var/www/example.com/processors/run.sh > /dev/null 
```

我知道 crontab 已经被处理并且 Bash 脚本已经运行，因为我每次都会在脚本结束时收到通知电子邮件。

权限如下：

```
-rwxr-xr-x 1 root root     510 Mar 11 09:21 run.sh
-rwxrwxr-x 1 git git      2.8K Mar  8 10:17 script_1.php
-rwxrwxr-x 1 git git      2.6K Mar  1 18:07 script_2.php
-rwxrwxr-x 1 git git       717 Mar  1 18:07 script_3.php
-rwxrwxr-x 1 git git      6.8K Mar  4 16:30 script_4.php 
```

没有特定于 cron 的日志文件，例如`/var/log/cron.log`但是当我运行时`grep CRON /var/log/syslog`它返回以下通用输出：

```
Mar 11 06:39:01 s00000000 CRON[11651]: (root) CMD (  [ -x /usr/lib/php5/maxlifetime ] && [ -d /var/lib/php5 ] && find /var/lib/php5/ -depth -mindepth 1 -maxdepth 1 -type f -cmin +$(/usr/lib/php5/maxlifetime) ! -execdir fuser -s {} 2>/dev/null \; -delete)
Mar 11 07:09:01 s00000000 CRON[12771]: (root) CMD (  [ -x /usr/lib/php5/maxlifetime ] && [ -d /var/lib/php5 ] && find /var/lib/php5/ -depth -mindepth 1 -maxdepth 1 -type f -cmin +$(/usr/lib/php5/maxlifetime) ! -execdir fuser -s {} 2>/dev/null \; -delete)
Mar 11 07:17:01 s00000000 CRON[13074]: (root) CMD (   cd / && run-parts --report /etc/cron.hourly) 
```

对我尝试的任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:16:38.280

### 初步的

*   检查 crontab 中的`SHELL`和的值`PATH`是否设置正确，例如：

    ```
    SHELL=/bin/bash
    PATH=/bin:/usr/local/bin:/bin:/usr/bin:/sbin:/usr/local/sbin:/usr/sbin 
    ```

    *   确保真正使用了预期的 shell（例如 bash）。
    *   确保所有需要的二进制文件都可以通过表示的`PATH`.
*   `%`检查您在 crontab中是否没有未转义。详情请参阅`man 5 crontab`。
*   也许您还将环境变量`MAILTO`设置为认可值，例如：

    ```
    MAILTO="webmaster@example.com" 
    ```

### 确保您的 crontab 正常工作

确保您的*crontab*被正确解析的另一个小技巧是在**末尾添加一个***标记*条目。

 **我正在使用自己这个标记条目

> @daily logger -p local0.notice -t CRON '$Id: demo 7029 2012-11-27 09:27:39Z dirk $'

如果 syslog 中缺少标记条目，则您知道*crontab*已损坏。这可能是由您未见过的一些奇怪的语法错误触发的。

### 如何调试 cron 作业

如果 cron 作业无法正常工作，请先调查作业输出。

将您的 crontab 更改为：

```
0 1 * * * /bin/bash -x /var/www/example.com/processors/run.sh >>/tmp/cronTrace 2>&1 
```

请检查生成的脚本输出以及跟踪输出 ( `bash -x`)。

### 附加说明

~~`chmod +x $SCRIPT`~~
`$PHP $SCRIPT`

该`chmod`步骤不是必需的，应该避免。在下一行中，您通过显式使用解释器命令来调用脚本。**

# highcharts - Highcharts 图带标签 zIndex

> ID：15335115
> 
> 赞同：5
> 
> 时间：2013-03-11T09:32:01.303
> 
> 标签：highcharts

我正在尝试放置一个`plotBand`低于轴的刻度，但它的标签位于它们上方。

由于标签继承了波段的 zIndex 并且无法指定此属性，有没有一种方法不需要我在绘制图形后更改 zIndex？

[请参阅此处](http://jsfiddle.net/74ZVQ/)的示例，我希望标签出现在 yAxis 刻度的前面。

我在[这里](http://highslide.com/forum/viewtopic.php?f=9&t=16221)看到了一个潜在的解决方案，但想知道是否有更好的方法来完成它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T14:04:05.670

许多 Highcharts 似乎不支持开箱即用的 zIndex 属性，因为它使用 SVG。[这个问题](https://stackoverflow.com/questions/482115/with-javascript-can-i-change-the-z-index-layer-of-an-svg-g-element)的答案是：

“SVG 中的 Z 索引由元素在文档中出现的顺序定义。如果要将特定形状置于顶部，则必须更改元素顺序。”

这就是 .toFront() 函数的作用，所以你可能会被卡住。

我写了一个小片段，在图表第一次渲染时将所有 plotBand 的标签更新到前面：

```
Highcharts.Chart.prototype.firstRender = (function (func){
     return function(){
         func.apply(this, arguments);
         $.each(this.axes, function(){
             $.each(this.plotLinesAndBands, function(){
                 this.label.toFront(); 
             });
         });
         this.tooltip.label.toFront();
         this.seriesGroup.label.toFront();
     }
 } (Highcharts.Chart.prototype.firstRender)); 
```

这是[JSFiddle](http://jsfiddle.net/mkremer90/mNxxF/4/)上的一个示例。让我知道这是否能满足您的需求。

# objective-c - 如何在 Objective-C 中使用 Json 搜索图像

> ID：15335116
> 
> 赞同：0
> 
> 时间：2013-03-11T09:32:03.203
> 
> 标签：objective-c, url

```
NSString *urlString = @"https://www.googleapis.com/customsearch/v1?key=AIzaSyDochCep4-pyP_VyC-yTxqvVXz2oUccvOQ&cx=015184184090674442837:dkitjh1tmc8&q=";         
urlString = [urlString stringByAppendingString:appDelegate.globalWordName]; //appdelegate.globalwordname is required images name           
urlString = [urlString stringByAppendingString:@"&searchType=image&safe=high&imgSize=medium&start=1&num=10&alt=json"]; 
```

（或者）

```
NSString *urlString = @"https://www.googleapis.com/customsearch/v1?key=AIzaSyBfsopy4kXXiZ44BRUE1pVMyacSUa0Bn1E&cx=cx=011683172338421882045:tcle_wvfko8&q=";
urlString = [urlString stringByAppendingString:appDelegate.globalWordName];
urlString = [urlString stringByAppendingString:@"&searchType=image&safe=high&imgSize=medium&start=1&num=10&alt=json"]; 
```

（或者）

```
NSString *urlString = @"https://ajax.googleapis.com/ajax/services/search/images?v=1.0&q=";
urlString = [urlString stringByAppendingString:appDelegate.globalWordName];  
urlString = [urlString stringByAppendingString:@"&rsz=8"]; 
```

我正在使用上述三种格式，但没有得到任何结果。执行上述查询后，它只返回 null。请帮助我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:59:25.527

确保 API 密钥 (key=?) 和自定义搜索引擎 ID (cx=?) 正确。

# sql - 如何从忽略时间的特定日期的表中选择 *

> ID：15335120
> 
> 赞同：0
> 
> 时间：2013-03-11T09:32:05.667
> 
> 标签：sql, sql-server-2008, datetime

我想从日期=特定日期的表中选择 *，但我的 sql 列是日期和时间格式。我如何在忽略时间的情况下检索特定日期的日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:34:44.813

如果您使用的是 sql-server 2008 或更高版本，则可以使用`convert`函数转换`datetime type` *为* `date type`如下。

```
select * 
from yourtable
where convert(date, yourDateTimeCol) = yourDate 
```

# c# - Parallel.ForEach、Task.Factory 和 N 个线程

> ID：15335121
> 
> 赞同：1
> 
> 时间：2013-03-11T09:32:08.333
> 
> 标签：c#, parallel-processing, task

我知道这已经被问过和讨论过，但我仍然认为在这种情况下使用什么还不清楚。

*我需要对我知道一次可以处理 16 个请求的 Web 服务进行 100 次调用（并不是说如果它得到更多它会失败）*

我认为 Parallel.ForEach 用于更低级别的 CPU 密集型调用——它将决定有多少线程最适合。Task.Factory 使用线程池，因此可能少于 16 个线程（也更多）

当然，我可以编写自己的线程池，但是对于这种情况，没有更明显的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:36:59.073

我会使用`Parallel.ForEach`但将 a[`ParallelOptions`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions.aspx)设置`MaxDegreeOfParallelism`为 16。这样你就可以非常清楚地表明你想要的并行度。

如果您使用`Task.Factory`，我认为假设您*将*获得超过 16 个并发任务是合理的，尽管如果您使用异步 IO，则无论如何您都不需要 16 个并发*线程。*

您可能想查看[TPL 数据流](http://msdn.microsoft.com/en-us/library/hh228603.aspx)- 我没有专门研究如何轻松地对消费者进行分区，但由于它直接针对生产者/消费者场景，如果您*无法*创建 16 个消费者，我会感到惊讶，然后只需产生 100 个电话。

或者，当然您可以创建 16 个线程，所有线程都[`BlockingCollection`](http://msdn.microsoft.com/en-us/library/dd267312.aspx)为 100 次调用使用相同的包含数据。这将保证并行度......

请注意，为了实际同时对同一 HTTP 主机进行 16 次调用，您可能需要调整[`<connectionManagement>`](http://msdn.microsoft.com/en-us/library/fb6y0fyc.aspx)app.config 的部分。

# wpf - XAML 中用于应用附加属性的替代语法

> ID：15335123
> 
> 赞同：2
> 
> 时间：2013-03-11T09:32:09.903
> 
> 标签：wpf, xaml, attached-properties

如何重写以下 XAML：

```
<Button Command="{Binding NewSalesOrderCommand}" Content="New Order" Width="50" /> 
```

这样我就可以在 Command 对象上使用附加属性：

```
<Button Content="New Order" Width="50">
    <Button.Command local:MyClass.MyAttachedProp="1">
        ...
    </Button.Command>
</Button> 
```

表示什么出现在 3 个点的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:06:36.310

嗯，试试下面

```
<Button Content="New Order" Width="50">
    <Button.Command local:MyClass.MyAttachedProp="1">
        <Binding Path="NewSalesOrderCommand" />
    </Button.Command>
</Button> 
```

有关更多信息，请查看[此处](http://msdn.microsoft.com/en-us/library/ms752300.aspx)。

# r - 如何减去R中的某些列？

> ID：15335128
> 
> 赞同：0
> 
> 时间：2013-03-11T09:32:32.387
> 
> 标签：r

我想在 R 中减去某一列？怎么做？

```
vec <- 1:20
mat <- matrix(vec,ncol=4)

mat
     [,1] [,2] [,3] [,4]
[1,]    1    6   11   16
[2,]    2    7   12   17
[3,]    3    8   13   18
[4,]    4    9   14   19
[5,]    5   10   15   20 
```

例如，我想计算第 1 和第 4、第 2 和第 4、第 3 和第 4 之间的差异

结果：

```
M1 <- mat[,1]-mat[,4]

M2 <- mat[,2]-mat[,4]

M3 <- mat[,3]-mat[,4]
nmat <- data.frame(M1,M2,M3)
nmat

   M1  M2 M3
1 -15 -10 -5
2 -15 -10 -5
3 -15 -10 -5
4 -15 -10 -5
5 -15 -10 -5 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T09:44:18.107

尝试

```
vec <- 1:20
mat <- matrix(vec, ncol = 4)
mat[, 1:3] - mat[, 4]
##      [,1] [,2] [,3]
## [1,]  -15  -10   -5
## [2,]  -15  -10   -5
## [3,]  -15  -10   -5
## [4,]  -15  -10   -5
## [5,]  -15  -10   -5 
```

PS：这在 R 中是非常基础的，也许你应该看看这里列出的一些基本的 R 教程。[https://stackoverflow.com/tags/r/info](https://stackoverflow.com/tags/r/info)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:07:20.213

您还可以使用 lapply 功能

```
lapply(mat[[1]], function(k){return(mat[, 1:3] - mat[, 4])}) 
```

这使您有机会计算每个列表。

```
and gives the following output: 
[[1]]
     [,1] [,2] [,3]
[1,]  -15  -10   -5
[2,]  -15  -10   -5
[3,]  -15  -10   -5
[4,]  -15  -10   -5
[5,]  -15  -10   -5 
```

每次您将 更改`mat[[1]]`为 例如`[[2]]`。'lapply' 函数将计算另一个列表。如果你只是把`mat`它计算为每个列表。

# ios - Nonatomic，retain，copy有什么用？

> ID：15335130
> 
> 赞同：-5
> 
> 时间：2013-03-11T09:32:48.740
> 
> 标签：ios, objective-c, cocoa, memory-management

我进行了很多搜索，但仅在`non-atomic`, `retain`,`copy`参数的定义上有所不同。我想要我还没有得到的确切解释。

请举例说明：我们为什么使用它们以及它们如何工作以及引用计数在其中的作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:55:27.060

在**nonatomic**中，如果某些 setter 活动正在任何其他线程上进行，则不保证从 getter/setter 返回整个值。

因此，非原子比原子快得多，而且永远不是线程安全的

* * *

在显式**保留**状态下，您想维护对象的引用或者您想成为对象的所有者，并且您必须在释放它之前释放它。它将引用计数增加 1。

```
-(void)setString:(NSString*)newString{      
    [newString retain];      
    [string release];        
    string = newString;     
} 
```

* * *

该**副本**通常与字符串一起使用，因为制作原始对象的副本可确保在您使用它时不会更改它。

```
-(void)setString:(NSString*)newString{  
      if(string!=newString){                  
          [string release];                  
          string = [newString copy];                
     }
} 
```

虽然`retain`只是增加一个对象的保留计数，但`copy`创建一个具有自己保留计数的新对象。

# javascript - 从函数内部的数组中获取 ID

> ID：15335133
> 
> 赞同：0
> 
> 时间：2013-03-11T09:33:00.597
> 
> 标签：javascript, leaflet

我在 LeafletJs 地图中的 for 循环有问题，由于某种原因，我无法从数组中给我正确的 ID，而是给我所有 clickevent 的最后一个 ID。在 Id之外`$.get()`显示正确。但在里面我只是得到数组中的最后一个。是否可以扩展获得自定义矿石的选项是否有其他方法可以做到这一点。

```
for (var i = 0; i < myColumnDefs.length; i++) {
      var obj = myColumnDefs[i];
     // obj.id = i;
      var latitude = obj.GisLatitude.toFixed(5);
      var longitude = obj.GisLongitude.toFixed(5);

    //The correct id
      console.log(obj.Id);

      var m = L.marker([latitude, longitude], { icon: greenIcon }).on('click', function (e) {
        var markeren = this;
        debugger;

        $.get(ol.url('~/Map/MapContent/'), {id: m.id }, function(data) {
          L.popup()
        .setLatLng(markeren.getLatLng())
        .setContent(data)
        .openOn(map);
        });
      }).addTo(map);
      m.id = obj.Id;
      console.log('Latitude: '+latitude + ' - Longitude: ' + longitude);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:51:46.570

在 $.get 的成功/错误处理程序中，上下文绑定是 event.target ，并且您正在迭代的循环在调用事件处理程序之前很久就完成了。因此，您将获得点击处理程序的最后一个 ID。

`var markeren = this;`在控制台上记录这个@ 。上下文是您需要的。再次登录`markeren`$.get ，它不会是你所期望的！

适当地绑定函数上下文，你的问题就会消失。

# php - 在数据库中插入新记录时显示通知

> ID：15335138
> 
> 赞同：1
> 
> 时间：2013-03-11T09:33:07.413
> 
> 标签：php, mysql

在酒店预订网站上工作。

有一个主表。我想在主表中插入新记录时显示通知。

假设我在管理面板的仪表板上。因此，为了检查 Master 表中的新条目，我反复调用 Ajax 函数。如果我找到一个新条目，我将显示一个通知。

但是现在我不想一直使用 Ajax 调用来访问数据库，如果没有预订的话。

**我不想使用 AJAX。**

还有其他方法吗？

那么，我如何才能从视图页面继续查看主表以获取新记录，然后在视图中显示这些值的通知？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:36:33.383

您需要查看 WebSocket 解决方案。[您可以使用 Slanger ( https://github.com/stevegraham/slanger](https://github.com/stevegraham/slanger) )之类的东西来托管自己的东西，或者使用 Pusher ( [http://pusherapp.com](http://pusherapp.com) ) 之类的托管服务。这两种方法都可以让您在服务器和客户端（Web 浏览器）之间建立实时通信。您可以在代码中添加一个挂钩，以便在每次添加记录时向您的用户发送通知。

# javascript - 未捕获的 ReferenceError，通过 android 应用程序调用 javascript 函数..？

> ID：15335139
> 
> 赞同：5
> 
> 时间：2013-03-11T09:33:16.210
> 
> 标签：javascript, android, webview, referenceerror

我正在尝试通过 android Webview Activity 调用 javascript 函数 setGameName() 但它正在抛出`uncaught ReferenceError:setGameName not defined at :1`.

我的源代码如下：

```
webView2.setWebChromeClient(new WebChromeClient());
webView2.getSettings().setLightTouchEnabled(true);
webView2.getSettings().setJavaScriptEnabled(true);
webView2.addJavascriptInterface(jsInterface, "AndroidFunction");
webView2.loadUrl("file:///android_asset/www/index.html");
webView2.loadUrl("javascript:setGameName()"); 
```

html代码：

```
 <body>

        <script type="text/javascript">
            function init() {
                console.log("====== I am getting called::===");
                var testVal = document.getElementById('playertextId').value;
                AndroidFunction.proceedFurther(testVal);
            };

            function setGameName() {
                console.log("====== Got the value===");
                document.getElementById('gametextId').value;
            };
        </script>
</body> 
```

它加载 index.html 很好，但在函数调用时抛出异常，请提供适当的解决方案..

更新：

```
i have found the problem the page is not getting loaded at the time of function call..(Since on giving a time delay of 5000ms it is getting called..)!! 
```

但是我该如何实现它呢..？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T10:04:00.257

loadUrl 是异步的。这意味着它在页面加载之前立即返回。因此，当您尝试调用 setGameName 时，它​​还不存在。

您可以使用 onPageFinished 方法实现 WebClient 并在那里调用您的 JavaScript 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:39:44.757

我不太确定，但可能您需要将 file:///android_asset/www/index.html 放在网络服务器上，然后检索它。默认情况下，浏览器不允许 JS 从来自文件系统的 JS 加载。

# windows-phone-7 - 空间参考

> ID：15335142
> 
> 赞同：0
> 
> 时间：2013-03-11T09:33:23.617
> 
> 标签：windows-phone-7, reference, spatial, arcgis

我是 Windows Phone 7 开发的新手。我最近下载并试用了 Arcgis 示例地图，在更改 TiledMapserverlayer 的 URL 后它给了我这个错误。

```
Invalid spatial reference. Spatial reference must match map's spatial reference. Clear the map layers collection prior to changing the spatial reference. 
```

.xaml

```
 <esri:GraphicsLayer ID="MyGraphicsLayer">
                <esri:GraphicsLayer.Graphics>
                    <esri:Graphic Symbol="{StaticResource RedMarkerSymbol}">
                        <esriGeometry:MapPoint X="11560518.5450925" Y="153495.271364825">

                        </esriGeometry:MapPoint>
                    </esri:Graphic>
                </esri:GraphicsLayer.Graphics>
            </esri:GraphicsLayer>

            <esri:ArcGISTiledMapServiceLayer ID="MyLayer" 
                Url="http://www.onemap.sg/ArcGIS/rest/services/basemap/MapServer" />
        </esri:Map> 
```

。CS

```
 public partial class Map : PhoneApplicationPage
{
    GeoCoordinateWatcher _watcher;
    Graphic _graphicLocation;
    private static ESRI.ArcGIS.Client.Projection.WebMercator mercator =
      new ESRI.ArcGIS.Client.Projection.WebMercator();
    bool initialLoad = true;

    public Map()
    {
        InitializeComponent();

        _graphicLocation = (MyMap.Layers["MyGraphicsLayer"] as GraphicsLayer).Graphics[0];

        _watcher = new GeoCoordinateWatcher(GeoPositionAccuracy.High);
        _watcher.MovementThreshold = 20;

        _watcher.StatusChanged += watcher_StatusChanged;
        _watcher.PositionChanged += watcher_PositionChanged;

        // Start data acquisition
        _watcher.Start();
    }

    void watcher_StatusChanged(object sender, GeoPositionStatusChangedEventArgs e)
    {
        switch (e.Status)
        {
            case GeoPositionStatus.Disabled:
                // The location service is disabled or unsupported.
                // Alert the user
                StatusTextBlock.Text = "Location is unsupported on this device";
                break;
            case GeoPositionStatus.Initializing:
                // The location service is initializing.
                // Disable the Start Location button
                StatusTextBlock.Text = "Initializing location service";
                break;
            case GeoPositionStatus.NoData:
                // The location service is working, but it cannot get location data
                // Alert the user and enable the Stop Location button
                StatusTextBlock.Text = "Data unavailable";
                break;
            case GeoPositionStatus.Ready:
                // The location service is working and is receiving location data
                // Show the current position and enable the Stop Location button
                StatusTextBlock.Text = "Ready - retrieving data";
                break;
        }
    }

    void watcher_PositionChanged(object sender, GeoPositionChangedEventArgs<GeoCoordinate> e)
    {
        _graphicLocation.Geometry = mercator.FromGeographic(new MapPoint(e.Position.Location.Longitude, e.Position.Location.Latitude));

        // Use horizontal accuracy (returned in meters) to zoom to the location
        if (initialLoad)
        {
            Envelope rect = new Envelope(
                (_graphicLocation.Geometry as MapPoint).X - (e.Position.Location.HorizontalAccuracy / 2),
                (_graphicLocation.Geometry as MapPoint).Y - (e.Position.Location.HorizontalAccuracy / 2),
                (_graphicLocation.Geometry as MapPoint).X + (e.Position.Location.HorizontalAccuracy / 2),
                (_graphicLocation.Geometry as MapPoint).Y + (e.Position.Location.HorizontalAccuracy / 2));

            MyMap.ZoomTo(rect.Expand(20));

            initialLoad = false;
        }
        else
        {
            MyMap.PanTo(_graphicLocation.Geometry);
        }
    }

    private void PhoneApplicationPage_Unloaded(object sender, RoutedEventArgs e)
    {
        _watcher.Stop();
    }} 
```

我尝试了许多解决方案，例如添加 wkid，但它不起作用。我已经有这个错误很长时间了。有人可以帮忙吗！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:50:59.150

一般来说，您不应该混合 SpatialReferences。调用 Map.Pan，将 Extent 更改为 SRef 与 Map 的 SRef 不同的未投影几何体的缩放将导致抛出异常。当 GPS 位置发生变化时，您正试图移动具有差异 SRef 的地图，这会导致异常。如果您先投影 GPS 点，您将不会遇到这个问题。为此使用 GeometryService。顺便看看他们工具包中的 API 的 GpsLayer，因为它可以节省您在上面手动编写的大量代码。还要在上面设置一个 ProjectionService ，事情应该对你有用。

干杯:)

# c# - 将信息从 ListBox 传输到另一个 ListBox

> ID：15335145
> 
> 赞同：-1
> 
> 时间：2013-03-11T09:33:26.390
> 
> 标签：c#, .net, winforms

我有一个 ListBox，它在运行时列出来自 xml 的信息。当我从列表中选择某个值时，我希望能够在单击添加按钮时将所选值添加到另一个空列表框中

涉及的方法有哪些。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:54:27.750

你可以尝试使用这个：

首先创建一个对象来保存主 ListBox 中的选定项

```
object _SelectedItem = null; 
```

然后转到主 ListBox 的 SelectedIndexChanged 事件并添加此代码

```
_SelectedItem = MainListbox.SelectedItem; 
```

通过您的 Button 将所选项目添加到其他列表中，请使用此代码

```
TheOtherListBox.Items.Add(_SelectedItem); 
```

您还可以像这样直接从主 ListBox SelectedIndexChanged 事件添加新项目

```
TheOtherListBox.Items.Add(MainListbox.SelectedItem); 
```

下次发布一些代码，所以我们可以看到你至少尝试过。

# javascript - 确认后jquery单击不起作用

> ID：15335146
> 
> 赞同：2
> 
> 时间：2013-03-11T09:33:29.417
> 
> 标签：javascript, jquery, confirm

我有一个奇怪的问题。我提供了一个链接，它发送一个 ajax 请求来删除用户。如果用户第一次单击链接并确认确认框，则触发 ajax 功能。但如果之后用户再次单击类 delUser 的链接，则不会发生任何事情。没有确认框什么都没有，似乎点击功能被忽略了。我发现如果我用确认框切割零件一切正常。

这个确认有什么问题？

```
jQuery(".delUser").click(function(){       
    // open confirm Window
    confirm = window.confirm("Nutzer wirklich löschen?");
    User = $(this).attr("data-link");

    if(confirm == true){

            jQuery.ajax({
            type: "POST",
            url: "/Admin/DelUser.php",
            data: { where: User },
            success: function(retData){
                    jQuery.noticeAdd({text: "" + retData + "",
                    stay: false, 
                    type: 'error'
                });                             
                }
            }); 
            $(this).closest('tr').remove(); 

            } else {
                   talk("Nutzer wurde nicht gelöscht");
            }         
    }); 
```

亲切的问候，

托尼

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T09:35:39.433

因为你正在覆盖`confirm`.

这一行：

```
confirm = window.confirm("Nutzer wirklich löschen?"); 
```

等于

```
window.confirm = window.confirm("Nutzer wirklich löschen?"); 
```

使用全局变量的原因之一[是一个非常糟糕的主意](http://yuiblog.com/blog/2006/06/01/global-domination/)。当你[声明一个变量](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Declaring_variables)时，请始终使用`var`，所以它不会是全局的：

```
var confirm = window.confirm("Nutzer wirklich löschen?"); 
```

这同样适用于`User`. 你应该像这样声明它：

```
var User = $(this).attr("data-link"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:38:04.427

尝试这个：

```
jQuery(".delUser").click(function(){       
User = $(this).attr("data-link");

if(window.confirm("Nutzer wirklich löschen?")){

        jQuery.ajax({
        type: "POST",
        url: "/Admin/DelUser.php",
        data: { where: User },
        success: function(retData){
                jQuery.noticeAdd({text: "" + retData + "",
                stay: false, 
                type: 'error'
            });                             
            }
        }); 
        $(this).closest('tr').remove(); 

        } else {
               talk("Nutzer wurde nicht gelöscht");
        }         
}); 
```

# jquery - 如何将 jQuery 数据传递给用户控件？

> ID：15335147
> 
> 赞同：0
> 
> 时间：2013-03-11T09:33:33.410
> 
> 标签：jquery, asp.net, user-controls, accordion

我有一个 jQuery 手风琴中列出的项目列表。

我还有一个自定义用户控件，用户可以输入有关该项目的信息。（只有一些下拉菜单、一个文本框和一个提交按钮。）当用户单击添加信息时，控件会通过一个颜色框弹出。

```
 <a class="colorBoxLink" href="javascript:void(0);">Add Info</a>
<asp:Repeater ID="rptProjectList" OnItemDataBound="rptProjects_ItemDataBound" runat="server">
    <HeaderTemplate>
        <div id="accordion">
    </HeaderTemplate>

    <ItemTemplate>

        <h1 style="margin: 0px" class="accordionHeader" id='P<%# Eval("projectCode") %>'>
            <asp:Label ID="lblProjCode" runat="server" Text='<%# Eval("projectCode") %>'></asp:Label>
            - <%# Eval("title") %>
            <p style="color: red; margin: 0px">Deadline: <%# Eval("deadline", "{0:d MMM yy}") %> ECD: <%# Eval("ecd", "{0:d MMM yy}") %></p>
        </h1>

        <div>

            <asp:Repeater ID="rptCompletedProjectTasks" OnItemDataBound="rptCompletedProjectTasks_ItemDataBound" runat="server">

                <HeaderTemplate>
                    <h3>Completed Tasks</h3>
                    <table class="projTaskTable">
                        <tr>
                            <th style="width: 100px">W/C</th>
                            <th style="width: 450px">Description</th>
                            <th style="width: 100px">Due</th>
                            <th style="width: 100px">Completed</th>
                            <th style="width: 50px">Var</th>
                        </tr>
                </HeaderTemplate>

                <ItemTemplate>
                    <tr>
                        <td id="tdWeek" runat="server">
                            <asp:Label ID="lblWeek" runat="server" Text='x'></asp:Label></td>
                        <td><%# Eval("description") %></td>
                        <td><%# Eval("deadline", "{0:d MMM}") %></td>
                        <td>
                            <asp:Label ID="lblCompleted" runat="server" Text='<%# Eval("completedDate", "{0:d MMM}") %>'></asp:Label></td>
                        <td><%# Eval("var") %></td>

                    </tr>

                </ItemTemplate>

                <FooterTemplate></table></FooterTemplate>

            </asp:Repeater>

        </div>
    </ItemTemplate>

    <FooterTemplate>
        </div>
    </FooterTemplate>
</asp:Repeater>

<div id="popup" style="display: none; height: 320px">
    <uc1:TaskCreator runat="server" ClientIDMode="static" ProjectCode="X" ID="TaskCreator" />
</div> 
```

我需要能够将当前选择的手风琴索引传递给用户控件。（即用户单击项目 XYZ 的标题，单击添加以弹出用户控件，然后当用户在控件上提交表单时，我需要它“知道”项目 XYZ 被选中，因为这将是它更新的项目.)

# php - 获取登录用户列表 PHP

> ID：15335155
> 
> 赞同：1
> 
> 时间：2013-03-11T09:33:49.467
> 
> 标签：php, javascript, mysql, ajax, session

我正在创建一个简单的实时聊天应用程序，所以我必须`chatBuddyList`在页面右侧显示。

目前我有 2 个用户表，`tbl_users`( `user_id`,name,email...) 和`tbl_logged_user`(id, `user_id`)。

在用户登录时，我将插入`user_id`到`tbl_logged_users`并注销时，我将删除该记录。

一切都很好，但问题在于`Logout`。当用户点击`logout`链接时它会起作用，但有时用户可能会由于会话到期、浏览器关闭等原因自动注销......

我该如何处理这种情况？实现这一目标的最佳方法是什么？

谢谢。

> 我正在尝试为此找到最佳方法，仅仅是因为确切的应用程序不是基于真正聊天的应用程序，我有一个包含平均`80,000`记录的表。轮询/彗星运行大约 5-10 秒的时间范围。

**编辑**

有一些答案说`session_id`。我认为它没有用，因为会话超时 php 无法自动更新数据库表，除非有新请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:46:18.270

这是我的聊天应用程序中的会话检查器代码。
$CONFIG["app:maxLatency"] 是以秒为单位的时间。在此时间之后，如果客户端没有联系服务器，客户端将被注销。
您需要一个名为 users 的表，其中包含 id（整数）、lastseen（时间戳）和 sid（会话 id、文本）

样品表：

```
id     |   lastseen                |  sid
--------------------------------------------------
123    |   2013-03-11 11:00:00     |  abcdefg12345 
```

示例代码：

```
function DeleteSessionByUserId($user_id) {
    $user_id = mysql_real_escape_string($user_id);
    global $CONFIG;

    $sql = "UPDATE users SET sid = '' WHERE id = '".$user_id."'";
    $result = mysql_query($sql);
    return true;
}

// This will delete all users with expired sessions
function CheckAllSessionsExpired() {
    global $CONFIG;

    $sql = "SELECT id FROM users WHERE sid != '' AND lastseen < '".date("Y-m-d H:i:s", strtotime("-".$CONFIG["app:maxLatency"]." seconds"))."'";

    $result = mysql_query($sql);
    while ($line = mysql_fetch_array($result, MYSQL_ASSOC)) {
        DeleteSessionByUserId($line['id']);
    }
    return true;
}

// This will update the last seen timestamp in MySQL
function UserSetSeen($user_id) {
    $user_id = mysql_real_escape_string($user_id);

    global $CONFIG;
    $sql = "UPDATE users SET lastseen = '".date("Y-m-d H:i:s")."' WHERE id = '".$user_id."';";
    $result = mysql_query($sql);
    return true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T10:32:06.833

好吧，这不是解决问题的“通常”方式，但我认为这不是一个糟糕的解决方案：

例如，您可以使用带有小型 Node.js 服务器的 websocket。当用户使用有效会话加载页面时，它会连接到服务器（只有两行 javascript）。当它断开连接（关闭页面）时，websocket 中断并且服务器捕获事件。

如果用户关闭浏览器，套接字将断开连接。如果用户单击注销，页面会重新加载，然后不会再次创建套接字（没有有效的会话）。唯一的问题是当用户长时间打开浏览器并且会话过期时。好吧，在服务器中添加超时可以解决这个问题。

如果您正在创建一个聊天应用程序，请尝试使用 websockets，您不会后悔的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T09:46:08.557

记录时将会话 ID 存储在表中，并定期检查会话 ID，以说明用户在线，如果用户关闭浏览器会话 ID 将不匹配，则注销用户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T09:35:45.087

考虑一个登录的用户，如果他在最后 5 分钟（左右）内处于活动状态。这就是几乎每个网站处理它的方式。您可以在用户每次“做”某事时注册一个时间戳（即在您的聊天框中发送消息）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-27T06:53:09.273

只需将状态添加到用户表。登录时将状态更新为 1，注销时重置为 0。然后每隔 5 或 10 秒使用 AJAX 从用户表中选择 status = 1 的所有结果。创建一个 users_online div 并显示结果。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-11T09:43:52.827

如果您在表中维护会话，只需计算表中的活动会话数。

# ios - 当对象是 Mutiable 时，将 mutating 方法发送到不可变对象

> ID：15335156
> 
> 赞同：0
> 
> 时间：2013-03-11T09:33:53.870
> 
> 标签：ios

我已将我的可变对象定义为

```
NSMutableArray *scribbles; 
```

然后在`viewDidLoad`我初始化它

```
scribbles = [[NSMutableArray alloc] init]; 
```

获取我的第一个 JSON 页面后，我将数据添加到其中

```
scribbles = JSON[@"scribbles"]; 
```

然后稍后我加载第二页并尝试将更多数据添加到我的数组中

```
NSMutableArray *mutableJson = [JSON[@"scribbles"] mutableCopy];
[scribbles addObjectsFromArray:mutableJson]; 
```

但应用程序崩溃并给我一个`mutating method sent to immutable object`错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T09:43:32.473

你应该做：

```
scribbles = [JSON[@"scribbles"] mutableCopy]; 
```

您不需要制作第二页的可变副本，因此只需执行以下操作：

```
[scribbles addObjectsFromArray:JSON[@"scribbles"]]; 
```

* * *

解释：

```
scribbles = [[NSMutableArray alloc] init]; // mutable, OK
scribbles = JSON[@"scribbles"]; // immutable, you have to make mutable copy
[scribbles addObjectsFromArray:mutableJson]; // scribbles was immutable, the parameter doesn't need to be mutable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:43:10.460

```
scribbles = JSON[@"scribbles"]; 
```

此行使您的 scribbles 对象不可变。您需要添加对象而不是分配。如果您有更多对象，您可以从不可变数组创建可变数组，如下所示

```
scribbles = [NSMutableArray arrayWithArray:JSON[@"scribbles"]]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-11T09:44:22.100

而不是这个：

```
[scribbles addObjectsFromArray:mutableJson]; 
```

做这个：

```
scribbles = [NSMutableArray arrayWithArray:JSON[@"scribbles"]]; 
```

# components - Vaadin - 在 Vaadin 的网格布局中展开组件

> ID：15335159
> 
> 赞同：9
> 
> 时间：2013-03-11T09:34:16.677
> 
> 标签：components, vaadin, expand, grid-layout

我在 Vaadin 6 中做我的项目。在那里，我将组件集成到网格布局中。我附上了一张图片。它类似于我的项目布局。它类似于日食。因此，布局将在左侧和右侧有两个侧面板。以及一个中心和底部面板。图像中的红色是按钮。当我按下它们时，面板将被最小化。我希望中心面板扩展并占据最小化面板的区域。我已将面板集成到网格布局中。谁能告诉我如何在网格布局中扩展组件。

当我最小化'R'时；'C' & 'B' 必须占据它的区域。

当我最小化'B'时；'C' 必须占据它的区域。

当我最小化'L'时；'C' & 'B' 必须占据它的区域。 ![布局](../Images/7499121ee2221eae18015eec583a8f2c.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T15:49:18.650

这是一个没有额外附加组件的工作示例。您可以使用水平和垂直布局。

```
public class TestUI extends UI {

    Panel L = new Panel();
    Panel C = new Panel();
    Panel B = new Panel();
    Panel R = new Panel();

    Button bL = new Button("Toggle L", new CloseButtonHandler(L));
    Button bC = new Button("Toggle C", new CloseButtonHandler(C));
    Button bB = new Button("Toggle B", new CloseButtonHandler(B));
    Button bR = new Button("Toggle R", new CloseButtonHandler(R));

    @Override
    protected void init(VaadinRequest request) {
        L.setWidth("80px");
        L.setHeight("100%");
        L.setContent(new Label("L"));
        R.setWidth("80px");
        R.setHeight("100%");
        R.setContent(new Label("R"));
        B.setHeight("80px");
        B.setWidth("100%");
        B.setContent(new Label("B"));
        C.setHeight("100%");
        C.setHeight("100%");
        C.setContent(new Label("C"));

        VerticalLayout vl = new VerticalLayout();
        vl.addComponent(C);
        vl.addComponent(B);
        vl.setExpandRatio(C, 1);
        vl.setSizeFull();

        HorizontalLayout hl = new HorizontalLayout();
        hl.addComponent(L);
        hl.addComponent(vl);
        hl.addComponent(R);
        hl.setExpandRatio(vl, 1);
        hl.setSizeFull();

        CssLayout root = new CssLayout();
        root.addComponent(bL);
        root.addComponent(bC);
        root.addComponent(bB);
        root.addComponent(bR);
        root.addComponent(hl);
        root.setSizeFull();

        setContent(root);
    }

    private class CloseButtonHandler implements ClickListener {
        private Panel layout;

        public CloseButtonHandler(Panel layout) {
            this.layout = layout;
        }

        @Override
        public void buttonClick(ClickEvent event) {
            layout.setVisible(!layout.isVisible());
        }
    }
} 
```

该示例适用于 Vaadin 7，但该概念也适用于 Vaadin 6。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T04:53:06.093

Raffel 的回答是这个问题的最佳和最快的解决方案。但是，我在实现它时遇到了一些项目结构问题。

我以我的方式做到了。在网格布局中调整组件的大小似乎很困难。所以，我转向垂直和水平布局。

我在称为“VL”的垂直布局中设置了“C”和“B”。我在一个名为“HL”的水平布局中设置了“L”、“VL”和“R”。我添加了按钮来切换我需要的地方。每当我按下任何切换按钮时，它都会隐藏布局。我通过重新定义

```
 setExpandRatio(); 
```

当按下切换按钮时，我为该组件重新定义了 setExpandRation()。再次按下按钮时，我将 setExpandRatio() 重置为旧值。这个想法适用于所有尺寸的显示器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T11:47:41.023

我猜您使用[BorderLayout 插件](https://vaadin.com/directory#addon/borderlayout)会更幸运。我并不是说不能用 GridLayout 来完成，但我相信它需要更多的努力。查看[演示](http://johannes.virtuallypreinstalled.com/BorderLayout)。

就像在演示中一样，您可以在单击最小化按钮时将位置替换为“恢复”按钮（您没有提到恢复布局部分，但我想这与最小化一起在您的计划中？）。因此，当您在全尺寸布局（例如 R 或东）中单击最小化时，您会将东位置替换为恢复按钮，该按钮将自身替换为布局 R。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-11T15:14:55.213

我会尝试以使用 VerticalLayouts 和 Horizo​​ntalLayouts 的方式实现这一点。一个未经测试的例子：

```
HorizontalLayout root = new HorizontalLayout();
root.setSizeFull();

Component l = ...
l.setWidth("200px");
l.setHeight("100%");
root.addcomponent(l);

VerticalLayout cb = new VerticalLayout();
cb.setSizeFull();

Component c = ...
c.setSizeFull();
cb.addComponent(c);
cb.setExpandRatio(c, 1);

Component b = ...
b.setWidth("100%");
l.setHeight("200px");
cb.addComponent(b);

root.addcomponent(cb);
root.setExpandRatio(cb, 1);

Component r = ...
r.setWidth("200px");
r.setHeight("100%");
root.addComponent(r); 
```

然后，您可以通过从其布局中删除组件或将其设置为不可见来实现隐藏。

# r - 替换数据框中的值

> ID：15335171
> 
> 赞同：0
> 
> 时间：2013-03-11T09:34:49.067
> 
> 标签：r, dataframe

我有一个 R data.frame 对象

```
long   <- c(100.25,100.75,100.75,100.75,100.75,100.75,101.25,99.25,99.25,100.25)
vars  <- c(1750.8, 1789.7, 1788.1, 1782.8, 1867.3, 1771.3, 1789.9, 1820.6, 1789.1, 1868.9)
varp  <- c(1470.714, 1279.862, 1306.740, 1190.296, 1762.874, 1464.975, 1619.855, 1744.476,
            1879.743, 2052.337)
df1 <- data.frame(varp,vars,long) 
```

我想用满足以下条件的 NA替换**vars中的所有值**

```
(df$long <= 100.75 & df$long >= 100.25) 
```

我努力了

```
ind<- which(df1$long <= 100.75 & df1$long >= 100.25) 
```

我明白了

```
ind
[1]  1  2  3  4  5  6 10 # 
```

这是上述条件的 TRUE 值

如果我使用

```
df1$vars[-ind]
[1] 1789.9 1820.6 1789.1 # 
```

我得到上述条件的 FLASE 值

有人可以告诉我如何在data.frame中用NA替换**vars中的这些FALSE索引吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:52:47.443

我刚用过`df1$vars[-ind]=NA`，效果很好。

谢谢

# google-cloud-messaging - 我们可以在自定义构建中使用 GCM 吗？

> ID：15335173
> 
> 赞同：1
> 
> 时间：2013-03-11T09:35:13.637
> 
> 标签：google-cloud-messaging

我们有经过许多修改的自定义 Android 版本。

我们想使用 GCM 服务。

我们可以在这个版本上使用它还是需要任何许可。

还是我们只能在 Google 认证的设备上使用 GCM？

# java - 在 HTML / JavaScript 中创建具有非图像输出的交互式序列图

> ID：15335174
> 
> 赞同：1
> 
> 时间：2013-03-11T09:35:15.383
> 
> 标签：java, javascript, html, sequence-diagram

我想在 HTML/JavaScript 页面上创建序列图的表示。我希望可视化是交互式的。例如，我希望能够单击图中的每个对象/生命线/等并查看实际的源代码。但是，我发现的用于生成序列图的所有工具和库都返回了一个当然无法编辑或交互的图像。有谁知道我可以使用的库，它可以让我访问序列图的内部元素并让我将它们扩展为对象或 HTML 元素？

谢谢

PS。也可以用 Java 来表示。我只是认为使用 JavaScript 显示我想要的功能会更容易，但我也很欣赏有关 Java 的答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T10:48:25.580

[JS 序列图](https://github.com/bramp/js-sequence-diagrams/)听起来很合适；它直接在页面上呈现为 SVG。

# javascript - 在 buttonclick 上移动 div 左/右视口宽度

> ID：15335177
> 
> 赞同：1
> 
> 时间：2013-03-11T09:35:22.293
> 
> 标签：javascript, html, css, slider

我想要做的是制作一个简单的 html/css 水平滑块来生成整个视口。

我已经有一段 javascript 可以计算用户视口并为某些 div 提供所需的宽度/高度，但我似乎无法让按钮左右动画所需的像素数量。（通过getviewport.js计算得到）

我知道我已经接近了，我只是不知道如何将变量 viewportwidth 获取到我的按钮。

这是 getviewport.js

```
function resize() {

        if (typeof window.innerWidth != 'undefined') {
            viewportwidth = window.innerWidth,
            viewportheight = window.innerHeight
        }

        // IE6 in standards compliant mode (i.e. with a valid doctype as the first line in the document)

        else if (typeof document.documentElement != 'undefined' & typeof document.documentElement.clientWidth != 'undefined' && document.documentElement.clientWidth != 0) {
            viewportwidth = document.documentElement.clientWidth,
            viewportheight = document.documentElement.clientHeight
        }

        // older versions of IE

        else {
            viewportwidth = document.getElementsByTagName('body')[0].clientWidth,
            viewportheight = document.getElementsByTagName('body')[0].clientHeight
        }
        document.getElementById("portfolio").style.height = viewportheight+"px";
        document.getElementById("portfolio1").style.height = viewportheight+"px";
        document.getElementById("portfolio2").style.height = viewportheight+"px";
        document.getElementById("portfolio3").style.height = viewportheight+"px";
        document.getElementById("portfolio1").style.width = viewportwidth+"px";
        document.getElementById("portfolio2").style.width = viewportwidth+"px";
        document.getElementById("portfolio3").style.width = viewportwidth+"px";
} 
```

这是动画和按钮脚本：

```
 <script language="javascript">
    function slider_animate(px) {
      $('#moving_part').animate({
        'marginLeft' : px
      });
    }
</script>

<input type="button" value="Move Left" onclick="slider_animate('-=viewportwidth')" />
<input type="button" value="Move Right" onclick="slider_animate('+=viewportwidth')" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:53:39.053

如果我是正确的，您只想将视口的宽度发送到`slider_animate()`功能。如果这是你想要的，你可以简单地做。

```
<input type="button" value="Move Left" onclick="slider_animate('-=' + $(window).width() + 'px')" />
<input type="button" value="Move Right" onclick="slider_animate('+=' + $(window).width() + 'px')" /> 
```

# android - 使用位图分配 9830416 字节的内存不足

> ID：15335183
> 
> 赞同：5
> 
> 时间：2013-03-11T09:35:36.437
> 
> 标签：android, bitmap

我从资产文件夹中获取了一些图像，但我有这个例外：

```
03-11 10:18:28.019: E/dalvikvm-heap(4052): Out of memory on a 9830416-byte allocation. 
```

我在这里有这个错误：

```
//stream to get photo
InputStream bitmap=null;                        
bitmap=getResources().getAssets().open("ProduitsMini/"+productList.get(rang).getImg_mini());
Bitmap bit=BitmapFactory.decodeStream(bitmap);

// get drawable image
Drawable mDrawable = new BitmapDrawable(getResources(),bit); 
```

这很奇怪，因为我在每台设备上都没有这个错误，但仅限于 Galaxy S3。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T09:41:10.953

您可以尝试添加以下代码

```
InputStream bitmap=null; 
bitmap=getResources().getAssets().open("ProduitsMini/"+productList.get(rang).getImg_mini());

BitmapFactory.Options options=new BitmapFactory.Options();
options.inSampleSize = 8;
Bitmap preview_bitmap = BitmapFactory.decodeStream(bitmap,null,options); 
```

这个 inSampleSize 选项减少了内存消耗。

您可以参考以下链接

[https://stackoverflow.com/a/823966/1441666](https://stackoverflow.com/a/823966/1441666)

# django-models - 编辑和更新数据库中已有的数据

> ID：15335186
> 
> 赞同：1
> 
> 时间：2013-03-11T09:35:40.667
> 
> 标签：django-models, django-forms, django-templates

谁能指导我如何编辑和保存数据库中的现有数据

```
def editbook(request,book_id):

    if request.POST:
    book = Book.objects.get(pk=book_id)
        form = BookForm(request.POST,instance = book)
        if form.is_valid():
            form.save()
            return redirect('/index/')
    else:
        book = Book.objects.get(pk = book_id)       
        form = BookForm(instance = book)
        return render_to_response('editbook.html',{ 'form':form }, context_instance=RequestContext(request)) 
```

模板是

```
<html>
<head>
<title>{{ page_title }}</title>
</head>
<body>   
<div align="center">
<form action="/editbook/{{ form.book_id }}/" method="POST" class="BookForm"> {% csrf_token %}
<table>
  <tr>
    <td align="right">Book Name : </td> 
    <td align="left">{{ form.book_name }}
</tr>
  <tr>
    <td align="right">Author Name :</td> 
    <td align="left">{{ form.author_name }}</td>
</tr>
<tr>
  <tr><td align="right">Publisher Name : </td>
  <td align="left"> {{ form.publisher_name }}</td>  
</tr>
</table>
<input type="submit" value="Save">
</form>
</div>
</body>
</html> 
```

当我按下保存按钮时，数据未保存到数据库中。它显示错误为找不到页面（404）。

urls.py 是

```
from django.conf.urls import patterns, include, url
from DemoApp.views import index,addbook,editbook, book_detail,deletebook
from django.contrib import admin

admin.autodiscover()

urlpatterns = patterns('',
    url('^$', index),
    url('^index/$', index),
    url('^addbook/$', addbook),
    url('^book_detail/$', book_detail, 'book_summary'),
    url('^editbook/(?P<book_id>\d+)/$', editbook) ,
    url('^deletebook/(?P<book_id>\d+)/$',deletebook) ,

    #url(r'^admin/', include(admin.site.urls)),

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:32:14.423

1）模板你给的东西是错误的。

2)查看index.html调用表单

# .net - IL 文件中的 .extern 模块

> ID：15335188
> 
> 赞同：3
> 
> 时间：2013-03-11T09:35:45.703
> 
> 标签：.net, manifest, il

我无法对 IL 清单中的**.extern 模块**指令做出任何令人满意的解释。这个指令是什么意思？任何帮助表示赞赏。

另外，我想知道，如果我对程序集进行强命名，是否还需要对 .extern 模块部分中列出的 .net 模块进行强命名？

编辑：

正如 Hans Passant 指出的那样，该指令是无效的。正确的指令是' **.module extern** '

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:21:28.880

它是对外部库的引用。我确实相信它只是指定了要加载的程序集，并且我相信可以选择在哪里找到它，什么版本以及是否应该对其进行签名。

另见[http://jilc.sourceforge.net/ecma_p2_cil.shtml](http://jilc.sourceforge.net/ecma_p2_cil.shtml)

# android - 如何使用chmod在android中更改文件的权限

> ID：15335190
> 
> 赞同：3
> 
> 时间：2013-03-11T09:35:49.813
> 
> 标签：android, unix, chmod, roottools

我正在使用 chmod 命令更改文件的权限，但它在我的代码中不起作用，而且我的设备也已植根：

```
String MyFilePath = "/data/data/MyPkgName/database/com.pocketchange.android.http.AsyncHttpRequestService.db";
CommandCapture command = new CommandCapture(0, "chmod  777 " + "\""+ MyFilePath+ "\"");
RootTools.getShell(true).add(command).waitForFinish(); 
```

当它执行时，命令输出是：

```
Unable to chmod /data/data/MyPkgName/databases/com.pocketchange.android.http.AsyncHttpRequestService.db: No such file or directory 
```

但是该文件是存在的，当我使用此代码更改数据库目录中另一个文件的权限时，它成功了，所以我现在该怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T13:57:43.890

1.先做RootTools.isAccessGiven()检查，然后系统会以Dialog的样式请求“Root”权限。允许root后就可以成功运行root命令了。
2."\""+ 我的文件路径+ "\""=> 我的文件路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:40:03.707

在 ADB shell 中使用 chmod 命令...

```
String[] strExec = new String[] 
{ 
       "/system/bin/sh", "-c","/system/bin/chmod 777
};

try {
    Runtime.getRuntime().exec(strExec);
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

# c++ - 是否需要在头文件中定义初始化列表？

> ID：15335193
> 
> 赞同：55
> 
> 时间：2013-03-11T09:35:54.067
> 
> 标签：c++, initialization-list

最近我创建了类`Square`：

=========头文件======

```
class Square
{
    int m_row;
    int m_col;

public:
    Square(int row, int col): m_row(row), m_col(col) 
}; 
```

==========cpp文件======

```
#include "Square.h"

Square::Square(int row, int col)
{
    cout << "TEST";
} 
```

但后来我收到很多错误。如果我删除 cpp 文件并将头文件更改为：

=========头文件======

```
class Square
{
    int m_row;
    int m_col;

public:
    Square(int row, int col): m_row(row), m_col(col) {};
}; 
```

它没有错误。这是否意味着初始化列表必须出现在头文件中？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-03-11T09:40:19.750

***初始化列表***是构造函数*定义*的一部分，因此您需要在定义构造函数主体的同一位置定义它。这意味着您可以在头文件中使用它：

```
public:
    Square(int row, int col): m_row(row), m_col(col) {}; 
```

或在 .cpp 文件中：

```
Square::Square(int row, int col) : m_row(row), m_col(col) 
{
    // ...
} 
```

但是当你在 .cpp 文件中有定义时，然后在头文件中，应该只有它的声明：

```
public:
    Square(int row, int col); 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-03-11T09:38:54.830

你可以有

==============头文件================

```
class Square
{
    int m_row;
    int m_col;

public:
    Square(int row, int col);
}; 
```

==================cpp ====================

```
Square::Square(int row, int col):m_row(row), m_col(col) 
{} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-11T09:39:59.443

初始化列表与构造函数定义一起出现，而不是与不是定义的声明一起出现。因此，您的选择是：

```
Square(int row, int col): m_row(row), m_col(col) {}; // ctor definition 
```

在类定义中，否则：

```
Square(int row, int col); // ctor declaration 
```

在类定义中，并且：

```
Square::Square(int row, int col): m_row(row), m_col(col) {} // ctor definition 
```

别处。“其他地方”允许在标题中，如果你做到了`inline`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-11T09:37:21.863

不是要求。它也可以在源文件中实现。

```
// In a source file
Square::Square(int row, int col): m_row(row), 
                                  m_col(col) 
{} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T09:59:07.273

这种初始化变量称为成员初始化列表。成员初始化列表可以用在头文件或源文件中。那没关系。但是当你在头文件中初始化它时，构造函数必须有定义。您可以参考[C++ 成员初始化列表](https://stackoverflow.com/questions/7665021/c-member-initialization-list)了解更多详细信息。

# mongodb - 具有空值的 MongoDb 查询数组

> ID：15335197
> 
> 赞同：13
> 
> 时间：2013-03-11T09:36:08.807
> 
> 标签：mongodb

我的收藏中的对象看起来像：

```
{ MyArray:[null, "some value", null] } 
```

我想查询那些具有空值作为数组元素的对象。查询

```
db.collection.find({"MyArray":null}) 
```

不起作用，它似乎只找到 MyArray 为空的对象，例如

```
{ MyArray:null } 
```

我需要如何定义我的查询？

编辑：请查看我的真实对象之一：

```
{
        "_id" : BinData(3,"ch9PrWveqU6niB6FGVhIOg=="),
        "PeerGroup" : "male",
        "ProductId" : BinData(3,"weRiKOtXEUSDZHkGHLcwzw=="),
        "CategoryIds" : [
                BinData(3,"BXzpwVQozECLaPkJy26t6Q=="),
                BinData(3,"ox303ZeM50KelvoUbPBJ8Q=="),
                BinData(3,"26ziaY+G9UKMyjmtVkkhcg=="),
                BinData(3,"D2X8vObte0eJHNcDfp2HBw==")
        ],
        "ShopId" : BinData(3,"ZdfPmrlKR0GkLPC4djJuKw=="),
        "BrandId" : BinData(3,"kCHyuyLvgECxPF1nxwr7qQ=="),
        "Created" : ISODate("2012-08-24T07:42:12.416Z"),
        "LastActivity" : ISODate("2013-01-14T19:38:11.776Z"),
        "Price" : 129.9,
        "Sale" : false,
        "Rating" : 11.057340703605368,
        "RatingTimed" : 0.05670431130054035,
        "Available" : null,
        "FreeDelivery" : null,
        "Attrs" : [
                null,
                null,
                null,
                null
        ]
} 
```

然后我查询：

```
db.collection.find({"Attrs":null}) 
```

没有结果。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2015-04-14T11:27:34.960

为了查找带有数组的文档，带有空元素，请运行：

```
db.collection.find({"keyWithArray":{$elemMatch:{"$in":[null], "$exists":true}}}) 
```

根据[safaribooksonline](https://www.safaribooksonline.com/library/view/mongodb-the-definitive/9781449344795/ch04.html)正确`null`匹配使用`$in`（因为你不能使用`$eq`with `null`）。此外，与`null`：

```
{"something":null} 
```

将匹配“something”字段设置为 null 的文档以及根本没有“something”字段的每个文档。因此，我们必须确保密钥存在使用`$exists`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-07T03:59:54.210

（不是真正的答案，但不适合评论）

我无法重现该问题，我将您的数据复制到 mongo shell 并在 MongoDB 版本 2.2.3、2.4.1 和 2.4.0 中进行了尝试：

MongoDB shell 版本：2.4.0 连接到：test

```
> db.version()
2.4.0
> db.xxx.insert({
... "_id" : BinData(3,"ch9PrWveqU6niB6FGVhIOg=="),
... "PeerGroup" : "male",
... "ProductId" : BinData(3,"weRiKOtXEUSDZHkGHLcwzw=="),
... "CategoryIds" : [
... BinData(3,"BXzpwVQozECLaPkJy26t6Q=="),
... BinData(3,"ox303ZeM50KelvoUbPBJ8Q=="),
... BinData(3,"26ziaY+G9UKMyjmtVkkhcg=="),
... BinData(3,"D2X8vObte0eJHNcDfp2HBw==")
... ],
... "ShopId" : BinData(3,"ZdfPmrlKR0GkLPC4djJuKw=="),
... "BrandId" : BinData(3,"kCHyuyLvgECxPF1nxwr7qQ=="),
... "Created" : ISODate("2012-08-24T07:42:12.416Z"),
... "LastActivity" : ISODate("2013-01-14T19:38:11.776Z"),
... "Price" : 129.9,
... "Sale" : false,
... "Rating" : 11.057340703605368,
... "RatingTimed" : 0.05670431130054035,
... "Available" : null,
... "FreeDelivery" : null,
... "Attrs" : [
... null,
... null,
... null,
... null
... ]
... }
... )
> db.xxx.find({"Attrs":null}).pretty()
{
    "_id" : BinData(3,"ch9PrWveqU6niB6FGVhIOg=="),
    "PeerGroup" : "male",
    "ProductId" : BinData(3,"weRiKOtXEUSDZHkGHLcwzw=="),
    "CategoryIds" : [
        BinData(3,"BXzpwVQozECLaPkJy26t6Q=="),
        BinData(3,"ox303ZeM50KelvoUbPBJ8Q=="),
        BinData(3,"26ziaY+G9UKMyjmtVkkhcg=="),
        BinData(3,"D2X8vObte0eJHNcDfp2HBw==")
    ],
    "ShopId" : BinData(3,"ZdfPmrlKR0GkLPC4djJuKw=="),
    "BrandId" : BinData(3,"kCHyuyLvgECxPF1nxwr7qQ=="),
    "Created" : ISODate("2012-08-24T07:42:12.416Z"),
    "LastActivity" : ISODate("2013-01-14T19:38:11.776Z"),
    "Price" : 129.9,
    "Sale" : false,
    "Rating" : 11.057340703605368,
    "RatingTimed" : 0.05670431130054035,
    "Available" : null,
    "FreeDelivery" : null,
    "Attrs" : [
        null,
        null,
        null,
        null
    ]
} 
```

请将上述序列复制到您的 mongo shell 并在此处发布结果。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T07:50:18.767

好的，我通过我的 C# 驱动程序加载我的“空”候选者来解决这个问题，结果发现这些值不是空的，而是 Bson 未定义！它们在 shell 中显示为“null”！请参阅[http://jira.mongodb.org/browse/SERVER-2426](http://jira.mongodb.org/browse/SERVER-2426)。这有效：

`db.xxx.find({"Attrs":{$type:6}})`

# .net - 在更改对对象的引用时，Visual Basic 中的 WithEvents 是否保留其 EventHandlers？

> ID：15335201
> 
> 赞同：5
> 
> 时间：2013-03-11T09:36:19.793
> 
> 标签：.net, vb.net, events, event-handling, handles

更改对对象的引用时`WithEvents`，Visual Basic 中是否保留其 s？`EventHandler`

假设我已经声明了一个按钮，触发事件：

```
Private WithEvents _MyButton 
```

现在我订阅了一个事件处理程序：

```
Private Sub _MyButton_Click() Handles _MyButton.Click 
  ' Here I DoClick()
End Sub 
```

当我更改按钮对象的实例时，是否仍会调用该`DoClick()`函数，如下所示？

```
_MyButton = New Button() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:06:23.460

这让我很好奇，所以我编写了一个小型控制台应用程序来可视化如果您使用计时器进行此实验会发生什么：

```
Private WithEvents _t As New Timers.Timer With {.Enabled = True}
Private Sub _t_Elapsed(sender As Object, e As Timers.ElapsedEventArgs) Handles _t.Elapsed
    Console.WriteLine("tick")
End Sub

Sub Main()
    ' let it tick for 5 seconds
    Task.Delay(5000).Wait()

    ' destroy the current timer
    Console.WriteLine("destroying this timer")
    _t.Dispose()
    _t = Nothing

    ' add a little pause
    Task.Delay(1000).Wait()

    ' create a new timer
    Console.WriteLine("creating a new timer")
    _t = New Timers.Timer With {.Enabled = True}

    ' let it tick for 5 seconds
    Task.Delay(5000).Wait()

End Sub 
```

如果您运行此代码，您会发现它确实在`_t`替换实例时附加了事件处理程序。我不知道它是怎么做到的，但神奇之处可能在于`Handles`关键字。无论如何，答案是肯定的。

# postgresql - 如何在 PostgreSQL 中将表从服务器复制到另一个？

> ID：15335209
> 
> 赞同：10
> 
> 时间：2013-03-11T09:36:35.303
> 
> 标签：postgresql

我在 PostgreSQL 8.4 上有两台服务器：

```
server1:5432
server2:5432 
```

现在我想从 server1 复制表并将其放入 server2 的数据库中。
有可能吗？

**更新**

我尝试像@Valery Viktorovsky 的回答一样：

```
pg_dump --server1:5432 --encoding=utf8 --no-owner --username=postgres --123456 np_point > D:\np_point.sql
psql --server2:5432 --username=postgres mrsk -f D:\np_point.sql 
```

并得到错误：

```
ERROR:  syntax error at or near "pg_dump"
LINE 1: pg_dump --server1:5432 --encoding=utf8 --no-owner --use... 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-11T09:41:55.187

最安全的方法是使用 pg_dump。

```
pg_dump --host server1 --encoding=utf8 --no-owner --username=foo --password -t table_name db_name > server1_db.sql
psql --host server2 --username=foo db_name -f server1_db.sql 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-02-20T05:51:10.330

确切的命令 -

**1.通过导出`pg_dump`到文件中：**

```
 pg_dump --host "source hostname" --port 5432 --username "username" --no-password --verbose --file "filename" --table "source schema.tablename" "source db name" 
```

这将在您运行上述命令的目录中创建一个名为“filename”的文件 - 该文件将包含源表的模式和数据。您也可以提供任何绝对路径。

**2.通过psql导入：**

```
 psql --host "target hostname" --port 5432 --username "username" --password --verbose --file "file name" "target db name" 
```

->这将提示输入密码

在运行导入之前，删除目标表（如果存在）。

像魅力一样工作并在 2 分钟内完成 1000 万行

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-11T09:50:58.747

尝试这个

使用 psql 中的 COPY 命令。连接到 server1 并[导出到 CSV，](https://stackoverflow.com/questions/1120109/export-postgres-table-to-csv-file-with-headings)然后连接到 server2 并[从 CSV 导入](https://stackoverflow.com/questions/2987433/how-to-import-csv-file-data-into-a-postgres-table)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-23T14:54:18.067

我在 python 中编写了一个可以提供帮助的小脚本。注意 - 它只适用于小桌子。您首先需要 pip 安装 pandas、sqlalchemy 和 psycopg2。将文件创建为 pycopy.py 并使用“python pycopy.py tablename”（不带引号）运行它。您可以更改源和目​​标以使用任何其他数据库类型 - 只需更改源和目​​标字符串。

剧本：

```
import pandas as pd
import sys
import sqlalchemy as sa

strengine_source='postgresql://user:password@db_ip:5432/dbsourcename'
strengine_dest='postgresql://user:password@db_ip:5432/dbdestinationname'

if len(sys.argv) > 1:
        tblname = sys.argv[1]
        df=pd.read_sql("select * from " + tblname,sa.create_engine(strengine_source))
        df.to_sql(tblname,sa.create_engine(strengine_dest), index=False) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-28T12:19:49.070

这将仅将特定表从特定数据库复制到目标数据库

```
 pg_dump -h localhost -U postgres -p 5432 -C -t table_name source_db_name | ssh -C username@ip "psql -h localhost -U postgres -p 5432 destination_db_name" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-02T20:23:22.647

您还可以使用 Linux shell 脚本将表数据从一台服务器迁移到另一台 PostgreSQL 服务器。

我刚刚在下面类似的堆栈问题上发布了我的答案，请参考这个。 [将 PostgreSQL 数据库复制到另一台服务器](https://stackoverflow.com/questions/1237725/copying-postgresql-database-to-another-server)

# sass - Sass/Scss 到 Stylus 转换器？

> ID：15335210
> 
> 赞同：23
> 
> 时间：2013-03-11T09:36:48.627
> 
> 标签：sass, stylus

是否有任何工具可以将 SASS/SCSS 转换为 Stylus？

或者有什么方法可以加快编译 SCSS？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-04-10T13:05:54.543

[MojoTech](http://www.mojotech.com)制作了一个工具，可以轻松地将 SASS 转换为 Stylus：

[http://sass2stylus.com/](http://sass2stylus.com/)

如果您想了解它的工作原理，可以在 Github 上查看[源代码。](https://github.com/mojotech/sass2stylus/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-11-11T06:22:10.463

我怀疑是否有任何可用的直接工具，但你可以这样做：

将 SASS 转换为 CSS

```
sass input.scss -o output.css 
```

然后将 CSS 转换为 Stylus

```
stylus --css output.css input.styl 
```

## 更新

一行转换

```
sass input.scss | stylus --css 
```

# c++ - 调用opencv方法时编译错误

> ID：15335212
> 
> 赞同：0
> 
> 时间：2013-03-11T09:36:58.050
> 
> 标签：c++, opencv, java-native-interface

我得到一个 OpenCV Mat 对象的地址。初始化对象后，我想调用以下方法

```
 Mat::Mat(const Mat& m, const Range* ranges) 
```

[OpenCV方法链接](http://docs.opencv.org/2.4.4/modules/core/doc/basic_structures.html#Mat%3a%3aMat%28const%20Mat&%20m,%20const%20Range%2a%20ranges%29)

但我收到编译错误。好久没做c++了。任何人都可以帮忙吗？

**代码**

```
void HelloWorld::callBack(jlong addrRgba, float dt) {

long lrgba = (long) mRgba;
Mat bgraMat = *(Mat*) lrgba;

Mat rgbMat = new Mat(&bgraMat, Range::all());   //cant get this to work
} 
```

**错误信息**

```
error: no matching function for call to 'cv::Mat::Mat(cv::Mat*, cv::Range)' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:18:46.657

你能试试这个吗？

```
Range rAll = Range::all() ;   
Mat *rgbMat = new Mat(bgraMat, &rAll); 
```

编辑：PK。很好，它解决了问题。只是为了帮助您理解我为什么提出这个建议：

您想使用构造函数：

```
 Mat::Mat(const Mat& m, const Range* ranges) 
```

它引用一个`Mat`变量。您只需传递一个`Mat`变量。并获取一个指向`Range`变量的指针。您可以传递一个`Range`变量的地址。`Range`只存储两个`int`:`start`和`end`. 它是可复制的。一个特殊的“静态”值`Range`是`all()`返回的内容以及您可以复制和传入的内容`rAll`。您将需要检查此工作是否正确，而不仅仅是编译。

编辑2：试图理解你在做什么的意思，我会提出简单的建议：

```
Mat *rgbMat = new Mat(bgraMat); 
```

或者

```
Mat rgbMat = Mat(bgraMat); 
```

我认为这将与以下内容相同：

```
Range rAll[2];
rAll[0]= Range::all() ;
rAll[1]= Range::all() ;
Mat *rgbMat = new Mat(bgraMat, rAll); 
```

正如@Peter Wood 所说。我也很好奇：

```
long lrgba = (long) mRgba;
Mat bgraMat = *(Mat*) lrgba; 
```

如果 mRgba 是指向要克隆的 Mat 的指针，为什么不呢？：

```
Mat *rgbMat = new Mat(*mRgba); 
```

# c++ - 无法接收客户端 IP 地址

> ID：15335214
> 
> 赞同：0
> 
> 时间：2013-03-11T09:36:58.773
> 
> 标签：c++, client-server, ip-address

我在 C++ 控制台应用程序中有一个客户端服务器程序。我先运行服务器，然后运行客户端。服务器应显示来自已连接客户端的 IP 地址，但显示为 0.0.0.0

我猜是这条线导致了问题

```
getsockname(ListeningSocket, (SOCKADDR *)&ServerAddr, (int *)sizeof(ServerAddr));
printf("Server: Receiving IP(s) from client: %s\n", inet_ntoa(ServerAddr.sin_addr)); 
```

在客户端中，我将 IP 地址设置为 127.0.0.1

```
 ServerAddr.sin_addr.s_addr = inet_addr("127.0.0.1"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:40:53.907

`sockaddr`您会在提供的 to中获得客户地址`accept`。如果您以后想要一个连接的客户端套接字地址，您应该使用`getpeername`（*不是* `getsockname`）。

您还应该将有效且已初始化的变量作为长度传递给`getpeername`（或`getsockname`）：

```
int size = sizeof(SOCKADDR_IN);
getpeername(connectedsocket, (SOCKADDR*) &address, &size); 
```

您现在正在做的是尝试获取服务器套接字的本地地址，但错误地调用它。

# javascript - 将 jQuery（或下划线）与脚本加载器一起使用的好处

> ID：15335217
> 
> 赞同：1
> 
> 时间：2013-03-11T09:37:09.353
> 
> 标签：javascript, jquery, requirejs, underscore.js, amd

有关于 AMD 对 jQuery 和下划线的支持的讨论。这里的许多问题表明，开发人员在使用这些库时遇到了 require 或 curl 的问题。为什么不使用 jQuery 并下划线“原样”（使用自己的脚本元素）？为什么不对实际的应用程序代码使用像 require 这样的模块系统呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:42:12.503

使用例如 RequireJS 的好处之一是能够将所有内容压缩和优化到**一个文件**中，从而使负载更小，请求更少。

许多人盲目地关注文件的大小，而忘记了文件的数量也很重要——因为您需要对每个文件进行请求。客户必须做的请求越少越好。

我会查看 RequireJS 中的 r.js 以了解有关优化的更多信息。

* * *

### 要回答您的问题：

分别添加 jQuery 和下划线会增加客户端的负载大小，并且还会添加两个请求，这不是最佳的。

jQuery 应该不再是添加到 RequireJS 的问题，您不需要填充或类似的东西。如果你确实想要下划线，你应该改用 LoDash，它支持 AMD，并且是下划线的性能优化版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:40:54.793

我们在工作场所遇到的另一个用例是当您将应用程序嵌入到其他人的网站时。父站点可能已经在页面上运行了自己的 jQuery 代码。他们的 jQuery 代码可能与您的版本不同，它可能使用与您不同的插件，等等。因此，拥有自己的 jQuery 版本并且不将其泄漏到全局范围是在这种情况下的巨大胜利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T18:41:20.413

第一的：

AMD 风格的加载器只解决了一个问题——您可以避免在开发过程中将所有代码放在一个文件中。只有在最后“构建”AMD 树时，问题才会得到解决。如果你不这样做，你最终会收到更多的 HTTP 请求。

因此，在选择方式时，请将 AMD 视为“模块加载器 API + 编译器/汇编器”包。

虽然我个人更喜欢 CurlJS，但我必须说拥有`r.js`是 RequireJS 的一大卖点。

这意味着如果您可以使用其他东西进行构建，但是`r.js`（CurlJS 有一个**beta**构建脚本。我有一个 AMD 构建脚本[http://prunejs.com/](http://prunejs.com/)很多其他人更喜欢他们自己的构建脚本）使用 CurlJS。否则使用 RequireJS。

第二：jQuery、Underscore 等。

这些对您的 AMD 选择没有任何影响。它们可以继续是全球性的并照此使用。jQuery 甚至可以通过在看到 AMD 系统加载时将自己注册为 AMD 模块来帮助您（尽管以一种搞砸的方式）：

[使用 jQuery 作为依赖项而不用 RequireJS 加载 jQuery？](https://stackoverflow.com/questions/14854046/use-jquery-as-a-dependency-without-loading-jquery-with-requirejs/14870365?noredirect=1#comment20961466_14870365)

您可以继续通过脚本标签加载下划线，但为它创建一个伪 / 包装 AMD 模块：

```
define('underscore', function(){
    return window._
}); 
```

换句话说，AMD 系统可能会搭载在您当前的内联脚本标签结构之上

# javascript - 实时统计？

> ID：15335219
> 
> 赞同：0
> 
> 时间：2013-03-11T09:37:20.000
> 
> 标签：javascript, api, backbone.js, ember.js

有点“概念”问题。我的任务是创建一个显示公司统计数据的内部屏幕。我认为使用前端框架（目前在骨干和余烬之间）会很好，但问题是，我在“统计服务器”可以提供什么方面非常有限，所以像 socket.io 这样的解决方案很遗憾不在框架内。但是，我想有一个非常简单的 API 来返回 JSON 统计信息：

```
{
    "Bob":{
        "xs":5,
        "turnover":10000,
        "surveys":5
    }
} 
```

然后我可以让框架每隔一两秒轮询一次 API 以进行更改。但是我需要找到一种方法来检测值何时发生变化（因此可以弹出警报或其他东西。）

`if(new.value != old.value) alert_function()`

但这意味着对每一个可能会变得混乱的数字都这样做。使用主干或 ember.js 做这种事情的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:20:09.340

[主干获取 API](http://backbonejs.org/#Collection-fetch)支持一个选项 {update: true}，它将在现有值合并到集合中时触发集合更新事件。然后，您可以捕获这些更新事件并运行您的自定义代码。链接文档中的示例：

*例如，要获取一个集合，为每个新模型获取一个“添加”事件，为每个更改的现有模型获取一个“更改”事件，而不删除任何内容：*

```
mycollection.fetch({update: true, remove: false}) 
```

然后，您可以使用[主干事件](http://backbonejs.org/#Events)让您的视图监听更改并根据需要进行更新。[这个问题](https://stackoverflow.com/questions/8596002/have-view-listen-to-collection-event)有一个很好的例子。

另外，这有点离题，但是当我看到您的标题时，我立即想到了[D3.js](http://d3js.org/)。它非常适合轮询 JSON URL 并使用转换来更新可视化。

# linux - 取消链接目录时会发生什么？

> ID：15335223
> 
> 赞同：1
> 
> 时间：2013-03-11T09:37:23.723
> 
> 标签：linux, unlink, rmdir

假设`c.txt`在目录中`b`。`unlink c.txt`很简单，系统只是删除`{XXX, c.txt}`目录中的条目`b`。但是，如果`b`是 的子目录`a`，并且我想取消链接`b`，程序是相同的还是更复杂？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T09:54:37.683

`unlink(2)`只能删除一个文件，而`rmdir(2)`只能删除空目录。

如果要递归删除目录，则必须智能地使用这两个系统调用。您可能会发现递归删除的许多不同实现，例如[这个](https://stackoverflow.com/a/5467788/1734130)使用`nftw`，或者[这个](https://stackoverflow.com/a/2256974/1734130)使用`opendir`/ `readdir`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:40:16.370

从取消链接的手册页：

```
When the utility is called as unlink, only one argument, 
which must not be a directory, may be supplied. 
```

所以在使用 unlink 时，不能将目录作为参数传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-03T12:14:36.980

在 Linux 上，结果似乎是 EISDIR，但在 OSX 上，结果似乎是 EPERM，所以显然你不能安全地调用 unlink()，然后仅在 unlink() 失败时将其作为目录尝试。

```
dickbutt:~/unlink$ uname -a
Linux dickbutt 4.14.69-0-vanilla #1-Alpine SMP Mon Sep 10 19:33:23 UTC 2018 x86_64 Linux
dickbutt:~/unlink$ cat ./unlink.c
#include <stdio.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>

int main() {
    int ret = unlink("./xxx");
    printf("ret is [%d] and errno is [%d] aka [%s]\n", ret, errno,
strerror(errno));
}
dickbutt:~/unlink$ mkdir xxx
dickbutt:~/unlink$ gcc ./unlink.c
dickbutt:~/unlink$ ./a.out
ret is [-1] and errno is [21] aka [Is a directory]
dickbutt:~/unlink$ 
```

```
notgay:unlink user$ uname -a
Darwin notgay.local 14.5.0 Darwin Kernel Version 14.5.0: Sun Jun  4 21:40:08 PDT 2017; root:xnu-2782.70.3~1/RELEASE_X86_64 x86_64
notgay:unlink user$ cat ./unlink.c
#include <stdio.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>

int main() {
    int ret = unlink("./xxx");
    printf("ret is [%d] and errno is [%d] aka [%s]\n", ret, errno, strerror(errno));
}
notgay:unlink user$ mkdir xxx
notgay:unlink user$ gcc ./unlink.c
notgay:unlink user$ ./a.out
ret is [-1] and errno is [1] aka [Operation not permitted]
notgay:unlink user$ 
```

# vba - 如何从 Word 文档中批量“删除代码证书”，然后使用我自己的证书将其辞职

> ID：15335224
> 
> 赞同：1
> 
> 时间：2013-03-11T09:37:23.913
> 
> 标签：vba, ms-word

我有 1000 个 Microsoft Word 文档，其中包含一个由旧供应商签名的宏。

我需要**删除旧证书并用我自己的**. 我可以手动执行此操作，但好吧..想编写脚本。

关于如何使用脚本执行此操作的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:41:34.763

不幸的是，VBA 对象模型不支持以编程方式对宏项目进行签名。

假设您只需一次替换 1000 个宏的签名，您可能最好使用 UI 自动化工具（如**[AutoHotkey](http://www.autohotkey.com/)** ）编写短脚本。

# php - 在 2 个日期之间的所有表上执行 SELECT

> ID：15335226
> 
> 赞同：1
> 
> 时间：2013-03-11T09:37:29.390
> 
> 标签：php, mysql, loops, datediff

我有一个 Mysql 数据库，每天都有一张表，它是这样的：`my_table_20130310`，`my_table_20130311`...

我想在所有表格上进行选择，比如说在 '2013/02/02' 和 '2013/03/28' 之间

有一个愚蠢的解决方案，即将给定的日期转换为：

```
'2013/02/02' => 20130202

'2013/03/28' => 20130328 
```

然后转换成 (int) 然后做一个循环：

```
 $dbStartDate  = str_replace('/', '', substr($startDate, 0, 10));
      $dbEndDate    = str_replace('/', '', substr($endDate, 0, 10));

      for ($tbDate = $dbStartDate; $tbDate <= $dbEndDate ; $tbDate++) { 
        $res = 'SELECT * FROM my_table_' . $tbDate ;
        ...
        ... 
      } 
```

但这不是一个解决方案，因为它将尝试解析 20130202 和 20130328 之间的所有数字（20130299、20130245 ....）

一个想法 ？

谢谢各位

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:45:10.730

在伪代码中：

```
DateTime startDate = new DateTime('2013-02-02');
DateTime endDate = new DateTime('2013-03-08');

for(DateTime d = startDate; d <= endDate; d = d.Add(new DateInterval('P1D')))
{
    res = 'SELECT * FROM my_table_' . d.format('YYYYmmdd');
    //...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:59:54.687

试试这个：

```
$dbStartDate = new DateTime('2013/02/02');
$dbEndDate = new DateTime('2013/03/28');
$diff = $dbEndDate->diff($dbStartDate)->days; // get the difference in N days

// just a loop :p
$currentDate = $dbStartDate;
for($i=0;$i<=$diff;$i++){
    $query = 'SELECT * FROM my_table_' . $currentDate->format('Ymd');
    date_add($currentDate, date_interval_create_from_date_string('1 day'));
    // echo $query."<br/>"; // for testing purposes
} 
```

# mysql - SQL 按给定行列出包含“1”的列

> ID：15335233
> 
> 赞同：1
> 
> 时间：2013-03-11T09:37:58.813
> 
> 标签：mysql, sql, heidisql

我的应用程序读取用户创建的 txt 文件，其中包含查询文本、描述、输入和输出、查询类型等。所以我不能让从数据库中获取数据并在 java 中详细说明它们变得更容易（我'米更先进）。

我有一个备用零件表，它是通过 HEIDI SQL 中的 CSV 导入从 excel 文件导入的。

它是这样制作的：

```
+-------------+---------+----------+---------+----- ----+----------+
| 零件编号 | X 型 | 型号 Y | Z 型 | 模型 1 | 型号 2 |
+-------------+---------+----------+---------+----- ----+----------+
| A部分| 0 | 0 | 1 | 0 | 0 |
| B 部分 | 1 | 0 | 0 | 1 | 0 |
| C部分| 1 | 1 | 1 | 0 | 0 |
| D部分| 0 | 0 | 0 | 1 | 1 |
+-------------+---------+----------+---------+----- ----+----------+

```

我需要列出使用某个部分的模型，例如：PART C 用于构建模型 X、Y 和 Z。

我不想手动列出所有列，因为它们很多而且经常更改。

你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:54:20.483

如果我理解正确，您需要多对多关系，因为与每个模型关联的零件数量是可变的。我不知道这个heidisql，但技术必须相同。

基本上，您所拥有的是一张用于零件的表格

**部分：**

* * *

编号 | 姓名

* * *

另一个用于**模型**

* * *

编号 | 姓名

* * *

最后是连接前两个表的第三个表

**models_to_parts**

* * *

编号 | 型号ID | part_id

* * *

这些表之间的关系是：

![在此处输入图像描述](../Images/c66fd915be0ff8b531549f6c8158fbb9.png)

检索与模型关联的部分的 SQL 应如下所示：

```
SELECT models.name, parts.name FROM models

INNER JOIN models_to_parts ON models.id = models_to_parts.model_id
INNER JOIN parts ON models_to_parts.part_id = parts.id

WHERE models.name = "C" -- or whatever condition you want on model or part 
```

要构建这个多对多表，您需要插入模型，然后是部件，然后读取两个 id 以插入连接它们的行。

如果需要，请在此处查看更多信息：[http ://www.tomjewett.com/dbdesign/dbdesign.php?page=manymany.php](http://www.tomjewett.com/dbdesign/dbdesign.php?page=manymany.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:56:30.557

规范化您的架构：

```
CREATE TABLE normalised_parts (
  PRIMARY KEY (model, part)
) SELECT 'X' AS model, `PART NUMBER` AS part FROM spare_parts WHERE `MODEL X`
UNION ALL
  SELECT 'Y', `PART NUMBER` FROM spare_parts WHERE `MODEL Y`
UNION ALL
  SELECT 'Z', `PART NUMBER` FROM spare_parts WHERE `MODEL Z`
UNION ALL
  SELECT '1', `PART NUMBER` FROM spare_parts WHERE `MODEL 1`
UNION ALL
  SELECT '2', `PART NUMBER` FROM spare_parts WHERE `MODEL 2`
-- etc. 
```

然后你的问题减少到：

```
SELECT model FROM normalised_parts WHERE part = 'PART C' 
```

[如果模型列未知/众多，您可以从信息模式](http://dev.mysql.com/doc/en/columns-table.html)创建上述 DDL ，然后[准备并执行](http://dev.mysql.com/doc/en/sql-syntax-prepared-statements.html)它：

```
SELECT CONCAT('
  CREATE TABLE normalised_parts (
    PRIMARY KEY (model, part)
  ) ', GROUP_CONCAT('
    SELECT ', QUOTE(COLUMN_NAME), ' AS model, `PART NUMBER` AS part',
    ' FROM spare_parts WHERE `', REPLACE(COLUMN_NAME, '`', '``'), '`'
    SEPARATOR '
  UNION ALL'))
INTO  @sql
FROM  INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_SCHEMA = DATABASE()
  AND TABLE_NAME   = 'spare_parts'
  AND COLUMN_NAME LIKE 'MODEL %'  -- or whatever is appropriate

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请注意，您可能需要增加 的值[`group_concat_max_len`](http://dev.mysql.com/doc/en/server-system-variables.html#sysvar_group_concat_max_len)，具体取决于列名的聚合长度。

# java - 如何在java中检测打开的窗口

> ID：15335237
> 
> 赞同：1
> 
> 时间：2013-03-11T09:38:12.837
> 
> 标签：java

通过使用下面的代码，我打开了一个窗口（比如一些软件安装程序窗口），它运行良好，在这里我想检查窗口是否打开的天气。

如何检测窗口是否*打开*？

代码片段：-

```
 cmdarray = "......";
  Runtime runTime = Runtime.getRuntime(); 
  Process responce = runTime.exec(cmdarray); 
```

**什么样的窗户**

**Ans** :- 随处安装程序窗口

最后我能够通过使用侯赛因提供的解决方案找到窗口是否打开

如果我想关闭窗口，我该如何关闭它......

我在java中使用**taskkill /F /IM << installer_window>>.exe**命令（如runtime.exe（“command”）;）来终止进程。但是窗口没有关闭。有什么办法可以关闭那个窗口。

提前致谢。

**@侯赛因**

我按照你说的尝试了，但我收到类似**错误的错误：无法终止 PID 4408 的进程“proces.exe”原因：只能强制终止此进程（使用 /F 选项）。**这就是我包含**/F**的原因，在这个帮助下，我能够终止进程，但窗口没有关闭。

请提供快速解决方案，等待回复....

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:48:11.440

这将为您提供 Windows 中运行的所有进程的完整列表，您可以对其进行迭代以使所需的程序运行或不运行。

```
 public class taskmanager {

        public static void main(String[] args) throws IOException {
            String line;
            Process p = Runtime.getRuntime().exec("tasklist.exe");
            BufferedReader input = new BufferedReader(new InputStreamReader(p.getInputStream()));
            while ((line = input.readLine()) != null) {
                System.out.println(line); //<-- Parse data here.
            }
            input.close();
                String processToKill = "notepad++.exe"
                killProcess(processToKill);
        }
        public void killProcess(String processName)
        {
         Runtime.getRuntime().exec("taskkill /IM " + processName);
         }
    } 
```

# jquery - 呼叫重置后，如何在 btn 组中有一个禁用的按钮？

> ID：15335240
> 
> 赞同：3
> 
> 时间：2013-03-11T09:38:23.180
> 
> 标签：jquery, twitter-bootstrap

我怎么能有一个`disabled button`在`btn-group`一个电话后`reset`？

我有一个`btn-group`. 我将一个设置`button`为`disabled`. 一切正常。

但是，如果我打电话，`button('reset')`那么它会删除按钮上的禁用，并且永远不能再次添加它。

这是一个小提琴[http://jsfiddle.net/ejW3w/66/](http://jsfiddle.net/ejW3w/66/)

```
$(".btn-group button").button("reset"); // removed the disable !!
$(".btn-group button").addClass('disabled').attr('disabled','disabled'); // This addclass does not re-add the disabled !! 
```

我尝试添加禁用`.addClass('disabled').attr('disabled','disabled')`：但没有任何效果。

谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T09:39:13.943

试试这个：

```
$(".btn-group button").addClass('disabled').prop('disabled',true); 
```

**小提琴** [http://jsfiddle.net/ejW3w/70/](http://jsfiddle.net/ejW3w/70/)

文档[http://api.jquery.com/prop/](http://api.jquery.com/prop/)

# mysql - ELOQUENT 用 save() 更新数据库；

> ID：15335241
> 
> 赞同：0
> 
> 时间：2013-03-11T09:38:24.573
> 
> 标签：mysql, laravel, eloquent

我在这里做错了什么？

```
public static function updateuserdetails(){

   $user_id_update_user_details = Input::get();
    // find the user to update : 
   $user = User::where( 'user_id' , '=', $user_id_update_user_details['user_id'] )->first() ;

   foreach ( $user_id_update_user_details as $key => $value) {        
       $user->$key = $value ;
   }

 $affected = $user->save();
 return $affected ;
} 
```

它不会将数据保存到数据库中。我必须使用“foreach”循环，因为我不知道需要从所有列中更新什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:01:55.830

在模型中设置可访问数组并改用填充。还有……你的身份证不是叫“身份证”吗？如果是这样，为 user_id 设置一个值可能会导致底层 SQL 失败。

```
class User extends Eloquent {

    public static $accessible = array( 'id', 'name', 'email', ... );

}

Route::post( 'user/save', function ()
{
    $user = User::find( Input::get( 'id' ) );

    if ( empty( $user ) )
        return 'Could not find user';

    $user->fill( Input::get() );

    $user->save();
}); 
```

# perl - 用列中的值替换增加的值并保持格式不变

> ID：15335248
> 
> 赞同：0
> 
> 时间：2013-03-11T09:38:53.430
> 
> 标签：perl

我有一个像这样的文件

```
TER 
ATOM  18351  C12 PA      1      22.484  26.043  12.870  1.00  0.00      MEMB
ATOM  18352  H2R PA      1      21.907  26.993  12.853  1.00  0.00      MEMB
ATOM  18353  H2S PA      1      22.369  25.522  11.895  1.00  0.00      MEMB
ATOM  18401  C13 PA      1      23.999  26.415  12.988  1.00  0.00      MEMB
ATOM  18402  H3R PA      1      24.586  25.473  12.934  1.00  0.00      MEMB
ATOM  18403  H3S PA      1      24.188  26.890  13.975  1.00  0.00      MEMB
ATOM  18404  C14 PA      1      24.389  27.402  11.877  1.00  0.00      MEMB
ATOM  18405  H4R PA      1      25.379  27.803  12.184  1.00  0.00      MEMB
ATOM  18406  H4S PA      1      23.777  28.329  11.879  1.00  0.00      MEMB
ATOM  18407  C15 PA      1      24.484  26.765  10.484  1.00  0.00      MEMB
TER
ATOM  18408  H5R PA      1      23.540  26.275  10.164  1.00  0.00      MEMB
ATOM  18409  H5S PA      1      25.223  25.936  10.474  1.00  0.00      MEMB
ATOM  18410  C16 PA      1      24.922  27.998   9.564  1.00  0.00      MEMB
ATOM  18411  H6R PA      1      25.694  28.592  10.099  1.00  0.00      MEMB
ATOM  18412  H6S PA      1      24.035  28.658   9.457  1.00  0.00      MEMB
ATOM  18413  C17 PA      1      25.447  27.503   8.237  1.00  0.00      MEMB
ATOM  18414  H7R PA      1      25.871  26.479   8.305  1.00  0.00      MEMB
ATOM  18415  H7S PA      1      26.266  28.169   7.891  1.00  0.00      MEMB 
```

我希望在第 5 列中的每个 TER 之后增加 1，以便输出文件看起来像：

```
TER 
ATOM  18351  C12 PA      1      22.484  26.043  12.870  1.00  0.00      MEMB
ATOM  18352  H2R PA      1      21.907  26.993  12.853  1.00  0.00      MEMB
ATOM  18353  H2S PA      1      22.369  25.522  11.895  1.00  0.00      MEMB
ATOM  18401  C13 PA      1      23.999  26.415  12.988  1.00  0.00      MEMB
ATOM  18402  H3R PA      1      24.586  25.473  12.934  1.00  0.00      MEMB
ATOM  18403  H3S PA      1      24.188  26.890  13.975  1.00  0.00      MEMB
ATOM  18404  C14 PA      1      24.389  27.402  11.877  1.00  0.00      MEMB
ATOM  18405  H4R PA      1      25.379  27.803  12.184  1.00  0.00      MEMB
ATOM  18406  H4S PA      1      23.777  28.329  11.879  1.00  0.00      MEMB
ATOM  18407  C15 PA      1      24.484  26.765  10.484  1.00  0.00      MEMB
TER
ATOM  18408  H5R PA      2      23.540  26.275  10.164  1.00  0.00      MEMB
ATOM  18409  H5S PA      2      25.223  25.936  10.474  1.00  0.00      MEMB
ATOM  18410  C16 PA      2      24.922  27.998   9.564  1.00  0.00      MEMB
ATOM  18411  H6R PA      2      25.694  28.592  10.099  1.00  0.00      MEMB
ATOM  18412  H6S PA      2      24.035  28.658   9.457  1.00  0.00      MEMB 
```

文件的格式也不应该改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:53:05.323

perl:

```
perl -lane 'if(/TER/){$count++}unless(/TER/){$F[4]=$count;}print "@F"' your_file 
```

awk：

```
awk '/TER/{count++}{$5=count}1' your_file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:10:54.453

`1`如果第五列是唯一在您的数据中有一个整数的列，那么在不更改格式的情况下这样做是一种肮脏的方法：

```
perl -pe '$c++if/TER/;s/\b1\b/$c/' input_file 
```

# node.js - 使用相同的翡翠视图进行编辑和创建

> ID：15335253
> 
> 赞同：2
> 
> 时间：2013-03-11T09:39:00.650
> 
> 标签：node.js, express, pug

希望这不是太愚蠢的问题，因为我试图了解节点。

我一直在研究 express 框架，并试图解决创建/编辑视图的简单问题。

如果我有如下玉视图：

```
input(name='bar', id='bar', value=#{foo.bar}) 
```

该视图需要我传回的模型上的属性 foo.bar ，这对于编辑屏幕来说很好。但是，如果这是一个创建屏幕，我真的不想传回一个空模型。应该如何处理？这只是我必须传回一个空模型的情况吗？如果是这样，任何指向此模式的指针都会很棒。

谢谢。

（我知道我缺少一些基本的东西）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T10:17:18.437

我自己通过简单地始终确保存在 foo 对象，然后无论如何都引用 foo.bar 来完成此操作。这可以通过很多方式来完成。您可以劫持 res.render 或使用您自己的自定义渲染方法，就像这样（初始化时的某个地方）：

```
express.response.renderFooAdmin = function (view, data, callback) {
    data.foo = data.foo || {};
    this.render(view, data, callback);
}; 
```

在您的路线中：

```
res.renderFooAdmin('view', data); 
```

并直接引用对象而不是通过 #{} 块来不打印“未定义”：

```
input(name='bar', id='bar', value=foo.bar) 
```

# android - 如何在 Android 的 AccountManager 中删除帐户

> ID：15335254
> 
> 赞同：11
> 
> 时间：2013-03-11T09:39:01.490
> 
> 标签：android, accountmanager

我正在尝试删除 AccountManager 中的自定义帐户。

这是我的代码：

```
final Handler handler = new Handler (); 

AccountManagerCallback<Boolean> callback = new AccountManagerCallback<Boolean>()
        {
            @Override
            public void run(AccountManagerFuture<Boolean> arg0)
            {
                String test = "test";
            }
        };

AccountManagerFuture<Boolean> bool = am.removeAccount(account, callback, handler); 
```

我正在使用的权限：

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission>
<uses-permission android:name="android.permission.MANAGE_ACCOUNTS"></uses-permission> 
<uses-permission android:name="android.permission.GET_ACCOUNTS"></uses-permission> 
<uses-permission android:name="android.permission.AUTHENTICATE_ACCOUNTS"></uses-permission>
<uses-permission android:name="android.permission.WRITE_SYNC_SETTINGS"></uses-permission> 
```

该帐户永远不会被删除，并且从未调用过回调，知道吗？日志中没有任何痕迹

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-11T09:42:10.600

试试这个它会工作

```
 // Global Variables 
    public static final String AUTHORITY = "com.example.package";
    public static final String ACCOUNT_TYPE = "com.example.package";
    public static final String ACCOUNT = "my_custom_account_name";

    // Account Manager definition
    AccountManager accountManager = (AccountManager) this.getSystemService(ACCOUNT_SERVICE);

    // loop through all accounts to remove them
    Account[] accounts = accountManager.getAccounts();
    for (int index = 0; index < accounts.length; index++) {
    if (accounts[index].type.intern() == AUTHORITY)
        accountManager.removeAccount(accounts[index], null, null);
    } 
```

需要

```
<uses-permission android:name="android.permission.WRITE_SYNC_SETTINGS" /> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-29T05:16:55.683

您需要从**AbstractAccountAuthenticator覆盖****Authenticator**类中的以下方法。

 **```
public Bundle getAccountRemovalAllowed(AccountAuthenticatorResponse response, Account account) {
    Bundle result = new Bundle();
    boolean allowed = true; // or whatever logic you want here
    result.putBoolean(AccountManager.KEY_BOOLEAN_RESULT, allowed);
    return result;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-03-07T15:08:02.140

有同样的问题

```
if (VERSION.SDK_INT < VERSION_CODES.LOLLIPOP_MR1) {
            accountManager.removeAccount(account, {}, AContext.app.mainHandler)
        } else {
            accountManager.removeAccountExplicitly(account)
        } 
```

对于 API 22 及更高版本，可以完美运行，但在 API 19 上根本无法运行。

终于在我的AbstractAccountAuthenticator实现中发现了问题：

```
override fun getAccountRemovalAllowed(response: AccountAuthenticatorResponse?, account: Account?): Bundle {
    AccountHelper.removeAccount()
    return super.getAccountRemovalAllowed(response, account)
} 
```

删除“AccountHelper.removeAccount()”后它开始工作

我不知道 - 也许会有所帮助

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-12T19:39:39.223

您必须在 removeAccount 方法之前调用以下 2 个方法，系统将允许您在帐户管理器中删除该帐户。clearPassword invalidateAuthToken

根据 removeAccount 方法的描述：

“身份验证器可能有自己的防止帐户删除的策略，在这种情况下，帐户不会被删除。”

玩得开心。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-23T10:51:46.117

这段代码对我来说就像一个魅力。

您将需要 WRITE_SYNC_SETTINGS，还需要添加 android.permission.MANAGE_ACCOUNTS 为我使用相同的代码模式。允许。因此，如果您正确使用 AccountManager 和 Account，您将成功删除该帐户。

我在 Android 模拟器中使用帐户管理器时遇到了一些问题，因此请尝试在真机上进行测试...

```
AccountManager accMgr = AccountManager.get(this);
final Account account = new Account(username, accountType);

removeCaxtonAccount(accMgr, account);

public void removeCaxtonAccount(AccountManager accMgr, Account account){
        accMgr.removeAccount(account, null,null);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-12T11:02:09.363

这是我的解决方案。我发现以前的解决方案没有明确等待帐户删除完成，因此它们随机失败。

```
 final AccountManager accountManager = AccountManager.get(getContext());
    final String accountType = AuthenticatorService.ACCOUNT_TYPE;

    final Account[] availableAccounts = accountManager.getAccountsByType(accountType);
    for (final Account availableAccount : availableAccounts) {
        final AccountManagerFuture<Boolean> booleanAccountManagerFuture = accountManager.removeAccount(availableAccount, null, null);
        assertTrue("Impossible to delete existing account for this application", booleanAccountManagerFuture.getResult(1, TimeUnit.SECONDS));
    } 
```

注意：您仍然需要前面提到的权限。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-04T19:44:44.867

我在 22 之前添加`Authenticator`类帮助的 api 案例。只是从这个来源启发自己[https://www.programcreek.com/java-api-examples/?code=MLNO/airgram/airgram-master/TMessagesProj/src/main/java/ir/hamzad/telegram/ContactsController.java #](https://www.programcreek.com/java-api-examples/?code=MLNO/airgram/airgram-master/TMessagesProj/src/main/java/ir/hamzad/telegram/ContactsController.java#)

对于 api 22+，这无需`Authenticator`： `if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP_MR1) { Timber.e(String.valueOf(accountManager.removeAccountExplicitly(account))); }`**

# reporting-services - Reporting Services - 通过表达式查找当前月份

> ID：15335258
> 
> 赞同：0
> 
> 时间：2013-03-11T09:39:13.447
> 
> 标签：reporting-services, expression

我想要一个默认值，即当前年月。今天我的表情是这样的：

```
[Date Product Confirmed].[Date].[Yearmd].&[2013-03] 
```

我会，或者当然，想让最后一部分动态化：`&[2013-03]`.

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:01:21.503

你可以像这样得到当前的年份和月份

```
=Format(Now(), "yyyy-MM") 
```

基本上我使用的是当前日期`Now()` ，然后我将其格式化为 YYYY-MM

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:48:14.370

你可以试试这个：

```
="[Date Product Confirmed].[Date].[Yearmd].&[" & Cstr(Format(now(),"yyyy-MM")) &"]" 
```

# java - 如何在不运行代码的情况下找出 Intellij Idea 中的静态字符串结果连接？

> ID：15335260
> 
> 赞同：26
> 
> 时间：2013-03-11T09:39:24.723
> 
> 标签：java, string, intellij-idea

代码示例：

```
public class StringHolder{
    public static final String ONE = "ONE";
    public static final String TWO = "TWO";
    public static final String THREE = "THREE";

    public static void main (String[] args){
        String someVariable = ONE + TWO + THREE;
    }
} 
```

如何从静态常量评估字符串值？例如，使用 Intellij Idea，我可以在调试中运行程序，放置断点，在表达式上按“ctrl+alt+f8”并查看表达式值。那么是否可以在没有编译代码和运行程序的情况下使用静态分析器进行评估？关键是从**静态常量**而不是函数参数计算的值，因此分析器只需“转到”常量值，将它们连接起来并在弹出窗口中显示值。

当我有一个块和“刚刚初始化”的变量时的另一种情况：

```
{
    final String a = "a";
    final String b = "b"
    final String c = "c"
    String result = a+b+c;
} 
```

PS你明白我的意思吗？:)

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2015-01-01T06:55:02.147

使用 intellij idea 14 很容易：

1.  只需将光标放在字符串连接上
2.  按`alt`+`enter`
3.  选择“将字符串连接文本复制到剪贴板”
4.  将结果粘贴到某处。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T09:41:47.647

您可以`"ONETWOTHREE"`通过反编译字节码来查看编译时连接的字符串：

```
javap -c StringHolder 
```

并查看第一个作业。

for 的连接`first + second + third`仍将在执行时完成，而不是在编译时完成，因此我希望看到使用`StringBuilder`or的代码`StringBuffer`，并且如果不运行代码，则不会出现该字符串连接的“结果”。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-11T09:44:14.390

```
public static final String ONE = "ONE";
public static final String TWO = "TWO";
public static final String THREE = "THREE"; 
```

是**编译时常**量，将在编译期间内联。

所以可以在`.class`反编译生成的文件中看到结果。另一个`result`直到运行时才可见。

因为你会在反编译的代码中`someVariable`看到类似的东西。`someVariable = "ONETWOTHREE";`编译器这样做是为了优化，所以是可见的。

# search - 使用 mapreduce 在 NoSQL 中进行文本搜索

> ID：15335266
> 
> 赞同：3
> 
> 时间：2013-03-11T09:39:43.507
> 
> 标签：search, nosql, mapreduce, information-retrieval, trie

我正在开发一个需要搜索大量标题列表的应用程序。理想情况下，我想使用 NoSQL，但似乎整个数据库的文本搜索不如 SQL 数据库好（如果我错了，请纠正我）

无论如何，我确实想优化搜索速度。普通搜索可能足够快，但我确实想要响应式实时搜索和模糊搜索。因此我只能想到两种方法：

1.  在内存中加载整个标题列表并索引为 trie 或前缀树

2.  使用 mapreduce 函数实现某种类型的 trie 算法。这将是首选的解决方案，但我不确定它是否可以完成，或者磁盘空间成本可能超过好处。

有任何想法吗？此外，我不确定“模糊搜索”是否最好用 trie 或 B+ 树实现。

由于“标题”是独一无二的。我应该只使用完整的标题作为 ID 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:27:32.673

为了有效地做到这一点，您必须按单词索引您的文本。

换句话说，`foo`授权的对象`MapReduce: Simplified Data Processing on Large Clusters`将被映射到以下键：

*   `MapReduce: Simplified Data Processing on Large Clusters`,
*   `Simplified Data Processing on Large Clusters`,
*   `Data Processing on Large Clusters`,
*   `Processing on Large Clusters`,
*   `on Large Clusters`,
*   `Large Clusters`,
*   `Clusters`.

如果文本太长，您可以将键截断为给定数量的字符（例如`24`）。

这是 CouchDB 的代码示例：

```
function map(o) {
  const SIZE = 24;
  function format(text, begin) {
    return text.substr(begin, SIZE).toLowerCase();
  }
  const WORD_MATCHER = /\S+/g;
  while ((match = WORD_MATCHER.exec(o.title))) {
      var begin = match.index;
      emit(format(o.title, begin), {position: begin});
  }
} 
```

然后，如果您要求 和 之间的键`data process`，`data processZ`您将得到：

```
{"key": "data processing on large clusters", "id": "foo", "value":{"position": 22}} 
```

# php - Smarty 升级不仅适用于远程服务器

> ID：15335270
> 
> 赞同：0
> 
> 时间：2013-03-11T09:39:55.553
> 
> 标签：php, smarty

我已将 smarty 升级到 v3。我对此有一个奇怪的事情。它抛出 SmartyCompilerExceptions 什么是正常的，因为我有 v2 格式的代码。

我的 tpl 上有这个：`{foreach key=k item=i from=$err}...{/foreach}`这在 Smarty 3 中不起作用。我会改变这个，但我的问题是：

Smarty 只在我的生产服务器中抛出这些错误。
`Fatal error: Uncaught exception 'SmartyCompilerException' with message 'Syntax Error in template "/www/site/tpl/system.tpl" on line 272 "{foreach key=key item=item from=$content}" - Unexpected "$", expected one of: "identifier"'`
在我的家庭服务器上一切正常。我在两个系统上都有相同的 apache、php 和 Smarty。

怎么会这样？为什么使用 Smarty 3 在我的测试系统中运行旧代码而不会引发错误？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:26:12.823

原因是我的生产服务器抛出错误而我的测试服务器没有抛出错误，因为在我的生产服务器上`mbstring.func_overload`设置为 7，而在我的测试服务器上设置为 0。

希望它对某人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:56:04.757

尝试将您的呼叫更改为：

```
{foreach key="key" item="item" from=$content} 
```

也就是说，将您的字符串括在双引号中。Smarty 3 在引用事物时更加严格

# jms - WSO2 消息代理主题发布者

> ID：15335274
> 
> 赞同：0
> 
> 时间：2013-03-11T09:40:02.573
> 
> 标签：jms, wso2, publish, esb, messagebroker

我正在开发 WSO2 MB 2.0.0。

我的要求是编写一个 JAVA 代码来将消息发布到特定主题。我在 Message Broker 中创建了一个主题。现在我想创建一个与该主题的连接并发布/发布关于该主题的消息。

[我在http://docs.wso2.org/wiki/display/MB200/Queue+sender+and+queue+receiver](http://docs.wso2.org/wiki/display/MB200/Queue+sender+and+queue+receiver)上的文章中使用 JMS 对队列做了同样的事情

请在这方面帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:51:34.520

这是您问题的链接：[http](http://wso2.org/library/articles/2013/03/configuring-wso2-esb-wso2-message-broker) ://wso2.org/library/articles/2013/03/configuring-wso2-esb-wso2-message-broker 。享受

# gnuplot - GNUPLOT 可以动态准备索引标签吗？

> ID：15335277
> 
> 赞同：0
> 
> 时间：2013-03-11T09:40:10.913
> 
> 标签：gnuplot

我在 GNUPLOT 中绘制了一个多图，为了节省空间，我只在其中一个图上绘制轴标签。对于其他图，我使用

```
set ytics ("" -20, "" -15, "" -10, "" -5, "" 0, "" 5, "" 10, "" 15, "" 20) 
```

对于像这样的小规模，它可以手动完成。我可以使用 gnuplot 内置（for-loop）来动态编写这个“范围”吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:40:14.137

是的，你可以，用类似的东西

```
numtics = 8

set macros

ticstring = '('

do for [i=0:numtics] {
    ticstring = ticstring.'"" '.(-20 + i*5).', '
}

ticstring = ticstring.'"" 20)'

set ytics @ticstring 
```

在您的情况下可能更简单的是命令

```
set ytics format "" 5 
```

这将每 5 个带有空白标签的抽动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T19:25:21.723

我认为做这样的事情要容易**得多：**

```
set multiplot layout 1,2

set xtics format ""   #no x-tic labels on the top plot
plot sin(x)           #top plot

set xtics format "%g" #x-tic labels on the bottom plot
plot cos(x)           #bottom plot

unset multiplot 
```

# django - 即使使用授权类，美味派也会返回 401 未授权

> ID：15335281
> 
> 赞同：1
> 
> 时间：2013-03-11T09:40:14.210
> 
> 标签：django, tastypie

我想做的是设置一个简单的自定义`Resource`，如下所示：

```
MailResource(Resource):
    to = fields.CharField(attribute='To')
    subject = fields.CharField(attribute='Subject')
    message = fields.CharField(attribute='Message')

    class Meta:
        resource_name = 'mail'
        allowed_methods = ['post']
        authorization = Authorization()

        def detail_uri_kwargs(self, bundle_or_obj):
            kwargs = {}
            if isinstance(bundle_or_obj, Bundle):
                kwargs['pk'] = bundle_or_obj.obj.uuid
            else:
                kwargs['pk'] = bundle_or_obj.uuid
            return kwargs

        def obj_create(self, bundle, request=None, **kwargs):
            print bundle.obj
            print request
            print kwargs
            # Create the object
            return bundle 
```

但是当我使用 curl 发出测试帖子请求时，我总是收到 401 UNAUTHORIZED 错误。为什么这样 ？类不是`Authorization()`要为`is_authorized`方法返回true。[文档](http://django-tastypie.readthedocs.org/en/latest/authorization.html)说`Authorization()`是：

> no-op 授权选项，不执行权限检查。

那为什么它失败了？

### 更新：

我还尝试了一个自定义授权类，无论如何它总是`True`在方法中返回，但它仍然会引发 401 UNAUTHORIZED 错误。`is_authorized`任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:26:25.553

我一直面临着同样的问题。看起来 SessionAuthentication 不应该与 HTTP POST 一起使用。

已经解释了更多here

[SessionAuthentication 在 Tastypie 中是否适用于 HTTP POST？](https://stackoverflow.com/questions/15388694/does-sessionauthentication-work-in-tastypie-for-http-post/15390938#15390938)

# android - 如何淡出和在两个图像之间？

> ID：15335282
> 
> 赞同：5
> 
> 时间：2013-03-11T09:40:14.737
> 
> 标签：android, fadein, transition, splash-screen, fadeout

好的，这里有一点帮助，所以我的初始屏幕中加载了两个图像。第一个图像打开（启动启动屏幕）然后第二个图像打开，一旦第二个图像关闭，主活动就会开始。现在我的问题是如何让我的第一张图像淡出，然后用我的第二张图像淡入？

-哦，是的，没有交叉淡入淡出-只是完全淡出和过渡-提前致谢

-splash.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_gravity="center"
android:id="@+id/lin_lay"
android:gravity="center" >

<ImageView
android:contentDescription="@string/desc"
android:orientation="horizontal"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:id="@+id/spinning_wheel_image"
android:background="@drawable/splashscreen1" />
</LinearLayout> 
```

mainanim.xml

```
<animation-list xmlns:android="http://schemas.android.com/apk/res/android" android:oneshot="false">
<item android:drawable="@drawable/splashscreen1" android:duration="2500" />
<item android:drawable="@drawable/splashscreen2" android:duration="4000" />
</animation-list> 
```

Splash.java

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);
    ourSong = MediaPlayer.create(Splash.this, R.raw.splashsound);
    ourSong.start();
    Thread timer = new Thread(){
        public void run(){
            try{
                sleep(10500);
            } catch (InterruptedException e){
                e.printStackTrace();
            }finally{
                Intent openStartingPoint = new Intent("com.theapplication.app.STARTINGPOINT");
                startActivity(openStartingPoint);

            }
        }
    };
    timer.start();
}

@Override
public void setRequestedOrientation(int requestedOrientation) {
    // TODO Auto-generated method stub
    super.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

}

@Override
public void onWindowFocusChanged(boolean hasFocus) {
    // TODO Auto-generated method stub
    super.onWindowFocusChanged(hasFocus);
    ImageView mainimage = (ImageView)findViewById(R.id.spinning_wheel_image);
    mainimage.setBackgroundResource(R.anim.mainamin);
    mainanimation = (AnimationDrawable) mainimage.getBackground();
    mainanimation.start(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-11T09:42:57.280

使用`ImageSwitcher`而不是`ImageView`由它自己支持动画。看到这个样本：

[http://www.java2s.com/Code/Android/UI/UsingImageSwitcher.htm](http://www.java2s.com/Code/Android/UI/UsingImageSwitcher.htm)

你可以像这样添加动画：

```
imageSwitcher.setInAnimation(fadeInAnimation);
imageSwitcher.setOutAnimation(fadeOutAnimation); 
```

// 我的测试：

```
 public class IntroActivity extends Activity implements ViewFactory {

        private static final String TAG = "IntroActivity";

        private final int[] images = { R.drawable.img3, R.drawable.img2,
            R.drawable.img1, R.drawable.img4, R.drawable.img5, R.drawable.img6,
            R.drawable.img7, R.drawable.img8 };
    private int index = 0;
    private final int interval = 10000;
    private boolean isRunning = true;

    @Override
    public void onCreate(Bundle bundle) {
        super.onCreate(bundle);
        setContentView(R.layout.activity_intro);

        startAnimatedBackground();  

    }

    private void startAnimatedBackground() {
        Animation aniIn = AnimationUtils.loadAnimation(this,
                android.R.anim.fade_in);
        aniIn.setDuration(3000);
        Animation aniOut = AnimationUtils.loadAnimation(this,
                android.R.anim.fade_out);
        aniOut.setDuration(3000);

        final ImageSwitcher imageSwitcher = (ImageSwitcher) findViewById(R.id.imageSwitcher1);
        imageSwitcher.setInAnimation(aniIn);
        imageSwitcher.setOutAnimation(aniOut);
        imageSwitcher.setFactory(this);
        imageSwitcher.setImageResource(images[index]);

        final Handler handler = new Handler();
        Runnable runnable = new Runnable() {

            @Override
            public void run() {
                if (isRunning) {
                    index++;
                    index = index % images.length;
                    Log.d("Intro Screen", "Change Image " + index);
                    imageSwitcher.setImageResource(images[index]);
                    handler.postDelayed(this, interval);
                }
            }
        };
        handler.postDelayed(runnable, interval);

    }

    @Override
    public View makeView() {
        ImageView imageView = new ImageView(this);
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setLayoutParams(new ImageSwitcher.LayoutParams(
                LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
        return imageView;
    }

    @Override
    public void finish() {
        isRunning = false;
        super.finish();
    }
} 
```

开始下一个活动，在 `@Override public void run() { if (isRunning) {`

只需检查索引，如果索引等于 1，则开始下一个活动并完成当前活动；

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-01-19T22:27:04.173

您可以简单地淡出图像，更改它，然后最后再次淡入。

```
imageView.animate()
       .alpha(0f)
       .setDuration(100)
       .setListener(new Animator.AnimatorListener() {
           @Override
           public void onAnimationStart(Animator animator) { }
           @Override
           public void onAnimationEnd(Animator animator) {
               imageView.setImageResource(R.drawable.newimg);
               imageView.animate().alpha(1).setDuration(200);
           }
           @Override
           public void onAnimationCancel(Animator animator) { }
           @Override
           public void onAnimationRepeat(Animator animator) { }
       }); 
```

# c++ - Windows 窗体 - 图片框。如何删除图像

> ID：15335285
> 
> 赞同：1
> 
> 时间：2013-03-11T09:40:16.933
> 
> 标签：c++, winforms, memory, c++-cli

我正在一个有组合框和图片框的应用程序中工作。用户选择一个路径，组合框会加载 2000 张图像的路径，并显示第一个。当用户更改组合框的索引时，显示的图像会发生变化，但我不知道如何删除图片框中的图像。

如果我只是覆盖图像，它就无法完成这项工作，因为当我反复这样做时，程序会因为内存而崩溃。如何删除图片框内的图像？

**编辑：** 我做了一些更改，似乎无法再次重现该错误..所以也许是别的东西。但只是为了检查，这段代码是否泄漏内存？

提示： config 是一个单例，其中包含一些信息，在这种情况下，图像在哪里。

```
private: System::Void comboBox_image1_SelectedIndexChanged(System::Object^  sender, System::EventArgs^  e) {
         System::String^ aux;
         DIC_config* config=DIC_config::Instance();
         if(config->images_path!=NULL){
             aux=gcnew System::String(config->images_path);
             aux=aux+"\\CAM_0\\Snap_0_0"+(this->comboBox_image1->SelectedIndex+1)+".bmp";
             System::IO::FileStream^ image_file=gcnew System::IO::FileStream(aux,System::IO::FileMode::Open,System::IO::FileAccess::Read);
             System::Drawing::Bitmap^ img = gcnew System::Drawing::Bitmap(image_file);
             this->pictureBox_image1->Image=img;
             //img->~Bitmap(); this doesnt work, deletes the image of picturebox and makes the program chrash
        }

     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:05:17.320

您必须处理*旧*图像。当垃圾收集器没有足够频繁地运行时，忘记这样做可能会使您的程序耗尽非托管内存。位图对象非常小，您可以在不触发 GC 的情况下分配数千个，但会为像素数据消耗大量非托管内存。您在 C++/CLI 中使用**delete**运算符处理对象，它调用 IDisposable::Dispose()。

请注意，您使用的 FileStream 也是一次性对象。这样做需要您在使用位图时保持流打开并在之后关闭它。您正确地没有处理流但忘记关闭它。很难做到正确，使用接受文件路径字符串的 Bitmap 构造函数要容易得多，因此 Bitmap 类自己管理底层流。使固定：

```
 aux = config->images_path;
  aux += ....;
  System::Drawing::Bitmap^ img = gcnew System::Drawing::Bitmap(aux);
  delete this->pictureBox_image1->Image;
  this->pictureBox_image1->Image = img; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T11:06:20.653

这不起作用，因为您试图调用类的析构函数，而不是实例。此外，您不需要`System::Drawing::Bitmap`在垃圾收集器的控制下调用它，因此如果不再引用终结器（ !Bitmap() ）将被自动调用。

如果你想在图片框中关闭它，你可以做什么是

```
delete this->pictureBox_image1->Image;
image_file->Close(); //after closing/deleting the open bitmap 
```

顺便提一句。你的代码不是纯c++，而是c++/cli，所以我添加了标签

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-10T13:26:04.547

首先设置一个指向Image属性的空指针并刷新pictureBox，如下所示，

```
pictureBox_image1->Image = nullptr;
pictureBox_image1->Refresh(); 
```

# c# - 在其属性之一中获取具有最大日期时间值的对象

> ID：15335286
> 
> 赞同：11
> 
> 时间：2013-03-11T09:40:18.247
> 
> 标签：c#, linq

当我想从 中检索属性中具有最高值的对象时`DateTime`，`IEnumerable`可以执行以下操作：

```
var maxDate = myEnumerable.Max(x => x.TheDateTimeProperty);
var wantedObject = myEnumerable.FirstOrDefault(x => x.TheDateTimeProperty == maxDate); 
```

如果没有获得第一个，这可能`maxDate`吗？例如像这样：

```
var wantedObject = myEnumerable.GetByMaxDate(x => x.TheDateTimeProperty); 
```

我知道我可以写一个扩展方法`GetByMaxDate`，但我想知道是否已经有 linq 提供的方法。

**只是为了澄清：**不寻找其他可能性来写这个。我只是对是否存在一种方法感兴趣。（更少的代码，由该方法管理的最佳性能）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-11T09:41:35.470

优点：它应该与“任何”linq 提供程序（对象、实体、sql）一起使用

```
myEnumerable.OrderByDescending(x => x.TheDateTimeProperty).First(); 
```

缺点：正如 Matthew Watson 在评论中指出的那样，它不会在（非常）大的列表上表现出色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T09:49:07.540

我更喜欢像您最初所说的那样首先获得 maxDate 。使用您已经使用的语法我没有发现任何问题。

但是，如果需要，您可以像这样简写代码：

```
var wantedObject = myEnumerable.FirstOrDefault(x => x.TheDateTimeProperty == myEnumerable.Max(x => x.TheDateTimeProperty)); 
```

（此代码未经测试，可能需要一些类型转换）

或者您可以编写一个存储过程并从中获取数据。

但是我不再喜欢 OrderByDescending.First 了。如果在物理上您的表中的数据按您指定的属性升序排序，那很好。但如果没有，那么您的 sql 表将需要进行降序排序，并且可能会从中获得高负载。特别是当表有超过1m的记录并且DateTime以升序存储在物理中时。

使用 max 可以产生比它更好（更快/更轻量）的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:10:30.193

由于没有其他答案，并且linq**中不**存在**内置**方法，我将写下我将使用的内容。

**对于对象的 linq：**

Habib 在评论中提到的`MaxBy`来自[morelinq](https://code.google.com/p/morelinq/ "更多链接")的方法。

**对于 linq 到 sql：**

我会写一个扩展方法：

```
public static TSource SqlMaxBy<TSource, TKey>(this IEnumerable<TSource> source, Func<TSource, TKey> selector)
{   
  var maxValue = source.Max(selector);
  return source.FirstOrDefault(value => selector(value).Equals(maxValue));
} 
```

# ruby - 从 ruby 中的 response.body 获取价值

> ID：15335293
> 
> 赞同：2
> 
> 时间：2013-03-11T09:40:45.320
> 
> 标签：ruby, json, http

我来自 HTTP 的 response.body`get`如下所示：

```
{"Code":1,"Message":"Successfully retrieved subscriberId","Result":22687813} 
```

如何将“Result”的值声明为变量？

**已解决** 这是我缺乏 Ruby 技能和 JSON 经验的结果，通过在 puts response.body["Message"] 之前执行“JSON.parse response.body”来解决。

# propel - 使用相关查询时“在非对象上调用成员函数 mergeWith()”

> ID：15335301
> 
> 赞同：2
> 
> 时间：2013-03-11T09:41:05.383
> 
> 标签：propel

我在使用 Propel 1.6 和 MySQL 数据库时遇到了这种情况：

```
$query->usePublicationQuery("pq");
$query->condition('c1', '(YEAR(`pq.PUBLISHED_DATE`)) = ?', "2013")
        ->condition('c2', '(MONTH(`pq.PUBLISHED_DATE`)) = ?', "03")
        ->condition('c3', '(DAY(`pq.PUBLISHED_DATE`)) = ?', "01")
        ->combine(array('c1', 'c2','c3'), 'and', 'c123');
$query->endUse(); 
```

调用 endUse() 方法时会出现 mergeWith() 错误。当 Propel 尝试在 ModelCriteria.php 中合并这样的查询时会抛出它：

```
$primaryCriteria->mergeWith($this); // (line 941) 
```

$primaryCriteria 似乎为空。谁能告诉我，何时以及为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-17T19:38:05.017

需要注意的是，Propel 的 useQuery() 和 endUse() 方法返回新查询而不是更改当前查询。因此，要么使用方法链接重写整个查询：

```
$query
    ->usePublicationQuery("pq")
        ->condition('c1', '(YEAR(`pq.PUBLISHED_DATE`)) = ?', "2013")
        ->condition('c2', '(MONTH(`pq.PUBLISHED_DATE`)) = ?', "03")
        ->condition('c3', '(DAY(`pq.PUBLISHED_DATE`)) = ?', "01")
        ->combine(array('c1', 'c2','c3'), 'and', 'c123')
    ->endUse(); 
```

...或类似的东西：

```
$query2 = $query->usePublicationQuery("pq");

$query2->condition('c1', '(YEAR(`pq.PUBLISHED_DATE`)) = ?', "2013")
        ->condition('c2', '(MONTH(`pq.PUBLISHED_DATE`)) = ?', "03")
        ->condition('c3', '(DAY(`pq.PUBLISHED_DATE`)) = ?', "01")
        ->combine(array('c1', 'c2','c3'), 'and', 'c123');

$query = $query2->endUse(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:01:47.647

你如何实例化 $query 变量？你确定你不想这样做：

```
 $query = PublicationQuery::create() 
```

如果没有更多信息，解决此问题将非常困难，请提供更多代码。

# windows - DB2：如何在 Windows 下为 db2clp 设置编码？

> ID：15335303
> 
> 赞同：3
> 
> 时间：2013-03-11T09:41:12.917
> 
> 标签：windows, encoding, db2

我有一个使用设置为 UTF-8 的编码创建的 DB2

```
db2 create database mydb using codeset UTF-8 
```

我的数据插入脚本也以 UTF-8 编码存储。现在的问题是命令行处理器似乎使用不同的编码，因为 Windows 安装不使用 UTF-8：

```
C:\Users\Administrator>chcp
Active code page: 850 
```

这导致我的数据（包含特殊字符）未正确存储到数据库中的问题。

在 Linux/AIX 下，我可以通过设置更改命令行编码

```
export LC_ALL=en_US.UTF-8 
```

我如何在 Windows 下实现这一点？我已经试过了

```
chcp 65001 
```

**更新**：但这不会有任何影响？似乎 db2clp 无法处理 UTF-8 编码文件，因为它会打印出垃圾：

```
D:\Program Files\ibm_db2\SQLLIB\BIN>chcp 65001
Active code page: 65001

D:\Program Files\ibm_db2\SQLLIB\BIN>type d:\tmp\encoding.sql
INSERT INTO MY_TABLE (ID, TXT) VALUES (99, 'äöü');

D:\Program Files\ibm_db2\SQLLIB\BIN>db2 connect to mydb

Datenbankverbindungsinformationen

Datenbank-Server                                                = DB2/NT64 9.5.0
SQL-Berechtigungs-ID                                            = MYUSER
Aliasname der lokalen Datenbank                                 = MYDB

D:\Program Files\ibm_db2\SQLLIB\BIN>db2 -tvf d:\tmp\encoding.sql
INSERT INTO MY_TABLE (ID, TXT) VALUES (99, 'Ã¤Ã¶Ã¼')
DB20000I  Der Befehl SQL wurde erfolgreich ausgeführt. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-19T11:25:01.850

您需要同时设置：

```
CHCP 65001
SET DB2CODEPAGE=1208 
```

在`db2cmd`命令行上，在运行之前`db2 -tvf`。这适用于已`CODESET`设置为`UTF-8`. 要检查`CODESET`数据库运行的设置：

```
db2 get db cfg for <your database> 
```

`1208`并分别查找它们应该是的“数据库代码页”和“数据库代码集” `UTF-8`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:50:21.640

在处理编码时，您必须仔细查看您的环境以及您当前所在的位置。所以在你的情况下：

*   服务器以编码 A 存储其数据（如 UTF-8）
*   客户端位于具有编码 B 的环境中（如 windows-1252）

在您的客户端中，您必须使用客户端的编码（或告诉客户端您有意**在客户端**使用另一种编码（例如 windows-1251 环境中的 UTF-8 编码文件）！）。客户端和服务器之间的连接正在为您将编码 B 更改为编码 A 以将数据存储到数据库中。

# android - 如何在 Youtube 中开发具有不同视频质量的 Android 视频流应用程序（更改质量）

> ID：15335310
> 
> 赞同：-2
> 
> 时间：2013-03-11T09:41:47.327
> 
> 标签：android, video, streaming

我想开发一个带有视频播放器的 android 应用程序，它可以呈现相同视频的不同质量，就像在 youtube 更改质量功能中一样。

对此，我很想知道源是否应该包含所有提供动态渲染它们的质量选项的视频。

真诚感谢任何帮助。

我从 URL dtream 视频的代码。

公共类 VideoViewDemo 扩展 Activity { private static final String TAG = "VideoViewDemo";

```
private VideoView mVideoView;
private EditText mPath;
private ImageButton mPlay;
private ImageButton mPause;
private ImageButton mReset;
private ImageButton mStop;
private String current;

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.main);
    mVideoView = (VideoView) findViewById(R.id.surface_view);

    mPath = (EditText) findViewById(R.id.path);
    mPath.setText("http://daily3gp.com/vids/747.3gp");

    mPlay = (ImageButton) findViewById(R.id.play);
    mPause = (ImageButton) findViewById(R.id.pause);
    mReset = (ImageButton) findViewById(R.id.reset);
    mStop = (ImageButton) findViewById(R.id.stop);

    mPlay.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
            playVideo();
        }
    });
    mPause.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
            if (mVideoView != null) {
                mVideoView.pause();
            }
        }
    });
    mReset.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
            if (mVideoView != null) {
                mVideoView.seekTo(0);
            }
        }
    });
    mStop.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
            if (mVideoView != null) {
                current = null;
                mVideoView.stopPlayback();
            }
        }
    });
    runOnUiThread(new Runnable(){
        public void run() {
            playVideo();

        }

    });
}

private void playVideo() {
    try {
        final String path = mPath.getText().toString();
        Log.v(TAG, "path: " + path);
        if (path == null || path.length() == 0) {
            Toast.makeText(VideoViewDemo.this, "File URL/path is empty",
                    Toast.LENGTH_LONG).show();

        } else {
            // If the path has not changed, just start the media player
            if (path.equals(current) && mVideoView != null) {
                mVideoView.start();
                mVideoView.requestFocus();
                return;
            }
            current = path;
            mVideoView.setVideoPath(getDataSource(path));
            mVideoView.start();
            mVideoView.requestFocus();

        }
    } catch (Exception e) {
        Log.e(TAG, "error: " + e.getMessage(), e);
        if (mVideoView != null) {
            mVideoView.stopPlayback();
        }
    }
}

private String getDataSource(String path) throws IOException {
    if (!URLUtil.isNetworkUrl(path)) {
        return path;
    } else {
        URL url = new URL(path);
        URLConnection cn = url.openConnection();
        cn.connect();
        InputStream stream = cn.getInputStream();
        if (stream == null)
            throw new RuntimeException("stream is null");
        File temp = File.createTempFile("mediaplayertmp", "dat");
        temp.deleteOnExit();
        String tempPath = temp.getAbsolutePath();
        FileOutputStream out = new FileOutputStream(temp);
        byte buf[] = new byte[128];
        do {
            int numread = stream.read(buf);
            if (numread <= 0)
                break;
            out.write(buf, 0, numread);
        } while (true);
        try {
            stream.close();
        } catch (IOException ex) {
            Log.e(TAG, "error: " + ex.getMessage(), ex);
        }
        return tempPath;
    }
} 
```

}

谢谢，阿杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:24:42.240

嗨，通过以下方法解决了 setOnClickListener 事件获取 videow 视图的当前位置并将视频源更改为 HD，并在当前位置使用 SeekTo 方法，然后启动 HD 视频，以便 HD 视频可以从上一个 SD 视频的当前位置开始。

# javascript - 在浏览器中显示 3d 内容的最标准方式是什么？

> ID：15335316
> 
> 赞同：1
> 
> 时间：2013-03-11T09:41:51.117
> 
> 标签：javascript, web, web-standards

我想替换一个显示三维点矩阵（最多 200.000）的 Flash 小程序。我希望通过使用标准网络技术，在大多数网络浏览器（包括移动浏览器）中显示内容。我知道 Flash 非常流行并且几乎是多平台的，但它不是一个标准。这可以通过标准的网络技术实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:48:30.160

使用 Web 标准，您有两种可能性：WebGL 和 CSS 3D 转换

WebGL的[浏览器支持](http://caniuse.com/#search=webgl)不是很好。但是使用[3D 变换](http://caniuse.com/#search=3d%20transforms)，您也会错过一些浏览器。

如果不了解太多，很难判断哪种技术更适合您的需求，我认为 WebGL 更适合您。

无论哪种方式，您可能都必须将 Flash 版本作为不支持 WebGL/3D 转换的浏览器的备用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-04T03:29:06.640

到目前为止，我发现的最佳标准是[X3D](http://www.web3d.org/x3d/what-x3d)。该标准没有很好的浏览器支持，但[X3DOM](http://www.x3dom.org)是 X3D 的 javascript 实现（它使用其他浏览器技术来实现 X3D）。[您可以在此处](http://www.x3dom.org/contact/)找到 X3DOM 的浏览器支持信息。

对于您的点阵，X3D [PointSet](http://doc.x3dom.org/author/Rendering/PointSet.html)节点似乎可以执行您想要的操作。

# magento - 在 Magento 中安装 SSL 证书？

> ID：15335317
> 
> 赞同：1
> 
> 时间：2013-03-11T09:41:52.747
> 
> 标签：magento, web, ssl-certificate

我必须为我的 Magento 商店安装 SSL 证书，但我有一个问题：将 SSL 证书安装在子目录还是主域中更好？（例如：store.domain.com 或 domain.com）

我怀疑在主域 (domain.com) 上安装是否会损害谷歌的 SEO 排名，因为该网站现在会以 https 响应？

还是 Magento 会处理这个问题并仅在必要时加载 https 页面，例如在购物车页面中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:06:50.377

Magento*只能*对某些页面使用 https（它们是结帐、客户帐户和管理面板），但这取决于配置。请参阅 Web→Secure→Base URL 配置选项。您可能希望将基本 URL 设置为[http://www.foo.com/](http://www.foo.com/)并将基本安全 URL 设置为[https://www.foo.com/](https://www.foo.com/)

# c++ - 另一个 boost::variant 的 boost::variant 成员子集

> ID：15335320
> 
> 赞同：0
> 
> 时间：2013-03-11T09:41:58.137
> 
> 标签：c++, boost, c++98

我正在使用一个相当笨拙的 c 接口来存储集合。该类`LowLevelStorer`代表我为此接口编写的包装器。该类`Storer`是与自身相关的高级类`Data`。它会缓存数据并将数据捆绑成更复杂的数据类型，只有`LowLevelStorer`. 我的其余代码仅使用`Data`并且不了解`LowLevelData`.

在下面的示例代码中，我希望变体中的成员`Data`包含在`LowLevelData`变体中。有没有办法指定我是如何做到的？

我真的不明白为什么下面的代码可以编译，以及为什么它实际上可以正常工作。也就是说，`void operator()(const SimplePath&, const Data& data) const`需要一个 Data 引用，但似乎在调用时正确地将其转换为 LowLevelData 对象`void operator()(const LowLevelData& data) const`。怎么会这样？

关于我的数据对象，这里是否有很多副本发生在幕后？

```
#include "boost/variant.hpp"
#include "boost/variant/apply_visitor.hpp"
#include <vector>

class Complex{};
typedef boost::variant< std::vector<Complex>, std::vector<int>, std::vector<std::string> > LowLevelData;

class LowLevelStorer
{
public:
    LowLevelStorer(): _storeVisitor(StoreVisitor()){}

    void operator()(const LowLevelData& data) const 
    {
        boost::apply_visitor(_storeVisitor, data);
    }

private:
    class StoreVisitor: public boost::static_visitor<>
    {
    public:
        void operator()(const std::vector<Complex>&) const {}

        void operator()(const std::vector<int>& i) const {}

        void operator()(const std::vector<std::string>&) const {}
    };

    StoreVisitor _storeVisitor;
};

struct SimplePath{};
struct BundlePath{};
typedef boost::variant< SimplePath, BundlePath > Path;

typedef boost::variant< std::vector<std::string>, std::vector<int> > Data;

class Storer
{
public:
    Storer(const LowLevelStorer& lowLevelStorer): _converter(Converter(lowLevelStorer)){}

    void operator()(const Path& path, const Data& data) const 
    {
        boost::apply_visitor(_converter, path, data);
    }

private:
    class Converter: public boost::static_visitor<>
    {
    public:
        Converter(const LowLevelStorer& lowLevelStorer): _lowLevelStorer(lowLevelStorer){}

        void operator()(const SimplePath&, const Data& data) const {
            _lowLevelStorer(data);
        }

        void operator()(const BundlePath&, const Data& data) const {
            _lowLevelStorer(std::vector<Complex>());
        }
    private:
        const LowLevelStorer _lowLevelStorer;
    };

    const Converter _converter;
};

int main()
{
    Storer storer((LowLevelStorer()));
    std::vector<int> v;
    v.push_back(13);
    storer(Path(SimplePath()),v);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:52:22.390

当您将参数提供为另一个变量时，我怀疑它采用一个变量的原因是因为您的两个变量都具有共同的所有类型，这使得您的变量可以相互转换。

我认为只使用所有三种类型的一种变体并完全跳过另一种是完全可以的，因为第二种只是第一种类型的子集。

# c#-4.0 - 如何使用 Javascript 获取 Radiobutton Listitem 的值

> ID：15335322
> 
> 赞同：0
> 
> 时间：2013-03-11T09:42:01.917
> 
> 标签：c#-4.0, radiobuttonlist

我想使用javascript获取单选按钮列表的选定项的值。我的代码是：

```
 <asp:RadioButtonList runat="server" ID="Radio" RepeatColumns="3" CssClass="textfont">
                            <asp:ListItem Value="1" Selected="True">First</asp:ListItem>
                            <asp:ListItem Value="2">Second</asp:ListItem>
                            <asp:ListItem Value="3">Third</asp:ListItem>
                        </asp:RadioButtonList> 
```

这是我的 Javascript 代码：

```
<script type="text/javascript">
    function sendParameters() { 
        var Id = '<%=HiddenField1.Value%>';
        var ddl1 = document.getElementById("Radio").checked; 
</script> 
```

如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:23:56.420

首先，请查看生成的网页的源代码并发布生成的单选按钮 html。这将使回答更容易，因为问题归结为纯 HTML 和 jQuery。

原因是 asp 经常更改 ID 的名称，除非您将 ClientIDMode="Static" 添加到您的控件中。

完成后，应该这样做：

* * *

```
var chosenValue = $('input:radio[id="Radio"]:checked').val();

alert(chosenValue); 
```

# php - 进行嵌套 mysqli 调用时出现 bind_param() 错误

> ID：15335325
> 
> 赞同：0
> 
> 时间：2013-03-11T09:42:13.750
> 
> 标签：php, mysqli

尝试绑定参数时出现错误：“在......中的非对象上调用成员函数 bind_param()”这些查询在单独的脚本上运行良好，但是当我想嵌套运行它们时，我不断得到同样的错误。我已经尝试了很多来找出如何解决它，但无法解决。

```
$mysqli = new mysqli('localhost', 'user', 'pass', 'db');
$ignore_time=time()-(24*60*60);
$stmt=$mysqli->prepare("select id,new_count from view_gallery where lastUpdate< ? and new_count >0");
$stmt->bind_param('i',$ignore_time);
$stmt->execute();
$stmt->bind_result($id, $count);
while($stmt->fetch())
{
    $stmt_new=$mysqli->prepare("update gallery set power=power + ? where id= ?");
    $power=$count* 0.01;
    $stmt_new->bind_param('di',$power,$id);
    $stmt_new -> execute();
} 
```

错误在循环内的 bind_param 行中引发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:58:10.563

该错误是因为您的`prepare()`调用未返回有效对象。这是因为您的 SQL 查询是错误的。

在您的查询中，您有`power`which 是 MySQL 中的[保留函数关键字](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_power)。

在查询中使用反引号将其转义，您的代码将起作用。

```
$stmt_new = $mysqli->prepare( "UPDATE gallery SET `power` = `power` + ? WHERE `id` = ?" ); 
```

使用反引号始终是一个好习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:14:48.460

解决方案是保存外循环的结果：

```
$stmt->store_result(); 
```

就在while循环的正上方。

# configuration - 使用 '.xml' 文件连接 Oracle 11g

> ID：15335330
> 
> 赞同：1
> 
> 时间：2013-03-11T09:42:31.013
> 
> 标签：configuration, oracle11g, xml

这是我的代码：</p>

```
<?xml version="1.0" encoding="utf-8" ?>
<activerecord>
<config>
<add
  key="connection.driver_class"
  value="NHibernate.Driver.OracleClientDriver" />
<add
  key="dialect"
  value="NHibernate.Dialect.OracleDialect" />
<add
  key="connection.provider"
  value="NHibernate.Connection.DriverConnectionProvider" />
<add 
  key="proxyfactory.factory_class" 
  value="NHibernate.ByteCode.Castle.ProxyFactoryFactory, NHibernate.ByteCode.Castle" />
<add
  key="connection.connection_string"
  value="Data Source=localhost;User ID=yjyb;Password=yjyb;" />
</config>
</activerecord> 
```

当我调试程序时，出现错误。错误：将信息从类 TestItem.Database.RTS_RTFWS_IN 添加到 NHibernate 时出错。检查内部异常以获取更多信息。

我是学生，我的英语很差。=。=谢谢你的帮助。

# php - HTML动态创建表单条目？

> ID：15335331
> 
> 赞同：-1
> 
> 时间：2013-03-11T09:42:31.893
> 
> 标签：php, json, facebook, html

我有一个`JSON`包含来自页面的 Facebook 数据的文件。我需要的是根据文件创建一个`table`带有`checkbox`条目的条目`JSON`。我正在使用**php sdk**和**javascript sdk**。

我正在考虑一种这样的方法：

```
<?php
$array_of_decoded=json_decode("$myjson",true);
for($i=0;$array_of_decoded(i);i++)
{?>
// create new entry in html form with the following propreties:
 <input type="checkbox" name="<?php array_of_decoded(i)['name']?>"
 value="<?php array_of_decoded(i)['id']?>"><?php array_of_decoded(i)['name']?<br>
<?php
//...
}?> 
```

我的 JSON 文件具有如下条目：

```
{"category":"Musician\/band","name":"Yann Tiersen (official)","id":"18359161762"} 
```

我是这方面的新手，上面的代码可能是错误的，我只是当场写的，没有测试。有谁知道如何创建新条目？上面的代码是否显示了如何正确解码 json？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:47:15.093

您可以使用“ `foreach`”：

```
<?php
foreach(json_decode("$myjson",true) as $element) {?>
     <input type="checkbox" name="<?php echo $element['name']?>" value="<?php echo $element['id']?>"><?php echo $element['name']?><br>
<?php }?> 
```

当然，这个必须放在视图页面中！

# perl - Perl 从文件中读取数据

> ID：15335332
> 
> 赞同：1
> 
> 时间：2013-03-11T09:42:40.053
> 
> 标签：perl

我有一个包含`abc.txt` 表单数据的文件

```
sHost = "Arun";
sUid ="Abc"; 
```

我想`Arun`使用`sHost`Perl 等等。我的代码：

```
my $filename = "abc.txt";

use strict;
use warnings;

open(my $fh, '<:encoding(UTF-8)', $filename)
  or die "Could not open file '$filename' $!";

while (my $row = <$fh>)
{
  chomp $row;
  if ($row=~m/sHost/)
  {
    print $row;
  }
} 
```

我得到的输出`sHost = Arun;`

但我只想要`'Arun'`. 我应该在这里应用什么逻辑？我对 Perl 和 Linux 很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:51:53.503

在 chomp 之后，更改为这个变量 $host 将包含该值

```
if ($row=~m/sHost = "(.*)"/) {
  $host=$1; 
```

简单来说，如果有匹配项， ( ) 部分将被赋予 $1 。有关详细信息，请参阅 man perlre

要将此概括为读取任何键和任何值，请执行以下操作

```
 while (my $row = <$fh>) {
   if ($row = ~ /^(\w+) = "([^"]+)"/) {
     $value{$1} = $2;
   } 
```

然后 $value{'sHost'} 将是“Arun”等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:45:11.843

对于通用配置文件解析，您可以使用以下代码：

```
my %config;
if ($row =~ m/^\s*(["'`])?(\S+)\1?\s*=\s*(["'`])?(\S+?)\3?;?$/) {
    my $key       = $2;
    my $value     = $4;
    $config{$key} = $value;
} 
```

此正则表达式允许您处理带有普通或被不同引号类型（**“ ' `**，但您可以根据需要添加符号）键/值与前导或/和尾随空格的键/值行，分号不是强制性的。另外您可以根据您对键/值可能值的要求更改*(\S+)*（\S - 除空格外的所有值）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:48:38.040

使用`m/.*=\s*([^\s]*)/g`而不是`m/sHost/`

使用`print $1`而不是`print $row`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-11T09:47:25.757

代替

```
if ($row=~m/sHost/) 
```

和

```
if ($row=~s/sHost//) 
```

# c# - 无法通过asp.net根目录下子文件夹下的网页打开文件

> ID：15335336
> 
> 赞同：0
> 
> 时间：2013-03-11T09:42:51.243
> 
> 标签：c#, asp.net, subdirectory, asp.net-webpages

我的网页中有一个问题。其实我已经开发了asp.net 3.5 网站。我在项目根目录的 子目录下创建了一个名为**HR.aspx的网页。**

```
网页位置

     （项目名称）>>部门（子文件夹）>> HR（子文件夹）>> HR.aspx

```

我有这个文件中的代码来打开像pdf这样的文件。

我的文件位置文件夹在我的项目下。

```
文件位置

 (项目名称) >> SIPL (子文件夹) >> 部门 (子文件夹) >> HR (子文件夹) >> HR.pdf

```

我的问题是当我将 HR.aspx 页面放在根目录下时，文件打开成功，当我将此页面放在子文件夹下（如上所示）时，它没有打开并显示文件未找到错误。我认为页面找不到文件的路径，因为它在子文件夹中。如何克服这个问题。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:48:37.553

它应该是

```
<pre>
    <img src="\Images\Open.jpg"/>
</pre> 
```

在您的 Web 应用程序中使用文件。您的应用程序中应该有一个文件夹。
假设您的根目录中有一个文件夹**Images**。
然后你应该使用你的图像的相对路径。
更多详细信息
[HTML img 和 ASP.NET 图像和相对路径](https://stackoverflow.com/questions/5190769/html-img-and-asp-net-image-and-relative-paths)

## 编辑 1

既然你写了

```
<img src="C:\Users\Administrator\Desktop\Open.jpg"/> 
```

这对于 Web 应用程序是错误的。
如果你像上面那样写，浏览器会寻找本地系统文件。
而不是应用程序服务器上的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:02:08.137

请选择图像的相对路径。因此，首先将图像复制到您的任何项目解决方案文件夹中，然后参考：

```
<img src='\NewFolderName\Open.jpg'/> 
```

# python - 通过 SOAP v2 创建 Magento 产品

> ID：15335337
> 
> 赞同：1
> 
> 时间：2013-03-11T09:42:52.270
> 
> 标签：python, magento, soap, suds

我正在用 Python 实现一个通过 SOAP v2 与 Magento 交互的服务。到目前为止，我可以让产品列表做这样的事情：

```
import suds
from suds.client import Client
wsdl_file = 'http://server/api/v2_soap?wsdl=1'
user = 'user'
password = 'password'
client = Client(wsdl_file) # load the wsdl file
session = client.service.login(user, password) # login and create a session
client.service.catalogProductList(session) 
```

但是，我无法创建产品，因为我真的不知道应该发送哪些数据以及如何发送。[我知道我必须使用的方法是 catalogProductCreate，但这里](http://www.magentocommerce.com/api/soap/catalog/catalogProduct/catalog_product.create.html)显示的 PHP 示例并没有真正帮助我。

任何输入将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:19:32.427

你已经在那里了。我认为您的问题无法将 PHP 参数数组转换为 Python 键值对。如果是这样，这将对您有所帮助。以及需要在创建产品之前使用 catalogProductAttributeSetList 设置属性集

```
 attributeSets = client.service.catalogProductAttributeSetList(session)
    #print attributeSets
    # Not very sure how to get the current element from the attributeSets array. hope the below code will work 
    attributeSet = attributeSets[0]
    product_details = [{'name':'Your Product Name'},{'description':'Product description'},{'short_description':'Product short description'},{'weight':'10'},{    'status':'1'},{'url_key':'product-url-key'},{'url_path':'product-url-path'},{'visibility' :4},{'price':100},{'tax_class_id':1},{'categories': [2]},{'websites': [1]}]
    client.service.catalogProductCreate(session , 'simple', attributeSet.set_id, 'your_product_sku',product_details) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T01:41:55.403

```
suds.TypeNotFound: Type not found: 'productData' 
```

Because the productData format is not right. You may want to change from
`product_details = [{'name':'Your Product Name'},{'description':'Product description'}, {'short_description':'Product short description'},{'weight':'10'},{ 'status':'1'},{'url_key':'product-url-key'},{'url_path':'product-url-path'},{'visibility' :4},{'price':100},{'tax_class_id':1},{'categories': [2]},{'websites': [1]}]`

to
`product_details = {'name':'Your Product Name','description':'Product description', 'short_description':'Product short description','weight':'10', 'status':'1','url_key':'product-url-key','url_path':'product-url-path','visibility' :4,'price':100,'tax_class_id':1,'categories': [2],'websites': [1]}`

It works for me.

# javascript - Angularjs 使用没有 ng-view 的 $routeProvider

> ID：15335338
> 
> 赞同：4
> 
> 时间：2013-03-11T09:42:56.450
> 
> 标签：javascript, angularjs

我有一个简单的单页应用程序，可以在上面显示图像。

在第一次加载页面是空白的，人们添加了他们自己的图像，但是如果他们然后返回到带有保存在 url 中的 id 的页面，那么我希望页面获取以前的模型。

现在我之前使用 routeProvider 的所有尝试都失败了，除非我将 ng-view 放在页面中的某个位置。但这会影响 ng-view 范围内的范围。

基本上，我需要在页面上做出不同的响应，具体取决于 url 中是否有 id，但我没有更改视图，我需要从路由参数中获取 id。

所以我只是想知道你们将如何做这件事，因为我似乎在吠叫错误的树！任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T10:24:01.847

这是使用标准 routeProvider 设置和一个控制器处理带和不带 id 的 url 的一种方法：

JS：

```
var app = angular.module('plunker', []);

app.config(function($routeProvider){
  return $routeProvider
    .when('/', {
      controller: 'HomeController',
      templateUrl: 'home.html'
    })
    .when('/:id', {
      controller: 'HomeController',
      templateUrl: 'home.html'
    })
    .otherwise({ redirectTo: '/' });
});

app.controller('HomeController',
    [
      '$scope',
      '$routeParams',
      function($scope, $routeParams) {
        if($routeParams.id){
          $scope.id = $routeParams.id;
          // handle scenario when there is an id in URL
          return;
        }

        // handle scenario when there is no id
        $scope.id = 'no ID!!';
      }
    ]
  ); 
```

`[Plunker](http://plnkr.co/edit/wgUpeq9jz1ZJeUGf1WVz)`

这是另一种方式，不使用 ng-view 并依赖 $location 服务：

```
var app = angular.module('plunker', []);

app.config(
    ['$locationProvider',
      function($locationProvider) {
        $locationProvider.html5Mode(true);
      }
    ]
  );

app.controller('HomeController',
    [
      '$scope',
      '$location',
      function($scope, $location) {

        $scope.$watch(function(){
            return $location.hash();
          },
          function(id){
            $scope.id = id;
          }
        );

        $scope.$watch('id', function(id){
          if(id){
            // handle scenario when there's id available
            return;
          }
          // handle scenario when there is no id
        });

      }
    ]
  ); 
```

`[Plunker](http://plnkr.co/edit/071lYiArvGe95wMH2mua)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-26T22:50:22.657

[这个 plunker](http://plnkr.co/edit/S0ZgUkt4mqcKFbMrzISa?p=preview)`$route`通过在应用程序运行块中添加作为依赖项来启动 $route 服务。[这里](https://groups.google.com/forum/#!msg/angular/7K_agNCJ50Q/iaZmMp8t89IJ)描述了这个想法。

```
angular.module('myApp', ['myApp.controllers'])
  .config(function($routeProvider) {
    return $routeProvider.when("/", {
      controller: 'firstCtrl'
    }).when("/numbers/:number", {
      controller: 'secondCtrl'
    });
  }).run(function($route) {});

angular.module("myApp.controllers", [])
  .controller("firstCtrl", function($scope) {
    $scope.numbers = [1, 2, 3];
  })
  .controller("secondCtrl", function($scope,$routeParams, $rootScope, $location) {
    return $rootScope.$on("$routeChangeSuccess", function(event, current) {
      $scope.current_path = $location.$$path;
      $scope.number = $routeParams['number'];
    });
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-23T17:33:23.957

你可以做一些类似于 Ben Nadel 建议的事情。那就是使用 ng-switch 并在决定与 ng-include 结合使用的模板时为键提供哈希值。这样，当您更改为不同的 url 路径时，您会监听该更改，更新模型并启动新的包含/部分。

[Ben Nadel - AngularJS 的嵌套视图、路由和深度链接](http://www.bennadel.com/blog/2441-Nested-Views-Routing-And-Deep-Linking-With-AngularJS.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-10T19:48:04.033

您始终可以定义自己的 url 解析器。创建服务，然后在您想要的时间和地点使用。

```
angular.module('app').service('urlParser', function(){
    this.parse = function(url){
        var query = url.split('?')
        if (url.length == 1){ return {} } //it means it has no parameters
        else{
            var paramsArray = query.split('&')
            var params = {} //this is going to be your return object
            var i;
            for ( i=0; i < paramsArray.length; i++ ){
                var arr = paramsArray[i].split('=')
                var param = arr[0]
                var value;
                //check if is set with some value
                if( arr.length == 1 )
                    value = null
                else
                    value = arr[1]
                obj[param] = value
            }
            return obj;
        }
    }
}) 
```

您将从控制器调用它作为服务。服务名称：urlParser 方法名称：parse(:string)

示例：
var url = " [http://www.yourwebsite.com/yourroute?page=1&user=1000](http://www.yourwebsite.com/yourroute?page=1&user=1000) "
var params = urlParser.parse(url)
params.page //给你 1
params.user //给你 1000

希望这有帮助

# inno-setup - Inno 设置：使用 JSON

> ID：15335340
> 
> 赞同：7
> 
> 时间：2013-03-11T09:43:02.527
> 
> 标签：inno-setup, pascalscript

如何在安装期间加载和使用 JSON 配置文件？我可以从文件中读取字符串并将其写入，但如果我想更改配置文件中的某些值，我必须使用`VBScript.RegExp`COM 对象（这很好，但开发起来很痛苦且缓慢）。

当前方法：

```
ExtractTemporaryFile('config.json');
filename := ExpandConstant('{tmp}\config.json');
LoadStringFromFile(filename, conf);

objRegExp := CreateOleObject('VBScript.RegExp');
objRegExp.Pattern := 'test';
conf := objRegExp.Replace(conf, 'test_replace');
SaveStringToFile(filenameOut, conf, False); 
```

有一个更好的方法吗？我只需要替换 JSON 对象中的一些值，不需要额外的魔法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T01:41:15.673

我已经设置了名为 的新项目[`Inno JSON Config`](https://code.google.com/p/inno-json-config/)，它允许您使用如下所示的简单 JSON 配置文件，并允许您读取和写入字符串、整数和布尔值：

```
{
    "Section_1":{
            "Key_1": "String 1",
            "Key_2": "1",
            "Key_3": "True"
    },
    "Section_2":{
            "Key_1": "String 2",
            "Key_2": "2",
            "Key_3": "False"
    }
} 
```

用法非常简单（即使我还要添加句柄支持）。请注意，只能使用 Unicode Inno Setup（由于需要支持，在最新版本之一中`Int64`）可以使用：

```
[Files]
Source: "JSONConfig.dll"; Flags: dontcopy

[Code]
function JSONQueryString(FileName, Section, Key, Default: WideString;
  var Value: WideString; var ValueLength: Integer): Boolean;
  external 'JSONQueryString@files:jsonconfig.dll stdcall';
function JSONQueryBoolean(FileName, Section, Key: WideString; 
  Default: Boolean; var Value: Boolean): Boolean;
  external 'JSONQueryBoolean@files:jsonconfig.dll stdcall';
function JSONQueryInteger(FileName, Section, Key: WideString; 
  Default: Int64; var Value: Int64): Boolean;
  external 'JSONQueryInteger@files:jsonconfig.dll stdcall';
function JSONWriteString(FileName, Section, Key, 
  Value: WideString): Boolean;
  external 'JSONWriteString@files:jsonconfig.dll stdcall';
function JSONWriteBoolean(FileName, Section, Key: WideString;
  Value: Boolean): Boolean;
  external 'JSONWriteBoolean@files:jsonconfig.dll stdcall';
function JSONWriteInteger(FileName, Section, Key: WideString;
  Value: Int64): Boolean;
  external 'JSONWriteInteger@files:jsonconfig.dll stdcall';

function BoolToStr(Value: Boolean): string;
begin
  Result := 'True';
  if not Value then
    Result := 'False';
end;

procedure InitializeWizard;
var
  FileName: WideString;
  IntValue: Int64;
  StrValue: WideString;
  StrLength: Integer;
  BoolValue: Boolean;
begin
  { set the source JSON config file path }
  FileName := 'c:\Example.json';
  { allocate string buffer to enough length }
  SetLength(StrValue, 16);
  { set the buffer length value }
  StrLength := Length(StrValue);
  { query string value }
  if JSONQueryString(FileName, 'Section_1', 'Key_1', 'Default', StrValue, 
    StrLength)
  then
    MsgBox('Section_1:Key_1=' + StrValue, mbInformation, MB_OK);
  { query integer value }
  if JSONQueryInteger(FileName, 'Section_1', 'Key_2', 0, IntValue) then
    MsgBox('Section_1:Key_2=' + IntToStr(IntValue), mbInformation, MB_OK);
  { query boolean value }
  if JSONQueryBoolean(FileName, 'Section_1', 'Key_3', True, BoolValue) then
    MsgBox('Section_1:Key_3=' + BoolToStr(BoolValue), mbInformation, MB_OK);
  { write string }
  if not JSONWriteString(FileName, 'Section_1', 'Key_1', 'New value!') then
    MsgBox('JSONWriteString Section_1:Key_1 failed!', mbError, MB_OK);
  { write integer }
  if not JSONWriteInteger(FileName, 'Section_1', 'Key_2', 123) then
    MsgBox('JSONWriteInteger Section_1:Key_2 failed!', mbError, MB_OK);
  { write boolean }
  if not JSONWriteBoolean(FileName, 'Section_1', 'Key_3', False) then
    MsgBox('JSONWriteBoolean Section_1:Key_3 failed!', mbError, MB_OK);
end; 
```

# android - 反转 setClickable(false) 效果

> ID：15335344
> 
> 赞同：0
> 
> 时间：2013-03-11T09:43:13.213
> 
> 标签：android

我的项目中有一个可扩展的列表视图，每个组都有一个 edittext 作为其子项。我正在根据一些数据将edittext更改为不可点击。但我无法扭转它，因为我对所有孩子使用相同的布局。

片段：

```
if(**condition**)
{
    edittext.setFocusable(true);
}
else
{
    edittext.setFocusable(false);
} 
```

一旦它进入`else`零件，它就不适用于`if`零件

# c# - 获取 ssl 证书信息 - .net

> ID：15335347
> 
> 赞同：7
> 
> 时间：2013-03-11T09:43:23.623
> 
> 标签：c#, ssl-certificate

我希望从任何给定的域名 SSL 证书中获取数据。例如，我想输入任何网站地址，例如“ [http://stackoverflow.com](http://stackoverflow.com) ”，我的代码将首先检查 SSL 证书是否存在。如果是这样，那么我希望它提取证书的到期日期。[我正在从 DB 读取域名] 示例：[http ://www.digicert.com/help/](http://www.digicert.com/help/)

我需要创建一个 Web 服务来检查到期日期。我该如何实施？- 我查看了很多不同的东西，例如 RequestCertificateValidationCallback 和 ClientCertificates 等。由于我是新手，我不确定必须做什么。

我可能完全错了（因此我需要帮助）但是我会创建一个 HTTPWebRequest 然后以某种方式请求客户端证书和特定元素吗？

我尝试了提供@SSL 证书预取 .NET 的示例，但我收到了被禁止的 403 错误。

任何帮助将不胜感激 - 谢谢。

这是我编写的抛出 403 禁止错误的代码。

```
 Uri u = new Uri("http://services.efi.com/");
        ServicePoint sp = ServicePointManager.FindServicePoint(u);

        string groupName = Guid.NewGuid().ToString();
        HttpWebRequest req = HttpWebRequest.Create(u) as HttpWebRequest;
        req.Accept = "*/*";
        req.ConnectionGroupName = groupName;

        using (WebResponse resp = req.GetResponse())
        {
            // Ignore response, and close the response.
        }
        sp.CloseConnectionGroup(groupName);

        // Implement favourite null check pattern here on sp.Certificate
        string expiryDate = sp.Certificate.GetExpirationDateString();

        string str = expiryDate; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T09:56:10.007

这工作正常：

```
namespace ConsoleApplication1
{
  using System;
  using System.Net;
  using System.Net.Security;
  using System.Security.Cryptography.X509Certificates;

  class Program
  {
    static void Main()
    {
      ServicePointManager.ServerCertificateValidationCallback += ServerCertificateValidationCallback;

      var request = WebRequest.Create("https://www.google.com");

      var response = request.GetResponse();

      Console.WriteLine("Done.");
      Console.ReadLine();

    }

    private static bool ServerCertificateValidationCallback(object sender, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors)
    {
      Console.WriteLine("Certificate expires on " + certificate.GetExpirationDateString());

      return true;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:17:35.180

您将获得“403 禁止”状态，因为这是您访问该页面时服务器返回的内容。当我使用 IE 浏览到该 Uri 时，我看到了同样的情况。此状态表明您没有访问 URL 的权限，因此也许您应该在您有权访问的页面上尝试您的代码。

此外，您不太可能在`http`连接上看到证书 - 您可能想尝试一下`https`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-19T08:39:43.600

If you need to download the certificate:

```
 //Do webrequest to get info on secure site
        var certName = "FileName";
        var url = "https://mail.google.com";
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        response.Close();

        //retrieve the ssl cert and assign it to an X509Certificate object
        X509Certificate cert = request.ServicePoint.Certificate;

        //convert the X509Certificate to an X509Certificate2 object by passing it into the constructor
        X509Certificate2 cert2 = new X509Certificate2(cert);

        string cn = cert2.GetIssuerName();
        string cedate = cert2.GetExpirationDateString();
        string cpub = cert2.GetPublicKeyString();

        var path = Directory.GetCurrentDirectory() + string.Concat("\\", certName, ".der");
        byte[] certData = cert2.Export(X509ContentType.Cert);
        File.WriteAllBytes(path, certData);

        Console.WriteLine("cert2.GetIssuerName :{0}", cert2.GetIssuerName());
        Console.WriteLine("cert2.GetExpirationDateString :{0}", cert2.GetExpirationDateString());
        Console.WriteLine("cert2.GetPublicKeyString :{0}", cert2.GetPublicKeyString()); 
```

.cs Sample File :[https://gist.github.com/thedom85/6db200104c075310527aaef63b172253](https://gist.github.com/thedom85/6db200104c075310527aaef63b172253)

I also recommend this site : [https://www.simple-talk.com/dotnet/.net-framework/tlsssl-and-.net-framework-4.0/](https://www.simple-talk.com/dotnet/.net-framework/tlsssl-and-.net-framework-4.0/)

# php - cakephp中等效的mysql_real_escape_string

> ID：15335351
> 
> 赞同：-1
> 
> 时间：2013-03-11T09:43:43.833
> 
> 标签：php, cakephp, cakephp-1.3, cakephp-2.1

我想上传一个带有blob字段的文件我使用一个蛋糕框架但是我不能使用mysql_real_escape_string函数请帮助我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T09:47:07.993

一般来说：你不应该这样做。

Cake 假设您将使用它的 ORM 而不是直接编写 SQL。

如果你绕过它[`query()`](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#model-query)（这表明*这应该很少需要*），那么请参阅[Data Sanitization](http://book.cakephp.org/2.0/en/core-utility-libraries/sanitize.html)（它链接到它。

它表明您应该使用：

```
Sanitize::escape($string, $connection) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:49:07.247

如果你想在你的框架中使用 cake，不要再担心`mysql_real_escape_string`. 蛋糕已经解决了这个问题。但我会推荐看看[Data Sanitization](http://book.cakephp.org/1.3/en/The-Manual/Common-Tasks-With-CakePHP/Data-Sanitization.html)。

`**But to allow cake to take care of sql injection, you will have to use ORM methods like save(), find(), saveAll().**`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:51:00.673

如果你打算用 CakePHP 构建你自己的 SQL 字符串，那么它提供了如下的转义函数： `escape(string $string, string $connection)`

# wordpress - 如何使用 /wp-admin/theme-editor.php 编辑内部文件

> ID：15335352
> 
> 赞同：2
> 
> 时间：2013-03-11T09:43:45.777
> 
> 标签：wordpress

如何`/js/ or /css/`在 Wordpress 中使用 /wp-admin/theme-editor.php 编辑内部文件 ( )？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:39:19.283

您需要为主题设置文件权限，以便可以对其进行编辑。

来自[http://codex.wordpress.org/Editing_Files](http://codex.wordpress.org/Editing_Files)

> 要使用内置的 WordPress 插件或主题编辑器编辑文件，该文件的权限必须设置为可写（至少 666）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-25T14:59:42.933

您还需要更改 theme-editor.php 中的 get_files 代码

# android - FTDI D2XX 驱动程序不适用于三星 Galaxy S3

> ID：15335354
> 
> 赞同：1
> 
> 时间：2013-03-11T09:43:47.790
> 
> 标签：android, usb, driver, ftdi

我刚刚从 FTDI 网站下载了最新的 FTDI D2XX android 驱动程序，以便将我的 ft232R 芯片与我的三星 Galaxy S3 手机连接，而无需生根。当我通过 USB 将 ft232r 芯片插入三星 Galaxy s3 时，它似乎可以识别它，但是当我启动使用 FTDI D2XX 驱动程序提取 VID 和 PID 的应用程序时，它似乎无法识别任何连接到手机的设备.

我什至更新了手机，我无法理解问题是什么。谁能给我一个解决方案？

# java - 在 JavaFX 中查找屏幕区域

> ID：15335358
> 
> 赞同：3
> 
> 时间：2013-03-11T09:43:53.797
> 
> 标签：java, javafx-2

似乎这应该很容易和明显，但我无法在任何地方找到答案。我正在使用`JavaFX`2，我需要找到当前在屏幕上向用户显示的节点区域的宽度和高度（而不是整个布局中节点的宽度和高度）。

因此，如果滚动窗口以使我的节点位于右侧边缘的一半，我希望显示的宽度为节点宽度的一半，显示的高度等于全高。应该很容易；不是。有人知道怎么做吗？

对我来说，一个可以接受的解决方案是使用窗口本身的尺寸。这是一样的宽度/高度`Stage`吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:51:39.967

这不是使用滚动窗格的视口尺寸和节点的坐标/尺寸进行的简单计算吗？如果您可以发布一个简单的测试用例进行试验，那将更容易提供帮助。

# javascript - jquery 复选框 - 检查数组中的值并检查这些值

> ID：15335362
> 
> 赞同：2
> 
> 时间：2013-03-11T09:44:02.113
> 
> 标签：javascript, jquery

我有一个数组说

```
{'Sunday','Wednesday', 'Thursday'} 
```

我有一个所有工作日的复选框。

```
HTML code
<tr>
    <td width="3%"></td>
    <td><input type="checkbox" name="weeklyDay"
           id="sunday" value="sunday"> Sunday
    </td>
    <td><input type="checkbox" name="weeklyDay"
           checked id="monday" value="monday"> Monday
    </td>
    <td><input type="checkbox" name="weeklyDay"
           id="tuesday" value="tuesday"> Tuesday
    </td>
    <td><input type="checkbox" name="weeklyDay"
           id="wednesday" value="wednesday"> Wednesday
    </td>
</tr>
<tr>
    <td width="3%"></td>
    <td><input type="checkbox" checked
           name="thursday" id="thursday" value="thursday"> Thursday
    </td>
    <td><input type="checkbox" name="weeklyDay"
           id="friday" value="friday"> Friday
    </td>
    <td><input type="checkbox" name="weeklyDay"
           id="saturday" value="saturday"> Saturday
    </td>
</tr> 
```

我只想找出星期天、星期三和星期四，然后检查这三个。怎么做？有人可以帮我根据数组值的变化检查多个框吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:46:24.260

您可以使用过滤器来[过滤（）](http://api.jquery.com/filter/)元素并在工作日数组上使用[indexOf()](http://www.w3schools.com/jsref/jsref_indexof_array.asp)以匹配星期数组中的选项，

```
var weekArray =  {'Sunday','Wednesday', 'Thursday'};
$('select[name="Day"] option').filter(function(){
    if(weekArray.indexOf((this).text(), 0) != -1)
       return $(this);
}).prop("checked", true); 
```

# php - 多密钥生成

> ID：15335367
> 
> 赞同：-3
> 
> 时间：2013-03-11T09:44:15.630
> 
> 标签：php, key

我有用于生成密钥的代码。

```
<?php   
function KeyGen()
{
 $keylength = 20;
 $key = md5(mktime());
 $new_key = '';
 for($i=1; $i <= $keylength; $i ++ )
    {
           $new_key .= $key[$i];
           if ( $i%5==0 && $i != $keylength) $new_key.='-';
    }
 return strtoupper($new_key);
 }
 echo KeyGen();
?> 
```

我想生成 20 个密钥。我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:48:37.973

```
 <?php   
 function KeyGen()
 {
 $keylength = 20;
 $key = md5(strtotime("now").rand());
 $new_key = '';
 for($i=1; $i <= $keylength; $i ++ )
   {
       $new_key .= $key[$i];
       if ( $i%5==0 && $i != $keylength) $new_key.='-';
   }
 return strtoupper($new_key);
 }
 $new_key= KeyGen();
 echo  $new_key;
 ?> 
```

调用函数，你应该得到密钥

# javascript - 保留当前样式表的状态

> ID：15335369
> 
> 赞同：0
> 
> 时间：2013-03-11T09:44:18.663
> 
> 标签：javascript, jquery

我试图在更改样式表后保留它的状态。我通过在 cookie 中存储一个值来做到这一点。这是我的代码：

```
var content = $("#content");
var state = $.cookie("layoutState");

if (state === "grid") {
    content.removeClass("content-list").addClass("content-grid");
    console.log($.cookie("layoutState"));
}

if (state === "list") {
    content.removeClass("content-grid").addClass("content-list");
    console.log($.cookie("layoutState"));
}

$("#list").on("click", function (e) {
    $.cookie("layoutState", "list");
    content.removeClass("content-grid").addClass("content-list");
    e.preventDefault();
})

$("#grid").on("click", function (e) {
    $.cookie("layoutState", "grid");
    content.removeClass("content-list").addClass("content-grid");
    e.preventDefault();
}) 
```

点击事件完美地工作。我认为问题在于我有两个条件。出于某种原因，cookie 值有时会在页面更改后更改。我希望 cookie 的状态仅在单击事件时更改。

有什么我做错了吗？

# c# - 检查字符串是否包含多个空格

> ID：15335371
> 
> 赞同：2
> 
> 时间：2013-03-11T09:44:24.190
> 
> 标签：c#, string

```
string mystring = "bbbccc  "; 
```

如何检查我的字符串是否包含多个连续的空格？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-11T09:46:31.020

我假设您正在寻找多个连续的空格。
我会用`System.Text.RegularExpressions.Regex`它。

```
Regex regex = new Regex(@"\s{2,}"); // matches at least 2 whitespaces
if (regex.IsMatch(inputString))
    // do something 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-11T09:51:57.587

这可能是一个快速的实现：

```
public static bool HasConsecutiveSpaces(string text)
{
    bool inSpace = false;

    foreach (char ch in text)
    {
        if (ch == ' ')
        {
            if (inSpace)
            {
                return true;
            }

            inSpace = true;
        }
        else
        {
            inSpace = false;
        }
    }

    return false;
} 
```

但是，如果您真的不需要担心速度，只需使用先前答案中给出的正则表达式解决方案即可。

# javascript - 如何将 testacular 与 jasmine 集成到 maven 常规构建中

> ID：15335373
> 
> 赞同：1
> 
> 时间：2013-03-11T09:44:33.763
> 
> 标签：javascript, jasmine, karma-runner, jasmine-maven-plugin

我只想在常规的 Maven 构建中运行测试单元测试。

我已经有一个 jasmine 构建在我的项目上工作，我想集成来自 testacular 的浏览器对象来测试我的应用程序的 UI。

是否有可能或者我必须使用 nodejs 来运行 testacular 的测试单元？

预先感谢您的帮助。

# java - JDK 包含哪些脚本语言解释器？

> ID：15335374
> 
> 赞同：5
> 
> 时间：2013-03-11T09:44:38.397
> 
> 标签：java, jvm

前段时间，我阅读了有关[JavaTM Scripting API](http://docs.oracle.com/javase/6/docs/technotes/guides/scripting/programmer_guide/index.html)的信息，但我找不到有关 Oracle JVM 实现了哪些语言解释器（JS 除外）的信息。我在哪里可以找到完整列表？或者 JVM 默认情况下除了 JavaScript 什么都不解释？

```
ScriptEngineManager factory = new ScriptEngineManager();
ScriptEngine engine = factory.getEngineByName("JavaScript"); // what else? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:51:33.700

我在@Jesper 的帮助下找到了答案。`javax.script.ScriptEngineManager`有[`getEngineFactories()`](http://docs.oracle.com/javase/7/docs/api/javax/script/ScriptEngineManager.html#getEngineFactories%28%29)返回...的方法

> ...一个列表，其元素是发现机制找到的所有 ScriptEngineFactory 类的实例。

我编写了这个代码片段来获取支持的引擎列表：

```
ScriptEngineManager factory = new ScriptEngineManager();
for (ScriptEngineFactory sef : factory.getEngineFactories()) {
    System.out.println(sef.getEngineName() + " (" + sef.getLanguageName() + ")");
} 
```

*输出：*

> Mozilla Rhino (ECMAScript)

[Rhino](https://developer.mozilla.org/en-US/docs/Rhino)是完全用 Java 编写的 JavaScript 的开源实现。

## 结论：

Oracle JDK 只有一种嵌入式脚本语言解释器——JS 解释器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T17:23:14.230

我猜你知道我要说的大部分内容，但以免其他人偶然发现这个不知道的人：

默认情况下包含 Javascript，因为它是参考实现 (Rhino)。将其视为“嵌入式”并不完全正确——该实现恰好被捆绑为 JSR-223 的参考实现。据我所知，它与任何其他实现没有什么不同，只是它恰好默认存在。

但是，存在许多其他语言的实现，不是 JVM/JDK 特定的（只需要 Java 6 或更高版本），并且在应用程序中添加相当简单。

我使用过 Perl、Groovy、Haskell、Javascript 和 Python 以及其他一些（进行一些性能测试，可能将其用作解决方案）。

如果您想安装它们，有很多可用的语言： [https ://confluence.deri.ie:8443/display/romulus/JSR+223+compliant+scripting+languages](https://confluence.deri.ie:8443/display/romulus/JSR+223+compliant+scripting+languages)

# jquery - html表单目标_blank浏览器不允许

> ID：15335375
> 
> 赞同：3
> 
> 时间：2013-03-11T09:44:43.233
> 
> 标签：jquery, ajax, popup

我需要向贝宝发送一个发布请求，但在发送表单之前，我需要验证一些输入，并且贝宝页面必须在新选项卡或窗口中打开（没关系）。我无法在同一个窗口中发送请求，因为在主页中我有后台 ajax 回调。所以想法是我可以在新窗口或标签中发送请求吗？

在所有主要浏览器中，这是不允许的，浏览器会一直阻止请求。

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank" id="paypal_form">
<input type='hidden' name='some_value' id='some_value' value='151' />
</form>

<div id='button_submit' onClick="verify_paypal_form();">SUBMIT !</div> 
```

现在是ajax部分：

```
function verify_paypal_form(){
   $.post('verify.php', { someValue : 'FOO' },
   function(data){
      if( data == 'OKAY' ) $('#paypal_form').submit();
   });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:55:50.410

您也可以使用 JS 打开一个新窗口，然后使用[此答案](https://stackoverflow.com/a/5555021/1087848)的解决方案：

```
$("#paypal_form").submit(function() {
    var newWin = window.open("", "", ""); // SPecify your window attributes here, but no URL
    // do an XMLHTPPRequest and document.write the result to the new window:
    var winDoc = doAJAXAndReturnOtherPagesSource();
    newWin.document.write(winDoc);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:48:21.470

将表单的目标设置为 iframe 并尝试一下。您也可以将该 iframe 显示为新选项卡的内容。

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="myFrame" id="paypal_form">
<input type='hidden' name='some_value' id='some_value' value='151' />
</form>

<div id='button_submit' onClick="verify_paypal_form();">SUBMIT !</div>
<iframe id="myFrame" ...... set other attributes as required....></iframe> 
```

# php - 在评论下显示作者姓名而不是作者 ID

> ID：15335376
> 
> 赞同：0
> 
> 时间：2013-03-11T09:44:47.797
> 
> 标签：php, cakephp-2.2

在我的应用程序中，我有 2 个控制器，一个用于文章 ( `Articles`)，一个用于文章评论 ( `Article_Comments`)。他们的表格如下所示：

```
Articles
id, author_id, type_id, body, created, modified

Article_Comments
id, article_id, author_id, body, created, modified 
```

现在关于文章的观点，我也展示了评论。但评论没有显示该评论作者的姓名。它只显示`author_id`.

如何更改它以显示名称而不是 ID？

**编辑 1**

这是文章视图的代码：（显示评论的位）

```
<?php if (!empty($article['articleComment'])):
    $i = 0;
    foreach ($article['articleComment'] as $articleComment): ?>
        <tr>
            <td colspan="2">
                Response By: <?php echo $articleComment['author_id']; ?>
            </td>
            <td>
                On: <?php echo $articleComment['created']; ?>
            </td>
        </tr>
        <tr>
            <td colspan="3"><?php echo $articleComment['comment']; ?></td>
        </tr>
    <?php endforeach; ?>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:04:28.323

您需要将 Article_Comments 与作者的表进行连接，并将该字段放在 select 语句中以获取作者的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:30:43.130

> 我已经链接`Author`到`Article_Comments`. `Article_Comment`s 在`Author`下的模型中定义`$hasMany`。

该关系是从`Author`模型中检索评论所必需的，但您需要创建相反的关系，因为您要从`Article_Comments`. 像这样的东西：

```
class Article_Comments extends AppModel{
    public $belongsTo = 'Author';
} 
```

# c# - C# - 在 catch 子句中使用 return

> ID：15335381
> 
> 赞同：1
> 
> 时间：2013-03-11T09:45:04.400
> 
> 标签：c#, .net, try-catch

我在这里看到了一个类似的问题，但仍有一些我不明白的地方。据我所知，当您使用`try-catch`块时，如果抛出异常，则将立即执行 catch 块，并且不会执行`catch`同一代码块中子句之后的任何代码。因此，如果我做对了，如果我们有：

```
try
{
    // do something
    // throw an exception for some reason
}
catch (Exceptiox ex)
{
    // do something when there is and exception thrown
}
// some code that will never be runned if and exception was thrown above 
```

我不能 100% 确定`catch`停止在其范围之外进一步执行，但这是我的问题之一，所以如果我错了，请纠正我。

那么，如果您根本不需要返回任何值，那么`return`在块中使用有什么意义呢？`catch`我在我正在处理的继承代码的一些方法中看到了这一点。例如：

```
public void DeleteImage(AppConfig imageInfo, string imageName)
{
    string imgPath = imageInfo.ConfigValue.ToString();
    try
    {
        File.Delete(imgPath + "\\" + imageName);
    }
    catch (Exception ex)
    {
        logger.Error(ex.ToString());
        return;
    }
} 
```

除了记录错误，这里不需要做任何事情。为什么然后使用`return`. 这是一个错误吗？`return`如果您没有明确说明，该方法不会完成吗？`catch`如果子句之后有更多代码，如果`return`不存在并且`catch`仅用于记录错误，它会被执行吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-11T09:46:49.890

> 我不能 100% 确定 catch 是否会在其范围之外停止进一步执行，但这是我的问题之一，所以如果我错了，请纠正我。

不，这是不正确的。执行将在`catch`块之后继续正常执行，除非块内的某些代码更改了流程（例如`throw`或`return`）。

因此，如果您不想继续执行，`return` *则有必要。*即使块之后*当前*没有代码`catch`，恕我直言，可以更明确地说明“处理这种类型的异常涉及在此点之后不执行任何代码”。

也就是说，你应该警惕`catch (Exception ex)`——捕获所有类型的异常应该总是受到质疑，而且几乎总是不太正确的事情（尽管在这种情况下它是为了记录，这是“允许的规则例外”） .

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T09:47:12.400

> 我不能 100% 确定 catch 是否会在其范围之外停止进一步执行，但这是我的问题之一，所以如果我错了，请纠正我。

不，它没有。如果 catch 块既不重新抛出也不返回，执行将从 try/catch 语句的末尾继续。

在您提供的示例中，该`return`声明毫无意义。如果在 catch 块之后有*代码*，那将是另一回事，因为该`return`语句会使方法立即返回。

在这样的块中包含语句并不是*错误*，因为它是完全有效的代码，并且可能仍会按预期执行——但这绝对是奇怪的。它很可能是从声明*很*重要的方法中剪切/粘贴的。`return``catch``return`

 *（抓住 几乎总是一个坏主意`Exception`，但那是另一回事。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:49:59.450

如果没有 return 语句和其他任何代码而不是那个，那么该代码将被执行。并且您可以从 catch 块中返回任何东西。它没有任何限制。*

# ajax - spring 3不在jsp中渲染模型

> ID：15335383
> 
> 赞同：0
> 
> 时间：2013-03-11T09:45:17.433
> 
> 标签：ajax, jsp, spring-mvc, el, spring-3

我对 Spring 3 没有使用表达式语言在 jsp 中渲染我的模型有点失望，我不得不承认我不明白为什么。如果有人能帮助我理解为什么我不能让它工作，那就太好了。

这是我的背景：

我的控制器有一个方法（由我的客户端的 ajax 调用）返回一个 jsp 片段：

```
@RequestMapping(value = "/datagrid/getGoatCard", method = RequestMethod.POST)
public String getGoatCard(@RequestParam Long id,
        @ModelAttribute("goat") Goat goat) {
    goat = goatDataService.findGoatById(id);
    return "goatCard";
} 
```

我用 requestParam 调用这个方法，允许 hibernate 检索所需的 Bean（模型包含所有需要的数据，它已经过检查）。

然后这个方法返回一个名为“goatCard”的jsp；这是jsp代码：

```
<input name="goat.goatName" type="hidden" value="${goat.goatName}"/> 
```

（这不是整个页面的代码，如果代码太多，这将不容易阅读。我的 jsp 包含 JQuery easyui 和 highcharts javaScript 库）

我虽然注释 @ModelAttribute("goat") 将名为“goat”的模型链接到我的 jsp 允许使用 EL 渲染模型，但似乎并非如此。

有没有人知道，也许只是我做错了一件小事，但我看不出是哪一个！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:08:02.383

**@ModelAttribute**用于检索表单模型，而不是设置在 JSP 中显示。如果需要在 JSP 中显示数据，则必须先将数据添加到 Model 中。

```
@RequestMapping(value = "/datagrid/getGoatCard", method = RequestMethod.POST)
public ModelAndView getGoatCard(@RequestParam Long id) {
    ModelAndView mv = new ModelAndView("goatCard");
    Goat goat = goatDataService.findGoatById(id);
    mv.addObject("goat",goat);
    return mv;
} 
```

然后 goat 在 JSP 文件中可用。顺便说一句，为了检索数据，最好使用**RequestMethod.GET**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:52:21.033

非常感谢你的帮助。只是更新代码的答案。当我使用 Spring 3 时，最好写

```
@RequestMapping(value = "/datagrid/getGoatCard", method = RequestMethod.POST)
public String getGoatCard(@RequestParam Long id,
        Model model) {
    model.addAttribute("goat", goatDataService.findGoatById(id));
    return "goatCard";
} 
```

这只是为了更适合 Spring Foundation 的预编译（我同意这会导致相同的结果，但 SpringSource 建议使用 String return 而不是 mav）。

再次感谢您的帮助

# php - 从 $_POST / $_SESSION 数组中删除选定的项目

> ID：15335386
> 
> 赞同：2
> 
> 时间：2013-03-11T09:45:24.140
> 
> 标签：php

我正在从从列表中选择产品的表单发布到显示所选产品的页面。我想在每个项目旁边有一个链接，用于从所选列表（数组）中删除一个项目。

我怎么做？单击删除链接后，我似乎失去了会话。

```
session_start();

foreach($_SESSION['id'] as $key => $value){

      $array = explode(',', $value);

      if($value[0]!=''){
        $id = $array[0];
        $query = "SELECT * FROM products WHERE id = '$id'";
        $result = mysqli_query($dbc, $query);

          while ($row = mysqli_fetch_array($result)) {

            $product_id = $row['id'];

            echo '<tr valign="bottom">';
            echo '<td>' . stripslashes($row['category']) . '</a></td>';
            echo '<td>' . stripslashes($row['itemDesc']) . '</a></td>';
            echo '<td class="right">' . stripslashes(number_format($row['points'], 2)) . '</a></td>';
            echo '<td><a href="' . $_SERVER['PHP_SELF'] . '?action=remove&key=' . $key . '&s=' . $_SESSION['id'] . '">Remove</a></td>';
            echo "</tr>\n\n";
            $points = stripslashes($row['points']);
            @$points_total += $points;
          }
      }
      }

$postid = $_POST['id'];
$_SESSION['id'] = $_POST['id'];

$product_id = htmlspecialchars(@$_GET['id'], ENT_QUOTES, 'UTF-8');//the product id from the URL
$s = $_SESSION['id'];
$s = htmlspecialchars(@$_GET['key'], ENT_QUOTES, 'UTF-8');//the product id from the URL
$action = htmlspecialchars(@$_GET['action'], ENT_QUOTES, 'UTF-8'); //the action from the URL

switch($action) {
    case "remove":
        unset($array[$id]); //remove $product_id from the array with
        echo $action . $product_id;
break;
    } 
```

这是表单的 HTML：

```
 <form method="post" action="products_selected.php">
<?php

  $query = "SELECT * FROM products ORDER BY rangeCode, category ASC";
  $result = mysqli_query($dbc, $query);
  while ($row = mysqli_fetch_array($result)) {

      $id = $row['id'];

    echo '<tr valign="bottom">';
    echo '<td>' . stripslashes($row['rangeCode']) . '</td>';
    echo '<td>' . stripslashes($row['category']) . '</a></td>';
    echo '<td>' . stripslashes($row['itemDesc']) . '</a></td>';
    echo '<td>' . number_format($row['points'], 2) . ' points ';
    echo '<input type="checkbox" name="id[]" value="' . $id . '" /></td>';
    echo '</tr>' . "\n\n";
  }
  mysqli_close($dbc);
?>
 <tr><td colspan=13><input type="submit" name="submit" value="Order" /></td></tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:25:06.827

好的。在围绕这个问题进行了一些聊天和合作后，我们发现了一些问题。

1.  需要在使用 $_GET 和 $_POST 数据的代码周围插入检查，以避免对其他变量进行不必要的修改（例如：当用户单击“删除”以从他的选择中删除一个项目时，$_SESSION 数组将使用 $_POST 数组进行更新；因为它不包含任何内容，所以会话数组被清空（这就是会话被认为丢失的原因）：
2.  要从会话中查找和删除项目，我们必须使用从 url 检索到的键并检查它是否存在于会话数组中。这可以在下面的代码中看到。

    ```
    if (isset($_POST['id']))
    { 
      $_SESSION['id'] = $_POST['id']; 
    } 

    if(isset($_GET['key']) && ($_GET['action'] == 'remove'))
    { 
      if (array_key_exists($_GET['key'], $_SESSION['id']))
      { 
        unset($_SESSION['id'][$_GET['key']]); 
      } 
    } 
    ```

对代码进行了其他一些小的更改，但主要问题是解释的问题。

# html - 导航菜单悬停不起作用

> ID：15335387
> 
> 赞同：0
> 
> 时间：2013-03-11T09:45:31.817
> 
> 标签：html, css, hover

我一直在努力让导航菜单的悬停功能正常工作，但它只是不改变颜色，有什么想法吗？

如果我没有针对不同列表项的单独类但我希望它们具有不同的颜色但在悬停时都变为相同的颜色，它会起作用。

```
 #container .navigationContainer .navigation
{
    float: right;
    margin: 44px 0 0 0;
    padding: 0; 
}

#container .navigationContainer .navigation ul
{
    list-style: none;   
}

#container .navigationContainer .navigation li.home
{
    margin: 0 0 0 26px;
    padding: 12px 0 0 0;
    width: 156px;
    display: inline;
    float: left;
    font: normal .75em "Times New Roman", Times, serif;
    color: #369ed1;
    border-top: solid 2px #369ed1;
}

#container .navigationContainer .navigation li.home a,
#container .navigationContainer .navigation li.home a:link,
#container .navigationContainer .navigation li.home a:active,
#container .navigationContainer .navigation li.home a:visited
{
    color: #369ed1;
    text-decoration: none;
    width: 156px;
}

#container .navigationContainer .navigation li.home a:hover
{
    color: #373431;
    border-top: solid 2px #373431;
}
#container .navigationContainer .navigation li.about
{
    margin: 0 0 0 26px;
    padding: 12px 0 0 0;
    width: 156px;
    display: inline;
    float: left;
    font: normal .75em "Times New Roman", Times, serif;
    color: #a6bb54;
    border-top: solid 2px #a6bb54;
}

#container .navigationContainer .navigation li.about a,
#container .navigationContainer .navigation li .about a:link,
#container .navigationContainer .navigation li .about a:active,
#container .navigationContainer .navigation li .about a:visited
{
    color: #a6bb54;
    text-decoration: none;
    width: 156px;
}

#container .navigationContainer .navigation li .about a:hover
{
    color: #373431;
    border-top: solid 2px #373431;
}
#container .navigationContainer .navigation li.portfolio
{
    margin: 0 0 0 26px;
    padding: 12px 0 0 0;
    width: 156px;
    display: inline;
    float: left;
    font: normal .75em "Times New Roman", Times, serif;
    color: #df3f89;
    border-top: solid 2px #df3f89;
}

#container .navigationContainer .navigation li.portfolio a,
#container .navigationContainer .navigation li .portfolio a:link,
#container .navigationContainer .navigation li .portfolio a:active,
#container .navigationContainer .navigation li .portfolio a:visited
{
    color: #df3f89;
    text-decoration: none;
    width: 156px;
}

#container .navigationContainer .navigation li .portfolio a:hover
{
    color: #373431;
    border-top: solid 2px #373431;
}
#container .navigationContainer .navigation .active
{
    margin: 0 0 0 26px;
    padding: 12px 0 0 0;
    width: 156px;
    display: inline;
    float: left;
    font: normal .75em "Times New Roman", Times, serif;
    color: #373431;
    border-top: solid 2px #373431;
}

#container .navigationContainer .navigation .active a,
#container .navigationContainer .navigation .active a:link,
#container .navigationContainer .navigation .active a:active,
#container .navigationContainer .navigation .active a:visited
{
    color: #373431;
    text-decoration: none; 
```

编辑：

html代码：

```
<div class="navigation">
      <ul>
        <li class="active"><a href="index.html">Home</a></li>
        <li class="about"><a href="about.html">About</a></li>
        <li class="portfolio"><a href="portfolio.html">Portfolio</a></li>
      </ul>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:43:43.413

你可以只写`a:hover`or`.about a:hover`而不是`#container .navigationContainer .navigation li.about a:hover`

```
a:hover
{
    color: #373431;
    border-top: solid 2px #373431;
} 
```

**[演示](http://jsfiddle.net/syHxY/2/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:04:37.827

您可以将块设置为`<a>`可能有效的元素。

```
a{display: block;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T12:22:45.493

认为这可能是您正在寻找的。

我也清理了你的 HTML/CSS（希望你不介意！）

```
 <div class="navigation">
    <ul>
      <li class="nav-item home"><a href="index.html">Home</a></li>
      <li class="nav-item about"><a href="about.html">About</a></li>
      <li class="nav-item portfolio"><a href="portfolio.html">Portfolio</a></li>
    </ul>
  </div> 
```

[http://jsfiddle.net/LNkNL/](http://jsfiddle.net/LNkNL/)

看看上面的小提琴。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T09:50:30.823

我注意到您对`<a>`标签的引用不一致。

```
#container .navigationContainer .navigation li.portfolio a,
#container .navigationContainer .navigation li .portfolio a:link,
#container .navigationContainer .navigation li .portfolio a:active,
#container .navigationContainer .navigation li .portfolio a:visited
#container .navigationContainer .navigation li .portfolio a:hover 
```

应该是

```
#container .navigationContainer .navigation li.portfolio a,
#container .navigationContainer .navigation li.portfolio a:link,
#container .navigationContainer .navigation li.portfolio a:active,
#container .navigationContainer .navigation li.portfolio a:visited
#container .navigationContainer .navigation li.portfolio a:hover 
```

IE。`<li>`有`portfolio`课。这可以解释为什么悬停不起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-17T17:36:24.110

注意：我特别相信*不要*重新编写原始海报的代码，而是提供有关如何实现所需解决方案的一般示例和指南，即：

有很多方法可以实现悬停行为，也许最简单的方法是在 CSS 中简单地实现它。

这是一个带有 CSS 样式块的简单 HTML 页面，它定义了一个名为的类`.menu-item`并指定该类的悬停行为：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        /* General body styles: */
        body {
            text-align: center;
            vertical-align: middle;
            font-family: verdana, arial, helvetica;
            font-size: 14px;
        }
        /* menu item class: */
        .menu-item {
            width: 180px;
            margin-left:12px;
        }
        /* menu item hover behavior: */
        .menu-item:hover {
            border-bottom: 5px;
            border-left: 0px;
            border-right: 0px;
            border-top: 0px;
            border-color: red;
            border-style: solid;
        }
    </style>
</head>
<body>
    <!--    
    Specify the menu-item class on a set of  
    span elements to comprise the menu items: 
    -->
    <span class='menu-item'>Item 1</span><span class='menu-item'>Item 2</span><span class='menu-item'>Item 3</span>
</body>
</html> 
```

我`span`在这里为菜单项使用了元素，但您也可以轻松地定义一些`div`带有`inline-block`样式的元素。

**在此处查看一个工作示例：**

[http://conversiondynamics.com/hovertest.html](http://conversiondynamics.com/hovertest.html)

干杯，
-=卡梅伦

# php - 使用正则表达式从 SIP 消息中提取通过标头分支令牌

> ID：15335389
> 
> 赞同：1
> 
> 时间：2013-03-11T09:45:40.563
> 
> 标签：php, regex

我正在尝试`branch=z9hG4bKlmrltg10b801lgkf0681.1`从`Via:`SIP 消息的标头中提取。这是我尝试过的 PHP 代码：

```
preg_match('/.branch=.* + From:/', $msg, $result) 
```

这是 的值`$msg`：

```
"INVITE sip:3310094@mediastream.voip.cabletel.net:5060 SIP/2.0
Via: SIP/2.0/UDP 192.168.50.240:5060;branch=z9hG4bKlmrltg10b801lgkf0681.1
From: DEATON JEANETTE<sip:9123840782@mediastream.voip.cabletel.net:5060>;tag=SDg7j0c01-959bf958-d8f0f4ea-13c4-50029-140b-4d106390-140b" 
```

如何更正我的正则表达式以使其正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:18:19.403

请正确解析您的 SIP 消息。我发现您不太可能只需要分支 ID，您几乎肯定需要有关交易的其他信息，而不是伪呼叫 ID。SIP 消息遵循其他几种协议（包括 HTTP ;-)）使用的标准化消息格式，并且有几个库设计用于解析这种消息格式。

为了演示这是多么简单和强大得多，让我们首先看一下我前段时间编写的 RFC822 消息解析器类（尽管它们最近得到了改进和更新）。这些可用于解析电子邮件，我还有一些简单的 HTTP 消息解析器类，它们从这些类扩展而来：

```
<?php

/**
 * Class representing the basic RFC822 message format
 *
 * @author  Chris Wright
 * @version 1.1
 */
class RFC822Message
{
    /**
     * @var array Collection of headers from the message
     */
    protected $headers = array();

    /**
     * @var string The message body
     */
    protected $body;

    /**
     * Constructor
     *
     * @param array  $headers Collection of headers from the message
     * @param string $body    The message body
     */
    public function __construct($headers, $body)
    {
        $this->headers = $headers;
        $this->body    = $body;
    }

    /**
     * Get the value of a header from the message
     *
     * @param string $name The name of the header
     *
     * @return array The value(s) of the header from the request
     */
    public function getHeader($name)
    {
        $name = strtolower(trim($name));

        return isset($this->headers[$name]) ? $this->headers[$name] : null;
    }

    /**
     * Get the message body
     *
     * @return string The message body
     */
    public function getBody()
    {
        return $this->body;
    }
}

/**
 * Factory which makes RFC822 message objects
 *
 * @author  Chris Wright
 * @version 1.1
 */
class RFC822MessageFactory
{
    /**
     * Create a new RFC822 message object
     *
     * @param array  $headers The request headers
     * @param string $body    The request body
     */
    public function create($headers, $body)
    {
        return new RFC822Message($headers, $body);
    }
}

/**
 * Parser which creates RFC822 message objects from strings
 *
 * @author  Chris Wright
 * @version 1.2
 */
class RFC822MessageParser
{
    /**
     * @var RFC822MessageFactory Factory which makes RFC822 message objects
     */
    protected $messageFactory;

    /**
     * Constructor
     *
     * @param RFC822MessageFactory $messageFactory Factory which makes RFC822 message objects
     */
    public function __construct(RFC822MessageFactory $messageFactory)
    {
        $this->messageFactory  = $messageFactory;
    }

    /**
     * Split a message into head and body sections
     *
     * @param string $message The message string
     *
     * @return array Head at index 0, body at index 1
     */
    protected function splitHeadFromBody($message)
    {
        $parts = preg_split('/\r?\n\r?\n/', ltrim($message), 2);

        return array(
            $parts[0],
            isset($parts[1]) ? $parts[1] : null
        );
    }

    /**
     * Parse the header section into a normalized array
     *
     * @param string $head The message head section
     *
     * @return array The parsed headers
     */
    protected function parseHeaders($head)
    {
        $expr =
        '!
          ^
          ([^()<>@,;:\\"/[\]?={} \t]+)          # Header name
          [ \t]*:[ \t]*
          (
            (?:
              (?:                               # First line of value
                (?:"(?:[^"\\\\]|\\\\.)*"|\S+)   # Quoted string or unquoted token
                [ \t]*                          # LWS
              )*
              (?:                               # Folded lines
                \r?\n
                [ \t]+                          # ...must begin with LWS
                (?:
                  (?:"(?:[^"\\\\]|\\\\.)*"|\S+) # ...followed by quoted string or unquoted tokens
                  [ \t]*                        # ...and maybe some more LWS
                )*
              )*
            )?
          )
          \r?$
        !smx';
        preg_match_all($expr, $head, $matches);

        $headers = array();
        for ($i = 0; isset($matches[0][$i]); $i++) {
            $name = strtolower($matches[1][$i]);
            if (!isset($headers[$name])) {
                $headers[$name] = array();
            }

            $value = preg_replace('/\s+("(?:[^"\\\\]|\\\\.)*"|\S+)/s', ' $1', $matches[2][$i]);

            $headers[$name][] = $value;
        }

        return $headers;
    }

    /**
     * Create a message object from a string
     *
     * @param string $message The message string
     *
     * @return RFC822Message The parsed message object
     */
    public function parseMessage($message)
    {
        list($head, $body) = $this->splitHeadFromBody($message);
        $headers = $this->parseHeaders($head);

        return $this->requestFactory->create($headers, $body);
    }
} 
```

如果您忽略了用于解析标题的可怕正则表达式，那就没有什么特别可怕的了：-P - 说真的，这些类可以不加修改地用于解析电子邮件的标题部分，这是 RFC822 格式消息的基础。

SIP 在 HTTP 上建模自己，因此通过对 HTTP 消息解析类进行一些相当简单的修改，我们可以轻松地将它们调整为 SIP。让我们看看那些 - 在这些课程中，我（或多或少）进行了搜索`HTTP`并将其替换为`SIP`：

```
<?php

/**
 * Abstract class representing a SIP message
 *
 * @author  Chris Wright
 * @version 1.0
 */
abstract class SIPMessage extends RFC822Message
{
    /**
     * @var string The message protocol version
     */
    protected $version;

    /**
     * Constructor
     *
     * @param array  $headers Collection of headers from the message
     * @param string $body    The message body
     * @param string $version The message protocol version
     */
    public function __construct($headers, $body, $version)
    {
        parent::__construct($headers, $body);
        $this->version = $version;
    }

    /**
     * Get the message protocol version
     *
     * @return string The message protocol version
     */
    public function getVersion()
    {
        return $this->version;
    }
}

/**
 * Class representing a SIP request message
 *
 * @author  Chris Wright
 * @version 1.0
 */
class SIPRequest extends SIPMessage
{
    /**
     * @var string The request method
     */
    private $method;

    /**
     * @var string The request URI
     */
    private $uri;

    /**
     * Constructor
     *
     * @param array  $headers The request headers
     * @param string $body    The request body
     * @param string $version The request protocol version
     * @param string $method  The request method
     * @param string $uri     The request URI
     */
    public function __construct($headers, $body, $version, $method, $uri)
    {
        parent::__construct($headers, $body, $version);
        $this->method  = $method;
        $this->uri     = $uri;
    }

    /**
     * Get the request method
     *
     * @return string The request method
     */
    public function getMethod()
    {
        return $this->method;
    }

    /**
     * Get the request URI
     *
     * @return string The request URI
     */
    public function getURI()
    {
        return $this->uri;
    }
}

/**
 * Class representing a SIP response message
 *
 * @author  Chris Wright
 * @version 1.0
 */
class SIPResponse extends SIPMessage
{
    /**
     * @var int The response code
     */
    private $code;

    /**
     * @var string The response message
     */
    private $message;

    /**
     * Constructor
     *
     * @param array  $headers The request headers
     * @param string $body    The request body
     * @param string $version The request protocol version
     * @param int    $code    The response code
     * @param string $message The response message
     */
    public function __construct($headers, $body, $version, $code, $message)
    {
        parent::__construct($headers, $body, $version);
        $this->code    = $code;
        $this->message = $message;
    }

    /**
     * Get the response code
     *
     * @return int The response code
     */
    public function getCode()
    {
        return $this->code;
    }

    /**
     * Get the response message
     *
     * @return string The response message
     */
    public function getMessage()
    {
        return $this->message;
    }
}

/**
 * Factory which makes SIP request objects
 *
 * @author  Chris Wright
 * @version 1.0
 */
class SIPRequestFactory extends RFC822MessageFactory
{
    /**
     * Create a new SIP request object
     *
     * The last 3 arguments of this method are only optional  to prevent PHP from triggering
     * an E_STRICT at compile time. IMO this particular error is itself an error on the part
     * of the PHP designers,  and I don't feel bad  about about this workaround,  even if it
     * does mean the signature is technically wrong. It is the lesser of two evils.
     *
     * @param array  $headers The request headers
     * @param string $body    The request body
     * @param string $version The request protocol version
     * @param string $method  The request method
     * @param string $uri     The request URI
     */
    public function create($headers, $body, $version = null, $method = null, $uri = null)
    {
        return new SIPRequest($headers, $body, $version, $method, $uri);
    }
}

/**
 * Factory which makes SIP response objects
 *
 * @author  Chris Wright
 * @version 1.0
 */
class SIPResponseFactory extends RFC822MessageFactory
{
    /**
     * Create a new SIP response object
     *
     * The last 3 arguments of this method are only optional  to prevent PHP from triggering
     * an E_STRICT at compile time. IMO this particular error is itself an error on the part
     * of the PHP designers,  and I don't feel bad  about about this workaround,  even if it
     * does mean the signature is technically wrong. It is the lesser of two evils.
     *
     * @param array  $headers The response headers
     * @param string $body    The response body
     * @param string $version The response protocol version
     * @param int    $code    The response code
     * @param string $message The response message
     */
    public function create($headers, $body, $version = null, $code = null, $message = null)
    {
        return new SIPResponse($headers, $body, $version, $code, $message);
    }
}

/**
 * Parser which creates SIP message objects from strings
 *
 * @author  Chris Wright
 * @version 1.0
 */
class SIPMessageParser extends RFC822MessageParser
{
    /**
     * @var SIPRequestFactory Factory which makes SIP request objects
     */
    private $requestFactory;

    /**
     * @var SIPResponseFactory Factory which makes SIP response objects
     */
    private $responseFactory;

    /**
     * Constructor
     *
     * @param SIPRequestFactory  $requestFactory  Factory which makes SIP request objects
     * @param SIPResponseFactory $responseFactory Factory which makes SIP response objects
     */
    public function __construct(SIPRequestFactory $requestFactory, SIPResponseFactory $responseFactory)
    {
        $this->requestFactory  = $requestFactory;
        $this->responseFactory = $responseFactory;
    }

    /**
     * Remove the request line from the message and parse into tokens
     *
     * @param string $head The message head section
     *
     * @return array The parsed request line at index 0, the remainder of the message at index 1
     *
     * @throws \DomainException When the request line of the message is invalid
     */
    private function removeAndParseRequestLine($head)
    {
        // Note: this method  forgives a couple of minor standards violations, mostly for benefit
        // of some older  Polycom phones and for Voispeed,  who seem to make  stuff up as they go
        // along.  It also  treats the  whole line as  case-insensitive  even though  methods are
        // officially case-sensitive,  because having two different casings of the same verb mean
        // different things makes no sense semantically or implementationally.
        // Side note, from RFC3261:
        // > The SIP-Version string is case-insensitive, but implementations MUST send upper-case
        // Wat. Go home Rosenberg, et. al., you're drunk.

        $parts = preg_split('/\r?\n/', $head, 2);

        $expr =
          '@^
            (?:
              ([^\r\n \t]+) [ \t]+ ([^\r\n \t]+) [ \t]+ SIP/(\d+\.\d+) # request
             |
              SIP/(\d+\.\d+) [ \t]+ (\d+) [ \t]+ ([^\r\n]+)            # response
            )
           $@ix';
        if (!preg_match($expr, $parts[0], $match)) {
            throw new \DomainException('Request-Line of the message is invalid');
        }

        if (empty($match[4])) { // request
            $requestLine = array(
                'method'  => strtoupper($match[1]),
                'uri'     => $match[2],
                'version' => $match[3]
            );
        } else { // response
            $requestLine = array(
                'version' => $match[4],
                'code'    => (int) $match[5],
                'message' => $match[6]
            );
        }

        return array(
            $requestLine,
            isset($parts[1]) ? $parts[1] : ''
        );
    }

    /**
     * Create the appropriate message object from a string
     *
     * @param string $message The message string
     *
     * @return SIPRequest|SIPResponse The parsed message object
     *
     * @throws \DomainException When the message string is not valid SIP message
     */
    public function parseMessage($message)
    {
        list($head, $body) = $this->splitHeadFromBody($message);
        list($requestLine, $head) = $this->removeAndParseRequestLine($head);
        $headers = $this->parseHeaders($head);

        if (isset($requestLine['uri'])) {
            return $this->requestFactory->create(
                $headers,
                $body,
                $requestLine['version'],
                $requestLine['method'],
                $requestLine['uri']
            );
        } else {
            return $this->responseFactory->create(
                $headers,
                $body,
                $requestLine['version'],
                $requestLine['code'],
                $requestLine['message']
            );
        }
    }
} 
```

似乎有很多代码只是为了提取一个标头值，不是吗？嗯，是的。但这*不仅仅是*它的作用。它将整个消息解析为一个数据结构，该结构提供对任意数量信息的轻松访问，允许（或多或少）标准可能向您抛出的任何内容。

那么，让我们看看你将如何实际使用它：

```
// First we create a parser object
$messageParser = new SIPMessageParser(
  new SIPRequestFactory,
  new SIPResponseFactory
);

// Parse the message into an object
try {
  $message = $messageParser->parseMessage($msg);
} catch (Exception $e) {
  // The message parsing failed, handle the error here
}

// Get the value of the Via: header
$via = $message->getHeader('Via');

// SIP is irritatingly non-specific about the format of branch IDs. This
// expression matches either a quoted string or an unquoted token, which is
// about all that you can say for sure about arbitrary implementations.
$expr = '/branch=(?:"((?:[^"\\\\]|\\\\.)*)"|(.+?)(?:\s|;|$))/i';

// NB: this assumes the message has a single Via: header and a single branch ID.
// In reality this is rarely the case for messages that are received, although
// it is usually the case for messages before they are sent.
if (!preg_match($expr, $via[0], $matches)) {
  // The Via: header does not contain a branch ID, handle this error
}

$branchId = !empty($matches[2]) ? $matches[2] : $matches[1];

var_dump($branchId); 
```

[看到它工作](http://codepad.viper-7.com/iN2KAT)

对于手头的问题，这个答案几乎可以肯定是大材小用。但是，我认为这是解决这个问题的*正确*方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:03:14.037

试试这个正则表达式。它检查代码后是否有空格或换行符`branch`。你想要的结果总是存储在`$output[0]`

```
$str = "INVITE sip:3310094@mediastream.voip.cabletel.net:5060 SIP/2.0
Via: SIP/2.0/UDP 192.168.50.240:5060;branch=z9hG4bKlmrltg10b801lgkf0681.1 From: DEATON JEANETTE<sip:9123840782@mediastream.voip.cabletel.net:5060>;tag=SDg7j0c01-959bf958-d8f0f4ea-13c4-50029-140b-4d106390-140b";

preg_match('/(branch=.*)( |\r\n)/', $str, $output);
print_r( $output ); // $output[0] is what you need 
```

示例： [http ://codepad.viper-7.com/Gj0lWD](http://codepad.viper-7.com/Gj0lWD)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T10:07:36.323

您可以像这样使用前瞻断言：

```
preg_match_all('/.branch=(.*?)(?=^\S|\Z)/sm', $msg, $matches); 
```

*在这里，`(?=^\S|\Z)`断言一个新行，后跟一个非空格（也称为折叠标题）或主题结尾。这是比赛应该结束的地方。*

或者只是匹配`branch=`到行尾：

```
preg_match_all('/.branch=(.*)/m', $msg, $matches); 
```

*适用于未折叠的标题。*

另请参阅：[HTTP 标头的基本规则](http://www.w3.org/Protocols/rfc2616/rfc2616-sec2.html#sec2.2)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T09:52:58.473

尝试这个

```
$str = "INVITE sip:3310094@mediastream.voip.cabletel.net:5060 SIP/2.0
Via: SIP/2.0/UDP 192.168.50.240:5060;branch=z9hG4bKlmrltg10b801lgkf0681.1
From: DEATON JEANETTE<sip:9123840782@mediastream.voip.cabletel.net:5060>;tag=SDg7j0c01-959bf958-d8f0f4ea-13c4-50029-140b-4d106390-140b";

preg_match('/branch=(.*)From:/i', $str, $output);
print_r( $output ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T09:57:47.477

```
preg_match('/branch=.*/i', $msg, $result);
print_r($result); 
```

会产生类似的东西：

```
Array
(
    [0] => branch=z9hG4bKlmrltg10b801lgkf0681.1
) 
```

# azure-table-storage - 从 Lightswitch 2012 连接到 Windows azure 存储表

> ID：15335390
> 
> 赞同：0
> 
> 时间：2013-03-11T09:45:41.547
> 
> 标签：azure-table-storage, lightswitch-2012

我需要从 Lightswitch 2012 应用程序连接到 Windows azure 存储表。我找到[了这个](http://visualstudiogallery.msdn.microsoft.com/6a010249-4786-4d91-9aef-eda8ec474a9f)扩展，但它只适用于 Microsoft Visual Studio 2010 的任何 adices 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:22:05.193

好吧，似乎没有人对 LS 有任何了解......所以我找到了怎么做......我下载了 VS2010 和 LS2011，然后我将项目连接到我的表并剪切项目并将其粘贴到 2012 年更新参考中的解决方案中，并且它有效。 .

# php - /function.unserialize 出现在 Google 网站管理员工具中我的 404 URL 的末尾

> ID：15335392
> 
> 赞同：1
> 
> 时间：2013-03-11T09:45:43.483
> 
> 标签：php, jquery, url, google-search-console

我在 Google 网站管理员工具中的网站上发现的 404 错误大幅增加，当我查看 404 列表时，我发现它们中的大多数都在 URL 的末尾附加了相同的 php 函数（ **/function.unserialize** )，我认为我的整个网站都没有使用这个功能，（或者它可能是 jquery 吗？）无论哪种方式，有人知道为什么会这样做吗？

![在此处输入图像描述](../Images/991a5c5aed3111b357cf2d800517b1fa.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:20:01.363

它似乎不是 jQuery。
你可能有一个 PHP 错误：

`Notice: unserialize() [function.unserialize]: Error at offset 0 of 172 bytes in ...`

来自[PHP 手册](http://php.net/manual/en/function.unserialize.php)：

> 如果传递的字符串不是不可序列化的，则返回 FALSE 并发出 E_NOTICE。

建议：

1）修复错误报告级别。您的生产网站不应显示错误。这将解决症状。
2）搜索导致问题的原因。某些数据序列化错误（在您的情况下可能是某些 url 部分）。调试，查找并杀死问题源。

# c++ - 围绕绝对轴旋转 3d 模型

> ID：15335399
> 
> 赞同：0
> 
> 时间：2013-03-11T09:46:26.620
> 
> 标签：c++, math, opengl, rotation

我不知道如何将鼠标拖动转换为围绕图像平面的 Ox 和 Oy 旋转。[我按照这里](https://stackoverflow.com/questions/107413/best-way-to-translate-mouse-drag-motion-into-3d-rotation-of-an-object)
的第一个答案，我将模型视图矩阵存储在一个数组中，并在每次鼠标移动时更新它。并且与鼠标从前一个位置的增量成正比。 `alpha``beta`

此代码在鼠标移动时更新旋转：

```
glLoadMatrixf(currentModelViewMatrix);
glRotatef(beta,0,1,0);
glRotatef(alpha,1,0,0);
glGetFloatv(GL_MODELVIEW_MATRIX, currentModelViewMatrix); 
```

[我从这个](http://www.sunsetlakesoftware.com/2008/08/05/lessons-molecules-opengl-es)解释的结尾尝试了解决方案，但没有任何区别。

只有 给出的旋转`beta`是绝对的， 给出的旋转`alpha`是围绕模型中的一个轴，当围绕第一个轴旋转时，该轴会转动。我不知道如何使第二次旋转是绝对的。现在的方式对用户来说似乎并不直观。

* * *

**编辑：** 增量代码：

```
GLfloat currentModelViewMatrix[16];
GLfloat whole[16];
void glob()
{ 
  glLoadIdentity();
  glRotatef(beta,0,1,0);
  glRotatef(alpha,1,0,0);
  glMultMatrixf(currentModelViewMatrix);
  glGetFloatv(GL_MODELVIEW_MATRIX, currentModelViewMatrix); 

  glLoadIdentity();
  glTranslatef(0,0,-20);
  glMultMatrixf(currentModelViewMatrix);
  glGetFloatv(GL_MODELVIEW_MATRIX,whole); 

  alpha=beta=0;
} 
```

在每个模型之前，加载矩阵：

```
glLoadMatrixf(whole); 
```

完整代码：

```
#include "math.h"
#include "string.h"
#include "stdio.h"
#include "GL/freeglut.h"
#include "GL/gl.h"
#include "GL/glu.h"
float alpha,beta;

void key(int key, int x, int y)
{   printf("%d",key);
    switch(key)
    {   case GLUT_KEY_RIGHT:
            printf("right\n");
            break;
        case GLUT_KEY_LEFT:
            printf("left\n");
            break;
        case GLUT_KEY_UP:
            printf("top\n");
            break;
        case GLUT_KEY_DOWN:
            printf("bottom\n");
            break;
    }
    glutPostRedisplay();
    fflush(stdout); 
}

void otherkeys(unsigned char key,int x,int y)
{   printf("%c\n",key);
    fflush(stdout);
    switch(key)
    {   case '+':
            printf("plus\n");
            break;
        case '-':
            printf("minus\n");
            break;
        case 'w':
                alpha+=10;
            break;
        case 's':
                alpha-=10;
            break;
        case 'd':
                beta+=10;
            break;
        case 'a':
                beta-=10;
            break;
    }
    glutPostRedisplay();
}
void drawCube()
{   int i,j,d;
    glBegin(GL_LINES);
        for(i=0;i<8;i++)
        {   for(j=i+1;j<8;j++)
            {   d=j^i;
                if(d==1||d==2||d==4)
                {   glVertex3i(i%2,i/2%2,i/4%2 );   
                    glVertex3i(j%2,j/2%2,j/4%2 );   
                }                   
            }
        }
    glEnd();
}

GLfloat currentModelViewMatrix[16];
GLfloat whole[16];
void glob()
{   
    glLoadIdentity();
    glRotatef(beta,0,1,0);
    glRotatef(alpha,1,0,0);
    glMultMatrixf(currentModelViewMatrix);
    glGetFloatv(GL_MODELVIEW_MATRIX, currentModelViewMatrix);   

    glLoadIdentity();
    glTranslatef(0,0,-20);
    glMultMatrixf(currentModelViewMatrix);
    glGetFloatv(GL_MODELVIEW_MATRIX,whole); 

    alpha=beta=0;
}
void renderFunction()
{   int i;
    glClearColor(0.0,0.0,0.0,0.0);
    glClear(GL_COLOR_BUFFER_BIT);   
    glColor3f(1.0,1.0,1.0); 
    glMatrixMode(GL_PROJECTION); 
        glLoadIdentity();
//              glRotatef(angle2,0.0,0.0,1.0);
        gluPerspective(60, 1.333, 0.1, 100);

    glMatrixMode(GL_MODELVIEW);

    glColor3f(1.0,0.0,0.0); 
    for(i=1;i<8;i++)
    {   
        glLoadMatrixf(whole);   
        glTranslatef(i*2.0,0,0);
        drawCube();
    }

    glColor3f(0.0,1.0,0.0); 
    for(i=1;i<6;i++)
    {
        glLoadMatrixf(whole);   
        glTranslatef(0,i*2.0,0);
        drawCube();
    }

    glColor3f(0.0,0.0,1.0); 
    for(i=0;i<5;i++)
    {
        glLoadMatrixf(whole);   
        glTranslatef(0,0,i*2.0);
        drawCube();
    }

    glFlush();
}

/*mouse*/
int prevx,prevy,dx,dy;
void rotate(int dx,int dy)
{   printf("%f %f\n",dy/10.0,dy/10.0);
    alpha=dy/2.0;
    beta=dx/2.0;
    glob();
}

void passive(int x,int y)
{   prevx=x;prevy=y;}

void active(int x,int y)
{   dx=x-prevx;
    prevx=x;
    dy=y-prevy;
    prevy=y;
    rotate(dx,dy);
}

void globinit()
{
    glLoadIdentity();
    glGetFloatv(GL_MODELVIEW_MATRIX, currentModelViewMatrix);   

    glLoadIdentity();
    glTranslatef(0,0,-20);
    glGetFloatv(GL_MODELVIEW_MATRIX, whole);    
}
int main (int argc, char* argv[])
{       
    glutInit(&argc,argv);

    glutInitDisplayMode(GLUT_SINGLE);
    glutInitWindowSize(800,600);
    glutInitWindowPosition(100,100);
    glutCreateWindow("Open GL bla bla");
    glutDisplayFunc(renderFunction);
    glutIdleFunc(renderFunction);
    glutSpecialFunc(key);
    glutKeyboardFunc(otherkeys);
    glutMotionFunc(active);
    glutPassiveMotionFunc(passive);
    globinit();
    glutMainLoop(); 
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:01:41.700

尝试以下操作：

```
glLoadIdentity();
glRotatef(beta,0,1,0);
glRotatef(alpha,1,0,0);
glMultMatrixf(currentModelViewMatrix);
glGetFloatv(GL_MODELVIEW_MATRIX, currentModelViewMatrix); 
```

由于改变了顺序，旋转是在全局坐标系而不是局部坐标系中执行的。

# constraints - 删除 _sql_constraints

> ID：15335401
> 
> 赞同：7
> 
> 时间：2013-03-11T09:46:28.397
> 
> 标签：constraints, openerp

我想删除`_sql_constraints`.

例如，`account_invoice.py`在数字字段上有一个限制。现在我想删除它。

谁能知道如何处理它？

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T06:26:19.627

您可以使用以下查询删除约束。

```
SELECT *
FROM information_schema.constraint_table_usage
WHERE table_name = 'account_invoice';

ALTER TABLE account_invoice DROP CONSTRAINT account_invoice_number_uniq; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T05:18:05.997

我想你在谈论

```
_sql_constraints = [
    ('number_uniq', 'unique(number, company_id, journal_id, type)', 'Invoice Number must be unique per Company!'),
] 
```

如果从`.py`文件中删除，则不会从数据库中删除。如果要删除，则必须使用`DROP CONSTRAINT`.

这将从表中删除约束，您可以添加重复条目。

# java - xstream 可以反序列化复杂的数组吗？

> ID：15335404
> 
> 赞同：1
> 
> 时间：2013-03-11T09:46:42.683
> 
> 标签：java, arrays, json, xstream

这些天我学习xstream。

但我发现其主页中的 xstream json 教程非常简单。我有一个数组如下：

```
{
    "mails":[
                {
                    "uid":"ZC2027-mXOmcAtkfiztS0sEeJlkU25",
                    "relatedCardNums":"8299,0000,1531|8299,0000,1531",
                    "houseHolder":"",
                    "subject":"no-subject",
                    "receiveTime":"2012-05-27 00:00:00",
                    "bankName":"上海银行",
                    "cards":[]
                }
        ],
    "dealedNum":330,
    "nextRequestDelay":"1",
    "percent":"0",
    "filterNum":410,
    "resCode":"01",
    "dealedBillNum":43,
    "resMsg":"正在解析"
} 
```

我想将此 json 字符串转换为 GetMailsDataResponseDto，但我不知道该怎么做？你能帮帮我吗？

```
package com.fund.etrading.ebankapp.base.credit.cardniu.ecardniu.dto;

import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import com.fund.etrading.ebankapp.base.credit.utils.FileUtils;
import com.thoughtworks.xstream.XStream;
import com.thoughtworks.xstream.io.json.JettisonMappedXmlDriver;

public class GetMailsDataResponseDto extends ResponseBaseDto{
    protected int dealedNum;
    protected String nextRequestDelay;
    protected String percent;
    protected int filterNum;
    protected int dealedBillNum;

    protected List mails = new ArrayList();

    public List getMails() {
        return mails;
    }

    public int getDealedNum() {
        return dealedNum;
    }

    public String getNextRequestDelay() {
        return nextRequestDelay;
    }

    public String getPercent() {
        return percent;
    }

    public int getFilterNum() {
        return filterNum;
    }

    public int getDealedBillNum() {
        return dealedBillNum;
    }

    public void fromJson(String json){
        try {
            json = FileUtils.get_content("C:\\Documents and Settings\\Administrator\\workspace\\99fund_java\\src\\com\\fund\\etrading\\ebankapp\\base\\credit\\新建 文本文档 (2).txt");
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        json = "{\"root\":" + json + "}";

        XStream xstream = new XStream(new JettisonMappedXmlDriver());
        xstream.alias("root", this.getClass());

        //xstream.addImplicitCollection(this.getClass(), "mails");
        xstream.alias("mail", MailDto.class);

        //xstream.aliasField("cards", MailDto.class, "cards");
        //xstream.aliasField("currencyData", CardDto.class, "currencyData");
        //xstream.aliasField("data", CurrencyDataDto.class, "data");

        xstream.fromXML(json, this);
    }
}

package com.fund.etrading.ebankapp.base.credit.cardniu.ecardniu.dto;

import java.util.ArrayList;
import java.util.List;

import com.fund.etrading.ebankapp.base.credit.BaseDto;

public class MailDto extends BaseDto{
    protected String uid;
    protected String relatedCardNums;
    protected String houseHolder;
    protected String subject;
    protected String receiveTime;
    protected String bankName;

    protected List cards = new ArrayList();

    public String getUid() {
        return uid;
    }

    public String getRelatedCardNums() {
        return relatedCardNums;
    }

    public String getHouseHolder() {
        return houseHolder;
    }

    public String getSubject() {
        return subject;
    }

    public String getReceiveTime() {
        return receiveTime;
    }

    public String getBankName() {
        return bankName;
    }

    public List getCards() {
        return cards;
    }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-12T01:24:48.530

If you want to convert json string to your custom class(ex.GetMailsDataResponseDto), I recommend Google Gson. If you use Gson, yon don't need fromJosn() method in GetMailsDataResponseDto class.

If you only use json parsing and have experiences of java script, I recommend [Djson](https://github.com/jungkoo/djson_parser) parser(java library).

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-12T03:29:09.000

“Djson 解析版本 0.8a”——http: [//blog.indf.net/category/Apps/djson](http://blog.indf.net/category/Apps/djson)

j1.txt - 提示：“无 BOM 和 UTF-8”

```
....
   public void fromJson(String json){
        //(real-code)--start
        //Var var = Djson.parse(json);
        //(real-code)--end

        //--test-code--start
        Var var = null;
        try {
            var = Djson.parse(new File("d:\\j1.txt"));
        } catch (IOException e) {
            e.printStackTrace();
        }
        //--test-code--end

        this.dealedNum        = var.get("dealedNum").toInt();
        this.nextRequestDelay = var.get("nextRequestDelay").toString();
        this.percent          = var.get("percent").toString();
        this.filterNum        = var.get("filterNum").toInt();
        this.dealedBillNum  = var.get("dealedBillNum").toInt();

        for(int i=0; i<var.get("mails").size(); i++) {
            this.mails.add(var.get("mails").get(i).toObject()); // MAP type setting...
        }       
    } 
```

# jquery - Jquery：弹出框点击事件

> ID：15335405
> 
> 赞同：1
> 
> 时间：2013-03-11T09:46:42.893
> 
> 标签：jquery, html, css, popup

我坚持这一点，为了在 Jquery 中的超链接的 onclick 中显示 HTMl 的特定 div，我尝试了以下代码并没有得到答案，

```
$(function() {
    var moveLeft = 20;
    var moveDown = 10;

    $('a#trigger').click(function(e) {
        $('div#pop-up').show()
            .css('top', e.pageY + moveDown)
            .css('left', e.pageX + moveLeft)
            .appendTo('body');
        }, function() {
            $('div#pop-up').hide();
    });
    $('a#trigger').mousemove(function(e) {
        $("div#pop-up").css('top', e.pageY + moveDown).css('left', e.pageX + moveLeft);
    });
}); 
```

在这里我尝试`hover()`了方法，而不是`click()`方法，当我放它时`click()`它不会起作用，但我需要`click()`方法来工作，我该如何实现它？请帮忙...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:59:06.257

**因为 UNLIKE hover()，click() 方法只支持单个处理程序。**
看到这个：**[http ://api.jquery.com/click/](http://api.jquery.com/click/)**

因此，在您的情况下，请注意代码片段：

```
 $('a#trigger').click(function(e) {
                    $('div#pop-up').show()
                    .css('top', e.pageY + moveDown)
                    .css('left', e.pageX + moveLeft)
                    .appendTo('body');
                }, function() {
                    $('div#pop-up').hide();
                }); 
```

您打算在单击时执行的第一个函数**实际上是作为无意义的事件数据传递的**。**每次单击#trigger 时，它都是正在执行的第二个函数。**

你也可以这样编码：

```
var triggerState = 0;
$('a#trigger').click(function(e) {
    if (triggerState === 0) {
        $('div#pop-up').show()
        .css('top', e.pageY + moveDown)
        .css('left', e.pageX + moveLeft)
        .appendTo('body');
        triggerState = 1;
    }
    else if (triggerState === 1) {
        $('div#pop-up').hide();
        triggerState = 0;
    }
}); 
```

我认为您错误地认为单击（例如悬停）接受不同状态的两个函数-不幸的是，没有- mouseover 和 mouseout 是明确的状态可跟踪的，但是，“交替单击”不是明确的状态可跟踪的，因此 jQuery click 没有t 提供此设施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:54:11.177

试试这个：

```
$(function() {
    var moveLeft = 20;
    var moveDown = 10;

    $('a#trigger').click(function(e) {

        if($('div#pop-up').length)
        {
            $('div#pop-up').toggle();
        }
        else
        {
             $('div#pop-up')
                .css({'top': e.pageY + moveDown,'left': e.pageX + moveLeft})
                .appendTo('body').show();
        }
    });

    $('a#trigger').mousemove(function(e) {
        $("div#pop-up").css({'top': e.pageY + moveDown,'left': e.pageX + moveLeft});
    });
}); 
```

# git - 是否可以为系统中的所有用户设置 Git 配置？

> ID：15335407
> 
> 赞同：8
> 
> 时间：2013-03-11T09:46:44.870
> 
> 标签：git

假设我需要设置一个系统中每个用户都必须使用的 git 别名。与其要求每个用户将此配置添加到他们的`$HOME/.gitconfig`中，是否可以为所有用户全局声明一次？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-11T09:59:22.360

[文档](https://www.kernel.org/pub/software/scm/git/docs/git-config.html#FILES)说：

> 如果没有用 明确设置`--file`，有四个文件`git config`将在其中搜索配置选项：
> 
> **`$GIT_DIR/config`**
> 存储库特定的配置文件。
> 
> **`~/.gitconfig`**
> 用户特定的配置文件。也称为“全局”配置文件。
> 
> **`$XDG_CONFIG_HOME/git/config`**
> 第二个用户特定的配置文件。如果`$XDG_CONFIG_HOME`未设置或为空，`$HOME/.config/git/config`将使用。此文件中设置的任何单值变量都将被`~/.gitconfig`. 如果你有时使用旧版本的 Git，最好不要创建这个文件，因为最近才添加了对这个文件的支持。
> 
> **`$(prefix)/etc/gitconfig`**
> 系统范围的配置文件。

所以：

*   `/etc/gitconfig`是全球性的
*   `~/.gitconfig`并且`$XDG_CONFIG_HOME/git/config`是每个用户
*   `$GIT_DIR/config`是每个回购

为了设置系统范围的选项，请执行`git config --add --system <OPTION>`

# spring - 如何在 JAX-WS 处理程序的 Spring 配置中使用列表作为参考？

> ID：15335410
> 
> 赞同：1
> 
> 时间：2013-03-11T09:46:50.923
> 
> 标签：spring, jax-ws

我正在使用 JAX-WS 的 Spring 扩展，并且在我的 Spring 配置中使用列表时遇到问题：

这是工作配置：

```
<wss:binding url="/services/demo">
    <wss:service>
        <ws:service bean="#demoEndpoint">
            <ws:handlers>
                <ref bean="handler1"/>
                <ref bean="handler2"/>
            </ws:handlers>
        </ws:service>
    </wss:service>
</wss:binding> 
```

由于我有更多端点，应该使用相同的处理程序集，我想在单个配置中定义处理程序列表。

但是这个配置不起作用：

```
<util:list id="myHandlers">
    <ref bean="handler1"/>
    <ref bean="handler2"/>
</util:list>

<wss:binding url="/services/demo">
    <wss:service>
        <ws:service bean="#demoEndpoint">
            <ws:handlers>
                <ref bean="myHandlers"/>
            </ws:handlers>
        </ws:service>
    </wss:service>
</wss:binding> 
```

我得到以下异常：

```
Caused by: java.lang.IllegalStateException: Cannot convert value of type [java.util.ArrayList] to required type [javax.xml.ws.handler.Handler] for property 'handlers[0]': no matching editors or conversion strategy found
    at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:264)
    at org.springframework.beans.TypeConverterDelegate.convertToTypedCollection(TypeConverterDelegate.java:559)
    at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:199)
    at org.springframework.beans.BeanWrapperImpl.convertIfNecessary(BeanWrapperImpl.java:448)
    ... 66 more 
```

这是 org.jvnet.jax_ws_commons.spring.SpringService 中对应的 setter：

```
public void setHandlers(List<Handler> handlers) {
    this.handlers = handlers;
} 
```

# plot - 按强度/暗度/明度排列 ascii 字符

> ID：15335412
> 
> 赞同：0
> 
> 时间：2013-03-11T09:47:00.490
> 
> 标签：plot, ascii-art

我想快速输出在服务器上计算的结果的等高线图。我使用 putty 登录，因此输出应该是基于文本的（我知道如何发送图形，我更喜欢文本）。

要输出等高线图，我需要知道每个符号的光强度。有这样的桌子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-26T09:03:11.937

使用库，例如[​​ aalib](http://aa-project.sourceforge.net/aalib/)或[libcaca](http://sam.zoy.org/projects/libcaca/)。虽然不知道表...

编辑：

强度是特定于字体的...

# java - Hibernate 无法加载 10,000 个对象

> ID：15335415
> 
> 赞同：1
> 
> 时间：2013-03-11T09:47:12.997
> 
> 标签：java, hibernate, session, performance

我想通过休眠加载超过 10,000 个对象，但它不能这样做。它不会在日志中写入这些行。

```
 Not closing pre-bound Hibernate Session after HibernateTemplate
 Found thread-bound Session for HibernateTemplate 
```

我只是想知道是否有任何有效的方法可以做到这一点，否则我们将无法在休眠会话中加载这么多对象

# javascript - 在 Javascript 中创建 JSON

> ID：15335416
> 
> 赞同：0
> 
> 时间：2013-03-11T09:47:14.497
> 
> 标签：javascript, json

我想像这样在 Javascript 中创建一个动态 JSON 数组：

```
var jsonData = {
    "Tasks" : [
        {
            "__metadata" : {
                "uri" : "...",
                "type" : "..."
            },
            "ID" : "...",
            "Category" : "..",
            // ...
        },
        {
            "__metadata" : {
                "uri" : "...",
                "type" : "..."
            },
            "ID" : "...",
            "Category" : "..",
            // ...
        },
        // others tasks
    ], "__count" : "2"
}; 
```

我发现了如何在 Javascript 中创建 JSON，但不是使用这种语法。那么用“Tasks”数组创建 JSON 对象并在其中添加项目的好方法是什么？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:03:23.003

可能是这样的？

```
function Metadata(uri,type)
{
    this.uri = uri;
    this.type = type;
}

function Task(metadata, id, category)
{
    this.__metadata = metadata;
    this.ID = id;
    this.Category = category;
}

var tasks = [new Task(new Metadata('foo','bar'), 1, 'blah'), new Task(new Metadata('foo1', 'bar1'), 2, 'blah2')];

document.write(JSON.stringify({"Tasks": tasks, "__count": tasks.length})); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:07:16.623

使用构造函数创建对象并使用 JSON api。

```
var jsonData = {};
jsonData.Tasks = new Array();

var Metadata = function(uri, type){
  this.uri = uri;
  this.type = type;
}

var Task = function (metadata, id, category){
  this.__metadata = metadata;
  this.ID = id;
  this.Category = category;
}

var tasks = jsonData.Tasks;

tasks.push(
  new Task(
    new Metadata("someUri", "someType"),
    1,
    "someCategory")
); 
```

jsbin：[工作示例](http://jsbin.com/uhasof/14/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T10:12:16.943

我正在使用此代码并且它有效：

```
var jsonData = {};
jsonData.Tasks = [];

var count = 0;

for(...) {
    jsonData.Tasks.push({
        "__metadata" : {
            "uri" : "...",
            "type" : "..."
        },
        "ID" : "...",
        "Category" : "...",
    });

    count++;
}

jsonData.__count = count; 
```

感谢您的回答和反应！

# matlab - Mex 中的内存泄漏

> ID：15335424
> 
> 赞同：2
> 
> 时间：2013-03-11T09:47:28.103
> 
> 标签：matlab, memory-leaks, mex

我在下面做一个循环`dims = [1024 768 256]`。我想将`block_iter`（1到16）加载的一组块读入硬件的RAM中。内存调用似乎显示内存泄漏。我在某处做错了吗？

```
for (block_iter = 1; block_iter <= num_blocks; block_iter++)
{
    //Allocate memory to read data;
    mxArray *B= mxCreateNumericArray(3, dims, mxUINT8_CLASS, mxREAL); // Pointer to mxArray
    mxArray *in = mxCreateDoubleMatrix(1, 1, mxREAL);

    mexCallMATLAB(0, NULL, 0, NULL, "memory");
    memcpy(mxGetPr(in), &block_iter, sizeof(double)*1*1);
    mexCallMATLAB(1, &B, 1, &in, "data_feeder");

    //Call RAM_FILL
    ram_fill(d,B);

    //Deallocate memory;
    mxDestroyArray(B);
    mxDestroyArray(in);
} 
```

**PS：**每个循环的内存泄漏约为 192 MB，这正是 array 中的数据量`B`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:53:17.223

```
for (block_iter = 1; block_iter <= num_blocks; block_iter++)
{    
        mxArray *B;// = mxCreateNumericArray(3,dims,mxUINT8_CLASS,mxREAL); //Pointer to mxArray
        mxArray *ppLhs[1];
        mxArray *in = mxCreateDoubleMatrix(1, 1, mxREAL);

//         mexCallMATLAB(0,NULL,0,NULL,"memory");
        memcpy(mxGetPr(in), &block_iter, sizeof(double)*1*1);
        mexCallMATLAB(1, ppLhs,1,&in,"data_feeder");
        B = ppLhs[0];
        //Call RAM_FILL
        ram_fill(d,B,block_iter);
//         mexPrintf("BlockIter %d\n",(int)block_iter);
        //Deallocate memory;
        mxDestroyArray(B);
        mxDestroyArray(in);
} 
```

我这样做是因为 mxCallMatlab 与 mxArray * 数组一起工作得很好，这在没有内存泄漏的情况下工作得很好。如果有任何优雅的解决方案，请告诉我。

# php - 将 wordpress 网站移动到不同的 url

> ID：15335425
> 
> 赞同：1
> 
> 时间：2013-03-11T09:47:31.110
> 
> 标签：php, mysql, wordpress

我有一个我的世界服务器的 wordpress 网站，服务器名称改变了，所以网站域也改变了。我尝试通过复制和粘贴所有文件但使用完全相同的数据库将论坛移动到另一个 url。但是，当您使用网站时，它会将您链接回原来的网站。如果是主域名在mysql数据库里面的问题？如果我更改数据库中的所有域，这会完全移动网站吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:50:42.913

移动 WordPress 网站在此处有很好的记录：http: [//codex.wordpress.org/Moving_WordPress](http://codex.wordpress.org/Moving_WordPress)

如果没有，它真的就像复制所有文件和数据库一样简单。为了避免 FTP 传输错误等，我更幸运地将所有文件压缩成一个 .tar.gz 文件，然后通过 FTP 将其传输到我的计算机和新网站，并在其中展开它。

就个人而言，我使用 cPanel（最流行的网络托管客户帐户/网站管理工具）。他们对数据库的备份和恢复。以及他们的文件管理器的压缩和扩展以与 .tar.gz 一起使用

更改域名会使事情变得非常复杂。我使用[Search and Replace](http://wordpress.org/extend/plugins/search-and-replace/)插件来处理硬编码的 URL。或者手动查找并替换数据库脚本中的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:51:05.383

Wordpress 有关于移动 wordpress 网站的完整指南：http: [//codex.wordpress.org/Moving_WordPress](http://codex.wordpress.org/Moving_WordPress)

但基本步骤如下：

1.  转到：管理 > 设置 > 常规面板，然后将那里的站点 URL 更改为您的新 URL。这应该更新数据库中的所有帖子链接等。

2.  将文件移动到新主机

3.  将数据库移动到新主机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:52:12.207

在您的 wp-config.php 文件中，输入该行`define('RELOCATE',true);`

[从http://yoursiteurl.com/wp-login.php](http://yoursiteurl.com/wp-login.php)访问您的登录页面，转到设置并更改站点 URL。

`define('RELOCATE',true);`从 wp-config.php 中删除

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T10:56:37.850

运行此 SQL 以更改 db 中的 url。

```
UPDATE wp_posts SET guid = REPLACE(guid, 'old-url.com', 'new-url.com');
UPDATE wp_posts SET post_content = REPLACE(post_content, 'old-url.com', 'new-url.com');
UPDATE wp_options SET option_value = REPLACE(option_value, 'old-url.com', 'new-url.com'); 
```

# silverlight - 带有 Silverlight 3 的 Windows 7 CE 图表控件

> ID：15335428
> 
> 赞同：1
> 
> 时间：2013-03-11T09:47:36.100
> 
> 标签：silverlight, windows-embedded-compact, windows-7-embedded

我必须实现数量可以为 n 的图表控件（特别是波形），并且必须使用一定范围的值动态绘制它们。

我正在为 Windows Embedded 使用 Silverlight 3，我必须为嵌入式设备编写代码。

Windows Embedded 7 使用 VC++ 代码，但没有图表控件。

我想我需要为此编写一个控件。

我是无声的。任何帮助，将不胜感激

# asp.net - 如何在 iTextSharp 中显示水平线

> ID：15335431
> 
> 赞同：8
> 
> 时间：2013-03-11T09:47:46.303
> 
> 标签：asp.net, .net, pdf-generation, itextsharp

我正在创建一个 pdf，需要在页面中放置一条水平线。谁能告诉我该怎么做？

我有一个 xml 文件，其中包含我的 html 标签（`<table>....</table>`）。并且文件的全部内容`xml`被解析`string`为用于创建`pdf`. 现在不支持某些标签。其中之一是`<hr>`。那么我可以在文件中使用任何其他标签，以便在使用 xml 数据创建 pdf 时`xml`绘制一个 。`line`

下面是一个xml xontent的例子

```
<table>
   <tr>
     <td>
       <span>
           This is working properly.
       </span>
     </td>
   <tr>
</table>

<table>
   <tr>
     <td>
       <span>
           <hr>
           This is not working properly.
       </span>
     </td>
   <tr>
</table> 
```

如果需要更多信息，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-05T19:19:54.637

以下创建了一条几像素厚的全宽黑线，我正在使用`HTMLWorker.Parse`：

```
<table>
   <tr>
    <td>
       <span>
           This is working properly.
       </span>
    </td>
   <tr>
</table>

<table>
   <tr>
    <td>
       <span>
       <table border="1" cellpadding="0" cellspacing="0"><tr><td>&nbsp;</td></tr></table>

           This is working properly now too!
       </span>
    </td>
   <tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T09:08:24.177

您可以从起始位置 (moveto)、LineTo 绘制线条，然后描边（提交线条）：

```
...
PdfContentByte cb = writer.DirectContent;
....
cb.MoveTo(doc.PageSize.Width / 2, doc.PageSize.Height / 2);     
cb.LineTo(doc.PageSize.Width / 2, doc.PageSize.Height);     
cb.Stroke();
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-01T05:04:27.813

我希望这可以帮助你

```
PdfPTable table = new PdfPTable(1);                //Create a new table with one column
PdfPCell cellLeft = new PdfPCell();                //Create an empty cell
StyleSheet style = new StyleSheet();               //Declare a stylesheet
style.LoadTagStyle("h1", "border-bottom", "red");          //Create styles for your html tags which you think will be there in PDFText
 List<IElement> objects = HTMLWorker.ParseToList(new StringReader(PDFText),style);  //This transforms your HTML to a list of PDF compatible objects
for (int k = 0; k < objects.Count; ++k)
{
     cellLeft.AddElement((IElement)objects[k]);    //Add these objects to cell one by one
}
table.AddCell(cellLeft); 
```

# iphone - 动态将表情符号转换为 unicode

> ID：15335433
> 
> 赞同：1
> 
> 时间：2013-03-11T09:47:48.927
> 
> 标签：iphone, ios

我应该如何将表情符号转换为 unicode 并将其发送到服务器，然后可以动态解码。

我可以静态地给出特定表情符号的 if 条件。但我想动态地制作它。

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-11T10:33:42.383

几天前我有同样的问题。我尝试了它对我的工作：

将值传递给服务器

```
 NSData *data = [textView.text dataUsingEncoding:NSNonLossyASCIIStringEncoding];
    NSString *goodValue = [[[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding] autorelease];

    goodValue = [goodValue stringByReplacingOccurrencesOfString:@"\\" withString:@"\\\\"]; 
```

从服务器获取值时

```
 NSString *goodValue = [StaticClass urlDecode:[dataDict objectForKey:@"comment_text"]];
    NSData *newdata=[goodValue dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES];
    NSString *mystring=[[NSString alloc] initWithData:newdata encoding:NSNonLossyASCIIStringEncoding]; 
```

# xslt - 数字格式无法正常工作，同时从 xsl 生成 excel 报告？

> ID：15335437
> 
> 赞同：0
> 
> 时间：2013-03-11T09:48:09.710
> 
> 标签：xslt, xslt-1.0

我正在将 xsl 转换为 excel 报告。我无法将整数呈现为带小数点的整数。尽管我在 xsl 中使用格式编号功能。但是当我同时使用千位和小数分隔符时，只有数字大于 3 的数字才会用小数点呈现......示例

700 本身呈现为 700 但我希望在 excel 中呈现为 700.00 1700 当我使用逗号作为千位分隔符但当我只使用小数分隔符时 1700 呈现为 1700 本身...请帮助我提供有价值的答案..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:41:02.923

请参阅[`format-number`](http://www.w3.org/TR/xslt#function-format-number)功能规范。模式字符串使用 JDK 1.1 DecimalFormat 类指定的语法（请参阅[JDK 1.4.2 的相应文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DecimalFormat.html)）。

特别是，`0`is是数字，`#`是数字，如果为零则省略，while`,`是分组（千位）分隔符，`.` 是小数分隔符。

好像你需要`#,###.00`。一些例子：

```
format-number(700, '#,###.00') 
```

> 700.00

```
format-number(1700, '#,###.00') 
```

> 1,700.00

```
format-number(1700000, '#,###.00') 
```

> 1,700,000.00

# xslt - 如何使用 xslt 处理器将参数传递给 xsl？

> ID：15335438
> 
> 赞同：0
> 
> 时间：2013-03-11T09:48:10.943
> 
> 标签：xslt

尝试使用 php xslt 处理器将参数传递给我的样式表时，我得到一个空结果。任何想法将不胜感激！

PHP：

```
<?php 
$xsl = new DomDocument();
$xsl->load("style_listgastro.xsl");
$inputdom = new DomDocument();
$inputdom->load("XXX");
$proc = new XsltProcessor();
$xsl = $proc->importStylesheet($xsl);
$xsl = $proc->setParameter(null, 'k', $_GET['k']);
$newdom = $proc->transformToDoc($inputdom);
print $newdom->saveXML();
?> 
```

XSLT：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"     xmlns:td="urn:schemas-XXX:Relationen">
<xsl:param name="k" />
<xsl:template match="/td:Relationen">
...
<xsl:apply-templates select="td:Benutzer_zu_Gastro">
<xsl:sort select="td:Gastroname"></xsl:sort>
</xsl:apply-templates>
...
</xsl:template>
<xsl:template match="td:Benutzer_zu_Gastro">
<xsl:if test="td:Kategorien = '{$k}'">
<li><a>
<xsl:attribute name="href">XXX</xsl:value-of>
</xsl:attribute>
<xsl:value-of select="td:Gastroname"></xsl:value-of>
</a></li>
</xsl:if>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:58:11.567

此行不正确：

```
<xsl:if test="td:Kategorien = '{$k}'"> 
```

它不是`td:Kategorien`与 的值进行比较`$k`，而是与字符串值进行比较`{$k}`（我猜它`td:Kategorien`永远不会有值`{$k}`）。相反，只需使用这个：

```
<xsl:if test="td:Kategorien = $k"> 
```

或者，更好的解决方法是将`apply-templates`行更改为：

```
<xsl:apply-templates select="td:Benutzer_zu_Gastro[td:Kategorien = $k]"> 
```

并完全删除`xsl:if`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:56:39.043

尝试使用`''`而不是`null`作为`setParameter()`?

# javascript - 用javascript检测视网膜显示器iPad

> ID：15335442
> 
> 赞同：4
> 
> 时间：2013-03-11T09:48:21.297
> 
> 标签：javascript, ipad, retina-display, device-detection

我在仅使用`screen.availWidth`和检测视网膜 iPad（和类似设备）时遇到问题`window.devicePixelRatio`。问题是 iPhone 和 iPad 给出了下降的数量，`screen.availWidth`而 android 设备似乎报告了物理像素的数量，所以我无法可靠地`screen.availWidth / window.devicePixelRatio`计算屏幕是否为平板电脑大小。

我可以使用其他一些 DOM 属性来帮助我吗？

*编辑*- 总结一下，希望能清楚地表明问题不是重复的

我如何判断`screen.availWidth`报告的值是否已经调整以考虑`window.devicePixelRatio`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T09:55:00.770

那应该有帮助

```
var retina = (window.retina || window.devicePixelRatio > 1); 
```

**更新**

```
Retina.isRetina = function(){
    var mediaQuery = "(-webkit-min-device-pixel-ratio: 1.5),\
                      (min--moz-device-pixel-ratio: 1.5),\
                      (-o-min-device-pixel-ratio: 3/2),\
                      (min-resolution: 1.5dppx)";

    if (root.devicePixelRatio > 1)
      return true;

    if (root.matchMedia && root.matchMedia(mediaQuery).matches)
      return true;

    return false;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-04T09:52:08.180

我没有对此进行测试，但这是我认为可能有效的方法。有时间我会为它做一个jsbin。

因为所有设备（据我所知）在将值传递给 CSS 媒体查询之前都会针对 devicePixelRatio 进行调整，所以我们可以（在稍微伪代码中）

1.  测量`window.devicePixelRatio`和`screen.availWidth`

2.  将样式标签写入头部，其中包含类似以下的媒体查询

    ```
    #my-test-el {
      display: none;
      visibility: visible;
    }

    @media screen and (min-device-width:screen.availWidth) {
      #my-test-el {
     visibility: hidden;
      }
    } 
    ```

3.  附加`<div id="my-test-el">`到页面

4.  读取`style.visibility`属性。如果它等于隐藏，则 css 值与 screen.availWidth => screen.availWidth 已为 dpr 预先调整的值相同。

*编辑*它有效！[http://jsbin.com/IzEYuCI/3/edit](http://jsbin.com/IzEYuCI/3/edit)。我也会整理一个modernizr插件

*编辑*这是在 Modernizr 中获取它的拉取请求 - [https://github.com/Modernizr/Modernizr/pull/1139](https://github.com/Modernizr/Modernizr/pull/1139)。如果觉得有用请点赞

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:57:58.420

这个[Modernizr](http://modernizr.com/)插件可能会有所帮助：[Modernizr Retina：HiDPI 测试](https://github.com/benlister/utilities/tree/master/Modernizr%20Retina%20%3a%20HiDPI%20test)

*注意：*需要 Modernizr 的媒体查询功能

# javascript - 为什么 Boolean() 在 Javascript 中这么慢？

> ID：15335452
> 
> 赞同：9
> 
> 时间：2013-03-11T09:48:54.483
> 
> 标签：javascript, performance, boolean

根据 ECMAScript 规范，[一元逻辑 NOT 运算符](http://www.ecma-international.org/ecma-262/5.1/#sec-11.4.9)( `!`) 和[函数`Boolean()`都](http://www.ecma-international.org/ecma-262/5.1/#sec-15.6.1)使用[内部函数`ToBoolean()`](http://www.ecma-international.org/ecma-262/5.1/#sec-9.2)，并且 NOT 运算符还进行一些检查以反转结果。那么为什么双逻辑非运算比运行函数[快得多呢？](http://jsperf.com/boolean-vs-double-negation)`Boolean()`

我使用以下代码来测试哪个更快：

```
function logicalNotOperator() {
  var start = performance.now();
  for (var i = 0; i < 9999999; i++) !!Math.random();
  return 0.001 * (performance.now() - start);
}

function booleanFunc() {
  var start = performance.now();
  for (var i = 0; i < 9999999; i++) Boolean(Math.random());
  return 0.001 * (performance.now() - start);
}

var logicalNotOperatorResult = logicalNotOperator();
var booleanFuncResult = booleanFunc();
var diff = booleanFuncResult - logicalNotOperatorResult;

console.log('logicalNotOperator:', logicalNotOperatorResult);
console.log('booleanFunc:', booleanFuncResult);
console.log('diff:', diff);
```

**注意：**我指的不是`new Boolean()`构造函数，而是`Boolean()`强制将其赋予布尔值的参数的函数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T09:51:47.223

虽然`Boolean`将调用函数（内部优化），但大多数 JIT 将内联双精度而不使用 XOR，这要快得多（[源代码参考](http://hg.mozilla.org/integration/mozilla-inbound/file/7c905a200bcc/js/src/methodjit/FastOps.cpp#l768)- JägerMonkey）。

和 JSperf：http: [//jsperf.com/bool-vs-doublenot](http://jsperf.com/bool-vs-doublenot)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-27T06:49:25.750

我不知道 Javascript JIT 编译器是如何在内部执行的。同样，现在布尔函数在 2020 年在 Chrome 中运行得更快。但是如果有一些不同的浏览器、不同的版本或不同的 JS 引擎`!!`运算符运行得更快，我想我知道答案原因。当你调用一个函数时，内存中有额外的工作用于推送堆栈和弹出堆栈。当您使用`! (NOT operator)`时，无需在内存中为 push/pop 堆栈创建额外的工作。这就是 NOT 运算符工作得更快的原因。

# php - 更改数组中的键

> ID：15335454
> 
> 赞同：0
> 
> 时间：2013-03-11T09:48:57.590
> 
> 标签：php, mysql, arrays, json

我想更改数组中键的名称。

我有类似的东西：

```
$result=mysqli_query($link,$qry);
while($obj = mysqli_fetch_object($result)) 
{
   $arr[] = $obj;
}

echo '{"results":'.json_encode($arr).'}'; 
```

结果可能以三种变化形式出现

1.  `results: [{id_a:1, title:V}]`
2.  `results: [{id_b:1, title:V}]`
3.  `results: [{id_c:1, title:V}]`

我的 sql 查询正在确定我将收到哪些变体，因此我需要检查什么是键名并将其更改为`id`only。

所以我需要检查类似 `if('key'==id_a || 'key'==id_b || 'key'==id_c )`将“密钥”更改为`id`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:57:12.180

由于您不愿意采用简单的方法并修改数据库查询以使用别名：

```
$result=mysqli_query($link,$qry);
while($obj = mysqli_fetch_object($result)) 
{
    if (isset($obj->id_a)) {
        $obj->id = $obj->id_a;
        unset($obj->id_a);
    } elseif (isset($obj->id_b)) {
        $obj->id = $obj->id_b;
        unset($obj->id_b);
    } elseif (isset($obj->id_c)) {
        $obj->id = $obj->id_c;
        unset($obj->id_c);
    }
    $arr[] = $obj;
}

echo '{"results":'.json_encode($arr).'}' 
```

**编辑**

```
$objects = array();
$object1 = new stdClass();
$object1->id_a = 1;
$object1->title = "Title 1";
$object2 = new stdClass();
$object2->id_b = 2;
$object2->title = "Title 2";
$objects[0] = $object1;
$objects[1] = $object2;

foreach($objects as $obj) {
    if (isset($obj->id_a)) {
        $obj->id = $obj->id_a;
        unset($obj->id_a);
    } elseif (isset($obj->id_b)) {
        $obj->id = $obj->id_b;
        unset($obj->id_b);
    } elseif (isset($obj->id_c)) {
        $obj->id = $obj->id_c;
        unset($obj->id_c);
    }

    var_dump($obj);
} 
```

给

```
object(stdClass)[1]
  public 'title' => string 'Title 1' (length=7)
  public 'id' => int 1

object(stdClass)[2]
  public 'title' => string 'Title 2' (length=7)
  public 'id' => int 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:02:26.380

你可以尝试这样的事情：

```
$objects = array();
$object1 = new stdClass();
$object1->id_a = 1;
$object1->label = "label1";
$object2 = new stdClass();
$object2->id_b = 2;
$object2->label = "label2";
$objects[0] = $object1;
$objects[1] = $object2;

foreach($objects as $object) {
    foreach($object as $key => $value) {
        if(strpos($key, "id") !== false) {
            unset($object->$key);
            $key = "id";
            $object->$key = $value;
        }
    }
}
print_r($objects); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T10:07:42.127

既然你想改变钥匙的名字，

```
$i=0;
foreach(mysqli_fetch_object($result) as $key=>$value) {
        $arr[$key."_".$i] = $value;
        $i++;
}
echo '{"results":'.json_encode($arr).'}'; 
```

# r - 在不使用公式标记包摘要中的箭头的情况下绘制图形

> ID：15335455
> 
> 赞同：0
> 
> 时间：2013-03-11T09:49:00.753
> 
> 标签：r, diagram

我正在尝试绘制如下图：

```
library(diagram)
Numgenerations <- 6
DiffMat <- matrix(data = 0, nrow = Numgenerations, ncol = Numgenerations)
AA <- DiffMat
AA[1,4] <- "f[3"
name <- c(expression(Age[0]), expression(Age[1]), expression(Age[2]),
expression(Age[3]), expression(Age[4]), expression(Age[5]))
plotmat(A = AA, pos = 6, curve = 0.7, name = name, lwd = 2,
  arr.len = 0.6, arr.width = 0.25, my = -0.2,
  box.size = 0.05, arr.type = "triangle", dtext = 0.95,
  main = "Age-structured population model 1") 
```

然后，R 将 "f[3" 视为公式并返回

```
Error in parse(text = txt) : <text>:2:0: unexpected end of input
1: f[3
  ^ 
```

我查看了[带有包装的小插曲](http://cran.r-project.org/web/packages/diagram/vignettes/diagram.pdf)。在第 2.3 节中，它写道：

> 下一个示例使用公式来标记箭头 1 。这是通过将 data.frame 而不是矩阵传递给函数来完成的`plotmat`

但是，我`plotmat`在前面的示例中传递的是矩阵而不是 data.frame。现在我找不到在绘制标签之前避免`parse`in的方法。`plotmat`

图表包的版本是1.6。

有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:17:50.057

您需要将 f[3 放在双引号中，如下所示：

```
library(diagram)
Numgenerations <- 6
DiffMat <- matrix(data = 0, nrow = Numgenerations, ncol = Numgenerations)
AA <- as.matrix(DiffMat)
AA[1,4] <- "'f[3'" #double then single quotes
name <- c(expression(Age[0]), expression(Age[1]), expression(Age[2]),
          expression(Age[3]), expression(Age[4]), expression(Age[5]))

plotmat(A = AA, pos = 6, curve = 0.7, name = name, lwd = 2,
        arr.len = 0.6, arr.width = 0.25, my = -0.2,
        box.size = 0.05, arr.type = "triangle", dtext = 0.95,
        main = "Age-structured population model 1") 
```

![在此处输入图像描述](../Images/a16de400c9f8fa89aadf39771517f42f.png)

# java - Android SharedPreferences 中 commit 和 apply 的区别

> ID：15335456
> 
> 赞同：22
> 
> 时间：2013-03-11T09:49:04.747
> 
> 标签：java, android, sharedpreferences

SharedPreferences 用于在 Android 中保存应用程序数据。

`commit()`两者`apply()`都用于保存共享首选项中的更改。

如Android库中所述：

```
public abstarct void apply(): 
```

> 与将其首选项同步写入持久存储的 commit() 不同，apply() 会立即将其更改提交到内存中的 SharedPreferences，但会开始异步提交到磁盘，并且不会通知您任何失败。如果此 SharedPreferences 上的另一个编辑器在 apply() 仍未完成时执行常规 commit()，则 commit() 将阻塞，直到所有异步提交以及提交本身完成。

```
public abstract boolean commit (): 
```

> 将您的首选项更改从该编辑器提交回它正在编辑的 SharedPreferences 对象。这会自动执行请求的修改，替换 SharedPreferences 中当前的任何内容。

这是否意味着`commit()`与 相比， 所做的更改是即时的`apply()`？哪一个更好？

如果我需要在下一个即时活动中使用相同的共享偏好值，我应该使用哪一个？正如我所看到的，如果 Preference 的值被更新，它直到应用程序重新启动才会反映出来。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-11T09:51:55.200

`Commit()`是瞬时的，但执行磁盘写入。如果你在 ui 线程上，你应该调用`apply()`它是异步的。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-11T09:55:31.617

**apply()** - 返回**void**

**apply() 是在 2.3 中添加的**，它**保存而不返回指示成功或失败的布尔值。**

**commit()** - 返回**布尔**值。

**如果保存有效， commit()**返回 true，否则返回 false。`apply()`被添加是因为 android 开发团队注意到大多数人没有注意到返回值，所以 apply 更快。

您可以参考以下链接

**[Shared Preference 中的 commit() 和 apply() 有什么区别](https://stackoverflow.com/questions/5960678/whats-the-difference-between-commit-and-apply)**

# tfs - 在 TFS 上的一个解决方案中处理多个开发人员

> ID：15335465
> 
> 赞同：0
> 
> 时间：2013-03-11T09:49:34.417
> 
> 标签：tfs, branch, branching-and-merging

我们有一个包含许多项目的解决方案，我们的团队在我们整个软件产品的不同领域工作。在开始工作之前，他们创建了一个开发分支并在那里工作。开发人员完成工作后，他们添加/删除任何必要的项目并提交解决方案并将其合并到主分支中。

当发生这种合并时，我们会遇到一个问题，即新项目在来自不同开发分支的解决方案中被赋予了相同的 ID。当我们将开发分支重新集成到主分支时，这会导致合并冲突。有没有一种优雅的方法来处理 TFS 中的这个问题？

我们目前的解决方法是在我们的开发分支中制作自己的解决方案副本，将开发分支合并到主线中，然后手动对主线中的主解决方案进行任何更改。这解决了将重复 ID 分配给解决方案中的项目的问题。

# sql - 获取未通过 Oracle 中的序列插入的 ID

> ID：15335468
> 
> 赞同：0
> 
> 时间：2013-03-11T09:49:54.643
> 
> 标签：sql, oracle, oracle10g, primary-key

不确定这是否可能，我可能会误解这里的序列......

我有一个将数据添加到 oracle 中的表的 SQL 脚本。每个表都有一个通过序列生成的主键。

我目前正在打电话

```
MY_SEQ.NEXTVAL 
```

获取下一个序列值。

现在我之前遇到了一个问题，其中一些行已添加到数据库中，而这些行不是通过序列添加的。ID 是通过 SQL 脚本手动添加的。这意味着当我

```
MY_SEQ.NEXTVAL 
```

运行它失败了，因为它生成了一个已经用作主键的序列号。

有没有办法协调 oracle 中的序列和数据库中当前的 id？目前我不得不在开始时检查这并不理想。我希望所有表格都与序列一起使用。我可以获得序列以考虑现有ID吗？

有任何想法吗？这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:07:05.280

您可以更改序列以使 nextval 高于表中的最大 id：

```
select max(id) from your_table;

alter sequence my_seq increament by <the amount to go beyond your max ID>; 
```

# javascript - 构成 Type Script 项目的多个文件

> ID：15335474
> 
> 赞同：24
> 
> 时间：2013-03-11T09:50:08.000
> 
> 标签：javascript, typescript

最近我一直在使用 TypeScript，一切都很好，我真的非常喜欢它。让 JavaScript 再次可用！:)

我们试图遵循与任何 .net 项目相同的想法，例如每个类/接口单个文件

```
module Infrastructure {
    export interface IBaseViewModel {
        addOrRemoveClass(selector: string, className: string);
    }
} 
```

我们遇到的问题是 - 所有依赖文件都没有被包括在内？当涉及到运行时。

如果您查看此文件，它是我们应用程序的主要入口点，我会在创建新 ViewModelBuilder 时收到未定义错误

```
module Infrastructure {
    export class Fusion {
        constructor() {
            this.vmBuilder = new ViewModelBuilder();
            this.setApplicationDefaults();
            this.start();
        }

        private vmBuilder: IViewModelBuilder;

        private start() {
            this.vmBuilder.process();
        }

        private setApplicationDefaults() {
            $.pnotify.defaults.styling = "jqueryui";
            $.pnotify.defaults.history = false;
            $.pnotify.defaults.auto_display = false;
        }
    }
} 
```

在我们拥有的文件的顶部

```
/// <reference path="../Typings/jquery.d.ts" />
/// <reference path="ViewModelBuilder/ViewModelBuilder.ts" />
/// <reference path="ViewModelBuilder/IViewModelBuilder.ts" /> 
```

还有 ViewModelBuilder

```
module Infrastructure {

    export class ViewModelBuilder { }
} 
```

**所以问题是——最好的方法是什么？我们怎样才能让其他类声明起作用？**我们的项目将大幅增长，我们可能有 100 个视图模型来代表每个视图（该项目是从 Windows 窗体到 Web 的转换）

任何帮助都会很棒，因为我们真的需要克服这一点并继续前进！:)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-11T10:16:39.683

我写过关于[正确设置 TypeScript](http://www.stevefenton.co.uk/Content/Blog/Date/201301/Blog/Getting-The-Right-Set-Up-For-TypeScript/)的文章，其中的一个想法会对你有所帮助 - 我最初是从 Mark Rendle 那里得到这个想法的。

这个想法是创建一个名为的文件`references.ts`，并在其中列出所有依赖项。有点像这样：

```
/// <reference path="modulea.ts" />
/// <reference path="moduleb.ts" />
/// <reference path="modulec.ts" />
/// <reference path="moduled.ts" />
/// <reference path="modulee.ts" /> 
```

然后，您可以在所有 TypeScript 文件的顶部简单地引用此文件：

```
/// <reference path="references.ts" />
module ModuleA {
    export class MyClass {
        doSomething() {
            return 'Hello';
        }
        tester() {
            var x = new ModuleB.MyClass();
        }
    }
} 
```

该`references.ts`文件的作用类似于 .NET 项目的 References 文件夹。

另一个与此设置配合得很好的建议是使用该`--out`标志编译单个 JavaScript 文件，以`app.ts`. TypeScript 编译器遍历所有依赖项并为所有生成的 JavaScript 计算出正确的顺序。

```
tsc --out final.js app.ts 
```

与在任何地方手动引用特定文件相比，此策略将更好地适应您的程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-01-01T00:52:41.467

如果您像我一样来自 C++/C 背景并错过了 .h（或 .hpp）文件，我有办法。而且您不必更改编译器标志，或使用 /// 或任何东西。只是简单的 .ts 文件，导入、导出。

您创建一个文件夹，将其命名为“models”

在此文件夹中，您可以创建模型，例如：

汽车.ts

```
export class Automobile {...} 
```

汽车.ts

```
import { Automobile } from './automobile.ts';

export class Car extends Automobile {...} 
```

法拉利.ts

```
import { Automobile } from './automobile.ts';
import { Car } from './car.ts';

export class Ferrari extends Car {...} 
```

然后是神奇的头文件！

您在同一个文件夹中创建一个名为 models.ts 的文件（可以是 header.ts，随便）

```
export { Automobile } from './automobile.ts';
export { Car } from './car.ts';    
export { Ferrari } from './ferrari.ts'; 
```

现在，在您的其他文件中，导入您的所有模型

```
import * as x from 'src/app/models/models'; 
```

并乐于使用

```
let myCar: x.Car = new x.Car();
let myFerrari: x.Ferrari = new x.Ferrari(); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-11T14:21:04.813

这里有两个选项，commonjs 或 AMD（异步模块加载）。
使用 commonjs，您需要放置一个

```
<script type="text/javascript" src="lib/jquery-1.7.2.js"></script> 
```

在您的 html 页面中为您的项目中的每个单独的 javascript 文件。
显然，这会变得非常乏味，尤其是如果您的项目中有数百个文件。
或者，正如 Steve Fenton 指出的那样，您可以使用 --out 参数将各种文件编译成一个文件，然后在您的 html 页面中仅引用这个文件。

使用 AMD 是第三种选择——您只需要在 html 页面中包含一个脚本标签，AMD 会负责引用。
看看我的博客如何让这个工作：[http ://blorkfish.wordpress.com/2012/10/23/typescript-organizing-your-code-with-amd-modules-and-require-js/](http://blorkfish.wordpress.com/2012/10/23/typescript-organizing-your-code-with-amd-modules-and-require-js/)

# extjs - 为什么我可以在控制器中使用控制器数组？

> ID：15335477
> 
> 赞同：1
> 
> 时间：2013-03-11T09:50:16.060
> 
> 标签：extjs, extjs4.2

我正在玩 ExtJS4.2。我`controllers`向一个简单的控制器添加了一个数组（不，我没有继承 fom 应用程序）并且它们都被加载（但未初始化）。

但在 API中没有`controllers`. `Ext.app.Controller`他们没有被初始化只是一个旁注，对我来说并不重要。

**我只是想知道为什么它们会被加载，如果这种行为是我可以依赖的？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:44:26.427

这是 4.2 中 MVC 重构的副作用，因此它既没有完全实现也没有正确记录。我们很可能会在 4.2.1 中解决这个问题，但我不能保证它不会改变。

# ruby - 重命名多个 *.html.erb 文件

> ID：15335493
> 
> 赞同：0
> 
> 时间：2013-03-11T09:51:19.320
> 
> 标签：ruby

我有存储 *html.erb 文件的文件夹 > 子文件夹，我需要将其重命名为 *.haml 扩展名。

```
\folder
  \folder
    \*html.erb
    \*html.erb
    \*html.erb
    \*html.erb
  \folder
    \ ###
    \ ###
    \ ###
  \folder 
```

我想专门使用 Ruby 脚本来完成这项任务。
到目前为止，我有以下 Ruby 脚本：

```
f_p = "/home/ocean/Documents/testr/"
Dir.glob(f_p + "*").sort.each do |f|
  filename = File.basename(f, File.extname(f))
  puts filename
end 
```

但它只打印扩展的第一部分，然后我需要以某种方式正确重命名它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:01:35.137

在红宝石中，

```
dir_root = "./folder"
Dir.glob( File.join(dir_root, "/**/*") ).sort.each do |file|
  if file.match(/\.html\.erb$/)
    File.rename(file, file.gsub(/html\.erb/, "haml"))
  end
end 
```

不是在 Ruby 中，而是在带有 rename 命令的 Bash 中：

```
rename 's/\.html\.erb$/\.haml/' folder/*/*.html.erb 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T11:00:51.623

toch 提供的答案几乎是正确的，但它有几个问题：

1.  主要问题是重命名的条件是测试“erb”（方法 extname 只返回最后一段）是否包含“html.erb”，这永远不会是真的；
2.  小问题是重命名时使用的正则表达式没有转义点，也没有测试行尾；

所以我决定进行这些调整：

```
base_dir = "./views"
Dir.glob( File.join(base_dir, "/**/*") ).sort.each do |file|
  File.rename(file, file.gsub(/html\.erb$/, "haml")) if File.basename(file) =~ /html\.erb$/
end 
```

# javascript - RequireJS 优化器命名空间

> ID：15335494
> 
> 赞同：0
> 
> 时间：2013-03-11T09:51:19.817
> 
> 标签：javascript, requirejs, amd

我正在使用 RequireJS 创建一个 JavaScript SDK，以便在其他人的网站上使用。我的 RequireJS 构建配置使用命名空间“myNamespace”，以便我的 SDK 可以与它​​自己的 RequireJS 版本捆绑在一起，而不会干扰其他人的网站。虽然这可以按预期工作，但在尝试从另一个 RequireJS 模块中要求我的 SDK 模块时遇到了问题：

```
myNamespace.define('public1', function (require) {
    var public2 = require('public2');

    return { x: 1, y: public2.y };
});

myNamespace.define('public2', function (require) {
    return { y: 1 };
});

define(function (require) {
    var private1 = require('private1');
    var private2 = require('private2');
    var public1 = myNamespace.require('public1'); // This doesn't work as it isn't using the provided `require` method.
}); 
```

任何想法如何“混合”这两个 RequireJS 库？有关 RequireJS 命名空间的更多信息：[http ://requirejs.org/docs/faq-advanced.html#rename](http://requirejs.org/docs/faq-advanced.html#rename)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:20:37.697

所以，我想出了一个解决办法。如果您认为这可以做得更聪明，请告诉我。我创建了一个用作包装器的插件：

```
define(['https://example.com/mySDK.js'], {
    load: function (name, req, onload, config) {
        myNamespace.require([name], onload);
    }
}); 
```

# android - 是否可以从 Eclipse 运行单个 Android CTS 测试用例？

> ID：15335499
> 
> 赞同：0
> 
> 时间：2013-03-11T09:51:40.057
> 
> 标签：android, eclipse, testing, junit, cts

我目前正在为我们自己的设备处理一些 CTS 问题。我想到，如果我们可以仅从 Eclipse 运行单个 CTS 测试用例，那将非常有助于调试 CTS 问题。例如，我创建了一个带有清单文件的 Android 测试项目：

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="android.content.pm.cts"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <instrumentation
        android:name="android.test.InstrumentationTestRunner"
        android:targetPackage="android.content.pm" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <uses-library android:name="android.test.runner" />
    </application>

</manifest> 
```

和源代码：

```
 package android.content.pm.cts;

import android.content.Intent;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.content.pm.ResolveInfo.DisplayNameComparator;
import android.test.AndroidTestCase;

public class ResolveInfo_DisplayNameComparatorTest extends AndroidTestCase {
    private static final String MAIN_ACTION_NAME = "android.intent.action.MAIN";
    private static final String SERVICE_NAME = "android.content.pm.cts.activity.PMTEST_SERVICE";

    public void testDisplayNameComparator() {
        PackageManager pm = getContext().getPackageManager();
        DisplayNameComparator dnc = new DisplayNameComparator(pm);

        Intent intent = new Intent(MAIN_ACTION_NAME);
        ResolveInfo activityInfo = pm.resolveActivity(intent, 0);

        intent = new Intent(SERVICE_NAME);
        ResolveInfo serviceInfo = pm.resolveService(intent, PackageManager.GET_RESOLVED_FILTER);

        assertTrue(dnc.compare(activityInfo, serviceInfo) < 0);
        assertTrue(dnc.compare(activityInfo, activityInfo) == 0);
        assertTrue(dnc.compare(serviceInfo, activityInfo) > 0);
    }
} 
```

当我右键单击项目并选择“run as android junit test”时，它只会报告：测试运行失败：无法找到检测目标包：android.content.pm

我知道我可能从一开始就完全错了。那么有人可以为我指出正确的出路吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:12:45.113

The error you are seeing is because the android OS cannot find an application installed with the package "android.content.pm" and eclipse does not know about the project in order to install it for you, install the application you want to test (and check its package is in fact android.content.pm which it probably isn't because that is a system package and you will not be able to instrument against that because your debug signature is not the same)

# video - 如何使用 rm/rmvb 支持编译 ffmpeg？

> ID：15335500
> 
> 赞同：0
> 
> 时间：2013-03-11T09:51:41.713
> 
> 标签：video, ffmpeg, gstreamer, decoding, libavcodec

我用谷歌搜索并没有找到解决方案。编译最新版本的 FFMPEG 以支持 rm,rmvb 格式视频的具体参数是什么？我是视频处理的新手。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T10:09:41.110

ffmpeg 仅支持 Real Video 3.0/4.0 解码。它应该默认可用。运行：`ffmpeg -codecs | grep RealVideo`。您应该得到如下输出：

```
ffmpeg version 0.11.1 Copyright (c) 2000-2012 the FFmpeg developers
  built on Jan 25 2013 15:16:27 with llvm_gcc 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)
  configuration: --prefix=/usr/local/Cellar/ffmpeg/0.11.1 --enable-shared --enable-gpl --enable-version3 --enable-nonfree --enable-hardcoded-tables --cc=/usr/bin/llvm-gcc --host-cflags='-Os -w -pipe -march=core2 -msse4 -mmacosx-version-min=10.7' --host-ldflags=-L/usr/local/lib --enable-libx264 --enable-libfaac --enable-libmp3lame --enable-libxvid
  libavutil      51\. 54.100 / 51\. 54.100
  libavcodec     54\. 23.100 / 54\. 23.100
  libavformat    54\.  6.100 / 54\.  6.100
  libavdevice    54\.  0.100 / 54\.  0.100
  libavfilter     2\. 77.100 /  2\. 77.100
  libswscale      2\.  1.100 /  2\.  1.100
  libswresample   0\. 15.100 /  0\. 15.100
  libpostproc    52\.  0.100 / 52\.  0.100
 DEV D  rv10            RealVideo 1.0
 DEV D  rv20            RealVideo 2.0
 D V D  rv30            RealVideo 3.0
 D V D  rv40            RealVideo 4.0 
```

如果您注意到 RealVideo 3.0 和 4.0 有可用的解码 (D) 选项。

# php - PHP脚本输出图像，标题显示没有缓存+ gzipping

> ID：15335503
> 
> 赞同：1
> 
> 时间：2013-03-11T09:51:49.323
> 
> 标签：php, apache, caching, gzip, html5boilerplate

我正在开发一个来自 html5 样板库的项目。我调用 PHP 脚本来返回用户的头像图像，使用 header() 来设置适当的内容类型（'image/jpeg'、'image/png'、'image/gif' 是我允许的唯一类型）。

当我请求图像时，服务器以 gzip 压缩的无缓存响应进行响应：

```
Cache-Control:no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Cache-Control:public
Connection:Keep-Alive
Content-Encoding:gzip
Content-Type:image/jpeg
Date:Mon, 11 Mar 2013 09:18:23 GMT
Expires:Thu, 19 Nov 1981 08:52:00 GMT
Keep-Alive:timeout=5, max=92
Pragma:no-cache
Server:Apache/2.2.24 (Unix) mod_ssl/2.2.24 OpenSSL/0.9.8e-fips-rhel5 mod_bwlimited/1.4
Transfer-Encoding:chunked
Vary:Accept-Encoding,User-Agent
X-UA-Compatible:IE=Edge,chrome=1 
```

这显然不理想......我能够显式设置缓存头，但这并不能解决根本问题。如果我设置 Content-Encoding: identity，它无论如何都会发送 gzip 压缩的数据并且浏览器会感到困惑。

[.htaccess 文件](https://raw.github.com/h5bp/html5-boilerplate/master/.htaccess)

...我刚刚测试了另一件事。我在 PHP 脚本中使用了 ini_set('zlib.output_compression', 'Off') ，还重命名了 .htaccess 文件，我仍然得到相同的结果。我现在真的很困惑。服务器正在运行带有 easyapache 的 CentOS 5.9（对不起！）

如何使用 PHP 脚本提供图像并对其应用适当的缓存和压缩规则？

编辑：在我发布这个的那一刻，我当然解决了其中的一部分...... gzip 问题是在一个配置文件中设置了一些幼稚的规则。删除它们允许 .htaccess 文件完成它的工作，部分无论如何。它仍在禁用缓存。

# macos - Mac OS X 上的 OpenGL glValidateProgram 错误

> ID：15335510
> 
> 赞同：2
> 
> 时间：2013-03-11T09:52:15.130
> 
> 标签：macos, opengl, glsl

我正在尝试在 Mac OS X（Mountian Lion）上使用 GLUT 编写一个简单的 OpenGL 3.2（带有 GLSL 1.5）程序，但我不断收到来自 glValidateProgram 的错误：

“验证失败：当前绘制帧缓冲区无效。”

什么可能导致发生此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-24T00:12:33.633

像 OP 一样，我遇到了一些使用它的代码，并且在不知道更好的情况下，我在程序链接步骤之后立即实现了它。得到同样的错误。

我在这里不是专家，但根据一些观察，我想我会澄清@robinjam 似乎在说什么（这与 GL 文档所说的相呼应`glValidateProgram`）。

我使用的示例代码是 Apple 的 iOS 测试 OpenGL ES 2.0 演示项目，我还没有在设备上运行这段确切的代码，但是模拟器给了我这个`Validation Failed: Current draw framebuffer is invalid.`错误。但是，需要注意的是，运行这个的方法`- (BOOL)validateProgram:(GLuint)prog`，，包含在`ViewController.mm`（不是`.m`因为我很早就用 C++ 感染了它）但是*这个示例代码没有提供实际调用它的代码*。

所以 glValidateProgram 的目的不是在链接程序后将其用作添加的“检查”步骤，因为此时 GL 和应用程序状态几乎没有准备好实际*使用*该程序，可能甚至在我们开始初始化之前默认帧缓冲区（其位深度、多样本缓冲区等），这就是错误提示的内容。

在您进行真正的渲染调用之前，调用 glValidateProgram 的适当位置将是正确的。

这对调试很有用。这是我们的一种可选方式，可以让司机在出现问题时帮助我们。每次我们在一切都运行顺利的非调试情况下渲染时调用它是愚蠢的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-24T03:05:56.390

如果这有帮助，下面的代码会创建一个与默认屏幕渲染缓冲区不同的用于写入的有效帧缓冲区，写入它然后重置屏幕缓冲区。

```
// ************************************** Save the Current Viewport Size

GLint screenViewPort[4];
glGetIntegerv(GL_VIEWPORT, screenViewPort);

// ***************************** Define a Second Output Buffer and Bind it for Writing

glGenFramebuffersEXT(1, wispSecondOutputBuffer);
glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, wispSecondOutputBuffer[0]);

// ******************************* Set the Viewport to the Texture Size and Reshape

glViewport(0,0,TEXTUREWIDTH, TEXTUREHEIGHT);
[self resizeTextureGL]; // Calculates new Model, View and Projection Matrices

// ************************************** Create the Output Imgage Texture

glGenTextures( 1, wispOutputTexture);
glBindTexture(GL_TEXTURE_2D, wispOutputTexture[0]);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, (GLsizei)TEXTUREWIDTH, (GLsizei)TEXTUREHEIGHT, 0, GL_RGBA, GL_UNSIGNED_BYTE, NULL);

glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);

// ********************************* Attach the Output Texture to the Frame Buffer

glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT, GL_TEXTURE_2D, wispOutputTexture[0], 0);

GLenum DrawBuffers[1] = {GL_COLOR_ATTACHMENT0};
glDrawBuffers(1, DrawBuffers);

// ************************************ Check that the Frame Buffer is Complete

GLenum frameBufferStatus;

frameBufferStatus = glCheckFramebufferStatusEXT(GL_FRAMEBUFFER_EXT);

if(frameBufferStatus != GL_FRAMEBUFFER_COMPLETE_EXT) NSLog(@"There is a problem with the output frame buffer");

// ****************************************** Render to the Texture

[self runTextureShaders];
[self runTextureShaders2];

// ************************************ Reset the Viewport and Frame Buffer

glViewport(screenViewPort[0],screenViewPort[1],(GLsizei)screenViewPort[2], (GLsizei)screenViewPort[3]);
glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-08T03:05:51.780

这是个老问题。

当我在 iOS 中使用 GLKView 和 GLKViewcontroller 时，尝试在 viewDidLoad 中进行验证会导致此错误。

当帧缓冲区准备好时，在 ViewDidAppear 中执行此操作。

# sql - Heroku - 发生了什么？`sql` 不是 heroku 命令

> ID：15335513
> 
> 赞同：1
> 
> 时间：2013-03-11T09:52:22.967
> 
> 标签：sql, heroku, command-line

今天我需要检查 Heroku 上托管的旧 RoR 项目中的一些内容，当我想检查数据库时，我运行了：

`heroku sql`

但是，我没有进入可以在数据库中显示数据的命令行，而是得到了以下语句：

```
 !    `sql` is not a heroku command.
 !    Perhaps you meant `ssl`.
 !    See `heroku help` for a list of available commands. 
```

发生了什么？Heroku 改变了什么？（`heroku open`效果很好）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:11:20.593

您可以通过以下方式进行操作：

```
heroku pg:psql 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:03:33.970

我相信你应该先安装[这个插件](https://github.com/ddollar/heroku-sql-console)。

# android - 如何在android中跟踪GPS位置？

> ID：15335514
> 
> 赞同：1
> 
> 时间：2013-03-11T09:52:24.683
> 
> 标签：android, gps

我有一个列出 gps 位置的 android 应用程序。如何获取 gps 位置以创建此视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:58:34.247

这可以使用位置管理器来完成。[这](http://developer.android.com/training/basics/location/locationmanager.html)是一个如何使用它的示例，[这里](http://developer.android.com/reference/android/location/LocationManager.html)是它的 API 参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:03:51.323

我有这个工作

```
 private void _getLocation()
  {
  // Get the location manager
LocationManager locationManager = (LocationManager)  getSystemService(LOCATION_SERVICE);
   Criteria criteria = new Criteria();
   String bestProvider = locationManager.getBestProvider(criteria, false);
  Location location = locationManager.getLastKnownLocation(bestProvider);

try {
lat = location.getLatitude ();
lon = location.getLongitude ();
}
catch (NullPointerException e){
 lat = -1.0;
 lon = -1.0;
 } 
```

这很简单。它获得了最好的可用提供商并获得了它最后一个已知的位置。如果您只想使用 GPS，请从这里[开始](http://www.sgoliver.net/blog/wp-content/uploads/2011/04/android-localizacion-1.zip)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T10:04:25.047

按照本[教程](http://www.androidhive.info/2012/07/android-gps-location-manager-tutorial/)。它很好地说明了如何获得 GPS 坐标。

打开**AndroidManifest.xml**并添加`ACCESS_FINE_LOCATION`（其中包括`ACCESS_FINE_LOCATION`和`ACCESS_COARSE_LOCATION`）。此外，如果您获得基于网络的位置，那么您也需要添加`INTERNET`权限。

从教程：

> ```
> // if GPS Enabled get lat/long using GPS Services
> if (isGPSEnabled) {
>     if (location == null) {
>         locationManager.requestLocationUpdates(
>                 LocationManager.GPS_PROVIDER,
>                 MIN_TIME_BW_UPDATES,
>                 MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
>         if (locationManager != null) {
>             location = locationManager
>                     .getLastKnownLocation(LocationManager.GPS_PROVIDER);
>             if (location != null) {
>                 latitude = location.getLatitude();
>                 longitude = location.getLongitude();
>             }
>         }
>     } 
> ```

# android - 从 android 画廊获取视频到 android 应用程序活动屏幕

> ID：15335516
> 
> 赞同：0
> 
> 时间：2013-03-11T09:52:36.670
> 
> 标签：android

我正在为android设计一个小应用程序。我的画廊中保存了视频。我想检索并显示保存在我的画廊中的所有视频的列表/缩略图，点击开始在视频播放器中播放。我不知道该怎么做，因为我是 android 新手。请简要解释您的答案。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:03:27.983

首先，您需要从 Gallery中获取[视频列表并将它们显示在](http://developer.android.com/reference/android/app/Activity.html#managedQuery%28android.net.Uri,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String%29)[ListView](http://www.vogella.com/articles/AndroidListView/article.html)中。你可以有一个`ImageView`视频缩略图和`TextView`描述或时间等。

您可以在方法中创建如下缩略图`GetView`。

```
ImageView imageThumbnail = (ImageView) row.findViewById(R.id.Thumbnail);
Bitmap bmThumbnail;
bmThumbnail = ThumbnailUtils.createVideoThumbnail(PATH_TO_VIDEO_IN_STRING, Thumbnails.MICRO_KIND);
imageThumbnail.setImageBitmap(bmThumbnail); 
```

这里的人会希望你在提问之前做一些编码。我希望你能从这个开始。

# typescript - 强制打字稿将方法放在实例而不是原型上

> ID：15335517
> 
> 赞同：10
> 
> 时间：2013-03-11T09:52:43.940
> 
> 标签：typescript

是否可以强制打字稿将方法放在实例而不是原型上。我问这个是因为我经常遇到“这个”范围问题，原型上的方法会导致问题。

编辑

* * *

例如，在 ts 的输出中似乎不一致，我将 FooAlert 保留在 FooViewModel 函数中，但将方法 ​​openFooAlertDialogueAdd 保留在原型中

JS

```
var FooViewModel = (function () {
    function FooViewModel (json) {
        this.Foolert = ko.observable();

    }
    FooViewModel.prototype.openFooAlertDialogueAdd = function () {
        this.FooAlert = something;
    }; 
```

TS

```
class FooViewModel{
     FooAlert = KnockoutObservableAny

      constructor(){
         this.FooAlert = ko.observable();
       }
     openFooAlertDialogueAdd() {
        this.FooAlert = something;
    };

} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-11T14:19:33.140

**如果你有范围问题，我为你感到难过儿子，我有 99 个问题，但`this`不是一个！**

史蒂夫的答案显示了定义类方法的正确方法，这些方法将在每个实例上公开。但是，如果您遇到范围问题，这可能是由于您从另一个上下文调用这些方法。

例如，如果您使用 Knockout 并将其中一种方法绑定到`click`绑定，则 Knockout 会将范围覆盖到绑定的当前范围，而不是您在其上定义方法的范围。

有两种选择可以防止这种范围损失。

首先，您可以在构造函数中定义您的方法，将它们暴露在实例上而不是原型上。

喜欢：

```
class Greeter {
    greet:() => string;
    greeting: string;

    constructor(message: string) {
        this.greeting = message;
        this.greet = () => {
            return "Hello, " + this.greeting;
        }
    } 
```

其次，您可以使用`=>`语法来确定类方法的范围。

例子：

```
class Greeter {
    greeting: string;
    constructor() {
        this.greeting: "Blabla";
    }
    greet= () => {
        alert(this.greeting);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-11T10:11:22.387

原型*上*的方法是每个实例上可用的方法。

```
class Example {
    constructor(private someProperty: string) {

    }

    method() {
        return this.someProperty;
    }
}

var exampleA = new Example('A');
var exampleB = new Example('B');
var exampleC = new Example('C');

console.log(exampleA.method()); // A
console.log(exampleB.method()); // B
console.log(exampleC.method()); // C 
```

每个实例都将具有`someProperty`并`method()`复制到其原型。您可以使用以下方法进行检查：

```
alert(exampleC.hasOwnProperty('someProperty') ? 'Yes' : 'No'); 
```

只有当实例没有自己的属性时，JavaScript 才会沿着任何依赖链查找依赖链更高的类上的属性。

如果您在代码范围内遇到问题时提供代码，`this`我相信我们可以帮助您修复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-06T15:08:02.487

看起来这是一个 TypeScript/Knockout 问题，正如@Anzeo 在他的回答和您的编辑中指出的那样。我通过将我的方法声明放在构造函数中解决了这个问题，但也使用了[Knockout 的 Computed Observable 文档](http://knockoutjs.com/documentation/computedObservables.html)`var self = this;`的“管理'this'”部分中指出的约定。您的 TS 代码可能如下所示：

```
class FooViewModel{
    FooAlert: KnockoutObservableAny;
    openFooAlertDialogueAdd: () => void;

    constructor(){
        var self = this;
        self.FooAlert = ko.observable();
        self.openFooAlertDialogueAdd = function(){
            self.FooAlert('whatever your FooAlert observable takes');
        };
    }
} 
```

无论可能发生什么范围变化，JavaScript 闭包都`self`让您不必担心`this`变化。那应该可以解决您的两个问题。

# delphi - How to get a static Tbitmap.canvas.handle?

> ID：15335524
> 
> 赞同：0
> 
> 时间：2013-03-11T09:53:04.847
> 
> 标签：delphi, opengl, delphi-2007

Trying to set up an Opengl context to render into a bitmap but I've found the handle returned from the Tbimap canvas object keeps changing so the rendering context keeps throwing an exception because it doesn't match the handle the rendering context was created with.

I found changing the bitmaps width or height will change the handle value, and if the bitmap is created outside of the procedure that does the rendering, you get a different handle each time you enter the procedure.

I need this to stay static or its all a bit pointless having the ability to render to a bitmap in the first place.

Any clues how to fix the handle?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T10:08:03.203

Windows bitmap objects have fixed width and height. When you create an `HBITMAP` you have to decide once and for all on the height, width and indeed other properties such as pixel format. So, of course when you modify the `Width` and `Height` property of a Delphi `TBitmap`, then the implementing `HBITMAP` will need to be re-created.

It seems that you are asking to be able to create an `HBITMAP` that has width and height properties that can be modified. No such thing exists.

# php - 从数组创建 XML

> ID：15335527
> 
> 赞同：3
> 
> 时间：2013-03-11T09:53:07.247
> 
> 标签：php, simplexml

我有这个数组

```
array(2) {
  [0] =>
  array(3) {
    ['name'] => string(4) "John"
    ['lastname'] => string(3) "Don"
    ['pesel'] => string(6) "987987"
  }
  [1] =>
  array(3) {
    ['name'] => string(4) "Mike"
    ['lastname'] => string(5) "Evans"
    ['pesel'] => string(5) "89779"
  }
} 
```

我想从上面的数组创建一个 xml 文件，我使用此代码创建一个 xml 文件

```
$student_info = array($resultant_array);

// creating object of SimpleXMLElement
$xml_student_info = new SimpleXMLElement("<?xml version=\"1.0\"?><student_info></student_info>");

// function call to convert array to xml
array_to_xml($student_info,$xml_student_info);

//saving generated xml file
$xml_student_info->asXML('inxfo.xml');

// function defination to convert array to xml
function array_to_xml($student_info, $xml_student_info) {
    foreach($student_info as $key => $value) {
            var_dump($value);
            echo '<br />';
        if(is_array($value)) {

            if(!is_numeric($key)){

                $subnode = $xml_student_info->addChild("$key");
                array_to_xml($value, $subnode);

            }
            else{

                array_to_xml($value, $xml_student_info);
            }
        }
        else { 

            $xml_student_info->addChild("$key","$value");

        }
    }
} 
```

这段代码给出了这样的 mi 解决方案

```
<student_info>
  <name>John</name>
  <lastname>Dozzn</lastname>
  <pesel>987987</pesel>
  <nme>Mike</name>
  <lastname>Evans</lastname>
  <pesel>89779</pesel>
</student_info> 
```

但我想要这样的结果

```
 <student_info>
      <person>
         <name>John</name>
         <lastname>Dozzn</lastname>
         <pesel>987987</pesel>   
      </person>
      <person>
         <name>Mike</name>         
         <lastname>Evans</lastname>
         <pesel>89779</pesel>
    </person>
 </student_info> 
```

如何向我的 xml 代码添加其他子项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:06:16.217

在您的情况下，更改 else 部分：

```
if(!is_numeric($key)){
     $subnode = $xml_student_info->addChild("$key");
     array_to_xml($value, $subnode);
}
else{
     $subnode = $xml_student_info->addChild("person");
     array_to_xml($value, $subnode);
} 
```

但正如 Andrej 建议的那样，您可能想查看更通用的功能。

编辑：我的有效版本：

```
$student_info = array(
    array(
        'name' => "John",
        'lastname' => "Don",
        'pesel' => "987987",
    ),
    array(
        'name' => "Mike",
        'lastname' => "Evans",
        'pesel' => "89779",
    )
);

$xml_student_info = new SimpleXMLElement("<?xml version=\"1.0\"?><student_info></student_info>");

function array_to_xml($student_info, $xml_student_info) {
    foreach($student_info as $key => $value) {
        if(is_array($value)) {
            if(!is_numeric($key)){
                $subnode = $xml_student_info->addChild("$key");
                array_to_xml($value, $subnode);
            }
            else{
                $subnode = $xml_student_info->addChild("person");
                array_to_xml($value, $subnode);
            }
        }
        else { 
            $xml_student_info->addChild("$key","$value");
        }
    }
}

array_to_xml($student_info, $xml_student_info);

var_dump( $xml_student_info->asXML() ); 
```

输出：

```
string '<?xml version="1.0"?>
<student_info><person><name>John</name><lastname>Don</lastname><pesel>987987</pesel></person><person><name>Mike</name><lastname>Evans</lastname><pesel>89779</pesel></person></student_info> 
```

'（长度=211）

# android - 在后台运行应用程序

> ID：15335534
> 
> 赞同：0
> 
> 时间：2013-03-11T09:53:35.593
> 
> 标签：android, accelerometer, android-sensors

```
package com.example.shake;
import java.util.List;
import java.util.Locale;
import android.app.Activity;
import android.graphics.Color;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.location.Address;
import android.location.Geocoder;
import android.os.Bundle;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Toast;

public class MainActivity extends Activity implements SensorEventListener {
  private SensorManager sensorManager;
  private boolean color = false;
  private View view;
  private long lastUpdate;

/** Called when the activity is first created. */

  @Override
  public void onCreate(Bundle savedInstanceState) {
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
        WindowManager.LayoutParams.FLAG_FULLSCREEN);

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    view = findViewById(R.id.textView);
    view.setBackgroundColor(Color.GREEN);

    sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
    lastUpdate = System.currentTimeMillis();
  }

  @Override
  public void onSensorChanged(SensorEvent event) {
    if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER) {
      getAccelerometer(event);
    }

  }

  private void getAccelerometer(SensorEvent event) {
    float[] values = event.values;
    // Movement
    float x = values[0];
    float y = values[1];
    float z = values[2];
    double latitude=0;
    double longitude=0;
    String location_message;
    GPSTracker gps;

    float accelationSquareRoot = (x * x + y * y + z * z)
        / (SensorManager.GRAVITY_EARTH * SensorManager.GRAVITY_EARTH);
    long actualTime = System.currentTimeMillis();
    if (accelationSquareRoot >= 2.4) //
    {
      if (actualTime - lastUpdate < 200) {
        return;
      }
      lastUpdate = actualTime;
      gps=new GPSTracker(MainActivity.this);
      if(gps.canGetLocation()){    
        latitude = gps.getLatitude();
        longitude = gps.getLongitude();
        // \n is for new line
        //Toast.makeText(getApplicationContext(), "Your Location is - \nLat: " + latitude + "\nLong: " + longitude, Toast.LENGTH_LONG).show();  
        Geocoder gcd = new Geocoder(MainActivity.this, Locale.getDefault());
        try{
         List<Address> addresses = gcd.getFromLocation(latitude, longitude, 1);
         location_message= addresses.get(0).getLocality();
        if (addresses.size() > 0) 
        {
            Toast.makeText(getApplicationContext(), "Your Location is "     +addresses.get(0).getLocality()
            , Toast.LENGTH_LONG).show();
        }
        }catch(Exception e)
        {
            System.out.print(e);
        }
    }else{
        // can't get location
        // GPS or Network is not enabled
        // Ask user to enable GPS/network in settings
        Toast.makeText(getApplicationContext(), "Switch on gps"
                , Toast.LENGTH_LONG).show();
        gps.showSettingsAlert();
    }

      /*Toast.makeText(this, "Device was shuffed", Toast.LENGTH_SHORT)
          .show();
      if (color) {
        view.setBackgroundColor(Color.GREEN);

      } else {
        view.setBackgroundColor(Color.RED);
      }*/
      color = !color;
    }
   }

  @Override
       public void onAccuracyChanged(Sensor sensor, int accuracy) {

   }

  @Override
  protected void onResume() {
    super.onResume();
    // register this class as a listener for the orientation and
    // accelerometer sensors
    sensorManager.registerListener(this,
        sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
        SensorManager.SENSOR_DELAY_NORMAL);
  }

  @Override
  protected void onPause() {
    // unregister listener
    super.onPause();
    sensorManager.unregisterListener(this);
   }
} 
```

这段代码给出了摇动手机时的当前位置。我想创建一个在后台监控摇动参数并自动显示位置的应用程序。我知道这可以通过 android 中的 Service 类来完成，但作为初学者我不知道怎么实现。还有其他方法吗？谁能帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:26:34.513

查看此示例代码：您需要如图所示实现侦听器。

```
public class Accelerometer extends Service implements AccelerometerListener{ private static 
Context CONTEXT;

@Override
public IBinder onBind(Intent intent) {
// TODO Put your code here
return null;
}

@Override
public void onCreate() {
System.out.println(”start listening”);
// if (AccelerometerManager.isSupported()) { AccelerometerManager.startListening(this);

// }
}

@Override
public void onDestroy() {
System.out.println(”stop listening”);
// if (AccelerometerManager.isListening()) { AccelerometerManager.stopListening();
// }
}

/**
* onShake callback
*/
public void onShake(float force) {
Toast.makeText(this, “Phone shaked omha ya 3ammi el7ag: ” + force,             1000).show(); }

/**
* onAccelerationChanged callback
*/
public void onAccelerationChanged(float x, float y, float z) { System.out.println(”x =     “+x+” y = “+y+” z = “+z); }

} 
```

请点击此[链接](http://mylifewithandroid.blogspot.in/2010/04/monitoring-sensors-in-background.html)获取更多信息

# asp.net - 带有 sql server 2008 的 Asp.net

> ID：15335535
> 
> 赞同：0
> 
> 时间：2013-03-11T09:53:36.227
> 
> 标签：asp.net, sql-server-2008

当我通过 asp.net 执行存储过程时，应用程序抛出`connect timeout expire`异常。但是如果我通过查询窗口执行存储过程，它会在 46 秒内成功执行。

你对这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:01:50.783

您可以在连接字符串中设置超时值，但是要为要执行的特定存储过程设置超时值，您可以使用@doterob建议的方式

检查以下链接：

[连接超时](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectiontimeout.aspx)

[命令超时](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout.aspx)

**编辑：**

您可能想查看为什么执行存储过程需要这么多时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:02:46.550

使用这段代码检查它花费了多少时间

```
 SqlCommand cmd = new SqlCommand();
 cmd.CommandTimeout = 100;(100 is in second) 
```

通过增加 CommandTimeout 你可以检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T10:05:23.573

它可能是*您*的`sql command execution times out` *或*您的`web server times out`. 既然你说在 SSMS 中需要 46 秒，我认为这是你的网络服务器超时。我建议您将两个超时值都增加到合适的值。

对于 IIS，您可以使用 IIS 管理器来执行此操作。这是[IIS 7.0 的一个很好的链接](https://stackoverflow.com/questions/2414441/how-to-increase-request-timeout-in-iis7-0)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T09:58:22.283

执行产生超时异常。您可以更改超时参数

当您创建 de SqlCommand 来执行存储过程时，您可以将超时以秒为单位

```
SqlCommand command = new SqlCommand();
command.CommandTimeout = 100; //100 seconds 
```

# twitter-bootstrap - Bootstrap：如何识别 Bootstrap 版本？

> ID：15335537
> 
> 赞同：159
> 
> 时间：2013-03-11T09:53:40.703
> 
> 标签：twitter-bootstrap

我想在网站上更新 Bootstrap，但我不知道安装的版本。

如何识别引导版本，只有 bootstrap.css 和 bootstrap.min.js 文件？

CSS 文件中没有版本，并且 min.js 文件包含以下注释。

```
/*!
* Bootstrap.js by @fat & @mdo
* Copyright 2012 Twitter, Inc.
* http://www.apache.org/licenses/LICENSE-2.0.txt
*/ 
```

* * *

## 回答 #1

> 赞同：204
> 
> 时间：2013-03-11T09:57:38.093

在顶部，`bootstrap.css`您应该有如下评论：

```
/*!
 * Bootstrap v2.3.1
 *
 * Copyright 2012 Twitter, Inc
 * Licensed under the Apache License v2.0
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Designed and built with all the love in the world @twitter by @mdo and @fat.
 */ 
```

如果它们不存在，那么它们可能已被删除。

**版本：**

[您可以在此处](https://github.com/twbs/bootstrap/releases)查看版本历史记录。如果源是 v2.0.0（2012 年 1 月）及更高版本，则不应破坏向后兼容性。如果是 v2.0.0 之前的版本，这里有关于升级的详细[信息](http://getbootstrap.com/migration/)。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2019-09-05T15:09:56.187

您还可以通过浏览器中的 javascript 控制台检查引导程序版本：

```
$.fn.tooltip.Constructor.VERSION // => "3.3.7" 
```

信用：[https ://stackoverflow.com/a/43233731/1608226](https://stackoverflow.com/a/43233731/1608226)

在这里发布这个是因为当我忘记在搜索中包含 JavaScript 并最终解决这个问题而不是上面的问题时，我总是遇到这个问题。如果这对您有帮助，请务必也支持该答案。

注意：对于旧版本的引导程序（少于 3 个左右），您可能需要在页面的 JavaScript 或 CSS 文件中搜索引导程序版本。刚刚在使用 bootstrap 2.3.2 的应用程序上遇到了这个问题。在这种情况下，（当前）最佳答案可能是正确的答案，您需要搜索引导程序的源代码以找到它使用的版本。（添加于 2020 年 9 月 18 日，但自 2020 年 8 月 13 日起发表评论）

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2018-02-01T07:28:18.120

**方法 1 - 非常简单**

在`Package.json`- 您将看到安装了提到的版本的引导程序包。

```
"dependencies": {
    // ...
   "bootstrap": "x.x.x"
    // ...
} 
```

**方法二**

1.  打开`node_modules`文件夹并在该文件夹下
2.  搜索并打开`bootstrap`文件夹
3.  现在您将能够在以下文件中看到版本号
    *   `package.json`
    *   `scss/bootstrap.scss`或者`css/bootstrap.css`
    *   `README.md`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-11T09:56:59.910

Bootstrap 版本将在 CSS 文件的顶部说明。只需打开它并查看文件顶部。

例如

```
/*!
 * Bootstrap v2.3.0
 *
 * Copyright 2012 Twitter, Inc
 * Licensed under the Apache License v2.0
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Designed and built with all the love in the world @twitter by @mdo and @fat.
 */ 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-08-22T14:45:08.717

一种无需搜索文件或文件夹的简单方法是：

*   在浏览器上打开您的网页
*   按 ctrl+U
*   搜索 boostrap.min.js 或 boostrap.min.css，然后点击它（它会打开源文件）
*   在第一行（注释）你应该看到 boostrap 版本

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-11T09:57:31.150

应在页面顶部说明。

就像是。

```
/* =========================================================
 * bootstrap-modal.js v1.4.0
 * http://twitter.github.com/bootstrap/javascript.html#modal
 * =========================================================
 * Copyright 2011 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */ 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-11-20T15:28:18.337

最简单的方法是找到引导文件（bootstrap.css 或 bootstrap.min.css）并通读 docblock，你会看到类似这样的内容

`Bootstrap v3.3.6 (http://getbootstrap.com)`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-08-12T17:25:22.763

您可以找到帮助您知道您导入成功的版本和小信息，请执行以下操作：

1.  打开浏览器。
2.  Ctrl+Shift+l 或 F12
3.  继续搜索 Sources 然后在顶部，你会找到你的 URL，比如 http://localhost:4200，然后在它下面你会找到 styles.css。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-10T13:32:14.997

该注释看起来像是 Bootstrap v2.3.3 的自定义版本，这是 .css 中的默认标头，请注意最后一行：

```
/*!
 * Bootstrap v2.3.2
 *
 * Copyright 2013 Twitter, Inc
 * Licensed under the Apache License v2.0
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Designed and built with all the love in the world by @mdo and @fat.
 */ 
```

你想达到什么目的？如果它是自定义的，那么您有一组文件可以使用，尽管这似乎是个坏主意。否则，我建议使用 v4.1.x 的完整版本，因为这是当前版本。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-03-12T18:11:07.617

打开 package.json 并查看依赖项。你应该看到：

```
 "dependencies": {
    ...
    "bootstrap-less": "^3.8.8"
    ...
    } 
```

对于角度 5 及以上

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-09-23T06:34:01.980

详细说明[@vrian的答案](https://stackoverflow.com/a/57611970/10907864)

要在 Web 浏览器中查看网站的引导版本，请执行以下操作：

**第一种方法**：

*   在您喜欢的浏览器上打开网站
*   按**Ctrl** + **U**查看网页源码
*   查看名为`boostrap.min.js`or的文件的 head 部分`boostrap.min.css`。它应该看起来像这样`<link href="assets/css/bootstrap.min.css" rel="stylesheet" />`
*   然后点击打开源文件
*   这将显示网站的引导版本。它应该如下所示：`Bootstrap v4.4.1 (https://getbootstrap.com/)`

**第二种方法**：

*   在您喜欢的浏览器上打开网站
*   按**Ctrl** + **Shift** + **I**检查网页元素
*   在检查控制台中，单击**样式编辑器**选项卡
*   然后点击`boostrap.min.css`
*   这将显示网站的引导版本。它应该如下所示：`Bootstrap v4.4.1 (https://getbootstrap.com/)`

[![控制台中的引导版本](../Images/2389638f2d08659692fa7c58ae8d4692.png)](https://i.stack.imgur.com/s9yXa.png)

就这样

**我希望这有帮助**

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-02-13T11:46:06.100

您将在“bootstrap.min.css/bootstrap.css”文件中看到您当前的引导程序版本，在顶部

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-02-19T09:11:32.077

`bootstrap.min.css`您可以在顶部的 doc Block 中找到它。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-03-05T17:43:17.280

这是一个老问题，多年来，Bootstrap 发生了一些变化。当我不知道我正在使用哪个版本的 Bootstrap 时，我遇到的最常见问题之一是文件中缺少标题注释/文档块。

这个答案是在 5.1.3 和 4.6.1 发布之后写的。如果您更新它，请同时更新这些版本号！

以下是我发现的方法（感谢[https://getbootstrap.com/docs/versions/](https://getbootstrap.com/docs/versions/)和[https://github.com/twbs/bootstrap/releases](https://github.com/twbs/bootstrap/releases)）来确定您使用功能嗅探的版本. 请注意，此列表仅涵盖 CSS 部分！

# v5

v5.1 - 添加`.placeholder`和`.placeholder-glow`类
v5.0 - 删除`.media`并添加`xxl`断点 ( `.col-xxl-12`)

# v4

v4.6 - 添加`.navbar-nav-scroll`类
v4.5 - 添加`.user-select-none`、`.user-select-auto`和`.user-select-none`类v4.4 -
添加`.row-cols-*`类
v4.3 - 添加`.stretched-link`和`.text-break`类
v4.2 - 添加`.font-weight-lighter`和`.font-weight-bolder`类
v4.1 - 添加`.table-borderless`和`.text-monospace`类
v4.0 - 删除`.img-responsive`。添加`.img-fluid`

# v3

v3.4 - 添加`.row-no-gutters`类
v3.3 - 添加`.media-left`和`.media-right`类
v3.2 - 添加`.sr-only-focusable`类
v3.1 - 添加`.text-justify`和`.modal-sm`类 v3.0 - 删除`.modal-lg`类。添加的类
`.span#``.col-X-#`

*   # 是从 1 到 12 的数字
*   X 是`xs`、`sm`、`md`或之一`lg`

# v2

v2.3 - 添加`.text-left`、、`.text-center`和`.text-right`类
v2.2 - 添加`.media`类
v2.1 - 添加`.uneditable-input`和`.uneditable-textarea`类
v2.0 - 添加`.table`和`.table-*`类

# v1

v1.4 - 添加`.condensed-table`类
v1.3 - 添加`.thumbnail`类
v1.2 - 添加`.one-third` `.two-thirds`类

据我所知，在此之前的任何事情都不可靠。

* * *

## 回答 #15

> 赞同：-4
> 
> 时间：2017-11-27T17:39:58.270

要检查您当前拥有的版本，您可以将 -v 用于命令行/控制台终端。

**引导程序-v**

[https://www.npmjs.com/package/bootstrap-cli](https://www.npmjs.com/package/bootstrap-cli)

# r - 保存和加载动态 gWidgets GUI

> ID：15335538
> 
> 赞同：1
> 
> 时间：2013-03-11T09:53:43.403
> 
> 标签：r, user-interface, gwidgets

我有一个使用 R 中的 gWidgets 包创建的动态 GUI（如果重要的话，guiToolkit="RGtk2"）。动态是指在使用 GUI 时创建和删除表单元素。我想知道是否有一种简单的方法可以使用所有当前表单元素和选定/键入的值保存当前 GUI，然后稍后加载它。保存和加载工作区似乎不适用于此类事情，例如：

```
require (gWidgets)
options (guiToolkit="RGtk2")
win1 <- gwindow("Test")
svalue(win1) <- "Window 1"
win2 <- win1
svalue(win2) <- "Window 2"
visible(win1)=FALSE
visible(win2)=TRUE 
```

工作正常，您可以复制一个对象并继续在其他变量名下工作。但是，当您保存工作区并加载它时，在尝试执行最后 2 行时会收到错误“断言 `GTK_IS_WIDGET (widget)' failed”。因此， load() 函数不能正确地重新创建对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:12:11.410

您可能使用某种数据结构来描述您的 GUI，并结合了基于此数据结构构建 GUI 的函数。我将使用`save`保存此数据结构，允许您`load`稍后执行，您可以在此基础上重建您的 GUI。

# ruby - 单击“X”后处理 ruby 进程终止

> ID：15335541
> 
> 赞同：0
> 
> 时间：2013-03-11T09:53:46.213
> 
> 标签：ruby, exception-handling, signals

我知道我们可以使用 Ctrl-C

```
rescue Exception, or 

rescue SystemExit, or 

trap(0) or 

trap("SIGTERM") or 

trap("INT"), 
```

但是我想处理单击“X”按钮关闭命令提示符的中断，要求是在程序异常终止时记录一些进度，例如系统重新启动或单击“X”按钮，然后我可以继续工作下一次的断点，

我尝试了所有这些，没有一个有效。

你有什么建议吗？可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:15:20.073

尝试这个，

```
begin
  10.times do |second|
    @second = second
    sleep 1
  end
ensure
  File.open("/tmp/terminated.txt", 'w') do |f| 
    f.write("Process terminated after #{@second} second(s)")
  end
end 
```

块中的代码`ensure`将始终运行，即使进程通过 Ctrl-C 终止或关闭终端窗口也是如此。

如果进程没有终止，它也会运行。这可以通过检查循环是否完成来防止。`File.open(...) unless @second == 10`

# java - 为文档使用 SimpleXML 注释

> ID：15335542
> 
> 赞同：0
> 
> 时间：2013-03-11T09:53:51.083
> 
> 标签：java, simple-framework

我目前正在设计一个 XML 通信协议。我通过创建类并使用适当的注释来做到这一点。现在我开始需要某种可以理解的文档，而无需知道 Simple 是如何工作的。例如 DTD 或 XML 模式文件。

有没有可用的工具来做到这一点？

问候
马克斯

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-12T02:52:15.713

请参阅[教程](http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php)或[示例](http://simple.sourceforge.net/download/stream/doc/examples/examples.php)或[Javadoc](http://simple.sourceforge.net/download/stream/doc/javadoc/)，那里应该有足够的信息能够理解它。

# java - 使用 JWrapper 时出现异常

> ID：15335547
> 
> 赞同：2
> 
> 时间：2013-03-11T09:54:10.803
> 
> 标签：java

我正在尝试使用 jWrapper 从 jar 文件构建一个 exe。为什么我在尝试使用 JWrapper 生成 exe 时收到如下所示的错误？请帮忙

```
C:\Documents and Settings\Administrator>java  -jar G:\IMS\jwrapper-00018512673.j
ar  G:\IMS\app.xml
JWrapper 00018512673
JWrapperCompiler started
[Config] Building file is G:\IMS\app.xml
[Updates] Checking for updates...
java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at SecureRunner2.<init>(SecureRunner2.java:464)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)

        at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)

        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Sou
rce)
        at java.lang.reflect.Constructor.newInstance(Unknown Source)
        at SecureRunner1.<init>(SecureRunner1.java:422)
        at SecureRunner1.<init>(SecureRunner1.java:227)
        at SecureRunner1.main(SecureRunner1.java:52)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at jwrapper.launch.JWCompiler.main(JWCompiler.java:99)
Caused by: java.lang.NullPointerException
        at jwrapper.JWrapperCompiler.main(JWrapperCompiler.java:458)
        ... 17 more
[Updates] Update check: 18512673 vs 18473665 (online) 
```

我的 app.xml 文件

```
<JWrapper>

    <!-- This tells JWrapper the name of your app bundle -->
    <BundleName>MinimalApp</BundleName>

    <!-- This bit defines a virtual app - your app bundle can have one of these or a bunch of them -->
    <App>

        <!-- The name of the app that launches -->
        <Name>tx</Name>

        <!-- The logo for the app, we automatically scale and convert it to OS specific formats -->

        <!-- The Java main class for your app -->
        <MainClass>ims.init.Selector</MainClass>

        <!-- Any static parameters you want to pass in to your main method -->
        <Param>one</Param>
        <Param>two</Param>

    </App>

    <!-- This tells JWrapper what languages your app uses so JWrapper can let the user choose (if its more than one) -->
    <SupportedLanguages>en,fr</SupportedLanguages>

    <!-- If your app needs to run elevated (as admin) on Windows you can specify that here -->
    <WindowsElevation>None</WindowsElevation>

    <!-- This app installs itself for the current user, you can also install for all users or run as a temporary executable -->
    <InstallType>CurrentUser</InstallType>

    <!-- This is the optional update URL for the app, if the files here get updated the app will auto update-->
    <UpdateURL>http://minimal.jwrapper.com/</UpdateURL>

    <!-- Here's where you specify your Windows 32 bit JRE, note that you can use a 32 bit JRE on 64 bit Windows -->
    <Windows32JRE>../windows/jre1.6.0_16</Windows32JRE>
    <Windows64JRE>../windows/jre1.6.0_16</Windows64JRE>
    <Linux32JRE>../linux/jre1.6.0_16</Linux32JRE>
    <Linux64JRE>../linuxx64/jre1.6.0_16</Linux64JRE>

    <!-- Here's where you can add JAR files or whatever else your app needs to run -->
    <File classpath='yes'>lib/*.jar</File>
    <File classpath='no' path='translations.properties'>resources/translation.properties</File>

</JWrapper> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:59:43.307

有同样的问题。在我的情况下，它来自 jwrapper.jar 中未包含的 JRE。[我从这里](http://www.filehippo.com/de/download_jre_32/tech/14478/ "这里")下载了一个 Windows JRE6 （在某个地方读到 JRE7 不适合包含？）并将完整的 jre6 目录复制到我的 jwrapper 目录中。[从这里开始](http://www.java.com/en/download/manual.jsp "这里")对 linux 也是如此。Windows 仅 32 位，Linux 32 和 64 位。

```
<!-- Here's where you specify your Windows 32 bit JRE, note that you can use a 32 bit JRE on 64 bit Windows -->
<Windows32JRE>jre6</Windows32JRE>
<Windows64JRE>jre6</Windows64JRE>
<Linux32JRE>jre1.7.0_17_32</Linux32JRE>
<Linux64JRE>jre1.7.0_17_64</Linux64JRE> 
```

我现在的问题是当前工作目录与放置的 .exe 不同。也许我也可以为此找到解决方案。

# c# - Castle ActiveRecord DeleteAll on belongsto 克制

> ID：15335561
> 
> 赞同：0
> 
> 时间：2013-03-11T09:54:41.067
> 
> 标签：c#, nhibernate, activerecord, castle-activerecord, castle

我有 2 个具有以下设置的课程：

```
[ActiveRecord("ReceivedMessage")]
class ARReceivedMessage : ARBase<ARReceivedMessage> 
```

和：

```
[ActiveRecord("ReceivedMessageReply")]
class ARReceivedMessageReply : ARBase<ARReceivedMessageReply>

[BelongsTo(Type = typeof(ARReceivedMessage), Column = "ReceivedMessageID")]
public ARReceivedMessage Message { get; set; } 
```

在尝试清理数据库时，我首先要删除所有 ReceivedMessageReply 对象，然后再删除 ReceivedMessage 本身。在代码中，这使我想到了以下内容：

获取我要删除的所有收到的消息：

```
ARReceivedMessage[] messagesToDelete = ARReceivedMessage.GetAll(messageCriterion); 
```

获取删除所有 ReceivedMessageReplys 的标准并删除它们：

```
ICriterion relatedCriterion = Restrictions.In("ReceivedMessageID", messagesToDelete);
ARReceivedMessageReply.DeleteAll(relatedCriterion); 
```

不知何故，activerecord告诉我以下内容：无法解析属性：ReceivedMessageID of：ARReceivedMessageReply

知道我在哪里犯了错误吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:16:37.140

不知何故，我不得不使用以下内容：

```
ICriterion relatedCriterion = Restrictions.In("Message", messagesToDelete); 
```

所以不是activerecord设置的columnname/propertyname，而是属性名本身。这是出乎意料的……

# javascript - Bootstrap Carousel 在第一个间隔到期之前不会加载

> ID：15335569
> 
> 赞同：1
> 
> 时间：2013-03-11T09:55:15.310
> 
> 标签：javascript, twitter-bootstrap, carousel

我正在使用 Twitter Bootstrap Carousel，并且有一组图像加载速度与我设置的“间隔”参数一样快。所以，如果我坐`{interval:10}`了，那么一切都会很快加载，但如果我设置了`{interval:6000}`，我必须等待 6 秒。

[github](https://github.com/twitter/bootstrap/issues/4420)上有一个问题，引导轮播在第一个图像加载之前不会加载，并且将“.active”添加到第一个div似乎已经解决了这个问题。但是，该解决方案对我不起作用。我添加了活动类，但 div.active 直到间隔过去才真正呈现。

问题 - 您是否看到过类似的行为，您知道如何解决吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T13:23:00.037

这应该解决它。

```
$(document).ready(function()
{
    $('.carousel').carousel({
      interval: 6000
    });

    $('.carousel').carousel('next');
}); 
```

# javascript - 页面上的脚本使用了太多内存。重新加载以再次启用脚本

> ID：15335571
> 
> 赞同：2
> 
> 时间：2013-03-11T09:55:17.480
> 
> 标签：javascript

我正在使用 JavaScript 生成动态报告。如果我以全屏模式打开页面，浏览器会显示：

> “页面上的脚本占用了太多内存。重新加载以再次启用脚本”。

收到此错误后，其他页面也停止工作。注销并重新登录后它甚至都不起作用。如果我打开一个新标签，只有其他页面可以工作。

谁能解释这个错误是什么意思，以及如何解决它？

# iphone - iOS 上的 Google Analytics SDK v2 中未报告的广告系列

> ID：15335579
> 
> 赞同：1
> 
> 时间：2013-03-11T09:55:33.417
> 
> 标签：iphone, ios, google-analytics

我已经在 Android 和 iOS 上集成了 Google Analytics SDK v2，但我只遇到了 iOS 版本的 SDK 的广告系列问题。setCampaignUrl 在 Android 上运行良好，但在 iPhone 上完全不报告任何内容。

跟踪器已正确初始化，因为**所有其他方法**在 iOS 上都可以正常工作，我这样做如下：

```
id<GAITracker> tracker = [GAI sharedInstance].defaultTracker;
    if (tracker) {
        tracker.campaignUrl = [NSString stringWithCString:campaignUrl encoding:NSUTF8StringEncoding];
    } 
```

我也试过 setCampaignUrl:campaignUrl 没有成功。

广告系列 URL 是在 Google Analytics 网站上作为示例给出的 ("utm_campaign=my_campaign&utm_source=google&utm_medium=cpc&utm_term=my_keyword&utm_content=ad_variation1") 并在 Android 上完成这项工作。

我是否正确使用它，您是否遇到过类似的问题？会不会是 Analytics SDK 问题？

[其他开发人员在 Google 群组线程 ( http://productforums.google.com/forum/#!topic/analytics/sbUOYuhaMc8](http://productforums.google.com/forum/#!topic/analytics/sbUOYuhaMc8) )上报告了相同的问题，这可能意味着它可能是 Google 问题。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:40:54.233

找到了解决方案，Google Analytics 网站上的文档在**iOS 部分**是错误的：

Google Analytics（分析）网站上作为示例给出的广告系列 URL ("utm_campaign=my_campaign&utm_source=google&utm_medium=cpc&utm_term=my_keyword&utm_content=ad_variation1") 在 Android 上完成这项工作，但**在 iOS 上它必须是格式正确的 Web url**，例如：

[http://www.google.com?utm_campaign=my_campaign&utm_source=google&utm_medium=cpc&utm_term=my_keyword&utm_content=ad_variation1](http://www.google.com?utm_campaign=my_campaign&utm_source=google&utm_medium=cpc&utm_term=my_keyword&utm_content=ad_variation1)

在分析上报告。他们肯定在使用正则表达式，因为任何随机站点名称都可以使用并且要小心，该站点不能在“.com”之后包含“/”

与**setReferrerUrl:referrer**相同，您不能使用 Google 提到的“google.com”或“myOtherApp”之类的字符串，而是使用有效的 url，例如“ [http://www.google.com](http://www.google.com) ”或“ [http://test”。 com/2](http://test.com/2) "

希望能帮助到你

# flash - 从 play 2.04 迁移到 play 2.1 的问题

> ID：15335581
> 
> 赞同：0
> 
> 时间：2013-03-11T09:55:41.200
> 
> 标签：flash, session, request

我正在将我的应用程序从 play 2.0.4 迁移到 play 2.1.0。Play 2.1 无法识别视图中的 flash、会话或请求，导致编译错误

如何在 play-2.1.0 中表示来自 play-2.0.4 的以下代码

A、闪光

```
@if(flash.contains("success")) {
        <p class="success">@flash.get("success")</p>

        } 
```

B.会话 -----

```
@if(nav == "signup" && session.get("sitetype")=="public") 
```

C. 请求

```
var chatSocket = new WS("@routes.Chat.chat(username).webSocketURL(request)") 
```

错误日志

```
[error] /Users/abhijitbasu/SampleApps/smartex-app/app/views/chatRoom.scala.html:120: not found: value request
[error]             var chatSocket = new WS("@routes.Chat.chat(username).webSocketURL(request)")
[error]                                                                               ^
                              ^
[error] /Users/abhijitbasu/SampleApps/smartex-app/app/views/login.scala.html:16: not found: value flash
[error]         @if(flash.contains("success")) {
[error]             ^
[error] /Users/abhijitbasu/SampleApps/smartex-app/app/views/main.scala.html:159: not found: value session
[error]                                     @if(nav == "signup" && session.get("sitetype")=="public") {
[error]                                                            ^
[error] /Users/abhijitbasu/SampleApps/smartex-app/app/views/mediainsight.scala.html:109: not found: value session
[error]              ajaxpage(rootdomain+'@routes.Chat.chatRoom(session.get("firstname") + ' ' + session.get("lastname"))', 'contentarea')
[error]                                                         ^
[error] /Users/abhijitbasu/SampleApps/smartex-app/app/views/signup/form.scala.html:39: not found: value flash
[error]                     <p class="error">@flash.get("error")</p> 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-25T07:44:16.707

聚会有点晚了，但我有 C 部分的解决方案。

在 chatRoom.scala.html 的顶部添加`@(username: String)(implicit request: play.mvc.Http.Request)`

这会带来错误，因为请求需要通过。您可能正在调用类似于 的代码`ok(chat.render(username));`，请将其更改为`ok(chat.render(username, request()))`;

在 plugin.sbt 中，添加以下行：`javacOptions += "-Xlint:deprecation"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:37:32.180

添加附件和导入模板有帮助

val appDependencies = Seq（javaCore，“org.apache.commons”%“commons-email”%“1.3.1”

```
) 
```

val main = play.Project(appName, appVersion, appDependencies) .settings( templatesImport ++= Seq("play.mvc.Http.Context.Implicit._") )

# uitableview - 'UITableView' 没有可见的@interface 声明选择器

> ID：15335587
> 
> 赞同：0
> 
> 时间：2013-03-11T09:55:53.057
> 
> 标签：uitableview, ios6

我有一个 UIViewController，我试图从中加载 2 个 UITableViews。

我有一个名为 FirstTableViewController 的类，它是`UITableViewController`. 我已经尝试了以下代码，它运行时没有错误或警告

```
ViewController.m

UITableView *tableView = [[UITableView alloc] initWithFrame:CGRectMake(0.0, 0.0, 320.0, 460.
style:UITableViewStylePlain];
[self.view addSubview:tableView]; 
```

现在，我尝试使用这段代码

```
ViewController.m

FirstTableViewController *tableView1 = [[FirstTableViewController alloc] initWithFrame:CGRectMake(0.0, 0.0, 320.0, 460.0) style:UITableViewStylePlain];
[self.view addSubview:tableView1]; 
```

我收到以下错误消息。

```
No visible @interface for 'FirstTableViewController' declares the selector 'initWithFrame:style:' 
```

为什么此代码适用于`UITableView`类并在其子类中失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:21:05.850

您不能单独将控制器的对象添加为子视图。您的类是从 uitableviewcontroller 继承的，并且您已经创建了此类的一个对象，并且您正在将其自己的视图添加为子视图。那是错的

# c# - 如何在 Windows azure 中使用启动任务来运行节点 js 文件？

> ID：15335588
> 
> 赞同：0
> 
> 时间：2013-03-11T09:55:54.670
> 
> 标签：c#, node.js, azure, cmd, iisnode

我想通过在角色启动时在 cmd 提示符下运行我的 App.js 脚本来启动节点 js 服务器。（在 cmd.exe 中运行“node App.js”）

我遇到了 azure 中启动任务的功能。像这样的东西

```
<Startup>
  <Task commandLine="cmd.exe node App.js" executionContext="elevated" taskType="background">
  </Task>
</Startup> 
```

但它不起作用。有谁知道如何将写命令放在命令行中以便 App.js 运行？而且它似乎命令行任务是相对于 AppRoot\Bin 文件夹的部署，所以我必须把 cmd.exe 和 App.js 放在 bin 文件夹中。在发布到我的 azure 帐户时，我认为将它们放在 bin 文件夹中不可行吗？

无论哪种方式，如果有人能告诉我如何在我的角色启动时自动启动节点 js 脚本，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-11T10:05:30.953

请阅读以下文章之一。

*   [http://d.hatena.ne.jp/waritohutsu/20110801/1312224615](http://d.hatena.ne.jp/waritohutsu/20110801/1312224615)
*   [http://d.hatena.ne.jp/waritohutsu/20110917/1316274625](http://d.hatena.ne.jp/waritohutsu/20110917/1316274625)

# java - 带有条件的 IllegalMonitorStateException

> ID：15335589
> 
> 赞同：0
> 
> 时间：2013-03-11T09:55:54.857
> 
> 标签：java, conditional-statements, illegalmonitorstateexcep

所以我正在尝试编写一个打印出以下输出的程序：

44
33
22
11

该程序应该是多线程的，并且必须使用锁来防止竞争条件。它还必须利用 Condition 以便当线程要打印的数字与变量 threadnum（必须打印的下一个数字）不对应时，它必须等待。我已经得到了大部分它，除了当我尝试运行它时我得到 IllegalMonitorStateExceptions 并且我不确定是什么导致它，也不知道如何修复它。我会很感激一些帮助。提前致谢。

```
public class Threadlocksrev implements Runnable {
Lock lock = new ReentrantLock();
Condition wrongNumber = lock.newCondition();
int i;
static int threadnum = 4;

public Threadlocksrev(int i){
    this.i = i;
}

private int getI(){
    return i;
}

@Override
public synchronized void run() {
    lock.lock();
    while(true){
        if (threadnum == i){
            try{
                System.out.print(getI());
                System.out.print(getI());
                System.out.print("\n");
                threadnum--;
                wrongNumber.signalAll();
            }
            catch(Exception e){
                e.printStackTrace();
            }
            finally{

                lock.unlock();
            }
        }
            else{
                try {
                    wrongNumber.await();
                } 
                catch (InterruptedException e) {
                    e.printStackTrace();
                }
                finally{
                    wrongNumber.signalAll();
                    lock.unlock();
                }
            }

        }
    }
} 
```

主要类：

```
public class ThreadlocksrevInit {

private static final int max_threads = 4;

public static void main(String[] args) {
    Threadlocksrev task1 = new Threadlocksrev(1);
    Threadlocksrev task2 = new Threadlocksrev(2);
    Threadlocksrev task3 = new Threadlocksrev(3);
    Threadlocksrev task4 = new Threadlocksrev(4);
    Thread thread1 = new Thread(task1);
    Thread thread2 = new Thread(task2);
    Thread thread3 = new Thread(task3);
    Thread thread4 = new Thread(task4);

    thread1.start();
    thread2.start();
    thread3.start();
    thread4.start();
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:01:04.697

您正忙于在同一个线程中旋转，一遍又一遍地尝试解锁，当调用线程不拥有锁时，这会导致您的非法监视器状态异常。在这段代码中：

```
if (threadnum == i){ 
```

您正在将静态变量与线程的索引进行比较。因为静态变量将是相同的值（在设置所有线程之后），所以您只为一个相同的线程调用 while 循环。所有其他人都被阻止了。因为你这样做：

```
lock.lock(); 
```

***在 while 循环之外***，唯一运行的线程仅在第一次正确执行（也就是当它有锁时）。在循环的所有其他迭代中，它没有有效的锁，所以当它调用时：

```
finally{
    lock.unlock();
} 
```

你得到你的非法监视器状态异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:04:00.027

您需要`lock.lock();`在`while`循环内移动。

但是，我不确定为什么您根本需要在同步块中使用锁...特别是，您的每个线程都使用不同的锁/条件，因此程序不太可能执行您需要的操作。你可能打算制作`lock`静态？

# c# - c#系统IO，读取文件

> ID：15335594
> 
> 赞同：-1
> 
> 时间：2013-03-11T09:56:07.810
> 
> 标签：c#, io, system

我在文本板中有一个文件：

```
"ID","Product Code","Supplier Code","Description","SEO Page Title","SEO Meta Description","SEO Meta Keywords","On-Page Name","On-Page Description","On-Page Features","Smart URL"
"1","301897","N/A","Brother DR7000 Drum","Brother DR7000 Drum",,"Brother Drum","Brother DR7000 Drum",,,"301897-brother-drum"
"2","300021","N/A","Post-It Index Arrows 12mm 684-ARR4","Post It Index Arrows 12mm 684 ARR4",,"Post It Index Arrows ","Post-It Index Arrows 12mm 684-ARR4",,,"300021-post-it-index-arrows"
"8558","SMP26","N/A","Shoreline SMP26 Portable Pharmacy Refrigerator","Shoreline SMP26 Portable Pharmacy Refrigerator",,,"Shoreline SMP26 Portable Pharmacy Refrigerator","·         12 Volt DC (fitted with Car cigarette lighter connection for mobile operation) or 220/110 Volt AC (fitted with 3 pin plug for mains power operation)
·         385mmH x 345mmW x 510mm/26 litres Capacity/33 watts
·          RPSGB, NHS, WHO, RCVS compliant 
·         Digital LED Temperature Display/Audio / Visual Temperature Alarm
385mmH x 345mmW x 510mm/26 litres Capacity/33 watts
RPSGB, NHS, WHO, RCVS compliant 
Digital LED Temperature Display/Audio / Visual Temperature Alarm
2 Years Parts & Labour Warranty (UK only)
","smp26-shoreline-smp26-portable-pharmacy-refrigerator"
"8559","SMP41","N/A","Shoreline SMP41 Portable Pharmacy Refrigerator","Shoreline SMP41 Portable Pharmacy Refrigerator",,,"Shoreline SMP41 Portable Pharmacy Refrigerator","<p class=""MsoNormalCxSpMiddle"" style=""text-align: right; line-height: normal; margin: 0cm 21.25pt 0pt 0cm; mso-add-space: auto;"" align=""right""><span style=""font-family: Arial; font-size: small;"">&nbsp;</span></p>&#13;&#10;<p class=""MsoNormalCxSpMiddle"" style=""margin: 0cm 0cm 0pt;""><span style=""font-family: Arial; font-size: small;"">&nbsp;</span></p>","12 Volt DC (fitted with Car cigarette lighter connection for mobile operation) or 220/110 Volt AC (fitted with 3 pin plug for mains power operation)
400mmH x 610mmW x 385mmD/41 litres Capacity
Temperature Range +2Â°C to +8Â°C/Forecd air cooling/Digital LED temperature display/Audio Visual temperature alarm
Suitable for Vaccine & Pharmaceutical Storage 
RPSGB, NHS, WHO, RCVS compliant 
2 Years Parts & Labour Warranty (UK only)
","smp41-shoreline-smp41-portable-pharmacy-refrigerator" 
```

该文件中有回车和大量垃圾数据。在加载到数据库之前，我基本上需要执行以下操作。我需要读取文件对文本文件中的值做一些事情，然后输出新文件。

如果你看上面，行：

```
"1","301897","N/A","Brother DR7000 Drum","Brother DR7000 Drum",,"Brother Drum","Brother DR7000 Drum",,,"301897-brother-drum"
"2","300021","N/A","Post-It Index Arrows 12mm 684-ARR4","Post It Index Arrows 12mm 684 ARR4",,"Post It Index Arrows ","Post-It Index Arrows 12mm 684-ARR4",,,"300021-post-it-index-arrows" 
```

是正确的。

但是行：

```
"8558","SMP26","N/A","Shoreline SMP26 Portable Pharmacy Refrigerator","Shoreline SMP26 Portable Pharmacy Refrigerator",,,"Shoreline SMP26 Portable Pharmacy Refrigerator","·         12 Volt DC (fitted with Car cigarette lighter connection for mobile operation) or 220/110 Volt AC (fitted with 3 pin plug for mains power operation)
·         385mmH x 345mmW x 510mm/26 litres Capacity/33 watts
·          RPSGB, NHS, WHO, RCVS compliant 
·         Digital LED Temperature Display/Audio / Visual Temperature Alarm
385mmH x 345mmW x 510mm/26 litres Capacity/33 watts
RPSGB, NHS, WHO, RCVS compliant 
Digital LED Temperature Display/Audio / Visual Temperature Alarm
2 Years Parts & Labour Warranty (UK only)
","smp26-shoreline-smp26-portable-pharmacy-refrigerator" 
```

哪个坏了，

我需要写一些代码，当你看到一个“（一个数字）然后在文件中创建一个新行，否则附加到上一行。

我需要创建一个 webform 应用程序或控制台应用程序，这并不重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:12:22.267

您想要的是一个支持引用字符串的正确 CSV 解析器。这个问题可能有答案... [Parsing CSV files in C#, with header](https://stackoverflow.com/questions/2081418/parsing-csv-files-in-c-sharp) .

如果您真的不能使用外部代码，请尝试您在评论中提供的代码的修改版本：

```
StreamReader reader = new StreamReader("input.txt");
List<string> result = new List<string>();
string new_line = reader.ReadLine();
string full_line = null;
while (new_line != null)
{
    // concatenate input when full_line not complete
    full_line = (full_line == null) ? new_line : full_line + new_line;
    // check for expected line completion pattern
    // looking for a " that is not escaped \" ... adapt this to your input assumptions
    if (new_line.EndsWith("\"") && !new_line.EndsWith("\\\""))
    {
        result.Add(full_line);
        full_line = null;
    }
    new_line = reader.ReadLine();
} 
reader.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:28:08.440

是的，伙计们，我想我们已经成功了。谢谢

```
StreamReader reader = new StreamReader(@"C:\test.txt");
StreamWriter writer = new StreamWriter(@"C:\test2.txt", true);

List<string> result = new List<string>();
string new_line = reader.ReadLine();
string full_line = null;

while (new_line != null)
{
    full_line = (full_line == null) ? new_line : full_line + new_line;

    if (new_line.EndsWith("\"") && !new_line.EndsWith("\\\""))
    {
        //Write to the List
        result.Add(full_line);
        //Reset the whole line
        full_line = null;
    }

    //Read the next line
    new_line = reader.ReadLine();
}

//Close the connection
reader.Close();

foreach (string readResult in result)
    writer.WriteLine(readResult); 
```

谢谢大家非常感谢

# c# - C# - Winforms 控件继承了奇怪的样式

> ID：15335600
> 
> 赞同：0
> 
> 时间：2013-03-11T09:56:31.680
> 
> 标签：c#, winforms, button, padding, styling

我有一个项目，我在其中使用 tableLayoutPanles 来组织用户控件中的控件。在设计时一切看起来都很好，但是一旦我运行应用程序，样式就会变得疯狂。按钮上的填充变得非常大。一旦我在运行时以编程方式将用户控件移动到另一个窗体（更改其父窗体），它就会正常运行。

我想我可能在第一种形式中设置了一些愚蠢的属性来强制它继承 syling。我检查了很多东西，但找不到一些。

有人对它可能是什么有一些指示吗？

# c# - EntityFramework 是否可用于 Windows 8 应用商店应用？

> ID：15335601
> 
> 赞同：13
> 
> 时间：2013-03-11T09:56:35.097
> 
> 标签：c#, visual-studio-2012, entity-framework-5, windows-store-apps, .net-4.5

EntityFramework 是否可用于 Windows 8 应用商店应用？

我正在使用适用于 Windows 8 的 Visual Studio 2012 Express。我开始怀疑，因为我无法让它工作。

我从 NuGet 安装了实体框架包我将 System.Data.Entity 和 System.Data.Design 添加到项目中

但无论我做什么，都无法识别 DbContext ......

有任何想法吗？

编辑：

EntityFramework 不适用于 Windows 应用商店应用。我不明白微软在这方面的立场，他们很烂。

另一种解决方案是使用 SQLite，但它不是 ORM。那么有什么意义呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T10:28:42.497

据我所知，Windows 8 应用商店应用程序以 WinRT（Windows 运行时）为目标。

出于这个原因，因为可以使用 C# 来定位 WinRT，并且 .NET Framework 中的许多类在 WinRT 中具有匹配项，所以大多数不使用非常特定的库的可用代码库也可以在 Windows 8 应用商店应用程序上运行。

WinRT 中有很多东西不可用。例如，Entity Framework 构建在 ADO.NET 之上，而这在 WinRT 上不可用。

Visual Studio*足够聪明，*可以隐藏 WinRT 上不可用的类和组件，这就是为什么不能在 Windows 8 应用商店应用项目中使用与实体框架相关的类的原因。

为了使用实体框架，您需要创建一个 RESTful Web API（例如使用 ASP.NET Web API）并通过网络异步访问数据层。

否则，您将需要使用本地数据库存储，如 SQLite 或 XML。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T10:12:12.513

Entity Framework 不适用于 Windows 8 应用商店应用。这是因为 Windows 存储应用程序在沙箱中运行，无法使用普通数据库。您可以为此使用 SQLite 或将 XML / JSON 作为源，您可以在应用程序的首次启动时将其部署在应用程序的独立存储中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T10:21:41.517

不，它不可用。你可以使用 SQLite，这个[HowTo](http://timheuer.com/blog/archive/2012/08/07/updated-how-to-using-sqlite-from-windows-store-apps.aspx)对我很有帮助。效果很好！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-29T21:51:29.210

郑重声明：答案是否定的，转机是创建 Web 服务或使用云服务。SqlLite 适用于存储本地（单用户）信息，但仅此而已。

关于这个问题，不是全部，而是大多数与数据库的连接都是通过套接字连接完成的。所以它可以连接到某个数据库并仍然将应用程序保存在沙箱中。但是，MS 的意图很明确：云或萧条。所以 MS 说最好连接到 Web 服务（另一个套接字连接），它效率低下（并且有风险），而不是使用直接连接。

Windows 应用商店应用程序简直是次要的。

为了增加对伤害的侮辱，MS希望从我们的软件中减少一些收入。

我真的很想喜欢 WinRT（现在是 UWP），但这是不可能的。在这 3 年中，情况并没有发生任何变化。

# servicestack - 向 ServiceStack 身份验证提供程序添加功能

> ID：15335606
> 
> 赞同：3
> 
> 时间：2013-03-11T09:56:53.390
> 
> 标签：servicestack, ormlite-servicestack

我正在使用 OrmLite 评估 ServiceStack。内置的 Auth 服务以及 Session 和 Cache 比 ASP.NET 成员提供程序要好得多。

但是，开箱即用的身份验证服务不提供我们想要构建的应用程序所需的一些功能，例如：

*   更改密码
*   3 次登录尝试失败后锁定帐户
*   禁用用户帐户
*   密码提醒问答
*   登录尝试的审核日志

我是否需要构建自定义身份验证提供程序，或者是否有已经提供此功能的东西？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:37:15.943

这就是我所做的，效果很好。- 我意识到“新”是一种代码气味，只需注入它 :)

```
 private int LoginAttempts = 0;

    public override bool TryAuthenticate(IServiceBase authService, string userName, string password)
    {
        var authRepo = authService.TryResolve<IUserAuthRepository>();

        if (authRepo == null)
        {
            Log.WarnFormat("Tried to authenticate without a registered IUserAuthRepository");
            return false;
        }

        var session = authService.GetSession();

        UserAuth userAuth = null;

        if (authRepo.TryAuthenticate(userName, password, out userAuth))
        {
            session.PopulateWith(userAuth);

            session.IsAuthenticated = true;

            session.UserAuthId = userAuth.Id.ToString(CultureInfo.InvariantCulture);

            session.ProviderOAuthAccess = authRepo.GetUserOAuthProviders(session.UserAuthId)
                .ConvertAll(x => (IOAuthTokens)x);

            return true;
        }
        else
        {
            LoginAttempts++;

            if (LoginAttempts >= 3)
            {
                ServiceStack.ServiceInterface.Service s = new Service();

                s.Db.ExecuteSql("update [User] set AccountLocked = 'true' where Email='" + userName + "'");
            }

            authService.RemoveSession();
            return false;
        }
    } 
```

我希望 mod_from_hell 设法不理会这个！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:30:17.117

我刚刚开始实施密码重置，并且可以看到两种实现方法（我还没有测试过 - 甚至没有尝试过）：

1.创建一个继承自Registration并处理PUT的类。然后应该可以调用注册类的 UpdateUserAuth 方法来更改密码。问题 - 对我来说 - 这里是 put 验证需要指定用户名和密码，而不仅仅是一个（我们只使用电子邮件作为标识符）。这可以通过关闭验证功能来解决。

2.创建一个密码重置服务，该服务执行 UpdateUserAuth 所做的工作。

```
var session = this.GetSession();
var existingUser = UserAuthRepo.GetUserAuth(session, null);
if (existingUser == null)
{
    throw HttpError.NotFound("User does not exist");
}

var newUserAuth = ToUserAuth(request);
UserAuthRepo.UpdateUserAuth(newUserAuth, existingUser, request.Password); 
```

显然需要在里面添加一些适当的验证。

**更新**

我已将更改密码提醒/重置服务作为[要点](https://gist.github.com/miketrebilcock/5195817)（我的第一个要点！）

# java - 从 Java 程序更改 Active Directory 用户密码

> ID：15335614
> 
> 赞同：4
> 
> 时间：2013-03-11T09:57:21.687
> 
> 标签：java, active-directory, passwords, ldap

我有 Active Directory，其中有用户，我正在尝试从 Java 程序更改用户密码，如下所示：

```
Properties prop = new Properties();
prop.put(Context.INITIAL_CONTEXT_FACTORY,"com.sun.jndi.ldap.LdapCtxFactory");
prop.put(Context.SECURITY_AUTHENTICATION, "simple");
prop.put(Context.SECURITY_PRINCIPAL,"user1");
prop.put(Context.SECURITY_CREDENTIALS,"pass1");
prop.put(Context.SECURITY_PROTOCOL,"ADSecurityProtocol");
prop.put(Context.PROVIDER_URL, "ldap://host:389/OU=My Org,DC=domain,DC=com");
try
{
     LdapContext ctx =new InitialLdapContext(prop,null);
     String oldPassword="pass1";
     String newPassword="passnew1";
     ModificationItem[] mods = new ModificationItem[2];
     String oldQuotedPassword = "\"" + oldPassword + "\"";
     byte[] oldUnicodePassword = oldQuotedPassword.getBytes("UTF-16LE");
     String newQuotedPassword = "\"" + newPassword + "\"";
     byte[] newUnicodePassword = newQuotedPassword.getBytes("UTF-16LE");

     mods[0] = new ModificationItem(DirContext.REMOVE_ATTRIBUTE,
                   new BasicAttribute("unicodePwd", oldUnicodePassword));
     mods[1] = new ModificationItem(DirContext.ADD_ATTRIBUTE,
                   new BasicAttribute("unicodePwd", newUnicodePassword));

     String theUserName="CN="+"user1"+",OU=My Org,DC=domain,DC=com";
     // Perform the update
     ctx.modifyAttributes(theUserName, mods);
     System.out.println("Changed Password for successfully");
     ctx.close();
}
     catch (Exception e) {
          System.err.println("Problem changing password: " + e);
} 
```

我得到的错误信息是：

```
Problem changing password: javax.naming.NamingException: 
[LDAP: error code 1 - 000020D6: SvcErr: DSID-031007DB, 
problem 5012 (DIR_ERROR), data 0]; remaining name 
'CN=user1,OU=My Org,DC=domain,DC=com' 
```

**编辑1：**

**根据建议，我也尝试过使用端口 636 和 ldaps：**

```
prop.put(Context.PROVIDER_URL, "ldap://host:636/OU=My Org,DC=domain,DC=com");  
Also tried
prop.put(Context.PROVIDER_URL, "ldaps://host:636/OU=My Org,DC=domain,DC=com");  

I am getting MalformedURLException: Invalid URI: 
Invalid URI: Org,DC=domain,DC=com] 
```

当我尝试时（不确定是否有任何东西在 636 上监听，看来是这样）：

```
$ telnet LDAPHost 636
Escape character is '^]'.
Connection closed by foreign host. 
```

**编辑2：**

```
Changed:
 prop.put(Context.PROVIDER_URL, "ldap://host:636/OU=My Org,DC=domain,DC=com");  
to:
 prop.put(Context.PROVIDER_URL, "ldap://host:636/OU=My%20Org,DC=domain,DC=com"); 
```

错误是：

```
javax.naming.CommunicationException: simple bind failed: host:636 
[Root exception is java.net.SocketException: Connection reset] 
```

可能 LDAP 服务器甚至没有监听 ssl 端口：636

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T10:08:51.753

> [ `unicodePwd`] 属性可以在受限条件下写入 [...] 为了修改此属性，客户端必须具有与服务器的 128 位安全套接字层 (SSL) 连接。

您只有一个普通的不安全`ldap://`连接而不是`ldaps://`，因此根据上述限制将无法正常工作。

在以下位置查看更多详细信息：http: [//support.microsoft.com/kb/269190](http://support.microsoft.com/kb/269190)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T14:48:13.037

执行密码更改调用的 JVM 需要受到目录服务提供者的信任。这意味着将从 AD 生成的证书导入 JVM 信任库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-25T05:40:05.387

如果您在 Windows 上，那么您可以调用[`NetUserChangePassword()`](https://docs.microsoft.com/en-us/windows/desktop/api/lmaccess/nf-lmaccess-netuserchangepassword)内部可用的函数`netapi32.dll`。

使用[`JNA`](https://github.com/java-native-access/jna)，代码将是这样的：

```
public static int changeActiveDirectoryUserPassword(String activeDirectoryIP, String username, String oldPassword, String newPassword)
{
    int status = Netapi32.INSTANCE.NetUserChangePassword(activeDirectoryIP, username, oldPassword, newPassword);

    switch(status)
    {
        case WinError.ERROR_INVALID_PARAMETER: // The parameter is incorrect
        case WinError.ERROR_ACCESS_DENIED: // The user does not have access to the requested information
        case WinError.ERROR_INVALID_PASSWORD: // The user has entered an invalid password
        case LMErr.NERR_InvalidComputer: // The computer name is invalid
        case LMErr.NERR_NotPrimary: // The operation is allowed only on the primary domain controller of the domain
        case LMErr.NERR_UserNotFound: // The user name could not be found
        case LMErr.NERR_PasswordTooShort: // The password is shorter than required. (The password could also be too
                                          // long, be too recent in its change history, not have enough unique
                                          // characters, or not meet another password policy requirement.)
        case LMErr.NERR_Success: // function succeeds
        default: return status;
    }
} 
```

* * *

~~**注意：**与 ldap 方法不同，即使旧密码已过期，此方法也可以使用。~~

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-29T02:24:20.750

基本上，您需要修改`unicodePwd`用户的属性。

我使用 AWS Simple AD 实施，因为它基于 Samba 4，所以这个属性不起作用。你需要`clearTextPassword`在这种情况下使用。请参阅我的博客文章： [http ://blog.techutils.space/2016/02/changeing-samba4-aws-simple-ad-user.html](http://blog.techutils.space/2016/02/changing-samba4-aws-simple-ad-user.html)

注意：AWS Simple AD 尚不支持 SSL，因此请找到降低此风险的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-29T07:57:51.940

您必须更改属性。尝试`unicodePwd`改变`userpassword`

从 ：

```
 mods[0] = new ModificationItem(DirContext.REMOVE_ATTRIBUTE,
               new BasicAttribute("unicodePwd", oldUnicodePassword));
 mods[1] = new ModificationItem(DirContext.ADD_ATTRIBUTE,
               new BasicAttribute("unicodePwd", newUnicodePassword)); 
```

至 ：

```
mods[0] = new ModificationItem(DirContext.REMOVE_ATTRIBUTE,
                   new BasicAttribute("userpassword", oldUnicodePassword));
mods[1] = new ModificationItem(DirContext.ADD_ATTRIBUTE,
                   new BasicAttribute("userpassword", newUnicodePassword)); 
```

# mercurial - 允许拉入存储库但阻止克隆 Apache 服务的存储库

> ID：15335618
> 
> 赞同：0
> 
> 时间：2013-03-11T09:57:32.227
> 
> 标签：mercurial, hgweb

我有一个工作流程，我需要允许用户能够从 Apache 托管的 mercurial 存储库中提取新更改，但阻止他们进行新的克隆。

关于如何做到这一点的任何想法？

谢谢

*   使用 hgweb.wsgi 使用 apache vhost 为存储库提供服务（已接受解决方法）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:03:29.303

A`clone`只是 a`init`后跟 a `pull`，所以你不能停止克隆 w/o 也打破拉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:04:17.650

最简单的方法是通过常规 HTTP 发布捆绑包，并允许用户下载和应用它们。见`hg help bundle`：

```
Generate a compressed changegroup file collecting changesets not known to
be in another repository.

The bundle file can then be transferred using conventional means and
applied to another repository with the unbundle or pull command. This is
useful when direct push and pull are not available or when exporting an
entire repository is undesirable.

Applying bundles preserves all changeset contents including permissions,
copy/rename information, and revision history. 
```

# eclipse - 启动器活动名称作为android中的项目名称

> ID：15335620
> 
> 赞同：0
> 
> 时间：2013-03-11T09:57:37.063
> 
> 标签：eclipse

在我的 Eclipse 中导入项目时，我得到（启动器活动名称作为项目名称）。在 Android 中

我怎样才能获得项目名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:49:01.070

查看`.project`项目根目录下的文件

特别是，`<name>`关键在`<projectDescription>`

# java - 移动应用测试——随机测试

> ID：15335624
> 
> 赞同：0
> 
> 时间：2013-03-11T09:57:39.847
> 
> 标签：java

我目前正在使用junit和robotium进行黑盒测试（随机测试）。我在将数据传递给测试方法时遇到问题。2个文件，一个是`getData.java`（从文本文件中读取测试用例并转换为数组），另一个是`testMain.java`（测试android应用程序的测试方法）。

如果测试方法有参数，另一个问题是无法运行 junit 测试。

此代码是可执行的

```
public void testDisplayBlackBox() {

        //Enter 10 in first editfield
        solo.enterText(0, data1);

        //Enter 20 in first editfiel
        solo.enterText(1, "3");

        //Click on Multiply button
        solo.clickOnButton("Multiply");

        //Verify that resultant of 10 x 20 
        assertTrue(solo.searchText("0"));

        } 
```

但是如果传递和参数以获取数据，则会发生错误，junit 将跳过此方法

```
public void testDisplayBlackBox(string a) {

string b =a[0];

        //Enter 10 in first editfield
        solo.enterText(0, b);

        //Enter 20 in first editfiel
        solo.enterText(1, "3");

        //Click on Multiply button
        solo.clickOnButton("Multiply");

        //Verify that resultant of 10 x 20 
        assertTrue(solo.searchText("0"));

        } 
```

# google-cloud-storage - gsutil setwebcfg 奇怪的子文件夹行为

> ID：15335628
> 
> 赞同：2
> 
> 时间：2013-03-11T09:57:51.113
> 
> 标签：google-cloud-storage

谷歌云存储似乎提供了不同的行为，无论文件夹是从 Web 客户端访问的，是否有尾随 /

一个简单的测试显示了以下链接的不同行为

*   [http://gstest.tekartik.com/sub/dir](http://gstest.tekartik.com/sub/dir)（无法加载 css - 背景为白色）
*   [http://gstest.tekartik.com/sub/dir/](http://gstest.tekartik.com/sub/dir/)（工作正常 - 背景为黑色）

已使用以下方式配置存储桶的位置：

`gsutil setwebcfg -m index.html -e 404.html gs://gstest.tekartik.com`

有关信息，它包含 3 个简单文件 index.html/404.html/style.css 其中 style.css 仅将背景设置为黑色。他们都正确地“重定向”到网址[http://gstest.tekartik.com/sub/dir/index.html](http://gstest.tekartik.com/sub/dir/index.html)。但是，相对路径不允许在第一种情况下正确加载 style.css。

我想要的是使用尾随 / 重定向第一种情况（这是 Amazon S3 所做的）。这需要什么才能正常工作，以便我可以向某人提供 url 而不必担心是否输入了尾随 /？

作为一个方面，这在根级别工作正常（[http://gstest.tekartik.com/](http://gstest.tekartik.com/)自动重命名为[http://gstest.tekartik.com](http://gstest.tekartik.com)因为这里不需要尾随 / ）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T02:31:12.503

我已经与工程团队进行了交谈，我们同意这应该按您预期的方式工作。这将在短期内通过添加存储桶配置设置以启用预期行为来解决（需要额外的配置步骤以避免根据当前行为破坏任何应用程序）。我们还计划通过 gsutil 轻松更新新的配置设置。我不能确切地说这些更改何时可用，但请关注[gs-announce 组](https://groups.google.com/group/gs-announce)以监控有关 Google Cloud Storage 的这些（和其他）详细信息。谢谢让我们注意到这个。

更新（2013 年 6 月 3 日）：此问题现已在生产中修复。

# profiling - 在 Cray Chapel 中收集有关 GASNet 通信操作的信息

> ID：15335629
> 
> 赞同：4
> 
> 时间：2013-03-11T09:57:53.830
> 
> 标签：profiling, cray, gasnet, chapel

开发一个基本的分析器，它将收集 Cray Chapel 中 GASNet 通信操作的开始和结束时间。想到的唯一想法是在 Chapel 通信函数中插入指令以获取函数调用时间。有没有办法在不弄乱语言源代码的情况下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-13T06:21:38.943

GASNet 具有强大的内置跟踪基础设施，可用于收集任何 GASNet 客户端的通信跟踪。它是通过使用 --enable-trace 配置 GASNet 来启用的。通过 --enable-stats 还可以使用统计收集功能。有关这些的更多信息，请参阅此处自述文件的“GASNet 跟踪和统计收集”部分：

[https://bitbucket.org/berkeleylab/gasnet/overview](https://bitbucket.org/berkeleylab/gasnet/overview)

请注意，这些跟踪和统计功能主要是为调试 GASNet 和语言运行时系统而编写的，并且可能会带来显着的执行时间开销（跟踪情况下的 CPU 和文件 I/O）。此外，所有信息都将处于 GASNet 操作和内存位置级别，而不是高级语言。因此，它无需更改即可工作，并会为您提供大量信息，但它可能不适合您的教堂分析需求。

# java - 编译时在类路径上找到类，但在运行时找不到

> ID：15335630
> 
> 赞同：0
> 
> 时间：2013-03-11T09:57:58.473
> 
> 标签：java, classpath

我编写了一个 Java 类，它实现了在另一个目录中指定的接口。我像这样编译应用程序：

```
javac ArrayQueue.java -cp QueueArray 
```

该类`ArrayQueue`实现了`Queue`目录中的接口`QueueArray`。如果没有指定的类路径，编译器将按预期抛出错误。

但是，之后运行程序时，它再也找不到类了：

```
java ArrayQueue -cp QueueArray
Exception in thread "main" java.lang.NoClassDefFoundError: Queue 
```

这可能是什么原因造成的？

**编辑：**如果我将`.class`文件复制到与`ArrayQueue.class`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:19:57.760

这可能会有所帮助。来自[JLS，第 3 版](http://docs.oracle.com/javase/specs/jls/se5.0/html/packages.html)：

> Java 平台的实现必须支持至少一个未命名的包；**它可能支持多个未命名的包，但不是必须这样做。每个未命名的包中有哪些编译单元由主机系统决定**。
> 
> 在使用分层文件系统存储包的 Java 平台实现中，一种典型的策略是将未命名的包与每个目录相关联。**一次只能观察到一个未命名的包，即与“当前工作目录”相关联的包。**“当前工作目录”的确切含义取决于主机系统。

您使用的 JVM 似乎不支持默认包，除非它们与当前目录关联，也就是您从中启动自定义队列类的目录。

一般来说，使用默认包是个坏主意，我的建议是将两个类与一个包相关联，重新编译并重新测试您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:59:28.743

采用`java -classpath . class_having_main_method`

# c# - 修改 ISAPI 和 CGI 扩展

> ID：15335635
> 
> 赞同：4
> 
> 时间：2013-03-11T09:58:17.167
> 
> 标签：c#, iis, cgi, isapi

我的 IIS 服务器有问题，

如何使用 C# 语言修改 ISAPI 元素？

例如：ASP.net V4.0 限制为“不允许”。我想设置为“允许”，如下图所示。

![在此处输入图像描述](../Images/1cd8c3ea8833fa49e9102b7c87ad3fe4.png)

我可以使用此代码添加元素。但我无法修改。

```
using System;
using System.Text;
using Microsoft.Web.Administration;

internal static class Sample
{
   private static void Main()
   {
      using (ServerManager serverManager = new ServerManager())
      {
         Configuration config = serverManager.GetApplicationHostConfiguration();
         ConfigurationSection isapiFiltersSection = config.GetSection("system.webServer/isapiFilters");
         ConfigurationElementCollection isapiFiltersCollection = isapiFiltersSection.GetCollection();

         ConfigurationElement filterElement = isapiFiltersCollection.CreateElement("filter");
         filterElement["name"] = @"SalesQueryIsapi";
         filterElement["path"] = @"c:\Inetpub\www.contoso.com\filters\SalesQueryIsapi.dll";
         filterElement["enabled"] = true;
         filterElement["enableCache"] = true;
         isapiFiltersCollection.Add(filterElement);

         serverManager.CommitChanges();
      }
   }
} 
```

谢谢你的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T15:24:09.397

我找到了解决方案。我更改了如下代码。它奏效了。

```
private void buttonOK_Click(object sender, EventArgs e)
   {

        using (ServerManager serverManager = new ServerManager())
        {
            Configuration config = serverManager.GetApplicationHostConfiguration();
            ConfigurationSection isapiCgiRestrictionSection = config.GetSection("system.webServer/security/isapiCgiRestriction");
            ConfigurationElementCollection isapiCgiRestrictionCollection = isapiCgiRestrictionSection.GetCollection();
            foreach (ConfigurationElement element in isapiCgiRestrictionCollection)
            {
                element.SetAttributeValue("allowed", false);
            }

            ConfigurationElement addElement = isapiCgiRestrictionCollection.CreateElement("add");

            serverManager.CommitChanges();          
        }
    } 
```

![在此处输入图像描述](../Images/6eb2025bd5a74bd3385e08bc20a092db.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-08T17:18:31.213

如果要添加限制，可以使用以下代码：

```
public static void AddIsapiRestriction(string name, string path)
{
    using (var serverManager = new ServerManager())
    {
        var config = serverManager.GetApplicationHostConfiguration();
        var isapiCgiRestrictionSection = config.GetSection("system.webServer/security/isapiCgiRestriction");
        var isapiCgiRestrictionCollection = isapiCgiRestrictionSection.GetCollection();
        if (isapiCgiRestrictionCollection.ToList().Exists(x => x.GetAttribute("path").Value.ToString() == path))
            return;
        var addElement = isapiCgiRestrictionCollection.CreateElement("add");
        addElement["description"] = name;
        addElement["path"] = path;
        addElement["allowed"] = true;
        isapiCgiRestrictionCollection.Add(addElement);
        serverManager.CommitChanges();              
    }            
} 
```

# xcode - 标签栏 xcode 删除带有情节提要的栏项目的标题

> ID：15335636
> 
> 赞同：2
> 
> 时间：2013-03-11T09:58:18.027
> 
> 标签：xcode, customization, uitabbar, uistoryboard, uitabbaritem

我会删除条形项目的标题并仅在标题空间中显示图像（图像大小为 60x60 而不是 30x30），它仅可能使用情节提要或 IB 吗？

多谢

# c++ - 迭代器相等

> ID：15335640
> 
> 赞同：3
> 
> 时间：2013-03-11T09:58:28.040
> 
> 标签：c++, templates, iterator, operator-overloading, containers

我正在创建一个实现双链表的容器类。

```
template <class T>
class dl_list {
public:
    class link {
    public:
        T* data;
        link *prev, *next;
    };
    class iterator {
        link* node;
    public:
        link* get_node() { return node; }
        // ++, --, * operators, etc.
    };
    // other stuff
}; 
```

很漂亮，我玩得很开心。但是我遇到的一个问题是，当我为迭代器类型定义相等运算符时，我必须进行模板特化。

```
template <class T>
bool operator==(typename dl_list<T>::iterator& lhv, typename dl_list<T>::iterator rhv) {
    return lhv.get_node() == rhv.get_node();
} 
```

行不通，我必须像这样专门化它：

```
bool operator==(typename dl_list<int>::iterator& lhv, typename dl_list<int>::iterator rhv) {
    return lhv.get_node() == rhv.get_node();
} 
```

对于我想要使用它的每种类型，由于显而易见的原因，这很烦人。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:05:21.940

使其成为`iterator`类的成员：

```
bool operator==( const interator& other ) const
{
    return node == other.node;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T10:03:07.840

你不能。编译器无法知道 some`T`是 some other 的嵌套类型`U`。考虑

```
template<> class dl_list<float> {
public:
    typedef dl_list<int>::iterator iterator;
}; 
```

您必须将迭代器类型直接作为模板参数，或者将其定义为迭代器类的成员，或者在 dl_list 之外定义迭代器类，并在 dl_list 内部为其创建一个 typedef。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T10:20:57.840

最简单最干净的方法是在迭代器类中定义运算符：

```
class iterator
{
  public:
    ...
    friend bool operator==(iterator& lhs, iterator& rhs)
    {
        return lhs.get_node() == rhs.get_node();
    }
}; 
```

（这里有点代码味道 - 我本来希望`get_node()`有一个`const`版本，允许`operator==`通过`const`引用接受参数......）

# iphone - 如何在 iPhone 应用程序中加快将 segue 缓慢加载到表格视图的速度

> ID：15335641
> 
> 赞同：1
> 
> 时间：2013-03-11T09:58:31.727
> 
> 标签：iphone, ios, xcode

我有一个欢迎屏幕，它通向一个表格视图。当用户点击一行时，他们会通过推送转到详细视图。这加载很快。另一个表视图也可能有另一个 push segue，但加载速度很慢。我认为这是因为它包含一个搜索栏和必须加载的数据。有什么办法可以在程序加载时实例化这个表视图而不是等待转场？缓慢加载表视图的类称为`BSGlossaryController`. 我在想一些类似的东西，`myGlossaryController = [[BSGlossaryController alloc]init]`但不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:58:17.610

如果你想让 BSGlossaryController 在启动时实例化，你应该删除它的 segue，在启动时实例化它，然后手动推送到它。但是，您不想使用 alloc init 来实例化它，这将创建一个与情节提要中的不同的。您想使用 UIStoryboard 方法 instantiateViewControllerWithIdentifier: 来实例化它（并确保在 IB 中给它一个标识符）。当需要推送它时，您需要将您的按钮（或您用来触发推送的任何东西）挂钩到使用 pushViewController:animated: 进行推送的方法。

如果您在启动时执行此操作（在应用程序委托中），那么您必须将新创建的 BSGlossaryController 分配给一个属性，并访问您要从中推送的任何控制器。如果您可以等到该控制器（您从中推送的控制器）出现在屏幕上后再实例化它，那么您可以在该控制器的 viewDidLoad 方法中创建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:01:11.393

通常，您不想一次加载一大块数据。如果块足够大以显着减慢您的视图加载，那么您需要重新考虑您的方法是一个不错的选择。撇开内存问题不谈，一次加载大量数据会在加载时阻塞应用程序的 UI。这将使应用程序无响应，用户会想知道发生了什么。

您可以通过几种不同的方式处理加载大型数据集 - 按优先顺序显示：

*   使用[`NSFetchedResultsController`](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html)加载您的数据。这将自动处理缓存和分块数据，从而保持响应性和性能。
*   将您的数据分解为更小的子集。屏幕一次只能显示这么多数据，因此将数据加载到当前未显示的内存中是没有意义的。根据视图需要引入新数据。
*   首先呈现视图（没有数据），显示一个带有消息的活动指示器，通知用户正在加载数据，然后在后台线程上异步引入数据。这种方法至少不会让用户想知道发生了什么。

一旦您发布了一些代码，并且我对您正在尝试做什么以及原因有了更好的了解，我可以给出更具体的答案。

# java - 在 Play Framework 2.10 中上传文件的路径

> ID：15335642
> 
> 赞同：1
> 
> 时间：2013-03-11T09:58:32.587
> 
> 标签：java, playframework, routes

我将文件上传到`/upload`文件夹，然后我想直接访问我的文件，例如：

```
http://localhost/upload/xxx.jpg 
```

当我添加如下路线时：

```
GET     /upload/*file               controllers.Assets.at(path="/upload", file) 
```

它会导致另一个错误：

```
not enough arguments for method at: (path: String, file: String)play.api.mvc.Call. Unspecified value parameter file.

<link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/main.css")"> 
```

然后，在我更改`@routes.Assets.at("stylesheets/main.css")`为之后`@routes.Assets.at("stylesheets/", "main.css")`，还有另一个错误：

```
[MatchError: (stylesheets/,main.css) (of class scala.Tuple2)]

(path: @unchecked, file: @unchecked) match { 
```

有人可以帮我走这条路吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:11:58.337

最后，我从 playframework 网站得到了答案，找到的不是很明显.. [http://www.playframework.com/documentation/2.0.4/Assets](http://www.playframework.com/documentation/2.0.4/Assets)

从这个页面：

但是，如果您为 Assets.at 操作定义两个映射，如下所示：

```
GET  /javascripts/*file        controllers.Assets.at(path="/public/javascripts", file)
GET  /images/*file             controllers.Assets.at(path="/public/images", file) 
```

然后在使用反向路由器时需要指定这两个参数：

```
<script src="@routes.Assets.at("/public/javascripts", "jquery.js")"></script>

<image src="@routes.Assets.at("/public/images", "logo.png")"> 
```

* * *

但这可能还不能解决我的问题，结果出现了问题中提到的第二个错误。

***请注意，检查`path`参数，它必须与您在路由文件中描述的相同。***作为：

当我设置： `GET /public/*file controllers.Assets.at(path="/public", file)`

在 html 文件中，我应该写如下：

`@routes.Assets.at("/public", "stylesheets/main.css")`

* * *

此外，如果您使用其他文件夹，例如 /upload，则必须`project/Build.scala`在其中添加以下代码。`play.Project`感谢蒂齐亚诺皮卡尔迪

`playAssetsDirectories <+= baseDirectory / "foo"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:02:53.597

您应该在*project/Build.scala*中添加这一行：

```
 val main = play.Project(appName, appVersion, appDependencies).settings(
    // Add your own project settings here    
    playAssetsDirectories <+= baseDirectory / "upload"
  ) 
```

更多信息： [https ://github.com/playframework/Play20/wiki/Assets](https://github.com/playframework/Play20/wiki/Assets)

# python - ( "从对等列表中选择密码 WHERE 用户名=?",username1)

> ID：15335646
> 
> 赞同：1
> 
> 时间：2013-03-11T09:58:46.690
> 
> 标签：python, sqlite

我创建了一个登录窗口，并且有一个包含名称、用户名、密码的表“peerlist”。我想从表中验证用户名和密码。

username1 包含我从登录窗口获得的用户名。我尝试使用 username1 检索密码。

```
cursor.execute( "SELECT password FROM peerlist WHERE username=?",username1) 
```

但是出现了错误

```
sqlite3.ProgrammingError: Incorrect number of bindings supplied. The current 
                          statement uses 1, and there are 3 supplied. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T10:03:25.580

使用元组作为参数：

```
cursor.execute( "SELECT password FROM peerlist WHERE username=?", (username1,)) 
```

参数应该是元组或列表（序列）；但是字符串也是一个序列（它有一个长度，你可以处理单个字符），所以你给`.execute()`调用一个`len(username1)`字符序列而不是一个参数。显然用户名是 3 个字符长，因此是错误消息。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-11T10:00:19.897

这是个坏主意，会导致 SQL 注入。详情参考[http://docs.python.org/2/library/sqlite3.html](http://docs.python.org/2/library/sqlite3.html)

```
cursor.execute( "SELECT password FROM peerlist WHERE username=%s"%(username1)) 
```

# objective-c - 在执行以下两行之间添加延迟

> ID：15335649
> 
> 赞同：83
> 
> 时间：2013-03-11T09:59:00.423
> 
> 标签：objective-c, delay, execution

我需要在（相同）函数中的两行执行之间添加延迟。有什么有利的选择吗？

**注意：**我不需要两个不同的函数来做到这一点，延迟一定不能影响其他函数的执行。

例如：

```
line 1: [executing first operation];

line 2: Delay                        /* I need to introduce delay here */

line 3: [executing second operation]; 
```

任何帮助都是可观的。提前致谢...

* * *

## 回答 #1

> 赞同：224
> 
> 时间：2013-03-11T10:12:33.090

您可以使用 gcd 来执行此操作，而无需创建其他方法

```
// ObjC

NSTimeInterval delayInSeconds = 2.0;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
  NSLog(@"Do some work");
});

// Swift

DispatchQueue.main.asyncAfter(deadline: .now() + 2) {
    print("Do some work)
} 
```

您仍然应该问自己“我真的需要添加延迟吗”，因为它通常会使代码复杂化并导致竞争条件

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-07-29T12:50:12.970

您可以使用以下`NSThread`方法：

```
[NSThread sleepForTimeInterval: delay]; 
```

但是，如果您在主线程上执行此操作，您将阻止应用程序，因此只能在后台线程上执行此操作。

* * *

*或在斯威夫特*

```
NSThread.sleepForTimeInterval(delay) 
```

*在斯威夫特 3*

```
Thread.sleep(forTimeInterval: delay) 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-03-11T10:02:33.983

此行在 3 秒后调用选择器 secondMethod：

```
[self performSelector:@selector(secondMethod) withObject:nil afterDelay:3.0 ]; 
```

在您的第二次操作中使用它并获得所需的延迟。如果您有很多代码，请将其放在自己的方法中并使用`performSelector:`. 它不会像`sleep`

**编辑：**如果您不想要第二种方法，您可以添加一个类别以便能够将块与 performSelector 一起使用：

```
@implementation NSObject (PerformBlockAfterDelay)

- (void)performBlock:(void (^)(void))block 
          afterDelay:(NSTimeInterval)delay
{
    block = [block copy];
    [self performSelector:@selector(fireBlockAfterDelay:) 
               withObject:block 
               afterDelay:delay];
}

- (void)fireBlockAfterDelay:(void (^)(void))block
{
    block();
}

@end 
```

或者甚至更清洁：

```
void RunBlockAfterDelay(NSTimeInterval delay, void (^block)(void))
{
    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, NSEC_PER_SEC*delay),
      dispatch_get_current_queue(), block);
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-08-13T23:34:38.473

我有几个回合制游戏，我需要 AI 在轮到它之前暂停（以及在其轮到的步骤之间）。我确信还有其他更有用的情况，延迟是最好的解决方案。在斯威夫特：

```
 let delay = 2.0 * Double(NSEC_PER_SEC) 
        let time = dispatch_time(DISPATCH_TIME_NOW, Int64(delay)) 
        dispatch_after(time, dispatch_get_main_queue()) { self.playerTapped(aiPlayView) } 
```

我刚回到这里，看看 Objective-C 调用是否不同。（我也需要将这个添加到那个中。）

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-03-01T03:44:34.917

[检查于 2020 年 11 月 27 日，并确认使用 Xcode 12.1 仍然准确]

目前最方便的方法：Xcode 提供了一个代码片段来执行此操作，您只需输入延迟值和您希望在延迟后运行的代码。

1.  单击`+`Xcode 右上角的按钮。
2.  搜索`after`
3.  它将仅返回 1 个搜索结果，即所需的片段（见屏幕截图）。双击它，你就可以开始了。

[![说明如何从 Xcode 本身中获取代码段的屏幕截图](../Images/ce8444ecf24d01fdb5e5155b037b3ce2.png)](https://i.stack.imgur.com/zJ0uv.png)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-03-11T10:16:31.883

如果您的目标是 iOS 4.0+，您可以执行以下操作：

```
[executing first operation];
double delayInSeconds = 2.0;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    [executing second operation];
}); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-01-20T10:37:47.927

就像@Sunkas 所写的那样，只是它更短并且您具有正常语法`performSelector:withObject:afterDelay:`的吊坠。如果你需要将参数传递给你想要延迟的块，你可以通过参数传递它们，你会在你的调用中收到它：`dispatch_after``objective-c``withObject``selector`

```
[self performSelector:@selector(testStringMethod:) 
           withObject:@"Test Test" 
           afterDelay:0.5];

- (void)testStringMethod:(NSString *)string{
    NSLog(@"string  >>> %@", string);
} 
```

如果您仍然想选择自己是在主线程还是在当前线程上执行它，那么有一些特定的方法可以让您指定这一点。苹果文档告诉我们：

> 如果您希望在运行循环处于默认模式以外的模式时使消息出队，请改用 performSelector:withObject:afterDelay:inModes: 方法。如果不确定当前线程是否是主线程，可以使用 performSelectorOnMainThread:withObject:waitUntilDone: 或 performSelectorOnMainThread:withObject:waitUntilDone:modes: 方法来保证选择器在主线程上执行。要取消排队的消息，请使用 cancelPreviousPerformRequestsWithTarget: 或 cancelPreviousPerformRequestsWithTarget:selector:object: 方法。

# http-post - Google Analytics 使用 gif 获取请求为什么不发布请求？

> ID：15335650
> 
> 赞同：2
> 
> 时间：2013-03-11T09:59:01.947
> 
> 标签：http-post, httprequest, google-analytics-api, http-get, web-analytics

[Google Analytics](http://www.google.co.in/analytics/)使用[.gif 图像](http://www.google-analytics.com/__utm.gif)`Get Request`到服务器

`http://www.google-analytics.com/__utm.gif?utmwv=4&utmn=769876874&utmhn=example.com&utmcs=ISO-8859-1&utmsr=1280x1024&utmsc=32-bit&utmul=en-us&utmje=...`

我们可以观察到所有参数都在此发送，`Get Request`并且请求的图像没有发现有用的地方（[它只是 1px x 1px 图像](http://www.google-analytics.com/__utm.gif)）

**已知信息：** *如果请求的查询字符串很大，那么 Google 将使用`Post Request`.*

现在的问题是为什么不`Post Request`总是不管查询字符串是否很大。

通过`Get Request`其发送的数据会导致安全问题。因为，参数将存储在浏览器历史记录中或在`Get Request`.

有人能给出任何支持性的理由，为什么[谷歌分析](http://www.google.co.in/analytics/)依赖于这两个东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:30:38.720

[因为 GET 请求是您用于检索不会改变内容的信息的方式。](http://en.wikipedia.org/wiki/HTTP#Safe_methods)

请注意，使用 POST 有很多缺点，浏览器通常会警告不要重新加载通过 POST 请求的资源（以防止双重数据输入），POST 请求不会被缓存（这就是一些分析滥用它的原因），代理等。

如果您想使用 URL 检索大量数据（建议：重新考虑是否有更好的选择），那么有必要使用来自[Wikipedia](http://en.wikipedia.org/wiki/POST_%28HTTP%29)的 post ：

> 有时 HTTP GET 甚至不适合数据检索。例如，需要在 URL 中指定大量数据时。浏览器和 Web 服务器可以对它们将处理的 URL 的长度进行限制，而不会出现截断或错误。URL 和查询字符串中保留字符的百分比编码可以显着增加它们的长度，虽然 Apache HTTP Server 最多可以处理 URL 中的 4,000 个字符，但 Microsoft Internet Explorer 限制为任何 URL 中的 2048 个字符。同样，在必须提交敏感信息（例如用户名和密码）以及其他数据以完成请求的情况下，不应使用 HTTP GET。在这些情况下，即使使用 HTTPS 对消息体进行加密，URL 中的数据也会以明文形式传递，许多服务器、代理、并且浏览器将以第三方可以看到的方式记录完整的 URL。在这些情况下，应该使用 HTTP POST。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-25T07:34:16.867

POST 请求将需要 ajax 调用，并且由于[http://en.wikipedia.org/wiki/Same-origin_policy](http://en.wikipedia.org/wiki/Same-origin_policy)而无法工作。但是图像可以很容易地跨站点，所以他们只需要在 DOM 中添加一个带有所需 url 的 img 标签，浏览器就会加载它，将所需的信息发送到他们的服务器进行跟踪。

# sql - 如何将参数传递给sql server中的bcp命令

> ID：15335651
> 
> 赞同：5
> 
> 时间：2013-03-11T09:59:03.483
> 
> 标签：sql, sql-server, sql-server-2008

我想将查询结果发送到文件，所以尝试使用 bcp 命令。但不能向其传递任何参数。它显示错误。

```
EXEC xp_cmdshell 'bcp "SELECT * FROM CG.dbo.cdyy where EndTime between     DATEADD(s,0,DATEADD(mm, DATEDIFF(m,0,'+@date+'),0)) and DATEADD(s,-1,DATEADD(mm, DATEDIFF(m,1,'+@date+')+1,0))  " queryout "D:\cdr_cg.txt" -T -c -t,' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T11:00:24.967

将您的参数放在呼叫 master..xp_cmdshell 之前

```
DECLARE @date varchar(10) = '20130311',
        @bcp varchar(8000)

SELECT @bcp = 'bcp "SELECT * FROM CG.dbo.cdyy WHERE EndTime between DATEADD(s,0,DATEADD(mm, DATEDIFF(m,0,''' + @date + '''),0)) AND DATEADD(s,-1,DATEADD(mm, DATEDIFF(m,1,'''  + @date + ''')+1,0))  " queryout "D:\cdr_cg.txt" -T -c -t,'

EXEC master..xp_cmdshell @bcp 
```

# ruby-on-rails - 导入代码在 Rails 中属于哪里？

> ID：15335652
> 
> 赞同：1
> 
> 时间：2013-03-11T09:59:04.593
> 
> 标签：ruby-on-rails, ruby-on-rails-3, import

在我的 Rails 应用程序中，我必须导入大型 XML 文件，这将同时影响 10 个或更多模型。

现在我不确定这个导入的代码属于哪里。我是否应该将其包含在一个模型中，将其拆分到所有受影响的模型中，使用模块，甚至关注点？

有没有人有这方面的经验，可以给我一些建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:21:34.627

如果导入从一个 XML 文件一次发生，那么只需编写一个导入脚本并将其放入，`/lib/imports`然后从 rake 任务或其他东西中调用它。除非您需要将其分解为类方法，否则我个人认为没有意义。

我们每天通过几个不同的导入脚本导入大约 600MB 的 XML，它们都在`/lib/imports`rake 任务中并被调用，这些任务又使用 cron 调度和运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T14:53:26.803

我会使用 app/models/tasks/somename_importer.rb 并在那里封装所有进口商的东西。您还可以为要导入的实际数据对象创建模型。

```
class ImportedObject
  attr_accessor :have, :some, :accessor, :to, :hold, :data
  def initialize(data, *opts)
    # move data to instance variables
  end

  def to_object
    Object.new(some: mapping)
  end
end

class Tasks::SomeNameImporter
  def initialize
    # maybe setup some logging and stuff
  end

  def perform
    # fetch data from some source via http or file or ftp and iterate over appropriate items
    data.each do |item|
      imported = ObjectToImport.new(item)

      # you can do whatever you want with your imported data
      object   = imported.to_object
      if object.valid?        
        object.save
      else
        # do some logging 
      end
    end    
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T10:05:41.583

假设您可能还需要一些方法来与 xml 交互，我会这样做

```
class XmlBase < ActiveRecord::Base
  #import xml files

  def method_to_parse_xml
      #code
  end
end 
```

在您的模型中（需要 xml 文件）

```
class User < XmlBase

end

class Project < XmlBase

end

#normal models
class Company < ActiveRecord::Base

end 
```

# c# - Silverlight：绑定复杂属性

> ID：15335655
> 
> 赞同：0
> 
> 时间：2013-03-11T09:59:07.800
> 
> 标签：c#, wpf, silverlight

首先，我将尝试解释我在做什么。我正在尝试画一个棋盘。我有一个单元格的用户控件

```
<Grid x:Name="LayoutRoot">
        <Border BorderThickness="0" Margin="0" Background="{Binding CellColor, ElementName=userControl, Mode=TwoWay}"/>
        <Border x:Name="ValidMoveMarker" BorderThickness="0" Margin="0" Background="#FFC1CAB4" Opacity="0"/>
        <Image x:Name="img" Source="{Binding source, ElementName=userControl, Mode=TwoWay}" Cursor="Hand"/> 
```

在这个 CellControl 后面的代码中，我有 2 个 dpProperties

```
 public eColor? PieceColor
    {
        get { return (eColor?)GetValue(PieceColorProperty); }
        set { SetValue(PieceColorProperty, value);}
    }
    public static readonly DependencyProperty PieceColorProperty = DependencyProperty.Register("PieceColor", typeof(eColor?), typeof(CellControl), null);

    public eType? PieceType
    {
        get { return (eType?)GetValue(PieceTypeProperty); }
        set { SetValue(PieceTypeProperty, value);}
    }
    public static readonly DependencyProperty PieceTypeProperty = DependencyProperty.Register("PieceType", typeof(eType?), typeof(CellControl), null); 
```

其中 eColor 和 eType 是枚举数。这里我也有一处房产

```
public ImageSource source
        {
            get
            {
                if (PieceColor == eColor.White)
                {
                    switch (PieceType)
                    {
                        case eType.Pawn:
                            return new BitmapImage(new Uri("/PO.PC;component/Images/chess_piece_white_pawn_T.png", UriKind.Relative));
                        case eType.Knight:
                            return new BitmapImage(new Uri("/PO.PC;component/Images/chess_piece_white_knight_T.png", UriKind.Relative));
                                    ...
                        default:
                            return null;
                    }
                }
                else
                {
                    switch (PieceType)
                    {
                        case eType.Pawn:
                    }
                }
            } 
```

现在的问题是当我尝试使用这样的控件时

```
<PP_Controls:CellControl PieceType="{Binding type, Mode=TwoWay}"  PieceColor="{Binding color, Mode=TwoWay}" 
```

在哪里

```
 private eColor? _color;
    public eColor? color
    {
        get { return _color; }
        set
        {
            _color = value;
            OnPropertyChanged("color");
        }
    }

    private eType? _type;
    public eType? type
    {
        get { return _type; }
        set
        {
            _type = value;
            OnPropertyChanged("type");
        }
    } 
```

什么都没有发生。但是如果我使用这样的控制

```
<PP_Controls:CellControl PieceType="Bishop"  PieceColor="Black" 
```

它运行良好。我的绑定中缺少什么吗？这是因为“源”属性本身不是依赖属性吗？如何解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:44:39.560

Your target properties are dependency properties, and the source properties are CLR properties implementing `INotifyPropertyChanged`, so your binding `{Binding type}` etc should work - *assuming* that the `DataContext` to your "use with binding" is the type with the color/type properties. You should be able to tell if these bindings are failing by looking at the Output window when you run your application under the debugger (in Silverlight 5 you could also use a binding breakpoint, or otherwise you can apply a trivial `ValueConverter` to the binding to set a breakpoint for debugging).

However your control's `source` property depends on two other properties in a 'lazy' fashion. You are binding to the `source` property, but nothing will cause this binding to update when the property's computed value changes. You should add a dependency property changed handler to `PieceColor` and `PieceType` which calls `OnPropertyChanged("source")` (or equivalently convert it to a DP or notifying property, and explicitly recompute the value).

# assembly - 使用堆栈大小的最大限制是否有任何限制？

> ID：15335658
> 
> 赞同：2
> 
> 时间：2013-03-11T09:59:20.823
> 
> 标签：assembly, x86

我正在使用 x86 指令集编写程序。为什么当我使用存储在大小为 40kb 的堆栈中的本地数组时它会崩溃。

我使用带有 i5 处理器的 windows7 操作系统并在 Visual C++ Express Edition 2008 中编译

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T10:52:57.687

**我认为您正在以保护页面**的形式抓住重点。

为了在实际使用之前不浪费实际内存，Windows 最初保留完整的堆栈空间（默认为 1MB；可以通过编辑 PE 标头进行更改）但只提交两页，并将第二页设为保护页。保护页是一个内存页 (4KB)，它在任何访问它时都会触发一个特殊异常 (STATUS_GUARD_PAGE_VIOLATION)。当内核检测到保护页异常时，它会提交被触及的页面并在其后添加另一个保护页。这样，如果您的函数将小变量推送到堆栈上，它会“自行”不断增长。

但是，如果您尝试分配大小超过 4K（4096 字节）的局部变量，则会出现问题。通常，堆栈分配是通过简单地从 ESP 中减去来完成的。如果您从中减去超过 4K 的内容，然后尝试写入堆栈，则您可能会跳过保护页并在其后访问保留的内存。这不会被内核捕获，但会传递给您的程序，通常会导致崩溃。

解决方案很简单 - 以 4K（=4096=0x1000 字节）的块进行堆栈分配，并在每个块之后触摸堆栈以触发保护页面。MSVC 编译器通过`__chkstk()`在使用超过 4K 局部变量的函数的开头调用函数来自动执行此操作。这是来自 CRT 源的函数列表：

```
;***
;_chkstk - check stack upon procedure entry
;
;Purpose:
;       Provide stack checking on procedure entry. Method is to simply probe
;       each page of memory required for the stack in descending order. This
;       causes the necessary pages of memory to be allocated via the guard
;       page scheme, if possible. In the event of failure, the OS raises the
;       _XCPT_UNABLE_TO_GROW_STACK exception.
;
;       NOTE:  Currently, the (EAX < _PAGESIZE_) code path falls through
;       to the "lastpage" label of the (EAX >= _PAGESIZE_) code path.  This
;       is small; a minor speed optimization would be to special case
;       this up top.  This would avoid the painful save/restore of
;       ecx and would shorten the code path by 4-6 instructions.
;
;Entry:
;       EAX = size of local frame
;
;Exit:
;       ESP = new stackframe, if successful
;
;Uses:
;       EAX
;
;Exceptions:
;       _XCPT_GUARD_PAGE_VIOLATION - May be raised on a page probe. NEVER TRAP
;                                    THIS!!!! It is used by the OS to grow the
;                                    stack on demand.
;       _XCPT_UNABLE_TO_GROW_STACK - The stack cannot be grown. More precisely,
;                                    the attempt by the OS memory manager to
;                                    allocate another guard page in response
;                                    to a _XCPT_GUARD_PAGE_VIOLATION has
;                                    failed.
;
;*******************************************************************************

public  _alloca_probe

_chkstk proc

_alloca_probe    =  _chkstk

        push    ecx

; Calculate new TOS.

        lea     ecx, [esp] + 8 - 4      ; TOS before entering function + size for ret value
        sub     ecx, eax                ; new TOS

; Handle allocation size that results in wraparound.
; Wraparound will result in StackOverflow exception.

        sbb     eax, eax                ; 0 if CF==0, ~0 if CF==1
        not     eax                     ; ~0 if TOS did not wrapped around, 0 otherwise
        and     ecx, eax                ; set to 0 if wraparound

        mov     eax, esp                ; current TOS
        and     eax, not ( _PAGESIZE_ - 1) ; Round down to current page boundary

cs10:
        cmp     ecx, eax                ; Is new TOS
        jb      short cs20              ; in probed page?
        mov     eax, ecx                ; yes.
        pop     ecx
        xchg    esp, eax                ; update esp
        mov     eax, dword ptr [eax]    ; get return address
        mov     dword ptr [esp], eax    ; and put it at new TOS
        ret

; Find next lower page and probe
cs20:
        sub     eax, _PAGESIZE_         ; decrease by PAGESIZE
        test    dword ptr [eax],eax     ; probe page.
        jmp     short cs10

_chkstk endp 
```

在您的情况下，您可能不需要这种复杂的逻辑，这样的事情会做：

```
 xor eax, eax
    mov ecx, 40     ; alloc 40 pages
l1:
    sub esp, 1000h  ; move esp one page
    mov [esp], eax  ; touch the guard page
    loop l1         ; keep looping
    sub esp, xxxh   ; alloc the remaining variables 
```

有关堆栈和保护页的更多详细信息，请参见[此处](http://msdnrss.thecoderblogs.com/2012/04/threads-stack/)。

# python - Scrapy 中的持久请求元数据

> ID：15335663
> 
> 赞同：0
> 
> 时间：2013-03-11T09:59:28.663
> 
> 标签：python, scrapy

有什么方法可以让我在蜘蛛中拥有持久的请求元数据？`request.meta`只持续到下一个回调，我必须做这样的事情：

```
def method1(self, response):
    request = Request(url, callback=self.method2)
    request.meta['persist'] = ...

    yield request

def method2(self, response):
    ...

    request = Request(url, callback=self.method3)
    request.meta['persist'] = response.meta['persist']

    yield request 
```

我也做了一个装饰器，但我真的希望有一个更清洁的解决方案：

```
def persist_meta(callback):
    def inner(self, *args, **kwargs):
        for result in callback(self, *args, **kwargs):
            if isinstance(result, Request):
                response = args[0]

                persist = response.meta.get('persist', {})
                persist.update(result.meta.get('persist', {})

                result.meta['persist'] = persist

            yield result

    return inner 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:25:25.453

创建一个新的[中间件](http://doc.scrapy.org/en/latest/topics/spider-middleware.html#writing-your-own-spider-middleware)并将您的代码保存在`process_spider_input`.

# cxf - Camel 使用 Java DSL 设置 CXF 超时

> ID：15335666
> 
> 赞同：0
> 
> 时间：2013-03-11T09:59:44.167
> 
> 标签：cxf, apache-camel

我对骆驼很陌生，遇到了一个问题。

我正在尝试使用 cxf 端点创建一个动态 Web 服务代理（正在工作）。一切都很顺利，除了我不知道如何使用 Java DSL 设置 cxf 端点超时。

我发现了很多关于如何使用 Spring 配置的文章，但我试图通过仅使用 Java DSL 来实现这一点。

这是我目前拥有的，请有人指出我如何使用 Java DSL 操作 CXF 超时（连接/接收）的正确方向

```
public void configure() throws Exception
{

    onException(Exception.class).handled(true).transform()
            .method(MyExceptionHandler.class, "handleException");

    CxfEndpoint inboundCxf = new CxfEndpoint();
    inboundCxf.setAddress(soapProxyConfig.getBaseUrl()
            + soapProxyConfig.getAddress());
    inboundCxf.setCamelContext(camelContext);
    inboundCxf.setDataFormat(DataFormat.RAW);
    inboundCxf.setServiceName(new QName(soapProxyConfig
            .getTargetNamespace(), soapProxyConfig.getRemoteServiceName()));
    inboundCxf.setPortName(new QName(soapProxyConfig.getTargetNamespace(),
            soapProxyConfig.getRemotePortName()));
    inboundCxf.setWsdlURL(soapProxyConfig.getRemoteWsdl());

    SedaEndpoint sedaEndpoint = new SedaEndpoint();
    sedaEndpoint.setConcurrentConsumers(100);
    sedaEndpoint.setExchangePattern(ExchangePattern.InOut);
    sedaEndpoint.setSize(100);
    sedaEndpoint.setCamelContext(camelContext);
    sedaEndpoint.setEndpointUriIfNotSpecified("seda:" + routeId + "-Queue");

    Endpoint[] remoteEndpoints = new Endpoint[soapProxyConfig
            .getRemoteUrls().size()];
    for (int i = 0; i < soapProxyConfig.getRemoteUrls().size(); i++)
    {
        Endpoint endpoint = camelContext.getEndpoint(soapProxyConfig
                .getRemoteUrls().get(i));

        endpoint.setCamelContext(camelContext);
        remoteEndpoints[i] = endpoint;
    }

    from(inboundCxf).routeId(routeId)
            .routePolicy(new WebServiceRoutePolicy()).to(sedaEndpoint);
    from(sedaEndpoint).routeId(routeId + "-Queue").loadBalance()
            .roundRobin().to(remoteEndpoints).id("Out"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:58:57.973

好的，所以经过一些测试并将头发拉出来后，我发现我的做法完全错误。

我不需要设置入站 CXF 超时值，我只需要设置出站 http 超时值，这给了我所需的超时检测。

所以现在我有一条看起来像这样的路线

```
 onException(Exception.class).handled(true).transform(
            method(SoapExceptionHandler.class, "handleException"));

    SedaEndpoint sedaEnpoint = createSedaEnpoint();
    JettyHttpEndpoint jettyEnpoint = createJettyHttpEndpoint();

    CxfEndpoint cxfEnpoint = createCxfEndpoint();

    from(cxfEnpoint).routeId(getRouteName()).to(sedaEnpoint);
    from(sedaEnpoint).to(jettyEnpoint)
            .routeId(getRouteName() + "-endpoint"); 
```

对于任何想知道如何为 JettyProducer 设置超时的人，我们开始吧

```
private JettyHttpEndpoint createJettyHttpEndpoint() throws Exception
{
    JettyHttpComponent jettyComponent = new JettyHttpComponent();
    jettyComponent.setCamelContext(camelContext);
    jettyComponent.setHttpClientMinThreads(proxyConfig
            .getMinRemoteClientThreads());
    jettyComponent.setHttpClientMaxThreads(proxyConfig
            .getMaxRemoteClientThreads());

    JettyHttpEndpoint jettyEnpoint = new JettyHttpEndpoint(jettyComponent,
            "jetty:http", new URI(proxyConfig.getTargetEndpointUrl()));
    jettyEnpoint.setCamelContext(camelContext);
    jettyEnpoint.setExchangePattern(ExchangePattern.InOut);
    jettyEnpoint.setThrowExceptionOnFailure(false);
    jettyEnpoint.getClient().setTimeout(
            proxyConfig.getRemoteEndpointTimeout());

    return jettyEnpoint;
} 
```

通过该配置并在 Jetty 端点中设置超时，我现在得到了我的可配置超时:)

# c# - 在 Windows Server 上安装 C# 服务（拒绝访问）

> ID：15335670
> 
> 赞同：11
> 
> 时间：2013-03-11T09:59:55.077
> 
> 标签：c#, service

我创建了一个 C# 服务。现在我想在 Windows Server 2008 R2 上安装该服务。我正在使用**InstallUtil**命令安装服务。我以管理员身份打开命令提示符。

该服务应以特定用户身份运行，因此我将帐户设置为服务安装程序上的用户。

当我运行命令时出现错误：

在安装阶段发生异常： `System.ComponentModel.Win32Exception: Access Denied`。

这是日志文件：

```
Installing assembly 'C:\Service\MyService.exe'.
Affected parameters are:
   logtoconsole = 
   logfile = C:\Service\MyService.InstallLog
   assemblypath = C:\Service\MyService.exe
Rolling back assembly 'C:\Service\MyService.exe'.
Affected parameters are:
   logtoconsole = 
   logfile = C:\Service\MyService.InstallLog
   assemblypath = C:\Service\MyService.exe
An exception occurred during the Rollback phase of the System.ServiceProcess.ServiceProcessInstaller installer.
System.NullReferenceException: Object reference not set to an instance of an object.
An exception occurred during the Rollback phase of the installation. This exception will be     ignored and the rollback will continue. However, the machine might not fully revert to its initial state after the rollback is complete. 
```

以下是命令提示符上显示的内容：

```
Beginning the Install phase of the installation.
See the contents of the log file for the C:\Service\MyService.exe assembly's progress.
The file is located at C:\Service\MyService.InstallLog.
Installing assembly 'C:\Service\MyService.exe'.
Affected parameters are:
   logtoconsole =
   logfile = C:\Service\MyService.InstallLog
   assemblypath = C:\Service\MyService.exe

An exception occurred during the Install phase.
System.ComponentModel.Win32Exception: Access Denied
   at System.ServiceProcess.ServiceProcessInstaller.OpenSecurityPolicy()
   at System.ServiceProcess.ServiceProcessInstaller.Install(IDictionary stateSaver)
   at System.Configuration.Install.Installer.Install(IDictionary stateSaver)
   at System.Configuration.Install.Installer.Install(IDictionary stateSaver)
   at System.Configuration.Install.AssemblyInstaller.Install(IDictionary savedState)
   at System.Configuration.Install.Installer.Install(IDictionary stateSaver)
   at System.Configuration.Install.TransactedInstaller.Install(IDictionary savedState)

The Rollback phase of the installation is beginning.
See the contents of the log file for the C:\Service\MyService.exe assembly's progress.
The file is located at C:\Service\MyService.InstallLog.
Rolling back assembly 'C:\Service\MyService.exe'.
Affected parameters are:
   logtoconsole =
   logfile = C:\Service\MyService.InstallLog
   assemblypath = C:\Service\MyService.exe
An exception occurred during the Rollback phase of the System.ServiceProcess.Ser
viceProcessInstaller installer.
System.NullReferenceException: Object reference not set to an instance of an obj
ect.
An exception occurred during the Rollback phase of the installation. This exception will be ignored and the rollback will continue. However, the machine might not fully revert to its initial state after the rollback is complete.

The Rollback phase completed successfully.

The transacted install has completed.
The installation failed, and the rollback has been performed. 
```

有人知道我需要做什么来安装该服务吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T14:51:03.930

我终于可以安装服务了。我以称为服务器管理员的角色登录到服务器。我的管理员将我的帐户添加到服务器的本地管理员组。在此之后，我可以安装该服务。它看起来像服务器管理员帐户，我用来登录系统没有完整的管理员权限。

谢谢你的帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T17:12:12.800

你真的没有提供任何关于你的服务做什么的细节，我还不能直接评论你的帖子，但你可以试试[这个链接](http://social.msdn.microsoft.com/Forums/en-US/windowsgeneraldevelopmentissues/thread/b5321bf3-cbc2-4361-adf2-8f3a50002217/)

总结是检查并确保您正在运行正确的 32/64 位 installutil.exe，并验证您的合并模块不会导致问题。

也许更好地描述您的服务会有所帮助？该服务是否在您的本地机器上安装得很好，而不是在服务器上？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-29T09:44:45.037

这个问题是由于安全问题，最好在 RUN AS ADMINISTRATOR 中打开命令提示符并安装您的服务，它肯定会解决您的问题

# javascript - JQuery 插件是否应该负责创建新的 HTML？

> ID：15335674
> 
> 赞同：1
> 
> 时间：2013-03-11T10:00:11.473
> 
> 标签：javascript, jquery-plugins

当您的 JQuery 插件需要 HTML 元素才能工作时，我不太确定最好的（或最常见的做法）是什么。例如（虽然是人为的），如果您需要一个微调器（股票行情）插件，其中您将有一个包含数字的文本框，并且在框的左侧有一个向上和向下箭头。单击向上箭头时，该值增加，单击向下箭头时，该值减小。

我看到一些 JQuery 插件，尤其是 JQuery UI 小部件，它们希望您提供所有的 html 并为它们提供特殊的类。

在微调器的情况下，您是否只期望输入标签，然后在 JQuery 插件中生成 HTML 来呈现向上和向下按钮？

也许更好的例子是创建分页数据网格。分页按钮（First、Last、Previous、Next、Page 1、Page 2...）是否由插件生成，或者插件的用户是否应该创建具有特殊类的 HTML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T07:22:40.460

你应该调查一下`jqGrid`。它会生成大量 HTML，但它会将`<table>`和`pager`元素留给您。然后它显然附加到这些元素。但它也为这些元素创建了兄弟姐妹和容器。

例如，

```
<!-- index.html -->
<table id="mygrid"></table>
<div id="pager"></div>

// main.js
$('#mygrid').jqGrid({pager: '#pager', ...}); 
```

jqGrid 不仅附加到#mygrid 和#pager，而且还创建新的兄弟姐妹和容器。

```
<div id="gbox_mygrid">
   <div class="ui-jqgrid-view">
      <table id="mygrid"><!-- rows --></table>
   </div>
   <div id="#pager"><!-- stuff --> <?div>
</div> 
```

所以你看到 jqGrid 做了它必须做的事情，运行良好。我认为这取决于插件的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T07:26:28.863

一般来说，我希望开发人员只提供容器元素以及任何必要的内部元素（想想滑块中的图像）。我希望插件能够生成任何控件，如按钮、分页等。

*要求开发人员提供容器元素可以让他们*完全控制插件在页面上出现的方式、时间和位置，就好像它只是另一个 div 一样。要求他们也提供任何必要的内容并不总是必要的，因为这很容易成为一个配置项。

我看到让用户提供 HTML 的主要好处是在处理不支持/允许 JavaScript 的客户端时（想想旧的浏览器、蜘蛛等）。至少他们会看到*与*您的插件要显示的内容相关的内容，而不仅仅是一个丑陋的空白区域。在滑块示例中，如果处理得当，插件可以在缺少 JavaScript 支持的情况下优雅地降级为静态图像。

控件和状态显示等所有错综复杂的内容都应*始终*由插件生成。为什么？用户友好性是首先想到的。人们使用 jQuery 插件是因为他们想要快速、相对轻松地解决问题。此外，jQuery 插件的许多用户不是 Web 开发人员，而通常只是博客等的管理员。

通过消除插件用户必须创建他们真正无法控制的元素的需要，您还消除了由拼写错误、误解和缺乏 RTFMing 引起的许多麻烦。

希望我的意见和见解对您有所帮助。

# php - 不同语言的用户名

> ID：15335675
> 
> 赞同：0
> 
> 时间：2013-03-11T10:00:16.687
> 
> 标签：php, mysql, registration

如果语言是英语，我有一个与 db 表正确对应的注册表单。如果语言是希腊语或其他，则用户名在表中显示为加密（损坏？？）。在 db 表中选择了 utf8_general_ci。为了在所有语言中获得相同的结果，我应该在我的代码中添加什么。（结果 = 在 db 表中正确查看用户的用户名）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:07:09.443

确保提供结果的页面与数据库的编码具有相同的编码。如果您的表中有 UTF-8 数据，但显示这些数据的页面例如是 ISO-8859-1，则 ISO-8859-1 字符集范围之外的字符将显示为奇怪。

在 PHP 中，可以为此修改标题：

```
header('Content-type: text/html; charset=utf-8'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:43:55.920

在您的第一个查询之前添加

```
mysql_query("SET NAMES 'utf8' COLLATE 'utf8_general_ci'"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T03:09:39.237

UTF8 在 php 中非常棘手。还有一些问题（除了其他 2 个答案中的 utf8 标头和 utf8 db 连接）我知道：

1.  您将需要使用[mbstring 函数](http://php.net/manual/en/book.mbstring.php)。例如，substr() 可能需要替换为 mb_substr() 函数。有关字符串函数的完整列表。看[这里](http://www.php.net/manual/en/mbstring.overload.php)。要让 php 知道您预期的内部编码，请在脚本开头调用此函数：

    > mb_internal_encoding("UTF-8");

2.  根据您的 php 版本，您可能必须以不同方式处理 htmlspecialchars()、htmlentities()。

    > 与 htmlspecialchars() 一样，htmlentities() 采用可选的第三个参数 encoding 来定义转换中使用的编码。如果省略，则此参数的默认值在 PHP 5.4.0 之前的版本中为 ISO-8859-1，从 PHP 5.4.0 开始为 UTF-8。

3.  使用 mysql LENGTH() 函数的旧查询可能不再是我们想要的，因为 length() 返回字节长度，而不是字符长度。我们可能需要更新它们以使用 CHAR_LENGTH()。但是，这一切都取决于上下文！在下面的示例中，中文列有 3 个字符，但每个字符占用 3 个字节。

> ```
> mysql> select *, length(d), char_length(d)  from t where id=3;
> +----+-----------+-----------+----------------+
> | id | d         | length(d) | char_length(d) |
> +----+-----------+-----------+----------------+
> |  3 | 被冻死 |         9 |              3 |
> +----+-----------+-----------+----------------+ 
> ```

# wordpress - 在兄弟子域上运行 wordpress Multisite？

> ID：15335681
> 
> 赞同：1
> 
> 时间：2013-03-11T10:00:30.360
> 
> 标签：wordpress

我正在建立一个 wordpress-mu 网站。以下是条件

[http://example.com](http://example.com)被主站点占用。

Intranet 将用于网站，例如

intra.example.com（主站点） blog.example.com

在我当前的设置中

```
define('DOMAIN_CURRENT_SITE', 'example.com'); 
```

这使得登录所有站点成为可能，但是所有网络管理页面的链接，例如`/wp-admin/network/`等链接到 `example.com/wp-admin/network/`. 它应该是 intra.example.com/wp-admin/network/。如果我手动编写，我将被重定向。

如果我设置

```
define('DOMAIN_CURRENT_SITE', 'intra.example.com'); 
```

无法登录 blog.example.com。如果我输入了错误的密码，我会收到错误

```
ERROR: Cookies are blocked or not supported by your browser. You must enable cookies to use WordPress. 
```

如果我输入正确的用户名/密码，我就会再次重定向到登录页面，没有错误代码。我的猜测是，这是由于 cookie 的一些问题。

# php - 在 php 数组中从 mysql 数据库中获取所有行到单个表 td 中？

> ID：15335685
> 
> 赞同：1
> 
> 时间：2013-03-11T10:00:49.243
> 
> 标签：php, mysql, database

`array fetch all rows`在来自mysql数据库的php中，所有值都显示在`single table td?`我想要这样的结果中？

```
1) Small
2) Large
3) Medium 
```

现在的问题是所有显示到`single table td`的值我想将所有这些值显示到`separately table td`

**查询功能**

```
function get_size($id){
$result=mysql_query("SELECT size FROM mywishlist order by id") 
or die("My Wish Size Problem"."<br/><br/>".mysql_error());
$results = array();
while($row=mysql_fetch_array($result)){
$results[] = stripslashes($row['size'])."<br />";
}
return $results;
}

<td><font style="font-family:Arial,Helvetica,sans-serif;  
font-size:15px; color:#000;">
<?php 
foreach($size as $sizes) {
echo $sizes; }
?></font><input type="hidden" name="size" value="<?php echo $size;?>" /></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:05:12.953

```
<?php foreach ($size as $sizes) { ?>
    <td><font style="font-family:Arial,Helvetica,sans-serif;font-size:15px; color:#000;">
        <?php echo $sizes; ?> 
        </font><input type="hidden" name="size" value="<?php echo $size; ?>" /></td>  
<?php } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:11:55.850

```
<?php foreach ($sizes as $size) { ?>
   <td>
     <font style="font-family:Arial,Helvetica,sans-serif;font-size:15px; color:#000;">
       <input type="hidden" name="size" value="<?php echo $size; ?>" />
     </font>
   </td>  
<?php } ?> 
```

# android - 如何通过主页上的自定义小部件快速将应用程序带到前面？

> ID：15335693
> 
> 赞同：0
> 
> 时间：2013-03-11T10:01:06.453
> 
> 标签：android

```
 Intent intent = getPackageManager().getLaunchIntentForPackage(
                    "com.*****.g3android");
             intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK
                    | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
            startActivity(intent); 
```

我的问题是，当我单击主页按钮时，应用程序重新启动但仅在 3-4 秒后重新启动.. 但是单击启动器图标启动 myapp 非常快。我该如何解决？谢谢！b

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:14:10.140

有一个 android 问题[4536](https://code.google.com/p/android/issues/detail?id=4536) 。您的问题看起来与此类似。
看看这个[问题的解决方案](https://stackoverflow.com/questions/5600084/starting-an-activity-from-a-service-after-home-button-pressed-without-the-5-seco)

# android - 带有 WeakReference 和没有它的 Handler 实现有什么区别？

> ID：15335694
> 
> 赞同：0
> 
> 时间：2013-03-11T10:01:07.887
> 
> 标签：android

我用 Handler 制作服务，我需要 Handler 来使用一些服务方法。由于 Handler 必须是`static`，我可以在 Handler 中没有 Service 引用的情况下访问 Service 方法。

所以我这样做了：

```
private static class ServiceHandler extends Handler {
    MyService service;

    public ServiceHandler(MyService service) {
        this.service = service;
    }

    @Override
    public void handleMessage(Message msg) {
        ...
    }
} 
```

但也发现这是做这项工作的正确方法：

```
private static class ServiceHandler extends Handler {
    private final WeakReference<MyService> mMyService;

    public ServiceHandler(MyService service) {
        mMyService = new WeakReference<MyService>(service);
    }

    @Override
    public void handleMessage(Message msg) {
        MyService service = mMyService.get();
        ...
    }
} 
```

这两种在Handler中使用Service的方式有什么区别呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:45:48.777

第一个代码示例将成员变量设置为调用的引用`Service`（我假设它是这个内部类的外部类）。这与删除内部类的关键字完全相同`static`，因为现在内部类持有对该`Service`类实例的引用（这是您在使用`static`关键字时通常试图避免的）。

第二个代码示例使用弱引用，这意味着垃圾收集器可以清理（销毁）`Service`类的实例，即使您在处理程序中持有对它的引用。如果发生这种情况，调用`mMyService.get()`将返回 null，因此您最好在代码中检查它。

实际上，这两个代码示例之间没有区别，因为`Handler`一旦`Service`被销毁，您将不会使用。

# php - PHP 警告：DOMDocument::loadHTML(): 属性 alt 重新定义

> ID：15335698
> 
> 赞同：2
> 
> 时间：2013-03-11T10:01:20.773
> 
> 标签：php, warnings, domdocument

我在 CentOS 上运行以下代码

```
$roster = $utils->getContentCURL("http://exporter.nih.gov/ExPORTER_Catalog.aspx");
$docmp = new DOMDocument();
$docmp->loadHTML($roster); 
```

它给了我一些警告，例如

> PHP 警告：DOMDocument::loadHTML(): 属性 alt 重新定义

任何想法，如何摆脱它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T10:09:38.673

正如[网站验证告诉你](http://validator.w3.org/check?uri=http%3A%2F%2Fexporter.nih.gov%2FExPORTER_Catalog.aspx&charset=%28detect+automatically%29&doctype=Inline&group=0)的那样，有几个错误`alt`定义了两次。一个例子在第 252 行：

```
<div align="center">
    <a 
        href="XMLData/final/RePORTER_PRJ_X_FY2013_088.zip" 
        title="Click here to download XML File format"
    >
        <img 
            src="images/xml_icon.gif" 
            alt="Click here to download XML format file" <!-- RIGHT THERE! -->
            width="41" 
            height="13" 
            border="0" 
            alt="" <!-- RIGHT THERE! -->
        />
    </a>
    <br/>
    <b>(~1 MB)</b>
</div> 
```

如果您拥有这个网站（是吗？），那么您应该简单地删除这些（或者可能要求他们修复他们的网站）。

# sql - 根据优先级获取不同的行？

> ID：15335700
> 
> 赞同：4
> 
> 时间：2013-03-11T10:01:21.227
> 
> 标签：sql, oracle

我有一张如下表。我使用的是 oracle 10g。

```
TableA
------
id  status
---------------
1   R
1   S
1   W
2   R 
```

我需要获得不同的 ID 及其状态。如果我查询不同的 id 及其状态，我会得到所有 4 行。但我应该只得到 2 个。每个 id 一个。这里 id 1 有 3 个不同的状态。在这里，我应该根据优先级只得到一行。

第一优先级是“S”，第二优先级是“W”，第三优先级是“R”。

就我而言，我应该得到如下两条记录。

```
id  status
--------------
1   S
2   R 
```

我怎样才能做到这一点？请帮我。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T10:30:33.680

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:33:19.850

```
select id , status  from (         
select TableA.*, ROW_NUMBER()
OVER (PARTITION BY TableA.id  ORDER BY DECODE(
         TableA.status,
         'S',1,
         'W',2,
         'R',3,
             4)) AS row_no
FROM TableA) 
where row_no = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T10:14:44.653

要完成它，您可以编写类似的查询：

```
 -- sample of data from your question 
SQL> with t1(id , status) as (
  2    select 1,   'R'  from dual union all
  3    select 1,   'S'  from dual union all
  4    select 1,   'W'  from dual union all
  5    select 2,   'R'  from dual
  6  )
  7  select id   -- actual query
  8       , status
  9    from ( select id
 10                , status
 11                , row_number() over(partition by id
 12                                        order by case
 13                                                   when upper(status) = 'S'
 14                                                   then 1
 15                                                   when upper(status) = 'W'
 16                                                   then 2
 17                                                   when upper(status) = 'R'
 18                                                   then 3
 19                                                 end
 20                                     ) as rn
 21            from t1
 22         ) q
 23  where q.rn = 1
 24  ;

        ID STATUS
---------- ------
         1 S
         2 R 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T10:10:33.297

这是我要做的第一件事，但可能有更好的方法。

```
Select id, case when status=1 then 'S' 
                when status=2 then 'W'
                when status=3 then 'R' end as status
from(
    select id, max(case when status='S' then 3
                        when status='W' then 2
                        when status='R' then 1
                    end) status
    from tableA
    group by id
    ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T10:17:18.807

```
 select id,status from 
 (select id,status,decode(status,'S',1,'W',2,'R',3) st from table) where (id,st) in
 (select id,min(st) from (select id,status,decode(status,'S',1,'W',2,'R',3) st from table)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T15:12:04.373

使用带有附加值的 MOD() 示例：

```
SELECT id, val, distinct_val
  FROM
  (
  SELECT id, val
       , ROW_NUMBER() OVER (ORDER BY id) row_seq
       , MOD(ROW_NUMBER() OVER (ORDER BY id), 2) even_row
       , (CASE WHEN id = MOD(ROW_NUMBER() OVER (ORDER BY id), 2) THEN NULL ELSE val END) distinct_val
   FROM
   (
   SELECT 1 id, 'R' val FROM dual
    UNION
   SELECT 1 id, 'S' val FROM dual
    UNION
   SELECT 1 id, 'W' val FROM dual
    UNION
   SELECT 2 id, 'R' val FROM dual
    UNION                          -- comment below for orig data
   SELECT 3 id, 'K' val FROM dual
    UNION
   SELECT 4 id, 'G' val FROM dual
    UNION
   SELECT 1 id, 'W' val FROM dual
  ))
  WHERE distinct_val IS NOT NULL
 /

ID    VAL    DISTINCT_VAL
--------------------------
1      S      S
2      R      R
3      K      K
4      G      G 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-11T11:32:53.287

像这样的？？？

```
SQL> with xx as(
  2      select 1 id, 'R' status from dual UNION ALL
  3      select 1, 'S' from dual UNION ALL
  4      select 1, 'W' from dual UNION ALL
  5      select 2, 'R' from dual
  6  )
  7  select
  8      id,
  9      DECODE(
 10          MIN(
 11              DECODE(status,'S',1,'W',2,'R',3)
 12           ),
 13      1,'S',2,'W',3,'R') "status"
 14  from xx
 15  group by id;

        ID s
---------- -
         1 S
         2 R 
```

在这里，逻辑很简单。进行解码以设置“优先级”，然后找到 MIN（即具有较高优先级的值）并再次将其解码以获取其“状态”

# jsf - Primefaces 对话框弹出刷新背景并消失

> ID：15335701
> 
> 赞同：0
> 
> 时间：2013-03-11T10:01:34.640
> 
> 标签：jsf, primefaces

我将 primefaces 对话框用于弹出目的。但是每次打开时，整个屏幕都会自动刷新并且弹出窗口消失。

```
 < p:dialog id="dialog" header="Select different user" styleClass="atf-header"          widgetVar="dlg" appendToBody="true">
    <ui:include src="searchpopup.xhtml" />
      </p:dialog>
     <h:panelGroup>
     <h:outputLabel value="#{I18N['Create_Ticket_for_other_users']}" styleClass="atf-header" style="width:600px"></h:outputLabel>
    </h:panelGroup>
    <h:panelGroup id="search_section" layout="block"
       styleClass="atf-content-area atf-separarot-botton"  style="width:600px">   
         <h:panelGroup id="input_search_section" >
            <h:outputText id="name" value="Siddharth Mishra"    
            labelStyleClass="atf-label">
            </h:outputText>
        </h:panelGroup>
    <h:panelGroup styleClass="atf-right atf-inline-block">
        <p:commandButton id="btn_search" value="select different user"
            styleClass="atf-button-search" onclick="dlg.show()">
        </p:commandButton>
    </h:panelGroup>
</h:panelGroup> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:42:40.243

您`p:commandButton`是提交整个表单的 AJAX 按钮（在 primefaces 中是默认设置）。向它添加`type="button"`属性，使其成为执行一些 JavaScript 的普通按钮（所谓的按钮）。我也看不到`h:form`标签在哪里。正如你所拥有`appendToBody="true"`的那样，你`p:dialog`是你没有封装`p:dialog`在里面的岸边`h:form`。如果有必要，你应该在`h:form`里面`p:dialog`，如果它不是在`p:dialog`外面移动`h:form`。

# ios - 核心数据死锁

> ID：15335707
> 
> 赞同：1
> 
> 时间：2013-03-11T10:02:00.800
> 
> 标签：ios, objective-c, cocoa, core-data, deadlock

我正在做 2 个核心数据提取，当它们大约同时执行时，它们会导致主线程死锁，从而导致我的应用程序冻结。

提取是在主线程上进行的。处理它的一种方法是确保不会在同一时间进行提取，但我无法控制何时进行提取。有没有其他方法可以避免这种僵局？

暂停应用程序时的堆栈跟踪是：

```
#0  0x9a5d191a in __psynch_mutexwait ()
#1  0x9166713b in pthread_mutex_lock ()
#2  0x01e5d591 in -[_PFLock lock] ()
#3  0x01e5d56a in -[NSPersistentStoreCoordinator lock] ()
#4  0x01e720ee in -[NSPersistentStoreCoordinator executeRequest:withContext:error:] ()
#5  0x01e70539 in -[NSManagedObjectContext executeFetchRequest:error:] ()
#6  0x0007cd62 in -[CoreDataHelper fetchEntity:predicate:andSortDescriptors:inManagedObjectContext:] at /xxx/CoreDataHelper.m:150
#7  0x000075f6 in -[RemindersListViewController refreshReminders] at /xxx/RemindersListViewController.m:64
#8  0x000082f8 in -[RemindersListViewController refreshGUI] at /xxx/RemindersListViewController.m:187
#9  0x00003735 in __58-[AppDelegate setTabCountAndScheduleRemindersInBackground]_block_invoke_2 at /xxx/AppDelegate.m:114
#10 0x022dc53f in _dispatch_call_block_and_release ()
#11 0x022ee014 in _dispatch_client_callout ()
#12 0x022de7d5 in _dispatch_main_queue_callback_4CF ()
#13 0x0261aaf5 in __CFRunLoopRun ()
#14 0x02619f44 in CFRunLoopRunSpecific ()
#15 0x02619e1b in CFRunLoopRunInMode ()
#16 0x02fd77e3 in GSEventRunModal ()
#17 0x02fd7668 in GSEventRun ()
#18 0x00d9dffc in UIApplicationMain ()
#19 0x0000297d in main at /xxx/main.m:16 
```

**编辑：**访问核心数据的不同部分正在尝试执行获取请求。他们都在调用这个方法：

```
NSArray *reminders = [[CoreDataHelper sharedInstance] fetchEntity:APReminderEntity predicate:nil andSortDescriptors:[NSArray arrayWithObject:dateAscendingDescriptor] inManagedObjectContext:nil]; 
```

**CoreDataHelper.m**

```
- (NSArray *)fetchEntity:(NSString *)entity predicate:(NSPredicate *)predicate andSortDescriptors:(NSArray *)sortDescriptors inManagedObjectContext:(NSManagedObjectContext *)context {

    DLogName()

    if (context == nil) {

        // Use default MOC
        context = self.managedObjectContext;
    }

    NSEntityDescription *entityDescription = [NSEntityDescription entityForName:entity inManagedObjectContext:context];
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setEntity:entityDescription];

    if (predicate != nil) {

        [request setPredicate:predicate];
    }

    if (sortDescriptors != nil) {

        [request setSortDescriptors:sortDescriptors];
    }

    NSError *error = nil;
    NSArray *entities = [context executeFetchRequest:request error:&error];

    if (entities == nil) {        

        DLog(@"There was an error fetching entity: %@ Error: %@", entity, [error userInfo]);

        entities = [NSArray array];
    }

    return entities;
} 
```

**编辑 2：**我只是尝试将我的 fetch 请求放在一个`@synchronized`块中（如本文中所建议的那样[）](https://stackoverflow.com/questions/11630702/coredata-application-freezes-while-performing-a-fetch-request-pthread-mutex-lock)，到目前为止它似乎工作得很好......我正在正确的线程上访问我的 MOC.. MOC 被初始化为`_managedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T11:01:47.160

听起来问题出在您的应用程序的线程/互斥体/逻辑（或缺乏）周围想要同时使用核心数据的代码的依赖部分。

**一个经常被忽视的线程规则：**

> 在语言或 API 中使用线程结构并不一定意味着您的代码是线程安全的！

没有看到你的代码和逻辑，很难说更多。访问 Core Data 的不同部分是什么？

**作为一般策略，**消除死锁的一种方法可能是将有问题的核心数据访问代码收集到仅管理核心数据访问的控制器对象中。它可能负责避免您的代码引发的任何死锁情况。

**关于一般事项：**

`NSManagedObjectContext`在使用时锁定`NSPersistentStoreCoordinator`，因此只有一个 PSC 应该不是问题。

确保遵循 Core Data 中的线程规则。特别是，每一个`NSManagedObjectContext`都只能从一个线程访问——即创建它的线程。

有关更多讨论，请参见例如：

*   [核心数据和线程](https://stackoverflow.com/questions/14662120/core-data-threads/14662206#14662206)

*   [使核心数据线程安全](https://stackoverflow.com/questions/10593735/making-core-data-thread-safe)

**更新**

我很确定您的问题是您`NSManagedObjectContext`从错误的线程访问。您必须从创建它的同一线程访问上下文。请验证您在代码中是否正确执行此操作。

你确定你是`fetchEntity:`从创建的同一个线程调用你的方法`NSManagedObjectContext`吗？该上下文是如何创建的，何时创建的？

看到这个问题和答案：[NSManagedObjectContext Locked](https://stackoverflow.com/questions/7938136/nsmanagedobjectcontext-locked)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-03T19:37:05.807

我有相同的结果，但不同的问题。我有一个已经存在的 coredata 应用程序的多线程。它只使用主线程。

我根据我是否在主线程上来指定要使用的上下文。使用类似 dispatch_sync(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND 可能会让你进入主线程（这是苹果优化）。这让我混合上下文对象并导致死锁

# iphone - 在照片应用程序中加载 iPhone 图像

> ID：15335711
> 
> 赞同：-1
> 
> 时间：2013-03-11T10:02:19.977
> 
> 标签：iphone

我不确定这是否是提出这个问题的正确论坛，但我用谷歌搜索了“与 iPhone 相关的问题”，第一页从上到下都有 SO。所以这里。

当我在 iPhone（3GS、4 和 5 都运行 iOS 5.0）中打开照片应用程序并打开图像时，首先会出现一个模糊的图像，持续几分之一秒，然后就变成了实际的图像。我的问题是，照片​​应用程序是否具有在加载图像时显示的高分辨率图像的低分辨率副本，或者它是否在继续加载高分辨率图像之前动态生成低分辨率图像。

我正在编写一个应用程序来浏览照片，并且需要知道哪个是最好的方法。这就是这个问题背后的目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:14:17.753

最好的方法是使用 ALAsset **thumbnail**。如果您对图像清晰度有疑问，请使用 ALAsset **fullResolutionImage**

在开始开发照片应用程序之前，您必须阅读以下一些详细信息。

**[ALAssetsLibrary](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html)**的一个实例提供对照片应用程序控制下的视频和照片的访问。

ALAsset对象表示**[由](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAsset_Class/Reference/Reference.html)**Photo 应用程序管理的照片或视频。

有不同的 ALAsset**访问表示**

**1.缩略图**

返回资产的缩略图表示。

```
- (CGImageRef)thumbnail 
```

**2.aspectRatio缩略图**

返回资产的纵横比缩略图。

```
- (CGImageRef)aspectRatioThumbnail 
```

**3.defaultRepresentation**

返回默认表示的资产表示对象。

```
- (ALAssetRepresentation *)defaultRepresentation 
```

**4.representationForUTI：**

返回给定表示 UTI 的资产表示对象。

```
- (ALAssetRepresentation *)representationForUTI:(NSString *)representationUTI 
```

ALAssetRepresentation对象封装了给定 ALAsset 对象的**[表示](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetRepresentation_Class/Reference/Reference.html)****之一**。

**1.CGImageWithOptions**：

返回表示的全分辨率 CGImage。

```
- (CGImageRef)CGImageWithOptions:(NSDictionary *)options 
```

**2.fullResolutionImage**

返回资产的 CGImage 表示。

```
- (CGImageRef)fullResolutionImage 
```

**3.全屏图像**

返回适合全屏显示的表示的 CGImage。

```
- (CGImageRef)fullScreenImage 
```

**[示例代码](https://stackoverflow.com/questions/11721762/how-to-convert-image-path-to-uiimage-using-alassetslibrary/11723156#11723156)**

# django - 无法在 Django 中对用户进行身份验证？

> ID：15335713
> 
> 赞同：1
> 
> 时间：2013-03-11T10:02:24.343
> 
> 标签：django, authentication, django-authentication

我有一个要验证的自定义用户模型。该模型是这样使用的：

```
class GalaxyUser(AbstractBaseUser):
    #id = models.IntegerField(primary_key=True)
    #identifier = models.CharField(max_length=40, unique=True, db_index=True)
    username = models.CharField(max_length=90, unique=True, db_index=True)
    create_time = models.DateTimeField(null=True, blank=True)
    update_time = models.DateTimeField(null=True, blank=True)
    email = models.CharField(max_length=225)
    #password = models.CharField(max_length=120)
    external = models.IntegerField(null=True, blank=True)
    deleted = models.IntegerField(null=True, blank=True)
    purged = models.IntegerField(null=True, blank=True)
    form_values_id = models.IntegerField(null=True, blank=True)
    disk_usage = models.DecimalField(null=True, max_digits=16, decimal_places=0, blank=True)
    #last_login = models.TextField(max_length=255)
    objects = UserManager()
    USERNAME_FIELD = 'email'
    class Meta:
        db_table = u'galaxy_user' 
```

我有自定义身份验证后端：

```
class AuthBackend:
    def authenticate(self, username=None, password=None):
        if '@' in username:
            kwargs = {'email': username}
        else:
            kwargs = {'username': username}
        try:
            user = User.objects.get(**kwargs)
            if user.check_password(password):
                return user
        except User.DoesNotExist:
            return None

    def get_user(self, user_id):
        try:
            return User.objects.get(pk=user_id)
        except User.DoesNotExist:
            return None 
```

我在视图中的 login_backend 函数如下所示：

```
def login_backend(request):
    if request.method == 'POST':
        username = request.POST['username']
        password = request.POST['password']
        password = hashlib.sha1(password).hexdigest()
        user = authenticate(username=username, password=password)
        state = "Username or Password Incorrect!"
        if user is not None:
            login(request, user)
            return HttpResponseRedirect('/overview/')
        else:
            return render_to_response('login_backend.html', {'state':state}, context_instance=RequestContext(request))
    else:
        return render_to_response('login_backend.html', context_instance=RequestContext(request)) 
```

尽管输入了正确的用户名和密码，但我无法登录。有什么问题？

**编辑：**

```
url(r'^overview/', 'fileupload.views.show_files')

@login_required(login_url='/login_backend/')
def show_files(request):
    try:
        log_id = request.user.id
        username = request.user.username
        b = File.objects.filter(users_id=log_id, flag='F', flag_r='S')  # Get the user id from session .delete() to use delete
        total_files = File.objects.filter(users_id=log_id, flag='F').count()
        total_size = File.objects.filter(users_id=log_id, flag='F')
        a = [str(i.size) for i in total_size]
        x = [convert_byte(i) for i in a]

        if request.GET:
            if request.GET.getlist('page'):
                page = request.GET.getlist('page')
                page = ''.join(page)
                page = int(page)
            else:
                page = 1

            if request.GET.getlist('limit'):
                limit = request.GET.getlist('limit')
                limit = ''.join(limit)
                limit = int(limit)
            else:
                limit = 4
            if request.GET.getlist('page2'):
                page2 = request.GET.getlist('page2')
                page2 = ''.join(page2)
                page2 = int(page2)
            else:
                    page2 = 1

            if request.GET.getlist('limit2'):
                limit2 = request.GET.getlist('limit2')
                limit2 = ''.join(limit2)
                limit2 = int(limit2)
            else:
                limit2 = 4
        else:
            page = 1
            limit = 4
            page2 = 1
            limit2 = 4

        ten = ''
        twenty = ''
        fifty = ''
        hundred = ''
        two_hundred = ''

        if limit == 10:
            ten = 'selected'
        if limit == 20:
            twenty = 'selected'
        if limit == 50:
            fifty = 'selected'
        if limit == 100:
            hundred = 'selected'
        if limit == 200:
            two_hundred = 'selected'

        ten2 = ''
        twenty2 = ''
        fifty2 = ''
        hundred2 = ''
        two_hundred2 = ''

        if limit2 == 10:
            ten2 = 'selected'
        if limit2 == 20:
            twenty2 = 'selected'
        if limit2 == 50:
            fifty2 = 'selected'
        if limit2 == 100:
            hundred2 = 'selected'
        if limit2 == 200:
            two_hundred2 = 'selected'

        if total_size == None:
            total_size = 0
        total_size = humansize(sum(x))
        current_file = Queue.objects.filter(user_id=log_id)

        current_time = (time.time())
        x = [i.time_overview for i in current_file]
        y = [str(i) for i in x]
        durations = [current_time - float(i) for i in y]
        test = [i.size for i in current_file]
        testi = [str(i) for i in test]
        size_overs = [int(i) for i in testi]

        email_notify = [i.flag_email for i in current_file]
        email_notify = [str(i) for i in email_notify]

        zero = [i.replace('0', '') for i in email_notify]
        one = [i.replace('1', 'checked') for i in zero]

        j = [i.file_session for i in current_file]
        k = [str(i) for i in j]
        s = ['/home/zurelsoft/files/'+i+'*' for i in k]
        a =  [os.path.getsize(f) for i in s for f in glob.glob(i+'*')]
        change_size = [int(k) for k in a]

        queue_count = Queue.objects.filter(user_id=log_id).count()
        recent_count = File.objects.filter(users_id=log_id, flag='F', flag_r='S').count()

        return render_to_response('overview.html', {'queue_count':queue_count, 'recent_count':recent_count, 'page2':page2, 'limit2':limit2, 'ten2':ten2, 'twenty2':twenty2, 'fifty2':fifty2, 'hundred2':hundred2, 'two_hundred2':two_hundred2, 'ten':ten, 'twenty':twenty, 'fifty':fifty, 'hundred':hundred, 'two_hundred':two_hundred, 'page':page, 'limit':limit, 'email_notify':one, 'change_size':change_size, 'duration':durations, 'size_over':size_overs, 'overview':current_file, 'overview_files': b, 'total_files':total_files, 'total_size':total_size, 'username': username}, context_instance=RequestContext(request))
    except OSError:
        return render_to_response('overview.html', {'overview_files': b, 'total_files':total_files, 'total_size':total_size, 'username': username}, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:18:20.437

您不应该在视图中散列提交的密码。当您调用该`User.check_password`方法时，后端会为您执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:20:02.487

改变你的看法

```
def login_backend(request):
    if request.method == 'POST':
        username = request.POST['username']
        password = request.POST['password']
        user = authenticate(username=username, password=password)
        #password = hashlib.sha1(password).hexdigest()
        #user = authenticate(username=username, password=password)
        state = "Username or Password Incorrect!"
        if user is not None:
            login(request, user)
            return HttpResponseRedirect('/overview/')
        else:
            return render_to_response('login_backend.html', {'state':state}, context_instance=RequestContext(request))
    else:
        return render_to_response('login_backend.html', context_instance=RequestContext(request)) 
```

# javascript - 正确使用停止和延迟

> ID：15335716
> 
> 赞同：1
> 
> 时间：2013-03-11T10:02:39.117
> 
> 标签：javascript, jquery, delay

我的 js 代码有一些问题。我想为一个简单的单击功能设置动画，以便一个 div 显示下面的 div，但在 5 秒后动画回来。我认为我使用 fadeToggle 和 delay 进行了正确的设置，但我只是不明白如何设置“过度点击”预​​防。我的意思是当人们弄乱点击对象时。

我的第一次尝试是`stop(true,true)`. 尽管它似乎按预期工作（中止进一步的函数执行），但不幸的是，它在 5 秒后显示了底层 div，尽管它应该显示上面的 div（图片）。

这是js和小提琴：

```
$(function() {
  $("#boxes li").on("click", function(){    
    $(this).find(".front,.back").stop(true, true).fadeToggle(800).delay(5000).fadeToggle(800); 
  });
}); 
```

还有一个 js fiddle 链接，看看我的意思：

[http://jsfiddle.net/sfiddle/bqbPL/](http://jsfiddle.net/sfiddle/bqbPL/)

问候，

PS：尝试先点击一次，看看我想要达到什么效果，然后点击2次，看看5秒后它会如何显示文本div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:23:39.303

我稍微修改了一下，

但仍需要一些工作，您可以通过点击使用一些标志变量，

请查看更新[后的“小提琴”](http://jsfiddle.net/bqbPL/1/)，它会处理该过程，但会存储在它淡出后发生的下一次点击。

更新：避免双击

创建一个标志是，您将创建一个布尔变量，它是真/假。（或带 0 或 1 的 int 变量），

喜欢：

`var flg=true;`

现在，这个变量称为 flag，flag 以 False/True 值启动（根据要求）然后我们将在事件发生后修改 flag（我们要注意的事件，这里单击按钮）一旦事件发生，我们将更改旗帜。

在第二个中，您将在条件中添加标志。`if( condition == true && flag == true) {....}`因此，如果在事件/单击事件后标志更改为假，则不会再次发生。

我希望这个能帮上忙..

# ms-access - Access / DCount 给出一个 TExt 字段而不是 INT 字段？

> ID：15335722
> 
> 赞同：0
> 
> 时间：2013-03-11T10:02:48.073
> 
> 标签：ms-access, ms-access-2010

在 Access 2010 中，我有两个表“Contact”和“PhoneCalls”。

我为“联系人”创建了此查询，因为我想查看我呼叫联系人的次数。

**询问：**

```
SELECT Contact.*, DCount("[ID]","ColdCall"," [ColdCall]![ContactID]   = " & [Contact.ID]) AS Call
FROM Contact 
```

我已经使用以下表达式构建了这个查询：

```
Call: DCount("[ID]","ColdCall"," [ColdCall]![ContactID]   = " & [Contact.ID]) 
```

它工作正常，只是它创建了一个 TEXT 字段而不是 NUMBER 字段。例如，我需要对这个查询进行排序，但我只能按“A 到 Z”排序，而不是“从小到大”排序。

您对我如何解决这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:44:24.377

您可以使用 CInt() 强制调用计数为整数：

```
SELECT Contact.*, CInt(DCount("[ID]","ColdCall"," [ColdCall]![ContactID]   = " & [Contact.ID])) AS Call
FROM Contact; 
```

另请注意，以这种方式使用 DCount() 效率相当低。如果该方法对您满意，那么现在继续使用它，但如果随着表格的增长它开始陷入困境，请不要感到惊讶。

# javascript - javascript正则表达式.search

> ID：15335724
> 
> 赞同：1
> 
> 时间：2013-03-11T10:02:55.827
> 
> 标签：javascript, search

我对 .search 有一点问题

这是代码

```
// filter - posts
jQuery('.filter_by').live('click',function(){
    var target_fi = jQuery(this);
    var target_cat = target_fi.parents('.cat').children('.namechanger').val(); 
    target_fi.next().fadeIn(100);

    var cat_all = target_fi.prev().find("option").each(function(i){
        if(jQuery(this).attr('data-cats').search(target_cat)  == -1){
            jQuery(this).css({"display":"none"});
        }
    });

}); 
```

我想将变量`target_cat`与 .search一起使用

我不能这样做`.search(/target_cat/)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:06:29.460

如果你想用 的字符串值做一个正则表达式`target_cat`，那么你可以这样做：

```
var mySearchTerm = new RegExp(target_cat);

...

if(jQuery(this).attr('data-cats').search(mySearchTerm)  == -1){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:08:50.863

您需要创建`RegExp`对象并将其传递给`search`方法

```
if(jQuery(this).attr('data-cats').search(new RegExp(target_cat)) == -1 )){
...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T10:18:13.113

要将*任何内容*转换为正则表达式，只需将其放入构造函数中：

var something = "foobar"; var expression = new RegExp(something, 'i');

注意标志的第二个参数。有关构造函数的更多信息，请参见[RegExp](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp) ，有关事物如何工作的详细信息，请参见正则[表达式。](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)

如果您`something`包含“特殊字符”（例如`|`, `?`, `{`），则需要转义它们，如果您希望它们按字面意思表示（`/foo?/`vs. `/foo\?/`）。这是一个可以为您转义所有相关字符的函数：

```
function escapeRegEx(string) {
  return string.replace(/([.*+?^=!:${}()|[\]\/\\])/g, '\\$1');
} 
```

* * *

*   您正在使用`jQuery.live`，但应该[`jQuery.on`](http://api.jquery.com/on/)使用
*   你在使用`.search()`时[`.match()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match)就足够了
*   您`jQuery(this).css({"display":"none"});`在`jQuery(this).hide();`足够的情况下使用显式
*   请注意，您`jQuery(this)`在循环中重复-一个就足够了-变量是您的朋友。

# directx - DirectX 或 Opengl 上的生涩移动图像或文本

> ID：15335726
> 
> 赞同：0
> 
> 时间：2013-03-11T10:03:04.030
> 
> 标签：directx, marquee

背景是我正在开发一个类似于数字标牌的组件，移动代码文本从左到右循环运行，覆盖在播放的视频或静止图像上。

但是代码文本不够流畅，尤其是当从应用程序内部或外部加载视频时，它会非常抖动。

我多年来一直被这个问题困扰，我测试过的技术包括 D3D 和 WPF。

我从未尝试过 OpenGL，但我认为它等同于 D3D。

你能给我一些指导方针甚至样品吗？

# mysql - 我如何优化 SUM() mysql Query

> ID：15335729
> 
> 赞同：0
> 
> 时间：2013-03-11T10:03:13.360
> 
> 标签：mysql, performance

我有一个在超过 60 万条记录上运行的 mysql SUM 查询。我目前正在做的是这样的

```
 SELECT SUM (payment)
    FROM payment_table
    WHERE
       payment_date BETWEEN ... AND ...
       AND
       payment_status = 'paid' 
```

我将查询更改为这种格式以减少记录集，但它仍然需要几乎相同的时间。

```
SELECT SUM(Payments)
FROM (
    SELECT payment AS Payments FROM payment_table WHERE
     payment_date BETWEEN DATE_FORMAT(NOW(), '2012-2-01') AND DATE_FORMAT(LAST_DAY(DATE_FORMAT(NOW(), '2012-2-01')), '%Y-%m-%d')
    AND
    payment_status = 'paid'
) AS tmp_table 
```

他们有什么方法可以优化这个总和查询。编辑：

这是查询运行时的结果`EXPLAIN`

> 插入`` (`id `,`select_type `,`table `,`type `,`possible_keys `,` key `,`key_len `,`ref `,`rows `,`Extra`) values('1','SIMPLE','lps','index_merge','assigned_user_id,scheduled_pa​​yment_date,payment_status,deleted','deleted,assigned_user_id,payment_status', '2,109,303',NULL,'23347','使用 intersect(deleted,assigned_user_id,payment_status); 使用 where');

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:40:26.017

您应该将谓词的数据类型与列相匹配。因为`payment_type`is `DATE`，所以也使 BETWEEN 值`DATE`：

```
 WHERE payment_date BETWEEN
     CURDATE() AND LAST_DAY(CURDATE()) 
```

匹配类型可确保使用索引。

相反，您的查询正在使用`DATE_FORMAT()`，它产生一个*文本*数据类型，所以为了执行比较，mysql 正在将`payment_dare`列转换为文本，所以它不能使用索引（索引包含`DATE`值，而不是文本值），所以*每一行都*被转换和比较。

如果您在进行上述更改后仍然遇到性能问题，请执行以下操作：

```
ANALYZE TABLE payment_table; 
```

这将检查索引列中值的分布，这有助于 mysql 做出正确的索引选择。

# android - AndEngine游戏刚打开一会就崩溃了

> ID：15335731
> 
> 赞同：3
> 
> 时间：2013-03-11T10:03:17.870
> 
> 标签：android, andengine

我只是在 AndEngine 的帮助下测试了一个游戏（实际上它现在只是一个启动画面），~~在 CyanogenMod（非官方）上~~测试它时，它只加载了一毫秒，然后关闭。错误是什么？

*   我已经覆盖`onDestroy()`添加`System.exit(0);`.
*   我已经延长了`BaseGameActivity`。
*   从类运行的部分`MainActivity`：

    ```
    protected final int width = 640, height = 480;
    public Camera camera;

    @Override
    public EngineOptions onCreateEngineOptions() {
        camera = new Camera(0, 0, width, height);
        EngineOptions EO = new EngineOptions(true,
                ScreenOrientation.LANDSCAPE_FIXED,
                new RatioResolutionPolicy(width, height), camera);
        return EO;
    } 
    ```

日志：

```
E/Trace(2677): error opening trace file: No such file or directory (2)
D/AndEngine(2677): MainActivity.onCreate @(Thread: 'main')    
D/dalvikvm(2677): Trying to load lib /data/data/com.example.package/lib/libandengine.so 0x40dbb400
D/dalvikvm(2677): Added shared lib /data/data/com.example.package/lib/libandengine.so 0x40dbb400
D/dalvikvm(2677): No JNI_OnLoad found in /data/data/com.example.package/lib/libandengine.so 0x40dbb400, skipping init
D/AndEngine(2677): MainActivity.onResume @(Thread: 'main')
D/AndEngine(2677): MainActivity.onPause @(Thread: 'main')
D/AndEngine(2677): MainActivity.onDestroy @(Thread: 'main')
D/AndEngine(2677): UpdateThread interrupted. Don't worry - this EngineDestroyedException is most likely expected!
D/AndEngine(2677): org.andengine.engine.Engine$EngineDestroyedException
D/AndEngine(2677):  at org.andengine.engine.Engine.throwOnDestroyed(Engine.java:574)
D/AndEngine(2677):  at org.andengine.engine.Engine.onTickUpdate(Engine.java:560)
D/AndEngine(2677):  at org.andengine.engine.Engine$UpdateThread.run(Engine.java:820)
D/AndEngine(2677): MainActivity.onDestroyResources @(Thread: 'main')
D/AndEngine(2677): MainActivity.onGameDestroyed @(Thread: 'main')
I/AndroidRuntime(2677): VM exiting with result code 0, cleanup skipped. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T07:51:10.043

如果我一次又一次地打开应用程序，它会打开几次之一，在我在清单中提到这一点之后，它总是打开：

```
android:configChanges="orientation|screenSize" 
```

不知道为什么，但是如果您忘记提及这一点，这是 andengine 的问题。

# php - ISSET 中未为 textarea 传递值

> ID：15335742
> 
> 赞同：0
> 
> 时间：2013-03-11T10:03:51.277
> 
> 标签：php, textarea, isset

我传递值以便我可以修改数据库的内容。

当我正确传递文本数据流和更新时。但是对于 textarea 数据不会流动。我传递的代码是：

```
 echo '<table border=0>';
    while ($get_row=mysql_fetch_assoc($getedit))
        {
            echo '<form method="POST" action="">';

            echo '<tr><td>Sr.No:</td><td><input type="text" value='.$get_row['SRNO'].' name="SRNO" readonly="readonly"></td></tr>';
            echo '<tr><td>First Name:</td><td><input type="text" value='.$get_row['fname'].' name="fname"></td></tr>';
            echo '<tr><td>Last Name:</td><td><input type="text" value='.$get_row['lname'].' name="lname"></td></tr>';
            echo '<tr><td>Phone No:</td><td><input type="text" value='.$get_row['phone'].' name="phone"></td></tr>';
            echo '<tr><td>E-mail address:</td><td><input type="text" value='.$get_row['email'].' name="email"</td></tr>';
            echo '<tr><td>Address:</td><td><textarea rows=4>'.$get_row['address'].'</textarea></td></tr>';
            echo '<tr><td>Comments:</td><td><textarea rows=4>'.$get_row['comments'].'</textarea></td></tr>';
            echo '<tr><td><input type="submit" name="submit" value="save"></td><td></td></tr>';
            echo '</form>';                                 
        }
    echo '</table>'; 
```

我传递它的代码是：

```
if (empty($_POST) === false)
{

    $fname= $_POST['fname'];
    $lname= $_POST['lname'];
    $srno=  $_POST['SRNO'];
    $address=$_POST['address'];
    $comments=$_POST['comments'];
    $email=$_POST['email'];
    $phone=$_POST['phone'];
    echo 'Hello'.$address;          
    mysql_query('update names set fname="'.$fname.'", lname="'.$lname.'", address="'.$address.'", comments="'.$comments.'", email="'.$email.'", phone="'.$phone.'"  where SRNO="'.$srno.'"');   

    header('Location:'.$page);
} 
```

完整的代码是：

```
<!DOCTYPE html>
<html>
    <head>
        <title>List of users</title>
    </head>
<body>
    <?php
        $page='index.php';  

        mysql_connect("localhost","root","") or die (mysql_error());
        mysql_select_db("list") or die (mysql_error());

        if (empty($_POST) === false)
        {

            $fname= $_POST['fname'];
            $lname= $_POST['lname'];
            $srno=  $_POST['SRNO'];
            $address=$_POST['address'];
            $comments=$_POST['comments'];
            $email=$_POST['email'];
            $phone=$_POST['phone'];
            echo 'Hello'.$address;          
            mysql_query('update names set fname="'.$fname.'", lname="'.$lname.'", address="'.$address.'", comments="'.$comments.'", email="'.$email.'", phone="'.$phone.'"  where SRNO="'.$srno.'"');   

            header('Location:'.$page);
        }

        if(isset($_GET['edit']))
        {
            $getedit=mysql_query('SELECT SRNO, fname, lname, phone, email, address, comments from names where SRNO='.mysql_real_escape_string((int)$_GET['edit']));

            echo '<table border=0>';
            while ($get_row=mysql_fetch_assoc($getedit))
                {
                    echo '<form method="POST" action="">';

                    echo '<tr><td>Sr.No:</td><td><input type="text" value='.$get_row['SRNO'].' name="SRNO" readonly="readonly"></td></tr>';
                    echo '<tr><td>First Name:</td><td><input type="text" value='.$get_row['fname'].' name="fname"></td></tr>';
                    echo '<tr><td>Last Name:</td><td><input type="text" value='.$get_row['lname'].' name="lname"></td></tr>';
                    echo '<tr><td>Phone No:</td><td><input type="text" value='.$get_row['phone'].' name="phone"></td></tr>';
                    echo '<tr><td>E-mail address:</td><td><input type="text" value='.$get_row['email'].' name="email"</td></tr>';
                    echo '<tr><td>Address:</td><td><textarea rows=4>'.$get_row['address'].'</textarea></td></tr>';
                    echo '<tr><td>Comments:</td><td><textarea rows=4>'.$get_row['comments'].'</textarea></td></tr>';
                    echo '<tr><td><input type="submit" name="submit" value="save"></td><td></td></tr>';
                    echo '</form>';                                 
                }
            echo '</table>';

        }

        $get=mysql_query('SELECT  SRNO, fname, lname, email, phone, address, comments from names ORDER BY SRNO ASC');

        if (mysql_num_rows($get)==0)
        {
            echo 'There are no entries';
        }
            else
        {
            echo '<table border=0 cellspacing=25 cellpadding=1>';
            echo'<tr><th>Sr. No</th><th>First Name</th><th>Last Name</th><th>Phone No</th><th>E-mail</th><th>Address</th><th>Comments!!</th><th>Modify</th></tr>';      
            while($get_row=mysql_fetch_assoc($get))
                {
                    echo '<tr><td>'.$get_row['SRNO'].'</td><td>'.$get_row['fname'].'</td><td>'.$get_row['lname'].'</td><td>'.$get_row['phone'].'</td><td>'.$get_row['email'].'</td><td>'.$get_row['address'].'</td><td>'.$get_row['comments'].'</td><td><a href="index.php?edit='.$get_row['SRNO'].'">Edit</a></td></tr>';

                }
            echo '</table>';
        }       
    ?>

</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:07:03.163

将名称标签添加到您的文本区域代码；

```
echo '<tr><td>Address:</td><td><textarea rows=4 name="address">'.$get_row['address'].'</textarea></td></tr>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:08:03.190

您的 textarea 没有 name 属性。它应该是 ：

```
echo '<tr><td>Address:</td><td><textarea name="address" rows=4>'.$get_row['address'].'</textarea></td></tr>';
echo '<tr><td >Comments:</td><td><textarea rows=4 name="comments">'.$get_row['comments'].'</textarea></td></tr>'; 
```

希望这可以帮助

# linux - 行范围内的替换

> ID：15335744
> 
> 赞同：0
> 
> 时间：2013-03-11T10:03:51.723
> 
> 标签：linux, sed

我`<host></host>`在文件的第三行。我想用`<host>my_dB</host>`. 如何做到这一点`sed`。我也想在第 4 行、第 5 行和第 6 行进行这样的替换。

```
<host></host>
<host>my_dB</host> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T10:08:06.760

像这样：

```
$ sed '3,6 s/<host>/<host>my_dB/' file 
```

演示：

```
$ cat file
1: <host></host>
2: <host></host>
3: <host></host>
4: <host></host>
5: <host></host>
6: <host></host>
7: <host></host>

$ sed '3,6 s/<host>/<host>my_dB/' file
1: <host></host>
2: <host></host>
3: <host>my_dB</host>
4: <host>my_dB</host>
5: <host>my_dB</host>
6: <host>my_dB</host> 
```

    7：

要将更改存储回文件，请使用`-i`选项

```
$ sed -i '3,6 s/<host>/<host>my_bd/' file 
```

但是，您确实应该使用 XML 解析器。开始解析 XML`regexp`确实是个坏主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:07:24.810

`<host></host>`要替换文件中的所有with实例`<host>my_dB</host>`，请运行：

```
sed 's|<host></host>|<host>my_dB</host>|g' file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T10:08:51.317

每个都可以用类似的东西来完成：

```
sed -i "s/<host><\/host>/<host>my_db<\/host>/" foo.txt 
```

这`-i`意味着它将就地覆盖文件。删除该标志以将更改写入标准输出。

如果这是为文件填写详细信息的常规任务，请考虑向文件添加锚点以使其更容易。例如：

```
<host>DB_HOST</host> 
```

那么 sed 只需要：

```
sed -i 's/DB_HOST/my_db/' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T10:07:11.630

试试这个：

```
 sed -r '3,5s#(<host>)(</host>)#\1my_dB\2#' file 
```

# model - 如何动态更改数据库连接

> ID：15335745
> 
> 赞同：0
> 
> 时间：2013-03-11T10:03:53.037
> 
> 标签：model, schema, database-connection, symfony-1.4

我为我的项目使用了两个数据库。在配置中。.yml 文件

```
all:
  master:
    class: sfDoctrineDatabase
    param:
      dsn: 'mysql:host=localhost;dbname=livetloc'
      username: root
       password: console
client:
class: sfDoctrineDatabase
param:
  dsn: 'mysql:host=localhost;dbname=testloc'
  username: root
  password: console 
```

然后我生成了架构和模型。现在我需要动态更改数据库连接。如果我在我的项目中编写新代码，我需要在 testloc db 上对其进行测试。之后，我会将其更改为 liveloc db 。这个项目由四个成员使用。我正在向它添加新功能，四个成员同时使用该项目，但我使用“testloc”数据库。其他人正在使用 "Liveloc" db 。在单一环境中为特定登录特定用户更改数据库的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:23:22.130

我在以前的项目中有这个需求，这就是我解决它的方法：

在您的控制器中：

```
// we get the params in your databases.yml file for your data source "client"
$dbParams = sfContext::getInstance()->getDatabaseManager()->getDatabase('client');

$paramsArray = array(
    $dbParams->getParameter('dsn'), 
    $dbParams->getParameter('username'),
    $dbParams->getParameter('password'),
    'testloc'
);

// setting "false" avoids this new connection to replace your default one
$newConnection = Doctrine_Manager::getInstance()->openConnection($params, 'name_of_connection', false);

$query = "SELECT * FROM table";
$result = $newConnection->fetchAll($query); 
```

这不是很酷，因为它使用了 symfony 上下文，但这确实有效；）。在测试环境中，我认为这很好。

# sql-server - SQL Server - 从主键中删除集群超时

> ID：15335746
> 
> 赞同：1
> 
> 时间：2013-03-11T10:03:52.800
> 
> 标签：sql-server, clustered-index, non-clustered-index

我有一个大表，目前在 sql server 2012 中有 2500000 行。主键被列为`Create as clustered: Yes`并且由于主键是一个`uniqueidentifier`我想将它更改为非集群的初学者（然后在某个时间在未来，改为聚集在日期列上）。

问题是这超时了。禁用索引的集群怎么会很慢？除了将此操作的超时时间增加到 24 小时之外，我能做些什么来加快速度并在超时之前完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:40:25.527

这将需要很长时间，因为它是一个聚集索引，删除它会导致整个表被重建为一个堆，并且由于你有很多行（如果你的表特别宽），这可能需要很长时间时间取决于您的 IO 性能。

此外，您可能需要仔细考虑在日期列上添加聚集索引，因为这不能保证是唯一的（因此 SQL 服务器将向聚集键添加唯一标识符，从而降低其效率以及所有其他非聚集索引的效率在表格上）此外，如果您的日期并不总是按升序或降序添加，您将分割表格，迫使 SQL Server 执行页面拆分以将值放入表格的中间而不是末尾。

聚类的最佳列是窄的、唯一的并且总是增加/减少值。身份列是一个完美的候选人。

# python - ('未找到 Nmap', )

> ID：15335753
> 
> 赞同：8
> 
> 时间：2013-03-11T10:04:13.660
> 
> 标签：python

哪里有问题？

```
import nmap 
```

我安装了nmap和python，使用时`import nmap`没有任何问题。但是使用时：

```
nmap.PortScanner() 
```

抛出此错误：

```
Traceback (most recent call last):
  File "<pyshell#3>", line 1, in <module>
    nmap.PortScanner()
  File "./nmap/nmap.py", line 153, in __init__
    raise PortScannerError('nmap program was not found in path. PATH is:{0}'.format(os.getenv('PATH')))
nmap.nmap.PortScannerError: 'nmap program was not found in path. PATH is : /usr/lib    /lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:    /usr/local/games'" 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-11-04T23:15:38.477

**对于 Windows 用户：**

我建议在尝试运行脚本时首先关闭所有终端和 IDLE 或您当前打开的任何其他窗口。

接下来，打开命令行并输入

```
pip uninstall python-nmap 
```

如果您不确定当前系统上是否安装了 Nmap 二进制文件，请简单搜索

```
nmap 
```

从你的开始菜单。如果安装了，继续下一步，如果没有，到[Nmap的官方下载页面](https://nmap.org/download.html)

下载Windows自安装并运行它。记录它被安装到的目录。

转到那个目录。对我来说是

`C:\Program Files (x86)\Nmap`

打开系统的环境变量编辑器，通常位于

```
My PC > System Information > Advance settings > Environment Variables 
```

或者右键

> 我的电脑或我的电脑或任何你的电脑，然后选择属性然后高级设置，然后在高级选项卡底部的环境变量

选择`Path`两者`You`和`System`

按下`Edit`并输入`full path to your Nmap director`

例如`;C:\Program Files (x86)\Nmap\`

按确定并退出编辑器。

现在返回命令行并输入：`pip install python-nmap` 允许它安装，然后重新启动`ide`并再次测试您的代码。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-04-28T19:34:01.520

`python-nmap`似乎取决于`nmap`，这是执行实际网络扫描和审计的二进制文件。

如果 nmap 在您的终端中，您`$PATH`可以使用以下命令签入终端：

```
 which nmap 
```

### 类 Debian

您可以使用以下命令在类似 debian 的发行版中安装 nmap：

```
apt-get install nmap 
```

### 拱Linux：

```
pacman -Sy nmap 
```

### 已安装`nmap`

如果您确定`nmap`二进制文件已安装，但您认为它不在`$PATH`您的`$PATH`.

为此，请编辑`.bashrc`用户目录中的文件，或者`/etc/bashrc`（对于所有用户都会更改）并添加以下内容：

```
export PATH="$PATH:/usr/local/nmap/bin" 
```

但更改`/usr/local/nmap/bin`安装 nmap 二进制文件的目录。更改文件后，请务必打开一个新的 shell 会话，或键入`exec bash`以刷新它。

您还必须确保它具有执行权限 ( `chmod +x <file>`)。

当你执行：

```
nmap --version 
```

您应该看到如下内容：

```
Nmap version 6.46 ( http://nmap.org )
Platform: i686-pc-linux-gnu
Compiled with: liblua-5.2.3 openssl-1.0.1g libpcre-8.34 libpcap-1.5.3 nmap-libdnet-1.12 ipv6
Compiled without:
Available nsock engines: epoll poll select 
```

如果您这样做，`nmap`则已安装并在您的`$PATH`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-12T08:08:31.050

我曾经也有过一样的问题。只需输入终端：

```
sudo apt-get install nmap 
```

问题解决了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-24T05:20:53.847

尝试运行时遇到类似问题`nm= nmap.PortScanner()`

我尝试了上面给出的大多数解决方案，但它们对我不起作用。对我有用的是使用 home brew 为 Mac OS X 安装 nmap（信息位于：[http](http://brew.sh) ://brew.sh ）并运行命令

```
$ brew install nmap. 
```

现在`nm= nmap.PortScanner()`运行没有先前的错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-11T11:04:34.473

使用 Jessy lite 在 Raspberry Pi 3 上运行

我不得不：

```
sudo apt-get update

sudo apt-get upgrade 
```

那么我可以：

```
sudo apt-get install nmap

nmap --version 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-14T14:34:45.840

关于 nmap 的注意事项

我使用 nmap 搜索掩码 192.168.1.0/24，但没有找到所有 ip。例如：找不到我在 192.168.1.119 上的笔记本电脑，所以我最终使用了以下组合：

```
def ping(self, ip):
    # Use the system ping command with count of 1 and wait time of 1.
    ret = subprocess.call(['ping', '-c', '1', '-W', '1', ip],
                          stdout=open('/dev/null', 'w'),
                          stderr=open('/dev/null', 'w'))

    return ret == 0 # Return True if our ping command succeeds 
```

在多线程 Pinger 中

我来自：[http ://blog.boa.nu/2012/10/python-threading-example-creating-pingerpy.html](http://blog.boa.nu/2012/10/python-threading-example-creating-pingerpy.html)

我创建了自己的 IpInfo 类来存储信息并搜索每个 IP 上的开放端口，在这里我使用了 nmap：（代码是“正在进行中”，但你会明白的。调整性能的想法会很好）

```
class IpInfo(object):
ip = None
hostname = None
ports = []
lastSeenAt = strftime("%Y-%m-%d %H:%M:%S", gmtime())

def findHostName(self):
    if(ip):
        self.hostname = str(socket.gethostbyaddr(ip)[0])
    else:
        raise NameError('IP missing')

def findOpenPorts(self):
    print('findOpenPorts')
    nm = nmap.PortScanner()
    nm.scan(host)
    nm.command_line()
    nm.scaninfo()

    for proto in nm[self.ip].all_protocols():
        print('----------')
        print('Protocol : %s' % proto)

        lport = nm[self.ip][proto].keys()   #<------ This 'proto' was changed from the [proto] to the ['tcp'].
        lport.sort()

        for port in lport:
            if(nm[self.ip][proto][port]['state'] == 'open'):
                self.ports.append(port) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-13T22:25:00.843

windows下必须**先安装nmap for windows**，可以通过这个链接安装[https://nmap.org/download.html](https://nmap.org/download.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-18T12:39:26.157

对于 macOS 用户只需使用`brew install nmap`而不是使用 pip

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-04T19:45:26.020

我对此有一个完美的解决方案..

**第一种**：-`apt-get remove nmap`

**然后**：-`apt autoremove`

**然后**： - 去 `www.pypi.org`

*并*输入 python nmap 并下载**0.6**版本

使用命令提取它：-`tar -zxvf filename`

**cd**到新提取的文件

类型：-`python setup.py install`

进而

`apt-get install nmap`

***你准备好了。***

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-12-17T09:01:54.217

对于 Windows：我发现这很有帮助：

```
choco install nmap 
```

如果可能 Powershell 我假设你已经完成了，你必须在提升的命令下运行它`pip install python-nmap`

# mysql - 测试用例数据库设计

> ID：15335755
> 
> 赞同：1
> 
> 时间：2013-03-11T10:04:17.527
> 
> 标签：mysql, database

我在网站上工作，它将用一些测试用例测试一些应用程序或网站。而且我不知道如何存储将由用户创建的测试用例。可以为每个用户创建单独的表吗？还是将所有数据存储在一张表中？所以我想为每个用户创建3个新表（test_cases_x（将存储用户创建的所有测试用例），test_cases_history_x（将存储对所有已执行测试用例的引用），test_cases_exe_x（将存储对所有测试的所有引用此刻正在执行的案例））

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:13:03.893

> 可以为每个用户创建单独的表吗？

不，这违背了关系数据库的整个想法。您想要这三个表，但要通过用户 ID 链接它们。

在不知道所有信息的情况下很难 - 但是通常最好 99% 的时间不要为每个用户创建特定的表，而是使用数据库来执行链接（关系）。

如果您担心您的表会变得非常大，您可以查看分区/分片/归档数据以减少它（请不要看那里，直到您需要，因为过早的优化实际上会使其执行速度变慢）

# openlayers - Openlayers谷歌地图getTileBounds

> ID：15335769
> 
> 赞同：0
> 
> 时间：2013-03-11T10:05:00.697
> 
> 标签：openlayers

如何使用谷歌地图 v3 作为基础层在 openlayers 中给定一个点来获取图块的边界。我无法获取 TileBounds（kaMap：第二个链接），也无法获取 TileSize（GoogleMap）。

[http://dev.openlayers.org/docs/files/OpenLayers/Layer/Google/v3-js.html](http://dev.openlayers.org/docs/files/OpenLayers/Layer/Google/v3-js.html)

[http://dev.openlayers.org/releases/OpenLayers-2.11/doc/apidocs/files/OpenLayers/Layer/KaMap-js.html](http://dev.openlayers.org/releases/OpenLayers-2.11/doc/apidocs/files/OpenLayers/Layer/KaMap-js.html)

我的代码示例：

```
 getTileInformationForPoint : function(point) {
    var layer = this.map.baseLayer;

    //Get the bounds of the tile that encases point
    var lonLat = new OpenLayers.LonLat(point.getLongitude(), point.getLatitude());
    lonLat = lonLat.transform('EPSG:4326','EPSG:3857');
    var viewPortPixel = this.map.getViewPortPxFromLonLat(lonLat);
    var tileBounds = layer.getTileBounds(viewPortPixel); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:54:55.147

[OpenLayers.Layer.Grid.getTileBounds()](http://dev.openlayers.org/docs/files/OpenLayers/Layer/Grid-js.html#OpenLayers.Layer.Grid.getTilesBounds)看起来它返回一个围绕整个瓦片网格的边界 - 当前加载的所有瓦片。这看起来不像你需要的。

您是否尝试过[OpenLayers.Layer.Grid.getTileData()](http://dev.openlayers.org/docs/files/OpenLayers/Layer/Grid-js.html#OpenLayers.Layer.Grid.getTileData)在其中传入纬度/经度位置并返回 OpenLayers.Tile 对象？然后，您可以在 Tile 对象上调用 getBoundsFromBaseLayer()。

# c# - DataGridViewComboBox 单元格设置标签为每个项目

> ID：15335770
> 
> 赞同：0
> 
> 时间：2013-03-11T10:05:00.723
> 
> 标签：c#, datagridview, datagridviewcomboboxcell

如何为 DataGridViewComboBox 单元格中的每个元素设置标签

我的 DataGridViewComboBox 单元格包含以下项目：

```
string[] Fruits = {"Apple", "Orange","Mango"};
for (i=0;i<3;i++)
{
    DataGridViewComboBoxCellObject.Items.Add(Fruits[i]);
    //Set a seperate tag for this item
} 
```

我想为 Apple、Orange、Mango 添加单独的标签

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:56:48.473

恐怕你不能通过 DataGridViewComboBoxCell 做到这一点。

但是，如果您想保留一些关于添加到 ComboBox 集合中的项目的单独信息，那么您可以创建自己的 DataGridViewComboBoxCell 元素类并将此类的实例作为列表添加到 DataGridViewComboBoxCell

```
public class Fruit
{
    public String Name {get; set;}
    public Object Tag {get; set;} //change Object to YourType if using only one type

    public Fruit(String sInName, Object inTag)
    {
        this.Name=sInName;
        this.Tag=inTag;
    }
} 
```

然后您可以将 Fruits 列表添加到 DataGridViewComboBoxCell，但在此之前您需要使用您的信息创建 Fruits

```
string[] Fruits = {"Apple", "Orange","Mango"};
for (i=0;i<3;i++)
{
    Object infoData; //Here use your type and your data
    //Create a element
    Fruit temp = New Fruit(Fruits[i], infoData);
    //Add to DataGridViewComboBoxCell
    DataGridViewComboBoxCell.Items.Add(temp);
} 
```

在此之后，您可以将您的标签信息用作：

```
if (this.DataGridView.Rows[0].Cells[DataGridViewComboBoxCell.Name].Value != null)
{
    Fruit fruit = (fruit)this.DataGridView.Rows[0].Cells[DataGridViewComboBoxCell.Name].Value;
    Object tagValue = fruit.Tag;
} 
```

# asp.net - SignalR：同步组加入

> ID：15335771
> 
> 赞同：0
> 
> 时间：2013-03-11T10:05:09.573
> 
> 标签：asp.net, signalr

我正在开发 android 应用程序并`SignalR`在我的`asp.net`服务器和自定义 java 客户端[SignalA](https://github.com/erizet/SignalA)上使用。我面临以下问题：当客户端加入某个组时，它没有收到加入后立即发送的消息。这是来自服务器的一段代码：

```
Task.Factory.StartNew(() => context.Groups.Add(groupId, connectionId)).
    ContinueWith(t => Groups.Send(groupId, message)); 
```

在客户端，我收到带有新组令牌的回调，但没有收到第一条发送的消息（但是收到了之后发送的消息）。用官方 C# 客户端尝试同样的事情效果很好。因此，似乎在处理新的组令牌之前收到了第一条消息。

经过长时间尝试比较 C# 和 java 客户端代码后，我还没有找到解决方案。我正在寻找关于如何在 C# 客户端中处理这种情况的解释（或代码参考），以便我能够在 java 客户端中实现相同的逻辑。

PS如果有办法在android上使用官方C#客户端而不是使用自定义java客户端，那会更轻松。

PPS 有一些“肮脏”的方法可以解决我的问题，例如在加入群组或从客户端发送确认消息后在服务器上稍作延迟，但我仍在寻找“干净”的修复方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T12:35:00.603

没有理由使用`Task.Factory.StartNew`.

`context.Groups.Add(connectionId, groupName)`已经返回了`Task`在向`groupName`您期望由`connectionId`.

你打电话时

```
Task.Factory.StartNew(() => context.Groups.Add(connectionId, groupName)) 
```

你得到一个`Task<Task>`.

这意味着当您调用`Groups.Send(groupName, message)`inside of 时`ContinueWith`，只有外部 Task 已完成，并且`connectionId`尚未完全添加到`groupdName`.

如果您运行的是 .NET 4.5，重写此代码的最简单方法是使用 async/await 模式，如下所示：

```
public async Task AddToGroupAndSend(IPersistentConnectionContext context,
                                    string connectionId, 
                                    string groupName,
                                    object message)
{
    await context.Groups.Add(connectionId, groupName);
    await context.Groups.Send(groupName, message);
} 
```

如果您正在运行 .NET 4.0，则可以继续使用`ContinueWith`，但无需`Task.Factory.StartNew`：

```
public Task AddToGroupAndSend(IPersistentConnectionContext context,
                              string connectionId, 
                              string groupName,
                              object message)
{
    // This doesn't appropriately handle faulted or canceled tasks
    return context.Groups.Add(connectionId, groupName)
                  .ContinueWith(t => groups.Send(groupName, message));
} 
```

如果您不介意让代码同步执行，您甚至可以执行以下操作：

```
public void AddToGroupAndSend(IPersistentConnectionContext context,
                              string connectionId, 
                              string groupName,
                              object message)
{
    context.Groups.Add(connectionId, groupName).Wait().
    groups.Send(groupName, message).Wait();
} 
```

**注意：**在我的示例`connectionId`中是第一个参数，`context.Groups.Add`并且`groupName`是第二个参数。这是这些参数的正确顺序，与您在问题中的编写方式相反。

我不知道为什么您以前的代码可以与 C# 客户端一起使用，但不能与 Java 一起使用。鉴于您的问题中提供的代码，我希望任何一个客户端都会错过第一条发送的消息。

# javascript - 如何使用 jQuery 查询字符串？

> ID：15335776
> 
> 赞同：1
> 
> 时间：2013-03-11T10:05:27.413
> 
> 标签：javascript, jquery, ajax, xml-parsing, steam

好的。基本上，我正在为想要获取玩家姓名和头像的自定义加载屏幕的游戏服务器所有者开发一个 API，但不使用 PHP，仅使用 JavaScript、AJAX、HTML 等。

到目前为止，这是我想出的：

```
<!DOCTYPE html>
<html>
<head><title></title>
<script src="//static.sidewaykill.com/js/jQuery/1.5.2.min.js"></script>
<script src="//static.sidewaykill.com/js/jQuery/ExtDomain.js"></script>
</head>
<body>
<script type="text/javascript">
(function($) {
    $.QueryString = (function(a) {
        if (a == "") return {};
        var b = {};
        for (var i = 0; i < a.length; ++i)
        {
            var p=a[i].split('=');
            if (p.length != 2) continue;
            b[p[0]] = decodeURIComponent(p[1].replace(/\+/g, " "));
        }
        return b;
    })(window.location.search.substr(1).split('&'))
})(jQuery);

 $.get('http://api.sidewaykill.com/steam/name.php?id=76561198017389807')
 .success(function(data) {
     $('#steamname').html(data);
 });
</script>
Welcome <span id="steamname"></span>.<br /><br />
<img src="http://api.sidewaykill.com/steam/avatar.php?id=76561198017389807" alt="Player Avatar" />
</body>
</html> 
```

我要做的就是弄清楚如何用游戏提供的值替换那些 ID= 值。例如，如果您通过[http://server.com/loading.html?id=76561198017389807](http://server.com/loading.html?id=76561198017389807)访问页面，它将调用 api.sidewaykill.com/steam/name.php?id=76561198017389807 和图像 api.sidewaykill。 com/steam/avatar.php?id=76561198017389807。我将如何使用更多的 jQuery 来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:15:31.050

没有 php 会使它变得更加困难，否则它只是一个简单的：

```
$.get('http://api.sidewaykill.com/steam/name.php?id=<?= $_GET['id'] ?>') 
```

但是您可以在此处使用该功能：

[在 JavaScript 中解析查询字符串](https://stackoverflow.com/questions/2090551/parse-query-string-in-javascript)

并致电：

```
var id = getQueryVariable('id');
$.get('http://api.sidewaykill.com/steam/name.php?id='+id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:11:09.673

不完全是 jQuery 答案，而是纯 Javascript：

```
var idvalue = decodeURI( (RegExp('id=' + '(.+?)(&|$)').exec(location.search)||[,null])[1] ); 
```

将从 URL 的 GET 部分为您提供 id 的值，现在您可以将其插入 HTML 文档和 Ajax URL 的部分中。

使用 jQuery 你可以试试这个：[http ://www.jquery4u.com/snippets/url-parameters-jquery/](http://www.jquery4u.com/snippets/url-parameters-jquery/)

你的意思是像这样插入价值？

```
$('#imgid').src = 'http://api.sidewaykill.com/steam/avatar.php?id=' + idvalue; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T10:17:31.880

$.QueryString.id 将使用您包含的 $.QueryString 保存您的 ID 值。

将图像 html 更改为：

```
<img id="avatarimage" src="http://api.sidewaykill.com/steam/avatar.php?id=placeholderimageid" alt="Player Avatar" /> 
```

你想要的Javascript是

```
$.get('http://api.sidewaykill.com/steam/name.php?id=' + $.QueryString.id)
    .success(function(data) {
    $('#steamname').html(data);
});

$('#avatarimage').attr('src', 'http://api.sidewaykill.com/steam/avatar.php?id=' + $.QueryString.id); 
```

# sql-server - TSQL 将 newid 转换为十进制(38,0)

> ID：15335777
> 
> 赞同：2
> 
> 时间：2013-03-11T10:05:28.603
> 
> 标签：sql-server, tsql, guid, newid

我想将**newid()**输出转换或转换为十进制（需要最小空间）

到目前为止，我这样做了：

```
SELECT  CAST( '0x'+REPLACE(CAST(NEWID() AS VARCHAR(50)), '-', '' ) AS DECIMAL(38,0) ) 
```

但我收到了这个错误：

> 将数据类型 varchar 转换为数字时出错。

搜索了很多但感到沮丧，来这里寻求帮助。

提前谢谢了。

* * *

更新：十进制（8,0）变成十进制（38,0），仍然得到同样的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T10:40:04.843

这是一个[xy 问题](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)。

用于 GUID 的正确数据类型是`uniqueidentifier`. 无需自己将其转换为某种数字数据类型。

`uniqueidentifier`以 16 字节二进制格式存储，而不是显示的字符串`char(36)`。

# javascript - Rails：以表格形式获得悬停弹出窗口

> ID：15335780
> 
> 赞同：0
> 
> 时间：2013-03-11T10:05:31.133
> 
> 标签：javascript, css, ruby-on-rails-3, popup

我正在寻找在表单中实现悬停弹出功能。我在stackoverflow上得到了类似的答案。当我实施它时，它不起作用。这是我的代码：

HTML：

```
<div id='user'><%= f.label :product_code, "Product code", :id => "field2" %></div>
<div id='popup'>(Your name, product and city  initials without space. e.g. MHRRJP or MHRRJP etc for MoungHalwa by Rima Ravi Jain, Pune)</div> 
```

CSS：

```
#popup {
height: 50px;
width: 200px;
text-align: center;
vertical-align:middle;
background-color: cornflowerblue;
color: white;
display: none;
padding-top: 8px;
position: absolute;
} 
```

Javascript：

```
$(document).ready(function() {
$('#user').hover(function() {
    $('#popup').show();
}, function() {
    $('#popup').hide();
});
}); 
```

这是行不通的。谁能告诉错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:49:37.750

更改您的 Javascript 以监听悬停事件`field2`：

```
$(document).ready(function() {
    $('#field2').hover(function() {
            $('#popup').show();
        }, function() {
        $('#popup').hide();
    });
}); 
```

# jquery - 如何在预制的 jquery 库中创建一个链接，使其看起来像一张照片？

> ID：15335786
> 
> 赞同：0
> 
> 时间：2013-03-11T10:05:52.113
> 
> 标签：jquery, html, css

我对这段代码中的第一个链接有问题，它代表照片的缩略图，当您单击它时，它将展开为更大的照片。我试图制作一个 jsfiddle，但我找不到预制 jquery mbGallery.js 的代码，所以我将尝试解释应该发生什么：第一个代表 phoo 的拇指，当你点击它时，它会展开，但我不能将它的纵横比修改为 50x50，它显示的是原始照片的尺寸。因此，如果我有 1000x1000 的照片，拇指将是 1000x1000，但我仍然希望它自动调整为带有 (x)x(y)、x 和 y < 100px 的小图标（我以一般形式说，因为照片可以是宽的或纵向的）

html

```
<div  id="g1" class="galleryCont">
    <a class="imgThumb" src="img/activitate1/2008.jpg"></a>
    <a class="imgFull" href="img/activitate1/2008.jpg"></a>
    <div class="imgDesc">Description 01</div>

    <a class="imgThumb" src="img/activitate1/2009.jpg"></a>
    <a class="imgFull" href="img/activitate1/2009.jpg"></a>
    <div class="imgDesc">Description 02</div>

    <a class="imgThumb" src="img/activitate1/2010.jpg"></a>
    <a class="imgFull" href="img/activitate1/2010.jpg"></a>
    <div class="imgDesc">Description 02</div>
</div> 
```

css

```
.galleryCont{
      display:none;
    } 
```

爪哇

```
<script type="text/javascript" src="js/mbGallery.js"></script>
  <script type="text/javascript">
    $(function(){
            $('#g1').mbGallery({maskBgnd:'#ccc',minWidth: 50, minHeight: 50, overlayOpacity:.9,startFrom: 0,addRaster:true, printOutThumbs:true});

    });
  </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:12:53.247

Edit the *.imgThumb* in your CSS. Add *max-width:100px* and *max-height:100px* and then it will automaticaly resize the image. Change the pixels depending on what size
Example.

```
.imgThumb{
max-width:50px;
max-height:50px;
}

.imgFull{
 max-width:500px;
max-height:500px;
} 
```

# php - 第 1 页和第 2 页上的 php 会话

> ID：15335787
> 
> 赞同：1
> 
> 时间：2013-03-11T10:05:54.240
> 
> 标签：php, session, session-variables, session-cookies, session-timeout

这是我的问题，我可以说 2 页第 1 页和第 2 页，我需要打开会话并在第 1 页上设置 cookie，该 cookie 将保留 1 小时，并在每次页面刷新时重置。现在第 2 页的故事略有不同，首先第 2 页不应该打开任何会话，而是应该检查在第 1 页上打开的任何会话是否仍然有效，如果仍然有效，那么无论请求是什么都继续进行，并且但是，如果访问第 2 页的访问者直接通过保存的 url 访问页面 2，或者如果在会话 cookie 过期后的任何时间访问第 2 页，则在 cookie 的生命周期内保留，则访问者应重定向到第 1 页。

这是我到目前为止在第 1 页上所做的

```
<?php
function startSession($time = 3600, $ses = 'MYSES') {
    session_set_cookie_params($time);
    session_name($ses);
    session_start();

    // Reset the expiration time upon page load
    if (isset($_COOKIE[$ses]))
      setcookie($ses, $_COOKIE[$ses], time() + $time, "/");
}
?> 
```

问题是，我不知道该做什么以及如何做其余的事情以及我应该在第 2 页上做什么？

这是我在第 2 页尝试过的，但没有奏效。

```
<?php
if (!isset($_SESSION));{
$a = session_id();
if(empty($a) and $_SERVER['HTTP_REFERER']);{
    header('location: page1.html');}}
?> 
```

请帮助各位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:39:00.420

撇开语法问题不谈，看起来您根本没有使用 $_SESSION，要使用 $_SESSION 您必须在任何输出之前声明 session_start() 。因此，在您的情况下，可能仅使用 Cookie。

第 1 页（page1.php）：

```
<?php
    function extendCookie($time = 3600) {
        setcookie('MYSES', 'dummy var', time() + $time, "/");
    }
    extendCookie(); //extend cookie by 3600 seconds (default)
?>
You are on page 1.<br />
<a href="page2.php">Click to proceed to page 2</a> 
```

第 2 页（page2.php）：

```
<?php
    if (!isset($_COOKIE['MYSES'])){
        header('location: page1.php');
    }
?>
You are on page 2. 
```

如果你想使用会话，这将是方式：

第 1 页（page1.php）：

```
<?php
    session_start();
    function extendSession($time = 3600) {
        $_SESSION['expire_time'] = time() + $time;
    }
    extendSession(7200); //extend session by 7200 seconds
?>
You are on page 1.<br />
<a href="page2.php">Click to proceed to page 2</a> 
```

第 2 页（page2.php）：

```
<?php
    session_start();
    if (!isset($_SESSION) || $_SESSION['expire_time'] < time()){
        session_destroy(); //Optional, destroy the expired session.
        header('location: page1.php');
    }
?>
You are on page 2. 
```

# ios - objc_msg 使用关闭按钮时发送 EXC_BAD_ACCESS

> ID：15335789
> 
> 赞同：0
> 
> 时间：2013-03-11T10:05:57.077
> 
> 标签：ios, objective-c, xcode, uiview, uibutton

在我的项目中，我在右上角添加了一个关闭按钮，如下所示：

```
int closeBtnOffset = 10;
UIImage* closeBtnImg = [UIImage imageNamed:@"popupCloseBtn.png"];
UIButton* closeBtn = [UIButton buttonWithType:UIButtonTypeCustom];
[closeBtn setImage:closeBtnImg forState:UIControlStateNormal];
[closeBtn setFrame:CGRectMake( background.frame.origin.x + background.frame.size.width - closeBtnImg.size.width - closeBtnOffset, 
                               background.frame.origin.y ,
                               closeBtnImg.size.width + closeBtnOffset, 
                               closeBtnImg.size.height + closeBtnOffset)];
[closeBtn addTarget:self action:@selector(closePopupWindow) forControlEvents:UIControlEventTouchUpInside];
[bigPanelView addSubview: closeBtn]; 
```

closePopupWindw 方法如下所示：

```
-(void)closePopupWindow
{
    //remove the shade
    [[bigPanelView viewWithTag: kShadeViewTag] removeFromSuperview];
    [self performSelector:@selector(closePopupWindowAnimate) withObject:nil afterDelay:0.1];

} 
```

构建成功，但是当我单击 closeBtn 按钮时，程序关闭并显示以下消息：http: [//i45.tinypic.com/ddndsl.png](http://i45.tinypic.com/ddndsl.png)

我认为代码没有任何问题，因为我从另一个项目中复制了它并且在那里运行良好，但是在另一个项目中他们没有使用 ARC，我不确定这是否是问题所在。

**编辑：**

```
-(void)closePopupWindowAnimate
{

    //faux view
    __block UIView* fauxView = [[UIView alloc] initWithFrame: CGRectMake(10, 10, 200, 200)];
    [bgView addSubview: fauxView];

    //run the animation
    UIViewAnimationOptions options = UIViewAnimationOptionTransitionFlipFromLeft |
    UIViewAnimationOptionAllowUserInteraction    |
    UIViewAnimationOptionBeginFromCurrentState;

    //hold to the bigPanelView, because it'll be removed during the animation

    [UIView transitionFromView:bigPanelView toView:fauxView duration:0.5 options:options completion:^(BOOL finished) {

        //when popup is closed, remove all the views
        for (UIView* child in bigPanelView.subviews) {
            [child removeFromSuperview];
        }
        for (UIView* child in bgView.subviews) {
            [child removeFromSuperview];
        }

        [bgView removeFromSuperview];

    }];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:26:29.393

您正在访问已经发布的对象，使用属性并设置属性类型`strong`（使用`ARC`）总是一个好主意，这样只要您的视图处于活动状态，它们就可以保留在内存中的位置。

将您的类声明`UIButton`为属性，它将解决您的问题。您还应该看到您的按钮已添加，`bigPanelView`并且在调用该方法之前您正在删除此视图`closePopupWindowAnimate`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T08:22:33.373

快速浏览一下，我怀疑问题可能是 closePopupWindow 中的 performSelector 调用：按钮由 bigPanelView 保留，但这在第一行中被释放。这可能意味着在调用 performSelector 之前释放“self”。

作为风格问题，避免使用视图标签：在某种父对象中为相关视图定义属性要好得多。这也可以更轻松地避免保留周期和早期版本，例如您在此处遇到的问题

# android - 同步执行功能

> ID：15335791
> 
> 赞同：0
> 
> 时间：2013-03-11T10:06:00.613
> 
> 标签：android, thread-synchronization

我有一些功能必须同步实现 3 秒。我使用 soundpool、振动模式和背景动画播放声音。他们三个分别工作正常。但我无法正确安排它们的时间，以便所有人一起开始。

这 3 个函数需要在每 15 秒后重复调用一次。并将在单击按钮时停止。我尝试使用类似的东西，但它不能正常工作。

```
 myThread = new Thread(new Runnable(){

            @Override
            public void run() {
                // TODO Auto-generated method stub

                while (shouldRun==true) {
                    try {                      
                        mHandler.post(new Runnable() {

                            @Override
                            public void run() {

                                anim();
                                vibration();
                                sound();

                            }
                        });
                        mHandler.postDelayed(new Runnable() {
                            public void run(){
                            try {
                                Thread.sleep(15000);
                            } catch (InterruptedException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }
                            }
                        }, 3000);
                    } catch (Exception e) {
                        // TODO: handle exception
                    }
                }               
            }// end of outer run()          
        });
        myThread.start(); 
```

这是正确的方法吗？还是有其他方法？

```
public void vibration(){            
    int dash = 1000;    
    int medium_gap = 500;

    long[] pattern = { 0,  // Start immediately
        dash, medium_gap,dash , medium_gap
    };
    // Only perform this pattern one time (-1 means "do not repeat")
    v.vibrate(pattern, -1);

}

linear = (LinearLayout) findViewById(R.id.lay);// this line is after setContentView in onCreate
public void anim(){

        drawable.addFrame(new ColorDrawable(Color.RED), 1000);  
        drawable.addFrame(new ColorDrawable(Color.WHITE), 500);         
        drawable.setOneShot(false);     
        linear.setBackgroundDrawable(drawable);         
        drawable.start(); 

    }

sp = new SoundPool(5, AudioManager.STREAM_NOTIFICATION, 0);
buzzer = sp.load(this, R.raw.buzzer, 0);
public void sound(){
        sp.play(buzzer, 1,1, 0, 0, 1); //start alert tone
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:22:54.593

试试下面的。

```
myThread= new Thread(new Runnable(){

           @Override
           public synchronized void run() {
                // TODO Auto-generated method stub

             Write your stuff..............
             ....................

             }
       }).start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:46:28.803

真的需要同步实现这样的功能吗？Android UI 是异步的，这是有充分理由的。你没有写你是如何实现动画、振动和声音方法的。我不确定它们是否可以以这种方式实现，尤其是动画。android中的绘图通常应该在主线程中完成。如果您想处理应用程序暂停、按键事件或取消响铃，您应该能够对传入事件做出反应，并且您当前的线程不允许这样做。

我建议你检查 API 如何播放声音和如何振动。然后使用任何事件开始操作。启动振动器，开始播放声音并开始动画。使用处理程序在 3 秒后发送延迟消息以停止它。取消声音播放、振动、停止重绘动画。并在停止 15 秒后使用处理程序重新启动它。对我来说似乎很重要，背景动画将在哪里以及将使用什么小部件？您可以使用 SurfaceHolder 做到这一点，但同样，除非您需要使用同步代码，否则不要这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T10:47:12.313

在没有看到所有代码的情况下，我不确定是否有任何代码需要在 UI 线程上，但动画可能确实如此。我的想法是让每个线程都有自己的线程，并且只有一个播放、暂停和释放方法。所以在 3 秒后告诉他们所有人暂停。然后告诉他们都玩。不过，动画必须从其 run 方法向 UI 线程发布一些内容。另一个问题...取决于您需要它们的同步程度，这可能会出现问题，因为在较旧的 android 版本上播放声音可能会出现明显延迟。

* * *

编辑：您是否还可以更新您的问题以更详细地说明问题所在，它们是否都在同一时间开始，一个接一个地播放或其他什么。

这是一些代码的刺探。如果您将以下代码添加到您的类中，然后在合理的地方创建并启动线程（如视图创建）

```
Sound s = new Sound();
s.start();
Vibrate vi = new Vibrate(v);
vi.start(); 
```

并在您的 onStop() 方法中将它们的 release 设置为 true。最后，在您的处理程序的 run 方法中，而不是：

```
anim();
vibration();
sound(); 
```

有：

```
s.play = true;
vi.play = true;
anim(); 
```

//要添加的类

```
class Sound extends Thread
{
    public boolean play = false;
    SoundPool sp;
    int buzzer;
    public boolean released = false;

    public Sound()
    {
        sp = new SoundPool(5, AudioManager.STREAM_NOTIFICATION, 0);
        buzzer = sp.load(this, R.raw.buzzer, 0);
    }

    public void run()
    {
        while (!released)
        {
            if (play)
            {
                sp.play(buzzer, 1,1, 0, 0, 1); //start alert tone
                play = false;
            }
            else
            {
                try
                {
                    Thread.sleep(5);
                }
                catch (Exception ex) {}
            }
        }

        // release the sound pool
    }
}

class Vibrate extends Thread
{
    public boolean play = false;
    public boolean released = false;
    int dash = 1000;    
    int medium_gap = 500;
    Vibrator v;

    long[] pattern = { 0,  // Start immediately
        dash, medium_gap, dash , medium_gap };

    public Vibrate(Vibrator v)
    {
        this.v = v;
    }

    public void run()
    {
        while (!released)
        {
            if (play)
            {
                // Only perform this pattern one time (-1 means "do not repeat")
                v.vibrate(pattern, -1);
                play = false;
            }
            else
            {
                try
                {
                    Thread.sleep(5);
                }
                catch (Exception ex) {}
            }
        }
    }
} 
```

# asp.net - 动态创建文本框而不回发

> ID：15335794
> 
> 赞同：1
> 
> 时间：2013-03-11T10:06:12.723
> 
> 标签：asp.net, dynamic, updatepanel, postback

我想要一个按钮，它的 onclick 将动态创建一个文本框而无需任何回发。我试图使用更新面板来做到这一点，但直到现在我还没有设法做到这一点。单击按钮时不会创建任何内容。以下是我使用的代码：

```
 <asp:PlaceHolder ID="textboxes" runat="server"/>

     <asp:ScriptManager ID="scriptMgr" runat="server" />
                <asp:UpdatePanel ID="updatePnl" runat="server">
                    <ContentTemplate>
                        <div>
                            <asp:Button id="Button" text="Add Destination" OnClick="btnCreate_Click" runat="server"/>
                        </div>
                    </ContentTemplate>
                </asp:UpdatePanel> 
```

代码隐藏

```
 protected void btnCreate_Click(object sender, EventArgs e)
        {
             textboxes.Controls.Add(new TextBox() { ID = "txt" + 1 });

        } 
```

这就是我在aler（容器）上得到的；：

![在此处输入图像描述](../Images/9cafa93d8560fd01965fb753cc3c9684.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:13:42.790

您必须使用 OnClientClick 创建没有回发的文本框

```
<asp:Button id="Button" text="Add Destination" OnClientClick="return CreateTxt(); runat="server"/>

<script type="text/javascript">

function CreateTxt()
{
    var container = document.getElementById("myContainerDiv");
    var html = document.getElementById('myContainerDiv').innerHTML;
    html = html + "<input type=text ... /><br />";
    container.innerHTML= html;
   return false;
}

</script> 
```

myContainerDiv 是要添加文本框的 div 的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T10:16:44.007

在按钮单击事件中使用它。

```
 TextBox t = new TextBox();
    t.ID = "txt";
    this.form1.Controls.Add(t); 
```

您可以使用它添加任意数量的文本框。但是当回发发生时，它们很难管理。请参阅下面的链接以了解有关动态控件和回发的更多信息。

1.[动态 Web 服务器控件和视图状态](http://msdn.microsoft.com/en-us/library/hbdfdyh7.aspx)

2.[动态 Web 控件、回发和视图状态](http://aspnet.4guysfromrolla.com/articles/092904-1.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:04:46.533

我认为在 Javascript 中，您可以这样使用。希望这可以帮助你...

```
var element = document.createElement("jsTextBox"); 
```

    //为元素分配不同的属性。

```
element.setAttribute("value", "text");
<SpanElement>.appendChild(element); 
```

# python - 在python中导入和排序文本文件

> ID：15335795
> 
> 赞同：0
> 
> 时间：2013-03-11T10:06:12.787
> 
> 标签：python, list, text-files

我有一个看起来像这样的文本文件：

```
2013-03-10   Maxi Ica Storm Lindh -805,42  3 326,22 
2013-03-07   Hemk P Matgl Dje -86,80  4 131,64 
2013-03-06   Hemk P Sthlm City -238,30  4 218,44 
2013-03-04   Hemk P Matgl Dje -150,91  4 456,74 
2013-03-02   Lidl 257 / Sthlm Sveav -174,00  4 607,65 
```

我想将此文件导入 python 到一个列表中，所有行都被存储并且这些行是这样划分的：

```
2013-03-10  | Maxi Ica Storm Lindh | -805,42 | 3 326,22 
```

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:10:16.697

您可能有一个制表符分隔的文件。使用[`csv`模块](http://docs.python.org/2/library/csv.html)阅读：

```
import csv

with open('somefilename.csv', 'rb') as inputfile:
    for row in csv.reader(inputfile, delimiter='\t'):
        print ' | '.join(row) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:28:07.733

假设您不能/不会更新源文件，您可能无法使用正则表达式来解析这些行。对于您给出的输入，这将起作用（假设“行”包含您的行）：

```
>>> import re
>>> matcher = re.compile(r'^(\d{4}-\d{2}.\d{2})\s+(.+) (-?[\d ]+,\d{2})\s+(-?[\d, ]+)$')
>>> formatted_lines = ["|".join(m.groups()) for m in [matcher.match(line) for line in lines]]
>>> for line in formatted_lines:
...     print(line)
...
2013-03-10|Maxi Ica Storm Lindh|-805,42|3 326,22
2013-03-07|Hemk P Matgl Dje|-86,80|4 131,64
2013-03-06|Hemk P Sthlm City|-238,30|4 218,44
2013-03-04|Hemk P Matgl Dje|-150,91|4 456,74
2013-03-02|Lidl 257 / Sthlm Sveav|-174,00|4 607,65 
```

# c# - 使用文本文件的 SSIS 日志提供程序为 SSIS 日志记录创建动态路径

> ID：15335796
> 
> 赞同：0
> 
> 时间：2013-03-11T10:06:13.343
> 
> 标签：c#, path, ssis, event-log, expressionbuilder

你好，我在文本文件的 SSIS 日志提供程序的路径目标方面遇到了问题

起初我使用静态路径，`D:\\`但现在我想从 sql 表中获取路径并将其放在变量上，

所以我为 SSIS txt 文件*连接字符串创建***表达式生成器**

 *```
@[User::LogPath]+ @[System::PackageName]+ ("_"+(RIGHT((DT_WSTR,4)
DATEPART("yyyy",GetDate()),4)+
RIGHT("0"+(DT_WSTR , 2)
 DATEPART("mm", GetDate()),2)+
RIGHT("0"+(DT_WSTR,2)
DATEPART("dd",GetDate()),2)+"_"+
RIGHT("0"+(DT_WSTR,2)
DATEPART("HH",GetDate()),2)+"_"+
RIGHT("0"+(DT_WSTR,2)
DATEPART("mi",GetDate()),2)+"_"+
RIGHT("0"+(DT_WSTR,2)
DATEPART("SS",GetDate()),2))+".log") 
```

但是`@[User::LogPath]`没有给出路径值，所以 txt 日志文件没有创建

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:48:39.340

我在我所有的 SSIS 包中都设置并运行了这个，因为我喜欢让所有东西都由表驱动。

在每个包中，我创建了一个名为“LoggingPath”的字符串变量，该变量使用如下选择语句填充了 SQL 任务：

```
SELECT FilePath
FROM Files
WHERE FileFunction = 'Log'
  AND SSISPackage = 'ImportStuff' 
```

在此 SQL 任务中，ResultSet 设置为“单行”。对于结果集，我有 Result Name = 0 和 Variable Name = "User::LoggingPath" 引用前面提到的变量。我还将此 SQL 任务的延迟验证设置为“真”。

当 SQL 任务运行时，它会填充变量，然后在 SSIS 日志文本日志文件下的以下表达式（类似于您的表达式）中使用该变量：

@[User::LoggingPath] + "\\" + @[System::PackageName] + "_" + (DT_STR,4,1252)DATEPART ("yyyy" , @[System::StartTime]) + RIGHT(" 0" + (DT_STR,4,1252)DATEPART( "mm" , @[System::StartTime] ), 2) + RIGHT("0" + (DT_STR,4,1252)DATEPART( "dd" , @[System ::StartTime] ), 2) + RIGHT("0" + (DT_STR,4,1252)DATEPART( "hh" , @[System::StartTime] ), 2) + RIGHT("0" + (DT_STR,4 ,1252)DATEPART( "mi" , @[System::StartTime] ), 2) + RIGHT("0" + (DT_STR,4,1252)DATEPART( "ss" , @[System::StartTime] ), 2 ) + ".csv"

确保您记得应用双反斜杠“\\”，如上所示。希望这可以帮助。

科什*

# javascript - JS 正确启动，但除非我将其放入控制台，否则仍不会运行

> ID：15335798
> 
> 赞同：2
> 
> 时间：2013-03-11T10:06:19.523
> 
> 标签：javascript, jquery

在我输出我的标记之后我有这个运行（就在`</body>`：

```
$(document).ready(function() {
.....
    focusLeaving: function(){
                    e('#running');
                    $('.levelThree').on('mouseleave',function () {
                        e('remove');
                        MM.internalMenu.levelFive.close(function(){});
                        MM.internalMenu.levelThree.close($(this));
                        $(this).parent().removeClass('active');
                    });
                }
    //This outputs as expect: '#running'
....
}); 
```

然而，`.levelThree`什么都不会发生。如果我在控制台中运行上面的代码，或者甚至通过控制台运行函数本身，`MM.internalMenu.levelThree.focusLeaving();`那么函数就会相应地工作。

这让我很困惑，我知道它应该工作。我什至知道它正在运行，那为什么它不起作用....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:19:22.520

你把你的脚本包进去了`$(document).ready(function() { ... }`吗？通过在 DOM 准备好后运行 JS 函数可能会使您的脚本再次工作，假设`MM`已经定义。

根据[官方文档](http://api.jquery.com/ready/)：

> 传递给 .ready() 的处理程序保证在 DOM 准备好后执行，因此这通常是附加所有其他事件处理程序并运行其他 jQuery 代码的最佳位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:44:51.790

使用该`on`函数意味着您将事件绑定到回调处理程序。`$('.levelThree').on('mouseleave',function () { .... }`相当于说“从现在开始，当在项目上触发 mouseleave 事件时，执行此功能”。

函数本身不会在那个时间点执行，它只会**设置**为在 mouseleave 事件发生时执行。

进一步解释：

```
<a id="my_link" href="#"> click me! </a> 
```

当您单击此按钮时，不会发生太多事情。假设你想让它`You clicked me!`在你点击它时说出来。您需要使用该`on`功能进行设置。

```
$("#my_link").on('click', function {
    alert("You clicked me!");
}); 
```

请注意，您仍然没有看到带有该消息的警告框。您只需将警报框**设置**为单击即可显示。如果您单击该链接，*那么*您只会看到警告框。

需要注意的是，设置事件处理程序不会触发事件本身。但是，如果您在控制台中运行该代码，**它将被直接执行**。这就解释了为什么您的代码在控制台中运行时可以正常工作。

我假设这`focusLeaving`是一个在鼠标离开项目时触发的事件？在这种情况下，解决此问题的最简单方法是删除该`on`函数，因为已经有一个事件触发和执行。您设置了两次，这就是导致您面临的问题的原因。

# c# - 使用 excel.interop.object 库从 xls 中删除前 3 行

> ID：15335799
> 
> 赞同：4
> 
> 时间：2013-03-11T10:06:21.253
> 
> 标签：c#, excel, office-interop

我正在使用 excel.interop.object 库 9.0 在 c# 中操作我的 xls 文件

如果假设我有一个有 5 张纸的 xls。所有工作表都有一些行。

我正在使用以下代码从我的 xls 中的每张表中删除前 2 行

```
Excel.Application excelApp = new Excel.Application();
        Excel.Workbook excelWorkbook = excelApp.Workbooks.Open(mstrFilePath, 1, false, 5, "", "", false, Excel.XlPlatform.xlWindows, "", true, false, null, false);
        try
        {
            Excel.Sheets excelWorkSheet = excelWorkbook.Sheets;                
            foreach (Excel.Worksheet work in excelWorkSheet)
            {
                Excel.Range range = work.get_Range("A1", "A3");
                Excel.Range entireRow = range.EntireRow; // update
                for (int i = 1; i <= 3; i++)
                {
                    entireRow.Delete(Excel.XlDirection.xlUp);                       
                }                  
            }
            //excelWorkbook.Close(false, mstrFilePath, null);
        }
        catch (Exception ex)
        {

        }
        finally
        {
            excelApp.Quit();
        } 
```

但是从工作表 3 中删除 2 行而不从任何其他工作表中删除任何行是行为不端。

这里出了什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T10:37:47.450

删除代码**中的 for 循环**(for (int i = 1; i <= 3; i++)) 它将起作用。

您已经选择了从 A1 到 A3 的范围（三行）......

```
Excel.Range range = work.get_Range("A1", "A3"); 
```

因此，无需再次为相同的 Range 循环，如下所示.....

```
//for (int i = 1; i <= 3; i++)
//{
    entireRow.Delete(Microsoft.Office.Interop.Excel.XlDirection.xlUp);
//} 
```

# iphone - 仅在自定义 UIView 中执行动画

> ID：15335800
> 
> 赞同：1
> 
> 时间：2013-03-11T10:06:25.510
> 
> 标签：iphone, ios

我面临与[使用 CoreAnimation 为形状设置动画类似的问题](https://stackoverflow.com/questions/1767401/animating-a-shape-with-coreanimation)

我有一个习惯`UIView`

## 我的用户界面视图

```
- (void)drawRect:(CGRect)rect {
    // Right here, I might also draw some triangle, circle which I do not wish
    // to be animated.

    // ...
    // Calculate minX, minY, ... based on rect and self->value.
    // ...

    // Draw a rounded rectangle based on minX, minY, ...
    // The x-location of rounded rectangle will be different for difference self->value
    CGContextMoveToPoint(context, minx, midy);
    CGContextAddArcToPoint(context, maxx, maxy, midx, maxy, radius);
    ...
    ...
    CGContextDrawPath(context, kCGPathFillStroke);        
}

// Usually trigger by controller via button clicked
- (void) setValueViaButtonClicked:(double) value {
    self->currentValue = value;
    dispatch_async(dispatch_get_main_queue(), ^{
        [self setNeedsDisplay];
    });
} 
```

目前，每当我单击具有与旧值不同的新值的按钮时，我都可以看到圆角矩形从旧位置移动到新位置，**但没有动画。**

我想要动画，只有在明确的按钮点击期间。对于我见过的大多数示例，动画代码是在控制器中执行的，由

*   动画是通过 Layer 和 CGPathCreateMutable 完成的
*   Layer 和 CGPathCreateMutable 的创建是在视图控制器中执行的。

我想知道，我怎么可能通过`MyUIView`'s执行上述任务`setValueViaButtonClicked`？由于没有来自 drawRect 的适当`rect`信息，我将如何配置从创建的路径的信息`CGPathCreateMutable`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-02T17:06:50.880

我认为您不使用`CoreAnimation`，而`CoreGraphics`只是绘制当前状态/值。每当涉及到动画而不是静态图像时，我都会切换到`CoreAnimation`图层。在您的情况下，我将创建一个`UIView`子类并`CAShapeLayer`为您的三角形（或任何形状）添加一个。

它看起来像这样：

```
@interface MyView ()
@property (nonatomic, strong) CAShapeLayer *shapeLayer;
@property (nonatomic, assign) double currentValue;
@end

@implementation MyView

-(instancetype)init {
  if (self = [super init]) {
    [self setup];
  }
  return self;
}

- (instancetype)initWithCoder:(NSCoder *)aDecoder {
  if (self = [super initWithCoder:aDecoder]) {
    [self setup];
  }
  return self;
}

- (instancetype)initWithFrame:(CGRect)frame
{
  self = [super initWithFrame:frame];
  if (self) {
    [self setup];
  }
  return self;
}

- (void)setup {
  CAShapeLayer *shape = [CAShapeLayer layer];
  shape.contentsScale = [[UIScreen mainScreen] scale];
  self.shapeLayer = shape;
  [self.layer addSublayer:shape];
}

- (void)layoutSubviews {
  [super layoutSubviews];
  self.shapeLayer.frame = self.bounds;
  self.shapeLayer.path = [self bezierPathForValue:self.currentValue].CGPath;
}

- (UIBezierPath *)bezierPathForValue:(double)value {
  UIBezierPath *path = [UIBezierPath bezierPath];
  [path moveToPoint:...]; // points are depending on currentValue
  return path;
}

- (void)setValueViaButtonClicked:(double) value {
  double oldValue = self.currentValue;
  self.currentValue = value;

  // update model value
  self.shapeLayer.path = [self bezierPathForValue:value].CGPath;

  CABasicAnimation *pathAnimation = [CABasicAnimation animationWithKeyPath:@"path"];
  pathAnimation.fromValue = (id)[self bezierPathForValue:oldValue].CGPath;
  pathAnimation.toValue = (id)[self bezierPathForValue:value].CGPath;
  pathAnimation.duration = 0.3f;
  [self.shapeLayer addAnimation:pathAnimation forKey:nil];
}

@end 
```

# ruby-on-rails - 警卫运行时水豚奇怪行为的Rspec

> ID：15335801
> 
> 赞同：1
> 
> 时间：2013-03-11T10:06:29.290
> 
> 标签：ruby-on-rails, rspec, capybara, guard

我使用 rspec+capybara 创建了几个测试。[测试代码](https://github.com/Asmmund/notes/commit/da19b797b705c4317ca2d8f519ebe45a86ee095c)

当我用 rspec 运行它们时，它们都通过了

```
git:(master) ✗ rspec    
Rack::File headers parameter replaces cache_control after Rack 1.5.
WARNING:  there is already a transaction in progress
NOTICE:  there is no transaction in progress
.WARNING:  there is already a transaction in progress
NOTICE:  there is no transaction in progress
.WARNING:  there is already a transaction in progress
NOTICE:  there is no transaction in progress
.WARNING:  there is already a transaction in progress
NOTICE:  there is no transaction in progress
.WARNING:  there is already a transaction in progress
NOTICE:  there is no transaction in progress
.WARNING:  there is already a transaction in progress
NOTICE:  there is no transaction in progress
.WARNING:  there is already a transaction in progress
NOTICE:  there is no transaction in progress
.WARNING:  there is already a transaction in progress
NOTICE:  there is no transaction in progress
.

Finished in 32.54 seconds
8 examples, 0 failures 
```

但是如果我使用防护，一些往往会失败（某些测试可能会失败，并且可能不会不时）
[防护输出](https://gist.github.com/Asmmund/5133192)

如何解释这种行为？以及如何解决？

**更新 1**
我已经在使用`gem 'database_cleaner'`这个配置：

```
config.before(:suite) do
    DatabaseCleaner.strategy = :transaction
    DatabaseCleaner.clean_with(:transaction)
  end

  config.before(:each) do
    DatabaseCleaner.start
  end

  config.after(:each) do
    DatabaseCleaner.clean
  end
  # If you're not using ActiveRecord, or you'd prefer not to run each of your
  # examples within a transaction, remove the following line or assign false
  # instead of true.
  config.use_transactional_fixtures = :transaction
  config.use_transactional_examples = true 
```

**更新 2**
更改了几个文件[https://github.com/Asmmund/notes/commit/a5e0a43d6247bb8f937fb7e9dcc8d8cfa7bfc4ea](https://github.com/Asmmund/notes/commit/a5e0a43d6247bb8f937fb7e9dcc8d8cfa7bfc4ea)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:06:19.283

根据您编写测试的方式，Capybara 使用 Selenium 驱动程序来运行它们。Selenium 与事务性装置不兼容，您应该将其设置为 false。

通常，您应该尽量避免将 Fixtures 与 Capybara（或大多数集成测试）一起使用。一个好的集成测试应该最低限度地依赖于夹具，而是在端到端流程中创建数据（例如，用户帐户应该通过模拟的应用内操作创建，即测试应该使用 Capybara 提交一个注册表单）。但奇怪的情况是无法避免的，您可能需要在数据库中植入一些数据。许多人为此使用FactoryGirl等工厂，并取得了成功。

如果您的测试是硒，您的数据库清理还需要使用截断策略，而不是事务策略。

查看本教程作为更深入的指南。

注意：为了节省时间，在您的情况下，请从下到上阅读：

[http://asciicasts.com/episodes/257-request-specs-and-capybara](http://asciicasts.com/episodes/257-request-specs-and-capybara)

# ios - 在 iOS 上使用 RNCryptor 加密/解密大文件时的内存问题

> ID：15335803
> 
> 赞同：9
> 
> 时间：2013-03-11T10:06:31.193
> 
> 标签：ios, objective-c, memory, rncryptor

我正在尝试使用 RNCryptor 在 iOS 上加密和解密大文件（600+MB）。在[github 上，](https://github.com/rnapier/RNCryptor/blob/master/README.md#async-and-streams)我找到了有关如何在流上异步使用库的示例代码。此代码类似于 Rob Napier 关于[同一主题的问题](https://stackoverflow.com/questions/14481605/dispatch-queues-and-asynchronous-rncryptor/14586231#14586231)的答案。

然而，虽然我认为我正确地实现了代码，但该应用程序使用了高达 1.5 GB 的内存（在 iPad 6.1 模拟器中）。我认为代码应该阻止应用程序在内存中保留多个数据块？那么出了什么问题呢？

在我的控制器中，我创建了一个“CryptController”，我用加密/解密请求发送消息。

```
 // Controller.m
  NSString *password = @"pw123";
  self.cryptor = [[CryptController alloc] initWithPassword:password];

  //start encrypting file
  [self.cryptor streamEncryptRequest:self.fileName andExtension:@"pdf" withURL:[self samplesURL]];

  //wait for encryption to finish
  NSDate *timeout = [NSDate dateWithTimeIntervalSinceNow:1];
  do {
    [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode
                             beforeDate:timeout];
  } while (![self.cryptor isFinished]); 
```

在 CryptController 我有：

```
- (void)streamEncryptionDidFinish {
  if (self.cryptor.error) {
    NSLog(@"An error occurred. You cannot trust decryptedData at this point");
  }
  else {
    NSLog(@"%@ is complete. Use it as you like", [self.tempURL lastPathComponent]);
  }
  self.cryptor = nil;
  self.isFinished = YES;
}

- (void) streamEncryptRequest:(NSString *)fileName andExtension:(NSString *)ext withURL:(NSURL *)directory {

  //Make sure that this number is larger than the header + 1 block.
  int blockSize = 32 * 1024;

  NSString *encryptedFileName = [NSString stringWithFormat:@"streamEnc_%@", fileName];
  self.tempURL = [[NSFileManager defaultManager] URLForDirectory:NSDocumentDirectory inDomain:NSUserDomainMask appropriateForURL:nil create:NO error:nil];
  self.tempURL = [self.tempURL URLByAppendingPathComponent:encryptedFileName isDirectory:NO];
  self.tempURL = [self.tempURL URLByAppendingPathExtension:@"crypt"];

  NSInputStream *decryptedStream = [NSInputStream inputStreamWithURL:[[directory URLByAppendingPathComponent:fileName isDirectory:NO] URLByAppendingPathExtension:ext]];
  NSOutputStream *cryptedStream = [NSOutputStream outputStreamWithURL:self.tempURL append:NO];

  [cryptedStream open];
  [decryptedStream open];

  __block NSMutableData *data = [NSMutableData dataWithLength:blockSize];
  __block RNEncryptor *encryptor = nil;

  dispatch_block_t readStreamBlock = ^{
    [data setLength:blockSize];
    NSInteger bytesRead = [decryptedStream read:[data mutableBytes] maxLength:blockSize];
    if (bytesRead < 0) {
      //Throw an error
    }
    else if (bytesRead == 0) {
      [encryptor finish];
    }
    else {
      [data setLength:bytesRead];
      [encryptor addData:data];
      //NSLog(@"Sent %ld bytes to encryptor", (unsigned long)bytesRead);
    }
  };

  encryptor = [[RNEncryptor alloc] initWithSettings:kRNCryptorAES256Settings
                                           password:self.password
                                            handler:^(RNCryptor *cryptor, NSData *data) {
                                              //NSLog(@"Encryptor received %ld bytes", (unsigned long)data.length);
                                              [cryptedStream write:data.bytes maxLength:data.length];
                                              if (cryptor.isFinished) {
                                                [decryptedStream close];
                                                //call my delegate that i'm finished with decrypting
                                                [self streamEncryptionDidFinish];
                                              }
                                              else {
                                                readStreamBlock();
                                              }
                                            }];

  // Read the first block to kick things off
  self.isFinished = NO;
  readStreamBlock();
} 
```

当我使用分配工具进行分析时，我看到持续增长的分配类别是`malloc 32.50 KB`、和。尤其是增长很大，超过 1 GB。负责的调用者是 负责的调用者是 。`malloc 4.00 KB``NSConcreteData``NSSubrangeData``malloc 32.50 KB``[NSConcreteData initWithBytes:length:copy:freeWhenDone:bytesAreVM:]``NSConcreteData``-[NSData(NSData) copyWithZone:]`

当我使用泄漏仪器进行分析时，没有发现泄漏。

我是 Objective-C 的新手，据我了解，新的 ARC 应该处理内存的分配和释放。在搜索任何与内存相关的内容时，我发现的所有信息都是假设您不使用 ARC（或者在撰写本文时它不存在）。我确定使用的是 ARC，因为当我尝试手动释放内存时会出现编译错误。

如果有人可以帮助我，将不胜感激！如果需要更多信息，我很乐意提供:) 另外，我是 StackOverflow 的新手，所以如果我忽略了我应该做的任何事情，请告诉我！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T11:04:30.980

我终于尝试了[这里](https://stackoverflow.com/a/14571838/2151700)给出的解决方案，它使用信号量而不是依赖于回调来等待流。这很完美:) 根据分配工具，内存使用量徘徊在 1.1 MB 左右。由于信号量语法，它可能看起来不那么整洁，但至少它完成了我需要它做的事情。

当然，仍然欢迎其他建议:)

```
- (void)encryptWithSemaphore:(NSURL *)url {
  dispatch_semaphore_t semaphore = dispatch_semaphore_create(0);

  __block int total = 0;
  int blockSize = 32 * 1024;

  NSString *encryptedFile = [[url lastPathComponent] stringByDeletingPathExtension];
  NSURL *docsURL = [[NSFileManager defaultManager] URLForDirectory:NSDocumentDirectory inDomain:NSUserDomainMask appropriateForURL:nil create:NO error:nil];
  self.tempURL = [[docsURL URLByAppendingPathComponent:encryptedFile isDirectory:NO] URLByAppendingPathExtension:@"crypt"];

  NSInputStream *inputStream = [NSInputStream inputStreamWithURL:url];
  __block NSOutputStream *outputStream = [NSOutputStream outputStreamWithURL:self.tempURL append:NO];
  __block NSError *encryptionError = nil;

  [inputStream open];
  [outputStream open];

  RNEncryptor *encryptor = [[RNEncryptor alloc] initWithSettings:kRNCryptorAES256Settings
                                                        password:self.password
                                                         handler:^(RNCryptor *cryptor, NSData *data) {
                                                           @autoreleasepool {
                                                             [outputStream write:data.bytes maxLength:data.length];
                                                             dispatch_semaphore_signal(semaphore);

                                                             data = nil;
                                                             if (cryptor.isFinished) {
                                                               [outputStream close];
                                                               encryptionError = cryptor.error;
                                                               // call my delegate that I'm finished with decrypting
                                                             }
                                                           }
                                                         }];
  while (inputStream.hasBytesAvailable) {
    @autoreleasepool {
      uint8_t buf[blockSize];
      NSUInteger bytesRead = [inputStream read:buf maxLength:blockSize];
      if (bytesRead > 0) {
        NSData *data = [NSData dataWithBytes:buf length:bytesRead];

        total = total + bytesRead;
        [encryptor addData:data];

        dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);
      }
    }
  }

  [inputStream close];
  [encryptor finish];  
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-07T11:15:18.087

赶紧跑：

```
self.cryptorQueue = dispatch_queue_create([queueName cStringUsingEncoding:NSUTF8StringEncoding], NULL);

dispatch_async(self.cryptorQueue, ^{
        readStreamBlock();
    }); 
```

麻烦：堆栈正在增长，自动释放拉取不会执行缓冲区释放。

解决方案：在同一个队列中添加异步..这将使当前块完成执行。

这是代码：

```
__block NSMutableData *data = [NSMutableData dataWithLength:blockSize];
__block RNDecryptor *decryptor = nil;

dispatch_block_t readStreamBlock = ^{

    [data setLength:blockSize];

    NSInteger bytesRead = [inputStream read:[data mutableBytes] maxLength:blockSize];
    if (bytesRead < 0) {
        // Throw an error
    }
    else if (bytesRead == 0) {
        [decryptor finish];
    }
    else {

        [data setLength:bytesRead];
        [decryptor addData:data];
    }
};

decryptor = [[RNDecryptor alloc] initWithPassword:@"blah" handler:^(RNCryptor *cryptor, NSData *data) {

        [decryptedStream write:data.bytes maxLength:data.length];
        _percentStatus = (CGFloat)[[decryptedStream propertyForKey:NSStreamFileCurrentOffsetKey] intValue] / (CGFloat)_inputFileSize;
        if (cryptor.isFinished)
        {
            [decryptedStream close];
            [self decryptFinish];
        }
        else
        {
            dispatch_async(cryptor.responseQueue, ^{
                readStreamBlock();
            });
            [self decryptStatusChange];
        }

}];

// Read the first block to kick things off

decryptor.responseQueue = self.cryptorQueue;
[self decryptStart];
dispatch_async(decryptor.cryptorQueue, ^{
    readStreamBlock();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:01:04.897

我可能错了，但我认为您的`do...while`循环会阻止自动释放池足够频繁地耗尽。

你为什么要使用这个循环来等待解密器完成？您应该使用完成块来通知您的控制器 drcryptor 已完成。

（顺便说一句，欢迎来到 SO，你的问题问得很好，非常感谢）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T12:49:33.280

我可能又错了，但是在您的`readStreamBlock`, 中`data`应该是块的参数，而不是对在其`__block NSMutableData`外部声明的引用。如您所见，`RNEncryptor`处理程序提供了自己的`data`变量，这与您自己声明的变量不同。

理想情况下，将所有`readStreamBlock`内容直接放在处理程序中，甚至无需将其声明为块。

# c++ - QtCreator 或 QtSDk

> ID：15335809
> 
> 赞同：-1
> 
> 时间：2013-03-11T10:06:42.377
> 
> 标签：c++, qt, opencv

我必须使用 OpenCV 和 Qt 来开发 C++ 应用程序，那么我应该使用 QtCreator 或 Qt QtSDk 哪个 QT？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:17:20.860

QtCreator 只是一个与 Qt-SDK 一起作为 C++ 框架工作的 IDE。

最主要的是Qt-SDK，但要同时获得它们。作为 Qt 的初学者，我建议您同时使用 QtCreate 和 Qt-SDK。

# python - 我如何从字典中获取许多值并将其作为选择字段？

> ID：15335812
> 
> 赞同：0
> 
> 时间：2013-03-11T10:06:58.073
> 
> 标签：python, dictionary, choicefield

当我尝试从列表中放入许多值时，我有一个字典列表，但出现此错误：

```
ErrorType 'builtin_function_or_method' object is not iterable 
```

这是我的功能：

```
def chooseOneServer():

     i=0
     for item in data:
         for key,value in item.items :
             if key == '1' :
                 servers = (
                        ('i',value), 

               ) 
                i +=1  
    return servers 

data =[{'1': value1.1,... },{'1':value2.1,...}] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:11:50.100

我认为问题出在这一行：

```
for key,value in item.items: 
```

`dict.items()`是一种方法，因此`item.items`会给您实际的方法（然后您尝试迭代此方法，因此会出现错误）。相反，您想调用该方法并获得结果，因此您需要括号：

```
for key,value in item.items(): 
```

# javascript - 在填充组合框列表时显示加载图像

> ID：15335827
> 
> 赞同：0
> 
> 时间：2013-03-11T10:07:31.710
> 
> 标签：javascript, dojo

我有一个包含 Dojo ComboBox 的对话框。现在我调用数据库以获取数据以填充组合框。我想在此期间显示“加载图像”。这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:11:04.093

我猜您正在尝试使用 dojo 工具包获得加载覆盖，在这种情况下，官方教程就足够了。

[http://dojotoolkit.org/documentation/tutorials/1.6/recipes/loading_overlay/](http://dojotoolkit.org/documentation/tutorials/1.6/recipes/loading_overlay/)

上一个问题也可以帮助您解决相同的问题

[Dojo“加载”-消息](https://stackoverflow.com/questions/487174/dojo-loading-message)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:31:48.047

@AurA 链接的问题的答案指定了许多技术来完成您正在尝试做的事情。

[Dojo“加载”-消息](https://stackoverflow.com/questions/487174/dojo-loading-message)

我使用 StandBy 小部件。这是一个演示它的用途的小提琴。

[http://jsfiddle.net/cswing/253Te/](http://jsfiddle.net/cswing/253Te/)

```
 var standby = new Standby({
          id: "standbyObj",
          target: "standby",
          color: "transparent",
          zindex: "auto",
          duration: "1000"
    });
    dojo.body().appendChild(standby.domNode);
    standby.startup();

    on(dojo.byId('btn'), 'click', function() {
        standby.show();

        // simulate a request.  hide the timeout in 5 seconds
        setTimeout(function() {
            standby.hide(); 
        }, 5000);
    }); 
```

# javascript - 使用正则表达式函数

> ID：15335839
> 
> 赞同：-2
> 
> 时间：2013-03-11T10:08:17.137
> 
> 标签：javascript, regex, validation

我是 HTML 和 JavaScript 的新手。我们正在尝试使用 RegExp 函数使用以下正则表达式验证 IP 地址。但是这个正则表达式的问题在于验证并返回 true，对于无效的 IP 地址也是如此。

例如，当 IP 地址输入为时，正则表达式可以正常工作，但当 IP 地址输入为`10.94.161.125`时，它会返回 true `10/94/161/125`。

事实上，任何代替`.`（如`@`、`!`等`#`）的字符都不会使函数返回 false，而是返回 true。请让我知道确切的区别是什么“\”。是为了使正则表达式正常工作，其中为“。” 它没有使正则表达式以正确的方式工作。这是我需要澄清的地方。

正则表达式非工作案例 senario：

```
var ipRE = new RegExp( '^([1-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(\.([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3}$' ); 
```

正则表达式工作案例

```
var ipRE = new RegExp( '^([1-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(\\.([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3}$' ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:25:30.970

作为参考，如果有人来这里寻找答案：

> 反斜杠 (\) 可用于在字符串中插入撇号、换行符、引号和其他特殊字符。

例子：

```
var str = 'You\'re welcome'; 
```

如果不转义`'`，字符串将在之后终止`You`

在您的正则表达式中，点需要转义，因为点在正则表达式中具有特殊含义。然后需要转义反斜杠，因为它在 javascript 中具有特殊含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:15:12.600

```
ValidIpAddressRegex = "^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$"; 
```

和 ：

```
ValidHostnameRegex = "^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$"; 
```

# osx-snow-leopard - 无法让 python 在 OS X 上读取我的 .txt 文件

> ID：15335842
> 
> 赞同：2
> 
> 时间：2013-03-11T09:15:43.067
> 
> 标签：osx-snow-leopard, python, textedit

我试图让 IDLE 读取我的 .txt 文件，但由于某种原因它不会。我在学校尝试过同样的事情，并且使用带有记事本的 Windows 计算机运行良好，但现在使用带有 IDLE 的 Mac 将无法读取（或找到）我的 .txt 文件。

我确保它们位于同一个文件夹/目录中，并且文件格式为纯文本，但仍然出现错误。这是我使用的代码：

```
def loadwords(filename):

   f = open(filename, "r")
   print(f.read())
   f.close()
   return

filename = input("enter the filename: ")
loadwords(filename) 
```

这是我输入文件名“test.txt”并按回车后得到的错误：

```
Traceback (most recent call last):
  File "/Computer Sci/My programs/HW4.py", line 8, in <module>
    loadwords(filename)
  File "/Computer Sci/My programs/HW4.py", line 4, in loadwords
    print(f.read())
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/encodings/ascii.py", line 26, in decode
    return codecs.ascii_decode(input, self.errors)[0]
UnicodeDecodeError: 'ascii' codec can't decode byte 0xff in position 0: ordinal not in range(128) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:07:40.350

您看到的错误意味着您的 Python 解释器尝试将文件加载为 ASCII 字符，但您尝试读取的文本文件**不是 ASCII 编码**的。它可能是 UTF-8 编码的（最近的 OSX 系统中的默认值）。

将编码添加到`open`命令应该会更好：

```
f = open(filename, "r" "utf8") 
```

另一种纠正方法是使用您的文件返回 TextEdit，然后选择**Duplicate**（或**Save as** **shift-cmd-S**），您可以在其中再次保存文件，但这次选择 ASCII 编码。尽管如果不存在，您可能需要在编码选项列表中添加 ASCII。

这个[另一个问题和接受的答案](https://stackoverflow.com/questions/5849654/python-openx-r-function-how-do-i-know-or-control-which-encoding-the-file/5849705)提供了一些关于选择您正在阅读的文件的编码方式的更多想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:29:55.493

您需要使用适当的编码打开文件。此外，您应该从该方法返回一些内容，否则您将无法对文件执行任何操作。

试试这个版本：

```
def loadwords(filename):
    with open(filename, 'r', encoding='utf8') as f:
         lines = [line for line in f if line.strip()]
    return lines

filename = input('Enter the filename: ')
file_lines = loadwords(filename)

for eachline in file_lines:
    print('The line is {}'.format(eachline)) 
```

这一行`[line for line in f if line.strip()]`是一个[列表理解](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)。它是以下内容的简短版本：

```
for line in f:
   if line.strip(): # check for blank lines
       lines.append(line) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-11T19:30:05.090

`textfile = "textfile.txt"`

```
file = open(textfile, "r", encoding = "utf8")
read = file.read()
file.close()
print(read) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-26T20:32:50.710

此编码限制仅限于 python 版本 2.*

如果您的 MAC 运行的是 Python 版本 3.*，则您不必添加额外的编码部分来对 txt 文件进行编码。

以下函数将直接在 python 3 中运行，无需任何编辑。

```
def loadwords(filename):
f = open(filename, "r")
print(f.read())
f.close()
return
filename = input("enter the filename: ")
loadwords(filename) 
```

# c++ - 从 C++ 文件中快速读取特定单词

> ID：15335845
> 
> 赞同：1
> 
> 时间：2013-03-11T10:08:43.330
> 
> 标签：c++, performance

我的经理告诉我创建一个测试，我需要测试某个特定单词是否存在于文件中。问题是文件可能非常大，如果测试运行很长时间，那么在回归测试期间它将失败。所以我想知道标准 C++ 中是否有任何方便的 API 可以快速告诉我这个词是否存在。我不想知道这个词的位置。该词位于文件开头附近的某个位置，但其确切位置未知。在这方面有什么帮助吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:12:37.690

如果文件没有特定的结构，除了包含单词（以任何顺序），唯一的解决方案是线性搜索，这意味着读取整个文件。如果您知道单词只能在开头附近，那么您只需搜索到该单词可以找到的最远点。

如果这还不够快，您要么必须以某种方式构造文件（排序等），要么必须加快阅读过程本身（例如 use `mmap`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:19:05.470

`mmap`该文件，然后`strnstr`它可能是最好的。除非您对文件结构有所了解，否则会限制您必须搜索的区域。

```
extern "C" {
#include <sys/mman.h>
#include <fcntl.h>
}

#include <cstring>
#include <cerrno>
#include <iostream>

int main(int argc, char* argv[]) {

    // I don't check the arguments here, you should probably do that

    // String to search for
    char* search_string = argv[2];

    // Open the file so we can map it
    int fd = open(argv[1], O_RDONLY);
    if (fd < 0) {
        std::cout << "Open failed: " << strerror(errno) << std::endl;
        return 1;
    }

    // Find the length of the file so we know how much to map
    off_t len = lseek(fd, 0, SEEK_END);
    if (len == -1) {
        std::cout << "Seek failed: " << strerror(errno) << std::endl;
        return 1;
    }

    // map the file into memory
    char* file_contents = (char*)mmap(
        NULL, len, PROT_READ, MAP_FILE | MAP_PRIVATE, fd, 0);
    if (file_contents == MAP_FAILED) {
        std::cout << "map failed: " << strerror(errno) << std::endl;
        return 1;
    }

    // We don't need the file open any more, we do need to unmap it later though
    close(fd);

    // Search for the string in the file here
    char* found = strnstr(file_contents, search_string, len);
    if (found == NULL)
        std::cout << "String not found" << std::endl;
    else
        std::cout << "String found @ " << found - file_contents << std::endl;

    munmap(file_contents, len);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T10:45:16.067

内存映射文件访问允许您直接访问文件的某些部分，而无需将其加载到内存中。

据我所知，Qt 也提供内存映射，而 C++ 标准库也没有。

您还可以使用操作系统的本机 API。`mmap`对于 UNIX，`CreateFileMapping`对于 Windows。

# php - PHP：将数据从互联网发送到本地脚本

> ID：15335846
> 
> 赞同：0
> 
> 时间：2013-03-11T10:08:51.113
> 
> 标签：php, curl, localhost

我可以将数据从 Internet php 脚本发送到本地服务器上的本地 php 脚本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:12:14.010

是的，如果只有您的本地服务器可以从外部以某种方式访问​​。

# ios - Objective-C 对象被释放后存在内存中

> ID：15335851
> 
> 赞同：2
> 
> 时间：2013-03-11T10:08:51.517
> 
> 标签：ios, objective-c, memory-management

我正在学习objective-c 内存管理的东西（没有ARC），我遇到了一些常见问题。这里提到了几次，所以我不是问你“到底是什么！？”，而是“我理解正确吗？”

问题：

文档说：

```
- (NSString *)fullName {

    NSString *string = [[[NSString alloc] initWithFormat:@"%@ %@",

                                          self.firstName, self.lastName] autorelease];

    return string;

} 
```

> 你拥有 alloc 返回的字符串。要遵守内存管理规则，您必须在丢失对它的引用之前放弃对字符串的所有权。**但是，如果您使用 release，则字符串将在返回之前被释放（并且该方法将返回无效对象）**。使用自动释放，您表示您想要放弃所有权，但您允许方法的调用者在释放之前使用返回的字符串。

所以让我们试试：

```
// Method defined in one on my class:
-(NSString*) returnString {
    NSString* str = [[NSString alloc] initWithString:@"returned String"]; 
    NSLog(@"1) Address in method = %p", [str self]);
    [str release];
    NSLog(@"2) Address in method = %p", [str self]);
    return str; 
 }

// In main: 
        NSString* str = [myObject returnString];
        NSLog(@"String is: [%@]", str);
        NSLog(@"3) Address in main = %p", [str self]); 
```

-

```
 Output:
    1) Address in method = 0x100002a50
    2) Address in method = 0x100002a50
    String is: [returned String] // <--
    3) Address in main = 0x100002a50 
```

所以，如果我理解得很好，问题是，很难预测什么时候会释放内存？或者实际上，内存中的特定位置仅被标记为“释放”，仅此而已……我说的对吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T10:20:46.423

`NSString`在许多情况下避免分配/释放非常聪明。这使得在 Objective C 中测试释放和学习内存管理语义是一个非常糟糕的选择。

在这种情况下，您正在从文字分配一个对象（永远不会被释放）。因为新初始化的对象是不可变对象的副本，所以初始化器只会返回字面量（同样，它永远不会被释放）。

例如，您应该使用`NSObject`或自定义派生类来测试释放。

另一个很大的帮助是启用僵尸，因为这可以确保您立即注意到对已释放对象的第一次访问。

> 所以，如果我理解得很好，问题是，很难预测什么时候会释放内存？

好吧，对象的生命周期是完全确定的（当不使用已弃用的 Mac OS X 垃圾收集器时）。唯一的问题是自动释放池：您通常不知道一个对象是否被自动释放，因此您无法猜测它的寿命是否**比**您预期的长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:52:00.570

```
NSString *str1 =@"parag";
NSString*str2=[[NSString alloc] initWithString:@"parag"];
NSLog(@"%p %p", str1, str2); //str1 and str2 both are same  
  //  0x100002098 0x100002098 
```

这与内部优化有关。你必须释放str2。

**注意：**这依赖于编译器和 initWithString: 方法的未记录和未保证的行为。两者都可能随时改变。

# javascript - Flot：显示特定的刻度标签

> ID：15335856
> 
> 赞同：3
> 
> 时间：2013-03-11T10:09:18.193
> 
> 标签：javascript, jquery, flot

我有一个 y 轴坐标为 55、110、220、440、880、1760 的浮点图。

我希望显示所有六个刻度，但我不希望显示刻度标签 55 和 1760。

可以通过 Flot Charts 实现吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T13:08:48.960

在您的选项中，在这些位置传递一个带有空标签的刻度数组：

```
yaxis: {
  ticks: [[55, ""], [110, "label"], [220, "label"], [440, "label"], [880, "label"], [1760, ""]]
} 
```

[在这里](http://jsfiddle.net/9x7aJ/1670/)拉小提琴。

# android - 在包/应用程序中使用来自 android 框架的 java 库

> ID：15335857
> 
> 赞同：3
> 
> 时间：2013-03-11T10:09:22.810
> 
> 标签：android, linux, linux-kernel

我正在添加一个应用程序作为我的 android 构建的一部分。该应用程序使用 android-support-v4.jar。因此，我将 jar 文件放在我的应用程序的 libs 文件夹中，并从应用程序的 Android.mk 文件中对其进行引用，如图所示。

```
include $(BUILD_PACKAGE)
LOCAL_PREBUILT_STATIC_JAVA_LIBRARIES := libs/android-support-v4.jar
include $(BUILD_MULTI_PREBUILT) 
```

在编译源代码时，我收到以下错误：

```
build/core/base_rules.mk:170: *** packages/apps/Personalization:  MODULE.TARGET.JAVA_LIBRARIES.android-support-v4 already defined by frameworks/support/v4\.   Stop.
DDK build start.

error: build_android

build/core/base_rules.mk:170: *** packages/apps/Personalization:  MODULE.TARGET.JAVA_LIBRARIES.android-support-v4 already defined by frameworks/support/v4\.   Stop.
DDK build start.

error: build_android 
```

有人可以让我知道需要做什么，这样我就可以摆脱这个错误并让我的构建正常工作

**更新**

我完整的 Android.mk 文件

```
LOCAL_PATH:= $(call my-dir)
include $(CLEAR_VARS)

LOCAL_SRC_FILES := $(call all-subdir-java-files)
LOCAL_STATIC_JAVA_LIBRARIES := \
    android-support-v4 \
LOCAL_PACKAGE_NAME := Personalization
LOCAL_CERTIFICATE := platform

include $(BUILD_PACKAGE)
LOCAL_PREBUILT_STATIC_JAVA_LIBRARIES := libs/android-support-v4.jar
include $(BUILD_MULTI_PREBUILT) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:13:16.200

```
LOCAL_STATIC_JAVA_LIBRARIES := \
        android-support-v4 
```

这应该有效。放在前面的任何地方`include $(BUILD_PACKAGE)`

# c# - 在 Windows Azure 上安装 EJabberd

> ID：15335861
> 
> 赞同：0
> 
> 时间：2013-03-11T10:09:40.563
> 
> 标签：c#, azure, xmpp, ejabberd, azure-web-roles

是否可以在我的 Azure 云应用程序上安装**EJabberd XMPP 服务器？**我想这样做是为了测试目的。如果可能，那么如何打开与 Jabber 服务器通信所需的端口。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T22:33:15.970

如果您将 Azure Cloud App 称为“Windows Azure 云服务”，则由于一些特定于应用程序的限制，您将无法运行它。

但是，如果您决定使用[Linux](http://www.windowsazure.com/en-us/manage/linux/)或[Windows](http://www.windowsazure.com/en-us/manage/windows/)的 Windows Azure 虚拟机，因为它支持 Linux 和 Windows 操作系统，您肯定可以让它运行。您可以根据需要为 EJabberd 服务器配置虚拟机端口，以支持与外部用户的基于 TCP/IP 的通信。以下是在 Windows [Azure](http://www.windowsazure.com/en-us/manage/windows/how-to-guides/setup-endpoints/)虚拟机中设置端点的说明。

# sql - 连接多个sql语句

> ID：15335865
> 
> 赞同：1
> 
> 时间：2013-03-11T10:10:02.793
> 
> 标签：sql, oracle, union

```
SELECT column_a1,column_b1,column_c1,column_d1,column_e1,column_f1,column_g1 
FROM mytable WHERE id=12 AND detectcolumn=1  

UNION ALL

SELECT column_a2,column_b2,column_c2,column_d2,column_e2,column_f2 
FROM mytable WHERE id=12 AND detectcolumn=2 

UNION ALL

SELECT column_a3,column_b3,column_c3,column_d3,column_e3,column_f3,column_g3
FROM mytable WHERE id=12 AND detectcolumn=3 

UNION ALL

SELECT column_a4 from mytable WHERE id=12 AND detectcolumn=4 

UNION ALL

SELECT column_a5 from mytable WHERE id=12 AND detectcolumn=5 

UNION ALL

SELECT column_a6 from mytable WHERE id=12 AND detectcolumn=6 

UNION ALL

SELECT column_a7 from mytable WHERE id=12 AND detectcolumn=7 
```

我应该如何将所有这些 sql 语句组合成一个 sql 语句。我想根据检测列的值从 mytable 中获取特定的列。

我尝试使用 UNION ALL，但它给出错误**ORA-01789：查询块的结果列数不正确**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:19:13.453

使用如下模式：

```
 select
   case detectcolumn
     when 4 then column_a4
     when 5 then column_a5
     when 6 then column_a6
   end
 from
   my_table
 where
   id           = 12 and
   detectcolumn in (4,5,6) 
```

# google-plus - 获取随机的 Google+ 用户 ID

> ID：15335866
> 
> 赞同：0
> 
> 时间：2013-03-11T10:10:05.013
> 
> 标签：google-plus

我想从 google+ 获取随机用户，但问题是要生成有效的 id。我所知道的是： - id 包括 21 个数字 - 第一个数字是“1” - 第二个数字是“0”或“1”

问题是：活跃的 google+ 用户数量乱序。我尝试生成不间断的 id，但没有一个匹配活动的 google+ id。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:38:22.983

我建议使用“随机”关键字对 Google+ API 使用 people.search 请求来获取有效 ID。

[https://developers.google.com/+/api/latest/people/search](https://developers.google.com/+/api/latest/people/search)

只是出于好奇：您打算如何处理这些随机 ID？

# c# - 如何上传文件而不发回asp.net？

> ID：15335868
> 
> 赞同：1
> 
> 时间：2013-03-11T10:10:10.610
> 
> 标签：c#, asp.net, visual-studio-2010, file-upload

我正在使用 fileupload 控件上传 jpg 图像。图片是在页面回传后上传的。

我的问题是我想在用户双击文件名或按下选择文件对话框上的打开按钮后立即上传图像。

我在互联网上搜索了很多，但我一直无法找到适合我的应用程序的示例。

我怎样才能做到这一点？

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:17:16.313

看看 AsyncFileUpload via Ajax

[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AsyncFileUpload/AsyncFileUpload.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AsyncFileUpload/AsyncFileUpload.aspx)

```
<ajaxToolkit:AsyncFileUpload OnClientUploadError="uploadError"
    OnClientUploadComplete="uploadComplete" runat="server"
    ID="AsyncFileUpload1" Width="400px" UploaderStyle="Modern"
    UploadingBackColor="#CCFFFF" ThrobberID="myThrobber"
/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T10:23:22.720

您可以使用 Ajax 和 Jquery。[jQuery 文件上传](http://blueimp.github.com/jQuery-File-Upload/)

html

```
<input id="fileupload" type="file" name="files[]" data-url="server/yourMethodToPost/"> 
```

jQuery

```
$(function () {
    $('#fileupload').fileupload({
        dataType: 'json',
        done: function (e, data) {
            $.each(data.result.files, function (index, file) {
                $('<p/>').text(file.name).appendTo(document.body);
            });
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T13:09:31.917

你可以尝试使用ajax`AsyncFileUpload`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T10:18:23.847

如果要将文件上传到服务器，则始终需要进行回发。但是，有不同的方法可以进行回发。您可以使用 Ajax 进行回发或部分回发。

看看[这个话题](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery)

# c - Glade 3 和 C，按钮和文本框的信号处理

> ID：15335869
> 
> 赞同：2
> 
> 时间：2013-03-11T10:10:11.787
> 
> 标签：c, gtk, glade

我是 Glade 的初学者，但有 C 编程经验。

我正在尝试构建一个接受两个值并显示总和的项目。

我使用了以下内容：

```
textbox1 - (entry1) ---- for first value,
textbox2 - (entry2) ---- for 2nd value,
textbox3 - (entry3) ---- to display result,
button - (button1) ---- to calculate sum,
signal - (on_button1_clicked) ---- to handle sum function. 
```

请帮我处理信号代码。

```
#include <gtk/gtk.h>
#include <stdio.h>

    GtkBuilder *builder;
    GtkWidget  *window;
    GError     *error = NULL;

void on_button1_clicked
{

// Need Help in this section

}

void on_window1_destroy (GtkObject *object, gpointer user_data)
{
gtk_main_quit();
}

int main( int argc, char **argv )
{

    /* Init GTK+ */
    gtk_init( &argc, &argv );

    /* Create new GtkBuilder object */
    builder = gtk_builder_new();
    /* Load UI from file. If error occurs, report it and quit application.
     * Replace "tut.glade" with your saved project. */
    if( ! gtk_builder_add_from_file( builder, "sum.glade", &error ) )
    {
        g_warning( "%s", error->message );
        g_free( error );
        return( 1 );
    }

    /* Get main window pointer from UI */
    window = GTK_WIDGET( gtk_builder_get_object( builder, "window1" ) );

    /* Connect signals */
    gtk_builder_connect_signals( builder, NULL );

    /* Destroy builder, since we don't need it anymore */
    g_object_unref( G_OBJECT( builder ) );

    /* Show window. All other widgets are automatically shown by GtkBuilder */
    gtk_widget_show( window );

    /* Start main loop */
    gtk_main();

    return( 0 );
} 
```

![示例代码图片](../Images/d082d0c5d23e92703c1261cecc8234c1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-15T20:35:08.627

```
#include <gtk/gtk.h>
#include<stdio.h>
#include<stdlib.h>
#include <string.h>

/*i have grouped all the widgets in one structure. this technique will 
help if you have huge number of  windows in your project. 
as the number of window will increase the variable we declare will increase
 and the declared variables can have same name of different windows */
struct login_window
{
   GtkEntry *e1;//textbox1
   GtkEntry *e2;//textbox2
   GtkEntry *e3;//textbox3
};
typedef struct login_window widgets;

G_MODULE_EXPORT void on_window1_destroy ()
{
    gtk_main_quit ();
}

G_MODULE_EXPORT void on_button1_clicked ( GtkButton *button,widgets *widg )
{
    char ch1[5],ch2[5],ch[5];
    int a;
//getting text from the text boxes
 const gchar *text1 = gtk_entry_get_text( widg->e2 );
 const gchar *text2 = gtk_entry_get_text( widg->e1 );

 //copying the text of textbox into an array
 strcpy(ch1,text1);
 strcpy(ch2,text2);

 //converting characters to integer and adding them
 a=(atoi(ch1))+(atoi(ch2));

itoa(a,ch,5);//converting integer to character
 gtk_entry_set_text (widg->e3,ch);//setting or displaying text(output) to the third text box
}

int main(int argc, char *argv[])
{
    GtkBuilder *gtkBuilder;
    widgets   widg;
    GtkWidget  *window;

    gtk_init(&argc, &argv);
    gtkBuilder = gtk_builder_new();

    gtk_builder_add_from_file(gtkBuilder, "window.glade", NULL);

    window = GTK_WIDGET( gtk_builder_get_object( gtkBuilder, "window1") );

//connecting each structure member to it appropriate gtkwidget
    widg.e1 = GTK_ENTRY( gtk_builder_get_object( gtkBuilder, "entry1" ) ); 
    widg.e2 = GTK_ENTRY( gtk_builder_get_object( gtkBuilder, "entry2" ) );
    widg.e3 = GTK_ENTRY( gtk_builder_get_object( gtkBuilder, "entry3" ) );

/*connecting signals so that appropriate handlers can be called when button is clicked*/
    gtk_builder_connect_signals( gtkBuilder, &widg );

    g_object_unref(G_OBJECT(gtkBuilder));
    gtk_widget_show(window);//showing the window
    gtk_main();

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:25:30.767

我不会告诉你具体怎么做，而是从逻辑上思考你的问题：你需要

1.  `entry1`从和中取出文本`entry2`
2.  将字符串转换为整数。
3.  将它们加在一起
4.  将答案转换为字符串
5.  设置文本`entry3`

我相信您可以在文档中找到一些有用的函数来执行 Gtk+ 部分：[GtkEntry 文档](https://developer.gnome.org/gtk3/3.4/GtkEntry.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-12T18:01:27.897

我尝试了这些东西，在一些帮助下可以使它工作。这是您需要参考的内容[点击](https://stackoverflow.com/questions/16263216/glade3-and-c-programming?rq=1)

# java - 无法在 Android 中的 data/data/ 中找到数据库

> ID：15335870
> 
> 赞同：0
> 
> 时间：2013-03-11T10:10:14.527
> 
> 标签：java, android

我正在使用 Android 开发工具包，Eclipse。我创建了一个创建数据库的应用程序。存在以下问题：

*   应用程序关闭显示错误。
*   应用程序不创建任何数据库。
*   如果有任何数据库，我无法使用 DDMS在**数据/数据中看到它。**

我该怎么办。？

**如何查看存储在 data/data 中的文件**

**为什么我的数据库没有被创建。有什么不对？**

我使用[Vogella](http://www.vogella.com/articles/AndroidSQLite/article.html)的教程制作了相同的应用程序。但努力工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:12:17.660

您应该在模拟器上运行以通过`DDMS`. `DDMS`由于安全原因，真实设备不会显示数据或文件。

如果您根设备，您将能够看到您的数据库和文件 vai `DDMS`。

至于你的错误，请分享一些代码并告诉社区哪里出错了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:21:28.573

如果您使用的是真实设备并且它没有植根，那么您将无法看到 /data/data 文件夹的内容，因为这就是 android 旨在保护敏感应用程序数据的方式。

如果您使用的是模拟器或有根设备，那么您将能够访问此文件夹。

所以也许你的数据库正在被创建，你只是无法访问这个文件夹来查看它。

# c# - 在 c# 的“System.Net.NetworkCredential”中使用未重载的 webclient 输入网页身份验证

> ID：15335872
> 
> 赞同：1
> 
> 时间：2013-03-11T10:10:18.990
> 
> 标签：c#, authentication, web-scraping, webclient

我正在尝试连接和下载需要非“超载”身份验证的网站内容。

选项包括：

*   用户
*   用户+密码，
*   用户+密码+域名

我需要用户+订户+密码。我怎样才能通过这个凭据？

代码：

```
WebClient client = new WebClient();  
public void search()  
{  
        client.Credentials = new System.Net.NetworkCredential(username, subscriber, password); //not really exist  
        Byte[] pageData = client.DownloadData("https://example.com/");
...  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:41:45.790

我是如何解决这个问题的：使用改进的 WebClient 类的 POST 方法，它类似于 webclient，但可以保存 cookie。你可以在[这里](http://www.codingvision.net/tips-and-tricks/c-webclient-with-cookies/)找到它。
代码：

```
ImprovedWebClient wc = new ImprovedWebClient();
wc.DownloadData("https://theWebSite.com"); //to enter home page and get cookie
string URI = "https://theWebSite.com/authenticate"; //the login page
string myParameters = "user=theUserName&subscriber_number=1234-5678&password=myPassword&commit=LogIn"; //the parameters for the website
wc.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
wc.UploadString(URI, myParameters); 
```

谢谢你们的帮助。

# java - 如何在 Radio 上映射字符串

> ID：15335873
> 
> 赞同：0
> 
> 时间：2013-03-11T10:10:26.313
> 
> 标签：java, string, gwt, radio-button, gxt

我遇到了下一个问题：

我想在 gxt 网格中创建 CRUD 操作，但我遇到了这样的情况：我在表单上将`sex`字段设置为 a`RadioGroup`并编写了一个用于`create`操作的转换器（下面的代码），所以它可以正常工作（下面的实体和转换器代码):

```
private Long id;
private String name;
private String sex;

formBinding.getBinding(radioGroup).setConverter(new Converter() {
        @Override
        public Object convertFieldValue(Object value) {
            return ((Radio) value).getData("value");
        }
}); 
```

这是将 radiogroup 添加到我的表单的代码：

```
Radio radio = new Radio();
radio.setBoxLabel("M");
radio.setData("value", "M");
Radio radio2 = new Radio();
radio2.setBoxLabel("F");
radio.setData("value", "F");

radioGroup = new RadioGroup();
radioGroup.setSelectionRequired(true);
radioGroup.setFieldLabel("Sex");
radioGroup.add(radio);
radioGroup.add(radio2);
radioGroup.setName("sex");
simplePanel.add(radioGroup, formData); 
```

我需要将值从 String 转换为 radio 并将其设置为`radiogroup`. 但是当我尝试编写相反的操作，即编辑时，它抛出了这样一个异常：

```
11:52:23.381 [ERROR] [hellogxt] Uncaught exception escaped
java.lang.ClassCastException: java.lang.String cannot be cast to com.extjs.gxt.ui.client.widget.form.Radio
    at com.extjs.gxt.ui.client.widget.form.RadioGroup.setValue(RadioGroup.java:1)
    at com.extjs.gxt.ui.client.binding.FieldBinding.updateField(FieldBinding.java:207)
    at com.extjs.gxt.ui.client.binding.FieldBinding.bind(FieldBinding.java:82)
    at com.extjs.gxt.ui.client.binding.Bindings$1.execute(Bindings.java:92)
    at com.google.gwt.user.client.CommandExecutor.doExecuteCommands(CommandExecutor.java:310)
    at com.google.gwt.user.client.CommandExecutor$2.run(CommandExecutor.java:205)
    at com.google.gwt.user.client.Timer.fire(Timer.java:149)
    at sun.reflect.GeneratedMethodAccessor35.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
    at sun.reflect.GeneratedMethodAccessor28.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Thread.java:722) 
```

我试图向我的转换器添加一些功能，但似乎活页夹没有调用我的代码（formbinder 在编辑操作中根本没有进入该方法）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:10:27.340

在一个代码块中，您有：

```
radio.setData("value", "M"); 
```

然后，稍后，您有：

```
 return ((Radio) value).getData("value"); 
```

由于您使用 key 将字符串（即`"M"`）放入数据中`"value"`，因此当您再次将其读回时，您将获得相同的字符串。一旦你将它转换为 a `Radio`，你就会得到这个异常：

> java.lang.ClassCastException：java.lang.String 无法转换为 com.extjs.gxt.ui.client.widget.form.Radio

我不确定强制转换为 a 是否有意义`Radio`，因为您已经*有*一个`Radio`对象 -`value`如果这是您需要的，为什么不直接返回？但是，如果是这种情况，则根本不需要 a `Converter`。相反，您可能想要那个字符串，所以不应该转换为`Radio`.

# javascript - Highchart graph not plotting - CSV

> ID：15335875
> 
> 赞同：0
> 
> 时间：2013-03-11T10:10:27.943
> 
> 标签：javascript, jquery, arrays, csv, highcharts

Currently having trouble getting data to display on a highchart.

I'm importing data from a CSV file, and plotting this data. The CSV file takes the format:

```
"Row1","Row2","Row3"
"1362567600","67882833572","63034526585"
"1362571200","67834631584","63250345463"
"1362574800","67886235392","63654664341"
"1362578400","67883347248","63683239219"
"1362582000","67884373456","63905665096" 
```

There are 44 elements for each row within the CSV file.

I'm currently importing it in the following way:

```
$(document).ready(function() { 
    var c = [];
    var d = [];
    var e = [];

    $.get('test.csv', function(data) {
        var lines = data.split('\n');
        $.each(lines, function(lineNo, line) {
            var items = line.split(',');
            c.push(items[0]);
            d.push(items[1]);
            e.push(items[2]);
        });
        createGraph('container', 'line', 'Graph 1', c[0],d[0],c);
    });

}); 
```

The function createGraph takes the paramaters - divId(Specifying what div to display the graph in; graphType, graphTitle, line1, line2, and graphCategories.

I create an array - seriesData[] and use the following for loop to add data to it:

```
seriesData[0] = "[";
for (var i = 1; i < graphCategories.length - 1; i++){
    seriesData[i] = "["+(graphCategories[i].replace(/["']{1}/gi,"")*1000)+","+876+"],";
}
seriesData.push("],"); 
```

When logging this array on the console it looks like this:

```
[,[1362567600000,876],,[1362571200000,876],,[1362574800000,876],,[1362578400000,876],,], 
```

Then when plotting the graph I use:

```
series: [{
            name: line1,        
            data: seriesData
        }] 
```

(There is another line, but for simplicity I'm just showing the one).

My question is, why is nothing displaying on the graph? I get the following output:

[Highchart Example](http://img600.imageshack.us/img600/9237/hcimg.png)

Thanks for your help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:32:25.300

This line looks wrong.

```
seriesData[0] = "[";
seriesData.push("],"); 
```

I don't think you need to be adding the [ or ] to your array.

I would do it more like this:

```
for (var i = 1; i < graphCategories.length - 1; i++){
    // Push the x value.
    seriesData[i].push(graphCategories[i].replace(/["']{1}/gi,"")*1000);
    // Push the y value.
    seriesData[i].push(876);
} 
```

# jquery - Jquery ajax 无效赋值左侧 [Break On This Error] 数据：'StudentClass'=StudentClass,

> ID：15335876
> 
> 赞同：1
> 
> 时间：2013-03-11T10:10:28.887
> 
> 标签：jquery

```
$("#class").change(function(){
        var StudentClass = $(this).val();
        //alert(StudentClass);
        $.ajax({
          url: "getStudentClass.php",
          type: "post",
          data: 'StudentClass'=StudentClass,
          success: function(data){
              alert(data);
          },
          error:function(){
              alert("failure");
              $("#result").html('there is error while submit');
          }   
       }); 

    }); 
```

apove 代码给我这个错误无效分配左侧

```
[Break On This Error]   

data: 'StudentClass'=StudentClass,

midterm_test.php (line 28, col 24) 
```

任何有想法的人，这正在发生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:11:30.883

您正在为字符串分配一个值，这实际上并不有效。您可能想要传递一个对象：

```
data: {
    'StudentClass': StudentClass
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-13T19:58:04.160

哦，哇，我不敢相信我犯了同样的错字并找到了这个。您可以将字符串分配给数据，我一直都有。

```
data: 'StudentClass'=StudentClass, 
```

应该

```
data: 'StudentClass='+StudentClass, 
```

# mysql - 如何在 MySQL 中使用 ALTER 将 VARCHAR 类型更改为 DATETIME？

> ID：15335880
> 
> 赞同：21
> 
> 时间：2013-03-11T10:10:39.777
> 
> 标签：mysql, datetime, sql-update, varchar, alter-table

如何将`VARCHAR()`类型更改为在 MySQL中`DATETIME`使用？`ALTER`

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-11T10:13:39.733

```
ALTER TABLE <tblName> MODIFY <columnName> dataType constraint; 
```

根据您的要求，它将是

```
ALTER TABLE <tblName> MODIFY <columnName> datetime; 
```

参考[http://dev.mysql.com/doc/refman/5.1/en/alter-table.html](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T10:15:03.790

试试这个查询。

```
ALTER TABLE  `table_name` CHANGE  `From Date`  `From Date` DATETIME NULL DEFAULT '0000-00-00 00:00:00'; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-04T07:09:37.510

你为什么不直接使用

**`STR_TO_DATE(str,format)`**,

如果格式字符串同时包含日期和时间部分， 它需要一个字符串 str 和一个格式字符串 format 并返回一个**DATETIME值。**

参考这个[链接](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)，希望它可以帮助你

# uitableview - 防止 UITableView.tableHeader 进入 navigationItem

> ID：15335884
> 
> 赞同：0
> 
> 时间：2013-03-11T10:10:43.687
> 
> 标签：uitableview, ios6

我有一个 UISearchBar 设置为 tableView.tableHeader 的 UITableView。我设置 tableView.bounces = NO。

我的问题是，如果用户向上滚动表格，tableHeader（搜索栏）将隐藏在 self.navigationItem 下。

我怎样才能防止这种情况？我希望 tableHeader 始终在屏幕上。

我正在为 iOS6 编写代码。

谢谢

尼古拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:34:03.063

使用单独`uiview`来防止此问题，将您的搜索栏设置在新的顶部`uiview` 并将您`tableview`的放在搜索栏下方，因此当您需要显示`tableview`调用时，`uiview`它也会在搜索栏本身下方滚动。

谢谢。

# c# - 如何使用带有 SQL Server 和 Visual Studio 2008 C# 的 API v3 在 Google 地图上绘制多边形？

> ID：15335886
> 
> 赞同：-1
> 
> 时间：2013-03-11T10:10:44.953
> 
> 标签：c#, sql-server, google-maps-api-3

我已经使用 Shape2SQL 将我的 shapefile 上传到 SQL Server，现在我有了这个表，其中有一列名为“geom”，数据格式如下：

`POLYGON(Longitude,Latitude)`

现在我不知道从哪里开始。我想使用“geom”中的数据使用 C# 和 Google Maps API v3 在 Google Maps 上绘制多边形。我对此进行了谷歌搜索，但仍然无法清楚地了解如何做到这一点。

你们能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:04:20.433

你应该使用Javascript。

这应该不难通过几个例子来学习，因为谷歌对此有很好的记录。[这](https://developers.google.com/maps/documentation/javascript/reference#Polygon)是关于覆盖多边形的部分。

完整的参考指南在[这里](https://developers.google.com/maps/documentation/javascript/reference)。

有一些第三方 API 包装器，例如[用于 .NET 的 Google Maps API](http://gmaps.codeplex.com/)，但这些不太可能功能齐全。即使您已经了解一些 C#，使用 Javascript 将是完成您所追求的目标的最简单方法。

# tridion - GetListPublishItems 的 tridion 核心服务中的相应方法

> ID：15335887
> 
> 赞同：2
> 
> 时间：2013-03-11T10:10:53.167
> 
> 标签：tridion

tridion 核心服务中是否有任何方法可以为我提供在特定目标上发布的组件列表。使用搜索过滤器数据，我可以获得已发布的组件，它不会为我提供特定目标的结果。

问候， 拉金德拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:30:32.663

您需要使用`PublishTransactionsFilterData`然后使用`GetSystemWideListXml`or`GetSystemWideList`方法：

```
var filter = new PublishTransactionsFilterData();
filter.PublicationTarget = new LinkToPublicationTargetData{ IdRef = "tcm:x-xx-xxx"};
client.GetSystemWideListXml(filter);
client.GetSystemWideList(filter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:47:57.263

你想做的事情叫做解决。您可以使用 ICoreService2011.ResolveItems （或类似的东西，具体取决于您使用的核心服务/客户端）。

# java - 如何定义两个水平按钮之间的空间？

> ID：15335888
> 
> 赞同：0
> 
> 时间：2013-03-11T10:10:58.913
> 
> 标签：java, css, gwt

我有两个按钮，不希望它们与它们之间的空格对齐。但以下不起作用：

```
<gwt:FlowPanel styleName="{style.pad}">
    <gwt:Button text="foo" />
    <gwt:Button text="bar" />
</gwt:FlowPanel>

<ui:style>
    .pad .gwt-Button {
            margin-right: 20px !important;
    }
</ui:style> 
```

结果：按钮并排对齐，它们之间没有空格。为什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:28:00.677

明白了：我必须`@external gwt-Button;`在 ui:style 声明中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:16:41.130

尝试这个

```
.gwt-Button {

padding : 10px !important

} 
```

# socialengine - 从“热门成员”小部件创建小部件并希望从自定义字段附加数据

> ID：15335890
> 
> 赞同：0
> 
> 时间：2013-03-11T10:11:02.980
> 
> 标签：socialengine

我正在创建一个小部件来显示最活跃的查看者，但还想通过别名获取自定义字段。我的 .tpl 中有以下内容：

```
<ul>
<?php foreach( $this->paginator as $mam_user ): ?>
    <div>
     <?php echo $this->htmlLink($mam_user->getHref(), $this->itemPhoto($mam_user, 'thumb.icon'), array('class' => 'popularmembers_thumb')) ?>
         <h3>
           <?php echo $this->htmlLink($mam_user->getHref(), $mam_user->getTitle()) ?>
         </h3>
         <?php
            // Fetches Fields from database by Alias
            $tagline = Engine_Api::_()->fields()->getFieldsValuesByAlias();
            echo $this->$mam_user->$tagline['tagline'];
         ?>
    </div>
<?php endforeach; ?> 
```

我的控制器文件与未触及的“热门成员”的文件相同..但有些东西似乎在这里不起作用。我想我在这里做错了什么。任何帮助请..; 并提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:48:14.920

您的语法不正确，请尝试以下操作：

```
 $aliasValues = Engine_Api::_()->fields()->getFieldsValuesByAlias($mam_user);
 echo $aliasValues['profile_type']; // just for example 
```

# javascript - 如何通过类名填充输入元素

> ID：15335895
> 
> 赞同：0
> 
> 时间：2013-03-11T10:11:10.517
> 
> 标签：javascript, input, getelementsbyclassname

我在尝试填充一些输入元素时遇到了一些麻烦。

我为此使用javascript。

我使用该方法`getElementsByClassName('name_of_class')`收集元素的节点。

然后我尝试使用循环运行此节点，但是当我尝试使用提示询问的相同值填充所有元素输入时，我没有成功。

事实上，当我尝试使用 时，我认为我错了`document.getElementByClassName('name_class').value`，因为它不是一个独特的元素，但我真的不知道，当我循环如何填充这些输入时，因为它们是动态创建的并且它们有没有身份证。

这是我的代码

```
function saisie_titre(){
    choix = prompt("Veuillez saisir le titre :", '');
    var i;
    var checkboxList = document.getElementsByClassName( 'titre' );
    for ( i = 0; i < checkboxList.length; i++ ) {
        document.getElementsByClassName('titre').value = choix;
        //Here is the wrong part of my code

        console.log(choix);
    }
 } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:19:28.253

获得对 checkboxList 的引用后，只需将其作为数组访问。

```
var checkboxList = document.getElementsByClassName( 'titre' );
for ( i = 0; i < checkboxList.length; i++ ) {
    checkboxList[i].value = choix; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:19:28.970

JsFiddle 的工作示例：http: **[//jsfiddle.net/2UZXm/1/](http://jsfiddle.net/2UZXm/1/)**

**-- 示例 HTML**

```
<input type="text" class="titre"></input>
<input type="text" class="titre"></input>
<input type="text" class="titre"></input>
<input type="text" class="titre"></input>
<input type="button" id="terror" value="Click" /> 
```

**-- 示例 JavaScript**

```
function saisie_titre() {
    choix = prompt("Veuillez saisir le titre :", '');
    var i;
    var checkboxList = document.getElementsByClassName('titre');
    for (i = 0; i < checkboxList.length; i++) {
        checkboxList[i].value = choix;
        console.log(choix);
    }
}
document.getElementById('terror').onclick = function () {
    saisie_titre();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T10:19:42.367

您需要将索引传递给数组。您已经将数组存储在变量中，因此无需再次获取元素。

```
for ( i = 0; i < checkboxList.length; i++ ) {
    checkboxList[i].value = choix;
    console.log(choix);
} 
```

# excel - 将数据从 mnesia 导出到 excel

> ID：15335898
> 
> 赞同：-1
> 
> 时间：2013-03-11T10:11:18.917
> 
> 标签：excel, erlang, mnesia

我有表用户

```
 -record(person, {id, firstname, lastname}). 
```

此表包含以下值：

```
 1  francoi     mocci     
    2  test        tes 
```

我的目标是如何将这些数据从 mnesia 导出到 excel

我知道相反的方式意味着将数据从 excel 传输到 mnesia

这种情况下的解决方案是在 csv.file 中转换 excel，然后使用这种代码来解析 csv 文件：

```
%%% --- csv parser in Erlang. ------
%%% To help process large csv files without loading them into
%%% memory. Similar to the xml parsing technique of SAX

-module(csv).
-compile(export_all).

parse(FilePath,ForEachLine,Opaque)->
    case file:open(FilePath,[read]) of
        {_,S} ->
            start_parsing(S,ForEachLine,Opaque);
        Error -> Error
    end.

start_parsing(S,ForEachLine,Opaque)->
    Line = io:get_line(S,''),
    case Line of
        eof -> {ok,Opaque};
        "\n" -> start_parsing(S,ForEachLine,Opaque);
        "\r\n" -> start_parsing(S,ForEachLine,Opaque);
        _ -> 
            NewOpaque = ForEachLine(scanner(clean(clean(Line,10),13)),Opaque),
            start_parsing(S,ForEachLine,NewOpaque)
    end.

scan(InitString,Char,[Head|Buffer]) when Head == Char -> 
    {lists:reverse(InitString),Buffer};
scan(InitString,Char,[Head|Buffer]) when Head =/= Char ->
    scan([Head|InitString],Char,Buffer);
scan(X,_,Buffer) when Buffer == [] -> {done,lists:reverse(X)}.
scanner(Text)-> lists:reverse(traverse_text(Text,[])).

%%traverse_text(Text,Buff)->
  %%  case scan("",$,,Text) of
    %%    {done,SomeText}-> [SomeText|Buff];
 %%       {Value,Rem}-> traverse_text(Rem,[Value|Buff])
   %% end.

traverse_text(Text,Buff)->
    case scan("",$;,Text) of
        {done,SomeText}-> [SomeText|Buff];
        {Value,Rem}-> traverse_text(Rem,[Value|Buff])
    end.

clean(Text,Char)-> 
    string:strip(string:strip(Text,right,Char),left,Char). 
```

这是将数据从 csv 文件插入到 mnesia 的函数示例：

```
test()->

    ForEachLine = fun(Line,Buffer)->
   [Id, Firstname, Lastname] = Line,

                                    %% here insert each line to the table mnesia

                                     Buffer end,

 InitialBuffer = [],

 csv:parse("/home/test/Desktop/testt.csv",ForEachLine,InitialBuffer). 
```

这个例子没有问题

我尝试使用此代码：

```
test()->
    F = fun(T) -> mensia:foldl(fun(X,Acc) -> [X|Acc] end, [],T),
{atomic,L} = mnesia:transaction(F),
file:write_file("filename.txt",[io_lib:format("~p\t~p\t~p~n",[F1,F2,F3]) || 
                 #person{id = F1,firstname = F2,lastname = F3} <- L]). 
```

但我有这个错误：

```
syntax error before : '.' 
```

此错误与此行有关：

```
#person{id = F1,firstname = F2,lastname = F3} <- L]). 
```

**我尝试使用以下方法更正我的代码：**

```
test()->
    F = fun(T) -> mensia:foldl(fun(X,Acc) -> [X|Acc] end, [],T),
{atomic,L} = mnesia:transaction(F),
file:write_file("filename.txt",[io_lib:format("~p\t~p\t~p~n",[F1,F2,F3]) || 
                 #person{id = F1,firstname = F2,lastname = F3} <- L])end. 
```

但我现在有这个错误：

```
variable 'F' is unbound 
```

此错误与此行有关：

```
{atomic,L} = mnesia:transaction(F), 
```

**我解决了这个问题：**

```
test()->
      F = fun(T) -> mensia:foldl(fun(X,Acc) -> [X|Acc] end, [],T)end,
{atomic,L} = mnesia:transaction(F),
file:write_file("filename.txt",[io_lib:format("~p\t~p\t~p~n",[F1,F2,F3]) || 
                 #person{id = F1,firstname = F2,lastname = F3} <- L]). 
```

**但是当我运行我的函数时，我有这个错误：**

```
** exception error: no match of right hand side value {aborted,{{badarity,{#Fun<model.20.69991685>,[]}},
                                                                [{mnesia_tm,apply_fun,3},
                                                                 {mnesia_tm,execute_transaction,5},
                                                                 {model,test,0},
                                                                 {erl_eval,do_apply,5},
                                                                 {shell,exprs,6},
                                                                 {shell,eval_exprs,6},
                                                                 {shell,eval_loop,3}]}}
     in function  model:test/0 
```

我尝试使用此代码：

```
test()->
      F = fun() -> mensia:foldl(fun(X,Acc) -> [X|Acc] end, [],person)end,
{atomic,L} = mnesia:transaction(F),
file:write_file("filename.txt",[io_lib:format("~p\t~p\t~p~n",[F1,F2,F3]) || 
                 #person{id = F1,firstname = F2,lastname = F3} <- L]). 
```

但我也有这个错误：

```
** exception error: no match of right hand side value {aborted,{undef,[{mensia,foldl,
                                                                               [#Fun<model.21.662230>,[],person]},
                                                                       {mnesia_tm,apply_fun,3},
                                                                       {mnesia_tm,execute_transaction,5},
                                                                       {model,test,0},
                                                                       {erl_eval,do_apply,5},
                                                                       {shell,exprs,6},
                                                                       {shell,eval_exprs,6},
                                                                       {shell,eval_loop,3}]}}
     in function  model:test/0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:56:46.113

您忘记`end`了第一行：

```
F = fun(T) -> mensia:foldl(fun(X,Acc) -> [X|Acc] end, [],T) end, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:47:56.403

您可以使用 foldl 函数创建一个列表，然后将此列表写入文件，使用任何字符作为分隔符（空格、逗号、制表符...取决于记录的内容），最后使用 Excel 读取文本文件，您将有一个弹出菜单，可帮助您控制 excel 解释数据的方式。我认为最好使用中间列表，因为直接写入文件对于数据库事务可能很长。

**编辑：**对不起，我没有测试这条线......它现在应该可以工作了。

```
...
F = fun(T) -> mnesia:foldl(fun(X,Acc) -> [X|Acc] end, [],T) end,
{atomic,L} = mnesia:transaction(F(mnesia_table)),
file:write_file("filename.txt",[io_lib:format("~p\t~p~n",[F1,F2]) || 
                 #table_record{field1 = F1,field2 = F2} <- L]),
... 
```

![在此处输入图像描述](../Images/1585c9eb26759b9eb33f467aeb5eaa47.png) ![在此处输入图像描述](../Images/9a2bb4068aea9899955d692d01851c81.png) ![在此处输入图像描述](../Images/9d28f9ab5f9139ed2013d44429704be0.png) ![在此处输入图像描述](../Images/92cc3bd0931f0e723dc1779213398de2.png)

# python - 稍后格式化字符串？

> ID：15335900
> 
> 赞同：2
> 
> 时间：2013-03-11T10:11:21.583
> 
> 标签：python, string-formatting

如果我有一个字符串列表，其中一些包含包含在 中的代码`{}`，以后是否可以`format()`在这些字符串上使用？

在这种情况下，我想为身体伤害写一些风味文本，例如，`"He appears to be limping on his {1} leg."`但我想根据所讨论的腿用“左”或“右”来格式化该字符串。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-11T10:12:38.050

当然有可能。只需存储字符串并`.format()`稍后调用它们：

```
>>> someformat = 'Hello {}!'
>>> someformat
'Hello {}!'
>>> print someformat.format('World')
Hello World! 
```

`.format()`只是字符串上的一个方法，只有当您调用该方法时，该字符串才会被解释为模板。就像`.strip()`and一样`.join()`，您可以在选择的时间在任何字符串对象上调用该方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:21:20.167

您可以随时拨打电话`.format()`。

您可以在文件的最顶部定义格式字符串，甚至可以多次使用它来处理几个不同的数据。

当您真正调用它时，这完全取决于您（分别是您的需求），只要您在某处引用它即可。

即，不要做

```
TEMPLATE = "He appears to be limping on his {0} leg."
[...]
TEMPLATE = TEMPLATE.format('left') 
```

因为您将丢失原始模板。

相反，做

```
TEMPLATE = "He appears to be limping on his {0} leg."
[...]
leftsentence = TEMPLATE.format('left')
[...]
rightsentence = TEMPLATE.format('right')
[...]
middlesentence = TEMPLATE.format('middle') 
```

随时随地。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T10:15:21.900

您将不得不使用`{0}`匹配传递给的第一个参数`format`。

例子：

```
>>> s = "He appears to be limping on his {0} leg"
>>> s.format("bad")
'He appears to be limping on his bad leg' 
```

# winapi - 是否有用于编写媒体容器的 MS API？

> ID：15335902
> 
> 赞同：1
> 
> 时间：2013-03-11T10:11:22.427
> 
> 标签：winapi, video, directshow, mp4, ms-media-foundation

Microsoft 是否有用于编写媒体容器（mp4、avi ...）的良好 API？我有一个 H.264 视频流以及一些我希望能够写入文件的时间戳。我找到了媒体 API 的概述（[http://msdn.microsoft.com/en-us/library/windows/desktop/ee663260%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ee663260%28v=vs.85%29.aspx)），但很难提取出我需要的内容...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:17:48.857

1.  [AVIFile API](http://msdn.microsoft.com/en-us/library/windows/desktop/dd756805%28v=vs.85%29.aspx)存在于所有版本的 Windows 中，但只能创建 AVI 文件。它们可以包含任何数据格式
2.  [DirectShow - 通过第三方组件（值得一提：](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375454%28v=vs.85%29.aspx) [http](http://gdcl.co.uk/mpeg4) ://gdcl.co.uk/mpeg4）写入 AVI，写入 MP4（以及 MKV、MOV 等），由于 API 的旧状态，不支持 Windows RT
3.  [Media Foundation](http://msdn.microsoft.com/en-us/library/windows/desktop/ms694197%28v=vs.85%29.aspx) - DirectShow 的“继任者”，在 Windows 7 之前的 Windows 版本中可用性有限

都有 .NET 的开源包装器

媒体基金会[MPEG-4 文件接收器](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757763%28v=vs.85%29.aspx)特别是：

> MPEG-4 文件接收器创建 MP4 文件。有关 MP4 文件格式的更多信息，请参阅以下标准文档：

# java - ColdFusion Java使用AES算法对相同字符串进行不同的编码输出

> ID：15335905
> 
> 赞同：5
> 
> 时间：2013-03-11T10:11:33.683
> 
> 标签：java, coldfusion, encryption

我有一个用于解密字符串的 ColdFusion 方法：`PFN123`. 它使用 AES 算法，HEX 编码，长度为 128 位。输出是：

```
 32952063062A232355AABB63E129EA9F 
```

我已经为 AES 加密和解密编写了等效的 java 代码。但是它会产生不同的结果：

```
 07e342ad4b59b276cbb6418248aaf886. 
```

我不明白为什么相同算法和编码方案的结果不同。谁能解释为什么？提前致谢。

**Java 代码：**

```
import java.security.Key;

import javax.crypto.Cipher;
import javax.crypto.spec.SecretKeySpec;

import org.apache.commons.codec.binary.Hex;

 public class AESEncryptionDecryptionTest {

   private static final String ALGORITHM       = "AES";
   private static final String myEncryptionKey = "OIXQUULC7khaJzzOOHRqgw==";
   private static final String UNICODE_FORMAT  = "UTF8";

   public static String encrypt(String valueToEnc) throws Exception {
        Key key = generateKey();
        Cipher c = Cipher.getInstance(ALGORITHM);
        c.init(Cipher.ENCRYPT_MODE, key);  
        byte[] encValue = c.doFinal(valueToEnc.getBytes(UNICODE_FORMAT));
        String encryptedValue = new Hex().encodeHexString(encValue);
        return encryptedValue;
   }

   public static String decrypt(String encryptedValue) throws Exception {
        Key key = generateKey();
        Cipher c = Cipher.getInstance(ALGORITHM);
        c.init(Cipher.DECRYPT_MODE, key);
        byte[] decordedValue = new Hex().decode(encryptedValue.getBytes());
        byte[] decValue = c.doFinal(decordedValue);//////////LINE 50
        String decryptedValue = new String(decValue);
        return decryptedValue;
   }

   private static Key generateKey() throws Exception {
        byte[] keyAsBytes;
        keyAsBytes = myEncryptionKey.getBytes();
        Key key = new SecretKeySpec(keyAsBytes, ALGORITHM);
        return key;
   }

   public static void main(String[] args) throws Exception {

        String value = "PFN123";
        String valueEnc = AESEncryptionDecryptionTest.encrypt(value);
        String valueDec = AESEncryptionDecryptionTest.decrypt(valueEnc);

        System.out.println("Plain Text : " + value);
        System.out.println("Encrypted : " + valueEnc);
        System.out.println("Decrypted : " + valueDec);
   }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:52:03.590

感谢您的支持。我找到了我的答案。ColdFusion 将密钥存储在其 Base64 解码字节中。所以在java中我们必须通过BASE64Decoder解码来生成密钥：

```
private static Key generateKey() throws Exception 
{
    byte[] keyValue;
    keyValue = new BASE64Decoder().decodeBuffer(passKey);
    Key key = new SecretKeySpec(keyValue, ALGORITHM);

    return key;
} 
```

# wcf - VS2012中的单元测试

> ID：15335907
> 
> 赞同：1
> 
> 时间：2013-03-11T10:11:39.050
> 
> 标签：wcf, unit-testing, app-globalresources

我有一个 WCF 项目和单元测试项目。资源文件位于 WCF 服务项目`App_GlobalResources`文件夹内，其中存储了自定义消息。但是我执行了单元测试方法，我得到了以下错误 `System.IO.FileNotFoundException: Could not load file or assembly 'App_GlobalResources' or one of its dependencies. The system cannot find the file.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:16:52.430

如果你想创建依赖于外部资源的单元测试，比如你的资源文件，你需要确保单元测试项目也有那个文件。

# asp.net - Jquery Datepicker 在 Ajax 选项卡容器中不起作用

> ID：15335912
> 
> 赞同：0
> 
> 时间：2013-03-11T10:11:57.357
> 
> 标签：asp.net, ajax, jquery

我在 asp.net 页面中有一个 ajax tabcontainer。当单击 Ajax tabcontainer 中的文本框时，我正在使用 jquery 弹出日历。

当文本框在 ajax tabcontainer 之外时，它工作正常。但是，当我将此文本框放入 ajax 选项卡容器中时，用于 datepicket 的 Jquery 无法弹出日历。我该如何解决这个问题？

这是我用来将日期选择器绑定到我的文本框的代码。

```
 $(function () {
            var d = new Date();
            var curr_year = d.getFullYear();
            $('#txtDob').live('load', function () {
                $("#txtDob").datepicker(
       { yearRange: '1900:' + curr_year, changeMonth: true, changeYear: true, maxDate: '0' });

            });
            $('#txtDOD').live('load', function () {
                $("#txtDOD").datepicker(
       { yearRange: '1900:' + curr_year, changeMonth: true, changeYear: true, maxDate: '0' });
            });
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:23:24.997

检查您的 html 并检查 ClientID。

一个好的做法是始终在 javascript 中使用客户端 ID。

像这样：

```
 $('#<%= txtDob.ClientID %>') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-07T08:33:45.950

当您使用动态控件时，您可以做的一件事是将 txtDob 控件的 ClientID 模式设置为 AutoID

```
 <asp:TextBox ID="txtDob" runat="server" CssClass="hasDatePicker" ClientIDMode="AutoID"/> 
```

ClientID 值是通过将每个父命名容器的 ID 值与控件的 ID 值连接起来生成的。在呈现控件的多个实例的数据绑定方案中，将在控件的 ID 值前面插入一个递增值。每个段由下划线字符 (_) 分隔

# java - 我应该在使用源代码控制时推送我的依赖项（jar 库）吗

> ID：15335915
> 
> 赞同：0
> 
> 时间：2013-03-11T10:11:58.503
> 
> 标签：java, git, google-app-engine, github

通常当我不使用 maven 时，我的项目有大量的库文件例如，一个普通的 GAE 将有至少 40MB 的 jar 文件

我应该避免将此文件推送到存储库吗？（以及如何避免它）如果不是，我该如何管理这种情况（有些东西，我的网络真的很慢）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:20:54.937

GAE jars 本身非常大，所以如果你将 jars 推送到 git 并更新它们几次，你的 repo 就会变得非常大。我们仍然使用 Maven 之类的东西来处理依赖关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:14:54.180

将所有 jar 依赖项推送到 repo，以便您的项目是自包含的。

40 MB 的空间并不大，您只需推送这些 jar 一次 - 它们不会经常更新。

# jquery - 如何管理 Angular 范围之间的数据？

> ID：15335916
> 
> 赞同：2
> 
> 时间：2013-03-11T10:12:03.200
> 
> 标签：jquery, ajax, angularjs, angularjs-scope

我有这样的标记：

```
<ul>
    <li data-ng-controller="TileController">
        <h1>Title</h1>
        <span>
            <a href="#" data-ng-click="loadBeanForEdit()">
        </span>
        ....
        <div id="beanEditModal" data-ng-controller="TileBeanController">
            <!-- Bootstrap modal -->
        </div>
    </li>
    <li>
        ...
    </li>
    ...
</ul> 
```

工作流程是：用户点击`a`，我想用 ajax 加载一些数据以在弹出窗口中编辑它：

```
function TileController($scope) {
    $scope.loadBeanForEdit= function(e) {
        e.stopPropagation();
        $("#beanEditModal").modal();
    };
} 
```

问题是我不想将数据保留在父作用域（`TileController`）中，我想将其加载到`TileBeanController`作用域中。但是我怎么能从父控制器做呢？或者，也许有更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T10:36:04.113

通常，您需要创建一个服务，以便您的两个控制器可以通信。我要做的是像这样扩展 loadBeanForEdit 函数

```
function TileController($scope, News) {
    $scope.loadBeanForEdit= function(e) {
        e.stopPropagation();
        News.setModal(some-id-or-whatever);
        $("#beanEditModal").modal();
    };
} 
```

所以这个函数调用一个服务，通知所有正在监听的人该模式已经打开。您的服务可能如下所示：

```
angular.factory('News', function($rootScope) {
    var news = {};

    // Sets and broadcasts that a modal has been opened
    news.setModal = function( id ) {
        this.modal = id;
        $rootScope.$broadcast('modal');
    };
}); 
```

你现在需要做的就是在你的 TileBeanController 中收听广播的内容，如下所示：

```
function TileBeanController($scope, News) {
    $scope.$on('modal', function() {
        // Load data
    });
} 
```

我希望这会有所帮助:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T10:38:12.073

如果您需要元素的范围，我会将其包装在具有隔离范围的指令中：

```
myApp.directive('tilebean', function () {
    return {
        restrict : 'E',
        scope: {
            data: '='
        },
        template: '<div id="beanEditModal"><!-- Bootstrap modal -->This is your title: {{data.title}}</div>'
    };
}); 
```

然后，您可以在视图中绑定此数据参数：

```
<ul>
    <li data-ng-controller="TileController">
        <h1>Title</h1>
        <span>
            <a href="#" data-ng-click="loadBeanForEdit()">
        </span>
        ....
        <tilebean ng-model="data"></tilebean>
    </li>
    <li>
        ...
    </li>
    ...
</ul> 
```

并在控制器中填充数据：

```
function TileController($scope) {
    $scope.loadBeanForEdit= function(e) {
        e.stopPropagation();
        $("#beanEditModal").modal();
        $scope.data = getDataFromAjax();//replace this for your ajax call
    };
} 
```

# css - 为什么填充有时包含在高度中？

> ID：15335918
> 
> 赞同：26
> 
> 时间：2013-03-11T10:12:06.980
> 
> 标签：css, padding

我有一个文本区域，并在其中添加了一些 CSS

```
<textarea watermark="Have a question? ..." class="test-input" rows="4" cols="15" name="">Have a question? ...</textarea> 
```

和 CSS 应用到它 -

```
.test-input {
    border: 1px solid #D0D0D0;
    border-radius: 3px 3px 3px 3px;
    color: #646464;
    float: left;
    font-family: Arial;
    font-size: 12px;
    height: 20px;
    margin: 0 0 0 15px;
    padding: 5px;
    resize: none;
    width: 264px;
} 
```

我得到了里面有一些填充的文本区域。在它工作得很好的情况下，文本区域高度为 20 像素，高度中不包含 5 像素的填充。但是，在少数情况下，文本区域的高度包括内边距，高度会降低到 8px。如果它覆盖它，我已经寻找任何 css，但我没有找到。我比较了两种情况的结果。左边是减少的高度，右边是预期的高度。

![在此处输入图像描述](../Images/47e707fdbbf6aa85a25872b9bc02c49c.png) 我可以解决这个问题，在其他情况下专门管理高度，添加 !important 或借助一些 JavaScript。但是，我想知道造成这种影响的原因是什么。为什么以及在哪些情况下填充包含在高度或宽度中？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-11T10:16:06.673

这取决于`box-sizing`您使用的属性：

*   `border-box`表示在 CSS 中定义/计算的盒子的高度和宽度也将包括应用于它的填充和边框宽度
*   `content-box`是默认行为，其中填充和边框宽度被添加到框的定义/计算的高度和宽度上。

通过`box-sizing: border-box`在左侧示例中看到的设置，您已将元素的高度定义为 20 像素。这意味着实际的内容框将只有 8px 高，因为浏览器将从定义的高度减去边框（1px 顶部，1px 底部）和填充（5px 顶部，5px 底部），只剩下 8px，这是一点点位太短而无法包含整行的高度（因此该单词似乎被截断）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-29T18:28:34.340

jQuery 似乎与这些定义一致：

*   [`.height()`](https://api.jquery.com/height/)不包括填充（即使在 box-sizing:border-box 的情况下）
*   [`.innerHeight()`](https://api.jquery.com/innerHeight/)包括**填充**但不包括边框
*   [`.outerHeight()`](https://api.jquery.com/outerHeight/)包括填充和**边框**
*   [`.outerHeight(true)`](https://api.jquery.com/outerHeight/#outerHeight-includeMargin)包括填充和边框和**边距**

每个都可以**设置**或**获取**，例如`$element.outerHeight(desired_height_including_margins, true);`

[![在此处输入图像描述](../Images/d02e1e23b7bb202b9530e2742ade7b33.png)](https://i.stack.imgur.com/zBs5k.png)

[![在此处输入图像描述](../Images/c9f32de2d4f30f0ffa8f097ff8e7c6c2.png)](https://i.stack.imgur.com/fbBR1.png)

[![在此处输入图像描述](../Images/bea6650ffb2211f4e6a23be914e05c71.png)](https://i.stack.imgur.com/WcLbO.png)

（图片摘自链接页面。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-03T09:21:45.187

参考[https://developer.mozilla.org/en-US/docs/Web/CSS/box-sizing](https://developer.mozilla.org/en-US/docs/Web/CSS/box-sizing)，

> 该`box-sizing`属性可用于调整此行为：
> 
> *   `content-box`为您提供***默认****的CSS box-sizing 行为*。**如果将元素的宽度设置为 100 像素**，则元素的内容框将是 100 像素宽，并且任何边框或填充的宽度都将添加到最终渲染的宽度中，**使元素宽于 100 像素**。
> *   `border-box`告诉浏览器在您为元素的宽度和高度指定的值中考虑任何边框和填充。**如果您将元素的宽度设置为 100 像素，那么 100 像素将包括您添加的任何边框或填充**，并且内容框将缩小以吸收额外的宽度。这通常会使调整元素大小变得容易得多。

# javascript - 灰烬视图不显示？

> ID：15335925
> 
> 赞同：0
> 
> 时间：2013-03-11T10:12:17.270
> 
> 标签：javascript, ember.js

以下代码似乎不起作用：

```
//The HTML
<div class="content">
    <script type="text/x-handlebars" data-template-name="application">
      <h1>Application</h1>
      {{outlet}}
    </script>

    <script type="text/x-handlebars" data-template-name="user-list">
      <h2>Users</h2>
      <ul>
      {{#each App.userController}}
        <li>{{name}}</li>
      {{/each}}
      </ul>
    </script>
</div>

//The JS
var App = Ember.Application.create();

App.ApplicationController = Ember.Controller.extend();
App.ApplicationView = Ember.View.extend({
    templateName: 'application'
});

App.User = Ember.Object.extend({
    name: null,
    xs:0,
    turnover:0,
    surveys:0
});

App.UsersView = Ember.View.extend({
    templateName: 'user-list'
});

App.userController = Ember.ArrayController.create({
    content: [],

    init: function() {
        var me = this;

        $.getJSON('http://localhost:8000/', function(data) {

            me.set('content', []);

            $(data).each(function(index, value) {
                var t = App.User.create({
                    name: value.name,
                    xs: value.xs,
                    turnover: value.turnover,
                    surveys: value.surveys
                });

                me.pushObject(t);
            });
        });
    }
});

App.router = Ember.Router.create({
    enableLogging: true,

    root: Ember.Route.extend({
        index: Ember.Route.extend({
            route:'/',
            connectOutlets:function(router) {
                return router.get('applicationController').connectOutlet({
                    viewClass: App.UsersView,
                    controller: App.userController
                });
            }
        }),
    })
});

App.initialize(App.router); 
```

`userController` *正在*正确获取数据。我认为问题在于观点。`<h2>Users</h2>`甚至没有显示在页面上（虽然应用程序是）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:34:47.030

在过去的几个月里，Ember 版本之间的版本差异一直难以理解。我通常会打折 1 月之前发布的代码，除非我知道它不受重大更改的影响。

这是 RC1 的示例，截至 2013 年 3 月 12 日工作：http: [//jsfiddle.net/nrionfx/Se2Bw/1/](http://jsfiddle.net/nrionfx/Se2Bw/1/)

（它在 Coffeescript 中——我主要编写 Ruby 并发现它更具可读性......）

```
App.UsersController = Em.ArrayController.extend
    title: 'users controller'
    content: []

App.UsersRoute = Em.Route.extend
    enter: ->
        console?.log('users route')
    setupController: (controller) ->
        #Do your AJAX call here and set the content array upon success
        ct= [
            App.User.create({id: 1, name: 'Bill', xs:0}),
            App.User.create({id: 2, name: 'Bob', xs:0}),
        ]
        controller.set('content', ct)
        #END AJAX

App.Router.map (match) ->
    @route "users", path: "/" 
```

# svg - 如何使用 viewBox attribute?

> ID：15335926
> 
> 赞同：85
> 
> 时间：2013-03-11T10:12:18.970
> 
> 标签：svg

我正在从它的官方文档中学习 svg，有这样一行。我不明白，如果它已经有一个`width`and`height`属性，那么在 中再次指定它有什么意义`viewBox="0 0 1500 1000"`？据说，“一个 px 单位被定义为等于一个用户单位。因此，“5px”的长度与官方文档中的“5”长度相同，因此这个 viewBox 是 1500px 宽和1000高度视图，超过300px和200px。那么为什么它首先定义宽度和高度值呢？

```
 <svg width="300px" height="200px" version="1.1"
         viewBox="0 0 1500 1000" preserveAspectRatio="none"
         xmlns="http://www.w3.org/2000/svg"> 
```

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-03-11T10:31:41.147

宽度和高度是多大`<svg>`。viewBox 控制其内容的显示方式，因此 viewBox="0 0 1500 1000" 会将元素的内容缩小`<svg>`5 倍（1500 / 300 = 5 和 1000 / 200 = 5），内容将为 1/ 5 没有 viewBox 但它们的大小`<svg>`

想象一下，您有一个弹性表面并将其切成 4 等份。如果你扔掉 3 块，你得到的表面是原始表面大小的 1/4。如果您现在拉伸曲面并使其与原始曲面大小相同，则曲面上的所有内容都将是两倍大小。这就是 viewBox 和宽度/高度的关系。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-06-03T01:36:15.443

如果您不指定视图框，则元素中的所有无单位数字都假定为像素。（并且 SVG 假设 90 dpi 或每英寸像素用于从单位（如厘米）到像素的转换。）

视图框让您在元素中制作无单位数字意味着“用户单位”，并指定这些单位如何映射到大小。为简单起见，仅考虑 x 坐标，即标尺。您的视图框说您的标尺将有 1500 个单位来匹配 svg 的 200 像素大小宽度。

从 0 到 1500（无单位，即用户单位）的线元素将拉伸 200 个像素，即跨越 svg 绘图的宽度。

（而且由于 SVG 可以在不损失分辨率的情况下进行缩放，所以当用户放大或缩小时，像素在现实世界中的意义并不大。）

它是一种坐标变换。

我建议您从诸如“SVG Essentials”之类的书中学习，大约使用了 10 美元，我从中粗略地引用了这个答案。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2017-12-30T05:56:58.737

默认情况下

```
<svg width="300" height="200"> 
```

svg 网格的“标尺”以像素为单位（该 svg 中的所有形状都以像素为单位）

但是你想使用你自己的单位，你可以使用 viewBox attr ：

```
<svg width="300" height="200" viewBox="0 0 1500 1000"> 
```

这意味着：

**横轴：** 1500（你的宽度单位）= 300px => 1（你的宽度单位）= 300/1500px = 1/5px

**纵轴：** 1000（你的身高单位）= 200px => 1（你的身高单位）= 200/1000px = 1/5px

*   现在 svg 中的所有形状都会缩放：

与原点相比，它们的宽度缩放为 1/5 像素（1/5 < 1 => 缩小）。

与原点相比，它们的高度也缩放到 1/5px（1/5 < 1 => 缩小）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-12-14T18:37:10.483

**主要的：**

*   **viewBox 属性**与SVG中的**术语 viewport**密切相关

**缩写：**

*   视图框 - VB
*   视口 - 副总裁
*   视口坐标系 - VCS
*   局部坐标系 - LCS

**句法：**

```
<svg x = "VP_min_X" y = "VP_min_Y" width = "VP_width" height = "VP_height"
viewBox = "VB_min_X VB_min_Y VB_width VB_height"> 
```

**默认值：**

*   单位 = px
*   视口宽度 = 300
*   视口宽度 = 150
*   viewBox = 视口

具有默认值的代码

```
<svg> 
```

具有相同结果的代码：

```
<svg x = "0" y = "0" width = "300" height = "150" viewBox = "0 0 300 150"> 
```

**视口设置：**
视口坐标系 (VCS) 的原点：

*   VP_min_X
*   VP_min_Y

在最外层视口的情况下，这些值无关紧要，并且在任何情况下都将等于 0，它们通常被省略：

```
<svg width = "100" height = "150"> 
```

具有相同结果的代码：（对于最外部的视口）：

```
<svg x = "10" y = 20 "width ="100 "height ="150"> 
```

嵌套视口：
在嵌套视口 (VP_min_X, VP_min_Y) 中定义 VCS 原点的缩进：

```
<svg width="100%" height="100%"> <!-- external viewport = full browser size -->
     <svg x="50" y="100" width="200" height="300" viewBox="0 0 100 100">
     </svg>
</svg> 
```

在这种情况下，嵌套视口的缩进：
从外部 VCS 的原点沿 X 轴缩进 50 像素，沿 Y 轴缩进 100 像素。

确定将在其中绘制 SVG 图形的矩形区域（视口）的尺寸：

*   VP_width
*   VP_height

**VIEWBOX 设置：**
本地坐标系 (LCS) 的原点：

*   vb_min_X
*   vb_min_y

SVG 图像可见部分的大小：

*   vb_width
*   vb_height

**RENDERING：**
在构建最终的 SVG 图像时，坐标系通过 COMBINING 进行变换：
坐标系的原点：

*   VCS (VP_min_X, VP_min_Y)
*   LCS (VB_min_X, VB_min_Y)

可见图像区域的端点：

*   VCS (VP_width, VP_height)
*   LCS (VB_width, VB_height)

**能力：**
因此，可以控制：

*   浏览器窗口中视口的位置 [使用嵌套视口并更改 (VP_min_X, VP_min_Y)]
*   视口大小（VP_width、VP_height）
*   平移图像的可见部分 [使用 viewBox 并更改 (VB_min_X, VB_min_Y)]
*   缩放图像的可见部分 [使用 viewBox 并更改 (VB_width, VB_height)]

**可视化：** 在 YouTube 上 2 分钟了解上述原理：
[SVG 中的视频 viewBox](https://www.youtube.com/watch?v=dCbfm-eYfIY)

**文档：**
[W3C 2019 SVG 2 规范](https://svgwg.org/svg2-draft/single-page.html)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-12-03T00:13:19.400

以下是一些我认为有助于理解（尤其是使用）SVG viewPort 和 viewBox的**实用信息。**

SVG 使用**术语**viewPort 和 viewBox。viewBox 位于 viewPort 内。***将 viewBox 视为图像本身***——因为您可以缩放它，向左/向右/向上/向下滑动它——所有这些都在 viewPort 内。viewPort（SVG 标签本身）就像一个容器，里面有 SVG 图像。你也可以调整它的大小，并左右移动它左/右/上/下。并且 SVG 标记位于 HTML 容器中（div、p、aside、h3 等）。所以你可以看到为什么人们会觉得 viewPort / viewBox 有点混乱。只需将 viewBox 视为图像本身。

SVG 标签上的宽度/高度属性提供了视口的大小。这是显示 SVG 图像的容器的宽度/高度。*（您也可以拥有`x=""`和`y=""`属性，就像在 viewBox 属性中一样。）*

因此，在 SVG 本身上，您指定宽度/高度和起始 x 偏移量/起始 y 偏移量——这些称为 viewPort *（也称为 ViewPort 坐标系统）* 在 vi​​ewBox 属性中，您指定“xy 宽度高度”——这些称为 viewBox （又名本地坐标系统 LCS）

```
<svg x="0" y="0" width="500" height="300"
  viewBox="start_x  start_y  width  height" >
  ...path fill d etc...
</svg> 
```

重要概念 #1：视口的宽度/高度*（在 SVG 标签本身上的宽度/高度，如 width="" 和 height=""）*指定将显示 SVG 图像的容器的大小。通常，或者如果省略，这是与 SVG 图像本身一样的大小（或稍大一点）。

超级重要的概念 #2：viewBox***的宽度/高度与 viewPort 的宽度/高度直接相关。***如果 viewPort 是 300 x 500，那么当 viewBox **W / H**数字变得大于 300 x 500 时，图像本身在 viewPort 内变得更小（缩小）。但是随着 viewBox w/h 变得小于 300 x 500，图像本身在 viewPort 内变得更大。这种增长是向右和向下的，所以如果你需要在现在太小的视口中左右滑动放大的图像，那就是当你使用 viewBox 的**X/Y**值时。

viewBox x/y – 在视口内向右/向下滑动 SVG

viewBox 宽度/高度——当增加大于 SVG 标签的宽度/高度时，它会在 viewPort 内缩放图像。SVG 在视口内向右/向下收缩。减少 SVG 宽度/高度属性下方的数字：图像将在视口中增长，直到右侧/底部的图像部分可能被视口的右侧/底部截断。*（即当 viewBox 属性中的宽度/高度数字小于 SVG 上的宽度/高度属性时，图像会在 viewPort 内放大。当更大时，图像会随着 viewPort 缩小（缩小）。

viewPort x/y == 在其 HTML 容器 viewPort 宽度/高度内向右/向下滑动视口本身 - 将整个 viewPort 的大小调整得更大，可能会溢出 HTML 容器（div / p / 等）。基本上，通过向右/向下增长来使视口变大。

**备注：**
一。如果在 SVG 上不包含 ViewBox 属性，则 viewBox 的大小等于 viewPort 的大小（占 viewPort 的 100%）
b. 如果 viewBox 开始`0,0`并具有与 SVG 宽度/高度（即视口）相同的宽度/高度，则不会发生任何变化。相当于根本没有 viewbox 属性。
C。如果您有一个纸牌大小的视口，但 SVG 图像是谷物盒的大小，则增加 viewBox “xy ...”数字将在视口中向上/向左移动谷物盒图像，显示谷物盒图像的不同部分。这对[精灵](https://www.w3schools.com/Css/css_image_sprites.asp) 很有用
d.*（通常（总是！）SVG 元素也在 HTML 容器中 - 一个 div、p、section、li 等等。我们没有讨论这个，但请记住它。如果您的图像被截断，那么 viewBox大于视口 - 或 - HTML 容器元素（div 等）小于视口）*

这里有两个（非常棒！）短视频，由[这个答案的作者在同一个线程](https://stackoverflow.com/a/59338055/1447509)中推荐给我们：

[2 分钟视频演示](https://www.youtube.com/watch?v=dCbfm-eYfIY)
[5 分钟视频演示（同样的人，好多了）](https://www.youtube.com/watch?v=qVNRi-_vqaE)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-19T18:46:35.730

## `viewbox`是一个比率

以我卑微的经验，我一直认为`<svg>`'s 的值是应用到和值`viewbox`所需的[*图像比例*](https://andrew.hedges.name/experiments/aspect_ratio/)。在定义后者时，我只使用DOM 中的任何内容，无论是内联 HTML 属性还是通过 CSS，viewbox 属性仅适用于 SVG 文件。`width``height``<img>`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-24T04:48:32.657

## 这是说明宽度、高度和 viewBox 之间关系的一种非技术方式：

如果您的计算机上有任何尺寸为 的旧图像`1500 x 1000`，并且您捏住图像的一角并将其调整为`300 x 200`，则图像会缩小或按比例缩小（假设启用了缩放）。反之亦然。

一个好的经验法则是始终先查看 viewBox 的宽度和高度，然后将其与 SVG 的宽度和高度（或父级的宽度和高度，如果它们未在 SVG 中声明）进行比较。这样您就可以判断 SVG 图像是放大（增长）还是缩小（缩小）。

```
<svg width="300px" height="200px" viewBox="0 0 1500 1000"> 
```

以上是告诉浏览器您有一个 SVG，`1500 x 1000`但您希望它“捏住角落”并将其缩小为`300 x 200`.

# jquery - Bxslider中如何控制滑块的垂直方向？

> ID：15335936
> 
> 赞同：1
> 
> 时间：2013-03-11T10:12:41.570
> 
> 标签：jquery, bxslider

我正在使用[BxSlider](http://bxslider.com/)，它是我网页上的一个 Jquery 插件。我将滑动模式设置为“垂直”，但默认滑动方向是从下到上移动，但我想将其更改为从上到下移动。但我想不通。任何建议将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-08T01:26:07.550

您可以使用定位设置滑块箭头的位置。例如，我们将滑块“箭头”定位设置为绝对，上一个箭头顶部，下一个箭头底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:18:54.797

为此，您必须更改`core code`此`plugin`

**在插件中**

```
var setSlidePosition = function(){
    // if last slide, not infinite loop, and number of children is larger than specified maxSlides
    if(slider.children.length > slider.settings.maxSlides && slider.active.last && !slider.settings.infiniteLoop){
        if (slider.settings.mode == 'horizontal'){
            // get the last child's position
            var lastChild = slider.children.last();
            var position = lastChild.position();
            // set the left position
            setPositionProperty(-(position.left - (slider.viewport.width() - lastChild.width())), 'reset', 0);
        }else if(slider.settings.mode == 'vertical'){
            // get the last showing index's position
            var lastShowingIndex = slider.children.length - slider.settings.minSlides;
            var position = slider.children.eq(lastShowingIndex).position();
            // set the top position
            setPositionProperty(-position.top, 'reset', 0);//Change this line
        }
    // if not last slide
    }else{
        // get the position of the first showing slide
        var position = slider.children.eq(slider.active.index * getMoveBy()).position();
        // check for last slide
        if (slider.active.index == getPagerQty() - 1) slider.active.last = true;
        // set the repective position
        if (position != undefined){
            if (slider.settings.mode == 'horizontal') setPositionProperty(-position.left, 'reset', 0);
            else if (slider.settings.mode == 'vertical') setPositionProperty(-position.top, 'reset', 0);
        }
    }
} 
```

**换线：**

```
setPositionProperty(-position.top, 'reset', 0); 
```

**至**

```
setPositionProperty(position.top, 'reset', 0); 
```

然后尝试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-06T07:27:16.370

您可以设置自动放映幻灯片过渡的方向`(autoDirection: 'prev')`

```
$('.bxslider').bxSlider({  
    mode: 'vertical',  
    slideMargin:20,  
    minSlides: 4,  
    maxSlides: 4,  
    moveSlides: 1,  
    auto: true,  
    autoDirection: 'prev' /* <- */
}); 
```

# heroku - 机架请求文件不停

> ID：15335940
> 
> 赞同：1
> 
> 时间：2013-03-11T10:12:53.613
> 
> 标签：heroku, static, rack

我创建了一个简单的机架应用程序来在 heroku 上提供静态文件。但是我有一个问题，当尝试使用`rackup`. 似乎不断地请求文件，这导致 Chrome 中的标签挂起。

我有什么问题以及如何解决？

配置.ru

```
use Rack::Static,
  :urls => ["/images", "/scripts", "/styles", "/components"],
  :root => "public"

run lambda { |env|
  [
    200,
    {
      'Content-Type'  => 'text/html',
      'Cache-Control' => 'public, max-age=86400'
    },
    File.open('public/index.html', File::RDONLY)
  ]
} 
```

和错误：

```
...
127.0.0.1 - - [11/Mar/2013 11:11:43] "GET /scripts/scripts.js?_=1362996702033 HTTP/1.1" 200 8543 0.0007
127.0.0.1 - - [11/Mar/2013 11:11:43] "GET /components/jquery/jquery.min.js?_=1362996702034 HTTP/1.1" 200 92629 0.0021
127.0.0.1 - - [11/Mar/2013 11:11:43] "GET /components/jquery-ui/ui/minified/jquery-ui.custom.min.js?_=1362996702035 HTTP/1.1" 200 228147 0.0041
127.0.0.1 - - [11/Mar/2013 11:11:43] "GET /components/angular-strap/dist/angular-strap.min.js?_=1362996702040 HTTP/1.1" 200 11632 0.0010
127.0.0.1 - - [11/Mar/2013 11:11:43] "GET /components/bootstrap/docs/assets/js/bootstrap.min.js?_=1362996702041 HTTP/1.1" 200 28545 0.0010
127.0.0.1 - - [11/Mar/2013 11:11:43] "GET /components/angular-ui/build/angular-ui.min.js?_=1362996702042 HTTP/1.1" 200 17515 0.0009
127.0.0.1 - - [11/Mar/2013 11:11:43] "GET /components/angular-ui/build/angular-ui-ieshiv.min.js?_=1362996702043 HTTP/1.1" 200 1018 0.0006
127.0.0.1 - - [11/Mar/2013 11:11:43] "GET /scripts/scripts.js?_=1362996702044 HTTP/1.1" 200 8543 0.0007
127.0.0.1 - - [11/Mar/2013 11:11:43] "GET /components/jquery/jquery.min.js?_=1362996702045 HTTP/1.1" 200 92629 0.0021
127.0.0.1 - - [11/Mar/2013 11:11:43] "GET /components/jquery-ui/ui/minified/jquery-ui.custom.min.js?_=1362996702046 HTTP/1.1" 200 228147 0.0041
127.0.0.1 - - [11/Mar/2013 11:11:43] "GET /components/angular-strap/dist/angular-strap.min.js?_=1362996702051 HTTP/1.1" 200 11632 0.0007
127.0.0.1 - - [11/Mar/2013 11:11:43] "GET /components/bootstrap/docs/assets/js/bootstrap.min.js?_=1362996702052 HTTP/1.1" 200 28545 0.0060
127.0.0.1 - - [11/Mar/2013 11:11:43] "GET /components/angular-ui/build/angular-ui.min.js?_=1362996702053 HTTP/1.1" 200 17515 0.0008
127.0.0.1 - - [11/Mar/2013 11:11:43] "GET /components/angular-ui/build/angular-ui-ieshiv.min.js?_=1362996702054 HTTP/1.1" 200 1018 0.0006
127.0.0.1 - - [11/Mar/2013 11:11:43] "GET /scripts/scripts.js?_=1362996702055 HTTP/1.1" 200 8543 0.0007
... 
```

# php - 我应该使用 user_id（主键）还是 user_name（唯一索引）从 Mysql 插入和获取数据

> ID：15335941
> 
> 赞同：0
> 
> 时间：2013-03-11T10:12:53.657
> 
> 标签：php, mysql, performance

我正在用 php mysql 开发一个用户评论系统。实际上，我的第一个偏好是使用 user_id(Primary Key) 获取数据并将其插入 mysql，但在某些地方我需要使用 user_name(Unique Index) 从 mysql 获取数据并更新或插入其中。

我想问哪种方法最有效？如果在某些地方，我必须使用 user_name 会影响效率吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:17:00.003

您在 user_id 和 user_name 上都有一个索引，因此它们都会很快，一般来说（因为您没有详细说明这两个字段中使用的类型），user_id 会更快，因为索引大小在逻辑上会更小比 user_name 字段 - 但你说的是微小的差异。

我可以认为 user_name 实际上是他们的登录名而不是他们的真实姓名吗？因为在真实姓名上具有唯一索引会因为冲突的高概率而出现问题。如果是这种情况，您是否考虑过散列名称然后将其用作索引？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:16:46.547

您应该将`user_id`其用作主键，而不是`user_name`，但每当您尝试基于 插入或获取数据时`user_name`，您必须`user_id`在 where 子句中使用，因为我确信`user_id`当有`user_name`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T10:24:37.260

> 我们刚刚注意到我们的生产系统上有一个非常奇怪的事情。关键链接表上的唯一键被主键替换，性能显着提高！

参考 ：

[在这里](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:4941517587762#41810011839090 "点击这里")。

# error-handling - 返回结构或错误的惯用方式是什么？

> ID：15335942
> 
> 赞同：21
> 
> 时间：2013-03-11T10:12:56.707
> 
> 标签：error-handling, go, zero

我有一个函数，它返回`Card`一个`struct`类型，或者一个错误。

问题是，发生错误时如何从函数返回？`nil`对结构无效，并且我的类型没有有效的零值`Card`。

```
func canFail() (card Card, err error) {
    // return nil, errors.New("Not yet implemented"); // Fails
    return Card{Ace, Spades}, errors.New("not yet implemented"); // Works, but very ugly
} 
```

我发现的唯一解决方法是使用 a`*Card`而不是 a `Card`， a 在出现错误时使用它，或者在没有错误发生时`nil`使其指向实际`Card`，但这很笨拙。

```
func canFail() (card *Card, err error) {
    return nil, errors.New("not yet implemented");
} 
```

有没有更好的办法 ？

编辑：我找到了另一种方式，但不知道这是惯用的还是好的风格。

```
func canFail() (card Card, err error) {
    return card, errors.New("not yet implemented")
} 
```

由于`card`是一个命名的返回值，我可以在不初始化的情况下使用它。它以自己的方式归零，我真的不在乎，因为调用函数不应该使用这个值。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-11T12:38:45.320

```
func canFail() (card Card, err error) {
    return card, errors.New("not yet implemented")
} 
```

我认为这，你的第三个例子，也很好。可以理解的规则是，当函数返回错误时，不能依赖其他返回值来获得有意义的值，除非文档另有明确说明。所以在这里返回一个可能毫无意义的结构值是可以的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-11T10:21:41.677

例如，

```
type Card struct {
}

func canFail() (card Card, err error) {
    return Card{}, errors.New("not yet implemented")
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-11T10:21:50.137

```
func canFail() (card Card, err error) {
        if somethingWrong {
                err = errors.New("Not yet implemented")
                return
        }

        if foo {
                card = baz
                return
        }

        ... 

        // or 
        return Card{Ace, Spades}, nil
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-03T16:46:43.010

作为返回结构的一种可能替代方法，您可以考虑让调用者分配它并让函数设置参数。

```
func canFail(card *Card) (err error) {
    if someCondition {
        // set one property
        card.Suit = Diamond

        // set all at once
        *card = Card{Ace, Spade}
    } else {
        err = errors.New("something went wrong")
    }

    return
} 
```

如果您不习惯假装 Go 支持 C++ 样式引用，您还应该`card`检查`nil`.

[https://play.golang.org/p/o-2TYwWCTL](https://play.golang.org/p/o-2TYwWCTL)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-10T19:32:57.900

peterSO 的答案是最接近的，但这不是我会使用的。我认为这是最好的：

```
func canFail() (Card, error) {
   return Card{}, errors.New("not yet implemented")
} 
```

首先，它没有使用指针，所以它可以`nil`用于返回。我认为这是一个巧妙的技巧，但除非你真的需要`struct`成为一个指针（出于修改或其他原因），否则返回一个值会更好。此外，我认为不应命名返回值，除非您正在使用它们，如下所示：

```
func canFail() (card Card, err error) {
   return
} 
```

这是有问题的，原因有两个。首先，您并不总是处于可以简单地将返回值设置为当时该变量的任何情况的情况。其次，如果你有一个更大的函数，你将无法在更深层次使用裸返回，因为你会得到可变阴影错误。

最后，使用`Card{}`代替`nil`or`card`更冗长，但它可以更好地传达您正在做的事情。如果您使用以下任何一种：

```
return
return card, err 
```

没有上下文就不清楚该函数是否成功，而这个：

```
return Card{}, err 
```

很明显该功能失败了。这与原始类型使用的模式相同：

```
return false, err
return 0, err
return '\x00', err
return "", err
return []byte{}, err 
```

[https://github.com/golang/go/wiki/CodeReviewComments#pass-values](https://github.com/golang/go/wiki/CodeReviewComments#pass-values)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-02-01T09:46:22.157

对我来说，我更喜欢你的第二种选择。

```
func canFail() (card *Card, err error) {
    return nil, errors.New("not yet implemented");
} 
```

这样你可以确保当错误发生时，`canFail()`调用者将无法使用它，`card`因为它是 nil。我们不能确保调用者会首先检查错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-17T09:14:45.047

如果您的函数的行为不像其他人会假设读取其签名 IE `if an error has occurred I should ignore the value along it`，.

很像 any [`io.Reader`](https://pkg.go.dev/io#Reader)，它可能会返回`n>0`一个`error`

然后，您应该简单地记录它以向用户解释关于错误中的返回值应该考虑什么。

改变签名，因此一般的 API 关系，对于这种情况，罕见但并非不可避免，不是 Go 的方法。

相反，您应该充分记录函数的行为。

# javascript - insertAfter - find - on() - 不工作

> ID：15335944
> 
> 赞同：0
> 
> 时间：2013-03-11T10:13:06.957
> 
> 标签：javascript, jquery, html

我想，我已经设置好了，但它仍然无法正常工作 - 我正在添加`input`带有`X`删除符号的新 html 元素。如果我点击那个新添加`X`的标志，新添加的输入应该被删除。我所做的是：

```
function addmore(){
   $('<input type="file" name="bild[]"/> <a class="del">X</a> <br/>').insertAfter('#more').find('.del').on('click', function(){
   alert('test');
   });
 } 
```

我的html是：

```
 <a href="javascript:addmore()"> add more </a>
 <p id="more"></p> 
```

它插入得很好，但我无法删除新添加的元素（警报未触发）。为什么是这样？

多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:16:52.680

该`.find()`函数查找*当前*匹配元素集中的元素，但不包括那些匹配的元素。您的`<a class="del">`元素是匹配元素集的一部分，因此不会被拾取。

改用[`.filter()`](http://api.jquery.com/filter/)：

```
....filter('.del').on('click', function() {...}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:15:56.347

试试这个

```
 function addmore(){
        var element = $('<input type="file" name="bild[]"/> <a class="del">X</a> <br/>').insertAfter('#more');
        element.filter(".del").on('click', function(){
        alert('test');
       });
     } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T10:18:52.573

你的`.find()`选择器实际上并没有返回任何东西。如果您查看 jQuery 如何处理您的 HTML 字符串：

```
> $('<input type="file" name="bild[]"/> <a class="del">X</a> <br/>')
[<input type=​"file" name=​"bild[]​">​, #text, <a class=​"del">​X​&lt;/a>​, #text, <br>​] 
```

您将看到它实际上将这些元素和文本节点中的每一个解析为选择器中的单独元素。`.find()`不会返回任何东西，因为它只会查看这些元素的后代，而不是元素本身：

```
> $('<input type="file" name="bild[]"/> <a class="del">X</a> <br/>').find('.del')
[] 
```

我会从这样的事情开始：

```
$('<input type="file" name="bild[]"/>').insertAfter('#more');
$('<a class="del">X</a>').insertAfter('#more').on('click', function(){
    alert('test');
});

$('<br/>').insertAfter('#more'); 
```

或者从一开始就创建一个通用选择器来自动处理点击事件，即使对于尚不存在的元素也是如此：

```
$('#more').on('click', '.del', function() {
    alert('test');
}); 
```

# jquery - jQuery Validation 添加新方法

> ID：15335949
> 
> 赞同：1
> 
> 时间：2013-03-11T10:13:28.960
> 
> 标签：jquery, jquery-validate

我想要做的是添加一个新的验证方法，如果勾选了一个单选按钮，它将验证 2 个字段是否不相等（见这里 - [http://jsfiddle.net/dazziep/uVnQ4/9/](http://jsfiddle.net/dazziep/uVnQ4/9/)）

我的代码有效，但我不得不通过在我宁愿通过它的实际方法中添加字段来稍微捏造它。

所以此刻我有...

```
jQuery.validator.addMethod("test", function(value, element, param){
   // check if dependency is met
   if (!this.depend(param, element)) return "dependency-mismatch";
   return value != $("#ImEqDepEq").val();
   },
   jQuery.format("Should not match Equality value.")
);` 
```

我显然只是希望 ($("#ImEqDepEq").val()) 成为我传入的另一个参数。

我希望这有某种意义，我在解释事情时很垃圾:(

干杯

达兹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:32:21.950

`param`您可以使用选项将附加信息传递给规则。

```
$("form").validate({
    rules: {
        ImEqDep: {
            test: {
                depends: function () {
                    return $("#ImEqDepRad1Yes").is(':checked');
                },
                param: '#ImEqDepEq'
            }
        }
    }
});

jQuery.validator.addMethod("test", function (value, element, param) {
    // check if dependency is met
    if (!this.depend(param, element)) return "dependency-mismatch";
    return value != $(param).val();
}, jQuery.format("Should not match Equality value.")); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/uVnQ4/11/)

# java - 将小程序与 Web 应用程序打包以访问 loca 文件系统的步骤

> ID：15335957
> 
> 赞同：1
> 
> 时间：2013-03-11T10:14:07.340
> 
> 标签：java, web-applications, applet

我需要支持使用 Applet 上传文件夹。我已经实现了将尝试获取用户主目录并尝试为该文件夹创建一个临时 zip 文件的小程序，然后它将点击我的上传 servlet。实际上，zip 文件的创建和上传将通过从 JavaScript 调用小程序方法 uploadFolder 之一来启动。当我在用户主目录中创建一个 zip 文件时，我得到一个 java.security.AccessControlException: access denied (java.io.FilePermission C:\Documents and Settings\userhomedir\temp_timestamp.zip write)。

**以下是我已经完成的步骤：**

**第1步：**

1.  创建了一个小程序来创建 zip 和文件，以及上传 servlet 以及 uploadFolder 方法。
2.  为该小程序项目创建了一个签名的 jar。
3.  html代码是

    ```
    <Applet code="com.project.upload.FolderUploadApplet.class" name="uploadApp"
        archive="upload.jar"
        width="250" height="80" >
    </applet> 
    ```

4.  JavaScript 代码是

    ```
    window.alert(uploadApp.uploadFolder(destionationPath)); 
    ```

**第2步：**

在此之后，我浏览了一些论坛并决定使用 JNLP 选择 JWS。在第 1 步中，我能够使用 JavaScript 调用小程序方法，但是当我使用 JNLP 时，我无法通过 JavaScript 调用我的小程序方法。请找到以下代码片段：

**html**

```
<Applet code="com.altair.cm.upload.FolderUploadApplet.class" id="xyz" archive="scmfu.jar">
    <param name="jnlp_href" value="folderupload.jnlp">  
</applet> 
```

**JavaScript**

```
 var app = document.getElementById("xyz");
   window.alert(app.uploadFolder(destionationPath)); 
```

**文件夹上传.jnlp**

```
 <?xml version="1.0" encoding="UTF-8"?>
        <jnlp spec="1.0+" codebase="" href="">
        <information>
            <title>Folder Upload</title>
            <vendor>Team</vendor>
        </information>
        <security>
          <all-permissions/>
        </security>
        <resources>
            <!-- Application Resources -->
            <j2se version="1.6+"
                  href="http://java.sun.com/products/autodl/j2se"
                  <!-- secure java vm argument -->
                  java-vm-args="-Xmx1024M"/>
            <jar href="scmfu.jar"
                main="true" />
                <!-- secure properties -->
            <property name="sun.java2d.noddraw"
                value="true"/>
            <property name="jnlp.myProperty"
                value="a user-defined property"/>
        </resources>
        <applet-desc 
             name="uploadApp"
             main-class="com.altair.cm.upload.FolderUploadApplet.class"
             width="600"
             height="200">             
         </applet-desc>
         <update check="background"/>
        </jnlp>
    Applet Code :
    public class FolderUploadApplet extends JApplet {

    public String uploadFolder(String destinationPath){
         String fileName = UploadUtil.getInstance().processZipAndUpload(destinationPath,file.getPath());
         return fileName;
    }
} 
```

任何人都可以建议我，更好地访问本地文件系统并纠正我是否做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T06:50:32.673

如果一个受信任的小程序被 JS 调用，它通常会变成沙盒。要解决这个问题，请将调用包装在[`PrivilegedAction`](http://docs.oracle.com/javase/7/docs/api/java/security/PrivilegedAction.html).

# c# - 使用参数化查询检查重复的用户名

> ID：15335958
> 
> 赞同：0
> 
> 时间：2013-03-11T10:14:08.903
> 
> 标签：c#, asp.net, tsql, ado.net

我想检查数据库中是否已经存在用户名。

```
SqlConnection con = new SqlConnection(ConfigurationManager.AppSettings["DBCOnn"].ToString());
try
{
    con.Open();

   SqlCommand cmd = new SqlCommand("select client_id from tbl_client where client_name=@cname", con);
   cmd.CommandType = CommandType.Text;

   cmd.Parameters.Add("@cname", DbType.String).Value = usernm;

   int i = cmd.ExecuteNonQuery();
   if (i > 0)
       return true;
   else
       return false;
}
catch (Exception ex)
{
    throw new Exception("CheckExistingClient:" + ex.Message, ex.InnerException);
}
finally
{
    con.Close();
} 
```

但在这里，`i`总是给予`-1`

问题是什么。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:18:05.737

`ExecuteNonQuery`返回受影响的行数，通常用于插入、更新或删除语句。改用[`ExecuteScalar`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar%28v=vs.80%29.aspx)with `COUNT`。

```
using (var con = new SqlConnection(ConfigurationManager.AppSettings["DBCOnn"].ToString()))
using(var cmd = new SqlCommand("select COUNT(client_id) from tbl_client where client_name=@cname", con))
{
    cmd.Parameters.Add("@cname", DbType.String).Value = usernm;
    con.Open();
    int i = (int)cmd.ExecuteScalar();
    return i > 0;
} 
```

这是关于 SO 的相关答案：[https ://stackoverflow.com/a/4269651/284240](https://stackoverflow.com/a/4269651/284240)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:18:35.987

ExecuteNonQuery 返回受 INSERT、UPDATE 或 DELETE 语句影响的行数。您正在运行 SELECT。

我发现“从 UserName=@cName 的用户中选择”并运行标准选择更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T10:18:44.660

`ExecuteNonQuery`用于 DML 查询。您没有修改和行。所以你得到的结果是-1。

你可以使用`select count(client_id) from tbl_client where client_name=@cname`

并得到计数`cmd.ExecuteScalar`

# php - PHP 脚本没有图形化的一面

> ID：15335960
> 
> 赞同：-1
> 
> 时间：2013-03-11T10:14:11.513
> 
> 标签：php, html, user-interface

所以我在这里有这段代码，我从互联网上下来的，它应该将数据从 mySQL 数据库导出到一个 excel 文件。问题是我应该如何触发这个？这没有图形方面，没有触发脚本的按钮，什么都没有。我怎样才能让它工作？

```
<?PHP
  // Original PHP code by Chirp Internet: www.chirp.com.au
  // Please acknowledge use of this code by including this header.

  include('config.php');
  function cleanData(&$str)
  {
    $str = preg_replace("/\t/", "\\t", $str);
    $str = preg_replace("/\r?\n/", "\\n", $str);
    if(strstr($str, '"')) $str = '"' . str_replace('"', '""', $str) . '"';
  }

  // filename for download
  $filename = "website_data_" . date('Ymd') . ".xls";

  header("Content-Disposition: attachment; filename=\"$filename\"");
  header("Content-Type: application/vnd.ms-excel");

  $flag = false;
  $result = pg_query("SELECT * FROM norse5_proov ORDER BY id") or die('Query failed!');
  while(false !== ($row = pg_fetch_assoc($result))) {
    if(!$flag) {
      // display field/column names as first row
      echo implode("\t", array_keys($row)) . "\r\n";
      $flag = true;
    }
    array_walk($row, 'cleanData');
    echo implode("\t", array_values($row)) . "\r\n";
  }
  exit;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:18:57.223

这是一些适用于商业应用程序的代码；

```
if($_REQUEST["EXCEL"]){
   header("Content-Type: application/excel");
   header("Content-Disposition: attachment; FileName=assets.xls");
   header("Cache-Control: private");
   header("Content-Length: ".strLen($data));
   echo $data;
   exit;
} 
```

$data 是制表符分隔的文本，但 excel 标题打开 Excel 并导入文本

# python - Python字典需要同步吗？

> ID：15335965
> 
> 赞同：0
> 
> 时间：2013-03-11T10:14:20.853
> 
> 标签：python, dictionary, synchronization, thread-safety

如果有一个 Python 字典并且有多个线程添加到它，如果我知道每个线程都将添加到它自己的键中，我是否必须同步添加元素。（我的意思是不能同时对同一个键进行加法）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:16:13.147

当每个线程的键不是唯一的时，您可能需要同步对字典对象的访问。访问不一定是线程安全的。

您始终可以使用[`dis`（反汇编程序）模块](http://docs.python.org/2/library/dis.html)来验证任何 python 代码；python线程上下文可以在任何操作码之间切换（操作码本身是原子执行的）；对字典的访问可以分布在几个操作码上：

```
>>> def foo():
...     somedict = {}
...     somedict['bar'] = 'spam'
... 
>>> import dis
>>> dis.dis(foo)
  2           0 BUILD_MAP                0
              3 STORE_FAST               0 (somedict)

  3           6 LOAD_CONST               1 ('spam')
              9 LOAD_FAST                0 (somedict)
             12 LOAD_CONST               2 ('bar')
             15 STORE_SUBSCR        
             16 LOAD_CONST               0 (None)
             19 RETURN_VALUE 
```

该`somedict['bar'] = spam`行涉及 4 个操作码，加载`somedict`引用、加载`'bar'`和`'spam'`常量以及调用存储操作。线程上下文可以在任何这些操作码之间切换。

也就是说，如果您的密钥保证每个线程都是唯一的，那么您可以不锁定结构而侥幸；与所有操作码一样，`STORE_SUBSCR`操作码由 GIL 下的 Python 解释器执行，因此多个线程存储和读取*各自密钥*中的信息应该是安全的。

Python 标准库库在几个位置执行此操作；`thread.thread_ident()`用作字典键将每个线程的信息存储在字典中。例如，该[`threading`模块](http://hg.python.org/cpython/file/tip/Lib/threading.py)`_active`保留了一个以线程标识符为键的模块全局字典。

# android - 如何区分安卓中的彩信和短信？

> ID：15335970
> 
> 赞同：4
> 
> 时间：2013-03-11T10:14:36.807
> 
> 标签：android, mms

如何`MMS/SMS listeners`在 Android 中区分 MMS 和 SMS？因为我的短信计数与彩信计数一样？

我正在使用以下代码计算总彩信。

```
Uri mmsInboxUri = Uri.parse("content://mms/inbox");
Uri mmsSentUri = Uri.parse("content://mms/sent");

Cursor mmsInboxCursor = getContentResolver().
                         query(mmsInboxUri ,new String[] {"_id"},  null, null);
Cursor mmsSentCursor = getContentResolver().
                         query(mmsSentUri ,new String[] {"_id"}, null, null);
int mmsCount = mmsInboxCursor.getCount() + mmsSentCursor.getCount(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:09:14.640

您应该检查该列`ct_t`。如果是彩信，它应该等于`application/vnd.vap_multipart.related`.

# c# - 如何将命名空间添加到模型 MVC

> ID：15335975
> 
> 赞同：0
> 
> 时间：2013-03-11T10:14:55.183
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我在我的项目中创建了文件夹“App_Code”，类很简单

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace Tools
{

    public static class TextTools
    {
        public static void GenerateHash(string str, int user)
        { 

        }
    }
} 
```

我的问题是：如何将这个命名空间“工具”与所有类和方法一起添加到我的项目中？我试图插入`using Tools;`我的 AccountModels.cs 但它不起作用。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:39:05.343

可能您需要在参考中添加“工具”

# breadcrumbs - OSClass 中的面包屑

> ID：15335983
> 
> 赞同：0
> 
> 时间：2013-03-11T10:15:20.307
> 
> 标签：breadcrumbs, osclass

我是 OSClass 的新手。我看见

`$breadcrumb = osc_breadcrumb('&raquo;', false);`

在`header.php`. 定义在哪里`osc_breadcrumb()`？我正在使用`modern`主题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:00:55.703

函数 osc_breadcrumb() 在 oc-includes/osclass/helpers/hDefines.php 中声明

并返回 html 代码，

如果你想深入了解 Breadcrumb.php 类位于 oc-includes/osclass/classes/Breadcrumb.php

# r - R程序 - 根据另一列获取特定值

> ID：15335985
> 
> 赞同：0
> 
> 时间：2013-03-11T10:15:26.580
> 
> 标签：r, extract

所以我有关于身份证号码和时间的数据

```
Id number   Time(hr)
1   5
2   6.1
3   7.2
4   8.3
5   9.6
6   10.9
7   13
8   15.1
9   17.2
10  19.3
11  21.4
12  23.5
13  25.6
14  27.1
15  28.6
16  30.1
17  31.8
18  33.5
19  35.2
20  36.9
21  38.6
22  40.3
23  42
24  43.7
25  45.4 
```

我想要这个输出

```
 Time Id number
    10  5
    20  10
    30  16
    40  22 
```

所以我希望时间间隔为 10 小时并获取与该特定小时相对应的 ID...我决定使用此代码`data <- data2[seq(0, nrow(data2), by=5), ]` ，但不是 Time 间隔为 10 小时...ID 号为 10 个间隔....但我不想要那个输出..到目前为止我得到这个输出

```
Id.number Time..s.
        10     19.3
      20     36.9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:11:35.540

我使用`cut()`，`cumsum(table())`但我并没有完全得到您期望的答案。你到底是怎么计算的？

```
# first load the data
v.txt <- '1   5
2   6.1
3   7.2
4   8.3
5   9.6
6   10.9
7   13
8   15.1
9   17.2
10  19.3
11  21.4
12  23.5
13  25.6
14  27.1
15  28.6
16  30.1
17  31.8
18  33.5
19  35.2
20  36.9
21  38.6
22  40.3
23  42
24  43.7
25  45.4'
# load in the data... awkwardly...
v <- as.data.frame(matrix(as.numeric(unlist(strsplit(strsplit(v.txt, '\n')[[1]], ' +'))), byrow=T, ncol=2))
tens <- seq(from=0, by=10, to=100)
v$cut <- cut(v$Time, tens, labels=tens[-1])
v2 <- as.data.frame(cumsum(table(v$cut)))
names(v2) <- 'Time'
v2$Id <- rownames(v2)
rownames(v2) <- 1:nrow(v2)
v2 <- v2[,c(2,1)]
rm(v, v.txt, tens) # not needed anymore
v2 # the answer... but doesn't quite match your expected answer...

  Id Time
1 10    5
2 20   10
3 30   15
4 40   21
5 50   25 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:17:38.793

您可以使用`%%`(mod) 运算符。

`data[data$Time %% 10 == 0, ]`

# asp.net - MissingManifestResourceException 运行时

> ID：15335987
> 
> 赞同：0
> 
> 时间：2013-03-11T10:15:31.487
> 
> 标签：asp.net

关于以下错误的任何建议：

```
"Could not find any resources appropriate for the specified culture or the 
neutral culture.  Make sure "AjaxControlToolkit.Properties.Resources.NET4.resources" 
was correctly embedded or linked into assembly "AjaxControlToolkit" at compile time, 
or that all the satellite assemblies required are loadable and fully signed." 
```

我在我的项目中添加了 ajax 控制工具包....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:20:10.227

确保您有：.aspx 页面上的**ScriptManager 。**

注意：使用 AJAX 控件工具包中的控件时有一项特殊要求。该页面必须包含 ScriptManager 控件。ScriptManager 控件负责包含 AJAX 控件工具包控件所需的所有必要 JavaScript。

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
  </asp:ScriptManager> 
```

# algorithm - 神经网络训练集

> ID：15335988
> 
> 赞同：4
> 
> 时间：2013-03-11T10:15:40.073
> 
> 标签：algorithm, graph, artificial-intelligence, neural-network

我的问题是关于监督人工神经网络 (ANN) 中的训练集

正如你们中的一些人可能知道的那样，训练集由对（输入，期望的输出）组成

训练阶段本身如下

```
for every pair in a training set

-we input the first value of the pair and calculate the output error i.e. how far is the generated output from the desired output, which is the second value of the pair

-based on that error value we use backpropagate algorithm to calculate weight gradients and update weights of ANN 

end for 
```

现在假设`pair1, pair2, ...pair m, ...`训练集中有

我们采取`pair1`，产生一些错误，更新权重，然后采取`pair2`，等等。

后来我们到达`pair m`，产生一些错误，并更新权重，

我的问题是，如果之后的权重更新`pair m`会消除一些权重更新，甚至是之前发生的更新怎么办？

例如，如果`pair m`要消除在`pair1`、 或`pair2`或两者之后发生的权重更新，那么尽管 ANN 会为输入 m 产生合理的输出，但它会有点忘记 和 的更新，`pair1`并且`pair2`输入 1 和 2 的结果会很差，那么训练的意义何在？

除非我们一次又一次地训练 ANN，`pair1`否则`pair2``pair m`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T16:57:30.987

> 例如，如果pair m要消除pair1或pair2或两者之后发生的权重更新，那么尽管ANN会为输入m产生合理的输出，但它会有点忘记pair1和pair2的更新，以及输入的结果1和2会很差，那训练有什么意义呢？？

训练神经网络的目的是最终得到权重，为所有可能的输入值提供所需的输出。您在这里所做的是在反向传播时遍历误差表面，以便最终进入误差低于误差阈值的区域。请记住，当您反向传播一组输入的错误时，这并不意味着神经网络会自动识别*该特定*输入并在再次出现该输入时立即产生*准确的响应。*当你反向传播时，这意味着你已经改变了你的权重，使得你的神经网络能够*更好地*识别特定的输入（也就是说，误差不断减少）。

因此，如果您先呈现pair-1，然后呈现pair-2，那么pair-2可能会在一定程度上否定这些变化。然而，从长远来看，神经网络的权重将倾向于正确识别所有输入。问题是，您无法查看针对特定输入/输出集的特定训练尝试的结果，并担心更改会被否定。正如我之前提到的，当你训练一个神经网络时，你正在遍历一个误差表面以找到误差最低的位置。可以把它想象成沿着有一堆山丘和山谷的景观行走。想象一下，您没有地图，而您有一个特殊的指南针，可以告诉您需要移动的方向和距离。指南针基本上是试图将您引导到这个景观的最低点。现在这个指南针也不太了解地形，因此在尝试将您送到最低点时，它可能会朝一个稍微错误的方向（即，将您送上山）但它会尝试并纠正之后自己。从长远来看，您最终将处于景观的最低点（除非您处于局部最小值，即低点，但不是*最低*点）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T09:55:18.127

每当您进行监督训练时，您都应该通过训练数据集运行几轮（甚至几千轮）。通过训练数据集的每一轮都称为一个*epoch*。

在监督训练期间，还有两种不同的方法可以更新神经网络中的参数。**随机训练**和**批量训练**。批量训练是遍历数据集的一个循环，通过集合累积总误差，并在所有误差都累积后只更新一次参数（权重）。随机训练是您描述的方法，其中针对每个输入所需的输出对调整权重。

在几乎所有情况下，训练数据集对一般情况具有相对代表性，您应该更喜欢随机训练而不是批量训练。在 100 个案例中的 99 个中，随机训练胜过批量训练！（需要引用:-)）。（简单的异或训练案例和其他玩具问题除外）

回到你的问题（适用于随机训练）：是的，第二对确实可以在与第一对相反的方向上调整权重。然而，对于两种情况，不太可能将所有权重都调整为相反方向。但是，由于您将在集合中运行几个 epoch，因此每个 epoch 的效果都会减弱。您还应该随机化每个时期的配对顺序。（使用某种 Fisher-Yates 算法。）这将进一步降低效果。

下一个提示：将基准数据集与训练数据分开。对于每个 n 时期的训练，用基准集对神经网络进行基准测试。那就是计算这个基准数据集中的对的总误差。当误差没有减少时，就该停止训练了。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:14:31.257

如果您正在执行随机梯度下降 (SGD)，那么这可能不会发生，因为对 1 的参数更新将在计算对 2 的参数更新之前生效。这就是 SGD 收敛速度更快的原因。

如果您同时使用所有数据（甚至是其中的一部分）计算参数更新，那么这两对可能会相互抵消。然而，这并不是一件坏事，因为很明显，这两对数据点给出了相互矛盾的信息。这就是为什么批量反向传播通常被认为更稳定的原因。

# r - 将多个回归线拟合到 R 中的散点图

> ID：15335992
> 
> 赞同：0
> 
> 时间：2013-03-11T10:15:51.197
> 
> 标签：r, plot, ggplot2, regression

我正在尝试将回归线拟合到这个关系 angc~ext。变量 pch 将数据分为两组，我想分别拟合回归线

及其置信区间。这是我的数据框（C）：

```
"ext" "angc" "pch"
25 3.76288002820208 0
29 4.44255895177431 0
21 2.45214044383301 0
35 4.01334352881766 0
35 9.86225452423762 0
28 19.9304126868056 1
32 25.6984064030981 1
20 5.10582966112880 0
36 5.75603291081328 0
11 4.62311785943305 0
33 4.94401591414043 0
27 8.10039123328465 0
29 16.3882499757369 1
30 29.3492784626796 1
29 3.85960848290140 0
32 5.35857680326963 0
26 4.86451443776053 0
16 8.22008387344697 0
30 10.2212259432413 0
32 17.2519440101067 1
29 27.5011256290209 1 
```

我的代码：

```
c0 <-  C[C$pch == 0, ]
c1 <- C[C$pch == 1, ]
prd0 <- as.data.frame( predict( lm(c0$angc ~ c0$ext), interval = c("confidence") ) )
prd1 <- as.data.frame( predict( lm(c1$angc ~ c1$ext), interval = c("confidence") ) )
dev.new()
plot( C$angc ~ C$ext, type = 'n' )
points( c0$angc ~ c0$ext, pch = 17 ) # triangles
abline(lm(c0$angc ~ c0$ext)) # regression line
lines(prd0$lwr) # lower CI
lines(prd0$upr) # upper CI
points( c1$angc ~ c1$ext, pch = 1 ) # circles
abline(lm(c1$angc ~ c1$ext))
lines(prd1$lwr, type = 'l', lty = 3 )
lines(prd1$upr, type = 'l', lty = 3 ) 
```

我有两个问题：

1.  如何获得所需的圆圈回归线？它应该是一条几乎垂直的线（检查 c1）
2.  我没有得到正确的置信区间

谢谢您的帮助，

桑蒂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:21:56.433

在`ggplot2`你可以相当有效地做到这一点：

```
ggplot(C, aes(x = ext, y = angc, shape = pch)) + geom_point() + 
     geom_smooth(method = "lm") 
```

这将创建一个vs的散点图 ( `geom_point()`) ，其中点的形状基于。此外，在图中为 中的每个唯一元素绘制一条回归线。这个名字来源于它绘制数据的平滑版本，在这种情况下是线性回归。`angc``ext``pch``pch``geom_smooth()`

# linq - 如何显示来自 xml 文件的视频？

> ID：15335997
> 
> 赞同：3
> 
> 时间：2013-03-11T10:15:57.840
> 
> 标签：linq, windows-phone-7, c#-4.0, xml-parsing

嗨，我正在使用下面给出的 xml 文件，我如何从 xml 文件中获取视频？

```
<Category name="Videos">
   <article articleid="68">
     <videourl>
      <iframe src="http://player.vimeo.com/video/52375409?fullscreen=0" width="500"   height="298" frameborder="0"></iframe>
     </videourl>
    </article>
</Category> 
```

我的代码是

```
XDocument loadedData = XDocument.Load("CountriesXML.xml");

        var data = from query in loadedData.Descendants("Country")
          select new CountryData
          {
             url = (string)query.Element("videourl").Elements("iframe").Single().Attribute("src").Value,
          };
     countryList = data.ToList(); 
```

但我得到 NullReferenceException 错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:18:49.527

```
var xdoc = XDocument.Load("CountriesXML.xml");
var videos = from f in xdoc.Descendants("iframe")
             select new {
                Src = (string)f.Attribute("src"),
                Width = (int)f.Attribute("width"),
                Height = (int)f.Attribute("height")
             }; 
```

或者使用您更新的代码：

```
var xdoc = XDocument.Load("CountriesXML.xml");
var data = from c in xdoc.Descendants("Category") // you have Category element
           select new CountryData {
              url = (string)c.Element("article") // there is also article element
                             .Element("videourl")
                             .Elements("iframe")
                             .Single().Attribute("src")
           }; 
```