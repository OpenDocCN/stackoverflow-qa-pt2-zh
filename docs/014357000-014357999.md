# StackOverflow 问答 14357000-14357999

# c++ - C++ : int _b(di*3) 转换为 C

> ID：14357001
> 
> 赞同：-1
> 
> 时间：2013-01-16T11:11:33.210
> 
> 标签：c++, c, int

一位朋友给了我一些 C++ 代码以转换为 C。你能帮我理解它的作用吗？

```
for (int _b(di*3), ddi = _b; ddi < _b+3; ++ddi)

 Specifically this bit : int _b(di*3) 

 // _b is not a function; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:14:01.503

这只是一个构造函数调用，即 C++ 的说法：

```
int _b = di * 3; 
```

# android - 使用异步任务下载图像并在图库中显示

> ID：14357011
> 
> 赞同：1
> 
> 时间：2013-01-16T11:11:58.407
> 
> 标签：android, multithreading, image, uiimageview

我必须下载一些图像并使用图库显示它们。对于我用于画廊的图像适配器，我必须开始使用异步任务在获取视图方法中下载图像。我的问题是我无法将下载的图像视图返回给调用函数。由于networkonmainthread异常，我无法使用主线程下载。

图库活动

```
public class GalleryActivity extends Activity {

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.gallery);
        ((Gallery) findViewById(R.id.gallery)).setAdapter(new ImageAdapter(this));
     } 
```

图像适配器

```
public class ImageAdapter extends BaseAdapter { 

    public View getView(int position, View convertView, ViewGroup parent) {     
        new galleryBackground().execute(Integer.toString(position));
        ImageView i =null;
        return i;
    }

} 
```

画廊

```
public class galleryBackground extends AsyncTask<String, Integer, String> { 
  Bitmap bm;    
  public String[] myRemoteImages = { ....};
  ImageView i = new ImageView(GalleryActivity.this);

  @Override
  protected String doInBackground(String... arg0) { 
      try { 
          URL aURL = new URL(myRemoteImages[Integer.parseInt(arg0[0])]);
          URLConnection conn = aURL.openConnection();

          conn.connect();
          InputStream is = conn.getInputStream();
          BufferedInputStream bis = new BufferedInputStream(is);
          bm = bitmapFactory.decodeStream(bis);
          bis.close();
          is.close();   
      }

  @Override     
  protected void onPostExecute(String result) {
     i.setImageBitmap(bm);
     i.setScaleType(ImageView.ScaleType.FIT_CENTER);
     i.setLayoutParams(new Gallery.LayoutParams(150, 150));
     // i have to return this Image view to the calling function        
     super.onPostExecute(result);   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:29:56.803

该库将解决您的问题：

[https://github.com/xtremelabs/xl-image_utils_lib-android](https://github.com/xtremelabs/xl-image_utils_lib-android)

将 JAR 从该 repo 拉到您的项目中。

在您的 Activity/Fragment 中实例化一个 ImageLoader 并将其传递给适配器。

调用 imageLoader.loadImage(imageView, url)，一切都由该系统为您完成。

wiki 可以向您展示如何插入它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:24:03.560

看：[ListView中图像的延迟加载](https://stackoverflow.com/questions/541966/how-do-i-do-a-lazy-load-of-images-in-listview)

不管如何显示数据，你的适配器都是一样的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T11:25:28.257

你应该从doingBackground()返回bm；

```
@Override
protected String doInBackground(String... arg0) {
    try{
        URL aURL = new URL(myRemoteImages[Integer.parseInt(arg0[0])]);
        URLConnection conn = aURL.openConnection();
        conn.connect();
        InputStream is = conn.getInputStream();
        BufferedInputStream bis = new BufferedInputStream(is);
        bm = bitmapFactory.decodeStream(bis);
        bis.close();
        is.close();
        return bm;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T11:31:20.813

将您的 Asynctask 更改为

```
AsyncTask<String, Integer, Bitmap> 
```

这将返回您 Bitmap 和 onPostExecute 使用 Bitmap 您已经在传递位置，所以 onPostExecute 您可以

```
yourlist.getItem(your position) and set the bitmap 
```

# jquery - jQuery隐藏显示奇怪的行为

> ID：14357012
> 
> 赞同：1
> 
> 时间：2013-01-16T11:12:02.150
> 
> 标签：jquery

我遇到了一个以前从未见过的 jQuery 问题。我的脚本隐藏了某些包装器，这适用于 Firefox 和 Chrome，但不适用于 IE。奇怪的是，当我打开 IE 控制台并刷新页面以查看日志时，它也可以正常工作。它仅在打开开发人员工具刷新时修复！

这是一个控制台片段：

```
$.get('/help-and-advice/purchase-wizard/product-details/' + product_id, function(data) {

          console.log(data);

          $.each(data.show, function() {
            $.each(this, function(index) {
              $('#' + data.show[index]).show();
            });
          });

          $.each(data.hide, function() {
            $.each(this, function(index) {
              $('#' + data.hide[index]).hide();
            });
          }); 
```

在控制台日志中，我想要隐藏的包装器也列在 data.show 对象中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:14:57.810

当存在控制台语句且控制台未打开时，IE 失败

将其更改为

```
window.console && console.log(...) 
```

或将其注释掉或记得在测试前按 F12

* * *

我有这个[jsfiddle](http://jsfiddle.net/mplungjan/mQPgz/)：

简单版：

```
if (!window.console) window.console={ log:function(str) { alert(str) } } 
```

* * *

处理逗号分隔参数的更复杂的版本 - 它不会解包对象，但可以处理一层复杂性

```
if (!window.console) 
  window.console={ log:function() { 
    var text = [];
    for (var a,i=0;i<arguments.length;i++) {
      a=arguments[i];
      text.push(typeof a+": "+(typeof a == "object" ? a.toString():a));
    }
    alert(text.join('\n'))
  }
}

console.log("test",new Date()) 
```

# android - 从画布中获取两个合并的位图

> ID：14357013
> 
> 赞同：2
> 
> 时间：2013-01-16T11:12:07.377
> 
> 标签：android, bitmap, android-canvas

我有两个并排绘制在一个画布上的位图。如何再次获得合并的位图。我认为不可能从画布上得到它们。从画布中获取合并位图的位图的其他选项是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T09:55:41.320

可以得到合并位图的位图对象。

首先创建一个带有空白位图的画布

```
 Bitmap.Config conf = Bitmap.Config.ARGB_8888; 
 Bitmap bitmap_object = Bitmap.createBitmap(width, height, conf); 
 Canvas canvas_object = new Canvas(bitmap_object); 
```

现在使用**drawBitmap (Bitmap bitmap, Matrix matrix, Paint paint)** api在这个**canvas_object上绘制你的位图，**

 **现在使用**bitmap_object**来获取合并的位图..**

# c# - 有什么方法可以在不提交到 Windows 商店的情况下测试应用内购买？

> ID：14357018
> 
> 赞同：3
> 
> 时间：2013-01-16T11:12:14.190
> 
> 标签：c#, windows-runtime, windows-store-apps, windows-store

我们正在为我们的客户开发一个白标解决方案，但我们需要测试各种应用内购买方法才能继续。我们知道 CurrentAppSimulator，但是由于我们需要在服务器端验证收据（因此我们需要为此与 MS 服务器对话），所以我们不能使用它。另外，服务器不是我们做的，而是客户自己做的。

由于没有 Windows Store 应用程序的试驾，我们有点卡在这里。我们无法对此进行测试，或者有吗？

# html - 隐藏表格 TR 但保持 TH 显示

> ID：14357022
> 
> 赞同：0
> 
> 时间：2013-01-16T11:12:23.580
> 
> 标签：html, css, html-table

html代码：

```
<table class='cTable'><th>Title</th>
<tr><td>Item1</td></tr>
<tr><td>Item2</td></tr>
<tr><td>Item3</td></tr>
</table> 
```

CSS 代码：

```
.cTable tr {
    display: none;
} 
```

这东西，不仅隐藏了行，还隐藏了头部。有什么办法可以避免吗？

**如果可能，我不想`display: none;`在每个 tr 元素上**放置 a 。

jsfiddle：

[http://jsfiddle.net/vT4r9/1/](http://jsfiddle.net/vT4r9/1/)

我试过这个：

html

```
<table class='cTable'><th class='cTableTH'>Title</th>
<tr><td>Item1</td></tr>
<tr><td>Item2</td></tr>
<tr><td>Item3</td></tr>
</table> 
```

CSS：

```
.cTable tr {
    display: none;
}

.cTableTH {
    display: block;
} 
```

但也不起作用。

[http://jsfiddle.net/vT4r9/4/](http://jsfiddle.net/vT4r9/4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:18:03.080

你的 HTML 是错误的。以这种方式更改它：

### HTML

```
<table class='cTable'>
<tr><th class='cTableTH'>Title</th></tr>
<tr><td>Item1</td></tr>
<tr><td>Item2</td></tr>
<tr><td>Item3</td></tr>
</table> 
```

### CSS

```
.cTable tr {
    display: none;
}

.cTable tr:first-child {
    display: table-row;
} 
```

### 解释

`<th>`直接在里面给`<table>`是错误的。即使你给予，它也会进入`<tr>`然后显示出来。无论你`<th>`在隐藏中给予什么`<tr>`都行不通。

### 小提琴：http: [//jsfiddle.net/vT4r9/11/](http://jsfiddle.net/vT4r9/11/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:18:31.803

你应该覆盖`th`并`tr`改变css

```
 .cTable tr td{ display: none; } 
```

**[演示](http://jsfiddle.net/vT4r9/15/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T11:19:24.313

你可以尝试使用[:first-child](https://developer.mozilla.org/En/CSS/%3afirst-child)

## CSS：

```
 cTable tr:not(:first-child){
           display:none;
  } 
```

### HTML：

```
 <table class='cTable'><tr><th class='cTableTH'>Title</th></tr>
 <tr><td>Item1</td></tr>
 <tr><td>Item2</td></tr>
 <tr><td>Item3</td></tr>
 </table> 
```

它似乎在这里工作：http: [//jsfiddle.net/vT4r9/14/](http://jsfiddle.net/vT4r9/14/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T11:24:37.037

这是不正确的HTML。定义表的[正确方法](http://www.w3.org/TR/html401/struct/tables.html#h-11.2.3)是使用`<thead>`and `<tbody>`。试试这个：

```
<table class='cTable'>
  <thead>Title</thead>
  <tbody>
    <tr><td>Item1</td></tr>
    <tr><td>Item2</td></tr>
    <tr><td>Item3</td></tr>
  </tbody>
</table> 
```

使用这个 CSS：

```
.cTable tbody tr {
  display:none;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T11:20:01.413

那这个呢？

```
.cTable td {
  display: none;
} 
```

隐藏单元格而不是行应该就足够了。此外，您应该像其他人已经指出的那样将其包装`th`在 a中。`tr`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T11:24:46.397

我认为你可以隐藏这样的列：

```
<style>
 .cTable td {
    display: none;
 }
 </style> 
```

# codeigniter - 出于安全原因，error_reporting() 已被禁用

> ID：14357025
> 
> 赞同：3
> 
> 时间：2013-01-16T11:12:27.563
> 
> 标签：codeigniter, hosting, php

我在 codeigniter 框架中创建了一个项目并将其上传到主机，主机表示该站点正在快速填充服务器的日志文件。

所以我检查了错误日志，对于我收到的每个请求：

```
error_reporting() has been disabled for security reasons /index.php on line 36
set_error_handler() has been disabled for security reasons /system/core/CodeIgniter.php on line 72 
```

我问主持人是否可以打开这些选项，因为 codeigniter 需要它们来处理错误，但他们回答说我必须编辑我的代码才能在他们的服务器上禁用这些功能。

我不想编辑codeigniter的核心文件，我真的不明白为什么它被禁用。你们中的任何人都知道解决此错误的简单解决方案，或者一些参数告诉主机为我更改此设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:24:57.493

Web 主机可能禁用该`error_reporting`功能的原因是为了防止错误的 PHP 程序向最终用户输出崩溃消息，黑客可以利用这些消息来计算如何访问服务器。PHP 崩溃消息包含许多可能对黑客有用的详细信息，包括目录路径和有关正在使用的框架软件的信息。

禁用生产站点的错误报告通常被认为是一种很好的做法，这样这些消息就不会显示给最终用户。打开它进行开发，关闭它进行生产。

这解释了您的主机禁用它的原因。

至于如何防止“错误报告禁用”消息进入日志：好吧，不幸的是，你不能，除非你编辑代码以删除对`error_reporting`.

CodeIgniter 手册包含此页面：[http ://ellislab.com/codeigniter/user-guide/general/errors.html](http://ellislab.com/codeigniter/user-guide/general/errors.html)

在此页面上，它声明`error_reporting`代码位于 中`index.php`，并且他们鼓励您对其进行编辑，以在您的代码投入生产后停止报告错误。

换句话说，CodeIgniter 说：“请改变这个”。所以不要担心不想改变核心文件（`index.php`反正不是真正的核心文件）。

# php - 谷歌地图根据经纬度值变化变化

> ID：14357028
> 
> 赞同：0
> 
> 时间：2013-01-16T11:12:39.883
> 
> 标签：php, google-maps

当前使用此 Javascript -

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>

    <script language='javascript'> 
    window.onload = function() { 
        var latlng = new google.maps.LatLng(<?php echo $lat; ?>, <?php echo $long; ?>);
        var map = new google.maps.Map(document.getElementById('map'), {
          center: latlng,
            zoom: 11,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        });
        var marker = new google.maps.Marker({
            position: latlng,
            map: map,
            title: 'Set lat/lon values for this property',
            draggable: true
        });
        google.maps.event.addListener(marker, 'dragend', function(a) {
            console.log(a);
                document.getElementById("Latitude").value = this.getPosition().lat();
                document.getElementById("Longitude").value = this.getPosition().lng();  

            });
        };
     </script> 
```

它工作正常，但我希望地图位置在纬度和经度值改变时改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:17:50.310

如果您使用 jQuery，这非常简单。

```
$('#Latitude,#Longitude').click(function(){
    var lat = $('#Latitude').val();
    var lng = $('#Longitude').val();

    var latlng = new google.maps.LatLng( lat, lng);

    map.panTo( latlng );

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-07T09:13:54.947

```
 <html> 
    <body>
    <input type="number"  id="txtlat" name="txtlat" placeholder="Latitude">
     <input type="number" id="txtlng" name="txtlng" placeholder="Longitude">
     <button onclick="fncheck()">Click</button>
    </body>
   <script>
     var latlng = new google.maps.LatLng(x, y);
  </script>
  </html> 
```

# c# - 在 url 中显示带有特殊字符的图像

> ID：14357029
> 
> 赞同：0
> 
> 时间：2013-01-16T11:12:42.910
> 
> 标签：c#, asp.net, special-characters

带着[这个问题](https://stackoverflow.com/questions/14332397/bind-directory-enumeratefiles-to-a-repeater-using-a-generic-list)，我正在阅读一个图像文件夹，然后在网页上显示这些图像。

目前，除了带有特殊字符的图像外，一切正常。

带有“&”符号的名称显示损坏的图像链接。有什么方法可以显示图像而无需更改图像名称？

我试过了

```
var images =
            from image in Directory.EnumerateFiles(Server.MapPath("~/_resources/game_icon"), "*.*", SearchOption.AllDirectories)
            let filename = Path.GetFileNameWithoutExtension(image)
            let relativeLocation = Path.GetFullPath(image).Replace(Server.MapPath("~"), string.Empty).Replace("\\", "/")//.Replace(Path.GetFileName(image), HttpUtility.UrlEncode(Path.GetFileName(image)))
            let splitted= string.Join("/", relativeLocation.Split('/').ToList().Select(p => Server.UrlEncode(p)))
            let url = ResolveUrl("~/" + splitted)
            where image.ToLower().Contains(txtGameName.Text.ToLower())
            select new
            {
                Filename = filename,
                Url = url
            }; 
```

但是所有图像都破裂了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:22:49.383

我相信在这种情况下最好使用 Server.UrlEncode。这是一个链接[http://msdn.microsoft.com/en-us/library/zttxte6w(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/zttxte6w(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:14:18.570

在图像名称上使用 HttpServerUtility.HtmlEncode。请参阅[http://msdn.microsoft.com/en-us/library/w3te6wfz.aspx](http://msdn.microsoft.com/en-us/library/w3te6wfz.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T12:12:55.547

我发现这只是一个`A potentially dangerous Request.Path value was detected from the client`错误。

使用

```
<system.web>
    <httpRuntime requestPathInvalidCharacters="&lt;,&gt;,%,&amp;,:,\,?" />
</system.web> 
```

修复所有问题。

# javascript - Javascript：在没有 .preventDefault() 调用的情况下跟踪触摸事件

> ID：14357033
> 
> 赞同：1
> 
> 时间：2013-01-16T11:12:53.660
> 
> 标签：javascript, mobile, touch-event

我想在任何移动浏览器中跟踪手指，而不取消默认行为（即页面滚动）。

所以我正在做以下事情：

```
document.addEventListener('touchmove', function (ev) {
  // fingers position tracking ode
}, false); 
```

现在，如果我想连续跟踪 touchmoves，我必须在该函数中调用 ev.preventDefault()，这也会禁用页面的滚动。如果我不调用它，我只会触发一个 touchmove 事件，之后我可以移动我的手指，无论我想要多久， - 不会有其他 touchmove 事件（直到我释放我的手指并开始一个新的触摸/移动序列又是）。

我的问题基本上是：如何在不干扰默认浏览器行为的情况下连续跟踪屏幕上的手指（绑定到浏览器“窗口”）。我想相信这是可能的:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:03:06.940

不幸的是，你最好的选择是接管你自己的滚动。[幸运的是， http://cubiq.org/dropbox/iscroll4/examples/simple/](http://cubiq.org/dropbox/iscroll4/examples/simple/)有一个插件

# jquery - 平滑 div 滚动：最后一张图片落到底线

> ID：14357038
> 
> 赞同：0
> 
> 时间：2013-01-16T11:13:03.817
> 
> 标签：jquery, jquery-plugins, smooth-scrolling

我的卷轴与正常配置完美配合。

```
#makeMeScrollable{
  width:100%;
  height: 500px;
  position:absolute;
  left:0;
  top:110px;
}

#makeMeScrollable div.scrollableArea img{
  position: relative;
  float: left;
  margin: 0 5px 0 0;
  padding: 0; 
} 
```

但是当窗口高度小于 768px 时，我在 CSS 中做了如下改动：

```
@media only screen and (max-height : 768px) {
    #makeMeScrollable{
      height: 500px;
    }

    #makeMeScrollable div.scrollableArea img{
        height: 400px
    }
} 
```

在 Chrome 上运行良好，但在 Firefox 和 IE 上，最后一张图片掉到了底线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T07:07:15.430

如果您使用填充而不是边距更改图像的 CSS 会发生什么？像这样：

```
#makeMeScrollable div.scrollableArea img{
  position: relative;
  float: left;
  margin: 0;
  padding: 0 5px 0 0; 
} 
```

这在过去有时对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:43:05.997

好的，我以某种方式解决了这个问题：

```
$(document).ready(function () {
            $("#makeMeScrollable").smoothDivScroll({                 
            manualContinuousScrolling: false,
            autoScrollingMode: "onStart",
            autoScrollingDirection: "backAndForth",
            autoScrollingStep: 1
        });
    }); 
```

这是第一个初始化它的脚本。我希望图像来回走动。

我这样做了，现在问题已经解决了：

```
$(document).ready(function () {
        $("#makeMeScrollable").smoothDivScroll({                 
            manualContinuousScrolling: true,
            autoScrollingMode: "onStart",
            autoScrollingStep: 1
        });
    }); 
```

# haskell - Haskell 非尾递归

> ID：14357039
> 
> 赞同：1
> 
> 时间：2013-01-16T11:13:04.117
> 
> 标签：haskell

我想知道这是否代表尾递归。如果不是，我该怎么做。

```
 countP :: [a] -> (a->Bool) -> Int
 countP [] _ = 0
 countP (x:xs) p = countP_aux (x:xs) p 0

 countP_aux [] _ _ = 0
 countP_aux (x:xs) p acumul
                        |p x==True = (countP_aux xs p (acumul))+1
                        |otherwise = (countP_aux xs p (acumul))

  countP [1,2,3] (>0)
  3
  (72 reductions, 95 cells) 
```

此练习显示列表中有多少值由 p 条件验证。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T11:29:31.127

这不是尾递归，因为

```
(countP_aux xs p (acumul))+1 
```

尾调用应该返回递归调用的结果，而不是用递归调用的结果进行计算。

您可以使用执行附加工作的累加器将非尾递归函数转换为尾递归，即

假设您有一个简单的计数功能

```
f a
  | a < 1 = 0 
  | otherwise = f (a-1) + 1 
```

您可以像这样使其尾递归：

```
f' acc a = 
  | a < 1 = acc 
  | otherwise = f' (acc + 1) (a-1)
f = f' 0 
```

# c# - 如何在 Windows Phone 7.1 上添加计时器？

> ID：14357044
> 
> 赞同：0
> 
> 时间：2013-01-16T11:13:19.183
> 
> 标签：c#, windows-phone-7.1

我正在寻找一种方法来添加一个计时器（或秒表），它将在应用程序启动或单击按钮的那一刻从 0 开始计数，并且即使在用户浏览不同页面后也会继续计数，然后能够显示应用程序的最后一页已经过去了多少时间。我一直在搞乱[DispatcherTimer](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer%28v=VS.95%29.aspx)类，但老实说，我很难理解它。任何帮助，甚至是对正确方向的点头都将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:04:43.570

您只需存储应用启动的时间，然后从存储的值中减去当前时间。

在您的 App.cs 存储应用程序启动的时间：

```
 private static DateTime _starttime = DateTime.Now;

    public static DateTime StartTime
    {
        get
        {
            return _starttime;
        }
    } 
```

在您的页面或任何您需要获取应用程序运行的当前时间的地方，您只需从存储的时间中减去当前时间。我在按钮单击处理程序中使用了它，见下文：

```
 private void timebutton_Click(object sender, RoutedEventArgs e)
    {
        TimeSpan time = (DateTime.Now - App.StartTime);

        this.timenow.Text = string.Format("{0:D2}:{1:D2}:{2:D2}", time.Hours, time.Minutes, time.Seconds);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:08:32.580

如果您想使用时间，您可以在显示时间的页面上添加一个！

将此代码添加到构造函数或您要激活计时器的其他位置。（ App.StartTime 与我在另一个答案中写的相同）

```
 DispatcherTimer timer = new DispatcherTimer();

        timer.Tick +=
            delegate(object s, EventArgs args)
            {
                TimeSpan time = (DateTime.Now - App.StartTime);

                this.timenow.Text = string.Format("{0:D2}:{1:D2}:{2:D2}", time.Hours, time.Minutes, time.Seconds);
            };

        timer.Interval = new TimeSpan(0, 0, 1); // one second
        timer.Start(); 
```

# wpf - 从另一个视图模型访问属性

> ID：14357049
> 
> 赞同：2
> 
> 时间：2013-01-16T11:13:27.370
> 
> 标签：wpf, mvvm, properties, viewmodel

我的 WPF 应用程序遵循 MVVM 模式。共有三种观点：

*   主窗口

    *   登录视图
    *   项目查看

`LoginView`并且`ProjectsView`是由`MainWindow`. 两个视图都分配了它们的视图模型。`LoginViewModel`定义`ProjectList`通过调用 web 服务设置的属性。现在`LoginViewModel`需要访问`ProjectList`财产和其他人。

我知道一种解决方案可能是重新设计，以便只有一个视图和一个视图模型。我会这样做作为备份解决方案，但我不赞成这样做。

这应该怎么做？我应该在 Prism 中使用某种 EventAggregator 吗？还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T12:50:14.697

因此，如果我清楚地理解，`ProjectList`应该从“LoginViewModel”和“ProjectsViewModel”访问属性。我会尝试在“MainViewModel”中实现它，以便子视图模型可以自然地访问它。

IEventAggregator 就像一个盒子，您可以在其中添加事件，或者查找和订阅一个事件，所以我会说这不是您所需要的。无论如何，您可以在 中注册您的自定义界面（框类型）`UnitySingleton.Container`，这将`ProjectList`使其在任何地方都可以访问。当作为独立程序集的模块需要相互通信时，这种方法很有意义。如果这在您的情况下是否过大是您应该决定的事情，我个人会选择“将其放入 mainviewmodel”选项。

**-- 样品 --** (未测试)

```
public class MainViewModel : ViewModelBase
{
    public MainViewModel()
    {
        LoginVM = new LoginViewModel(this);
        ProjectsVM = new ProjectsViewModel(this);
        RetrieveProjectList();
    }

    public LoginViewModel LoginVM { get; private set; }

    public ProjectsViewModel ProjectsVM { get; private set; }

    public object ProjectList { get; private set; }

    private void RetrieveProjectList()
    {
        ProjectList = ....
    }
} 
```

如您所见，它非常简单，`LoginVM`并且`ProjectsVM`将保存对`MainViewModel`创建它们的引用，因此允许它们访问`ProjectList`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T15:40:46.693

> 这应该怎么做？我应该在 Prism 中使用某种 EventAggregator 吗？还是有其他方法可以做到这一点？

这里有一些想法：

*   您可以创建两个视图模型都继承自的视图模型类。这个基类将包含共享属性。
*   创建一个包含共享属性的静态类。
*   使用依赖注入，创建一个包含属性的类，将其注册为容器中的单例并将其注入到视图模型的 ctors 中。

另外，我相信它`EventAggregator`最适合模块/程序集之间的通信。在您的示例中，似乎所有内容都在同一个程序集中。

# c# - 使用 LINQ 查询可空值

> ID：14357053
> 
> 赞同：1
> 
> 时间：2013-01-16T11:13:36.513
> 
> 标签：c#, .net, linq

我试图弄清楚如何在某些值可以为空的 LINQ 中进行查询。

接下来是我的桌子：

```
ID int
Key1 int
Key2 int?
Key3 int?
Value string

uniq = Key1+Key2+Key3+Value 
```

现在我需要根据唯一约束检查​​现有记录是否已经存在。

我尝试了以下方法：

```
Object tmp = model.table.FirstOrDefault(row => row.Key1 == newItem.Key1 &&
             (row.Key2.HasValue && newItem.Key2.HasValue && row.Key2.Value == newItem.Key2.Value) &&
             (row.Key3.HasValue && newItem.Key3.HasValue && row.Key3.Value == newItem.Key3.Value) &&
             row.Value == newItem.Value); 
```

和：

```
Object tmp = model.table.FirstOrDefault(row => row.Key1 == newItem.Key1 &&
             row.Key2 == newItem.Key2 &&
             row.Key3 == newItem.Key3 &&
             row.Value == newItem.Value); 
```

但是当其中一个键为空时，两者都没有得到正确的结果！

有没有办法编写正确的 LINQ 查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:54:48.717

```
object tmp= model.table.FirstOrDefault(t => 
    t.Key1 == newItem.Key1 
    && ((!t.Key2.HasValue & !newItem.Key2.HasValue) 
        | t.Key2.Value == newItem.Key2.Value)                             
    && ((!t.Key3.HasValue & !newItem.Key3.HasValue) 
        | t.Key3.Value == newItem.Key3.Value) && t.Value == newItem.Value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:47:09.560

前段时间，我写了一个小函数来处理这些情况：

```
Private Function EqualOrBothNull(ByVal int1 As Int32?, ByVal int2 As Int32?) As Boolean
    Select Case True
        Case (int1 Is Nothing AndAlso int2 Is Nothing)
            Return True
        Case (int1 Is Nothing AndAlso int2 IsNot Nothing) OrElse (int1 IsNot Nothing AndAlso int2 Is Nothing)
            Return False
        Case (int1 IsNot Nothing AndAlso int2 IsNot Nothing)
            Return int1 = int2
    End Select
End Function 
```

它在 VB.NET 中，但在 C# 中转换它应该很简单：

```
private bool EqualOrBothNull(Nullable<Int32> int1, Nullable<Int32> int2) {
    switch (true) {
        case (int1 == null && int2 == null):
            return true;
        case (int1 == null && int2 != null) || (int1 != null && int2 == null):
            return false;
        case (int1 != null && int2 != null):
            return int1 == int2;
    }
} 
```

然后，您可以简单地编写：

```
Object tmp = model.table.FirstOrDefault(row =>
                      EqualOrBothNull(row.Key1, newItem.Key1) &&
                      EqualOrBothNull(row.Key2, newItem.Key2) &&
                      EqualOrBothNull(row.Key3, newItem.Key3) &&
                      EqualOrBothNull(row.Value, newItem.Value)); 
```

**要回复对我的回答的几条评论：**

至少在 VB.NET 中，两个 Nullable(Of T) 的比较总是计算为**布尔值？**如果其中至少一个没有值，则值为**Nothing ：**

![在此处输入图像描述](../Images/3548cde59699462746fc62d5c60066da.png)

而 NO，`a = b`不仅仅是 VB.NET 中的一个作业。

运算符`=`由编译器在*assignment*和*comparison*之间自动切换。

此外，在*Quickwatch 模式下*，它**总是被**解析为比较。

**C# 的行为与 VB 不同：**

刚刚检查过，在 C# 中，简单`==`操作数的行为就像您期望的那样（就像*Ilya Ivanov*和*Konrad Morawski*在评论中出现的那样），因此在这个问题的场景中**不需要使用 HasValue 。**

# three.js - 加载多个图像

> ID：14357058
> 
> 赞同：1
> 
> 时间：2013-01-16T11:13:49.493
> 
> 标签：three.js

如何将一组具有不同位置的图像加载到 webGL 渲染器？我有 4 个图像（单个图像的一部分）每个图像的大小固定为 256x256，并且有可用的位置信息 image1 位于位置 0,0 image 2 - pos(0,256) image3 - pos(256,0) image4 - pos(256 , 256)

如何在threejs中正确加载它们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:02:14.373

您可以使用画布作为纹理源。例如，如果您想以 512x512 纹理排列图块，您可以执行以下操作：

```
var canvas = document.createElement('canvas');
var context = canvas.getContext('2d');

// load tiles into a canvas
context.drawImage(image0, 0, 0, 256, 256);
context.drawImage(image1, 256, 0, 256, 256);
context.drawImage(image2, 0, 256, 256, 256);
context.drawImage(image3, 256, 256, 256, 256);

// tiles merged into a single image attached to texture
var texture = new THREE.Texture(canvas); 
```

本例中drawImage的参数为：imageSource、x-position、y-position、width、height。

您可以在此处阅读有关 drawImage 功能的信息：http: [//www.w3schools.com/tags/canvas_drawimage.asp](http://www.w3schools.com/tags/canvas_drawimage.asp)

这样，您的 4 个图像将作为单个纹理加载，您可以在平面（或任何类型的几何体）上使用。除了带有画布的图像之外，您还有更多选择，您可以简单地用颜色填充画布，在图像之间留出空白空间等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T00:00:46.810

会有一些背景吗？

如果图像太小，最好将它们加入并加载为单张图片。

一般来说，您可以将带有纹理的 THREE.Plane 作为您的图像。像这样的东西：

```
var texture = THREE.ImageUtils.loadTexture( "image.png" );
texture.minFilter = texture.magFilter = THREE.LinearFilter;      //If you wish to have some filtering when moveing camera
var plane = new THREE.Mesh( new THREE.PlaneGeometry( 256, 256 ),
        new THREE.MeshLambertMaterial( { map: texture} ) );
plane.position.set( 0, 0, 0 );                                   //Different for each image 
```

# ios - 无效的 Web 服务调用，参数 Objective C 的缺失值

> ID：14357061
> 
> 赞同：0
> 
> 时间：2013-01-16T11:14:02.067
> 
> 标签：ios, objective-c, web-services, http-headers

从我的 iPhone 应用程序中，我正在调用 ASP.NET Web 服务。下面是我的代码

```
NSString *urlString = @"http://tbtesting/teambinder5/KEY9XXXXXX-cXXe-49XX2-acca-2XXXXXXXa9/Dashboard/DashboardWidgets.asmx/GetAnnouncement";
NSURL *url = [NSURL URLWithString:urlString];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
[request setHTTPMethod:@"POST"];
[request setValue:@"*/*" forHTTPHeaderField:@"Accept"];
[request setValue:@"application/json; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[request setValue:@"en-us" forHTTPHeaderField:@"Accept-Language"];
[request setValue:@"gzip, deflate" forHTTPHeaderField:@"Accept-Encoding"];
[request setValue:@"20" forHTTPHeaderField:@"Content-Length"];
//[request setValue:@"3" forHTTPHeaderField:@"announceIntKey"];

NSError *error = nil;
NSURLResponse *response = [[NSURLResponse alloc] init];
NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
if (error) {
    NSLog(@"Following error occured: %@", error.localizedDescription);
}
else {
    NSString *returnValue = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    NSLog(@"message: %@", returnValue);
} 
```

这是取自提琴手的标题。

```
POST http://tbtesting/teambinder5/KEY9XXXXXX-cXXe-49XX2-acca-2XXXXXXXa9/Dashboard/DashboardWidgets.asmx/GetAnnouncement HTTP/1.1
Accept: */*
Accept-Language: en-us
Content-Type: application/json; charset=utf-8
Accept-Encoding: gzip, deflate
Content-Length: 20

{"announceIntKey":3} 
```

我收到以下错误消息。

**"Message":"无效的 Web 服务调用，缺少参数值：\u0027announceIntKey\u0027。"**

在 SO 上进行了一些搜索后，我发现了此错误的原因。这是因为我没有传递 the`announceIntKey`和它的值。

虽然我知道原因，但我对如何纠正它有点无能为力。由于它看起来像一个对象文字，因此您不能像传递任何其他标头值一样传递它。我在这里遇到的所有示例代码都是针对 jQuery 或其他语言的。

我的问题是如何在 Objective C 中传递这个值？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:21:02.600

看起来您正在发送 application/json 的内容类型，因此有理由将值作为`POST`包含`JSON`主体的一部分传递。

您需要将其添加到您的请求正文中。您不需要设置内容长度，因为 NSMutableURLRequest 将为您管理它。

```
NSString *body = "{\"announceIntKey\" : VALUE}";
[request setHTTPBody:[body dataUsingEncoding:NSASCIIStringEncoding]]; 
```

您需要`VALUE`用实际进入`announceIntKey`.

# c# - 如何使用 RhinoMocks 测试带有特定参数的方法调用？

> ID：14357064
> 
> 赞同：1
> 
> 时间：2013-01-16T11:14:08.663
> 
> 标签：c#, unit-testing, nunit, rhino-mocks

我使用 RhinoMocks 进行模拟/存根，使用 Nunit 框架进行单元测试。

我有以下课程

```
 class A
    {
        private int data = -1;

        public void Initialize (int data)
        {
            this.data = data;
        }

        public void CallA()
        {
            if (data == -1) throw new InvalidArgumentException("data has invalid value -1");
            try
            {

                A1("a1");
                A2("a2");
            }
            catch (AException e)
            {
                throw;
            }  

            catch (Exception e)
            {
                throw new AException(ErrorCode.UnknownException, e);
            }  
        }
        private void A1(string item)
        {
        }

        private void A2(string item)
        {
        }

    } 
```

我正在努力遵循测试用例：

1.  InvalidAgrumentException ：如果`Initialized`未调用任一方法或将 -1 作为参数传递给`Initialized`. 数据是私有的因此不能被模拟（直到使用诸如[TypeMock 隔离](http://www.typemock.com/isolator-product-page)器之类的库来执行[IL Weaving](https://stackoverflow.com/questions/189359/what-is-il-weaving)）。要引发此异常，一种选择是调用`Initialized`我不确定是否正确的方法？（因为数据也可以从其他地方设置为-1。虽然这不是问题，但需要额外的函数调用。）

2.  验证A1是用“a1”参数调用的，A2是用“a2”参数调用的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T11:38:54.840

丹尼尔提出了一个很好的观点，我只想稍微扩展他的答案。让您测试依赖于私有方法调用会创建一个非常脆弱的测试套件。私有方法是实现细节，您应该始终安全地根据内部实现的更改更改它们，而不是观察 10-20 次测试的失败。

方法的另一点`Initilize`——如果很难测试想象使用你的类有多难。罗伯特马丁在他的一本书中提出了一个很好的观点，该方法没有说明之前应该调用哪些其他方法以及以何种顺序调用。

例如，在您的情况下，`public void CallA()`没有说明为什么应该调用 args 以及何时`Initialize`调用。为什么不`Initialize`使用输入参数创建构造函数或从构造函数调用 Initialize。现在你确定它已经被调用了。还有一点是关于幻数`-1`的。

很抱歉批评，但我曾使用过这样的设计，无论您使用什么测试\模拟框架，都很难测试它们。您可以模拟`private`方法，也可以存根静态方法调用，但这一切都以良好的设计而告终，而不是模拟框架的力量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T11:20:33.737

你不能那样做。

模拟框架用于模拟您要测试的类的依赖项。模拟类本身是没有意义的，因为这意味着你测试的是模拟而不是你的类。

此外，验证您的类中的私有方法是否已被调用也是不正确的。您需要以其他方式验证，两种常见的方法是：

1.  验证类是否处于正确状态
2.  验证已调用模拟依赖项上的某个方法

您可以并且应该使用哪一个主要取决于您要测试的类。

# c++ - 用 new() 初始化一个 int[][]

> ID：14357067
> 
> 赞同：1
> 
> 时间：2013-01-16T11:14:20.147
> 
> 标签：c++

我是一个 C++ 新手。在学习的过程中，我遇到了这个。

如果我有这样的指针

`int (*a)[2][3]`

cdecl.org 将其描述为`declare a as pointer to array 2 of array 3 of int:`

当我尝试

`int x[2][3];`

`a = &x;`

这行得通。

我的问题是如何`a`在使用 new() 时进行初始化，例如

`a = new int [] [];`

我尝试了一些组合，但没有完全正确。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T11:16:46.773

您必须分两步完成 - 首先分配一个指向指针的指针数组（动态分配的数组），然后依次分配它们中的每一个。总的来说，我相信一个更好的选择就是简单地使用——这是做这类事情`std::vector`的首选方式。`C++`

这里仍然是一个关于如何实现你想要的例子：

```
int a**;
a = new int*[2];
for (int i =0; i< 2;++i){
  a[i] = new int[3]
}

... use them ...
// Don't forget to free the memory!
for (int i = 0; i< 2; ++i) {
  delete [] a[i];
}

delete [] a; 
```

编辑：并按照默认要求 - 矢量版本：

```
std::vector<std::vector<int> > a(2, std::vector<int>(3,0));

// Use a and C++ will take care to free the memory. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T11:32:49.143

这可能不是您要寻找的答案，但您需要的是一个返回类型为`(*)[2][3]` This 的新表达式，这很容易做到；例如，这是 的返回类型`new int [n][2][3]`。这样做，`a`将指向 [3] int 数组的 [2] 数组的第一个元素。总而言之，一个三维数组。

问题是它`new`没有返回指向顶级数组类型的指针；它返回一个指向数组第一个元素的指针。因此，如果你这样做`new int[2][3]`，表达式 会*分配*一个由 2 个 3 个 int 组成的数组，但它返回一个指向一个由 3 个 int ( `int (*a)[3]`) 组成的数组的指针，因为在 C++ 中，数组被破坏了（出于 C 兼容性的原因）。而且没有办法强迫它做其他事情。所以如果你想让它返回一个指向二维数组的指针，你必须分配一个三维数组。（第一个维度可以是 1，这样`new [1][2][3]`就可以了，并且有效地只分配一个`[2][3]`.）

更好的解决方案可能是将数组包装在 a 中`struct`：

```
struct Array
{
    int data[2][3];
}; 
```

然后您可以使用`new Array`，一切都按预期工作。除了访问数组所需的语法会有所不同。

# linq - Ndepend 查找方法使用的实际数量

> ID：14357068
> 
> 赞同：3
> 
> 时间：2013-01-16T11:14:21.830
> 
> 标签：linq, ndepend, cqlinq

假设我有方法`A.M1`。它被调用了`B.M2`2 次和`B.M3`3 次。我需要找到所有的用法（就像 Resharper 通过查找用法界面所做的那样）。所以方法调用的总和是 5。

以下查询：

`from m in Methods where m.HasAttribute("specific attribute") orderby m.MethodsCallingMe.Count() descending select new { m, m.MethodsCallingMe }`

只给了我 2 种方法 A.M1 的用法。

你能帮我找到用途号码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:28:30.523

使用 NDepend 很难或不可能。NDepends 显示哪些方法正在调用指定的方法，在这种情况下不计算它们，甚至不递归地或通过调用图计算它们。

所以尝试使用其他技术。首先，为什么需要这样的指标？某种方法等级？

无论如何，实现它的一种非常简单的方法是使用 RegEx experssion。您也可以一起使用 NDepend API 或 regex 和 ndepend api。例如，使用 nDepend API 从源代码库中获取所有方法名称，然后对每个方法名称计数匹配使用正则表达式，但方法定义本身除外。

# php - 查找和替换两个可变长度整数之间的连字符 (-)

> ID：14357070
> 
> 赞同：2
> 
> 时间：2013-01-16T11:14:28.810
> 
> 标签：php, regex, text, preg-replace

我有一大段文字，在那个文字中有几次这样的文字`201014120 - 10`。还有带有正常连字符 (-) 的文本。

我想要做的是用逗号替换两个数字之间的连字符，`,`但*不*替换文本中的任何其他连字符。我想用 PHP 的`preg_replace`.

数字不相同，并且每个数字的长度对于所有文本都不会相同。

我尝试了不同类型的正则表达式，包括代码和这个非常好的[网站](http://preg_replace.onlinephpfunctions.com)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:20:31.990

尝试：

```
$str='e-mail 201014120 - 10 e - mail 201014120-10';    
echo preg_replace('/(\d+\s*)-(\s*\d+)/','${1},${2}',$str);

>>> e-mail 201014120 , 10 e - mail 201014120,10 
```

比赛`(\d+\s*)-(\d+\s*)`：

```
\d+ # One or more digits 
\s* # Zero or more white space characters
-   # Literal hypen
()  # Capture group 
```

代替`${1},${2}`

```
${1} # The first captured group
,    # A literal comma
${2} # The second captured group 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:21:39.570

您可以使用[环视](http://www.regular-expressions.info/lookaround.html)来确保只匹配由数字包围的连字符：

```
preg_replace('/(?<=\d)\s*-\s*(?=\d)/', ', ', $input); 
```

`(?<=\d)`是积极的向后看：它只允许正则表达式匹配，如果它前面有一个数字。反之，`(?=\d)`则是积极的前瞻。正则表达式将匹配（并因此替换）连字符周围的任何空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T11:20:34.000

未经测试：

```
preg_replace("/(\d+)-(\d+)/g","$1,$2",$text); 
```

或者，如果您的文本如所述“数字”“空白”“连字符”“空白”“数字”

```
preg_replace("/(\d+\w*)-(\w*\d+)/g","$1,$2",$text); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T11:21:30.843

```
<?php
$string = '201014120 - 10';
$pattern = '/(\d+) - (\d+)/';
$replacement = '$1,$2';
echo preg_replace($pattern, $replacement, $string);
?> 
```

# optimization - 在 10M 记录中检查和查找修改文件的脚本

> ID：14357072
> 
> 赞同：-1
> 
> 时间：2013-01-16T11:14:38.997
> 
> 标签：optimization, hash, md5

我在许多文件夹中有很多小（10KB - 1MB）文件（大约10M），这样的结构：

```
 - LEVEL 1 
  - LEVEL 2
   - LEVEL 3
    - file 1;
    - file 2; 
    ... 
```

（文件存储在 USB3.0 1TB 磁盘上。文件总大小约 700MB）

和文件哈希在同一磁盘（Microsoft Access 2007）上的数据库：

```
 file 1 - hash 1;
 file 2 - hash 2;
 .... 
```

每天我都需要计算每个文件的哈希值并获取已更改文件的列表（如果存在）。

如何编写适当的算法以最小化脚本工作时间？我猜有几个瓶颈：

*   磁盘 I/O - 如何优化磁盘读取？
*   数据库读取问题 - Access 如何处理 10M 行表？
*   CPU - 我需要并行化哈希计算吗？
*   我更喜欢 C#，但也许我需要另一种语言？
*   计算dir的哈希而不是文件更有效吗？

还要别的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:19:27.093

不要重新发明轮子 - [md5deep/hashdeep](http://md5deep.sourceforge.net/)已经存在多年，并且正是这样做的。它是跨平台的，将在 Windows 上运行，并且可以从 C# 作为外部进程调用。

# c# - 如何使用具有未知数量值的 IN 条件进行选择查询

> ID：14357075
> 
> 赞同：4
> 
> 时间：2013-01-16T11:14:47.977
> 
> 标签：c#, asp.net, linq, sql-server-2008

我有两个下拉列表，一个用于项目，第二个用于类别。
我有一个选择 ddproject 我得到 id 的地方，基于这个 id 我必须填充 ddcategory。
表结构[SQL FIDDLE](http://sqlfiddle.com/#!3/682f6/4)

如果我从下拉列表中选择 ProjectOne，这里是简单的查询

```
select  id,name from tbcategory where id in(1,2) 
```

但我的问题是我不知道在这种情况下会有多少价值`in`。

C#：第一次我拆分列名`categoryid`并稍后获取值，这让我感到困惑。
也让我知道是否以正确的方式或任何其他替代方式来实现这一目标

**编辑：** 或者我应该改变我的表结构，如果是，那么应该是什么模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T11:20:38.590

根据您的数据，Category 和 Project 之间存在多：多关系。因此，您需要对另一个 Many:Many 表进行建模，以保存对这种关系进行建模的数据。

[SQL小提琴在这里](http://sqlfiddle.com/#!3/5b434/3)

首先，创建一个新表来保存 Category 和 Project 之间的 Many:Many 关系：

```
create table tbProjectCategory
(
  tbProjectId INT,
  tbCategoryId INT
); 
```

然后，删除 tbProject 中的字符串逗号分隔关系 - 这没有用。相反，将链接插入到 Many Many 表中。例如：

```
insert into tbProjectCategory(tbProjectId, tbCategoryId) values (1, 1), (1, 2); 
```

将项目 1 链接到类别 1 和 2。

然后，要找到项目 1 的所有类别，您需要通过 Many:Many 链接表加入，按项目 ID 过滤：

```
select  cat.id, cat.name 
  from tbcategory cat
  inner join tbProjectCategory prjcat
  on prjcat.tbCategoryId = cat.id
  where prjCat.tbProjectId = 1; 
```

为了简洁起见，我还删除了您的身份列 - 它可以更容易地知道哪些数据记录是链接的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T11:25:39.690

我会创建 M:N 关系表，如：

```
tbProjects2Categories
    IDCategory int;
    IDProject int; 
```

然后就可以查询了：

```
SELECT c.id, c.name FROM tbCategory c JOIN tbProjects2Categories pc 
                ON c.IDCategory = pc.IDCategory 
                WHERE pc.IDProject = @selectedProjectId; 
```

项目和类别之间的关系将如下所示：

> ## ID项目 | ID类别
> 
> ```
>  1     |    1
>      1     |    2
>      1     |    3
>      2     |    1
>      2     |    3 
> ```

这意味着在您的原始架构中：

```
(1,'ProjectOne','Mumbai','1,2,3'); 
(2,'ProjectTwo','USA','1,3'); 
```

*要完成答案：*

在逗号分隔的列表中存储实体关系并不是一个好习惯。您甚至很难拆分该列值并使您的查询正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T11:27:40.033

是的，逗号分隔值不是在数据库中存储关系的好方法。您应该再创建一个表来定义两个原始表之间的关系：

```
create table tbProjectCategory (id int IDENTITY(1,1),projectId int, categoryId int) 
```

然后你可以像这样根据projectId查询它：

```
select * from tbcategory c
  inner join tbProjectCategory pc on c.id = pc.categoryId
where projectId = 1; 
```

请试试这个小提琴：[http ://sqlfiddle.com/#!3/b11acb/2](http://sqlfiddle.com/#!3/b11acb/2)

# c++ - glibc 检测到 ./a.out: munmap_chunk(): invalid pointer - struct C++ 的动态数组

> ID：14357078
> 
> 赞同：1
> 
> 时间：2013-01-16T11:14:52.847
> 
> 标签：c++, arrays, struct

我对使用动态分配的结构数组的非常简单的应用程序有疑问。这是我的代码：

```
#include <iostream>
#include <string>
using namespace std;

struct MySimpleStuct
{
    string text;
    int intVal;
    double doubleVal;
};

int main(int argc, char **argv)
{
    int N;
    cin >> N;
    MySimpleStuct *s = new MySimpleStuct[N];
    delete s;
    return 0;
} 
```

我得到了这些错误：

```
*** glibc detected *** ./a.out: munmap_chunk(): invalid pointer: 0x08f3c00c ***
======= Backtrace: =========
/lib/i386-linux-gnu/libc.so.6(+0x75ee2)[0xb74d5ee2]
/lib/i386-linux-gnu/libc.so.6(+0x765c5)[0xb74d65c5]
/usr/lib/i386-linux-gnu/libstdc++.so.6(_ZdlPv+0x1f)[0xb76d251f]
./a.out[0x80487bf]
/lib/i386-linux-gnu/libc.so.6(__libc_start_main+0xf3)[0xb74794d3]
./a.out[0x80486a1]
======= Memory map: ========
08048000-08049000 r-xp 00000000 08:07 393313     /home/katie/Desktop/Temp/a.out
08049000-0804a000 r--p 00000000 08:07 393313     /home/katie/Desktop/Temp/a.out
0804a000-0804b000 rw-p 00001000 08:07 393313     /home/katie/Desktop/Temp/a.out
08f3c000-08f5d000 rw-p 00000000 00:00 0          [heap]
b7432000-b7434000 rw-p 00000000 00:00 0 
b7434000-b745e000 r-xp 00000000 08:05 659543     /lib/i386-linux-gnu/libm-2.15.so
b745e000-b745f000 r--p 00029000 08:05 659543     /lib/i386-linux-gnu/libm-2.15.so
b745f000-b7460000 rw-p 0002a000 08:05 659543     /lib/i386-linux-gnu/libm-2.15.so
b7460000-b7603000 r-xp 00000000 08:05 655384     /lib/i386-linux-gnu/libc-2.15.so
b7603000-b7604000 ---p 001a3000 08:05 655384     /lib/i386-linux-gnu/libc-2.15.so
b7604000-b7606000 r--p 001a3000 08:05 655384     /lib/i386-linux-gnu/libc-2.15.so
b7606000-b7607000 rw-p 001a5000 08:05 655384     /lib/i386-linux-gnu/libc-2.15.so
b7607000-b760b000 rw-p 00000000 00:00 0 
b760b000-b7627000 r-xp 00000000 08:05 656309     /lib/i386-linux-gnu/libgcc_s.so.1
b7627000-b7628000 r--p 0001b000 08:05 656309     /lib/i386-linux-gnu/libgcc_s.so.1
b7628000-b7629000 rw-p 0001c000 08:05 656309     /lib/i386-linux-gnu/libgcc_s.so.1
b7629000-b7701000 r-xp 00000000 08:05 791499     /usr/lib/i386-linux-gnu/libstdc++.so.6.0.16
b7701000-b7702000 ---p 000d8000 08:05 791499     /usr/lib/i386-linux-gnu/libstdc++.so.6.0.16
b7702000-b7706000 r--p 000d8000 08:05 791499     /usr/lib/i386-linux-gnu/libstdc++.so.6.0.16
b7706000-b7707000 rw-p 000dc000 08:05 791499     /usr/lib/i386-linux-gnu/libstdc++.so.6.0.16
b7707000-b770e000 rw-p 00000000 00:00 0 
b7724000-b7728000 rw-p 00000000 00:00 0 
b7728000-b7729000 r-xp 00000000 00:00 0          [vdso]
b7729000-b7749000 r-xp 00000000 08:05 659544     /lib/i386-linux-gnu/ld-2.15.so
b7749000-b774a000 r--p 0001f000 08:05 659544     /lib/i386-linux-gnu/ld-2.15.so
b774a000-b774b000 rw-p 00020000 08:05 659544     /lib/i386-linux-gnu/ld-2.15.so
bf92e000-bf94f000 rw-p 00000000 00:00 0          [stack]
Aborted (core dumped) 
```

甚至不知道为什么？当我不删除 *s 时，一切都是正确的，但它不是解决方案......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T11:16:01.927

您使用`new/delete, new[]/delete[]`不正确，您应该`delete [];`在新数组时调用：

```
MySimpleStuct *s = new MySimpleStuct[N];
delete [] s; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T04:15:25.040

如果您对字符串进行注释，则该错误应该会消失。

```
struct MySimpleStuct
{

  //string text;

  int intVal;

  double doubleVal;
}; 
```

# windows-8 - Win 8 App - 不显示来自网络服务的更新数据

> ID：14357079
> 
> 赞同：0
> 
> 时间：2013-01-16T11:14:55.050
> 
> 标签：windows-8

我正在创建访问 Web 服务并在 html 页面上显示数据的 win 8 应用程序。

PAGE1.html 从 Web 服务访问数据。第一次打开 PAGE1 时，从 Web 服务正确检索数据，然后我从 PAGE1 上调用`window.location("PAGE2.html`. 但是当我导航回 PAGE1.html 时，这个 PAGE1.html 打开但不显示更新的数据。

PAGE1.html 的 PAGE1.js 代码：在页面的 onload 功能上正确地从 Web 服务获取数据。

```
ready: function (element, options) 
{
    var textDisp= document.querySelector("#text");   //text is DIV id to display data

    textDisp.innerText = "PAGE2";
    document.querySelector("#myButton").onclick = function (args) {
            WinJS.Navigation.navigate("/pages/page2/page2.html");
        };
    WinJS.xhr({
       type: "GET",
        url: "http://MyWebserice",
    headers: { "Content-type": "application/json" },
    }).then(function complete(request) {
                 var resdata = request.responseText;
                 textDisp.innerText = resdata;
             }, function error(er) {
                 var err = er.statusText;
             });
     } 
```

数据通过网络服务正确提交到数据库；这里是 PAGE2.html 的 PAGE2.js 的代码：

```
document.querySelector("#Submit").onclick = function (args) {
       WinJS.xhr({
               type: "POST",
               url: "http://InsertData?username=" + un + "&password=" + pass + "",
               headers: { "Content-type": "application/json" },
            }).then(function complete(request) {
                        WinJS.Navigation.navigate("/pages/PAGE1/PAGE1.html");
                    }, function error(er) {
                        var err = er.statusText;
            });
} 
```

但是添加数据成功后，PAGE1没有显示数据库的刷新数据，我 `WinJS.Navigation.navigate("/pages/PAGE1/PAGE1.html")`在WinJS.xhr中调用然后转到PAGE1.html。

# jquery - 为什么 .animate 在 IE 8 中这么慢

> ID：14357082
> 
> 赞同：1
> 
> 时间：2013-01-16T11:15:00.713
> 
> 标签：jquery

这是我的动画代码

```
 function MoveTeleport(LeftRight,UpDown) {
        var TileMoveLeft = new Number(-LeftRight);
        var TileMoveUp = new Number(-UpDown);
        this.MovetoLeft = TileMoveLeft * 70 + 'px';
        this.MovetoUp = TileMoveUp * 70 + 'px';

        this.Move = function () {
            $('#Player').fadeTo(200,0.1);

            $('#Map_Player').animate({
                'left': '+=' + this.MovetoLeft,
                'top': '+=' + this.MovetoUp
            }, 1000, function () {
                LeftCurrent = $('#Map_Player').css('left', 10);
                UpCurrent = $('#Map_Player').css('top', 10);
                $('#Player').fadeTo(200, 1);
            });
        }
    } 
```

它在 FireFox、Opera、Chrome 中的动画效果非常好。但在 IE8 中它不能很好地工作，知道为什么？或者如何在 IE 8 中修复它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T11:23:42.407

jQuery`.animate`和其他类似方法每帧重新计算 DOM 元素的 CSS，然后更新元素的`style`属性。每一帧，浏览器都需要重新计算站点布局并进行渲染。在某些情况下，动画可能需要昂贵的布局重新计算（取决于站点元素的布局方式、CSS 等）。IE8 有一个相当旧的渲染引擎，我敢打赌在你的情况下重新计算布局对它来说太贵了。除了摆脱`.animate`.

[昨天在 Smashing Magazine 上的一篇文章](http://coding.smashingmagazine.com/2013/01/15/off-canvas-navigation-for-responsive-website/)`.animate`中已经提到了性能问题——这可能是一件有趣的事情。

# javascript - 用户如何在网站内绘制和保存图像？

> ID：14357083
> 
> 赞同：4
> 
> 时间：2013-01-16T11:15:05.987
> 
> 标签：javascript, html, canvas

我想开发一个网站，允许用户使用鼠标或手指在网站上绘制自己的图片，例如简笔画。然后我希望能够保存图像以便可以打印。任何人都可以帮助解决这个问题的最佳方法。

我对 html 和 css 有很好的理解，但我相信这需要我学习一些更高级的东西。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T11:23:18.227

您需要使用 HTML5 画布元素来实现这一点，在我看来这是一项相当复杂但可行的任务。

您需要对画布交互和绘图工具有很好的理解。你可以在这里找到一个非常基本的绘图应用程序。

[http://dev.opera.com/articles/view/html5-canvas-painting/](http://dev.opera.com/articles/view/html5-canvas-painting/)

一旦用户对绘画感到满意，您就可以将其保存到磁盘。下面是一个这样做的例子：

[使用 JavaScript 更新图像、捕获屏幕截图并保存到磁盘](https://stackoverflow.com/questions/13520641/update-image-capture-screengrab-and-save-to-disk-using-javascript/13521213#13521213)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:24:24.493

有几种方法可以实现这一点。例如，您可以查看[svg-edit](http://code.google.com/p/svg-edit/)，它是一个在线 SVG（矢量图形）编辑器（[演示](http://svg-edit.googlecode.com/svn/trunk/editor/svg-editor.html)）。

或者您可以使用该`canvas`元素。请参阅此问题：[通过 HTML 5 的画布进行在线 Photoshop？](https://stackoverflow.com/questions/1825958/online-photoshop-via-html-5s-canvas)

# c# - “返回”按钮到上一个模态弹出窗口（Ajax 模态弹出窗口扩展器）

> ID：14357084
> 
> 赞同：0
> 
> 时间：2013-01-16T11:15:19.427
> 
> 标签：c#, javascript, asp.net, html

我的 Default.aspx 上有一个按钮，它启动一个“条款和条件”模式弹出窗口 (popup1)。然后，我在模态弹出窗口上有一个按钮，它在顶部启动另一个模态弹出窗口 (popup2)（我的条款和条件的第 2 页）。

我想向 modalpopup2 添加一个后退按钮，该按钮关闭 popup2 并显示 modalpopup1，因此用户可以从 popup2 中获得“前进/后退”选项。

我添加了“ButtonBack”并尝试了...

```
protected void ButtonBack_Click(object sender, EventArgs e)
{

    Popup1.Show();
} 
```

但这只是重定向回我的 default.aspx。关于如何使用 C# 或一些 javascript 解决这个问题的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:37:05.243

```
<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
    <script type="text/javascript" language="javascript">
        function fn_Next() {
            $find(ModalPopupExtender1).hide();
            $find(ModalPopupExtender2).show();
        }

        function fn_Next1() {
            $find(ModalPopupExtender2).hide();
            $find(ModalPopupExtender3).show();
        }

        function fn_Back() {
            $find(ModalPopupExtender2).hide();
            $find(ModalPopupExtender1).show();
        }

        function fn_Back1() {
            $find(ModalPopupExtender3).hide();
            $find(ModalPopupExtender2).show();
        }
    </script>
</asp:Content>

<asp:Content ID="Content3" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">    

    <script type="text/javascript" language="javascript">
        var ModalPopupExtender1 = '<%= ModalPopupExtender1.ClientID %>';
        var ModalPopupExtender2 = '<%= ModalPopupExtender2.ClientID %>';
        var ModalPopupExtender3 = '<%= ModalPopupExtender3.ClientID %>';
    </script>

    <asp:Button ID="btnShowPopup" Text="Show Popup" runat="server" />
    <asp:ModalPopupExtender ID="ModalPopupExtender1" runat="server" TargetControlID="btnShowPopup"
        PopupControlID="panelPopup1" BackgroundCssClass="bkgPopup" OkControlID="btnNext" OnOkScript="fn_Next()">
    </asp:ModalPopupExtender>

    <asp:ModalPopupExtender ID="ModalPopupExtender2" runat="server" TargetControlID="panelPopup2"
        PopupControlID="panelPopup2" BackgroundCssClass="bkgPopup" OkControlID="btnBack" OnOkScript="fn_Back()"
            CancelControlID="btnNext1" OnCancelScript="fn_Next1()">
    </asp:ModalPopupExtender>

    <asp:ModalPopupExtender ID="ModalPopupExtender3" runat="server" TargetControlID="panelPopup3"
        PopupControlID="panelPopup3" BackgroundCssClass="bkgPopup" OkControlID="btnBack1" OnOkScript="fn_Back1()">
    </asp:ModalPopupExtender>

    <asp:Panel ID="panelPopup1" runat="server" CssClass="panelPopup">
        <div>
            <table>
                <tr>
                    <td>Popup 1</td>
                </tr>
            </table>            
        </div>
        <div>
            <asp:Button ID="btnNext" runat="server" Text="Next" />
        </div>        
    </asp:Panel>

    <asp:Panel ID="panelPopup2" runat="server" CssClass="panelPopup">
        <div>
            <table>
                <tr>
                    <td>Popup 2</td>
                </tr>
            </table>            
        </div>
        <div>
            <asp:Button ID="btnBack" runat="server" Text="Back" />
            <asp:Button ID="btnNext1" runat="server" Text="Next" />
        </div>        
    </asp:Panel>

    <asp:Panel ID="panelPopup3" runat="server" CssClass="panelPopup">
        <div>
            <table>
                <tr>
                    <td>Popup 3</td>
                </tr>
            </table>            
        </div>
        <div>
            <asp:Button ID="btnBack1" runat="server" Text="Back" />
        </div>        
    </asp:Panel>
</asp:Content> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T14:16:22.203

感谢你的帮助！

这是我的最终脚本...

```
 <script type="text/javascript" language="javascript">
    function fn_Next(sender, args) {
        $find('ModalTerms1').hide();
        $find('ModalTerms2').show();
    }

    function fn_Back(sender, args) {
        $find('ModalTerms2').hide();
        $find('ModalTerms1').show(); 
```

}

```
 function fn_Last(sender, args) {
        $find('ModalTerms3').hide();
        $find('ModalTerms1').hide();
        $find('ModalTerms2').show();
    } 

</script> 
```

# php - 为什么 symfony 管理生成器在尝试保存内容时出错

> ID：14357085
> 
> 赞同：0
> 
> 时间：2013-01-16T11:15:20.037
> 
> 标签：php, symfony1, yaml, propel, admin-generator

我正在使用 symfony 1.0，管理员生成器用于保存新闻内容。在`configuration.yml`文件中，我看到以下内容：

```
generator:
  class:              sfPropelAdminGenerator
  param:
    model_class:      News
    theme:            default
    css:              admin

    list:
      title: News List
      display: [=vcheading, dtnewsdate, idfeednews]
      fields:
        vcheading: { name: News title }
        dtnewsdate: { name: News Date }
        idfeednews: { name: Feed reference }
      max_per_page: 20
      filters: [vcheading, idfeednews]

    edit:
      title: Add/Edit News
      display: [_category, _subcategory, vcheading, lvlongheading, vcsmallimageurl, itsmallimageheight, itsmallimagewidth, vclargeimageurl, itlargeimageheight, itlargeimagewidth, dtnewsdate, lvcontent, lvsummary]
      actions:
        _list: ~
        _save: -
      fields:
        #newscategorys: { name: News Category, type: admin_select_list, params: through_class=Newscategory }
        vcheading: { name: Heading }
        lvlongheading: { name: Long Heading }
        vcsmallimageurl: { name: URL (Small image) }
        itsmallimageheight: { name: Height ( S ) }
        itsmallimagewidth: { name: Width ( S )}
        vclargeimageurl: { name: URL (Large image)  }
        itlargeimageheight: { name: Height ( L ) }
        itlargeimagewidth: { name: Width ( L ) }
        dtnewsdate: { name: News live date, params: format='yyyy-MM-dd'}
        lvcontent: { name: Content, params: rich=true tinymce_options='plugins:"paste,spellchecker",theme_advanced_buttons1:"bold,italic,underline,strikethrough,separator,link,unlink,bullist,numlist,separator,undo,redo,separator,indent,outdent,spellchecker,pastetext,pasteword",theme_advanced_buttons2:"",theme_advanced_buttons3:"",theme_advanced_statusbar_location:"none",elements:"news_lvcontent"' size=50x15 }
        lvsummary: { name: Summary, params: rich=true tinymce_options='plugins:"paste,spellchecker",theme_advanced_buttons1:"bold,italic,underline,strikethrough,separator,link,unlink,bullist,numlist,separator,undo,redo,separator,indent,outdent,spellchecker,pastetext,pasteword",theme_advanced_buttons2:"",theme_advanced_buttons3:"",theme_advanced_statusbar_location:"none",elements:"news_lvsummary"' size=50x15 } 
```

在“newsAction”动作文件中：

```
class newsActions extends autonewsActions {

    public function updateNewsFromRequest() {  
        parent :: updateNewsFromRequest();
    .
    .
    .
    .
    } 
```

该类`autonewsActions`在缓存中看到！！！

按“保存”按钮

*   它转到“newsActions”操作文件并执行在缓存中创建的函数“updateNewsFromRequest”（由 sfPropelAdmin 自动生成）。
*   在这里，在“autoNewsActions”类下，调用函数“updateNewsFromRequest”并设置日期格式。

如果输入日期格式为“19-01-2013”​​，则值将设置为“2019-01-2013”​​。

这导致`"Unable to parse date/time value for [dtnewsdate] from input"`错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:04:45.263

您是在谈论这个日期字段`dtnewsdate`吗？

看来您在`generator.yml`. 试试这个：

```
dtnewsdate: { name: News live date, params: format='dd-MM-yyyy'} 
```

`2013-01-19`否则，如果您不想更新格式，则必须设置一个有效的日期。

# html - RESTful Web 服务使用 Jersey 使用 Java 登录

> ID：14357087
> 
> 赞同：0
> 
> 时间：2013-01-16T11:15:30.777
> 
> 标签：html, rest, login, jersey

我正在开发一个移动银行应用程序，它将使用使用 Jersey 以 Java 实现的 REST Web 服务。所以我想要一个使用**GET**方法的登录页面，如果用户输入正确的用户名密码，那么他将获得一个包含所有帐户列表的页面。

1) 登录信息将以 json 格式发送。2）如果用户被授权，服务器将为该用户进行身份验证服务器将返回 JSON 中的帐户列表。3）这些帐户将以列表的形式显示在新的html页面上。

所以，我的问题是，我该如何实施或建议我任何更好的解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:15:20.997

基本认证

```
// ...
    @Context HttpHeaders headers;
    // ...
    protected boolean authenticate() {
        String header = headers.getRequestHeader("authorization").get(0);
        header = header.substring("Basic ".length());
        String[] creds = new String(Base64.base64Decode(header)).split(":");
        String username = creds[0];
        String password = creds[1];
        // ...
    }
// ... 
```

# postgresql - 使用 format=alinged 时打印查询结果，而不是在 EDITOR 中打开它们

> ID：14357093
> 
> 赞同：0
> 
> 时间：2013-01-16T11:16:00.210
> 
> 标签：postgresql, psql

如果进行选择并且仅检索几列，则将结果打印到终端，如果我有更多列，并且它们不适合终端宽度，则查询结果将在默认编辑器（vim）中打开，但是当我退出编辑器时，结果不再可见。

我知道我可以使用 \x （但我有很多行，对我来说这似乎是最糟糕的）。
如果我将格式更改为未对齐、html、latex 或 troff-ms，即使结果比终端宽度更宽，它们仍会被打印。

当结果行不适合终端高度时，无论我使用什么格式，它们总是在默认编辑器中打开。

问：
有任何可能使用 format=aligned 并且总是打印结果而不是在默认编辑器中打开它们，所以我不会失去它们的可见性（类似于 mysql-client 所做的事情）？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:05:20.420

`PAGER`当它们不适合屏幕时，查询结果将被传递给程序，除非它被禁用`\pset pager off`。`EDITOR`用于输入。

一些寻呼机在退出时会恢复之前的显示，当您需要在进一步的查询中使用之前的结果时，这会很烦人。

我发现它`PAGER="less -FX"`非常适合，`psql`因为它允许双向滚动并在退出时保持显示完整。

# c# - LINQ 查询为实体 DB 中的嵌套对象返回 null

> ID：14357095
> 
> 赞同：2
> 
> 时间：2013-01-16T11:16:02.597
> 
> 标签：c#, entity-framework, linq, lazy-loading

我有一个我首先使用实体​​代码创建的数据库

在那个数据库中，我有一个类似于以下的结构

* * *

```
class ClassA
{
  public virtual int ID {get;set}
  public virtual string some_text {get;set}
  public virtual ClassB B {get;set}
  public virtual ClassC C {get;set}
  ...
}

class ClassB
{
  public virtual int ID {get;set}
  public virtual string some_text {get;set}
  public virtual string some_values {get;set}
  ...
}

class ClassC
{
  public virtual int ID {get;set}
  public virtual string some_text {get;set}
  public virtual string some_values {get;set}
  ...
}
.... 
```

* * *

最后，我为那些具有所有接口的对象提供了一个上下文来查询数据库

* * *

```
public class ClassADb : DBContext, IClassADataSource
{
  public DBSet<ClassA> As {get;set}
  public DBSet<ClassB> Bs {get;set}
  public DBSet<ClassC> Cs {get;set}
  ...
} 
```

当我创建数据库并对其进行探索时，我可以看到它的创建似乎是正确的：

在 ClassA_Table 中，我看到 ClassB_ID、ClassC_ID 等的外键以及封装在 ClassA 中的所有原始类型（整数、字符串、布尔值、日期等）

同样在执行以下操作时：

```
ClassB MyB = new ClassB();
//some code to initialize B
...
Bs.Add(MyB)

ClassC MyC = new ClassC();
//some code to initialize C
Cs.Add(MyC);

ClassA MyA = new ClassA();

A.B = MyB;
A.C = MyC;
...

db.SaveChanges(); 
```

## 我再次探索数据库并在 Table_A 中看到一个新行，其中引用了那些 B 和 C 对象（行 ID 对应于 B_table 、 C_table 中的那些对象）

我遇到的问题是，当我从 As container 进行选择时，我可以检索 A 对象，但嵌套的 B 和 C 对象为空

原始类型可以（不为空）

我尝试过的一些修复

`virtual`关键字是惰性的，所以在访问数据库的类的构造函数中我做了

```
db.Configuration.ProxyCreationEnabled = false; 
```

但是仍然在做一些事情时

```
A myA = db.As.Find(1);

A.some_text ; // not null
A.B ; //NULL!!!!
A.C ; // NULL 
```

是什么导致实体框架不获取 A 和 B 对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T11:38:00.357

您必须使用 . 显式加载相关实体[`Include()`](http://msdn.microsoft.com/en-us/library/bb738708.aspx)。

```
db.As.Include("B").Include("C").Where(a => [some condition]); 
```

在较新版本的实体框架中，还有一个围绕此方法的[包装器方法](http://msdn.microsoft.com/en-us/library/gg671236)，它接受一个避免字符串的 lambda 表达式。

```
db.As.Include(a => a.B).Include(a => a.C).Where(a => [some condition]); 
```

# jquery - 基于无序列表的jQuery div转换

> ID：14357099
> 
> 赞同：0
> 
> 时间：2013-01-16T11:16:21.640
> 
> 标签：jquery, html, transition

我在页面上有一个导航栏，如下所示：

```
<ul id="nav">
   <li class="current"><a href="#">Home</a></li>
   <li>
      <a href="#">Header 2</a>
      <ul>
         <li><a href="#">Item 1</a></li>
         <li><a href="#">Item 2</a></li>
      </ul>
   </li>
   <li>
      <a href="#">Header 3</a>
      <ul>
         <li><a href="#">Item 3</a></li>
         <li><a href="#">Item 4</a></li>
      </ul>
   </li> 
```

导航栏结束的地方`| Home | Header 2 | Header 3|`

`Item 1`现在，当用户从家中单击时，最好让 div 使用页面幻灯片转换，让 Item 1 div 从右侧滑入。类似地，如果用户随后单击`Item 2`，则 div 将从底部向上滑动。同样，如果他们单击`Home`，则 div 将从左侧滑入。我想我想要的是页面幻灯片来自与链接相对于当前页面定位的方向相同的方向。这可能吗？如果可以，实现它的最佳方法是什么？

# java - 通用 JNI 类型实例化

> ID：14357101
> 
> 赞同：3
> 
> 时间：2013-01-16T11:16:26.827
> 
> 标签：java, c++, generics, java-native-interface

如何在 C++ 中实例化泛型类型？

如果我想创建一个`List<X>`where `X`is 对象。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T07:23:20.297

只需实例化列表。由于泛型被编译器擦除，这完全等同于运行时的 List。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T13:45:58.823

鉴于您无法在 Java 中在运行时实例化泛型类型，我很确定您无法在 C++ 中执行此操作。

泛型是一个编译时特性。除非您想将生成的内容传递给编译器，例如文本中的纯 Java 代码，否则泛型不太可能对您有用。（如果您确实想这样做，我怀疑 C++ 不会是您的最佳选择）

> 如果我想创建一个 X 是对象的列表

在 Java`X`中是对对象的一种*引用*。由于所有列表中的代码仅包含引用，因此代码是相同的，并且不像 C++ 中那样模板化。这意味着您不能使用原语或结构或对象，只能使用引用。

# java - Java：Android：SQLite：使用 For 循环进行多次插入

> ID：14357103
> 
> 赞同：0
> 
> 时间：2013-01-16T11:16:28.910
> 
> 标签：java, android, sqlite, for-loop, insert

请查看以下代码：

```
try {
          db.beginTransaction();
          db.execSQL(DBConstants.PRAG_FOR_KEYS_ON);

          db.execSQL(DBConstants._BLDG_CREATE);
          db.execSQL(DBConstants._BLDG_INDEX);
          for(int x = 0; x < 28; x = x+1){
              db.execSQL(DBConstants._BLDG_INSERT+x);
          }

          db.execSQL(DBConstants.PRAG_FOR_KEYS_OFF);
          db.setTransactionSuccessful();
        } catch (SQLException e) {
          e.printStackTrace();
        }finally{
          db.endTransaction();
        } 
```

每个插入常量（代表一行新数据）的编号如下：

```
public static final String _BLDG_INSERT0 = "<SQL insert statement>" 
```

...一直到 28（“_BLDG_INSERT28”）。

有什么方法可以在 for 循环中执行这些 SQL 语句？如果可以的话，我如何将数字连接到常量的名称上，并让 java 解释器以正确的方式识别它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:45:03.230

从您是否能够更改常量的问题中不清楚。如果可以，最好将语句放在数组中。

```
String[] _BLDG_INSERT = {"<SQL insert statement>",   // 0
                         "<SQL insert statement>",   // 1
                         ...
                         "<SQL insert statement>"    // 28
                        }; 
```

然后你可以像这样访问它们。

```
for(int x = 0; x < 28; x = x+1){
    db.execSQL(DBConstants._BLDG_INSERT[x]);
} 
```

或者更好：

```
for(String s : DBConstants._BLDG_INSERT) {
    db.execSQL(s);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:27:43.520

```
 public ArrayList<String> getAllRecord()
{
    ArrayList<String> total = new ArrayList<String>();
    Cursor cursor1 = null;
    try
    {
        cursor1 = getDBobject().rawQuery(
                "select * from "
                + Your table name + ";", null);
        if (cursor1.moveToFirst())
        {
            do
            {
                String cid = cursor1.getString(1);
                total.add(cid);

            }
            while (cursor1.moveToNext());
        }
    }
    catch (Exception e)
    {
        System.out.println("" + TAG + " :" + e);
    }
    finally
    {
        if (cursor1 != null && !cursor1.isClosed())
        {
            cursor1.close();
        }
    }
    return total;
} 
```

这将根据您的插入顺序返回所有数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T11:41:01.840

尝试这样的事情：

```
public class testeReflection {
    public static void main(String[] args) throws IllegalArgumentException, IllegalAccessException{
        MyClass myClass = new MyClass();

        Class aClass = MyClass.class;

        for(int i = 0; i < 5; i++){
            try {
                Field field = aClass.getField("VAR" + i);

                String s = (String)field.get(myClass);

                System.out.println("myClass[" + i + "] = " + s);                
            } catch (NoSuchFieldException ex) {
                Logger.getLogger(testeReflection.class.getName()).log(Level.SEVERE, null, ex);
            } catch (SecurityException ex) {
                Logger.getLogger(testeReflection.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }

    public static class MyClass{
        public static final String VAR0 = "VARIAVEL 01";
        public static final String VAR1 = "VARIAVEL 02";
        public static final String VAR2 = "VARIAVEL 03";
        public static final String VAR3 = "VARIAVEL 04";
        public static final String VAR4 = "VARIAVEL 05";
    }
} 
```

# python - 绘制周期性轨迹

> ID：14357104
> 
> 赞同：4
> 
> 时间：2013-01-16T11:16:30.120
> 
> 标签：python, numpy, matplotlib

我有一些粒子在具有封闭边界条件的走廊中移动的数据。绘制轨迹会导致锯齿形轨迹。 ![在此处输入图像描述](../Images/e37b216590ce0f7bde98fcee5dc7b8b2.png)

我想知道如何阻止`plot()`连接点，粒子回到起点。有点像图片的上半部分，但没有`"."`

`numpy`我的第一个想法是在数组变为正时找到索引`a[:-1]-a[1:]`。然后从 0 绘制到该索引。但是如何获得第一次出现的正元素的索引`a[:-1]-a[1:]`？也许还有一些其他的想法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T12:50:27.377

我会采用不同的方法。首先，我不会通过查看导数的符号来确定跳跃点，因为运动可能会上升或下降，甚至有一些周期性。我会用最大的导数来看看那些点。

其次，在情节线中进行中断的一种优雅方法是在每次跳跃时掩盖一个值。然后 matplotlib 将自动进行分段。我的代码是：

```
import pylab as plt
import numpy as np

xs = np.linspace(0., 100., 1000.)
data = (xs*0.03 + np.sin(xs) * 0.1) % 1

plt.subplot(2,1,1)
plt.plot(xs, data, "r-")

#Make a masked array with jump points masked
abs_d_data = np.abs(np.diff(data))
mask = np.hstack([ abs_d_data > abs_d_data.mean()+3*abs_d_data.std(), [False]])
masked_data = np.ma.MaskedArray(data, mask)
plt.subplot(2,1,2)
plt.plot(xs, masked_data, "b-")

plt.show() 
```

结果给我们： ![在此处输入图像描述](../Images/ec73b72d1a41b1b107d1f987c640a870.png)

缺点当然是每次休息都会失去一分 - 但是根据您似乎拥有的采样率，我想您可以将其换成更简单的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T11:40:51.013

要找到粒子越过上边界的位置，您可以执行以下操作：

```
>>> import numpy as np
>>> a = np.linspace(0, 10, 50) % 5
>>> a = np.linspace(0, 10, 50) % 5 # some sample data
>>> np.nonzero(np.diff(a) < 0)[0] + 1
array([25, 49])
>>> a[24:27]
array([ 4.89795918,  0.10204082,  0.30612245])
>>> a[48:]
array([ 4.79591837,  0\.        ])
>>> 
```

`np.diff(a)`计算 的离散差`a`，同时`np.nonzero`找到条件`np.diff(a) < 0`为负的位置，即粒子向下移动。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T12:42:42.387

为了避免连接线，您必须按段绘制。

`a`当变化的导数符号时，这是一种按段绘制的快速方法：

```
import numpy as np
a = np.linspace(0, 20, 50) % 5  # similar to Micheal's sample data
x = np.arange(50)  # x scale

indices = np.where(np.diff(a) < 0)[0] + 1  # the same as Micheal's np.nonzero
for n, i in enumerate(indices):
    if n == 0:
        plot(x[:i], a[:i], 'b-')
    else:
        plot(x[indices[n - 1]:i], a[indices[n - 1]:i], 'b-') 
```

![在此处输入图像描述](../Images/5785190a08056e3a9cd95ae41ab1fa89.png)

# php - 在 OSX 10.8.2 - PHP 5.3.15 上安装 mcrypt 和 homebrew

> ID：14357107
> 
> 赞同：17
> 
> 时间：2013-01-16T11:16:39.003
> 
> 标签：php, mcrypt

我已经`mcrypt`通过成功安装，`homebrew`但我很难找到将`mcrypt.so`其作为扩展名包含在`php.ini`.

mcrypt 安装在`/usr/local/Cellar/mcrypt/2.5.8`. 树：

```
-- AUTHORS
|-- ChangeLog
|-- INSTALL_RECEIPT.json
|-- NEWS
|-- README
|-- TODO
|-- bin
|   `-- libmcrypt-config
|-- include
|   |-- mcrypt.h
|   `-- mutils
|       `-- mcrypt.h
|-- lib
|   |-- libmcrypt.4.4.8.dylib
|   |-- libmcrypt.4.dylib -> libmcrypt.4.4.8.dylib
|   `-- libmcrypt.dylib -> libmcrypt.4.4.8.dylib
`-- share
    |-- aclocal
    |   `-- libmcrypt.m4
    `-- man
        `-- man3
            `-- mcrypt.3 
```

我试图包括`mcrypt.h`在`php.ini`：

```
extension="/usr/local/Cellar/mcrypt/2.5.8/include/mcrypt.h" 
```

然后重新启动apache。但它没有用。

当我在终端中运行 php 时，我得到：

```
PHP Warning:  PHP Startup: Unable to load dynamic library
'/usr/local/Cellar/mcrypt/2.5.8/include/mcrypt.h' - dlopen(/usr/local/Cellar/mcrypt/2.5.8/include/mcrypt.h, 9): 
image not found in Unknown on line 0 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-05-23T19:34:42.400

首先检查 brew 是否是最新的：
`brew doctor`

二、根据php版本安装mcrypt：
`brew install php53-mcrypt`

*注意：最近版本的 brew 不需要下面的第三步：*

第三次打开 php.ini 文件并添加引用：
`sudo vi /private/etc/php.ini`
`extension="/usr/local/Cellar/php53-mcrypt/5.3.25/mcrypt.so"`

最后重启apache：
`sudo apachectl restart`

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-16T13:24:28.730

在通过不同的建议思考了几个小时之后，[这个](http://www.gigoblog.com/2011/01/27/add-mcrypt-to-mac-os-x-server/comment-page-1/#comment-3897)对我有用（通过 MacPorts 安装）：

由**Chris Brewer**提供：

从以下位置下载并安装 MacPorts`http://macports.org.`

在终端中执行以下步骤：

强制 MacPorts 更新（仅在安装 Apple 的 Xcode 时才有效）：

```
sudo port -v selfupdate 
```

现在，安装 memcached：

```
sudo port install php5-mcrypt 
```

将新创建的 mcrypt 共享对象复制到 Mac OS X 的默认 PHP5 扩展目录中：

```
sudo cp /opt/local/lib/php/extensions/no-debug-non-zts-20090626/mcrypt.so /usr/lib/php/extensions/no-debug-non-zts-20090626/ 
```

接下来，您需要编辑 php.ini 以添加扩展。找到短语动态扩展，并添加：

```
extension=mcrypt.so 
```

最后，重新启动 Apache：

`sudo apachectl restart`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-02-06T00:50:19.277

我已经解决了这个问题

```
brew install php54-mcrypt --without-homebrew-php 
```

然后我将此行添加到`/etc/php.ini`.

```
extension="/usr/local/Cellar/php54-mcrypt/5.4.24/mcrypt.so" 
```

如果此文件不存在，您需要从`/etc/php.ini.default`. 我还检查了我的 php 版本`php -v`（它是 5.4.x）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-16T02:34:47.800

我很欣赏你在这方面所做的工作！这对我有用。我在 Mac 上，它正在寻找 xcode。开发人员位置尚未设置，因此我必须完成所有这些工作。

（解决开发人员路径） [如何解决“错误：在 /Developer 找不到开发人员目录”？](https://stackoverflow.com/questions/9621706/how-can-i-resolve-error-no-developer-directory-found-at-developer)

1.  sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer

（签署使用 XCODE 的协议）

2.  sudo xcodebuild -license

最后按照上面的步骤！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-23T06:31:01.520

[与此](http://benohead.com/mac-os-x-php-notice-use-undefined-constant-mcrypt_rijndael_128/)一起工作就像小菜一碟。

```
$ brew install mcrypt
Warning: mcrypt-2.6.8 already installed
$ brew install php55-mcrypt
Warning: php55-mcrypt-5.5.20 already installed 
```

然后测试一下：

```
$ php -m | grep mcrypt
mcrypt

$ php -i | grep mcrypt
Additional .ini files parsed => /usr/local/etc/php/5.5/conf.d/ext-mcrypt.ini,
Registered Stream Filters => zlib.*, bzip2.*, convert.iconv.*, string.rot13, string.toupper, string.tolower, string.strip_tags, convert.*, consumed, dechunk, mcrypt.*, mdecrypt.*
mcrypt
mcrypt support => enabled
mcrypt_filter support => enabled
mcrypt.algorithms_dir => no value => no value
mcrypt.modes_dir => no value => no value 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-11T08:47:37.933

这可能被证明是有用的......

1.  brew tap homebrew/homebrew-php
2.  冲泡安装 php56-mcrypt

# matlab - MATLAB：IIR 滤波器系数

> ID：14357111
> 
> 赞同：1
> 
> 时间：2013-01-16T11:16:49.990
> 
> 标签：matlab, filter, signal-processing, numerical-methods

我在信号处理方面相当新，我的一个项目是实现一个 C++ 过滤器类。我需要典型滤波器的高阶系数，例如 Chebyshev 类型 I 和 II、Butterworth、Elliptic，不幸的是，网络中的大多数系数表只列出了最大 10 阶。我决定使用 MATLAB 来生成这些滤波器并获得它们的高阶系数，但是我感到困惑的一件事是它们只给出一组系数，我认为这类似于说 (ao,a1,a2 .....一个）。

我了解到 IIR 滤波器有 2 组系数，通常表示为 a0,a1...an 和 b0,b1,...,bn。这是我的 MATLAB 代码，用于生成这些系数并将它们导出到 excel 文件：

```
 %Chebyshev Filter Coefficients

 filename = 'cheby2coefs.xlsx';
 for Order = 1:64 
 fprintf('This is');
 disp(Order);
 fprintf('coefficients');
 [i,j] = cheby2(Order, 20, 300/500);
 disp([i,j]);
 fprintf('\n');

  xlswrite(filename,[i,j]',Order);
end 
```

到目前为止，网上几乎没有关于如何用 MATLAB 得出这些系数的资料，所以我很难过。我的问题是，究竟如何为这些滤波器生成 IIR 系数（假设它们是 IIR）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:35:00.450

看起来你在正确的轨道上。您的调用`cheby2`缺少`Wst`参数（阻带频率）。您应该阅读[MATLAB 的有关此命令的官方文档](http://www.mathworks.com/help/signal/ref/cheby2.html)并验证您的调用。

另外，不要命名输出变量`i`和`j`，这是不好的做法。`i`并且`j`是`sqrt(-1)`虚数的保留名称。至少`b`命名输出变量。`a`

完成 Chebyshev 后，分别使用[`butter`](http://www.mathworks.com/help/signal/ref/butter.html)和[`ellip`](http://www.mathworks.com/help/signal/ref/ellip.html)用于 Butterworth 和椭圆滤波器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:35:24.723

这似乎包含在[MATLAB 文档](http://www.mathworks.co.uk/help/signal/ref/cheby2.html)中：

> [b,a] = cheby2(n,R,Wst) 设计了一个 n 阶低通数字切比雪夫 II 型滤波器，具有归一化的阻带边缘频率 Wst 和阻带纹波 R dB，低于通带峰值。它返回长度为 n+1 行向量 b 和 a 的滤波器系数，系数为 z 的降幂。

# android - 获取 Android 联系人排序首选项

> ID：14357115
> 
> 赞同：0
> 
> 时间：2013-01-16T11:17:01.923
> 
> 标签：android, android-intent

在 android 的“联系人”->“设置”中，我们有“排序方式”和“查看联系人姓名为”选项。有没有办法在另一个应用程序中获得这些偏好？这意味着我的应用程序有我自己的联系人列表版本。我需要这些以便对其进行相应的排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T10:53:27.730

```
 int sort_order = 
Settings.System.getInt(getContentResolver(),ContactsContract.Preferences.SORT_ORDER);
    inr display_order =
Settings.System.getInt(getContentResolver(),ContactsContract.Preferences.DISPLAY_ORDER); 
```

# ios - 从列出的 Plist 加载 NSDictionary

> ID：14357116
> 
> 赞同：5
> 
> 时间：2013-01-16T11:17:02.787
> 
> 标签：ios, objective-c, plist, nsdictionary

我`plist`用来存储**键值**列表。当应用程序需要该列表时，尝试将列表加载到**NSDictionary**。一切都很好，直到这里。

这里我如何加载 plist 文件：

```
NSString *myPlistFilePath = [[NSBundle mainBundle] pathForResource: @"cities" ofType: @"plist"];
cities = [NSDictionary dictionaryWithContentsOfFile: myPlistFilePath]; 
```

当我们看时，`cities`是一个`NSDictionary`。然后我将所有列表键值推送到 TableView，不知何故它没有在 plist 文件中列出。随机排序。

有没有办法弄清楚？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T11:25:03.463

[NSDictionary](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html)不是有序集合，也就是说，它不保证以任何方式保持内容的顺序。它的唯一功能是从键映射到值。

如果您需要订购的内容，您可以使用例如[keysSortedByValueUsingSelector](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDictionary/keysSortedByValueUsingSelector:)从 NSDictionary 中提取它，这将提取集合中的数据，按您的标准对其进行排序并将其存储在（保留顺序的）NSArray 中。

或者，考虑在 plist 的根目录中使用一个数组，其中包含一个有序的城市字典列表。然后，如果您遍历其中包含的数组，它们将按照 plist 中包含的数组顺序排列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:25:14.170

NSDictionary 不是有序的数据结构。

对象根据`allKeys`功能列出，键以未定义的方式列出。

有关功能，请参阅苹果文档`allKeys`。

> > **allKeys**返回一个包含字典键的新数组。
> > 
> > *   (NSArray *)allKeys
> 
> **返回值**包含字典键的新数组，如果字典没有条目，则返回空数组。
> 
> > **讨论**未定义数组中元素的顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-08T20:12:02.627

如果您希望避免使用选择器对键进行排序，请考虑在 plist 的根目录中使用 Array。然后，当您遍历数组时，将保留顺序。这运行 o(n)，它比可能的最快排序算法短 log(n) 倍，
例如：

```
cities{
  list[
    city{}
    city{}
    city{}
    ...
  ]
} 
```

# java - 更改列表视图中所有列表项的字体

> ID：14357118
> 
> 赞同：0
> 
> 时间：2013-01-16T11:17:07.427
> 
> 标签：java, android, listview, fonts

[我已经设置了一个有效的自定义列表视图数组适配器代码，与此处](http://www.framentos.com/en/android-tutorial/2012/07/16/listview-in-android-using-custom-listadapter-and-viewcache/)显示的代码几乎相似（没有缓存部分）

现在我如何将所有项目的字体更改为roboto之类的字体

**编辑** 我试过这个

添加了私有字体textFont；在 oncreate() 之前；

```
 TextView yourTextView = (TextView) listAdapter.getView(0, null, null);
      TypefacetextFont=Typeface.createFromAsset(getApplicationContext().getAssets(),"RobotoBoldCondensed.ttf");
     yourTextView.setTypeface(textFont); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:28:09.710

在项目的根目录中创建一个名为`assets/fonts/`然后粘贴 TTF 字体文件（在本例中为 robots.ttf）的文件夹。

然后从你的`adapter's getview()`方法中使用它，如下所示：

```
@Override
public View getView ( int position, View convertView, ViewGroup parent ) {

      /* create a new view of my layout and inflate it in the row */
      convertView = ( RelativeLayout ) inflater.inflate( resource, null );

      /* Extract the city's object to show */
      City city = getItem( position );

      /* Take the TextView from layout and set the city's name */
      TextView txtName = (TextView) convertView.findViewById(R.id.cityName);
      txtName.setText(city.getName());

      /* Take the TextView from layout and set the city's wiki link */
      TextView txtWiki = (TextView) convertView.findViewById(R.id.cityLinkWiki);
      txtWiki.setText(city.getUrlWiki());

      Typeface face=Typeface.createFromAsset(getAssets(),"fonts/roboto.ttf");

      txtName.setTypeface(face);
      txtWiki.setTypeface(face);

      return convertView;
} 
```

**编辑 ：**

改变这一行，

```
TypefacetextFont=Typeface.createFromAsset(getApplicationContext().getAssets(),"RobotoBoldCondensed.ttf"); 
```

和，

```
textFont=Typeface.createFromAsset(getApplicationContext().getAssets(),"RobotoBoldCondensed.ttf"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:22:01.897

在 xml 中：

```
android:typeface 
```

或在java中：

```
setTypeface 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T11:22:17.770

使用[字体](http://developer.android.com/reference/android/graphics/Typeface.html)，您可以更改文本的字体，将所需的`font`ttf 文件保存在资产文件夹中，访问并设置为您的所需视图，如下所示：

```
TextView txt = (TextView) findViewById(R.id.custom_font);  
Typeface font = Typeface.createFromAsset(getAssets(), "roboto.ttf");  
txt.setTypeface(font); 
```

如需更多帮助，请查看[快速提示：自定义 Android 字体](http://mobile.tutsplus.com/tutorials/android/customize-android-fonts/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T11:22:30.517

将您的字体复制到您的`assest`文件夹中，并将此代码放入您的自定义数组适配器中

```
 TextView yourTextView = (TextView)findViewById(R.id.yourid);
    Typeface textFont = Typeface.createFromAsset(context.getAssets(),"YourFont.ttf");
    yourTextView.setTypeface(textFont); 
```

它应该工作。

**编辑**

`private Typeface textFont;` 宣布

```
@Override
public void onCreate(){

textFont = Typeface.createFromAsset(context.getAssets(),"YourFont.ttf"); } 
```

在`OnCreate()`或`OnStart()`

只需在您的`getView()`

```
yourTextView.setTypeface(textFont); 
```

# sql - 获取所有引用（通过外键）表中特定行的行

> ID：14357121
> 
> 赞同：13
> 
> 时间：2013-01-16T11:17:17.187
> 
> 标签：sql, postgresql, foreign-keys

这看起来很简单，但我一直无法找到这个问题的答案。

**我想要什么？**一个主表，其中的行在不再被引用（通过外键）时会自行删除。该解决方案可能特定于 PostgreSql，也可能不特定于 PostgreSql。

**如何？**我解决此问题的一种方法（实际上是迄今为止唯一的方法）涉及以下内容：对于在行上`UPDATE`或`DELETE`行上引用此主表的每个表，检查主表中的引用行，还有多少其他行仍然参考引用的行。如果它下降到零，那么我也会在 master 中删除该行。

（如果你有更好的主意，我想知道！）

**详细说明：** 我有一张被许多其他人引用的主表

```
CREATE TABLE master (
  id serial primary key,
  name text unique not null
); 
```

所有其他表格通常具有相同的格式：

```
CREATE TABLE other (
  ...
  master_id integer references master (id)
  ...
); 
```

如果其中一个不是`NULL`，它们指的是 中的一行`master`。如果我去这个并尝试删除它，我会收到一条错误消息，因为它已经被引用：

```
ERROR:  update or delete on table "master" violates foreign key constraint "other_master_id_fkey" on table "other"
DETAIL:  Key (id)=(1) is still referenced from table "other".
Time: 42.972 ms 
```

请注意，即使我有很多表引用`master`. 如何在不引发错误的情况下找出这些信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T11:35:51.087

您可以执行以下操作之一：

1）将`reference_count`字段添加到主表。在明细表上使用触发器会增加添加`reference count`行的`master_id`时间。当行被删除时减少计数。当`reference_count`达到 0 - 删除记录。

2) 使用`pg_constraint`表（详见[此处](http://www.postgresql.org/docs/current/static/catalog-pg-constraint.html)）获取引用表的列表并创建动态 SQL 查询。

`master_id`3）在每个明细表上创建触发器，在主表中删除。使用 静默错误消息`BEGIN ... EXCEPTION ... END`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-01-27T05:17:32.123

如果有人想要引用给定主行的所有其他表中的真实行数，这里有一些 PL/pgSQL。请注意，这适用于具有单列约束的普通情况。它更多地涉及多列约束。

```
CREATE OR REPLACE FUNCTION count_references(master regclass, pkey_value integer,
    OUT "table" regclass, OUT count integer)
    RETURNS SETOF record 
    LANGUAGE 'plpgsql'
    VOLATILE 
AS $BODY$
declare
  x record;           -- constraint info for each table in question that references master
  sql text;           -- temporary buffer
begin
  for x in
    select conrelid, attname
    from pg_constraint
    join pg_attribute on conrelid=attrelid and attnum=conkey[1]
    where contype='f' and confrelid=master
      and confkey=( -- here we assume that FK references master's PK
        select conkey
        from pg_constraint
        where conrelid=master and contype='p'
      )
  loop
    "table" = x.conrelid;
    sql = format('select count(*) from only %s where %I=$1', "table", x.attname);
    execute sql into "count" using pkey_value;
    return next;
  end loop;
end
$BODY$; 
```

然后像这样使用它

```
select * from count_references('master', 1) where count>0 
```

这将返回一个表的列表，这些表引用了 id=1 的主表。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-16T11:24:29.393

```
SELECT * 
FROM master ma
WHERE EXISTS (
    SELECT *
    FROM other ot
    WHERE ot.master_id = ma.id
    ); 
```

或者，反过来：

```
SELECT * 
FROM other ot
WHERE EXISTS (
    SELECT *    
    FROM master ma
    WHERE ot.master_id = ma.id
    ); 
```

因此，如果您只想更新（或删除） master 中未引用的行`other`，您可以：

```
UPDATE master ma
SET id = 1000+id
  , name = 'blue'
WHERE name = 'green'
AND NOT EXISTS (
    SELECT *
    FROM other ot
    WHERE ot.master_id = ma.id
    ); 
```

# android - Android 构建错误（移植到 ICS）

> ID：14357123
> 
> 赞同：-1
> 
> 时间：2013-01-16T11:17:24.383
> 
> 标签：android, build

我正在从gb移植到android中的ics

我更改了特定文件夹的路径，并在构建后将其保留在不同的路径我收到许多错误，指出文件不存在，因为这些文件存在于我复制到不同路径的文件夹中

我如何链接我的构建和代码以获取我的新路径，因为在我的 Java 文件中我只是编写`import com.android`，而不是文件的实际完整路径。

如何以及在哪里提及文件夹的整个路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:19:41.510

右键单击您的项目。选择构建路径 -> 配置构建路径 -> Java 构建路径

在这里您可以指定更改库的路径。

# java - 在 Hibernate 中使用多个表获取计数？

> ID：14357126
> 
> 赞同：0
> 
> 时间：2013-01-16T11:17:32.550
> 
> 标签：java, mysql, hibernate, jpa

在我的 Sql 中有...4 个表，例如..

```
classtable
sid     date    timetableid
ct1      -       tt1
ct2      -       tt2
ct3     --       tt3 
```

和我的`Timetable`

```
sid    startDate   skillsetid
tt1      ---        ss1
tt2      ---        ss1
tt3      ---        ss2 
```

和我的`Skillset`

```
sid     courseid
ss1        c1
ss2        c2 
```

最后是我的`Course`桌子。

```
sid    name
c1     java
c2     flex 
```

最后我的要求是计算课程数量..使用`Classtable`

例如，根据上面的表格 `2-java`，`1-flex`这些计数将显示在我的 html 页面上，如 2(java) 或 4(flex)..etc .. 我们得到的计数是什么......所以请建议我如何获得计数和在html上显示..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:20:59.977

加入您的表格并将结果分组：

```
SELECT   Course.name, COUNT(*)
FROM     classtable
    JOIN Timetable ON Timetable.sid = classtable.timetableid
    JOIN Skillset  ON  Skillset.sid = Timetable.skillsetid
    JOIN Course    ON    Course.sid = Skillset.courseid
GROUP BY Course.sid 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/4298a/1/0)上查看。

# c++ - C++ 中不推荐使用的强制转换

> ID：14357129
> 
> 赞同：4
> 
> 时间：2013-01-16T11:17:34.800
> 
> 标签：c++, compiler-construction

我`Code::Blocks`用于学习 C++。考虑以下代码：

**C**

```
#include <iostream>
using namespace std;

int main(int argc, char** argv)
{
    const int i = 0;
    int* j = (int*)&i;
} 
```

我在上述程序中使用的演员表在 C++ 中已被弃用（如果我对此正确的话），但在 C 中被遵循。Code::Blocks IDE 没有向我显示此代码的任何警告。我知道 C++ 支持显式转换，例如`const_cast`,`static_cast`等。

我的问题是：互联网上是否有任何免费的 IDE 对这种不推荐使用的语法显示警告？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T11:23:08.693

我假设 CodeBlocks 正在使用 gcc 进行编译。您可以通过添加编译器标志来启用警告`-Wold-style-cast`。您可能需要在 CodeBlocks 中四处寻找才能确定该标志的放置位置。您还可以使用 启用更多警告`-Wall`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T11:44:48.843

您还可以在 Code::Blocks 中启用这些警告。您需要为此添加编译器标志 -Wold-style-cast。这就是我在 Code::Blocks 中的做法：

*   转到顶部菜单中的项目
*   选择构建选项
*   编译器设置选项卡（默认选中）
*   其他选项选项卡
*   在文本字段中输入：-Wold-style-cast

然后你会用你的代码得到这样的输出：

![在此处输入图像描述](../Images/303c0f942757ad100fcea5c3f6c8989b.png)

# objective-c - 用音节分割 NSString

> ID：14357131
> 
> 赞同：-1
> 
> 时间：2013-01-16T11:17:39.120
> 
> 标签：objective-c, ios6

如何使用 Objective-c 拆分 NSString 中的音节。有任何API吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:32:46.963

不，不可能。

由于音节不是固定的方式。没有要检查的模式。

并且编程是为了使事情自动化，甚至当有一些共同的、以任何方式独特的东西时，人工智能也会被实施。

水被分解成Wa + ter。

Objective-c 被分解成 Ob + jec + tive-c。

这使得没有[算法](http://www.aistudy.com/program/prolog/visual_prolog/Dividing%20Words%20into%20Syllables.htm)可以使用 obj-C 的任何 API 来执行和自动化任务。

编辑：

根据您的评论，找到代码：

```
NSString *word=@"encyclopedia";
NSString *formattedWord=word;
for (NSString *vowel in @[@"a",@"e",@"i",@"o",@"u",@"A",@"E",@"I",@"O",@"U"]) {
    formattedWord=[formattedWord stringByReplacingOccurrencesOfString:vowel withString:[NSString stringWithFormat:@"<<<%@",vowel]];
}    
NSArray *brokenWord=[formattedWord componentsSeparatedByString:@"<<<"];

NSString *syllables=[brokenWord componentsJoinedByString:@"+"];

NSLog(@"Syllables of %@ are %@",word,syllables); 
```

# c# - Linq to XML 持有关系

> ID：14357136
> 
> 赞同：0
> 
> 时间：2013-01-16T11:17:48.553
> 
> 标签：c#, .net, xml, linq, linq-to-xml

我有这种结构的 XML 文档：

```
<dipOrders>
    <interchangeInfo senderEdiCode="LSC58" senderEdiCodeQal="ZZ" receiverEdiCode="15274" receiverEdiCodeQal="ZZ" syntax="X12" syntaxId="X" syntaxVersion="003010"/>
    <order orderNumber="219299" orderDate="2012-12-05T00:00:00" validityDate="2012-12-05T00:00:00">
        <buyer name="LEAR MTO">
            <partyCode buyerCode="811567924"/>
        </buyer>
        <supplier name="BRIDGE OF WEIR LEATHER CO">
            <partyCode buyerCode="749630"/>
        </supplier>
        <orderConsignee name="LEAR MEXICAN SEATING CORP">
            <partyCode buyerCode="LSC59"/>
            <orderLine description="LEA DC 378 HERO 6RSB 5B8" orderNumber="246767" engineeringChangeNumber="N">
                <partyCode buyerCode="DC378105H6RSB5B8AA"/>
                <cumulativeQuantity date="2012-12-04T00:00:00" quantity="0"/>
                <orderQuantity quantity="0" commitmentLevel="Firm" timingQualifier="Weekly" shipDate="2012-12-05T00:00:00"/>
            </orderLine>
            <orderLine description="LEA DC 378 HERO 6RSB 5V0" orderNumber="246767" engineeringChangeNumber="N">
                <partyCode buyerCode="DC378105H6RSB5V0AA"/>
                <cumulativeQuantity date="2012-12-04T00:00:00" quantity="0"/>
                <orderQuantity quantity="0" commitmentLevel="Firm" timingQualifier="Weekly" shipDate="2012-12-05T00:00:00"/>
                <orderQuantity quantity="600" commitmentLevel="Firm" timingQualifier="Weekly" shipDate="2012-12-06T00:00:00"/>
            </orderLine> 
```

这是我访问 orderLine 项目属性的方式：

```
List<int> orderNumbers = doc.Descendants("orderLine").Select(x => int)x.Attribute("orderNumber")).ToList();
List<string> descriptions = doc.Descendants("orderLine").Select(x => (string)x.Attribute("description")).ToList();
List<string> buyerCodes = doc.Descendants("orderLine").Select(x => (string)x.Element("partyCode").Attribute("buyerCode")).ToList(); 
```

但是，orderLine 可以有不同数量的 orderQuantity 节点。如何在 Linq 语句中解决它以获得 orderLine 和 orderQuantity 之间的适当关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:21:57.107

尝试`SelectMany`在下一个示例中使用 like

```
var r = doc.Descendants("orderLine")
           .SelectMany(node => node.Elements("orderQuantity")
                                   .Select(el => new {OrderNumber = (int)node.Attribute("orderNumber"), Quantity = (int)el.Attribute("quantity")})); 
```

现在您有一个匿名对象序列，指示订单号和相应的数量，例如：

```
246767 0 
246767 600 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:21:58.363

您可以使用此获取 orderQuantity 元素

```
var data = doc.Descendants("orderLine").
               Descendants("orderQuantity")
             .Select(x =>   new {paernt = x.Parent, x}).ToList(); 
```

也这样做

```
var data = doc.Descendants("orderLine").
               Descendants("orderQuantity")
             .Select(x =>   new {OrderNumber= (int) x.Parent.Attribute("orderNumber"), 
                                                                      x}).ToList(); 
```

# matlab - 如何在matlab中更新txt文件

> ID：14357143
> 
> 赞同：2
> 
> 时间：2013-01-16T11:18:06.160
> 
> 标签：matlab

我想更新包含属性值对的 txt 文件中的一行，其中一个属性位于方括号之间，其值在下面的行中。这是一个示例文件：除此之外，我想忽略以“#”开头的注释行。另一方面，如果我想在评论行中添加评论怎么办？

```
#===========================
#===========================
[system]
# comment 
programming 
#===========================
[information] 
#
application 
```

在这个例子中，“系统”是一个属性，而“编程”是它的值。同样，“信息”是另一种属性，“应用”是它的价值。

我想用属性值对调用我的函数并更新 txt 文件中的相应值。到目前为止，我有以下内容：

```
fh = fopen(filename,'r');
 fh= fopen(filename,'w');
 while ~feof 
 line = fgetl(fh);
 if(line(1) == '[') && (line(end) == ']') 
value = lower(line(2:end-1)); 
```

然后我会将“值”与我的输入进行比较，以检查它是否与属性匹配。如果是这样，我应该用新输入更新下一行。最后我必须写入原始文件。

对于此示例 txt，我如何将“编程”一词更新为“系统信息”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:58:28.997

怎么样

```
function [] = updateFile( fileName, propName, newProbVal )
%
% update file fileName, replacing the value of propName with newPropVal
%
% all inputs are strings
%
rfh = fopen( fileName, 'r' ); % read handle
tname = tempname(); % temporary file name
wfh = fopen( tname, 'w' );

% read line by line
foundFlag = false;
line = fgetl( rfh );
while ischar(line)
    if foundFlag
        fprintf( wfh, '%s\r\n', newProbVal );
        foundFlag = false;
    else
        fprintf( wfh, '%s\r\n', line );
    end
    tks = regexp( line, ['^\[',propName,'\]'] );
    foundFlag = ~isempty(tks);
    line = fgetl( rfh );    
end
fclose( rfh );
fclose( wfh );
movefile( tname, fileName, 'f' ); % rename temp file name 
```

# nhibernate - 查询 Hierarchy 到 Hierarchy 关系时的问题

> ID：14357147
> 
> 赞同：0
> 
> 时间：2013-01-16T11:18:21.227
> 
> 标签：nhibernate, nhibernate-mapping, linq-to-nhibernate

老师与学生一对一。

SpecialTeacher 扩展了 Teacher，但专门处理 SpecialStudents。

在层次结构中使用每个类的表。

```
 public class Teacher
    {
        public virtual int Id { get; set; }
        public virtual int DepartmentId { get; set; }
        public virtual String Name { get; set; }
        public virtual Student Student { get; set; }
    }

    public class SpecialTeacher : Teacher
    {
        public virtual string TelephoneNumber { get; set; } //SpecialTeachers get to have a phone
        public virtual SpecialStudent SpecialStudent { get { return (SpecialStudent)base.Student; } set { Student = value; } }
    }

    public class Student
    {
        public virtual int Id { get; set; }
        public String Name { get; set; }
    }

    public class SpecialStudent : Student
    {
        public int SpecialMark { get; set; }
    } 
```

以及相关的映射：

```
<class name="Student">
    <id name="Id" />
    <property name="Name" />
</class>

<joined-subclass name="SpecialStudent" extends="Student">
  <key column="Id" />
  <property name="SpecialMark" />
</joined-subclass>

<class name="Teacher">
  <id name="Id" />
  <property name="DepartmentId" />
  <property name="Name" />

  <many-to-one name="Student" column="StudentId" />
</class>

<joined-subclass name="SpecialTeacher" extends="Teacher">
  <key column="Id" />
  <property name="TelephoneNumber" />
</joined-subclass> 
```

因此，假设我们想要获得给定部门的 SpecialStudents 的平均分数：

```
 public double GetAverageScoreForSpecialStudentsByDepartment(int departmentId)
    {
        return CurrentSession.Query<SpecialTeacher>()
            .Where(st => st.DepartmentId == departmentId)
            .Average(ss => ss.SpecialStudent.SpecialMark);
    } 
```

测试将失败，因为它会抱怨 SpecialStudent 不是 SpecialTeacher 的映射属性。

我能想到避免这个问题的唯一方法是映射属性，但这是重复的，因为基础教师已经映射到学生层次结构。

**更新**

我还想提一下，之前我们将 SpecialTeacher 设置为：

```
public class SpecialTeacher : Teacher
{
    public virtual string TelephoneNumber { get; set; } //SpecialTeachers get to have a phone
    public virtual new SpecialStudent Student { get { return (SpecialStudent)base.Student; } set { Student = value; } }
} 
```

这似乎工作正常，但 Envers 在检索审计数据时没有使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:25:01.727

> 我能想到避免这个问题的唯一方法是映射属性，但这是重复的，因为基础教师已经映射到学生层次结构。

这不是重复，因为您从未在映射文件中映射该`SpecialStudent`属性。`SpecialTeacher`尽管您在代码中正确定义了关系，但 NHibernate 无法知道 a`SpecialTeacher`是否应该具有`SpecialStudent`. NHibernate 使用该代码从表中重新创建对象，但前提是您在映射中定义了正确的关系。

请记住，`BaseTeacher`to`BaseStudent`并不意味着`SpecialTeacher`关系`SpecialStudent`。

# ruby-on-rails-3.2 - 运行多个 Sunspot solr 服务器实例以使用 parallel_tests gem 运行黄瓜测试

> ID：14357148
> 
> 赞同：0
> 
> 时间：2013-01-16T11:18:25.467
> 
> 标签：ruby-on-rails-3.2, cucumber, selenium-webdriver, sunspot-rails

我正在使用[parallel_tests gem](https://github.com/grosser/parallel_tests)来并行运行我的黄瓜功能。当我试图运行杯子时，我得到了

```
Sunspot::Solr::Server::AlreadyRunningError 
```

但该过程仍在继续，并且只有一个 Firefox 窗口正在运行。

我的机器有两个 CPU，我猜第二个正在尝试在第一个已经启动之后启动 sunspot 服务器。

但我担心的问题是，我可能不会使用仅运行一个 firefox 窗口的 parallel_tests 的功能。

单个 sunspot 服务器可以为所有端口提供服务吗？对我来说，只打开了一个 firefox 窗口，并且 cuke 只为一个进程运行。很少有两个太阳黑子服务器正在运行，当时我可以看到两个浏览器窗口正在打开并且所有的 cuke 正在运行。

反正有运行两个太阳黑子实例吗？

我在这里错过了什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T16:21:58.673

这个问题显然是通过不同的对话解决的，列在[https://github.com/grosser/parallel_tests/issues/176](https://github.com/grosser/parallel_tests/issues/176)

# tridion - 访问核心服务时出现 Tridion 错误

> ID：14357152
> 
> 赞同：0
> 
> 时间：2013-01-16T11:18:43.487
> 
> 标签：tridion, tridion-2011, tridion-core-services

在 ServiceModel 客户端配置部分中找不到名称为“wsHttp”和合同“Tridion.ContentManager.CoreService.Client.ISessionAwareCoreService”的端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此名称匹配的端点元素

访问时：

ISessionAwareCoreService client = new ChannelFactory("wsHttp").CreateChannel();

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T07:37:10.120

当您使用 Tridion 核心服务编写软件时，您需要做以下两件事之一：

1.  为您的应用程序创建一个包含正确 WCF 配置的配置文件
2.  通过编写代码在您的软件中设置 WCF 设置。

如果您正在创建一个配置文件，那么您可以从复制 Tridion 提供的默认文件开始。在我的系统上，这是`C:\Program Files (x86)\Tridion\bin\client\Tridion.ContentManager.CoreService.Client.dll.config`

如果您的核心服务客户端在 Tridion 服务器本身上运行，那可能就足够了。如果您“开箱即用”，则需要对其进行适当的编辑。

如果您想通过代码进行设置，可以从[Tridion Cookbook 中的这个食谱](http://code.google.com/p/tridion-practice/wiki/GetCoreServiceClientWithoutConfigFile)开始。（还有[一个非代码方法的秘诀。](http://code.google.com/p/tridion-practice/wiki/GetCoreServiceClientWithConfigFile)）

# iphone - 无法在 ipad 应用程序中设置方向

> ID：14357155
> 
> 赞同：0
> 
> 时间：2013-01-16T11:18:46.437
> 
> 标签：iphone, ios, objective-c, ipad, ios5

我正在使用 ios6 版本来生成新的 Ipad 应用程序。在我的应用程序中，我正在创建一个拆分视图。该拆分视图必须始终处于横向模式。应用程序在 ipad 6.0 模拟器中运行。但不适用于 ipad 5.0 模拟器。我想同时运行 ipad 6.0 和 ipad 5.0 的应用程序。

我正在使用此代码

```
-(NSUInteger)supportedInterfaceOrientations
{
     return UIInterfaceOrientationMaskLandscape;
}

-(BOOL) shouldAutorotate {
     return NO;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:34:21.310

您可以像这样在 ios6 中进行操作：-

```
-(BOOL)shouldAutorotate
{
    return YES;
}
-(NSUInteger)supportedInterfaceOrientations
{

    return UIInterfaceOrientationMaskAll;
} 
```

并每次检查`ViewWillApear`设备方向，例如：-

```
- (void)willRotateToOrientation:(UIInterfaceOrientation)newOrientation {
        if (UIDeviceOrientationIsLandscape([UIDevice currentDevice].orientation))
        {
            if (newOrientation == UIInterfaceOrientationLandscapeLeft || newOrientation == UIInterfaceOrientationLandscapeRight) {

              //set your landscap View Frame
                [self supportedInterfaceOrientations];

            }

        }
        else if (UIDeviceOrientationIsPortrait([UIDevice currentDevice].orientation))
        {
            if(newOrientation == UIInterfaceOrientationPortrait || newOrientation == UIInterfaceOrientationPortraitUpsideDown){
      //set your Potrait View Frame
                [self supportedInterfaceOrientations];

            }
        }
        // Handle rotation
    }

    -(void)viewWillAppear:(BOOL)animated
    {
        [self willRotateToOrientation:[[UIDevice currentDevice] orientation]];  
        [super viewWillAppear:YES];
    } 
```

**更新**

很可能人们使用下面这样的检查设备`orientation`将这条线放入`ViewWillApear`：-

```
[[UIApplication sharedApplication] statusBarOrientation];
    [[UIDevice currentDevice] orientation];
    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(deviceRotated:) name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

和

```
-(void)deviceRotated:(NSNotification*)notification
{

    UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];
    if(orientation == UIInterfaceOrientationLandscapeLeft || orientation == UIInterfaceOrientationLandscapeRight)
    {
        //Do your stuff for landscap
    }
    else if(orientation == UIInterfaceOrientationPortrait || toInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)
    {
      //Do your stuff for potrait

    }

} 
```

**在 IOS5 中，你可以像下面这样做：**

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

    if (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight) {

        return YES;
    }
    else
    {
        return NO;
    }
}

if you wish to support all oriantation you need to just return YES  like:-

 -(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

            return YES;  
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:22:12.980

在 iOS 5.0 中，您应该使用：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return interfaceOrientation == UIInterfaceOrientationMaskLandscape;
} 
```

# ruby-on-rails - Rails、Heroku、Paperclip、S3 和裁剪

> ID：14357163
> 
> 赞同：0
> 
> 时间：2013-01-16T11:19:29.587
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, amazon-s3, paperclip

对于我的应用程序，我需要图像的裁剪功能。我跟着 railscast [http://railscasts.com/episodes/182-cropping-images](http://railscasts.com/episodes/182-cropping-images)

Aaaall 在我的本地机器上运行良好。我有我的 owm 回形针处理器，它从 Thumbnail 处理器扩展而来。该处理器存储在 lib/paperclip_processors/cropper.rb 下

```
module Paperclip
  class Cropper < Thumbnail

    def transformation_command
      if crop_command
        cmd = crop_command + super.join(" ").sub(/ -crop \S+/, '')
        cmd.split(" ")
      else
        super
      end
    end

    def crop_command
      target = @attachment.instance
      if target.cropping?
        " -crop \"#{target.crop_w.to_i}x#{target.crop_h.to_i}+#{target.crop_x.to_i}+#{target.crop_y.to_i}\" "
      end
    end
  end
end 
```

在我的本地机器上，它使用这个处理器进行裁剪。在 heroku 上，这个模块似乎被完全忽略了。

是的，我搜索了大约 6 个小时的解决方案......

1.

```
#application.rb
config.autoload_paths += %w(#{config.root}/lib)     
#or 
config.autoload_paths += Dir["#{config.root}/lib/**/"]
#or
config.autoload_paths += Dir["#{config.root}/lib/paperclip_processors/cropper.rb"]

#all not working 
```

2.

```
#initializers/includes.rb
require "cropper"

#or

Dir[Rails.root + 'lib/**/*.rb'].each do |file|
  require file
end 
```

为什么我的模块没有加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T06:20:40.990

您可能想要检查条件是否被调用。

```
 if target.cropping?
      " -crop \"#{target.crop_w.to_i}x#{target.crop_h.to_i}+#{target.crop_x.to_i}+ #{target.crop_y.to_i}\" "
    end 
```

几天前我在 Heroku 上裁剪时遇到了类似的麻烦。

# c# - 如何针对不同的配置（发布、调试等）为 Azure 构建不同的启动任务

> ID：14357171
> 
> 赞同：2
> 
> 时间：2013-01-16T11:19:50.113
> 
> 标签：c#, visual-studio, azure

我在 Azure 项目的 ServiceDefinition 文件中有这些行：

```
<Startup>
  <Task commandLine="Tools\Reminder.cmd" executionContext="elevated" taskType="simple" />
</Startup> 
```

但是对于测试服务器和生产服务器，它必须是不同的 Reminder.cmd 文件。我该怎么做？我知道我们可以为 ServiceConfiguration 设置不同的配置，但不知道如何为 ServiceDefinition 文件设置不同的配置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:41:08.843

不幸的是，没有办法配置您的 ServiceDefinition 文件来为在已部署环境中运行的启动任务执行此操作。围绕此的一般建议是将自定义代码/测试放在任务本身中，如果它没有在您的生产服务器中运行，则退出。

但是，您可以在 ServiceDefinition 中将启动任务配置为不在本地开发机器上运行。史蒂夫马克思有一篇关于如何做到这一点的[好帖子。](http://blog.smarx.com/posts/skipping-windows-azure-startup-tasks-when-running-in-the-emulator)

```
<Startup>
  <Task executionContext="elevated" commandLine="startup\startup.cmd">
    <Environment>
      <Variable name="EMULATED">
        <RoleInstanceValue xpath="/RoleEnvironment/Deployment/@emulated" />
      </Variable>
    </Environment>
  </Task>
</Startup> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:04:09.700

我知道的最简单的方法是为每个环境使用不同的 CSDEF 文件。[这个问题](https://stackoverflow.com/questions/12009760/can-azure-vm-sizes-be-configured-by-service-configuration)的答案将告诉你如何去做。

这个问题是关于改变虚拟机大小的，但实际上是同一个问题。在您的情况下，您只需更改每个环境的启动任务。

# spring - 工作详细的简单 Vaadin 应用程序（不是 servlet）和 Spring Security 示例

> ID：14357174
> 
> 赞同：0
> 
> 时间：2013-01-16T11:20:00.617
> 
> 标签：spring, spring-security, vaadin

我在哪里可以找到一个完整的详细的简单 Vaadin 应用程序（不是 servlet）和 Spring Security 示例，该示例通过简单的 buttonClick 登录用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:30:12.140

很少有好的链接可能对您有帮助

[瓦丁](https://vaadin.com/tutorial/-/chapter/skeleton.main-layout.html)

[瓦丁](https://vaadin.com/tutorial)

[vaadin 春季安全](http://morevaadin.com/content/spring-security-integration/)

# rewrite - 根类别的 magento 基本 url

> ID：14357177
> 
> 赞同：0
> 
> 时间：2013-01-16T11:20:07.837
> 
> 标签：rewrite, categories, magento-1.7, product, base-url

我在一家商店有几个窗户。如何让 Magento 使用 Magento 设置的基本 URL？现在，即使商店附加到目录的根目录，它也会为所有窗口复制相同的项目。这意味着一个项目存在于不同的域中，但它位于目录的同一类别中

子域1/诺基亚1280 ...子域3/诺基亚1280

URL 重写管理没有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:23:09.077

我不确定问题是什么，但如果您想在产品中使用多个域，您应该执行以下操作：

**Foreach 子域**

*   将子域重定向到 magento 商店（例如 vhost 别名）
*   更改.htaccess以根据Referer设置环境
*   为此域添加新的根类别
*   使用 Storeview 创建新商店
*   转到 Sysem => Configuration => Web 并选择左上角的 storeview
*   将基本 URL 更改为此商店的子域。
*   转到系统 => 配置 => 设计并更改此商店的模板/皮肤/布局

现在将您的子域加载到他自己的环境中，并使用他自己的模板和皮肤。

**更多信息**

*使用网站*

> 请注意，用户将在不同的域中共享。如果你不想要这个，你应该更进一步，做更多的网站。

*.htaccess 设置环境*

> SetEnvIf 主机 sub1.website.dev MAGE_RUN_CODE=subdomain1
> 
> SetEnvIf 主机 sub1.website.dev MAGE_RUN_TYPE=store
> 
> SetEnvIf Host sub2.website.dev MAGE_RUN_CODE=subdomain2
> 
> SetEnvIf 主机 sub2.website.dev MAGE_RUN_TYPE=store

希望这会有所帮助！

祝你好运。

# c# - 在 C# 中将图像添加到 DataGridViewImageColumn

> ID：14357178
> 
> 赞同：1
> 
> 时间：2013-01-16T11:20:09.120
> 
> 标签：c#, image, datagridviewcolumn

我正在尝试通过代码甚至在设计时将图像添加到 DataGridViewImageColumn

它总是出现带有“x”表示没有图像的默认 c# 图像

我试过微软的这段代码

```
 Icon treeIcon = new Icon(this.GetType(), "tree.ico");
DataGridViewImageColumn iconColumn = new DataGridViewImageColumn();
iconColumn.Image = treeIcon.ToBitmap();
iconColumn.Name = "Tree";
iconColumn.HeaderText = "Nice tree";
dataGridView1.Columns.Insert(2, iconColumn); 
```

.但是我在资源中添加了一个 .ico - 还尝试了文件路径 - 异常结果表明在表单类中找不到 tree.ico

我用图像替换了图标

```
 ataGridViewImageColumn img = new DataGridViewImageColumn();
            img.ValuesAreIcons = true;
            Image image = Image.FromFile("C:/Users/../Desktop/app_edit.png");
            img.Image = image;
            showprocessed_dataGridView.Columns.Add(img);
            img.HeaderText = "Image";
            img.Name = "img"; 
```

这导致 ataGridViewImageColumn 中显示默认的“无图像”，这个问题的解决方案是什么？是图片格式的问题还是什么！！任何帮助，将不胜感激 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T10:53:28.440

使用 RowDataBound 事件将图像绑定到网格，

```
protected void gridView1_RowDataBound(Object sender, GridViewRowEventArgs e)
{
 if(e.Row.RowType == DataControlRowType.DataRow)
 {
  Image imgGridview = (Image) e.Row.FindControl("imgGrv");
  imgGridview.ImageUrl = "images/test.gif";
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:21:25.053

Microsoft 的代码看起来正在更改列*标题*中的图像。它不会添加包含图像的行。为此，您需要将一条记录添加到您绑定到的数据源中，`DataGridView`其中包含正确的图像数据，或者手动创建一个`DataGridViewRow`您添加到`DataGridView`.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-10-27T14:50:42.017

您必须在您编写的第二个代码上`img.ValuesAreIcons`从更改`true`为。`false`它会起作用，当我使用您的代码解决此问题时，它发生在我身上。

# drupal - 我们可以在 AppHarbor 上托管 drupal 应用程序吗？

> ID：14357196
> 
> 赞同：0
> 
> 时间：2013-01-16T11:21:05.407
> 
> 标签：drupal, hosting, appharbor

我想知道我们是否可以在 AppHarbor 上托管 Drupal 应用程序？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:50:31.740

看看 AppHarbour，它是一个托管 .net 应用程序的服务，因为 Drupal 是用 PHP 编写的，所以你不能。

虽然您可以尝试使用 .net [http://phalanger.codeplex.com/的 php 编译器](http://phalanger.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:40:51.537

Wordpress 可以[在 AppHarbor 上运行](https://github.com/appharbor/Wordpress)，而 Drupal 也可以使用一点点肘部油脂。

# ios - 突然导航更改iOS时应用程序崩溃

> ID：14357200
> 
> 赞同：0
> 
> 时间：2013-01-16T11:21:12.470
> 
> 标签：ios, crash, nsmutablearray, uitabbarcontroller, nsarray

我正在使用标签栏控制器创建一个 iPhone 应用程序。我有两个带有 tableview 控制器的选项卡。在这两个选项卡中都有一些 Web 服务调用，它会更新表格内容。我正在使用加载指示器，所有服务调用都在后台线程上执行，主线程上的 UI 更新使用`waitUntilDone:YES`. 在正常情况下，一切正常。

但问题是，如果我反复突然更改选项卡，应用程序会崩溃并显示错误消息：

```
*** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 0 beyond bounds for empty array'
*** First throw call stack:
(0x382a62a3 0x3338d97f 0x381f1b75 0x1521f9 0x362fb545 0x362e030b 0x362f77c7 0x362b3803 0x312d1d63 0x312d1901 0x312d2835 0x312d221b 0x312d2029 0x362b98eb 0x3827b6cd 0x382799c1 0x38279d17 0x381ecebd 0x381ecd49 0x3a0ec2eb 0x363042f9 0xcd317 0xc0b70)
libc++abi.dylib: terminate called throwing an exception 
```

我知道，这是因为尝试从没有内容的 NSArray 访问值。但是，这有什么共同的原因吗？我的意思是，如果我以正常速度进行制表符更改，则没有问题。但是，如果我尝试更改选项卡，则在加载指示器结束后，应用程序就会崩溃。我无法在代码上跟踪这一点。崩溃发生在`main.m`

请分享你的想法。

**更新**

问题发生在

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { 
```

在

```
 songTitle.text = [songTitleSH objectAtIndex:indexPath.row];
    albumTitle.text = [albumNameSH objectAtIndex:indexPath.row];
    artistName.text = [artistNameSH objectAtIndex:indexPath.row];
    commentDateLbl.text = [playDateSH objectAtIndex:indexPath.row]; 
```

我在这些数组中得到 NULL 值，这导致了问题。那么，我该如何克服这个问题呢？任何想法？

# svn - 使用 Jenkins 和电子邮件分机。如何将 SVN_REVISION_1 添加到电子邮件中？

> ID：14357203
> 
> 赞同：1
> 
> 时间：2013-01-16T11:21:20.753
> 
> 标签：svn, jenkins, jenkins-plugins, email-ext

我正在构建一个包含多个 SVN 存储库的项目。当作业成功或失败时，使用 Email-ext 插件发送电子邮件。

当我使用令牌 ${SVN_REVISION} 时，我得到的只是数字 400，它不是内部版本号，也不是任何存储库的修订号。

我想要使​​用的是 svn 插件提供的相同变量：%SVN_REVISION_1%，但 ${ENV, var="SVN_REVISION_1"} 和 ${ENV, var="%SVN_REVISION_1%"} 都不起作用。

此外，当我列出变量 (${ENV, var=""}) 时，我找不到 SVN_REVISION 或 SVN_REVISION_1。

电子邮件的主题需要有 SVN_REVISION_1，否则查找构建的版本会很麻烦。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T05:44:18.897

我刚刚尝试将 ${ENV, var="SVN_REVISION_1"} 与我们在 subversion 上使用的两个模块一起使用，并且它有效。谢谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T11:42:29.273

${ENV, var="SVN_REVISION_1"} 确实有效。我试图通过中止构建来强制发送电子邮件。如果构建过早中止，则永远不会创建 SVN_REVISION_1。

# .net - ASP.NET MVC - 需要帮助来改进下拉框的代码？

> ID：14357206
> 
> 赞同：1
> 
> 时间：2013-01-16T11:21:34.327
> 
> 标签：.net, asp.net-mvc, razor

我创建了以下下拉列表来填充城市列表。

一切正常，但我想知道这样做的更好方法。另外，请让我知道是否可以使用 < Select > 而不是 HTML 帮助程序创建相同的下拉菜单。

以下是我的 DTO 课程。请告知我是否可以对控制器和视图进行改进。

```
//ViewModel

public class LocationDTO
{
    public IEnumerable<CityDTO> Cities { get; set; }
    public LocationDTO()
    {
        this.Cities = new CityDTO[] { };
    }
}

public class CityDTO
{
    public string CityId { get; set; }
    public string CityName { get; set; }
} 
```

下面是我的控制器，我使用实体框架数据库优先方法从数据库中获取数据。您能否解决需要在我的控制器上进行的改进？

```
//Controller

Models.LocationDTO Loc = new Models.LocationDTO();
EF.LocationEntities locCtx = new EF.LocationEntities();

public Action Result Index() {
    using(locCtx) { 
        var locResults    = (from q in locCtx.usp_GetAllCities()
                       Select new Models.CityDTO {
                       CityId = q.Id, 
                       CityName = q.Name  }); 
        loc.Cities = locResults.ToList();
    }

    List<Models.CityDTO> citiesList = new List<Models.CityDTO>();
    Models.CityDTO city = new Models.CityDTO() { CityId = "-1", CityName = "Select City" };
    citiesList.Add(city);
    citiesList.AddRange(Loc.Cities.ToList());

    ViewBag.CitiesDropDown = citiesList;
    return view(loc);
} 
```

下面是我的观点。我还想知道 lamdba 表达式在这种情况下是如何工作的。

```
//View

@{
    List<TestApp.Models.CityDTO> citiesList = ViewBag.CitiesDropDown;
    var cityItems = new SelectList(citiesList, "CityId", "CityName");
}
<div>
    Cities: @Html.DropDownListFor(x => x.Cities.SingleOrDefault().CityID, @cityItems)
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:00:52.217

可以在您的控制器上进行许多改进。

让我们从抽象数据访问开始：

```
public interface ICitiesRepository
{
    IEnumerable<City> GetAll();
} 
```

然后有一个实现：

```
public class CitiesRepositoryEF: ICitiesRepository
{
    public IEnumerable<City> GetAll()
    {
        using (var ctx = new LocationEntities())
        {
            return ctx.usp_GetAllCities().ToList();
        }
    }
} 
```

好的，现在让我们为我们的视图定义一个视图模型：

```
public class MyViewModel
{
    public string SelectedCityId { get; set; }
    public IEnumerable<SelectListItem> Cities { get; set; }
} 
```

接下来是控制器：

```
public class CitiesController: Controller
{
    private readonly ICitiesRepository repository;
    public CitiesController(ICitiesRepository repository)
    {
        this.repository = repository;
    }

    public ActionResult Index()
    {
        var model = new MyViewModel();
        model.Cities = this
            .repository
            .GetAll()
            .ToList()
            .Select(x => new SelectListItem
            {
                Value = x.Id.ToString(),
                Text = x.Name
            });
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        return Content("Thanks for selecting city: " + model.SelectedCityId);
    }
} 
```

最后，您将拥有一个相应的视图，该视图当然会被强输入到视图模型中：

```
@model MyViewModel
@using (Html.BeginForm())
{
    @Html.DropDownListFor(x => x.SelectedCityId, Model.Cities, "Select City")
    <button type="submit">OK</button>
} 
```

现在剩下的就是配置您最喜欢的依赖注入框架以将`CitiesRepositoryEF`具体实例注入控制器。

# networking - 如何在 Linux 下隐藏进程中的网络接口？

> ID：14357207
> 
> 赞同：2
> 
> 时间：2013-01-16T11:21:37.540
> 
> 标签：networking, bandwidth

我正在尝试使用具有 2 个端口（eth1、eth2）的 10G 网卡进行一些网络测试。为了测试，我会使用类似 iperf 的东西来做带宽测试：

我将电缆直接从端口 1(eth1) 连接到端口 2(eth2)。

ip地址：

```
eth1: 192.168.20.1/24
eth2: 192.168.20.2/24 
```

1号航站楼：

```
user@host:~$ iperf -s -B 192.168.20.1 
```

2号航站楼：

```
user@host:~$ iperf -c 192.168.20.1 
```

结果：

```
------------------------------------------------------------
Client connecting to 192.168.20.1, TCP port 5001
TCP window size:  169 KByte (default)
------------------------------------------------------------
[  3] local 192.168.20.1 port 53293 connected with 192.168.20.1 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0-10.0 sec  41.6 GBytes  35.7 Gbits/sec 
```

如您所见，数据根本不通过电缆，而只是通过本地主机或内存，这就是为什么我的速度超过 10G。

是否可以从命令“iperf -c 192.168.20.1”中隐藏 eth1，以便强制通过电缆传输数据？

## 更新1：

在@Mardanian 引用之后，我现在尝试了以下操作：

```
Note: Ports are now eth2/eth3 (not eth1/eth2)
eth2 has mac address 00:40:c7:6c:01:12
eth3 has mac address 00:40:c7:6c:01:13

ifconfig eth2 192.168.20.1/24 up
ifconfig eth3 192.168.20.2/24 up
arp -s 192.168.20.3 00:40:c7:6c:01:12
arp -s 192.168.20.4 00:40:c7:6c:01:13
ip route add 192.168.20.3 dev eth3
ip route add 192.168.20.4 dev eth2
iptables -t nat -A POSTROUTING -d 192.168.20.4 -j SNAT --to-source 192.168.20.3
iptables -t nat -A POSTROUTING -d 192.168.20.3 -j SNAT --to-source 192.168.20.4
iptables -t nat -A PREROUTING -d 192.168.20.3 -j DNAT --to-destination 192.168.20.1
iptables -t nat -A PREROUTING -d 192.168.20.4 -j DNAT --to-destination 192.168.20.2

iperf -s -B 192.168.20.3
bind failed: Cannot assign requested address 
```

这些虚拟地址似乎无法正常工作，我似乎无法绑定甚至 ping 它们。

```
arp -an
? (192.168.20.3) at 00:40:c7:6c:01:12 [ether] PERM on eth2
? (192.168.20.4) at 00:40:c7:6c:01:13 [ether] PERM on eth3 
```

据我了解，arp 不会将 ip 地址绑定到接口，它只是告诉系统为了找到某个 ip，它让系统知道要通过哪个接口 - 这就是为什么我无法绑定到虚拟 IP 地址。如果我绑定到真实的 IP 地址，那么我仍然会通过本地系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:08:43.840

如果 iperf 检测到目标是本地的，它将始终使用环回。强制内核通过接口路由它。请参阅[linux：禁用使用环回并通过线路在一个计算机的 2 个 eth 卡之间发送数据](https://stackoverflow.com/questions/2734144/linux-disable-using-loopback-and-send-data-via-wire-between-2-eth-cards-of-one)

# amazon-ec2 - EC2：与 rc.d 启动脚本相比，userdata 脚本何时运行？

> ID：14357210
> 
> 赞同：1
> 
> 时间：2013-01-16T11:21:40.833
> 
> 标签：amazon-ec2

userdata 脚本是在设置为在每次启动时运行的脚本之前还是之后运行的？有没有办法改变优先级？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:56:36.737

运行 Userdata 脚本时`/etc/init.d/cloud-init-user-scripts`，启动和关闭优先级均为“99”，这意味着它是最后一次运行。没有办法改变它，除非用 init.d 脚本中指定的新优先级烧录一个新的 AMI。

# android - 使用 IP 地址和端口号将 .txt 文件、图像、.doc 文件发送到服务器

> ID：14357211
> 
> 赞同：1
> 
> 时间：2013-01-16T11:21:42.817
> 
> 标签：android, file, ip, client-server, port

我正在android中开发一个应用程序。我的问题是如何使用我的服务器连接的IP地址和端口号将整个.txt文件、图像、.doc文件发送到服务器。在我的 GUI 中，我必须提供用户选择的路径。意味着用户必须选择他/她要发送的文件路径...请帮我解决我的问题...谢谢...

# php - 如何从 SWF 文件中捕获图像？

> ID：14357216
> 
> 赞同：2
> 
> 时间：2013-01-16T11:21:54.250
> 
> 标签：php, javascript, flash

我已经在互联网的深处搜索了解决方案，但不幸的是，所有讨论该问题的帖子都已过时并且没有提供任何解决方案。

我需要能够从 SWF 文件**动态**生成屏幕截图并将其本地保存到服务器。有些帖子建议使用 FFMPEG，但我认为它不支持 SWF 格式。另一个建议使用 Internet Explorer 的抓屏功能，但这仅限于 Windows。

非常感谢有关如何执行此操作的任何答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:41:49.577

如果您拥有一台服务器，您可以安装 PHP 扩展 (http://php.net/manual/en/swf.setup.php) 但是，这对于获取一帧来说有点过头了。

其他解决方案是使用此类： [http ://www.sephiroth.it/swfreader.php](http://www.sephiroth.it/swfreader.php)

此外，您可以编写自己的解析器，在这种情况下，请参阅 Adob​​e 的 flasg 格式规范： http: [//www.adobe.com/content/dam/Adobe/en/devnet/swf/pdf/swf_file_format_spec_v10.pdf](http://www.adobe.com/content/dam/Adobe/en/devnet/swf/pdf/swf_file_format_spec_v10.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:40:12.907

如果我理解正确，您需要在服务器端生成图像。请查看此处描述的解决方案：http: [//techblog.floorplanner.com/post/20528549445/server-side-png-rendering-of-swf-images-using-gnash](http://techblog.floorplanner.com/post/20528549445/server-side-png-rendering-of-swf-images-using-gnash)

我自己没有尝试过，但希望它会有所帮助。另外，如果在第一个用户打开 swf 后可以生成图像并且有可能更改 SWF 的代码，我建议您查看这篇文章：[http ://www.flepstudio.org/论坛/教程/507-swf-png-actionscript-3-0-bytearray-class.html](http://www.flepstudio.org/forum/tutorials/507-swf-png-actionscript-3-0-bytearray-class.html)

# r - 从R中检索自己的IP地址的功能？

> ID：14357219
> 
> 赞同：24
> 
> 时间：2013-01-16T11:22:00.627
> 
> 标签：r

有谁知道能够检索自己的IP地址（您正在使用的PC）的R函数？这将非常有帮助！提前谢谢了。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-16T11:46:40.703

`system()`您可以向操作系统发出命令：

*   在 Windows 中，您可以使用`ipconfig`
*   在 Linux 中，使用`ifconfig`

例如，在 Windows 上尝试`system()`使用参数调用以`intern=TRUE`将结果返回给 R：

```
x <- system("ipconfig", intern=TRUE) 
```

这将返回：

```
x
 [1] ""                                                                   
 [2] "Windows IP Configuration"                                           
 [3] ""                                                                   
 [4] ""                                                                   
 [5] "Wireless LAN adapter Wireless Network Connection:"                  
 [6] ""                                                                   
 [7] "   Connection-specific DNS Suffix  . : tbglondon.local"             
 [8] "   Link-local IPv6 Address . . . . . : fe80::c0cb:e470:91c7:abb9%14"
 [9] "   IPv4 Address. . . . . . . . . . . : 10.201.120.184"              
[10] "   Subnet Mask . . . . . . . . . . . : 255.255.255.0"               
[11] "   Default Gateway . . . . . . . . . : 10.201.120.253"              
[12] ""                                                                   
[13] "Ethernet adapter Local Area Connection:"                            
[14] ""                                                                   
[15] "   Connection-specific DNS Suffix  . : tbglondon.local"             
[16] "   Link-local IPv6 Address . . . . . : fe80::9d9b:c44c:fd4d:1c77%11"
[17] "   IPv4 Address. . . . . . . . . . . : 10.201.120.157"              
[18] "   Subnet Mask . . . . . . . . . . . : 255.255.255.0"               
[19] "   Default Gateway . . . . . . . . . : 10.201.120.253"              
[20] ""                                                                   
[21] "Tunnel adapter Local Area Connection* 13:"                          
[22] ""                                                                   
[23] "   Media State . . . . . . . . . . . : Media disconnected"          
[24] "   Connection-specific DNS Suffix  . : "                            
[25] ""                                                                   
[26] "Tunnel adapter isatap.tbglondon.local:"                             
[27] ""                                                                   
[28] "   Media State . . . . . . . . . . . : Media disconnected"          
[29] "   Connection-specific DNS Suffix  . : tbglondon.local"             
[30] ""                                                                   
[31] "Tunnel adapter Teredo Tunneling Pseudo-Interface:"                  
[32] ""                                                                   
[33] "   Media State . . . . . . . . . . . : Media disconnected"          
[34] "   Connection-specific DNS Suffix  . : " 
```

现在您可以使用`grep`以下命令查找行`IPv4`：

```
x[grep("IPv4", x)]
[1] "   IPv4 Address. . . . . . . . . . . : 10.201.120.184"
[2] "   IPv4 Address. . . . . . . . . . . : 10.201.120.157" 
```

并仅提取 IP 地址：

```
z <- x[grep("IPv4", x)]
gsub(".*? ([[:digit:]])", "\\1", z)
"10.201.120.184" "10.201.120.157" 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-05-26T04:13:10.877

我最近创建了一个最小的包`ipify.org`来做这件事。

使用很简单，可以使用`devtools`和github安装。

`library(devtools) install_github("gregce/ipify")`

一旦安装，它就像加载库和一个函数调用一样简单......

`library(ipify) get_ip()`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-12-19T07:07:05.100

虽然@andrie 用非常通俗的语言解释了它，但我相信它对我们理解它的功能有很大帮助。

所以从那里只共享一个行代码而不安装任何其他包。

```
gsub(".*? ([[:digit:]])", "\\1", system("ipconfig", intern=T)[grep("IPv4", system("ipconfig", intern = T))]) 
```

希望这会有所帮助！

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2016-04-26T18:03:44.527

这将准确检索您想要的内容：

```
system('ipconfig getifaddr en0')

192.168.1.73 
```

# sql - SQL UPDATE 语法错误

> ID：14357220
> 
> 赞同：0
> 
> 时间：2013-01-16T11:22:01.473
> 
> 标签：sql, vb.net, ms-access

我正在尝试使用 vb.net 在 ms-access 中更新表中的一些数据。但是，在尝试运行代码时出现错误。我的查询是：

`Query = "UPDATE tabDatafiveMinutely SET PAR0050=308.3925 WHERE TimeValue = #16 May 2012 14:30:00#"`

我得到的错误是：

`No value given for one or more required parameters.`

有没有人对如何解决这个问题有任何想法？

编辑：

语法正确我的数据库有问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:27:35.900

*促进按要求回答*:)

此错误意味着查询中指定的某些字段名称在表中不存在（或者是保留字）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:08:48.233

use this

```
Query = "UPDATE tabDatafiveMinutely SET PAR0050=308.3925 
         WHERE TimeValue = CONVERT(DATETIME, '2012-05-16', 102) 
```

for other date format

```
Date -100- MMM DD YYYY' -- Feb 5 2010
Date -101- MM/DDYYYY'
Date -102- YYYY.MM.DD'
Date -103- DD/MM/YYYY'
Date -104- DD.MM.YYYY'
Date -105- DD-MM-YYYY'
Date -106- DD MMM YYYY' --ex: 03 Jan 2007
Date -107- MMM DD,YYYY' --ex: Jan 03, 2007
Date -108- MMM DD YYYY' -- Feb 5 2010
Date -110- MM-DD-YYYY' --02-05-2010
Date -111- YYYY/MM/DD'
Date -112- YYYYMMDD' -- 20100205
Date -113- DD MMM YYYY' -- 05 Feb 2010 
```

to convert date to text use like this

```
CONVERT(VARCHAR(12),getdate(),113) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T11:24:52.887

只是不要利用`#`而不是我们`'`可能会解决您的问题

```
UPDATE tabDatafiveMinutely SET PAR0050=308.3925 
  WHERE TimeValue = '16 May 2012 14:30:00' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T11:24:18.347

我认为日期必须在引号之间：

```
Query = "UPDATE tabDatafiveMinutely SET PAR0050=308.3925 WHERE TimeValue = '#16 May 2012 14:30:00#'" 
```

# javascript - 如何获取包含值的输入控件的 innerHTML？

> ID：14357222
> 
> 赞同：2
> 
> 时间：2013-01-16T11:22:04.187
> 
> 标签：javascript, innerhtml

我有一个 div，它叫做 tab1。tab1 div 内部有许多输入（字段和单选按钮）。我得到这样的innerHTML：

```
document.getElementById("tab1").innerHTML; 
```

示例代码：

```
<div id="tab1">
    <input type="text" id="text1" />
</div> 
```

这行得通，但是如果我在 text1 输入中输入任何值，例如，它不在 innerHTML 中。我将如何获得包含输入值的 innerHTML？这有可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:33:19.300

```
<div id="tab1">
    <input type="text" id="text1"
    onkeyup="javascript:this.setAttribute("value", this.value);"/>
</div> 
```

这将给出 div 的 innerHTML 的值。

```
document.getElementById("tab1").innerHTML; 
```

您可以相应地更改事件，我设置它`onKeyUp`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:31:39.893

如果你想得到输入/收音机的值，你可以用 jQuery 来做：
`var Inputs = $("div#tab1 input, div#tab1 radio");`
你现在在变量 Inputs 中有一个所有输入和收音机的数组。然后您可以像这样访问这些值：`Inputs[0].value`
如果您想使用如下所示的纯 JavaScript：
`var Inputs = document.getElementById("tab1").getElementsByTagName('input'); You can now access them like:`Inputs[0].value `and`Radios[0].value`
@edit
谢谢，我更正了这些错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T14:20:30.147

如果你在文本框中输入一些东西，innerHTML 是什么样子的？看起来像吗

```
 <input type="text" id="text1" value="your_value" />? 
```

如果是这样，这是一个简单的函数，它返回你想要的：

```
 function getInnerHtml() {
        var div = document.getElementById("tab1");
        var childNodes = div.childNodes;
        var innerHtml = "";
        for (var i = 0; i < childNodes.length; i++) {
            var node = childNodes[i];
            if (node.nodeType == 1) {
                if (node.getAttribute("type") == "text") {
                    if (node.value != "") {  
                        //! This will change the original outerHTML of the textbox
                        //If you don't want to change it, you can get outerHTML first, and replace it with "value='your_value'" 
                        node.setAttribute("value", node.value);
                    }
                    innerHtml += node.outerHTML;
                } else if (node.getAttribute("type") == "radio") {
                    innerHtml += node.outerHTML;
                }
            }
        }
    } 
```

希望它有帮助。

# c# - 接受泰米尔语字体的 Web 应用程序

> ID：14357223
> 
> 赞同：2
> 
> 时间：2013-01-16T11:22:11.017
> 
> 标签：c#, asp.net

我只是在使用 ASP.Net 开发一个 Web 应用程序，它接受 TAMIL 字体。在这里，如果我在泰米尔语的文本框中输入一些内容，无论我在其中输入什么，它都应该以相同的值保存。

为此，我只是将该文本框的字体样式更改为 BAMINI，使用这种 BAMINI 样式我可以用泰米尔语输入单词，但是当我调试代码时，文本框的值仅以英文显示，但我希望它应该是仅限泰米尔语。

我想我可以通过使用 CultureInfo 来解决这个问题，我尝试过。但它没有发生。我怎样才能解决这个问题。有谁可以帮我离开这里吗。提前致谢

这是我的文本框样式，

```
.tamilTextBox
{
font-family: bamini;
font-size: large;
font-style: oblique;
width: 50%;
} 
```

在后面的代码中我正在尝试这样，

```
customer.FirstName   = txtFirstName.Text.ToString(new 
                                System.Globalization.CultureInfo("ta-IN")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:07:12.507

you need to use resources file(resources.resx) in visual studio for language conversion and when using different languages.

# backbone.js - 使用存储过程的非 RESTful 操作

> ID：14357225
> 
> 赞同：0
> 
> 时间：2013-01-16T11:22:12.630
> 
> 标签：backbone.js

我有许多复杂的存储过程，使用包含许多表连接、临时数据、分组、排序等的查询。所以我想插入查询参数并从我的存储过程中返回数据集。

如果服务器代码用 PHP 编写并调用 MYSQL 存储过程，返回 JSON，我怎样才能最好地使用 Backbone.js 实现这一点，因此问题是：

是否可以使用 Backbone.js 和任何代码示例执行非 RESTfull 操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:23:40.193

您仍然可以将 Collection / Model 指向您的 URL，即使它不完全是 RESTful。当您在 Backbone Collection 上调用 fetch 时，您可以传入最终将成为 $.ajax 数据参数的内容：

`MyCollection.fetch({data: {page: 3}});`

这应该使仍然使用 Backbone 对象变得更容易，但可以灵活地使用 PHP 端点所需的任何 URL/参数结构。

# objective-c - 如何在 OSX 的应用程序运行时中获取名称更改的文件？

> ID：14357238
> 
> 赞同：0
> 
> 时间：2013-01-16T11:23:08.693
> 
> 标签：objective-c, macos, cocoa, file, save

我正在编写将文件名称保存为用户键入的文档标题的应用程序。当用户点击保存时，文档保存为`documentTitle.txt`，但当用户更改文档标题并点击保存时，文档保存为`newDocumentTitle.txt`。

问题是：是否可以在磁盘上获取`uniqueIdentifier`类似 zbookmark `or`documentID` 之类的已编辑文件？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:54:22.583

如何通过其唯一标识符本地化文件？

需要使用`NSURL`Class的方法。

`bookmarkDataWithOptions:includingResourceValuesForKeys:relativeToURL:error:`

# iphone - 将按钮作为子视图放置在 UILable/UITextView 的最后一个字符旁边

> ID：14357240
> 
> 赞同：5
> 
> 时间：2013-01-16T11:23:14.577
> 
> 标签：iphone, ios, objective-c, uitextview

我使用了四个 UITextview 来放置每个段落。现在我想添加一个 UIButton 作为每个 UITextview 的子视图。

我意识到用框架创建子视图`CGRectMake(textview.frame.width-50,textview.frame.height-20,50,20)`不是一个理想的解决方案，因为句子可能在任何地方结束，我的意思是任何段落的最后一个字符可能在任何地方结束，但它的位置不是恒定的。

所以底线是，我想`UIButton`在`UITextView`lats 单词旁边添加。我怎么做？

任何解决方案将不胜感激。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T18:35:33.043

这不是那么简单。使用：

```
CGSize sizeOfString = [string sizeWithFont:self.aTextView.font constrainedToSize:self.aTextView.frame.size]; 
```

您可以获得给定字符串的 CGSize。但是，给出整个字符串，将导致大小等于您的 UITextView 大小（所以，右下角）

您必须在每个 UITextField 的最后一行使用此方法......这是困难的部分。自动换行由 CoreText、UITextView 或 UILabel 完成，不会为您提供有关单行、位置等的信息。

你必须自己计算它做类似的事情（代码不是那么干净，如果你有问题理解我会在稍后提供帮助）：

```
NSAttributedString* text = self.aTextView.attributedText;
CTFramesetterRef fs =
CTFramesetterCreateWithAttributedString((__bridge CFAttributedStringRef)text);
CGMutablePathRef path = CGPathCreateMutable();
CGPathAddRect(path, NULL, CGRectMake(0,0,self.aTextView.frame.size.width - 16,100000));  // why the -16? the frame should be the REAL TEXT FRAME, not the UITextView frame. If you look, there is a space between the view margin and the text. This is the baseline. Probably there is a method to calculate it programatically, but I can't check now. In my case it seems like 8px (*2)
CTFrameRef f = CTFramesetterCreateFrame(fs, CFRangeMake(0, 0), path, NULL);
CTFrameDraw(f, NULL);

NSRange lastRange;
NSArray* lines = (__bridge NSArray*)CTFrameGetLines(f);

id lastLineInArray = [lines lastObject];
CTLineRef theLine = (__bridge CTLineRef)lastLineInArray;
CFRange range = CTLineGetStringRange(theLine);
lastRange.length = range.length;
lastRange.location = range.location - 1;
NSLog(@"%ld %ld", range.location, range.length);

CGPathRelease(path);
CFRelease(f);
CFRelease(fs);

// this is the last line
NSString *lastLine = [self.aTextView.text substringWithRange:lastRange]; 
```

现在，您可以使用：

CGSize sizeOfString = [lastLine sizeWithFont:self.aTextView.font constrainedToSize:self.aTextView.frame.size];

您将获得字符串的宽度和高度，然后是按钮的最终位置（对于 y 位置：取自行数数组的行数 * 字符串高度）

编辑：关于 UITextView 中左侧空间的评论（这行中有 -16 的原因）

```
CGPathAddRect(path, NULL, CGRectMake(0,0,self.aTextView.frame.size.width - 16,100000)); 
```

发生这种情况是因为文本实际上并不在 UITextView 内，而是在它的一个子视图内：一个 UIWebDocumentView（私有类），它添加了一个插图。经过一番搜索，我找不到任何方法来（合法地）获取此插图的值，这是将正确的矩形传递给 CGPathAddRect() 函数所必需的。您可以进行一些测试以确保它始终为 8pt :-) 或切换到没有该内容插入的 UILabel

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:36:38.043

您应该考虑使用 UIWebView 或一些支持此类功能的第三方属性文本视图。

UITextView 在内部使用 web 视图，这使得找出文本的确切布局成为一项不平凡的工作。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-18T14:19:45.980

我认为，使用 tableView 的更好方法。一个单元格中的一个段落。使单元格无边框并将 clearColor 设置为单元格背景。通过这种方式，您可以轻松添加按钮。

# mysql - 为什么 Mysql Query Count 不一样？

> ID：14357245
> 
> 赞同：0
> 
> 时间：2013-01-16T11:23:23.127
> 
> 标签：mysql

我有一个客户表，我的客户不想从该表中物理删除任何记录，因此我使用 TINYINT 字段“IsDeleted”来跟踪已删除的客户。

现在我处于需要排除已删除客户的情况，但是当我厌倦了查询时，它给了我更少的记录

```
select count(*) from customer where IsDeleted <> 1; (Count = 1477) 
```

那么以下

```
select count(*) from customer where (IsDeleted = 0 or IsDeleted is  null); (Count = 1552) 
```

为什么上述查询计数不同？为什么“NULL”值不计入“IsDeleted <> 1”检查？

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:28:07.810

您不能更正对 NULL 值使用比较操作。考虑使用 Not NULL 选项将类型更改`IsDeleted`为。`enum('N','Y')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:28:47.683

Null 不是 int。一旦你做了 <> 1，这意味着它只会查看整数。Null 理想情况下意味着不存在的东西（这就是为什么很多人使用它而不是 0 以防您在表中存储 0）。

如果列中只有空值、0 和 1 值`isDeleted`，您可能会发现两个查询 (1522-1477) 之间的差异是表中空值的总数 (75)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T11:52:02.290

就像 Duniyadnd 和 triclosan 指出的那样，这是由 IsDeleted 的列类型引起的。
更改右侧面板中的查询，以便您可以看到使用 int 和 varchar 列类型之间的区别。sqlfiddle.com/#!2/7bf0a/5

# android - 如何在画布android上绘制路径时覆盖总面积？

> ID：14357246
> 
> 赞同：14
> 
> 时间：2013-01-16T11:23:23.437
> 
> 标签：android, draw, android-canvas

我在手指触摸移动时使用下面的代码在位图画布上画线......在这里我发布了部分代码，它工作正常......

如下图所示，触摸拖动时删除的黑白位图。我使画布透明，因此父布局背景（彩色图像）变得可见。

我想知道，擦除了多少区域（如位图的 50% 或 60%）.. 有什么办法可以找到吗？

![在此处输入图像描述](../Images/30188702868eb388f27d7017d268d5ab.png)

```
//Erasing paint

         mDrawPaint = new Paint();
    mDrawPaint.setAntiAlias(true); 
    mDrawPaint.setDither(true);  
    mDrawPaint.setStyle(Paint.Style.STROKE); 
    mDrawPaint.setStrokeJoin(Paint.Join.ROUND);
    mDrawPaint.setStrokeCap(Paint.Cap.ROUND);
    mDrawPaint.setStrokeWidth(50); 
    mDrawPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
    BlurMaskFilter mBlur = new BlurMaskFilter(10, BlurMaskFilter.Blur.NORMAL);
    mDrawPaint.setMaskFilter(mBlur); 
```

* * *

```
private void doDraw(Canvas c) {

    c.drawBitmap(mBitmap, 0, 0,null );

} 
```

* * *

```
private float mX, mY;
private static final float TOUCH_TOLERANCE = 1;

void touch_start(float x, float y) {
    mPath.reset();
    mPath.moveTo(x, y);
    mX = x;
    mY = y;
}
void touch_move(float x, float y) {
    float dx = Math.abs(x - mX);
    float dy = Math.abs(y - mY);
    if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
        mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
        mX = x;
        mY = y;
    }

     canvas.drawPath(mPath, mDrawPaint ); //Erasing Black and white image

}
void touch_up() {
    mPath.lineTo(mX, mY);
    // commit the path to our offscreen
    mCanvas.drawPath(mPath, mDrawPaint);
    // kill this so we don't double draw
    mPath.reset();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T10:15:22.460

尝试使用[蒙特卡罗方法](http://en.wikipedia.org/wiki/Monte_Carlo_method)估计透明区域的百分比。我认为这是一种最快、最简单的方法。在透明蒙版上取大约 50 个（取决于您需要的精度）随机像素并检查它们的颜色。然后计算 ans = TransparentPixelsCount/TestPixelCount。

使用路径坐标计算用户绘图的平方非常困难。而且迭代所有像素的时间很长。所以，恕我直言，蒙特卡洛是您的选择。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T05:59:12.283

要获得准确（且缓慢）的答案，您需要检查每个像素并计算数字是否透明并除以像素总数。如果您的要求允许进行一些估计，最好对图像进行采样。

您可以缩小图像并在较小的图像上运行上述过程。这样做的缺点是缩放操作可能会通过所有像素使其变慢。我建议使用网格采样，它类似于缩小尺寸，但会跳过像素。基本上，我们将 x 个样本点均匀地分布在图像上的网格上。然后计算透明的样本点的数量。透明百分比的估计是透明样本总数/透明样本数。您可以通过少量（例如 100 个）样本获得合理的准确度（通常在 5% 以内）。这是实现此方法的代码函数 - bm 是`Bitmap`并且`scale`是每个轴的样本数，因此设置`scale = 10`提供 100 个总样本（图像上的 10x10 采样网格）。

```
static public float percentTransparent(Bitmap bm, int scale) {

        final int width = bm.getWidth();
        final int height = bm.getHeight();

        // size of sample rectangles
        final int xStep = width/scale;
        final int yStep = height/scale;

        // center of the first rectangle
        final int xInit = xStep/2;
        final int yInit = yStep/2;

        // center of the last rectangle
        final int xEnd = width - xStep/2;
        final int yEnd = height - yStep/2;

        int totalTransparent = 0;

        for(int x = xInit; x <= xEnd; x += xStep) {
            for(int y = yInit; y <= yEnd; y += yStep) {
                if (bm.getPixel(x, y) == Color.TRANSPARENT) {
                    totalTransparent++;
                }
            }
        }
        return ((float)totalTransparent)/(scale * scale);

    } 
```

作为参考，下面是通过计算每个像素为您提供结果的慢速方法。可用于测试上述估计量的参考。

```
static public float percentTransparent(Bitmap bm) {
        final int width = bm.getWidth();
        final int height = bm.getHeight();

        int totalTransparent = 0;
        for(int x = 0; x < width; x++) {
            for(int y = 0; y < height; y++) {
                if (bm.getPixel(x, y) == Color.TRANSPARENT) {
                    totalTransparent++;
                }
            }
        }
        return ((float)totalTransparent)/(width * height);

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T06:59:46.743

您需要检测位于绘制多边形内的点。这是函数，它采用包含所有绘制点的数组，第二个参数是点本身，即 x ，y。

```
// Return true if the dot { x,y } is within any of the polygons in the list

function pointInPolygons( polygons, dot )

      for (i=1, [polygons count] i++)
         {
           if (pointInPolygon( polygons[i], dot )) 
                    return true
         } 

      return false
end

// Returns true if the dot { x,y } is within the polygon 
//defined by points table { {x,y},-    --{x,y},{x,y},... }

function pointInPolygon( points, dot )
    local i, j = #points, #points
    local oddNodes = false

    for i=1, #points do
            if ((points[i].y < dot.y and points[j].y>=dot.y
                    or points[j].y< dot.y and points[i].y>=dot.y) and (points[i].x<=dot.x
                    or points[j].x<=dot.x)) then
                    if (points[i].x+(dot.y-points[i].y)/(points[j].y-points[i].y)*(points[j].x-points[i].x)<dot.x) then
                            oddNodes = not oddNodes
                    end
            end
            j = i
    end

    return oddNodes
   end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T02:12:01.207

对此有一种不同的方法：您可以使用[ComputeBounds](http://developer.android.com/reference/android/graphics/Path.html#computeBounds%28android.graphics.RectF,%20boolean%29)计算每条路径的大小。然后将其与视图的大小进行比较并确定绘图的百分比应该很简单。

只是你需要记住，路径可以自己绘制，所以你需要小心并在计算中处理它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-26T19:15:40.743

将所有点 x 和 y 值存储在两个不同的排序集中，一个用于点的 x 值，另一个用于点的 y 值。界限的最终值将是 point(min_x,min_y) 和 point(max_x,max_y)。

# ruby - 如何在 Windows 中将“ruby test.rb”作为“test”运行？

> ID：14357247
> 
> 赞同：0
> 
> 时间：2013-01-16T11:23:24.703
> 
> 标签：ruby, rubygems

> **可能重复：**
> [如何从命令行仅通过其名称启动 ruby​​ 脚本？](https://stackoverflow.com/questions/1422380/how-to-i-launch-a-ruby-script-from-the-command-line-by-just-its-name)

目前我正在使用：

`ruby test.rb`

但想在命令提示符下运行它：

`test`

我怎么能那样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:42:15.993

[请按照此处](http://en.wikibooks.org/wiki/Ruby_Programming/Hello_world#Windows)提供的说明进行操作：

1.  以管理员身份登录。
2.  运行标准的 Windows“命令提示符”，cmd。
3.  在命令提示符（即 shell 提示符）下，运行以下 Windows 命令。当您运行 ftype 时，将命令行参数更改为正确指向您在计算机上安装 ruby​​.exe 可执行文件的位置。

    $ assoc .rb=RubyScript

    .rb=RubyScript

    $ ftype RubyScript="c:\ruby\bin\ruby.exe" "%1" %*

    RubyScript="c:\ruby\bin\ruby.exe" "%1" %*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T13:18:34.660

您可以使用 ruby​​ 解释器打开 .rb 文件。

*   右键单击任何 .rb 文件
*   选择“打开方式”
*   浏览到您的 ruby​​ 目录中的 bin 文件夹（无论您安装它的位置*。C:\Programs Files？*）
*   选择“ruby”（而不是“rubyw”）
*   请记住勾选“始终使用此程序打开此类文件”复选框

全部做完。现在您可以只使用它们的名称来运行脚本。或者，您也可以通过简单地双击来运行它们。

# java - 如何在nexus7上解压缩代码

> ID：14357249
> 
> 赞同：0
> 
> 时间：2013-01-16T11:23:28.770
> 
> 标签：java, android

如何将android编程从asset解压到/sdcard/，我下面的代码在nexus7中不成功，但如果在nexus7之外运行就可以了，就能提取数据。

运行解压。

```
new Thread(new Runnable() {
    @Override
    public void run() {
        UnZip.start();
    }
}).start();

 private Thread UnZip = new Thread() {
            @Override
        public void run() {
            try {
                final int BUFFER = 8192;

                ZipInputStream inputStream = new ZipInputStream(getAssets().open("file.zip"));

                for (ZipEntry entry = inputStream.getNextEntry(); entry != null; entry = inputStream
                        .getNextEntry()) {

                    String innerFileName = "/sdcard/" + File.separator
                            + entry.getName();
                    File innerFile = new File(innerFileName);

                    if (entry.isDirectory()) {
                        innerFile.mkdirs();
                    } else {
                        FileOutputStream outputStream = new FileOutputStream(
                                innerFileName);

                        BufferedOutputStream bufferedOutputStream = new BufferedOutputStream(
                                outputStream, BUFFER);

                        int count = 0;
                        byte[] data = new byte[BUFFER];
                        while ((count = inputStream.read(data, 0, BUFFER)) != -1) {
                            bufferedOutputStream.write(data, 0, count);
                        }

                        bufferedOutputStream.flush();
                        bufferedOutputStream.close();
                    }
                }
                inputStream.closeEntry();
                inputStream.close();

                     } catch (Exception e) {  

                 }
            }
        }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:47:56.203

而不是以这种方式查找 sdcard

```
 String innerFileName = "/sdcard/" + File.separator
                            + entry.getName(); 
```

使用环境 API

```
 String innerFileName = Environment.getExternalStorageDirectory().toString() + File.separator + entry.getName(); 
```

不要忘记将`WRITE_EXTERNAL_STORAGE`权限添加到您的 AndroidManifest.xml

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission> 
```

# sql - 如何遍历表并将其结果与来自 SP 的值相结合

> ID：14357250
> 
> 赞同：1
> 
> 时间：2013-01-16T11:23:36.713
> 
> 标签：sql, tsqlt

我需要通过以下方式加入两个表

```
TABLE_A

Id Name 

Table_Ref
RefID --Auto increament 
```

我需要插入 Table_Ref 并将每个插入的 id 与 Table_A 行连接起来

作为 ID 名称 RefId

我是否需要游标，或者任何基于 Set 的操作都可以让我在 Table_Ref 中插入一个新行，然后像这样返回它

```
ID    NAME   RefID
xxxx  AAA      1
yyyy  BBB      2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:31:00.487

您可以创建序列并将该值插入到表中

```
create sequence SEQ_TEST
minvalue 1
maxvalue 1000000000
start with 1
increment by 1
order; 
```

要插入表中，请使用以下语法：

```
Insert into table_a (id, name, refid) values ('xxxx','AAA',SEQ_TEST.nextval);
Insert into table_a (id, name, refid) values ('yyyy','BBB',SEQ_TEST.nextval); 
```

PS：这是Oracle中的语法。不确定 tsql，您可能需要根据需要调整语法。

# android - 将指南针与 Android 地图集成

> ID：14357260
> 
> 赞同：0
> 
> 时间：2013-01-16T11:24:15.327
> 
> 标签：android, google-maps, compass-geolocation

我正在使用 Android 地图，我需要在其中添加指南针功能，即当我单击指南针按钮时，它会显示单独的指南针。任何人都可以指导我正确的方向或参考任何教程。我需要单独添加 Compass 提前感谢阅读和回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T05:17:33.170

我的 Cass 中的场景是单独使用使用指南针点击指南针按钮时它会显示

*   从当前位置（我的位置）到目标位置的距离
*   罗盘
*   指南针朝北方向所以为了实现所有这些，我使用了以下方法希望这将帮助任何与我有相同情况的人

我的班级的代码片段将获得全球两点之间的距离并将图像显示为指南针，头朝北

```
public class MapController extends MapActivity implements SensorEventListener {
    public static GeoPoint Mypoint, MapPoint;
    double km, meter;
    public static int kmInDec, meterInDec;
    private SensorManager mSensorManager;
    private Sensor mAccelerometer, mField;
    Location myLoc, mapLoc;
    double myLat, myLong, mapLat, mapLong;

    public static double lat, lng;
    public static double mylat = Double.parseDouble(Constants.DEVICE_OBJ.lat);//31.567615d;

    public static double mylon = Double.parseDouble(Constants.DEVICE_OBJ.lng);//74.360962d;
    com.google.android.maps.MapController mapController;
    public static boolean enabled = false;

    @Override
    protected void onCreate(Bundle icicle) {
        // TODO Auto-generated method stub
        super.onCreate(icicle);
        setContentView(R.layout.map_layout);
        Log.v(Constants.TAG, "In Map Controller");

        fetchUI();
    }

    public void fetchUI() {
        myLoc = new Location("Test");
        mapLoc = new Location("Test");
        mSensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
        mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
        mField = mSensorManager.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD);
        myLat = (31.567615 * 1e6) / 1E6;
        myLong = (74.360962d * 1e6) / 1E6;
        mapLat = (MapPoint.getLatitudeE6()) / 1E6;
        mapLong = (MapPoint.getLongitudeE6()) / 1E6;
        myLoc.setLatitude(31.567615);
        myLoc.setLongitude(74.360962);
        mapLoc.setLatitude(mapLat);
        mapLoc.setLongitude(mapLong);
    }

    protected void onResume() {
        super.onResume();
        mSensorManager.registerListener(this, mAccelerometer, SensorManager.SENSOR_DELAY_UI);
        mSensorManager.registerListener(this, mField, SensorManager.SENSOR_DELAY_UI);
    }

    protected void onPause() {
        super.onPause();
        mSensorManager.unregisterListener(this);
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

    ///Method to calculate the Distance between 2 Geo Points aroud the Globe
    public double CalculationByDistance(GeoPoint StartP, GeoPoint EndP) {
        double lat1 = StartP.getLatitudeE6() / 1E6;
        double lat2 = EndP.getLatitudeE6() / 1E6;
        double lon1 = StartP.getLongitudeE6() / 1E6;
        double lon2 = EndP.getLongitudeE6() / 1E6;
        double dLat = Math.toRadians(lat2 - lat1);
        double dLon = Math.toRadians(lon2 - lon1);
        double a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                Math.cos(Math.toRadians(lat1)) * Math.cos(Math.toRadians(lat2)) *
                        Math.sin(dLon / 2) * Math.sin(dLon / 2);
        double c = 2 * Math.asin(Math.sqrt(a));
        double valueResult = Radius * c;
        double km = valueResult / 1;
        DecimalFormat newFormat = new DecimalFormat("####");
        kmInDec = Integer.valueOf(newFormat.format(km));
        meter = valueResult % 1000;
        meterInDec = Integer.valueOf(newFormat.format(meter));
        Log.i("Radius Value", "" + valueResult + "  KM  " + kmInDec + " Meter   " + meterInDec);

        return Radius * c;
    }

    @Override
    public void onAccuracyChanged(Sensor sensor, int accuracy) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onSensorChanged(SensorEvent event) {
        // TODO Auto-generated method stub
        if (myLoc == null) return;

        float azimuth = event.values[0];
        float baseAzimuth = azimuth;

        GeomagneticField geoField = new GeomagneticField(Double
                .valueOf(myLoc.getLatitude()).floatValue(), Double
                .valueOf(myLoc.getLongitude()).floatValue(),
                Double.valueOf(myLoc.getAltitude()).floatValue(),
                System.currentTimeMillis());

        azimuth -= geoField.getDeclination(); // converts magnetic north into true north

        // Store the bearingTo in the bearTo variable
        float bearTo = myLoc.bearingTo(mapLoc);

        // If the bearTo is smaller than 0, add 360 to get the rotation clockwise.
        if (bearTo < 0) {
            bearTo = bearTo + 360;
        }

        //This is where we choose to point it
        float direction = bearTo - azimuth;

        // If the direction is smaller than 0, add 360 to get the rotation clockwise.
        if (direction < 0) {
            direction = direction + 360;
        }

        rotateImageView(compasView, R.drawable.app_icon, direction);

        //Set the field
        String bearingText = "N";

        if ((360 >= baseAzimuth && baseAzimuth >= 337.5) || (0 <= baseAzimuth && baseAzimuth <= 22.5))
            bearingText = "N";
        else if (baseAzimuth > 22.5 && baseAzimuth < 67.5) bearingText = "NE";
        else if (baseAzimuth >= 67.5 && baseAzimuth <= 112.5) bearingText = "E";
        else if (baseAzimuth > 112.5 && baseAzimuth < 157.5) bearingText = "SE";
        else if (baseAzimuth >= 157.5 && baseAzimuth <= 202.5) bearingText = "S";
        else if (baseAzimuth > 202.5 && baseAzimuth < 247.5) bearingText = "SW";
        else if (baseAzimuth >= 247.5 && baseAzimuth <= 292.5) bearingText = "W";
        else if (baseAzimuth > 292.5 && baseAzimuth < 337.5) bearingText = "NW";
        else bearingText = "?";

        Distance.setText(kmInDec + "  Km " + " " + meterInDec + " m");
    }
    ////This is the method to Show the Image as Compass

    private void rotateImageView(ImageView imageView, int drawable, float rotate) {

        // Decode the drawable into a bitmap
        Bitmap bitmapOrg = BitmapFactory.decodeResource(getResources(),
                drawable);

        // Get the width/height of the drawable
        DisplayMetrics dm = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(dm);
        int width = bitmapOrg.getWidth(), height = bitmapOrg.getHeight();

        // Initialize a new Matrix
        Matrix matrix = new Matrix();

        // Decide on how much to rotate
        rotate = rotate % 360;

        // Actually rotate the image
        matrix.postRotate(rotate, width, height);

        // recreate the new Bitmap via a couple conditions
        Bitmap rotatedBitmap = Bitmap.createBitmap(bitmapOrg, 0, 0, width, height, matrix, true);
        //BitmapDrawable bmd = new BitmapDrawable( rotatedBitmap );

        //imageView.setImageBitmap( rotatedBitmap );
        imageView.setImageDrawable(new BitmapDrawable(getResources(), rotatedBitmap));
        imageView.setScaleType(ScaleType.CENTER);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:32:53.790

使用本指南： [谷歌地图教程](http://eagle.phys.utk.edu/guidry/android/mappingDemo.html)

搜索指南针，按下指南针（叠加）时尝试根据您的需要启动新活动

反正教程很全面，相信能解决你的大部分需求=）。

# c# - 在 C# 中创建 LostFocus 事件后，GotFocus 事件没有到来

> ID：14357265
> 
> 赞同：1
> 
> 时间：2013-01-16T11:24:22.483
> 
> 标签：c#, events, clipboard

如果我的表单，我只想清除剪贴板文本`LostFocus`。我的意思是，如果用户使用他的键盘或鼠标复制某些东西，必须在`LostFocus`事件中清除它，那么如果我的表单再次获得焦点，我需要取回我的文本。我怎样才能做到这一点？

```
string sValue = "";
public Form1()
{
    InitializeComponent();
    this.LostFocus += new EventHandler(Form1_LostFocus);
    this.GotFocus += new EventHandler(Form1_GotFocus);
}

void Form1_GotFocus(object sender, EventArgs e)
{
    Clipboard.SetText(sValue);
    textBox1.Text = Clipboard.GetText();
}

void Form1_LostFocus(object sender, EventArgs e)
{
    sValue = textBox1.Text;
    Clipboard.Clear();
} 
```

这不起作用；事件`LostFocus`被调用，但`GotFocus`没有被调用。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T11:39:43.167

为了给你一个快速的答案，而不是将事件处理程序添加到表单本身，将它们添加到`TextBox`控件中：

```
textBox1.LostFocus += new EventHandler(Form1_LostFocus);
textBox1.GotFocus += new EventHandler(Form1_GotFocus); 
```

如果表单包含任何可见控件，它将永远不会触发`GotFocus`或`LostFocus`事件。

但是在表单级别处理此行为的**推荐**方法是使用：

```
this.Deactivate += new EventHandler(Form1_LostFocus);
this.Activated += new EventHandler(Form1_GotFocus); 
```

或者

```
textBox1.Leave += new EventHandler(Form1_LostFocus);
textBox1.Enter += new EventHandler(Form1_GotFocus); 
```

微软说：

1.  对于[Control.GotFocus 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.gotfocus.aspx)

    > **GotFocus 和 LostFocus 事件是与 WM_KILLFOCUS 和 WM_SETFOCUS Windows 消息相关联的低级焦点事件。通常，GotFocus 和 LostFocus 事件仅在更新 UICues 或编写自定义控件时使用。相反，Enter 和 Leave 事件应用于除 Form 类之外的所有控件，Form 类使用 Activated 和 Deactivate 事件。**

2.  对于[Form.Activated 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.activated.aspx)

    > 当应用程序处于活动状态并具有多个表单时，活动表单是具有输入焦点的表单。不可见的表单不能是活动表单。激活可见表单的最简单方法是单击它或使用适当的键盘组合。

3.  对于[Control.Enter 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.enter.aspx)

    > Enter 和 Leave 事件被 Form 类抑制。Form 类中的等效事件是 Activated 和 Deactivate 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:10:43.887

```
 string sVal = "";
    public Form1()
    {
        InitializeComponent();
        this.Activated += new EventHandler(Form1_GotFocus);
        this.Deactivate += new EventHandler(Form1_LostFocus);

    }

    void Form1_LostFocus(object sender, EventArgs e)
    {
        sVal = Clipboard.GetText();
        Clipboard.Clear();
    }

    void Form1_GotFocus(object sender, EventArgs e)
    {
        Clipboard.SetText(sVal);
    } 
```

# java - 事务提交后实体未保存

> ID：14357267
> 
> 赞同：0
> 
> 时间：2013-01-16T11:24:28.410
> 
> 标签：java, jpa

一些背景知识，我在我的 Web 应用程序中使用 JPA/Hibernaate/Spring 我还使用 org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter 和扩展的持久性上下文来处理我的实体。

问题：

1.  用户单击实体的编辑链接

2.  使用 find 方法从数据库加载实体，并将实体存储在会话中

3.  用户对实体进行更改并点击保存

4.  用户更改反映在存储在会话中的实体上（在控制器中）

5.  实体被发送到服务类中的方法（使用@Transactional 注释）

6.  服务类中不会对实体（或任何其他实体）进行任何更改（它会执行其他一些与持久性无关的事情）

7.  服务方法完成后没有任何更改刷新到数据库！！！？

注意：服务类是一个spring组件，我调试了为它创建的spring代理，当调用@Transactional注释的服务方法时，我看到spring在服务方法调用之前创建了一个新事务，我也看到它成功提交了事务。据我了解，即使对实体的更改没有发生在事务边界中，它仍然应该刷新到数据库中。为什么更改没有被刷新？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:28:17.663

对于要刷新的实体，必须对其进行管理。该实体可能已分离。

我可以想到在这种情况下将其分离的两个可能原因：

1.  即使对于扩展的持久性上下文，也会创建和关闭实体管理器。也许您在每次调用服务器时打开和关闭它？然后，因为您尝试将实体保存在与创建该实体的服务器不同的调用中，所以实体管理器是一个新的，因此该实体不受管理。

2.  实体在对服务器的这些调用之间被序列化。当一个实体被序列化时，它就会分离。这很容易发生，因为服务器经常在调用之间将会话数据写入磁盘。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T11:48:04.100

如果用户更改是在您的服务层之外进行的，除非您在服务层内部调用persist，否则这些更改不会自动持久化：

```
entityManager.persist() 
```

你可以[在这里](https://stackoverflow.com/questions/1069992/jpa-entitymanager-why-use-persist-over-merge)看到为什么要使用持久化而不是合并。

我希望这会有所帮助。

# flash - 将 AS1 程序闪存到 AIR

> ID：14357269
> 
> 赞同：0
> 
> 时间：2013-01-16T11:24:30.797
> 
> 标签：flash

我有很大的 AS1 项目。我想创建 AIR 项目让它在 iPhone 上显示。

如果没有 convertios AS1 到 AS3，这可能吗？

谢谢，弗拉基米尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:01:24.863

该项目必须转换为使用 ActionScript 3。AIR for iOS 是在 AIR 2.6 版中引入的，该版本仅支持 AS3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T16:37:59.653

您是否尝试将 AS1 swf 加载到 as3 应用程序中？Air 甚至在 ios 上也支持多个 swf

# c# - 使用 Javascript 将日期设置为 raddatepicker

> ID：14357272
> 
> 赞同：2
> 
> 时间：2013-01-16T11:24:39.070
> 
> 标签：c#, javascript, asp.net, telerik, getelementbyid

我从服务器端获取日期值并将其传递给 javascript 方法，然后我使用 Javascript 将日期分配给 Telerik RadDatePicker 控件。

我正在约会

```
var Date1="16/01/2013 00:00:00";
function SetDate(Date1)
{
 var datepicker = $find("<%= RadDatePicker1.ClientID %>"); 
 datepicker.set_selectedDate(Date1); 
} 
```

datepicker.value=日期1；显示日期。但我无法在 raddatepicker 中显示日期

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T20:22:33.977

这个问题很老了，但是这里……可能只是您的日期无效。尝试将变量设置为“new Date();” 第一的。如果可行，请检查您的日期。这对我来说似乎很好用：

```
<script type="text/javascript">
    var Date1 = new Date("1/16/2013 00:00:00");
    function SetDate(myDate) {
        var datepicker = $find("<%= RadDatePicker1.ClientID %>");
        datepicker.set_selectedDate(myDate);
    }
    // For the demo, make sure to set the date after the picker has fully loaded by MS AJAX,
    // but if calling SetDate from the server, it should be fine.
    Sys.Application.add_load(function () {
        SetDate(Date1);
    });
</script> 
```

# ruby-on-rails - 导轨模型关系

> ID：14357277
> 
> 赞同：0
> 
> 时间：2013-01-16T11:24:49.347
> 
> 标签：ruby-on-rails, relation

我有用户模型和反馈模型，用户模型有 user_type 属性。反馈模型也有 user_id 属性。我想将 user_type 列添加到反馈模型中，就像在用户模型中一样。例如迁移后应该是这样的

```
User
id:123
user_type: "customer"

Feedback
id:56
user_id:123
user_type : "customer" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:32:02.640

为什么您也将 user_type 放入反馈表中。您可以使用 rails 关联从 user_id 中检索它。

```
class User < ActiveRecord::Base
  has_many :feedback
end 

class Feedback < ActiveRecord::Base
  belongs_to :user
end 
```

要从反馈对象中检索 user_type，请使用`@feedback.user.user_type`

# jquery - 创建元素并将其附加到 DOM 后，如何应用插件？

> ID：14357280
> 
> 赞同：0
> 
> 时间：2013-01-16T11:24:58.020
> 
> 标签：jquery

我正在使用[此处的示例](http://zikes.github.com/circle-menu/)向我的网站添加菜单。在原始 HTML 中有一个 div，里面有这个菜单。我对其调用 circleMenu 效果。

```
 <ul id="container" >
            <li class="ui-state-default">example1
                <!--menu button-->
                <ul class="menu" id="menu6">
                    <li><a href="#"></a></li>
                    <li><a href="#" alt="Edit" title="Edit"><img src="images/edit.jpg" /></a></li>
                    <li><a href="#" alt="Copy" title="Copy"><img src="images/copy.jpg" /></a></li>
                    <li><a href="#" alt="Delete" title="Delete"><img src="images/delete.jpg" /></a></li>
                </ul>
            </li>
        </ul>

                $('.menu').circleMenu({
                direction: 'right',
                circle_radius: 80,
                item_diameter: 20,
                trigger: 'click'
            }); 
```

现在，在页面的其他位置，我创建了 example2 列表项和相同的菜单。除了这一次，circleMenu 效果不会附加到它，因为它是刚刚创建的。创建后如何立即应用效果？或修改现有调用以使用当时所有当前的“.menu”项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:01:22.537

使用 jquery .on()

```
$('.menu').on("load", data, function(event){
    $('.menu').circleMenu({
         direction: 'right',
         circle_radius: 80,
         item_diameter: 20,
         trigger: 'click'
    });
}); 
```

您可以在第二个参数中传递数据，或者简单地将其设置为 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:27:09.573

您可能会发现 jQuery 的`.bind()`( `.live()`is depreciated) 对于向动态创建的元素添加事件很有用。

[http://api.jquery.com/bind/](http://api.jquery.com/bind/)

所以，假设你创建了新元素并给它一个 id `#example2`- 然后你需要`.bind()`在你的代码中调用这个新创建的元素。

# php - 使用 wp_query 显示所有用户的列表？

> ID：14357285
> 
> 赞同：0
> 
> 时间：2013-01-16T11:25:17.317
> 
> 标签：php, wordpress

是否可以使用`wp_query`为网站及其数据创建所有 Wordpress 用户的列表？如果是这样，怎么做？

我希望能够列出所有用户（该站点对新注册开放）及其所有详细信息，例如姓名、用户名等，以及我以以下格式添加的一些自定义元数据：

```
function my_user_contactmethods($user_contactmethods) {

$user_contactmethods['Address'] = __('Address');
$user_contactmethods['Website'] = __('Website');
$user_contactmethods['Phone'] = __('Phone');
$user_contactmethods['Nationality'] = __('Nationality');
$user_contactmethods['Registering as'] = __('Registering as');
$user_contactmethods['Submit work'] = __('Submit work?');
$user_contactmethods['Attend'] = __('Attend?');
$user_contactmethods['Volunteer'] = __('Volunteer?');

// etc for each field you want to appear

return $user_contactmethods;

} 
```

或者，如果有其他方法可以做到这一点，那么我就完全开放了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T11:40:07.647

如果您可以不使用`wp_query`，您可以使用`get_users`和`get_user_meta`检索所有用户及其自定义数据的列表。

例如，

```
<?php
    $blog_id = 1; //blog id
    $str = 'blog_id='.$blog_id;
    $users = get_users($str);
    $list = array();
    $i=0;
    foreach ($users as $user) {
       $list[$i]['id']=$user->ID;
       $list[$i]['email']=$user->email;
       $list[$i]['custom-1']= get_user_meta( $$user->ID, 'custom-1', true );
       $i++;
    }

?> 
```

您可以检索所需的字段。或者您可以添加所有数据并将您的自定义字段与它们一起附加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-22T18:33:51.960

看起来查询用户的正确方法是使用`WP_User_Query`. 除了 foreach 循环之外，似乎与 WP_Query 的工作方式非常相似：

```
<?php
$args = array(
    .
    .
    .
);

// The Query
$user_query = new WP_User_Query( $args );

// User Loop
if ( ! empty( $user_query->get_results() ) ) {
    foreach ( $user_query->get_results() as $user ) {
        echo '<p>' . $user->display_name . '</p>';
    }
} else {
    echo 'No users found.';
}
?> 
```

[这是完整的文档和可用属性列表](https://developer.wordpress.org/reference/classes/wp_user_query/)

# php - 如何使用 phpmailer 在 PHP 中快速发送电子邮件

> ID：14357286
> 
> 赞同：0
> 
> 时间：2013-01-16T11:25:18.893
> 
> 标签：php, email, smtp

我正在使用 phpmailer 在 php 中使用 SMTP 发送电子邮件。发送电子邮件大约需要 2 到 3 秒。为了更快地发送它，我应该使用我不想要的 php 邮件功能。当我使用 phpmailer 时，我是否可以得到任何建议来使用 phpmailer 快速发送它并直接发送到目标 smtp 服务器，而不是通过本地 SMTP，然后是 MTA 和目标 SMTP 服务器。

# linq - 如何用距离限制结果？

> ID：14357287
> 
> 赞同：-1
> 
> 时间：2013-01-16T11:25:22.827
> 
> 标签：linq, azure-mobile-services

我有这个功能，我试图将我的位置过滤给表格中的其他人。

鉴于表格是用户：

```
name(string), int(position)

"joe", 4
"john", 3
"lee", 40 
```

假设我是乔，我的位置是 4。我如何使用 Linq 过滤器 det 列表，将 2 点之间的距离限制为 5？在这种情况下，对于 joe，结果列表将只包含“john”？因为 joe 和 john 之间的距离是 1，但 joe 和 lee 的距离是 36，因此大于 5。

我知道我的位置并将其作为函数的变量传递：

```
public void FilterList(string myName, int myPos)
{
    var list = ?? (Linq magic)
} 
```

我也需要过滤掉自己。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:27:34.310

```
var list = from l in listitems 
           where l.name=='datapassed' && 
       (l.mypose-  myposedata) <5 
            select l; 
```

# .net - datatable.select(filter_condition) 中使用的 EBNF

> ID：14357290
> 
> 赞同：1
> 
> 时间：2013-01-16T11:25:40.583
> 
> 标签：.net, datatable, ebnf

有谁知道 Datatable.Select(filter_condition) 中使用了什么 EBNF？我想要实现的是突出显示类似于 SQL-WHERE 部分的语句。

# asp.net - 无法正确获取选择语句中的值

> ID：14357291
> 
> 赞同：-1
> 
> 时间：2013-01-16T11:25:41.267
> 
> 标签：asp.net, linq

我正在尝试填充一个 ddl（它有效），当我选择“名字”时，会填充文本框以进行编辑。当我逐步执行程序时，（drp_Customer.SelectedItem.Value）始终是“23”，这是我的数据库中的最后一个“Id”。文件被填充，但包含 23 的详细信息..

我想我需要确保 ddl 的详细信息匹配。

这是我的代码。这只是粗略的，因为我试图向某人展示它是如何工作的。

```
 using (CustomerDataContext obj = new CustomerDataContext())
        {
            // Get fields for drp_Customer
            // ===========================
            var allCustomers = from c in obj.Customers
                               orderby c.FirstName
                               select new
                                   {
                                       c.FirstName,
                                       c.CustomerId
                                   };

            foreach (var item in allCustomers)
            {
                drp_Customer.Items.Add(item.FirstName);
                drp_Customer.SelectedItem.Value = item.CustomerId.ToString();
            }

            drp_Customer.DataBind();

            if (drp_Customer.SelectedItem.Text == " -- Select Customer -- ")
            {
                lbl_message.Text = "Please select a customer to update";
            }
            else if (drp_Customer.SelectedItem.Text != " -- Select Customer -- ")
            {

       Customer myCust = obj.Customers.SingleOrDefault(c => c.CustomerId ==  Convert.ToInt32       
            (drp_Customer.SelectedItem.Value));

                if (myCust != null)
                {
                    txt_FirstName.Text = myCust.FirstName;
                    txt_Surname.Text = myCust.Surname;
                    txt_HouseNumber.Text = myCust.HouseNumberName;
                    txt_Address.Text = myCust.Address;
                    txt_Town.Text = myCust.Town;
                    txt_Telephone.Text = myCust.Telephone;
                    txt_Postcode.Text = myCust.Postcode;
                }

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:30:12.623

使用[DataTextField](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.datatextfield.aspx)和[DataValueField](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.datavaluefield.aspx)属性设置将显示的绑定对象的属性和将用作选定值的属性：

```
drp_Customer.DataTextField = "FirstName";
drp_Customer.DataValueField = "CustomerId";
drp_Customer.DataSource = allCustomers.ToList();
drp_Customer.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:31:40.123

总是选择最后一项的原因是这个循环：

```
foreach (var item in allCustomers)
{
    drp_Customer.Items.Add(item.FirstName);
    drp_Customer.SelectedItem.Value = item.CustomerId.ToString();
} 
```

最后一个项目将是选定的项目，因为您总是在更改它。您需要在循环之外分配它。但是您尚未显示当前哪个客户是正确选择的客户。

请注意，您也可以使用`DataSource`+ `DataBind`：

```
drp_Customer.DataTextField = "FirstName";
drp_Customer.DataValueField = "CustomerId";
drp_Customer.DataSource = allCustomers;
drp_Customer.DataBind();
drp_Customer.SelectedValue = customerIDofSelectedCustomer; 
```

# c++ - Visual Express 2010 双精度变量

> ID：14357295
> 
> 赞同：-2
> 
> 时间：2013-01-16T11:25:50.190
> 
> 标签：c++, visual-studio-2010, double, precision, double-precision

我刚刚开始使用 C++ 进行编码，但之前对 MATLAB 和 MySql 有相当多的经验。我正在尝试计算一些复合数字，因此准确性是关键。我曾尝试使用双数来做到这一点，但由于某种原因，我只能得到 7 位有效数字的准确度（与浮点数相同）。我什至尝试使用 long double 来尝试计算，但我仍然只能得到 7 sf 的精度。

我没有正确初始化双打吗？我以为它们只是标准库的一部分？？非常感谢任何帮助。下面的代码给出了用于计算的代码的主要部分（其余部分主要是加载数据或调试）。

* * *

**更新**

这是代码示例（减去数据读取）。我已经输入了前 5 个值。计算应该给出 ( **EXPECTED OUTPUT** ) 在 Excel 中计算，使用完全相同的输入：

```
0
-1.09526
4.364551963
2.745835774
3.029002506 
```

下面的代码给出了什么（**实际输出**）：

```
0
-1.095260000
4.3591394642
2.7340763329
3.0179393198 
```

代码：

```
#include <fstream>
#include <iostream>
#include <sstream>
#include <string>
#include <vector>

using namespace std;

int main(){

std::vector<double> compoundedcalculation; // pre-allocating for the compounded calculations
std::vector<double> dailycompound; // pre-allocating for daily compoundvalue
compoundedcalculation.insert(compoundedcalculation.end(), 0.0); // setting the first value as 0

double dailycompoundval[] = {0,-1.09526,5.46038,-1.61801,0.283089};
dailycompound.assign(dailycompoundval,dailycompoundval+5);
double indCC;

for (int n = 0; n < 5 ;n++)
    {   
    indCC = ((((1+((compoundedcalculation.at(n))/1000))*(1+((dailycompound.at(n))/1000)))-1)*1000);

    printf(" %.17g  \n", indCC);

    compoundedcalculation.insert(compoundedcalculation.end(), indCC ); 
    }
return 0;
} 
```

感谢您的努力。

* * *

**更新 2：**

预期结果和实际结果都使用相同的复利公式。

复合总计 = ((1+(日利率/10000))*(1+(之前的复合总计/10000)))

每日费率是：

第一天：0 第 2 天：-1.09526 第 3 天：5.46038 第 4 天：-1.61801 第 5 天：0.283089

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T11:31:49.503

`double`是您机器上的 IEEE 64 位浮点数，因此它存储 15-17 个有效十进制数字。您不必为此做任何特别的事情。您的问题是您将其打印到屏幕上的方式，而您没有显示。默认情况下，这些值四舍五入为 6 位有效数字，因此您应该按如下方式增加它：

```
cout.precision(17);
cout << x; 
```

或者

```
printf("%.17g", x); 
```

取决于你的输出方法。

**更新：**使用高精度计算器并手动进行计算，我得到：

```
n = 0: ((1 + 0/1000)*(1 + 0/1000) - 1)*1000
        == 0
n = 1: ((1 + 0/1000)*(1 + -1.09526/1000) - 1)*1000
        == -1.09526
n = 2: ((1 + -1.09526/1000)*(1 + 5.46038/1000) - 1)*1000
        == 4.3591394642012
n = 3: ((1 + 4.3591394642012/1000)*(1 + -1.61801/1000) - 1)*1000
        == 2.734076332956727816388
n = 4: ((1 + 2.734076332956727816388/1000)*(1 + 0.283089/1000) - 1)*1000
        == 3.017939319891748203508813462532 
```

运行代码时得到的结果相同：

```
 0  
 -1.0952599999999999  
 4.3591394642012  
 2.7340763329567279  
 3.0179393198917484 
```

但是，当我将 1000 替换为 10000 时，我会得到您的“预期结果”，

```
 0  
 -1.0952599999999999  
 4.3645219464201199  
 2.7458057624046663  
 3.0289724931454134 
```

这似乎回答了你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:30:46.707

在 Visual Studio 中，`double`是 IEEE754 双精度。它具有 53 位二进制精度，或大约 15-16 个十进制有效数字。

打印值的诊断代码可能只打印到 7 位精度。或者您的调试器视图仅显示 7 位精度。

换句话说，问题不在于底层数据类型，而在于您查看该数据的方式。

**更新 1**

您的评论表明您认为对双精度值的计算正在执行到单精度。默认情况下，情况并非如此。如果您通过调用来更改浮点精度控制，则可能会发生这种情况[`_controlfp`](http://msdn.microsoft.com/en-us/library/e9b52ceh%28v=vs.100%29.aspx)。但是，如果您的浮点控件设置为默认值，则对双精度值的操作将不会四舍五入为单精度。

**更新 2**

您的 Excel 计算正在执行不同的计算。C++ 程序的输出与代码匹配。`-1.09526`与代码匹配的第一个非零值输出。因为代码说值应该是`dailycompoundval[1]`. Excel 代码中的相应值`-1.095231419`因此与 C++ 代码不匹配。

换句话说，这个问题是一个红鲱鱼。这里没有舍入问题。问题完全在于您的代码的两个不同版本之间的差异。

**更新 3**

您的 C++ 代码与最新更新中的表达式不匹配。代码使用 1000 的乘法因子，但您的表达式使用 10000 的因子。

# java - 使用 Java 的序列化 I/O

> ID：14357298
> 
> 赞同：2
> 
> 时间：2013-01-16T11:25:58.203
> 
> 标签：java, io

所以最近我在这里发布了关于 Java 的类似问题。每次有人回答我的问题时，就会出现更多问题。谢谢大家。解决了附加问题，现在使事情变得漂亮。

[文件.java]

```
public class File {

    public static void main(String[] args) {

        FileWrite fW = new FileWrite();

        try (BufferedReader br = new BufferedReader(new FileReader("B:\\LongIn.dat"))) {
            String stCurrent;
            while ((stCurrent = br.readLine()) != null) {
                System.out.println(stCurrent);
                fW.serializeAddress(stCurrent);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }

    }
} 
```

[文件写入.java]

```
public class FileWrite {

    public void serializeAddress(String in) {
        try {
            File file = new File("B:\\LongOut.txt");
            if (!file.exists()) {
                file.createNewFile();
            }

            FileWriter fw = new FileWriter(file.getAbsoluteFile(), true);
            BufferedWriter bw = new BufferedWriter(fw);
            bw.write(in);

            bw.close();

            System.out.println("Done");
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }
} 
```

现在我的程序在将字符串写入文件时追加。但是我有两个问题。

1.  在阅读方面，将大量字符串存入某个变量以便我的程序可以使用它的好方法是什么？

2.  附加输出有效，但组织得不好。如中，结果在输出文件中相互网格化。如何使输出全部排列并看起来不错？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:31:42.810

如果您希望将行分开，在不更改大部分代码的情况下最简单的方法是添加`newLine()`call after`write()`像这样：

```
bw.write(in);
bw.newLine();
bw.close(); 
```

Javadoc：[BufferedWriter#newLine()](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedWriter.html#newLine)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:06:01.023

apache Commons IO 怎么样，它们确实提供了许多有用的实用方法来简单地使用文件。查看类[FileUtils](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html)了解更多信息。

# c# - 渲染用户控件动态磁贴 Windows 手机

> ID：14357302
> 
> 赞同：2
> 
> 时间：2013-01-16T11:26:12.073
> 
> 标签：c#, user-controls, windows-phone, writeablebitmap, live-tile

看起来我设法通过在每次测量之前和之后在我的用户控件上调用 UpdateLayout 并安排调用来解决它，到目前为止工作良好。如果有人有其他解决方案，请告诉我

我有一个类似于这篇 [文章](https://stackoverflow.com/questions/11187565/saving-usercontrol-as-a-jpg-result-is-squished/11188665#11188665)中的问题，似乎用户已经找到了背后的原因。我想知道除了创建堆栈面板以在更新时正确渲染活动图块之外，是否还有其他解决方案？相同的代码在创建磁贴时工作正常，但在更新时无法正确呈现。

这是我的方法：

```
 private void updateFrontTile()
    {
        var frontTile = new FrontMzaarTileControl();

        TileData tileData = new TileData()
        {
            temp= "1",
            temp2= "2",
            temp3= "3",
            temp4= "4",
            temp5= "5"
        };

        frontTile.DataContext = tileData;
        frontTile.Measure(new Size(691, 336)); // the user from the other post believes that this is not doing anything
        frontTile.Arrange(new Rect(0, 0, 691, 336)); // the user from the other post believes that this is not doing anything

        var bmp = new WriteableBitmap(691, 336);
        bmp.Render(frontTile, null);
        bmp.Invalidate();

        var isf = IsolatedStorageFile.GetUserStoreForApplication();
        FrontTileFilename = "/Shared/ShellContent/FrontTile.jpg";

        if (!isf.DirectoryExists("/Shared/ShellContent"))
        {
            isf.CreateDirectory("/Shared/ShellContent");
        }

        using (var stream = isf.OpenFile(FrontTileFilename, System.IO.FileMode.Create))
        {
            bmp.SaveJpeg(stream, 691, 336, 0, 100);
        } 
    } 
```

# c# - 在编译时检查数据类型值

> ID：14357303
> 
> 赞同：1
> 
> 时间：2013-01-16T11:26:15.730
> 
> 标签：c#, asp.net, c#-4.0, custom-controls, web-controls

我创建了一个自定义网络服务器控件并赋予了一个属性 CustomWidth 。此属性类似于服务器控件的宽度属性。

假设如果用户在 aspx 页面设置它的值，那么我想在编译时检查它的值。

如果它不是 (int + "PX") px 的格式，则可能是可选的，那么构建应该会失败。

但我不能为此属性使用 Unit 数据类型（在服务器控件中使用）。

请建议我解决方案如何在编译时检查其值我想为此属性创建自己的数据类型并在编译时检查其值..

提前致谢 。

# jqplot - jqplot - 以“1 mil、2 mil、3 mil”或“1k 2k 3k”的形式在 y 轴上格式化值，而不是实际数字

> ID：14357306
> 
> 赞同：1
> 
> 时间：2013-01-16T11:26:21.207
> 
> 标签：jqplot

有谁知道如何做到这一点？

基本上，我不想在 Y 轴上显示 100000、200000、300000 等值。它们应该是 10 K、20 K、30 K 或“1 mil”、2 mil 等等。

有没有办法在 jqPlot 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:47:59.727

尝试这样的事情：

```
 tickFormatter = function (format, val) { 
 var number = val/1000;
 return number+"K";
} 
```

并将此选项添加到情节中：

```
axes: {
  yaxis: {
    tickOptions: {
      formatter: tickFormatter
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:14:04.477

是的，您必须使用轴`formatter`；就像是：

```
 tickFormatter = function (format, val) { 
    if (val >= 110000)
      return "110K"    
    else if (val >= 100000)
      return "100K";
    else if (val >= 90000)
       return "20K";
    else if (val >= 80000)
       return "30K";   
    else if (val >= 70000)
      return "10K";
    else if (val >= 60000)
       return "20K";
    else if (val >= 50000)
       return "30K";
    else if (val >= 40000)
       return "30K";
    else if (val >= 30000)
       return "30K";    
    else if (val >= 20000)
       return "20K";
    else if (val >= 10000)
       return "10K";
    else
      return val;
  } 
```

![在此处输入图像描述](../Images/8daa1f16cf5387e7c5292a7691e270e8.png)

[请参阅此处](http://jsfiddle.net/3DB4N/1/)的工作示例。

# vmware - 虚拟化和部署/升级

> ID：14357307
> 
> 赞同：0
> 
> 时间：2013-01-16T11:26:22.463
> 
> 标签：vmware, virtualization, release-management, hyper-v

我希望有人可以帮助我指出正确的方向。

我们有一个应用程序套件，目前在一个安装中跨越 4 个虚拟机。我们支持 VMWare 和 HyperV。

知道每个开发人员都有自己的设置，每次完成新构建（包含错误修复和功能）时，每个开发人员都需要升级那里的系统。这需要相当长的时间，下载新构建，执行构建，测试以确保您仍然可以运行，然后拍摄系统快照。

每个系统都有不能在镜像之间移植的配置文件；这些包含服务器信息、IP 地址等。

有什么方法可以完成一次升级并部署到每个开发人员设置的（不覆盖现有图像，因为图像将具有所有配置信息）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T13:58:26.820

让我试试看我是否明白你的意思。从我的感觉来看，你想要的是一个虚拟机周期管理的解决方案，从最初的操作系统安装到配置管理（包括软件补丁安装）。如果您的客户操作系统是 Linux，有一些主流的开源解决方案适合您。

1.  操作系统安装，推荐 cobbler（[http://cobbler.github.com/](http://cobbler.github.com/)），您可以使用它指定 IP 地址、主机名来安装新的操作系统，cobbler 支持 VM 和 pysical 机器。
2.  配置管理、推荐puppet( [https://puppetlabs.com/](https://puppetlabs.com/) )、软件更新规则可随心定制，puppet好用。

如果客户操作系统是非linux系统，比如windows，你最好在windows world中寻找一些类似的解决方案。总而言之，我讲的所有内容都在一个计算机科学主题下，称为 CM，配置管理，您可以从 wiki 找到它的定义。

希望以上内容对您有所帮助。

# regex - 正则表达式模式匹配单点

> ID：14357308
> 
> 赞同：2
> 
> 时间：2013-01-16T11:26:23.163
> 
> 标签：regex

是否可以编写一个模式来检查字符的连续出现

应该匹配

> "ap@l.com","apc@l.com"

它不应该匹配

> “a..p@k.com”。

基本上我需要这个来检查电子邮件地址是否有效

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T11:34:48.297

如果语言支持它，您可以使用[否定的look-ahead 和look-behind](http://www.regular-expressions.info/lookaround.html)：

```
(?<!\.)\.(?!\.) 
```

这将只匹配一个不在一个时期之后或之前的时期。[在这里](http://rubular.com/r/dnfBZqHKiD)查看它的实际应用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T11:29:21.600

您可以反转正则表达式以匹配`>1`点 - 如果不匹配，则字符串有效：

```
\.{2,} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T12:22:13.967

有用于电子邮件验证的正则表达式。无需重新发明轮子。

对你的例子有用的应该是`(\w\.?)+@(\w\.?)+`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T11:29:06.340

这将匹配每个字符串中的一行中的一个点

```
\.[^.] 
```

或者您可以检查所有应该连续出现一次的字符

```
[.-,]{1} 
```

# r - R e1071 预测与 libsvm 不同

> ID：14357311
> 
> 赞同：0
> 
> 时间：2013-01-16T11:26:34.980
> 
> 标签：r, svm, libsvm

我正在尝试使用纯 libsvm 重现我在 R 中获得的结果。

首先，我尝试使用`write.svm`功能导出我的模型。我有模型文件和比例文件。我已经用 缩放了我的测试数据，`svm-scale -r model_file test_data`然后应用`svm-predict`. 但是我在 R 和 libsvm 中得到的结果是不同的。

然后我尝试用我的训练数据训练 libsvm，我的预测再次与 e1071 不同。

有人能帮我吗？

PS 我正在使用 eps 回归类型的 svm

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T13:20:01.693

问题在于缩放，R e1071 和 libsvm 中的缩放函数不同。所以我在 R 中对数据进行了除垢，然后用 libsvm 将其缩小。所以它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T08:27:58.110

您是否使用随机样本进行训练？e1071 libsvm 是否隐含使用一个？如果是这样，种子是否与您的样本匹配？

# asp.net-mvc - 自定义查询/报告返回类型

> ID：14357313
> 
> 赞同：0
> 
> 时间：2013-01-16T11:26:43.903
> 
> 标签：asp.net-mvc, entity-framework

我目前正在使用 EF 和 MVC 构建自定义报告生成器。我的查询生成器构建 SQL，然后我可以使用 dbSet.SqlQuery() 对数据库运行此查询。

但是，用户将能够选择他们希望返回的字段，可能来自不同的表。

因此，我不确定将结果返回为哪种“类型”。如果只选择“客户”表中的字段，我可以轻松返回“客户”列表。

我希望这是有道理的。任何人都可以在这里给我任何指示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:09:02.240

嗯...不确定您是否会找到完美的解决方案。问题是您需要在运行时定义列。最初我在想你可以尝试使用匿名类型，但你不能在方法签名中使用匿名类型。 [这是](http://msdn.microsoft.com/en-us/library/ee461504.aspx)Dennis 建议的关于动态对象的文章，但是将其与您的想法联系在一起是我的头。长话短说，我认为没有一个简单的答案。

这是通过查看[此 MSDN Artical](http://msdn.microsoft.com/en-us/data/jj592907.aspx)创建的示例，了解如何针对您的 DBContext 执行通用查询。您可能可以使用它，但您将无法保留您的数据类型（也许这对您的报告无关紧要？）：

```
using (var context = new BloggingContext())
{
    //Here blogNames will be a List<string[]>
    var blogNames = context.Database.SqlQuery<string[]>(
                       "SELECT Name, YourProperty FROM dbo.Blogs").ToList();
} 
```

# ruby - Ruby 字符串范围

> ID：14357316
> 
> 赞同：1
> 
> 时间：2013-01-16T11:27:04.777
> 
> 标签：ruby, string

我如何检查字符串的红宝石长度，它的范围，例如：

```
s_query.length?[5..20] 
```

我是 ruby​​ 新手，如果检查，如何编写这样的代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T11:31:21.423

你几乎明白了：

```
 (5..20).cover? s_query.length 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T11:37:05.063

检查这个

```
s_query.length.between?(5, 20) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T11:34:46.267

还 `s_query.length.between?(5,20)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-01T18:50:01.207

这里有一些东西可以冥想：

```
(5 .. 10) === 'hello world'.length # => false
(5 .. 10) === 'foo bar'.length # => true

```

这是有效的，因为[`===`](http://www.ruby-doc.org/core-2.0/Range.html#method-i-3D-3D-3D)在 Range 中定义为返回布尔值 true/false，无论右侧是否在左侧范围内。

从[文档中](http://www.ruby-doc.org/core-2.0/Range.html#method-i-3D-3D-3D)：

> rng === obj → true or false click to toggle source
> 
> 如果 obj 是范围的元素，则返回 true，否则返回 false。方便的是，=== 是 case 语句使用的比较运算符。

```
案例 79
当 1..50 然后打印“低\n”
当 51..75 然后打印 "medium\n"
当 76..100 然后打印 "high\n"
结尾

```

> 产生：

```
高的

```

# ruby-on-rails - FactoryGirl — 工厂未注册

> ID：14357322
> 
> 赞同：4
> 
> 时间：2013-01-16T11:27:31.290
> 
> 标签：ruby-on-rails, ruby, rspec, factory-bot

我已经看过[这里](https://stackoverflow.com/questions/13463223/factorygirl-not-registered-only-one-factory-runs-into-this)和[这里了](https://stackoverflow.com/questions/9300231/factory-already-registered-user-factorygirlduplicatedefinitionerror)。我加载`factory_girl_rails`很好。

我认为这一定是语法错误，但经过一个小时的挠头，真的无法修复它。有人可以帮忙吗？:)

这是我的工厂：

```
require 'Faker'

FactoryGirl.define do

  factory :user do
    name { Faker::Name.name }
    email { Faker::Internet.email }
    password { Faker::Lorem.characters 12 }
  end

  trait :with_teams do
    ignore do
      number_of_teams 5
    end

    after :create do |user, evaluator|
      FactoryGirl.create_list :team, evaluator.number_of_teams, :user => user
    end
  end

end 
```

这是相关的规范：

```
require 'spec_helper'

describe User do
  # This works fine
  it "can create a team" do
    user = FactoryGirl.create :user
    team = user.teams.create

    team.class.should == Team
  end

  # The marked line throws argument error
  it "can have many teams" do
    user = FactoryGirl.create :user, :with_teams, :number_of_teams => 10 # <---
    user.teams.length.should == 10
  end
end 
```

这是我从运行规范中得到的错误：

```
 Failures:

      1) User can have many teams
         Failure/Error: user = FactoryGirl.create :user, :with_teams, :number_of_teams => 10
         ArgumentError:
           Factory not registered: User
         # ./spec/factories/users.rb:19:in `block (3 levels) in <top (required)>'
         # ./spec/models/user_spec.rb:34:in `block (2 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T11:34:58.250

```
require 'factory_girl_rails'
FactoryGirl.factories.clear 
```

这可能会解决您的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T11:48:01.157

特征应该在工厂内部。在您的代码中，`:user`工厂和`:with_teams`特征不相关。

```
require 'Faker'

FactoryGirl.define do

  factory :user do
    name { Faker::Name.name }
    email { Faker::Internet.email }
    password { Faker::Lorem.characters 12 }

    trait :with_teams do
      ignore do
        number_of_teams 5
      end

      after :create do |user, evaluator|
        FactoryGirl.create_list :team, evaluator.number_of_teams, :user => user
      end
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T19:11:26.800

我看到的问题是您没有一个名为`teams`.

```
require 'Faker'
FactoryGirl.define do

  factory :user do
  team
   #.... your code here
  end

  factory :team do
   #... more code here as necessary 
  end
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-29T13:20:18.513

正如[wintondeshong](https://stackoverflow.com/users/338305/wintondeshong)在这里的评论中所说 - 您可能应该重新加载您的工厂，但之前您可以检查它们是否存在：

```
FactoryGirl.factories.count
FactoryGirl.factories 
```

然后

```
FactoryGirl.reload 
```

# java - java中的“代码弃用”

> ID：14357330
> 
> 赞同：0
> 
> 时间：2013-01-16T11:27:40.480
> 
> 标签：java, warnings

我使用日期类来获取当前小时的功能

```
Date date = new Date();
int t=date.getHours(); 
```

并且 eclipse 一直在抱怨代码被弃用。一切正常，但它一直在警告我，我有理由改变它吗？有没有获得当前时间的替代方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:30:13.233

如果您查看[java.util.Date API](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Date.html#getHours%28%29)

[getHours()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Date.html#getHours%28%29)是一个不推荐使用的方法

> 已弃用。从 JDK 1.1 版开始，由 Calendar.get(Calendar.HOUR_OF_DAY) 取代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:32:14.273

当发现库的某些部分存在问题时，它们会被标记为*已弃用*，但设计人员认为对现有部分的改进可能会破坏许多已经依赖于旧行为的现有程序。

因此，他们保留现有部分，至少一段时间（以保持现有源的编译能力，直到它们被更新），同时通常提供替代方案。

现在，关于 Java 中的时间，大多数人推荐[Joda time](http://joda-time.sourceforge.net/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T11:33:22.603

你应该改变它的原因是它`java.util.Date`在许多微妙的方面被打破了。您的代码可能在某些情况下工作而在其他情况下失败（例如，当您在具有不同时区的计算机上运行它时，当黑客攻击您的应用程序时，当有人弄乱序列化`Date`对象时，......）

2013年，你不应该再使用`java.util.Date`了。如果必须，请使用`Calendar`，或者更好的[joda-time library](http://joda-time.sourceforge.net/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T11:29:41.407

`Date#getHours`已弃用：

> 从 JDK 1.1 版开始，由 Calendar.get(Calendar.HOUR_OF_DAY) 取代。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T11:31:14.527

更改的原因是已弃用的代码被“标记”为在将来的版本中删除，因此如果您打算随着时间的推移对其进行维护，则不应在代码中使用弃用的方法。
至于如何获取时间，来自 Date Javadoc：

```
As of JDK version 1.1, replaced by Calendar.get(Calendar.HOUR_OF_DAY). 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T11:31:23.433

`Date.getHours`自 JDK 1.1 版起已弃用。您应该`java.util.Calendar.get(Calendar.HOUR_OF_DAY)`改用：

```
Calendar c = Calendar.getInstance();
int t = c.get(Calendar.HOUR_OF_DAY); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-16T11:32:17.770

[http://uk.answers.yahoo.com/question/index?qid=20081123050802AAL0gAm](http://uk.answers.yahoo.com/question/index?qid=20081123050802AAL0gAm)

基本上，您仍然可以使用该方法。但是接下来的几个 java 版本可能不支持它。

顺便说一句，您可以通过使用 Calendar 类来解决这个问题。

# php - 使用php删除文本文件中包含字符串的行

> ID：14357333
> 
> 赞同：-1
> 
> 时间：2013-01-16T11:27:47.353
> 
> 标签：php

```
<?php
$myFile = "myfile.txt";
$fh = fopen($myFile, 'rt');
$theData = fread($fh, filesize($myFile));
$aDoor = $_GET['idno'];
echo $aDoor;
$theData = preg_replace('/\n?.*$aDoor.*$/m', '', $theData);

fwrite($fh, $theData);
fclose($fh);
echo $theData;
?> 
```

preg_replace('/\n?. *SOMETEXT.* $/m', '', $theData); 这是工作

现在如何使用 $aDoor 字符串

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:31:33.013

`unset()`在php中使用函数

例子

```
 unset($aDoor); 
```

然后写内容...

# ios - 将视频从亚马逊流式传输到 iOS 设备

> ID：14357340
> 
> 赞同：7
> 
> 时间：2013-01-16T11:28:14.373
> 
> 标签：ios, amazon-web-services

我将视频存储在 Amazon S3 存储桶中，并使用 Cloudfront 将它们流式传输到我的网站。一切正常，但现在我的网站也有一个 iPad 应用程序，我想将相同的视频流式传输到我的 iPad 应用程序。

我能找到的唯一文档是：

[http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/LiveStreamingAdobeFMS4.5.html](http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/LiveStreamingAdobeFMS4.5.html)

它很好地解释了如何在不同的设备上进行直播。我也知道 CloudFront 使用 FMS 3.5，并且我已经为 FMS 4.5 设置了 CloudFormation Stack，但我不知道如何将它连接到我的存储桶、创建安全 URL 并将视频流式传输到 iOS 设备。

请帮助并向我提供解释如何使用安全 URL 将 VOD 从亚马逊流式传输到 iOS 设备的任何文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:03:32.373

这真的是3个问题：

1.  如何将 CloudFormation 连接到 S3？创建一个[指定您的 S3 存储桶的云模板。](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html)像这样：

    {“资源”：{“HelloBucket”：{“类型”：“AWS::S3::Bucket”}}}

2.  如何创建安全的 CloudFormation 链接？使用[CloudFormation IAM 集成。](http://aws.typepad.com/aws/2011/09/powerful-new-features-for-aws-cloudformation.html)

3.  如何在 iOS 上流式传输视频？

您需要使用[AVFoundation](http://developer.apple.com/library/mac/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/02_Playback.html)类。

```
NSURL *url = [NSURL URLWithString:@"<#Live stream URL#>"];
// You may find a test stream at http://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8 

self.playerItem = [AVPlayerItem playerItemWithURL:url];
[playerItem addObserver:self forKeyPath:@"status" options:0 context:&ItemStatusContext];
self.player = [AVPlayer playerWithPlayerItem:playerItem]; 
```

您可能需要 Apple 开发人员登录才能访问该链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T07:06:45.113

通过亚马逊网络服务支持上线后，我被引导按照以下方式完成任务。

1.  [从此AMI](http://helpx.adobe.com/adobe-media-server/kb/flash-media-server-amazon-machine.html)之一启动 EC2 实例
2.  将我的 S3 连接到 EC2 并配置 Adob​​e FMS 4.5 以从 S3 中提取内容。[（如何）](http://help.adobe.com/en_US/flashmediaserver/amazonec2/WS6fc2df2b6d2ce2431afba23c12c3967d3ca-7ff1.2.html#WS0432746db30523c21e63e3d12c9b337c0c-8000.2)
3.  使用 EC2 实例作为 CloudFront 下载分配的源。

# php - MySQL CURRENT_TIMESTAMP 字段在每次更新时更新

> ID：14357341
> 
> 赞同：2
> 
> 时间：2013-01-16T11:28:16.110
> 
> 标签：php, mysql, timestamp

解释这个问题的最好方法是举个例子。

## 我有一张桌子：

```
CREATE TABLE `example` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `data` varchar(255) DEFAULT NULL,
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated` datetime DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 
```

结果：

```
   编号 | 数据 | 创建 | 更新
 (空)| (NULL) | (NULL) | （空值）

```

## 然后我插入一些数据：

```
INSERT INTO example (
  `data`
) VALUES (
  'abc123'
) 
```

结果：

```
  编号 | 数据 | 创建 | 更新
   1 | abc123 | 2013-01-16 13:12:16 | （空值）

```

## 然后我更新

```
UPDATE example SET 
  `data` = 'def456',
  `updated` = NOW()
WHERE id = 1 
```

结果：

```
  编号 | 数据 | 创建 | 更新
   1 | def456 | 2013-01-16 13:16:24 | 2013-01-16 13:14:26

```

**问题：**注意`created`字段如何更新，并且正确保存更新字段的时间略有不同。我已经在同一个数据库上设置了这个示例表和其他类似的表，没有这个问题，所以我完全被它弄糊涂了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-16T11:31:43.590

`updated`需要是：`TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP`

所以你`CREATE TABLE`会是：

```
CREATE TABLE `example` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `data` varchar(255) DEFAULT NULL,
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated` timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 
```

这意味着当您`UPDATE`将来执行时，您不需要传入更新变量，因为 MySQL 会自动为您更新它:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T09:36:04.290

这可能是意外创建**问题表的方式：**

```
CREATE TABLE `example` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `data` VARCHAR(255) DEFAULT NULL,
  `created` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `updated` DATETIME DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MYISAM DEFAULT CHARSET=utf8; 
```

也许有人使用 3rd 方软件来创建它？

An`ON UPDATE CURRENT_TIMESTAMP`将破坏创建日期。所以要**解决这个问题**，像这样使用`ALTER TABLE`：

```
ALTER TABLE example CHANGE created created TIMESTAMP DEFAULT CURRENT_TIMESTAMP; 
```

这将消除`created`每次更新时不需要的字段覆盖。

# r - 从 R 中调试 Fortran 代码

> ID：14357342
> 
> 赞同：6
> 
> 时间：2013-01-16T11:28:22.203
> 
> 标签：r, debugging, fortran, call, subroutine

我有一段很长的继承 FORTRAN77 代码，我使用`.Fortran()`. Fortran 代码包含一组子例程，并且在嵌入到 Fortran 程序中并随后从命令行编译和运行时工作。但是，当我从 R 调用它时，它会在我第二次调用该函数时使 R 崩溃。

由于 Fortran 代码使用存储为变量的大量索引和数组维度，我认为那里出了点问题。在某些时候，Fortran 代码正在内存中不应该出现的地方查找。所以我需要单步执行 Fortran 代码并检查来自 R 的所有内容是否是我认为的那样，以及代码是否按照我的想法执行。

如果它是一个 R 函数，我可以选择使用`debug()`、添加`browser()`语句并打印出我想在代码中的某一点看到的任何值。但是 Fortran 代码不允许我做任何这些事情。如果我理解正确，R 不会捕获 Fortran 的屏幕输出。

那么有没有人知道我如何准确地检查 R 传递给 Fortran 代码的参数的类型和值。如果您能解释我随后如何在从 R 调用该代码时调试该代码，那就太好了。

这是一个例子来说明我的意思。

```
C An example program
C
      PROGRAM EXAMPLE
      INTEGER N
      PARAMETER (N=10)
      REAL X0, X(N),MEAN

C
      X0 = 14
      DO 10 I = 1,10
         FI = FLOAT(I)
         X(I) = X0 + FI
   10 CONTINUE
      CALL MYSUB(X0,MEAN)
      END
C
C Mysub the subroutine
C
      SUBROUTINE MYSUB(X,N,MEAN)
      INTEGER N
      REAL X(N), MEAN
      MEAN = 0
      DO 20 I = 1,N
         MEAN = MEAN + X(I)
   20 CONTINUE
      MEAN = MEAN / N
      RETURN
      END 
```

假设我想从 R 调用子例程 mysub，并且我想确保我正确地得到 X 和 N。我使用以下功能：

```
mysub <- function(x){
    if(!is.vector(x) | is.numeric(x)) stop("X has to be a numeric vector")
    n <- length(x)
    res <- .Fortran('mysub',X=as.single(x), N=as.integer(n), MEAN=single(1))
    return(res$MEAN)
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-21T22:20:02.670

在您的示例程序中，您只使用 2 个参数而不是 MYSUB 定义中的 3 个参数调用 MYSUB： (X, N, MEAN)

这可能与您的问题无关，但是由于您询问调试 FORTRAN 和参数，我想我应该指出它。FORTRAN 子例程是独立的编译。没有什么可以阻止您传递错误数量的参数（没有编译器错误或链接提示），这可能会导致问题。

# android - 调用需要 API 级别 14（当前最低为 10）：

> ID：14357344
> 
> 赞同：4
> 
> 时间：2013-01-16T11:28:33.047
> 
> 标签：android

我该如何解决这个错误？我不明白这个错误背后的原因？

代码

```
devicePolicyManager.setCameraDisabled(demoDeviceAdmin, false); 
```

错误 ：

> 调用需要 API 级别 14（当前最低为 10）：android.app.admin.DevicePolicyManager#setCameraDisabled DevicePolicyDemoActivity.java /DevicePolicyDemoActivity/src/com/marakana/android/devicepolicydemo line 62 Android Lint Problem

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T11:38:23.467

这实际上是来自 Lint 的警告，而不是错误。如果您想保持当前的最低 SDK 级别，您可以取消警告，并在运行时自行检查 SDK 级别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:30:14.950

您收到此错误是因为清单中定义的最低 SDK 级别为 10。`devicePolicyManager. setCameraDisabled(demoDeviceAdmin, false);`需要 API 14+。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T11:31:26.493

您需要将目标版本设置为 API 级别 14 以上。右键单击您的项目。选择属性。转到安卓。选择 API 级别 14 以上的版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T11:35:12.653

`setCameraDisabled()`中介绍了方法`API level 14`。[在这里](http://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#setCameraDisabled%28android.content.ComponentName,%20boolean%29)查看官方文档。如果您想使用此方法，您应该更改应用程序的 API 级别。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T12:24:24.550

在清单文件中进行此更改：

```
<uses-sdk android:minSdkVersion="14" android:targetSdkVersion="15" /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T11:31:19.533

改变

```
<uses-sdk android:minSdkVersion="10" android:targetSdkVersion="15" /> 
```

至

```
<uses-sdk android:minSdkVersion="14" android:targetSdkVersion="15" /> 
```

在你的`AndroidManifest.xml`.

因为`devicePolicyManager.setCameraDisabled(demoDeviceAdmin, false);`需要 API 14+。

**注：（**约阿希姆·伊萨克森）

> 虽然这将提高从 Android 2.3.3 到 Android 4.0 运行应用程序的“标准”。

# r - 在 data.frame 的列上 lop %in%: 代码不起作用

> ID：14357349
> 
> 赞同：1
> 
> 时间：2013-01-16T11:28:41.300
> 
> 标签：r

我有两个 data.frames（这里只报告了一个子集，因为它们太大了）：

DF1：

> ```
>  "G1"           "G2"  
>   IL3RA          ABCC1      
>   SRSF9          ADAM19     
>   IL22RA2        BIK 
>   UROD           ALG3
>   SLC35C2        GGH
>   OR12D3         SEC31A    
>   OSBPL3         HIST1H2BK 
> ```

DF2：

> ```
>  "S1"            "S2"     "S3"
>   IL3RA            0        0      
>   SRSF9            1        1       
>   A1CF             0        0       
>   A1CF1            1        1       
>   GGH              2        0        
>   HIST1H2BK        0        0          
>   AAK1             0        0 
> ```

我想要以下输出：

> ```
>  "G1"            "S2"   "S3"     "G2"   "S2"   "S3"
>   IL3RA            0      0        GGH     2      0 
>   SRSF9            1      1     HIST1H2BK  0      0 
> ```

我在另一个类似的情况下应用了向我建议的功能。功能是：

> lapply(DF1, function(x) DF2[na.omit(match(DF2[[1]], x)), ])

令人惊讶的是，在这种情况下它不起作用。我真的不知道为什么..我在我的新数据上完全复制了标题为“lop %in% over the columns of a data.frame”的帖子中发布的案例，但没有。由于 DF1 和 DF2 太大，我尝试使用集群来拥有更多内存，假设问题出在可用内存中……但没有。它给出的输出如下：

> ```
>  "S1"            "S2"     "S3"
>   IL3RA            0        0      
>   SRSF9            1        1       
> 
>   "S1"            "S2"     "S3"
>   GGH              2        0      
>   AAK1             0        0 
> ```

任何人都可以帮助我吗？

最好的

B.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:57:12.680

这应该这样做。

```
df1 <- structure(list(G1 = c("IL3RA", "SRSF9", "IL22RA2", "UROD", "SLC35C2", 
"OR12D3", "OSBPL3"), G2 = c("ABCC1", "ADAM19", "BIK", "ALG3", 
"GGH", "SEC31A", "HIST1H2BK")), .Names = c("G1", "G2"), class = "data.frame", row.names = c(NA, 
-7L))
df2 <- structure(list(S1 = c("IL3RA", "SRSF9", "A1CF", "A1CF1", "GGH", 
"HIST1H2BK", "AAK1"), S2 = c(0L, 1L, 0L, 1L, 2L, 0L, 0L), S3 = c(0L, 
1L, 0L, 1L, 0L, 0L, 0L)), .Names = c("S1", "S2", "S3"), class = "data.frame", row.names = c(NA, 
-7L))

idx1 <- match(df1$G1, df2$S1)
idx1 <- idx1[!is.na(idx1)]
idx2 <- match(df1$G2, df2$S1)
idx2 <- idx2[!is.na(idx2)]

out <- cbind(df2[idx1, ], df2[idx2, ])
> out
     S1 S2 S3        S1 S2 S3
1 IL3RA  0  0       GGH  2  0
2 SRSF9  1  1 HIST1H2BK  0  0 
```

**编辑：**解决方案使用`lapply`

```
out <- lapply(df1, function(x) {
    idx <- match(x, df2$S1)
    idx <- idx[!is.na(idx)]
    df2[idx, ]
})
# now `out` is a list of data.frames
out.f <- do.call(cbind, out)
# they'll be combined by columns
  G1.S1 G1.S2 G1.S3     G2.S1 G2.S2 G2.S3
1 IL3RA     0     0       GGH     2     0
2 SRSF9     1     1 HIST1H2BK     0     0 
```

# linux - 如何使用 vsftp 将用户监禁到其主文件夹的子目录

> ID：14357354
> 
> 赞同：0
> 
> 时间：2013-01-16T11:28:51.490
> 
> 标签：linux, ftp, vsftpd

当用户登录时如何配置用户以将 root 更改为其主文件夹的子目录。IE`/home/username/files`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-16T11:47:51.307

编辑

```
/etc/vsftpd/vsftpd.conf 
```

添加或更改：

```
chroot_local_user=YES
user_sub_token=$USER
local_root=/home/$USER/directory 
```

# datepicker - 关联两个剑道日期选择器以确保 To date 始终大于或等于 From date

> ID：14357355
> 
> 赞同：2
> 
> 时间：2013-01-16T11:28:55.653
> 
> 标签：datepicker, kendo-ui

kendo DatePicker 中是否有任何默认方式来确保（并相应地提醒用户）To date 始终大于或等于 From date。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T11:49:23.413

没有默认方式，但在 Kendo UI 演示页面中有一个示例可能会对您有所帮助。[在这里](http://demos.kendoui.com/web/datepicker/rangeselection.html)阅读

基本上给出了这个HTML：

```
<div class="demo-section" style="width:470px">
    <label for="start">Start date:</label>
    <input id="start" value="10/10/2011"/>

    <label for="end" style="margin-left:3em">End date:</label>
    <input id="end" value="10/10/2012"/>
</div> 
```

而这个 DatePicker 初始化：

```
var start = $("#start").kendoDatePicker({
    change: startChange
}).data("kendoDatePicker");

var end = $("#end").kendoDatePicker({
    change: endChange
}).data("kendoDatePicker");

start.max(end.value());
end.min(start.value()); 
```

他们提出以下建议`startChange`和`endChange`功能：

```
function startChange() {
    var startDate = start.value();

    if (startDate) {
        startDate = new Date(startDate);
        startDate.setDate(startDate.getDate() + 1);
        end.min(startDate);
    }
}

function endChange() {
    var endDate = end.value();

    if (endDate) {
        endDate = new Date(endDate);
        endDate.setDate(endDate.getDate() - 1);
        start.max(endDate);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:32:52.030

没有默认方式。使用**[change](http://demos.kendoui.com/web/datepicker/events.html)**事件比较两个不同日期选择器的日期，并在不正确时提醒用户。请记住，要获取值，您应该使用[**value**](http://demos.kendoui.com/web/datepicker/api.html)方法。

# google-tv - 如何在 GoogleTV 项目中使用 .so 文件

> ID：14357356
> 
> 赞同：0
> 
> 时间：2013-01-16T11:28:57.650
> 
> 标签：google-tv

我创建了一个 GoogleTV 项目（**GoogleTV AddOn API 12**）。在这里，我需要使用第三方播放器来实现 Http Live 流。现在，当我运行代码时，它给了我“UnSatisfiedLinkError”，当.so 文件未找到（特别是对于这个项目）。现在，我确实提取了 APK，发现 .so 文件存在于 lib/armeabi 文件夹而不是 lib 文件夹中。我已将所有 jar 文件放在 libs 文件夹中，并将所有 .so 文件粘贴到 armeabi 文件夹中（放置在 libs 文件夹中）。**强文本**

有人可以对此提出任何建议吗？

提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:39:33.377

一些东西。Google TV 目前不支持 NDK。如果您正在编写 Google TV 应用程序，您将无法使用任何使用 NDK 的代码/库。此外，您应该为您的 Google TV 项目定位 API 13。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:11:38.480

NDK / .so 文件尚不适用于 Google TV。

# pdf - 数据网格到 C1PdfDocument (ComponentOne)

> ID：14357359
> 
> 赞同：0
> 
> 时间：2013-01-16T11:29:11.740
> 
> 标签：pdf, datagrid, grid, componentone

我不确定这里是否有人熟悉 ComponentOne 的 c1pdfdocument，希望如此。

我想要实现的只是在我的 PDF 上获得一个 datagrid/table/。我已经准备好将数据放入 DataTable 中，但我不知道如何将其添加到我的 c1pdfdocument 中，而且我在网上找不到它。

问候，格本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:04:07.827

我编写了一些将 C1DataGrid 和 C1FlexGrid 转换为 PDF 的示例。虽然，只有 Silverlight 和 WPF。我的解决方案使用网格控件中的 GetPageImages 方法来生成每个页面，因此它不适用于任何其他平台。查看此博客文章中的生成 PDF 主题。

[flexgrid 和 datagrid 的打印预览解决方案](http://our.componentone.com/2012/09/26/a-print-preview-solution-for-flexgrid-and-datagrid/)

这是另一篇专门针对 WPF 中的 C1DataGrid 的博客文章。这个是逐行、逐个单元格生成输出的，因此如果您使用标准数据网格，则可以将其用作更好的示例。

[将 wpf 的 c1datagrid 保存为 Pdf](http://our.componentone.com/2012/03/26/saving-c1datagrid-for-wpf-as-pdf/)

# jquery - 如何从 JasperReports 获取交互式 html 输出？

> ID：14357361
> 
> 赞同：0
> 
> 时间：2013-01-16T11:29:13.187
> 
> 标签：jquery, jquery-plugins, jasper-reports, jasperserver

我正在使用*JasperReports*生成各种高端报告。但我的要求是基于 Web 的动态报告。输出是*html*格式，我希望它是交互式的而不是静态的。类似于*Jquery DataTables*的功能（如列隐藏、排序、过滤等）。

但是对于将*Jquery DataTables应用到生成的 html ，需要“thead”标签和“table-'id'”，默认情况下**JR* html 模板中没有这些标签。

我可以编辑*JR*生成*html*的 html 模板吗？如果是怎么办？

正如我听说的*JasperReports Server一样，* *JR Server*提供的*Jquery DataTables*有什么替代品吗？

# c++ - 为什么在使用可变参数函数时必须将 CString 强制转换为 LPCSTR？

> ID：14357362
> 
> 赞同：3
> 
> 时间：2013-01-16T11:29:18.040
> 
> 标签：c++, mfc

有谁知道为什么这个代码根据[这个网站](http://mfctips.com/2012/03/23/cstringformat-s-cstring-argument-garbage-text/#comment-298)是不正确的：

```
CString First( "John" );
CString Last( "Doe" );

CString Name;

Name.Format( "%s %s", First, Last ); // Name may be garbage text

Name.Format( "%s %s", (LPCSTR)First, (LPCSTR)Last ); // this is the correct way 
```

[CString::Format](http://msdn.microsoft.com/en-us/library/aa314327%28v=vs.60%29.aspx)的微软文档说：

> ...当您将字符串作为可选参数传递时，您必须将其显式转换为 LPCTSTR ...

我总是使用“错误”的方式（没有 LPCSTR 演员）而且我从来没有遇到过问题。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T11:39:46.117

因为在 Format 函数内部没有进行强制转换，就像在指定参数时没有进行强制转换一样`printf()`

如果您写`printf( "%d", a );`，则不会进行任何转换，`a`因为 printf 假设`%d`已经告诉了数据类型`a`是什么。

为了确保将`CString`其转换为`LPCSTR`ie `%s`，您需要转换参数，该参数将调用`CString`返回`LPCSTR`. 在 CString 的更高版本中，字符串被存储，因此当您在没有强制转换的情况下编写时，它仍然会打印为 LPCSTR，但要确保最好进行强制转换。

或者换一种说法：当可变参数函数通过参数时，它使用格式说明符来了解参数的大小，如果格式说明符与参数不匹配，则会得到垃圾。由于 CString 没有格式说明符，因此您需要将 CString 转换为 LPCSTR。

顺便说一句，您应该`static_cast<LPCSTR>(First), static_cast<LPCSTR>(Last)`在 C++ 中使用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T11:45:16.870

转换为 LPCSTR 会调用转换运算符`operator LPCSTR()`（应该是`operator const char *()`.

不调用 LPCSTR 意味着您正在传递整个 CString 对象，然后盲目地使用底层结构的前 32 位或 64 位作为 char 指针。

回顾一下：`LPCSTR(str)`是调用一个方法来确保正确的行为，`str`而是盲目的玩弄。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T12:10:37.693

我认为（抱歉，我现在没有可用的 MFC 来检查）只是出于效率原因才需要强制转换，以避免在参数类型未知时 MFC 必须执行的无用临时复制（CString 在修改时被懒惰地复制） .

诀窍是 CString 内存分配**之前** `this`为缓冲区（TCHAR *）以外的一些基本数据保留空间，例如引用计数器。

然后，当您按值将 CString 传递给可变参数函数时，它会“看到”缓冲区（指针）强制转换“提取”只是缓冲区，而不调用复制构造函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T01:28:44.407

因为如果您使用子类 CString 参数，它会中断。

# symfony - SonataUserBundle 覆盖表单编辑配置文件

> ID：14357363
> 
> 赞同：0
> 
> 时间：2013-01-16T11:29:21.177
> 
> 标签：symfony, fosuserbundle, symfony-sonata

如何覆盖 SonataUserBundle 表单编辑配置文件？

这里的代码

```
config.yml
# fos User
fos_user:
    db_driver: orm
    firewall_name: main
    user_class: Application\Sonata\UserBundle\Entity\User
    profile:
        form:
            type: sonata_user_profile
    group:
        group_class: Application\Sonata\UserBundle\Entity\Group

services:
   sonata_user_profile.profile.form.type:
      class: Application\Sonata\UserBundle\Form\Type\ProfileType
      tags:
        - { name: form.type, alias: sonata_user_profile }
      arguments: [%fos_user.model.user.class%] 
```

配置文件类型.php

```
<?php

namespace Application\Sonata\UserBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;

use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class ProfileType extends AbstractType
{

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('gender', null, array('required' => true))
            ->add('firstname', null, array('required' => true))
            ->add('lastname', null, array('required' => true))
            ->add('dateOfBirth', 'birthday', array('required' => true))
            ->add('label', null, array('required' => true))
        ;
    }

    public function getName()
    {
        return 'sonata_user_profile';
    }
} 
```

我不明白，表单没有被覆盖，服务似乎没有被加载。

如果我在 /src/Application/Sonata/UserBundle/Form/Type/ 的 ProfileType.php 中输入错误

它什么都没有改变，前面没有错误......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:59:50.827

解决！

我必须在我的包中添加路由，然后覆盖控制器并使用新服务

# xcode - xcode用动画滚动文本

> ID：14357367
> 
> 赞同：0
> 
> 时间：2013-01-16T11:29:32.080
> 
> 标签：xcode, animation, scroll, label

怎么做：当我滚动文本时屏幕是静态线，其中一些越过线，那部分会改变颜色

# .net - 如何在命令行中重定向可执行文件的进程？

> ID：14357372
> 
> 赞同：0
> 
> 时间：2013-01-16T11:30:00.767
> 
> 标签：.net, system.diagnostics

我有一个名为 outtext.exe 的可执行文件，它将一些输出写入控制台。我想将此输出直接写入命令行中的文件。我知道我可以捕获 Process 对象的输出，但现在我只想按原样使用我的命令。

我以为我可以：

```
 Dim psi As New ProcessStartInfo
    psi.FileName = "c:\sourcefiles\test\outtest.exe"
    psi.Arguments = "> c:\outfile.txt"
    psi.UseShellExecute = False
    Process.Start(psi) 
```

问题是没有创建“outfile.txt”。我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T11:41:27.753

文件重定向到 C:\outfile.txt 是该`cmd`过程的一个功能。您可以尝试执行以下操作：

```
psi.FileName = "c:\windows\system32\cmd.exe"
psi.Arguments = "/c c:\sourcefiles\test\outtest.exe > C:\outfile.txt" 
```

# ruby-on-rails - Rails 计算记录数的方法

> ID：14357378
> 
> 赞同：1
> 
> 时间：2013-01-16T11:30:17.250
> 
> 标签：ruby-on-rails, count

我有一个名为 Partners 的模型和一个名为 Profiles 的模型。

一个合作伙伴有多个配置文件，一个配置文件有一个合作伙伴。

我需要一种方法来计算合作伙伴控制器以返回他们拥有多少个人资料。

在profiles 表中，该列称为：partner_id，与partners 表中的id 列相同。

我已经看过 .count() 函数，但无法计算出返回正确数字所需的内容

干杯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T11:37:05.687

我认为最好的方法是使用`counter_cache`列：

```
class Partner < ActiveRecord::Base
  has_many :profiles, :dependent => :destroy
end

class Profile < ActiveRecord::Base
  belongs_to :partner, :counter_cache => true
end 
```

您应该将`profiles_count`列添加到`partners`表中。这不是一个好的调用方式，`@partner.profiles.count`因为它会对数据库执行额外的查询。你应该`@partner.profiles.size`改用。如果它已经从数据库中检索到，它将获取集合的大小并在另一种情况下执行查询。欲了解更多详情，请访问以下链接：

*   [计数与大小](https://stackoverflow.com/questions/6083219/activerecord-size-vs-count)
*   [railscast](http://railscasts.com/episodes/23-counter-cache-column)
*   [属于_to 参考](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to)
*   [使用计数器缓存优化 Rails 大小查询](http://web.archive.org/web/20131003134752/http://blog.assimov.net/blog/2011/12/21/optimize-rails-size-query-with-counter-cache)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:33:15.227

```
@partner = Partner.find params[:id] 
@partner.profiles.count 
```

应该做的伎俩

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T11:35:50.653

如果你有

```
has_many :profiles 
```

在您的控制器中实例化的合作伙伴类和@partner 上，您可以执行以下操作：

```
@partner.profiles.count 
```

# mysql - 如何从主查询中选择计数到子查询中

> ID：14357379
> 
> 赞同：-1
> 
> 时间：2013-01-16T11:30:20.723
> 
> 标签：mysql, subquery

我想将在主查询中选择的记录数放入子查询中

我当前尝试执行的查询是：

```
SELECT cat_id,category_name,seo_name,(SELECT count(category_name) FROM ccs_coupons WHERE (category_name LIKE category_name OR website_name LIKE category_name OR description LIKE LIKE category_name OR url_desc LIKE category_name )) FROM  `ccs_coupons` WHERE  category_name like 'a%' GROUP BY category_name ORDER BY category_name ASC LIMIT $page,$config 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:34:45.027

您可以只使用两个表之间的连接，而不是相关的子查询：

```
SELECT c.id,
  u.display_name, 
  c.comments_count 
FROM users u
LEFT JOIN
(
  SELECT COUNT(*) comments_count, author_id
  FROM cms_comments 
  GROUP BY author_id
) c
   ON c.author_id = u.id
WHERE c.comments_count > 150; 
```

编辑，根据您的更新，您应该仍然可以使用以下内容：

```
SELECT c1.cat_id,
  c1.category_name,
  c1.seo_name,
  c2.CountCategoryName
FROM  `ccs_coupons` c1
LEFT JOIN
(
  SELECT count(category_name) CountCategoryName, category_name,
       website_name, description, url_desc
   FROM ccs_coupons 
  GROUP BY category_name
) c2
  on c2.category_name LIKE c1.category_name 
  or c2.website_name LIKE c1.category_name 
  or c2.description LIKE c1.category_name 
  or c2.url_desc LIKE c1.category_name
WHERE  c1.category_name like 'a%' 
ORDER BY c1.category_name ASC 
LIMIT $page,$config; 
```

甚至使用：

```
SELECT c1.cat_id,
  c1.category_name,
  c1.seo_name,
  count(c2.category_name)
FROM  `ccs_coupons` c1
INNER JOIN ccs_coupons c2
  on c2.category_name LIKE c1.category_name 
  or c2.website_name LIKE c1.category_name 
  or c2.description LIKE c1.category_name 
  or c2.url_desc LIKE c1.category_name
WHERE  c1.category_name like 'a%' 
GROUP BY c1.category_name
ORDER BY c1.category_name ASC 
LIMIT $page,$config; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:36:29.773

您不能将该`HAVING`子句放在外部查询上，因为它不是聚合查询。试试这个：

```
SELECT users.id,
       users.display_name, 
       COUNT(*) AS comments_count 
  FROM users 
  INNER JOIN cms_comments 
  ON users.id = cms_comments.author_id
GROUP BY users.id, users.display_name
HAVING COUNT(*) > 150; 
```

# wordpress - WooCommerce - 我在哪里可以编辑由钩子生成的 HTML？

> ID：14357381
> 
> 赞同：32
> 
> 时间：2013-01-16T11:30:31.577
> 
> 标签：wordpress, e-commerce, wordpress-theming, woocommerce

我是 WooCommerce 的新手。无论如何，我想创建自己的主题，所以我遵循指南并将核心模板文件复制到***/mywordpresstheme/woocommerce/***。

这一切都很好，我正在编辑模板就好了。

然而，钩子和操作在 WooCommerce 中的工作方式让我感到困惑，我无法弄清楚生成的 HTML 的某些部分是从哪里来的。

例如，在 中`content-product.php`，有一个获取图像的钩子：

```
<?php
/*
* woocommerce_before_shop_loop_item_title hook
*
* @hooked woocommerce_show_product_loop_sale_flash - 10
* @hooked woocommerce_template_loop_product_thumbnail - 10
*/
do_action( 'woocommerce_before_shop_loop_item_title' );
?> 
```

但这是什么？它从何而来？？动作名称中是否有任何线索可以帮助我找到正在生成的 HTML 以进行编辑？

我已经在 WooCommerce 上阅读了有关“钩子和过滤器”的文章，但它没有解释在哪里或如何根据具体情况更改这些内容。

任何帮助将不胜感激。

我是这个系统的新手，我确信我只是忽略了一些非常明显的东西。

谢谢，米奇。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-01-20T01:32:56.240

> 但这是什么？它从何而来？？动作名称中是否有任何线索可以帮助我找到正在生成的 HTML 以进行编辑？

这是一个`action hook`. 它本身并没有做任何事情，而是注释中列出的功能`hook`，因此在触发此功能时运行。它在评论中说 function`woocommerce_template_loop_product_thumbnail`是负责获取缩略图的函数。您可以在 Woocommerce 插件中找到此功能。我使用 Sublime Text 编辑器（尽管我认为其他人也会这样做）在整个文件夹中搜索该短语，它会准确告诉我它所在的文件。在这种情况下，它被称为可插入函数，位于`woocommerce-template.php`. （现在在 2.1+ 版本中称为 wc-template-hooks.php）

可插入函数意味着您在主题的 functions.php 中定义具有相同名称的函数的新版本

```
function woocommerce_template_loop_product_thumbnail(){
  echo "apple";
} 
```

如果您将上述内容放在您的functions.php 中，那么`woocommerce_template_loop_product_thumbnail()`您只会看到Apple 一词，而不是Woo's。

> 我已经在 WooCommerce 上阅读了有关“钩子和过滤器”的文章，但它没有解释在哪里或如何根据具体情况更改这些内容。

您将在主题的 functions.php 中进行所有更改，并且无需逐案处理。所有的钩子和过滤器的行为都是一样的。也就是说，它们并不是最容易学习的东西，所以对自己要有耐心。我发现过滤器特别难缠住我的头。

在一次无偿的自我推销中，我写了一系列关于[WordPress 钩子和过滤器基础知识的](http://www.kathyisawesome.com/category/basics-2/)文章（一篇文章说它是针对主题钩子的，但钩子就是钩子！）我希望人们告诉我的所有事情我在我的 WordPress 职业生涯的开始。

# java - 如何将错误从 Java 中继回 Flex/BlazeDS

> ID：14357383
> 
> 赞同：1
> 
> 时间：2013-01-16T11:30:39.020
> 
> 标签：java, apache-flex, blazeds

我们有一个通过 BlazeDS 与 Java 后端通信的 Flex 应用程序。

以前，如果发生 SQL 错误，则 SQL 异常将在 Flex 应用程序中显示为警报，并调用 CallResponder 的故障处理程序，通知用户出现问题。

弹性代码：呼叫响应者：

```
<s:CallResponder id="loginResult" result="loginResult_resultHandler(event)" fault="displayGenericErrorMessage(event)"/> 
```

致电服务：

```
var authenticationMessage:String = loginResult.lastResult as String; 
```

旧 Java 代码：

```
Map resultSet = simpleJdbcCall.execute();
ArrayList list = (ArrayList) resultSet.get("RESULT_SET"); 
```

现在，从上面的代码可以看出，SQL 执行语句不在 try-catch 块内（编码错误）。这实际上不会造成太大的麻烦，但我们希望能够将异常打印到错误日志中，并且无论如何将执行语句放在 try-catch 块中是正确的。于是，代码变成了这样：

新的 Java 代码：

```
ArrayList list = new ArrayList();

        try {
            Map resultSet = simpleJdbcCall.execute();
            list = (ArrayList) resultSet.get("RESULT_SET");
        }
        catch (Exception e) {
            logger.error(e.getMessage());
        } 
```

之前（没有 try-catch 块），如果发生异常，异常的消息会被传递回 Flex，在 Flex 中显示为警报并调用 CallResponder 的故障处理程序。我们不一定希望将异常显示为警报，但调用故障处理程序很好，因为它会通知用户出现问题。

现在（使用 try-catch 块），如果发生异常，则会根据需要将异常输出到日志中，但不会调用 CallResponder 的故障处理程序。Flex 认为服务成功返回，但`null`值不正确。

除了删除 try-catch 块之外，还有其他方法可以向 Flex 指示调用不成功并且应该调用故障处理程序？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T11:41:28.877

只需在异常登录到服务器端后重新抛出异常，它就会像以前一样正确地传递给 Flex 前端。

# java - 我怎么可能调用/调用其他 java 类中的对象？

> ID：14357386
> 
> 赞同：0
> 
> 时间：2013-01-16T11:30:56.963
> 
> 标签：java, oop, object, invoke

我是 Java 中 OOP 方法的新手，我的系统有一些问题。我目前正在做一个简单的 GUI 系统。在 jForm 中，据说我必须将所有代码作为程序方法在那里编写。但我想尝试在单独的类（OOP）中编写代码。在主窗体中我所要做的就是调用我在另一个类上创建的方法。但我的主要问题是我将如何从一个表单调用或调用一个对象到另一个类。

这是一个例子......

```
public void checkUser(){
    try {
        sql = "SELECT accessLevel FROM user_accounts WHERE userName = 'admin'";
        stmt = conn.createStatement();
        rs = stmt.executeQuery(sql);
        rs.first();
        int accessLvl = rs.getInt(1);
        if (accessLvl != 1){
            btnAddUser.setEnabled(false);
            jPanel3.setEnabled(false);
        }
    }
    catch(Exception e){
        JOptionPane.showMessageDialog(null, "Exception on Verifying User");
    }
} 
```

我希望将此方法 ( `checkUser()`) 写在另一个类中，而不是放在主窗体中。但我的问题是我无法访问在主窗体中启动的对象`btnAddUser`（按钮名称）和（面板名称）。`JPanel13`如果我将直接使用我怎么可能访问这些对象，以便我将它们访问到其他类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:25:24.997

本[教程](http://magnus-k-karlsson.blogspot.com/2012/01/how-to-implement-mvc-model-view.html)可能会提供一些见解，并使您走上正确的道路。还有更多不同的解决方案和教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:50:44.277

> 但我的问题是我无法访问在主窗体中启动的对象 btnAddUser（按钮名称）和 JPanel13（面板名称）。

您需要将其声明为类中的类变量，分配适当的[getter 和 setter 方法](http://en.wikipedia.org/wiki/Mutator_method#Java_example)，然后实例化此类以检索值。

正如尼克所说，您需要在逻辑上分离代码，这将使整个设计模块化。在这里，您可以将数据库代码移动到一个单独的`DataAccess`类中并公开查询方法。连接对象可以在构造函数中创建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T11:52:24.517

您可以将此方法作为静态方法写入另一个类，如下所示，它接受两个参数，一个是 JButton，另一个是 JPanel

```
 public static void checkUser(JButton btnAddUser,JPanel jPanel3){
   try {
      sql = "SELECT accessLevel FROM user_accounts WHERE userName = 'admin'";
      stmt = conn.createStatement();
      rs = stmt.executeQuery(sql);
      rs.first();
      int accessLvl = rs.getInt(1);
      if (accessLvl != 1){
          btnAddUser.setEnabled(false);
          jPanel3.setEnabled(false);
      }
  }
  catch(Exception e){
    JOptionPane.showMessageDialog(null, "Exception on Verifying User");
  } 
```

}

并且您可以从之前编写代码的位置调用此方法，例如

```
 NewClass.checkUser(btnAddUser,jPanel3); 
```

NewClass 是您在其中编写此 checkUser() 方法的类。

您还需要将参数传递给诸如 sql 字符串、Statement 和 ResultSet 对象之类的方法，或者将它们声明为静态，以便您可以在任何地方使用类名轻松访问它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T11:38:33.570

你的`checkUser`方法应该：

*   接受一个参数，该参数是要检查的用户名（执行此操作时`java.sql.Statement`用 a替换`java.sql.PreparedStatement`）。
*   返回调用代码（您的表单）用于根据需要启用或禁用组件的布尔值。
*   抛出调用代码（您的表单）可以捕获并显示消息对话框的异常。

除其他外，OOP 是关于关注点的分离——您的表单处理 UI，带有`checkUser`方法的类处理用户身份验证。

顺便说一句，`checkUser`如果身份验证失败，通常会引发异常的函数。这是因为使用该方法的人很容易无法检查返回值并允许未经身份验证的用户进入系统。

# jquery - hide() 在我的网站上不起作用，而在 jfiddle 上运行良好

> ID：14357387
> 
> 赞同：1
> 
> 时间：2013-01-16T11:30:57.523
> 
> 标签：jquery, jquery-animate, hide

我有个问题。我复制了与页面上完全相同的代码，并且在[此处](http://jsfiddle.net/tucado/7Gv47/3/)的 jsfiddle 上运行良好。当我将它粘贴到 html/css/js 时，此代码不起作用。发生这种情况有什么原因吗？代码有什么问题？我敢肯定这很简单，但我就是想不通。非常感谢您提前提供的帮助。顺便说一句：如果您需要，这是一个[源代码。](http://leedscity.captive-portal.com/generic/11111menu.html)需要等待 4 秒钟，因为它会滑下来。X 按钮应该隐藏整个 div，但事实并非如此。这就是问题所在。

代码在这里：

```
 <div id="wrapper">
        <div id="cookies">
            <p>Leed City Wifi uses cookies. By continuing to browse the site you are agreeing to use our cookies: </p>
            <a href="terms-cookies.html">Find out more</a>
            <a href="#" id="close" > <img src="http://content.captive-portal.com/cookies/_images/close.png"/></a>
        </div>        
</div> 
```

和这里的jQuery：

```
$(document).ready(function(){
$('#wrapper').hide();
function delay() {
    $('#wrapper').slideDown(500);
}
setTimeout(delay, 500);
});

$(document).ready(function(){
$('#cookies').hide();
function delay() {
    $('#cookies').slideDown(200);
}
setTimeout(delay, 4000);
});

$("#close").click(function() {
 $("#cookies").slideUp(function() {
     window.location.href = "#";
     });
 }); 
```

jsfiddle[在这里](http://jsfiddle.net/tucado/7Gv47/3/)。提前感谢您的时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T11:35:57.197

将您的 delay.js 文件更改为此...

```
$(document).ready(function(){
    $('#wrapper').hide();
    $('#cookies').hide();

    setTimeout(function() {
        $('#wrapper').slideDown(500);
    }, 500);

    setTimeout(function() {
        $('#cookies').slideDown(200);
    }, 4000);

    $("#close").click(function() {
        $("#cookies").slideUp(function() {
            window.location.href = "#";
        });
    });
}); 
```

我把它放在一个`document.ready`块中，而不是多个块中，将函数直接放入超时调用中，并使用关闭单击处理程序修复了语法错误（您缺少一些右括号）。

此外，需要在 期间分配关闭单击处理程序`document.ready`，而以前不是这样。这就是它在 jsFiddle 上工作的原因，因为它默认使用 onLoad。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:40:55.460

尝试这个：

```
$(document).ready( function(){
    $('#wrapper').hide();

    function delay1() {
        $('#wrapper').slideDown(500);
    }

    setTimeout(delay1, 500);

    $('#cookies').hide();

    function delay2() {
        $('#cookies').slideDown(200);
    }

    setTimeout(delay2, 4000);

    $("#close").click(function() {
        $("#cookies").slideUp(function() {
            window.location.href = "#";
        });
    });
}); 
```

# sql - 基于自定义列和不同数据类型的 OVER 订单案例

> ID：14357388
> 
> 赞同：1
> 
> 时间：2013-01-16T11:30:58.350
> 
> 标签：sql, stored-procedures

我有一个 SQL 语句，用于对结果进行分页`ROW_NUMBER()`

```
SELECT * FROM (
    SELECT
        ROW_NUMBER() OVER ( ORDER BY [tbl1].[Col1] ASC ) As RowNumber,
        [tbl1].[Col1],
        [tbl1].[Col2],
        [tbl1].[Col3],
        ( SELECT [tbl2].[Col1] 
          FROM [tbl2] 
          WHERE [tbl2].[id] = [tbl1].[id] 
                AND [tbl2].[subid] = 2 ) As theColumnName
    FROM
        [tbl1]
) As tbl
WHERE RowNumber BETWEEN 1 AND 10 
```

这一切都工作正常，正如预期的那样。但是，我现在想介绍一些`ORDER BY`基于传递到存储过程中的值的附加功能。

所以我已将我的`ROW_NUMBER() OVER (ORDER BY...`声明更新为

```
ROW_NUMBER() OVER (ORDER BY 
    CASE WHEN @sortBy = 'type1' THEN [tbl1].[Col1]
         WHEN @sortBy = 'type2' THEN [tbl1].[Col2]
    END,
    CASE WHEN @sortBy = 'type3' THEN [tbl1].[Col3]
    END
ASC) As RowNumber 
```

正如您在此处看到的，我`CASE`在方法中有一个语句`OVER ()`，并且有两个`CASE`'s，因为`[Col3]`它的数据类型与其他列不同。

现在这工作正常，但我不知道如何按我的列排序，`theColumnName`因为我刚刚收到错误消息`Invalid column name 'theColumnName'`。

```
WHEN @sortBy = 'type4' THEN theColumnName 
```

我什至尝试过使用列号，例如`WHEN @sortBy = 'type4' THEN 5`，但这也不起作用。

**有没有办法按这个自定义列名排序？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T11:39:09.187

您需要将子查询移动到`from`子句中，例如：

```
SELECT
    ROW_NUMBER() OVER ( ORDER BY [tbl1].[Col1] ASC ) As RowNumber,
    [tbl1].[Col1],
    [tbl1].[Col2],
    [tbl1].[Col3],
    t2.col1 As theColumnName
FROM [tbl1] t join
     (select id, col1
      from tbl2
      where subid = 2
    ) t2
    on t.id = t2.id 
```

现在，您将能够包含`t2.col1`在该`row_number() order by`子句中。

# performance - 如何在 Heroku 上重置 pg_stat_user_tables？（pg_stat_reset() 需要超级用户）

> ID：14357398
> 
> 赞同：7
> 
> 时间：2013-01-16T11:31:22.797
> 
> 标签：performance, postgresql, heroku, indexing

我正在使用 Heroku Postgres，想看看在我的数据库中添加一些额外的索引会有什么效果。

我正在查询`pg_stat_user_tables`以查看使用索引的查询比例，但我相信这是自创建数据库以来使用的统计信息。

我知道运行`SELECT pg_stat_reset();`会重置这些统计信息，但是当我尝试在 pg:psql 控制台中运行它时，我得到了错误：

```
ERROR:  must be superuser to reset statistics counters 
```

有没有另一种方法可以使用 Heroku Postgres 生产数据库来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-11T13:45:32.690

我今天通过支持请求发现现在已添加：

`heroku plugins:install git://github.com/heroku/heroku-pg-extras.git`

`heroku pg:stats_reset`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T05:59:01.013

重现执行这些查询的场景或测试对您来说有多容易？你能做到以下几点吗？

1.  在 heroku 上创建一个新的测试应用和测试数据库
2.  使用旧索引部署旧版本的应用程序（如果复制整个数据库不可行，则使用具有代表性的数据子集）
3.  运行您的查询或测试，或运行您的应用程序
4.  注意数据库统计信息
5.  删除测试数据库并创建一个新数据库
6.  用您的数据填充新的测试数据库，并添加新的索引
7.  将测试应用程序指向新数据库
8.  再次运行查询或测试
9.  注意新的数据库静态

希望您能够轻松创建一组具有代表性的数据，让您更轻松地测试查询。

# clojure - n 元谓词 Datomic (n != 2) 可能吗？

> ID：14357413
> 
> 赞同：3
> 
> 时间：2013-01-16T11:31:58.163
> 
> 标签：clojure, datomic, datalog

我尝试将我读到的关于 Datalog 的内容与 Datomic 的描述相匹配。我在 Datomic 中看到的所有谓词都是三元组，即 [实体属性值] 或属性（e，v），语法更简洁。另一方面，Datalog 支持 n 元谓词，如 pred(a,b,c,d)。

我该如何匹配这个？

1.  我是否错过了 Datomic 的一个特性，即它是否有 n 元谓词，或者我可以以某种方式对它们进行建模？
2.  Datomics Datalog 是通常称为 Datalog 的受限版本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:32:12.867

传统 Datalog 中的 n 元谓词实际上类似于关系数据库中的表。因此，例如以下行将在传统 Datalog 系统中添加有关人员的信息：

```
assert Person("John", "Smith", "1985-01-01") 
```

请注意，唯一告诉您第三个值是出生日期的是它在谓词中的位置。

Datomic 不使用像这样的自由形式的谓词来存储数据。它在查询端严格使用 Datalog。要在 Datomic 中代表我们上面的人，您需要创建三个属性。您可以调用属性：`:person/first-name`, `:person/last-name`, `:person/dob`（请注意，这`:person/`只是名称的一部分，它实际上并没有创建任何类型的结构或类似表格的东西）。

每个属性都需要使用该`transact`功能安装后才能使用。这是您需要发送以进行交易的示例`:person/last-name`

```
[{:db/id #db/id[:db.part/db]
  :db/ident :person/last-name
  :db/valueType :db.type/string
  :db/cardinality :db.cardinality/one
  :db/fulltext true
  :db/doc "A person's last name"
  :db.install/_attribute :db.part/db}] 
```

您可以在 Datomic 的文档中找到更多详细信息：http: [//docs.datomic.com/schema.html](http://docs.datomic.com/schema.html)

获得属性后，您可以通过以下方式添加我们开始使用的相同信息：

```
[{:db/id #db/id[:db.part/user]
:person/first-name "John"
:person/last-name "Smith"
:person/dob "1985-01-01"}] 
```

所以简短的回答是：没有 Datomic 不会在输入端执行 n 元谓词，但是在 Datomic 中无法表示的 n 元谓词中没有任何东西可以表示。好处是现在你有了一个命名属性，而不是仅仅根据它在谓词中的位置来定义的东西（这在现实世界的系统中非常脆弱：考虑如何为类似的东西更改模式） .

# c# - ASP.NET MVC 4 jQuery 验证脚本包不工作

> ID：14357416
> 
> 赞同：29
> 
> 时间：2013-01-16T11:32:11.390
> 
> 标签：c#, .net, asp.net-mvc-4, razor-2

我最近升级了一个网站以使用 ASP.NET MVC 4，并使用以下代码来呈现我的 jQuery 验证包。

但我收到以下错误：

```
Microsoft JScript runtime error: Object doesn't support property or method 'live' 
```

单击文本框时出现此错误：

```
Unhandled exception at line 1234, column 5 in http://localhost:13112/Scripts/jquery.validate.js

0x800a138f - Microsoft JScript runtime error: Unable to get value of the property 'call': object is null or undefined 
```

我的捆绑代码：

```
 bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
                    "~/Scripts/jquery.unobtrusive*",
                    "~/Scripts/jquery.validate*")); 
```

我的 _Layout.cshtml 代码：

```
 @Styles.Render("~/Content/css")
    @Styles.Render("~/Content/themes/base/css")
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/bundles/jqueryui")
    @Scripts.Render("~/bundles/modernizr") 
```

这是我渲染的 HTML：

```
<link href="/Content/site.css" rel="stylesheet"/>

        <link href="/Content/themes/base/jquery.ui.core.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.resizable.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.selectable.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.accordion.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.autocomplete.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.button.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.dialog.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.slider.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.tabs.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.datepicker.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.progressbar.css" rel="stylesheet"/>
<link href="/Content/themes/base/jquery.ui.theme.css" rel="stylesheet"/>

        <script src="/Scripts/jquery-1.9.0.js"></script>

        <script src="/Scripts/jquery.unobtrusive-ajax.js"></script>
<script src="/Scripts/jquery.validate.js"></script>
<script src="/Scripts/jquery.validate.unobtrusive.js"></script>

        <script src="/Scripts/jquery-ui-1.9.2.js"></script>

        <script src="/Scripts/modernizr-2.6.2.js"></script> 
```

有人可以指出为什么会发生此错误吗？

谢谢，亚历克斯。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-16T11:43:18.223

.live 方法已在 jQuery v1.7+ 中弃用，并在 jQuery v1.9+ 中删除。

[错误报告： http](http://bugs.jquery.com/ticket/13213) : //bugs.jquery.com/ticket/13213
说明：http: [//jquery.com/upgrade-guide/1.9/#live-removed](http://jquery.com/upgrade-guide/1.9/#live-removed)

> .live() 已移除
> 
> .live() 方法自 jQuery 1.7 起已被弃用，并已在 1.9 中删除。我们建议升级代码以改用 .on() 方法。例如，要精确匹配 $("a.foo").live("click", fn)，可以编写 $(document).on("click", "a.foo", fn)。有关详细信息，请参阅 .on() 文档。同时，jQuery Migrate 插件可用于恢复 .live() 功能。

如何修复：下载[jquery migrate 插件](https://github.com/jquery/jquery-migrate/)并将其添加到您的捆绑包中：

```
 bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
              "~/Scripts/jquery-{version}.js",
              "~/Scripts/jquery-migrate-{version}.js")); 
```

更新：迁移插件现在也可以从 Nuget 获得：

> PM> 安装包 jQuery.Migrate

# java - java - 触发按钮操作时，如何在循环中一一显示Java JTextarea中的控制台输出

> ID：14357418
> 
> 赞同：0
> 
> 时间：2013-01-16T11:32:15.757
> 
> 标签：java, user-interface

我遇到了如何在 Jtextarea 中显示控制台输出的问题。我已成功将系统控制台输出重定向到 JTextarea。但问题是，在真实的系统控制台中，输出会一一显示（我设置了一个 Thread.sleep() 函数，所以结果会显示，比如说，每半秒）。但是在 JTextarea 中，输出只会在循环结束时显示一次，它不会像真正的系统控制台那样一一显示。

循环由 GUI 按钮触发。请参阅下面的示例代码。这只是代码的一部分。

```
// Create a button.
but.setVerticalTextPosition(AbstractButton.CENTER);
but.setHorizontalTextPosition(AbstractButton.LEADING);
but.setActionCommand("publish");
but.addActionListener(this);

// Button action
public void actionPerformed(ActionEvent e) {
final JButton source = (JButton)e.getSource();
        if(source.equals(but)){
            for( int i = 0 ; i < 5 ; i++ ) {

                System.out.println( i );

                        // regular textarea output
                //JTextarea.append(Integer.toString(i));
                try {
                    Thread.sleep( 500 );
                } catch (InterruptedException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
            }

        }
} 
```

如您所见，我在循环中使用 System.out.println(i)，因为我已将系统控制台输出重定向到 JTextarea，因此输出在 JTextarea 中。

问题是，就像我上面提到的，在真正的控制台中，输出每 500 毫秒一一显示。但是在重定向的 Jtextarea 中，当所有循环完成时，结果会显示一次。我不知道为什么会这样。我希望输出在重定向的 JTextarea 中也一一显示。

谁能帮帮我吗。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:07:12.553

要使`Swing`GUI 在某些事件或某些连续背景更改时动态更新，您可以`SwingWorker`使用`Swing`. 试试这个代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
public class DynamicWrite implements ActionListener
{
    JFrame frame = new JFrame("TextArea");
    JTextArea tArea = new JTextArea(10,20);
    JButton button = new JButton("Click");
    JScrollPane pane = new JScrollPane(tArea);
    SwingWorker worker;
    String s= "Java is an Object Oriented Programming langauge...Java is static typed language...asbfldfjsdj";//some random String
    public void prepareAndShowGUI()
    {
        Container container = frame.getContentPane();
        container.add(pane);container.add(button,BorderLayout.NORTH);
        tArea.setLineWrap(true);
        tArea.setWrapStyleWord(true) ;
        button.addActionListener(this);
        frame.pack();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
    public void actionPerformed(ActionEvent evt)
    {
        if(evt.getSource()==button)
        {
            tArea.setText("");
            if (worker!=null)
            {
                worker.cancel(true);
            }
            worker = new SwingWorker()
            {
                @Override
                protected Integer doInBackground()//Perform the required GUI update here.
                {
                    try
                    {
                        for(int i = 0;i<s.length();i++)
                        {
                            tArea.append(String.valueOf(s.charAt(i)));
                            Thread.sleep(5);
                        }
                    }catch(Exception ex){}
                    return 0;
                }       
            };
            worker.execute();//Schedules this SwingWorker for execution on a worker thread.
        }
    }   
    public static void main(String st[])
    {
        DynamicWrite dyna = new DynamicWrite();
        dyna.prepareAndShowGUI();
    }
} 
```

我希望这能解决你的问题。
要了解有关 SwingWorker API 的更多信息，请[在此处观看](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:42:23.490

不要`Thread.sleep`在`EDT`. 这会导致 UI “冻结”并延迟预期的视觉更新。Swing 具有诸如[SwingWorker之类的](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)[并发机制](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)，允许与 Swing 应用程序并行完成非可视化处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-22T03:04:55.480

请使用这样的东西。

```
String s = ("Your String...");
textArea.append(s); 
```

# html - CSS中的可见性和显示有什么区别？

> ID：14357421
> 
> 赞同：3
> 
> 时间：2013-01-16T11:32:23.387
> 
> 标签：html, css

我对 CSS 中使用的这两个术语感到困惑。CSS中的可见性和显示有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T11:36:37.423

通俗地说，`visibility`确定元素是否在屏幕上呈现但不影响布局的执行方式（即浏览器如何计算每个元素在屏幕上的位置以及占用的空间大小）。

另一方面，`display`专门控制元素在页面上的布局方式；这会影响其“作为副作用”的可见状态，因为`display: none`意味着“根本不在布局中包含此元素”。

[`visibility`](https://developer.mozilla.org/en-US/docs/CSS/visibility)要获得更面向技术的解释，您应该在 MDN ( , )上查找这些属性的文档[`display`](https://developer.mozilla.org/en-US/docs/CSS/display)或阅读 W3C 规范（[此处](http://www.w3.org/TR/CSS21/visufx.html#visibility)和[此处](http://www.w3.org/TR/CSS2/visuren.html#display-prop)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:37:44.650

通常，`visibility`属性决定是**显示**、**隐藏**（使您的元素透明）还是**折叠**（从视图中删除您的元素）。

`display`属性，不像它的名字，决定了浏览器**如何**排列这些元素：像一个*inline*，一个*block*，一个*table*，...

您可以在任何在线参考资源中搜索更多详细信息。

# asp.net - ASP。NET Page 应用程序长时间空闲时无法显示错误

> ID：14357423
> 
> 赞同：1
> 
> 时间：2013-01-16T11:32:33.697
> 
> 标签：asp.net, iis-7

我开发了一个 ASP.net 应用程序。我已经访问它并在我的网络浏览器中闲置了很长时间。很长一段时间后，当我尝试访问应用程序时，它会将我重定向到“无法显示页面”错误页面，而不是重定向到登录页面。

这种行为是间歇性的。在大多数情况下，它都按预期工作（重定向到登录页面）。

默认超时设置为 20 分钟。表单身份验证超时设置为 20 分钟。

我正在使用 .net 4.0 版

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-16T13:06:40.560

我建议安装 ELMAH (http://code.google.com/p/elmah/) 之类的东西来捕获这些异常并查看是什么原因造成的。

也许您在会话到期时重定向到的页面依赖于会话中不再可用的东西或其他东西？如果您安装 ELMAH，这应该会为您指明正确的方向。

# ruby-on-rails - 使用帮助程序在 rails 3 应用程序中打印根 url

> ID：14357424
> 
> 赞同：1
> 
> 时间：2013-01-16T11:32:36.943
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

好的，我有一个非常简单的问题，我无法解决。我有一个链接，我通过 rails 3 应用程序中的以下 ruby​​ 代码向我的用户显示：-

```
<%= link_to linkbunch_url(@link.link), linkbunch_url(@link.link) %> 
```

这是打印这样的网址：-

```
http://localhost:3000/linkbunches/7yae8t 
```

现在我不希望这个“linkbunches”成为我的网址的一部分。所以我更改了我的 routes.rb 文件并定义了如下路径：-

```
match "/:id" => "linkbunches#show" 
```

因此，当我将 url 从更改为时`http://localhost:3000/linkbunches/7yae8t`，`http://localhost:3000/7yae8t`它会将我带到同一页面。完全没有问题。但我不明白如何实际更改 ruby​​ 代码，使其不打印控制器名称。我试过了，`root_url(@link.link)`但它没有用......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T11:43:00.197

`:as`您可以使用该选项显式命名路由。

```
match "/:id" => "linkbunches#show", as: :linkbunch 
```

注意你的原始路线是如何无名的

```
➜  ~ ✗ rake routes | grep bunch
                /:id(.:format)    linkbunches#show 
```

一旦你像我上面展示的那样命名它

```
➜  ~ ✗ rake routes | grep bunch
   linkbunch    /:id(.:format)    linkbunches#show 
```

这将允许您继续`linkbunch_url(@link.link)`在您的视图中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:49:01.217

@Deefour 是对的。然而，我建议的一件事是始终限制您认为合适的 HTTP 方法。因此，请`match`使用`get`：

```
get "/:id" => "linkbunches#show", as: :linkbunch 
```

您可以使用`match`with （在未来的 Rails 版本中`via: :get`使用时需要这样做），但更喜欢其他显式形式。`match`

# asp.net - 在运行时添加命令按钮事件

> ID：14357429
> 
> 赞同：0
> 
> 时间：2013-01-16T11:32:49.033
> 
> 标签：asp.net, devexpress, aspxgridview

我在运行时创建了一个gridview，但我没有创建命令按钮事件。我的问题与[devexpress 行删除事件](https://stackoverflow.com/questions/13744496/devexpress-row-deleting-event)非常相似，但我没有解决它：/ 这是我的代码：

在我的 Page_Load 函数中：

```
ASPxGridView grid = new ASPxGridView();
            grid.ID = "ASPxGridView1";

            Page.Form.Controls.Add(grid);

            GridViewCommandColumn cIslem = new GridViewCommandColumn("İşlem");
            cIslem.EditButton.Visible = true;
            cIslem.DeleteButton.Visible = true;
            cIslem.NewButton.Visible = true;
            grid.Columns.Add(cIslem);

            GridViewDataTextColumn cID = new GridViewDataTextColumn();
            cID.Name = "ID";
            cID.Caption = "ID";
            cID.FieldName = "ID";
            cID.ReadOnly = true;
            cID.Visible = false;
            grid.Columns.Add(cID);

            GridViewDataTextColumn cName = new GridViewDataTextColumn();
            cName.Name = "Name";
            cName.Caption = "Name";
            cName.FieldName = "Name";
            cName.ReadOnly = true;
            cName.CellStyle.HorizontalAlign = HorizontalAlign.Center;
            grid.Columns.Add(cName);

            grid.SettingsBehavior.AllowFocusedRow = true;
            grid.KeyFieldName = "ID";          

            DataTable dt = new DataTable("Veri");
            dt.Columns.Add("ID");
            dt.Columns.Add("Name");
            DataRow dr = dt.NewRow();
            dr["Name"] = "ABC";
            dr["ID"] = "1";
            dt.Rows.Add(dr);
            grid.DataSource = dt;
            grid.DataBind();
            grid.RowDeleting += new DevExpress.Web.Data.ASPxDataDeletingEventHandler(grd_RowDeleting); 
```

当我单击删除按钮时，我给出了错误：

“找不到回调的目标 'ASPxGridView1' 或未实现 ICallbackEventHandler”

![错误图片](../Images/d91914d462ace1ad9392ae122da96203.png)

我该如何解决？

# java - 如何在android中将指数值格式化为双倍？

> ID：14357435
> 
> 赞同：1
> 
> 时间：2013-01-16T11:33:00.907
> 
> 标签：java, android

在我的应用程序中，我正在从本地数据库中获取值。我已经将该值四舍五入并显示“1756637.36”，这是正确的。但是当我在活动中获取它时，它显示“1.75664e+06”，这是正确的，但具有指数特征我想显示双重价值。

我也使用了十进制格式，但它不起作用，如下所示....

```
DecimalFormat myFormatter3 = new DecimalFormat("#.##");
availableQtyArrayList.add(myFormatter3.format(Double.parseDouble(farmerCursor.getString(farmerCursor.getColumnIndex("AvailableQty"))))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:04:10.373

试试这个例子。

```
public class Formatter {
  public static void main(String[] args) {
     Double d = 1756637.36234;
     DecimalFormat formatter = new DecimalFormat("#############.##"); 
     System.out.println(formatter.format(d));
  }  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:35:45.553

使用模式`#######.##`而不是`#.##`.

```
DecimalFormat myFormatter3 = new DecimalFormat("#######.##"); 
```

# sql-server - TADStoredProc 返回记录集或输出参数的值（不是两者）

> ID：14357437
> 
> 赞同：4
> 
> 时间：2013-01-16T11:33:09.483
> 
> 标签：sql-server, sql-server-2008, delphi, delphi-7

我的存储过程采用一个输出参数并返回记录集。

```
CREATE PROCEDURE MyProc
    @EntityCode BIGINT, @ResValue INT OUTPUT
AS
BEGIN
  SELECT .... WHERE Code=@EntityCode
  SET @ResValue = ...
END 
```

我需要同时接收输出参数和记录集的值。所以我这样做：

```
function GetData(const EntityCode: Int64): Integer;
var
  Proc: TADOStoredProc;
  PEntityCode: ADODB.TParameter;
  PResValue: ADODB.TParameter;
begin
  Proc := TADOStoredProc.Create(nil);
  try
    Proc.Connection := ADOConnection1;
    Proc.CursorLocation := clUseServer;
    Proc.ProcedureName := 'MyProc';

    PEntityCode := Proc.Parameters.AddParameter;
    PEntityCode.Name := '@EntityCode';
    PEntityCode.DataType := ftLargeint;
    PEntityCode.Value := EntityCode;

    PResValue := Proc.Parameters.AddParameter;
    PResValue.Name := '@ResValue';
    PResValue.DataType := ftInteger;
    PResValue.Direction := pdOutput;

    //Proc.Prepared := True;
    Proc.Open;
    Result := PResValue.Value;
    while not Proc.Eof do
    begin
      Proc.Next;
    end;
  finally
    Proc.Free;
  end;
end; 
```

Recordset 不为空，但 PResValue.Value 为 0。如果我调用 Proc.ExecProc，则记录集为空，但 PResValue.Value 已分配。是否可以同时接收记录集和输出参数的值？

我发现如果 MyProc 的记录集仅包含一条记录，则分配 OUTPUT 参数的值。这是什么意思？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T15:32:33.047

解决方案是在访问输出变量之前关闭记录集：

```
Proc.Open;
while not Proc.Eof do
begin
  Proc.Next;
end;
Proc.Close;
Result := PResValue.Value; 
```

# matlab - 从 matlab 的目录中读取某些 txt 文件

> ID：14357440
> 
> 赞同：2
> 
> 时间：2013-01-16T11:33:28.397
> 
> 标签：matlab

我在一个目录中有 200 个 txt 文件，我想知道如何读取和绘制其中的一些文件。可以说文件名就像

**1_Mark_slow**、**2_Mark_fast**、**3_Mark_slow**、**4_Mark_fast**等。

我想阅读所有“慢”文件。

非常感谢提前

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T11:53:36.993

您可以使用 获取某个目录的内容列表[`dir`](http://www.mathworks.com/help/matlab/ref/dir.html)，并使用星号过滤它们。例如：

```
myPath='/home/digna/myfiles/';
files=dir( fullfile( myPath, '*slow') ); 
```

这将返回一个结构数组，其中包含有关文件名包含单词“slow”的所有文件的信息。该结构的字段如下：

```
name
date
bytes
isdir
datenum 
```

因此，您可以通过访问该`name`字段来阅读它们：

```
for i=1:length(files)
  file=files(i).name;
  filepath = fullfile( myPath, file );
  %open and read file using filepath
end 
```

[`fullfile`](http://www.mathworks.com/help/matlab/ref/fullfile.html)有关文件名的跨平台连接，请参阅 Matlab 的命令。

# android - 如果活动在后台运行，android udp 套接字将停止发送/接收

> ID：14357442
> 
> 赞同：0
> 
> 时间：2013-01-16T11:33:36.583
> 
> 标签：android, udp, background-process

我有两个单独的线程用于发送和接收 udp 数据包（音频流），只要我在同一个屏幕上，一切都会完美运行。但是我的屏幕上有一个按钮可以打开另一个屏幕。当我进入那个屏幕时，我开始从两部手机的扬声器中接收垃圾。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:37:49.693

您可能想尝试使用[服务](http://developer.android.com/guide/components/services.html "Android 开发者指南：服务")并在其中使用您的套接字。

# facebook-graph-api - Facebook Graph API 以某种语言搜索帖子

> ID：14357443
> 
> 赞同：3
> 
> 时间：2013-01-16T11:33:37.423
> 
> 标签：facebook-graph-api, search, posts

我想获得以西班牙语过滤的此查询的结果。可能吗？

[https://graph.facebook.com/search?q=Gasol&type=post](https://graph.facebook.com/search?q=Gasol&type=post)

过去几周一定有一些变化，因为在 12 月我默认获得了西班牙语的结果。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:17:07.437

据我所知，最近有很多细节发生了变化。11 月，我发现结果基于 HTTP Accept-Language 标头、用户的语言设置（使用访问令牌时）和请求机器的本地化。

还有用于指定语言的语言环境参数。它现在已经有一段时间没有工作了，但是有一个错误报告，看起来，他们将修复[http://developers.facebook.com/bugs/331184190290797](http://developers.facebook.com/bugs/331184190290797)。

更新：坏消息：http: [//developers.facebook.com/bugs/294623187324442](http://developers.facebook.com/bugs/294623187324442)。语言环境不是按设计工作的。

更新 2：Facebook 改变了主意。错误已修复，语言环境参数和 Accept-Language 标头再次起作用。

# php - 图像加载时间延迟

> ID：14357445
> 
> 赞同：0
> 
> 时间：2013-01-16T11:33:46.427
> 
> 标签：php, image, delay

该脚本有效，它加载到我的图像中。

我希望它在 10 秒后加载新图像，当我尝试这个时，它对我做错了什么没有任何建议？

```
 <?php header("Refresh: 5; URL=mytestfile.php"); ?>
<div style="width: 964px;">
<div style="float: left; width: 240px;">
<?php $mybanners[1] = '<a href="/chiropractor/"><img src="banners/chiropractor.jpg"></a>';
$mybanners[2] = '<a href="/chiropodist/"><img src="banners/chiropody.jpg"></a>';
$mybanners[3] = '<a href="/fitness-instructor/"><img src="banners/fitness ball.jpg"></a>';
$mybanners[4] = '<a href="/dietician/"><img src="banners/Dietician.jpg"></a>';
$mybanners[5] = '<a href="/alexander-technique/"><img src="banners/Alexander technique.jpg"></a>';

$id = rand(1,5);

echo $mybanners[$id]; 

// this is the section I tried to control the delay

$mybanners = 0;
for($i=0; $i<10000; $i++){
if($i=='10000'){
    $mybanners++;
    $i = 0;
    }
    if($mybanners=='10'){
    $mybanners=0;
 }

}?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:11:00.330

您无法通过 PHP 控制它，这是一个 Javascript 用例。`for`不是与时间相关的控件：http : [//php.net/manual/en/control-structures.for.php](http://php.net/manual/en/control-structures.for.php)

你应该有一个 Javascript 中的图像列表：

```
var myImages = [
  '<a href="/chiropractor/"><img src="banners/chiropractor.jpg"></a>',
  '<a href="/chiropractor/"><img src="banners/chiropractor.jpg"></a>',
  '<a href="/chiropractor/"><img src="banners/chiropractor.jpg"></a>',
  '<a href="/chiropractor/"><img src="banners/chiropractor.jpg"></a>',
]; 
```

（当然你可以用 PHP 生成这个列表）

然后，每 10 秒，对它做一些事情：

```
var i = 0;
window.setInterval(function() {
  alert(myImages[i]);
  i++;
, 10000} 
```

PHP如果用于生成页面，则在将页面提供给客户端后它无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:28:50.247

如果您尝试使用 Refresh 标头循环，则不需要循环。
此外，数到 10000 不需要 10 秒。而且您正在使用以前的 urls 数组作为索引...简而言之，再次构建它。

如果要在浏览器中旋转它们，请使 urls 列表对 javascript 可用。

编辑：添加示例

1) 使 url 可用于 javascript：

在 php 中，您输出 javascript：

```
echo "<script>";
echo "var urlList = new Array();";
foreach ($urls as $url)
  echo "urlList[urlList.length]='$url';"; 
```

2) 旋转它们这是每 5 秒运行一次函数的基本结构：

```
setTimeout(function() {}, 5000); 
```

您需要找出一种方法来进行旋转：要么为数组的索引保留一个计数器，要么尝试随机：

```
setTimeout(function() {
  var index = Math.round(Math.rand * urlList.length);
  document.getElementById('#myimg').src.href=urlList[index];
}, 5000); 
```

注意：我在这里编写这段代码，它没有经过测试，但它应该足以让你继续前进。一旦你开始了，考虑使用一些 jQuery.fade 过渡。

# sql-server - bcp.exe 不复制行但没有错误

> ID：14357446
> 
> 赞同：1
> 
> 时间：2013-01-16T11:33:47.283
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, sqlbulkcopy, bcp

我是 bcp 的新手，我想弄清楚。我在 sql server 中有表

```
CREATE TABLE dbo.SL_REQUEST_ID
(
    requestId numeric(10,0) NOT NULL,
    CONSTRAINT X_requestId
    PRIMARY KEY CLUSTERED (requestId)
) 
```

我正在从命令提示符下运行

> "C:\Program Files\Microsoft SQL Server\100\Tools\Binn\bcp" BCP_Experiment_DB.dbo.SL_REQUEST_ID 在 M:\BCP_Experiment\SL_REQUEST_ID_FileData -S BCP_Experiment_Serve
> r -T

我的数据文件如下图所示。

![在此处输入图像描述](../Images/577fd057debeb6a4f4830e5df3004d5a.png)

当我们在 commnd propmt 上运行上述命令时，会发生以下过​​程

```
Enter the file storage type of field requestId [numeric]:
Enter prefix-length of field requestId [1]:
Enter field terminator [none]:

Do you want to save this format information in a file? [Y/n] n

Starting copy...

0 rows copied.
Network packet size (bytes): 4096
Clock Time (ms.) Total     : 1 
```

为什么那条记录没有被复制？

我不确定这是否重要，但我的 sql server BCP_Experiment_Server 是一个 sql 2005 实例。

# javascript - setTimeout 不会停止

> ID：14357448
> 
> 赞同：0
> 
> 时间：2013-01-16T11:33:54.867
> 
> 标签：javascript

我正在尝试制作具有此目标的脚本：

1.  如果有新订单，每 X 秒检查一次（函数 refreshIntervalId()）
2.  如果有新订单，停止 setTimeover
3.  在另一个函数（函数 refreshIntervalId2() ）中执行一些操作并再次启动 de setTimeover

我用这段代码实现了这一点，它可以工作，但计时器永远不会停止，它会每 5 秒执行一次。

你知道我该如何解决这个问题吗？提前致谢

```
 var refreshIntervalId, refreshIntervalId2;

  $("input:text:visible:first").focus();

  refreshIntervalId2 = (function() {
    return {
      update: function() {
        var pedidoid, url;
        clearInterval(refreshIntervalId);
        pedidoid = $("#pedidoid").val();
        url = Routing.generate("get_pedido", {
          id: pedidoid
        });
        return $.getJSON(url, function(json) {
          clearInterval(refreshIntervalId2);
          if (json.entregado === 1) {
            return location.reload(true);
          }
        });
      }
    };
  })();

  refreshIntervalId = (function() {
    return {
      update: function() {
        var url;
        url = Routing.generate("get_pedidos");
        return $.getJSON(url, function(json) {
          var imgsrc;
          clearInterval(refreshIntervalId);
          $(".hero-unit").children("h1").text("Pedido nuevo!");
          $(".hero-unit").children("h2").text("");
          imgsrc = "/images/uploads/" + json.pedido.material.foto;
          $("#imagenpedidomaterial").attr("src", imgsrc);
          $(".cajapuesto").css({
            position: "absolute",
            top: json.pedido.puesto.y + "px",
            left: json.pedido.puesto.x + "px"
          });
          $(".cajapuesto").addClass(json.kolorea);
          $("#divimagenmaterial").show("slow");
          $("#divcodbar").show("slow");
          $("#pedidoid").val(json.pedido.id);
          return setInterval(refreshIntervalId2.update, 5000);
        });
      }
    };
  })();

  $(document).ready(function() {
    return setInterval(refreshIntervalId.update, 5000);
  });

  $(document.body).on("keypress", function(e) {
    var $micodbar, url;
    switch (e.which) {
      case 13:
        $("#divmaterialincorrecto").hide();
        $micodbar = $("#checkcodbar").val();
        url = Routing.generate("get_material", {
          codbar: $micodbar
        });
        return $.ajax(url, {
          type: "GET",
          contentType: "application/json",
          success: function(data) {
            var datos;
            if (data === "null") {
              return $("#divmaterialincorrecto").show("slow");
            } else {
              datos = jQuery.parseJSON(data);
              return $(".row").show("slow");
            }
          },
          error: function(xhr, ajaxOptions, thrownError) {
            console.log("Errorea");
            alert(xhr.status);
            return alert(thrownError);
          }
        });
    }
  }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T11:42:48.793

这是因为`refreshIntervalId`并且`refreshIntervalId2`不是对您的计时器的引用，而是对包含`update`我认为是*命名空间*的方法的对象的引用。

`clearInterval`需要一个计时器作为参数，这些可以从`setInterval`调用的返回值中获取。

您必须满足这种形式的代码才能引用您的计时器以供将来清除：

```
//myTimer is a reference to your timer created by setInterval.
var myTimer = setInterval(func,interval);

//to clear myTimer, pass it to clearInterval
clearInterval(myTimer); 
```

像这样的结构就足够了：

```
$(document).ready(function() {
  var firstInterval
    , secondInterval
    ;

  //if you are not creating local scopes, I suggest ditching the IFFE
  //and go for a literal object instead.
  var refreshIntervalId = {
    update : function(){
      ...
      return $.getJSON(url, function(json) {
        ...
        clearInterval(firstInterval);
        ...
      });
      ...
    }
  };

  //run refreshIntervalId.update every 5 seconds
  //timer referenced by firstInterval
  firstInterval = setInterval(refreshIntervalId.update, 5000);
}); 
```

* * *

顺便说一句，您的`keypress`处理程序应该`$(document).ready()`确保在操作 DOM 元素之前加载它们。

# macos - lzma 压缩的冰山

> ID：14357453
> 
> 赞同：0
> 
> 时间：2013-01-16T11:34:11.500
> 
> 标签：macos, package, packagemaker, lzma

我使用 iceberg 为 OS X 平台分发我的软件包。

我想用 lzma 算法压缩我的文件，比如 nsis（对于 windows）。

我对此进行了研究，但找不到任何相关信息。冰山和 lzma 可能没有解决方案，但我有一个希望。

有人知道如何使用 iceberg 和 lzma 压缩吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T09:31:38.393

NSIS for windows 很棒，但您需要将它与[Excelsior Installer 2.2](http://www.excelsior-usa.com)一起使用。我知道另一种使用 LZMA 压缩构建软件包的软件：[Advanced Installer](http://www.advancedinstaller.com)。你可以尝试一些更好的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-11T23:35:25.470

我知道的唯一 lzma 安装程序解决方案是有点自定义构建。一个默认的 osx 安装程序，带有用于提取的嵌入式 7za 二进制文件和一个使用 postflight 脚本提取的单独的 lzma 存档。我不希望 lzma 集成到 osx 中，因此安装程序不会支持 lzma。您所能做的就是使用包脚本嵌入二进制文件和控件提取。一件事是舒尔，一旦您在可执行文件上体验了 lzma 出色的可靠压缩比，您将永远不会使用其他任何东西；）结果甚至比在 win 上使用 nsis 更好。

创建元包，添加安装选项，构建。将 lzma 二进制文件和存档添加到（元）包文件夹，并在包中处理飞行后脚本中的提取。您可以在 kb 中调整实际安装大小，编辑 pkg 文件夹中 IFPkgFlagInstalledSize Info.plist 的整数值。

附注：如果您在压缩音频样本之后，lzma 不是首选。Gzip 和 RAR 为此目的更舒适，而且速度更快。

# .net - 从 Visual Studio 2008 tfs 到 2010 tfs 以及从 net framework 3.5 到 4.0 的 Visual C++ 迁移

> ID：14357457
> 
> 赞同：0
> 
> 时间：2013-01-16T11:34:22.060
> 
> 标签：.net, visual-studio-2008, visual-c++

我在 Visual Studio 2008 和 NET Framework 3.5 中有一个 Visual C++ 项目。现在，我已迁移到 Visual Studio 2010 和 .NET Framework 4.0。

转换后，我看到一些外部依赖项（*.h 文件）已自动添加到创建的新文件夹中，“外部依赖项”也自动创建。此文件夹中的所有文件 *.h 都引用了一个相对路径：

c:\程序文件\Microsoft Visual Studio 10.0\vc\atlmfc\include\

我不明白，因为在 Visual Studio 2008 和 net Framework 3.5 中，这个文件夹，外部依赖项，不存在。

为什么这个文件夹会自动创建并填充大量 *.h 文件？

此外，每次从团队基础服务器执行获取最新信息时，该项目始终显示为已签出。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:46:12.687

“外部依赖”是 VS2010 的一个新特性。它是一个虚拟文件夹，包含 intellisense 发现您的代码所依赖的所有头文件。如果您觉得它没有用，可以从 Tools->Options->Text Editor->C/C++->Advanced->Disabled External Dependancies 将其禁用（我就是这样做的）设置为 True。

# jquery - jQuery 颜色选择器插件

> ID：14357461
> 
> 赞同：1
> 
> 时间：2013-01-16T11:34:39.503
> 
> 标签：jquery, color-picker

我正在使用 jQuery 颜色选择器插件。

colorSelector 元素允许用户选择颜色。选择颜色后，我想将#previewFrame div 背景颜色更改为选定的十六进制。

我在实现这一目标时遇到了问题。#previewFrame 颜色不会改变，但 #colorSelector 背景颜色会改变。

```
 <script type="text/javascript">
    $(document).ready(function () {
        $('#colorSelector').ColorPicker({
            color: '#0000ff',
            onShow: function (colpkr) {
                $(colpkr).fadeIn(500);
                return false;
            },
            onHide: function (colpkr) {
                $(colpkr).fadeOut(500);
                return false;
            },
            onChange: function (hsb, hex, rgb) {
                $('#colorSelector div').css('background-color', '#' + hex);
                $('#previewFrame div').css('background-color', '#' + hex);
            }
        });
    }
    </script> 
```

这是DIV。

```
<div id="previewFrame" style="width: 200px; height: 200px; border: 1px solid #000;">
    <div style="background-color: #0000ff"></div>
</div>
<div id="colorSelector">
    <div style="background-color: #0000ff"></div>
</div> 
```

# android - 导出签名的 APK 时，Android Gen 文件夹消失

> ID：14357462
> 
> 赞同：3
> 
> 时间：2013-01-16T11:34:41.013
> 
> 标签：android, export, apk, signed, r.java-file

大事件。

每次我尝试使用 eclipse 导出签名的 APK 时，在最后一个操作中，当我单击“完成”时，我的 gen 文件夹的内容突然消失，因此 R 文件无法再解析，我最终收到一条错误消息：“错误发生在由于 R 文件丢失，构建”。

让我们清理所有这些，取回我的 R 文件，重试......但同样的错误也是如此。

此外，我不能使用“ant release”来获取我的签名 apk，因为以前的开发人员使用了一个包含重音符号的密钥别名：“é”，因此 ant 在尝试使用别名时会产生跳过字符的错误。Eclipse 可以处理这个重音问题，但由于前面的原因不能构建。

我的目标是发布这个应用程序的更新，所以看来我必须使用相同的别名。

我应该怎么办？

谢谢

# mysql - 在 MySQL 中按国家/地区名称分组

> ID：14357465
> 
> 赞同：2
> 
> 时间：2013-01-16T11:34:46.360
> 
> 标签：mysql, group-by, pivot

我有一个包含以下字段的表：

```
id, country_id, name, n_ocurrences
1   uk          John     3
2   us          John     4
3   uk          Matt     0
4   us          Matt     5 
```

我将如何获得如下所示的结果列表：

```
name   uk    us   total_ocurrences
John   3     4            7
Matt   0     5            5 
```

现在我在直接 PHP 处理结果中这样做，但我想知道我是否可以在 MySQL 中这样做。

**编辑**：请注意，表比这个大，实际上我正在做一个带有 country_ids 列表的 WHERE。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T11:37:28.970

这种类型的数据转换是一个*枢纽*。在 MySQL 中，要生成此结果，您将使用带有`case`表达式的聚合函数：

```
select name,
  sum(case when country_id = 'uk' then n_ocurrences else 0 end) occurrences_uk,
  sum(case when country_id = 'us' then n_ocurrences else 0 end) occurrences_us,
  sum(n_ocurrences) total_ocurrences
from yourtable
group by name 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/ea26f/2)。

`country_id`如果您提前知道 的值，则上述版本效果很好，但如果您不知道，则可以使用准备好的语句来生成动态 sql：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'sum(case when country_id = ''',
      country_id,
      ''' then n_ocurrences end) AS occurrences_',
      country_id
    )
  ) INTO @sql
FROM yourtable;

SET @sql = CONCAT('SELECT name, ', @sql, ' ,
                      sum(n_ocurrences) total_ocurrences
                  FROM yourtable 
                  GROUP BY name');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/ea26f/4)

两者都给出结果：

```
| NAME | OCCURRENCES_UK | OCCURRENCES_US | TOTAL_OCURRENCES |
-------------------------------------------------------------
| John |              3 |              4 |                7 |
| Matt |              0 |              5 |                5 | 
```

# asp.net - 强制 UpdatePanel.Update() 使用 Shared Sub

> ID：14357469
> 
> 赞同：0
> 
> 时间：2013-01-16T11:34:54.317
> 
> 标签：asp.net, vb.net, webmethod, subroutine

有什么方法可以`UpdatePanel1.Update()`从内部执行`Shared Sub`吗？

它得到一个错误：`Cannot refer to an instance member of a class from within a shared sub ..`

```
<WebMethod()> _
Public Shared Sub DoSomeStuff(ByVal Param1 As String)

    // do some stuff and then update the updatepanel
    UpdatePanel1.Update() // not a valid code

End Sub 
```

任何建议都非常感谢。

# sql-server-2008-r2 - 从与其他 2 个表连接的表中删除重复行

> ID：14357470
> 
> 赞同：0
> 
> 时间：2013-01-16T11:34:55.083
> 
> 标签：sql-server-2008-r2

我有 3 个名为 ICD10、Claims 和 AuthHeader 的表。这 3 个表全部连接在一起以创建 1 个用于访问我的 SSAS Cube 的视图表。在 ICD10 中有重复的行，需要删除。如何在不弄乱与 ICD10 表连接的主键的情况下删除重复项？我看过这个脚本，但我认为这不是我需要的

```
DECLARE @table TABLE (
      id INT IDENTITY(1, 1)
    , data VARCHAR(20)
    )

DELETE  FROM @table

FROM    @table o

        INNER JOIN ( SELECT data
                     FROM   @table
                     GROUP BY data
                     HAVING COUNT(*) > 1
                   ) f ON o.data = f.data
        LEFT OUTER JOIN ( SELECT    [id] = MAX(id)
                          FROM      @table
                          GROUP BY  data
                          HAVING    COUNT(*) > 1
                        ) g ON o.id = g.id
WHERE   g.id IS NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:37:10.517

所以这就是我为解决问题所做的...

```
---------------------------------------
-- INSERT DUPLICATES INTO TEMP TABLE --
--------------------------------------------------------
IF OBJECT_ID('tempdb..#TEMP') IS NOT NULL 
DROP TABLE #TEMP

SELECT DiagnosisCode
      ,DiagnosisDesc
      ,icd10ThreeCharacter
      ,icd10AdditionalGroup
      ,icd10DiseaseGroup
      ,icd10Level2
      ,icd10Chapter
      ,PMBCDLCode
      ,PMBCDLDescription
      ,PMBCDLRank

INTO #TEMP        
FROM MSOEDW.shared.ICD10
GROUP
  BY DiagnosisCode
    ,DiagnosisDesc
    ,icd10ThreeCharacter
    ,icd10AdditionalGroup
    ,icd10DiseaseGroup
    ,icd10Level2
    ,icd10Chapter
    ,PMBCDLCode
    ,PMBCDLDescription
    ,PMBCDLRank

 HAVING COUNT(DiagnosisCode) > 1

 SELECT [DiagnosisCode]
       ,[DiagnosisDesc]
       ,[icd10ThreeCharacter]
       ,[icd10AdditionalGroup]
       ,[icd10DiseaseGroup]
       ,[icd10Level2]
       ,[icd10Chapter]
       ,[PMBCDLCode]
       ,[PMBCDLDescription]
       ,[PMBCDLRank]
  FROM #TEMP

-----------------------
-- DELETE DUPLICATES --
---------------------------------------------------------
DELETE 
FROM [MSOEDW].[shared].[ICD10]
WHERE EXISTS (
SELECT DISTINCT TMP.*
FROM [MSOEDW].[shared].[ICD10] ICD  
JOIN #TEMP TMP
  ON ICD.DiagnosisCode = TMP.DiagnosisCode
JOIN [MSOEDW].[auth].[AuthHeader] head 
  ON ICD.[icd10Key] = head.[icd10Key]
JOIN [MSOEDW].[claim].[Claim] clm
  ON icd.[icd10Key] = clm.[icd10Key]
  )
------------------------------------------------------------ 
```

希望这将在不久的将来帮助其他有同样问题的人

# c#-4.0 - 如何在另一个中获取1个MVC控制器的线程状态

> ID：14357475
> 
> 赞同：0
> 
> 时间：2013-01-16T11:35:02.340
> 
> 标签：c#-4.0, jquery-mobile, asp.net-mvc-4

我正在使用`jquery` `mobile+` `MVC4.net`. 有 3 个独立的模块，它们有各自的视图和控制器。

在一个模块中，我调用了一项生成 PDF 报告的服务；这个过程大约需要 5 分钟，所以我会显示一个状态指示器，并在收到响应后移除该指示器。这一切都很好，它不会挂起 UI，用户可以导航和操作。

当用户导航到另一个模块时，问题就出现了。我不知道如何在将线程移至另一个控制器时获取处于运行状态的线程的状态，因为如果我移至其他视图/控制器，该线程将丢失。

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:03:50.177

这似乎有点米奇老鼠，但显然有必要。两种可能的选择：

1.  维护您的线程模型，而是让监控线程将更新发送到数据库，然后让您的客户端偶尔检查数据库。
2.  考虑一个利用 SignalR 的解决方案。报告线程可以通知客户端。

[https://github.com/SignalR/SignalR](https://github.com/SignalR/SignalR)

# html - 如何更改我的 Mercurial Web 界面外观

> ID：14357476
> 
> 赞同：0
> 
> 时间：2013-01-16T11:35:02.540
> 
> 标签：html, css, interface, mercurial, mercurial-extension

我现在开始使用 mercurial，并且我在 localhost/hg 上有 Web 界面。

现在我想改变 Mercurial 页面的图形方面，改变外观。（CSS，图标，icon_link，...）

我到处搜索，找不到任何关于它的信息。

有人告诉我该怎么做吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:44:59.827

我自己没有做过，所以我只能将您指向[此处](http://mercurial.selenic.com/wiki/Theming)的 hgweb 主题文档。

（我假设您正在使用`hgweb`发布存储库）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:36:40.983

我解决了我的问题。在我的例子中，我使用 ubuntu: 在`/usr/share/mercurial/templates/paper` 我们找到 index.tmpl 中我们可以更改 logoimg 和 logourl：

```
{header}
<title>Mercurial repositories index</title>
</head>
<body>

<div class="container">
<div class="menu">
<a href="{logourl}">
<img src="{staticurl}{logoimg}" width=75 height=90 border=0 alt="mercurial" /></a>
</div>
<div class="main">
<h2>Mercurial Repositories</h2>

<table class="bigtable">
    <tr>
        <th><a href="?sort={sort_name}">Name</a></th>
        <th><a href="?sort={sort_description}">Description</a></th>
        <th><a href="?sort={sort_contact}">Contact</a></th>
        <th><a href="?sort={sort_lastchange}">Last modified</a></th>
        <th>&nbsp;</th>
    </tr>
    {entries%indexentry}
</table>
</div>
</div>
{footer} 
```

例如，如果我们要更改模板中的徽标 url（例如纸模板），我们需要更改所有存在 logourl 的 tmpl 文件。

```
$:/usr/share/mercurial/templates/paper$ grep logourl *
bookmarks.tmpl:<a href="{logourl}">
branches.tmpl:<a href="{logourl}">
changeset.tmpl:<a href="{logourl}">
error.tmpl:<a href="{logourl}">
fileannotate.tmpl:<a href="{logourl}">
filediff.tmpl:<a href="{logourl}">
filelog.tmpl:<a href="{logourl}">
filerevision.tmpl:<a href="{logourl}">
graph.tmpl:<a href="{logourl}">
help.tmpl:<a href="{logourl}">
helptopics.tmpl:<a href="{logourl}">
search.tmpl:<a href="{logourl}">
shortlog.tmpl:<a href="{logourl}">
tags.tmpl:<a href="{logourl}"> 
```

我希望这可以帮助有同样问题的人。

# c# - Outlook 加载项读取服务器设置

> ID：14357479
> 
> 赞同：0
> 
> 时间：2013-01-16T11:35:19.917
> 
> 标签：c#, outlook, add-in, imap, exchange-server

我正在寻找一种使用 c# 编码的 Outlook 加载项从 Outlook 中读取 IMAP/Microsoft Exchange 设置的方法。

谢谢你帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:51:45.930

我认为您正在寻找的是dll的[Accounts](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.account_members.aspx)接口。`Office.Interop.Outlook`

您还没有提到您使用的 Outlook 版本，此代码适用于 Outlook 2010，由 Microsoft MVP Helmut Obertanner 编写，取自[此处](http://msdn.microsoft.com/en-us/library/office/ff462091%28v=office.14%29.aspx)：

```
using System;
using System.Text;
using Outlook = Microsoft.Office.Interop.Outlook;

namespace OutlookAddIn1
{
    class Sample
    {
        public static void DisplayAccountInformation(Outlook.Application application)
        {

            // The Namespace Object (Session) has a collection of accounts.
            Outlook.Accounts accounts = application.Session.Accounts;

            // Concatenate a message with information about all accounts.
            StringBuilder builder = new StringBuilder();

            // Loop over all accounts and print detail account information.
            // All properties of the Account object are read-only.
            foreach (Outlook.Account account in accounts)
            {

                // The DisplayName property represents the friendly name of the account.
                builder.AppendFormat("DisplayName: {0}\n", account.DisplayName);

                // The UserName property provides an account-based context to determine identity.
                builder.AppendFormat("UserName: {0}\n", account.UserName);

                // The SmtpAddress property provides the SMTP address for the account.
                builder.AppendFormat("SmtpAddress: {0}\n", account.SmtpAddress);

                // The AccountType property indicates the type of the account.
                builder.Append("AccountType: ");
                switch (account.AccountType)
                {

                    case Outlook.OlAccountType.olExchange:
                        builder.AppendLine("Exchange");
                        break;

                    case Outlook.OlAccountType.olHttp:
                        builder.AppendLine("Http");
                        break;

                    case Outlook.OlAccountType.olImap:
                        builder.AppendLine("Imap");
                        break;

                    case Outlook.OlAccountType.olOtherAccount:
                        builder.AppendLine("Other");
                        break;

                    case Outlook.OlAccountType.olPop3:
                        builder.AppendLine("Pop3");
                        break;
                }

                builder.AppendLine();
            }

            // Display the account information.
            System.Windows.Forms.MessageBox.Show(builder.ToString());
        }
    }
} 
```

我可以从文档中看到，理论上这也应该适用于 Outlook 2007。

如果您打算使用 Outlook 2003，您将不得不做一些不同的事情，因为 Outlook 2003 对象模型不包括对 Accounts 属性的访问。

为此，您要么必须使用第三方库，例如兑换，请参阅[此答案](https://stackoverflow.com/a/3187547/1220971)以获取一些替代方案。

您显然也可以根据另一个问题的[答案使用注册表来执行此操作。](https://stackoverflow.com/questions/3118211/how-can-i-get-outlook-2003-data-in-silverlight-4-application/3189975#3189975)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:50:43.973

对于交换设置，您可以查看此 [http://msdn.microsoft.com/en-US/exchange](http://msdn.microsoft.com/en-US/exchange)

# delphi - 编写 C++ Builder/Delphi 组件并将二进制属性保存到 DFM 文件

> ID：14357482
> 
> 赞同：4
> 
> 时间：2013-01-16T11:35:31.627
> 
> 标签：delphi, components, c++builder-xe, dfm, tpersistent

我编写了一个 C++ 构建器组件来显示 SVG 文件对它们执行一些操作。

现在，我发布了一个名为 SvgFile (UnicodeString) 的属性，可以在 IDE 中使用 SVG 文件的文件名对其进行初始化。这工作正常。此属性保存在 DFM 文件中，并且可以从中重新加载。

但是我必须在应用程序中提供 SVG 文件，所以我想将 SVG 保存到 DFM 文件中，因为它是使用 TImage 组件完成的。

我想我必须编写一个 TPropertyEditor 和一个 TPersistent 类，但我不知道该怎么做。

有人可以帮我这样做吗？

编辑 2013/01/17：这是一个解决方案[http://www.informit.com/articles/article.aspx?p=28278&seqNum=5](http://www.informit.com/articles/article.aspx?p=28278&seqNum=5)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T15:23:54.503

您可以创建自己的方法来读取和写入属性，方法是编写自己的方法来执行二进制数据与流之间的流式传输，并使用 和 将它们注册到 VCL/RTL 流式传输[`DefineProperties`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Classes.TComponent.DefineProperties)系统[`DefineBinaryProperty`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Classes.TFiler.DefineBinaryProperty)。JEDI JVCL 单元 JVXSlider.pas 中有一个易于理解的示例：

```
// interface
type
  TJvCustomSlider=class(TJvCustomControl)
  private
    procedure ReadUserImages(Stream: TStream);
    procedure WriteUserImages(Stream: TStream);
    ...
  protected
    procedure DefineProperties(Filer: TFiler); override;

// implementation
procedure TJvCustomSlider.DefineProperties(Filer: TFiler);

  function DoWrite: Boolean;
  begin
    if Assigned(Filer.Ancestor) then
      Result := FUserImages <> TJvCustomSlider(Filer.Ancestor).FUserImages
    else
      Result := FUserImages <> [];
  end;

begin
  // @RemyLebeau points out that the next line is apparently a bug
  // in the JVCL code, and that inherited DefineProperties should always
  // be called regardless of the type of Filer. Commented it out, but
  // didn't delete it because it *is* in the JVCL code I cited.

  //if Filer is TReader then
    inherited DefineProperties(Filer);
  Filer.DefineBinaryProperty('UserImages', ReadUserImages, WriteUserImages, DoWrite);
end;

procedure TJvCustomSlider.ReadUserImages(Stream: TStream);
begin
  Stream.ReadBuffer(FUserImages, SizeOf(FUserImages));
end;

procedure TJvCustomSlider.WriteUserImages(Stream: TStream);
begin
  Stream.WriteBuffer(FUserImages, SizeOf(FUserImages));
end; 
```

Delphi 流系统会根据需要自动为定义的属性（在上面的示例中为 property ）调用适当的方法，以自动`UserImages`保存到 dfm 文件或从 dfm 文件中读取；你永远不需要自己打电话给他们。

# qml - 从 onTouch 方法中访问上下文属性

> ID：14357483
> 
> 赞同：0
> 
> 时间：2013-01-16T11:35:37.007
> 
> 标签：qml, blackberry-10

我在我的应用程序的主要方法中设置了一个上下文对象：

```
// Load the UI description from main.qml
QmlDocument *qml = QmlDocument::create("asset:///main.qml").parent(&app);

// Make the Corporate object available to the UI as context property
qml->setContextProperty("_corporate", new Corporate(&app)); 
```

但是我无法从`onTouch`方法中访问 _corporate 对象，同时在 onTriggered 方法中正确访问了 _corporate 对象。这是代码：

```
ListView {
                dataModel: _corporate.model
                id: myListView
                listItemComponents: [ 
                      ListItemComponent {
                          id: groupItemComponent
                          type: "groupItem"

                          StandardListItem {
                              id: groupListItem
                              title: qsTr ("%1").arg(ListItemData.firstRow)
                              description: ListItemData.secondRow
                              onTouch: {

                                  _corporate.currentView = 3
                              }
                          }
                      }
                  ]
                onTriggered: {
                      _corporate.currentView = 3

                }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:01:28.073

_corporate 不能从 ListItemComponent 中访问。

您必须以另一种方式授予访问权限：

*   访问方式：groupListItem.ListItem.view.getCorporate();
*   在 listView 中定义一个 javascript 函数： function getCorporate(){return _corporate;}

# c# - 如何获取使用文字创建的asp链接按钮的点击事件？

> ID：14357484
> 
> 赞同：0
> 
> 时间：2013-01-16T11:35:39.627
> 
> 标签：c#, asp.net

我在 csharp 中使用文字动态创建了链接按钮。我想要它的点击事件。

```
for (int i = 0; i < dataset.Tables[0].Rows.Count; i++)
                {
Literal literal = new Literal();
                literal.Text = @" <asp:LinkButton runat='server' ID='addtocart' Text=''                       
                        OnClick='addtocart_Click'><img src='images/cart.gif' alt='' title='' border='0' class='left_bt' /></asp:LinkButton>";
                div.Controls.AddAt(0, lit);
} 
```

我试着让事件像

```
protected void addtocart_Click(object sender, EventArgs e)
    {

    } 
```

但不工作......！请告诉我它的点击事件将如何产生。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T11:41:41.950

在文字文本中，您只能添加 html 控件，无论如何您都不能添加服务器控件。而是以编程方式添加链接按钮，例如

```
LinkButton button = new LinkButton();
button.ID = "addcart";
...
div.Controls.AddAt(0, button); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:42:35.130

而是文字

您可以简单地使用 LinkBut​​ton。

```
 LinkButton lnk = new LinkButton();
            lnk.Click += new EventHandler(addtocart_Click) 
```

# wpf - 使用 wpf 如何为弹出窗口内的按钮启用“输入”按键

> ID：14357495
> 
> 赞同：4
> 
> 时间：2013-01-16T11:36:07.813
> 
> 标签：wpf, button, popup, wpf-controls, enter

我面临一个问题，虽然它可能有一个简单的解决方案，但无法找到它。

我有一个页面（比如 mainPage），里面有几个按钮，我通过在 xaml 中为该按钮设置 IsDefault="true" 为一个按钮（比如提交）启用“Enter”按键，它工作正常。

单击我的主页上的其他按钮将打开一个弹出窗口，其中包含 2 个按钮“是”和“否”。当我按下回车键时，为“是”设置 IsDefault="true" 属性将不起作用。（有关信息，它也不适用于提交按钮，这也不是问题，我想我也有[解决方案](http://neilmosafi.blogspot.in/2007/04/default-buttons-in-wpf-and-multiple.html)）

我应该如何为弹出窗口中的按钮启用此功能？

（有关更多信息，我们有一个按钮，它创建一个弹出窗口，其中包含按钮和文本框。在这种情况下，为弹出窗口中的按钮设置 IsEnable="true" 将为按钮完成工作，但前提是我们单击文本框。在观察到此行为后，我尝试将焦点设置在文本框上，因此它可能会有所帮助，但将焦点设置在文本框上不起作用。用于将焦点设置在文本框上，如下所示：Focusable="True" FocusManager.FocusedElement="{Binding ElementName=textboxName} ")

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T13:58:19.653

您需要将重点放在`Popup`第一个上，以便它可以响应`Enter`关键

WPF中有两种类型的焦点：键盘和逻辑。您可以拥有多个具有逻辑焦点的对象，前提是它们位于不同的焦点范围内（例如，您可以将一个元素集中在 Window 中，将另一个元素集中在 Popup 中），但只有一个对象可以拥有键盘焦点。

要在弹出窗口中设置焦点，我通常只使用在`Loaded`弹出窗口可见并加载时执行的事件。

```
MyTextBox.Focus();         // Set Logical Focus
Keyboard.Focus(MyTextBox); // Set Keyboard Focus 
```

**编辑**

有时，如果您的应用程序中的其他东西在`Loaded`事件发生后立即窃取焦点，您可以使用`Dispatcher`来在稍后的[DispatcherPriority](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherpriority.aspx)运行您的焦点代码，例如`Input`

```
Dispatcher.BeginInvoke(DispatcherPriority.Input,
    new Action(delegate() { 
        MyTextBox.Focus();         // Set Logical Focus
        Keyboard.Focus(MyTextBox); // Set Keyboard Focus
     })); 
```

# php - Magento 日志中的数组到字符串转换错误

> ID：14357496
> 
> 赞同：1
> 
> 时间：2013-01-16T11:36:11.383
> 
> 标签：php, magento

我的 Magento system.log 充满了这个错误：注意：第 1232 行 /app/code/core/Mage/Core/Block/Abstract.php 中的数组到字符串转换。

我在这里添加了代码：（规则 1232 是 $key = implode('|', $key);)

```
 /**
      * Get Key for caching block content
      *
      * @return string
      */
     public function getCacheKey()
     {
         if ($this->hasData('cache_key')) {
             return $this->getData('cache_key');
         }
         /**
         * don't prevent recalculation by saving generated cache key
          * because of ability to render single block instance with different data
          */
         $key = $this->getCacheKeyInfo();
         //ksort($key);  // ignore order
         $key = array_values($key);  // ignore array keys
         $key = implode('|', $key);
         $key = sha1($key);
         return $key;
    } 
```

你知道出了什么问题，我需要改变什么吗？先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:19:07.110

好吧，这是 magento 核心代码，所以我确实希望从该代码外部进入 $key 变量的一些错误值。

您可以尝试记录 $key 变量并检查它是否为数组。

**就像是：**

Mage::log(print_r($key,true), null, 'mycustomerror.log', true);

或者

Mage::log($key, null, 'mycustomerror.log', true);

如果您想要更好的答案，您应该告诉我们此通知何时生成以及您正在使用的模块。

# 额外信息后

嗯，这是一个猜测，因为你给我的信息并不多。但是您的日志显示以下内容：

```
2013-01-17T16:52:36+00:00 DEBUG (7): Array
(
    [0] => CATALOG_PRODUCT_HIGHLIGHT
    [1] => 1
    [2] => default
    [3] => a058
    [4] => 0
    [5] => highlight/product/grid.phtml
    [6] => 8
    [7] => 4
    [8] => Array
        (
        )

    [9] => Array
        (
        )

    [10] => Array
        (
        )

    [11] => Aanbiedingen
    [12] => highlight-special
    [13] => special_from_date,special_to_date
    [14] => -special
    [15] => product_special
) 
```

我认为问题是：

```
[8] => Array()
[9] => Array()
[10] => Array() 
```

当他们内爆时，他们会发出通知。

**见：** [http ://codepad.viper-7.com/qb5tIW](http://codepad.viper-7.com/qb5tIW)

我会检查 CATALOG_PRODUCT_HIGHLIGHT (highlight/product/grid.phtml)

您可以浏览您的站点，以便加载 highlight/product/grid.phtml 并查看此调用是否确实将该通知放入您的日志文件中。

祝你好运 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-11T07:39:45.610

在注意到对我网站主页的一次访问在 中发出了 90 多行此警告后`system.log`，我解决了 khoekman 的答案中推断的嵌套数组的问题。*我的 Magento 版本是 1.7.0.1*

**步骤 1**
创建路径：`app/code/local/Mage/Core/Block`然后`cd`到该目录。

**第 2 步**
将 Abstract.php 从核心复制到本地：
`cp` `~/public_html/app/code/core/Mage/Core/Block/Abstract.php .`
*这是您为自定义编辑“覆盖核心文件”的方式。*

**第 3 步**
在您喜欢的编辑器中 打开新文件`~/public_html/app/code/local/Mage/Core/Block/Abstract.php`，向下滚动到第 1232 行：

从此：更改
    `$key = implode('|', $key );`
为：
    `$key = $this->implodeRecursive('|', $key );`

**第 4 步**
滚动到当前函数上方`public function getCacheKey()`，然后在其上方的空闲空间中，添加递归内爆函数：

```
//  ckck: fix of system.log Notice: Array to string conversion in app/code/core/Mage/Core/Block/Abstract.php on line 1232
private function implodeRecursive( $_glue, $_arrIn ) {
    $_arrTmp=Array();
    if( count( $_arrIn ) > 1 ) {
        foreach( $_arrIn as $key => $value ) {
            if( is_string($value) || is_null($value) )
                $_arrTmp[] = $value;
            else
                $_arrTmp[] = $this->implodeRecursive( $_glue, $value );
        }
    }
    $_strReturn = implode( $_glue, $_arrTmp );
    return $_strReturn;
} 
```

通过反复试验，唯一可靠的测试是 if`$value`是一个字符串。我通常的技巧`is_array()`或测试`count() > 0`没有奏效。修复这个错误是一项有趣的尝试。

**第 5 步**
保存然后关闭`Abstract.php`，然后将新文件签入您的版本控制系统。
我将 git 与[merge --no-ff](https://stackoverflow.com/questions/9069061/what-is-the-difference-between-git-merge-and-git-merge-no-ff/14865661#14865661)分支一起使用。

# java - 如何删除特定标记之前的所有内容，包括字符串中的标记

> ID：14357500
> 
> 赞同：2
> 
> 时间：2013-01-16T11:36:15.400
> 
> 标签：java, string

> **可能重复：**
> [从字符串中删除特定标记](https://stackoverflow.com/questions/14356979/remove-a-particular-token-from-a-string)

这个问题是我之前问题的延续

> [从字符串中删除特定标记](https://stackoverflow.com/questions/14356979/remove-a-particular-token-from-a-string)

我需要从字符串中删除“+”和“+”之前的所有内容。

如何做呢？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-16T11:37:55.590

结合使用[String#substring()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#substring%28int%29)和[String#indexOf](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#indexOf%28java.lang.String%29)

```
 String s=  "GUID+456709876790";
    System.out.println(s.substring(s.indexOf("+")+1)); 
```

输出：456709876790

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:47:52.123

如果字符串的格式为 +text+，则正则表达式可以解决问题：

```
Pattern p = Pattern.compile(".*\\+(.*)\\+.*");
Matcher m = p.matcher("sdasdad+982347347+234234234");
if (m.matches()) {
    System.out.println("Here you go: " + m.group(1));
} 
```

整个识别的字符串是第 0 组，第一个括号中的内容是第 1 组。

# android - 上一行没有更多空间时如何在新行上显示对象

> ID：14357502
> 
> 赞同：0
> 
> 时间：2013-01-16T11:36:22.350
> 
> 标签：android

有没有办法在一行中显示所有对象，直到该行可以包含它们（取决于屏幕大小），然后在新行上显示其他对象？

我应该使用什么布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:58:04.150

试试 GridLayout，这里有一个教程。 [网格布局](http://android-developers.blogspot.in/2011/11/new-layout-widgets-space-and-gridlayout.html)

# wpf - 如何以编程方式将选项卡项目添加到棱镜中的选项卡控件

> ID：14357503
> 
> 赞同：2
> 
> 时间：2013-01-16T11:36:22.977
> 
> 标签：wpf, mvvm, prism, mef

我将 Prism 与 MEF 一起使用，并且我想动态地将选项卡项添加到选项卡控件而不会违反 Prism - MVVM - MEF 规则。有人可以通过简单的步骤/示例告诉我如何做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:44:26.757

您需要一个用于 TabControl 的区域适配器。我为 Ribbon Control 制作了这个，因此您可以从中获得启发：

```
public class RibbonRegionAdapter : RegionAdapterBase<Ribbon>
{
    public RibbonRegionAdapter(IRegionBehaviorFactory regionBehaviorFactory)
        : base(regionBehaviorFactory)
    {
    }

    protected override void Adapt(IRegion region, Ribbon regionTarget)
    {
        region.Views.CollectionChanged += (s, e) =>
        {
            if (e.Action == System.Collections.Specialized.NotifyCollectionChangedAction.Add)
            {
                foreach (RibbonTabItem RibbonTab in e.NewItems)
                {
                    regionTarget.Tabs.Add(RibbonTab);
                }
            }

            if (e.Action == System.Collections.Specialized.NotifyCollectionChangedAction.Remove)
            {
                foreach (RibbonTabItem RibbonTab in e.OldItems)
                {
                    regionTarget.Tabs.Remove(RibbonTab);
                }
            }
        };
    }

    protected override IRegion CreateRegion()
    {
        return new AllActiveRegion();
    }
} 
```

在 XAML 中：`<Fluent:Ribbon prism:RegionManager.RegionName="{x:Static inf:RegionNames.RibbonRegion}"/>`

添加一个标签，你需要这个：

```
IRegion RibbonRegion = _regionManager.Regions[RegionNames.RibbonRegion];
RibbonRegion.Add(YourTabItemView); 
```

RegionNames 只是我的基础设施项目中的一个类：

```
public class RegionNames
{
    public static string RibbonRegion = "RibbonRegion";
} 
```

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T16:36:08.930

首先，我并不是说我的方法是所有可能的方法中最好的……但我只是想分享它，因为我认为它很酷:)

您可以拥有 TabControl**区域**...因此您可以通过某些视图简单地导航到该区域:) ...会发生什么？当您使用某些视图导航到 TabControl 区域时...该视图将添加为新的 TabItem。

当然，有些事情你必须先做。

1.  您需要修改 TabControl 样式。你只需要告诉 TabControl 它在哪里可以找到 Tab 项的 Header。您当然可以将其添加到应用程序的资源中。

    因此，您需要 TabItemStyle... 在其中指定标题文本的位置...类似这样的...

    ```
     <Style x:Key="MyTabItemStyle" TargetType="{x:Type TabItem}">
        <Setter Property="Header" Value="{Binding Content.DataContext.TabHeaderText,     RelativeSource={RelativeSource Self}}"/>
        ... 
    ```

    并在默认的 TabControlStyle 中使用它

    ```
    <Style TargetType="{x:Type TabControl}">
    <Setter Property="ItemContainerStyle" Value="{StaticResource MyTabItemStyle}"/>
    ... 
    ```

2.  现在您可以在任何地方定义 TabControl 区域。请注意，它应该使用我们之前定义的样式。

    ```
    <TabControl Regions:RegionManager.RegionName="MyRegion" ... /> 
    ```

3.  好吧，现在您可以使用视图导航到该区域...当然，您必须将该视图的 DataContext 设置为具有字符串属性 TabHeaderText 的某个 ViewModel ...

现在它应该可以工作了 :) 当然我们在谈论导航，所以你应该为 ViewModels 提供`[RegionMemberLifetime(KeepAlive = true)]`属性 :) 我希望有一天它对某人有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T11:55:24.427

TabControl 可以像许多其他控件一样绑定到一个集合。这是我在聊天消息程序中使用的选项卡控件的示例。

```
<TabControl ItemsSource="{Binding Path=Rooms, Mode=OneWay}" SelectedItem="{Binding Path=SelectedRoom, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" >
      <TabControl.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Path=RoomName}" x:Name="Header" Tag="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}, Path=DataContext}"/>
            </DataTemplate>
      </TabControl.ItemTemplate>
      <TabControl.ContentTemplate>
            <DataTemplate>

                 //in here is where you put controls for what you want the tabs to look like.

            </DataTemplate>
      </TabControl.ContentTemplate>
 </TabControl> 
```

所以在这个例子中，我有一个名为“Rooms”的自定义数据类型“ChatRoom”的集合，它具有像 RoomName 这样的属性。每当用户创建一个新房间时，它就会被添加到 Rooms 集合中，并创建一个新的 tabitem。所以在我的viewModel中：

```
private ObservableCollection<ChatRoom> _Rooms;

public MainWindowViewModel()
{
     this._Rooms = new ObservableCollection<ChatRoom>();
}

public ObservableCollection<ChatRoom> Rooms
{
   get { return this._Rooms; }
} 
```

# iphone - UITextField 的键盘类型

> ID：14357504
> 
> 赞同：0
> 
> 时间：2013-01-16T11:36:24.173
> 
> 标签：iphone, uitextfield, xcode4.5

我想要一个`UITextField`只允许`alphabets.SpecialCharacters(@,!,,,)`并且不允许数字。所以想到将键盘类型限制为`txtfirstname.keyboardType = UIKeyboardTypeAlphabet;`

```
-(void)viewDidLoad{
 txtfirstname.keyboardType = UIKeyboardTypeAlphabet;
} 
```

但是当我按下数字时，它们也会被输入到文本字段中。为什么会这样？

当按下数字或特殊字符时，`txtfirstname`它应该被输入到文本字段中。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:44:31.780

这里使用下面的函数...提一下你需要什么 NSCharacterSet 中的字符..

```
-(NSString *) formatIdentificationNumber:(NSString *)string
{
    NSCharacterSet * invalidNumberSet = [NSCharacterSet characterSetWithCharactersInString:@"àáâäæãåçćčèéêëęėîïìíįłñńôöòóõœøßśšûüùúŵŷÿźžż°§¿’‘€$£¥₩\n1234567890"];
    NSString  * result  = @"";
    NSScanner * scanner = [NSScanner scannerWithString:string];
    NSString  * scannerResult;

    [scanner setCharactersToBeSkipped:nil];

    while (![scanner isAtEnd])
    {
        if([scanner scanUpToCharactersFromSet:invalidNumberSet intoString:&scannerResult])
        {
            result = [result stringByAppendingString:scannerResult];
        }else
        {
            if(![scanner isAtEnd])
            {
                [scanner setScanLocation:[scanner scanLocation]+1];
            }
        }
    }

    return result;
} 

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{

    if(![string isEqualToString:@""])
    {
        if(textField == textfieldname)
        {
            if ([[self formatIdentificationNumber:string] isEqualToString:@""] && ![string isEqualToString:@""]) {
                return NO;
            }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:43:55.480

尝试这个

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
 {
     static NSCharacterSet *charSet2 = nil;
     if(!charSet2) 
  {

     charSet2 = [[NSCharacterSet  characterSetWithCharactersInString:@"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ./,':+_)\(*~`=&^%$#@!,-?<>\"{}][| "] invertedSet];

  } 
        NSRange location = [string rangeOfCharacterFromSet:charSet2];
        return (location.location == NSNotFound);

 } 
```

# javafx - JavaFx 在按下 esc 时关闭窗口？

> ID：14357515
> 
> 赞同：6
> 
> 时间：2013-01-16T11:36:55.060
> 
> 标签：javafx

我在我的程序中调用了一个新阶段，我想在按下退出时关闭它。我这样做了，这给了我一个 NullPointerException：

```
 scene.setOnKeyPressed(new EventHandler<KeyEvent>() {
        @Override
        public void handle(KeyEvent t) {
            KeyCode key = t.getCode();
            if (key == KeyCode.ESCAPE){
                stage.close();
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-11-13T07:16:49.047

尝试这个..

```
 scene.addEventHandler(KeyEvent.KEY_PRESSED, new EventHandler<KeyEvent>
  () {

        @Override
        public void handle(KeyEvent t) {
          if(t.getCode()==KeyCode.ESCAPE)
          {
              System.out.println("click on escape");
           Stage sb = (Stage)label.getScene().getWindow();//use any one object
           sb.close();
          }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-02-08T04:15:49.033

将事件处理程序添加到要在 ESC 上关闭的阶段/窗口。

JavaFX 8 风格：

```
 stage.addEventHandler(KeyEvent.KEY_RELEASED, (KeyEvent event) -> {
        if (KeyCode.ESCAPE == event.getCode()) {
            stage.close();
        }
    }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-14T17:31:12.100

为什么你不向我们展示更多你的代码？但是，试试这个：

```
public class Login extends Application {

    public static void main(String[] args) {
    launch(args);
}

@Override
public void start(final Stage primaryStage) {
    primaryStage.setTitle("JavaFX Welcome");
    GridPane grid = new GridPane();
    grid.setAlignment(Pos.CENTER);
    grid.setHgap(10);
    grid.setVgap(10);
    grid.setPadding(new Insets(25, 25, 25, 25));

    Text scenetitle = new Text("Welcome");
    scenetitle.setId("welcome-text");
    grid.add(scenetitle, 0, 0, 2, 1);

    Label userName = new Label("User Name:");
    grid.add(userName, 0, 1);

    TextField userTextField = new TextField();
    grid.add(userTextField, 1, 1);

    Label pw = new Label("Password:");
    grid.add(pw, 0, 2);

    PasswordField pwBox = new PasswordField();
    grid.add(pwBox, 1, 2);

    Button btn = new Button("Sign in");
    HBox hbBtn = new HBox(10);
    hbBtn.setAlignment(Pos.BOTTOM_RIGHT);
    hbBtn.getChildren().add(btn);
    grid.add(hbBtn, 1, 4);

    Scene scene = new Scene(grid, 660, 300);
    scene.setOnKeyPressed(new EventHandler<KeyEvent>() {
        public void handle(KeyEvent ke) {
            if (ke.getCode() == KeyCode.ESCAPE) {
                System.out.println("Key Pressed: " + ke.getCode());
                primaryStage.close();
            }
        }
    });
    //primaryStage.setFullScreen(true);
    primaryStage.setScene(scene);
    primaryStage.show();
}
} 
```

完毕。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-27T05:16:54.983

希望导入的 Eventhandler 包不是 JavaFX 的。

尝试使用，

```
import javafx.event.EventHandler; 
```

注意：swing 和 JavaFX 的命名约定相同，只是包名不同，您的 NetBeans/Eclipse 可能会自动导入不同的包，因此请务必确认。

# android - 从android源代码构建

> ID：14357518
> 
> 赞同：2
> 
> 时间：2013-01-16T11:36:59.383
> 
> 标签：android, build, android-source, repository

我不太明白 Android 版本控制工具“repo”是如何工作的。

我`repo init -u https://android.googlesource.com/platform/manifest ; repo sync`第一次运行它，它下载了 9GB 的代码。

然后我想切换到一个可以为我的 Nexus 7 构建 4.1.1 的分支。

我在网上研究并发现`repo init -b BRANCH_NAME`再次使用并且`repo sync`会成功。但是当我这样做时，它开始下载一些新代码（超过 1GB），然后我停止它并使用`repo init`;切换回 master 分支。它又下载了 2GB 的源代码。第一次下载源代码我很困惑，第二次和第三次下载的3GB源代码是什么？

还有2个问题：

1.  如何正确切换分支？
2.  工具叫`lunch`什么？官方网站一直提到它，但从未介绍它，也没有提到在哪里下载它以及如何设置它（你可以想象如果我在谷歌中搜索“午餐”会出现什么），只是将其声明为“构建工具”。

PS：在这个问题的时候，谷歌Android项目的master分支在4.2 Jelly Bean。万一以后有人发现这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-29T19:18:23.877

我知道这是一个老问题，但我最近经历了同样的经历，并想我会分享我学到的东西。

要回答问题 #1：

我不切换分支。你同步所有你想要的分支的代码，然后构建那个分支。例如，我有两个：master 和 4.3_r1，在一个文件夹中。为此，我创建了两个文件夹：

`mkdir /Volumes/android_source/master` `mkdir /Volumes/android_source/4.3_r1`

要初始化和同步 master，我输入：

```
cd /Volumes/android_source/master
repo init -u https://android.googlesource.com/platform/manifest
repo sync 
```

然后，为了初始化和同步 4.3_r1 构建，我输入：

```
cd /Volumes/android_source/4.3_r1
repo init -u https://android.googlesource.com/platform/manifest -b android-4.3_r1
repo sync 
```

在构建之前，切换到基本目录并获取 envsetup.sh 文件：

```
# cd /Volumes/android_source/master
# source build/envsetup.sh
including device/asus/deb/vendorsetup.sh
including device/asus/flo/vendorsetup.sh
including device/asus/grouper/vendorsetup.sh
including device/asus/tilapia/vendorsetup.sh
including device/generic/armv7-a-neon/vendorsetup.sh
including device/generic/mips/vendorsetup.sh
including device/generic/x86/vendorsetup.sh
including device/lge/mako/vendorsetup.sh
including device/samsung/maguro/vendorsetup.sh
including device/samsung/manta/vendorsetup.sh
including device/samsung/toro/vendorsetup.sh
including device/samsung/toroplus/vendorsetup.sh
including device/samsung_slsi/arndale/vendorsetup.sh
including device/ti/panda/vendorsetup.sh
including sdk/bash_completion/adb.bash 
```

要回答问题 #2，一旦您运行了 envsetup.sh，午餐将在您的 PATH 中。然后，告诉它你想要构建什么。对于调试版本，告诉午餐你想要全英文。您可以在没有参数的情况下启动午餐以获得午餐菜单。

```
mbpr15:Android awt$ lunch full-eng

============================================
PLATFORM_VERSION_CODENAME=REL
PLATFORM_VERSION=4.3.2.1.000.000
TARGET_PRODUCT=full
TARGET_BUILD_VARIANT=eng
TARGET_BUILD_TYPE=release
TARGET_BUILD_APPS=
TARGET_ARCH=arm
TARGET_ARCH_VARIANT=armv7-a
TARGET_CPU_VARIANT=generic
HOST_ARCH=x86
HOST_OS=darwin
HOST_OS_EXTRA=Darwin-13.0.0-x86_64-i386-64bit
HOST_BUILD_TYPE=release
BUILD_ID=OPENMASTER
OUT_DIR=out
============================================ 
```

现在您已准备好构建：

```
# make -j16 
```

我有一个 8 核处理器，所以我在运行构建时使用 -j16，它大大提高了速度。

希望有帮助。

# android - 如何创建一个负数选择器

> ID：14357520
> 
> 赞同：9
> 
> 时间：2013-01-16T11:37:02.360
> 
> 标签：android, numberpicker

有谁知道使用Android的默认数字选择器允许负数的简单方法？我知道是 InputFilter 不允许这样做，但是有没有简单的方法可以覆盖而不重写整个小部件？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-17T12:17:11.553

更通用和优雅的解决方案是使用[NumberPicker.Formatter](http://developer.android.com/reference/android/widget/NumberPicker.Formatter.html)并在 NumberPicker 中仅使用正数。

例如，如果我想在 [-50, 50] 中选择一个数字：

```
final int minValue = -50
final int maxValue = 50
NumberPicker numberPicker = new NumberPicker(myActivity);
numberPicker.setMinValue(0);
numberPicker.setMaxValue(maxValue - minValue);
numberPicker.setValue(myCurrentValue - minValue);
numberPicker.setFormatter(new NumberPicker.Formatter() {
    @Override
    public String format(int index) {
        return Integer.toString(index + minValue);
    }
}); 
```

然后取回选定的值：

```
int myNewValue = numberPicker.getValue() + minValue 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-24T16:04:13.410

利用：

```
 String[] nums {"-1","-2","-3","-4"};
numberpicker.setDisplayedValues(nums); 
```

或者

```
String[] nums = new String[4];
for(int i=0; i<nums.length; i++)
nums[i] = "-" + Integer.toString(i);
numberpicker.setDisplayedValues(nums); 
```

其中任何一个都可以让您为 NumberPicker 使用任何字符串集。你正在做的是你指定一组你传递给 NumberPicker 的字符串。然后它将显示您的值而不是默认值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-26T19:25:06.533

使用`.setFormatter()`不允许输入负数。使用`.setDisplayedValues()`键盘显示文本而不是数字。所以这里是类`SignedNumberPicker`：

```
class SignedNumberPicker extends android.widget.NumberPicker {
  int nToAdd=0,mMaxValue=0,mMinValue=0;
  EditText tv;
  private void init() {
    super.setFormatter(new Formatter() {
      @Override
      public String format(int i) {
        int r=i-nToAdd;
        return String.valueOf(r);
      }
    });
    tv.setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_SIGNED);
    tv.setFilters(new InputFilter[] {new InputTextFilter()});
    tv.setOnFocusChangeListener(new OnFocusChangeListener() {
      @Override
      public void onFocusChange(View view, boolean b) {
        if (b) {
          tv.selectAll();
        } else {
          String str = String.valueOf(((EditText) view).getText());
          if (TextUtils.isEmpty(str.replace("-",""))) {
            tv.setText(String.valueOf(getRealValue()));
          } else {
            textToValue();
          }
          InputMethodManager keyboard = (InputMethodManager) getContext().getSystemService(Context
              .INPUT_METHOD_SERVICE);
          if (keyboard != null) {
            keyboard.hideSoftInputFromWindow(tv.getWindowToken(),0);
          }
          tv.setVisibility(INVISIBLE);
        }
        if (mOnTextFocusChangedListener!=null) {
          mOnTextFocusChangedListener.onTextFocusChanged(b);
        }
      }
    });
  }
  void textToValue() {
    try {
      setValue(Integer.valueOf(tv.getText().toString()));
    } catch (Exception e) {}
  }
  OnTextFocusChangedListener mOnTextFocusChangedListener =null;
  public interface OnTextFocusChangedListener {
    void onTextFocusChanged(boolean textViewHasFocus);
  }
  public void setOnTextFocusChangedListener(OnTextFocusChangedListener l) {
    mOnTextFocusChangedListener =l;
  }
  public SignedNumberPicker(Context context) {
    super(context);
    init();
  }
  public SignedNumberPicker(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
  }
  @Override
  public void addView(View child) {
    super.addView(child);
    init(child);
  }
  @Override
  public void addView(View child, int index, android.view.ViewGroup.LayoutParams params) {
    super.addView(child, index, params);
    init(child);
  }
  @Override
  public void addView(View child, android.view.ViewGroup.LayoutParams params) {
    super.addView(child, params);
    init(child);
  }
  private void init(View view) {
    if(view instanceof EditText){
      tv=((EditText) view);
    }
  }

  @Override
  public void setMinValue(int minValue) {
    if (minValue<0) {
      nToAdd=-minValue;
      super.setMaxValue(super.getMaxValue()+nToAdd);
    }
    mMinValue=minValue;
    super.setMinValue(minValue+nToAdd);
  }

  @Override
  public void setMaxValue(int maxValue) {
    if (maxValue+nToAdd<0) {
      nToAdd=-maxValue;
    }
    mMaxValue=maxValue;
    super.setMaxValue(maxValue+nToAdd);
  }

  @Override
  public void setValue(int value) {
    super.setValue(value+nToAdd);
  }
  public int getRealValue() {
    if (tv.hasFocus()) textToValue();
    return super.getValue()-nToAdd;
  }
  private NumberPicker.OnValueChangeListener mOnValueChangedListener=null;
  @Override
  public void setOnValueChangedListener(OnValueChangeListener onValueChangedListener) {
    mOnValueChangedListener=onValueChangedListener;
    super.setOnValueChangedListener(new OnValueChangeListener() {
      @Override
      public void onValueChange(NumberPicker picker, int oldVal, int newVal) {
        mOnValueChangedListener.onValueChange(picker,oldVal-nToAdd,newVal-nToAdd);
      }
    });
  }

  //copied from NumberPicker source & modified
  //https://github.com/aosp-mirror/platform_frameworks_base/blob/master/core/java/android/widget/NumberPicker.java
  class InputTextFilter extends NumberKeyListener {

    // XXX This doesn't allow for range limits when controlled by a
    // soft input method!
    public int getInputType() {
      return InputType.TYPE_CLASS_TEXT;
    }

    @Override
    protected char[] getAcceptedChars() {
      return DIGIT_CHARACTERS;
    }

    @Override
    public CharSequence filter(
        CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
      // We don't know what the output will be, so always cancel any
      // pending set selection command.
      /*if (mSetSelectionCommand != null) {
        mSetSelectionCommand.cancel();
      }*/
      //and we will ignore this

      CharSequence filtered = super.filter(source, start, end, dest, dstart, dend);
      if (filtered == null) {
        filtered = source.subSequence(start, end);
      }

      String result = String.valueOf(dest.subSequence(0, dstart)) + filtered
          + dest.subSequence(dend, dest.length());

      if ("".equals(result)) {
        return result;
      }
      int val = getSelectedPos(result);

    /*
     * Ensure the user can't type in a value greater than the max
     * allowed. We have to allow less than min as the user might
     * want to delete some numbers and then type a new number.
     * And prevent multiple-"0" that exceeds the length of upper
     * bound number.
     */
      if (val > mMaxValue || (result.length() > String.valueOf(mMaxValue).length() && result
          .length()>String.valueOf(mMinValue).length()) || (val<0 && val<mMinValue)) {
        return "";
      } else {
        return filtered;
      }
    }
    private int getSelectedPos(String value) {
      try {
        return Integer.parseInt(value);
      } catch (NumberFormatException e) {
        // Ignore as if it's not a number we don't care
      }
      return mMinValue;
    }
    private final char[] DIGIT_CHARACTERS = new char[] {
        //THE MINUS SIGN
        '-',
        // Latin digits are the common case
        '0', '1', '2', '3', '4', '5', '6', '7', '8', '9',
        // Arabic-Indic
        '\u0660', '\u0661', '\u0662', '\u0663', '\u0664', '\u0665', '\u0666', '\u0667', '\u0668'
        , '\u0669',
        // Extended Arabic-Indic
        '\u06f0', '\u06f1', '\u06f2', '\u06f3', '\u06f4', '\u06f5', '\u06f6', '\u06f7', '\u06f8'
        , '\u06f9',
        // Hindi and Marathi (Devanagari script)
        '\u0966', '\u0967', '\u0968', '\u0969', '\u096a', '\u096b', '\u096c', '\u096d', '\u096e'
        , '\u096f',
        // Bengali
        '\u09e6', '\u09e7', '\u09e8', '\u09e9', '\u09ea', '\u09eb', '\u09ec', '\u09ed', '\u09ee'
        , '\u09ef',
        // Kannada
        '\u0ce6', '\u0ce7', '\u0ce8', '\u0ce9', '\u0cea', '\u0ceb', '\u0cec', '\u0ced', '\u0cee'
        , '\u0cef'
    };
  }
} 
```

像“正常” NumberPicker 一样使用它，但可以随意使用负数。而不是`getValue()`, use `getRealValue()`, 因为`getValue()`NumberPicker (!?) 在内部使用。我还添加了`setOnTextFocusChangedListener()`方法，这可能便于禁用 OK 按钮等。

更新：如果你想阻止用户输入相同的值，只要显示键盘，你可以禁用 OK 按钮，并听取值的变化：

```
dialog.getButton(AlertDialog.BUTTON_POSITIVE).setEnabled(false);
numberPicker.setOnTextFocusChangedListener(new SignedNumberPicker.OnTextFocusChangedListener() {
  @Override
  public void onTextFocusChanged(boolean textViewHasFocus) {
    if (textViewHasFocus) {
      dialog.getButton(AlertDialog.BUTTON_POSITIVE).setEnabled(false);
    } else {
      dialog.getButton(AlertDialog.BUTTON_POSITIVE).setEnabled(numberPicker.getRealValue()!=currentValue);
    }
  }
});
numberPicker.setOnValueChangedListener(new NumberPicker.OnValueChangeListener() {
  @Override
  public void onValueChange(android.widget.NumberPicker picker, int oldVal, int newVal) {
    dialog.getButton(AlertDialog.BUTTON_POSITIVE).setEnabled(newVal!=currentValue);
  }
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-16T11:44:21.070

[这](http://www.quietlycoding.com/?p=5)是您正在寻找的示例。

```
private static final int DEFAULT_MAX = 200;
private static final int DEFAULT_MIN = 0;// change this acc to your requirement 
```

# facebook-like - 如何使用 Webdriver 点击 Facebook Like 按钮

> ID：14357528
> 
> 赞同：5
> 
> 时间：2013-01-16T11:37:07.557
> 
> 标签：facebook-like, webdriver, capybara

我正在尝试使用 Webdriver 单击 Facebook Like 按钮。[您可以在此页面上](http://developers.facebook.com/docs/reference/plugins/like/)看到一个“赞”按钮示例。

切换到 iframe 后，我尝试过：

```
page.execute_script("document.querySelector('.pluginConnectButton > div:first-child button').click()") 
```

切换到 iframe 后，此脚本可在 Firebug 和 Chrome 开发人员工具中运行。

但它在 FirefoxDriver 和 ChromeDriver 中不起作用（脚本通过但按钮未更改为单击一个）

如何使用 Webdriver 单击此按钮？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T18:22:23.057

虽然这对我有用，但它似乎很脆弱。我不得不使用一些 javascript 来获取 iframe 的 id，因为 FB 在每个页面加载时都会更改 id。幸运的是，他们没有改变 iframe 的类。

```
id = page.evaluate_script("$('.fb_ltr').attr('id');")
within_frame(id) do
  page.first(:css, '.pluginButton').click
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:30:34.473

这为你工作。

```
if(driver.findElement(By.cssSelector("BODY")).getText().matches("^[\\s\\S]*Like[\\s\\S]*$")== true) {
driver.findElement(By.xpath("//form[@id='u_0_1']/div/div/div/button")).click();
}
else{
System.out.println("Unable to click Like button on page");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-01T08:52:27.657

我正在使用页面对象 gem。这是我点击 Like fb 按钮的方式：

```
 in_frame(:class =>"fb_ltr") do |frame|
    button(:fb_btn, :css => "#facebook div.pluginButton.pluginButtonSmall.pluginButtonInline.pluginConnectButtonDisconnected button" , :frame => frame)
  end 
```

...

```
fb_btn_element.when_present.click 
```

# asp.net-mvc - 未找到 Nancy Razor Viewengine

> ID：14357529
> 
> 赞同：4
> 
> 时间：2013-01-16T11:37:13.033
> 
> 标签：asp.net-mvc, razor, nancy, viewengine

我正在使用带有 Razor 视图的 Nancy 0.14.1.0。只要我在 VS 2010 中使用内部网络服务器，一切都会好起来的。现在我确实将这些东西部署到了运行 IIS 6 的网络服务器上。路线是

```
 Get["/api/v1/admin/clients"] = parameters => {
            return View["Admin/view", new DataAccessLayer(Context).admin_get_clients()];
        }; 
```

它返回一个客户列表（在这里无关紧要）。

服务器上的目录结构是

```
斌
内容
共享
   |--- _Layout.cshtml
意见
   |--- 管理员
         |--- 视图.cshtml

```

我抓住的例外是

```
Nancy.ViewEngines.ViewNotFoundException：无法找到视图“Admin/view”当前可用的视图引擎扩展：sshtml、html、htm 检查的位置：,,,,views/api/Admin/view,api/Admin/view,views/Admin /view,Admin/view 根路径：C:\Inetpub\Websites\Test\api\ 

```

我有点担心的是“可用的视图引擎扩展”条目：我在这里缺少 cshtml ......虽然我猜我的 web.config 包含正确的条目：

```
<compilation debug="true" targetFramework="4.0">
  <buildProviders>
    <add extension=".cshtml" type="Nancy.ViewEngines.Razor.BuildProviders.NancyCSharpRazorBuildProvider, Nancy.ViewEngines.Razor.BuildProviders" />
    <add extension=".vbhtml" type="Nancy.ViewEngines.Razor.BuildProviders.NancyVisualBasicRazorBuildProvider, Nancy.ViewEngines.Razor.BuildProviders" />
  </buildProviders>

</compilation> 
```

背后的南希模块工作正常：我添加了路线

```
 Get["/api/v1/admin/clients/{id}"] = parameters => {
            return "Hello";
        }; 
```

并得到“你好”...

有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:51:48.793

您尚未部署 Nancy razor 包，或者由于某种原因无法加载它（可能缺少依赖项），这就是它没有列出文件类型的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T13:47:59.740

关闭，但 Nancy 剃须刀包装并没有丢失。部署了 Nancy razor 软件包。唯一缺少的是 System.Razor.dll。我也部署了它并完成了:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-12T08:04:45.120

我发现 Nancy 模板项目仍然存在这个问题。您需要删除并重新添加 Nancy nuget 引用。启用包还原似乎还不够。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-21T17:44:32.253

我从一个引用了单独的 DLL“web”项目的控制台应用程序中遇到了自托管 Nancy 的问题。尽管控制台项目引用了 Web 项目，并且 Web 项目引用了适当的 razor 库，但 Razor DLL 并未被复制到输出文件夹。

由于 razor DLL 是动态加载的，因此它们没有被复制到控制台的输出文件夹中。更多关于此处潜在问题的讨论：[“复制本地”是否可传递项目引用？](https://stackoverflow.com/questions/26163368/is-copy-local-transitive-for-project-references/26163944#26163944)

# xpath - Xquery / Xpath /* 是什么意思：

> ID：14357533
> 
> 赞同：2
> 
> 时间：2013-01-16T11:37:22.660
> 
> 标签：xpath, xquery

Xquery / Xpath /* 是什么意思：

（：这里 $patterns 看起来像`<pattern match="something" replace="else" />`:)

```
declare function local:transform($text as text(), $patterns as element(pattern)*) {
   if(not($patterns)) then 
      $text
   else
      let $patternsremaining := $patterns[position() > 1],
          $modifiedtext := replace($text, $pattern/@match, $pattern/@replace)
      return 
         if($local:language="French" and not($patterns[@match='le'])) then (
             local:transform($modifiedtext, ($patternsremaining, <pattern match="Londres" replace="London" />))
      )
      else(
         local:transform($modifiedtext, $patternsremaining)
      )
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T13:31:45.403

```
/* 
```

**是一个 XPath 表达式，它选择根（文档）节点的所有子元素**。

它相当于：

```
/child::* 
```

由于任何格式正确的 XML 文档都必须恰好有一个顶部元素（文档节点的子节点），因此上述两个表达式只选择了一个元素——XML 文档的顶部元素。

# asp.net-mvc-3 - 如何在 asp.net mvc 中检查请求的设备信息

> ID：14357539
> 
> 赞同：0
> 
> 时间：2013-01-16T11:37:41.890
> 
> 标签：asp.net-mvc-3, web-applications

我必须制作我的网站的移动版本，我已经为移动设备制作了单独的网络表单，现在我必须检查用户是否从移动设备或 PC 登录，并且在此基础上，我必须在移动设备或 PC 网络表单上进行路由

谁能建议我如何检查已登录的设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:40:35.507

设备将在 HTTP 标头中向您传递一个 UserAgent 字符串。

此字符串标识尝试访问您网站的设备类型。例如，iPhone 5 将返回

Mozilla/5.0 (iPhone; CPU iPhone OS 5_0 像 Mac OS X) AppleWebKit/534.46 (KHTML, 像 Gecko) 版本/5.1 Mobile/9A334 Safari/7534.48.3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:40:58.847

下面的代码给出了一个想法

```
string strUserAgent = Request.UserAgent.ToString().ToLower();
if (strUserAgent != null)
{
if (Request.Browser.IsMobileDevice == true || strUserAgent.Contains("iphone") ||
strUserAgent.Contains("blackberry") || strUserAgent.Contains("mobile") ||
strUserAgent.Contains("windows ce") || strUserAgent.Contains("opera mini") ||
strUserAgent.Contains("palm"))
{
Response.Redirect("{desiredpage}.aspx");
}
} 
```

# objective-c - 无法将 NSArray 添加到 NSDictionary

> ID：14357541
> 
> 赞同：0
> 
> 时间：2013-01-16T11:37:47.817
> 
> 标签：objective-c, multidimensional-array, nsmutablearray, nsmutabledictionary

我有一个多维 NSDictionary，并且在向其中添加数组时遇到问题。我的字典结构如下所示：（由 NSLogging 字典获取）

```
{
    Downloaded =     {
        017315 = "2013-01-16 11:26:33 +0000";
    };
    Projects =  (
        {
            Docs = { };
            "Last Downloaded" = "2013-01-16 10:16:05 +0000";
            "Project Name" = "Baring Australia Fund";
        }
    );
} 
```

我正在尝试向“Docs”字典添加一个新数组。我正在使用的代码是

```
[[[[myDict objectForKey:@"Projects"] objectAtIndex:0] objectForKey:@"Docs"] setObject:[NSMutableArray array] forKey:@"test"]; 
```

这失败并出现以下错误

由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSArrayM objectForKey:]: unrecognized selector sent to instance 0x7592df0”

如果我尝试使用下面的代码将 Dictionary 添加到 Docs 键而不是数组，它可以工作。

```
[[[[myDict objectForKey:@"Projects"] objectAtIndex:0] objectForKey:@"Docs"] setObject:[NSMutableDictionary dictionary] forKey:@"test"]; 
```

此外，我还可以将新数组添加到第一个“项目”数组项，而不是添加到其中的 Docs 对象。

我做错了什么，为什么这不起作用？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:43:08.367

`[[[myDict objectForKey:@"Projects"] objectAtIndex:0] objectForKey:@"Docs"]`这是给你一个数组。

你在这个数组中使用 setObject:forKey: 。

`[someArray setObject: forKey:]`是您的编译器看到并抛出错误的内容。

编辑：

我检查了你的代码，没问题。并且上述错误来自其他一些地方。

我模仿了你的代码，它工作正常。看看，我测试了什么：

```
 NSMutableDictionary *myDict=[NSMutableDictionary new];

NSMutableDictionary *downloadedDict=[NSMutableDictionary dictionaryWithObject:@"2013-01-16 11:26:33 +0000" forKey:@"017315"];
[myDict setObject:downloadedDict forKey:@"Downloaded"];

NSMutableDictionary *docsDict=[NSMutableDictionary new];
NSMutableDictionary *emptyDict=[NSMutableDictionary new];
[docsDict setObject:emptyDict forKey:@"Docs"];
[docsDict setObject:@"2013-01-16 10:16:05 +0000" forKey:@"Last Downloaded"];
[docsDict setObject:@"Baring Australia Fund" forKey:@"Project Name"];
NSMutableArray *projects=[NSMutableArray new];
[projects addObject:docsDict];

[myDict setObject:projects forKey:@"Projects"];

// NSLog(@"%@",mainDict);
//[[[[myDict objectForKey:@"Projects"] objectAtIndex:0] objectForKey:@"Docs"] setObject:[NSMutableDictionary dictionary] forKey:@"test"];
[[[[myDict objectForKey:@"Projects"] objectAtIndex:0] objectForKey:@"Docs"] setObject:[NSMutableArray array] forKey:@"test"];

NSLog(@"%@",myDict); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:44:39.933

考虑到您存储的数据的复杂性（以及您和我显然无法应对这种复杂性），我认为您最好的方法是将其重新实现为自定义对象，其中对象属性以更具体的方式实现。

它很可能会立即支付所需的努力。

**更新**一些示例对象（我没有完整的要求，所以这将是不完整的）：

```
@interface Project : NSObject
{
    NSString *_name;
    NSMutableArray *_documents;   // Array of document names?
    NSDate *_lastDownloaded;
}

// @property for each ivar

@end

@interface Projects : NSObject
{
    NSDate *_lastDownloaded;
    NSMutableArray *_projects;     // Array of Project objects
}

// @property for each ivar

@end 
```

# android - 每行具有动态 LinearLayout 的 CWAC-EndlessAdpater

> ID：14357543
> 
> 赞同：0
> 
> 时间：2013-01-16T11:37:50.520
> 
> 标签：android, android-listview, android-linearlayout, android-adapter, cwac-endless

我已经从 commonsware 实现了 EndlessAdapter [，](https://github.com/commonsguy/cwac-endless)目前我只有一个 EditText 。

但是我需要并且我正在尝试实现的是一个动态的 LinearLayout ，它包含各种数量的元素。LinearLayout 的一行应在左侧保存描述，在右侧保存此描述的值。

EndlessAdapter 和列表已经正常工作，但我不知道我应该在哪里以及如何在适配器内实现动态 LinearLayout 以及如何传递我想要插入的数据（我已经将描述和值存储在一个自定义类的 ArrayList）。

# javascript - d3js 可缩放冰柱数据

> ID：14357545
> 
> 赞同：0
> 
> 时间：2013-01-16T11:37:54.997
> 
> 标签：javascript, json, d3.js, icicle-diagram

我想修改d3js的可[缩放冰柱图以包含我自己的数据。](http://bl.ocks.org/1005873 "可缩放的冰柱")但是，我找不到“readme.json”文件来修改数据，图形也没有在本地呈现。我在哪里可以找到这个文件，或者如果我创建自己的 json 文件，数据应该如何格式化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:44:10.390

我从 javascript 调试器
文件中获得了 JSON，您可以从 url [http://bl.ocks.org/d/1005873/readme.json获得](http://bl.ocks.org/d/1005873/readme.json)

```
{
  "flare": {
    "analytics": {
      "cluster": {
        "AgglomerativeCluster": 3938,
        "CommunityStructure": 3812,
        "HierarchicalCluster": 6714,
        "MergeEdge": 743
      },
      "graph": {
        "BetweennessCentrality": 3534,
        "LinkDistance": 5731,
        "MaxFlowMinCut": 7840,
        "ShortestPaths": 5914,
        "SpanningTree": 3416
      },
      "optimization": {
        "AspectRatioBanker": 7074
      }
    },
    "animate": {
      "Easing": 17010,
      "FunctionSequence": 5842,
      "interpolate": {
        "ArrayInterpolator": 1983,
        "ColorInterpolator": 2047,
        "DateInterpolator": 1375,
        "Interpolator": 8746,
        "MatrixInterpolator": 2202,
        "NumberInterpolator": 1382,
        "ObjectInterpolator": 1629,
        "PointInterpolator": 1675,
        "RectangleInterpolator": 2042
      },
      "ISchedulable": 1041,
      "Parallel": 5176,
      "Pause": 449,
      "Scheduler": 5593,
      "Sequence": 5534,
      "Transition": 9201,
      "Transitioner": 19975,
      "TransitionEvent": 1116,
      "Tween": 6006
    },
    "data": {
      "converters": {
        "Converters": 721,
        "DelimitedTextConverter": 4294,
        "GraphMLConverter": 9800,
        "IDataConverter": 1314,
        "JSONConverter": 2220
      },
      "DataField": 1759,
      "DataSchema": 2165,
      "DataSet": 586,
      "DataSource": 3331,
      "DataTable": 772,
      "DataUtil": 3322
    },
    "display": {
      "DirtySprite": 8833,
      "LineSprite": 1732,
      "RectSprite": 3623,
      "TextSprite": 10066
    },
    "flex": {
      "FlareVis": 4116
    },
    "physics": {
      "DragForce": 1082,
      "GravityForce": 1336,
      "IForce": 319,
      "NBodyForce": 10498,
      "Particle": 2822,
      "Simulation": 9983,
      "Spring": 2213,
      "SpringForce": 1681
    },
    "query": {
      "AggregateExpression": 1616,
      "And": 1027,
      "Arithmetic": 3891,
      "Average": 891,
      "BinaryExpression": 2893,
      "Comparison": 5103,
      "CompositeExpression": 3677,
      "Count": 781,
      "DateUtil": 4141,
      "Distinct": 933,
      "Expression": 5130,
      "ExpressionIterator": 3617,
      "Fn": 3240,
      "If": 2732,
      "IsA": 2039,
      "Literal": 1214,
      "Match": 3748,
      "Maximum": 843,
      "methods": {
        "add": 593,
        "and": 330,
        "average": 287,
        "count": 277,
        "distinct": 292,
        "div": 595,
        "eq": 594,
        "fn": 460,
        "gt": 603,
        "gte": 625,
        "iff": 748,
        "isa": 461,
        "lt": 597,
        "lte": 619,
        "max": 283,
        "min": 283,
        "mod": 591,
        "mul": 603,
        "neq": 599,
        "not": 386,
        "or": 323,
        "orderby": 307,
        "range": 772,
        "select": 296,
        "stddev": 363,
        "sub": 600,
        "sum": 280,
        "update": 307,
        "variance": 335,
        "where": 299,
        "xor": 354,
        "_": 264
      },
      "Minimum": 843,
      "Not": 1554,
      "Or": 970,
      "Query": 13896,
      "Range": 1594,
      "StringUtil": 4130,
      "Sum": 791,
      "Variable": 1124,
      "Variance": 1876,
      "Xor": 1101
    },
    "scale": {
      "IScaleMap": 2105,
      "LinearScale": 1316,
      "LogScale": 3151,
      "OrdinalScale": 3770,
      "QuantileScale": 2435,
      "QuantitativeScale": 4839,
      "RootScale": 1756,
      "Scale": 4268,
      "ScaleType": 1821,
      "TimeScale": 5833
    },
    "util": {
      "Arrays": 8258,
      "Colors": 10001,
      "Dates": 8217,
      "Displays": 12555,
      "Filter": 2324,
      "Geometry": 10993,
      "heap": {
        "FibonacciHeap": 9354,
        "HeapNode": 1233
      },
      "IEvaluable": 335,
      "IPredicate": 383,
      "IValueProxy": 874,
      "math": {
        "DenseMatrix": 3165,
        "IMatrix": 2815,
        "SparseMatrix": 3366
      },
      "Maths": 17705,
      "Orientation": 1486,
      "palette": {
        "ColorPalette": 6367,
        "Palette": 1229,
        "ShapePalette": 2059,
        "SizePalette": 2291
      },
      "Property": 5559,
      "Shapes": 19118,
      "Sort": 6887,
      "Stats": 6557,
      "Strings": 22026
    },
    "vis": {
      "axis": {
        "Axes": 1302,
        "Axis": 24593,
        "AxisGridLine": 652,
        "AxisLabel": 636,
        "CartesianAxes": 6703
      },
      "controls": {
        "AnchorControl": 2138,
        "ClickControl": 3824,
        "Control": 1353,
        "ControlList": 4665,
        "DragControl": 2649,
        "ExpandControl": 2832,
        "HoverControl": 4896,
        "IControl": 763,
        "PanZoomControl": 5222,
        "SelectionControl": 7862,
        "TooltipControl": 8435
      },
      "data": {
        "Data": 20544,
        "DataList": 19788,
        "DataSprite": 10349,
        "EdgeSprite": 3301,
        "NodeSprite": 19382,
        "render": {
          "ArrowType": 698,
          "EdgeRenderer": 5569,
          "IRenderer": 353,
          "ShapeRenderer": 2247
        },
        "ScaleBinding": 11275,
        "Tree": 7147,
        "TreeBuilder": 9930
      },
      "events": {
        "DataEvent": 2313,
        "SelectionEvent": 1880,
        "TooltipEvent": 1701,
        "VisualizationEvent": 1117
      },
      "legend": {
        "Legend": 20859,
        "LegendItem": 4614,
        "LegendRange": 10530
      },
      "operator": {
        "distortion": {
          "BifocalDistortion": 4461,
          "Distortion": 6314,
          "FisheyeDistortion": 3444
        },
        "encoder": {
          "ColorEncoder": 3179,
          "Encoder": 4060,
          "PropertyEncoder": 4138,
          "ShapeEncoder": 1690,
          "SizeEncoder": 1830
        },
        "filter": {
          "FisheyeTreeFilter": 5219,
          "GraphDistanceFilter": 3165,
          "VisibilityFilter": 3509
        },
        "IOperator": 1286,
        "label": {
          "Labeler": 9956,
          "RadialLabeler": 3899,
          "StackedAreaLabeler": 3202
        },
        "layout": {
          "AxisLayout": 6725,
          "BundledEdgeRouter": 3727,
          "CircleLayout": 9317,
          "CirclePackingLayout": 12003,
          "DendrogramLayout": 4853,
          "ForceDirectedLayout": 8411,
          "IcicleTreeLayout": 4864,
          "IndentedTreeLayout": 3174,
          "Layout": 7881,
          "NodeLinkTreeLayout": 12870,
          "PieLayout": 2728,
          "RadialTreeLayout": 12348,
          "RandomLayout": 870,
          "StackedAreaLayout": 9121,
          "TreeMapLayout": 9191
        },
        "Operator": 2490,
        "OperatorList": 5248,
        "OperatorSequence": 4190,
        "OperatorSwitch": 2581,
        "SortOperator": 2023
      },
      "Visualization": 16540
    }
  }
} 
```

# cocoa - 如何实现表示具有可变单元大小的视频缩略图的容器视图？

> ID：14357548
> 
> 赞同：0
> 
> 时间：2013-01-16T11:38:00.420
> 
> 标签：cocoa, nscollectionview, ikimagebrowserview

我正在 mac os x 上开发 cocoa 应用程序，它允许用户导入视频剪辑并从这些视频剪辑中制作电影。这里我需要处理高度自定义的视图..（请参阅附件）.. .

我的要求是：

->>用户添加视频剪辑，它将被添加到容器视图（包含所有插入的视频剪辑）并表示为缩略图。->>每个缩略图项目都应根据视频剪辑的持续时间具有不同的宽度（例如：如果我认为容器视图宽度为 120 像素并且等于 2 分钟（120 秒）......那么如果用户添加持续时间为 10 秒的视频剪辑，然后缩略图宽度应为 10 像素）.. 为此，我需要缩略图项（单元格）大小应在运行时根据传入的视频剪辑持续时间变化... ->>滑块播放位置在用户播放主要电影时查看进度的功能..

我的方法：

->> 我创建了具有 IKImageBrowserView （缩略图容器）和 NSScrollView 的 NSView ->> 和自定义 playloc 按钮，该按钮根据进度值对其位置进行动画处理...

问题：->>现在我无法为每个项目设置不同的单元格大小......因为它是 IKImageBrowserView 的成员函数......

如果我调用 [imageBrowser setCellSize:]; 那么它适用于所有单元格......不适用于特定单元格......

任何人都可以建议如何解决这个问题..？

是否可以为 IKImageBrowserView 中的每个单元格设置可变单元格大小？

NSCollectionView 呢？是否可以为 NSCollectionView 中的每个单元格设置不同的大小？..

谁能帮我解决这个问题....

谢谢和问候， 穆图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:55:52.263

似乎使用 NSCollectionView 应该是可能的，

请参阅以下链接 [Apple Example about How to use NSCollectionView](https://developer.apple.com/library/mac/#samplecode/IconCollection/Introduction/Intro.html#//apple_ref/doc/uid/DTS10004477)
[Search for How do I change the size of the NSCollectionView subviews?](http://cocoadev.com/wiki/NSCollectionView)

希望您会阅读这两个，如果我有机会，我会玩它并为您提供示例。

这也可能有助于[另一个例子](https://stackoverflow.com/questions/1627917/resize-view-of-nscollectionviewitem?rq=1)

# django - 使用一个可编辑字段按行列出对象（模型表单集）

> ID：14357551
> 
> 赞同：1
> 
> 时间：2013-01-16T11:38:07.180
> 
> 标签：django, django-models, django-forms

我有一组包含这些字段的对象：

*   ID
*   名称（字符域）
*   位置（查菲尔德）
*   所有者（ForeignKey（用户））

我想创建一个表单集，像这样在行中列出这些对象

> ID名称位置所有者（下拉）

我希望前 3 个字段不是输入字段，而只是打印文本，只有第 4 个字段（所有者）是用户可以编辑的下拉字段。

在 ModelFormset 中，这样做的唯一方法似乎是将字段设置为只读，但它们仍会呈现为禁用字段，这不正是我需要的。

对此的任何想法都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:27:03.743

在表单的模板中，您可以直接引用字段的值，如下所示：

```
{{ form.id.value }}
{{ form.name.value }}
{{ form.location.value }}
{{ form.owner }} 
```

所有者字段将呈现为输入，其他字段将呈现为值。

# git - Git 和 SourceTree - 在服务器问题上安装

> ID：14357553
> 
> 赞同：0
> 
> 时间：2013-01-16T11:38:16.853
> 
> 标签：git, webserver, atlassian-sourcetree

我想在本地开发，然后用git提交到服务器。

所以我已经在我的电脑上安装了 git，现在我正在尝试使用 SourceTree 应用程序访问我的服务器上的项目。

我去了存储库设置并添加了网址，但是当我尝试获取时，我得到：

```
git -c diff.mnemonicprefix=false -c core.quotepath=false fetch proyectName
fatal: http://servername.com/ftp/proyectName/proyectName/info/refs not found: did you run git update-server-info on the server?
Completed with errors, see above 
```

当然我错过了一些明显的东西！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:46:55.877

在错误中说您需要在服务器上执行：

```
git update-server-info 
```

请参阅此问题以获取更多信息：[git update-server-info 做什么？](https://stackoverflow.com/questions/2085402/what-does-git-update-server-info-do)

# prolog - 错误：未定义的过程：(:-)/2

> ID：14357556
> 
> 赞同：3
> 
> 时间：2013-01-16T11:38:28.803
> 
> 标签：prolog, prolog-toplevel

我是**Prolog**的新手，我正在尝试在**SWI-Prolog** shell 上设置规则，例如 -

```
listensToMusic(X) :- happy(X). 
```

但它提示——

```
ERROR: Undefined procedure: (:-)/2 
```

我使用 SWI-Prolog 版本 6.2.6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T11:46:10.720

SWI-Prolog 不接受顶层的新规则和事实，它只接受查询。

通常通过将规则写入文本文件（例如`rules.pl`）来添加规则，然后使用以下命令将其加载到 SWI-Prolog 中：

```
?- [rules]. 
```

文件的绝对路径可以这样使用：

```
?- ['C:/Program Files/pl/demo/likes']. 
```

您可以通过发出`[user].`、输入您的规则并以`EOF`（通常为 Ctrl-D）结尾来输入规则：

```
?- [user].
|: listensToMusic(X) :- happy(X).
|: <EOF> 
true. 
```

关于这个主题有一个详细的常见问题解答：[错误：未定义的过程：(:-)/1 | (:-)/2 | (?-)/1](http://www.swi-prolog.org/FAQ/ToplevelMode.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:47:40.743

我的 Prolog 技能充其量是尘土飞扬，但据我所知，您应该在文件中声明内容，然后查阅文件以将其加载到工作区中，然后使用 shell 询问有关工作区的问题。在 shell 中声明某些东西需要一个断言。

# android - CakePhp 1.3 如何处理作为 HTTP post 请求接收的数据？

> ID：14357558
> 
> 赞同：0
> 
> 时间：2013-01-16T11:38:36.510
> 
> 标签：android, rest, cakephp, login, http-post

我想创建一个 android 应用程序，它将连接到 CakePhp 网站并在它们之间传递数据。因此，我创建了一个 HTTP 发布请求，将我的“电子邮件”和“密码”传递给 CakePHP loginsController 进行登录验证，我使用下面显示的 android 代码。

* * *

```
 List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
 nameValuePairs.add(new BasicNameValuePair("email", email));
 nameValuePairs.add(new BasicNameValuePair("password", password));
 try
{
  HttpClient httpclient = new DefaultHttpClient();
   HttpPost httppost = new HttpPost("http://10.0.2.2/Mebuddie/logins/login");

   httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs, HTTP.UTF_8));
   HttpResponse response = httpclient.execute(httppost);
   HttpEntity entity = response.getEntity();
   InputStream is = entity.getContent();
   BufferedReader reader =
            new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
    StringBuilder sb = new StringBuilder();
    String line = "";
             while ((line = reader.readLine()) != null) 
                       {
                       sb.append(line + "n");
                       }
       is.close();
        Log.i("response", sb.toString());

       }
              catch (Exception e) 
                 {

                    e.printStackTrace();
                 } 
```

如果有人可以回答我的问题，请帮助我。这是我对所有 Cakephp 和 Android 专家的要求。我可以在 LoginsController 上写什么来处理这个请求？

**我在我的 cakephp 中的 Logins_controller 下的 login() 函数中编写了一些代码，如下所示，**

```
 public function login() {

            pr($_POST);

        if ($this->data && 
                isset($this->data['email']) && isset($this->data['password']))
        {
            $arrUser  = $this->Login->find('all',array(
                    'conditions'=>array(
                        'email'=> $this->data['username'],
                        'password' => $this->Auth->password($this->data['password']),
                    )
                )
            );

             if (count($arrUser) > 0)
            {
                $arrReturn['status'] = 'SUCCESS';
                $arrReturn['data'] =
                      array( 'loginSuccess' => 1,'id' => $arrLogin[0]['Login']['id'] );
                 //logged in
            }
            else {
                $arrReturn['status'] = 'NOTLOGGEDIN';
                $arrReturn['data'] = array( 'loginSuccess' => 0 );
            }
                echo json_encode($arrReturn);
        } 
```

**公关（$_POST）；函数将发布请求的内容发送回 android 应用程序。当我在eclipse ide的logcat中打印响应时，它显示，**

```
 <pre>Array
             (
                 [email] => imransyd.ahmed@gmail.com
                 [password] => Cpa@2011
             ) 
                    </pre> 
```

**连同登录表单中的所有 html 内容。**

**我的问题是，

```
 1.How can i get back  only the email & password without the  html content.

       2\. how to return the values in the $arrReturn from the cakephp to my android          application 
please give me an example code for return data from cakephp to android** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:10:25.067

`$this->request->data['email']`并且`$this->request->data['password']`应该包含您的数据。

如果您不确定数据是如何发布的，请`pr($this->request->data)`在您的登录操作中发回 $_POST 的内容：

例如，您的登录操作可能如下所示：

```
<?php
public function login()
{
    if ($this->request->is('post'))
    {
        $this->Auth->fields = array(
            'username' => 'email',
            'password' => 'password'
        );
        if ($this->Auth->login($this->request->data))
        {
            //logged in
        }
    }
} 
```

对于 CakePHP 版本 1.3 替换`$this->request->data`为`$this->data`和替换`is('post')`为`isPost()`.

你的问题：

> 1.  我怎样才能只取回没有 html 内容的电子邮件和密码。

```
echo $this->data['email'];
echo $this->data['password']
exit; 
```

或`echo json_encode($this->data);`用于更结构化的响应

> 2.  如何将 $arrReturn 中的值从 cakephp 返回到我的 android 应用程序 请给我一个示例代码，用于从 cakephp 返回数据到 android

使用`json_encode($arrReturn);`. 有关如何处理 json 数据的示例，请参阅[如何在 Android 中解析 JSON 。](https://stackoverflow.com/questions/9605913/how-to-parse-json-in-android)

# iphone - 将 Twitter 集成到 iOS 应用程序的最佳方式是什么？

> ID：14357562
> 
> 赞同：4
> 
> 时间：2013-01-16T11:38:55.743
> 
> 标签：iphone, ios, objective-c, twitter

我不认为我会问这样的问题，但我别无选择。在问它之前，我一直在谷歌搜索和尝试实现 twitter，`MGTwitterEngine`我已经浪费了大量时间，所以我需要已经在 iOS 应用程序中处理过 Twitter 的人的建议。我相信这对 SO 来说是一个合适的问题。

好的，我所需要的只是为用户提供从我的应用程序内部简单地发推文的能力。看起来很简单，但实际上：

1) Apple 提供的社交框架不适合我，因为在发布到 Twitter 之前，用户必须已经在设置中登录到他们的 Twitter 帐户。

2）使用`MGTwitterEngine`和`SA_OauthTwitterEngine`非常困难！我浪费了一整天的时间来实现授权和推文，这不是我需要的，因为这个功能可以在一台设备上运行（在其他设备上我无法授权应用程序），甚至在这个设备上它也能正常工作. 如果我没有得到这个问题的适当答案，我可能会被迫浪费整整一周的时间来让它工作（或不工作），我别无选择。

所以我的问题是——没有其他简单的方法可以将 Twitter 集成到 iOS 应用程序中吗？你是怎么做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:47:34.043

iOS 5 内置了对 twitter 框架的支持。

按照这个[链接](http://www.raywenderlich.com/5519/beginning-twitter-in-ios-5)。它以一种很好的方式解释了 Twitter 的集成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-12T09:16:33.990

[这](https://dev.twitter.com/twitter-kit/ios)是在 iOS 应用程序中集成 twitter 的最佳方式。

[您可以在Fabric](https://dev.twitter.com/fabric/overview)的帮助下即时集成 twitter 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T11:48:23.460

然后有一个内置框架来集成 twitter[看到这个。](https://dev.twitter.com/docs/ios)如果你也支持 ios 4，也可以使用 DETwitter 引擎。

# css - 颜色编码顶栏菜单选项卡 Zurb Foundation

> ID：14357563
> 
> 赞同：1
> 
> 时间：2013-01-16T11:39:00.357
> 
> 标签：css, drop-down-menu, sass, zurb-foundation

我对此有点陌生，所以希望这会对比我自己更多的人有所帮助。

我正在使用 Zurb 的 Foundation，并且需要对顶栏菜单中的每个选项卡进行颜色编码，类似于[USA Today](http://www.usatoday.com/)的菜单（但带有下拉菜单）。在 setting.scss 文件中有 topBar 属性（高度、颜色等）的选项，这会影响下拉列表的所有选项卡。

您将如何为 topBar 菜单创建子部分，每个子部分都有自己的颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:11:46.817

您可以为所有菜单项添加类，或使用[`:nth-child`伪](https://developer.mozilla.org/en-US/docs/CSS/%3anth-child)类为每个菜单项分配不同的边框颜色。

# c# - 使用 c# for windows 8 应用程序访问 mysql 数据库中的数据

> ID：14357564
> 
> 赞同：-1
> 
> 时间：2013-01-16T11:39:01.407
> 
> 标签：c#, windows-8

如何使用 C# 在 Windows 8 应用程序中访问 Mysql 数据库中的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:23:11.120

在 Windows 8 应用程序中，我们可以指定例如连接字符串来读取存储在服务器端数据库中的数据。这不仅会带来巨大的安全风险（想象一下，您的连接字符串存在于下载您的应用程序的数千台设备上！），将它放在那里也毫无用处。WinRT 不知道与（远程）数据库对话。这意味着 API 中没有 ADO.NET 或 LINQ-To-SQL 类。

所以你可以像OData一样占用数据服务

OData 有一个名为 MySQLOData 的 MySQL 连接器，它是一个代码生成器工具，可与 PHP 的 OData Producer 库一起创建代码以实现任何 MySQL 数据库的 OData 提供程序源。该工具是开源的（BSD 许可），使用 100% 跨平台 PHP 编写，可以在 Linux、Windows 或 Mac OS 环境中运行。

下载： http: [//odatamysqlphpconnect.codeplex.com/](http://odatamysqlphpconnect.codeplex.com/)
文档： http: [//odatamysqlphpconnect.codeplex.com/](http://odatamysqlphpconnect.codeplex.com/)
文章：http: [//blogs.msdn.com/b/interoperability/archive/2012/02/09/open-源-odata-tools-for-mysql-and-php-developers.aspx](http://blogs.msdn.com/b/interoperability/archive/2012/02/09/open-source-odata-tools-for-mysql-and-php-developers.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:58:32.837

[此处的此链接](http://dev.mysql.com/downloads/connector/odbc/ "这个链接")将为您提供可以导入到项目中的 DLL。之后它与您连接到 sql-server 的操作完全相同。

例如：

```
SqlConnection connection;
//would become now
MySqlConnection connection; 
```

# android - Activity 泄露了最初在这里注册的 IntentReceiver。您是否错过了对 unregisterReceiver() 的调用？

> ID：14357566
> 
> 赞同：68
> 
> 时间：2013-01-16T11:39:06.697
> 
> 标签：android

```
01-16 16:52:42.211: E/ActivityThread(2529): Activity com.Civilcourage.CivilcurageSplash has leaked IntentReceiver com.google.android.gcm.GCMBroadcastReceiver@405282e0 that was originally registered here. 

Are you missing a call to unregisterReceiver()? 
```

上述错误的原因是什么？如何避免？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2014-01-07T21:41:34.863

**不要依赖 onStop()**，[因为](http://developer.android.com/reference/android/app/Activity.html#onStop())：

> 请注意，在调用 onPause() 方法后系统没有足够内存来保持活动进程运行的低内存情况下，可能永远不会调用此方法

更多关于 Activity 生命周期[的信息](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)。

在 onPause() 中取消注册您的接收器：

```
@Override
protected void onPause() {
    super.onPause();

    unregisterReceiver(yourReceiver);
} 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-01-16T11:43:14.573

您需要在活动停止时注销您的接收器：

```
@Override
protected void onStop()
{
    unregisterReceiver(yourReceiver);
    super.onStop();
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-10-28T20:16:12.070

您可以`unregister`在收到后立即`broadcastreceiver`

```
 @Override
 public void onReceive(Context context, Intent intent) {
     getActivity().unregisterReceiver(this);
 } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-01-22T01:34:43.000

只是为了补充上面的答案，如果您在 onCreate 中注册了一个接收器，它应该在 onDestroy 中取消注册。如果你在 onResume 上注册了一个接收者，你应该在 onPause 中取消注册它。

> 请注意在哪里注册和取消注册接收器，例如，如果您使用活动的上下文在 onCreate(Bundle) 中注册接收器，则应在 onDestroy() 中取消注册它以防止将接收器泄漏到活动上下文之外。如果你在 onResume() 中注册了一个接收器，你应该在 onPause() 中取消注册它以防止它被多次注册（如果你不想在暂停时接收广播，这可以减少不必要的系统开销）。不要在 onSaveInstanceState(Bundle) 中取消注册，因为如果用户移回历史堆栈，则不会调用它。

[资源](https://developer.android.com/guide/components/broadcasts.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-12-19T08:12:00.790

在取消注册之前，请确保接收者已注册。为此，声明一个布尔值

```
private boolean isReceiverRegistered = false; 
```

然后在调用 registerReceiver() 方法之后，将标志设置`isReceiverRegistered`为 true，如下面的代码片段所示

```
registerReceiver(broadcastReceiver, new IntentFilter("anyString"));
    isReceiverRegistered = true; 
```

那么，在`onPause()`

```
 @Override
protected void onPause() {
    super.onPause();
    if(isReceiverRegistered){
        unregisterReceiver(broadcastReceiver);
        isReceiverRegistered = false;// set it back to false.
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-07-28T01:34:57.087

在 onStop() 上取消注册您的接收器是有效的答案。不要在 onPause() 方法上调用它。

```
@Override
protected void onStop()
{
    unregisterReceiver(yourReceiverName);
    super.onStop();
} 
```

# android - 小部件 minHeight="72dp" 给出 2 行高度

> ID：14357569
> 
> 赞同：11
> 
> 时间：2013-01-16T11:39:11.530
> 
> 标签：android, android-widget

我正在创建一个基本小部件，除了显示一些静态信息之外什么都不做（这对我来说是一个教程演示练习）。

我的小部件提供程序 XML 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:initialKeyguardLayout="@layout/widget"
    android:initialLayout="@layout/widget"
    android:minHeight="72dp"
    android:minWidth="294dp"
    android:updatePeriodMillis="60000" >

    <!-- NOTE 1: -->
    <!-- Widget sizing is done in terms of "blocks" on the screen. -->
    <!-- Each block is 74dp square. -->

    <!-- NOTE 2: -->
    <!-- OLD & WRONG FORMULA used to be: size = (n*74) - 2 -->

    <!-- NOTE 3: -->
    <!-- NEW FORMULA has been UPDATED: size = (n*70) - 30 -->
    <!-- Based on new formula, the size should be 40dp. -->

</appwidget-provider> 
```

我想要一个 4x1 的小部件。即 1 行高。

按照我在许多帖子中看到的公式，height = (rows x 74) -2，我得到一个 72dp 的 minHeight 数字，它应该为我提供 1 行/块的小部件高度。

安装在 4.1.1 上给了我一个 4x2 的小部件。

* * *

从那以后，我想也许我的布局迫使小部件比预期的要大。所以我从我的布局文件中删除了所有内容：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

</RelativeLayout> 
```

仍然是 4x2 - 2 块高。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-16T11:50:07.157

使用的正确高度（对于 1 行/块）是：

```
android:minHeight="40dp" 
```

同样，正确的宽度（4 列/块）是：

```
android:minWidth="250dp" 
```

* * *

我根据这 3 个问题找到了答案（我应该先检查一下……）

*   [带有 TouchWiz 启动器的 ICS 手机上未应用小部件边距？](https://stackoverflow.com/questions/13121009/widget-margins-not-applied-on-ics-phone-with-touchwiz-launcher)

*   [Android 4x1 小部件尺寸](https://stackoverflow.com/questions/12465512/android-4x1-widget-size)

*   [如何在 Android 主屏幕上制作 4x1 大小的小部件？](https://stackoverflow.com/questions/8101955/how-to-make-4x1-size-widget-on-android-homescreen)

* * *

原因由 Artiom Chilaru 在[这个答案中给出](https://stackoverflow.com/a/11289215/383414)

*   公式已更改为 size = (n*70) - 30

他提供了[App Widget Design Guidelines](http://developer.android.com/guide/practices/ui_guidelines/widget_design.html#anatomy_determining_size)的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:42:47.563

尝试`android:layout_margin="8dp"`从布局文件中删除

# android - 随机时间（通知）

> ID：14357570
> 
> 赞同：0
> 
> 时间：2013-01-16T11:39:11.890
> 
> 标签：android, random

我需要生成一个随机日期（小时+分钟）来触发随机通知。什么是最好的方法？构建 2 个随机数（从 0 到 23 小时，从 0 到 59 分钟）并将它们放入变量中？

```
Random generator = new Random();
int b = 23
int random = generator.nextInt(b);
boolean flag = generator.nextBoolean();
x=random; 
```

开始通知：

```
Calendar cal1 = Calendar.getInstance();
cal1.set(Calendar.HOUR_OF_DAY, 05);
cal1.set(Calendar.MINUTE, 00);

Intent intent2 = new Intent(context, Random.class);
PendingIntent random = PendingIntent.getBroadcast(context, 0, intent2, 0);

alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, cal1.getTimeInMillis(),  DateUtils.DAY_IN_MILLIS, random); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:41:39.763

是的....尝试生成两个随机数，例如 0-23 小时和另一个随机数 0-59...然后您可以将这两个随机数组合成一个变量来表示数据和时间

# jquery - 引导菜单顶部词缀

> ID：14357576
> 
> 赞同：11
> 
> 时间：2013-01-16T11:39:38.567
> 
> 标签：jquery, twitter-bootstrap

我正在尝试使用图像和菜单链接下的引导菜单，当它滚动时，菜单会粘在窗口的顶部。

我发现了有趣的引导词缀，并使用了这个线程中的内容： [bootstrap-affix：Div 下面的词缀“跳转”到顶部。如何让它平滑地向后滚动？](https://stackoverflow.com/questions/13540969/bootstrap-affix-div-underneath-affix-jumps-to-top-how-do-i-make-it-smoothly)

问题是当我按下菜单按钮时，选项位于页面的内容文本下方。

我已经为您写了一个小提琴来查看我的问题并尝试解决方案：http: [//jsfiddle.net/mram888/WnPqF/](http://jsfiddle.net/mram888/WnPqF/)

我试图为我的菜单 div 类设置不同的 z-index，但只有在页面滚动并且菜单贴在顶部时才能正常工作。

```
#nav.affix {
    position: fixed;
    top: 0;
    width: 100%;
    z-index:2;
}

#nav > .navbar-inner {
    border-left: 0;
    border-right: 0;
    border-radius: 0;
    -webkit-border-radius: 0;
    -moz-border-radius: 0;
    -o-border-radius: 0;
}

.nav-wrapper {
    z-index: 2;
} 
```

![在此处输入图像描述](../Images/f9ca05bbe171e8d2ec3301c67e360fd1.png) ![在此处输入图像描述](../Images/5507fa783a565946843cea1ab1cd49df.png) ![在此处输入图像描述](../Images/22d1884f930d4d447ac612ab10349456.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T12:56:17.330

您需要将 应用于`z-index`not `#nav`.nav-wrapper：

```
#nav { 
  position: relative;
  z-index: 2; 
} 
```

演示：http: [//jsfiddle.net/t7pL3/](http://jsfiddle.net/t7pL3/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-16T13:46:47.093

您的另一个变体：http: [//jsfiddle.net/panchroma/6P5sF/](http://jsfiddle.net/panchroma/6P5sF/)

这里的行为与以前略有不同。导航栏在粘贴之前随页面滚动，当打开折叠菜单时，它会下推页面内容。

我删除了您的 javascript 并通过将以下内容添加到您的 nav-wrapper div 来 使用[数据属性调用所有内容：](http://getbootstrap.com/javascript/#affix)

```
<div id="nav-wrapper" data-spy="affix" data-offset-top="100"> 
```

data-offset-top 是在粘贴菜单之前需要滚动的距离。

我还对你的 CSS 做了一个小改动：

```
#nav-wrapper.affix {
  top: 0;
  width: 100%
} 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T12:59:27.017

看来这可以通过替换您提供的 CSS 来实现

```
#nav {
    width: 100%;
    position:fixed;
}

#nav.affix {
    top: 0;
}

#nav > .navbar-inner {
    border-left: 0;
    border-right: 0;
    border-radius: 0;
    -webkit-border-radius: 0;
    -moz-border-radius: 0;
    -o-border-radius: 0;
} 
```

主要区别在于，这里`#nav`涵盖了两种情况`#nav.affix`和`#nav.affix-top`

看到[这个 jsfiddle](http://jsfiddle.net/WnPqF/10/)。

编辑：当`#nav`' 的位置被*继承*时，问题就出现了。如果您按照我的建议*修复*它，或者按照其他帖子的建议将其设置为*relative*，您的问题将得到解决。

# objective-c - NSMetadataQuery 的 NSPredicate(s) 以匹配包含目标日期的 kMDItemAccessedDates (array)？

> ID：14357577
> 
> 赞同：0
> 
> 时间：2013-01-16T11:39:41.263
> 
> 标签：objective-c, cocoa, nspredicate, spotlight, nsmetadataquery

**更新：**我找到了答案，尽管可能还有更好的方法 - 请参阅下面添加的答案。

* * *

聚光灯导入器导入元数据，元数据是访问项目的日期数组。看起来像这样：

```
kMDItemAccessedDates               = (
    "2012-06-18 07:00:00 +0000",
    "2013-01-10 08:00:00 +0000",
    "2013-01-15 08:00:00 +0000"
) 
```

我想查询在用户输入的特定日期访问的任何这些文件，但我没有找到正确的语法来执行此操作。想知道有没有可能做...

第一个问题是用户输入代表一天的日期，而不是日期和时间。

似乎我需要搜索那一天的任何日期，所以合乎逻辑：`ADATE >= user_day_start && ADATE <= user_day_end`

现在元数据中有一组日期，所以如果这些日期中的任何一个在 user_date 日期内，我真的希望它匹配。

如果这有效，那就太好了：

```
NSDate * date = [NSDate dateWithNaturalLanguageString: inWhenString];
NSDate * endDate = [NSDate dateWithTimeInterval: 86400 sinceDate: date];

predicate = [NSPredicate predicateWithFormat: 
              @"kMDItemAccessedDates between {%@, %@}", date, endDate]; 
```

但这会引发异常：

```
Exception detected while handling key input.
2013-01-16 03:12:57.517 Chatty[96974:403] Unknown type of NSComparisonPredicate 
  given to NSMetadataQuery 
  (kMDItemAccessedDates BETWEEN {CAST(379540800.000000, "NSDate"),
  CAST(379627200.000000, "NSDate")}) 
```

并且似乎它可能只适用于单个日期而不是数组。像这样将“ANY”添加到格式字符串中：`"ANY kMDItemAccessedDates between {%@, %@}"`......没有帮助，仍然抛出异常。

试过这个，它没有抛出异常，但也没有真正起作用：

```
NSPredicate *p1 = [NSPredicate predicateWithFormat: @"kMDItemAccessedDates >= %@", date ];
NSPredicate *p2 = [NSPredicate predicateWithFormat: @"kMDItemAccessedDates <= %@", endDate ];
predicate = [NSCompoundPredicate andPredicateWithSubpredicates: [NSArray arrayWithObjects: p1, p2, nil]]; 
```

想知道是否有人对如何使这项工作有任何想法......或者知道这是不可能的（比如必须全部获得它们，然后在内存中进行过滤或其他东西；真的希望不是这样 - 它可能是一个很长的列表！）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:48:38.667

因此，又花了几个小时深入研究互联网搜索结果并尝试了一些东西，然后我*就*开始工作了。

```
NSDate * userDate = [NSDate dateWithNaturalLanguageString: inWhenString];
NSDateComponents * userDateComponents = [[NSCalendar currentCalendar] components: NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit fromDate: userDate];
NSDate * dayDate = [[NSCalendar currentCalendar] dateFromComponents: userDateComponents];
dNSLog(@"date %@", dayDate );
NSString * formatStr = [NSDateFormatter dateFormatFromTemplate: @"yyyy-MM-dd" options: 0 locale: nil];
NSDateFormatter * formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat: formatStr];

NSString * dayStr = [formatter stringFromDate: dayDate];
dayStr = [dayStr stringByAppendingString: @"*"];
dNSLog(@"dayString: %@", dayStr );
NSPredicate *p1 = [NSPredicate predicateWithFormat: @"%K >= CAST(%f, \"NSDate\")", @"kMDItemAccessedDates", [dayDate timeIntervalSinceReferenceDate] ];
NSPredicate *p2 = [NSPredicate predicateWithFormat: @"%K <= CAST(%f, \"NSDate\")", @"kMDItemAccessedDates", [dayDate timeIntervalSinceReferenceDate] + 86400.0f ];
predicate = [NSCompoundPredicate andPredicateWithSubpredicates: @[p1, p2]]; 
```

整个方法可能存在其他问题（基于应用程序如何更新此日期数组），这可能需要我完全做其他事情，但这似乎回答了如何仅获取在 a 上访问的项目的原始问题特定的日子。

关键是`CAST(%f, \"NSDate\")`我相信。

可能还有更好的方法，但我想我会把它放在这里，以防其他人四处挖掘以寻找任何线索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:58:01.590

好的，我认为这是您想要的方法。我在查看 kMDItemContentTypeTree 属性的文件文件夹上对此进行了测试，该属性是一个字符串数组，例如您的情况。基本上我将创建一个 BEGINSWITH 搜索，它将搜索该数组的值。

BEGINSWITH 搜索是 LIKE 搜索，但搜索词的末尾附加了“*”。我的想法是，您获取用户输入的日期并使用“YYYY-MM-DD”形式创建一个搜索字符串，以获取我在另一篇文章中展示的年/月/日。然后，您从这些值以该格式创建一个字符串。

现在您可以创建您的谓词并从您的 userDateString 开始这样的查询。您会注意到我使用 %K 插入 kMDItemAccessedDates 属性。

```
NSString* userDateString = @"2013-01-15";

NSString* queryKeyString = @"kMDItemAccessedDates";
NSString* searchDate = [userDateString stringByAppendingString:@"*"];
NSPredicate* predicate = [NSPredicate predicateWithFormat:@"%K like %@", queryKeyString, searchDate];

// folderQuery is your NSMetadataQuery
[folderQuery setSearchScopes:[NSArray arrayWithObject:folderPath]]; // the folder you want to search
[folderQuery setPredicate:predicate];
[folderQuery startQuery]; 
```

# jquery - 样式化 a：访问过的链接

> ID：14357588
> 
> 赞同：2
> 
> 时间：2013-01-16T11:40:40.190
> 
> 标签：jquery, css

我希望在文章列表中设置 a:visited 链接的样式。目前，这可以很好地将我的 CSS 中的颜色应用于 a:visited 链接，但是，我需要更多的东西。访问时，我想在文章标题旁边添加一个小点。

我做了一些研究，看起来除了对 a:visited 链接应用颜色之外的任何东西都不起作用（由于隐私问题，背景/背景图像支持已被删除？？）所以我想知道是否有人有任何提示或想法？jQuery？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:04:23.603

如果您想通过脚本而不是纯 CSS 设置样式，jQuery 不支持伪类选择器，例如`:visited`. 您必须改用纯 javascript

```
$(document).ready(function()
{
  $("#StyleAnchors").click(function()
  {
      //works
      $("a").css("background-color", 'yellow');
      //doesn't works
      $("a:visited").css("background-color", 'red');

  //works
  document.styleSheets[0].addRule('a:visited', 'color: green');
  //document.styleSheets[0].insertRule('a:visited{background-color: #00f;}');
  });
}); 
```

[http://jsfiddle.net/prJUt/](http://jsfiddle.net/prJUt/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:44:45.697

这行得通，我知道这是一个事实，因为我已经尝试过了。虽然它似乎在 Chrome 中不起作用，但它在 IE 中起作用，所以它不是 CSS 的问题。

```
<style>
a:link
{
    color: #f00;
}
a:visited
{
    color: #0f0;
}
a:hover
{ 
    color: #00f;
}
a:active
{
    color: #ff0;
}
</style>
<a href="x" target="_blank">X</a> 
```

所以在 IE 中试试这个：

```
a:visited:before
{
     content: ".";
} 
```

如果这还不够，您将不得不向您的链接添加某种点击事件并从那里设置它们的样式，例如（使用 jQuery，虽然丑陋）：

```
<a href="javascript:void(0)" onclick="$(this).html('.Link');">Link</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T11:52:28.777

您好，您可以为访问过的链接提供图片。例如，

```
a:visited {
     padding-left: 14px;
     background: url(images/checkmark.gif) left no-repeat;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T11:47:19.767

您可以在`<span>`元素之后放置一个`<a>`元素。隐藏这个元素。并制作一个像这样的 css 选择器 a:visited+span... 这样的东西。有关 css 选择器的更多信息，请 使用 jquery访问[http://www.w3schools.com/cssref/css_selectors.asp您可以使用选择器获得更多选择，例如父级.. 但您肯定会在网络上找到这些东西。](http://www.w3schools.com/cssref/css_selectors.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-02T01:04:10.393

首先，您应该更改通知用户链接已被访问的方法的原因：[https ://stackoverflow.com/a/10320628/2943403](https://stackoverflow.com/a/10320628/2943403)

由于更大的浏览器行业已采取具体措施通过限制访问链接的修改/样式方式来应对安全漏洞，因此如果您推出自己的 javascript 实现，它可能会引起用户对您的页面/站点上的狡猾的怀疑。

此外，只要您的“未访问”文本颜色不是灰色，我认为`visited`将链接样式设置为灰色应该相当直观。出于这个原因，我会敦促你（和未来的 SO 读者）应用这个简单的纯 CSS 解决方案，并放弃任何不同风格的想法。

```
a{color:red;}

a:visited{color:grey;}
```

```
<a href="#">run snippet & click link to see effect</a>
```

# c++ - 是不是在对象与结构的联合中，只包含一个this对象，它们一定会相互匹配？

> ID：14357592
> 
> 赞同：0
> 
> 时间：2013-01-16T11:40:51.373
> 
> 标签：c++

是不是按照标准，在对象与结构的联合中，只包含一个这个对象，它们肯定会相互匹配？以下代码是否适用于所有类型？

```
#include <iostream>
using namespace std;

struct T {
  int a;
  float b;
  // many other types...
};

union T_union {
 T t1;
 struct T_owner {
  T t;
 } t2;
};

int main() {
    T_union un;
    un.t1.a = 10;
    cout << un.t2.t.a << endl; // I can always do that?

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:00:50.743

9.5 [class.union] 内容如下：

> 一个特殊的保证是为了简化联合的使用：如果一个标准布局联合包含几个共享一个公共初始序列的标准布局结构（9.2），并且如果这个标准布局联合类型的对象包含以下之一标准布局结构，允许检查任何标准布局结构成员的公共初始序列。

结构`T`和`T_owner`是标准布局结构，因为它们只有标量 (for `T`) 或标准布局结构 (for `T_owner`) 类型的成员，并且没有违反 9/7 中指定的其他（与本讨论无关）约束。

9.2/19 规定何时有一个共同的初始序列：

> 如果对应的成员具有布局兼容的类型，并且两个成员都不是位域或两者都是一个或多个初始成员序列的具有相同宽度的位域，则两个标准布局结构共享一个共同的初始序列。

我将这一段解释为实际上*没有*共同的初始序列：第一个成员`T`是 a `int`，而第一个成员`T_owner`是 a `T`。根据标准的定义，AFAIK 这两种类型与布局不兼容，所以从技术上讲，答案是“你不能那样做”。

你当然可以做的是：

```
union T_union {
    T t1;
    T t2;
};

int main() {
    T_union un;
    un.t1.a = 10;
    cout << un.t2.a << endl;
    return 0;
} 
```

当然，在实践中，任何编译器都不太可能在这里做正确的事情。

# jquery-ui - 具有高最大值（长比例）的 Jquery ui 滑块未按预期步进

> ID：14357593
> 
> 赞同：1
> 
> 时间：2013-01-16T11:40:51.590
> 
> 标签：jquery-ui, jquery-plugins, slider, jquery-ui-slider

希望有人可以为我阐明这一点...

我有一个 jquery UI 滑块，它需要大量数字（例如 0 - 600,000）。将 step 选项设置为 1（默认设置），我看到滑块返回的数字不是增量/减量 1（在 0 - 600,000 示例中，我得到的增量为 508）。

我觉得这是预期的行为，但是，我需要了解为什么会发生这种情况（而且我不是一个数学家！），以便弄清楚如何让它为我的目的工作。

请问有人可以帮我吗？下面的 Cf 代码 - 我正在使用范围选项：

```
$( "#slider-range" ).slider({
        range: true,
        min: 0,
        max: 600000,
        values: [ 0, 600000 ],
        step:1,
        slide: function( event, ui ) {//Triggered on every mouse move during slide
            console.log(ui.values[ 0 ]+' and '+ui.values[ 1 ]);
            //$( "#amount" ).val( "$" + ui.values[ 0 ] + " - $" + ui.values[ 1 ] );
            //ui.value : represents the value that the handle will have as a result of the current movement
        }
    }); 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:01:08.730

这基本上取决于滑块的宽度。

当鼠标移动时，小部件根据新鼠标位置和前一个鼠标位置之间的距离计算增量。这个距离不能小于一个像素。

因此，如果您的滑块范围扩展到 600,000 个单位，但小部件只有 100 个像素宽（例如），那么将鼠标移动一个像素将导致 600,000 / 100 的增量，即 6,000 个单位。

# python - python中的堆使用什么数据结构

> ID：14357594
> 
> 赞同：1
> 
> 时间：2013-01-16T11:40:52.917
> 
> 标签：python, data-structures, heap

我正在为课程编写一个自定义堆实现，`Udacity`并且需要一个通过堆索引和元素键返回元素度量值的堆。

我最终得到了一个包含`tuples (Metric, Key)`.

但是为了通过键获得正确的元素，我必须创建一个单独的映射并保持它对堆中每次更改的有效性。

`heapup(heap, i)`所以最后，我不得不将 map 传递给所有函数，而不是使用带有两个参数的函数 - `heapup(heap, i, map)`。

我想知道是否有更简单的方法可以通过程序、列表和字典来做到这一点。还是需要 Heap 对象将 Map 隐藏在里面？

```
 def heapup(L, i, map):

    if i == 0: return i # we reached the top!
    if i >= len(L): return i
    if L[parent(i)] > L[i]:
       # print "going up"
        (L[i], L[parent(i)]) = (L[parent(i)], L[i])
        map[L[i][1]] = i
        map[L[parent(i)][1]] = parent(i)
        return up_heapify(L, parent(i), map)
    else:
     #   print "going down"
        if leaf(L,i): return i
        if one_child(L,i): return i # we could only come this way
        if L[i] > L[left(i)]: # compare with left child
            (L[i], L[left(i)]) = (L[left(i)], L[i])
            map[L[i][1]] = i
            map[L[left(i)][1]] = left(i)
            return left(i)
        if L[i] > L[right(i)]: # compare with right child
            (L[i], L[right(i)]) = (L[right(i)], L[i])
            map[L[i][1]] = i
            map[L[right(i)][1]] = right(i)
            return right(i) 
```

我想摆脱该函数中的映射，但仍然能够通过它们的键从堆中获取项目值，我现在可以这样做：

```
item = heap[map[key]] 
```

**例如：**

如果

```
L = [(3,'A'), (5, 'D'), (4, 'G') ...] 
```

然后

```
map = {'A':0, 'D':1, 'G': 2, ...} 
```

所以我可以得到这样一个元素的值：

```
L[map['G']] 
```

这会给我 4

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-06T17:56:43.113

使用 heapq [http://docs.python.org/2/library/heapq.html](http://docs.python.org/2/library/heapq.html)和描述：

“这个模块提供了堆队列算法的实现，也称为优先队列算法。”

# html - 如何使用 CSS 向我的表格添加文本阴影

> ID：14357596
> 
> 赞同：0
> 
> 时间：2013-01-16T11:40:56.147
> 
> 标签：html, css, text, shadow

我有一个使用[这样](http://i.imgur.com/LP3Wq.jpg)的表格的设计。

就像标题图片一样，我想在那张黑色桌子内的文字周围添加一个漂亮的光晕。

我尝试在网上搜索有关 CSS 文本阴影的信息（例如[，关于 CSS text-shadow 的这篇文章](http://line25.com/articles/using-css-text-shadow-to-create-cool-text-effects)）。

但是，当我将它们放入我的页面时，我似乎无法让它们在表格内工作，或者根本无法工作。

不知道我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:26:03.980

你必须使用“text-shadow”（即 text-shadow: 2px 2px 5px #999;）看看[这里](http://www.w3schools.com/cssref/css3_pr_text-shadow.asp)的参数定义。这是代码，你也可以在这里试试：http: [//jsfiddle.net/Salaros/EczY5/82/](http://jsfiddle.net/Salaros/EczY5/82/)

```
<html>
  <head>
  <style>
    html, body {
      width: 100%;
      height: 100%;
      text-align: center;
    }
    body {
      background-color: #000;
      background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAO0lEQVQYlWNgYGD4TyRGcIx1jeEYp0JkRTgUM8AF0RWhKUYVwMVmwGUtFutR3YjOJs8z6B7C4j7iFQIAm8p5b8pC31AAAAAASUVORK5CYII=
      ) repeat;
    }
    div#wrapper {
      margin: auto;
      width: 50%;
      min-height: 100%;
      background-color: #000;
      box-shadow: 15px 0px 10px -5px #888, -15px 0px 10px -5px #888;
    }
    div#wrapper p {
      font-size: 25px;
      color: #FFF;
      text-shadow: 2px 2px 5px #999;
    }
  </style>
  </head>  
  <body>
    <div id="wrapper">
      <br />
      <p>Here you go!</p>
      <a href="http://stackoverflow.com/questions/14357596/how-to-add-a-text-shadow-to-my-table-using-css">Go back to the question</a>
    </div>
  </body>
</html> 
```

# php - 解析 XML，使用 SimpleXMLElement 在 PHP 中获取节点

> ID：14357600
> 
> 赞同：0
> 
> 时间：2013-01-16T11:41:18.313
> 
> 标签：php, xml, simplexml

我必须将 XML 文件从我的供应商转换为 CSV 版本（用于 Magento Store）。

我编写了简单的 php 脚本来做到这一点，但我无法弄清楚它为什么不起作用（我有其他供应商，但他们的 XML 版本要简单得多。

但重点是：

我有这个 XML

```
<pasaz:Envelope xmlns:pasaz="http://schemas.xmlsoap.org/soap/envelope/">
    <pasaz:Body>
        <loadOffers xmlns="urn:ExportB2B">
            <offers>
                <offer>
                    <id>9</id>
                    <name>
                        <![CDATA[ Luneta celownicza Light Stream 4,5-14x44 30 mm AO ]]>
                    </name>
                    <price>2299</price>
                    <url>
                        <![CDATA[
http://kolba.pl/luneta-celownicza-light-stream-4-5-14x44-30-mm-ao-p9.html
]]>
                    </url>
                    <categoryId>
                        <![CDATA[ Lunety wiatrówkowe ]]>
                    </categoryId>
                    <description>
                        <![CDATA[
description
]]>
                    </description>
                    <image>
                        <![CDATA[
http://kolba.pl/media/images/products/xl_org/p00009.jpg
]]>
                    </image>
                    <availability>1</availability>
                </offer>
                <offer>
                    <id>61</id>
                    <name>
                        <![CDATA[ Szyna- podwyższenie 2 częściowe 11/11 BKL-166 MB ]]>
                    </name>
                    <price>145</price>
                    <url>
                        <![CDATA[
http://kolba.pl/szyna-podwyzszenie-2-czesciowe-11-11-bkl-166-mb-p61.html
]]>
                    </url>
                    <categoryId>
                        <![CDATA[ Montaże ]]>
                    </categoryId>
                    <description>
                        <![CDATA[
description
]]>
                    </description>
                    <image>
                        <![CDATA[
http://kolba.pl/media/images/products/xl_org/p00061.jpg
]]>
                    </image>
                    <availability>1</availability>
                </offer>
            </offers>
        </loadOffers>
    </pasaz:Body>
</pasaz:Envelope> 
```

我正在使用这个脚本：

```
$plik=file_get_contents('kolba.xml');
$plik=utf8_encode($plik);
$movies = new SimpleXMLElement($plik);
$stala_czesc='"admin";"base";"Default";"simple";'; 
$stala_czesc2=';"Żaden";0.0000;';
$stala_czesc3='"Not Visible Individually";1;"Włączone"'."\n";   
foreach ($movies->offer as $product) 
{
    //echo '<br>Przetwarzam';
    $wynik="";
    $wynik=$stala_czesc;
    $nazwa=$product->name;
    $nazwa=str_replace('"',"",$nazwa);
    $nazwa = preg_replace("/[^[:alnum:][:punct:] -]/","",$nazwa);
    $wynik.='"'.$product->id.'_kolba";"'.$nazwa.'";
    '.number_format(intval($product->price),4,'.','').';
    '.number_format(intval($product->price),4,'.','').';
    '.number_format(intval($product->price),4,'.','').$stala_czesc2.$product->availability.';'.$stala_czesc3;
    echo '<br>';
    echo $wynik;
} 
```

但是`FOR`迭代器永远不会启动，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:04:29.060

您遇到的问题是由于命名空间的信封/正文，这是一个肮脏的黑客，至少可以获取您的数据；

```
$movies = new SimpleXMLElement($plik);
$movies = $movies->children('http://schemas.xmlsoap.org/soap/envelope/');
$offers = $movies->children()->loadOffers->offers; 
```

并循环报价

```
foreach ($offers->offer as $product) { .. } 
```

# sql - TSQL SELECT DISTINCT 最后按 ASC NULLS 排序

> ID：14357601
> 
> 赞同：1
> 
> 时间：2013-01-16T11:41:26.303
> 
> 标签：sql, tsql, select, distinct, sql-order-by

有：

```
SELECT DISTINCT TOP 100 * FROM mytable ORDER BY date ASC 
```

如何使日期中的空值最后出现？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T11:42:51.060

一些数据库支持最后一个 NULL 的语法，`order by`而有些则不支持。所以，我使用：

```
select distinct top 100 *
from MyTable
order by  (case when date is null then 1 else 0 end), date asc 
```

或者，如果我不想输入太多：

```
order by coalesce(date, '9999-12-12')  -- or something like that 
```

您还可以将 distinct 放在子查询中：

```
select top 100 *
from (select distinct *
      from mytable
     ) t
order by (case when date is null then 1 else 0 end), date asc 
```

但是，假设它`date`在列列表中，第一个版本应该可以工作。

# java - 如何使用 Gson 从 json 构建协议缓冲区消息？

> ID：14357608
> 
> 赞同：0
> 
> 时间：2013-01-16T11:41:37.360
> 
> 标签：java, json, gson, protocol-buffers

我一直在尝试使用 gson 从 json 字符串生成协议缓冲区消息。有谁知道如果可以做到这一点？

我已经尝试过：

```
Gson gson = new Gson();
Type type = new TypeToken<List<PROTOBUFFMESSAGE.Builder>>() {}.getType();
List<PROTOBUFFMESSAGE.Builder> list = (List<PROTOBUFFMESSAGE.Builder>) gson.fromJson(aJsonString, type); 
```

~~和~~

 ~~```
Gson gson = new Gson();
Type type = new TypeToken<List<PROTOBUFFMESSAGE>>() {}.getType();
List<PROTOBUFFMESSAGE> list = (List<PROTOBUFFMESSAGE>) gson.fromJson(aJsonString, type); 
```~~  ~~json 中的消息使用与协议缓冲区中相同的名称，即：

```
message PROTOBUFFMESSAGE {
   optional string this_is_a_message = 1;
   repeated string this_is_a_list = 2;
} 
```

将导致一个json：

```
[
    {
        "this_is_a_message": "abc",
        "this_is_a_list": [
            "123",
            "qwe"
        ]
    },
    {
        "this_is_a_message": "aaaa",
        "this_is_a_list": [
            "foo",
            "bar"
        ]
    }
] 
```

尽管生成了具有正确数量的 PROTOBUFFMESSAGE 的列表，但它们包含的所有字段都为空，所以我不确定这是否是映射问题、反射系统未检测到 protobuffs 字段或其他问题。如果有人知道如何做到这一点，那就太好了。顺便说一句，我在这里谈论的是 java。

# 编辑：

将json中的名称更改为：

```
 {
            "thisIsAMessage_": "abc",
            "thisIsAList_": [
                "123",
                "qwe"
            ]
        } 
```

使反序列化发生。除了抛出的列表之外，它确实有效：

```
java.lang.IllegalArgumentException: Can not set com.google.protobuf.LazyStringList field Helper$...etc big path here...$PROTOBUFFMESSAGE$Builder.thisIsAList_ to java.util.ArrayList 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T05:49:16.370

听起来您必须使用它`GsonBuilder`来构建一个`Gson`对象，并为对象编写和注册一个类型适配器`com.google.protobuf.LazyStringList`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-08T16:11:36.350

`Gson`而不是通过构造函数初始化对象，而是使用这个片段：

```
GsonBuilder builder = new GsonBuilder();
builder.registerTypeAdapter(LazyStringList.class, new TypeAdapter<LazyStringList>() {

  @Override
  public void write(JsonWriter jsonWriter, LazyStringList strings) throws IOException {

  }

  @Override
  public LazyStringList read(JsonReader in) throws IOException {
    LazyStringList lazyStringList = new LazyStringArrayList();

    in.beginArray();

    while (in.hasNext()) {
      lazyStringList.add(in.nextString());
    }

    in.endArray();

    return lazyStringList;
  }
}); 
```~~

# android - Android webView ChromeClient onProgress

> ID：14357609
> 
> 赞同：0
> 
> 时间：2013-01-16T11:41:39.640
> 
> 标签：android

在 onProgressChanged(WebView view, int progress) 回调上加载网页时如何获取资源 url？我在这里需要它，因为从缓存加载时，onloadresource 不会在已缓存的资源上调用。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:46:42.140

试试这个代码：

```
final ProgressBar Pbar;
 final TextView txtview = (TextView)findViewById(R.id.tV1);
 Pbar = (ProgressBar) findViewById(R.id.pB1);

MyView.setWebChromeClient(new WebChromeClient() {
      public void onProgressChanged(WebView view, int progress) 
      {
         if(progress < 100 && Pbar.getVisibility() == ProgressBar.GONE){
             Pbar.setVisibility(ProgressBar.VISIBLE);
             txtview.setVisibility(View.VISIBLE);
         }
         Pbar.setProgress(progress);
         if(progress == 100) {
             Pbar.setVisibility(ProgressBar.GONE);
             txtview.setVisibility(View.GONE);
         }
      }
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:50:45.163

此代码段可能有助于显示中间进度：

```
 Button btnLoad = (Button) findViewById(R.id.btn_load);
     btnLoad.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
             EditText etUrl = (EditText) findViewById(R.id.et_url);
              mWvUrl.loadUrl(etUrl.getText().toString());
              activity.setProgressBarIndeterminateVisibility(true);
        }
    });

     mWvUrl.setWebViewClient(new WebViewClient(){
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {

                /** This prevents the loading of pages in system browser */
                return false;
            }

            /** Callback method, executed when the page is completely loaded */
            @Override
            public void onPageFinished(WebView view, String url) {
                 super.onPageFinished(view, url);

                 Toast.makeText(getBaseContext(),
                                "Page loaded Completely",
                                Toast.LENGTH_SHORT).show();

                /** Hiding Indeterminate Progress Bar in the title bar*/
                activity.setProgressBarIndeterminateVisibility(false);

            }

        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T11:48:04.613

当您使用时，`WebChromeClient`您可以根据您的目的覆盖`onProgressChanged(WebView view, int progress)`此方法，这样的事情就可以完成。

```
yourWebViewObject.setWebChromeClient(new WebChromeClient() {
        public void onProgressChanged(WebView view, int progress)
        {
            currentActivity.setTitle("Loading...");
            currentActivity.setProgress(progress * 100);

            if(progress == 100)
                currentActivity.setTitle(R.string.app_name);
        }
}); 
```

对于示例程序，您可以[使用 Android 的 WebView、WebChromeClient 和 WebViewClient 来加载网页并显示进度](http://www.giantflyingsaucer.com/blog/?p=1331)。

# c# - XamlParseException 由于 System.Core 在自己的 VSTemplate (VS2010)

> ID：14357612
> 
> 赞同：2
> 
> 时间：2013-01-16T11:41:42.120
> 
> 标签：c#, visual-studio-2010, silverlight, reference, visual-studio-templates

中午好，亲爱的社区。

我得到了构建一个包含 2 个项目、一个 web 项目和一个 silverlight 项目的 VSTemplate 的练习。

解决方案VSTemplate：

```
<VSTemplate Version="2.0.0" Type="ProjectGroup" xmlns="http://schemas.microsoft.com/developer/vstemplate/2005">
<TemplateData>[...]</TemplateData>
<TemplateContent>
    <ProjectCollection>
        <ProjectTemplateLink ProjectName="$safeprojectname$_ClientSite">
            ClientSite\MyTemplate.vstemplate
        </ProjectTemplateLink>
        <ProjectTemplateLink ProjectName="$safeprojectname$_Client">
            Client\MyTemplate.vstemplate
        </ProjectTemplateLink>
    </ProjectCollection>
</TemplateContent> 
```

Silverlight-项目 VSTemplate：

```
<VSTemplate Version="3.0.0" xmlns="http://schemas.microsoft.com/developer/vstemplate/2005" Type="Project">
<TemplateContent>
    <Project TargetFileName="$safeprojectname$.csproj" File="Uettingen_Client.csproj" ReplaceParameters="true">
        <Folder Name="dlls" TargetFolderName="dlls">
            <ProjectItem ReplaceParameters="false" TargetFileName="HST.Visualization.Controls.Silverlight.dll">HST.Visualization.Controls.Silverlight.dll</ProjectItem>
            [...]
        </Folder>
        <ProjectItem ReplaceParameters="true" TargetFileName="App.xaml">App.xaml</ProjectItem>
        <ProjectItem ReplaceParameters="true" TargetFileName="App.xaml.cs">App.xaml.cs</ProjectItem>
        <ProjectItem ReplaceParameters="true" TargetFileName="GlobalResources.xaml">GlobalResources.xaml</ProjectItem>
        <ProjectItem ReplaceParameters="true" TargetFileName="Head.xaml">Head.xaml</ProjectItem>
        [...]
        <Folder Name="Properties" TargetFolderName="Properties">
            <ProjectItem ReplaceParameters="true" TargetFileName="AppManifest.xml">AppManifest.xml</ProjectItem>
            <ProjectItem ReplaceParameters="true" TargetFileName="AssemblyInfo.cs">AssemblyInfo.cs</ProjectItem>
        </Folder>
        <Folder Name="Service References" TargetFolderName="Service References">
            <Folder Name="SLAuthenticationServiceReference" TargetFolderName="SLAuthenticationServiceReference">
                <ProjectItem ReplaceParameters="true" TargetFileName="configuration.svcinfo">configuration.svcinfo</ProjectItem>
                <ProjectItem ReplaceParameters="true" TargetFileName="configuration91.svcinfo">configuration91.svcinfo</ProjectItem>
                [...]
            </Folder>
        </Folder>
        <ProjectItem ReplaceParameters="true" TargetFileName="ServiceReferences.ClientConfig">ServiceReferences.ClientConfig</ProjectItem>
        [...]
    </Project>
</TemplateContent> 
```

Silverlight 项目文件：

```
<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0">
    [...]
    <ItemGroup>
        [...]
        <Reference Include="mscorlib" />
        <Reference Include="system" />
        <Reference Include="System.ComponentModel.Composition, Version=2.0.5.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" />
        <Reference Include="System.Core" />
        <Reference Include="System.Net" />
        [...]
    </ItemGroup>
    <ItemGroup>
        <Compile Include="App.xaml.cs">
            <DependentUpon>App.xaml</DependentUpon>
        </Compile>
        <Compile Include="Page1.xaml.cs">
            <DependentUpon>Page1.xaml</DependentUpon>
        </Compile>
        [...]
        <None Include="Properties\AppManifest.xml" />
        <Compile Include="Properties\AssemblyInfo.cs" />
        <None Include="Service References\SLAuthenticationServiceReference\configuration.svcinfo" />
        <None Include="Service References\SLAuthenticationServiceReference\configuration91.svcinfo" />
    [...]
    </ItemGroup>
    <ItemGroup>
        <ApplicationDefinition Include="App.xaml">
            <SubType>Designer</SubType>
            <Generator>MSBuild:Compile</Generator>
        </ApplicationDefinition>
        <Page Include="Page1.xaml">
            <SubType>Designer</SubType>
            <Generator>MSBuild:Compile</Generator>
        </Page>
        [...]
        <WCFMetadata Include="Service References\" />
        <WCFMetadataStorage Include="Service References\SLAuthenticationServiceReference\" />
        <Content Include="ServiceReferences.ClientConfig" />
        <Page Include="SplashWindow.xaml">
            <SubType>Designer</SubType>
            <Generator>MSBuild:Compile</Generator>
        </Page>
    </ItemGroup>
    <ItemGroup>
        <Folder Include="img\" />
    </ItemGroup>
    <Import Project="$(MSBuildExtensionsPath32)\Microsoft\Silverlight\$(SilverlightVersion)\Microsoft.Silverlight.CSharp.targets" />
        <ProjectExtensions>
        <VisualStudio xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
            <FlavorProperties GUID="{A1591282-1198-4647-A2B1-27E5FF5F6F3B}">
                <SilverlightProjectProperties />
            </FlavorProperties>
            <UserProperties VisiWinNETProductType="VisiWin7" VisiWinNETRuntimeType="Standard" VisiWinNETVersion="7.0" VisiWinNETProjectName="$safeprojectname$" />
        </VisualStudio>
    </ProjectExtensions>
</Project> 
```

我把它缩短了，尽管它很简单，但它（几乎）工作得很好。System.Core 有问题：

一旦我编译生成的项目，它会在 App.xaml.cs`InitializeComponents();`的构造函数中引发异常：`App`

```
System.Windows.Markup.XamlParseException:  [Line: 0 Position: 0] ---> System.IO.FileNotFoundException: Could not load file or assembly 'System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e' or one of its dependencies. The system cannot find the file specified. 
```

现在我正在检查 System.Core，我意识到一些奇怪的事情：

*   手工制作的项目当然效果很好。只是不是生成的配置文件。
*   构建成功，这是运行时错误。
*   我生成的解决方案的 System.Core 可用，编译前没有错误。
*   删除 System.Core 后，我无法重新添加它（Visual Studio 不显示任何消息，它根本不添加它。
*   重新启动 Visual Studio 或整个操作系统都无济于事。在生成的项目之后，甚至没有手动添加我的 System.Core。
*   我试图在本地为我的模板/生成的项目提供所需的 System.Core，问题完全相同。
*   我试图清理所有并重建它
*   我尝试在 Uettingen_Client.csproj 中放置`<Reference Include="System.Core, Version=2.0.5.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />`or而不是， 4.0.0.0 部分会错过源代码`<Reference Include="System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />``<Reference Include="System.Core" />`
*   我试图删除 csproj 中的引用条目并插入`<References><Reference><Assembly>System.Core, Version=2.0.5.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</Assembly></Reference></References>`或插入`<References><Reference><Assembly>System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</Assembly></Reference></References>`到项目 VSTemplate 文件的 TemplateContent 部分。这根本不起作用， System.Core 甚至没有显示为条目。
*   我正在使用 WinMerge 将生成的 silverlight 项目与手工项目（我之前转换为模板）进行比较。除了一些格式（如空格）和服务参考之外，项目似乎匹配。
*   如果我尝试添加 4.0.0.0 则会出现冲突警告。
*   在上面的示例中，有时在清除、构建和运行后我没有收到任何错误，但是 silverlight 元素是完全白色的。

有任何想法吗？

# jquery - 将关闭按钮添加到 jquery ui 选项卡？

> ID：14357614
> 
> 赞同：2
> 
> 时间：2013-01-16T11:41:56.097
> 
> 标签：jquery, jquery-ui, tabs, jquery-tabs

默认情况下，jquery ui 选项卡对话框没有关闭按钮作为对话框？怎么加一个呢？我指的关闭按钮是主对话框中的那个，但不是子选项卡，谢谢。

```
$( "#tabs" ).tabs({open: function(event, ui) { $(".ui-dialog-titlebar-close", ui.dialog || ui).show();}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T21:28:55.060

给你...

```
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jQuery UI Tabs - Default functionality</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
  <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
  <script>
  $(function() {
    $( "#tabs" ).tabs();
    $(".ui-closable-tab").live( "click", function() {
        var tabContainerDiv=$(this).closest(".ui-tabs").attr("id");
        var panelId = $( this ).closest( "li" ).remove().attr( "aria-controls" );
        $( "#" + panelId ).remove();
        $("#"+tabContainerDiv).tabs("refresh");
        var tabCount=$("#"+tabContainerDiv).find(".ui-closable-tab").length;
        if (tabCount<1) {
            $("#"+tabContainerDiv).hide();
        }
    });
  });
  </script>
  <style>
  .ui-icon-circle-close {
    cursor:pointer;
  }
  </style>
</head>
<body>

<div id="tabs">
  <ul>
    <li><a href="#tabs-1">Nunc tincidunt</a><span class='ui-icon ui-icon-circle-close ui-closable-tab'></span></li>
    <li><a href="#tabs-2">Proin dolor</a><span class='ui-icon ui-icon-circle-close ui-closable-tab'></span></li>
    <li><a href="#tabs-3">Aenean lacinia</a><span class='ui-icon ui-icon-circle-close ui-closable-tab'></span></li>
  </ul>
  <div id="tabs-1">
    <p>Tab 1 Content</p>
  </div>
  <div id="tabs-2">
    <p>Tab 2 Content</p>
  </div>
  <div id="tabs-3">
    <p>Tab 3 Content</p>
  </div>
</div>
</body>
</html> 
```

演示：[JS FIDDLE](http://jsfiddle.net/muVDN/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-05T15:40:27.713

我知道这是一篇旧文章，但使用最新的 JQuery 可以轻松完成：

[关闭按钮示例](http://jqueryui.com/tabs/#manipulation)

# c# - Ninject Bindings：绑定到不同类型的相同接口。为什么有效？

> ID：14357620
> 
> 赞同：1
> 
> 时间：2013-01-16T11:42:17.143
> 
> 标签：c#, dependency-injection, ninject

我有三个项目

*   应用程序.基础设施
*   Application.A（参考自`Application.Infrastructure`）
*   Application.B（参考自`Application.Infrastructure`）
*   Application.Web（所有参考）

在`Application.Infrastructure`我有一个通用的存储库类

```
public interface IRepository<T>
{
    T FirstOrDefault(Expression<Func<T, bool>> where);
} 
```

在`Application.A`我有这个存储库的实现

```
public class ApplicationARepository<T> : IRepository<T>
{
    private readonly IApplicationADBContext _context;
    public ApplicationARepository(IApplicationADBContext context)
    {
        _context = context;
    }
    // implementation
} 
```

在`Application.B`我有另一个存储库接口的实现

```
public class ApplicationBRepository<T> : IRepository<T>
{
    private readonly IApplicationBDBContext _context;
    public ApplicationBRepository(IApplicationBDBContext context)
    {
        _context = context;
    }
    // implementation
} 
```

在 Application.Web 我使用 Ninject 绑定接口

```
// Bind implementations from Application.A
kernel.Bind<IApplicationADBContext>().To<ApplicationADBContext>().InRequestScope();
kernel.Bind(typeof(IRepository<>)).To(typeof(ApplicationARepository<>));

// Bind implementations from Application.B
kernel.Bind<IApplicationBDBContext>().To<ApplicationBDBContext>().InRequestScope();

// Here should fail. I already binded typeof(IRepository<>) to typeof(ApplicationARepository<>)
kernel.Bind(typeof(IRepository<>)).To(typeof(ApplicationBRepository<>)); 
```

即使我将相同的接口绑定到两种不同的类型，但没有指定任何 .Where() 子句，它也可以正常工作并且我没有收到任何错误。

为什么？Ninject 如何知道如何区分它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:03:51.833

将多个实现绑定到单个接口是绝对正确的。然后，您可以让 Ninject 将它们作为`IEnumerable`. 您甚至可以多次绑定一个实现。

*例如：*

```
// binding
kernel.Bind<IService>().To<BasicService>();
kernel.Bind<IService>().To<BasicService>();

// injection
private IEnumerable<IService> myServices;

public NeedServices(IEnumerable<IService> myServices)
{
     this.myServices = myServices;
} 
```

您将获得两个对`BasicService`.

如果您尝试注入单个实现，则会出现错误的情况。当 Ninject 尝试解决依赖关系（并且他不知道选择哪个实现）时，将引发错误。

```
public NeedService(IService myService)
{
     this.myService = myService;
} 
```

**所以解决办法是，Ninject 不会在绑定时检查依赖项是否可以解决，而是在应该发生注入时检查。**

这完全有道理，因为某些类型的[上下文绑定](https://github.com/ninject/ninject/wiki/Contextual-Binding)的条件可能会随着时间而改变（例如，如果您使用`.When(x=> ItIsRightTimeToInjectAImplementation())`.

# c# - C#/SQL Server 连接 - 凭据错误 - 我可以设置超时吗？

> ID：14357621
> 
> 赞同：0
> 
> 时间：2013-01-16T11:42:19.767
> 
> 标签：c#, sql, sql-server, timeout, credentials

我正在尝试制作一个工具，允许用户根据上传的 XML 文件更新**不同数据库中的某些表。**我需要让用户选择 SQL Server 实例，编写登录凭据，然后，如果凭据正确，他将不得不选择要更新的数据库。

我的问题是，当提供的用户名和密码错误时，用户必须等待 2-3 秒才能得到我捕捉到的异常，告诉他他输入错误。

我的代码现在看起来像这样：

```
private void comboDatabaseTarget_DropDown(object sender, System.EventArgs e)
        {
            String connString = "Server=" + this.comboSQLServerInstances.Text + ";User Id=sa;Password=testPasswd;";
            try
            {
                using (SqlConnection sqlConn = new SqlConnection(connString))
                {
                    sqlConn.Open();
                    DataTable tblDatabases = sqlConn.GetSchema("Databases");
                    sqlConn.Close();
                    foreach (System.Data.DataRow row in tblDatabases.Select())
                    {
                        this.comboDatabaseTarget.Items.Add(row.ItemArray[0]);
                    }
                }
            }
            catch (Exception ex)
            {

                MessageBox.Show("wrong username and password, or bad sql instance");
            }
        } 
```

我的问题是：当我尝试连接到数据库时，有什么方法可以设置超时？假设是 100 毫秒，因为如果用户名和密码正确，我几乎会立即收到答案。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T11:48:41.230

根据您的评论，我会说尝试设置[SqlConnection.ConnectionTimeout](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectiontimeout.aspx)。默认值为 15 秒。

编辑：

该属性实际上是只读的。但是，备注部分指出：

```
You can set the amount of time a connection waits to time out by using the 
ConnectTimeout or Connection Timeout keywords in the connection string. A value 
of 0 indicates no limit, and should be avoided in a ConnectionString because an 
attempt to connect waits indefinitely. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T11:58:00.073

您可以通过将时间添加到连接字符串来设置连接超时。

尝试添加：-

`"Connection Timeout=2;"`到连接字符串的末尾。

然而，这并不能解决任何问题。您已经创建了一个 Try/Catch 语句，它`Exception`通过在`MessageBox`.

此外，当您使用上述“Using 语句”时，您无需调用关闭连接，这是由 using 语句自动完成的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T12:34:55.867

您*可以*从连接字符串本身设置登录超时，请参阅[SqlConnectionStringBuilder.ConnectTimeout](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.connecttimeout.aspx)。默认值为 15 秒。但是，将此超时设置得更低（ns）将是一个非常非常非常糟糕的主意。您收到拒绝访问异常的事实意味着登录成功，并且由于凭据错误而被拒绝。这意味着**建立凭据需要 2-3 秒**。因此，将登录超时设置得较低只会关闭所有连接，因为它们只会*在登录之前超时！*. 冷登录（第一次尝试）时 2-3 秒是正常的，因为它们通常意味着缓存未命中*所有内容*：DNS 名称、Kerberos 票证、目标 LSA、SQL 身份验证令牌。要保持应用程序响应，请确保您在 2-3 秒内不劫持消息泵（即测试来自后台线程的连接）。

之前的一些回复评论使登录超时 ( `SqlConnectionStringBuilder.ConnectTimeout`) 和命令超时 ( [`SqlCommand.CommandTimeout`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout.aspx)) 之间产生了通常的混淆。两者涵盖不同的范围，并且确实具有不同的默认值（15s vs 30s）。

# sql - 在任意表格中间插入数据

> ID：14357625
> 
> 赞同：2
> 
> 时间：2013-01-16T11:42:29.270
> 
> 标签：sql, sql-server

我有一个`Countries(ID,Code,Name,....)`表。这`ID`是一个自动生成的主键列。

这是几行：

```
{1,AD,Andorra};
{2,AG,Antigua and Barbuda};
{3,AI,Anguilla} 
```

现在的问题是我找不到添加新国家代码的方法，比如说“AH”，这样表格就会自动变成......

```
{1,AD,Andorra} 
{2,AG,Antigua and Barbuda}
{3,AH,......}
{4,AI,Anguilla} 
```

换句话说，我需要按`ID`和排序的列表。`CODE`如果我需要更改一些 ID 值，就可以了。我有一个聚集索引`ID`。

PLZ，请给我一个方法...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T11:47:37.757

`ID`（作为标准主键）不用于排序目的。你不应该依赖它。我建议您改为添加**SortIndex**字段。然后在两个简单的查询中

```
UPDATE Countries set SortIndex = SortIndex+1 WHERE SortIndex>= [your index] 
```

和

```
INSERT INTO Countries VALUES (...) 
```

你会得到你需要的。另外请不要忘记添加`ORDER BY SortIndex`选择查询。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T11:50:00.263

像这样改变实体的PK值，很可能会走向痛苦的世界。ID 分配给特定实体后，不应更改。

例如，您有另一个表，其中包含一个国家/地区 ID 的 FK。在您的示例中，与安圭拉相关的其他行现在将与“AH”代表的国家相关。

听起来您对国家代码的字母顺序感兴趣。因此，出于排序目的，您只需要`ORDER BY Code`- 您不应该更改 PK 值以适应您所需的排序顺序

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T11:52:16.420

你能解释一下你为什么要这样做吗？在我看来这没有任何意义。也许您应该添加一个“SortOrder”列或其他东西？如果 ID 是某种业务规则的一部分，您应该尽可能更改设计。

编辑：正如已经在其他一些帖子中回答的那样:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T11:46:36.087

您可以在插入新记录之前更新表。

```
update Countries set id = id + 1 where id >= 3; 
```

然后，

```
insert into Countries values (3,'AH','AH'); 
```

# jquery - 用 Greasemonkey 覆盖顽固的 CSS，计算单元格？

> ID：14357629
> 
> 赞同：1
> 
> 时间：2013-01-16T11:42:44.977
> 
> 标签：jquery, css, html-table, greasemonkey

我正在[**为此页面**](http://www.goal.com/en-us/results-standings/69/serie-a/table)创建一个 Greasemonkey 脚本。

我想要做的是将赢得、平局和输掉比赛的所有值更改为他们的百分比得分，并突出显示主队或客队得分的百分比得分等于或超过 70%的*DRAWN*单元格（或行） .

我设法完成了第一部分，但我在尝试突出显示一个单元格或一行时遇到了很多麻烦。

首先我尝试了这段代码

```
$('.teamStandings tbody tr').each(function() {
    $(this).parent().css('backgroundColor', '#EFEF00');
}); 
```

实际上选择了所有行；但是直到我通过*Firebug*从 CSS 禁用这部分代码之前，我看不到任何区别：

```
.teamStandings tr.rowOne td {
  background-color: #EEEEEE;
} 
```

所以我想让这个工作，每次我浏览页面时都覆盖原始 CSS 并开始工作一个更复杂的方案：

```
$('.teamStandings tbody tr').each(function() {
  var x1=parseInt($cells.eq(8).text(),10) ;
  var x2=parseInt($cells.eq(9).text(),10) ;
  var x3=parseInt($cells.eq(10).text(),10) ;

  var y1=parseInt($cells.eq(11).text(),10) ;
  var y2=parseInt($cells.eq(12).text(),10) ;
  var y3=parseInt($cells.eq(13).text(),10) ;      

  if ((x2/(x1+x2+x3))*100 >= 70) or (y2/(y1+y2+y3))*100 >= 70)
      $(this).parent().css('backgroundColor', '#EFEF00');
}); 
```

可悲的是，这根本不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T23:36:03.773

有多个问题：

1.  第一个代码块是设置`backgroundColor`（**`tbody`**多次）的，而不是任何行或单元格。
2.  和类似的`.teamStandings tr.rowOne td`样式会覆盖第一个代码块，因为它们具有更高的[*Specificity*](http://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/)。
3.  第二个代码块与第一个代码块有相同的问题。
    **此外：**
4.  它`$cells`在没有定义的情况下使用！
5.  有`if()`语法错误；`or`不是有效的运算符。
6.  使用有意义的变量名，并使用变量而不是“幻数”（`70`）。

总而言之，这段代码突出显示了超过 70% 的游戏被绘制的*Drawn单元格：*

```
var highlightPercent    = 70;

$('.teamStandings tr').each ( function () {
    var columns     = $(this).find ('td');

    var homeWon     = parseInt (columns.eq( 8).text(), 10) ;
    var homeDraw    = parseInt (columns.eq( 9).text(), 10) ;
    var homeLoss    = parseInt (columns.eq(10).text(), 10) ;

    var awayWon     = parseInt (columns.eq(11).text(), 10) ;
    var awayDraw    = parseInt (columns.eq(12).text(), 10) ;
    var awayLoss    = parseInt (columns.eq(13).text(), 10) ;

    if (homeDraw * 100 / (homeWon + homeDraw + homeLoss)  >= highlightPercent) {
        //-- To highlight the whole row, uncomment the next line.
        //columns.css ('backgroundColor', 'pink');
        columns.eq( 9).css ('backgroundColor', '#EFEF00');
    }

    if (awayDraw * 100 / (awayWon + awayDraw + awayLoss)  >= highlightPercent) {
        //-- To highlight the whole row, uncomment the next line.
        //columns.css ('backgroundColor', 'pink');
        columns.eq(12).css ('backgroundColor', '#EFEF00');
    }
} ); 
```

目前，在[示例页面上](http://www.goal.com/en-us/results-standings/69/serie-a/table)，唯一适用的结果是*Torino*，客场比赛。

* * *

PS：您可以**在将值转换为百分比的代码之前**放置/运行此代码，您说该代码有效但未显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T13:44:14.503

在您的代码中，您已经`background-color`为`tr`元素设置了 。
虽然页面上的 CSS 正在为tr `background-color`中的元素设置`td`

所以你应该定位相同的`td`元素而不是`tr`元素

```
$('.teamStandings tbody tr td').each(function() {
    $(this).css('backgroundColor', '#EFEF00');
}); 
```

在您的第二个代码块中

```
if ((x2/(x1+x2+x3))*100 >= 70) or (y2/(y1+y2+y3))*100 >= 70) 
```

在 if 条件下，`or`关键字是不是拼写错误？

# java - matlab有什么办法可以放大菜单栏和提示窗口的字体

> ID：14357634
> 
> 赞同：8
> 
> 时间：2013-01-16T11:42:54.013
> 
> 标签：java, linux, matlab, ubuntu, fonts

我有一台高分辨率的笔记本电脑。我在上面安装了ubuntu（一个linux发行版），然后放大了系统字体。一切似乎都很完美。但是最近我在ubuntu上安装了matlab，发现matlab不符合系统字体，matlab中的字体是原来的大小，对我来说太小了。我通过修改***File--Preferences***更改了代码区域中的字体大小，但是菜单栏和提示窗口中的字体对我来说仍然太小。在网上搜索了很长时间，我发现没有任何方法可以更改这些区域的字体。谁能帮帮我？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-13T10:32:28.197

这些命令将允许您修改字体设置：

```
UIControl_FontSize_bak = get(0, 'DefaultUIControlFontSize');
set(0, 'DefaultUIControlFontSize', 18);
insdati = menu('Can you please help me?','Yes','No')
set(0, 'DefaultUIControlFontSize', UIControl_FontSize_bak); 
```

这将创建一个可用设置列表：

```
get(0, 'Default'); 
```

# wordpress-theming - Wordpress 多个用户角色在一个站点上访问他们的信息

> ID：14357646
> 
> 赞同：0
> 
> 时间：2013-01-16T11:43:42.527
> 
> 标签：wordpress-theming, wordpress, multi-tenant

我打算将 Wordpress 用于我正在构建的基于云的 SaaS 应用程序的概念验证。我对多租户和 Wordpress 的研究仅揭示了共享相同后端的多个站点，但是，我希望拥有一个站点，但管理部分应该具有不同的用户角色，只能访问其相关内容和仪表板以访问管理和/或对某些数据提出请求。3 个用户角色的仪表板将有所不同，因此他们可以有效地实现所需的功能。

我是否可以以任何方式创建新的用户角色并将上述权利分配给特定权利（例如供应商、代理商、旅行社）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:56:33.050

有几个插件可以在 wordpress 中添加角色。有了它们，您将能够添加角色并选择允许该角色执行的操作。

最完整的插件之一是[Advanced Access Manager](https://wordpress.org/extend/plugins/advanced-access-manager/)

# sharepoint - Sharepoint WebPart 仅对管理员可见

> ID：14357647
> 
> 赞同：-1
> 
> 时间：2013-01-16T11:43:43.590
> 
> 标签：sharepoint, sharepoint-2010

我正在开发一个在主页中包含 Web 部件的应用程序。这个 webparts 是列表和库。条件是这些 Web 部件必须仅对管理员可见，而其他用户不可见。我看到了一些解决方案，例如设置，

修改共享 Web 部件 --> 高级 --> 目标受众

但我在我的应用程序中找不到修改共享 webpart。我正在使用 Sharepoint 2010。有什么想法吗？提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:40:36.430

首先确保您启用了受众定位设置选项。

如果不是，请按照以下步骤启用它 选择包含您要定位的项目的列表或库。在列表工具栏上，单击设置，然后单击列表设置或文档库设置。在常规设置下，单击受众定位设置。选中启用受众定位复选框。

1.选择包含您要定位的项目的列表或库。
2.在列表工具栏上，单击设置，然后单击列表设置或文档库设置。
3.在常规设置下，单击受众定位设置。
4.选中启用受众定位复选框。

在此之后检查您的 Web 部件中的 Target Audiences 选项。

让我知道结果。

谢谢

# html - 用一个正则表达式查找 html 标签中的所有空格

> ID：14357649
> 
> 赞同：-3
> 
> 时间：2013-01-16T11:43:43.803
> 
> 标签：html, regex, tags

我有一个用户生成的*HTML*有效文本，我需要在其中查找和替换html 标签**内的所有空格。**请不要问我为什么，我只是在寻找能够找到*HTML*标记之间`<`的所有空格`>`的正则表达式。

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:48:04.667

我建议你永远不要使用 Regex 来解析 HTML。

`HTMLAgilityPack`看看： Html Agility **[Pack](http://htmlagilitypack.codeplex.com/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:59:14.593

这可以通过回调函数来完成。PHP 示例（版本 >= 5.3）

```
echo preg_replace_callback(
    '~<(.*?)>~s', 
    function ($match) {
        return '<' . str_replace(' ', 'your_replacement', $match[1]) . '>';
    },
    $str
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T13:39:25.230

在等待正则表达式解决方案时，我创建了以下爆炸内爆解决方案：

```
$tags_split_array = explode("<", $htmltext);
foreach($tags_split_array as $key => $tagpart) {
    $tagpart_array = explode(">", $tagpart);
    $tagpart_array[0] = str_replace(" ", "ψ", $tagpart_array[0]);
    $tags_split_array[$key] = implode(">", $tagpart_array);
}
$htmltext= implode("<", $tags_split_array); 
```

但是正则表达式解决方案仍然要好得多，所以我会使用它。*

# javascript - 在javascript中使用正则表达式强制输入特定字符

> ID：14357651
> 
> 赞同：2
> 
> 时间：2013-01-16T11:43:52.777
> 
> 标签：javascript, regex

我在 java 脚本中使用正则表达式来验证全名字段。我需要验证以接受任何`[a-z A-Z]`字符的 1 个或多个实例，并且该字段必须包含一个`-`和一个空格字符。

我正在使用的当前正则表达式是：`("^[a-zA-Z\\-\\\s]*$");`

这个正则表达式允许正确输入我想要的内容，但是，它不会强制用户插入空格和 a - 我需要我的验证才能包括在内。我对正则表达式很陌生，昨天才被介绍给他们，所以我不完全理解某些字符的正确使用。

我也不希望空间和 - 位于字段的开头或结尾，而不是直接相邻。

有效输入示例：

```
John smi-th
dereK al-jamone
ro-binstanle y 
```

我知道这种验证是不寻常的，但我将非常感谢任何帮助，使我能够更好地理解正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:19:19.377

请检查我是否正确理解您的要求：

*   一个或多个`a-z`, `A-Z`, 空格 (ASCII 32)。正是一个`-`
*   空格和连字符`-`不能在字符串的开头或结尾，但必须有一个空格和一个连字符`-`，因此字符串必须以字母字符开头和结尾。
*   连字符`-`和空格不能相邻。*我假设连续的空间和连续`-`的也是不允许的。*

对于上述要求，此正则表达式应验证字符串：

```
^(?!.*[- ]{2})(?=.* )[a-zA-Z][a-zA-Z ]*-[a-zA-Z ]*[a-zA-Z]$ 
```

简短说明：

*   `(?!.*[- ]{2})`：断言连字符和空格不相邻，并且不允许连续的空格和连字符。

*   `(?=.* )`: 检查字符串中是否至少有一个空格

*   `[a-zA-Z][a-zA-Z ]*-[a-zA-Z ]*[a-zA-Z]`：根据我上面的分析，第一个和最后一个字符是字母字符（它们不能在字符串中的同一位置） - 这将隐式禁止空格和连字符。只允许使用 1 个连字符，其余的是任意数量的字母和空格。

您也可以使用多个正则表达式编写此代码 - 代码会稍微清晰一些：

```
// No hyphen and space at the beginning and the end. Exactly 1 hyphen.
// The string only contains alphabet, space and hyphen
/^[a-zA-Z][a-zA-Z ]*-[a-zA-Z ]*[a-zA-Z]$/.test(str) &&
// Hyphen and space cannot be directly next to each other
// Consecutive hyphens, or consecutive spaces are also disallowed
!/[- ]{2}/.test(str) &&
// At least one space in the string, can be replaced with indexOf
/ /.test(str) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:49:46.643

这是你想要的吗？

```
^[A-Za-z\s]+(-(?!-)[A-Za-z\s]+)+$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T11:56:00.470

如果您需要确保只能出现一个空格和一个连字符，那么我会选择检查两个不同的正则表达式，如果任何一个匹配，那么它是有效的......

连字符前的空格...

```
^[a-zA-Z]*\s.[a-zA-Z]*\-.[a-zA-Z]*$ 
```

连字符后有空格

```
^[a-zA-Z]*\-.[a-zA-Z]*\s.[a-zA-Z]*$ 
```

[这是一个工作示例](http://jsfiddle.net/musefan/YvsWh/)

# web-applications - 使用图像元素中的绝对路径作为源

> ID：14357655
> 
> 赞同：1
> 
> 时间：2013-01-16T11:44:00.857
> 
> 标签：web-applications, tomcat6, image, absolute-path

我的 jsp 页面中有一个简单的 img 元素，它必须使用放置在 webapp 上下文外部的图像作为源...

我做了这样的事情：（从 servlet 生成并使用 JSTL 设置的路径）

```
<img src="C:/somewhere/32x32/userXX.png" class="member-box-avatar"> 
```

但我总是得到的是`http://myhost//myapp/C:/somewhere/32x32/userXX.png`，所以图像没有出现，有没有办法解决这个问题？

我正在使用 tomcat6 作为服务器，我已经尝试过正斜杠和反斜杠

相关代码部分：

```
 <c:choose>
            <c:when test="${empty guest}">
    <img src="${foto}${user.username}.png" class="member-box-avatar" />
            </c:when>
            <c:otherwise>
<img src="img/guest.png" class="member-box-avatar" />                                        
            </c:otherwise>
        </c:choose> 
```

${foto} 包含绝对路径“C:\mypath\32x32\”（我尝试过任何类型的斜杠组合）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:51:08.483

利用

```
<img src="<%=request.getContextPath()%>/your/image/dir/image.png"> 
```

如果它托管在您的应用程序上下文中。

否则使用

1.IFrame渲染其他图片的图片url

2.使用Ajax/jQuery异步渲染图片

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T19:51:26.573

为此，我已经挣扎了好几个小时。我用这个技巧使它起作用。

```
<a href="edit?action=showImageFull&url=C:/Users/Noir/Desktop/WorkSpaceEclipseNeu/w_mvc_3/WebContent/imgfolder/${imgageimage.time}.jpg" target="_parent">
<img  src="http://localhost:8080/w_mvc_3/edit?action=showImageFull&url=C:/Users/Noir/Desktop/WorkSpaceEclipseNeu/w_mvc_3/WebContent/imgfolder/${imgageimage.time}-thumb.jpg"width="150" height="100"> 
```

在您的 Java 环境中

String action = request.getParameter("action");

```
 if(action.equals("showImageFull")) {            
        try {
             String url = request.getParameter("url");

                response.setContentType("image/jpeg");  
                ServletOutputStream out;  
                out = response.getOutputStream();  
                FileInputStream fin = new FileInputStream(url);  

                BufferedInputStream bin = new BufferedInputStream(fin);  
                BufferedOutputStream bout = new BufferedOutputStream(out);  
                int ch =0; ;  
                while((ch=bin.read())!=-1)  
                {  
                bout.write(ch);  
                }  

                bin.close();  
                fin.close();  
                bout.close();  
                out.close();  

        } catch (BookNotFoundException e) {
            RequestDispatcher dispatcher = getServletContext().getRequestDispatcher("/jsp/error.jsp");
            dispatcher.forward(request, response);
        }               
    } 
```

这是为了显示缩略图和显示完整图像。我希望它有所帮助。

# javascript - 从用户控件内部关闭一个 jQuery 对话框

> ID：14357656
> 
> 赞同：0
> 
> 时间：2013-01-16T11:44:07.270
> 
> 标签：javascript, jquery, asp.net, jquery-ui, modal-dialog

我有一个用户控件，包括一个列表视图，其中包含一个超链接 (LnkDelete) 以弹出一个 jQuery 对话框。

**这是完成工作的javascript代码**

```
$('#LnkDelete').live('click', function (e) {
            var page = $(this).attr("href");
            var $dialog = $('<div></div>')
                .html('<iframe style="border: 0px;" src="' + page + '" width="100%" height="100%"></iframe>')
                .dialog({
                    autoOpen: false,
                    modal: true,
                    height: 200,
                    width: 600,
                    title: "Are you sure you want to delete ...?"
                });
            $dialog.dialog('open');
            e.preventDefault();
        }); 
```

**这是以对话框形式打开“DeleteBranch”网络表单的超链接：**

```
<asp:HyperLink ID="LnkDelete" runat="server" NavigateUrl='<%# Eval("ID", "~/Personnel/DeleteBranch?Id={0}") %>' ClientIDMode="Static" CssClass="button-delete" /> 
```

“DeleteBranch”网络表单包括一个带有“确定”和“取消” *ASP 按钮*的用户控件。“确定”按钮只是在原始列表视图中执行相关行的删除操作。

问题是：如何使“取消”按钮关闭弹出窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:49:25.237

```
 $('#LnkDelete').live('click', function (e) {
        var page = $(this).attr("href");
        var $dialog = $('<div></div>')
            .html('<iframe style="border: 0px;" src="' + page + '" width="100%" height="100%"></iframe>')
            .dialog({
                autoOpen: false,
                modal: true,
                height: 200,
                width: 600,
                title: "Are you sure you want to delete ...?",
                buttons: [
                {
                    text: 'OK',
                    click: function() { /*Your delete operation*/ }
                },
                {
                    text: "Cancel",
                    click: function() { $dialog.dialog('destroy'); }
                }
               ]
            });
        $dialog.dialog('open');
        e.preventDefault();
    }); 
```

正如您所说，如果是您的*ASP*按钮，请给该按钮一个`ID`赞`btn_cancel`并添加以下脚本：

```
<script lang='javascript'>
$(document).ready(function(){
    $('#btn_cancel').click(function(){
        $dialog.dialog('destroy');
    });
});
</script> 
```

# extjs - 如何在表单上跟踪dirtychange事件

> ID：14357661
> 
> 赞同：3
> 
> 时间：2013-01-16T11:44:29.713
> 
> 标签：extjs

我有表格。

我跟踪`dirtychange`事件：

```
init: function() {
    this.control({
        'form': {
            dirtychange: function(form) {
                alert('change');      
            }
        }
    });
} 
```

但是当我通过`loadRecord()`方法将记录加载到表单中时，我在`chage`加载记录时收到警报。

如何`dirtychange`仅在加载记录后开始跟踪事件？

# lua - 动态文件路径

> ID：14357663
> 
> 赞同：0
> 
> 时间：2013-01-16T11:44:31.613
> 
> 标签：lua, coronasdk

有没有办法动态改变 Corona/Lua 中图像的路径？

我目前正在使用这个：

```
itemImage = display.newImage(inventory[t.ID][1]) 
```

与吨。是我通过 eventListener 传递的目标 ID。

是否有可以更新路径的功能，我可以使用 .text 更新文本？类似于以下内容：

```
itemImage.Image(inventory[t.ID][1])
itemImage.updateImage(inventory[t.ID][1]) 
```

我在文档中找不到任何关于此的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T21:47:42.787

您无法像更改文本一样替换图像。绘制图像涉及太多变量。最好的办法是在旧图像上绘制新图像，然后删除旧图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T16:13:34.600

我认为目前还没有任何直接的方法可以做到这一点。但是，如果您想以正确的顺序更改图像，则可以使用“movieclip”。

```
 require "movieclip"

   local myImage = movieclip.newAnim{ "img1.png", "img2.png" , "img3.png", "img4.png"}
    myImage.x=100
    myImage.y=100

    local function changeImage(event)
       myImage:nextFrame()
    end

   Runtime:addEventListener("tap", changeImage) 
```

否则，您需要删除旧图像并将其替换为新图像，如下所示：

```
 local myImage = display.newImageRect("img1.png",150,150)
     myImage.x = 100
     myImage.y = 100

    local function changeImage(newImage)
        if(myImage~=nil)then
            myImage:removeSelf()
            myImage = display.newImageRect(newImage,150,150)
            myImage.x = 100; myImage.y = 100
        end
    end

    local function callMyFunction()
       changeImage("hair_2.png")
    end
    Runtime:addEventListener("tap",callMyFunction) 
```

# javascript - 带有 jquery ui 滑块的 Html5 画布

> ID：14357667
> 
> 赞同：1
> 
> 时间：2013-01-16T11:44:39.123
> 
> 标签：javascript, html, jquery-ui

我第一次使用 html5，试图让这个 jquery ui 滑块向这个 html5 画布不透明度发送正确的值。经过一些谷歌搜索和混乱，我在这里工作：http: [//jsfiddle.net/y54Es/25/](http://jsfiddle.net/y54Es/25/)当你使用它时，你会明白我的意思，在滑块移动之前没有图像出现，我知道这与我拥有函数的顺序有关，否则我就是无法让它工作，这是我的代码：JS：

```
 $("#slider").slider({
  animate: true,
  range: "min",
  value: 0.5,
  min: 0,
  max: 0.9,
  step: .01,

  slide: function (event, ui) {
    $('#hiddenField').attr('value', ui.value);
    $("#slider-result").html(ui.value);
    var canvas = document.getElementById("myCanvas");
    var ctx = canvas.getContext("2d");
    var valueVar = $('#hiddenField').val();
    var img1 = loadImage('http://moosepic.com/test2.png', main);
    var img2 = loadImage('http://moosepic.com/test.png', main);

    var imagesLoaded = 0;

    function main() {
      imagesLoaded += 1;

      if (imagesLoaded == 2) {
        // composite now
        ctx.drawImage(img1, 0, 0, 300, 300);
        if (valueVar == 0) {

        } else {
          ctx.globalAlpha = valueVar;
          ctx.drawImage(img2, 0, 0, 300, 300);
        }
      }
    }

    function loadImage(src, onload) {
      var img = new Image();

      img.onload = onload;
      img.src = src;

      return img;
    }
  }

}); 
```

当滑块一直向左时如何使第二张图像完全取消的任何帮助都会很棒......如果有人可以帮助我将初始图像加载到画布上加载，那也很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:01:00.973

您使用的 slide 方法仅在实际调整滑块时调用。jQueryUI Slider 对象还提供了一个[create 方法](http://api.jqueryui.com/slider/#event-create)，该方法在页面加载时创建滑块时调用一次。

我建议使用它来执行画布的初始设置。例如加载画布图像等。

# perl - 安装 mod_perl 时出错

> ID：14357673
> 
> 赞同：3
> 
> 时间：2013-01-16T11:44:59.550
> 
> 标签：perl, apache2, web-deployment, mod-perl, apxs2

安装 mod_perl 时出现如下所示的错误。我正在使用 Ubuntu 12.04、Apache2.2.22、Perl 5.14。请让我知道我该如何解决

```
root@hafsal-sparksupport:~/mod_perl-2.0.7# perl Makefile.PL MP_APXS=/usr/local/apache2/bin/apxs
Reading Makefile.PL args from @ARGV
   MP_APXS = /usr/local/apache2/bin/apxs
no conflicting prior mod_perl version found - good.
************* WARNING *************

  Your Perl is configured to link against libgdbm,
  but libgdbm.so was not found.
  You could just symlink it to /usr/lib/x86_64-linux-gnu/libgdbm.so.3.0.0

************* WARNING *************
[  error] Unable to determine server version, aborting.
[  error] Invalid MP_APXS specified? 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T12:26:23.403

安装 libgdm 开发包：

```
aptitude install libgdbm-dev 
```

# arrays - 在R中将矩阵转换为数组

> ID：14357674
> 
> 赞同：0
> 
> 时间：2013-01-16T11:45:00.927
> 
> 标签：arrays, r, list, matrix

我有如下列表矩阵：

```
01_2_020.gth 02_2_020.gth 03_2_020.gth 04_2_015.gth 05_2_015.gth 06_2_015.gth 07_2_010.gth

 [1,] 0.5643314    0.5440568    0.5506353    0.4717183    0.4659001    0.4981198    0.3697551   
 [2,] 0.6365412    0.6135798    0.6211972    0.5207896    0.5208007    0.5519582    0.4210863   
 [3,] 0.6961687    0.6745536    0.6803473    0.5742673    0.5687056    0.596461     0.4613756   
 [4,] 0.7571837    0.7258654    0.7354272    0.6200432    0.6084758    0.6457854    0.5016579 
```

我想将此矩阵转换为具有以下结构的数组：

```
$`01_2_020.gth`

  [1] 1.3519346 1.3529605 1.3465736 1.3350906 1.3443445 1.3311501 1.3339374 1.3128332 1.3172605
 [10] 1.3070263 1.2991674 1.2943014 1.2892072 1.2857247 1.2764447 1.2644700 1.2608630 1.2597877
 [19] 1.2460450 1.2377009 1.2416192 1.2396816 1.2314797 1.2282107 1.2206790 1.2176491 1.2163807

$`02_2_020.gth`

  [1] 1.3259280 1.3180293 1.3153046 1.3101223 1.3014639 1.2927999 1.2851856 1.2813943 1.2719856
 [10] 1.2636101 1.2617434 1.2503571 1.2410282 1.2437357 1.2299740 1.2224429 1.2138308 1.2070487
 [19] 1.2131742 1.1957252 1.1943047 1.1841959 1.1792643 1.1695081 1.1530798 1.1613240 1.1542210 
```

我真的不知道如何开始。

该`str`函数在第一种情况下给了我：

```
> str(x) 
 List of 570 
 $ : num 0.564
 $ : num 0.637
 $ : num 0.696
 $ : num 0.757
 $ : num 0.811
 $ : num 0.855
 $ : num 0.892
 $ : num 0.934
 $ : num 0.967
 $ : num 0.998
 $ : num 1.02
 $ : num 1.06
 $ : num 1.09
 $ : num 1.11
 $ : num 1.12
 $ : num 1.14
 $ : num 1.16
 $ : num 1.17
 $ : num 1.19
 $ : num 1.21
 $ : num 1.22
 $ : num 1.24
 $ : num 1.25
...
  [list output truncated]
 - attr(*, "dim")= int [1:2] 38 15
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr [1:15] "01_2_020.gth" "02_2_020.gth" "03_2_020.gth" ... 
```

该`str`函数在第二种情况下给了我：

```
> str(groupedDissociationsValues)<br/>
List of 15<br/>
 $ 01_2_020.gth: num [1:120] 1.35 1.35 1.35 1.34 1.34 ...
 $ 02_2_020.gth: num [1:120] 1.33 1.32 1.32 1.31 1.3 ...
 $ 03_2_020.gth: num [1:120] 1.31 1.3 1.3 1.29 1.29 ...
 $ 04_2_015.gth: num [1:120] 1.18 1.18 1.18 1.17 1.16 ...
 $ 05_2_015.gth: num [1:120] 1.17 1.17 1.17 1.16 1.15 ...
 $ 06_2_015.gth: num [1:120] 1.18 1.18 1.17 1.18 1.17 ...
 $ 07_2_010.gth: num [1:120] 0.986 0.984 0.975 0.981 0.972 ...
 $ 08_2_010.gth: num [1:120] 0.955 0.957 0.952 0.947 0.941 ...
 $ 09_2_010.gth: num [1:120] 0.963 0.96 0.952 0.954 0.952 ...
 $ 10_2_004.gth: num [1:120] 0.558 0.558 0.554 0.547 0.551 ...
 $ 11_2_004.gth: num [1:120] 0.475 0.477 0.476 0.482 0.477 ...
 $ 12_2_004.gth: num [1:120] 0.529 0.523 0.521 0.523 0.515 ...
 $ 13_2_025.gth: num [1:120] 1.31 1.3 1.3 1.29 1.29 ...
 $ 14_2_025.gth: num [1:120] 1.33 1.33 1.33 1.32 1.31 ...
 $ 15_2_025.gth: num [1:120] 1.29 1.28 1.28 1.27 1.27 ...
 - attr(*, "dim")= int 15
 - attr(*, "dimnames")=List of 1
  ..$ : chr [1:15] "01_2_020.gth" "02_2_020.gth" "03_2_020.gth" ... 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:08:04.733

如果您取消列出，它将按顺序将其存储为向量。然后只是强制数组（仍然是一个向量，但具有维度属性）。

```
> test <- rep(list(1),99)
> testArray <- array( unlist(test), dim=c(3,3,11) )
> testArray
, , 1

     [,1] [,2] [,3]
[1,]    1    1    1
[2,]    1    1    1
[3,]    1    1    1

, , 2

     [,1] [,2] [,3]
[1,]    1    1    1
[2,]    1    1    1
[3,]    1    1    1
... 
```

# jquery - (window).load 和 (document).ready 函数有冲突

> ID：14357675
> 
> 赞同：-1
> 
> 时间：2013-01-16T11:45:02.417
> 
> 标签：jquery

我正在尝试让 2 个 jquery 工作而不会发生冲突！

这是我的代码：

```
(function($){ //This functions first parameter is named $
    $(document).ready(function(){
        // tabbed boxes
        $('#tabs div').hide();
        $('#tabs div:first').show();
        $('#tabs ul li:first').addClass('active');
        $('#tabs ul li a').click(function(){ 
            $('#tabs ul li').removeClass('active');
            $(this).parent().addClass('active'); 
            var currentTab = $(this).attr('href'); 
            $('#tabs div').hide();
            $(currentTab).show();
            return false;
        });
    });

    $(window).load(function(){
        // jQuery Lightbox
        var lightboxPath = "/js/jquery-lightbox/";
        $("a[rel='group1']").lightBox({
            imageLoading:lightboxPath+"img/lightbox-ico-loading.gif",
            imageBtnPrev:lightboxPath+"img/lightbox-btn-prev.gif",
            imageBtnNext:lightboxPath+"img/lightbox-btn-next.gif",
            imageBtnClose:lightboxPath+"img/lightbox-btn-close.gif",
            imageBlank:lightboxPath+"img/lightbox-blank.gif"
        });

        // Photo gallery > Standard
        $(".photosgallery-std").sliderkit({
            mousewheel:true,
            shownavitems:7,
            //navfx:"none",
            panelbtnshover:true,
            auto:true,
            circular:true,
            navscrollatend:true,
            counter:true
        });
    })
})(jQuery); 
```

请任何人都可以帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:56:04.713

我认为你必须把它放在外面`()(jQuery);`：

```
$(document).ready(function(){
    // tabbed boxes
    $('#tabs div').hide();
    $('#tabs div:first').show();
    $('#tabs ul li:first').addClass('active');
    $('#tabs ul li a').click(function(){ 
        $('#tabs ul li').removeClass('active');
        $(this).parent().addClass('active'); 
        var currentTab = $(this).attr('href'); 
        $('#tabs div').hide();
        $(currentTab).show();
        return false;
    });
});

(function($){ //This functions first parameter is named $
$(window).load(function(){
    // jQuery Lightbox
    var lightboxPath = "/js/jquery-lightbox/";
    $("a[rel='group1']").lightBox({
        imageLoading:lightboxPath+"img/lightbox-ico-loading.gif",
        imageBtnPrev:lightboxPath+"img/lightbox-btn-prev.gif",
        imageBtnNext:lightboxPath+"img/lightbox-btn-next.gif",
        imageBtnClose:lightboxPath+"img/lightbox-btn-close.gif",
        imageBlank:lightboxPath+"img/lightbox-blank.gif"
    });

    // Photo gallery > Standard
    $(".photosgallery-std").sliderkit({
        mousewheel:true,
        shownavitems:7,
        //navfx:"none",
        panelbtnshover:true,
        auto:true,
        circular:true,
        navscrollatend:true,
        counter:true
    });
});
})(jQuery); 
```

# groovy - SOAPUI：如何从外部文件中包含 Groovy 脚本

> ID：14357680
> 
> 赞同：13
> 
> 时间：2013-01-16T11:45:30.410
> 
> 标签：groovy, soapui

如何从外部文件中包含 groovy 脚本？ ![在此处输入图像描述](../Images/605aa9f9b9517425d115207392f708d4.png)

我试图使用：

```
def script = new GroovyScriptEngine('d:/soapui/payment.v2').with { 
    loadScriptByName( 'proxy.groovy' ) 
} 
this.metaClass.mixin script 
```

但我得到：

![在此处输入图像描述](../Images/b0444e23f05344e20a648bbb570cc56a.png)

**更新**

是否有可能将我的方法打包到 jar 或类似的东西中，并从中使用它们`Script TextArea`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-25T13:34:45.183

最简单的方法是使用SOAPUI 中的[Groovy Test Step 来使用 GroovyScriptEngine](https://support.smartbear.com/readyapi/docs/soapui/steps/groovy.html)[运行](http://docs.groovy-lang.org/docs/groovy-2.4.1/html/api/groovy/util/GroovyScriptEngine.html)外部脚本。我使用[GroovyUtils](https://www.soapui.org/apidocs/com/eviware/soapui/support/GroovyUtils.html)来查找项目的路径，以便将整个项目保存在一个地方以帮助源代码控制、编辑等。

```
import groovy.lang.Binding
import groovy.util.GroovyScriptEngine

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )

// location of script file is relative to SOAPUI project file.
String scriptPath = groovyUtils.projectPath + "/groovy/"

// Create Groovy Script Engine to run the script.
GroovyScriptEngine gse = new GroovyScriptEngine(scriptPath) 

// Load the Groovy Script file 
externalScript = gse.loadScriptByName("Utility.groovy")  

// Create a runtime instance of script
instance = externalScript.newInstance()

// Sanity check 
assert instance!= null

// run the foo method in the external script
instance.foo() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-10T11:01:32.983

您还可以在 java (eclipse) 中创建脚本，然后将其导出为 jar 并添加到 soapui。

这是步骤：

1.  在包内的 java 类中创建代码。
2.  右键单击包并导出（选择jar）
3.  将此jar添加到soapui /bin/ext文件夹（确保在此步骤之前关闭soapui）
4.  重新启动soapui，现在您可以导入和使用soapui中的脚本，如下所示。

5.  创建一个 groovy 步骤并导入 jar

    导入包名.类名

6.  调用函数为：

    类名.函数名（参数）；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T14:22:47.093

试试这个：

```
GroovyShell gs = new GroovyShell(getBinding()); 
gs.evaluate(new File('path/to/external.groovy').text); 
```

甚至这样：

```
evaluate(new File('path/to/external.groovy')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T14:50:13.757

`ExpandoMetaClass.enableGlobally()`对于 mixin 错误消息，如果您使用then ，您可能会摆脱它`this.metaClass = null`。一开始，在你开始混音之前。

# sharepoint-2010 - 旧分类网站列无法正常工作于新语言包

> ID：14357683
> 
> 赞同：0
> 
> 时间：2013-01-16T11:45:38.623
> 
> 标签：sharepoint-2010

我有一个问题，其中我们有一个站点列指向一个只有英文标签的 MMS 术语。后来添加了语言包。理想情况下，此站点列应指向相应语言站点中的正确语言标签。但它不工作。它只加载英文术语。

虽然，一个新的网站栏给出了正确的结果。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:11:01.650

Try writing a little ConsoleApplication or PowerShell script which prints out the SPField.SchemaXml property for one broken and one working field. This is essentially an XML document with the definition of all the properties for these fields. Compare the XML documents to each other and see if you can spot any interesting differences in property values. Hopefully you will find which property is different, in which case you could then write some code to fix the definitions of the broken fields.

# php - 我应该如何用逗号完全从数据库中删除 id？

> ID：14357684
> 
> 赞同：-3
> 
> 时间：2013-01-16T11:45:45.853
> 
> 标签：php, mysql

我有一张这样的表`tbl_scripts`：

```
 allowed_group_ids
+-----------------+
 12343,12343,21342 
```

我需要从这个字符串中删除一个组 id，例如 12343。设置`delete_group_id`为`12343`，下面的查询似乎可以正常工作：

```
UPDATE tbl_scripts
SET allowed_group_ids = 
  REPLACE(
    REPLACE(allowed_group_ids, '$delete_group_id,', ''),
    ',$delete_group_id', '')
WHERE
  system_id = {$_SESSION['system_id']} 
```

但是如果该列只有一个值，它会失败：

```
 allowed_group_ids
+-----------------+
 12343 <-----I'm not able to replace this with blank 
```

我知道我应该规范化表，但目前我无法更改我的数据库结构，所以我试图让它以这种方式工作。如何使我的查询使用单个值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:10:07.240

我认为这应该做你正在寻找的：

```
UPDATE tbl_scripts
SET allowed_group_ids =
  TRIM( both ',' from
  REPLACE(
    REPLACE(
      CONCAT(',',
        REPLACE(allowed_group_ids, ',', ',,')
           , ','), ',12343,', '')
    , ',,', ',')) 
```

*   `,`首先我加倍`,,`
*   然后我`,`在字符串之前和`,`之后添加一个，以便更容易匹配要删除的组
*   然后我`,delete_group_id,`用一个空字符串替换所有（用前导和尾随逗号）
*   然后我再次全部替换`,,`回单`,`
*   使用 TRIM，我删除了前导和尾随`,`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:53:15.547

第一个替换搜索尾随逗号，第二个搜索前导逗号。单个组 id 没有尾随逗号。

最安全的选择是针对 field = value 的情况运行第二个查询

在任何时候这样做

```
REPLACE(allowed_group_ids, '$delete_group_id', '') 
```

可能会删除部分较长的 id（例如 123456 中的 1234567 会留下 7）所以不要那样做

或者，即使对于单个 id，也始终添加尾随逗号，那么您只需要类似

```
REPLACE(allowed_group_ids, '$delete_group_id,', '') 
```

添加尾随逗号是您可以在整个数据库中轻松更新的内容（作为一次性查询）

```
UPDATE table SET allowed_group_ids = CONCAT(allowed_group_ids, ','); 
```

然后检查您的代码中的 insert 和 udpate 语句作用于该表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T11:53:25.430

尝试这个：

```
UPDATE tbl_scripts SET allowed_group_ids = 
TRIM(BOTH ',' FROM REPLACE(allowed_group_ids, '$delete_group_id', ''))
WHERE system_id = {$_SESSION['system_id']} 
```

这将使用该函数删除`$delete_group_id`then cleanup 前导和尾随逗号的每个条目。`TRIM`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T11:53:30.630

试试这个，不确定这在语法方面有多可行..

```
UPDATE tbl_scripts SET allowed_group_ids = 
CASE WHEN INSTR(allowed_group_ids, '$delete_group_id,') > 0 THEN
REPLACE(REPLACE(allowed_group_ids, '$delete_group_id,', ''), ',$delete_group_id', '')
ELSE NULL END
WHERE system_id = {$_SESSION['system_id']}
;

UPDATE tbl_scripts SET allowed_group_ids = 
CASE WHEN INSTR(allowed_group_ids, ',') > 0 THEN
REPLACE(REPLACE(allowed_group_ids + ',', '$delete_group_id,', ''), ',$delete_group_id', ''
ELSE
REPLACE(REPLACE(allowed_group_ids, '$delete_group_id,', ''), ',$delete_group_id', '')
END
AND system_id = {$_SESSION['system_id']}
; 
```

# mysql - How to count the number of occurrence of column values but without GROUP BY (not distinct values) mysql

> ID：14357688
> 
> 赞同：1
> 
> 时间：2013-01-16T11:45:57.943
> 
> 标签：mysql, sql, count

```
id      title           numbers
1       chicken         1
2       meat            1
3       fish            1
4       fish            2
5       meat            2
6       fish            3
7       chicken         2
8       chicken         3

```

I want to construct the following output as above. Anyone can help me calculate number of occurrence of column values but without **GROUP BY**(not remove same values) , let create "numbers" field same as above , thank

Normal , if use `COUNT(*)` :

```
SELECT COUNT(*) FROM table GROUP BY title 
```

But it remove same values :

```
id      title           numbers
1       chicken         3
2       meat            2
3       fish            3

```

i want to keep same values , and output like this :

```
id      title           numbers
1       chicken         1    
2       meat            1
3       fish            1
4       fish            2
5       meat            2
6       fish            3    
7       chicken         2     
8       chicken         3     

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T12:05:15.050

I'm assuming your question is how to generate the `numbers` column in your sample output. If that's not correct, please clarify the question.

```
select  id
,       title
,       (
        select  count(*)
        from    Table1 t2
        where   t1.title = t2.title
                and t2.id <= t1.id
        ) as numbers
from    Table1 t1 
```

[Live example at SQL Fiddle.](http://sqlfiddle.com/#!2/5ee7d/2/0)

# android - 除非您更新 google play 服务，否则此应用将无法运行 - 适用于 android 中的 google 地图

> ID：14357689
> 
> 赞同：-1
> 
> 时间：2013-01-16T11:45:59.973
> 
> 标签：android, google-maps

我正在尝试谷歌地图教程中给出的示例。但无法执行它显示更新谷歌播放服务。当我点击更新应用程序崩溃。我受够了尝试。请帮助解决这个问题，或者请给我任何关于谷歌地图的安卓编程教程。

layout_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
   <fragment xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/map"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   class="com.google.android.gms.maps.MapFragment"/> 
```

清单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.mapviewsample"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<permission
    android:name="com.example.mapdemo.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <uses-library android:name="com.google.android.maps" />

    <activity
        android:name="com.mapviewsample.MapSampleActivity"
        android:label="@string/app_name"
         android:theme="@android:style/Theme.NoTitleBar" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="AIzaSyCQLmBXPhSNhbHBaWH_SDBf1gFu3JNN0H4" />
</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:11:59.547

如果你使用"android:minSdkVersion="8""，

1.在你的layout_man.xml，你必须修改标签如下；

```
 (X) class="com.google.android.gms.maps.MapFragment" 
  (o) class="com.google.android.gms.maps.SupportMapFragment" 
```

2.更完善的信息，看下面这个链接，对你有用；

[点击这里然后你会看到一个很好的教程](http://wptrafficanalyzer.in/blog/showing-current-location-in-google-maps-using-api-v2-with-supportmapfragment/)

3\. 请看我最近的解释；

[https://stackoverflow.com/a/14355702/1983061](https://stackoverflow.com/a/14355702/1983061)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-15T22:44:21.347

这对我有用。如果您使用 IntelliJ 的当前版本的 android studio，请在 build.gradle 文件中替换此行

```
 compile 'com.google.android.gms:play-services:+' 
```

和 ：

```
 compile 'com.google.android.gms:play-services:4.4.52' 
```

你应该很高兴。

这个问题可能很老，但希望它可以帮助可能正在为此苦苦挣扎的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T13:57:51.063

有两件事要做：

*   修复你的布局

> 类="com.google.android.gms.maps.MapFragment"

至

> 类="com.google.android.gms.maps.SupportMapFragment"

*   将 google play 安装到您的模拟器。你可以在这篇[文章](https://stackoverflow.com/a/13734937/1821326)中找到，这是[我当前的配置](https://stackoverflow.com/a/14271933/1821326)。

# iphone - 每个视图的单独 UINavigationBars

> ID：14357702
> 
> 赞同：0
> 
> 时间：2013-01-16T11:46:40.963
> 
> 标签：iphone, ios, objective-c, uinavigationcontroller, uinavigationbar

我有一个设置导航栏外观的地方`navigation view controller`。`root view controller`它看起来像这样：

```
UIImage *navBarImage = [UIImage imageNamed:@"GreyUp.png"];
[[UINavigationBar appearance] setBackgroundImage:navBarImage
                                       forBarMetrics:UIBarMetricsDefault]; 
```

不过，这件事改变了`navBar`以下所有视图控制器的外观，这是我不喜欢的。我想要一个`navBar`用于根视图，另一个用于不同的视图。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:55:35.463

外观意味着它适用于您的所有应用程序导航栏，因此您可以将其添加到您的所有视图控制器中

```
self.navigationController.navigationBar.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"GreyUp.png"]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:53:49.987

是的，它可以实现在视图中使用它会出现

```
[self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"navBar.png"] forBarMetrics:UIBarMetricsDefault]; 
```

// 用于自定义后退按钮

```
UIButton*    btnBack= [Utils createButtonWithTarget:self selector:@selector(btnBackClicked) frame:CGRectMake(0,5, 100, 40) bgimageName:@"tab_back.png" tag:0];//My method use yours
        self.navigationItem.leftBarButtonItem=[[UIBarButtonItem alloc] initWithCustomView:btnBack];
      //use btnBack ref to change font title title color etc 
```

我的 Utils 类代码来创建按钮

```
+ (UIButton *)createButtonWithTarget:(id)target
                            selector:(SEL)selector
                               frame:(CGRect)frame
                         bgimageName:(NSString *)imageName
                                 tag:(NSInteger)aTag{
    UIButton *button = [[UIButton buttonWithType:UIButtonTypeCustom] retain];
    button.frame = frame;
    [button setBackgroundImage:[UIImage imageNamed:imageName] forState:UIControlStateNormal];   
    [button addTarget:target action:selector forControlEvents:UIControlEventTouchUpInside];
    // in case the parent view draws with a custom color or gradient, use a transparent color
    button.backgroundColor = [UIColor clearColor];
    button.showsTouchWhenHighlighted = YES;
    button.tag = aTag;
    return [button autorelease];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T12:02:36.807

您可以为不同的视图设置导航栏

```
 [self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"login.png"] forBarMetrics:UIBarMetricsDefault]; 
```

导航栏上的获取按钮，您可以按照我的回答

[如何在导航栏中以编程方式设置图片？](https://stackoverflow.com/questions/13488710/how-to-set-a-picture-programmatically-in-a-navbar/13488781#13488781)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T12:18:37.127

在`viewWillAppear`rootViewController 中，自定义你的 navigationBar。

在`viewWillDisAppear`rootViewController 中，执行您想要为导航层次结构的其余部分显示的更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T09:43:15.813

为导航栏设置背景颜色或使用外观方法。在 viewWillAppear 中你想在哪里更改导航栏的图像

# facebook - 获取 Facebook 活动页面

> ID：14357704
> 
> 赞同：0
> 
> 时间：2013-01-16T11:46:45.150
> 
> 标签：facebook, facebook-fql

我正在使用 FB API 和 FQL 来获取已识别用户的一些事件代码。

但我想显示 Facebook 活动页面，但我找不到这样做的方法......

这里有一个例子：

```
I go to mywebsite.com, and I login into Facebook.
I get a list of all my current events, with a Link
If I follow this link, I get the event ID (1234567, for example)
[this step is the one I want to do]:
I show in my website (like if it was an iframe) the following FB page:
    https://www.facebook.com/events/1234567 
```

因此，我希望允许用户直接与 facebook 交互，但无需离开我的网站......

我怎样才能做到这一点？是否可以？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:17:59.530

解决了！

```
function viewFBActivity($id){
    $h = curl_init("https://www.facebook.com/events/".$id."/");
    curl_setopt($h, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
    curl_setopt($h, CURLOPT_HEADER, false);
    curl_setopt($h, CURLOPT_HTTPHEADER, array("Accept-Language: es-es,en"));
    curl_setopt($h, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($h, CURLOPT_SSL_VERIFYHOST, false);
    curl_setopt($h, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_0);
    curl_setopt($h, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($h, CURLOPT_AUTOREFERER, true);
    $ret= curl_exec($h);
    echo($ret);
} 
```

我希望它可以帮助将来的人！

# java - ADB 无线

> ID：14357705
> 
> 赞同：96
> 
> 时间：2013-01-16T11:46:48.093
> 
> 标签：java, android, adb

嘿，我想知道您是否需要 root 才能再执行此操作？我想通过无线安装/运行应用程序以停止所有这些电缆切换。我也读过它会导致一些错误吗？那是在这个网站上的旧帖子上，我想知道它现在是否可靠且容易做到？

* * *

## 回答 #1

> 赞同：234
> 
> 时间：2013-01-16T11:55:28.017

不需要生根。连接 USB 电缆后，端口 5555 在所有相关防火墙上打开并启用调试模式

```
adb tcpip 5555 
```

然后查看您的设备和您使用的网络的无线属性，查看已授予设备的 IP 地址（或将您的 DHCP 配置为始终使用相同的设备 MAC 地址）。然后

```
adb connect 192.168.1.133 
```

（192.168.1.133 是一个示例 IP 地址）。

这就是全部。您现在可以在USB 电缆拔出的情况下使用`adb shell`or `adb install`or or `adb upload`or [like 。](http://developer.android.com/tools/help/adb.html)

要切换回 USB 模式，

```
adb usb 
```

设备也可能在重启后恢复到 USB 模式。

开发直接使用附加 USB 设备的应用程序需要此模式（USB 端口由设备使用，因此 ADB 无法使用）。Android 网站的[USB 调试部分](http://developer.android.com/guide/topics/connectivity/usb/index.html)对此进行了简要介绍。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-13T14:12:20.047

我今天遇到了同样的问题，发现在我的无根 4.2 Galaxy Nexus 设备上一切正常，但在我的旧（再次无根）三星 Galaxy Y (2.3) 设备上不起作用。

我尝试了[这里](https://stackoverflow.com/questions/6313167/cant-connect-to-android-via-adb-over-wifi-do-i-need-root-access)给出的步骤，但看起来需要一部有根手机才能在一些早期型号上工作（也许还有其他非 nexus 设备）。

这就是我尝试过的 -

`$ adb shell netstat | grep 5555`

此端口上未打开任何套接字。

尝试手动设置 adb tcpip 执行的步骤 -

```
$ adb shell setprop service.adb.tcp.port 5555
$ adb shell stop adbd
$ adb shell start adbd
$ adb shell getprop | grep adb 
```

这不会显示刚刚设置的属性。

这就是它在我的 nexus 设备上显示的内容，它无需生根即可工作 -

```
$ adb shell getprop | grep adb
[service.adb.tcp.port]: [5555] 
```

因此，根据您拥有的手机/操作系统版本，您的里程可能会有所不同。

:-)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-01-09T18:01:03.387

对于我的 Nexus 4 @ Android 4.4.2 (Kitkat) 上的无线 adb，我通常会这样做：

1.  在“开发者选项”中打开 USB 调试
2.  通过 USB 电缆连接，接受 RSA 密钥对话框
3.  `adb tcpip 5555`
4.  `adb connect 192.168.?.?`（本地 WLAN 上的设备 IP）
5.  断开 USB 数据线

6.  测试连接是否仍然打开：`adb devices`

    *   如果没问题，你会看到：
        `List of devices attached`
        `192.168.?.?:5555 device`
    *   其他使用 Kumar 的方法：
        [https ://stackoverflow.com/a/14855490/818634](https://stackoverflow.com/a/14855490/818634)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-30T16:15:02.883

无需root

对于没有 USB 电缆的无线 ADB 是可能的，但您需要使用 USB 电缆与 PC 使用一次设置连接。确保 USB 调试模式应打开。在同一个wifi上连接设备。然后运行

*   亚行 tcpip 5555
*   adb 连接你的设备IP

查找当前设备 IP 并设置 adb 无线使用应用程序（无需 root 设备）

[https://play.google.com/store/apps/details?id=com.freeappmakr.adb](https://play.google.com/store/apps/details?id=com.freeappmakr.adb)

使用此应用程序，您可以使用无线 adb 设置您的设备。

如果设置使用中的任何错误

adb 杀死服务器

然后再试一次

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-24T14:22:06.760

如果您在设备上安装了 adbd Insecure，它将阻止您通过 WiFi 连接到您的设备。您必须取消选中应用程序 adbd Insecure 中的“启用不安全 adbd”。

请参阅[已修复：无法通过 wifi 连接到 adb](https://stackoverflow.com/questions/27790445/fixed-cant-connect-to-adb-over-wifi)

# select - 忽略 cetain 表上所有选择的大小写

> ID：14357706
> 
> 赞同：0
> 
> 时间：2013-01-16T11:46:49.707
> 
> 标签：select, triggers, oracle10g, collation, case-insensitive

Oracle 10g 中是否有一种方法可以设置不区分大小写的搜索，并且可能还翻译某些表上的所有传入选择？

我有一个这样的选择：

```
SELECT city.city_name as city,
    city.city_zip as zip,
    city.city_name || ' - ' || county.county_name as county
FROM T_ADDRESSFILLCITY city
JOIN T_ADDRESSFILLCOUNTY county ON county.countyid = city.countyid
WHERE LOWER(TRANSLATE(city.city_name, 'úüűůéěäáôöőóťčížďňšŕýľřĺąćęłńóśźż', 'uuuueeaaooootcizdnsrylrlacelnoszz')) LIKE LOWER(TRANSLATE({PARAM}, 'úüűůéěäáôöőóťčížďňšŕýľřĺąćęłńóśźż', 'uuuueeaaooootcizdnsrylrlacelnoszz')) 
```

但我想把它改成这个

```
SELECT city.city_name as city,
    city.city_zip as zip,
    city.city_name || ' - ' || county.county_name as county
FROM T_ADDRESSFILLCITY city
JOIN T_ADDRESSFILLCOUNTY county ON county.countyid = city.countyid
WHERE city.city_name LIKE {PARAM} 
```

并且有一个数据库机制（整理？，触发器？）来做忽略案例并默认为所有选择进行翻译。

但这应该只适用于特定的表，而不是整个数据库。

我什么也找不到。提前感谢您的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:40:35.953

你应该尝试设置：

```
 alter session set nls_comp='LINGUISTIC';
 alter session set nls_sort='BINARY_AI'; 
```

然后运行第二个查询。这应该在 LIKE 上提供不区分重音大小写的搜索。参考：[http ://docs.oracle.com/cd/B19306_01/server.102/b14225/ch5lingsort.htm#CIHJBFAD](http://docs.oracle.com/cd/B19306_01/server.102/b14225/ch5lingsort.htm#CIHJBFAD)

另一种方法是使用`convert`. 例如：

```
where upper(convert(name, 'US7ASCII')) like upper(convert('%e%', 'US7ASCII')); 
```

# xmpp - 如何使用 asmack 库发送和收听自定义 xmpp 存在数据包

> ID：14357707
> 
> 赞同：2
> 
> 时间：2013-01-16T11:46:53.117
> 
> 标签：xmpp, asmack

我正在努力收听联系人对 VCard 的更新。我试图通过在更新 VCard 时发送带有一些自定义信息的自定义存在来做到这一点。从调试的输出中，我发现，每当发送这样的自定义存在时，它的联系人都会收到存在节。不幸的是，当联系人的 packetListener 无法检测到传入的数据包，然后添加到连接的所有侦听器似乎已被删除，即之前可以检测到的其他数据包无法侦听，但调试仍然可以正常工作。我的一些代码片段就像这样：

```
// to update VCard
 mVCard.load(mXMPPConnection);
        mVCard.setField(XmppUserInfo.tagHeadIcon, userInfo.getHeadIconUrl());
        mVCard.setField(XmppUserInfo.tagGender, userInfo.getGender());
        mVCard.setField(XmppUserInfo.tagNickname,userInfo.getNickname());
        mVCard.setField(XmppUserInfo.tagAccount, userInfo.getAccount());
        mVCard.setField(XmppUserInfo.tagSignnature, userInfo.getSignnature());
        mVCard.save(mXMPPConnection);

 // to send custom presence to subscribers to renew infomation
            Presence presence = new Presence(Type.available);
            presence.addExtension(new UserInfoExtension(userInfo));
            mXMPPConnection.sendPacket(presence); 
```

我的听众是这样的：

```
//add Listener  

PacketListener packetListener = new PacketListener() {

            @Override
            public void processPacket(Packet packet) {
                if(null != packet){
                    Log.i(TAG,"UserInfo is being updated" );
                    Log.i(TAG, "the packet is " +packet.toXML());

                    }
                }
            }
        };
        xmppConnection.addPacketListener(packetListener, new PacketFilter() {

            @Override
            public boolean accept(Packet p) {
                return true;
            }
        }); 
```

但是我不能说日志中的 prescen 节，尽管我可以从调试的输出中接收到存在。有谁能够帮我？非常感谢。

收到的出席是这样的：

```
<presence id="AL4As-4" from="20298509@openfire/ad9a8862" to="20298468@openfire">
<user xmlns="kascend:video:xmpp:userinfo">
<info account="133787245" gender="f" signnature="wwwwwww" nickname="bbbb"/>
</user>
<c xmlns="http://jabber.org/protocol/caps" hash="sha-1" node="http://www.igniterealtime.org/projects/smack/" ver="O1jiM4C3yPnCFLp9hBZUn4AgVXs="/></presence> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:03:15.237

很抱歉误导了你。最后发现问题是由我的扩展提供程序中的错误引起的，这可能会使程序陷入无限循环。我修复了那个错误，现在一切正常。

# java - 在 JSF 中的许多 Rich:datatable 中启用单个 h:selectbooleancheckbox

> ID：14357734
> 
> 赞同：1
> 
> 时间：2013-01-16T11:47:25.540
> 
> 标签：java, javascript, jsf-2, ajax4jsf

我有一个丰富的：数据表，其中有很多列，其中一列是 h:selectbooleancheckbox。我希望用户一次只从数据表中的许多复选框中选择一个复选框。如果一个复选框被选中一次，我没有问题我可以将它提交到表单。When a second checkbox is selected, for example, the former one should be deselected. 我怎么能这样做？提前感谢您的帮助......这是我正在使用的数据表：

```
<rich:dataTable id="vehicleTable" var="vhcl" value="#{tripsBacking.vehicleList}"
binding="#{tripsBacking.vehicleTable}" sortMode="single" 
footerClass="dr-table-footer rich-table-footer"
style="width: 500px; margin: 0px; padding: 0px;">

<rich:column id="col1" width="10px" headerClass="dr-table-header rich-table-header">
    <f:facet name="header">

    </f:facet>
    <h:selectBooleanCheckbox title="#{general.select}" >
    </h:selectBooleanCheckbox>
</rich:column>
<rich:column id="col2" label="#{general.vehicleName}" headerClass="dr-table-header rich-table-header" >
    <f:facet name="header">
        <h:outputText value="#{general.vehicleName}" id="vehicleNameLbl" />
    </f:facet>
    <h:outputText value="#{vhcl.vehicle.vehicleName}" id="vehicleNameValue" />
</rich:column>

<rich:column id="col3" label="#{general.vehicleType}" headerClass="dr-table-header rich-table-header" >
    <f:facet name="header">
        <h:outputText value="#{general.vehicleType}"
            id="state_capital" />
    </f:facet>
    <h:graphicImage value="#{vhcl.typeImage}" height="40" width="40" align="left"/>
</rich:column>
<rich:column id="col4" label="#{general.lastMessageDate}"
    headerClass="dr-table-header rich-table-header" > 
    <f:facet name="header">
        <h:outputText value="#{general.lastMessageDate}" id="lastMsgDateLabel" />
    </f:facet>
    <h:outputText value="#{vhcl.messageDate}" id="lastMsgDate" /> 
</rich:column>
<rich:column id="col5a" label="#{general.address}"
    headerClass="dr-table-header rich-table-header" >
    <f:facet name="header">
        <h:outputText value="#{general.address}" id="addressLabel" />
    </f:facet>
    <h:outputText value="#{vhcl.address}" id="addr" />
</rich:column> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:18:03.280

Ajax 提交每次更改并有一个动作侦听器方法，该方法将从列表中取消选择所有先前选择的项目。

```
<h:selectBooleanCheckbox title="#{general.select}" >
    <a4j:support event="onclick" listener="#{tripsBacking.selectSingleRow}" reRender="vehicleTable">
       <!-- use property that uniquely identifies a row -->
       <f:attribute name="selectedVehicleName" value="#{general.vehicleName}"/>
    </a4j:support>
</h:selectBooleanCheckbox> 
```

它将类似于上面的内容，其中 deselectAll 是 bean 中的一个动作侦听器方法：

```
public void selectSingleRow(ActionEvent event) {
    String vehicleName = (String) event.getComponent().getAttributes().get("selectedVehicleName");
    for (Vehicle v : vehicleList) {
          if (!v.getVehicleName.equals(vehicleName)) {
               v.setSelected(false);     
          }
    } 
} 
```

# html - Windows Phone 8 的 Phonegap/Cordova 网络字体

> ID：14357737
> 
> 赞同：0
> 
> 时间：2013-01-16T11:47:32.187
> 
> 标签：html, cordova, font-face, windows-phone-8

（可能与[Windows Phone 8 HTML5 App 中的 Webfont](https://stackoverflow.com/questions/14347667/webfont-in-windows-phone-8-html5-app)重复...但是，特别是有问题的 Phonegap）

我正在尝试在我的应用程序中使用自定义网络字体。它无法加载字体。（科尔多瓦 2.3.0 和 Windows Phone 8）。

似乎根本没有加载 css @font-face 块。无论哪种字体格式都没有运气。在构建操作中添加为“内容”的字体。

```
@font-face {
font-family: "SSPika";
src: url('ss-pika.eot');
src: url('ss-pika.eot?#iefix') format('embedded-opentype'),
   url('ss-pika.woff') format('woff'),
   url('ss-pika.ttf')  format('truetype'),
   url('ss-pika.svg#SSPika') format('svg');
font-weight: normal;
font-style: normal;
} 
```

与另一个问题类似，远程加载相同的内容（在 iframe 中）可以完美呈现。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T21:53:01.810

我已经搜索并找到了以下帖子。可能是相关的。

[Phonegap Windows Phone 7 动态 HTML 加载和使用 jQuery 的跨域调用](https://stackoverflow.com/questions/13038573/phonegap-windows-phone-7-dynamic-html-loading-and-cross-domain-calls-using-jquer)

“如果 Cordova 未初始化（即设备就绪尚未触发），浏览器控件会将其视为远程获取，并将您置于通常的跨域问题并拒绝”这可能是 CSS 的情况。也许您可以尝试在 deviceready 事件之后动态加载 CSS 并看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T21:49:30.633

可能是这个？Windows 手机支持网络字体。但是，如果它们嵌入在 XAP 中，它们将无法工作。这是一个已知问题，我们知道的唯一解决方法是将字体托管在远程服务器上，并可能使用 AppCache 将字体文件保存在设备本地。

# object - Objective-C 中的隐式对象指针

> ID：14357741
> 
> 赞同：0
> 
> 时间：2013-01-16T11:47:47.577
> 
> 标签：object, pointers, scope, objective-c-2.0

我正在使用 Apple 的 Programming With Objective-C 指南自学 Objective-C 2.0。

我有一个关于我认为是隐式创建的指针的问题。

如果我要重写示例代码：

```
@implementation XYZShoutingPerson
- (void)saySomething:(NSString *)greeting {
    NSString *uppercaseGreeting = [greeting uppercaseString];
    [super saySomething:uppercaseGreeting];
}
@end 
```

作为

```
@implementation XYZShoutingPerson
- (void)saySomething:(NSString *)greeting {
    [super saySomething:[greeting uppercaseString]];
}
@end 
```

我会收到一个隐式创建的指向新 NSString 对象的指针吗？如果是这样，指针的范围是什么？

一种方法被认为比另一种更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:30:20.023

重写的代码与原始代码基本相同。是的，您将收到来自 的指针`[greeting uppercaseString]`。我想我们可以说它的范围是 saySomething 方法。由大写字符串返回的字符串将保留计数为 1 并自动释放。在原始代码和您的版本中，除非`[super saySomething:]`保留其参数（这不太可能），否则将释放大写字符串的结果，然后在弹出自动释放池堆栈的当前帧时释放。出于实际目的（除非您正在管理自己的自动释放池），这意味着大写字符串的结果将在事件循环的当前轮次结束时被释放。

编译器可能足够聪明（尤其是如果您使用 ARC），可以在`[super saySomething:]`返回后立即释放大写字符串的结果。同样，这在两个版本的代码中都是相同的，原因是`[super saySomething:]`返回后未使用大写字符串的结果。

# android - 如何为不同的屏幕尺寸使用不同的代码？

> ID：14357744
> 
> 赞同：0
> 
> 时间：2013-01-16T11:47:22.310
> 
> 标签：android, configuration

我正在开发具有很多受支持屏幕尺寸的 android 程序，并且每个屏幕都有不同的布局，但有些布局有额外的按钮和视图，所以我想根据当前使用的设备更改代码，例如当我使用平板电脑时想使用不同的 main.java 代码我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:56:26.350

我认为您必须在活动中检查不同的屏幕尺寸，然后为此使用适当的 xml。以下代码可能有效

```
DisplayMetrics dm = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(dm);
    final int height=dm.heightPixels;
    final int width=dm.widthPixels;

    if(width == 720 || width==1280 && height == 1280 || height==720)    //galaxy s3
    {
      //code to select xml file
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:56:33.760

您可以为此在 res 文件夹中添加一个值：

```
- values-large
    * booleans.xml
- values
    * booleans.xml 
```

每个 booleans.xml 应该有不同的值：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <bool name="isTablet">true</bool>    
</resources> 
```

您可以根据需要按大小分开，而不是布尔值“isTablet”。然后，您可以获取此值并在您的代码中使用它：

```
public static boolean isTablet(Context context) {
    return context.getResources().getBoolean(R.bool.isTablet);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T11:54:46.087

要么你在android中使用碎片来满足你的条件......或者你可以在你的代码中包含检测屏幕尺寸的行，如果找到特定的屏幕尺寸，你可以连接额外的按钮（或其他任何东西）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T11:57:32.120

要检测屏幕尺寸，请使用[`DisplayMetrics`](http://developer.android.com/reference/android/util/DisplayMetrics.html)：

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics); 
```

Nexy 您可以在代码中使用`metrics.widthPixels`和/或`metrics.heightPixels`（或任何其他对您有用的字段）来对不同的屏幕尺寸做出反应：

```
if(metrics.widthPixels >= 500) {
  // Support code for additional buttons at a width of 500 and larger
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T12:02:31.843

要获得屏幕尺寸，请使用：

```
public static double getScreenSize(WindowManager windowManager) {
        DisplayMetrics metrics = new DisplayMetrics(); 
        windowManager.getDefaultDisplay().getMetrics( metrics ); 
        float widthInInches = metrics.widthPixels / metrics.densityDpi; 
        float heightInInches = metrics.heightPixels / metrics.densityDpi;

        return  Math.sqrt(Math.pow(widthInInches,2) + Math.pow(heightInInches,2));
    } 
```

确定是平板电脑：

```
public final static double TABLET_SIZE = 5.0; //inch

    public static boolean IsTablet(WindowManager windowManager) {
        double inch = getScreenSize(windowManager);             
        return inch >= TABLET_SIZE;
    } 
```

要确定是否纵向：

```
public static boolean isPortraitOrientation(Context context) {
    context.getResources().getConfiguration();
    return context.getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT;
} 
```

# c# - xml 中的元素始终具有空值

> ID：14357747
> 
> 赞同：0
> 
> 时间：2013-01-16T11:47:29.340
> 
> 标签：c#, xml, windows-phone-7

我想阅读我在这里写的xml文件

```
<?xml version="1.0" encoding="utf-8"?>
<ReyPatch>

  <Key name="{8880-089B7A97D4B7}" new="true">
    <Value name="" type="string" patchedValue="5lpha" />
    <Value name="LayID" type="dword" patchedValue="2" />
    <Value name="Usons" type="dword" patchedValue="1" />
    <Value name="IsBaition" type="dword" patchedValue="0" />
    <Value key="key" name="Type" type="dword" patchedValue="2036" />
<Value key="KeyHars" name="Count" type="dword" patchedValue="0" />
  </Key>
<Key name="BBBE-A957C7628109}" new="true">
    <Value name="" type="string" patchedValue="4pha" />
    <Value name="LayD" type="dword" patchedValue="2" />
    <Value name="Utons" type="dword" patchedValue="1" />
    <Value name="IsBfinition" type="dword" patchedValue="0" />
    <Value key="Keys\0" name="Type" type="dword" patchedValue="2807" />
    <Value key="Keys\0" name="Text" type="string" patchedValue="2" />
    <Value key="Keys\1" name="Type" type="dword" patchedValue="2097" />
    <Value key="Keers" name="Count" type="dword" patchedValue="0" />
  </Key>
</ReyPatch> 
```

我写了这段代码，但总是有 NullReferenceException

```
Uri url = new Uri("p.xml", UriKind.Relative);
            StreamResourceInfo resourceStream = Application.GetResourceStream(url);
            var doc = XDocument.Load(resourceStream.Stream);
            var newCookies = doc
            .Descendants()
            .Select(e =>
                new Key
                {
                    name = e.Element("name").ToString(),
                   IsNew =Convert.ToBoolean( e.Element("new").Value),
                    v = e.
                    Elements("Value").Select(i =>

                        new Value
                        {
                            name = i.Element("name").Value,
                            type = i.Element("type").Value,
                            patchedValue = i.Element("patchedValue").Value
                        }).ToArray()
                }).ToArray();
        } 
```

我一直在测试，但我没有找到任何方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:54:49.707

`name`, `new`,`type`和`patchedValue`是属性，而不是元素。您需要使用`Attribute`方法而不是`Element`. 并且为了防止 a`NullReferenceException`当该属性丢失时，您应该将属性转换为 a`string`而不是使用`ToString`or `Value`.:

```
 .Select(e =>
            new Key
            {
                name = (string)e.Attribute("name"),
               IsNew =Convert.ToBoolean((string)e.Attribute("new")),
                v = e.
                Elements("Value").Select(i =>

                    new Value
                    {
                        name = (string)i.Attribute("name"),
                        type = (string)i.Attribute("type"),
                        patchedValue = (string)i.Attribute("patchedValue")
                    }).ToArray()
            }).ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:58:11.393

你得到了例外，因为你得到了你的 xml 的所有后代。你应该使用`.Descendants("Key")`. 否则，将选择的第一个元素是`<ReyPatch>`元素，它没有元素`<name>`，你会得到异常`e.Element("name").ToString()`。

@juharr 是正确的，您正在尝试获取元素而不是属性。查看[XML 元素与属性的区别](http://www.w3schools.com/dtd/dtd_el_vs_attr.asp)

整个解析应该看起来像（我强烈建议使用节点转换而不是获取它们的值）：

```
 doc.Descendants("Key")
    .Select(key => new Key()
    {
        name = (string)key.Attribute("name"),
        IsNew = (bool)key.Attribute("new"),
        v = key.Elements()
                .Select(value => new Value()
                {
                    name = (string)value.Attribute("name"),
                    type = (string)value.Attribute("type"),
                    patchedValue = (string)value.Attribute("patchedValue")
                }).ToArray()
    }).ToArray(); 
```

我建议您使用 PascalCase 进行属性命名和更具描述性的属性。例如

```
public class Key
{
   public string Name { get; set; }
   public bool IsNew { get; set; }
   public Value[] Values { get; set; }
} 
```

# gwt - Phonegap 应用程序 - 这种方法听起来如何

> ID：14357753
> 
> 赞同：1
> 
> 时间：2013-01-16T11:47:42.607
> 
> 标签：gwt, cordova

我有一个整洁的 GWT 应用程序正在运行，我已经尝试了一段时间来在 Android 上工作。问题是我的 RPC 调用由于同源策略限制而失败。我花了一些时间试图让它工作，然后对自己想知道，为什么不让我的 Android 启动 Activity 从我的 GAE 服务器中拉出 Home.html 页面，然后我就不用担心 SOP。Presto，按预期工作，所以我的问题是，因为我的应用程序需要互联网连接才能工作，所以当我第一次启动应用程序时，它只是 JS 内容的初始缓存，用户可能会看到延迟。除此之外，我所有的 RPC 调用都请求非常少量的数据。你觉得这会飞吗？〜我看到的方式是，如果 JS 包含在 APK 中，那么下载/安装将需要更长的时间，如果它是从我的服务器动态检索的，则初始启动将需要更长时间，但 APK 下载会更快。这是一个有效的假设吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:07:59.547

您似乎正在解决一个问题，而这实际上并不是您设计应用程序的方式。您是否尝试过在您的 GAE 服务器上启用 CORS，如果是，出了什么问题？

# javascript - 在javascript中传递变量onclick

> ID：14357757
> 
> 赞同：0
> 
> 时间：2013-01-16T11:48:44.727
> 
> 标签：javascript

好的，伙计们，我正在尝试在`getIndividualMap`函数中使用该变量，但出现`undefined`错误。可能是什么问题呢？

```
 var i; 
    for(i=0;i<=(data.length -1);i++)
    {   
    $('#ResultsId').append("<table border='1'>" + 

    "<tr>" +
    "<th>UserID</th>" +
    "<th>RUNDATE</th>" +
    "<th>NAME</th>" +
    "<th>TIME</th>" +
    "<th>DISTANCE (KM)</th>" +

    "</tr>" +
    "<tr>" + 
    "<td>" + data[i].UserID + "</td>"  + " " + 
    "<td>" + data[i].runDate + "</td>"  + " " + 
    "<td>" + data[i].firstName + "</td>"  + " " + 
    "<td>" + data[i].Time + "</td>"  + " " + 
    "<td>" + data[i].Distance + "</td>" + 
    "<td>" +"<a href='#' onclick= 'getIndividualMap(i)'>"  + data[i].UserID +"</a>" + "</td>" + 
    "</tr>" + 
    "</table>" );
    }

getIndividualMap(){
console.log(i);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T11:52:52.190

函数参数变量丢失.....

```
getIndividualMap(i){
console.log(i);
} 
```

在下面的部分

```
"<td>" +"<a href='#' onclick= 'getIndividualMap(i)'>"  + data[i].UserID +"</a>" + "</td>" + 
```

***i 是硬编码的，但它是一个变量***

它应该是

```
"<td>" +"<a href='#' onclick= 'getIndividualMap("+ i + ")'>"  + data[i].UserID +"</a>" + "</td>" + 
```

# android - 如何通过登录在我们的安卓应用中显示 facebook 详细信息？

> ID：14357761
> 
> 赞同：1
> 
> 时间：2013-01-16T11:48:56.303
> 
> 标签：android, facebook, login

我有两个编辑文本..一个用于用户名，另一个用于密码..还有一个按钮..我正在使用来自[https://github.com/facebook/facebook-android-sdk的 facebook-sdk-android](https://github.com/facebook/facebook-android-sdk)

我想要的是单击按钮我想显示该用户的*facebook 详细信息*（用户将输入 facebook 凭据）我希望用户不要离开我的应用程序的任何地方......我什至不想要我现在得到的 facebook 登录屏幕。 .

* * *

2）问题是如何在我的android应用程序中以特定格式显示用户详细信息，例如gridview或listview？

或者我想用 facebook 按钮实现这个登录。点击那个按钮，就会弹出一个 facebook 登录屏幕。

[图片登录](http://www.google.com/imgres?um=1&hl=en&tbo=d&biw=1024&bih=677&tbm=isch&tbnid=jSaqtM-tBezs0M%3a&imgrefurl=http://quickblox.com/developers/SuperSample_%28Map_Chat_code_sample%29_Android&docid=F65ONe8Mql4dyM&imgurl=http://quickblox.com/developers/images/5/58/SuperSample-android-login-fb1.png&w=320&h=480&ei=r6P2UPa-AcSUrgemooGoCQ&zoom=1&iact=hc&vpx=709&vpy=84&dur=1964&hovh=275&hovw=183&tx=65&ty=113&sig=117413978145150939804&page=1&tbnh=134&tbnw=89&start=0&ndsp=30&ved=1t:429,r:6,s:0,i:99)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:44:45.217

社交插件是您正在寻找的：

[https://developers.facebook.com/docs/plugins/](https://developers.facebook.com/docs/plugins/)

注册详细信息自动填充： [https ://developers.facebook.com/docs/plugins/registration/](https://developers.facebook.com/docs/plugins/registration/)

登录按钮： [https ://developers.facebook.com/docs/reference/plugins/login/](https://developers.facebook.com/docs/reference/plugins/login/)

要从用户那里获取更多信息，您必须一路创建一个 facebook 应用程序。检查相关文档。

# wordpress - 来自 .post() 请求的数字响应添加了 0

> ID：14357762
> 
> 赞同：1
> 
> 时间：2013-01-16T11:48:58.013
> 
> 标签：wordpress, jquery

我正在使用 Wordpress ajax api 使用 .post() ajax 将 php 函数的结果发送到客户端。问题是返回 0 的值以及数值。所以如果数值是“3”我得到“30”。

所以在这里我有一个 php 函数，我用它来获取 user_id 并为该用户返回相应的看不见的评论计数。

```
 add_action("wp_ajax_return_unseen_comment_count","return_unseen_comment_count");
 function return_unseen_comment_count() {
    $user_id = $_POST['userId'];
    $count = get_unseen_comment_count($user_id);
    echo $count;
 } 
```

如果我在 $count 后面加上“test”这个词，我会得到“3test0”。

然后我使用一个间隔来检查函数是否有新的看不见的评论。

```
$(document).ready(function() {
    var userId = fodAjax.user_id;
    var cmntCount = $(".cmnt-cnt").text();
    if (userId > 0) {
      setInterval(function() {
               data = {
                  action: 'return_unseen_comment_count',
                  userId: userId
               };
               $.post(ajaxurl, data, function (response) {  
                  console.log(response);                  
               });
      }, 10000); //10 seconds
    }
}); 
```

现在我`get_unseen_comment_count($user_id)`在另一个函数中使用在我的模板中显示计数，它返回正确的值“3”，所以它没有做任何额外的事情，应该添加 0。我在这里错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:59:15.333

你必须写`exit;`在`echo`声明之后。

> 如果请求 url 为 wp-admin/admin-ajax.php 时 AJAX 请求失败，它将根据失败的原因返回 -1 或 0。**此外，如果 AJAX 请求成功，它将返回 0**。

[参考](http://codex.wordpress.org/AJAX_in_Plugins)。

# c# - 如何将旧的 Microsoft Visual C# 2010 express 32 位项目更改为 64 位

> ID：14357767
> 
> 赞同：2
> 
> 时间：2013-01-16T11:49:12.420
> 
> 标签：c#, visual-studio-2010, 32bit-64bit

我有一个在 Microsoft Visual C# Express 2010 中构建的项目。该程序最初是作为 32 位应用程序构建的，我想将其更改为 64 位应用程序。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:17:49.207

[在这里](https://stackoverflow.com/questions/11600162/difference-between-bin-debug-and-bin-release/11601057#11601057)查看我的答案，以及它下面的评论（如果你找不到“配置管理器”）。

工具 -> 选项 -> 选中左下角的框 -> 项目和解决方案 -> 常规 -> 显示高级构建配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:53:30.370

只要您使用“任何 CPU”构建它，我认为没有必要进行任何转换。可以通过项目属性窗口 -> 构建选项卡 -> 平台目标下拉菜单访问此选项。

但是，如果您运行的是 VS Express 版本，则无法使用更改目标平台的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T12:01:38.150

关于何时专门针对 64x 而不是“任何 CPU”的附加信息，虽然现在看起来不是，但如果您打算使用 64x DLL，这将不得不改变（会添加这个作为评论，但我认为它非常有用）。

[何时在 Visual Studio 中以 x64 为目标](https://stackoverflow.com/questions/8436363/when-to-target-x64-in-visual-studio)

# netlink - 了解导致netlink中链路状态变化的接口

> ID：14357775
> 
> 赞同：0
> 
> 时间：2013-01-16T11:49:50.857
> 
> 标签：netlink

我已经使用 Netlink 套接字编写了一个程序。我能够成功检测到链接状态的变化（即，插入/拔出网络电缆时）。但在这两种情况下，我都得到了一个`RTM_NEWLINK`事件。

我想我可以使用 getifaddrs 系统调用查询`SIOCGIFFLAGS`并获取`IFF_UP`状态以了解状态。为此，我想知道导致链接事件的接口是什么。有办法知道吗？目前我不知道结构中的任何成员，`nlmsghdr`或者`sockaddr_nl`会给出导致链接更改的接口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-20T19:56:12.203

您可以从 ifi_index 中获取名称：

```
struct ifinfomsg *ifi   = NLMSG_DATA(h);
char name[IF_NAMESIZE];
printf("%s is %s\n", if_indextoname(ifi->ifi_index, name), ifi->ifi_flags & IFF_UP ? "up":"down"); 
```

其中 h 是您的 nlmsghdr 结构。

我显然不是专家，但我发现当你插入和拔出电缆时得到 RTM_NEWLINK 很有趣。当电缆被拔下时，我希望 RTM_DELLINK ......或者我可能遗漏了一些东西......

是的，我遗漏了一些东西 :) 您只需查看 ifi->ifi_flags 即可获得状态。根据您的需要，我猜您会对 IFF_UP、IFF_RUNNING 和 IFF_LOWER_UP 感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T07:33:58.020

使用 SIOCIFCONF ioctl 调用，您可以遍历所有可用的接口。然后使用 SIOCGIFFLAGS 和 IFF_UP 和 IFF_RUNNING 您可以检查该接口的状态。但是如果您进行桥接并向该桥添加一两个接口，SIOCGIFCONF 并没有多大帮助。

这些天我也在处理netlink。我的问题几乎与您的“了解导致链接状态更改的界面”相似。请参考我创建的链接：[https ://superuser.com/questions/596296/how-to-identify-that-one-of-the-bridge-interfacessw-bridge-in-linux-is-down](https://superuser.com/questions/596296/how-to-identify-that-one-of-the-bridge-interfacessw-bridge-in-linux-is-down)

您能否发布您的netlink套接字代码。

# java - 如何为将目录复制到目录的 API 编写 JUnit 测试

> ID：14357779
> 
> 赞同：1
> 
> 时间：2013-01-16T11:50:02.493
> 
> 标签：java, junit, directory

我只想编写一个 JUnit 测试用例，它只测试我下面的代码是否已成功将目录复制到新目录。

```
File origPath = new File("/sourceDir/");

File newPath = new File("/destDir/");

try {
    FileUtils.copyDirectory(origPath, newPath);
    } catch (Throwable e) {

    } 
```

请建议，我如何编写 JUnit 测试或模拟来测试上述代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T12:01:12.757

您需要临时文件夹规则。

```
@Rule
public TemporaryFolder tempFolder = new TemporaryFolder(); 
```

然后创建一个新文件夹：

```
File source = tempFolder.newFolder(); 
```

然后调用 copyDirectory 方法：

```
FileUtils.copyDirectory(source.getAbsolutePath(), source.getParent() + "/dest"); 
```

然后您可以检查该文件夹是否存在：

```
new File(tempFolder.getRoot(), "dest").exists() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T11:59:46.627

一个简单的解决方案是检查`/sourceDir/`目录中是否存在所有文件`/destDir/`：

```
File origPath = new File("/sourceDir/");
File newPath = new File("/destDir/");
for (File file : origPath.listFiles()) {
    assertTrue(new File(newPath, file.getName()).exists());
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T12:00:20.927

你可以模拟，但这只会测试你调用的一些方法，而不是它实际工作，即它看起来更像一个集成测试，我会简单地创建一些真正的测试，例如：

1.  检查虚假目录是否不存在（“Asdlkjslajfrhg”）尝试复制它并确保您得到正确的异常
2.  创建一个假目录，复制它并确保新目录已创建并且为空
3.  创建一个假目录和一些包含数据的文件，复制该目录并确保已创建新目录并包含所有具有相同内容的文件
4.  确保在每次测试后清洁所有物品

注意：最近版本的 JUnit 包含一个[`TemporaryFolder`class](http://kentbeck.github.com/junit/javadoc/4.10/org/junit/rules/TemporaryFolder.html)，它应该可以帮助您处理大部分“伪造目录”部分。另请参阅[此帖子](http://weblogs.java.net/blog/johnsmart/archive/2009/09/29/working-temporary-files-junit-47)以获取示例。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T12:00:25.813

除非在任何测试中使用模拟的方法中有很多非 IO 逻辑`copyDirectory`是没有意义的，因为它只会测试代码调用执行它包含的操作。

所以测试将不得不：

*   创建一个源目录并向其中写入文件。
*   创建目标目录。
*   调用`copyDirectory`方法。
*   读取目标目录的内容并断言内容。
*   清理。

# c# - c#中用于匹配文本中邮件的正则表达式

> ID：14357783
> 
> 赞同：0
> 
> 时间：2013-01-16T11:50:15.337
> 
> 标签：c#, regex, email

我在`sometext@mail.com`一些文本中有以下格式的邮件地址。@mail.com 始终采用相同的格式，并且某些文本正在更改。如何在文本中匹配 sometext@mail.com。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:55:25.667

这不是微不足道的，无论您使用哪种正则表达式，您都可能在极端情况下以不正确的匹配结束，但作为第一个近似值，我建议

```
\b\S+@mail\.com\b 
```

这不会匹配包含空格的邮件地址，但它会正确处理地址周围的标点符号（如`"(sometext@mail.com)"`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:56:28.393

这是您需要的：

```
\b[_a-z0-9-]+(\.[_a-z0-9-]+)*@mail\.com\b 
```

***编辑：（***我刚刚在我的电脑上测试过，它可以工作）

```
using System.Text.RegularExpressions;

string body = "hgfhfghgfhfhh fdfdf@mail.com gfhhfhf";
Match match = Regex.Match(body, @"\b[_a-z0-9-]+(\.[_a-z0-9-]+)*@mail\.com\b",
                          RegexOptions.IgnoreCase); 
if (match.Success) { 
    // Finally, we get the Group value and display it. 
    string key = match.Groups[1].Value; 
    Console.WriteLine(key); 
} 
```

[现场演示](http://regexr.com?33e3s)

# java - 返回 null 作为 SOAP 响应

> ID：14357784
> 
> 赞同：2
> 
> 时间：2013-01-16T11:50:16.517
> 
> 标签：java, soap, null, wsdl

我实施了以下服务：

```
@WebService
@SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.WRAPPED,
             style = SOAPBinding.Style.DOCUMENT,
             use = SOAPBinding.Use.LITERAL)
public class AccountsService {

    @WebResult
    public Account findById(@WebParam(name = "id") String id) {
        return null;
    }
} 
```

`Account`XSD 通过 JAXB 生成的类在哪里。

当`AccountsService#findById`被调用时抛出异常：

```
Interceptor for AccountsService#findById has thrown exception, unwinding now
org.apache.cxf.interceptor.Fault
    at org.apache.cxf.jaxws.interceptors.WrapperClassOutInterceptor.handleMessage(WrapperClassOutInterceptor.java:121)[57:org.apache.cxf.bundle:2.4.3.fuse-01-02]
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)[57:org.apache.cxf.bundle:2.4.3.fuse-01-02]
    at org.apache.cxf.interceptor.OutgoingChainInterceptor.handleMessage(OutgoingChainInterceptor.java:77)[57:org.apache.cxf.bundle:2.4.3.fuse-01-02]
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)[57:org.apache.cxf.bundle:2.4.3.fuse-01-02]
    at org.apache.cxf.phase.PhaseInterceptorChain.resume(PhaseInterceptorChain.java:232)[57:org.apache.cxf.bundle:2.4.3.fuse-01-02]
    at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:78)[57:org.apache.cxf.bundle:2.4.3.fuse-01-02]
    at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.serviceRequest(JettyHTTPDestination.java:319)[57:org.apache.cxf.bundle:2.4.3.fuse-01-02]
    at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.doService(JettyHTTPDestination.java:287)[57:org.apache.cxf.bundle:2.4.3.fuse-01-02]
    at org.apache.cxf.transport.http_jetty.JettyHTTPHandler.handle(JettyHTTPHandler.java:72)[57:org.apache.cxf.bundle:2.4.3.fuse-01-02]
    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:939)[102:org.eclipse.jetty.server:7.4.5.fuse20111017]
    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:875)[102:org.eclipse.jetty.server:7.4.5.fuse20111017]
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)[102:org.eclipse.jetty.server:7.4.5.fuse20111017]
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:185)[102:org.eclipse.jetty.server:7.4.5.fuse20111017]
    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:110)[102:org.eclipse.jetty.server:7.4.5.fuse20111017]
    at org.eclipse.jetty.server.Server.handleAsync(Server.java:391)[102:org.eclipse.jetty.server:7.4.5.fuse20111017]
    at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:443)[102:org.eclipse.jetty.server:7.4.5.fuse20111017]
    at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:922)[102:org.eclipse.jetty.server:7.4.5.fuse20111017]
    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:780)[97:org.eclipse.jetty.http:7.4.5.fuse20111017]
    at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220)[97:org.eclipse.jetty.http:7.4.5.fuse20111017]
    at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:43)[102:org.eclipse.jetty.server:7.4.5.fuse20111017]
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:538)[98:org.eclipse.jetty.io:7.4.5.fuse20111017]
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:43)[98:org.eclipse.jetty.io:7.4.5.fuse20111017]
    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:529)[103:org.eclipse.jetty.util:7.4.5.fuse20111017]
    at java.lang.Thread.run(Thread.java:662)[:1.6.0_24]
Caused by: java.lang.NullPointerException
    at ru.troika.ccit.esb.enterprise.hr.publishemployeehistory.impl.jaxws_asm.GetEmployeeByIdResponse_WrapperTypeHelper1.createWrapperObject(Unknown Source)[:]
    at org.apache.cxf.jaxws.interceptors.WrapperClassOutInterceptor.handleMessage(WrapperClassOutInterceptor.java:105)[57:org.apache.cxf.bundle:2.4.3.fuse-01-02]
    ... 23 more 
```

是否可以`(Account)null`作为响应返回？

**注意**：输出上有空`Account`对象不是合适的解决方案。

# php - PDO 识别缺失的绑定变量

> ID：14357786
> 
> 赞同：3
> 
> 时间：2013-01-16T11:50:20.090
> 
> 标签：php, pdo

使用 PDO 比较乏味的地方之一是它说缺少一些变量

> PDOStatement::execute(): SQLSTATE[HY093]: Invalid parameter number: 绑定变量数与标记数不匹配

...但不告诉哪些。有没有办法识别它们？例如

```
$sql = "SELECT id, name WHERE id = :id AND name like  :search_tem";

$stmt = $pdo->prepare($sql);
$stmt->bindValue(':id', '1');
$stmt->execute(); // throws exception - "**search_term missing" 
```

很明显，每个人都需要这样的东西。但我不能一个简单的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-20T10:34:59.960

由于我的声誉较低，我无法直接发表评论。因此，将其想象为对 2013 年 1 月 19 日 15:58 发布的 Ragen Dazs 的回复。我知道这个话题已经有几天了，但如果像我这样的人通过谷歌搜索偶然发现这个......

但是，我在倒数第三行中遇到了正则表达式的问题。正如您在[此示例](https://regex101.com/r/NtokFY/1)中看到的那样，表达式还匹配以 00:00:00 作为时间的时间值。所以我建议使用这个[例子](https://regex101.com/r/Z0K3dt/3)中的正则表达式。

我也想知道是否有不必要的参数。我就是这样做的，它需要一个类似于上面示例中的 SQL 查询和一个参数数组（参见 php doc example #2 for [PDOStatement::execute](http://php.net/manual/en/pdostatement.execute.php)）。

```
 /**
 * Checks an parameter array against the sql query. it will tell you if there are any missing or needless parameters
 *
 * @param string $query      Sql query
 * @param array  $parameters Parameters array
 *
 * @return bool|array Returns TRUE if no missing or needless parameters where found or a list with the missing
 *                    or needless parameters
 */
private function checkParameters($query, $parameters)
{
    $parameterTMP = $parameters;
    $parameterCount = count($parameterTMP);
    $regexMatchCounter = preg_match_all("/:[^]\\D\\w*/", $query, $regexMatches);

    // if there are parameter in the $parameters array oder parameters in the sql query
    if( $parameterCount > 0 || $regexMatchCounter > 0 )
    {
        // take every parameter found in the sql query
        foreach( $regexMatches[ 0 ] as $parameterName )
        {
            // check if the required parameter is in the parameters array
            if( !array_key_exists($parameterName, $parameters) )
            {
                // if it is not in the parameters array, add it to the list of missing parameters
                // and continue with the next parameter from the query
                $result[ 'missing' ][] = $parameterName;
                continue;
            }

            // if the required parameter is in the parameter array, delete it from this array
            // so we get a list of parameters that are needless
            unset($parameterTMP[ $parameterName ]);
        }

        // check if there are (needless) parameters left
        if( count($parameterTMP) > 0 )
        {
            // if so, add them to the list of needles parameters
            $result[ 'needless' ] = array_keys($parameterTMP);
        }

        // if at this point $result is an array,
        // some parameters are missing or needless, so we return the result list(s)
        if( isset($result) && is_array($result) )
        {
            return $result;
        }
    }

    // if we reach this point, no missing or needless parameters where found,
    // you are good to go
    return true;
} 
```

如果有人希望它在出现问题时抛出异常，只需替换“return $result;”即可 使用以下代码行：

```
 $missingCount = 0;
    $missing = "";

    $needlessCount = 0;
    $needless = "";

    if( array_key_exists('missing', $parameters) )
    {
        $missingCount = count($parameters[ 'missing' ]);
        $missing = " (" . implode(", ", $parameters[ 'missing' ]) . ") ";
    }

    if( array_key_exists('needless', $parameters) )
    {
        $needlessCount = count($parameters[ 'needless' ]);
        $needless = " (" . implode(", ", $parameters[ 'needless' ]) . ")";
    }

    $msg = "There are " . $missingCount . " missing parameter(s)".$missing." and ".$needlessCount." needless parameter(s)".$needless.".";

    throw new Exception($msg); 
```

玩得开心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T13:01:47.137

我想说命名​​占位符是 PDO 团队专门为此目的发明的 - 以简化查询和占位符的视觉验证。

我不得不同意，这样的功能可能是某种语法错误糖，但老实说，我觉得它不太有用。还有其他一些更令人费解的错误（比如`you have an error near ''`一个），而找到丢失的占位符并不是什么大问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T15:58:23.007

经过几天搜索这个主题，测试了一些东西，我找到了这个解决方案 - 按照`bind`我的*Database*类的方法中的代码：

```
// [Method from Class Database]

/**
 * @param PDOStatement stmt
 * @param array data
 * @throws Exception if some variables are missing when interpolate query
 * @example $db->bind($stmt, $_POST)
 */
function bind(&$stmt, $data) {
    $sql = $stmt->queryString;
    // Sort $data keys to prevent erroneus bind parameters
    ksort($data);
    $data = array_reverse($data);
    foreach ($data as $_key => $_val) {
        if (preg_match("/:$_key/", $sql)) {
            $stmt->bindParam(":$_key", $data[$_key]);
            $sql = preg_replace("/:$_key/", $this->dbh->quote($data[$_key]), $sql, 1);
        }
    }

    //  if ($this->debug) {
    //      $this->fb->info($sql, 'SQL');
    //      $this->fb->info($stmt, 'Statment');
    //      $this->fb->info($data, 'Raw Data');
    //  }

    if (strpos($sql, ":")) {
        $matches = array();
        $this->dbg = preg_match_all('/:[A-Za-z0-9_]*/', $sql, $matches);
        throw new Exception('PDO Missing variables: ' . implode(', ', $matches[0]));
    }
} 
```

此代码需要修改，如果有人发现错误或改进了某些东西，请分享！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T12:12:49.587

## 更新的答案

第一次误读了这个问题，我现在可以理解你想要什么。据我所知，这是不可能的，因为错误消息是由 PDO 异常定义的。

但是，一种解决方法可能是为 PDO 编写一个包装类，并检查绑定值并自行查询，然后如果缺少值，则抛出您自己的异常。这可能是实现这一目标的最佳方式......

## 原始答案

> 很明显，每个人都需要这样的东西。但我不能一个简单的解决方案。

我不同意这一点，添加这种功能将毫无意义。考虑一下：

```
"SELECT id, name WHERE id = '1' AND name like  " 
```

如果允许，这就是您的代码将输出的内容！显然，上述内容**行不通**`LIKE`，因为该术语中没有任何内容。

我可以理解您为什么要这样做，因为我过去也忘记（有意和无意地）绑定值，但是，实际上没有任何好处，因为如果您不绑定值，查询将根本无法工作。

像这样动态构建查询会更好：

```
// Gather the where parameters
$get_data_where = array();

// Field 2
if(!empty($parameters['field_1'])){
    $get_data_where[':field_1'] = '%'.$parameters['field_1'].'%';
}           
// Field 2
if(!empty($parameters['field_2'])){
    $get_data_where[':field_2'] = $parameters['field_2'];
}   

// Combine the where array with the bind valus array
$this->mssql->bind_values = array_merge($this->mssql->bind_values,$get_data_where);

// Prepare the SQL to gather the data
$SQL  = "SELECT * \n";
$SQL .= "FROM [Some_Table] AS ST \n";

// Append the where statement if necessary
// Build the where statement based on bind values
if(!empty($get_data_where)){
    $SQL .= "WHERE \n\t";

    // Field 1
    if(!empty($this->mssql->bind_values[':field_1'])){
        $SQL .= $where_and."ST.[Field_1] LIKE :field_1 \n\t";
        // Separate the where conditions
        $where_and = "AND ";
    }               
    // Field 2
    if(!empty($this->mssql->bind_values[':field_2'])){
        $SQL .= $where_and."ST.[Field_2] = :field_2 \n\t";
        // Separate the where conditions
        $where_and = "AND ";
    }
} 
```

# android - 双击时如何停止android webview内容重排？

> ID：14357787
> 
> 赞同：0
> 
> 时间：2013-01-16T11:50:34.053
> 
> 标签：android, zooming, android-webview, reflow

首先，我希望 WebView 可以滚动，但它需要像图片一样表现，这样滚动不会导致 WebView 重新排列其布局以适应屏幕。当页面真的比屏幕大时，它应该只提供滚动条。

我已阅读[How to stop android webview from wrapping content while zooming?](https://stackoverflow.com/questions/12103402/how-to-stop-android-webview-from-wrapping-content-while-zooming) . 除了执行的双击之外，它可以工作。

要重新生成问题，
1\. 我将一个充满文本的网页加载到全屏 WebView。
2.双击屏幕右侧。<--这里只是放大，没问题
3\. 双击屏幕左侧。

问题来了。文本重新排列。当我缩放回原始比例时。文本仅占屏幕的一半。

无论发生什么，如何阻止 webView 重新排列其布局？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T07:37:42.163

我终于通过这条线解决了这个问题。

```
webView.getSettings().setLayoutAlgorithm(WebSettings.LayoutAlgorithm.NORMAL); 
```

默认情况下，`WebSettings.LayoutAlgorithm`是`NARROW_COLUMNS`.

通过学习`android.webkit.ZoomManager`类，它必须 reflow (rearrange) if`NARROW_COLUMNS`和 else case 是 reflow 如有必要。我不知道“必要”是什么，但至少在我的情况下它不会再回流了。

有一些离题，但我的目标是防止内容重排。我发现在 Android 2.x 设备上，有时，如果我单击 zoomControl 按钮，即使设置了网页内容也会重排`webView.getSettings().setUseWideViewPort(true);`。在 Android 4 上，这个问题不存在。

如果我没有记错的话。我认为这是网页元标记造成的。因此，我确保网页没有这行：`<meta name="viewport" content="width=device-width">`。我真的可以看到没有这行的不同之处，网页内容不会重排。

# php - amazon s3 视频对象信息

> ID：14357789
> 
> 赞同：0
> 
> 时间：2013-01-16T11:50:38.933
> 
> 标签：php, video, amazon-s3

在我当前的项目中，我使用 Amazon S3 来存储文件。将视频文件上传到 S3 服务器后，我使用 getObjectInfo() 方法获取该文件的信息。它返回一个数组，看起来像这样，

```
Array
(
[time] => 1358335793
[hash] => 8bc4fab9a5d3ae66963f8166f09d3a0f
[type] => application/octet-stream
[size] => 3144689
) 
```

我只想知道关键**时间**的功能是什么？似乎这是当前时间戳。如果是这样，有没有办法直接从 S3 获取视频持续时间？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-04T13:21:49.783

用于存储文件的 Amazon S3 服务器。使用 FFMPEG 了解视频时长。这是获取视频长度的链接

[使用正则表达式和 ffmpeg 获取视频的长度](https://stackoverflow.com/questions/7395343/get-length-of-a-video-using-regex-and-ffmpeg)

# entity-framework - “SQLExpress 数据库文件自动创建错误”但 DefaultConnect 指向 SQL Server 2008 R2

> ID：14357791
> 
> 赞同：1
> 
> 时间：2013-01-16T11:50:40.480
> 
> 标签：entity-framework, asp.net-mvc-4, sql-server-2008-r2, sql-server-express, iis-express

我正在使用 Visual Studio 2012 创建一个 MVC4 Internet 应用程序。我已从 Entity Framework 移出，现在使用本地安装的 SQL Server 2008 R2。

我将连接字符串更改为指向我的本地 SQL Server 实例：

```
<connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=.;Initial Catalog=NotesBoard;Integrated Security=SSPI;" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

我的项目中没有其他连接字符串。这工作得很好，但现在我得到了

* * *

**建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）**

**说明：**执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

**SQLExpress 数据库文件自动创建错误：**
连接字符串指定了本地 Sql Server Express 实例...

* * *

奇怪的是，它间歇性地起作用，然后又回到它的损坏状态。

**更新：回答[Pawel](https://stackoverflow.com/users/1168070/pawel)的问题：** 我的所有控制器都引用了以下类：

```
public class DataAccess
{

    public void ExecuteNonQuery(String StoredProc, List<SqlParameter> Parameters)
    {
        String ConnectionString = System.Configuration.ConfigurationManager.ConnectionStrings["DefaultConnection"].ToString();
        SqlConnection cn = new SqlConnection(ConnectionString);

        SqlCommand cm = new SqlCommand(StoredProc, cn);
        cm.CommandType = CommandType.StoredProcedure;

        FillCommandParameters(Parameters, cm);

        cn.Open();
        cm.ExecuteNonQuery();
        cn.Close();
    }

    public DataSet Execute(String StoredProc, List<SqlParameter> Parameters = null)
    {
        String ConnectionString = System.Configuration.ConfigurationManager.ConnectionStrings["DefaultConnection"].ToString();
        SqlConnection cn = new SqlConnection(ConnectionString);

        SqlCommand cm = new SqlCommand(StoredProc, cn);
        cm.CommandType = CommandType.StoredProcedure;

        FillCommandParameters(Parameters, cm);

        SqlDataAdapter da = new SqlDataAdapter();
        da.SelectCommand = cm;
        DataSet ds = new DataSet();

        cn.Open();
        da.Fill(ds);
        cn.Close();

        return ds;
    }

    private static void FillCommandParameters(List<SqlParameter> Parameters, SqlCommand cm)
    {
        if (Parameters != null)
        {
            if (Parameters.Count > 0)
            {
                foreach (var Parameter in Parameters)
                {
                    cm.Parameters.Add(Parameter);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:57:06.340

如果这是 SQL Server **Express**（标签建议如此），那么您很可能调用了一个命名实例，`SQLEXPRESS`因为这是 SQL Server Express 安装的默认实例名称。如果是这种情况，您需要将连接字符串更改为`Data Source=.\SQLEXPRESS`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-10T12:26:45.460

重新部署时，我在 MVC4 站点上遇到了同样的错误。我不能说问题的根本原因是什么，但似乎是在重新部署站点时保留了浏览器中缓存的某些内容（可能是会话 Guid），并且由于某种原因这会导致服务器端代码抛出这个奇怪的错误。

关闭并重新打开浏览器似乎会清除缓存，然后网站按预期工作。这或许可以解释问题的间歇性。

# java - Hive-metastore 错误：javax.jdo.JDOFatalInternalException：捕获到意外异常

> ID：14357794
> 
> 赞同：1
> 
> 时间：2013-01-16T11:50:49.077
> 
> 标签：java, hadoop, hive

解决与[hive-site.xml 相关的错误后，在类路径中找不到](https://stackoverflow.com/questions/14353394/hive-site-xml-not-found-on-classpath).. 开始出现以下错误。不知道我哪里错了..任何建议..?? 我应该更改权限吗，（在一些博客中阅读）但 /tmp 已经是 777 ..

```
13/01/16 15:01:11 WARN conf.HiveConf: DEPRECATED: Ignoring hive-default.xml found on the CLASSPATH at /etc/hive/conf.dist/hive-default.xml
13/01/16 15:01:16 INFO metastore.HiveMetaStore: 0: Opening raw store with implemenation class:org.apache.hadoop.hive.metastore.ObjectStore
13/01/16 15:01:17 INFO metastore.ObjectStore: ObjectStore, initialize called
Exception in thread "main" com.google.common.util.concurrent.UncheckedExecutionException: javax.jdo.JDOFatalInternalException: Unexpected exception caught.
NestedThrowables:
java.lang.reflect.InvocationTargetException
    at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2256)
    at com.google.common.cache.LocalCache.get(LocalCache.java:3980)
    at com.google.common.cache.LocalCache$LocalManualCache.get(LocalCache.java:4783)
    at org.apache.hcatalog.common.HiveClientCache.getOrCreate(HiveClientCache.java:166)
    at org.apache.hcatalog.common.HiveClientCache.get(HiveClientCache.java:142)
    at org.apache.hcatalog.common.HCatUtil.getHiveClient(HCatUtil.java:542)
    at org.apache.hcatalog.mapreduce.HCatUtils.getInputJobInfo(HCatUtils.java:75)
    at org.apache.giraph.io.hcatalog.GiraphHCatInputFormat.setVertexInput(GiraphHCatInputFormat.java:81)
    at org.apache.giraph.io.hcatalog.HiveGiraphRunner.run(HiveGiraphRunner.java:174)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)
    at org.apache.giraph.io.hcatalog.HiveGiraphRunner.main(HiveGiraphRunner.java:147)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:197)
Caused by: javax.jdo.JDOFatalInternalException: Unexpected exception caught.
NestedThrowables:
java.lang.reflect.InvocationTargetException
    at javax.jdo.JDOHelper.invokeGetPersistenceManagerFactoryOnImplementation(JDOHelper.java:1186)
    at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:803)
    at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:698)
    at org.apache.hadoop.hive.metastore.ObjectStore.getPMF(ObjectStore.java:246)
    at org.apache.hadoop.hive.metastore.ObjectStore.getPersistenceManager(ObjectStore.java:275)
    at org.apache.hadoop.hive.metastore.ObjectStore.initialize(ObjectStore.java:208)
    at org.apache.hadoop.hive.metastore.ObjectStore.setConf(ObjectStore.java:183)
    at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:62)
    at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117)
    at org.apache.hadoop.hive.metastore.RetryingRawStore.<init>(RetryingRawStore.java:62)
    at org.apache.hadoop.hive.metastore.RetryingRawStore.getProxy(RetryingRawStore.java:71)
    at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.newRawStore(HiveMetaStore.java:346)
    at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.getMS(HiveMetaStore.java:333)
    at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.createDefaultDB(HiveMetaStore.java:371)
    at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.init(HiveMetaStore.java:278)
    at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.<init>(HiveMetaStore.java:248)
    at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.<init>(HiveMetaStoreClient.java:114)
    at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.<init>(HiveMetaStoreClient.java:98)
    at org.apache.hcatalog.common.HiveClientCache$CacheableHiveMetaStoreClient.<init>(HiveClientCache.java:245)
    at org.apache.hcatalog.common.HiveClientCache$4.call(HiveClientCache.java:169)
    at org.apache.hcatalog.common.HiveClientCache$4.call(HiveClientCache.java:166)
    at com.google.common.cache.LocalCache$LocalManualCache$1.load(LocalCache.java:4786)
    at com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3579)
    at com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2372)
    at com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2335)
    at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2250)
    ... 16 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.jdo.JDOHelper$16.run(JDOHelper.java:1958)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.jdo.JDOHelper.invoke(JDOHelper.java:1953)
    at javax.jdo.JDOHelper.invokeGetPersistenceManagerFactoryOnImplementation(JDOHelper.java:1159)
    ... 41 more
Caused by: java.lang.NullPointerException
    at org.datanucleus.plugin.NonManagedPluginRegistry.registerBundle(NonManagedPluginRegistry.java:443)
    at org.datanucleus.plugin.NonManagedPluginRegistry.registerBundle(NonManagedPluginRegistry.java:355)
    at org.datanucleus.plugin.NonManagedPluginRegistry.registerExtensions(NonManagedPluginRegistry.java:215)
    at org.datanucleus.plugin.NonManagedPluginRegistry.registerExtensionPoints(NonManagedPluginRegistry.java:156)
    at org.datanucleus.plugin.PluginManager.registerExtensionPoints(PluginManager.java:82)
    at org.datanucleus.OMFContext.<init>(OMFContext.java:156)
    at org.datanucleus.OMFContext.<init>(OMFContext.java:137)
    at org.datanucleus.ObjectManagerFactoryImpl.initialiseOMFContext(ObjectManagerFactoryImpl.java:132)
    at org.datanucleus.jdo.JDOPersistenceManagerFactory.initialiseProperties(JDOPersistenceManagerFactory.java:363)
    at org.datanucleus.jdo.JDOPersistenceManagerFactory.<init>(JDOPersistenceManagerFactory.java:307)
    at org.datanucleus.jdo.JDOPersistenceManagerFactory.createPersistenceManagerFactory(JDOPersistenceManagerFactory.java:255)
    at org.datanucleus.jdo.JDOPersistenceManagerFactory.getPersistenceManagerFactory(JDOPersistenceManagerFactory.java:182)
    ... 49 more 
```

# jquery - jQuery Awkward Slider 与 asp.net webform 一起使用时不起作用

> ID：14357798
> 
> 赞同：2
> 
> 时间：2013-01-16T11:51:15.297
> 
> 标签：jquery, asp.net, html, css, jquery-slider

我正在使用以下 Awkward 滑块来显示文章的图像（[链接](http://showcase.awkwardgroup.com/)）。我已经修改了 CSS 来改变设计，当我将它用作 HTML 页面时效果也很好。

但是当我尝试将它与 asp.net 网络表单一起使用时，由于某种原因它不起作用。可能是我错过了一些小东西，我无法从过去几个小时中弄清楚。

[我已经上传了 .aspx 页面的 HTML 源代码，并对 jsFiddle 链接](http://jsfiddle.net/usQNF/)上的在线脚本和虚拟图像源代码示例的路径进行了一些更改

我实际上需要将它用作无法正常工作的 Asp.net 用户控件，因此我创建了一个简单的 test.aspx 页面，其中包含用户转发器控件来读取图像和图像标题等..

HTML 代码看起来不错，但由于某种原因，脚本不能作为一个漏洞工作。

我将不胜感激这方面的帮助。

在 xyz.html 页面屏幕截图中看起来不错

![在此处输入图像描述](../Images/903c6eebea0572dd7c2ecdb7390ccf2e.png)

来自简单 .aspx 页面的实际输出..

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head><title>

</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
    <link href="../styles/english_css.css" rel="stylesheet" type="text/css" /><link href="../styles/english-article-images.css" rel="stylesheet" type="text/css" />
    <script src="../scripts/jquery.aw-showcase.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $("#showcase").awShowcase(
        {
            content_width: 500,
            content_height: 333,
            fit_to_parent: false,
            auto: false,
            interval: 3000,
            continuous: false,
            loading: true,
            tooltip_width: 200,
            tooltip_icon_width: 32,
            tooltip_icon_height: 32,
            tooltip_offsetx: 18,
            tooltip_offsety: 0,
            arrows: true,
            buttons: true,
            btn_numbers: true,
            keybord_keys: true,
            mousetrace: false, /* Trace x and y coordinates for the mouse */
            pauseonover: true,
            stoponclick: false,
            transition: 'fade', /* hslide/vslide/fade */
            transition_delay: 0,
            transition_speed: 500,
            show_caption: 'onload', /* onload/onhover/show */
            thumbnails: false,
            thumbnails_position: 'outside-last', /* outside-last/outside-first/inside-last/inside-first */
            thumbnails_direction: 'vertical', /* vertical/horizontal */
            thumbnails_slidex: 1, /* 0 = auto / 1 = slide one thumbnail / 2 = slide two thumbnails / etc. */
            dynamic_height: false, /* For dynamic height to work in webkit you need to set the width and height of images in the source. Usually works to only set the dimension of the first slide in the showcase. */
            speed_change: true, /* Set to true to prevent users from swithing more then one slide at once. */
            viewline: false, /* If set to true content_width, thumbnails, transition and dynamic_height will be disabled. As for dynamic height you need to set the width and height of images in the source. */
            custom_function: null /* Define a custom function that runs on content change */
        });
    });

</script>
</head>
<body>
    <form method="post" action="test.aspx?PageID=5&amp;Language=en-US&amp;ParID=5&amp;Issue=5&amp;cid=1&amp;aid=17" id="form1">
<div class="aspNetHidden">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKLTkzOTY1NzA2MmRkXNTZuzSOi9aAjH5HEUpSpesn2ls=" />
</div>

    <div>

<div id="article-gallery-wrapper" style="width: 500px; margin: auto;">

    <div id="showcase" class="showcase">
        <div class="showcase-slide">
            <div class="showcase-content">
                <img id="rptArticleGallery_imgArticle2x3Image_0" class="showcase-image" src="../images/article/92b2298b-b2bb-446a-91c9-449c10053dcc.png" />
            </div>
            <div class="showcase-caption">
                <span id="rptArticleGallery_lblImageCaption_0">Belarus is open for business</span>
            </div>
        </div>
    </div>

    <div id="showcase" class="showcase">
        <div class="showcase-slide">
            <div class="showcase-content">
                <img id="rptArticleGallery_imgArticle2x3Image_1" class="showcase-image" src="../images/article/gallery/4543a290-6472-4e55-a1d9-6ad5be90802d.jpg" />
            </div>
            <div class="showcase-caption">
                <span id="rptArticleGallery_lblImageCaption_1">Caption of image</span>
            </div>
        </div>
    </div>

    <div id="showcase" class="showcase">
        <div class="showcase-slide">
            <div class="showcase-content">
                <img id="rptArticleGallery_imgArticle2x3Image_2" class="showcase-image" src="../images/article/gallery/79a30652-26ee-4cbf-a991-0f23fa7a33f5.jpg" />
            </div>
            <div class="showcase-caption">
                <span id="rptArticleGallery_lblImageCaption_2">Caption of image</span>
            </div>
        </div>
    </div>

</div>

    </div>

    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:22:51.017

已解决：我在错误的地方使用了下面的 div，通过将潜水移到中继器控制之外来修复它。这是基本的 HTML 错误

```
<div id="showcase" class="showcase"> 
```

最终代码应如下所示

```
 <div id="showcase" class="showcase">
        <div class="showcase-slide">
            <div class="showcase-content">
                <img id="rptArticleGallery_imgArticle2x3Image_0" class="showcase-image" src="../images/article/92b2298b-b2bb-446a-91c9-449c10053dcc.png" />
            </div>
            <div class="showcase-caption">
                <span id="rptArticleGallery_lblImageCaption_0">Belarus is open for business</span>
            </div>
        </div>

        <div class="showcase-slide">
            <div class="showcase-content">
                <img id="rptArticleGallery_imgArticle2x3Image_1" class="showcase-image" src="../images/article/gallery/4543a290-6472-4e55-a1d9-6ad5be90802d.jpg" />
            </div>
            <div class="showcase-caption">
                <span id="rptArticleGallery_lblImageCaption_1">Caption of image</span>
            </div>
        </div>

        <div class="showcase-slide">
            <div class="showcase-content">
                <img id="rptArticleGallery_imgArticle2x3Image_2" class="showcase-image" src="../images/article/gallery/79a30652-26ee-4cbf-a991-0f23fa7a33f5.jpg" />
            </div>
            <div class="showcase-caption">
                <span id="rptArticleGallery_lblImageCaption_2">Caption of image</span>
            </div>
        </div>
    </div>

</div> 
```

# xmpp - 使用 strophie 和 punjab 登录 gtalk

> ID：14357801
> 
> 赞同：0
> 
> 时间：2013-01-16T11:51:16.140
> 
> 标签：xmpp, strophe, punjab

我在端口 5281 和 ejabbered xmpp 服务器上设置了旁遮普语。我正在使用 strophe.js 对客户端进行编码，并且能够成功登录并与我在 ejabbered 上创建的三个不同域上的用户聊天。我想做一个客户端，gtalk 和 facebook 用户也可以登录和聊天。但我不知道如何用 strophe.js.where 连接 gtalk 和 fb 来进行连接配置？我需要将 gtalk 连接配置放在旁遮普或其他地方吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:14:13.267

您的连接属性仅在 Strophe 中。Punjab 充当代理，并自动为您在 Strophe 配置中的域创建 XMPP 客户端会话。

所以 Bosh Uri 总是一样的，只有用户名、密码和 XMPP 域对于 GTalk、Facebook 和其他人来说是不同的。

# ios - 使用 RESTkit PUT 请求、更改标头并将响应保存在核心数据中

> ID：14357803
> 
> 赞同：1
> 
> 时间：2013-01-16T11:51:17.240
> 
> 标签：ios, core-data, restkit, put

我想向服务器发送一个请求，一个带有以下请求标头的 PUT 请求：

```
Content-Type: application/json; charset=UTF-8 
```

以及以下内容`NSDictionary`：

```
{"title": "Sumit"} 
```

我正在使用 reskit 发出 put 请求，发出了 put 请求但给出了与标头相关的错误。我想知道在向远程服务器发送请求时如何设置标头和字典。此外，哪种方法最`RKObjectManager`适合这项任务：-

方法1：-

```
- NSMutableURLRequest *request = [manager requestWithObject:newImage
                                                   method:RKRequestMethodPUT
                                                     path:[kImageUrl stringByAppendingString:imageUrl]
                                               parameters:jsonParameters]; 
```

方法2：-

```
- (NSMutableURLRequest *)multipartFormRequestWithObject:(id)object
                                                 method:(RKRequestMethod)method
                                                   path:(NSString *)path
                                             parameters:(NSDictionary *)parameters
                              constructingBodyWithBlock:(void (^)(id <AFMultipartFormData> formData))block; 
```

我得到的错误：-

```
(400 Bad Request) [0.4221 s]: Error Domain=AFNetworkingErrorDomain Code=-1016 
"Expected content type {(
   "application/x-www-form-urlencoded",
   "application/json"
)}, got text/plain" UserInfo=0xa0951c0 {NSLocalizedRecoverySuggestion=Bad Request,
AFNetworkingOperationFailingURLRequestErrorKey=<NSMutableURLRequest  
http://staging.zoomdeck.com/api/image/c5ot31sxnh8v/>, 
NSErrorFailingURLKey=http://staging.zoomdeck.com/api/image/c5ot31sxnh8v/,  
NSLocalizedDescription=Expected content type {(
    "application/x-www-form-urlencoded",
    "application/json"
)}, got text/plain, AFNetworkingOperationFailingURLResponseErrorKey=<
NSHTTPURLResponse: 0xa194530>}
2013-01-16 17:19:43.860 Zoomdeck[2905:4a07] E 
restkit.network:RKObjectRequestOperation.m:285 Object request failed: 
Underlying HTTP request operation failed with error: Error 
Domain=AFNetworkingErrorDomain Code=-1016 "Expected content type {(
    "application/x-www-form-urlencoded",
    "application/json"
)}, got text/plain" UserInfo=0xa0951c0 {NSLocalizedRecoverySuggestion=Bad Request,  
AFNetworkingOperationFailingURLRequestErrorKey=<NSMutableURLRequest 
http://staging.zoomdeck.com/api/image/c5ot31sxnh8v/>, 
NSErrorFailingURLKey=http://staging.zoomdeck.com/api/image/c5ot31sxnh8v/, 
NSLocalizedDescription=Expected content type {(
    "application/x-www-form-urlencoded",
    "application/json"
)}, got text/plain, AFNetworkingOperationFailingURLResponseErrorKey=
<NSHTTPURLResponse: 0xa194530>}
2013-01-16 17:19:43.861 Zoomdeck[2905:c07] Expected content type {(
    "application/x-www-form-urlencoded",
    "application/json"
)}, got text/plain 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:21:26.337

您的休息服务需要内容类型

```
"application/x-www-form-urlencoded" 
```

或者

```
"application/json" 
```

但它获取内容类型

```
text/plain 
```

您必须像这样为您的请求设置 contentType：

```
NSMutableURLRequest *request = [manager requestWithObject:newImage
                                               method:RKRequestMethodPUT
                                                 path:[kImageUrl stringByAppendingString:imageUrl]
                                           parameters:jsonParameters];

[request setValue:@"application/json" forHTTPHeaderField:@"content-type"]; 
```

# google-apps-script - 如何将自定义（用户定义的）标量函数应用于 Google 电子表格中的范围？

> ID：14357808
> 
> 赞同：3
> 
> 时间：2013-01-16T11:52:29.353
> 
> 标签：google-apps-script, google-sheets, google-spreadsheet-api

我已经为我的电子表格编写了一些自定义数据转换函数，并希望将它们应用于范围以计算一些聚合，例如`SUM()`并且`MAX()`不创建临时列/行。

我想，这`ARRAYFORMULA()`确实有技巧，比如`ARRAYFORMULA(SUM(MY_UDF(A1:A10)))`，但它不起作用 - 我的函数将数组作为参数，而不是单个值。

我可以修改我的每一个转换函数来接受数组并返回数组，但是在每一个函数中都有这个样板代码看起来很傻。我知道，我可以将这个样板隔离为单独的函数（感谢 JavaScript 函数作为一等公民），但即使在这种情况下它看起来也不正确，因为我需要从项目中复制'n'粘贴这个样板项目。

这里有什么方法可以直接在公式中将标量函数应用于每个单元格的范围吗？像`SUM(APPLY(MY_UDF, A1:A10))`什么？

# asp.net-mvc-3 - ASPX ASP MVC @model 的语法

> ID：14357809
> 
> 赞同：3
> 
> 时间：2013-01-16T11:51:30.837
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4

@model Webgrid.Models.Employee

上述代码在 ASPX 中的语法是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:06:13.647

The strongly typed views need to derive from `System.Web.Mvc.ViewPage<T>` where `T` is your model type:

```
<%@ Page Language="C#" 
    Inherits="System.Web.Mvc.ViewPage<Webgrid.Models.Employee>" %> 
```

Or if you are having an `ascx` page then from `System.Web.Mvc.ViewUserControl<T>`

```
<%@ Control Language="C#"        
            Inherits="System.Web.Mvc.ViewUserControl<Webgrid.Models.Employee>" %> 
```

# ruby-on-rails-3 - 活动记录在单个操作中创建 3 个多级表

> ID：14357810
> 
> 赞同：0
> 
> 时间：2013-01-16T11:52:13.693
> 
> 标签：ruby-on-rails-3, activerecord

我的模型结构是 student.enrolments.disabilities。每个都是1对多。我有一个注册申请表，其中包含来自所有三个表的字段数据。不存在任何记录，但我想在一个操作中创建所有三个表。我以前在 2 个级别上做过这个，但不是三个。

我可以做这样的事情吗？

```
 @student.create( assign some fields )

 @student.enrolments.create( assign some fields )  

 @student.enrolments.disabilities.create( assign some fields )

 @student.enrolments.prior_educational_achievements.create( assign some fields )

 @student.save 
```

这行得通吗？有没有更好的办法？我需要像上面那样拯救学生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:00:15.327

您可以使用嵌套属性。以下是一些有用的链接：
文档： [http:](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)
//api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html RailsCast：[http ://railscasts.com/episodes?utf8=%E2%9C%93&search=nested+形式](http://railscasts.com/episodes?utf8=%E2%9C%93&search=nested+forms)

# android - 如何在Android中水平滚动片段

> ID：14357811
> 
> 赞同：0
> 
> 时间：2013-01-16T11:52:13.823
> 
> 标签：android, android-fragments

我有一个详细视图片段，我想水平滚动和垂直滚动。下面是我使用 ScrollView 的片段布局 .xml：-

```
`<?xml version="1.0" encoding="utf-8"?>

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true" >

<RelativeLayout 
    android:id="@+id/drag_layer_layout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <com.ui.DragLayer
        android:id="@+id/drag_layer"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_centerHorizontal="true"
        android:layout_marginLeft="100dp"
        android:layout_marginRight="100dp" >

        <FrameLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical"
            android:paddingLeft="10dp"
            android:paddingRight="10dp" >
        </FrameLayout>
    </com.ui.DragLayer>

    <Button
        android:id="@+id/editor_btn"
        android:layout_width="300dp"
        android:layout_height="30dp"
        android:layout_alignTop="@+id/drag_layer"
        android:background="@drawable/rounded_button_white"
        android:paddingLeft="30dp"
        android:text="@string/editor_text"
        android:textColor="@color/black"
        android:textSize="10dp"
        android:visibility="gone" 
        android:layout_marginLeft="100dp"/>

</RelativeLayout>
</ScrollView> 
```

`

使用它我只能垂直滚动。任何人都可以帮我解决我哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:59:02.510

您不能水平和垂直滚动相同的 ScrollView。您只能执行其中一项。默认为垂直滚动。

# ruby - Sidekiq 不创建 PID 文件

> ID：14357815
> 
> 赞同：7
> 
> 时间：2013-01-16T11:52:43.747
> 
> 标签：ruby, config, pid, sidekiq

为了停止 Sidekiq，我需要使用：

`$bundle exec sidekiqctl stop /Users/me/Documents/sites/some_site/tmp/pid/sidekiq.pid 20`

我告诉 Sidekiq 在 config.yml 文件中创建一个 pid 文件：

```
#/Users/me/Documents/sites/some_site/config.yml
:pidfile: /Users/me/Documents/sites/some_site/tmp/pids/sidekiq.pid
:concurrency: 25 
```

并告诉 Sidekiq 这个配置文件在哪里使用：

`$ bundle exec sidekiq -C /Users/me/Documents/sites/some_site/config.yml`

**但是，当我运行 Sidekiq 时，它不会创建 .pid 文件，所以我无法停止它。那么它为什么不创建一个 .pid 文件呢？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T23:05:53.057

尝试用这个替换那个绝对路径：

```
:pidfile: ./tmp/pids/sidekiq.pid 
```

其次，确保将运行 sidekiq 的用户具有适当的写入权限来写入该目录。您可以 chmod 777 临时测试一下是否是权限问题。

这是 Sidekiq 的示例配置 yml 文件。确保您也指定了一个队列。[https://github.com/mperham/sidekiq/blob/master/examples/config.yml](https://github.com/mperham/sidekiq/blob/master/examples/config.yml)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-04T16:13:10.880

要使用 pidfile，您应该将 sidekiq 作为守护程序启动。在您的 Rails 根目录上时，使用以下命令启动 sidekiq：

```
bundle exec sidekiq -d -e development 
```

您可以用适当的 rails 环境替换开发。

您还应该在 sikekiq 配置 (config/sidekiq.yml) 中指定一个日志文件。例子：

```
concurrency: 5
development:
  pidfile: tmp/pids/sidekiq_development.pid
  logfile: log/sidekiq_development.log
beta:
  pidfile: /var/run/sidekiq_beta.log
  logfile: log/sidekiq_beta.pid
staging:
  pidfile: /var/run/sidekiq_stating.pid
  logfile: log/sidekiq_staging.log
production:
  pidfile: /var/run/sidekiq_production.pid
  logfile: log/sidekiq_production.log
  concurrency: 50 
```

如果你在 Debian 上并且你需要一个启动脚本，你可以使用这个 Gist，我把它放在 Github 上：[https ://gist.github.com/alain75007/5517948](https://gist.github.com/alain75007/5517948)

# sql - 插入 3 时“ORA-01438: 值大于此列允许的指定精度”

> ID：14357816
> 
> 赞同：23
> 
> 时间：2013-01-16T11:52:18.010
> 
> 标签：sql, oracle

尝试将除 0 以外的任何数字插入格式为 NUMBER (2,2) 的字段时，我遇到了该错误。

```
UPDATE
    PROG_OWN.PROG_TPORCENTAJE_MERMA
SET
    PCT_MERMA = 3
WHERE
    IDN_PORCENTAJE_MERMA = 1 
```

[错误代码：1438，SQL 状态：22003] ORA-01438：值大于此列允许的指定精度

```
COLUMN_NAME DATA_TYPE   TYPE_NAME   COLUMN_SIZE   BUFFER_LENGTH   DECIMAL_DIGITS
PCT_MERMA   3           NUMBER      2             0               2 
```

如果我尝试使用十进制数字，也会发生这种情况。

知道为什么吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-16T11:59:47.503

对于数据类型，您不能使用大于 1 的数字进行更新，`number(2,2)`因为第一个参数是数字中的总位数，第二个参数（此处为 2）是小数部分的位数。我猜你可以插入或更新数据`< 1`。即 0.12、0.95 等。

请检查[NUMBER Datatype](http://docs.oracle.com/cd/B28359_01/server.111/b28318/datatype.htm#i22289)中的 NUMBER DATATYPE 。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-01-16T11:59:00.697

`NUMBER (precision, scale)`表示`precision`总位数，其中`scale`位数在小数点右边。

`NUMBER(2,2)`换句话说，表示一个有 2 位数字的数字，这两个数字都是小数。您可能的意思是使用`NUMBER(4,2)`4 位数字，其中 2 位是小数。目前，您可以只插入具有零整数部分的值。

[Oracle 文档中的更多信息](http://docs.oracle.com/cd/B19306_01/server.102/b14220/datatype.htm#i16209)。

# java - 软件如何引用硬盘上的文件

> ID：14357817
> 
> 赞同：3
> 
> 时间：2013-01-16T11:51:46.063
> 
> 标签：java, file

有时，知道下面一层会发生什么是一件好事，但 IMO .NET 变得如此抽象（以一种好的方式）它会使学习变得困难，因为我不明白表面之下发生了什么！

我假设 .NET 与 MS 操作系统非常耦合。因此，当使用 Directory() 或 File() 类时，我可以获得文件上的数据，并且可以理解（只是）关于它如何工作的理论。

但是，像 Java 这样的东西并不是 Windows 原生的。那么，它如何引用我硬盘上的文件呢？虽然我希望我的问题是关于任何非 Microsoft 语言的，但我限制在 Java 上以保持重点

在我看来，只有两种方法。

1.  直接从硬盘驱动器获取文件（因此不使用操作系统。
    或者（这就是我迷路的地方）

2.  Java 运行时环境是否必须创建操作系统实例才能获取公开“HereAreTheFiles()”方法的公共方法。EG 下面的伪代码

    ```
     WindowsOS windowsOs = new WindowsOS();
       string[] files = windowsOs.GetAllFolders() 
    ```

我希望这是有道理的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T12:02:25.433

+1 好奇心。然而，我想指出，Java API 是从底层操作系统抽象出来的，但实际的 Java 运行时不是。您会注意到每个操作系统都有不同的 Java 包。因此，在幕后 Java 文件打开操作转换为用 C 编写的非常特定于操作系统的 API 调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T12:01:33.813

每个操作系统都会有系统 api 来与操作系统/系统相关的任务进行交互。

在 Java 的情况下，特定于 Windows 的 JVM / JRE 正在 Windows 环境中运行。因此所有 Java System 函数都与 OS/System API 交互以进行文件读/写。

Java 提供了一个抽象层来执行这些操作，这反过来又通过调用操作系统的系统 API/本机 API 调用来实现

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T12:09:33.970

这是正在发生的一切的简单概述。

操作系统的核心是内核，所有程序都要求内核为它们做事。这包括读取文件和目录。内核处理直接从磁盘读取数据。

用户空间（即非内核）程序通过系统调用与内核通信，这些包括以特定方式设置您的 cpu 和内存，然后调用特殊的 cpu 指令。

操作系统提供了为您执行这些系统调用的库（在 C 中），您可以在自己的 C 程序中使用这些库来进行这些系统调用。在此之上还有一些库可以处理更复杂的操作。

您的 java 程序在 java 运行时中运行。这个运行时是用一种可以直接操作 cpu/内存的语言编写的（从某种意义上说，它不是在你的 java 程序所在的虚拟机后面抽象出来的）。因此，它也可以进行系统调用（它实际上与操作系统提供的库链接）。

最后，当你的java程序读取一个文件时，它会在运行时调用一个本地函数，这个函数会调用一个操作系统提供的库，这个库会进行一个系统调用，内核会处理它，内核会读取磁盘中的数据。

# android - 禁用相机但不起作用

> ID：14357819
> 
> 赞同：0
> 
> 时间：2013-01-16T11:51:48.653
> 
> 标签：android

我已经写了那些代码；

```
 case R.id.button_camera:
        if ( gate == false ) {
            Toast.makeText(this, "enable camera", Toast.LENGTH_LONG).show();
            devicePolicyManager. setCameraDisabled(demoDeviceAdmin, false);
        } 
        else {
            Toast.makeText(this, "disable camera", Toast.LENGTH_LONG).show();
            devicePolicyManager. setCameraDisabled(demoDeviceAdmin, true);
        }
        break; 
```

我犯了以下错误；

```
01-16 11:50:12.833: E/AndroidRuntime(799): FATAL EXCEPTION: main
01-16 11:50:12.833: E/AndroidRuntime(799): java.lang.IllegalStateException: Could not execute method of the activity
01-16 11:50:12.833: E/AndroidRuntime(799):  at android.view.View$1.onClick(View.java:3597)
01-16 11:50:12.833: E/AndroidRuntime(799):  at android.view.View.performClick(View.java:4202)
01-16 11:50:12.833: E/AndroidRuntime(799):  at android.view.View$PerformClick.run(View.java:17340)
01-16 11:50:12.833: E/AndroidRuntime(799):  at android.os.Handler.handleCallback(Handler.java:725)
01-16 11:50:12.833: E/AndroidRuntime(799):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-16 11:50:12.833: E/AndroidRuntime(799):  at android.os.Looper.loop(Looper.java:137)
01-16 11:50:12.833: E/AndroidRuntime(799):  at android.app.ActivityThread.main(ActivityThread.java:5039)
01-16 11:50:12.833: E/AndroidRuntime(799):  at java.lang.reflect.Method.invokeNative(Native Method)
01-16 11:50:12.833: E/AndroidRuntime(799):  at java.lang.reflect.Method.invoke(Method.java:511)
01-16 11:50:12.833: E/AndroidRuntime(799):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-16 11:50:12.833: E/AndroidRuntime(799):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-16 11:50:12.833: E/AndroidRuntime(799):  at dalvik.system.NativeStart.main(Native Method)
01-16 11:50:12.833: E/AndroidRuntime(799): Caused by: java.lang.reflect.InvocationTargetException
01-16 11:50:12.833: E/AndroidRuntime(799):  at java.lang.reflect.Method.invokeNative(Native Method)
01-16 11:50:12.833: E/AndroidRuntime(799):  at java.lang.reflect.Method.invoke(Method.java:511)
01-16 11:50:12.833: E/AndroidRuntime(799):  at android.view.View$1.onClick(View.java:3592)
01-16 11:50:12.833: E/AndroidRuntime(799):  ... 11 more
01-16 11:50:12.833: E/AndroidRuntime(799): Caused by: java.lang.SecurityException: Admin ComponentInfo{com.marakana.android.devicepolicydemo/com.marakana.android.devicepolicydemo.DemoDeviceAdminReceiver} did not specify uses-policy for: disable-camera
01-16 11:50:12.833: E/AndroidRuntime(799):  at android.os.Parcel.readException(Parcel.java:1425)
01-16 11:50:12.833: E/AndroidRuntime(799):  at android.os.Parcel.readException(Parcel.java:1379)
01-16 11:50:12.833: E/AndroidRuntime(799):  at android.app.admin.IDevicePolicyManager$Stub$Proxy.setCameraDisabled(IDevicePolicyManager.java:1700)
01-16 11:50:12.833: E/AndroidRuntime(799):  at android.app.admin.DevicePolicyManager.setCameraDisabled(DevicePolicyManager.java:1345)
01-16 11:50:12.833: E/AndroidRuntime(799):  at com.marakana.android.devicepolicydemo.DevicePolicyDemoActivity.onClick(DevicePolicyDemoActivity.java:62) 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-28T01:53:41.053

如果您的应用程序的先前版本不包含“禁用相机”政策，您应该在更新应用程序时明确显示设备政策协议屏幕。只有在用户接受“disable-camera”策略后，应用才有权限禁用摄像头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T12:01:22.343

我认为您需要添加

```
<uses-policies>
    <disable-camera />
</uses-policies> 
```

在清单文件中。

# javascript - 拦截文档静态节点上每个内联事件的注册

> ID：14357821
> 
> 赞同：0
> 
> 时间：2013-01-16T11:52:54.857
> 
> 标签：javascript, browser, dom-events

使用 JavaScript，我想在文档中的每个内联事件处理程序被触发之前拦截它们的注册。对于文档的静态节点（即不是由脚本动态注入的节点），我想移除内联事件处理程序并将它们转换为外部事件处理程序（外部处理程序意味着直接`node.AddEventListener`从 JavaScript 调用函数）。然而，对于动态节点，我想保留内联事件处理程序（动态节点是使用 JavaScript 注入的节点）。

例如：

```
<body>
<img onerror="alert(1)" />
<script>
document.getElementById("a").innerHTML = "<img onerror='alert(2)'/>";
</script>
<div id="a"></div>
</body> 
```

在上面的示例中，我希望将 alert(1) 错误事件转换为外部事件，同时将 alert(2) 错误事件保持在内联。我知道如何将内联事件处理程序转换为外部事件处理程序，但我不知道如何 1）在“注册”时和实际触发之前拦截内联处理程序。2）区分静态节点和动态节点的处理程序。

我知道这是一个难题，但任何帮助/评论都会很棒:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:12:30.143

在触发或注册其他内联事件处理程序之前，您可以观察两个有用的 DOM 事件。您应该注意[window.onload](https://developer.mozilla.org/en-US/docs/DOM/window.onload)或[DOMContentLoaded](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/DOMContentLoaded_%28event%29)事件。

`onload`当所有页面内容包括所有资源（CSS、JS、图像等）时触发 该事件。`DOMContentLoaded`另一方面，当文档完成加载（DOM 已准备好）而不是其依赖资源时触发。意味着 HTML 标记、文本和样式已准备就绪。

为此，jQuery 有一个跨浏览器的[.ready()事件。](http://api.jquery.com/ready/)

```
$(document).ready(function() {
    // do something when the DOM is ready.
}); 
```

您可以在活动开始前打断`onerror`。如果您想通过 javascript（和 jQuery）轻松使用元素，则应该为元素分配 ID 或类：`<img id="img1" onerror="alert(1)" />`. 因此，假设您想摆脱`onerror`事件触发的警报；例如，您可以这样做：

```
$(document).ready(function() {
    $('#img1').unbind('error');
    //OR $('img').first().unbind('error'); 
            //to get the first image element from your actual code
}); 
```

这将删除（未绑定）元素`error`上的事件处理程序。`img1`如果要从所有图像中删除错误事件处理程序，可以这样做：

```
$('img').unbind('error'); 
```

如果要删除旧的并将新的错误事件分配给特定元素：

```
$('#img1').unbind('error').error(function(event){
    // do stuff...
}); 
```

回答你的第二个问题；您无法真正区分静态和动态添加的事件处理程序。但是，您只需将代码放在添加动态处理程序的行之前。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-29T16:00:57.557

我不知道如何拦截内联事件的注册，**但是可以拦截内联脚本的执行**。

虽然浏览器不提供控制内联事件的接口，但内联事件也是遵守 W3C 规范的 DOM 事件。要了解以下实现，最好了解 HTML DOM API 中的事件传播知识：[冒泡和捕获，事件传播的两种方式](http://javascript.info/tutorial/bubbling-and-capturing)。

根据上面的文章，在所有浏览器中（除了IE<9），事件处理都有两个阶段。事件首先下降 - 这称为*捕获*，然后*冒泡*。这种行为在 W3C 规范中是标准化的。因此，我们可以通过将事件绑定到父节点来在*捕获*阶段拦截节点的内联事件。例如：

```
<img src="" onerror="alert('Yahoo!');" id="target" />
<script>
    document.addEventListener('error', function(e) {
        var element = e.target;
        if (element.id == "target") {
            e.stopImmediatePropagation();
            console.log("The alert is intercepted.");
        }
    }, true);
</script> 
```

我们在上面绑定到文档的事件将在 img.onerror 之前执行，并`e.stopImmediatePropagation()`阻止当前事件的进一步传播。因此，没有机会触发内联 onerror 事件。

**参考： http:** [//fex.baidu.com/blog/2014/06/xss-frontend-firewall-1/](http://fex.baidu.com/blog/2014/06/xss-frontend-firewall-1/)

# string - 如何在Lua中的特定位置添加子字符串

> ID：14357823
> 
> 赞同：2
> 
> 时间：2013-01-16T11:51:58.060
> 
> 标签：string, lua

我是 Lua 语言的新手，我想在字符串中的特定位置添加一个子字符串……就像我想每次都用新名称保存文件一样。我的文件以“name.extension”格式存储。我想要的是每次生成文件时添加一个计数器，以便每次都以新名称存储，如“name1.extension”和下一次“name2.extension”等等。我只需要查看点的位置，然后在这个点之前添加计数器......有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:17:37.040

好吧，简单的方法是[使用 string.format](http://www.lua.org/manual/5.2/manual.html#pdf-string.format)

```
base = 'name'
ext = 'extension'
template = base..'%d.'..ext
print(template:format(10))
-- or shorter
print(('name%d.extension'):format(10)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T13:33:51.817

尝试

```
template = "name.extension"
n = 23
print(template:gsub("%.",n..".")) 
```

或者

```
template = "name<number>.extension"
n = 23
print(template:gsub("<number>",n)) 
```

# javascript - 倒计时 JavaScript 应用程序

> ID：14357824
> 
> 赞同：-1
> 
> 时间：2013-01-16T11:52:01.943
> 
> 标签：javascript, jquery

我有这段 JavaScript，它是倒数计时器的一部分 我需要知道如何将计时器预设为每次提交页面时仅运行 48 小时？此刻我在a中放置了一个时间，它开始倒计时。请帮忙！

```
<script>
    $(document).ready(function(){
        $("#countdown").countdown({
            date: "16 january 2013 16:45:00",
            format: "on"
        },

        function() {
            // callback function
        });
    });

</script> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-16T12:18:34.353

不完全理解你的问题，如果你能澄清这会有所帮助。我相信您是通过插件要求倒计时，该插件在页面加载两天后执行一个功能。

确保包含倒计时插件和 jQuery：

```
var dateCount = new Date();
dateCount.setDate(dateCount.getDate() + 2);

document.write(dateCount);
$(document).ready(function(){
    $("#countdown").countdown({
        date: dateCount,
        format: "on"
    },

    function() {
        // callback function
    });
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T12:01:18.243

```
var date = new Date();
date.setDate(date.getDate() + 2);//two days later. you can set it to whatever you want

$("#countdown").countdown({
    date: date,
    format: "on"
},

function() {
    // callback function
}); 
```

当然，不要忘记投入`document.ready()`部分。

# jquery - jquery click 不能正常工作

> ID：14357829
> 
> 赞同：0
> 
> 时间：2013-01-16T11:53:28.467
> 
> 标签：jquery, html, css, onclick

我在列表中有一堆导航链接。每次我点击一个我想要的链接时，显示一些 DIV 并隐藏所有其他的。这是常见的内容面板模式。

我不能这样做：

```
<script type="text/javascript">
jQuery(document).ready(function() {

function show_tab(t) {
    jQuery(".tab").hide();
    jQuery(t).toggle();
}

jQuery("#login").click( show_tab("#login_tab") );

jQuery("#projects").click( show_tab("#projects_tab") );

});
</script> 
```

但我可以通过使用匿名函数使其工作：

```
<script type="text/javascript">
jQuery(document).ready(function() {

jQuery("#login").click(function()
{
jQuery(".tab").hide();
jQuery("#login_tab").toggle();
});

jQuery("#projects").click(function()
{
jQuery(".tab").hide();
jQuery("#projects_tab").toggle();
});

});
</script> 
```

有人可以解释为什么一种方法有效而另一种方法无效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:55:14.887

您需要传递`name`of`function`而不是调用它。

```
jQuery("#login").click( show_tab );    
jQuery("#projects").click( show_tab) ); 
```

您可以使用`id`当前元素的来生成选项卡的ID`show_tab`

```
function show_tab()
{    
    jQuery(".tab").hide();  
    jQuery("#" + this.id + "_tab").toggle();    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T11:57:29.857

改变：

```
jQuery("#login").click( show_tab("#login_tab") );
jQuery("#projects").click( show_tab("#projects_tab") ); 
```

至

```
jQuery("#login").click( function() {
 show_tab("#login_tab");
});
jQuery("#projects").click( function() {
    show_tab("#projects_tab");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T11:59:28.690

当你这样做...

```
jQuery("#login").click( show_tab("#login_tab") ); 
```

它`show_tab("#login_tab")`立即运行并将结果用作`.click`处理程序分配中的参数。如果你需要传递一个函数而不运行它，那么你必须在没有括号的情况下引用它。你可以这样做...

```
jQuery("#login").click( function() {
    show_tab("#login_tab");
} ); 
```

甚至这个...

```
jQuery("#login").click( show_login_tab );

function show_login_tab() {
    show_tab("#login_tab");
} 
```

本质上，这与创建匿名函数相同，就像您在工作版本中所做的那样。

# android - 从照片库获取 facebook 同步图像时，phonegap/cordova android 崩溃

> ID：14357834
> 
> 赞同：0
> 
> 时间：2013-01-16T11:52:38.277
> 
> 标签：android, cordova, android-camera

我正在为 Android 构建一个 Phonegap/Cordova (2.2.0) 应用程序，该应用程序具有提示用户拍照或从照片库中选择的功能。

当用相机拍摄新照片时，一切正常，从库中选择任何照片时也是如此，除了那些已与我的 Facebook 帐户同步的照片（据我所知）。

当应用程序恢复并传递图像时发生错误，在cordova中加载位图时出现空异常。我试图消除调整大小、方向变化并降低质量，并尝试以非常小的最大值调整大小。

我正在测试的设备是带有 Android 4.1.2 的 Galaxy S3

谢谢

# javascript - 为什么“上次访问是在” + someDate.toLocaleDateString(); 是坏习惯吗？

> ID：14357835
> 
> 赞同：4
> 
> 时间：2013-01-16T11:53:44.813
> 
> 标签：javascript

`Date`从[Mozilla Developer Network](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toLocaleDateString)阅读关于对象 JavaScript 的参考资料时，我得到了以下说明：

> 您不应该在依赖特定格式或语言环境的上下文中使用此方法。
> 
> ```
> "Last visit: " + someDate.toLocaleDateString(); // Good example 
> "Last visit was at " + someDate.toLocaleDateString(); // Bad example 
> ```

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:00:40.880

因为在其他语言中，这种写日期的方式是没有意义的。例如，在西班牙语中，您会说：

```
"La última visita fue el 27/03/2012 a las 14:04" 
```

因此，如果您只写“上次访问：”，您就避免了日期的语言环境格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:58:47.273

因为如果你得到一个语言环境字符串，它可能不是合法的英语。

这取决于您所在的国家/地区字符串的外观

# google-app-engine - google app engine blobstore 会自动压缩它存储的数据吗？

> ID：14357836
> 
> 赞同：1
> 
> 时间：2013-01-16T11:53:48.050
> 
> 标签：google-app-engine, compression, blobstore

google app engine blobstore 会自动压缩它存储的数据吗？我的意思是存储的数据，而不是为客户服务时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T13:10:02.677

Blobstore 是您通过公共 API 使用的 GAE 服务。内部实现没有公开。

但是，这有什么关系呢？您输入的数据与您输出的数据相同。

# android - Android：键盘隐藏按钮

> ID：14357839
> 
> 赞同：1
> 
> 时间：2013-01-16T11:53:08.893
> 
> 标签：android, button, keyboard

我有两个线性布局，第一个有四个编辑文本，第二个有一个按钮：

```
 <LinearLayout android:layout_width="fill_parent"  xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_height="65dp"  android:orientation="horizontal" android:id="@+id/l_fields"
        android:stretchColumns="*"  android:layout_weight="1">
        <TableRow android:orientation="horizontal" >
            <AutoCompleteTextView style="@style/orderDropDownWidth" android:layout_weight="5" android:textColor="@color/black"
                    android:layout_height="wrap_content" android:completionThreshold="1"
                    android:id="@+id/eo_article" android:imeOptions="flagNoExtractUi"   >
            </AutoCompleteTextView>
            <EditText android:inputType="numberSigned" android:layout_height="wrap_content" android:layout_width="wrap_content" android:id="@+id/eo_sale" android:layout_weight="1"
            android:imeOptions="flagNoExtractUi"    android:focusable="true" android:focusableInTouchMode="true">   </EditText>
            <EditText android:inputType="numberSigned" android:layout_height="wrap_content" android:layout_width="wrap_content" android:id="@+id/eo_promo" android:layout_weight="1"
            android:imeOptions="flagNoExtractUi"></EditText>
            <EditText android:inputType="numberDecimal" android:layout_height="wrap_content" android:layout_width="wrap_content" android:id="@+id/eo_disc" android:layout_weight="1"
             android:imeOptions="flagNoExtractUi"></EditText>
        </TableRow>
    </LinearLayout>
<LinearLayout android:layout_width="fill_parent" android:id="@+id/linearLayoutadd" android:layout_height="55dp" 
    android:orientation="horizontal"  android:gravity="right" android:layout_weight="1" >
    <LinearLayout android:orientation="horizontal"  android:gravity="right" android:layout_weight="1" 
                  android:layout_width="wrap_content" android:layout_height="fill_parent">                        
        <Button android:text="@string/LINE_ADD" android:id="@+id/eo_baddline" android:layout_width="wrap_content" 
             android:gravity="top" style="@style/orderlineButtonSalePromo"           ></Button>
    </LinearLayout> 
```

这是结果： ![在此处输入图像描述](../Images/da60c9206c9b52c2c132f8251787bcd2.png)

但是当显示键盘时，按钮被隐藏：

![在此处输入图像描述](../Images/c6cd0ec6d75186ee43fde6ea324aca89.png)

键盘打开时如何强制显示按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:58:25.003

你应该在滚动视图中设置你的线性布局......所以如果元素在滚动视图中，当使用键盘时，按钮将移动到键盘的顶层

# linq - Linq OrderByDescending 不起作用

> ID：14357842
> 
> 赞同：0
> 
> 时间：2013-01-16T11:53:57.460
> 
> 标签：linq, group-by

我正在做这样的查询：

加入

```
public IEnumerable<ProblemsViewModel_Base> GetProblemsSearchClassification(string searchTerm)
    {
        var subjectProblems =
            from p in aux_problem
            join sub in Subject on p.aux_ClassificationID.Id equals sub.Id
            where sub.Title.Contains(searchTerm)
            orderby p.CreatedOn descending
            select new ProblemsViewModel_Base
            {
                aux_CustomID = p.aux_CustomID
                ,
                Id = p.aux_problemId.Value
                ,
                title = p.aux_name
                ,
                CreatedOn = p.CreatedOn.Value
            };

        return subjectProblems;
    } 
```

并且没有加入

```
public IEnumerable<ProblemsViewModel_Base> GetProblemsSearchDetails(string searchTerm){
    var detailsProblems = aux_problem
            .Where(p => p.aux_CustomID.Contains(searchTerm))
            .OrderByDescending(c => c.CreatedOn)
         .Select(i => new ProblemsViewModel_Base
            {
                aux_CustomID = i.aux_CustomID
                ,
                Id = i.aux_problemId.Value
                ,
                title = i.aux_name
                ,
                CreatedOn = i.CreatedOn.Value
            });

        return detailsProblems;} 
```

经过三个查询，我加入并获得了不同的结果：

```
var joinedResults = detailsResults.Union(requestorResults).Union(classificationResults);
var distinctResults = joinedResults.GroupBy(p => p.Id).Select(p => p.First()) 
```

我的问题出现在结果中我使用第二个查询（没有连接的那个）进行联合时，结果没有排序，但是如果我避免这个查询，使用 Joins 进行所有查询的联合，结果是有序的。

这可能是这里的问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:25:40.680

根据我的经验 .Union()
.Distinct() 其他一些会撤消排序 在呈现结果之前尝试排序，但在所有代码之后

请反馈

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:11:15.447

我发现修改比较的解决方案如下：

```
var distinctResults = joinedResults.GroupBy(p => p.Id).Select(p => p.First()).OrderByDescending(p => p.CreatedOn); 
```

我在所有查询中都注释掉了 OrderBy，因为我是在之后做的，我想如果没有它，查询会更快。

# java - javax.faces.model.SelectItem 将值对象存储为字符串

> ID：14357846
> 
> 赞同：1
> 
> 时间：2013-01-16T11:54:08.760
> 
> 标签：java, jsf, jsf-2, primefaces, selectonemenu

> **可能重复：**
> [Primefaces selectOneMenu 侦听器未使用字符串以外的对象调用](https://stackoverflow.com/questions/10601710/primefaces-selectonemenu-listener-not-called-with-objects-other-than-strings)

我正在创建`List`：`SelectItem`

```
List<SelectItem> activityGlobalTypes = new ArrayList<SelectItem>();

for (ActivityTypeXMLModel activityTypeXMLModel : filteredActivityTypeXMLModels) {
    activityGlobalTypes.add(new SelectItem(activityTypeXMLModel, activityTypeXMLModel.getParent()));
} 
```

这是下拉菜单：

```
<p:selectOneMenu id="activityGlobalMenu" value="#{adminController.activityDTO.activityParentName}" required="true">
    <f:selectItem itemLabel="Select One" itemValue="" />  
    <f:selectItems value="#{adminController.activityGlobalTypes}" />
    <p:ajax listener="#{adminController.updateDependentActivity}" />                        
</p:selectOneMenu> 
```

现在从方法`updateDependentActivity`

```
public void updateDependentActivity(AjaxBehaviorEvent event) {
    SelectOneMenu menu = (SelectOneMenu) event.getComponent();
    System.out.println(menu.getValue());//it prints com.edfx.adb.xml.model.ActivityTypeXMLModel@7b6fe3c4

    if(menu.getValue() instanceof ActivityTypeXMLModel) {
        System.out.println("value is ActivityTypeXMLModel"); // I was expecting this one
    } else if(menu.getValue() instanceof String) {
        System.out.println("value is String"); //this line is executing 
    } else {
        System.out.println("unknown");
    }   
} 
```

我检查了源代码，`SelectItem`它以对象形式存储值。任何指针都会非常有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T13:12:56.940

就这一点而言，您的问题是由于默认情况下通过简单调用转换为非标准 Java 对象（即 no`String`或`Number`JSF具有内置转换器的对象）引起的。所以复杂的对象最终会在生成的 HTML 中作为它们的表示。正是这个值被提交回服务器。`Boolean``String``Object#toString()``toString()``<option value>`

您可以通过不同的方式解决此问题：

1.  提供一个在和[`Converter`](http://docs.oracle.com/javaee/6/api/javax/faces/convert/Converter.html)之间转换的自定义。这在以下问题中得到了回答：[Primefaces selectOneMenu listener not called with Objects other than Strings](https://stackoverflow.com/questions/10601710/primefaces-selectonemenu-listener-not-called-with-objects-other-than-strings)`ActivityTypeXMLModel``String`

2.  如果您使用[JSF 实用程序库 OmniFaces](http://omnifaces.org)，那么您还可以使用提供的转换器[`omnifaces.SelectItemsConverter`](http://showcase.omnifaces.org/converters/SelectItemsConverter)或[`omnifaces.SelectItemsIndexConverter`](http://showcase.omnifaces.org/converters/SelectItemsIndexConverter)根据`<f:selectItem(s)>`值执行通用转换，而无需编写自定义转换器。

3.  不要提供复杂的 Java 对象类型作为项目值，而是提供标准的 Java 对象类型，例如`String`. 在您的情况下，您似乎想使用对象的`activityParentName`属性`ActivityTypeXMLModel`。为了方便使用自 JSF2 引入`var`的 属性进行遍历`<f:selectItems>`，您只需将值更改为 a`List<ActivityTypeXMLModel>`而不是`List<SelectItem>`.

    ```
    private List<ActivityTypeXMLModel> activityGlobalTypes; 
    ```

    和

    ```
    <f:selectItems value="#{adminController.activityGlobalTypes}" var="type"
        itemValue="#{type.activityParentName}" itemLabel="#{type.parent}" /> 
    ```

### 也可以看看：

*   [我们的`selectOneMenu`维基页面](https://stackoverflow.com/tags/selectonemenu/info)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:07:32.240

Is `adminController.activityDTO.activityParentName` a `selectItem` or a String? Perhaps, it should be a selectItem in this case.

# ios - 为什么在 Xcode 中嵌套库时必须多次包含框架

> ID：14357847
> 
> 赞同：0
> 
> 时间：2013-01-16T11:54:09.850
> 
> 标签：ios, objective-c, xcode, automatic-ref-counting, static-libraries

我想在[开源电子邮件客户端中包含一个](http://code.google.com/p/remail-iphone/)[pdf 注释](http://code.google.com/p/remail-iphone/)演示库（即无法查看源代码..只能使用框架二进制文件）。问题是电子邮件客户端是非 ARC 代码，而 pdf 二进制库是。通常的[解决](http://developer.apple.com/library/mac/#qa/qa1490/_index.html)方法是简单地使用和链接器标志来解决这个问题。`-ObjC``-fobjc-arc`

问题是 pdf 二进制文件的作者还在库周围发布了一些 ARC 包装器代码，这些代码对我来说仍然很重要。所以我所做的是我创建了一个 xcode 项目。将包装器代码插入其中并制作包装器代码使用二进制库。然后我将包装器代码包含为[静态库](http://www.clintharris.net/2009/iphone-app-shared-libraries/)。

然后我开始收到[错误](https://stackoverflow.com/questions/4839981/symbols-not-found-for-architecture-i386)：`symbol(s) not found for architecture i386`..错误是关于包装库无法找到pdf框架二进制文件中定义的对象..

问题是我在 iphone 上测试了相同的代码，然后我得到了`symbol(s) not found for architecture ARM`.. 所以我知道这不是文件架构问题.. 还有有趣的是，如果我自己编译包装库，它工作得很好。

经过大量的头发撕裂和墙壁冲孔后，我发现如果我只是将 pdf 二进制文件包含到父项目中（以及包装器静态库中）..那么事情就像一个魅力..为什么这是必要的？我认为包装静态库应该是独立的（为什么它可以自己编译但在作为父项目的一部分编译时无法在其包含的框架中找到对象）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:38:59.247

库作者向我指出，虽然我的解决方案有效.. 我在自找麻烦.. 最简单的方法是简单地将 ARC 文件包含到我的项目中，并在构建中使用 -fobjc-arc 标记[单独标记](https://stackoverflow.com/questions/6646052/how-can-i-disable-arc-for-a-single-file-in-a-project)它们阶段 > 编译源代码

![在此处输入图像描述](../Images/2e233932665f915f6b00a8d3c52715dd.png)

# include - 是否有不同的方法可以使用 automake 包含 makefile？

> ID：14357850
> 
> 赞同：1
> 
> 时间：2013-01-16T11:54:24.030
> 
> 标签：include, makefile, gnu, autotools, automake

我一直在使用 GNU Autotools，我观察到可以使用不同的方法包含另一个 makefile，我不知道，我没有发现结果或 Automake 管理包含的方式可能存在的差异，如果有的话。

我见过的不同方式是使用`include $(path_to_file)`and `-include $(path_to file)`，连字符在包含文件时有什么不同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:58:22.980

前置连字符使包含可选。

如果包含的文件（例如`Make.include`）不存在，而您正在使用`include Make.include`，则构建将失败。但是，如果您正在使用`-include Make.include`构建将成功（但当然该文件不会被包含在内）。

我使用它来允许用户修改构建，而无需接触真正的 Makefile（如果您想调整构建以匹配您的系统，并且您正在使用 VCS 跟踪对父 Makefile 的更改，这很酷：这样跟踪Makefile 不会变得“脏”）。

但是，这并不特定于自动工具，因为它`make`通常适用。

使用 autotool 时，请注意`automake`不会通过包含的文件跟踪任何漂亮的东西。

# mysql - 如何从主查询中选择结果到子查询中

> ID：14357851
> 
> 赞同：0
> 
> 时间：2013-01-16T11:54:28.130
> 
> 标签：mysql, sql, select, subquery

> **可能重复：**
> [如何从主查询中选择计数到子查询中](https://stackoverflow.com/questions/14357379/how-to-select-count-from-main-query-into-subquery)

我想将在主查询中选择的记录数放入子查询中

我当前尝试执行的查询是：

```
SELECT
    cat_id,
    category_name,
    seo_name,
    (
        SELECT count(category_name)
        FROM ccs_coupons
        WHERE website_name LIKE category_name
           OR description LIKE category_name
           OR url_desc LIKE category_name
    )  AnyAlias 
FROM  `ccs_coupons`
WHERE  category_name like 'a%'
GROUP BY category_name
ORDER BY category_name ASC
LIMIT $page,$config 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:04:43.180

你可以试试：

```
SELECT 
  a.cat_id
  ,a.category_name
  ,a.seo_name
  ,count(b.cat_id) as count
FROM 
  ccs_coupons as a
  INNER JOIN ccs_coupons as b
  ON  website_name = category_name
         OR description = category_name
         OR url_desc = category_name
WHERE 
  category_name like 'a%' 
GROUP BY 
  a.cat_id
  ,a.category_name
  ,a.seo_name 
ORDER BY 
  category_name ASC 
LIMIT 
  $page,$config 
```

虽然我不是 100% 确定您要做什么.. 在进行计数之前您可能需要做一些独特的约束

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:02:24.847

尝试这个：

```
SELECT
    cat_id,
    category_name,
    seo_name,
    (
        SELECT COUNT(category_name)
        FROM ccs_coupons c2 
        WHERE c2.category_name LIKE CONCAT('%', c1.category_name, '%')
           OR c2.website_name LIKE CONCAT('%', c1.category_name, '%')
           OR c2.description LIKE CONCAT('%', c1.category_name, '%')
           OR c2.url_desc LIKE CONCAT('%', c1.category_name, '%')
    )  AnyAlias 
FROM  `ccs_coupons` c1 
WHERE  category_name LIKE 'a%'
GROUP BY category_name
ORDER BY category_name ASC
LIMIT $page,$config 
```

# ios - iOS 移动应用程序中的 Google Maps API v3 问题

> ID：14357852
> 
> 赞同：0
> 
> 时间：2013-01-16T11:54:30.087
> 
> 标签：ios, html, google-maps, cordova, google-maps-api-3

我们的 iOS PhoneGap 应用程序中的 Google Maps API v3 存在问题。

一点历史：我们使用 Phonegap 平台构建了一个大型应用程序，所以大部分应用程序是 HTML5。我们在我们的应用程序中广泛使用了 Google Maps API v3。这些地图显示在我们应用程序的至少 11 个页面上。应用程序架构是这样的，在每次页面转换时，我们都会删除前一页的内容（这是主 index.html 上的一个 DIV）并将其替换为另一个页面的内容，然后执行初始化页面等的脚本.

最初，每次新页面加载时，我们都会初始化 Google 地图：new google.maps.Map(...); 构造函数。但是，我们发现了一个严重的副作用——每次映射初始化时都会出现大量内存泄漏。通过谷歌搜索，我们发现这是一个已知问题，并且 Google Maps API v3 的设计目的不是为了每页初始化地图超过一次，并且为了使地图不泄漏内存，需要重新加载页面，以便浏览器可以清理内存。但是，这种解决方案对我们不起作用，因为这种重新初始化会破坏应用程序架构（单页应用程序）。

因此，为了防止内存泄漏并同时保持架构，我们决定将句柄存储到包含 map 的 div 中，并在该页面再次显示时将其重新输入到页面上。因此，我们为需要显示地图的页面创建了一个地图实例，当显示该页面时，我们将带有初始化地图的 div 附加到页面，设置地图缩放、居中并触发调整大小事件.

```
page.map.setZoom(14);
page.map.setCenter(coordinates);
google.maps.event.trigger(page.map, 'resize'); 
```

这在一段时间内效果很好。泄漏消失了，地图正确显示，但是，再一次，有一段时间......在地图页面之间进行几次转换后，地图开始变得奇怪 - 滚动地图时，地图停止刷新和加载图像因此显示灰色区域。同时，Google 徽标和所有其他信息都显示在正确的位置。标记也显示在正确的位置。通过 Safari Inspector 查看时，我们可以看到应该显示图像的 div 不在地图内。因此，我们怀疑在 DOM 操作（例如，当我们清除页面内容并用新内容替换它时）并恢复地图之后，子元素发生了某些事情或发生了其他事情。

有谁知道在这种情况下我们能做什么？

注意：我们能够在 Mobile Safari 中重复相同的问题，但不能在桌面版 Safari 或 Chrome 中重复。

下面是使用应用程序一段时间后发生的一些屏幕截图。

![示例 1](../Images/2229307d0b5bfbf5eccb2e97f778f341.png) ![示例 2](../Images/30d590ebd731868c8edd0f5d6bc2806e.png) ![在此处输入图像描述](../Images/89fb3e3bc818fb9dd4a2d0d73601806f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:20:29.470

如果我正确理解了问题，则需要在 pageshow 上触发调整大小事件。这是一个缩写函数。

```
 $("div[id=maps]").bind("pageshow", function (e, data) {
            google.maps.event.trigger(map, "resize");

        }); 
```

总是对寻找不同的解决方案感兴趣...... http://jsfiddle.net/wptc/y6Kpb/

# shell - 用于模式识别的 Shell 脚本

> ID：14357854
> 
> 赞同：0
> 
> 时间：2013-01-16T11:54:31.797
> 
> 标签：shell

我有一个包含以下字符串的示例文件。我需要通过删除新行 (\n) 将 'if' 和 'endif' 之间的所有字符串放在一行中。示例如下所示。我需要使用 sed 或在 bash 脚本中的输出。谁能帮我？？

--示例字符串

```
if
ABC
BCD
DEF
endif
if 
123
456
789
endif 
```

--需要的输出

```
ifABCBCDDEFendif

if123456789endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:59:37.200

假设文件*只*包含if-endif 块：

```
awk '{ printf("%s", $0) } /^endif$/ { printf("\n") }' 
```

对于不应更改的中间文本，需要一种稍微复杂的方法：

```
awk '/^if$/    { InIf = 1 } 
     /^endif$/ { InIf = 0 } 
               { printf("%s", $0) } 
     !InIf     { printf("\n") }' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:10:36.977

假设您有包含上述字符串的文件 tt1 然后使用

```
cat tt1 | sed  's/\n//g' | sed  's/endif/endif\n/g' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-20T11:04:59.820

一个班轮将做到这一点

如果你的文件是 file.txt 那么

# 命令

```
cat file.txt | tr -d "\n" | sed 's@endif@endif\n@g' 
```

# c# - 使应用程序可用于 Windows Phone 7.x 和 8

> ID：14357855
> 
> 赞同：0
> 
> 时间：2013-01-16T11:54:35.243
> 
> 标签：c#, windows-phone-7, windows-phone-8

我知道 WP7.x 应用程序可以在 WP8 上下载，但我希望该应用程序在运行时检测手机版本，并在 WP8 上安装时提供更多功能，并在 WP7.x 上提供有限功能（由于 API 限制） . 这将允许（WP8 和 WP7）用户下载该应用程序，但分别以完整和有限的功能使用它。

感谢您提前回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T12:02:00.447

以下是诺基亚建议您针对这两个平台设置架构的方法：http: [//www.developer.nokia.com/Resources/Library/Lumia/# !co-development-and-porting-guide.html;#toc_Portableclasslibraries](http://www.developer.nokia.com/Resources/Library/Lumia/#!co-development-and-porting-guide.html;#toc_Portableclasslibraries)

如何检测操作系统版本： [检测操作系统版本 - Windows Phone 7 或 Windows Phone 8？](https://stackoverflow.com/questions/13301945/detect-os-version-windows-phone-7-or-windows-phone-8)

# javascript - 加载测序图片

> ID：14357857
> 
> 赞同：2
> 
> 时间：2013-01-16T11:54:47.443
> 
> 标签：javascript, jquery

我有一些图片，我希望他们必须每 10 秒组织一次页面。

如下：

*   照片 1 满载
*   等待 10 秒
*   在照片 1 之后，照片 2 已完全加载
*   等待 10 秒
*   在照片 2 之后，照片 3 已完全加载
*   等待 10 秒

, ...

直到我们完成所有照片。

我的问题 ：

方法加载不起作用，我不知道等待的方法

这是我的代码：

```
<html>
<head>
    <title></title>
    <script type="text/javascript" src='jq.js'></script>
</head>
<body>
    <div></div>
    <script type="text/javascript">
        var images=["images/0.jpg",
                    "images/1.jpg",
                    "images/2.jpg",
                    "images/3.jpg",
                    "images/4.jpg",
                    "images/5.jpg",
                    "images/6.jpg",
                    "images/7.jpg",
                    "images/8.jpg",
                    "images/9.jpg",
                    "images/10.jpg"
                ];
        for (var i=0;i<images.length;i++){
            var imgtag = '<img src='+images[i]+' />';
            $(imgtag).load(function() {
                $('div').append(imgtag);
                //Wait 10 sec   ==> Is there a function to Waiting :-??
            }
       }
    </script>
</body>
</html> 
```

感谢您的答复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:15:32.030

首先，您需要等待 DOM 就绪事件，然后使用递归回调：

```
$(function() {   // on DOM ready

var images = [
    "images/0.jpg",
    "images/1.jpg",
    "images/2.jpg",
    "images/3.jpg",
    "images/4.jpg",
    "images/5.jpg",
    "images/6.jpg",
    "images/7.jpg",
    "images/8.jpg",
    "images/9.jpg",
    "images/10.jpg"
];

(function loadImg(index) {
    if (index >= images.length) return;  // no more image to load

    $('#divId').append( $('<img />').attr('src', srcImg).load(function() {
        // invoke this function again in 10 secs incrementing index by 1
        setTimeout(function() { loadImg(index + 1); }, 10000);
    }) );

})(0);   // initiate loading sequence with first image index

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:57:13.023

使用`setInterval`功能。

```
var images=["images/0.jpg",
                    "images/1.jpg",
                    "images/2.jpg",
                    "images/3.jpg",
                    "images/4.jpg",
                    "images/5.jpg",
                    "images/6.jpg",
                    "images/7.jpg",
                    "images/8.jpg",
                    "images/9.jpg",
                    "images/10.jpg"
                ];
var count = 0;
function loadImage() {
  if (count < images.length) {
    var imgtag = '<img src='+images[count]+' />';
    $('div').append(imgtag);
    count++;
  }
}

setInterval(loadImage, 10000); 
```

# iphone - 音频录制未与使用 UIImagePicker 录制的视频一起保存

> ID：14357858
> 
> 赞同：1
> 
> 时间：2013-01-16T11:54:48.100
> 
> 标签：iphone, ios, objective-c

我正在开发一个应用程序，其中我使用图像选择器控制器录制视频，视频录制限制设置为最多 2 秒。这是我在单击捕获视频以显示相机 UI 时的代码

```
-(IBAction)capture_btn_pressed:(id)sender
{
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera] == NO)
    {
        UIAlertView * alert = [[UIAlertView alloc]initWithTitle:@"Message" message:@"camera is not supported for your device" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [alert show];
        [alert release];
    }

    if (!cameraUI)
    {
        NSLog(@"camera ui");
        cameraUI = [[UIImagePickerController alloc] init];
        cameraUI.sourceType = UIImagePickerControllerSourceTypeCamera;
        // Displays a control that allows the user to choose movie capture
        cameraUI.mediaTypes = [[NSArray alloc] initWithObjects:(NSString *)kUTTypeMovie, nil];              
        cameraUI.delegate = self;
        cameraUI.cameraCaptureMode = UIImagePickerControllerCameraCaptureModeVideo;
        cameraUI.videoMaximumDuration = 2;
        cameraUI.allowsEditing = YES;
    }

    [self presentModalViewController:cameraUI animated: YES];

} 
```

**我面临的问题：** 视频录制的最大限制设置为 2 秒。因此，当我尝试单击 capturevideo 时，它将在 2 秒后自动停止。没关系，但有时它不会用视频录制背景音频。有时它会保存音频，但会保存 1 秒，然后休息一秒，它不会保存当时与视频一起播放的音频。我该如何解决这个问题任何帮助

# android - 使用android截图库获取黑屏

> ID：14357862
> 
> 赞同：1
> 
> 时间：2013-01-16T11:54:54.823
> 
> 标签：android, screenshot

我正在使用 Android 屏幕截图库 (ASL) 尝试捕获屏幕截图。目前我在 asl-native 中运行 ASL，包含在 ASL 1.2 中。

当我在我的应用程序中按下“获取屏幕截图”按钮时，它告诉我屏幕已成功捕获，但是当我检查画廊时，它捕获的所有内容都是黑屏。

我已经从[这里下载了 Android 截图库](http://code.google.com/p/android-screenshot-library/downloads/list)

有谁知道可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-01T17:18:28.187

您是否有机会尝试从模拟器中捕获屏幕？如果是这样，请确保“使用主机 GPU”已关闭（或通过命令行启动模拟器时附加“gpu off”来覆盖它）。

在模拟器主机上使用 GPU 加速时，所有截取的屏幕截图都将产生黑色图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:11:31.543

试试这个[例子](http://code.google.com/p/android-screenshot-library/source/detail?r=a3aa9eea31331d6eaae1de6c99e2f6accef79f01)，解决了黑屏问题。

希望他对你有所帮助。

# javascript - 建议数据的文件名：URI

> ID：14357864
> 
> 赞同：7
> 
> 时间：2013-01-16T11:55:01.843
> 
> 标签：javascript, html

我在 JavaScript 中生成一个 SVG 字符串。

我将它提供给用户：

```
window.open("data:image/svg+xml," + svg_xml_string); 
```

当您尝试在 Chrome 中保存该页面时，它会建议另存为*download.svg*无论如何我可以更改下载的默认文件名吗？

* * *

我试过了：

```
data:image/svg+xml;headers=Content-Disposition%3Aattachment%3Bfilename%3D%22suggest.svg%22,... 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-10-29T09:17:08.140

这在一些[非常新的](http://caniuse.com/download)浏览器中得到了解决。评论中链接的问题还提到了您提出的特定于 Opera 的建议扩展，但我认为您最好的选择是使用该`<a download="...">`属性并建议使用旧浏览器的用户在下载时为自己设置文件名。

# javascript - 如何使用图形 api 在页面上获取标记的消息

> ID：14357865
> 
> 赞同：1
> 
> 时间：2013-01-16T11:55:02.480
> 
> 标签：javascript, facebook, facebook-graph-api

我需要使用图形 API 获取在我自己的页面上标记的消息。

首先，我创建了一个名为 的页面`myfirstapppage`，然后使用另一个用户（不是页面所有者）发布了一条标记该`myfirstapppage`页面的消息。

我在创建的页面中找到了该消息，但无法通过图形 API 获取此消息。

我有 access_token，并且可以使用它来检索此页面上的帖子数据。

有人遇到这个问题吗？

# android - android中的Json解析类型不匹配错误

> ID：14357869
> 
> 赞同：2
> 
> 时间：2013-01-16T11:55:12.113
> 
> 标签：android, json

我正在尝试解析我的 json 数据

```
{
"000000000000000": [
    {
        "employee_boycode": "00",
        "id": "000",
        "address": "abcdef",
        "name": "name",
        "bankcode": "abc",
        "branch_name": "abcd",
        "account_no": "789"
    }
]
} 
```

我解析数据的代码是

```
JSONObject jsnJsonObject = new JSONObject(jsonResponse);//error coming here

contacts = jsnJsonObject.getJSONArray("000000000000000");

for (int i = 0; i < contacts.length(); i++)
{       
    JSONObject c = contacts.getJSONObject(i);
    id = c.getString("id");
    boy_code = c.getString("employee_boycode");
    name = c.getString("name");
    address = c.getString("address");
    branch_name = c.getString("branch_name");
    bankcode = c.getString("bankcode");
    account_no = c.getString(account_no);
} 
```

我得到了错误

```
01-17 12:51:41.280: V/response is(481): {"000000000000000":[{"employee_boycode":"012","id":"100","address":"sdfsfsdfsdf","name":"karan","bankcode":"HDFC","branch_name":"SARANGPUR","account_no":"100"}]} 
01-17 12:51:50.900: I/System.out(481): ServerEncodedResponse id 01-17 12:51:50.910: I/System.out(481): {"000000000000000":[{"employee_boycode":"012","id":"100","address":"sdfsfsdfsdf","name":"karan","bankcode":"HDFC","branch_name":"SARANGPUR","account_no":"100"}]}
 01-17 12:52:14.950: W/return(481): r2 
01-17 12:52:14.950: W/return(481): r3 
01-17 12:52:20.951: D/SntpClient(70): request time failed: java.net.SocketException: Address family not supported by protocol 01-17 
12:53:13.120: W/System.err(481): org.json.JSONException: Value of type java.lang.String cannot be converted to JSONObject
 01-17 12:53:13.210: D/dalvikvm(481): GC_FOR_MALLOC freed 3676 objects / 194656 bytes in 94ms
 01-17 12:53:13.220: W/System.err(481): at org.json.JSON.typeMismatch(JSON.java:107)
 01-17 12:53:13.220: W/System.err(481): at org.json.JSONObject.(JSONObject.java:158) 
01-17 12:53:13.300: W/System.err(481): at org.json.JSONObject.(JSONObject.java:171) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:25:14.330

试试这段代码，它应该可以工作，

```
private void parseJson() {
    // TODO Auto-generated method stub
    String strJson="{\n\"000000000000000\": [\n    {\n        \"employee_boycode\": \"00\",\n        \"id\": \"000\",\n        \"address\": \"abcdef\",\n        \"name\": \"name\",\n        \"bankcode\": \"abc\",\n        \"branch_name\": \"abcd\",\n        \"account_no\": \"789\"\n    }\n]\n}\n";

    try {
    JSONObject jsnJsonObject = new JSONObject(strJson);

        JSONArray contacts = jsnJsonObject.getJSONArray("000000000000000");

        for (int i = 0; i < contacts.length(); i++)
        {       
            JSONObject c = contacts.getJSONObject(i);
            String id = c.getString("id");
            String boy_code = c.getString("employee_boycode");
            String name = c.getString("name");
            String address = c.getString("address");
            String branch_name = c.getString("branch_name");
            String bankcode = c.getString("bankcode");
            String account_no = c.getString("account_no");

            Log.e("Parsed data is",":"+id+" :"+boy_code+" :"+name+" :"+address+" :"+branch_name+" :"+bankcode+" :"+account_no);
        }

    } catch (JSONException e) {

        e.printStackTrace();
    }

} 
```

# java - 数组循环程序逻辑

> ID：14357871
> 
> 赞同：2
> 
> 时间：2013-01-16T11:55:13.077
> 
> 标签：java, arrays, multidimensional-array, logic

我应该编写一个程序来询问用户想要的行数。例如，用户输入 4，因为`number`它将显示从 1 到 16 的所有数字，排列为 4 列和 4 行。如果输入 4，应该是这样的输出：

```
1 2 3 4
8 7 6 5
9 10 11 12
16 15 14 13 
```

如您所见，有一个模式。第一个出现的数字是 1，然后一直增加到 4。下一行从 8 开始，然后到 5。正如你所见，它就像一条蛇。但我的程序不工作。尽管我尝试过模拟我的程序，但我仍然无法弄清楚出了什么问题。

另一个例子是输入 3 时：

```
1 2 3
6 5 4
7 8 9 
```

这是我当前的代码：请帮助我，谢谢

```
import java.util.*;
public class ArrayOutput2 
{
    public static void main(String[] args)
    {
        Scanner input = new Scanner(System.in);
        int number = 0;

        System.out.print("Enter number of rows: ");
        number = input.nextInt();

        int[][] num = new int[number][number];
        int k=1, i, j;

        if (number == 1)
        {
              num[0][0] = 1;
        }

            while(k< (number*number))
            {
                for(i=number; i>=1; i--)
                {
                   if (i%2==1)
                   {
                     for(j=number-1; j>=0; j--)
                         {
                             num[i-1][j]=k;
                             k++;
                         }
                   }

                   else
                         for(j=0; j<=number-1; j++)
                         {
                             num[i-1][j]=k;
                             k++;
                         }
                 }
           }
       for(i=number-1;i<0;i--)
       {
            for(j=number-1;j<0;j--)

             System.out.print(num[i][j]+"\t");
             System.out.println();   
       }

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T12:09:21.007

看起来`num[][]`阵列设置正确。

我认为您只需要在最后一个 for 循环中翻转`<`to 即可。`>=`

目前，当 i 小于 0 时，您正在循环 i，但它从 4 开始，因此它永远不会进入循环，因此永远不会向控制台打印任何内容。

它应该是：

```
 for(i=number-1;i>=0;i--)
 {
    for(j=number-1;j>=0;j--) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T12:16:09.353

这确实会产生异常输出：

```
Scanner input = new Scanner( System.in );
int number = 0;
System.out.print("Enter number of rows: ");
number = input.nextInt();

int[][] num = new int[number][number];
int k=1, i=1, y = 0;
if (number == 1)
{
     num[0][0] = 1;
}

   while(y<number)
   {
       for(int x =0;x<number;++i,++x) 
            num[y][x] = i;

       ++y;
       if(y<number)
            for(int x = number-1;x>=0;++i,--x) 
                 num[y][x] = i;

       ++y;
   }
   for(i = 0;i<number;i++)
   {
        for(int j=0;j<number;++j)

         System.out.print(num[i][j]+"\t");
         System.out.println();   
   } 
```

希望对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T12:15:47.783

我认为在你的情况下使用 2D 数组是不必要的，试试这个片段：

```
 for (int i=0; i<number; i++) {
            if (i%2 == 0) {
                for (int j=i*number; j<(i+1)*number; j++) {
                    System.out.print((j + 1) + " ");
                }
            } else {
                for (int j=(i+1)*number; j>i*number; j--) {
                    System.out.print(j + " ");
                }
            }
            System.out.println();
        } 
```

# php - 使用 PHP 接收数据或字符串

> ID：14357873
> 
> 赞同：-4
> 
> 时间：2013-01-16T11:55:18.410
> 
> 标签：php

使用名为 a.php 的 php 将图像更新到服务器。如果我想发布一些字符串，我可以使用相同的 php，或者我需要创建一个新的。

这是 a.php 的摘录：

```
<?php

$con=mysql_connect("localhost","root","wk123456");
mysql_select_db("update",$con);
if($_FILES['uploadedfile']['size']>0)
{
$fileName=$_FILES["uploadedfile"]["name"];
$tmpName=$_FILES["uploadedfile"]["tmp_name"];
$fp=fopen($tmpName,'r');
$content=fread($fp,filesize($tmpName));
$content=addslashes($content);
fclose($fp);
...
mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T11:57:02.230

您可以使用相同的 PHP。只需在表单中添加另一个输入字段，您就可以通过常规`$_GET`或`$_POST`方式访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:08:11.157

要上传图像或文件类型，您需要在表单中提及 enctype

```
<form action="upload_file.php" method="post" enctype="multipart/form-data"> . Other wise upload will not work. 
```

您还需要使用 $_FILES 来获取上传文件的详细信息。$_POST 不会给出上传的文件值。

所以你可以像这样使用 $_FILES['fieldname']['name'] 。

有关更多详细信息，[请参阅此](http://www.w3schools.com/php/php_file_upload.asp)

# c# - 尝试将基本电子邮件发送到文件夹

> ID：14357877
> 
> 赞同：1
> 
> 时间：2013-01-16T11:55:28.563
> 
> 标签：c#, visual-studio-2008, html-email

我正在尝试将基本电子邮件发送到文件夹，但是，即使我确实收到了电子邮件，正文也完全丢失了。

```
private void MailReport()
{

    string to = "arianul@gmail.com";
    string From = "ArianG@lr.co.za";
    string subject = "Report";
    **string Body = "Dear sir ,<br> Plz Check d Attachment <br><br>";**

    bool send = sendMail(to, From, subject, Body);

    if (send == true)
    {
        string CloseWindow = "alert('Mail Sent Successfully!');";
        ClientScript.RegisterStartupScript(this.GetType(), "CloseWindow", CloseWindow, true);
    }
    else
    {
        string CloseWindow = "alert('Problem in Sending mail...try later!');";
        ClientScript.RegisterStartupScript(this.GetType(), "CloseWindow", CloseWindow, true);
    }
}

public bool sendMail(string to, string from, string subject, string body)
{
    bool k = false;
    try
    {
        MailMessage msg = new MailMessage(from, to);
        msg.Subject = subject;

        AlternateView view;
        SmtpClient client;
        StringBuilder msgText = new StringBuilder();
        view = AlternateView.CreateAlternateViewFromString(msgText.ToString(), null, "text/html");
        msg.AlternateViews.Add(view);

        msgText.Append("<body><br></body></html> <br><br><br>  " + body);

        client = new SmtpClient();
        client.Host = "staging.itmaniax.co.za";
        client.Send(msg);

        k = true;

    }
    catch (Exception exe)
    {
        Console.WriteLine(exe.ToString());
    }
    return k;

}

<system.net>
<mailSettings >
  <smtp deliveryMethod="specifiedPickupDirectory" from="ArianG@lr.co.za">
    <network host="staging.itmaniax.co.za"/>
    <specifiedPickupDirectory pickupDirectoryLocation="C:\testdump\emaildump\"/>
  </smtp>
</mailSettings> 
```

我感觉问题出在 body 和 html 上，因为它是用 Visual Studio-2008 完成的。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:03:45.983

您似乎缺少：

```
MailMessage msg = new MailMessage(from, to);
msg.Subject = subject;

msg.Body = body; <--- try adding this and see what happens. 
```

msg.Body 属性在您的示例中为空，我想这就是它不发送正文的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:07:06.507

您可以尝试以下方法。

```
protected void SendMail()
{
    // Gmail Address from where you send the mail
    var fromAddress = "Gmail@gmail.com";
    // any address where the email will be sending
    var toAddress = YourEmail.Text.ToString(); 
    //Password of your gmail address
    const string fromPassword = "Password";
     // Passing the values and make a email formate to display
    string subject = YourSubject.Text.ToString();
    string body = "From: " + YourName.Text + "\n";
    body += "Email: " + YourEmail.Text + "\n";
    body += "Subject: " + YourSubject.Text + "\n";
    body += "Question: \n" + Comments.Text + "\n";
    // smtp settings
    var smtp = new System.Net.Mail.SmtpClient();
    {
        smtp.Host = "smtp.gmail.com";
        smtp.Port = 587;
        smtp.EnableSsl = true;
        smtp.DeliveryMethod = System.Net.Mail.SmtpDeliveryMethod.Network;
        smtp.Credentials = new NetworkCredential(fromAddress, fromPassword);
        smtp.Timeout = 20000;
    }
    // Passing values to smtp object
    smtp.Send(fromAddress, toAddress, subject, body);
}

protected void Button1_Click(object sender, EventArgs e)
{
    try
    {
        //here on button click what will done 
        SendMail();
        DisplayMessage.Text = "Your Comments after sending the mail";
        DisplayMessage.Visible = true;
        YourSubject.Text = "";
        YourEmail.Text = "";
        YourName.Text = "";
        Comments.Text = "";
    }
    catch (Exception) { }
} 
```

有关更多信息，请查看[**使用 ASP.NET 和 C# 发送邮件/联系表**](http://www.codeproject.com/Tips/371417/Send-Mail-Contact-Form-using-ASP-NET-and-Csharp)

我希望这对你有帮助。

# c++ - 代码进入另一个函数后如何保留该值

> ID：14357885
> 
> 赞同：0
> 
> 时间：2013-01-16T11:55:44.803
> 
> 标签：c++, c, testing

我有一个要求，`testing`因为当我调用一个函数时，我用`0`. 但是，在函数`ex()`被调用的那一刻`ab`，struct 的对象就`abc`包含了垃圾。但我需要结构 abc 应该用`0`.

因为我无权访问 function `ex()`。所以，无论我需要设置什么，我都需要从`main()`.

```
struct abc{
    int a[4];
};
void ex()
{
abc ab;
    printf("%d\n", ab.a);//Garbage value
}
int main()
{
    abc ab;
    memset(&ab, 0, sizeof(abc));
    printf("%d\n", ab.a);
return 0;
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T12:00:09.100

您可以提供`abc`一个默认构造函数，将数组的元素初始化为`0`. 这摆脱了垃圾值：

```
struct abc {
    int a[4];
    abc() : a() {}
}; 
```

接下来，如果你想`myex`打印`abc`创建的数据`main`，你应该给它一个`abc`参考参数。这是 C++11 版本`myex`：

```
#include <iostream>

void myex(const abc& item)
{
  for (const auto& n : item.a)
  {
    std::cout << n << " ";
  }
  std::cout << "\n";
}

int main()
{
  abc myabc;
  myex(myabc);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T13:40:07.330

`ab`in 与 in是`ex`不同的对象；初始化一个不会影响另一个。`ab``main`

如果您打算在and`ab`中引用同一个对象，则需要执行以下操作之一：`main``ex`

*   `ab`作为参数传递给`ex`from `main`;
*   `ab`在文件范围内声明（在`ex`or之外`main`）；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T12:00:48.290

将结构定义更改为以下。这会照顾

```
struct abc{
  int a[4];

  abc()
  { memset(a, 0, 4*sizeof(int)); }
}; 
```

# ember.js - Ember.Application 初始化方法有什么用？

> ID：14357886
> 
> 赞同：1
> 
> 时间：2013-01-16T11:55:46.580
> 
> 标签：ember.js

我在 emberjs 中尝试路由示例，我读到 App.Initialize 初始化所有控制器并将它们注入路由器（来自[Emberjs](http://emberjs.com/api/classes/Ember.Application.html#method_initialize)）。这意味着如果我不在我的 Ember 应用程序上调用初始化方法，我的控制器将不会启动，并且使用这些控制器实例的路由器将无法工作。对？

那么为什么当我评论该行时 [这个jsfiddle正在工作](http://jsfiddle.net/anshulguleria/Pk4k2/8/)`App.inialize()`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T13:10:15.363

嗯，您正在处理的小提琴指的是过时的 api。查看源代码，Application#initialize() 现在会自动为您完成：[https ://github.com/emberjs/ember.js/blob/master/packages/ember-application/lib/system/application.js#L419](https://github.com/emberjs/ember.js/blob/master/packages/ember-application/lib/system/application.js#L419)

顺便说一句，您还依赖于旧的路由器版本。现在，我建议您更新到当前的 master，并阅读[http://emberjs.com/guides/routing/](http://emberjs.com/guides/routing/)以了解如何立即定义它。

# mysql - 删除没有主键的表中的重复行

> ID：14357888
> 
> 赞同：5
> 
> 时间：2013-01-16T11:55:53.200
> 
> 标签：mysql, distinct, duplicate-removal

我有一个包含以下项目的表格项目

```
name
------
alpha
alpha 
beta
charlie
charlie 
```

在这种情况下，我将如何删除重复的行但应该保留一条记录。上表没有任何主键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T11:57:13.950

试试这个

```
DELETE FROM item WHERE GREATEST(0,@num := IF(NAME = @NAME, @num + 1, 0),LEAST(0, LENGTH(@NAME := NAME)))>0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T12:00:06.360

重新创建该表：

```
RENAME TABLE `testTable` TO `testTable2`;

CREATE TABLE `testTable` 
SELECT DISTINCT `name` FROM `testTable2`; 
```

**或**在您的字段上添加**唯一索引。**

```
ALTER IGNORE TABLE `tableName` 
    ADD UNIQUE INDEX (`name`) 
```

# android - 软键盘出现问题

> ID：14357889
> 
> 赞同：5
> 
> 时间：2013-01-16T11:55:58.923
> 
> 标签：android, android-widget, android-manifest, android-softkeyboard

大家好，我是 Android 新手，并且在我的项目中遇到了非常愚蠢的问题，我有一个 EditText，只要用户触摸 EditText 软键盘，就会在列表视图的标题视图中定义。我有一个叫做清除按钮的东西，它清除了 EditText 清除软键盘后没有显示在 2.3 设备中。每当我按下锁定/电源按钮锁定设备并解锁时，软键盘就会显示

```
<activity
        android:name=".pl.Mobile.AddJobNew"
        android:configChanges="orientation|keyboardHidden"
        android:screenOrientation="landscape"
        android:windowSoftInputMode="stateVisible|adjustResize|adjustPan"
         > 
```

这是我在 Android 中针对 android:windowSoftInputMode 的活动声明：“adjustResize”选项适用于 Android 2.3 设备，但在软键盘与编辑文本重叠的 4.0 设备中失败。选项“adjustPan”在 4.0 设备中运行良好，但在 2.3 设备中失败

请帮助我摆脱这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T13:39:35.770

在带有编辑文本的活动中尝试此操作：

```
int currentapiVersion = android.os.Build.VERSION.SDK_INT;
if (currentapiVersion >= android.os.Build.VERSION_CODES.ICE_CREAM_SANDWICH){
// Do something for 4.0 and above versions
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN);
} 
else{
// do something for phones running an SDK before 4.0
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE);
} 
```

同时删除，

```
android:windowSoftInputMode="stateVisible|adjustResize|adjustPan" 
```

来自清单文件中的活动。

[构建版本](http://developer.android.com/reference/android/os/Build.VERSION.html#SDK_INT)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T08:03:33.613

我认为问题在于，当您单击清除按钮时，editText 会失去焦点，因此键盘会自行隐藏。

我会尝试两件事来解决它；

1.  清理文本后，请执行以下操作：

    yourEditTextField.requestFocus()

2.  手动控制键盘可见性：

    public void showKeyboard(){ 查看视图 = getWindow().getCurrentFocus(); 如果（视图==空）返回；

    ```
    InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.showSoftInput(view, InputMethodManager.SHOW_FORCED); 
    ```

    }

    public void hideKeyboard(){ 查看视图 = getWindow().getCurrentFocus(); 如果（视图==空）返回；

    ```
    IBinder binder = view.getWindowToken();
    if (binder == null)
        return;

     // prevent a bug in some keyboards that makes the text hang on the screen
    if (view instanceof EditText) 
        ((EditText)view).setText(((EditText)view).getText().toString());

    InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.hideSoftInputFromWindow(binder, InputMethodManager.HIDE_NOT_ALWAYS); 
    ```

    }

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T20:53:43.497

尝试类似的东西

```
 editext1.setOnTouchListener(new OnTouchListener()
            {

                public boolean onTouch(View v, MotionEvent event)
                {
                    if (v instanceof EditText)
                    {
                        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                        imm.hideSoftInputFromWindow(v.getWindowToken(), 0);
                        v.requestFocusFromTouch();
                        return true;
                    }
                    return false;
                }
            }); 
```

如果它不适合您尝试添加

```
 editext1.setOnFocusChangeListener(new OnFocusChangeListener()
        {

            public void onFocusChange(View v, boolean hasFocus)
            {
                InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(v.getWindowToken(), 0);
            }
        }); 
```

从布局中删除请求焦点也很好。并且可能在活动清单中设置这个**android:windowSoftInputMode="stateHidden|stateAlwaysHidden"**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T04:50:22.827

我的 AndroidManifest.xml 文件中有以下行，效果很好。请尝试此代码。不要放任何额外的代码。如果你没有取得任何成功，请告诉我。我愿意帮助你。

```
<activity android:name=".pl.Mobile.AddJobNew" android:screenOrientation="portrait" android:configChanges="keyboard|orientation" android:windowSoftInputMode="adjustPan"/> 
```

尝试使用上述代码进行您的活动。

# android - Jelly Bean 4.2 上的文件目录

> ID：14357892
> 
> 赞同：1
> 
> 时间：2013-01-16T11:56:01.780
> 
> 标签：android, file, android-4.2-jelly-bean

我在 Jelly Bean 4.2 上的文件目录有问题。我知道用以后的版本来访问你必须使用目录/sdcard/的文件

但果冻豆 4.2 它不起作用。

那是什么可以帮助我？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:00:05.607

您可以尝试使用该功能，它应该适用于所有设备：

```
String path = Environment.getExternalStorageDirectory(); 
```

# drupal-7 - 将微数据添加到 Drupal 站点

> ID：14357893
> 
> 赞同：0
> 
> 时间：2013-01-16T11:56:03.360
> 
> 标签：drupal-7, microdata

有没有办法通过编辑 field.tpl 文件将微数据添加到 Drupal 7 站点？我的网站是使用面板和视图构建的，因此[http://drupal.org/project/microdata](http://drupal.org/project/microdata)无法正常工作。还有其他方法可以通过硬编码添加微数据吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T08:20:52.813

我设法覆盖页面模板文件并将我的面板包装在代码中。我使用的代码是 template.php：

```
 function ThemeName_preprocess_page(&$vars) {

 // if this is a panel page, add template suggestions
if($panel_page = page_manager_get_current_page()) {
// add a generic suggestion for all panel pages
 $variables['theme_hook_suggestions'][] = 'page__panel';
// add the panel page machine name to the template suggestions
$variables['theme_hook_suggestions'][] = 'page__' . $panel_page['name'];
$object = $panel_page['contexts']['argument_entity_id:node_1'];
$result_array = get_object_vars($object);
$value = $result_array['restrictions']['type']['0'];
    if($panel_page['name'] == 'node_view' AND $value == 'product' ) {
        $vars['theme_hook_suggestions'][] = 'page__node_view_product';
    }
if($panel_page['name'] == 'node_view' AND $value == 'artist' ) {
        $vars['theme_hook_suggestions'][] = 'page__node_view_artist';
    } 
```

我在 ThemeName/templates page--node_view_artist.tpl.php 和 page--node_view_product.tpl.php 下创建了一个文件

我希望这对某人有帮助，我花了很长时间才弄清楚！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:42:08.320

添加微数据的最佳方法是编辑 field.tpl 文件，然后检查 - 在视图上使用文件模板。对于面板，我使用模块[http://drupal.org/project/panels_extra_styles](http://drupal.org/project/panels_extra_styles)在面板周围添加编码。

# php - G-WAN，来自 CGI 脚本的输出标头

> ID：14357907
> 
> 赞同：4
> 
> 时间：2013-01-16T11:56:48.873
> 
> 标签：php, http, cgi, go, g-wan

`Content-Type`我正在尝试像通过 CGI 脚本一样设置 HTTP 标头。

在`PHP`：

```
header('Content-Type: text/plain');
// or
echo 'Content-Type: text/plain', "\r\n\r\n"; // as first line 
```

或在`Go`：

```
fmt.Print("Content-Type: text/plain\r\n\r\n") // as first line 
```

两者都对输出没有影响。

如何才能做到这一点？

**编辑**

`Go`我还使用包尝试了以下内容`CGI`：

```
package main

import "fmt"
import "os"
import "net/http/cgi"

func main() {
    r,e := cgi.Request()
    if e != nil {
        fmt.Println(e)
        os.Exit(200)
    }
    fmt.Printf("%#v", r)
    os.Exit(200)
} 
```

但我得到了错误：

```
cgi: failed to parse REQUEST_URI into a URL: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T16:11:20.577

**问题一：**

如果您的脚本返回有效的 HTTP 返回代码（如`200`），则 G-WAN 会构建相应的 HTTP 标头，除非它们已经存在（从`"HTTP/1.x 200 OK"`此处开始）。

因此，要强制`content-type`使用脚本语言*（除了那些支持 G-WAN API 的语言，如 C、C++、D 和 Objective-C）*，您必须`return 1`定义并定义您回复的所有 HTTP 标头。

支持 G-WAN API 的编程语言可以使用`get_env(argv, REPLY_MIME_TYPE);`（如`fractal.c`和其他所示）并让 G-WAN 构建其余的标头。

**问题2：**

环境变量`REQUEST_URI`（虽然有用）不是受支持的[CGI v1 规范](https://www.rfc-editor.org/rfc/rfc3875)(RFC-3875) 的一部分。我已要求`REQUEST_URI`在将来的版本中添加。

G-WAN 提供的脚本示例列出了 v3.12 支持的变量：

```
// ----------------------------------------------------------------------------
// CGI/1.1 environment variables:
// ----------------------------------------------------------------------------
// "AUTH_TYPE",          // "" | "Basic" | "Digest" | etc.
// "CONTENT_LENGTH",     // "" | entity_length
// "CONTENT_TYPE",       // "" | content_type
// "GATEWAY_INTERFACE",  // "CGI/1.1"
// "PATH_INFO",          // "" | ( "/" path )
// "PATH_TRANSLATED",    // disk filename for PATH_INFO
// "QUERY_STRING",       // "" | ?"hellox.c&name=toto"
// "REMOTE_ADDR",        // client IP address
// "REMOTE_HOST",        // client DNS name (or IP addr)
// "REMOTE_IDENT",       // client identity (RFC 1413), opt
// "REMOTE_USER",        // client identity (if auth)
// "REQUEST_METHOD",     // "GET" | "HEAD" | "PUT", etc.
// "SCRIPT_NAME",        // "" | ("/" path "hello.c")
// "SERVER_NAME",        // "gwan.com" | IP address
// "SERVER_PORT",        // "80"
// "SERVER_PROTOCOL",    // "HTTP/1.1" | "HTTP/1.0" | "HTTP/0.9"
// "SERVER_SOFTWARE",    // "G-WAN"
// ---------------------------------------------------------------------------- 
```

请注意，您可以使用以下（和更快的）Go 代码同时访问请求和参数（如果有）：

```
// args[1] /opt/gwan/10.10.20.80_80/#192.168.200.80/csp/hello.go
// args[2] arg1=123
// args[3] arg2=456

for i := 1; i < len(os.Args); i++ {
   fmt.Printf("args[%d] %s<br>", i, os.Args[i])
 } 
```

* * *

## 更新

我们通过电子邮件收到了此源代码：

```
package main

import "fmt"
import "os"

func main() 
{
   p := "<h1>Hello world!</h1><p>This is dog bla</p>"
   fmt.Printf("%s 200 OK\r\n", os.Getenv("SERVER_PROTOCOL"))
   fmt.Print("Content-Type: text/html; charset=UTF-8\r\n")
   fmt.Print("Connection: Keep-Alive\r\n")
   fmt.Printf("Content-Length: %d\r\n",len(p))
   fmt.Print("\r\n")
   fmt.Print(p)  
} 
```

请注意，此代码不正确：它甚至无法编译 - G-WAN 报告以下错误：

```
loading.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Error: hell.go
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# command-line-arguments
0.0.0.0_8080/#0.0.0.0/csp/hell.go:7: syntax error: unexpected semicolon or newline before {
0.0.0.0_8080/#0.0.0.0/csp/hell.go:9: non-declaration statement outside function body
0.0.0.0_8080/#0.0.0.0/csp/hell.go:10: non-declaration statement outside function body
0.0.0.0_8080/#0.0.0.0/csp/hell.go:11: non-declaration statement outside function body
0.0.0.0_8080/#0.0.0.0/csp/hell.go:12: non-declaration statement outside function body
0.0.0.0_8080/#0.0.0.0/csp/hell.go:13: non-declaration statement outside function body
0.0.0.0_8080/#0.0.0.0/csp/hell.go:14: non-declaration statement outside function body
0.0.0.0_8080/#0.0.0.0/csp/hell.go:16: syntax error: unexpected }

 4|import "os"
 5|
 6|func main() 
 7!{
 8|   p := "<h1>Hello world!</h1><p>This is dog bla</p>"
 9|   fmt.Printf("%s 200 OK\r\n", os.Getenv("SERVER_PROTOCOL"))
10|   fmt.Print("Content-Type: text/html; charset=UTF-8\r\n")
11|   fmt.Print("Connection: Keep-Alive\r\n")

To run G-WAN, you must fix the error(s) or remove this Servlet. 
```

这很可能是您没有看到程序被“更新”的原因：旧版本（如果有）没有被 G-WAN 运行时更新的错误版本替换。

当您开发（编辑脚本）时，您应该始终查看终端以检查您新编辑的代码是否编译。

我建议您查看（工作）`hello.go`示例，以了解预期定义`main()`和（强制）的要求是什么`return code`。

当没有使用返回码时（如在您的代码中），G-WAN 将注入默认 HTTP 标头（`HTTP/0.9 200 OK`在您的情况下），这将绕过您的 HTTP 标头（如果有），因此 Internet 浏览器将等待超时因为它不知道你回复的长度。

如示例和手册中所述，要告诉 G-WAN 不要创建 HTTP 标头，您必须返回`1-99`范围内的值（`0 means close connection`并`200-600 is reserved for HTTP return codes`告诉 G-WAN 生成对应的 HTTP 标头）。

# soap - 在 XSD 中的 ComplexType/Sequence 元素中引用 ComplexType 元素

> ID：14357908
> 
> 赞同：0
> 
> 时间：2013-01-16T11:57:01.667
> 
> 标签：soap, xsd, wsdl, complextype

我正在尝试构建一个 xsd 文件（在 WSDL 内）以从 SOAP 请求中获取数据。我有预期的肥皂请求：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<SOAP-ENV:Body>
    <m:upsertEntity xmlns:m="http://www.boomi.com/connector/wss">
        <eTimeRequest>
            <ObjectType>String</ObjectType>
            <Action>String</Action>
            <eTimeID>String</eTimeID>
            <OperativeID>String</OperativeID>
        </eTimeRequest>
    </m:upsertEntity>
</SOAP-ENV:Body> 
```

这是我尝试过的。你不能有一个`<xs:ComplexType>`内另一个。我已经尝试过引用方法，但显然，当我尝试使用它进行 SOAP 请求时，它是无效的。我能做些什么？

这是 WSDL 中的 XSD：

```
 <xs:schema elementFormDefault="qualified" targetNamespace="http://www.boomi.com/connector/wss">
        <xs:element name="eTimeRequest" type="eTimeRequest"/>
        <xs:complexType name="eTimeRequest">
            <xs:sequence>
                <xs:element maxOccurs="1" minOccurs="0" name="ObjectType" type="xs:string"/>
                <xs:element maxOccurs="1" minOccurs="0" name="Action" type="xs:string"/>
                <xs:element maxOccurs="1" minOccurs="0" name="eTimeID" type="xs:string"/>
                <xs:element maxOccurs="1" minOccurs="0" name="OperativeID" type="xs:string"/>
            </xs:sequence>
        </xs:complexType>

        <xs:element name="upsertEntity" type="tns:upsertEntity"/>
        <xs:complexType name="upsertEntity">
            <xs:sequence>
                <xs:element minOccurs="0" type="eTimeRequest"/> <!-- These should be the ObjectType, Action, eTimeID and OperativeID in here -->
            </xs:sequence>
        </xs:complexType>

    </xs:schema> 
```

**编辑** 我在链接的代码中注意到的另一件事是我使用了`Type="eTimeRequest"`and not `ref="eTimeRequest"`。无论如何，仍然无效。这是我在验证时收到的错误消息：

无效的 XML 架构：“eTimeRequest”必须引用现有元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:37:16.890

对那些读过这篇文章的人感到抱歉。我显然在我的 XSD 代码中犯了一个错误，并且浪费了时间。

是的， 在`<xs:ComplexType>`中**不允许**`<xs:ComplexType>`，但在中**允许**`<xs:Element>`包含。因此，生成的原始 SOAP 请求无效。我通过我们的系统运行了新版本，它工作正常。`<xs:ComplexType>` **`<xs:ComplexType>`**

 **WSDL 中的正确 XSD 架构应该是：

```
<xs:schema elementFormDefault="qualified" targetNamespace="http://www.boomi.com/connector/wss">
    <xs:element name="upsertEntity" type="tns:upsertEntity"/>           
    <xs:complexType  name="upsertEntity">
        <xs:sequence>
            <xs:element name="eTimeRequest">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element maxOccurs="1" minOccurs="0" name="ObjectType" type="xs:string"/>
                        <xs:element maxOccurs="1" minOccurs="0" name="Action" type="xs:string"/>
                        <xs:element maxOccurs="1" minOccurs="0" name="eTimeID" type="xs:string"/>
                        <xs:element maxOccurs="1" minOccurs="0" name="OperativeID" type="xs:string"/>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>           
</xs:schema> 
```**

# performance - 编译器优化的函数式代码比命令式代码执行得更好的示例

> ID：14357918
> 
> 赞同：31
> 
> 时间：2013-01-16T11:57:39.987
> 
> 标签：performance, haskell, optimization, functional-programming, imperative-programming

无副作用、[引用透明](http://www.haskell.org/haskellwiki/Referential_transparency)的函数式编程的承诺之一是可以对此类代码进行广泛优化。引用[维基百科](https://en.wikipedia.org/wiki/Functional_programming#Efficiency_issues)：

> 在许多情况下，数据的不变性可以提高执行效率，因为它允许编译器在命令式语言中做出不安全的假设，从而*增加*内联扩展的机会。

我希望看到函数式语言编译器通过生成更好的优化代码来胜过命令式编译器的示例。

**编辑：**我试图给出一个特定的场景，但显然这不是一个好主意。所以我会尝试用不同的方式来解释它。

程序员将想法（算法）翻译成机器可以理解的语言。同时，翻译的最重要方面之一是人类也可以理解生成的代码。不幸的是，在许多情况下需要权衡取舍：简洁易读的代码会受到性能缓慢的影响，需要手动优化。这是容易出错、耗时的，并且会降低代码的可读性（甚至完全不可读）。

函数式语言的基础，例如不变性和引用透明性，允许编译器执行广泛的优化，这可以取代手动优化代码并使程序员从这种权衡中解脱出来。我正在寻找想法（算法）及其实现的示例，例如：

1.  （功能）实现接近原始想法并且易于理解，
2.  它被语言的编译器广泛优化，并且
3.  如果没有降低其简洁性和可读性的手动优化，很难（或不可能）用命令式语言编写类似高效的代码。

如果有点含糊，我深表歉意，但我希望这个想法很清楚。我不想对答案进行不必要的限制。如果有人知道如何更好地表达它，我愿意接受建议。

我的兴趣不仅仅是理论上的。我想用这样的例子（除其他外）来激励学生对函数式编程产生兴趣。

起初，我对评论中建议的几个例子并不满意。再三考虑，我收回我的反对意见，这些都是很好的例子。请随时将它们扩展为完整的答案，以便人们可以评论和投票。

* * *

（一类这样的例子很可能是并行化代码，它可以利用多个 CPU 内核。通常在函数式语言中，这可以很容易地完成，而不会牺牲代码的简单性（比如在 Haskell 中通过添加[`par`或`pseq`](http://hackage.haskell.org/packages/archive/parallel/3.2.0.3/doc/html/Control-Parallel.html)在适当的地方）。我是也对此类示例感兴趣，但也对其他非平行示例感兴趣。）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-16T14:30:09.517

在某些情况下，相同的算法在纯上下文中会优化得更好。具体来说，[流融合](http://citeseer.ist.psu.edu/viewdoc/summary?doi=10.1.1.104.7401)允许由一系列循环组成的算法，这些循环的形式可能多种多样：映射、过滤器、折叠、展开，组合成一个循环。

传统命令式设置中的等效优化，循环中的可变数据，必须实现完整的效果分析，这是没有人做的。

因此，至少对于作为序列上的变形和变态管道实现的算法类，您可以保证在命令式设置中不可能的优化结果。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-11T09:52:09.493

Geoff Mainland、Simon Peyton Jones、Simon Marlow、Roman Leshchinskiy最近的一篇论文[Haskell beats C using generalized stream fusion](http://www.reddit.com/r/haskell/comments/1br0ls/haskell_beats_c_using_generalised_stream_fusion/)（提交给 ICFP 2013）描述了这样一个例子。摘要（有趣的部分以粗体显示）：

> 流融合 [6] 是一种强大的技术，用于将高级序列处理功能自动转换为有效的实现。它已在 Haskell 库中用于处理字节数组、Unicode 文本和未装箱的向量，效果非常好。然而，一些操作，如向量追加，在标准流融合框架中仍然不能很好地执行。其他的，例如使用现代 x86 芯片上可用的 SSE 和 AVX 指令的 SIMD 计算，似乎根本不适合该框架。
> 
> 在本文中，我们介绍了广义流融合，它解决了这些问题。关键的见解是将多个流表示*捆绑*在一起，每个流表示都针对特定类别的流消费者进行了调整。我们还描述了一种适合使用 SSE 指令进行高效计算的流表示。`vector`我们的想法在 GHC 编译器和库 的修改版本中实现。**基准测试表明，使用我们的编译器和库编写的高级 Haskell 代码可以生成比编译器和手动向量化 C 更快的代码。**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-28T19:06:59.800

这只是一个注释，而不是答案：`gcc`有一个`pure`属性表明它可以考虑纯度；明显的原因在[此处](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html#index-g_t_0040code_007bpure_007d-function-attribute-2635)的手册中进行了说明。

我认为“静态单一分配”强加了一种纯洁形式——请参阅[http://lambda-the-ultimate.org/node/2860](http://lambda-the-ultimate.org/node/2860)上的链接或维基百科文章。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T21:15:37.987

通过假设各种构建步骤是参照透明的，使得和各种构建系统在大型项目中表现更好；因此，他们只需要重新运行输入发生变化的步骤。

对于中小型更改，这可能比从头开始构建要快得多。

# git - git 在多个仓库中创建分支

> ID：14357920
> 
> 赞同：0
> 
> 时间：2013-01-16T11:57:44.850
> 
> 标签：git, push, putty, private-key

我有很多 git 存储库。我正在编写脚本，在每个回购中从**master创建****newBranch 。**所以我为每个回购做这个命令集：

 **```
git checkout master
git branch newBranch
git push origin newBranch 
```

我的最后一个命令有问题。它会提示 repo 的密码。

通常我使用 GitExtension 与腻子和私钥完美配合。如何强制“git push”命令使用这些设置？

我的脚本将被具有相同 CPU 配置的其他用户使用，因此我需要自动读取此设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:28:31.197

Git Extensions will automatically load the required SSH key into PuTTY’s agent (pageant.exe) for a repo where a private key is specified. If you don’t use Git Extensions you will need to do that manually.

If you set the environment variable `GIT_SSH` correctly to `plink.exe` (Git Extensions should have done that), it will be enough to just launch pageant and load your key into it.**

# xaml - Windows 8 xaml - 最佳实践：从设计模型到应用程序？

> ID：14357921
> 
> 赞同：1
> 
> 时间：2013-01-16T11:57:51.307
> 
> 标签：xaml, user-interface, windows-8, adobe-illustrator

Windows 8 xaml 应用引入视觉设计资产的最佳做法是什么？

我们开始在 Adob​​e Illustrator 中设计我们的应用程序，因此所有图形都将基于矢量且可缩放。现在我们有了屏幕设计，但找不到将它们带入实际应用程序 (xaml/c#) 的方法。我认为有一种方法可以将 SVG 导入 Visual Studio 或 Blend，但我们找不到。对于 Windows Phone，甚至还有 Illustrator 导入功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:17:17.287

不幸的是，当前版本的 Blend 中缺少从 Illustrator 导入功能。但是，您可以使用 Expression Blend 4 从 Illustrator 中导入相关的 XAML，然后将其复制/粘贴到 Blend 5 中。

干杯劳伦特

# ruby-on-rails - 如何在开发环境中使用 gmail SMTP 发送电子邮件并设计？

> ID：14357923
> 
> 赞同：2
> 
> 时间：2013-01-16T11:57:55.057
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试在本地主机上并使用设计发送电子邮件（我需要用于用户注册和密码重置的电子邮件）

我已经把它放在我的 environment.rb 文件中

```
config.action_mailer.delivery_method = :smtp

config.action_mailer.smtp_settings = {
    address: "smtp.gmail.com",
    port: 587,
    domain: "gmail.com",
    authentication: "plain",
    enable_starttls_auto: true,
    user_name: ENV["username"],
    password: ENV["password"]

}

config.action_mailer.default_url_options = { :host => 'localhost:3000' } 
```

但我没有收到任何邮件，也没有看到任何错误（设计说）。

*   我错过了什么？
*   我在哪里可以查看电子邮件日志（成功或失败）？

编辑-好的，添加此行后它起作用了

```
:openssl_verify_mode  => 'none' 
```

也检查此[栏电子邮件错误 - 530-5.5.1 需要身份验证。](https://stackoverflow.com/questions/11724906/rails-email-error-530-5-5-1-authentication-required/11725153#11725153)

# objective-c - UITableViewController 和 UITextFields 的奇怪行为

> ID：14357925
> 
> 赞同：1
> 
> 时间：2013-01-16T11:57:58.827
> 
> 标签：objective-c, ios6, uitextfield, uitableview

`UITableViewController`在单元格中使用and时，我观察到一些奇怪的行为`UITextFields`。

`UITextFields`委托设置为并且当`UITableViewController`进入编辑模式时，表格视图滚动到相关单元格，并且不会用键盘遮挡输入。

但是，当我使用另一个视图控制器时

```
[self presentViewController:vc animated:TRUE  completion:^() {}]; 
```

然后用

```
[self dismissViewControllerAnimated:YES completion:^{}]; 
```

表格停止滚动并调整大小以适应键盘。

我在哪里调用该方法似乎并不重要`presentViewController`（在单元格中，在标题中或在工具栏中）

有任何想法吗？

**更新 1：**

我的 UITextField 的代表设置`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`为`cell.textField.delegate = self`

我只覆盖`viewWillAppear:(BOOL)animated`：

```
- (void) viewWillAppear:(BOOL)animated  {
    [super viewWillAppear:animated];
    [[GAI sharedInstance].defaultTracker sendView:@"Some view name"];
} 
```

**更新 2**

手动调用

```
[self dismissViewControllerAnimated:YES completion:^{
        [self viewWillAppear:YES];
}]; 
```

修复它，但我仍然想了解为什么这是必要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:32:26.767

在视图层次结构中的某个地方，我错过了对`[super viewWillAppear:]`.

# ninject - Ninject DependencyCreation 和 EventBroker 扩展。确保一对一订阅

> ID：14357928
> 
> 赞同：0
> 
> 时间：2013-01-16T11:58:04.710
> 
> 标签：ninject, ninject.web.mvc, ninject-extensions

我正在使用 Ninject Event Broker 扩展，我有两个服务。`ServiceOne`是事件的发布者。`ServiceTwo`是订户。`ServiceOne`没有硬依赖`ServiceTwo`，我正在使用 DependencyCreation 扩展创建依赖。

以下是要求：

*   我想在这两个对象之间定义一个一对一的事件。只有`ServiceTwo`DependencyCreation 创建的实例应该接收该事件。
*   如果在对象图中还有其他`ServiceTwo`进一步向下的实例，则它们不应收到该事件。（这不应该是这种情况，但我想说明它）
*   `ServiceTwo`应在处置时`ServiceOne`处置。
*   这是一个 Web 应用程序，它的生命周期`ServiceOne`应该只针对一个请求。

基本上我只是想重现我写作的行为：

```
var publisher = new Publisher();
var subscriber = new Subscriber();
var subscriber2 = new Subscriber();
publisher.MyEvent += subscriber.MyEventHandler; 
```

一位出版商。一名订户。订阅者 2 没有收到该事件。

这是我的代码：

```
this.Bind<IServiceOne, ServiceOne>().To<ServiceOne>().Named("ServiceOne").OwnsEventBroker("ServiceOne").RegisterOnEventBroker("ServiceOne");
this.Kernel.DefineDependency<IServiceOne, IServiceTwo>();
this.Bind<IServiceTwo>().To<ServiceTwo>().WhenParentNamed("ServiceOne").InDependencyCreatorScope().RegisterOnEventBroker("ServiceOne"); 
```

两个问题。

这能满足我的要求吗？有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:38:27.317

我通常不喜欢回答我自己的问题，但看到这已经安静了一段时间，我一直在测试我的代码示例，它似乎工作正常。为了清理这些依赖项的创建和整个事件代理注册过程，我创建了一些扩展方法。首先是一个`IsPublisher`创建作用域事件代理的扩展：

```
 public static ISubscriberBuildingSyntax IsPublisher<TPublisher>(this IBindingWhenInNamedWithOrOnSyntax<TPublisher> syntax)
    {
        string name = Guid.NewGuid().ToString();
        syntax.Named(name);
        syntax.OwnsEventBroker(name).RegisterOnEventBroker(name);
        return new SubscriberBuildingSyntax<TPublisher>(syntax, name);
    } 
```

`CreateSubscriberDependency`其次，使用 Dependency Creator 创建依赖项的通用方法：

```
 public ISubscriberBuildingSyntax CreateSubscriberDependency<TSubscriber>() where TSubscriber : class
    {
        this.syntax.Kernel.DefineDependency<TPublisher, TSubscriber>();
        this.syntax.Kernel.Bind<TSubscriber>().ToSelf().WhenParentNamed(this.name).InDependencyCreatorScope().RegisterOnEventBroker(this.name);
        return this;
    } 
```

然后我可以这样称呼它：

```
 this.Bind<IRegistrationService>().To<RegistrationService>()
            .IsPublisher()
            .CreateSubscriberDependency<RoleService>(); 
```

这将创建一个作用域为`RegistrationService`实例的事件代理，其`RoleService`依赖关系与`RegistrationService`.

然后我可以注册`RegistrationService`以`InRequestScope`将其限制为一个请求的生命周期。

# javascript - 如何动态遍历 JSON 数据并进行更改..？

> ID：14357933
> 
> 赞同：1
> 
> 时间：2013-01-16T11:58:15.253
> 
> 标签：javascript, arrays, json, parsing, object

我有一个类似 JSON 数据的地图

```
var map =  {        
    level1 : {          
            x : {name:'level1 x' , },
            y : {name:'level1 y'}
    },
    level2 : {          
            x : {name:'level2 x'},
            y : {name:'level2 y'}
    } 
```

}

我需要遍历这些数据，我将遍历路径作为字符串

```
"level1 x name" , "level2 y name"; 
```

我如何解析来自该字符串路径的 JSON 数据..??

我尝试的是，

```
var path = "level1 x name".split(" ");
var pointer = map; // assuming it will take reference of map and change will cause to map also
 for (var i = 0, len = path.length; i < len; i++) {
   if(pointer){
      pointer = pointer[path[i]];
   }else{
     pointer = map[path[i]];
   } 
 }
 pointer = "level1 xx";

console.log(map); 
```

但是地图数据没有改变..如何通过引用循环并更改值..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T12:02:00.207

这就是您获得价值的方式：

```
var name = [map].concat("level1 x name".split(" ")).reduce(function(prev, curr) {
    return prev[curr];
});

console.log(name);

// -> 'level1 x' 
```

JavaScript 通过值而不是引用传递参数。

为了您的方便，我更改了您的代码，以便满足您的要求：

```
var path = "level1 x name".split(" ");
var pointer = map; // assuming it will take reference of map and change will cause to map also
 for (var i = 0, len = path.length-1; i < len; i++) {
   if(pointer){
      pointer = pointer[path[i]];
   }else{
     pointer = map[path[i]];
   } 
 }
 pointer[path[path.length-1]] = "level1 xx";

console.log(map); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-16T12:12:17.830

试试这个.. 根据需要更改路径变量。它工作正常。我刚刚在firebug中验证了它。

```
var map =  {        
    level1 : {          
            x : {name:'level1 x' , },
            y : {name:'level1 y'}
    },
    level2 : {          
            x : {name:'level2 x'},
            y : {name:'level2 y'}
    }
};
var path = "level1 x name";
var pathInfor = path.split(' ');
var pathLength = pathInfor.length;
//alert(map[pathInfor[0]][pathInfor[1]][pathInfor[2]].name);

for(level in map)
{
    if(level == pathInfor[0]){
       var selLevel = map[level];
        for(xy in selLevel)
        {
           if(xy == pathInfor[1])
           {
                  var selVariable = map[level][xy];
                    for(innerVal in selVariable){
                               if(innerVal == pathInfor[2]){
                               alert(map[level][xy][innerVal]);
                               }
                    }
           }
        }
    }
} 
```

在这种方法中，您不需要检查这些值。如果要打印 JSON 格式的所有值，请删除条件。

# sql - ole db 目标上的重复行

> ID：14357943
> 
> 赞同：0
> 
> 时间：2013-01-16T11:58:59.663
> 
> 标签：sql, sql-server, ssis

我有一个相当复杂的场景，可以并行运行相同的包。在某些情况下，两个执行都可能最终尝试将同一行插入到目标中，这会导致违反主键错误。

当前有一个查找检查目标表以查看记录是否存在，因此插入在其“不匹配”输出上完成。它不会阻止错误，因为查找是在包启动时加载的，因此两个包都在其上获得相同的数据，如果有一行出现，它们都会将其视为“新”行，因此第一个成功，第二个失败.

有什么办法可以避免这种情况？几乎忽略了 oledb 目标上的“重复行”？我不能使用 MAX ERROR COUNT，因为重复行位于不在第一个包上的其他行中，应该插入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T13:53:07.780

默认查找行为是使用完整缓存模式。正如您所观察到的，在包验证阶段，它会将所有查找值拉入本地内存缓存并使用导致它丢失对表的更新的值。

对于您的情况，我会尝试将缓存模式更改为`None`（部分是另一个选项）。None 表示应该针对通过的每一行向目标数据库发起实际查询。根据您的数据量或性能不佳的查询，这可能会对目标产生不小的影响。它仍然不能保证并行实例没有尝试加载完全相同的记录（或者并行运行已经满足了它们的查找并准备写入目标表），但它应该会改善这种情况。

如果您无法控制包执行以使并发数据流被触发，那么您应该考虑重新构建该方法（写入分区并换入，使用某些东西来锁定资源，暂存所有数据并使用 TSQL 合并等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:59:15.953

只是一个想法......如何将新记录写入临时表并间歇性地合并它？这将有机会过滤掉重复项。

# angularjs - 如何让AngularJS编译指令生成的代码？

> ID：14357945
> 
> 赞同：8
> 
> 时间：2013-01-16T11:59:01.717
> 
> 标签：angularjs

请帮助我，我们如何让 AngularJS 编译指令生成的代码？

你甚至可以在这里找到相同的代码，[http://jsbin.com/obuqip/4/edit](http://jsbin.com/obuqip/4/edit)

**HTML**

```
<div ng-controller="myController">
    {{names[0]}} {{names[1]}}
    <br/> <hello-world my-username="names[0]"></hello-world>
    <br/> <hello-world my-username="names[1]"></hello-world>
    <br/><button ng-click="clicked()">Click Me</button>
</div> 
```

**Javascript**

```
var components= angular.module('components', []);
components.controller("myController",
    function ($scope) {
        var counter = 1;
        $scope.names = ["Number0","lorem","Epsum"];
        $scope.clicked = function() {
            $scope.names[0] = "Number" + counter++;
        };
    }
);

// **Here is the directive code**
components.directive('helloWorld', function() {
    var directiveObj =  {
        link:function(scope, element, attrs) {
            var strTemplate, strUserT = attrs.myUsername || "";
            console.log(strUserT);
            if(strUserT) {
                strTemplate = "<DIV> Hello" + "{{" + strUserT +"}} </DIV>" ;
            } else {
                strTemplate = "<DIV>Sorry, No user to greet!</DIV>" ;
            }
            element.replaceWith(strTemplate);
        },
        restrict: 'E'
    };
    return directiveObj;
}); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-16T18:03:32.127

这是一个不使用编译函数和链接函数的版本：

```
myApp.directive('helloWorld', function () {
  return {
    restrict: 'E',
    replace: true,
    scope: {
      myUsername: '@'
    },
    template: '<span><div ng-show="myUsername">Hello {{myUsername}}</div>'
    + '<div ng-hide="myUsername">Sorry, No user to greet!</div></span>',
  };
}); 
```

请注意，模板包含在 <span> 中，因为模板需要有一个根元素。（如果没有 <span>，它将有两个 <div> 根元素。）

HTML 需要稍作修改，以插入：

```
<hello-world my-username="{{names[0]}}"></hello-world> 
```

[小提琴](http://jsfiddle.net/mrajcok/979mN/)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-16T12:42:55.847

代码：http: [//jsbin.com/obuqip/9/edit](http://jsbin.com/obuqip/9/edit)

```
components.directive('helloWorld', function() {
    var directiveObj =  {
        compile:function(element, attrs) {
            var strTemplate, strUserT = attrs.myUsername || "";
            console.log(strUserT);
            if(strUserT) {
                strTemplate = "<DIV> Hello " + "{{" + strUserT +"}} </DIV>" ;
            } else {
                strTemplate = "<DIV>Sorry, No user to greet!</DIV>" ;
            }
            element.replaceWith(strTemplate);
        },
        restrict: 'E'
    };
    return directiveObj;
}); 
```

说明：在编译函数而不是链接函数中应该使用相同的代码。AngularJS 确实编译了 compile 函数的生成内容。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-16T12:30:06.563

您需要从模板创建一个角度元素并使用[$compile](http://docs.angularjs.org/api/ng.$compile)服务

[jsBin](http://jsbin.com/obuqip/5/edit)

```
components.directive('helloWorld', ['$compile', function(compile) {
    var directiveObj =  {
        link: function(scope, element, attrs) {
            var strTemplate, strUserT = attrs.myUsername || "";
            console.log(strUserT);
            if (strUserT) {
                strTemplate = "<DIV> Hello" + "{{" + strUserT +"}} </DIV>" ;
            } else {
                strTemplate = "<DIV>Sorry, No user to greet!</DIV>" ;
            }

            var e = angular.element(strTemplate);
            compile(e.contents())(scope);
            element.replaceWith(e);
        },
        template: function() {
            console.log(args);
            return "Hello";
        },
        restrict: 'E'
    };
    return directiveObj;
}]); 
```

# silverlight - 如何将静态字符串值添加到 Silverlight 中的组合框？

> ID：14357955
> 
> 赞同：0
> 
> 时间：2013-01-16T11:59:28.743
> 
> 标签：silverlight, xaml, mvvm

嗨，我的页面中有一个组合框控件，组合框的数据是使用视图模型中的 IEnumerable 集合生成的。现在我想在组合框项目的最后一个添加一个静态字符串。这该怎么做？我附上了我的组合框的屏幕截图，它有 4 个值现在我想添加一个字符串示例

> **项目底部的**“自定义尺寸” 。**我还附上了我的视图模型代码。![在此处输入图像描述](../Images/02af04db56d950e5db7216c01e3521aa.png)**

 **```
 PartsDomainContext context;
    private IEnumerable<CategoryHierarchy> Categoryhierarchies;
    private IEnumerable<CategoryHierarchy> _SizeCategoryhierarchies;
    private CategoryHierarchy categoryhierarchy;
    private CategoryHierarchy _Sizecategoryhierarchy;
    private ProductCategory productcategory;

    public IEnumerable<CategoryHierarchy> SizeCategoryHierarchies
    {
        get
        {
            return _SizeCategoryhierarchies;
        }
        set
        {
            _SizeCategoryhierarchies = value;

        }
    }

    public CategoryHierarchy SizeCategoryHierarchy
    {

        get { return _Sizecategoryhierarchy; }

        set
        {

            if (_Sizecategoryhierarchy == null)
            {

                _Sizecategoryhierarchy = value;
                OnPropertyChanged("SizeCategoryHierarchy");

                ActiveData.Instance.size = _Sizecategoryhierarchy.Category.CategoryName.ToString();
                ActiveData.Instance.Description1 = _Sizecategoryhierarchy.Category.Description1;
                ActiveData.Instance.Description2 = _Sizecategoryhierarchy.Category.Description2;
                ActiveData.Instance.ShortDescription1 = _Sizecategoryhierarchy.Category.ShortDescription1;
                ActiveData.Instance.Notes = _Sizecategoryhierarchy.Category.Notes;

            }
            else
            {
                try
                {
                    _Sizecategoryhierarchy = value;
                    OnPropertyChanged("SizeCategoryHierarchy");

                    ActiveData.Instance.size = _Sizecategoryhierarchy.Category.ToString();
                }
                catch (Exception ex)
                {
                }
                finally
                {
                }
            }

        }

    }

    public Wizard1ViewModel()
    {
        GetSize();
    }

    public void GetSize(int parentcategory)
    {
        context = new PartsDomainContext();
        IsBusy = true;
        context.Load(context.GetCategoryByHierarchyQuery(1), e =>
        {
            if (!e.HasError)
            {

                SizeCategoryHierarchies = e.Entities.Where(c =>       c.ParentCategory.Equals(parentcategory));

                OnPropertyChanged("SizeCategoryHierarchies");

                IsBusy = false;

            }
        }, null);
    }

//Xaml 
```

```
 <Grid x:Name="LayoutRoot" Background="White">
            <Grid.RowDefinitions>
                <RowDefinition Height="0*" />
                <RowDefinition Height="300*" />
            </Grid.RowDefinitions>

                    <ComboBox Name="poolsize" ItemsSource="{Binding SizeCategoryHierarchies, Mode=TwoWay}" DisplayMemberPath="Category.CategoryName" SelectedValuePath="Category.CategoryName" SelectedItem="{Binding SizeCategoryHierarchy, Mode=TwoWay}" HorizontalAlignment="Left" Margin="132,0,0,82" FontSize="16" VerticalAlignment="Bottom"  Width="216" RenderTransformOrigin="0.505,2.967" DropDownOpened="poolsize_DropDownOpened_1"/>

        </Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:46:03.083

由于 IEnumerable 不提供 Add 方法，但您可以在您的 INumerable 上使用 Concat ，您可以在以下链接中找到详细答案[How can I add an item to a IEnumerable<T> collection?](https://stackoverflow.com/questions/1210295/how-can-i-add-an-item-to-a-ienumerablet-collection) .

问候，**

# salesforce - 尝试在 Salesforce 中创建自定义“收入日期”字段

> ID：14357956
> 
> 赞同：0
> 
> 时间：2013-01-16T11:59:29.527
> 
> 标签：salesforce

我正在尝试创建一个遵循以下逻辑的“**收入日期**”字段。我希望收入日期字段根据我们的 CS 团队编辑的日期字段进行计算。字段（可编辑的日期字段）是 - 覆盖日期 - 电子邮件开始日期 - 生效日期 - 预计电子邮件开始日期 - 预计 GL 日期

第 5 个自动计算的日期字段（**预计上线日期**）**始终具有日期值**（仅在上述字段为空白时使用）

所以，我试图使用的逻辑是

(i) 是否有**超车日期**？如果是，那么就拿这个停下来。**如果没有**，继续（ii）

(ii) 是否至少有“<strong>电子邮件开始日期”或“<strong>实时日期”之一？如果是，请选择其中较早的一个并停止。**如果不是**，继续 (iii)

(iii) 是否存在“<strong>预计电子邮件开始日期”和“<strong>预计 GL 日期”中的至少一个？? 如果是，请选择其中较早的一个并停止。**如果否**，继续 (iv)

(iv) 如果上述所有字段均为空白，则采用**预计上线日期**

我知道这看起来令人困惑，但这只是因为我们计算收入的方式取决于我们的客户服务团队输入的日期，即我们在客户网站上的活动时间（与交易的结束日期不同）。

下面这个公式的某个地方似乎出错了..

BLANKVALUE(Over_ride_Date__c, IF(NOT(ISBLANK(Email_Start_Date__c)) && NOT(ISBLANK(Live_Date__c)), IF(Email_Start_Date__c < Live_Date__c, Email_Start_Date__c, Live_Date__c)), IF(ISBLANK(Email_Start_Date__c) && ISBLANK(Live_Date__c)) （ISBLANK（Estimated_Email_Start_Date__c））&& NOT（ISBLANK（Estimated_G_L_Date__c）），IF（Estimated_Email_Start_Date__c <Estimated_G_L_Date__c，Estimated_Email_Start_Date__c，Estimated_G_L_Date__c）），IF（ISBLANK（Estimated_Email_Start_Date__c）&& ISBLANK（Estimated_G_L_Date__c）），BLANKVALUE（Estimated_Go_Live_Date__c，Estimated_Go_Live_Date__c）））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:46:35.113

我将尝试引导您完成我的设计过程；）

公式的基本形状可能是这样的：

```
BLANKVALUE(Over_ride_Date__c,
    IF(ISBLANK(Email_Start_Date__c) && ISBLANK(Live_Date__c),
        IF(ISBLANK(Estimated_Email_Start_Date__c) && ISBLANK(Estimated_G_L_Date__c),
            Estimated_Go_Live_Date__c,
            /* need to use Estimated_Email_Start_Date__c or Estimated_G_L_Date__c */
        ),
        /* need to use Email_Start_Date__c or Live_Date__c */
    )
) 
```

现在应该很容易。如果未设置“覆盖”并且“电子邮件开始日期”和“实时日期”均为空白 - 转到下一个变量。否则（这是我们还没有的部分）如果至少设置了其中一个 - 我们将尝试使用它们。与最后一对日期类似。

* * *

那么现在会是什么：

1.  电子邮件和实时已填写 - 取小一点
2.  邮箱填写，Live null - 取邮箱
3.  电子邮件为空，已填满 - 直播

有几种方法可以做到这一点。有点长但可读：

```
IF(ISBLANK(Email_Start_Date__c),
    Live_Date__c,
    IF(ISBLANK(Live_Date__c),
        Email_Start_Date__c,
        IF(Email_Start_Date__c < Live_Date__c, Email_Start_Date__c, Live_Date__c)
    )
) 
```

但我要提倡这一点：

```
IF(ISBLANK(Live_Date__c) || BLANKVALUE(Email_Start_Date__c, Live_Date__c) < Live_Date__c,
    BLANKVALUE(Email_Start_Date__c, Live_Date__c),
    Live_Date__c
) 
```

这是它有效的证明：

![真值表](../Images/88cce5956490f538cd68014dc43eac98.png)

（仅 9 行，因为那是所有组合：`smaller/bigger/null`* `smaller/bigger/null`）。事实上，最后一个 ( `null and null`) 我们已经排除了之前的 IF 语句。

* * *

**这导致我们...**

```
BLANKVALUE(Over_ride_Date__c,
    IF(ISBLANK(Email_Start_Date__c) && ISBLANK(Live_Date__c),
        IF(ISBLANK(Estimated_Email_Start_Date__c) && ISBLANK(Estimated_G_L_Date__c),
            Estimated_Go_Live_Date__c,
            IF(ISBLANK(Estimated_G_L_Date__c) || BLANKVALUE(Estimated_Email_Start_Date__c, Estimated_G_L_Date__c) < Estimated_G_L_Date__c,
                BLANKVALUE(Estimated_Email_Start_Date__c, Estimated_G_L_Date__c),
                Estimated_G_L_Date__c
            )
        ),
        IF(ISBLANK(Live_Date__c) || BLANKVALUE(Email_Start_Date__c, Live_Date__c) < Live_Date__c,
            BLANKVALUE(Email_Start_Date__c, Live_Date__c),
            Live_Date__c
        )
    )
) 
```

# android - Kindle Fire 获取当前位置

> ID：14357957
> 
> 赞同：2
> 
> 时间：2013-01-16T11:59:37.113
> 
> 标签：android, location, kindle-fire, mapquest

我使用的是第二代 Kindle Fire，它使用 WiFi 进行定位服务。

问题是我似乎无法在应用程序中获得这个。我正在使用`LocationManager`适用于 Google Play 的版本，它工作正常，但对于 Kindle，它永远不会返回一个位置，只是被卡住了：

```
locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener); 
```

这是因为它是 Kindle 无法使用的 Google 服务吗？还有什么我可以使用的。

我正在使用`MapQuest`但不想显示用户位置的地图叠加层，我只想要当前的纬度和经度。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T12:01:24.223

我不相信 kindle 有 GPS 接收器，所以你不能`LocationManager`用它来使用 Android。

您可以使用作为[Amazon maps API](https://developer.amazon.com/sdk/maps.html)中包的`MyLocationOverlay`一部分的类。[常见问题解答](https://developer.amazon.com/sdk/maps/faq.html)很不错，并提供了一些很好的信息。`com.amazon.geo.maps`

另外，我没有使用它，但[Skyhook](http://www.skyhookwireless.com/location-technology/index.php)提供了一个可能对您有用的位置 SDK。

# android - 如何删除 SQLite 中具有多个 where 参数的行？

> ID：14357964
> 
> 赞同：25
> 
> 时间：2013-01-16T11:59:49.103
> 
> 标签：android, database, sqlite

我想删除满足多个条件中的任何一个的行。

例如，我传递了一个 ID 列表，我想删除所有包含这些的行`IDs`（ID 是唯一的）。

这将是：

```
String[] ids = {"0", "1", "2", "3",...};
database.delete("rows" , "id=? OR id=? OR id=? OR id=? OR ..." , ids ); 
```

有没有什么办法可以在没有多个的情况下做到紧凑`OR`？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-01-16T12:04:20.687

您可以通过`db.execSQL`方法和 SQL 的**IN**关键字来完成它。例如：

```
String args = TextUtils.join(", ", ids);

db.execSQL(String.format("DELETE FROM rows WHERE ids IN (%s);", args)); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-16T12:05:26.720

您要使用的是一个`IN`子句，例如（带有 4 个 ID）；

```
database.delete("rows", "id IN (?, ?, ?, ?)", ids ); 
```

根据要求，这是您如何动态执行此操作的（一个示例）；

```
database.delete("rows", 
    "id IN (" + new String(new char[ids.length-1]).replace("\0", "?,") + "?)", 
    ids); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-08-24T11:23:53.390

Android官方文档告诉[here](https://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#execSQL(java.lang.String))，使用execSQL不是删除记录的正确方法。

我想建议以下简单的方法。使用提供`delete()`的 api。

```
String[] idArray = new String[] {"1", "2", "3"};
String idsCSV = TextUtils.join(",", idArray);
SQLiteDatabase db = getWritableDatabase();
if (db != null) {
    db.delete("table_name", "id IN (" + idsCSV + ")", null);
    db.close();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T12:05:22.370

您可以`id IN (1, 2, 3, 4, ...)`在括号内使用并直接打印数组值：

```
database.delete("rows", String.format("id IN (%s)", StringUtils.join(ids, ","))); 
```

作为替代方案，我会尝试对此类事情使用某种`flags`列（如果有类似能够标记单个条目以进行删除的功能；我不知道您的 ID 列表是如何“构建”的）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-08T10:03:14.303

我已经这样做了：

**Sqlite 语句语法：**

```
db.delete(TABLE_NAME,"COLUMN IN (?)", new String[]{commaSaparatedString}) 
```

**基于问题的示例：**

```
String args = TextUtils.join(", ", ids);
db.delete("rows","id IN (?)", new String[]{args}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-18T17:55:28.987

这是一个使用 StringBuilder 构建“?, ?, ?, ...” 占位符字符串的示例。如果有很多参数，纯字符串连接会产生很多垃圾，StringBuilder 可以帮助解决这个问题。

```
String[] ids = {"0", "1", "2", "3",...};

StringBuilder placeholders = new StringBuilder();
for (int i = 0; i < ids.length; i++) {
    if (i != 0)
        placeholders.append(", ");

    placeholders.append("?");
}

String where = "id IN (" + placeholders.toString() + ")";

db.delete("rows", where, args); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-21T08:21:53.293

这适用于我的 varchar ID。

```
public Integer deleteObjects(List<Object> objects){
    if (objects.size()<1) return 0;
    SQLiteDatabase db = getWritableDatabase();
    StringBuilder strb= new StringBuilder();
    for(int i = 0; i<objects.size();i++){
        strb.append("'");
        strb.append(objects.get(i).getId().toString());
        strb.append("'");
        // last element without comma
        if (i<objects.size()-1) strb.append(","); 
    }
    int rows = db.delete("table_name","id IN (" + strb + ")",null);
    db.close();
    return rows;
} 
```

这直接使用 args 构建 WHERE 字符串。相当于：

```
 db.delete(TABLE_NAME,"id IN ('id0-maddog','id1-foo','id2-bar')",null); 
```

# css - 相对于另一个非嵌套 div 定位 div

> ID：14357967
> 
> 赞同：0
> 
> 时间：2013-01-16T11:59:51.803
> 
> 标签：css, position

我无法更改 html，我有 2 个未嵌套的 div，并且我想将 div1 相对于 div2 定位，因为它们是嵌套的。有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:07:47.527

```
var top = $('#firstElement').offset().top();
var left = $('#firstElement').offset().left();

top += relativeY;
left += relativeX;

$('#secondElement').css({'top': top; 'left': left}); 
```

# java - 必要时用于 URL 编码的 Java 库（如浏览器）

> ID：14357970
> 
> 赞同：16
> 
> 时间：2013-01-16T11:59:55.640
> 
> 标签：java, urlencode

如果我将`http://localhost:9000/space test`URL 放到 Web 浏览器的地址栏，它会使用`http://localhost:9000/space%20test`. `http://localhost:9000/specÁÉÍtest`也将被编码为`http://localhost:9000/spec%C3%81%C3%89%C3%8Dtest`.

如果将编码的 URL 放到地址栏（即`http://localhost:9000/space%20test`和`http://localhost:9000/spec%C3%81%C3%89%C3%8Dtest`），它们保持不变（它们不会被双重编码）。

是否有任何 Java API 或库可以进行这种编码？URL 来自用户，所以我不知道它们是否经过编码。

（如果没有在输入字符串中搜索并`%`在未找到时进行编码就足够了，或者是否有任何特殊情况不起作用？）

***编辑：***

`URLEncoder.encode("space%20test", "UTF-8")`返回`space%2520test`which 不是我想要的，因为它是双重编码的。

***编辑2：***

此外，浏览器可以处理部分编码的 URL，例如`http://localhost:9000/specÁÉ%C3%8Dtest`，好吧，而不需要对它们进行双重编码。在这种情况下，服务器会收到以下 URL：`http://localhost:9000/spec%C3%81%C3%89%C3%8Dtest`。它与 的编码形式相同`...specÁÉÍtest`。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-21T16:28:46.567

[每个 Web 开发人员必须了解的有关 URL 编码的知识](http://blog.lunatech.com/2009/02/03/what-every-web-developer-must-know-about-url-encoding)

[网址编码解释](http://www.freeformatter.com/url-encoder.html)

**为什么需要 URL 编码？**

```
The URL specification RFC 1738 specifies that only a small set of characters 
can be used in a URL. Those characters are:

A to Z (ABCDEFGHIJKLMNOPQRSTUVWXYZ)
a to z (abcdefghijklmnopqrstuvwxyz)
0 to 9 (0123456789)
$ (Dollar Sign)
- (Hyphen / Dash)
_ (Underscore)
. (Period)
+ (Plus sign)
! (Exclamation / Bang)
* (Asterisk / Star)
' (Single Quote)
( (Open Bracket)
) (Closing Bracket) 
```

**URL 编码是如何工作的？**

```
All offending characters are replaced by a % and a two digit hexadecimal value 
that represents the character in the proper ISO character set. Here are a 
couple of examples:

$ (Dollar Sign) becomes %24
& (Ampersand) becomes %26
+ (Plus) becomes %2B
, (Comma) becomes %2C
: (Colon) becomes %3A
; (Semi-Colon) becomes %3B
= (Equals) becomes %3D
? (Question Mark) becomes %3F
@ (Commercial A / At) becomes %40 
```

**简单示例：**

```
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.ScriptException;

public class TextHelper {
    private static ScriptEngine engine = new ScriptEngineManager()
        .getEngineByName("JavaScript");

/**
 * Encoding if need escaping %$&+,/:;=?@<>#%
 *
 * @param str should be encoded
 * @return encoded Result 
 */
public static String escapeJavascript(String str) {
    try {
        return engine.eval(String.format("escape(\"%s\")", 
            str.replaceAll("%20", " "))).toString()
                .replaceAll("%3A", ":")
                .replaceAll("%2F", "/")
                .replaceAll("%3B", ";")
                .replaceAll("%40", "@")
                .replaceAll("%3C", "<")
                .replaceAll("%3E", ">")
                .replaceAll("%3D", "=")
                .replaceAll("%26", "&")
                .replaceAll("%25", "%")
                .replaceAll("%24", "$")
                .replaceAll("%23", "#")
                .replaceAll("%2B", "+")
                .replaceAll("%2C", ",")
                .replaceAll("%3F", "?");
    } catch (ScriptException ex) {
        Logger.getLogger(TextHelper.class.getName())
            .log(Level.SEVERE, null, ex);
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-16T12:03:53.900

使用 java [`java.net.URLEncoder#encode()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLEncoder.html#encode(java.lang.String,%20java.lang.String))：

```
String page = "space test";
String ecodedURL = "http://localhost:9000/" + URLEncoder.encode(page, "UTF-8"); 
```

注意：编码完整的 URL 会导致不希望的情况，例如`http://`编码为`http%3A%2F%2F`!

**编辑**：为了防止对 URL 进行两次编码，您可以检查 URL 是否包含 a`%`因为它仅对编码有效。但是，如果用户错误地弄乱了编码（例如，仅对 URL 进行部分编码或`%`在 URL 中使用 a 而未将其用于编码某些内容），那么使用此方法就没什么可做的了……

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-03T15:53:11.647

最后，我检查了 Firefox 和 Chrome 的功能。我在两个浏览器中都使用了以下 URL，并使用 netcat ( `nc -l -p 9000`) 捕获 HTTP 请求：

```
http://localhost:9000/!"$%&'()*+,-./:;<=>?@[\]^_`{|}~ 
```

此 URL 包含从 ASCII 32 到 127 的每个字符，除了`[0-9A-Za-z#]`.

使用 Firefox 18.0.1 捕获的请求如下：

```
GET /!%22$%&%27()*+,-./:;%3C=%3E?@[\]^_%60{|}~%7F HTTP/1.1 
```

使用铬：

```
GET /!%22$%&'()*+,-./:;%3C=%3E?@[\]^_`{|}~%7F HTTP/1.1 
```

Firefox 编码的字符比 Chrome 多。这是在一个表中：

```
Char | Hex    | Dec     | Encoded by
-----------------------------------------
"    | %22    | 34      | Firefox, Chrome
'    | %27    | 39      | Firefox
<    | %3C    | 60      | Firefox, Chrome
>    | %3E    | 62      | Firefox, Chrome
`    | %60    | 96      | Firefox
     | %7F    | 127     | Firefox, Chrome 
```

我在他们的源代码树中发现了一些类似的代码，但我不太确定这些是否是实际使用的算法：

*   铬：[http ://src.chromium.org/viewvc/chrome/trunk/src/net/base/escape.cc?revision=HEAD&view=markup](http://src.chromium.org/viewvc/chrome/trunk/src/net/base/escape.cc?revision=HEAD&view=markup)
*   火狐：`toolkit/components/url-classifier/nsUrlClassifierUtils.cpp`

无论如何，这是 Java 中的概念验证代码：

```
// does not handle "#"
public static String encode(final String input) {
    final StringBuilder result = new StringBuilder();
    for (final char c: input.toCharArray()) {
        if (shouldEncode(c)) {
            result.append(encodeChar(c));
        } else {
            result.append(c);
        }
    }
    return result.toString();
}

private static String encodeChar(final char c) {
    if (c == ' ') {
        return "%20"; // URLEncode.encode returns "+"
    }
    try {
        return URLEncoder.encode(String.valueOf(c), "UTF-8");
    } catch (final UnsupportedEncodingException e) {
        throw new IllegalStateException(e);
    }
}

private static boolean shouldEncode(final char c) {
    if (c <= 32 || c >= 127) {
        return true;
    }
    if (c == '"' || c == '<' || c == '>') {
        return true;
    }
    return false;
} 
```

由于它使用`URLEncoder.encode`，它处理`ÁÉÍ`字符以及 ASCII 字符。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-25T03:00:20.907

这是一个 Scala 代码片段。此编码器将对 URL 中的非 ascii 字符和保留字符进行编码。此外，由于操作是幂等的，因此 URL 不会被双重编码。

```
import java.net.URL
import scala.util.parsing.combinator.RegexParsers

object IdempotentURLEncoder extends RegexParsers {
  override def skipWhitespace = false
  private def segment = rep(char)
  private def char = unreserved | escape | any ^^ { java.net.URLEncoder.encode(_, "UTF-8") }
  private def unreserved = """[A-Za-z0-9._~!$&'()*+,;=:@-]""".r
  private def escape = """%[A-Fa-f0-9]{2}""".r
  private def any = """.""".r
  private def encodeSegment(input: String): String = parseAll(segment, input).get.mkString
  private def encodeSearch(input: String): String = encodeSegment(input)
  def encode(url: String): String = {
    val u = new URL(url)
    val path = u.getPath.split("/").map(encodeSegment).mkString("/")
    val query = u.getQuery match {
      case null      => ""
      case q: String => "?" + encodeSearch(q)
    }
    val hash = u.getRef match {
      case null      => ""
      case h: String => "#" + encodeSegment(h)
    }
    s"${u.getProtocol}://${u.getAuthority}$path$query$hash"
  }
} 
```

## 示例用法（测试代码）

```
import org.scalatest.{ FunSuite, Matchers }

class IdempotentURLEncoderSpec extends FunSuite with Matchers {
  import IdempotentURLEncoder._

  test("Idempotent operation") {
    val url = "http://ja.wikipedia.org/wiki/文字"
    assert(encode(url) == encode(encode(url)))
    assert(encode(url) == encode(encode(encode(url))))
  }

  test("Segment encoding") {
    encode("http://ja.wikipedia.org/wiki/文字")
      .shouldBe("http://ja.wikipedia.org/wiki/%E6%96%87%E5%AD%97")
  }

  test("Query string encoding") {
    encode("http://qiita.com/search?utf8=✓&amp;sort=rel&q=開発&sort=rel")
      .shouldBe("http://qiita.com/search?utf8=%E2%9C%93&sort=rel&q=%E9%96%8B%E7%99%BA&sort=rel")
  }

  test("Hash encoding") {
    encode("https://www.google.co.jp/#q=文字")
      .shouldBe("https://www.google.co.jp/#q=文字")
  }

  test("Partial encoding") {
    encode("http://en.wiktionary.org/wiki/français")
      .shouldBe("http://en.wiktionary.org/wiki/fran%C3%A7ais")
  }

  test("Space is encoded as +") {
    encode("http://example.com/foo bar buz")
      .shouldBe("http://example.com/foo+bar+buz")
  }

  test("Multibyte domain names are not supported yet :(") {
    encode("http://日本語.jp")
      .shouldBe("http://日本語.jp")
  }
} 
```

此代码来自[Qiita](http://qiita.com/suin/items/ac968464f684d92b8093)。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-16T12:03:28.580

标准的 Java api 会自己进行 URL 编码和解码。

[java.net.URI](http://docs.oracle.com/javase/6/docs/api/java/net/URI.html)

尝试课程`URLDecoder`和`URLEncoder`

对文本进行编码以安全通过互联网：

```
import java.net.*;
...
try {
    encodedValue= URLEncoder.encode(rawValue, "UTF-8");
} catch (UnsupportedEncodingException uee) { } 
```

并解码：

```
try {
    decodedValue = URLDecoder.decode(rawValue, "UTF-8");
} catch (UnsupportedEncodingException uee) { } 
```

# java - 有没有办法在不重新启动的情况下清除 weblogic 服务器中的实体缓存？[用于调试]

> ID：14357976
> 
> 赞同：4
> 
> 时间：2013-01-16T12:00:16.310
> 
> 标签：java, debugging, jpa, ejb, weblogic

我正在调查在 Weblogic 10.3.4 服务器上运行的应用程序中的错误。对于这个调查，有时我需要直接清除数据库中的一些表（使用 SQL Navigator）。但是这些更改不会立即反映在 weblogic 服务器中，除非我重新启动它。每次修改数据库中的数据时重新启动它是一项耗时的任务。

我想知道是否有一种简单快捷的方法来清除 weblogic 服务器中的数据库缓存并强制它重新加载修改后的数据。我想如果我添加一个调用与每个实体相关的 flush 方法的 ejb，并且如果我调用该方法，它将执行此任务。但是您有任何建议或任何其他方式来完成此任务，可能是通过更改 weblogic 服务器设置？我们可以做任何一种方法调用来强制刷新当前容器中的所有实体吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T14:52:21.150

JPA 2.0 有一个缓存 API，允许您清除缓存 (evictAll)。

EclipseLink 在 JPA 2.0 之前也有自己的 API。

见， [http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Caching/Cache_API](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Caching/Cache_API)

# php - 自定义 AJAX 服务器

> ID：14357982
> 
> 赞同：2
> 
> 时间：2013-01-16T12:00:32.157
> 
> 标签：php, javascript, c, ajax, webserver

我一直在考虑使用 kqueue 编写自己的服务器。只要我可以控制什么样的客户将访问我们的系统，我就可以毫无问题地做到这一点。然而，实际上，我需要接受标准 Web 客户端，包括 AJAX。我一直在寻找使用 XMLHTTPRequest 连接到用 C 编写的自定义服务器的程序示例。我什么也没找到。

你能帮助我吗？

布鲁斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T12:01:58.583

Ajax 只是意味着“使用 JavaScript 发出 HTTP 请求”。它不是客户。

就服务器而言，Ajax 请求与任何其他 HTTP 请求之间没有区别。

（一些库添加了一个实验性的 HTTP 标头来说明请求是由 Ajax 触发的，但是当您在服务器上关心它时，它几乎总是在应用程序级别而不是服务器级别（即您的服务器端脚本而不是您的 HTTPD ））。

# html - 在没有 php 或数据库的网络服务器上保存数据

> ID：14357983
> 
> 赞同：0
> 
> 时间：2013-01-16T12:00:32.747
> 
> 标签：html, database, mobile, webserver

我有一个不支持 php 或任何数据库的旧 ftp。只是html。有没有办法从桌面或移动应用程序中保存数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:06:09.650

是的，您的应用程序（只要它不是客户端 JavaScript）可以使用 FTP 来操作服务器上的文件。

# java - 每次出现第二个字段的 Java 增量日期

> ID：14357994
> 
> 赞同：-1
> 
> 时间：2013-01-16T12:01:21.050
> 
> 标签：java, jakarta-ee

我们编写了一个 Java 代码来将输入时间增加 30 分钟。但这是将输入时间增加一次并应用相同的值。该程序有两个输入，一个是初始日期，第二个是记录数。如果我们有 20 条记录。代码应填充 20 个时间间隔，从数组中的开始时间开始增加 30 分钟

```
DateFormat formatter = new SimpleDateFormat("yyyy-MM-dd-HH.mm.ss");

Date date = new Date  () ;

try
{
     date = ( Date )formatter.parse(var1);
}

catch ( ParseException  e){}

Calendar clndr = Calendar.getInstance();

clndr.setTime(date);

clndr.add(clndr.MINUTE, 30);

date = clndr.getTime();

String strDate = formatter.format(date);

return strDate; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:06:57.753

Pass your second input field in method and multiply it by "30"

so in place of 30 you should get "30*secondfield" input

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:11:57.973

如果我理解正确，你想要的是：

```
public static void main(String[] args) {

    String initial = "2013-01-16-10.06.02";

    String after30 = increment(initial);
    System.out.println(after30);

    after30 = increment(after30);
    System.out.println(after30);

    after30 = increment(after30);
    System.out.println(after30);

}

public static String increment(String var1) {
    DateFormat formatter = new SimpleDateFormat("yyyy-MM-dd-HH.mm.ss");

    Date date = new Date();

    try

    {

        date = (Date) formatter.parse(var1);

    }

    catch (ParseException e) {}

    Calendar clndr = Calendar.getInstance();

    clndr.setTime(date);

    clndr.add(clndr.MINUTE, 30);

    date = clndr.getTime();

    String strDate = formatter.format(date);

    return strDate;
} 
```

请注意，您必须使用方法的返回作为后续调用的输入。

及时，我不会像你所说的那样使用 try-catch 。我会在方法中添加一个 throws 子句...

[]s