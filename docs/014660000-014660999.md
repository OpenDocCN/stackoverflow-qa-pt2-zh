# StackOverflow 问答 14660000-14660999

# javascript - javascript删除cookie在浏览器中的工作很奇怪

> ID：14660014
> 
> 赞同：0
> 
> 时间：2013-02-02T08:18:50.353
> 
> 标签：javascript, cookies

我正在尝试对 javascript cookie 进行演示测试。请在下面找到我为测试编写的代码。

```
<html>
<head>
<script type='text/javascript' >

function setcookie()
{   
    alert("check if cookie avail:" +document.cookie.split(';'));
    var dt=new Date();

    document.cookie='name=test';
    document.cookie='expires='+dt.toUTCString()+';'
    alert("now cookie val:" +document.cookie.split(';'));

    dt.setDate(dt.getDate()-1);
    document.cookie = "expires=" + dt.toUTCString() + ";"
    alert("after deletion cookie val:" + document.cookie.split(';'));
 }
</script>

</head>
<body>
    <input id='txt' onchange='setcookie()' />
</body>
</html> 
```

该代码将作为，

最初，这将显示该浏览器中已经存在的 cookie，然后我尝试将 cookie 设置为具有 1 天过期时间的“name=test”。使用警报我可以看到该 cookie 中设置的值。在下一行中，我尝试通过将过期日期设置为当前 date-1 来删除 cookie。如果我使用 alert 打印 cookie 值，cookie 将显示为 currentdate-1 的过期日期。

我的问题是，

1.  在 Mozilla 中，如果我刷新浏览器并尝试执行相同的步骤，则第一个警报会显示 cookie 值，其过期时间为 currentdate-1。为什么即使我在脚本的最后一行删除，我也会获得 cookie 值。但是，一旦我关闭浏览器，cookie 值为空。为什么会这样？
2.  在 chrome 中，如果我运行相同的代码，则不会设置任何 cookie。为什么我无法在 chrome 浏览器中设置 cookie。

请告诉我为什么跨浏览器会出现这种差异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T08:28:49.143

这不是设置到期

```
document.cookie='name=test';
document.cookie='expires='+dt.toUTCString()+';' 
```

这是

```
document.cookie='name=test; expires='+dt.toUTCString()+';' 
```

最好的办法是采用经过良好测试的 cookie 代码并使用它

如果你使用 jQuery，试试这个或者使用 jQuery 插件

```
// cookie.js file
var daysToKeep = 14; // default cookie life...
var today      = new Date(); 
var expiryDate = new Date(today.getTime() + (daysToKeep * 86400000));

/* Cookie functions originally by Bill Dortsch */
function setCookie (name,value,expires,path,theDomain,secure) { 
   value = escape(value);
   var theCookie = name + "=" + value + 
   ((expires)    ? "; expires=" + expires.toGMTString() : "") + 
   ((path)       ? "; path="    + path   : "") + 
   ((theDomain)  ? "; domain="  + theDomain : "") + 
   ((secure)     ? "; secure"            : ""); 
   document.cookie = theCookie;
} 

function getCookie(Name) { 
   var search = Name + "=" 
   if (document.cookie.length > 0) { // if there are any cookies 
      var offset = document.cookie.indexOf(search) 
      if (offset != -1) { // if cookie exists 
         offset += search.length 
         // set index of beginning of value 
         var end = document.cookie.indexOf(";", offset) 
         // set index of end of cookie value 
         if (end == -1) end = document.cookie.length 
         return unescape(document.cookie.substring(offset, end)) 
      } 
   } 
} 
function delCookie(name,path,domain) {
   if (getCookie(name)) document.cookie = name + "=" +
      ((path)   ? ";path="   + path   : "") +
      ((domain) ? ";domain=" + domain : "") +
      ";expires=Thu, 01-Jan-70 00:00:01 GMT";
} 
```

# python - 尝试从 Mac OS X 连接到 Vertica 时连接字符串无效

> ID：14660015
> 
> 赞同：1
> 
> 时间：2013-02-02T08:18:50.360
> 
> 标签：python, macos, odbc, unixodbc, vertica

我想在运行 Mac OS X 的本地机器上使用 Python 进行开发，并连接到我网络中的 Vertica 数据库。

我下载了 Vertica Mac 驱动程序并按照说明进行设置。使用 iODBC 进行测试时，我得到：

```
$ iodbctest
iODBC Demonstration program
This program shows an interactive SQL processor
Driver Manager: 03.52.0607.1008

Enter ODBC connect string (? shows list): ?

DSN                              | Driver                                  
------------------------------------------------------------------------------
VerticaDSN                       | Vertica                                 

Enter ODBC connect string (? shows list): VerticaDSN
1: SQLDriverConnect = [DSI] The error message InvalidConnStr could not be found in the       en-US locale. Check that /en-US/ODBCMessages.xml exists. (-1) SQLSTATE=HY000 
```

使用 unixODBC 进行测试时，出现不同的错误：

```
 $ isql -v VerticaDSN user pw 
[S1000][unixODBC][DSI] The error message NoSQLGetPrivateProfileString could not be found in the en-US locale. Check that /en-US/ODBCMessages.xml exists.
[ISQL]ERROR: Could not SQLConnect 
```

后者应该是由于缺少 vertica.ini 造成的，但我确实添加了 vertica.ini 并将其目录导出到 VERTICAINI 环境变量。这是我的 vertica.ini 的样子：

```
[Driver]
DriverManagerEncoding=UTF-32
ODBCInstLib=/usr/lib/libiodbc.2.dylib
ErrorMessagesPath=/Users/rmedri/Library/ODBC/vertica/lib64
LogLevel=4
LogPath=/Users/rmedri 
```

这是我的 odbc.ini（在 ~/Library/ODBC/ 中）：

```
[ODBC Data Sources]
VerticaDSN = Vertica    
[VerticaDSN]
Driver = /Users/rmedri/Library/ODBC/vertica/lib64/libverticaodbc.dylib
Database = vbit
Servername = vertica-prod.<xxxx>.<xxxx>.com
UID = user
PWD = pw
Port = 5433 
```

我已经花了几个小时在这上面，我很茫然。感谢您提供任何指导，包括从 Mac OS X 上运行的 Python 连接到 Vertica 的替代方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:06:50.690

我知道这对我们来说有点反复试验，但我们最终需要：

```
DriverManagerEncoding=UTF-16 
```

而不是 vertica.ini 中的 UTF-32。

# python - 使用另一个列表中项目的索引位置对元组列表进行排序

> ID：14660016
> 
> 赞同：0
> 
> 时间：2013-02-02T08:18:51.510
> 
> 标签：python, list, sorting, python-2.7, tuples

我有一个基本清单。

```
li = ['fca', 'fc_add', 'fca_2', 'fcadd_2', 'Red_Exis', 'G_Exis', 'P_Exis',
      'fam_1'] 
```

并希望使用列表中项目的索引位置对以下元组列表进行排序。

```
tup= [('G_Exis','abc'), ('fca','210Y'), ('Red_Exis', 107),
      ('fc_add','999 Des ST.')] 
```

我需要最终的排序列表如下所示：

```
fin_tup = [('fca','210Y'), ('fc_add','999 Des ST.'), ('Red_Exis', 107), 
           ('G_Exis','abc')] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T08:39:34.163

```
index_dict = {item: index for index, item in enumerate(li)}
tup.sort(key=lambda t: index_dict[t[0]])
print(tup) 
```

### 输出

```
[('fca', '210Y'), ('fc_add', '999 Des ST.'), ('Red_Exis', 107),
 ('G_Exis', 'abc')] 
```

或不排序：

```
index_dict = {item: index for index, item in enumerate(li)}

fin_tup = [None]*len(li)
for t in tup:
    fin_tup[index_dict[t[0]]] = t
fin_tup = [t for t in fin_tup if t is not None] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T08:28:35.780

一种简单的方法是不实际对其进行排序，而是使用要排序的键的索引将其存储在字典中作为字典键：

```
>>> d ={}
>>> for i in tup : d[li.index(i[0])] = i
>>> list(d.values())
[('fca', '210Y'), ('fc_add', '999 Des ST.'), ('Red_Exis', 107), ('G_Exis', 'abc')] 
```

*这是简单的方法，而不是有效的方法。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-23T13:49:08.373

使用 sort() 的关键参数。排序的值就是 li 中的索引，所以从每个值中取出第一项，找到 li 中的索引。完毕。

```
tup.sort(key=lambda item_in_li, trash: li.index(item_in_li)) 
```

# java - 设置 Arraylist 的 Arraylist 的值

> ID：14660018
> 
> 赞同：2
> 
> 时间：2013-02-02T08:19:41.373
> 
> 标签：java, android, arraylist

您好，我想填写我的 Arraylist 的 Arraylist，`QuestionIdList_Section`
命名`QUESTION_ID_Of_SectionId_Temp`为`QuestionIdList_Section`

我的代码如下，以便您了解我的编码方式：

```
public static ArrayList<String> QUESTION_ID_Of_SectionId_Temp = new ArrayList<String>();
public static ArrayList<ArrayList<String>> QuestionIdList_Section = new ArrayList<ArrayList<String>>();

QUESTION_ID_Of_SectionId_Temp.add("Hello");
QUESTION_ID_Of_SectionId_Temp.add("Hiii");

QuestionIdList_Section.add(0,QUESTION_ID_Of_SectionId_Temp);

Log.i(TAG, "******Before " + QuestionIdList_Section);
Log.i(TAG, "******Before "+ QUESTION_ID_Of_SectionId_Temp);

QUESTION_ID_Of_SectionId_Temp.clear();

Log.i(TAG, "******After  " + QuestionIdList_Section);
Log.i(TAG, "******After " + QUESTION_ID_Of_SectionId_Temp); 
```

执行代码后，我得到两个变量的不同结果。

如下 ：

```
******Before [[Hello, Hiiii]]
******Before [Hello, Hiiii]
******After [[]]
******After [] 
```

有人可以帮助我了解我在这里缺少的地方。我想清除临时数组列表，以便我可以放置不同的值，`UESTION_ID_Of_SectionId_Temp`因此我的第二个索引`QuestionIdList_Section`将设置不同的值。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T08:23:22.630

`QUESTION_ID_Of_SectionId_Temp`只是一个参考。

因此，如果您清除它，那么 in 的值`QuestionIdList_Section`也将被清除。

你应该做的是

`QUESTION_ID_Of_SectionId_Temp = new ArrayList<String>();`

代替

`QUESTION_ID_Of_SectionId_Temp.clear();`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T08:24:39.137

`ArrayList`关联的 with持有`QuestionIdList_Section`关联的with的*引用*。 因此，在清除临时 ArrayList 时，也会反映在.`ArrayList``QUESTION_ID_Of_SectionId_Temp`
`QuestionIdList_Section`

您可能想要创建一个临时数组的*新实例*并将其添加到主数组列表中，如下所示：

```
QUESTION_ID_Of_SectionId_Temp = new ArrayList<String>();
QuestionIdList_Section.add(QUESTION_ID_Of_SectionId_Temp); 
```

这样做之后，您添加的每个元素都`QUESTION_ID_Of_SectionId_Temp`将显示在`QuestionIdList_Section`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T08:24:17.640

您正在清除`QUESTION_ID_Of_SectionId_Temp`数组，这意味着它没有元素。第二个“After”打印显示为空。

第一个“之后”显示的内容`QuestionIdList_Section`仍然包含`ArrayList`上面的内容，现在是空的。

# ios - 如何获取所选 collectionviewcell 的名称？

> ID：14660020
> 
> 赞同：5
> 
> 时间：2013-02-02T08:19:48.273
> 
> 标签：ios, objective-c, selection, gesture-recognition, uicollectionviewcell

这是一个简单的问题，我认为答案很容易找到，但没有。我想在集合视图中选择一个单元格。主要问题是我无法将手势识别器附加到原型单元。我想从被触摸的单元格上的标签中获取文本。在我看来，我在不同的函数中使用了这个名称。

或者一个更简单的问题：是否有关于从项目列表中点击选择的教程？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T09:45:45.453

您`collectionView:didSelectItemAtIndexPath:`在委托中有方法。当您收集单元格并为您提供该特定单元格的正确 indexPath 时，这应该会触发。

将此 indexPath 与 collectionView 结合使用`cellForItemAtIndexPath:`以访问特定单元格。

例子：

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath {
    [self manipulateCellAtIndexPath:indexPath];
}

-(void) manipulateCellAtIndexPath:(NSIndexPath*)indexPath {
    UICollectionViewCell *cell = [self.collectionView cellForItemAtIndexPath:indexPath];
    // Now do what you want...
} 
```

而且，只要我在这里。斯威夫特版本：

```
override func collectionView(collectionView: UICollectionView, didDeselectItemAtIndexPath indexPath: NSIndexPath) {
    manipulateCellAtIndexPath(indexPath)
}

func manipulateCellAtIndexPath(indexPath: NSIndexPath) {
    if let cell = collectionView?.cellForItemAtIndexPath(indexPath) {
        // manipulate cell
    }
} 
```

# ruby-on-rails - Mongoid 嵌入文档无法将字符串转换为整数错误

> ID：14660023
> 
> 赞同：1
> 
> 时间：2013-02-02T08:20:28.790
> 
> 标签：ruby-on-rails, mongoid, mongoid3, mongohq

我有这个文档叫它博客，帖子，带有 embeds_many :posts，它本身就是 embeds_many :comments。当我尝试保存一些博客时，它给了我错误“无法将字符串转换为整数”。经过调查，我发现嵌入的帖子文档包含空数据，所有字段为零，并且这些帖子对象会给出相同的错误“无法将字符串转换为整数”错误。

为什么它是 nil 可能来自我的代码，但问题是我无法保存、更新或销毁这篇文章或对评论做任何事情，所以我被卡住了。我必须手动登录到 mongodb 控制台并删除这些对象。

知道为什么会发生这种情况以及如何处理吗？

如果有任何关系，我正在使用 MongoHQ。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-19T17:03:31.113

我面临着类似的问题。它根本不关心 mongoDB 服务。

澄清

```
class A
  include Mongoid::Document
  embeds_many :bs, class_name: 'B'
end

class B
  include Mongoid::Document
  embedded_in :a, class_name: 'A'
  embeds_many :cs, class_name: 'C'
end

class C
  include Mongoid::Document
  embedded_in :b, class_name: 'B'
end 
```

就我而言，如果我将 B 与 C 的关系注释掉，它会完美运行但是我很快将 B 和 C 连接起来，我得到以下堆栈跟踪：

`TypeError - can't convert String into Integer: () Users/my_user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/mongoid-018e40e11a31/lib/mongoid/relations/proxy.rb:149:in `[]' () Users/my_user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/mongoid-018e40e11a31/lib/mongoid/relations/proxy.rb:149:in `method_missing' () Users/my_user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/mongoid-018e40e11a31/lib/mongoid/relations/embedded/many.rb:402:in `method_missing' () Users/my_user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/mongoid-018e40e11a31/lib/mongoid/fields.rb:75:in `apply_default' () Users/my_user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/mongoid-018e40e11a31/lib/mongoid/fields.rb:47:in `block in apply_pre_processed_defaults' () Users/my_user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/mongoid-018e40e11a31/lib/mongoid/fields.rb:46:in `each' () Users/my_user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/mongoid-018e40e11a31/lib/mongoid/fields.rb:46:in `apply_pre_processed_defaults' () Users/my_user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/mongoid-018e40e11a31/lib/mongoid/document.rb:110:in `block in initialize' () Users/my_user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/mongoid-018e40e11a31/lib/mongoid/threaded/lifecycle.rb:84:in `_building' () Users/my_user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/mongoid-018e40e11a31/lib/mongoid/document.rb:106:in `initialize'`

我将尝试通过#reflect_on_association 检查关系，看看 mongoid 是否会迷路

**---- 编辑 && 自己的解决方案 ----**

使用调试器探索堆栈跟踪，它在某些时候接缝 mongoid 调用 _id 方法并且找不到任何适当的方法响应它。

我的直觉是在关系解析期间有什么东西破坏了模型初始化。

所以你必须三重检查关系定义。

就我而言，解决方案是魔法。

```
embeds_many :fields
#that I replaced by
embeds_many :resource_fields 
```

它不能与我上面显示的 class_name 定义一起正常工作。为什么 ？因为我**猜**fields 是初始化期间使用的一种 mongoid 方法。

希望对您有所帮助。

# api - 使用 sendgrid api salesforce 在邮件中附加文件..？

> ID：14660025
> 
> 赞同：1
> 
> 时间：2013-02-02T08:20:34.080
> 
> 标签：api, salesforce, send, sendgrid

我在使用 sendgrid API 将文件附加到邮件时遇到问题。我成功发送邮件。

如何使用附件 API？如何使用表单数据内容沉积？

```
 string url,burl;
                 burl='https://sendgrid.com/api/mail.send.json';              //?api_user='+apiuser+'&api_key='+apikey;
url='api_user='+encodingutil.urlEncode(apiuser,'UTF-8')+'&api_key='+encodingutil.urlEncode(apikey,'UTF-8');

                if(mails.toname!=null && mails.toname!='')
                {
                url+='&toname='+encodingutil.urlEncode(mails.toname,'UTF-8');
                }

                if(mails.subject!=null && mails.subject!='')
                {
                url+='&subject='+encodingutil.urlEncode(mails.subject,'UTF-8');
                }
                if(mails.text!=null && mails.text!='')
                {
                url+='&text='+encodingutil.urlEncode(mails.text,'UTF-8');
                }  

                //url+='&html='+mails.html;  

              ****Content-Disposition: form-data; name="files[myfile]"; filename="myfile"****

                http h=new http();
                Httprequest req=new Httprequest();
                Httpresponse res=new Httpresponse();
                req.setEndpoint(burl);
                req.setBody(url);
                req.setMethod('GET');  
                res=h.send(req);
                    response=res.getBody();
                    if(response.contains('success'))
                    {
                        response='{"message":"success"}';
                    }
                    else
                    {
                        response='Error: '+res.getBody();
                    } 
```

# java - 执行servlet后如何控制浏览器地址栏中生成的地址？

> ID：14660026
> 
> 赞同：0
> 
> 时间：2013-02-02T08:20:37.353
> 
> 标签：java, servlets

为了练习，我编写了一个简单的网页，它将向用户显示一个下拉菜单。用户将选择一个数字并点击`Submit`按钮。

之后，servlet 将被执行并返回一个偶数列表。

![在此处输入图像描述](../Images/60126a48c8b8593e17a6e206404ec402.png)

查看网页浏览器地址栏中的地址，是：

`http://localhost:8080/FindEvenOdd/FindEvenOdd`

我希望它是**`http://localhost:8080/FindEvenOdd/Result`**

我怎么做 ？
我的 DD 看起来像这样：

```
<web-app xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee
    web-app_2_4.xsd"
    version="2.4">

    <servlet>
        <servlet-name>Evens</servlet-name>
        <servlet-class>FindIt</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>Evens</servlet-name>
        <url-pattern>/FindEvenOdd</url-pattern>
    </servlet-mapping>
</web-app> 
```

我的 HTML：

```
<html>
    <head>
        <title> List of Even/Odd Numbers </title>
    </head>

    <body>
        <form method="POST" action="FindEvenOdd">
        <center>
            <select name="number" size="1">
                <option> <50
                <option> <100
                <option> <150
            </select>
        </center>
            <center>
                <input type="SUBMIT">
            </center>
        </form>
    </body>
</html> 
```

## 我试过的

*   我改变`action="FindEvenOdd"`了`action="Result"`*   我将`<url-pattern>`结果更改为
我同时做了上述两件事，但得到了 404。
那么，
我该怎么做才能得到**`http://localhost:8080/FindEvenOdd/Result`**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T12:07:42.927

将 url 模式更改为`/FindEvenOdd/Result`并尝试

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T08:28:59.783

您尝试的几乎是正确的。`url-pattern`必须设置`/Result`为。

一些注意事项：

*   总是把你的课程放在一个包里。不在默认包中
*   生成有效的 HTML5。`center`是一个不应该长时间使用的标签，并且您的选择框是无效的 HTML。
*   学习 servlet 3.0 而不是 servlet 2.4。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T08:38:59.973

为了更改 URL，您需要在 servlet 中进行重定向。

```
String contextPath = request.getContextPath();
response.sendRedirect(response.encodeRedirectURL(contextPath + "/Result") ); 
```

# php - Zendserver 配置

> ID：14660030
> 
> 赞同：0
> 
> 时间：2013-02-02T08:21:33.313
> 
> 标签：php, zend-framework

每当我使用命令创建新的 zf 项目时，是否需要手动更新我的主机文件和 apache httpd.conf 文件。

例如：如果我的新项目是 zendi。

**在主机文件中：**

```
127.0.0.1   localhost   zendi 
```

**在 httpd.conf 中：**

```
NameVirtualHost 127.0.0.1

<VirtualHost 127.0.0.1>
    DocumentRoot "C:\wamp\www"
    ServerName localhost
</VirtualHost>

<VirtualHost 127.0.0.1>
    DocumentRoot "C:\wamp\www\zendi\public"
    ServerName zendi
    ErrorLog "C:\wamp\logs\apache_error.log"
    <Directory "C:\wamp\www\zendi\public" >
        Options Indexes FollowSymLinks
        AllowOverride all
        Order deny,allow
        Allow from all
    </Directory>  
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:33:14.157

如果您需要为新创建的 zf 应用程序使用虚拟主机，那么答案是肯定的，您需要手动配置它 命令行项目创建不会为您配置它。但是，如果您不需要为您创建的每个应用程序都有虚拟服务器，那么您可以跳过该过程并使用直接 url：

> 本地主机/zendi/公共

（但通常认为为您将要工作一段时间的项目配置虚拟主机是一种很好的做法）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T09:13:25.920

如果您使用的是 PHP 5.4，那么您可以使用内置的 Web 服务器，甚至不需要 Apache。

[http://php.net/manual/en/features.commandline.webserver.php](http://php.net/manual/en/features.commandline.webserver.php)

# synchronization - JNI 共享库不是线程安全的

> ID：14660033
> 
> 赞同：1
> 
> 时间：2013-02-02T08:21:51.480
> 
> 标签：synchronization, java-native-interface, native-code

我有一个本机库，我想在我的 Java 应用程序中使用它。多个线程将使用该库，并且多个 Java 进程也将使用同一个库。该库是用 C 编写的，我目前正在 Windows 上使用 MinGW 进行编译。我应该使用什么同步机制来同步非线程安全的本机库？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T03:48:32.133

最简单的方法是制作所有的 Java 本地方法`static synchronized`。

# c - Buildroot : 哪个 gcc 用于交叉编译？

> ID：14660034
> 
> 赞同：1
> 
> 时间：2013-02-02T08:21:58.350
> 
> 标签：c, linux, gcc, arm, buildroot

我是buildroot的新手。我可以在 buildroot 中看到多个 gcc。我假设所有这些都是为了交叉编译。那些有什么区别？

```
buildroot-2012.05/output/host/usr/bin/arm-unknown-linux-uclibcgnueabi-gcc
buildroot-2012.05/output/host/usr/libexec/gcc
buildroot-2012.05/output/host/usr/arm-linux/bin/gcc
buildroot-2012.05/output/host/usr/arm-unknown-linux-uclibcgnueabi/bin/gcc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T18:57:00.853

您应该使用的是`buildroot-2012.05/output/host/usr/bin/arm-unknown-linux-uclibcgnueabi-gcc`. 其他的是纯粹的内部二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-22T18:56:34.103

使用 arm-linux-gcc 或 arm-buildroot-linux-uclibcgnueabihf-gcc。实际上 arm-linux-gcc 是软链接到 arm-buildroot-linux-uclibcgnueabihf-gcc 的。

# android - Eclipse 无法识别我的安卓手机

> ID：14660035
> 
> 赞同：2
> 
> 时间：2013-02-02T08:21:58.813
> 
> 标签：android

我在 Windows 上使用 eclipse 我想在我的三星 android 手机上运行应用程序，但 eclipse 无法识别我的设备 请有人帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T08:23:39.550

浏览此链接，您将找到答案[http://developer.android.com/tools/device.html](http://developer.android.com/tools/device.html)

本页介绍如何设置您的开发环境和 Android 驱动的设备，以便在设备上进行测试和调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T08:23:37.357

确保安装 Google USB 驱动程序和 Windows 识别手机可能需要的其他驱动程序。

从这里开始：http: [//developer.android.com/sdk/win-usb.html](http://developer.android.com/sdk/win-usb.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T08:51:39.933

您应该为 Windows 使用正确的驱动程序，并尝试安装 samsung kies。 [http://www.samsung.com/in/support/usefulsoftware/KIES/JSP](http://www.samsung.com/in/support/usefulsoftware/KIES/JSP)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T09:02:06.450

试试这种方式，这对我有用。

在您的三星设备中。

去`Setting->Applications->Development->`

要自动下载三星设备的驱动程序软件 (Eclipse)，您应该连接到 windows pc & `not check USB debugging option`.

下载完所有驱动程序后，所有三星设备都将与 eclipse 连接，并且您应该调试任何应用程序`check USB debugging option`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-26T04:36:57.257

同样的问题，Windows 无法在设备管理器中更新我的 Android 手机的驱动程序软件。

终于找到了这个网站[http://www.driverscape.com/download/android-adapter-adb-interface](http://www.driverscape.com/download/android-adapter-adb-interface)，里面有各种Windows操作系统的软件。

这次 Eclipse 识别了我的设备。

# sql-server - 是否可以使用解释计划或 SQL 跟踪找出记录不存在于哪个表中

> ID：14660036
> 
> 赞同：0
> 
> 时间：2013-02-02T08:21:59.410
> 
> 标签：sql-server, db2, sql-execution-plan

我有一个包含多个表组合的查询。例如：查询包含 7 个或 8 个表。我的查询没有获取任何记录。

是否可以使用Db2中的**解释计划或 SQL 跟踪**找出记录不存在于哪个表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T11:39:08.350

在 SQL Server 中，实际的执行计划包含实际的行数。请参阅[显示图形执行计划](http://msdn.microsoft.com/en-us/library/ms178071%28v=sql.105%29.aspx)。此外，运算符之间的箭头包含两个相关运算符交换的行数。知识渊博的专家可以正确解释执行计划中的信息，以了解哪些连接正在抑制输出。

对于非专家用户来说，只需查看各个表并找出连接有 0 行的原因通常要容易得多。

# django - Django Forms：将参数传递给表单

> ID：14660037
> 
> 赞同：46
> 
> 时间：2013-02-02T08:22:10.843
> 
> 标签：django, django-forms

如何将参数传递给我的表单？

```
someView()..
    form = StylesForm(data_dict) # I also want to pass in site_id here.

class StylesForm(forms.Form):
    # I want access to site_id here 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-02-02T08:24:45.010

您应该定义表单的 __init__ 方法，如下所示：

```
class StylesForm(forms.Form):
    def __init__(self,*args,**kwargs):
        self.site_id = kwargs.pop('site_id')
        super(StylesForm,self).__init__(*args,**kwargs) 
```

当然，在创建对象之前您无法访问 self.site_id ，因此该行：

```
 height = forms.CharField(widget=forms.TextInput(attrs={'size':site_id})) 
```

没有意义。创建表单后，您必须将属性添加到小部件。尝试这样的事情：

```
class StylesForm(forms.Form):
    def __init__(self,*args,**kwargs):
        self.site_id = kwargs.pop('site_id')
        super(StylesForm,self).__init__(*args,**kwargs)
        self.fields['height'].widget = forms.TextInput(attrs={'size':site_id})

    height = forms.CharField() 
```

（未测试）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-10-03T06:40:43.417

这对我有用。我试图制作一个自定义表单。模型中的这个字段是一个字符字段，但我想要一个动态生成的选择字段。

**表格：**

```
class AddRatingForRound(forms.ModelForm):

    def __init__(self, round_list, *args, **kwargs):
        super(AddRatingForRound, self).__init__(*args, **kwargs)
        self.fields['name'] = forms.ChoiceField(choices=tuple([(name, name) for name in round_list]))

    class Meta:
        model = models.RatingSheet
        fields = ('name', ) 
```

**观点：**

```
 interview = Interview.objects.get(pk=interview_pk)
    all_rounds = interview.round_set.order_by('created_at')
    all_round_names = [rnd.name for rnd in all_rounds]
    form = forms.AddRatingForRound(all_round_names)
    return render(request, 'add_rating.html', {'form': form, 'interview': interview, 'rounds': all_rounds}) 
```

**模板：**

```
<form method="post">
    {% csrf_token %}
    {% if interview %}
     {{ interview }}
    {% if rounds %}
        {{ form.as_p }}
        <input type="submit" value="Submit" />
    {% else %}
        <h3>No rounds found</h3>
    {% endif %}
</form> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-09-17T19:50:45.543

```
someView()..
        form = StylesForm( 1, request.POST) 
```

在forms.py中

```
class StylesForm(forms.Form):
     #overwrite __init__
     def __init__(self,site_id,*args,**kwargs):
          # call standard __init__
          super().__init__(*args,**kwargs)
          #extend __init__
          self.fields['height'] =forms.CharField(widget=forms.TextInput(       
                                                     attrs= {'size':site_id}))

     height = forms.CharField() 
```

或者

```
someView()..
            form = StylesForm(site_id = 1) 
```

在forms.py中

```
class StylesForm(forms.Form):
         #overwrite __init__
         def __init__(self,site_id):
              # call standard __init__
              super().__init__()
              #extend __init__
              self.fields['height'] =forms.CharField(widget=forms.TextInput(       
                                                         attrs= {'size':site_id}))

         height = forms.CharField() 
```

# python - redis python，hvals结果作为生成器？

> ID：14660038
> 
> 赞同：1
> 
> 时间：2013-02-02T08:22:17.690
> 
> 标签：python, redis

我使用 Python 和 Redis。

我注意到 redis_client.hvals(KEY) 返回一个 LIST

如果 Redis 中有一个**巨大**的字典，

那么， hvals 会导致**MemoryError** 吗？

我不测试，但我很担心这个。

有没有办法将 hvals 结果作为 Python 生成器？

因此，将避免内存问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T08:27:49.737

您可以这样做，而无需分配返回的列表，让 gc 处理其余的...

```
for item in redis_client.hvals(KEY):
    # process each item 
```

# c# - 如何将数据库中的 blob 插入 RichtEditControl

> ID：14660039
> 
> 赞同：1
> 
> 时间：2013-02-02T08:22:50.237
> 
> 标签：c#, entity-framework, richedit-control

我想将`blob`带有实体框架的数据库中的内容（docx 文件）插入到`RichEditcontrol`.

我使用这段代码：

```
using (this.myent Entities = new ())
{
  this.myent Entities = new ();
  src.DataSource = myent.doc_templates;
  richEditControl1.DataBindings.Add ("Text", src, "doc_temlpate_content");
}
// enter code here 
```

它将是一个丰富的编辑控件内容： `Byte [] array`

什么是好的解决方案？我想我必须使用该`RichEditControl.OpenXmlBytes`属性，但如何？

# javascript - 选择多行文本而不溢出宽度

> ID：14660040
> 
> 赞同：3
> 
> 时间：2013-02-02T08:23:12.357
> 
> 标签：javascript, css

![在此处输入图像描述](../Images/a00ebca1db54e283fd52411d7fc9aaff.png)

当您选择交叉线时，上图显示了黄色区域之外不需要的红色选择。我想在黄色部分内选择，如下所示：

![在此处输入图像描述](../Images/f3afc4ed518cd9f4b66d0775572ce0a8.png)

HTML：

```
<div id="parent">
    <div id="child">
        This is some content... This is a long lonnnnnnng content.
    </div>
</div> 
```

CSS：

```
#parent {
    width: 200px;
    background-color: #666;
}

#child {
    padding: 50px;
    background-color: #ff0;
}

::selection {
    background-color: #f00;
} 
```

你知道如何实现这一目标吗？

在这里运行代码：http: [//jsfiddle.net/3AESf/](http://jsfiddle.net/3AESf/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T08:25:36.110

您可以使用`display: inline-block;`on`#parent`来解决它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T09:06:37.357

如果`display:inline-block`不是一种选择，另一种解决方案是添加

`overflow: hidden;`

到`#parent`. 这也有效。

# c# - 试图在经纬度点周围画一个正方形

> ID：14660041
> 
> 赞同：1
> 
> 时间：2013-02-02T08:23:11.703
> 
> 标签：c#, distance, latitude-longitude

我正在编写一个 C# 脚本来做一些映射。我有一个正在处理的函数，我得到了一个纬度和经度、一个距离和一个旋转角度。

然后我想创建一个矩形，它具有传入的距离的宽度（长度取决于其他内容），这个正方形的中心将有纬度和经度点，并且可以从 0 到 360 的任意角度旋转。

传入的双倍距离可以以英尺为单位，也可以以米为单位，单位是使用 isMetric 布尔值确定的。

我认为问题与我正在使用的公式有关，因为当它从 4 个点绘制正方形时，正方形的大小太大。同样，当您传递 0.0 的角度时，旋转角度似乎设置为 45 度。

这是我到目前为止所拥有的：

参数：纬度，经度（十进制格式），（双）距离，（双）角度

```
 double diagonal = Math.Sqrt(Math.Pow((distance / 2), 2) * 2); //a^2 + b^2 = d^2

        if (isMetric) //Convert meters to km.
        {
            diagonal = diagonal / 1000;
        }

        else   //Convert feet to km.
        {
            diagonal = diagonal * 0.0003048;
        }

        MessageBox.Show("Diagonal: " + diagonal, "DEBUG"); //DEBUG

        double pt1_lat = latDistance(diagonal * Math.Sin(angle), latitude);
        double pt1_long = longDistance(diagonal * Math.Cos(angle), latitude, longitude);

        double pt2_lat = latDistance(diagonal * Math.Cos(angle), latitude);
        double pt2_long = longDistance(-diagonal * Math.Sin(angle), latitude, longitude);

        double pt3_lat = latDistance(-diagonal * Math.Sin(angle), latitude);
        double pt3_long = longDistance(-diagonal * Math.Cos(angle), latitude, longitude);

        double pt4_lat = latDistance(-diagonal * Math.Cos(angle), latitude);
        double pt4_long = longDistance(diagonal * Math.Sin(angle), latitude, longitude); 
```

其余方法如下：

```
 private double latDistance(double distance, double latitude)
    {
        return latitude + degToRad(distance / EARTH_RADIUS);
    }

    private double longDistance(double distance, double latitude, double longitude)
    {
        return longitude + degToRad(distance / EARTH_RADIUS / Math.Cos(latitude));
    }

    private double degToRad(double degrees)
    {
        return (degrees * Math.PI) / 180;
    }

    public double radToDeg(double radians)
    {
        return (180.0 * radians) / Math.PI;
    } 
```

任何帮助是极大的赞赏 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T08:48:18.300

首先，我假设你有一个相对于地球半径的“小”正方形。在这种情况下，如果 distance 是边长，angle 是旋转角度，您应该计算 dx,dy 是一个顶点相对于正方形中心的笛卡尔坐标：

```
dx = 0.5 * Math.Sqrt(2.0) * distance * Math.Cos(angle+0.25*Math.PI);
dy = 0.5 * Math.Sqrt(2.0) * distance * Math.Sin(angle+0.25*math.PI); 
```

（这里我假设角度是弧度，否则你应该转换它）其他3个顶点的笛卡尔坐标分别是：（-dy，dx），（-dx，-dy），（dy，-dx）

要将笛卡尔坐标转换为（经度，纬度），您可以使用您的公式：

```
pt_lat = latDistance(latitude,dy)
pt_long = longDistance(dx,latitude,longitude) 
```

# objective-c - 获取徽章的整数值（来自推送通知）：Xcode

> ID：14660054
> 
> 赞同：2
> 
> 时间：2013-02-02T08:25:34.243
> 
> 标签：objective-c, xcode, push-notification, badge

在我的一个应用程序中，我想以编程方式获取徽章的整数值（来自推送通知）。

`edit:`在“应用程序 didReceiveRemoteNotification”中，我必须设置：

```
badge No. = existing badge No. + 1\. 
```

而且，如何找到这个`existing badge No.`？任何人都可以帮助...？

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T08:27:51.957

```
[UIApplication sharedApplication].applicationIconBadgeNumber 
```

那是你要找的吗？

APN 中的徽章编号刚刚到达。

在`AppDelegate`

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo{
    NSDictionary *notification = [userInfo objectForKey:@"aps"];
    //notification is what you want. print it to find out the details. 
    //Title, Badge Count and all that
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-10T07:20:14.017

对于您要查找的内容，这有点准确

在`appdelegate.m`---> 在`didfinishlaunching`方法中执行此操作：

```
NSString *badgeCount = [NSString stringWithFormat:@"%li", (long)[[UIApplication sharedApplication] applicationIconBadgeNumber]];
NSInteger countNumber = [badgeCount intValue]; 
```

或者，如果您想最初设置 0：

```
[[UIApplication sharedApplication] setApplicationIconBadgeNumber:0];
//this will set 0 to initial badge no 
```

# android - 如何在android中获取特定日期的通话记录

> ID：14660056
> 
> 赞同：6
> 
> 时间：2013-02-02T08:25:37.470
> 
> 标签：android, sql, sqlite

在我的应用程序中，我使用此代码获取所有通话记录。它返回我的 android 手机中的所有通话记录。

```
public class CallLogHelper {

    public static Cursor getAllCallLogs(ContentResolver cr) {
        // reading all data in descending order according to DATE
        String strOrder = android.provider.CallLog.Calls.DATE + " DESC";
        Uri callUri = Uri.parse("content://call_log/calls");
        Cursor curCallLogs = cr.query(callUri, null, null, null, strOrder);
        return curCallLogs;
    }

    public static void insertPlaceholderCall(ContentResolver contentResolver,
            String name, String number) {
        ContentValues values = new ContentValues();
        values.put(CallLog.Calls.NUMBER, number);
        values.put(CallLog.Calls.DATE, System.currentTimeMillis());
        values.put(CallLog.Calls.DURATION, 0);
        values.put(CallLog.Calls.TYPE, CallLog.Calls.OUTGOING_TYPE);
        values.put(CallLog.Calls.NEW, 1);
        values.put(CallLog.Calls.CACHED_NAME, name);
        values.put(CallLog.Calls.CACHED_NUMBER_TYPE, 0);
        values.put(CallLog.Calls.CACHED_NUMBER_LABEL, "");
        Log.d("Call Log", "Inserting call log placeholder for " + number);
        contentResolver.insert(CallLog.Calls.CONTENT_URI, values);
    }

} 
```

但我的问题是我想从特定日期获取通话记录，而不是所有通话记录。我不知道如何使用查询从特定日期获取通话记录。帮帮我谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-03T09:08:34.567

```
StringBuffer sb = new StringBuffer();
    String strOrder = android.provider.CallLog.Calls.DATE + " DESC";
    Uri callUri = Uri.parse("content://call_log/calls");

    Calendar calendar = Calendar.getInstance();

    calendar.set(2014, Calendar.MAY, 25);
    String fromDate = String.valueOf(calendar.getTimeInMillis());
    calendar.set(2014, Calendar.MAY, 30);
    String toDate = String.valueOf(calendar.getTimeInMillis());
    String[] whereValue = {fromDate,toDate};

    Cursor cur = cr.query(callUri, null, android.provider.CallLog.Calls.DATE+" BETWEEN ? AND ?", whereValue, strOrder);

    //Cursor cur = cr.query(callUri, null, android.provider.CallLog.Calls.DATE+" >= ?", whereValue, strOrder);
    // loop through cursor
    while (cur.moveToNext()) {
        String callNumber = cur.getString(cur
                .getColumnIndex(android.provider.CallLog.Calls.NUMBER));

        String callName = cur
                .getString(cur
                        .getColumnIndex(android.provider.CallLog.Calls.CACHED_NAME));

        String callDate = cur.getString(cur
                .getColumnIndex(android.provider.CallLog.Calls.DATE));
        SimpleDateFormat formatter = new SimpleDateFormat(
                "dd-MMM-yyyy HH:mm");
        String dateString = formatter.format(new Date(Long
                .parseLong(callDate)));

        String callType = cur.getString(cur
                .getColumnIndex(android.provider.CallLog.Calls.TYPE));
        String dir=null;
        int dircode = Integer.parseInt(callType); 
        switch (dircode) { 
        case CallLog.Calls.OUTGOING_TYPE: 
            dir = "OUTGOING"; 
                break; 
        case CallLog.Calls.INCOMING_TYPE:
            dir = "INCOMING"; 
                break; 
        case CallLog.Calls.MISSED_TYPE: 
            dir = "MISSED"; 
                break; 
    } 

        String isCallNew = cur.getString(cur
                .getColumnIndex(android.provider.CallLog.Calls.NEW));

        String duration = cur.getString(cur
                .getColumnIndex(android.provider.CallLog.Calls.DURATION));

        sb.append("\nPhone Number:--- " + callNumber + " \nName:--- "+ callName +" \nCall Type dir:--- " + dir + " \nCall Date:--- " + dateString + " \n duration in sec :--- " + duration);
        sb.append("\n----------------------------------"); 

    } 
```

返回的通话记录介于 25/05/2014 和 30/05/2014 之间。返回值全部存储在 sb 变量中，您可以在 TextView 中设置该值进行测试

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-02T15:41:33.883

```
 String[] strFields = {
                android.provider.CallLog.Calls.NUMBER, 
                android.provider.CallLog.Calls.TYPE,
                android.provider.CallLog.Calls.CACHED_NAME,
                android.provider.CallLog.Calls.DATE,
                android.provider.CallLog.Calls.DURATION,

                };

        // Defines a string to contain the selection clause
        String mSelectionClause = android.provider.CallLog.Calls.DATE+ " >= ?";

        // Initializes an array to contain selection arguments
        String[] mSelectionArgs = { createDate(2013,1,1).toString() };

        Cursor mCallCursor = currentContext.getContentResolver().query(
                android.provider.CallLog.Calls.CONTENT_URI,
                strFields,
                mSelectionClause,
                mSelectionArgs,
                null
                );

        return mCallCursor;

public static Long createDate(int year, int month, int day)
{
    Calendar calendar = Calendar.getInstance();

    calendar.set(year, month, day);

    return calendar.getTimeInMillis();

} 
```

# zend-form - 如何在 jQuery ajax 中添加新的 ZF2' Zend\Form\Element

> ID：14660059
> 
> 赞同：0
> 
> 时间：2013-02-02T08:26:13.020
> 
> 标签：zend-form, zend-framework2, zend-form-select

我想在 jQuery ajax 中添加一个新的 ZF2' Zend\Form\Element。但是当我使用 Zend Form 时，我不知道如何制作它。这是 add.phtml 文件。

```
<script type="text/javascript">
 $(document).ready(function(){
    $(".pid").change(function(){
    var id = $('.pid').val();
    var $_this = $(this);
     $.ajax({
            type:"POST",
            url:"<?php echo $this->url('Element/default',array('action'=>'change'));?>",
            data:"pid="+id,
            dataType:'json',
            async:false,
            success:function(data){
                if(data.response){
                   //here I want to add a new select  component after select conponent "pid" using like "$this->formRow($form->get('mid'))" or else .   
                }
            }
    });
  });
});
</script> 
```

以下是html的剩余部分。

```
<?php
$title = 'add';
$this->headTitle($title);
?>
<h1><?php echo $this->escapeHtml($title); ?></h1>

<?php
$form = $this->form;

$form->setAttribute('action', $this->url(
'Element/default',
array(
    'action'     => 'add'
 )
));
$form->prepare();

echo $this->form()->openTag($form); 
echo $this->formRow($form->get('pid'));
echo $this->formRow($form->get('name'));
echo $this->formRow($form->get('desc'));
echo $this->formSubmit($form->get('submit'));
echo $this->form()->closeTag(); 
```

如何在 jquery ajax 中添加新的 zend 表单元素？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-20T12:34:10.320

您有使用 ajax 接收数据的脚本，并且该脚本应该接收 view/html。您需要控制器/动作来呈现数据并作为响应返回。

```
use Zend\View\Model\JsonModel;    
//some controller
public function changeAction(){ // your requested action
    //1\. get partial helper to rendering html;
    $partial = $this->getServiceLocator()->get('ViewHelperManager')->get('partial');
    $form = new Form();// your form
    //2\. render html
    $html = $partial('path/to/your/file/phtml',['form'=>$form]);
    //3\. return data as JSON because in your ajax configuration dataType: 'json'
    return new JsonModel([
        'html' => $html,
    ]);
} 
```

在你的 js 成功函数中应该是：

```
success:function(data){
    if(data.html){
         $_this.find('blockToAppend').append(data.html);
    }
} 
```

# android - 获取片段片段内父活动上下文的正确方法

> ID：14660062
> 
> 赞同：0
> 
> 时间：2013-02-02T08:26:28.917
> 
> 标签：android, android-activity, android-context

我正在开发小型 android 应用程序，在我的应用程序中我使用片段概念。在我的一项活动中，我正在使用多个片段并对这些片段进行转换。现在在一个片段中，我正在显示一个警报对话框，因为我需要传递活动上下文。我以以下方式做到了这一点。

```
new AlertDialog.Builder(getSherlockActivity())
        .setTitle("Logout")
        .setMessage("Really Logout from App?")
        .setPositiveButton("Yes",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,
                            int which) {

                    }
                }).setNegativeButton("No", null).show(); 
```

一切正常，没有任何错误，也没有任何故障。只有一个问题是在 logcat 中它向我显示我的主要活动已经泄露了意图。这是问题所在；这个问题是因为我正在通过`getsherlockActivity();`还是因为其他原因？想澄清这个概念......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T09:25:39.247

打扰一下，但是您确定此消息与这部分代码有关吗，因为我真的不知道如何`Activity` `Fragment`并且`Dialog`可以参考`Intent`？

它看起来像与 BroadcastReceiver 相关的信息级消息，而不是这部分代码。这是与此问题相关的几个 lins：[LINK](https://stackoverflow.com/questions/11299312/leaked-intentreceiver-in-google-cloud-messaging)和[LINK](https://stackoverflow.com/questions/10815416/how-to-display-an-image-in-an-image-button-with-shared-preferences)

# node.js - 为什么 express.js req.param() 不抛出错误？

> ID：14660068
> 
> 赞同：0
> 
> 时间：2013-02-02T08:27:25.743
> 
> 标签：node.js, express

var worker = req.param('client'); // 应该是 req.param('worker'); 我将一个变量传递给 worker，然后在 SQL 查询中使用它，并且我将一个空值插入到我的表中。我意识到我正在使用 worker='value' 并且 express 没有抱怨，为什么会这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T10:48:04.200

因为默认情况下没有验证您的 req.param 值。

如果您的参数未在您的请求中定义，您只是创建一个未定义的变量并插入到您的 Sql 查询中。

相反，您需要检查 req.param 是否包含该值，然后创建您的 var worker 值。

# objective-c - PXListView 拖放不起作用

> ID：14660071
> 
> 赞同：0
> 
> 时间：2013-02-02T08:27:50.817
> 
> 标签：objective-c, cocoa, drag-and-drop, nsscrollview

我已经创建了用于管理 PXListView 的 NSViewController ......代表与文件所有者连接......

这里一切都按预期工作..除了拖放...

拖动时它​​没有进入拖动委托功能......并且在拖动时它没有显示+符号（即拖动符号）......并且拖动单元格重新定位到其原始位置

```
#import "PXListView.h"

@interface ListViewController : NSViewController <PXListViewDelegate>
{
    IBOutlet  PXListView *listView;
    NSMutableArray *_listItems;

    int count;

}
- (void)addCell;

@end

- (BOOL)listView:(PXListView*)aListView writeCellsWithIndexes:(NSIndexSet*)rowIndexes toPasteboard:(NSPasteboard*)dragPasteboard
{
    // +++ Actually drag the items, not just dummy data.
    [dragPasteboard declareTypes: [NSArray arrayWithObjects: NSStringPboardType, nil] owner: self];
    [dragPasteboard setString: @"Just Testing" forType: NSStringPboardType];

    return YES;
}

- (NSDragOperation)listView:(PXListView*)aListView validateDrop:(id <NSDraggingInfo>)info proposedCell:(NSUInteger)row
      proposedDropHighlight:(PXListViewDropHighlight)dropHighlight;
{
    return NSDragOperationCopy;
}

- (BOOL)listView:(PXListView*)aListView acceptDrop:(id <NSDraggingInfo>)info row:   (NSUInteger)row dropHighlight:(PXListViewDropHighlight)dropHighlight
{
    NSLog(@"Accept Drop");

    ListViewThumbnailObject *temp = [_listItems objectAtIndex: [listView selectedCell]];
    [_listItems removeObjectAtIndex: [listView selectedCell]];
    [_listItems insertObject: temp atIndex: row];
    [listView reloadData];
    return YES;
} 
```

它没有进入与拖动相关的委托方法..

在“nib”文件中，委托与文件所有者连接......

谁能建议我如何解决这个问题？

谢谢，穆图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T08:45:54.480

为了能够接受拖放，您可能需要确保为您计划接受的所有拖动类型注册列表视图。尝试`awakeFromNib`在列表视图控制器类的方法中添加它：

```
- (void)awakeFromNib {
    [listView registerForDraggedTypes:[NSArray
               arrayWithObjects:NSStringPboardType, nil]];
} 
```

有关详细信息，请参阅[拖放编程主题：接收拖动操作](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/DragandDrop/Tasks/acceptingdrags.html#//apple_ref/doc/uid/20000993-BABHHIHC)。

请注意，我`NSStringPboardType`在此处使用了数组，因为这是您声明用于在`listView:writeCellsWithIndexes:toPasteboard:`方法中写入的类型。您使用的确切类型数组将取决于您想要支持的类型以及您想要支持的拖动操作的类型（例如，您是否只想实现拖放以允许在单个列表视图中重新排序项目, 或者您是否希望允许将项目从 Finder 拖到 Finder 或在您自己的应用程序的不同视图之间）。如果您描述了您希望支持的拖动操作类型，我可以提供有关您可能希望如何实现它们的更多详细信息。

# android - RelativeLayout 透明度与下面的 ListView

> ID：14660073
> 
> 赞同：0
> 
> 时间：2013-02-02T08:28:08.007
> 
> 标签：android

我有一个透明背景的相对布局。下面是一个带有 ListView 的 LinearLayout。问题是，我没有在透明的RelativeLayout 下方看到我的ListView。这是我的xml：

```
 <RelativeLayout
       android:id="@+id/layoutabove"
     android:background="#55000000"   
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <Button
            android:id="@+id/loginbutton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:text="Login" />

        <ImageView
            android:id="@+id/image"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:src="@drawable/myimage" />

    </RelativeLayout>

<LinearLayout 
    android:id="@+id/mainlayout"
    android:layout_width="fill_parent"
    android:background="#000000"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

     <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="fill_parent" >

    </ListView>

</LinearLayout> 
```

这只是黑色背景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:43:56.103

尝试如下：

> ```
>  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
>        android:id="@+id/layoutabove"
>        android:layout_width="match_parent"
>        android:layout_height="match_parent"
> 
> <RelativeLayout
>     android:id="@+id/layoutabove"
>     android:layout_width="wrap_content"
>     android:layout_height="wrap_content"
>     android:background="#55000000" >
>     <Button
>         android:id="@+id/loginbutton"
>         android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         android:layout_centerHorizontal="true"
>         android:layout_centerVertical="true"
>         android:text="Login" />
>     <ImageView
>         android:id="@+id/image"
>         android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         android:layout_centerInParent="true"
>         android:src="@drawable/myimage" />
> </RelativeLayout>
> <LinearLayout
>     android:id="@+id/mainlayout"
>     android:layout_width="fill_parent"
>     android:layout_height="wrap_content"
>     android:background="#000000"
>     android:orientation="vertical"
>     android:layout_below="@+id/layoutabove" >
>     <ListView
>         android:id="@+id/listView1"
>         android:layout_width="wrap_content"
>         android:layout_height="wrap_content" >
>     </ListView>
> </LinearLayout>
> </RelativeLayout> 
> ```

# python - 处理 pygtk/glade 中的删除事件

> ID：14660074
> 
> 赞同：2
> 
> 时间：2013-02-02T08:28:11.367
> 
> 标签：python, user-interface, gtk, pygtk, glade

我有一个在**glade**中设计的 GUI，在后台使用 python/gtk。我想处理`delete event`并显示“你确定吗？”-消息对话框。我一直在尝试处理删除和销毁事件，但没有做所以。任何光？

```
#!/usr/bin/python
import .... stuff

class App:
  def __init__(self):

    self.gladefile = 'test.glade'
    windowname = 'window'# This must match the window name in glade
    self.wTree = gtk.glade.XML(self.gladefile, windowname)# object for acessing widgets

    dic={
    # Also need to set project2's signal tab
       'on_window_delete_event':self.on_erro,
       'on_window_destroy_event':self.on_erro,
         }

    self.wTree.signal_autoconnect (dic)
    self.op=self.wTree.get_widget('window')
    self.op.show()

  def on_erro(self,widget,*args):

        print 'hello'

app = App()
gtk.main() 
```

此代码打开一个简单的窗口。单击关闭按钮时，它会打印 hello 并退出。（我希望窗口保持打开状态）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T20:31:46.007

You have to return `True` in order to stop propagation of the delete event in the callback `on_erro` as mentioned in the [documentation for `"delete-event"`](http://developer.gnome.org/gtk3/stable/GtkWidget.html#GtkWidget-delete-event). In your current code, the callback is not returning any boolean value as required by the function, which I am guessing is returning `False` (Please check the signature for `on_window_delete_event` callback functions, the return type is boolean)
Hope this helps!

# http-headers - 为什么我以编程方式提取的网页与我在浏览器中看到的不同？

> ID：14660077
> 
> 赞同：1
> 
> 时间：2013-02-02T08:28:39.643
> 
> 标签：http-headers, httpwebrequest, web-crawler, crawler4j

我正在使用 crawler4j 从 Google Play 商店（https 页面）中提取一些数据。但是，我检查了我下载的 html 内容，发现它与我在浏览器中看到的页面源略有不同。为什么？是因为谷歌检测到我正在使用机器人客户端（所以我的 http 请求的处理方式不同）？

谁能帮我？非常感谢！

我已经解决了这个问题。感谢所有的帮助:)

# linux - 如何将此 awk 命令的输出保存到文件中？

> ID：14660079
> 
> 赞同：34
> 
> 时间：2013-02-02T08:28:51.163
> 
> 标签：linux, awk, output

我想将此命令保存到另一个文本： awk '{print $2}' 它从文本中提取。现在我也想保存输出另一个文本。谢谢

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-02-02T08:32:59.490

```
awk '{ print $2 }' text.txt > outputfile.txt 
```

`>`=> 这将重定向`STDOUT`到一个文件。如果文件不存在，它将创建它。如果文件存在，它将清除（有效）内容并将新数据写入其中

`>>`=> 这意味着与上面相同，但如果文件存在，这将向其追加新数据。

***例如：***

```
$ cat /etc/passwd | awk -F: '{ print $1 }' | tail -10 > output.txt
$ cat output.txt 
_warmd
_dovenull
_netstatistics
_avbdeviced
_krb_krbtgt
_krb_kadmin
_krb_changepw
_krb_kerberos
_krb_anonymous
_assetcache 
```

或者，您可以使用该命令`tee`进行重定向。该命令`tee`将重定向`STDOUT`到指定文件以及终端屏幕

***有关 shell 重定向的更多信息，请转到以下链接：***

[http://www.techtrunch.com/scripting/redirections-and-file-descriptors](http://www.techtrunch.com/scripting/redirections-and-file-descriptors)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2019-01-14T21:48:10.063

有一种方法可以从 awk 本身（[文档](https://www.gnu.org/software/gawk/manual/html_node/Redirection.html)）中做到这一点

```
➜ cat text.txt
line 1
line 2
line three
line 4 4 4

➜ awk '{print $2}' text.txt
1
2
three
4

➜ awk '{print $2 >"text.out"}' text.txt

➜ cat text.out
1
2
three
4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-06T00:35:44.760

试试这个命令。

```
cat ORGFILENAME.TXT | awk '{print $2}' > SAVENAME.TXT 
```

谢谢。

# streaming - 除了 OS X 和 iOS，HLS H264/AAC 流功能完美吗？

> ID：14660082
> 
> 赞同：0
> 
> 时间：2013-02-02T08:28:59.383
> 
> 标签：streaming, h.264, aac, mpeg2-ts

我们正在开发一个开源流媒体服务器，但在实现 HLS 时遇到了一些麻烦。

我们已经能够成功地将任何我们想要的流转换为 TS 并分段为 HLS 分段，并且它可以在大多数播放器上完美播放……除了 Apple 播放器（iPad、iPhone、Safari、Quicktime）。在这些方面，需要非常小心地选择 H264 编码设置，即使坚持使用 Baseline/3.0，也可以看到一些明显的故障。

AAC 音频，无论我们如何编码（ffmpeg 的 aac 和 libfkd_aac 编码器都在几乎所有可能的配置中进行了尝试）听起来也很不稳定。（同样，所有这些版本都可以在非 Apple 播放器上正常播放。）有时更改编码设置确实会产生更好的结果，但我们无法找到适用于我们测试过的每个视频的任何组合.

这使我们得出结论，也许基于 Apple 的播放器需要 TS 流本身中的某些我们没有正确执行的内容。有什么可能导致这种行为吗？作为参考，我们的打包器/分段器输出的 HLS 测试流可以在这里找到：[链接](http://gary.ddvtech.com:8080/hls/bunny/index.m3u8)

我们感谢任何反馈！

# javascript - 如何解析 JSON 数组以获取单个数组元素

> ID：14660084
> 
> 赞同：2
> 
> 时间：2013-02-02T08:29:04.933
> 
> 标签：javascript, jquery, asp.net, web-services

我有这个返回 JSON 数组的网络服务

```
 public string getLastDP(string accountID)
 {
    string connectionString = ConfigurationSettings.AppSettings["connectionString"].ToString();

    MySqlConnection connectionObj = new MySqlConnection(connectionString);
    List<lastDPElements> listOFElements = new List<lastDPElements>();
    try
    {
        connectionObj.Open();

        MySqlCommand cmd = new MySqlCommand("REPORTSERVER_ALL_LAST_DP_OF_DEVICE", connectionObj);
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.Add(new MySqlParameter("acc", accountID));
        MySqlDataReader dr = cmd.ExecuteReader(CommandBehavior.CloseConnection);
        while (dr.Read())
        {
            lastDPElements temp = new lastDPElements();
            temp.accountID = dr["accountID"].ToString();
            temp.address = dr["address"].ToString();
            temp.deviceID = dr["deviceID"].ToString();
            temp.displayName = dr["displayName"].ToString();
            temp.heading = double.Parse(dr["heading"].ToString());
            temp.inputMask = dr["inputMask"].ToString();
            temp.latitude = double.Parse(dr["latitude"].ToString());
            temp.longitude = double.Parse(dr["longitude"].ToString());
            temp.timestamp = Convert.ToDateTime(dr["timestamp"].ToString());
            listOFElements.Add(temp);
        }
        return new JavaScriptSerializer().Serialize(listOFElements);
    }
    catch
    {
        throw;
    }
    finally
    {
        connectionObj.Close();
        connectionObj.Dispose();
    }

} 
```

服务返回的数组是

```
[{  "accountID":"rbTours",
"deviceID":"000020120504004",
"timestamp":"\/Date(1359720917000)\/",
"latitude":28.4337833,
"longitude":77.1048833,
"speedKPH":0,
"heading":130.44,
"altitude":0,
"address":"HCG CNG Station, Sector Road to Sector 56, DLF Ph. V, Gurgoan, Gurgaon, Haryana, 122002, India",
"odometerKM":null,
"displayName":"DL 1YC 7276",
"pushPinPath":null,
"temperature":null,
"inputMask":"0"},{"accountID":"rbTours",
"deviceID":"000020120711002",
"timestamp":"\/Date(1358638851000)\/",
"latitude":28.610895,
"longitude":77.3269683,
"speedKPH":0,
"heading":253,
"altitude":0,
"address":"Gazipur Shamshan Ghat, Mayur Vihar III, Patparganj, East Delhi, National Capital Territory of Delhi, 110092, India",
"odometerKM":null,
"displayName":"DL1YC8576",
"pushPinPath":null,
"temperature":null,
"inputMask":"0"},{"accountID":"rbTours",
"deviceID":"000020120618001",
"timestamp":"\/Date(1359721995000)\/",
"latitude":28.6345933,
"longitude":77.449505,
"speedKPH":0,
"heading":284.04,
"altitude":0,
"address":"National Highway 24 Bypass, B-Block, Lohia Nagar, Ghaziabad, Ghaziabad, Ghaziabad, Uttar Pradesh, 201001, India",
"odometerKM":null,
"displayName":"DL 1Y C6322",
"pushPinPath":null,
"temperature":null,
"inputMask":"0"},{"accountID":"rbTours",
"deviceID":"000020120618002",
"timestamp":"\/Date(1359715788000)\/",
"latitude":28.4446867,
"longitude":77.0450667,
"speedKPH":0,
"heading":35.25,
"altitude":0,
"address":"NH8, Sec 38, Gurgoan, Gurgaon, Haryana, 122018, India",
"odometerKM":null,
"displayName":"UP16 AT 7410",
"pushPinPath":null,
"temperature":null,
"inputMask":"0"},{"accountID":"rbTours",
"deviceID":"000020120711001",
"timestamp":"\/Date(1359693209000)\/",
"latitude":28.5384833,
"longitude":77.1915783,
"speedKPH":0,
"heading":288.26,
"altitude":0,
"address":"Aurobindo Marg, Qutab Institutional Area, Katwaria Sarai, South Delhi, National Capital Territory of Delhi, 110016, India",
"odometerKM":null,
"displayName":"UP16 AT7415",
"pushPinPath":null,
"temperature":null,
"inputMask":"0"},{"accountID":"rbTours",
"deviceID":"356307040485566",
"timestamp":"\/Date(1359698595000)\/",
"latitude":28.5716512,
"longitude":77.136544,
"speedKPH":0,
"heading":0,
"altitude":0,
"address":"NH8, Palam, New Delhi, National Capital Territory of Delhi, 110021, India",
"odometerKM":null,
"displayName":"DL 1Y C9174",
"pushPinPath":null,
"temperature":null,
"inputMask":"0"},{"accountID":"rbTours",
"deviceID":"000020120707001",
"timestamp":"\/Date(1359722004000)\/",
"latitude":28.6107633,
"longitude":77.327815,
"speedKPH":0,
"heading":299.16,
"altitude":0,
"address":"Sector 11, Noida, Ghaziabad, Ghaziabad, Uttar Pradesh, 201307, India",
"odometerKM":null,
"displayName":"DL 1YC 8577",
"pushPinPath":null,
"temperature":null,
"inputMask":"0"},{"accountID":"rbTours",
"deviceID":"000020120623001",
"timestamp":"\/Date(1359722004000)\/",
"latitude":28.6425567,
"longitude":77.1736367,
"speedKPH":0,
"heading":124.77,
"altitude":0,
"address":"Patel Road, Patel Nagar, Kirti nagar, West Delhi, National Capital Territory of Delhi, India",
"odometerKM":null,
"displayName":"UP16 AT 8992",
"pushPinPath":null,
"temperature":null,
"inputMask":"0"},{"accountID":"rbTours",
"deviceID":"000020120619001",
"timestamp":"\/Date(1359721984000)\/",
"latitude":28.43367,
"longitude":77.1048533,
"speedKPH":0,
"heading":154.8,
"altitude":0,
"address":"Centrum Plaza, Sector Road to Sector 56, DLF Ph. V, Gurgoan, Gurgaon, Haryana, 122002, India",
"odometerKM":null,
"displayName":"UP16 AT 9104",
"pushPinPath":null,
"temperature":null,
"inputMask":"0"},{"accountID":"rbTours",
"deviceID":"000020120609005",
"timestamp":"\/Date(1359721996000)\/",
"latitude":28.6760217,
"longitude":77.2942033,
"speedKPH":0,
"heading":92.92,
"altitude":0,
"address":"National Highway 24, Shahdara, North East Delhi, National Capital Territory of Delhi, India",
"odometerKM":null,
"displayName":"DL1V A 8569",
"pushPinPath":null,
"temperature":null,
"inputMask":"0"},{"accountID":"rbTours",
"deviceID":"000020120818004",
"timestamp":"\/Date(1359721960000)\/",
"latitude":27.1598883,
"longitude":78.0428533,
"speedKPH":0,
"heading":1.07,
"altitude":0,
"address":"The Silk Route Restaurant, SH62, Tajganj, Agra, Uttar Pradesh, 282001, India",
"odometerKM":null,
"displayName":"DL 1V A 8743",
"pushPinPath":null,
"temperature":null,
"inputMask":"0"},{"accountID":"rbTours",
"deviceID":"000020120813001",
"timestamp":"\/Date(1359715794000)\/",
"latitude":28.613985,
"longitude":77.331255,
"speedKPH":0,
"heading":231.58,
"altitude":0,
"address":"Sector 11, Noida, Ghaziabad, Ghaziabad, Uttar Pradesh, 201307, India",
"odometerKM":null,
"displayName":"DL 1Y C6321",
"pushPinPath":null,
"temperature":null,
"inputMask":"0"}]; 
```

如何解析它以获取可以获取单个元素的格式的数据。我从以下脚本调用服务。

```
function getData() {
            var accountObj = 'rbTours';
            $.ajax({
                url: "Services/GetData.asmx/getLastDP",
                type: "POST",
                dataType: "json",
                data: "{accountID:'" + accountObj + "'}",
                contentType: "application/json; charset=utf-8",
                success: function(response) {
                    functionOnSuccess(response.d);
                },
                error: function(e) {
                    alert(e);
                }
            });
            return false;
        }
        function functionOnSuccess(arrayOfElements) {
        var data=[];
        if (arrayOfElements != null && arrayOfElements != 'undefined') {
        for (var i = 0; i < arrayOfElements.length; i++) {
          var row = new Array();
          row[0] = response[i].latitude;
          row[1] = response[i].longitude;              
          data.addRow(row);
          }
          }
         alert(data);
        } 
```

我应该在 OnSuccess 上做什么以获取列表格式的元素我想获取数据，例如

```
var requiredValue=array[0].latitude etc 
```

对不起我的英语不好..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T08:32:35.133

问题是：您正在尝试`response`从该功能访问。

试试这个：

```
function functionOnSuccess(arrayOfElements) {
    var data=[];
    if (arrayOfElements != null && arrayOfElements != 'undefined') {
        for (var i = 0; i < arrayOfElements.length; i++) {
            var row = new Array();
            row[0] = arrayOfElements[i].latitude;
            row[1] = arrayOfElements[i].longitude;              
            data.addRow(row);
        }
    }
    alert(data);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T08:32:46.027

您可以在萤火虫控制台中发布您收到的 json 响应吗？

您不必手动解析 json，当您设置`dataType:'json'`jquery 时会为您解析响应，并且通过 while 循环的外观，您可以访问 json 道具，如

```
success:function(data){
 console.log(data[0].lastDPElements);
} 
```

你可以像上面一样循环遍历数据和道具......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T08:34:04.613

您可以按如下方式获取值。

```
 function getData() {
            var accountObj = 'rbTours';
            $.ajax({
                url: "Services/GetData.asmx/getLastDP",
                type: "POST",
                dataType: "json",
                data: "{accountID:'" + accountObj + "'}",
                contentType: "application/json; charset=utf-8",
                success: function(response) {
                    functionOnSuccess(response.d);
                },
                error: function(e) {
                    alert(e);
                }
            });
            return false;
        }
        function functionOnSuccess(arrayOfElements) {
        var data=[];
        if (arrayOfElements != null && arrayOfElements != 'undefined') {
          requiredValue=arrayOfElements[0].latitude; 
        } 
```

## 编辑 1

甚至你可以循环浏览你的收藏

```
 function functionOnSuccess(arrayOfElements) {
        var data=[];
        if (arrayOfElements != null && arrayOfElements != 'undefined') {
          for(i=0;i<arrayOfElements.length;i++)
          requiredValue=arrayOfElements[i].latitude; 
        } 
```

## 编辑 2

```
 function functionOnSuccess(arrayOfElements) {
       obj = JSON.parse(arrayOfElements);
       alert(obj.count); 
```

看看计数有什么。

## 编辑 3

```
 function functionOnSuccess(arrayOfElements) {
       obj = JSON.parse(arrayOfElements);
       alert(obj.length); 
```

看看计数有什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T09:23:17.253

```
you have to try this 

 function getData() {
            var accountObj = 'rbTours';
            $.ajax({
                url: "Services/GetData.asmx/getLastDP",
                type: "POST",
                dataType: "json",
                data: "{accountID:'" + accountObj + "'}",
                contentType: "application/json; charset=utf-8",
                success: function(response) {
                    **functionOnSuccess((response.getLastDPResult).Toarray());**
                },
                error: function(e) {
                    alert(e);
                }
            });
            return false;
        } 
```

# c++ - 无法引用方法

> ID：14660089
> 
> 赞同：-1
> 
> 时间：2013-02-02T08:29:40.550
> 
> 标签：c++

当我开始学习 C++ 和算法时。我想在模块范式中对代码进行分组。所以我把排序过程分成了3个文件，如下：

**sort.h**

```
namespace sort
{
    void insertSort(int* a,int size);    
} 
```

**排序文件**

```
#include "sort.h"
namespace sort
{
}
void sort::insertSort(int* a,int size)
{
    int i,j,key;
    for(j=1;j<size;j++)
    {
        key=a[j];
        i=j-1;
        while(i>=0 && a[i]>key)
        {
            a[i+1]=a[i];
            i=i-1;
        }
        a[i+1]=key;
    }
} 
```

**主文件**

```
#include<iostream>
#include"sort.h"
int main()
{
    int a[6]={5,2,4,6,1,3};
    sort::insertSort(a,6);
    for(int i=0;i<6;i++) std::cout<<a[i]<<'\t';
    return 0;
} 
```

当我使用 Dev-C++ 编译这三个文件时。我得到以下错误信息：

> [链接器错误] 未定义对 `sort::insertSort(int*, int)' 的引用

我不知道为什么。我想我已经包含了文件“sort.h”，那么为什么它还告诉我编译不能引用该方法`sort::insertSort()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T08:51:20.770

在构建整个程序时，请确保将所有目标文件链接在一起。链接器抱怨是因为您的`main()`函数正在调用该`sort::insertSort`函数，该函数已在 中*声明*，`sort.h`但其*定义*并未包含在整个程序中。

我不知道您的特定 Dev-C++ 环境需要哪些参数，但通常，请确保所有`cpp`文件都在您发送到编译器前端的命令行中。

# iphone - Xcode 4.6，用作前一个参数的名称而不是选择器的一部分

> ID：14660091
> 
> 赞同：31
> 
> 时间：2013-02-02T08:29:43.733
> 
> 标签：iphone, objective-c, xcode, cocoa-touch

我从 Xcode 4.6 收到以下警告。

```
.. used as the name of the previous parameter rather than as part of the selector 
```

我知道我可以禁用此警告，但我宁愿修复它。

我有 109 个这样的警告，所以我显然写得很糟糕。

这是我的一些方法。

```
+(NSString*)addFormatPrice:(double)dblPrice:(BOOL)booRemoveCurSymbol;

-(void)showHelpChoices:(UIView *)vw:(id)dg; 
```

那么，编写这些方法的正确方法是什么？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-02-02T08:37:16.557

您的第一种方法是声明选择器`+addFormatPrice::`。有空格，它看起来像

```
+ (NSString *)addFormatPrice:(double)dblPrice :(BOOL)booRemoveCurSymbol; 
```

这像`[NSString addFormatPrice:0.3 :YES]`.

你应该做的实际上是给前面的参数一个名字，比如

```
+ (NSString *)addFormatPrice:(double)dblPrice removeCurSymbol:(BOOL)booRemoveCurSymbol; 
```

然后会像`[NSString addFormatPrice:0.3 removeCurSymbol:YES]`.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-02T08:38:19.220

如果您将它们分成几行，也许您会更容易理解？

```
+(NSString*)addFormatPrice:(double)dblPrice
                          :(BOOL)booRemoveCurSymbol;

-(void)showHelpChoices:(UIView *)vw
                      :(id)dg; 
```

Objective-C 方法名的结构是这样的：

```
- (returntype)firstPartOfMethodWithParameter:(type)nameOfFirstParameter secondPartOfNameWhichDescribesSecondParameter:(type)nameOfSecondParameter; 
```

也就是说，完整的方法名称被分解，参数名称散布在其中。冒号将每个“标签”与其参数分开；空格将参数名称与方法名称的下一部分分开。

您的方法缺少第二部分，即描述第二个参数的位。现在，您的方法的名称是`addFormatPrice::`and `showHelpChoices::`，这两者都是合法的，但不惯用。当您调用它们时，它将如下所示：

```
[Excelsior addFormatPrice:2.0 :YES];
[thumpy showHelpChoices:aView :obj]; 
```

这应该清楚地表明您的名字不太正确。您只需要为第二个参数添加标签：

```
+(NSString*)addFormatPrice:(double)dblPrice
    removingCurrencySymbol:(BOOL)booRemoveCurSymbol;

-(void)showHelpChoices:(UIView *)vw
             digeridoo:(id)dg; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T08:54:44.293

有关命名 Objective-C 方法的建议，您应该求助于 Objective-C 风格指南，例如[Apple 的 Cocoa 编码指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.html)。任何遵循社区约定和 Apple 框架的样式指南都会建议您为方法命名，以便在方法名称中清楚地描述每个参数的用途。

```
+(NSString *)priceStringWithPrice:(double)price removeCurrencySymbol:(BOOL)removeCurrencySymbol

-(void)showHelpChoicesInView:(UIView *)view withSomethingWithAnUndecipherableName:(id)mysteryParameter 
```

请注意名称的显着变化，以表明它在您的程序中的作用（我假设）以及每个参数的作用。您的类方法不会向任何内容添加任何内容 - 而是返回一个新字符串。这使您的代码与其他开发人员的代码、Apple 的框架、您可能使用的其他库自然地融合在一起，并大大提高了可读性。不命名参数会降低可读性并使可维护性变得更加困难。

在相关的说明中，不必要的缩写，包括匈牙利符号，是不和谐的，不符合风格，如果你遵循良好的命名习惯，你就不需要它们，并且会产生易于维护的代码。所以不要叫它`vw`，叫它`view`或`viewToShowIn`。不要称之为`strVal`call it`valueString`或`somethingSpecificallyDescribingTheNatureOfTheValueString`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-02T08:36:15.957

这就是你应该这样做的方式

```
+(NSString*)addFormatPrice:(double)dblPrice removeCurSymbol:(BOOL)booRemoveCurSymbol;

-(void)showHelpChoices:(UIView *)vw  whatEverThePurposeOf:(id)dg; 
```

尝试从 Apple 的示例代码中学习。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

首先，你可以试着用一句话来写你的方法。

像这样

```
applicationdidFinishLaunchingWithOptions 
```

然后，添加带有参数的名词描述`(UIApplication *)application`和`(NSDictionary *)launchOptions`

# fonts - 如何使用 libgdx BitmapFont 绘制方法来编写特定字体样式和大小的文本。

> ID：14660092
> 
> 赞同：0
> 
> 时间：2013-02-02T08:29:50.033
> 
> 标签：fonts, libgdx

我已经尝试了下面给出的代码：

```
Assets.font.draw(objspritebatch, chooseBackground, Gdx.graphics.getWidth()*.5f,Gdx.graphics.getHeight()*.5f); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T22:25:09.877

如果您要绘制文本，它可能在游戏的 HUD 或菜单中。然后你应该检查[scene2d](http://code.google.com/p/libgdx/wiki/scene2d)，尤其是[scene2d.ui 小部件*Label*](http://code.google.com/p/libgdx/wiki/scene2dui#Label)。并且不要忘记探索[API](http://libgdx.l33tlabs.org/docs/api/index.html?com/badlogic/gdx/scenes/scene2d/package-summary.html)。

但是，要在屏幕上简单地绘制文本，请查看[此 wiki 文章](http://code.google.com/p/libgdx-users/wiki/addingText2D)。如果您想使用自己的自定义字体，则需要将其与[Hiero](https://code.google.com/p/libgdx/wiki/Hiero)打包。

# android - Android Apk 分发

> ID：14660094
> 
> 赞同：0
> 
> 时间：2013-02-02T08:30:05.790
> 
> 标签：android, apk, distribution, google-license-manager

我对 apk 分发有疑问。我们都知道我们可以通过蓝牙、电子邮件等方式分发 apk。

现在，当我从 google play 下载任何 apk 时，该应用程序已安装，并且我们无法使用许可政策共享它。

我在一个网站上有我的 apk。我想要同样的东西。我也想从网站上进行全新安装。该应用程序不应与 any1 共享。

有什么办法吗？关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T08:44:48.987

正如我在评论中所说，如果用户在存储中有您的 apk，您不能阻止他们转发，您可以做的是在安装应用程序后将其删除，但可以在安装前共享。

并且市场上存在声称将已安装的应用程序转换为apk的工具/应用程序，然后可以将其转发到其他设备。

[关于 apk 前向锁定的类似问题](https://stackoverflow.com/questions/2711298/programmatically-forward-lock-an-android-apk?rq=1)

**编辑：-**虽然您不能阻止用户转发您的 apk，但可以阻止其他用户使用它，如果他们从其他来源收到此应用程序，那么您的网络，正如我之前所做的那样，通过客户端服务器通信，其中一个关键正在基于移动 IMEI 在服务器上生成，因此将根据 IMEI 号码为特定移动设备激活此应用程序。因此，如果其他用户尝试使用它，您可以检查此 IMEI 是否已注册，并采取相应措施。

# mule - 为什么使用 CXF-Proxy 后的 outbound 地址在 mule 中没有重定向？

> ID：14660096
> 
> 赞同：0
> 
> 时间：2013-02-02T08:30:26.490
> 
> 标签：mule

我使用 cxf 代理服务在 mule 3.3.0 CE 中发布了一个 Web 服务。

```
<mule xmlns:http="http://www.mulesoft.org/schema/mule/http"
xmlns:spring="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:cxf="http://www.mulesoft.org/schema/mule/cxf"
xmlns:cxf-core="http://cxf.apache.org/core" xmlns:mule-xml="http://www.mulesoft.org/schema/mule/xml"
xmlns:vm="http://www.mulesoft.org/schema/mule/vm" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
xmlns:mule-ss="http://www.mulesoft.org/schema/mule/spring-security"
xmlns:ss="http://www.springframework.org/schema/security" xmlns:test="http://www.mulesoft.org/schema/mule/test"
xsi:schemaLocation=" http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
    http://www.mulesoft.org/schema/mule/cxf http://www.mulesoft.org/schema/mule/cxf/current/mule-cxf.xsd 
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
    http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd 
    http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd 
    http://www.mulesoft.org/schema/mule/xml http://www.mulesoft.org/schema/mule/xml/current/mule-xml.xsd 
    http://www.mulesoft.org/schema/mule/vm http://www.mulesoft.org/schema/mule/vm/current/mule-vm.xsd 
    http://www.mulesoft.org/schema/mule/spring-security http://www.mulesoft.org/schema/mule/spring-security/3.3/mule-spring-security.xsd 
    http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd 
    http://www.mulesoft.org/schema/mule/test http://www.mulesoft.org/schema/mule/test/current/mule-test.xsd "
    version="CE-3.3.0">
<flow name="wbs" doc:name="wbs">
    <http:inbound-endpoint host="localhost" port="9094"
        path="myPath/app" exchange-pattern="request-response" doc:name="HTTP">
    </http:inbound-endpoint>

    <cxf:proxy-service doc:name="wbsrv" service="AppWSService"
        wsdlLocation="schema/wsdl/App/WSService.wsdl" namespace="http://wbservice.com/"
        payload="body"></cxf:proxy-service>
    <copy-properties propertyName="SOAPAction" doc:name="Property" />
    <cxf:proxy-client doc:name="wbsrv" />

    <http:outbound-endpoint address="http://websrv.mydns.com:8080/App/WSService"
        doc:name="HTTP" encoding="UTF-8" responseTimeout="1000000"
        exchange-pattern="request-response">
    </http:outbound-endpoint>
</flow> 
```

我的 mule 服务器的 IP 是：192.168.0.59。我可以通过该 Ip (192.168.0.59) 看到出站地址 ( [http://websrv.mydns.com:8080/App/WSService](http://websrv.mydns.com:8080/App/WSService) )。在运行网络服务之后，我可以看到我使用 cxf 代理发布它的 wsdl，但是当我使用 SoapUI 检查它时，我无法收到响应。我在 SoapUI xml 中有以下错误：

```
<soap:Fault>
     <faultcode>soap:Server</faultcode>
     <faultstring>Failed to route event via endpoint: DefaultOutboundEndpoint{endpointUri=http://websrv.mydns.com:8080/App/WSService, connector=HttpConnector
{   name=httpConnector   lifecycle=start   this=16a2c7b  
numberOfConcurrentTransactedReceivers=4  
createMultipleTransactedReceivers=true   connected=true  
supportedProtocols=[http]   serviceOverrides=
session.handler=org.mule.session.NullSessionHandler } ,  name='endpoint.http.websrv.mydns.com.8080.App.WSService',
mep=REQUEST_RESPONSE, properties={},
transactionConfig=Transaction{factory=null, action=INDIFFERENT,
timeout=0}, deleteUnacceptedMessages=false, initialState=started,
responseTimeout=1000000, endpointEncoding=UTF-8,
disableTransportTransformer=false}. Message payload is of type:
websrvMethod
</faultstring>
      </soap:Fault> 
```

如何重定向出站地址，我可以在每个服务器和 IP 中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T19:42:21.457

尝试以下配置：

```
<flow name="wbs">
    <http:inbound-endpoint host="localhost" port="9094"
        path="myPath/app" exchange-pattern="request-response">
        <cxf:proxy-service service="AppWSService"
            wsdlLocation="schema/wsdl/App/WSService.wsdl"
            namespace="http://wbservice.com/"
            payload="body" />
    </http:inbound-endpoint>

    <copy-properties propertyName="SOAPAction" />

    <http:outbound-endpoint address="http://websrv.mydns.com:8080/App/WSService"
        encoding="UTF-8" responseTimeout="1000000"
        exchange-pattern="request-response">
        <cxf:proxy-client payload="body" />
    </http:outbound-endpoint>
</flow> 
```

# batch-file - 运行在指定时间停止进程的批处理文件

> ID：14660098
> 
> 赞同：0
> 
> 时间：2013-02-02T08:31:26.340
> 
> 标签：batch-file, minecraft

我正在运行一个批处理文件来启动一个 Minecraft 服务器。这是以下脚本：

```
@echo off
"%ProgramFiles%\Java\jre7\bin\java.exe" -Xms1024M -Xmx1024M -jar craftbukkit-1.4.7-R1.0.jar
pause 
```

我突然想到，批处理文件可能会在一天中的指定时间自动停止该过程，但不是通过任何形式的倒计时。

另外，我曾希望它可以在命令提示符中写下以下几行：

*   说服务器将在 15 分钟后关闭（凌晨 1 点 45 分）
*   说服务器将在 10 分钟后关闭（凌晨 1:50）
*   说服务器将在 5 分钟后关闭（凌晨 1 点 55 分）
*   说服务器正在关闭，再见。（凌晨 2:00）
*   停止（凌晨 2:00）

如果这是不可能的，任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:38:05.440

这是你要找的吗？

```
@echo off
setlocal enabledelayedexpansion
cmd /c "%ProgramFiles%\Java\jre7\bin\java.exe" -Xms1024M -Xmx1024M -jar craftbukkit-1.4.7-R1.0.jar

:waitloop
for /f "tokens=1-3 delims=:." %%I in ("%time%") do (
    if "%%I"==" 1" (
        if "%%J"=="45" (
            echo ! Server is closing in 15 minutes.
        ) else if "%%J"=="50" (
            echo ! Server is closing in 10 minutes.
        ) else if "%%J"=="55" (
            echo ! Server is closing in 5 minutes.
        )
    ) else if "%%I"==" 2" (
        echo ! Toodloo.
        wmic process where name="java.exe" delete >NUL 2>NUL
        goto :EOF
    )
    set /a secs=60 - %%K + 1
    ping 127.0.0.1 -n !secs! >NUL
)
goto waitloop 
```

# php - 单击另一个表单时保存第一个表单 POST 值

> ID：14660104
> 
> 赞同：-1
> 
> 时间：2013-02-02T08:32:18.563
> 
> 标签：php

当我单击保留时，$page = 保留。但是，当我单击另一个表单（如 GO）时，$page 值将返回到 Schedule。

如果单击保留并单击 GO $page 仍然等于保留，我想保留 $page 的值。

```
<?php 

if(isset($_POST['page'])){
    $page = $_POST['page']; 
}
else $page = 'Schedule';

echo $page;
?>

<form action="<?php $_SERVER['PHP_SELF'] ?>" method="post">
    <input type="submit" name="page" value="Schedule" />
    <input type="submit" name="page" value="Resereved" />
</form>
<br /><br />
<form action="<?php $_SERVER['PHP_SELF'] ?>" method="post">
    <input type="text" value="" />
    <input type="submit" name="submission" value="GO" />
</form> 
```

请帮助我坚持了1天..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T08:39:17.160

试试这个 ：

```
 if(isset($_POST['page'])){
 (isset($_POST['page'])) ? '$page = $_POST['page']' : 'Schedule';
 }

 echo $page; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T08:43:33.580

```
<?php 
session_start();

if(isset($_POST['page'])){
    $page = $_POST['page'];
    $_SESSION['page'] =  $page;
}
if(isset($_SESSION['page']))
{
$page = $_SESSION['page'];

}
else $page = 'Schedule';

echo $page;

?>

<form action="<?php $_SERVER['PHP_SELF'] ?>" method="post">
    <input type="submit" name="page" value="Schedule" />
    <input type="submit" name="page" value="Resereved" />
</form>
<br /><br />
<form action="<?php $_SERVER['PHP_SELF'] ?>" method="post">
    <input type="text" value="" />
    <input type="submit" name="submission" value="GO" />
</form> 
```

使用会话

# python - 新手：使用带有 https 的 urlopen 更新更改的 IP 并登录

> ID：14660105
> 
> 赞同：0
> 
> 时间：2013-02-02T08:32:25.247
> 
> 标签：python, https

这是python的新手问题，非常感谢建议。

no-ip.com 提供了一种简单的方法来更新计算机不断变化的 IP 地址，只需打开 URL [http://user:password@dynupdate.no-ip.com/nic/update?hostname=my.host.name](http://user:password@dynupdate.no-ip.com/nic/update?hostname=my.host.name)

...在 Firefox 中输入时，http 和 https 都可以工作。我试图在“/etc/NetworkManager/dispatcher.d”中的脚本中实现这一点，以供网络管理器在最新版本的 Ubuntu 上使用。

起作用的是python脚本：

```
from urllib import urlopen;
urlopen("http://user:password@dynupdate.no-ip.com/nic/update?hostname=my.host.name") 
```

我想要的与“https”相同，它不那么容易工作。请问有没有人可以

(1) 向我展示 https 的脚本应该是什么样子，

(2) 给我一些**关键字**，我可以用它来了解这个。

(3) 甚至可以解释为什么当脚本更改为使用“urllib2”时它不再起作用：

```
from urllib2 import urlopen;
urlopen("http://user:password@dynupdate.no-ip.com/nic/update?hostname=my.host.name") 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:28:15.923

该`user:password`部分不在实际 URL 中，而是 HTTP 身份验证的快捷方式。浏览器的 URL 解析库会过滤掉它们。在 urllib2 中，你想要

```
import base64, urllib2
user,password = 'john_smith','123456'
request = urllib2.Request('dynupdate.no-ip.com/nic/update?hostname=my.host.name')
auth = base64.base64encode(user + ':' + password)
request.add_header('Authorization', 'Basic ' + auth)   
urllib2.urlopen(request) 
```

# jquery - jQuery 动画 | 防止功能触发冗余

> ID：14660107
> 
> 赞同：0
> 
> 时间：2013-02-02T08:32:43.610
> 
> 标签：jquery, jquery-animate

如何跟踪以下动画以查看它是否已应用？通常我只会在它打开时将一个变量设置为 1 或 true，但是这个动画是基于类应用于多个元素的。

```
function animateDiv(what) {  
    $(what).animate({ backgroundPosition:"0px -250px"
    },8000).css('background-position','0px -250px');

    $(what).animate({
        backgroundPosition:"0px 0px"
    },8000).css('background-position','0px 0px'); 
} 

$(document).on( 'hover', '.animation-div', function(){ animateDiv(this); } ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T08:43:42.690

一种可能性是：

```
$(document).on('hover', '.animation-div', function() {
    if (!$(this).hasData('done')) {
        $(this).data('done');
        animateDiv(this);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T09:14:43.747

不确定这是否回答了问题，但其中一些可能会有所帮助......

```
function addAnotherClass($self) {
  $self.toggleClass('another_class_for_reference');
}

$('.animation-div').hover(
  function() {
    var $self = $(this);

    $self.animate({"left": "+=50px"}, "slow");
    $self.addClass('active');
    addAnotherClass($self);
  },
  function() {
    var $self = $(this);

    $self.animate({"left": "-=50px"}, "slow");
    $self.removeClass('active');
    addAnotherClass($self);
  }
); 
```

[http://jsfiddle.net/ndreckshage/RBhAZ/](http://jsfiddle.net/ndreckshage/RBhAZ/)

# java - jsp中的依赖下拉列表

> ID：14660116
> 
> 赞同：0
> 
> 时间：2013-02-02T08:33:34.160
> 
> 标签：java, javascript, ajax, jsp

我的 JSP 中有两个下拉列表。一个用于顶级类别，另一个用于子类别。当我的 JSP 页面最初加载时，它将仅包含第一个下拉框中的 topcategories 列表，而第二个下拉列表将为空。当我从第一个下拉列表中选择 topcategory 时，其相应的子类别应填充在第二个下拉列表中。在我初始加载 jsp 本身的过程中，我将获得包含顶级类别和子类别列表的数据bean。So when the topcategory is selected i should get the value of topcategory selected and I have to compare it with the topcategory list present in databean and need to populate the corresponding subcategories in the second drop down. 如何做到这一点请帮助我。提前致谢。我已经分享了我的代码以供参考。

```
<div class="selectbox01">
                <select name="make" id="make" onchange="loadModel()">

                    <c:forEach var="topCategory" items="${catalog.topCategories}" varStatus="status">
                    <option selected="selected"></option>
                    <option value="${topCategory.categoryId}"><c:out value="${topCategory.description.name}"/></option>
                    </c:forEach>
                </select>
            </div>
            <c:set var="make" value="${WCParam.make}"/>
            <div class="selectbox01">
                <select name="model" id="model">
                <option selected="selected"></option>
                <c:forEach var="topCategory" items="${catalog.topCategories}" varStatus="status">
                <c:if test="${topCategory.categoryId == make}">
                <c:forEach var="subTopCategory" items="${topCategory.subCategories}" varStatus="status2"> 
                    <option value="${subTopCategory.categoryId}">
<c:out value="${subTopCategory.description.name}"/></option>
                   </c:forEach>
                   </c:if>
                     </c:forEach>

                </select>
            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:35:34.037

一种方法是制作一个表示“目录”bean 的 javascript 对象。然后编写一个绑定到 topcategories 下拉列表的 onchange 处理程序，该处理程序使用 javascript 中的“目录”对象来获取子目录的 javascript 数组。

将其分解为步骤：

**第 1 步：** 创建一个表示“目录”bean 的 javascript 对象：一个简单的方法是覆盖目录 bean 的 toString() 方法并返回一个表示该 bean 的 JSON 对象。或使用[Jackson](http://www.mkyong.com/java/how-to-convert-java-object-to-from-json-jackson/) api 将目录对象转换为 JSON 字符串。完成后，将 json 保存在 javascript 变量中。例如在你的jsp中写下这个：

```
<script type="text/javascript"> var catalogJson = ${catalog};</script> 
```

**第 2 步：** 在 javascript 中编写 loadModel 函数，该函数使用“catalogJson”变量来获取子目录并将它们填充到另一个下拉列表中。

我已经消除了一些细节，但我猜大部分都是直截了当的。

# wmic - “WMIC 进程”输出中没有用户名列

> ID：14660118
> 
> 赞同：3
> 
> 时间：2013-02-02T08:33:53.117
> 
> 标签：wmic

Windows 任务管理器的“进程”选项卡显示了几列信息，其中之一是拥有该进程的用户的用户名。
使用命令 WMIC 进程（来自管理员启动的 cmd.exe）为我提供了相同类型的信息，但我找不到任何用户名列。如何找出哪个用户使用 WMIC 启动了该过程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T14:04:01.613

可以在 win32_process 类实例上使用 GetOwner 方法检索所有者。我建议为此使用 PowerShell，它非常简单：

```
Get-WmiObject -Class Win32_Process | 
    Select-Object Name, @{ 
        Name = 'Owner'
        Expression = { 
            $_.GetOwner().User 
        }
    } 
```

如果您必须使用 wmic，则可以通过混合以下结果来破解：

```
wmic process get Name 
```

...`call GetOwner`例如：

```
@echo off
echo Domain\User,Machine,ProcessName,ProcessID,WorkingSetSize
(for /f "skip=2 tokens=2 delims=, eol= " %%P in ('wmic process get ProcessId /format:csv') do @call :AddOwner %%P) 2> nul
goto :EOF

:AddOwner
SET Process=%1
(for /f "skip=5 tokens=1,2 delims==; " %%O in ('wmic process WHERE ProcessID^=%Process% Call GetOwner') do @call :BuildOwner %%O %%P) > nul
for /f "skip=1 tokens=* eol= " %%L in ('wmic process WHERE ProcessID^=%Process% GET Name^, ProcessID^, WorkingSetSize /format:csv') do @SET INFO=%%L
echo %DOMAIN%\%USER%,%INFO%
goto :EOF

    :BuildOwner
    SET PARAM=%1
    SET VALUE=%~2
    IF [%PARAM%]==[Domain] SET DOMAIN=%VALUE%
    IF [%PARAM%]==[User] SET USER=%VALUE%
    goto :EOF 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-05T04:14:26.263

要获取所有*taskeng.exe*进程（单个任务的 Windows 任务计划程序进程）的所有者，请从“管理员”*命令提示符*窗口运行：

```
wmic process where "name='taskeng.exe'" call GetOwner 
```

# asp.net - 将字符串拆分为数据表

> ID：14660122
> 
> 赞同：0
> 
> 时间：2013-02-02T08:34:08.280
> 
> 标签：asp.net, regex, xml-parsing, c#-3.0, string-matching

我得到了航班预订网站的回复。我将此响应保存到一个字符串变量中，然后将此字符串拆分为字符，然后尝试将此输出保存在数据表中，但问题是数据格式不正确。

我得到了这个o / p：-

![在此处输入图像描述](../Images/85bd8f419f6c3a33dc72d200ebb1bffa.png)

需要像这样的o / p：-

![在此处输入图像描述](../Images/59ef625e808597d0c8e6e90967e074eb.png)

注意：- 我想将 J8 C7 D1 I0 S0 Y9 B9 添加到 M9 H9 Q9 K0 L0 U0 T0 E0 然后将结果字符串存储在单独的列中。这是我对客户理解的项目要求。

代码是： -

```
 protected void Button1_Click(object sender, EventArgs e)
 {
   string request = @" AN29MARLASJFK
        ** AMADEUS AVAILABILITY - AN ** JFK JOHN F KENNEDY.USNY       58 FR 29MAR 0000
        ** HI NEWLY RENOV HOL INN SOHO IS CENTRALLY LOC IN HEART OF
        ** NYC MOST VIBRANT NGHBORHD*SUBWAY 1 BLK TO BK >HAHINYC19B
        1   DL1348  J8 C7 D1 I0 S0 Y9 B9 /LAS 1 JFK 3  705A    258P  E0/738 9     4:53
                    M9 H9 Q9 K0 L0 U0 T0 E0
        2AA:BA8666  F7 AL J7 CL DL IL Y7 /LAS 1 JFK 8  820A    420P  E0/738  TR   5:00
                    B7 H9 K9 M9
        3   AA 264  F7 A0 P0 Y7 B7 H7 K7 /LAS 1 JFK 8  820A    420P  E0.738 9     5:00
                    M7 L3 W0 S0 V0 G0 N0 Q0 O0
        4   DL 092  J9 C9 D0 I0 S0 Y9 B9 /LAS 1 JFK 3 1145A    746P  E0/738 8     5:01
                    M9 H9 Q9 K0 L0 U0 T0 E0
        5   B6 194  Y7 E7 K7 H7 Q7 B0 L0 /LAS 3 JFK 5  136P    930P  E0.320 N     4:54
                    V0 R0 W0 M0 Z0 O0 U0 S0 P0
        6  :HA2500  F4 J4 P0 A4 Y4 W4 Q4  LAS 3 JFK 4  230P   1029P  E0.320 7TR   4:59
                    B4 N0 M0
        7   VX 260  J7 C5 D2 W7 Q3 Z2 Y7 /LAS 3 JFK 4  230P   1029P  E0.320 7     4:59
                    V7 B7 H7 E1 U0 M0 I0 L0 S0 N0
        8   DL1728  J9 C9 D9 I8 S4 Y9 B9 /LAS 1 JFK 3  445P   1239A+1E0/73H 8     4:54
                    M9 H9 Q2 K0 L0 U0 T0 E0
        9   DL 322  J9 C9 D9 I9 S9 Y9 B9 /LAS 1 JFK 3  950P    541A+1E0/73H 9     4:51
                    M9 H9 Q9 K1 L0 U0 T0 E0
        >";

    DataTable ds = new DataTable();
    DataRow dr=null;

    ds.Columns.Add("A", typeof(string));
    ds.Columns.Add("B", typeof(string));
    ds.Columns.Add("C", typeof(string));
    ds.Columns.Add("D", typeof(string));
    ds.Columns.Add("E", typeof(string));
    ds.Columns.Add("F", typeof(string));
    ds.Columns.Add("G", typeof(string));
    ds.Columns.Add("H", typeof(string));
    ds.Columns.Add("I", typeof(string));
    ds.Columns.Add("J", typeof(string));
    ds.Columns.Add("K", typeof(string));
    ds.Columns.Add("L", typeof(string));

    int startindex = request.IndexOf(" 1  ");

    request = request.Substring(startindex - 1);
    var respArray = request.Split(new char[] { '\t', '\r', '\n' });

    foreach (string value in respArray)
    {
        dr = ds.NewRow();

      var tokens = value.Split(new[] { @"   " }, StringSplitOptions.RemoveEmptyEntries);

        ds.Rows.Add().ItemArray = tokens.Where((t, i) => i != 12).ToArray();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:46:40.543

Here you should use string operation and regular expression. I solved your problem. Please run my code and let me know if you have any doubt.

```
 int startindex = request.IndexOf(" 1  ");
    request = request.Substring(startindex - 1); //Remove the special character line from the input

    string subs;

    while (request.Trim() != ">") // Here we create the loop for execute whole string.
    {           
            int r1 = request.IndexOf("\r", 3);
            subs = request.Substring(0, r1); // Here we take the first line of the input.
            dr = dt.NewRow(); // Here we create the new row for each line.

            MatchCollection m1 = Regex.Matches(subs, @"\w{3}\s\d"); // Take the LAS 1 character from the line for merging the seat availability classes value.
            string origin = m1[0].Value; // Here we assign the origin city name to string variable.
            string destination = m1[1].Value; // Here we assign the destination city name to string variable.
            int end = subs.IndexOf(origin);
            int start = end - 1;

            dr["Origin"] = origin; // Here we bind the origin city name to data column.
            dr["Destination"] = destination; // Here we bind the destination city name to data column.

            request = request.Substring(subs.Length); // Here requset variable contain the substring after the took of first line for processing.
            r1 = request.IndexOf("\r\n", 3); // Here we are taking the index of second line.

            string replace = request.Substring(3, r1).TrimStart();

            string result = subs.Substring(0, start) + replace + subs.Substring(end); // here we merge the seat availability classes value.

            Regex regex = new Regex(@"(\s(\w\w\s){2,})"); // Here we create the regular expression for seat availability classes. 
            Match match1 = regex.Match(result);

            dr["COS"] = match1.ToString(); // Here we bind the seat availability classese to data column.
            dr["Segment"] = result.Substring(0, result.IndexOf(match1.ToString()) - 2); // Here we bind the Segments to data column.

            subs = result;
            start = subs.IndexOf(destination);
            dr["Details"] = subs.Substring(start + 5); // Here we bind the further(timing details) details of flight to data column.
            dt.Rows.Add(dr); // Here we are binding whole rows to data table. 

            request = request.Substring(r1); // requset variable contains the remaining substring.

    }

    GridView1.DataSource = dt;
    GridView1.DataBind(); // Here we are binding the whole data table to GridView.
    dt.Dispose(); // Here we dispose the datatable and free the memory. 
```

# php - 如何在 Linux Fedora 上的 Apache 中启用 PHP？

> ID：14660125
> 
> 赞同：9
> 
> 时间：2013-02-02T08:34:41.863
> 
> 标签：php, linux, apache, fedora

标题几乎概括了它。我正在运行**Fedora 18 64 位**，并通过“httpd”安装了 Apache。我的 Apache 运行良好，但我的 PHP 似乎无法正常工作。我相当确定我的机器上确实安装了它（Linux 新手）。

我在`/var/www/html/`包含代码的目录中创建了一个“test.php”文件：`<?php phpinfo(); ?>`但它没有按应有的方式显示，它只是将文本打印到我的浏览器。

所以我认为 PHP 没有在我的 Apache 配置或其他东西中设置。有人可以对此有所了解并就如何使其发挥作用提出一些建议吗？

提前致谢！

编辑，这是我的 httpd.config 文件：

```
ServerRoot "/etc/httpd"
Listen 80
Include conf.modules.d/*.conf
User apache
Group apache
ServerAdmin root@localhost

<Directory />
   AllowOverride none
   Require all denied
</Directory>

DocumentRoot "/var/www/html"

<Directory "/var/www">
   AllowOverride None    
   Require all granted
</Directory>

<Directory "/var/www/html">
   Options Indexes FollowSymLinks
   AllowOverride None
   Require all granted
</Directory>

<IfModule dir_module>
   DirectoryIndex index.html
</IfModule>

<Files ".ht*">
   Require all denied
</Files>

ErrorLog "logs/error_log"
LogLevel warn

<IfModule log_config_module>

   LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
   LogFormat "%h %l %u %t \"%r\" %>s %b" common

   <IfModule logio_module>
     LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" %I %O" combinedio
   </IfModule>

   CustomLog "logs/access_log" combined
</IfModule>

<IfModule alias_module>
   ScriptAlias /cgi-bin/ "/var/www/cgi-bin/"
</IfModule>

<Directory "/var/www/cgi-bin">
   AllowOverride None
   Options None
   Require all granted
</Directory>

<IfModule mime_module>
   TypesConfig /etc/mime.types
   AddType application/x-compress .Z
   AddType application/x-gzip .gz .tgz
   AddType text/html .shtml
   AddOutputFilter INCLUDES .shtml
</IfModule>

AddDefaultCharset UTF-8
MIMEMagicFile conf/magic
EnableSendfile on
IncludeOptional conf.d/*.conf 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-02T08:38:11.857

1.  `yum install php`
2.  重启阿帕奇。
3.  再试一次。

PHP 需要自己安装。它不是一个无需先安装 PHP 就可以简单启用的 apache 模块。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-02T08:39:12.730

您可能有一些问题，其中之一是您没有为 Apache 定义“.php”索引

像这样

```
<IfModule mime_module>
   AddType text/html .php .phps
</IfModule> 
```

请参阅本教程[安装 Apache 和 php](http://www.if-not-true-then-false.com/2010/install-apache-php-on-fedora-centos-red-hat-rhel/)

并[安装 Apache 和 php](http://www.howtoforge.com/installing-apache2-with-php5-and-mysql-support-on-fedora-18-lamp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T08:47:42.320

我通过重新安装 httpd 和 php 解决了这个问题。然后php文件正在执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-10T17:00:27.817

自从这个原始问题及其答案出现以来，已经发生了很大变化。从 Fedora 32 和 Apache (httpd) 2.4.46 开始，

> mod_php 已弃用，因为 FPM 现在在事件模式下默认与 httpd 一起使用。mod_php 仅在显式启用或 httpd 切换到 prefork 模式时使用

（[原文如此]来自`/etc/httpd/conf.d/php.conf`）

换句话说，mod_php 不再启用；如果您想在 Fedora 下使用 Apache 的 PHP，请安装 php-fpm，它默认启用为 *.php 文件的处理程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-11T02:00:13.357

显然，PHP 是作为一个包安装的，但通过 apache 的一个模块进行解释：即；mod_php。这有点猜想，我刚刚发现它是一种嵌入 HTML 的方法。

# c++ - 调用模板类的构造函数

> ID：14660128
> 
> 赞同：0
> 
> 时间：2013-02-02T08:34:56.450
> 
> 标签：c++, templates

我有一个容器类，它有一个预分配的缓冲区。我正在调用 memset() 以使用预分配的内存来创建我的对象。由于我没有使用 new，所以没有调用构造函数。

这是添加功能的简化版本

```
 template<typename T>
 T* CContainer<T>::Add()
 {
memset(&m_pBuffer[index],0,index);
T* pReturnValue = reinterpret_cast<T*> ( &m_pBuffer[index] );

return pReturnValue;
 } 
```

调用模板类 T 的构造函数的任何方式。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T08:48:59.947

要在现有内存中调用对象的构造函数，请使用[placement new](http://www.drdobbs.com/cpp/calling-constructors-with-placement-new/232901023?pgno=2)。

在您的情况下，在 return 语句之前添加这一行：

```
new (pReturnValue) T; 
```

要销毁实例，请显式调用析构函数：

```
pReturnValue->~T(); 
```

# forms - 如何防止屏幕表格移动

> ID：14660129
> 
> 赞同：1
> 
> 时间：2013-02-02T08:35:21.967
> 
> 标签：forms, delphi, helper, messages

我使用以下帮助程序来防止屏幕移动表单，并且大部分时间都可以正常工作。但是，如果我在 MDI 应用程序中打开一个 wsNormal 表单，那么该表单可能会显示它应该在的区域。然后我可以稍微移动它，然后这里的单元接管并将其移动到位。我现在的问题是：我怎样才能防止这种情况发生，或者向表格发送消息说它正在移动，以便她的单位可以完成工作。

```
unit U_FormsMove;

interface

uses
  Messages, Windows, Forms;

{$M+}

type
  TForm = class(Forms.TForm)
  private
  protected
    procedure WMMoving(var message : TWMMoving); message WM_MOVING;
  published
  public
  end;

implementation

function GetMovementArea: TRect;
var
  MovementRect: TRect;
begin
  if Application.MainForm.FormStyle = fsMDIForm then
    Windows.GetWindowRect(Application.MainForm.ClientHandle, MovementRect)
  else
    SystemParametersInfo(SPI_GETWORKAREA, 0, @MovementRect, 0);
  if MovementRect.Top < 150 then
    MovementRect.Top := 150;
  MovementRect.Top := MovementRect.Top + 5;
  MovementRect.Left := MovementRect.Left + 5;
  MovementRect.Right := MovementRect.Right - 5;
  MovementRect.Bottom := MovementRect.Bottom - 5;
  Result := MovementRect;
end;

{ TFormHelper }
procedure TForm.WMMoving(var Message: TWMMoving);
var
  rec: ^TRect;
  wrk: TRect;
begin
  wrk := GetMovementArea;
  rec := Pointer(Message.DragRect);
  if rec^.Left < wrk.Left then
    begin
      rec^.Right := rec^.Right - (rec^.Left - wrk.Left);
      rec^.Left := wrk.Left;
    end
  else if rec^.Right > wrk.Right then
    begin
      rec^.Left := rec^.Left - (rec^.Right - wrk.Right);
      rec^.Right := wrk.Right;
    end;
  if rec^.Top < wrk.Top then
    begin
      rec^.Bottom := rec^.Bottom - (rec^.Top - wrk.Top);
      rec^.Top := wrk.Top;
    end
  else if rec^.Bottom > wrk.Bottom then
    begin
      rec^.Top := rec^.Top - (rec^.Bottom - wrk.Bottom);
      rec^.Bottom := wrk.Bottom;
    end;
end;

end. 
```

# javascript - Sencha extjs4.0：无法加载 GmapPanel

> ID：14660131
> 
> 赞同：0
> 
> 时间：2013-02-02T08:35:47.743
> 
> 标签：javascript, ajax, extjs, extjs4

```
Ext.Loader.setConfig({enabled: true});
Ext.Loader.setPath('Ext.ux', '../ux');
Ext.require([
    'Ext.window.*',
    'Ext.ux.GMapPanel'
]);

Ext.onReady(function() {
    var myMask = new Ext.LoadMask(Ext.getBody(), {msg:"Please wait..."});
        myMask.show();

        var layout = Ext.create('Ext.panel.Panel', {
            //renderTo: 'layout',
            width: window.innerWidth,
            height: window.innerHeight,
            //title: 'Border Layout', //no title will be blank
            layout: 'border',
            items: [{
                title: 'Message List',
                region: 'south',     // position for region
                xtype: 'panel',
                height: 100,
                split: true,         // enable resizing
                collapsible: true,
                margins: '0 5 5 5',
                collapsed: true
            },{
                //title: 'Map',
                region: 'center',    
                xtype: 'gmappanel',
                center: {geoCodeAddr: '4 Yawkey Way, Boston, MA, 02215-3409, USA',marker: {title: 'Fenway Park'}}
            }],
            renderTo: Ext.getBody() //get the body and display Layout at there
        }); 
        myMask.hide();
}); 
```

## 问题

1.  为什么无法加载 gmappanel？

2.  我试图显示加载掩码，当页面完成加载时只删除加载掩码？怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:22:26.720

```
region: 'center',     // center region is required, no width/height specified
                xtype: 'gmappanel',
                id : 'mygooglemap',
                mapConfOpts: ['enableScrollWheelZoom','enableDoubleClickZoom','enableDragging'],
                mapControls: ['GSmallMapControl','GMapTypeControl','NonExistantControl'],   
                zoomLevel: 2,
                gmapType: 'map',
                center: {geoCodeAddr: 'Malaysia'} 
```

试试这个代码是否适用于你。

# linux - 从内核模块与驱动程序通信

> ID：14660132
> 
> 赞同：0
> 
> 时间：2013-02-02T08:35:53.250
> 
> 标签：linux, driver, system-calls, kernel-module

我想与内核模块中的驱动程序（/dev 设备）通信。我有一个应用程序和一些与之关联的内核模块。从我想读取和写入驱动程序的最低 KM。我应该怎么办？我读过从 KM 写入和读取文件不是一个好的选择。还有其他方法吗？我可以使用驱动程序的头文件吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T08:46:39.133

如果驱动程序导出函数（例如 via `EXPORT_SYMBOL`），您可以简单地从您自己的模块中调用这些函数。

# sharepoint - 是否可以在 Sharepoint 2010 中更改全局导航的位置？

> ID：14660133
> 
> 赞同：0
> 
> 时间：2013-02-02T08:35:56.823
> 
> 标签：sharepoint, sharepoint-2010

是否可以在 Sharepoint 2010 中更改全局导航的位置？

将其从顶部链接更改为标题和导航栏。

# vaadin - 尝试 vaadin jpacontainer 示例时出错

> ID：14660135
> 
> 赞同：0
> 
> 时间：2013-02-02T08:36:09.070
> 
> 标签：vaadin

我收到 `java.lang.NoClassDefFoundError: com/vaadin/data/util/converter/Converter$ConversionException` 错误。我将`Person`类作为实体，我的应用程序类是这样的：

```
public class SimplejpaApplication extends Application  {

    @Override
    public void init() {
        // TODO Auto-generated method stub
        VerticalLayout layout = new VerticalLayout();
        JPAContainer<Person> persons =
        JPAContainerFactory.make(Person.class, "book-examples");
        persons.addEntity(new Person("Marie-Louise Meilleur", 117));
        Table personTable = new Table("The Persistent People",persons);
        layout.addComponent(personTable);

        setMainWindow(new Window("simple",layout));
    } 
```

我正在使用**vaadin-jpacontainer-agpl-3.0-3.0.0-alpha2.jar** 有人能说出为什么会发生这个错误吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:15:47.333

[转换器](http://vaadin.com/download/prerelease/7.0/7.0.0/7.0.0.alpha2/docs/api/com/vaadin/data/util/converter/Converter.html)类来自 Vaadin 7，但您使用的是 Vaadin 6。对于 Vaadin 6，您需要使用 vaadin-jpacontainer-agpl-3.0-2.1.0。

或者，您可以将项目升级到 Vaadin 7 并使用 vaadin-jpacontainer-agpl-3.0-3.0.0-alpha2.jar。

这两个 jar 文件都可以从 Vaadin 附加页面[https://vaadin.com/directory#addon/vaadin-jpacontainer](https://vaadin.com/directory#addon/vaadin-jpacontainer)下载。

# javascript - 如何即时获取可编辑圆形 Google Map Api V3 的半径？是否可以？

> ID：14660145
> 
> 赞同：1
> 
> 时间：2013-02-02T08:37:43.560
> 
> 标签：javascript, google-maps-api-3, overlay

```
 var sunCircle = {
    strokeColor: "#c3fc49",
    strokeOpacity: 0.8,
    strokeWeight: 2,
    fillColor: "#c3fc49",
    fillOpacity: 0.35,
    map: map,
    center: userPosition,
    radius: 1000, // in meters
    editable:true
};
cityCircle = new google.maps.Circle(sunCircle);
cityCircle.bindTo('center', marker, 'position'); 
```

现在它的 Editable 是真的我们可以编辑圆，如果用户改变半径，我能得到半径吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T08:47:28.267

```
google.maps.event.addListener(cityCircle, 'radius_changed', function () {
    console.log(cityCircle.getRadius());
}); 
```

[您可以在此处](https://developers.google.com/maps/documentation/javascript/overlays#user_editable_shapes_events)找到有关编辑事件的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-14T05:23:52.450

在 React 中，我们可以使用 ref

第 1 步：从反应库中导入 useRef

```
import React, { useRef } from 'react'; 
```

第 2 步：在反应组件中创建 refCircle 变量

```
let refCircle = useRef(null); 
```

第 3 步：在 react 组件中创建 handleCircleRadius

```
const handleCircleRadius = () => {
  console.log('New Radius', refCircle.getRadius());
}; 
```

STEP 4：在圆形组件内使用 ref 和 handleCircleRadius 方法

```
<Circle
  ref={(ref) => (refCircle = ref)}
  defaultCenter={{
    lat: parseFloat(12),
    lng: parseFloat(12),
  }}
  defaultEditable={true}
  radius={parseFloat(1000)}
  center={{
    lat: parseFloat(12,
    lng: parseFloat(12),
  }}
  onRadiusChanged={handleCircleRadius}
  options={{ strokeColor: '#ff0000' }}
/> 
```

注意：此循环方法从`react-google-maps`库中导入

图书馆链接：[https ://www.npmjs.com/package/react-google-maps](https://www.npmjs.com/package/react-google-maps) [![在此处输入图像描述](../Images/9509ed242068d4b817aba89050e8bbb7.png)](https://i.stack.imgur.com/yF0MP.png)

**输出** [![在此处输入图像描述](../Images/9f29c07b04b5a6d9efb0fa52e829365e.png)](https://i.stack.imgur.com/2m5Xl.png)

# html - HTML/CSS - 打印、背景颜色和图像的样式不会在 IE 和 Firefox 中显示？

> ID：14660148
> 
> 赞同：6
> 
> 时间：2013-02-02T08:38:10.183
> 
> 标签：html, css, printing-web-page

我如何在打印时显示背景颜色和图像，我知道这是浏览器属性，但我想从 CSS 完成它，比如我用于 webkit `-webkit-print-color-adjust: exact;`，所以我该如何实现它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-02T09:42:11.097

不，这是不可能的，请参阅：**[-webkit-print-color-adjust](https://developer.mozilla.org/en-US/docs/CSS/-webkit-print-color-adjust)**

该`-webkit-print-color-adjust`属性是一个非标准的 CSS 扩展，可用于在基于 WebKit 引擎的浏览器中强制打印背景颜色和图像。

Firefox 或 IE 没有这样的解决方案。

唯一的解决方案是手动取消选中打印对话框中的*“打印背景颜色”*复选框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-05T14:25:26.007

[Google Maps](http://maps.google.com)和[Bing Maps](http://www.bing.com/maps)使用 CSS hack，涉及非常大的表格单元格边框和负边距。大多数其他网站尚未实施此黑客攻击。

我找不到任何关于如何重新创建它的文档，但是，如果读者愿意仔细查看其中任何一个站点上打印输出的 DOM，她/他会找到绕过这些限制的方法。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-02T08:47:57.423

使用 CSS @media 为不同设备设置样式

**@media print** 用于打印机

**@media screen** 用于电脑屏幕

* * *

**一些简单的读数如下**

[http://www.w3schools.com/css/css_mediatypes.asp](http://www.w3schools.com/css/css_mediatypes.asp)

[https://developer.mozilla.org/en-US/docs/CSS/@media](https://developer.mozilla.org/en-US/docs/CSS/@media)

# php - php单击链接以显示基于通过jquery post()发送的ID的地图

> ID：14660155
> 
> 赞同：1
> 
> 时间：2013-02-02T08:39:00.183
> 
> 标签：php, jquery, mysql, post

我的 post() 结果只显示其他 map.php 生成的数据，但无法显示地图框。我正在通过 post() 发送 id，它显示了来自 mysql 数据库的确切 php 数据。只有地图 div 是空的。以下是代码。

```
$(document).ready(function() {
    $(".mylink").click(function(){
        var $linkattr = $(this).attr("rel");
//      alert($linkattr);
        $.post("map.php", {myid:$linkattr}).done(function(data) {
            $("#mapcomeshere").html(data);
            evt.preventDefault();
        });
    });
}); 
```

我的 map.php 脚本是

```
<?php
include('db.php');

$myid = "25";//$_POST['myid'];
$result = mysql_query("select * from property Where Id = '" . $myid ."' AND status = 1");
$row = mysql_fetch_array($result);
echo $row['Id'] . " : " . $row['owner'] . " : " . $row['lnglat'] . $row['propertyadd']  ."<br>";

$maploc = $row['lnglat'];
$myadd = $row['propertyadd'];
?>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
  google.maps.event.addDomListener(window, 'load', function() {
    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 13,
      center: new google.maps.LatLng(24.893379,67.028061),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var infoWindow = new google.maps.InfoWindow;

    var onMarkerClick = function() {
      var marker = this;
      var latLng = marker.getPosition();
      infoWindow.setContent('<?php echo $myadd ?>');

      infoWindow.open(map, marker);
    };
    google.maps.event.addListener(map, 'click', function() {
      infoWindow.close();
    });

    var marker1 = new google.maps.Marker({
      map: map,
      position: new google.maps.LatLng(<?php echo $maploc ?>)
    });

    google.maps.event.addListener(marker1, 'click', onMarkerClick);
  });
</script>
hi
<div id="map"></div> 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T08:59:41.110

我可以建议几件事。

首先，您的代码中有一个概念性问题，您在其中编写：

```
 infoWindow.setContent('<?php echo $myadd ?>'); 
```

您需要了解 PHP 是在服务器上处理的，因此无法通过这种方式直接由 JavaScript 执行。这样做的目的是将 infoWindow 的内容从字面上更改为 '<?php echo $myadd ?>'。

现在至于您的问题，我认为您通过 AJAX 响应返回所有代码以错误的方式处理它。JavaScript 应该存在于页面中，map.php 应该只返回数据，可能是 JSON 数据的形式，例如：

地图.php：

```
// ... database stuff, then finally:
echo json_encode(array(
    'map' => array(
        'lat' => 67.028061,
        'long' => 24.893379,
        'zoom' => 13
    ),
    'infoWindowContent' => $myadd,
    //... etc
)); 
```

该 JavaScript 的其余部分属于对 $.post() 的回调。

```
 $.post("map.php", {myid:$linkattr}).done(function(data) {
        // Not this: $("#mapcomeshere").html(data);
        google.maps.event.addDomListener(window, 'load', function() {
            var map = new google.maps.Map(document.getElementById('map'), data.map);
            // ... setup event handlers, etc ...
        });
    }); 
```

它的作用是为您的代码提供更简洁的 API。map.php 的职责只是为地图提供数据，而不是 JavaScript。JavaScript 都在一个地方。

# android - 如何连接wii平衡板和android

> ID：14660159
> 
> 赞同：5
> 
> 时间：2013-02-02T08:39:26.130
> 
> 标签：android, wiimote, wii, wii-balanceboard

Wii平衡板如何与安卓连接？

android中是否有任何有用的库以及如何使用它？

我现在的目标是将它连接在一起并可以从中接收数据。

我是安卓和蓝牙开发的新手

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T20:53:27.130

我发现这个答案很有用：[Android 设备是否可以从 wii 控制器和双节棍读取信息？](https://stackoverflow.com/a/9669315/383414)（以下引用感谢@Ben Mordue）

> 看看这个开源项目： [http ://code.google.com/p/android-bluez-ime/](http://code.google.com/p/android-bluez-ime/)

* * *

## 更新：

我首先在 Galaxy Nexus 上安装了 APK 文件，它可以工作。我已经从 repo 中检查了代码，它构建得很好，而且相对容易理解。

它有 3 个项目 - 要使用 Wiimote，您需要安装所有 3 个项目。该标志仅用作允许服务尝试 Wiimote 的标志（考虑到并非所有 ROM 都支持该级别的 HID 交互）。

* * *

我还在 WiiBrew.org 上找到了这些资源：

*   [http://wiibrew.org/wiki/Wiimote](http://wiibrew.org/wiki/Wiimote)

*   [http://wiibrew.org/wiki/Wii_Balance_Board](http://wiibrew.org/wiki/Wii_Balance_Board)

我使用 Wiimote 链接来了解 Bluez-IME 代码。

* * *

## 更新 2：

昨晚我让开发板与我的 Android 手机正确通信。我从上面链接的 Bluez-IME 代码开始，然后根据 wiibrew.org 信息对其进行修改。

诀窍是平衡板就像一个带有扩展的wiimote。所以它就像一个 Nunchuk 或经典控制器，但只是使用不同的设备 ID 来查找。

对于我最初的演示，我只是搜索了所有使用 Nunchuk 的代码，并将其复制为平衡板。然后根据 wiibrew 平衡板页面初始化 MODE 以使用通道 0x32。

* * *

## 更新 3：

我刚刚在商店里偶然发现了这个应用程序：[FitScales](https://play.google.com/store/apps/details?id=eu.paulburton.fitscales)

并且开发者已经在 github 上分享了他的代码：[paulburton / fitscales](https://github.com/paulburton/fitscales)

# c++ - 如何处理犰狳中“查找”的空返回？

> ID：14660165
> 
> 赞同：0
> 
> 时间：2013-02-02T08:40:19.530
> 
> 标签：c++, armadillo

我有一个`ivec C1`并且做了，说，`sum( C1.elem(find( C1==1 )) )`。

如果没有元素为 1，我希望得到零回报`C1`，但它给了我一个错误，说**Mat::elem(): given object is not a vector**。

我尝试使用`(find(C1==1)).is_empty()`，但这没有被接受，因为它告诉我它没有提供`is_empty`返回`find`. 然后我尝试`conv_to<uvec>::from(find(C1==1))`但是当`C1`它确实是空的时它不允许这样的转换。

任何人都可以帮我解决这个问题吗？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:37:02.293

以下代码应该可以解决此问题。改变：

```
sum( C1.elem( find(C1==1) ) ) 
```

至：

```
sum( C1.elem( uvec(find(C1==1)) ) ) 
```

空向量的 sum() 输出应为零。

# selenium-webdriver - 在 selenium webdriver 中处理动态生成的 id

> ID：14660170
> 
> 赞同：0
> 
> 时间：2013-02-02T08:40:57.960
> 
> 标签：selenium-webdriver

我正在尝试自动测试包含项目列表的网页。用户输入项目被选中并被删除。在这里，我需要选择 VD2 并删除该项目。

```
<div id="virtual_domains-content">
    <div class="columns">
        <div class="left-column">
            <h2>Virtual Domains</h2>
                <div class="search-row">
                    <div class="box scrolling list-editable">
                        <div id="virtual_domains-list" class="list-view">
                            <div id="virtual_domains-list-11" class="list-item-view">
                                <div class="content"> VD1 </div>
                            </div>
                            <div id="virtual_domains-list-35" class="list-item-view">
                                <div class="content"> VD2 </div>
                            </div>
                        </div>
                    </div> 
```

我从下面的代码中得到的列表只有第一个元素 - VD1。第二个元素没有被捕获。有人可以帮我解决问题吗

```
List<WebElement> list = webdriver1.findElements(By.xpath("//*[starts-with(@id,'virtual_domains-list-')]"));
for(WebElement option : list){
    System.out.println(option.getText());
    if(option.getText().equals("VD1")) {
        option.click();
        break;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T20:07:01.563

在处理随机生成的 ID 时，我不建议在您的 xpath 定义中使用它们。尝试以下类似的方法，在其中使用类并从树的顶部开始以获得更可靠的 xpath。

```
String items = "//div[@id="virtual_domains-content"]/div[@class="columns"]/div[@class="search-row"]/div[@class="box scrolling list-editable"]/div[@class="list-view"]//div[@class="list-item-view"]"

List<WebElement> e = driver.findElements(By.xpath(items)); 
```

这将为您提供所有 VD 的列表，然后您可以执行类似的操作

```
String item;
Int listItem = 0;
for(WebElement i : e){
    item = "(//div[@id="virtual_domains-content"]/div[@class="columns"]/div[@class="search-row"]/div[@class="box scrolling list-editable"]/div[@class="list-view"]/div[@class="list-item-view"])[i]" 
    e.get(listItem).findElement(By.xpath(i));
    ...
    ...
} 
```

您可能希望定义 i = 1 以开始循环，因为列表中的元素将从 1 开始，而不是从 0 开始的列表元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:55:34.053

In case of webelements with dynamic Ids, instead of going for Xpath with Ids we can go for other way of finding elements like 'by tagname', CSSlocator,.. it worked for me.

If You still want to use Xpath, You can get the dynamic name or id of the webelement from

```
driver.findelementsbytagname(). 
```

And use that in building Xpath.

Example:

```
List casereq_table = E.findElementByTagName("table");
tableid1 = tableid.getAttribute("id");
WebElement Certain = E.findElementByXPath("//*[@id='"+tableid1+"']/tbody/tr/td[10]");
certainity = Certain.getText(); 
```

Here, the dynamic table id is stored in a string variable, and it is used in the Xpath.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-27T05:42:22.977

在您发布的上面的代码中包含类名。那么，为什么不使用类名。

这是我的示例 python 代码，可以解决问题

```
options=driver.find_element_by_class_name("list-item-view")
     for option in options:
         if(option.text=="VD2")
             option.click() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-16T17:55:00.297

您应该能够使用相当简单的 Xpath By 定位器来找到它。

```
By.xpath("//div[@id='virtual_domains-list']//div[text()=' VD2 ']"); 
```

然后像任何其他元素一样单击它。

如果您不担心它位于“virtual_domains-list”div 中，您甚至可以只找到带有文本 VD2 的 div。

如果您对单击包含的 div 特别感兴趣，可以使用

```
By.xpath("//div[@id='virtual_domains-list']//div[text()=' VD2 ']/.."); 
```

使用尾随 /.. 表示获取该元素的父元素。

# javascript - 拖放、交换、Mysql

> ID：14660173
> 
> 赞同：1
> 
> 时间：2013-02-02T08:41:45.737
> 
> 标签：javascript, jquery, mysql, drag-and-drop

我阅读了很多与此类似的主题，但没有一个适用于 MySql 数据库（排序示例除外）

这是我能够在我的脚本（足球经理） [http://jsfiddle.net/k9854/中实现的示例](http://jsfiddle.net/k9854/)

```
jQuery.fn.swap = function(b){ 
    // method from: http://blog.pengoworks.com/index.cfm/2008/9/24/A-quick-and-dirty-swap-method-for-jQuery
    b = jQuery(b)[0]; 
    var a = this[0]; 
    var t = a.parentNode.insertBefore(document.createTextNode(''), a); 
    b.parentNode.insertBefore(a, b); 
    t.parentNode.insertBefore(b, t); 
    t.parentNode.removeChild(t); 
    return this; 
};

$( ".dragdrop" ).draggable({ revert: true, helper: "clone" });

$( ".dragdrop" ).droppable({
    accept: ".dragdrop",
    activeClass: "ui-state-hover",
    hoverClass: "ui-state-active",
    drop: function( event, ui ) {

        var draggable = ui.draggable, droppable = $(this),
            dragPos = draggable.position(), dropPos = droppable.position();

        draggable.css({
            left: dropPos.left+'px',
            top: dropPos.top+'px'
        });

        droppable.css({
            left: dragPos.left+'px',
            top: dragPos.top+'px'
        });
        draggable.swap(droppable);
    }
}); 
```

一切都很好，当我更改播放器（拖放和交换）时，但是，当我刷新页面时，我的新播放器排序丢失了。

如何将此示例与 mysql 数据库一起使用？或者是否有任何适用于 mysql 数据库的示例？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:06:27.227

我设法获得了可拖动 div 的 id

```
var drag = $('.ui-draggable').attr('id'); 
```

但是如何获取（目标）交换的 div 的 id ？

# ios - 在 iOS 中打开随机播放模式时，NowPlayingItem 的索引是错误的

> ID：14660174
> 
> 赞同：2
> 
> 时间：2013-02-02T08:41:47.573
> 
> 标签：ios, cocoa-touch, shuffle, mpmediaitem

我现在正在播放从 iPod 库加载到 myArray 中的歌曲`iPodMusicPlayer`。

我们可以用来`indexOfNowPlayingItem`从 NowPlaying 音乐中获取索引。

但是当 i`Shuffle Mode`是时`on`，该`indexOfNowPlayingItem`属性的返回索引是完全错误的。

之前`ShuffleMode`是关闭的，`indexOfNowPlayingItem`可以使用并正确。

然而当`ShuffleMode`打开时，indexOfNowPlayingItem 计数仅增加 1 (++)。

像那样

```
indexOfNowPlayingItem++; 
```

不是正确的`ShuffleMode`。

那么当 ShuffleMode 开启时我怎样才能得到正确的索引呢？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T19:29:38.380

我的解决方案是当您设置播放列表时，还设置一个带有 (index, MPMediaEntityPropertyPersistentID) 播放列表的 NSMutableDictionary。

当您需要歌曲索引时，只需获取歌曲持久 id。

```
- (void) setPlaylistIndexDictionary:(MPMediaItemCollection *)playlistItems
{
    playlistIndexDict = [[NSMutableDictionary alloc] init];
    NSNumber *count = [[NSNumber alloc] initWithInt:0];
    for (MPMediaItem *item in [playlistItems items]) {
        [playlistIndexDict setObject:count forKey:[item valueForProperty:MPMediaEntityPropertyPersistentID]];
        count = [NSNumber numberWithInt:count.intValue + 1];
    }
}

- (NSString *) getCurrentSongId
{
    NSString* songId = [[musicPlayer nowPlayingItem] valueForProperty:MPMediaEntityPropertyPersistentID];

    return songId;
} 
```

使用：

```
NSString *songId = [musicController getCurrentSongId];
int songIndex = [[[musicController playlistIndexDict] objectForKey:songId] intValue]; 
```

# iphone - UIScrollView 如何自动包装内容？

> ID：14660178
> 
> 赞同：2
> 
> 时间：2013-02-02T08:42:06.433
> 
> 标签：iphone, ios, xcode, uiviewcontroller, uiscrollview

我拼命地试图为我的`UIScrollView`问题找到任何解决方案，我知道这个论坛有很多讨论，但我找不到任何合适的解决方案。

我的问题是我的`scrollview`. 所以我不知道标签有多长。我`scrollview`的高度为 615（在界面生成器中），如果我`scrollview`用这个高度初始化它，它就不会滚动。

所以我的问题是，在我从数据库中加载文本后，我怎么知道我的身高是多少？`ViewController`如果这对高度很重要，我还有一个导航栏和一个标签栏？

我的 viewcontroller 的结构如下所示： - NavigationController - ViewController - View - ScrollView - Label1 - Label2 - Label...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T08:57:25.097

您需要采取以下小步骤：

*   将您的滚动视图大小设置为不超过屏幕大小（即 (320, 480) 直到 iPhone 4 和 (320, 568) 对于 iPhone5），例如：

    ```
    CGSize screenSize = [[UIScreen mainScreen] bounds].size;
    UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, screenSize.width, screenSize.height)]; 
    ```

*   现在设置你的内容大小`scrollView`

    ```
    [scrollView setContentSize:CGSizeMake(320, heightOfAllSubViews + heightOfVerticalSpaces)]; 
    ```

    这里`heightOfAllSubViews`是所有标签和imageView`heightOfVerticalSpaces`的累积高度，是子视图之间所有垂直空间的累积高度。据我所知，这就是你这样做之后会很好的。

# php - 试图找出订阅月底通知

> ID：14660181
> 
> 赞同：0
> 
> 时间：2013-02-02T08:42:54.677
> 
> 标签：php, mysql, sql, date

嗨，我有这个 mysql 表

```
id    amount     substart  years   subend

1     200       2012-01-10   1    2013-01-09 
2     250       2012-02-15   2    2014-02-14 
3     100       2012-02-11   1    2013-02-10 
4     260       2012-03-22   3    2015-03-21 
```

我想要的是在结束日期前一个月发出通知。当前查询是：

```
select  count(subend) as count,curdate() 
from subdur  where  status='active' 
and (date_sub(subend,interval 1 month))>=curdate() 
and (date_sub(subend,interval 1 month))<date_add(curdate(),interval 1 month) 
order by subend; 
```

该查询没有给我正确的答案。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T08:49:43.817

试试这个：：

```
select  
count(subend) as count,
curdate() 
from subdur  
where  status='active' and 
subend BETWEEN (date_sub(curdate(),interval 1 month)) and curdate() 
order by subend 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T09:05:48.383

另一种方法是使用[`date_diff`](http://www.w3schools.com/sql/func_datediff_mysql.asp)：

```
select count(subend) as count, curdate() 
from subdur  
where  status='active' 
and date_diff(subend, curdate()) = 30 // >= 30 days or more, = 30 days exact
order by subend
; 
```

# dependency-injection - 温莎城堡和 LifestyleBoundTo(scopeRootBinder)

> ID：14660183
> 
> 赞同：4
> 
> 时间：2013-02-02T08:43:22.263
> 
> 标签：dependency-injection, castle-windsor, castle

我找不到任何使用 scopeRootBinder 的示例。我不确定它是否可以帮助我。这是问题（测试）。我需要使用自己的 Component2 实例构建 ChildService 的每个实例。

```
 [TestMethod]
    public void CastleContainer_ChildServices_GetItsOwnObject()
    {
        var container = new WindsorContainer();
        container.Register(Component.For<IRootService>().ImplementedBy<RootService>().LifestyleTransient()
                .DependsOn(ServiceOverride.ForKey("childServices")
                                                     .Eq("ChildService", "ChildService")));
        container.Register(Component.For<IChildService>().ImplementedBy<ChildService>().LifestyleTransient().Named("ChildService"));
        //nearest in 3.2 container.Register(Component.For<Component2>().ImplementedBy<Component2>().LifestyleBoundToNearest<IChildService>());
        //creates single instance of Component2 container.Register(Component.For<Component2>().ImplementedBy<Component2>().LifestyleBoundTo<ChildService>());

        Func<IHandler[], IHandler> scopeRootBinder = ScopeRootBinder;
        container.Register(Component.For<Component2>().ImplementedBy<Component2>().LifestyleBoundTo(scopeRootBinder));
        container.Register(Component.For<Component3>().ImplementedBy<Component3>().LifestyleTransient());

        var rs = container.Resolve<IRootService>();
        var first = rs.ChildServices[0];
        var second = rs.ChildServices[1];
        ReferenceEquals(first, second).Should().BeFalse();
        ReferenceEquals(first.Component2, second.Component2).Should().BeFalse("each child service should have its own Component2");
        ReferenceEquals(first.Component2, first.Component3.Component2).Should().BeTrue();
        ReferenceEquals(second.Component2, second.Component3.Component2).Should().BeTrue();
    }
    private IHandler ScopeRootBinder(IHandler[] handlers)
    {
        //not clear what should be here???
        var r = handlers.FirstOrDefault(h => h.ComponentModel.Services.Any(t => t.Name == "IChildService"));
        return r;
    } 
```

这是课程

```
public interface IRootService
{
    IChildService[] ChildServices { get; }
}

public class RootService : IRootService
{
    public RootService(IChildService[] childServices)
    {
        ChildServices = childServices;
    }

    public IChildService[] ChildServices { get; private set; }
}

public interface IChildService
{
    Component3 Component3 { get; }

    Component2 Component2 { get; }

}

public class ChildService: IChildService
{
    public ChildService(Component2 comp, Component3 comp3)
    {
        Component2 = comp;
        Component3 = comp3;
    }

    public Component3 Component3 { get; set; }

    public Component2 Component2 { get; set; }
}

public class Component3
{
    public Component3(Component2 comp)
    {
        Component2 = comp;
    }

    public Component2 Component2 { get; set; }
}

public class Component2
{
    private Guid _guid = Guid.NewGuid();
} 
```

# blackberry - 如何防止对话框在点击黑莓时自动关闭

> ID：14660191
> 
> 赞同：1
> 
> 时间：2013-02-02T08:45:09.517
> 
> 标签：blackberry, dialog

我正在开发一个应用程序，在其中创建一个带有编辑字段和保存/取消按钮的对话框，我在编辑字段上使用验证，我希望如果用户输入有效条目并单击保存，那么对话框应该关闭，但现在问题是当用户单击保存而不在编辑字段中输入任何文本对话框会自动关闭，我想在输入有效输入对话框后阻止它应该关闭。

我给取消按钮以放弃对话框。

请帮助..如何实现这一点............

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T06:22:01.807

```
 mOKButton.setChangeListener(new FieldChangeListener() {
            public void fieldChanged(Field f, int arg1) {
                if(_editText.getText()=="")
                              {
                             // do nothing 
                               }
                                 else{ 
                _editText.setText(items[getSelectedIndex()]);
                close();
                             } 
            }
        }); 
```

# javascript - 使用 javascript 在 iF rame 中模拟浏览

> ID：14660195
> 
> 赞同：0
> 
> 时间：2013-02-02T08:46:21.593
> 
> 标签：javascript, jquery, iframe, javascript-events

我正在寻找一个可以嵌入到 iFrame 中的测试自动化框架，以描述和模拟浏览，这可能会被转换为 JQuery 模拟事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:50:44.673

您尝试做的事情既困难又不常见，而且有充分的理由。首先让我们来看技术方面。

## 处理您选择的解决方案：

我还没有想出任何可以做你想做的框架，但你可能想看看[如何在 iframe 和父站点之间进行通信的公认答案？](https://stackoverflow.com/questions/9153445/how-to-communicate-between-iframe-and-the-parent-site)- 你试图做的事情是相反的，但原理是一样的。本质上，除非您同时控制外部网站和内部网站，否则您很有可能无法实现您想要做的事情，即使那样，它也不适用于所有浏览器。

## 寻找更好的方法：

所以现在技术方面已经解决了，这就是问题的实质——你真的确定这是你想做的吗？具有不同解决方案的多个场景：

1.  您正在指导某人使用您控制的服务：

    创建页面的引导副本，内置交互 - 然后嵌入。

2.  您正在指导某人使用第三方服务：

    录制视频，您甚至可以包括画外音和隐藏式字幕来解释用户*为什么*必须做某些事情，以及哪些部分是可选的。这也适用于上述情况。

3.  您正在简化与您控制的服务的交互：

    这为您提供了选择 - 您几乎肯定不想嵌入页面，但想直接或通过 RESTful 接口使用后端。

4.  您正在简化与第三方服务的交互：

    RESTful 接口是你的朋友，如果服务有，如果没有，看看他们是否有任何其他类型的 API - 如果他们不联系他们，看看你是否可以解决问题。

那么你*真正想要解决*的问题是什么？

## 结束评论

面对技术问题时，通常很容易接受您提出的第一个解决方案，但请注意，它可能不是最好的。这并不是说你应该花无止境的时间来考虑如何解决每一个问题，但你可能应该在选择做什么之前至少再花几分钟考虑问题，如果你遇到困难，尝试一些事情不同的。

很可能您想不出任何其他可能解决您的问题的解决方案，而且您可能是对的，但是如果您无法使其正常工作，并且您来寻求帮助，请让人们知道是什么问题是您正在尝试解决，因为正如我发现的那样，总会有人更聪明；总有一些人，如果他们足够用力地眯着眼睛，以前会看到类似你的问题；总是有更好的方法来做到这一点，只是其他人可能还没有发现它。

# c# - 如何创建动态多维字符串数组

> ID：14660201
> 
> 赞同：-1
> 
> 时间：2013-02-02T08:46:43.790
> 
> 标签：c#, asp.net-mvc-3, linq

我正在使用三个表，我需要使用动态多维字符串数组从表中推送值

```
var i = 3    
var j;    
for(var j = 0; j < i.length; i++){    
var a =  ProjectContext.My_prj_project.Select(i => new 
        {                            
                            id = i.Prj_project_name_id            
        }).Count();

 var b = ProjectContext.My_prj_projects.Select(i => new
                        {
                            id = i.Prj_project_name_id
                        }).Count();

 var c = ProjectContext.My_prj_pro.Select(i => new
                        {
                            id = i.Prj_project_name_id    
                        }).Count();
} 
```

从这些表中，单个计数值应动态存储在字符串数组中，我正在尝试使用以下语法：

```
List<List<string>> twoDimensional = new List<List<string>>(); 
```

但它不起作用，所以请任何人都可以发送，我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:51:35.960

```
List<string> twoDimensional = new List<string>(); 
```

然后

```
twoDimensional.add(a);
twoDimensional .add(b);
twoDimensional .add(c); 
```

# javascript - 使用 $('selector').each() 修改和更新 DOM 元素的 html？

> ID：14660202
> 
> 赞同：2
> 
> 时间：2013-02-02T08:46:56.923
> 
> 标签：javascript, jquery, dom

我正在尝试在我的网站上的一堆链接中创建一个事件侦听器。这些链接是在一个循环中生成的，所以我最终得到了`<a class = "replyButton" id = "replyID"<? echo $x; ?>`etc。

我正在尝试使用下面的代码在单击每个相应链接时显示一个输入框，但没有运气。在一种情况下，我也可以使用纯 JS 使其工作，但不使用 JQuery，在这样的几个中推断。任何帮助都会非常棒。

```
window.onload = function(){

    $('.replyButton').each(function(index){
    var domElementId = "replyArea" + index;
    domElementId.onclick = function() {
    var replyFieldHtml = '<div class = "span4" id = "replyTextField"><table><tr><td id = "replyPhoto"><img src = "/assets/img/usr/profile_holder.jpg" /></td><td id = "replyContent"><input type = "text" id = "replyInput" onkeydown="if (event.keyCode == 13) wallReply()" placeholder = "leave a reply..." /></td></tr></table></div>';  
    document.getElementById('domElementId').innerHTML = replyFieldHtml;
    console.log('domElementId');
    return false;
    }
}); 
} 
```

编辑：这是我用来生成 html 的循环... $x = 0; 而 ($x < 8){ $x++; $r = $wallarray - $x;

```
$postContent = $wall_content['wall_posts'][$x-1];
$postUser = getUserNameById($wall_content['userID'][$x-1]);
?>

<div class = "row">
    <div class = "span6">
        <div class = "span1" id = "wallPhoto"><img src ="assets/img/usr/profile_holder.jpg></div>
        <div class = "span4">
            <div class = "span4" id = "wallFeedStyle"><a id = "wallUserLink" href = "#"><b><? echo $postUser; ?></b></a></div>
        <div class = "row">
            <div class = "span5">
                <div class = "span4" id = "userPost"><? echo $postContent; ?></br><p class = "wallsmall"><a href="#" id = "postLike"></i>Like</a> &middot;<a class = "replyButton" id = "replyButton<? echo $x; ?>" href="#"></i>Reply</a></p></div></div>
            </div>
            <div class = "row">
                <div class = "span5">
            </div>
        </div>  
        <div class = "row" id = "replyArea<? echo $x; ?>"></div>
</div>
<? 
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T08:51:37.323

您以错误的方式使用变量。尝试这个：

```
window.onload = function () {
    $('.replyButton').each(function (index) {
        var domElementId = "replyArea" + index;
        $('#' + domElementId).on('click', function () {
            var replyFieldHtml = '<div class = "span4" id = "replyTextField"><table><tr><td id = "replyPhoto"><img src = "/assets/img/usr/profile_holder.jpg" /></td><td id = "replyContent"><input type = "text" id = "replyInput" onkeydown="if (event.keyCode == 13) wallReply()" placeholder = "leave a reply..." /></td></tr></table></div>';
            $(this).html(replyFieldHtml);
            console.log(domElementId);
            return false;
        });
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T08:07:35.807

在深入挖掘了 .on() 和 .bind() 背后的历史之后，我最终使用下面的代码来解决这个问题。感谢你的帮助！

```
$('a.replyButton').on("click", function(){
var index = $(this).attr('id');

$('#replyArea'+index).html('<div class = "span4" id = "replyTextField"><table><tr><td id = "replyPhoto"><img src = "/assets/img/usr/profile_holder.jpg" /></td><td id = "replyContent"><input type = "text" id = "replyInput" onkeydown="if (event.keyCode == 13) wallReply()" placeholder = "leave a reply..." /></td></tr></table></div>');
}); 
```

我最终将“replyLink”ID 属性更改为数字。所以有一堆/<.a> 类replyButton，ID 属性为数字。而且它似乎做得很好，也不需要设置 .each() 循环。

# ios - 从 NSOperationQueue 取消 ASIHTTPRequest

> ID：14660207
> 
> 赞同：0
> 
> 时间：2013-02-02T08:47:54.670
> 
> 标签：ios, objective-c, asihttprequest, nsoperationqueue

我的问题是，每当我尝试取消`ASIHTTPRequest`添加的内容时`NSOperationQueue`，什么都没有发生，它会调用代表并且不会停止，我使用了以下代码：

`[request cancel];`

`[request clearDelegatesAndCancel];`

但似乎不起作用。

**我的代码：**

```
[operationQueue addOperationWithBlock:^{

    AsyncCallerClass *asyncClass=[[AsyncCallerClass alloc] init];
    DataSet *ds=[[DataSet alloc]init];
    asyncClass.MethodParameters=[[NSMutableDictionary alloc]init];
    asyncClass.req=cusRequest;
    asyncClass.mehtodName=@"testMethod";
    asyncClass.xmlNameSpace=@"http://test.org/";
    asyncClass.xmlURLAddress=@"http://myPC/service.asmx";
    NSMutableData *data;
    data=[asyncClass getDataFromWebService];
    [ds parseXMLWithData:data];

    NSMutableDictionary *Data_Dictionary=[[NSMutableDictionary alloc]initWithDictionary:[ds getRowsForTable:@"DataTable"] ];

    currRow=[Data_Dictionary objectForKey:@"0"];

}]; 
```

现在在 AsyncCallerClass 类

```
ASIHTTPRequest *myRequest = [ASIHTTPRequest requestWithURL:url];

[myRequest setRequestMethod:@"POST"];

[myRequest addRequestHeader:@"Content-Type" value:@"text/xml; charset=utf-8"];

[myRequest addRequestHeader:@"SOAPAction" value:self.SOAPActionURL];

NSString *messageLength = [NSString stringWithFormat:@"%d",[sRequest length]];

[myRequest addRequestHeader:@"Content-Length" value:messageLength];

[myRequest appendPostData:[sRequest dataUsingEncoding:NSUTF8StringEncoding]];

[myRequest setDelegate:self];

[myRequest setTimeOutSeconds:120];

[myRequest startSynchronous]; 
```

并取消它，我在 AsyncCallerClass 中调用一个方法

```
-(void) cancelMe:(NSOperationQueue*) myQueue  
{

[myRequest cancel];

[myRequest clearDelegatesAndCancel];

} 
```

# java - What is name of | operator in java

> ID：14660212
> 
> 赞同：3
> 
> 时间：2013-02-02T08:48:33.577
> 
> 标签：java, operators

In java 7 we can catch multiple exceptions at a time like

```
try {  
    Class a = Class.forName("wrongClassName");  
    Object instance = a.newInstance();  
} catch (ClassNotFoundException | IllegalAccessException |  
   InstantiationException ex) {  
   System.out.println("Failed to create instance");  
} 
```

Is this Bitwise Inclusive OR? Bitwise operators are used to compare binaries as far as I know in java. If it is not, then how java differentiates this operator with Bitwise Inclusive OR??

Just want to know the name of the operator used here and is this operator exists before java 7.

Any answer is appreciated. Thanks.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T08:51:02.050

It's valid since Java 7, and I call it a *pipe*.

The catch block itself is called a multi-catch block.

Depending on the context where it's used, this operator is a bitwise or, or a multi-catch operator. Just like in `(1 + 1)` the `+` is the addition operator, and in `"hello" + "world"`, the + is the concatenation operator.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-02T08:49:57.143

The [docs](http://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html) said:

> The catch clause specifies the types of exceptions that the block can handle, and each exception type is separated with **a vertical bar** (|).

This operator used as a [bitwise inclusive OR](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html) before Java 7\.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T09:40:11.937

It is unnamed (in this context)

> An exception parameter may denote its type as either a single class type or a union of two or more class types (called alternatives). The alternatives of a union are syntactically separated by |.

Reference: [Java Language Spec, Chapter 14.20](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.20)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T08:54:56.660

The operator exists as a (non short-circuit) OR operator before Java 7, which is probably why it was used here - you're catching one exception, OR the other, OR the other, etc.

# tcl - 使用 Tcl 命令在 Windows 7 中复制文件

> ID：14660219
> 
> 赞同：0
> 
> 时间：2013-02-02T08:49:37.760
> 
> 标签：tcl

如何在 windows-7 中使用 Tcl 命令？我想使用 .bat 文件将一个文件复制到其他位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T16:06:20.743

> 如何在 windows-7 中使用 Tcl 命令？

Windows（所有版本）从未预装过 Tcl 解释器，到目前为止，最简单的方法是安装[ActiveTcl](http://www.activestate.com/activetcl)的副本。

一旦你安装了它，要么以交互方式运行它并在提示符下输入你的 Tcl 命令，要么使用文本编辑器（如记事本）创建一个`.tcl`包含要执行的命令或命令的文件（通常带有扩展名）；您可能只需双击文件即可运行该文件。

> 我想使用 .bat 文件将一个文件复制到其他位置。

这与 Tcl 并没有太大关系。使用 Tcl，您将使用：

```
file copy {C:\Where\To\Copy\From.txt} {C:\Where\To\Copy.to} 
```

请注意，我们在这里将文件名放在`{`大括号中`}`，以便我们可以使用反斜杠；如果我们不这样做，我们需要使用双反斜杠 ( `\\`) 或正斜杠 ( `/`)。

如果您真的想使用`.bat`文件，另一种方法是查找 cmd.exe 命令`COPY`和（不太可能）`XCOPY`执行的操作。但这不是 Tcl 的问题。

# actionscript - 在 Flex 4 中将组件添加到自定义元素会删除样式。为什么？

> ID：14660221
> 
> 赞同：1
> 
> 时间：2013-02-02T08:49:40.607
> 
> 标签：actionscript, flex4, components

我有一个自定义组件`GlassSkin.mxml`：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
         xmlns:s="library://ns.adobe.com/flex/spark" 
         xmlns:mx="library://ns.adobe.com/flex/mx"
         xmlns:local="*" minHeight="20" minWidth="20">
    <fx:Metadata>
        [HostComponent("spark.components.SkinnableContainer")]
    </fx:Metadata>
    <s:states>
        <s:State name="normal" />
        <s:State name="disabled" />
    </s:states>
    <s:Rect left="0" right="0" top="0" bottom="0">
        <s:alpha>0.3</s:alpha>
        <s:radiusX>3</s:radiusX>
        <s:fill>
            <s:SolidColor>#000000</s:SolidColor>
        </s:fill>
    </s:Rect>
    <s:Group id="contentGroup" width="100%" height="100%" left="5" right="5" top="5" bottom="5"></s:Group>
</s:Group> 
```

在主 mxmm 内，我使用自定义组件，例如：

```
<local:GlassSkin width="600" height="400" horizontalCenter="0" verticalCenter="0">
Something...
</local:GlassSkin> 
```

它有效，`contentGroup`接收我在里面添加的每个元素。唯一的问题是没有添加自定义元素中指定的自定义图形元素。没有阴影，没有纯色，什么都没有。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T02:47:22.957

我发现。使用自定义组件并将数据传递给它，会删除 mxml 本身中的所有格式。我不知道为什么。

取而代之的是，我创建了一个简单的 SkinnableContainer，并将我的自定义组件用作 Skin。（将组重命名为 SparkSkin）

有了这个，我没有自定义组件，但我有一个皮肤，我可以在任何地方使用它。

*   加上生成的 swf 不知何故变小了。

# spring - Struts2 依赖注入

> ID：14660223
> 
> 赞同：1
> 
> 时间：2013-02-02T08:49:48.420
> 
> 标签：spring, spring-security, dependency-injection, struts2, struts2-spring-plugin

我目前正在使用带有 Struts2-spring 插件的 Struts2 创建 Web 应用程序。

这是我的 applicationContext.xml 的片段

```
<bean id="sessionFactory" scope="singleton"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="configLocation" value="classpath:hibernate.cfg.xml" />
    </bean>
    <!-- Springs Hibernate Transaction Manager -->
    <bean id="transactionManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>
    <tx:annotation-driven />
    <!-- Create DAO Objects -->
    <bean id = "userDao" class = "org.hitplay.users.dao.UserDao" scope = "singleton">
        <property name ="sessionFactory" ref = "sessionFactory" />
    </bean>
    <bean id = "adminDao" class = "org.hitplay.admin.dao.AdminDao" scope = "singleton">
        <property name ="sessionFactory" ref = "sessionFactory" />
    </bean>
    <bean id="authenticateLoginService" class="org.hitplay.services.AuthenticateLoginService" scope="singleton">
        <property name="userDao" ref="userDao" />
        <property name="adminDao" ref="adminDao" />
    </bean>

    <bean id="accountAuthenticationManager" class="org.hitplay.authentication.manager.AccountAuthenticationManager" scope="singleton">
        <property name="authenticateLoginService" ref="authenticateLoginService" />
    </bean> 
```

这是我的 AccountAuthenticationManager 类

```
@Transactional
public class AccountAuthenticationManager  implements AuthenticationManager {

 protected static Logger logger = Logger.getLogger("service");

 // Our custom DAO layer
 private AuthenticateLoginService authenticateLoginService;

 public AuthenticateLoginService getAuthenticateLoginService() {
    return authenticateLoginService;
}

public void setAuthenticateLoginService(
        AuthenticateLoginService authenticateLoginService) {
    this.authenticateLoginService = authenticateLoginService;
}

public Authentication authenticate(Authentication auth) throws AuthenticationException {

  System.out.println(authenticateLoginService);
 //Some more codes here
} 
```

正如您在我们的映射中看到的那样，我们正在注入类`authenticateLoginService`内部`AccountAuthenticationManager`。我们甚至提供了 setter 和 getter， `authenticateLoginService`但是正如您所看到的，当我们运行返回 null 的
`authenticate(Authentication auth)`方法时，`authenticationLoginService`我们不知道为什么会发生这种情况。请注意 AccountAuthenticationManager 不是 Struts Action

我们目前正在使用 struts2-spring 插件和 spring security。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T09:42:36.167

StackOverflow 不喜欢有很长的评论列表，所以我会在这里继续。`AccountAuthenticationManager`好的，所以您的系统中有两个不同的实例。假设 Spring 在启动时创建的那个被称为`instanceA`，未知的被称为`instanceB`. 如果`instanceB`不是 Spring 容器创建的，那么就没有办法`instanceB`解决它的依赖（`AuthenticateLoginService`）。如果您可以调试系统，您可能想要查看线程转储并找出`instanceB`创建的时间和地点以及由谁创建？

# selenium - 通过 selenium 跳过图像加载

> ID：14660226
> 
> 赞同：5
> 
> 时间：2013-02-02T08:50:00.653
> 
> 标签：selenium, cucumber, capybara, selenium-webdriver

如何使用 selenium webdriver 为黄瓜测试用例跳过图像加载。由于图像未正确加载，我的测试用例失败。当我在萤火虫的“网络”选项卡中看到时，一个微调器正在滚动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T12:00:27.693

FirefoxDriver 支持[不需要页面完全加载的加载策略](http://code.google.com/p/selenium/wiki/FirefoxDriver#-Beta-_load_fast_preference)。因此驱动程序将返回而不等待图像加载：

```
Capybara.register_driver :firefox do |app|
  profile = Selenium::WebDriver::Firefox::Profile.new
  profile['webdriver.load.strategy'] = 'unstable'
  Capybara::Selenium::Driver.new(app, :browser => :firefox, profile: profile)
end
Capybara.default_driver = :firefox 
```

# android - android将图像加载到最大允许大小

> ID：14660231
> 
> 赞同：0
> 
> 时间：2013-02-02T08:51:00.433
> 
> 标签：android, canvas

我正在制作一个绘图应用程序，以便用户可以选择从图库中加载图片并在其上进一步绘图。但是，如果照片的尺寸大于屏幕，则只能显示部分图片。

```
 public void load_pic(String picturePath) // load a picture from gallery
   {
      bitmap = (BitmapFactory.decodeFile(picturePath)).copy(Bitmap.Config.ARGB_8888, true);
      bitmapCanvas = new Canvas(bitmap);
      invalidate();
   } 
```

我怎么能编码这样图片可以

1.  加载可以适合最大允许屏幕宽度或高度，或
2.  加载这样可以拉动图像以占据全屏

此外，在某些设备上运行它会发出`java.lang.OutOfMemoryError`...它崩溃了...如何解决？

提前谢谢了！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:03:31.010

首先，您需要找到可以使用以下代码完成的屏幕宽度和高度。

```
Display display = getWindowManager().getDefaultDisplay();
int newWidth = display.getWidth();
int newHeight = display.getHeight(); 
```

如果您不活动，您可以获得如下所述的显示，

```
WindowManager wm = (WindowManager) mContex.getSystemService(Context.WINDOW_SERVICE);
Display display = wm.getDefaultDisplay(); 
```

您可以使用以下代码缩放位图。

```
Bitmap scaled = Bitmap.createScaledBitmap(oldBitmap, newWidth, newHeight, true); 
```

您还可以使用 [BitmapFactory.Options的](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html)[outWidth](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#outWidth)和 outHeight 属性设置解码时的高度和宽度。

为了克服这个问题，`outOfMemoryError`您可以参考评论中指出的[答案](https://stackoverflow.com/a/14117007/1070711)。

PS我写了那个链接的答案。

希望这会帮助你。

# oracle - 如何设置全名对应的combo的listindex？

> ID：14660233
> 
> 赞同：0
> 
> 时间：2013-02-02T08:51:13.727
> 
> 标签：oracle, vb6

在我的应用程序中，我正在执行 2 个任务：

1.  显示所有值`cmbrno_click()`

2.  显示所有值`cmbfulnm_lostfocus()`

`cmbrno`的样式设置为 2 下拉列表。

```
Private Sub CmbFulNM_LostFocus()
  RES.Open "student_record_database",CON,adOpenDynamic,adLockOptimistic,adCmdTable

  For i = 0 To RES.RecordCount - 1
    CmbRNO.Text = RES!ROLLNO 'at this line control goes to the cmbrno_click event which is having same part of coding and executes that also.
    TxtFNM.Text = RES!FIRST_NAME 'error like: item not fount in corresponding ordinal
    TxtMIDNM.Text = RES!MIDDLE_NAME
    TxtLNM.Text = RES!LAST_NAME
    TxtADDR.Text = RES!ADDRESS
    COMBO1.Text = RES!GRADE
    CmbDiv.Text = RES!DIV
    CmbBG.Text = RES!BLOOD_GROUP

    If CmbRNO.ListCount > 0 Then CmbRNO.ListIndex = i
  Next i
  RES.Close
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:25:23.390

这一切都相当混乱。本帖主题为：“如何设置全名对应的combo的listindex？” 但是，代码中的 (C) 注释是：“//error like: item not fount in对应的序数。”。您必须提供*准确的*错误信息，而不是您认为“喜欢”的错误信息。

TxtFNM 真的是文本框吗？您应该描述这些控件是什么，以及这些控件是如何被初始化的。

使用心理调试，您的问题可能是您没有正确拼写字段名称。真的是“FIRST_NAME”吗？

另一方面，我注意到您正在遍历多个记录，将每个字段复制到相同的控件中。由于没有 MoveNext，此代码将始终返回第一条记录，而与记录数无关。但是，由于紧接在“Next i”之前的行，您可能会在循环开始时用第*i*个添加的项目覆盖 cmbRNO 的选择。

也许你应该在这里真正说明你想做什么。“[2] 在 cmbfulnm_lostfocus() 上显示所有值”不是很精确。

# vb.net - 具有多个参数的 LINQ Group By

> ID：14660240
> 
> 赞同：17
> 
> 时间：2013-02-02T08:52:00.610
> 
> 标签：vb.net, linq

我有一个 VB.NET 应用程序并希望在多个列上进行分组。

**班级结构：**

```
Public Class Person
   Public Property Name as String
   Public Property City as String
   Public Property Country as String
End Class

Dim oResult = PersonList _
                .GroupBy(Function(v) New With {v.City, v.Country}) _
               .Where(Function(grp) grp.Count > 1).ToList() 
```

我有多个包含相同城市名称和国家名称的人员记录。但上面的查询返回我零个项目。如果我只使用一列城市或国家，那么它工作正常。

```
Dim oResult = PersonList _
                .GroupBy(Function(v) v.City) _
               .Where(Function(grp) grp.Count > 1).ToList() 
```

任何人都指出我对具有多个参数的 Group By LINQ 查询的错误之处。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-02T08:55:37.047

问题是在 VB 中，只有`Key`匿名类型的属性用于相等和散列。（ C# 匿名类型中的*所有*属性实际上都是关键属性。）因此您只需将查询更改为：

```
Dim oResult = PersonList _
                .GroupBy(Function(v) New With { Key v.City, Key v.Country}) _
                .Where(Function(grp) grp.Count > 1).ToList() 
```

[有关详细信息，请参阅VB 中匿名类型](http://msdn.microsoft.com/en-us/library/bb384767.aspx)的文档。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-20T02:56:39.873

```
Dim q1 = (From p In Repository.Table
                            Group p By p.CreatedDate.Year, p.CreatedDate.Month Into Group
                            Select New With {.Year = Year, .Month = Month, .Count = Group.Count()}).ToList 
```

或者

```
Dim q2 = (From p In Repository.Table
                            Group p By key = New With {.Year = p.CreatedDate.Year, .Month = p.CreatedDate.Month} Into Group
                            Select New With {.Year = key.Year, .Month = key.Month, .Count = Group.Count()}).ToList 
```

# javascript - 如何简化javascript代码

> ID：14660241
> 
> 赞同：0
> 
> 时间：2013-02-02T08:52:17.377
> 
> 标签：javascript, html, refactoring

有没有办法用循环或任何东西来简化这段代码？我是 javascript 的初学者，我的代码很糟糕。请不要告诉我转换为 jquery 或任何东西。

```
 function dragLeftdropLeft1(ev) {
            ev.preventDefault();
            var data=ev.dataTransfer.getData("Left");
            document.getElementById('topLeft1').style.display = "none";
            document.getElementById('topLeft2').style.display = "block";
        }
        function dragLeftdropLeft2(ev) {
            ev.preventDefault();
            var data=ev.dataTransfer.getData("Left");
            document.getElementById('topLeft2').style.display = "none";
            document.getElementById('topLeft3').style.display = "block";
        }
        function dragLeftdropLeft3(ev) {
            ev.preventDefault();
            var data=ev.dataTransfer.getData("Left");
            document.getElementById('topLeft3').style.display = "none";
            document.getElementById('topLeft4').style.display = "block";
        }
        function dragLeftdropLeft4(ev) {
            ev.preventDefault();
            var data=ev.dataTransfer.getData("Left");
            document.getElementById('topLeft4').style.display = "none";
            document.getElementById('topLeft5').style.display = "block";
        }
        function dragLeftdropLeft5(ev) {
            ev.preventDefault();
            var data=ev.dataTransfer.getData("Left");
            document.getElementById('topLeft5').style.display = "none";
            document.getElementById('topLeft1').style.display = "block";
        }

        function dragLeftdropRight1(ev) {
            ev.preventDefault();
            var data=ev.dataTransfer.getData("Left");
            document.getElementById('topRight1').style.display = "none";
            document.getElementById('topRight2').style.display = "block";
        }
        function dragLeftdropRight2(ev) {
            ev.preventDefault();
            var data=ev.dataTransfer.getData("Left");
            document.getElementById('topRight2').style.display = "none";
            document.getElementById('topRight3').style.display = "block";
        }
        function dragLeftdropRight3(ev) {
            ev.preventDefault();
            var data=ev.dataTransfer.getData("Left");
            document.getElementById('topRight3').style.display = "none";
            document.getElementById('topRight4').style.display = "block";
        }
        function dragLeftdropRight4(ev) {
            ev.preventDefault();
            var data=ev.dataTransfer.getData("Left");
            document.getElementById('topRight4').style.display = "none";
            document.getElementById('topRight5').style.display = "block";
        }
        function dragLeftdropRight5(ev) {
            ev.preventDefault();
            var data=ev.dataTransfer.getData("Left");
            document.getElementById('topRight5').style.display = "none";
            document.getElementById('topRight1').style.display = "block";
        }

        function dragRightdropLeft1(ev) {
            ev.preventDefault();
            var data=ev.dataTransfer.getData("Right");
            document.getElementById('topLeft1').style.display = "none";
            document.getElementById('topLeft2').style.display = "block";
        }
        function dragRightdropLeft2(ev) {
            ev.preventDefault();
            var data=ev.dataTransfer.getData("Right");
            document.getElementById('topLeft2').style.display = "none";
            document.getElementById('topLeft3').style.display = "block";
        }
        function dragRightdropLeft3(ev) {
            ev.preventDefault();
            var data=ev.dataTransfer.getData("Right");
            document.getElementById('topLeft3').style.display = "none";
            document.getElementById('topLeft4').style.display = "block";
        }
        function dragRightdropLeft4(ev) {
            ev.preventDefault();
            var data=ev.dataTransfer.getData("Right");
            document.getElementById('topLeft4').style.display = "none";
            document.getElementById('topLeft5').style.display = "block";
        }
        function dragRightdropLeft5(ev) {
            ev.preventDefault();
            var data=ev.dataTransfer.getData("Right");
            document.getElementById('topLeft5').style.display = "none";
            document.getElementById('topLeft1').style.display = "block";
        }

        function dragRightdropRight1(ev) {
            ev.preventDefault();
            var data=ev.dataTransfer.getData("Right");
            document.getElementById('topRight1').style.display = "none";
            document.getElementById('topRight2').style.display = "block";
        }
        function dragRightdropRight2(ev) {
            ev.preventDefault();
            var data=ev.dataTransfer.getData("Right");
            document.getElementById('topRight2').style.display = "none";
            document.getElementById('topRight3').style.display = "block";
        }
        function dragRightdropRight3(ev) {
            ev.preventDefault();
            var data=ev.dataTransfer.getData("Right");
            document.getElementById('topRight3').style.display = "none";
            document.getElementById('topRight4').style.display = "block";
        }
        function dragRightdropRight4(ev) {
            ev.preventDefault();
            var data=ev.dataTransfer.getData("Right");
            document.getElementById('topRight4').style.display = "none";
            document.getElementById('topRight5').style.display = "block";
        }
        function dragRightdropRight5(ev) {
            ev.preventDefault();
            var data=ev.dataTransfer.getData("Right");
            document.getElementById('topRight5').style.display = "none";
            document.getElementById('topRight1').style.display = "block";
        } 
```

如果您想查看实际代码，可以在[http://thomaswd.com/chopsticks](http://thomaswd.com/chopsticks)查看完整的 HTML 代码。我正在尝试使用 HTML 和 javascript 制作筷子游戏。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T08:58:25.877

如果你有一个功能，那么适合初学者

```
 function some_meaningful_name(ev, hand, toNone, toBlock) {
            ev.preventDefault();
            var data=ev.dataTransfer.getData(hand);
            document.getElementById(toNone).style.display = "none";
            document.getElementById(toBlock).style.display = "block";
        } 
```

你可以这样称呼它

```
some_meaningful_name('Left', 'topRight5', 'topRight1'); 
```

然后，很可能如果您将所有这些字符串放入数组中，您可能只需使用 for 循环生成您需要的所有组合

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T08:59:24.473

如果没有问题，您可以再添加一个参数，即数字，并为前 5 个函数获取此参数：

```
 function dragLeftdropLeft(ev, num) {

        ev.preventDefault();

        num2 = num + 1;
        if(num2 == 6)
              num2 = 1

        var data=ev.dataTransfer.getData("Left");
        document.getElementById('topLeft' + num).style.display = "none";
        document.getElementById('topLeft' + num2).style.display = "block";
    } 
```

# php - Salesforce 验证

> ID：14660246
> 
> 赞同：-2
> 
> 时间：2013-02-02T08:52:57.677
> 
> 标签：php, salesforce

我必须防止我的销售人员帐户被机器人攻击。我正在尝试在 Salesforce 服务器端设置验证规则，以检查我提交表单中的隐藏字段。请任何人帮助我在销售人员服务器中设置验证规则，以将隐藏字段值与我的字符串进行比较。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T00:13:29.853

您已将问题标记为 php 和 salesforce，所以我假设您有某种 PHP 前端页面在后台与 Salesforce 对话？

在那种情况下，我认为你做错了。

尝试尽快阻止垃圾邮件发送者 - 在您的 PHP 中。与 SF 的通信、验证和返回只会浪费 CPU 周期和网络流量。实施 reCAPTCHA 或者只是在 PHP 表单中添加这个隐藏字段......我认为最好通过 javascript 添加这个字段（机器人在评估 JS 时遇到问题），如果该字段不存在并且没有您的期望值 - 阻止页面提交。

使用会话/cookies 使期望值随机化的奖励积分......地狱，必须有大量关于 PHP 中简单的机器人保护的阅读材料；）

这样一来，您的 PHP 就是您唯一的网关，您甚至不需要 salesforce 中的新领域。但如果你坚持 - 最简单的验证规则将是

```
MyCustomField__c != 'Yes' 
```

如果您无法想出这样的解决方案，那么您将有很多关于 SF 配置的阅读...

如果您有一个专用用户，其凭据存储在 PHP 脚本中，您可能会决定将此规则仅应用于该特定用户，而不是纠缠常规 SF 用户。在这种情况下，这样的事情就可以解决问题。

```
CONTAINS($User.Username, 'integration.user@example.com') && MyCustomField__c != 'Yes' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-06-15T10:35:07.030

在此处添加 OR。否则，选择列表必须同时具有两个值，才能评估为 true..

```
AND(
DATEVALUE(CreatedDate) > DATE(2012,8,23),
AND(
OR(
ISPICKVAL( CCI_Division_Region__c , "CCI Networks"),
ISPICKVAL( CCI_Division_Region__c , "CCI Distribution")),
OR(
AND(Services__c > 0,
ISBLANK(TEXT(Product__c )),
ISBLANK(Services_Product_Involved__c)),
AND(Support__c > 0,
ISBLANK(Support_Provider__c)),
AND(Product__c > 0,
ISBLANK(TEXT(Product_Manufacturer__c))))))
for more salesforce validation rules and regulation you can follow this given link. http://alturl.com/8ouz8 
```

# python - Python 代码将找到由特定字母连接而成的 2 个单词。字母只能使用一次

> ID：14660247
> 
> 赞同：-1
> 
> 时间：2013-02-02T08:53:25.680
> 
> 标签：python, list, list-comprehension

如果我有一个可变单词中的单词列表和一个可变字母中的字母列表，我怎样才能找到可以由字母中的字母组成的 2 个单词的所有连接。字母中的字母每个只能使用一次；但您可以多次列出同一个字母。必须使用字母中的所有字母。我想在 Python 中做到这一点。

我有从字母中查找单个单词的代码，但是如何更改它以查找连接的 2 个单词：

```
letters = ['A', 'E', 'H', 'R', 'T']
words = ['DUMMY', 'EARTH']

[w for w in words if sorted(w) == letters] 
```

所以给定

```
letters = ['A', 'D', 'E', 'H', 'M', 'M', 'R', 'T', 'U', 'Y'] 
```

我想找到

```
'DUMMYEARTH' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T09:13:23.587

如果你只需要这个对：

```
from itertools import combinations

words = ['DUMMY', 'EARTH']
letters = ['A', 'D', 'E', 'H', 'M', 'M', 'R', 'T', 'U', 'Y']

[w for w in (''.join(c) for c in combinations(words,2)) 
                               if sorted(w) == letters]
# ['DUMMYEARTH'] 
```

* * *

这适用于所有组合：

```
[w for w in (''.join(c) for i in xrange(len(words)+1) 
                      for c in combinations(words,i)) 
                              if sorted(w) == letters]
# ['DUMMYEARTH'] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-02T08:56:52.353

用 + 运算符连接单词，然后进行检查。

# customization - 如何添加自定义字段来创建页面表单

> ID：14660249
> 
> 赞同：1
> 
> 时间：2013-02-02T08:53:42.653
> 
> 标签：customization, custom-fields, phpfox

我希望在页面模块中的“创建页面表单”中添加一个名为体验的选择列表字段，其中包含一组固定的静态选项，但我找不到任何帮助，我想在页面创建的第二步中显示它. 我正在使用 phpFox 版本 3.4.1 和 mysql。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T18:18:49.723

您可以在 module/pages/template/default/add.html.php 的 add.html.php 控制器上添加任何选择字段

# android - 指定 ViewPropertyAnimator 的起始值

> ID：14660250
> 
> 赞同：4
> 
> 时间：2013-02-02T08:53:45.800
> 
> 标签：android, android-animation

使用`ObjectAnimator`s，可以选择与`PropertyValuesHolder`s 一起使用，可以指定动画属性的开始值和结束值：

```
ObjectAnimator animX = ObjectAnimator.ofFloat(myView, "x", 20f, 50f);
ObjectAnimator animY = ObjectAnimator.ofFloat(myView, "y", 30f, 100f);
AnimatorSet animSetXY = new AnimatorSet();
animSetXY.playTogether(animX, animY);
animSetXY.start();

PropertyValuesHolder pvhX = PropertyValuesHolder.ofFloat("x", 20f, 50f);
PropertyValuesHolder pvhY = PropertyValuesHolder.ofFloat("y", 30f, 100f);
ObjectAnimator.ofPropertyValuesHolder(myView, pvhX, pvyY).start(); 
```

如何用`ViewPropertyAnimator`s 实现相同的动画？语法似乎不支持起始值，假设它们等于视图在动画开始时的值：

```
myView.animate().x(50f).y(100f); //Where do I put starting values?? 
```

谢谢 ;）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T09:24:25.567

如果您要使用 ViewPropertyAnimator，您的视图需要在动画开始之前位于开始位置。

# javascript - 如何将 html 中的输入值发布到 javascript 中的 Ajax 函数？

> ID：14660252
> 
> 赞同：-1
> 
> 时间：2013-02-02T08:53:57.053
> 
> 标签：javascript, html, asp.net-ajax

我有一个 HTML 页面，其中包含单选按钮、组合框、文本字段和一个搜索按钮。我想当我在文本字段中输入文本然后选择一个单选按钮和组合框时，当我单击搜索按钮时，数据库的结果将基于此值显示：单选按钮的值 + 组合框的值 + 的值文本字段。我希望这些值作为 Ajax 执行的 ShowResult(str) 函数的参数。我的代码是：

```
function ShowResult(str)
{
if (str=="")
  {
  document.getElementById("Div1").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("div1").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","getresult.asp?q="+str,true);
xmlhttp.send();
}
</script>
<html>
<head>
    <title>Untitled Page</title>
</head>
<body>
<form>
<input id="Text1" type="text" />
<input id="Button1" type="button" value="Search" onclick="ShowResult(str)" /><br />
 <select name="combox" >
 <option value="Des">Descending</option>
 <option value="Ase">Ascending</option>
 </select><br />
<input type="radio" name="group1" value="Added_date"/> Added_date<br/>
<input type="radio" name="group1" value="Price"/>      Price<br /> 
<input type="radio" name="group1" value="Name"/>       Name<br/>
   </form>

   <div id="Div1" ></div>
</body>
</html> 
```

但我不知道这些值是如何传递给 ShowResult(str) 的？？？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:17:21.623

```
try this may help u it.
<script>
    function ShowResult() {
      var txtsearch=$("#Text1").val();
      var value =combox.options[combox.selectedIndex].value
      var radios = document.getElementsByName("group1");

    for (var i = 0; i < radios.length; i++) {       
        if (radios[i].checked) {
            alert(radios[i].value);
            var radioval=radios[i].value;
            break;
           }
         }
     var param="SearchText:"txtsearch,"Combo boxvalue:"value ,"radiobuttonvalue:"radios ;
      $.ajax({
            type: "POST",
            url: your servive url
            data: param,
            contentType: 'application/json',
            async: false,
            dataType: 'json',
            success: function (response) {

            },
            error: function (ErrorResponse) {

            }
        });
    }
</script>
<form>
<input id="Text1" type="text" />     
<input id="Button1" type="button" value="Search" onclick="ShowResult" />
<select name="combox" >
 <option value="Des">Descending</option>
 <option value="Ase">Ascending</option>
 </select><br />

<input type="radio" name="group1" value="Added_date"/> Added_date<br/>
<input type="radio" name="group1" value="Price"/>      Price<br /> 
<input type="radio" name="group1" value="Name"/>       Name<br/>
</form> 
```

# vb.net - 使用日期时间选择器从 sql 数据库中读取数据

> ID：14660255
> 
> 赞同：1
> 
> 时间：2013-02-02T08:54:26.970
> 
> 标签：vb.net, sql-server-2005, datagridview, datetimepicker

如何使用 datetimepicker 值从数据库中读取数据。我的表单中有一个 datetimepicker 和一个 datagridview。我想使用选定的 datetimepicker 值从 Sql 数据库表中获取数据。我尝试使用此代码

```
Private Sub BTNFIND_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles BTNFIND.Click
    getConnect()
    Dim editdate As String
    DTPEDITAT.Value= Format(DTPEDITAT.Value, "dd/MM/yyyy")
    editdate = DTPEDITAT.Value
    MessageBox.Show(editdate)
    Try
        Conn.Open()
        Dim strSQL As String = "SELECT EMP_ID,EMP_NAME,AT_STATUS,AT_REMARK FROM ATTENDANCE WHERE AT_DATE = '" & editdate & "' ORDER BY EMP_NAME ASC"
        Dim da As SqlDataAdapter = New SqlDataAdapter(strSQL, Conn)
        Dim ds As DataSet = New DataSet
        da.Fill(ds, "ATTENDANCE")
        Dim dt As DataTable = ds.Tables("ATTENDANCE")
        Dim row As DataRow
        Dim atstat As String
        For Each row In dt.Rows
            If row("AT_STATUS") = 1 Then
                atstat = "Present"
            ElseIf row("AT_STATUS") = 0 Then
                atstat = "Absent"
            ElseIf row("AT_STATUS") = 0.5 Then
                atstat = "Halfday"
            Else
                atstat = "Error"
            End If
            For x As Integer = 0 To ATCEDITGRID.Rows.Count - 1
                ATCEDITGRID.Rows(x).Cells(2).Value = row("EMP_ID")
                ATCEDITGRID.Rows(x).Cells(3).Value = row("EMP_NAME")
                ATCEDITGRID.Rows(x).Cells(0).Value = atstat
                ATCEDITGRID.Rows(x).Cells(1).Value = row("AT_REMARK")
            Next x
        Next row
    Catch ex As SqlException
        MsgBox(ex.Message, MsgBoxStyle.Critical, "SQL Error")
    Catch ex As Exception
        MsgBox(ex.Message, MsgBoxStyle.Critical, "General Error")
    End Try
End Sub 
```

Datagridview 不显示任何内容，也没有错误...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T09:44:56.483

我们每天都在这里看到这些问题。它们源于同一个问题。

**切勿使用字符串连接来构建 SQL 查询。**

这是个大问题。当然你已经遇到了第一个效果。如何以可接受的方式将字符串转换为有效的数据类型？您需要解决底层数据库系统的嵌入式引号、正确的日期表示和十进制数字的解析问题。但是字符串连接的第二个也是更微妙的副作用是[SQL 注入](http://www.unixwiz.net/techtips/sql-injection.html)（这只是一个指导性链接，因为 SQL 注入是一个非常大的话题）

要解决这类问题，唯一可接受的方法是使用 PARAMETERS。
这意味着它是数据库引擎以有效的方式解决问题，您需要一个带有参数占位符（@something）的字符串和一个具有参数值的确切数据类型的参数集合。

所以你的代码应该以这种方式改变

```
Dim strSQL As String = "SELECT EMP_ID,EMP_NAME,AT_STATUS,AT_REMARK " + 
                       "FROM ATTENDANCE WHERE AT_DATE = @editdate " + 
                       "ORDER BY EMP_NAME ASC"
Using con = new SqlConnection("constring_here")
    con.Open()
    Using cmd = new SqlCommand(strSQL, con)
        cmd.Parameters.AddWithValue("@editdate", DTPEDITAT.Value)
        ' do whatever you want with the command '
        ' like ExecuteReader or use a DataAdapter to fill datasets'
    End Using
End Using 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T09:10:08.563

我**不推荐**的解决方案：

删除括号和`%`字符。在 之前放置一个空格`ORDER`（尽管它不是您的语法错误的原因）。

以这种方式修复选择：

```
"SELECT EMP_ID,EMP_NAME,AT_STATUS,AT_REMARK FROM ATTENDANCE WHERE AT_DATE = '" & _
editDate.ToString("yyyy-MM-dd hh:mm:ss") & _
"' ORDER BY EMP_NAME ASC" 
```

* * *

我*推荐*你的是学习**使用 SQL 参数**。

查询应该看起来像这样（注意里面的 @editDate 参数占位符）：

`"SELECT EMP_ID,EMP_NAME,AT_STATUS,AT_REMARK FROM ATTENDANCE WHERE AT_DATE = @editDate ORDER BY EMP_NAME ASC"`.

然后，您只需将参数添加到`SqlCommand`. 最简单的方法是使用[SqlParameterCollection.AddWithValue](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)。

`yourSqlCommand.Parameters.AddWithValue("@editDate", editDate)`

一个完整的样本：

```
 Dim editDate As Date = DTPEDITAT.Value

    Using conn As New SqlConnection(YOUR_CONNECTION_STRING_HERE)
        Using cmd As SqlCommand = conn.CreateCommand()
            cmd.CommandText = "SELECT EMP_ID,EMP_NAME,AT_STATUS,AT_REMARK FROM ATTENDANCE WHERE AT_DATE = @editDate ORDER BY EMP_NAME ASC"
            cmd.Parameters.AddWithValue("@editDate", editDate)

            adapter.SelectCommand = cmd
            adapter.Fill(ds)

            For Each row As DataRow In ds.Tables(0).Rows 
                [do whatever with the result]
            Next

        End Using
        conn.Close()
    End Using 
```

来自[MSDN](http://msdn.microsoft.com/en-us/library/yy6y35y8%28v=vs.80%29.aspx)关于 Sql 参数

> 命令对象使用参数将值传递给 SQL 语句或存储过程，提供类型检查和验证。与命令文本不同，参数输入被视为文字值，而不是可执行代码。这有助于防范**“SQL 注入”**攻击，在这种攻击中，攻击者将命令插入 SQL 语句，从而危及服务器的安全性。除了安全优势之外，参数化命令还提供了一种方便的方法来组织传递给数据源的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T09:01:05.787

尝试在您附近移动一个空格`"%)`，我更正了查询。揣摩。

```
Dim strSQL As String = "SELECT EMP_ID,EMP_NAME,AT_STATUS, " + _
     "AT_REMARK FROM ATTENDANCE " + _ 
     "WHERE Convert(Varchar(10), AT_DATE, 23) = " + _
     "('" & editdate.ToString("yyyy-MM-dd") & "') ORDER BY EMP_NAME ASC" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T08:03:59.733

我像这样更改我的代码

```
Private Sub BTNFIND_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles BTNFIND.Click
    ATCEDITGRID.Rows.Clear()
    getConnect()
    Dim editdate As String
    DTPEDITAT.Value = Format(DTPEDITAT.Value, "dd/MM/yyyy")
    editdate = DTPEDITAT.Value
    Try
        Conn.Open()
        Dim strSQL As String = "SELECT EMP_ID,EMP_NAME,AT_STATUS,AT_REMARK FROM ATTENDANCE WHERE AT_DATE = '" & editdate & "' ORDER BY EMP_NAME ASC"
        Dim da As SqlDataAdapter = New SqlDataAdapter(strSQL, Conn)
        Dim ds As DataSet = New DataSet
        da.Fill(ds, "ATTENDANCE")
        Dim dt As DataTable = ds.Tables("ATTENDANCE")
        Dim row As DataRow
        Dim atstat As String
        For Each row In dt.Rows
            If row("AT_STATUS") = 1 Then
                atstat = "Present"
            ElseIf row("AT_STATUS") = 0 Then
                atstat = "Absent"
            ElseIf row("AT_STATUS") = 0.5 Then
                atstat = "Halfday"
            Else
                atstat = "Error"
            End If
            Me.ATCEDITGRID.Rows.Add(row("EMP_ID"), row("EMP_NAME"), atstat, row("AT_REMARK"))
        Next row
        ATCEDITGRID.TopLeftHeaderCell.Value = "Sr.No."
        Me.ATCEDITGRID.RowHeadersDefaultCellStyle.Padding = New Padding(3)
        ATCEDITGRID.AllowUserToAddRows = False
        AddRowHeadersEdit()
        Conn.Close()
    Catch ex As SqlException
        MsgBox(ex.Message, MsgBoxStyle.Critical, "SQL Error")
    Catch ex As Exception
        MsgBox(ex.Message, MsgBoxStyle.Critical, "General Error")
    End Try
End Sub 
```

Itz工作良好....

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-11T08:23:23.100

这是我的代码它的工作

oldbc.CommandText = "select * from recette where " & ComboBox1.Text & " between #" & DateTimePicker1.Text & "# and #" & DateTimePicker2.Text & "#"

# php - 为什么我的路由代码点火器不去正确的动作控制器？

> ID：14660257
> 
> 赞同：0
> 
> 时间：2013-02-02T08:54:34.117
> 
> 标签：php, codeigniter

这是我的路线

```
$route['posts/(:any)'] = 'posts/get_show/$1';
$route['posts/(:any)/dosomething'] ='posts/get_dosomething/$1'; 
```

控制器

```
public function get_show($id)
public function get_dosomething($id) 
```

有了链接`posts/1/dosomething`，路由总是指向动作`get_show`，它永远不会去`get_dosomething`

知道如何解决吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T08:56:43.753

你必须首先像这样走

```
$route['posts/(:any)/dosomething'] ='posts/get_dosomething/$1';
$route['posts/(:any)'] = 'posts/get_show/$1'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T08:59:47.180

因为`posts/1/dosomething`总是落在 $route['posts/(:any)'] 之下。更改您的路线条件之一

# c# - 在 WebView 中捕获按钮单击

> ID：14660258
> 
> 赞同：0
> 
> 时间：2013-02-02T08:54:39.250
> 
> 标签：c#, xaml, windows-8, webview, microsoft-metro

我目前正在制作一个包含 WebView 的 Windows 8 应用程序。我想知道是否有任何方法可以使用 C# 捕获 WebView 中的某些按钮/链接？
例子：

*在 WebView 内单击按钮 ID“btnDoSomething”* -> C# 捕获单击，并启动计时器或重定向到另一个页面或类似操作。

可能吗？如果这是一个模糊的问题，我会尽我所能解释，因为它很着急。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:49:07.480

是的，看看[InvokeScript](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview.invokescript.aspx)和[ScriptNotify](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview.scriptnotify)，特别是看看[Dev Center](http://dev.windows.com)上[XAML Web View Control 示例](http://code.msdn.microsoft.com/windowsapps/XAML-WebView-control-sample-58ad63f7)的场景 4 。

# php - magento 以编程方式构建类别树

> ID：14660262
> 
> 赞同：3
> 
> 时间：2013-02-02T08:55:01.057
> 
> 标签：php, magento

我想将类别树添加到选择多个选项控件中

我在这上面搜索了很多得到[这个链接](http://pragneshkaria.com/programatically-add-category-tree-outside-magento-with-jquery-tree-view/)

但它给了我 ul li 结构的输出，如下所示

![在此处输入图像描述](../Images/787fc07e90ee0fd78166a71e02510199.png)

但我希望这个树结构选择多个选项

任何人都可以知道如何更改链接代码

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T09:41:07.210

准备数组：

```
public function getCategoriesArray() {

    $categoriesArray = Mage::getModel('catalog/category')
            ->getCollection()
            ->addAttributeToSelect('name')
            ->addAttributeToSort('path', 'asc')
            ->load()
            ->toArray();

    $categories = array();
    foreach ($categoriesArray as $categoryId => $category) {
        if (isset($category['name']) && isset($category['level'])) {
            $categories[] = array(
                'label' => $category['name'],
                'level'  =>$category['level'],
                'value' => $categoryId
            );
        }
    }

    return $categories;
} 
```

显示形式：

```
 $fieldset->addField('categories', 'multiselect', array(
        'label' => $this->__('Categories'),
        'name' => 'categories',
        'values' => Mage::getModel(...)->getCategoriesArray(),
    )); 
```

# iphone - CBCentralManager 在后台运行，但并非总是如此，当 iphone 长时间处于后台模式时会发出 oucer

> ID：14660265
> 
> 赞同：2
> 
> 时间：2013-02-02T08:55:53.540
> 
> 标签：iphone, ios, core-bluetooth, bluetooth-lowenergy

在我的应用程序中，我使用的是蓝牙 LE 服务。在我使用的应用程序中`CBCentralManager`，`CBperiperhal`它们在前台和后台模式下都可以正常工作，我可以在这两种模式下将外围设备连接/断开连接到应用程序。

但是，我在重新连接时遇到了一个大问题，当我让我的应用程序长时间处于后台模式时，比如一整晚，而在早上我尝试将外围设备连接到我的应用程序时，我的应用程序无法找到我的外围设备甚至没有“ `didDiscoverPeripheral`”方法被调用。

任何人都可以建议我，我需要做什么，以便我的应用程序处理这种情况。

# php - PHP DOM并仅返回文档的一部分

> ID：14660266
> 
> 赞同：1
> 
> 时间：2013-02-02T08:55:58.560
> 
> 标签：php, regex, xpath, domdocument

我刚刚发现了 domdocument 并且之前一直在使用正则表达式 ..

我需要返回带有所有输入的整个表单元素。

我不需要创建一个完整的文档，我只想要那个部分，在一个我可以操作的字符串中。我一直在弄乱以下代码块，试图让它做一些有用的事情，但到目前为止，什么都没有。

在我回到正则表达式之前，任何人都可以理解这一点吗？

```
//get HTML into variable
$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, 'https://www.openroadlending.com/Apply.aspx?aid=134');
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
$html=curl_exec($curl);

$dom = new domDocument;
@$dom->loadHTML($html);
$dom->preserveWhiteSpace=false;

$xpath = new DOMXPath($dom);
$body = $xpath->query('html/');

echo var_dump($body);

//echo $body->item(0);
$inputs = $xpath->getElementsByTagName('form');

// foreach($inputs as $in){
// $input = $in->saveHTML;
// //echo $input;
// } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T08:59:52.463

`DOMXPath`没有办法`getElementsByTagName`。您可以通过多种方法获取表格

1.  `getElementsByTagName`

    ```
    $forms = $dom->getElementsByTagName('form'); 
    ```

2.  XPath 查询

    ```
    $forms = $xpath->query('//form'); 
    ```

获得所需的表单后（通过从`$forms`集合中选择或使用更专业的 XPath 查询），您可以使用以下方式将 HTML 作为字符串获取

```
$formHTML = $dom->saveHTML($form); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T09:11:47.017

你可以使用这个功能

```
function DOMinnerHTML($element) 
{ 
   $innerHTML = ""; 
   $children = $element->childNodes; 
   foreach ($children as $child) 
   { 
      $tmp_dom = new DOMDocument(); 
      $tmp_dom->appendChild($tmp_dom->importNode($child, true)); 
      $innerHTML.=trim($tmp_dom->saveHTML()); 
   } 
   return $innerHTML; 
} 
```

并像这样使用

```
$productspec=$dom->getElementsByTagName('form')
foreach($productspec as $data)
{ 
   echo DOMinnerHTML($data);
} 
```

您可以使用此功能按类获取元素

```
function GetBYClass($Doc,$ClassName){
    $finder = new DomXPath($Doc);
    return($finder->query("//*[contains(@class, '$ClassName')]"));
} 
```

并且此功能与此问题无关，但很有用

```
function ExtractText($node) {
     if($node==NULL)return false;    
     if (XML_TEXT_NODE === $node->nodeType || XML_CDATA_SECTION_NODE === $node->nodeType) {
         return $node->nodeValue;
     } else if (XML_ELEMENT_NODE === $node->nodeType || XML_DOCUMENT_NODE === $node->nodeType || XML_DOCUMENT_FRAG_NODE === $node->nodeType) {
       if ('script' === $node->nodeName) return '';

     $text = '';
     foreach($node->childNodes as $childNode) {
        $text .= $this->extractText($childNode);
     }
     return $text;
     }
} 
```

# java - 如何从 HTML 中检索数据？

> ID：14660269
> 
> 赞同：3
> 
> 时间：2013-02-02T08:57:04.410
> 
> 标签：java, html, parsing, web-scraping

我正在编写一个 android 应用程序，它要求我`html`从网站下载代码并检索我需要的数据并丢弃其余数据。另外我可能需要将代码转换为`xml`或`json`格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:11:01.947

试试这个，我不知道这是否正是你想要的，或者它是如何工作的，因为我不是安卓专家，希望这对你有帮助问候汤姆

[http://xjaphx.wordpress.com/2012/02/04/android-xml-adventure-parsing-html-using-jsoup/](http://xjaphx.wordpress.com/2012/02/04/android-xml-adventure-parsing-html-using-jsoup/)

# macos - Qt - 从 QWidget::macEvent() 的 EventRef 参数中获取键盘键码？

> ID：14660272
> 
> 赞同：0
> 
> 时间：2013-02-02T08:57:25.703
> 
> 标签：macos, qt, events, input, keyboard

我正在制作一个 Qt 应用程序，并希望在更深层次上拦截按键。为此，我重写了[QWidget::macEvent()](http://qt-project.org/doc/qt-4.8/qwidget.html#macEvent)函数以拦截 EventRef 参数。

对于不同的事件（即键盘事件、鼠标事件、窗口事件）EventRef等于以下值：

```
0×104d649f0
0×101425740
0×104d649f0
0×101485950
0×101425740
0×101485950 
```

如何判断事件是否为键盘事件？以及如何找出按下了哪个键？我查看了事件处理文档，其中大多数都没有提到 EventRef。一些文章提到 EventRef 是如何从 Cocoa NSEvent 事件派生的 Carbon 事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T09:08:11.433

一种方法是使用[`+[NSEvent eventWithEventRef:]`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSEvent_Class/Reference/Reference.html#//apple_ref/occ/clm/NSEvent/eventWithEventRef%3a)来获取`NSEvent`表示事件的对象。一旦你有一个`NSEvent`你可以使用它的方法来解释事件，例如`-[NSEvent type]`会告诉你它是否是一个键盘事件，和`-[NSEvent characters]`/`-[NSEvent keyCode]`会给你关于哪个键被按下的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T18:41:26.950

[经过一些猜测工作，并从一本书](http://oreilly.com/catalog/learncarbon/chapter/ch06.html#CHAP-CH06-6)中查看这一章，我成功地解释了 Qt 应用程序中按键的 EventRef 对象：

**MyProject.pro**：包括`Carbon`框架：

```
macx {
    LIBS += -framework Carbon
} 
```

**MyWidget.h** : 覆盖[QWidget::macEvent()](http://qt-project.org/doc/qt-4.8/qwidget.html#macEvent)

```
class MyWidget : public QWidget {

    ...

    private:
        #if defined(Q_OS_MAC)
            bool macEvent(EventHandlerCallRef, EventRef event);
        #endif
}; 
```

**MyWidget.cpp**：

```
#if defined(Q_OS_MAC)
    #include <Carbon/Carbon.h>
#endif

...

#if defined(Q_OS_MAC)
    bool MyWidget::macEvent(EventHandlerCallRef, EventRef event) {
        uint32_t keyCode;

        switch (GetEventClass(event)) {
            case kEventClassApplication:
                qDebug() << "kEventClassApplication";
                break;
            case kEventClassCommand:
                qDebug() << "kEventClassCommand";
                break;
            case kEventClassControl:
                qDebug() << "kEventClassControl";
                break;
            case kEventClassKeyboard:
                qDebug() << "kEventClassKeyboard";

                switch(GetEventKind(event)) {
                    case kEventRawKeyDown:
                        qDebug() << "kEventRawKeyDown";

                        GetEventParameter(event, kEventParamKeyCode, typeUInt32, NULL, sizeof(keyCode), NULL, &keyCode);
                        qDebug() << "keyCode =" << keyCode;

                        break;
                    case kEventRawKeyRepeat:
                        qDebug() << "kEventRawKeyRepeat";
                        break;
                    case kEventRawKeyUp:
                        qDebug() << "kEventRawKeyUp";

                        GetEventParameter(event, kEventParamKeyCode, typeUInt32, NULL, sizeof(keyCode), NULL, &keyCode);
                        qDebug() << "keyCode =" << keyCode;

                        break;
                    case kEventRawKeyModifiersChanged:
                        qDebug() << "kEventRawKeyModifiersChanged";
                        break;
                    case kEventHotKeyPressed:
                        qDebug() << "kEventHotKeyPressed";
                        break;
                    case kEventHotKeyReleased:
                        qDebug() << "kEventHotKeyReleased";
                        break;
                }

                break;
            case kEventClassMenu:
                qDebug() << "kEventClassMenu";
                break;
            case kEventClassMouse:
                qDebug() << "kEventClassMouse";
                break;
            case kEventClassTablet:
                qDebug() << "kEventClassTablet";
                break;
            case kEventClassTextInput:
                qDebug() << "kEventClassTextInput";
                break;
            case kEventClassWindow:
                qDebug() << "kEventClassWindow";
                break;
            default:
                break;
        }

        return true;
    }
#endif 
```

# jquery - jQuery UI datepicker 突出显示相邻日期

> ID：14660275
> 
> 赞同：-1
> 
> 时间：2013-02-02T08:57:49.283
> 
> 标签：jquery, user-interface, datepicker

我正在构建预订系统，我想使用带有插件[http://multidatespickr.sourceforge.net/](http://multidatespickr.sourceforge.net/)的 jQuery UI datepicker 。当用户选择某个日期时，我还需要突出显示所选日期的相邻日期（向其中添加类，但不选择它）并在用户取消选择日期时删除类。有人有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:48:08.573

查看 jQuery UI 日期选择器的 beforeShowDay 选项：[http](http://api.jqueryui.com/datepicker/#option-beforeShowDay) ://api.jqueryui.com/datepicker/#option-beforeShowDay 。

我认为您可以通过 getDates(format, type) 方法获取选定的日期来实现您的目标，然后只需检查您要显示的日期是否与您从 getDates(format) 获得的日期数组中的一个相邻， 类型 ）

# android - sqlite：在子表中创建外键时未找到此类表（父表）错误

> ID：14660276
> 
> 赞同：0
> 
> 时间：2013-02-02T08:57:59.857
> 
> 标签：android

我已经创建了一个 Member_Master 表，其主键是 android 的 sqlite manager 中的 member_id 并在子表中创建外键，例如来自 Member_Master 的 member_id 的 Event_Master。我收到`no such table found:Member_Master`错误
但现在我收到以下错误：

```
SQLiteManager: CREATE TABLE "main"."Events_Master" ("event_id" NUMERIC PRIMARY KEY  NOT 
NULL ,"event_name" TEXT NOT NULL ,"event_details" TEXT NOT NULL ,"event_start_date" 
DATETIME NOT NULL ,"event_end_date" DATETIME NOT NULL ,"event_time" DATETIME NOT NULL 
,"event_venue" TEXT NOT NULL ,"min_level" NUMERIC,"status_id" NUMERIC,"member_id" 
NUMERIC, foriegn key(member_id) references Member_Master(member_id)ON DELETE CASCADE ON
UPDATE CASCADE) [ near "member_id": syntax error ]

Exception Name: NS_ERROR_FAILURE
Exception Message: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) 
[mozIStorageConnection.createStatement] 
```

请给我解决方案。由于`Member_Master`表已经创建并且`member_id`只有字段名称。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T05:49:29.613

如果你没有得到这样的表异常，原因是表没有创建。可能有几个原因，比如

1）您用来创建表的命令是错误的（也可能是打字错误）。

2 ) 您正在一个已经存在的数据库中添加一个表

当`Database`使用特定数量的表创建时，您不能向其添加更多表。如果要添加更多表，则需要从模拟器中卸载应用程序并再次安装应用程序，然后它将通过重新创建数据库来创建新表。或者升级数据库版本，一次删除所有表，然后重新创建数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T06:03:05.100

*尝试`uninstalling`该应用程序，`reinstall`然后再试一次。它在大多数情况下都有效。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T05:52:29.287

如果你没有得到这样的表异常，那么可以确定表没有被创建。你是否在 DatabaseAdapter 类中编写了创建表查询，或者只是从 SqliteManager 添加了一个表。如果您是动态创建表，请编写 CREATE TABLE 查询并执行查询。

# python - 如何为python构建一个C库

> ID：14660277
> 
> 赞同：1
> 
> 时间：2013-02-02T08:58:21.347
> 
> 标签：python

我正在用 Python 2.7.3 和 gcc 4.7.2 构建一个包。构建是基于 scons 的，它终止抱怨找不到“python2.7 的 C 库”？

这个 C 库是什么以及如何构建它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:19:53.727

通常，包被分成使用的部分和开发所需的部分。您可能已经安装了这些部件（解释器、模块），但是缺少用于开发模块的库。寻找一个 python-dev 包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T09:02:59.543

通常称为`libpython2.7.a`. 如果您的系统上没有它，您可以从源代码构建它。[从http://www.python.org/download/releases/2.7.3/](http://www.python.org/download/releases/2.7.3/)下载 tarball并执行通常的`./configure; make`.

# wordpress - Wordpress 将标签作为文本发布

> ID：14660279
> 
> 赞同：0
> 
> 时间：2013-02-02T08:58:28.543
> 
> 标签：wordpress, tags

如何将wordpress帖子标签显示为文本而不是链接？我试过 the_tags(); 函数，我得到了链接的输出。我是新的wordpress。谁能给我解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:05:37.297

一种选择是遍历标签并检索它们的名称”

```
$posttags = get_the_tags();
if ($posttags) {
  foreach($posttags as $tag) {
    echo $tag->name . ' '; 
  }
} 
```

[代码来自[get_the_tags 上的 wordpress 文档](http://codex.wordpress.org/Function_Reference/get_the_tags#Usage)（您也可以使用 the_tags 检索标签并循环查看[此处](http://codex.wordpress.org/Function_Reference/get_tags#Example)所示的标签）]

# c# - T4模板处理多次输入

> ID：14660286
> 
> 赞同：2
> 
> 时间：2013-02-02T08:59:43.377
> 
> 标签：c#, visual-studio, t4

我最近在 Visual Studio 中制作了一个 T4 模板，并开始遇到一个我找不到原因的问题。每当我编辑模板并运行它时，它就会按预期执行。如果我在不编辑模板的情况下再次运行它，则内容将重复输出。如果我再次运行它而不进行编辑，它会添加另一个重复项，导致看到输出 3 次。等等。

```
<#@ template debug="true" hostSpecific="true" #>
<#@ output extension=".txt" #>
<#@ Assembly Name="System.Core" #>
<#@ import namespace="System" #>
<#@ import namespace="System.IO" #>
<#@ import namespace="System.Diagnostics" #>
<#@ import namespace="System.Linq" #>
<#@ import namespace="System.Collections" #>
<#@ import namespace="System.Collections.Generic" #> 
<#
    input.Add("data1");
    input.Add("data2");
    foreach(var data in input)
    {
#>
<#=data#>
<#
    }
#>
<#+
    static List<string> input = new List<string>();
#> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T09:14:30.913

经过一些逻辑思考后，我得出结论，该模板以某种方式“记住”了我的输入。然后我认为这可能是我为收集输入而包含的**静态类功能。**删除它解决了问题！之所以会出现静态，是因为我首先在控制台应用程序中测试了大部分复杂的初始化逻辑，然后将其复制到模板中。

结论：因此，当您保存 T4 模板并将其加载到 appdomain 中然后执行它时，似乎 Visual Studio 会从您的 T4 模板构建一个库。它会重用这个加载的库，直到你编辑你的模板。这就是这个静态变量如何记住上次运行模板时的输入 - 它仍然存在。

作为旁注，下次我将在类实例中测试我的初始化代码，而不是在静态 void main() 旁边！

# python - 二进制数据返回一个空白字符串

> ID：14660289
> 
> 赞同：1
> 
> 时间：2013-02-02T09:00:37.783
> 
> 标签：python, string, binary

我想要实现的是从通过 php 脚本（动态）生成图像的 url 获取二进制数据（图像），并使用 sqlalchemy 将该数据保存到数据库中。当我尝试使用 python 或 ipython 解释器来实现这一点时，会返回数据，但在脚本中使用相同的代码时，数据是一个空白字符串。

### 使用解释器：

```
>>>import urllib
>>>link = 'http://www.example.com/getImage.php?e=23f4904fhsdajf0xns3erre32q886heipxd8c447gf8gs9b9d'
>>>image = urllib.urlopen(link).read()
>>>image 
```

返回以下二进制数据：

> >>>'\xff\xd8\xff\xe0\x00\x10JFIF\x00\x01\x01\x01\x00H\x00H\x00\x00\xff\xe1\x00\x18Exif\x00\x00II*\x00\x08\ x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\xe1\x03) [http://ns.adobe.com/xap/1.0/](http://ns.adobe.com/xap/1.0/)\x00 \xff\xdb\x00C\x00\x01\x01\x01\x01\x01\x01\x01\x01\x01\x01\x01\x01\x01\x01\x01\x01\x01\x01\x01\x01 \x01\x01\x01\x01\x01\x01\x01\x01\x01\x01\x01\x01\x01\x01\x01\x01\x02\x02\x01\x01\x02\x01\x01\x01\x02 \x02\x02\x02\x02\x02\x02\x02\x02\x01\x02\x02\x02\x02\x02\x02\x02\x02\x02\x02\xff\xc0\x00\x0b\x08\x00 \x16\x01,\x01\x01\x11\x00\xff\xc4\x00\x1b\x00\x01\x00\x03\x01\x01\x01\x01\x00\x00\x00\x00\x00\x00\ x00\x00\x00\x00\x06\x07\x08\x05\t\n\x03\xff\xc4\x00$\x10\x00\x02\x02\x03\x01\x01\x01\x00\x02\x02 \x03\x00\x00\x00\x00\x00\x05\x06\x04\x07\x02\x03\x08\x00\x01\t\n\x14\x12\x17\x13\x15\x16\xff\xda \x00\x08\x01\x01\x00\x00?\x00\xfb\xf8\xf3\xcf<\xf7$\xf9\xf0J\xa0\x8d44\x1a\x12\xb6\xb2\xb6$\x89\xf6&#\xe4a\x87\x04\x04\x10x{\x88\x974h\xb9\x1d\xda\xe3\x8b\x13\x14|y\x1b\xe4\xc9\xdf\xb3^\x9d\x1atg\xb7nx\ xe1\x8eY|\xfc\xd6\xd9\x17\\x97@7\xa8\x1f\n\xd6\xa4\xd6\x14S"\xbbB\xd9X\'WY\x17N\xc1\xd0P!\xf0\x06 \xc5\xef\xdb\x18\xc0Y\x83%F\x91\x16T}\xbb4H\xd1\'^\xed;3\xd7\x9e9}\xedz\x16\xc3d\xd7j\'\xc0*\xb5 \xbf%\xac45\xc4\x92A]m\x85\xa4\x18S\xec\x90!6!\xa1L\x9a\x009)\xfa\xa4\x18\x89\xa9\xea\xd4\xac\x02\ xed\xdb\x1f^\xcc5\x96\xb1\xc0\x8e\xcb/\x93\x0c\x0f\xd3"i\xec\xfe\xb7\xd6\\xb0\xe5g\xce\xa4\x94：我\xec\xfe\xb7\xd6\\xb0\xe5g\xce\xa4\x94：我\xec\xfe\xb7\xd6\\xb0\xe5g\xce\xa4\x94：*\x9f\xda\xaeq\x9b\x88\xc6%Q-\xdc\xb5\xd1\xcb<|\x81\x18\xe5\x99m\x13\x90E\xb1\xed+\x13t\0\xcf\xec\ x8cvD\xc7-\x1f1\xfb\xf7o\xcc~|\xfb\xed\x01\xe7\xa3\xed\x8d\x8a\xa8J\xac\xcfOL\xcb\xe9i)k\xe6[\x1c\[\ x0c\x8e\USU\\x1d$\xc3\x0b33\t\x89:b\x01* \x80"\x1c\xc9Sf\xca\xdd\xaa4X\xd1vo\xdf\xb3\rXe\x97\xc2\xcbb\xab \xa0\xe9&\x13\x99\x97\xdb\x04C`lS\x98Qd\xc8\xe3\xc3\xa2\xb5!5\x19EzY\x938\\\x9d\xba\xb40\x05v\\a\x0cZ\x16Y|\x928\xa8)\xa3\xe6k\xd3..\xfd8H<\xf3\xcf<\xf3\xcf<\xf3\xcf<\xf3\xcf<\xf3\xcf<\xf3\xdf7[\xa2\xf4\xe1\xfe\xe6^\x85\x96\xdf\xd0$\x94;\x0b\xb0\xba\xc6\x9a\xbc6m+\xdb\xcdJ\xa09\xe1\xb2\x89\xe9\xd5Z>\xc3Ka\x0e\x00=5U\xa0ej\x8f\xa0\xcb\xa9\x92G\x10U\xa9gIq\xbb]_\xa1\x92\xd0\xcd\xaag\x01\x97/\xd3\xd7\xde}\xf9`3\x97\xbd\xeac\x81\xae\x1a\x0f\x94\xef!\xf0kn\x91\xb1K\xcd\xa69\xd2\xa5\xb5\x87]\xbdOWQ\\xf1s\xa0\xd8,X \xd8\x1d\x90\xe4\x07\x1cL \xb3Be#[!\x863\nI\xa1\x18l\x156\xa5n\xae?B\xe6\xd2/2\x03[\xdd\xf0\xeb\xf1 \x1f\x8a\xbf]\xad~w$\x99^\xf6\x174\x1e\'s\xa1\xc4\xfc\xfd\x93\xc6IGP,n\x8f\xb1\xac\xbb\x10\xec \xab\x14\x7fE\x10K\x11j\x9f\xda\xdc\xc8<\x93\x18L\x16\xb3S\xd7\xba\x1c\xedQ\xd3\xae?\xa00\xfa"\xf0\xae9\ xdc\x1fM\xc8{\x99\xd9\xb6\x85\xa1D1MV\xb4$\xf3&\x8a\x97w\xe0\x13\xaaUL\xb6~\xc2\x9f\x0f\xeaTj\xdbg\xe9\x12\xf6 \xb9RVfL\xf9\x0e3\xbe1\r\x92\x1f\x1c\x91\x80\xf3H\xe3\x01\xaa=\xb7\xf2XB\xf2:C\xf4\x18\xb5A\x87\xc5\xe9W\ x8a\x98^\x18\xfde\xae?\xbc\xf32\x19\xed\x81\x80\xb3\xb4?\xfe\x8b<]#\x03G\x9b\x16v\xa9\xf3y\xb0N\xe5- D\xc8\x02\xde\xc1\x99\x15|%G\xf9\xe8\x8d\xc7\n\xcc\xb7\xff\x00\x14\xbaR\x90;Su\x7f\xfb\xae\xcf \xe1n\xff\x00\x98\x84\x8c\xc5.\xfb\xb3m\x03[R3q\tT\xa9\x96\xb2\xe5\xa6\x85g&y\xaa+]q\xb5Q-\xda4w\xf6e\x89s\x01\xb4\x0b>HC\x9f\xdf\xb8\ xaa\xcd\xfb\xde\xc8\x17!\xbf\xbc\xbe?\xbb\xf4=A\xb7\xbbf\xa5\n\x1e\xe17\xdb\xb7\xe5y!J7)\xf5Z\xdf \x19\xb7\x1aj~\x1b\xa6\x9a\x81V\xcf\xe8e\xceb"4\xa8\xb8\x0c\x8dP!\xb0F\xddgX\x98\x92\xfa\xdf\x89\r\x83 \x91g%\xfeq\xb0Y\xf9\xd2/\xea\x9c\xd0\xea7\xdf\xe6[\xb3dn\x88\x1b\xd3L\x16\xa9\x15\xf4\xee\xc1\xa8\x99\ xbb,UB\x9bi@\xddh\xb7\x0f\xdd\xcf\xc1\x98\xb5\xbb\x84\x0b\xa2z\x11\xe8\x93w\x07B\x1f/\x19,q$\xe1\x0e \x8d\xa9z\n\xfc\x1b\xc96\x85\x97T\xf6\xb9\x91\xa9]\x03\xdfoly\xc0[\xea\x11\xb6\xeae+\xbb\xf9&~i\xd9\x95pi \x83+\x8cu\xb5i\xc2/\x11\xd7m\xec\x08\xa0\xe2c\xb6^\x85\xda\x929\xe4\xb8\x7f3U\x178u\xc8\xfe\xef\xd4[T\xfb \x81%\xa9\xd2\xfb\xddY\xf0\x11@<\xe9e3\x88m{"\xc5eQ\xfd3\xd7\x15\xad\xebu\xd8\xb9\xcc\x1aOi\x06\xdb2\xb7\ xfc\xa7\x95]\xc5eQ\xfd3\xd7\x15\xad\xebu\xd8\xb9\xcc\x1aOi\x06\xdb2\xb7\xfc\xa7\x95]`4\xff\x00\xf9H5\x00\xad\x8e\xcd\xb8fq%\xed\xcf\xfeJ\xc6\xc4\xe6.\x8d\xe8\x1dCQi\xfa\xbc\x81\n\xd4\xd3gJ\xe3\xcaV\xfdW\xd74\xc4\x0eG\xadBnkZ\x1f\xf9\xfd\xd1t\xad\x02\xa9sc\xf0\x1a\xadMD\x912l\xcf\xd0*\x1fZ\x8cZA\x07\xee\xca) s4\xb1\x8b\xd3+/\xf6\xac\x1e\xff\x00\xe5\xc1nn\xbd\x8f\x06\xcas\xfd6\xed\xf4k0\\\xb6K\xc27\x16\xb6\xf3:\xef+w\xcb7+(\xa5\xc2\xdb7\x1a\xd8\xf9H)\tT\xf1\x12p\x17\xf1\xdcj+\x9a\xa9\xc9n\xda\xb5\x98\x82\x0b=T}\x01N\xf7\x02\xdaG5;\x1ep\xfd\x19"\xfa\x1f\x9e\xff\x00\x8f%\x88\xe0\x1e\xc0\xb6z\x99\x8a\x0c\xbb\xb6\xef\xeb\xc6J\xd3\xf4\xe0E\x80\x96\xd4{tS\x1b\x03s`\x15\xad\xcf+eb\xed\x82\x95\x12fm\xe4\x87\n/?y\xcd\xf5\xbc\x03]\xe3\x0e\xbb\xe8\xcc\xd3\x85~\ x8f\x8cg\xb3?&\xff\x00H2\xdc\xb8\xef\xa7\xbc,\x87\xe4\xee\xe8\x10\x1e\xa6`\xe7 \xe1,Wu\x91J!n\xac\x06\xcf\xbb"/\xc8\xa5\x15\xd5\x12\xa7\x92\x81\xaa\x1a\xe9\x06I9\xad|\x89\xb9"cn*s\xe8\x8a\xcc\x8aG^\'\xa2\x0e\xfdC\xee\xabK\xabr\xa4k\xce\x87X\xb6\x8a\xf2]\xd9\xdd\x9f\xa6\xec\xd5Izy\x9a\xa1\x0b\xa1\xb1\x9b\x026`\x9e}6wE{"C>\x8a\xe9\xda!\xcf\x9a\xf5\x83e\x19.\x7f%\x9b\xff\x00m\xfd\xc5_\x96\xf6?\xaf\x18s\xa6 <\xc5/\x1e^\xff\x00Y\xed\xe9\xcd\xdd\x17\x9d\xe9\x8d\xe3{\xe2koH\xe7\xccZp9\x8b\x0et\​​xc7\xced\xcd\x13\x0b \x8b\x1f\xfal \xec7\x85\x89\x96m\xd8\x9c\xcf\xed}W\xd1\xbd\xd5f\xd9uT\x9e\xa3t\xed\x95\xe6\x86\xfe\xc9\xa8 \xaa\xbe\x86\x8dS\xdd\x9d\tZS\xe3i\xcd_\x82u\xd5\x93l\x1cE\xc2\xaeg\x1e\r:\xbb\x91\xfaJ\xa3\xb4v-\xc0~\ xc3\xd7\xa9\xbeQ%\xc1\xc5\xa3O8b\x11\x0fh\xb8$\x85\xb4[\x85\xf8\xb8\xad\xfb\xad\xcbM\xecO\x93y\xd0\x85\xd5 \xa6\xc5\x1aH5\x83\xaa\xda\x9bO\xa7I\xb1\xf5\xbd\x873\x17D\xc1NX\xb8\xec3\xf0\xa4izt\xc9\xd1;\xe6\xfd[\xf5k\xdb \x86X|\xd6>y\xe7\x9ey\xe7\x9ey\xe7\x9ey\xe7\x9ey\xe7\x9ey\xe7\x9ey\xe7\x9e\xaa\xeazV\xb8\xa4E\xb4\x89\xaeB\ x91\x19\xa9\xe1\xe9\x8e\xcbq u\xb1\xc1\xe9\x8d\xa1\xe1\xab(\x98\x17m\xcb\x0f\x99g\xf3/\xbf>}\xf4yw\x8ay\xa5V\xfb\x9f\xd3\x00\xeb\xe9\xf1m\xd9\xc4\xda\x0f\xea\x9f"\xc2\xb3\x89#\x82ky\x13\x14\x0b\ xd3\xcau:Q\xcfrj-\x84t,L"\x9ba\x0c\x02\x01\xb2\xfa7o\xd6F|\x9ceI\xf9\xb7Ty\xe7\x9ey\xe7\x9ey\xe7\x9ey\xe7\x9ey \xe7\x9ey\xe7\x9ey\xef\xff\xd9'

### 现在在脚本中使用相同的代码，如下所示：

```
def get_image(link):
    print link #Debug: Check if link has been passed
    image = urllib.urlopen(link).read()
    print type(image), image
    return image 
```

第一个打印语句返回：

> [http://www.example.com/getImage.php?e=23f4904fhsdajf0xns3erre32q886heipxd8c447gf8gs9b9d](http://www.example.com/getImage.php?e=23f4904fhsdajf0xns3erre32q886heipxd8c447gf8gs9b9d)

第二个：

> 类型，

为什么相同的代码会产生不同的结果？任何人都可以在这里想到一个可能的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T09:20:17.920

虽然我不知道为什么从脚本运行与从解释器运行时会得到不同的结果，但我首先要做的是放弃 urrlib 以支持 Requests 库：[http ://docs.python-requests.org /en/latest/user/quickstart/#response-content](http://docs.python-requests.org/en/latest/user/quickstart/#response-content)我一直在从脚本应用程序中获取许多不同的内容，到目前为止从未遇到过问题。

# logging - 使用 log4j 登录 Spring AOP

> ID：14660291
> 
> 赞同：0
> 
> 时间：2013-02-02T09:00:43.743
> 
> 标签：logging, log4j

我想使用 log4j 在日志文件中记录信息。我能够做到这一点，但我担心我会在日志文件中记录其他信息。

我使用“log.info(”..."); 记录信息。但在日志文件中，我看到许多关于调度程序启动的信息，控制器被调用。如何解决这个问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:31:18.973

我假设您已经阅读了 Log4J 配置[手册](http://logging.apache.org/log4j/2.x/manual/configuration.html)，如果您还没有，请先阅读。

要回答你的问题：你需要告诉 log4j 你想记录什么，什么不记录。下面的 log4j.xml 配置了 log4j，只是一个例子；它需要放在你的类路径中。

Log4j.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration PUBLIC "-//APACHE//DTD LOG4J 1.2//EN" "log4j.dtd">
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">

<!-- Appenders -->
<appender name="console" class="org.apache.log4j.ConsoleAppender">
    <param name="Threshold" value="INFO" />
    <param name="Target" value="System.out" />
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%-5p (%d) %t::%c: %m%n" />
    </layout>
</appender>

<!-- Application Loggers -->
<logger name="your package here"><level value="info" /></logger>

<!-- 3rdparty Loggers -->
<logger name="org.springframework"><level value="info" /></logger>

<!-- Root Logger -->
<root>
    <priority value="warn" />
    <appender-ref ref="console" />
</root>
</log4j:configuration> 
```

# wordpress - Wordpress MultiSite 域映射

> ID：14660297
> 
> 赞同：0
> 
> 时间：2013-02-02T09:02:01.120
> 
> 标签：wordpress

有一个关于 Wordpress Multisite 的问题。将其配置在子域（sub.domain.nl）上，并且它可以完美地用于子目录。但我无法让它与真实域一起使用。例如，我希望域 www.mydomain.nl 映射到 sub.domain.nl/mydomain/。我有的; 安装域映射插件并配置域。另一个域在不同的服务器上运行，然后是我的多站点安装。添加了指向运行多站点安装的服务器的 A 记录。还添加了指向运行多站点安装的子域的 CNAME 记录。然而，当我访问域名时，它会显示提供商的启动画面。

有人对我做错了什么有任何建议吗？

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T19:19:43.520

您是否添加了通配符作为 CNAME？*.domain.com 允许 wordpress 处理映射任务，而不是您的域提供商。

# php - PHP 在 Javascript 破坏脚本中生成内容

> ID：14660300
> 
> 赞同：0
> 
> 时间：2013-02-02T09:02:30.310
> 
> 标签：php, javascript, wordpress, while-loop

我有一个网站，其中包含一些带有淡入淡出的 Javascript 旋转内容。该脚本工作正常，直到我在其中添加一个 PHP while 循环，然后它失败了。我正在使用 PHP 从 wordpress 帖子中提取内容。

这是隔离代码（[http://jsfiddle.net/dzz8M/2/](http://jsfiddle.net/dzz8M/2/)）。如果您删除 PHP，您会注意到脚本可以正常工作，并且您可以在此处 ( [http://www.smartcallclaims.com/indexx.php/](http://www.smartcallclaims.com/indexx.php/) ) 看到 php 输出正常。

当您检查该链接的来源并从 JSfiddle 中查找 JavaScript 时，您会看到 PHP 已在脚本中生成它的内容。（我知道它添加了一个`<p>`标签，这不是问题）

有人可以告诉我为什么 PHP 会破坏 javascript 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T09:14:37.360

您的问题是引号中的一个未转义的换行符：

```
"\&nbsp;&nbsp;&nbsp;&nbsp;<p>this is a good web test</p>
<div id='quoteauthor'>Ben Harrison</div>", 
```

这不是有效的 JavaScript。您必须以某种方式对其进行转义，例如通过[`str_replace()`](http://php.net/manual/en/function.str-replace.php)在创建这些字符串的 PHP 函数中使用。

```
str_replace("\n","&nbsp;",$string) 
```

# c# - MVC4 最佳实践数据库模型 v 视图模型（传递给视图）

> ID：14660306
> 
> 赞同：3
> 
> 时间：2013-02-02T09:03:15.257
> 
> 标签：c#, entity-framework, asp.net-mvc-4

我想从一开始就养成好习惯，所以我有一个问题和一个问题：

我一直在做以下一直在工作的事情，然后我读了这篇文章

[这里](https://stackoverflow.com/questions/5326515/create-a-dropdown-list-for-mvc3-using-entity-framework-edmx-model-razor-vie)

我一直在做的这个例子：

控制器

```
public ActionResult OneDollar130(Int32 number)
{
    MyEDM db = new MyEDM();
    MyDBModel model = db.MyTable.Where(t => t.Current == 1 && t.No == number).First();
    return View(model);
} 
```

看法

```
@model MyProject.MyDBModel
<table>
  <tr>
    @if (Model.fldNo1 == "")
    {
        <td class="numberTD">
            @Html.ActionLink("1", "Number1", "Number", new { model = Model, number = 1 }, null)
        </td>
    }
    else
    {
        <td class="numberTD2">
            @Html.ActionLink("1", "Number2", "Number", new { model = Model, number = 1 })
        </td>
     }
  </tr>
</table> 
```

我正在使用我的 EDM 中的模型并将其传递给视图。

我在上面的帖子中读到我不应该将我的数据库模型传递给视图，因为这是不好的做法。这让我有些担心，因为我想做得对。

因此，基于上面的帖子，我将代码更改为进行实验并遇到了障碍：

控制器

```
public ActionResult OneDollar112(Int32 TableNo)
{
    return View(new getOneDollar112Game(TableNo));
} 
```

模型

```
public class getMyModel
{
    MyEDM db = new MyEDM();
    public MyDBModel MyModel { get; set; }

    public getMyModel() { }
    public getMyModel(Int32 number)
    {
        MyModel = db.MyTable
            .Where(t => t.Current == 1 && t.No == numbner).First();
    }
} 
```

看法

```
@model MyProject.Models.getMyModel
<table>
  <tr>
    @if (Model.fldNo1 == "")
    {
        <td class="numberTD">
            @Html.ActionLink("1", "Number1", "Number", new { model = Model, number = 1 }, null)
        </td>
    }
    else
    {
        <td class="numberTD2">
            @Html.ActionLink("1", "Number2", "Number", new { model = Model, number = 1 })
        </td>
    }
  </tr>
</table> 
```

好的，所以我的两个问题是：

1.  哪个是最佳实践……我之前所做的是否违反了不将数据库模型传递给视图的规则？

2.  如果第二种方法是正确的（我假设），为什么我不断收到 fldNo1 不存在的错误？

例如：CS1061：“MyProject.Models.getMyModel”不包含“fldNo1”的定义，并且找不到接受“MyProject.Models.getMyModel”类型的第一个参数的扩展方法“fldNo1”（您是否缺少 using 指令还是汇编参考？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T09:35:42.333

我也不喜欢使用数据库对象作为模型。

我所做的是依赖我项目中的 MVC 结构。

`Views`- 包含视图

`Models`- 包含模型，专用于视图

`Controllers`- 包含控制器，还负责在数据库和视图模型之间进行转换。

在我的控制器中，我添加了存储库（请参阅[存储库模式](http://msdn.microsoft.com/en-us/library/ff649690.aspx)）以与数据库进行通信。如果我想在我的视图中显示一个用户，我最终会得到这样的东西

```
public ActionResult Show()
{
    // entity model
    var user = _userRepository.GetUserByName(User.Identity.Name);

    // translate to view model
    var model = new User
    {
        Name = user.Name,
        EmailAddress = user.EmailAddress
    }
    // Send the view model to the view
    return View(model);
} 
```

这有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T09:58:46.763

至少出于两个原因，您应该有单独的模型和视图模型：

## 1\. 安全

MVC 中的默认模型绑定器将与任何匹配的发布数据字段绑定到模型属性。这提供了一个可以被利用的安全整体，如果您有不打算更新但在模型中的属性（例如，使用通常不显示的属性名称伪造回帖）

通过使用 ViewModel 并将每个必需的属性从 ViewModel 显式传递到实际模型，您可以防御此攻击向量

## 2\. 复杂性

大多数合理的应用程序将需要每个视图的大量模型和模型集合

例如，一个基本的 CRM 客户视图可能有：客户详细信息，但不包括分数、姓名和电话号码列表、最近交易的摘要列表、注册产品列表等。这些可能存在于具有姓名和电话号码的复杂对象集合中在不同的模型中，最近的交易可能是订单号、订单行总数、只有前三个 SKU 代码等。

ViewModel 允许您从模型和静态数据缓存中构建显示所需的部分和摘要。结果应该简化构建视图的工作流程，并使其更易于测试

通常有一条从简单 ViewModel 到实际使用的最终复杂 ViewModel 的继承路径

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T09:43:47.467

1）我编辑了你的代码。

行动：

```
public ActionResult OneDollar112(Int32 tableNo)
{
    return View(new OneDollar112ViewModel(tableNo));
} 
```

模型：

```
public class OneDollar112ViewModel
{
    private static MyEDM db = new MyEDM();
    private MyDBModel myModel;

    public string fldNo1 
    {
        get 
        { 
            return myModel == null
                ? myModel.fldNo1
                : null;
        }

        set 
        {
            // Your set logic here 
        }
    }    

    public OneDollar112ViewModel(Int32 number)
    {
        myModel = db.MyTable
            .Where(t => t.Current == 1 && t.No == numbner).SingleOrDefault();
    }
} 
```

看法：

```
@model MyProject.Models.OneDollar112ViewModel
<table>
    <tr>
    @if (Model.fldNo1 == "")
    {
        <td class="numberTD">
            @Html.ActionLink("1", "Number1", "Number", new { model = Model, number = 1 }, null)
        </td>
    }
    else
    {
        <td class="numberTD2">
            @Html.ActionLink("1", "Number2", "Number", new { model = Model, number = 1 })
        </td>
    }
    </tr>
</table> 
```

2）您应该使用视图模型将您的业务逻辑与您可以封装在服务中的数据层分开，并在未来利用依赖注入。

# ios - xcode KML 查看器仅在地图上显示约 5 英里

> ID：14660309
> 
> 赞同：3
> 
> 时间：2013-02-02T09:04:05.893
> 
> 标签：ios, maps

我有一个包含 2000 多个地点的 KML 文件，但是当我使用它时，加载所有地点需要 5 分钟以上。现在我的问题是是否可以加载距离当地仅约 5 英里的地方的地图，并为用户添加一个按钮，以便他们在需要时单击它以使用所有地方。

请帮助我，我是业余程序员，找不到解决方案，谢谢您的提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:16:18.077

您应该为您的和特定的 KML 地标创建[`CLLocation`](https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html)对象，然后您可以使用它们来查看它们的距离（以米为单位）。鉴于每英里有 1,609.34 米，因此五英里是 8,046.72 米：`currentLocation``placemarkLocation`[`distanceFromLocation`](https://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html#//apple_ref/doc/uid/TP40007126-CH3-SW18)

```
CLLocation *placemarkLocation = [[CLLocation alloc] initWithLatitude:latitude
                                                           longitude:longitude];

if ([placemarkLocation distanceFromLocation:currentLocation] < 8046.72)
{
    // add placemark to map
}
else
{
    // don't
} 
```

* * *

我有两个后续观察：

1.  您说加载过程需要 5 分钟。我觉得这很可疑，想知道你是否还有其他事情发生。我只是为了笑声和笑容，在地图上添加了 2000 个注释，这花了几秒钟，而不是几分钟。我建议您进行一些诊断以确定延迟的来源，因为如果问题是 XML 解析或其他问题，那么优化地图生成是没有意义的。做一些诊断工作来确定延迟的真正原因。

    例如，如果问题是您正在通过 Internet 下载一个巨大的 KML 文件，该文件以数十或数百兆字节为单位，那么任何优化对`MKMapView`整体性能的影响都可以忽略不计。这只是一个随机示例，但请确保您真正了解问题的根源。

2.  虽然在 iPhone 5 上向我添加 2000 个注释需要`MKMapView`几秒钟，但这显然不是一个很好的用户体验（就几秒钟的延迟而言，还有两千个注释的想法，你显然无法在 iPhone 屏幕上进行视觉区分）。您建议抓住 5 英里范围内的地标，并让用户可以选择全部选择它们。我可能会建议一种不同的方法：

    与其编写这种“五英里或全部”逻辑，我建议您查看`region`or`visibleMapRect`的`MKMapView`，并显示属于该区域的注释 or `MKMapRect`。或者，更好的是，只显示该区域内的 100 个注释。而且，如果您将其与[`regionDidChangeAnimated`](http://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/doc/uid/TP40008204-CH3-SW4)例程挂钩，它将在需要时获得新的注释。

# javascript - jQuery无法获取上一张图片src

> ID：14660310
> 
> 赞同：0
> 
> 时间：2013-02-02T09:04:07.207
> 
> 标签：javascript, jquery, dom, image

我有这种情况：

```
<img class="prev" data-modal-img-src="asd"/>
<span></span>
<img class="next"/> 
```

现在点击我想获得 .prev img 元素 src attr，我这样做：

```
$(function(){
$('span').bind('click',function(){
 var _img_src = $(this).prev('img').attr('data-modal-img-src');
 alert(_img_src);
});
}); 
```

它没有按预期工作，有什么建议吗？

PS：不要使用 -1 就像是 rayining -1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T09:05:23.987

要获得 prev 他们应该有共同的父母可以通过`body`标签`div`等，而你没有属性`'data-modal-img-src'`。您应该使用`on`而不是 bind 因为 bind is *deprecated*。也使用`data()`代替`attr()`数据属性。

> **prev()**，获取匹配元素集中每个元素的前一个兄弟元素，可选地由选择器过滤，[jQuery 文档](http://api.jquery.com/prev/)。

**[现场演示](http://jsfiddle.net/5YAfJ/2/)**

```
<img class="prev" data-modal-img-src = "123"/>
<span></span>
<img class="next"/>

$(function () {
    $('span').bind('click', function () {
        var _img_src = $(this).prev('img').data('modal-img-src');
        alert(_img_src);
    });
}); 
```

使用`data()`

**[现场演示](http://jsfiddle.net/5YAfJ/1/)**

```
$(function () {
    $('span').bind('click', function () {
        var _img_src = $(this).prev('img').data('modal-img-src');
        alert(_img_src);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T09:06:24.763

使用`data()`而不是`attr()`

```
$(this).prev('img').data('modal-img-src') 
```

# delphi - 为什么我的组件会自动将其他单元添加到使用界面？

> ID：14660311
> 
> 赞同：12
> 
> 时间：2013-02-02T09:04:18.297
> 
> 标签：delphi

我一直在写一些我自己的自定义组件，一些只是从其他组件中派生而来，例如 TCustomButton、TCustomListBox 等。

可以说我有`TMyButton = class(TCustomButton)`，这是在一个名为 MyButton 的单元中，我已将该组件注册在一个打包并安装到 IDE 中。

现在我将创建一个新的空项目并将 TMyButton 拖放到表单中。当我编译项目时，它会自动将这些单元添加到接口部分：

```
.., StdCtrls, MyButton; 
```

我期待 MyButton 当然会被添加，但希望 StdCtrls 不会。

这还不错，但我的其他一些组件更糟糕，例如一个来自`TCustomActionMainMenuBar`，当我将它添加到我的表单并编译时，我添加了这些额外的单元：

```
.., ToolWin, ActnMan, ActnCtrls, ActnMenus, MyMenu; 
```

我想创建自己的组件的原因之一是防止将这么多的单元名称添加到接口部分，我想做自己的绘画并更改它们的默认属性等。

当我在表单中添加 3 或 4 个组件时，会自动添加额外的 6-10 个单位名称，我不希望这种情况发生。

所以我的问题 - 是否可以防止 IDE 自动将单元名称添加到接口部分？

事实上，在我自己的组件源的实际使用界面中，我已经有了“不需要的”单元名称，我认为这已经足够了。我的组件知道它们需要哪些单元，那么为什么表单的源文件也必须知道/被允许包含名称？

我只想`MyButton, MyMenu;`自动添加，而不是与它们一起添加所有其他常见的单位名称。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-02T10:45:21.580

您的组件很有可能是从其他已注册的组件派生的`TSelectionEditor`- 派生实现（请参阅 参考资料`RegisterSelectionEditor()`），这些实现覆盖了虚拟`TSelectionEditor.RequiresUnits()`方法以将所需的单元插入到`uses`子句中。这样做的一个原因是，如果这些组件定义了依赖于其他单元中的类型的属性/事件。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-02T19:53:09.240

**tl;博士;**

无法阻止添加这些单位，您不应再关心它。

* * *

> 我的组件知道它们需要哪些单元，那么为什么表单的源文件也需要知道名称呢？

你是对的，也是错的。当然，如果代码仅限于创建组件，则只需要声明该组件的单元。运行时和设计时。但是当代码开发时，并且您想要实现需要来自祖先单元的类型的事件处理程序，那么您的代码需要在 uses 子句中使用这些单元。运行时和设计时。

**示例：**当`TDBGrid`从`DBGrids`表单的单元中删除 a 时，也会`Grids`添加单元，因为除其他外，已发布事件的`State`参数类型 ,是在祖先单元中声明的。在设计器中双击该事件会导致添加以下处理程序：`TGridDrawState``OnDrawDataCell`

```
procedure TForm1.DBGrid1DrawDataCell(Sender: TObject; const Rect: TRect;
  Field: TField; State: TGridDrawState);
begin

end; 
```

现在，由于 的存在`TGridDrawState`，这个源文件需要知道`Grids`单位。

**结论：**可能有太多的单元用于小开发，但总有足够的单元用于实现所有已发布的事件。

* * *

我对它的实际工作原理做了一些研究。我已经赞成[Remy 的回答](https://stackoverflow.com/a/14661060/757830)，因为没有它我不会想到这样做，但他实际上并不完全正确。

考虑以下示例单位：

```
unit AwLabel;

interface

uses
  Classes, StdCtrls;

type
  TAwLabelStyle = (bsWide, bsTall);

  TAwLabel = class(TLabel)
  private
    FStyle: TAwLabelStyle;
  published
    property Style: TAwLabelStyle read FStyle write FStyle default bsWide;
  end;

implementation

end. 
```

```
unit AwLabelEx;

interface

uses
  Classes, AwLabel;

type
  TAwLabelEx = class(TAwLabel);

implementation

end. 
```

```
unit AwReg;

interface

uses
  AwLabel, AwLabelEx;

procedure Register;

implementation

procedure Register;
begin
  RegisterComponents('Samples', [TAwLabel, TAwLabelEx]);
end; 
```

现在，如果您`TAwLabelEx`在表单上放置一个组件，就会添加单元`AwLabel`和单元`AwLabelEx`，这会自动发生。不需要特别的参与。该类型`AwLabel`需要单位`TAwLabelStyle`。请注意，在这种情况下，它与事件无关。剩下的唯一论点是该类型用于组件定义的已发布部分。

* * *

就像[`ISelectionEditor.RequiresUnits`](http://docwiki.embarcadero.com/Libraries/XE2/en/DesignIntf.ISelectionEditor.RequiresUnits)雷米所说的那样？

考虑我们搬到`TAwLabelStyle`另一个单元：

```
unit AwTypes;

interface

type
  TAwLabelStyle = (bsWide, bsTall);

implementation

end. 
```

当您现在在表单上放置一个`TAwLabel`或`TAwLabelEx`组件时，*不会*添加该`AwTypes`单元。引用最后一个链接：

 *> **注意：**一个事件可能会使用一个类型，它的参数之一既不在类单元中，也不在其任何祖先的单元中。在这种情况下，应注册实现 RequiresUnits 的选择编辑器并将其用于声明事件所需类型的每个单元。

所以，让我们注册一个选择编辑器：

```
unit AwReg;

interface

uses
  Classes, AwTypes, AwLabel, AwLabelEx, DesignIntf, DesignEditors;

type
  TAwLabelSelectionEditor = class(TSelectionEditor)
  public
    procedure RequiresUnits(Proc: TGetStrProc); override;
  end;

procedure Register;

implementation

procedure Register;
begin
  RegisterComponents('Samples', [TAwLabel, TAwLabelEx]);
  RegisterSelectionEditor(TAwLabel, TAwLabelSelectionEditor);
end;

{ TAwLabelSelectionEditor }

procedure TAwLabelSelectionEditor.RequiresUnits(Proc: TGetStrProc);
begin
  Proc('AwTypes');
end;

end. 
```

现在在表单上删除`TAwLabel`or`TAwLabelEx`组件确实会导致将`AwTypes`单元添加到使用子句中；

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-02T11:50:01.767

TCustomActionMainMenuBar 的继承树如下所示：

```
System.Classes.TObject
System.Classes.TPersistent
System.Classes.TComponent
Vcl.Controls.TControl
Vcl.Controls.TWinControl
Vcl.ToolWin.TToolWindow
Vcl.ActnMan.TCustomActionBar
Vcl.ActnCtrls.TCustomActionDockBar
Vcl.ActnMenus.TCustomActionMenuBar
Vcl.ActnMenus.TCustomActionMainMenuBar
Vcl.ActnMenus.TActionMainMenuBar 
```

当您在表单中包含组件时，此树中出现的所有单元都将被绘制到使用子句中 + 每次保存时都会重新插入。正如其他人所说，组件还可以通过使用 Open Tools API 来包含不包含祖先的其他单元。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-02T09:17:07.520

发生这种情况是因为您的组件的祖先正在使用`Open Tools API`以下代码向 uses 子句添加一些单元：

```
uses
  ToolsAPI;

var
  currentProject: IOTAProject;
begin
  currentProject := GetActiveProject();
  currentProject.AddFile('StdCtrls.pas', True); 
```

您可能还会发现[这个问题](https://stackoverflow.com/questions/10293177/delphi-adding-unit-name-automatically-in-the-dpr-uses)很有趣。*

# c# - 将文件上传中的图像保存到另一个项目中

> ID：14660314
> 
> 赞同：1
> 
> 时间：2013-02-02T09:05:05.050
> 
> 标签：c#, asp.net, file-upload

我正在使用 microsoft visual studio 并创建了一个包含 2 个项目的解决方案文件。在项目 A 中的一个 aspx 文件中，我有一个文件上传控件。

当单击“上传”按钮时，它会将我上传的图像保存到项目 A 中的文件夹以及项目 B 中的文件夹中。我只能使用以下代码将图像保存到项目 A 文件夹中。

```
FileUpload1.SaveAs(Server.MapPath("~/Images/" + filename)); 
```

但我无法将图像保存到项目 B 文件夹中。使用下面的代码，它产生了这个错误：*ImagesFile is a folder inside Project B*

```
FileUpload1.SaveAs(Server.MapPath("~/ImagesFile/" + filename));

Could not find a part of the path 'C:\Users\Desktop\DSC000015.JPG'. 
```

无论如何我可以访问另一个项目的文件路径？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T09:21:01.570

这里的问题是 Server.MapPath 总是给你一个到你的 web 目录内部的路径。它永远无法在您的应用程序之外映射路径。

你有两种方法来完成这个任务。

1.在 web.config 文件中保存一个路径，该路径应该是一个绝对路径，即“c:\users\desktop\”，并将图像名称附加到该路径。

或者

2.您必须在项目 2 中创建一个页面，该页面应接受帖子中的图像并保存在特定文件夹中。因此，每当在项目 1 中上传图像时，它会依次将其发布到项目 2，最终将其保存到映射到其目录内的文件夹中。

# c++ - 制作带有或不带有指针的数据成员对象

> ID：14660315
> 
> 赞同：1
> 
> 时间：2013-02-02T09:05:13.130
> 
> 标签：c++

我花了几个小时在一些优秀的 C++ 书籍以及这里关于堆栈溢出的问题上寻找讨论，虽然我看到了很多关于“堆与堆栈”问题的问题，但我正在寻找更具体的问题了解在创建类的对象成员时是否使用指针，即使用组合。

例如：

```
class A{
B c;
} 
```

对比

```
class A{
B*c;
} 
```

在第一个示例中，这并不是真正的“堆栈”分配，而是“静态存储区域”中的分配，这是另一回事，因此我认为堆栈与堆的讨论不适用。

我不清楚两者的优缺点。似乎我阅读的大多数代码都使用第二个选项，但为什么呢？

可能我不知道这些技术的正确术语来正确搜索该站点，否则根本没有关于此的问题。如果在其他地方确实有与此相关的答案，请务必让我知道如何找到它们，但在局部变量的上下文中，几乎所有内容似乎都更多地是关于堆栈与堆的，我想我可以处理好.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T09:09:16.870

人们使用第二个选项的原因是：

```
class A { B b;}; // error, order of classes wrong
class B { }; 
```

C++ 的这个简单特性使得很难用 B b 构建工作系统；风格。您必须将所有相关的类放到同一个文件中，并将这些类重新排序为完全正确的顺序。

继承也对订单有一些魔力：

```
class A : public B { }; // error, order of classes wrong
class B { }; 
```

所以使用继承和 B b; 一起完全固定类的顺序，大量数据成员将是噩梦。（请注意，像 float 和 int 这样的类型没有顺序问题 - 也可以为类正确执行此操作）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T09:29:09.090

将指向对象的指针作为类的成员的另一个原因是，如果您确实需要它指向某物并且您希望指向的对象经常更改。例如，想象一个类在某些系统或框架中保留指向活动窗口的指针（完全是虚构的）。下面所指向的对象的内存`activeWindow`会被分配到别处，而被指向的对象本身也会经常变化。

```
class Monitor
{
...
Window* activeWindow
...
} 
```

另一方面，拥有所有内容的指针并使用`new`运算符（或`malloc()`在 C 中）手动分配内存往往很慢，因为在堆上分配内存比在堆栈上分配内存要慢，并且以后还需要手动释放。所以应该尽量避免。

如果您可以取消将对象放在类的存储区域中并且不在堆上分配它，那么就这样做。

```
class foo
{
B c;
}; 
```

肯定比

```
class foo
{
public:
 foo()
 {
   this->c = new B();
 }
 ~foo()
 {
   delete this->c;
 }

private:
B* c
}; 
```

但话又说回来，这一切都取决于`class B`

# javascript - 调整数据表的宽度和填充

> ID：14660323
> 
> 赞同：0
> 
> 时间：2013-02-02T09:05:54.533
> 
> 标签：javascript, jquery, css, datatables

我有大约 6 个填充或宽度不同的表。当我不使用数据表时，它们的填充和宽度是内联设置的。现在内联不起作用。

数据表：http : [//datatables.net/index](http://datatables.net/index)

我现在该怎么办？

我只需要能够向数据表添加一些填充和宽度内联，或者我可以给这些表一个类名，然后给它们填充和宽度。

问题是内联样式不适用于数据表。

使用此代码：

```
 <table  class="datatable display " border="0" cellpadding="0" cellspacing="1"style="width: 87%;margin: -1px 0 14px 27px;">
                <thead>
                    <tr>
                    <th>Name</th>
                    <th>DOB</th>
                    <th>Age</th>
                    <th>Sex</th>
                    <th>Action</th>
                    </tr>
                    </thead>
                    <tbody>
                </tbody>
            </table> 
```

结果如下： ![在此处输入图像描述](../Images/8010e6465a07ed4863de098cacbb73ef.png)

由于边距和宽度，它没有正确显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T09:19:06.733

你检查过这个吗？[数据表自定义样式](http://datatables.net/styling/custom_classes)

# android - android滑块实现

> ID：14660328
> 
> 赞同：0
> 
> 时间：2013-02-02T09:06:34.907
> 
> 标签：android, android-view, android-framelayout

我正在尝试像 facebook android 应用程序一样实现滑块菜单。

我已成功滑动菜单并将其重新滑回。

我有两个适合框架布局的视图。
1\. 主布局 (X)
2\. 菜单布局。(Y)

我将 X 向右滑动，在滑动时显示 Y，在向后滑动时，我将 X 移回 0，隐藏菜单。

```
@Override
public void setContentView(int layout) {

    FrameLayout frame = new FrameLayout(getBaseContext());
    frame.setLayoutParams(new FrameLayout.LayoutParams(FrameLayout.LayoutParams.FILL_PARENT, FrameLayout.LayoutParams.FILL_PARENT));

    LayoutInflater inflator = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    mainLayout = inflator.inflate(layout, null);

    menuList = inflator.inflate(R.layout.menu_page, null);

    fakeView= inflator.inflate(R.layout.fake_transparent_view, null);
    menuAnimator = new MenuAnimation(mainLayout,menuList,fakeView);
    frame.addView(menuList);
    frame.addView(mainLayout);
    frame.addView(fakeView);

    fakeView.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(mainLayout.getLeft()>0)
            {

            menuAnimator.moveMenu("left");
            }

        }
    });

    super.setContentView(frame);

}

public void moveMenu(String direction) {
        int width=(int) (QuikrApplication.getWidth()*.85);
        if (direction.equals("right")) {
            this.direction="right";
            fakeView.setVisibility(View.VISIBLE);
            TranslateAnimation moveRight = new TranslateAnimation(0, width, 0, 0);
            moveRight.setDuration(500);
            parentLayout.setAnimation(moveRight);
            moveRight.setAnimationListener(animationListner);
            parentLayout.startAnimation(moveRight);
            fakeView.startAnimation(moveRight);
        }
        else if (direction.equals("left")){
            this.direction="left";

            TranslateAnimation moveLeft = new TranslateAnimation(0, -width, 0, 0);
            moveLeft.setDuration(500);
            parentLayout.setAnimation(moveLeft);
            moveLeft.setAnimationListener(animationListner);
            parentLayout.startAnimation(moveLeft);
            fakeView.startAnimation(moveLeft);
        }
    } 
```

现在的问题是当我在主视图中异步执行一些操作时，主视图是重新定位（当菜单可见时）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T10:50:35.423

除了 LibSlideMenu 之外，github 上还有另一个项目，现在我已经在几个非常容易实现的项目上使用了超过 280 多个提交，您也可以查看它。

[https://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T10:00:47.170

尝试这个，

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<FrameLayout
    android:id="@+id/menu_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/black"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/fake_layouy"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:visibility="gone" >
    </LinearLayout>

    <Button
        android:id="@+id/button1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="inner button" />
</FrameLayout>

<RelativeLayout
    android:id="@+id/main_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FFFFFF"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="menu" />
</RelativeLayout> 
```

爪哇代码

```
 public class MainActivity extends Activity {

private View toplayout;
private View sublayout;
private View fakeLayout;
private int screenWidth;
private int animToPosition;
private boolean menuOpen = false;
private int oldLeft;
private int oldTop;
private int newleft;
private int newTop;
private Button button1;
private Button button2;
private AnimationListener AL;
private DisplayMetrics metrics;
private Display display;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.activity_ugsimply_beta);
    toplayout = (View) findViewById(R.id.main_layout);
    sublayout = (View) findViewById(R.id.menu_layout);
    fakeLayout = (View) findViewById(R.id.fake_layouy);
    button1 = (Button) findViewById(R.id.button1);
    button2 = (Button) findViewById(R.id.button2);
    metrics = new DisplayMetrics();
    this.getWindowManager().getDefaultDisplay().getMetrics(metrics);
    display = getWindowManager().getDefaultDisplay();
    screenWidth = display.getWidth();
    int calcAnimatePosition = (screenWidth / 4);
    animToPosition = screenWidth - calcAnimatePosition;
    RelativeLayout.LayoutParams parms = new RelativeLayout.LayoutParams(
            animToPosition, RelativeLayout.LayoutParams.FILL_PARENT);
    sublayout.setLayoutParams(parms);

    /** Animatio Listner */

    AL = new AnimationListener() {

        @Override
        public void onAnimationStart(Animation animation) {
            // TODO Auto-generated method stub
            button2.setClickable(false);
            toplayout.setEnabled(false);
        }

        @Override
        public void onAnimationRepeat(Animation animation) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onAnimationEnd(Animation animation) {
            // TODO Auto-generated method stub
            if (menuOpen) {

                toplayout.layout(oldLeft, oldTop,
                        oldLeft + toplayout.getMeasuredWidth(), oldTop
                                + toplayout.getMeasuredHeight());
                menuOpen = false;
                // sublayout.setEnabled(false);
                button2.setClickable(true);
                toplayout.setEnabled(true);

            } else if (!menuOpen) {

                toplayout.layout(newleft, newTop,
                        newleft + toplayout.getMeasuredWidth(), newTop
                                + toplayout.getMeasuredHeight());
                button2.setClickable(true);

                menuOpen = true;
                toplayout.setEnabled(true);
            }

        }
    };

    button2.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if (!menuOpen) {
                animSlideRight();
            }
        }
    });

    button1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if (menuOpen) {

                animSlideLeft();
            }
        }
    });

}

/** Animation right */

private void animSlideRight() {

    fakeLayout.setVisibility(View.VISIBLE);
    newleft = toplayout.getLeft() + animToPosition;

    newTop = toplayout.getTop();
    TranslateAnimation slideRight = new TranslateAnimation(0, newleft, 0, 0);
    slideRight.setDuration(500);
    slideRight.setFillEnabled(true);
    slideRight.setAnimationListener(AL);
    toplayout.startAnimation(slideRight);

}

/** Animation left */

private void animSlideLeft() {
    // TODO Auto-generated method stub
    fakeLayout.setVisibility(View.GONE);
    oldLeft = toplayout.getLeft() - animToPosition;

    oldTop = toplayout.getTop();
    TranslateAnimation slideLeft = new TranslateAnimation(newleft, oldLeft,
            0, 0);
    slideLeft.setDuration(500);
    slideLeft.setFillEnabled(true);
    slideLeft.setAnimationListener(AL);
    toplayout.setAnimation(slideLeft);

} 
```

}

单击菜单按钮时，它会向右滑动动画。然后单击内部按钮，它会向左显示动画。检查下面的屏幕

![在此处输入图像描述](../Images/8a394c28914a0830d974b8a8f8e18780.png) ![在此处输入图像描述](../Images/55ead38c008d456e5305978890ed79ef.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T09:12:54.300

如果我可以提出一些建议，在 github 上有一个非常好的用于 facebook/google+ 样式滑块菜单的库实现：

[https://github.com/bk138/LibSlideMenu](https://github.com/bk138/LibSlideMenu)

我用过一两个项目，效果很好。你应该试试看。

# mysql - mySQL Left Join 与多个表

> ID：14660330
> 
> 赞同：2
> 
> 时间：2013-02-02T09:06:58.883
> 
> 标签：mysql, oracle, left-join

我有 3 个表使用外键链接在一起。其中一张表包含可能为空的数据，但我仍然希望它显示。我也有多种条件。

这是我到目前为止所拥有的，但它不起作用：

```
SELECT ord.OrdNo, ord.OrdDate, cu.CustNo, cu.CustFirstName, cu.CustLastName, em.EmpNo, em.EmpFirstName, em.EmpLastName
FROM OrderTbl ord, Customer cu, Employee em
WHERE cu.CustNo=ord.CustNo
AND em.EmpNo=ord.EmpNo (+)
AND ( OrdDate BETWEEN '01-Jan-04'
AND '31-Jan-04')
AND cu.CustState = 'CO' 
```

基本上，订单表上的员工信息可能为空，但我仍然希望显示条目。任何帮助将不胜感激，因为我才开始学习 SQL。

编辑：运行上述查询没有错误。只是我缺少具有空字段的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T09:11:01.073

请使用`JOINS`LEFT JOIN 来显示所有员工的订单：

```
SELECT ord.OrdNo, ord.OrdDate, cu.CustNo, cu.CustFirstName, cu.CustLastName, 
em.EmpNo, em.EmpFirstName, em.EmpLastName
FROM OrderTbl ord
  LEFT JOIN 
  Customer cu
    ON  cu.CustNo=ord.CustNo
    AND cu.CustState = 'CO'
  LEFT JOIN 
  Employee em
    ON  em.EmpNo=ord.EmpNo
WHERE OrdDate BETWEEN '2004-01-01' 
                  AND '2004-01-31'
; 
```

参考：

[JOIN 的可视化表示：](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

![在此处输入图像描述](../Images/2f5ea00ecad0ce6f7a896f0eee8c8780.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T09:14:38.210

```
SELECT ord.OrdNo, ord.OrdDate, cu.CustNo, cu.CustFirstName, cu.CustLastName, em.EmpNo, em.EmpFirstName, em.EmpLastName FROM OrderTbl ord, Customer cu, Employee em WHERE cu.CustNo=ord.CustNo AND em.EmpNo=ord.EmpNo AND ( ord.OrdDate BETWEEN 'YYYY-mm-dd' AND 'YYYY-mm-dd') AND cu.CustState = 'CO' 
```

YYYY-mm-dd 这在 between 子句中支持。例如：- 从日期 = 2013-01-01 到日期 = 2013-01-31

试试这样。可能会帮助你。

# android - 将字符串转换为加倍

> ID：14660331
> 
> 赞同：-1
> 
> 时间：2013-02-02T09:07:04.157
> 
> 标签：android, string, casting, double, android-edittext

我制作了一个简单的android应用程序，我从1个活动的EditText值进行了一些计算，一些乘法，求和和其他数学程序，并在另一个活动edittexs中将结果显示为双倍。所以有人可以告诉我是否有必要转换字符串值为进行计算而“加倍”，我该怎么做？

**Activity1.java**

```
Intent ic = new Intent(Calculator_1Activity.this,Calculator2a.class);
        ic.putExtra("e1", et1.getText().toString());
        ic.putExtra("e2", et2.getText().toString());
        ic.putExtra("e3", et3.getText().toString());
        ic.putExtra("e4", et4.getText().toString());
        ic.putExtra("e5", et5.getText().toString());
        ic.putExtra("e6", et6.getText().toString());
        ic.putExtra("e7", et7.getText().toString());
        ic.putExtra("e8", et8.getText().toString());

        startActivity(ic); 
```

我在activity2a中获取它的值，但不能进行计算..请帮助..:(

**Activity2a.java**

```
 Intent receiveIntent = this.getIntent();
        String etz1 = receiveIntent.getStringExtra("e1");
        String etz2 = receiveIntent.getStringExtra("e2");
        String etz3 = receiveIntent.getStringExtra("e3");
        String etz4 = receiveIntent.getStringExtra("e4");
        String etz5 = receiveIntent.getStringExtra("e5");
        String etz6 = receiveIntent.getStringExtra("e6");
        String etz7 = receiveIntent.getStringExtra("e7");
        String etz8 = receiveIntent.getStringExtra("e8");

        et1.setText(etz1);
        et2.setText(etz2);
        et3.setText(etz3);
        et4.setText(etz4);
        et5.setText(etz5);
        et6.setText(etz6);
        et7.setText(etz7);
        et8.setText(etz8); 
```

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T09:11:29.260

如果您想将 String 转换为 Double 进行计算，您可以这样做：

```
String myStringValue = "15.432";
double value = Double.parseDouble(myStringValue); 
```

在您的情况下，您可以这样做：

```
intent.putExtra("myKey", Double.parseDouble(et1.getText().toString())); 
```

最后一件事，您可以使用以下方法直接从您的意图中获得双倍：

```
double myValue = 1.00;
try {
     myValue = getIntent().getDoubleExtra("myKey", 1.00);
catch(NumberFormatException e){
      e.printStackTrace();
} 
```

如果需要，无需将其作为字符串获取，而是转换为双精度。

**编辑：** 据我了解，您希望从 EditText 中获得双倍值，进行一些计算，然后将它们/它发送到 Activity2 并将结果显示在另一个`EditText`. 如果这是正确的场景，首先你可以强制用户只输入数值，因为你需要用它们进行计算。如上所述，您可以将字符串转换为双精度。之后，只需使用 发送您的值`putExtra();`，在您的第二个活动中获取它们并在您的第二个活动中设置为文本`EditText`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T09:18:19.470

这是将 String 强制转换为 double 所必需的：

```
String myStringValue = "30.00";
double value = Double.parseDouble(myStringValue); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T09:14:10.443

做类似下面的事情

```
 Intent receiveIntent = this.getIntent();
        String etz1 = receiveIntent.getStringExtra("e1");

        double erz1Double = Double.parseDouble(etz1); //converting into double
      // follow same for all the string values, dont forget to add try Catch for number formatException, and null check for string values 
```

**编辑：-** 对于将双精度转换为字符串，有很多方法可以执行以下操作

```
 String erz1String = erz1Double + "";

       or

 String erz1String = String.valueOf(erz1Double); 
```

# c++ - 如何从基类构造函数调用派生类虚方法？

> ID：14660332
> 
> 赞同：2
> 
> 时间：2013-02-02T09:07:09.693
> 
> 标签：c++, c++11

```
class MyClass1
{
public:
  MyClass1()
  {
    init();
  }
  virtual void init()
  {
    printf("MyClass1 init");
  }
}

class MyClass2 : public MyClass1
{
public:
  virtual void init()
  {
    printf("MyClass2 init");
  }
}

int main()
{
  MyClass2 *obj = new MyClass2();
  return 0;
} 
```

我希望这个结果

```
"MyClass2 init" 
```

但它实际上显示了消息

```
"MyClass1 init" 
```

如何从基类构造函数调用派生类虚方法？

=== 更新1 ===

```
class MyClass1
{
public:
  MyClass1()
  {
    init();
  }
  virtual void init()
  {
    printf("MyClass1 init");
  }
}

class MyClass2 : public MyClass1
{
public:
  MyClass2()
    : MyClass1()
  {
  }

  virtual void init()
  {
    printf("MyClass2 init");
  }
} 
```

我希望 MyClass2 覆盖 MyClass1 init 方法但它仍然显示“MyClass1 init”

C++ 如何像 java/C# 覆盖方法一样工作？

=== 更新2 ===

```
class MyClass1
{
public:
  MyClass1()
  {
    init();   <--- can't work like test method ??? 
  }
  void test()
  {
    init();   <--- work fine
  }
  virtual void init()
  {
    printf("MyClass1 init");
  }
}

class MyClass2 : public MyClass1
{
public:
  MyClass2()
    : MyClass1()
  {
  }

  virtual void init()
  {
    printf("MyClass2 init");
  }
} 
```

我知道 obj->init() 会调用 MyClass2::init。
但我希望 C++ 可以在 Constructor 方法中运行。

虽然 obj->init() 可以解决。
但是希望代码可以少写一点。
有些人忘记调用 init()。

Java/C# 可以少写多做。但是 C++ 不能……这很令人沮丧。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T09:34:53.110

很明显，在构造的过程中`MyClass2`，`MyClass1`会先调用构造函数，即派生类对象的基类部分先于派生类部分构造。即使您明确尝试创建 的对象`MyClass2`，但在基类构造期间，虚函数也永远不会进入派生类。

因为基类构造函数在派生类构造函数之前执行，所以在基类构造函数运行时派生类数据成员尚未初始化。如果在基类构造期间调用的虚函数下降到派生类，派生类函数几乎肯定会引用本地数据成员，但这些数据成员还没有被初始化，这将导致未定义的行为。

参考你的课，为什么你有`virtual init`放在首位？构造函数应该分别完成工作。

> 如何从基类构造函数调用派生类虚方法？

这是个坏主意，永远不应该这样做！

```
class MyClass1
{
public:
  virtual ~MyClass1() { }
  virtual void doSomething()
  {
    printf("MyClass1 init");
  }
};

class MyClass2 : public MyClass1
{
public:
  virtual void doSomething()
  {
    printf("MyClass2 init");
  }
};

int main()
{
  MyClass1*obj = new MyClass2();
  obj->doSomething();
  delete obj;
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T09:14:40.963

一般来说，你不能。那是因为`MyClass2`构造函数还没有运行，所以如果`MyClass2::init()`被调用，任何成员变量都将被初始化。在此构造函数启动之前，出于虚拟目的，该对象被视为一个`MyClass1`实例。

例如：

```
class MyClass2 : public MyClass1
{
private:
    std::string xxx;
public:
    virtual void init()
    {
        xxx = "ops!"; //undefined if called from base class constructor
    }
}; 
```

赋值`xxx`将呈现未定义的行为，因为它的构造函数尚未运行。

鉴于您缺乏结尾`;`，我猜您的背景是 Java/C#。这些语言以不同的方式实现了这个问题，但这正是 C++ 的工作方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-23T17:14:42.743

我不确定这是否合法或将来可能会中断。但是，使用 lambda 函数，您可以将代码发送到基类以在构造函数期间执行。

```
class Base {
public:
    Base(std::function<void()> fnCall=nullptr) {
        if (fnCall) fnCall();
    }
    Base(const Base &base, std::function<void()> fnCall = nullptr) {
        DoSomethingAtBaseHere();
        if (fnCall) fnCall();
    }
};

class Derived: public Base {
public:
    Derived(std::function<void()> fnCall=nullptr) : Base([&]() {
        DoSomethingAtDerivedHere();
        if (fnCall) fnCall();
    }) {}
    Derived(const Derived &oth, std::function<void()> fnCall=nullptr) : 
    Base(oth, [&]() {
        DoSomethingInCopyConstructorAtDerivedHere();
        if (fnCall) fnCall();
    })  {}
}; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-03T02:06:59.010

我认为：
没有理由 C++ 不能做 java/C# 虚拟构造器机制。
我想打破 C++ 规则。
我也希望C++可以少写多做。
C++不提高就不会进步，让更多的人不容易入门。

```
class MyClass1
{
public:
  MyClass1()
  {
    init();
  }

  typedef void (MyClass1::virtual_init)();
  MyClass1(virtual_init vinit)
  {
    (this->*vinit)();
  }

  //virtual void init()
  void init()
  {
    printf("MyClass1 init");
  }
}

class MyClass2 : public MyClass1
{
public:
  MyClass2()
    : MyClass1(&MyClass2::init)
  {
  }

  //virtual void init()
  void init()
  {
    printf("MyClass2 init");
  }
} 
```

# html - 在中使用符号 标签

> ID：14660333
> 
> 赞同：0
> 
> 时间：2013-02-02T09:08:03.907
> 
> 标签：html, symbols, pre

通常要打印诸如 forall 符号之类的符号，您只需使用 &forall，但这似乎不适用于字面上打印出“&forall”的 pre 块。

```
<pre>
&forall o in orders
</pre> 
```

这个问题的解决方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T09:40:52.703

几乎所有浏览器都有这样的错误/功能，即许多实体引用如果没有尾随分号就无法识别，即使在省略分号有效的上下文中也是如此。正如其他人所建议的那样，使用可以`&forall;`绕过错误。[当 HTML 4.01 规范建议](http://www.w3.org/TR/REC-html40/charset.html#h-5.3)对所有实体引用使用尾随分号时，它间接引用了该错误。

另一种解决方案是使用 FOR ALL 字符“∀”本身，前提是您的文档是 UTF-8 编码并声明为这样。这使得源代码更具可读性。

这不依赖于`pre`标记的使用。问题是相同的，例如直接在`body`元素内的文本中。

请注意，`pre`元素默认使用等宽字体呈现。这不适合数学表达式（它们通常应该使用衬线字体显示），并且浏览器的默认等宽字体可能缺少“∀”字符或其他数学符号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T09:10:47.113

代码不只是`&forall`. 需要分号。

喜欢：`&forall;`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T09:10:48.253

你缺少分号

```
<pre>
&forall; o in orders
</pre> 
```

```
∀ o 在订单中

```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-02T09:09:53.790

它在`pre`标签中工作正常，您只是忘记了实体末尾的分号：

```
<pre>
&forall; o in orders
</pre> 
```

# ruby - 如何从 DataMapper::Collection 获取原始 SQL？

> ID：14660345
> 
> 赞同：2
> 
> 时间：2013-02-02T09:10:07.487
> 
> 标签：ruby, postgresql, ruby-datamapper

我正在使用最新版本的 postgresql、ruby 和 datamapper。

我像这样创建一个查询：

```
collection = Entry.all(:id => 2..4, :text => /test/) 
```

`collection`是一个`DataMapper::Collection`对象。`DataMapper::Query`只需调用即可获取对象`query = collection.query`。但是，如何将查询的原始 SQL 作为字符串获取？

我需要它是因为我必须自定义原始 SQL（我需要`SELECT DISTINCT`而不是仅需要`SELECT`），但我不想完全自己编写 SQL，因为我不确定是否可以编写**安全**查询。

我也很乐意以另一种方式归档我的目标，我愿意接受全新的建议；）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T11:11:24.463

这似乎不太容易，但这是一种骇人听闻的解决方案

```
collection = Entry.all(:id => 2..4, :text => /test/)

query = collection.query

DataMapper.repository.adapter.send(:select_statement,query) 
```

# python - 通过扩展 Python str 创建缓冲区类

> ID：14660346
> 
> 赞同：1
> 
> 时间：2013-02-02T09:10:08.597
> 
> 标签：python

我想这最好用代码和注释来解释：

```
import struct

class binary_buffer(str):
    def __init__(self, msg=""):
        self = msg
    def write_ubyte(self, ubyte):
        self += struct.pack("=B", ubyte)
        return len(self)

Output
>> bb = binary_buffer()
>> bb # Buffer starts out empty, as it should
''
>> bb.write_ubyte(200)
1   # We can see that we've successfully written one byte to the buffer
>> bb
''  # Huh? We just wrote something, but where has it gone? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T09:13:02.710

`str`s 是不可变的。所以，

```
self += struct.pack("=B", ubyte) 
```

被评估为

```
self = self + struct.pack("=B", ubyte) 
```

这为名称 self 分配了一个新值，但 self 和其他名称一样只是一个名称。一旦方法退出，名称（和关联的对象）就会被遗忘。

你想要一个[`bytearray`](http://docs.python.org/3/library/functions.html#bytearray)：

```
>>> bb = bytearray()
>>> bb.append(200)
>>> bb
bytearray(b'\xc8') 
```

# python - 使用 lambda 将参数传递给槽函数

> ID：14660356
> 
> 赞同：0
> 
> 时间：2013-02-02T09:11:29.827
> 
> 标签：python, pyqt, pyqt4, lambda

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

import sys
from PyQt4 import QtGui, QtCore

class Example(QtGui.QMainWindow):
    def __init__(self):
        super(Example, self).__init__();
        self.initUI()

    def initUI(self):
        self.button = QtGui.QPushButton("print clicked",self)
        self.clicked='not_clicked'
        self.button.clicked.connect(lambda opt='clicked': self.option(opt)) 

    def option(self,opt):
        self.clicked=opt
        print opt

def main():
    app = QtGui.QApplication(sys.argv)
    ex = Example()
    ex.show()
    sys.exit(app.exec_())

if __name__=='__main__':
    main() 
```

考虑这段代码。现在，当我点击“打印点击”按钮时。'False' 被打印（在选项函数中）。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T09:54:56.550

`QPushButton``clicked`从继承信号`QAbstractButton`。
Qt 文档指出：

> void QAbstractButton::clicked ( bool **checked = false** ) [信号]
> 
> 当按钮被激活（即当鼠标光标在按钮内时按下然后释放）、键入快捷键或调用 click() 或 animateClick() 时会发出此信号。值得注意的是，如果您调用 setDown()、setChecked() 或 toggle()，则不会发出此信号。
> 
> 如果按钮是**checkable**，如果按钮被选中，则 checked 为 true，如果按钮未选中，则为 false。

插槽接收到的参数指示按钮是否被选中。因为`QPushButton`默认情况下是**不可**检查的。论据总是`False`。这就是为什么“False”被打印出来的原因。

如果您希望打印结果不同，打印 'True' 或 'False'，您可以设置按钮`checkable`或将其更改为`QCheckBox`.
例如，`initUI`应该是

```
def initUI(self):
    self.button = QtGui.QCheckBox("print clicked",self)
    self.button.setCheckable(True)
    self.clicked='not_clicked'
    self.button.clicked.connect(lambda opt='clicked': self.option(opt)) 
```

或者

```
def initUI(self):
    #self.button = QtGui.QPushButton("print clicked",self)
    self.button = QtGui.QCheckBox("print clicked",self)
    self.clicked='not_clicked'
    self.button.clicked.connect(lambda opt='clicked': self.option(opt)) 
```

# c# - 在c#中使用套接字发送消息不起作用

> ID：14660358
> 
> 赞同：1
> 
> 时间：2013-02-02T09:11:44.863
> 
> 标签：c#, websocket

我创建了一个使用 websocket 接受客户端的 Socket 服务器，我正在尝试提供聊天服务，但我遇到了两件事：

1.我能够将味精从浏览器发送到服务器，但反之则不行。

2.一旦我在控制台中写入并点击输入，连接已关闭，我收到断开连接的消息

这是我的代码：

**服务器**

```
 using System;
 using System.Net.Sockets;
 using System.Net;
 using System.Security.Cryptography;
 using System.Threading;
 using System.Text;
 using System.IO;

  namespace ConsoleApplication1
  {
class Program
{
    static Socket serverSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.IP);
    static private string guid = "258EAFA5-E914-47DA-95CA-C5AB0DC85B11";

    static void Main(string[] args)
    {
        serverSocket.Bind(new IPEndPoint(IPAddress.Any, 8080));
        serverSocket.Listen(128);
        serverSocket.BeginAccept(null, 0, OnAccept, null);
        Console.ReadLine();
    }

    private static void OnAccept(IAsyncResult result)
    {

        byte[] buffer = new byte[1024];
        try
        {
            Socket client = null;
            string headerResponse = "";
            if (serverSocket != null && serverSocket.IsBound)
            {

                client = serverSocket.EndAccept(result);
                int i = client.Receive(buffer);
                headerResponse = (System.Text.Encoding.UTF8.GetString(buffer)).Substring(0, i);
                // write received data to the console
                Console.WriteLine(headerResponse);

            }
            if (client != null)
            {

                //Console.WriteLine("Connected and waiting for a client msg");
                /* Handshaking and managing ClientSocket */

                var key = headerResponse.Replace("ey:", "`")
                          .Split('`')[1]                     // dGhlIHNhbXBsZSBub25jZQ== \r\n .......
                          .Replace("\r", "").Split('\n')[0]  // dGhlIHNhbXBsZSBub25jZQ==
                          .Trim();

                // key should now equal dGhlIHNhbXBsZSBub25jZQ==
                var test1 = AcceptKey(ref key);

                var newLine = "\r\n";

                var response = "HTTP/1.1 101 Switching Protocols" + newLine
                     + "Upgrade: websocket" + newLine
                     + "Connection: Upgrade" + newLine
                     + "Sec-WebSocket-Accept: " + test1 + newLine + newLine
                    //+ "Sec-WebSocket-Protocol: chat, superchat" + newLine
                    //+ "Sec-WebSocket-Version: 13" + newLine
                     ;

                client.Send(System.Text.Encoding.UTF8.GetBytes(response));

                int received = ReceiveMsg(client);

                // once the message is received decode it in different formats
                Console.WriteLine(Convert.ToString(buffer).Substring(0, received));

                Console.WriteLine("Type any word to send to the client");
                Console.ReadLine();
                int sent = client.Send(buffer, buffer.Length, SocketFlags.None);
                Console.WriteLine("Sent {0} bytes.", sent); //the sent buffer is not displaying on browser
                Console.ReadLine(); //here the connection is closed 
            }
        }
        catch (SocketException exception)
        {
            throw exception;
        }
        finally
        {
            if (serverSocket != null && serverSocket.IsBound)
            {
                serverSocket.BeginAccept(null, 0, OnAccept, null);
            }
        }
    }

    public static int ReceiveMsg(Socket server )
    {
        byte[] msg = Encoding.UTF8.GetBytes("This is a test");
        byte[] bytes = new byte[256];
        try
        {
            // Blocks until send returns. 
            int i = server.Send(msg);
            Console.WriteLine("Sent {0} bytes.", i);

            // Get reply from the server.
            i = server.Receive(bytes);
            ASCIIEncoding encoder = new ASCIIEncoding();
            Console.WriteLine(encoder.GetString(bytes, 0, bytes.Length));
        }
        catch (SocketException e)
        {
            Console.WriteLine("{0} Error code: {1}.", e.Message, e.ErrorCode);
            return (e.ErrorCode);
        }
        return 0;
    }

    public static T[] SubArray<T>(T[] data, int index, int length)
    {
        T[] result = new T[length];
        Array.Copy(data, index, result, 0, length);
        return result;
    }

    private static string AcceptKey(ref string key)
    {
        string longKey = key + guid;
        byte[] hashBytes = ComputeHash(longKey);
        return Convert.ToBase64String(hashBytes);
    }

    static SHA1 sha1 = SHA1CryptoServiceProvider.Create();
    private static byte[] ComputeHash(string str)
    {
        return sha1.ComputeHash(System.Text.Encoding.ASCII.GetBytes(str));
    }
   }
 } 
```

**客户**

```
<!DOCTYPE HTML>
 <html lang = "en">
 <head>
  <title>WebSocket Test</title>
   <style type = "text/css">
    h1 {
     text-align: center;
   }
     .error {
       color: red;
   } 
    .response {
      color: blue;
   }
   fieldset {
     width: 80%;
      margin: auto;
  text-align: center;
  -moz-box-shadow: 10px 10px 10px #000000;
   -webkit-box-shadow: 10px 10px 10px #000000;
 }
  #output {
font-family: monospace;
width: 80%;
margin-left: auto;
margin-right: auto;
margin-top: 1em;
background-color: #eeeeee;
padding: 1em;
border: 5px groove #cccccc;
-moz-border-radius: 15px;
-webkit-border-radius: 15px;
-moz-box-shadow: 10px 10px 10px #000000;
-webkit-box-shadow: 10px 10px 10px #000000;
   } 
  </style>
   <script language="javascript" type="text/javascript">
  var output;
  var websocket;
  function init() {
      output = document.getElementById("output");
  } // end init
  function connect() {
      //open socket
      if ("WebSocket" in window) {
          websocket = new WebSocket("ws://localhost:8080/server2");
          //note this server does nothing but echo what was passed
          //use a more elaborate server for more interesting behavior

          output.innerHTML = "connecting...";

          //attach event handlers
          websocket.onopen = onOpen;
          websocket.onclose = onClose;
          websocket.onmessage = onMessage;

          websocket.onerror = onError;
      } else {
          alert("WebSockets not supported on your browser.");
      } // end if
   } // end connect
   function onOpen(evt) {
      //called as soon as a connection is opened
      output.innerHTML = "<p>CONNECTED TO SERVER</p>";
  } // end onOpen
  function onClose(evt) {
      //called when connection is severed
      output.innerHTML += "<p>DISCONNECTED</p>"+evt.data;
  } // end onClose;
  function onMessage(evt) {
      //called on receipt of message
      alert("msg received");
      output.innerHTML += "<p class = 'response'>RESPONSE: "
  + evt.data + "</p>";
  } // end onMessage
  function onError(evt) {
      //called on error
      output.innerHTML += "<p class = 'error'>ERROR: "
  + evt.data + "</p>";
  } // end onError
  function sendMessage() {
      //get message from text field
      txtMessage = document.getElementById("txtMessage");
      message = txtMessage.value;
      //pass message to server
      websocket.send(message);
      output.innerHTML += "<p>MESSAGE SENT: " + message + "</p>";
  } // end sendMessage

   </script>
</head>
    <body onload = "init()">
   <h1>Web Socket Echo Chamber</h1>
   <form action = "">
    <fieldset>
  <button type = "button" onclick = "connect()">connect to server</button>
  <label for = "txtMessage">
    <input type = "text"  id = "txtMessage" value = "HTML5 Quick Reference For Dummies" />
  </label>
  <button type = "button" onclick = "sendMessage()">send message</button>
  <button type = "button" onclick = "websocket.close()">disconnect</button>
</fieldset>
   </form>
    <div id="output">Click 'connect' button to connect</div>
 </body>
   </html> 
```

任何想法 ？？

# ios - UITapGestureRecognizer 和 UIButton = EXC_BAD_ACCESS

> ID：14660360
> 
> 赞同：0
> 
> 时间：2013-02-02T09:11:48.720
> 
> 标签：ios, objective-c, cocoa-touch, exc-bad-access

在我的 didFinishLaunchingWithOptions 方法中，我创建 GLKView 和 UIButton 作为子视图。我的代码：

```
 EAGLContext *context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2];
    [EAGLContext setCurrentContext:context];

    view = [[GLKView alloc] initWithFrame:[[UIScreen mainScreen] bounds] context:context];
    view.delegate = self;

    btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [btn setFrame:CGRectMake(5, 50, 200, 50)];
    [btn setTitle:@"Run animation" forState:UIControlStateNormal];
    [btn addTarget:self action:@selector(buttonClickHandler:) forControlEvents:UIControlEventTouchUpInside];
    [view addSubview:btn];

    controller = [[GLKViewController alloc] init];
    controller.delegate = self;
    controller.view = view;

    tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapHandler:shouldReceiveTouch:)];
    tapRecognizer.delegate = self;
    [view addGestureRecognizer:tapRecognizer];

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window.rootViewController = glController;
    [self.window makeKeyAndVisible]; 
```

`view`, `controller`,`btn`是我`AppDelegate`班级的成员变量。

我使用`tapHandler:shouldReceiveTouch:`选择器是因为我不想处理按钮上的点击，所以我这样做：

```
- (BOOL) tapHandler:(UIGestureRecognizer *)recognizer shouldReceiveTouch:(UITouch *)touch
{
    if ([touch.view isKindOfClass:[UIButton class]])
        return NO;
    else
    {
        // some logic ...

        return YES;
    }
} 
```

问题是当我试图读取我得到的 touch.view 属性时`EXC_BAD_ACCESS`。是什么原因以及如何避免？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T09:21:46.670

手势识别器目标的签名是错误的。它应该与 UIButton 目标具有相同的形式，即只有一个参数。然后在识别轻击手势时调用该方法。

您的方法`tapHandler:shouldReceiveTouch:`属于手势识别器委托。

编辑：不要担心按钮。按下按钮时，水龙头无法识别，因此您不需要此委托方法。

# sencha-touch-2 - 在点击按钮时，它不起作用

> ID：14660363
> 
> 赞同：1
> 
> 时间：2013-02-02T09:12:16.160
> 
> 标签：sencha-touch-2

我是 Sencha Touch 的初学者，并且正在学习它。

以下我使用 Sencha Touch 2.1 编写的代码不起作用。我可以在浏览器上看到一个按钮，但是在点击该按钮时，这不会发出警报。请告诉我有什么问题。对不起我的英语不好，因为我是日本人。目录结构：

```
(root)---app.js
       |-app---view--Main_view.ja
             |-controller--Main_cont.js 
```

[app.js]

```
Ext.application({
    name: 'MyApp',
    views: ['Main_view'],
    controllers: ['Main_cont'],
    launch: function() {
        Ext.Viewport.add(Ext.create('MyApp.view.Main_view'));
    }
}); 
```

[Main_view.js]

```
Ext.create('Ext.Container', {
    fullscreen: true,
    layout: {
        type: 'vbox',
        pack: 'center'
    },
    items: [
    {
    xtype : 'button',
    text : 'Button',
    id : 'action'
    }
    ]
}); 
```

[main_cont.js]

```
Ext.define('MyApp.controller.Main_cont',{
    extend: 'Ext.app.Controller',

    config: {
        control: {          
            '#action':{
                tap : function() {
                    alert('tap');
                }
            }
         }
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T21:44:27.443

使用按钮，您可以设置“处理程序”属性而不是点击侦听器：

```
xtype : 'button',
text : 'Button',
id : 'action',
handler : function(){
    alert('tap');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:31:18.073

尝试这个：

```
'button[id=action]' : {
    tap : 'handleTap'
} 
```

where`handleTap`应该是控制器中定义的函数。

如果你已经定义了它的视图，`refs`你甚至可以这样做：

```
'mainview button[id=action]' : {
    tap : 'handleTap'
} 
```

这对我有用

# javascript - 删除动态创建的 从谷歌地图标记点击触发

> ID：14660365
> 
> 赞同：0
> 
> 时间：2013-02-02T09:12:31.383
> 
> 标签：javascript, jquery, google-maps-api-3, dynamic-data

从我所做的挖掘来看，我想使用 .on 但我注意到如何去实现它。我还在学习 javascript 和 jquery，所以我可能会遗漏一些东西......

下面的代码在将标记添加到 Google 地图 (v3 api) 时运行。它创建一个标记并添加一个表单域。如果用户随后单击新创建的标记，则该标记被隐藏，然后代码也应删除该表单。标记可以很好地移除，但我无法移除。这是我正在寻求帮助的行：

```
 $('#newdiv + site_count).remove(); 
```

如果我用一个有效的数字手动替换 newdiv+ site_count（比如 6 所以 newdiv6），那么代码就可以工作，我只是不知道如何实时引用它......最后这里是相关代码的其余部分：

```
google.maps.event.addListener(map, "click", function(event) {
    marker = new google.maps.Marker({
      position: event.latLng,
      map: map
    });
    newlocation = "<div id='newdiv" + site_count + "'><input type='text' size='3' name='loc[" + site_count + "]' id='newid" + site_count + "' value = '0' /></div>";
                $('#here').append(newlocation)
    google.maps.event.addListener(marker, "click", function(event) {
                marker.setVisible(false);
                $('#new+ site_count).remove(); 
        });
        site_count++;        

}) 
```

感谢您花时间查看我的问题。--AJ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T09:15:16.243

这条线

```
$('#new+ site_count).remove(); 
```

有三个问题：

1.  没有关闭`'`，因此会导致语法错误。

2.  您为`div`包含表单字段的 ID 提供了 ID `newsiteX`，但该行正尝试使用 ID 来查找它`newX`。

3.  创建 new 后`div`，您正在递增`site_count`，但后来您尝试使用 的*新*值查找 div `site_count`，因此您不会。也就是说，如果`site_count`is`0`并且您创建了一个新 div，它将具有`id` `"newsite0"`并且`site_count`将递增到`1`. 然后，当您在单击时将其删除时，即使您修复了上述项目，您也会寻找`newsite1`而不是`newsite0`.

你没有展示足够的代码让我自信地为你纠正它，但可能是这样的：

```
$('#newsite' + (site_count - 1)).remove(); 
```

也就是说，您可能想退后一步，更深入地了解结构，这似乎有点脆弱（但可能没问题）。

# asp.net - 无法启动 Web 服务器

> ID：14660366
> 
> 赞同：64
> 
> 时间：2013-02-02T09:12:33.087
> 
> 标签：asp.net, visual-studio-2012, iis-express

我在 Visual Studio 2012 中有 asp.net Web 应用程序项目。当我想启动它时，出现以下错误：

**无法启动 IIS Express Web 服务器：端口“4012”正在使用中**

这个问题从无到有。我该如何解决？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-07-25T16:15:15.747

我在 Visual Studio 2012 中遇到了类似的问题：

**错误**：“无法启动 IIS Express Web 服务器。

未能为站点“MySite”应用程序“/”注册 URL http://localhost:1030/。错误描述：该进程无法使用文件，因为它正被另一个进程使用。(0x85968574) "

**原因**：实际上这个端口号是在运行时动态生成的。它保证可用。如果它被其他一些流程项目获取，则不会运行。所以我们需要在另一个端口尝试。

**解决方案**：我在互联网上找到了各种解决方案，但问题仍未解决。最后我尝试了以下解决方案：

1.  在解决方案资源管理器中右键单击项目-> 属性
2.  单击到 Web（在 LHS 上）。
3.  查看本地 IIS Web 服务器（默认情况下会选择无线电 btn）。
4.  更改项目 URL 的端口号，例如：http://localhost:1030/ 到 http://localhost:45896/（可能高于 1024）
5.  保存更改并运行应用程序。

这会自动更改 IIS 配置文件和任何需要的位置，因此我们不需要显式更改任何代码。这对我有用，希望对你也有用。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-02-02T09:29:23.097

来自 MSDN 库

> Visual Studio 不能保证您指定的端口在您运行文件系统网站时可用。如果在运行页面时端口正在使用中，Visual Studio 会显示一条错误消息。

要更改 IIS Express 用来运行程序的端口，您应该按照 MSDN 上这篇文章概述的过程进行操作

[如何：为开发服务器指定端口](http://msdn.microsoft.com/en-us/library/ms178109%28v=VS.100%29.aspx)

简而言之，我们需要编辑该文件`%systemdrive%:\Users\<username>\Documents\IISExpress\config`并更改在该文件中找到的绑定信息并更改 IIS Express 的其他配置。

由于解决问题的方法不是那么简单，我建议关闭尝试在您的开发计算机上使用该端口访问的应用程序。寻找Microsoft 的[TCPView](http://technet.microsoft.com/en-us/sysinternals/bb897437)等特定工具，以帮助发现抢占您端口的应用程序。通常它只是浏览器

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-11-05T14:43:59.373

从命令提示符运行“netstat -b”以查看哪个应用程序正在使用端口 4012。如果您终止该进程，IIS Express 将能够使用端口 4012 启动。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-12-19T15:22:40.663

杀死**IIS Express 工作进程**为我解决了这个问题；我在尝试调试 Visual Studio 2015 的两个并发实例并在两个 Web 解决方案之间切换时遇到了这个问题。

如果这是一个持续存在的问题，那么 Kedar 修改解决方案的答案会更好，但在紧要关头，对于代码审查等，我更喜欢这个。

[![IIS Express 工作进程](../Images/479bd8760b4a62427dbe7342e73bb218.png)](https://i.stack.imgur.com/iOi1n.png)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-02-02T13:12:06.553

一种解决方案是删除或清除浏览器中的历史记录。然后，重新启动 Visual Studio 并重新运行您的应用程序。

如果此解决方案不起作用，那么是时候更改开发服务器 (IIS Express) 的端口号了。

我希望它对你有帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-04-28T12:54:19.203

如果这种情况突然发生（一切正常，但突然显示错误**无法启动 IIS Express Web 服务器**），通常对我有用的解决方案很简单：

*   杀死 IISExpress 进程
*   更重要的是，**关闭所有浏览器进程**（Firefox、Chrome、Chrome Dev Tools、IE 等）

像魅力一样工作:) 如果没有，请尝试此线程的不同解决方案。

PS。我将其发布为答案，以便可以轻松找到它，尽管有人在评论中的某个地方写了它。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-03-08T16:14:57.723

尝试关闭 Visual Studio 并使用“以管理员身份运行”选项再次打开它。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-08-22T22:36:24.023

从配置文件中删除额外的绑定。

以管理员身份运行命令提示符并键入。

1\. netsh http 显示 urlacl

您将看到已使用的 url 列表，请确保您当前尝试使用的 URL 已在此列出。在下一步中，您必须删除此预订。

2\. netsh http delete urlacl url=/*您在上面列表中列出的完整 URL* /

确认后重启IIS

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-04-24T19:34:47.830

在运行 Visual Studio 的同时运行 Fiddler 时，我也遇到了这个错误。退出 Fiddler 并重新运行应用程序对我有用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-10-16T23:49:55.507

就我而言，我必须做两件事：

一种。从此文件中删除虚拟目录：

```
C:\Users\<user-name>\Documents\IISExpress\config\applicationhost.config 
```

湾。从以下位置运行程序 TCPView： [http](http://technet.microsoft.com/en-us/sysinternals/bb897437) ://technet.microsoft.com/en-us/sysinternals/bb897437 找到正在使用您的端口的进程，然后“结束进程”。

之后，在 Visual Studio 中，打开 Web 应用项目属性，选择 Web 选项卡，单击“创建虚拟目录”按钮重新创建虚拟目录。在调试模式下运行 Web 应用程序。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-01-10T20:36:22.987

只需重新启动计算机即可为我解决此问题。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-06-09T02:09:53.847

尝试以下步骤：

1.  在 VS2013 中打开调试 > 网站属性。
2.  选择“网络”选项卡。
3.  在“服务器”下，我发现“覆盖应用程序根 URL”未选中。我检查并保存了。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-11-21T11:09:40.913

> 只需转到 taskmanager --> 进程 --> iisexpress --> 右键单击​​ --> 结束进程树 --> 然后您就可以构建并运行您的应用程序

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-02-24T18:44:38.790

我遇到了与 OP 所说的完全相同的问题“这个问题无中生有”。

我只是重新启动了我的机器，它又可以工作了。重新启动 IIS Express 不起作用。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-03-25T09:39:08.227

通过以下步骤解决了该问题： - 项目-> 属性-> Web - 在服务器下选择本地 IIS。- 保存设置并再次浏览

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-06-23T17:25:03.230

在 web.csproj 中更改端口号

```
<DevelopmentServerPort>56048</DevelopmentServerPort> 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-02-22T06:49:21.927

导航到 IIS 快递

> ```
> cd "C:\Program Files (x86)\IIS Express\" 
> ```
> 
> 运行这个`appcmd.exe list site /xml | appcmd delete site /in`

另外，清除您的临时文件`%temp%`并注销，或重新启动

这将删除所有网站，享受！

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-03-08T08:57:32.500

另一种选择是`applicationhost.config`从本地解决方案文件夹中删除。

Visual Studio 也将其存储在`.vs\config`解决方案文件夹根目录中的一个文件夹中。

删除或编辑`applicationhost.config`那里帮助我解决了这个问题

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-05-22T11:58:39.283

请删除您的项目`.vs`文件夹和`applicationhost.config`文件，然后运行您的代码。

![在此处输入图像描述](../Images/085abef141916948f7fd84382273f42b.png)

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2014-03-22T09:49:21.220

比上述任何答案更有可能：删除 IISExpress 文件夹，如[本文所述](https://stackoverflow.com/questions/15873126/unable-to-launch-the-iis-express-web-server)。

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2014-05-22T20:28:27.667

就我而言，我尝试了我在网上找到的所有帖子，但没有任何效果，我做的最后一件事是更改项目右键单击/使用 Visual Studio Web 服务器的选项，现在一切正常......

# r - 用 par(mfrow) 编译的图形面板的常用主标题

> ID：14660372
> 
> 赞同：71
> 
> 时间：2013-02-02T09:13:34.567
> 
> 标签：r, graph, plot, title, par

我有 4 个用`par(mfrow=c(2,2))`. 我想为上面的 2 个图绘制一个通用标题，并为位于左右 2 个图之间的 2 个下面的面板绘制一个通用标题。

这可能吗？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-02-02T09:31:05.153

这*应该*可行，但是您需要使用该`line`参数才能使其正确：

```
par(mfrow = c(2, 2))
plot(iris$Petal.Length, iris$Petal.Width)
plot(iris$Sepal.Length, iris$Petal.Width)
plot(iris$Sepal.Width, iris$Petal.Width)
plot(iris$Sepal.Length, iris$Petal.Width)
mtext("My 'Title' in a strange place", side = 3, line = -21, outer = TRUE) 
```

![在此处输入图像描述](../Images/628a1fca613b8e5ff4005fad7dd709b5.png)

`mtext`代表“边距文本”。`side = 3`说把它放在“顶部”边缘。`line = -21`表示将位置偏移 21 行。`outer = TRUE`表示可以使用外边距区域。

要在顶部添加另一个“标题”，您可以使用，例如，`mtext("My 'Title' in a strange place", side = 3, line = -2, outer = TRUE)`

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-02-02T09:37:02.693

您可以使用该函数`layout()`并设置出现在两列中的两个绘图区域（请参阅 中的重复数字 1 和 3 `matrix()`）。然后我用`plot.new()`and`text()`来设置标题。您可以使用边距和高度来获得更好的表示。

```
x<-1:10
par(mar=c(2.5,2.5,1,1))
layout(matrix(c(1,2,3,4,1,5,3,6),ncol=2),heights=c(1,3,1,3))
plot.new()
text(0.5,0.5,"First title",cex=2,font=2)
plot(x)
plot.new()
text(0.5,0.5,"Second title",cex=2,font=2)
hist(x)
boxplot(x)
barplot(x) 
```

![在此处输入图像描述](../Images/2d81e54269cb7c641b4062c0d37aba0f.png)

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2014-04-11T17:34:23.313

`title(...)`可以使用与上述相同的参数来完成相同但粗体的操作：

```
title("My 'Title' in a strange place", line = -21, outer = TRUE) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-04-27T05:25:47.460

这是另一种方法，使用[这篇文章](https://stackoverflow.com/a/29893376/489704)`line2user`中的函数。

```
par(mfrow = c(2, 2))
plot(runif(100))
plot(runif(100))
text(line2user(line=mean(par('mar')[c(2, 4)]), side=2), 
     line2user(line=2, side=3), 'First title', xpd=NA, cex=2, font=2)

plot(runif(100))
plot(runif(100))
text(line2user(line=mean(par('mar')[c(2, 4)]), side=2), 
     line2user(line=2, side=3), 'Second title', xpd=NA, cex=2, font=2) 
```

![居中的标题](../Images/8c4832f1459a4e98453647e76d380068.png)

在这里，标题的位置比绘图的上边缘高 2 行，如 所示`line2user(2, 3)`。我们通过将它相对于第 2 和第 4 个图偏移，以左右边距的组合宽度的一半，即`mean(par('mar')[c(2, 4)])`.

* * *

`line2user`表示从用户坐标轴的偏移量（行数），定义为：

```
line2user <- function(line, side) {
  lh <- par('cin')[2] * par('cex') * par('lheight')
  x_off <- diff(grconvertX(0:1, 'inches', 'user'))
  y_off <- diff(grconvertY(0:1, 'inches', 'user'))
  switch(side,
         `1` = par('usr')[3] - line * y_off * lh,
         `2` = par('usr')[1] - line * x_off * lh,
         `3` = par('usr')[4] + line * y_off * lh,
         `4` = par('usr')[2] + line * x_off * lh,
         stop("side must be 1, 2, 3, or 4", call.=FALSE))
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-15T08:12:06.737

感谢@DidzisElferts 的回答，我刚刚在[这里找到了一个很棒的文档](https://www.rdocumentation.org/packages/graphics/versions/3.6.2/topics/layout)

只需尝试以下代码。我帮助我了解了发生了什么：

```
def.par <- par(no.readonly = TRUE) # save default, for resetting...

## divide the device into two rows and two columns
## allocate figure 1 all of row 1
## allocate figure 2 the intersection of column 2 and row 2
layout(matrix(c(1,1,0,2), 2, 2, byrow = TRUE))
## show the regions that have been allocated to each plot
layout.show(2)

## divide device into two rows and two columns
## allocate figure 1 and figure 2 as above
## respect relations between widths and heights
nf <- layout(matrix(c(1,1,0,2), 2, 2, byrow = TRUE), respect = TRUE)
layout.show(nf)

## create single figure which is 5cm square
nf <- layout(matrix(1), widths = lcm(5), heights = lcm(5))
layout.show(nf)

##-- Create a scatterplot with marginal histograms -----

x <- pmin(3, pmax(-3, stats::rnorm(50)))
y <- pmin(3, pmax(-3, stats::rnorm(50)))
xhist <- hist(x, breaks = seq(-3,3,0.5), plot = FALSE)
yhist <- hist(y, breaks = seq(-3,3,0.5), plot = FALSE)
top <- max(c(xhist$counts, yhist$counts))
xrange <- c(-3, 3)
yrange <- c(-3, 3)
nf <- layout(matrix(c(2,0,1,3),2,2,byrow = TRUE), c(3,1), c(1,3), TRUE)
layout.show(nf)

par(mar = c(3,3,1,1))
plot(x, y, xlim = xrange, ylim = yrange, xlab = "", ylab = "")
par(mar = c(0,3,1,1))
barplot(xhist$counts, axes = FALSE, ylim = c(0, top), space = 0)
par(mar = c(3,0,1,1))
barplot(yhist$counts, axes = FALSE, xlim = c(0, top), space = 0, horiz = TRUE)

par(def.par)  #- reset to default 
```

# jsf-2 - 登录前导航到页面不起作用

> ID：14660378
> 
> 赞同：1
> 
> 时间：2013-02-02T09:14:39.043
> 
> 标签：jsf-2

我想在将第一页加载到会话之前设置我的数据。

我的 XHTML：

```
<f:event listener="#{beforeLogin.setup}" type="preRenderView"></f:event> 
```

我的托管 Bean：

```
@ManagedBean(name="beforeLogin")
@RequestScoped
public class BeforeLogin {
   public void setup()
   {
    .....
   FacesContext context = FacesContext.getCurrentInstance();
   context.getExternalContext().getSessionMap().put("Key1", "Value1");
    ....
   ConfigurableNavigationHandler nav = (ConfigurableNavigationHandler) context
            .getApplication().getNavigationHandler();
   nav.performNavigation("LoginPage");
   }
}
} 
```

现在在我的方法`LoginPage`下`PostConstruct`，我从会话中获得了`Key1`价值。`null`任何人都可以建议我在哪里做错了吗？注意：我什至尝试使用`SessionScope`bean `BeforeLogin`。

# ios - 如何像 Gmail 或 Wunderlist 2 一样呈现 UIViewController

> ID：14660381
> 
> 赞同：3
> 
> 时间：2013-02-02T09:14:44.797
> 
> 标签：ios, xcode, animation, uiviewcontroller, gmail

我希望能够像这样展示我的 UIViewController：

[http://upld.im/f/awU+](http://upld.im/f/awU+) [http://upld.im/f/CO9+](http://upld.im/f/CO9+)

我该怎么做呢？？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:40:43.823

不幸的是，照片不再显示，所以我不确定我是否回答了你的问题......

如果您正在寻找滑动视图，您可以查看这个： [https ://github.com/gotosleep/JASidePanels](https://github.com/gotosleep/JASidePanels)

底部还有一个包含替代品的列表。我个人使用以下内容： [https ://github.com/edgecase/ECSlidingViewController](https://github.com/edgecase/ECSlidingViewController)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T07:43:42.253

你可以使用这个。 [https://github.com/ucu072/HCPushBackAnimation](https://github.com/ucu072/HCPushBackAnimation)

详细的动画，有必要再开发一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T12:07:31.377

我创建了一个 UIViewController 类别来模仿在撰写新邮件时在 Gmail 应用程序中显示的模态动画。它被称为[MFFadeBackModalAnimation](https://github.com/mikefrederick/MFFadeBackModalAnimation)。它封装了用于呈现和关闭视图控制器的原生 API，因此它应该与您现有的应用程序很好地集成。

# php - 在 Facebook 页面创建活动

> ID：14660382
> 
> 赞同：0
> 
> 时间：2013-02-02T09:15:09.940
> 
> 标签：php, facebook, facebook-graph-api

我正在尝试通过 Facebook 页面创建活动。我已授予页面 id 和 create_event 权限。但是我的活动没有发布。我不断收到这个

```
 [message] => (#100) Invalid parameter
                [type] => OAuthException
                [code] => 100 
```

我正在使用这些论坛中发布的以下编码

```
 $page_id='xxxxx';
    $event_info = array( 
    'name' => 'abc event', 
    'description' => 'hi dis s an event', 
    'owner' => 'eric example', 
    'location' => 'Location name and street', 
    'city' => 'chennai', 
    'start_time' => date('Y-m-d H:i', time()), 
    'privacy_type' => 'OPEN' ); 

     $event_id = $facebook->api('/'.$page_id.'/events', 'post', $event_info); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T09:42:36.573

我想通了...我在指定时间时出错了

```
$page_id = $_SESSION['xxxxx'];
$pid='xxxxxxx';

// Now, getting the PAGE Access token, using the user access token

 $page_token_url = "https://graph.facebook.com/$page_id?fields=access_token&" .       $access_token;
 $response = file_get_contents($page_token_url);

// Parse the return value and get the Page access token
$resp_obj = json_decode($response,true);

$page_access_token = $resp_obj['access_token'];

$event_param = array(
    'name' => 'abc event', 
    'description' => 'hi dis s an event', 
    'owner' => ' example', 
    'location' => 'Location name and street', 
    'city' => 'chennai', 
    'start_time' => '2013-12-31T13:45:00+0100', 
    'privacy_type' => 'OPEN' ,
'page_id'       => $pid
);

try
{
    $fb_event_id = $facebook->api('/'.$pid.'/events?access_token=ACCESS_TOKEN', "POST", $event_param);
}
catch (FacebookApiException $e)
{
    echo $e->getMessage();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-29T11:32:42.303

请使用此格式并提供访问令牌以在页面上发布

```
$data = array(
          "name"=>$event_name,
          "access_token"=>$fb_oauth_token,
          "start_time"=>"2014-07-04",
          "end_time"=>"2014-07-06",
          "location"=>"$location",
          "description"=>"hello"
        ); 
```

# graphics - YUI 图形中的 dashstyle 动画

> ID：14660384
> 
> 赞同：0
> 
> 时间：2013-02-02T09:15:28.410
> 
> 标签：graphics, line, yui

## 动画虚线

使用 YUI，我想绘制虚线。曲线球是我想为 dashstyle 设置动画，使其从一种大小的破折号变为另一种大小，然后每 2 秒左右再次变回，例如：

```
dashstyle: [10,10] 
```

至

```
dashstyle: [10,20] 
```

目的是模拟管道中的流体流动，因此线条将围绕管道弯曲，以模拟流体流动的位置。

这可以在 YUI 中轻松制作动画吗？我已经尝试过自己，但无法让 dashstyle 设置动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T18:12:57.240

如果您只想在两者之间切换，可以使用 Y.later() 创建一个切换 CSS 类的计时器。

动画对于平滑变化更有用。您可以为动画模块创建自定义插件。例如：

[http://yuilibrary.com/gallery/show/boxshadow-anim](http://yuilibrary.com/gallery/show/boxshadow-anim)

[http://yuilibrary.com/gallery/show/textshadow-anim](http://yuilibrary.com/gallery/show/textshadow-anim)

# c++ - 无法将元素添加到链表的末尾

> ID：14660387
> 
> 赞同：2
> 
> 时间：2013-02-02T09:16:43.910
> 
> 标签：c++, debugging, linked-list

我正在尝试在链接列表的后面添加一个元素，但它似乎没有添加，有人可以告诉我我的代码有什么问题吗？谢谢。我的链接列表不为空

```
void LinkedList::Addelementfromback(VoidPtr horoscope)
{
   NodePtr temp = head;  

   while (temp != NULL)
   {
    temp=temp->next;
   }

    NodePtr element=new Node;

    element->data=horoscope;

    element->next=NULL;

    temp=element;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T09:19:15.253

`temp`是最后一个`next`值的副本，即 NULL。您分配给一个副本。

你应该做的是提前停止一次迭代。然后做，`temp->next=element;`

要提前停止一次迭代，请使用：`while (temp->next != NULL)`

# mongodb - Grails Quartz MongoDB 连接不断打开

> ID：14660388
> 
> 赞同：3
> 
> 时间：2013-02-02T09:16:54.707
> 
> 标签：mongodb, grails, quartz-scheduler

我有一个 grails 应用程序，它使用石英每 20 秒循环一次域类。

每次执行石英作业时，都会与 Mongo 建立另一个连接。以前的那些由于某种原因没有关闭，因此在 11 个连接后作业停止工作（连接超时）。我尝试了另一种方法，通过在操作中调用服务方法调用 URL，但连接数仍在不断增加。当我在没有运行 Quartz 作业的情况下重复调用 URL 时，只建立了 4 个新连接，不再有。

任何想法如何去做？

Grails 2.1.2、MongoDB 插件 1.1.0、Quartz 1.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T19:33:39.703

对我来说，它适用于以下解决方法：将执行代码包装在`[SomeDomain].withNewSession { }`调用中。

`User`域示例

```
def execute() {
   User.withNewSession {
      //your code
   }
} 
```

# php - php不同的cpu使用相同的文件？

> ID：14660389
> 
> 赞同：1
> 
> 时间：2013-02-02T09:17:05.707
> 
> 标签：php, memory, memory-management, cpu, cpu-usage

我的网站在共享主机上超过 CPU 使用率时遇到问题。

我只是在做一个测试，似乎对于同一个文件，我可以获得不同的 CPU 值。我正在插入一些简单的 php 来测试简单的 htm，并且大多数情况下我得到 0 CPU 使用率。但有时这个值会增加到 25、35 甚至 85 ！

同一脚本具有不同的 CPU 使用率是否正确？一个简单的脚本有多达 85 个或大约是正常的吗？

谢谢

编辑：我使用脚本来检查用法：

```
public static function onRequestStart() {
    $dat = getrusage();
    define('PHP_TUSAGE', microtime(true));
    define('PHP_RUSAGE', $dat["ru_utime.tv_sec"]*1e6+$dat["ru_utime.tv_usec"]);
}

public static function getCpuUsage() {
    $dat = getrusage();
    $dat["ru_utime.tv_usec"] = 
        ($dat["ru_utime.tv_sec"]*1e6 + $dat["ru_utime.tv_usec"]) - PHP_RUSAGE;
    $time = (microtime(true) - PHP_TUSAGE) * 1000000;

    // cpu per request
    if($time > 0) {
        $cpu = sprintf("%01.2f", ($dat["ru_utime.tv_usec"] / $time) * 100);
    } else {
        $cpu = '0.00';
    }

    self::add_session_data($cpu); // this add data to db or display on the screen

    return $cpu;
} 
```

onRequestStart() 进入脚本的开头， getCpuUsage() 进入最后

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:48:53.773

If you think your script is slow and you want to know which areas are best for improvements, you should not try to build your own cpu usage meter. Instead you should use a profiler such as [XDebug](http://www.xdebug.org/docs/profiler) or [XHProf](http://pecl.php.net/package/xhprof). They will be able to tell you which functions and methods take long to run. Those are the things you should focus on.

# python - 如何使用 for 循环添加参数元素？

> ID：14660392
> 
> 赞同：0
> 
> 时间：2013-02-02T09:17:27.920
> 
> 标签：python

使用 cs1graphics 模块，我创建了一个包含 4 个点对象的列表。我想通过每次迭代（在 for 循环中）将 List 中的一个元素添加到 Polygon 参数来使用 List 对象中的 Points 绘制多边形。列表中的 Point 对象需要在 Polygon 中彼此堆叠，以便绘制出整个对象。实际发生的是 List 中某个位置的 Point 对象将覆盖上一次迭代中的前一个对象。最后，我最终“绘制”了一个点（即列表中的最后一个点）。我该如何解决？

编辑：我尝试使用 .append ，但这会将所有参数转换为 List 对象，显然我无法绘制列表。

```
self._list = [Point(200,200),Point(400,200),Point(400,400),Point(200,400),Point(200,200)]
    for i in range(4):
        self._poly = Polygon(self._list[i],) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:21:03.360

两个都

```
self._list = [Point(200,200),Point(400,200),Point(400,400),Point(200,400),Point(200,200)]
self._poly = Polygon(self._list) 
```

和

```
self._list = [Point(200,200),Point(400,200),Point(400,400),Point(200,400),Point(200,200)]
self._poly = Polygon(*self._list) 
```

将工作。不需要循环。

如果您坚持在循环中逐步构建多边形，您可以这样做：

```
self._list = [Point(200,200),Point(400,200),Point(400,400),Point(200,400),Point(200,200)]
self._poly = Polygon()
for point in self._list:
    self._poly.addPoint(point) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T09:21:13.487

只需传入列表本身，如下所示：

```
self._list = [Point(200,200),Point(400,200),Point(400,400),Point(200,400)]
self._poly = Polygon(self._list) 
```

请注意，您[不需要最后一点](http://www.cs1graphics.org/doc/1.0/classcs1graphics_1_1Polygon.html#c775ee34451fdfa742b318538164070e)：

> 最后一个点会自动连接回第一个点以闭合多边形。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T09:21:50.850

我想你想要的是这样的：

```
self._poly = Polygon(*self._list) 
```

将`*`列表解包为参数，并将它们作为单独的参数传递给函数。

您也可以只传入点列表本身。

```
self._poly = Polygon(self._list) 
```

它也可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T09:22:19.310

如果你想要一个带有前 4 个点的多边形：

self._poly = 多边形(*self._list[:4])

在您的代码中，您正在创建 4 个多边形，每个多边形都有一个点。

# php - 使用 children() 从外部 HTML 获取

> ID：14660394
> 
> 赞同：1
> 
> 时间：2013-02-02T09:18:07.223
> 
> 标签：php, html, dom, children

我尝试从外部站点的 html 源代码中获取在和`v4.0 with A2DP`之后创建的行。在其他情况下可能有其他值，但它总是介于和`Yes,``,``v4.0 with A2DP``Yes,``,`

这是html的外部来源：

```
<tr>
<td class="ttl"><a href="glossary.php3?term=wi-fi">WLAN</a></td>
<td class="nfo">Wi-Fi 802.11 a/b/g/n, dual-band, DLNA, Wi-Fi Direct, Wi-Fi hotspot</td>
</tr>
<tr> 
<td class="ttl"><a href="glossary.php3?term=bluetooth">Bluetooth</a></td>
<td class="nfo">Yes, v4.0 with A2DP, LE, EDR</td>
</tr>
<tr>
<td class="ttl"><a href="glossary.php3?term=nfc">NFC</a></td>
<td class="nfo">Yes</td>
</tr> 
```

我正在使用这段代码：

```
<?php
include_once('/simple_html_dom.php');
$dom = file_get_html("http://www.gsmarena.com/pantech_vega_no_6-5268.php");
foreach ($dom->find('tr') as $node) {
if (is_a($node->children(0), 'simple_html_dom_node')) {
    if ($node->children(0)->plaintext == "Bluetooth") {
        echo $node->children(1)->plaintext;
    }
}
}
?> 
```

我得到了所有的蓝牙线路：

```
Yes, v4.0 with A2DP, LE, EDR 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:23:13.007

尝试像这样更改您的代码：

```
$plain = explode(',', $node->children(1)->plaintext);
echo $plain[1]; 
```

# java - 搜索功能 - 如何将过滤后的数据显示到列表视图中

> ID：14660399
> 
> 赞同：3
> 
> 时间：2013-02-02T09:18:36.363
> 
> 标签：java, android, listview, widget

我已经解析了来自网站的数据并将其显示在列表视图中，这是我的第二个活动，在第一个活动中，有一个 edittext 和搜索按钮，在根据该关键字在 editext 中给出关键字后，可以获得相关的搜索结果toast，但我希望它显示在列表视图中，这是代码部分。

```
public class Home extends ListActivity {
    ArrayList<HashMap<String, String>> songsList;
    ListView list;
    LazyAdapter adapter;
    JSONArray posts;

    //ArrayList thats going to hold the search results
    ArrayList<HashMap<String, String>> searchResults;
    LayoutInflater inflater;
    // All static variables
    static final String URL = "http://www.example.com/ads/?json=get_recent_posts";

    static final String KEY_POSTS = "posts";
    static final String KEY_ID = "id";
    static final String KEY_TITLE = "title";
    static final String KEY_DATE = "date";
    static final String KEY_CONTENT = "content";
    static final String KEY_AUTHOR = "author";
    static final String KEY_NAME = "name";
    static final String KEY_ATTACHMENTS = "attachments";
    static final String KEY_SLUG = "slug";
    static final String KEY_THUMB_URL = "thumbnail";
    static final String KEY_IMAGES = "images";
    static final String KEY_URL = "url";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final EditText searchBox = (EditText) findViewById(R.id.search);
        final ListView list = (ListView) findViewById(android.R.id.list);

        //get the LayoutInflater for inflating the customomView
        //this will be used in the custom adapter
        inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        final ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

        // Creating JSON Parser instance
        final JSONParser jParser = new JSONParser();

        // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(URL);
        try {
            posts = json.getJSONArray(KEY_POSTS);

            // looping through all song nodes <song>
            for (int i = 0; i < posts.length(); i++) {
                JSONObject c = posts.getJSONObject(i);
                // Storing each json item in variable
                String id = c.getString(KEY_ID);
                String title = c.getString(KEY_TITLE);
                String date = c.getString(KEY_DATE);
                String content = c.getString(KEY_CONTENT);
                // to remove all <P> </p> and <br /> and replace with ""
                content = content.replace("<br />", "");
                content = content.replace("<p>", "");
                content = content.replace("</p>", "");

                //authornumber is agin  JSON Object
                JSONObject author = c.getJSONObject(KEY_AUTHOR);
                String name = author.getString(KEY_NAME);

                String url = null;
                String slug = null;
                try {
                    JSONArray atta = c.getJSONArray("attachments");
                    for (int j = 0; j < atta.length(); j++) {
                        JSONObject d = atta.getJSONObject(j);

                        slug = d.getString(KEY_SLUG);

                        JSONObject images = d.getJSONObject(KEY_IMAGES);

                        JSONObject thumbnail = images.getJSONObject(KEY_THUMB_URL);
                        url = thumbnail.getString(KEY_URL);

                    }
                } catch (Exception e) {
                    e.printStackTrace();

                }

                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                // adding each child node to HashMap key => value
                map.put(KEY_ID, id);
                map.put(KEY_TITLE, title);
                map.put(KEY_DATE, date);
                map.put(KEY_NAME, name);
                map.put(KEY_CONTENT, content);
                map.put(KEY_SLUG, slug);
                map.put(KEY_URL, url);

                // adding HashList to ArrayList
                songsList.add(map);
            }
        } catch (JSONException e) {
            e.printStackTrace();

        }

        //searchResults=OriginalValues initially
        searchResults = new ArrayList<HashMap<String, String>>(songsList);

        // Getting adapter by passing json data ArrayList
        adapter = new LazyAdapter(this, songsList);
        list.setAdapter(adapter);

        searchBox.addTextChangedListener(new TextWatcher() {

            public void onTextChanged(CharSequence s, int start, int before, int count) {
                //get the text in the EditText
                String searchString = searchBox.getText().toString();
                int textLength = searchString.length();

                //clear the initial data set
                searchResults.clear();

                for (int i = 0; i < songsList.size(); i++) {
                    String playerName = songsList.get(i).get("title").toString();

                    if (textLength <= playerName.length()) {

                        //compare the String in EditText with Names in the ArrayList
                        if (searchString.equalsIgnoreCase(playerName.substring(0, textLength)))
                            Toast.makeText(getApplicationContext(), playerName, 1).show();
                        searchResults.add(songsList.get(i));
                    }
                }

                adapter.notifyDataSetChanged();
            }

            public void beforeTextChanged(CharSequence s, int start, int count,
                                          int after) {

            }

            public void afterTextChanged(Editable s) {

            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T08:01:11.783

替换此代码，您肯定会输出

```
searchBox.addTextChangedListener(new TextWatcher() {

                 public void onTextChanged(CharSequence s, int start, int before, int count) {
                   //get the text in the EditText
                    searchString=searchBox.getText().toString();
                    textLength=searchString.length();
                   searchResults.clear();

                   for(int i=0;i<songsList.size();i++)
                   {
                   playerName=songsList.get(i).get("title").toString();
                  System.out.println("player name "+playerName);
                  if(textLength<=playerName.length()){
                  //compare the String in EditText with Names in the ArrayList
                    if(searchString.equalsIgnoreCase(playerName.substring(0,textLength))){
                    searchResults.add(songsList.get(i));
                    System.out.println("the array list is "+songsList.get(i));
                    adapter=new LazyAdapter(Home.this, searchResults);   

                     list.setAdapter(adapter);
                    }

                      }

                   }
                   if(searchResults.isEmpty()){
                       Toast toast= Toast.makeText(getApplicationContext(), 
                                  "No Items Matched", Toast.LENGTH_SHORT);  
                                  toast.setGravity(Gravity.CENTER_VERTICAL|Gravity.CENTER_HORIZONTAL, 0, 0);
                                  toast.show();
                   }
                   adapter.notifyDataSetChanged();
                 }

                 public void beforeTextChanged(CharSequence s, int start, int count,
                     int after) {
                 System.out.println("before changed");

                   }

                   public void afterTextChanged(Editable s) {

                                               System.out.println("after changed");
                   }
                  }); 
```

# html - html中的嵌套表

> ID：14660404
> 
> 赞同：0
> 
> 时间：2013-02-02T09:19:09.123
> 
> 标签：html

非常简单的问题，但我正在努力解决它。问题是我使用了 100% 宽度的表格，然后在一个 TD 中我使用了 100% 宽度的 div，事情是 div 超过了 TD 限制并显示超出 TD 空间。

注意：此问题仅适用于 chrome，其他浏览器工作正常。

```
<table width=100%><tr>
<td>
  <div width=100%> here are contents </div>
</td>
</tr>
</table> 
```

当我使用类似下面的嵌套表时，也会发生同样的事情

```
<table class="outer-table">
    <tr>
        <td>
            <table class="inner-table">
                <tr>
                    <td>
                        I'm some content!
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:32:49.270

`div`如果将 100% 分配给或 ，则 div 将占用表格的宽度`td`。你怎么想要那个。

# vim - 如何在终端 Vim 中获得透明状态行？

> ID：14660413
> 
> 赞同：2
> 
> 时间：2013-02-02T09:20:38.623
> 
> 标签：vim, statusline

我在 Ubuntu 的默认终端中使用**Vim**。我想让状态行**背景**颜色透明，即成为 Ubuntu 终端背景的颜色。

我尝试将其添加到我的 vimrc 中：

```
hi statusline ctermfg=NONE 
```

也试过：

```
hi statusline ctermbg=NONE 
```

两者都没有任何效果。但是，如果我尝试任何命名颜色，例如`red`，它可以工作。

有什么方法可以使终端 Vim 中的状态行背景透明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-12T22:44:37.233

我有同样的问题，可能有帮助的是使用

```
hi StatusLine ctermbg=0 cterm=NONE 
```

这当然取决于你的一般背景。同样有效的是设置突出显示格式：

```
hi StatusLine ctermbg=none cterm=bold 
```

在这篇文章中更多地阐明了这个问题：[https ://vi.stackexchange.com/questions/2381/hi-statusline-cterm-none-displays-whitespace-characters](https://vi.stackexchange.com/questions/2381/hi-statusline-cterm-none-displays-whitespace-characters)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T10:04:11.520

这个命令

```
:hi StatusLine ctermbg=NONE cterm=NONE 
```

在这里工作。

# android - 用于在 MediaPlayer obj 上从 Internet 加载音频的进度对话框

> ID：14660418
> 
> 赞同：1
> 
> 时间：2013-02-02T09:21:34.330
> 
> 标签：android, media-player, progressdialog

我想从互联网播放 MP3 流。

我写了这段代码，但我想在准备音频文件时显示一个旋转的进度对话框。

帮助我制作一个在加载之前开始并在之后关闭的进度对话框。

代码在这里：

```
try {
    mp.setDataSource(AUDIO URL);
    mp.prepare();
    mp.start();
}
catch (IOException e) { e.printStackTrace(); }
catch (IllegalArgumentException e) { e.printStackTrace(); }
catch (IllegalStateException e) { e.printStackTrace(); } 
```

“mp”是一个 MediaPlayer obj。

如果我的问题不完整，请告诉我完成。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:17:51.443

请看这个网址。它会帮助你。

[http://blog.infidian.com/2008/04/04/tutorial-custom-media-streaming-for-androids-mediaplayer/](http://blog.infidian.com/2008/04/04/tutorial-custom-media-streaming-for-androids-mediaplayer/)

# jquery - jQuery旋钮拨号，如何在悬停时更改其值？

> ID：14660423
> 
> 赞同：0
> 
> 时间：2013-02-02T09:22:02.473
> 
> 标签：jquery, onhover

我使用这个插件[Knob Jquery](http://anthonyterrien.com/knob/)。我想在悬停时更改表盘的值。是否可以？我查看了插件的文档，但没有找到任何有用的东西来解决我的问题。

```
<input disabled class="knob" data-width="120" data-displayPrevious=true data-thickness=".3" value="65"> 
```

[jsFiddle](http://jsfiddle.net/almostemp/HUm3q/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T09:46:18.503

根据此处的第二行，更改插件代码的第 341 行以捕获“mousemove”：

```
 c.bind(
                                "mousedown touchstart mousemove"
                                ,function (e) {
                                    e.preventDefault();
                                    k.startDrag(e);
                                }
                      ) 
```

但是我觉得这使得插件对用户非常不友好。

顺便说一句，如果插件实际上是一个 jQuery UI 小部件，这会容易得多，因为它们支持动态更改状态的方法。或者它可以提供自己的改变状态的方法，但它似乎没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T09:26:47.513

像下面这样使用

```
$('.knob').hover(function(){place your code here}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-02T20:12:44.607

```
//this is for change color, I think is same for change of value    
jQuery('.knob').on(
        {

            mouseenter: function()
            {
                $(this)
                    .trigger(
                    'configure',
                    {

                        "fgColor":"#87CEEB"

                    }
                );
            },
            mouseleave: function()
            {
                var bg_color = jQuery(this).attr('data-fgcolor');
                $(this)
                    .trigger(
                    'configure',
                    {

                        "fgColor":"#87CEEB"

                    }
                );
            }
        }); 
```

# mysql - mysql查询选择日期显示错误答案

> ID：14660426
> 
> 赞同：0
> 
> 时间：2013-02-02T09:22:18.983
> 
> 标签：mysql

当我在 MySQL 中编写查询时，例如

```
SELECT * FROM `customer` where date BETWEEN '01/20/2012' AND '01/31/2012' 
```

它还显示了 2013 年客户的详细信息。

任何人都可以帮助我吗..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T09:37:49.413

您必须将其转换`VARCHAR`为 a`DATE`进行比较；

```
SELECT *
FROM `customer` 
WHERE STR_TO_DATE(`date`, '%m/%d/%Y')
BETWEEN '2012-01-20' AND '2012-01-31' 
```

[一个 SQLfiddle](http://sqlfiddle.com/#!2/ff772/2)。

请注意，这将丢失您在列上的所有索引，因为在比较之前需要转换每一行，这对性能不利。

在 VARCHAR 中存储日期通常被视为一个坏主意，排序顺序很重要，如果系统在国际上使用，月/日很容易混淆。我建议您将日期列转换为`DATE`数据类型。

编辑：这是在不丢失现有数据的情况下转换列的一种方法；

```
# Add a new DATE column
ALTER TABLE `customer` ADD COLUMN tmpdate DATE;
# Transfer the data from the VARCHAR column to the DATE column
UPDATE `customer` SET tmpdate=STR_TO_DATE(`date`, '%m/%d/%Y');
# Drop the old VARCHAR column
ALTER TABLE `customer` DROP COLUMN `date`;
# Rename the new DATE column to `date`.
ALTER TABLE `customer` CHANGE `tmpdate` `date` DATE; 
```

当然，如果没有先进行适当的备份，您*永远不*应该尝试使用 alter table 命令。

[转换的 SQLfiddle 演示](http://sqlfiddle.com/#!2/cce5b/1)。

请注意，依赖日期格式的 PHP 代码可能需要一些更新才能使用`DATE`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T11:32:22.650

```
SELECT 
    *
FROM
    customer
WHERE
    STR_TO_DATE(dateField, '%m/%d/%Y') BETWEEN '01/20/2012' AND '01/31/2012'; 
```

试试这个方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T09:27:18.107

[MySQL 日期和时间函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

```
SELECT 
    *
FROM
    customer
WHERE
    STR_TO_DATE(dateField, '%m/%d/%Y') BETWEEN STR_TO_DATE('01/20/2012', '%m/%d/%Y') AND STR_TO_DATE('01/31/2012', '%m/%d/%Y'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-02T09:43:36.313

1.  将您的数据类型更改`date`为`DATETIME`或简单地更改为，`DATE`如下所示：

    ```
    UPDATE `customer`
        SET `date` = STR_TO_DATE( `date`, '%m/%d/%Y' ); 
    ```

2.  更新后，`ALTER`这样使用：

    ```
    ALTER TABLE `customer`
        CHANGE COLUMN `date` `date` DATE NOT NULL; 
    ```

3.  之后，使用这种选择查询：

    ```
    SELECT *
    FROM `customer`
    WHERE `date` BETWEEN '2012-01-20' AND '2012-01-31'; 
    ```

* * *

更改数据类型的原因在此处进行了解释：[何时使用`VARCHAR`和`DATE`/`DATETIME`](https://stackoverflow.com/q/4759012/1190388 "何时使用 VARCHAR 和 DATE/DATETIME")

在此处阅读其他与日期和时间相关的数据类型：[The `DATE`、`DATETIME`和`TIMESTAMP`Types](http://dev.mysql.com/doc/refman/5.1/en/datetime.html "DATE、DATETIME 和 TIMESTAMP 类型")。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-02T09:30:27.807

假设`date`字段类型是`DATE`;

```
SELECT * FROM `customer` WHERE `date` BETWEEN '2012-01-20' AND '2012-01-31' 
```

从手册；

> DATE 类型用于具有日期部分但没有时间部分的值。MySQL 以 'YYYY-MM-DD' 格式检索和显示 DATE 值。

参考：[http ://dev.mysql.com/doc/refman/5.5/en/datetime.html](http://dev.mysql.com/doc/refman/5.5/en/datetime.html)

**更新**

但是，将日期存储为 是个坏主意`varchar`，也许查询可能像：

```
SELECT * FROM `customer` WHERE `date` REGEXP '^2012-01-(2[0-9]|[0-3][0-9])$' 
```

参考：[http ://dev.mysql.com/doc/refman/5.1/en/regexp.html#operator_regexp](http://dev.mysql.com/doc/refman/5.1/en/regexp.html#operator_regexp)

**但如果可能的话，您需要将字段类型从 更改`VARCHAR`为`DATE`。**

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-02T12:42:57.503

```
SELECT * FROM `customer` where date BETWEEN '2012/01/20' AND '2012/31/01' 
```

It will run now because phpmyadmin has been upgraded

# android - 检查android资产文件夹html文件是否存在

> ID：14660427
> 
> 赞同：3
> 
> 时间：2013-02-02T09:22:22.363
> 
> 标签：android, android-assets

我将 html 文件作为“file:///android_asset/WebApplication/index.html”传递。如何在 android.xml 中检查此文件是否存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T09:25:58.747

您可以尝试打开流，如果失败，则文件不存在，如果不失败，则文件应该在那里：

```
/**
 * Check if an asset exists. This will fail if the asset has a size < 1 byte.
 * @param context
 * @param path
 * @return TRUE if the asset exists and FALSE otherwise
 */
public static boolean assetExists(Context context, String path) {
    boolean bAssetOk = false;
    try {
        InputStream stream = context.getAssets().open(ASSET_BASE_PATH + path);
        stream.close();
        bAssetOk = true;
    } catch (FileNotFoundException e) {
        Log.w("IOUtilities", "assetExists failed: "+e.toString());
    } catch (IOException e) {
        Log.w("IOUtilities", "assetExists failed: "+e.toString());
    }
    return bAssetOk;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T09:29:01.273

[[Android 资产]：文件还是文件夹？](https://stackoverflow.com/questions/11477148/android-assets-file-or-folder)

[如何从资产文件夹中获取所有文件](https://stackoverflow.com/questions/8368101/how-to-get-all-files-from-assets-folder)

```
File f=new File("file:///android_asset/");  
    File[] files=f.listFiles(); 
```

如果文件返回 null den，您就知道文件夹是空的。

# jquery - 无法提交 ajax 表单内部错误 500

> ID：14660428
> 
> 赞同：1
> 
> 时间：2013-02-02T09:22:52.897
> 
> 标签：jquery, ajax, asp.net-mvc, asp.net-mvc-4

我在下面的代码中提交了问题。在 Firebug 上，我收到以下消息：

POST localhost:9706/Home/Upload 500 内部服务器错误

没有为此对象定义无参数构造函数。

**说明：**执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

**异常详细信息：** System.MissingMethodException：没有为此对象定义无参数构造函数。

这个表单我可以提交但没有 jquery 和 unobtrusive-ajax 脚本，在这种情况下提交看起来像普通提交（整个页面提交，没有 ajax）

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<IEnumerable<FileInfoModel>>"%> 

 <%@ Import Namespace="MembershipTest.Models"%> 
<script src="../../Scripts/jquery-1.7.1.js"
type="text/javascript"></script>  
<script src="../../Scripts/jquery.unobtrusive-ajax.js"type="text/javascript"</script>   
<script type="text/javascript">     
function OnSuccess(response) {
     alert(response);
 }
 function OnFailure(response) {
     alert("Whoops! That didn't go so well did it?");  
 }   </script>   
<% using (Ajax.BeginForm("Upload", "Home", null,
     new AjaxOptions
     {
         HttpMethod = "POST",
         UpdateTargetId = "uploadTable",
         InsertionMode = InsertionMode.Replace,
         OnSuccess = "OnSuccess",
         OnFailure = "OnFailure" 
     },
     new { enctype = "multipart/form-data" })){%>  
  <fieldset> 
  <legend> Upload File: </legend> <span>Filename:</span>
  <input type="file" name="file" id="file" /> 
  <input type="submit" value="Upload" /> 
  </fieldset> <% } %>  
  <div id="uploadTable"></div> 
```

**控制器代码**

```
 [HttpGet]
    [ChildActionOnly]
    public ActionResult Upload()
    {

        List<FileInfoModel> FilesInfoData =  new List<FileInfoModel>();

        DirectoryInfo dir = new DirectoryInfo(Server.MapPath(uploadLocation));
        var files = from f in dir.GetFiles()
                    select f;
        foreach (var i in files)
        {
            FileInfoModel fmodel = new FileInfoModel(){
                Name = i.Name,
                Length = i.Length,
                LastWriteTime = i.LastWriteTime
            };
            FilesInfoData.Add(fmodel);
        }

        return PartialView("Upload",FilesInfoData);
    }
    [HttpPost]
    public ActionResult Upload(HttpPostedFileWrapper file)
    {

        if (file.ContentLength > 0)
        {
            var fileName = Path.GetFileName(file.FileName);
            var saveLocation = Path.Combine(Server.MapPath(uploadLocation), fileName);
            file.SaveAs(saveLocation);
        }
        return RedirectToAction("Index");
    } 
```

**型号代码**

```
public class FileInfoModel
{
    public FileInfoModel(){}
    public string Name { get; set; }
    public double Length { get; set; }
    public DateTime LastWriteTime { get; set; }       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:08:35.873

昨天我在尝试类似的东西，当我使用 ajax.beginform 时遇到了同样的错误，所以使用了..

```
<form action="Home/upload" method="post" enctype="multipart/form-data">                       
 <input type="file" name="file" id="file" /><br />
 <input type="submit" value="Upload" />                       
</form> 
```

在你看来试试这个，这可能会有所帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T10:17:40.737

您的控制器期待您的表单使用 post 的 httpget 位。如果您从控制器操作中删除 httpget 它应该可以工作。

# android - 如何在 android 模拟器 3.1 的 cacerts 文件夹中添加证书

> ID：14660429
> 
> 赞同：2
> 
> 时间：2013-02-02T09:23:10.090
> 
> 标签：android, security, penetration-testing, application-security

我正在尝试在 android 模拟器 3.1 中拦截本机应用程序的 HTTPS 流量。但是，文件系统中不存在 cacerts.bks 文件。所有证书都存储在 /system/etc/security/cacerts/ 下。在添加证书和使用代理拦截请求方面的任何帮助将不胜感激。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-06T18:51:58.980

由于您没有提到您正在使用的代理工具，我将假设它是 Burp。

第一步，导出 Burp 的证书。为此，请使用以下链接上的指南并在“查看证书步骤将证书导出到您的系统”之后。验证文件是否以扩展名“.crt”保存

[http://portswigger.net/burp/help/proxy_options_installingCAcert.html](http://portswigger.net/burp/help/proxy_options_installingCAcert.html)

现在，将此文件复制到模拟器的 sdcard 中。您可以使用 adb push 来实现这一点。

在模拟器中导航到设置 -> 安全 -> 凭据存储：从 SD 卡安装证书

它将提示您输入 PIN 码，输入密码并添加证书。现在，访问您应该能够在代理中拦截的任何 HTTPS 站点。

# multithreading - 如何在iOS中将方法运行到后台

> ID：14660440
> 
> 赞同：0
> 
> 时间：2013-02-02T09:24:40.823
> 
> 标签：multithreading

我有一个名为“uploadImage”的方法。这是我的方法将图像上传到我的服务器。但是，当我回到其他视图时，“uploadImage”方法没有运行。我希望“uploadImage”方法一直运行直到完成！

那么，我该如何解决它。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:46:23.780

您可以使用 GCD 将该方法放入后台队列中。

[https://developer.apple.com/library/mac/documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html](https://developer.apple.com/library/mac/documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T09:46:40.237

看看 NSOperationQue 或 NSThread，NSOperationQue 可能是更好更现代的方式，尤其是如果您有许多在运行时确定的 uploadImages。

# android - 数据持久化 ViewPager

> ID：14660441
> 
> 赞同：3
> 
> 时间：2013-02-02T09:24:52.540
> 
> 标签：android, android-viewpager

我`ViewPager`用来显示表单的多个视图，例如在第一个视图上显示姓名和电子邮件，然后在其他视图上显示。

现在的问题是：

*   在第 1 页输入数据导航到第 2 页，然后导航到第 3 页。
*   回到第 1 页，数据不存在。

我在最后一页上有一个保存按钮，所以我还需要一种从那里的其他页面检索数据的方法。

如果我能找到一种方法，我可以在第 1 页更改为第 2 页时将数据保存`onDestroy`在活动方法中。

不`ViewPager`适合我在这里的目的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-05-25T12:18:29.640

我在我的 GitHub 项目中实现了类似的东西：[查看寻呼机表单](https://github.com/ashwindmk/Android-View-Pager-Form)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T09:28:38.047

我认为`ViewPager`这个目的很好。您需要做的就是将在第一个和第二个片段中输入的数据保存到您的父级，并在您点击最后一个片段`Activity`时获取它。`Save`

编辑：检查[THIS](https://stackoverflow.com/questions/5194548/how-to-pass-data-between-fragments)和[THIS](https://stackoverflow.com/questions/9343241/passing-data-between-a-fragment-and-its-container-activity)相关的 SO 问题

# android - 如何在视频录制中添加文字？

> ID：14660443
> 
> 赞同：16
> 
> 时间：2013-02-02T09:25:35.643
> 
> 标签：android, android-intent, android-camera, android-mediarecorder

我搜索了很多，但没有找到任何解决方案。我的问题是如何在录制时向视频添加文本，以便我们在看到视频时可以获得相同的文本。当我看到捕获视频时，我想要这样的东西。 ![在此处输入图像描述](../Images/279ebd1a8bc7cc6bf4c5723068ae6c8e.png) 目前我正在获得时间和视频。所以问题是如何结合它。任何形式的帮助都将不胜感激。在此先感谢..

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-05T19:18:26.833

假设您尝试将文本添加到实际的视频文件中，而不是简单地`TextView`在`VideoView`. 您提到您目前分别拥有时间和视频，因此我假设您正在尝试将文本添加到视频文件本身。

为了向视频添加文本，您需要在实际设备上重新编码视频。在 Android 上重新编码视频很棘手，主要是因为 Android 手机上的处理器不同，而且编码取决于处理器。有一个名为的开源 iOS 库`GPUImage`允许您执行此操作，但不幸的是，这在 Android 上不可用。

为 Android 编译 FFMPEG 已经付出了一些努力（理论上这将允许这种事情发生），但这涉及到对底层 C++ 代码的一些认真工作，而且我还没有找到任何可以在许多设备上简单地实现这一点的应用程序（[查看此视频转换器](https://play.google.com/store/apps/details?id=roman10.media.converter&hl=en)，并注意如何为不同的手机下载[不同的](https://play.google.com/store/apps/details?id=roman10.media.converter.v7neon&feature=more_from_developer#?t=W251bGwsMSwxLDEwMiwicm9tYW4xMC5tZWRpYS5jb252ZXJ0ZXIudjduZW9uIl0.) [编解码器](https://play.google.com/store/apps/details?id=roman10.media.converter.v7vfp3&feature=more_from_developer#?t=W251bGwsMSwxLDEwMiwicm9tYW4xMC5tZWRpYS5jb252ZXJ0ZXIudjd2ZnAzIl0.)）。对于一个特定的设备，您可能会有更多的运气，但如果您正在寻找跨*多个*设备的轻松分发，您可能很难做到这一点。

目前，这个问题没有简单的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-17T12:57:29.100

我使用camera2 API。我创建预览和 ImageReader。我从记录表面得到画布。每一帧都转换成位图放到画布上，然后画logo、文字等，

```
 private val mOnImageAvailableListener = ImageReader.OnImageAvailableListener { reader -> 
val image = reader.acquireNextImage() ?: return@OnImageAvailableListener
val bytes = image.toNV21()//image.convertYUV420888ToNV21()
        val bitmap = Bitmap.createBitmap(image.width, image.height, 
Bitmap.Config.ARGB_8888);
        val bmData: Allocation = Converter.renderScriptNV21ToRGBA888(requireContext(), 
image.width, image.height, bytes)
        bmData.copyTo(bitmap)
        val canvas = recorderSurface!!.lockCanvas(null)
        canvas.drawBitmap(bitmap, 0f, 0f, Paint())
        drawData(canvas)
        recorderSurface!!.unlockCanvasAndPost(canvas)
        bitmap.recycle()
        image.close()
 } 
```

# c# - WPF ObservableCollection 和 PropertyChanged

> ID：14660448
> 
> 赞同：0
> 
> 时间：2013-02-02T09:25:46.283
> 
> 标签：c#, wpf, observablecollection, inotifypropertychanged

我有一个关于更新可观察集合的问题。我正在使用 Visual Studio 2010 c#。我是一个相对新手，可能犯了一个灾难性的错误，所以很抱歉开始。基本上，当我在 Windows 7 上运行此代码时，此代码运行良好，但在 Windows 8 上，我得到了`NullReferenceException`PropertyChanged。

我有一个包含 Tasks 可观察集合的类。

任务.cs

```
namespace TimeLocation
{
    public static class TStatic
    {
        static TStatic()
        {
            TaskList = new ObservableCollection<Tasks>(); 
        }
        public static ObservableCollection<Tasks> TaskList { set; get; }
    }

public class Tasks : INotifyPropertyChanged
{
    public int taskID;
    public string taskname;

    public Tasks(string tname)
    {

        this.taskname = tname;
    }

    public string Taskname
    {
        get { return taskname; }
        set
        {
            if (value != "")
            {
                taskname = value; OnPropertyChanged("Taskname");
            }
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string info)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(info));

        }
    }
} 
```

我在 MainWindow 中有一个绑定到 Tasks 的网格，并且通过`PropertyChanged`上面的更新更新很好。用户还可以通过用鼠标拖动来编辑任务。我希望它也能更新网格和可观察的集合。在 Windows 7 上运行时，这有效，但在 Windows 8 上失败。

在 mainwindow.xaml 的代码后面

```
public partial class MainWindow : INotifyPropertyChanged
{

    public MainWindow()
    {

        InitializeComponent();

        DataContext = TStatic.TaskList;
    }

    private void dCanvas_PreviewMouseLeftButtonUp(object sender, System.Windows.Input.MouseButtonEventArgs e)
    {
        Tasks t = _selectedtask;
        t.taskname = "Test";
        PropertyChanged(t, new PropertyChangedEventArgs("Taskname"));
    }
} 
```

我确信任务名称已更新，因为当我将其保存到文件并添加手表时名称已更改。

`_selectedtask`已通过选择网格行填充了一项任务。

在 Windows 8 中，该行

```
PropertyChanged(t, new PropertyChangedEventArgs("Taskname")); 
```

返回空错误。在 Windows 7 中，它不为空并正确更新网格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-26T11:36:14.180

首先，公共字段声明是一种非常糟糕的做法。您应该将它们设为私有，并在需要时通过公共属性授予对它们的访问权限。

其次，像 Window 这样的 ui 元素不应该实现 INotifyPropertyChanged 接口。您为视图模型类实现它（参见 MVVM 模式，wpf 应用程序的推荐方法）或至少为您的任务之类的数据类实现它。

在您的 dCanvas_PreviewMouseLeftButtonUp 代码中，更新可能不起作用，因为您更新了 Tasks 对象的字段，但调用了 MainWindow 的 PropertyChanged 方法。设置 TaskName 属性就足够了：

```
t.TaskName =  "Test" 
```

# c# - .net 中的类是私有的还是内部默认的？

> ID：14660457
> 
> 赞同：1
> 
> 时间：2013-02-02T09:27:04.783
> 
> 标签：c#, .net

> **可能重复：**
> [为什么 Visual Studio 默认不创建公共类？](https://stackoverflow.com/questions/824555/why-visual-studio-doesnt-create-a-public-class-by-default)

msdn链接告诉我们

[http://msdn.microsoft.com/en-us/library/ba0a1yw2.aspx](http://msdn.microsoft.com/en-us/library/ba0a1yw2.aspx)

Class 的默认成员可访问性是私有的

请说明默认情况下是内部还是私有？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-02T09:39:17.167

所有成员的默认值是“您可以指定的最私密的” ¹。

因此默认情况下是*嵌套*类型`private`，但默认情况下是*顶级*类型`internal`：

```
namespace Foo
{
    class ThisIsInternal
    {
        class ThisIsPrivate
        {
        }
    }
} 
```

所有类型的规则都是相同的——不管是类、接口、结构、枚举还是委托。

* * *

¹除了特定的属性 getter/setter 略有例外，当您使属性更加私密时，您*只能明确说明属性的一部分。*

```
// The getter is public, the setter is private
public string Foo { get; private set; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T09:29:10.773

> Class 的默认成员可访问性是私有的

您将成员`(nested class)`可访问性与`non-nested`类可访问性混淆了。我从您在问题中给出的链接中提取了以下内容。

> 不嵌套在其他类型中的顶级类型只能具有内部或公共可访问性。这些类型的默认可访问性是 internal ，[reference](http://msdn.microsoft.com/en-us/library/ba0a1yw2.aspx)。

*嵌套类的可访问性默认情况下是私有的。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T09:39:37.130

在您提到的文章中，明确规定如果**Class 在另一个 class 内**，则默认情况下访问将是**私有的。****访问级别可以更改**。

**无法将顶级类创建为私有**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-02T09:38:37.133

这是我们的测试对象：

```
class AccessibilityTest
{
    class Nested {}
    struct NestedStruct {}
    enum NestedEnum { A }
    int Field;
    void Method() {}
} 
```

使用 Visual Studio 2012 编译类，然后在自己喜欢的反射工具中反编译。结果是：

```
internal class AccessibilityTest
{
    private class Nested
    {
    }
    [StructLayout(LayoutKind.Sequential, Size = 1)]
    private struct NestedStruct
    {
    }
    private enum NestedEnum
    {
        A
    }
    private int Field;
    private void Method()
    {
    }
} 
```

可以看出，顶级类型默认是**内部的。**默认情况下，嵌套成员是**私有的。**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-02T10:35:50.403

一个类有时默认是内部的（当顶级时）有时是私有的（当嵌套时），这可能看起来很奇怪。然而，这仅仅意味着默认情况下所有访问修饰符都是最大限制的。这也意味着私有这个词的几乎所有用法都是多余的——只有那些在属性访问器上的用法才有意义（它们可以限制对其他非私有属性的访问）。

所以我更喜欢将默认值视为一致的——即在概念上是私有的，并且关键字不一致——`internal`有时意味着保持本地上下文，有时意味着授予对整个程序集的访问权限:-)。而且`private`几乎总是没有任何意义——它是纯粹的样板，因此最好省略（属性访问器除外）。

# java - Java DatagramPacket 和 DatagramSocket 不接收数据

> ID：14660458
> 
> 赞同：2
> 
> 时间：2013-02-02T09:27:08.373
> 
> 标签：java

我正在尝试在 Java 中使用`DatagramPacket`和类接收一个简单的字符串。`DatagramSocket`

这是我的代码：

```
public static void main(String [] args){

    DatagramSocket aSocket = null;

    try{
        aSocket= new DatagramSocket();
        String aMessage = "my message";
        System.out.println("1");
        byte [] m = aMessage.getBytes();
        InetAddress aHost = InetAddress.getByName("localhost");
        int serverPort = 6789;
        DatagramPacket request = new DatagramPacket(m,aMessage.length(),aHost,serverPort);
        System.out.println("2");
        aSocket.send(request);
        System.out.println("3");
        byte [] buffer = new byte[1000];
        System.out.println("4");
        DatagramPacket reply = new DatagramPacket(buffer,buffer.length);
        aSocket.receive(reply);
        System.out.println("5");
        System.out.println("DATA RECEIVED" + reply.getData());
        aSocket.close();

    }
    catch(SocketException ex){
       ex.printStackTrace();
    }

    catch(IOException ioe){
       ioe.printStackTrace();
    }
} 
```

它不打印接收到的数据。我`System.out.println`只是看看代码在哪里执行，它停在 4，它不打印 5，这意味着问题刚好低于 4。为什么我没有收到数据，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T09:43:48.920

@avi 不要使用相同的数据报套接字来获取依赖。要获得回复，您必须提及服务器数据报 socket.use 的端口号

```
DatagramSocket datagramSocket = new DatagramSocket(6789);// Which is given by you only 
```

然后使用 `datagramSocket.receive(reply);`

也可以使用此方法获取地址

```
InetAddress aHost = InetAddress.getLocalHost(); 
```

代替

```
InetAddress aHost = InetAddress.getByName("localhost"); 
```

参考这个链接

[http://www.java2s.com/Code/Java/Network-Protocol/UseDatagramSockettosendoutandreceiveDatagramPacket.htm](http://www.java2s.com/Code/Java/Network-Protocol/UseDatagramSockettosendoutandreceiveDatagramPacket.htm)

# java - 单击时所有项目的Android ListView setBackground

> ID：14660460
> 
> 赞同：0
> 
> 时间：2013-02-02T09:27:16.563
> 
> 标签：java, android, android-listview

我为被点击的项目设置了背景。

```
list  = (ListView)findViewById(R.id.listView1);

list.setOnItemClickListener(new OnItemClickListener() {
    @Override
    //ListView parent, View v, int position, long id 
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        arg1.setBackgroundColor(Color.RED);
    }
}); 
```

问题是，当我单击另一个项目时，最后一个项目和新项目将是红色。是否可以在 setOnItemClickListener 中为最后一项（或全部）设置红色？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:41:00.407

是的，使用 xml 中的选择器标签创建一个自定义背景可绘制对象，并将其作为背景添加到您的子布局中。

有关更多信息，请参见：http: [//developer.android.com/guide/topics/resources/drawable-resource.html#StateList](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T09:54:58.157

问题是他们需要从前一个视图中删除背景，因此您需要获取前一个 itemview 并从该视图和当前视图集背景中删除背景。

1.  如果你想重置你的列表视图而不是你必须在循环中做的。

或者

1.  您必须以某种方式存储先前选定的项目位置。比点击时间你可以做删除背景。你可以得到以前的设置项IE。

    ```
    public View previousItemView(){ 
        int wantedPosition =  childPosition;
    // This is the same as child #0
    int firstPosition = parent.getFirstVisiblePosition();
    int wantedChild = wantedPosition - firstPosition;
    // Say, first visible position is 8, you want position 10, wantedChild
    // will now be 2
    // So that means your view is child #2 in the ViewGroup:
    if (wantedChild < 0 || wantedChild >= parent.getChildCount()) {
        convertView = null;
      } else {
        // Could also check if wantedPosition is between
        // listView.getFirstVisiblePosition() and
        // listView.getLastVisiblePosition() instead.
        convertView = parent.getChildAt(wantedChild);
      }
      return convertView;
    } 
    ```

# php - 如何在PHP中将表达式保存在变量中？

> ID：14660464
> 
> 赞同：0
> 
> 时间：2013-02-02T09:28:03.583
> 
> 标签：php

这可能是个坏问题，但我想知道是否有可能。

```
//here is my expression
$data = ($edit == 'allow') ? getData($id) : null; 
```

上面的表达式解释并保存在`$data`变量中，是否可以将其保存为字符串并在需要时执行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T09:32:39.880

您可以创建一个闭包来绑定`$edit`and`$id`变量以供以后使用：

```
$data = function() use ($id, $edit) {
    return ($edit == 'allow') ? getData($id) : null;
}

// later in your code
if ($data()) {
} else {
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T09:31:42.663

这绝对是可能的：

```
$string = '$data = ($edit == \'allow\') ? getData($id) : null;'; 
```

要运行表达式，只需评估它。

```
eval($string); 
```

现在您可以`$data`根据需要使用该变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T09:32:12.357

您为此目的使用[eval构造：](http://php.net/manual/en/function.eval.php)

```
$expression = "(\$edit == \'allow\') ? getData(\$id) : null;";
eval($expression); 
```

但这很危险，因为它可以执行潜在的恶意代码。小心使用它。

# colors - 使用原始纹理颜色的 2D 着色器？

> ID：14660466
> 
> 赞同：0
> 
> 时间：2013-02-02T09:28:06.867
> 
> 标签：colors, xna, shader

我的问题是，像素着色器使用纹理的原始颜色。更加具体：

我的衣服是用这种方法画的`spriteBatch.Draw()`。原始纹理是白色的，所以我可以使用不同的颜色参数将其更改为任何颜色。但是像素着色器总是使用原始的白色。有什么解决方法吗？（拜托，没有渲染到纹理的提示。）

![示例图片](../Images/32d6b167bee0cf086a4d7c40a2a0f967.png)

如您所见，没有着色器的衣服有颜色。使用着色器它们是白色的。这是因为原始纹理也是白色的，但在游戏中它是通过 Draw() 方法（颜色参数）着色的。我希望着色器使用新颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:49:32.000

如果您希望其他方法使用通常不使用的某些参数，则必须显式传递它并告诉它使用它。

您的像素着色器不知道您尝试使用什么颜色为纹理着色，因此您必须将该颜色作为参数传递。

# php - 使用 Zend Gdata 电子表格获取工作表 id

> ID：14660469
> 
> 赞同：0
> 
> 时间：2013-02-02T09:28:23.280
> 
> 标签：php, zend-framework, gdata, zend-gdata

我正在尝试使用 zend gdata 来获取电子表格的工作表。我可以使用获取工作表列表

```
$query = new Zend_Gdata_Spreadsheets_DocumentQuery();
$query->setSpreadsheetKey($key);
$feed = $spreadSheetService->getWorksheetFeed($query); 
```

我想知道如何获得 worksheetId。

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T23:06:48.160

您可以像这样循环浏览工作表 ID：

```
foreach ($feed->entries as $entry)
{

/*use basename since this outputs a url & the id we need is just the last bit */

$worksheetId = basename($entry->id);

/* do something e.g.*/

echo $entry->title." : ".$worksheetId."\n";

} 
```

# windows-phone-8 - windows phone 中的 30 个推送通知应用程序

> ID：14660470
> 
> 赞同：2
> 
> 时间：2013-02-02T09:28:25.797
> 
> 标签：windows-phone-8

我在一篇文章中读到，windows phone 允许为设备发送 30 个推送通知

[链接在这里](http://msdn.microsoft.com/en-us/library/ff402558%28VS.92%29.aspx)

如果我们添加的异常多于该异常，则会引发**PushNotificationChannelQuotaExceeded**，但如果我们想要添加，我们仍需要关闭任何一个应用程序的推送通知并安装新应用程序。

但是 windows phone 如何知道启用推送通知的应用程序的计数，如果我们禁用任何应用程序的推送通知，它是否知道我们禁用通知的应用程序？

它如何知道我们是否禁用一个通知以允许另一个通知？

并假设如果我们的应用程序是第 31 个并且用户安装它直到用户启动我们的应用程序，他不知道他需要禁用另一个应用程序推送通知才能启用我们的应用程序.. 对吗？在这里，我们正在处理 pushnotificationchannel 中的异常...

直到用户禁用另一个应用程序的推送通知.. 我们的应用程序将处于什么阶段？

谁能告诉我答案...我搜索了很多但找不到答案。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T11:19:52.587

Windows Phone 8 不再有限制。

来源：[http](http://channel9.msdn.com/Events/Build/2012/2-019) ://channel9.msdn.com/Events/Build/2012/2-019 5分钟

# html - 为什么 Google Chrome 中的 HTML5 视频缓冲如此糟糕？

> ID：14660474
> 
> 赞同：10
> 
> 时间：2013-02-02T09:29:02.303
> 
> 标签：html, google-chrome, video, browser, html5-video

在 YouTube 和最近在 Coursera.org 上观看 HTML5 视频时，我在 Chrome 中遇到了大量“随机”缓冲停止。

问题是，使用 IE10 或 Firefox 之类的浏览器，观看 HTML5 视频绝对没有问题。不过，IE10 似乎缓冲了整个视频。有没有办法为 Chrome 启用这种确切的行为？

# ios - 从 ActionSheet 中删除红色破坏性按钮

> ID：14660480
> 
> 赞同：1
> 
> 时间：2013-02-02T09:29:44.613
> 
> 标签：ios, objective-c, uiactionsheet

我正在尝试弹出一个没有破坏性按钮的操作表。如果我只是尝试从下面的代码中删除破坏性按钮，则会收到错误消息：UIActionSheet 没有可见界面。有谁知道为什么会这样？如何删除红色破坏性按钮？谢谢！

```
UIActionSheet *popupQuery = [[UIActionSheet alloc] initWithTitle:@"Title" 
delegate:self cancelButtonTitle:@"Cancel Button" destructiveButtonTitle:@"Destructive 
Button" otherButtonTitles:@"Other Button 1", @"Other Button 2", nil]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-02T09:33:56.673

**只是`nil`作为你的`destructiveButtonTitle`**.

只需尝试以下代码：

```
UIActionSheet *popupQuery = [[UIActionSheet alloc] initWithTitle:@"Title" delegate:self cancelButtonTitle:@"Cancel Button" destructiveButtonTitle:nil otherButtonTitles:@"Other Button 1", @"Other Button 2", nil]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T09:40:10.313

> 我收到一个错误：UIActionSheet 没有可见界面。

愿意进一步阅读吗？消息实际上是

> UIActionSheet 没有可见界面声明选择器`initWithTitle:delegate:cancelButtonTitle:otherButtonTitles:`

是的，因为没有这样命名的初始化程序。你不能像这样“删除”参数（因为它改变了方法的名称，**为什么你会期望不存在的方法存在？**）

您可以简单地将`nil`其作为破坏性按钮标题传递。

# c# - Ajax 和自定义视图状态提供程序

> ID：14660482
> 
> 赞同：2
> 
> 时间：2013-02-02T09:29:47.607
> 
> 标签：c#, asp.net, viewstate

我已经从这篇文章中实现了一个自定义视图状态提供程序

[http://www.codeproject.com/Articles/8001/ViewState-Provider-an-implementation-using-Provide](http://www.codeproject.com/Articles/8001/ViewState-Provider-an-implementation-using-Provide)

这在完全回发的情况下工作正常，但在部分回发（Ajax）的情况下它不起作用，有人可以为此提供解决方案，或者指导我这件事出了什么问题我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:02:08.650

终于我解决了这个烂摊子，感谢**Aristos**给了我关于这个问题的线索。

这是我所做的只是在**SqlViewStateProvider.cs中更改此方法**

```
public override void SavePageState(System.Web.UI.Control pControl, object viewState)
{
  string vsKey = String.Empty;

  //    Searching for the hidden field named "__vsKey"

  // Comment out this line 
  //System.Web.UI.HtmlControls.HtmlInputHidden ctrl = System.Web.UI.HtmlControls.HtmlInputHidden)pControl.FindControl("__vsKey");

 // Add this line
  string lastKey = ((Page)pControl).Request.Form["__vsKey"];
  if (lastKey == null)
  {
     // Generate new GUID
     vsKey = Guid.NewGuid().ToString();
     // Store in the hidden field

     // Remove this line its old school code
     //((Page)pControl).RegisterHiddenField("__vsKey", vsKey);
     // Add this new one
     ((Page)pControl).ClientScript.RegisterHiddenField("__vsKey", vsKey);
   }
   else
   {
     // Use the GUID stored in the hidden field

     // Comment this one out
     //vsKey = ctrl.Value;

     // Add these two lines
     vsKey = lastKey;
     ((Page)pControl).ClientScript.RegisterHiddenField("__vsKey", lastKey);
   }

// Every thing else is just as-is...

} 
```

希望这可以帮助其他人也在同样的问题上苦苦挣扎。

# css - ASP.NET MVC 4 - Sprites：来自模型的背景位置

> ID：14660483
> 
> 赞同：2
> 
> 时间：2013-02-02T09:29:54.313
> 
> 标签：css, asp.net-mvc, sprite

我有一组 96x96 像素的图片。因此，我决定将它们组合在一张图像中，并将有关边距的信息存储在数据库中。如何`background-poisiton`根据模型中的数据进行设置？
或者也许有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T09:55:12.890

如果您在模型中只有 1 个值，称为`ImagePosition`保留边距（顶部？左？底部？对吗？）那么您将能够执行类似的操作；

```
<span class="picture" style="background-position: @Model.ImagePosition center"></span> 
```

或者

```
<span class="picture" style="background-position: left @Model.ImagePosition"></span> 
```

在这种情况下，该类`picture`用于保存所有精灵信息，例如

```
.picture{ 
    background: url([pathtoimage]) no-repeat center center; 
    width: [width]; /* set your width to what you want */
    height: [height]; /* set your height to what you want */
    display: block;
    /* add some padding, margins etc... */
 } 
```

然后你只是调整背景位置。

`ImagePosition`如果是单个值，则此解决方案只能调整背景的垂直或水平位置。如果 ImagePosition 虽然是一个对象，例如具有垂直和水平值，那么您可以更多地调整背景的位置。

```
<span class="picture" style="background-position: @Model.ImagePosition.Horizontal @Model.ImagePosition.Vertial"></span> 
```

# java - Java JTextField 和（错误的）KeyListeners

> ID：14660484
> 
> 赞同：0
> 
> 时间：2013-02-02T09:30:13.537
> 
> 标签：java, swing, events

我创建了一个自定义类，它扩展了 JTextField 并实现了 KeyListener。这是我的课的摘录：

```
public class ChatBox extends JTextField implements KeyListener {
private boolean hidden;

public ChatBox(int x, int y, boolean hidden, MapFrame parent)
{
    setBounds(x,y,300,30);
    setBackground(new Color(255,255,255,40));
    parent.addKeyListener(this);

    if(hidden == true)
    {
        setVisible(false);
    }
    else
    {
        setVisible(true);
    }

} 
```

然后我为 KeyListener 创建了事件：

```
@Override
public void keyPressed(KeyEvent arg0) {
    // TODO Auto-generated method stub
    System.out.println("KEY EVENT DETECTED PRESSED");

}

@Override
public void keyReleased(KeyEvent key) {
    System.out.println("KEY EVENT DETECTED ON CHAT BOX");
    if(key.getKeyCode() == KeyEvent.VK_ENTER)
    {
            System.out.println("Showing message input...");
            setVisible(true);
            repaint();
    }

    if(key.getKeyCode() == KeyEvent.VK_ESCAPE)
    {
            System.out.println("Hiding message input...");
            setVisible(false);

            repaint();
    }

}

@Override
public void keyTyped(KeyEvent arg0) {
    // TODO Auto-generated method stub

} 
```

现在，我的目标是当用户按下回车键时出现聊天框，然后按下退出键时消失。

当用户按下 enter 时出现聊天框/JTextField，并触发“在聊天框中检测到的关键事件”，但过了这一点，按键侦听器拒绝工作。“在聊天框中检测到的关键事件”打印甚至没有出现。

控件具有焦点（我什至尝试使用 requestFocusInWindow() 专门为其赋予焦点），但关键侦听器拒绝工作，所以我假设这与 TextField '覆盖'它们或为了输入？

如何让 KeyListeners 监听 JTextField 中的某些键？

问候，本。

# css - 对齐 Divs，表格样式，用于社交媒体图标

> ID：14660487
> 
> 赞同：0
> 
> 时间：2013-02-02T09:30:25.937
> 
> 标签：css, html, icons, spacing

我想在我的页脚上放一些社交媒体图标，四个图标中的每一个都有两列很好的空间，但是我的代码目前只能让我将所有图标放在一起，解决方案是什么？

**CSS：**

```
.container
{
}
.container DIV
{
    width: 15px;
    margin: 1px;
} 
```

**HTML：**

```
<div>
<div style="width: 200px;" class="container" display: "inline-block" >
<div style="float: left;"><a title="Facebook" href="http://www.facebook.com/KenyaLuxuryVillas" target="_blank"><img src= "http://villasdiani.com/wp-content/uploads/2013/02/facebook-logo-square.png" /></a></div>
<div style="float: right;"><a title="Stumbleupon" href= "http://www.stumbleupon.com/stumbler/bestbeacheskenya" target="_blank"><img src= "http://villasdiani.com/wp-content/uploads/2013/02/stumbleupon-logo-square.png" /></a></div>
<div style="float: left;"><a title="Linkedin" href= "http://ke.linkedin.com/in/luxuryvillaskenya" target="_blank"><img src= "http://villasdiani.com/wp-content/uploads/2013/02/linkedin-logo-square2.png" /></a></div>
<div style="float: right;"><a title="Twitter" href= "https://twitter.com/villasdiani" target="_blank"><img src= "http://villasdiani.com/wp-content/uploads/2013/02/twitter-bird2-square.png" /></a></div>
<div style="float: left;"><a title="Google+" href= "https://plus.google.com/u/0/108558298587711226912/" target="_blank"><img src= "http://villasdiani.com/wp-content/uploads/2013/02/google-logo-square.png" /></a></div>
<div style="float: right;"><a title="Vimeo" href= "https://vimeo.com/africashot" target="_blank"><img src= "http://villasdiani.com/wp-content/uploads/2013/02/vimeo-s.png" /></a></div>
<div style="float: left;"><a title="Skype" href= "callto://villasdiani" target="_blank"><img src= "http://villasdiani.com/wp-content/uploads/2013/02/skype-s.png" /></a></div>
<div style="float: right;"><a title="YouTube" href= "http://www.youtube.com/user/DianiBeachKenya" target="_blank"><img src= "http://villasdiani.com/wp-content/uploads/2013/02/youtube.png" /></a></div>
</div> 
```

任何帮助将不胜感激！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T09:31:46.313

div 是块元素，因此每个 div 将跨越整行。
要让 div 并排放置，只需删除它们的 block 属性。

```
.container .container DIV { width: 15px; margin: 1px; display:inline-block; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T09:55:31.487

尝试类似：

**HTML**

```
 <div>

<div style="width: 200px;" class="container" display: "inline-block" >

 <div id="col1" style="float:left">

<div style=""><a title="Facebook" href="http://www.facebook.com/KenyaLuxuryVillas" target="_blank"><img src= "http://villasdiani.com/wp-content/uploads/2013/02/facebook-logo-square.png" /></a></div>

<div style=""><a title="Linkedin" href= "http://ke.linkedin.com/in/luxuryvillaskenya" target="_blank"><img src= "http://villasdiani.com/wp-content/uploads/2013/02/linkedin-logo-square2.png" /></a></div>

<div style=""><a title="Google+" href= "https://plus.google.com/u/0/108558298587711226912/" target="_blank"><img src= "http://villasdiani.com/wp-content/uploads/2013/02/google-logo-square.png" /></a></div>

<div style=""><a title="Skype" href= "callto://villasdiani" target="_blank"><img src= "http://villasdiani.com/wp-content/uploads/2013/02/skype-s.png" /></a></div>

    </div>

    <div id="col2" style="float:left;"> 
<div style=""><a title="Stumbleupon" href= "http://www.stumbleupon.com/stumbler/bestbeacheskenya" target="_blank"><img src= "http://villasdiani.com/wp-content/uploads/2013/02/stumbleupon-logo-square.png" /></a></div>   
        <div style=""><a title="Twitter" href= "https://twitter.com/villasdiani" target="_blank"><img src= "http://villasdiani.com/wp-content/uploads/2013/02/twitter-bird2-square.png" /></a></div>

    <div style=""><a title="Vimeo" href= "https://vimeo.com/africashot" target="_blank"><img src= "http://villasdiani.com/wp-content/uploads/2013/02/vimeo-s.png" /></a></div>
    <div style=""><a title="YouTube" href= "http://www.youtube.com/user/DianiBeachKenya" target="_blank"><img src= "http://villasdiani.com/wp-content/uploads/2013/02/youtube.png" /></a></div>
    </div>
</div> 
```

**CSS**

```
.container
{
}
.container div
{
    width: auto;
    margin: 1px;
}
.container img
{
    width:30px;
} 
```

现场jsfiddle：http: [//jsfiddle.net/6AA2L/3/](http://jsfiddle.net/6AA2L/3/)

# caching - 缓存和TLB命中率的关系

> ID：14660490
> 
> 赞同：0
> 
> 时间：2013-02-02T09:30:46.697
> 
> 标签：caching, operating-system, tlb, memory-access

下面是一个操作系统（Gate 2003 OS）的MMU的描述：

> 处理器使用 2 级页表进行虚拟到物理地址的转换。两个级别的页表都存储在主存储器中。虚拟地址和物理地址都是 32 位宽。存储器是字节可寻址的。对于虚拟地址到物理地址的转换，虚拟地址的 10 个最高有效位用作第一级页表的索引，而接下来的 10 位用作第二级页表的索引。虚拟地址的 12 个最低有效位用作页面内的偏移量。假设两级页表中的页表项都是 4 个字节宽。此外，处理器具有翻译后备缓冲区（TLB），命中率高达 96%。TLB 缓存最近使用的虚拟页号和相应的物理页号。该处理器还有一个物理寻址的高速缓存，命中率为 90%。主存访问时间为10ns，缓存访问时间为1ns，TLB访问时间也是1ns。

问题是：

*命中率 90% 的缓存和命中率 96% 的 TLB 有什么关系？操作系统首先检查哪里：数据还是指令？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-20T22:41:12.200

缓存是最重要的，未缓存的内容包含在 TLB 中。因此访问时间为 = Cache Hit + Cache Miss(TLB Hit + TLB miss)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:57:13.737

缓存 - 保留最近使用的页框。存储实际的页框。

TLB - 保留最近使用的页框的映射。保持映射（虚拟到物理）。

从 TLB 或页表中，OS 知道请求的页框是否在缓存中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-27T21:15:12.833

首先，检查数据的不是操作系统，而是处理器。现在，高速缓存可以被虚拟寻址或物理寻址。在前一种情况下，它在 TLB 之前，在后一种情况下，它在 TLB 之后（TLB 的行为类似于页表的缓存，用于将虚拟地址转换为物理地址）。在这里，在问题中明确提到了“物理寻址缓存”。所以，TLB 应该在缓存之前。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-26T13:27:46.457

TLB HIT 时间= .96(Ttlb)+(.9*Tcache+.1*Tmem)

TLB MISS 时间 =.04(Ttlb+3*(.9*Tcache+.1*Tmem))

总计 =TLB HIT 时间 + TLB MISS 时间 =3ns 大约

# python - 在 Python 中测试字符串中的多个字符序列

> ID：14660491
> 
> 赞同：0
> 
> 时间：2013-02-02T09:30:55.247
> 
> 标签：python, string-matching

我有一个由 1 和 0 组成的传入字符串；一点一滴建成。它的尾部将在某些时候匹配两种模式之一，例如 1001 和 0101，当它匹配时，它会终止搜索（这是一次迭代 - 每次迭代的模式都会有所不同）。

我想测试**任何一种**模式，然后记下哪个模式终止了字符串，因此这次迭代。然后我需要在传入的字符串上重复这个过程 - 使用不同的模式。

我已经对此进行了编码，但恕我直言，这很丑陋，而且我确信在 Python 中有一种更优雅、更有效的方法（我真的是新手）。我目前的做法是这样的：

```
pattern1 = getPattern1()
pattern2 = getPattern2()

while 1:

    s += nextBit()

    if s.count(pattern1) and s.count(pattern2): 

        if s.find(pattern1) < s.find(pattern2):
            tot1 += 1
        else:
            tot2 += 1

        s = ''

     ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:02:22.320

首先，编写正确的可读代码并清楚地表达您的意图，然后测量性能并在必要时进行优化。

您可以使用正则表达式同时搜索和提取模式：

```
import re

# match any of the patterns literally at the end of string
regex = re.compile(r"(?:%s)$" % "|".join(map(re.escape, patterns)))
def getpattern(s):
    m = regex.search(s)
    return m and m.group()

maxlen = max(map(len, patterns))
count = dict.fromkeys(patterns, 0)
s = ""
for bit in iter(nextBit, ""): # get bits until empty string
    s += bit
    p = getpattern(s)
    if p: # found pattern
       count[p] += 1
       s = ""
    elif len(s) > maxlen: # limit s size
       s = s[-maxlen:]
print(count) 
```

如果输入中的模式很少见，则`.endswith(patterns)`基于 - 的解决方案可能更有效。

为了加快速度，请考虑一次读取多个位并在更大的缓冲区中计算模式。

# return-value - 查找 MYSQL 查询返回的最大值并使用 PHP 将其存储在变量中

> ID：14660497
> 
> 赞同：0
> 
> 时间：2013-02-02T09:31:30.473
> 
> 标签：return-value, max

我想存储在 SQL 提取后检索到的最大值并将其存储在 PHP 中。

问题是它不起作用，因为它适用于正常选择。代码如下；

```
 $sql = mysql_query("SELECT MAX(SRNO) FROM udata");
               echo $sql; 
```

输出是“资源 id #6”

由于它返回一个值，我尝试直接打印它。但输出出乎意料。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:38:11.103

尝试这个：

```
$sql = mysql_query("SELECT MAX(SRNO) as value FROM udata");
$row = mysql_fetch_array($sql);
echo $row['value']; // or $row[0] 
```

# android - 如何快速融合？.mov 文件如何在 android 中工作？

> ID：14660501
> 
> 赞同：2
> 
> 时间：2013-02-02T09:31:46.217
> 
> 标签：android, flurry

我在我的应用程序中使用 flurry api，它们是 .mov 文件正在生成错误。我无法处理如何在我的应用程序中解决此问题。当我当时尝试加载乱舞视频时，它会生成渲染失败。

我希望有人已经解决了这个错误，所以请让我在这里帮忙。

# c# - 如何获取用户在 C# 浏览器中输入的 url？

> ID：14660503
> 
> 赞同：0
> 
> 时间：2013-02-02T09:31:54.223
> 
> 标签：c#, .net, url

我想捕获用户通过在 C# 中创建的 Windows 服务访问的 URL。

感谢大家帮助解决问题。实际上我想创建一个 Windows 服务并记录用户使用任何浏览器浏览的所有 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:36:08.137

我认为 [FiddlerCore](http://www.fiddler2.com/fiddler/Core/)是创建代理来监控 url 的最简单方法

```
static void Main(string[] args)
{
    Fiddler.FiddlerApplication.BeforeRequest += sessionState =>
        {
            Console.WriteLine("URL={0}", sessionState.fullUrl);
        };

    Fiddler.FiddlerApplication.Startup(8888, true, true);

    Console.ReadLine();

    Fiddler.FiddlerApplication.Shutdown();

    System.Threading.Thread.Sleep(750);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T09:41:30.643

1.  您可以创建代理应用程序（任何语言，简单，缺点：您需要配置窗口或浏览器才能使用本地代理）
2.  您可以连接到所有应用程序并捕获 winsock 调用（C#、C++、中级、缺点：脏！）
3.  您可以创建一个 winsock LSP (C++, Hard)
4.  您可以使用嗅探（C#，中级）： http: [//www.codeproject.com/Articles/17031/A-Network-Sniffer-in-C](http://www.codeproject.com/Articles/17031/A-Network-Sniffer-in-C)
5.  使用Sharppcap（C#，中级）：http: [//sourceforge.net/projects/sharppcap/](http://sourceforge.net/projects/sharppcap/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-02T09:42:33.897

1.  您需要服务的当前上下文以获取请求详细信息

或者

1.  保存`Request.ServerVariables`生成请求的时间并在需要时加载数据

* * *

只需浏览服务器变量列表并仅保存所需的那些 [http://www.codeproject.com/Articles/2186/A-list-of-Request-Objects-server-variables](http://www.codeproject.com/Articles/2186/A-list-of-Request-Objects-server-variables)

# codeigniter - 未定义的变量：codeigniter 中的 _SESSION

> ID：14660514
> 
> 赞同：0
> 
> 时间：2013-02-02T09:33:43.660
> 
> 标签：codeigniter, session

我从 cpanel installatron 将我的`codeigniter`版本从 2.1.0 升级到 2.1.3。我还将 tank auth 库与`codeigniter`. 我从`session_start()`档案`index.php`开始。

现在我得到未定义的变量：`_SESSION`错误。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-18T10:42:27.047

在`Codeigniter 2.X`和更早的版本中，您不能`$_SESSION`在手动启动会话之前直接使用。

相反，您可以检索变量中的所有会话数据并像使用变量一样使用它`$_SESSION`。你可以这样做：

```
$my_session_variable = $this->session->all_userdata(); 
```

在这里，我们自己的变量`$my_session_variable`将成为`$_SESSION`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T09:45:31.287

检查您的文件，您的文件不是 utf-8，或者如果您需要 utf-8，请使用没有 BOM 的 utf-8。
我希望这对你有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T11:03:51.943

也许你还没有初始化`session library`？

尝试：

```
$this->load->library('session'); 
```

这有时会发生在我身上。

# javascript - 对每个 div 应用函数

> ID：14660522
> 
> 赞同：-1
> 
> 时间：2013-02-02T09:34:44.570
> 
> 标签：javascript, jquery, html, ajax

所以基本上我有n个div来保存评论，就像在facebook上一样，在Jquery中我有一个运行ajax调用的函数，可以获取每个div的评论，至少这是我想要它做的，它只获取评论对于页面上的第一个 div，如何使每个 div 的函数同时运行？

这是代码：Ajax

```
interval = setInterval(function(){
    comment_id = $("#main-photo"+k).attr("commentid");
    k = $("#main-photo"+k).attr("nr_crt");
    $.post('../utility/countcomm.php', { comment_id: comment_id } , 
        function(output) {
            if (+total1 < +output)
                total1 = output;
            if (+total1 > +total2)
            {   
            $.post('../utility/fetchcomments.php', { comment_id: comment_id, start:total2, end:total1 } , 
                function(output1) {
                    $(".comment_append"+k).append("<p class='comment'>"+output1+"</p>");
                    var scrolldown = $('.comment_append'+k)[0].scrollHeight;
                    $('.comment_append'+k).animate({scrollTop:scrolldown}, 200);
                });
            total2 = total1;
            }
        });
},100); 
```

HTML：

```
<div id="comment_box">
    <input type="text" name="comment" id="type_comment" value="Type a comment." />
    <div id="comment_append" class="comment_append<?php echo $k; ?>">

    </div><!--comment_append end-->
    <img id="main-photo<?php echo $k; ?>" nr_crt="<?php echo $k; ?>" class="main-photo" src="<?php echo $user_uploads['pic1'] ?>" width="<?php echo $width; ?>"  height="<?php echo $height; ?>" commentid="<?php echo $user_uploads['comment_id']; ?>"/>
</div><!--comment_box end--> 
```

每个 div 都有一个在 php.ini 中动态分配的不同 id。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T10:55:37.543

当我正确阅读/理解您的代码时，您想查找所有带有 main-photo 类的图像，获取 commentid 并更新相关的 div？在这种情况下，您需要对具有该类的所有图像进行循环：

```
interval = setInterval(function(){
    // loop over all images with the class
    $(".main-photo").each( function() {
        // get the comment_id and k (the unique part of the id)
        var $element = $(this),
            comment_id = $element.attr("commentid"),
            k =  $element.attr("nr_crt");
        // the rest is unchanged...
        $.post('../utility/countcomm.php', { comment_id: comment_id } , 
        function(output) {
            if (+total1 < +output)
                total1 = output;
            if (+total1 > +total2)
            {   
            $.post('../utility/fetchcomments.php', { comment_id: comment_id, start:total2, end:total1 } , 
                function(output1) {
                    $(".comment_append"+k).append("<p class='comment'>"+output1+"</p>");
                    var scrolldown = $('.comment_append'+k)[0].scrollHeight;
                    $('.comment_append'+k).animate({scrollTop:scrolldown}, 200);
                });
            total2 = total1;
            }
        });

    });
},100); 
```

顺便说一句，您应该考虑一下您的定期刷新设置（100 毫秒）会产生大量的服务器请求。根据数据量，它可能会导致一些问题。

# java - x86 上 Java 的最小侵入性编译障碍

> ID：14660529
> 
> 赞同：4
> 
> 时间：2013-02-02T09:37:13.707
> 
> 标签：java, performance, memory, x86, barrier

如果我有一个 Java 进程通过共享的 ByteBuffer 或类似的方式与其他进程交互，那么 C/C++ 中编译器屏障的侵入性最小的等价物是什么？不需要可移植性——我对 x86 特别感兴趣。

例如，根据伪代码，我有 2 个进程读取和写入内存区域：

```
p1:
    i = 0
    while true:
      A = 0
      //Write to B
      A = ++i

p2:
    a1 = A
    //Read from B
    a2 = A

    if a1 == a2 and a1 != 0:
      //Read was valid 
```

由于 x86 上严格的内存排序（加载到单独的位置不重新排序，读取到单独的位置不重新排序）这在 C++ 中不需要任何内存屏障，只需要每次写入之间和每次读取之间的编译屏障（即 asm volatile）。

如何以最便宜的方式在 Java 中实现相同的排序约束。有什么比写到易失性更不侵入性的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T09:47:19.830

您可以使用lazySet，它可以比设置易失性字段快10 倍，因为它不会停止CPU 管道。例如 AtomicLong lazySet 或者如果需要，您可以使用 Unsafe 等效项。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-02T09:47:30.757

sun.misc.Unsafe.putOrdered 应该做你想做的事 - 一个带有 volatile 隐含在 x86 上的锁的存储。我相信编译器不会在它周围移动指令。

这与 AtomicInteger 和朋友上的lazySet 相同，但不能直接与 ByteBuffer 一起使用。

与`volatile`类不同`AtomicThings`，该方法适用于您使用它的特定写入，而不是成员的定义，因此使用它并不意味着读取任何内容。

看起来您正在尝试实现类似[seqlock](http://en.wikipedia.org/wiki/Seqlock)`A`的东西 - 这意味着您需要避免在版本计数器的读取和数据本身的读取/写入之间重新排序。一个普通的 int 不会削减它 - 因为 JIT 可能会做各种顽皮的事情。我的建议是为您的计数器使用 volatile int，然后使用`putOrdered`. 这样，您无需为易失性写入付出代价（通常是十几个周期或更多），同时获得易失性读取隐含的编译器屏障（并且这些读取的硬件屏障是无操作的，使它们快速）。

说了这么多，我认为你在这里处于灰色地带，因为`lazySet`它不是正式记忆模型的一部分，也不完全适合发生前的推理，所以你需要更深入地了解实际的 JIT 和硬件实现，看看您是否可以以这种方式组合事物。

最后，即使使用 volatile 读取和写入（忽略`lazySet`），从 java 内存模型的角度来看，我认为您的 seqlock 并不合理，因为 volatile 写入仅在该写入和稍后在另一个线程上读取之间设置了一个happens-before , 和写入线程中的早期操作，但不在写入线程上的读取和写入之后的操作之间。换句话说，它是单向栅栏，而不是双向栅栏。我相信即使读取 A == N 两次，读取线程也可以看到以版本 N+1 写入您的共享区域。

*评论中的澄清：*

Volatile 只设置了单向障碍。它与 WinTel 在某些 API 中使用的获取/释放语义非常相似。例如，假设 A、Bv 和 C 最初都为零：

```
Thread 1:
A = 1;   // 1
Bv = 1;  // 2
C = 1;   // 3

Thread 2:

int c = C;  // 4
int b = Bv; // 5
int a = A;  // 6 
```

在这里，只有 Bv 是易失的。这两个线程在概念上与您的 seqlock 编写器和读取器执行类似的操作 - 线程 1 按一个顺序写入一些内容，线程 2 以相反的顺序读取相同的内容，并尝试从中推理排序。

如果线程二有 b == 1，那么 a == 1 总是，因为 1 发生在 2 之前（程序顺序），5 发生在 6 之前（程序顺序），最关键的是 2 发生在 5 之前，因为 5 读取写入的值在 2。因此，Bv 的写入和读取就像栅栏一样。上面 (2) 的东西不能“移到下面” (2)，下面的东西 (5) 不能“移到上面” 5\. 请注意，我只将每个线程直接限制在一个中的移动，但是，不能同时限制两个，这将我们带到下一个例子：

与上述等效，您可能会假设如果 a == 0，则 c == 0 也是，因为 C 在 a 之后写入，并且在之前读取。但是，挥发物不能保证这一点。特别是，上述发生之前的推理并不能阻止 (3) 被移到 (2) 之上，正如线程 2 所观察到的那样，它们也不能阻止 (4) 被推到 (5) 之下。

*更新：*

让我们具体看一下您的示例。

我相信可能发生的是，展开 p1 中发生的写循环。

**p1：**

```
i = 0
A = 0
// (p1-1) write data1 to B
A = ++i;  // (p1-2) 1 assigned to A

A=0  // (p1-3)
// (p1-4) write data2 to B
A = ++i;  // (p1-5) 2 assigned to A 
```

**p2：**

```
a1 = A // (p2-1)
//Read from B // (p2-2)
a2 = A // (p2-3)

if a1 == a2 and a1 != 0: 
```

假设 p2 看到 a1 和 a2 为 1。这意味着在 p2-1 和 p1-2（以及扩展为 p1-1）之间，以及 p2-3 和 p1-2 之间之前发生过。但是，在 p2 和 p1-4 中的任何内容之间都有发生之前。所以事实上，我相信在 p2-2 对 B 的读取可以观察到在 p1-4 的第二次（可能部分完成）读取，这可以“移动到”p1-2 和 p1-3 的易失性写入之上。

有趣的是，我认为您可能仅凭这一点就提出一个新问题-忘记更快的障碍-即使使用易失性也可以吗？

# ruby-on-rails - RSpec assigns(:items).should eq([item]) 返回 nil

> ID：14660540
> 
> 赞同：4
> 
> 时间：2013-02-02T09:38:38.433
> 
> 标签：ruby-on-rails

我对 RSpec 很陌生，显然做错了什么。

具有带索引操作的基本控制器：

```
class TransactionsController < ApplicationController

  before_filter :authenticate_user!
  def index
    @transactions = current_user.transactions
    respond_to do |format|
      format.html { render layout: "items" } # index.html.erb
      format.json { render json: @transactions }
    end
  end
end 
```

并对 Index 操作进行默认的 RSpec 测试。

```
require 'spec_helper'

describe TransactionsController do
   describe "GET index" do
     it "assigns all transactions as @transactions" do
       transaction = FactoryGirl.create(:transaction)
       get :index
       assigns(:transactions).should eq([transaction])
     end
   end
end 
```

所以一切正常，除了该行`assigns(:transactions).should eq([transaction])`返回 nil，所以我得到这个错误：

```
Failure/Error: assigns(:transactions).should eq([transaction])

   expected: [#<Transaction id: 1, user_id: 1, text: "some transaction", date: "2013-02-02", money: #<BigDecimal:b8a8e90,'0.999E1',18(18)>, created_at: "2013-02-02 09:17:42", updated_at: "2013-02-02 09:17:42">]
        got: nil

   (compared using ==)
 # ./spec/controllers/transactions_controller_spec.rb:17:in `block (3 levels) in <top (required)>' 
```

将不胜感激任何提示，因为我已经花了一整天的时间。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-02T14:59:51.897

首先，如果您使用，则`before_filter :authenticate_user!`需要通过该过滤器。

这可以通过使用来完成`sign_in some_user`

其次，当您分配交易时`@transactions = current_user.transactions`

并且您希望规范中应该有一些，您将必须创建分配给当前用户的事务`FactoryGirl.create(:transaction, user: some_user)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T06:50:32.407

你能检查一下 get :index to controller.index 是否有效吗？如果是，您必须检查路线

# python - 使用 *args 和 **kws 指定关键字参数

> ID：14660541
> 
> 赞同：4
> 
> 时间：2013-02-02T09:38:51.427
> 
> 标签：python

我在 Python 中发现了一种让我感到困惑和恼火的行为，我想知道我做错了什么。

我有一个函数，它应该接受任意数量的参数和关键字，但另外应该有一些默认值的关键字来构成它的实际接口：

```
def foo(my_keyword0 = None, my_keyword1 = 'default', *args, **kws):
    for argument in args:
        print argument 
```

问题是，如果我尝试调用，`foo(1, 2, 3)`我只会得到 3 的打印输出，而值 1 和 2 将覆盖我的关键字参数。

另一方面，如果我尝试在 the 之后`*args`或之后移动关键字`**kws`，则会导致语法错误。我发现该问题的唯一解决方案是从中提取关键字参数`**kws`并为其设置默认值：

```
def foo(*args, **kws):
    my_keyword0 = None if 'my_keyword0' not in kws else kws.pop('my_keyword0')
    my_keyword0 = 'default' if 'my_keyword1' not in kws else kws.pop('my_keyword1')
    for argument in args:
        print argument 
```

这太可怕了，因为它迫使我添加毫无意义的代码，并且因为函数签名变得更难理解——你必须实际阅读函数代码，而不仅仅是查看它的接口。

我错过了什么？难道没有更好的方法来做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T10:08:02.143

具有默认值的函数参数仍然是位置参数，因此您看到的结果是正确的。当您为参数指定默认值时，您并**没有**创建关键字参数。当函数调用未提供参数时，仅使用默认值。

```
>>> def some_function(argument="Default"):
...     # argument can be set either using positional parameters or keywords
...     print argument
... 
>>> some_function()    # argument not provided -> uses default value
Default
>>> some_function(5)    # argument provided, uses it
5
>>> some_function(argument=5)    # equivalent to the above one
5
>>> def some_function(argument="Default", *args):
...     print (argument, args)
... 
>>> some_function()   #argument not provided, so uses the default and *args is empty
('Default', ())
>>> some_function(5)   # argument provided, and thus uses it. *args are empty
(5, ())
>>> some_function(5, 1, 2, 3)   # argument provided, and thus uses it. *args not empty
(5, (1, 2, 3))
>>> some_function(1, 2, 3, argument=5)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: some_function() got multiple values for keyword argument 'argument' 
```

请注意最后一条错误消息：如您所见，`1`被分配到`argument`，然后 python 再次发现了`keyword`引用`argument`，因此引发了错误。仅在`*args`分配所有可能的位置参数后才分配。

**在 python2 中，除了 using 之外，没有其他方法可以定义仅限关键字的值`**kwargs`**。作为一种解决方法，您可以执行以下操作：

```
def my_function(a,b,c,d,*args, **kwargs):
    default_dict = {
        'my_keyword1': TheDefaultValue,
        'my_keyword2': TheDefaultValue2,
    }
    default_dict.update(kwargs)    #overwrite defaults if user provided them
    if not (set(default_dict) <= set('all', 'the', 'possible', 'keywords')):
        # if you want to do error checking on kwargs, even though at that
        # point why use kwargs at all?
        raise TypeError('Invalid keywords')
    keyword1 = default_dict['keyword1']
    # etc. 
```

在 python3 中，您可以定义仅限关键字的参数：

```
def my_function(a,b,c,*args, keyword, only=True): pass
    # ... 
```

请注意，仅关键字并不意味着它应该具有默认值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T10:28:21.947

在 Python 中，非关键字参数不能出现在关键字参数之后，因此您尝试使用的函数签名是不可能的：

```
foo(my_keyword0="baa", my_keyword1="boo", 1, 2, 3, bar="baz", spam="eggs")  # won't work 
```

如果你考虑一下，这个限制有非常正当的理由（提示：关键字参数可以以任何顺序呈现，位置参数是......好吧，位置）

从[文档](http://docs.python.org/2/tutorial/controlflow.html#keyword-arguments)中：

> 在函数调用中，**关键字参数必须跟在位置参数之后。**所有传递的关键字参数必须与函数接受的参数之一匹配（例如，actor 不是 parrot 函数的有效参数），它们的顺序并不重要。这还包括非可选参数

`*args`并`**kwargs`包含*与现有形式参数不匹配的参数*，因此一旦您`spam=None`在参数列表中定义，它将不再被传递给`**kwargs`：

> 当表单**名称的最终形式参数存在时，它会收到一个字典（请参阅映射类型 - dict），其中包含所有关键字参数**除了与形式参数相对应的那些。**这可以与 *name 形式的形式参数（在下一小节中描述）相结合，该形式参数接收包含超出形式参数列表的位置参数的元组。（*名称必须出现在**名称之前。）

与您的（不可能的）语法最接近的近似值是

```
def foo(my_keyword0=None, my_keyword1='default', numbers=None, **kwargs) 
```

您将用作

```
foo(my_keyword0="bar", my_keyword1="baz", numbers=(1,2,3), spam='eggs')
foo("bar", "baz", numbers=(1,2,3))
foo("bar", "baz", (1,2,3))
foo("bar", "baz", (1,2,3), spam="eggs")
foo(numbers=(1,2,3))
foo(spam="eggs")
etc. 
```

可以说，这可能比您最初的想法更具可读性且不那么令人惊讶。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T09:44:08.247

```
def foo(my_keyword0 = None, my_keyword1 = 'default', *args, **kws):
    all_args = [my_keyword0, my_keyword1] + args + kws.values()
    for argument in all_args:
        print argument 
```

# linux - 无需外壳即可与内核通信

> ID：14660542
> 
> 赞同：1
> 
> 时间：2013-02-02T09:38:55.860
> 
> 标签：linux, linux-kernel

我正在使用过去几个月的 linux，这个疑问闪过。是否可以在不使用任何 shell 的情况下与 linux 内核进行通信。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T09:45:47.617

您可以直接通过[syscall](http://www.kernel.org/doc/man-pages/online/pages/man2/syscall.2.html)函数从您的代码与 Linux 内核进行通信，另请参见[sycalls](http://www.kernel.org/doc/man-pages/online/pages/man2/syscalls.2.html)。然而，这些很少直接使用，大多数情况下它们是通过[glibc](http://www.gnu.org/software/libc/)的包装函数调用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T09:44:36.250

这取决于您所说的“与 Linux 内核通信”是什么意思。

您可以轻松地编写一个程序来读取/写入设备节点，或者`ioctl`在它们上调用 s，或者您有什么，然后编写程序——在这种情况下，程序在没有 shell 的情况下与内核通信。如果您希望能够以交互方式使用系统，那么您将需要一些工具来与文件系统和内核创建的设备节点进行交互，而该工具就是 shell。

# ios - iOS 和 OSX 文件字符的差异

> ID：14660544
> 
> 赞同：2
> 
> 时间：2013-02-02T09:39:15.290
> 
> 标签：ios, macos, file, io, nsfilemanager

我有代码我试图在 OSX 和 iOS 上运行，并遇到文件读取问题。我正在尝试在字节级别进行文件比较。

但是，当我在图像文件中读取相同物理偏移量的字符时，使用相同的 PNG 图像文件作为测试（其他文件类型存在相同的问题），我会返回不同的字符，具体取决于我是否在 iOS 物理设备（iPhone）上或 Mac（此类别中的模拟器也是如此）。

我编写了一些代码来读取同一文件中相同偏移量的字符串以验证这一点。使用下面的代码，我一次从同一个参考文件中读取一个字节，以创建一个字符串，然后将其与另一个平台上先前运行的已知值进行比较。

对于文件中的相同输入偏移，例如， `NSString *definedOffsets = @"49510,37559,13642,49652,19950,21652";` 当我在 OSX（或 iPhone 模拟器）上运行代码与物理 iPhone 设备时，我得到不同的结果，即使输入文件是相同的图像文件。

任何人都可以解释这是为什么以及我如何编码它吗？

```
- (NSString *) readCharacters:(NSString *) dataline fromSource:(NSString *)datasource
{
  NSString *f=nil;

  if ([[NSFileManager defaultManager] fileExistsAtPath:datasource])
  {
    NSError *error=nil;
    //-- Read the image file into an NSData
    NSData *databuff = [NSData dataWithContentsOfFile:datasource options:NSDataReadingUncached error:&error];

    //-- Read the file offsets to compare
    NSArray *d = [dataline componentsSeparatedByString:@","];

    //-- Print Logs of inputs
    NSLog(@"[readCharacters Offsets]: %@",dataline);
#ifdef IPHONE_PLATFORM
    NSLog(@"[readCharacters Offset Count]: %d", d.count);
#else
    NSLog(@"[readCharacters Offset Count]: %ld", (unsigned long)d.count);
#endif

    //-- Get the characters from file
    int8_t oneByte;
    int knum;
    char na[65];
    for (int i=0;i<64;i++)
    {
      knum = [[d objectAtIndex:i] intValue];
      [databuff getBytes:&oneByte range:NSMakeRange(knum, 1)];
      na[i] = oneByte;
    }
    na[64]='\0';
    f = [NSString stringWithUTF8String:na];
  }
  else{
    NSLog(@"Cant Find File");
  }

  //-- Return the String of characters read for later comparison
  NSLog(@"[Characters]: %@",f);
  return f;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T10:29:43.233

对于 iOS 应用程序，Xcode 构建过程将`pngcrush`在 PNG 文件上运行，以针对设备的显卡优化它们。这包括插入一个额外的 PNG 块、剥离 zlib 标头和校验和、从 RGB 到 BGR 的字节交换以及预乘 alpha 值。

尝试重命名您的图像以使用“.dat”扩展名，看看是否会得到不同的结果。您还可以使用“压缩 PNG 文件”构建设置在目标或项目级别禁用此功能：

![在此处输入图像描述](../Images/b017bd0ad49444b29d06e740847ffc5b.png)

# r - 如何重新排列加载的时间序列数据？

> ID：14660546
> 
> 赞同：3
> 
> 时间：2013-02-02T09:39:20.067
> 
> 标签：r, data-structures, load, reshape

我得到的是 txt 文件（mydata.txt）中的数据，如下所示：

```
Variable, DateTime, Value, Quality
A, 01-01-1970 00:00:00, 0, 0
A, 01-01-1970 00:02:00, 2, 2
A, 01-01-1970 00:04:00, 4, 1
A, 01-01-1970 00:06:00, 6, 0
B, 01-01-1970 00:02:00, 0.2, 0
B, 01-01-1970 00:04:00, 0.4, 1
B, 01-01-1970 00:06:00, 0.6, 1
B, 01-01-1970 00:10:00, 1.0, 0
C, 01-01-1970 00:00:00, 20.0, 0
C, 01-01-1970 00:04:00, 16.0, 0
C, 01-01-1970 00:08:00, 12.0, 3 
```

我可以将它加载到 R 中而不会出现问题

```
read.csv("mydata.txt", header = TRUE, sep = ",") 
```

或者

```
read.table("mydata.txt", header = TRUE, sep = ",") 
```

但是**我想**在 r 中使用的是这样的：

```
DateTime, A_Value, A_Quality, B_Value, B_Quality, C_Value, C_Quality
01-01-1970 00:00:00, 0, 0, NA, NA, 20.0, 0
01-01-1970 00:02:00, 2, 2, 0.2, 0, NA, NA
01-01-1970 00:04:00, 4, 1, 0.4, 1, 16.0, 0
01-01-1970 00:06:00, 6, 0, 0.6, 1, NA, NA
01-01-1970 00:08:00, NA, NA, NA, NA, 12.0, 3
01-01-1970 00:10:00, NA, NA, 1.0, 0, NA, NA 
```

（其中第一列是日期/时间类型）。

我不知道我的文件中有哪些或多少个不同的变量（即 A、B、... Z），我也不知道它们的名称——我只知道它们的列。

**如何**从文本文件中的数据集到我想在 R 中使用的数据集？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T09:52:59.650

正常读取数据：

```
mydata <- read.table("mydata.txt", header = TRUE, sep = ",") 
```

*然后使用几种*方法之一将其从所谓的“长”格式“重塑”为“宽”格式。

这只是基础 R 中的 1 行，使用`reshape`：

```
reshape(mydata, direction = "wide", idvar = "DateTime", timevar = "Variable")
#                DateTime Value.A Quality.A Value.B Quality.B Value.C Quality.C
# 1   01-01-1970 00:00:00       0         0      NA        NA      20         0
# 2   01-01-1970 00:02:00       2         2     0.2         0      NA        NA
# 3   01-01-1970 00:04:00       4         1     0.4         1      16         0
# 4   01-01-1970 00:06:00       6         0     0.6         1      NA        NA
# 8   01-01-1970 00:10:00      NA        NA     1.0         0      NA        NA
# 11  01-01-1970 00:08:00      NA        NA      NA        NA      12         3 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-02T09:46:58.097

您可以使用以下`reshape2`软件包执行此操作：

第一步：`melt`你的`data.frame`

```
require(reshape2)
df.m <- melt(df, id.var = 1:2) # changed names(df)[1:2] to 1:2 (following @Anandamahto's comment) 
```

第二步：`cast`到结果：

```
dcast(df.m, DateTime ~ Variable + variable, fill=NA)

#               DateTime A_Value A_Quality B_Value B_Quality C_Value C_Quality
# 1  01-01-1970 00:00:00       0         0      NA        NA      20         0
# 2  01-01-1970 00:02:00       2         2     0.2         0      NA        NA
# 3  01-01-1970 00:04:00       4         1     0.4         1      16         0
# 4  01-01-1970 00:06:00       6         0     0.6         1      NA        NA
# 5  01-01-1970 00:08:00      NA        NA      NA        NA      12         3
# 6  01-01-1970 00:10:00      NA        NA     1.0         0      NA        NA 
```

# javascript - 输入凭据后，Facebook Oauth 登录弹出窗口卡住

> ID：14660548
> 
> 赞同：1
> 
> 时间：2013-02-02T09:40:08.510
> 
> 标签：javascript, facebook, gwt, facebook-oauth

我已将 facebook OAuth 登录集成到我的 GWT 应用程序中。facebook API 在其身份验证弹出窗口中获取凭据，但该过程卡在以下 URL：

```
https://www.facebook.com/dialog/oauth?display=popup&domain=www.myapp.com
&api_key=mykey&app_id=myid&locale=en_US&sdk=joey&client_id=myid
&redirect_uri=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect
%2Fxd_arbiter.php%3Fversion%3D18%23cb%3Df237c9c7bc%26origin
%3Dhttp%253A%252F%252Fwww.myapp.com%252Ff32ad475a%26domain
%3Dwww.myapp.com%26relation%3Dopener%26frame
%3Df2ae130a84&origin=1&response_type=token%2Csigned_request 
```

Facebook 登录以前适用于我的应用程序，但最近开始出现此问题。

有没有人遇到同样的问题，知道修复/解决方法吗？这是 Facebook API 的问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T11:59:56.033

大约一周后，此问题自行解决。这一定是Facebook方面的问题。

# ios - 面朝上方向 iPhone

> ID：14660556
> 
> 赞同：0
> 
> 时间：2013-02-02T09:40:30.377
> 
> 标签：ios, objective-c, xcode, uiinterfaceorientation, uideviceorientation

我可以在我的 iPhone 应用程序中以某种方式禁用 Face Up 方向吗？或者我可以以某种方式处理它吗？

当放在平板上时，它会扭曲应用程序的视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T10:29:24.803

Go to project settings in XCode , click on your target and choose "summary".
Then you'll be able to see under "iPhone/iPod deployment" the following section. Just remove portrait/upside down and you're set.

![interface orientations](../Images/458b9e0b96a35f3629d28639d34f9b41.png)

# c++ - 平台物理弹跳故障 C++

> ID：14660558
> 
> 赞同：1
> 
> 时间：2013-02-02T09:40:47.723
> 
> 标签：c++, physics, game-engine, game-physics

我正在用 C++ 实现一些非常基本的平台物理，用于一个简单的基于平铺的平台游戏。我正在尽可能地遵循这里的算法（[https://gamedev.stackexchange.com/questions/18302/2d-platformer-collisions](https://gamedev.stackexchange.com/questions/18302/2d-platformer-collisions)），但我仍然遇到玩家在瓷砖上弹跳的奇怪故障。我不确定发生了什么。代码是使用 SDL 的 C++

```
void Player::update(vector< vector<Tile> > map) {
vector<Tile> collidingTiles;

x += xVel;
y += yVel;

boundingBox = Rect(x,y,16,16);

for(int iy=0;iy<MAPH;iy++) {
    for(int ix=0;ix<MAPW;ix++) {
        if (map[ix][iy].solid == true) {
            if (boundingBox.collide(map[ix][iy].boundingBox)) {
                collidingTiles.push_back(map[ix][iy]); // store all colliding tiles, will be used later
                Rect intersectingRect = map[ix][iy].boundingBox; // copy the intersecting rect
                float xOffset = x-intersectingRect.x; // calculate x-axis offset
                float yOffset = y-intersectingRect.y; //calculate y-axis offset
                if (abs(xOffset) < abs(yOffset)) {
                    x += xOffset;
                }
                else if (abs(xOffset) > abs(yOffset)) {
                    y += yOffset;
                }
                boundingBox = Rect(x,y,16,16); // reset bounding box
                yVel = 0;
            }
        }
    }
}
if (collidingTiles.size() == 0) {
    yVel += gravity;
}
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:48:58.747

```
if (abs(xOffset) < abs(yOffset)) {
    x += xOffset;
}
else if (abs(xOffset) > abs(yOffset)) {
    y += yOffset;
}
yVel = 0; 
```

在这段代码中，如果`abs(xOffset) == abs(yOffset)`没有发生任何事情，这意味着玩家可以对角输入实心牌。`y`如果算法必须做出选择，删除第二个测试应该会删除问题并修改：

另外，我想知道如果发生水平碰撞，您是否真的要重置垂直速度。这也意味着如果碰撞是水平的，重力仍然应该适用（否则墙壁和天花板会很粘）。

```
int gravityApplies = true;//fix 2a

...

    if (abs(xOffset) < abs(yOffset)) {
        x += xOffset;
        xVel = 0;      //fix 2
    }
    else {             //fix 1
        y += yOffset;
        yVel = 0;      //fix 2
        if( yOfsset < 0 ){ // fix 2a
            gravityApplies = false;
        }
    }

 ...

 if (gravityApplies) { //fix 2a
     yVel += gravity;
 } 
```

* * *

如果您想要弹性碰撞，请使用`yVel = -yVel`代替`yVel = 0`（其他方向类似）。您甚至可以执行`yVel = yVel * rest`where `rest`range from `-1`to `0`(`-0.8`是一个不错的选择) 来获得半弹性碰撞。

# c++ - constexpr "[v[n]]sprintf" 可能吗？

> ID：14660562
> 
> 赞同：8
> 
> 时间：2013-02-02T09:41:01.423
> 
> 标签：c++, printf

我的直观答案是肯定的，并且“printf”也可以使用该实现。对于用户定义的类型，它可能很容易重载。

有没有人尝试过这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T10:34:18.767

我相信你不能 - 主要问题是你如何从函数中得到结果。当您返回一个字符串时，您实际上可以返回（1）一个`new`-ed 缓冲区（或`malloc`同样糟糕的 ed），（2）一个静态缓冲区或（3）填充一些其他缓冲区。

(1) 很明显是不允许的

(2) 违反合同`sprintf`（即非`constexpr` `sprintf`不得这样做）

(3) 分配是不可能的`constexpr`。

如果您只想要“类似`sprintf`”的东西，无论使用起来可能不方便，例如。使用这样的界面可以工作：

```
my_sprintf<my_string<'%', 'd', '%', 'c'>, my_data<int, 42>, my_data<char, 'l'> >::string_value 
```

再三考虑，您可以避免实际计算字符串，而只存储`sprintf`调用的参数以供以后使用。然后，如果用户想要获得 ，则用户将调用`constexpr`该中间结果的非方法`char*`，但可以通过`constexpr`函数获得单个字符。那将是一个非正统的版本`sprintf`，我不确定它是否会算在内。

# java - 部署的 JNLP 小程序找不到库：不兼容的魔法值 1130458734

> ID：14660563
> 
> 赞同：2
> 
> 时间：2013-02-02T09:41:02.403
> 
> 标签：java, jar, applet, jnlp, java-web-start

我正在尝试使用`JNLP`. 我试过使用 Eclipse`Run Jetty Run`插件，它工作正常。但是现在在真正的 Web 服务器上进行部署时，我真的被卡住了。

我的 jnlp 文件草图是这样的（我已经编辑了一些名称）。

```
<?xml version="1.0" encoding="UTF-8"?>
<jnlp spec="1.0+" href="MyApplet.jnlp">
    <information>
        <title>MyApplet</title>
        <vendor>Me</vendor>
        <offline-allowed/>
    </information>
    <security>
        <j2ee-application-client-permissions/>
    </security>
    <resources>
        <!-- Application Resources -->
        <j2se version="1.6+" href="http://java.sun.com/products/autodl/j2se"/>
        <jar href="applet.jar" part="true" main="true"/>
        <jar href="log4j-1.2.16.jar" part="true"/>
        <jar href="slf4j-api-1.6.1.jar" part="true"/>
        <jar href="slf4j-log4j12-1.6.1.jar" part="true"/>
    </resources>
    <!--  Generate values dynamically -->
    <applet-desc main-class="org.project.applet.AppletMain" name="MyApplet" width="1600" height="860"/>
</jnlp> 
```

我将库与`applet.jar`.

关于清单文件`applet.jar`我不确定，我尝试了很多选项，比如指定库，或者只是`.`目前它就像在 Ant 脚本中一样

[Java 小程序 jnlp + 库](https://stackoverflow.com/questions/6522737/java-applet-jnlp-libraries)

```
<manifest>
    <attribute name="Class-Path" value="."/>
    <attribute name="Rsrc-Class-Path" value="./"/>
</manifest> 
```

所有 jar 都已签名，这是我从控制台日志中得到的：

```
basic: Applet loaded.
basic: Applet resized and added to parent container
basic: PERF: AppletExecutionRunnable - applet.init() BEGIN ; jvmLaunch dt 134206 us, pluginInit dt 7621660339 us, TotalTime: 7621794545 us
network: Cache entry not found [url: http://mydomain.com/play/, version: null]
network: Cache entry not found [url: http://mydomain.com/play/org/apache/log4j/Logger.class, version: null]
network: Connecting http://mydomain.com/play/org/apache/log4j/Logger.class with proxy=DIRECT
network: Connecting http://mydomain.com/play/org/apache/log4j/Logger.class with cookie "PHPSESSID=fe5gv8p4hp013r6i9p5aqjska5"
network: Connecting http://mydomain.com:80/ with proxy=DIRECT
network: Connecting http://mydomain.com/play/org/apache/log4j/Logger.class with cookie "PHPSESSID=fe5gv8p4hp013r6i9p5aqjska5"
basic: JNLP2ClassLoader.findClass: org.apache.log4j.Logger: try again ..
network: Cache entry not found [url: http://mydomain.com/play/org/apache/log4j/Logger.class, version: null]
network: Connecting http://mydomain.com/play/org/apache/log4j/Logger.class with proxy=DIRECT
network: Connecting http://mydomain.com/play/org/apache/log4j/Logger.class with cookie "PHPSESSID=fe5gv8p4hp013r6i9p5aqjska5"
basic: Dialog type is not candidate for embedding
basic: JNLP2ClassLoader.getPermissions() ..
network: Cache entry not found [url: http://mydomain.com/play/org/apache/log4j/Logger.class, version: null]
security: JAVAWS AppPolicy Permission requested for: http://mydomain.com/play/org/apache/log4j/Logger.class
basic: JNLP2ClassLoader.getPermissions() X
java.lang.ClassFormatError: Incompatible magic value 1130458734 in class file org/apache/log4j/Logger
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at sun.reflect.GeneratedMethodAccessor7.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.defineClassHelper(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.access$100(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader$2.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.plugin2.applet.Plugin2ClassLoader.findClassHelper(Unknown Source)
    at sun.plugin2.applet.JNLP2ClassLoader.findClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.project.applet.AppletMain.init(AppletMain.java:32)
    at com.sun.deploy.uitoolkit.impl.awt.AWTAppletAdapter.init(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
security: Reset deny session certificate store 
```

第 32 行是

```
Logger.getRootLogger().setLevel(Level.OFF); 
```

它是小程序中的第一类，应该从外部库加载。

所有 jars、htmls 和 jnlps 都在里面`http://mydomain.com/play/`，我可以访问 applet`http://mydomain.com/play/applet.html`

从[Incompatible magic value 1008813135](https://stackoverflow.com/questions/2390733/incompatible-magic-value-1008813135) 我了解到这`1130458734`意味着`Cann`我真的得到了`Cannot find block '__global__'`if access `http://mydomain.com/play/org/apache/log4j/Logger.class`。

**但我不明白为什么在 jar 中搜索类会失败，以及为什么它会尝试访问`http://mydomain.com/play/org/apache/log4j/Logger.class`服务器上不存在的类。**

**编辑：**

我的 html 文件来自 Oracle 教程：

```
<html>
<head>
    <title>MyApplet</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <script src="http://www.java.com/js/deployJava.js"></script>
</head>
<body>
    <script>
        var attributes = {code:'org.project.applet.AppletMain', width:1600, height:860} ;
        var parameters = {jnlp_href: 'MyApplet.jnlp'} ;
        deployJava.runApplet(attributes, parameters, '1.6');
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:06:44.040

彼得劳里：

> 我假设小程序的类路径中的 URL 并且由于 Web 服务器返回一条消息而不是一些 HTTP File Not Found 状态代码，它认为它有一个可以使用的类。

这是一个很好的猜测！网络服务器没有在任何未找到的资源的标头中返回 404 错误，它只返回一些文本。因此 Java 将其解释为好像找到了资源并且尝试将其作为 Java 类加载失败。

# php - PHP fetch_array/sql 没有排序值

> ID：14660569
> 
> 赞同：3
> 
> 时间：2013-02-02T09:41:44.053
> 
> 标签：php, sql

SQL：

```
SELECT question,alt_1,alt_2,alt_3,alt_4 FROM questions WHERE id IN ('12','2','32','23') 
```

PHP：

```
while ($questions = mysql_fetch_array($game)){
    echo "$questions[question]";
} 
```

我希望按照将值发送到 sql 的顺序打印行：12 - 2 - 32 - 23。

但是 fetch_array/sql(?) 似乎对值进行了排序，因此顺序如下：2 - 12 - 23 - 32 （从最小的数字开始......）

有什么办法可以阻止数组按数字排序！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:56:18.783

试试看，
“ORDER BY FIELD(id'12','2','32','23')”

```
 SQL: "SELECT question,alt_1,alt_2,alt_3,alt_4 FROM questions WHERE id IN 
          ('12','2','32','23') ORDER BY FIELD(id'12','2','32','23')"

           while($questions = mysql_fetch_array($game)){
           echo "$questions[question]";
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T10:07:46.943

使用[FIND_IN_SET](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)

```
SELECT question,alt_1,alt_2,alt_3,alt_4 
FROM questions 
WHERE id IN ('12','2','32','23') 
ORDER BY FIND_IN_SET(id, '12,2,32,23') 
```

注意**FIND_IN_SET(id, '12,2,32,23')** 12,2 没有空格

```
FIND_IN_SET(field, 'val1,val2') 
```

# php - 将上传的文件从 php 传递到 Perl 脚本

> ID：14660572
> 
> 赞同：0
> 
> 时间：2013-02-02T09:42:17.623
> 
> 标签：php, perl

我有一个 perl 脚本，它将输入作为文件并以文本文件的形式返回结果。我想使用文件作为输入，由用户通过 php 页面上传。为此我该怎么办？我有 PHP 5.3.14 和 ActivePerl 5.14.x。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:11:02.747

在 PHP 中，当一个文件被上传时，它首先被放置在一个临时位置。您可以使用以下命令将其移动到另一个位置`move_uploaded_file()`：

[http://php.net/manual/en/function.move-uploaded-file.php](http://php.net/manual/en/function.move-uploaded-file.php)

然后，您可以通过多种方式调用您的 Perl 脚本，如下所述：

[如何从 PHP 调用 Perl 脚本？](https://stackoverflow.com/questions/3733844/how-can-i-call-a-perl-script-from-php)

所以，假设你正在使用`exec()`函数的低级方法，并且文件被上传到名为“userfile”的文件上传字段中，你可能会使用这样的东西：

```
$perlCommand = // ... something, e.g. from config ...
$workingPath = // ... something, e.g. from config ...
$filename = $workingPath . $_FILES['userfile']['name']
if (move_uploaded_file($_FILES['userfile']['tmp_name'], $filename)) {
    $output = array();
    $return = 0;
    exec($perlCommand . ' ' . $filename, $output, $return);
    // Do something with $output and / or $return values
} 
```

请注意，这假定 Perl 脚本将文件名作为参数。可能是它从标准输入中读取文件，问题并不清楚。显然，如果是后者，那么它会有点不同，这又取决于您用来调用 Perl 的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T19:42:12.150

谢谢@leftclickben

我已经解决了这个问题。我使用表单从用户那里获取文件，然后将文件名保存到参数`$file`中。

然后我`$file`使用传递给 Perl 脚本

```
$result = shell_exec("path\to\perl.pl" $file);
echo $result; 
```

`$file`作为名为的数组传递给 perl.pl`$ARGV[0]`

```
#!usr/bin/perl

$filename = $ARGV[0];
open(HDL, $filename) or die "file not available, restart program\n"; 
```

# javascript - 手动滚动到锚点时更改网址？

> ID：14660580
> 
> 赞同：30
> 
> 时间：2013-02-02T09:42:47.143
> 
> 标签：javascript, jquery

默认情况下，如果我的网站中有锚点，那么当我单击链接时，地址栏上的 URL 会更改（即 www.mysite.com/#anchor）

当我滚动到锚点时，是否可以立即更改地址栏中的 URL？或者当我点击一个新的锚点时，有一个带有多个锚点的长文档并且地址栏上的 url 发生了变化？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-02T09:56:40.560

尝试使用这个 jquery 插件：[Scrollorama](http://johnpolacek.github.com/scrollorama/)。它有很多很酷的功能，你可以用它`window.location.hash`来更新你的浏览器哈希。

或者，您可以添加“滚动”事件来检查到达锚点的时间。

这是一个说明事件的工作小提琴：http: [//jsfiddle.net/gugahoi/2ZjWP/8/](http://jsfiddle.net/gugahoi/2ZjWP/8/) 示例：

```
$(function () {
    var currentHash = "#initial_hash"
    $(document).scroll(function () {
        $('.anchor_tags').each(function () {
            var top = window.pageYOffset;
            var distance = top - $(this).offset().top;
            var hash = $(this).attr('href');
            // 30 is an arbitrary padding choice, 
            // if you want a precise check then use distance===0
            if (distance < 30 && distance > -30 && currentHash != hash) {
                window.location.hash = (hash);
                currentHash = hash;
            }
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T09:45:52.533

您可以使用 HTML 5 pushstate 更改地址栏中的 URL

window.history.pushstate

* * *

1.  [https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)
2.  [如何“安全地”使用 window.history.pushState](https://stackoverflow.com/questions/5030564/how-can-i-use-window-history-pushstate-safely)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T09:52:10.370

1.  将处理程序绑定到[jquery 滚动事件](http://api.jquery.com/scroll/)。
2.  [使用此 jquery 脚本](http://benpickles.github.com/onScreen/)检查当前是否在屏幕上可见锚点。
3.  使用 pushstate 或设置位置（可能会导致跳转）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-02T09:58:03.227

您可以绑定到 jQuery 滚动事件 ( [http://api.jquery.com/scroll/](http://api.jquery.com/scroll/) ) 并在每次调用回调时，通过检查以下值来检查用户在文档上滚动了多远： .scrollTop ( [http ://api.jquery.com/scrollTop/](http://api.jquery.com/scrollTop/)）并通过操作 te location.hash 对象（[http://www.w3schools.com/jsref/prop_loc_hash.asp](http://www.w3schools.com/jsref/prop_loc_hash.asp)）设置锚点。

它会是这样的：

```
// Checks if the passed element is visible on the screen after scrolling
// source: http://stackoverflow.com/questions/487073/check-if-element-is-visible-after-scrolling
function isScrolledIntoView(elem) {
  var docViewTop = $(window).scrollTop();
  var docViewBottom = docViewTop + $(window).height();

  var elemTop = $(elem).offset().top;
  var elemBottom = elemTop + $(elem).height();

  return ((elemBottom <= docViewBottom) && (elemTop >= docViewTop));
}

$('#document').scroll(function(e) {
  var anchors = $('.anchor');
  for (var i = 0; i < anchors.length; ++i) {
    if (isScrolledIntoView(anchors[i])){
      var href = $(anchors[i]).attr('href');
      location.hash = href.slice(href.indexOf('#') + 1);
      break;
    }
  }
}); 
```

如果在选择锚后对锚进行排序，则可以更精确，以便始终设置第一个可见锚。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-09-27T20:27:03.687

纯 js 版本 在研究如何根据屏幕上 HTML 部分元素的位置更新 URL 时，我一直在寻找这个线程，所以我希望这是一个发布这个的好地方。

此函数循环遍历 HTML 部分元素。

```
 function updateFragId() {
        var len = sections.length;
          for (var i = 0; i < len; i++) {
            var id = sections[i].id; 
```

收集相对于视口的 Y 滚动位置。

```
 var rect = sections[i].getBoundingClientRect().y; 
```

将两个数组转换为一个对象

```
 var pageData = {id:id, rect:rect}; 
```

设置代码在两者之间触发的范围。这里会在 section 元素的顶部在 -200px 到 400px 之间时触发

```
 if (pageData.rect > -200 && pageData.rect < 400) { 
```

通过确保 pageData.id 和 location.hash 不匹配只运行一次。这可以防止它用事件淹没您的浏览器。

```
 if (pageData.rect > -100 && pageData.rect < 100) {
            if (pageData.id !== location.hash.substr(1)) {
                fragmentId = pageData.id;
                setActiveLink(fragmentId);
              } else {
                return;
            }
          }
        }
      }

    window.addEventListener('scroll', updateFragId); 
```

我在这个代码块上使用一个去抖动器和另一个块来设置活动链接。但这只是如何跟踪 # 个锚点。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-02T10:02:22.777

我认为你需要做这样的事情。未在行动中尝试过

```
var myElements = $("div.anchor"); // You target anchors
$(window).scroll(function(e) {
    var scrollTop = $(window).scrollTop();
    myElements.each(function(el,i) {
        if ($(this).offset().top > scrollTop && $(myElements[i+1]).offset().top < scrollTop) {
             location.hash = this.id;
        }
    });
}); 
```

# c - 测试大端

> ID：14660587
> 
> 赞同：7
> 
> 时间：2013-02-02T09:43:39.770
> 
> 标签：c, gcc, endianness

> **可能重复：**
> [Little vs Big Endianess：如何解释测试](https://stackoverflow.com/questions/9971369/little-vs-big-endianess-how-to-interpret-the-test)

是否有一种简单的方法可以使用 gcc 或任何在线编译器（如 ideone 用于大端）来测试代码？我不想使用 qemu 或虚拟机

**编辑**

有人可以解释这段代码在使用大端的系统上的行为吗？

```
#include <stdio.h>
#include <string.h>
#include <stdint.h>

int main (void)
{
    int32_t i;
    unsigned char u[4] = {'a', 'b', 'c', 'd'};

    memcpy(&i, u, sizeof(u));
    printf("%d\n", i);
    memcpy(u, &i, sizeof(i));
    for (i = 0; i < 4; i++) {
        printf("%c", u[i]);
    }
    printf("\n");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T09:48:44.837

作为程序？

```
#include <stdio.h>
#include <stdint.h>

int main(int argc, char** argv) {
    union {
       uint32_t word;
       uint8_t bytes[4];
    } test_struct;
    test_struct.word = 0x1;
    if (test_struct.bytes[0] != 0)
        printf("little-endian\n");
    else
        printf("big-endian\n");
    return 0;
} 
```

在 little-endian 架构上，首先存储最低有效字节。在大端架构上，最重要的字节首先存储。`uint32_t`所以通过用 a覆盖 a `uint8_t[4]`，我可以检查哪个字节先出现。见：[http ://en.wikipedia.org/wiki/Big_endian](http://en.wikipedia.org/wiki/Big_endian)

GCC 特别将`__BYTE_ORDER__`宏定义为扩展。您可以针对`__ORDER_BIG_ENDIAN__`, `__ORDER_LITTLE_ENDIAN__`, 和`__ORDER_PDP_ENDIAN__`（我不知道存在！）进行测试——参见[http://gcc.gnu.org/onlinedocs/cpp/Common-Predefined-Macros.html](http://gcc.gnu.org/onlinedocs/cpp/Common-Predefined-Macros.html)

另见[http://en.wikipedia.org/wiki/Big_endian](http://en.wikipedia.org/wiki/Big_endian)

* * *

至于以与您的机器的本机字节序不匹配的字节序运行代码，那么您将不得不在具有不同字节序的架构上编译和运行它。所以你需要交叉编译，并在模拟器或虚拟机上运行。

* * *

**编辑**：啊，我没有看到第一个`printf()`。

第一个`printf`将打印“1633837924”，因为大端机器会将`'a'`字符解释为 int 中的最高有效字节。

第二个`printf`将只打印“abcd”，因为 的值`u`已从`i`.

# c# - 如何在 windows phone 中将 wav 文件转换为 mp3 文件？（详情内）

> ID：14660588
> 
> 赞同：1
> 
> 时间：2013-02-02T09:43:44.137
> 
> 标签：c#, windows-phone-7, windows-phone-8

我已经搜索了 2 天，但没有得到如何将录制的 wav 文件转换为 mp3 文件的方法；甚至在堆栈溢出本身上也看到了许多问题，但没有人给出解决方案。

我们无法在 Windows Phone 中执行 System.Diagnostics.Process。

有很多编码器，如Lame、NAudio等；但不知道如何使用它。.

最近我在名为“mp3 Compressor”的代码项目中找到了示例，我尝试使用这些类，但现在出现以下错误，

![在此处输入图像描述](../Images/765c825e820f0fd231c4d5926670b89d.png)

有人请告诉我如何实现它。.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T10:25:40.303

你为什么要这么做？恐怕你不能也不应该那样做。至少使用您提到的那些工具。请注意，例如，Zune 在将媒体传输到设备之前对其进行转换。作为一个想法，您可以将文件上传到在线服务并在那里进行转换。当然，如果您有可以使用的主机，这会更加困难。

# android - 如何在 MediaPlayer obj 上加载音频时显示进度对话框

> ID：14660595
> 
> 赞同：1
> 
> 时间：2013-02-02T09:44:19.277
> 
> 标签：android, media-player, progressdialog

我想在 MediaPlayer 对象上从 Internet 加载音频文件。

这是我的代码：

```
try {
    mp.setDataSource(AUDIO URL);
    mp.prepare();
    mp.start();
}
catch (IOException e) { e.printStackTrace(); }
catch (IllegalArgumentException e) { e.printStackTrace(); }
catch (IllegalStateException e) { e.printStackTrace(); } 
```

但问题是加载音频需要很多时间。

帮助我在加载音频之前显示一个旋转的进度对话框。

如果问题不完整，请告诉我完成递减。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T09:54:41.507

您需要将 MediaPlayer.OnPreparedListener 添加到 MediaPlayer 以在准备时显示进度对话框：

```
ProgressDialog progressDialog = ProgressDialog.show(this, 
                            "Loading Title", "Loading Message");
mp.setOnPreparedListener(new OnPreparedListener() {
        @Override
        public void onPrepared(MediaPlayer mp) {
               if (progressDialog != null && progressDialog.isShowing()){
                  progressDialog.dismiss();
               }
                mp.start();
         }
     }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T09:53:23.360

不是很重复，但是这个问题在准备时有一个进度条，修改为进度对话框或其他东西会“相当”容易：

[媒体播放器准备时的进度条](https://stackoverflow.com/questions/6475115/progress-bar-while-media-player-is-preparing)

# c++ - 在 C++ 中由 Kinect 生成的分组点

> ID：14660596
> 
> 赞同：1
> 
> 时间：2013-02-02T09:44:27.623
> 
> 标签：c++, image-processing, kinect, cluster-analysis

是否有任何算法或最好是代码片段来组织和分组由 Kinect 从点云图像生成的几乎放置的点（在半径或特定数量的邻居内组织）并将其转换为一个点。我想增加尺寸，从而减少点数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T11:11:31.267

这是一个广泛的主题，称为“聚类分析”。[在这里](http://en.wikipedia.org/wiki/Cluster_analysis)查看更多信息。您应该使用几种聚类方法进行一些实验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T12:07:03.520

一种简单的方法如下：

1.  修复要用于集群的“epsilon”值
2.  对于每个点，从坐标计算一个“簇键”
3.  将所有点添加到由集群键索引的地图
4.  通过仅检查集群和附近的集群来收集所有组

在代码中：

```
std::map<CellIndex, std::vector<P3d> > pmap;

for (int  i=0,n=pts.size(); i<n; i++)
{
    int ix = int(pts[i].x / eps);
    int iy = int(pts[i].y / eps);
    int iz = int(pts[i].z / eps);
    pmap[CellIndex(ix, iy, iz)].push_back(pts[i]);
}

for (std::map<CellIndex, std::vector<P3d> >::iterator i=pmap.begin(),e=pmap.end();
     i != e;
     ++i)
{
    // get cluster center
    int cx = i->first.ix;
    int cy = i->first.iy;
    int cz = i->first.iz;

    // collect points from all 9 cluster with x index between cx-1 and cx+1
    // between cy-1 and cy+1 and between cz-1 and cz+1 (inclusive).
    // Not all clusters are guaranteed to be present in the map.
    // You will be considering only points that are at most 1.5*sqrt(3)*eps from
    // the center of the (cx, cy, cz) cell.
} 
```

根据您需要做的计算，有时可以通过将中间结果保存在单元格本身而不是将点存储在其中来执行一次传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T19:11:02.150

您是否考虑过使用*mean Shift*？

# asp.net - 发布 ASP.NET MVC4

> ID：14660604
> 
> 赞同：0
> 
> 时间：2013-02-02T09:45:18.183
> 
> 标签：asp.net, asp.net-mvc, iis

完成 MVC4 项目后，我想将其发布到本地 IIS 服务器上。现在我不知道如何发布我的项目，也不知道如何使用 IIS 服务器！

谁能用简单的话向我解释一下（初学者！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T09:47:23.607

对于初学者来说，这是一个很好的教程。

[http://www.asp.net/web-forms/tutorials/deployment/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-环境 5-of-12](http://www.asp.net/web-forms/tutorials/deployment/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12)

# android - 在非活动类中添加媒体播放器

> ID：14660614
> 
> 赞同：0
> 
> 时间：2013-02-02T09:46:13.433
> 
> 标签：android, class, nullpointerexception, android-mediaplayer

我在我的简单 android 游戏中有两个类：myBaseObject、myMissile... 我想用 Mediaplayer 添加一个声音 myMissile 类。

```
public class myBaseObject {
    MediaPlayer shoot;
    Context context;

    // ...

    public void myShoot()
    {
        shoot = MediaPlayer.create(context, R.raw.laser_effect);
        shoot.setVolume(100,100);       
        shoot.start();
    }
}

// .......

public class myMissile extends myBaseObject {

    public Missile( Bitmap bitmap, float x, float y, double velocity,
        double direction) {

        //...

        myShoot();
    }

} 
```

使用活动类开始游戏后，我在媒体播放器上看到 NullPointerException .. 并且游戏崩溃了......我该如何解决这个问题？我尝试了很多方法..但我无法解决..

这是我的 LogCat 02-02 12:37:43.496: E/AndroidRuntime(15009): at com.mycorp.myapp.myMissile.(myMissile.java:41)

02-02 12:37:43.496: E/AndroidRuntime(15009): at com.mycorp.myapp.MissileHandler.update(MissileHandler.java:75)

02-02 12:37:43.496: E/AndroidRuntime(15009): 在 com.mycorp.myapp.GameEngine.update(GameEngine.java:159)

02-02 12:37:43.496: E/AndroidRuntime(15009): 在 com.mycorp.myapp.GameThread.run(GameThread.java:51)

02-02 12:38:32.811: I/Process(15009): 发送信号。PID：15009 SIG：9

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:57:24.757

根据您的问题，很明显您没有传递您的活动上下文。这就是为什么它给你空指针异常。

修改您的代码，例如 beloe 可以帮助您

```
public class myBaseObject {
    MediaPlayer shoot;
    Context context;

     public void myShoot(Context ctx){
            this.context = ctx;
            shoot = MediaPlayer.create(context, R.raw.laser_effect);

            shoot.setVolume(100,100);

            shoot.start();

            }
}

public class myMissile extends myBaseObject {

//Context ctx
  public Missile( Bitmap bitmap, float x, float y, double velocity,
    double direction) {
.
.
.

   myShoot(this);

  } 
```

# php - 使用 PDO 在 mysql 表中搜索字符 %

> ID：14660618
> 
> 赞同：2
> 
> 时间：2013-02-02T09:46:32.590
> 
> 标签：php, mysql, pdo

我有一张带有单位的桌子：

```
insert into table unit ('id', 'name') values ('1', 'mg'), 
('2', 'km'), ('3', '%'), ('4', '%.'), ('5', 'mg/100%'), ('6', 'km/h'); 
```

现在我想找到所有名称中有 % 的单位（这里：%、%. 和 mg/100%）：

```
select * from unit where name like  '%\%%'; 
```

从控制台或 phpmyadmin 可以正常工作，但是当我尝试使用 PDO 时

```
$st = $db->prepare('select * from unit where name like :n'); 
$st->execute(array('n'=>'%mg%')); 
```

可以，但是

```
$st->execute(array('n'=>'%\%%')); 
```

不给我结果...

如何在 PDO 准备/执行中转义 % 字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:49:44.560

只需在查询中添加一个`ESCAPE`子句：

```
WHERE name LIKE :n ESCAPE '\'; 
```

当然，在 PHP 中，您必须转义反斜杠：

```
$stmt = $pdo->prepare('... WHERE name LIKE :n ESCAPE \'\\\';'); 
```

# jquery - 如何在 div 路径值上设置单击事件，如果单击路径值，则在 div 中显示子项

> ID：14660621
> 
> 赞同：0
> 
> 时间：2013-02-02T09:46:53.687
> 
> 标签：jquery

这是 xml 文件：-

```
<root>
<child1 entity_id = "1" value= "Asia">
    <child2 entity_id = "2" value = "india">
        <child3 entity_id = "3" value = "Gujarat">
            <child5 entity_id = "5" value ="Rajkot"></child5>
        </child3>
        <child4 entity_id = "4" value = "Rajshthan">
            <child6 entity_id = "6" value = "Ajmer"></child6>
        </child4>
    </child2>
</child1>
</root> 
```

这是我的 jquery 文件：-

```
 data = false;
function loadChild(id) {
    var obj = $("#" + id);

    if(obj.data("loaded") == null) {
        ul = "<d>";
        var path = (id == 0) ? "root" : "[entity_id='" + id + "']";

        // Only if it contains children
        if( $(data).find(path).children().length > 0) {
            $("li").hide();
            if($(this).data("loaded") == null) {
            $("#path").text($("#path").text()  + obj.text()+ " => ");
        }
        }

        $(data).find(path).children().each(function(){
            var value_text = $(this).attr('value');
            var id = $(this).attr('entity_id');
            ul += "<li id='" + id + "'>" + value_text + "</li>";
        });

        ul += "</d>";

        $("#" + id).before(ul);
        obj.data("loaded", true);
    } else {
        $("#" + id + " ul").remove();
        //obj.data("loaded", null);
    }
}

 $(document).ready(function() {
     $('#loader').click(function() {
     $(this).hide();
      $.ajax({
             type: "GET",
             url: "try.xml",
             dataType: "xml",
             success: function(xml) {
                data = xml;
                ul = $("<d></d>");
                //loadChild("0");
                $(xml).find('child1').each(function(){
                var value_text = $(this).attr('value');
                var id = $(this).attr('entity_id');
                li=$("<li id='" + id + "'></li>");
                             li.html(value_text);
                             ul.append(li);
                             $(this).unbind('click');
                });
                             ul.appendTo('#firstLevelChild');
    }
         }); //close $.ajax(
     }); //close click(
     $(document).on("click", "li", function(event) {

        event.stopPropagation();
        loadChild($(this).attr("id"), event);
        return false;
 });
 }); 
```

这是我的 html 文件：-

```
<div id="path">
</div>
<div id="1">
<span  id='update-target'>Click here to load value</span>
<ol id="0"></ol>
</div>
<div id="firstLevelChild">
<ol id="0"></ol>
</div> 
```

我的输出是这样的：

```
<div id="firstLevelChild">
    <ul>
        <li id="1" style="display: none;">Asia</li>
        <ul>
            <li id="2" style="display: none;">india</li>
            <ul>
                <li id="3">Gujarat</li>
                <li id="4">Rajshthan</li>
            </ul>
        </ul>
    </ul>
</div>
<div id="path">  Asia => india => Gujarat =></div><br> 
```

如果我单击 div 路径值中的任何一个，例如 India，那么只有 asia 在路径中显示，
然后印度在另一个 div 上显示

像

```
<div id="path"> Asia => India => Gujarat => 
```

如果我点击印度然后输出显示类似这样

```
<div id="path"> Asia =>
<div id="firstLevelChild">
<d><li id="2"> Inida </li></d>
</div> 
```

类似反向过程的东西
谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:30:40.513

我有一个解决方案给你，但你需要修复你的代码才能让它工作......

工作代码...

**HTML**

```
<body>
    <div id="loader">
        <span id='update-target'>Click here to load value</span>
    </div>

    <div id="firstLevelChild"></div>

    <div id="path"></div>
</body> 
```

**jQuery**

```
data = false;

$(document).ready(function() {
    $('#loader').click(function() {
        $(this).hide();
        $.ajax({
            type: "GET",
            url: "./final.xml",
            dataType: "xml",
            success: function(xml) {
                data = xml;
                ul = $("<ul></ul>");
                $(xml).find('child1').each(function(){
                    var value_text = $(this).attr('value');
                    var id = $(this).attr('entity_id');
                    li = $("<li id='" + id + "'></li>");
                    li.html(value_text);

                    ul.append(li);
                });       //close each(      
                ul.appendTo('#firstLevelChild');
            }
        }); //close $.ajax(
    }); //close click(

    $(document).on("click", "li", function(event) {
        event.stopPropagation();
        loadChild($(this).attr("id"), false);
        return false;
    });

    $(document).on("click", "span.paths", function(event) {
        event.stopPropagation();
        id = $(this).attr("id").replace("path_","");
        $(this).nextAll("span").remove();
        $(this).remove();
        loadChild(id, true);
        return false;
    });
});

function loadChild(id, path) {
    var obj = $("#firstLevelChild #" + id);

    if(obj.data("loaded") == null || path) {
        ul = "<ul>";
        var path = (id == 0) ? "root" : "[entity_id='" + id + "']";

        // Only if it contains children
        if( $(data).find(path).children().length > 0) {
            $("li").hide();
            $("span #path_" + id).remove();
            p = $("<span id=\"path_" + id + "\" class=\"paths\">" + obj.text() + " => </span>"); 
            $("#path").append(p);
        }

        $(data).find(path).children().each(function(){
            var value_text = $(this).attr('value');
            var id = $(this).attr('entity_id');
            $("#" + id).remove();
            ul += "<li id='" + id + "'>" + value_text + "</li>";
        });

        ul += "</ul>";

        obj.after(ul);
        obj.data("loaded", true);
    } else {
        $("#" + id + " ul").remove();
        obj.data("loaded", null);
    }
} 
```

# c# - 实体框架 EDMX 关系映射表

> ID：14660624
> 
> 赞同：1
> 
> 时间：2013-02-02T09:47:10.457
> 
> 标签：c#, asp.net-mvc, entity-framework

我有一个用户表和一个角色表。
为了将两者联系在一起，我创建了一个 UsersInRoles 表，该表具有用户的 UserId 的外键和角色的 RoleName 的另一个外键。

但是，当我从数据库生成 EDMX 而不是为 UsersInRoles 生成单独的表时，会创建一个关联。我应该使用此关联还是应该尝试弄清楚如何生成 UsersInRoles 表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:03:53.423

这是实体框架的正常行为。用于创建 n - n 关系的表未在模型中创建为实体（用作中间表以创建两个表之间的关系的表）。

`Users`相反，您将观察和`Roles`实体之间的 n 到 n 关系。

# php - Codeigniter 将多个检查的参数传递回视图

> ID：14660628
> 
> 赞同：1
> 
> 时间：2013-02-02T09:47:38.177
> 
> 标签：php, json, codeigniter, parameter-passing, multiple-value

我是 CI 新手，对如何传递参数有疑问，我的情况是：

1) 带有多个复选框的表单，如**online_booking.php**，用户将检查多个选项。

2）用户点击按钮在json中调用jq ajax post，这将从控制器中的**booking_process**获取回调参数。

3）然后返回的结果将打印在`#result`div 块中的视图上。

好的，上面的过程工作正常，结果就像用户检查的那样打印。

现在是我的问题，我想在视图中重新使用回调结果，即使我在视图页面上打印了结果，但我不能使用结果进行进一步处理，我怎样才能将返回的结果变成一个变量在视图中？

我尝试了几种方法，我尝试`online_booking?selected=mutipleCheckedValue&sum=500`使用更改 $config ['permitted_uri_chars'] 的传递方法的旧方式，但只获取最后一个检查值而不是所有检查值，这意味着即使我使用 A+ 类型检查了复选框B+C，在 URL 中它唯一显示类型 C 的值，我知道这在 CI 中不是一个好的做法，但如果我找不到合适的解决方案，可能有助于解决我的疑问。

我什至尝试在会话中存储检查的值，如控制器上所见`$this->session->set_userdata('selected', $conf_type.":".$conf_charge);`，它仍然只显示最后检查的值。

请就如何克服这个问题提供建议，因为我已经在这部分停留了很多时间。

**online_booking.php 查看：**

```
<?php
$is_logged = $this->simplelogin->is_logged();
$active = $this->simplelogin->get_data_user('activate');
$user_email = $this->simplelogin->get_data_user('email');

if(!$is_logged) {

    echo "<p>Please login to get access</p>";

}else if($active == 0){
    echo "<p>Your account is inactive to proceed this page</p>";

}else{

?>

<p><h2>Online Booking</h2></p>

<p><div id="result_msg"></div></p>

<p>
<form id="conf_booking_form">
    <input type="checkbox" name="cType[]" value="A,200">&nbsp;Type A - USD200<br>
    <input type="checkbox" name="cType[]" value="B,150">&nbsp;Type B - USD150<br>
    <input type="checkbox" name="cType[]" value="C,100">&nbsp;Type C - USD100<br>
    <input type="checkbox" name="cType[]" value="D,50">&nbsp;Type D - USD50<br>
    <input type="hidden" name="user_email" value="<?php echo $user_email ?>" />
    <input type="button" id="btn_conf" name="" value="Book" />
    <span id="wait"><img src="<?php echo base_url();?>assets/img/loader.gif" /></span><br />
</form>
</p>
<p><div id="result" style="color:#606;"></div></p>

<?php
}
?> 
```

**jQuery ajax 帖子：**

```
$('#btn_conf').click(function(){
    var parameters = $('#conf_booking_form').serialize();

    //alert(parameters);
    $.ajax({
        url: baseurl + 'site/booking_process',
        type: 'POST',
        data: parameters,
        dataType: 'json',
        success: function(output_str){
            if(output_str == "false"){
                $('#result_msg').html("Select at least one type to proceed booking");

            }else{
                $('#result').html(output_str);
                //window.location.replace(baseurl + 'site/online_booking?selected='+output_str.selected+'&sum='+output_str.sum);
            }
        }
    });
}); 
```

**控制器：**

```
class Site extends CI_Controller {

public function online_booking() {
    $this->load->view('header');
    $this->load->view('online_booking');
    $this->load->view('footer');
}

public function booking_process(){
    $confTypes = $this->input->post('cType');
    $user_email = $this->input->post('user_email');
    $output_str = NULL;
    $conf_charge_total = 0;

    if(!empty($confTypes)){

        foreach($confTypes as $confType){
            $explode_value = explode(",", $confType);

            $conf_type = $explode_value[0];
            $conf_charge = $explode_value[1];

            $conf_charge_total += $conf_charge; //sum up checked values

            $output_str .= $conf_type.":".$conf_charge.",";
            /*$output_str = array(
                    'selected' => $conf_type.','.$conf_charge,
                    'email' => $user_email,
                    'sum' => $conf_charge_total,
                    'flag' => 'true'
                );*/

            //$this->session->set_userdata('selected', $conf_type.":".$conf_charge);
        }

        $output_str .= $conf_charge_total;

        //$this->session->set_userdata('sum_conf_charges', $conf_charge_total);

    }else{
        $output_str = "false";
    }

    echo json_encode($output_str);
}
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:52:46.110

当你存储`set_userdata('selected', ...)`在循环里面时，`selected`每次循环都会被覆盖。如您所见，这将导致存储的最后一个值。您可以在之前或之后将其移出循环，并且

```
$this->session->set_userdata('selected', $confTypes); 
```

或准备一个数组并存储它

```
foreach ($confTypes as $confType){
    ...
    $selected_conf_types[$conf_type] = $conf_charge;
}

$this->session->set_userdata('selected', $selected_conf_types); 
```

# php - 绕过表单输入字段以上传不需要的文件

> ID：14660632
> 
> 赞同：1
> 
> 时间：2013-02-02T09:48:15.353
> 
> 标签：php, security

我的网站为会员上传个人资料图片部分，我使用了以下代码。

**表格代码**

```
<form action="send.php" method="post" enctype="multipart/form-data" name="send" id="send">
    Your Image : <input type="file" name="pic" id="pic"/>
    <input type="Submit" name="Submit" value="Submit"/>
</form> 
```

**PHP 代码`send.php`**

```
$ImageName = $_FILES[pic][name]; 
if(!empty($ImageName) && $_FILES[pic][type] == "image/jpeg" || $_FILES[pic][type] == "image/png" || $_FILES[pic][type] == "image/gif" || $_FILES[pic][type] == "image/bmp"){
    $t = time();
    $NewImageName = "$t$ImageName"; // image new name
    copy($_FILES[pic][tmp_name], "users/$NewImageName"); // copy it to directory
} else {
    echo "no upload done";
} 
```

但是有人通过使用 firefox 扩展设法绕过它并上传了 php 文件 谁将文件上传到我的网站给我发了消息说“你只检查类型！” 并说“我使用了可以伪造输入字段并传递 PHP 文件的 firefox 扩展程序”。

***所以我的问题***是如何保护上述代码的图片上传形式？~ 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T09:52:28.570

首先，我认为这不是读取 $_FILE 变量的有效格式

```
$ImageName = $_FILES[pic][name]; 
```

你应该使用

```
$ImageName = $_FILES['pic'][name]; 
```

然后我认为有人可以伪造服务器端检查是不可能的。

尝试破解这个，我使用[PHP.net 手册中提到的 *PATHINFO_EXTENSION*](http://php.net/manual/en/function.pathinfo.php)

```
$validFormat = array("jpg","JPG","jpeg","JPEG","png","PNG","gif","GIF");    
$path = pathinfo($_FILES['pic']['name'], PATHINFO_EXTENSION);
if(in_array($path, $validFormat)){
// it's okay
}else{
// Error
} 
```

自从我不久前发现 pathinfo 并且没有人破解它以来，我正在使用此代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T09:56:14.420

数组中的`"type"`条目`$_FILES`确实只是客户端发送的值。不要相信他们。

文件作为 php 执行，不是基于客户端给出的 MIME 类型（或从它们的数据中识别的 MIME 类型），而只是通过它们的扩展名。

```
$imageName = $_FILES['pic']['name'];

if (isset($imageName)) {
    $ext = pathinfo($imageName, PATHINFO_EXTENSION);
    if (in_array(strtolower($ext), array('jpg', 'jpeg', 'gif', 'png', 'bmp')) {
        $t = time();
        $newImageName = $t . basename($imageName);
        copy($_FILES['pic']['tmp_name'], 'users/' . $newImageName);
    }
} else {
    echo 'no upload done';
} 
```

请注意[`pathinfo`](http://php.net/manual/en/function.pathinfo.php)获取扩展名和[`basename`](http://php.net/manual/en/function.basename.php)避免[路径遍历攻击](https://www.owasp.org/index.php/Path_Traversal)的调用。

# android - 如何让 TextWatcher 在执行某些操作之前等待一段时间

> ID：14660636
> 
> 赞同：10
> 
> 时间：2013-02-02T09:48:45.273
> 
> 标签：android, android-listview, android-edittext, textwatcher

我有一个`EditText`过滤`ListView`它下面的项目，通常可能包含 1000 多个项目。是`TextWatcher`：

```
txt_itemSearch.addTextChangedListener(new TextWatcher() {

public void onTextChanged(CharSequence s, int start, int before, int count) {
    fillItemList();
}
public void afterTextChanged(Editable s) {
}

public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
}
}); 
```

这里的问题是，随着用户输入的每个字母，列表都会刷新，正是这种重复的列表更新导致 UI 变慢。

我怎样才能`TextWatcher`等待 1-2 秒，如果 2 秒后没有更多输入发生，则过滤列表。有什么建议吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-02T10:34:03.227

> 如何让 textWatcher 等待 1-2 秒，如果 2 秒后没有更多输入，则过滤列表。

正如我在评论中已经说过的，您应该考虑使用`getFilter()`适配器的方法。因为这可能不合适（如你所说）尝试实现适配器过滤器用于在过滤器输入之间取消的相同机制。

```
private Handler mHandler = new Handler();

public void afterTextChanged(Editable s) {
      mHandler.removeCallbacks(mFilterTask); 
      mHandler.postDelayed(mFilterTask, 2000);
} 
```

哪里`filterTask`是：

```
Runnable mFilterTask = new Runnable() {

     @Override
     public void run() {
          fillItemList();
     }       
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-05T07:24:20.227

使用[RxBinding](https://github.com/JakeWharton/RxBinding)：

```
RxTextView.textChanges(edittext)
            .skipInitialValue()
            .debounce(TIME_TO_WAIT, TimeUnit.MILLISECONDS)
            .subscribe({
               //do the thing
            })
} 
```

# ruby - group_by in rails by 2 or more attributes

> ID：14660644
> 
> 赞同：49
> 
> 时间：2013-02-02T09:50:24.767
> 
> 标签：ruby, ruby-on-rails-3, group-by

I have a `@bunch` of models returned as an array

each model has the attributes - `commentable_id` and `commentable_type` (polymorphic association)

I want to group the models by commentable, but if I do

```
@bunch.group_by(&:commentable) 
```

it also fetches the commentable from the database, which is not needed.

I can do `@bunch.group_by(&:commentable_id)` but this will cause some confusions since there can be several types of commentable models

Is there a way to `group_by` `commentable_id` AND `commentable_type`?

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2013-02-02T09:54:28.100

Why not do:

```
@bunch.group_by{|e| [e.commentable_id, e.commentable_type]} 
```

# php - 当 XML 包含命名空间时如何将 XPath 与 PHP 一起使用

> ID：14660645
> 
> 赞同：3
> 
> 时间：2013-02-02T09:50:30.000
> 
> 标签：php, xml, parsing

我正在寻找一种方法来获取`kuler:swatchHexColor`下面 XML 文件中的值。我尝试了几种方法，但没有运气。我在下面尝试了这个，但做得不好。

同样，尝试将`hexColor`值放入变量中。

```
$feed = simplexml_load_file('url');
$kuler = $feed->children('http://kuler.adobe.com/kuler/API/rss/');
foreach ($kuler->themeItem as $themeItem)   {
  echo $themeItem->swatch;
} 
```

```
<rss xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:rss="http://blogs.law.harvard.edu/tech/rss" xmlns:kuler="http://kuler.adobe.com/kuler/API/rss/" version="2.0">
    <channel>
        <title>kuler search results for 'crazy'</title>
        <link>http://kuler.adobe.com/</link>
        <description>
        612 kuler themes were found. Displaying results 1 to 1.
        </description>
        <language>en-us</language>
        <pubDate />
        <lastBuildDate />
        <docs>http://blogs.law.harvard.edu/tech/rss</docs>
        <generator>Kuler Services</generator>
        <managingEditor>kulerfeedback@adobe.com</managingEditor>
        <webMaster>kulerfeedback@adobe.com</webMaster>
        <recordCount>612</recordCount>
        <startIndex>0</startIndex>
        <itemsPerPage>1</itemsPerPage>
        <item>
            <title>Theme Title: crazy lisa</title>
            <link>http://kuler.adobe.com/index.cfm#themeID/89760</link>
            <guid>http://kuler.adobe.com/index.cfm#themeID/89760</guid>
            <enclosure xmlns="http://www.solitude.dk/syndication/enclosures/">
                <title>crazy lisa</title>
                <link type="image/png" length="1">
                    <url>
        http://kuler-api.adobe.com/kuler/themeImages/theme_89760.png
        </url>
                </link>
            </enclosure>
            <description>
                <img src="http://kuler-api.adobe.com/kuler/themeImages/theme_89760.png" />
                <br /> Artist: sa<br /> ThemeID: 89760<br /> Posted: 09/24/2007<br /> Tags: crazy but sweet, crazy harmony <br />    Hex: FF0082, BF9F1B, B8495D, 520641, CC0000
        </description>
            <kuler:themeItem>
                <kuler:themeID>89760</kuler:themeID>
                <kuler:themeTitle>crazy lisa</kuler:themeTitle>
                <kuler:themeImage>...</kuler:themeImage>
                <kuler:themeAuthor>...</kuler:themeAuthor>
                <kuler:themeTags>crazy but sweet, crazy harmony</kuler:themeTags>
                <kuler:themeRating>3</kuler:themeRating>
                <kuler:themeDownloadCount>28</kuler:themeDownloadCount>
                <kuler:themeCreatedAt>20070924</kuler:themeCreatedAt>
                <kuler:themeEditedAt>20070926</kuler:themeEditedAt>
                <kuler:themeSwatches>
                    <kuler:swatch>
                        <kuler:swatchHexColor>FF0082</kuler:swatchHexColor>
                        <kuler:swatchColorMode>cmyk</kuler:swatchColorMode>
                        <kuler:swatchChannel1>0.0</kuler:swatchChannel1>
                        <kuler:swatchChannel2>1.0</kuler:swatchChannel2>
                        <kuler:swatchChannel3>0.49</kuler:swatchChannel3>
                        <kuler:swatchChannel4>0.0</kuler:swatchChannel4>
                        <kuler:swatchIndex>0</kuler:swatchIndex>
                    </kuler:swatch>
                    <kuler:swatch>
                        <kuler:swatchHexColor>BF9F1B</kuler:swatchHexColor>
                        <kuler:swatchColorMode>cmyk</kuler:swatchColorMode>
                        <kuler:swatchChannel1>0.0</kuler:swatchChannel1>
                        <kuler:swatchChannel2>0.17</kuler:swatchChannel2>
                        <kuler:swatchChannel3>0.86</kuler:swatchChannel3>
                        <kuler:swatchChannel4>0.25</kuler:swatchChannel4>
                        <kuler:swatchIndex>1</kuler:swatchIndex>
                    </kuler:swatch>
                    <kuler:swatch>
                        <kuler:swatchHexColor>B8495D</kuler:swatchHexColor>
                        <kuler:swatchColorMode>cmyk</kuler:swatchColorMode>
                        <kuler:swatchChannel1>0.01</kuler:swatchChannel1>
                        <kuler:swatchChannel2>0.61</kuler:swatchChannel2>
                        <kuler:swatchChannel3>0.5</kuler:swatchChannel3>
                        <kuler:swatchChannel4>0.27</kuler:swatchChannel4>
                        <kuler:swatchIndex>2</kuler:swatchIndex>
                    </kuler:swatch>
                    <kuler:swatch>
                        <kuler:swatchHexColor>520641</kuler:swatchHexColor>
                        <kuler:swatchColorMode>cmyk</kuler:swatchColorMode>
                        <kuler:swatchChannel1>0.0</kuler:swatchChannel1>
                        <kuler:swatchChannel2>0.926829</kuler:swatchChannel2>
                        <kuler:swatchChannel3>0.207317</kuler:swatchChannel3>
                        <kuler:swatchChannel4>0.678431</kuler:swatchChannel4>
                        <kuler:swatchIndex>3</kuler:swatchIndex>
                    </kuler:swatch>
                    <kuler:swatch>
                        <kuler:swatchHexColor>CC0000</kuler:swatchHexColor>
                        <kuler:swatchColorMode>cmyk</kuler:swatchColorMode>
                        <kuler:swatchChannel1>0.0</kuler:swatchChannel1>
                        <kuler:swatchChannel2>1.0</kuler:swatchChannel2>
                        <kuler:swatchChannel3>1.0</kuler:swatchChannel3>
                        <kuler:swatchChannel4>0.2</kuler:swatchChannel4>
                        <kuler:swatchIndex>4</kuler:swatchIndex>
                    </kuler:swatch>
                </kuler:themeSwatches>
            </kuler:themeItem>
            <pubDate>Mon, 24 Sep 2007 15:24:23 PST</pubDate>
        </item>
    </channel>
</rss> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T11:01:18.283

在 PHP 中有两种常用的方法。首先，使用简单的 xml 扩展（正如您已经在做的那样）：

```
$feed = simple_xml_load_file('url');
// resister the kuler namespace
$feed->registerXpathNamespace('kuler', 'http://kuler.adobe.com/kuler/API/rss/');
// get elements regardless of their position in tree -> //
$result = $feed->xpath('//kuler:swatchHexColor');

// iterate through the result set 
foreach ($result as $item)   {
  echo $item, PHP_EOL;
} 
```

您还可以使用 DOM 扩展：

```
$feed = new DOMDocument();
$feed->load('url');

// create an xpath selector for the document
$selector = new DOMXPath($feed);
// register the kuler namespace
$selector->registerNamespace('kuler', 'http://kuler.adobe.com/kuler/API/rss/');

// get elements regardless of postion in tree -> //
$result = $selector->query('//kuler:swatchHexColor');

// iterate trough the result set
foreach ($result as $node) {
    // do what you want with the node ...
    echo $node->nodeValue, PHP_EOL;
} 
```

# ubuntu - NVidia 三重显示器 - xorg.conf？

> ID：14660646
> 
> 赞同：1
> 
> 时间：2013-02-02T09:50:54.007
> 
> 标签：ubuntu, nvidia, xserver

我有一个新的视频配置，我想正确设置它： 1 - 监视器 1（DVI 连接器） 2 - 监视器 2（VGA 连接器 3 - 投影仪 1920 x 1080（HDMI 连接器）

显卡为 NVIDIA Corporation G96 [GeForce 9500 GT]

我想将每台显示器设置为一个 X 屏幕。我该如何解决这个问题。

# actionscript-3 - Flex和FLash之间的连接

> ID：14660652
> 
> 赞同：0
> 
> 时间：2013-02-02T09:51:54.890
> 
> 标签：actionscript-3, flash, apache-flex, flash-builder

我正在做一个项目，它基于两个主要部分，第一部分由 Flex 完成，第二部分是一个 flash 专业项目，包含 PROJECTNAME.fla 和 PROJECTNAME.as 文件。我的问题是我们如何从 flex 部分设置 .fla 项目中的一些参数（例如用户名、用户图像）。我通过以下方式解释主要程序；

1.  通过 flex 部分连接到服务器并获取用户的状态
2.  运行如上所述由 flash 专业项目创建的 .swf
3.  在 .swf 文件中设置一些参数。

我google了很多，我没有找到任何解决方案。（有一些将符号转换为弹性组件的解决方案，因为它适用于转换单个符号）。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T12:14:48.863

将参数从一个 swf（在您的情况下为 flex）传递到另一个运行时加载的 fla.swf 有几种可能性：

**1.通过加载查询参数：**

flex.swf 中的代码：

```
 public function astest()
    {
        var loader:Loader = new Loader();
        addChild(loader);
        loader.load( new URLRequest("astest1.swf?param1=value1&param2=value2"));
    } 
```

从 fla.swf 访问参数：

```
public function astest1()
{
    if(stage)
        onAdded();
    else
        addEventListener(Event.ADDED_TO_STAGE, onAdded);
}

protected function onAdded(event:Event = null):void
{
    //root.loaderInfo.parameters - params of this swf file
    //stage.loaderInfo.parameters - params of core swf file
    var params:Object = root.loaderInfo.parameters;
    for (var param:String in params)
        trace(param,"=",params[param]);
} 
```

输出：

```
param2 = value2
param1 = value1 
```

缺乏这种方法：

- 一次使用，加载时只能传递一次参数
- 第二个 swf 必须在运行时通过 url 加载，例如，不能嵌入它（或包含它的类之一）。

**2.通过事件的运行时通信**
我推荐使用这种方法，它不缺乏前一种。
使用 stage 作为全局公共调度程序的示例。

弹性.swf：

```
 public function astest()
    {
        addEventListener("ready", onReady);
        var loader:Loader = new Loader();
        addChild(loader);
        loader.load( new URLRequest("astest1.swf"));
    }

    protected function onReady(event:Event):void
    {
        sendParams("param1=value1&param2=value2");
    }

    protected function sendParams(params:String):void
    {
        stage.dispatchEvent(new DataEvent("params", false, false, params));
    } 
```

fla.swf:

```
public function astest1()
{
    if(stage)
        onAdded();
    else
        addEventListener(Event.ADDED_TO_STAGE, onAdded);
}

protected function onAdded(event:Event = null):void
{
    stage.addEventListener("params", onParams);
    //fire event with bubbling that anables handling it in the parent swf
    dispatchEvent(new Event("ready", true));
}

protected function onParams(event:DataEvent):void
{
    var data:String = event.data;
    trace(data);
} 
```

输出：

```
param1=value1&param2=value2 
```

使用这种方法，您可以根据需要发送尽可能多的参数，您还可以创建自定义事件来传递对象参数，但在这种情况下，两个项目都必须在源路径中具有此自定义事件。

# android - 解析来自 Facebook FQL 的响应并以正确的格式显示

> ID：14660653
> 
> 赞同：2
> 
> 时间：2013-02-02T09:52:01.490
> 
> 标签：android, facebook, facebook-fql

如何在使用 Facebook API 的活动中获取使用我的应用程序的朋友列表？目前正在开发一个使用 Facebook API 的应用程序，以**向安装了我的应用程序的用户显示朋友列表。**我尝试使用像“**我”这样的 Graph API Explorer /friends?fields=name,likes,installed** “但我想知道如何在我的 Android App Activity 中获得所需的结果。现在我可以使用 FQL 查询得到这个：

```
{Response:responseCode:200, graphObject:GraphObject{graphObjectClass=GrahObject,state=
    {
  "data": [
    {
      "uid": xxxx98471, 
      "name": "ABC"
    }, 
    {
      "uid": xxx425672424, 
      "name": "XYZ"
    }
  ]
},error:null, isFromCache:false} 
```

那么如何格式化这个输出并以正确的方式显示它：名称：ABC名称：列表视图中的XYZ左右...... **我尝试过使用：**

```
public void onCompleted(Response response) {
                GraphObject graphObject = response.getGraphObject();
                String s = textViewResults.getText().toString();
                if (graphObject != null) {
                    if (graphObject.getProperty("id") != null) {
                        s = s + String.format("%s: %s\n", 
                                graphObject.getProperty("id"), 
                                graphObject.getProperty("name"));
                    }
                }
                textViewResults.setText(s);
            }
        }));
    }
    request.executeAsync(); 
```

我在结果中得到“null”。所以现在谁能告诉我如何解析这种类型的响应。**任何帮助将不胜感激。**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-03T12:44:53.063

```
public void onCompleted(Response response) {
                GraphObject graphObject = response.getGraphObject();
                String s = textViewResults.getText().toString();
                if (graphObject != null) {
                    JSONObject jsonObject = graphObject.getInnerJSONObject();
                    try {
                     JSONArray array = jsonObject.getJSONArray("data");
                     for (int i = 0; i < array.length(); i++) {
                         JSONObject object = (JSONObject) array.get(i);
                         Log.d(TAG, "id = "+object.get("id"));
                      }
                } catch (JSONException e) {

                 e.printStackTrace();
                }
         }
                textViewResults.setText(s);
            }
        }));
}
request.executeAsync(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T12:44:24.657

试试这个：

```
 JSONObject json = Util.parseJson(mFacebook.request("me/friends"));
            final JSONArray friends = json.getJSONArray("data");
            if (friends != null) {
                for (int i = 0; i < friends.length(); i++) {
                    String id =
              friends.getJSONObject(i).getString("id");                     
                    String name = friends.getJSONObject(i).getString("name");
                        Log.i(id,name);
                }
            } 
```

# css - 获取 div 内的图像 - height:auto 和 max-height

> ID：14660656
> 
> 赞同：0
> 
> 时间：2013-02-02T09:52:25.953
> 
> 标签：css

我在 div 内得到一个未知*宽度*和*高度*的图像。我想要一个具有最大*宽度*或*高度*的图像- 比如`background-size: contain`.

这是我的源代码：

CSS

```
.box {
    display: block;
    position: fixed;
    height: auto;
    bottom: 0;
    top: 0;
    left: 0;
    right: 0;
    margin-top: 50px;
    margin-bottom: 50px;
    margin-right: 80px;
    margin-left: 80px;
    background-color: white;
    border: solid 2px blue;
}

.box img {
    max-width: 100%;
    max-height: 100%; 
} 
```

HTML

```
<div class="box">
<img src="myimage.jpg">
</div> 
```

最大宽度运行良好，但最大高度不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:47:59.760

仅使用 CSS 无法实现您想要的。

有 JS 插件可以为你做这个。寻找[imgscale](http://imgscale.kjmeath.com/)它是一个 jQuery 插件，虽然它需要一些调整，但有一个很好的基础。

这是我修改过的一份副本的链接：[http ://www.dtavares.com/imgscale/js/jquey.imgscale.js](http://www.dtavares.com/imgscale/js/jquey.imgscale.js)

您可以将其称为：

```
 $(".someConainer img").imgscale({parent: '.someConainer', scale: 'fit', center: true, fade: 0}); 
```

# c# - 删除 Visual Studio 解决方案文件夹

> ID：14660659
> 
> 赞同：0
> 
> 时间：2013-02-02T09:52:50.240
> 
> 标签：c#, .net, visual-studio, dotnetnuke

我在工作的 PC 上安装了 Viusal Studio 2008，在家里的 PC 上安装了 Visual Studio Express 2010。

我已经从 Internet (DotNetNuke) 下载了一些源代码，我正在尝试在家里的 PC 上逐步完成它。问题是 DotNetNuke 源代码使用了解决方案文件夹，而 express 版本不支持它们。当我打开解决方案时，我面临作为解决方案一部分的每个项目的错误。

有没有办法通过编辑配置文件来删除解决方案文件夹，而不删除属于解决方案文件夹的项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:12:47.540

是的，但你必须小心。以记事本++/记事本之类的方式打开 .SLN 文件。只需删除对解决方案文件夹的引用。然后将 .SLN 文件移动到包含代码的文件夹中。

# mysql - 没有先前值的情况

> ID：14660662
> 
> 赞同：0
> 
> 时间：2013-02-02T09:53:00.897
> 
> 标签：mysql

我有这张表，我只想看 AB

```
ID     CODE       COUNT   
102    AB         7
101    AB         6
100    AC         23    //not important!!!!
99     AB         26
98     AB         1
97     AB         0
96     AB         50 
```

我想计算每个步骤之间的差异，但中间有一些情况

**情况1**：如果值突然变成50，没有之前的值，取0作为之前的值。

**情况2**：如果*差值*突然为负，也取0作为之前的值。

所以我的结果应该是：

```
ID      COUNT   DIFFERENCE  
96      50      50      //CASE 1, take 0 as previous value
97       0       1
98       1      25
99      26       6      //CASE 2, take 0 instead of 26 as previous value
101      6       1 
```

我现在拥有的代码是：

[http://sqlfiddle.com/#!2/98051/3](http://sqlfiddle.com/#!2/98051/3)

我应该如何调整它以使其按我想要的方式工作？

亲切的问候

*ps：如果您不清楚，请询问，我会尽力改善我的问题*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:32:08.183

我不完全理解你想要完成什么，但我猜你想要这样的东西：

```
SET @previous_count:=0;

SELECT id, code, `count`, 
IF(`count` - @previous_count, `count`) as difference,
@previous_count:=`count` 
FROM table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T15:57:06.320

我不知道在这种情况下“突然”是什么意思，但也许这样的事情对你有用......

```
SELECT a.id
     , a.code
     , a.count
     , b.count bcount
     , CASE WHEN a.count = 50 AND b.count IS NULL THEN 50
            WHEN a.count - b.count <= 0 THEN 0
            ELSE a.count - b.count
            END difference
  FROM 
     ( SELECT x.* 
            , COUNT(*) rank
         FROM some_table x
         JOIN some_table y
           ON y.code = x.code
          AND y.id <= x.id
        GROUP
           BY x.id
     ) a
  LEFT
  JOIN   
     ( SELECT x.* 
            , COUNT(*) rank
         FROM some_table x
         JOIN some_table y
           ON y.code = x.code
          AND y.id <= x.id
        GROUP
           BY x.id
     ) b
    ON b.code = a.code
   AND b.rank = a.rank -1; 
```

# java - com.sun.star.lang.IllegalArgumentException - 不受支持的 URL 嗨 Stackoverflow 社区，我在从我的 java webapp 读取文件时遇到问题。我想从我的 web 应用程序的目录中获取文件，然后将其转换为 PDF。在我的开发环境（Windows）中一切正常，但是当我将它放在服务器（LINUX）上时，当服务器到达代码以读取我的 doc 文件进行转换时，java 抛出此异常： 问问题 问问题 2013-02-02T09:53:21.507 7070 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 嗨 Stackoverflow 社区，我在从我的 java webapp 读取文件时遇到问题。我想从我的 web 应用程序的目录中获取文件，然后将其转换为 PDF。在我的开发环境（Windows）中一切正常，但是当我将它放在服务器（LINUX）上时，当服务器到达代码以读取我的 doc 文件进行转换时，java 抛出此异常： com.sun.star.lang.IllegalArgumentException - Unsupported URL <file: 这是代码：="" filedoctoconvert="new" file(get_real_path()+repo_name+slash+filename);="" filedoctoconvert然后路径变为：="" usr="" share="" tomcat7="" webapps="" myapp="" repo_name="" exemple.doc="" 当我尝试转换时引发异常：="" openofficeconnection="" connection="new" socketopenofficeconnection(8100);="" connection.connect();="" documentconverter="" converter="new" openofficedocumentconverter(connection);="" here...="">// converter.convert(docFile, pdfFile); 我在用 ： jodConverter 2.2.1、openOffice 3、Java7、Tomcat 7 我以这种方式启动 openOffice 服务： soffice --headless --accept="socket,host=127.0.0.1,port=8100;urp;" --nofirststartwizard 我无法找到解决此问题的方法。 先感谢您 将带双引号的字符串插入表中 我正在使用 Oracle 10g，但在将带双引号的字符串插入表中时遇到问题。这是我的声明 INSERT INTO USERS (ID, NAME, USERNAME) VALUES (NULL, "tes", "hello"); 上面的查询失败并出现错误"Oracle column not allowed here"。 如果我将双引号更改为单引号，则如下语句成功。 INSERT INTO USERS (ID, NAME, USERNAME) VALUES (NULL, 'tes', 'hello'); 但是，我想在表格中插入双引号。 是否可以在插入语句中的字符串中使用双引号？我不想使用 REPLACE() 因为我的查询是从数组自动生成的。 javaopenoffice.orgfile-conversionjodconverter 4 3 回答 3 This answer is useful 3 我通过安装一些缺少的 OpenOffice 组件（Calc、Writer）解决了这个问题。问题是 OpenOffice 无法理解提供给它的文件的路径。 感谢您的帮助。 于 2013-02-03T18:56:49.567 回答 This answer is useful 0 对我来说，问题是 OpenOffice 或其他使用 OpenOffice 组件的程序无法理解提供给它的文件的路径作为保存文件的位置。保存您尝试保存在计算机上其他位置的文件，看看是否有效。 于 2021-03-09T01:30:14.070 回答 This answer is useful 0 java.lang.Exception: Unsupported URL <file: 0="" 1="" 2="" 3="" 4="" 360="" 2010="" ...启动来自不同用户的多个="" libreoffice="" 实例并且具有冲突的相同端口设置时收到错误消息。="" 于="" 2016-06-17t10:35:44.790="" 回答="" related="" mysql="" -="" mysql从n个选择中随机m个="" xcode="" 为新="" mac="" 创建新证书="" ember.js="" 如何观察父视图中的属性？="" c#="" 在同一个="" asp="" 按钮上使用="" jquery="" 警报和确认弹出窗口？="" wpf="" 在="" microsoft="" 显示错误消息之前，在="" word="" 加载项中捕获="" 未处理的异常="" ios5="" 如何摆脱="" uislider="" 左右两边的空隙="" android="" 配置更改后恢复片段的对象引用="" masonry="" 无缝响应图像网格="" 为什么我的="" xbox="" adk="" 参考应用程序项目的="" vs="" 中的监视值格式奇怪（文本="" html="" xml="" 可视化工具不会出现）="" java="" 如何从="" finally="" 子句中抛出="" catch="" 子句中捕获的异常？="" reference="" php × 1429865="" c="" c++ × 756500="" nginx × 49975="" mongodb × 159057="" mybatis × 3233="" anaconda × 13410="" pycharm × 14671="" python × 1902243="" vscode × 56040="" docker × 110988="" github × 49000="" flask × 49129="" ffmpeg × 24037="" jmeter × 16910="" matplotlib × 63493="" bootstrap × 54641<="" h1="">> ID：14660664
> 
> 赞同：2
> 
> 时间：
> 
> 标签：java, openoffice.org, file-conversion, jodconverter

嗨 Stackoverflow 社区，我在从我的 java webapp 读取文件时遇到问题。我想从我的 web 应用程序的目录中获取文件，然后将其转换为 PDF。在我的开发环境（Windows）中一切正常，但是当我将它放在服务器（LINUX）上时，当服务器到达代码以读取我的 doc 文件进行转换时，java 抛出此异常：

```
com.sun.star.lang.IllegalArgumentException - Unsupported URL <file:/// 
```

这是代码：

```
fileDocToConvert = new File(GET_REAL_PATH()+repo_Name+slash+fileName); 
```

`fileDocToConvert`然后路径变为：/usr/share/tomcat7/webapps/myapp/repo_name/exemple.doc

当我尝试转换时引发异常：

```
OpenOfficeConnection connection = new SocketOpenOfficeConnection(8100);
connection.connect();
DocumentConverter converter  = new OpenOfficeDocumentConverter(connection); 
//HERE...=> //     converter.convert(docFile, pdfFile); 
```

我在用 ：

**jodConverter 2.2.1、openOffice 3、Java7、Tomcat 7**

我以这种方式启动 openOffice 服务：

```
soffice --headless --accept="socket,host=127.0.0.1,port=8100;urp;" --nofirststartwizard 
```

我无法找到解决此问题的方法。

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T18:56:49.567

我通过安装一些缺少的 OpenOffice 组件（Calc、Writer）解决了这个问题。问题是 OpenOffice 无法理解提供给它的文件的路径。

感谢您的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-09T01:30:14.070

对我来说，问题是 OpenOffice 或其他使用 OpenOffice 组件的程序无法理解提供给它的文件的路径作为保存文件的位置。保存您尝试保存在计算机上其他位置的文件，看看是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-17T10:35:44.790

`java.lang.Exception: Unsupported URL <file:////...`启动来自不同用户的多个 libreoffice 实例并且具有冲突的相同端口设置时收到错误消息。</file:></file:>

# sql - 将带双引号的字符串插入表中

> ID：14660666
> 
> 赞同：12
> 
> 时间：2013-02-02T09:53:37.133
> 
> 标签：sql, oracle

我正在使用 Oracle 10g，但在将带双引号的字符串插入表中时遇到问题。这是我的声明

```
INSERT INTO USERS (ID, NAME, USERNAME) VALUES (NULL, "tes", "hello"); 
```

上面的查询失败并出现错误*"Oracle column not allowed here"*。

如果我将双引号更改为单引号，则如下语句成功。

```
INSERT INTO USERS (ID, NAME, USERNAME) VALUES (NULL, 'tes', 'hello'); 
```

但是，我想在表格中插入双引号。

是否可以在插入语句中的字符串中使用双引号？我不想使用 REPLACE() 因为我的查询是从数组自动生成的。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-02T12:13:04.787

双引号用于表示带[引号的标识符](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements008.htm#SQLRF51129)，即不完全由字母数字字符`$`和组成的对象名称`#`。顺便说一句，建议您不要使用带引号的*标识符*。这就是您原来的 ORA-00984 错误的原因。Oracle 假设它`"tes"`是一列，而不是字符串，并且您不能在 INSERT 语句的 VALUES 子句中使用列名，[如错误消息中所述](http://ora-00984.ora-code.com/)。

为了将*字符串* `"tes"`插入表中，您需要确保[正确引用](http://docs.oracle.com/cd/E11882_01/server.112/e25789/tablecls.htm#CNCPT1821)它：

> 字符文字用单引号括起来，以便数据库可以将它们与模式对象名称区分开来。

任何字符都可以是字符串的一部分，因此要将双引号插入表中，您需要将其括在单引号中。

```
insert into users (id, name, username) 
values (null, '"tes"', '"hello"'); 
```

这是一个要演示的[SQL Fiddle 。](http://www.sqlfiddle.com/#!4/56668/1)

* * *

还有一点需要注意。您声明此查询是自动生成的，这意味着您*可能*容易受到 SQL 注入的攻击。我强烈建议阅读[Guarding Against SQL Injection](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/dynamic.htm#LNPLS645)中的绑定变量。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-02T10:00:17.230

有可能的。在 Oracle 中，您使用单引号引用字符串文字。

如果要插入`test`数据库，则必须将其引用为`'test'`.

```
INSERT INTO USERS (NAME) VALUES ('test'); 
```

如果要插入`"test"`数据库，则必须将其引用为`'"test"'`.

```
INSERT INTO USERS (NAME) VALUES ('"test"'); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-02T10:04:30.630

尝试将值包含在单引号内。

```
INSERT INTO USERS (ID, NAME, USERNAME) VALUES (NULL, '"tes"', '"hello"'); 
```

# c - 为枚举分配内存

> ID：14660667
> 
> 赞同：0
> 
> 时间：2013-02-02T09:53:42.583
> 
> 标签：c

我有一个结构和一个枚举，

```
 struct __value
    {
       int a;
       enum xsd__boolean *ptr;
    } 
    enum xsd__boolean
    {
      __true = 1,
      __false = 0
    }; 
```

这是对枚举进行 malloc 并分配值的正确方法吗，我想将 __true 或 __false 的值分配给 . `*__StructPtr->ptr`__true 的大小是否与 int 的大小相同？

```
struct __value *__StructPtr;
__StructPtr->ptr = (int *)malloc(sizeof(int)); 
*__StructPtr->ptr = __true; 
```

这是正确的方法吗，请通过一些示例为我提供一些见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T09:59:26.953

```
struct __value *__StructPtr;
__StructPtr->ptr = (int *)malloc(sizeof(int)); 
*__StructPtr->ptr = __true; 
```

这是不正确的。您的`__StructPtr`指针未指向分配的内存，因此通过指针分配会导致内存损坏。

正确的方法是这样的：

```
struct __value __StructPtr;
__StructPtr.ptr = malloc(sizeof(*__StructPtr.ptr)); 
*__StructPtr.ptr = __true; 
```

在这种情况下，您在`struct __value`堆栈上分配 a ，然后动态创建 指向的内存`__StructPtr->ptr`。

如果您想动态分配`__StructPtr`并且内存`__StructPtr->ptr`指向两者，请尝试：

```
struct __value *__StructPtr;
__StructPtr = malloc(sizeof(*__StructPtr));
__StructPtr->ptr = malloc(sizeof(*__StructPtr->ptr)); 
*__StructPtr->ptr = __true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T10:01:09.057

首先，当您有两个指针 (`struct __value *__StructPtr`和`enum xsd__boolean *ptr`) 时，您需要分配内存。

对于您的问题，如此[处](https://stackoverflow.com/questions/366017/what-is-the-size-of-an-enum-in-c)所述，枚举的大小是由编译器定义的，因此它不具有 int 的大小，您应该分配枚举大小的内存。

```
struct __value *__StructPtr = malloc(sizeof(struct __value));
__StructPtr->ptr = (int *)malloc(sizeof(enum xsd_boolean)); 
*__StructPtr->ptr = __true; 
```

此外，您可能不应该使用以下划线开头的类型名称，因为根据 C 标准，它们是为系统或编译器保留的。

我不确定你为什么想要一个指向 的指针`enum xsd__boolean`，但如果没有充分的理由，你可能更喜欢根本没有指针，而是将枚举与结构一起分配。然后您的代码将如下所示：

```
struct __value
{
   int a;
   enum xsd__boolean b;
}
...
struct __value *__StructPtr = malloc(sizeof(struct __value));
__StructPtr->ptr = __true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T10:02:11.343

我很难知道从哪里开始......首先，符号开头的两个下划线是为编译器/库实现保留的。如果您正在编写编译器或 C 库，我希望您知道如何分配内存。所以请把`__`你名字开头的那个去掉。

```
struct __value *__StructPtr;
__StructPtr->ptr = (int *)malloc(sizeof(int)); 
*__StructPtr->ptr = __true; 
```

现在，让我们选择这个appart。

1.  你还没有分配任何内存`__StructPtr`- 所以它指向某个未知的地方。
2.  不要强制转换结果`malloc`- 如果将代码编译为 C，则不需要它。如果将其编译为 C++，则使用`new`- 但您将其标记为 C，因此只需删除 `(int *).
3.  您应该使用`sizeof(enum xsd__boolean)`, 因为这是您的枚举的名称。`int`可能大于或小于`enum xsd_boolean`。
4.  Why you allocate memory for a single boolean value in the first place is slightly beyond me - the pointer takes up AT LEAST as much space as a boolean. Don't use a pointer at all in this example.

# android - 点击时 Android Spinner 使应用程序崩溃

> ID：14660668
> 
> 赞同：0
> 
> 时间：2013-02-02T09:53:43.173
> 
> 标签：android, spinner, android-spinner

我在我的应用程序中定义了一个微调器，它在主要活动开始时加载。该活动成功加载，并使用来自另一个类的字符串数组的值加载微调器。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Spinner spinner = (Spinner) findViewById(R.id.spinner);

    AnotherClass ac = new AnotherClass();

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, ac.array);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter);

} 
```

单击微调器时，应用程序崩溃并显示以下跟踪：

```
02-02 15:14:15.947: E/AndroidRuntime(1619): FATAL EXCEPTION: main
02-02 15:14:15.947: E/AndroidRuntime(1619): java.lang.NullPointerException
02-02 15:14:15.947: E/AndroidRuntime(1619):     at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:394)
02-02 15:14:15.947: E/AndroidRuntime(1619):     at android.widget.ArrayAdapter.getDropDownView(ArrayAdapter.java:415)
02-02 15:14:15.947: E/AndroidRuntime(1619):     at android.widget.Spinner$DropDownAdapter.getDropDownView(Spinner.java:569)
02-02 15:14:15.947: E/AndroidRuntime(1619):     at android.widget.Spinner$DropDownAdapter.getView(Spinner.java:565)
02-02 15:14:15.947: E/AndroidRuntime(1619):     at android.widget.Spinner.measureContentWidth(Spinner.java:513)
02-02 15:14:15.947: E/AndroidRuntime(1619):     at android.widget.Spinner$DropdownPopup.show(Spinner.java:739)
02-02 15:14:15.947: E/AndroidRuntime(1619):     at android.widget.Spinner.performClick(Spinner.java:453)
02-02 15:14:15.947: E/AndroidRuntime(1619):     at android.view.View$PerformClick.run(View.java:14105)
02-02 15:14:15.947: E/AndroidRuntime(1619):     at android.os.Handler.handleCallback(Handler.java:605)
02-02 15:14:15.947: E/AndroidRuntime(1619):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-02 15:14:15.947: E/AndroidRuntime(1619):     at android.os.Looper.loop(Looper.java:137)
02-02 15:14:15.947: E/AndroidRuntime(1619):     at android.app.ActivityThread.main(ActivityThread.java:4424)
02-02 15:14:15.947: E/AndroidRuntime(1619):     at java.lang.reflect.Method.invokeNative(Native Method)
02-02 15:14:15.947: E/AndroidRuntime(1619):     at java.lang.reflect.Method.invoke(Method.java:511)
02-02 15:14:15.947: E/AndroidRuntime(1619):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-02 15:14:15.947: E/AndroidRuntime(1619):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-02 15:14:15.947: E/AndroidRuntime(1619):     at dalvik.system.NativeStart.main(Native Method) 
```

关于如何解决这个问题的任何建议？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:13:14.607

我在你的代码中发现了什么。在您的代码中找不到资源。所以你已经检查过了。

```
Spinner spinner = (Spinner) findViewById(R.id.spinner);
// Create an ArrayAdapter using the string array and a default spinner layout
ArrayAdapter<String> adapter = ArrayAdapter.createFromResource(this,
        R.array.planets_array, android.R.layout.simple_spinner_item);
// Specify the layout to use when the list of choices appears
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
// Apply the adapter to the spinner
spinner.setAdapter(adapter); 
```

请参阅更多详细信息[http://developer.android.com/guide/topics/ui/controls/spinner.html](http://developer.android.com/guide/topics/ui/controls/spinner.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T10:19:59.747

这是我出错的地方：

```
array = new String[12];
array[0] = "JanuaryX";
array[1] = "FebruaryX";
array[2] = "March";
array[3] = "April";
array[4] = "May"; 
```

它应该是：

```
array = new String[5]; 
```

# android - 如何在 GlobalVariables 更改时通知活动

> ID：14660671
> 
> 赞同：1
> 
> 时间：2013-02-02T09:54:10.783
> 
> 标签：android, android-activity, notify

我有一个通过 USB 电缆连接到计算机的 android 应用程序。我使用 TCPServer 类来发送消息和收听。例如：

当我发送如下消息时：**request:x**
我得到响应：**response:x:55**

我需要根据收到的回复对我的活动进行更改。目前我通过将活动和活动类对象传递给TCPServer的构造函数暂时解决了这个问题

```
public TCPServer(int portNum, Activity activity, IntroActivity ia) {
    super();
    port = portNum;
    this.activity = activity;
    this.ia = ia;
} 
```

然后在我收到回复后：

```
void updateButton(final int color, final String txt) {
    activity.runOnUiThread(new Runnable() {
         public void run() {
             ia.getConnectionButton().setBackgroundColor(color);
             ia.getConnectionButton().setText(txt);
        }
    });
} 
```

如您所见，这根本没有效果。每当收到相关变量时，我都需要以某种方式通知活动。我为 GlobalVariables 使用了一个类，并在 listen() 之后更改了这些静态变量，但是我在通知活动时遇到了麻烦。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T10:11:25.937

首先，传递 Activity 实例几乎总是不好的做法。这是一个糟糕的时期。

定义一个接口并使用回调让活动知道已收到响应。

```
public interface ResponseReceivedListener {
    void onResponseReceived(int arg1, string arg2); // <- add arguments you want to pass back
} 
```

在您的 TCPServer 类中：

```
ArrayList<ResponseReceivedListener> listeners = new ArrayList<>();

// ...

public void setResponseReceivedListener(ResponseReceivedListener listener) {
    if (!listeners.contains(listener) {
        listeners.add(listener);
    }
}

public void removeResponseReceivedListener(ResponseReceivedListener listener) {
    if (listeners.contains(listener) {
        listeners.remove(listener);
    }
} 
```

当您收到回复时：

```
for (ResponseReceivedListener listener : listeners) {
   listener.onResponseReceived(arg1, arg2);
} 
```

在您的活动中：

```
public class MainActivity extends Activity implements ResponseReceivedListener {

    // ...

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // ...

        tcpServer.setResponseReceivedListener(this);

        // ...
    }

    public void onResponseReceived(int arg1, string arg2) {
        // do whatever you need to do
    }

    // ...
} 
```

全部凭记忆，如有错别字请见谅。

这种方法将类解耦。TCP 服务器不知道这些活动。它只是回调任何注册的监听器。这些听众可能是活动，他们可能是服务。它们可能是 MySparklyUnicorn 的实例。服务器既不知道也不关心。它只是说“如果有人感兴趣，我已经收到了回复，这是详细信息”。

# python - 在文件中搜索一个数字并在程序运行时替换该数字

> ID：14660672
> 
> 赞同：0
> 
> 时间：2013-02-02T09:54:15.087
> 
> 标签：python, python-2.7

我是 python 的初学者，我被困在给我的任务中。我有一个名为 file.h 的文件，它有一个特定的信息和一个介于类似这样的东西之间的数字。

```
Working copy:C:/tmp
Repository root:svn:/localhost
VERSION_REV 8797
Schedule:normal
Date:13/12/2010 
```

我需要编写一个 python 代码，以便每当我运行它时，它都应该搜索数字 8797 并将其替换为存储在我的变量中的数字，即 x=8798。我尝试如下，但没有成功。

```
fout = open("path to\file\file.h","r+")
for line in open("path to\file\file.h"):
    line = line.replace("VERSION_REV %i","x")
    fout.write(line)
fout.close() 
```

对不起，我忘了说我使用的是windows7系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:13:58.713

试试这个...

```
import re

data = open("path to\file\file.h","r+").read()
re.sub(r'VERSION_REV [0-9]+', 'VERSION_REV ' + newstr, data)
open("path to\file\file.h","w").write(data) 
```

无需重新

```
fout = open("path to\file\file.h","r+")
for line in open("path to\file\file.h"):
    if "VERSION_REV" in line:
        line = "VERSION_REV " + newstr
    fout.write(line)
fout.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T10:19:00.087

您可以使用[`re.sub`](http://docs.python.org/2/library/re.html#re.sub)

```
import re
.....
line = re.sub(r'(?<=VERSION_REV )\d+', x, line) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:13:00.757

查看下面的代码..它确实对我有用。

```
fout=open("c:\path to file\file.h", "r+")
    for line in open("c:\path to file\file.h"):
        if "VERSION_REV" in line:
            line = "VERSION_REV " + "" + x + '\n' #where 'x' has new version _rev 8798
        fout.write(line)
    fout.close() 
```

# cakephp-1.2 - 如何访问 cakephp 模型中的登录用户？

> ID：14660681
> 
> 赞同：0
> 
> 时间：2013-02-02T09:54:59.093
> 
> 标签：cakephp-1.2

我已经将其粘贴到我的应用模型中

```
 function getCurrentUser() {
       // for CakePHP 1.x:
       App::import('Component','Session');
       $Session = new SessionComponent();
       $user = $Session->read('Auth.User');
       return $user;
    } 
```

并将其粘贴到我的模型中

```
 $user = $this->getCurrentUser();
   $user_id = $user['id']; 
```

这样我就可以像这样在我的查询中使用 $user_id ..

```
 "SELECT * FROM LOGS WHERE user_id=$user_id" 
```

但我总是收到这个错误

```
 parse error, expecting `T_FUNCTION' 
```

# php - 验证 PayPal IPN 的证书链

> ID：14660686
> 
> 赞同：0
> 
> 时间：2013-02-02T09:55:41.097
> 
> 标签：php, paypal, paypal-ipn

我正在尝试集成[PHP-PayPal-IPN （顺便说一句，很棒的库，您可以在](https://github.com/Quixotix/PHP-PayPal-IPN)[此处](http://www.micahcarrick.com/paypal-ipn-with-php.html)查看有关使用情况的博客文章）。

由于安全性在这里至关重要，因此我检查了源代码。我发现它没有明显的问题，但我还想检查与库捆绑的 PayPal 证书链：[https ://github.com/Quixotix/PHP-PayPal-IPN/tree/master/cert](https://github.com/Quixotix/PHP-PayPal-IPN/tree/master/cert)

如何检查证书链是否正确？（*正确*==“它只允许来自 PayPal 的连接，而不能来自其他地方”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T22:52:38.263

我认为这不是重点。SSL 只允许您在安全服务器上设置您的 IPN 脚本，以便对数据进行加密。据我所知，它不会阻止对不是来自 PayPal 服务器的脚本的点击。

这就是验证/未验证检查发挥作用的地方。如果数据来自 PayPal 以外的任何地方，它将落入未经验证的代码部分。您可以根据需要选择处理这些。完全忽略它们，将它们记录为无效但保留它们以供记录，向自己发送电子邮件通知等。

# c# - 在用户定义的类中使用 C# using 关键字

> ID：14660692
> 
> 赞同：-3
> 
> 时间：2013-02-02T09:56:05.503
> 
> 标签：c#, using-statement

大家都知道在清理非托管资源时使用using关键字。

如果类实现了`IDisposable`，那么我们可以将`using`关键字与该类的对象一起使用。但是，如果我想将`using`关键字与我自己的类的对象一起使用，那么我该如何使用它。

如果我必须`IDisposable`在我自己的类中实现，那么我还必须在我的类中为其`Dispose()`方法编写代码。`using`那么当我在方法中编写自己的代码时，在这里使用关键字就没有意义了`Dispose()`。那么我如何在用户定义的类型（如类和结构）中使用 using。

请用一些例子来解释。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T09:57:42.140

关键字的重点`using`是它为您*调用* `Dispose()`您的类的实例，因此您不必在使用完它`myDisposableObject.Dispose()`时自己编写。它不能帮助您*编写*该方法——您仍然必须自己编写它来告诉框架您希望如何准确地处置非托管资源。

我不确定您正在寻找什么样的示例，因为您清楚地知道如何实现`IDisposable`接口及其`Dispose()`方法。我在这里只能说，如果您没有任何非托管资源要处置（或自己的成员`IDisposable`），那么不要实施`IDisposable`，也不要使用`using`. 该关键字仅保留用于方便地使用具有非托管资源的东西，*否则*这些资源需要手动清理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T09:59:26.747

的重点`using`不是要让你从实施中解脱出来`IDisposable`。

目的`using`是让您确保当流正常或由于异常退出块时，对象将被正确处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T10:00:52.317

该`using`语句`Dispose`在块终止时调用使用对象的方法。请参阅[this](https://stackoverflow.com/a/14637152/836432)以了解如何编译 using 块。

但是，实现`Dipose`方法是您的责任，您必须在其中释放对象占用的资源。

# ruby-on-rails - 在 Rails 中复制记录并使用其关联填充新表单

> ID：14660704
> 
> 赞同：2
> 
> 时间：2013-02-02T09:57:30.263
> 
> 标签：ruby-on-rails, associations, clone, rails-activerecord

我需要在 Rails 中复制一条记录，然后在创建记录之前将其呈现为新形式。

一切都遵循[这个](https://stackoverflow.com/a/12001940/1602464)有用的答案，但我还需要用 has_many_belongs_to_many 关联填充记录

方法 dup() 让我复制记录中的所有内容，但它的关联，我还看到有一个 gem [Amoeba](https://rubygems.org/gems/amoeba)可以进行非常通用的深度克隆，但我想知道是否有一个不使用 gem 的更简单的解决方案

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T10:29:29.727

Rails 没有内置的深度克隆。在 Rails 2.3.x 中，您`clone`可以克隆活动记录属性。在 Rails >3 中，他们将此方法重命名为`dup`，现在缺少它的文档。但是，它与以下内容相同`clone`，其文档说明如下。

> 请注意，这是一个“浅”克隆：它仅复制对象的属性，而不是其关联。“深度”克隆的范围是特定于应用程序的，因此留给应用程序根据需要实现。

因此，如果您想克隆关联，则只能靠自己。`replicate`在我的项目中，我使用了一种为此目的而调用的方法。

```
class User < ActiveRecord::Base
  # ...
  def replicate
    replica = dup

    comments.each do |comment|
      replica.comments << comment.dup
    end

    replica
  end
end 
```

沿着这些思路。

# wpf - WPF 图像大小调整中的内存泄漏

> ID：14660706
> 
> 赞同：2
> 
> 时间：2013-02-02T09:57:49.450
> 
> 标签：wpf, asp.net-mvc, memory-leaks, image-resizing

我有以下图像调整大小并保存代码。

此代码在 ASP.NET MVC 项目的不同线程中执行。作为

```
using (FileStream fs = new FileStream(file.File.FullName, 
                FileMode.Open, FileAccess.Read, FileShare.Read))
{
    BitmapDecoder decoder = BitmapDecoder.Create(fs, 
          BitmapCreateOptions.PreservePixelFormat, BitmapCacheOption.None);

    var img = decoder.Frames[0];
    img.Freeze();
    double width = Size;
    double height = Size;

    if (img.PixelWidth > img.PixelHeight)
    {
        height = (int)(((double)img.PixelHeight / (double)img.PixelWidth) 
           * (double)width);
    }
    else
    {
        width = (int)(((double)img.PixelWidth / (double)img.PixelHeight) 
           * (double)height);
    }

    var target = new TransformedBitmap(img,
        new ScaleTransform(width / (double)img.PixelWidth, height 
                / (double)img.PixelHeight, 0, 0));

    RenderOptions.SetBitmapScalingMode(target, BitmapScalingMode.HighQuality);

    var t = BitmapFrame.Create(target);
    RenderOptions.SetBitmapScalingMode(t, BitmapScalingMode.HighQuality);

    target.Freeze();
    t.Freeze();
    JpegBitmapEncoder enc = new JpegBitmapEncoder();
    enc.Frames.Add(t);
    enc.QualityLevel = 90;
    using (FileStream fsout = saved.File.OpenWrite())
    {
        enc.Save(fsout);
    }
} 
```

我已经使用了每个 IDisposable 对象，WPF 对象不实现 IDisposable 所以我不能手动处理它们。

我在某处读到调用 Freeze 将防止内存泄漏，但即使在此之后，也没有任何改善。此进程的内存使用量不断增加。

我需要的是，当上传图像时，它必须以 4 种不同的分辨率调整大小，150x150、350x350、700x700 和 1000x1000，这些分辨率中的每一个都是使用 Parallel.ForEach 方法并行调用的。

我的网站的其余部分只是使用实体框架进行简单的数据库访问，我怀疑这会导致任何高达 3GB 内存使用的内存泄漏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T23:34:16.970

我尝试将它放在一个独立测试程序中的循环中，并使用显式 GC.Collect() 跟踪该函数。至少在 .NET 4.5 上，这表明这段代码没有泄漏——在多次调用后内存保持稳定。

我认为您需要查看代码中的其他位置。您应该尝试使用分析 > 启动性能向导... 对其进行分析，然后选择 .NET 内存分配并查看正在使用内存的内容。

为了好玩，我还尝试了 .NET 3.5，也没有遇到泄漏。

# azure - 在这种情况下没有响应

> ID：14660707
> 
> 赞同：1
> 
> 时间：2013-02-02T09:57:50.833
> 
> 标签：azure

这是我在运行从 Asp.net 迁移到 Windows Azure Cloud 的 Web 项目时遇到的异常。如果我尝试运行 ASP.net 应用程序，那很好，但是在迁移到 Windows Azure Cloud 之后，我得到了以下异常。我没有找到解决方案的线索，请有人做必要的..

```
**Exception:**
Server.GetLastError().GetBaseException()
{"Response is not available in this context."}
    [System.Web.HttpException]: {"Response is not available in this context."}
    Data: {System.Collections.ListDictionaryInternal}
    HelpLink: null
    InnerException: null
    Message: "Response is not available in this context."
    Source: "System.Web"

    StackTrace: "   at System.Web.UI.Page.get_Response()\r\n   at Writehome_aspxToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , ClassDataContract )\r\n   at System.Runtime.Serialization.ClassDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeAndVerifyType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, Boolean verifyKnownType, RuntimeTypeHandle declaredTypeHandle, Type declaredType)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithXsiType(XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle objectTypeHandle, Type objectType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle, Type declare
dType)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContextComplex.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)\r\n   at WritePlaceHolderToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , ClassDataContract )\r\n   at System.Runtime.Serialization.ClassDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.S
erializeAndVerifyType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, Boolean verifyKnownType, RuntimeTypeHandle declaredTypeHandle, Type declaredType)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithXsiType(XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle objectTypeHandle, Type objectType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle, Type declaredType)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContextComplex.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)\r\n   at WriteArrayOfControlToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , Collection
DataContract )\r\n   at System.Runtime.Serialization.CollectionDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeAndVerifyType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, Boolean verifyKnownType, RuntimeTypeHandle declaredTypeHandle, Type declaredType)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithXsiType(XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle objectTypeHandle, Type objectType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle, Type declaredType)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDec
laredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContextComplex.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)\r\n   at WriteArrayOfanyTypeToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , CollectionDataContract )\r\n   at System.Runtime.Serialization.CollectionDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithoutXsiType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)\r\n   a
t System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContextComplex.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)\r\n   at WriteSerializableSessionStateStoreDataToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , ClassDataContract )\r\n   at System.Runtime.Serialization.ClassDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)\r\n   at System.Runtime.Serialization.NetDataContractSerializer.InternalWriteObjectContent(XmlWriterDelegator writer, Object graph, DataContract contract, Hashtable surrogateDataContracts)\r\n   at System.Runtime.Serialization.NetDataContractSerializer.InternalWr
iteObject(XmlWriterDelegator writer, Object graph)\r\n   at System.Runtime.Serialization.XmlObjectSerializer.InternalWriteObject(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)\r\n   at System.Runtime.Serialization.XmlObjectSerializer.WriteObjectHandleExceptions(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)\r\n   at System.Runtime.Serialization.XmlObjectSerializer.WriteObject(XmlDictionaryWriter writer, Object graph)\r\n   at Microsoft.ApplicationServer.Caching.NetDataContractCacheObjectSerializer.Serialize(Stream stream, Object value)\r\n   at Microsoft.ApplicationServer.Caching.DataCacheObjectSerializationProvider.SerializeUserObject(Object userObject, Boolean isCompressionEnabled, ValueFlagsVersion flagsType)\r\n   at Microsoft.ApplicationServer.Caching.SocketClientProtocol.SerializeValue(Object obj)\r\n   at Microsoft.ApplicationServer.Caching.SocketClientProtocol.PutAndUnlock(String key, Object value, DataCacheLockHandle lockHandle,
 TimeSpan timeout, DataCacheTag[] tags, String region, IMonitoringListener listener)\r\n   at Microsoft.ApplicationServer.Caching.DataCache.InternalPutAndUnlock(String key, Object value, DataCacheLockHandle lockHandle, TimeSpan timeout, DataCacheTag[] tags, String region, IMonitoringListener listener)\r\n   at Microsoft.ApplicationServer.Caching.DataCache.<>c__DisplayClass9c.<PutAndUnlock>b__9b()\r\n   at Microsoft.ApplicationServer.Caching.MonitoringListenerFactory.EmptyListener.Microsoft.ApplicationServer.Caching.IMonitoringListener.Listen[TResult](Func`1 innerDelegate)\r\n   at Microsoft.ApplicationServer.Caching.DataCache.PutAndUnlock(String key, Object value, DataCacheLockHandle lockHandle, TimeSpan timeout)\r\n   at Microsoft.Web.DistributedCache.DataCacheWrapper.PutAndUnlock(String key, Object value, DataCacheLockHandle lockHandle, TimeSpan timeout)\r\n   at Microsoft.Web.DistributedCache.DataCacheForwarderBase.<>c__DisplayClass1c.<PutAndUnlock>b__1b()\r\n   at Microsoft.Web.DistributedCache.DataCacheFo
rwarderBase.<>c__DisplayClass31`1.<PerformCacheOperation>b__30()\r\n   at Microsoft.Web.DistributedCache.DataCacheRetryWrapper.PerformCacheOperation(Action action)\r\n   at Microsoft.Web.DistributedCache.DataCacheForwarderBase.PerformCacheOperation[TResult](Func`1 func)\r\n   at Microsoft.Web.DistributedCache.DataCacheForwarderBase.PutAndUnlock(String key, Object value, DataCacheLockHandle lockHandle, TimeSpan timeout)\r\n   at Microsoft.Web.DistributedCache.BlobBasedSessionStoreProvider.SetAndReleaseItemExclusive(HttpContextBase context, String id, SessionStateStoreData item, Object lockId, Boolean newItem)\r\n   at Microsoft.Web.DistributedCache.DistributedCacheSessionStateStoreProvider.SetAndReleaseItemExclusive(HttpContext context, String id, SessionStateStoreData item, Object lockId, Boolean newItem)\r\n   at System.Web.SessionState.SessionStateModule.OnReleaseState(Object source, EventArgs eventArgs)\r\n   at System.Web.HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Exec
ute()\r\n   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)"
    TargetSite: {System.Web.HttpResponse get_Response()} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T19:31:12.807

如果您尝试执行 Azure 的操作，例如访问`Application_Start`方法中的 blob，就会发生这种情况。

这是因为`HttpContext.Current.Response`可访问。Azure 使用 Response 对象进行日志记录。在任何情况下，如果您需要访问 Web 应用程序中的 blob 或执行任何其他 Azure 内容，并且即使没有 Response 对象也想要执行此操作，就像在`Application_Start`方法中一样。您只需设置`HttpContext.Current to null`，但以一种聪明的方式。

**Application_Start 如下**

```
protected void Application_Start(object sender, EventArgs e)
{
    CloudStorageAccount.SetConfigurationSettingPublisher((configName, configSetter) =>
    {
        configSetter(RoleEnvironment.GetConfigurationSettingValue(configName));
    });

    using (new AzureContext())
    {
        CloudStorageAccount storageAccount = CloudStorageAccount.FromConfigurationSetting("BlobConnectionString");

        CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();

        CloudBlobContainer container = blobClient.GetContainerReference("mycontainer");
        container.CreateIfNotExist();
        container.FetchAttributes();
    }
} 
```

**AzureContext 如下：**

```
public class AzureContext : IDisposable
{
    HttpContext _oldHttpContext;
    bool _restoreOldHttpContext = false;

    public AzureContext(bool forceSettingContextToNull = false)
    {
        if (forceSettingContextToNull)
        {
            _oldHttpContext = HttpContext.Current;
            HttpContext.Current = null;
            _restoreOldHttpContext = true;
        }
        else
        {
            try
            {
                HttpResponse response = HttpContext.Current.Response;
            }
            catch (HttpException)
            {
                _oldHttpContext = HttpContext.Current;
                HttpContext.Current = null;
                _restoreOldHttpContext = true;
            }
        }
    }

    public void Dispose(bool disposing)
    {
        if (disposing)
        {
            if (_restoreOldHttpContext)
            {
                HttpContext.Current = _oldHttpContext;
            }
        }
    }

    public void Dispose()
    {
        Dispose(true);
    }

    ~AzureContext()
    {
        Dispose(false);
    }
} 
```

有关更多信息，请查看[**Azure 和 Response 在此上下文中不可用**](http://toolheaven.net/post/Azure-and-Response-is-not-available-in-this-context.aspx)

我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:09:07.960

我因为这个问题而受苦......你可以通过应用这个补丁来解决这个问题......

[http://support.microsoft.com/kb/2468871](http://support.microsoft.com/kb/2468871)

我已经在我的本地环境和云环境中应用了这个补丁（使用启动角色）。但是您现在可能不需要修补云环境，因为它们可能会更新。如果云中仍然存在问题，您可以联系 Azure 支持（印度：1-(866) 676-6546），他们将帮助您应用补丁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T07:07:31.677

感谢您的所有帮助，我终于找到了问题的原因。出现问题是因为我试图将 System.Web.UI.WebControls 存储到会话中。

由于并非所有 System.Web.UI.WebControls 都是可序列化的，因此请避免将 WebControls 存储到会话中。

快乐的编码..

# android - 无法从 GPS 获取位置？

> ID：14660708
> 
> 赞同：0
> 
> 时间：2013-02-02T09:57:55.377
> 
> 标签：android, gps, location, provider

我正在尝试从 GPS 获取位置，但无法获取。这是因为该位置是由网络提供商访问的。

如果我评论网络提供商的所有代码，则 GPS 位置返回 null。

我已经尝试了很多，但无法解决这个问题。

如果有人可以提供帮助，那对我来说将是很大的帮助。

我正在使用此链接作为参考..

[https://stackoverflow.com/a/3145655/1395259](https://stackoverflow.com/a/3145655/1395259)

这是我的代码：

**MainActivity.java**

```
package com.example.locationsimple;

import com.example.locationsimple.MyLocation.LocationResult;

import android.location.Location;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {

    TextView textView;
    LocationResult locationResult;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        textView = (TextView) findViewById(R.id.textViewLocation);
        Button button = (Button) findViewById(R.id.button);
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                locationResult = new LocationResult(){

                    @Override
                    public void gotLocation(Location location) {

                        while(true)
                        {
                            Log.i("Log", "Inside while loop ");

                            if(location != null)
                            {
                                Log.i("Log", "Here the location is not null");
                                if(location.getLatitude() !=0.0 || location.getLongitude() != 0.0)
                                {
                                    if(location.getAccuracy() < 100)
                                    {
                                        Log.i("Log", "Inside while loop BREAKS");

                                        try
                                        {
                                            String loc = "Lattitude: "+location.getLatitude()+"  longi  "+location.getLongitude()+"  Accur "+location.getAccuracy()+"  Time "+location.getTime();
                                            Log.i("Log",loc);
                                            Toast.makeText(MainActivity.this, ""+loc, Toast.LENGTH_LONG).show();
                                            textView.setText(loc);
                                        }
                                        catch (Exception e) {
                                            // TODO: handle exception
                                            e.printStackTrace();
                                        }

                                        break;
                                    }
                                    else
                                    {
                                        Log.i("Log", "no Accuracy");
                                        Log.i("Log", "latti"+location.getLatitude()+"  Longi "+location.getLongitude()+"  Accur "+location.getAccuracy()+location.getProvider());                                       
                                        break;
                                    }
                                }
                            }
                            else
                            {
                                Log.i("Log", "Here got the location is null");
                                break;
                            }
                        }
                        //textView.setText(location.getLatitude()+"::"+location.getLongitude()+"::"+location.getAccuracy()+" Provider  "+location.getProvider());                                               
                    }
                };
                MyLocation myLocation = new MyLocation();
                myLocation.getLocation(MainActivity.this, locationResult);              
                }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

**我的位置.java**

```
package com.example.locationsimple;

import java.util.Timer;
import java.util.TimerTask;

import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.provider.Settings;

public class MyLocation {
    Timer timer1;
    LocationManager lm;
    LocationResult locationResult;
    boolean gps_enabled=false;
    boolean network_enabled=false;
    Context mContext;

    public boolean getLocation(Context context, LocationResult result)
    {
        mContext = context;
        //I use LocationResult callback class to pass location value from MyLocation to user code.
        locationResult=result;
        if(lm==null)
            lm = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
            /*Criteria criteria = new Criteria();
            criteria.setAccuracy(Criteria.ACCURACY_HIGH);  
            lm.getBestProvider(criteria, true);*/
        //exceptions will be thrown if provider is not permitted.
        try
            {
                gps_enabled=lm.isProviderEnabled(LocationManager.GPS_PROVIDER);
            }
        catch(Exception ex)
        {
            ex.printStackTrace();
        }
        try{network_enabled=lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER);}catch(Exception ex){}

        //don't start listeners if no provider is enabled
        if(!gps_enabled || !network_enabled)
        {
            showSettingsAlert();
            return false;
        }           
        if(gps_enabled)
            lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListenerGps);
        if(network_enabled)
            lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListenerNetwork);
        timer1=new Timer();
        timer1.schedule(new GetLastLocation(), 30000);
        return true;
    }
    public void showSettingsAlert(){

        AlertDialog.Builder alertDialog = new AlertDialog.Builder(mContext);

        alertDialog.setCancelable(false);
        // Setting Dialog Title
        alertDialog.setTitle("GPS Is Not Enabled");

        // Setting Dialog Message
        alertDialog.setMessage("Please Enabled Wireless Network And GPS");

        // On pressing Settings button
        alertDialog.setNeutralButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,int which) {
                dialog.cancel();
                Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                mContext.startActivity(intent);
            }
        });

        // Showing Alert Message
        alertDialog.show();
    }

    LocationListener locationListenerGps = new LocationListener() {
        public void onLocationChanged(Location location) {
            timer1.cancel();
            locationResult.gotLocation(location);
            lm.removeUpdates(this);
            lm.removeUpdates(locationListenerNetwork);
        }
        public void onProviderDisabled(String provider) {}
        public void onProviderEnabled(String provider) {}
        public void onStatusChanged(String provider, int status, Bundle extras) {}
    };

    LocationListener locationListenerNetwork = new LocationListener() {
        public void onLocationChanged(Location location) {
            timer1.cancel();
            locationResult.gotLocation(location);
            lm.removeUpdates(this);
            lm.removeUpdates(locationListenerGps);
        }
        public void onProviderDisabled(String provider) {}
        public void onProviderEnabled(String provider) {}
        public void onStatusChanged(String provider, int status, Bundle extras) {}
    };

    class GetLastLocation extends TimerTask {
        @Override
        public void run() {
             lm.removeUpdates(locationListenerGps);
           //  lm.removeUpdates(locationListenerNetwork);

             Location net_loc=null;
             Location gps_loc=null;
             if(gps_enabled)
                 gps_loc=lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
             if(network_enabled)
                 net_loc=lm.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

             //if there are both values use the latest one
             if(gps_loc!=null && net_loc!=null){
                 if(gps_loc.getTime() > net_loc.getTime())
                     locationResult.gotLocation(gps_loc);
                 else
                     locationResult.gotLocation(net_loc);
                 return;
             }

             if(gps_loc!=null){
                 locationResult.gotLocation(gps_loc);
                 return;
             }
              if(net_loc!=null){
                 locationResult.gotLocation(net_loc);
                 return;
             }
             locationResult.gotLocation(null);
        }
    }

    public static abstract class LocationResult{
        public abstract void gotLocation(Location location);
    }
} 
```

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:56:29.663

我刚刚在我的设备上测试了上面的代码，一切正常，不知道你的问题是什么。

**重要笔记：**

*   请确保您有权访问清单文件中的 GPS 位置

`<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>`

*   该代码可能无法在模拟器上正常运行，请在实际设备上进行更好的测试。如果您没有访问权限，请查看**DMMS Emulator Control**以生成位置数据

**编辑：**

您需要提交与网络提供商相关的位置数据。

并且还从您的`LocationResult`对象中删除 textView.setText 因为 textView 为空。所以修复：

```
getLocation(Location location) {
.........
String loc = "Lattitude: "+location.getLatitude()+"  longi  "+location.getLongitude()+"  Accur "+location.getAccuracy()+"  Time "+location.getTime() +" "+location.getProvider();

Log.i("Log",loc);
Toast.makeText(MainActivity.this, loc, Toast.LENGTH_LONG).show();
} 
```

`MyLocation`并从您的班级中注释掉网络代码

```
 // if(network_enabled) 
```

// lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListenerNetwork);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T10:05:03.150

您可以使用以下服务获取 gps。只需在开始时调用此服务。

公共类 MyService 扩展服务 {

```
LocationManager locationManager;
@Override
public void onCreate() {

    //

        // TODO Auto-generated method stub

        String context = Context.LOCATION_SERVICE;
        locationManager = (LocationManager) getSystemService(context);  

        /** Criteria for selecting best provider */

        Criteria criteria = new Criteria();
        criteria.setAccuracy(Criteria.ACCURACY_FINE);
        criteria.setAltitudeRequired(false);
        criteria.setBearingRequired(false);
        criteria.setCostAllowed(true);
        criteria.setPowerRequirement(Criteria.POWER_LOW);

        /** Passing criteria and select only enabled provider */
        String provider = locationManager.getBestProvider(criteria, true);
        Location location = locationManager.getLastKnownLocation(provider);
        /** calls the Location Listner */
        locationManager.requestLocationUpdates(provider, 500, 0,locationListener);
    }

    private final LocationListener locationListener = new LocationListener() {
        public void onLocationChanged(Location location) {
            updateWithNewLocation(location);
        }

        public void onProviderDisabled(String provider) {
            updateWithNewLocation(null);
        }

        public void onProviderEnabled(String provider) {
        }

        public void onStatusChanged(String provider, int status, Bundle extras) {
        }
    };

    private void updateWithNewLocation(Location location) 
    {

        System.out.println("+++++++++++++++++++SASI+++++++++++++++++++++++++++++++++++++++++");
        String latLongString, addressString = null;
        double lat = 0, lng = 0;
        if (location != null) {
            lat = location.getLatitude();
            lng = location.getLongitude();
            //latLongString = "Lat:" + lat + "\nLong: " + lng;

            /** Getting Address */

        } else {
            latLongString = "No location found";
            addressString = "No location found";
        }
        //System.out.println("@@@@@@@@@@@" + addressString + lat + lng);
        SearchDeals.latPoint=location.getLatitude();
        SearchDeals.lngPoint=location.getLongitude();

        Deals_route.sourcelati=location.getLatitude();
        Deals_route.sourcelong=location.getLongitude();

    }

@Override
public void onDestroy() {

    super.onDestroy();

    //

    //Toast.makeText(this, "GPS Service Destroyed", Toast.LENGTH_LONG).show();

    locationManager.removeUpdates(locationListener);

    System.out.println("@@@@@@@@@@@ inside ONDESTROY GPS listener removed");

}

@Override
public int onStartCommand(Intent intent, int flags, int startId)

{

    //

    Log.v("StartServiceAtBoot", "StartAtBootService -- onStartCommand()");

    //Toast.makeText(this, "Service started", Toast.LENGTH_LONG).show();

    // We want this service to continue running until it is explicitly

    // stopped, so return sticky.

    return START_STICKY;

}  

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
} 
```

}

# jquery - 使用 jQuery 从 XML 中查找后代

> ID：14660710
> 
> 赞同：4
> 
> 时间：2013-02-02T09:58:27.577
> 
> 标签：jquery, xml, ajax

我有一个 XML 文件：

```
 <?xml version="1.0" encoding="ISO-8859-1"?>
<childrens>
 <child id="1" value="Root Catalog" parent_id="0">
  <child id="2" value="Apparel" parent_id="1">
    <child id="3" value="Accessories" parent_id="2">
        <child id="4" value="Handbags" parent_id="3">
            <child id="5" value="Jewelry" parent_id="4"/>
            <child id="6" value="test1" parent_id="4"/>
            <child id="7" value="test2" parent_id="4"/>
            <child id="15" value="test3" parent_id="4"/>
        </child>
    </child>
  </child>
  <child id="8" value="test_A" parent_id="1">
    <child id="9" value="test_B" parent_id="8">
        <child id="10" value="test_C" parent_id="9">
            <child id="11" value="test_D" parent_id="10"/>
        </child>
    </child>
  </child>
  .
  .
  .
  .
  .
  .
  <child id="1111" value="test" parent_id="1">
    <child id="1112" value="test1" parent_id="1111">
        <child id="1113" value="test12" parent_id="1112">
            <child id="1114" value="test123" parent_id="1113"/>
            <child id="1115" value="test1234" parent_id="1114"/>
        </child>
    </child>
    <child id="1116" value="test12345" parent_id="1111"/>
  </child>  
 </child>
</childrens> 
```

我想找到特定节点的所有*后代*（所有子节点直到叶节点）。例如，这里`test`的后代是`test1,test12,test123,test1234 & test12345`

如果我找到 的后代`test1`，那么结果将是`test12,test123,test1234`。

```
$(document).ready(function(){
$.ajax({
    type: "GET",
    url: "test.xml",
    dataType: "xml",
    success: function(xml) {
        $(xml).find('child[value="test"]').children().each(function(){
            var i = $(this).attr('value');
            alert(i);

        });
    }
});
}); 
```

jQuery 的使用`.children()`只给了我该节点的直接子节点。它不会给它的孙子孙女。例如，因为`test`它只会发出警报`test1 & test12345`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T10:05:15.633

您可以通过进行预购遍历来实现它。它是一个递归函数，它将按照您想要的顺序处理节点。请参阅[如何在 jQuery 中编写简单的前序 DOM 树遍历算法？](https://stackoverflow.com/questions/2082550/how-to-write-a-simple-preorder-dom-tree-traversal-algorithm-in-jquery)

考虑到@k-prime 答案，您的示例将是：

```
$(xml).find('child[value="test"]').children().each (function processNodes()
{
    alert($(this).attr('value'));
    if (this.nodeType != 3)
        $(this).children().each(processNodes);
}); 
```

[提琴手](http://jsfiddle.net/97qx4/)

作为一个单独的函数：

```
function recursiveDescendantsValues(node, arr) {
    node.children().each(function () {
        arr.push($(this).attr('value'));
        if ($(this).nodeType != 3) {
            recursiveDescendantsValues($(this), arr);
        }
    });
}
jQuery.fn.descendantsValues = function() {
    var arr = []
    recursiveDescendantsValues($(this), arr);
    return arr;
}; 
```

[提琴手](http://jsfiddle.net/zzGdc/2/)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T12:13:26.927

以更外行和原始的方式，您可以这样做：

 `````
 function iterative_logger(root, t) {
        if (t > 0) console.log(root.attr('value'));
        //console.log("Traversing : " + root.attr('value')+"\n");
        var root_children = $(root).children();
        //console.log("Found " + root_children.length + " children\n");
        if (root_children.length > 0)
            root_children.each(function () {
                t++;
                //console.log("\t" + $(this).attr('value'));
                iterative_logger($(this), t);
            });
    }
    $(document).ready(function () {
        $.ajax({
            type: "GET",
            url: "test.xml",
            dataType: "xml",
            success: function (xml) {
                iterative_logger($(xml).find('child[value="test"]'), 0);
            }
        });
    }); 
````  `这递归地计算给定节点“根”的所有后代节点。``

# iphone - 如何按距离升序对 NSmutable 数组进行排序？

> ID：14660714
> 
> 赞同：0
> 
> 时间：2013-02-02T09:59:09.847
> 
> 标签：iphone, ios, ipad

我有一个 nsmutable 朋友列表数组。每个人都有他们的 lat&longs。我想用他们与 autor 的距离的升序对该数组进行排序。我发现了与 autor 的朋友的距离值，现在我想对它进行排序排列在他们距离的上升中。这就是我这样做的方式，`

```
for(int i=0;i<[searchfriendarray count];i++)
        {
            NSDictionary *payload =[searchfriendarray objectAtIndex:i];
            NSLog(@"%@",payload);
             NSString *memberid = [payload objectForKey:@"userID"];
             CLLocation *locationofauthor;
            CLLocation *locationoffriends;
           if([memberid isEqualToString:uidstr])
            {

               NSString *latofauthor = [payload objectForKey:@"latitude"]; 
               NSString *longofauthor=[payload objectForKey:@"longitude"];
              double latofauthordouble = [latofauthor doubleValue];
             double longofauthordouble=[longofauthor doubleValue];;
            locationofauthor = [[CLLocation alloc] initWithLatitude:latofauthordouble  longitude:longofauthordouble];

            }
            else
            {
             NSString *latoffriends = [payload objectForKey:@"latitude"]; 
             NSString *longoffriends=[payload objectForKey:@"longitude"];
               double latoffriendsdouble = [latoffriends doubleValue];
                double longoffriendsdouble=[longoffriends doubleValue];;
               locationoffriends = [[CLLocation alloc] initWithLatitude:latoffriendsdouble  longitude:longoffriendsdouble];

              }
             CLLocationDistance distance = [locationofauthor distanceFromLocation:locationoffriends];

} 
```

`任何人都可以帮助我按照距离的升序对数组进行排序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T10:24:16.393

您可以提供 2 个对象之间的比较代码块。然后 NSArray 将根据需要多次调用您的块来对数组进行排序。

```
NSArray sortedArray = [yourUnsortedArray sortedArrayUsingComparator:^NSComparisonResult(id         obj1, id obj2) {
       /*some code to compare obj1 to obj2\. 
       for instance, compare the distances of obj1 to obj2.
       Then return an  NSComparisonResult 
       (NSOrderedAscending, NSOrderedSame, NSOrderedDescending);*/
    }]; 
```

ps 再次获取一个可变数组，只需调用`mutableCopy`返回的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T15:59:46.450

```
NSSortDescriptor * descLastname = [[NSSortDescriptor alloc] initWithKey:@"active" ascending:YES];
[livevideoparsingarray sortUsingDescriptors:[NSArray arrayWithObjects:descLastname, nil]];
 [descLastname release];
videoparsing = [livevideoparsingarray copy]; 
```

livevideoparsingarray 是我的数组，我有排序 & active 是我的标签，它在我有排序的数组中。你随着你的要求而改变。

# javascript - Jquery 鼠标悬停精灵

> ID：14660716
> 
> 赞同：-1
> 
> 时间：2013-02-02T09:59:18.297
> 
> 标签：javascript, jquery, html, css

嗨，如何编写可用于评价价格评级的 jquery 代码？下面是图片的截图 ![在此处输入图像描述](../Images/055253ece0c1246120b3cb0c07c35698.png)

该代码的html代码如下：

```
<fieldset id="price_choices">
        <legend class="offscreen">Price Range:</legend>
            <p class="offscreen">Price per person:</p>
        <ul class="clearfix price-1">
            <li>
                <input type="radio" id="price-1" name="RestaurantsPriceRange2" value="1">               <label for="price-1" class="offscreen">

                </label>
            </li>
            <li>
                <input type="radio" id="price-2" name="RestaurantsPriceRange2" value="2">               <label for="price-2" class="offscreen">

                </label>
            </li>
            <li>
                <input type="radio" id="price-3" name="RestaurantsPriceRange2" value="3">               <label for="price-3" class="offscreen">

                </label>
            </li>
            <li>
                <input type="radio" id="price-4" name="RestaurantsPriceRange2" value="4">               <label for="price-4" class="offscreen">

                </label>
            </li>
        </ul>
    </fieldset> 
```

对于渲染评分精灵图像的css如下：

```
#price_choices ul {
padding: 0 7px;
height: 28px;
background: url(../images/dollars.gif) 0 0 no-repeat;
}
#price_choices li {
width: 20px;
height: 100%;
overflow: hidden;
}
#price_choices li {
padding: 0;
float: left;
}
#price_choices input {
margin: 0!important;
padding: 0;
border: 0;
cursor: pointer;
width: 100%;
height: 100%;
-moz-opacity: 0;
opacity: 0;

}
#price_choices ul.price-1 {
background-position: 0 -28px;
}
#price_choices ul.price-2 {
background-position: 0 -56px;
}
#price_choices ul.price-3 {
background-position: 0 -84px;
}
#price_choices ul.price-4 {
background-position: 0 -112px;
} 
```

图片精灵 Dollars.gif 如下： ![在此处输入图像描述](../Images/8ad5db8e83f4b27e7b5020e9c226fba7.png)

此外，当用户将鼠标悬停在每个 li 元素上时，美元符号会不断添加，并且当用户单击特定 li 时，Jquery 应该提醒该特定 li 的值。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T10:09:25.157

这个类似于星级

我正在为类似的事情使用 javascript。

我想这会对你有所帮助。

```
<script type="text/javascript">
            $(function() {

                $('#default').raty();

                $('#half').raty({
                    half    : true,
                    score   : 3.3
                });

                $('#round').raty({
                    score   : 1.26,
                    round   : { down: .25, full: .6, up: .76 }
                });

                $('#precision').raty({
                    half        : true,
                    path        : 'doc/img/', /* the path of your $ images*/
                    precision   : true,
                    size        : 24,
                    starOff     : 'star-off-big.png',//grey image of $
                    starOn      : 'star-on-big.png',//green img of $
                    target      : '#precision-target',
                    targetKeep  : true,
                    targetType  : 'number'
                });

            });
        </script> 
```

然后在您的 HTML 部分中添加以下内容：

```
<div id="precision"></div>
<input type="text" id="precision-target" name="txt"/></div><br/> 
```

还下载**jquery.raty.min.js**并将其包含在您的页面中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T10:23:15.377

网络上有很多资源可以做到这一点......搜索最少吗？

[非常详细的待办事项](http://eligeske.com/jquery/jquery-star-comment-rating/)

[或所有制作的插件](http://www.fyneworks.com/jquery/star-rating/)

[甚至一些汇编](http://www.enfew.com/5-best-jquery-star-rating-plugins-tutorials/)

[或者也许这个？](http://www.myjqueryplugins.com/jquery-plugin/jrating)

[或者更大的汇编；）](https://www.google.fr/?q=jquery+star+rating)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T10:18:03.723

如果我很好理解，这样的东西应该可以工作

```
$('ul').mouseover(function(){
 var ind = $(this).find('input').val();
 var shift = (ind-2)*28;
 $(this).css('background-position', '0 ' +shift+ 'px');
}); 
```

# .net - vb.net数据错位

> ID：14660723
> 
> 赞同：1
> 
> 时间：2013-02-02T10:00:33.177
> 
> 标签：.net, database, vb.net, visual-studio-2010

使用 Visual Studio 2010 我正在开发一个 vb.net 应用程序，我需要在一个表中存储超过 10000 条记录。表格格式为

```
|empno |year |january|february| march |april |may |june |july |august |September |october |november  |december| total| 
```

样本数据：

```
101 2010 10000 15000 25000
101 2011 15000 20000 35000
101 2012 20000 25000 45000
101 2013 25000 30000 55000
102 2008 1000  1500  2500
102 2009 1500  2000  3500
102 2010 10000 15000 25000
102 2011 15000 20000 35000
102 2012 20000 25000 45000
102 2013 25000 30000 55000 
```

现在的问题是，当我将数据插入此表时，它没有正确存储。我的意思是，它似乎是

```
102 2012 20000 25000 45000
101 2010 10000 15000 25000
101 2011 15000 20000 35000
101 2012 20000 25000 45000
101 2013 25000 30000 55000
102 2008 1000  1500  2500
102 2009 1500  2000  3500
102 2010 10000 15000 25000
102 2011 15000 20000 35000
102 2013 25000 30000 55000 
```

在每组数据中，有一个年份的记录存储在表的顶部。因此，当我显示特定员工的记录时，它无法正确显示（我的意思是不按顺序显示）。例如：对于 empno 102，结果就像

```
102 2012 20000 25000 45000
102 2008 1000  1500  2500
102 2009 1500  2000  3500
102 2010 10000 15000 25000
102 2011 15000 20000 35000
102 2013 25000 30000 55000 
```

我认为按年份排序不是解决方案。因为，它一年有很多记录。

我检查了所有的记录。只有一些记录有这个问题。我对这个问题以及如何解决它一无所知。任何人都可以这是什么原因以及如何避免？

提前致谢

编辑：代码

```
If yodor1 <= 2015 Then
            up = 2015
        ElseIf yodor1 <= 2025 Then
            up = 2025
        ElseIf yodor1 <= 2035 Then
            up = 2035
        ElseIf yodor1 <= 2045 Then
            up = 2045
        End If

        con.Open()
        txt = "select * from pension where empno='" & TextBox5.Text & "' "
        cmd = New SqlCommand(txt, con)
        reader = cmd.ExecuteReader()
        While reader.Read
            If yodor1 <= up Then
                flag = False
                display2.grid1.set_TextMatrix(a, 0, reader("year"))
                display2.grid1.set_TextMatrix(a, 1, reader("january"))
                display2.grid1.set_TextMatrix(a, 2, reader("february"))
                display2.grid1.set_TextMatrix(a, 3, reader("march"))
                display2.grid1.set_TextMatrix(a, 4, reader("april"))
                display2.grid1.set_TextMatrix(a, 5, reader("may"))
                display2.grid1.set_TextMatrix(a, 6, reader("june"))
                display2.grid1.set_TextMatrix(a, 7, reader("july"))
                display2.grid1.set_TextMatrix(a, 8, reader("august"))
                display2.grid1.set_TextMatrix(a, 9, reader("septemper"))
                display2.grid1.set_TextMatrix(a, 10, reader("october"))
                display2.grid1.set_TextMatrix(a, 11, reader("november"))
                display2.grid1.set_TextMatrix(a, 12, reader("december"))
                a = a + 1
                yodor1 = yodor1 + 1
            ElseIf yodor1 <= (up + 10) Then
                flag = False
                display2.grid2.set_TextMatrix(b, 0, reader("year"))
                display2.grid2.set_TextMatrix(b, 1, reader("january"))
                display2.grid2.set_TextMatrix(b, 2, reader("february"))
                display2.grid2.set_TextMatrix(b, 3, reader("march"))
                display2.grid2.set_TextMatrix(b, 4, reader("april"))
                display2.grid2.set_TextMatrix(b, 5, reader("may"))
                display2.grid2.set_TextMatrix(b, 6, reader("june"))
                display2.grid2.set_TextMatrix(b, 7, reader("july"))
                display2.grid2.set_TextMatrix(b, 8, reader("august"))
                display2.grid2.set_TextMatrix(b, 9, reader("septemper"))
                display2.grid2.set_TextMatrix(b, 10, reader("october"))
                display2.grid2.set_TextMatrix(b, 11, reader("november"))
                display2.grid2.set_TextMatrix(b, 12, reader("december"))
                b = b + 1
                yodor1 = yodor1 + 1
            ElseIf yodor1 <= (yodor + 19) Then
                flag = False
                DISPLAY3.grid2.set_TextMatrix(f, 0, reader("year"))
                DISPLAY3.grid2.set_TextMatrix(f, 1, reader("january"))
                DISPLAY3.grid2.set_TextMatrix(f, 2, reader("february"))
                DISPLAY3.grid2.set_TextMatrix(f, 3, reader("march"))
                DISPLAY3.grid2.set_TextMatrix(f, 4, reader("april"))
                DISPLAY3.grid2.set_TextMatrix(f, 5, reader("may"))
                DISPLAY3.grid2.set_TextMatrix(f, 6, reader("june"))
                DISPLAY3.grid2.set_TextMatrix(f, 7, reader("july"))
                DISPLAY3.grid2.set_TextMatrix(f, 8, reader("august"))
                DISPLAY3.grid2.set_TextMatrix(f, 9, reader("septemper"))
                DISPLAY3.grid2.set_TextMatrix(f, 10, reader("october"))
                DISPLAY3.grid2.set_TextMatrix(f, 11, reader("november"))
                DISPLAY3.grid2.set_TextMatrix(f, 12, reader("december"))
                f = f + 1
                yodor1 = yodor1 + 1
            ElseIf yodor1 < (yodor + 30) Then
                flag = False
                DISPLAY3.grid1.set_TextMatrix(c, 0, reader("year"))
                DISPLAY3.grid1.set_TextMatrix(c, 1, reader("january"))
                DISPLAY3.grid1.set_TextMatrix(c, 2, reader("february"))
                DISPLAY3.grid1.set_TextMatrix(c, 3, reader("march"))
                DISPLAY3.grid1.set_TextMatrix(c, 4, reader("april"))
                DISPLAY3.grid1.set_TextMatrix(c, 5, reader("may"))
                DISPLAY3.grid1.set_TextMatrix(c, 6, reader("june"))
                DISPLAY3.grid1.set_TextMatrix(c, 7, reader("july"))
                DISPLAY3.grid1.set_TextMatrix(c, 8, reader("august"))
                DISPLAY3.grid1.set_TextMatrix(c, 9, reader("septemper"))
                DISPLAY3.grid1.set_TextMatrix(c, 10, reader("october"))
                DISPLAY3.grid1.set_TextMatrix(c, 11, reader("november"))
                DISPLAY3.grid1.set_TextMatrix(c, 12, reader("december"))
                c = c + 1
                yodor1 = yodor1 + 1
            End If
        End While
        reader.Close()
        con.Close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T11:19:07.420

首先，您最好使用参数化查询来防止[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。在查询中添加`ORDER BY`子句以对记录进行排序`year`

试试这个 ：

```
txt = "select * from pension where empno= @empno ORDER BY year" 
cmd = New SqlCommand(txt, con)
cmd.Parameters.AddWithValue("@empno", TextBox5.Text) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T05:53:02.487

终于我找到了答案。我用过 Clear() 方法

```
display2.grid1.clear()
display2.grid2.clear()
DISPLAY3.grid1.clear()
DISPLAY3.grid2.clear() 
```

现在我的问题解决了

# android - Android：如何写入内部存储器

> ID：14660728
> 
> 赞同：1
> 
> 时间：2013-02-02T10:01:36.010
> 
> 标签：android, io

我把这段代码写在sdcard上，现在我怎样才能把它转换成写入内部存储器？

```
//private String path = Environment.getExternalStorageDirectory().getAbsolutePath() + "/liste.txt"; Path used to write on sdcard

try{
   File file = new File(path);

   BufferedWriter bw = new BufferedWriter(new FileWriter(file,true));
   bw.write("something");
    bw.flush();
    bw.close();
catch(Exception e) {...} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T10:11:40.417

在android中，每个应用程序都有自己的文件夹`/data/data/package/`

**如果设备已植根**，则此目录只能由您的应用和根访问

 **要访问此目录并对其进行读/写，您可以使用：

```
getApplicationContext().openFileOutput(name, mode); 
```

和

```
getApplicationContext().openFileInput(name); 
```

更多关于这里的信息：[文档](http://developer.android.com/reference/android/content/Context.html#openFileOutput%28java.lang.String,%20int%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T10:08:51.220

使用此代码：

```
FileOutputStream fos;
    fos = context.openFileOutput(FILENAME, Context.MODE_WORLD_READABLE);

    fos.write(data.getBytes()); //write to application top level directory for immediate sending 
    fos.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T10:09:07.737

```
try{
File file = new File("/data/data/com.example.packagename/files/");

BufferedWriter bw = new BufferedWriter(new FileWriter(file,true));
bw.write("something");
bw.flush();
bw.close();
catch(Exception e) {...} 
```

或者

```
//To read file from internal phone memory
//get your application context:
Context context = getApplicationContext(); 

filePath = context.getFilesDir().getAbsolutePath();
File file = new File(filePath); 
```**

# sql-server - 在 SQL Server 2000 中，如何从表中获取以下场景的最后一个父级？

> ID：14660729
> 
> 赞同：2
> 
> 时间：2013-02-02T10:01:41.617
> 
> 标签：sql-server, tsql, tree, sql-server-2000

我在 SQL Server 2000 中有以下树的场景。

有两个表的数据库，形象地说

`Table1`（Row_Id *int*，Id *char(9)*等）

*和*

`Table2`（Row_Id *int*、Parent_Id *char(9)*、Parent_Parent_Id *char(9)*等）。

`Parent_Id`in`Table2`指的是`Id`in `Table1`。

`Parent_Parent_Id`in也`Table2`指`Id`in `Table1`（因此孩子可以有多个父母）。

例如，让我们考虑包含一些数据的表：

**表格1**

```
Row_Id  Id 
  1     a  
  2     b  
  3     c  
  4     d  
  5     e  
  6    ... 
```

**表2**

```
Row_Id  Parent_Id  Parent_Parent_Id
  1        a               b
  2        b               с   
  3        c               d
  4        d               e   
  5       ...             ... 
```

这个带有数据的场景表明，带有`Id`“a”的元素`Table1`没有更多的父元素，并且带有`Id`“a”的元素的最后一个父元素是“e”。

换句话说，我想用输入参数`inId`（它是任何`Id`from `Table1`）编写存储过程，因此我想得到**最后一个没有父级**的父级。

现在我通过循环来做到这一点

```
SELECT ... 
FROM Table1 
LEFT JOIN Table2 ON Table1.Id = Table2.Parent_Id 
WHERE Table1.Id = inId 
```

直到我进入`NULL`正确的位置。

你认为有没有更好的方法来做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T20:39:07.107

在 2000 之后的 SQL Server 版本中，有几种方法可以有效地实现这一点。然而，在 SQL 2000 中，您需要手动解决此问题。有两种选择：

*   递归函数或过程
*   一个循环

如果循环编写正确，它很可能是两者中较快的。只要确保您在表上有适当的索引。

您也不需要加入 table1。只需在循环中执行类似 的操作`SELECT @newParent = Parent_Parent_Id FORM dbo.Table2 WHERE Parent_Id = @currentParent;`，如果没有找到新的父级，则停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T16:22:26.103

我已经编写了循环，它决定了我的问题。谢谢你。

```
USE MyDatabase
GO

DECLARE @currentParent char(9),
        @newParent char(9)

SELECT @currentParent = 'a',
       @newParent = @currentParent

WHILE (1 = 1)
BEGIN
    SELECT @newParent = Parent_Parent_Id 
    FROM Table2 
    WHERE Parent_Id = @currentParent;

    IF (@newParent = @currentParent) 
        BEGIN
            PRINT @newParent;
            BREAK;
        END;

    SELECT @currentParent = @newParent;
END 
```

# logging - 如何在 LAN 中的另一台计算机上保存滚动平面文件跟踪侦听器？

> ID：14660734
> 
> 赞同：0
> 
> 时间：2013-02-02T10:02:24.317
> 
> 标签：logging, enterprise-library, flat-file, tracelistener

您好我正在使用 Enterprise Library 5，我定义了滚动平面文件跟踪侦听器，以将我的日志保存到文件中，我如何解决这个文件以保存在 LAN 上的另一台机器上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:34:53.777

我还没有对此进行测试，但是这个 Q 似乎具有使用 ent lib 跟踪到日志文件的所有配置：[在 asp.net 中使用企业库实现日志文件](https://stackoverflow.com/questions/1503582/implementing-log-file-using-enterprise-library-in-asp-net) 相关部分是“listeners/filename”

而要登录到另一台机器，这只是 NTFS 权限和路径的问题

您需要让代码在可以写入删除文件的域帐户下运行（或者在工作组方案中使用相同密码的两个本地帐户）

如果将字母映射到驱动器，则路径将为 \machinename\sharedFolderName 或 \ipAddress\sharedFolderName 或 y:\。

# cuda - 带有 CUDA 的向量

> ID：14660735
> 
> 赞同：0
> 
> 时间：2013-02-02T10:02:26.287
> 
> 标签：cuda, thrust

我目前有一个要移植到 CUDA 的 C++ 代码。cpp 代码使用向量进行数据存储。我对 CUDA 相当陌生，我知道向量不能直接与 CUDA 一起使用。

要存储的元素数量基于某些计算的结果（基本上是阈值检查。存储大于阈值的样本）。我了解在内核中使用 malloc 进行动态内存分配非常慢。所以一种选择是固定元素的最大数量，为它们分配内存并重写数组的代码来代替向量。这里的缺点是浪费内存，因为我存储了 0 到 100 个元素之间的任何地方，当然我必须做很多重写。

推力库在设备上提供向量，但从我在网站上阅读的内容来看，人们似乎回避推力。如果我包含thrust/device_vector.h 和thrust/host_vector.h 并保持向量不变，这是一个合理的解决方案吗？使用推力有什么缺点？

一些背景信息：此代码是管道的一部分，其先前阶段在 GPU 中执行。将此代码移植到 GPU 的原因是让管道实时运行（希望如此）。并行化是在更高级别上完成的，我将把整个 cpp 代码作为一个内核，它将运行大约 800 个线程（每个线程代表一个分散度量或 DM）。到目前为止，每个 DM 都是通过每次调用 C++ 代码顺序完成的。

# android - Android、Phonegap 和 jQueryMobile--错误连接到服务器不成功到“www/assets/index.html”

> ID：14660739
> 
> 赞同：0
> 
> 时间：2013-02-02T10:02:43.047
> 
> 标签：android, cordova, jquery-mobile

我尝试了以下代码，但出现错误**Connection to server was unsuccessful to "www/assets/index.html"**

```
<!DOCTYPE html>
<html>
   <head>
     <style type="text/css">
        li span
         {
            font-weight: normal;
         }
     </style>
   <title> Sample App using jQuery Mobile</title>
      <meta name="viewport" content="width=device-width, initial-scale=1"> 
      <script type="text/javascript" charset="utf-8" src="cordova-2.1.0.js"></script>
      <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css" />
      <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
      <script type="text/javascript" src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js"></script>
   <head>
   <body>
      <div data-role="page" id="car">
         <div data-role="header" data-postion="fixed">
            <h1> Cars</h1>
            <h1 id="blogheader">Loading...</h1>
         </div>
         <div data-role="content">
            <ul data-role="listview" data-inset="true" id="contentListView">
            </ul>
         </div>
         <div data-role="footer" data-position="fixed">
             <h1> Footer </h1>
         </div>
     </div>

 <script type="text/javascript" charset="utf-8">
    $(function(){
       var serviceUrl='http://mysite:81/Service.asmx/ShowListViewData';
       $.ajax({
         url:serviceUrl,
         success:function(xml){
         setTimeout(
         function(){
            $(xml).find( "newset" ).each(function(){
                carName  = $(this).find('ItemName').text();
                description  = $(this).find('ItemDescription').text();
                $('#contentListView').append('<li><a href="#"><h3>Car type:<span> '+carName+'</span></h3><p>' + description + '</p></a></li>');
            });
        $('#contentListView').listview('refresh');
       }
       ,100);
      },
       error:function(){
      },
       dataType:"xml"
   });
 });
 </script>
 </body>
</html> 
```

有趣的事实是它早些时候运行良好。但现在我收到了这个错误。事实上我什至尝试过这种方法[ **super.setIntegerProperty("loadUrlTimeoutValue", 60000);** ]，但没有解决。它消除了错误，但来自远程服务器的数据没有加载..请帮助我..

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T10:43:47.243

抱歉回复晚了..这是代码..唯一的区别是我已将所有 css 和 js 文件包含到我的项目中，而不是从 CDN 引用

```
<!DOCTYPE html>
<html>
   <head>
     <style type="text/css">
        li span
         {
            font-weight: normal;
         }
     </style>
   <title> Sample App using jQuery Mobile</title>
      <meta name="viewport" content="width=device-width, initial-scale=1"> 
      <script type="text/javascript" charset="utf-8" src="cordova-2.1.0.js"></script>
     <link href="styles/jquery.mobile-1.0.min.css" />
    <script src="scripts/jquery-1.6.4.min.js"></script>
   <script src="scripts/jquery.mobile-1.0.min.js"></script>
  <head>
   <body>
      <div data-role="page" id="car">
         <div data-role="header" data-postion="fixed">
            <h1> Cars</h1>
            <h1 id="blogheader">Loading...</h1>
         </div>
         <div data-role="content">
            <ul data-role="listview" data-inset="true" id="contentListView">
            </ul>
         </div>
         <div data-role="footer" data-position="fixed">
             <h1> Footer </h1>
         </div>
     </div>

 <script type="text/javascript" charset="utf-8">
    $(function(){
       var serviceUrl='http://mysite:81/Service.asmx/ShowListViewData';
       $.ajax({
         url:serviceUrl,
         success:function(xml){
         setTimeout(
         function(){
            $(xml).find( "newset" ).each(function(){
                carName  = $(this).find('ItemName').text();
                description  = $(this).find('ItemDescription').text();
                $('#contentListView').append('<li><a href="#"><h3>Car type:<span> '+carName+'</span></h3><p>' + description + '</p></a></li>');
            });
        $('#contentListView').listview('refresh');
       }
       ,100);
      },
       error:function(){
      },
       dataType:"xml"
   });
 });
 </script>
 </body>
</html> 
```

谢谢。

# css - 当网站在线时，EOT 字体在 Internet Explorer 中不起作用（离线时工作正常）

> ID：14660742
> 
> 赞同：0
> 
> 时间：2013-02-02T10:03:24.337
> 
> 标签：css, internet-explorer, font-face, eot

我使用以下代码将字体嵌入我的网站。此字体在 Chrome 和 Firefox 中在线和离线都可以正常工作。但是当我上传网站时，它不会出现在 Internet Explorer 中。

我应该在我的托管站点上进行任何设置，或者是否有任何关于字符集的特定设置？

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>

<style type="text/css"> 
@font-face
{
font-family:GothamBook;
src:url('fonts/gothambook.eot');
src:url('fonts/gothambook.eot?#iefix') format('embedded-opentype'),
        url('fonts/gothambook.woff') format('woff'),
        url('fonts/gothambook.ttf') format('truetype'),
        url('fonts/gothambook.svg#svg/gothambook') format('svg')

}
</style>
</head> 
```

请帮助我，我想让这段代码在 Internet Explorer 中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T10:28:06.800

尝试添加

```
AddType application/vnd.ms-fontobject .eot 
```

到您的 .htaccess 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T12:00:31.013

这很可能是一个跨站点访问问题，需要在托管字体的服务器中进行设置：`Access-Control-Allow-Origin header`需要设置为允许来自不同域的访问。请参阅[如何添加 Access-Control-Allow-Origin 标头](https://stackoverflow.com/questions/5008944/how-to-add-an-access-control-allow-origin-header)。

# python-2.7 - 从输出 Python 2.7 中删除空间

> ID：14660744
> 
> 赞同：0
> 
> 时间：2013-02-02T10:03:51.990
> 
> 标签：python-2.7, space

```
elif clocked > limit and clocked <= 90:
    print "Too fast! The fine is $", (clocked - limit) * 5 + 50
else:
    print "Thats was extremely dangerous!\nYour fine is $", \
                                 (clocked - limit) * 5 + 250 
```

嗨，`elif`想要的输出：太快了！罚款是 50 美元。我显然想去掉 50 美元之间的空格。我知道我可以引入一个新变量来分配我的表达式，然后格式化创建的没有空格的变量，但是有什么办法可以跳过添加新的代码的变量？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T10:14:25.080

您不必引入新变量即可使用字符串格式。

```
print "Too fast! The fine is ${0}".format((clocked - limit) * 5 + 50) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T10:14:35.590

只需更改为使用字符串插值（尽管如果您使用的是 2.6+ -`str.format`正如@bobince 所指出的那样使用 intead 不会有什么坏处）

```
print "Too fast! The fine is $%d" % ((clocked - limit) * 5 + 50,) 
```

# php - foreach 不返回单个值

> ID：14660746
> 
> 赞同：0
> 
> 时间：2013-02-02T10:03:56.543
> 
> 标签：php, mysql, pdo

我编写了以下代码以从表中返回单个值，但它似乎不起作用。知道为什么吗？

```
$pmname = $pdo->quote($_SESSION['pmname']);
$sql = "SELECT img FROM pm_user WHERE name=$pmname";
$result = $pdo->query($sql);
foreach ($result as $row) 
{
echo $row["img"];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T10:12:57.880

为什么你什么都不做`fetch`？尝试`foreach`替换为：

```
while($row = $result->fetch(PDO::FETCH_ASSOC))
{
    echo $row['img'];
} 
```

甚至，如果您确定只有一行：

```
$row = $pdo->query('your query')->fetch(PDO::FETCH_ASSOC);
echo $row['img']; 
```

可以很好地做到这一点，虽然我还没有尝试过 - 还没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T10:46:30.043

你需要做一个`fetch`地方。如果您想使用`foreach`结构，请将结果集存储在一个变量中，`fetchAll`然后循环遍历它。

```
$pmname = $pdo->quote($_SESSION['pmname']);
$sql = "SELECT img FROM pm_user WHERE name=$pmname";
$rows = $pdo->query($sql)->fetchAll();
foreach ($rows as $row) 
{
    echo $row["img"];
} 
```

**编辑 - 更重要的是：** 您**不**应该只是`$pmname`通过该`quote`方法传入。请参阅 PHP 手册 PDO::quote

> 如果您使用此函数构建 SQL 语句，强烈建议您使用 PDO::prepare() 来准备带绑定参数的 SQL 语句，而不是使用 PDO::quote()

你真的应该这样做：

```
$sql = "SELECT img FROM pm_user WHERE name=:pmname";
$stm = $pdo->prepare( $sql );
$stm->execute( array( ':pmname' => $_SESSION['pmname'] ) );

$rows = $stm->fetchAll();
foreach ($rows as $row) 
{
    echo $row["img"];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T11:00:43.630

您应该始终检查输入数组变量的 foreach 和从数据库返回的行数。当您没有得到任何查询数据库的值时，可以避免生产代码中的警告/错误。

在您的示例中，您可以使用 empty() php 函数进行检查。例如：

```
$pmname = $pdo->quote($_SESSION['pmname']);
$result = $pdo->query("SELECT img FROM pm_user WHERE name=$pmname");

if($pdo->rowCount() > 0 && !empty($result))
{
    foreach ($result as $row) 
    {
        echo $row["img"];
    }
}
else
{
    echo 'No user image found in database.';
} 
```

# django - 在 Django 中使用 django.core.urlresolvers.reverse 时的弃用警告

> ID：14660748
> 
> 赞同：1
> 
> 时间：2013-02-02T10:04:06.140
> 
> 标签：django, url, deprecated

我在基于类的视图中使用以下代码

```
from django.core.urlresolvers import reverse_lazy

url = reverse('url_name') 
```

`urls.py`看起来如下

```
from django.conf.urls import patterns, url

from myapp import views

urlpatterns = patterns('',
    url(r'^$', views.TestView.as_view(), name='url_name'),
) 
```

这样做时，我收到了弃用警告：

```
DeprecationWarning: Function-based generic views have been deprecated; use class-based views instead.
  DeprecationWarning 
```

警告在“django/views/generic/simple.py:8”上引发

这是一个堆栈，看看发生了什么：

```
-> return urlresolvers.reverse('url_name')
  /home/vagrant/.virtualenvs/wfp/lib/python2.5/site-packages/django/core/urlresolvers.py(476)reverse()
-> return iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs))
  /home/vagrant/.virtualenvs/wfp/lib/python2.5/site-packages/django/core/urlresolvers.py(363)_reverse_with_prefix()
-> possibilities = self.reverse_dict.getlist(lookup_view)
  /home/vagrant/.virtualenvs/wfp/lib/python2.5/site-packages/django/core/urlresolvers.py(276)reverse_dict()
-> self._populate()
  /home/vagrant/.virtualenvs/wfp/lib/python2.5/site-packages/django/core/urlresolvers.py(265)_populate()
-> lookups.appendlist(pattern.callback, (bits, p_pattern, pattern.default_args))
  /home/vagrant/.virtualenvs/wfp/lib/python2.5/site-packages/django/core/urlresolvers.py(216)callback()
-> self._callback = get_callable(self._callback_str)
  /home/vagrant/.virtualenvs/wfp/lib/python2.5/site-packages/django/utils/functional.py(27)wrapper()
-> result = func(*args)
  /home/vagrant/.virtualenvs/wfp/lib/python2.5/site-packages/django/core/urlresolvers.py(92)get_callable()
-> lookup_view = getattr(import_module(mod_name), func_name)
  /home/vagrant/.virtualenvs/wfp/lib/python2.5/site-packages/django/utils/importlib.py(35)import_module()
-> __import__(name)
> /home/vagrant/.virtualenvs/wfp/lib/python2.5/site-packages/django/views/generic/simple.py(6)<module>()
-> import warnings 
```

未来的方法是什么？我目前正在使用 Django 1.4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:34:23.397

It's just a guess, but maybe i'm doing it the right way and i simply can ignore this warning, because the function I'm using does not rely on the function based views but simply they are in the extended import scope of the urlresolvers module.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T10:11:22.617

这只是 Django 功能的自动警告，如果您计划迁移到不再支持此功能的较新 Django 版本，则不应使用该功能。

[您可以在此处](https://docs.djangoproject.com/en/dev/internals/deprecation/)查看弃用计划

# java - 在 CardLayout 中显示卡片本身的下一张卡片

> ID：14660750
> 
> 赞同：0
> 
> 时间：2013-02-02T10:04:16.467
> 
> 标签：java, swing, jpanel, layout-manager, cardlayout

> **可能重复：**
> [CardLayout 的父容器/面板](https://stackoverflow.com/questions/14659033/parent-container-panel-for-a-cardlayout)

如何从卡片面板本身显示卡片面板（其布局不是 CardLayout，但包含在具有 CardLayout 的面板中）？我不想在容器中放置单独的导航栏，因为我需要访问卡片数据.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:08:47.217

您可以使用面板的 getParent() 方法访问父组件（此方法可从每个 AWT/Swing 组件访问）。如果您的面板没有直接放置在具有卡片布局的面板中，则应迭代调用此方法，直到获得所需的面板。

例子：

```
Component myComp; // for example your navigation bar
Component parent = myComp.getParent();
while (null != parent) {
  if (parent.getLayout() instanceof CardLayout) {
    break;
  }
  parent = parent.getParent();
}
if (null != parent) {
  // now we have parent with the card layout
} 
```

# .net - vs2012 是否支持使用 Framework 1.1

> ID：14660764
> 
> 赞同：0
> 
> 时间：2013-02-02T10:05:49.087
> 
> 标签：.net, winforms, frameworks, visual-studio-2012, .net-1.1

我们有一些遗留的 2003 Winforms 框架 1.1 代码

我知道你可以设置目标框架等

是否有任何其他问题或更改，以便我们可以重构 Winforms 1.1 应用程序？

作为解决方案的一部分，我们有一些非常古老的 Janus 自定义控件..让这些工作或安装会有问题..或者我们可以将它们作为普通参考库吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:24:39.997

这是一个业务而不是技术问题。贵公司准备在遗留软件上投资多少？有可量化的好处吗？

我尝试将一个中等大小的 C# asp.net 1.1 网站移植到 .Net 2.0，最后我无法证明继续下去；我有太多的返工和太多的重新测试。从业务和风险 POV 中获得它是不值得的。该网站每月的营业额超过 100 万美元——让我的生活更轻松一点，但这并不值得；我无法整理出一个有意义的商业案例。

你比我们更了解你的情况，但我建议你考虑一下永恒的格言，如果它没有坏，就不要修复它。

# ruby-on-rails - 如何为 Rails 应用程序创建虚拟主机？

> ID：14660765
> 
> 赞同：-1
> 
> 时间：2013-02-02T10:05:51.703
> 
> 标签：ruby-on-rails, virtualhost, crowdsourcing

我有两个 Rails 应用程序。一个是[来自 github 的众包平台](http://github.com/lockitron/selfstarter.)

我把它放在我的服务器上。现在它在我的本地服务器上运行。我有另一个域。并想把这个众包平台放在我的领域。如何做到这一点以及如何为此制作虚拟主机？

谢谢，泽尔

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-02T10:26:46.880

您可以尝试将其部署到heroku

[https://devcenter.heroku.com/articles/rails3](https://devcenter.heroku.com/articles/rails3)

# php - php动态访问表单变量

> ID：14660766
> 
> 赞同：1
> 
> 时间：2013-02-02T10:05:56.190
> 
> 标签：php, html, forms

我有一些重复的表单字段变量，并希望在 POST 之后将它们放入变量中。

```
$item_code1 = mysql_sanitize( $_POST['item_code1'] );
$units1 = mysql_sanitize( $_POST['units1'] );
$qty1 = mysql_sanitize( $_POST['qty1'] );
$size1 = mysql_sanitize( $_POST['size1'] );
$make1 = mysql_sanitize( $_POST['make1'] );
$finish1 = mysql_sanitize( $_POST['finish1'] );

$item_code2 = mysql_sanitize( $_POST['item_code2'] );
$units2 = mysql_sanitize( $_POST['units2'] );
$qty2 = mysql_sanitize( $_POST['qty2'] );
... 
```

这些表单变量集可以是 1 - 10（或更多）我通过计数器传递了多少组这些表单变量

```
$ctr_i = mysql_sanitize( $_POST['ctr_i'] ); 
```

我如何以编程方式获得上述变量？我的意思是循环`$ctr_i`，我想把所有的 POST 值放到 PHP 变量中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T10:10:15.393

您可以尝试以下方法：

```
$post = $_POST;
$post = array_map('mysql_sanitize', $post);
extract($post); 
```

在此之后，您将设置变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T10:13:13.853

```
<?php
foeach($_POST as $key => $val){
 $$key = mysql_sanitize($val);
}
?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T10:15:52.813

如果您在 html 页面中有输入数组会更容易，例如

```
<input type="text" name="field[]" />
<input type="text" name="field[]" />
<input type="text" name="field[]" /> 
```

然后您可以通过以下方式收集 php 端的所有值

```
$field = $_POST['field'];

foreach($field as $a_field)
{
  echo $a_field;
} 
```

# java - keytool 在单个文件中导入多个证书

> ID：14660767
> 
> 赞同：20
> 
> 时间：2013-02-02T10:06:01.100
> 
> 标签：java, ssl-certificate

如何使用 keytool [to cert store] 在单个文件中导入多个证书？

keytool -importcert 只导入第一个。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2015-05-02T00:47:05.613

一个 bash 脚本，它将从 PEM 文件中导入所有证书：

```
#!/bin/bash
PEM_FILE=$1
PASSWORD=$2
KEYSTORE=$3
# number of certs in the PEM file
CERTS=$(grep 'END CERTIFICATE' $PEM_FILE| wc -l)

# For every cert in the PEM file, extract it and import into the JKS keystore
# awk command: step 1, if line is in the desired cert, print the line
#              step 2, increment counter when last line of cert is found
for N in $(seq 0 $(($CERTS - 1))); do
  ALIAS="${PEM_FILE%.*}-$N"
  cat $PEM_FILE |
    awk "n==$N { print }; /END CERTIFICATE/ { n++ }" |
    keytool -noprompt -import -trustcacerts \
            -alias $ALIAS -keystore $KEYSTORE -storepass $PASSWORD
done 
```

例如：

```
./jks_import_pem TrustedCAs.PEM changeit truststore.jks 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-02T10:16:50.740

如果要包含 CA 证书，则应添加该`-trustcacerts`选项。

如果您在一个 PEM 文件中有多个证书链，则必须[拆分该文件](http://how2ssl.com/articles/working_with_pem_files/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-02-02T10:08:20.900

您可以简单地使用免费且易于使用的 GUI Tool [Keystore Explorer](https://keystore-explorer.org/) 来导入和管理多个证书。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-14T20:49:11.670

我想做同样的事情，但显然只有在您导入密钥时才有可能：

> 有两种类型的条目 - 密钥条目和受信任的证书条目，只有密钥条目可以包含附加到它的证书“链”。受信任的证书条目都是单个证书条目。

（[https://www.java.net/node/674524#comment-709695](https://www.java.net/node/674524#comment-709695)）

我什至尝试[先转换为 PKCS#7 格式](https://stackoverflow.com/a/16062331/399105)，但由于上述原因或我的 keytool 版本太旧，它没有奏效。

所以必须首先将文件拆分为单独的证书：

```
cat certchain.pem | awk 'split_after==1{n++;split_after=0} /-----END CERTIFICATE-----/ {split_after=1} {print > ("cert" n ".pem")}' 
```

( [https://serverfault.com/q/391396/58568](https://serverfault.com/q/391396/58568) )

然后分别导入每一个。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-10T15:04:15.813

您可以使用 p11-kit 工具快速完成此操作。唯一的限制是它从 /etc/pki/ca-trust/source/ 读取证书

```
/usr/bin/p11-kit extract --format=java-cacerts --filter=ca-anchors \
                --overwrite --purpose server-auth $DEST/java/cacerts 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-26T15:35:04.677

给出的答案并不是真正的 Ansible 解决方案，更像是替代方案。

我在下面写的内容适用于第一个证书，但它不是循环的。有任何想法吗？

```
 java_install_keystore_cert: true
    java_keystore_certs: "{{ apps.jira.keystore_certs }}"
    java_keystore_cert_alias: test 
```

```
apps:
  jira:
    keystore_certs:
      - certName: xyz.xxx.com
        certFileName: xyz.xxx.com.pem
      - certName: xxx.com
        certFileName: xxx.com.pem 
```

```
- name: Copy SSL certificate to remote server
  copy:
    src: "{{ java_keystore_certs[0].certFileName }}"
    #src: "{{ java_keystore_cert_file }}"
    dest: /tmp/
  when: java_install_keystore_cert|default(false)

- name: Determine Java cacerts keystore location
  find:
    paths: "{{ java_home }}/"
    patterns: 'cacerts'
    recurse: yes
  register: cacerts_file
  when: java_install_keystore_cert|default(false)

- name: Import SSL certificate to Java cacerts keystore
  java_cert:
    cert_alias: "{{ java_keystore_cert_alias }}"
    #cert_path: "/tmp/{{ java_keystore_cert_file }}"
    cert_path: "/tmp/{{ java_keystore_certs[0].certFileName }}"
    keystore_path: "{{ cacerts_file.files[0].path }}"
    keystore_pass: changeit
    executable: "{{ java_home }}/bin/keytool"
    state: present
  when: java_install_keystore_cert|default(false) and cacerts_file is defined 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-11T12:24:44.580

我还切换到了一个不仅仅是 Ansible 解决方案......

```
 copy:
    src: "{{ java_keystore_cert_file }}"
    dest: /tmp/
  when: java_install_keystore_cert|default(false)

- name: Determine Java keystore (cacerts) location
  find:
    paths: "{{ java_home }}/"
    patterns: 'cacerts'
    recurse: yes
  register: cacerts_file
  when: java_install_keystore_cert|default(false)

# Not using the java_cert module (anymore) since that imports the first certificate only

# Always use .pem (simply rename .crt or .cert to .pem if needed)
# The .pem file should contain one or more public certificates, no private key(s) or chain
- name: Transfer the import certificate script
  copy:
    src: files/scripts/importcert.sh
    dest: /tmp/importcert.sh
    mode: 0700
  when: java_install_keystore_cert|default(false) and cacerts_file is defined

- name: Import certificate to Java keystore
  command: sh /tmp/importcert.sh "/tmp/{{ java_keystore_cert_file }}" "{{ java_home }}/bin/keytool" changeit "{{ cacerts_file.files[0].path }}"
  when: java_install_keystore_cert|default(false) and cacerts_file is defined 
```

```
#!/bin/bash
PEM_FILE=$1
KEYTOOL=$2
PASSWORD=$3
KEYSTORE=$4
# number of certs in the PEM file
CERTS=$(grep 'END CERTIFICATE' $PEM_FILE| wc -l)

# For every cert in the PEM file, extract it and import into the JKS keystore
# awk command: step 1, if line is in the desired cert, print the line
#              step 2, increment counter when last line of cert is found
for N in $(seq 0 $(($CERTS - 1))); do
  ALIAS="${PEM_FILE%.*}-$N"
  cat $PEM_FILE |
    awk "n==$N { print }; /END CERTIFICATE/ { n++ }" |
    $KEYTOOL -noprompt -import -trustcacerts \
            -alias $ALIAS -keystore $KEYSTORE -storepass $PASSWORD
done 
```

# java - java中的日期解析

> ID：14660769
> 
> 赞同：0
> 
> 时间：2013-02-02T10:06:21.093
> 
> 标签：java, sql, date

我编写了以下程序将日期字符串转换为 sql 日期对象以存储在 db2 中，但显示的输出是 2013-01-02 而不是 2013-02-02。谁能解释为什么？

```
String string = "02/02/2013";
Date date = null;

try {
    date = new SimpleDateFormat("dd/mm/yyyy", Locale.ENGLISH).parse(string);
    java.sql.Date newDate=new java.sql.Date(date.getTime());
    System.out.println(newDate);

} catch (ParseException e) {                    
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T10:07:29.300

对于月份，您应该使用`MM`而不是`mm`. `mm`用于`minutes in hour`： -

```
date = new SimpleDateFormat("dd/MM/yyyy", Locale.ENGLISH) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T10:08:00.937

你的格式应该是

```
"dd/MM/yyyy" 
```

请注意，这`mm`是**分钟**`MM`，而是**月**

[**检查文档**](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

# linux - Apache 虚拟主机 - 服务器 ip 指向虚拟主机而不是 /var/www/html

> ID：14660770
> 
> 赞同：0
> 
> 时间：2013-02-02T10:06:37.037
> 
> 标签：linux, centos, config, apache

我已经设置了一个主要用于测试的 linux 机器，并且我已经到了一个运行 apache、mysql 和 php 的阶段。我遵循了有关如何设置虚拟主机的教程，以便我可以将域指向它，但是发生了一些奇怪的事情。这是我的 httpd-vhosts.conf 文件，我已包含在我的 httpd.conf 文件中：

```
NameVirtualHost *:80

<VirtualHost *:80>
  ServerName thedomain.co.uk
  DocumentRoot /var/www/thedomain
</VirtualHost> 
```

当我访问 thedomain.co.uk 时，它指向了您所期望的正确位置。但是当我转到我的服务器 ip，内部或外部时，它会转到与虚拟主机相同的目录。大家能想到这是什么原因吗？我希望它默认转到 /var/www/html 吗？哦，我正在运行 CentOS 6.3

提前感谢您的任何答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T10:11:05.420

您已使用通配符将所有内容指向 DocumentRoot`/var/www/thedomain`

您需要创建第二个列表：

```
<VirtualHost myotherdomain.co.uk:80>
  ServerName myotherdomain.co.uk
  DocumentRoot /var/www/myotherdomain
</VirtualHost> 
```

您的其他域是什么 ip 和文档根，指向您的选择。

第一个 vhost 列表也用作默认值......因此，如果您要使用 localhost ，它将解析为列表中的第一个。

# php - 读取流xml文件

> ID：14660771
> 
> 赞同：-2
> 
> 时间：2013-02-02T10:06:47.770
> 
> 标签：php, xml, function, steam

这是 XML 文件： [http ://steamcommunity.com/profiles/76561198044834372/games?tab=all&xml=1](http://steamcommunity.com/profiles/76561198044834372/games?tab=all&xml=1)

我试图用 SimpleXML 来做，但没有成功。

谁能给我阅读游戏标题的代码？

例如，

```
<games>
<game>
<appID>570</appID>
<name>
<![CDATA[ Dota 2 ]]>
</name>
<logo>
<![CDATA[
http://media.steampowered.com/steamcommunity/public/images/apps/570/d4f836839254be08d8e9dd333ecc9a01782c26d2.jpg
]]>
</logo>
<storeLink>
<![CDATA[ http://steamcommunity.com/app/570 ]]>
</storeLink>
<hoursLast2Weeks>3.6</hoursLast2Weeks>
<hoursOnRecord>3.6</hoursOnRecord>
</game> 
```

我想要游戏的名称：游戏->游戏->列表中每个游戏的名称。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T10:23:54.453

无论如何，我认为您需要先查看“如何提问”。

```
$xml = file_get_contents("http://steamcommunity.com/profiles/76561198044834372/games?tab=all&xml=1");
$xml = simplexml_load_string($xml);
foreach ($xml->games->game as $game) {
    echo (string) $game->name;
} 
```

输出；

```
刀塔 2
侠盗车手四
在线冠军：所有人免费
一群英雄
英雄连：对立战线
英雄连队：英雄传说
犯罪团伙战争
暗黑血统
DC宇宙在线
杀出重围：人类革命
全球议程
HOMEFRONT 演示
地铁2033
红色派系：世界末日
狙击手幽灵战士
团队要塞2
指环王在线™
部落：登高

```

# sql - 我们想要在 sql 中通过 xmlpath 进行查询。我们应该怎么做？

> ID：14660774
> 
> 赞同：1
> 
> 时间：2013-02-02T10:07:05.990
> 
> 标签：sql, sql-server, sql-server-2008

> **可能重复：**
> [SQL Server - XQuery for XML](https://stackoverflow.com/questions/10519701/sql-server-xquery-for-xml)

我们有一个类似这样的 xml 列：

第 1 行：

```
<a f="value1" b="value2" c="value3" d="value4"  />
<a f="value5" b="value6" c="value7" d="value8" Case="value9"  /> 
```

第2行：

```
<a f="value1" b="value15" c="value16" d="value17"  />
<a f="value10" b="value11" c="value12" d="value13" Case="value14"  /> 
```

...

我们想要选择具有`f="value1"`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T10:11:30.083

[SQL小提琴](http://sqlfiddle.com/#!3/fdfa9/1)

**MS SQL Server 2008 架构设置**：

```
create table YourTable
(
  XMLColumn xml
)

insert into YourTable values('<a f="value1" b="value2" c="value3" d="value4"  />
<a f="value5" b="value6" c="value7" d="value8" Case="value9"  />')

insert into YourTable values('<a f="value1" b="value15" c="value16" d="value17"  />
<a f="value10" b="value11" c="value12" d="value13" Case="value14"  />') 
```

**查询 1**：

```
select *
from YourTable
where XMLColumn.exist('a[@f = "value1"]') = 1 
```

**[结果](http://sqlfiddle.com/#!3/fdfa9/1/0)**：

```
|                                                                                                              XMLCOLUMN |
--------------------------------------------------------------------------------------------------------------------------
|         <a f="value1" b="value2" c="value3" d="value4"/><a f="value5" b="value6" c="value7" d="value8" Case="value9"/> |
| <a f="value1" b="value15" c="value16" d="value17"/><a f="value10" b="value11" c="value12" d="value13" Case="value14"/> | 
```

# python - Python subproces.call 未按预期工作

> ID：14660780
> 
> 赞同：0
> 
> 时间：2013-02-02T10:08:12.097
> 
> 标签：python, subprocess

我无法让 subprocess.call() 正常工作：

```
>>> from subprocess import call
>>> call(['adduser', '--home=/var/www/myusername/', '--gecos', 'GECOS', '--disabled-login', 'myusername'], shell=True)
adduser: Only one or two names allowed.
1 
```

但是没有 shell=True：

```
>>> call(['adduser', '--home=/var/www/myusername/', '--gecos', 'GECOS', '--disabled-login', 'myusername'])
Adding user `myusername' ...
Adding new group `myusername' (1001) ...
Adding new user `myusername' (1001) with group `myusername' ...
Creating home directory `/var/www/myusername/' ...
Copying files from `/etc/skel' ...
0 
```

或者直接在shell中相同：

```
root@www1:~# adduser --home=/var/www/myusername/ --gecos GECOS --disabled-login myusername
Adding user `myusername' ...
Adding new group `myusername' (1001) ...
Adding new user `myusername' (1001) with group `myusername' ...
Creating home directory `/var/www/myusername/' ...
Copying files from `/etc/skel' ... 
```

我错过了 shell=True 行为中的一些逻辑。有人可以解释一下为什么吗？第一个例子有什么问题？从 adduser 命令错误消息看来，参数在某种程度上被削弱了。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T10:19:38.833

当您指定 shell=True 时，您会切换到完全不同的行为。从文档：

> 在 shell=True 的 Unix 上，shell 默认为 /bin/sh。如果 args 是字符串，则该字符串指定要通过 shell 执行的命令。这意味着字符串的格式必须与在 shell 提示符下键入时的格式完全相同。这包括，例如，引用或反斜杠转义文件名，其中包含空格。如果 args 是一个序列，则第一项指定命令字符串，任何附加项都将被视为 shell 本身的附加参数。也就是说，Popen 相当于：
> 
> Popen(['/bin/sh', '-c', args[0], args[1], ...])

所以你正在运行相当于

```
/bin/sh -c "adduser" --home=/var/www/myusername/ --gecos GECOS --disabled-login myusername 
```

您收到的错误消息是当您尝试在`adduser`没有任何参数的情况下运行时会发生什么，因为所有参数都被传递给`sh`.

如果你想设置 shell=True 那么你需要这样调用它：

```
call('adduser --home=/var/www/myusername/ --gecos GECOS --disabled-login myusername', shell=True) 
```

或者像这样：

```
call(['adduser --home=/var/www/myusername/ --gecos GECOS --disabled-login myusername'], shell=True) 
```

但大多数情况下，您只想在`call`不使用`shell=True`and 的情况下使用参数列表。按照你的第二个，工作，例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T10:18:56.133

我不是 100% 确定这一点，但我认为如果你指定`Shell=True`，你应该将命令行作为 shell 本身将解释的单个字符串传递：

```
>>> call('adduser --home=/var/www/myusername/ --gecos GECOS --disabled-login myusername', shell=True) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T10:19:04.497

似乎`shell=True`您需要将字符串传递给`args`参数而不是参数列表。

一个简单的测试：

```
In [4]: subprocess.call(['echo', 'foo', 'bar'], shell=True)

Out[4]: 0

In [5]: subprocess.call('echo foo bar', shell=True)
foo bar
Out[5]: 0 
```

即`echo`只有当我使用字符串而不是列表时才得到正确的参数。

Python 版本 2.7.3

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T10:19:06.720

如果 shell 为 True，则指定的命令将通过 shell 执行，即 shell 负责文件名通配符、环境变量扩展等。当您使用 shell=True 时，cmd 是单个字符串，它必须完全按照它的格式进行格式化在 shell 中输入。如果 shell=True 并且 cmd 是一个序列，则第一个参数指定命令，其他参数被视为 shell 本身的参数（通过`-c`开关）。

如果 shell=False，并且提供了一系列参数，模块将负责正确转义和引用参数，例如`~`不会扩展为主目录等。

[在subprocess](http://docs.python.org/2/library/subprocess.html#frequently-used-arguments)文档中阅读有关它的更多信息，并注意与 shell=True 相关的安全隐患。

# delphi - 如何处理到 vcl 的 mime 电子邮件

> ID：14660784
> 
> 赞同：0
> 
> 时间：2013-02-02T10:08:34.993
> 
> 标签：delphi, indy10

我使用 delphi 和 indy 10 运行一个小型电子邮件客户端构建。我收到的一些邮件具有 mime 格式或 html 格式。使用当前代码，我只需将 bode.lines 复制到 memo.lines

```
MyMailMemo.Lines.AddStrings
(TIdMessage(Msg.Body); 
```

如何复制 mime 电子邮件的内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T10:35:15.747

MIME-encoded emails do not use the `TIdMessage.Body` property. They use the `TIdMessage.MessageParts` property instead, where textual MIME parts are stored as `TIdText` objects and attachments are stored as `TIdAttachment`-derived objects. You have to look at the `TIdMessage.ContentType` property to know whether you are working with an HTML email or a MIME email. Even then, chances are that HTML emails are actually MIME encoded, as they usually include an alternative plain-text MIME part for non-HTML email readers. You can loop through the `TIdMessage.MessageParts` looking for a `TIdText` object whose `ContentType` is HTML, then copy the `TIdText.Body` content into your TMemo.

# php - 保存时在magento中编码产品数据

> ID：14660787
> 
> 赞同：1
> 
> 时间：2013-02-02T10:08:43.750
> 
> 标签：php, magento, save, product

我们有一些 magento 产品的文本字段，其值如下

```
<iframe width='465' height='548' frameborder='0' src='http://connect.garmin.com:80/activity/embed/263316017'></iframe> 
```

所以我们想在保存产品时对这个值进行编码，否则这个数据不会被发布。请回复编码帖子数据的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:57:07.820

您可以对帖子数据进行编码，但对帖子数据进行加密和编码可能更省钱。下面是一个小代码示例；

[http://docs.magentocommerce.com/Mage_Core/Mage_Core_Helper_Data.html#encrypt](http://docs.magentocommerce.com/Mage_Core/Mage_Core_Helper_Data.html#encrypt)

```
$encryptedData = Mage::helper('core')->encrypt('this is some data');
$encodedUrl = Mage::getUrl('module/controller/action', 
                               array('parameter'=> $encryptedData); 
```

然后你可以`Mage::helper('core')->decrypt();`用来解密保存的数据。

# ip - 一组ip的telnet脚本

> ID：14660788
> 
> 赞同：0
> 
> 时间：2013-02-02T10:08:44.153
> 
> 标签：ip, telnet

我想要一个脚本：telnet 到一组 Ip。然后运行命令并将输出保存为文本。我找到了一些脚本，但不适合我。

# html - HTML5 视频全屏

> ID：14660791
> 
> 赞同：1
> 
> 时间：2013-02-02T10:08:56.910
> 
> 标签：html, css, css-selectors, html5-video, fullscreen

我尝试制作一个 HTML5 视频播放器。我用 CSS 和 jQuery 创建了自定义控件。但是当我打开全屏模式时，我无法在全屏上看到我的自定义控件。

**全屏模式关闭：**

![在此处输入图像描述](../Images/bb441f72d998b56268053c5c4b9369c1.png)

**全屏模式打开但没有自定义控件：**

![在此处输入图像描述](../Images/c104b335ec5b9e952c8b52d943d38d88.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-26T23:46:29.173

**显示自定义控制器**

请添加`z-index`到您的自定义控件元素

```
#customController{
  -------------------;
  -------------------;
  -------------------;
  z-index: 2147483647;
} 
```

**隐藏本机控制器**

```
video::-webkit-media-controls {
  display:none !important;
}
video::-webkit-media-controls-enclosure {
  display:none !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-27T22:32:26.760

当你全屏时，是视频元素获得全屏，而不是包含控件和视频的容器。

例如

```
<div class='container'>
    <vido></video>
    <div class='custom-controls'>...</div>
</div> 
```

在 JS 中做

> document.queryselector('.container').video.webkitExitFullscreen()

反而

> document.queryselector('video').video.webkitExitFullscreen()

这应该可行，我已经尝试过了。

# javascript - 在 Opencart 中使用 Javascript 或 JQuery 编码和解码 HTML 实体

> ID：14660794
> 
> 赞同：1
> 
> 时间：2013-02-02T10:09:10.133
> 
> 标签：javascript, jquery, opencart

如何使用 Javascript 或 JQuery 编码和解码 HTML 实体？

我使用 ajax 调用，并以 json 格式获取此数据。我在 var Title 中设置。

```
var Title = "&lt;p&gt;? &lt;span style=&quot;color: rgb(0, 0, 0); font-family: Helvetica, Verdana, Geneva, Arial, sans-serif; font-size: 15px;&quot;&gt;Bananas have thick inedible skins that turn yellow or red when ripe. As the most popular fruit in the world, they grow on trees in the subtropics and tropics. You can eat some varieties after skinning them, but some are inedible raw&lt;/span&gt;&lt;/p&gt;?" 
```

我希望它是：

```
varTitle = "Bananas have thick inedible skins that turn yellow or red when ripe. As the most popular fruit in the world, they grow on trees in the subtropics and tropics. You can eat some varieties after skinning them, but some are inedible raw."; 
```

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:28:54.283

使用`UrlDecode()`此功能。也许它会帮助你。

# matrix - 如何通过枢轴点旋转计算svg变换矩阵

> ID：14660796
> 
> 赞同：3
> 
> 时间：2013-02-02T10:10:05.027
> 
> 标签：matrix, svg, svg-animate

如果存在具有默认枢轴点（0,0）的svg旋转（度），那么我可以将旋转变换矩阵计算为

```
 _                    _
| cos a   -sin a   0   |
| sin a    cos a   0   |
|   0       0      1   |
 -                    - 
```

但是如果枢轴点不是（0,0），让我们说（px，py）那么我如何计算旋转变换矩阵？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T10:50:15.450

我得到了答案，

让枢轴点是**（px，py）**，旋转是**度数** ，那么网络变换矩阵将是

```
 _          _        _                      _    
                  |   1  0  px |      |   cos a    -sin a   0  |   
    net_matrix =  |   0  1  py |  X   |   sin a     cos a   0  |   
                  |   0  0  1  |      |     0         0     1  |   
                   -          -        -                      -    

                                               _             _
                                              |   1   0   -px |
    rotate_transform_matrix =  net_matrix  X  |   0   1   -py |
                                              |   0   0     1 |
                                               -             - 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T18:06:42.943

您可以使用 javascript 对 svg 元素应用旋转变换：

```
var rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
rect.setAttribute('transform', 'rotate(-30 50 50)');
rect.getCTM(); 
```

得到 TransformMatrix。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-15T11:01:54.080

只需乘以（并整理结果以使用与 W3C 相同的变量名称），以防其他阅读本文的人想要明确的东西。

```
rotate(a, cx, cy) 
```

相当于

```
matrix(cos(a), sin(a), -sin(a), cos(a), cx(1 - cos(a)) + cy(sin(a)), cy(1 - cos(a)) - cx(sin(a))) 
```

使用数学符号假设`rotate`和`matrix`是函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-23T05:12:25.833

对于任何对上述 Swarnendu Paul 感兴趣的人`rotate_transform_matrix`，都会得到：

```
 _                                               _
| cos a   -sin a   px * (1 - cos a) + py * sin a  |
| sin a    cos a   py * (1 - cos a) - px * sin a  |
|   0        0                  1                 |
 ¯                                               ¯ 
```

我将它用于 SVG 矩阵变换。

# nhibernate - 通过 NHibernate 在数据库中插入错误的值

> ID：14660798
> 
> 赞同：-1
> 
> 时间：2013-02-02T10:10:23.850
> 
> 标签：nhibernate

当我想插入一个`float`类似的值`400.79`时，它会自动插入`400.790008544922`到 NHibernate 中。那么，为什么它会插入错误的值呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T10:24:06.093

我希望您的浮点数在您的代码中或在 NHibernate 映射到基础数据表中通过双精度。

如果我在 LINQPad 中尝试这个：

```
float f = 400.79F;
double d = f;
d.Dump(); 
```

输出是：`400,790008544922`

根据[这篇](http://devio.wordpress.com/2012/08/08/nhibernate-3-data-type-mapping-for-sql-server/)描述从 .Net 类型到 SqlServer 数据类型的 NHibernate 映射的博客，只有 REAL 类型的数据列（FLOAT(24) 的同义词）映射到浮点数（Single），其他非整数数据类型映射到双精度或十进制。

# android - Toast.makeText() 显示错误

> ID：14660801
> 
> 赞同：1
> 
> 时间：2013-02-02T10:10:54.207
> 
> 标签：android

我正在尝试使用 gps 查找位置，但以下代码片段创建问题。错误显示为

> Toast 类型中的方法 makeText(Context, CharSequence, int) 不适
> 用于参数 (GeocodingMainActivity, String, int)

…………

```
private class MyLocationListener implements LocationListener {

 public void onLocationChanged(Location location) {
     String format = String.format( "New Location \n Longitude: %1$s \n Latitude: %2$s", location.getLongitude(), location.getLatitude());
    String message = format;
     Toast.makeText(GeocodingMainActivity.this, message, Toast.LENGTH_LONG).show();
 }

 public void onStatusChanged(String s, int i, Bundle b) 
 {Toast.makeText(GeocodingMainActivity.this, "Provider status changed",Toast.LENGTH_LONG).show();
 }

 public void onProviderDisabled(String s) {
     Toast.makeText(GeocodingMainActivity.this,"Provider disabled by the user. GPS turned off",Toast.LENGTH_LONG).show();
 }

 public void onProviderEnabled(String s) {
     Toast.makeText(GeocodingMainActivity.this,"Provider enabled by the user. GPS turned on",Toast.LENGTH_LONG).show();
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T10:12:53.230

尝试这个...

```
Toast.makeText(getApplicationContext(), "message", Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T12:33:37.003

试试这个代码

```
 Toast.makeText(MyAndroidAppActivity.this,"String!", Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-14T11:55:00.317

用以下代码替换您的 MyLocationListener。并在您使用 MyLocationListener 时传递上下文。

```
private class MyLocationListener implements LocationListener {
     private Activity mContext;
     public MyLocationListener(Activity context) {    
        this.mContext = context;
 }
 public void onLocationChanged(Location location) {
     String format = String.format( "New Location \n Longitude: %1$s \n Latitude: %2$s", location.getLongitude(), location.getLatitude());
     String message = format;
     Toast.makeText(mContext, message, Toast.LENGTH_LONG).show();
 }

 public void onStatusChanged(String s, int i, Bundle b) 
 {
      Toast.makeText(mContext, "Provider status changed",Toast.LENGTH_LONG).show();
 }

 public void onProviderDisabled(String s) {
     Toast.makeText(mContext,"Provider disabled by the user. GPS turned off",Toast.LENGTH_LONG).show();
 }

 public void onProviderEnabled(String s) {
     Toast.makeText(mContext,"Provider enabled by the user. GPS turned on",Toast.LENGTH_LONG).show();
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-14T11:49:00.850

```
String address=locationText.getText() + "\n"+addresses.get(0).getAddressLine(0)+", "+
                        addresses.get(0).getAddressLine(1)+", "+addresses.get(0).getAddressLine(2);
                Toast.makeText(getApplicationContext(),address,Toast.LENGTH_LONG).show(); 
```

# django - django virtualenv vs 存储库包

> ID：14660802
> 
> 赞同：0
> 
> 时间：2013-02-02T10:11:00.520
> 
> 标签：django, virtualenv

我是 django 的新手，我正在尝试找出构建项目的更好方法：

*   为每个项目构建自己的 virtualenv（包括核心 django 包，可通过 systemm 存储库获得）项目

或者

*   使用 debian 存储库中的软件包（如果可用，否则将其放入 virtualenv）。

据我了解，如果有任何安全更新，存储库版本将尽快收到补丁，但是 virtualenv 版本我需要自己打补丁。但是，如果移动到另一个服务器虚拟会导致更少的问题，然后是存储库版本。

最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T11:15:07.770

据我所知`virtualenv`，几乎每个 django 开发人员都在使用。

在您的版本中添加版本也是一种很好的做法，`requirements.txt`这样如果某些包发生更改，您的项目就可以在生产中运行。

我认为`virtualenv`实际上是`best practice`使用 Python 进行开发（不仅仅是使用 Django）

# c++ - 混合运行时/编译时条件下的标记调度

> ID：14660810
> 
> 赞同：2
> 
> 时间：2013-02-02T10:11:29.750
> 
> 标签：c++, templates, c++11, variadic-templates, boost-fusion

我有以下标签调度代码（参见[LiveWorkSpace](http://liveworkspace.org/code/uj8P1%243)）

```
#include <iostream>

// traits types
struct A {}; struct B {}; struct C {};

// helpers
void fun_impl(bool, A) { std::cout << "A\n"; }
void fun_impl(bool, B) { std::cout << "B\n"; }

// would like to eliminate this
void fun_impl(bool b, C) 
{ 
  if(b) 
    fun_impl(b, A()); 
  else 
    fun_impl(b, B()); 
}

template<typename T>
void fun(bool b, T t)
{
    // T = A, B, or C
    fun_impl(b, t);        
}

int main()
{
    fun(true,  A()); // "A"
    fun(false, A()); // "A"
    fun(true,  B()); // "B"
    fun(false, B()); // "B"
    fun(true,  C()); // "A"
    fun(false, C()); // "B"
} 
```

但是，这个标签调度与函数密切相关`fun`，我需要维护 3 个辅助函数来为每个使用它的函数实现这个标签调度。

**参数推导失败**：我试图将 抽象`fun_impl`为函数对象的模板参数`mixed_dispatch`，但如果我随后作为参数传递`fun_impl`，则无法推断出应该需要 2 个重载中的哪一个。

```
template<typename T>
struct mixed_dispatch
{
    template<typename Fun>
    void operator()(Fun f, bool b)
    {
        return f(b, T());
    }
};

template<>
struct mixed_dispatch<C>
{
    template<typename Fun>
    void operator()(Fun f, bool b)
    {
        if (b) 
           return f(b, A());
        else
           return f(b, B());
    }
};

template<typename T>
void fun(bool b, T)
{
    // T = A, B, or C
    mixed_dispatch<T>()(fun_impl, b); // ERROR: Fun cannot be deduced   
} 
```

**问题**：有没有其他方法可以将标签调度与被调用的函数分离？

我愿意接受任何使用 C++11 可变参数模板 / Boost.Fusion 或其他简化我当前代码的魔法的建议（我现在必须为使用此特定调度的每个函数维护 3 个而不是 2 个辅助函数，并且还有更多复杂的分派帮助函数的数量增长得更快）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:30:33.017

要选择其中一个重载函数，至少您必须告诉编译器目标函数的参数类型。所以我们可以将它们添加为模板类的类型参数`mixed_dispatch`

```
template < typename Tag, typename... Args >
class mixed_dispatch {
    std::function<void(Tag,Args...)> invoke;

public:
    // for overloaded functions
    mixed_dispatch( void(&f)(Tag,Args...) ) : invoke( f ) { }

    // for function objects
    template < typename F >
    mixed_dispatch( F&& f ) : invoke( std::forward<F>(f) ) { }

    void operator()( Args... args ) const {
        invoke( Tag(), args... );
    }
}; 
```

现在`mixed_dispatch`成为一个包装器，可帮助您将`Tag`对象传递给目标函数。如您所见，我们需要更改目标函数的签名（有点工作）。

```
void fun_impl(A1, bool) { std::cout << "A1\n"; } 
```

在客户端代码中，例如`fun`：

```
template< typename T >
void fun( bool b, T )
{
    using dispatcher = mixed_dispatch<T,bool>;
    dispatcher d = fun_impl;
    d( b );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T11:40:49.447

它是否回答了您的任何问题？

```
// traits types
struct A1 {}; struct B1 {};
struct A2 {}; struct B2 {};

template<class T1, class T2>
struct TypeSelector
{
    typedef T1 TTrue;
    typedef T2 TFalse;
};

typedef TypeSelector<A1, B1> C1;
typedef TypeSelector<A2, B2> C2;

// helpers
void fun_impl(bool, A1) { std::cout << "A1\n"; }
void fun_impl(bool, B1) { std::cout << "B1\n"; }
void fun_impl(bool, A2) { std::cout << "A2\n"; }
void fun_impl(bool, B2) { std::cout << "B2\n"; }

template<class TSel>
void fun_impl(bool b, TSel) { if(b) fun_impl(b, typename TSel::TTrue()); else fun_impl(b, typename TSel::TFalse()); }

template<typename T>
void fun(bool b, T t)
{
    // T = A, B, or C
    fun_impl(b, t);
}

int main()
{
    fun(true,  A1()); // "A1"
    fun(false, A1()); // "A1"
    fun(true,  B1()); // "B1"
    fun(false, B1()); // "B1"
    fun(true,  C1()); // "A1"
    fun(false, C1()); // "B1"
    fun(true,  C2()); // "A2"
    fun(false, C2()); // "B2"
} 
```

或者您想在其他“维度”中简化代码？

# c# - 对象当前在别处使用

> ID：14660815
> 
> 赞同：5
> 
> 时间：2013-02-02T10:12:11.837
> 
> 标签：c#, locking

我收到了这个错误，看起来是因为不同的线程正在访问同一个 Bitmap 对象。但是，我到处都在使用锁。

```
public class MySingleInstanceClass
{
    private Object locker = new Object();

    private Bitmap myImage = new Bitmap(100, 100);

    public Bitmap MyImage
    {
        get
        {
            lock (locker)
                return myImage;
        }
        private set
        {
            lock (locker)
                myImage = value;
        }
    }

    private void Refresh()
    {
        lock (locker)
        {
            var g = Graphics.FromImage(myImage);
            // do more processing
        }
    }
} 
```

类`MySingleInstanceClass`将只有一个实例。`MyImage`对和`Refresh()`可能来自不同线程的调用。据我了解，里面的代码`lock(locker)`在另一个线程中完成之前不会被执行，但我仍然得到错误。任何人都可以指出代码中的缺陷吗？

异常看起来像这样：

> System.Drawing.dll 中出现“System.InvalidOperationException”类型的第一次机会异常
> 
> 错误：对象当前正在其他地方使用。
> 
> 在 System.Drawing.Graphics.FromImage（图像图像）
> 
> at（指向包含 var g = Graphics.FromImage(myImage); 的行）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-02T10:18:48.867

`locker`对象不是静态的；因此每个新实例都会创建自己的储物柜；如果使用多个对象，您需要创建`locker`为静态以防止其他线程访问。

```
private static Object locker = new Object(); 
```

对于单对象场景，使用非静态类级别变量作为储物柜是合适的。如果你使用这种场景，我觉得 Singleton 的实现有一些问题。

更新：

```
public sealed class MySingleInstanceClass
{
    private static volatile MySingleInstanceClass instance;
    private static object syncRoot = new Object();
    private Bitmap myImage;

    private MySingleInstanceClass() 
    {
        myImage = new Bitmap(100, 100);
    }

    public static MySingleInstanceClass Instance
    {
        get
        {
            if (instance == null)
            {
                lock (syncRoot)
                {
                    if (instance == null)
                        instance = new MySingleInstanceClass();
                }
            }

            return instance;
        }
    }  

    public Bitmap MyImage
    {
        get
        {
            lock (syncRoot)
                return myImage;
        }
        private set
        {
            lock (syncRoot)
                myImage = value;
        }
    }

    public void Refresh()
    {
        lock (syncRoot)
        {
            var g = Graphics.FromImage(myImage);
            // do more processing
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-02T10:39:52.927

被锁定的对象是否是静态的并不重要。问题是`lock(locker)`一旦返回位图，getter 方法的内部就会解锁。返回的位图引用不受锁保护，可以在调用的同时进行修改`Refresh`。

一种可能的解决方案是锁定位图本身，但如果不小心执行，可能会导致死锁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-18T11:01:00.347

在我的应用程序中，最好的解决方案是：

*   将带有文件的 dir 复制到另一个 tmp。目录（带有 guid 名称）
*   每个用户使用 tmp 文件
*   删除包含文件的 tmp 目录

在我的应用程序中有：

*   每个请求时长 1 分钟
*   最大用户数为 120（Intranet 应用程序）
*   没有人愿意等待 5-10 分钟来生成报告

复制几个文件大约增加 0,01-0,2 sek。对于每个请求，最好对所有应用程序进行静态锁定，并且用户不需要等待 10 分钟来生成报告（10 个用户同时单击生成按钮）。

```
 private void DirectoryCopy(string sourceDirName, string destDirName, bool copySubDirs)
    {
        // Get the subdirectories for the specified directory.
        DirectoryInfo dir = new DirectoryInfo(sourceDirName);
        DirectoryInfo[] dirs = dir.GetDirectories();

        if (!dir.Exists)
        {
            throw new DirectoryNotFoundException(
                "Source directory does not exist or could not be found: "
                + sourceDirName);
        }

        // If the destination directory doesn't exist, create it. 
        if (!Directory.Exists(destDirName))
        {
            Directory.CreateDirectory(destDirName);
        }

        // Get the files in the directory and copy them to the new location.
        FileInfo[] files = dir.GetFiles();
        foreach (FileInfo file in files)
        {
            string temppath = Path.Combine(destDirName, file.Name);
            file.CopyTo(temppath, false);
        }

        // If copying subdirectories, copy them and their contents to new location. 
        if (copySubDirs)
        {
            foreach (DirectoryInfo subdir in dirs)
            {
                string temppath = Path.Combine(destDirName, subdir.Name);
                DirectoryCopy(subdir.FullName, temppath, copySubDirs);
            }
        }
    }

        private void DeleteReportExecutionDirectory(string dirPath)
    {
        System.IO.DirectoryInfo downloadedMessageInfo = new DirectoryInfo(dirPath);
        foreach (FileInfo file in downloadedMessageInfo.GetFiles())
        {
            file.Delete();
        }
        foreach (DirectoryInfo dir in downloadedMessageInfo.GetDirectories())
        {
            dir.Delete(true);
        }
        downloadedMessageInfo.Delete();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-22T19:11:45.373

您可以在将其发送到方法之前克隆该图像

```
 Image newimg = (Image)img.Clone(); 
```

# php - 如何重定向保留原始推荐人字段？

> ID：14660818
> 
> 赞同：8
> 
> 时间：2013-02-02T10:12:38.877
> 
> 标签：php, redirect, url-redirection

我有以下 PHP 重定向脚本：

```
if ($country=="IL") { header('Location: http://iquality.itayb.net/index-he.html'); }
else { header('Location: http://iquality.itayb.net/index-en.html'); } 
```

根据`$country`'s 的值，这会将用户重定向到不同的页面。推荐人成为重定向页面本身。

如何保留原始推荐人字段？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-02T11:00:01.380

您不能使用`header('Referer: SOME_REFERER_URL')`，因为浏览器无论如何都会覆盖它。

如果您拥有重定向目标`iquality.itayb.net`，那么有几种方法可以做到这一点：

1.  在用户会话中保存referer。

    ```
    // in your first script save real referer to session
    $_SESSION['REAL_REFERER'] = $_SERVER['HTTP_REFERER'];

    // in the redirected script extract referer from session
    $referer = '';
    if (isset($_SESSION['REAL_REFERER'])) {
        $referer = $_SESSION['REAL_REFERER'];
        unset($_SESSION['REAL_REFERER']);
    }
    else {
        $referer = $_SERVER['HTTP_REFERER'];
    } 
    ```

2.  发送referer作为参数：

    ```
    // in your first script
    header('Location: http://iquality.itayb.net/index-he.html?referer=' . $_SERVER['HTTP_REFERER']);

    // in your refered script extract from the parameter
    $referer = '';
    if (isset($_REQUEST['referer'])) {
        $referer = $_REQUEST['referer'];
    }
    else {
        $referer = $_SERVER['HTTP_REFERER'];
    } 
    ```

如果您想欺骗任何其他服务器，请使用以下内容：

```
$host = 'www.yourtargeturl.com';
$service_uri = '/detect_referal.php';
$vars ='additional_option1=yes&additional_option2=un';

$header = "Host: $host\r\n";
$header .= "User-Agent: PHP Script\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Referer: {$_SERVER['HTTP_REFERER']} \r\n";
$header .= "Content-Length: ".strlen($vars)."\r\n";
$header .= "Connection: close\r\n\r\n";

$fp = fsockopen("".$host,80, $errno, $errstr);
if (!$fp) {
  echo "$errstr ($errno)<br/>\n";
  echo $fp;
} else {
    fputs($fp, "POST $service_uri  HTTP/1.1\r\n");
    fputs($fp, $header.$vars);
    fwrite($fp, $out);

    while (!feof($fp)) {
        echo fgets($fp, 128);
    }
    fclose($fp);
} 
```

# hibernate - 导入 org.hibernate 在 JDeveloper 中不起作用

> ID：14660824
> 
> 赞同：0
> 
> 时间：2013-02-02T10:13:06.480
> 
> 标签：hibernate, jdeveloper

我正在使用 JDeveloper 10g。当我尝试导入 org.hibernate 时，它​​显示不存在错误。我已经使用 Tools-->Manage Libraries 导入了休眠库，然后将路径添加到 jar 文件。我添加了以下罐子：

hibernate3.jar，hibernate-validator-3.0.0.ga60992.jar，

但是错误仍然存​​在，我是在某处遗漏了什么，还是有其他方法可以在 JDeveloper 中导入 jar，或者我是否需要更改配置文件？

谢谢。比斯瓦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:32:53.693

在 JDeveloper 上发布问题时，始终说明 JDeveloper 的确切版本，IDE 在每个版本中都进行了重大改进。以 10g 为例，当时的 10.1.2 和 10.1.3 版本的产品有很大的不同，后来在 IDE 中引入了对 JSF 作为主要公民的支持。

我还想知道您为什么使用这么旧版本的 JDeveloper？但我假设您有正当理由，例如支持旧应用程序。

在解决您的特定问题时，通过 Tools -> Manage Libraries 选项，您只需管理附加到每个库的 JAR，这与您的代码可以访问哪些 JAR 没有直接关系。该库是一个类似模板的函数，用于创建一组命名的 JAR，本质上是一个命名库，然后您可以将其与每个应用程序工作区项目相关联以使用。这样可以省去一次又一次地将每个 JAR 附加到工作区项目的麻烦。

那么从您的帖子中不清楚的是，该库是否与您有兴趣使用 JAR 的工作区项目相关联？您可以通过右键单击您有兴趣从中访问 JAR 的项目来确定这一点，选择 Project Properties -> Libraries and Classpaths，然后使用 Add Library 按钮附加相关库。或者，通过相同的选项集，您可以直接添加 Hibernate JAR，而无需使用库工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:38:02.027

您将库添加到工具而不是您的项目中。进入项目属性并在库部分下直接添加 JAR 或您创建的库。

# c - make: *** 没有规则来制作目标“gcc”，这是“libmy.so”所需要的。停止

> ID：14660829
> 
> 赞同：0
> 
> 时间：2013-02-02T10:13:16.587
> 
> 标签：c, makefile, shared-libraries

我想将 .c 文件编译为 .so（共享库）。而且我不明白为什么，我有那个使我出错的makefile：

```
LIB = libmy.so

SRC =   lib.c

CC = gcc

OBJ = $(CC) -c -fPIC $(SRC)

all: $(LIB)

re: fclean all

$(LIB): $(OBJ)
        $(CC) -shared -fPIC $(OBJ) -o $(LIB)

clean:
        $(RM) $(OBJ)

fclean: clean
        $(RM) $(LIB) 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T10:17:52.253

问题出在以下行：

```
$(LIB): $(OBJ) 
```

展开后变成：

```
libmy.so : gcc -c -fPIC lib.c 
```

因此错误。

您可能想要的是：

```
OBJ = lib.o 
```

为了节省您必须手动将所有`.c`源文件转换为`.o`您可以使用这样的规则而不是`OBJ = lib.o`：

```
OBJ = $(SRC:%.c=%.o) 
```

这将创建一个变量`OBJ`，其中包含所有文件的列表，`SRC`其中任何`.c`扩展名都更改为`.o`. 例如。如果我们有，`SRC = foo.c bar.c`那么上面的规则将自动扩展为：

```
OBJ = foo.o bar.o 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T10:18:46.090

```
$(LIB): $(OBJ) 
```

扩展到

```
libmy.so: gcc -c -fPIC $(SRC) 
```

即你把你的食谱放到依赖列表中，然后理所当然地抱怨。

就个人而言，我会这样编写makefile：

```
CC := gcc
RM := rm -f

LIB := libmy.so
OBJ := lib.o
GARBAGE := $(OBJ)

.PHONY: all clean realclean

all: $(LIB)

$(LIB): LDFLAGS += -shared
$(LIB): $(OBJ)
    $(CC) $(LDFLAGS) -o $@ $<

$(OBJ): CFLAGS += -fPIC
$(OBJ): %.o : %.c
    $(CC) $(CFLAGS) -c -o $@ $<

realclean: GARBAGE += $(LIB)
clean realclean:
    $(RM) $(GARBAGE) 
```

请注意，您的原始版本不包含要制作的规则`$(OBJ)`。如果你想使用隐式的，你需要添加`-fPIC`到`CFLAGS`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T18:20:24.013

这样可行 ：

```
LIB = libmy.so

SRC =   lib.c

CC = gcc

OBJ = $(SRC:.c=.o)

all: $(LIB)

re: fclean all

$(LIB):
        $(CC) -c -fPIC $(SRC)
        $(CC) -shared -fPIC $(SRC) -o $(NAME)
clean:
        $(RM) $(OBJ)

fclean: clean
        $(RM) $(LIB) 
```

我只需要`OBJ = $(SRC:.c=.o)`在`fclean`

# winforms - 如何在一个 winform 上将特定的 gridview 行数据显示到另一个 winforms 组合框

> ID：14660832
> 
> 赞同：0
> 
> 时间：2013-02-02T10:13:35.520
> 
> 标签：winforms, c#-4.0

我正在使用 win 表单来搜索记录，并且当从 celldoubleclick 事件的网格中选择记录时。应关闭搜索表单，并将选定的行记录加载回主表单，从中开始调用搜索表单。

打开搜索表单的代码。

```
private void F1Button_Click(object sender, EventArgs e)
    {
        Forms.frmSearchNewAccount frm = new Forms.frmSearchNewAccount();
        frm.ShowDialog();
        if (frm.DialogResult == System.Windows.Forms.DialogResult.OK)
        {
            //here comes the selected record
        }
    } 
```

//搜索表单网格视图单元格双击事件代码在这里

```
try
        {
            if (e.RowIndex >= 0)
            {
                this._SelectedRecord = new Flour_Mills.PARTY();
                _SelectedRecord.PARTY_ID = (string)((DataTable)SearchPartydataGrid.DataSource).Rows[e.RowIndex]["PARTY_ID"];
                _SelectedRecord.NAME = (string)((DataTable)SearchPartydataGrid.DataSource).Rows[e.RowIndex]["NAME"];
                Controller.PartyDAL.Load(_SelectedRecord.PARTY_ID);
                DialogResult = System.Windows.Forms.DialogResult.OK;
                this.Close();
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        } 
```

_selectedRecord 是一个静态变量，但在主窗体中不可访问。

有什么建议吗？？？如果您需要更多解释，我会在这里详细说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:20:30.640

简单地说，它可以这样做：

```
public var _selectedRecordFromSearchForm;

private void F1Button_Click(object sender, EventArgs e)
{
    Forms.frmSearchNewAccount frm = new Forms.frmSearchNewAccount();
    frm.ShowDialog(this); // pass this form as Owner
    if (frm.DialogResult == System.Windows.Forms.DialogResult.OK)
    {
        //here comes the selected record
    }
} 
```

在搜索表格中：

```
this._SelectedRecord = new Flour_Mills.PARTY();
_SelectedRecord.PARTY_ID = (string)((DataTable)SearchPartydataGrid.DataSource).Rows[e.RowIndex]["PARTY_ID"];
_SelectedRecord.NAME = (string)((DataTable)SearchPartydataGrid.DataSource).Rows[e.RowIndex]["NAME"];
Controller.PartyDAL.Load(_SelectedRecord.PARTY_ID);
this.Owner._selectedRecordFromSearchForm = _SelectedRecord;  // set _searchRecoed to owners field
DialogResult = System.Windows.Forms.DialogResult.OK;
this.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T11:57:33.473

您可以在搜索表单中声明`_SelectedRecord`为公开，当表单关闭时，您可以像这样访问变量：

```
 if (frm.DialogResult == System.Windows.Forms.DialogResult.OK)
    {
        var SelectedRecord = frm._SelectedRecord;
    } 
```

# class - Magento：自定义模块错误（在 Layout.php 中找不到类）

> ID：14660833
> 
> 赞同：1
> 
> 时间：2013-02-02T10:13:46.213
> 
> 标签：class, magento, module, block, fatal-error

我尝试在 Magento 中创建一个新的自定义模块（块），它将在产品详细信息页面上显示制造商的其他产品。当我加载产品详细信息页面时，我得到：

```
Fatal error: Class 'AimIT_ManufacturerBlock_Block_Manufacturerblock' not found in ..\app\code\core\Mage\Core\Model\Layout.php on line 491 
```

我创造了：

1)\app\etc\modules\AimIT_ManufacturerBlock.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
  <modules>
    <AimIT_ManufacturerBlock>
      <!-- Whether our module is active: true or false -->
        <active>true</active>
        <!-- Which code pool to use: core, community or local -->
          <codePool>local</codePool>
        </AimIT_ManufacturerBlock>
      </modules>
    </config> 
```

2) \app\code\local\AimIT\ManufacturerBlock\etc\config.xml

```
<?xml version="1.0"?>
<config>
  <global>
    <blocks>
      <aimitmanufacturerblock>
        <class>AimIT_ManufacturerBlock_Block</class>
      </aimitmanufacturerblock>
    </blocks>
  </global>
</config> 
```

3) \app\code\local\AimIT\ManufacturerBlock\Block\Manufacturerblock.php

```
<?php
class AimIT_ManufacturerBlock_Block_Manufacturerblock extends Mage_Core_Block_Template 
{    
    public function getManufacturerProducts($manufacturer)
    {
        $collection = Mage::getModel('catalog/product')->getCollection();
        $collection->addAttributeToFilter('manufacturer',$manufacturer);
        $collection->addAttributeToSelect('manufacturer');

        return $collection;
    }
}
?> 
```

4)\app\design\frontend\default\respond\template\aimit\manufacturerblock\manufacturerblock.phtml

```
<?php $_products = $this->getManufacturerProducts('cukrarna-u-vanku') ?>
<?php print_r($_products); ?> 
```

5) 在 catalog\product\view.phtml 我放置了这段代码：

```
<?php echo $this->getLayout()->createBlock('aimitmanufacturerblock/manufacturerblock')->setTemplate('aimitmanufacturerblock/manufacturerblock.phtml')->toHtml(); ?> 
```

创建模块时我省略了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T15:03:45.493

将“aimitmanufacturerblock/manufacturerblock”翻译成 Magento 生成的类名`AimIT_ManufacturerBlock_Block_Manufacturerblock`时，找不到该名称下的类，因为您的块的类名实际上是“AimIT_ManufacturerBlock_Block_ManufacturerBlock”——大小写错误。

将您的课程重命名为

```
class AimIT_ManufacturerBlock_Block_Manufacturerblock extends Mage_Core_Block_Template 
{ 
```

将您的类文件`ManufacturerBlock`.php 重命名为`Manufacturerblock.php`

# batch-file - 几乎准备好了：批处理脚本从每个子文件夹中保存文件名而不带扩展名，并将文件名保存在每个子文件夹中的 txt 中

> ID：14660834
> 
> 赞同：0
> 
> 时间：2013-02-02T10:13:48.727
> 
> 标签：batch-file, filenames

```
@echo off
chcp 1252
for /r %%a in (*) do echo %%~na >> D:\filenames.txt
echo. >> D:\filenames.txt 
```

此脚本将所有子文件夹的所有文件名保存在 .txt 中的一个 txt 中`d:\filenames.txt`。我需要什么：脚本需要读出子文件夹的文件名并在该子文件夹中保存一个 txt。这适用于每个子文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:13:00.483

```
@echo off
chcp 1252
for /r /d %%D in (.) do (
  pushd "%%D"
  (for %%F in (*) do echo %%~nF) >filenames.txt
  echo(>>filenames.txt
  popd
) 
```

注意：您的使用`%%~n`会从列表中删除文件扩展名。我怀疑您想修剪驱动器和路径信息，但同时包含文件名和扩展名。在您想要使用的原始代码中`%%~nxa`。在此解决方案中，您可以简单地使用`%%F`，因为该值不包含路径信息。但是还有一种更简单的方法：

要同时包含名称和扩展名，我将使用以下内容：

```
@echo off
chcp 1252
for /r /d %%D in (.) do (dir /b /a-d "%%D"&echo() >"%%D\filenames.txt" 
```

# sql-server - 如何检测 SQL Server 数据库已恢复

> ID：14660838
> 
> 赞同：1
> 
> 时间：2013-02-02T10:14:01.077
> 
> 标签：sql-server, database, backup, restore

SQL Server 数据库实例是否有任何独特之处，可以检测到它是否已恢复。如果客户端正在使用数据库并决定在不同的服务器上恢复并运行同一数据库的另一个副本 - 有没有办法通过 t-sql 查询来区分两者？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T11:56:17.020

有几种方法可以将数据库标识为另一个数据库的还原/副本：

*   [`service_broker_guid`](http://msdn.microsoft.com/en-us/library/ms178534.aspx)通常是最简单的方法。它在创建数据库时生成，并在还原/附加操作期间保留。可以使用显式更改它，`ALTER DATABASE ... SET NEW_BROKER;`因此不同的 GUID 不一定意味着不同的数据库。但相同的 GUID 意味着数据库的共同来源。
*   [dbi_familyGUID](http://www.sqlskills.com/blogs/paul/search-engine-qa-20-boot-pages-and-boot-page-corruption/)是在还原时保留的未记录引导页字段。
*   恢复路径和[恢复分支 LSN](http://msdn.microsoft.com/en-us/library/ms175078%28v=sql.105%29.aspx)已记录在案，可用于识别共同来源，但它们快速分歧，即使最近恢复的数据库也会很快失去与另一个数据库共同来源的痕迹，只需使用分支 LSN。
*   加密的数据库（[TDE](http://msdn.microsoft.com/en-us/library/bb934049.aspx)可以通过页面 nonce 轻松识别（未记录的方法，需要专业知识），只要不更改加密密钥（即不强制完全重新加密，丢失所有 nonce）。
*   应用层方法可以使用代码签名：生成密钥对、签署虚拟模块、删除私钥。由于签名永远无法重新生成（私钥被永久删除），因此数据库的副本无法隐藏其来源而不删除签名，这显然是[篡改](http://en.wikipedia.org/wiki/Tamper-evident)的。

如您所见，有多种方法，所需的专业知识水平和它们提供的篡改证据的程度各不相同。它归结为您的要求和实际用例。最后，请记住 SQL Server**不是**DRM 产品。如果您有一些您认为非常宝贵且必须受到保护的代码/设计，那么您应该将应用程序作为托管服务提供，以便该感知 IP 永远不会离开您的物理控制环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:48:05.277

数据库开发人员和管理员经常使用 GUID 作为数据库表的主键，以确保数据库之间的唯一性。有关比较 GUID 的材料：http: [//msdn.microsoft.com/en-us/library/ms254976.aspx](http://msdn.microsoft.com/en-us/library/ms254976.aspx)

# java - 从jar文件访问文件夹

> ID：14660839
> 
> 赞同：0
> 
> 时间：2013-02-02T10:14:07.163
> 
> 标签：java

我正在尝试使用一个 jar 文件，它本身就是另一个 web 项目中的 web 应用程序。在我使用 eclipse 的导出到 jar 功能创建的 jar 中，我将 owl 文件存储在一个文件夹中。要在 jar 中的代码中使用相对路径，我使用

```
MyClass.class.getResource("/folderName").getPath(); 
```

当我部署（glassfish）并将项目用作单独的应用程序时，这可以正常工作。但是当我在另一个项目中使用相同的东西时，我改变了路径，如：

```
 BufferedReader br = new BufferedReader(new InputStreamReader(MyClass.class.getResourceAsStream("/folderName"), "UTF-8"));

ArrayList<File> filesFromCommonOntology = new ArrayList<File>();
while(str = br.readLine() != null)
{
  File f = new File(line);
  System.out.println(f);
  filesFromCommonOntology.add(f);
}
for (int i = 0; i < filesFromCommonOntology.size(); i++)
{

file =  filesFromCommonOntology.get(i);
    String filePath = file.getPath();
    Model timeModel = FileManager.get().loadModel(filePath,
ApplicationConstants.N3);
  } 
```

但是当我运行项目时，我得到了行的空指针异常

```
BufferedReader br = new BufferedReader(new InputStreamReader(MyClass.class.getResourceAsStream("/folderName"), "UTF-8")); 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T10:25:08.950

将应用程序打包到 jar 中时，您无法枚举文件夹中的文件。甚至很难想象这是如何工作的：您将文件夹作为输入流打开并以这种方式读取文件名（在该文件夹中）？

最简单的方法是在文件夹中添加一个包含条目的文本文件，可能带有一些描述。MyClass.class.getResourceAsStream 应该从 jar 中打开文件（而不是文件夹）。

如果您有大量文件，您也可以尝试将自己的 jar 重新打开为 ZipFile，然后您可以使用 ZipFile API 在您的文件夹中搜索条目。然而，这更复杂。

# javascript - 添加等待后骨干集合未更新：true

> ID：14660841
> 
> 赞同：1
> 
> 时间：2013-02-02T10:14:34.703
> 
> 标签：javascript, jquery, backbone.js

**设想**

我正在使用主干制作联系人管理器。我有一个表单，当用户输入数据并按下提交按钮时，用户的数据会进入服务器并将其保存在数据库中。

**问题**

在将其添加到数据库之前，它确实有效。但是，我也想在添加到数据库后更新集合。出于这个原因，我使用以下代码行来更新集合。

```
addContact: function (e) {
    e.preventDefault();

    this.collection.create({
        first_name: this.$('#first_name').val(),
        last_name: this.$('#last_name').val(),
        email_address: this.$('#email_address').val(),
        description: this.$('#description').val()
    }, { wait: true });

    console.log(this.collection);
} 
```

上面的函数确实将数据添加到数据库，但它不更新集合。但是当我删除它时`{wait: true}`，它会更新这个集合。

**问题**

为什么`wait: true`不允许更新集合，我怎样才能使它工作`wait: true`？

**更新**

我还添加了如下回调函数

```
{wait: true, success: this.successCallback} 
```

并像这样添加了该功能

```
successCallback: function (collection) {
    console.log('call back');
    console.log(this.collection);
} 
```

但它在控制台中没有显示此功能？

**更新 2**

错误函数截图

![在此处输入图像描述](../Images/7f18e629707b7f0badef0301364c444e.png)

**更新 3**

xhr 截图

![在此处输入图像描述](../Images/82ac3dad314fc8e67ae00f5feaf4d94e.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-29T15:29:47.623

我有同样的问题（甚至是相同的代码）。在我的后端，我有：

```
Contact::create([
'first_name' => Input::get('first_name'),
'last_name' => Input::get('last_name'),
'email_address' => Input::get('email_address'),
'description' => Input::get('description')
]); 
```

它以状态 200 OK 响应，但我的收藏尚未更新。我google了很多，但没有找到解决方案。

我的后端代码没有向脚本返回任何内容，所以我决定测试返回 smth 是否会做出改变。所以我将我的后端代码更新为：

```
$contact = Contact::create([
'first_name' => Input::get('first_name'),
'last_name' => Input::get('last_name'),
'email_address' => Input::get('email_address'),
'description' => Input::get('description')
]);
return $contact; 
```

现在它起作用了！在这两种情况下，请求都以 200 OK 响应，但只有当它返回数据时才会触发“成功”事件。

希望对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T10:40:33.940

我最好的猜测是，虽然服务器接受了新创建的模型，但它无法以状态 200 响应。另外，我建议您检查`success`内部函数中发生的情况`Backbone.Collection`，这将有助于您更准确地定位问题。

# intellij-idea - 如何让所有以“ng-”开头的属性在IntelliJ-IDEA中注入语言javascript？

> ID：14660845
> 
> 赞同：0
> 
> 时间：2013-02-02T10:15:37.090
> 
> 标签：intellij-idea

我正在使用 IntelliJ-Idea 来编辑 html 文件。IDEA中有一个有用的特性叫做“语言注入”，我可以很容易地配置一些属性（例如ng-model/ng-controller）来用javascript注入，但我不知道如何配置所有启动的属性与`ng-`？

![在此处输入图像描述](../Images/ddcfbfff608a89c63b61e8d7d9aa7eae.png)

看上图，有一个重要的“Places Pattern”，怎么配置呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:17:54.257

你应该使用

```
+ xmlAttribute().withLocalName(string().startsWith("ng-")) 
```

作为**Places Pattern**。

# android - 弹出窗口 Android 异常

> ID：14660846
> 
> 赞同：0
> 
> 时间：2013-02-02T10:15:49.370
> 
> 标签：android, popupwindow

我想在 android 中显示一个 popupWindow 我做了以下操作：

```
public class MyPopUp extends PopupWindow   {

    private View view;
    private Context context;

    public MyPopUp (Context context)
       {
        super(context);
       this.context = context;
    View myView = new myView(context);
    this.setContentView(myView );
        setHeight(WindowManager.LayoutParams.WRAP_CONTENT);
        setWidth(WindowManager.LayoutParams.WRAP_CONTENT);
    }

    public void showPopUp(){

        view = new View(context);
        this.showAtLocation(view, Gravity.CENTER, 0, 0);

    }
     } 
```

这条线上有一个例外

**this.showAtLocation(view, Gravity.CENTER, 0, 0);**

```
02-02 09:13:31.456: ERROR/AndroidRuntime(458): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.popup.mypopup/com.popup.mypopup.Android_2_Activity}: java.lang.NullPointerException 
```

当调用 showPopUp 时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:26:26.737

尝试这个

```
public MyPopUp (Context context){

    final Dialog dialog = new Dialog(context);
            dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
            dialog.setContentView(R.layout.custome_dialog);

            Button dialogCancel = (Button) dialog
                    .findViewById(R.id.btnCancelPassword);
            Button dialogSubmit = (Button) dialog
                    .findViewById(R.id.btnSubmitPassword);
            dialogSubmit.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {

                    dialog.dismiss();
                }
            });
            dialogCancel.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    dialog.dismiss();
                }
            });
            dialog.show();

} 
```

# django - Heroku：执行查询但没有 postgresql 日志

> ID：14660848
> 
> 赞同：3
> 
> 时间：2013-02-02T10:15:54.113
> 
> 标签：django, postgresql, heroku

*在运行在Heroku*上执行一些数据库查询的特定脚本时，我从回溯中获得的信息量不足以解决我的问题。( `django.db.utils.DatabaseError: current transaction is aborted, commands ignored until end of transaction`)

我想从*postgresl*获取有关该问题的更多信息，我可以[像这样](https://stackoverflow.com/questions/722221/how-to-log-postgres-sql-queries)访问本地 postgresql 的日志。

但是在 Heroku 上，运行`heroku logs -p postgres`根本不会返回任何信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T16:54:48.927

您使用的是初级数据库（开发、基本）吗？他们不提供日志记录。此外，我认为日志中不会显示超过 50 毫秒的查询。

# c# - .NET 数据表到临时 SQL 表

> ID：14660849
> 
> 赞同：1
> 
> 时间：2013-02-02T10:16:00.380
> 
> 标签：c#, .net, vb.net, datatable, sql-server-2008-r2

将 .NET 中的[DataTable放入远程](http://msdn.microsoft.com/en-us/library/system.data.datatable.aspx)[SQL Server](http://en.wikipedia.org/wiki/Microsoft_SQL_Server)实例上的临时 SQL 表中的最快和最有效的方法是什么？

我正在处理的数据表最多可以包含 100,000 条记录，因此我担心性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T10:20:29.410

100k 条记录，您担心性能吗？服务器是手机吗？100 万条记录是 SMALL，1 亿条开始是“想想还是你有问题”的水平，100.00 条记录是我的平板电脑可以有效处理的东西。

去做就对了。SqlBulkCopy 是将数据从 .NET 应用程序向下移动到服务器的最快方式，使用它后您无法再优化很多内容。我定期上传数百万（数千万）条记录，让我的网格进行财务模拟。

# javascript - 从输入属性获取 jquery Map

> ID：14660850
> 
> 赞同：1
> 
> 时间：2013-02-02T10:16:43.997
> 
> 标签：javascript, jquery, json, map

我有一组 inputFields 看起来像：

```
<g:textField name="adrstrasse" data-id="adressen[${i}].strasse" class="newaddr" id="daten_vornametarea" value="${adresse.strasse}"/>
<g:textField name="adrort" data-id="adressen[${i}].ort" class="newaddr" id="daten_vornametarea" value="${adresse.telefon}"/>
<g:textField name="adrtelefon" data-id="adressen[${i}].telefon" class="newaddr" id="daten_vornametarea" value="${adresse.telefon}"/> 
```

我想将它们作为字符串化地图返回，

这样做 ：

```
var addrmap = $('.newaddr').map(function() {
        var $item = $(this);
                return {
        name: $item.data('id'), 
        value: $item.val()
    };
    }).get();
    var neu = JSON.stringify(addrmap); 
    alert(neu); 
```

我得到一张看起来像的地图：

```
[{"name":"adressen[0].strasse","value":"Hanswarft1"},{"name":"adressen[0].ort","value":"Hallig Hooge"},{"name":"adressen[0].telefon","value":"12345678"}] 
```

但我希望它看起来像：

```
[{"adressen[0].strasse":"Hanswarft1"},{"adressen[0].ort":"Hallig Hooge"},{"adressen[0].telefon":"12345678"}] 
```

当我尝试这样的事情时，我当然会遇到语法错误

```
 var addrmap = $('.newaddr').map(function() {
        var $item = $(this);
                return {
        $item.data('id'):
        $item.val(),
    };
    }).get();
    var neu = JSON.stringify(addrmap); 
    alert(neu); 
```

如何返回带有 data-id 作为参数和 value 作为 value 的地图？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T10:20:16.047

这可能会完成这项工作：

```
var addrmap = $('.newaddr').map(function () {
    var $item = $(this);
    var obj = {};

    obj[$item.data('id')] = $item.val();
    return obj;
}).get(); 
```

# perl - 读取目录并将文件内容保存到 Perl 中的新文件

> ID：14660857
> 
> 赞同：0
> 
> 时间：2013-02-02T10:18:01.547
> 
> 标签：perl, file, parsing

我想将一些文件的内容保存到一个新文件中，我执行以下操作：

```
use strict;
use warnings;
use HTML::TreeBuilder::XPath;

my ($dir) = @ARGV;
my @files = glob "details/*";
my $filename = 'target.txt';

for my $file (@files) {
  my $tree = HTML::TreeBuilder::XPath->new_from_file($file);
  my @opacity = $tree->findnodes_as_strings('//div[@class="opacity description"]');
  open my $fh, '>>', $filename;
  print $fh for @opacity; 
} 
```

不幸的是，它不起作用。我不明白为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T11:25:06.880

1.  检查返回值`open`：

    ```
    open my $fh ">>", $filename or die "Can't open $filename: $!"; 
    ```

    当“某事不工作”时，这可以提供宝贵的见解。

2.  您的 for 语法`print`不明确。使用`print`或`say`喜欢

    ```
    print FILEHANDLE LIST
    print {EXPR} LIST     # EXPR has to produce a filehandle object
    print LIST            # prints to the `select`ed filehandle, usually STDOUT
    print                 # prints $_ by default 
    ```

    因此，您要明确指定要打印的内容，并且可能还要在`@opacity`. 所以要么

    ```
    print {$fh} "$_\n" for @opacity; 
    ```

    或`use feature 'say'`（perl 5.10 及更高版本）：

    ```
    say {$fh} $_ for @opacity; 
    ```

# php - 正则表达式，PHP pregmatch 使函数如何在字符串以 start_to_date 开头时返回 true

> ID：14660860
> 
> 赞同：-4
> 
> 时间：2013-02-02T10:18:09.970
> 
> 标签：php, regex

> **可能重复：**
> [PHP：如何检查字符串是否以指定字符串开头？](https://stackoverflow.com/questions/2790899/php-how-to-check-if-a-string-starts-with-a-specified-string)

我正在努力创建一个函数来检查这个字符串是否从 start_to_date 开始，下面是我的实现。

```
$string = 'start_to_date-blablablabla';
if(cek_my_str($string)){
   echo "String is OK";
}

// tes again
$string2 = 'helloworld-blablablabla';
if(cek_my_str($string2)){
   echo "String not OK";
}

function cek_my_str($str){
   // how code to return true if $str is string which start with start_to_date
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T10:24:45.837

要使用 Regex 执行此操作，您将执行以下操作：

```
return preg_match('/^start_to_date/', $str); 
```

主要参考：[http ://www.regular-expressions.info/](http://www.regular-expressions.info/)

但是，[preg_match 状态的 PHP 手册](http://php.net/manual/en/function.preg-match.php)

> 如果您只想检查一个字符串是否包含在另一个字符串中，请不要使用 preg_match()。请改用 strpos() 或 strstr() ，因为它们会更快。

* * *

顺便说一句，你应该看看单元测试：[http ://www.phpunit.de/manual/current/en/](http://www.phpunit.de/manual/current/en/)

这是一种在可重用测试中准确封装您正在执行的操作的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T10:40:47.010

在这种情况下，最好的做法是：

```
if(strpos($string, 'start_to_date') === 0) { ... } 
```

`strpos()`检查 'start_to_date' 是否在位置 0（开始）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T10:24:26.087

怎么样：

```
function cek_my_str($str){
    return preg_match('/^start_to_date/', $str)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T10:28:02.337

```
function cek_my_str($str){
   $find = 'start_to_date';
   $substr = substr($str, 0, strlen($find));
   if($substr == $find){
    return true;
   }else{
    return false;
   }
} 
```

# java - 为什么从 TCL WS 客户端调用 java webservice 时返回额外的头信息

> ID：14660861
> 
> 赞同：1
> 
> 时间：2013-02-02T10:18:17.780
> 
> 标签：java, web-services, tcl, tclws

我开始学习如何使用[tclws](http://core.tcl.tk/tclws/index) api 通过 TCL 客户端调用 JAX-WS webservice。我在 glassfish 服务器上部署了一个简单的计算 web 服务（使用 java/jaxws/netbeans 编写），它被我的 tcl webservice 客户端成功调用。肥皂消息交换看起来很好。但是，在调用 glassfish webservice 后的客户端，我收到了额外的标头，我不确定它是如何返回的，如何处理它以及为什么它显示在我的屏幕上

```
设置 xns [dict get [::WS::Utils::GetServiceTypeDef 客户端计算器WS tns1:add] xns] 定义 {param1 {type xs:int comment {}} param2 {type xs:int comment {}}} xns tns1
结果是：7

```

这是我的示例 tcl ws 客户端代码：

```
package require WS::Client
::WS::Client::GetAndParseWsdl http://xxxx.xx.xx.com:8099/CalculatorWS/CalculatorWS?wsdl
set param1 5
set param2 2
set inputs [list param1 $param1 param2 $param2]
set result [ ::WS::Client::DoCall CalculatorWS add $inputs]
set res [dict get $result return]
puts "result is :$res" 
```

谁能帮助我如何防止打印/显示此标题？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T16:54:06.213

Johannes13 在评论中说了什么。

这不会发生在我的旧版本的 tclws 上，但是下载最新的，那里只剩下一堆 puts 语句用于调试。这很奇怪，因为 tclws 使用 log 包并且在代码中还有大量 ::log::log 调试语句，这将使打开/关闭变得更容易。

要解决您的问题，您只需 grep tclws 包并删除这些行，或者将这些 puts 语句替换为 ::log::log 调试。这不是简单的搜索和替换，因为 tclws 确实使用 puts 来写入服务器代码中的套接字。但是，如果您只使用客户端，则 ClientSide.tcl 和 Utilities.tcl 文件中的实例很少需要手动处理。

# android - 如何制作具有客户价值的选择器？

> ID：14660869
> 
> 赞同：0
> 
> 时间：2013-02-02T10:18:53.933
> 
> 标签：android, android-edittext, picker

我制作了一个 Android 应用程序，我想放置一个值选择器，如下图所示。谁能帮我怎么做？我想要一个有 4 个值`"100","110","125","150"`的选择器，并且选择的值应该设置在`EditText`.

![在此处输入图像描述](../Images/ab0c7b99ddabf1d80a9e5bf1899a7dea.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T20:08:10.680

另一种解决方案是使用 values-> setDisplayedValues 定义一个数字选择器。这可能会有所帮助[http://androidpp.wordpress.com/2013/11/07/numberpicker-als-valuepicker-mit-eigenen-werten/](http://androidpp.wordpress.com/2013/11/07/numberpicker-als-valuepicker-mit-eigenen-werten/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T10:46:10.253

这是我所知道的最接近的东西：[Android 轮](http://code.google.com/p/android-wheel/)

# asp.net - 用 jQuery 绑定 asp.net 数据列表不起作用

> ID：14660875
> 
> 赞同：0
> 
> 时间：2013-02-02T10:19:15.820
> 
> 标签：asp.net, jquery

我看到了几个关于这个话题的帖子。我注意到一个代码。我还在下面的代码 url 上处理了相同的代码。 [**用 jQuery 绑定 asp.net 数据列表**](https://stackoverflow.com/questions/12677249/how-to-bind-datalist-in-jquery)

```
function OnSuccess(response) {
            $("[id*=dlOnFrontPageProducts]").attr("border", "1");
            var xmlDoc = $.parseXML(response.d);
            var xml = $(xmlDoc);
            var customers = xml.find("Table1");
            var row = $("[id*=dlOnFrontPageProducts] tr:last-child").clone(true);
            $("[id*=dlOnFrontPageProducts] tr:last-child").remove();
            $.each(customers, function () {
                alert(this);
                var customer = $(this);
                $(".Name", row).html(customer.find("Name").text());
                $(".BrandName", row).html(customer.find("BrandName").text());
                $(".MarketPrice", row).html(customer.find("MarketPrice").text());
                $(".CurrencyShortName", row).html(customer.find("CurrencyShortName").text());
                $(".Price", row).html(customer.find("Price").text());
                $(".WindowImageUrl", row).html(customer.find("WindowImageUrl").text());
                $(".SaleCount", row).html(customer.find("SaleCount").text());
                $(".IsActive", row).html(customer.find("IsActive").text());
                $("[id*=dlOnFrontPageProducts]").append(row);
                row = $("[id*=dlOnFrontPageProducts] tr:last-child").clone(true);
            });
        }

<asp:DataList    ID="DataList1" runat="server" AutoGenerateColumns="false" Font-Names="Arial"
Font-Size="10pt" RowStyle-BackColor="#A1DCF2" HeaderStyle-BackColor="#3AC0F2" HeaderStyle-ForeColor = "White">
    <ItemTemplate>
     <asp:Label ID="lbldescription"  runat="server" Text='<%# Eval("description")%>'>
         </asp:Label>
     <asp:Label ID="name"  runat="server" Text='<%# Eval("name")%>'>
        </asp:Label>                   
   </ItemTemplate> 
```

如何使用 ajax 和 jquery 进行绑定。我的页面加载页面需要 16 秒。那就是你要使用jquery。

请帮助我找到解决方案....

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T10:24:10.037

您将无法`Bind`通过`DataList`jQuery 控制控件，因为该控件仅在通过服务器端代码绑定时创建，例如在后面的代码上。

如果您想使用 Ajax 和 jQuery 来`bind`控制，那么您最好使用普通的旧 HTML。

或者，将`DataList`与一些数据绑定以便呈现，然后将在页面上创建 HTML 元素，您可以使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T13:39:31.717

我使用回调方法实现了这个概念而没有回发。代码如下

```
 Dim callback As String = ClientScript.GetCallbackEventReference(Me, "message", "processMyResult", "context")
        Dim script As String = "function CallBack(message,context){" + callback + ";}"
        ClientScript.RegisterClientScriptBlock(Me.GetType(), "CB", script:=script, addScriptTags:=True)

 Public Sub RaiseCallbackEvent(ByVal eventArgument As String) Implements System.Web.UI.ICallbackEventHandler.RaiseCallbackEvent
    If (eventArgument) Is Nothing Then

        returnValue = "-1"

    Else

        binddata(eventArgument)
    End If

    Dim sb As System.Text.StringBuilder = New System.Text.StringBuilder()
    Dim sw As System.IO.StringWriter = New System.IO.StringWriter(sb)
    Dim hw As HtmlTextWriter = New HtmlTextWriter(sw)
    gvCustomers.RenderControl(hw)
    returnValue = sb.ToString()

End Sub

Public Function GetCallbackResult() _
As String Implements _
System.Web.UI.ICallbackEventHandler.GetCallbackResult

    Return returnValue

End Function

Public Function binddata(ByVal eventArgument As String) as nullable
    Dim adp As New dsRegistrationTableAdapters.searchPackagesTableAdapter()
    Dim dt As New dsRegistration.searchPackagesDataTable()
    dt = adp.GetData(eventArgument, StartDateTextBox.Text, EndDateTextBox.Text)

    gvCustomers.DataSource = dt
    gvCustomers.DataBind()
    SearchTextBox.Focus()

End Function 
```

感谢你的帮助....

# python - 使用 argparse 的组之间的 Python 依赖关系

> ID：14660876
> 
> 赞同：9
> 
> 时间：2013-02-02T10:19:17.290
> 
> 标签：python, arguments, argparse

我开始学习 Python，现在我正在学习`argparse`. 使用`argparse`，我创建了两组参数：`group_list`和`group_simulate`。每个组都有自己的参数——用户只能在每个组中指定一个参数（使用 实现`parser.add_mutually_exclusive_group()`）。

现在，如果用户从两个 groupgs 而不是仅从其中一个指定参数，我的目标是出现语法错误——我想通过使用的功能`argparse`而不是通过编写询问是否指定 this 和 this 的方法来实现这一点打印语法错误。

```
import argparse
parser = argparse.ArgumentParser(
        description='this is the description',
        epilog="This is the epilog",
        argument_default=argparse.SUPPRESS  
        )

parser.add_argument('-v', '--verbose', help='verbose', action='store_true', default=False)

group_list = parser.add_mutually_exclusive_group()
group_list.add_argument('-m', help='list only modules', action='store_const', dest='list', const='modules', default='all')
group_list.add_argument('-p', help='list only ports', action='store_const', dest='list', const='ports', default='all')
group_list.add_argument('--list', help='list only module or ports', choices=['modules','ports'], metavar='<modules/ports>', default='all')

group_simulate = parser.add_mutually_exclusive_group()
group_simulate.add_argument('-M', help='simulate module down', nargs=1, metavar='module_name', dest='simulate')
group_simulate.add_argument('-P', help='simulate FC port down', nargs=1, metavar='fc_port_name', dest='simulate')
group_simulate.add_argument('-I', help='simulate iSCSI port down', nargs=1, metavar='iSCSI_port_name', dest='simulate')
group_simulate.add_argument('--simulate', help='simulate module or port down', nargs=1, dest='simulate')

args = parser.parse_args()

print args 
```

所以说得更具体：

允许：

```
test.py
output: Namespace(list='all', verbose=False)
test.py -m
output: Namespace(list='modules', verbose=False)
test.py -P asfasf
output: Namespace(P=['asfasf'], list='all', verbose=False) 
```

不允许：

```
test.py -m -P asfsaf
expected output: <the help message>
test.py -P asfasf -m
expected output: <the help message> 
```

我试图通过`add_subparsers`from选项实现想要的目标，`argparse`但没有任何成功。

所以我的问题是如何实现这种情况？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-02T10:40:59.370

您可以使用一个共同的互斥组作为两个子组的“根”：

```
import argparse
parser = argparse.ArgumentParser(
        description='this is the description',
        epilog="This is the epilog",
        argument_default=argparse.SUPPRESS  
        )

parser.add_argument('-v', '--verbose', help='verbose', action='store_true', default=False)

root_group = parser.add_mutually_exclusive_group()

group_list = root_group.add_mutually_exclusive_group()
group_list.add_argument('-m', help='list only modules', action='store_const', dest='list', const='modules', default='all')
group_list.add_argument('-p', help='list only ports', action='store_const', dest='list', const='ports', default='all')
group_list.add_argument('--list', help='list only module or ports', choices=['modules','ports'], metavar='<modules/ports>', default='all')

group_simulate = root_group.add_mutually_exclusive_group()
group_simulate.add_argument('-M', help='simulate module down', nargs=1, metavar='module_name', dest='simulate')
group_simulate.add_argument('-P', help='simulate FC port down', nargs=1, metavar='fc_port_name', dest='simulate')
group_simulate.add_argument('-I', help='simulate iSCSI port down', nargs=1, metavar='iSCSI_port_name', dest='simulate')
group_simulate.add_argument('--simulate', help='simulate module or port down', nargs=1, dest='simulate')

args = parser.parse_args()

print args 
```

结果：

```
$ python test.py -m -P asfafs
usage: test.py [-h] [-v] [[-m | -p | --list <modules/ports>]
                [-M module_name | -P fc_port_name | -I iSCSI_port_name | --simulate SIMULATE]
test.py: error: argument -P: not allowed with argument -m 

$ python test.py -m -p
usage: test.py [-h] [-v] [[-m | -p | --list <modules/ports>]
                [-M module_name | -P fc_port_name | -I iSCSI_port_name | --simulate SIMULATE]
test.py: error: argument -p: not allowed with argument -m 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-12T05:58:04.110

使用[Docopt](https://github.com/docopt/docopt)！您不必编写使用文档，然后花费数小时试图弄清楚如何让 argparse 为您创建它。如果您了解 POSIX，您就会知道如何解释使用文档，因为它是一个标准。Docopt 知道如何像您一样解释使用文档。我们不需要抽象层。

我认为 OP 未能根据我在他们的帮助文本中读到的内容来描述他们自己的意图。我将尝试推测他们正在尝试做什么。

* * *

### 测试.py

```
"""
usage: test.py [-h | --version]
       test.py [-v] (-m | -p)
       test.py [-v] --list (modules | ports)
       test.py [-v] (-M <module_name> | -P <fc_port_name> | -I <iSCSI_port_name>)

this is the description

optional arguments:
  -h, --help                show this help message and exit
  -v, --verbose             verbose
  -m                        list only modules (same as --list modules)
  -p                        list only ports   (same as --list ports)
  --list                    list only module or ports
  -M module_name            simulate module down
  -P fc_port_name           simulate FC port down
  -I iSCSI_port_name        simulate iSCSI port down

This is the epilog
"""

from pprint import pprint
from docopt import docopt

def cli():
    arguments = docopt(__doc__, version='Super Tool 0.2')
    pprint(arguments)

if __name__ == '__main__':
    cli() 
```

虽然可以使用复杂的嵌套条件在一行中传达所有用法，但这更清晰。这就是 docopt 如此有意义的原因。对于 CLI 程序，您要确保与用户进行清晰的沟通。为什么要学习一些晦涩难懂的模块语法，希望您能说服它为您创建与用户的通信？花点时间查看其他 POSIX 工具，其选项规则类似于您的需求和复制粘贴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-20T00:35:19.660

这个解析器的一个更简单的版本是

```
parser=argparse.ArgumentParser(description="this is the description",
                epilog='this is the epilog')
parser.add_argument('-v', '--vebose', action='count')
g1=parser.add_mutually_exclusive_group()
g1.add_argument('--list', help='list module or ports (default=%(default)s)', choices=['modules','ports','all'], default='all')
g1.add_argument('--simulate', '-M','-P','-C', help='simulate [module down/ FS port down/ iSCSI port down]', dest='simulate', metavar='module/port') 
```

借助如下所示的帮助：

```
usage: stack14660876.py [-h] [-v]
                        [--list {modules,ports,all} | --simulate module/port]

this is the description

optional arguments:
  -h, --help            show this help message and exit
  -v, --vebose
  --list {modules,ports,all}
                        list module or ports (default=all)
  --simulate module/port, -M module/port, -P module/port, -C module/port
                        simulate [module down/ FS port down/ iSCSI port down]

this is the epilog 
```

除了`verbose`（这里我替换了 a `count`）OP 设置为属性，`list`并且`simulate`. `list`具有默认值`all`, 并且可以设置为`modules`或`ports`。 `-m`并且`-p`只是捷径，并没有真正添加到定义中。在定义很多选项时，快捷方式可能很方便，尤其是在可以一起使用的情况下（例如`-vpm`）。但是这里只允许一个选项（除了`-v`）。

`simulate`接受一个不受约束的字符串。这些`M/P/C`选项只是为了方便文档，不限制值或添加含义。

这是突破（或任何其他解析器）边界的一个很好的练习`argparse`，但我认为它太复杂而无用。尽管有所有分组，但归结为只允许一个选项。

===========================

关于`docopt`和`POSIX`参数处理的评论促使我查看 C 参数库。 `getopt`是旧标准。Python 有一个等效的功能，[https://docs.python.org/2/library/getopt.html](https://docs.python.org/2/library/getopt.html)

GNU 库中的另一个解析器是`argp`.

[http://www.gnu.org/software/libc/manual/html_node/Argp.html](http://www.gnu.org/software/libc/manual/html_node/Argp.html)

我还没有看到对它添加到`getopt`语法中的内容的清晰描述。但是下面这段很有趣。

> Argp 还提供了将几个独立定义的选项解析器合并为一个的能力，调解它们之间的冲突并使结果看起来无缝。库可以导出用户程序可能与他们自己的选项解析器一起使用的 argp 选项解析器，从而减少用户程序的工作量。一些程序可能只使用库导出的参数解析器，从而对库实现的抽象实现一致且高效的选项解析。

这听起来有点像`argparse`subparser 机制。也就是说，有某种元解析器可以将操作委托给一个（或多个）子解析器。但是在`argparse`子解析器中必须由用户显式命名。

一个可能的扩展是让元解析器查看上下文。例如在 OP 案例中，如果它看到任何 [--list, -p, -m] 使用`list`子解析器，如果有任何`simulate`参数，则使用`simulate`子解析器。这可能会提供一些更强大的分组工具。并且有可能用 stock 实现那种东西`argparse`。你可以在同一个上创建和运行几个不同`parsers`的`sys.argv`.

# regex - 帕斯卡注释的正则表达式

> ID：14660878
> 
> 赞同：0
> 
> 时间：2013-02-02T10:19:22.133
> 
> 标签：regex, pascal

我正在用 Python 实现 pascal 的编译器。我需要在 Pascal 中找到注释的正则表达式。它应该处理所有这些类型的评论。

1) 单行注释 `//Comment1`

2) 多行注释`{Comment2}(*Comment3*)`

请给出一个可以处理所有这 3 种情况的正则表达式。

如果这很困难，请给出一个正则表达式来处理`//Comment1`和`{Comment2}`

如果可能的话，我想要所有这三个的一个正则表达式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T10:27:09.673

评论1：

```
//(.*?) 
```

注释 2（用 编译`re.DOTALL`）：

```
\{(.*?)\} 
```

注释 3（用 编译`re.DOTALL`）：

```
\(\*(.*?)\*\) 
```

然后你可以在 python 代码中将它们组合在一起：

```
comments = []
comments.append(re.findall("//(.*?)", subject))
comments.append(re.findall(r"\{(.*?)\}", subject, flags=re.DOTALL))
comments.append(re.findall(r"\(\*(.*?)\*\)", subject, flags=re.DOTALL)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T10:27:05.617

单行注释：

```
//.*?$ 
```

多行1：

```
\(\*(.|[\r\n])*?\*\) 
```

多行 2：

```
\{(.|[\r\n])*?\} 
```

一些解释：

`$`表示行尾。

`.*`表示任何字符出现 0 次或多次，但它会吃掉您的输入字符串（取决于您的正则表达式引擎设置，即单行或多行）。为了减少贪婪，我们必须使用`.*?`.

关于`(.|[\r\n])*?`. 这里`?`更重要，因为如果有多个右大括号，则需要匹配最里面的一个。再次取决于您的正则表达式引擎选项（单行与多行），`[\r\n]`可能不需要该部分。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-02T10:25:09.223

单行注释：

```
//.* 
```

多行评论**{Comment2}**

```
\{.*?\} 
```

多行评论**( *Comment3* )**

```
\(\*.*?\*\) 
```

# java - 分配的变量神秘地变为空

> ID：14660879
> 
> 赞同：1
> 
> 时间：2013-02-02T10:19:30.593
> 
> 标签：java, android

我有课：

```
public class Nomenklatura implements Serializable {
    ArrayList<String> data = new ArrayList<String>();
    ArrayList<String> data1 = new ArrayList<String>();
    ArrayList<String> data2 = new ArrayList<String>(6);
} 
```

和活动：

```
public class Smena extends Activity {
    public Nomenklatura Asortiment;
    ArrayList<String> data = new ArrayList<String>();
    ArrayList<String> data1 = new ArrayList<String>();
    ArrayList<String> data2 = new ArrayList<String>(6);

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.smena); 
        Intent i= getIntent();

        Asortiment = (Nomenklatura) i.getExtras().getSerializable("Nomenklatura");
        ArrayList<String> data = Asortiment.data;
        ArrayList<String> data1 = Asortiment.data1;
        ArrayList<String> data2= Asortiment.data2;
    }
} 
```

在调试器中，在`ArrayList<String> data =Asortiment.data;`我看到 Asortiment.data 中的数据之前，但在此操作之后，`ArrayList<String> data`是空的。我不明白为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T10:21:18.483

您的 onCreate 方法正在创建新的局部变量，而不是分配给成员变量。如果你`data = Asortiment.data;`在没有前面的`ArrayList<String>`声明的情况下编写（以下两行相同），它会起作用！

# android - 将视频文件从 /mnt/sdcard 移动到 /mnt/extsd

> ID：14660887
> 
> 赞同：0
> 
> 时间：2013-02-02T10:20:28.223
> 
> 标签：android, filesystems, android-sdcard, file-move

我正在尝试将文件移动 `/mnt/sdcard`到`/mnt/extsd` 当前文件`/mnt/sdcard/DCIM/camera`在拍摄视频后存储在其中但现在我想将此文件移动到 `/mnt/extsd`

我正在使用以下代码

```
File fromFile=new File( "/mnt/sdcard/folderpath" ,"/video.mp4");
File toFile=new File("/mnt/extsd" ,fromFile.getName());
fromFile.renameTo(toFile); 
```

我读到 renameTo 不适用于在不同的文件系统中移动

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:30:52.397

```
try { 
```

　　java.io.FileInputStream fosfrom = new java.io.FileInputStream(fromFile);

　　java.io.FileOutputStream fosto = new FileOutputStream(toFile);

　　byte bt[] = new byte[1024];

　　int c;

　　while ((c = fosfrom.read(bt)) > 0) {

　　fosto.write(bt, 0, c); //将内容写到新文件当中

　　}

　　fosfrom.close();

　　fosto.close();

　　} catch (Exception ex) {

　　Log.e("readfile", ex.getMessage());

　　}

　　}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:41:36.867

[根据Android docs](http://developer.android.com/reference/java/io/File.html#renameTo(java.io.File)) “两个路径必须在同一个挂载点上”，就像它只能在不同路径的情况下用于文件重命名一样。所以如果你想移动它，你可能应该复制它，然后重命名，然后删除源文件。
但是在这种情况下，您不仅要尝试将文件从一个 FS 移动到另一个 FS，而且还要尝试使用`/mnt/extsd`可能根本无法使用的文件。[按照这个关于此类路径的问题。](https://stackoverflow.com/questions/11604220/cant-create-folder-in-extsd-card)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T10:47:20.027

给出你的文件存在的源文件和你想要存储的目标位置。

```
public static void copyDirectoryOneLocationToAnotherLocation(File sourceLocation, File targetLocation)
    throws IOException {

if (sourceLocation.isDirectory()) {
    if (!targetLocation.exists()) {
        targetLocation.mkdir();
    }

    String[] children = sourceLocation.list();
    for (int i = 0; i < sourceLocation.listFiles().length; i++) {

        copyDirectoryOneLocationToAnotherLocation(new File(sourceLocation, children[i]),
                new File(targetLocation, children[i]));
    }
} else {

    InputStream in = new FileInputStream(sourceLocation);

    OutputStream out = new FileOutputStream(targetLocation);

    // Copy the bits from instream to outstream
    byte[] buf = new byte[1024];
    int len;
    while ((len = in.read(buf)) > 0) {
        out.write(buf, 0, len);
    }
    in.close();
    out.close();
} 
```

}

# android - Android：应用程序最终在执行后的异步任务中崩溃

> ID：14660891
> 
> 赞同：4
> 
> 时间：2013-02-02T10:20:35.270
> 
> 标签：android, android-asynctask, progressdialog

在我的应用程序中，我正在从 Web 服务器获取数据。我使用异步任务来获取数据。但是，问题有时是我的应用程序在 onPostExecute on 崩溃`progressDialog.dismiss()`。但是，这种情况并非每次都会发生。这是我的代码：

**异步任务**

```
public class GetFeaturedStoreListAsyncTask extends AsyncTask<Void, Void, String>
{
Context ctx;
ProgressDialog pd;
ListView listFeaturedStore;
String dataUrl;
public static final String TAG = "GetFeaturedStoreAsyncTask";
public static ArrayList<StoreDescriptionDAO> featuredDAOList;

public GetFeaturedStoreListAsyncTask(String dataUrl, Context ctx, ListView listFeaturedStore) 
{
    this.dataUrl = dataUrl;
    this.ctx = ctx;
    this.listFeaturedStore = listFeaturedStore;
}//Constructor

@Override
protected void onPreExecute() 
{
    pd = new ProgressDialog(ctx);
    pd.setMessage(ctx.getResources().getString(R.string.please_wait));
    pd.show();
}//onPreExecute

@Override
protected String doInBackground(Void... params) 
{   
    Log.v(TAG, "doInBackground called");
    JSONParser jsonParser = new JSONParser();
    String serverResponse = jsonParser.getJsonString(dataUrl);
    return serverResponse;
}//doInBackground

@Override
protected void onPostExecute(String response) 
{
    FeaturedListAdapter mFeaturedListAdapter = null;
    mFeaturedListAdapter = getFeaturedListAdapter(response);

    if(mFeaturedListAdapter != null)
    {
        Log.v(TAG, "adapter not null");
        listFeaturedStore.setAdapter(mFeaturedListAdapter);
        listFeaturedStore.setLayoutAnimation(AnimationUtility.fastCascadeListViewAnimation());
        pd.dismiss();
    }//if
    else
    {
        Log.v(TAG, "adapter null");
        pd.dismiss();
        SeattleNightLifeUtility.OpenUtilityDialog(ctx, 
                ctx.getResources().getString(R.string.network_error_msg));
    }//else
}//onPostExecute

private FeaturedListAdapter getFeaturedListAdapter(String jString) 
{
    FeaturedListAdapter mFeaturedAdapter = null;
    featuredDAOList = 
            ParsedFeaturedStoreDescData.getFeaturedStoreDesc(jString);
    if(featuredDAOList != null 
            && featuredDAOList.size() > 0)
    {
        mFeaturedAdapter = new FeaturedListAdapter(ctx, featuredDAOList);
        Log.v(TAG, "arraylist size > 0");
        return mFeaturedAdapter;
    }//if
    else
    {
        return null;
    }//else
}//getFeaturedListAdapter
}//GetCityStoreAsyncTask 
```

这是我的日志：

```
Activity com.dzo.seattlesnightlife.FeaturedActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4a715c38 that was originally added here
02-02 15:23:45.426: E/WindowManager(12627): android.view.WindowLeaked: Activity com.dzo.seattlesnightlife.FeaturedActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4a715c38 that was originally added here
02-02 15:23:45.426: E/WindowManager(12627):     at android.view.ViewRoot.<init>(ViewRoot.java:247)
02-02 15:23:45.426: E/WindowManager(12627):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
02-02 15:23:45.426: E/WindowManager(12627):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
02-02 15:23:45.426: E/WindowManager(12627):     at android.view.Window$LocalWindowManager.addView(Window.java:424)
02-02 15:23:45.426: E/WindowManager(12627):     at android.app.Dialog.show(Dialog.java:241)
02-02 15:23:45.426: E/WindowManager(12627):     at com.dzo.seattlesnightlife.asynctask.GetFeaturedStoreListAsyncTask.onPreExecute(GetFeaturedStoreListAsyncTask.java:40)
02-02 15:23:45.426: E/WindowManager(12627):     at android.os.AsyncTask.execute(AsyncTask.java:391)
02-02 15:23:45.426: E/WindowManager(12627):     at com.dzo.seattlesnightlife.FeaturedActivity$MyTimerTask$1.run(FeaturedActivity.java:173)
02-02 15:23:45.426: E/WindowManager(12627):     at android.os.Handler.handleCallback(Handler.java:587)
02-02 15:23:45.426: E/WindowManager(12627):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-02 15:23:45.426: E/WindowManager(12627):     at android.os.Looper.loop(Looper.java:123)
02-02 15:23:45.426: E/WindowManager(12627):     at android.app.ActivityThread.main(ActivityThread.java:4633)
02-02 15:23:45.426: E/WindowManager(12627):     at java.lang.reflect.Method.invokeNative(Native Method)
02-02 15:23:45.426: E/WindowManager(12627):     at java.lang.reflect.Method.invoke(Method.java:521)
02-02 15:23:45.426: E/WindowManager(12627):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
02-02 15:23:45.426: E/WindowManager(12627):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
02-02 15:23:45.426: E/WindowManager(12627):     at dalvik.system.NativeStart.main(Native Method)
02-02 15:23:45.456: V/GetFeaturedStoreAsyncTask(12627): arraylist size > 0
02-02 15:23:45.456: V/GetFeaturedStoreAsyncTask(12627): adapter not null
02-02 15:23:45.526: W/dalvikvm(12627): threadid=1: thread exiting with uncaught exception (group=0x400207d8)
02-02 15:23:45.536: E/AndroidRuntime(12627): FATAL EXCEPTION: main
02-02 15:23:45.536: E/AndroidRuntime(12627): java.lang.IllegalArgumentException: View not attached to window manager
02-02 15:23:45.536: E/AndroidRuntime(12627):    at android.view.WindowManagerImpl.findViewLocked(WindowManagerImpl.java:355)
02-02 15:23:45.536: E/AndroidRuntime(12627):    at android.view.WindowManagerImpl.removeView(WindowManagerImpl.java:200)
02-02 15:23:45.536: E/AndroidRuntime(12627):    at android.view.Window$LocalWindowManager.removeView(Window.java:432)
02-02 15:23:45.536: E/AndroidRuntime(12627):    at android.app.Dialog.dismissDialog(Dialog.java:278)
02-02 15:23:45.536: E/AndroidRuntime(12627):    at  android.app.Dialog.access$000(Dialog.java:71)
02-02 15:23:45.536: E/AndroidRuntime(12627):    at android.app.Dialog$1.run(Dialog.java:111)
02-02 15:23:45.536: E/AndroidRuntime(12627):    at android.app.Dialog.dismiss(Dialog.java:268)
02-02 15:23:45.536: E/AndroidRuntime(12627):    at com.dzo.seattlesnightlife.asynctask.GetFeaturedStoreListAsyncTask.onPostExecute(GetFeaturedStoreListAsyncTask.java:63)
02-02 15:23:45.536: E/AndroidRuntime(12627):    at com.dzo.seattlesnightlife.asynctask.GetFeaturedStoreListAsyncTask.onPostExecute(GetFeaturedStoreListAsyncTask.java:1)
02-02 15:23:45.536: E/AndroidRuntime(12627):    at android.os.AsyncTask.finish(AsyncTask.java:417)
02-02 15:23:45.536: E/AndroidRuntime(12627):    at android.os.AsyncTask.access$300(AsyncTask.java:127)
02-02 15:23:45.536: E/AndroidRuntime(12627):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
02-02 15:23:45.536: E/AndroidRuntime(12627):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-02 15:23:45.536: E/AndroidRuntime(12627):    at android.os.Looper.loop(Looper.java:123)
02-02 15:23:45.536: E/AndroidRuntime(12627):    at android.app.ActivityThread.main(ActivityThread.java:4633)
02-02 15:23:45.536: E/AndroidRuntime(12627):    at java.lang.reflect.Method.invokeNative(Native Method)
02-02 15:23:45.536: E/AndroidRuntime(12627):    at java.lang.reflect.Method.invoke(Method.java:521)
02-02 15:23:45.536: E/AndroidRuntime(12627):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
02-02 15:23:45.536: E/AndroidRuntime(12627):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
02-02 15:23:45.536: E/AndroidRuntime(12627):    at dalvik.system.NativeStart.main(Native Method)
02-02 15:23:45.556: W/ActivityManager(180):   Force finishing activity com.dzo.seattlesnightlife/.FeaturedActivity 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T10:24:44.747

`ProgressDialog`在您退出后尝试显示 a 时会出现此问题`Activity`。

我刚刚解决了这个问题试试这个方法：

```
if ((this.mDialog != null) && this.mDialog.isShowing()) {
    this.mDialog.dismiss();
    this.mDialog = null;
 } 
```

在您的覆盖`onDestroy()`或`onStop()`方法中。

**编辑：**您可以创建接口，将其传递给 AsyncTask（在构造函数中），然后在 onPostExecute 中调用方法。

**例如**：

你的界面：

```
public interface OnTaskCompleted {
    void onTaskCompleted();
} 
```

您的活动：

```
public YourActivity implements OnTaskCompleted {
    //your Activity
} 
```

还有你的 AsyncTask：

```
public YourTask extends AsyncTask<Object,Object,Object> { //change Object to required type
    private OnTaskCompleted listener;

    public YourTask(OnTaskCompleted listener) {
        this.listener=listener;
    }

//required methods

    protected void onPostExecute(Object o) {
        //your stuff
        listener.onTaskCompleted();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T10:34:55.100

当试图在`ProgerssDialog`这里显示我在您的代码中遇到的问题时会出现此问题，您必须在`ProgressDialog`创建时指定您当前的活动上下文。

```
onPostExecute

if (null != pd && pd.isShowing()) {
    pd.dismiss();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T10:38:16.823

似乎问题出在您的适配器类中。如果您查看日志条目。看起来在打印适配器不为空之后出现异常。所以请确保您的适配器工作正常。我想告诉的另一件事是。为什么你是两次使用相同的代码。

```
pd.dismiss(); 
```

如果在这两种情况下，您都将其解散。最好通过在它当前所在的 if else 语句上方写下它来使其全局化。

# c# - Silverlight 中的 maxArrayLength 问题

> ID：14660892
> 
> 赞同：0
> 
> 时间：2013-02-02T10:20:40.443
> 
> 标签：c#, wcf, silverlight

我一直在阅读很多关于这个问题的文章，但我没有得到它的工作。

服务器端 web.config 文件 ![服务器端 web.config](../Images/e0337918e8926a59a141008f2fafbfc8.png)

服务.clientconfig ![服务.clientconfig](../Images/0c985bba02fb74cfc75a1d1622a1c351.png)

客户端asp.net web.config ![客户端asp.net web.config](../Images/166358af1227d007c5d3b11b32bed8d1.png)

仍然收到以下错误

读取 XML 数据时已超出最大数组长度配额 (16384)。可以通过更改创建 XML 阅读器时使用的 XmlDictionaryReaderQuotas 对象的 MaxArrayLength 属性来增加此配额。

任何帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:51:25.297

你应该使用这个......

```
<bindings>
      <basicHttpBinding>
        <binding name="HttpBinding" maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" receiveTimeout="00:10:00" sendTimeout="00:10:00">
          <readerQuotas maxDepth="700" maxArrayLength="2147483647" maxStringContentLength="2147483647" />
          <security mode="None" />
        </binding>
      </basicHttpBinding>
    </bindings> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:16:32.747

我将所有尺寸更改为 2097152 而不是 2147483647 并开始工作。我已将 Web 配置配置为允许 2MB。但是如果我上传超过 1MB 的文件，它会抛出同样的异常。

# c# - 如何创建结合 ListBox、TextBox 和 Button 的 asp.net 应用程序

> ID：14660894
> 
> 赞同：2
> 
> 时间：2013-02-02T10:21:15.497
> 
> 标签：c#, asp.net, custom-controls

我正在.NET 平台上设计小型即时通讯应用程序。

我有一个`ListBox`,`TextBox`和`Button`（称为发送）。
当用户点击`send button`时，`Text of TextBox`将出现，`ListBox`但用户不应 `3 messages`在 1 分钟内发送（消息限制），并且他/她的消息大小应包含最少 20 个最多 140 个字符串。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:31:26.797

下面的示例使用计时器控件，如果您想了解有关在 ASP.NET 中使用计时器的更多信息，请查看 Joe Stagner 的[此](http://www.asp.net/web-forms/videos/aspnet-ajax/how-do-i-use-the-aspnet-ajax-timer-control)视频教程。

基本上，我将消息的数量存储在 ViewState 中，当该数量达到**3**时，我启动计时器，该计时器将`ViewState["Messages"]`在 1 分钟（60 000 毫秒）后将其重置为 0，并且用户再次能够发送更多消息。

**ASPX：**

```
 <asp:ScriptManager ID="Scriptmanager" runat="server" />
    <asp:Timer ID="timer" runat="server" Enabled="false" Interval="60000" OnTick="Tick" />
    <asp:UpdatePanel ID="updatePanel" runat="server">
        <ContentTemplate>
            <asp:TextBox MaxLength="140" ID="txtMessage" runat="server" />&nbsp;
            <asp:Button ID="btnSend" runat="server" Text="Send" OnClick="Send" />&nbsp; <span
                id="error" runat="server" style="color: Red;" />
            <br />
            <asp:ListBox ID="lbMessages" runat="server" Width="240" />
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="timer" />
        </Triggers>
    </asp:UpdatePanel> 
```

**后面的代码：**

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
        ViewState["Messages"] = 0;
}

public void Send(object sender, EventArgs e)
{
    error.InnerHtml = string.Empty;
    string message = txtMessage.Text;

    if (message.Length < 20)
    {
        error.InnerHtml = "The message should be at least 20 characters long";
        return;
    }

    int messageNumber = (int)ViewState["Messages"];
    if (messageNumber < 3)
    {
        lbMessages.Items.Add(message);
        ViewState["Messages"] = ++messageNumber;

        if (messageNumber.Equals(3))
            timer.Enabled = true;
    }
}

protected void Tick(object sender, EventArgs e)
{
    ViewState["Messages"] = 0;
    timer.Enabled = false;
} 
```

此外，您不需要检查代码中的最大长度，文本框上有一个属性 -`MaxLength`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T10:33:39.977

也许您可以在页面加载中设置一个隐藏字段来存储序列化的三个最后请求时间和另一个用于最后一分钟的消息计数。

在单击按钮事件中获取文本框的文本应用您的大小限制并验证消息计数。

# c# - 如何从 C# 中的 JSON 响应中删除反斜杠？

> ID：14660897
> 
> 赞同：6
> 
> 时间：2013-02-02T10:22:00.883
> 
> 标签：c#, json, wcf, web-services, rest

我编写了一个 Web 服务，它将 TP-Open 服务的 XML 响应转换为 JSON 格式。我是 WCF 和编写 Webservice 的新手。但转换后的 JSON 格式显示如下。

```
"{ \"data\": { \"current_condition\": [ {\"cloudcover\": \"25\", \"humidity\": \"48\", \"observation_time.. 
```

到目前为止，如何删除这些反斜杠 \ 和我的代码。

```
 public string checkweather(string q, string num_of_day)
    {
         HttpWebRequest request=..;
               ...
        string Url = string.Format("http://free.worldweatheronline.com/feed/weather.ashx?q={0}&format={1}&num_of_days={2}&key={3}", q, format, num_of_days, key);
        HttpWebRequest Request = (HttpWebRequest)WebRequest.Create(Url);
        Request.Method = "GET";

        using (HttpWebResponse response = (HttpWebResponse)Request.GetResponse())
        {
            using (Stream stream = response.GetResponseStream())
            {

                using (StreamReader reader = new StreamReader(stream))
                {
                    var result2=reader.ReadToEnd();
         }}}
          return result2;
         } 
```

如果您需要更多信息，请通知我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T11:25:09.597

你确定你的字符串中有反斜杠吗？看起来我他们是转义字符，因为你的字符串中有 " 字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T12:38:13.333

我认为您的 JSON 很好，反斜杠正在转义引号，人们已经说过了。以下代码显示了一些有效的 XML -> Json 转换。（使用 Json.NET）

```
const string xml = "<note><to>Tove</to><from>Jani</from><heading>Reminder</heading><body>Don't forget me this weekend!</body></note>";
XmlDocument node = new XmlDocument();
node.LoadXml(xml);

string json = JsonConvert.SerializeXmlNode(node); 
```

如果您在调试模式下查看，您将看到反斜杠，但输出是有效的 Json。

输出

```
{"note":{"to":"Tove","from":"Jani","heading":"Reminder","body":"Don't forget me this weekend!"}} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-26T08:07:37.437

```
str = JToken.Parse(your string).ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-01T19:04:38.400

休息服务时间：System.Net.WebUtility.HtmlEncode(JsonString)；

响应时间：System.Net.WebUtility.HtmlDecode(JsonString)；

如果您的解码代码包含此字符串`\\"`，请替换`\\`为`\`

# machine-learning - 如何使用 KL 散度进行聚类？

> ID：14660900
> 
> 赞同：5
> 
> 时间：2013-02-02T10:22:25.623
> 
> 标签：machine-learning, k-means

我想用 KL-divergence 作为我的指标对我的数据进行聚类。

在 K 均值中：

1.  选择集群的数量。

2.  随机初始化每个集群的平均值。

3.  `c`将每个数据点分配给距离值最小的集群。

4.  将每个集群的平均值更新为分配给它的数据点的平均值。

在欧几里得的情况下，更新均值很容易，只需对每个向量进行平均即可。

但是，如果我想使用 KL 散度作为我的指标，我该如何更新我的平均值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T10:45:13.347

使用 KL 散度进行聚类可能不是最好的主意，因为 KLD 缺少[度量](http://en.wikipedia.org/wiki/Metric_%28mathematics%29#Definition)的一个重要属性：对称性。获得的集群可能很难解释。如果你想继续使用 KLD，你可以使用 KLD 的平均值作为距离，即

`d(x,y) = KLD(x,y)/2 + KLD(y,x)/2`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-17T18:30:19.950

使用 KLD 不是一个好主意，原因有两个：-

1.  它不是对称的 KLD(x,y) ~= KLD(y,x)
2.  在编程中使用 KLD 时需要小心：除法可能导致 Inf 值和 NAN 结果。

添加少量可能会影响准确性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-02T06:57:23.550

好吧，在“k-means 框架”中使用 KL 可能不是一个好主意。如前所述，它不是对称的，K-Means 旨在处理欧几里得空间。

但是，您可以尝试使用 NMF（非负矩阵分解）。事实上，在 Data Clustering（由 Aggarwal 和 Reddy 编辑）一书中，您可以找到 NMF（在聚类任务中）与 k-means 一样工作的证明，只是在非负约束下。有趣的是，NMF 可能会使用一堆不同的距离和散度。如果你编程 python：scikit-learn 0.19 实现了 beta 散度，它有一个变量 beta 作为自由度。根据 beta 的值，分歧有不同的表现。在 beta 等于 2 时，它假设 KL 散度的行为。

这实际上在主题模型上下文中非常有用，人们试图将文档/单词聚集在主题（或主题）上。通过使用 KL，结果可以解释为关于词-主题和主题分布如何相关的概率函数。

您可以找到更多信息：

*   FÉVOTTE, C., IDIER, J. “具有 β-散度的非负矩阵分解算法”，神经计算，v. 23，n。9，第 2421-2456 页，2011 年。ISSN：0899-7667。doi: 10.1162/NECO_a_00168。Disponível em: .

*   LUO, M., NIE, F., CHANG, X., et al. “概率非负矩阵分解及其对主题建模的稳健扩展。” 在：AAAI，第 2308-2314 页，2017 年。

*   KUANG, D., CHOO, J., PARK, H. “交互式主题建模和文档聚类的非负矩阵分解”。在：分区聚类算法，Springer，第 215-243 页，2015 年。

[http://scikit-learn.org/stable/modules/generated/sklearn.decomposition.NMF.html](http://scikit-learn.org/stable/modules/generated/sklearn.decomposition.NMF.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T10:50:57.043

K-means 旨在处理欧几里德距离：如果您想在聚类中使用非欧几里德相似性，您应该使用不同的方法。使用任意相似性度量进行聚类的最原则性方法是[谱聚类](http://en.wikipedia.org/wiki/Spectral_clustering)，并且 K-means 可以作为其变体推导出来，其中相似性是欧几里得距离。

正如 mitchus 所说，KL 散度不是衡量标准。您需要 Jenson Shannon 散度对称性。

# c# - Windows 身份验证 LAN & WAN

> ID：14660902
> 
> 赞同：2
> 
> 时间：2013-02-02T10:22:32.757
> 
> 标签：c#, asp.net, authentication, iis, wan

我使用带有 IIS 和 C# 的 Windows 身份验证。在我的 global.asax 中，我获得了定义权限的用户名（配置文件和权限在 mysql 数据库中）。它运行良好，但我现在需要使用它。我们使用防火墙 Netasq，它提供带有 LDAP 身份验证的 VPN SSL。在防火墙后面调用一个 url，参数中包含经过身份验证的用户的名称（类似于 SSO）。

授权 wan 用户访问站点的最佳方式是什么：自定义身份验证提供程序，使用角色。

提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:56:04.860

此时我找到的解决方案是：

允许访问我的 web.config 中未经身份验证的用户，使用相同目录的两个域名：1 个使用 Windows 身份验证，1 个使用匿名访问，

我的 netasq 在 url 中调用未经身份验证的站点，一个 HTTP_NETASQ_USER 女巫是登录名。

在我的 global.asax（会话开始）中，如果请求来自 Netasq IP，我使用此 url 参数来识别用户。否则我使用windows登录。

我认为有更好的方法，但它有效。

# javascript - JQuery tabSlideOut 不起作用

> ID：14660904
> 
> 赞同：0
> 
> 时间：2013-02-02T10:22:58.587
> 
> 标签：javascript, jquery, tabslideout

```
 $(document).ready(function () {  
    $(function(){   
          $('.slide-out-div').tabSlideOut({  
             tabHandle: '.handle',                               
             pathToTabImage: 'images/contact_tab.gif',          
             imageHeight: '122px',                               
             imageWidth: '40px',                                  
             tabLocation: 'left',                               
             speed: 300,                                          
             action: 'click',                                     
             topPos: '200px',                                    
             fixedPosition: false                                 
         });
     });
}); 
```

tabslideout 完美地工作我试图在幻灯片播放一段时间后隐藏我使用

```
 setTimeout(function(){---},3000) 
```

它隐藏了，但是当我再次单击它以将其打开时，它会立即再次隐藏

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:34:03.953

Try this:

```
$('.slide-out-div').delay(3000).slideUp('fast'); 
```

# mysql-workbench - 如何从 MySQL Workbench 目录中删除表？

> ID：14660906
> 
> 赞同：30
> 
> 时间：2013-02-02T10:23:21.723
> 
> 标签：mysql-workbench

最近我开始使用 MySQL Workbench 来设计带有 UML 图的数据结构。但是，我可以弄清楚一件事。

似乎如果我从 EER 图视图中删除一个表，该表会保留在目录视图中（如下面的屏幕截图所示）。我可以找到一种从目录视图中删除的方法，它仍然列在外键表引用选择屏幕中。

这非常令人困惑。如何有效地删除表格（不仅从视图中，而且从整个项目中？

![工作台](../Images/67dc5b50d4e48c4d6591407356631446.png)

请注意，我在视图中删除并重新设计了两个问题表。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2015-03-26T11:01:58.617

**如果右键删除不起作用，**

只需将表从目录树拖放到设计区域。然后你会看到表格被插入到那里。从那里，右键单击表并选择删除表。然后该表将从整个项目中删除（假设也需要删除相应的对象）。

希望这会对某人有所帮助。

干杯!

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-11-26T13:33:47.430

之前就遇到过这个问题。

`CMD`键盘上的+ `Backspace`/*只会删除*设计器中的图形。`delete`

 *要完全删除表格和图形，请尝试：`Right-click > Delete 'table'`.

![http://i.stack.imgur.com/qqAWC.png](../Images/cb02f70c77cbd46f485fac5a4a9855ea.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-27T12:29:03.087

我正在使用“MySQL Workbench Community (GPL) for Mac OS X version 6.2.3 revision 12313 build 2282 (32 bit)”和上下文菜单中的“delete 'table'”操作（右键单击表）没有为我工作。

信不信由你，我不得不重新启动整个应用程序。重新启动后，删除操作按预期工作。（1 个对象已删除）[关于该对象的任何内容均未保存在数据库中]

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-09-25T08:06:17.953

这就是我发现“删除”和“删除图形”之间的区别的方式。“删除”从整个项目中删除表，“删除图”仅从图表中删除（表仍保留在目录中）。*

# java - 自动从其他 textarea 打印 java textarea 中的文本

> ID：14660909
> 
> 赞同：1
> 
> 时间：2013-02-02T10:23:57.353
> 
> 标签：java, swing, jtextarea

我正在使用 Java Swing 开发一个小型应用程序。它由 2 个文本区域组成。在一个文本区域中键入文本时，我希望将相同的文本复制到其他文本区域。我使用了线程：Jframe 的线程 1 和访问文本和`setText`其他文本区域的线程 2 .. 但没有显示文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T10:28:18.157

您是否使用任何动作侦听器来检测用户何时在文本框中键入？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T16:38:27.913

> 我希望将相同的文本复制到其他文本区域

分享文件：

```
JTextArea textArea1 = new JTextArea();
JTextArea textArea2 = new JTextArea();
textArea2.setDocument( textArea1.getDocument() ); 
```

# java - Jasper 报表 折线图 类别表达式 相同的值只打印一次

> ID：14660917
> 
> 赞同：0
> 
> 时间：2013-02-02T10:24:40.267
> 
> 标签：java, jasper-reports, ireport

我正在使用 Jasper 报表折线图。在该折线图类别表达式中，**相同的值仅打印一次**。

![在此处输入图像描述](../Images/7298eb47be4a6b46b17f4671f5873bba.png)

在这里，In Thread name 列被指定为折线图中的**Category 表达式**。不打印冗余值。**仅打印唯一名称**。 **我想要我所有的名字**，即使是同名。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:03:29.630

您必须将作为类别标签打印的字符串值包装到满足唯一性约束的对象中。您必须创建一个实现 Comparable 接口的 java 类，因为只有不相等的对象才会打印为单独的类别值。以下代码显示了如何实现这样的类：

```
public class UniqueCategoryLabel implements Comparable<UniqueCategoryLabel> {

    private Double id;
    private String value;

    public UniqueCategoryLabel(String value, Double id) {
        this.value = value;
        this.id = id;
    }

    @Override
    public int compareTo(UniqueCategoryLabel v) {
        return this.id.compareTo(v.id);
    }

    @Override
    public boolean equals(Object v) {
        return v instanceof UniqueCategoryLabel && this.id.equals(((UniqueCategoryLabel) v).id);
    }

    @Override
    public int hashCode() {
        return this.id.hashCode();
    }

    @Override
    public String toString() {
        return value;
    }
} 
```

您可以通过使用不同的 id 创建 UniqueCategoryLabel 的实例来提供唯一性，因为 equals 方法检查比较对象的 id 是否相同。图表本身的标签是使用所提供对象的 toString() 方法创建的，因此您的 toString() 方法应该返回您要打印为标签的字符串。在您的报告中，您用于图表的字段必须是 UniqueCategoryLabel 而不是 String 类型，这应该可以发挥所有作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T11:40:29.300

您需要向类别表达式添加唯一标识符，因为这是显示重复值的唯一方法。

# php - 使用贝宝付款后更新我的数据库的脚本

> ID：14660921
> 
> 赞同：1
> 
> 时间：2013-02-02T10:24:50.547
> 
> 标签：php, paypal

我有一个问题，我已经在 paypal API 上研究了几个星期，但我就是不知道该怎么做。

我需要在我的网站上有一个按钮，然后它会转到贝宝。

一旦您支付了选定的金额，它就会进入一个 php 页面，该页面通过 php 更新数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T10:50:50.037

我发现更适合[PayPal NVP API](https://cms.paypal.com/es/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_NVPAPIOverview)而不是传统的[IPN](https://www.paypal.com/ipn)（即时付款方式）

[您可以在NVP 示例的库代码中](https://cms.paypal.com/es/cgi-bin/?cmd=_render-content&content_ID=developer/library_code)找到几个 PHP 代码示例（包括与您的问题非常相似且更高级的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T10:38:52.157

您必须在您的贝宝偏好中打开贝宝 ipn。一旦贝宝收到钱，它就会将交易发送回您的服务器。在接受事务的脚本中，您可以让它更新您的表。

文档：[https ://www.x.com/sites/default/files/ipnguide.pdf](https://www.x.com/sites/default/files/ipnguide.pdf)

通常，您在请求中传递一个 notify_url 参数，并设置一个处理和验证 IPN 通知的页面，PayPal 将向该页面发送请求以在付款/退款/等时通知您。经过。然后，该 IPN 处理程序页面将是更新数据库以将订单标记为已付款的正确位置。

我在这里找到了一个教程：http: [//net.tutsplus.com/tutorials/php/using-paypals-instant-payment-notification-with-php/](http://net.tutsplus.com/tutorials/php/using-paypals-instant-payment-notification-with-php/)

# asp.net-mvc - ASP.NET MVC 3 - 将会话数据传递给布局

> ID：14660927
> 
> 赞同：0
> 
> 时间：2013-02-02T10:26:05.963
> 
> 标签：asp.net-mvc, session, exception, layout

我想用布局（_Layout.cshtml）在每个页面上显示一些数据，所以我创建了一个父控制器类，数据库访问在其构造函数中执行。这很好用，除非我想访问会话数据，因为当我尝试检查会话变量是否存在时，会抛出异常（NullReferenceException）：

`if (Session["UserId"] != null)`

System.NullReferenceException：对象引用未设置为对象的实例。

我认为这是因为父类中尚不存在 Session 对象。只有当我将代码复制到所有动作控制器时，我才能找到另一个将会话相关数据传递给布局的解决方案。有任何想法吗？

更新：Dave A，这里是父类：

```
public class PCMarketController : Controller
{
    protected PCMarketContext db = new PCMarketContext();

    public PCMarketController()
    {
        int numberOfCartItems = 0;
        if (Session["UserId"] != null) //Throws NullReferenceException in parent, works in action method
        {
            string UserId = HttpContext.Session["UserId"].ToString();
            List<CartItem> CartItems = db.CartItems.Where(i => i.UserId == UserId).ToList();
            foreach (var item in CartItems)
            {
                int count = item.Count;
                numberOfCartItems += count;
            }
        }
        ViewBag.NumberOfCartItems = " (" + numberOfCartItems + ")";
        List<Category> Categories = db.Categories.ToList();
        ViewBag.Categories = Categories;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:26:14.357

您假设 Session 为空的原因是正确的。由ControllerBuilder在页面生命周期的稍后时间注入的会话HttpContext.Session。

对于这种情况，我通常会覆盖控制器的 OnActionExecuting 方法（[http://msdn.microsoft.com/en-au/library/system.web.mvc.controller.onactionexecuting(v=vs.98).aspx](http://msdn.microsoft.com/en-au/library/system.web.mvc.controller.onactionexecuting(v=vs.98).aspx)）。

需要注意的是，使用会话可能会通过标准单元测试阻碍控制器的可测试性

干杯

# excel - Vba-Excel 如何从 Excel 的电子表格生成 XML 文件？

> ID：14660930
> 
> 赞同：1
> 
> 时间：2013-02-02T10:26:47.603
> 
> 标签：excel, vba

我一直在寻找将 Excel 的电子表格数据转换为 XML 格式的逻辑。 ![在此处输入图像描述](../Images/05cdf59373e1af74b0607c577904c7ef.png)

我有成千上万的数据，如下所示。我想把它转换成 XML 格式。任何人请帮助我，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:26:22.813

根据屏幕截图，您的 Excel 版本允许使用`XML Spreadsheet 2003`格式保存您的文档：`Save As... > Other Formats`并在下拉列表中找到它（至少对于 Excel 2007，它的工作方式与所述相同）。

生成的 XML 将包含许多本机 Excel 工作簿字段和节点，但可以使用任何或多或少的高级 XML 编辑器（例如**Altova XMLSpy**或任何类似工具）轻松删除它们。但是，清理完全取决于您的进一步需求。

为方便起见，请参阅上面描述的示例 Excel 书和从中生成的 XML：[https ://www.dropbox.com/s/kxmxu2tq52y4m9b/ExcelToXML.zip](https://www.dropbox.com/s/kxmxu2tq52y4m9b/ExcelToXML.zip)

祝你好运！

# javascript - jQuery.slideDown 立即完成

> ID：14660935
> 
> 赞同：1
> 
> 时间：2013-02-02T10:27:01.667
> 
> 标签：javascript, jquery, html, jquery-ui

我正在尝试做一个简单的滑出效果，然后添加一个类`display:none;`

但由于某种原因，jQuery 动画会立即完成，而不是像文档所说的那样使用持续时间。我尝试使用不同的值和“慢”/“快”。查看 Chrome 开发者工具中的源代码，DOM 会立即更新。删除回调也不会使动画工作，在这种情况下它什么也不做。

```
$('.type-panel').slideDown(500, function () {
    $(this).addClass('panel-hidden')
});

<div class="ed-panel type-panel">
    //bunch of stuff
</div> 
```

我错过了什么？

（我引用了 jQuery 和 jQueryUI）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:38:10.573

我想你的意思是[`.slideUp()`](http://api.jquery.com/slideUp/)用来隐藏它。

```
$('.type-panel').slideUp(500, function() {
    $(this).addClass('panel-hidden');
}); 
```

注意，`.slideUp()`将添加自动设置`display`为`none`.

# android - 如何获取手机序列号 (IMEI)

> ID：14660938
> 
> 赞同：17
> 
> 时间：2013-02-02T10:27:10.500
> 
> 标签：android

我想通过对我的应用程序的注册配置以及已安装我的应用程序的用户和手机的数量进行编程来获取手机序列号。

我能得到吗？

我可以得到我的应用程序已安装在他们身上的手机型号吗？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-02-02T10:50:10.507

请参考此 [https://stackoverflow.com/a/1972404/951045](https://stackoverflow.com/a/1972404/951045)

```
 TelephonyManager mngr = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE); 
  mngr.getDeviceId(); 
```

添加`READ_PHONE_STATE`权限`AndroidManifest.xml`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-12-29T15:30:59.393

```
public String getIMEI(Context context){

    TelephonyManager mngr = (TelephonyManager) context.getSystemService(context.TELEPHONY_SERVICE); 
    String imei = mngr.getDeviceId();
    return imei;

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-02T10:39:17.387

这是代码： -

```
telephonyManager = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);

    deviceId = telephonyManager.getDeviceId(); 
    Log.d(TAG, "getDeviceId() " + deviceId);

    phoneType = telephonyManager.getPhoneType();
    Log.d(TAG, "getPhoneType () " + phoneType); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T10:40:37.593

试试这个

```
 final TelephonyManager tm =(TelephonyManager)getBaseContext().getSystemService(Context.TELEPHONY_SERVICE);

  String deviceid = tm.getDeviceId(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-15T13:38:22.907

**对 IMEI 使用以下代码：**

```
TelephonyManager tm = (TelephonyManager)getSystemService(TELEPHONY_SERVICE);
String imei= tm.getDeviceId(); 
```

# sql - 在 oracle 中查询特定格式的所需数据

> ID：14660947
> 
> 赞同：1
> 
> 时间：2013-02-02T10:28:35.847
> 
> 标签：sql, oracle, gaps-and-islands

我在下表中有数据：

三列

```
 date1 fromdate value
 ---------------------
 14     0       150
 14     2       150
 14     3       150
 14     4       120
 14     5       120
 14     6       150
 14     7       150 
```

我需要编写 sql 查询来获取以下格式的数据：

```
 Date1 fromdate todate value
 ----------------------------
 14     0       3      150
 14     4       5      120
 14     6       7      150 
```

这可能与 oracle 中的 SQL 查询有关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T11:55:45.250

您需要将值为 150 的行拆分为两个单独的部分。您可以通过使用分析函数来做到这一点。该`lead`函数允许您按某种顺序查看下一行的值。在这种情况下，您希望通过 fromdate 找到不同的值顺序：

```
select lead(value) over (order by fromdate) from tab; 
```

然后，您可以将其与当前值进行比较以查看它们何时发生变化，并在它们发生变化时输出鉴别器：

```
select value, case when ld <> value or ld is null then rownum end c from (
  select value, lead(value) over (order by fromdate) ld from tab
)

VALUE, C
-----------
150    null
150    null
150    3
120    null
120    5
150    null
150    7 
```

然后，您需要“填写”鉴别器以替换空值。这可以通过分析再次完成，`min`通过从日期降序选择鉴别器值。然后，您可以按此值分组以提供所需的输出：

```
select date1, value, d, min(fromdate), max(fromdate)
from (
  select date1, fromdate, value,
         --"fill down" the discriminator, so you can group by it at the next level 
         min(c) over (order by fromdate desc) d 
  from (
    select date1, fromdate, value, ld, 
           --compare the next value with the current, if they're different
           --show an indicator
           case when value <> ld or ld is null then rownum else null end c
    from (
      select date1, fromdate, value,lead(value) over (order by fromdate) ld
      from tab
    )
  )
)
group by date1, value, d 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T10:39:47.960

请试试：

```
SELECT
  Date1, 
  MIN(fromdate) FromDate, 
  MAX(fromdate) ToDate, 
  "Value"
FROM
  "YourTable" 
GROUP BY Date1, "Value"; 
```

# iphone - 在 NSMutableData 中附加从网络下载的数据

> ID：14660948
> 
> 赞同：1
> 
> 时间：2013-02-02T10:28:43.507
> 
> 标签：iphone, ios, objective-c, csv, nsmutabledata

我正在尝试从从 Internet 获取的 CSV 文件中附加数据。出了点问题，我不知道是什么。我的日志没有返回任何“字段”或“值”。我将数据保存为 NSMutableData 并尝试附加它。我是否以任何方式覆盖它？数据存储/检索过程中的某些东西一定出错了......你能否看看这段代码并告诉我我是否做错了什么：

```
#import "ViewController.h"
#import "CHCSVParser.h"

@interface ViewController ()
@end
@implementation ViewController
@synthesize parser = _parser;
bool isStatus;
@synthesize apendData;

-(void) connectionDidFinishLoading:(NSURLConnection *)connection
{
  NSLog(@"connectionDidFinishLoading");
    NSString *myString;
    myString = [[NSString alloc] initWithData: apendData encoding:NSUTF8StringEncoding];
    _parser = [[CHCSVParser alloc] initWithContentsOfCSVFile:[NSHomeDirectory() stringByAppendingPathComponent:myString]];
    _parser.delegate = self;
     [_parser parse];
}
-(void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    NSLog(@"data: %@", data);
   if (apendData)
        [apendData appendData:data];
    else
        apendData = [[NSMutableData alloc] initWithData:data];
}
- (void)loadDatafromURL
{
  NSURL *url = [NSURL URLWithString:@"http://www.google.com/trends/trendsReport?hl=en-US&cat=0-13&date=today%207-d&cmpt=q&content=1&export=1"];
  NSURLRequest *request = [NSURLRequest requestWithURL:url];
   [NSURLConnection connectionWithRequest:request delegate:self];
}
- (void) connection:(NSURLConnection *)connection didFailWithError:(NSError *)error{
    NSLog(@"%@", [error description]);
}
- (void)parser:(CHCSVParser *)parser didBeginLine:(NSUInteger)recordNumber
{
    if (recordNumber == 41) {
        isStatus = YES;
        NSLog(@"ParsingStart..."); // Not getting this
    }
}
- (void)parser:(CHCSVParser *)parser didEndLine:(NSUInteger)recordNumber
{
    if (recordNumber == 50) {
        NSLog(@"ParsingEnd..."); // Not getting this
        [parser cancelParsing];
    }
}
- (void)parser:(CHCSVParser *)parser didReadField:(NSString *)field atIndex:(NSInteger)fieldIndex
{
    if ((isStatus = YES)) {
        NSLog(@"YES is working");
        if (fieldIndex == 0) {
            NSLog(@"Field = %@", field); // Just getting "Field = "
        }
        if (fieldIndex == 1){
            NSLog(@"Value = %@", field); // Not getting this
        }
    }
}
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self loadDatafromURL];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

@end 
```

# delphi - Why does rendered content of a TWebBrowser saved as JPEG loses quality?

> ID：14660950
> 
> 赞同：3
> 
> 时间：2013-02-02T10:28:54.390
> 
> 标签：delphi, twebbrowser

I use the procedure below to create a JPG file from a TWebbrowser That is resulting in a JPG looking OK Then I load this JPG to a TcxImage control from DevExpress in order to print it. And that messes up my image so it isn't possible to see the map (it is a portion of a map from Google Maps) The code for loading the image is

```
imgPrint.Picture.LoadFromFile(lImage); 
```

I don't quite get why this is looking so bad already on screen. I do it this way in order to be able to print the map. It could also be done direct from the TWebBrowser but ther I have no control of the output size and adding my own headers and footers are tricky.

```
procedure TfrmJsZipExplorer.actSaveExecute(Sender: TObject);
var
  ViewObject : IViewObject;
  r : TRect;
  Bitmap: TBitmap;
begin
  if WebBrowser1.Document <> nil then
    begin
      WebBrowser1.Document.QueryInterface(IViewObject, ViewObject) ;
      if Assigned(ViewObject) then
        try
          Bitmap := TBitmap.Create;
          try
            r := Rect(0, 0, WebBrowser1.Width, WebBrowser1.Height) ;
            Bitmap.Height := WebBrowser1.Height;
            Bitmap.Width := WebBrowser1.Width;
            ViewObject.Draw(DVASPECT_CONTENT, 1, nil, nil, Application.Handle, bitmap.Canvas.Handle, @r, nil, nil, 0);
            with TJPEGImage.Create do
              try
                Assign(Bitmap);
                SaveToFile(lImagefile);
              finally
                Free;
            end;
          finally
            Bitmap.Free;
          end;
        finally
          ViewObject._Release;
        end;
    end;
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T11:20:54.947

***如何提高保存的 JPEG 图像质量？***

您可以将[`CompressionQuality`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Imaging.jpeg.TJPEGImage.CompressionQuality)保存图像的属性设置为最低压缩，但最高图像质量值。这将提高输出图像的视觉质量。将此属性设置为 100 将产生更好的图像质量，但文件大小更大：

```
with TJPEGImage.Create do
try
  Assign(Bitmap);      
  CompressionQuality := 100;
  SaveToFile(lImagefile);
finally
  Free;
end; 
```

***此图像存档是否需要使用 JPEG 格式？***

如果您的图像存档不仅限于 JPEG 格式，请考虑使用其他格式，例如 PNG。如果您决定使用带[`TPNGImage`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Imaging.pngimage.TPngImage)类的 PNG 格式，则有一个[`CompressionLevel`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Imaging.pngimage.TPngImage.CompressionLevel)属性，它允许您指定保存图像的压缩级别，它直接影响输出文件的大小，但与 JPEG 格式压缩不同，它保持相同视觉质量。将此属性设置为 9 将导致使用完全压缩，这会产生更小的文件大小，质量保持与不使用压缩（0 值）相同：

```
uses
  PNGImage;

with TPNGImage.Create do
try
  Assign(Bitmap);
  CompressionLevel := 9;
  SaveToFile(lImagefile);
finally
  Free;
end; 
```

# ios - Getting java.net.MalformedURLException in MonoDeveloper

> ID：14660951
> 
> 赞同：3
> 
> 时间：2013-02-02T10:28:56.720
> 
> 标签：ios, xamarin.ios, libgdx, ikvm

Hey I am new to MonoDeveloper. I am trying to port libgdx code to iOS platform. My Libgdx code runs perfectly on desktop & Android phone. But when i run it on iPhone simulator with MonoDeveloper its giving me this error:

```
Unhandled Exception: 0   iosgame   
[ERROR] FATAL UNHANDLED EXCEPTION: java.net.MalformedURLException: unknown protocol: file.
0x000e8932 mono_handle_exception_internal_first_pass + 3058 1 iosgame                             
0x000ea012 mono_handle_exception_internal + 1602 2   iosgame                     
0x000eab5f mono_handle_exception + 47 3   iosgame                     
0x0012dcb2 mono_x86_throw_exception + 306 4   ???                     
0x0b73df8f 0x0 + 192143247 at java.net.URL..ctor (java.net.URL,string)
<IL 0x00004, 0x00018> at java.net.URL..ctor (string) 
<IL 0x00003, 0x00018> at java.net.URI.toURL () 
<IL 0x00023, 0x00064> at IKVM.Internal.AssemblyClassLoader.MakeResourceURL(System.Reflection.Assembly,string) 
<IL 0x00016, 0x0006c> at IKVM.Internal.AssemblyClassLoader/AssemblyLoader.FindResources(string) 
<IL 0x0003c, 0x00084> at IKVM.Internal.AssemblyClassLoader/<GetResourcesImpl>c__Iterator0.MoveNext() 
<IL 0x00068, 0x00070> at IKVM.Internal.AssemblyClassLoader/<GetResourcesImpl>c__Iterator0.MoveNext() 
<IL 0x003dc, 0x0069f> at IKVM.NativeCode.ikvm.runtime.AssemblyClassLoader.getResource(java.lang.ClassLoader,System.Reflection.Assembly,string) 
<IL 0x00034, 0x0009c> at ikvm.runtime.AssemblyClassLoader.getResource(java.lang.ClassLoader,System.Reflection.Assembly,string) 
<IL 0x00006, 0x00018> at ikvm.runtime.AssemblyClassLoader.getResource (string) 
<IL 0x00000, 0x0001c> 
```

Kindly give me suggestion where i am wrong.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:04:20.153

这可能是 libgdx 或 IKVM 中的一个错误，该库用于将 Java 代码移植到 .NET/Mono 运行时。您是否向 libgdx 开发人员报告过？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:03:30.530

My guess is that the MonoTouch port of IKVM doesn't include the "file" protocol handler.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T17:15:33.703

基于过去的问题（来自同一用户），我认为这是[连锁反应](https://stackoverflow.com/q/15309671/220643)的结果。Apple 最近开始拒绝大于 60MB的应用程序**可执行文件。**

这是巨大的，使用 Xamarin.iOS 创建的基本 hello world 应用程序不到 3 MB，这就是**应用程序**的总大小。可执行文件本身不到 2.2MB，包括 Mono 运行时、*链接*的基类库 (BCL) 和*未*链接的用户代码。

现在这个 2.2MB 大小已经实现，因为 BCL 已**链接**（默认情况下，**链接 SDK**用于设备构建）。这意味着BCL中**未使用的所有内容都将被删除。**如果 BCL**未**链接（如果您好奇，可以禁用它）然后可执行文件大小将是**46 MB** - 超过 20 倍！（这就是为什么您**永远不**应该在设备构建上禁用链接器的部分原因）。

LibGDX 是一个 Java 库。通过使用 IKVM 转换为 .NET，它可以与 Xamarin.iOS 一起使用。这将转换 GDX 库**和**Java 类库。所有这些都是**用户代码**（即您添加的内容）而不是**SDK**代码（即 Xamarin 提供的代码）。IOW 默认情况下，链接器不会从 GDX（或 IKVM 库）中删除任何内容。

因此，**默认情况下**，GDX**和**Java（类库）中的所有内容都被 AOT 编译到本机可执行文件中 - 导致它超过了 Apple 的限制（这是上[一个问题](https://stackoverflow.com/q/15309671/220643)）。

之前的答案是使用**Link all assembly**，IOW 在所有应用程序托管代码上运行链接器。这会删除大量未使用的代码并导致更小的应用程序和可执行文件大小（参见上面的 hello world 示例）。

然而，它又回到了主要的链接器限制。它使用静态分析来检测未使用的代码——反射（来自 .NET 或 Java）是动态的。因此，链接器需要帮助来保存（使用`[Preserve]`属性或[XML 文件](http://spouliot.wordpress.com/2012/04/27/linker-versus-customization/)）通过反射使用的代码。

我还**没有**看到 Java 代码处理协议 - 但我很确定它使用反射来加载基于方案（例如`file`）的类型，并且需要保留该类型以在运行时正常工作。一旦保存，我确信应用程序将正常工作（并且不会太大）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-30T19:26:22.870

我自己找到了问题的答案。

在堆栈跟踪中，它将提及您的 Java 代码的哪一行正在调用 MalformedURLException。例如：*Example.java :208*

找到*Example.java*的第 208 行，看看它遇到了什么文件。

接下来，在 Xamarin/mono studio 中找到此文件并右键单击它。
然后转到“构建选项”>“BundleResource”。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-03T09:14:59.987

“未知协议：文件”之后是否有一点？在这种情况下，类路径 URI 是错误的。看起来有任何设置错误。文件 URL 应以：

```
file: 
```

错误消息看起来像它开头：

```
file. 
```

# php - Edit JavaScript variables externally

> ID：14660954
> 
> 赞同：1
> 
> 时间：2013-02-02T10:29:13.337
> 
> 标签：php, javascript, edit

I have created a JS script which has more optional settings.

So, somewhere near the beginning of the file I have something like this:

```
var doThat = true;
var playThat = false;
... 
```

This script will be used by users and not by developers so they may not know how to edit a JavaScript file. How can I create a kind of admin-panel which would allow to change some variables in a JavaScript file.

I was thinking about creating an interface which will contain radio buttons to choose those values, now the problem is: how do I actually save those changes in the `.js` file? Should I use PHP to edit the js file directly or is there some better way?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:17:22.067

你可以做的是有一个 PHP 文件来写入这些 JavaScript 变量，方式如下：

```
$doThatVariable = true; // This variable could be retrieved from a database
$playThatVariable = false; // This variable could be retrieved from a database

// This code could be ran on relevant pages to correctly set up the JavaScript variables
print("<script type=\"text/javascript\">
     var doThat = " . $doThatVariable . ";
     var playThat = " . $playThatVariable . ";
     </script>\n"); 
```

然后，您就可以在 JavaScript中使用`doThat`和变量了。`playThat`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T10:33:30.007

Depends on who needs to have access to those variables.

1.  If these variables are shared between all your visitors you should definitly save them on the server.
2.  If you need them only per user and per session, save them via PHP in a session or with cookies at the user. Cookies can be created with JS aswell
3.  If you need them only per user but persitant you can use the localStorage-Object. Nearly all modern browsers support this.
4.  If you have a login-script and you need the variables persistent and per user you should use php, since this is the most reliable way to identify a user over time.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T10:34:47.003

for this make an interface with radio button. then make all changes and save it to database.The saved result's corresponding work will be performed.

# android - 如何设置不同的语言

> ID：14660958
> 
> 赞同：0
> 
> 时间：2013-02-02T10:29:29.920
> 
> 标签：android

如果用户的设备设置为意大利语，我希望我的应用程序使用 strings.xml 的意大利语版本，否则我希望我的应用程序使用带有英文文本的默认 strings.xml。

我做了这个

```
res/values/strings.xml <--- english

res/values/values-it/strings.xml <--- italian //THIS WAS MY ERROR 
```

根据谷歌指南[http://developer.android.com/training/basics/supporting-devices/languages.html](http://developer.android.com/training/basics/supporting-devices/languages.html)我不需要做任何事情！Android 将完成所有工作！但是当我尝试在我的设备上运行应用程序（设置为意大利语）时，我的应用程序继续“说”英语。

我该怎么办？

我以这种方式更改了它，现在它可以工作了。

```
res/values/strings.xml <--- english

res/values-it/strings.xml <--- italian 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T10:36:19.260

试试这个..

```
 String s = Locale.getDefault().getDisplayLanguage();
  if(s.equalsIgnoreCase("italiano"))
     {
        Resources res = getResources();
        Configuration newConfig = new Configuration(res.getConfiguration());
        newConfig.locale = new Locale("it", "IT");
        res.updateConfiguration(newConfig, null);
     } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T10:49:46.543

字符串必须像这样组织：

```
res/values/strings.xml

res/values-it/strings.xml 
```

# android - Using getItemId() always get 0 in onActionItemClicked

> ID：14660962
> 
> 赞同：0
> 
> 时间：2013-02-02T10:30:16.207
> 
> 标签：android, actionbarsherlock, actionmode

I'm using `com.actionbarsherlock.view.ActionMode` and when I try to get the clicked `item id` like this:

```
 public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
            Toast.makeText(WeiboActivity.this, "Got click: " + item.getItemId(), Toast.LENGTH_SHORT).show();
            return false;
        }
    } 
```

it's always:

> Got click: 0

So what is the right code to get the clicked item id?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T18:24:32.830

创建菜单项时，您需要在调用中包含项目 ID

```
menu.add(Menu.NONE, R.id.menu_test, Menu.NONE, R.string.menu_test) 
```

# ios - 应用内：我的 iOS 应用由于可自动更新的应用内购买订阅而被拒绝，那么如何创建可自动更新的应用内购买订阅？

> ID：14660966
> 
> 赞同：-2
> 
> 时间：2013-02-02T10:32:29.587
> 
> 标签：ios, in-app-purchase

目前我的 iphone 应用程序被 Apple 拒绝，他们给出的原因是

* * *

我们发现您的报亭应用没有按照 iTunes Connect 开发者指南的要求提供至少一种应用购买中的自动更新订阅产品：

“要提交 Newsstand 应用程序，您的应用程序必须启用 Newsstand，提供至少一个可自动更新的应用内购买订阅，并且相关二进制文件的 Info.plist 必须包含 UINewsstandApp=true。此外，必须包含 UINewsstandIcon在 CFBundleIcons 键中。”

遵守 iTunes Connect 开发者指南的要求在 iOS 开发者程序许可协议的附表 2 中指定，因此是 App Store 审查指南的要求。

修改您的应用程序以在应用程序购买中提供至少一个自动更新订阅并重新提交一个新的二进制文件及其应用程序内购买以供审核是合适的。”

* * *

所以我的问题是

```
 1.How to create one auto-renewable In- App Purchase subscription ? 
    2.Why i should include in  Info.plist UINewsstandApp=true.
    3.What is UINewsstandIcon ? How i include it in the CFBundleIcons key.? 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T11:29:17.980

1.  您需要研究如何在应用内购买。要进行应用内购买`auto renew`，只需在 IAP 过程中标记该选项的复选框即可

2.  这只是告诉您将您的应用标记为报刊应用，再次简单地在您的信息列表中选择该选项即可，这告诉您的应用出现在报刊上。

3.  一个Newstand图标就像一个普通的图标，只是比例不同而已。

苹果告诉你某些事情的方式可能看起来很复杂，但实际上你只是被要求确保应用程序适用于报摊，创建一个适当大小的图标，并添加一个自动续订订阅

我为您提供了一些链接

[https://developer.apple.com/newsstand/](https://developer.apple.com/newsstand/)

[http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)

# android - tts Service explanation in android

> ID：14660967
> 
> 赞同：0
> 
> 时间：2013-02-02T10:32:29.960
> 
> 标签：android, service, text-to-speech, flite

I have questions regarding the implementation of tts service for android. Here's the deal:

-I've looked over Flite code and I see that service is require to have these 3 activities:

```
<activity
        android:name=".DownloadVoiceData"
        android:label="@string/flite_voice_manager"
        android:theme="@android:style/Theme.Holo" 
        android:configChanges="orientation">
        <intent-filter>
            <action android:name="android.speech.tts.engine.INSTALL_TTS_DATA" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".CheckVoiceData"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Translucent.NoTitleBar" >
        <intent-filter>
            <action android:name="android.speech.tts.engine.CHECK_TTS_DATA" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".GetSampleText"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Translucent.NoTitleBar" >
        <intent-filter>
            <action android:name="android.speech.tts.engine.GET_SAMPLE_TEXT" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

The actual actions of these activities are self explainable, but I want to know: Are they mandatory, how they work .... I have google it but with no luck.

1.  Can anybody point out to some documentation where these activities are explained?

2.  Also, is there any documentation of tts service flow explained in detail?

Thanx in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:26:15.373

`CheckVoiceData`是必要的，因为它可能由愿意知道引擎是否可以工作的客户调用。我认为你至少可以在没有其他两个的情况下生活一段时间。

```
 <activity android:name=".CheckVoiceData"
            android:theme="@android:style/Theme.NoDisplay">
        <intent-filter>
            <action android:name="android.speech.tts.engine.CHECK_TTS_DATA" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

在`CheckVoiceData.onCreate()`你会做这样的事情：

```
 ArrayList<String> askedToCheck = intent.getStringArrayListExtra(TextToSpeech.Engine.EXTRA_CHECK_VOICE_DATA_FOR);
    // if it is null, they usually check and report all available languages.

    ArrayList<String> available = new ArrayList<String>();
    ArrayList<String> unavailable = new ArrayList<String>();

    //...

    Intent returnData = new Intent();
    returnData.putStringArrayListExtra(
            TextToSpeech.Engine.EXTRA_AVAILABLE_VOICES, available);
    returnData.putStringArrayListExtra(
            TextToSpeech.Engine.EXTRA_UNAVAILABLE_VOICES, unavailable);
    setResult(result, returnData);
    finish(); 
```

有效语言字符串的一个示例是`"eng-USA"`.

# spring-mvc - How to setup OAuth2RestTemplate (Post Updated)

> ID：14660968
> 
> 赞同：2
> 
> 时间：2013-02-02T10:32:45.187
> 
> 标签：spring-mvc, spring-security, oauth-2.0

I am not sure if I have OAuth2RestTemplate configured correctly. I am getting the following error when I run the tester class.

```
 INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@1df3248: defining beans [propertyConfigurer,dataSource,transactionManager,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,emf,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,accountRepository,questionRepository,org.springframework.data.repository.core.support.RepositoryInterfaceAwareBeanPostProcessor#0,org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0,org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor#0,jpaQuestionService,jpaAccountService,passwordEncoder,accountHelper,tradeConfig,org.springframework.data.repository.core.support.RepositoryInterfaceAwareBeanPostProcessor#1,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor,baseOAuth2ProtectedResourceDetails,oAuth2ProtectedResourceDetails,accessTokenRequest,oAuth2ClientContext,oAuth2RestTemplate]; root of factory hierarchy
Exception in thread "main" error="access_denied", error_description="Unable to obtain a new access token for resource 'null'. The provider manager is not configured to support it."
    at org.springframework.security.oauth2.client.token.AccessTokenProviderChain.obtainNewAccessTokenInternal(AccessTokenProviderChain.java:146)
    at org.springframework.security.oauth2.client.token.AccessTokenProviderChain.obtainAccessToken(AccessTokenProviderChain.java:118)
    at org.springframework.security.oauth2.client.OAuth2RestTemplate.acquireAccessToken(OAuth2RestTemplate.java:216)
    at org.springframework.security.oauth2.client.OAuth2RestTemplate.getAccessToken(OAuth2RestTemplate.java:168)
    at org.springframework.security.oauth2.client.OAuth2RestTemplate.createRequest(OAuth2RestTemplate.java:89)
    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:442)
    at org.springframework.security.oauth2.client.OAuth2RestTemplate.doExecute(OAuth2RestTemplate.java:123)
    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:409)
    at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:385)
    at com..main(Tester.java:44) 
```

Classes

```
@Configuration
public class AppConfig {

@Bean
//@Scope(value="singleton", proxyMode=ScopedProxyMode.INTERFACES) 
public BaseOAuth2ProtectedResourceDetails baseOAuth2ProtectedResourceDetails(){
    BaseOAuth2ProtectedResourceDetails baseOAuth2ProtectedResourceDetails =  new BaseOAuth2ProtectedResourceDetails();
    baseOAuth2ProtectedResourceDetails.setClientId(clientId);
    baseOAuth2ProtectedResourceDetails.setClientSecret(clientSecret);
    return baseOAuth2ProtectedResourceDetails; 
}

@Bean
public DefaultAccessTokenRequest accessTokenRequest(){
    return new DefaultAccessTokenRequest();
}

@Bean
public OAuth2ClientContext oAuth2ClientContext(){
    return new DefaultOAuth2ClientContext(accessTokenRequest());
}

@Bean
public OAuth2RestTemplate oAuth2RestTemplate(){
    OAuth2RestTemplate restTemplate = new OAuth2RestTemplate(baseOAuth2ProtectedResourceDetails(),oAuth2ClientContext());
    return restTemplate;
}
} 
```

Tester Class

```
public class Tester {

public static void main(String[] args) {

    GenericXmlApplicationContext ctx = new GenericXmlApplicationContext();
    ctx.load("classpath*:jpa-app-context.xml");
    ctx.refresh();

EntityManagerFactory emf = (EntityManagerFactory) ctx.getBean("emf");
EntityManager em = emf.createEntityManager(); 
TransactionSynchronizationManager.bindResource(emf , new EntityManagerHolder(em)); 
OAuth2RestTemplate oAuth2RestTemplate = (OAuth2RestTemplate) ctx.getBean("oAuth2RestTemplate");

//OAuth2RestTemplate oAuth2RestTemplate  = ctx.getBean(OAuth2RestTemplate.class);
String uri="https:api..";

Object obj = oAuth2RestTemplate.exchange(uri, HttpMethod.POST, null, Object.class);
System.out.println("Tester Object: "+ obj.toString());
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-11-04T09:44:13.727

我遇到了同样的异常，但使用了另一种受保护的资源类型。

通常，只有在`AccessTokenProviderChain`找不到适合`*AccessTokenProvider`特定`*ProtectedResourceDetails`实例的情况下才会引发异常。这意味着，当您尝试执行以下操作时：

```
ClientCredentialsResourceDetails resource = new ClientCredentialsResourceDetails();

resource.setAccessTokenUri(url);
resource.setClientId(clientId);
resource.setClientSecret(secret);
resource.setGrantType("password");

return resource; 
```

代码需要一个`client_credentials`授权类型，因为我们使用 a `ClientCredentialsResourceDetails`，但我们传递`password`值。

这是在我的案例中有效的代码：

```
private OAuth2ProtectedResourceDetails withOAuth2Authentication(final String url, final String clientId, final String secret) {
    ClientCredentialsResourceDetails resource = new ClientCredentialsResourceDetails();

    resource.setAccessTokenUri(url);
    resource.setClientId(clientId);
    resource.setClientSecret(secret);
    // here you can provide additional properties such as scope etc.

    return resource;
}

@Bean
RestTemplate callbackClientV2() {
    AccessTokenRequest atr = new DefaultAccessTokenRequest();

    return new OAuth2RestTemplate(
                withOAuth2Authentication(v2ServerUrl, v2Username, v2Password),
                new DefaultOAuth2ClientContext(atr)
    );
} 
```

# wordpress - 从 R+knitr 发布到 WordPress？

> ID：14660969
> 
> 赞同：13
> 
> 时间：2013-02-02T10:32:56.030
> 
> 标签：wordpress, r, markdown, knitr

我希望能够在 Markdown 中编写一些 R 代码（包括图像），用 knitr 编译它，然后将其发布到 wordpress 中（包括将图像上传到博客，而不是作为帖子中的文本）。全部来自R。

我认为[RWordPress](http://www.omegahat.org/RWordPress/)可能有一些有用的工具来完成这项工作，尽管它已经有大约两年没有更新了。

你认为这“容易”吗？你们中有人对此有什么建议吗？任何线索将不胜感激。

（ps：这个问题是我今年的圣杯）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T00:45:25.273

请测试[开发版](https://github.com/yihui/knitr)（v1.0.10）`knitr`看看是否可行：http: [//yihui.name/knitr/demo/wordpress/](http://yihui.name/knitr/demo/wordpress/)

# facebook - Does every facebook user have a username?

> ID：14660970
> 
> 赞同：4
> 
> 时间：2013-02-02T10:33:06.763
> 
> 标签：facebook, login

I want to use fb login and the user's facebook username on my website. However, I need the username to be non-blank.

Is it safe to assume that every facebook user has a username (that I can get through the graph API), and no user has a blank username?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T11:59:43.233

## 不，你不应该假设每个人都定义了一个用户名......

还有一些用户还没有[定义他们的用户名](https://www.facebook.com/username/)。一个更好的解决方案是要求您的用户使用他们的电子邮件地址作为用户名登录。这将始终是唯一的（就像电子邮件地址一样）。

可以向您的用户请求[电子邮件地址权限](https://developers.facebook.com/docs/reference/login/email-permissions/)，然后您就可以通过以下方式访问它 -

```
https://graph.facebook.com/user_id?fields=email 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T11:53:09.177

当您在您的情况下使用 openid 登录或 facebook 登录时，您总是至少获得`email`用户的，因此您可以将其用作您的用户名，因为 facebook 中的新用户不能拥有用户名，但他们有`user id`一个在这种情况下，例如凌乱的数字：

```
{
   "id": "10525827",
   "name": "xxxxx",
   "first_name": "first",
   "last_name": "last",
   "link": "https://www.facebook.com/username",
   "username": "username",
   "gender": "male",
   "locale": "es_LA"
} 
```

所以你`id`总是独一无二的，`username`也是如此。

# opengl - LibGDX：将缓冲图像转换为纹理

> ID：14660971
> 
> 赞同：2
> 
> 时间：2013-02-02T10:33:27.837
> 
> 标签：opengl, libgdx, bufferedimage, xuggler

我正在尝试在 LibGDX 应用程序中播放视频。我已经设法将各个视频帧按顺序加载到`java.awt.BufferedImage`使用[Xuggler](http://www.xuggle.com/xuggler)中。

现在我被困在试图把它变成 LibGDX `Texture`。有人知道这样做的方法吗？

我设法找到这两个碰巧*使用* `BufferedImage`'s 的 LibGDX 文件，但是看不到如何使用它来将我的数据放入 Texture :(

*   [LibGDX JoglPixmap.java](http://libgdx.googlecode.com/svn-history/r192/trunk/gdx/src/com/badlogic/gdx/backends/desktop/JoglPixmap.java)
*   [LibGDX JoglTexture.java](http://libgdx.googlecode.com/svn-history/r195/trunk/gdx/src/com/badlogic/gdx/backends/desktop/JoglTexture.java)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-08-25T20:44:44.490

将 bufferedImage 转换为像素图后，只需使用传入像素图的 Texture 构造函数即可：

```
 Texture newTexture = new Texture(myPixmap); 
```

有一些方法可以构造一个空的 Pixmap 并在其上绘制。然后如上所述使用此像素图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-27T21:37:32.777

如果您使用的是 LibGDX，我不得不说我不建议也使用 BufferedImages（来自 Java2D），而是可以使用 Pixmap，或者如果您确实需要 BufferedImages，那么我想您可以使用 ImageIO 来保存图像到一个文件，将文件作为纹理带回，然后删除该文件，但这似乎很笨拙且效率低下。

# java - 在 Google App Engine 上运行骆驼路线

> ID：14660972
> 
> 赞同：0
> 
> 时间：2013-02-02T10:33:27.683
> 
> 标签：java, multithreading, google-app-engine, apache-camel

我试图在 GAE 上开始一条骆驼路线，然后又遇到一堵砖墙。首先，我尝试了一条如下所示的路线：

```
from("direct:start")
    .process(new Processor() {
        @Override
        public void process(Exchange exchange) {
            logger.info("I made it!");
        }
    })
    .to("direct:end"); 
```

但这无济于事。作为 Camel 和 GAE 的新手*，*我怀疑这是因为该`direct`组件不充当路线开始的消费者。所以然后我尝试启动一个计时器：

```
from("timer://runOnce?repeatCount=1")
    .process(new Processor() {
        @Override
        public void process(Exchange exchange) {
            logger.info("I made it!");
        }
    })
    .to("direct:end"); 
```

只是从 GAE 得到一个令人讨厌的错误：

> 错误：访问被拒绝（java.lang.RuntimePermission modifyThreadGroup）

事实证明，您无法`Thread`在 GAE 上创建新实例，而这正是`Timer`组件所做的。

所以我试着用一个 bean 开始这条路线：

```
public class DummyBean {
    public void kickoffRoute() { return; }
}

// Inside the method that creates and starts the Camel route
SimpleRegistry reg = new SimpleRegistry();
DummyBean bean = new DummyBean();
reg.put("dummy", bean);

CamelContext camel = new DefaultCamelContext(reg);
camel.disableJMX();

// Inside my RouteBuilder
from("bean:dummy")
    .process(new Processor() {
        @Override
        public void process(Exchange exchange) {
            logger.info("I made it!");
        }
    })
    .to("direct:end"); 
```

我运行了这个，只是为了得到与以前相同的“访问被拒绝”错误`Timer`。

**我要做的就是从 GAE 内部开始一条路线，**这样我就可以开始熟悉这两种技术（Camel 和 GAE）。但是对于我的生活，我无法弄清楚如何做到这一点 - 每个 Camel 组件似乎都会创建线程，这在 GAE 上是非法的！所以我问：

1.  您甚至如何在 GAE 上启动路线（初始制作人 -`Timer`或其他）？我看到有一个`Camel-GAE`组件，我当然愿意阅读它并学习如何使用它，这样我就可以拥有从`ghttp:///startRoute`端点开始的路由，但我真的只是从这里开始希望有一个更容易使用的组件/端点。
2.  如果`Timer`和`Bean`组件都创建线程，而这在 GAE 上是不允许的，我有一种恶心的感觉，即大多数/所有 Camel 组件在 GAE 上都是不允许的。**是这样吗？！？！**如果是这样，您如何在 GAE 上构建**有用/有意义的**路线？或者是否有一些 GAE“技巧”让 Camel 运行并创建线程？例如，我知道 GAE 后端不会受到与前端实例相同的线程限制等。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:30:14.090

Camel 是为在使用 Java SE 6/7 的 Java 环境中运行而构建的，包括文件系统访问、线程创建、打开端口的可能性等。

如您所知，Google App Engine 有几个限制。这并不会使 Camel 完全无法使用。您可以使用许多路由功能、生产者端点 (.to(..))、转换等。

事实上，在 Java EE 应用服务器中，也有类似的限制，但这并不妨碍骆驼的使用。

如果你真的愿意，并且需要在 GAE 中做所有的骆驼，也许可以将 Camels 中的插孔可插入线程模型放入 GAE。

免责声明：我从未使用过 GAE 任务，但这里有一些文档

[https://developers.google.com/appengine/docs/java/taskqueue/](https://developers.google.com/appengine/docs/java/taskqueue/) [http://camel.apache.org/threading-model.html](http://camel.apache.org/threading-model.html)

您还可以尝试通过 GAE 中的任何功能启动事件，然后使用生产者模板启动 Camel 路线。

# authentication - how to redirect after clicking Add to Cart in Prestashop

> ID：14660974
> 
> 赞同：1
> 
> 时间：2013-02-02T10:33:31.847
> 
> 标签：authentication, redirect, controller, prestashop, cart

Redirect to Login page after clicking to Add to Cart button

When client clicks on Add to Cart, he or she will be automatically redirect to the Login Page.

for Page redirection i got this Tools::redirect('index.php?controller=authentication?back=my-account');

But i'm searching to past this code in some controller please help me out or is there any solutions is there in prestashop

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-03T02:41:03.107

转到管理面板并按照以下步骤操作：

1.  模块 -> 购物车块 -> 配置 -> 禁用 ajax 添加到购物车
2.  偏好 -> 产品 -> 将产品添加到购物车后设置到购物车摘要
3.  首选项 -> 订单 -> 将订单流程类型设置为“一页结账”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T10:39:10.007

使用此答案中的模块： [https ://stackoverflow.com/a/14497847/1903705](https://stackoverflow.com/a/14497847/1903705)

并用您的重定向替换 hookActionCartSave 的内容。

您应该添加一些其他检查（已经登录等）。

# java - android listview中的getattribute与hashmap

> ID：14660975
> 
> 赞同：0
> 
> 时间：2013-02-02T10:33:35.577
> 
> 标签：java, android, xml-parsing, hashmap, getattribute

我必须开发一个 android 应用程序。

它执行的属性值显示在列表视图上...

这是我的 xml 标签：

```
<root>
<Categories>
 <Category name="books">
 <Articles>
  <article articleid="170" title="Colour And Vibrancy Are Part Of Our DNA">
   <Description>
   Well-known interior designer
 </Description> 
```

我使用了以下代码：

```
 public class MainActivity extends Activity {

     String URL;
     static String KEY_CATEGORY = "Categories";
     ArrayList<HashMap<String, String>> songsList;
     static final String KEY_PNAME = "Category";
     static final String KEY_PRICE = "Description";
     static final String KEY_THUMB_URL = "thumb_image";

      ListAdapter adapter;

     /** Called when the activity is first created. */
     @Override
     protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        songsList = new ArrayList<HashMap<String, String>>();
  HorizontalListView list = (HorizontalListView) findViewById(R.id.listView1);

   adapter = new ListAdapter(this, songsList);
    list.setAdapter(adapter);

  URL="http://webservices/new_feed_articls.xml";

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML from URL
        Document doc = parser.getDomElement(xml);// getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_CATEGORY);
        int numResults = parser.numResults(doc);

        if((numResults <= 0)){
            Toast.makeText(MainActivity.this, "There is no data in the xml file", Toast.LENGTH_LONG).show();
            finish();
        }

        // looping through all song nodes &lt;song&gt;
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key =&gt; value
            map.put( KEY_PNAME,((Element)nl.item(i)).getAttribute("name"));

            map.put(KEY_PRICE, parser.getValue(e, KEY_PRICE));
              map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));

            // adding HashList to ArrayList
            songsList.add(map);
        }

        // Click event for single list row
        list.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                HashMap<String, String> map = songsList.get(position); 
```

在这里我必须运行应用程序意味着需要在listview上显示类别名称。我怎样才能获得属性值？？？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:59:42.477

从 xml 加载数据后，将其加载到歌曲列表中，将其加载到适配器中，并使用适配器 getview 膨胀布局并将其显示在列表视图中......看看这个例子： [http ://sogacity.com/how- to-make-a-custom-arrayadapter-for-listview/](http://sogacity.com/how-to-make-a-custom-arrayadapter-for-listview/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:04:32.713

使用以下代码后，我得到了 o/p：

我在 getElementsByTagName 中犯了错误...

现在我改变了标签，如：

```
NodeList nl = doc.getElementsByTagName(KEY_PNAME); 
```

现在我必须运行输出意味着我很好地获得了属性值......

# java - 登录到托管在 tomcat 上的文件

> ID：14660977
> 
> 赞同：0
> 
> 时间：2013-02-02T10:33:51.113
> 
> 标签：java, logging, log4j, java.util.logging

我想将我的应用程序输出记录到托管在我的 tomcat 服务器上的文件中。log4j.properties 设置为：

```
log4j.rootLogger=INFO, stdout, R

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d %p [%c] - %m%n

log4j.appender.R.MaxFileSize=1000KB
log4j.appender.R.MaxBackupIndex=5
log4j.appender.R=org.apache.log4j.RollingFileAppender
log4j.appender.R.File=${catalina.home}/logs/initiate.log
log4j.appender.stdout=org.apache.log4j.FileAppender
log4j.appender.R.layout=org.apache.log4j.PatternLayout
log4j.appender.R.layout.ConversionPattern=%d %p [%c] - %m%n 
```

它确实创建`initiate.log`了文件，但我的日志语句没有添加到其中。问题是什么？或者我将如何使用 java 设置属性`Logger`以输出到 fil

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:33:35.970

您需要定义一种方法来访问您的 java 代码中某处的文件记录器

```
import org.apache.log4j.Logger;

private static Logger logger= Logger.getLogger("R");//fileLoggerName: R in this case 
```

然后访问如下文件

```
logger.error("Whatever message is!!"); 
//OR 
logger.info("message to write", exceptionObjectForCompleteTrace); 
```

# vim - Vim soft wrap with autoindent

> ID：14660981
> 
> 赞同：3
> 
> 时间：2013-02-02T10:34:04.403
> 
> 标签：vim, auto-indent

In Vim, is there a way to soft wrap the text, autoindent, but also to give the appearance that soft wrapped lines are autoindented?

E.g. rather than:

```
1 hello
2     one two three four five six seven eight nine 
  ten eleven twelve thirteen fourteen fifteen sixteen 
  seventeen 
3 blah blah 
```

I want it to look the like the following:

```
1 hello
2     one two three four five six seven eight nine 
      ten eleven twelve thirteen fourteen fifteen 
      sixteen seventeen 
3 blah blah 
```

But for the text file in actual fact to be as follows:

```
1 hello
2     one two three four five six seven eight nine ten eleven twelve thirteen fourteen fifteen sixteen seventeen 
3 blah blah 
```

So there are no actual tabs (or blocks of 4 spaces) between `nine` and `ten` or between `fifteen` and `sixteen` - this is just part of how the text is displayed in Vim, not the contents of the file.

Some other text editors (e.g. Geany) seem to do this automatically, but I can't find out how to do this in Vim.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T10:41:55.713

您不是第一个询问该功能的人。不幸的是，没有内置的方法可以用 Vim 实现这种效果。

[但是你可以用`breakindent`补丁](https://retracile.net/wiki/VimBreakIndent)重新构建 Vim并得到你想要的。

# matlab - Matlab: Forecasting using a Neural Network

> ID：14660982
> 
> 赞同：1
> 
> 时间：2013-02-02T10:34:10.020
> 
> 标签：matlab, neural-network, prediction

I've created a neural network to model a certain (simple) input-output relationship. When I look at the time-series responses plot using the nntrain gui the predictions seem quite adequate, however, when I try to do out of sample prediction the results are nowhere close to the function being modelled.

I've googled this problem extensively and messed around with my code to no avail, I'd really appreciate a little insight into what I've been doing wrong.

I've included a minimal working example below.

```
 A = 1:1000;  B = 10000*sin(A); C = A.^2  +B;
 Set = [A' B' C'];
 input = Set(:,1:end-1);
 target = Set(:,end);
 inputSeries = tonndata(input(1:700,:),false,false);
 targetSeries = tonndata(target(1:700,:),false,false);

 inputSeriesVal = tonndata(input(701:end,:),false,false);
 targetSeriesVal = tonndata(target(701:end,:),false,false);

 inputDelays = 1:2;
 feedbackDelays = 1:2;
 hiddenLayerSize = 5;
 net = narxnet(inputDelays,feedbackDelays,hiddenLayerSize);

[inputs,inputStates,layerStates,targets] = preparets(net,inputSeries,{},targetSeries);
net.divideFcn = 'divideblock';  % Divide data in blocks
net.divideMode = 'time';  % Divide up every value

 % Train the Network
[net,tr] = train(net,inputs,targets,inputStates,layerStates);
Y = net(inputs,inputStates,layerStates); 

 % Prediction Attempt
delay=length(inputDelays); N=300;
inputSeriesPred  = [inputSeries(end-delay+1:end),inputSeriesVal];
targetSeriesPred = [targetSeries(end-delay+1:end), con2seq(nan(1,N))];
netc = closeloop(net);
[Xs,Xi,Ai,Ts] = preparets(netc,inputSeriesPred,{},targetSeriesPred);
yPred = netc(Xs,Xi,Ai);
perf = perform(net,yPred,targetSeriesVal);

 figure;
plot([cell2mat(targetSeries),nan(1,N);
      nan(1,length(targetSeries)),cell2mat(yPred);
      nan(1,length(targetSeries)),cell2mat(targetSeriesVal)]')
legend('Original Targets','Network Predictions','Expected Outputs')
  end 
```

I realise narx net with a time delay is probably overkill for this type of problem but I intend on using this example as a base for a more complicated time-series problem in the future.

Kind regards, James

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:38:53.727

我不确定你是否解决了这个问题。但是，您的问题至少还有另一种解决方案。

由于您正在处理时间序列，因此最好（至少在这种情况下）设置 net.divideFcn = 'dividerand'。'divideblock' 将仅使用时间序列的第一部分进行训练，这可能会导致有关长期趋势的信息丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T23:59:31.943

从训练数据到新数据的泛化能力差的最可能原因是（1）没有足够的训练数据来表征问题，或者（2）神经网络的神经元和延迟比问题所需的多，所以它过度拟合了数据（即，它很容易记住示例，而不必弄清楚它们是如何相关的。

(1) 的修复通常是更多数据。(2) 的解决方法是减少抽头延迟和/或神经元的数量。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-07T13:25:33.273

增加 inputdelay、feedbackdelay 和 hiddenlayersize 如下：

```
 inputDelays = 1:30;
 feedbackDelays = 1:3;
 hiddenLayerSize = 30; 
```

还将功能更改为

```
net.divideFcn = 'dividerand'; 
```

即使网络需要时间，这种更改对我也有效

# c++ - C++ | 获取列表中的最后一个值

> ID：14660988
> 
> 赞同：3
> 
> 时间：2013-02-02T10:34:49.910
> 
> 标签：c++, list

我有项目列表（项目类），我想获取列表的最后一个值，当我运行程序时它向我显示愚蠢的错误（错误在运行时并且没有编译器错误）

这是代码：

```
int id = 1;
if(items.size() > 0)
    id = items.end()->getID() + 1; 
```

items 是列表变量，getID() 是 Item 类的函数，它返回 int

错误是“列表迭代器不可取消引用”

谢谢你们的帮助；）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T10:36:16.820

`items.end()`, 和其他容器结束迭代器（例如`items.rend()`）指向列表末尾之后的一个。试试`items.back()->getID() + 1;`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-02T10:36:21.630

[std::list::end](http://en.cppreference.com/w/cpp/container/list/end)返回一个迭代器，指向容器最后一个元素之后的元素，该元素充当占位符；试图访问它会导致*未定义的行为*。

您可以使用[std::list::back](http://en.cppreference.com/w/cpp/container/list/back)或反向迭代器[std::list::rbegin](http://en.cppreference.com/w/cpp/container/list/rbegin)

尝试：

```
items.back()->getID() +1;
(*items.rbegin())->getID() +1; 
```

# driver - How to resolve this error while build kernel hook driver using WDK?

> ID：14660991
> 
> 赞同：0
> 
> 时间：2013-02-02T10:35:09.940
> 
> 标签：driver, wdk

I try to build the kernel hooking driver using WDK in windows7 x64\. I used the code of professional rookit book chapter 3.But I got 2 errors

```
1\. c:\chapter03ghost\src\hookmanager.obj : error LNK2001: unresolved external sym
bol __imp_KeServiceDescriptorTable

2\. c:\chapter03ghost\src\objchk_win7_amd64\amd64\comint32.sys : error LNK1120: 1
unresolved externals 
```

Help me!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-27T02:43:01.813

微软决定，KeServiceDescriptorTable 不再能够以 x64 模式导入，并添加了 PatchGuard 技术来保护 SSDT 和 Shadow SSDT。