# StackOverflow 问答 13162000-13162999

# oracle - IO 异常：大小数据单元 (SDU) 不匹配。供应商代码 17002

> ID：13162001
> 
> 赞同：3
> 
> 时间：2012-10-31T15:59:12.483
> 
> 标签：oracle, oracle-sqldeveloper, jdbc-odbc

我正在通过 VPN 连接到学校站点以访问数据库。我使用 SQL developer 3.0.04 连接这个数据库。但是，如果我尝试连接它，则会引发此异常：“IO 异常：大小数据单元 (SDU) 不匹配。供应商代码 17002”

有没有人遇到过这种问题？我真的找不到解决办法。非常感谢！

# powershell - 创建凭据时出错

> ID：13162003
> 
> 赞同：1
> 
> 时间：2012-10-31T15:59:13.693
> 
> 标签：powershell, credentials

我在创建 Powershell 凭据时遇到了一些问题。我正在从文件中读取加密字符串，将字符串转换为安全字符串并使用它来创建凭据。我得到的错误是：

> 新对象：无法转换参数“1”，其值为：“System.Security.SecureString”，>“PSCredential”以键入“System.Security.SecureString”：“无法转换>“System.Security.SecureString”值将“System.RuntimeType”类型改为 >“System.Security.SecureString”类型。”

这是我正在使用的代码：

```
$cred = New-Object -TypeName System.Management.Automation.PSCredential -ArgumentList "athenpoly", $(Read-EncString F:\Scripting\1-Dev\RSA\p_ftp_dellpoly.rsa)

Function Read-EncString {
    param ([String]$InputFile)

    $encrypted = Import-Clixml $InputFile

    $key = (3,42,5,77,67,12,76,9,8,9,4,5,6,55,32,81,23,12,3,55,2,9,6,1,5,32,4,55,6,8,56,12)

    $csp = New-Object System.Security.Cryptography.CspParameters
    $csp.KeyContainerName = "SuperSecretKeyContainer"
    $csp.Flags = $csp.Flags -bor [System.Security.Cryptography.CspProviderFlags]::UseMachineKeyStore
    $rsa = New-Object System.Security.Cryptography.RSACryptoServiceProvider -ArgumentList 5120,$csp
    $rsa.PersistKeyInCsp = $true

    $password = [char[]]$rsa.Decrypt($encrypted, $true) -join "" | ConvertTo-SecureString -Key $key 
} 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:11:20.680

以下是我在读取文件时设置凭据的方式：

```
$PassSec = ConvertTo-SecureString $($Pass) -AsPlainText -Force
$Cred = New-Object -TypeName System.Management.Automation.PSCredential -argumentlist $($Domain + "\" + $User),$passSec 
```

分解：

```
1\. $Pass    ->  Password that is imported (Example: P@ssw0rd)
2\. $Domain  ->  Domain name (Example: Contoso)  
3\. $User    ->  User Name (Example: Admin) 
```

`$cred`这样做是使用用户名`Contoso\Admin`和密码创建变量`P@ssw0rd`。这最终与命令相同：

```
$Cred = Get-Credentials "Contoso\Admin" 
```

只有没有提示。

# c++ - Qt 忽略 const 说明符

> ID：13162010
> 
> 赞同：0
> 
> 时间：2012-10-31T15:59:39.660
> 
> 标签：c++, qt, qt4, constants

我创建了简单的片段来显示我注意到的奇怪行为。就是这样：

```
#include <QCoreApplication>
#include <QLineEdit>

class MyObject : public QWidget
{
public:
    explicit MyObject(QWidget *parent = 0) : QWidget(parent) {
        editor = new QLineEdit(this);
    }

    void setValue(const QString &s) const {
        editor->setText(s);
        editor->setReadOnly(true);
        editor->setMaxLength(s.length());
    }

private:
    QLineEdit *editor;
};

int main(int argc, char **argv)
{
    QCoreApplication app(argc, argv);
    return app.exec();
} 
```

`MyObject::setValue`函数有`const`说明符，但这段代码编译得很好。请注意`setText`，`setReadOnly`和`setMaxLength`函数不是`const`：

```
void setText(const QString &);
void setReadOnly(bool);
void setMaxLength(int); 
```

我只想知道是什么导致了这种行为？我将 Qt 4.7.4 与 MingGW 4.6.2 一起使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T16:07:37.857

（这与 Qt 无关。这是一个通用的 C++ 问题。）

编译器是正确的，因为您没有修改`editor`. 您正在修改的是`*editor`；您只是在修改它指向的对象。说明`const`符将只禁止更改直接包含在对象中的成员。指向的对象`editor`不是成员，因此可以修改：

```
void setValue(const QString &s) const {
    editor->setText(s); // OK
    editor = new QLineEdit; // Error: 'editor' is changed.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:20:52.660

顺便说一下，有两种方法可以查看方法的 constness：

*   *如果成员函数不修改任何对象的数据成员（不包括静态成员），则为*按位常量*或*物理常量**
**   *即使对于指向的对象，逻辑常量*也不允许任何更改。*

 *正如您所经历的那样，编译器仅检测第一种类型的 constness :)

这在 Scott Meyers 编写的 Effective C++ 中的一项中进行了讨论*

# c# - 在 Html 视图中使用 Asp.NET 控件属性中的变量

> ID：13162016
> 
> 赞同：0
> 
> 时间：2012-10-31T15:59:58.843
> 
> 标签：c#, asp.net

我想知道是否有任何方法可以做到这一点：

```
<asp:Label ID="lblSomething" runat="server" Visible="this.ShowLabel"/> 
```

在后面的代码中：

```
public bool ShowLabel {get;set;} 
```

我知道你们中的一些人可能会问我为什么需要它，但我发现这种方法比在后面的代码中说的更干净：

```
lblSomething.Visible = this.ShowLabel 
```

我也可以在源视图中这样说：

```
<% if(this.ShowLabel){ %>
   <asp:Label ID="lblSomething" runat="server" Text="Something"/>
<% } %> 
```

但同样，第一个对我来说会更直观。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:17:24.157

老实说，在您的情况下，最简单、最干净和最优雅的解决方案**是使用`Visible`属性，而不是创建其他 boolean 和 make`Visible`具有相同的 value**。

另一方面，`Label`控制不是密封类。如果你需要做这样的事情，我会找到更好的派生`Label`和实现`ShowLabel`属性的方式：

```
private bool _showLabel;

public bool ShowLabel
{
    get { return _showLabel; }
    set
    {
        _showLabel = value;
        Visible = value
    }
} 
```

最后，您的新`MyLabel`控件用法将是：

```
<gray:MyLabel ID="lblSomething" runat="server" ShowLabel="true"/> 
```

无论如何，再一次，如果您使用 隐藏此类控制`Visible`，请不要重新发明轮子：使用来自 ASP.NET 的内容。但是，如果您的问题显示了一个示例但现实世界的场景不是`Visible`其他东西，我认为您应该使用继承（这比您的建议更优雅）。

事实上，一个好的 ASP.NET Web 窗体实践是完全独立于表示逻辑的标记。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T16:17:43.540

如果您的`ShowLabel`属性实际上只是标签的可见性属性的包装，您可以将您的属性定义替换为：

```
public bool ShowLabel
{
    get { return lblSomething.Visible; }
    set { lblSomething.Visible = value; }
} 
```

但除了可见性属性的新名称之外，这并没有真正给您带来太多好处。

# php - ajax成功可以从php返回字符串吗？

> ID：13162018
> 
> 赞同：2
> 
> 时间：2012-10-31T16:00:01.913
> 
> 标签：php, ajax

我想比较 ajax 成功的两个值（都是简单的字符串）。Value1 是来自 php 的 echo，value2 是 javascript 变量。但是当我尝试类似的事情时：

```
$.ajax({
    type: "POST",
    url: proccessPage,
    data: dataString,
    dataType: "text",
    success:function(result){

    alert (result);

    }
}); 
```

我将收到消息“[object Object]”。当我尝试`alert (result);`改变

```
var response = $(result);
document.getElementById("div1").innerHTML = result; 
```

那么 id 为“div1”的 div 具有适当的值。我知道我可以隐藏 div 并从中使用值，但是有什么方法可以直接使用 result 吗？或者以某种方式将结果转换为字符串？php中的代码：

```
if (isset($_POST['submit']) && $_POST['submit']=="true")
echo "string"; 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T16:03:28.300

在您的脚本中，将数据类型更改为 html。

```
dataType: "text", 
```

至

```
dataType: "html", 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:21:00.780

text 的 dataType 完全没问题。确保您的 PHP 脚本正在设置返回 text/plain 的 mime 类型。

**PHP 代码：** header('Content-type: text/plain');

jQuery 将根据服务器所说的处理返回。dataType 字段只是一个提示。[http://docs.jquery.com/Specifying_the_Data_Type_for_AJAX_Requests](http://docs.jquery.com/Specifying_the_Data_Type_for_AJAX_Requests)

如果一切都失败了，请使用带有 Firebug 的 Firefox。它将使您能够在成功闭包中放置一个中断品脱，然后您可以检查结果变量的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-01T14:04:47.567

我通过从 PHP 函数创建一个 json 响应并使用我需要的任何内容加载它取得了成功。比较来自 Json 对象的已知值通过为您提供已知的对象属性来处理您的 [object Object] 返回问题 - 使用 JSON 声明：

```
$response = json_encode( array( 'success' => true , 'value1' => $my_result,);
header( "Content-Type: application/json" );
echo $response;
exit; 
```

我使用success bool 来确保$my_result 是一个成功的响应，因为AJAX 可能会正确执行，但这允许我专门检查valid *value1*

现在，回到你的 $.ajax：

```
...
success: function(result){
  if(result['success']) { 
    document.getElementById("removeme").innerHTML = (result['value1'] == value2)? value1 : "Uh-oh. Something went wrong!";
  }
}
... 
```

或者，您可以将任何合适的内容放入成功功能主体中，无论您需要比较或做什么。我只是举了一个例子来展示一个完整的实现。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-31T16:04:57.960

AJAX 中的第一个 A 表示异步，这意味着您的请求将正常执行，但只有在请求得到响应时才会执行回调。脚本不会暂停等待响应。

话虽如此，如果您想使用来自 AJAX 请求的信息，则必须在其回调中使用它，否则它将不可用。

像这样的东西：

> ```
> $.ajax({
>     type: "POST",
>     url: proccessPage,
>     data: dataString,
>     dataType: "text",
>     success:function(result){
> 
>         document.getElementById("removeme").innerHTML = result; 
> 
>     }
> }); 
> ```

# .net - 导出的 C 函数与结构与 .Net 编组中的布尔大小

> ID：13162021
> 
> 赞同：0
> 
> 时间：2012-10-31T16:00:12.560
> 
> 标签：.net, c, size, boolean

我不确定这是否是一个问题，但肯定是一种好奇心。我有一个 C DLL，它导出一个采用 32 位整数和一个布尔值 (stdbool.h) 的函数。导出的函数（stdcall）表示参数列表为8字节（4字节int，4字节bool）。此 C DLL 还包含一个使用布尔值的结构。检查`sizeof(bool)`表示 1 字节布尔值。

我有这个本机 DLL 的 .Net 包装器。编组结构时，我为每个布尔字段 UnmanagedType.U1 指定，一切正常，一切都正确对齐。我只使用了顺序布局，没有明确也没有任何偏移，也没有任何包装。

我的问题是，为什么布尔大小的明显差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:06:08.893

C 中所有小于“int”的函数参数都在调用中转换为“int”大小。这是因为每个参数都单独放置在堆栈上（在大多数架构中），因此它们被转换为堆栈单元大小，通常等于“int”的大小。

至于结构 - 没有任何东西被转换。尽管我们不应该忘记结构中的对齐。但这是另一个故事。

# asp.net - 如何在 dnn 上公开 json 文件

> ID：13162023
> 
> 赞同：-1
> 
> 时间：2012-10-31T16:00:16.000
> 
> 标签：asp.net, json, dotnetnuke

我在 asp.net 中创建了一个 dnn 模块，它使用存储在 locator.json 中的数据，现在我需要转换为 DNN，但似乎 DNN 找不到 json 文件。我应该把它放在哪个文件夹中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:52:59.267

您可以将该文件放在模块本身中。您可以像这样访问它：`url/DesktopModules/ModuleFolderName/locator.json`

要确保允许 json 扩展，您可以转到管理 > 站点设置并查看允许扩展的设置。

如果您需要更多帮助，请告诉我。

# javascript - 如何使用phonegap在ios图库中下载图片？

> ID：13162026
> 
> 赞同：0
> 
> 时间：2012-10-31T16:00:23.950
> 
> 标签：javascript, ios, cordova, download, image

我有个问题。我想用 phonegap cordova 2.1 下载图片并将它们显示在苹果 iphone/ipad 画廊中。我已经测试了这个 javascript 函数

```
$("#btnDL").click(function(){
    var file = $("#imgViewer img").attr('src');
    var aux =file.split('/');
    var fName = aux[aux.length - 1];

    var fileTransfer = new FileTransfer();

    fileTransfer.download(encodeURI(file),"/var/mobile/Applications/9A25FA0A-49A9-4DED-BD83-5FF043A9075/Document/MyApplicationName",function(entry){
        alert("Image saved in "+entry.fullPath);
    },function(error){
        alert("ERR: "+JSON.stringify(error));
    });
}); 
```

该功能告诉我文件已保存在我的 iPad 中。但是如果我在画廊中搜索，有任何图片。我曾想过在 Objective-C 中做一个插件，但我对这种语言了解得不够多。我已经测试过用这个做一个插件

[http://blog.clearlyinnovative.com/post/1097750723/phonegap-plugin-for-downloading-url](http://blog.clearlyinnovative.com/post/1097750723/phonegap-plugin-for-downloading-url)

和这个

[https://github.com/aaronksaunders/FileDownLoadApp](https://github.com/aaronksaunders/FileDownLoadApp)

但他们没有工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:31:57.793

终于我用这个插件解决了我的问题

[https://github.com/devgeeks/Canvas2ImagePlugin](https://github.com/devgeeks/Canvas2ImagePlugin)

# c++ - 如何在 C++ 中获取不同行的 .csv 文件？

> ID：13162033
> 
> 赞同：1
> 
> 时间：2012-10-31T16:00:37.710
> 
> 标签：c++, csv, getline

这是我从 .csv 文件中获取的代码，它让 itch 女巫在分隔符之间，并给出这些分隔符的位置。但这确实使它仅适用于第一行，例如如何继续第二行？

```
#include <tchar.h>
#include <stdio.h>
#include <iostream>
#include <string>
#include <fstream>
#include <vector>
//#include <limits>
using namespace std;
#define TAILLE_MAX_LIGNE 1203
int _tmain(int argc, _TCHAR* argv[])
{
    char stringFile [TAILLE_MAX_LIGNE];
    string stringLineToAnalyse;
    size_t positionCharOld, positionCharNew;
    string separateurChar = ";";
    string contenuLocalChamp = "";
    vector <string> localStringVector;
    localStringVector.clear(); // Initialisation du vecteur  // VECTOR INTIALISE
    ifstream file;
    file.open("C:/Users/Alex/Desktop/STAGE/test.csv");
    if(file.is_open())
    {
        file.getline(stringFile, TAILLE_MAX_LIGNE);
        // file.ignore(numeric_limits<streamsize>max(),'\n'));
        stringLineToAnalyse = stringFile;
        cout << "tout va bien" << endl;
        cout <<  stringLineToAnalyse << endl;
        // initialisation de la recherche dans la ligne
        // INITIALISE SEARCH INTO THE LIGNE
        positionCharOld = 0;
        bool finDelaBoucle = false;
        while(finDelaBoucle == false)
        {
            // boucle itérative
            positionCharNew = stringLineToAnalyse.find(separateurChar, positionCharOld);
            if(positionCharNew != string::npos)
            {
                cout << "separateur trouve a la position " << positionCharNew << endl; // SEPARATOR POSITION
                if((positionCharNew-positionCharOld) > 0)
                {
                    contenuLocalChamp = stringLineToAnalyse.substr(positionCharOld, positionCharNew-positionCharOld);
                    cout << "le contenu de la string entre separateur est " << contenuLocalChamp << endl; // CONTENT BEATWEEN 2 SEPARATOR
                    localStringVector.push_back(contenuLocalChamp);
                }
                else
                {
                    cout << "ce champ vide" << endl;    // EMPTY FIELD
                }
                positionCharOld = positionCharNew+1;
            }
            else
            {
                finDelaBoucle = true;
                system("PAUSE");
                cout << "fin de la boucle" << endl; // END OF THE LOOP
                system("PAUSE");
            }
        }
    }
    else
    {
        cout << "pas de fichier" << endl;
        system("PAUSE");
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T16:06:36.053

整个示例与以下问题不太相关：如何逐行读取文件

```
std::string s;
while (std::getline(file, s))
{
    std::cout << s << "\n"; // each next line printed
} 
```

请注意，使用`std::getline`它比干预安全得多`char[]`

```
while(std::getline(file, stringLineToAnalyse))
{ 
```

会在您的示例代码中找到重点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:16:35.367

`std::getline`假设您尝试读取的文件格式或多或少正确，您很可能希望使用`<string>`. 请记住，这与调用类的成员函数`getline`不同`std::basic_istream`，后者对 char 数组进行操作。

这几乎可以归结为这样的事情 - 下面的代码用文件中找到的每一行填充向量：

```
#include <string>
#include <fstream>
#include <vector>

int main()
{
    std::ifstream myfile("/etc/passwd",std::ios::in);
    if(!myfile.good()) return 1;

    std::vector<std::string> myfile_lines;
    std::string single_line;

    while(std::getline(myfile,single_line))
    {
        myfile_lines.push_back(single_line);
    }

    myfile.close();
} 
```

# bash - 在 bash 脚本中使用此处文档运行多个命令时出错

> ID：13162036
> 
> 赞同：0
> 
> 时间：2012-10-31T16:00:49.717
> 
> 标签：bash, shell, unix, ssh, sed

我正在尝试使用数组在 3 个远程服务器中执行以下命令集，使用 Here Document，但出现错误

**代码 -**

```
ssh -oPasswordAuthentication=no $remoteUser@${SERVER[i]} <<-END_TEXT
VALUE=`cat /home/cognos/cognos/c8/configuration/cogstartup.xml | grep -i xsd:long | head -1 | cut -d">" -f2 | sed 's/[:/<|crn:value]*//g'`
VALUE_BACKUP=$VALUE
........................ (many more lines of code)
RESULT1=`perl -e '@stats = stat("/home/cognos/cognos/c8/configuration/signkeypair"); print ((time - $stats[9]) < '$VALUE');'`

END_TEXT 
```

和错误：

```
**error -**
syntax error at -e line 1, near "< )"
Execution of -e aborted due to compilation errors.
syntax error at -e line 1, near "< )"
Execution of -e aborted due to compilation errors.
syntax error at -e line 1, near "< )"
Execution of -e aborted due to compilation errors. 
```

ps- 使用 scp 将命令复制到远程服务器，然后使用 ssh 运行它们不是我正在寻找的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:15:12.857

查看整个此处的文档并搜索`-e`.

**编辑：**

用单引号将 END_TEXT 括起来，如下所示：

```
ssh ... <<-'END_TEXT'
...
END_TEXT 
```

这将防止在远程服务器上可用之前用空字符串替换 $VALUE。

# java - Spring SimpleJdbcCall 默认（可选）参数

> ID：13162043
> 
> 赞同：14
> 
> 时间：2012-10-31T16:01:05.737
> 
> 标签：java, spring, stored-procedures, jdbc

我正在尝试调用具有默认（可选）参数而不传递它们的存储过程，并且它不起作用。[基本上与此处](http://forum.springsource.org/showthread.php?108006-How-to-make-SimpleJdbcCall-use-Function-and-Procedure-default-arguments&s=e077b42fd45ae3a3177a01c90339893c)描述的问题相同。

我的代码：

```
 SqlParameterSource in = new MapSqlParameterSource()
        .addValue("ownname", "USER")
        .addValue("tabname", cachedTableName)
        .addValue("estimate_percent", 20)
        .addValue("method_opt", "FOR ALL COLUMNS SIZE 1")
        .addValue("degree", 0)
        .addValue("granularity", "AUTO")
        .addValue("cascade", Boolean.TRUE)
        .addValue("no_invalidate", Boolean.FALSE)
        .addValue("force", Boolean.FALSE); 
```

我得到一个例外：

```
Caused by: org.springframework.dao.InvalidDataAccessApiUsageException: Required input parameter 'PARTNAME' is missing
    at org.springframework.jdbc.core.CallableStatementCreatorFactory$CallableStatementCreatorImpl.createCallableStatement(CallableStatementCreatorFactory.java:209) 
```

其中 PARTNAME 是根据[this](http://www.toadworld.com/KNOWLEDGE/KnowledgeXpertforOracle/tabid/648/TopicID/STATT/Default.aspx)的可选参数。也证实了我可以手动运行此过程而无需 PARTNAME 参数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T19:23:38.570

Ater 放弃了这个问题，只传递了所有参数，包括可选参数，我遇到了它无法传递布尔参数，因为布尔不是 SQL 数据类型，只有 PL/SQL。

所以我目前的解决方案是 JDBC 不适合运行存储过程，这就是我正在解决的问题：

```
 jdbcTemplate.execute(
        new CallableStatementCreator() {
           public CallableStatement createCallableStatement(Connection con) throws SQLException{
              CallableStatement cs = con.prepareCall("{call sys.dbms_stats.gather_table_stats(ownname=>user, tabname=>'" + cachedMetadataTableName + "', estimate_percent=>20, method_opt=>'FOR ALL COLUMNS SIZE 1', degree=>0, granularity=>'AUTO', cascade=>TRUE, no_invalidate=>FALSE, force=>FALSE) }");
              return cs;
           }
        },
        new CallableStatementCallback() {
           public Object doInCallableStatement(CallableStatement cs) throws SQLException{
              cs.execute();
              return null; // Whatever is returned here is returned from the jdbcTemplate.execute method
           }
        }
  ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-18T00:24:04.983

今天想出了一个不错的解决方案，可以处理非空默认值，并且不使用果味反射技术。它的工作原理是在外部为函数创建元数据上下文以检索所有参数类型等，然后从中手动构造 SimpleJdbcCall。

首先，为函数创建一个 CallMetaDataContext：

```
 CallMetaDataContext context = new CallMetaDataContext();
    context.setFunction(true);
    context.setSchemaName(schemaName);
    context.setProcedureName(functionName);
    context.initializeMetaData(jdbcTemplate.getDataSource());
    context.processParameters(Collections.emptyList()); 
```

接下来，创建 SimpleJdbcCall，但强制它不进行自己的元数据查找：

```
SimpleJdbcCall simpleJdbcCall = new SimpleJdbcCall(jdbcTemplate);
// This forces the call object to skip metadata lookup, which is the part that forces all parameters
simpleJdbcCall.setAccessCallParameterMetaData(false);

// Now go back to our previously created context and pull the parameters we need from it
simpleJdbcCall.addDeclaredParameter(context.getCallParameters().get(0));
for (int i = 0; i < params.length; ++i) {
    simpleJdbcCall.addDeclaredParameter(context.getCallParameters().get(i));
}
// Call the function and retrieve the result
Map<String, Object> resultsMap = simpleJdbcCall
                        .withSchemaName(schemaName)
                        .withFunctionName(functionName)
                        .execute(params);
Object returnValue = resultsMap.get(context.getScalarOutParameterName()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-12-07T14:19:26.747

我使用 SimpleJdbcCall 和 Spring 5.2.1、Java 8、Oracle 12 为我的案例找到了解决方案。

你需要：

1.  使用**.withoutProcedureColumnMetaDataAccess()**
2.  使用**.withNamedBinding()**
3.  声明参数，你知道在**.declareParameters()**调用中。仅使用在此方法中声明的参数调用过程。默认参数，你不想设置，这里就不写了。

示例调用如下

```
final String dataParamName = "P_DATA";
final String ageParamName = "P_AGE";
final String genderParamName = "P_GENDER";

final String acceptedParamName = "P_ACCEPTED";

SimpleJdbcCall simpleJdbcCall = new SimpleJdbcCall(getJdbcTemplate())
        .withCatalogName("PKG_USER")
        .withProcedureName("USER_CHECK")
        .withoutProcedureColumnMetaDataAccess()
        .withNamedBinding()
        .declareParameters(
                new SqlParameter(dataParamName, OracleTypes.VARCHAR),
                new SqlParameter(ageParamName, OracleTypes.NUMBER),
                new SqlParameter(genderParamName, OracleTypes.VARCHAR),
                new SqlOutParameter(acceptedParamName, OracleTypes.NUMBER)
        );

SqlParameterSource parameterSource = new MapSqlParameterSource()
        .addValue(dataParamName, data)
        .addValue(ageParamName, age)
        .addValue(genderParamName, gender);

Map<String, Object> out = simpleJdbcCall.execute(parameterSource); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-31T14:40:31.567

这是我采取的另一种方法。我添加了让用户设置他们将在通话中提供的参数数量的功能。这些将是前 n 个位置参数。存储过程中可用的任何剩余参数都必须通过数据库的默认值处理进行设置。这允许使用默认值将新参数添加到列表的末尾，或者可以为空，而不会破坏不知道提供值的代码。

我对 SimpleJdbcCall 进行了子类化，并添加了设置“maxParamCount”的方法。我还使用了一点邪恶的反射来设置我的 CallMetaDataContext 的子类版本。

```
public class MySimpleJdbcCall extends SimpleJdbcCall
{
    private final MyCallMetaDataContext callMetaDataContext = new MyCallMetaDataContext();

    public MySimpleJdbcCall(DataSource dataSource)
    {
        this(new JdbcTemplate(dataSource));
    }

    public MySimpleJdbcCall(JdbcTemplate jdbcTemplate)
    {
        super(jdbcTemplate);

        try
        {
            // Access private field
            Field callMetaDataContextField = AbstractJdbcCall.class.getDeclaredField("callMetaDataContext");
            callMetaDataContextField.setAccessible(true);

            // Make it non-final
            Field modifiersField = Field.class.getDeclaredField("modifiers");
            modifiersField.setAccessible(true);
            modifiersField.setInt(callMetaDataContextField, callMetaDataContextField.getModifiers() & ~Modifier.FINAL);

            // Set field
            callMetaDataContextField.set(this, this.callMetaDataContext);
        }
        catch (NoSuchFieldException | IllegalAccessException ex)
        {
            throw new RuntimeException("Exception thrown overriding AbstractJdbcCall.callMetaDataContext field", ex);
        }
    }

    public MySimpleJdbcCall withMaxParamCount(int maxInParamCount)
    {
        setMaxParamCount(maxInParamCount);
        return this;
    }

    public int getMaxParamCount()
    {
        return this.callMetaDataContext.getMaxParamCount();
    }

    public void setMaxParamCount(int maxInParamCount)
    {
        this.callMetaDataContext.setMaxParamCount(maxInParamCount);
    }
} 
```

在我的 CallMetaDataContext 子类中，我存储了 maxInParamCount，并使用它来修剪已知存在于存储过程中的参数列表。

```
public class MyCallMetaDataContext extends CallMetaDataContext
{
    private int maxParamCount = Integer.MAX_VALUE;

    public int getMaxParamCount()
    {
        return maxParamCount;
    }

    public void setMaxParamCount(int maxInParamCount)
    {
        this.maxParamCount = maxInParamCount;
    }

    @Override
    protected List<SqlParameter> reconcileParameters(List<SqlParameter> parameters)
    {
        List<SqlParameter> limittedParams = new ArrayList<>();
        int paramCount = 0;
        for(SqlParameter param : super.reconcileParameters(parameters))
        {
            if (!param.isResultsParameter())
            {
                paramCount++;
                if (paramCount > this.maxParamCount)
                    continue;
            }

            limittedParams.add(param);
        }
        return limittedParams;
    }
} 
```

除了查看最大参数计数外，使用基本相同。

```
SimpleJdbcCall call = new MySimpleJdbcCall(jdbcTemplate)
        .withMaxParamCount(3)
        .withProcedureName("MayProc"); 
```

SMALL RANT：有趣的是，Spring 以其 IOC 容器而闻名。但是，在它的实用程序类中，我不得不求助于反射来提供依赖类的替代实现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-24T08:21:56.730

也在努力解决这个问题，并且不想处理字符串。可能有更有趣的解决方案，如果我们从元数据中获取默认值，spring 在默认实现中并不关心，但我只是将空值放在那里。解决方案如下：

重写的 simpleJdbcCall

 `````
 private class JdbcCallWithDefaultArgs extends SimpleJdbcCall {

    CallableStatementCreatorFactory callableStatementFactory;

    public JdbcCallWithDefaultArgs(JdbcTemplate jdbcTemplate) {
        super(jdbcTemplate);
    }

    @Override
    protected CallableStatementCreatorFactory getCallableStatementFactory() {
        return callableStatementFactory;
    }

    @Override
    protected void onCompileInternal() {
        callableStatementFactory =
                new CallableStatementCreatorWithDefaultArgsFactory(getCallString(), this.getCallParameters());
        callableStatementFactory.setNativeJdbcExtractor(getJdbcTemplate().getNativeJdbcExtractor());

    }

    @Override
    public Map<String, Object> execute(SqlParameterSource parameterSource) {
        ((CallableStatementCreatorWithDefaultArgsFactory)callableStatementFactory).cleanupParameters(parameterSource);
        return super.doExecute(parameterSource);
    }
} 
````  `并覆盖 CallableStatementCreatorFactory

 `````
public class CallableStatementCreatorWithDefaultArgsFactory extends CallableStatementCreatorFactory {

private final Logger logger = LoggerFactory.getLogger(getClass());
private final List<SqlParameter> declaredParameters;

public CallableStatementCreatorWithDefaultArgsFactory(String callString, List<SqlParameter> declaredParameters) {
    super(callString, declaredParameters);
    this.declaredParameters = declaredParameters;
}

protected void cleanupParameters(SqlParameterSource sqlParameterSource) {
    MapSqlParameterSource mapSqlParameterSource = (MapSqlParameterSource) sqlParameterSource;
    Iterator<SqlParameter> declaredParameterIterator = declaredParameters.iterator();
    Set<String> parameterNameSet = mapSqlParameterSource.getValues().keySet();
    while (declaredParameterIterator.hasNext()) {
        SqlParameter parameter = declaredParameterIterator.next();
        if (!(parameter instanceof SqlOutParameter) &&
                (!mapContainsParameterIgnoreCase(parameter.getName(), parameterNameSet))) {
            logger.warn("Missing value parameter "+parameter.getName() + " will be replaced by null!");
            mapSqlParameterSource.addValue(parameter.getName(), null);
        }
    }
}

private boolean mapContainsParameterIgnoreCase(String parameterName, Set<String> parameterNameSet) {
    String lowerParameterName = parameterName.toLowerCase();
    for (String parameter : parameterNameSet) {
        if (parameter.toLowerCase().equals(lowerParameterName)) {
            return true;
        }
    }
    return false;
}

@Override
public void addParameter(SqlParameter param) {
    this.declaredParameters.add(param);
} 
````  `* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-01T13:06:08.143

我使用这个 util 方法：

```
public <T> void setOptionalParameter(MapSqlParameterSource parameters, String name, T value) {
    if (value == null)
        parameters.addValue(name, value, Types.NULL);
    else
        parameters.addValue(name, value);
} 
```````

# xcode - Xcode 最大化窗口时锁定对象

> ID：13162045
> 
> 赞同：1
> 
> 时间：2012-10-31T16:01:09.200
> 
> 标签：xcode, resize, window

我正在寻找以下内容：

我在 .nib 文件中有一个对象（框）。无论窗口发生什么，调整大小，最大化，......我希望盒子在同一个地方，并且不惜一切代价具有相同的宽度和高度。

这怎么可能？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:40:13.133

我认为从 xCode 4.3 开始，对象使用自动布局。要禁用此功能，请转到检查器中的第一个选项卡。然后取消选中“使用自动布局”。然后只需转到布局选项卡并在“自动化”框中检查从左到右和从上到下的箭头！以下是一些图片：

1.

![在此处输入图像描述](../Images/aa1f512971523c82499f54d3f4a3d7aa.png)

2.

![在此处输入图像描述](../Images/bbe5fa3b1889c88c406a611c22167b8f.png)

# html - 谷歌浏览器允许/拒绝使用设备的网络摄像头和谷歌浏览器应用程序的提示

> ID：13162051
> 
> 赞同：1
> 
> 时间：2012-10-31T16:01:26.080
> 
> 标签：html, google-chrome, google-chrome-extension, camera

目前，谷歌浏览器为我提供了使用我的设备网络摄像头的安全性，并提示“..想要使用你的相机”允许/拒绝。每次我加载一个页面时，我都会得到这个选项。我正在尝试使用嵌入在我的 google chrome 应用程序中的相机

有没有办法确保一旦用户说“允许”，就会检索到该值，并且用户不必授予该特定应用程序的访问权限。

是否有任何我可以使用的 API 存储“允许”或“拒绝点击”并将其发送回应用程序，以便我可以相应地进行一些修改。

不过，我无法使用我的 chrome 浏览器重现它。我没有收到用户允许/拒绝的任何提示。但是，客户端收到此提示，并且每次应用程序尝试访问相机时都对提示不满意

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T22:34:22.880

如果您谈论的是 Chrome 打包应用程序，您可以在清单中使用“audioCapture”和“videoCapture”权限。如果包含这些，则不会出现任何信息栏提示。

[https://github.com/GoogleChrome/chrome-app-samples/blob/master/camera-capture/manifest.json#L14](https://github.com/GoogleChrome/chrome-app-samples/blob/master/camera-capture/manifest.json#L14)

如果您正在编写托管在 Web 服务器上的普通 Web 应用程序，那么绕过信息栏提示的唯一方法是通过 SSL (https) 运行视线。在这种情况下，只会提示用户一次。如果用户第一次接受，您的应用程序的后续使用将不会显示提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-20T13:30:37.127

一种解决方案是使用 use-fake-ui-for-media-stream 属性在命令行中启动浏览器。

```
start chrome "http://localhost" --use-fake-ui-for-media-stream 
```

有关 Linux 和 Mac 命令行指令的更多信息：[https ://creativcoders.wordpress.com/2014/08/18/chrome-always-allow-access-to-webcam-and-microphone-over-http-webrtc/](https://creativcoders.wordpress.com/2014/08/18/chrome-always-allow-access-to-webcam-and-microphone-over-http-webrtc/)

# c# - 从 LINQ 查询结果中检索 id

> ID：13162057
> 
> 赞同：1
> 
> 时间：2012-10-31T16:01:43.817
> 
> 标签：c#, linq

我正在使用一个在函数中执行操作（我认为是 LINQ）并返回如下对象集合的库：

```
System.Collections.Generic.IEnumerable<ColorInformation> 
```

这个“ColorInformation”是一个看起来像这样的类：

```
public class ColorInformation
{
    private readonly System.Drawing.Color color;
    private readonly string rowTitle;
    private readonly System.Collections.Generic.List<int> ids;

    public ColorInformation(System.Drawing.Color color, string rowTitle,
        System.Collections.Generic.List<int> ids)
    {
        this.color = color;
        this.rowTitle = rowTitle;
        this.ids = ids;
    }

    public string RowTitle
    {
        get { return rowTitle; }
    }

    public System.Drawing.Color Color
    {
        get { return color; }
    }

    public System.Collections.Generic.List<int> Ids
    {
        get { return ids; }
    }
} 
```

我有兴趣检索返回的集合中所有对象的所有 id。我试过这个：

```
var myids = from ids in theCollectionReturned select ids.Ids; 
```

这给了我一个带有 ID 的列表集合。我真正想要的只是一个包含所有整数 ID 的列表。所以，必须在某个地方进行演员表或某种转换，我不知道该怎么做。任何帮助、提示、阅读、代码、示例将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T16:02:46.650

> 我真正想要的只是一个包含所有整数 ID 的列表。

听起来你想要：

```
var ids = theCollectionReturned.SelectMany(info => info.Ids); 
```

# c# - Linq c#在时间跨度之间使用

> ID：13162060
> 
> 赞同：0
> 
> 时间：2012-10-31T16:01:48.360
> 
> 标签：c#, .net, linq

我在数据库中有两个字段名为“StartTime”和“EndTime”

我已将记录保存为

```
开始时间结束时间
05:00:00.0000000 06:00:00.0000000

```

如果在同一时间或在 05:00:00.0000000 到 06:00:00.0000000 之间插入另一条记录，我想显示一条错误消息

这意味着无论开始和结束时间是什么，都不应该出现在 05 到 06 之间。

```
04 到 06 - 显示错误
04:30 到 06 - 显示错误
05:00 到 07 - 显示错误

```

我如何使用 linq 实现这一目标？

这是我目前的尝试，它不会产生正确的结果：

```
string _timepicker_start = collection["timepicker_start"];
string _timepicker_end = collection["timepicker_end"];
TimeSpan _end = new TimeSpan(Convert.ToInt16(_timepicker_end.Split(':')[0])
    ,  Convert.ToInt16(_timepicker_end.Split(':')[1]), 00);
TimeSpan _start = new TimeSpan(Convert.ToInt16(_timepicker_start.Split(':')[0])
    , Convert.ToInt16(_timepicker_start.Split(':')[1]), 00);

var _schedule = _db.Classes
                 .Where(c => c.StartTime <= _start && c.EndTime >= _end)
                .FirstOrDefault(); 

if (_schedule != null)
{
    // Show message already have record.. 
} 
```

它不能正常工作，请建议我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T16:06:34.757

你想`c => c.EndTime > _start && c.StartTime < _end`在你的`Where`.

（如果您不希望项目能够在任一端“触摸”，请添加相等性。）

这假设您正在验证`StartTime`<=`EndTime`的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:53:55.693

感谢堆栈溢出：

我的解决方案如下：

```
 var _schedule = _db.Classes
             .Where(c => (c.StartTime >= _start || c.StartTime <_end)&& c.EndTime > _end)
            .FirstOrDefault(); 
```

感谢您的快速响应和帮助！！！

# android - 我的应用程序正在强制关闭什么？线程有一些错误。但我无法弄清楚？

> ID：13162061
> 
> 赞同：2
> 
> 时间：2012-10-31T16:01:48.373
> 
> 标签：android

```
public class MainActivity extends Activity {

    private Button Start, Reset, Stop;
    private EditText stop_watch, lblDate, lblTime;

    public MainActivity() {
        init();
    }

    private final UpdateClockThread ucThread = new UpdateClockThread();
    private final StopwatchThread swThread = new StopwatchThread();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Start = (Button)findViewById(R.id.button1);
        Stop = (Button)findViewById(R.id.button3);
        Reset = (Button)findViewById(R.id.button2);
        stop_watch = (EditText)findViewById(R.id.editText3);
        lblTime = (EditText)findViewById(R.id.editText2);
        lblDate = (EditText)findViewById(R.id.editText1);

        Start.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v)
            {
                startactionPerformed();
            }
        });

        Stop.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v)
            {
                stopactionPerformed();
            }
        });

        Reset.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v)
            {
                resetactionPerformed();
            }
        });

    }

    public void init() {
    swThread.setDaemon(true);
    ucThread.setDaemon(true);
    swThread.start();
    ucThread.start();
    }

    /** Listens to the Start/Stop/Resume button. */

    void startactionPerformed() {
        swThread.go();
        //init();
    }

    void stopactionPerformed() {
        swThread.noGo();
    }

    void resetactionPerformed() {
        swThread.reset();
    }

    /** A thread that updates the current date & time. */
    private class UpdateClockThread extends Thread {
    /** The actual work of the thread. */
        public void run() {
            while (true) {
                lblTime.setText("ampm");
                Calendar now = Calendar.getInstance();
                String month = Integer.toString(now.get(Calendar.MONTH)+1);
                String date = Integer.toString(now.get(Calendar.DAY_OF_MONTH));
                String year = Integer.toString(now.get(Calendar.YEAR));
                String hour = Integer.toString(now.get(Calendar.HOUR));
                if (hour.equals("0")) hour = "12";
                String minute = Integer.toString(now.get(Calendar.MINUTE));
                if (minute.length() == 1) minute = "0" + minute;
                String second = Integer.toString(now.get(Calendar.SECOND));
                if (second.length() == 1) second = "0" + second;
                String ampm = now.get(Calendar.AM_PM) == Calendar.AM ? "AM" : "PM";
                lblDate.setText(month + "/" + date + "/" + year);
                lblTime.setText(hour + ":" + minute + ":" + second + " " + ampm);
                try {
                    sleep(500);
                } catch (InterruptedException e) {} 
            }
        }
    }

    /** A thread that keeps track of the stop watch & updates
     * the display accordingly.
    */
    class StopwatchThread extends Thread {
        /** Whether or not stop watch is running. */
        private boolean going = false;
        /** Stores elapsed milliseconds of previous runs. */
        private long prevElapsed = 0;
        /** Stores beginning time of this run. */
        private Date startDate = new Date();

        /** Returns elapsed time in milliseconds.
         *@return The elapsed time
         */
        private long elapsedTime() {
            return prevElapsed + (going ? new Date().getTime() - startDate.getTime() : 0);
        }
        /** Changes the number of elapsed milliseconds into a string.
         *@param time Number of elapsed milliseconds
         *@return The elapsed time as a string.
         */
        private String msToString(long time) {
            String ms, sec, min;
            if (time % 10 >= 5) //round to nearest hundredth
                time += 5;
            ms = Long.toString(time % 1000);
            while (ms.length() < 3)
            ms = "0" + ms;
            ms = ms.substring(0, ms.length() - 1);
            time /= 1000;
            sec = Long.toString(time % 60);
            if (sec.length() == 1) sec = "0" + sec;
            time /= 60;
            min = Long.toString(time);
            return min + ":" + sec + "." + ms;
        }

        /** Called when the stop watch is to go.
         */
        public void go() {
            startDate = new Date();
            going = true;
        }
        /** Called when the stop watch is to stop.
         */
        public void noGo() {
            prevElapsed = elapsedTime();
            going = false;
        }
        /** Resets the stop watch.
         */
        public void reset() {
            going = false;
            prevElapsed = 0;
        }
        /** Adds a lap to the list.
         */

        /** Main code of the thread.
         */
        public void run() {
            while (true) {
                stop_watch.setText(msToString(elapsedTime()));
                yield();
            }
        }
    }
} 
```

我的应用程序正在强制关闭什么？线程有一些错误。但我无法弄清楚？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:11:55.877

`runOnUiThread`尝试从Activity [http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)方法中的线程与 UI 进行所有交互

**编辑**

```
private class UpdateClockThread extends Thread {
   public void run() {
       /* Do somthing expensive */
       ......

       /* Update UI */
       MainActivity.this.runOnUiThread(new Runnable() {
           @Override
           public void run() {
               /* Do UI update */;
               lblTime.setText("ampm");
               ......
           }
       });
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:02:56.227

您应该在您的开发人员机器上运行 adb logcat。通常，如果您强制关闭，则会在日志中显示回溯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T18:04:13.913

您的课程`StopwatchThread`包含以下行：

```
stop_watch.setText(msToString(elapsedTime())); 
```

这将不起作用，UI 也不会在`UpdateClockThread`. 这是因为您无法从后台线程修改 UI。您的后台线程应该：

*   向在 UI 线程上创建的 a 发送消息`Handler`，以便`Handler`随后对 UI 进行更新，或者
*   您可以将一个可运行的对象传递给`runOnUiThread`执行 UI 更新的对象。

# android - 如何将对观察者的引用传递给片段

> ID：13162062
> 
> 赞同：1
> 
> 时间：2012-10-31T16:01:49.510
> 
> 标签：android, android-fragments, observer-pattern

我有以下问题：

我有一个从类*Fragment派生的**MenuListFragment*类。*MenuListFragment*具有对观察者的引用。当用户按下 ListView 中的一行时，会通知观察者。

 **如何将观察者传递给 Fragment 类的对象。目前我是通过 MenuListFragment 构造函数来完成的。

```
public MenuListFragment(MenuListObserver observer) {
    mObserver = observer;
} 
```

不幸的是，当我旋转手机时，我的应用程序崩溃了。我知道这是因为没有默认构造函数，但我能做什么？**

# fuelphp - 在 FuelPHP 中使用 Model_Crud 返回 1 行

> ID：13162068
> 
> 赞同：1
> 
> 时间：2012-10-31T16:02:13.303
> 
> 标签：fuelphp

我将如何修改它以使其返回 1 行对象，而不是数组？

```
$slot = Model_Slots::find(array(
    'where' => array(
        array('datetime', '=', date('Y-m-d H:i:s', $s)),
        array('club', '=', $club->id),
    ),
)); 
```

（目前的解决方案是跟随它...... `$slot = ($slot[0]) ?: false;`，呃！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T16:17:38.927

这可以使用`get_one()`- [http://docs.fuelphp.com/packages/orm/crud.html#/find_chaining](http://docs.fuelphp.com/packages/orm/crud.html#/find_chaining)

```
$slot = Model_Slots::find(array(
    'where' => array(
        array('datetime', '=', date('Y-m-d H:i:s', $s)),
        array('club', '=', $club->id),
    ),
))->get_one(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T17:07:11.850

find_by_pk() 和 find_one_by() 都返回单个模型对象，就像 ORM get_one() 等效项一样。

其他 find 方法返回一个结果数组。最简单的方法是添加一个 LIMIT 1，然后使用

```
$result and $result = reset($result); 
```

获取数组的第一个元素。

# django - 使用 django-social-auth 和 Facebook 身份验证失败

> ID：13162071
> 
> 赞同：4
> 
> 时间：2012-10-31T16:02:22.553
> 
> 标签：django, facebook, facebook-authentication, django-socialauth

我正在使用 django-social-auth 进行 Facebook 服务器端身份验证，但出现了我无法追踪的错误：AuthFailed('There was an error authentication the app')。

当我在本地进行测试并且我的 Facebook 应用程序站点 URL 指向本地主机时，我没有收到此错误。

但是，每次我将 Facebook 应用程序站点 URL 指向我的开发实例时，我都会收到此错误 - 例如，[https://dev.mydomain.com](https://dev.mydomain.com)。

我无法找到可能导致 AuthFailed('There was an error authentication the app') 错误的列表。

另外，我还没有找到其他成功使用 django-social-auth 并已经解决了这个问题的人。

我在以下位置找到了一些有用的信息： [https ://github.com/omab/django-social-auth/blob/master/doc/configuration.rst](https://github.com/omab/django-social-auth/blob/master/doc/configuration.rst)
[http://django-social-auth.readthedocs.org/ zh/最新/](http://django-social-auth.readthedocs.org/en/latest/)
[https://developers.facebook.com/docs/technical-guides/login/](https://developers.facebook.com/docs/technical-guides/login/) [https://developers.facebook.com/docs/howtos/login/server-side-login/](https://developers.facebook.com/docs/howtos/login/server-side-login/)

最后，我想进行服务器端身份验证，因为我想检索用户的姓名、电子邮件和照片。但是，如果这可以通过客户端身份验证来完成，我想我可以尝试一下。

下面的代码...

在 settings.py 中：

```
LOGIN_URL = '/account/login/'
LOGIN_REDIRECT_URL = '/'
LOGIN_ERROR_URL = '/account/login/' # added when trying to debug Facebook error

AUTHENTICATION_BACKENDS = (
    'social_auth.backends.facebook.FacebookBackend',
    'django.contrib.auth.backends.ModelBackend',
)

FACEBOOK_APP_ID = 'xxx'
FACEBOOK_API_SECRET = 'xxxxxx'
FACEBOOK_EXTENDED_PERMISSIONS = ['email']

SOCIAL_AUTH_CREATE_USERS = True
SOCIAL_AUTH_FORCE_RANDOM_USERNAME = False
SOCIAL_AUTH_DEFAULT_USERNAME = 'socialauth_user'
SOCIAL_AUTH_COMPLETE_URL_NAME = 'socialauth_complete'
SOCIAL_AUTH_ERROR_KEY = 'socialauth_error'
SOCIAL_AUTH_REDIRECT_IS_HTTPS = True    # force https in dev and production

# is SOCIAL_AUTH_LOGIN_REDIRECT_URL or SOCIAL_AUTH_BACKEND_ERROR_URL needed???

SOCIAL_AUTH_PIPELINE = (
    'social_auth.backends.pipeline.social.social_auth_user',
    'social_auth.backends.pipeline.associate.associate_by_email',
    'social_auth.backends.pipeline.misc.save_status_to_session',
    'apps.dsa_pipeline.redirect_to_form',
    'apps.dsa_pipeline.username',
    'apps.dsa_pipeline.phone',
    'social_auth.backends.pipeline.user.create_user',
    'social_auth.backends.pipeline.social.associate_user',
    'social_auth.backends.pipeline.social.load_extra_data',
    'social_auth.backends.pipeline.user.update_user_details',
    'apps.dsa_pipeline.profile',
) 
```

在 dsa_pipeline.py 中：

```
from django.http import HttpResponseRedirect
from urllib2 import urlopen

def redirect_to_form(*args, **kwargs):
    if not kwargs['request'].session.get('saved_username') and kwargs.get('user') is None:
        return HttpResponseRedirect('/account/signup_dsa/')

def username(request, *args, **kwargs):
    if kwargs.get('user'):
        username = kwargs['user'].username
    else:
        username = request.session.get('saved_username')
    return {'username': username}

def phone(request, *args, **kwargs):
    if kwargs.get('phone'):
        phone = kwargs['phone'].phone
    else:
        phone = request.session.get('saved_phone')
    return {'phone': phone}

def profile(backend, details, response, social_user, uid, user, *args, **kwargs):
    profile = user.profile
    if not profile.phone:
        ph = kwargs.get('phone')
        if ph:
            profile.phone = ph
            profile.save() 
```

在 urls.py 中：

```
urlpatterns = patterns("",
    url(r"^$", direct_to_template, {"template": "homepage.html"}, name="home"),
    url(r"^admin/", include(admin.site.urls)),

    # profiles
    url(r'^', include("apps.profiles.urls")),
    url(r"^account/signup/$", SignupView.as_view(), name="account_signup"),
    url(r"^account/signup_dsa/$", SignupViewDSA.as_view(), name="account_signup_dsa"), 
    url(r"^account/", include("account.urls")),

    # Django Social Auth
    url(r'', include('social_auth.urls')), 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:59:43.103

[此处](https://github.com/omab/django-social-auth/blob/master/social_auth/backends/facebook.py#L107)出现该`AuthFailed`错误，我将检查 的值，并在上面几行中使用并与您在 Facebook 上的应用程序配置进行比较。`client_id``redirect_uri``client_secret`

# opencv - SiftFeatureDetector .detect 功能损坏？

> ID：13162074
> 
> 赞同：1
> 
> 时间：2012-10-31T16:02:33.857
> 
> 标签：opencv, sift, feature-detection, surf

我一直在从在线资源中尝试 SIFT/SURF，并想自己测试一下。

我首先尝试使用以下代码不使用非免费库：

```
int _tmain(int argc, _TCHAR* argv[])
{
Mat img = imread("c:\\car.jpg", 0);
Ptr<FeatureDetector> feature_detector = FeatureDetector::create("SIFT");
vector<KeyPoint> keypoints;

feature_detector->detect(img, keypoints);

Mat output;

drawKeypoints(img, keypoints, output, Scalar(255, 0, 0));

namedWindow("meh", CV_WINDOW_AUTOSIZE);
imshow("meh", output);
waitKey(0);

return 0; 
```

}

在这里，如果我逐步调试它会中断`feature_detector->detect(img, keypoints);`

然后我尝试使用非免费库并尝试了以下代码：

```
int main(int argc, char** argv) 
{
    const Mat input = cv::imread("/tmp/image.jpg", 0); //Load as grayscale

    SiftFeatureDetector detector;
    vector<KeyPoint> keypoints;
    detector.detect(input, keypoints);

    // Add results to image and save.
    Mat output;
    drawKeypoints(input, keypoints, output);
    imwrite("/tmp/SIFT_RESULT.jpg", output);

    return 0;

 } 
```

这再次编译没有错误，但运行时，在这一步中断：`detector.detect(input, keypoints);`

我找不到原因。有人可以在这里帮助我吗？

谢谢

编辑：这是我在中断时得到的错误：

> SIFT.exe 中 0x007f0900 处未处理的异常：0xC0000005：访问冲突读取位置 0x00000000。

.

> 我的设置：Microsoft Visual C++ 2010、OpenCV 2.4.2、Windows XP。添加和链接的所有库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:03:41.383

Use color image not grayscale, it works for me that way.
You could try skipping "const" too, if the color image would not work either.

```
const Mat input = cv::imread("/tmp/image.jpg"); 
```

# php - 每次将 IP 插入 MySQL 数据库更改

> ID：13162078
> 
> 赞同：0
> 
> 时间：2012-10-31T16:02:44.503
> 
> 标签：php, mysql, ip

我有一个记录用户 IP 的评级脚本，因此他们不能对文件进行多次评级。但是，每次我对文件进行评分以对其进行测试时，我的 $ip 都会随着 ip2long() 函数的变化而变化。这是怎么回事？这是我的代码：

```
<?php

require('connect.php');

    $sheetID = $_GET["id"]; 
    $rating = $_GET["rating"];
$ip= $_SERVER['REMOTE_ADDR'];
$ip = ip2long($ip);

    $checkIPQuery = mysql_query("SELECT * FROM ratings WHERE sheetID = '$sheetID' and INET_NTOA(ip) = '$ip'");
    $doesIPExist = mysql_num_rows($checkIPQuery);
    if ($doesIPExist == 0) { 
        mysql_query("INSERT INTO ratings (sheetID, rating, ip) VALUES ($sheetID, $rating, $ip)"); 

        echo " $ip
<script>setTimeout(function(){location.href = '../sheets.php?id=$sheetID'},1);</script>"; 
    }
    else
        echo 'You have already rated this image!'; 

?> 
```

然后检查用户是否对脚本进行了评分：

```
$id = $_GET['id'];
$ip=$_SERVER['REMOTE_ADDR'];
$ip = ip2long($ip);

$checkIPQuery = mysql_query("SELECT * FROM ratings WHERE sheetID = '$id' and INET_NTOA(ip) = '$ip'");

$doesIPExist = mysql_num_rows($checkIPQuery); 
```

* * *

这是我所做的：

*   当 $ip 不会进入 varchar(15) 时，将该字段更改为未分配的 INT
*   我添加了 ip2long() 函数，因为我将 ip 字段更改为 INT
*   然后我添加了 INET_NTOA(ip) 来读取 ip2long() INT

任何帮助，将不胜感激。谢谢！

**编辑：**例如，如果我将 $ip 设置为 3，这些脚本可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:11:12.230

在阅读了评论和一些研究之后，我找到了答案，而且很简单。

在 32 位系统上`ip2long()`返回负整数和正整数，但`INET_NTOA()`仅适用于正整数。所以你有两个选择来解决这个问题：

1.  更改您的 PHP 代码：`$ip = sprintf('%u', ip2long($_SERVER['REMOTE_ADDR']));`
2.  更改您的 SQL 查询：`... AND ip = " . ip2long($_SERVER['REMOTE_ADDR']) . " ...`

您可以通过以下方式验证这一事实：

```
$ip  = $_SERVER['REMOTE_ADDR'];
$int = ip2long($ip);    
var_dump($ip, $int, sprintf('%u', $int)); 
```

这会产生以下输出：

```
string '192.168.1.120' (length=13)
int -1062731400
string '3232235896' (length=10) 
```

然后转到 MySQL：

```
mysql> SELECT '192.168.1.120', INET_NTOA(-1062731400), INET_NTOA(3232235896)
+---------------+------------------------+-----------------------+
| 192.168.1.120 | INET_NTOA(-1062731400) | INET_NTOA(3232235896) |
+---------------+------------------------+-----------------------+
| 192.168.1.120 | NULL                   | 192.168.1.120         |
+---------------+------------------------+-----------------------+
1 row in set (0.00 sec) 
```

# cairo - 无法在开罗呈现文本

> ID：13162085
> 
> 赞同：8
> 
> 时间：2012-10-31T16:03:03.167
> 
> 标签：cairo

我是 cairo 的新手，我已经阅读了其网站上的教程/文档。现在我可以制作线条、矩形，基本上我可以渲染图像但不能渲染文本。

我正在使用以下代码

```
cairo_select_font_face (cr, "monospace", CAIRO_FONT_SLANT_NORMAL, CAIRO_FONT_WEIGHT_NORMAl);

    cairo_set_font_size (cr, 14);

    cairo_set_source_rgb (cr, 1, 1, 1);

    cairo_move_to (cr, 50, 50);

    cairo_show_text (cr, "Print Something"); 
```

谁能指出我的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T08:53:08.070

与开罗邮件列表中的答案相同（似乎在某处丢失了）：

你没有做错任何事（好吧，也许使用玩具文本 API，但这应该仍然有效）并且你的代码对我来说很好。这是我测试的完整代码：

```
#include <cairo.h>
int main()
{
        cairo_surface_t *surface = cairo_image_surface_create(CAIRO_FORMAT_ARGB32, 200, 200);
        cairo_t *cr = cairo_create(surface);
        cairo_surface_destroy(surface);

        /* Fill everything with white */
        cairo_set_source_rgb(cr, 1, 1, 1);
        cairo_paint(cr);

        /* Draw some text */
        cairo_select_font_face (cr, "monospace", CAIRO_FONT_SLANT_NORMAL, CAIRO_FONT_WEIGHT_NORMAL);
        cairo_set_font_size (cr, 14);
        cairo_set_source_rgb (cr, 0, 0, 0);
        cairo_move_to (cr, 0, 50);
        cairo_show_text (cr, "Print Something");

        cairo_surface_write_to_png(cairo_get_target(cr), "out.png");
        cairo_destroy(cr);
        return 0;
} 
```

# javascript - 无法使用 javascript 以编程方式单击标签

> ID：13162088
> 
> 赞同：0
> 
> 时间：2012-10-31T16:03:06.557
> 
> 标签：javascript, jquery-mobile, onclick, click, label

我有一个js问题。这个网站：[http](http://befwifi.bobevans.com/Mobile.aspx) ://befwifi.bobevans.com/Mobile.aspx （不是我的网站）

如何以编程方式使用 js 模拟点击“我同意条款”标签？

模拟点击必须与真实点击完全一样。即使该框看起来已选中，而不刷新页面。

例如，这些都不起作用！

document.getElementsByTagName("label")[0].click()

$(document.getElementsByTagName("label")[0]).click()

$(document.getElementsByTagName("label")[0]).trigger("click")

（网站使用jquery）

目的：

我正在创建一个通用 js 脚本来记录页面上的所有点击和输入。然后，当您再次登陆该页面时，您可以重播这些事件。我被这个页面难住了，因为虽然我可以轻松地将 onclick 记录到标签上，但是当我以编程方式重放 click() 时，它的作用与我自己单击元素时不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:05:42.700

尝试单击`checkbox`而不是标签。这将做你想要的。

`document.getElementById("chkAcceptTerms").click();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:09:30.420

您需要点击相关输入，例如使用 ID 选择器；

```
$("#" + $("label").attr("for")).click(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T16:10:00.343

该网页使用jquery mobile

`<input id="chkAcceptTerms" type="checkbox" name="chkAcceptTerms"/> <label for="chkAcceptTerms">I AGREE TO THE TERMS</label>`

模拟点击事件试试这个：

```
$("#chkAcceptTerms").click(); 
```

# c++ - C ++中的静态全局标识符和非静态全局标识符有什么区别？

> ID：13162092
> 
> 赞同：32
> 
> 时间：2012-10-31T16:03:18.913
> 
> 标签：c++, static, global-variables, identifier

C++ 中的全局标识符`static`和非全局标识符有什么区别？`static`

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-31T16:05:29.703

静态将变量的范围限制在同一个**[翻译单元](https://stackoverflow.com/questions/1106149/what-is-a-translation-unit-in-c)**。
静态**全局**变量具有**内部链接**。**非静态全局**
变量具有**外部链接**。

 ******好读：**
[什么是外联和内联？](https://stackoverflow.com/questions/1358400/what-is-external-linkage-and-internal-linkage-in-c)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-31T16:05:40.503

全局`static`变量仅在变量所在的*翻译单元*（即源文件）中可用。非静态全局变量可以从其他源文件中引用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-31T16:11:33.697

全局非静态变量可从其他文件访问，而静态全局变量则不可

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-31T22:32:18.827

如果您不知道有什么区别，正确的答案可能会让您更加困惑。简而言之，`static`类的 s 与文件范围内的静态无关。类的静态本质上与常规变量相同，但必须通过在它们前面加上类名来引用它们。文件范围内的静态变量是仅对文件本地的常规变量。要了解这意味着什么，请尝试将两个具有相同名称的变量添加到单个项目中。您将收到链接器错误，因为有多个相同的符号。通过使符号静态，您将避免问题和变量的名称将无法从文件外部访问。****

# c# - Silverlight 4 - 相关表格数据网格显示排序

> ID：13162093
> 
> 赞同：0
> 
> 时间：2012-10-31T16:03:25.283
> 
> 标签：c#, silverlight-4.0

我正在使用来自[http://help.arcgis.com/en/webapi/silverlight/samples/start.htm#QueryRelatedRecords](http://help.arcgis.com/en/webapi/silverlight/samples/start.htm#QueryRelatedRecords)的示例代码将相关数据显示到数据网格中。在我的数据中，我需要按年份对表进行排序（我的相关表中名为“_year”的属性）。我不确定如何在 xaml 或 c# 中完成此操作。以下是我当前的代码：

xml:

```
 <basics:TabControl Grid.Column="1" Margin="0,-1,0,0" Grid.RowSpan="2" Grid.ColumnSpan="2" Grid.Row="1" d:LayoutOverrides="GridBox">
                <basics:TabItem x:Name="DataTab" Header="Data">
                    <Grid Background="#FFE5E5E5">
                        <slData:DataGrid x:Name="RelatedRowsDataGrid" AutoGenerateColumns="False" HeadersVisibility="All" 
                     BorderThickness="1" HorizontalScrollBarVisibility="Hidden" IsReadOnly="True" Margin="4,0,2,6" Height="127" VerticalAlignment="Bottom">
                            <slData:DataGrid.Columns>
                                <slData:DataGridTextColumn CanUserSort="False"  Binding="{Binding Attributes[loc_id]}" Header="Location ID" FontWeight="Bold"/>
                                <slData:DataGridTextColumn  CanUserSort="True" Binding="{Binding Attributes[_year]}" Header="Year"/>
                                <slData:DataGridTextColumn CanUserSort="False" Binding="{Binding Attributes[adt]}" Header="ADT"/>
                            </slData:DataGrid.Columns>
                        </slData:DataGrid>
                    </Grid>
                </basics:TabItem>
                <basics:TabItem x:Name="ChartTab" Header="Chart">
                    <Grid Background="#FFE5E5E5">
                        <toolkit:Chart x:Name="MyChart2" Title="{Binding [PAGsde.DBO.TrafficCountNetwork.loc_id]}" 
                           esri:GraphicsLayer.MapTipHideDelay="0:0:3" Background="LightGray"  
                           LegendStyle="{StaticResource BlankLegendStyle}" TitleStyle="{StaticResource SmallTitleStyle}">
                            <toolkit:Chart.Series>
                                <toolkit:ColumnSeries Title="ADT" IndependentValueBinding="{Binding Attributes[_year]}" 
                                          DependentValueBinding="{Binding Attributes[adt]}">
                                </toolkit:ColumnSeries>
                            </toolkit:Chart.Series>
                        </toolkit:Chart>
                    </Grid>
                </basics:TabItem>
            </basics:TabControl> 
```

C＃：

```
 private void SelectedRoadsTreeView_SelectedItemChanged(object sender, RoutedPropertyChangedEventArgs<object> e)
{
    if (e.OldValue != null)
    {
        Graphic g = e.OldValue as Graphic;
        g.UnSelect();
        g.SetZIndex(0);
    }

    if (e.NewValue != null)
    {
        Graphic g = e.NewValue as Graphic;
        g.Select();
        g.SetZIndex(1);

        //Relationship query
        RelationshipParameter relationshipParameters = new RelationshipParameter()
        {
            ObjectIds = new int[] { Convert.ToInt32(g.Attributes[SelectedRoadsTreeView.Tag as string]) },
            OutFields = new string[] { "loc_id, count_id, _year, adt" },
            RelationshipId = 0,
            OutSpatialReference = Map.SpatialReference
        };

        queryTask.ExecuteRelationshipQueryAsync(relationshipParameters);

        MyChart2.Title = g.Attributes["TrafficCounts.COUNTUSER.%segment_master._street"];
    }
}
void QueryTask_ExecuteRelationshipQueryCompleted(object sender, RelationshipEventArgs e)
{
    RelationshipResult pr = e.Result;
    if (pr.RelatedRecordsGroup.Count == 0)
    {
        RelatedRowsDataGrid.ItemsSource = null;
    }
    else
    {
        foreach (var pair in pr.RelatedRecordsGroup)
        {
            RelatedRowsDataGrid.ItemsSource = pair.Value;
            //?.SortDescriptions.Add(new System.ComponentModel.SortDescription("Attributes[_year]", System.ComponentModel.ListSortDirection.Ascending));

            ((ColumnSeries)MyChart2.Series[0]).ItemsSource = pair.Value;    //new KeyValuePair<int, int>[] { new KeyValuePair<int, int>(2005, 1200) };
        }
    }
} 
```

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:39:10.310

此代码应该可以帮助您

```
 bool SortDateAsc = true;
    private void Date_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        if (SortDateAsc)
        {
            ObservableCollection<InvoicesDTO> a = new ObservableCollection<InvoicesDTO>(((ResolutionVM)this.DataContext).MainInvoiceList.OrderBy(oc => oc.FC_AGE));
            ((ResolutionVM)this.DataContext).MainInvoiceList = a;
            InvoiceGrid.ItemsSource = ((ResolutionVM)this.DataContext).MainInvoiceList.ToList();
            SortDateAsc = false;
            ((ResolutionVM)this.DataContext).RefreshSelctedInvoice();
        }
        else
        {
            ObservableCollection<InvoicesDTO> a = new ObservableCollection<InvoicesDTO>(((ResolutionVM)this.DataContext).MainInvoiceList.OrderByDescending(oc => oc.FC_AGE));
            ((ResolutionVM)this.DataContext).MainInvoiceList = a;
            InvoiceGrid.ItemsSource = ((ResolutionVM)this.DataContext).MainInvoiceList.ToList();
            SortDateAsc = true;
            ((ResolutionVM)this.DataContext).RefreshSelctedInvoice();
        }

    } 
```

# java - 链式字符串 - 操作大型字符串缓冲区

> ID：13162094
> 
> 赞同：0
> 
> 时间：2012-10-31T16:03:26.357
> 
> 标签：java, c++, string

几个月前，我偶然发现了一些关于大型字符串缓冲区的问题，其中缓冲区被组装成类似于链表的东西，而不是大的连续内存块。我在谷歌搜索这项技术时遇到了麻烦，想知道是否有人可以帮助我？这个想法是您可以重新排列字符串的大部分而不需要任何额外的重新分配（移动整个句子或整个段落）。

不知道要搜索什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T16:10:46.380

我相信您可能正在寻找关键字“绳索”。实际上，我不知道它们是如何实现的，我从未使用过它们。但它是我听说过的连续字符串的唯一替代方案。如上所述，用例似乎与您所描述的相似。

[这是 SGI STL 中的一个示例](http://www.sgi.com/tech/stl/Rope.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:35:43.760

它确实被称为绳索（因为它是……一根大绳子）。

[在这个问题](https://stackoverflow.com/q/12286841/212858)中有一些关于实用性的讨论，但恐怕我不知道除了本杰明链接的 SGI 之外的任何实现。

# php - 从 codeigniter 网站发布推文

> ID：13162101
> 
> 赞同：1
> 
> 时间：2012-10-31T16:03:43.403
> 
> 标签：php, twitter, codeigniter-2

我有一个用 codeigniter 开发的 PHP 站点。

用户在网站上发表评论，我希望将这些评论发送到用户的帐户。我怎样才能做到这一点？？？

我正在使用 elliot haughin 的 twitter 库登录 twitter。这个库对发推文有帮助吗？？？

谢谢，阿尼凯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T20:28:22.433

使用[这个存储库](https://github.com/vixnet/codeigniter-twitter)，它是 Elliot 库的更新版本。原来的已经*有两年了*，可能不再积极维护了。请参阅[`tweet_test.php`](https://github.com/vixnet/codeigniter-twitter/blob/master/application/controllers/tweet_test.php)Twitter 的示例推文，它应该可以帮助您入门。

# android - Android MediaPlayer mp3 错误

> ID：13162108
> 
> 赞同：0
> 
> 时间：2012-10-31T16:04:15.650
> 
> 标签：android, android-mediaplayer

有谁知道为什么这不起作用？它在 logcat 中给了我一个非常基本的错误，所以我想我不必添加它。

MainActivity.java：

```
package com.sydcul.badluckboris;

import android.media.MediaPlayer;
import android.os.Bundle;
import android.app.Activity;
import android.view.View;
import android.widget.ImageButton;

public class MainActivity extends Activity {

    ImageButton boris;
    MediaPlayer mp = MediaPlayer.create(getApplicationContext(), R.raw.ouch);
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        boris = (ImageButton) findViewById(R.id.ibBoris);

        boris.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                mp.start();
            }
        });
        }
} 
```

活动主.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageButton
        android:id="@+id/ibBoris"
        android:layout_width="250dp"
        android:layout_height="300dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:contentDescription="@string/boris"
        android:scaleType="fitXY"
        android:src="@drawable/badluckboris2" />

</RelativeLayout> 
```

和 AndroidManifest.xml：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.sydcul.badluckboris"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

编辑：LogCat：

```
10-31 17:15:05.670: E/AndroidRuntime(6500): FATAL EXCEPTION: main
10-31 17:15:05.670: E/AndroidRuntime(6500): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.sydcul.badluckboris/com.sydcul.badluckboris.MainActivity}: java.lang.NullPointerException
10-31 17:15:05.670: E/AndroidRuntime(6500):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1573)
10-31 17:15:05.670: E/AndroidRuntime(6500):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
10-31 17:15:05.670: E/AndroidRuntime(6500):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-31 17:15:05.670: E/AndroidRuntime(6500):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
10-31 17:15:05.670: E/AndroidRuntime(6500):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-31 17:15:05.670: E/AndroidRuntime(6500):     at android.os.Looper.loop(Looper.java:130)
10-31 17:15:05.670: E/AndroidRuntime(6500):     at android.app.ActivityThread.main(ActivityThread.java:3691)
10-31 17:15:05.670: E/AndroidRuntime(6500):     at java.lang.reflect.Method.invokeNative(Native Method)
10-31 17:15:05.670: E/AndroidRuntime(6500):     at java.lang.reflect.Method.invoke(Method.java:507)
10-31 17:15:05.670: E/AndroidRuntime(6500):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:912)
10-31 17:15:05.670: E/AndroidRuntime(6500):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:670)
10-31 17:15:05.670: E/AndroidRuntime(6500):     at dalvik.system.NativeStart.main(Native Method)
10-31 17:15:05.670: E/AndroidRuntime(6500): Caused by: java.lang.NullPointerException
10-31 17:15:05.670: E/AndroidRuntime(6500):     at android.content.ContextWrapper.getApplicationContext(ContextWrapper.java:100)
10-31 17:15:05.670: E/AndroidRuntime(6500):     at com.sydcul.badluckboris.MainActivity.<init>(MainActivity.java:12)
10-31 17:15:05.670: E/AndroidRuntime(6500):     at java.lang.Class.newInstanceImpl(Native Method)
10-31 17:15:05.670: E/AndroidRuntime(6500):     at java.lang.Class.newInstance(Class.java:1409)
10-31 17:15:05.670: E/AndroidRuntime(6500):     at android.app.Instrumentation.newActivity(Instrumentation.java:1024)
10-31 17:15:05.670: E/AndroidRuntime(6500):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1565)
10-31 17:15:05.670: E/AndroidRuntime(6500):     ... 11 more
10-31 17:15:05.680: E/(1749): Dumpstate > /data/log/dumpstate_app_error
10-31 17:15:05.680: W/ActivityManager(1749):   Force finishing activity com.sydcul.badluckboris/.MainActivity 
```

提前致谢。值得注意的是，我是 Android 的菜鸟。做了很多VB.NET。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:10:30.853

错误更容易。我所看到的纯粹猜测是您从未准备过 MediaPlayer，但我不确定。看到在 onCreate 之外设置的 MediaPlayer 也有点奇怪，可能当时上下文还没有完全有效，但我不知道这是否真的会导致问题。

# jquery - jquery用css加载默认div

> ID：13162111
> 
> 赞同：0
> 
> 时间：2012-10-31T16:04:22.293
> 
> 标签：jquery, asp.net

我有一个 DIV，它在单击按钮时加载其他 DIV，但要加载的默认 DIV 没有向它注册其 CSS。我的 CSS 很长而且没有。“ProfileSettingsContainer” DIV 中的元素数量取决于它。如何使用我的 CSS 默认加载此 DIV？谢谢。

```
 <script type="text/javascript">
            $(document).ready(function () {
                // Load default div into 'LeftPanelinfo' Div
                $("#leftpanelinfo").html($("#ProfileSettingsContainer").html());

                $(".settings").click(function () {
                    $("#leftpanelinfo").html($("." + $(this).attr('rel')).html());
                });

            });
        </script>

     <div id="ProfileSettingsContainer" style="padding: 15px; height:400px; width:400px;">
         <div style="clear:both">
                  <div style="float:left; width:40%">FirstName</div>
                  <div style="float:right; width:60%"><asp:TextBox ID="username" CssClass="FirstName" runat="server" /></div>
         </div>
         <div style="clear:both">
                  <div style="float:left; width:40%">Last Name</div>
                  <div style="float:right; width:60%"> <asp:TextBox ID="TextBox1" CssClass="LastName" runat="server" /></div>
         </div>
         <div style="clear:both">
                  <div style="float:left; width:40%">Birthdate</div>
                  <div style="float:right; width:60%">3</div>
         </div>
              <div style="clear:both">
                  <div style="float:left; width:40%">Location Zipcode</div>
                  <div style="float:right; width:60%">3</div>
         </div>
              <div style="clear:both">
                  <div style="float:left; width:40%">Biography</div>
                  <div style="float:right; width:60%">3</div>
         </div>
     </div>

CSS:

   #ProfileSettingsContainer:before
        {
            content: '';
            position: absolute;
            z-index: -1;
            border: 1px dashed #ccc;
            top: 5px;
            bottom: 5px;
            left: 5px;
            right: 5px;
            -moz-box-shadow: 0 0 0 1px #fff;
            -webkit-box-shadow: 0 0 0 1px #fff;
            box-shadow: 0 0 0 1px #fff;
        }

        h1
        {
            text-shadow: 0 1px 0 rgba(255, 255, 255, .7), 0px 2px 0 rgba(0, 0, 0, .5);
            text-transform: uppercase;
            text-align: center;
            color: #666;
            margin: 0 0 30px 0;
            letter-spacing: 4px;
            font: normal 26px/1 Verdana, Helvetica;
            position: relative;
        }

        fieldset
        {
            border: 0;
            padding: 0;
            margin: 0;
        }

        #ProfileSettingsContainer input
        {
            padding: 15px 15px 15px 30px;
            margin: 0 0 10px 0;
            width: 250px; /* 353 + 2 + 45 = 400 */
            height: 4px;
            border: 1px solid #ccc;
            -moz-border-radius: 5px;
            -webkit-border-radius: 5px;
            border-radius: 5px;
            -moz-box-shadow: 0 1px 1px #ccc inset, 0 1px 0 #fff;
            -webkit-box-shadow: 0 1px 1px #ccc inset, 0 1px 0 #fff;
            box-shadow: 0 1px 1px #ccc inset, 0 1px 0 #fff;
        }

        #ProfileSettingsContainer input:focus
        {
            background-color: #fff;
            border-color: #e8c291;
            outline: none;
            -moz-box-shadow: 0 0 0 1px #e8c291 inset;
            -webkit-box-shadow: 0 0 0 1px #e8c291 inset;
            box-shadow: 0 0 0 1px #e8c291 inset;
        }

        /*--------------------*/
        #actions
        {
            margin: 25px 0 0 0;
        }

        .submit
        {
            background-color: #ffb94b;
            background-image: -webkit-gradient(linear, left top, left bottom, from(#fddb6f), to(#ffb94b));
            background-image: -webkit-linear-gradient(top, #fddb6f, #ffb94b);
            background-image: -moz-linear-gradient(top, #fddb6f, #ffb94b);
            background-image: -ms-linear-gradient(top, #fddb6f, #ffb94b);
            background-image: -o-linear-gradient(top, #fddb6f, #ffb94b);
            background-image: linear-gradient(top, #fddb6f, #ffb94b);
            -moz-border-radius: 3px;
            -webkit-border-radius: 3px;
            border-radius: 3px;
            text-shadow: 0 1px 0 rgba(255,255,255,0.5);
            -moz-box-shadow: 0 0 1px rgba(0, 0, 0, 0.3), 0 1px 0 rgba(255, 255, 255, 0.3) inset;
            -webkit-box-shadow: 0 0 1px rgba(0, 0, 0, 0.3), 0 1px 0 rgba(255, 255, 255, 0.3) inset;
            box-shadow: 0 0 1px rgba(0, 0, 0, 0.3), 0 1px 0 rgba(255, 255, 255, 0.3) inset;
            border-width: 1px;
            border-style: solid;
            border-color: #d69e31 #e3a037 #d5982d #e3a037;
            float: left;
            height: 35px;
            padding: 0;
            width: 120px;
            cursor: pointer;
            font: bold 15px Arial, Helvetica;
            color: #8f5a0a;
        }

        .submit:hover, .submit:focus
        {
            background-color: #fddb6f;
            background-image: -webkit-gradient(linear, left top, left bottom, from(#ffb94b), to(#fddb6f));
            background-image: -webkit-linear-gradient(top, #ffb94b, #fddb6f);
            background-image: -moz-linear-gradient(top, #ffb94b, #fddb6f);
            background-image: -ms-linear-gradient(top, #ffb94b, #fddb6f);
            background-image: -o-linear-gradient(top, #ffb94b, #fddb6f);
            background-image: linear-gradient(top, #ffb94b, #fddb6f);
        }

        .submit:active
        {
            outline: none;
            -moz-box-shadow: 0 1px 4px rgba(0, 0, 0, 0.5) inset;
            -webkit-box-shadow: 0 1px 4px rgba(0, 0, 0, 0.5) inset;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.5) inset;
        }

        .submit::-moz-focus-inner
        {
            border: none;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:07:54.147

我相信这是因为 html() 加载您的 div 的内容 - 而不是 div 本身。

所以你可以做类似的事情

```
<div id="loadOuterDiv">
    <div id="ProfileSettingsContainer" style="...">
        ...
    </div>
</div> 
```

进而

```
$("#leftpanelinfo").html($("#loadOuterDiv").html()); 
```

或者，您可以改为将#ProfileSettingsContainer CSS 应用于#leftpanelinfo 并保持您的javascript 不变。

# c# - 如何使用 DialogBox 响应为 VS 2010 安装程序创建自定义操作

> ID：13162112
> 
> 赞同：0
> 
> 时间：2012-10-31T16:04:24.883
> 
> 标签：c#, visual-studio, registry, windows-installer, installation

我正在为需要用户在三个设置选项之间进行选择的应用程序创建设置程序。我想将用户输入的结果写入注册表，以便应用程序可以在运行时读取该值。从我目前所读的内容来看，我已经能够使用单选按钮创建自定义对话框，但我无法找到的是如何获取用户选择的结果，然后运行自定义操作，该操作将将结果写入注册表。我假设我可以编写一个小脚本或可执行文件，我可以通过将此脚本或 exe 添加到应用程序文件夹来从自定义操作启动它，但是如何获取选择要传递给此脚本或 exe 的值？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:17:23.613

也许这些链接会帮助你：

[RadioButtons用户界面对话框](http://msdn.microsoft.com/en-us/library/taa17f7s%28v=vs.80%29.aspx)
[如何：根据用户选择设置条件安装](http://msdn.microsoft.com/en-us/library/9x23561f%28v=vs.80%29.aspx)
[创建设置c#](https://stackoverflow.com/questions/9849214/creating-setup-c-sharp)

我的两分钱：我认为您可以考虑使用另一个套件来创建您的安装，例如[Installshield](http://www.installshield.com/)。**恕我直言**， VS 2010 安装程序不是一个好的安装程序。

# javascript - 将格式添加到本机日期解析器

> ID：13162113
> 
> 赞同：1
> 
> 时间：2012-10-31T16:04:32.250
> 
> 标签：javascript, datetime, prototype, prototypal-inheritance

我想知道是否有任何方法可以将格式添加（和映射）到 javascript 中的本机日期解析器（不使用库）。

类似于`defineParsers`Mootools 扩展 Date 对象附带的方法，如果您熟悉它，但没有 Mootools。

我能想到的最简单的解决方案是简单地将 Date 原型解析方法替换为包装原始日期并首先将输入日期重新排列为有效格式的方法，如下所示：

```
Date.prototype.parse = (function(oldVersion) {
    function extendedParse(dateString) {
        //change dateString to an acceptable format here
        oldVersion(dateString);
    }
    return extendedParse;
})(Date.prototype.parse); 
```

但是有没有更简单的方法？javascript 是否有任何可访问的数据结构来存储与日期格式及其适当映射有关的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:15:59.590

我认为你的方法可能是最好的。您本质上只是想向本机方法添加功能。虽然，这不会触及原型，因为 parse 方法是静态的。

这是一个快速示例：

```
(function() {

    ​var nativeParse = Date.parse;
    var parsers = [];

    ​Date.parse = function(datestring) {
        for (var i = 0; i<parsers.length; i++) {
            var parser = parsers[i];
            if (parser.re.test(datestring)) {
                datestring = parser.handler.call(this, datestring);
                break;
            }
        }
        return nativeParse.call(this, datestring);
    }

    Date.defineParser = function(pattern, handler) {
        parsers.push({re:pattern, handler:handler});
    }

}());

Date.defineParser(/\d*\+\d*\+\d*/, function(datestring) {
    return datestring.replace(/\+/g, "/");
});

console.log(Date.parse("10+31+2012")); 
```

这是在[jsfiddle](http://jsfiddle.net/ENVt7/)上。

# java - 带有 Java 注解的列表

> ID：13162118
> 
> 赞同：6
> 
> 时间：2012-10-31T16:04:45.810
> 
> 标签：java, annotations, bean-validation

我想用 Java Annotation 验证我的论点。我不知道如何使用为列表编写自己的注释。

这里有一个简单的例子：

```
class test{

    @myAnnotation
    List<myObject> myElements =new List<>(); // validated List
}

class myObject{

        String name;
 } 
```

我的注释界面：

```
 @Target({ElementType.TYPE,ElementType.METHOD,ElementType.FIELD}) 
  @Retention(RetentionPolicy.RUNTIME)
  @Constraint(validatedBy=myAnnotation_Validator.class)
  @Documented

public @interface myAnnotation {
          String message() default "List is not valid";
          Class <?>[] groups() default {};
          Class <?extends Payload>[] payload() default{};

          String[] namen();
    }

public class myAnnotation_Validator implements ConstraintValidator<myAnnotation, Collection> {

    @Override
    public void initialize(Kredite_List_Check a) {
        // What to do here???
    }

    @Override
    public boolean isValid(Collection t, ConstraintValidatorContext cvc) {
        // What to do here???
        // How could i get the names from my List "myElements" ?
        return false;
    }

} 
```

在此示例中，如果我的列表中的每个元素都有另一个名称，我的列表是有效的。我不知道如何在我的 Validator 类中获取 listobject 以及 myObject-elements 的名称。

更新：

我尝试用另一种方式描述我的问题：

如果我的列表（“myElements”）中类型为“myObject”的两个元素具有相同的名称，则我的列表无效！

我怎么能用注释来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:42:15.293

```
public class myAnnotation_Validator implements ConstraintValidator<myAnnotation, Collection> {
     private String[] names;

     @Override
     public void initialize(myAnnotation a) {
        //get values which are defined in the annotation
        names = myAnnotation.namen();
     } 

     @Override
     public boolean isValid(Collection objectToValidate, ConstraintValidatorContext cvc) {

        if(objectToValidate == null) return true; // use the @NotNull annotation for null checks 

        for(Object o : objectToValidate) {
           //check if value is valid
        }

        return false; 
    } 
} 
```

在初始化方法中，您可以获得注释中定义的值。isValid 方法用于验证对象（objectToValidate -> 您的列表对象）。

有关如何编写自定义验证器的更多信息，请参阅[http://docs.jboss.org/hibernate/validator/4.3/reference/en-US/html/validator-customconstraints.html#validator-customconstraints-validator](http://docs.jboss.org/hibernate/validator/4.3/reference/en-US/html/validator-customconstraints.html#validator-customconstraints-validator)

Hibernate-Validator 实现也是一个很好的参考。 [https://github.com/hibernate/hibernate-validator/tree/master/engine/src/main/java/org/hibernate/validator/internal/constraintvalidators](https://github.com/hibernate/hibernate-validator/tree/master/engine/src/main/java/org/hibernate/validator/internal/constraintvalidators)

我希望这个答案对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:12:29.043

我可以部分回答您的问题，您可以从集合中获取名称，该集合在您的`isValid`方法中作为参数发送。迭代您的集合（在您的情况下为列表）。

```
@Override
public boolean isValid(Collection t, ConstraintValidatorContext cvc) {
    // Iterate your Collection t to get the names.
    return false;
} 
```

# symfony - 在 Symfony2 项目中使用对象 Silex/Application

> ID：13162120
> 
> 赞同：0
> 
> 时间：2012-10-31T16:04:48.747
> 
> 标签：symfony, composer-php, silex

我需要在 Symfony2 应用程序中使用第三方 API，该应用程序使用 composer 来管理依赖项。这个 API 是使用 Silex 构建的，所以我需要使用 Silex/Application 对象。

我设法通过添加来获得硅橡胶

```
"silex/silex": "1.0.*" 
```

进入composer.json，但是当我指定

```
use Silex/Application 
```

在控制器和

```
 $app = new Silex\Application(); 
```

在我要管理第三方 API 的操作中，响应是：

> **致命错误：**在第 130 行的 path\to\my\controller\MyController.php 中找不到类 'MyApp\MyBundle\MyController\Silex\Application'

似乎 Silex 命名空间尚未加载。

关于如何将 Silex 用于 Symfony2 的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:49:31.397

如果您将其导出为`use Silex\Application;`then`$app = new Application();` 或`use Silex\Application as SilexApp`then`$app = new SilexApp();`

# ajax - Jquery POST 500 Internal Error ]尝试提交 Wufoo 表单时

> ID：13162128
> 
> 赞同：2
> 
> 时间：2012-10-31T16:05:09.203
> 
> 标签：ajax, post, wufoo

我正在尝试通过 AJAX 提交 wufoo 表单。我正在使用 jQuery $.post 来实现这一点，并从 php 脚本返回 500（内部服务器错误）。javascript代码是：

```
$('form#form20').submit(function(event){
    event.preventDefault();
    $.post('form_handler.php', $('form#form20').serialize(), function(response) {
        console.log(response);
    });
}); 
```

form_handler.php 文件中的 php 代码是：

```
<?php  
    if (count($_POST) > 0) {
        $fieldErrors = initAPI($root);
    }
    $wufoo_query_vals = array(
        'w_api_key' => 'xxxx-xxxx-xxxx-xxxx',
        'w_form' => 'connect-with-us',
        '1' => $_POST['Field1'],
        '2' => $_POST['Field2'],
        '3' => $_POST['Field3'],
        '4' => $_POST['Field4'],
        '5' => $_POST['Field5'],
        '11' => $_POST['Field11'],
        '14' => $_POST['Field14'],
        '13' => $_POST['Field13'],
        '8' => $_POST['Field8'],
        '9' => $_POST['Field9']
    );

    foreach($wufoo_query_vals as $key => $value) {
        $request .= $key.'='.urlencode($value).'&';
    }
    $request = substr($request, 0, -1);
    $ch = curl_init("http://defineyouredge.wufoo.com/api/insert/"); 
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $request);
    $response = curl_exec($ch);
    curl_close ($ch);

    echo $response;  
?> 
```

出于显而易见的原因，我删除了 API 密钥，但我确实在实际代码中正确输入了它。另外，我还没有完成处理响应的功能。目前，只需将响应记录到控制台进行测试。

非常感谢您的支持！

# javascript - 如何“共享”需要在不同 JavaScript 文件中调用函数的日期选择器？

> ID：13162133
> 
> 赞同：0
> 
> 时间：2012-10-31T16:05:20.017
> 
> 标签：javascript, jquery, datepicker, jquery-ui-datepicker, onselect

我不确定如何质疑这一点，因为它涉及不同的方面。

我有一个名为`timesheet.js`.

`timesheet.timesheet.js`还有两个名为和的JavaScript 文件`timesheet.expenses.js`。

在我的`timesheet.js`我有一个我想使用的日期选择器。However, when a date is selected, it needs to call a different function depending on which other JavaScript file I've loaded.

我尝试将`(#date-picker).datepicker`调用放在`timesheet.js`文件和较低级别的文件中（以便我可以`onSelect`根据需要使用），但它似乎覆盖了它。

我认为最好的方法是不让 master`timesheet.js`调用两个单独的函数，具体取决于调用哪个函数（关注点分离），而是让两个单独的函数知道何时选择了日期。如何在不覆盖我在主 JavaScript 文件中添加的功能方面的情况下实现这一点？

# node.js - node.js：child_process.exec()的回调函数有没有办法返回进程PID

> ID：13162136
> 
> 赞同：3
> 
> 时间：2012-10-31T16:05:28.910
> 
> 标签：node.js, exec

# Node.JS 执行问题：

我有一个生成多个进程的程序，我想通过在进程完成时捕获 PID 来记录进程的完成顺序。据我所知，标准回调不包括 PID（stdout、stderr 和错误）。

我想避免使用 spawn，但看起来我必须这样做，除非任何善良的灵魂有一些想法。

提前致谢。

编辑：

澄清：

```
var child = child_process.exec(..., function() {
    console.log( child.pid );
}); 
```

不适用于多个进程。这将返回最后一个进程，而不是触发回调的进程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T16:13:43.370

```
var child = child_process.exec(..., function() {
    console.log( child.pid );
}); 
```

我强烈建议您阅读[文档](http://nodejs.org/api/child_process.html)——您可能会在那里找到所有问题的答案。:)

**// 编辑**如果你使用循环来创建进程，那么使用它：

```
var create_child = function( i ) {
    // creates a seperate scope for child variable
    var child = child_process.exec(..., function() {
        console.log( child.pid );
    });
};

for (var i = 0; i < 100; i++) {
    // does not create a seperate scope
    create_child( i );
} 
```

以避免范围界定问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T19:51:08.350

经过一番搜索和短暂的咖啡休息后，我确信 child_process.spawn 是要走的路。制作一个对象数组来处理进程，并在退出时删除这些进程对象似乎效果很好。

见：[https ://gist.github.com/3990987](https://gist.github.com/3990987)

# c++ - 在偏函数特化中忽略了值类型的顶级 const 限定符

> ID：13162137
> 
> 赞同：1
> 
> 时间：2012-10-31T16:05:34.403
> 
> 标签：c++, c++11

由于`const int`专业化导致的以下错误：

```
#include <iostream>
using std::cout;
using std::endl;

template <typename T> void g(T val)
{
    cout << "unknown" << endl;
}

template <> void g(int && val)
{
    cout << "int &&" << endl;
}

template <> void g(const int && val)
{
    cout << "const int &&" << endl;
}

template <> void g(int & val)
{
    cout << "int &" << endl;
}

template <> void g(const int & val)
{
    cout << "const int &" << endl;
}

template <> void g(int val)
{
    cout << "int" << endl;
}

template <> void g(const int val)  //redefinition here
{
    cout << "const int" << endl;
}

int main() {}

error: redefinition of 'g'
template <> void g(const int val)
                 ^ 
```

为什么是`T&`and`T&&`不同于`const T&`和`const T&&`但`T`不不同于`const T`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T16:07:25.860

因为函数参数的顶级常量是函数的实现细节。例如，以下是有效的：

```
// Prototype
void foo(int c);

// Implementation
void foo(int const c) { ... } 
```

由于参数是按值传递的，调用者并不真正关心函数是否要修改自己的私有副本。因此，顶级 const-ness 不是函数签名的一部分。

请注意，这只适用于顶级常量！ `int`和`int const`在函数原型中是等价的，就像`int *`和一样`int * const`。但是`int *`并`int const *`没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T20:01:38.817

使用参数时，需要考虑一些事项，A：不通过引用传递参数是创建自己的新变量，B：通过引用传递是使用与参数相同的变量，但名称不同

这很重要，因为：

```
void doStuff (const int x)
{
    //x is its own constant variable
} 
```

然而

```
void doStuff (const int& x)
{
    //because x is the same variable that was used when calling this function
    //x can be modified outside of this function, but not inside the function
    //due to the const modifier
} 
```

第二个函数上的 const 修饰符允许您执行以下操作：

```
int main ()
{
    const int x = 10;
    doStuff(x)
} 
```

引用用于修改另一个函数中的变量并节省堆栈上的内存，这可以节省内存，因为它使用指针而不是新创建的变量，因此任何大于 int 的东西都会通过使用引用来节省内存，即使你没有在函数中修改它

现在，如果我是正确的，则不应在参数中使用 && 运算符，因为这是一个布尔运算符并且不会修改参数类型。它只能在条件下使用，但在编译时不会产生语法错误（编译器认为它是类型 [type] & 的引用），但这对变量的使用方式没有任何影响，除了计算机处理时间稍长

# android - 如何将 .doc 解析为 Android 的 .html

> ID：13162140
> 
> 赞同：2
> 
> 时间：2012-10-31T16:05:46.477
> 
> 标签：android, html-parsing, apache-poi, doc

我使用了 apache poi lib，但它用样式类名解析。我需要没有类的android。这是我的代码：

```
 HWPFDocumentCore wordDocument = WordToHtmlUtils.loadDoc(input);

    WordToHtmlConverter wordToHtmlConverter = null;
    try {
        wordToHtmlConverter = new WordToHtmlConverter(DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument());
        wordToHtmlConverter.processDocument(wordDocument);

        org.w3c.dom.Document htmlDocument = wordToHtmlConverter.getDocument();
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        DOMSource domSource = new DOMSource(htmlDocument);
        StreamResult streamResult = new StreamResult(out);

        TransformerFactory tf = TransformerFactory.newInstance();
        Transformer serializer = tf.newTransformer();
        serializer.setOutputProperty(OutputKeys.ENCODING, "UTF-8");
        serializer.setOutputProperty(OutputKeys.INDENT, "yes");
        serializer.setOutputProperty(OutputKeys.METHOD, "html");
        serializer.transform(domSource, streamResult);
        out.close();

        String result = new String(out.toByteArray());
        System.err.println(result);
    } catch (ParserConfigurationException e) {
        e.printStackTrace();
    } catch (TransformerConfigurationException e) {
        e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
    } catch (TransformerException e) {
        e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
    }` 
```

结果：

```
<html><head>
        <style type="text/css">.b1{white-space-collapsing:preserve;}
    .b2{margin: 0.90555555in 0.66944444in 0.66944444in 0.66944444in;}
    .s1{text-transform:uppercase;color:black;}
    .s2{font-weight:bold;text-transform:uppercase;color:black;}
    .s3{color:black;}
    .s4{font-style:italic;color:black;}
    .s5{font-weight:bold;color:black;}
    .s6{font-weight:bold;font-style:italic;text-transform:uppercase;color:black;}
    .s7{font-weight:bold;color:maroon;}....</style>
</head>
<body>
<p class="p2"></p>
<p class="p2">
<span class="s2">...</span>
</p>
<p class="p2">
<br>
...</body>
</html> 
```

建议在没有类名的情况下进行解析。我需要机器人的标准标签而不是类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:54:36.993

解析生成的 HTML 并对其进行修改以适合。

# credit-card - 直接信用卡/借记卡付款处理

> ID：13162141
> 
> 赞同：-1
> 
> 时间：2012-10-31T16:05:51.390
> 
> 标签：credit-card, payment-processing

嗨，我只是想知道是否有任何服务/api 允许我处理信用卡/借记卡交易？我试图通过向用户询问必要的信息而不要求他们登录像贝宝或亚马逊这样的网站来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:08:11.153

看看我个人最喜欢的[布伦特里](https://www.braintreepayments.com/)。有点贵，但比亚马逊和许多其他可用系统便宜得多。还配备了功能齐全的 API，因此您可以在页面付款！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:15:41.490

Stripe 也因此获得了相当不错的声誉。[https://stripe.com/](https://stripe.com/)

价格具有竞争力，但请注意 - 它适用于开发人员，而不仅仅是作为拖放贝宝按钮。不过，有很多有用的代码可以让事情变得简单。好消息是您不必担心在服务器上处理信用卡信息，您只需使用 Stripe API 生成的令牌即可。

我看到的另一个是 Braintree——它们已经存在了更长的时间，但我发现它的使用并不那么简单。

# java - 使用 html 特殊字符进行 Java SAX Xml 解析器解析 [致命错误]

> ID：13162155
> 
> 赞同：1
> 
> 时间：2012-10-31T16:06:49.760
> 
> 标签：java, xml-parsing, sax

如果该页面包含 ®(®) 或   等特殊字符，我无法将 html 页面解析为 xml。每当 html 文件包含以下任一特殊字符时，它都会提示这是一个错误，如下所示“[致命错误] 279:15 实体“reg”被引用，但未声明”。任何解决方案（不编辑html文件）忽略这些特殊字符？

# vba - vba 检查负值

> ID：13162156
> 
> 赞同：0
> 
> 时间：2012-10-31T16:06:57.780
> 
> 标签：vba, excel, negative-number

我编写了一个简单的 VBA 代码来检查单元格的值是否为负数，如果为负数，则将其突出显示为红色。出于某种原因，我不断收到“运行时不匹配”。我的代码是

```
For x = 2 To 100

Set val3 = Worksheets("Summary").Cells(x, 9)
If val3.Value < 0 Then
Worksheets("Summary").Cells(x, 9).FontColorIndex = 3

End If
Next x 
```

第 9 列（我正在检查的列）填充了美元值。预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T16:27:38.617

在您的代码中，您只是缺少一个点。

> 字体颜色索引 = 3

应该：

> 字体颜色索引 = 3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:16:23.937

```
Public Sub test()
   For x = 2 To 100
      Set val3 = Worksheets("Sheet1").Cells(x, 9)
      If val3.Value < 0 Then
         Worksheets("Sheet1").Cells(x, 9).Font.Color = RGB(99, 179, 73)
      End If
   Next x
End Sub 
```

上面的代码适用于 excel 2007

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-13T02:28:34.553

感谢您的帖子，我需要在某个过程之后将负数更改为零 - 但我想在使用它们之前检查它们，因此更改字体颜色很有用，因此此代码适用于整个工作表范围，直到 (245 ,50)

```
Sub negnumbers()
    For x = 1 To 245
        For y = 1 To 50
        Set val3 = Worksheets("target sheet").Cells(x, y)
        If val3.Value < 0 Then
        Worksheets("target sheet").Cells(x, y).Font.ColorIndex = 3
        Worksheets("target sheet").Cells(x, y) = 0
        End If
        Next y
    Next x
End Sub 
```

# xcode - 在 .pch 中导入文件会给出“类的接收者是前向声明”

> ID：13162157
> 
> 赞同：1
> 
> 时间：2012-10-31T16:07:00.750
> 
> 标签：xcode, automatic-ref-counting

我创建了一个我希望随处可用的自定义类，所以我将它导入到我的 app-Prefix.pch 文件中`#ifdef __OBJC__`

但是，每当我打开任何课程时，都会出现错误`receiver for class is a forward declaration`，但该项目仍然可以正常构建。构建后错误消失了，但是一旦我再次开始编辑代码，所有错误都会回来。

这些错误从未真正阻止我的程序构建，也不会导致任何实际错误，它们只是非常烦人和不舒服。Xcode 非常清楚这些文件是可用的，它只是想惹我生气。

我正在使用 Xcode 4.5.1 和 ARC。

# iphone - 如何将数组分配给结构成员数组？

> ID：13162159
> 
> 赞同：2
> 
> 时间：2012-10-31T16:07:01.483
> 
> 标签：iphone, objective-c, ios, c

如何将 c 类型数组分配给同样是同一类型数组的结构成员？这是我的结构：

```
typedef struct {

  uint8_t type;
  uint8_t data[10];

} MyStruct; 
```

这是结构的创建：

```
MyStruct myStruct; 
```

这是一些数组的生成：

```
uint8_t generatedArray[10] = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10}; 
```

这是我的任务：

```
myStruct.data = generatedArray; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:33:40.743

正如其他答案所述，数组不可*直接*分配，您必须使用以下函数`memcpy`：

```
memcpy(myStruct.data, generatedArray, sizeof(myStruct.data)); 
```

然而...

C是一门历史悠久的语言。早期语言大致有“小”和“大”类型的概念，前者可以直接赋值，而后者不能。后来的一些语言使一切都可以分配（或对于函数式语言，值）。

原始 C 有原始类型；整数、浮点数等；和这些类型的数组。前者是“小”，是可分配的，后者是“大”，不是。随后C获得了结构，并认为这些是“小”的......

所以，有点奇怪，虽然您不能直接将一个数组分配给另一个数组，但您可以将结构分配给另一个数组，特别是您可以分配一个只有一个字段的结构，它是一个数组......您还可以编写文字结构值，包括那些具有数组值字段的人；并且作为具有“类型是注释”方法的C，您可以将指向数组的指针转换为指向结构的指针......

以上意味着您可以编写“有趣”的代码，例如：

```
typedef struct
{
    uint8_t type;
    uint8_t data[10];
} MyStruct;

typedef struct
{
    uint8_t data[10];
} MyArray;

typedef struct
{
    uint8_t type;
    MyArray array;
} MyStruct2;

void arrayAssignment(int x)
{
    MyStruct myStruct;
    MyArray generatedArray = {{1, 2, 3, 4, 5, 6, 7, 8, 9, 10}}; // structure literal

    *(MyArray *)&myStruct.data = generatedArray;

    uint8_t generatedArray2[] = {11, 12, 13, 14, 15, 16, 17, 18, 19, 20}; // array literal
    *(MyArray *)&myStruct.data = *(MyArray *)generatedArray2;

    MyStruct2 myStruct2;
    myStruct2.array = generatedArray; // no casts at all, but element access is myStruct2.array.data[index]
} 
```

请注意，没有任何强制转换、间接寻址等，或者在最后一个示例`array.`中，索引中的额外成本在编译代码中没有任何成本——它们都是说服编译器使用其内置数组分配的简单方法。

许多人当然会反对经常使用这些技术！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T16:09:54.600

数组之间不能相互赋值，即数组标识符不允许出现在赋值的左侧。在右侧时，据说数组*衰减*为指向其第一个元素的指针，因此它并不真正代表整个块。

您应该`memcpy`改用，并传递可以通过`sizeof`运算符获得的数组的大小。对于短数组，优化编译器可能能够`memcpy`用更有效的指令代替调用，以更好地利用目标架构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T16:11:12.693

您正在尝试分配给数组，但无法分配给数组。 然而，[数组是一个](http://c-faq.com/aryptr/arraylval.html)[左值](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8a.doc%2Flanguage%2Fref%2Flvalue.htm)：

> 以下对象类型是左值，但不是可修改的左值：
> 
> *   **数组类型**
> *   不完整的类型
> *   一个 const 限定的类型
> *   对象是结构或联合类型，其成员之一具有 const 限定类型

您需要改用[memcpy](http://pubs.opengroup.org/onlinepubs/009695399/functions/memcpy.html)。您应该将`sizeof(myStruct.data)`第三个参数作为第三个参数传递给 memcpy：

```
memcpy(myStruct.data, generatedArray, sizeof(myStruct.data)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T16:10:20.500

您不能直接分配这样的数组。你必须把它复制过来。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T16:12:17.127

我想知道您的编译器如何让您完成该任务。您不能将数组用作`modifiable lvalue`. 此外，当用作`rvalue`数组时，表示指向数组中第一个元素的指针。实现这一点的其他方法是使用指针或使用[memcopy()](http://linux.die.net/man/3/memcpy)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T17:01:38.807

使用 C99，您可以使用复合文字和字符串文字作为初始值设定项（如果 uint8_t 具有与 char 相同的位表示）

```
MyStruct myStruct={.data="\1\2\3\4\5\6\7\x8\x9\xa"};
...
MyStruct myStruct;
myStruct = (MyStruct){.data="\1\2\3\4\5\6\7\x8\x9\xa"}; 
```

# android - 两台 Android 设备之间的 SSL 连接

> ID：13162162
> 
> 赞同：3
> 
> 时间：2012-10-31T16:07:16.723
> 
> 标签：android, sockets, ssl, tcp

我是 SSL 新手。我需要通过 TCP 在两个 Android 设备之间实现 SSL 连接。有什么例子吗？如何创建 SSLServerSocket？

我尝试为默认密钥库设置属性，以使用 SSLServerSocket

```
System.setProperty("javax.net.ssl.keyStore", "my_keystore");
System.setProperty("javax.net.ssl.keyStorePassword", "password"); 
```

这没有帮助。

我能够创建 SSLServerSocket，但在 accept() 上它失败并出现以下异常：“ **SSLException：找不到任何密钥存储条目来支持启用的密码套件**”另外我在 Android 上使用了正确类型的证书：BKS

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T03:28:27.447

这与在任何平台上使用 SSL 套接字没有什么不同，请参阅 JSSE 参考。唯一需要注意的是，您需要将手机放在同一网络上（如果是本地网络），如果使用 3G 等，您的运营商可能会过滤/阻止入站连接。另外请记住，移动设备可以更改其 IP重新连接等时，固定IP可能无法正常工作。

# java - 重构文本文件解析批量完成

> ID：13162163
> 
> 赞同：0
> 
> 时间：2012-10-31T16:07:21.560
> 
> 标签：java, refactoring

我有三个单独的文件解析函数，它们将文本文件转换为对象，然后将这些值插入到 sqlite 数据库中。除了对象类之外，它们基本上都是相同的。

过程如下：

1.  使用 http 下载文件
2.  计算文件中的行数以进行进度计算
3.  删除目标表中所有以前的记录
4.  使用 BufferedReader 打开文件
5.  一次读取 2000 行并将其转换为对象
6.  在事务中将 2000 条记录插入到 sqlite
7.  循环直到完成

我无法弄清楚如何使这段代码通用以允许任何类用于创建对象，然后决定使用哪个 DAL 函数来持久化数据。Java 不是我的第一语言，所以任何指导都会很棒。

这是我正在使用的代码：

```
public void downloadPendingPoleInspections() {

    int count;
    String filePath;
    Inspections inspections = Inspections.getInstance();

    filePath = Environment.getExternalStorageDirectory() + File.separator + "inspections.txt";

    try {

        downloadFile("http://localhost/api/inspectionservices.aspx?o=retrieve", "pendinginspections.txt", POST_PENDING_INSPECTIONS_PROGRESS_UPDATE);

        int totalInspections = getLineCount(filePath);

        inspections.deleteAllPendingInspections();          

        File file = new File(filePath);
        BufferedReader br = new BufferedReader(new FileReader(file));
        String line;

        int i = 0;
        int j = 0;

        List<PendingInspection> batch = new ArrayList<PendingInspection>();

        while ((line = br.readLine()) != null) {
            String[] values = line.split(" ");

            PendingInspection pending = new PendingInspection(
                    Integer.parseInt(values[0]), values[1],
                    Double.parseDouble(values[2]),
                    Double.parseDouble(values[3]));

            batch.add(pending);
            i++;
            j++;

            if (i >= 2000) {

                inspections.pendingInspectionsBatchInsert(batch);                   
                batch.clear();
                i = 0;                  
            }
        }

        if (i > 0) {
            inspections.pendingInspectionsBatchInsert(batch);
            batch.clear();
        }

        br.close();
        file.delete();

    } catch (Exception e) {
        Log.e("SyncActivity", e.toString());            
    }       
} 
```

编辑：这是接口和类声明

```
public interface Inspectable {
    public int getId();
    public void setId(int id);

    public String getLabel();
    public void setLabel(String label);

    public double getX();
    public void setX(double x);

    public double getY();
    public void setY(double y);
}

public class RWInspection {
private String id;
private double x;
private double y;
private String inspector;
private String comments;
private String timestamp;

public RWInspection(String id, double x, double y, String inspector, String comments, String timestamp) {
        this.id = id;       
        this.x = x;
        this.y = y;
        this.inspector = inspector;
        this.comments = comments;
        this.timestamp = timestamp;
} 
```

snip.... getter 和 setter 实现

```
public class PInspection implements Inspectable{
    private int id;
    private String number;
    private double x;
    private double y;

public PInspection(int id, String poleNumber, double x, double y) {
    this.id = id;
    this.number = number ;
    this.x = x;
    this.y = y;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:12:17.080

> 除了对象类之外，它们基本上都是相同的。

听起来您希望为作为批处理过程的一部分创建的所有这些对象提供一个通用接口。我建议如下：

```
public interface Batchable  {  void doBatch();  } 
```

然后执行以下操作：

```
public class Foo implements Batchable  {}  
public class Bar implements Batchable {} 
```

您现在可以让每个类实现自己的函数体，`doBatch`并且您至少部分地抽象出了了解该类的需要。现在就一次持久化 2000 条记录而言，为什么不在大型事务中一次全部推送它们呢？如果不这样做，您将面临数据完整性损失的风险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:02:40.983

我将其拆分为一个抽象基类和一些实现。基类可能如下所示：

```
public abstract class Downloader {
    protected abstract void processLine(String[] line);
    protected abstract void save();
    protected abstract String file();
public void downloadPendingPoleInspections() {

    int count;
    String filePath;

    filePath = Environment.getExternalStorageDirectory() + File.separator + file();

    try {

        downloadFile("http://localhost/api/inspectionservices.aspx?o=retrieve", "pending" + file(), POST_PENDING_INSPECTIONS_PROGRESS_UPDATE);

        int totalInspections = getLineCount(filePath);

        File file = new File(filePath);
        BufferedReader br = new BufferedReader(new FileReader(file));
        String line;

        int i = 0;
        int j = 0;

        while ((line = br.readLine()) != null) {
            processLine(line.split(" "));
            i++;
            j++;

            if (i >= 2000) {
                save()
                i = 0;                  
            }
        }

        if (i > 0) {
            save()
        }

        br.close();
        file.delete();

    } catch (Exception e) {
        Log.e("SyncActivity", e.toString());            
    }       
} 
```

对于您要处理的每种类型，您都可以创建一个像这样的小实现：

```
public class InspectionDownloader extends DownLoader {
    Inspections inspections = Inspections.getInstance();
    List<PendingInspection> batch = new ArrayList<PendingInspection>();

    public InspectionDownloader() {
        inspections.deleteAllPendingInspections();
    }

    protected void processLine(String[] values) {
        PendingInspection pending = new PendingInspection(
            Integer.parseInt(values[0]), values[1],
            Double.parseDouble(values[2]),
            Double.parseDouble(values[3]));
        batch.add(pending);
    }

    protected void save() {
        inspections.pendingInspectionsBatchInsert(batch);
        batch.clear();
    }
    protected String file() { 
        return "inspections.txt";
    }
} 
```

通过这种方式，可以将可重用逻辑集中在基类中，并将特殊逻辑转移到小型且集中的专用类中。这种模式称为模板化方法。您可以看到派生类非常专注于它所负责的类型的特殊操作。

# macos - 为 Mac OS X 安装守护程序

> ID：13162168
> 
> 赞同：2
> 
> 时间：2012-10-31T16:07:30.827
> 
> 标签：macos, cocoa, daemon, packagemaker

我创建了一个运行在 Mac OS X 平台上的守护进程。我使用 PackageMaker 制作了安装程序，并且安装了守护程序没有问题。似乎安装完成后，我需要重新启动系统才能运行守护程序。我想知道是否可以在不强制重启的情况下加载和启动守护进程？...我对此有一些想法，但不确定是否是正确的方法，例如：

1.  使用调用命令的 shell 脚本：$sudo launchctl load /Library/LaunchDaemons/myService.plist

2.  使用 ServiceManagement.framework 管理将在运行时使用守护程序的应用程序的权限升级，以便应用程序可以在必要时安装和加载服务。我不得不说，只有在 Cocoa App 处于活动状态时才需要服务的工作。

如果有更好的想法，请让我知道人们。:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:43:06.490

`Your Option 1`您应该在包 ( )的安装后脚本中添加 daemon load 命令。无论如何，守护程序确实有`launch-on-demand`选项，因此只有在您的应用程序请求加载它时才会加载您的守护程序。

# php - PHP Elseif 三元运算符

> ID：13162172
> 
> 赞同：23
> 
> 时间：2012-10-31T16:07:49.700
> 
> 标签：php

我正在尝试将以下代码转换为三元运算符，但它不起作用，我不确定为什么。我认为我的问题是我不知道如何以`elseif`三进制格式表达操作。根据我的理解，`elseif`它的执行方式与`if`使用 format 的操作相同`: (condition) ? 'result'`。

```
if ($i == 0) {
    $top = '<div class="active item">';
} elseif ($i % 5 == 0) {
    $top = '<div class="item">';
} else {
    $top = '';
}

$top = ($i == 0) ? '<div class="active item">' : ($i % 5 == 0) ? '<div class="item">' : ''; 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-10-31T16:11:01.433

```
$top = ($i == 0) ? '<div class="active item">' : (($i % 5 == 0) ? '<div class="item">' : ''); 
```

您需要在整个 else 块周围添加括号

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-31T16:21:29.523

三元运算符不支持真正的`if... else if... else...`运算；但是，您可以使用以下技术模拟行为

```
var name = (variable === 1) ? 'foo' : ((variable === 2) ? 'bar' : 'baz'); 
```

* * *

我个人并不关心这一点，因为我觉得它没有更具可读性或优雅性。我通常更喜欢这种`switch`说法。

```
switch (variable) {
    case 1 : name = 'foo'; break;
    case 2 : name = 'bar'; break;
    default : name = 'bas'; break;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-12-25T07:29:49.033

分享一些观点可能为时已晚，但尽管如此:)

1.  使用 if - else if - else 进行有限数量的评估。我个人更喜欢在比较次数小于 5 时使用 if - else if - else。
2.  在评估次数更多的情况下使用 switch-case。就我个人而言，我更喜欢案例超过 5 个的 switch-case。
3.  在考虑单个比较（或循环时进行单个比较）或在 switch 结构的“case”子句中需要 if-else 比较时使用三元。
4.  在对非常大的数据集进行循环时进行比较时，使用三进制会更快。

恕我直言，最终由开发人员决定代码可读性和性能之间的权衡等式，进而决定三元与 if else-if else 与 switch-case 中的哪些内容可以在任何特定情况下使用。

# android - 禁用后如何启用用户可缩放（视口属性）？

> ID：13162174
> 
> 赞同：3
> 
> 时间：2012-10-31T16:07:56.547
> 
> 标签：android, cordova, viewport, css-position

我用 Phonegap 创建了一个 Android 应用程序。我希望能够在一个页面中有一个固定的 div 并在另一个页面中放大。

我使用 jquery mobile 1.2.0、Jquery 1.8.2、Phonegap 2.0.0 和 Android 2.2。

我的代码是：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">

<title>My Phonegap Application</title>

<link rel="stylesheet" href="./lib/jquery.mobile-1.2.0.css" />
<script src="./lib/jquery-1.8.2.js"></script>
<script src="./lib/jquery.mobile-1.2.0.js"></script>

<script src="./lib/cordova-2.0.0.js" type="text/javascript"></script>

<meta id="viewport" name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width, height=device-height, user-scalable=no, target-densitydpi=device-dpi" />

<script>
    function change_page(){
        $("#viewport").attr("content", "initial-scale=1, maximum-scale=2, minimum-scale=0.5, width=device-width, height=device-height, user-scalable=yes, target-densitydpi=device-dpi");
        $.mobile.changePage( "#pageImage", { transition: "slideup"} );
    }
</script>

<style>
    .fixe {
        position: fixed;
        bottom: 0;
        z-index: 5000;
        margin: 0;
        padding: 0;
        height: 50px;
        width: 100%;
    }

    img {
        height: 100%;
        width: 100%;
    }
</style>

</head>

<body>

<div data-role="page" id="pageHome">
    <div data-role="content" data-theme="c">
        <button id="switchPage" onClick='change_page();'>switchpage</button>

    <p>
        Et quia Mesopotamiae tractus omnes crebro inquietari sueti praetenturis et stationibus servabantur agrariis, laevorsum flexo itinere Osdroenae subsederat extimas partes, novum parumque aliquando temptatum commentum adgressus. quod si impetrasset, fulminis modo cuncta vastarat. erat autem quod cogitabat huius modi.

        Quanta autem vis amicitiae sit, ex hoc intellegi maxime potest, quod ex infinita societate generis humani, quam conciliavit ipsa natura, ita contracta res est et adducta in angustum ut omnis caritas aut inter duos aut inter paucos iungeretur.

        Horum adventum praedocti speculationibus fidis rectores militum tessera data sollemni armatos omnes celeri eduxere procursu et agiliter praeterito Calycadni fluminis ponte, cuius undarum magnitudo murorum adluit turres, in speciem locavere pugnandi. neque tamen exiluit quisquam nec permissus est congredi. formidabatur enim flagrans vesania manus et superior numero et ruitura sine respectu salutis in ferrum.

        Ergo ego senator inimicus, si ita vultis, homini, amicus esse, sicut semper fui, rei publicae debeo. Quid? si ipsas inimicitias, depono rei publicae causa, quis me tandem iure reprehendet, praesertim cum ego omnium meorum consiliorum atque factorum exempla semper ex summorum hominum consiliis atque factis mihi censuerim petenda.

        Dum haec in oriente aguntur, Arelate hiemem agens Constantius post theatralis ludos atque circenses ambitioso editos apparatu diem sextum idus Octobres, qui imperii eius annum tricensimum terminabat, insolentiae pondera gravius librans, siquid dubium deferebatur aut falsum, pro liquido accipiens et conperto, inter alia excarnificatum Gerontium Magnentianae comitem partis exulari maerore multavit.
    </p>    

        <div class="fixe">
            <img id="fixedImage" src="./res/myfixedimg.png">
        </div>
    </div>
</div>

<div data-role="page" id="pageImage">
    <div data-role="content" data-theme="a">
        <img id="my_img" src="./res/myimg.png" width="671" height="811">
    </div>
</div>

</body>
</html> 
```

使用此代码，固定 div 可以正常工作，但无法放大第二页。如您所见，我在Javascript代码中更改了viewport的user-scalable属性，但似乎没有生效。

如果您在视口元标记中删除“user-scalable=no”，您可以放大第二页，但 div 不固定。

# 另一个测试

我还试图摆脱元标记中的用户可缩放。在第一页中，我添加了：

```
$("#viewport").attr("content", "user-scalable=no, initial-scale=1, maximum-scale=2, minimum-scale=0.5, width=device-width, height=device-height, target-densitydpi=device-dpi");
console.log($("#viewport").attr('content')); 
```

在 change_page 函数中：

```
$("#viewport").attr("content", "user-scalable=yes, initial-scale=1, maximum-scale=2, minimum-scale=0.5, width=device-width, height=device-height, target-densitydpi=device-dpi");
console.log($("#viewport").attr('content')); 
```

控制台中视口的参数是可以的，但是即使 user-scalable=yes，它的行为就好像 user-scalable=no。

# 结论

我希望能够放大第二页并在第一页中有一个固定的 div。有人知道该怎么做吗？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-05T07:09:47.443

**快速回答**

不要禁用`user-scalable`而是修改`maximum-scale`

**长答案**

我知道这是不久前的事了，但是如果其他人偶然发现了这个问题，这就是解决方案。OP 我希望你能看到这个。

如果您最初设置`user-scalable=no`，那么无论您是否将属性更改回`user-scalable=yes`通过 javascript，Android 浏览器都会忽略它（不确定 Firefox 等）

相反，您应该将初始、最小和最大比例设置为 1.0，用户可缩放为 1，然后当您修改元标记时，您只需将最大比例更改为 2.0。请参阅下面的说明。

**初始状态**

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=1"> 
```

**初始状态**

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=2.0, maximum-scale=1.0, user-scalable=1"> 
```

**结论**

现在，您可以通过使用最大比例来更改缩放功能，同时始终保持用户可缩放的真实性。请注意，出于某种原因，Firefox 会忽略此*解决方法*，并且无论如何都允许用户进行缩放。考虑到 Android 上的 Firefox 有超过 1000 万的下载量，这很糟糕。

# powershell - Copy-Item 与 XCopy

> ID：13162175
> 
> 赞同：1
> 
> 时间：2012-10-31T16:08:01.873
> 
> 标签：powershell

我被要求使用 powershell 脚本进行基准测试，以进行一些基本的文件复制，而不是在批处理文件中使用 XCopy。它似乎在大致相同的时间内运行，但使用 Powershell 时树结构的父文件夹不会在目标中创建，而使用 XCopy 时会创建父文件夹。例如，与

```
xcopy D:\Webs\First\*.* D:\Test\Sandbox\ /E 
```

“第一个”文件夹确实创建了它的所有内容。而随着

```
$SourceFolder = "D:\\Webs\\First\\"
$TargetFolder = "D:\\Test\\Sandbox\\"

Copy-Item $SourceFolder $TargetFolder -recurse 
```

不会创建名为“First”的文件夹，而是将内容复制到目标位置。如果我使用“Webs”作为源文件夹，那么与“First”处于同一级别的其他文件夹也会被复制，这是不可取的。

如何使用 Copy-Item 或其他一些 powershell 命令将父文件夹“First”复制到目标，而无需在脚本中手动创建此文件夹，以便获得完全相同的结果？

谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:02:33.187

为了快速的方法，您可以在复制之前附加源父文件夹，例如

```
$TargetFolder = "D:\\Test\\Sandbox\\"+($SourceFolder | Split-Path -leaf) 
```

您还可以使用[Measure-Command Cmdlet](http://technet.microsoft.com/en-us/library/ee176899.aspx "测量命令 Cmdlet")进行计时

# opencv - 特征检测可靠性

> ID：13162184
> 
> 赞同：0
> 
> 时间：2012-10-31T16:08:50.137
> 
> 标签：opencv, match, feature-detection

我一直在尝试检测一个图像和另一个图像的某些特征，该图像是通过将另一个图像旋转 90 度创建的。我的目的是确认 OrbFeatureDetector 和 BriefFeatureExtractor 实际上是旋转不变的。但是，从字面上看，我有 0 个很好的匹配项。甚至没有一个 4 点匹配的组合对应于一个变换矩阵。我想知道图像与其旋转版本之间是否真的有可能没有很好的匹配。

我可以发布代码，但我很确定我的代码没有错误，只是有 0 个匹配项。而且我也不想用原始代码来打扰你。

感谢您的想法。

再会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:09:56.377

根据[Brief: Binary Robust Independent Elementary Features](http://www.cs.ubc.ca/~lowe/525/papers/calonder_eccv10.pdf)的第 4 部分，描述符“......并非设计为旋转不变......”但“尽管如此......它可以容忍少量旋转”。所以是的，你有可能而且很有可能在 90 度的旋转中没有匹配到。

# javascript - javascript - 添加千位分隔符并保留小数位

> ID：13162186
> 
> 赞同：3
> 
> 时间：2012-10-31T16:08:54.760
> 
> 标签：javascript

> **可能重复：**
> [如何在 Javascript 中使用逗号作为千位分隔符打印数字](https://stackoverflow.com/questions/2901102/how-to-print-number-with-commas-as-thousands-separators-in-javascript)

我有一个函数可以将千位分隔符添加到一个数字中，但是当传入小数时它不能正常工作：

```
function thousandSep(val) {
        return String(val).split("").reverse().join("")
                      .replace(/(.{3}\B)/g, "$1,")
                      .split("").reverse().join("");
    } 
```

如果我通过 10,000，我按预期得到 10,000。

但是，传入 10,000.00 我得到 1,000,0.00。

如何修改函数以处理小数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T16:16:33.807

不使用`.`，使用`\d`

```
function thousandSep(val) {
    return String(val).split("").reverse().join("")
                  .replace(/(\d{3}\B)/g, "$1,")
                  .split("").reverse().join("");
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T16:16:29.383

```
function format(n, sep, decimals) {
    sep = sep || "."; // Default to period as decimal separator
    decimals = decimals || 2; // Default to 2 decimals

    return n.toLocaleString().split(sep)[0]
        + sep
        + n.toFixed(decimals).split(sep)[1];
}

format(4567354.677623); // 4,567,354.68 
```

# ruby-on-rails - 对于更改公共视图范围的上传图像，我应该如何处理 rails 资产管道？

> ID：13162187
> 
> 赞同：2
> 
> 时间：2012-10-31T16:08:57.440
> 
> 标签：ruby-on-rails, image, asset-pipeline

在阅读了 Rails 如何处理图像资产之后，我感到很困惑，并且无法决定将上传的图像保存在我的应用程序目录树中的哪个位置。如果用户已将图像上传到我的 rails 应用程序，我应该将 image_save_path 设为 /assets/images/ 还是 /public/images ？

我的担忧/问题：如果我想允许用户在他们选择这样做时公开他们的图像，是否应该考虑上传“未发布”的图像（仅当 current_user == image.owner 时才提供图像）如果它位于资产/图像而不是公共/图像中，则受保护？同等保护？以某种方式受到较少保护？

我是否正确地假设使用资产管道的图像的好处只是文件名在生产模式下得到散列，就是这样？就资源的服务方式而言，这里是否存在一些隐含的额外或减少的安全性？这更像是一个微妙的意见问题，还是 Rails 公约在这里有话要说？

谢谢！

EDIT1：您将如何处理您希望上传用户可以使用但访客或其他用户无法发现的上传内容？应该（可以？）一家商店在 web_root 下的树外上传内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:41:42.623

应用程序资产是属于您的应用程序一部分的那些资产，例如背景和图标（在图像的情况下）。资产管道与用户上传的图像无关。我建议将它们分开，如果需要，从单独的 CDN 为它们提供服务。

资产管道中文件名的散列仅在资产编译期间完成，因此指向特定图像的链接对于图像内容是唯一的。这有助于避免为图像和其他资产设置复杂的缓存标头，因为当图像更改时，文件名也会更改，并且根本不会使用缓存的版本。

所有这些都不适用于用户上传的图像，您不会为他们的图像即时编译资产。

# java - Java - 基类和子类中的 equals 方法

> ID：13162188
> 
> 赞同：24
> 
> 时间：2012-10-31T16:08:57.880
> 
> 标签：java, equals

我有一个简单的基类，后来由许多单独的类扩展，这些类可能会引入新字段，但不一定。我在基类中定义了一个 equals 方法，但也为一些子类覆盖了它。可以在基类/子类中混合定义吗？就我而言，这是为了避免代码重复检查相同的字段。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-10-31T17:52:58.960

查看 Angelika Langer 的[“实现 equals() 以允许混合类型比较”](http://www.angelikalanger.com/Articles/JavaSolutions/SecretsOfEquals/Equals-2.html)。

以下是一些问题的简要说明和可能的解决方案：

平等合同说（除其他外）：

> 它是对称的：对于任何非空引用值 x 和 y，当且仅当 y.equals(x) 返回 true 时，x.equals(y) 才应该返回 true。

这意味着如果您的子类引入新字段并且您将基类的对象（或另一个不覆盖 equals 的子类）与该子类的对象进行比较，您可能会遇到问题。

**请勿执行以下操作：**

```
class BaseClass {
    private int field1 = 0;

    @Override
    public boolean equals(Object obj) {
        if (obj instanceof BaseClass) {
            return field1 == ((BaseClass) obj).field1;
        }
        return false;
    }
}

class BadSubClass extends BaseClass {
    private int field2 = 0;

    @Override
    public boolean equals(Object obj) {
        if (obj instanceof BadSubClass) {
            return super.equals(obj) 
                    && field2 == ((BadSubClass) obj).field2;
        }
        return false;
    }
} 
```

因为你得到

```
BaseClass baseClass = new BaseClass();
BadSubClass subClass = new BadSubClass();

System.out.println(baseClass.equals(subClass)); // prints 'true'
System.out.println(subClass.equals(baseClass)); // prints 'false' 
```

**一个可能的解决方案：**

将`instanceof`-check 替换为类比较：

```
obj != null && obj.getClass() == getClass() 
```

使用此解决方案，对象`BaseClass`永远不会等于任何子类的对象。

如果您在没有方法的情况下创建另一个，则`SubClass`两个-objects可以开箱即用地彼此相等（如果检查决定如此），但-object 永远不会等于-object。`@Override``equals``SubClass``BaseClass.equals``SubClass``BaseClass`

一个好的实现可能如下：

```
class BaseClass {
    private int field1 = 0;

    @Override
    public boolean equals(Object obj) {
        if (obj != null && obj.getClass() == getClass()) {
            return field1 == ((BaseClass) obj).field1;
        }
        return false;
    }
}

class GoodSubClass extends BaseClass {
    private int field2 = 0;

    @Override
    public boolean equals(Object obj) {
        if (obj instanceof GoodSubClass) {
            return super.equals(obj) && field2 == ((GoodSubClass) obj).field2;
        }
        return false;
    }
} 
```

有关更高级的问题及其解决方案，请参阅上面提到的文章。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T16:17:26.433

不，在引入与 equals 方法相关的新字段时，不可能符合 equals 契约。有关更多信息，请参阅 Joshua Bloch 的“Effective Java”。

**编辑：**

我现在手头没有这本书，但我认为如果基类是抽象的/无法实例化就可以了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-19T14:57:10.727

虽然以下内容不能处理所有情况，但我发现它非常实用。当我同时使用 SuperClass 和 SubClass 时，我已经使用过很多次了。我不想对它们进行相互比较，但我也不想为 SubClass 重新实现所有 SuperClass equals()。它处理：

*   a.equals(b) == b.equals(a)
*   不重复字段比较代码
*   轻松推广到任何子类深度
*   Subclass.equals(SuperClass) == false
*   超类。等于（子类）==假

代码示例

```
// implement both strict and asymmetric equality
class SuperClass {
   public int f1;
   public boolean looseEquals(Object o) {
      if (!(o instanceof SuperClass)) return false;
      SuperClass other = (SuperClass)o;
      return f1 == other.f1;
   }
   @Override public boolean equals(Object o) {
      return looseEquals(o) && this.getClass() == o.getClass();
   }
}
class SubClass extends SuperClass {
   public int f2;
   @Override public boolean looseEquals(Object o) {
      if (!super.looseEquals(o)) return false;
      if (!(o instanceof SubClass)) return false;
      SubClass other = (SubClass)o;
      return f2 == other.f2;
   }
   // no need to override equals()
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T16:13:24.023

您可以使用该`super()`方法来调用您正在扩展的类的方法，以防止任何代码重复的需要

```
public class BaseClass {
  public boolean equals(BaseClass other) {
    return (other.getBlahblah() == this.Blahblah && .....);
  }
}

public class DerivedClass extends BaseClass {
  public boolean equals(DerivedClass other) {
    return (super(other) && other.getNewAttribute() == this.NewAttribute.....);
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T16:16:21.770

相当有效的方法。问题出在您的一个子类中，它**必须**保留 equals 的定义，因为它受其父类的约束。否则你有一个损坏的 equals 函数，这可能会在运行时导致一些非常独特的场景。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T16:24:20.763

我想，像以前那样提供and`equals(Object obj)`方法`hashCode()`实现是完美的。我们都知道 Java在基类[java.lang.Object](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html)中提供了方法实现，并且在需要时我们将它们放在我们的.`super` `class``Java``hashCode() and equals(Object obj)``override``class`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-25T04:49:16.837

如果您没有正确编写代码，则会产生一个严重的问题，称为不对称（违反平等契约），所以让我们看看我们的选择。

最佳实践——同班策略。如果 B 是 A 的子类，并且每个类都有自己的 equals 方法，使用相同的类策略实现，则应将 B 类声明为 final，以防止在 B 的任何未来子类中引入不对称的 equals 定义。

问题。如果我们不想让 B 成为最终版本怎么办？

使用组合而不是继承。每当 B 类和 A 类（其中 B 是 A 的子类）需要不同的 equals 方法时，使用组合而不是继承是一个好策略，如果不能选择使 B 类成为 final，那么它是处理 equals 的唯一安全方法.

如何？

```
 public class A{
public boolean equals(Object ob){
//write your code here
}
}

class B{
A a= new A();
public B(A a){
this.a= a;
}
public boolean equals(Object ob){
//...write your code here
if(!((B)ob).a).equals(a)) return false;
//...write your code here

}
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-10-31T16:11:37.680

我认为只要您遵循[eqauls()](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)和[hashcode()](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)合同就可以了。

# asp.net - iOS：如何将凭据添加到我的 NSURL 代码中？

> ID：13162190
> 
> 赞同：0
> 
> 时间：2012-10-31T16:09:05.750
> 
> 标签：asp.net, ios, vb.net, ios6, nsurl

我正在尝试访问具有要解析的 xml 的页面。我正在使用以下代码，只要我不需要凭据即可。如何向此代码添加凭据？

```
NSURL *url = [[NSURL alloc] initWithString:URLPath];
NSXMLParser *xmlParser = [[NSXMLParser alloc] initWithContentsOfURL:url];

[xmlParser setDelegate: self];
success = [xmlParser parse]; 
```

我的“URLPath”上方是我的 url 字符串。我尝试使用以下 url 路径格式，但它对我不起作用。 `http://username:password@mypage.com/path/to/file.aspx?Function=Update`

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:22:55.373

使用`NSURLConnectionDelegates`

```
- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {
    if ([challenge previousFailureCount] == 0) {
        NSLog(@"received authentication challenge");
        NSURLCredential *newCredential = [NSURLCredential credentialWithUser:@"USER"
                                                                    password:@"PASSWORD"
                                                                 persistence:NSURLCredentialPersistenceForSession];
        NSLog(@"credential created");
        [[challenge sender] useCredential:newCredential forAuthenticationChallenge:challenge];
        NSLog(@"responded to authentication challenge");    
    }
    else {
        NSLog(@"previous authentication failure");
    }
} 
```

有关更多信息，请参阅[iOS 中的 NSURLConnection 和基本 HTTP 身份验证](https://stackoverflow.com/questions/1973325/nsurlconnection-and-basic-http-authentication)

# firefox - Firefox 网站顶部的未知空间

> ID：13162196
> 
> 赞同：1
> 
> 时间：2012-10-31T16:09:29.760
> 
> 标签：firefox, browser, space

仅在 Firefox 中，我的网站顶部有一个未知空间。当我在 Chrome、IE、Opera 等中浏览它时，没有这样的东西。
这是我的 HTML：

```
<body>
<div id="line"></div>
<div id="top"> 
```

这是我的CSS：

```
html {
    margin:0 0 0 0;
    height:100%;
    width:100%
}

body {
    font-family: Tahoma;
    font-size:8pt;
    color:#333;
    margin:0 0 0 0;
    background-color:#f5f5f5;
    text-align:center;
}

#line {
    height:8px;
    background-color:#333333;
    clear:none
} 
```

如您所见，在此之前没有任何东西`<div id="line"></div>`是图片中的深灰色线条。
这个未知的空间是什么？
![在此处输入图像描述](../Images/602f61eb1f470c71458dc5bf4c08f502.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:15:03.450

我发现了问题。我的配置文件中有一个 HTML 输出，我在`<html>`标记之前调用了它。

# android - 使用 Intent Actions 时 stopService 使应用程序崩溃

> ID：13162199
> 
> 赞同：1
> 
> 时间：2012-10-31T16:09:47.347
> 
> 标签：android, service

我编写了一个服务，它将运行长时间的每小时向服务器发送位置更新。如果用户不想发送位置更新，那么他将在应用程序中关闭。所以我正在启动服务（在第一个 Activity 中）并希望停止已经从另一个 Activity 运行的服务。所以我只是在 Manifest 文件中声明了对服务的操作，如下所示。

```
<service android:name=".services.LocationService" android:process=":bgservice">
    <intent-filter >
       <action android:name="com.example.STOP_LOC_SERVICE"/>
       <action android:name="com.example.START_LOC_SERVICE"/>
   </intent-filter>  
</service> 
```

在这里，我希望我的服务无论应用程序进程如何都能运行，因此我通过指定：bgservice 取了一个单独的服务名称。这是否意味着我的服务是远程服务。如果是这样，这是否会产生以下问题。

然后使用下面的代码在 Service 类中启动和停止服务。

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) 
{
    if(intent.getAction().equals("com.example.STOP_LOC_SERVICE"))
    {    // means that you have envoked action that will has to stop the service
                LocationService.this.stopSelf();   
    }
    else
    {
        return super.onStartCommand(intent, flags, startId);
    }
    return START_STICKY;
} 
```

在以下行启动服务

```
Intent istart = new Intent("com.example.START_LOC_SERVICE");
    startService(istart); 
```

在以下行停止服务

```
Intent istop = new Intent("com.example.STOP_LOC_SERVICE");
    startService(istop); 
```

在大多数设备上一切正常。我已经在多种设备上测试了该服务。但最近我在服务的 OnStartCommand() 中遇到了 NullPointerException。我无法在该方法中找到 null 的内容。希望 Intent 为空，但如果 Intent 为空，那么如何调用服务。此问题并非出现在所有设备上。

提前致谢。

错误出现在 onstart 命令中的 if 循环

日志猫：

```
java.lang.RuntimeException: Unable to start service com.example.services.LocationService@410e5be8 with null: java.lang.NullPointerException
at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2376)
at android.app.ActivityThread.access$1900(ActivityThread.java:123)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1210)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at com.example.services.LocationService.onStartCommand(LocationService.java:53)
at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2359)
... 10 more 
```

# c++ - 模板化迭代器传递 回调函数

> ID：13162203
> 
> 赞同：1
> 
> 时间：2012-10-31T16:09:54.970
> 
> 标签：c++, templates, boost

我正在尝试运行一个编译时迭代器，例如：

```
meta::reverse_iterator<2, 9>::iterate(callback());
meta::reverse_iterator<4, 7>::iterate(callback());
std::cout << "-----------------" << std::endl;
meta::iterator<2, 9>::iterate(callback());
meta::iterator<4, 7>::iterate(callback());

struct callback {
  template <int i>
  void operator()() {
    std::cout << "print !!" << i << std::endl;
  }
}; 
```

这就是我编写元迭代器的方式：

```
namespace meta {
    template <int Begin, int End, bool done = false>
    struct reverse_iterator {
        template <typename F>
        static void iterate(F f) {
            f.template operator()<End>();
            reverse_iterator<Begin, End-1, Begin == End-1>::iterate(f);
        }
    };

    template <int Begin, int End>
    struct reverse_iterator<Begin, End, true> {
        template <typename F>
        static void iterate(F) {}
    };

    template <int Begin, int End, bool done = false>
    struct iterator {
        template <typename F>
        static void iterate(F f) {
            iterator<Begin, End - 1, Begin == End - 1>::iterate(f);
            f.template operator()<End - 1>();
        }
    };

    template <int Begin, int End>
    struct iterator<Begin, End, true> {
        template <typename F>
        static void iterate(F) {}
    };

} 
```

现在我迭代器调用`operator()<N>`但我希望它能够调用用户提供的任何带有模板参数的任意函数`<N>`（不是作为运行时参数）如何实现？

也不`boost::bind`适用于它，因为它调用 bind 的函数对象而不是真正的函数。所以应该有一些方法可以将默认参数传递给提供的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:26:43.020

AFAIK 你不能直接这样做，但如果你真的想要它，你可以使用一个`traits`为你调用成员函数的类，并为不同的成员函数编写不同的特征：

```
struct function_operator_call_trait {
    template< int N, class T >
    void call( T& t ) {t.template operator()<N>();}
};
template< class Arg1, class Arg2 >
struct foo_call_trait {
    foo_call_trait( Arg1&& arg1 ) : a1( std::move(arg1) ) {}
    foo_call_trait( Arg1&& arg1, Arg2&& arg2 )
        : a1( std::move(arg1) ), a2( std::move(arg2) ) {}
    template< class T, int N >
    void call( T& t ) {t.template foo<N>(a1, a2);}
    Arg1 a1;
    Arg2 a2;
};
template <int Begin, int End, class traits = function_operator_call_trait, bool done = false>
struct iterator{
    iterator() {}
    iterator( traits const& t ) : t_( t ) {}
    iterator( traits&& t ) : t_( std::move(t) ) {}
    template<typename F>
    static void iterate(F f){
        iterator<Begin, End-1, traits, Begin == End-1>::iterate(f);
        t_.call<End-1>( f );
    }
    traits t_;
};
typedef iterator<2, 9> fc_iterator;
typedef foo_call_trait<int, float> foo_traits;
typedef iterator<2, 9, foo_traits> foo_iterator( foo_traits(1, 2) ); 
```

# grails - 为什么我会在 grails g:link 标签创建的链接末尾看到双星号？

> ID：13162204
> 
> 赞同：0
> 
> 时间：2012-10-31T16:09:55.283
> 
> 标签：grails

像这样的代码：

```
<g:link controller="category" action="show" id="${category.id}">${category.name}</g:link> 
```

产生下一个链接：

```
<a href="/shop/categories/show/1/**">Test category</a> 
```

为什么会发生这种情况以及如何删除这个难看的双星号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T11:08:28.187

从您的评论中：

> URLMappings 包含这个`"/categories/$action?/$id?/**?"`。但我真的很想告诉 grails，我不在乎 URL 在有意义的部分之后是否包含一些不必要的部分。

未绑定的通配符 ( `*`and `**`) 对“转发” URL 映射（即获取传入请求 URI 并将其映射到带有参数的控制器操作）做正确的事情，但是`RegexUrlMapping`，如果您尝试使用这样的源代码，请查看 default 的源代码反向映射`*`和`**`组件将按字面意思包含在生成的 URL 中。为了能够生成合理的 URL，映射的每个部分都必须是文字或绑定到命名变量，因此生成器可以知道它应该使用什么（可能为空）值来替换通配符。

如果您要使用映射

```
"/categories/$action?/$id?/$path**?" 
```

那么它仍然会在转发模式下匹配相同的 URI（在 in 之后存储 URI 的尾随部分`id`）`params.path`，但`<g:link controller="category" action="show" id="${category.id}">`会知道使用空尾随组件，因为您没有指定`params="[path:'something']"`.

# jquery - 从子 div 获取父 div 的索引

> ID：13162206
> 
> 赞同：5
> 
> 时间：2012-10-31T16:09:55.620
> 
> 标签：jquery, indexing, parent

我有几个 div，在它们里面我有嵌套的 div。我希望能够获取我的子 div 所在的父 div 的索引。即：如果我点击“post5”，我会得到 index1，或者如果我点击“post4”，它仍然会得到索引 1。

html:

```
 <div class="more-content">
   <div class="post">post 1</div>
   <div class="post">post 2</div>
   <div class="post">post 3</div>
 </div>
<div class="more-content">
  <div class="post">post 4</div>
  <div class="post">post 5</div>
  <div class="post">post 6</div>
</div>
 <div class="more-content">
  <div class="post">post 7</div>
  <div class="post">post 8</div>
  <div class="post">post 9</div>
 </div> 
```

查询：

```
$(".post").click(function() {
    alert($(".post").parent.index(this));
}); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-31T16:10:50.947

以下应该有效：

```
$(".post").click(function() {
    var index = $(this).parent().index(".more-content");
    alert(index);
}); 
```

**演示：http:** [//jsfiddle.net/NDySY/](http://jsfiddle.net/NDySY/)

# html - iOS中特殊字符（＃，％）的webView loadDocument

> ID：13162207
> 
> 赞同：2
> 
> 时间：2012-10-31T16:09:58.300
> 
> 标签：html, ios, webview

我想使用以下 url 加载本地 html 页面：“webView.loadDocument("./Html/error.html#401");”

但它将我的链接转换为：/Html/error.html%23401 并且不重定向。

有人可以帮我不要将“#”转换为“%23”

# javascript - 让上一个/下一个按钮消失

> ID：13162209
> 
> 赞同：0
> 
> 时间：2012-10-31T16:10:04.937
> 
> 标签：javascript, jquery, slider

我为一些内容输入了一个快速的 jQuery 滑块框。现在我只有 3 个面板或页面，并在单击“上一个”或“下一个”时让它们循环显示。我现在唯一遇到的麻烦是让它在结束时禁用按钮。目前，您可以继续单击下一步，并且容器会一直向左或向右移动。

我将如何实现这一目标？我想过在第一张/最后一张幻灯片中添加一个类，并告诉它是否有这个类来隐藏链接？不过，这可能不是最友好的方式。我想我想让它检查是否有另一个子 div，如果没有，则禁用该按钮。这样，如果我将来需要，我可以添加更多面板，并且 jQuery 将知道何时禁用该按钮。

这是我目前拥有的：[http ://codepen.io/anon/full/xdilq](http://codepen.io/anon/full/xdilq)

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:41:29.847

**[jsBin 演示](http://jsbin.com/agibud/1/edit)**

```
pagesN = $('.pages').length;
var c = 0;

function anim(){
  c = c===-1 ? pagesN-1 : c%pagesN;
  $('.pageContainer').stop().animate({left: -422*c }); 
}

$('.previous, .next').click(function(){
  var myClass = $(this).hasClass('next') ? ++c : --c;
  anim();
}); 
```

单击时增加或减少 var `c`。比在 animate 内部有一个三元运算符，它可以防止`c`转到`-1`(prev) 并将其始终保持在最大范围 (next) 中，这要归功于模运算符：

`c = c===-1 ? pagesN-1 : c%pagesN;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:23:29.193

当动画完成时将变量增加 1 或相应地减少呢？当这个变量在第三步时，你隐藏按钮，否则你显示它们。就像是

```
var counter = 1;
$('.next').click(function() {
  $('.pageContainer').animate({
    "left": "-=422px"
  }, 1000, function() {
    counter++;
    if(counter >= 3){ // or panels.length
      // hide button "next"
    }
  });
}); 
```

# xml - xmlforest中未转义的列值

> ID：13162213
> 
> 赞同：1
> 
> 时间：2012-10-31T16:10:09.743
> 
> 标签：xml, oracle

我有一个表列，它存储 xml 块，如

```
<Text>hello, world</Text></Image id="100"> 
```

或没有标签的纯文本。如何从没有转义符号的标记列值中生成 xml。

这是该语句的一个示例：

```
select xmlelement("Proposal", xmlforest(1 as "ProposalType"
                                   ,to_char(sysdate, 'dd.mm.yyyy') as "CreateDate"
                                   ,'title1' as "Title"
                                   ,'<Text>hello, world</Text></Image id="100">' as "InfoBlock"))
  from dual; 
```

生成的 xml 如下所示：

```
<Proposal>
    <ProposalType>1</ProposalType>
    <CreateDate>31.10.2012</CreateDate>
    <Title>title1</Title>
   <InfoBlock2>&lt;Text&gt;hello, world&lt;/Text&gt;&lt;/Image id=&quot;100&quot;&gt;</InfoBlock2>
</Proposal> 
```

但我需要这样的xml：

```
<Proposal>
    <ProposalType>1</ProposalType>
    <CreateDate>31.10.2012</CreateDate>
    <Title>title1</Title>
    <InfoBlock2>
        <Text>hello, world</Text><Image id="100"/>
    </InfoBlock2>
</Proposal> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:50:30.883

这是我能做的最好的：

```
 select xmlelement("Proposal",xmlelement("ProposalType",1)
                              ,xmlelement("CreateDate",to_char(sysdate, 'dd.mm.yyyy'))
                              ,xmlelement("Title",'Title1')
                              ,xmlelement("InfoBlock",xmlelement("Text",'Hello World')
                                                     ,xmlelement("Image",xmlattributes(10 as "Id"))
                                         )
                   )           
  from dual; 
```

结果：

```
<Proposal>
    <ProposalType>1</ProposalType>
    <CreateDate>31.10.2012</CreateDate>
    <Title>Title1</Title>
    <InfoBlock>
        <Text>Hello World</Text>
        <Image Id="10"></Image>
    </InfoBlock>
</Proposal> 
```

这给

```
<Image Id="10"></Image> 
```

不知道怎么办

```
<Image id="10"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:00:33.803

```
SQL> select xmlelement("Proposal",
  2                     xmlforest(1 as "ProposalType",
  3                               to_char(sysdate, 'dd.mm.yyyy') as "CreateDate",
  4                              'title1' as "Title"
  5                              ),
  6                     xmltype('<InfoBlock><Text>hello, world</Text><Image id="100"/></InfoBlock>'))
  7             .extract('/*') -- not needed, just put to pretty-print output.
  8    from dual;

XMLELEMENT(PROPOSAL,XMLFORES
--------------------------------------------------------------------------------
<Proposal>
  <ProposalType>1</ProposalType>
  <CreateDate>01.11.2012</CreateDate>
  <Title>title1</Title>
  <InfoBlock>
    <Text>hello, world</Text>
    <Image id="100"/>
  </InfoBlock>
</Proposal> 
```

因为您希望字符串是动态的，所以对该条目使用 xmltype 而不是 xmlforest。只需确保“你好，世界”或任何正确编码的内容。

# android - 如何将位从 android 蓝牙发送到另一个蓝牙（linvor 蓝牙）？

> ID：13162216
> 
> 赞同：1
> 
> 时间：2012-10-31T16:10:18.877
> 
> 标签：android, bluetooth

我想在 android 中创建一个应用程序，它将连续发送位到另一个蓝牙设备。我已经完成了一切，我只是不知道如何发送位或单个字符，文本消息在接收到蓝牙设备后也会起作用，它将执行一些任务，例如打开或关闭 LED。

远程蓝牙设备是linvor bluetooth。

我目前的代码是：

```
 import java.io.IOException;
import java.util.UUID;

import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothSocket;

public class ConnectThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final BluetoothDevice mmDevice;

    public ConnectThread(BluetoothDevice device) {
        // Use a temporary object that is later assigned to mmSocket,
        // because mmSocket is final
        BluetoothSocket tmp = null;
        mmDevice = device;

        // Get a BluetoothSocket to connect with the given BluetoothDevice
        try {
            // MY_UUID is the app's UUID string, also used by the server code
            tmp = device.createRfcommSocketToServiceRecord(UUID.fromString("device uuid"));
        } catch (IOException e) { }
        mmSocket = tmp;
    }

    public void run() {
        // Cancel discovery because it will slow down the connection
        MyService.mBluetoothAdapter.cancelDiscovery();

        try {
            // Connect the device through the socket. This will block
            // until it succeeds or throws an exception
            mmSocket.connect();
        } catch (IOException connectException) {
            // Unable to connect; close the socket and get out
            try {
                mmSocket.close();
            } catch (IOException closeException) { }
            return;
        }

        // Do work to manage the connection (in a separate thread)
        //manageConnectedSocket(mmSocket);
    }

    /** Will cancel an in-progress connection, and close the socket */
    public void cancel() {
        try {
            mmSocket.close();
        } catch (IOException e) { }
    }
} 
```

现在，当我尝试初始化此类的对象时，它只会崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:14:33.903

连接套接字后，调用 mmSocket.getOutputStream()。这将获得输出流。然后就像在 Java 中的任何其他输出流一样写入它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:40:56.750

正如 Gabe Sechan 所说，您将创建一个输出流，然后为输出流调用 write 方法。

```
private final OutputStream mmOutStream;
\\ other lines of code ...
mmOutStream = mmSocket.getOutputStream();

/**
     * Write to the connected OutStream.
     * @param buffer  The bytes to write
     */
    public void write(byte[] buffer) {
        try {
            mmOutStream.write(buffer);
            }
        catch(IOException e)
        {
            Log.e(TAG, "Exception during write", e);
        }
   } 
```

您还可以查看安装了 Android 的蓝牙聊天示例。它位于 android-sdk\samples\android-7\BluetoothChat。这是 api 7 的版本。

希望能帮助到你。

# c1-cms - 如何使新闻包中的新闻列表将新闻显示为列表

> ID：13162218
> 
> 赞同：2
> 
> 时间：2012-10-31T16:10:23.370
> 
> 标签：c1-cms

我从这样的模板调用 NewsList（来自标准 Composite.News 包）：

```
<f:function name="Composite.News.NewsList" xmlns:f="http://www.composite.net/ns/function/1.0"> 
<f:param name="ListOptions" value="Show date,Show teaser" /> 
<f:param name="PageSize" value="10" /> 
<f:param name="DateFormat" value="dddd, MMMM dd, yyyy" /> 
</f:function> 
```

我无法将新闻显示为列表。它仅在详细信息模式中显示第一个新闻站点。

NewsList 函数中的以下行有什么作用？

如何使控件在列表中显示我的新闻而不是第一个（最近的）项目？

我与一位更有经验的 Composite 开发人员交谈过，他也无法让 Composite.News.Newslist 在列表中显示新闻。

更新：我可以确定 OMNICORP 网站不使用标准的新闻包。这是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T07:29:58.530

Omnicorp 演示站点有自己的基于全局数据类型“Omnicorp.Content.News”和 XSLT 函数“Omnicorp.Content.News”的**新闻模块**

**Composite.News**包不同，它基于名为“Composite.News.NewsItem”的页面数据文件夹和两个 XSLT 函数：“Composite.News.NewsList”和“Composite.News.NewsTeasers”。所以要使用这个包，你应该按照这里描述的步骤 - [http://docs.composite.net/Packages/CompositeNews](http://docs.composite.net/Packages/CompositeNews)：创建一个页面类型=“新闻页面”的页面。将新闻项目添加到新闻页面数据文件夹（在页面下）。在 Content 选项卡上，具有 Composite.News.NewsList 函数，它将呈现带有详细信息链接的新闻列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:47:55.533

*但是我可以让 NewsTeasers 列出所有新闻并设置分页吗？*

是的你可以。您可以修改现有的 NewsTeaser 函数或创建新函数。在“函数调用”选项卡上修改“Composite.News.NewsItem.GetNewsItemXml”函数调用，并使用下一个值指定下一个参数“ **PageNumber** ”和“ **IncludePagingInfo** ”：

```
 <f:param name="PageNumber">
        <f:function name="Composite.Web.Request.QueryStringIntegerValue">
            <f:param name="ParameterName" value="Page" />
            <f:param name="FallbackValue" value="1" />
        </f:function>
    </f:param>
    <f:param name="IncludePagingInfo" value="True" /> 
```

在功能**模板**选项卡上添加模板以显示 PagingInfo：

```
<xsl:param name="pagingInfo" select="/in:inputs/in:result[@name='GetNewsItemXml']/PagingInfo" /> 
```

...

```
 <xsl:if test="$pagingInfo/@TotalPageCount &gt; 1">
                            <div class="Paging">
                                <xsl:apply-templates select="$pagingInfo" />
                            </div>
            </xsl:if> 
```

...

```
 <xsl:template match="PagingInfo">
    <xsl:param name="page" select="1" />
    <xsl:if test="$page &lt; @TotalPageCount + 1">
        <xsl:if test="$page = @CurrentPageNumber">
            <span><xsl:value-of select="$page" /></span>
        </xsl:if>
        <xsl:if test="not($page = @CurrentPageNumber)">
            <a href="?Page={$page}"><xsl:value-of select="$page" /></a>
        </xsl:if>
        <xsl:apply-templates select=".">
            <xsl:with-param name="page" select="$page+1" />
        </xsl:apply-templates>
    </xsl:if>
</xsl:template> 
```

有关如何将分页添加到 XSLT 的更多信息，请阅读这篇文章 - [http://docs.composite.net/XSLT/SortingAndPaging](http://docs.composite.net/XSLT/SortingAndPaging)

# sql - 从 2 个表和 2 个记录查看另一个

> ID：13162220
> 
> 赞同：0
> 
> 时间：2012-10-31T16:10:24.650
> 
> 标签：sql, oracle

我有带有 SOME_ID 列的表 SOME_TABLE。我也有表 ANOTHER_TABLE 列 SOME_TABLE_SOME_ID (FOREIGN KEY), TYPE, CONTENT

SOME_TABLE 中的一条记录在 ANOTHER_TABLE 中有 1 或 2 条记录。

我想有如下观点：

```
SOME_ID, CONTENT_TYPE_A, CONTENT_TYPE_B 
```

我有sql语句：

```
SELECT
ST.SOME_ID,
TYPE_A.CONTENT CONTENT_TYPE_A, 
TYPE_B.CONTENT CONTENT_TYPE_B
FROM SOME_TABLE ST
LEFT OUTER JOIN ANOTHER_TABLE TYPE_A
ON ST.SOME_ID=TYPE_A.SOME_TABLE_SOME_ID 
LEFT OUTER JOIN ANOTHER_TABLE TYPE_B
ON ST.SOME_ID=TYPE_B.SOME_TABLE_SOME_ID 
WHERE
TYPE_A.TYPE = 'A'
AND
TYPE_B.TYPE = 'B' 
```

如果 ANOTHER_TABLE 中的两条记录都存在（TYPE='A' 和 TYPE='B'），则此查询仅返回 SOME_TABLE 的结果。

当对应的 SOME_TABLE 记录在 ANOTHER_TABLE 中仅存在 1 条记录时如何查看？

现在有记录时，我想在 CONTENT_TYPE_A 或 CONTENT_TYPE_B 中有空值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:13:23.780

如何使用`OR`而不是`AND`：

```
SELECT
ST.SOME_ID,
TYPE_A.CONTENT CONTENT_TYPE_A, 
TYPE_B.CONTENT CONTENT_TYPE_B
FROM SOME_TABLE ST
LEFT OUTER JOIN ANOTHER_TABLE TYPE_A
ON ST.SOME_ID=TYPE_A.SOME_TABLE_SOME_ID 
LEFT OUTER JOIN ANOTHER_TABLE TYPE_B
ON ST.SOME_ID=TYPE_B.SOME_TABLE_SOME_ID 
WHERE
TYPE_A.TYPE = 'A'
OR
TYPE_B.TYPE = 'B' 
```

# unit-testing - CppUnit - 基于 xUnit 的设计的优缺点？

> ID：13162226
> 
> 赞同：4
> 
> 时间：2012-10-31T16:10:50.157
> 
> 标签：unit-testing, cppunit

CppUnit 的设计类似于 JUnit 和其他 XUnit 框架。

这样做的优点/缺点是什么？出于这个原因，什么时候应该选择它？
如果相似性没有优势，是否应该首选不同的框架。开始时的实际使用是否简单直观？

* * *

先从**优势**说起。使用一些工具会更好吗？例如，用于持续集成的工具？

在混合环境（如 C# 和 C++）中更好吗？

**缺点**：我知道构建起来稍微复杂一些，因此跨平台比其他框架少。就我个人而言，我的印象是（对于初学者）很容易陷入编译和链接错误，似乎很难遵循实际代码（例如在调试器中），而且与函数一起使用也不那么自然（ C 风格的接口）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:11:41.457

**好处：**

CppUnit 的主要优点是它遵循 XUnit 模式的 Setup / Test / Teardown。任何具有 XUnit 经验的人都可以理解该范例。必须使用宏而不是属性或反射（就像使用 .Net 或 Java XUnit 框架一样）是一种解决方法，但并不是很麻烦。

CppUnit 本身是可移植的。尽管 TestRunner.DLL GUI 完全在 MFC 中构建，因此仅适用于 Windows，但命令行版本不使用 Microsoft 特定代码，并且可以在许多平台上执行。

它也非常稳定。多年来，开发人员几乎没有对它做任何事情，主要是因为它的核心不需要任何东西。它把它的一件事做得很好。

**缺点：**

不幸的是，缺点是缺乏最终用户的支持。我最大的抱怨是没有将 CppUnit 集成到 IDE 中的好工具。我认为这最严重的原因是测试需要纪律。任何使单元测试变得比实际更难的事情都将被用作不这样做的借口。

您可以手动添加格式以输出 Visual Studio 将正确解释的测试失败行（因此双击它将带您到测试中失败的 ASSERTion。）但这不随工具提供，您必须学习它在像这样的网站上外部。

您可以编写一个 IDE 插件来为您生成单元测试框架代码，但我知道没有公开提供此类插件。同样，这对于开发人员来说需要很容易。

因为没有集成，所以也没有关于将 CppUnit 项目合并到您的代码库中的已发布指南。这使得开始变得非常困难。

如果你设法让它工作，有几个人报告了幻影 CppUnit 项目签入/签出问题。

CppUnit 不支持任何特定的模拟框架。由于大多数模拟框架使用反射来使开发模拟变得轻松，因此 C++ 总是会在那里受到一些影响。

**备择方案：**

有很多很多的 C++ 单元测试框架。Googletest 得到了一些人的好评。CppUnitLite 受到一些人的称赞，但我发现它非常混乱和无益。CxxUnit 需要一个笨拙的 Python 扫描和解析步骤——对于不太文明的时代来说，这是一种不太优雅的武器。在这个领域有许多商业参与者，提供他们的商品。

我推荐[http://en.wikipedia.org/wiki/List_of_unit_testing_frameworks#C.2B.2B](http://en.wikipedia.org/wiki/List_of_unit_testing_frameworks#C.2B.2B)以获得非常丰富的替代品列表。

虽然我还没有机会使用它，但我知道 Visual Studio 2012 已经整合了 Microsoft 自己的测试套件工具，并使其可用于本机 C++ 代码。以前，它只能通过 .Net 集成工作，这对于大多数 C++ 代码来说是无用的。我真的很期待拥有一整套工具，包括它们的代码覆盖集成，它可以突出显示您的测试代码，向您展示测试覆盖中的差距。

底线：如果我今天重新开始，我会选择一个不同的与 XUnit 兼容的测试框架，一个与 IDE 完全集成的框架。当我们选择 CppUnit 时，它是 Visual Studio 6.0 中最好的游戏，但现在我们只是忍受它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-02T18:16:32.847

**坏处：**

在研究*CppUnit*时，我发现 CppUnit Test 的安装路径是固定的*（/usr/local）*，无法修改。因此，当您尝试将此框架集成到您没有管理员权限的工作机器上时，这将是一个问题

```
MYMACHINE:cppunit-1.12.1 usrId$ make install
Making install in src
Making install in cppunit
test -z "/usr/local/lib" || ../../config/install-sh -c -d "/usr/local/lib"
 /bin/sh ../../libtool   --mode=install /usr/bin/install -c  'libcppunit.la' '/usr/local/lib/libcppunit.la'
/usr/bin/install -c .libs/libcppunit-1.12.1.0.0.dylib /usr/local/lib/libcppunit-1.12.1.0.0.dylib
install: /usr/local/lib/libcppunit-1.12.1.0.0.dylib: Permission denied
make[3]: *** [install-libLTLIBRARIES] Error 71
make[2]: *** [install-am] Error 2
make[1]: *** [install-recursive] Error 1
make: *** [install-recursive] Error 1
MYMACHINE:cppunit-1.12.1 usrId$ 
```

即使更改了多个makefile，结果也是一样的

```
MYMACHINE:cppunit-1.12.1 usrId$ make install
test -z "/Users/username/lib" || ../../config/install-sh -c -d "/Users/username/lib"
 /bin/sh ../../libtool   --mode=install /usr/bin/install -c  'libcppunit.la' '/Users/username/lib/libcppunit.la'
/usr/bin/install -c .libs/libcppunit-1.12.1.0.0.dylib /Users/username/lib/libcppunit-1.12.1.0.0.dylib
(cd /Users/username/lib && { ln -s -f libcppunit-1.12.1.0.0.dylib libcppunit-1.12.1.dylib || { rm -f libcppunit-1.12.1.dylib && ln -s libcppunit-1.12.1.0.0.dylib libcppunit-1.12.1.dylib; }; })
(cd /Users/username/lib && { ln -s -f libcppunit-1.12.1.0.0.dylib libcppunit.dylib || { rm -f libcppunit.dylib && ln -s libcppunit-1.12.1.0.0.dylib libcppunit.dylib; }; })
/usr/bin/install -c .libs/libcppunit.lai /Users/username/lib/libcppunit.la
/usr/bin/install -c .libs/libcppunit.a /Users/username/lib/libcppunit.a
chmod 644 /Users/username/lib/libcppunit.a
ranlib /Users/username/lib/libcppunit.a
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ranlib: file: /Users/username/lib/libcppunit.a(BeOsDynamicLibraryManager.o) has no symbols
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ranlib: file: /Users/username/lib/libcppunit.a(ShlDynamicLibraryManager.o) has no symbols
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ranlib: file: /Users/username/lib/libcppunit.a(Win32DynamicLibraryManager.o) has no symbols
libtool: install: warning: remember to run `libtool --finish /usr/local/lib'
make[1]: Nothing to be done for `install-data-am'. 
```

# mysql - 分叉还是不分叉？

> ID：13162235
> 
> 赞同：6
> 
> 时间：2012-10-31T16:11:23.950
> 
> 标签：mysql, multithreading, perl, fork, message-queue

我正在重新开发一个系统，该系统将通过 http 向众多供应商之一发送消息。原来是 perl 脚本，很可能重新开发也会使用 perl。

在旧系统中，有多个 perl 脚本同时运行，每个供应商五个。当一条消息被放入数据库时​​，随机线程号（1-5）和供应商被选择以确保没有消息被处理两次，同时避免锁定表/行。此外，数据库中有一个“公平队列位置”字段，以确保大消息发送不会延迟发送大消息时发生的小发送。

有时每分钟只有几条消息，但在其他时候，可能会有数十万条消息的转储。在我看来，让所有脚本一直运行并检查消息是一种资源浪费，所以我正在尝试确定是否有更好的方法来做这件事，或者旧的方法是否可以接受。

我现在的想法是让一个脚本根据流量的多少来运行和分叉尽可能多的子进程（达到一个限制），但我不确定如何最好地实现它，以便每个消息只处理一次，同时保持公平排队。

我现在最好的猜测是父脚本更新数据库以指示哪个子进程应该处理它，但是我担心这最终会比原始方法效率低。我几乎没有编写分叉代码的经验（我上次这样做是在大约 15 年前）。

任何关于如何最好地处理消息队列的想法或指南链接表示赞赏！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T17:19:07.483

您可以使用 Thread::Queue 或任何其他：[Perl 有多处理模块吗？](https://stackoverflow.com/questions/7931455/is-there-a-multiprocessing-module-for-perl)

如果旧系统是以这种方式用 Perl 编写的，那么您可以重用它的大部分内容。

非工作示例：

```
use strict;
use warnings;

use threads;
use Thread::Queue;

my $q = Thread::Queue->new();    # A new empty queue

# Worker thread
my @thrs = threads->create(sub {
                            while (my $item = $q->dequeue()) {
                                # Do work on $item
                            }
                         })->detach() for 1..10;#for 10 threads
my $dbh = ...
while (1){
  #get items from db
  my @items = get_items_from_db($dbh);
  # Send work to the thread
  $q->enqueue(@items);
  print "Pending items: "$q->pending()."\n";
  sleep 15;#check DB in every 15 secs
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-31T16:28:49.243

我建议使用像 RabbitMQ 这样的消息队列服务器。

一个进程将工作送入队列，您可以让多个工作进程使用队列。

这种方法的优点：

*   工人在等待工作时阻塞（无忙等待）
*   如果需要，可以手动启动更多工作进程
*   工作进程不必是特殊父进程的子进程
*   RabbitMQ 会将工作分配给所有准备好接受工作的工作人员
*   如果 worker 没有返回 ACK，RabbitMQ 会将工作放回队列
*   您不必在数据库中分配工作
*   每个“代理”（工人、生产者等）都是一个独立的进程，这意味着您可以杀死它或重新启动它而不影响其他进程

要动态扩大或缩小工人数量，您可以实现以下内容：

1.  如果工人在指定的时间内没有工作，他们会自动死亡
2.  让另一个进程监控队列的长度并在队列变得太大时产生更多的工作人员

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T21:16:19.977

我建议将[beanstalkd](http://kr.github.com/beanstalkd/)用于专用作业服务器，并在 perl 脚本中使用[Beanstalk::Client](https://metacpan.org/module/Beanstalk%3a%3aClient)将作业添加到队列并删除它们。

与 RabbitMQ 相比，您应该会发现 beanstalkd 更易于安装和设置。它还将负责在可用的工作人员之间分配工作，隐藏任何失败的工作以便稍后重试，安排工作在以后完成，以及更多基本功能。对于您的工人，您不必担心分叉或线程；只需在可用的服务器上启动尽可能多的工作人员即可。

RabbitMQ 或 Beanstalk 都比滚动您自己的 db-backed 解决方案要好。这些项目已经解决了排队所需的许多细节，并实现了您可能尚未意识到您想要的功能。与休眠和从数据库中选择以查看是否有更多工作相比，他们还应该更有效地处理新工作的轮询。

# c# - 使用 Moq 模拟 foreach 循环

> ID：13162237
> 
> 赞同：6
> 
> 时间：2012-10-31T16:11:29.283
> 
> 标签：c#, unit-testing, moq

我想循环通过一个 XmlNodeList。如何在 Moq 中模拟 XmlNodeList，以便可以像在 foreach 循环中一样循环遍历它：

```
 foreach (XmlNode xmlNode in nodes)
        {
            //Do something with node
        } 
```

我试图通过`SetupSequence`方法进行设置，但我无法创建所需的模拟。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T18:37:38.700

引擎盖下的`foreach`调用`GetEnumerator`，这就是你需要模拟的：

```
var xmlNodesMock = new Mock<XmlNodeList>();
xmlNodesList
    .Setup(l => l.GetEnumerator())
    .Returns(new XmlNode[] { /* values go here */ }.GetEnumerator()); 
```

自然，您需要使用实际值`XmlNode`在方法中初始化数组。`Returns`请记住，模拟列表必须可注入测试方法，以便您可以替换实际实现。

# html - 如何使这个 CSS 菜单居中？

> ID：13162241
> 
> 赞同：-1
> 
> 时间：2012-10-31T16:11:35.633
> 
> 标签：html, css

我尝试了很多方法，但无法让这个菜单居中..有什么想法吗？

您可以在此处查看该页面：http: [//jsbin.com/obecig/1/edit](http://jsbin.com/obecig/1/edit)

我在#nav ul 选择器中尝试了 text-align:center 但没有运气..

```
<html>
<head>
<style type="text/css">
#nav, .nav, #nav .nav li { margin:0px; padding:0px; }
#nav li {float:left; display:inline; cursor:pointer; list-style:none; padding:0px 10px 0px 10px; border:1px #000 solid; position:relative;}
#nav li ul.first {left:-1px; top:100%;}

li, li a {color:#000;}
#nav .nav li { width:100%; text-indent:10px; line-height:30px; margin-right:10px; border-top:1px #000 solid; border-bottom:1px #000 solid; border-left:none; border-right:none; background:#fff;}
#nav li a {display:block; width:inherit; height:inherit;}

ul.nav { display:none; }
#nav li:hover > a, #nav li:hover { color:#fff; background:#000; }
li:hover > .nav { display:block; position:absolute; width:200px; top:-2px; left:50%; z-index:1000; border:1px #000 solid;}
li:hover { position:relative; z-index:2000; }
</style>
</head>

<body>
<ul id="nav">
    <li>Menu 1
        <ul class="nav first">
            <li>Menu 1</li>
            <li>Menu 2</li>
            <li>Menu 3</li>
            <li>Menu 4</li>
        <ul>
    </li>
    <li>Menu 2</li>
    <li>Menu 3</li>
    <li>Menu 4</li>
</ul>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-10T16:32:44.813

看到每个人都如何回答同样的事情，没有人费心解释为什么......我们开始吧：

众所周知，如果您不知道如何使块级元素居中，可能会很痛苦。首先，我们大多数人都知道这是可行的`margin: 0 auto;`，但不是每个人都知道为什么。

快速分解`margin: 0 auto;`与 CSS 接受某些属性的速记符号的方式有关。假设`margin`您当然是针对给定元素的边距，并且该`0`部分使用速记表示法表示：顶部为 0，底部为 0 ...同时`auto`在末尾添加您说的是：左侧的自动边距和自动右边的边距。

如果您没有为相关元素定义宽度，上述方法将不起作用。在这种情况下，元素的 ID 属性为`#nav`... 这就是为什么每个人在答案中给出的示例都有固定宽度的原因。这背后的逻辑是块级元素默认扩展其父容器的 100%，除非您在 CSS 中特别定义。

所以理论上这也适用于居中，虽然它是更多的标记而不是为简单起见的最佳方法，但我只是为了说明目的而展示它。

```
#nav {
  width: 300px;
  margin-left: auto;
  margin-right: auto;
} 
```

每个人都更习惯这样看……我们这样使用它是因为它更短。

```
#nav {
  width: 300px;
  margin: 0 auto;
} 
```

零不是必须的.​​.....请记住，它是元素的顶部和底部边距。话虽如此，下面是一个底部有 20 像素边距并居中的元素示例。

```
#nav {
  width: 300px;
  margin: 0 auto 20px auto;
} 
```

最后但并非最不重要的...此属性 ( )的简写符号与以下相同`margin`：`border``padding`

所以它是：上、右、下、左。像这样：`margin: 10px 20px 30px 40px`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:15:42.097

您需要给它一个宽度，然后将水平边距设置为自动。无论如何，这是最快的方法。

将此添加到您的CSS：

```
#nav
{
     width:100px;
     margin: 0 auto;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T16:14:52.597

为了使某些东西居中，它需要一个宽度和边距：0 auto，所以如果你添加这个代码：

```
#nav { 
  width: 100px; 
  margin: 0 auto; 
} 
```

它应该（并且为我做了）工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T16:18:47.993

```
#nav{
 width:80px;
 margin: 0 auto;} 
```

# wordpress - Safari 和太多的重定向

> ID：13162244
> 
> 赞同：0
> 
> 时间：2012-10-31T16:11:40.040
> 
> 标签：wordpress, redirect, safari

当我使用 Firefox、Chrome 或 IE 时，我有一个网站非常好。但是当我与 Safari 一起使用时，我遇到了太多重定向错误。

这很奇怪，因为当我进入主页时：http: [//www.promenade-sainte-catherine.com](http://www.promenade-sainte-catherine.com)没关系，如果我进入其他页面，我会收到错误消息。如果我刷新页面，我可以看到它。

我真的不明白这是从哪里来的。

有关信息：此错误仅在 Safari Mac 上，在 iPhone 上运行良好（使用 wp touch）。这是我使用的插件列表：

Advanced Custom Fields Contact Form 7 Google sitemap plugin Slideshow Gallery TinyMCE Advanced User Role Editor WordPress SEO（我已经停用了这个，但结果还是一样） WP Columns WP Sliding Login/Dashboard Panel WPtouch

谢谢你的帮助

编辑：HTACCESS：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:13:09.660

听起来您的`permalink`设置有问题 - 在您的管理员中转到`Settings > Permalinks`，单击保存，然后再试一次。

# flask - 烧瓶 jinja2 内联插入 css 文件的内容

> ID：13162245
> 
> 赞同：5
> 
> 时间：2012-10-31T16:11:43.170
> 
> 标签：flask, jinja2

我有一个烧瓶项目，其中一个页面需要自包含。我有一个单独的文件，我需要将其内容插入到 html 页面的头部。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-31T17:59:18.963

只需使用[`include`](http://jinja.pocoo.org/docs/templates/#include)语句来包含内容：

```
<style type="text/css">
{% include "your.css" %}
</style> 
```

# java - 方法在不应该的地方抛出 NumberFormatException，到目前为止工作正常

> ID：13162248
> 
> 赞同：3
> 
> 时间：2012-10-31T16:12:02.597
> 
> 标签：java, numberformatexception

当我正在转换的字符串是 int 时，我似乎无法弄清楚为什么它会抛出 NFE

[代码]

```
 public void setCurrentTransferRate(){
    try{
        long startTime = System.currentTimeMillis();  
        String[] command = {"/bin/sh", "-c", "ifconfig " + interface_name + " | grep -oP     'RX bytes:[0-9]{1,11}'"};
        String[] command1 = {"/bin/sh", "-c", "ifconfig " + interface_name + " | grep -oP 'TX bytes:[0-9]{1,11}'"};
        Process child = Runtime.getRuntime().exec(command);
        Process child1 = Runtime.getRuntime().exec(command1);
        BufferedReader r = new BufferedReader(new InputStreamReader(child.getInputStream()));       //i prwti metrisi twn RX kai TX bytes
        BufferedReader r1 = new BufferedReader(new InputStreamReader(child1.getInputStream()));
        String temp = r.readLine();
        temp = temp.replace("RX bytes:","");   
        String temp1 = r1.readLine();
        temp1 = temp1.replace("TX bytes:","");  
        r.close();              
        r1.close();
        int x = Integer.parseInt(temp);         
        int y = Integer.parseInt(temp1); 
    }catch(IOException e){e.printStackTrace();}        
    catch(InterruptedException e){e.printStackTrace();}
   }[/code] 
```

产生错误的字符串是 temp

我得到了错误

[代码]

```
 Exception in thread "Thread-0" java.lang.NumberFormatException: For input string:  "3262469144"
  at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
  at java.lang.Integer.parseInt(Integer.java:495)
  at java.lang.Integer.parseInt(Integer.java:527)
  at askisi1.General.setCurrentTransferRate(General.java:187)
  at askisi1.General.<init>(General.java:27) 
  at askisi1.mainThread.run(mainThread.java:17)
  at java.lang.Thread.run(Thread.java:722)[/code] 
```

我真的可以用一双新鲜的眼睛看这个

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T16:13:15.260

整数的最大正值[`Integer.MAX_VALUE`是`2,147,483,647`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#MAX_VALUE)。您可以使用 long 代替：

```
long x = Long.parseLong(temp); 
```

它应该可以解决您的问题（如果您的所有数字都小于[`Long.MAX_VALUE`或`9,223,372,036,854,775,807`](http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html#MAX_VALUE)）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T16:12:56.253

3262469144 对于 int 来说太大了！

# c++ - C ++浮点截断和设置精度逻辑错误

> ID：13162251
> 
> 赞同：2
> 
> 时间：2012-10-31T16:12:06.320
> 
> 标签：c++, file-io, io, floating-accuracy, truncation

我找了一会儿，在这里找不到答案，但这似乎是一种奇怪的问题。我正在使用 C++ 中的 fstream 库。我要做的是从输入文件中获取数据，为其分配变量，然后将其输出到屏幕和输出文件。这就是我正在研究的一个项目的全部内容，该项目计算汽车贷款的每月付款，这就是变量以它们的方式命名的原因。

我的数据文件如下所示：

105670.00 12345.00 0.057 4

基本上正在发生的事情是我在前两个数字的小数点后丢失了所有东西（不管我输入的小数点是什么），但它不会发生在第三个数字上。此外，当我尝试设置前两个数字的精度（2）时，我得到一个奇怪的逻辑错误，我将在我的代码之后显示。

我的代码如下所示：

```
#include<fstream>
#include<iomanip>
#include<iostream>
using namespace std;

int main ()
{
ifstream din; // These are my input and output files
ofstream dout;
float purchasePrice; // The first number of the input file.
float downPayment; // Second number.
float annualInterest; // Third number.
float numYears; // Last number.

// declaring the input/output files code here

din >> purchasePrice >> downPayment >> annualInterest >> numYears;

cout << purchasePrice << endl;
cout << downPayment << endl;
cout << annualInterest << endl;
cout << setprecision(2) << purchasePrice << endl;
cout << setprecision(2) << downPayment << endl;
cout << setprecison(2) << annualInterest << endl;
} 
```

这是我的输出：

105670 12345 0.057 1.1e+005 1.2e+004 0.057

我希望我的输出是：

105670.00 12345.00 0.057 105670.00 12345.00 0.05

此外，在执行任何计算时，数字的行为就好像它们仍然具有小数点后的所有内容。我的问题是，为什么只有一些浮点数被截断，为什么 setprecision() 在这种情况下不能按照预期的方式工作？

任何回复都非常感谢，我很抱歉它的解释如此冗长。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T16:18:37.900

您还需要设置`fmtflags`为`fixed`：

```
std::cout << std::fixed << std::setprecision(2) << purchasePrice << "\n"; 
```

如果不指定`scientific`or `fixed`，输出机制将使用任何被认为是最佳的方案。你知道什么是“最好的”，那就是定点方案。有关更多详细信息，请参阅[http://en.cppreference.com/w/cpp/io/manip](http://en.cppreference.com/w/cpp/io/manip)。

更好的是在处理金钱时根本不使用浮点数。使用一些定点算术包要好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:23:17.293

float 通常具有 24 位二进制精度，这意味着它可以存储大约 6 位精度的十进制数字，因此如果您的数字大于 100000，您将根本无法获得十进制数字的任何精度。

在这种情况下，您应该使用具有大约 15 个小数位精度的**double**而不是**float**

这很可能回答了你的具体问题，但如果这是为了钱，你可能根本不应该使用浮动格式，因为它们不能准确地表示 0.01 作为一个值，所以你所有的计算都是近似的，你可能在处理金钱时不希望那样。通常将便士/美分/任何整数的数量保存在整数中并要小心:) 甚至更好的是专门为处理货币价值而设计的类，因为通常有四舍五入等法律要求。

# exit-code - Open Grid Scheduler/Sun Grid Engine qrsh bad exit code on halt/reboot

> ID：13162252
> 
> 赞同：0
> 
> 时间：2012-10-31T16:12:09.893
> 
> 标签：exit-code, grid-computing, sungridengine

我通过 qrsh 调用在现场实例上使用 OGS。为了让我的程序正常工作，我需要能够知道作业何时因系统关闭而失败（我失去了现场实例）。

如果我们通过 ssh 执行远程命令并且远程系统出现故障，则返回的退出代码为 255。

我的问题是，对于 OGS，当使用 qrsh 执行远程命令并且远程系统出现故障时，返回的退出代码为 0。0 表示“好的，一切都好”。因此，无法从该代码中知道不，这不好，我需要重新安排。

（当然，我可以更改远程调用以返回特定代码，但由于它不是标准的，我宁愿避免这样做。）

# wordpress - 我怎么能在博客文章的左侧放一个广告 - 并让文字环绕它

> ID：13162259
> 
> 赞同：2
> 
> 时间：2012-10-31T16:12:30.033
> 
> 标签：wordpress

所以我一直在尝试一堆东西，但一无所获。

我有一个博客，基本上我想做的是在内容的左侧自动添加一个 300x600。在 Single.php 中，我似乎只能选择在内容之前或之后添加广告单元 - 而不是在内容期间。（典型的场景是一篇 600 字的帖子和顶部的 640x400 特色图片。）

我希望 300x600 横幅位于帖子中间，150 像素位于 960 像素内容区域的内部和外部。一张图片更好地描述了这一点。

![例子](../Images/31b56323085b5a553b20c1268baf9afc.png)

上面是一张粗略的图片，但我希望你能明白。我希望文本“环绕”图像。

我在想这样的事情：

```
$content = get_the_content();
// if the post has > 800 characters, show top ad
if ( mb_strlen($content) > 400 ) {
?>
<?php if ( function_exists('show_ad_1') && show_ad_1() ) echo '<div id="ad-abovepost">'      .show_ad_1(). '</div>'; ?> 
```

}

我相信这会在一定数量的字符后触发广告（不是我想要的，而是一个开始），但我无法控制广告在博客文章中的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T22:32:49.867

左对齐图像很容易做到。确保它出现在文章的中间可能有点棘手。

也许最好尝试在前 300 或 400 个字符之后找到第一个段落分隔符，然后您可以在此处插入图像。

插入此文本应该让您朝着正确的方向前进

```
[caption align="alignleft" width="300"]<a href="link-goes-here"><img  src="ad-image-goes-here.png" alt="" width="300" height="600" /></a> You should click this ad[/caption] 
```

# objective-c - 画布和模拟器上的视图不同

> ID：13162260
> 
> 赞同：0
> 
> 时间：2012-10-31T16:12:38.500
> 
> 标签：objective-c

![图片](../Images/ee73ae511cb759f6777d0ac3f4b43110.png)

查看按钮的标题。也将 1 放在底部。知道是什么原因造成的吗？（我所做的只是拖放并编写了一些简单的计算代码）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:22:58.697

在您的图片中，按钮的底部和左侧有蓝线`1`。这意味着您的按钮与屏幕的左下角对齐。

其余按钮可能与屏幕顶部对齐。这意味着如果屏幕高度发生变化，您的按钮将不会对齐。如果您将按钮与屏幕顶部对齐，则不应出现此问题。

您可以通过将按钮移动到屏幕顶部来更改对齐方式，使蓝线位于顶部，然后将其向下拖动到您想要的位置，或者您可以在`Size Inspector`.

至于缺少标题的问题，看起来缺少标题的按钮不知何故有奇怪的约束，导致在屏幕布局时标题消失。我可以通过删除除第一行按钮之外的所有按钮，选择第一行并为其他行复制 4 次来解决此问题。这样可以确保所有按钮都完美排列。您的几个按钮的宽度为 71 而不是 64，这可能导致它们布局不佳。

# ruby-on-rails - Rails-i18n 不会加载翻译

> ID：13162265
> 
> 赞同：0
> 
> 时间：2012-10-31T16:12:54.963
> 
> 标签：ruby-on-rails, ruby, internationalization, gem, translation

我添加了 gem“rails-i18n”，但是当我尝试获取“date.order”的转换时。一切都失败了，但是当我在自己的文件应用程序中编写翻译时，它可以工作吗？

**2012 年 10 月 31 日更新** 我的 gem 文件是：

```
source 'https://rubygems.org'
gem 'rails', '3.2.8'
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end
gem 'jquery-rails'
gem "mysql2", ">= 0.3.11"
gem "haml", ">= 3.1.7"
gem "haml-rails", ">= 0.3.5", :group => :development
gem "hpricot", ">= 0.8.6", :group => :development
gem "ruby_parser", ">= 2.3.1", :group => :development
gem "rspec-rails", ">= 2.11.4", :group => [:development, :test]
gem "capybara", ">= 1.1.2", :group => :test
gem "email_spec", ">= 1.2.1", :group => :test
gem "factory_girl_rails", ">= 4.1.0", :group => [:development, :test]
gem "bootstrap-sass", ">= 2.1.0.1"
gem "devise", ">= 2.1.2"
gem "cancan", ">= 1.6.8"
gem "rolify", ">= 3.2.0"
gem "simple_form", ">= 2.0.4"
gem "quiet_assets", ">= 1.0.1", :group => :development
gem "therubyracer", ">= 0.10.2", :group => :assets, :platform => :ruby
gem 'i18n'
gem 'rails-i18n' 
```

我的错误在于：[https ://gist.github.com/3990266](https://gist.github.com/3990266)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:53:28.703

我发现你绝不能写

```
en:
  date: Date 
```

在你自己的翻译中会引起很多错误...

# dust.js - 在dust.js 中，您可以将参数从子模板传递到基础吗？

> ID：13162268
> 
> 赞同：1
> 
> 时间：2012-10-31T16:12:58.850
> 
> 标签：dust.js

在我的灰尘模板库中，有 3 个级别的模板：

根据：`{#myparam}{.}{/myparam}`

家长：`{>base}`

孩子：`{>parent myparam="value"}`

我如何将 myparam 从 'child' 传递到 'base' ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:07:42.650

尝试这个：

```
{! base template !}
{myparam} 
```

然后

```
{! parent template !}
{>base myparam=childparam/} 
```

然后

```
{! child template !}
{>parent childparam="value"/} 
```

试试这个 jsFiddle：http: [//jsfiddle.net/smfoote/gZM3H/1/](http://jsfiddle.net/smfoote/gZM3H/1/)

# ios - ios stringByAddingPercentEscapesUsingEncoding 转换未更正

> ID：13162270
> 
> 赞同：0
> 
> 时间：2012-10-31T16:13:03.680
> 
> 标签：ios, nsstringencoding

我有一些内容`2ofsjw0234lnc.jpg\t2m03fcsmaokwf.jpg\n`想编码为 url 参数，所以我使用如下代码。

```
NSString * attachsString = [_attachments stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

输出`2ofsjw0234lnc.jpg%5ct2m03fcsmaokwf.jpg%5cn` 不是我想要`2ofsjw0234lnc.jpg%092m03fcsmaokwf.jpg%0d%0a`的，转义字符不是我想要的转换。只有“\”已被转换。

那你能给点建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:23:26.620

如果你`\t`输入一个字符串文字，那么在编译时，它会被转换为一个制表符。然后 `stringByAddingPercentEscapesUsingEncoding:`将选项卡转换为`%09`. 但是，如果在运行时，字符串具有两个字符`\t`，则不会与任何其他两个字符有任何不同。在这种情况下，`stringByAddingPercentEscapesUsingEncoding:`只需看到反斜杠并将其转换为`%5c`.

如果你想在运行时转换`\t`或`\n`字符串（不是字符），那么你应该使用：

```
// note the double backslash for the tab
string = [string stringByReplacingOccurrencesOfString:@"\\t" withString:@"%09"]; 
```

重复`\n`.

# python - Mountain Lion 中的 PyQt 和 32 位 Enthought ipython

> ID：13162275
> 
> 赞同：3
> 
> 时间：2012-10-31T16:13:13.683
> 
> 标签：python, pyqt, ipython, homebrew

我在 Mac OsX Mountain Lion 上安装了免费的（32 位）Enthought Python[发行版。](http://www.enthought.com/products/epd_free.php)为了运行 ipython 的 Qt 控制台，我还使用自制软件（brew install pyqt）安装了 PyQt。

事实证明，PyQt 是为 64 位架构编译的，这与我的 Enthought 发行版不兼容。Enthought 实际上警告不要使用他们的 64 位发行版，因为缺少 wxPython。

有没有办法为 32 位编译 PyQt？

# objective-c - @property 声明属性的顺序是否有公认的约定？

> ID：13162277
> 
> 赞同：10
> 
> 时间：2012-10-31T16:13:18.873
> 
> 标签：objective-c, properties

我倾向于按以下顺序声明我的属性属性：可写性、Setter 语义、原子性

例如：

```
@property (readwrite, strong, nonatomic) NSString *foo; 
```

我只是想知道 Objective-C 开发人员是否有一个普遍接受的约定？[苹果的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17)似乎对此保持沉默。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T16:34:14.667

不。

您将看到代码，甚至来自 Apple，它们以不同的顺序声明。它对编译器没有任何影响，并且由于它们的数量不多，因此也不一定会使代码更易于阅读。

使用您喜欢的任何约定（包括不约定）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-18T01:40:28.550

下面是clang对应的源码。Xcode 可以根据枚举顺序生成代码。所以我认为**这个属性没有完全约定的顺序**。

```
/// Represents one property declaration in an Objective-C interface.
///
/// For example:
/// \code{.mm}
/// \@property (assign, readwrite) int MyProperty;
/// \endcode
class ObjCPropertyDecl : public NamedDecl {
  public:
  enum PropertyAttributeKind {
    OBJC_PR_noattr    = 0x00,
    OBJC_PR_readonly  = 0x01,
    OBJC_PR_getter    = 0x02,
    OBJC_PR_assign    = 0x04,
    OBJC_PR_readwrite = 0x08,
    OBJC_PR_retain    = 0x10,
    OBJC_PR_copy      = 0x20,
    OBJC_PR_nonatomic = 0x40,
    OBJC_PR_setter    = 0x80,
    OBJC_PR_atomic    = 0x100,
    OBJC_PR_weak      = 0x200,
    OBJC_PR_strong    = 0x400,
    OBJC_PR_unsafe_unretained = 0x800,
    /// Indicates that the nullability of the type was spelled with a
    /// property attribute rather than a type qualifier.
    OBJC_PR_nullability = 0x1000,
    OBJC_PR_null_resettable = 0x2000,
    OBJC_PR_class = 0x4000
    // Adding a property should change NumPropertyAttrsBits
  };

  enum {
    /// Number of bits fitting all the property attributes.
    NumPropertyAttrsBits = 15
  };
  /* Omitted */
}; 
```

# ruby - 有没有办法在类被实例化后销毁 *self*？

> ID：13162283
> 
> 赞同：3
> 
> 时间：2012-10-31T16:13:29.980
> 
> 标签：ruby, destructor, instantiation

> **可能重复：**
> [Ruby 中的对象销毁通知](https://stackoverflow.com/questions/156248/notification-of-object-destruction-in-ruby)
> [Ruby：析构函数？](https://stackoverflow.com/questions/5956067/ruby-destructors)

*#initialize*在实例化类时启动函数。只是想知道是否有*#uninitialize*函数。例如：

```
class Something
  def initialize
    @browser = Watir::Browser.new :chrome #opens browser
  end

  def stuff(url)
    @browser.goto url
  end

  def uninitalize
    @browser.quit #close browser
  end
end

s = Something.new
s.stuff("google.ca") 
```

在这种情况下，浏览器将被初始化函数打开。有没有办法自动退出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:32:49.163

### Ruby 终结器并不是真正的析构函数

虽然您可以为 Ruby 对象定义[终结](http://www.ruby-doc.org/core-1.9.3/ObjectSpace.html#method-c-define_finalizer)器，但它们本身并不是真正的析构函数。事实上，它们直到对象被销毁*后才会被触发。*文档说：

> define_finalizer(obj, aProc=proc())
> 添加 aProc 作为终结器，在 obj 被销毁后调用。

### 重新考虑你的方法

与其使用#new 来实例化您的浏览器实例，不如考虑一个更像是这样的模式：

```
class Something
  attr_accessor :browser

  def start_browser
  end

  def quit_browser
  end
end

s = Something.new
s.start_browser
s.quit_browser 
```

其他模式也是可能的，包括在对象中设置回调或计时器。归根结底，关键是对象应该超出范围并被垃圾收集——它们实际上不能自我毁灭。

# django - 在 2 个 django 项目之间传递 ImageField

> ID：13162288
> 
> 赞同：0
> 
> 时间：2012-10-31T16:13:52.247
> 
> 标签：django, django-models, django-orm

我有 2 个 django 项目，它们有一些公用表。

为了能够从其中一个项目访问这些表之一，我正在使用数据库路由 => 解决了数据库通信的问题。

但我不知道如何在项目之间传输文件。

我试过这个：

```
photo = ContentFile(default_db_object.photo.file.read())
distant_db_object.photo.save("test_name.jpeg", photo, save=True)
# Tried to save just in case, even if it's already done above
distant_db_object.save() 
```

我还尝试了此代码的第二行：

```
distant_db_object.photo.save("test_name.jpeg", default_db_object.photo, save=True) 
```

*   default_db_object ：是我当前项目中的模型对象
*   远程数据库对象：是我*远程*项目的模型对象

我想我仍然不了解 django 中整个文件存储逻辑之外的逻辑（是的，我已经阅读了文档）。

# monodevelop - 插件是否支持在同一解决方案中创建 2 个新项目？

> ID：13162289
> 
> 赞同：0
> 
> 时间：2012-10-31T16:14:03.853
> 
> 标签：monodevelop, add-in

以同样的方式，Visual Studio 上的新 XNA 项目在同一个解决方案中创建 2 个不同的项目（游戏本身和一个内容项目），我想知道 MonoDevelop 是否支持类似的行为。

提前致谢！

**编辑**

问题不是从想要将 2 个不同项目添加到同一个解决方案的用户的角度来看，也不是它在树视图上呈现的方式，而是关于如何使用 MonoDevelop 项目模板（.xpt.xml 等on) 是否可以同时创建 2 个项目，而不是像默认情况下那样只创建一个。

再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T23:12:56.057

我假设您在问是否有可能有一个项目有另一个项目作为其子项目，例如 XNA 内容项目是 XNA 项目的子项目。

我看了看文件格式，看起来 contentproj 项目实际上就像任何其他引用的项目一样，只是经过精心伪装。XNA 内容项目与任何其他项目一样包含在解决方案中，并且解决方案中的 XNA 项目具有对 XNA 内容项目的项目引用。唯一不同的是它在解决方案树中的显示方式。

因此，要使其*工作*，您必须为内容项目和 xna 项目实现 msbuild 目标，并编写新的项目类型以允许 MD 加载和保存内容项目和 xna 项目，然后是 MD 现有的加载/构建/保存机制和模板机制可以正常工作。

为了使解决方案树*看起来*像在 VS 中所做的那样，您必须编写几个节点构建器和节点构建器扩展来覆盖解决方案树中事物的显示方式：

1.  直接在解决方案下显示时隐藏内容项目
2.  在引用它的任何项目下注入内容项目
3.  隐藏对内容项目的任何项目引用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:09:21.490

我理解项目模板（[http://monodevelop.com/How_to_extend_the_Project_Model#Create_a_project_template_3](http://monodevelop.com/How_to_extend_the_Project_Model#Create_a_project_template_3)）上的 MD 文档的方式，看起来你只需要在解决方案元素中声明几个不同的项目。

# google-sheets - 计算数组中所有值的总和大于另一个单元格中的值

> ID：13162291
> 
> 赞同：3
> 
> 时间：2012-10-31T16:14:24.107
> 
> 标签：google-sheets, google-sheets-formula

我完全了解`sumif()`Google 表格中的功能。

```
A   B  

1  15  
2  20  
2  10  
3  30  
5  45  
1  10 
```

当我想计算数组中小于 3 的所有值的总和时，我可以使用 SUMIF(A:A;"<3";B:B) 。在查找等于另一个单元格值（C1）的所有值时，我可以使用

```
=SUMIF(A:A;C1;B:B). 
```

但是我找不到一种方法来计算所有单元格值的所有值的总和，然后 C1 中的单元格值`SUMIF(A:A;<C1,B:B)`不起作用。我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T02:52:46.703

将 B:B 中与 A:A 中小于 C1 中的值的值相对应的所有值相加：

`=SUMIF(A:A;"<"&C1;B:B)`

# c - 在C中四舍五入

> ID：13162292
> 
> 赞同：0
> 
> 时间：2012-10-31T16:14:24.683
> 
> 标签：c, rounding

我在 int 中有一个数字 (00-59)，我想将其四舍五入为 5，例如 06 是 5，08 是 10。哦，07 也是 10。我该怎么做?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T16:18:44.297

您可以使用以下代码。

```
int round_5(int num)
{
   int t1;
   t1= num%5;
   if(t1>=2)
      num+=(5-t1);
   else
      num-=t1;
   return num;
}

main()
{
   int num = 57;
   num = round_5(num);
   printf("%d",num);
   return 0;
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T16:19:07.393

如果你想编写自己的轮函数，这里应该可以工作：

```
int round(int number, int round_by)
{
    int whole = number / round_by;
    char superior = ((number % round_by) >= (round_by / 2)) ? 1 : 0;
    return (whole + superior) * round_by;
}

int main()
{
    printf("%d\n", round(6, 5)); // 5
    printf("%d\n", round(7, 5)); // 10
    printf("%d\n", round(8, 5)); // 10
    printf("%d\n", round(33, 10)); // 30
    printf("%d\n", round(33, 5)); // 35
} 
```

您可以将 5 替换为您想要的每个数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T16:20:32.313

使用公式

```
rounded = (number / 5) * 5;
if ((number % 5) > 1)
  rounded += 5; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T16:17:46.930

这不是 C 特定的，但想法是一样的：

```
func roundToNearest(num someNumber, num roundToNearest)
{
    return (round(someNumber / roundToNearest) * roundToNearest);
} 
```

当然，这只是伪代码，在 C 语言的情况下，您需要转换为单曲才能从中获得任何有用的东西。

在 c 的情况下，round 来自`math.h`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T16:17:50.397

如果您愿意深入研究浮点领域，可以执行以下操作：

```
int rounded = (int)(round((float)input / 5) * 5); 
```

确保你`#include <math.h>`. 请参阅[此 ideone 示例](http://ideone.com/BIMwwv)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T16:18:41.457

查表怎么样

int 分钟 [60] = { 0,0,0,5,5,5,5,5,10,10,10, ... };

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-31T16:19:28.273

这应该有效：

```
unsigned int round5(unsigned int n)
{
    return ((n + 2) / 5) * 5;
} 
```

（假设`+ 3`你想将 7 向上取整，尽管这看起来不自然。）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-31T18:01:29.143

您可以使用以下代码：

```
//no -> number  ro -> round off to
//ro = 5 in your case
int no, ro;
if(no%ro >= 2)
    no = ((no/ro)+1)*ro;
else
    no = (no/ro)*ro; 
```

希望能帮助到你 ！！

# design-patterns - SVG 模式：使用视图框的相对坐标。Firefox中的问题

> ID：13162296
> 
> 赞同：0
> 
> 时间：2012-10-31T16:14:33.313
> 
> 标签：design-patterns, svg

我的 SVG 中必须有相对坐标的模式有问题。起初，我使用了 patternContentUnits = "objectBoundingBox"，这似乎适用于所有现代浏览器。但是，我想使用 Batik Rasterizer 允许用户将 SVG 转换为 PDF 和/或 PNG，而 Batik Rasterizer 似乎不支持 patternContentUnits = "objectBoundingBox for SVG 到 PDF 的转换。

```
<pattern id="Pattern2" x="0" y="0" width="1" height="1" patternContentUnits="objectBoundingBox">
<rect x="0.1" y="0" width="0.33" height="1" style="fill:rgb(39,80,215)"/>
<rect x="0.49" y="0" width="0.47" height="1" style="fill:rgb(11,198,221)"/>
</pattern> 
```

作为替代方案，我发现了一个互联网帖子，其中他们使用 viewBox="0 0 1 1" preserveAspectRatio="none" 而不是 patternContentUnits = "objectBoundingBox"。该解决方案在 Chrome、IE9 以及 Batik Rasterizer (!) 中运行良好。但是，它在 Firefox (14) 中不起作用。

我在网上放了一个小例子：http: [//mgcv.cmbi.ru.nl/example.svg](http://mgcv.cmbi.ru.nl/example.svg)
（第一个适用于 Chrome、IE9 和 Batik Rasterizer，但不适用于 FF14。第二个适用于 Chrome、IE9 和FF14 但不在 Batik Rasterizer 中（PDF 转换）

有人有建议吗？在我看来，应该可以让 viewbox 解决方案在 Firefox 中运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:42:33.763

这应该在当前处于[Beta](http://www.mozilla.org/en-US/firefox/beta/)的 Firefox 17 中得到修复。有关详细信息，请参阅[错误 773467](https://bugzilla.mozilla.org/show_bug.cgi?id=773467)和[错误 773595](https://bugzilla.mozilla.org/show_bug.cgi?id=773595)。

# cookies - 无法发送会话缓存限制器 - 标头已发送

> ID：13162313
> 
> 赞同：2
> 
> 时间：2012-10-31T16:15:52.460
> 
> 标签：cookies

我搜索了这个主题，但没有找到与我的问题完全匹配的内容。所以今天，当我访问我的网站时，它会显示以下消息。

> 警告：session_start() [function.session-start]: open(/home/content/49/8781249/html/wp-content/uploads/car-rental/sessions//sess_1r5d6a959f02404mim9mt8di65, O_RDWR) 失败：文件太大 (27 ) 在第 15 行的 /home/content/49/8781249/html/wp-content/themes/car-rental/system/libraries/session.php
> 
> 警告：session_start() [function.session-start]：无法发送会话 cookie - 标头已由（输出开始于 /home/content/49/8781249/html/wp-content/themes/car-rental/system/libraries /session.php:15) 在第 15 行的 /home/content/49/8781249/html/wp-content/themes/car-rental/system/libraries/session.php
> 
> 警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 标头已发送（输出开始于 /home/content/49/8781249/html/wp-content/themes/car-rental/system/libraries /session.php:15) 在第 15 行的 /home/content/49/8781249/html/wp-content/themes/car-rental/system/libraries/session.php

昨天一切都很好。我也无法登录我的 WP 网站。

谁能帮我解决这个问题？

# maps - 如何使用 API 密钥进行谷歌地理编码请求（v3 javascript API）

> ID：13162315
> 
> 赞同：3
> 
> 时间：2012-10-31T16:16:04.313
> 
> 标签：maps, geocode, limits

使用我的 api 密钥进行地理编码请求时，我一直被拒绝访问。没有钥匙也能正常工作，但限制我每天 2500 次。这是我使用的示例查找：

[http://maps.googleapis.com/maps/api/geocode/json?key=YOUR_KEY_HERE&sensor=false&address=1600+Amphitheatre+Parkway,+Mountain+View,+CA](http://maps.googleapis.com/maps/api/geocode/json?key=YOUR_KEY_HERE&sensor=false&address=1600+Amphitheatre+Parkway,+Mountain+View,+CA)

# facebook-graph-api - 读取 facebook 状态并将其存储在 mysql 中

> ID：13162321
> 
> 赞同：0
> 
> 时间：2012-10-31T16:16:46.067
> 
> 标签：facebook-graph-api, facebook-fql, facebook-php-sdk

我正在尝试阅读用户的所有状态消息。我使用了以下代码。

```
//gets statusid, message and uid of the user
function get_status_message($access_token){
    // Run fql query
  $fql_query_url = 'https://graph.facebook.com/'
    . '/fql?q=SELECT+message+,+status_id+,+uid+FROM+status+WHERE+uid=me()'
    . '&access_token=' . $access_token;
  $fql_query_result = file_get_contents($fql_query_url);
  $fql_query_obj = json_decode($fql_query_result, true);

  //display results of fql query
  echo '<pre>';
  print_r("query results:");
  print_r($fql_query_obj);
  echo '</pre>';
  return $fql_query_obj;
} 
```

它返回以下内容

```
query results:Array
(
    [data] => Array
        (
            [0] => Array
                (
                    [message] => test3
                    [status_id] => 5.0606879274642E+14
                    [uid] => 1.0000029926744E+14
                )

            [1] => Array
                (
                    [message] => test2
                    [status_id] => 5.060443560822E+14
                    [uid] => 1.0000029926744E+14
                )

            [2] => Array
                (
                    [message] => testing !
                    [status_id] => 5.0304255638238E+14
                    [uid] => 1.0000029926744E+14
                )

        )

) 
```

我必须检索状态 ID 并将其放入 mysql db。我尝试了 foreach 但我无法循环。下面的代码有效

但我需要将第一个索引值明确指定为 $value* *[0]* *["status_id"]。有人可以帮忙吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T20:11:08.607

您需要检查 Facebook 调用是否实际检索到数据供您处理，然后遍历结果并插入到您的数据库中，例如：

```
if(!empty($fql_query_obj['data'])) {
    foreach($fql_query_obj['data'] as $status) {
        $status_id = $status['status_id'];
        // create SQL insert batch
    }
    // Run the insert batch
} 
```

# spring - 我如何在spring应用程序中读取保存在xml中的对象集合

> ID：13162322
> 
> 赞同：0
> 
> 时间：2012-10-31T16:16:47.153
> 
> 标签：spring, spring-mvc

我在 xml 中有一组静态数据，例如

```
<books>
  <book id="isbn-1"> 
    <name>name1</name>
    <author>athorname</author>
  </book>
  <book id="isbn-2"> 
    <name>name1</name>
    <author>athorname</author>
  </book>
</books> 
```

我想阅读它们并将它们加载到 Book 模型对象中，就像它们在 DB 中一样。

给定一个 isbn 我想解析这个 xml 并加载相应的对象等。

我可以实现此目的的一种方法是将其作为列表加载到内存中。
另一种方法可能是将每本书存储在不同的 xml 中，并将 isbn 作为 xml 名称并加载它。

一 - 如果列表很大，则不起作用。
二 - 创建大量文件且难以管理。

有没有其他方法可以使用 spring-framework 或任何其他 java 库来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:59:11.527

JAXB + StAX 这个问题/问题与弹簧正交

# vb.net - Linq中的多列左外连接

> ID：13162323
> 
> 赞同：0
> 
> 时间：2012-10-31T16:16:49.177
> 
> 标签：vb.net, linq, outer-join

有人可以帮我完成这个 linq 左外连接查询，以便右表的第二列 (tempData) 包含在结果集中，即使它可能为空？

```
sortedData = From cs In mbCustomSort
             Order By cs(0)
             Group Join entry In tempData On cs(joinColumn) Equals entry(0) Into Group
             From last In Group.DefaultIfEmpty _
             Select New With {.groupField = cs(joinColumn)} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:54:55.837

抱歉，我用 C# 编写，但是如何：

```
var sortedData = from cs in mbCustomSort orderby cs.JoinColumn
    join entry in tempData on cs.JoinColumn equals entry.OtherJoinColumn into Group
    from subentry in Group.DefaultIfEmpty()
    select new { groupField = cs.JoinColumn }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:11:27.057

LINQPad 的默认处理不允许，因此我在从[此处](https://stackoverflow.com/q/12668630/256431)`item(fieldno)`重新调整用途的数据中使用了实际字段名称，包括在 in 中添加一个没有对应的新行。这对我有用：`Mbc``OrderId``Mbtd`

```
From cs In Mbcs _
Order By cs.Catalogid _
Group Join entry In mbtds On cs.OrderId Equals entry.OrderId Into Group _
From last In Group.DefaultIfEmpty _
Select cs.OrderId, last.Ocardtype 
```

“作品”是指我添加的行显示为*空* `Ocardtype`（以及`Ocardtype`已经存在的另一行`null`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T21:12:00.677

（已编辑）

将`From last In Group`外连接变为内连接。`Group`当您继续使用变量时，不会发生这种情况：

```
sortedData = From cs In mbCustomSort
     Order By cs(0)
     Group Join entry In tempData On cs(joinColumn) Equals entry(0) Into Group
     Select New With {.groupField = cs(joinColumn), 
                      .col2 = Group(1).RightColumn } 
```

`RightColumn`通过“内存查询”对象的属性进行更改。

# c# - C#从串口连续读取

> ID：13162325
> 
> 赞同：0
> 
> 时间：2012-10-31T16:16:54.173
> 
> 标签：c#

我正在尝试使用 C# 连续读取从 arduino 发送到串行端口的数据并将其显示在某处。最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:19:58.770

这在很大程度上取决于您的业务规则（我们没有），但总的来说，我发现尝试连续阅读充满了问题并导致不必要的复杂性。[处理DataReceived](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.datareceived.aspx)事件通常会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:18:54.343

你可以试试`SerialPort.ReadLine method`

链接：http: [//msdn.microsoft.com/en-us/library/system.io.ports.serialport](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport)

```
 var serialPort = new SerialPort();

    // Allow the user to set the appropriate properties.
    serialPort.PortName = ..;
    serialPort.BaudRate = ..;
    serialPort.Parity = ..;
    serialPort.DataBits = ..;
    serialPort.StopBits = ..;
    serialPort.Handshake = ..;

    string message = serialPort.ReadLine(); 
```

# spring - 使用 Spring 管理 JMS 事务

> ID：13162326
> 
> 赞同：4
> 
> 时间：2012-10-31T16:16:56.700
> 
> 标签：spring, jboss, jms, hornetq, spring-jms

我正在尝试使用 Spring 和 HornetQ 管理 JMS 事务。
这是我写的代码：

```
public void receive() {
    TransactionStatus status = transactionManager.getTransaction(new DefaultTransactionDefinition());
    Message msg = jmsTemplate.receive(queue);
    boolean success = false;
    if (msg != null) {
            try {
               success = handleMessage(msg);
               if (success) { 
                   msg.acknowledge(); // session is still open within the transaction
               }
            } catch (JMSException e) {
                transactionManager.rollback(status);
            }
            if (success)
                transactionManager.commit(status);
            else
                transactionManager.rollback(status):
    }
} 
```

我正在从队列中进行同步读取，超时设置为 0，因为我不想阻止读取。因此，我必须检查是否确实收到了某些东西。

这是我的**applicationContext.xml**的摘录：

```
<bean id="inVMConnectionFactory" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName">
        <value>java:/ConnectionFactory</value>
    </property>
</bean>

<bean id="cachedConnectionFactory" class="org.springframework.jms.connection.CachingConnectionFactory">
    <property name="targetConnectionFactory" ref="inVMConnectionFactory" />
</bean>

<bean id="producer" class="it.ubiquity.gestoreprofilazione.onweb.OnWebProducer" scope="singleton">
    <property name="queue" ref="retryQueue" />
    <property name="connectionFactory" ref="cachedConnectionFactory" />
</bean>

<bean id="jmsTemplate" class="org.springframework.jms.core.JmsTemplate">
    <property name="connectionFactory" ref="cachedConnectionFactory" />
    <property name="sessionTransacted" value="true" />
    <property name="sessionAcknowledgeMode" value="#{T(javax.jms.Session).CLIENT_ACKNOWLEDGE}" />
    <property name="pubSubDomain" value="false" />
    <property name="receiveTimeout" value="#    {T(org.springframework.jms.core.JmsTemplate).RECEIVE_TIMEOUT_NO_WAIT}" />
</bean>

<bean id="jmsTransactionManager" class="org.springframework.jms.connection.JmsTransactionManager">
    <property name="connectionFactory" ref="cachedConnectionFactory" />
</bean>

<bean id="consumer" class="it.ubiquity.gestoreprofilazione.onweb.OnWebConsumer" scope="singleton">
    <property name="queue" ref="retryQueue" />
    <property name="jmsTemplate" ref="jmsTemplate" />
    <property name="transactionManager" ref="jmsTransactionManager" />
</bean> 
```

我遇到的问题很奇怪：第一次收到消息，handleMessage失败，所以我回滚事务。然后没有更多的事情发生。如果我检查 JMX 控制台，我可以看到队列中有一条消息。现在，如果我重新启动 JBoss，消息会按预期一次又一次地接收。
也许我的配置有问题，但为什么它在重新启动后工作？

*   大黄蜂 2.2.10
*   JBoss 5.1.0
*   春天 3.1.2

**更新**
启用调试后，我第一次看到：

> 调试 [org.springframework.jms.connection.JmsTransactionManager] (baseScheduler-1) 创建名称为 [null] 的新事务：PROPAGATION_REQUIRED,ISOLATION_DEFAULT

在第一次回滚之后，在随后的接收和回滚中，我看到：

> DEBUG [org.springframework.jms.connection.JmsTransactionManager] (baseScheduler-1) 参与现有事务

相反，在重新启动 JBoss 后，我读到事务实际上已回滚：

> DEBUG [org.springframework.jms.connection.JmsTransactionManager] (baseScheduler-1) 启动事务回滚 2012-11-05 09:54:14,436 DEBUG [org.springframework.jms.connection.JmsTransactionManager] (baseScheduler-1) 回滚 JMS会话上的事务

那么，为什么回滚不是第一次发生，而一旦我重新启动服务器，它就会一直发生？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T10:12:47.457

好的，我终于理解了我的错误:) 在外部 if's else 我应该**提交**交易。这就是该机制在重新启动 JBoss 后起作用的原因：没有事务挂起。

# objective-c - RubyMotion 中的 UINavigationBar 外观不起作用

> ID：13162329
> 
> 赞同：4
> 
> 时间：2012-10-31T16:17:07.117
> 
> 标签：objective-c, ios, ios5, rubymotion

我正在尝试自定义 RubyMotion 应用程序中的导航栏，但似乎无法更改标题文本字体或颜色。我可以设置背景图像和色调，但不能设置标题属性。

```
class AppDelegate
  def application(application, didFinishLaunchingWithOptions:launchOptions)

    @window = UIWindow.alloc.initWithFrame(UIScreen.mainScreen.bounds)

    navigationBar = UINavigationBar.appearance
    #navigationBar.setBackgroundImage(UIImage.imageNamed('navigation-bar-background.png'), forBarMetrics: UIBarMetricsDefault)
    #navigationBar.setTintColor(UIColor.greenColor)
    navigationBar.setTitleTextAttributes({
      UITextAttributeFont: UIFont.fontWithName('Trebuchet MS', size:24),
      UITextAttributeTextShadowColor: UIColor.colorWithWhite(0.0, alpha:0.4),
      UITextAttributeTextColor: UIColor.blueColor
    })
    puts navigationBar.titleTextAttributes.inspect

    @window.rootViewController = UINavigationController.alloc.initWithRootViewController(MainMenuController.alloc.init)
    @window.rootViewController.wantsFullScreenLayout = true
    @window.makeKeyAndVisible

    true
  end
end 
```

控制台输出显示了这个检查语句：

```
{:UITextAttributeFont=>#<UICFFont:0x963aa70>,
 :UITextAttributeTextShadowColor=>UIColor.color(0x0, 0.0),
 :UITextAttributeTextColor=>UIColor.blueColor} 
```

所以看起来一切都设置正确，但我得到的只是带有白色文本的标准蓝色导航栏。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-31T20:00:28.673

`UITextAttributeFont`等是实际的常量，但是当您在较新的 Ruby 1.9 样式的哈希分配中使用它们时，它会将它们转换为符号。

解决此问题的最简单方法是使用较旧的哈希火箭分配样式（确保不要在 UIText... 项目前面放置冒号）：

```
navigationBar.setTitleTextAttributes({
  UITextAttributeFont => UIFont.fontWithName('Trebuchet MS', size:24),
  UITextAttributeTextShadowColor => UIColor.colorWithWhite(0.0, alpha:0.4),
  UITextAttributeTextColor => UIColor.blueColor
}) 
```

# wordpress - wordpress 列表用户角色

> ID：13162330
> 
> 赞同：6
> 
> 时间：2012-10-31T16:17:07.090
> 
> 标签：wordpress

我正在研究一个 wordpress 项目并挖掘角色等。

我有以下代码，它基本上可以获得所有可用的角色：

```
<?php 
     global $wp_roles;
     $roles = $wp_roles->get_names();

     // Below code will print the all list of roles.
     print_r($roles);        
?> 
```

当我运行上面的代码时，我得到以下输出：

```
array ( [administrator] => Administrator [editor] => Editor [author] => Author [contributor] => Contributor [subscriber] => Subscriber [basic_contributor] => Basic Contributor  ) 
```

我希望将上面的内容从数组中剥离出来，变成一个无序列表。我将如何实现这一目标？

谢谢丹

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T17:13:49.363

您可以使用[foreach](http://php.net/manual/en/control-structures.foreach.php)循环来遍历数组中的每个角色。

```
<ul>
<?php foreach($roles as $role) { ?>
   <li><?php echo $role;?></li>
<?php }//end foreach ?>
</ul> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-11T11:08:40.990

**这是制作 wordpress 用户角色下拉列表的代码**

```
<?php global $wp_roles; ?>

<select name="role">
<?php foreach ( $wp_roles->roles as $key=>$value ): ?>
<option value="<?php echo $key; ?>"><?php echo $value['name']; ?></option>
<?php endforeach; ?>
</select> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-03T02:51:02.023

由于[l10n 函数不接受变量](http://ottopress.com/2012/internationalization-youre-probably-doing-it-wrong/)，[`translate_user_role()`](https://developer.wordpress.org/reference/functions/translate_user_role/)因此需要正确翻译角色名称。此外，使用[`wp_roles()`](https://developer.wordpress.org/reference/functions/wp_roles/)而不是全局变量`$wp_roles`是更安全的方法，因为它首先检查是否设置了全局变量，如果没有设置并返回它。

```
$roles = wp_roles()->get_names();

foreach( $roles as $role ) {
    echo translate_user_role( $role );
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-03T15:01:59.423

只是一个额外的信息。还有一个函数[wp_dropdown_roles()](https://developer.wordpress.org/reference/functions/wp_dropdown_roles/)为您提供作为选项 html 元素的角色。

```
<select>
   <?php wp_dropdown_roles(); ?>
</select> 
```

您还可以通过将角色 slug 作为参数传递来设置默认选定值。

```
<select>
   <?php wp_dropdown_roles( 'editor' ); ?>
</select> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-23T10:14:02.400

您想显示可用 WordPress 角色名称的选择列表。

```
$roles_obj = new WP_Roles();
$roles_names_array = $roles_obj->get_names();
echo '<select name="role">';
foreach ($roles_names_array as $role_name) {
    echo '<option>'.$role_name.'</option>';
}
echo '</select>'; 
```

# iphone - 如何知道谁是FirstResponder？

> ID：13162333
> 
> 赞同：2
> 
> 时间：2012-10-31T16:17:21.980
> 
> 标签：iphone, objective-c, xcode, uitableview

非常初学者**的 obj-c**问题。

是否有可能询问目前谁是第一响应者？我有一个 tableView 有四个自定义单元格，`textfield`每个单元格都有。[关联](http://uaimage.com/image/62f08045)

我从 1 标记`textFields`到 4。我需要实现在`textfields`按钮“**下一个**”和“**上一个**”之间切换的可能性。因此，例如，在按钮“**下一步**”的代码中，我需要这样的东西：

```
 if ([[txtfld.tag == 1] isFirstResponder) 
    {
     [[txtfld.tag == 2] becomeFirstResponder];
    } 
```

但是这段代码不起作用，因为我不知道如何从不可见的方法调用**textField**。解决这个问题是正确的思维方式，还是有更好的方法？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T16:36:51.437

您将需要参考您的`UITableViewCell`，然后您可以使用该`-viewWithTag`方法。例如`UITextField *textField = (UITextField *)[cell viewWithTag:1];`

然后你可以检查`[textField isFirstResponder];`

# c# - 为什么 BackgroundWorder DoWork 只捕获一些异常？

> ID：13162335
> 
> 赞同：0
> 
> 时间：2012-10-31T16:17:23.293
> 
> 标签：c#, backgroundworker

我知道它会`BackgroundWorker`吃未经处理的异常并将它们传递给`RunWorkerCompleted` `e.Error`属性，并且处理异常的正确方法是检查`e.Error != null`.

在`DoWork`事件的方法中，我有几个`try` `catch`块，但只有其中一些块在工作。如果`FailedOperationException`我的代码试图访问不可用的 dll 中的类，则会`FileNotFoundException`抛出一个不会被邻居`FileNotFoundException`或`Exception`捕获块捕获的类。取而代之的是，它`e.Error`属于`RunWorkerCompleted`.

为什么只捕获了一些异常？

代码：

```
 try
    {
        SqlConnection connection = new SqlConnection(Properties.Settings.Default.CharityConnectionString);
        String dataSource = connection.DataSource;

        if (((ActionType)e.Argument) == ActionType.Backup)
        {
            try
            {
                lblWait.Text = "Starting backup operation ...";
                ServerConnection serverConnection = new ServerConnection(dataSource);
                Server sqlServer = new Server(serverConnection); // The exception is thrown here
                String originalBackupPath = fileName;
                BackupDeviceItem backupDevice = new BackupDeviceItem(originalBackupPath, DeviceType.File);
                Backup backup = new Backup();
                backup.Action = BackupActionType.Database;
                backup.Database = "Charity";
                backup.Devices.Add(backupDevice);
                backup.Initialize = true;
                backup.Checksum = true;
                backup.ContinueAfterError = true;
                backup.Incremental = false;
                backup.LogTruncation = BackupTruncateLogType.Truncate;
                backup.SqlBackup(sqlServer);
                MessageBox.Show("Backup was successfull", "", MessageBoxButtons.OK, MessageBoxIcon.Information);
            }
            catch (FileNotFoundException ex) // this catch doesn't work for FileNotFoundException exceptions
            {
                MessageBox.Show("Error in operation" + ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
            catch (FailedOperationException)
            {
                MessageBox.Show("Access to the selected folder is denied", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
            catch (Exception) // and this catch doesn't work for FileNotFoundException, too
            {
                MessageBox.Show("Error in operation", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
        }
    }
    catch(Exception)
    {
        MessageBox.Show("Error in operation", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
    } 
```

`FileNotFoundException`带有消息“无法*加载文件或程序集。Microsoft.SqlServer.ConnectionInfo* ”仅显示在`e.Error`. 我知道如何通过私人安装程序集来解决此异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:55:26.397

我的猜测是你有错误的例外。你在看`InnerException`in`e.Error`吗？

此代码按预期工作：

```
using System;
using System.ComponentModel;
using System.IO;
using System.Threading;

class Program
{
    static void Main(string[] args)
    {
        BackgroundWorker worker = new BackgroundWorker();
        worker.DoWork += (s, e) =>
        {
            try
            {
                throw new FileNotFoundException();
            }
            catch (FileNotFoundException)
            {
                Console.WriteLine("FileNotFoundException caught");
            }
        };

        worker.RunWorkerCompleted += (s, e) =>
        {
            if (e.Error != null)
                Console.WriteLine("RunWorkerCompleted error is {0}", e);
        };

        worker.RunWorkerAsync();
        while (worker.IsBusy)
            Thread.Sleep(1);
    }
} 
```

# python - 嵌入 Python 3 - 没有内置函数？

> ID：13162344
> 
> 赞同：1
> 
> 时间：2012-10-31T16:17:56.523
> 
> 标签：python, python-3.x, embed, python-embedding

在大量脱发后，我正在寻求帮助。

我将 Python 3.3 嵌入到一个简单的应用程序中。一个不寻常的方面是 Python 不在路径上，但似乎一切正常。但是由于某种原因，什么都不能执行。

下面是一个显示错误的小示例程序：

**编辑**：我知道引用计数是可怕的——这只是一个简单的例子。

```
SetDllDirectory(L"D:\\dev\\python\\python33"); //so Python33.dll can be delay-loaded since not in the path

Py_Initialize();
PyObject* pGlobals = PyDict_New();
if (PyDict_GetItemString(pGlobals, "__builtins__") == NULL) 
{
    PyObject* pMod = PyImport_ImportModule("builtins"); <-- always succeeds
    if(NULL != pMod)
        PyDict_SetItemString(pGlobals, "__builtins__", pMod);
}

PyObject* pResult = PyRun_String("import sys", 0, pGlobals, pGlobals); <-- always fails

if (PyErr_Occurred()) 
{
    //PyErr_Fetch returns:
    //<class 'SyntaxError'>  
    //('invalid syntax', ('<string>', 1, 6, 'import sys'))
} 
```

我尝试了多种方式来导入和定义内置函数，包括如下所示的各种尝试：

```
PyObject* pMod = PyImport_ImportModule("builtins");
PyDict_SetItemString(pGlobals, "builtins", pMod);
PyDict_SetItemString(pGlobals, "__builtins__", pMod);

PyDict_SetItemString(pGlobals, "__builtins__", PyEval_GetBuiltins());
PyDict_SetItemString(pGlobals, "builtins", PyEval_GetBuiltins()); 
```

它们都不起作用-每个错误都相同。

我究竟做错了什么？它与路径有关吗？关于我做错的内置函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:42:26.300

尝试将开始符号设置为[`Py_file_input`](http://docs.python.org/3/c-api/veryhigh.html#Py_file_input)并使用[`PyEval_GetBuiltins`](http://docs.python.org/3/c-api/reflection.html#PyEval_GetBuiltins).

编辑：要设置的正确 dict 键是`"__builtins__"`.

# spring - Spring 属性文件中的转义属性引用

> ID：13162346
> 
> 赞同：15
> 
> 时间：2012-10-31T16:17:56.943
> 
> 标签：spring, properties, escaping, curly-braces

我想转义我的 Spring 属性文件以获取我的 bean 属性：`${ROOTPATH}/relativePath`

我有一个简单的 Spring 配置文件，其中包含：

```
<context:property-placeholder location="classpath:myprops.properties" />

<bean id="myBean" class="spring.MyBean">
    <property name="myProperty" value="${myproperty}" />
</bean> 
```

`myprops.properties`包含：

```
myproperty=\${ROOTPATH}/relativePath 
```

上述设置返回：*无法解析占位符 'ROOTPATH'*。我尝试了很多可能的语法，但找不到正确的语法。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-01-22T18:35:41.327

而不是`${myproperty}`使用`#{'$'}{myproperty}`. 只需替换`$`为`#{'$'}`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-21T02:45:04.927

似乎到目前为止，这是无法逃脱的`${}`，但是您可以尝试以下配置来解决问题

```
dollar=$

myproperty=${dollar}{myproperty} 
```

myproperty 的结果将`${myproperty}`在评估之后。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-22T13:23:14.840

[这](https://jira.spring.io/browse/SPR-4953)是一张要求逃避支持的 Spring 票（在撰写本文时仍未解决）。

使用的解决方法

```
$=$
myproperty=${$}{ROOTPATH}/relativePath 
```

确实提供了解决方案，但看起来很脏。

在 Spring Boot 1.5.7 中使用 SPEL 表达式`#{'$'}`对我不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-19T14:56:00.180

虽然它有效，但逃避占位符是超级丑陋的。

我实现了我的覆盖`PropertySourcesPlaceholderConfigurer.doProcessProperties`并使用自定义`StringValueResolver`

```
 public static class CustomPropertySourcesPlaceholderConfigurer extends PropertySourcesPlaceholderConfigurer {

    @Override
    protected void doProcessProperties(ConfigurableListableBeanFactory beanFactoryToProcess, StringValueResolver valueResolver) {
        StringValueResolver customValueResolver = strVal -> {
            if(strVal.startsWith("${something.")) {
                PropertySourcesPropertyResolver customPropertySourcesPropertyResolver = new PropertySourcesPropertyResolver(this.getAppliedPropertySources());
                String resolvedText = customPropertySourcesPropertyResolver.resolvePlaceholders(strVal);

                //remove the below check if you are okay with the property not being present (i.e remove if the property is optional)
                if(resolvedText.equals(strVal)) {
                    throw new RuntimeException("placeholder " + strVal + " not found");
                }
                return resolvedText;
            }
            else {
                //default behaviour
                return valueResolver.resolveStringValue(strVal);
            }
        };
        super.doProcessProperties(beanFactoryToProcess, customValueResolver);
    }
} 
```

将其插入应用程序

```
@Configuration
public class PlaceHolderResolverConfig
{
  @Bean
  public static PropertySourcesPlaceholderConfigurer placeHolderConfigurer() {
     PropertySourcesPlaceholderConfigurer placeHolderConfigurer = new CustomPropertySourcesPlaceholderConfigurer();
     placeHolderConfigurer.setLocation(new ClassPathResource("application.properties"));

     return placeHolderConfigurer;
  }
} 
```

在上面的示例中，对于所有以嵌套占位符开头的属性都`something.*`不会被解析..`if(strVal.startsWith("${something."))`如果您想要所有属性的行为，请删除检查

# postgresql - 使用 WiX 安装程序安装 PostGreSql

> ID：13162347
> 
> 赞同：0
> 
> 时间：2012-10-31T16:18:03.743
> 
> 标签：postgresql, installation, wix, embedded-resource

我正在尝试使用我的 WiX 安装程序部署 PostGreSqlServer，但它只是一直失败，我不知道为什么。

我的 wxs 文件的重要部分：

```
<Binary SourceFile="postgresql-9.2.1-1-windows.exe" Id="PostGreInstaller"  />

<CustomAction  Id="InstallPostGre" BinaryKey="PostGreInstaller"
               ExeCommand='"--serverport 5432 --servicename postgres_service --locale C --superaccount Myadmin --superpassword Mypassword --unattendedmodeui minimal --debuglevel 2 --mode unattended"'
               Execute="deferred" Return="check"   Impersonate="yes" />

<InstallExecuteSequence>
  <Custom Action="InstallPostGre" Before="InstallFinalize" />
</InstallExecuteSequence> 
```

已经在 cmd shell 中尝试过该命令并且它有效。不要为什么它不在安装程序中。

我确定安装程序已嵌入安装程序，因为它有超过 50MB。

我也启动了我的 msi 并打开了日志记录，但这也没有真正帮助我......

```
Action 16:34:29: InstallPostGre. 
MSI (s) (64:E0) [16:34:29:407]: Executing op: CustomActionSchedule(Action=InstallPostGre,ActionType=1026,Source=BinaryData,Target=--serverport 5432 --servicename postgres_service --locale C --superaccount Myadmin --superpassword Mypassword --unattendedmodeui minimal --debuglevel 2 --mode unattended,)
MSI (s) (64:E0) [16:34:31:698]: Note: 1: 1721 2: InstallPostGre 3: C:\Windows\Installer\MSIE410.tmp 4: --serverport 5432 --servicename postgres_service --locale C --superaccount Myadmin --superpassword Mypassword --unattendedmodeui minimal --debuglevel 2 --mode unattended 
MSI (s) (64:E0) [16:34:31:698]: Note: 1: 2205 2:  3: Error 
MSI (s) (64:E0) [16:34:31:698]: Note: 1: 2228 2:  3: Error 4: SELECT `Message` FROM `Error` WHERE `Error` = 1721 
Error 1721\. There is a problem with this Windows Installer package. A program required for this install to complete could not be run. Contact your support personnel or package vendor. Action: InstallPostGre, location: C:\Windows\Installer\MSIE410.tmp, command: --serverport 5432 --servicename postgres_service --locale C --superaccount Myadmin --superpassword Mypassword --unattendedmodeui minimal --debuglevel 2 --mode unattended 
MSI (s) (64:E0) [16:34:34:717]: Note: 1: 2205 2:  3: Error 
MSI (s) (64:E0) [16:34:34:717]: Note: 1: 2228 2:  3: Error 4: SELECT `Message` FROM `Error` WHERE `Error` = 1709 
MSI (s) (64:E0) [16:34:34:717]: Product: Hausverwaltung -- Error 1721\. There is a problem with this Windows Installer package. A program required for this install to complete could not be run. Contact your support personnel or package vendor. Action: InstallPostGre, location: C:\Windows\Installer\MSIE410.tmp, command: --serverport 5432 --servicename postgres_service --locale C --superaccount Myadmin --superpassword Mypassword --unattendedmodeui minimal --debuglevel 2 --mode unattended 
```

那里有 WiX 大师吗？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T08:48:25.533

这不起作用的最可能原因是 postgres exe 已经包含一个 msi，并且您在创建事务时一次只能安装一个 msi，并且（目前我听说计划更改此设置）您只能运行一个事务一次。正如前面的答案所述，您可以使用刻录包将两个安装程序打包在一起，从而获得无缝的用户体验。您还可以通过注册表搜索检查您是否真的需要安装 postgres。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T22:29:12.710

您可以使用 WIX v3.6 Bundle 概念来处理这个问题。你可以在这里阅读更多关于它的信息[http://wix.sourceforge.net/manual-wix3/authoring_bundle_intro.htm](http://wix.sourceforge.net/manual-wix3/authoring_bundle_intro.htm)

基本上，您将 WIX MSI 和 EXE 打包成一个 WIX 捆绑包，然后可以将其安装到目标机器上。

或者您可以编写可以通过 CustomActions 执行的脚本，例如您尝试过的 EXECCommand。但我更愿意使用 Bundle，因为它以更好的方式管理卸载和升级。所以试试 WIX 捆绑包，看看效果如何。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T05:10:13.120

只要关闭 Windows 用户访问控制，我就成功使用了您使用的技术。

# android - 为什么我的 BaseAdapter 后代的 getItemId 中的“位置”参数始终为 0？

> ID：13162352
> 
> 赞同：2
> 
> 时间：2012-10-31T16:18:14.187
> 
> 标签：android, baseadapter

我的 ListView 看起来不错，但在我的位置

```
public long getItemId(int position) 
```

始终为 0。它被调用了很多次（我猜每个项目一次）。调用栈：

```
MyAdapter.getItemId(int) line: 156  
OverScrollListView(AdapterView).rememberSyncState() line: 1169  
AbsListView$AdapterDataSetObserver(AdapterView$AdapterDataSetObserver).onChanged() line: 798    
AbsListView$AdapterDataSetObserver.onChanged() line: 6773   
DataSetObservable.notifyChanged() line: 35  
MyAdapter(BaseAdapter).notifyDataSetChanged() line: 50 
```

Android 4.1 或 2.3.3 - 这并不意味着。

提前致谢！

**对不起，虚惊一场。getItemId 在 position == 0 的情况下被调用了大约 10 次，并且在获得正常位置之后**

# jquery - postData 方法不执行函数

> ID：13162354
> 
> 赞同：1
> 
> 时间：2012-10-31T16:18:15.483
> 
> 标签：jquery, asp.net, jqgrid

我有两个 jqGrid。在第一个网格中，我选择一行，第二个网格根据第一个网格的 id 刷新数据。至少它应该是这样工作的。

```
//This is code from the second grid
postData: '{ lobId: ' + BudgetCore.getLobId() + ' }',

//Snippet from BudgetCore...
getLobId: function () {
    var row = jQuery(BudgetCore.GridTables.Lob).jqGrid('getGridParam', 'selrow');
    return row;
} 
```

在 Chrome 中，我尝试调试函数 getLobid() 但它从未执行过。发送的 postData 请求：{ lobId:null }。

如果我将上面的代码更改为 '{ lobId: ' + 1 + ' }' 它可以工作，所以一定有什么错误导致这个函数无法执行。在 Chrome JS 控制台中执行 BudgetCore.getLobId() 工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:24:40.460

你应该使用

```
postData: {
    lobId: function () {
        return $(BudgetCore.GridTables.Lob).jqGrid('getGridParam', 'selrow');
    }
} 
```

有关更多详细信息，请参阅[答案](https://stackoverflow.com/a/2928819/315935)。

**更新**：如果你需要在`JSON.stringify`里面额外使用，`serializeGridData`那么你不能使用更简单的版本`serializeGridData`：

```
serializeGridData: function (postData) { return return JSON.stringify(postData); } 
```

取而代之的是，您应该使用我在[答案](https://stackoverflow.com/a/6296601/315935)`serializeGridData`中描述的更复杂的版本：

```
serializeGridData: function (postData) {
    var propertyName, propertyValue, dataToSend = {};
    for (propertyName in postData) {
        if (postData.hasOwnProperty(propertyName)) {
            propertyValue = postData[propertyName];
            if ($.isFunction(propertyValue)) {
                dataToSend[propertyName] = propertyValue(); // call the function
            } else {
                dataToSend[propertyName] = propertyValue;
            }
        }
    }
    return JSON.stringify(dataToSend);
} 
```

# z3 - Z3 maxsat smtlib 2.0

> ID：13162355
> 
> 赞同：1
> 
> 时间：2012-10-31T16:18:17.227
> 
> 标签：z3

有没有办法使用 smtlib2.0 实例对 c++ api 进行 maxsat。即，如何使函数 get_soft_constraints 与 smtlib2.0 实例一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:42:51.470

不，该`maxsat`示例是在引入 SMT 2.0 之前实施的。可以修改该示例以读取 SMT 2.0 文件。基本思想是使用 SMT 2.0 解析器而不是 SMT 1.0，并设计一些机制来识别软约束。

# ssl - 如何在 XAMPP 中实现 SSL

> ID：13162356
> 
> 赞同：2
> 
> 时间：2012-10-31T16:18:18.540
> 
> 标签：ssl, xampp

我有一个用 Dream Weaver 和 XAMPP 构建的网站。我希望我的网站是安全的，所以我想在我的网站上实施 SSL。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:21:41.443

ssl 是一个服务器概念，而不是一个应用程序/服务概念。看起来 xampp 使用的是 Apache 网络服务器，因此本文档应该可以帮助您入门。 [http://httpd.apache.org/docs/2.2/ssl/ssl_howto.html](http://httpd.apache.org/docs/2.2/ssl/ssl_howto.html)

这是特定于 xampp 的 apache 安装的文档：http: [//www.leoganda.net/how-to-enable-xampp-ssl-socket-transport/](http://www.leoganda.net/how-to-enable-xampp-ssl-socket-transport/)

# asp.net-mvc - Ninject 获取实例不起作用

> ID：13162357
> 
> 赞同：0
> 
> 时间：2012-10-31T16:18:21.343
> 
> 标签：asp.net-mvc, ninject

在我的 global.asax 文件中，我在接口和类之间建立了依赖关系。注入始终有效，并且设置没有问题。

在模型绑定器中，在同一解决方案中，我试图将具体类映射到该接口

```
IKernel kernel = new StandardKernel();
var samurai = kernel.Get<Samurai>(); 
```

由于某种原因，这不起作用，我收到一条错误消息，说“对象初始化为空”或类似的东西。据我了解，这是有道理的，因为我刚刚创建的这个内核是一个新对象，未链接到 global.asax 中创建的对象。我如何获得 global.asax 中的那个，或者我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:30:14.430

在 global.asax.cs 中，我为这种情况使用了静态变量。

```
protected override IKernel CreateKernel()
{
    return NinjectKernel;    
}

static IKernel _kernel;
public static IKernel NinjectKernel
{
  get
  {
      if (_kernel == null)
      {
         _kernel = new StandardKernel();
         //Configured bindings for interfaces and classes
      }
      return _kernel;
   }
} 
```

而且我认为您正在尝试获取对接口的引用，即 ISamurai，它又引用了实际的对象 Samurai。

```
var samurai = NinjectKernel.Get<ISamurai>() 
```

# java - 显示搜索结果

> ID：13162358
> 
> 赞同：0
> 
> 时间：2012-10-31T16:18:24.230
> 
> 标签：java, json, gson

我一直在使用 GSON 和 JSON 来完成搜索并显示结果。我有这段代码，但我无法让它显示结果：

```
public static void main(String args[]) throws IOException
{

    String google = "http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=";
    String search = "food pantries in Dallas";
    String charset = "UTF-8";

    URL url = new URL(google + URLEncoder.encode(search, charset));
    Reader reader = new InputStreamReader(url.openStream());
    GoogleResults results = new Gson().fromJson(reader, GoogleResults.class);

    // Show title and URL of 1st result.
    System.out.println(results.getResponseData().getResults().get(0).getTitle());
    System.out.println(results.getResponseData().getResults().get(0).getUrl());
    System.out.println(results.getResponseData().getResults());

} 
```

更新：

我可以使用搜索得到一些结果，它显示在列表中：

```
<b>Food Pantries</b> | Soup Kitchens | <b>Food Banks</b>
http://www.foodpantries.org/
[Result[url:http://www.foodpantries.org/,title:<b>Food Pantries</b> | Soup Kitchens | <b>Food Banks</b>], Result[url:http://feedingamerica.org/foodbank-results.aspx,title:Find a Local <b>Food Bank</b> | Feeding America], Result[url:http://www.foodbanknyc.org/,title:<b>Food Bank</b> for New York City], Result[url:http://en.wikipedia.org/wiki/Food_bank,title:<b>Food bank</b> - Wikipedia, the free encyclopedia]] 
```

我正在尝试创建一个干净的列表，该列表将显示这个结果，只显示网站，也许还有更多信息。

我正在考虑使用 Jsoup，但不确定如何将两者结合起来。有什么建议吗？

谢谢，

理查德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:05:18.953

Richard，假设您的 GoogleResults 类是一个与响应中的属性匹配的 java bean，您只需要正确编码您的搜索查询：

改变：

```
URL url = new URL(google + search); 
```

到：

```
URL url = new URL(google + URLEncoder.encode(search,"UTF-8")); 
```

# jquery - jQuery绑定悬停到“文档”

> ID：13162359
> 
> 赞同：2
> 
> 时间：2012-10-31T16:18:32.140
> 
> 标签：jquery

是否可以将 hover() 绑定到具有指定选择器的文档，以便为具有匹配属性的动态添加的内容分配 JS 函数？

我一直在研究这个主题：[JQuery .on() method with multiple event handlers to one selector](https://stackoverflow.com/questions/8608145/jquery-on-method-with-multiple-event-handlers-to-one-selector) and [Is it possible to use jQuery .on and hover?](https://stackoverflow.com/questions/9827095/is-it-possible-to-use-jquery-on-and-hover)

我目前正在使用：

```
$('.profile-gallery-image-container').on({
    mouseenter: function(){
        $('.delete-image', this).show();
        $('.image-options', this).show();
    },
    mouseleave: function(){
        $('.delete-image', this).hide();
        $('.image-options', this).hide();
    }
}, '.profile-gallery-image-container'); 
```

但无法将功能传递给具有匹配选择器的新内容。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T16:19:53.487

在委托事件方法中，您应该将事件绑定到`.profile-gallery-image-container`. 一种可能的解决方案是将其绑定到`<body>`（或`document`）元素：

```
$('body').on({
    mouseenter: function(){
        $('.delete-image', this).show();
        $('.image-options', this).show();
    },
    mouseleave: function(){
        $('.delete-image', this).hide();
        $('.image-options', this).hide();
    }
}, '.profile-gallery-image-container'); 
```

# ios - UIActivityIndi cator 在旧 iOS 版本上设置颜色崩溃

> ID：13162370
> 
> 赞同：0
> 
> 时间：2012-10-31T16:18:59.720
> 
> 标签：ios, crash, uiactivityindicatorview

我在加载屏幕上插入了一个 UIActivityIndi​​cator。当我将颜色更改为黑色时，它在 iOS 6.0 版本的设备上一切正常，但在旧版本的设备上崩溃。这是我的代码：

```
indicator = [[UIActivityIndicatorView alloc]initWithFrame:CGRectMake(110, 275, 30, 30)];
[indicator setColor:[UIColor blackColor]];//in this line i get crash.
[indicator startAnimating];
[self addSubview:indicator]; 
```

有人可以告诉我如何解决这个问题吗？

非常感谢，

埃拉德。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:25:21.803

`UIActivityIndicatorView`仅支持在 iOS 5.0 及更高版本上更改颜色。

您可以使用 测试是否`UIActivityIndicatorView`支持更改颜色`respondsToSelector:`。

```
indicator = [[UIActivityIndicatorView alloc]initWithFrame:CGRectMake(110, 275, 30, 30)];

// Check if indicator supports changing the color
if ([indicator respondsToSelector:@selector(setColor:)]) {
    [indicator setColor:[UIColor blackColor]];
}

[indicator startAnimating];  
[self addSubview:indicator]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:22:22.200

根据[文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActivityIndicatorView_Class/Reference/UIActivityIndicatorView.html)， 的`color`属性`UIActivityIndicatorView`仅适用于 iOS5。如果结果可以接受，您总是可以在较旧的 iOS 版本上进行检查并跳过它？

# python - 在带有 python 的 windows 中使用绝对 unix 路径

> ID：13162372
> 
> 赞同：34
> 
> 时间：2012-10-31T16:19:00.667
> 
> 标签：python, windows, unix, path, cross-platform

我正在创建一个将 blob 文件存储到硬盘驱动器中的应用程序，但是这个脚本必须在 linux 和 windows 中运行，问题是我想给它一个来自文件系统根目录的绝对路径，而不是一个相对于项目文件的路径，这是因为我使用 git 并且不想处理从同步中排除所有这些文件。

所以我想要这样的东西：

```
path = '/var/lib/blob_files/'
file = open(path+'myfile.blob', 'w') 
```

并在 unix 中获取文件：

```
/var/lib/blob_files/myfile.blob 
```

在窗口中：

```
C:\var\lib\blob_files\myfile.blob 
```

它也可能与用户主文件夹（unix 中的 /home/user 和 windows 中的 C:/Users/User ）有关，但我想问题非常相似。

我怎样才能做到这一点？是否有任何库或函数可以帮助我透明地转换这些路径，而不必询问脚本一直在哪个平台上运行？

在我的两个选项中，从根目录绝对或从主文件夹相对，您建议使用哪一个？

提前感谢您对此的任何建议

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-31T16:34:42.490

使用`os.path.abspath()`, 也`os.path.expanduser()`用于相对于用户主目录的文件：

```
print os.path.abspath("/var/lib/blob_files/myfile.blob")
>>> C:\var\lib\blob_files\myfile.blob

print os.path.abspath(os.path.expanduser("~/blob_files/myfile.blob"))
>>> C:\Users\jerry\blob_files\myfile.blob 
```

这些将为 Windows 和 POSIX 路径“做正确的事情”。

`expanduser()`如果路径中没有 a，则不会更改路径`~`，因此您可以安全地将其用于所有路径。因此，您可以轻松编写包装函数：

```
import os
def fixpath(path):
    return os.path.abspath(os.path.expanduser(path)) 
```

请注意，使用的驱动器号将是 Python 进程的当前工作目录指定的驱动器，通常是您的脚本所在的目录（如果从 Windows 资源管理器启动，并假设您的脚本没有更改它）。如果您想强制它始终存在`C:`，您可以执行以下操作：

```
import os
def fixpath(path):
    path = os.path.normpath(os.path.expanduser(path))
    if path.startswith("\\"): return "C:" + path
    return path 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-12-04T15:15:03.207

好的，我自己得到了答案。

```
os.path.exists(os.path.abspath(filePath)) 
```

也许它对任何人都有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T16:20:17.363

来自 Blenders 对[平台无关文件路径的响应？](https://stackoverflow.com/questions/6036129/platform-independent-file-paths)

```
>>> import os
>>> os.path.join('app', 'subdir', 'dir', 'filename.foo')
'app/subdir/dir/filename.foo' 
```

# java - 为什么我可以通过没有定义它们的接口访问 Object 的方法？

> ID：13162377
> 
> 赞同：2
> 
> 时间：2012-10-31T16:19:10.960
> 
> 标签：java

给定以下接口和实现类：

```
public interface MyInterface {
  public String getSomething ();
}

public class MyImplementation implements MyInterface {

   @Override
   public String getSomething () {
      return "Someting";
   } 

   public String getOtherThing () {
      return "otherThing";
   }
} 
```

然后是一些客户端代码：

```
MyInterface objectViaMyInt = new MyImplementation();

objectViaMyInt.getSometing();   //WORKS, OF COURSE
objectViaMyInt.getOtherThing(); //DOESNT WORK, OF COURSE
objectViaMyInt.toString();      // WORKS TOO 
```

所以，我想我理解这个的精神。..每个对象都是一个对象，应该继承那些基本方法。但这实际上是如何工作的？似乎它不能遵循继承和基于接口（类型）的访问的正常规则。. .

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-31T16:21:03.593

> 但这实际上是如何工作的？

在语言级别上，它可以工作，因为[JLS 第 9.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.2)说它可以：

> 如果接口没有直接的超接口，则接口隐式声明一个公共抽象成员方法 m，其签名为 s，返回类型为 r，并且 throws 子句 t 对应于每个签名为 s、返回类型为 r 和 throws 子句的公共实例方法 m在 Object 中声明，除非接口显式声明了具有相同签名、相同返回类型和兼容 throws 子句的方法。

在 JVM 级别，JVM 可以只使用接口的每个实例显然必须是一个对象的知识，因此它可以以正常方式获得正确的成员实现。

# ruby-on-rails - CKeditor 在生产中的 Active Admin 中失败

> ID：13162384
> 
> 赞同：1
> 
> 时间：2012-10-31T16:19:44.970
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ckeditor, asset-pipeline, activeadmin

我已经安装了 ckeditor gem，并[按照这些说明](https://github.com/gregbell/active_admin/wiki/Ckeditor-integration)将它与 Rails 3.2.3 中的 Active Admin 集成

在开发中很有魅力，但在生产中却失败了。尝试加载 config.js 时似乎结结巴巴。

在开发中，它可以很好地加载并且具有路径`/assets/ckeditor/config.js?t=C3HA5RM` 在生产中它尝试过并且无法加载路径`/admin/pages/3/config.js?t=C3HA5RM`（页面ID是任意的）

该站点是使用 Capistrano 部署的，因此理论上它在开发中与在生产中完全相同。

这些路径怎么可能不正确，我该如何更改它们？它可能与资产管道有关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T09:34:41.053

`CKEDITOR_BASEPATH`如果有值，请检查您的控制台。如果没有，您需要确保在您的表单呈现之前它确实如此。

我通过添加：

```
var CKEDITOR_BASEPATH = '/assets/ckeditor/'; 
```

行前到**active_admin.js**

```
//= require active_admin/base 
```

# android - 下一张和上一张图片通过 swipe s

> ID：13162386
> 
> 赞同：1
> 
> 时间：2012-10-31T16:19:48.140
> 
> 标签：android, bitmap, imageview, swipe

我是 android 新手，正在开发一个漫画应用程序。我正在使用此代码访问 [https://github.com/sephiroth74/ImageViewZoom](https://github.com/sephiroth74/ImageViewZoom)进行捏缩放。并且工作得很好。

但我正在尝试通过滑动转到下一张和上一张图片。但我做不到。这是我的代码，可以用于按钮，现在我想添加滑动方法。

```
next.setOnClickListener( new OnClickListener() {

        public void onClick( View v ) {
            selectnextImage();
        }
    } );

     pre.setOnClickListener( new OnClickListener() {
        public void onClick( View v ) {
            selectpreImage();
        }
    } ); 
```

谢谢你请任何专家给我一点时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:05:29.440

您可以像这样在主视图上检测投掷手势：

```
final GestureDetector detector = new GestureDetector(new GestureDetector.SimpleOnGestureListener() {
    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        if(velocityX > 0) {
            selectnextImage();
        }
        else {
            selectpreImage();
        }
        return true;
    }
});

view.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if(event.getPointerCount() == 1) {
            if(mimage.getScale() == 1f) {
                detector.onTouchEvent(event);
                return true;
            }
            else {
                return false;
            }
        }
        else {
            return false;
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:44:44.247

尝试查看[实现横向导航的 Android 文档。](http://developer.android.com/training/implementing-navigation/lateral.html)这使用[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)。我相信这是谷歌推荐的类似内容。您可能不想在那里有选项卡，但您可以在没有选项卡的情况下实现它。您也可以使用[FragmentPagerAdapter](http://developer.android.com/reference/android/support/v13/app/FragmentPagerAdapter.html)来实现它。

# css - 为什么显示：inline-block; 在 IE 中有我无法清除的填充和边距？

> ID：13162388
> 
> 赞同：0
> 
> 时间：2012-10-31T16:19:52.187
> 
> 标签：css

显示：inline-block；IE 中的属性似乎有填充和边距，无论我尝试做什么，我都无法清除。有没有其他人遇到过这个错误并知道如何修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:26:23.790

使用 inline-block 时，请注意您用于格式化标记的空白将被呈现。这可能会被误解为持久填充或边距。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T20:02:34.087

`inline-block`这很可能是因为标记中的元素标签之间至少有一个空格或换行符。

换行符将转换为`inline-block`元素之间的单个空格。因此，您看到的额外空间不是填充或边距，而是包含元素文本中的实际空格字符。

有一些解决方法：

1.  ~~Uglify~~更改您的标记以删除或重新定位换行符：

    ```
    <ul>
        <li>item</li>
        <li>item</li>
    </ul>
    <!-- becomes -->
    <ul>
        <li>item</li><li>item</li>
    </ul>
    <!-- or -->
    <ul>
        <li>item</li><li>
            item</li>
    </ul> 
    ```

2.  使用`float: left`或`float: right`内联显示块元素，而不是`inline-block`. 请注意，这将引入其他问题，例如必须确保包含元素是[clearfixed](https://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best)。

3.  `word-spacing: -1em`在包含元素上设置。请注意，如果您的`inline-block`元素包含任何文本，并且您不希望此文本具有不规则的字间距，则需要使用`word-spacing: normal`内联元素覆盖继承的规则。演示：http: [//jsbin.com/ucivel/1/edit](http://jsbin.com/ucivel/1/edit)

# sqlite - 如何在 sqlite3 表中查找字符串？

> ID：13162391
> 
> 赞同：2
> 
> 时间：2012-10-31T16:19:54.130
> 
> 标签：sqlite, shell

是否有在数据库中查找字符串的纯 sqlite 请求？

使用一点 shell，我可以从表中提取模式：

```
for i in *sqlite; 
   do sqlite3 $i ".tables"
   | grep -Eoh "[^ ]+" 
   | while read t; do 
          echo -n "$i:$t  ";
          sqlite3 $i '.schema "'"$t"'"';
   done;
echo;
done 
```

然后我可以找到哪一列的类型是 TEXT，并提出请求。

但是在终端中是否有一种纯 SQL 方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T18:03:35.557

SQLite 被设计为嵌入式数据库，因此只有非常基本的编程能力（它有触发器，但没有控制逻辑`if`或循环）。所以不可能在 SQL 中做任何动态的事情——结果[`PRAGMA table_info`](http://www.sqlite.org/pragma.html#pragma_table_info)不能直接在 SQL 查询中使用。

在数据库中搜索任何地方的一种非常快速而肮脏的方法是显示所有内容，`.dump`然后就`grep`这样。但是，这实际上并不快，因为在 SQL 中搜索索引列会更快。

# xml - 在相同的值上翻译两次

> ID：13162396
> 
> 赞同：0
> 
> 时间：2012-10-31T16:20:05.950
> 
> 标签：xml, xslt

在上一篇文章中，我看到您可以使用 translate 两次。我一直在尝试按照我看到的示例进行操作，但无法使其正常工作。

我想看看这是否可以删除未知字符，例如，如果我们只想显示数字但不知道 XML 节点中将包含哪些字符。

这是我的代码：

```
<xsl:variable name="myString">ABCDEFGHIJKLMNOPQRSTUVWXYZ-@!#$%^&amp;*-=+0123456789</xsl:variable>

<xsl:template match="/">

  <p>Here is the original string: <xsl:value-of select="$myString" /></p>

  <p>Here is the string after we apply the Translate function 2 times: 
  <xsl:value-of select="translate(translate($myString, '0123456789', ''), '')" /></p>

</xsl:template> 
```

这当前会产生错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T16:38:40.267

您只需将两个参数传递给外部`translate`，它需要三个

```
translate($myString, translate($myString, '0123456789', ''), '') 
```

# sql - SQL - 为表中的所有值执行存储过程

> ID：13162397
> 
> 赞同：2
> 
> 时间：2012-10-31T16:20:14.593
> 
> 标签：sql, sql-server, stored-procedures

我有一个 SQL 存储过程**“A”**，它验证给定帐户的某些银行帐户信息，它接受帐号作为参数**“arg1”**

我想对另一个表**XXX的****X 列**中存在的所有值执行该过程（Accounts 表中存在的所有银行账户）

 **我不确定这样的事情是否可行

```
exec A @arg1 = X from XXX 
```

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-31T16:22:50.990

不，没有您想要运行它的批量 EXEC。

选项 1：手动生成和运行。复制结果，粘贴回 SSMS 并执行。

```
select 'exec A @arg1 = ' + quotename(X,'''') + ';'
from XXX 
```

选项 2：生成批处理并使用动态 SQL 运行。

```
declare @sql nvarchar(max);
set @sql = '';
select @sql = @sql + 'exec A @arg1 = ' + quotename(X,'''') + ';'
from XXX;
exec (@sql); 
```

选项3：循环运行

```
declare @x varchar(max);
select top(1) @x = X from xxx where X is not null order by X;
while @@rowcount > 0
begin
    exec sp_executesql N'exec A @arg1=@x;', N'@x varchar(max)', @x=@x;
    select top(1) @x = X from xxx where X > @x order by X;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T16:27:51.807

通常以基于集合的方式处理事情会更好，但是如果您确实需要为结果集中的每一行按顺序执行某些操作，那么可以使用游标：

```
declare cur cursor for
select X from XXX

declare @x int
open cur
fetch next from cur into @x

while @@FETCH_STATUS = 0
BEGIN
    exec A @x

    fetch next from cur into @x
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-25T22:02:34.443

尝试使用带有 Coalesce 命令的动态查询。下面的查询对 XXX 表的 X 列的数据执行 A 存储过程。

```
-- Create Dynamic Query
DECLARE @ValidateAccountCommand VARCHAR(MAX) 
SELECT @ValidateAccountCommand = COALESCE(@ValidateAccountCommand + 
                                            '; EXEC A ', 
                                             'EXEC A ') 
                                + CONVERT(NVARCHAR,XxxData.X)
FROM 
(SELECT X FROM XXX) XxxData

PRINT @ValidateAccountCommand
EXECUTE (@ValidateAccountCommand) 
```**

# ios - 如何更改邮件视图的标题

> ID：13162399
> 
> 赞同：0
> 
> 时间：2012-10-31T16:20:27.650
> 
> 标签：ios

我有一个发送电子邮件的应用程序。我注意到，当我设置主题时，它也会改变邮件视图的标题，如下所示：

![在此处输入图像描述](../Images/0848968cc0e8dd794c9c6b553692aa55.png)

问题是，如果邮件的主题很长，会在窗口标题中被截断；翻译了题目就更糟了，翻译成垃圾。我需要将视图标题更改为有意义的内容，例如“导出”，而不是电子邮件的主题。可以这样做吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:29:30.450

这只是标准的内置邮件应用程序的行为。即使您从邮件应用程序手动撰写电子邮件，您也会看到您在主题中输入的任何内容都将成为导航栏中的标题。

但是，没有理由在翻译主题时看到垃圾。您可以发布一些代码示例（甚至作为另一个问题）以寻求帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:25:03.533

主题字段确定此视图的标题。除了编辑主题字段之外，没有其他方法可以更改标题。

# android - 屏幕定向后保持活动 UI 状态

> ID：13162401
> 
> 赞同：1
> 
> 时间：2012-10-31T16:20:30.177
> 
> 标签：android, actionbarsherlock

我知道每次配置更改（即屏幕方向）时，活动都会被销毁并重新启动。

然而，我遇到了一个奇怪的场景，即使我没有在 onSaveInstanceState 保存状态并且没有在 Activity 的清单中指定 android:configChanges="keyboardHidden|orientation"，UI 状态也会恢复。我也懒得重写 onRetainNonConfigurationInstance。

示例我选中了一个复选框或在 TextView 中输入了一个值。当我改变方向时，值仍然存在。（我还没有将它们保存到数据库中）

我错过了什么吗？

更新：顺便说一句，我正在使用 SherlockActivity ......那有关系吗

# python - 从段落中挑选最相关的词

> ID：13162409
> 
> 赞同：2
> 
> 时间：2012-10-31T16:21:06.173
> 
> 标签：python, nlp, classification, tagging, folksonomy

不知道如何正确表达这个问题，但这是我打算使用下面概述的假设场景来实现的目标 -

用户给我的电子邮件只有主题和正文，主题是电子邮件的主题，正文是对主题的描述，最多只有一段，最多 1000 个单词。现在我想用某种计算机语言（可能是python）分析这个段落（在正文中），然后从段落中列出与主题字段中提到的主题相关的最重要的单词。

例如，如果电子邮件的主题是 iPhone，正文类似于“iPhone 重新定义了具有超分辨率和图形的用户界面设计。它完全支持触控并允许用户滑动屏幕”

所以我正在寻找的结果是一个列表，其中包含与 iPhone 相关的段落中的关键术语。示例 - （用户界面、设计、分辨率、图形、触摸、滑动、屏幕）。

所以基本上我正在寻找从段落中挑选最相关的单词。我不确定我可以使用什么或如何使用来实现此结果。在谷歌上搜索，我读了一些关于自然语言处理和 python 和分类等的知识。我只需要一个关于如何去做的通用方法——使用什么技术/语言，我必须阅读哪个领域等等。

谢谢！

> 编辑：：：

在此期间我一直在阅读。准确地说，我正在研究如何做到这一点，使用什么工具：

使用基于同义词、形态相似性、拼写错误和上下文分析的 NLP 从正文中生成相关标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T16:29:28.437

一种基于信息论的幼稚方法：

给定一个文本语料库（在您的示例中，如果可能的话，大约 > 1.000 封电子邮件），计算语料库中每个不同单词[的熵](http://en.wikipedia.org/wiki/Information_theory#Entropy)。

对结果进行排序，只保留最相关的 XX，这样你就有了标记方案。

我曾经在 python 中使用两种不同语言中相同文本的单词的交叉熵进行统计翻译，并且效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:29:40.287

可能是矫枉过正，但这种任务可能可以用 Python 库[自然语言工具包](http://nltk.org/)解决- [http://nltk.org/](http://nltk.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T17:06:05.177

正如其他人所说，NLTK 可能是在 Python 中进行 NLP 的首选工具。

至于技术，您正在寻找类似词对之间的相似性度量的东西。对于文本中的每个单词，计算标题中包含内容的单词，并保留前 N 个单词。查看[本文](http://arxiv.org/abs/1203.1858)以了解方法的调查，并了解 NLTK 在功能方面为您提供了什么。不过，有大量关于这些东西的研究，您可能会对相当简单的东西感到满意（具体取决于您的应用程序是什么）。[逐点互信息](http://en.wikipedia.org/wiki/Pointwise_mutual_information)通常是一个很好的起点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T16:32:14.710

我不是专家，但您似乎确实需要定义“关键术语”、“相关性”等概念，然后在其上放置一个排名算法。这听起来像是在做 NLP，据我所知，有一个名为 NLTK 的 python 包可能在这个领域很有用。希望能帮助到你！

# asp.net - 使用谷歌地图方向 API 获取行驶距离

> ID：13162411
> 
> 赞同：0
> 
> 时间：2012-10-31T16:21:09.007
> 
> 标签：asp.net, google-maps

我已经使用 XML 和 JSON 通过谷歌地图方向 API 来获取行驶距离，（我使用 ASP.NET，C#），但是这两种方法在给出正确值方面都有问题，它们给出了一些 0 值，有时他们不给出任何价值。获得两点之间行驶距离的最佳方法是什么？你能给我一个工作样本吗

这是我的 XML 方法：

```
 string strURL = "http://maps.google.com/maps/api/directions/xml?origin=" + Session["UserLat"].ToString() + "," + Session["UserLon"].ToString() + "&destination=" + tmpList[d].X + "," + tmpList[d].Y + "&mode=driving&sensor=false";
List<float> distances = new List<float>();
distances.Clear();
HttpWebRequest wRequest = (HttpWebRequest)WebRequest.Create(strURL);
//Request.Headers.Add("Man", "GET " + strURL);
HttpWebResponse wResponse = (HttpWebResponse)wRequest.GetResponse();
if (wRequest.HaveResponse)
{
    if (wResponse.StatusCode == HttpStatusCode.OK)
    {
        StreamHandler = new System.IO.StreamReader(wResponse.GetResponseStream());
        xmlDoc.LoadXml(StreamHandler.ReadToEnd());
        Response.Write(xmlDoc.GetElementsByTagName("distance").Count.ToString() + ",");
        for (int w = 0; w < xmlDoc.GetElementsByTagName("distance").Count; w++)
        {
                                                            distances.Add(float.Parse(xmlDoc.GetElementsByTagName("distance")[w].ChildNodes[0].InnerText));

        }
    }
} 
```

我的一些距离是 0，怎么了？

# c# - 是否有用于转义字符的 ASP.NET 方法？

> ID：13162412
> 
> 赞同：0
> 
> 时间：2012-10-31T16:21:09.787
> 
> 标签：c#, asp.net, escaping, html-escape-characters

我在我的 ASP.NET Web 表单中创建了一个 textarea，当输入 HTML 标记时，它会产生以下错误：

```
 Server Error in '/GreetingCardMaker' Application.
 --------------------------------------------------------------------------------

A potentially dangerous Request.Form value was detected from the client (setGreeting="<br />"). 
```

.net 类库中是否有可以调用字符串来删除 HTML 的方法？或者，是否有一种我可以编写来调用字符串的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T16:23:20.990

`HttpServerUtility.UrlEncode()`- 来自 System.Web.dll。

对您输入的任何数据执行 URL 编码（因为从请求中提取不会转义原始值）

或者有`Uri.EscapeUriString()`which 做一些非常相似的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:30:28.497

当 ASP.net 的[“请求验证”](http://msdn.microsoft.com/en-us/library/hh882339.aspx)过分热衷于阻止某些类型的内容注入（特别是 HTML/XSS）时，通常会发生这种情况。

最直接的“修复”是禁用对这些东西的检查，但直到现在你还没有受到恶意输入的影响。如果您禁用请求验证，您必须准备好自己处理潜在的危险输入。我没有在此处包含禁用此功能的步骤，因为您应该在禁用它之前真正知道自己在做什么。

上面的链接是一个好的开始，但它不应该是您阅读的关于该主题的唯一内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T16:37:30.467

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="page.aspx.cs" validateRequest="false" Inherits="Project.UI.page" %> 
```

在您的 aspx 页面中添加 validateRequest = "false"。这将禁用所选页面的输入验证。

# objective-c - 无法访问对象 C 中的对象成员变量

> ID：13162414
> 
> 赞同：0
> 
> 时间：2012-10-31T16:21:26.420
> 
> 标签：objective-c, variables, cocos2d-iphone

我有一个非常奇怪的问题。我定义了两个类：A和B，在B中，它有一个成员变量NSArray *bullets，在A中，它有一个成员变量B* b，现在在A的一个函数中，我试图访问b .bullets，但它告诉我“子弹在...的类型上找不到”，我在 Bh 中写了“@property bullets”，在 Bm 中写了“@synthesize bullets=_bullets”，任何帮助对我来说都是以前的，谢谢

![在此处输入图像描述：HelloWorldLayer 类是 B](../Images/21582cbca34b6f2be72aa2d274571c54.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:31:32.523

`@property bullets;`是不足够的。

[这](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)将告诉您您需要了解的有关属性的所有信息。

引用，这是正确的语法：

`@property (attributes) type name;`

# .htaccess - 301 重定向在我的网站上不起作用

> ID：13162421
> 
> 赞同：2
> 
> 时间：2012-10-31T16:21:48.673
> 
> 标签：.htaccess

我一直在浏览网络和这个网站，试图找到我的问题的答案，但还不能解决。所以希望大家可以帮忙。

我目前在我的网站上有一个 301 重定向

```
 RewriteEngine on
     Options +FollowSymLinks
     RewriteCond %{THE_REQUEST} ^.*/index\.html
     RewriteRule ^(.*)index.html$ http://www.teach-this.com/$1 [R=301,L] 
```

基本上，问题是我的网站显示重复的内容。

www.teach-this.com www.teach-this.com/index.html

我正在尝试使重定向起作用，并尝试了各种不同的 301 重定向。当我输入网址时，它会显示为 .com。但只要我单击站点内的任何内容并返回主页，它就会以 com/index.html 的形式返回。

欢迎任何想法，如果您需要更多信息，请告诉我。或者，如果有人可以查看该站点并告诉我有什么问题，那就太好了。

提前致谢

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:27:06.177

您不需要重写规则来隐藏`index.html`URL，只需在您的`httpd.conf`:

```
<IfModule dir_module>
    DirectoryIndex index.html index.php index.htm
</IfModule> 
```

如果您想通过 mod_rewrite 处理它，请启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^(.+/|)index\.html$ http://www.teach-this.com/$1 [R=301,L,NC] 
```

# python - Python 崩溃，glibc 检测到 /zope/z_if_algerie/Python-2.6/bin/python: munmap_chunk(): 无效指针

> ID：13162428
> 
> 赞同：2
> 
> 时间：2012-10-31T16:22:15.043
> 
> 标签：python, linux, plone, glibc, zope

我在带有 python 2.6 的 linux 3.2.13-xxxx-std-ipv6-64 上运行 Plone 4.1.3。

Plone 在 ZEO 中，带有磅和 apache。

浏览我的网站后，出现错误（在终端中）：

```
*** glibc detected *** /zope/z_if_algerie/Python-2.6/bin/python: munmap_chunk(): invalid pointer: 0x00000000040e70b0 *** 
```

并且所有 zeoclients 都停止了。

[这是完整追溯的链接](http://pastealacon.com/31018)。

有人知道发生了什么吗？

谢谢 ！

# java - Java RegEx 从 Flex 修复 HTML

> ID：13162431
> 
> 赞同：0
> 
> 时间：2012-10-31T16:22:18.520
> 
> 标签：java, regex, apache-flex

需要帮助尝试编写一些 RegEx 或修复一些 Adob​​e Flex HTML 标签的函数。我们已经修复了大部分问题，但在对齐标签方面遇到了麻烦。问题是 Flex 从其 RichTextEditor 中保存 html，如下所示：

```
<TEXTFORMAT LEADING="2">
<P ALIGN="LEFT">
<FONT FACE="Arial" STYLE="font-size: 10pt" size="10" COLOR="#000000" LETTERSPACING="0" KERNING="0">
Test Line 1
</FONT>
</P>
<TEXTFORMAT LEADING="2">
<P ALIGN="CENTER">
<FONT FACE="Arial" STYLE="font-size: 10pt" size="10" COLOR="#000000" LETTERSPACING="0" KERNING="0">
Test Line 2
</FONT>
</P> 
```

我们试图想出一种方法来替换 P ALIGN=" *_* _" 与其等效的 html4 标记，例如左、右、居中、对齐。但是我们还需要替换它的结束标签。

上面的例子会变成这样

```
<TEXTFORMAT LEADING="2">
<left>
<FONT FACE="Arial" STYLE="font-size: 10pt" size="10" COLOR="#000000" LETTERSPACING="0" KERNING="0">
Test Line 1
</FONT>
</left>
<TEXTFORMAT LEADING="2">
<center>
<FONT FACE="Arial" STYLE="font-size: 10pt" size="10" COLOR="#000000" LETTERSPACING="0" KERNING="0">
Test Line 1
</FONT>
</center> 
```

有人做过这样的事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:46:50.330

您可以很好地使用正则表达式将 p align 标签替换为它们各自的值。

对于像这样的输入

```
<P ALIGN="LEFT">xyz</P><SomeTag></SomeTag><P ALIGN="CENTER">xyz</P>; 
```

这是代码，

```
 public static void main(String[] args) {        
        String str = "<P ALIGN=\"LEFT\">xyz</P><SomeTag></SomeTag><P ALIGN=\"CENTER\">xyz</P>";
        Pattern pattern = Pattern.compile("(?i)<(P ALIGN=\")([^\"]+)([^>]+)>([^<]+)<([^>]+)");
        Matcher matcher = pattern.matcher(str);
        while(matcher.find()) {         
            str = str.replaceFirst(matcher.group(1), ""); // replaces <p align
            str = str.replaceFirst(matcher.group(3), ""); // replaces the single quote after LEFT or CENTER
            str = str.replaceFirst(matcher.group(5), "/" + matcher.group(2)); // replaces /P from the ending tag with /LEFT or /CENTER 
        }
        System.out.println(str);
    } 
```

输出

```
<LEFT>xyz</LEFT><SomeTag></SomeTag><CENTER>xyz</CENTER> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:43:28.643

我只是在考虑使用带有一些手动操作的两个正则表达式，如下所示：

```
 String startingTagPattern = "<P ALIGN=\"[\\w]\">";
      String endTagPattern = "</p>"; 
```

现在，如果startingTagPattern 匹配，则获取匹配的标记行：

```
 String tagLine = match.group(0);
      String alignString = tagLine.substring(8,tagLine.lastIndexOf("\"")); 
```

现在您可以将标签输出为：

```
 String startTag = "<"+alignString+">";
      String endTag = "</"+alignString+">"; 
```

# java - Android - 如何禁用搜索按钮，如何实现 onSearchRequested()？

> ID：13162436
> 
> 赞同：8
> 
> 时间：2012-10-31T16:22:29.350
> 
> 标签：java, android, search, button

检查了以下内容： [如何让点击手机的搜索按钮什么都不做？](https://stackoverflow.com/questions/5215541/how-to-have-clicking-the-phones-search-button-do-nothing)

但这对我不起作用。有人有其他建议吗？谢谢你。按照菲尔的建议，根据他的回答更新代码。显示错误[http://www.youtube.com/watch?v=9lekcH1JAf0&feature=youtu.be](http://www.youtube.com/watch?v=9lekcH1JAf0&feature=youtu.be)

所以我做了一个示例项目。我在两部不同的手机上测试过，Android 版本 2.3.5 和 4.1，我也在模拟器版本 2.2 上测试过。单击按钮显示对话框后，它会很好地显示进度对话框，并且应该继续这样做。但是单击手机和模拟器上的“搜索”按钮会使进度对话框消失。这是课程，清单如下。

当前的行为是，当单击搜索按钮时，进度对话框会消失。预期或需要的行为是禁用搜索按钮，或者类似地，当显示对话框并单击搜索按钮时，此单击不会使对话框消失。

```
 package com.example.test6;

import android.os.Bundle;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.util.Log;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity {

    Button showDialogButton;
    Context context;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        showDialogButton = (Button) findViewById(R.id.showDialogButton);
        showDialogButton.setOnClickListener(showDialog);
        context = this;
        startSearch(null, false, null, false);
    }

    private OnClickListener showDialog = new OnClickListener() {

        @Override
        public void onClick(View v) {
            ProgressDialog progressDialog = new ProgressDialog(context);
            progressDialog.show();
        }
    };

    @Override
    public boolean onSearchRequested() {
       Log.d("onSearchRequested", "search key pressed");
       return false;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
}

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.test6"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="1"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="Test6" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.SEARCH" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
        <meta-data
            android:name="android.app.searchable"
            android:resource="@xml/searchable" />
        </activity>
    </application>

</manifest> 
```

根据提供的参考资料，我的可搜索 xml 位于：res/xml/searchable.xml。这就是我的 searchable.xml 的样子：

```
<?xml version="1.0" encoding="utf-8"?>
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
    android:searchSuggestAuthority="dictionary"
    android:searchSuggestIntentAction="android.intent.action.VIEW"
    android:includeInGlobalSearch="true">
</searchable> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T14:28:59.760

**编辑**

很高兴我下面的代码很有帮助。有了您更新的问题（以及视频），我现在相信这是您需要的答案：[当我单击搜索按钮时，防止 ProgressDialog 被关闭（Android）](https://stackoverflow.com/questions/2502443/prevent-progressdialog-from-being-dismissed-when-i-click-the-search-button-andr)

--*预编辑*--

而不是调用`onSearchRequested()`from `onCreate()`，您需要调用：

```
startSearch(null, false, null, false); 
```

然后，为了防止搜索按钮使用该`onSearchRequested()`方法，您覆盖它并返回 false：

```
@Override
public boolean onSearchRequested()
{
   return false;
} 
```

此解决方案在[onSearchRequested 文档](http://developer.android.com/reference/android/app/Activity.html#onSearchRequested%28%29)中直接讨论：

> 您可以使用此函数作为启动搜索 UI 的一种简单方式，以响应 Activity 中的菜单项、搜索按钮或其他小部件。除非被覆盖，否则调用此函数与调用 startSearch(null, false, null, false) 相同，后者会启动对其清单中指定的当前活动的搜索，请参阅 SearchManager。
> 
> 您可以覆盖此函数以强制进行全局搜索，例如响应专用搜索键，或完全阻止搜索（通过简单地返回 false）。

你`AndroidManifest.xml`的也不完整。您需要证明您`Activity`是可搜索的。更改您的*MainActivity*声明如下：

```
 <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.SEARCH" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
        <meta-data
            android:name="android.app.searchable"
            android:resource="@xml/searchable" />
    </activity> 
```

请注意，*@xml/searchable*是您的 apk 中定义如何搜索的 xml 引用。[此处](http://developer.android.com/guide/topics/search/searchable-config.html)详细讨论了此资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:47:00.173

```
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
       if (keyCode == KeyEvent.KEYCODE_SEARCH) {
          Log.d("onKeyDown", "search key pressed");
          // onSearchRequested();
          return true; // You need to return true here.  This tells android that you consumed the event.
       }
       return false;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T17:38:21.913

```
 @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
       if (keyCode == KeyEvent.KEYCODE_SEARCH && event.getRepeatCount() == 0) {
            return true;
        }
        return false; 
    } 
```

[http://developer.android.com/reference/android/view/KeyEvent.html](http://developer.android.com/reference/android/view/KeyEvent.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T02:20:23.477

您不能中断活动中的搜索键事件。

您必须中断对话框中的搜索键事件。

```
 private OnClickListener showDialog = new OnClickListener() {

    @Override
    public void onClick(View v) {
        ProgressDialog progressDialog = new ProgressDialog(context);
        progressDialog.setOnKeyListener(new OnKeyListener(){
               public boolean onKey(DialogInterface dialog, int keyCode, KeyEvent event)     {
               if (keyCode == KeyEvent.KEYCODE_SEARCH) {
                     Log.d("onKeyDown", "search key pressed");
                     return true; 
               }
               return super.onKey(dialog,keyCode,event);
     }});
        progressDialog.show();
    }
}; 
```

# c# - 如何在同一类的静态 List 属性中添加类的对象？

> ID：13162437
> 
> 赞同：5
> 
> 时间：2012-10-31T16:22:33.347
> 
> 标签：c#, properties, static

我有一个 A 类，它有 2 个普通属性（字符串属性）和 1 个静态属性（A 类型列表）。在构造函数中创建 A 类的新实例时，我想将该实例添加到静态列表属性中。我有两个问题。

1-有可能吗？

2-如果可能的话，我该如何实施。

我正在使用以下代码：

```
public class A {
private string _property1;
private string _property2;
private static List<A> _AList;

public string Property1 {
  get { return _property1; }
  set { _property1 = value; }
}

public string Property2 {
  get { return _property2; }
  set { _property2 = value; }
}

public static List<A> AList {
  get { return _AList; }
  set { _AList = value; }
}
public A( ) {
} 
```

}

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T16:27:27.230

> 1 - 有可能吗？

是的。

> 2 - 如果可能的话，我该如何实施。

在静态构造函数中初始化列表

```
static A() {
    AList = new List<A>();
} 
```

然后在实例构造函数中添加实例

```
public A( ) {
    A.AList.Add(this);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T16:28:13.707

您必须在声明中或在静态构造函数中创建列表。

```
private static List<A> _AList = new List<A>(); 
```

或者

```
private static List<A> _AList;

static A()
{
    _AList = new List<A>();
} 
```

在实例构造函数中，您可以添加新项目

```
public A()
{
    A.AList.Add(this);
} 
```

* * *

注意：静态构造函数不能是公共的，因为它们不能被显式调用。它们在创建第一个实例或引用任何静态成员之前自动调用。

请参阅[静态构造函数（C# 编程指南）](http://msdn.microsoft.com/en-us/library/k9x6w0hc%28v=vs.100%29.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-16T08:53:35.853

对于除 List 之外的其他类型将正常工作。对于列表，您必须执行以下操作：

```
public static List<A> AList {
 get { 
       if(_AList == null) _AList = new List<A>();
       return _AList; 
     }
 set { _AList = value; }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T16:42:55.120

是的，它是可能的，你可以在里面实现它`factoryMethod`

在此类中，添加此方法以用于创建新实例并将其添加到列表 - 将构造器设置为私有

```
public static A CreateInstance ()
{
     A instance = new A();
     if(AList==null)
       AList = new List<A>();
     AList.add(instance);  
     return A;
} 
```

如果您想在任何地方从此类创建实例：

```
A ins = A.CreateInstance () 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T16:29:02.290

`AList.Add(this);`在构造函数中应该将正在构造的对象实例添加到列表中。

# css - 坚持“新！”的最简单和最正确的方式 投资组合画廊图像上的图标

> ID：13162438
> 
> 赞同：1
> 
> 时间：2012-10-31T16:22:36.607
> 
> 标签：css, position

如何使用 CSS 在投资组合中更多 200x200 的图像上粘贴“新建”图标？我必须使用绝对位置吗？如果是这样，它在所有屏幕上看起来都不一样？

但是，这就是我正在寻找的：

[![新图标](../Images/af19d6db1741f349c94c18978de6b50b.png)](https://i.stack.imgur.com/ofOwY.png)
[（来源：[gyazo.com](http://gyazo.com/04cedd5d5c6bec5b00379415c983bbb9.png)）]

你能在第一张图片上看到新的蓝色图标吗？这就是我需要的。我需要解释如何在不使用图像裁剪的情况下完全粘贴它。

什么是最好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:28:16.713

是的，您需要将其设置`position`为`absolute`- [**DEMO**](http://jsfiddle.net/923af/)

**HTML**

```
<div class="imageholder">
  <img src="http://lorempixel.com/200/200" />
  <img src="http://placehold.it/40x40&text=NEW" class="new" />
</div> 
```

**CSS**

```
.imageholder {
  position: relative;
}

.new {
  position: absolute;
  left: 30px;
  top: 0;
} 
```

# c# - 您应该如何处理主动拒绝的客户端连接异常？

> ID：13162440
> 
> 赞同：1
> 
> 时间：2012-10-31T16:22:52.487
> 
> 标签：c#, sockets

我有一个异步套接字服务器和客户端。如果我告诉客户端与服务器建立 20,000 个连接，我会在大约 25-30% 的连接中收到“无法建立连接，因为目标机器主动拒绝它”。这是完全可以预料的，因为我正在敲击监听套接字并且积压队列正在填满。

我的问题是：当我得到这个异常时我该怎么办？我应该如何处理连接，我应该关闭并关闭套接字然后尝试重新连接？还是 TCP 会尝试通过协议中自己的机制重新连接？

这是我的代码 OnConnected 函数，它是 BeginConnect() 的 AsyncCallbak，我正在处理异常：

```
 void OnConnected(IAsyncResult ar)
    {
        Socket client = (Socket)ar.AsyncState;

        try
        {                
            client.EndConnect(ar);
            SocketState state = new SocketState(client, m_certValidationCallback);

            state.sslStream.BeginAuthenticateAsClient(m_remoteHostName, m_clientCertificates, m_sslProtocols, m_checkCertificateRevocation,
                    m_onAuthenticateAsClient, state);
        }
        catch (Exception ex)
        {
            //m_connectionCallback(this, new SecureConnectionResults(ex));

           //What do I do here?
            if (client != null)
            {
                client.Shutdown(SocketShutdown.Both); //This causes an exception
                client.Close();
                client.Dispose();
            }
        }
    } 
```

尝试关闭 catch 中的套接字会导致另一个异常：“由于未连接套接字并且（使用 sendto 调用在数据报套接字上发送时）未提供地址，因此不允许发送或接收数据的请求”

根据此异常，似乎套接字未连接。再次，它会尝试基于 TCP 协议自行重新连接吗？还是我应该重新排队连接并重试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:30:40.743

我会捕获一个更具体的异常，而不是`Shutdown()`在这种情况下调用。TCP 不会为您重新连接。您必须自己重试此连接。

# javascript - 了解 XKCD 中的 javascript 函数

> ID：13162448
> 
> 赞同：-1
> 
> 时间：2012-10-31T16:23:15.667
> 
> 标签：javascript

我正在尝试查看此漫画中的单个图块：http: [//xkcd.com/1110/](http://xkcd.com/1110/)

我查看了 JavaScript，但无法弄清楚命名约定。

```
for (var y = -1; y <= +1; y++)
    for (var x = -1; x <= +1; x++) {
        var name = tile_name(centre[0] + x, centre[1] + y);
        var tile = $map.find('.tile' + name);
        if (tile.length) $remove = $remove.not(tile);
        else {
            $image = $('<img class="tile' + name + '" src="http://imgs.xkcd.com/clickdrag/' + name + '.png" style="top:' + ((centre[1] + y) * tilesize) + 'px;left:' + ((centre[0] + x) * tilesize) + 'px; z-index: -1; position: absolute;;" style="display:none" />');
            $image.load(function() {
                $(this).show()
            }).error(function() {
                $(this).remove();
            });
            $map.append($image);
        }
    }

$remove.remove(); 
```

我期待： http: [//imgs.xkcd.com/clickdrag/1.2.png](http://imgs.xkcd.com/clickdrag/1.2.png)但这不起作用。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:32:44.833

你应该看看这个函数：它创建了瓦片的名称。

```
 tile_name=function(x,y)
    {
        x-=size[3];
        y-=size[0];
        return (y>=0?(y+1)+'s':-y+'n')+(x>=0?(x+1)+'e':-x+'w')
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:28:30.183

命名方案是`\dn\dw`，例如 2n2w。当心，有些丢失了。

# cocoa - 使用 AudioToolBox 将 Wave 文件保存到 NSFileWrapper

> ID：13162451
> 
> 赞同：3
> 
> 时间：2012-10-31T16:23:22.003
> 
> 标签：cocoa, nsdata, audiotoolbox, nsfilewrapper, extaudiofile

我使用 AudioToolBox 框架中的 ExtAudioFileCreateWithURL 和 ExtAudioFileWrite 将我的样本保存到文件中。但现在我需要将它保存到 NSFileWrapper，因为我现在使用的是 NSDocument：

```
- (NSFileWrapper *)fileWrapperOfType:(NSString *)typeName error:(NSError **)outError 
```

有什么方法可以将 ExtAudioFileXXX 函数与 NSMutableData 对象一起使用，以便我可以使用 NSFileWrapper`initRegularFileWithContents:(NSData*)contents`方法？

剥离代码以保存到文件（有效）：

```
AudioStreamBasicDescription file_desc;
FillOutASBDForLPCM(file_desc, _sample_rate, _channel_count, 32, 32, true, false);
OSStatus rv = ExtAudioFileCreateWithURL(url, kAudioFileWAVEType, &file_desc, NULL, kAudioFileFlags_EraseFile, &fout);
if (rv == noErr){
    int buff_size = sizeof(AudioBufferList) + sizeof(AudioBuffer);
    AudioBufferList* bufferList = (AudioBufferList*)malloc(buff_size);
    bufferList->mNumberBuffers = 1;
    bufferList->mBuffers[0].mData = _samples;
    bufferList->mBuffers[0].mNumberChannels = _channel_count;
    bufferList->mBuffers[0].mDataByteSize = _channel_count * _frame_count * sizeof(float);
    ExtAudioFileWrite(fout, _frame_count, bufferList);
    free(bufferList);
    ExtAudioFileDispose(fout);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:15:43.760

在大多数情况下，使用外部文件是最好的解决方案。请注意，它`NSData`具有未缓存和映射文件的初始化程序。在大多数情况下，您显然希望最小化 I/O，同时又不消耗大量内存（并且您必须密切关注缓存内存的增长）。更进一步，考虑如何为这些重量级资产（子 NSFileWrappers、链接）以另一种方式表示文件包装器对象，因为文档的文件可能不是非常小的文件（例如单循环）。

如果内存不是问题（例如，您只处理小样本和有限的文件和文档），那么您*可以*使用`AudioFileInitializeWithCallbacks`，它适用于 Wave（但不是所有格式）。这允许您在内存中处理自己的缓冲区，用于表示内存中整个文件的连续分配。然后创建`NSData`表示很容易——只需监控您的内存使用情况并确保独占读/写访问。请注意，`NSData`不需要创建深层副本 - 并将其纳入您的设计。在 OS X 上使用此选项显然会更加灵活。在这种情况下，请确保您知道自己实际编写了多少。一个好的基于磁盘的解决方案（上图）很可能可以为您节省大量写入磁盘的时间。

Anyways, this will require more thought than most `NSFileWrapper` based implementations, because you could possibly exceed 100 MB in audio file assets per document quite quickly.

# php - 使用 php / mysql 从 json 获取特定的数组数据

> ID：13162453
> 
> 赞同：0
> 
> 时间：2012-10-31T16:23:24.687
> 
> 标签：php, mysql, database, joomla2.5

我的数据库中有一个以 json 编码的字段。我认为。（joomla/zoo 安装的一部分）。我需要从中检索特定值（primary_category）。

我在显示数据的模板中包含以下代码

```
 $database = &JFactory::getDBO();
$sql = "SELECT params FROM #__zoo_item";
    $database->setQuery( $sql );
$row=$database->loadResult();
$row = json_decode($row, TRUE);
print_r($row); 
```

返回以下...

```
Array ( [metadata.title] => [metadata.description] => [metadata.keywords] => [metadata.robots] => [metadata.author] => [config.enable_comments] => 1 [config.primary_category] => 601 ) 
```

我需要做的就是抓住 601 的价值。我已经尝试过 $row[config.primary_category] ​​和 $row[6] 但都不起作用。

我不确定（因为我真的不知道我在做什么）如果我的 json 解码错误或者我访问数组的方式有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:22:34.320

使用此代码 $row['config.primary_category']

# python - 更改变量而不重新加载页面

> ID：13162457
> 
> 赞同：4
> 
> 时间：2012-10-31T16:23:33.967
> 
> 标签：python, flask

我有一个用烧瓶加载的图像名称列表，我将其渲染到 html 模板，以便页面显示图像。我似乎可以更改图像列表（即向其中添加图像）的唯一方法是创建一个包含更改列表的代码的视图，但是为了访问该视图，您必须再次重新加载整个页面。有什么办法可以用烧瓶更改列表而不必重新加载整个页面？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T18:06:56.707

Jakob Bowyer 是绝对正确的——使用 ajax：

```
from flask import jsonify
from werkzeug.security import safe_join

@app.route("/gallery")
def gallery():
    images = get_images_from_dir("some/base/path/*.jpg")
    return render_template("gallery.html", images=images)

@app.route("/search/images", methods=["POST"])
def search_images():
    glob_path = request.form["image_query"]
    glob_path = safe_join("/some/base/path", glob_path)
    return jsonify(images=get_images_from_dir(glob_path)) 
```

然后在您的模板中点击适当的端点：

```
<!-- snip -->
<script>
// jQuery here - you can use anything you want :-)
$.post({
    url: "{{ url_for("search_images") }}",
    success: function(data) {
        console.log(data);
    },
    error: function() { console.log("Error", arguments); }
});
</script> 
```

# java - JToggleButton 截断标签文本

> ID：13162459
> 
> 赞同：9
> 
> 时间：2012-10-31T16:23:47.447
> 
> 标签：java, swing, label, jtogglebutton

在 a 中使用时`Windows 7` `JToolBar`， a`JToggleButton`有时会截断其标签文本。

请参阅下面代码中的示例。以大写字母开头的切换按钮`'W'`将被截断；以空格（甚至小写`'w'`）开头的不会。

这仅在 下发生`Windows`吗？有人可以解释为什么会这样吗？

```
// http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6386636

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.event.ActionEvent;

import javax.swing.AbstractAction;
import javax.swing.Action;
import javax.swing.JFrame;
import javax.swing.JToggleButton;
import javax.swing.JToolBar;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;

/////////////////////// new class

public class Truncation_Example extends JToolBar {

   private static final long serialVersionUID = 1L;

   /////////////////////// object attributes

   JToggleButton toggle_Good;
   JToggleButton toggle_Bad;

   /////////////////////// constructors

   public Truncation_Example() {
      toggle_Good = new JToggleButton(new Action_Good());
      toggle_Bad = new JToggleButton(new Action_Bad());

      this.add(toggle_Good);
      this.add(toggle_Bad);
   }

   /////////////////////// inner classes

   public class Action_Good extends AbstractAction {
      private static final long serialVersionUID = 1L;
      public Action_Good() {
         putValue(Action.NAME, " Wrap Good "); // note added space to prevent truncation
      }
      @Override
         public void actionPerformed(ActionEvent e) {
            System.out.println("Toggle: " + toggle_Good.getText());
      }
   }

   public class Action_Bad extends AbstractAction {
      private static final long serialVersionUID = 1L;
      public Action_Bad() {
         putValue(Action.NAME, "Wrap Bad"); // label will be truncated if it begins with 'W'
      }
      @Override
         public void actionPerformed(ActionEvent e) {
            System.out.println("Toggle: " + toggle_Bad.getText());
      }
   }

   /////////////////////// main

   public static void main(String[] args) {
      UIManager.put("ToggleButton.select", Color.GREEN);

      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            JFrame frame = new JFrame("Truncation_Example");
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            JToolBar toolBar = new Truncation_Example();
            frame.add(toolBar, BorderLayout.NORTH);
            frame.setSize(500, 400);
            frame.setVisible(true);
         }
      });
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:06:24.400

这个问题是 LookAndFeel 依赖的，让我解释一下为什么......

如果安装了 MetalLookAndFeel（默认情况下），此示例确实会截断文本。对于任何其他 L&F（Basic、Windows、Nimbus，甚至在我自己的 L&F 上）我都看不到这个问题。似乎 MetalLookAndFeel 在 MetalButtonUI 或 L&F 常量中存在某种错误，导致按钮文本呈现错误。

我不确定它可能是什么 - 您可以简单地调试 MetalButtonUI 类来查看尺寸计算中发生的情况。无论如何，即使你找到了这个问题的根源，我怀疑你会改变任何事情。

# .net - 如何停止显示默认上下文菜单的文本框？

> ID：13162460
> 
> 赞同：3
> 
> 时间：2012-10-31T16:23:54.437
> 
> 标签：.net, winforms, textbox, contextmenu

我注意到 WinForm 文本框的上下文菜单有些奇怪。TextBox 控件有一个默认的上下文菜单，其中包含剪切、复制、粘贴和其他一些功能。我正在尝试用我自己的菜单替换此菜单。我创建了一个简单的测试应用程序，其中包含一个表单和一个表单上的文本框，并添加了以下代码：

```
Form1()
{
    InitilizeComponent();
    ContextMenu menu = new ContextMenu();
    menu.MenuItems.Add("Hello World", HelloWorld_Clicked);
    textBox1.ContextMenu = menu;
}

private void HelloWorld_Clicked(object sender, EventArgs e)
{
    MessageBox.Show("Hello World!");
} 
```

当我运行它时，我可以通过右键单击文本框然后释放鼠标按钮而不移动鼠标来显示我的上下文菜单。但是，如果我在文本框上按下鼠标右键，按住它，然后将鼠标移到文本框外，最后松开鼠标按钮，我会得到默认的文本框上下文菜单。

有可能阻止它这样做吗？

更新：如果系统运行在 Windows XP Pro SP3 和 .Net 3.5 上会有所不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:29:45.443

您可以尝试一件事：

```
[DllImport("user32.dll")]
public static extern bool ReleaseCapture();

void textBox1_MouseDown(object sender, MouseEventArgs e) {
  if (e.Button == MouseButtons.Right) {
    ReleaseCapture();
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:27:29.620

我怀疑在文本框外释放鼠标按钮会打开*表单*的上下文菜单而不是文本框。我没有测试过，这只是一个猜测。您也可以使用这样的代码为表单设置上下文菜单，但我自己没有尝试过：

```
Form1()
{
    InitilizeComponent();
    ContextMenu menu = new ContextMenu();
    menu.MenuItems.Add("Hello World", HelloWorld_Clicked);
    textBox1.ContextMenu = menu;
    this.ContextMenu = menu;
}

private void HelloWorld_Clicked(object sender, EventArgs e)
{
    MessageBox.Show("Hello World!");
} 
```

# php - PHP对象组合与观察者？

> ID：13162462
> 
> 赞同：3
> 
> 时间：2012-10-31T16:24:12.580
> 
> 标签：php, object, composition, observers

如果我的术语似乎不正确，请原谅......（因为它可能是）

假设我正在使用组合，而我的高级对象类似于：

```
abstract child
{
    /* array of Activity objects */
    public $activities;

    abstract function punish() {}
}

favoriteChild extends child
{
    function punish() {
        // Have a talk
    }
}

redHeadedStepChild extends child
{
    function punish() {
        // Beat with wrench
    }
} 
```

现在假设它`$activities`由更多对象组成，其中一个是`StealingCookiesFromJar`。

如何`punish`从`StealingCookiesFromJar`对象内部调用具体的子方法？（我不熟悉观察者......这是我应该在这里学习的吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:27:31.197

您需要在 StealingCookiesFromJar 对象中创建一个具体的子对象。创建它或将其传递给方法

```
 class StealingCookiesFromJar{
    function doSomething(){
      $child = new redHeadedStepChild();
      $child->punish();
     }
  } 
```

或者

```
 class StealingCookiesFromJar{
    function doSomething(redHeadedStepChild $child){
       $child->punish();
    }
  } 
```

# c# - 将 Project 2010 集成到 SharePoint 2010

> ID：13162463
> 
> 赞同：0
> 
> 时间：2012-10-31T16:24:14.220
> 
> 标签：c#, sharepoint, ms-project

除了在 SharePoint 场中制作 PWA 网站外，还有其他方法可以将 MS Project 2010 集成到 SharePoint 门户吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:28:56.247

你可以按照这些步骤

1.  在 Project 中，单击 File 选项卡以打开 Backstage 视图。点击保存并发送
2.  单击与任务列表同步。
3.  在“网站 URL”列表中，选择包含要同步到的列表的 SharePoint 网站的 URL 名称。

4.  单击验证 URL。

5.  在“选择现有任务列表”列表中，选择您希望项目任务列表同步到的 SharePoint 任务列表的名称。
6.  如果要将项目任务列表与 SharePoint 中的新列表同步，请键入新名称。将在 SharePoint 中创建一个新的任务列表，并将与 Project 中的任务列表同步。

7.  单击同步。

注意：此时，请勿使用包含您要使用的任务列表名称的 URL。

# c - 编写 MIPS 机器指令并从 C 中执行它们

> ID：13162464
> 
> 赞同：2
> 
> 时间：2012-10-31T16:24:16.293
> 
> 标签：c, assembly, mips, inline-assembly, mips32

我正在尝试用 C 和 MIPS 编写一些自我修改的代码。

由于我想稍后修改代码，因此我正在尝试编写实际的机器指令（而不是内联汇编）并尝试执行这些指令。有人告诉我，可以**只 malloc 一些内存，在那里写指令，将 C 函数指针指向它，然后跳转到它。**（我包括下面的例子）

我已经用我的交叉编译器（sourcery codebench 工具链）尝试了这个，但它不起作用（是的，事后看来，我认为它确实看起来很幼稚）。我怎么能正确地做到这一点？

```
#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>

void inc(){
    int i = 41;
    uint32_t *addone = malloc(sizeof(*addone) * 2); //we malloc space for our asm function
    *(addone) = 0x20820001; // this is addi $v0 $a0 1, which adds one to our arg (gcc calling con)
    *(addone + 1) = 0x23e00000; //this is jr $ra

    int (*f)(int x) = addone; //our function pointer
    i = (*f)(i);
    printf("%d",i);    
}

int main(){
    inc();
exit(0);} 
```

我在这里遵循 gcc 调用约定，其中参数传递给 $a0，并且函数的结果预计在 $v0 中。我实际上不知道返回地址是否会被放入 $ra （但我无法测试它，因为我无法编译。我使用 int 作为我的指令，因为我正在编译 MIPS32（因此是 32 位 int应该够了）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:57:16.083

You are using pointers inappropriately. Or, to be more accurate, you *aren't* using pointers where you should be.

Try this on for size:

```
uint32_t *addone = malloc(sizeof(*addone) * 2);
addone[0] = 0x20820001; // addi $v0, $a0, 1
addone[1] = 0x23e00000; // jr $ra

int (*f)(int x) = addone; //our function pointer
i = (*f)(i);
printf("%d\n",i); 
```

You may also need to set the memory as executable after writing to it, but before calling it:

```
mprotect(addone, sizeof(int) * 2, PROT_READ | PROT_EXEC); 
```

To make this work, you may additionally need to allocate a considerably larger block of memory (4k or so) so that the address is page-aligned.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T17:00:45.383

You also need to make sure that the memory in question is executable, and makes sure it gets flushed properly from the dcache after writing it and loaded into the icache before executing it. How to do that depends on the OS running on your mips machine.

On Linux, you would use the mprotect system call to make the memory executable, and the cacheflush system call to do the cache flushing.

**edit**

Example:

```
#include <unistd.h>
#include <sys/mman.h>
#include <asm/cachecontrol.h>

#define PALIGN(P)  ((char *)((uintptr_t)(P) & (pagesize-1)))
uintptr_t  pagesize;

void inc(){
    int i = 41;
    uint32_t *addone = malloc(sizeof(*addone) * 2); //we malloc space for our asm function
    *(addone) = 0x20820001; // this is addi $v0 $a0 1, which adds one to our arg (gcc calling con)
    *(addone + 1) = 0x23e00000; //this is jr $ra

    pagesize = sysconf(_SC_PAGESIZE);  // only needs to be done once
    mprotect(PALIGN(addone), PALIGN(addone+1)-PALIGN(addone)+pagesize,
             PROT_READ | PROT_WRITE | PROT_EXEC);
    cacheflush(addone, 2*sizeof(*addone), ICACHE|DCACHE);

    int (*f)(int x) = addone; //our function pointer
    i = (*f)(i);
    printf("%d",i);    
} 
```

Note that we make the entire page(s) containing the code both writable and executable. That's because memory protection works per page, and we want malloc to be able to continue to use the rest of the page(s) for other things. You could instead use `valloc` or `memalign` to allocate entire pages, in which case you could make the code read-only executable safely.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T02:26:36.213

The OP's code as written compiles without errors with Codesourcery mips-linux-gnu-gcc.

As others have mentioned above, self modifying code on MIPS requires the instruction cache to be synchronized with the data cache after the code is written. The MIPS32R2 version of the MIPS architecture added the `SYNCI` [instruction](http://books.google.com/books?id=kk8G2gK4Tw8C&pg=PA232&lpg=PA232&dq=mips%20synci&source=bl&ots=c_4Oo5MxSq&sig=uBgEiPPJpdZkPZcRWqpIVVVLKKU&hl=en&sa=X&ei=09WRUML9A4SGjAL0w4GYCQ&sqi=2&ved=0CBwQ6AEwAA#v=onepage&q=mips%20synci&f=false) which is a user mode instruction that does what you need here. All modern MIPS CPUs implement MIPS32R2, including `SYNCI`.

Memory protection is an option on MIPS, but most MIPS CPUs are not built with this feature selected, so using the mprotect system call is likely not needed on most real MIPS hardware.

Note that if you use any optimization besides `-O0` the compiler can and does optimize away the stores to `*addone` and the function call, which breaks your code. Using the `volatile` keyword prevents the compiler from doing this.

The following code generates correct MIPS assembly, but I don't have MIPS hardware handy to test it on:

```
int inc() {
    volatile int i = 41;
    // malloc 8 x sizeof(int) to allocate 32 bytes ie one cache line,
    // also ensuring that the address of function addone is aligned to
    // a cache line.
    volatile int *addone = malloc(sizeof(*addone) * 8);
    *(addone)     = 0x20820001; // this is addi $v0 $a0 1
    *(addone + 1) = 0x23e00000; //this is jr $ra
    // use a SYNCI instruction to flush the data written above from
    // the D cache and to flush any stale data from the I cache
    asm volatile("synci 0(%0)": : "r" (addone));
    volatile int (*f)(int x) = addone; //our function pointer
    int j = (*f)(i);
    return j;
}

int main(){
    int k = 0;
    k = inc();
    printf("%d",k);    
    exit(0);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T16:30:11.960

调用函数比仅仅跳转到一条指令要复杂得多。

*   参数如何传递？它们是存储在寄存器中，还是推送到调用堆栈？

*   如何返回值？

*   返回跳转的返回地址放在哪里？如果你有一个递归函数，`$ra`不要削减它。

*   当被调用函数完成时，调用者或被调用者是否负责弹出堆栈帧？

Different [calling conventions](http://en.wikipedia.org/wiki/Calling_convention) have different answers to these questions. Though I've never tried anything like what you're doing, I would assume you'd have to write your machine code to match a convention, then tell the compiler that your function pointer uses that convention (different compilers have different ways of doing this - [gcc does it with function attributes](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)).

# c++ - 具有重载赋值运算符的可变字段

> ID：13162465
> 
> 赞同：0
> 
> 时间：2012-10-31T16:24:16.883
> 
> 标签：c++, operator-overloading, mutable

我有一个声明为可变的 C++ 类字段。当它是 double 类型时，我可以毫无问题地在 const 方法中对其进行修改。但是当我将它的类型切换到一个重载了 operator= 的类时，我得到了这个重载的 operator= 不接受指向 this 的 const 指针的错误。这是 gcc 错误还是语言怪癖？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:35:59.280

当您怀疑编译器错误时，您应该说明您正在使用哪个编译器版本。你知道，每天都有虫子被杀死。

无论如何，这段代码在 GCC 4.6.3 下编译得很好：

```
struct A
{
    void operator=(int)
    {
    }
};

struct B
{
    mutable A a;
};

int main()
{
    const B b;
    b.a = 42;
} 
```

但是，当然，这不是（这是你的情况）：

```
struct A
{
    mutable int m;
    void operator=(int x)
    {
        m = x;
    }
};

struct B
{
    A a;
};

int main()
{
    const B b;
    b.a = 42;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:35:52.067

`mutable`具有对`const`隐式对象参数的限定无效的效果（**5.2.5 类成员访问 [expr.ref]**，第 4 段）：

> [...] 如果`E2`声明为`mutable`成员，则类型`E1.E2` 为“<em>vq12 `T`”。如果`E2`未声明为`mutable`成员，则类型`E1.E2`为“<em>cq12 vq12 `T`”。

5.2.5 适用于每个 9.3.1p3 的隐式成员访问：

> 当在类[...] 的成员中使用*id-expression [...] 时，* *id-expression*被转换为使用运算符左侧的后缀*表达式*的类成员访问表达式。`X`*`(*this)`*`.`**

 **因此，在您的`const`方法中，该`mutable`成员不是（被观察为）const-qualified。您观察到的行为必须是编译器错误的结果。**

# javascript - Javascript中两个到客户端会话之间的通信

> ID：13162470
> 
> 赞同：0
> 
> 时间：2012-10-31T16:24:34.237
> 
> 标签：javascript, jquery, html

这可能是一个疯狂的问题，只是试试我的运气。我们正在构建一个 HTML5 应用程序，我们需要两个用户之间的协作，就像在 Google Docs 中两个用户可以同时编辑文档并且他们可以看到彼此的变化一样。

在我们的例子中，文档永远不会存储在服务器端，我们不想在服务器端托管服务以在两个客户端之间进行同步。

用户将在同一个 WiFi 网络上。

有什么办法可以通过两个客户端用户会话相互通信？我们希望避免在客户端机器上安装任何东西，除了在浏览器中运行我们的应用程序。

谢谢，纳夫尼特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:30:08.787

是的你可以。您可能会觉得这很有趣：[http ://www.webrtc.org/](http://www.webrtc.org/)

这个项目实际上得到了谷歌、Mozilla 和 Opera 的支持，所以可能会有未来

# asp.net - 为什么我无法在我的 asp.net 网站上指定图像的高度和宽度？（包括html输出）

> ID：13162475
> 
> 赞同：1
> 
> 时间：2012-10-31T16:24:56.310
> 
> 标签：asp.net, vb.net, performance

[每当我在 Google 或GMetrix](http://gtmetrix.com)上进行速度测试时，他们总是给我一个 F，因为他们说我的图像尺寸没有指定，所以需要更多的 http 请求。但是在我的 asp.net (vb) 网站上，他们指定的链接是链接按钮，**使用 CssClass**看起来像这样：

```
<asp:Image ID="Image9" runat="server" ImageUrl="~/images/flagpt.png" 
CssClass="flagbutton" tooltip="Veja este site em portuguÃªs" 
title="Veja este site em portuguÃªs"/> 
```

这会产生这个**html 输出**（使用 CssClass），但仍然没有 img 尺寸：

```
<img id="Image9" title="Veja este site em portuguÃªs" 
 class="flagbutton" title="Veja este site em portuguÃªs" 
 src="images/flagpt.png" /> 
```

但是，如果我只是这样放置**height="15" width="26"**，它仍然**不起作用**：

```
 <asp:Image ID="Image7" runat="server" ImageUrl="~/images/flagde.png" 
  height="15" width="26" tooltip="View this website in Deutsch" 
  title="View this website in Deutsch"/> 
```

这会产生这个**html 输出**，但速度测试不会检测到 img 尺寸：

```
<img id="Image7" title="View this website in Deutsch" 
   title="View this website in Deutsch" 
   src="images/flagde.png" style="height:15px;width:26px;" /> 
```

速度测试仍然表明我没有指定我的尺寸。任何可以帮助我解决此问题的建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:19:24.797

首先，不指定图像尺寸不会导致额外的 HTTP 请求。这可能会导致浏览器在下载图像后必须重新排列您的文档，但这是另一个问题。

其次，您*已经*指定了图像尺寸。它就在输出中：

```
style="height:15px;width:26px;" 
```

也不需要指定`width`and属性。`height`

如果您真的想强制输出包含`width`and`height`属性，则需要使用自定义控件或控件适配器。这样的事情应该可以解决问题：

```
public class ImageDimensionsAdapter : WebControlAdapter
{
   protected override void Render(HtmlTextWriter writer)
   {
      var image = Control as Image;
      if (image != null)
      {
         Unit size = image.Width;
         if (!size.IsEmpty && size.Type == UnitType.Pixel)
         {
            writer.AddAttribute(HtmlTextWriterAttribute.Width, size.Value.ToString("###0"));
         }

         size = image.Height;
         if (!size.IsEmpty && size.Type == UnitType.Pixel)
         {
            writer.AddAttribute(HtmlTextWriterAttribute.Height, size.Value.ToString("###0"));
         }
      }

      base.Render(writer);
   }
} 
```

要应用它，`.browser`请在您的`App_Browsers`目录中添加一个包含以下内容的文件：

```
<browsers>
   <browser refID="Default">
      <controlAdapters>
         <adapter
            controlType="System.Web.UI.WebControls.Image"
            adapterType="ImageDimensionsAdapter"
         />
      </controlAdapters>
   </browser>
</browsers> 
```

# jquery - jquery 对话框替换关闭按钮图标

> ID：13162480
> 
> 赞同：5
> 
> 时间：2012-10-31T16:25:19.070
> 
> 标签：jquery, css, jquery-ui, button, jquery-ui-dialog

我想更改 jquery 对话框中的默认关闭图标按钮。

我尝试在 jquery-ui-1.8.23.custom.css 中添加这个 css 类：

```
.ui-icon-myCloseButton { background-image: url(/path/image.png); } 
```

并在对话框定义中：

```
$('#documentsDialog').dialog({
   create: function(event,ui) {
           var widget = $(this).dialog("widget");
           $(".ui-dialog-titlebar-close span",widget).removeClass("ui-icon-closethick").addClass(".ui-icon-myCloseButton");

}); 
```

但没有运气，有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T16:32:53.887

您只是缺少一个右大括号：

```
$('#documentsDialog').dialog({
    create: function(event, ui) {
        var widget = $(this).dialog("widget");
        $(".ui-dialog-titlebar-close span", widget).removeClass("ui-icon-closethick").addClass("ui-icon-myCloseButton");
    }
});​ 
```

但是，最重要的是，您的 css 类应声明为：

```
.ui-icon.ui-icon-myCloseButton{
    background-image: url(https://www.goldbroker.com/pages/images/close.png);
}​ 
```

问题是 .ui-icon 的定义覆盖了您的自定义图像。当您使用上面的 css 重新定义时，它完全可以工作。

在这里，有一个小提琴：http: [//jsfiddle.net/adrianonantua/FuWsK/2/](http://jsfiddle.net/adrianonantua/FuWsK/2/)

# asp.net - 在 aspx 文件中动态添加按钮

> ID：13162481
> 
> 赞同：0
> 
> 时间：2012-10-31T16:25:18.877
> 
> 标签：asp.net, code-behind, dynamically-generated

我想为后面代码中准备的列表中的每个条目添加一个按钮，它可以调用方法并将列表对象作为参数发送。这样做的最佳方法是什么？

内联代码？如果是这样，我如何访问该列表？它应该是一个全局变量吗？ETC..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:37:34.447

如果您只想将控件添加到 aspx 文件中，则可以使用`PlaceHolder control`此控件`is made for this specific need`

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.placeholder.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.placeholder.aspx)

代码示例

```
 HtmlButton myButton = new HtmlButton();

         myButton.InnerText = "Button 1";
         PlaceHolder1.Controls.Add(myButton);

         myButton = new HtmlButton();
         myButton.InnerText = "Button 2";
         PlaceHolder1.Controls.Add(myButton);

         myButton = new HtmlButton();
         myButton.InnerText = "Button 3";
         PlaceHolder1.Controls.Add(myButton);

         myButton = new HtmlButton();
         myButton.InnerText = "Button 4";
         PlaceHolder1.Controls.Add(myButton); 
```

注意：如果你想通过列表自定义你的渲染，你可以使用Repeater、DataList、GridView或其他控件。

# objective-c - 如何在保留斯堪的纳维亚字母的同时为 SQLite 正确编码 NSString

> ID：13162486
> 
> 赞同：5
> 
> 时间：2012-10-31T16:25:31.287
> 
> 标签：objective-c, ios, string, sqlite, nsstring

我目前正在开发一个具有全文搜索功能的 IOS 应用程序。搜索是通过在 sqlite 数据库上执行 select 语句来执行的，但问题是数据库中的许多值都包含斯堪的纳维亚字母（Æ、Ö、Á 等），并且我在转换语句时遇到了麻烦而没有获得十六进制值对于字母。

这是我目前正在做的事情：

```
 const char *sql = [[NSString stringWithFormat:
                     @"SELECT %@\
                     FROM Customer c\
                     JOIN Customer_Metadata cm ON c.CustomerId = cm.CustomerId\
                     WHERE cm.Name LIKE '%%%@%%'\
                     ORDER BY cm.Name", kCustomerSelect, searchString] UTF8String]; 
```

现在 kCustomerSelect 是一个包含我要选择的列的常量，而 searchString 包含用户输入。

这就像普通拉丁字母的魅力一样，但如果我将 Ö 作为 searchString 传递，我会得到 st\xc3\xb6。我知道简单地注销 UTF8 编码的字符串不会给出正确的字符串表示，但问题是我的 select 语句没有给我任何结果。

我在执行查询之前和 SQLite 文档中调用 sqlite3_open() *“如果调用 sqlite3_open() 或 sqlite3_open_v2()，则数据库的默认编码将是 UTF-8，如果 sqlite3_open16，则以本机字节顺序使用 UTF-16 （） 用来。”*。

我尝试通过替换和尝试不同的编码来使用`UTF8String`不同`cStringUsingEncoding:`的编码。他们都没有工作（不是我期待他们，但至少想尝试）。

任何和所有帮助或提示，将不胜感激。

**编辑** 我现在尝试使用 SQLite 数据库浏览器在数据库上运行相同的选择语句，但没有得到任何结果。这让我相信这可能与我使用 FTS3 创建我的 Customer_Metadata 表有关。

德累斯顿先生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:33:18.157

像这样写你的查询：

```
const char *sql = [[NSString stringWithFormat:
                 @"SELECT %@\
                 FROM Customer c\
                 JOIN Customer_Metadata cm ON c.CustomerId = cm.CustomerId\
                 WHERE cm.Name LIKE ?\
                 ORDER BY cm.Name", kCustomerSelect] UTF8String]; 
```

准备好语句后，绑定 searchString：

```
sqlite3_bind_text(statement, 1, [[NSString stringWithFormat:@"%%%@%%", searchString] UTF8String], -1, SQLITE_TRANSIENT); 
```

只要数据库是 UTF-8，那么您就可以输入希腊语、俄语、日语的文本，当然还可以使用各种斯堪的纳维亚字符。

编辑：我刚刚看到你的编辑。如果数据没有正确创建，那肯定是个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:49:21.473

如果您使用的是 FTS3，则默认标记器不会做您想做的事情。

> > > 除非将特定标记器指定为用于创建 FTS 表的 CREATE VIRTUAL TABLE 语句的一部分，否则将使用默认标记器“simple”。简单标记器根据以下规则从文档或基本 FTS 全文查询中提取标记：
> > > 
> > > 术语是符合条件的字符的连续序列，其中符合条件的字符都是字母数字字符和 Unicode 代码点值大于或等于 128 的所有字符。在将文档拆分为术语时，所有其他字符都将被丢弃。他们唯一的贡献是分离相邻的术语。

-- [http://www.sqlite.org/fts3.html#tokenizer](http://www.sqlite.org/fts3.html#tokenizer)

您需要使用自定义标记器，或者查看 icu 或 unicode61 标记器是否适合您。有关这些的信息在上面的链接文档中。

# grails - 用于一对多的 Grails 多选

> ID：13162487
> 
> 赞同：1
> 
> 时间：2012-10-31T16:25:42.130
> 
> 标签：grails, grails-2.0

我在 Grails 2.0.4 中出现错误：

没有方法签名：com.example.User.addToDefaultStorePricingProfiles() 适用于参数类型：(com.example.PricingProfile) 值：bindData() 行上的 [com.example.PricingProfile : 5]。在添加已经持久化的定价配置文件之前，我是否必须先保存用户和存储，还是有更好的方法来做到这一点？

楷模

```
class User {

    transient springSecurityService

    String username
    String password
    boolean enabled
    boolean accountExpired
    boolean accountLocked
    boolean passwordExpired
    Store defaultStore

    Date dateCreated
    Date lastUpdated

    static hasMany = [orders: Order]
}

class Store {

  String storeNumber
  String name
  PricingProfile defaultPricingProfile

  static belongsTo = [retailer: Retailer]

  static hasMany = [pricingProfiles: PricingProfile]
}

class PricingProfile {

  String name

  static belongsTo = [retailer: Retailer]
} 
```

我在 Store 上的定价配置文件视图中使用多项选择

```
<g:select from="${retailer.pricingProfiles}" name="defaultStore.pricingProfiles" value="${user?.defaultStore?.pricingProfiles*.id}" multiple="multiple" optionKey="id" optionValue="name" class="pricingProfiles" /> 
```

存储控制器

```
def save() {
    Retailer retailer = Retailer.get(params.retailer)
    User user = new User()
    user.defaultStore = new Store()

    bindData(user, params)

    user.validate()
    user.defaultStore.validate()

    if (user.hasErrors() || user.defaultStore.hasErrors()) {
        log.error("Error saving store: ${user.errors.fieldErrors} ${user.defaultStore.errors.fieldErrors}")
        flash.storeError = "Please correct the errors below"
        render(view: 'create')
    } else {
        retailer.addToStores(user.defaultStore)
        retailer.addToUsers(user)
        retailer.save(failOnError: true, flush: true)

        flash.confirm = "Store ${user.defaultStore.storeNumber} successfully added"
        redirect (action: 'list', params: [retailer: retailer.id])
    }
} 
```

参数：

```
defaultStore.pricingProfiles: 2
defaultStore.pricingProfiles: 3
defaultStore.pricingProfiles: 4
defaultStore.defaultPricingProfile.id: 2
retailer: 2
submitStore: Save
defaultStore.storeNumber: 888
username: wert
password: wert
defaultStore.name: Fake Store 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T19:39:43.167

看起来您首先需要`Store`为该`User.defaultStore`属性创建一个，然后再尝试将所有内容绑定到`User`

Grails 似乎无法自动为您做到这一点。鉴于此`Store`并且`User`具有不同名称的属性，您可以执行以下操作：

1.  `defaultStore.`从拥有它的参数中删除。
2.  像这样创建对象：

    ```
    Store defaultStore = new Store(params)
    User user = new User(params)
    user.defaultStore = defaultStore 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:49:09.853

我的解决方案是手动添加定价配置文件。

```
<g:select from="${retailer.pricingProfiles}" name="pricingProfiles" value="${user?.defaultStore?.pricingProfiles*.id}" multiple="multiple" optionKey="id" optionValue="name" class="pricingProfiles" /> 
```

然后在控制器中，

```
params.pricingProfiles.each {
    PricingProfile pricingProfile = PricingProfile.get(it)
    user.defaultStore.addToPricingProfiles(pricingProfile)
} 
```

# r - 用 ggplot2 和 R 并排排列条形图

> ID：13162489
> 
> 赞同：1
> 
> 时间：2012-10-31T16:25:46.217
> 
> 标签：r, ggplot2

我正在努力以相同的比例并排显示两个条形图

我的代码看起来像这样

```
library(ggplot2)
library(gridExtra)
#dataframe definition
rm(list=ls(all=TRUE))
mydata <- data.frame(a=1:10,b=c('yes','no'),c=seq(2,20,2))

plot1<- ggplot(mydata, aes(x=factor(mydata$b), y=100*a), order=f, fill=grey) + 
  stat_summary(fun.y="mean", geo    m="bar", colour="black")+xlab("Factor b") + 
  ylab("Value of a")    

plot2<- ggplot(mydata, aes(x=factor(mydata$b), y=c), order=f) + 
  stat_summary(fun.y="mean", geom="bar", colour="black")+xlab("Factor b") + 
  ylab("Value of b")    

grid.arrange(plot1, plot2, ncol=2) 
```

这会产生以下图像。

![ggplot2 的图像输出](../Images/1b24d25ea35bacd0334d15bee649119d.png)

我想以垂直轴对两个条形图具有相同比例的方式定位它们。我在 gridExtra 手册上找不到任何文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:38:00.497

这样的事情呢？

```
library(ggplot2)
library(reshape2)

mydata <- data.frame(a=1:10,b=c('yes','no'),c=seq(2,20,2))
df <- melt(mydata, id.vars="b")
df[which(df$variable=="a"),]$value <- df[which(df$variable=="a"),]$value * 100
ggplot(df, aes(factor(b), value))  + 
  stat_summary(fun.y="mean", geom="bar", colour="black") + facet_grid(.~variable)

# If you need free scales, then:

ggplot(df, aes(factor(b), value))  + 
  stat_summary(fun.y="mean", geom="bar", colour="black") + 
  facet_wrap( ~variable, scales = "free_y") 
```

# c# - 使用 safari 浏览器下载文件时出现问题

> ID：13162494
> 
> 赞同：4
> 
> 时间：2012-10-31T16:26:24.350
> 
> 标签：c#, asp.net, .net, web-applications, sharepoint-2010

我正在开发一个 Web 应用程序，其中一些**.docx**，**.xlsx**需要从 Web 应用程序下载，该应用程序在除 safari 之外的所有顶级浏览器中按预期工作，当我尝试使用**safari**下载文件时，我得到了下载.aspx 页面而不是 .docx 文件，¿我该如何解决这个问题？，这是文件下载的实现代码，在此先感谢您的帮助。

```
 Response.ClearContent();
 Response.ContentType = "application/vnd.openxmlformats-officedocument.wordprocessingml.document";
 Response.AppendHeader("Content-Disposition", "attachment; filename=PruebaSharePoint.docx");
    Response.TransmitFile("~/PruebaSharePoint.docx");
    Response.Flush();
    Response.Close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-15T08:55:26.187

我遇到了同样的问题，通过替换它解决了这个问题：

```
response.setContentType("application/ms-excel"); 
```

有了这个：

```
response.setHeader("Content-Type","application/ms-excel"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:28:36.717

我会将其用于内容类型：

```
Response.ContentType = "application/vnd.ms-word.document.12"; 
```

并将其添加到最后一行：

```
Response.End(); 
```

# adsense - google_conversion_format 的差异值（1 2 3）是什么？

> ID：13162495
> 
> 赞同：10
> 
> 时间：2012-10-31T16:26:40.163
> 
> 标签：adsense

google_conversion_format 的差异值（1,2,3）是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-19T15:51:11.467

1：向访问者显示 1 行通知

2：向访问者显示 2 行通知

3：不通知访客

通知是

```
Google Site Stats
_learn more_ 
```

还有颜色和语言的参数。

谷歌推荐 1 或 2 的原因：

> 添加 Google Site Stats 以赢得客户的信任并帮助他们做出明智的决定。
> 
> 含义：您的网站上会显示一条小消息，告诉客户正在跟踪他们对您网站的访问。我们建议您使用它。
> 
> 重要性：诚实让客户可以就他们的访问做出明智的决定，这对您的业务产生积极影响。
> 
> 怎么做：将您自己的消息或隐私政策添加到您的网站，或选择“Google 站点统计”选项以自动添加消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:37:38.190

google_conversion_format：告诉谷歌你是否想在你的感谢页面上显示他们的小错误，以及它将如何显示。

# ruby-on-rails - 通过 rjs 渲染部分时处理表单对象

> ID：13162501
> 
> 赞同：0
> 
> 时间：2012-10-31T16:26:58.120
> 
> 标签：ruby-on-rails

我有一个表单，其中基于用户在下拉列表中选择的值，表单的其余部分通过部分显示。

**模型：**

```
Book has many supplierdetails
Supplierdetails belongs to Book 
```

**表格代码**

```
<% fields_for @book do |f| %>

 Catalogue Number: <%= f.text_field :BK_CAT_NUM %>

  <% f.fields_for :supplierdetails do |builder| %>
   Supplier Type:
    <%= builder.select(:SUP_TYPE, 
         [['A', 'A'],
          ['B', 'B'],
        ],{ :prompt => "Please select"}       
      ) %>

    <%= observe_field("book_supplierdetails_attributes_0_SUP_TYPE", 
      :url => { :controller => 'books', :action => :display_ab_details },
      :with => "'id='+value") %>

    <div id="div1">  </div>

  <% end %>
<% end %> 
```

**控制器方法**

```
 def display_ab_details
    supplier_type = params[:id]
    if supplier_type == "A"
      render :update do |page|
        page['div1'].replace_html :partial => 'books/test_partial'
      end
    end
  end 
```

**书籍/_test_partial.html.erb**

```
Production Method: </label> <%= builder.select(:SUP_PROD_METHOD, [
        ['prod_1', 'prod_1'],
        ['prod_2', 'prod_2'],
      ],{ :prompt => "Please select"}
    ) %> 
```

部分没有显示，我相信这是因为表单对象。

如果“books/_test_partial.html.erb”包含纯文本，则会正确显示。

通过 rjs 渲染部分时如何处理表单对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:39:59.943

对于您的问题，我没有实际答案，但是由于自 v3.1 以来 RJS 不再出现在 Rails 中，因此您最好赶上潮流并使用不显眼的 javascript 来处理此类事情，因为它现在是首选的方式做这样的事情。获得帮助也会更容易，因为现在大多数 Rails 开发人员都不使用 RJS（实际上，以前也没有很多人使用它）。

一些信息可以在这里找到：[http ://wowkhmer.com/2011/09/19/unobtrusive-ajax-with-rails-31/](http://wowkhmer.com/2011/09/19/unobtrusive-ajax-with-rails-31/)

此外，您正在做的事情可能不起作用，因为您试图在部分中使用构建器。你不能那样做。您需要使用 fields_for 或简单地自己输出输入 HTML，但请注意为输入提供正确的名称。此外，我很确定如果您查看服务器日志，您会在尝试使用 builder 的那一行看到错误。在 Rails 中绝对没有办法在稍后通过 AJAX 请求呈现的部分中使用原始表单的构建器。

还有一个 Railscasts，Ryan 做了一些类似于你正在做的事情，但他没有使用 RJS。我相信这是这一集或与之相关的东西：[http ://railscasts.com/episodes/75-complex-forms-part-3](http://railscasts.com/episodes/75-complex-forms-part-3)

# c - 我做错了什么？下面的代码不会将结构化数据的最后一条记录从 .dat 文件复制到 C 中的另一个 .dat 文件

> ID：13162505
> 
> 赞同：-3
> 
> 时间：2012-10-31T16:27:07.013
> 
> 标签：c, file-io, structure

```
#include<conio.h>

#include<stdio.h>

struct stud

{
  int rollno;
  char name[10];
  char add[10];
};

void main()
{
    struct stud st;

    FILE *fp,*fpp;

    char another='y',ch;

    int a,choice,i;

    printf("***Press 1 to Add record/Create database***\n");

    scanf("%d",&a);

    if(a==1)    /*recording data begins here*/
    {
        fflush(stdin);
        printf("ADD or CREATE NEW?(a/c): ");    /*prompt message to add new record to existing database or to create new database*/
        scanf("%c",&ch);

     if(ch=='a')    /*appending file*/
     {
      add:

      ch='a';

      fp=fopen("Studm.dat","ab");

      while(another=='y' || another=='Y')
      {
        fflush(stdin);

        printf("Enter RollNo. Name & Address\n");

        scanf("%d%s%s",&st.rollno,st.name,&st.add);

        fwrite(&st,sizeof(st),1,fp);

        fflush(stdin);

        printf("\nAdd another record?(y/n): ");    /*prompt message to add another record*/
        scanf("%c",&another);

      }

     }

        if(ch=='c')    /*to create new data file*/
        {

        fp=fopen("Studm.dat","wb");

        printf("Enter RollNo. Name & Address\n");

        scanf("%d%s%s",&st.rollno,st.name,&st.add);

        fwrite(&st,sizeof(st),1,fp);

        fflush(stdin);

        printf("\nAdd another record?(y/n): ");

        scanf("%c",&another);

        fclose(fp);

        if(another=='y' || another=='Y')
        {

         goto add;   /*go to the append file block above*/
        }

    }

      fclose(fp);

    } 
```

每当我在文本编辑器中打开源文件时，给出的所有名称（字符数据）都是可见的，这意味着存储和记录块工作正常。

```
 fflush(stdin);

    printf("\n\nCopying data from studm.dat to stud1.data\n\n");

    fp=fopen("Studm.dat","rb");

    fpp=fopen("Stud1.dat","wb");

    while(fread(&st,sizeof(st),1,fp)==1)    /*loop block to copy data*/
    {
        fflush(stdin);    /*tried every place for flushing the buffer, before and after fwrite with in the loop*/

        fwrite(&st,sizeof(st),1,fpp);

    }
    fclose(fp);

    fclose(fpp); 
```

就像源文件一样，我在执行整个程序代码记录后在文本编辑器中打开了目标文件，直到最后第二条记录都在那里。

```
 printf("\n\nCopying done now reading data from file Stud1.dat\n\n");

    fpp=fopen("Stud1.dat","rb");

    while(fread(&st,sizeof(st),1,fp)==1)
    {

     printf("%d %s %s\n",st.rollno,st.name,st.add);

    }

    fclose(fpp);

    getch();
 } 
```

我认为问题在于复制块，但我不知道它是否与缓冲区有关，或者我编码错误或错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:01:49.970

我做了一些更改以避免复杂性。**看在上帝的份上，不要在代码中使用 goto 标签来替换循环。**

对多次编辑感到抱歉。 **这是最终的工作代码。**只需编译并执行。

```
#include<stdio.h>

struct stud {
    int rollno;
    char name[100];
    char add[100];
};

void main() {
    struct stud st;
    FILE *fp, *fpp;
    int a, i, i_ret_val, another;
    printf("***Press 1 to Add record/Create database***\n");
    scanf("%d", &a);
    fflush(stdin);
    if (a == 1) /*recording data begins here*/
    {
        /*Since you are using the same file name throughout two cases are not
         * required for adding and creating. Can achieve create in append mode fopen*/
        fp = fopen("Studm.dat", "ab");
        do {
            fflush(stdin);
            printf("Enter RollNo. Name & Address\n");
            scanf("%d%s%s", &st.rollno, &st.name, &st.add);
            printf("Fwrite returned %d\n", fwrite(&st, sizeof(st), 1, fp));
            printf("\nAdd another record?1 for yes: \n"); /*prompt message to add another record*/
            scanf("%d", &another);
        } while (another == 1);
        fclose(fp);
    }
    printf("\nNow Copying the file.\n");
    fp = fopen("Studm.dat", "rb");
    fpp = fopen("Stud1.dat", "wb");
    i_ret_val = fread(&st, sizeof(st), 1, fp);
    while (i_ret_val == 1) {
        i_ret_val = fwrite(&st, sizeof(st), 1, fpp);
        i_ret_val = fread(&st, sizeof(st), 1, fp);
    }
    fclose(fp);
    fclose(fpp);
    printf("\n\nCopying done. Now reading data from file Stud1.dat\n\n");
    fpp = fopen("Stud1.dat", "rb");
    i_ret_val = fread(&st, sizeof(st), 1, fpp);
    printf("\nRetrieved from database\n");
    while (i_ret_val == 1) {
        printf("Roll No: %d, Name: %s, Address:%s\n", st.rollno, st.name,
                st.add);
        i_ret_val = fread(&st, sizeof(st), 1, fpp);
    }
    fclose(fpp);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:42:55.753

您可以尝试使用可能解决问题的 feof() ：

```
while (1)
{
 fread ( &st , sizeof ( st ) , 1 , fp);
 fwrite ( &st , sizeof(st) , 1 , fpp);
 if( feof(fp) ) 
  break;
} 
```

# c - HTTP代理服务器C开发

> ID：13162513
> 
> 赞同：0
> 
> 时间：2012-10-31T16:27:35.207
> 
> 标签：c, http, proxy

我需要构建一个处理 GET 方法的 HTTP 代理服务器。
我能够建立从客户端（网络浏览器）到代理服务器的连接，并且代理正在将重新格式化的标头发送到服务器并检索响应。
但是代理没有接收到全部数据。

我的代码如下：

```
main(int argc,char **argv)
 {
//Server binds to particular port
//Waiting for connection");
for(;;)
{
     //Connect to client
    handle_connection(connfd,&cli_addr);
    close(connfd);

}
}
void handle_connection(int connfd, struct sockaddr_in *cli_addr)
{
struct sockaddr_in host_addr;
char buffer[BUFFSIZE];
int rfd,n;
char** http_args;
url* requested_url;
struct hostent *hp;

bzero(buffer, BUFFSIZE);

if ((rfd = read(connfd,buffer,BUFFSIZE)) < 0 ) {
    perror("Error reading from socket.");
    return;
}
buffer[rfd]='\0';

split_line( (char*)buffer, (char**)http_args,2);
requested_url = parse_request(http_args[1]);

//Printing
    printf("\nCommand: %s\n", http_args[0]);
    printf("Url: %s\n", http_args[1]);
    printf("proto: %d\n",requested_url->proto);
    printf("port: %d\n",requested_url->port);
    printf("host: %s\n",requested_url->host);
    printf("File: %s\n",requested_url->file);

if((strcmp(http_args[0],"GET"))!=0)
{
printf("here");
http_error_messages(connfd, http_args[0], 501, "Not Implemented","Proxy does not implement this method");
return;
}

//Connection to request made to server on rfd 
sprintf(buffer, "%s %s HTTP/1.%d\r\nHost: %s:80\r\n\r\n"
        , http_args[0], requested_url->file, requested_url->proto, requested_url->host);
printf("In the Server %s",buffer);
//printf("In the Server %s",get_header);
n = write(rfd,buffer,sizeof(buffer));
shutdown(rfd,2);

char buff[MAXLINE];
while((n = read(rfd, buff, MAXLINE)) > 0) {
    write(connfd, buff, MAXLINE);
    printf("%s",buff);
    }
    if(n<0)
    {
    perror("Error in reading");
    }
    shutdown(rfd,1);
    shutdown(connfd,2);

close(rfd); 

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:59:33.420

在 TCP 套接字上，您需要`read()`重复调​​用，直到读取到预期的终止字符 ( `\n`?)，或者读取了所需的字节数。

`read()`可以返回部分数据或不返回数据，具体取决于 TCP 数据包如何分段/缓冲/混淆。

# google-app-engine - 在开发服务器中调试任务队列？

> ID：13162517
> 
> 赞同：1
> 
> 时间：2012-10-31T16:28:01.060
> 
> 标签：google-app-engine

简单的问题 - 我想记录在任务队列请求中发生的活动。我想在控制台上打印一些东西，例如`print('I made it this far')`，以了解函数调用中到底发生了什么。这可能吗？

编辑：对于那些在小学没有教过如何阅读“上下文线索”的人，我的问题是：如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:50:37.350

您可以启用日志记录：

[https://developers.google.com/appengine/articles/logging](https://developers.google.com/appengine/articles/logging)

```
logging.info('Signed by {0} user'.format(user_name)) 
```

然后检查管理屏幕中的日志。

# c# - 如何将 XML 与 WebMatrix 剃须刀一起使用（C#）

> ID：13162518
> 
> 赞同：1
> 
> 时间：2012-10-31T16:28:06.230
> 
> 标签：c#, xml, razor, webmatrix

我需要知道如何将 XML 与我使用的至少一种语言（最好是 WebMatrix C#）一起使用（特别是阅读），但我过去曾多次尝试使用 JavaScript 执行此操作，但没有在线示例（在 StackOverflow 或其他方式中）已经足够完整，足以让它为我工作（请记住，我没有实际的 XML 经验，我当然已经完成了关于 XPath、XML 等的简单教程，但我们都知道它是多么简短和不完整的这些教程即可）。

我现在想在 WebMatrix C# 中执行此操作，因为在服务器端处理它似乎更易于管理并且对用户来说更快。

当我尝试使用以下代码使用在线给出的一些示例时：

```
@using System.Xml.Linq
@{
    var file = XDocument.Load(Server.MapPath(@"/App_Code/Test.xml"));
    var results = from e in file.Root.Elements() 
       select new { Name = e.Element("someValue").Value, Sales = e.Element("someValueTwo").Value };
    var grid = new WebGrid(results);
} 
```

（我根本不需要使用WebGrid，只是在示例中）并且在名为Test.xml 的App_Code 文件夹中保存了一个测试xml 文档。

尝试从 xml 文档中的两个字段读取一些测试值时出现错误。这是测试xml文档：

```
<?xml version="1.0" encoding="utf-8" ?>
<someNode>
    <someValue>HEY THERE! I'M XML!</someValue>
    <someValueTwo>Another Value</someValueTwo>
</someNode> 
```

这里是我尝试在 cshtml 文件中将值调用到页面下方的地方：

```
 <p>This should be a fun test!<br/>And the value is...:
        @foreach(var f in results)
        {
            <div>@f.Name</div>
            <div>@f.Sales</div>
        }
    </p> 
```

最后，这是我在运行页面时遇到的错误（请记住，与此测试或使用 xml 的任何其他数据、代码或文件 [cs 或其他] 在我的站点中不存在）：

```
Object reference not set to an instance of an object.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.

Source Error: 

Line 4:      var file = XDocument.Load(Server.MapPath(@"/App_Code/Test.xml"));
Line 5:      var results = from e in file.Root.Elements() 
Line 6:         select new { Name = e.Element("someValue").Value, Sales = e.Element("someValueTwo").Value };
Line 7:      var grid = new WebGrid(results);
Line 8:  } 
```

（第 6 行是错误所在的行）

我错过了什么？这些例子看起来真的很简单，但是很明显。它不是。

老实说，我对 WebMatrix 的了解已经足够多，可以在不使用 XML 的情况下完成我的目标，（我总是可以只使用数据库，或渲染页面等），但我有点厌倦了这种无情地逃避我的标记语言，仅仅是因为我永远无法从我使用的任何语言（JavaScript、jQuery、C#）中读取 XML 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:39:55.440

`XmlDocument`我发现使用、`XmlNode`和`XmlNodeList`类以及使用 XPath 来指定我想要的元素已经取得了更大的成功。但是，这需要您对 XML 文件的结构有一定的了解。

```
var file = XmlDocument.Load(Server.MapPath(@"/App_Code/Test.xml"));
var results = file.SelectNodes("someNode/*") 
```

这设置`results`为`XmlNodeList`包含 的所有子节点`someNode`。您可以`results`作为`List`XmlNodes 进行迭代。然后，您可以在每个节点上执行与第 2 行中使用的查询类似的 XPath 查询，以获取子节点。

XPath 语法：http: [//msdn.microsoft.com/en-us/library/aa926473.aspx](http://msdn.microsoft.com/en-us/library/aa926473.aspx)

对于以下使用 C# 而不是 VB.net，我深表歉意，但我不熟悉 VB 的 foreach 语法

```
foreach(XmlNode aNode in results){
  string value = aNode.InnerText
} 
```

会给你“嘿！我是 XML！” 对于`someValue`节点。\

**编辑：**试试这个，根据我在下面的评论中链接的内容：

```
@using System.Xml.Linq
@{
    var file = XmlDocument.Load(Server.MapPath(@"/App_Code/Test.xml"));
    var results = file.SelectNodes("someNode/*");
       select new { Name = e.Element("someValue").Value, Sales = e.Element("someValueTwo").Value };
    /*Do something with each node*/
    foreach(XmlNode aNode in results)
    {
       string value = aNode.InnerText
    }
} 
```

# javascript - iOS6 Safari JavaScript Ajax 轮询错误？

> ID：13162519
> 
> 赞同：3
> 
> 时间：2012-10-31T16:28:12.847
> 
> 标签：javascript, jquery, safari, ios6, mobile-safari

我有一个 Web 应用程序，旨在在 iPhone 等台式机和移动设备上运行。它在 iOS 设备上一直运行良好，直到我们最近将其中一台设备升级到 iOS6。现在我们看到了一个奇怪的错误，它似乎只针对 iOS6 上的 Safari。它在 iOS5 Safari 上仍然可以正常工作，在 iOS6 Chrome 上也可以正常工作。

该错误似乎与我们查询服务器以获取更新的方式有关。我们已将 Ajax 调用设置为每 5 秒发生一次。Ajax 调用返回新数据，客户端使用新数据进行更新。我们现在在 Safari/iOS6 中看到的行为是，当上一个调用返回时，调用会立即发生，结果是页面不断刷新和重新绘制，使其无法使用。小微调器也一直在运行，使页面看起来永远不会停止加载。

这是设置它的客户端 JavaScript 代码：

```
$(document).ready(function(){

   getUpdates();
   var refresh = 5000;
   setInterval("getUpdates()", refresh);

});

function getUpdates() {
    $.post("status.jsp", {}, function(status){
       // do client-side rendering here
    }, "json");
} 
```

这是Safari中的错误吗？我的代码中的错误？有解决方法吗？我的网络应用程序现在在 iPhone 上没用，情况不是很好。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:55:16.237

我的两分钱你不应该使用 setInterval，而是使用 setTimeout 递归调用 getUpdates。这样，如果服务器需要很长时间才能响应或您的 ui 正忙于处理，您的请求总是相隔 5 秒，而不是让它们堆叠在一起。

```
$(document).ready(function(){
    getUpdates();
});

function getUpdates() {
    $.post("status.jsp", {}, function(status){

        // do client-side rendering here

        setTimeout(getUpdates, 5000);
    }, "json");
} 
```

# javascript - 更改 Facebook 通知消息

> ID：13162523
> 
> 赞同：2
> 
> 时间：2012-10-31T16:28:23.393
> 
> 标签：javascript, facebook

因此，我使用以下方法使用 javascript API 发送 facebook 通知：

```
FB.ui({method: 'apprequests',
    message: message,
    to: ids
}, requestCallback);
alert('Notification Sent!'); 
```

工作正常，它只是当您收到通知并单击左上角的通知时不会输出您的消息只是说：

> “ **NAME**向您发送了请求”

所以我想知道如何将消息放在通知栏中。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:08:14.170

您是否使用在 Facebook.com 上运行的应用程序（例如 Canvas 应用程序或页面应用程序）进行测试？如果是这样，您应该改用通知 API：

[https://developers.facebook.com/docs/app-notifications/](https://developers.facebook.com/docs/app-notifications/)

这是较新的版本，允许您自定义实际通知的文本。对话框中的`message`参数只是自定义出现在 App Center[请求页面](https://www.facebook.com/appcenter/requests)`apprequests`上的一段单独的文本。它从未打算用于实际自定义通知文本本身。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:12:38.350

添加`new_style_message`参数，通知应该与您的消息一起使用。那么您发送通知的块将如下所示：

```
FB.ui({method: 'apprequests',
    message: message,
    to: ids,
    new_style_message: true
}, requestCallback);
alert('Notification Sent!'); 
```

希望它有效，实际上它是一个未记录的参数，所以我想说不要完全依赖它。顺便说一句，我还是用它。

# wordpress - Wordpress publish_post 触发太频繁

> ID：13162526
> 
> 赞同：2
> 
> 时间：2012-10-31T16:28:29.493
> 
> 标签：wordpress, plugins, publish, slug

我正在编写一个插件，它只是在发布新帖子时向订阅者发送电子邮件（因此当它处于待处理、更新或草稿等状态时不应发送任何电子邮件）

在插件定义中，我有：

```
add_action('plugins_loaded', 'setup_plugin_actions');

function setup_plugin_actions(){
  if(has_action('new_to_publish')){
    $simple_email_subscriber = new email_subscriber();

    add_action('new_to_publish', $simple_email_subscriber->email_subscribers());
  }
}

And in my email_subscribers method I have:

class email_subscriber(){
  function email_subscribers(){
    //get post information
    $post = get_post($post_id);

    $post = get_post( $post_id );
    if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) return false;

    if(wp_is_post_revision($post->ID) || wp_is_post_autosave($post->ID)) return;

    //email code
    ......
  }
} 
```

一个非常简单的代码，它只是试图向**publish_post**方法添加一个动作监听器。

但是，由于 publish_post 确实经常触发，所以每当我进行更新、新发布，或者即使我只是停留在 wordpress 页面上并且它会自动更新时，我都会收到 8 封电子邮件。

我试图找到一些只有在真正发布新帖子时才会发生的回调：**new_to_post**

根本不起作用。

有人能帮我吗？

干杯菲尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:32:31.630

您收到这么多电子邮件的原因是您没有正确添加操作，如下所述。就目前而言，您实际上是在多次调用您的函数来发送电子邮件并将函数的结果挂钩到动作（实际上并没有做任何事情），而不是将函数挂钩到动作。

您`add_action`有几个问题 - 您正在将您的方法添加到转换`new_to_publish`操作（仅在帖子状态为“新”并更改为“发布”时触发）而不是`publish_post`捕获从任何状态发布的帖子，并且您传递的方法无效 - 如果参数是对象上的方法，则参数是函数或数组的字符串，其中第一个元素是对象，第二个元素是函数。它应该看起来像：

```
add_action('publish_post', array($simple_email_subscriber, 'email_subscribers') ); 
```

您的函数也没有将 the`$post_id`作为参数，因此它永远不会知道要加载什么帖子。你的定义应该是：

```
function email_subscribers($post_id){ /* your code */ } 
```

您还在`$post = get_post( $post_id );`函数中调用了两次，这是不必要的，但如果您想确保此函数仅在帖子状态为`publish`无论如何调用时才运行，请添加：

```
$post = get_post( $post_id );
if ($post->post_status != "publish") return; 
```

# c - 已定义常量的数据类型是什么？

> ID：13162528
> 
> 赞同：7
> 
> 时间：2012-10-31T16:28:30.803
> 
> 标签：c

我正在尝试这段代码。

```
#include <stdio.h>
#include <stdlib.h>
#define LOWER 0
#define UPPER 300

int main()
{
    printf("%d %f",LOWER,UPPER);
    return 0;
} 
```

我读了一些答案，它说定义的常量没有类型，也没有分配任何内存。那么，如果我在 printf() 中指定不同的类型说明符，为什么会出现错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T16:38:32.303

在您的示例中，两者都作为 int 值推送到 printf 的可变参数列表中。这可能会导致格式字符串中的格式标志`printf()`与基础类型不匹配。请参阅[这篇文章](https://stackoverflow.com/questions/12995789/is-it-dangerous-to-promote-types-in-printf-arguments/12996090#12996090)，了解可能出现未定义行为的原因。

尽管看起来很可怕，但要知道您可以从中获得所需内容的一种方法`printf`是执行以下操作：

```
#include <stdio.h>
#include <stdlib.h>
#define LOWER 0
#define UPPER 300

int main()
{
    printf("%d %f", (int)LOWER, (float)UPPER);
    return 0;
} 
```

在这两种情况下，这些都是在编译*之前*被替换的预处理器宏。请注意，如果不能将 UPPER 提升为 a `float`，您将收到编译器错误，这是一件好事。如果可以，它将是，并且`printf()`将找到打印所需内容所需的字节。`int`和 LOWER 分别也是如此。上面的printf经过预处理后会退化成这样：

```
printf("%d %f", (int)0, (float)300); 
```

现在想象你的宏被声明为：

```
#define LOWER 100.0
#define UPPER 300.0 
```

预处理后原件`printf()`将呈现为：

```
printf("%d %f", 100.0, 300.0); 
```

这似乎是对的，但是 100.0 浮点数真的会被`%d`格式字符串处理程序正确切除`printf()`吗？确保。做我们之前做的：

```
printf("%d %f", (int)LOWER, (float)UPPER); 
```

现在预处理为：

```
printf("%d %f", (int)100.0, (float)300.0); 
```

您可能会在 float-to-int 强制转换时收到编译器警告，但可能不会。除非你想掷骰子，你传递的东西的大小是字节大小的，`printf()`你需要确保一切都匹配。当格式说明符期望一件事时，这可能会特别令人沮丧，传入不同的东西，但它似乎一切正常，但神秘地只在某些平台上：

```
printf("%ld\n", UPPER); 
```

这可能“有效”，但如果有效，那*只是因为 a* `long int` *和 a* `int` *在您的平台上的大小相同*。将此代码移动到一个平台，其中`long int`和`int`是不同的位宽及其 UB。

底线：如果您将预处理器宏传递到可变参数列表中，例如`printf()`对推送的数据有大小预期（例如由格式字符串指定），您最好确保您推送的内容是预期的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T16:30:42.030

在这种情况下，类型是文字常量的类型。`0`和都是`300`适合 的整数常量`int`，所以它们的类型是`int`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T16:30:27.473

它是无类型的；只需将其视为源的文本替换：

```
printf("%d %f", 0, 300); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T16:33:14.733

`#define`是一个[预处理器指令](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=/com.ibm.xlcpp8a.doc/language/ref/lvalue.htm)。编译后不存在。相反，相应的值将在代码中被替换。在这种情况下，宏扩展后正在编译的实际代码是

```
//header stdio.h
//header stdlib.h

int main()
{
    printf("%d %f",0,300);
    return 0;
} 
```

是的，在这种情况下，0,300 都是整数。！

# ios - 同步 TabBar/NavigationBar 上的背景颜色

> ID：13162529
> 
> 赞同：0
> 
> 时间：2012-10-31T16:28:35.203
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller, uibarbuttonitem

我有一个带有 4 个选项卡的简单应用程序。它们都包含一个`UINavigationbar`，我在上面放了一些`UIBarButtons`。其中之一`UIButton`将在某些时候更改背景颜色 - 这可能发生在任何选项卡上。现在，我想通知其他导航控制器，以便他们可以将 Button 的背景颜色设置为相同的颜色。用户应该在所有选项卡上看到相同的颜色。

到目前为止我所做的：我创建了一个在`ViewDidLoad`方法中创建按钮的超类。但是……现在呢？

有任何想法吗？

顺便说一句，我使用 Xcode 4.5 为 iOS > 4.0 开发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:18:17.013

您可以使用 KVO / NSNotifications / 自定义委托模式中的任何一种。

-曼

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:47:33.197

您可以使用协议通知您超类有关颜色变化的信息。如果您是该主题的新手，我建议您观看此[youtube - 协议](http://www.youtube.com/watch?v=1nbH7v6gMPg)

# c# - 更改 Int64 中的字节

> ID：13162532
> 
> 赞同：2
> 
> 时间：2012-10-31T16:28:42.240
> 
> 标签：c#, bit-manipulation

最近我问了一个问题：[Replace byte in a int](https://stackoverflow.com/questions/13161285/replace-byte-in-a-int)

这显示了如何替换整数上的字节。**我也需要对 Int64 做同样的事情**。显然我不擅长这个哈哈。我不知道为什么将 int 替换为 Int64 不能使其工作。换句话说，我将最后一个问题的解决方案修改为：

```
static Int64 ReplaceByte1( int index , Int64 value , byte replaceByte )
{
    return ( value & ~( 0xFF << ( index * 8 ) ) ) | ( replaceByte << ( index * 8 ) );
}

static Int64 ReplaceByte2( int index , Int64 value , byte replaceByte )
{
    // how many bits you should shift replaceByte to bring it "in position"
    var shiftBits = 8 * index;

    // bitwise AND this with value to clear the bits that should become replaceByte
    Int64 mask = ~( 0xff << shiftBits );

    // clear those bits and then set them to whatever replaceByte is
    return value & mask | ( replaceByte << shiftBits );
} 
```

这在使用大值时不起作用。例如将方法调用为：

```
 // returns 12345678848  where it should return 3755744309
        var test1 = ReplaceByte1( 4 , 12345678901 , 0 );

        // returns 12345678848  where it should return 3755744309
        var test2 = ReplaceByte2( 4 , 12345678901 , 0 ); 
```

我怎样才能让它也与 Int64 一起工作？我究竟做错了什么？唯一有效的方法是最后一种最慢的方法。

## 编辑

**我已经做了替换，但我仍然得到不同的结果**。为什么？看一看：

```
 // method that words
    static Int64 SlowReplace ( int index , Int64 value , byte replaceByte )
    {
        var bytes = BitConverter.GetBytes( value );
        bytes[ index ] = replaceByte;

        return BitConverter.ToInt64( bytes , 0 );
    }

    static Int64 ReplaceByte1 ( int index , Int64 value , byte replaceByte )
    {
        return ( value & ~( (long)0xFF << ( index * 8 ) ) ) | ( replaceByte << ( index * 8 ) );
    }

    static Int64 ReplaceByte2 ( int index , Int64 value , byte replaceByte )
    {
        // how many bits you should shift replaceByte to bring it "in position"
        var shiftBits = 8 * index;

        // bitwise AND this with value to clear the bits that should become replaceByte
        Int64 mask = ~( ( Int64 )0xff << shiftBits );

        // clear those bits and then set them to whatever replaceByte is
        return value & mask | ( replaceByte << shiftBits );
    }        

    static void Main ( string[ ] args )
    {
        var a = SlowReplace( 4 , 12345678901 , 255 ); //  1098972404789 corect
        var b = ReplaceByte1( 4 , 12345678901 , 255 ); // 3755744511 incorrect
        var c = ReplaceByte2( 4 , 12345678901 , 255 ); // 3755744511 incorrect            

        Console.Read( );            
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:42:57.133

现在的问题在于`replaceByte << shiftBits`表达式。请参阅`<< Operator` [文档](http://msdn.microsoft.com/EN-US/library/a1sway8w%28v=VS.110,d=hv.2%29.aspx)。

文档指出，如果第一个操作数是 32 位数量（在这种情况下是，因为对`byte`变量执行了隐式转换），则移位计数由第二个操作数的低五位给出。在这种情况下，因为`shiftBits`等于 32 = 2^5，在二进制表示中是 100000，所以低五位是 00000。

除了显式强制转换 ( `(long)0xFF`) 之外，您还可以在常量后面加上 an`l`或 an`L`以将它们标记为`long`/ `Int64`（或`ul`/`UL`表示`ulong`/ `UInt64`），但`0xFFL`某些人可能会认为它们不那么美观/可读。对于这种`replaceByte << shiftBits`情况，需要显式强制转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:32:59.933

您需要将常量`0xff`转换为`long`：

```
Int64 mask = ~( (Int64)0xff << shiftBits ); 
```

如果你不这样做并且`index`大于 3 那么`mask`将有错误的值，因为文字`0xff`是 an`int`并且还有[这个规则](http://msdn.microsoft.com/en-us/library/a1sway8w.aspx)：

> 如果第一个操作数是 int 或 uint（32 位数量），则移位计数由第二个操作数的低五位给出。即，实际移位计数为 0 到 31 位。

由于在这种情况下，移位计数是 2 的幂并且大于 31，它的低五位将全部为零，这将导致根本没有移位（好像`shiftBits == 0`）。所以`mask`会有错误的值，它会清除错误的位`value`，产生错误的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T16:35:04.023

替换`0xFF << ( index * 8 )`为`(long)0xFF << ( index * 8 )`

# html - 内容 div 的多个背景图像

> ID：13162533
> 
> 赞同：0
> 
> 时间：2012-10-31T16:28:47.447
> 
> 标签：html, css

我在使用 css 将两个背景图像放在一个 div 中时遇到了麻烦。第一个图像是一个透明且具有圆形边缘的盒子的顶部。下一个是同一图像的主体的 10 像素高，没有圆角。无论内容如何，​​我都希望将第一张图像放在顶部，然后将下一张图像在 y 轴上重复直到页面底部。有人可以帮我处理css吗？每次我尝试时，第二张背景图片都会覆盖第一张图片，除非有内容，否则不会重复。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:43:16.480

你必须使用 div 的 height 属性来处理这个问题。如果您不设置属性，它会将图像一层一层地包裹起来，这就是您现在面临的问题。

请参阅以下链接，您将看到如何执行此操作的多个选项。

[我可以使用 CSS 制作多个背景图片吗？](https://stackoverflow.com/questions/423172/can-i-have-multiple-background-images-using-css)

希望这可以帮助..

# sql-server - 在更新脚本的生成中包含默认约束名称

> ID：13162538
> 
> 赞同：6
> 
> 时间：2012-10-31T16:28:53.317
> 
> 标签：sql-server, visual-studio-2012, constraints, database-project, schema-compare

我在 Visual Studio 2012 中使用**SQL Server 数据库项目**，在比较和生成更新脚本时遇到以下问题：

在 Visual Studio 中，我添加了一个具有默认约束的列，例如：

```
[NewColumn] NVARCHAR(50) CONSTRAINT [DF_ExistingTable_NewColumn] NOT NULL DEFAULT N'' 
```

不幸的是，默认约束的名称在以下情况下不会出现：

*   将我的项目与实际数据库进行比较（*架构比较）*
*   生成更新脚本（从*Schema Compare*中）

创建的更新脚本包含以下脚本（无约束名称）：

```
ALTER TABLE [dbo].[ExistingTable]
    ADD [NewColumn] NVARCHAR (50) DEFAULT N'' NOT NULL; 
```

这似乎是一个重大疏忽，所以我想知道在哪里可以找到魔术开关以在所有数据库操作中包含默认约束的名称。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-01T14:42:33.437

我认为您的定义中的顺序可能不正确。尝试将“NOT NULL”部分移动到行尾而不是约束定义的中间。

```
[NewColumn] NVARCHAR(50) CONSTRAINT [DF_ExistingTable_NewColumn] DEFAULT N'' NOT NULL 
```

# c# - C# new 和 override 属性关键字的区别

> ID：13162542
> 
> 赞同：1
> 
> 时间：2012-10-31T16:29:08.200
> 
> 标签：c#, asp.net, stack-overflow

我有一个带有面板的[ASP.NET](http://en.wikipedia.org/wiki/ASP.NET)用户控件，用于隐藏和显示内容，也就是说，

```
<asp:Panel runat="server" ID=pnlContainer">
    <!-- Some fairly uninteresting content -->
</asp:Panel> 
```

我有一个可见的属性作为覆盖，也就是说，

```
 public override bool Visible 
    {
        get { return pnlContainer.Visible; }
        set { pnlContainer.Visible = value;  } 
    } 
```

当我设置它时，我得到一个堆栈溢出异常但是当我将关键字更改为时`new`，即，

```
 public new bool Visible 
    {
        get { return pnlContainer.Visible; }
        set { pnlContainer.Visible = value;  } 
    } 
```

一切正常。为什么是这样？我想我对这些关键字的理解通常很差，它在这里显示。

还：

如果我没有放任何关键字 - Visual Studio 会发出警告说应该使用`new`或`override`关键字，因为我正在屏蔽用户控件上已经存在的成员。

在某种程度上，我使用面板来控制用户控件上的可见性的奇怪做法不是这里的问题。在贡献者的帮助下，这显然很疯狂，不应该这样做。但让我感兴趣的问题是`override`and`new`关键字的行为方式如此不同，以及这样做的原因。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T16:54:00.650

Microsoft 页面*[Knowing When to Use Override and New Keywords (C# Programming Guide)](http://msdn.microsoft.com/en-us/library/ms173153%28v=vs.80%29.aspx.)*总结了不同之处。

查看那里指示的代码部分。它也在下面列出：

```
public static void TestCars2()
{
    Car[] cars = new Car[3];
    cars[0] = new Car();
    cars[1] = new ConvertibleCar();
    cars[2] = new Minivan();
}

foreach (Car vehicle in cars)
{
    System.Console.WriteLine("Car object: " + vehicle.GetType());
    vehicle.DescribeCar();
    System.Console.WriteLine("----------");
} 
```

同样的原则也适用于您的来源。.NET 框架将页面上的所有控件视为基本 Control 类的集合。`Control.Visible`是虚拟财产。

这意味着：当 ASP.NET 框架`Control.Visible`为所有控件调用时，从您的源调用的唯一`Control.Visible`属性是标记为 的属性`override`，这是人们通常认为的标准多态性。否则，如果您将属性声明为`new`，则当 ASP.NET 框架调用 时`Control.Visible`，您的属性将永远不会被调用。

因此，覆盖会导致堆栈溢出异常，因为您随后会调用 your `panel.Visible`，它会递归地多次调用自身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:41:45.213

`new`关键字隐藏了继承的成员（有关示例，请参见Knowing *[When to Use Override 和 New Keywords（C# Programming Guide）](http://msdn.microsoft.com/en-us/library/ms173153%28v=vs.80%29.aspx)*）。

因此，当您`new`在这种情况下应用时，在某些时候该对象被引用为其基类，并且基类设置器被调用而不是派生类设置器（它具有无限循环，因为您的设置器调用自身）。

# c# - 处理程序“ExtensionlessUrlHandler-Integrated-4.0”在其模块列表中有一个错误模块“ManagedPipelineHandler”

> ID：13162545
> 
> 赞同：269
> 
> 时间：2012-10-31T16:29:19.587
> 
> 标签：c#, asp.net, iis, web-applications

老实说，我曾试图在 IIS 上使用一个肮脏的把戏，就在我以为我会逃脱它的时候，我意识到我的解决方法不起作用。这是我尝试做的事情：

1）我有一个 ASP.NET 应用程序，它具有继承**IProcessHostPreloadClient的****Preloader**类，并在*Preload*方法实现中进行所有繁重的初始化（应用程序很复杂，它是一个巨大系统的一部分，所以它需要大约 2 分钟来建立所有必要的连接服务并预先实例化一些 Unity 注册）。

 ***2) 我有很多工作需要在应用程序关闭时完成（取消订阅、断开连接、处理......），我想最好的地方是在**Global.asax**中的 *Application_End* 方法中。

3）当我有用户活动时，一切正常（启动包含上述Web应用程序的应用程序池后的第一个请求将导致调用*Application_Start*，然后在应用程序池停止或回收时调用*Application_End*），但是问题当没有用户活动并且应用程序在活动 48 小时后尝试自行重启时发生（配置要求）。由于没有任何请求，因此没有正式开始申请。因此，它不能优雅地停止，因为 *Application_End* 不会被调用。

4）现在是混乱的部分......我试图在*Preload*方法的末尾从代码发出 GET 请求，它起作用了。但是这个解决方案对我来说似乎很糟糕，即使它有效。所以，我尝试了很多东西，我尝试的最后一件事是：

```
SimpleWorkerRequest swr = new SimpleWorkerRequest(string.Empty, string.Empty, tw);
HttpRuntime.ProcessRequest(swr); 
```

......这已经达到了它的目的。*Application_Start* 被调用，（我检查了响应，它包含应该在初始请求中显示的登录页面）并且在应用程序池关闭时，应用程序通过在 *Application_End* 中完成必要的工作而优雅地结束。

**但**

以这种方式启动（预加载和启动）应用程序后，当我想通过 Web 浏览器访问应用程序时发生了这种情况：

> HTTP 错误 500.21 - 内部服务器错误处理程序“ExtensionlessUrlHandler-Integrated-4.0”在其模块列表中有一个错误模块“ManagedPipelineHandler”

我无法弄清楚这一点。谁能告诉我为什么会发生这种情况以及如何解决？

如果我不明白这一点，我将回到第一个解决方案（从代码发送 GET 请求），但这个问题会让我感到困扰，因为我什至不知道出了什么问题。

* * *

## 回答 #1

> 赞同：654
> 
> 时间：2012-11-07T09:29:46.517

尝试使用`aspnet_regiis -i`. 它对我有用。

.NET 4 的可能路径（来自提升的命令提示符）：

```
c:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe -i 
```

[http://forums.iis.net/p/1190643/2026401.aspx](http://forums.iis.net/p/1190643/2026401.aspx)

* * *

## 回答 #2

> 赞同：184
> 
> 时间：2013-02-26T22:54:21.857

如果您在使用 Windows 8/Windows Server 2012 和 .Net 4.5 时遇到此错误，请按照以下说明操作： [http ://www.britishdeveloper.co.uk/2013/01/handler-extensionlessurlhandler.html](http://www.britishdeveloper.co.uk/2013/01/handler-extensionlessurlhandler.html)

转到**“打开或关闭 Windows 功能”** 然后 Internet 信息服务然后万维网服务然后应用程序开发功能然后启用 ASP.NET 4.5

这对我有用（尽管 Windows Server 2012 中的向导和措辞略有不同，但您会明白的）。话虽如此，为什么在通过 Web 平台安装程序安装所有内容（包括所有依赖项）之后有必要这样做是完全超出了我的范围......

* * *

## 回答 #3

> 赞同：68
> 
> 时间：2013-07-31T11:43:53.913

尽管遵循了此页面上的大部分建议，但我仍然在 Windows Server 2012 上遇到问题。安装 .NET Extensibility 4.5 为我解决了这个问题：

`Add Roles and Features > Server Roles > Web Server (IIS) > Web Server > Application Development > .NET Extensibility 4.5`

* * *

## 回答 #4

> 赞同：58
> 
> 时间：2017-01-05T05:57:20.843

对于**Windows 10 / Windows Server 2016**，使用以下命令：

`dism /online /enable-feature /featurename:IIS-ASPNET45 /all`

建议的答案`aspnet_regiis`不适用于 Windows 10（Creators Update 及更高版本）或 Windows Server 2016：

> C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe -i
> Microsoft (R) ASP.NET RegIIS 4.0.30319.0
> 管理实用程序，用于在本地计算机上安装和卸载 ASP.NET。
> 版权所有 (C) 微软公司。版权所有。
> 开始安装 ASP.NET (4.0.30319.0)。
> **此版本的操作系统不支持此选项。管理员应该使用“打开/关闭 Windows 功能”对话框、服务器管理器管理工具或 dism.exe 命令行工具来安装/卸载带有 IIS8 的 ASP.NET 4.5。** 有关详细信息，请参阅[http://go.microsoft.com/fwlink/?LinkID=216771](http://go.microsoft.com/fwlink/?LinkID=216771)。
> 完成安装 ASP.NET (4.0.30319.0)。

有趣的是，“打开/关闭 Windows 功能”对话框不允许我取消勾选 .NET 或 ASP.NET 4.6，只有上面的 DISM 命令有效。不确定功能名称是否正确，但它对我*有用。*

* * *

## 回答 #5

> 赞同：42
> 
> 时间：2014-07-31T15:40:19.137

运行以下命令之一：

对于 32 位 Windows 操作系统：

```
c:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe -i 
```

对于 64 位 Windows 操作系统：

```
c:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe -I 
```

* * *

## 回答 #6

> 赞同：26
> 
> 时间：2014-06-23T11:05:49.830

这个[https://stackoverflow.com/a/13266763/1277458](https://stackoverflow.com/a/13266763/1277458)完美运行。但是，如果您有 64 位操作系统，请在路径中使用 Framework64 而不是 Framework：

```
c:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe -i 
```

* * *

## 回答 #7

> 赞同：25
> 
> 时间：2013-11-26T21:35:59.167

**问题**

您在不是为它设计的场景中使用[SimpleWorkerRequest](http://msdn.microsoft.com/en-us/library/system.web.hosting.simpleworkerrequest(v=vs.110).aspx)。您**在 IIS 内部**使用它。如果您查看之前的 MSDN 链接（重点是我的）：

> 提供 HttpWorkerRequest 抽象类的简单实现，可**用于在 Internet 信息服务 (IIS) 应用程序之外托管 ASP.NET 应用程序**。您可以直接使用 SimpleWorkerRequest 或对其进行扩展。

此外，如果您查看[System.Web.Hosting 命名空间](http://msdn.microsoft.com/en-us/library/System.Web.Hosting(v=vs.110).aspx) （`SimpleWorkerRequest`在此命名空间中）的 MSDN 文档，您还将看到与上述类似的内容（再次强调的是我的）：

> **System.Web.Hosting 命名空间提供了从Microsoft Internet 信息服务 (IIS) 之外**的托管应用程序托管 ASP.NET 应用程序的功能。

**解决方案**

我建议删除对`SimpleWorkerRequest`. 相反，您可以使用 Microsoft 解决方案来确保您的网站在回收后自动启动。您需要的是[用于 IIS 7.5 的 Microsoft 应用程序初始化模块](http://www.iis.net/downloads/microsoft/application-initialization)。配置并不复杂，但您需要了解确切的选项。这就是为什么我还推荐[IIS 7.5 的应用程序初始化 UI](http://blogs.msdn.com/b/amol/archive/2013/01/25/application-initialization-ui-for-iis-7-5.aspx)。UI 由 MSDN 博主编写。

那么微软解决方案究竟是做什么的呢？它会做你想做的事——在应用程序池启动后，IIS 会向你的网站发送一个“get”请求。

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2016-01-09T21:35:35.207

在我的情况下（Windows 10 + IIS 10），我必须打开“**打开或关闭 Windows 功能**”，然后转到 Internet 信息服务 > 万维网服务 > 应用程序开发功能 > 并检查**ASP.NET 4.6**

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2018-02-22T01:09:37.313

我解决了这个问题，在“打开或关闭 Windows 功能”选项中添加了 ASP.NET 4.7

[![在此处输入图像描述](../Images/d0e6fe273625a8a6791b6b507a116da8.png)](https://i.stack.imgur.com/UkPYT.png)

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2017-03-10T15:17:33.940

将其作为自己的帖子，因为这让我花了好几个小时。

我在这里和其他地方看到了十几个关于这个问题和 aspnet_regiis 修复的类似帖子。他们不为我工作，而且 aspnet_regiis 表现得很奇怪，只是列出选项等。

正如上面的用户 ryan-anderson 所示，您无法输入 .exe

对于那些对服务器上 IIS 之外的东西不太满意的人，您可以通过简单的步骤执行以下操作。

1.  在与此路径类似的文件夹中找到 aspnet_regiis。c:\Windows\Microsoft.NET\Framework\v4.0.30319\

2.  在开始菜单或任何地方右键单击命令提示符并告诉它以管理员身份运行。使用 Windows 的“运行”功能是行不通的，或者不适合我。

3.  返回到 aspnet_regiis 可执行文件。单击并将其拖动到命令提示符中，或将地址复制粘贴到命令提示符中。

4.  删除，如果它在那里，最后的 .exe。这是关键。在末尾添加 -i（空格减去眼睛）。进入。

如果您正确执行此操作，您将看到它开始安装 asp.net，然后告诉您安装成功。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2016-10-31T12:25:51.267

确保您已在**IIS 管理器**`application-site`中将您的版本设置`v2.0`为：`v4.0`

 **> 应用程序池 > 您的应用程序 > 高级设置 > .NET Framework 版本

之后，安装您的`ASP.NET`.

对于 32 位操作系统 (Windows)：

> C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe -i

对于 64 位操作系统 (Windows)：

> C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe -i

**在 IIS 管理器中重新启动`application-site`并享受。**

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2013-08-19T09:43:36.370

我知道这是一个老歌，但我想我可能会增加一些价值。对于我们这些在域外运行服务器核心的人（域成员可以远程运行服务器管理器来添加/删除功能/角色），您必须求助于命令行。

Powershell 用户可以输入“Install-WindowsFeature Web-Asp-Net45”

这应该相当于使用服务器管理器。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2017-12-14T15:10:48.643

安装了 .net 4.7 时，我遇到了同样的错误消息。

解决方案是按照前面提到的一篇文章使用“打开或关闭 Windows 功能”，其中“.NET Framework 4.7 高级服务”->“ASP.NET 4.7”已经被选中。

在列表的下方，还有“Internet 信息服务”和子注释“应用程序开发功能”->“ASP.NET 4.7”，这也需要检查。

启用此功能时，会启用其他功能...我只需按下确定按钮，问题就解决了。 [Windows 功能对话框的屏幕转储](https://i.stack.imgur.com/yMTcx.png)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2015-11-20T09:42:35.717

我正在使用 Windows Server 2012。.NET 可扩展性 4.5 功能已启用。WebDAVM 模块已移除。我仍然在 ASP.NET 路由“/docs”上收到 500.21 错误。

**将“skipManagedModules”更改为 false 可以解决问题。**

```
<applicationInitialization doAppInitAfterRestart="true" skipManagedModules="false">
        <add initializationPage="/docs" />    
</applicationInitialization> 
```

感谢[https://groups.google.com/forum/#!topic/bonobo-git-server/GbdMXdDO4tI](https://groups.google.com/forum/#!topic/bonobo-git-server/GbdMXdDO4tI)

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2020-02-19T19:37:31.493

安装 .NET 4.7 对我有用。我之前只安装了 3.5。[![在此处输入图像描述](../Images/c074f20051810c8cfce02e373a96fb8d.png)](https://i.stack.imgur.com/4YJjP.png)

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2013-02-15T12:13:31.977

我遇到了这个问题，发现删除以下文件夹有帮助，即使是非 Express edition.Express：

`C:\Users\<user>\Documents\IISExpress`

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2015-03-30T20:33:36.893

这个错误上周突然开始发生在我身上，影响了我机器上的现有网站。我在这里尝试任何建议都没有运气。最终，我完全从 IIS 中删除了 WebDAV（Windows 功能 -> Internet 信息服务 -> 万维网服务 -> 通用 HTTP 功能 -> WebDAV 发布）。在此之后我做了一个 IIS 重置，我的错误最终得到了解决。

我只能猜测是 Windows 更新引发了这个问题，但我不能确定。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-02-18T10:39:28.977

`503 Service Unavailable`对我来说，从我的服务器中删除 WebDAV 会导致应用程序在使用`PUT`or时返回错误消息`DELETE`，因此我再次重新安装了它。我还尝试完全删除 .NET Framework 4.5 并重新安装它，还尝试按照建议重新注册，但无济于事。

*我可以通过为单个*应用程序池禁用 WebDAV 来解决此问题，这在使用`PUT`or时停止了“坏模块”错误`DELETE`。

## 为单个应用程序池禁用 WebDAV：

1.  单击受影响的应用程序池
2.  `WebDAV Authoring Tools`在列表中查找
3.  点击打开
4.  点击`Disable WebDAV`右上角的。

呸呸呸！

我仍然将删除项目留在我的`web.config`文件中。

```
 <system.webServer>
    <modules>
      <remove name="WebDAVModule"/>
    </modules>
    <handlers>
      <remove name="WebDAV" />
    </handlers>
 <system.webServer> 
```

[这个链接](http://www.exactsoftware.com/Docs/DocView.aspx?DocumentID=%7Bc288fa96-2eea-414f-843f-29a2a1531405%7D)是我找到说明的地方，但不是很清楚。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-05-21T15:53:50.407

您可以通过将 iis 中的“ExtensionlessUrlHandler-Integrated-4.0”类型更改为 System.Web.DefaultHttpHandler 来修复它

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2015-05-26T14:54:49.313

这对于 OP 来说可能不是一个有用的解决方案，但它涉及相同的“错误”消息。

我们在 IIS8.5 上托管 PHP 页面，并正确安装了 .NET 4.5。

我们利用预加载功能来确保我们的应用程序始终全面响应。

一段时间后，我们开始随机收到此错误。

在 web.config 中：我将 skipManagedModules 设置为 true，-> 不要这样做！

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.webServer>
<applicationInitialization skipManagedModules="false" doAppInitAfterRestart="true">
  <add initializationPage="/" />
</applicationInitialization>
... 
```

虽然网站是php，但到分页的路由是由模块管理的！！！

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-01-07T12:00:09.667

我也遇到了这个问题。我的 MVC4 应用程序在带有 IIS 8.5 的 Windows Server 2012 R2 上运行。这些发布的解决方案都不适合我...通过 IIS 功能安装缺少的框架可以解决它，但安装总是失败。

我不得不使用`Web Platform Installer`并安装了以下软件包：

[![在此处输入图像描述](../Images/f9bfb369c5fb1b337ae798bdb5b6ad7e.png)](https://i.stack.imgur.com/3hAi4.png)

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2017-03-05T14:19:45.857

我在托管在共享托管服务器上的 Web 应用程序中遇到了这个问题。所以显然没有直接访问 IIS，所以不能应用这里提出的许多解决方案。

在托管服务提供商的控制面板上，我为 IIS 和 ASP.Net 启用了错误日志记录。然后才知道错误实际上在于缺少 cshtml。*****

# mdx - 较低级别的 MDX Sum 值

> ID：13162550
> 
> 赞同：2
> 
> 时间：2012-10-31T16:29:34.363
> 
> 标签：mdx, olap

我是 OLAP 新手，我刚刚设计了我的第一个立方体，现在我正在尝试进行一些简单的分析。我有一个简单的时间维度，如下所示：

```
- Year
  - Month
    - DayOfWeek 
```

现在我想总结一下周一的所有措施。我不想知道每年每个月的星期一的度量（我能够做到这一点），但对于所有的星期一。只有一个值。

是否有可能，如果，如何？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:05:08.393

是时候分解 AdventureWorks 示例并查看它们的时间维度了。您的维度需要更多属性。应该有按层次结构排列的 Year、Month 和 Date 的属性，但 DayofWeek、MonthofYear 等的属性应该是分开的，如果您需要聚合它们的话。

# jquery - 如何存储动态按钮文本

> ID：13162554
> 
> 赞同：0
> 
> 时间：2012-10-31T16:29:40.443
> 
> 标签：jquery, asp.net

我有下面的代码，我想在服务器端获取动态创建按钮的文本，但是在第二次单击按钮时，按钮被禁用，我不想拥有它的文本属性。

这是我如何使用循环创建动态按钮的代码

```
for (int i = 0; i < numberofplants; i++)
    {
       builderchart.Append("<th class=style8>");
      builderchart.Append("<input type='button' id='btn" + i.ToString() + "' value='" + dtplants.Rows[i][0] + "' style='width:55px;' class='inputbutton'>");
                        builderchart.Append("</th>");
    }

   .is-highlighted {
    background-color:#6FA478;

        $(function () {
            $('input[type=button]').on('click', function (e) {
                e.preventDefault();
                $(this).toggleClass('is-highlighted');
            });
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:42:21.737

如果您只希望按钮在第一次单击时处于活动状态，请使用 jQuery 方法`one`。

```
 $(function () {
        $('input[type=button]').one('click', function (e) {
            e.preventDefault();
            $(this).toggleClass('is-highlighted');
        });
    }); 
```

// 编辑

如果您希望在第二次单击时删除“文本”，或添加新文本：

```
 $(function () {

             var count = 1;

             $('input[type=button]').on('click', function (e) {

                 e.preventDefault();

                  count +=1;

                  if( count % 2 === 0 ){

                      $( this ).prop( 'value', 'New Text' )
                               .css( 'background-color', 'green');

                 } else {

                     // Do Something else

                 }
           });
       }); 
```

我不确定您想要实现什么，但使用上述内容，您可以跟踪“点击”的数量，然后根据计数应用一些操作。

// 编辑 02 - 粗糙，但应该可以工作

```
 $(function () {

        var 
        count = 1,
        text;

         $( 'input[type=button]' ).on('click', function (e) {

         e.preventDefault();

           count+=1;

          if( count % 2 === 0 ){

              text = $( this ).val();

               $( this ).prop( 'value', 'New Text' )
                        .css( 'background-color', 'green' );

              $.post( 'some.php', { value: text }, function( data ){ 

               // Do Something

              }

             } else {

              text = $( this ).val();     

              $( this ).prop( 'value', 'default' )
                       .css( 'background-color', '' );

              $.post( 'some.php', { value: text }, function( data ){ 

                  // Do Something else

              }

             }

       });
   });      ​ 
```

# c# - 我的网站在没有 PDB 文件的情况下崩溃

> ID：13162555
> 
> 赞同：4
> 
> 时间：2012-10-31T16:29:45.370
> 
> 标签：c#, asp.net, iis-7, iis-6

我有一个在我的开发机器上运行良好的 Web 应用程序，但是当我将它安装在另一台机器上时，它只是在我添加到 DLL 的新方法之一上崩溃。

深入研究它，安装的 PDB 文件在我的开发机器上时不会使用它们。所以我试图在开发机器上删除它们，我的新方法同样崩溃。其他方法根本不会崩溃。

我的方法只是抛出一个“NullPointerException”，当 PDB 文件存在时，它永远不会出现。

我知道 PDB 文件的用途（我在发布之前搜索了这个站点），但这不应该改变应用程序的工作方式。应该是？

**编辑：**忘了说一切都在`<release>`not `<debug>`。这就是我质疑 PDB 文件的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T09:40:24.580

我发现我的代码出了什么问题。在记录器部分，使用 log4Net，我有这样的代码：

```
public static void Info(string strMsg)
{
    StackTrace st = new StackTrace(true);
    StackFrame sf = st.GetFrame(1);
    _log.Info(string.Format("{0,-25} L{1:0000} {2}", sf.GetFileName().Substring(sf.GetFileName().LastIndexOf(@"\") + 1), sf.GetFileLineNumber(), strMsg));
} 
```

所以我将条目更改为如下内容：

```
public static void Debug(string strMsg)
{
    StackTrace st = new StackTrace(true);
#if DEBUG
    StackFrame sf = st.GetFrame(1);
    _log.Debug(string.Format("{0,-25} L{1:0000} {2}", sf.GetFileName().Substring(sf.GetFileName().LastIndexOf(@"\") + 1), sf.GetFileLineNumber(), strMsg));
#else
    _log.Debug(string.Format("{0}",strMsg));
#endif            
} 
```

现在没有 PDB 文件一切正常。因此，从堆栈跟踪中提取信息需要 PDB 文件。

# javascript - Jquery使用复选框按类而不是名称更改下拉列表

> ID：13162560
> 
> 赞同：0
> 
> 时间：2012-10-31T16:30:02.883
> 
> 标签：javascript, jquery, drop-down-menu

我想通过单击复选框来更新所有下拉列表。我正在使用 foreach 来获取所有选中的复选框。

这将更新页面上的所有内容，但我想使用类名而不是字段名来完成此操作

```
$('select[name=order_status] option[value=1]').attr('selected', 'selected'); 
```

我想要这样的东西“.shipping_'+do_csv+'

```
$('.option_completed').click(function() {
    var do_csv = [];
    $("input[name='options[]']:checked").each(function() {
        do_csv.push($(this).val());
        $(".shipping_'+do_csv+' option[value=1]").attr('selected', 'selected');
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:32:38.707

如果您的类名是`shipping_somethinghere`并且`dp_csv`是`somethinghere`'s 的数组，那么我认为这就是您要查找的内容：

```
$.each(do_csv, function(i, val) {
    $(".shipping_" + val + " option[value=1]").attr('selected', 'selected');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:34:40.750

替换这个：

```
$(".shipping_'+do_csv+' option[value=1]").attr('selected', 'selected'); 
```

接着就，随即：

```
$(".shipping_"+$(this).val()+" option[value=1]").attr('selected', 'selected'); 
```

# html - 如何使这个 div 边距为零和更多性质

> ID：13162562
> 
> 赞同：-3
> 
> 时间：2012-10-31T16:30:06.100
> 
> 标签：html, css

我在这里有一个页面[http://pastebin.com/Hva36KEn](http://pastebin.com/Hva36KEn) ，我是 css 新手。如何使#header div的边距为零并将其与页面顶部对齐并使其更加自然？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:33:06.673

确保它们上的`body`and`html`元素`margin`或`padding`等于零。这可能会导致你`#header`被推倒。

有点跑题了：你写道你是 CSS 新手，这就是为什么我认为我会包含这个。**不要使用内联 CSS。**这是阅读有关应用 CSS 的不同方法的好地方：http: [//www.w3schools.com/css/css_howto.asp](http://www.w3schools.com/css/css_howto.asp)

# javascript - ExtJS 4.1 - Store.add()（后跟同步）与 Model.save()

> ID：13162570
> 
> 赞同：6
> 
> 时间：2012-10-31T16:30:21.930
> 
> 标签：javascript, performance, extjs

**第一：**我意识到这里有人问过这个问题：[在 ExtJS 中，调用 Model.save() 还是 Store.Sync() 更好？](https://stackoverflow.com/questions/10115001/in-extjs-is-it-better-to-call-model-save-or-store-sync)- 但是我希望进一步研究这一点，特别是关于最大限度地减少客户端和服务器上的 XHR 和不必要的开销。我认为链接问题中没有解决这些问题。

我有一个为企业资源管理设计的大型应用程序，由许多模型、视图和控制器组成。我通过建立 Ext.Ajax`requestComplete`和`requestException`事件的侦听器来处理来自服务器的所有响应。我采用了这种方法，而不是在每个模型的代理事件上编写重复的事件处理程序`afterRequest`。这使我能够让我的所有后端（使用 Zend 框架）控制器响应三个参数`success`：`message`和`data`.

在成功请求（即 HTTP 200）后，run for 方法`requestComplete`将检查 JSON 响应中的上述参数。如果`success`是`false`，则预计将包含一条错误消息`message`，然后将其显示给用户（例如，“保存该产品时出现问题。产品名称无效”）。如果成功为真，则根据请求的类型采取行动，即创建、读取、更新或销毁。成功后`create`，新记录被添加到适当的数据存储中，删除后记录被销毁，依此类推。

我选择采用这种方法，而不是向商店添加记录并调用商店的`sync`方法，以最小化 XHR 和其他往返行程。我目前保存/更新数据的方法是将请求发送到后端并在 Ext 前端对结果做出反应。为此，我使用数据填充模型并调用 model.save() 来创建/更新请求，或者调用 model.destroy() 来删除数据。

我发现当从存储中添加/更新/删除记录，然后调用 store.sync() 时，我必须以一种感觉尴尬的方式对服务器的响应做出反应。以删除记录为例：

1.  首先，通过以下方式从存储中删除记录`store.remove()`
2.  `store.sync()`在我将商店`autoSync`设置为 时调用`false`。
3.  这会触发来自商店模型代理的 AJAX 销毁请求。
4.  这就是它变得奇怪的地方......如果从数据库中删除行时服务器上出现错误，则响应将返回`success: false`，但是记录已经从 ExtJS 数据存储中删除。
5.  在这一点上，我可以调用`store.sync()`, `store.load()`（两者都需要往返）或从请求中获取记录并将其添加回存储区，后跟 a`commitChanges()`以避免调用额外的同步/加载，从而避免不必要的往返。

添加记录也是如此，如果在向数据库添加数据时服务器在某处发生故障，则该记录仍在 ExtJS 存储中，必须手动删除以避免与`store.sync()`or的往返`store.load()`。

为了避免整个问题，正如我之前解释的那样，我实例化了我的一个模型对象（例如 Product 模型），用数据填充它，然后调用`myModel.save()`. 这反过来调用代理的`create`或`update`取决于模型的 ID，并触发适当的 AJAX 请求。如果后端发生故障，前端存储仍然保持不变。在成功的请求（读取：`success: true`，而不是 HTTP 200）上，我手动将记录添加到 store 并调用`store.commitChanges(true)`，有效地将 store 与数据库同步，而无需额外的往返行程并避免不必要的开销。对于所有请求，服务器将使用新的/修改的数据以及成功参数进行响应，并有条件地在客户端上显示一条消息。

我在这里遗漏了什么，还是这种方法是最小化 XHR 和服务器/客户端开销的好方法？如果需要，我很乐意提供示例代码，但是我觉得这是一个包含基本代码的相当笼统的概念。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:50:54.547

I think you have eloquently argued your position. I don't see anything wrong with the position you have taken. My only reproach is to point out that autoSync setting on a store that backs editable grid is a far less verbose way of accomplishing the task, albeit with less control.

To add, the overhead which you point out is typically due to the unexpected or I would call edge cases that may need special handling or an extra refresh of data. You could add listeners for those specific cases and leave the rest functioning with terse defaults.

# node.js - 这可能与 node.js 吗？（JSON、SQL 和推送更改）

> ID：13162574
> 
> 赞同：0
> 
> 时间：2012-10-31T16:30:33.157
> 
> 标签：node.js

我有一个网站，最多可以有 500 个并发查看者，数据每三秒更新一次。目前每个用户都有一个 AJAX 对象，它每三秒调用一个网页，查询数据库并返回结果。

我想做的是让每个客户端都获得一个指向 node.js 对象的套接字，这个 node.js 将每 3 秒轮询一次数据库以获取更新的数据，如果它有更新的数据，那么它将被宣布（理想情况下通过 JSON）然后每个客户端都会将数据推送给它并相应地更新页面。

如果这是可能的，有人对我从哪里开始有建议吗？我对 JS 相当熟悉，但 node.js 似乎让我感到困惑。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:37:07.210

我自己对 node.js 的经验很少。

这是绝对可行的，看起来像是 node.js 的完美用例。

我建议从[Express](http://expressjs.com/) Tutorial 开始，然后再使用[socket.io](http://socket.io/)。我不知道您使用的是哪个 DBMS，但可能也有一个不错的软件包。看看[这个列表](https://github.com/joyent/node/wiki/modules#wiki-database)。

# objective-c - 如何在IOS中创建嵌套滚动视图字段

> ID：13162575
> 
> 赞同：0
> 
> 时间：2012-10-31T16:30:32.433
> 
> 标签：objective-c, ios, uiscrollview, nested-forms

如何在 IOS 中创建[这样的嵌套字段。](http://crystalsoft-sy.com/agenda.html)稍后我将从这些字段创建一个 .plist。

我猜另一个滚动视图中的滚动视图是最好的解决方案？如果是这样，我如何跟踪输入字段的 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:34:42.453

*   ![在此处输入图像描述](../Images/550f86d084e94375fc7493c7ce57fb20.png)

*   身份跟踪：我没有把你带到这里。如果您使用 NSCore Data is not NSManagedContextObject 足以处理所有这些（或者我在这里错过了什么）！

*   曼

# php - 将复选框变量中的传递值从php中分离出来

> ID：13162576
> 
> 赞同：0
> 
> 时间：2012-10-31T16:30:35.140
> 
> 标签：php, arrays, variables, parameter-passing

我发现了一些类似的例子，但没有一个特别适用于我的案例。

在我的表单页面上，我有以下格式的多个复选框输入：

```
<input type='checkbox' name='AwayMoneyLine[]     value='$Date[$i];$VisitingRotNum[$i];$VisitingParticipantName[$i];$AwayMoneyLine[$i]'/> 
```

复选框循环遍历每个 XML 数据集`$i`。提交后，我想在表单中显示值。这是我正在使用的一些代码：

```
 if(isset($_POST['AwayMoneyLine'])){   
     $bet_type1="Moneyline";  
     $NewDate1 = $_POST['$AwayMoneyLine[0]'];  
     $NewRotation1 = $_POST['AwayRotNum'];  
     $NewTeamParticipant1 = $_POST['AwayParticipantName'];  
     $NewBet1 = $_POST['AwayMoneyLine'];  
     $NewSpread1 = "";  
     var_dump($NewBet1);  
     echo "<tr><td>$bet_type1</td><td>$NewDate1</td><td>$NewRotation1</td><td>$NewTeamParticipant</td><td>$NewBet1</td></tr>";  
} 
```

但是，不会显示任何值。我知道这些值被传递为

```
var_dump($NewBet1);  
// gives array(1) { [0]=> string(39) "10/31/2012 20:10;703;Denver Nuggets;100" } 
```

任何帮助分解这些值，将它们分配给变量并显示它们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:39:16.180

使用以下方式，

```
if(isset($_POST['AwayMoneyLine'])) {
    foreach($_POST['AwayMoneyLine'] as $value) {
      $d = explode(';',$value);
      echo $d[0]."<br>"; //this gives date
      echo $d[1]."<br>"; // this gives rotation
      echo $d[2]."<br>"; // participant name
      echo $d[3]."<br>"; // bet
    }
} 
```

# windows - 如何使用 vbscript 删除多个文件夹、桌面和开始菜单快捷方式

> ID：13162579
> 
> 赞同：0
> 
> 时间：2012-10-31T16:30:43.817
> 
> 标签：windows, vbscript

我以前从未做过任何 vbscript，所以我不知道我的问题是否很简单。以下是必须完成的步骤流程：

检查是否存在并删除 c:\test1 中的文件夹，如果找到并继续。如果没有找到继续。检查是否存在并删除 c:\programfiles\test2 中的文件夹，如果找到并继续。如果没有找到继续。检查桌面快捷方式和开始菜单快捷方式是否存在，如果找到则删除。如果不退出。

我可以使用以下代码删除 2 个文件夹：

```
strPath1 = "C:\test1"
strPath1 = "C:\test1"
DeleteFolder strPath1
DeleteFolder strPath1
Function DeleteFolder(strFolderPath1)
Dim objFSO, objFolder
Set objFSO = CreateObject ("Scripting.FileSystemObject")
If objFSO.FolderExists(strFolderPath) Then
    objFSO.DeleteFolder strFolderPath, True
End If
Set objFSO = Nothing 
```

但是我需要运行一个脚本来删除不同路径中的 2 个文件夹，2 个快捷方式，一个在开始菜单中，一个在桌面上。

我正在尝试使用此代码删除桌面上的快捷方式：

```
Dim WSHShell, DesktopPath
   Set WSHShell = WScript.CreateObject("WScript.Shell")
   DesktopPath = WSHShell.SpecialFolders("Desktop")
   on error resume next
   Icon = DesktopPath & "\sample.txt"
   Set fs = CreateObject("Scripting.FileSystemObject")
   Set A = fs.GetFile(Icon)
   A.Delete
   WScript.Quit 
```

它适用于桌面上的 txt 文件，但是如何从桌面和开始菜单中删除应用程序的快捷方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:59:11.173

```
strPath1 = "C:\test1"
strPath2 = "C:\test2"

DeleteFolder strPath1
DeleteFolder strPath2

DeleteShortcut

'-------------------------------------------------------
Sub DeleteFolder(strFolderPath)
  Set fso = CreateObject ("Scripting.FileSystemObject")
  If fso.FolderExists(strFolderPath) Then
    fso.DeleteFolder strFolderPath, True
  End If
End Sub

'-------------------------------------------------------    
Sub DeleteShortcut()
  Set WSHShell = WScript.CreateObject("WScript.Shell")
  DesktopPath = WSHShell.SpecialFolders("Desktop")

  shortcutPath = DesktopPath & "\MyShortcut.lnk"
  Set fso = CreateObject("Scripting.FileSystemObject")
  If fso.FileExists(shortcutPath) Then
    Set myFile = fso.GetFile(shortcutPath)
    myFile.Delete
  End If
End Sub 
```

# spring - 如何在没有接口的情况下使用加载时间编织配置 AspectJ

> ID：13162582
> 
> 赞同：14
> 
> 时间：2012-10-31T16:30:58.690
> 
> 标签：spring, aop, aspectj, spring-transactions, load-time-weaving

在我的项目中，我目前使用 AspectJ（由于某些限制而不仅仅是 Spring AOP）在编译时进行编织。为了加快 Eclipse 上的开发，我想在 Load Time 进行编织。我成功地做到了这一点，但有一个主要限制：为我的服务使用包含一些事务方法的接口。**如果我用它的实现而不是它的接口声明服务，在调用者类中，没有编织，因此不支持事务。**

那么**如果 AspectJ 支持它，如何配置 AspectJ with Load Time Weaving without Interface ？**

我创建了一个重现该问题的小项目：

以下测试失败。

以下测试成功，如果：

*   注入的服务是用它的接口而不是它的实现来声明的（即用“@Inject MyService 服务”替换“@Inject MyServiceImpl 服务”），测试成功。

*   编织是在编译期间执行的（在这种情况下，配置、POM 和 Spring 应用程序上下文显然不同）。但我的目标是在加载时进行编织以避免每次保存 Java 文件时的编织阶段。

*   使用 Spring AOP (tx:annotation-driven mode="proxy")，即基于代理的解决方案，代替 AspectJ。但是在这种情况下，我们遇到了自调用问题，即目标对象中的某个方法调用目标对象的其他方法，即使调用的方法带有@Transactional 标记，在运行时也不会导致实际事务。

aspectj-ltw/src/test/java/mycompany/aspectj_ltw/MyServiceImplTest.java

```
package mycompany.aspectj_ltw;

import static junit.framework.Assert.assertTrue;

import javax.inject.Inject;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:/META-INF/spring/applicationContext.xml" })
public class MyServiceImplTest {

    @Inject
    MyServiceImpl service;

    @Test
    public void shouldBeExecutedInTransaction() {
        assertTrue(this.service.isExecutedInTransaction());
    }
} 
```

aspectj-ltw/src/main/java/mycompany/aspectj_ltw/MyService.java

```
package mycompany.aspectj_ltw;

public interface MyService {

    boolean isExecutedInTransaction();

} 
```

aspectj-ltw/src/main/java/mycompany/aspectj_ltw/MyServiceImpl.java

```
package mycompany.aspectj_ltw;

import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;
import org.springframework.transaction.support.TransactionSynchronizationManager;

@Service
public class MyServiceImpl implements MyService {

    @Transactional
    public boolean isExecutedInTransaction() {
        return TransactionSynchronizationManager.isActualTransactionActive();
    }

} 
```

aspectj-ltw/src/test/resources/META-INF/applicationContext.xml

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd   http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd   http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd   http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <context:component-scan base-package="mycompany.aspectj_ltw" />

    <context:load-time-weaver aspectj-weaving="on" />
    <aop:config proxy-target-class="true"/>
    <aop:aspectj-autoproxy proxy-target-class="true"/>
    <tx:annotation-driven mode="aspectj"
        transaction-manager="transactionManager" proxy-target-class="true" />

    <bean class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close" id="dataSource">
        <property name="driverClassName" value="org.h2.Driver" />
        <property name="url" value="jdbc:h2:mem:mydb" />
        <property name="username" value="sa" />
        <property name="password" value="" />
    </bean>
    <bean class="org.springframework.jdbc.datasource.DataSourceTransactionManager"
        id="transactionManager">
        <property name="dataSource" ref="dataSource" />
    </bean>
</beans> 
```

aspectj-ltw/src/test/resources/META-INF/aop.xml

```
<!DOCTYPE aspectj PUBLIC
        "-//AspectJ//DTD//EN" "http://www.eclipse.org/aspectj/dtd/aspectj.dtd">
<aspectj>
  <weaver options="-showWeaveInfo -debug -verbose -XmessageHandlerClass:org.springframework.aop.aspectj.AspectJWeaverMessageHandler">
        <include within="mycompany.aspectj_ltw..*"/>
  </weaver>
</aspectj> 
```

aspectj-ltw\pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>mycompany</groupId>
    <artifactId>aspectj-ltw</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>jar</packaging>
    <name>aspectj-ltw</name>

    <properties>
        <spring.version>3.0.5.RELEASE</spring.version>
    </properties>

    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.2</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>${spring.version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aspects</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>1.7.0</version>
        </dependency>
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjweaver</artifactId>
            <version>1.7.0</version>
        </dependency>
        <dependency>
            <groupId>javax.inject</groupId>
            <artifactId>javax.inject</artifactId>
            <version>1</version>
        </dependency>
        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib-nodep</artifactId>
            <version>2.2</version>
        </dependency>
        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.4</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>com.h2database</groupId>
            <artifactId>h2</artifactId>
            <version>1.2.143</version>
        </dependency>
        <dependency>
            <groupId>ch.qos.logback</groupId>
            <artifactId>logback-core</artifactId>
            <version>0.9.24</version>
        </dependency>
        <dependency>
            <groupId>ch.qos.logback</groupId>
            <artifactId>logback-classic</artifactId>
            <version>0.9.24</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>log4j-over-slf4j</artifactId>
            <version>1.6.1</version>
        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <configuration>
                    <forkMode>always</forkMode>
                    <argLine>
                        -javaagent:C:/maven-2_local_repo/org/springframework/spring-instrument/3.0.5.RELEASE/spring-instrument-3.0.5.RELEASE.jar
                    </argLine>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

运行测试的 VM 参数：

```
-javaagent:C:/maven-2_local_repo/org/springframework/spring-instrument/3.0.5.RELEASE/spring-instrument-3.0.5.RELEASE.jar 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-04T14:34:58.910

如果我没记错的话，这里的问题不是由于 AspectJ，而是由于事情在精确的 JUnit 用例中的工作方式。运行测试时，`MyServiceImplTest`首先加载类，然后创建 Spring 上下文（您需要测试类的注释来获取适当的运行器和配置位置），因此在利用任何 Spring AOP 机制之前。也就是说，至少，当我几个月前遇到同样的情况时，我想出的解释......因为 javaagent 从 JVM 启动开始就在那里，所以必须完全阅读/理解编织者的代码才能准确解释为什么它在这里失败（我没有：p）。

所以无论如何，`MyServiceImplTest`类型，连同它的所有成员类型，与它一起加载——这也适用于方法签名中的类型——不能被编织。

要解决此问题：

*   要么避免在测试类成员和方法签名中使用编织类型（例如，像你一样使用接口）
*   或将 AspectJ weaver 添加到您的 javaagents（除了 spring-instrument 之一）；有了这个，如果我没记错的话，Spring 应该能够使其基于 AOP 的机制正常工作：

    -javaagent:/maven-2_local_repo/org/aspectj/aspectjweaver/1.7.0/aspectjweaver-1.7.0.jar -javaagent:/maven-2_local_repo/org/springframework/spring-instrument/3.0.5.RELEASE/spring-instrument -3.0.5.RELEASE.jar

注意：在您的`META-INF/aop.xml`中，可能需要添加`-Xreweavable`weaver 选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-27T10:57:26.290

首先，如果您使用的是 maven，请设置您的 pom.xml：

```
 <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-instrument</artifactId>
        <version>3.1.2.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjweaver</artifactId>
        <version>1.7</version>
    </dependency> 
```

然后你必须使用 aspectj 编译器来编译你的代码。这个编译器在 META-INF/aop.xml 中生成一个 aop.xml 文件

（我正在使用 eclipse sts） 之后，我想运行一个 Junit 测试。所以你必须在 Eclipse 运行配置窗口中设置你的 VM 参数：-javaagent:${ASPECTJ_WEAVER_1.7}\aspectjweaver-1.7.0.jar -javaagent:${SPRING_INSTRUMENT}\spring-instrument-3.1.2.RELEASE。罐

其中 ${ASPECTJ_WEAVER_1.7} ${SPRING_INSTRUMENT} 是环境变量。使用 var 按钮创建这些变量（位于窗口的右下角）。这些变量定位到 aspectjweaver-1.7.0.jar 和 spring-instrument-3.1.2.RELEASE.jar 所在的文件夹。跟着助手做这个。这并不难。注意前面的 javaagent 行没有任何不可见的奇怪字符或类似字符。这听起来很奇怪，但我不得不多次重写同一行，直到 eclipse 说这条行没问题。

然后，您可以运行您的 Junit 测试。您可以看到的第一个是 aspectj 运行时加载。稍后您将看到弹簧加载......之后您的测试将运行，没有任何弹簧问题或类似问题。这是一个繁重的过程。

我希望这些信息可以帮助你

问候

# mysql - 通过 LAN 访问 MAMP 中的 WordPress 网络安装

> ID：13162583
> 
> 赞同：0
> 
> 时间：2012-10-31T16:30:59.923
> 
> 标签：mysql, wordpress, mamp, lan

我在本地安装了 WordPress 网络并使用 MAMP Pro 运行服务器。我想从同一 LAN 中的另一台计算机或设备查看所有站点。

有没有一种干净简单的方法来做到这一点？

我有 MAMP 设置，以便它进入一个名为 Sites 的文件夹。在该文件夹中，每个项目都有自己的文件夹。有些项目只是简单的 HTML 和 CSS。我可以从我的 iPad 上很好地查看它们。一个项目是 WordPress 安装，我无法加载该文件夹。我的猜测是这与 MySQL 和试图访问它的不同 IP 有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-23T14:26:10.267

主要问题是因为 wordpress 使用数据库中的服务器地址，wordpress 使用命名数据库选项中的根 url `home`，`siteurl`因此如果您尝试在他们的计算机之外访问 wordpress，它可能会得到不正确的 css 和 javascript 路径。

如果您想在不进行重定向的情况下获得正确的路径，您可以在下面定义动态根 url`wp-config.php`

在下面添加这个脚本`define('ABSPATH', dirname(__FILE__) . '/');`

```
/**
 * get home url from absolute path
 * @return string url to main site
 * lafif@astahdziq.in
 */
function get_dynamic_home_url(){
    $base_dir  = ABSPATH; // Absolute path
    $doc_root  = preg_replace("!${_SERVER['SCRIPT_NAME']}$!", '', $_SERVER['SCRIPT_FILENAME']);
    $base_url  = preg_replace("!^${doc_root}!", '', $base_dir);
    $protocol  = empty($_SERVER['HTTPS']) ? 'http' : 'https';
    $port      = $_SERVER['SERVER_PORT'];
    $disp_port = ($protocol == 'http' && $port == 80 || $protocol == 'https' && $port == 443) ? '' : ":$port";
    $domain    = $_SERVER['SERVER_NAME'];
    $home_url  = "${protocol}://${domain}${disp_port}${base_url}";

    return $home_url;
}
$url = get_dynamic_home_url();
define('WP_SITEURL', $url);
define('WP_HOME', $url); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T16:07:32.627

完成这项工作的关键是将您的 WordPress 和站点 URL 更改为您的 IP 地址 + MAMP 端口，在 WordPress 仪表板的设置 > 常规中。

例如，如果这些 URL 当前是`localhost`，您应该将它们设置为`mysite.local:8888`。

如果/当您将 WordPress 安装移动到另一台服务器时，请记住将这些 URL 更改回正确的值。

# python - Scipy LeastSq 误差线

> ID：13162585
> 
> 赞同：2
> 
> 时间：2012-10-31T16:31:12.283
> 
> 标签：python, scipy, least-squares

我正在使用来自 SciPy 的 LeastSq 将实验光谱拟合到理论期望值。当然存在与实验值相关的误差。我怎样才能把这些喂给 LeastSq 或者我需要一个不同的例程？我在文档中找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:47:33.143

scipy.optimize.leastsq函数没有内置的方法来合并权重[。](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.leastsq.html)但是，[scipy.optimize.curve_fit](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.curve_fit.html)函数确实有一个`sigma`参数，可用于指示每个 y 数据点的方差。

`curve_fit`用作`1.0/sigma`权重，其中`sigma`可以是长度数组`N`，（与 长度相同`ydata`）。

因此，您必须以某种方式根据误差条的大小推测每个 ydata 点的方差，并使用它来确定`sigma`.

例如，如果您声明误差条的一半长度代表 1 个标准差，那么方差（`curve_fit`称为`sigma`）将是标准差的平方。

```
sigma = (length_of_error_bar/2)**2 
```

参考：

*   [加权最小二乘法的维基百科页面](http://en.wikipedia.org/wiki/Least_squares#Weighted_least_squares)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-25T19:40:29.570

我自己也在做这件事，所以我将分享我所做的事情，也许我们可以从社区中获得一些意见。我有一组在确定的时间间隔内采集的数据点，我从中计算了标准偏差。我想用 sin 函数来拟合这些点。Leastsq 通过基于一组参数 p 最小化残差或数据点与拟合函数之间的差异来做到这一点。我们可以通过将残差除以方差或标准差的平方来加权残差。

如下：

```
from scipy.optimize import leastsq
import numpy as np
from matplotlib import pyplot as plt
def sin_func(t, p):
    """ Returns the sin function for the parameters:
        p[0] := amplitude
        p[1] := period/wavelength
        p[2] := phase offset
        p[3] := amplitude offset
    """
    y = p[0]*np.sin(2*np.pi/p[1]*t+p[2])+p[3]
    return y

def sin_residuals(p, y, t, std):
    err = (y - p[0]*np.sin(2*np.pi/p[1]*t+p[2])-p[3])/std**2
    return err

def sin_fit(t, ydata, std, p0):
""" Fits a set of data, ydata, on a domain, t, with individual standard 
deviations, std, to a sin curve given the initial parameters, p0, of the form:
        p[0] := amplitude
        p[1] := period/wavelength
        p[2] := phase offset
        p[3] := amplitude offset
    """
    # optimization # 
    pbest = leastsq(sin_residuals, p0, args=(ydata, t, std), full_output=1)
    p_fit = pbest[0]

    # fit to data #
    fit = p_fit[0]*np.sin(2*np.pi/p_fit[1]*t+p_fit[2])+p_fit[3]

    return p_fit 
```

# javascript - 可拖动元素在 div 中消失

> ID：13162586
> 
> 赞同：0
> 
> 时间：2012-10-31T16:31:15.413
> 
> 标签：javascript, jquery, jquery-ui, draggable

尝试创建一个可拖动的 div，但不是将其拖动到可放置的 div 中并捕捉到其中，而是在拖动时可拖动的 div 消失了。如此处所见[，](http://jsfiddle.net/Kxtvg/45/) div 开始消失并仍然附加。我认为这可能是一个收容问题

```
$('.sorting').draggable({containment: 'parent', cursor:'pointer'}); 
```

当我将容器从窗口更改为父级时，可拖动的 div 保持在其中，如此[处所示](http://jsfiddle.net/Kxtvg/44/)。不明白为什么可拖动的 div 消失并且没有像我想要的那样进入可放置的框。我确信有一些我不理解或看不到的东西可能需要指出。我也很高兴知道为什么会发生这种情况以及可能有的任何其他提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:59:30.950

由于 .mousescroll 类的溢出属性，您的可拖动 ul 元素消失了。

将css替换为

```
.mousescroll{
    float: left;
}
.mousescroll:hover {
} 
```

解决您的问题。

# objective-c - objective-c 属性 - getter 和 setter

> ID：13162591
> 
> 赞同：9
> 
> 时间：2012-10-31T16:31:37.197
> 
> 标签：objective-c, ios, uiview, getter-setter

在 UIView 子类中，我有这个属性：

```
@property (nonatomic) CGFloat scale;

#define DEFAULT_SCALE 0.90 
```

这个getter和setter：

```
-(CGFloat)scale
{
    if (!self.scale) {
        return DEFAULT_SCALE;
    }else{
        return self.scale;
    }
}

-(void)setScale:(CGFloat)scale
{
    if (scale != self.scale) {
        self.scale = scale;
        [self setNeedsDisplay];
    }

} 
```

这是不正确的，因为例如在 getter 中检查 self.scale 会导致无限循环。编写getter和setter的正确方法是什么，这样我就不会陷入无限循环？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-31T16:36:53.790

您应该能够直接以`_scale`. 您的 getter/setter 将如下所示：

更新：正如@wattson12 在下面的评论中指出的那样，您需要在`@synthesize`您的实现中添加一个。

```
@synthesize scale = _scale;

-(CGFloat)scale
{
    if (!_scale) {
        return DEFAULT_SCALE;
    }else{
        return _scale;
    }
}

-(void)setScale:(CGFloat)scale
{
    if (scale != _scale) {
        _scale = scale;
        [self setNeedsDisplay];
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T16:39:19.193

[点表示法起初可能会有点误导。](http://weblog.bignerdranch.com/83-83/)

## 二传手

在您在此处发布的行中

```
self.scale = scale; 
```

您没有分配给局部变量。实际上，您将消息发送`-setScale:`到`self`. 这条线相当于

```
[self setScale:scale]; 
```

由于您是`-setScale:`从内部调用的`-setScale:`，因此您将获得这种无限递归。

您需要做的是在您的 setter 中设置一个实例变量（而不是从内部调用您的 setter）。通常，只要写

```
@property (nonatomic) CGFloat scale; 
```

您已经创建了一个实例变量`_scale`。 **但是**，由于您还覆盖了`-scale`和`-setScale:`，因此不会创建此实例变量。因此，您需要自己添加实例变量。在您的班级声明`@interface`中（或者，在[班级扩展](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html) `@interface`中）

```
//If adding the instance variable to the class declaration:
@interface MyClass : Superclass
{
    //....
    CGFloat _scale;
}
//....
@end 
```

完成此操作后，将行更改为

```
_scale = scale; 
```

## 吸气剂

您还发布了另外两条有问题的行，它们在 getter 中。第一个是

```
return self.scale; 
```

里面`- (CGFloat)scale`。与以前类似，这个点符号并不意味着你可能认为它的意思。事实上，这意味着

```
return [self scale]; 
```

和以前一样，这会导致无限递归。第二个是

```
if (!self.scale) { 
```

出于同样的原因，这是一个问题：表达式`self.scale`, 在评估时是 [self scale]。同样，这会导致无限递归。解决这两个问题的方法是`self.scale`用`_scale`这个 getter 代替：

```
- (CGFloat)scale
{
    if (!_scale) {//Since CGFloat is not an object, this means <<if (_scale == 0) {>>
        return DEFAULT_SCALE;
    } else {
        return _scale
    }
} 
```

## 更好的方法

你在这里做的工作比你真正应该做的要多得多。最好利用您的初始化程序：

```
- (id)initWithFrame:(NSRect)frame
{
    self = [super initWithFrame:frame];
    {
        self.scale = DEFAULT_SCALE;
    }
} 
```

这将保证如果`scale`未设置，它将返回`DEFAULT_SCALE`. 这使您可以完全消除吸气剂（因此，消除`@synthesize`）。由于您`-setNeedsDisplay`在 setter 中调用，因此您仍然需要它。

```
- (void)setScale:(CGFloat)scale
{
    if (_scale != scale) {
        _scale = scale;
        [self setNeedsDisplay];
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T17:01:59.957

好吧，我可以想到大约 3 种方法来做到这一点，并且 0 意识到这一点。

```
@interface someClass
{
    BOOL useCustomScale;
}
@property float scale;
@end
@implimentation someClass
-(float)scale
{
    if(useCustomScale)
    {return scale;}
    return defaultScale;
}
-(void) setScale: (float)someScale
{
    useCustomScale = YES;
    scale = someScale
} 
```

否则，您可以使用 NSNumber 来支持比例值...
否则您可以将比例初始化为 -1 并将其设置为非法值。
0 通常对于您的测试来说是一件非常糟糕的事情，因为您可能非常希望 0 成为有效值。

# asp.net - 如何将 Windows Azure CDN 与现有的 ASP.NET webforms 应用程序一起使用？

> ID：13162594
> 
> 赞同：2
> 
> 时间：2012-10-31T16:31:43.873
> 
> 标签：asp.net, azure, webforms, cdn, azure-cdn

我在 Azure 上有一个 ASP.NET Web 应用程序，并且想将我的静态内容 - 图像、CSS 移动到 Azure CDN。

我在整个应用程序中使用了 100 多个图像文件，这些文件存储在文件夹“App_Themes/img”中......

以什么方式，我可以最大限度地减少移动中的努力？

我目前的步骤是...... - 手动将所有文件上传到 cdn .. - 手动将所有 url 更改为 cdn（使用 Ctrl-H，但仍然是时间密集型且没有错误） - 以某种方式在本地管理测试.. . （在每个页面添加一些代码以使用 baseurl，具体取决于调试或发布）...

有什么方法可以添加新路由等，这样我就不必手动更改 url，也不必在文件系统 url 和 CDN 之间移动以在本地开发应用程序并部署它。

非常感谢 ..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T04:53:57.577

我认为您可以通过 IIS URL 重写或将静态内容移动到 /cdn 文件夹来做到这一点，我尚未对此进行测试，但 Maarten Balliauw 有一篇关于如何从 CDN 提供内容的精彩博客文章。[“使用 Windows Azure 内容交付网络”](http://acloudyplace.com/2012/04/using-the-windows-azure-content-delivery-network/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T18:20:26.130

我所做的是在 web.config 中添加了一个配置条目：

并将路径替换`/App_Themes/SpringDoctor/images/`为`<%=System.Configuration.ConfigurationManager.AppSettings["ImagesPath"]%>`

并将所有图像上传到适当的 blob。

# visual-studio-2012 - 用于验证的 Visual Studio 2012 目标架构不起作用

> ID：13162603
> 
> 赞同：3
> 
> 时间：2012-10-31T16:32:26.770
> 
> 标签：visual-studio-2012, html-validation

我在stackoverflow上的第一个问题：

我已经安装了 Visual Studio 2012 并且喜欢新的 IDE。到目前为止，我似乎遇到的唯一问题是验证的目标模式不起作用（面对，当我打开一个项目说“无法完成操作”时，VS 在启动时显示错误。当我检查验证时目标架构设置（在工具->选项->文本编辑器->HTML->验证中），它确实选择了一个选项（HTML5）。但是，当我尝试添加“验证的目标架构”工具栏按钮时，它加载项目“无法完成操作”时再次显示相同的错误。

有什么想法吗？我将不胜感激任何人都可以提供的帮助。

谢谢！亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-03T12:49:06.153

在 Visual Studio 2013 上遇到了同样的问题，请在[此处](https://stackoverflow.com/questions/21051587/target-schema-for-validation-missing-in-vs-2012-intellisense-how-to-resolve/24015538#24015538)查看答案（在我的情况下） 。

# ruby - `Object.const_get` 是否适用于字符串？我收到“错误的常量名称”错误

> ID：13162607
> 
> 赞同：0
> 
> 时间：2012-10-31T16:32:36.440
> 
> 标签：ruby

我有一个动态生成的嵌套命名空间，如下所示：

```
class A
  class B
    class C
      ...
    end
  end
end 
```

我可以通过`C`手动访问类`A::B::C`，所以它存在，所以我的生成器工作。但是`Object.const_get "A::B::C"`会引发“错误的常量名称”错误。我可以以某种方式动态访问它而无需繁琐的循环吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T16:34:33.643

没有循环？没有把握。

这是我对此的解决方案，但它确实会遍历您的姓名：

```
class A
  class B
    class C
    end
  end
end

c = "A::B::C".split("::").inject(Object) { |n,c| n.const_get c }
p c

A::B::C 
```

[**在这里你可以看到它在行动**](http://cibox.org/slivu/stackoverflow?lang=ruby&file=does-object-const-get-works-with-strings-i-get-a-wrong-constant-name-error.rb&run=true)

# c# - 使用ac#字节数组中的数据

> ID：13162611
> 
> 赞同：0
> 
> 时间：2012-10-31T16:32:53.117
> 
> 标签：c#, struct, bytearray

我有一个图像，包括图像标题，存储在 ac# 字节数组（字节 []）中。

标头位于字节数组的开头。如果我将标题放在一个结构中（就像我在 c++ 中所做的那样），它看起来像这样：

```
typedef struct RS_IMAGE_HEADER
{
   long HeaderVersion;
   long Width;
   long Height;
   long NumberOfBands;
   long ColorDepth;
   long ImageType;
   long OriginalImageWidth;
   long OriginalImageHeight;
   long OffsetX;
   long OffsetY;
   long RESERVED[54];
   long Comment[64];

} RS_IMAGE_HEADER; 
```

如何在 c# 中执行此操作，如何获取和使用图像标头中的所有数据（存储在字节数组的开头）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:42:18.300

[结构](http://msdn.microsoft.com/en-us/library/ah19swz4%28v=vs.100%29.aspx)在 C# 中非常好，因此结构应该没有问题，与您编写的完全一样，尽管您可能需要添加权限修饰符，例如`public`. 要将字节数组转换为其他原语，有一类非常有用的方法，其中包括[ToInt64()](http://msdn.microsoft.com/en-us/library/bb384066%28v=vs.100%29.aspx)，可帮助您将字节数组转换为另一种内置类型（在本例中`long`）。要获取您需要的特定数组字节序列，请查看有关在 C# 中执行数组切片的各种技术的[这个问题](https://stackoverflow.com/questions/406485/array-slices-in-c-sharp)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:42:21.343

最简单的方法是在 C# 中创建一个模拟数据结构，我不会在这里讨论，因为它几乎相同。下面是从数组中读取单个字节的示例。

```
int headerVersionOffset = ... // defined in spec
byte[] headerVersionBuffer = new byte[sizeof(long)];
Buffer.BlockCopy(imageBytes, headerVersionOffset, headerVersionBuffer, 0, sizeof(long));
//Convert bytes to long, etc.
long headerVersion = BitConverter.ToInt64(headerVersionBuffer, 0); 
```

您可能希望使其适应您的数据结构和使用情况，您也可以使用流或其他自定义数据结构来自动为您处理数据。

# xaml - Windows 应用商店应用列表视图

> ID：13162615
> 
> 赞同：1
> 
> 时间：2012-10-31T16:33:00.447
> 
> 标签：xaml, windows-8, winrt-xaml

我有一个 ListView，它的项目是一组 RadioButtons，当我从第一个项目中选择一个单选按钮时，ListView 绑定到 100 个字符串的列表，也许是第二个和第三个，一切正常。但是，当我滚动到第 50 个项目时，或者当我在没有出现第一页的任何项目中选择一个单选按钮时，上一页中的第一个项目的选择只是被取消选择，好像列表视图再次呈现了这些项目并且忘记了可能的操纵

```
 <ListView ItemsSource="{Binding}" x:Name="list" VirtualizingStackPanel.VirtualizationMode="Standard">
        <ListView.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <RadioButton Template="{StaticResource CheckBoxTemplate2}" Foreground="Orange" Content="Test" Label="YOK" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="5,0,0,0" Canvas.ZIndex="12" FontSize="14" FontWeight="Bold" FontFamily="Advantage-SemiBold"  Checked="BetRadioButton_Checked_1" Click="x1_Click"  />
                    <RadioButton x:Name="x2" Template="{StaticResource CheckBoxTemplate2}" Foreground="Orange" Content="Test" Label="YOK" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="5,0,0,0" Canvas.ZIndex="12" FontSize="14" FontWeight="Bold" FontFamily="Advantage-SemiBold"  Checked="BetRadioButton_Checked_1" Click="x1_Click"  />
                    <RadioButton x:Name="x3" Template="{StaticResource CheckBoxTemplate2}" Foreground="Orange" Content="Test" Label="YOK" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="5,0,0,0" Canvas.ZIndex="12" FontSize="14" FontWeight="Bold" FontFamily="Advantage-SemiBold"  Checked="BetRadioButton_Checked_1"  Click="x1_Click"  />
                    <RadioButton x:Name="x4" Template="{StaticResource CheckBoxTemplate2}" Foreground="Orange" Content="Test" Label="YOK" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="5,0,0,0" Canvas.ZIndex="12" FontSize="14" FontWeight="Bold" FontFamily="Advantage-SemiBold"  Checked="BetRadioButton_Checked_1"  Click="x1_Click"  />
                    <RadioButton x:Name="x5" Template="{StaticResource CheckBoxTemplate2}" Foreground="Orange" Content="Test" Label="YOK" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="5,0,0,0" Canvas.ZIndex="12" FontSize="14" FontWeight="Bold" FontFamily="Advantage-SemiBold"  Checked="BetRadioButton_Checked_1"  Click="x1_Click"  />
                    <RadioButton x:Name="x6" Template="{StaticResource CheckBoxTemplate2}" Foreground="Orange" Content="Test" Label="YOK" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="5,0,0,0" Canvas.ZIndex="12" FontSize="14" FontWeight="Bold" FontFamily="Advantage-SemiBold"  Checked="BetRadioButton_Checked_1"  Click="x1_Click"  />
                    <RadioButton x:Name="x7" Template="{StaticResource CheckBoxTemplate2}" Foreground="Orange" Content="Test" Label="YOK" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="5,0,0,0" Canvas.ZIndex="12" FontSize="14" FontWeight="Bold" FontFamily="Advantage-SemiBold"  Checked="BetRadioButton_Checked_1"  Click="x1_Click"  />

                </StackPanel>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView>

list.DataContext = new List<String>() { "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T21:33:00.183

我猜你的问题是你所有的`RadioButton`s 都一样`GroupName`。单选按钮的默认`GroupName`值为 null，因此您`RadioButtons`的所有按钮都具有相同的`GroupName`. 要解决此问题，您需要`GroupName`为`ListView`. 此外，您的所有`Checked`属性都绑定到同一个属性。你可能想要 a`CheckBox`而不是 a`RadioButton`吗？

# php - 我该如何解决这个问题..在选择查询中

> ID：13162616
> 
> 赞同：-1
> 
> 时间：2012-10-31T16:33:04.500
> 
> 标签：php, mysql, sql

这是一个选择查询...

```
 $q = "SELECT
        tcs.tutor_id AS tid,
        tcs.category_id AS cid,
        tcs.subject_id AS sid,
        GROUP_CONCAT( DISTINCT s.subjects SEPARATOR ', ') AS subjects,
        t.tutor_name AS tname,
        t.tutor_code AS tcode,
        DATE_FORMAT(t.registration_date, '%b %D, %Y') AS date,
        t.qualification AS qualifi,
        GROUP_CONCAT( DISTINCT o.option_name SEPARATOR ', ') AS tutor_option,
        timg.image_name AS img,
        city_name AS city,
        d.district_name AS district
   FROM tutor_category_subject as tcs
        INNER JOIN subject AS s ON tcs.subject_id = s.subject_id
        INNER JOIN tutor_option AS toption ON toption.tutor_id = tcs.tutor_id
        INNER JOIN options AS o ON toption.option_id = o.option_id
        INNER JOIN tutors AS t ON tcs.tutor_id = t.tutor_id
        INNER JOIN address ON address.address_id = t.address_id
        INNER JOIN city ON city.city_id = address.city_id
        INNER JOIN district AS d ON d.district_id = city.district_id
        LEFT JOIN tutor_images AS timg ON timg.tutor_id = tcs.tutor_id AND timg.image_type = 'profile'
   WHERE s.subjects LIKE '%$subject%'
   GROUP BY tcs.tutor_id"; 
```

这个查询现在正在工作..现在我发现了一个问题。它是.....这么多科目可能需要一位特定的导师。我需要使用搜索关键字选择与导师相关的所有主题以显示搜索结果。在此查询中，搜索关键字是“$subject”。此查询仅选择与给定关键字相似的导师主题。例如，如果用户给出诸如“商业”之类的关键字，则该查询选择该导师的主题，例如“仅商业研究、商业会计等”。所以我也需要通过这个查询选择其他主题..有人可以帮助我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:49:12.257

好吧，我不是 MySQL 大师，但我认为您不需要选择

```
 tcs.category_id AS cid,
 tcs.subject_id AS sid, 
```

你还需要使用`distinct`关键字

```
SELECT distinct
    tcs.tutor_id AS tid,
    GROUP_CONCAT( DISTINCT s.subjects SEPARATOR ', ') AS subjects,
    t.tutor_name AS tname,
    t.tutor_code AS tcode,
    DATE_FORMAT(t.registration_date, '%b %D, %Y') AS date,
    t.qualification AS qualifi,
    GROUP_CONCAT( DISTINCT o.option_name SEPARATOR ', ') AS tutor_option,
    timg.image_name AS img,
    city_name AS city,
    d.district_name AS district
FROM tutor_category_subject as tcs
    INNER JOIN subject AS s ON tcs.subject_id = s.subject_id
    INNER JOIN tutor_option AS toption ON toption.tutor_id = tcs.tutor_id
    INNER JOIN options AS o ON toption.option_id = o.option_id
    INNER JOIN tutors AS t ON tcs.tutor_id = t.tutor_id
    INNER JOIN address ON address.address_id = t.address_id
    INNER JOIN city ON city.city_id = address.city_id
    INNER JOIN district AS d ON d.district_id = city.district_id
    LEFT JOIN tutor_images AS timg ON timg.tutor_id = tcs.tutor_id AND timg.image_type = 'profile'
WHERE s.subjects LIKE '%$subject%'
GROUP BY tcs.tutor_id 
```

# sql - 更改表后无法重新启动 CDC

> ID：13162619
> 
> 赞同：0
> 
> 时间：2012-10-31T16:33:08.937
> 
> 标签：sql, sql-server, sql-server-2008, cdc

我需要为已被跟踪的表向 CDC 添加几列。我的方法如下：

```
EXEC sys.sp_cdc_drop_job 'capture'

BEGIN TRANSACTION

BEGIN TRY
    -- Copy existing data of the tracked table into a temporary table
    SELECT * INTO CDC.dbo_MyTable_Temp FROM CDC.dbo_MyTable_CT

    -- Add the new column to the temp table. This allows us to just use INSERT..SELECT * later
    ALTER TABLE CDC.dbo_MyTable_Temp ADD MyColumn INT NULL

    -- Disable CDC for the source table temporarily. This will drop the CDC table
    EXEC sys.sp_cdc_disable_table @source_schema = 'dbo', @source_name = 'MyTable', @capture_instance = 'dbo_MyTable'

    -- Reenable CDC for the source table. This will recreate the table with the new columns
    EXEC sys.sp_cdc_enable_table @source_schema = 'dbo', @source_name = 'MyTable', @capture_instance = 'dbo_MyTable', @supports_net_changes = 1, @role_name = NULL, @filegroup_name = 'CDCGROUP'

    -- Insert the old values into the CDC table
    INSERT INTO cdc.dbo_MyTable_CT SELECT * FROM cdc.dbo_MyTable_Temp

    -- Correct the start_lsn in CDC.change_tables. Otherwise all of the CDC stored procedures will be confused
    -- and although the old data will exist in the table the functions won't return it
    UPDATE cdc.change_tables SET start_lsn = (SELECT MIN(__$start_lsn) FROM cdc.dbo_MyTable_Temp) WHERE capture_instance = 'dbo_MyTable'

    -- Drop the temp table
    DROP TABLE cdc.dbo_MyTable_Temp

    COMMIT TRANSACTION
END TRY
BEGIN CATCH
    ROLLBACK TRANSACTION
    RAISERROR('Error!', 16, 1)
END CATCH

EXEC sys.sp_cdc_add_job 'capture' 
```

但是，当该作业在重新添加后再次运行时，它会生成一个错误，表明违反了`CDC.lsn_time_mapping`.

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T19:00:07.913

我无法找到错误的确切原因，因为更新`lsn_time_mapping`发生在扩展存储过程中，但我能够使用不同的代码来添加列。基本上，我坚持使用 CDC 存储过程，而不是`ALTER TABLE`在 CDC 表上执行命令。代码如下：

```
-- Create a new capture instance for the table
EXEC sys.sp_cdc_enable_table @source_schema = 'dbo', @source_name = 'MyTable', @capture_instance = 'dbo_MyTable_New', @supports_net_changes = 1, @role_name = NULL, @filegroup_name = 'CDCGROUP'

-- Copy all of the existing data from the old capture instance
INSERT INTO CDC.dbo_MyTable_New_CT SELECT *, NULL AS NewColumn1, NULL AS NewColumn2 FROM CDC.dbo_MyTable_CT

-- Disable the old capture instance
EXEC sys.sp_cdc_disable_table @source_schema = 'dbo', @source_name = 'MyTable', @capture_instance = 'dbo_MyTable'

-- Now we need to jump through some hoops to rename the capture instance back to what it was:
-- Recreate a new capture instance with the old name again
EXEC sys.sp_cdc_enable_table @source_schema = 'dbo', @source_name = 'MyTable', @capture_instance = 'dbo_MyTable', @supports_net_changes = 1, @role_name = NULL, @filegroup_name = 'CDCGROUP'

-- Copy all of the data over again
INSERT INTO CDC.dbo_MyTable_CT SELECT * FROM CDC.dbo_MyTable_New_CT

-- Remove the capture instance that we had been using to add the new columns
EXEC sys.sp_cdc_disable_table @source_schema = 'dbo', @source_name = 'MyTable', @capture_instance = 'dbo_MyTable_New'

-- We need to correct the start_lsn in the cdc.change_tables table. Otherwise all of the CDC stored procedures and views will be confused and
-- although the old data will exist in the CDC table it wouldn't be returned by those CDC procs
UPDATE cdc.change_tables SET start_lsn = (SELECT MIN(__$start_lsn) FROM cdc.dbo_MyTable_CT) WHERE capture_instance = 'dbo_MyTable' 
```

请注意，我在数据库停机期间执行此操作。如果您需要在使用数据库时执行此操作，那么您可能需要在`WHERE`插入语句中添加子句，这样您就不会将同一记录从一个表复制到已经存在的表中。当两个捕获实例都处于活动状态时，任何影响表的 DML**都会**将行放入两个捕获实例中。

# static - 设置单例以使所有方法都是静态方法是不是很糟糕？

> ID：13162623
> 
> 赞同：0
> 
> 时间：2012-10-31T16:33:35.703
> 
> 标签：static, singleton, private, public

我经常设置旨在供其他程序员使用的单例类，我发现我不确定是否有首选方法来设置对这些类中方法的访问。我想到的两种方法是：

```
public class MyClass {
    private static MyClass instance;

    public static void DoStuff( ) {
        instance.DoStuffInstance( );
    }

    private void DoStuffInstance( ) {
        // Stuff happens here...
    }
} 
```

用法是：`MyClass.DoStuff( );`

或者更像这样的东西：

```
public class MyClass {
    public static MyClass instance;

    public void DoStuff( ) {
        // Stuff happens here...
    }
} 
```

用法是：`MyClass.instance.DoStuff( );`

就个人而言，我倾向于第一种选择。我发现`MyClass.instance`对于经验不足的程序员来说，到处都是丑陋和不直观的记忆。

有什么好的理由更喜欢其中一个而不是另一个？意见很好。只是好奇别人怎么想。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:08:57.567

我从未见过以这种方式实现的单例。典型的设置可能是这样的：

```
public class MyClass {

    private static final MyClass instance = null;

    // Private to ensure that no other instances can be allocated.
    private MyClass() {}

    // Not thread safe!
    public static MyClass getInstance() {
        if( instance == null ) {
            instance = new MyClass();
        }
        return instance;
    }

    public void DoStuff( ) {
        // Stuff happens here...
    }
} 
```

这样，所有调用都将类似于`instance.DoStuff();`，您只需要为每个“操作”定义一个方法，而不需要一个静态方法，然后是您的第一种方法使用的实际“实例”方法。

此外，您设置它的方式，看起来您可以在实例实际初始化之前调用这些静态方法，这是一个问题。

# php - 尝试在 ZF 形式 1.12 中设置 Multioptions，相同的数组结构，一个有效，另一个无效，为什么？

> ID：13162625
> 
> 赞同：1
> 
> 时间：2012-10-31T16:33:38.533
> 
> 标签：php, zend-framework, zend-form

我正在尝试填充一个选择列表（`Zend_Form_Element_Select`），并且我尝试了这两个数组。（这些是 var 转储）

这个有效：

```
array(2) {
  [0] => array(2) {
    ["key"] => int(1)
    ["value"] => string(4) "Test"
  }
  [1] => array(2) {
    ["key"] => int(2)
    ["value"] => string(5) "Test2"
} 
```

这个没有：

```
array(3) {
  [0] => array(2) {
    ["key"] => int(1)
    ["value"] => string(16) "Test Kategorie 1"
  }
  [1] => array(2) {
    ["key"] => int(2)
    ["value"] => string(16) "Test Kategorie 2"
  }
  [2] => array(2) {
    ["key"] => int(3)
    ["value"] => string(4) "rene"
  }
} 
```

这是我的代码片段：

```
$select = new Zend_Form_Element_Select('video_category', array(
      'required'      => true,
      'label'         => 'label_video_category',
    //'multioptions'    => $this->categories,
      'description'   => 'text_video_category',
      'class'         => 'input',
      'id'          => 'select_video_category'
));
$options =  array(
            array(  'key'   => 1, 
                    'value' => 'Test'),
            array(  'key'   => 2,
                    'value' => 'Test2'),
         );
Zend_Debug::dump($options);
$select->addMultioptions($this->categories);
$this->addElement($select); 
```

因此，如果有人对我有任何线索，我将非常感激，因为我已经坚持了几个小时......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:42:03.230

您在*addMultioptions中使用**$this->categories*。只需验证您是否将选项分配给此变量。

 *```
 $this->categories = $options; 
```

以下代码适用于两个数组：

```
 $form = new Zend_Form();
      $select = new Zend_Form_Element_Select('video_category', array(
                 'required'      => true,
                 'label'         => 'label_video_category',
                  'description'   => 'text_video_category',
                  'class'         => 'input',
                 'id'          => 'select_video_category'
    ));

    $select->addMultioptions($this->categories);
$form->addElement($select); 
```

使用的数组：

```
 $options =  array(
        array(  'key'   => 1, 
                'value' => 'Test'),
        array(  'key'   => 2,
                'value' => 'Test2'),
     );

   $options = array(
    array(  'key'   => 1, 
                'value' => 'Test Kategorie 1'),
    array(  'key'   => 2,
                'value' => 'Test Kategorie 2'),
    array(  'key'   => 3,
                'value' => 'rene')
    ); 
```*

# grails - Grails 的日历或议程插件

> ID：13162626
> 
> 赞同：0
> 
> 时间：2012-10-31T16:33:49.920
> 
> 标签：grails

我需要找到一种方法来检测在给定时间内是否有任何给定的人......但它需要准确，我将用一个例子来解释：

我有一个系统，允许给定的人注册，并被联系到按小时工作的工作。因此，可以雇用给定的人从上午 9:00 到 13:00 工作，并由完全不同的人雇用从 16:00 到 20:00 工作（例如）。我需要一个类似于日历/议程的插件到 grails，它允许我在给定的一天获取数据，并且每小时准确

有人知道有什么插件可以做到这一点吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:41:20.613

据我所知，没有一个插件可以准确地为您提供所需的东西。但是，有一个非常棒的 jQuery 插件，叫做[FullCalendar](http://arshaw.com/fullcalendar/)，我用它来为客户端实现类似 Google 日历的功能。

还有一个[Grails 插件](http://grails.org/plugin/full-calendar)，虽然我通常不使用 JavaScript 库的插件。使自定义事物变得更加困难。

您仍然需要自己管理您的议程/事件数据。但是一旦你有了数据，通过 JSON将其提供给[FullCalendar 就很简单了。](http://arshaw.com/fullcalendar/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T10:21:05.680

这也可以使用 DHTMLX JavaPlanner 实现，请查看本教程 [http://javaplanner.com/docs/using_javaplanner_with_the_grails_framework.html](http://javaplanner.com/docs/using_javaplanner_with_the_grails_framework.html)

# ruby-on-rails - 如何在 has_many 中获取直通实例：直通关系

> ID：13162628
> 
> 赞同：2
> 
> 时间：2012-10-31T16:34:11.693
> 
> 标签：ruby-on-rails, associations, has-many-through

我有一个 has_many :through 关系模型，例如：

```
#foo
has_many :bars, through: link
has_many :links

#link
belongs_to :bar
belongs_to :foo

#bar
has_many :foos, through: link
has_many :links 
```

在我有一个实例`foo`和一个实例的情况下，`bar`如何获得将`link`两者连接在一起的特定实例（如果存在）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T16:35:34.237

也许

```
foo.links.where(bar_id: bar.id).first 
```

会做？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T16:36:26.263

我想你可以

```
foo.links.find_by_bar_id(bar.id) 
```

# java - PDFBox 程序无法从 pdf 中正确读取非英文字符

> ID：13162632
> 
> 赞同：0
> 
> 时间：2012-10-31T16:34:20.107
> 
> 标签：java, pdfbox, pdf-reader

iText 程序替换为 PDFBox 程序来读取 pdf 文件。

```
 public static void main(String[] args) {  

                // TODO Auto-generated method stub 
                PDDocument     pd;  
                BufferedWriter wr;  

                try {  
                    File input = new File("C:\\test\\ExtractTextFromThis.pdf");    // The PDF file from where you would like to extract  
                    File output = new File("C:\\test\\OutPut.txt");    // The text file where you are going to store the extracted data 
```

// 加载文档。

```
 pd = PDDocument.load(input);  // load document
                    pd.setAllSecurityToBeRemoved(true); 
```

// 尝试检查语言

```
 System.out.println(pd.getDocumentCatalog().getLanguage());
                        PDFTextStripper stripper = new PDFTextStripper("UTF-8");  // Initializing PDFTextStripper Object with UTF-8 encoding.

       //          PDFTextStripperByArea stripper = new PDFTextStripperByArea("UTF-16");
                    // Please provide example for this. In attached document,I want to extract text from rectangle. There are 30 boxes.

                    wr = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(output)));  
                    stripper.writeText(pd, wr);
                    System.out.println(stripper.getText(pd));  
                    String text = stripper.getText(pd);  
                    char[] cArr = text.toCharArray();  

// Here is the problem. It's not printing characters of Kannada language within its UTF Range. 
//printing chracters -- their integer value --  their Hexadecimal value  
                    for (int i = 1; i < 130; i++) {  
                        System.out.println(cArr[i] + "\t" + (int) cArr[i] + "\t" + Integer.toHexString(cArr[i]));  
                    }  

                    if (pd != null) {  
                        pd.close();  
                    }  

                    wr.close();  
                } catch (Exception e) {  
                    e.printStackTrace();  
                }  
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T00:39:55.847

您似乎认为 iText 的缺点实际上是您的算法中提取页面内容的误解：

您假设内容流中的字符串实际上是 Unicode 编码的。它们不需要，通常尤其是非 ASCII 字符不需要。翻译信息（如果有的话！）包含在字体字典中。

此外，您假设所有文本字符串都直接包含在内容流中。这不一定是真的：内容流可以引用其他对象，而这些对象又可以包含您的代码找不到的文本。

并且您还假设页面的内容条目是单个间接流。它实际上也可以是它们的数组。

我建议您切换到使用解析器包中的 iText 的文本解析类，它会考虑所有这些和更多的东西。

# java - 使用 SimpleDateFormatter 解析日期

> ID：13162636
> 
> 赞同：0
> 
> 时间：2012-10-31T16:34:35.040
> 
> 标签：java, parsing, date, simpledateformat

这是应该工作的代码，但没有：

```
public static void main(String[] args) {
   String datata = "23:00:01 GMT, Sun Jul 28, 2012";
   String format = "HH:mm:ss zzz, EEE MMM dd, yyyy";

   try {
      DateFormat inputFormat = new SimpleDateFormat(format);
      Date parsedDate = inputFormat.parse(datata);
      System.out.println(parsedDate.toGMTString());
   } catch (Exception e) {
      e.printStackTrace();
   }
} 
```

我得到一个解析异常。我三次检查了模式，我什至把它写在另一个下面，但我仍然得到一个例外。帮助，有人吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T16:36:56.357

这可能是因为您的默认语言环境不是英语，并且解析器不理解“Sun”和/或“Jul”。尝试使用：

```
DateFormat inputFormat = new SimpleDateFormat(format, Locale.ENGLISH); 
```

# c# - 序列化包含大字节数组的对象列表时引发 OutOfMemoryException

> ID：13162642
> 
> 赞同：4
> 
> 时间：2012-10-31T16:34:59.320
> 
> 标签：c#, protobuf-net

我正在尝试使用 protobuf.net 序列化相当大量的数据。我遇到了`OutOfMemoryException`抛出 s 的问题。我正在尝试使用流式传输数据，`IEnumerable<DTO>`以免使用太多内存。这是应该导致错误的程序的简化版本：

```
class Program
{
    static void Main(string[] args)
    {
        using (var f = File.Create("Data.protobuf"))
        {
            ProtoBuf.Serializer.Serialize<IEnumerable<DTO>>(f, GenerateData(1000000));
        }

        using (var f = File.OpenRead("Data.protobuf"))
        {
            var dtos = ProtoBuf.Serializer.DeserializeItems<DTO>(f, ProtoBuf.PrefixStyle.Base128, 1);
            Console.WriteLine(dtos.Count());
        }
        Console.Read();
    }

    static IEnumerable<DTO> GenerateData(int count)
    {
        for (int i = 0; i < count; i++)
        {
            // reduce to 1100 to use much less memory
            var dto = new DTO { Data = new byte[1101] };
            for (int j = 0; j < dto.Data.Length; j++)
            {
                // fill with data
                dto.Data[j] = (byte)(i + j);
            }
            yield return dto;
        }
    }
}

[ProtoBuf.ProtoContract]
class DTO
{
    [ProtoBuf.ProtoMember(1, DataFormat=ProtoBuf.DataFormat.Group)]
    public byte[] Data
    {
        get;
        set;
    }
} 
```

有趣的是，如果将每个数组的大小减小`DTO`到 1100，问题就会消失！在我的实际代码中，我想做类似的事情，但它是我将序列化的浮点数组，而不是字节。注意我认为您可以跳过填充数据部分以加快问题速度。

这是使用 protobuf 版本 2.0.0.594。任何帮助将非常感激！

编辑：

与版本 2.0.0.480 相同的问题。代码无法在版本 1.0.0.280 上运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T20:12:45.850

ķ; 这是一个不幸的时机 - 基本上，它只是检查是否应该在缓冲区满时刷新，并且由于正在编写一个以长度为前缀的项目，所以它永远无法*在那个时候*正确刷新. 我添加了一个调整，以便每当它发现它达到可刷新状态，*并且*有一些值得刷新的东西（当前为 1024 字节）时，它会更积极地刷新。这已作为 r597 提交。有了那个补丁，它现在可以按预期工作了。

在此期间，有一种方法可以在不更改版本的情况下避免这种故障：迭代源数据，使用指定前缀样式 base-128 和字段编号 1**单独序列化每个数据；**`SerializeWithLengthPrefix`就通过线路传输的内容而言，这是 100% 相同的，但每个都有一个单独的序列化周期：

```
using (var f = File.Create("Data.protobuf"))
{
    foreach(var obj in GenerateData(1000000))
    {
        Serializer.SerializeWithLengthPrefix<DTO>(
            f, obj, PrefixStyle.Base128, Serializer.ListItemTag);
    }
} 
```

感谢您的关注；p

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T16:46:32.460

您似乎超过了 1.5 GB 限制：[Allocating more than 1,000 MB of memory in 32-bit .NET process](https://stackoverflow.com/questions/1109558/allocating-more-than-1-000-mb-of-memory-in-32-bit-net-process)

您已经注意到，当您减少样本大小时，您的应用程序运行良好。这不是 protobuf 的问题（我认为），而是您尝试创建一个需要分配超过 1.5 GB 内存的数组。

## 更新

这是一个简单的测试：

```
byte[] data = new byte[2147483648]; 
```

这应该会导致一个`OutOfMemoryException`，所以会这样：

```
byte[][] buffer = new byte[1024][];
for (int i = 0; i < 1024; i++)
{
    buffer[i] = new byte[2097152];
} 
```

有些东西正在将您的数据字节聚合到一个超过 1.5 GB 的连续容器中。

# ios - 启动 iphone 应用程序的附加组件

> ID：13162644
> 
> 赞同：0
> 
> 时间：2012-10-31T16:35:23.033
> 
> 标签：ios, iphone, add-on

我目前正在开发一个 iphone 应用程序，该应用程序将以固定金额（比如 $X）出售。作为应用程序未来计划的一部分，我想为应用程序启动一个附加组件（比如 $Y）。我想要的是，已经支付 $X 的用户应该只在购买附加组件时收取 $Y，而新用户以 $(X+Y) 的价格购买它。是否可以独立为应用程序启动付费插件。还有其他想法如何进行此过程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:45:27.930

不，这是不可能的。无法确定用户购买 iPhone 应用程序的价格——所有购买者都受到平等对待。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:15:17.297

如前所述，没有“附加组件”之类的东西。

您需要做的是在您的应用的第二个版本中实现应用内购买。一旦用户将他们的应用程序更新到新版本，他们就可以从应用程序内购买这个新功能。当人们通过应用内购买购买东西时，您可以从服务器下载新内容，也可以使用条件语句来启用此内容。

# android - 来自 AsyncTask 的工作线程阻塞 UI 线程

> ID：13162645
> 
> 赞同：3
> 
> 时间：2012-10-31T16:35:23.323
> 
> 标签：android, android-asynctask, ui-thread

我正在制作一个 android 应用程序，该应用程序在单击 Activity 中的 SEARCH BUTTON 后下载 AsyncTask 类中的 JSON 文件。我想在下载数据时在 Activity 上显示进度对话框。但在我的 AVD 和设备上，实际操作与我的想法不同。看我上传的这个视频（大约 1 分钟）。[https://www.youtube.com/watch?v=qKyVGZ1FxIo&feature=youtube_gdata_player](https://www.youtube.com/watch?v=qKyVGZ1FxIo&feature=youtube_gdata_player)

在此视频中，在 SEARCH BUTTON 单击 UI 冻结一段时间后，ProgressDialog 会显示很短的时间并显示 Toast。

我希望 ProgressDialog 在单击后立即显示，并在显示 Toast 之前立即关闭。

活动中的 ClickListner：

```
@Override
public void onClick(View v) {
    DownloadJSONFile task = new DownloadJSONFile(MainActivity.this);
    task.execute("1", "class", lectureName, teacherName, date, period, "");
} 
```

异步任务：

```
import org.json.JSONArray;

import com.fc2.wiki.ap2012.komari.SearchResultActivity;

import android.app.ProgressDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.AsyncTask;
import android.widget.Toast;

public class DownloadJSONFile extends AsyncTask<String, Integer, JSONArray> {

private ProgressDialog dialog;
Context context;
JSONArray jsonArray;
boolean makeNewActivityFlag = true;

public DownloadJSONFile(Context context, boolean flag) {
    this.context = context;
    this.makeNewActivityFlag = flag;
}

@Override
protected void onPreExecute() {
    dialog = new ProgressDialog(this.context);
    dialog.setTitle("こまり");    //it's Japanese
    dialog.setMessage("通信中…");
    dialog.setIndeterminate(true);
    dialog.setCancelable(true);
    dialog.show();
} 
```

做背景：

```
@Override
protected JSONArray doInBackground(String... keywords) {

    try {
        //for test
        while(!this.dialog.isShowing()){
            Thread.sleep(500);
        }

        //I will load JSON file here
        /*
        JSONArray jsonArray = UTaisakuDatabaseUtil.getInstance()
                .getJSONSearchResult(version, method, searchedLectureName,
                        searchedTeacherName, date, period, assessment);
        */

        //for test
        Thread.sleep(5000);

    } catch (NumberFormatException e) {
        // TODO 自動生成された catch ブロック
        e.printStackTrace();
    } catch (InterruptedException e) {
        // TODO 自動生成された catch ブロック
        e.printStackTrace();
    }

    return jsonArray;
} 
```

onPost执行：

```
@Override
protected void onPostExecute(JSONArray jsonArray) {

    this.jsonArray = jsonArray;
    if (this.dialog.isShowing())
        dialog.dismiss();

    if (this.makeNewActivityFlag) {

        // Intentを作成してSearchResultActivityへ
        if (jsonArray != null) {
            Intent intent = new Intent(this.context,
                    SearchResultActivity.class);
            intent.putExtra("LECTURE_NAME", searchedLectureName);
            intent.putExtra("TEACHER_NAME", searchedTeacherName);
            intent.putExtra("YOUBI", searchedDateString);
            intent.putExtra("PERIOD", searchedPeriodString);
            intent.putExtra("JSONARRAY", jsonArray.toString());
            context.startActivity(intent);
        } else

//in this test case,jsonArray is always null.So this Toast is always called
            Toast.makeText(context, "ファイルが取得できませんでした。", Toast.LENGTH_SHORT)
                    .show();
        }
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T02:04:56.783

我找到了解决我自己问题的方法！我`Context`在`AsyncTask`. 我使用`Activity`class 而不是`Context`!All 一切正常。

```
public class DownloadJSONFile extends AsyncTask<String, Integer, JSONArray> {

    private ProgressDialog dialog;

    //this is the cause of bug
    //Context context;        

    //this is the answer
    Activity activity;

    JSONArray jsonArray;
    boolean makeNewActivityFlag = true;

    public DownloadJSONFile(Activity activity, boolean flag) {
        this.activity = activity;
        this.makeNewActivityFlag = flag;
    }
…
…
} 
```

但是我无法解释为什么它在使用类时可以正常工作而在使用`Activity`类时不能正常工作`Context`。有人可以解释一下吗？如果您有任何想法，请在此处发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:10:55.683

感谢您发布解决方案，我在采用来自 zxing/BarCodeReader 的代码时遇到了类似的问题。从构造函数参数中删除上下文后，睡眠被正确中断并且不再停止 UI 线程：

```
 AutoFocusManager(Context context, Camera camera) {
    this.camera = camera;
    taskExec = new AsyncTaskExecManager().build();
    SharedPreferences sharedPrefs = PreferenceManager.getDefaultSharedPreferences(context);
    String currentFocusMode = camera.getParameters().getFocusMode();
    useAutoFocus =

        FOCUS_MODES_CALLING_AF.contains(currentFocusMode);
    Log.i(TAG, "Current focus mode '" + currentFocusMode + "'; use auto focus? " + useAutoFocus);
    start();
  }

       protected Object doInBackground(Object... voids) {
      try {
        Thread.sleep(AUTO_FOCUS_INTERVAL_MS);
      } catch (InterruptedException e) {
        // continue
      }
      synchronized (AutoFocusManager.this) {
        if (active) {
          start();
        }
      }
      return null;
    } 
```

# c - getsockopt 返回与 setsockopt 中的一组不同的 IP_TOS 值

> ID：13162655
> 
> 赞同：4
> 
> 时间：2012-10-31T16:35:56.243
> 
> 标签：c, linux, sockets, setsockopt, getsockopt

我正在尝试使用`setsockopt`将`IPTOS`值设置为`IPTOS_THROUGHPUT`. `setsockopt`电话回来了`0`。但是，`getsockopt`显示`IP_TOS`值设置为`1`，与`IPTOS_THROUGHPUT`( `0x8`) 不同。有谁知道是什么导致了and的`IPTOS`价值不匹配？`setsockopt``getsockopt`

这是日志输出：

> 在套接字 26 上设置 DSCP 标记
> 
> 套接字 26 到 8 上的 setsockopt 返回 0
> 
> 插座 26 上的 DSCP 标记为 1，与预期的 8 不同

下面是代码：

```
int iptos = IPTOS_THROUGHPUT;

log(debug, 10, "Set DSCP Marking on socket %d\n", sockfd);

retval = setsockopt(sockfd, IPPROTO_TCP, IP_TOS,  &iptos, sizeof(iptos));
if (retval<0) {
   log(error, 99, "Failed to set DSCP marking on socket %d with error %d\n",
      sockfd, retval);
} else {
   log(debug, 10, "setsockopt on socket %d to %d returns %d\n", sockfd, iptos,
      retval);
   int tos=0;
   socklen_t toslen=sizeof(tos);

   retval = getsockopt(sockfd, IPPROTO_TCP, IP_TOS,  &tos, &toslen);
   if(retval<0) {
      log(warning, 99, "Failed to get DSCP marking on socket %d with error %d\n",
         sockfd, retval);
   }else {
      if( tos != iptos ) {
         log(warning, 99, "DSCP marking on socket %d is %d, different from expected %d\n",
            sockfd, tos, iptos);
         retval = 9999;
      }
      else {
         log(debug, 10, "Success: Set DSCP Marking on socket %d to %d\n",
            sockfd, iptos);
         retval = 0;
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T17:29:38.083

您应该使用 level 选项`IPPROTO_IP`而不是`IPPROTO_TCP`

# visual-c++ - 有没有像在 VS2010 中一样在 VS2008 中的项目级别设置 VC++ 目录？

> ID：13162656
> 
> 赞同：1
> 
> 时间：2012-10-31T16:35:57.643
> 
> 标签：visual-c++

在 VS2010 中，工具 > 选项中的 VC++ 目录编辑已被弃用。VC++ 目录现在作为用户属性表提供，根据不同的项目保留include/lib 目录非常方便。有没有办法在VS2008中做类似的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T23:01:40.157

在四处挖掘之后，我想出了一种方法来部分地做到这一点：仍然使用属性表。我们可以创建一个新的属性表并设置以下项目：

`C/C++->additional include directories`

`linker->additional lib directories`

`linker->additional dependencies`

...

这将完成大部分 VC++ 目录。但是，仍然缺少可执行目录。有两部分需要做。

1.  构建时的可执行路径，可以通过添加用户宏设置：PATH（例如：）`c:\sss;%PATH%`，然后选中底部的框以将此变量公开给构建环境。
2.  但是，在调试 DLL 目录时可能仍会丢失。然后我们可以在项目属性->调试->环境中设置它：`PATH=%DLLPATH%;%PATH%`这将允许调试器将 DLLPATH 添加到环境 PATH。

# javascript - 防止带有行跨度的 TH 隐藏

> ID：13162662
> 
> 赞同：1
> 
> 时间：2012-10-31T16:36:26.243
> 
> 标签：javascript, jquery

我是JS的新手。我正在尝试隐藏表格行，但我不知道如何保留 TH。请给个方向。

HTML：这是我试图使用 JS 隐藏行的表的代码

```
<!DOCTYPE html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<meta charset=utf-8 />
</head>
<body>

<div>
<label for="kwd_search">Search:</label>
<input type="text" id="kwd_search"/>
<table id="my-table" border="1" style="border-collapse:collapse">
    <colgroup>
     <col class="col1" />
     <col class="col2" />
     <col class="col3" />
     <col class="col4" />
    </colgroup>
    <thead>
        <tr>
        <th>No</th>
        <th>Use case</th>
        <th>Exsample</th>
            <th>Marker</th> 
        </tr>
    </thead>
    <tbody>
        <tr>
            <th scope="rowgroup" rowspan="3"><div class="vertical-text">1</div></th>
            <td>1a</td>
            <td>1b</td>
            <td>1c</td>
        </tr>
        <tr>
        <td>1d</td>
            <td>1e</td>
            <td>1f</td>
        </tr>
        <tr>
        <td>1g</td>
            <td>1h</td>
            <td>1i</td>
        </tr>
    </tbody>
<tbody>
        <tr>
            <th scope="rowgroup" class="past-simp" rowspan="3"><div class="vertical-text">2</div></th>
            <td>2a</td>
            <td>2b</td>
            <td>2c</td>
        </tr>
        <tr>
        <td>2d</td>
            <td>2e</td>
            <td>2f</td>
        </tr>
        <tr>
        <td>2g</td>
            <td>2h</td>
            <td>2i</td>
        </tr>
    </tbody>>
</table>
</div>
</body>
</html> 
```

JS（它是从[[link]](http://blogs.digitss.com/javascript/jquery-javascript/implementing-quick-table-search-using-jquery-filter/)处理的）：

```
$(document).ready(function(){
    // Write on keyup event of keyword input element
    $("#kwd_search").keyup(function(){
        // When value of the input is not blank
        if( $(this).val() !== "")
        {
            // Show only matching TR, hide rest of them
            $("#my-table tbody>tr").hide();
            $("#my-table td:contains-ci('" + $(this).val() + "')").parent("tr").show();
        }
        else
        {
            // When there is no input or clean again, show everything back
            $("#my-table tbody>tr").show();
        }
    });
});
// jQuery expression for case-insensitive filter
$.extend($.expr[":"], 
{
    "contains-ci": function(elem, i, match, array) 
    {
        return (elem.textContent || elem.innerText || $(elem).text() || "").toLowerCase().indexOf((match[3] || "").toLowerCase()) >= 0;
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:44:37.990

隐藏其父元素时不能显示子元素。而是尝试隐藏`<th>`兄弟姐妹 - [**DEMO**](http://jsfiddle.net/cKZZM/1/)

```
$("#my-table tbody > tr > td").hide(); 
```

# sql-server - 应用程序与 SQL Server 2008 帐户问题

> ID：13162663
> 
> 赞同：2
> 
> 时间：2012-10-31T16:36:32.083
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

大家好，

我正在研究以下案例：

**场景：**应用程序使用通用“SA”用户而不是域用户连接到生产数据库（SQL server 2008）。这使跟踪\日志\组织变得更加困难，因为一切都被标记为由 SA 用户完成！

注意：在应用程序中使用域用户/密码，通用帐户仅与数据库有关。

**问题：**在这种情况下，最好的做法是什么？每个用户都应该有一个帐户来登录数据库吗？（使用 Windows 身份验证的 sql）有 +- 500 个用户是关于数据库性能的问题吗？或指示通用帐户？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:51:15.903

正如其他人所提到的，如果可以选择，Active Directory 和 Windows 身份验证可能更合适。但如果不是...

如果应用程序有一个在更新之前创建连接和事务的中心位置，您可以使用[SET CONTEXT_INFO](http://msdn.microsoft.com/en-us/library/ms187768%28v=sql.105%29.aspx)传递“真实”应用程序用户，同时仍然使用共享 SQL 帐户进行登录。

[然后在您的审计触发器中，您可以使用CONTEXT_INFO() 函数](http://msdn.microsoft.com/en-us/library/ms180125%28v=sql.105%29.aspx)再次提取信息

这是[至少一种商业审计工具使用的方法](http://krell-software.com/omniaudit/)

另请参阅[此处](https://stackoverflow.com/questions/323494/sql-server-modifying-the-application-name-property-for-auditing-purposes)和[此处](https://stackoverflow.com/questions/2873104/pass-tenant-id-via-sql-server-connection)的类似 SO 问题，其中参考 context_info 和博客文章[Exploiting Context_Info for Fun and Audit](http://jasondentler.com/blog/2010/01/exploiting-context_info-for-fun-and-audit/)，其中提供了 NHibernate 示例。

在您的问题中挑剔其他内容：您说它正在使用 sa 用户。也许这只是一个例子，但可能应用程序不应该在服务器上拥有这么多的权限。创建仅具有应用程序使用的特定数据库所需权限的用户。这限制了应用程序中任何未来安全漏洞（例如 SQL 注入）的影响。更进一步，您可能有一个带有只读用户帐户的连接字符串，然后在创建事务以更新数据时，切换到带有读/写用户帐户的连接字符串。您仍然可以获得连接池的大部分好处，但您可以进一步限制任何应用程序层错误的影响。

# android - 仅在异步任务完成后执行代码

> ID：13162669
> 
> 赞同：0
> 
> 时间：2012-10-31T16:36:50.483
> 
> 标签：android, android-asynctask

我有以下三行代码。

```
Line 1 : GetBitMapFromURL gbmap = new GetBitMapFromURL();   //Obtain thumbnail bitmap
Line 2 : gbmap.execute(applicationThumbNailURL);
Line 3 : applicationThumbnailBitMap = gbmap.returnBitmap(); 
```

我希望仅在 GetBitMapFromURL 异步任务的 onPostExecute 执行后才执行第 3 行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T16:42:26.617

在 GetBitMapFromURL 中创建回调。

```
public class GetBitMapFromURL extends AsyncTask<Void, Void, Void> {

    private GetBitMapFromURLCallback mCallback = null;

    public WebService(GetBitMapFromURLCallback callback) {
        mCallback = callback;
    }

    @Override
    protected Boolean doInBackground(Void... params) {
        // ...
    }

    @Override
    protected void onPostExecute(Boolean result) {
        super.onPostExecute(result);

        if (mCallback != null) {
            mCallback.onGetBitMapFromURLComplete(this);
        }
    }

    public interface GetBitMapFromURLCallback {

        public void onGetBitMapFromURLComplete(GetBitMapFromURL getBitMapFromUrl);
    }
}

public class MyActivity extends Activity implements GetBitMapFromURLCallback {

    // ...

    public void onGetBitMapFromURLComplete(GetBitMapFromURL getBitMapFromUrl) {
        // This code will get called the moment the AsyncTask finishes
    }
} 
```

并让您的活动实现此回调和`onGetBitMapFromURLComplete()`.

# java - 缺少依赖项'class javax.annotation.Nullable'

> ID：13162671
> 
> 赞同：13
> 
> 时间：2012-10-31T16:36:51.510
> 
> 标签：java, scala, sbt, jira-rest-java-api

我试图在我正在开发的 Scala 程序中使用 Atlassian 提供的 jira-rest-java-client。我使用 Eclipse 作为我的 IDE。

当我有一个 Issue 类型的对象并尝试查看属性时，我发现属性远远少于 Java 代码中声明的属性。

我想这可能只是 Eclipse 没有找到对象的所有属性/方法，所以我尝试放置 Issue.getSummary() 并进行 sbt 编译。编译向我显示了这个错误：

> 缺少依赖项'class javax.annotation.Nullable'

有任何想法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-31T16:36:51.510

我在 googlecode 上的这个问题中找到了答案：[http](http://code.google.com/p/guava-libraries/issues/detail?id=1095) ://code.google.com/p/guava-libraries/issues/detail?id=1095 。要纠正 sbt 中的问题，您需要添加此依赖项：

```
"com.google.code.findbugs" % "jsr305" % "1.3.+" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-26T14:08:53.747

Scala 编译器需要类路径中的所有注释类。由于此类在类路径中不可用，因此编译失败。在我的特定情况下，应用程序不使用该类。`fatal-warnings`因此，在构建中禁用该选项就足够了 。

在我的`built.sbt`我有以下行：

```
scalacOptions ++= Seq("-Yno-adapted-args", "-Ywarn-dead-code", "-Ywarn-numeric-widen", "-Ywarn-value-discard", "-Xfatal-warnings") 
```

我删除了`"-Xfatal-warnings"`，编译成功。

# jquery - 从 JSON 解析的对象数组中填充 Select HTML 元素

> ID：13162675
> 
> 赞同：3
> 
> 时间：2012-10-31T16:37:02.483
> 
> 标签：jquery, json

我有以下 JSON 数据，我想从中填充一个 html 选择元素，请我看不到如何为每个循环使用这样的 json 数据。谢谢。

//JSON

```
[{
    "group": "US (Common)",
    "zones": [{
        "value": "America/Puerto_Rico",
        "name": "Puerto Rico (Atlantic)"
    }, {
        "value": "Pacific/Honolulu",
        "name": "Honolulu (Hawaii)"
    }]
}, {
    "group": "Africa",
    "zones": [{
        "value": "Africa/Tunis",
        "name": "Tunis"
    }, {
        "value": "Africa/Windhoek",
        "name": "Windhoek"
    }]
}] 
```

并且 html 选择元素看起来像：

```
<select id="timeZones"></select> 
```

这是不工作的 JS 代码：

```
var $select = $('#timeZones');
$.ajax({
    url: 'timezones.json',
    dataType: 'JSON',
    success: function (data) {
        $.each(data, function (i, val) {
            $select.append('<OPTGROUP LABEL="' + val[i].group + '"><OPTION VALUE="' + val[i].zone[i].value + '">' + val[i].zone[i].name + '</OPTION></OPTGROUP>');
        })
    },
    error: function () {
        alert("JSON ERROR");
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:59:20.877

在嵌套节点上执行两个每个函数更容易

```
 success: function (data) {
    $.each(data, function (i, val) {
        bar = '<OPTGROUP LABEL="' + val.group + '">';      
        $.each(val.zones, function(zoneID,zoneData) {
            bar += '<OPTION VALUE="' + zoneData.value + '">' + zoneData.name + '</OPTION>';  
        });
        bar += '</OPTGROUP>';
        $('#timeZones').append(bar);
   });    

} 
```

这是工作解决方案的 jsfiddle [http://jsfiddle.net/hZsQS/132/](http://jsfiddle.net/hZsQS/132/)

但是，您可能想查看诸如 jsrender 之类的模板

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:48:16.293

看起来你必须有嵌套`$.each`循环；一个循环遍历组并添加`<optgroup>`，内部循环循环遍历区域并将每个添加`<option>`到适当的`<optgroup>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T17:47:07.100

您可以使用 Knockout 框架将 json 字符串映射到选择框（非常少的代码）。

示例：JavaScript：

```
var json = '{"showFilter":["notStarted","running"],"whatEver":["one","two"]}';
  var model = ko.mapping.fromJSON(json);
  ko.applyBindings(model); 
```

HTML：

```
<p>Filter: <select data-bind="options: showFilter"></select></p>
<p>WhatEver: <select data-bind="options: whatEver"></select></p> 
```

另见：http: [//knockoutjs.com/documentation/options-binding.html](http://knockoutjs.com/documentation/options-binding.html)

# jquery - jquery mobile listview数据仅在Android（三星Galaxy Note）中触摸屏幕时显示

> ID：13162679
> 
> 赞同：1
> 
> 时间：2012-10-31T16:37:12.687
> 
> 标签：jquery, jquery-mobile

我在 Android 设备上遇到了一个非常奇怪的问题，其中列表视图中的数据仅在我触摸屏幕时才显示。我正在使用`jQM 1.2`,`Phonegap 2.1`和. 下面是代码：`Eclipse juno 4.2.1``Samsung Galaxy Note`

```
 <div data-role="page" id="sent_receipt" data-title="Sent Receipt" data-dom-cache="true">

        <div data-role="header" class="header" data-position="fixed" data-tap-toggle="false">
        <a id="a_sent_receipt" href="#search_receipt_option" data-icon="arrow-l" class="ui-btn-left" data-iconpos="notext" data-theme="d" data-direction="reverse"></a>
            <h2>Sent Receipt</h2>
            <a id="refresh" href="#" data-icon="refresh" class="ui-btn-right" data-iconpos="notext" data-theme="d"></a>
        </div><!-- /header -->

        <div data-role="content" data-iscroll>  

            <ul data-role="listview" id="ul_no_record">
            </ul>

            <ul data-role="listview" id="ul_sent_receipt_list_today">
            </ul>

            <ul data-role="listview" id="ul_sent_receipt_list_yesterday">
            </ul>

            <ul data-role="listview" id="ul_sent_receipt_list_this_week">
            </ul>   

            <ul data-role="listview" id="ul_sent_receipt_list_last_week">
            </ul>       

        </div><!-- /content -->

        <div data-role="footer" data-position="fixed" data-tap-toggle="false">      
        </div><!-- /footer -->
    </div><!-- /page -->

        $.ajax({
            type: 'POST',
            url: myApp.getHost() + myApp.getReceiptsUrl(),
            cache: false,
            data: {'email':myApp.getStoreValue('email')},
            dataType: 'json',
            timeout: myApp.getRequestTimeout(),
            beforeSend: function(x) {
                if (x && x.overrideMimeType) {
                    x.overrideMimeType('application/json;charset=UTF-8');
                }   
            }, 
            success: function(res) {

                        if(res.end === undefined) {
                        // some populated data goes here
                            ul.append('<li id="li_show_more" data-icon="false"></li>').listview('refresh').css('display','block');                                  

                        } else {

                            ul.listview('refresh').css('display','block');

                        }

            },
            error: function(jqXHR, exception) {

            },
            complete: function(res) {

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T19:59:27.033

我无法重现您的问题，刚刚在 HTC Desire 上使用 Android 2.2 进行了测试。我唯一更改的是删除您`data-iscroll`的内容`<div data-role="content">`并添加一些项目以显示在其中一个列表视图中，请参见屏幕截图

```
 <ul data-role="listview" id="ul_sent_receipt_list_today">
    <li><a href="#itemA">A</a></li>
    <li><a href="#itemB">B</a></li>
    <li><a href="#itemC">C</a></li>
    <li><a href="#itemD">D</a></li>
    <li><a href="#itemE">E</a></li>
  </ul> 
```

![在此处输入图像描述](../Images/68633f058d1e3e3574eaefcc1fee12d6.png)

# coldfusion - 在 MS Word 中单击的链接会丢失 CF 会话变量，但复制和粘贴工作正常

> ID：13162680
> 
> 赞同：3
> 
> 时间：2012-10-31T16:37:19.663
> 
> 标签：coldfusion, coldfusion-8

一个小时以来一直试图弄清楚这一点，但我被困住了。允许员工注册的简单网站。通常，雇主有一个公司范围内的 u/p 供所有员工用来访问注册页面，但客户还希望有一种方法可以为员工提供自动登录的链接以进行注册。

很简单——创建了一个页面“r.cfm”来查找 URL.emid（加密的雇主 ID）和 URL.h（5 个字符的哈希值作为基于解密的雇主 ID 的检查）。完整的 URL 可能如下所示：

```
https://www.domain.com/r.cfm?emid=22EBCA&h=F5DEA 
```

r.cfm 确保存在正确的 URL 变量，解密 emid，比较检查值，如果一切正确，则设置一些会话变量，如下所示：

```
<cflock scope="session" type="exclusive" timeout="10">
 <cfset SESSION.LOGGEDIN = TRUE/>
 <cfset SESSION.LOGIN.EMPLOYEE.COID = DecryptString(url.emid)/>
</cflock> 
```

我认为使用 CFHEADER 302 和 CFHEADER 位置将它们发送到下一页。这就是它变得奇怪的地方。在下一页上，我设置了一些测试代码以通过电子邮件向我发送会话转储。

如果直接在 MS Word 中单击，我会进入第二页（来自 cfheader 重定向的页面 - employeeRegister.cfm），我得到的不是一个页面，而是两个会话的电子邮件转储。第一个显示登录为真，但第二个显示为假，并带有不同的 jsessionid。

如果我采用完全相同的链接，将其粘贴到我的浏览器中，它会按预期工作 - 一封带有会话转储的电子邮件，显示 session.logged in true。

employeeRegister.cfm 上没有任何内容会启动页面重新加载。它实际上甚至不检查 session.logged in var 直到下一页。employeeRegister.cfm 只是条款和条件以及一个提交按钮以转到下一页，这是读取和检查会话变量的地方。它实际上是一个带有文本的 div，然后是一个带有接受/拒绝的表单标签。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T17:31:57.973

这是因为 Office 产品最初尝试充当浏览器（以测试 Web 创作），而不是立即将控制权交给浏览器。当浏览器控制 url 时，一个有效的会话不存在，因为 office 不会共享 cookie。如果没有有效的会话 cookie，您最终会在后续重定向或导航相关站点期间被注销。

这些 MS 知识库文章应该可以帮助您解决问题。

> [http://support.microsoft.com/kb/899927](http://support.microsoft.com/kb/899927) <- 主要是
> 
> [http://support.microsoft.com/kb/218153](http://support.microsoft.com/kb/218153) <- 有关 Office 链接的更多信息

# c# - 这个防止MySQL注入的代码好用吗？

> ID：13162681
> 
> 赞同：0
> 
> 时间：2012-10-31T16:37:21.280
> 
> 标签：c#, mysql, sql-injection

找到此代码用于防止使用 HTTPModules 进行一些基本的 MySql 注入

```
public class SampleSqlInjectionScreeningModuleCS : IHttpModule
{
    //Defines the set of characters that will be checked.
    //You can add to this list, or remove items from this list, as appropriate for your site
    public static string[] blackList = {"--",";--",";","/*","*/","@@","@",
                                       "char","nchar","varchar","nvarchar",
                                       "alter","begin","cast","create","cursor","declare","delete","drop","end","exec","execute",
                                       "fetch","insert","kill","open",
                                       "select", "sys","sysobjects","syscolumns",
                                       "table","update"};

    public void Dispose()
    {
        //no-op 
    }

    //Tells ASP.NET that there is code to run during BeginRequest
    public void Init(HttpApplication app)
    {
        app.BeginRequest += new EventHandler(app_BeginRequest);
    }

    //For each incoming request, check the query-string, form and cookie values for suspicious values.
    void app_BeginRequest(object sender, EventArgs e)
    {
        HttpRequest Request = (sender as HttpApplication).Context.Request;

        foreach (string key in Request.QueryString)
            CheckInput(Request.QueryString[key]);
        foreach (string key in Request.Form)
            CheckInput(Request.Form[key]);
        foreach (string key in Request.Cookies)
            CheckInput(Request.Cookies[key].Value);
    }

    //The utility method that performs the blacklist comparisons
    //You can change the error handling, and error redirect location to whatever makes sense for your site.
    private void CheckInput(string parameter)
    {
        for (int i = 0; i < blackList.Length; i++)
        {
            if ((parameter.IndexOf(blackList[i], StringComparison.OrdinalIgnoreCase) >= 0))
            {
                //
                //Handle the discovery of suspicious Sql characters here
                //
                HttpContext.Current.Response.Redirect("~/About.aspx");  //generic error page on your site
            }
        }
    }

} 
```

这是一个好的代码还是您认为我需要在黑名单中添加更多内容，或者忘记这一点并尝试另一种方法来防止注入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T16:42:40.673

[当参数化查询](http://msdn.microsoft.com/en-us/library/yy6y35y8.aspx)为您（以及更多）工作时，为什么要执行字符串检查？

在您从代码发出的 SQL 语句上使用`Parameters.Add()`或。`Parameters.AddWithValue()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T16:42:28.817

清理/过滤数据的黑名单方法***从来都不***是清理数据的最佳方法。（虽然在某些情况下是合适的，这取决于权衡）

这里有一个简单的解释：[http ://www.testingsecurity.com/whitelists_vs_blacklists](http://www.testingsecurity.com/whitelists_vs_blacklists)

> 黑名单正在针对负面输入列表测试所需的输入。基本上，您将编译所有负面或不良条件的列表，然后验证收到的输入不是不良或负面条件之一。白名单正在根据可能的正确输入列表测试所需的输入。为此，您将编译所有良好输入值/条件的列表，然后验证收到的输入是否是此正确条件之一。
> 
> 你认为哪个更好？攻击者将使用任何可能的手段来访问您的基于 Web 的应用程序。这包括尝试各种负面或不良条件、各种编码方法以及将恶意输入数据附加到有效数据中。你认为你能想到所有可能发生的坏排列吗？白名单是验证输入的最佳方式。您将确切知道需要什么，并且不接受任何错误类型。通常，创建白名单的最佳方法是使用正则表达式。使用正则表达式是抽象白名单的好方法，而不是手动列出每个可能的正确值。

您最好使用标准的、久经考验的防御措施：**参数化查询**或**参数化存储过程**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T16:42:07.413

不，这不好。

它将阻止有效输入，并且绝不会保护从错误/无效数据构造查询的代码。

假设传入的数据很糟糕，只需正确构造查询，您的情况就会好得多。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-31T16:42:18.993

不，黑名单不能阻止 SQL 注入。有关绕过黑名单的方法，请参阅[OWASP页面。](https://www.owasp.org/index.php/SQL_Injection)您应该只使用[参数化查询](https://stackoverflow.com/questions/652978/parameterized-query-for-mysql-with-c-sharp)

# c++ - Windows 8 IShellIconOverlayIdentifier shell 扩展无法正常工作

> ID：13162693
> 
> 赞同：0
> 
> 时间：2012-10-31T16:37:52.003
> 
> 标签：c++, windows, qt, windows-shell

我有一个应用程序，我想在其中为特定文件和文件夹设置图标覆盖。

为此，我编写了一个实现 IShellIconOverlayIdentifier 接口的 shell 扩展。它用 c++ / Qt ( [activeqt](http://doc.qt.digia.com/qt/activeqt.html) ) 作为 dll 编写，使用 tcp 连接到相关应用程序以查询应用程序以决定是否显示图标覆盖。[它的构建方式与此](http://www.qtcentre.org/threads/32104-howto-making-a-windows-shell-extension-with-qt-open-source-edition)大致相同。

它在 XP/Vista/7 中运行良好，但在 Windows 8 中无法运行。

在 Windows 8 中加载 dll。我可以在[进程资源](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)管理器中看到它，并且作为调试的一部分，它还将输出记录到文件中，这样我就可以看到发生了什么并推断出什么。

使用[ShellExView](http://www.nirsoft.net/utils/shexview.html)我还可以看到它已注册，而不是禁用，而且总的来说一切正常。

类声明看起来或多或少像这样：

```
class Q_DECL_EXPORT OverlayClass :
    public QAxAggregated,
    public IShellIconOverlayIdentifier{
public:
    // Implements IUnknown
    QAXAGG_IUNKNOWN; 

    JShellOverlayWorking();

    // Implements IShellIconOverlayIdentifier
    STDMETHOD(GetOverlayInfo)(LPWSTR pwszIconFile, int cchMax, int *pIndex, DWORD* pdwFlags);
    STDMETHOD(GetPriority)(int* pPriority);
    STDMETHOD(IsMemberOf)(LPCWSTR pwszPath, DWORD dwAttrib);

    //pure virtual from QAxAggregated
    long queryInterface(const QUuid &iid, void**iface); 
}; 
```

XP/Vista/7 上发生了什么：

*   如果 iid == IID_IShellIconOverlayIdentifier 和所有其他 iid 的 E_NOINTERFACE，则加载时的资源管理器首先调用 queryInterface() 并获得 S_OK
*   然后它继续调用 GetOverlayInfo() 来初始化东西。获取图标文件路径等。
*   然后根据 shell 的需要调用 IsMemberOf() 来查看它是否应该显示文件或文件夹的图标。

在 Windows 8 上会发生什么：

*   加载时的资源管理器调用 queryInterface() 并在 iid == IID_IShellIconOverlayIdentifier 和所有其他 iid 的 E_NOINTERFACE 时获得 S_OK

没有别的了。queryInterface() 被调用，但之后没有任何反应。我可以看到我的应用程序成功连接到由 shell 扩展创建的 tcp 套接字，并且 IPC 正在工作（我可以在应用程序和 dll 之间来回发送数据，但又一次。没有其他事情发生。资源管理器没有使用实现的接口。

该 dll 使用以下方式注册：

```
regsvr32.exe shellext.dll 
```

并且还添加了下面的注册表项

```
HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\ShellIconOverlayIdentifiers\Shellextname ( value = CSLID ) 
```

为了在 Windows 8 上进行测试，我还添加了以下密钥

```
HKCU\Software\Microsoft\Windows\CurrentVersion\Shell Extensions\Approved 
```

使用我的 shell 扩展 CSLID 作为名称和 data = Shellextname （如上一个键中所示），尽管这在 XP/Vista/7 上似乎无关紧要，所以我猜测它在这里也无关紧要。

同样，这适用于除 Windows 8 之外的所有 Windows（>= xp）。

我错过了什么？我该从哪里找到答案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T10:28:57.523

似乎问题在于注册表项

```
HKEY_CLASSES_ROOT\CLSID\{myguid}\InprocServer32
        ThreadingModel = Apartment 
```

[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144110%28v=vs.85%29.aspx)指定的不是 regsvr32.exe 设置的。如果没有设置，我猜以前的 Windows 版本会忽略它，但 Windows 8 需要它。手动设置它。

# php - 按钮单击时的 Jquery 和 ajax

> ID：13162696
> 
> 赞同：0
> 
> 时间：2012-10-31T16:38:11.070
> 
> 标签：php, jquery, ajax

我有这个没有表单的提交按钮..

```
<input type='submit' id='conx' name='X' value='TEST x'> 
```

现在，当单击按钮时，我需要执行此代码。

```
$con = fopen("/tmp/myFIFO", "w");
fwrite($con, "XcOn");
close($con); 
```

我如何在 jquery 和 ajax 中执行它？

```
$("#conx").click(function(){

//Execute this code
//$con = fopen("/tmp/myFIFO", "w");
//fwrite($con, "XcOn");
//close($con);

}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:41:25.807

使用 Ajax 将其发布到 PHP 页面并执行它们

```
$("#conx").click(function(){
  $.post("yourPHPPageWithMagicCode.php");
}); 
```

确保你在文件中有那个 PHP 代码`yourPHPPageWithMagicCode.php`。

如果您想在处理完成后显示响应，您可以从您的 PHP 页面返回一些内容并让 $.post 的回调处理它。

在您的代码之后的 PHP 页面中，放置一个回显

```
echo "successfully finised"; 
```

现在更改 jquery 代码来处理回调

```
$("#conx").click(function(){
  $.post("yourPHPPageWithMagicCode.php",function(repsonse){
    alert(response);
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:42:05.343

假设您的 PHP 文件名为`write.php`. 我相信你可以做到这一点：

```
 $("#conx").click(function() {
    $.ajax({
      url: "/write.php"
    });
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T16:41:44.080

在 click 函数中添加如下内容以调用 PHP 脚本：

```
if (window.XMLHttpRequest){
    xmlhttp=new XMLHttpRequest();
}else{
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}

xmlhttp.open("GET", "URL/TO/PHP/SCRIPT",true);
xmlhttp.send(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T16:42:37.230

您需要在单击事件块之间进行 jquery ajax 调用

```
$("#conx").click(function(){

    $.ajax({
        url: "phpfile.php",
        type: "post",
        //data: serializedData,
        // callback handler that will be called on success
        success: function(response, textStatus, jqXHR){
            // log a message to the console
           alert(response);
        }
    });

}); 
```

将您想要的任何代码放入 phpfile.php 文件中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T16:43:45.857

您需要在文档加载时加载“点击事件”，即：

```
$(document).ready(function($){
     $("#conx").click(function(){ ..... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T16:44:27.583

一种方法是

```
$("#conx").click(function(){
    $.post("PHPFILENAME.PHP",{
        whatdo:otherstuff
    },function(d){
        // return d here
    }
}) 
```

在 php 文件中运行您的代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-31T16:45:15.693

您可以从按钮调用 javascript 函数：

```
<input type='submit' onclick="myFunction()" id='conx' name='X' value='TEST x'> 
```

并在您的函数中加载页面：

```
function myFunction(){
    var loadUrl = "magic.php";  
    var result = $("#result").load(loadUrl);  
} 
```

然后让 magic.php 运行你的方法：

```
//Execute this code
//$con = fopen("/tmp/myFIFO", "w");
//fwrite($con, "XcOn");
//close($con); 
```

这都是未经测试的伪代码......

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-31T17:01:02.907

全部在一个文件中。

## 测试.php

```
<?php
if ($_POST['cmd'] === 'ajax') {
    $con = fopen("/tmp/myFIFO", "w");
    fwrite($con, "XcOn");
    fclose($con);
    exit;
}
?>

<!doctype html>
<head>
    <meta charset="utf-8">
    <title>meh</title>
</head>
<body>

<input type="submit" id="conx" name="X" value="TEST x">

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>
$(function(){
    $("#conx").bind('click', function(){
        $.post("test.php", { cmd: "ajax" } );
    });
});
</script>

</body>
</html> 
```

# php - Sphinx PHP API 顺序与搜索守护进程不同

> ID：13162698
> 
> 赞同：0
> 
> 时间：2012-10-31T16:38:24.157
> 
> 标签：php, sphinx

我已经设置了 Sphinx 并且 PHP API 排序返回有问题 - 搜索守护程序返回正确的数组响应，但是 PHP API 似乎按 ID 顺序返回。有谁知道它为什么要这样做..

更新：我注意到这个问题似乎出现在单字搜索中。例如，如果我输入“运动障碍指南”，PHP API 的结果看起来不错 - 任何想法为什么？

```
// running via SSH using the 'search dyspraxia' (search daemon command)
displaying matches:
1\. document=5994, weight=2846, title=A guide to dyspraxia, table_id=3
2\. document=3993, weight=1731, title=THE WRITE THING FOR BOYS, table_id=3
3\. document=2697, weight=1668, title=SEN And Sensibility, table_id=3
4\. document=3320, weight=1668, title=SEN And Sensibility, table_id=3
5\. document=3810, weight=1668, title=SEN support in schools  in or out of the classroom?, table_id=3
6\. document=4304, weight=1668, title=The Ukulele Strategy, table_id=3
7\. document=4437, weight=1668, title=Let the future in, table_id=3
8\. document=5273, weight=1668, title=Working memory is the key to learning, table_id=3
9\. document=5396, weight=1668, title=Mind mapping for dyslexics, table_id=3

words:
1\. 'dyspraxia': 9 documents, 27 hits

// PHP API script 
$cl = new SphinxClient();
$cl->SetServer($CONF['sphinx_host'], $CONF['sphinx_port']);
$cl->SetLimits(0, 1000);
$result = $cl->Query($q);

// returned $result['matches'] below note 2697 is first, where-as in the search daemon the first document id is 5994

Array ( 
[2697] => Array ( [weight] => 1 [attrs] => Array ( [table_id] => 3 ) ) 
[3320] => Array ( [weight] => 1 [attrs] => Array ( [table_id] => 3 ) ) 
[3810] => Array ( [weight] => 1 [attrs] => Array ( [table_id] => 3 ) ) 
[3993] => Array ( [weight] => 1 [attrs] => Array ( [table_id] => 3 ) ) 
[4304] => Array ( [weight] => 1 [attrs] => Array ( [table_id] => 3 ) ) 
[4437] => Array ( [weight] => 1 [attrs] => Array ( [table_id] => 3 ) ) 
[5273] => Array ( [weight] => 1 [attrs] => Array ( [table_id] => 3 ) ) 
[5396] => Array ( [weight] => 1 [attrs] => Array ( [table_id] => 3 ) ) 
[5994] => Array ( [weight] => 1 [attrs] => Array ( [table_id] => 3 ) ) ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T19:33:36.893

似乎搜索工具默认为 bm25 排名。尝试添加 $cl->SetMatchMode(SPH_MATCH_EXTENDED2); $cl->SetRankingMode(SPH_RANK_BM25); 你应该得到相同的结果。顺便说一句，不要太相信搜索工具，它更多的是用于测试，并且在 Sphinx 项目中有点像“二等公民”。使用 API 或 sql 接口。

# jquery - 使用 jQuery 搜索 JSON

> ID：13162699
> 
> 赞同：0
> 
> 时间：2012-10-31T16:38:24.697
> 
> 标签：jquery, json, search

我正在尝试使用 jQuery 解析和搜索我的 json 文件，我能够解析 json 文件但不能搜索它。

我的 HTML

`<ol id="results"></ol>`

我的 jQuery

```
$(document).ready(function() {
    $.getJSON('myJson.json', function(data) {
        $.each(data, function(i, item) {
            $('<li />').html(item.name + '<br>' + item.details + '<br>').appendTo('#results');
        }
    });
});​ 
```

上面的代码返回所有项目，但是我现在希望允许用户搜索 json 文件，所以我包含一个表单输入并创建一个 onclick 事件并将输入传递给搜索，请参见下面的链接。

问题是输入变量没有被传递给搜索？请帮忙。

[http://jsfiddle.net/xpTk5/7/](http://jsfiddle.net/xpTk5/7/)

* * *

更新：将变量传递给正则表达式似乎是问题所在。

* * *

解决了：`if (item.name.search(new RegExp(q, "i")) != -1){`

感谢您的尝试，很抱歉浪费您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:42:51.660

表单提交后需要获取文本框的值。在你拥有它的地方，它永远不会被设置，因为它在文档准备好时（并且可能在输入任何内容之前）获取值。

```
$(document).ready(function() {
    $('#submit').click(function() {
        var q = $('#query').val();
        $.getJSON('myJson.json', function(data) {
            // iterator
            $.each(data, function(i, item) {
                // search the results using regular expression for the query
                if (item.name.search(new RegExp(/''+q+''/i)) != -1) {
                    $('<li />').html(item.name + '<br>' + item.details + '<br>').appendTo('#results');
                }
            });
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:12:41.777

正则表达式正在读取该变量。

```
$('#submit').click(function() {
    var q = $('#query').val();
    $.getJSON('myJson.json', function(data) {
        // iterator
        $.each(data, function(i, item) {
            // search the results using regular expression for the query
            if (item.name.search(new RegExp(q, "i")) != -1) {
                $('<li />').html(item.name + '<br>' + item.details + '<br>').appendTo('#results');
            }
        });
    });
}); 
```

[http://jsfiddle.net/xpTk5/8/](http://jsfiddle.net/xpTk5/8/)

# c# - Selenium WebDriver 自动抛出 TimeoutException - C#

> ID：13162701
> 
> 赞同：1
> 
> 时间：2012-10-31T16:38:29.493
> 
> 标签：c#, selenium, automation, webdriver, selenium-webdriver

我们目前正在将我们的自动化脚本从 Selenium RC 迁移到 WebDriver。我在使用 WebDriver 时遇到了一些问题，主要是处理在被测试的网页中的某些内容发生更改时抛出的 TimeoutExceptions。

例如，我目前正在登录一个页面，然后单击一个提交按钮，该按钮重定向到一个新页面。调用 click() 方法的那一刻，就会引发异常。但是，如果我专注于密码字段并使用 SendKeys(Keys.Enter) 重定向工作没有任何问题。

有没有其他人遇到过这个？由于调用 click 方法时会引发异常，因此我无法直接在之后设置任何等待或超时时间。我知道我可以吞下 TimeoutException，但肯定有更好的解决方案。

我正在使用 Firefox 驱动程序。我猜这个问题与页面源被更改有关。

这是一个例外：

![超时异常](../Images/9259414fba0b07778ddd09ffa42136af.png)

点击方法如下：

```
public void ClickByName(string name) 
{ 
    _driver.FindElement(By.Name(name)).Click(); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:15:02.557

在登录页面后，我在检查页面错误之前放置了一个睡眠语句，这解决了问题，以及偶尔抛出的 InvalidOperationExceptions。

# c# - 试图将 Gmap.Net 控件添加到工具箱

> ID：13162703
> 
> 赞同：2
> 
> 时间：2012-10-31T16:38:31.863
> 
> 标签：c#, wpf, visual-studio-2012, gmap.net

我在 Visual Studio 2012 中有一个针对 .Net 框架 4.5 的 WPF 应用程序。

我添加了对 GMap.NET.Core 和 System.Data.SQLLite 的引用。

在我的 App.config 我添加了

```
 <startup useLegacyV2RuntimeActivationPolicy="true"> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5"/>
    </startup> 
```

我在 VS 中打开我的 Map.xaml 页面，打开工具箱，右键单击，点击选择项目。

将选项卡更改为 .NET Framework Components，浏览，选择 GMap.Net.WindowsForms.dll。我看到 GMapControl 的条目在列表中弹出，它被选中，我点击 OK，然后我看到以下内容：

![在此处输入图像描述](../Images/6856908708f24e702b26ccd718eba05c.png)

我从来没有在我的工具箱中看到控件。帮助！

编辑：如果我右键单击并点击`Show All`，我确实看到了控件，它只是变灰了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-24T22:56:00.043

有点晚了，但以防万一它可以帮助任何人：

对于 WPF，有一个不同的 GMap.net 可供下载：GMap.NET.WindowsPresentation

一旦你有了这个：

*   将 GMap.NET.Core.dll 和 GMap.NET.WindowsPresentation.dll 添加到您的项目文件中
*   添加对 GMap.NET.Core.dll 和 GMap.NET.WindowsPresentation.dll 的引用
*   通过浏览到 GMap.NET.WindowsPresentation.dll 添加工具箱

如果您收到关于

> “无法加载程序集这个程序集可能是从网上下载的”

那么您需要更改两个 .dll 文件的属性并取消阻止它们。

我发现本指南很有帮助，尽管它适用于 Windows 窗体，而不是 Windows 演示文稿：

[http://www.websofia.com/2013/02/gmap-net-tutorial-maps-markers-and-polygons/](http://www.websofia.com/2013/02/gmap-net-tutorial-maps-markers-and-polygons/)

# tfs - 如何在 TFS 中针对/关于已关闭项目的先前状态运行工作项目查询

> ID：13162705
> 
> 赞同：-1
> 
> 时间：2012-10-31T16:38:32.200
> 
> 标签：tfs

我只想在 TFS 中运行查询，以获取当前处于关闭状态的工作项列表。条件是 & 。

例如：如果项目 A 完成编码并被分配给人员 X 进行审查，状态为“代码审查中”，然后项目 A 经历了所有状态并关闭。

那么，现在我可以运行 TFS 查询来获取由人 X 审查的已关闭项目（如 A）的列表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:18:18.467

您应该能够进入 Team Explorer 并从主屏幕 (TFS 2012) 中选择 Work Items 下的 New Query。从那里，您可以更改要查询的项目或工作项类型。您还可以添加其他字段进行搜索以及定义它们如何连接在一起（和/或）。您应该能够浏览这些字段并查询您要查找的内容。

如果没记错的话，您应该能够在以前的 TFS 版本（至少 2008 和 2010）中访问类似的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T08:44:11.670

理想情况下，您希望查询不方便的 WI 历史记录。但是，您可以创建一个自动填充的新字段并在查询中使用它。

```
<FieldDefinition name="Ready to test by" refname="Custom.actual.reviewedBy" type="String" reportable="detail">
   <WHENNOTCHANGED field="System.State">
      <READONLY />
   </WHENNOTCHANGED>
   <WHEN field="System.State" value="ReviewCompleted">
      <SERVERDEFAULT from="currentuser" />
   </WHEN>
</FieldDefinition> 
```

在我的情况下，该字段是在假设审阅者正在更改 WI 状态的情况下更新的。

# asp.net - 在 asp 中渲染控件说我需要一个带有 runat=server 的表单标签，但是代码看不到前端来注意到它

> ID：13162706
> 
> 赞同：0
> 
> 时间：2012-10-31T16:38:34.220
> 
> 标签：asp.net, controls

我有一个包含一系列控件的控件。我想要做的是获取字符串输出。我尝试了一个我正在研究的示例，但似乎由于某些控件是输入文本框，因此存在问题。它告诉我它需要一个带有 runat="server" 设置的表单。我的结论是它没有读取各种标记。

有没有办法绕过它？我正在考虑用表单包装数据后端......

所以不是root -> (control1, control2)，而是root -> form -> (control1, control2)。

我一直在做的尝试：

```
StringBuilder sb = new StringBuilder();
StringWriter sw = new StringWriter(sb);
HtmlTextWritertw = new HtmlTextWriter(sw);
root.RenderControl(tw); 
```

错误发生在根部。

在标记中，我尝试执行以下操作：

```
<form runat=server><asp:pladeholder id="root" /></form> 
```

但这根本不起作用。

我还没有尝试 root->form->(1,2) 但现在要尝试。**编辑：**我做了这个尝试，它不再导致一个 HTMLException，但现在一个无效的操作异常： **RegisterForEventValidation 只能在 Render() 期间调用；**

我也尝试覆盖 VeriftRenderingInServerForm(Control control){} 但这也不起作用，但也许我做错了这部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:45:14.947

我建议您使用此代码-基于`Controls property`Place Holder

```
var controlsFlow = new StringBuilder() ;
foreach(var control in yourPlaceHolder.Controls)
{
  controlsFlow.Append(control.Id);
} 
```

注意：将 runat="server" 添加到您的 PlacHolder

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:45:46.660

您正在尝试输出 ASP.net 控件，这些控件需要 runat="server" 控件，因为它们不是合法的 HTML 控件。

如果您不想在后面的代码中访问它们，那么您可以使用常规的 HTML 标记。例如

# excel - Excel - 将工作表中的某些行复制到另一个工作表中

> ID：13162712
> 
> 赞同：1
> 
> 时间：2012-10-31T16:38:56.700
> 
> 标签：excel, excel-2007, excel-formula, vba

我找到了解决这个问题的方法，但我不知道如何根据我的具体问题定制它们。我以前从未写过 marco 或任何 VBA 脚本，所以请具体说明您的答案。

我有一个 Excel 工作簿，其中一个工作表名为“食物”，另外四个工作表名为“小吃选择”、“早餐选择”、“午餐选择”和“晚餐选择”

“食物”工作表中的标题如下所示：

**食物量 卡路里 ... ETC ... 类型**

其中“类型”包含“早餐”“小吃”“午餐”“晚餐”或 2+ 选项的组合。

我希望根据“食物”工作表中“类型”字段的值，将整行复制到相应的“小吃选择”、“早餐选择”、“午餐选择”和“晚餐选择”工作表中。

例如，如果我在“食物”工作表中输入一个新行，其中“类型”字段为“小吃/早餐”，我希望该行自动出现在“早餐选择”和“小吃选择”工作表中。（如果这样更容易，我可以删除斜线或用另一个字符替换它）

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T21:16:28.450

主桌食物（表“食物”）：

![主餐桌上的食物（“食物”表）](../Images/7335586390b6f4d0e436ccea40dc9270.png)

早餐表：

![早餐表](../Images/2638ac7353bd929eac98ed4be019b999.png)

在此表中：

A1：食物种类。为了与其他食物（午餐/谷物/早餐）匹配组合，它应该以 '*': 开头和结尾：`*breakfast*`而不是`breakfast`. 也可以更改公式。

然后我们在“食物”表上寻找“早餐”的第一次：

A3：

```
=IF(ISERROR(MATCH($A$1,Foods!A:A;0)),"",MATCH($A$1,Foods!A:A,0)) 
```

结果，将显示一些匹配的行。如果不匹配，将显示一个空白单元格。

然后我们匹配其他数据：

B2：

```
=IF(A3="","",INDIRECT("Foods!B"&$A3)) 
```

D2：将 INDIRECT("Foods!B"&$A3)) 更改为 INDIRECT("Foods!D"&$A3))，将 E 更改为 E2 等。

第一行下方 A 列中的其他行（从 A4 向下复制）：

```
=IF(ISERROR(A3+MATCH($A$1,INDIRECT("Foods!A"&A3+1&":A60000"),0)),"",A3+MATCH($A$1,INDIRECT("Foods!A"&A3+1&":A60000"),0)) 
```

如果不匹配，将显示一个空白单元格。

我将电子表格示例上传到[http://www.bumpclub.ee/~jyri_r/Excel/Type_of_food_on_another_sheet.xls](http://www.bumpclub.ee/~jyri_r/Excel/Type_of_food_on_another_sheet.xls)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T14:35:31.773

寻找 excel 公式将许多工作表中的整行复制到单个工作表中。尝试复制的行在第一列中有一个“x”。

前任。

表是这样设置的：

列 1 2 3 4 5 行 1 卖出优先 WHID 序列 SAT 2 X 1 FG 1.FG.01
3 1 FG 1.FG.01

有很多行、很多列和很多张。

希望让第一列中的每个“X”都拉到新工作表中。

有什么帮助吗？

# jquery - jquery 无 li 可排序

> ID：13162717
> 
> 赞同：0
> 
> 时间：2012-10-31T16:39:25.697
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我想垂直重新排序我以前使用过的 jquery 可排序的 div 和部分，但它不适用于部分标签，这可能吗？你能举个例子吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T16:54:22.290

它适用于部分。

这是一个小提琴：http: [//jsfiddle.net/manishie/jAXCc/1/](http://jsfiddle.net/manishie/jAXCc/1/)

HTML：

```
<section id="sortable">
    <div id="entry1">Apple</div>
    <div id="entry2">Orange</div>
    <div id="entr3y3">Pear</div>
</section>​ 
```

Javascript：

```
$(document).ready(function(){
    $('#sortable').sortable();
}); 
```

​</p>

# c# - Specflow 在 VS 2012 中无法正常工作

> ID：13162718
> 
> 赞同：2
> 
> 时间：2012-10-31T16:39:26.087
> 
> 标签：c#, .net, visual-studio-2012, specflow

安装的 .NET Framework 版本：.Net 4

VS 2012 来自：www.microsoft.com/.../downloads

我能够在 VS 2010 中完美地使用 Visual NUnit 运行 SpecFlow 测试。我最近从上述站点安装了 VS 2012 并尝试运行 specflow 测试。规范流版本是 1.8.1。问题是 VS 2012 将功能文件视为文本文件，格式不起作用，场景没有颜色等。我也找不到 View->Other Windows 列表中列出的 Visual Nunit。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:32:00.770

您需要修复或卸载/重新安装 SpecFlow。原因是 SpecFlow 是在 2012 年之前安装的，因此它没有在 2012 中注册。或者，您可以从工具菜单下的扩展管理器中获取最新的 SpecFlow (1.9)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-01T09:17:56.080

我遇到了同样的问题，但是通过将 unitTestProvider 更改为 name="MSTest" 并确保“MST 是大写字母”，然后重新启动 Visual Studio 并将 SpecFlow Test Runner Tool（在 Visual Studio 选项中）设置为 Visual Studio 2012 .

# java - 表视图中的 JavaFX 更新项目

> ID：13162720
> 
> 赞同：0
> 
> 时间：2012-10-31T16:39:29.013
> 
> 标签：java, javafx-2, javafx

我想用一个新的更新 TableView 中的 selectedItem。这是我能想到的最接近的：

```
private ObservableList<String> data = FXCollections.observableArrayList();
private TableView tableview;

...
tableview.setItems(data);
... 

old = tableview.getSelectionModel().getSelectedItem();
new = "New"
data.remove(old);
data.add(new); 
```

如果我只执行 data.remove(old) （不添加之后），则 selectedItem 从 TableView 中消失，如果我只执行 data.add(new) （不删除之前），则添加新项目。没关系，但是当我在删除后进行添加（反之亦然）时，什么也没有发生。

请对此有所了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:25:28.873

我修复了它更新旧项目并做了一个肮脏的技巧来更新表格视图。

```
old = new;

// dirty hack
tableview.getColumns().get(0).setVisible(false);
tableview.getColumns().get(0).setVisible(true); 
```

远不是一个优雅的解决方案，但它暂时有效。

# ios - 从 tabbarcontroller 的不同 uiview 捕获屏幕截图

> ID：13162722
> 
> 赞同：0
> 
> 时间：2012-10-31T16:39:35.220
> 
> 标签：ios, xcode, uiimageview, uitabbarcontroller, screenshot

我正在尝试使用操作表从 tabbaritem 捕获屏幕。当我按下 tabbaritem2 时调用操作表。我想从 tabbaritem1 捕获视图控制器的屏幕。并尝试使用此代码。

```
self.tabBarController.selectedIndex = 0;
UIGraphicsBeginImageContext(self.view.frame.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage * image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
NSData * imageData = UIImageJPEGRepresentation(image, 1.0); 
```

我可以在屏幕上看到 tabbaritem1 但它总是捕获 tabbaritem2 的屏幕... 这个问题可以解决吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:06:06.473

看来您正在尝试保存当前视图，而不是 TabBarController 的 ViewController 层次结构中包含的 ViewController。做更多这样的事情（根据你的 ViewController 在你的层次结构中的位置进行更改。

```
self.tabBarController.selectedIndex = 0;
YourOtherViewController *yourOtherViewController = (YourOtherViewController*)[self.tabBarController objectAtIndex:0]; // This index needs to be changed for your specific controller you wish to screenshot
UIGraphicsBeginImageContext(yourOtherViewController.view.frame.size);
[yourOtherViewController.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage * image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
NSData * imageData = UIImageJPEGRepresentation(image, 1.0); 
```

# html - 我们可以通过 JSONX 发送 html 代码以获取 JSON 格式吗

> ID：13162725
> 
> 赞同：2
> 
> 时间：2012-10-31T16:39:49.930
> 
> 标签：html, json, ibm-datapower, jsonx

您好，我正在使用 IBM Datapower。我有一个问题

我们可以通过 jsonx.. 将 html 内容发送到 json 吗？

```
<json:object>
<json:string name="htmlcontent"> <html><body>hiii</body></html></json:string>
</json:object> 
```

我像上面一样尝试过，我得到的响应只是一个字符串

```
hii 
```

我需要

```
<html><body>hiii</body></html> 
```

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:50:17.117

如果您在浏览器中查看，您只会看到 hii

在浏览器上查看源代码。

或通过 SOAP UI 发送请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-17T10:03:11.377

由于元素的内容实际上是 XML（DataPower 将看到它），因此 json:object/json:string/html/body 的值是“hiii”。如果你在上面做一个 value-of，你只会得到“hiii”。

您将需要获取像 json:object/json:string/ 这样的元素（副本），然后序列化您获得的节点以获取包含 html 标签的实际字符串。

另请注意，如果您不发送“XML 有效”HTML，它将失败！

在转换为 JsonX 之前，您应该考虑转义 html 代码。

# oracle - 在 PL/SQL 中将 var 声明为日期

> ID：13162728
> 
> 赞同：0
> 
> 时间：2012-10-31T16:39:57.443
> 
> 标签：oracle, plsql, oracle11g

我很好奇为什么 PL/SQL 不允许我将 var 声明为 datetime 以及我的替代方案是什么。我正在使用 Oracle 11。

```
VARIABLE some_date date; 
```

我收到以下错误消息，指示 var 的合法类型，不包括日期：

```
 Usage: VAR[IABLE] [ <variable> [ NUMBER | CHAR | CHAR
(n [CHAR|BYTE]) |
VARCHAR2 (n [CHAR|BYTE]) | NCHAR | NCHAR (n) |
NVARCHAR2 (n) | CLOB | NCLOB | REFCURSOR |
BINARY_FLOAT | BINARY_DOUBLE ] ] 
```

我可能可以通过将日期模拟为字符串或长表示来解决这个问题，但我真的很好奇为什么会这样。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:46:22.403

我猜你的意思是 SQL*Plus 而不是 PL/SQL，对吧？您可以使用 a并在您的 PL/SQL 代码中使用和`VARCHAR2`在两者之间进行转换。`to_char()``to_date()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:52:20.057

不要使用 variable 关键字声明变量。您只需要声明块中的变量名和类型，PL/SQL 将负责其余的工作。

```
$DECLARE
$  some_date DATE;
$BEGIN
$  -- other code
$END; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T18:07:16.503

在 PL/SQL 中，关键字`VARIABLE`与您的上下文无关。它用于创建绑定变量 绑定变量是在环境中创建的，而不是在 PL/SQL 块的声明部分中创建的。PL/SQL 块中声明的变量仅在您执行该块时可用。块执行后，变量使用的内存被释放。但是，即使在执行块之后，也可以访问绑定变量。因此，在创建时，绑定变量可以被多个子程序使用和操作。它们可以像任何其他变量一样用于 SQL 语句和 PL/SQL 块中。这些变量可以作为运行时值传入或传出 PL/SQL 子程序。

例如对于变量：

```
VARIABLE b_result DATW
BEGIN
  SELECT JOIN_DATE INTO :b_result
  FROM employees WHERE employee_id = 144;
END;
/
PRINT b_result 
```

我为你感到，打击将达到目的

```
DECLARE
  some_date DATE;
BEGIN
  -- other code
END; 
```

# url - 如何使用 Nitrogen 获取页面的完整 URL？

> ID：13162729
> 
> 赞同：1
> 
> 时间：2012-10-31T16:39:57.280
> 
> 标签：url, erlang, nitrogen

我想让我网站的某些页面只能通过 https 访问。我认为可以在 page.erl 中识别协议，然后重定向到正确的 URL。就像是

```
case Protocol of
    http -> wf:redirect('https://' ++ UrlWithNoProtocol);
    _ -> ok
end 
```

当然，我可以通过“：//”简单地将 URL 拆分为 Protocol 和 UrlWithNoProtocol。但问题是，我不知道：如何获取页面的完整 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:39:56.780

我向[simple_bridge](https://github.com/nitrogen/simple_bridge)提出了拉取请求，因为 peer_port 在 Cowboy 上是错误的 :)

```
peer_port(ReqKey) ->
    ?GET,
    {Port, NewReq} = cowboy_http_req:port(Req),
    NewRequestCache = _RequestCache#request_cache{request=NewReq},
    ?PUT,
    Port. 
```

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T21:32:02.847

我[在 Nitrogen Mailing list 上的回复](https://groups.google.com/d/topic/nitrogenweb/6CuRvHxVf34/discussion)，由于漂亮的降价格式，在此重复：

我会选择两种方法中的一种，它们都意味着将 Nitrogen 放在像 Nginx 这样的反向代理之后。

第一种方法是在 nginx 中设置简单的重写规则，强制某些页面使用 SSL。例如，在 nginx 中，如果您想将所有以 /admin 开头的请求重定向到通过 HTTPS，您可以在 HTTP 部分中执行此操作。

```
location ^~ /admin {
     rewrite ^ https://$http_host$request_uri? permanent;
} 
```

您可以在以下位置阅读有关配置 nginx 以通过 SSL 运行的信息：[https ://github.com/nitrogen/nitrogen_core/blob/master/doc/org-mode/config.org](https://github.com/nitrogen/nitrogen_core/blob/master/doc/org-mode/config.org)

下一个替代方案是（再次）将氮气放在反向代理后面，但这一次，检查是否存在指示请求是安全的标头（该标头将由 nginx 插入）。

例如，您可以在 nginx 配置的“ssl”部分中添加一条规则，该规则设置如下标头：

```
proxy_set_header X-Forwarded-SSL on; 
```

然后您可以使用 wf:header(x_forwarded_ssl) 检查标头是否存在。

如果您没有使用反向代理，那么最简单的检查可能是通过获取请求来检查站点正在使用哪个端口，然后是套接字端口

```
Req = wf_context:request_bridge(),
Port = Req:peer_port(). 
```

然后，检查端口是否为 80，则为 http，如果为 443，则为 https。

就个人而言，我会选择 nginx 解决方案，因为在任何程度的扩展下，通过添加额外的服务器并让 nginx 为您进行负载平衡和 ssl 处理来简单地扩展会很好。

# locking - 如何在 UnrealScript 中将玩家锁定在 X 轴上？

> ID：13162732
> 
> 赞同：-1
> 
> 时间：2012-10-31T16:40:17.350
> 
> 标签：locking, unrealscript

下午好。我在使用 UnrealScript 编程时遇到了一些问题，我想知道你们中是否有人能够解决我的问题。我可以使用阻塞体积将角色锁定在轴中，但如果必须的话，我想在脚本之前尝试。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T00:38:52.440

一种简单的方法可能是将玩家的位置沿轴设置回每个刻度的固定值。由于您想将他锁定在 X 轴上，因此您需要确保他的棋子不会沿 Y 轴移动。

如果您使用的是自定义 PlayerController：

```
class MyPlayerController extends PlayerController;

simulated event Tick (float deltaTime)
{
    local vector snappedLocation;

    Super.Tick(deltaTime);

    if (Pawn != none)
    {
        snappedLocation = Pawn.Location;
        snappedLocation.Y = 0.0;
        Pawn.SetLocation(snappedLocation);
    }
} 
```

或者，如果您想要的不仅仅是将玩家的 pawn 锁定到 X 轴（假设您也希望将敌人锁定到 X 轴），您可以在 Pawn 的一个或多个子类中实现它：

```
class MyPawn extends Pawn;

simulated event Tick (float deltaTime)
{
    local vector snappedLocation;

    Super.Tick(deltaTime);

    snappedLocation = Location;
    snappedLocation.Y = 0.0;
    SetLocation(snappedLocation);
} 
```

Depending on what you're trying to do however, you may run into problems with this approach since the player can still turn and his `Velocity` and `Acceleration` vectors may not point strictly along the X axis. You could try disabling turning by extending the `PlayerInput` class and always setting `aTurn` to zero in the `PlayerInput` event. A more robust solution may be to do a little more math yourself in PlayerController and make sure that the pawn's velocity and acceleration only ever point along the X axis; check out the `PlayerMove` function in the `PlayerWalking` state in PlayerController for an example of how the PlayerController can be used to control a Pawn's motion by changing its acceleration.

# c - C中数组的理想数据类型

> ID：13162733
> 
> 赞同：4
> 
> 时间：2012-10-31T16:40:21.910
> 
> 标签：c, arrays, static

我想存储键和可变大小数组之间的静态关联。

```
"foo" => ["bar", "awe"]  
"foo2" => ["bar2", "awe2", "gruh"] 
```

该数组在程序执行期间永远不会改变，它只是一种将字符串变量数组与字符串键静态关联的方法。

子阵列的数量非常少（< 100）。

我怎样才能在纯**C**中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:01:45.633

好的，这是有人给我的解决方案：

```
struct
{
  const char *key;
  const char **values;
} key_to_values[] =
{
  { .key = "foo", .values = (const char *[]) { "val1", "val2", NULL } },
  { .key = "bar", .values = (const char *[]) { "val3", "val4", "val5", NULL } },
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:48:14.750

您可以使用哈希表来做到这一点。

例如：

```
#include <stdint.h>
#include <string.h>

uintmax_t hash(const char *s) { /* ... */ }

static const char t[N][M];

void init_string(void)
{
    strcpy(t[hash("foo")][0], "bar");
    strcpy(t[hash("foo")][1], "awe");
    /* etc */
}

char *get_string(const char *s)
{
    return t[hash(s)];   
} 
```

去做：

*   设置`N`和`M`;
*   定义`hash`函数；
*   处理碰撞；
*   处理其他错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T16:46:01.673

如果我正确理解您的意图，您想将数组与字符串键相关联，那么我认为使用核心 c 中的任何内置构造都不可能做到这一点，即 c 数组仅由整数索引。

总是可以写一个哈希表，但字符串到索引的映射必须由程序员自己完成。

在 C++ 中，您可以使用映射来实现此目的，但映射是 STL 的一部分。

# arrays - Matlab将二维数组中的数据分组为三元组

> ID：13162734
> 
> 赞同：2
> 
> 时间：2012-10-31T16:40:26.493
> 
> 标签：arrays, matlab, data-mapping

有没有一种聪明的方法从成对的二维数组中获取值以及行中的最后一个数字？

我的数据（保存在文件中）类似于以下内容：

```
 0  89  27 100  42  75 8  
  0 100   7  92   5  68 6  
  0  67  49  83 100 100 2  
 35  76  57 100 100  92 5  
 18  68  50  54 100  19 3 
```

将此数据加载到 Matlab 后，我需要通过始终采用 Pairs 将数据分组到元组中。在此示例中，它将是：

[0,89],[27,100],[42,75],[0,100],...[100,19]

在配对数据（或同时）之后，我需要将行中的最后一个数字添加到对中。前面提到的数据将进行如下更改：

[0,89,8],[27,100,8],[42,75,8],[0,100,6],...[100,19,3]

如何解决这个问题？我个人不喜欢 Loops 的广泛使用，并认为有更好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T19:56:20.517

我认为没有人想出这个真是太神奇了：

```
M = [   
  0  89  27 100  42  75 8  
  0 100   7  92   5  68 6  
  0  67  49  83 100 100 2  
 35  76  57 100 100  92 5  
 18  68  50  54 100  19 3  ];

C = arrayfun(...
    @(ii) [M(:,ii:ii+1) M(:,end)], ...
    1:2:size(M,2)-1, 'UniformOuput', false); 
```

你最终会得到这个单元格数组：

```
>> C{1}

ans =

     0    89     8
     0   100     6
     0    67     2
    35    76     5
    18    68     3

>> C{2}

ans =

    27   100     8
     7    92     6
    49    83     2
    57   100     5
    50    54     3

>> C{3}

ans =

    42    75     8
     5    68     6
   100   100     2
   100    92     5
   100    19     3 
```

现在您可以像这样引用单个元组：

```
C{1}(2,:)   %  [  0   100   6]
C{3}(4,:)   %  [100    92   5] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T16:50:15.963

编辑：这应该可以解决问题。

```
M=[0  89  27 100  42  75 8  
  0 100   7  92   5  68 6  
  0  67  49  83 100 100 2  
 35  76  57 100 100  92 5  
 18  68  50  54 100  19 3]

X = M(:,1:end-1)
Y = M(:,end)
idxOdd = mod(1:size(X,2),2)==1
Xeven=X(:,~idxOdd)
Xodd=X(:,idxOdd)

Yrep = repmat(Y,1,sum(idxOdd))

[Xodd(:) Xeven(:) Yrep(:)] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T17:28:16.567

为了对矩阵中的数据进行分组`A`，您可以使用`cell2mat`并输出一个单元格元组数组`C`，然后在该数组的相应行中附加最后一列元素：

```
% separate the data pairs
C = mat2cell(A(:,1:end-1), ones(1,size(A,1)), 2*ones(1,3));

% single for-loop to append line_lat_element in cells of same row
for i = 1:size(A,1)
    D(i,:) = cellfun(@(x) [x A(i,end)], {C{i,:}}, 'UniformOutput', false);
end 
```

作为输出，`D{i,j}`元胞数组的每个条目都将包含三元组`[data1 data2 last_element_of_line]`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T17:38:06.463

在这种情况下，我想为卑微的`for`循环辩护：

```
M = [  0  89  27 100  42  75 8  ;
         0 100   7  92   5  68 6  ;
         0  67  49  83 100 100 2  ;
        35  76  57 100 100  92 5  ;
        18  68  50  54 100  19 3 ];

out = zeros((size(M,2)-1)/2*size(M,1),3);
ind = 1;
for row = 1:size(M,1)
    for col = 1:2:(size(M,2)-1)
        out(ind,:) = [M(row,col:col+1) M(row,end)];
        ind = ind+1;
    end
end
out 
```

我声称这比非循环版本更容易编写、理解和维护（无论是对于刚接触代码的程序员，还是同一个程序员在数周、数月或数年后返回代码）。唯一有点棘手的部分是计算输出矩阵的正确大小`out`。如果性能成为问题，那么当然，请查看非循环版本。但是最近版本的 MATLAB 运行 for 循环的速度比过去快得多，那么为什么要过早优化呢？

您可以通过基于`row`and的巧妙计算来消除保持运行索引的需要`col`，但为什么要麻烦呢？上面的代码很简单，程序员很容易理解

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-31T17:16:37.360

这可以使用逻辑索引来完成。以丹尼斯的回答为基础：

```
z = M(:,end); %# extract the last column
M = M(:,1:end-1); %# chop off the last column from the rest of your data
xidx = logical(mod(1:size(M,2),2)); %# get a logical index of the odd numbered rows
x = M(:,xidx); %# grab the x values
y = M(:,~xidx); %# grab the y values
z = repmat(z,1,numel(x)/numel(z)); % replicate z to match numel of x and y
x = reshape(x',numel(x),1);    %# reshape the arrays to form the right dimensions
y = reshape(y',numel(y),1);
z = reshape(z',numel(z),1);
output = [x,y,z]; %# format output 
```

# c++ - 使用 boost::unordered_map 作为查找表似乎非常慢

> ID：13162735
> 
> 赞同：0
> 
> 时间：2012-10-31T16:40:27.700
> 
> 标签：c++, boost, unordered-map, lookup-tables

我定义了以下查找表：

```
boost::unordered_map<std::string, STFRandomTreeFunctor*> functor_look_up_table; 
```

这个想法是用它来调用函子，但这似乎运行得很慢。一开始我以为是functor调用的函数可能运行时间长，我把代码替换为如下（即去掉了对 的调用`functor()`）：

```
my_function(){
    while(...){
        STFRandomFunctor* f = functor_look_up_table.at(some_string);
        ...<do some other stuff>
    }
} 
```

而且它仍然运行缓慢，删除该行`STFRandomFunctor* f = functor_look_up_table.at(some_string);`极大地加快了代码速度。我在这里的查找表中使用了错误的数据结构吗？如果是这样，什么是可取的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T17:12:14.990

> @aleguna 字符串是函数的 id，一些示例是“single_channel_subtract_abs”、“multi_channel_random_add”、“multi_channel_random_subtract_abs”。总共有5把钥匙

那么你不应该使用字符串，也不应该使用`unordered_map`：

```
// Function.hpp

enum FunctorName {
    single_channel_subtract_abs,
    multi_channel_random_add,
    multi_channel_random_substract_abs,
    ...
};

STFRandomTreeFunctor const& get(FunctorName name);

// Function.cpp
static STFRandomTreeFunctor const Functors[] = {
    ...
};

STFRandomTreeFunctor const& get(FunctorName name) {
    size_t const index = name;

    assert(index < sizeof(Functors) && "Need to update Functors");

    return Functors[index];
} // get 
```

如果是一个函数类型而不是一个完整的函子，你可以完全放弃`const&`。`get``STFRandomTreeFunctor``typedef`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:53:25.627

`unordered_map`查找速度非常快，但是如果你有一个好的散列函数，每次你看你的地图时，你的键的散列都会被计算出来，所以如果计算散列需要很长时间，那么你的性能就会很差，另一方面如果`hash`函数生成相似`hash`的值可能所有（或很多）项目都落在一个桶中，然后你的搜索变成线性的，对于第一部分，你的字符串必须非常大到`boost`需要很长时间的默认散列，但对于第二部分，请尝试更改存储桶大小并再次检查性能。

# ios - 奇怪的 NSObject 到 cocos2d 随机初始化

> ID：13162736
> 
> 赞同：0
> 
> 时间：2012-10-31T16:40:36.740
> 
> 标签：ios, cocos2d-iphone, nsarray, nsdictionary, nsobject

我有一个奇怪的问题。我正在创建一个出现日历作为圣诞节更新的一部分，并试图防止两次解锁相同的奖品（奖品在应用程序的其他地方使用）。

奖品列表存储在 plist 中，因为它似乎是一种快速输入/读取数据的方法。

```
-(Prize*)getPrizeForDay:(NSInteger)integer
{
    NSString* plistPath = [[NSBundle mainBundle] pathForResource:@"XmasPresents" ofType:@"plist"];
    NSArray* contentArray = (NSArray*)[NSArray arrayWithContentsOfFile:plistPath];
    NSDictionary* dictionary = (NSDictionary*)[contentArray objectAtIndex:integer-1];

Prize* prize = (Prize*)[Prize prizeWithType:[[dictionary objectForKey:@"ContentId"]intValue] andName:[dictionary objectForKey:@"Name"] andContent:[dictionary objectForKey:@"Content"] andAnswer:[dictionary objectForKey:@"Answer"]];

if(![self.calendarPrizes containsObject:prize])
[self.calendarPrizes addObject:prize];
else
    prize.unlocked = YES;

return prize; 
```

}

如果 self.calendarPrizes 不存在并在退出时存储在 NSUserDefaults 中，则会在 didFinishLaunching 上的应用程序委托中初始化 self.calendarPrizes。此函数在单例类中。

再次运行函数时出现奇怪的 NSArray 不再是 NSArray， NSDictionary 不再是字典， Prize 不再是奖品！！！它们都被初始化为随机的 Cocos2d 对象。因此，可以多次添加奖品。

基本上帮助！

更新

此字符仅出现在 iOS6 中，今天早上在 iOS 5 测试设备上进行了测试，它按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:23:07.103

所以我发现 [NSArray containsObject:] 不适用于自定义对象。您要么必须覆盖 NSObject 上的 isEqual 方法，要么使用谓词（我选择了后者）。

```
 NSPredicate* predicate = [NSPredicate predicateWithFormat:@"name == %@",prize.name];
NSArray* predicateArray = [self.calendarPrizes filteredArrayUsingPredicate:predicate];

if(predicateArray.count > 0)
{
    prize.unlocked = YES;
}
else
{
    [self.calendarPrizes addObject:prize];
}

return prize; 
```

奇怪的行为仍然存在，但它不再是一个问题，所以我现在继续前进，但很高兴知道为什么这些对象显示为错误的类。

# c# - 关于继承和循环依赖的问题

> ID：13162737
> 
> 赞同：0
> 
> 时间：2012-10-31T16:40:44.650
> 
> 标签：c#, inheritance, dll

昨天在工作中遇到了一个非常有趣的问题。

我有 2 个不同的类，名为 Foo 和 Bar。每个人都坐在自己的 C# 库项目中（单独的 dll）。

Bar 包含一个虚方法：

```
public class Bar
{
     public virtual void DoSomething();
} 
```

Foo 在其构造函数中使用 Bar 的实例来设置内部属性：

```
public Foo (Bar myBar)
{
      m_Bar = myBar;
} 
```

显然，Foo 引用了 Bar 的项目。

现在，我有 5 个其他类，每个类也位于其自己的项目/dll 中。我们将它们称为 A、B、C、D 和 E。AE 都是 Bar 类的子类，并且它们中的每一个都包含自己的 DoSomething() 重写实现。因为它们是 Bar 的子类，所以它们中的任何一个都可以作为 Foo 构造函数的参数。

AE 每个都维护 Foo 实例的内部集合。例如，我会在 A 类内部做这样的事情：

```
myFooCollection.Add(new Foo(this)); 
```

由于这个原因，AE 类都需要引用 Foo 的项目/dll。

现在，切换回 Foo 让我们说在构造函数中设置 Bar 属性后，我需要调用该 Bar 的 DoSomething() 方法：

```
public class Foo (Bar myBar)
{
     m_Bar = myBar;
     m_Bar.DoSomething();
} 
```

请记住，例如，A 类被用作构造函数的 Bar 参数。我对 DoSomething() 的调用需要执行 A 对该方法的实现。但是，由于构造函数参数属于父类 Bar 并且 Foo 不知道类 AE（我不能在不引起循环依赖的情况下给它一个引用），它将调用父类 Bar 中的虚拟方法。自然的解决方案是在调用之前向下转换到子类：

```
(A)m_Bar.DoSomething(); 
```

但这也是不可能的，因为 Foo 再一次不知道这组子类。所以这是我的困境。整个项目结构不能改变，因为显然系统比我在这里介绍的要大得多，也复杂得多。但是我的要求还是一样的。Foo 需要能够访问 DoSomething() 的子实现才能正常运行。关于如何解决这个问题的任何想法？如果需要任何澄清以更好地理解问题，请告诉我，我将尝试进一步详细说明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:00:33.300

不允许有项目的静态循环引用；但是，您可以对实例进行动态循环引用。如果你调用`m_Bar.DoSomething();`然后，由于多态性，正确的实现将被自动调用。If `m_Bar`is a `Bar`then`Bar`的实现将被调用。If `m_Bar`is a `A`then`A`的实现将被调用。既不需要`Bar`也不`Foo`需要`A`通过`E`.

* * *

更新：（见下面的评论）

```
public class A : Bar
{
     public override void DoSomething()
     {
         Console.WriteLine("I am an 'A'");
     }
} 
```

# c# - 如何从 IEnumerable 转换为 IEnumerable ?

> ID：13162741
> 
> 赞同：2
> 
> 时间：2012-10-31T16:40:57.897
> 
> 标签：c#, active-directory, parallel-processing, task-parallel-library

假设我在设计时知道类型，有没有办法`IEnumerable<T>`从`IEnumerable`没有[反射的情况下获得？](https://stackoverflow.com/questions/812673/convert-cast-ienumerable-to-ienumerablet)

我有这个

```
foreach(DirectoryEntry child in de.Children)
{
   // long running code on each child object
} 
```

我正在尝试启用并行化，就像这样

```
Parallel.ForEach(de.Children, 
    (DirectoryEntry child) => { // long running code on each child }); 
```

但这不起作用，因为 de.Children 是 type [`DirectoryEntries`](http://msdn.microsoft.com/en-us/library/system.directoryservices.directoryentries.aspx)。它实现`IEnumerable`但不是`IEnumerable<DirectoryEntry>`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T16:40:57.897

实现这一点的方法是使用[`.Cast<T>()`扩展方法](http://msdn.microsoft.com/en-us/library/bb341406.aspx)。

```
Parallel.ForEach(de.Children.Cast<DirectoryEntry>(), 
    (DirectoryEntry child) => { // long running code on each child }); 
```

实现此目的的另一种方法是使用[`.OfType<T>()`扩展方法](http://msdn.microsoft.com/en-us/library/bb360913.aspx)。

```
Parallel.ForEach(de.Children.OfType<DirectoryEntry>(), 
    (DirectoryEntry child) => { // long running code on each child }); 
```

`.Cast<T>()`和之间有细微的差别`.OfType<T>()`

> OfType(IEnumerable) 方法仅返回源中可以转换为类型 TResult 的那些元素。如果元素无法转换为 TResult 类型，则要改为接收异常，请使用 Cast(IEnumerable)。

——MSDN

[MSDN 论坛上的](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/05aa30b9-f0ef-4080-b76a-1a127afc0a9d/)这个链接让我朝着正确的方向前进。

# ruby-on-rails - 尝试销毁子记录时堆栈级别太深

> ID：13162744
> 
> 赞同：1
> 
> 时间：2012-10-31T16:41:16.697
> 
> 标签：ruby-on-rails, carrierwave, destroy

我正在尝试销毁属于父记录的记录。但是 Rails 不会因为`stack level too deep`错误而让我这样做。

我的类（简化）是这样构建的：

```
class Album < ActiveRecord::Base
  has_many :photos, dependent: :destroy
  accepts_nested_attributes_for :photos, reject_if: lambda { |p| p[:image].blank? }

  ...
end

class Photo < ActiveRecord::Base
  belongs_to :album

  mount_uploader :image, PhotoUploader
end 
```

当我尝试以下操作时，出现异常：

```
Photo.destroy(12) # where 12 is the ID of the photo I want to destroy
# note that Photo.delete(12) works fine, but doesn't remove the image from the file system 
```

我不明白为什么销毁照片会触发此错误。也许它`carrierwave`与它的`mount_uploader`？

**编辑 1：**这肯定与`carrierwave`. 在我的上传器中，我有以下代码被多次调用（直到堆栈太深）：

```
def unprocessed_image_filename
  match_data = /^original_(.+)_\d{14}\.\D{3,4}$/.match(File.basename(model.image.to_s))

  match_data ? match_data[1] : "photo"
end 
```

这用于确定各种版本的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:09:02.933

改变我`unprocessed_image_filename`的使用：`model.read_attribute(:image)`而不是`model.image.to_s`似乎已经成功了。

现在我有不同的问题，但至少我可以随心所欲地销毁照片。

# excel - VBScript 让幻象进程运行；如何摆脱它们？

> ID：13162748
> 
> 赞同：1
> 
> 时间：2012-10-31T16:41:27.850
> 
> 标签：excel, vbscript

我正在使用 vbscript 进行一些自动化操作，每次运行脚本时，它都会使进程“EXCEL.EXE”运行。我该如何防止呢？

代码：

```
Set oFs = CreateObject("Scripting.FileSystemObject")

set objExcel = createObject("Excel.Application")
set objWorkbook = objExcel.Workbooks.open("C:\test\test.xlsx")

for each sheet in objWorkbook.worksheets
wscript.echo(sheet.name)
set objSheet = sheet

next 

set objSheet = Nothing
set objworkbook = Nothing
set objExcel = Nothing
Set oFs = Nothing 
```

如何防止 EXCEL.exe 在我的脚本退出后继续运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T16:46:44.023

也可以使用它来关闭 Excel。只需将 Next 之后的代码替换为以下内容。

```
set objSheet = Nothing
'Tells workbook to close without saving changes.
objWorkbook.Close false
set objworkbook = Nothing
'Tells Excel Application to quit.
objExcel.Quit
set objExcel = Nothing
Set oFs = Nothing 
```

# ios - 在导航控制器中对不同类型的 uiviewcontroller 进行 xcode

> ID：13162750
> 
> 赞同：0
> 
> 时间：2012-10-31T16:41:32.233
> 
> 标签：ios, xcode, uinavigationcontroller

我对ios编程很陌生。我正在使用主从应用程序模板，我想对其进行一些更改。首先，我想做的是更改 iphone 版本示例代码中的内容的详细视图 => 在第一个视图中有一个 TableViewController，我选择一行并显示带有详细信息的 ViewController。所以我向由模板创建的 ViewController（notesList）添加了一个表，我添加了新的 ViewController（notePreview）和类，在 notesList 的函数 didSelectRowAtIndexPath 中在它们之间添加了一个序列推送，我正在为 notePreview 创建一个新的类实例我把它推到self.navigationController。不幸的是，当我在模拟器上运行它时，当我从 notesList 中选择一行时，会显示新视图，但这只是黑屏，绝对不是我的 notePreview。对我来说奇怪的是，如果我选择 TableViewController 而不是 ViewController，notePreview 一切正常，就会显示正确的视图。知道我做错了什么吗？从 UITableView 切换到 UIView 是不是不能在同一个导航控制器中切换？

一些图片来说明我的问题

故事板-> [http://imageshack.us/scaled/landing/692/screenshot20121102at258.png](http://imageshack.us/scaled/landing/692/screenshot20121102at258.png)

notePreview -> [http://img31.imageshack.us/img31/411/screenshot20121102at300.png](http://img31.imageshack.us/img31/411/screenshot20121102at300.png)

==================================================== ================================

使用 UIStoryBoard::instantiateViewControllerWithIdentified 解决了问题，但我仍然认为应该有更好的方法来做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:46:18.487

确保 Storyboard 场景中该 ViewController 的父类设置为您已实现的 VC 类。

![自定义类图像](../Images/3c23c881663c138d10415c50ed46facb.png)

# scala - 特征迭代器中的方法缺少参数

> ID：13162752
> 
> 赞同：2
> 
> 时间：2012-10-31T16:41:41.267
> 
> 标签：scala

我是 Scala 的新手，正在阅读《[Beginning Scala](https://rads.stackoverflow.com/amzn/click/com/1430219890)》一书，但我似乎无法找到一个有效的示例。我已经检查了很多次，但似乎找不到我的代码偏离的地方。我有以下 scala 文件：

```
import scala.io._

def toInt(in: String): Option[Int] =
  try {
    Some(Integer.parseInt(in.trim))
  } catch {
    case e: NumberFormatException => None
  }

def sum(in: Seq[String]) = {
  val ints = in.flatMap(s => toInt(s))
  ints.foldLeft(0)((a, b) => a + b)
}

println("Enter some numbers and press ctrl-D)")

val input = Source.fromInputStream(System.in)
val lines = input.getLines.collect

println("Sum "+sum(lines)) 
```

每次我尝试使用 command 运行时`Scala sum.scala`，都会收到以下错误：

```
sum.scala:18: error missing arguments for method collect in trait Iterator:
follow this method with '_' if you want to treat it as a partially applied function
val lines = input.getLines.collect
                           ^
one error found 
```

谁能阐明我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:50:43.423

你到底想收集什么？要获得每行数字的总和，无需调用 collect：

```
val lines = input.getLines.toList
println("Sum "+sum(lines)) 
```

或通过标准 scala 函数：

```
val numbers = input.getLines.map(line => line.trim.toInt)
println("Sum "+numbers.sum) 
```

# php - PHPExcel 使用 rangeToArray() 将日期时间读取为字符串

> ID：13162758
> 
> 赞同：4
> 
> 时间：2012-10-31T16:41:51.000
> 
> 标签：php, date, format, phpexcel

我正在使用 PHPExcel 1.7.7 来读取 excel 文件。我遇到了类似这个[线程的问题](https://stackoverflow.com/questions/8583915/phpexcel-read-all-values-date-time-numbers-as-strings)

要获取所有单元格数据，我使用 rangeToArray() 如下所示：

`$dataCr = $objWorksheet->rangeToArray('A'.$row.':'.'G'.$row, null, TRUE, TRUE, false);`

但是，它没有以任何预期的格式返回数据，例如“2011-01-14 16:15:00”或“2011-01-14”或“2011-02-25 16:15”。相反，它返回了类似“40599.677083333”或“40599”的内容。

我确信我在使用 rangeToArray() 时将以下参数都设置为 true：

`@param boolean $calculateFormulas Should formulas be calculated? @param boolean $formatData Should formatting be applied to cell values?`

我还尝试将 PHPExcel 更新到 1.7.8。也没有用。有办法解决吗？预期日期可以是上面列出的不同格式。

非常感谢

# php - PHP：从 simplexmloelement 对象回显一个值

> ID：13162759
> 
> 赞同：0
> 
> 时间：2012-10-31T16:41:52.317
> 
> 标签：php, arrays, simplexml

这是我的代码：

```
$xml2  = (array) simplexml_load_string($xml_file); 
```

使用 print_r 这是我的数组：

```
 Array
(
  [program] => Array
        (
        [0] => SimpleXMLElement Object
        (
            [date] => asgasg sgasgasg
            [start_time] => asdg asg
            [leadtext] => as asdgsagsdgasgasgd
            [name] => as gsadgasg
            [bline] => sag asdg
            [synopsis] => asg asga sdg
            [url] => asg sdgasgasg
        )

        [1] => SimpleXMLElement Object
        (
            [date] => sgasgasg1
            [start_time] => asg1
            [leadtext] => as1
            [name] => gsadgasg1
            [bline] => asdg1
            [synopsis] => sdg1
            [url] =>sdgasgasg1
        )

        )
) 
```

我怎样才能回显从第二个 SimpleXMLElement 获取 [date] 的内容（在上面的示例中是**sgasgasg1 ）**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:45:29.157

你可以这样做：

```
echo $xml2['program'][1]->date; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T16:44:05.620

利用

```
foreach($xml2['program'] as $key=>$value) {

   echo $value->date;

} 
```

正如你在评论中所说的那样

```
echo $xml2['program'][1]->date; 
```

# java - 通用方法在分配给变量时返回正确的对象，但在与方法一起使用时不返回

> ID：13162766
> 
> 赞同：2
> 
> 时间：2012-10-31T16:42:18.893
> 
> 标签：java, generics

我正在使用一些带有泛型的代码，我不确定为什么会抛出编译错误。

```
 public static void main(String[] args) {

    System.out.print("s");
    setInteger(prepareNumber("1")); // Error here! solved by casting: setInteger((Integer)prepareNumber("1"))
    Integer c = prepareInteger("1");
    System.out.print(c);

  }

  public static Integer prepareInteger(Object number) {
    return prepareNumber(number).intValue();
  }

  private static <T extends Number> T prepareNumber(Object number) {

    T returnValue = null;

    // handle a blank number
    if (number == null || !NumberUtils.isNumber(number.toString())) {
      returnValue = null;
    } else {
      if (number.toString().contains(".")) {
        returnValue = (T) Double.valueOf(number.toString());
      } else {
        returnValue = (T) Integer.valueOf(number.toString());
      }
    }

    return returnValue;
  }

  private static void setInteger(Integer a){    
  } 
```

只需进行强制转换即可轻松解决此问题，但这是不希望的，因为泛型应该检测方法需要 Integer 并且应该提供返回值而不是超类型。

PS：不要介意解析代码，只是测试的东西。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:55:01.733

在这种情况下，编译器无法推断`prepareNumber("1")`应该返回什么类型。您可以通过将结果放在临时变量中来正确推断：

```
Integer value = prepareNumber("1");        
setInteger(value); 
```

或者你如果`parseNumber`是类中的静态方法，`YourClass`你可以显式地告诉编译器你期望什么类型，如下所示：

```
setInteger(YourClass.<Integer>prepareNumber("1")); 
```

* * *

或者，如果您可以更改方法签名以帮助编译器：

```
setInteger(prepareNumber("1", Integer.class));

private static <T extends Number> T prepareNumber(Object number, Class<T> classType) {
   ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:50:12.810

prepareNumber 方法返回 Number 的类型，它是 Integer 的超类，但是您的 setInteger 正在接受 Integer 并且在这种情况下没有隐式转换。

# sql - django 在运行测试时如何查看 sql 查询？

> ID：13162771
> 
> 赞同：19
> 
> 时间：2012-10-31T16:42:27.600
> 
> 标签：sql, django, oracle, unit-testing, django-testing

我的 django 应用程序单元测试之一失败

```
DatabaseError: ORA-00942: table or view does not exist 
```

我想查看导致此错误的实际 SQL 查询。你知道如何实现吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-08-28T09:39:13.047

如果要打印/记录测试中的*所有*SQL 查询，请尝试`TestCase`像这样子类化：

```
from django.conf import settings
from django.template import Template, Context
import sys
from django.db import connection
from django.test import TestCase

class LoggingTestCase(TestCase):

  @staticmethod
  def setUpClass():
    # The test runner sets DEBUG to False. Set to True to enable SQL logging.
    settings.DEBUG = True
    super(LoggingTestCase, LoggingTestCase).setUpClass()

  @staticmethod
  def tearDownClass():
    super(LoggingTestCase, LoggingTestCase).tearDownClass()

    time = sum([float(q['time']) for q in connection.queries])
    t = Template("{{count}} quer{{count|pluralize:\"y,ies\"}} in {{time}} seconds:\n\n{% for sql in sqllog %}[{{forloop.counter}}] {{sql.time}}s: {{sql.sql|safe}}{% if not forloop.last %}\n\n{% endif %}{% endfor %}")
    print >> sys.stderr, t.render(Context({'sqllog': connection.queries, 'count': len(connection.queries), 'time': time}))

    # Empty the query list between TestCases.    
    connection.queries = [] 
```

然后在测试中使用`LoggingTestCase`而不是`TestCase`作为基类。`tearDownClass`如果您覆盖它，请记住调用它。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2020-02-19T11:31:04.340

另一种选择是使用`CaptureQueriesContext`（用 测试`pytest`）。

```
from django.db import connection
from django.test.utils import CaptureQueriesContext

def test_foo():
    with CaptureQueriesContext(connection) as ctx:
        # code that runs SQL queries
        print(ctx.captured_queries) 
```

资料来源：

*   [https://blog.ploetzli.ch/2019/showing-sql-queries-with-pytest-and-django/](https://blog.ploetzli.ch/2019/showing-sql-queries-with-pytest-and-django/)
*   [如何强制 django 打印每个执行的 sql 查询](https://stackoverflow.com/questions/33827250/how-to-force-django-to-print-each-executed-sql-query)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-04-19T09:33:54.513

您还可以执行以下操作来获取查询（然后例如在测试中打印或评估它）。

实际上你现在[不应该改变`django.conf.settings`](https://docs.djangoproject.com/en/2.0/topics/testing/tools/#overriding-settings)，所以我用[`override_settings`](https://docs.djangoproject.com/en/2.0/topics/testing/tools/#django.test.override_settings).

```
from django.db import connection, reset_queries
from django.test import override_settings, TransactionTestCase

class TransactionTests(TransactionTestCase):

    @override_settings(DEBUG=True)
    def test_sql(self):
        reset_queries()
        try:
            # Code that uses the ORM goes here
        except Exception as e:
            pass
        self.assertEqual(connection.queries, []) 
```

`TestCase`可能也合适，请参阅此[答案](https://stackoverflow.com/a/44451591/2704544)中的差异。

有关 SQL 输出的详细信息，请参阅[Django 文档](https://docs.djangoproject.com/en/dev/faq/models/#how-can-i-see-the-raw-sql-queries-django-is-running)。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-07-13T17:42:31.417

另一种选择是[`connection.execute_wrapper()`](https://docs.djangoproject.com/en/2.2/topics/db/instrumentation/#connection-execute-wrapper)在您的测试中使用如下：

```
from django.db import connection

def logger(execute, sql, params, many, context):
    print(sql, params)
    return execute(sql, params, many, context)

class GizmoTest(TestCase):

    def test_with_sql_logging(self):
        with connection.execute_wrapper(logger):
            code_that_uses_database() 
```

用 Django 2.2 测试。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-08-30T04:56:41.120

它不是最干净的解决方案，但如果你只是想快速调试而不安装额外的包，你可以在 django/db 中寻找 execute() 方法。

对于**Oracle**，我猜它在：

django/db/backends/oracle/base.py 并寻找：

```
def execute 
```

对于**PostgreSQL**，它位于：

django/db/backends/postgresql_psycopg2/base.py

在 CursorWrapper 中有一个 execute() 方法。

两者都在捕获 IntegrityError 和 DatabaseError，您可以在此处添加打印语句。

对于想要查看所有 sql 查询的 ppl，请将 print 语句放在函数调用之后。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-08-25T02:13:04.537

在这种情况下`pytest`，`pytest-django`只需为它创建一个夹具

```
@pytest.fixture
def debug_queries(db):
    """ Because pytest run tests with DEBUG=False
        the regular query logging will not work, use this fixture instead
    """
    from django.db import connection
    from django.test.utils import CaptureQueriesContext
    with CaptureQueriesContext(connection):
        yield connection 
```

然后在你的测试中

```
@pytest.mark.django_db
def test__queries(debug_queries):
    # run your queries here 
```

当然，您的日志配置应该启用查询日志，如下所示：

```
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'formatters': {
        'standard': {
            'format': '%(asctime)s - %(levelname)s - %(name)s - %(message)s',
        },
    },
    'handlers': {
        'default': {
            'level': 'DEBUG',
            'class': 'logging.StreamHandler',
            'formatter': 'standard',
            'stream': 'ext://sys.stdout',
        },
    },
    'loggers': {
        'django.db.backends': {
            'level': 'DEBUG',
            'handlers': ['default'],
            'propagate': False,
        },
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-26T11:53:38.873

到目前为止我找到的最好的解决方案是 django-debugtoolbar 提供的 debugsqlshell 自定义 django 管理命令。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-22T10:01:21.197

这是对我有用的解决方案（Django 3.1）：

```
from django.test import TestCase

class TestSomething(TestCase):
    @override_settings(DEBUG=True)
    def test_something(self):
        pass

    def tearDown(self):
        from django.db import connection
        for query in connection.queries:
            print(f"✅ {query['sql']}\n") 
```

[资源](https://gist.github.com/graffic/4873112c02914f5f8717296bcbf8d86a)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-08-22T05:53:21.363

您可以在设置中将控制台级别更改为调试。它适用于 Django 1.9。

```
LOGGING = {
...
'handlers': {
    'console': {
        'level': 'DEBUG',
        'class': 'logging.StreamHandler',
        'formatter': 'simple'
        },
    }
...
} 
```

# database - 如何生成这样的关系图？

> ID：13162773
> 
> 赞同：-2
> 
> 时间：2012-10-31T16:42:28.987
> 
> 标签：database, relationship

![在此处输入图像描述](../Images/dcca85de77af0f8d4dcfb597152b2ed8.png)

大家好，我知道这是一个简单的问题。

如何生成这样的数据库关系图？

这将对我的应用程序设计有很大帮助。

具有明确的 1 到 n、n 到 n、1 到 0 或 1 关系。

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:51:01.280

1.  有几种工具可以让您绘制数据库关系图。[以前有人问过这个问题](https://stackoverflow.com/q/30474/422353)，谷歌可以给你更多例子。
2.  那个特定的图像不仅仅是一个图表。这是一张使用 EntityFramework 和 Visual Studio 的对象关系映射的图片（我猜是 2010 年或更新版本）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-31T16:48:40.903

对于您的多对多关系，您使用连接表。

InstructorCourses { InstructorId (FK Instructor:InstructorId), CourseId (FK Course:CourseId) }

# c# - 尝试在线程之间传递事件的问题

> ID：13162782
> 
> 赞同：0
> 
> 时间：2012-10-31T16:42:46.607
> 
> 标签：c#, .net, winforms, multithreading

我需要对多线程编程模型进行一些澄清，因为我很少需要处理它（大部分时间我都在做网络编程）。

## 来路

我有一个我用 C# 编写的程序，基本上它是一个数据监视器，并在数据库上执行每个特定的时间量，比如 1 分钟。

这个应用程序是如何相对简单的，我决定使用一个整体结构，我制作了类范围内的所有 GUI，我制作了一个处理连接和数据检索的对象。

为了处理池时间的要求，我使用了 a `System.Timers.Timer`，它基本上是一个带有触发定时事件的 Thread 包装，在这里我执行了数据池。

当找到新数据时，我需要从定时器触发的函数（根据定义在其他线程中）触发属于 GUI（现在在主线程中运行）的 X 类中的方法。

第一次尝试直接调用定时器触发的方法，导致跨线程错误：因为方法驻留在X类中，没有在定时器线程中构造。

然后我再次尝试使用其他方法。我在类中使用他各自的委托创建了一个事件，该委托读取数据并将 GUI 对象订阅到该事件。

## 问题

现在，当我触发事件时，.net 会产生一个异常，告诉我发送者对象实例为空，完全不知道为什么，但我怀疑这是因为对象本身是使用主线程中的 GUI 对象创建的，当我决定从另一个线程发送对象（它正在生成事件），实例根本不存在，因为没有在那里创建。

这是计时器到期时调用的函数：

```
 private void PoolearMensajes(object Sender, ElapsedEventArgs e)
    {
        try
        {
            pRdr.getPendingMessages(); <--- This function creates the exception
            if (pRdr.MensajesPendientes > 0)
            {
                this.oSysIcon.Text = pRdr.MensajesPendientes.ToString() + " tickets pendientes";
                this.oSysIcon.BalloonTipIcon = ToolTipIcon.Info;
                this.oSysIcon.BalloonTipText = pRdr.MensajesPendientes.ToString() + " tickets pendientes";
                this.oSysIcon.BalloonTipTitle = "Información";
                this.oSysIcon.ShowBalloonTip(3000);
                System.Media.SystemSounds.Exclamation.Play();
            }
        }
        catch (Exception ex)
        {
            this.oSysIcon.BalloonTipTitle = "Error";
            this.oSysIcon.Text = "Ha ocurrido un error.";
            this.oSysIcon.BalloonTipIcon = ToolTipIcon.Error;
            this.oSysIcon.BalloonTipText = ex.Message;
            this.oSysIcon.ShowBalloonTip(3000);
            System.Media.SystemSounds.Exclamation.Play();
        }
    } 
```

这是驻留在主线程中创建的数据检索器对象中的方法：

```
 public delegate void TicketsFoundHandler(object sender, TicketEventArgs ta);
    public event TicketsFoundHandler TicketsFound;

    public void getPendingMessages()
    {
        string sSQL;
        sSQL = " an SQL Query that counts rows;";
        oCmd = new SqlCommand(sSQL, oConn);
        oConn.Open();
        this.i_pendmsg = (int)oCmd.ExecuteScalar();
        if (this.i_pendmsg > 0)
        {
            TicketEventArgs ta = new TicketEventArgs("", this.i_pendmsg);
            TicketsFound(this, ta); <---- ERROR!
        }
        oConn.Close();
    } 
```

错误消息是：`Object reference not set to an instance of an object`。

任何想法，任何改进，或者我没有考虑过的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:45:50.037

> 第一次尝试直接调用定时器触发的方法，导致跨线程错误：因为方法驻留在X类中，没有在定时器线程中构造。

你快到了。您只需要调用[`BeginInvoke()`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.begininvoke.aspx)即可在 GUI 线程上调用您的操作。

您可能还会发现使用 a[`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)更加容易。

编辑：

您在问题中的具体错误是因为没有人订阅您的`TicketsFound`活动。用于`TicketsFound += ...`这样做。此外，在引发事件之前检查 null：

```
if (TicketsFound != null) TicketsFound(...) 
```

# scala - 如何在使用 Play 时避免按键碰撞！缓存对象？

> ID：13162783
> 
> 赞同：2
> 
> 时间：2012-10-31T16:42:46.543
> 
> 标签：scala, playframework-2.0, ehcache

在 Play!中，`play.api.Cache`是一个单例对象，因此可以从所有其他对象全局访问。而且，就其本质而言，缓存是一个可变对象。像这样的全局可变状态通常是非常有问题的。

特别是存在密钥冲突的潜在问题。两个不同的类（否则它们彼此松散耦合）可能会意外地使用相同的键来存储一些值。然后，其中一个更新将被另一个覆盖。

这个问题的一种可能的解决方案是创建一个新类，它甚至可以委托给 global `Cache`，但在键中添加某种“命名空间”。尽管这并不难实现，但如果已经有一些标准的解决方案来解决这个问题会更好（最好在 Play! 本身上实现）。有没有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:20:59.907

最简单的方法是将标识符放入您的密钥。例如，给定一个`User`类，`"user"+user.id`在将其保存到缓存时用作键。这样你就不用担心冲突了。

请注意，我正在考虑单个 Play 应用程序使用的缓存。默认情况下，EhCache 使用 Play 使用的相同 JVM 空间，因此其中不能有 2 个不同`User`的类。如果您正在使用多个应用程序共享缓存的外部缓存，那么您应该为它们的键（`appName.class.classId`或类似的）添加一些命名空间。但这在独立的 Play 应用程序中应该不是问题。

关于讨论如何清空缓存的评论，通常您不必担心。理论上，长期的、陈旧的密钥会因为没有被使用而从缓存中删除。关于如何/何时根据缓存实现（LRU 等）更改的详细信息，但除非您有非常具体的约束，否则应该不是问题。

# css - 样式列表内联与内联块

> ID：13162791
> 
> 赞同：0
> 
> 时间：2012-10-31T16:43:03.497
> 
> 标签：css

我试图更好地理解 CSS 显示内联与块。

我有以下代码（在[http://jsfiddle.net/BfZEv/1/](http://jsfiddle.net/BfZEv/1/)的现场演示）

我有一个块列表，并将它们设置为 display:inline。为什么他们不内联？

然后我尝试了 inline-block，它起作用了。阅读内联块的描述，我没想到它会起作用。我是否正确使用它

然后我尝试了最终列表，几乎得到了我想要的外观。我想要一行，但在每个“你好”之后，我想显示背景图像。你能帮我吗？

谢谢

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
    <head>
        <title>Untitled</title>
        <style type="text/css">
            .main-ul-bad > li {
                list-style-type: none;
                display:inline
            }
            .main-ul > li {
                list-style-type: none;
                display:inline-block
            }
            div.div1 {
                display:inline-block
            }
            .main-ul > li div ul {
                display: none;
            }
            span.background {
                background-image: url("dropdown_arrow_blue.gif");
                background-repeat: no-repeat;
            }
        </style>
    </head>
    <body>
        <ul class="main-ul-bad">
            <li><div>Hello</div></li>
            <li><div>Hello</div></li>
            <li><div>Hello</div></li>
        </ul>

        <ul class="main-ul">
            <li><div>Hello</div></li>
            <li><div>Hello</div></li>
            <li><div>Hello</div></li>
        </ul>

        <ul class="main-ul">
            <li>
                <span>Label</span>
                <div class="div1">
                    <div class="div2"><span class="text">Hello</span><span class="background"></span></div>
                    <ul>
                        <li>Hello</li>
                        <li>Hello</li>
                        <li>Hello</li>
                    </ul>
                </div>
            </li>
            <li>
                <span>Label</span>
                <div class="div1">
                    <div class="div2"><span class="text">Hello</span><span class="background"></span></div>
                    <ul>
                        <li>Hello</li>
                        <li>Hello</li>
                        <li>Hello</li>
                    </ul>
                </div>
            </li>
            <li>
                <span>Label</span>
                <div class="div1">
                    <div class="div2"><span class="text">Hello</span><span class="background"></span></div>
                    <ul>
                        <li>Hello</li>
                        <li>Hello</li>
                        <li>Hello</li>
                    </ul>
                </div>
            </li>
        </ul>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:53:55.180

您的第一个列表`main-ul-bad`不会显示内联，因为您`div`在每个列表项中都有一个，默认情况下这是一个块。如果您删除 div 或制作它们`inline`，它们将显示在一行上。

[http://jsfiddle.net/BfZEv/6/](http://jsfiddle.net/BfZEv/6/)

虽然我相信更常见，也可能是正确的，做水平列表的方法是浮动它们：

```
<ul class="main-ul-bad">
    <li><div>Hello</div></li>
    <li><div>Hello</div></li>
    <li><div>Hello</div></li>
</ul> 
```

CSS：

```
.main-ul-bad {
    width: 500px;
}

.main-ul-bad > li {
    list-style-type: none;
    float: left;
    margin: 5px;
} 
```

为列表指定一个宽度，以容纳一行中所需的项目数并浮动这些项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:54:11.920

您也必须制作`<div>`-s `inline-block`，而不仅仅是`<li>`-s - [**DEMO**](http://jsfiddle.net/BfZEv/3/)

然后您可以在每个图像之后添加图像：

```
.main-ul-bad > li {
    list-style-type: none;
    display: inline;
}

.main-ul-bad > li div {
    display: inline-block;
    margin-right: 30px;
    position: relative;
}

.main-ul-bad > li div:after {
    content: url(http://lorempixel.com/20/20);
    height: 20px;
    width: 20px;
    display: block;
    position: absolute;
    top: 0;
    right: -20px;
} 
```

# android - Android phonegap 文件：//android_asset/www/index.htm

> ID：13162797
> 
> 赞同：0
> 
> 时间：2012-10-31T16:43:18.803
> 
> 标签：android, cordova

我正在使用 PhoneGap 和 Android 构建一个移动应用程序，我在应用程序启动时有一个加载器，我在启动时加载 2 个图像，每当网络速度很慢时，都会弹出以下消息并且应用程序崩溃：

与服务器的连接不成功。`file:///android_asset/www/index.html`

有没有办法处理这个错误，即向用户显示“连接问题请重试”之类的消息而不是上面的消息？

非常感谢您的帮助，因为我尝试了很多并且我去了，`super.setIntegerProperty("loadUrlTimeoutValue", 60000);`但我需要一个更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T02:01:19.890

路径应该是：“file:///android_asset/www/index.html”

好像你错过了一个斜线

# c# - System.Drawing.Color -state 有什么价值？

> ID：13162801
> 
> 赞同：1
> 
> 时间：2012-10-31T16:43:32.453
> 
> 标签：c#, struct, equality, system.drawing, base-class-library

System.Drawing.Color 有一个私有字段`int state`，这使得相等比人们对结构的期望要复杂一些。

有谁知道它到底是干什么用的？谁，什么以及为什么设置和阅读它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T16:49:05.297

据我了解，它与这些值进行比较：

```
 private static short StateKnownColorValid   = 0x0001;
    private static short StateARGBValueValid    = 0x0002;
    private static short StateValueMask         = (short)(StateARGBValueValid);
    private static short StateNameValid         = 0x0008;
    private static long NotDefinedValue = 0; 
```

[http://reflector.webtropy.com/default.aspx/Net/Net/3@5@50727@3053/DEVDIV/depot/DevDiv/releases/whidbey/netfxsp/ndp/fx/src/CommonUI/System/Drawing/颜色@cs/1/颜色@cs](http://reflector.webtropy.com/default.aspx/Net/Net/3@5@50727@3053/DEVDIV/depot/DevDiv/releases/whidbey/netfxsp/ndp/fx/src/CommonUI/System/Drawing/Color@cs/1/Color@cs)

所以我的镜头是它用于确定它是“系统颜色”还是从例如 ARGB 值定义的用户。

```
public bool IsKnownColor 
{
    get { return((state & StateKnownColorValid) != 0);}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:54:32.593

该`Color`结构覆盖该`Equals`方法，因此在测试颜色是否相等时会自动执行正确的操作。

该`Equals`方法比较`value`、`state`和`knownColor`字段`name`。

# prolog - 这个查询的 SLD 树是什么？

> ID：13162803
> 
> 赞同：4
> 
> 时间：2012-10-31T16:43:38.490
> 
> 标签：prolog, successor-arithmetics, prolog-cut

让我们考虑以下 Prolog 程序（来自“Prolog 的艺术”）：

```
natural_number(0).
natural_number(s(X)) :- natural_number(X).

plus(X, 0, X) :- natural_number(X).
plus(X, s(Y), s(Z)) :- plus(X, Y, Z). 
```

和查询：

```
?- plus(s(s(s(0))), s(0), Z). 
```

SICStus 和 SWI 都会产生预期的`Z = s(s(s(s(0))))`答案，但会向用户查询下一个答案（正确`no`/`false`答案）。但是，我无法理解为什么在找到唯一目标之后 SLD 树中有一个开放的分支。我尝试在 SICStus 和 SWI 下进行调试，但我还不能真正解释结果。我只能说，据我所知，两者都回溯到`plus(s(s(s(0))), 0, _Z2)`. 有人可以帮助我理解这种行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T19:14:26.290

Many Prolog systems are not as smart as we expect them to be. This has several reasons, mostly because of a tradeoff choice of the implementer. What appears important to some might not be that important to others.

As a consequence these leftover choicepoints may accumulate in time and prevent to free auxiliary data. For example, when you want to read in a long list of text. A list that is that long that it does not fit into memory at once, but still can be processed efficiently with `library(pio)`.

If you expect exactly one answer, you might use `call_semidet/1` to make it determinate. See [this answer](https://stackoverflow.com/a/12942551/772868) for its definition and a use case.

```
?- plus(s(s(s(0))), s(0), Z).
Z = s(s(s(s(0)))) ;
false.

?- call_semidet(plus(s(s(s(0))), s(0), Z)).
Z = s(s(s(s(0)))).

```

But you can see it also from a more optimistic side: Modern toplevels (like the one in SWI) do show you when there are leftover choicepoints. So you can consider some countermeasures like `call_semidet/1`.

Here are some related answers:

*   [implementing `last/2`](https://stackoverflow.com/a/11736042/772868)

*   [如何插入绿色切口`append/3`](https://stackoverflow.com/a/12710995/772868)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T18:10:47.053

该问题与 SLD 树没有直接关系，因为 Prolog 系统不会像您描述的那样以前瞻方式构建 SLD 树。但是在某些 Prolog 系统中发现的一些优化基本上具有这种效果并改变了盲目的蛮力头部匹配。即索引和选择点消除。

现在有一个已知的 SWI-Prolog 限制。尽管它进行多参数索引，但它不会~~对非第一个参数索引~~级联索引进行选择点消除。意味着它只选择一个论点，但没有进一步。有一些 Prolog 系统可以进行多参数索引和级联索引。例如，在[Jekejeke Prolog](http://www.jekejeke.ch/idatab/doclet/prod/en/docs/05_run/15_stdy/06_bench/05_optimizations/02_index.html)中，我们没有 No/false：

![皮亚诺级联](../Images/c7537e9df4bdc1b279f0cff8503353ac.png)

再见

PS：最新版本的 Jekejeke Prolog 甚至没有字面上的级联，因为它检测到第一个参数索引没有敏感性。因此，尽管由于实际调用模式，它为第一个参数构建索引，但它会跳过第一个参数索引并且不使用它，而只使用第二个参数。跳过会带来一点速度。:-)

The skipping is seen via the [`dump/1`](http://www.jekejeke.ch/idatab/doclet/prod/en/docs/10_dev/10_docu/02_reference/06_theories/01_inspect/04_index.html) command of the development environment version:

```
?- dump(plus/3).
-------- plus/3 ---------
length=2
arg=0
  =length=2
arg=1
  0=length=1
  s=length=1
Yes 
```

So it has not decended into `arg=0` and built an `arg=1` index there, but instead built in parallel an `arg=0` and an `arg=1` index. We might still call this heuristic cascading since individual queries lead to multiple indexes, but they have not really the shape of a cascade.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T17:23:29.530

对我们来说，加号的两个从句显然是“分离的”。我们可以这样说，因为我们知道`0 \= s(Y)`。但是（我认为）这样的分析通常是令人望而却步的，然后 Prolog 认为这样的分支仍有待证明：这里有一条踪迹表明，在找到第一个解决方案后，调用 (7) 仍然对替代方案“开放”。

![在此处输入图像描述](../Images/a086cc130a48bcd0336d0e56ef4598a9.png)

# c# - 运算符“+”不能应用于“byte[]”和“int”类型的操作数

> ID：13162806
> 
> 赞同：1
> 
> 时间：2012-10-31T16:43:53.827
> 
> 标签：c#, .net, wpf, mvvm

我是一名 C++ 开发人员，最近转向 C#。现在我正在处理我的 WPF 应用程序中的一个文本框，我需要在其中设置文本框的测试。这是代码：

XAML：

```
<TextBox Name="Data11" MaxLength="2" Grid.Column="0" Text="{Binding Data11}" />
<TextBox Name="Data12" MaxLength="2" Grid.Column="1" Text="{Binding Data12}" /> 
```

视图模型类：

```
private string _Data11;
    public string Data11
    {
        get
        {
            return _Data11;
        }

        set
        {
            _Data11 = value;
            OnPropertyChanged("Data11");
        }
    }

// Description of Data12
private string _Data12;
public string Data12
{
    get
    {
        return _Data12;
    }

    set
    {
        _Data12 = value;
        OnPropertyChanged("Data12");
    }
} 
```

现在在这个文本框上我需要设置文本。基本上在我的 C++ 应用程序中，我做了如下操作：

```
m_matchData11->setText(String(String::toHexString((buffer+0), 1)), false);
m_matchData12->setText(String(String::toHexString((buffer+1+4), 1)), false); 
```

如果您在上面注意到，**ToHexString**创建一个包含二进制数据块的十六进制转储的字符串。我尝试在我的 WPF 应用程序中执行此操作，如下所示：

```
Data11 = BitConverter.ToString(buffer, 1);
Data12 = BitConverter.ToString((buffer + 4), 1); 
```

尽管第一个语句似乎工作正常，但第二个语句会引发以下错误：

`Operator '+' cannot be applied to operands of type 'byte[]' and 'int'`

我怎样才能实现它？:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T16:51:00.597

您可以使用接受起始索引和长度的[BitConverter.ToString](http://msdn.microsoft.com/en-us/library/f0965864.aspx)方法的重载。

```
Data12 = BitConverter.ToString(buffer, 4, 1); 
```

这将获得缓冲区中的第 5 个字节。

如果您不使用`BitConverter.ToString`并且必须进行手动操作，则可以使用 Linq`Take`和`Skip`扩展方法。

编辑：

如果您只格式化缓冲区的 1 个字节，您可以这样做：

```
Data12 = buffer[4].ToString("X2"); 
```

# java - 使用 Mockito 进行单元测试的必要导入是什么？

> ID：13162810
> 
> 赞同：3
> 
> 时间：2012-10-31T16:44:00.240
> 
> 标签：java, annotations, mockito

我正在使用 Mockito 1.9.0 版。我环顾四周，发现大多数示例都忽略了导入列表，而其他示例则彼此非常不一致。对于某些注释，我收到“错误：找不到符号”。我可能将 junit 语法与 Mockito 语法混合在一起，但我不确定。

```
@RunWith(MockitoJUnitRunner.class)
public class SomeControllerTest {
  @Mock
  private SomeServiceImpl someService;

  @InjectMocks
  private SomeController someController;

  @Before 
  public void setUp() throws Exception {
  ...
  }

  @Test
  public void testSomething() throws SomeException {
  ...
  }
} 
```

**编辑**

这是我目前正在导入的内容：

```
import org.mockito.*;
import org.mockito.runners.MockitoJUnitRunner;
import org.junit.runner.RunWith;

import static org.junit.Assert.assertEquals;
import static org.mockito.Mockito.*;
import static org.junit.Assert.*; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:11:19.860

通常你可以接受：

```
import static org.mockito.Mockito.*; 
```

使用今天的 IDE，它们提供了自动完成功能，并且它们将查找上层类。例如 Mockito 类就是这样设计的，如果你尝试使用 Mockito`eq`匹配器，IntelliJ 会导入`org.mockito.Matchers.eq`

以同样的方式，您可以使用`given`家族方法，在存根而不是`when`家族方法时使用 BDD 样式，它将导入`org.mockito.BDDMockito`扩展`Mockito`类。

注释都在这里`org.mockito`

```
import org.mockito.Captor;
import org.mockito.InjectMocks;
import org.mockito.Mock; 
```

由于某些关于代码组织的原因，其他东西可能会在其他地方找到，例如：

```
import org.mockito.runners.MockitoJUnitRunner; 
```

**编辑**：在 Mockito 2.x 中，`org.mockito.runners.MockitoJUnitRunner`已弃用，JUnit 相关代码已移至`org.mockito.junit`，因此导入应替换为：

```
import org.mockito.junit.MockitoJUnitRunner; 
```

新的也一样`MockitoRule`。

```
import org.mockito.junit.MockitoRule;
import org.mockito.junit.MockitoJunit; 
```

但找到它应该不是问题。

希望有帮助！

# spring - 如何更改找到 bean 的上下文路径

> ID：13162815
> 
> 赞同：0
> 
> 时间：2012-10-31T16:44:11.753
> 
> 标签：spring, tomcat, tomcat6, portlet, tcserver

启动我的应用程序时收到此错误：

> java.io.FileNotFoundException：无法打开 ServletContext 资源 [/WEB-INF/spring/servlet/servlet-context.xml]

我不知道 Spring 为什么要搜索 servlet-context.xml 。我所有的上下文都在 web-inf/context/portlet 中配置有没有我可以添加到 web.xml 的设置，所以 tomcat 可以将上下文从不同的目录解析到 /WEB-INF/spring/servlet/servlet-context.xml ? 或者是解决这个问题的另一种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:47:37.397

通常您在*WEB-INF/web.xml*文件中设置上下文的位置，请参见此处： [http ://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring- framework-reference.html#web-integration-common](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#web-integration-common)

因此，您的*WEB-INF/web.xml*文件应该类似于，仔细检查**contextConfigLocation**值是否指向您的上下文配置文件：

```
<context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>/WEB-INF/context/portlet/*.xml</param-value>
</context-param>

<listener>
 <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

# wadl - 如何在 WADL 生成的文档中获取参数描述

> ID：13162816
> 
> 赞同：0
> 
> 时间：2012-10-31T16:44:11.860
> 
> 标签：wadl

Martin，我一直在尝试使用您的 wadl 文档生成代码来记录来自 Javadoc 注释的 REST 接口，但我无法让它记录方法/查询参数的参数。我不太确定我做错了什么。我以通常的方式为方法提供 Javadoc 注释，例如：

```
 /**
 * Gets an Account object by id.
 * @param req the HttpServletRequest encapsulating this GET request
 * @param q the id of the Account object to be returned
 * @param xid optional transaction id associated with this request
 * @return an AccountModel object corresponding to the requested it. 
 * If not found an APIException is thrown.
 */
@GET @Path("/id")
@Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
public AccountModel getAsXML_JSON(@Context final HttpServletRequest req, 
        @QueryParam("q") String q,
        @QueryParam("xid") String xid) 
```

我敢肯定，我缺少一些明显的东西。如上所述，注释“Gets an Account object by id”使其进入 resourcedoc.xml 文件，然后从那里进入 application.wadl 文件，但所有参数定义都不起作用。当我添加

```
 * @annotationDoc {@name q} {@doc the id of the Account object to be returned}
 * @annotationDoc {@name xid} {@doc optional transaction id associated with this request} 
```

我可以在 resourcedoc.xml 文件中看到参数的描述，但看起来它们出现在错误的位置，并且 application.wadl 文件中没有显示任何内容。您可以提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:11:07.260

只是为了回答我自己的问题，问题是 resourcedoclet 找不到 QueryParam 或 Context 类的定义。因此，它将 QueryParam 插入到生成的 XML 中，但不包括标识 QueryParam 引用的参数的名称/值对。这导致生成的 html 包含方法描述但不包含参数描述，因为无法找到 QueryParam 引用的参数。修复只是简单地将 jsr311-api-1.1.1.jar 包含在类路径中，用于调用资源的 Javadoc 命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T07:38:56.143

添加

```
<dependency>
    <groupId>javax.ws.rs</groupId>
    <artifactId>javax.ws.rs-api</artifactId>
    <version>2.0</version>
</dependency> 
```

到你的 pom.xml

# asp.net - 将数据表中的数据插入下拉列表

> ID：13162817
> 
> 赞同：-1
> 
> 时间：2012-10-31T16:44:18.223
> 
> 标签：asp.net, sql-server, datatable, dataset, datasource

我想`dropdown`用`datatable`
bcoz 填充 a 我已经`GetCate()`在 bal 中有一个方法，它返回`datatable`并且现在想`ddl`用一些`datasource`和`databind`脚本动态地将数据填充到 a 中，这可能吗？

为什么不能将数据表分配到下拉列表中？？？

```
public void BindCateDDL()
{

    DataTable dt = new BALCate().GetCate();        
    ddl_filter_category_id.DataSource = dt;
    ddl_filter_category_id.DataBind();
} 
```

**这是正确的方法吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:50:25.827

有几种方法可以做到这一点：

1）在每次迭代中创建一个新`listItem`的，添加详细信息并将其添加到 DDL：

```
public void BindCateDDL()
{
    //DropDownList ddl;
    DataTable dt = new BALCate().GetCate();
    foreach (DataRow dr in dt.Rows)
    {
        ListItem l = new ListItem();
        l.text = dr["colForName"].ToString();
        l.value = dr["colForValue"].ToString();
        ddl.items.add(l);
    }
} 
```

2）将数据表作为数据源添加到`DropDownList`并设置`DataTextField`和`DataValueField`属性：

```
public void BindCateDDL()
{
    //DropDownList ddl;
    DataTable dt = new BALCate().GetCate();
    ddl.DataSource = dt;
    ddl.DataTextField = "colForName";
    ddl.DataValueField = "colForValue";
    ddl.DataBind();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:47:29.967

您所要做的就是将下拉列表绑定到您的数据表，如下所示；

```
ddl.DataTextField = "ColumnName1";
ddl.DataValueField = "ColumnName2"
ddl.DataSource = dt;
ddl.DataBind() 
```

# asp.net-mvc - 向表单提交添加附加参数

> ID：13162819
> 
> 赞同：26
> 
> 时间：2012-10-31T16:44:19.880
> 
> 标签：asp.net-mvc, forms, razor

我的 Razor 视图中有一个表单声明

```
<form method="post" action="/Lot/LotList?auctionEventId=@auctionEventId" id="filterForm"> 
```

（顺便说一句，我选择这样写而不是使用`Html.BeginFrom`，因为我需要给它一个 id 并且不知道如何使用它`Html.BeginFrom`- 但这不是这里的问题）

在此表单之外，我有一个提交此表单的按钮（表单中还有一个提交按钮）

```
<input type="button" onclick="$('#filterForm').submit();" value="Show all" /> 
```

现在，问题是，如果此按钮用于提交表单，我希望表单中的操作更改为

```
action="/Lot/LotList?auctionEventId=@auctionEventId&showAll=true" 
```

如何更改操作并传递此附加参数？有没有更好的方法来做这一切？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-31T16:49:49.583

将查询字符串参数附加到表单操作上，并尝试在运行时更改它是棘手的（但并非不可能）。使用隐藏字段要容易得多：

```
<form method="post" action="/Lot/LotList" id="filterForm">
  <input type="hidden" name="auctionEventId" value="@auctionEventId" />
  ... 
```

所以现在你所要做的就是为“showAll”添加另一个隐藏字段

```
<form method="post" action="/Lot/LotList" id="filterForm">
  <input type="hidden" name="auctionEventId" value="@auctionEventId" />
  <input type="hidden" name="showAll" value="false" id="showAllField" />
  ... 
```

只需在 showAll 按钮上连接一个 jquery 事件：

```
<input id="showAllButton" type="button"/> 
```

jQuery：

```
$('#showAllButton').click(function(){
     $('#showAllField').val("true");
     $('#filterForm').submit();
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-12-16T23:22:38.837

我知道您说这不是问题，但您可以添加`Html.BeginForm`如下属性：

```
 @using (Html.BeginForm("ActionName","ControllerName", FormMethod.Post, new { id = "filterform" })){ 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-31T16:49:27.573

如何放置一个隐藏的输入

```
<form method="post" action="/Lot/LotList?auctionEventId=@auctionEventId" id="filterForm">

<input type="hidden" id="showAll" name="showAll" value=""/> 
```

在你的按钮上

```
<input type="button" onclick="submitForm()" value="Show all" /> 
```

在你的脚本某处

```
function submitForm(){
$('#showAll').val('true');
$('#filterForm').submit();

} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-06-24T02:27:26.440

如果您在表单中，则可以将路由添加到按钮元素。您可以使用 formAction 和 formMethod 覆盖表单的本机操作。您还可以使用其他 formActions 和 formMethods 拥有多个按钮

```
<form action="/somewhere" method="get">
    <input type="type" name="name" value=" " />

    <button formaction="/Lot/LotList?auctionEventId=@auctionEventId&showAll=true" formmethod="post">Show All</button>
</form>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-01T08:03:15.733

如果同一个表单有多个提交按钮，并且需要为每个按钮传递不同的参数，则可以使用 asp-route 属性来完成此任务。

```
 <input type="submit" value="Save"/>

 <input id="btnComplete" type="submit"
        asp-route-addNewOneAfterSave="@true"
        value="Save And Create New One"> 
```

请记住在 OnPost 方法中包含您的参数，例如：

```
public async Task<IActionResult> OnPostAsync(bool? addNewOneAfterSave)
        {
             //Your code ....
        } 
```

您可以从本文中阅读更多关于 asp-route 锚标记助手的[信息。](https://docs.microsoft.com/en-us/aspnet/core/mvc/views/tag-helpers/built-in/anchor-tag-helper?view=aspnetcore-3.1)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-08T08:21:25.327

你好，我发现这很好用

```
 @using (Html.BeginForm("ActionName","ControllerName",  new { id = "filterform" },FormMethod.Post)){ 
```

我已经厌倦了在参数之前执行“FormMethod.Post”，但它不起作用并且从未传递值。只有通过反复试验，我才设法解决它并发现它应该像我发布的代码一样。

希望有帮助

# mysql - 如何修复 latin1 编码列中损坏的编码字符

> ID：13162826
> 
> 赞同：1
> 
> 时间：2012-10-31T16:44:42.980
> 
> 标签：mysql, encoding, utf-8, latin1

我有一个 latin1 表，其中长时间填充了不同的编码数据，因此它包含很多损坏的字符。我试图解决这个问题以及[如何在 Latin1 编码列中检测 UTF-8 字符 - MySQL](https://stackoverflow.com/questions/9304485/how-to-detect-utf-8-characters-in-a-latin1-encoded-column-mysql)非常有帮助，尤其是以下代码

```
SELECT CONVERT(CONVERT(name USING BINARY) USING latin1) AS latin1, CONVERT(CONVERT(name USING BINARY) USING utf8) AS utf8 FROM users WHERE CONVERT(name USING BINARY) RLIKE CONCAT('[', UNHEX('80'), '-', UNHEX('FF'), ']') 
```

但这并不能解决所有问题。使用该命令将显示为“Ã¤”的 ä 字符转换回 ä，但我也有一些 ä 字符显示为“Â„”，因此似乎使用了不同的编码格式，但我不知道是哪个所以我可以恢复它。我尝试了 mysql 服务器上可用的字符集，但没有正确的结果。以前有没有人遇到过这个问题并且可以指出正确的字符集？

# php - 语法意外 T_STRING

> ID：13162827
> 
> 赞同：-3
> 
> 时间：2012-10-31T16:44:44.370
> 
> 标签：php

```
function secondsToTime($inputSeconds) {

   $secondsInAMinute = 60;
   $secondsInAnHour  = 60 * $secondsInAMinute;
   $secondsInADay    = 24 * $secondsInAnHour;

    $days = floor($inputSeconds / $secondsInADay);

   $hourSeconds = $inputSeconds % $secondsInADay;
   $hours = floor($hourSeconds / $secondsInAnHour);

    $minuteSeconds = $hourSeconds % $secondsInAnHour;
    $minutes = floor($minuteSeconds / $secondsInAMinute);

    $remainingSeconds = $minuteSeconds % $secondsInAMinute;
    $seconds = ceil($remainingSeconds);

    $obj = array(
        'd' => (int) $days,
        'h' => (int) $hours,
        'm' => (int) $minutes,
        's' => (int) $seconds
    );

    return $obj;
} 
```

这个函数给了我一个错误：

```
Parse error: syntax error, unexpected T_STRING on line 6 
```

我这样称呼它：

```
$start = new DateTime('2010-10-12');
$end = new DateTime('2010-10-14');
$seconds = round(abs($end->format('U') - $start->format('U')));
$obj = secondsToTime($seconds); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T16:45:45.287

除非它是您的示例中的拼写错误，否则您没有评论`extract the remaining seconds`，您需要`//`在它之前添加：

```
// extract the remaining seconds 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:59:26.217

我测试了你的代码，它显然有效。

但是，我不久前遇到了类似的问题。我的代码在本地工作，但是当上传到服务器时它会抛出“Unexpected T_STRING ...”。几个小时后，我发现字符集已更改，并且在脚本文件的开头插入了一些随机的额外字符。

不知道这是否适用于您的情况或是否对您有帮助。但是你可以尝试在一个好的文本编辑器中打开你的文件来检查字符集和意外字符。

# java - Java + Spring + Quartz-scheduler：在其他工作结束后解雇一个工作

> ID：13162828
> 
> 赞同：0
> 
> 时间：2012-10-31T16:44:44.437
> 
> 标签：java, spring, quartz-scheduler

我有这个问题：

我安排了几份工作。每个作业都会产生一个文件。现在我必须安排另一个作业来挑选所有这些文件，压缩它们并通过 FTP 发送到远程服务器。

所以最后一个作业必须等到其他作业完成才能开始。我该如何安排这份工作？你能给我一些例子吗？

我正在使用 Spring 与 Quartz 的集成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:09:49.210

看看 [@JobListner](http://quartz-scheduler.org/documentation/quartz-2.x/tutorials/tutorial-lesson-07)

添加一个逻辑，在

```
public void jobWasExecuted(JobExecutionContext context,
            JobExecutionException jobException); 
```

检查，是否所有工作都已完成。

我希望这有帮助

# c# - 使用 LINQ 进行宽恕/模糊搜索

> ID：13162830
> 
> 赞同：12
> 
> 时间：2012-10-31T16:44:48.737
> 
> 标签：c#, linq

我正在尝试对我继承的数据库进行搜索。该要求规定用户必须能够按名称搜索对象。不幸的是，一个对象可能有多个与之关联的名称。例如：

> ```
> ID    Name
> 1     John and Jane Doe
> 2     Foo McFoo
> 3     Boo McBoo 
> ```

当每条记录中存在一个名称时，很容易实现搜索：

```
var objects =  from x in db.Foo
               where x.Name.Contains("Foo McFoo")
               select x; 
```

但是，当存在多个名称时，该方法不起作用。

**问题：**是否可以编写一个搜索方法，当有人使用搜索词`John Doe`或时返回记录一（John 和 Jane Doe） `Jane Doe`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T17:03:10.160

这会损害性能，但是这个快速的怎么样：

```
string[] filters = "John Doe".Split(new[] {' '});
var objects =  from x in db.Foo
               where filters.All(f => x.Name.Contains(f))
               select x; 
```

它似乎返回了你所期望的。现在，当您还拥有唱片“John Doe”和“John and Jane Doe”时，您可以调整它以使其表现得很好。

这对你有用吗？

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-31T17:23:25.443

您可以创建一个名为“ContainsFuzzy”的自定义扩展方法：

```
public static bool ContainsFuzzy(this string target, string text){
    // do the cheap stuff first
    if ( target == text ) return true;
    if ( target.Contains( text ) ) return true;
    // if the above don't return true, then do the more expensive stuff
    // such as splitting up the string or using a regex
} 
```

那么你的 LINQ 至少会更容易阅读：

```
var objects =  from x in db.Foo
               where x.Name.ContainsFuzzy("Foo McFoo")
               select x; 
```

明显的缺点是每次调用 ContainsFuzzy 都意味着重新创建拆分列表等，因此会产生一些开销。您可以创建一个名为 FuzzySearch 的类，它至少可以提高效率：

```
class FuzzySearch{

    private string _searchTerm;
    private string[] _searchTerms;
    private Regex _searchPattern;

    public FuzzySearch( string searchTerm ){
        _searchTerm = searchTerm;
        _searchTerms = searchTerm.Split( new Char[] { ' ' } );
        _searchPattern = new Regex(
            "(?i)(?=.*" + String.Join(")(?=.*", _searchTerms) + ")");
    }

    public bool IsMatch( string value ){
        // do the cheap stuff first
        if ( _searchTerm == value ) return true;
        if ( value.Contains( _searchTerm ) ) return true;
        // if the above don't return true, then do the more expensive stuff
        if ( _searchPattern.IsMatch( value ) ) return true;
        // etc.
    }

} 
```

你的 LINQ：

```
FuzzySearch _fuzz = new FuzzySearch( "Foo McFoo" );

var objects =  from x in db.Foo
               where _fuzz.IsMatch( x.Name )
               select x; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-05-30T10:15:27.200

我想知道怎么没有人提到 Levenshtein 距离算法。

这是一种算法，通过 int 告诉两个字符串之间的距离。

[这](https://stackoverflow.com/questions/15559578/levenshtein-distance-c-sharp-count-error-type)是一个 SO 帖子，您可以找到该算法的一些实现。

因此，使用 signature 的距离函数`int Distance(string x, string y)`，您可以使用 LINQ 过滤掉高距离并对结果进行排序，以便低距离出现在结果之上。
请注意，这将导致性能代价高昂。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T16:48:11.787

如果有多个别名，您可能需要将名称提取到 First/LastName 列或另一个表中。

但是我真的认为如果你需要一些“宽容”或“模糊”的东西，你应该看看它像[Lucene](http://lucenenet.apache.org/)

> **问题**：当有人使用搜索词 John Doe 或 Jane Doe 时，是否可以编写一个返回记录一（John 和 Jane Doe）的搜索方法？

要*非常*具体地解决您的问题，您可以将“John Doe”转换为`LIKE '%John%Doe'`或“Jane Doe”转换为`LIKE '%Jane%Doe'`，这将检索该记录。但是我可以看到像“Johnathan Poppadoe”这样的名字有问题。

# opencv - Kinect 深度图像

> ID：13162839
> 
> 赞同：8
> 
> 时间：2012-10-31T16:45:40.093
> 
> 标签：opencv, kinect, kinect-sdk

在我的应用程序中，我得到的深度帧类似于从 Depth Basics Sample 中检索到的深度帧。我不明白的是，为什么图像中有离散级别？我不知道我怎么称呼这些深度值的突然变化。很明显，我右手的一半全是黑色的，而我的左手似乎分成了 3 个这样的级别。这是什么以及如何删除它？

[![Kinect 深度基础示例](../Images/99b142afa06a93813b226f36883c9fd4.png "深度基础示例")](https://i.stack.imgur.com/vwptj.png "深度基础示例")

当我运行 KinectExplorer 示例应用程序时，我得到的深度如下。这是我想从原始深度数据生成的深度图像。

[![Kinect 浏览器](../Images/5a32c8de15e62ba5608c27ef94444579.png "Kinect 浏览器")](https://i.stack.imgur.com/z9eWy.png "Kinect 浏览器")

我正在使用 Microsoft Kinect SDK (v1.6) NuiApi 和 OpenCV。我有以下代码：

```
BYTE *pBuffer = (BYTE*)depthLockedRect.pBits; //pointer to data having 8-bit jump
USHORT *depthBuffer = (USHORT*) pBuffer; //pointer to data having 16-bit jump
int cn = 4;
this->depthFinal = cv::Mat::zeros(depthHeight,depthWidth,CV_8UC4); //8bit 4 channel
for(int i=0;i<this->depthFinal.rows;i++){
   for(int j=0;j<this->depthFinal.cols;j++){
      USHORT realdepth = ((*depthBuffer)&0x0fff); //Taking 12LSBs for depth
      BYTE intensity = (BYTE)((255*realdepth)/0x0fff); //Scaling to 255 scale grayscale
      this->depthFinal.data[i*this->depthFinal.cols*cn + j*cn + 0] = intensity;
      this->depthFinal.data[i*this->depthFinal.cols*cn + j*cn + 1] = intensity;
      this->depthFinal.data[i*this->depthFinal.cols*cn + j*cn + 2] = intensity;
      depthBuffer++;
   }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T10:57:44.443

您看到的条纹是由于操作`wrapping`引起的深度值`%256`。与其应用导致波段出现的模运算 ( `%256`)，不如沿整个范围重新映射深度值，例如：

```
BYTE intensity = depth == 0 || depth > 4095 ? 0 : 255 - (BYTE)(((float)depth / 4095.0f) * 255.0f); 
```

如果您的最大深度为 2048，请将 4095 替换为 2047。

更多指针：

1.  Kinect 可能会返回一个 11 位的值 (0-2047)，但您只使用 8 位 (0-255)。
2.  新 Kinect 版本似乎返回 12 位值 (0-4096)
3.  在 Kinect 资源管理器源代码中，有一个名为`DepthColorizer.cs`大多数魔法似乎发生的地方的文件。我相信这段代码使 kinect explorer 中的深度值如此平滑——但我可能错了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T18:41:21.610

我在处理一个涉及深度图可视化的项目时遇到了同样的问题。但是我使用 OpenNI SDK 和 OpenCV 而不是 Kinect SDK 库。问题是一样的，因此该解决方案对你有用，就像对我一样。

正如您之前对问题的回答中提到的，Kinect 深度图是 11 位 (0-2047)。在示例中，使用了 8 位数据类型。

为了解决这个问题，我在代码中所做的是将深度图获取为 16 位 Mat，然后使用`convertTo`函数中的缩放选项将其转换为 8 位 uchar Mat`Mat`

首先我初始化一个`Mat`用于获取深度数据

```
Mat depthMat16UC1(XN_VGA_Y_RES, XN_VGA_X_RES, CV_16UC1); 
```

这里`XN_VGA_Y_RES, XN_VGA_X_RES`定义了获取的深度图的分辨率。

我这样做的代码如下：

```
depthMat16UC1.data = ((uchar*)depthMD.Data());
depthMat16UC1.convertTo(depthMat8UC1, CV_8U, 0.05f); 
imshow("Depth Image", depthMat8UC1); 
```

`depthMD`是包含从 Kinect 传感器检索到的数据的元数据。

我希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T05:19:14.590

深度图像数据的可视化具有粗略的谨慎级别（在您的代码示例中为 0 到 255），但实际的深度图像数据是 0 到 2047 之间的数字。当然，仍然是谨慎的，但不是像选择的颜色来描绘它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-12T22:04:50.253

kinect v2 可以看到 8 米的深度，（但超过 4.5 的精度会降低）。它开始于 0.4 米左右。因此，需要将数字 8000 表示为一种颜色。一种方法是使用 RGB 颜色只是一个数字。那么你可能会存储一个像 255x255x255 ia 像素这样的数字。或者，如果您有不同的颜色格式，那么它会有所不同。在 255x255x255 的最大数字中存储 8000 将产生一定数量的 R+G+B，从而产生这种条带效应。

但是您当然可以除以 8000 或减去一个数字，或删除超出某个值。

# c# - 如何将数据从 SQL Server 数据库传输到 AX 2012？

> ID：13162844
> 
> 赞同：3
> 
> 时间：2012-10-31T16:45:54.710
> 
> 标签：c#, visual-studio-2010, axapta, dynamics-ax-2012

我想使用 C# 将大量数据从 SQL Server 2008 传输到 Microsoft Dynamics 2012。有主数据和关系数据。执行此操作的最佳方法是什么？

如果我们使用 .Net Business Connecter，我们可以维护外键关系吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T08:15:01.413

查看[数据迁移框架用户指南](http://technet.microsoft.com/en-us/library/jj225591.aspx)、[安装指南](http://technet.microsoft.com/EN-US/library/jj225595.aspx)、[使用指南](http://technet.microsoft.com/EN-US/library/jj225596.aspx)、[演示文件](http://technet.microsoft.com/EN-US/library/jj225593.aspx)。

[背景资料...](http://dynamics-ax.blogspot.dk/2012/08/ax-2012-data-migration-framework-recap.html)

这不是一条捷径，但替代方案需要 100% 了解 AX 数据模型。

AX 外键关系存储在 AX 数据字典中，但不会填充到 SQL Server 数据库中。

如果您的数据恰好是 AX 2012 数据库，那么我会推荐备份/恢复 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T23:05:02.380

I totally agree with Jan on this one...

First, Data Migration Framework for now would NOT be the weapon of choice here if you need to transfer HUGE amounts of data for the following reasons:

*   It is beta and by that it still contains lots of bugs (for example when creating custom entities on a custom table that does not have the right clustered and primary index setup, the import of your data is not correct, it updates the wrong records, ...)
*   Secondly, the first step of the process is loading your data into a staging table by using SQL Server DTS packages. The package being built by Dynamics also contains validation which has it's impact on the performance
*   Next, for every record that will be read, the mapping metadata is retrieved instead of caching when reading the same type of records.

So I think you have two options here:

*   You could use the same architecture more or less as the DMF and create a staging table. Then use the SQL Server Data Export/Import wizard to import the data FAST (no validation, ...) and afterwards process the staging to real life tables (But as Jan said, that would require Ax knowledge)

*   Lastly what you could do (depending on the complexity of the data you want to import) is using a AIF Custom Service (WCF). You could expose a service with an operation that creates a record in Dynamics Ax. The benifit here is that you could use parallel processing here to speed up things. For example, at a customer site, we have BizTalk in the middle of all the traffic and BizTalk is able to perform many calls in parallel to Dynamics AX. And if your environment is Multi-AOS, it can scale up nicely.

# c++ - C++ MFC MDI 视图渲染

> ID：13162847
> 
> 赞同：1
> 
> 时间：2012-10-31T16:46:08.140
> 
> 标签：c++, mfc, render, document, mdi

在我的应用程序中，我目前有 2 种文档类型。我将关注的将是第二个。我的应用程序是一个 3d 引擎编辑器，它是在 MFC MDI 中构建的。第一个文档是渲染窗口，它工作得很好，因为提取它的 hwnd 很简单，然后将它发送到我的图形类。但是我的第二个窗口，即脚本，应该（目前）只是为了进行丰富的编辑。但由于某种原因，它不会渲染（实际上它会渲染，但只有一次：/）。

CEditorScriptView.h

```
#pragma once

#include "CEditorDoc.h"
class CCEditorCntrItem;

class CCEditorScriptView : public CView
{
public: // create from serialization only
    CCEditorScriptView();
    DECLARE_DYNCREATE(CCEditorScriptView)

// Attributes
public:
    CCEditorDoc* GetDocument() const;
    static CCEditorScriptView * GetView();
    // m_pSelection holds the selection to the current CCEditorCntrItem.
    // For many applications, such a member variable isn't adequate to
    //  represent a selection, such as a multiple selection or a selection
    //  of objects that are not CCEditorCntrItem objects.  This selection
    //  mechanism is provided just to help you get started

    // TODO: replace this selection mechanism with one appropriate to your app
    CCEditorCntrItem* m_pSelection;
    CRichEditCtrl* m_rEdit;

    int  TYPE;

// Operations
public:

// Overrides
public:
    virtual void OnDraw(CDC* pDC);  // overridden to draw this view
    virtual BOOL PreCreateWindow(CREATESTRUCT& cs);
protected:
    virtual void OnInitialUpdate(); // called first time after construct
    virtual BOOL IsSelected(const CObject* pDocItem) const;// Container support

// Implementation
public:
    virtual ~CCEditorScriptView();
#ifdef _DEBUG
    virtual void AssertValid() const;
    virtual void Dump(CDumpContext& dc) const;
#endif

protected:

// Generated message map functions
protected:
    afx_msg void OnDestroy();
    afx_msg void OnSetFocus(CWnd* pOldWnd);
    afx_msg void OnSize(UINT nType, int cx, int cy);
    afx_msg void OnInsertObject();
    afx_msg void OnCancelEditCntr();
    afx_msg void OnFilePrint();
    afx_msg void OnFilePrintPreview();
    afx_msg void OnRButtonUp(UINT nFlags, CPoint point);
    afx_msg void OnContextMenu(CWnd* pWnd, CPoint point);
    DECLARE_MESSAGE_MAP()
};

#ifndef _DEBUG  // debug version in CEditorView.cpp
inline CCEditorDoc* CCEditorScriptView::GetDocument() const
   { return reinterpret_cast<CCEditorDoc*>(m_pDocument); }
#endif 
```

CEditorScriptView.cpp：

```
#include "stdafx.h"
// SHARED_HANDLERS can be defined in an ATL project implementing preview, thumbnail
// and search filter handlers and allows sharing of document code with that project.
#ifndef SHARED_HANDLERS
#include "CEditor.h"
#endif

#include "CEditorDoc.h"
#include "CntrItem.h"
#include "resource.h"

#ifdef _DEBUG
#define new DEBUG_NEW
#endif

// CCEditorView

#pragma region CCEditorScriptView

IMPLEMENT_DYNCREATE(CCEditorScriptView, CView)

BEGIN_MESSAGE_MAP(CCEditorScriptView, CView)
    ON_WM_DESTROY()
    ON_WM_SETFOCUS()
    ON_WM_SIZE()
    ON_COMMAND(ID_OLE_INSERT_NEW, &CCEditorScriptView::OnInsertObject)
    ON_COMMAND(ID_CANCEL_EDIT_CNTR, &CCEditorScriptView::OnCancelEditCntr)
    ON_COMMAND(ID_FILE_PRINT, &CCEditorScriptView::OnFilePrint)
    ON_WM_CONTEXTMENU()
    ON_WM_RBUTTONUP()
END_MESSAGE_MAP()

// CCEditorView construction/destruction

CCEditorScriptView::CCEditorScriptView()
{
    EnableActiveAccessibility();
    m_pSelection = NULL;
    // TODO: add construction code here

    m_rEdit->Create(WS_CHILD|WS_VISIBLE|WS_BORDER|ES_MULTILINE,
                    CRect(10,10,500,500), this, 1);

    //m_rEdit->SetFocus();

    TYPE = ID_CEDITOR_VIEW_SCRIPT;
}

CCEditorScriptView::~CCEditorScriptView()
{
}

BOOL CCEditorScriptView::PreCreateWindow(CREATESTRUCT& cs)
{
    // TODO: Modify the Window class or styles here by modifying
    //  the CREATESTRUCT cs

    return CView::PreCreateWindow(cs);
}

// CCEditorView drawing

void CCEditorScriptView::OnDraw(CDC* pDC)
{
    if (!pDC)
        return;

    CCEditorDoc* pDoc = GetDocument();
    ASSERT_VALID(pDoc);
    if (!pDoc)
        return;

    // TODO: add draw code for native data here
    // TODO: also draw all OLE items in the document

    // Draw the selection at an arbitrary position.  This code should be
    //  removed once your real drawing code is implemented.  This position
    //  corresponds exactly to the rectangle returned by CCEditorCntrItem,
    //  to give the effect of in-place editing.

    // TODO: remove this code when final draw code is complete.

    m_rEdit->UpdateWindow();

    if (m_pSelection != NULL)
    {
        CSize size;
        CRect rect(10, 10, 210, 210);

        if (m_pSelection->GetExtent(&size, m_pSelection->m_nDrawAspect))
        {
            pDC->HIMETRICtoLP(&size);
            rect.right = size.cx + 10;
            rect.bottom = size.cy + 10;
        }
        m_pSelection->Draw(pDC, rect);
    }
}

// MDI view implementation file
CCEditorScriptView * CCEditorScriptView::GetView()
{
    CMDIChildWnd * pChild =
        ((CMDIFrameWnd*)(AfxGetApp()->m_pMainWnd))->MDIGetActive();

    if ( !pChild )
        return NULL;

    CView * pView = pChild->GetActiveView();

    if ( !pView )
        return NULL;

    // Fail if view is of wrong kind
    /*if ( ! pView->IsKindOf( RUNTIME_CLASS(CCEditorRenderView) ) )
        return NULL;*/

    return (CCEditorScriptView *) pView;
}

void CCEditorScriptView::OnInitialUpdate()
{
    CView::OnInitialUpdate();

    // TODO: remove this code when final selection model code is written
    m_pSelection = NULL;    // initialize selection
}

void CCEditorScriptView::OnDestroy()
{
    // Deactivate the item on destruction; this is important
    // when a splitter view is being used
   COleClientItem* pActiveItem = GetDocument()->GetInPlaceActiveItem(this);
   if (pActiveItem != NULL && pActiveItem->GetActiveView() == this)
   {
      pActiveItem->Deactivate();
      ASSERT(GetDocument()->GetInPlaceActiveItem(this) == NULL);
   }
   CView::OnDestroy();
}

// OLE Client support and commands

BOOL CCEditorScriptView::IsSelected(const CObject* pDocItem) const
{
    // The implementation below is adequate if your selection consists of
    //  only CCEditorCntrItem objects.  To handle different selection
    //  mechanisms, the implementation here should be replaced

    // TODO: implement this function that tests for a selected OLE client item

    return pDocItem == m_pSelection;
}

void CCEditorScriptView::OnInsertObject()
{
    // Invoke the standard Insert Object dialog box to obtain information
    //  for new CCEditorCntrItem object
    COleInsertDialog dlg;
    if (dlg.DoModal() != IDOK)
        return;

    BeginWaitCursor();

    CCEditorCntrItem* pItem = NULL;
    TRY
    {
        // Create new item connected to this document
        CCEditorDoc* pDoc = GetDocument();
        ASSERT_VALID(pDoc);
        pItem = new CCEditorCntrItem(pDoc);
        ASSERT_VALID(pItem);

        // Initialize the item from the dialog data
        if (!dlg.CreateItem(pItem))
            AfxThrowMemoryException();  // any exception will do
        ASSERT_VALID(pItem);

        if (dlg.GetSelectionType() == COleInsertDialog::createNewItem)
            pItem->DoVerb(OLEIVERB_SHOW, this);

        ASSERT_VALID(pItem);
        // As an arbitrary user interface design, this sets the selection
        //  to the last item inserted

        // TODO: reimplement selection as appropriate for your application
        m_pSelection = pItem;   // set selection to last inserted item
        pDoc->UpdateAllViews(NULL);
    }
    CATCH(CException, e)
    {
        if (pItem != NULL)
        {
            ASSERT_VALID(pItem);
            pItem->Delete();
        }
        AfxMessageBox(IDP_FAILED_TO_CREATE);
    }
    END_CATCH

    EndWaitCursor();
}

// The following command handler provides the standard keyboard
//  user interface to cancel an in-place editing session.  Here,
//  the container (not the server) causes the deactivation
void CCEditorScriptView::OnCancelEditCntr()
{
    // Close any in-place active item on this view.
    COleClientItem* pActiveItem = GetDocument()->GetInPlaceActiveItem(this);
    if (pActiveItem != NULL)
    {
        pActiveItem->Close();
    }
    ASSERT(GetDocument()->GetInPlaceActiveItem(this) == NULL);
}

// Special handling of OnSetFocus and OnSize are required for a container
//  when an object is being edited in-place
void CCEditorScriptView::OnSetFocus(CWnd* pOldWnd)
{
    COleClientItem* pActiveItem = GetDocument()->GetInPlaceActiveItem(this);
    if (pActiveItem != NULL &&
        pActiveItem->GetItemState() == COleClientItem::activeUIState)
    {
        // need to set focus to this item if it is in the same view
        CWnd* pWnd = pActiveItem->GetInPlaceWindow();
        if (pWnd != NULL)
        {
            pWnd->SetFocus();   // don't call the base class
            return;
        }
    }

    CView::OnSetFocus(pOldWnd);
}

void CCEditorScriptView::OnSize(UINT nType, int cx, int cy)
{
    CView::OnSize(nType, cx, cy);
    COleClientItem* pActiveItem = GetDocument()->GetInPlaceActiveItem(this);
    if (pActiveItem != NULL)
        pActiveItem->SetItemRects();
}

void CCEditorScriptView::OnFilePrint()
{
    //By default, we ask the Active document to print itself
    //using IOleCommandTarget. If you don't want this behavior
    //remove the call to COleDocObjectItem::DoDefaultPrinting.
    //If the call fails for some reason, we will try printing
    //the docobject using the IPrint interface.
    CPrintInfo printInfo;
    ASSERT(printInfo.m_pPD != NULL); 
    if (S_OK == COleDocObjectItem::DoDefaultPrinting(this, &printInfo))
        return;

    CView::OnFilePrint();

}

void CCEditorScriptView::OnRButtonUp(UINT /* nFlags */, CPoint point)
{
    ClientToScreen(&point);
    OnContextMenu(this, point);
}

void CCEditorScriptView::OnContextMenu(CWnd* /* pWnd */, CPoint point)
{
#ifndef SHARED_HANDLERS
    theApp.GetContextMenuManager()->ShowPopupMenu(IDR_POPUP_EDIT, point.x, point.y, this, TRUE);
#endif
}

// CCEditorView diagnostics

#ifdef _DEBUG
void CCEditorScriptView::AssertValid() const
{
    CView::AssertValid();
}

void CCEditorScriptView::Dump(CDumpContext& dc) const
{
    CView::Dump(dc);
}

CCEditorDoc* CCEditorScriptView::GetDocument() const // non-debug version is inline
{
    ASSERT(m_pDocument->IsKindOf(RUNTIME_CLASS(CCEditorDoc)));
    return (CCEditorDoc*)m_pDocument;
}
#pragma endregion
#endif //_DEBUG

// CCEditorView message handlers 
```

这就是它目前的输出：

![在此处输入图像描述](../Images/0e94382bf51e95eb47526cc1b4f3122d.png)

现在似乎没问题，但它只渲染一次，这意味着如果我点击它（richEdit）什么都不会发生，或者如果我尝试输入richEdit，也不会发生任何事情。所以我想知道，为什么？为什么它不继续渲染或更新视图？

谢谢你

PS。如果您不希望我发布任何内容，例如代码，请发表评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T18:23:19.763

所以，看来我已经解决了我的问题，这是解决方案：

我查看了控制台，发现该窗口未能创建。我得出的解决方案是 m_rEdit 是错误的（通过测试）。所以我发现我必须在构造函数中初始化指针，并在 OnInitialUpdate() 中使用 m_rEdit->Create。这解决了它。

无论如何，感谢任何试图解开这个谜团的人。

# c# - 没有命名参数的 SqlCommand 存储过程

> ID：13162848
> 
> 赞同：0
> 
> 时间：2012-10-31T16:46:10.583
> 
> 标签：c#, sql-server, stored-procedures, sqlparameter

我编写了一个查询解析器，它应该创建一个 SqlCommand 并执行一个存储过程。存储过程的查询可以有多种形式，包括这种形式：

```
exec dbo.sp_StoredProcedureName 1599800 
```

在这种情况下，我以这种方式创建 SqlParameter：

```
var param = new SqlParameter() { Value = paramValue }; 
```

我收到一条错误消息，指出“@Parameter1”不是过程 sp_StoredProcedureName 的参数。

有没有一种方法可以在不将其作为标准查询运行的情况下做到这一点？如果可能，我想保持一致并将 SqlCommand 构建为 StoredProcedure 类型。

我在想也许我可以先反映存储过程的参数名称，但想知道是否有另一种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:52:55.180

虽然有一个`SQLParameter`没有设置名称的构造函数，但如果不`SQLParameter`设置`ParameterName`属性，您实际上不能使用 a 。

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.parametername.aspx)（重点是我的）：

> ParameterName 以@paramname 的形式指定。**您必须在执行依赖参数的 SqlCommand 之前设置 ParameterName。**

在您的 SP 中，参数*将*有一个名称，请查看查询的定义以找到它。

如果事先不知道名称将是什么，请尝试查询`sys.parameters`表以找出特定存储过程采用的参数。

最好调用存储过程来指定哪个参数是哪个（特别是如果有多个参数）：

```
exec dbo.sp_StoredProcedureName @myParam = 1599800 
```

从 C# 中，一旦知道参数的名称，就可以按名称添加它：

```
cmd.Parameters.AddWithValue("@myParam", 1599800); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:22:20.567

当您创建您在问题中指定的类型的命令时，此命令将转换为动态 SQL 查询，该查询有点类似于以下代码段：

```
EXECUTE sp_executesql 'exec dbo.sp_storedprocName @FirstParam=value, ...' 
```

这里，@FirstName 是您在将其添加到 SqlCommand 对象时指定的参数的名称。如果不指定参数名称，则无法创建此类查询。

您可以使用 SQL Server 探查器查看由 ADO.NET 生成的查询。打开 SQL Server 分析器并查看查询的解释方式是一个很好的做法，因为它有助于避免我们在 ADO.NET 中编写查询时经常犯的错误

# javascript - 在变量的函数中显示 JSON 数组数据

> ID：13162849
> 
> 赞同：-3
> 
> 时间：2012-10-31T16:46:17.037
> 
> 标签：javascript, jquery, arrays, json, alert

O 想在变量函数中显示带有警报的数据`(test)`，这是我的代码，但它不起作用：

```
var Content = [{
    "01":[{"text":"blablablablabla","apicole":"abeille :o"}],
    "02":[{"text":"blobloblobloblo","apicole":"bzzzz :)"}],
    "03":[{"text":"blibliblibli","apicole":"bzzoooo ;)"}]
}];
var test = apicole ;
alert(Content[0][month][0].test); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:49:24.293

尝试使用括号而不是作为道具访问最终项目：

```
var Content = [{
    "01":[{"text":"blablablablabla","apicole":"abeille :o"}],
    "02":[{"text":"blobloblobloblo","apicole":"bzzzz :)"}],
    "03":[{"text":"blibliblibli","apicole":"bzzoooo ;)"}]
}];
month = '01';
var test = 'apicole' ;
alert(Content[0][month][0][test]);​ 
```

确保已定义该月份

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:48:48.733

那是因为月份是未定义的，至少在您发布的片段中是这样。此外，您在访问属性的方式之间波动。尝试：

```
alert(Content[0]["01"][0]["text"]); 
```

# java - 对 WSDL 的 Java Soap 请求

> ID：13162851
> 
> 赞同：0
> 
> 时间：2012-10-31T16:46:19.330
> 
> 标签：java, url, soap, wsdl

我有一个 wsdl url 如下：（这是用于测试和公开的）

[http://partnerportal.turkcell.com.tr/spgw/services/AuthenticationPort?wsdl](http://partnerportal.turkcell.com.tr/spgw/services/AuthenticationPort?wsdl)

我想通过肥皂向这个网址发出请求并得到回复。我怎样才能做到这一点？我应该在哪里寻找它？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:03:37.350

也许您还可以查看[Java API for WSDL](http://www.jcp.org/en/jsr/detail?id=110)或其他[问题](https://stackoverflow.com/questions/373350/simple-standalone-java-soap-web-service-client-from-wsdl-using-maven)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:57:44.947

您需要创建一个 Web 服务客户端。这是使用 Eclipse 创建基于 java 的客户端的[教程](http://javapapers.com/web-service/soap-web-service-introduction/)。

# macos - 如何编写 Applescript 按 Escape 键？

> ID：13162854
> 
> 赞同：17
> 
> 时间：2012-10-31T16:46:26.950
> 
> 标签：macos, applescript

我正在写一个苹果脚本。

我需要在其中编写代码，这意味着要点击转义按钮。

我不知道该怎么做。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-31T16:50:18.883

简单的，

```
tell application "System Events"
     key code 53
end tell 
```

# cocoa - 来自 YouTube 的原生（非网络视图）流式传输？

> ID：13162855
> 
> 赞同：0
> 
> 时间：2012-10-31T16:46:30.443
> 
> 标签：cocoa, youtube, video-streaming, youtube-api, web-scraping

我在 Mac App Store 中看到很多应用程序，例如[MiniTube](http://flavio.tordini.org/minitube)和[CloudPlay](http://cloudplay.fm)，它们似乎可以直接从 YouTube 流式传输高质量视频，而无需使用任何类型的嵌入式播放器。

但是，我没有看到任何通过记录的 API 执行此操作的方法。他们的抓取（例如[http://gitorious.org/minitube/minitube/blobs/master/src/video.cpp](http://gitorious.org/minitube/minitube/blobs/master/src/video.cpp)）是非法的/违反 TOS，还是仅仅是无证和不受支持？有更好的方法吗？

（特别是所谓的“chromeless” iframe 播放器实际上有大量的 chrome/user 交互，这更适合网站而不是原生应用程序。）

编辑：我想我的问题主要是针对官方 YouTube 开发人员的支持：是否正在根据 TOS 抓取流的页面？如果是，为什么允许这些应用程序保留在应用程序商店中，如果不是，那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:07:59.833

从未尝试过，但根据[这里](https://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/QT4FSwl3Rx8)的讨论，访问本机流是违反 TOS 的。他们还提到您可以通过 api 自由访问为移动设备制作的 rstp 流。

因此，我认为抓取页面是在您的应用程序中不使用嵌入式播放器的情况下获得更高质量视频的唯一方法。如果您可以接受较低的质量，请使用 rstp 方式。

[另一个关于同一主题的讨论](https://stackoverflow.com/questions/4700945/youtube-data-api-get-access-to-media-stream-and-play-java)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T19:09:14.147

任何抓取都会违反 YouTube 的服务条款。也没有可用的未记录 API。对于 iOS，最好的提供选项是使用[YouTube iframe embed](http://apiblog.youtube.com/2010/07/new-way-to-embed-youtube-videos.html)，但这将在 webview 中。对于 Android，YouTube 正在构建一个库以在没有 webview 的情况下进行播放。这是公告的视频[http://www.youtube.com/watch?v=3WFsx-u-q3Y&feature=player_embedded](http://www.youtube.com/watch?v=3WFsx-u-q3Y&feature=player_embedded)。它还没有推出，但我知道他们一直在努力工作，应该很快就会推出。

# bash - Bash For Loop：从变量开始递减

> ID：13162866
> 
> 赞同：0
> 
> 时间：2012-10-31T16:46:49.447
> 
> 标签：bash

我已经进行了一些搜索，这看起来应该可以工作，但事实并非如此，我很困惑。

我在 CentOS 机器上，想基本上将所有备份 1 个文件夹向上移动，限制为 60 个备份，并且该限制设置在变量 $BKPLIMIT 中。

```
for (( i=$BKPLIMIT; i==0; i-- )); do
    j=$(($i-1))
    if [ -d "backup.$j" ]; then
        echo "$i $j backup.$i backup.$j"
        #mv "backup.$j" "backup.$i"
    fi
done 
```

从我的调试来看，脚本没有进入循环。我很难过:(我也试过做 "$(seq $BKPLIMIT 0) 没用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T16:48:08.010

更改`i==0`为`i>0`或`i!=0`。循环条件必须为真才能执行循环。

# c# - C# - 属性与访问器方法？

> ID：13162867
> 
> 赞同：1
> 
> 时间：2012-10-31T16:46:53.120
> 
> 标签：c#, inheritance, properties

据我所知，属性用于提供访问器方法式的功能；然而，他们这样做是以牺牲正常的方法继承行为为代价的。与传统的 setter/getter 方法相比，使用属性有什么优势吗？属性和访问器方法的优缺点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:51:57.187

我想你可能会感到困惑。在您的示例中，上述方法应该可以访问。例如，给定这组类型，以下应该有效：

```
public class Base
{
    public virtual int Datum { get; set; }
}

public class Derived : Base
{
    public override int Datum
    {
        get { return 12; }
        // set method remains as normal, with just the get overriden
    }

    public void SetDatumMethod(int newValue)
    {
        Datum = newValue; // Datum as a property is still accessible
    }
} 
```

派生类仍然继承该属性。属性实际上只是 C# 中的语法糖（大多数情况下），因为编译器正在为您生成幕后的方法`set_Datum(int x)`。`get_Datum()`如上所示，仍然可以单独覆盖属性 get/set 方法。

使用属性的好处是它们具有额外的语义含义；它们以某种方式“包含”或“表示”数据，而不是生成数据的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:51:42.450

Visual Studio 调试器在观察对象时执行 getter 方法。也就是说，属性访问器在不可预测的时间执行，因此不应导致任何可辨别的副作用。滥用属性会导致难以解决的错误。

使用方法的另一个原因是订单检索可能是参数化的。

一个好的做法是让财产访问在计算上变得便宜；不应强制客户端代码将属性值放入局部变量 - 这是过早的优化。

# c# - 使用 kofax 图像控件为扫描的图像添加额外的空白

> ID：13162870
> 
> 赞同：1
> 
> 时间：2012-10-31T16:47:14.890
> 
> 标签：c#, .net, image, image-processing, kofax

**我要做什么：** 我正在尝试在扫描过程中创建一个额外的 1/4 英寸空白区域以附加到图像的顶部。

使用 Kofax Image Controls Toolkit 是否可以在以下事件之一中在扫描时在图像顶部添加额外的空白？

> *   _PageStart
> *   _PageEnd
> *   _PageAnnotate
> *   _PageDone

大多数可用的属性都是只读的......我知道我可以在开始时将扫描尺寸设置为 14 英寸，当扫描 11 英寸文档时，我会在图像底部获得额外的 3 英寸。我想实现相同的原则，但在文档的顶部，并且只有大约四分之一英寸高。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:33:42.053

所以在我所做的所有研究中，我试图让这成为可能，我得出的结论是，这实际上是不可能的......

这种方法的唯一缺点是事后的速度问题。它确实最终减慢了速度。希望这对其他人有帮助！如果对您有帮助，请点赞。;)

我最终做的不是使用 Kofax Image Controls 引发的 _PageAnnotate 事件，而我最终通过在 Kofax Scan 控件上设置 .hDCCreate = false 来关闭该事件。扫描时不创建 DC 会稍微加快处理速度，不会因图像的所有解压缩和压缩而使处理器陷入困境。

我没有使用内置的 Kofax Image Controls 事件 _PageAnnotate，而是使用了 _PageDone 事件，并从那里使用本机 c# 对象/函数来实现我所追求的。下面是我最终得到的代码。

```
if (!Imaging.AnnotateImage(sImageFileName, "This is my annotation..."))
{
    Debug.WriteLine("Scan Error!  Could not annotate the image.");
} 
```

我制作的课程代码“Imaging.cs”......

```
static class Imaging
{
    public static bool AnnotateImage(string sFilePath, string sText)
    {
        try
        {
            // Get an ImageCodecInfo object that represents the TIFF codec.
            ImageCodecInfo myImageCodecInfo = GetEncoderInfo("image/tiff");
            Encoder myEncoder = Encoder.Compression;
            EncoderParameters myEncoderParameters = new EncoderParameters(1);
            EncoderParameter myEncoderParameter = new EncoderParameter(myEncoder, (long)EncoderValue.CompressionCCITT4);
            myEncoderParameters.Param[0] = myEncoderParameter;

            //Create some global variables
            Point pointPosition = new Point(0, 0);
            PointF pPos = new PointF((float)pointPosition.X, (float)pointPosition.Y);
            Bitmap newBmp;
            Graphics g;
            Font fNewFont;
            SizeF sizeTextSize;
            Rectangle rectTextSize;

            //Set inital width and height variables
            int iW;
            int iH;
            int iAnnotationH = 44;

            using(Image iSource = Image.FromFile(sFilePath))
            {
                iW = iSource.Width;
                iH = iSource.Height;

                //Increase the height of the image
                iH += iAnnotationH;

                //Create the new bitmap object
                newBmp = new Bitmap(iW, iH);
                newBmp.SetResolution(200.0F, 200.0F);
                g = Graphics.FromImage(newBmp);
                g.Clear(Color.White);
                g.DrawImageUnscaled(iSource, 0, iAnnotationH, iW, iH);

                //Create the font object to draw the annotation text
                fNewFont = new Font("Verdana", 12);

                //Get the size of the area to be drawn then convert it to a rect
                sizeTextSize = g.MeasureString(sText, fNewFont);
                rectTextSize = new Rectangle(pointPosition.X, pointPosition.Y, (int)sizeTextSize.Width, (int)sizeTextSize.Height);

                //Draw a white rect
                g.FillRectangle(Brushes.White, rectTextSize);
                g.TextRenderingHint = System.Drawing.Text.TextRenderingHint.AntiAlias;
                g.DrawString(sText, fNewFont, Brushes.Black, pPos);
            }

            //Save the changed image
            newBmp.Save(sFilePath, myImageCodecInfo, myEncoderParameters);
        }
        catch
        {
            return false;
        }

        return true;
    }

    static ImageCodecInfo GetEncoderInfo(String mimeType)
    {
        int j;
        ImageCodecInfo[] encoders;
        encoders = ImageCodecInfo.GetImageEncoders();
        for (j = 0; j < encoders.Length; ++j)
        {
            if (encoders[j].MimeType == mimeType)
                return encoders[j];
        }
        return null;
    }
} 
```

# java - 文件 I/O - Java

> ID：13162873
> 
> 赞同：2
> 
> 时间：2012-10-31T16:47:22.377
> 
> 标签：java, file, file-io

我目前正在编写一个小程序，它从一个简单的文件中获取文本，并将其写入另一个文件。输入文件有点像“madlibs”类型的交易，带有我需要放置的令牌，如“”和“”。

文本：

`> One of the most <adjective> characters in fiction is named "Tarzan of the <plural-noun>." Tarzan was raised by a/an <noun> and lives in the <adjective> jungle in the heart of darkest <place>.`

代码：

```
import java.io.*;
import java.util.*;

public class Story {

public static void main(String[] args) throws FileNotFoundException {

    Scanner sc = new Scanner(System.in);
    System.out.print("Input file name? ");
    String infileName = sc.next();
    Scanner input = new Scanner(new File(infileName));

    System.out.print("Output file name? ");
    String outfileName = sc.next();
    PrintStream out = new PrintStream(new File(outfileName));

    while (input.hasNext()){

        String current = input.next();
        System.out.println(current);
        int openIndex = current.indexOf("<");
        int closeIndex = current.indexOf(">");
        current = current.substring(openIndex + 1, closeIndex - openIndex);
        System.out.println(current);

        if (current.equals("adjective")){
            System.out.print("Please enter an adjective: ");
            current = sc.next();
            out.print(current);
            out.print(" ");
        } else if (current.equals("plural-noun")){
            System.out.print("Please enter a plural noun: ");
            current = sc.next();
            out.print(current);
            out.print(" ");
        } else if (current.equals("noun")){
            System.out.print("Please enter a noun: ");
            current = sc.next();
            out.print(current);
            out.print(" ");
        } else if (current.equals("place")){
            System.out.print("Please enter a place: ");
            current = sc.next(); 
            out.print(current);
            out.print(" ");
        } else {
            out.print(current);
            out.print(" ");
        }
    }
}
} 
```

这是我似乎遇到的问题：只有用户输入的单词被打印到“out1.txt”或其他任何内容中，并且每个单词之间有许多空格。

任何帮助表示赞赏，感谢男孩和女孩！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:07:38.720

问题来自普通词，即不是“<variables>”：

```
int openIndex = current.indexOf( "<" );    // returns -1
int closeIndex = current.indexOf( ">" );   // returns -1 too
current = current.substring( openIndex + 1, closeIndex - openIndex );
// at this place for a normal word current is empty 
```

你必须添加一些“如果”

```
String current = input.next();
int openIndex = current.indexOf( "<" );
if( openIndex > -1 )
{
    int closeIndex = current.indexOf( ">" );
    current = current.substring( openIndex + 1, closeIndex - openIndex );
}
System.out.println( current ); 
```

另一个问题来自令牌 [."]（在 [] 内），您的代码仅采用 <> 和 . 内的字符。" 丢失了。

```
String current      = input.next();
String cstStrBefore = "";
String cstStrAfter  = "";
int openIndex = current.indexOf( "<" );
boolean var = ( openIndex > -1 );
if( var )
{
   int closeIndex = current.indexOf( ">" );
   cstStrBefore = current.substring( 0, openIndex );
   cstStrAfter  = current.substring( closeIndex + 1 );
   current      = current.substring( openIndex + 1, closeIndex - openIndex );
} 
```

这是我使用的整个 Java 7 代码：

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.PrintStream;
import java.util.Scanner;

public class Story {
   public static void main( String[] args ) throws FileNotFoundException {
      Scanner     sc    = new Scanner( System.in );
      Scanner     input = new Scanner( new File( "Story.txt" ));
      PrintStream out   = new PrintStream( "Story-out.txt" );
      while( input.hasNext()) {
         String current      = input.next();
         String cstStrBefore = "";
         String cstStrAfter  = "";
         int openIndex = current.indexOf( "<" );
         boolean var = ( openIndex > -1 );
         if( var ) {
            int closeIndex = current.indexOf( ">" );
            cstStrBefore = current.substring( 0, openIndex );
            cstStrAfter  = current.substring( closeIndex + 1 );
            current      =
               current.substring( openIndex + 1, closeIndex - openIndex );
         }
         System.out.println( current );
         switch( current ) {
         case "adjective"  : System.out.print( "Please enter an adjective: " ); break;
         case "plural-noun": System.out.print( "Please enter a plural noun: " ); break;
         case "noun"       : System.out.print( "Please enter a noun: " ); break;
         case "place"      : System.out.print( "Please enter a place: " ); break;
         }
         if( var ) {
            current = sc.next();
         }
         out.print( cstStrBefore + current + cstStrAfter + ' ' );
      }
      sc.close();
      input.close();
      out.close();
   }
} 
```

我建议你使用 Netbeans 或 Eclipse 来开发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:13:16.530

在使用后关闭任何打开的流也是一种很好的做法。（尽管 JVM 可能会处理这个问题）

out.close(); 输入.close();sc.close();

在您的时间之外{}

# c# - 在空字符文字上拆分字符串。将字符串的符号拆分为数组

> ID：13162879
> 
> 赞同：-1
> 
> 时间：2012-10-31T16:47:44.730
> 
> 标签：c#, arrays, string, split, explode

我有以下字符串=

```
"00101010" 
```

我需要以下数组/列表：

```
var.ElementAt(0) = "0"
var.ElementAt(1) = "0"
var.ElementAt(2) = "1"
var.ElementAt(3) = "0"
var.ElementAt(4) = "1"
var.ElementAt(5) = "0"
var.ElementAt(6) = "1"
var.ElementAt(7) = "0" 
```

如果我尝试 string.split('') 编译器会抱怨空字符文字。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T16:49:39.903

您可以使用 Linq：

```
var chars = "00101010".Select(c => c.ToString()).ToArray(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-31T16:50:20.580

这应该这样做：

```
string mys = "hello";
char[] thechars = mys.ToCharArray(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-31T16:50:51.597

使用[ToCharArray](http://msdn.microsoft.com/en-us/library/ezftk57x.aspx)。但更相关的问题是您需要对结果做什么，因为 string 已经实现了`IEnumerable<char>`允许您对字符串中的字符进行迭代和做任何您需要的事情。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-31T16:50:22.060

如果要获取字符串中的特定字符，只需索引字符串即可；无需将其转换为任何内容的数组：

```
var s = "0123";
var c = s[0]; // -> '0' 
```

如果您真的需要字符串而不是字符，那么蒂姆的答案将起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T17:33:29.960

有一个单行 reg-ex 解决方案返回 string[] 而不是 char[]：

```
 var arr = Regex.Split(s, "(?<=.)(?=.)"); 
```

如果有单行非 Linq 解决方案或更短的正确正则表达式，那会很有趣。

注意：我会在其他 reg-ex 答案下发布，但由于缺少 @ 字符串前缀，它似乎已被删除，并且仅限于拆分数字。

# css - 网页中未知尺寸的图片

> ID：13162880
> 
> 赞同：0
> 
> 时间：2012-10-31T16:48:01.370
> 
> 标签：css, image

在页面上为尺寸直到运行时未知的图像分配空间的最佳方法是什么，最好不要超出 HTML 和 CSS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:52:05.357

这个问题很笼统。

如果您事先不知道图像尺寸，那么一种安全的方法是让图像浮动（向左或向右）文本。

如果图像将被放置在表格单元格中，请确保该单元格是可扩展的（即您没有指定宽度和诸如 之类的东西`overflow: hidden`）。

# php - php：使用cookies/用户认证

> ID：13162887
> 
> 赞同：0
> 
> 时间：2012-10-31T16:48:23.877
> 
> 标签：php, authentication

我正在寻找对我的网站进行安全用户身份验证的最佳方式。

我正在考虑以下解决方案：

首次登录：要求登录数据 -> 生成由 IP 地址、密码和 cookie 到期日期组成的哈希码 -> 将该哈希码存储到数据库中，但也存储到 cookie 中。

下次登录：检查 cookie，在我的用户数据库中查找哈希码。

那会是最安全的方法吗？或者使用cookies会有问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:51:57.393

通常，您会希望在浏览器中存储一个 cookie，该 cookie 指向数据库中某处表明他是已知用户的记录。您要确保的一件事是该 cookie id 是全球唯一的。所以，是的，对各种独特属性使用哈希（或 md5 或 sha1）很可能就足够了。在数据库中的`unique`该列上添加一个也是一个好主意。

另一个想法是在您的 users 表中有一个列，在`cookieid`创建条目时生成它并确保它的唯一性。然后每次该用户登录时使用它。如果您真的担心安全性，如果您想更新 cookie，您可以每隔一段时间使用后端脚本更改每个用户该列的所有值。

`will there be problems using cookies?`

除了与所有浏览器不兼容的较新的 html5 功能外，cookie 确实是保存登录信息的唯一方法。转到您使用的大网站，ebay、amazon、wellsfargo。擦除所有 cookie 和私人数据，然后去那里登录。然后查看您的 cookie。他们在里面放了什么？如果它对这些人来说足够好，那么它可能对你来说就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T16:52:01.627

最好和最简单的方法是使用 php-sessions。

```
<?php
session_start();
$_SESSION["user"] = "foo";
$_SESSION["ip"] = "123.132.123.132";
?> 
```

# android - Android ViewGroup 代码

> ID：13162888
> 
> 赞同：0
> 
> 时间：2012-10-31T16:48:31.277
> 
> 标签：android, animation, viewgroup, ticker

我正在开发一个与新闻代码具有相同功能的 Android 组件。它是一个*ViewGroup*，它采用一组*View*并为它们设置动画以创建 Ticker 的效果。

我已经实现了*onMeasure*和*onLayout*方法，并且我有一个计时器，它每 X 次调用一个方法来刷新每个*View*的位置。可以说，它基本上将每个孩子的位置移动了 5 个像素。

到目前为止一切都很好，但问题是*视图*开始移动几秒钟后，它们开始相互重叠，好像它们中的一些比其他的移动得更快。我正在移动具有相同数量像素的所有*视图*，因此它们应该以相同的速度移动。此问题仅出现在某些设备（如 Galaxy SIII）上，并且在其他设备上运行良好。

知道为什么会这样吗？

# actionscript-3 - removeChild 正在删除我所有的电影剪辑

> ID：13162890
> 
> 赞同：0
> 
> 时间：2012-10-31T16:48:34.297
> 
> 标签：actionscript-3, flash, bitmapdata, removechild, addchild

我正在制作一个用正方形遮挡图像的工具。我想要发生的是有一个弹跳球，它击中方块并使它们消失。但是，removeChild 命令无法正常工作。我将其设置为使用空影片剪辑填充图像并为它们着色。但是，当我单击正方形时，我遇到了父母/孩子的问题。我一直遇到这个错误。“提供的 DisplayObject 必须是调用者的子对象。” 我想不出一种将 eventListeners 分配给每个单独方块的好方法。我确定这很明显。这是我的代码。先感谢您

编辑：如果我让它工作，它会删除正方形的所有实例，而不仅仅是我点击的那个。

这是我的代码

```
 var mc:MovieClip = bgIMG;
 var bd:BitmapData = new BitmapData(mc.width,mc.height);
 bd.draw(mc);

 var _img:Bitmap = new Bitmap(bd);
 var _imgNodes:Array = [];
 var _tiledImg:MovieClip = container_tiled_img;

 var pad:int = 0;
 var rows:int = 10;
 var cols:int = 10;
 var zero:Point = new Point();

 createImgNodeGrid(rows, cols, pad);
 pixelateNodes(_imgNodes);

 function removeMC(e:MouseEvent)
 {//removes the movie clip
 trace(e.currentTarget.x);
stage.removeChild(e.currentTarget.parent.parent);
 }

 function pixelateNodes(nodes:Array = null):void
 {
for each (var node:Bitmap in nodes)
{
    node.bitmapData.fillRect(node.bitmapData.rect, avgColor(node.bitmapData));

}
 }

 function avgColor(src:BitmapData):uint
 {
var A:Number = 0;
var R:Number = 0;
var G:Number = 0;
var B:Number = 0;

var idx:Number = 0;
var px:Number;

for (var x:int = 0; x < src.width; x++)
{
    for (var y:int = 0; y < src.height; y++)
    {
        px = src.getPixel32(x,y);

        A +=  px >> 24 & 0xFF;
        R +=  px >> 16 & 0xFF;
        G +=  px >> 8 & 0xFF;
        B +=  px & 0xFF;

        idx++;
    }
}

A /=  idx;
R /=  idx;
G /=  idx;
B /=  idx;

return A << 24 | R << 16 | G << 8 | B;
 }

 function createImgNodeGrid(rows:int = 1, cols:int = 1, pad:Number = 0):void
 {
var w:Number = _img.width / rows;
var h:Number = _img.height / cols;
var numNodes:int = rows * cols;

_imgNodes = [];

var nodeCount:int = 0;
for (var i:int = 0; i < rows; i++)
{
    for (var j:int = 0; j < cols; j++)
    {
        // get area of current image node
        var sourceRect:Rectangle = new Rectangle(i * w, j * h, w, h);

        // copy bitmap data of current image node
        var tempBd:BitmapData = new BitmapData(w,h,true);
        tempBd.copyPixels(_img.bitmapData, sourceRect, zero);

        // place image node bitmap data into sprite
        var imgNode:Bitmap = new Bitmap(tempBd);
        imgNode.x = i * (w + pad);
        imgNode.y = j * (h + pad);

        // store each image node
        //_imgNodes.push(imgNode);
        _imgNodes[nodeCount++] = imgNode;

        // add each image node to the stage
        _tiledImg.addChild(imgNode);
        _tiledImg.addEventListener(MouseEvent.CLICK,removeMC);
    }
}
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:05:05.087

如果我正确地遵循，您正在尝试删除 MouseClick 上的 imgNode。如果是这种情况，您应该将 removeMC 函数更改为：

```
function removeMC(e:MouseEvent)
{
    //removes the movie clip
    trace(e.target);
    _tiledImg.removeChild(event.currentTarget);
} 
```

此外，您不应在 for 循环中添加侦听器，而应将其添加到 for 循环之外（因为您只是将侦听器添加到 _tiledImg 并且在 for 循环中不会改变）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:58:44.580

始终从正确的父母中删除孩子的一种简单方法是执行以下操作

```
function removeMC(e:MouseEvent)
{
    //removes the movie clip
    var target:Sprite = event.currentTarget as Sprite;
    target.parent.removeChild(target)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T18:40:49.640

您遇到的问题是将事件添加到节点的父节点（_tiledImg）。

```
function createImgNodeGrid(rows:int = 1, cols:int = 1, pad:Number = 0):void
{
  var w:Number = _img.width / rows;
  var h:Number = _img.height / cols;
  var numNodes:int = rows * cols;

  _imgNodes = [];

  var nodeCount:int = 0;
  for (var i:int = 0; i < rows; i++)
  {
    for (var j:int = 0; j < cols; j++)
    {
        // get area of current image node
        var sourceRect:Rectangle = new Rectangle(i * w, j * h, w, h);

        // copy bitmap data of current image node
        var tempBd:BitmapData = new BitmapData(w,h,true);
        tempBd.copyPixels(_img.bitmapData, sourceRect, zero);

        // place image node bitmap data into sprite
        var imgNode:Bitmap = new Bitmap(tempBd);
        imgNode.x = i * (w + pad);
        imgNode.y = j * (h + pad);

        // store each image node
        //_imgNodes.push(imgNode);
        _imgNodes[nodeCount++] = imgNode;

        // you need a container since you can not attach event listeners to a BitMap
        var sprite:Sprite = new Sprite()
        sprite.mouseChildren = false;
        sprite.addEventListener(MouseEvent.CLICK,removeMC);
        sprite.addChild(imgNode);

        // add each image node to the stage
        _tiledImg.addChild(sprite);
       // _tiledImg.addEventListener(MouseEvent.CLICK,removeMC);
    }
  }
}

function removeMC(e:MouseEvent)
{
    var target:Sprite = event.currentTarget as Sprite;
    target.parent.removeChild(target)
} 
```

# iphone - iPhone 5（或仅视网膜）resizableImageWithCapInsets 无法按预期工作

> ID：13162894
> 
> 赞同：1
> 
> 时间：2012-10-31T16:48:57.900
> 
> 标签：iphone, uitableview, image-resizing, iphone-5

我没主意了。我正在尝试使用`resizableImageWithCapInsets`在我的表格单元格上设置背景图像。我预期的上限插图在 iPhone 模拟器、iPhone 3GS 设备上运行良好，但**在我的 iPhone 模拟器（4 Retina）或 iPhone 5 模拟器/设备上却不行。**

视网膜（iPhone4 或 iPhone5）版本 ![在此处输入图像描述](../Images/fe1eeb9b91e06bb6bec19658dfe19036.png)

普通版 ![在此处输入图像描述](../Images/c3faa3595d453b250be7d8a39b94bab4.png)

它也恰好是中间表格单元格的问题。它适用于我的顶部和底部表格单元格图像，但似乎不适用于中间单元格。

`define UIEDGE_INSET_TABLE_CELL_MIDDLE UIEdgeInsetsMake(1.0, 2.0, 1.0, 2.0)`

然后像这样创建图像：

`[[UIImage imageNamed:@"table-middle-cell"] resizableImageWithCapInsets:UIEDGE_INSET_TABLE_CELL_MIDDLE];`

![在此处输入图像描述](../Images/978fbec9e74cc7a16571431a7b0d2357.png)：这是我的表格单元格的常规版本

![在此处输入图像描述](../Images/4817d0face07b51e498ee88b3f1926b0.png)：这是我的视网膜版本的表格单元格

附件是我的表格单元格可调整大小的图像，iPhone 4 与 iPhone 5 的屏幕截图。有人知道我的问题出在哪里吗？

# javascript - JavaScript 循环在“localStorage.removeItem”处停止

> ID：13162896
> 
> 赞同：1
> 
> 时间：2012-10-31T16:49:05.293
> 
> 标签：javascript, local-storage

为什么“localStorage.removeItem”会停止循环？如果我删除“localStorage.removeItem”并且只留下“警报”，它会循环整个事情，但是使用“localStorage.removeItem”它会在第一次匹配时停止。

```
function removeTask() {
    for (i=0; i < localStorage.length; i++){
        checkbox = document.getElementById('utford'+i);
        if (checkbox.checked == true) {
            alert(i);
            localStorage.removeItem(localStorage.key(i));
        }
    }
    printList();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T16:58:10.873

如果您删除一个项目，这些键将向下移动一个索引。您需要向后循环。

```
function removeTask() {
    for (var i=localStorage.length-1; i>=0; i--){
        var checkbox = document.getElementById('utford'+i);
        if (checkbox.checked == true) {            
            localStorage.removeItem(localStorage.key(i));
        }
    }
    printList();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:04:50.733

您正在迭代一个类似数组的对象，同时删除它的条目。这不起作用，因为每次删除都会混淆条目顺序。

考虑这个例子。

第一次迭代删除条目 #1：

```
Entry   key             value
#1      my-first-key    my-first-value
#2      my-2nd-key      my-2nd-value 
```

第二次迭代尝试删除条目 #2：

```
Entry   key             value
#1      my-2nd-key      my-2nd-value
???     ???             ??? 
```

根据我对您的代码的理解，我建议您改用字符串键。然后，您可以选择与元素 ID 相同的键名。

# webstorm - 如何锁定 WebStorm 中的工具栏

> ID：13162901
> 
> 赞同：0
> 
> 时间：2012-10-31T16:49:22.847
> 
> 标签：webstorm, menubar

我是 JetBrains WebStorm IDE 的新手。我真的很喜欢它，尤其是对于我的 JavaScript 开发，但我找不到如何设置一个非常简单的首选项。我经常使用“项目”和“结构”工具栏，但每次其中一个工具栏失去焦点时，工具栏就会隐藏。有没有办法锁定工具栏以防止它们隐藏，以便它们始终可见？这似乎是非常明显的事情，但也许不是......我已经浏览了我可以看到但没有找到任何有效的偏好设置。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:50:52.770

Enable the **Pinned Mode**:

![pinned mode](../Images/fe71ef934af07ccdc4959c625dc21663.png)

If you also enable **Split Mode**, you can have both `Project` and `Structure` visible at the same time on the same side.

# java - 有没有办法在Java中设置变量的界限？

> ID：13162907
> 
> 赞同：2
> 
> 时间：2012-10-31T16:49:40.433
> 
> 标签：java, bounds

例如我可以有一个变量

```
int x; 
```

并告诉编译器 x 永远不能大于 20 或小于 -20 而不必编写一个方法来检查循环中每次迭代的值？（我应该在这里提到这是针对基于矢量的游戏的速度变量。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T16:58:37.803

仅通过 setter 方法设置变量。在此方法内部，如果尝试将值设置为超出范围，则抛出异常。请注意，这不适用于编译器方面，而是在运行时，我认为这种检查是必要的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T16:51:29.573

不，您必须在程序中手动检查它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T16:53:26.050

```
assert  -20 < x && x < 20 : "Out of range!"; 
```

使用 -ea 参数执行，java 将检查条件，没有 -ea 性能处于最佳状态。

如果断言不会被验证[java.lang.AssertionError](http://docs.oracle.com/javase/7/docs/api/java/lang/AssertionError.html)将被抛出

# fortran - Fortran 写语句：这个“9999”在做什么？

> ID：13162910
> 
> 赞同：1
> 
> 时间：2012-10-31T16:49:54.670
> 
> 标签：fortran

我无法弄清楚这个“9999”在e20.8前面做什么，在这个fortran write语句的标签中。

Is 不引用代码中的任何其他行。换句话说，在程序的其他地方没有它引用的标记为 9999 的行。

```
write(11,'(9999e20.8)') (9999.0, i=1,2*(numant+numunique)) 
```

我很困惑——我还没有从谷歌网络搜索中找到答案，尽管我认为我对 write 语句的语法和格式有了大致的了解。

提供的信息是否足够有意义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T16:56:44.523

这是一个重复计数；格式代码的一般格式是 (count)(type)(format)，例如，如[本教程](http://math.scu.edu/~dsmolars/ma169/notesfortran.html#format)中所述。

与基于 C 的语言不同，未使用的格式化代码会被简单地忽略，因此这一行本质上是说“以科学格式（小数点后 8 位）写出与以下输出列表中一样多的实数”。（如果您不喜欢这种方式，使用硬编码的“足够大”的数字，则必须以编程方式生成格式字符串以获得“正确的”重复代码。

输出列表是一个[隐含的循环](http://jblevins.org/log/array-write)，它生成数字 9999.0`2*(numant+numuniqe)`次。

# libreoffice-calc - 如何删除手动添加的分页符？

> ID：13162911
> 
> 赞同：0
> 
> 时间：2012-10-31T16:49:57.817
> 
> 标签：libreoffice-calc, page-break

**我在我的电子表格中添加了一个分页符，但现在我想在 page 2**的顶部添加更多行。作为这样做的一部分，我想删除分页符。

如何删除现有的分页符（我之前添加的）？

我浏览了所有菜单和选项，但找不到任何东西。我尝试在几个地方为第 2 页添加新行，但它们一直落入第 1 页。我希望在第 22 行但在第 2 页上添加新行。

显示我正在尝试删除的分页符的屏幕截图（蓝线）：

![分页符我正在尝试删除](../Images/22bbb5a06f62ee35c7ec8d1feeb6f74d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T08:33:10.920

去

```
[Edit],[Delete Page Break] 
```

这是倒数第 5 项

迈克尔的注意事项：您需要位于第 2 页的第一行，以便“删除分页符 - 行”不会变灰！

![在此处输入图像描述](../Images/0fa1cd29095fba827ed53219a0d379bf.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-28T20:57:06.263

它在 LibreOffice 6.0.4.2 下可用`Sheet -> Delete Page Break -> Row or Column Break`

# java - 声明后实例化数组会导致编译错误“表达式的非法开始，而不是语句，；预期”

> ID：13162922
> 
> 赞同：1
> 
> 时间：2012-10-31T16:50:36.040
> 
> 标签：java, arrays

在编写这个二维 int 数组时，我收到 netbeans IDE 的编译错误，这就是我初始化它的方式：

```
private int[][] anArray; 
```

下一部分将在文件稍后的方法中声明。

```
anArray = {{15501, 1}, {215, 3}, {1693, 72}}; 
```

使用 NetBeans IDE 我收到编译错误

> 非法的表达式开头，不是语句，；预期的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T16:51:29.687

尝试：

```
anArray = new int[][] {{15501, 1}, {215, 3}, {1693, 72}}; 
```

数组像对象一样被实例化，因此您需要使用`new`和数组类型。

如果您在与变量标识符相同的行中直接实例化，这将起作用：

```
int[][] anArray = {{15501, 1}, {215, 3}, {1693, 72}}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T16:52:31.640

你应该做

```
private int[][] anArray = { { 15501, 1 }, { 215, 3 }, { 1693, 72 } }; 
```

或者您想稍后初始化它，您可以使用`new`运算符

```
anArray = new int[][] { { 15501, 1 }, { 215, 3 }, { 1693, 72 } }; 
```

# html - 如何实现固定标题工具栏

> ID：13162925
> 
> 赞同：0
> 
> 时间：2012-10-31T16:50:37.647
> 
> 标签：html, css

我正在尝试实现一个固定的标题栏，它适用于所有类型的浏览器和移动浏览器。

在下面的代码中，是否可以避免内容元素中`style="padding-top:100px"`的属性。`div`我不想手动计算`100px`距离。

```
<html>

<body>
    <div id="xheader" style="position:fixed; width:100%; top:0; left:0; right:0; z-index:1000; border:solid 1px red">
        <p>FIXED BAR</p>
    </div>

    <div id="xcontainer">
        <p>Line1</p>
        <p>Line2</p>
        <p>Line3</p>
        <p>Line4</p>
        <p>Line5</p>
        <p>Line6</p>
        <p>Line7</p>
        <p>Line8</p>
        <p>Line9</p>
        <p>Line10</p>
        <p>Line11</p>
        <p>Line12</p>

        <p>Line1</p>
        <p>Line2</p>
        <p>Line3</p>
        <p>Line4</p>
        <p>Line5</p>
        <p>Line6</p>
        <p>Line7</p>
        <p>Line8</p>
        <p>Line9</p>
        <p>Line10</p>
        <p>Line11</p>
        <p>Line12</p>

        <p>Line1</p>
        <p>Line2</p>
        <p>Line3</p>
        <p>Line4</p>
        <p>Line5</p>
        <p>Line6</p>
        <p>Line7</p>
        <p>Line8</p>
        <p>Line9</p>
        <p>Line10</p>
        <p>Line11</p>
        <p>Line12</p>

    </div>

</body> 

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:55:58.727

使用该 div 的类， `padding-top: 100px` 否则没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:04:35.643

我将使用 jQuery 来做到这一点：

```
var xheaderHeight = $('div#xheader').height();
$('div#xcontainer').css('padding-top',xheaderHeight); 
```

感谢您的回复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T21:07:28.320

因为标题元素是从文档流中取出的（by `position:fixed;`），所以您确实需要*一些东西*来将内容推送到标题下方。但是您可以使用比像素更灵活的单位：

```
padding-top: 1.5em; 
```

看看这个[JSFiddle](http://jsfiddle.net/bVFRh/1/)。

由于 ems 是相对于 parent 的字体大小，所以这里的 padding 会放大或缩小不同的字体大小。或者您可以只使用`%`指定填充。

# java - 在 Scala 中实现带条件的嵌套循环

> ID：13162926
> 
> 赞同：4
> 
> 时间：2012-10-31T16:50:38.940
> 
> 标签：java, scala

在 Scala 中实现以下代码的惯用方法是什么？

```
for (int i = 1; i < 10; i+=2) {
  // i = 1, 3, 5, 7, 9
  bool intercept = false;

  for (int j = 1; j < 10; j+=3) {
    // j = 1, 4, 7
    if (i==j) intercept = true
  }

  if (!intercept) {
    System.out.println("no intercept")
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T16:58:16.443

您可以使用[`Range`](http://www.scala-lang.org/docu/files/collections-api/collections_18.html)和朋友：

```
if (((1 until 10 by 2) intersect (1 until 10 by 3)).isEmpty)
  System.out.println("no intercept") 
```

这不涉及嵌套循环（您在标题中提到），但它是在 Scala 中获得相同结果的更惯用的方式。

编辑：正如 Rex Kerr 指出的那样，上面的版本不会每次都打印消息，但以下版本会：

```
(1 until 10 by 2) filterNot (1 until 10 by 3 contains _) foreach (
   _ => println("no intercept")
) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-31T17:01:10.830

编辑：哎呀，你打印每个`i`. 在这种情况下：

```
for (i <- 1 until 10 by 2) {
  if (!(1 until 10 by 3).exists(_ == i)) println("no intercept")
} 
```

但是，在这种情况下，您实际上并不需要条件：该`contains`方法将检查您想要在内循环中检查的内容。

```
for (i <- 1 until 10 by 2) {
  if (!(1 until 10 by 3).contains(i)) println("no intercept")
} 
```

# javascript - 使用 Node.js 加载全球化文化？

> ID：13162928
> 
> 赞同：1
> 
> 时间：2012-10-31T16:50:46.023
> 
> 标签：javascript, node.js, internationalization, jquery-globalization

我正在使用带有 Node.js 的[jQuery Globalize 。](https://github.com/jquery/globalize)他们有一个`package.json`文件，所以我可以简单地将它用作模块和`require`它。但是，默认情况下它不会加载所有文化。我想知道加载文化的正确方法是什么？我可以去做类似的事情

```
require('./node_modules/globalize/lib/cultures/globalize.culture.es-US.js') 
```

并直接加载文件，但这似乎不太优雅。有没有“正确”的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:07:08.830

如果您想支持所有文化，只需一个要求：

```
require("./node_modules/globalize/lib/cultures/globalize.cultures.js"); 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:59:00.420

如果你还没有这样做，你应该使用[Globalize NPM 包。](https://npmjs.org/package/globalize)

但是，似乎没有适当的方法来加载包含的文化。我认为预期的用途是使用[Grunt](http://gruntjs.com/)将您需要的文化与 Globalize 代码本身一起打包。

# eclipse - 我在哪里可以下载 Eclipse 插件开发 SDK 的 Javadocs

> ID：13162931
> 
> 赞同：1
> 
> 时间：2012-10-31T16:50:52.340
> 
> 标签：eclipse, eclipse-plugin, javadoc

我正在开发 Eclipse 插件。在哪里可以下载 Eclipse 插件开发 API 的 Javadocs？我可以在[这里](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Foverview-summary.html)在线引用它们，但我想下载它们以供离线参考并将它们与插件 jar 相关联。如果我也能以某种方式将源代码与插件 jar 相关联，那就更好了。我正在使用朱诺。对此的任何帮助表示赞赏。

谢谢！

更新：我尝试安装 Eclipse RCP，然后将 Eclipse Java EE 中的插件包安装到它上面。因此我可以看到源代码和 Javadoc。我不确定这是否是包含 RCP Javadoc 和源代码的唯一/最佳方式，但它似乎对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T04:44:10.110

您正在寻找 Eclipse SDK。我假设你在 Juno 上运行。两种可能：

1.  从头开始并从下载页面下载 Eclipse Classic 发行版
2.  将此更新站点添加到您的安装程序：http: [//download.eclipse.org/eclipse/updates/4.2](http://download.eclipse.org/eclipse/updates/4.2)并安装 Eclipse SDK。

# javascript - Three.js 如何通过函数调用使用缩放？

> ID：13162935
> 
> 赞同：0
> 
> 时间：2012-10-31T16:51:04.190
> 
> 标签：javascript, three.js

我在场景中使用轨迹球控件，除了鼠标缩放功能外，我还想实现一个缩放按钮（它调用将执行缩放的 javascript 函数）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:58:50.917

我正在使用单击左键或右键并按住以进行对数放大或缩小。

```
/// listeners
document.addEventListener('contextmenu', function(e){e.preventDefault();}, false);
document.addEventListener('mousedown', toggleOn, false)
document.addEventListener('mouseup', toggleOff, false)

/// controls
        function toggleOn(event){
            if(t==0){
                button = event.which
                t=setInterval('mouseDown()',speed);
            }
        }
        function toggleOff(){
            if(t!=0){
                clearInterval(t);
                t=0;
            }
        }

        function mouseDown (event){
                if (button == 1){
                    camera.fov += speed                 
            } else if (button == 3){        
                    camera.fov -= speed 
                    }

        camera.updateProjectionMatrix();
        render(); 
```

# android - 我应该使用什么从 HTML 中获取数据

> ID：13162936
> 
> 赞同：0
> 
> 时间：2012-10-31T16:51:24.057
> 
> 标签：android, android-listview

我希望你能指出我正确的方向，我正在制作一个获取网站内容的 Android 应用程序，目前我的应用程序在 webview 中加载 dat 网页，但页面对于几乎每个屏幕来说都很宽，所以我有另一个主意：

webcontent(html) -> 使用 android 获取表格的内容 -> 制作一个列表视图 -> 当向右滑动时，你会得到另一天。

网络内容是学校的时间表，一个例子是这个[http://intranet.staring.nl/toepassingen/rooster/lochem/2W2/2012102920121104/2W01532.htm](http://intranet.staring.nl/toepassingen/rooster/lochem/2W2/2012102920121104/2W01532.htm) 我想要的是每天都在一个列表视图中用户可以左右交换来改变那里看到的日子。

现在我已经被困在从 html 源代码中制作列表视图了，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:54:58.073

**您应该使用网络**服务访问这些数据...

因为否则你需要下载大量无用的 HTML 代码 + 解析它......

但是，如果这是您想要的方式，或者您无法控制该网站，您可以读取文件并使用我猜的正则表达式简单地解析它。

以下是我找到的一些工具：

*   [JTidy](https://stackoverflow.com/questions/238036/java-html-parsing)
*   [汤](http://jsoup.org/)

[用Java解析HTML？](https://stackoverflow.com/questions/9664778/parsing-html-in-java)

# javascript - 如何将单个列表（不同的文本长度）分成两个相等的列，而不在列表项之间创建空白的垂直空间？

> ID：13162937
> 
> 赞同：0
> 
> 时间：2012-10-31T16:51:27.173
> 
> 标签：javascript, css, list

我必须处理通过 php 输出的动态代码，而且我只有 css 和 javascript 可供使用。

我有一列列表项（不使用

*   标签），我需要分成两列（顺序无关紧要）。目前，我给每个项目一个'float：left;'的css 和所有其他项目（使用javascript）'clear：left;'的css 并具有预定义的宽度，以便它们平均分为两列。

    但问题在于，在当前设置中，当左侧列上的列表项很高时，右侧较短的列表项会在其下方获得一个空白区域。

    有没有办法将列表编码成两列而不创建任何不必要的垂直空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:26:47.443

将列表中的元素堆叠在一个 div 中。然后确定保存列表的元素的高度。现在在网站上创建一个新列表。遍历列表元素并弄乱高度+边距+等，直到列表项的高度大于列表项总高度的一半。

对于之后的每个元素，您将它们移动到新列表中。

这是一个用 mootools 编写的简短示例，如果您想尝试一下，请使用 fiddle。转换为 jQuery 或纯 javascript 应该很容易。如您所见，这提供了更均匀的元素分布。

```
var height = $('wrapper').getCoordinates().height;
var listHeight = 0;

var leftColumn = new Element('ul', {class: 'list'});
var rightColumn = new Element('ul', {class: 'list'});

$$('#wrapper li').each(function(li){
   listHeight = listHeight + li.getSize().y;

    if (listHeight < height/2){
        leftColumn.grab(li);
    }
    else{
        rightColumn.grab(li);                                   
    }
});
var wrapper = $('wrapper');
wrapper.getChildren().destroy();
wrapper.grab(leftColumn);
wrapper.grab(rightColumn); 
```

[http://jsfiddle.net/7t324/1/](http://jsfiddle.net/7t324/1/)

真正均匀的方式（不破坏列表项并且不介意顺序）如果您真的想要均匀分布（并且顺序并不重要），那么您可以按高度对列表元素进行排序。然后向左侧 ul 添加一个元素，下一步是向右侧 ul 添加元素，直到它的高度大于左侧。然后你对左边做同样的事情，依此类推。

如果它的外观是均匀的（按高度排序），您可以在添加它们之前更改列表项的顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:31:05.560

这是一个小提琴。由于您可以使用 javascript，因此我假设您可以加载 jQuery。

[http://jsfiddle.net/manishie/r4zkp/3/](http://jsfiddle.net/manishie/r4zkp/3/)

**HTML：**

```
<div id="wrapper">
    <ul>
        <li>one</li>
        <li>two</li>
        <li>three three three three three three three three </li>
        <li>four</li>
        <li>five</li>
        <li>six</li>
        <li>seven</li>
    </ul>
</div>​ 
```

**CSS：**

```
.left_list, .right_list {
    float: left;
    width: 100px
} 
```

**Javascript：**

```
$(function() {
    left_list = $('li:even');
    right_list = $('li:odd');
    $('#wrapper').html('');
    $('#wrapper').append('<div class="left_list">');
    $('.left_list').html(left_list);
    $('#wrapper').append('<div class="right_list">');
    $('.right_list').html(right_list);
});

​ 
```

# cvs - CVS - 显示自特定标签以来提交的文件

> ID：13162943
> 
> 赞同：1
> 
> 时间：2012-10-31T16:51:49.947
> 
> 标签：cvs

有没有办法显示自特定标签以来已更改和提交的任何文件？

例如，文件 index.html 当前的版本为 1.5。修订版 1.3 被标记为“prod”。自 1.3 版以来已经有 2 次提交。

如何根据“prod”标签提取报告以显示 index.html？

有时文件已提交但未标记，我们希望确保捕获任何需要转移到生产环境的更改文件。

谢谢！

# c# - 实体框架通用存储库 - 外键异常更新实体关系

> ID：13162944
> 
> 赞同：0
> 
> 时间：2012-10-31T16:51:52.833
> 
> 标签：c#, entity-framework, repository-pattern

我遵循了我在 Julie Lermans 的书 Programming Entity Framework: Dbcontext 中读到的 EF 存储库模式

我有一个名为 Customer 的实体，它与实体收藏夹具有多对多关系

这是客户更新的一些示例代码

```
customer.CustomerLocation_ID = 5;     

customer.Favourites.clear();

customer.State = State.Modified;
customerRepository.InsertOrUpdate(customer); 
```

然后插入将执行以下操作：

```
Entry(entity).State = EntityState.Modified;

foreach (var entity in this.ChangeTracker.Entries<IEntityState>())
{
    IEntityState stateInfo = entity.Entity;
    entity.State = StateHelpers.ConvertState(stateInfo.State);
} 
```

然后最后：

```
context.SaveChanges(); 
```

保存时，我在收藏夹上得到一个唯一键异常，因为收藏夹名称是唯一的。但我没有在收藏夹中添加任何内容。

当我删除 .clear() 行时，一切都很好。

更新：

我在这段代码中添加了只是尝试了一些东西，现在它可以工作了。

```
foreach (var fav in customer.Favourites)
{
     fav.State = State.Modified;
} 
```

这是否意味着即使我影响了客户，我仍然需要将收藏夹标记为已修改，以便跟踪和更新它们？我只是不认为我必须这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:04:27.617

如果您使用的是实体框架，它应该像这样做一样简单：

```
using(var myContext = new MySiteDbContextClassName())
{
     var selectedCustomer = myContext.Customers.FirstOrDefault(x => x.CustomerId == someCustomerId);

     if(selectedCustomer != null)
     {
          selectedCustomer.Favorites.Clear();
          myContext.SaveChanges();
     }
} 
```

如果这不起作用，那么听起来您的配置/映射有问题，您需要检查您的配置。

# sql - 简单查询返回相同的寄存器

> ID：13162953
> 
> 赞同：0
> 
> 时间：2012-10-31T16:52:25.017
> 
> 标签：sql, tsql

我在返回简单查询时遇到问题

**表 San_ChaveBematech**

```
ID     Chave_Id     Credenciada_Id    Recibo   Impresso
55     571678       10                Test     0 
```

**表 San_CadastraBematech**

```
ID     Maquina          Credenciada
5      000FEAB63D89     10
6      003067D6A4E7     10
7      003067D6A4D4     10 
```

**询问我有问题**

```
SELECT San_ChaveBematech.Recibo
FROM San_ChaveBematech
JOIN San_CadastraBematech
ON San_ChaveBematech.Credenciada_Id = San_CadastraBematech.Credenciada
WHERE San_ChaveBematech.Credenciada_Id = 
       (SELECT top 1 credenciada 
        FROM San_CadastraBematech 
        WHERE maquina = '000FEAB63D89')
AND San_ChaveBematech.Impresso = 0 
```

**这个怎么运作**

我有一个应用程序（Windows 窗体），我的用户将在其中注册。我会把她的登记簿保存在我的`San_CadastraBematech`桌子上。在我的 Web 应用程序中，我可以获得一些密钥，当我得到它时，我会将数据保存在`San_ChaveBematech`表中。为了打印它，我做了我放在这里的查询，但是看，我只有一个寄存器，`San_ChaveBematech`但我的查询返回相同的寄存器 3 次。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:55:28.173

```
SELECT top 1 Ch.Recibo
  FROM San_ChaveBematech Ch
  JOIN San_CadastraBematech Ca
    ON Ch.Credenciada_Id = Ca.Credenciada
 WHERE Ca.maquina = '000FEAB63D89'
   AND Ch.Impresso = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:55:45.427

那是因为你的子查询

```
SELECT top 1 credenciada 
        FROM San_CadastraBematech 
        WHERE maquina = '000FEAB63D89' 
```

将返回值 10；这在 San_ChaveBematech.Credenciada_Id 列中的 3 条记录中匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T16:55:51.167

```
SELECT Top 1 San_ChaveBematech.Recibo
FROM San_ChaveBematech
JOIN San_CadastraBematech
ON San_ChaveBematech.Credenciada_Id = San_CadastraBematech.Credenciada
WHERE San_CadastraBematech.maquina = '000FEAB63D89'
    AND San_ChaveBematech.Impresso = 0
Order By San_CadastraBematech.ID Desc 
```

# ios - 故事板 segue 在目标视图上隐藏 tabBarButton

> ID：13162957
> 
> 赞同：1
> 
> 时间：2012-10-31T16:52:46.390
> 
> 标签：ios, storyboard

抱歉英语不好。我在情节提要中有两个视图`MainViewController`。`TabBarController`当我在我的应用程序中按下按钮（使用模态segue）时，`MainviewController`切换到`firstTabBarView`或`secondTabBarView`取决于条件。它工作正常，但在那之后我在我`TabBarControls`的任何 tabBarViews 的底部丢失了我的。

UPD：按下条形按钮后的操作

```
-(IBAction)barButtonPressed:(id)sender
{
    if (condition !=0 ) {
        [self performSegueWithIdentifier:@"segue1" sender:nil];
    } else {
        [self performSegueWithIdentifier:@"segue2" sender:nil];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:59:18.550

它按建议工作。模态转场是“全屏转场”，涵盖了您的标准导航堆栈。如果您只是想更改选定的视图控制器，请使用

```
[yourTabBarControllerInstance setSelectedIndex:index]; 
```

# c# - 单元测试执行期间的 Windows 8 Appx 安装超时

> ID：13162958
> 
> 赞同：5
> 
> 时间：2012-10-31T16:52:48.967
> 
> 标签：c#, unit-testing, microsoft-metro, visual-studio-2012

我们正在使用 Visual Studio 2012 中包含的 vstest.console.exe 从 powershell 运行我们的 Win8 Metro 单元测试。该过程使用由 msbuild 创建的单元测试 appx-package 并运行它的方式：

`\install\location\vstest.console.exe path\to\unittest.appx /InIsolation`

执行有时会因超时而失败。

```
Starting test execution, please wait...
Error: Installation of package 
'\absolute\path\to\unittest.appx' 
failed with Error: (0x5B4) Operation timed out. 
Unable to install Windows app package in 15 sec.

For more details look into Event Viewer under 
Applications and Services Logs -> Microsoft -> Windows 
  -> AppXDeployment-Server -> Microsoft-Windows-AppXDeploymentServer/Operational. 
```

如果按照该工具的建议检查日志，确实可以看到有一些错误，但该软件包实际上似乎在大约 35 秒后安装。但是，没有关于这个问题的根本原因的真正迹象。激烈的谷歌搜索没有透露任何内容，所以也许这类问题会用 bing 更好地解决......

这是一个已知的问题？是否有一些正常原因导致 appx 安装因超时而失败，并且可以轻松修复？该错误似乎与安装特别相关，而不是单元测试本身。通常，安装和卸载的整个测试执行会在几秒钟内完成。

如果上述问题的答案是否定的，那么是否可以增加进程或系统范围的安装超时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:47:36.063

无法更改此超时。

您能否介绍一下您的应用程序，即大小、内容等。

# css - 带有内部 CSS 的响应式电子邮件

> ID：13162959
> 
> 赞同：2
> 
> 时间：2012-10-31T16:52:53.520
> 
> 标签：css, email, responsive-design

我目前发送多个桌面版时事通讯，其中包含带有托管移动版的“查看为移动版”链接，但我正在尝试探索在用户打开电子邮件时立即显示移动版的选项。

我已经阅读了有关使用内部样式表的以下代码变体的响应式设计

```
 @media screen and (max-width : 320px), screen and (max-device-width: 320px) 
```

但根据[http://www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/) ，并非所有 ESP 都允许或读取内部样式表。简而言之，是否有使用上述代码发送响应式电子邮件的好方法，或者由于缺乏支持而无法实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:55:50.207

一般来说，电子邮件客户端在支持 CSS 方面表现不佳（出于几个原因），因此您可能希望避免过多地使用 CSS。话虽如此，您可以在此处找到支持表[http://www.emailonacid.com/blog/details/C6/media_queries_in_html_emails](http://www.emailonacid.com/blog/details/C6/media_queries_in_html_emails)并确保您使用 CSS 逐步增强支持客户而不是惩罚那些不支持的客户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-10T09:25:52.390

创建响应式电子邮件的问题在于，许多客户只是忽略了样式标签，因此无法构建真正的响应式电子邮件......

但是有一个技巧...... ;)

您可以以移动优先的方式构建电子邮件，因此基本的 html 是移动版本。如果您以某种方式创建媒体查询，即他们“重新创建”原始桌面版本，那么您有一个很好的解决方案......因此，如果客户端忽略媒体查询，那么它将显示移动版本。

我找到了一个很棒的模板，它以我提到的方式工作，你可以在这里找到它：http: [//internations.github.io/antwort/](http://internations.github.io/antwort/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T04:46:02.840

我同意 Andy 在“电子邮件客户端不擅长支持 CSS”中的观点。这是一个普遍的规则，并且已经存在了很长时间。

也就是说 - 当我们谈论移动电子邮件客户端时，没有任何手机运行 MS Outlook '95，如果你明白我的意思！

查看支持电子邮件的智能手机设备的市场细分，您会发现支持的百分比高于桌面世界。

**在我们公司，仅在iPhone 上就有**超过 50% 的每周电子邮件读者群。其中包括桌面版 Gmail、Hotmail、Outlook 等。我们看到移动使用成为我们关注的焦点的持续趋势，而桌面版则处于次要地位。

我们并没有用完并建立移动网站，但我们正在定制我们的电子邮件以适应移动设备。例如：[Everguide 每周指南电子邮件](https://everguide.createsend.com/reports/viewCampaign.aspx?ID=2F8ECF7CF6D8DE4C)

**所以关于你的 CSS——**事实上，此时要确保媒体查询被正确读取和解释是非常困难的。

我们发现 Android 不像 iOS 那样喜欢玩球，但通过一些很好的调整和代码破解，我们已经做到了。

这是我们的交易电子邮件模板之一的示例 - 宽度上限为 520 像素，但在不同设备上时可缩放到设备宽度等。

要做到这一点，需要测试和耐心。对于我们的下一个项目，我将使用来自 Campaign Monitor 的新指南从头开始：[Campaign Monitor 的响应式电子邮件设计指南](http://www.campaignmonitor.com/guides/mobile/)

我将一点一点地构建它，使用 adobe shadow（我认为最近已重命名）和各种屏幕模拟器，以确保代码在每一步都真正响应。

如果我是你，首先确定你自己的“样板”，把它保存下来，然后在这个模板上制作所有未来的电子邮件设计。

我专门研究这个 - 目前还没有经过验证的真正方法。

祝你好运！

# networking - 从网络位置导入 PowerShell 二进制模块

> ID：13162962
> 
> 赞同：2
> 
> 时间：2012-10-31T16:52:58.793
> 
> 标签：networking, powershell, module

我有一个包含多台计算机的网络，我想将我所有的 PowerShell 模块放在一个网络共享中，这样我就可以从任何计算机轻松访问它们。这适用于脚本模块，但是二进制模块似乎不起作用。

该`Import-Module`语句可以正常执行而不会出错，但是当您使用 时`Get-Module`，它将显示新导入的二进制模块没有导出任何 Cmdlet。如果我将模块复制到计算机上的本地目录中，一切都会按预期工作。

有没有办法从网络位置导入二进制模块？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-09T20:35:36.827

抱歉，我知道这个问题很老，但认为为 PowerShell v3 提供答案会很有用。我在 PowerShell v3 中遇到了同样的问题，使用 Phil 的答案能够解决它 - 只需稍作修改。

PowerShell v3 已经使用 .NET 4.0，所以我实际上只需要 loadFromRemoteSources 部分。所以我的`$PSHOME\powershell.exe.config`样子是这样的：

```
<?xml version="1.0"?>
<configuration>
    <runtime>
        <loadFromRemoteSources enabled="true"/>
    </runtime>
</configuration> 
```

简单的！感谢菲尔的指点，会赞成你的回答，但我还没有声誉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:08:33.307

我发现加载 PowerShell 模块的最简单方法是将配置文件添加到`$PSHOME`目录中。

我创建了一个文本文件`$PSHOME\powershell.exe.config`并将以下内容放入文件中：

```
<?xml version="1.0"?>
<configuration>
    <startup useLegacyV2RuntimeActivationPolicy="true">
        <supportedRuntime version="v4.0.30319"/>
        <supportedRuntime version="v2.0.50727"/>
    </startup>
    <runtime>
        <loadFromRemoteSources enabled="true"/>
    </runtime>
</configuration> 
```

这做了两件事：

1.  使用[supportedRuntime](http://msdn.microsoft.com/en-us/library/w4atty68.aspx)确保 PowerShell 在 .NET 4.0 而不是 .NET 3.5 下运行。这很重要，因为 .NET 4 具有更易于理解和配置的不同安全策略。
2.  使用[loadFromRemoteSources](http://msdn.microsoft.com/en-us/library/dd409252.aspx)（仅在 .NET 4+ 中可用）来启用从远程位置（例如网络文件共享）加载 DLL。

# java - 尝试重定向“访问被拒绝”时出现 Spring Security 错误

> ID：13162967
> 
> 赞同：0
> 
> 时间：2012-10-31T16:53:15.643
> 
> 标签：java, spring, spring-security

在我的项目中实现了spring security的实现，但是我在定义重定向时遇到了麻烦。当访问被锁定时，我需要将该用户重定向到特定的 URL。

当我放置标签“access-denied-handler”时，我希望他重定向到 bean 上定义的页面，但不要发生。

安全上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:security="http://www.springframework.org/schema/security"
xsi:schemaLocation="http://www.springframework.org/schema/beans
                       http://www.springframework.org/schema/beans/spring-beans.xsd
                       http://www.springframework.org/schema/security
                       http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<!-- Method Security -->
<security:global-method-security pre-post-annotations="enabled">
    <security:expression-handler ref="expressionHandler" />
</security:global-method-security>

<bean id="expressionHandler" class="org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler">
    <property name="permissionEvaluator" ref="permissionEvaluator"/>
</bean>

<bean id="permissionEvaluator" class="net.pontoall.hemisphere.security.HemispherePermissionEvaluator"/>

<!-- Publicos -->
<security:http pattern="/layouts/**" security="none" />
<security:http pattern="/messages/**" security="none" />
<security:http pattern="/test/**" security="none" />
<security:http pattern="/resources/**" security="none" />
<security:http pattern="/login/**" security="none" />
<security:http pattern="/install/**" security="none" />
<security:http pattern="/cobredireto/**" security="none" />
<security:http pattern="/hotsite/**" security="none" />
<security:http pattern="/captcha.jpg" security="none" />

<security:http auto-config="true" use-expressions="true">

    <security:access-denied-handler ref="HemisphereAccessDeniedHandler"/>

    <security:intercept-url pattern="/**" access="isAuthenticated()" />

    <security:form-login login-page="/login" default-target-url="/home" 
                         authentication-failure-url="/login?logout=true" 
                         authentication-success-handler-ref="authenticationSuccessHandler"
                         authentication-failure-handler-ref="authenticationFailureHandler"/>

    <security:logout logout-url="/j_spring_security_logout" invalidate-session="true" success-handler-ref="logoutHandler"/>
</security:http>

<!-- Authentication Manager -->
<security:authentication-manager alias="authenticationManager">
    <!-- Custom Authentication provider -->
    <security:authentication-provider ref="hemisphereAuthenticationProvider"/>
</security:authentication-manager>

<bean id="hemisphereAuthenticationProvider" class="net.pontoall.hemisphere.security.HemisphereAuthenticationProvider">
    <property name="userDetailsService" ref="userDetailService"/>
</bean>

<bean id="authenticationSuccessHandler" class="net.pontoall.hemisphere.security.HemisphereAuthenticationSuccessHandler">
    <property name="defaultTargetUrl" value="/home" />
    <property name="alwaysUseDefaultTargetUrl" value="no" />
</bean>

<bean id="authenticationFailureHandler" class="net.pontoall.hemisphere.security.HemisphereAuthenticationFailureHandler">
    <property name="defaultFailureUrl" value="/login" />
</bean>

<bean id="logoutHandler" class="net.pontoall.hemisphere.security.HemisphereLogoutHandler"/>

<bean id="HemisphereAccessDeniedHandler" class="net.pontoall.hemisphere.security.HemisphereAccessDeniedHandler">
    <property name="errorPage" value="/error/permissao"/>
</bean> 
```

Bean Java - HemisphereAccessDeniedHandler.java：

```
public class HemisphereAccessDeniedHandler implements AccessDeniedHandler {

private String errorPage;

public String getErrorPage() {
    return errorPage;
}

public void setErrorPage(String errorPage) {

    if (errorPage == "") {
        errorPage = "/";
    }

    this.errorPage = errorPage;
}

@Override
public void handle(HttpServletRequest request, HttpServletResponse response, AccessDeniedException accessDeniedException) throws IOException, ServletException {
    // Set the 403 status code.
    response.setStatus(HttpServletResponse.SC_FORBIDDEN);
    response.sendRedirect(errorPage);
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:32:10.733

我发现发生了什么。我有一个 Spring MVC @ExceptionHandler，他正在捕获错误。

```
@ExceptionHandler
public ResponseEntity<String> handle(Exception exception, HttpServletRequest requestMain) {
    String erro = exception.getMessage();
    PusherRequest request = new PusherRequest("hemisphere-web", requestMain.getSession().getId());
    request.triggerPush(erro);

    HttpHeaders headers = new HttpHeaders();
    headers.setContentType(MediaType.APPLICATION_JSON);

    return new ResponseEntity<String>(exception.getMessage(), headers, HttpStatus.FORBIDDEN);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:03:06.647

重定向有自己的 HTTP 状态码 (3xx)，请参见[http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)。该方法`response.sendRedirect`应自动将 HTTP 状态代码设置为 307（临时重定向，请参阅[http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServletResponse.html#sendRedirect](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServletResponse.html#sendRedirect)）。

但是您在重定向之前将 HTTP 状态代码设置为 Forbidden (403)。

因此尝试删除`response.setStatus(HttpServletResponse.SC_FORBIDDEN)`. 您还可以发布`curl`转储以查看原始服务器输出。

# mysql - 安装 mysql gem 文件并收到错误“参数数量错误（4 为 0）（ArgumentError）”

> ID：13162968
> 
> 赞同：0
> 
> 时间：2012-10-31T16:53:22.197
> 
> 标签：mysql, ruby

我正在尝试运行以下 ruby​​ 程序

```
require 'rubygems'
require 'mysql'
db = Mysql.new('local','root','','')
st_qry = db.query("SELECT * FROM `notification` ORDER BY notification_id DESC ")
puts ("There were #{st_qry.num_rows} rows returned.") 
```

当我通过终端执行此代码时，我收到以下错误消息：

```
joe.fleck$ ruby mysql_req.rb 
mysql_req.rb:4:in `initialize': wrong number of arguments (4 for 0) (ArgumentError)
from mysql_req.rb:4:in `new'
from mysql_req.rb:4 
```

我不知道如何解决这个问题。我必须通过这个命令安装 mysql：

```
sudo env ARCHFLAGS="-arch x86_64" gem install mysql -- \
--with-mysql-dir=/usr/local/mysql --with-mysql-lib=/usr/local/mysql/lib \
--with-mysql-include=/usr/local/mysql/include 
```

因为普通命令（sudo gem install mysql）会出错并且无法安装。

我也试过卸载和安装mysql。我尝试了mysql2，当我尝试执行程序时它出错了。

有谁知道如何解决这个问题？

MacBook Pro，OS X 版本 10.8.2

```
$ gem list
*** LOCAL GEMS ***
addressable (2.3.2)
builder (3.1.3)
childprocess (0.3.5)
cucumber (1.2.1)
diff-lcs (1.1.3)
fastercsv (1.5.5)
ffi (1.1.5)
gherkin (2.11.3)
json (1.7.5)
libwebsocket (0.1.5)
multi_json (1.3.6)
mysql (2.8.1)
pkg-config (1.1.4)
rb-appscript (0.6.1)
rubygems-update (1.8.24)
rubyzip (0.9.9)
safariwatir (0.4.0)
selenium-webdriver (2.25.0)
shoes (3.0.1)
watir-webdriver (0.6.1) 
```

# objective-c - 目标c：使用查询字符串获取xml文件

> ID：13162971
> 
> 赞同：1
> 
> 时间：2012-10-31T16:53:27.017
> 
> 标签：objective-c, query-string, nsurl

所以我使用这里的教程构建了一个 XML 解析器：http: [//www.codeproject.com/Articles/248883/Objective-C-Fundamentals-NSXMLParser](http://www.codeproject.com/Articles/248883/Objective-C-Fundamentals-NSXMLParser)

我的问题是我调用的 XML 文件需要一个查询字符串参数。一个示例 url 将类似于：

```
http://domain.com/xml.php?id=00idcode00 
```

如果没有`id=`XML 文件，则只返回一个 XML 元素`<error>No id specified</error>`；指定了 id 的 XML 文件返回 50 个奇怪的 XML 元素。

我的问题是，无论我尝试什么，XML 文件总是返回`<error>`. 如何让 NSURL 使用查询字符串？

这是我的代码：

```
NSString *someId = @"00idcode00";
NSString *urlString = [NSString stringWithFormat:@"http://domain.com/xml.php?id=%@", someId];
NSURL *url = [NSURL URLWithString:urlString];

parser=[[NSXMLParser alloc] initWithContentsOfURL:url];
[parser setDelegate:self];
[parser parse];

NSLog(@"query: %@",[url query]); 
```

这个 NSLogs 如下：

```
Started element error
Found an element named: error with a value of: No id specified.
query: id=00idcode00 
```

`query`我输出of的最后一行`url`暗示 NSURL 具有正确的查询字符串，但 XML 文件的响应表明 NSURL 没有使用查询字符串。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:56:49.530

首先构建字符串，然后构建 URL。

```
NSString *someId = @"00idcode00";
NSString *urlString = [NSString stringWithFormat:@"http://domain.com/xml.php?Id=%@", someId];
NSURL *url = [NSURL URLWithString:urlString]; 
```

并且错误状态查询参数是`Id`，不是`id`。

# javascript - 将 html 块写为字符串

> ID：13162973
> 
> 赞同：0
> 
> 时间：2012-10-31T16:53:37.063
> 
> 标签：javascript, html, css

我想在用户在文本区域（使用 Javascript）中输入它时显示 html。像这样 ：

```
Every thing fine <a href="/toto"> link </a> 
```

如果不使用“pre”标签，我怎么能做到这一点？我只是想避免 html 解释。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T16:56:14.460

只需创建一个文本节点...</p>

```
var node = document.createTextNode(a_string); 
```

...并将其添加到文档中的某个位置...</p>

```
document.body.appendChild(node); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:03:17.257

所以你有一个字符串：

```
str='Every thing fine <a href="/toto"> link </a>'; 
```

你替换括号：

```
str.replace('<', '&lt;').replace('>', '&gt;'); 
```

然后写入文件：

```
document.write(str); 
```

或设置现有元素内容：

```
elem.innerHTML = str; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T16:57:42.733

您可以设置文本内容。

```
elem.textContent = "<div>foo</div>"; 
```

* * *

但是为了浏览器兼容性，您应该在代码开头执行以下操作：

```
var textContent = ('textContent' in document) ? 'textContent' : 'innerText'; 
```

然后像这样使用它：

```
elem[textContent] = "<div>foo</div>"; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-31T16:55:57.737

[jQuery.html()](http://api.jquery.com/html/)将为您执行此操作

# node.js - mongoose.connection() 和 mongoose.createConnection() 之间的混淆

> ID：13162979
> 
> 赞同：9
> 
> 时间：2012-10-31T16:54:02.647
> 
> 标签：node.js, mongoose

我已经研究了 mongoose 三天了，我对这两种方法的使用有点困惑（我知道“mongoose.connection（）”将来会被弃用......）

问题是：当我试图转换（从“mongoose.connection（）”到“mongoose.createConnection（）”）这个例子的action.js文件[https://gist.github.com/2785463](https://gist.github.com/2785463)不为我工作...

有我的代码...

```
var mongoose = require('mongoose'),
db = mongoose.createConnection('localhost', 'test');

db.on('error', function () {
  console.log('Error! Database connection failed.');
});

db.once('open', function (argument) {
  console.log('Database connection established!');

  mongoose.connection.db.collectionNames(function (error, names) {
    if (error) {
      console.log('Error: '+ error);
    } else {
      console.log(names);
    };
  });
}); 
```

还有我的终端输出（在我的 ubuntu 终端上输入“node test.js”..）

```
Database connection established!

/home/_user_/Scrivania/node_modules/mongoose/node_modules/mongodb/lib/mongodb/connection/server.js:437
    throw err;
          ^
TypeError: Cannot call method 'collectionNames' of undefined
  at NativeConnection.<anonymous> (/home/_user_/Scrivania/test2.js:11:25)
  at NativeConnection.g (events.js:192:14)
  at NativeConnection.EventEmitter.emit (events.js:93:17)
  at open (/home/_user_/Scrivania/node_modules/mongoose/lib/connection.js:408:10)
  at NativeConnection.Connection.onOpen (/home/_user_/Scrivania/node_modules/mongoose/lib/connection.js:415:5)
  at Connection._open (/home/_user_/Scrivania/node_modules/mongoose/lib/connection.js:386:10)
  at NativeConnection.doOpen (/home/_user_/Scrivania/node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js:47:5)
  at Db.open (/home/_user_/Scrivania/node_modules/mongoose/node_modules/mongodb/lib/mongodb/db.js:287:14)
  at Server.connect.connectCallback (/home/_user_/Scrivania/node_modules/mongoose/node_modules/mongodb/lib/mongodb/connection/server.js:235:7)
  at g (events.js:192:14) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T21:09:41.240

如果您不调用，`mongoose.connect()`则不`mongoose.connection`包含打开的连接。您应该改用`mongo.createConnection()`调用的返回值（您已保存到 中`db`）。

所以最后一段代码应该改为：

**更新**

```
db.db.collectionNames(function (error, names) {
  if (error) {
    console.log('Error: '+ error);
  } else {
    console.log(names);
  };
}); 
```

我没有在;上看到`collectionNames`方法 `Connection`看起来您必须将属性向下跟踪到本机连接对象才能访问它（参见上面的代码）。

# events - JQM：更改事件上的多选选项选择

> ID：13162983
> 
> 赞同：1
> 
> 时间：2012-10-31T16:54:22.477
> 
> 标签：events, jquery-mobile, binding

我的 JQM 页面中有一个（多个）选择。

我需要在任何其他选项选择上强制取消选择值为“A”的选项。

HTML是这样的：

```
<select name="select-1" id="select-1" multiple="multiple" data-native-menu="false" />
   <option value='A'>a</option>
   <option value='B'>b</option>
   <option value='C'>c</option>
</select> 
```

我正在使用这样的代码，但没有成功...... :-(

```
$("select#select-1").change(function() {
    $("select#select-1").val('A').attr("selected", false).trigger("refresh");
}); 
```

看起来我要取消选择的选项已被选中，而所有其他选项都已取消选择（当前选项除外）... :-(

一个 jsfiddle 在[这里](http://jsfiddle.net/marcolino/P6XwK/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T21:29:03.093

我对您的问题进行了一些尝试，并假设我没有误解您的问题（请参阅评论），此片段有效（但是可能有更简单的解决方案...）

**如果选择了 value='B' 的选项，则 value='A' 的选项将被取消选择。**

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>if B selected, deselect A</title>
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
  <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head>

<body>
  <!-- if B selected, deselect A -->
  <div data-role="page">
    <div data-role="content">
      <select name="select-1" id="select-1" multiple="multiple" data-native-menu="false" />
        <option id="option-A" value='A'>a</option>
        <option id="option-B" value='B'>b</option>
        <option id="option-C" value='C'>c</option>
      </select>
    </div><!-- /content -->
  </div><!-- /page -->

  <script>
    $("#select-1").change(function() {
      var mySelection = $(this).val();
      if (mySelection !== null) {
        if (mySelection.indexOf('B') >= 0) {
          $("#option-A").attr("selected", false);
          $('#select-1').selectmenu('refresh');
        };
      };
    });
  </script>
</body>
</html> 
```

**EDIT**现在更新了`$('#select-1').selectmenu('refresh');`，现在也可以在[jsfiddle中使用](http://jsfiddle.net/FLVZt/)

# android - 将 EditText 视图动态添加到水平滚动视图

> ID：13162984
> 
> 赞同：1
> 
> 时间：2012-10-31T16:54:26.720
> 
> 标签：android, for-loop, android-edittext, horizontalscrollview

在我的应用程序中，用户输入一个数字（在这种情况下，是化学方程式中反应物的数量，因此是起始材料的数量），结果是一些框，数量与用户给出的数字相匹配，在按下按钮后在下面生成/生成/创建。

我该怎么做呢？我认为 for 循环会发挥作用，所以我开始了它。

这是Java类：

```
public class EquationBalancer extends Activity {

    final EditText reactantNumberField = (EditText) findViewById(R.id.reactantsNumber);
    final int reactantNom = Integer.parseInt(reactantNumberField.getText().toString());

    HorizontalScrollView reactants = (HorizontalScrollView) findViewById(R.id.reactants);

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.balancelayout);

        Button setReactantsNo = (Button) findViewById(R.id.reactantsNumberOk);
        setReactantsNo.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                for (int i = 1; i < reactantNom; i++) {
                }
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.balancelayout, menu);
        return true;
    }

} 
```

和 XML 布局：

```
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/reactantsHowMany"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingTop="10dp"
        android:text="@string/reactantsHowMany"
        android:textSize="18dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true" />

    <EditText
        android:id="@+id/reactantsNumber"
        android:paddingTop="5dp"
        android:layout_width="65dp"
        android:layout_height="wrap_content"
        android:layout_below="@id/reactantsHowMany"
        android:layout_marginLeft="60dp"
        android:inputType="number"
        android:hint="e.g. 4" />

    <Button 
        android:id="@+id/reactantsNumberOk"
        android:paddingTop="5dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/reactantsHowMany"
        android:layout_alignParentRight="true"
        android:layout_marginRight="60dp"
        android:layout_alignBottom="@id/reactantsNumber"
        android:text="Set" />

    <HorizontalScrollView
        android:id="@+id/reactants"
        android:paddingTop="5dp"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:layout_below="@id/reactantsNumber" >

    </HorizontalScrollView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:23:46.117

```
for (int i = 1; i < reactantNom; i++) {
    EditText editText=new EditText(this);
    editText.setText("some text if you want else remove this line");
    reactants.addView(editText);
} 
```

如果您想从代码中的其他位置从这些edittext中获取数据，则维护一个edittext数组并将这些edittext对象保存在该数组中......

尝试这个..，。

# c# - 将 int(round(time.time())) 转换为 C#

> ID：13162986
> 
> 赞同：-2
> 
> 时间：2012-10-31T16:54:34.607
> 
> 标签：c#, python

我正在尝试将此 python 指令转换为 C#

```
int(round(time.time())) 
```

但我无法弄清楚它到底做了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T16:56:07.477

`time.time()`将当前时间作为浮点数返回，表示自 1970 年 1 月 1 日以来的秒数，`round()`将该浮点数四舍五入为最接近的整数值，`int()`并将该值转换为整数类型。

例如：

```
>>> time.time()
1351702579.645324
>>> round(time.time())
1351702580.0
>>> int(round(time.time()))
1351702580 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T17:06:47.447

您需要使用 UtcNow 而不是 Now ，否则您将得到一个被您的时区抵消的答案。

```
TimeSpan t = (DateTime.UtcNow - new DateTime(1970, 1, 1));
int timestamp  = (int) t.TotalSeconds; 
```

# c - 具有链接方法程序的哈希表未按预期工作

> ID：13162990
> 
> 赞同：3
> 
> 时间：2012-10-31T16:54:47.270
> 
> 标签：c, data-structures, hash, hashmap, hashtable

我正在使用链表链接方法在 C 中实现哈希表。程序运行，但是在搜索条目时，`"Element is not found"`尽管元素在哈希中，但我总是得到结果。这篇文章是对我之前的文章的轻微修改。程序如下：

```
struct llist{
   char *s;
   struct llist *next;
};

struct llist *a[100];

void hinsert(char *str){
   int strint, hashinp;
   strint = 0;
   hashinp = 0;
   while(*str){
      strint = strint+(*str);
      str=str+1;
   }
   hashinp = (strint%100);
   if(a[hashinp] == NULL){
      struct llist *node;
      node = (struct llist *)malloc(sizeof(struct llist));
      node->s = str;
      node->next = NULL;
      a[hashinp] = node;
   }
   else{
      struct llist *node, *ptr;
      node = (struct llist *)malloc(sizeof(struct llist));
      node->s = str;
      node->next = NULL;
      ptr = a[hashinp];
      while(ptr->next != NULL){
         ptr = ptr->next;
      }
      ptr->next = node;
   }
}  

void hsearch(char *strsrch){
   int strint1, hashinp1;
   strint1 = 0;
   hashinp1 = 0;
   while(*strsrch){
      strint1 = strint1+(*strsrch);
      strsrch = strsrch+1;
   }
   hashinp1 = (strint1%100);
   struct llist *ptr1;
   ptr1 = a[hashinp1];
   while(ptr1 != NULL){
      if(ptr1->s == strsrch){
         cout << "Element Found\n";
         break;
      }else{
         ptr1 = ptr1->next;
      }
   }
   if(ptr1 == NULL){
      cout << "Element Not Found\n";
   }
} 
```

`hinsert()`是将元素插入散列，并`hsearch`在散列中搜索元素。哈希函数是写在`hinsert()`自己里面的。在中`main()`，我将所有元素初始化`a[]`为`NULL`如下所示：

```
for(int i = 0;i < 100; i++){
   a[i] = NULL;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T16:57:41.590

您的程序是否处于无限循环中？也许用这条线？

```
while(*str){
        strint = strint+(*str);
} 
```

您指向的指针`*str`在该循环的范围内永远不会无效，因此您应该得到一个无限循环。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T16:58:10.643

您没有在此循环中推进指针。（这也是一个非常糟糕的哈希函数）

```
while(*str){
        strint = strint+(*str);
} 
```

# azure - 使用 Execute 的 AsTableServiceQuery 指南

> ID：13162993
> 
> 赞同：3
> 
> 时间：2012-10-31T16:54:58.703
> 
> 标签：azure, azure-storage, azure-table-storage

我注意到，当我在 CloudTableQuery 上调用 Execute() 时，它不会立即向 Azure 发出请求。以这段代码为例：

```
var results = 
(from e in tableContext.CreateQuery<T>(tableName)
where e.PartitionKey == something
select e).AsTableServiceQuery().Execute(); 
```

仅当我稍后使用结果时才向 Azure 发出请求：

```
foreach(var item in results) ... 
```

如果是这种情况，那么在我的代码片段中显式调用 Execute 是没有意义的。我对这种行为感到有些困惑，这让我问：**在哪些情况下需要公开公开 Execute()？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:29:28.697

在编写了更多查询之后，似乎这`Execute()`对 LINQ 查询组合很有帮助。表客户端不提供对某些 LINQ 运算符的支持，例如`Any()`，`Execute()`可以使用方法在`IEnumerable<T>`.

```
(from e in tableContext.CreateQuery<T>(tableName)
 where e.PartitionKey == "something"
 select e).AsTableServiceQuery(tableContext).Execute().Any() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:14:46.817

如果您查看GitHub 上[TableServiceQuery.cs](https://github.com/WindowsAzure/azure-sdk-for-net/blob/master/microsoft-azure-api/Services/Storage/Lib/DotNetCommon/Table/DataServices/TableServiceQuery.cs)的源代码，您将看到以下内容。深入挖掘，您可以看到重试策略、服务器超时和最大执行时间等都是通过调用 Execute() 设置的

```
 [DoesServiceRequest]
    public IEnumerable<TElement> Execute(TableRequestOptions requestOptions = null, OperationContext operationContext = null)
    {
        requestOptions = TableRequestOptions.ApplyDefaults(requestOptions, this.Context.ServiceClient);
        operationContext = operationContext ?? new OperationContext();
        long takeCount = TableUtilities.GetQueryTakeCount(this.Query, long.MaxValue);
        return
            General.LazyEnumerable(
                (continuationToken) =>
                this.ExecuteSegmentedCore((TableContinuationToken)continuationToken, requestOptions, operationContext),
                takeCount,
                operationContext);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-14T23:10:03.303

Linq 查询在您开始使用时执行，因此对于`IEnumerable`，您的查询在您开始枚举时执行。

```
var query = (from e in tableContext.CreateQuery<T>(tableName)
    where e.PartitionKey == "something"
    select e).AsTableServiceQuery(tableContext).Execute();

foreach(var element in query)
{ 
    // the query has been executed
} 
```

因此，您需要转换查询以确保执行（**.First(), .ToList()**）：

```
// Retreive the fisrt element
var element = (from e in tableContext.CreateQuery<T>(tableName)
    where e.PartitionKey == "something"
    select e).AsTableServiceQuery(tableContext).Execute().First();

// Retreive all the elements
var elements = (from e in tableContext.CreateQuery<T>(tableName)
    where e.PartitionKey == "something"
    select e).AsTableServiceQuery(tableContext).Execute().ToList(); 
```

# asp.net-mvc-4 - Asp Mvc4 条件属性无法按预期工作

> ID：13162995
> 
> 赞同：0
> 
> 时间：2012-10-31T16:55:02.297
> 
> 标签：asp.net-mvc-4

我将以下部分视图绑定到视图模型。

```
@model Omega.UI.WebMvc.Models.InputWithLabelViewModelBase

@{
    string required = null;
}

@if (Model.IsRequired)
{
    {
    required = "required";
    }
}

<td><label id="@Model.LabelId">@Model.LabelText</label></td>
<td>
    <input  id="@Model.InputId" data-bind= "value: @Model.CurrentValueProperty" required="@required"/>
    <span class="k-invalid-msg" data-for="@Model.InputId"></span>
</td> 
```

什么时候`IsRequired`为真我希望`required attribute`可用，否则不可用。当我运行该代码并且`IsRequired`为 false 时，`required attribute`会显示空值：required=""。我对asp mvc很陌生，我看不出我做错了什么。

每个鸽子的帖子更新：

这不起作用：

```
@{
    bool required = Model.IsRequired;
}

<td><label id="@Model.LabelId">@Model.LabelText</label></td>
<td>
    <input  id="@Model.InputId" data-bind= "value: @Model.CurrentValueProperty" required="@required" />
    <span class="k-invalid-msg" data-for="@Model.InputId"></span>
</td> 
```

这将呈现以下 html：

`required="False"`（如果 IsRequired 为假，反之亦然）

这是不正确的：

来自 html 文档：

required 属性是一个布尔属性，可以通过以下方式设置：

```
<input required>
<input required="required">
<input required=""> 
```

注意：我使用的是 Razor 2.0

难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:45:05.790

[在这些特殊情况下，Mvc 使用布尔值](http://vibrantcode.com/blog/2012/4/10/whats-new-in-razor-v2.html/)（假设所需的工作如选中）。尝试这个：

```
required="@Model.IsRequired" 
```

您是否还可以检查您的项目引用以确认您使用的是 Razor 2，因为您上面的示例也应该可以工作。右键单击 System.Web.Razor 查看属性并查看它是什么版本。它应该是 2.0.0.0

# android - 自定义 AsyncTaskLoader 类不支持对 forceLoad 的调用

> ID：13162997
> 
> 赞同：3
> 
> 时间：2012-10-31T16:55:05.640
> 
> 标签：android, android-asynctask, android-loader, asynctaskloader

这是一个有点奇怪的问题。我正在使用一个扩展 AsyncTaskLoader 的类（真正的交易目标 API 级别 11，而不是兼容性）来接收另一个应用程序组件发送的意图，并通过从本地数据库下载一些数据来响应。我在主要活动的 onStart 方法中使用 LoaderManager 初始化加载程序。

首次启动时，加载程序工作正常。以下是发生的一系列事件： Activity.onCreateLoader - Loader 构造函数 - Loader.onStartLoading - Loader.loadInBackground - Activity.onLoadFinished - Loader.deliverResult

但是，当我退出活动并反复重新启动它时，最终它将按预期停止工作。这将是顺序：Activity.onCreateLoader - Loader 构造函数 - Loader.onStartLoading - 无

在 Loader.onStartLoading 中有一个对 forceLoad 的调用，但在后一种情况下，它似乎没有做任何事情。我搜索过的所有地方似乎都说调用 forceLoad 是一种让加载程序开始执行其工作的近乎防弹的方法，但我一直遇到它根本什么都不做的情况。加载程序的属性在每种情况下都是相同的（isStarted、isAbandoned 和 isReset 无论如何都会给出相同的结果）。坦率地说，我没有发现加载器在工作正常的情况和不加载任何内容的情况之间有什么不同。

# nginx - php-fpm下获取Nginx调用PHP文件处理404错误

> ID：13162998
> 
> 赞同：5
> 
> 时间：2012-10-31T16:55:05.590
> 
> 标签：nginx, php

我正在尝试将 Nginx 配置为将所有 404 发送到 php 文件以进行进一步处理。我还没有让它工作。使用 try_files 我得到一个默认的 404 而没有 try_files 我没有指定输入文件。这是我到目前为止所拥有的：

```
server {
    listen 192.168.100.44:80;

    location / {
        index  index.html;
    }
    root /var/www/test.example.com;

    error_page  404              /404.php;

    # redirect server error pages to the static page /50x.html
    #
    error_page   500 502 503 504  /50x.html;

    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
    #
    location ~ \.php$ {
        #try_files      $uri = 404;
        fastcgi_pass   unix:/tmp/php5-fpm.sock;
        fastcgi_index  index.php;
        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
        include        fastcgi_params;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T08:22:02.750

答案是添加以下行： **fastcgi_intercept_errors on;**

然后，为了处理 404 并可能从 PHP 脚本返回不同的状态码： **error_page 404 /404.php；** 不得不简单地改为： **error_page 404 = /404.php;**

感谢 Nginx IRC 频道中的好心人，他们花了一些时间向我展示了正确的方向。

# css - 带图文的树形结构，溢出后使用CSS对齐文本

> ID：13162999
> 
> 赞同：2
> 
> 时间：2012-10-31T16:55:09.023
> 
> 标签：css, alignment

在创建自定义树时，我使用的是图像后跟标签。问题是当标签溢出时它会在图像下方，而我需要它与文本的起点对齐。我如何用 css 做到这一点。

示例代码：

```
<html>
  <body>
    <div class="maindivclass">
        <ul>
            <li id="TR_239984" class="liclass">
                <img src="http://dummyimage.com/32x16" class="imgclass" />
                <label class="labelclass">This is a long text to show wrapping of the text from the box edge</label>
            </li>
            <li id="TR_239985" class="liclass">
                <img src="http://dummyimage.com/32x16" class="imgclass" />
                <label class="labelclass">This is another long text to show wrapping of the text from the box edge</label>
            </li>
        </ul>
    </div>
  </body>
</html> 
```

**[请在此处](http://jsfiddle.net/ZcmKg/)**查看样本

我需要让它看起来像：http: [//imgur.com/Yp9hC](http://imgur.com/Yp9hC)

我需要单独的图像和文本，因为单击其中一个会做 2 件不同的事情，所以不能使用背景图像作为列表样式，除非它也可以使用它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:12:30.000

试试这个 -[**演示**](http://jsfiddle.net/ZcmKg/1/)

```
li {
    position: relative;
    list-style: none;
}

li img {
    position: absolute;
}

li label.labelclass {
    cursor: pointer;
    padding-left: 5px;
    padding-right: 5px;
    margin-left: 32px;
    display: block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:17:41.357

这将是使用 CSS 浮动的最佳时机。将图像和标签都浮动到左侧并给它们定义的宽度。确保“清除” .liclass 上的浮动

见[http://codepen.io/imjared/pen/EDgHc](http://codepen.io/imjared/pen/EDgHc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T17:17:47.550

试试这个：

```
.maindivclass {
    width: 300px;
}

li { 
    float: left;
    position: relative; 
    list-style: none;
}

.img_container {
    float: left;
    width: 40px;
    padding: 0px;
}

li label.labelclass {
    cursor: pointer;
    padding-left: 5px;
    padding-right: 5px;
    float: left;
    width: 250px;
} 
```

HTML

```
<li id="TR_239984" class="liclass">
    <div class="img_container">
        <img src="img.png" class="imgclass" />
    </div>
    <label class="labelclass">
        This is a long text to show wrapping of the text from the box edge
    </label>
</li> 
```

我添加了一个 .img_container 类，因为它只是简化了设置宽度而不会使 img 倾斜。

[在这里](http://jsfiddle.net/bruno/ZcmKg/8/)提琴

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T13:31:43.810

听到我给你最好的代码。

HTML：

```
<div class="wrapper">
    <div class="box-one">
        <img src="http://dummyimage.com/32x16" />
    </div>
    <div class="box-two">
This is a long text to show wrapping of the text from the box edge. This is a long text to show wrapping of the text from the box edgeThis is a long text to show wrapping of the text from the box edge.      
    </div>
    <div class="clear"></div>

     <div class="box-one">
        <img src="http://dummyimage.com/32x16" />
    </div>
    <div class="box-two">
This is a long text to show wrapping of the text from the box edge. This is a long text to show wrapping of the text from the box edgeThis is a long text to show wrapping of the text from the box edge.       
    </div>
    <div class="clear"></div>

</div> 
```

CSS：

```
.clear{
    clear:both;
}
.wrapper{
    width:800px;
    background:#E6E6E6;

}
.box-one{
    float:left;
    width:50px;
    margin-bottom:30px;
}
.box-two{
    float:right;
    width:750px;
} 
```

希望这对你有帮助。欢呼。