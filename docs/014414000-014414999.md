# StackOverflow 问答 14414000-14414999

# javascript - 在 ajax 加载回调函数中调用 getScript

> ID：14414003
> 
> 赞同：0
> 
> 时间：2013-01-19T11:48:18.040
> 
> 标签：javascript, jquery, ajax

有人可以向我解释一下吗。这里的目标是通过 ajax 调用加载外部 html，然后加载并执行与该 html 代码关联的外部脚本。

代码 A：

```
$('#content').load(toLoad,function(){
        $.getScript("toLoadScript.js");
}); 
```

代码 B：

```
$('#content').load(toLoad,showNewContent());
function showNewContent() {
    $.getScript("toLoadScript.js");
} 
```

代码 C：

```
$('#content').load(toLoad,showNewContent);
function showNewContent() {
    $.getScript("toLoadScript.js");
} 
```

为什么只有代码 C 成功加载并执行脚本，而其他 2 没有。

与以下相关的问题：[Jquery：在 ajax load() 之后运行脚本](https://stackoverflow.com/questions/12773600/jquery-run-script-after-ajax-load)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T16:52:35.273

部分答案：**为什么代码 B 不起作用**

在代码 B 中，您调用`.load`如下：

```
$('#content').load(toLoad,showNewContent()); 
```

这基本上分解为：

```
var newContent = showNewContent();
$('#content').load(toLoad,newContent); 
```

所以你正在调用`showNewContent`并将结果传递给`.load`.

这不是你想要做的。相反，您应该将函数本身（而不是其结果）传递给`load`：

```
$('#content').load(toLoad,showNewContent); 
```

# java - JTable 作为 MVC 框架的一部分

> ID：14414006
> 
> 赞同：1
> 
> 时间：2013-01-19T11:48:28.837
> 
> 标签：java, sql, swing, user-interface, jtable

在这里和那里做了一些研究，我在解决一个特定问题时感到丢脸。我不太熟悉，`JTable`想知道是否可以得到一些建议。

我正在使用模型-视图-控制器概念，并且遇到以下问题。

这是来自 MODEL 类的一段代码，它没有错误：

```
 public TableModel getTableData() throws SQLException {
    try {
        String sql = "SELECT date as 'Date',eventName as 'Name', time as 'Start Time' FROM Event";
        pst = conn.prepareStatement(sql); 
        rs = pst.executeQuery();
        TableModel model = (DbUtils.resultSetToTableModel(rs));
        return model;
        }
   finally {
        try {rs.close(); pst.close(); conn.close(); }
        catch(SQLException e){} 
    }

} 
```

这是 VIEW 类的一个片段：

```
 public EventView() {
    initComponents();
    this.model = new EventModel();
    tableEvent.setModel(model.getTableData());

} 
```

我的错误在于`tableEvent.setModel(model.getTableData());`VIEW 类的部分，它说必须捕获或抛出 SQL 异常。据我了解，在接口（视图类）中处理数据库不是一个好习惯。应由 MODEL 处理。

我在这里有两个选择：

1.  将 throws 子句添加到`EventView()`构造函数本身
2.  用 包围声明`try-catch`。

但我相信这会将数据库导入和概念添加到接口中，我认为这不是一个好主意吗？大家怎么看，有关系吗？或者我可以用其他方式初始化我的表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T12:01:33.830

您应该从 getTableData 函数的签名中删除 throws SQLException 子句。SQLException 在该方法内部处理，因此无需抛出它，视图也不需要知道它。

# backbone.js - 主干js中动态生成的按钮的事件哈希

> ID：14414007
> 
> 赞同：0
> 
> 时间：2013-01-19T11:48:30.157
> 
> 标签：backbone.js, underscore.js

我有一个下划线模板，里面有一个按钮。我希望在主干视图的事件哈希中提及单击事件。

模板代码是：

```
<script type="text/template" id="ledgerListing">

<button class="btn btn-danger pull-right" id="addLedgerButton">Add Ledger</button>

</script> 
```

查看代码是：

```
app.ledgerView=Backbone.View.extend({

el:"#container",

template:_.template($("#ledgerListing").html()),

events: {},

   initialize: function(){

    },

    render: function()
{
    this.$el.html(template())

}

}); 
```

现在如何在事件哈希中为 id 为 addLedgerButton 的按钮指定点击事件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T12:06:32.323

您可以添加如下事件，（格式应该是*`event type`*and *`a space`*and*`the element`*

```
events: {
  'click #addLedgerButton': 'myclick'
}, 
```

并定义一个名为的函数`myclick`：

```
myclick: function () {
  alert(1);
} 
```

这是jsfiddle。[http://jsfiddle.net/w2jm7/](http://jsfiddle.net/w2jm7/)

# php - Magento - 按品牌获取包含产品的所有类别

> ID：14414008
> 
> 赞同：2
> 
> 时间：2013-01-19T11:48:37.073
> 
> 标签：php, magento, e-commerce

我花了一些时间试图弄清楚这一点，但无济于事。如果我有一系列页面显示由制造商过滤的产品集合，并且我想要在每个页面的左栏中进行一些导航，其中包含包含当前制造商产品的类别列表，如何我要在不使用一些非常慢的代码的情况下填充它？（有几千种产品）。

我可以将与此类似的内容放在一个循环中，遍历每个类别，查看是否有针对每个类别返回的制造商的任何结果，但考虑到有几百个类别，这将相当慢。

```
$category           = $currentCategory;
$layer              = Mage::getSingleton('catalog/layer');
$layer->setCurrentCategory($category);
$attributes = $layer->getFilterableAttributes();
$manufacturers = array();
foreach ($attributes as $attribute) {
    if ($attribute->getAttributeCode() == 'manufacturer') {
        $filterBlockName = 'catalog/layer_filter_attribute';
        $result = Mage::app()->getLayout()->createBlock($filterBlockName)->setLayer($layer)->setAttributeModel($attribute)->init();
        foreach($result->getItems() as $option) {
            $manufacturers[$option->getValue()] = $option->getLabel();
        }
    }
} 
```

如果有人有更好的想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T18:24:05.587

1.  添加自定义类别属性 allmanufacturers(http://inchoo.net/ecommerce/magento/how-to-add-new-custom-category-attribute-in-magento/)。

2.  运行一个将遍历每个类别的所有产品的 cron，检查其制造商，并在此 allmanufacturers 客户属性中填充 (,) 分隔的制造商值。

现在在您的代码中，您只需要检查特定制造商的“自定义类别属性 - allmanufacturers”值并填充左列。

# iphone - Build for iPhone 无需连接

> ID：14414010
> 
> 赞同：0
> 
> 时间：2013-01-19T11:48:50.830
> 
> 标签：iphone, ios, xcode

如果可以在文件中构建开发人员版本，我正在徘徊，我的测试用户可以从我的服务器下载该文件。现在我必须将每个设备连接到我的计算机并构建它？

我在 Dreamveawer 中为 iOS 构建 phonegap 构建时看到它会生成一个文件，我可以使用 QR 码将其安装在我的 iPhone 上？

希望得到帮助并提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:37:42.023

可以这样做，但我建议使用免费且出色的[TestFlightApp](http://testflightapp.com)来管理分发您的开发人员构建。

如果您确实想自行分发临时构建，请按照这些[说明](http://www.informit.com/articles/article.aspx?p=1829415&seqNum=16)进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T14:03:19.827

您可以存档您的应用程序并将其保存以进行临时分发。

Ad-Hoc 分发使您能够通过 HTML 页面分发您的应用程序，这意味着客户可以使用他们的 iOS Safari 安装应用程序。

[http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/YourFirstAppStoreSubmission/TestYourApponManyDevicesandiOSVersions/TestYourApponManyDevicesandiOSVersions.html](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/YourFirstAppStoreSubmission/TestYourApponManyDevicesandiOSVersions/TestYourApponManyDevicesandiOSVersions.html)

# python - Beazley 4e PER pg 135,136：对于 sub.mro 中的 c？

> ID：14414011
> 
> 赞同：0
> 
> 时间：2013-01-19T11:48:52.700
> 
> 标签：python, method-resolution-order

IClass 的最后一行到底是做什么的？

**subclasscheck**重载 subclasscheck 但是，通常在重载运算符时，我们会执行以下操作：

> adt + 4.0 在这里，adt 是用户定义的类型 = 用户类对象（实例），而 4.0 是一个内置类型，预配置了 .real, .imaginary 所以如果 adt 很复杂，那么它变成： adt.(self, other ) **add** (self, other) 因此生成对“adt”的引用并将其提供给“self”，而“other”指的是 4.0

但在下面的例子中：

```
class IClass(object):
    def __init__(self):
        self.implementors = set()
    def register(self,C):
        self.implementors.add(C)
    def __instancecheck__(self,x):
        return self.__subclasscheck__(type(x))
    def __subclasscheck__(self,sub):
        return any(c in self.implementors for c in sub.mro())

# Now, use the above object
IFoo = IClass()
IFoo.register(Foo)
IFoo.register(FooProxy)

f = Foo()           # Create a Foo
g = FooProxy(f)     # Create a FooProxy
isinstance(f, IFoo)        # Returns True
isinstance(g, IFoo)        # Returns True
issubclass(FooProxy, IFoo) # Returns True 
```

这里**subclasscheck**的 self 和 sub 是什么？**subclasscheck**是如何 重载的？

无论如何，假设它以某种方式被重载.. 对 FooProxy 的引用被传递给 self 和 IFoo->sub。所以.. IFoo.mro() 将生成例如 IFoo 的方法解析顺序，因此对于 IClass.. 这将只是 object.. umm.. wth??

有人可以解释这里发生了什么吗？如果 FooProxy 是 IClass 中分组类的子类，则基本上“任何”都应该返回 True。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T12:12:59.710

`__subclasscheck__`是覆盖内置的方法`issubclass`。该调用`issubclass(X,Y)`首先检查是否`Y.__subclasscheck__`存在，如果存在，则调用`Y.__subclasscheck__(X)`而不是其正常实现。

相似地; `__instancecheck__`是覆盖内置的方法`isinstance`。该调用`isinstance(X, Y)`首先检查是否 `Y.__instancecheck__`存在，如果存在，则调用`Y.__instancecheck__(X)` 而不是其正常实现。

```
In [121]: class FooProxy3(object):
     ...:     pass

In [122]: issubclass(FooProxy3,IFoo)
Out[122]: False

In [123]: for c in IFoo.implementors:
     ...:     print c
     ...:     
<class '__main__.Foo'>
<class '__main__.FooProxy'>

In [124]: for c in FooProxy3.mro():
     ...:     print c
     ...:     
<class '__main__.FooProxy3'>
<type 'object'>

In [125]: IFoo.register(FooProxy3)

In [126]: for c in IFoo.implementors:
     ...:     print c
     ...:     
<class '__main__.Foo'>
<class '__main__.FooProxy'>
<class '__main__.FooProxy3'>

In [127]: issubclass(FooProxy3,IFoo)
Out[127]: True 
```

让我们考虑上面的例子；创建新类`FooProxy3`；并检查`issubclass`；它会返回`False`（根据`Out[122]`），因为我们正在寻找子类签入`IFoo.implementors`；并且它不存在（根据`In[123]`）
，但是当我们存在时`register` `FooProxy`（这里的意思是；现在我们可以看到它`IFoo.implementors`）；我们可以`Foxproxy3`在`IFoo.implementors`（根据`In[126]`）中看到它，所以当我们检查时`issubclass`；它会回来`True`的。
了解更多信息；
[自定义实例和子类检查](http://docs.python.org/2.7/reference/datamodel.html?highlight=__subclasscheck__#customizing-instance-and-subclass-checks)
[重载 isinstance() 和 issubclass()](http://www.python.org/dev/peps/pep-3119/#overloading-isinstance-and-issubclass)

# ruby - Resque永远等待工作

> ID：14414013
> 
> 赞同：0
> 
> 时间：2013-01-19T11:49:06.197
> 
> 标签：ruby, redis, resque

重要提示：这是我第一次使用 Resque 和 Redis。

我创建了这个任务：

```
class SimpleTask
  @queue=:simple

  def self.perform(msg)
    puts ":("
  end

end 
```

我使用 rails 控制台安排了 100 个：

```
irb(main):015:0> (0..100).each {|n| Resque.enqueue(SimpleTask,'come on!') }
=> 0..100
irb(main):016:0> Resque.info
=> {:pending=>101, :processed=>0, :queues=>1, :workers=>0, :working=>0, :failed=>0, :servers=>["redis://127.0.0.1:6379/0"], :environment=>"development"}
irb(main):017:0> Resque.peek('simple')
=> {"class"=>"SimpleTask", "args"=>["come on!"]} 
```

当我使用此命令启动工作人员时：

```
rake environment resque:work 
```

它陷入无限循环：

```
*** Starting worker home-pc:7972:'simple'
*** Registered signals
*** Checking 'simple'
*** Sleeping for 5.0 seconds
*** resque-1.23.0: Waiting for 'simple'
*** Checking 'simple'
*** Sleeping for 5.0 seconds
*** resque-1.23.0: Waiting for 'simple'
*** Checking 'simple'
*** Sleeping for 5.0 seconds
*** resque-1.23.0: Waiting for 'simple'
*** Checking 'simple'
*** Sleeping for 5.0 seconds
*** resque-1.23.0: Waiting for 'simple'
*** Checking 'simple'
*** Sleeping for 5.0 seconds
*** resque-1.23.0: Waiting for 'simple'
*** Checking 'simple'
*** Sleeping for 5.0 seconds
*** resque-1.23.0: Waiting for 'simple' 
```

Web 界面显示有一个工人“正在等待工作......”。它还显示了“简单”队列中待处理的 101 个作业。

我的设置有什么问题？

另外，我在 Windows 上运行所有这些，使用 Redis 端口。Redis 似乎工作正常，至少 Resque 拥有它存储在 Redis 中的所有信息。

# ruby - 无法理解为什么我在代码中禁用了 Regexp 选项

> ID：14414019
> 
> 赞同：1
> 
> 时间：2013-01-19T11:49:42.010
> 
> 标签：ruby, regex

我刚刚开始玩 Ruby，但我遇到了一些问题。实例化后是否有一些技巧可以修改`casefold attribute`Regexp 对象的属性？

*我尝试过的最好的想法如下：*

```
irb(main):001:0> a = Regexp.new('a')
=> /a/
irb(main):002:0> aA = Regexp.new(a.to_s, Regexp::IGNORECASE)
=> /(?-mix:a)/i 
```

*但以下似乎都不起作用：*

```
irb(main):003:0> a =~ 'a'
=> 0
irb(main):004:0> a =~ 'A'
=> nil
irb(main):005:0> aA =~ 'a'
=> 0
irb(main):006:0> aA =~ 'A'
=> nil 
```

我不明白的事情正在这里发生。第 8 行的“i”在哪里？

```
irb(main):07:0> aA = Regexp.new(a.to_s, Regexp::IGNORECASE)
=> /(?-mix:a)/i
irb(main):08:0> aA.to_s
=> "(?-mix:a)"
irb(main):09:0> 
```

我正在使用 Ruby 1.9.3。

我也无法理解以下代码：为什么要返回`false`：

```
/(?i:a)/.casefold?      #=> false 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T11:53:28.003

由于结果`to_s`只是正则表达式字符串本身 - 没有分隔符或外部标志 - 标志被转换为`(?i:...)`在表达式本身内部临时设置或清除它们的语法。这使您可以`Regexp`通过匹配相同字符串的简单`Regexp.new(s)`调用来获取对象。

不幸的是，包装包括明确清除对象上*未*设置的标志。因此，您的第一个正则表达式被字符串化为介于两者之间`(?:-i...)`的内容 - 也就是说，该`casefold`选项在括号之间显式*关闭。*为对象重新打开它没有任何效果。

您可以使用`a.source`而不是`a.to_s`仅获取原始表达式，而无需标志设置：

```
irb(main):001:0> a=/a/
=> /a/
irb(main):002:0> aA = Regexp.new(a.source, Regexp::IGNORECASE)
=> /a/i
irb(main):003:0> a =~ 'a'
=> 0
irb(main):004:0> a =~ 'A'
=> nil
irb(main):005:0> aA =~ 'a'
=> 0
irb(main):006:0> aA =~ 'A'
=> 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T12:02:25.170

正如您的控制台输出所示，`a.to_s`包括区分大小写作为子表达式的选项，因此`aA`被定义为

```
/(?-mix:a)/i 
```

所以你要求 ruby​​ 提供一个不区分大小写的正则表达式，但唯一不区分大小写的正则表达式是打开区分大小写时的组，所以最终效果是 'a' 区分大小写

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T12:22:20.717

正如 Frederick 已经解释的那样，调用`to_s`正则表达式将在其周围添加修饰符，以确保保留其属性（如区分大小写）。因此，如果您将区分大小写的正则表达式插入到不区分大小写的正则表达式中，插入的部分仍将区分大小写。同样，如果第一个参数是正则表达式或调用 to_s 的结果，则给予 Regexp.new 的修饰符将无效。

要解决此问题，请调用`source`正则表达式而不是`to_s`. 与 不同`to_s`，`source`只需返回正则表达式的源而不添加任何内容：

```
aA = Regexp.new(a.source, Regexp::IGNORECASE) 
```

> 我也无法理解下面的代码：为什么返回 false：
> 
> ```
> /(?i:a)/.casefold? 
> ```

因为在本地`(?i:...)`设置标志，而不是全局设置。`i`它仅适用于括号内的正则表达式部分，而不适用于整个正则表达式。当然，在这种情况下，整个正则表达式都在括号内，但就方法`casefold?`而言，这并不重要。

# ios - 用于设置自动布局约束的 iOS 视图层次结构

> ID：14414020
> 
> 赞同：0
> 
> 时间：2013-01-19T11:49:45.927
> 
> 标签：ios, objective-c, autolayout, nslayoutconstraint

视图控制器中最近的祖先`self.navigationController.navigationBar`和子视图是什么`self.view`，以便我可以将约束添加到该祖先？

```
self.searchBar = [[UISearchBar alloc] initWithFrame:CGRectZero];
[self.searchBar setTranslatesAutoresizingMaskIntoConstraints:NO];
[self.view addSubview:self.searchBar];

NSLayoutConstraint* cn = [NSLayoutConstraint constraintWithItem:self.searchBar  
attribute:NSLayoutAttributeTop relatedBy:NSLayoutRelationEqual 
toItem:self.navigationController.navigationBar attribute:NSLayoutAttributeBottom 
multiplier:1.0 constant:0]; 
```

我试着做

```
[self.view addConstraint:cn];
[self.navigationController.view addConstraint:cn]; 
```

但两次我都得到错误，“约束是否引用了视图子树之外的东西？那是非法的。”

有人可以解释与导航控制器相关的视图控制器的视图层次结构吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T17:00:18.827

视图树如下所示：

![在此处输入图像描述](../Images/54ad4baa87c9b8dd883fdbd3b0476abf.png)

因此，navigationController.view 是导航栏和您的视图最接近的祖先。我不确定为什么那不起作用。你把那个代码放在哪里了？

# c++ - C++中函数和方法的区别？

> ID：14414024
> 
> 赞同：-3
> 
> 时间：2013-01-19T11:50:41.247
> 
> 标签：c++, xcode, function, methods

> **可能重复：**
> [函数还是方法？](https://stackoverflow.com/questions/9069973/functions-or-methods)

我在想它们都是一样的，但我正在读一本关于 C++ 的书，我不确定它们有什么不同。抱歉，我知道有人问过这个问题，但我仍然不确定它们是否不同。有人可以解释一下吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:54:03.277

假设你的意思是“方法”的“成员函数”，看看[这个](http://www.parashift.com/c++-faq/fnptr-vs-memfnptr-types.html)

成员函数是在类中声明的函数。

普通函数和（非静态）成员函数之间的区别在于，非静态成员函数带有一个隐式参数：指向它们被调用的对象的指针（this）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T12:42:51.640

C++ 语言定义谈到“函数”和“成员函数”。它没有谈论“方法”。所以“函数”和“成员函数”的含义是明确定义的。C++ 中“方法”的含义就是你认为的任何含义，并且它经常以这种方式使用，即作为“我认为我可以调用的东西”的模糊术语，没有确切的含义。

# oracle - Oracle Scheduler – 使用单个作业创建复杂的计划

> ID：14414026
> 
> 赞同：3
> 
> 时间：2013-01-19T11:50:46.550
> 
> 标签：oracle, scheduler, jobs, dbms-scheduler

我有一个在 Oracle 10g DB 上运行的作业，执行计划非常简单。

```
BYDAY=MON,TUE,WED,THU,FRI;BYHOUR=6,10,14,18 
```

现在的问题是我们必须改变计划——但仅限于周一。所以在星期一，第一份工作应该在 8 点而不是 6 点运行。然后像所有其他工作一样（10、14、18）。而从周二到周五，它应该像上面那样运行。

最简单的方法是为星期一创建第二个工作并将星期一从原始工作中删除。然而，这对我们的应用程序来说是个问题，因为它每次导入只依赖一个作业。

所以问题是：有没有办法告诉调度程序在 TUE-FRI 的 6、10、14、18 点和 MON 的 8、10、14、18 点运行一个作业？

我阅读了有关使用 PL/SQL 表达式指定重复间隔的信息。但我不知道是否有办法做到这一点。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T15:41:07.003

创建一个复合计划，并在创建时将其分配给作业。

例如：

```
begin
  dbms_scheduler.create_schedule('MY_SCHED1', repeat_interval =>
  'FREQ=DAILY;BYDAY=TUE,WED,THU,FRI;BYHOUR=6,10,14,18');
END;
/
begin
dbms_scheduler.create_schedule('MY_SCHED2', repeat_interval =>
  'FREQ=DAILY;BYDAY=MON;BYHOUR=8,10,14,18');
END;
/
begin
dbms_scheduler.create_schedule('MAIN', repeat_interval =>
  'MY_SCHED1, MY_SCHED2');
END;
/ 
```

现在您只需将名为“MAIN”的计划分配给作业，而不是计划字符串。

# php - 分解一个整数并按特定顺序插入到数组中

> ID：14414029
> 
> 赞同：-2
> 
> 时间：2013-01-19T11:51:16.013
> 
> 标签：php, arrays, tokenize

我有一个存储数字的变量，比如说`$num = (double)758341`. 我想打破`$num`然后按升序或降序插入数组。我只是对数字将如何被破坏或标记感到困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T11:57:48.900

这是你想要的？

```
$num = (double)758341;

$array = str_split($num);

sort($array); 
```

结果：

```
Array
(
    [0] => 1
    [1] => 3
    [2] => 4
    [3] => 5
    [4] => 7
    [5] => 8
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:30:03.270

```
function split_sort_num($num, $order='asc'){
    $arr = str_split($num);
    if ($order=='asc'){
       sort($arr);
    }
    else{
       rsort($arr);
    }
    return $arr;
}

$num = (double)758341;
$asc = split_sort_num($num);
$dsc = split_sort_num($num, 'desc');
print_r($asc);
print_r($dsc); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T11:58:54.410

使用模函数，它给出类似的余数

```
 i=0
  while (num > 0)
  {
    arrayName[i++] = num % 10;
    num = num/10;
  } 
```

并根据需要对数组进行排序....

# .net - ASP.NET MVC 4 - 添加到列表时更新了错误的对象

> ID：14414031
> 
> 赞同：0
> 
> 时间：2013-01-19T11:51:33.710
> 
> 标签：.net, list, asp.net-mvc-4

我正在尝试使用 ASP.NET MVC 4 构建一个 Web 应用程序，但我已经被困了一段时间，并且在其他帖子中没有发现任何帮助：

我有两个模型类：用户和组。用户可以在任意数量的组中，并且一个组有一个用户列表（成员）。当用户创建一个组时，他将成为该组的所有者。

我的问题是，每当我尝试创建一个新组（并将当前用户添加到这个新组的成员列表中）时，以前的组似乎被修改了，因为当前用户不再是他的成员以前创建的组。

我希望我已经足够理解了，如果我不理解，我很抱歉（英语不是我的母语）。

以下是与我的问题相关的模型类： UserProfile 类：

```
[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }

    public virtual List<Group> Groups { get; set; }
    public virtual List<Group> OwnedGroups { get; set; }
} 
```

班级组：

```
public class Group
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int GroupId { get; set; }

    [Required]
    public string Name { get; set; }

    public string Description { get; set; }

    public virtual List<UserProfile> Members { get; set; }

    public virtual UserProfile Owner { get; set; }

} 
```

我的方法用于创建一个新组（在 GroupController 中）：

```
[HttpPost]
    public ActionResult Create(Group group)
    {
        if (ModelState.IsValid)
        {
            UserProfile user = db.UserProfiles.Where(u => u.UserName == User.Identity.Name).FirstOrDefault();
            db.Groups.Add(group);
            db.SaveChanges();
            group.Owner = user;
            user.OwnedGroups.Add(group);
            user.Groups.Add(group);
            group.Members = new List<UserProfile>();
            group.Members.Add(user); 
            db.SaveChanges();

            return RedirectToAction("SearchUsersToAddToGroup", new { groupId = group.GroupId });
        } 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T13:08:14.100

我在这里找不到任何明显的错误 - 但我会尝试删除一些冗余代码并将用户从更改`FirstOrDefault()`为`SingleOrDefault()`以确保您的数据库中确实只有唯一用户（您的密钥是`UserId`但您获得了用户名）。

和之间是多对多的关系`Group`，`User`所以你只需要从一端来维持这种关系，而不是两者……

```
[HttpPost]
public ActionResult Create(Group group)
{
    if (ModelState.IsValid)
    {
        // SingleOrDefault as you're not searching on the PK
        UserProfile user = db.UserProfiles.Where(u => u.UserName == User.Identity.Name).SingleOrDefault();

        group.Owner = user;
        db.Groups.Add(group);

        user.Groups.Add(group);
        user.OwnedGroups.Add(group);

        db.SaveChanges();

        return RedirectToAction("SearchUsersToAddToGroup", new { groupId = group.GroupId });
    } 
```

这可能无法解决您的问题，但使用较少的代码可能更容易找到。

# jquery - 如何取消 tablesorter 插件中的排序事件？

> ID：14414037
> 
> 赞同：2
> 
> 时间：2013-01-19T11:52:30.200
> 
> 标签：jquery, tablesorter

我想知道这是否可能：

在活动期间，我想检查某些条件，如果该条件为真，我想立即取消活动。

在下面的情况下，如果满足此条件，我想根本不允许用户对表格进行排序。

```
$(table).bind("sortBegin",function(e, table) { 
   if(condition_is_met){
     // ?? How to cancel the sortBegin?
   }

}); 
```

在 jquery 中可能有这样的事情吗？

**更新**：

道歉，

1）我认为标记`tablesorter`会足够清晰，以指示我正在使用哪个插件。;) 无论如何`tablesorter`它是。谢谢

2）我想禁止任何类型的排序，直到不再满足条件。我不介意整个表格是否会停止排序或仅停止当前事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:07:36.987

不幸的是，插件没有考虑到`preventDefault`——你要么需要修改它，要么抛出异常来中止调用堆栈，这实际上应该与支持良好`preventDefault`但更丑陋的插件相同。

```
$(table).bind("sortBegin",function(e, table) { 
   if(condition_is_met){
     throw new Error("");
   }

}); 
```

IIRC，`.trigger()`在 jQuery 中同步工作，如果这是真的，那么这将工作。

如果要修改插件，可以通过以下方式添加对`preventDefault`：

```
var e = $.Event( "sortBegin" );
$this.trigger(e, $t0);
if( !e.isDefaultPrevented() ) {
    setTimeout(function(){
        // set css for headers
        setHeadersCss($t0);
        multisort($t0);
        appendToTable($t0);
    }, 1);
} 
```

现在，当代码的客户端调用`e.preventDefault()`sortBegin 事件时，插件将不会继续进行排序。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-19T11:54:52.043

jQuery 提供 unbind 函数来从选择器中取消绑定事件

这是一个例子

```
$('#foo').unbind('click'); 
```

# .net - 为什么这个简单的远程处理示例可以在我的笔记本电脑上运行，但不能在我的台式机上运行？

> ID：14414038
> 
> 赞同：3
> 
> 时间：2013-01-19T11:52:39.367
> 
> 标签：.net, remoting, typeloadexception

我试图创建一个远程对象并得到错误，即使看起来一切都井井有条，所以我决定简化并直接从 Microsoft 运行一段示例代码 (http://msdn.microsoft.com/en-us /library/system.marshalbyrefobject.aspx)。

当我运行此代码时，当它调用 CreateInstanceAndUnwrap() 时，我得到一个 TypeLoadException。但是，我只是在我的笔记本电脑上尝试过，它运行良好。任何人都知道为什么它可以在笔记本电脑上工作而不是台式机？我刚刚在每个上创建了一个控制台应用程序并复制/粘贴了下面的代码，所以我不明白两者之间有什么不同。

```
using System;
using System.Reflection;

public class Worker : MarshalByRefObject
{
    public void PrintDomain() 
    { 
        Console.WriteLine("Object is executing in AppDomain \"{0}\"",
            AppDomain.CurrentDomain.FriendlyName); 
    }
}

class Example
{
    public static void Main()
    {
        // Create an ordinary instance in the current AppDomain
        Worker localWorker = new Worker();
        localWorker.PrintDomain();

        // Create a new application domain, create an instance 
        // of Worker in the application domain, and execute code 
        // there.
        AppDomain ad = AppDomain.CreateDomain("New domain");
        Worker remoteWorker = (Worker) ad.CreateInstanceAndUnwrap(
            Assembly.GetExecutingAssembly().FullName,
            "Worker");
        remoteWorker.PrintDomain();
    }
} 
```

编辑：所以，我只是尝试在本地域中使用 Activator 创建类型的实例，甚至这给了我一个错误，说它无法加载文件或程序集“System.RuntimeType”或其依赖项之一。看到这是 .Net Framework 的内部类型，即使我愿意，我也无法阻止它部署，我现在很困惑。

编辑：没有 InnerException，但这里是堆栈：

```
 at System.Reflection.RuntimeAssembly.GetType(RuntimeAssembly assembly, String name, Boolean throwOnError, Boolean ignoreCase, ObjectHandleOnStack type)
   at System.Reflection.RuntimeAssembly.GetType(String name, Boolean throwOnError, Boolean ignoreCase)
   at System.Activator.CreateInstance(String assemblyName, String typeName, Boolean ignoreCase, BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes, Evidence securityInfo, StackCrawlMark& stackMark)
   at System.Activator.CreateInstance(String assemblyName, String typeName)
   at System.AppDomain.CreateInstance(String assemblyName, String typeName)
   at System.AppDomain.CreateInstance(String assemblyName, String typeName)
   at ConsoleApplication1.Example.Main(String[] args) in D:\Projects\Remoting\ConsoleApplication1\Program.cs:line 28
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

哦，例外情况如下：

```
{"Could not load type 'Worker' from assembly 'ConsoleApplication1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'.":"Worker"} 
```

另外，我尝试运行这行代码：

```
var w = Activator.CreateInstance(typeof(Worker).GetType().FullName, "Worker"); 
```

并得到一个 FileNotFoundException：

```
Could not load file or assembly 'System.RuntimeType' or one of its dependencies.  The system cannot find the file specified. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-19T13:05:52.617

在您的初始代码中，您试图实例化一个不完整的类型名，除非 Worker 没有命名空间，否则该代码不应在任何地方工作。它应该是：

```
var workerType = typeof(Worker);
Worker remoteWorker = (Worker) ad.CreateInstanceAndUnwrap(
            // Where Worker is defined (probably the same as current assembly in you case)
            workerType.Assembly.FullName,
            // Worker's *fully-qualified* typename, including the namespace 
            workerType.FullName); 
```

您的本地激活码错误地调用`typeof(Worker).GetType().FullName`而不是`typeof(Worker).FullName`.

`typeof(Anything).GetType()`总会回来的`System.RuntimeType`

# iphone - 无法使用 CJJsonSerializer 序列化 NSDate

> ID：14414044
> 
> 赞同：0
> 
> 时间：2013-01-19T11:53:25.353
> 
> 标签：iphone, ios, objective-c, touchjson

我尝试添加`NSDate`到`NSMutableDictionary`，然后使用以下方法使其成为`JSon`字符串：

```
NSMutableDictionary *d = [[NSMutableDictionary alloc]init];
[d setObject:[NSDate date] forKey:@"date"];
NSData *jsondata = [[CJSONSerializer serializer] serializeDictionary:d error:nil];
NSString *requestBody = [[[NSString alloc] initWithData:jsondata encoding:NSUTF8StringEncoding] autorelease]; 
```

我有几个问题：1）`jsondata`是零，然后`requestBody`也是零。2）`[NSDate date]`让我弄错日期，不像我 iPhone 上的日期：

```
2013-01-19 11:48:46 +0000 
```

对这个问题有任何帮助吗？

编辑：

当我打印错误时，我得到了这个消息：

```
Error Domain=TODO_DOMAIN Code=-1 "Cannot serialize data of type '__NSDate'" UserInfo=0x177850 {NSLocalizedDescription=Cannot serialize data of type '__NSDate'} 
```

这不可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T12:02:35.173

字典似乎不太可能无法插入日期。问题似乎更有可能出在`CJSONSerializer`.

尝试以下操作：

```
NSMutableDictionary *d = [[NSMutableDictionary alloc]init];
[d setObject:[NSDate date] forKey:@"date"];

NSError *error = nil;
NSData *jsondata = [[CJSONSerializer serializer] serializeDictionary:d error:&error];

if (!jsonData)
{
    NSLog(@"Error %@ while serialising to JSON");
}

NSString *requestBody = [[[NSString alloc] initWithData:jsondata encoding:NSUTF8StringEncoding] autorelease]; 
```

您应该会看到打印到控制台的错误。

**更新**

好的，看起来我们是对的，CJSONSerializer 不能序列化日期。所以你需要把你的日期变成一个字符串。这是通过 NSDateFormatter 完成的。

```
NSMutableDictionary *d = [[NSMutableDictionary alloc]init];
NSDate *date = [NSDate date];

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss z"];
NSString *dateString = [dateFormatter stringFromDate:date];

[d setObject:dateString forKey:@"date"];

NSError *error = nil;
NSData *jsondata = [[CJSONSerializer serializer] serializeDictionary:d error:&error];

if (!jsonData)
{
    NSLog(@"Error %@ while serialising to JSON");
}

NSString *requestBody = [[[NSString alloc] initWithData:jsondata encoding:NSUTF8StringEncoding] autorelease]; 
```

希望您现在应该在 JSON 中获得格式化的日期。您可以通过更改传递给的字符串来改变格式`stringWithDate:`。如果您经常这样做，您将需要一个日期格式化程序，因为创建它们的成本很高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:16:00.987

JSON 不支持将日期作为标准类型，因此无法自动序列化`NSDate`. 您必须传递日期的字符串表示或数字时间戳表示。例如，您可以通过执行以下操作将其序列化为时间戳：

```
[d setObject:@([[NSDate date] timeIntervalSince1970]) forKey:@"date"] 
```

# mysql - 从 GROUP BY 中获取 MAX

> ID：14414055
> 
> 赞同：7
> 
> 时间：2013-01-19T11:54:49.867
> 
> 标签：mysql, sql, select, group-by

当我遇到这种情况时，我正在练习一些 SQL。我想看看某种商品出现了多少次，然后从那里得到出现次数最多的*商品*。

这显示了每种商品出现了多少次：

```
mysql> SELECT commodity, COUNT(commodity) count FROM orders GROUP BY commodity ORDER BY count;
+----------------------+------------+
| commodity            |    count   |
+----------------------+------------+
| PERSIAN MELON        |          4 |
| BEANS                |          6 |
| CASABA               |         10 |
| ASPARAGUS            |         11 |
| EGGPLANT             |         12 |
| TOMATOES, CHERRY     |         16 |
| GALIA MELON          |         18 |
+-----------------------------------+ 
```

我试图获得最高的行，但这都是错误的：

```
mysql> SELECT commodity, MAX(COUNT(commodity)) count FROM orders GROUP BY commodity ORDER BY count; 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-19T12:07:05.847

注意：查询将不会处理具有最大值的重复记录`COUNT`

```
SELECT  commodity,  COUNT(commodity) `count` 
FROM    orders 
GROUP   BY commodity
ORDER   BY `count` DESC 
LIMIT   1 
```

但这会，

```
SELECT  commodity,  COUNT(commodity) `count` 
FROM    orders 
GROUP   BY commodity
HAVING  COUNT(commodity) =
(
    SELECT MAX(`COUNT`) 
    FROM
    (
        SELECT  COUNT(commodity) `count` 
        FROM    orders 
        GROUP   BY commodity
    )   s
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T12:00:07.297

试试这个查询

```
 SELECT commodity,COUNT(commodity) AS count 
    FROM orders
GROUP BY commodity
ORDER BY count desc
   LIMIT 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T11:59:44.457

我会写：

```
select * from (SELECT commodity, COUNT(commodity) count FROM orders GROUP BY commodity ORDER BY count desc) where rownum <2; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T12:01:13.473

只需添加 desc 即可订购

```
SELECT commodity, COUNT(commodity) count FROM orders GROUP BY commodity ORDER BY count DESC; 
```

第一行将具有最大值并添加限制以获得仅此一条记录

```
SELECT commodity, COUNT(commodity) count FROM orders GROUP BY commodity ORDER BY count DESC LIMIT 1; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-19T12:02:29.637

看起来你做对了。除了`ORDER BY`按顺序订购它们`ASC`。让它下降

```
mysql> SELECT commodity, COUNT(commodity) count FROM orders GROUP BY commodity ORDER BY count DESC; 
```

# ext.net - Ext.Net 网格面板中的过滤器问题

> ID：14414058
> 
> 赞同：0
> 
> 时间：2013-01-19T11:54:58.273
> 
> 标签：ext.net

我正在使用 Ext.Net 开发一个应用程序，在 Gridpanel 中我遇到了过滤器的问题。

在过滤器中搜索所需的字符串后，网格中的分页无法正常工作，有时过滤器选项在网格面板中出现两次。

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T01:03:36.653

你应该更新你的 ext.net 组件。当我使用字符串过滤器开发应用程序时，没有问题。并请详细说明。

# android - 缩放效果可滚动图像

> ID：14414059
> 
> 赞同：2
> 
> 时间：2013-01-19T11:55:01.653
> 
> 标签：android, android-layout, android-canvas

![在此处输入图像描述](../Images/69393d60d9f4ddc1c35dc995ce79eca0.png)

我有一个布局，它包含一个水平滚动比例。

我的问题是如何在布局的中心制作这种类型的缩放效果？可能吗？我已经在画布上绘制比例并缩放画布？？

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T16:27:35.373

我想你想要一个转换：http: [//developer.android.com/reference/android/view/animation/Transformation.html](http://developer.android.com/reference/android/view/animation/Transformation.html)

您的 onDraw 方法中的代码将如下所示：

```
canvas.save();
transformation.transform(canvas);
drawable.draw(canvas);
canvas.restore(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T16:02:29.910

第 1 步：首先在画布上绘制比例（绘图）。

第 2 步：获取缩放区域，并将该区域应用为画布上的 clipRegion ..

第3步：从画布中获取位图，并在画布上应用比例绘制它，缩放轴心点将是您要缩放区域的中心点，

```
Bitmap.Config conf = Bitmap.Config.ARGB_8888; 
Bitmap bitmap_object = Bitmap.createBitmap(width, height, conf); 
Canvas canvas_object = new Canvas(bitmap_object);

/* now  draw your drawing on canvas_object */

Bitmap temp = bitmap_object;

Matrix matrix_object = new Matrix();

/* now set transform and scale on matrix_object to zoom */

Paint paint_object = new Paint();
paint_object.setFilterBitmap(true);

Region reg= /* region of your zooming area */
canvas_object.clipRegion(reg);
canvas_object.drawBitmap(temp,matrix_object,paint_object); 
```

# c++ - 将 std::stringstream 转换为 const char** 而不分配内存

> ID：14414063
> 
> 赞同：5
> 
> 时间：2013-01-19T11:55:31.160
> 
> 标签：c++, opencl, std, stringstream

据我了解， a`std::stringstream`在内部不是表示为 an`std::string`而是表示为一组`std::string`实例。（如果我错了，请纠正我）。

我有表示为 an 的数据`std::stringstream`，我想将它传递给一个 C 函数（`clCreateProgramWithSource`来自 OpenCL），该函数期望数据作为字符数组的数组。( `const char**)`.

是否有某种方法可以在*不*首先创建包含字符串流的全部内容的单个字符串的情况下执行此操作，例如通过以下方式：

```
std::string tmp1 = my_stringstream.str();
const char* tmp2 = tmp1.c_str();
const char** tmp3 = &tmp2; 
```

**编辑**

后续问题：

如果这是*不可能*的，是否有一些替代方法`std::stringstream`，继承自`std::ostream`，允许这种低级访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-06-26T12:21:56.477

通过获取 stringstream 的 streambuf，我们可以显式设置它应该使用的缓冲区：

```
#include <sstream>

constexpr size_t buffer_size = 512;

void dummy_clCreateProgramWithSource(const char **strings) {}

int main () {
  char * ss_buffer = new char[buffer_size];
  std::stringstream filestr; // TODO initialize from file
  filestr.rdbuf()->pubsetbuf(ss_buffer,buffer_size);
  const char** extra_indirection = const_cast<const char **>(&ss_buffer);
  dummy_clCreateProgramWithSource(extra_indirection);
  return 0;
} 
```

注意 const_cast 告诉什么可能是谎言；我们向 OpenCL 保证在调用 clCreateProgramWithSource 后我们不会写入字符串流。

# javascript - node.js files.upload.path 未定义

> ID：14414068
> 
> 赞同：0
> 
> 时间：2013-01-19T11:56:06.553
> 
> 标签：javascript, node.js

我正在阅读节点初学者书籍，我正处于最后一步。在这段代码中：

```
var form = new formidable.IncomingForm();
form.parse(request,function(error,fields,files){
    fs.rename(files.upload.path,"/tmp/test.png",function(error){
        if(error){
            fs.unlink("/tmp/test.png");
            fs.rename(files.upload.path,"/tmp/test.png");
        }

    });
}); 
```

终端告诉我 files.upload 未定义 - 我不知道为什么 - 谁能告诉我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-23T09:46:41.957

我也有同样的问题。我通过删除 server.js 上的 request.setEncoding("utf8")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-22T00:35:14.453

我猜你在windows机器上。他的例子是在 Linux 上。我通过将路径更改为“/Users/[USER]/AppData/Local/Temp/test.png”来修复它（在所有地方都使用了其他路径）

# c - 在一台机器上构建opencv exe并在另一台没有安装opencv的机器上运行？

> ID：14414070
> 
> 赞同：1
> 
> 时间：2013-01-19T11:56:07.953
> 
> 标签：c, linux, image-processing, opencv, deployment

我正在使用 Netbeans IDE 在 linux 机器上开发 OpenCV 应用程序。我需要在**另一台未安装 opencv 的机器上**运行相同的应用程序。有可能做到吗？或者我运行应用程序的机器需要安装opencv？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T12:10:01.737

是的，可以使用静态链接，但通常 OpenCV 不会分发已编译的静态库。您必须编译自己的 .a 并链接到这些文件以创建独立的可执行文件。

编辑：看看[这个问题](https://stackoverflow.com/questions/11300071/how-to-compile-a-standalone-opencv-executable)

# ruby-on-rails - 注册控制器中的自定义方法与设计

> ID：14414071
> 
> 赞同：0
> 
> 时间：2013-01-19T11:56:12.057
> 
> 标签：ruby-on-rails, devise

我有一个已定义的用户，我希望能够让他确认他的帐户正在重新输入他的电子邮件和姓名（因为这些已由第三方填写）。所以这就是我所拥有的：

```
def confirm_account
    if request.get?
      self.resource = resource_class.to_adapter.get!(send(:"current_#{resource_name}").to_key)
    elsif request.put?
      self.resource = build_resource(resource_params)
      if self.resource.save 
      else
        respond_with resource
      end
    end
  end 
```

在我的模板中，我有：

```
<%= simple_form_for(resource, :as => resource_name, :url => confirm_account_path(resource_name), :html => { :method => :put, :autocomplete => "off", :class => 'form-vertical' }) do |f| %>
  <%= devise_error_messages! %>
    <h1> Create your Account </h1>
    <%= f.input :first_name, :label => "First Name" %>
    <%= f.input :last_name, :label => "Last Name" %>
    <%= f.input :email, :label => "Email add." %>
  <p>
    <%= f.button :submit, "Create account" %>
  </p>
<% end %> 
```

但是，当我单击提交按钮时，我在日志中看到以下内容：

```
 (0.3ms)  BEGIN
  User Exists (0.5ms)  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'myemail@gmail.com' LIMIT 1
   (0.3ms)  ROLLBACK
Completed 406 Not Acceptable in 5ms (ActiveRecord: 1.1ms) 
```

为什么不让我尝试更新用户？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:58:21.043

因为你没有定义它。

在此处查看Devise::RegistrationsController 中的其他操作如何定义`resource`： [https ://github.com/plataformatec/devise/blob/master/app/controllers/devise/registrations_controller.rb](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/registrations_controller.rb)

# c - C - 结构和列表

> ID：14414074
> 
> 赞同：1
> 
> 时间：2013-01-19T11:56:33.643
> 
> 标签：c, arrays

我想将两个数组的笛卡尔积保存到一个多维数组中。

`arr[number][0]`- 来自第一个数组的
`arr[number][1]`数字 - 来自第二个数组的数字

数 = sizeof(array1)*sizeof(array2)

```
int main() {
    int arr1[4] = {1, 4, 2, 3};
    int arr2[4] = {4, 1, 3, 3};
    int **outcomes = getProduct(arr1, 4, arr2, 4);

    int i;
    for(i = 0; i < 16; i++)
        printf("%d", outcomes[i][0]);

    getchar();
}

int* getProduct(int arr1[], int size1, int arr2[], int size2) {
    int **outcomes = (int *)malloc(sizeof(int)*16), count = 0, i, j;

    for(i = 0; i < size1; i++) {
        for(j = 0; j < size2; j++) {
            outcomes[count][0] = arr1[i];
            outcomes[count][1] = arr2[j];
            count++;
        }
    }
    return outcomes;
}; 
```

但是，这段代码在 getProduct() 函数内的嵌套循环中出现了奇怪的中断。逻辑没问题，我认为问题可能出在指针上。

1.  为什么我需要用两个指针初始化多维数组？
2.  为什么这段代码不起作用？
3.  你对我如何改进这段代码有什么建议吗？（我没有用 C 编写太多代码，所以我不知道“好”代码使用哪种结构）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:15:21.740

该函数`getProduct`将失败，因为您将指向 int(ie `int*`) 的指针分配给指向 int 指针 (ie `int**`) 的指针。

```
Why do I need to initialize multidimentional arrays with two pointers? 
```

因为

`int**`（指向 int 指针的指针） - 有了这个，我们可以访问任何行和任何列的元素，这是使用单个指针（或一维数组）不可能实现的

类似地`int***`可用于三维数组或换句话说指向 int 指针的指针

```
 To improve the code 
```

我认为你的笛卡尔积函数应该是这样的

```
int** getProduct(int arr1[], int size1, int arr2[], int size2) {
    int **outcome = malloc(sizeof(int*)*size1);        
    int i,j;
    for(i = 0;i<size1;i++)
     outcome[i] = malloc(sizeof(int)*size2);
    for(i = 0; i < size1; i++) {
        for(j = 0; j < size2; j++) {
            outcome[i][j] = arr1[i] * arr2[j];
        }
    }
    return outcome;
} 
```

你的 main() 像这样

```
int main() {
    int arr1[4] = {1, 4, 2, 3};
    int arr2[4] = {4, 1, 3, 3};
    int **outcomes = getProduct(arr1, 4, arr2, 4);

    int i,j;
    for(i = 0; i < 4; i++){
     for(j = 0;j <4; j++){
        printf("%d  ", outcomes[i][j]);
     }
     printf("\n");
    }
    getchar();
} 
```

# php - .html() 调用后忽略 Jquery 延迟

> ID：14414077
> 
> 赞同：2
> 
> 时间：2013-01-19T11:56:54.793
> 
> 标签：php, javascript, jquery

我试图在加载图像后引入延迟，但它一直跳过 .delay()

```
$(\"#output\").html(\"<center><img src='http://i.imgur.com/GM6KJdh.gif' /></center>\").delay(5000); 
```

我已经尝试了上述代码的许多版本，但它仍然有效

感谢帮助的家伙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:02:58.263

AFAIK 该`delay()`函数只是延迟了随后队列中的函数。所以你需要在`delay()`.

也许你可以试试

```
.delay(5000).finish(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T12:04:35.660

来自[jQuery 文档](http://api.jquery.com/delay/)

> .delay() 方法最适合在排队的 jQuery 效果之间进行延迟。因为它是有限的——例如，它不提供取消延迟的方法——.delay() 不能替代 JavaScript 的本机 setTimeout 函数，这可能更适合某些用例。

您的图像正在加载，然后触发延迟，然后......接下来会发生什么取决于您。但是由于 .delay 附加到`#output`，你只能对 .delay 做一些事情`#output`。例如，您可以将其淡出。

```
$("#output").html("<center><img src='http://i.imgur.com/GM6KJdh.gif' /></center>").delay(5000).fadeOut(); 
```

[http://jsfiddle.net/M2GRj/](http://jsfiddle.net/M2GRj/)

如果您想在加载图像*之前*有延迟，请在设置 html 之前使用延迟。

```
$("#output").hide().delay(5000).html("<center><img src='http://i.imgur.com/GM6KJdh.gif' /></center>").fadeIn(); 
```

[http://jsfiddle.net/M2GRj/3/](http://jsfiddle.net/M2GRj/3/)

如果您想在图像加载后引起暂停，然后再进行一些独立的操作，请为您的图像提供一个 ID，并在加载事件上调用一个带有 setTimeout 的函数。

```
$("#output").html("<center><img id='img1' src='http://i.imgur.com/GM6KJdh.gif' /></center>");
// Note: You can only use this after #img1 has been added to the DOM
$('#img1').load(function(){setTimeout('alert("hello")',5000);}); 
```

[http://jsfiddle.net/M2GRj/5/](http://jsfiddle.net/M2GRj/5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T12:06:46.613

正如 jQuery 文档中所解释的，[`.delay()`](http://api.jquery.com/delay/)它是一种 jQuery 动画方法，它只会延迟后续动画（在同一元素上），它不会延迟非动画方法的结果，也不会“暂停”代码执行。因此，您在所示代码行之后的任何代码行都将立即执行。

假设您要做的是在执行下一行之前等待两秒钟，您可以这样做：

```
$("#output").html("<center><img src='http://i.imgur.com/GM6KJdh.gif' /></center>");
setTimeout(function() {
   // your other code here
}, 2000); 
```

这使用 JavaScript 的内置[`setTimeout()`函数](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)来延迟执行您在传递给它的函数中放置的任何代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T12:09:14.870

jQuery API 说：

> .delay() 方法允许我们延迟队列中跟随它的函数的执行。它可以与标准效果队列或自定义队列一起使用。只有队列中的后续事件被延迟

作为一个例子检查下面

执行以下语句时，元素向上滑动 300 毫秒，然后暂停 800 毫秒，然后淡入 400 毫秒。

```
$('#foo').slideUp(300).delay(800).fadeIn(400); 
```

如果您在延迟后没有任何后续事件，那么您可以使用`JavaScript's native setTimeout function`

如何使用`setTimeout function`？

```
setTimeout(function() {
  //your code
}, 2000);  // will work with every browser 
```

有关更多信息，请检查[**.delay()**](http://api.jquery.com/delay/)和[**setTimeout**](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)

# c# - AffectsMeasure 或 AffectsArrange

> ID：14414083
> 
> 赞同：2
> 
> 时间：2013-01-19T11:57:25.040
> 
> 标签：c#, wpf, layout

我正在创建自定义控件，如果 Dependency 属性之一发生更改，我需要在其中更新布局。我可以使用`FrameworkMetadataProperty.AffectsMeasure`or `FrameworkMetadataProperty.AffectsArrange`。

**Q.1** - 我很困惑该使用哪一个。

此外，我还可以使用 UpdateLayout 和 InvalidateVisual 方法来更新 UI。

**Q.2** - 所有这 4 个东西看起来都很相似，但不知道什么时候使用哪一个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-19T13:05:17.637

[首先，设置FrameworkPropertyMetadataOptions](http://msdn.microsoft.com/en-us/library/system.windows.frameworkpropertymetadataoptions.aspx)和调用 UpdateLayout 或 InvalidateVisual 方法之间的区别是显而易见的。在后一种情况下，您在控制代码中调用这些方法，而在前一种情况下，框架调用适当的方法。

`AffectsMeasure`和之间的区别`AffectsArrange`只是一个导致对[UIElement.InvalidateMeasure](http://msdn.microsoft.com/en-us/library/system.windows.uielement.invalidatemeasure.aspx)的调用（“影响布局的测量传递”），另一个导致对[UIElement.InvalidateArrange](http://msdn.microsoft.com/en-us/library/system.windows.uielement.invalidatearrange.aspx)的调用（“影响布局的排列传递”）。

[从UIElement.Measure](http://msdn.microsoft.com/en-us/library/system.windows.uielement.measure.aspx)的备注中可以清楚地看出区别：

> 当一个布局第一次被实例化时，它总是在 Arrange 之前收到一个 Measure 调用。但是，在第一次布局传递之后，它可能会收到没有 Measure 的 Arrange 调用；当仅影响 Arrange 的属性发生更改（例如对齐）时，或者当父级收到没有 Measure 的 Arrange 时，可能会发生这种情况。Measure 调用将自动使 Arrange 调用无效。

并来自[UIElement.InvalidateMeasure](http://msdn.microsoft.com/en-us/library/system.windows.uielement.invalidatemeasure.aspx)中的备注：

> 调用该方法内部也会调用InvalidateArrange，无需依次调用InvalidateMeasure和InvalidateArrange

* * *

更新：关于 UpdateLayout 和 InvalidateVisual 之间的区别，请参阅[UpdateLayout](http://msdn.microsoft.com/en-us/library/system.windows.uielement.updatelayout.aspx)中的备注：

> 当您调用此方法时，IsMeasureValid 为 false 或 IsArrangeValid 为 false 的元素将调用特定于元素的 MeasureCore 和 ArrangeCore 方法，这会强制更新布局，并且将验证所有计算的大小。
> 
> 如果布局不变，或者布局的排列和测量状态均无效，则调用此方法无效。但是，如果布局在任一方面无效，则 UpdateLayout 调用将重做整个布局。因此，您应该避免在元素树中的每个增量和微小更改之后调用 UpdateLayout。布局系统将以延迟的方式执行元素布局，使用平衡性能和货币的算法，并使用加权策略将更改延迟到根，直到所有子元素都有效。仅当您绝对需要更新大小和位置时才应调用 UpdateLayout，并且只有在您确定对您控制的和可能影响布局的属性所做的所有更改都已完成之后。

在[InvalidateVisual](http://msdn.microsoft.com/en-us/library/system.windows.uielement.invalidatevisual.aspx)中：

> 此方法在内部调用 InvalidateArrange。
> 
> 此方法通常不会从您的应用程序代码中调用。WPF 框架级布局系统自己处理元素的可视化树中的更改，并在必要时调用此方法的等效方法。只有高级场景才需要调用此方法。一种这样的高级方案是，如果您正在为不在 Freezable 或 FrameworkElement 派生类上的依赖项属性创建 PropertyChangedCallback，该派生类在更改时仍会影响布局。

# php - 通过键数组从数组中选择值

> ID：14414084
> 
> 赞同：0
> 
> 时间：2013-01-19T11:57:27.350
> 
> 标签：php, arrays, subset, array-key

我有两个长度相同的数组，其中包含一些值。

```
$a = array("a","b","x","x");
$b = array("f","g","g","h"); 
```

现在我想`$b`从 where `$a`is的索引位置获取值`x`。

```
 $ids = array_keys($a, 'x');
 $res = ???($b,$ids);
 print_r($res); 
```

那么什么函数会给我一个包含`g`and的数组`h`。还是有更优雅的（例如不使用`array_keys()`）来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:10:35.873

```
$needle = 'x';
$res    = array();
foreach($a as $key => $value) {
    if ($value == $needle) {
        $res[] = $b[$key];
    }
} 
```

# iphone - 在 UITableView 中更改 sectiontitle 的 backgroundColor

> ID：14414085
> 
> 赞同：0
> 
> 时间：2013-01-19T11:57:30.733
> 
> 标签：iphone, uitableview, xcode4.5

我有一个`UITableView`with 部分和我设置的标题，`titleForHeaderInSection`如下所示：

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
  return [NSString stringwithFormat :@"Section %d",section];
} 
```

默认情况下，它带有灰色背景，文本颜色为白色。如何将其更改为其他颜色。？

通过谷歌，发现设置在`viewForHeaderinSection`. 但我没有用它来设置标题。所以我不想在里面写。

我怎样才能把它写进去`titleForHeaderInSection`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-04T15:22:38.847

在 iOS 6 及更高版本中

```
[[UILabel appearanceWhenContainedIn:[UITableViewHeaderFooterView class], nil] setTextColor:[UIColor whiteColor]];
[[UILabel appearanceWhenContainedIn:[UITableViewHeaderFooterView class], nil] setFont:[UIFont systemFontOfSize:18.0f]];
[[UIView appearanceWhenContainedIn:[UITableViewHeaderFooterView class], nil] setBackgroundColor:[UIColor redColor]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T12:06:30.203

```
 - (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:  (NSInteger)section 
    {
       UIView *headerView = [[[UIView alloc] initWithFrame:CGRectMake(0, 0,          tableView.bounds.size.width, 30)] autorelease];
       if (section == integerRepresentingYourSectionOfInterest)
             [headerView setBackgroundColor:[UIColor redColor]];
       else 
             [headerView setBackgroundColor:[UIColor clearColor]];
      return headerView;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T12:34:04.083

`titleForHeaderInSection`：此委托`UITableView`仅用于设置文本。您可以在下面看到它的返回类型 it `NSString`。

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    // fixed font style. use custom view (UILabel) if you want something different
} 
```

为了实现节标题的自定义视图，您唯一的选择是`viewForHeaderInSection`委托方法。`titleForHeaderInSection`我可以保证您无法使用此外，您无法设置标题的视图，其行为与您可以看到的实现方式`viewForHeaderInSection`完全相同：`titleForHeaderInSection`

```
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    //Customized your view however you want.

    return myCustomizedView;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T12:16:10.380

```
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    UIView *tempView=[[[UIView alloc]initWithFrame:CGRectMake(0,0,300,25)]autorelease];
    tempView.backgroundColor=[UIColor grayColor];
    UILabel *tempLabel=[[UILabel alloc]initWithFrame:CGRectMake(0,0,300,25)];
    tempLabel.backgroundColor=[UIColor clearColor];
    NSString * headerText = [NSString stringWithFormat:@"%d",section];
    tempLabel.text= headerText;
    [tempView addSubview: tempLabel];
    [tempLabel release];
    return tempView;
} 
```

**和**

```
- (float)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    return 25;
} 
```

# php - $_FILES[$file][type] php 变量值

> ID：14414086
> 
> 赞同：0
> 
> 时间：2013-01-19T11:57:31.000
> 
> 标签：php, mime-types

几年前有一种观点认为，$_FILES[$file]['type'] 包含从浏览器发送的 mimetype，但不是真正的 mimetype，例如这里：

[http://php.net/manual/ru/reserved.variables.files.php#109902](http://php.net/manual/ru/reserved.variables.files.php#109902)

还是这样吗？我还需要使用 fileinfo 扩展名来检测 mimetype 吗？（我正在使用 php5.4）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:59:36.407

是的，`type`由浏览器提供的数据填充。

从关于[POST 方法上传](http://php.net/manual/en/features.file-upload.post-method.php)的手册页：

> $_FILES['userfile']['type']
> 
> 文件的 MIME 类型（如果浏览器提供此信息）。一个例子是**"image/gif"**。然而，这种 mime 类型在 PHP 端没有被检查，因此不要认为它的价值是理所当然的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T12:00:01.960

是的，情况仍然如此。这`type`是客户端提供的 MIME 信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T12:05:34.663

我总是为此使用 fileinfo，但如果您使用 flash 上传器，您可能会发现几乎所有使用 flash 上传器上传的文件都被检测为`application/octet-stream`.

因为这个......我还有一个“从扩展名检测mimetype”方法，如果文件被`application/octet-stream`fileinfo检测到，它将检查它的扩展名并尝试确定真正的文件类型。

# android - 使用 Netbeans 引用 android 库项目时的构建时间

> ID：14414087
> 
> 赞同：0
> 
> 时间：2013-01-19T11:57:34.457
> 
> 标签：android, netbeans, ant

找不到答案。我正在使用 Netbeans 开发 Android 应用程序。我正在尝试在我的项目中引用 actionbarsherlock，它工作得很好。我的问题是，ant 构建工具总是在构建我的项目之前构建 actionsbarsherlock 库，这非常耗时。有没有办法告诉 ant，只在必要时构建库项目（在我的情况下从来没有，因为我不会对 actionbarsherlock 进行任何更改）？

谢谢，迈克尔

更新：正如 Raghav Sood 在评论中所说，将 ABS 引用为 jar 文件有助于缩短构建时间，但如果您以这种方式引用它，您将无法使用 ABS 的资源，例如 Theme.Sherlock 等。

# java - 在 Spring MVC 中使用 beetwen Beans 配置文件和注解的区别？

> ID：14414088
> 
> 赞同：0
> 
> 时间：2013-01-19T11:57:35.240
> 
> 标签：java, spring, spring-mvc

我正在学习 Spring MVC，我找到了这个简单的 Hello World 教程：[http ://www.tutorialspoint.com/spring/spring_hello_world_example.htm](http://www.tutorialspoint.com/spring/spring_hello_world_example.htm)

在本教程中，作者创建了一个名为**Beans.xml的****Bean 配置文件**，如下所示：

 **```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

   <bean id="helloWorld" class="com.tutorialspoint.HelloWorld">
       <property name="message" value="Hello World!"/>
   </bean>

</beans> 
```

使用 tis 文件，Spring 框架可以创建所有定义的 bean，并为它们分配一个唯一的 ID，如 tag 中定义的那样。我可以使用标签来传递对象创建时使用的不同变量的值。

这是众所周知的豆厂吗？

我的疑问与以下事情有关：在我之前的示例中，我没有使用 Bean 配置文件来定义我的 bean，但我使用注解来定义什么是 Spring bean 以及这个 bean 是如何工作的（例如我使用**@控制器**注释说 Spring 一个类充当控制器 Bean)

使用bean配置文件和使用注解的意思一样吗？

我可以同时使用吗？

例如，如果我必须配置 JDBC，我可以在 beans.xml 文件中配置它，同时我可以为我的 Controller 类使用注释吗？

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:12:57.723

是的，你可以做那件事。在下面找到一个示例，其中控制器使用注释和 sessionFactory 编写，并且数据源已创建为连接到服务的 xml bean -

```
<beans ...>
    <!-- Controller & service base package -->
    <context:component-scan base-package="com.test.employeemanagement.web" />
    <context:component-scan base-package="com.test.employeemanagement.service"/>

    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
           ...
    </bean>
    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="annotatedClasses">
        <list>
            <!-- <value>com.vaannila.domain.User</value> -->
            <value>com.test.employeemanagement.model.Employee</value>
            ...
        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${hibernate.dialect}</prop>
            ...
        </props>
    </property>
    </bean>
    ...
</beans> 
```

注入 SessionFactory 的服务示例。

```
@Repository
public class EmployeeDaoImpl implements EmployeeDao {

    @Autowired
    private SessionFactory sessionFactory;
} 
```

我希望它对你有帮助。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:09:51.770

您可以通过 xml 和注释来使用 bean 配置。您甚至可以在 xml 配置文件中定义您的控制器。

使用@Controller 注解允许您使用组件扫描来查找您的 bean。控制器是一个简单的原型 bean（这就是为什么您可以简单地将其声明为您的 xml 文件）。

有关@Controller 用法/语义的更多详细信息，请[点击此处](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch16s11.html#mvc-ann-controller)**

# ruby - 如何在 Padrino 应用程序中安装 Sinatra 应用程序？

> ID：14414096
> 
> 赞同：1
> 
> 时间：2013-01-19T11:58:48.703
> 
> 标签：ruby, sinatra, rack, padrino

Resque/Sidekiq 带有一个 Web 前端，它是一个 Sinatra 应用程序。

在 Rails 应用程序中安装它的方法是将其添加到路由（[http://railscasts.com/episodes/366-sidekiq?view=asciicast](http://railscasts.com/episodes/366-sidekiq?view=asciicast)）：

```
mount Sidekiq::Web, at: "/sidekiq" 
```

我如何在 Padrino 应用程序中安装它？像其他 Rack 应用程序一样在 config.ru 中映射它不起作用

```
map '/sidekiq' do
  run Sidekiq::Web
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T11:58:48.703

Padrino 使用 Padrino.mount，它期望应用程序响应依赖项和 setup_application。这个 hack ( [https://gist.github.com/1718723](https://gist.github.com/1718723) ) 允许您在 Padrino 应用程序中安装 Sinatra 应用程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T13:20:52.717

Padrino 应用程序是一个机架应用程序，`config.ru`您会在其中看到

```
require ::File.dirname(__FILE__) + '/config/boot.rb'
run Padrino.application 
```

您可以将其更改为使用 Rack::URLMap

```
require ::File.dirname(__FILE__) + '/config/boot.rb'
run Rack::URLMap.new("/sidekiq" => Sidekiq::Web.new, "/app" => Padrino.application.new) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-17T03:49:53.170

1.  添加`gem 'sidekiq'`到 Gemfile
2.  `bundle install`
3.  将以下行添加到`config/boot.rb`

    ```
    Padrino.before_load do
      Padrino.dependency_paths << Padrino.root('app/workers/*.rb')
    end 
    ```

4.  将以下行添加到`config/apps.rb`

    ```
    require 'sidekiq/web'

    Padrino.mount('Sidekiq', app_class: 'Sidekiq::Web', app_root: Sidekiq::Web.root).to('/sidekiq') 
    ```

5.  在`app/workers/`

6.  跑`bundle exec sidekiq -r ./config/boot.rb`

# php - 如何动态添加图像？

> ID：14414102
> 
> 赞同：0
> 
> 时间：2013-01-19T11:59:11.807
> 
> 标签：php, html, css

我对 Web 开发和 PHP 非常陌生。可能这是一个简单的问题，但在互联网上搜索了很多但找不到解决方案。

我的 CSS 中有这段代码：

```
.categories .cat_sec {
   float: left;
   width: 232px;
   height: 360px;
   padding-top: 10px;
   margin-right: 1px;
}

.categories .cat_sec h5 {
   width: 232px;
   color: #FFF;
   padding: 10px 0px;
}

.categories .cat_sec .cats {
   width: 232px;
   height: 50px;
   background-repeat: no-repeat;
   padding-top: 259px;
}

.categories .cat_sec .cat1 {
   background-image: url(../images/gold/bangles.gif);
} 
```

并通过以下方式在 HTML 中调用此 CSS 样式：

```
<div class="cat_sec"> 
   <h5> <?php echo $mCollections_array['SubCollectionName']; ?></h5>
   <div class="cats cat1">  
      <ul>
         <li><a href="listing.php">Some Text </a></li> 
         <li><a href="listing.php">SomeText</a></li>
         <li class="viewall"><a href="listing.php">View All</a></li>
      </ul>
   </div>
</div> 
```

我必须从服务器动态更改图像。但我对在这行代码中更改图像一无所知`<div class="cats cat1">`。在这`cat1`表示已经定义的图像。

如何在上面的代码中动态添加图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:43:41.190

您可以使用内部 CSS：

```
<div class="cats" style="background-image:url('your/path/to/image');">  
  <ul>
     <li><a href="listing.php">Some Text </a></li> 
     <li><a href="listing.php">SomeText</a></li>
     <li class="viewall"><a href="listing.php">View All</a></li>
  </ul>
 </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:45:29.413

根据你对我说的：**你想用 PHP 编辑一个 CSS 文件**

[看这个](https://stackoverflow.com/questions/1584388/how-do-i-edit-an-external-css-file-with-php)，[这个](http://php.net/manual/en/function.fopen.php)和[这个](http://css-tricks.com/css-variables-with-php/)

您还可以将 PHP 嵌入到 CSS 文件中来为您做这些事情。

**现在正在回答**

# javascript - 如何从 HTML 页面访问 Gnome 应用程序 JavaScript 函数？

> ID：14414103
> 
> 赞同：1
> 
> 时间：2013-01-19T11:59:19.883
> 
> 标签：javascript, html, gtk, gnome-3

我学习了[如何将 HTML 页面嵌入到 gnome](http://developer.gnome.org/gnome-devel-demos/unstable/hellognome.js.html.en) JavaScript 应用程序并在 Gtk+ 框架中显示它。

```
// Create a webview to show the web app
this._webView = new Webkit.WebView ();

// Put the web app into the webview
this._webView.load_uri (GLib.filename_to_uri (GLib.get_current_dir() +
    "/hellognome.html", null));

// Put the webview into the window
this._window.add (this._webView);

// Show the window and all child widgets
this._window.show_all(); 
```

现在我要使用 JavaScript 从这个 HTML (hellognome.html) 文件访问 Gtk+ API（如访问文件系统）或我的 gnome JavaScript 应用程序中的 JavaScript 函数？

像这样的东西：

```
<html>
    <head>
        <title>Hello, GNOME!</title>

        <!-- Use JavaScript to show a greeting when someone clicks the button -->
        <script type="application/javascript">
        function greeting () {
            document.getElementById ("greeting").innerHTML = ("O hai!");

            //// access to a Gtk+ API (like accessing to file system ) 
                 or a JavaScript function in my gnome JavaScript application.

        }
        </script>
    </head>
    <body>
        <br /> <br />
        <button type="button" onclick="greeting()">Hello, GNOME!</button>

        <!-- Empty H1 element gets filled in when the button is clicked -->
        <h1 id="greeting"></h1>
    </body>
</html> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T22:33:09.983

You can't use GTK APIs from inside the JS inside the HTML. You'll have to set up some method of communication between the two. For example, connect to the [`window-object-cleared`](http://webkitgtk.org/reference/webkitgtk/stable/webkitgtk-webkitwebview.html#WebKitWebView-window-object-cleared) signal and set some methods on the window object.

# java - Java - 数组列表

> ID：14414104
> 
> 赞同：0
> 
> 时间：2013-01-19T11:59:21.583
> 
> 标签：java, arrays, static

我创建了一个客户端对象，我想创建一个存储信息客户端对象的数组列表。

代码位置：Client.java

```
ArrayList<Client> ClientInfo = new ArrayList<Client>();

public ArrayList<Client> getClientInfo() {
    return ClientInfo;
} 
```

代码位置：客户端处理.java

```
c.setClientId(Client.getClientInfo().size());

    Client.getClientInfo().add(c); 
```

ClientHandling.java 错误：

[http://vvcap.net/db/ncilHaCfjUY6JeszCnWJ.png](http://vvcap.net/db/ncilHaCfjUY6JeszCnWJ.png)

[http://vvcap.net/db/ySzyKvM2qT9mu7pqBCmZ.png](http://vvcap.net/db/ySzyKvM2qT9mu7pqBCmZ.png)

有任何想法吗？

编辑：我的客户处理类不是静态的！这就是我遇到的问题。它不是静态的，出于某种原因，它告诉我它是静态的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T12:07:36.843

您使用了错误的语法。在 Java 中，类名以大写字母开头，变量名以小写字母开头。如果您使用 Client 作为变量名并且 Client 也是一个类，那么您就会遇到问题，因为 Client.getClientInfo() 是一个静态调用，因为 Client 是一个类。

所以你的代码应该是这样的：

```
ArrayList<Client> clientInfo = new ArrayList<Client>();

public ArrayList<Client> getClientInfo() {
    return clientInfo;
} 
```

代码位置：客户端处理.java

```
c.setClientId(client.getClientInfo().size());

client.getClientInfo().add(c); 
```

最后，您在哪里创建 c 和客户端的实例？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T12:02:26.560

`getClientInfo()`是一个非静态方法，您正试图从静态方法调用它。您需要创建 getClientInfo() 所在类的实例并对该实例进行调用。

```
public static void someMethod() {
Client c=new Client();
c.setClientId(c.getClientInfo().size());
    c.getClientInfo().add(c);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T12:02:09.340

`Client`是类。您必须使`getClientInfo()`函数成为`static`. 当你在做的时候，也要制作`ClientInfo`静态的。

# c# - 将数据集合保存到本地文件夹

> ID：14414108
> 
> 赞同：0
> 
> 时间：2013-01-19T11:59:36.630
> 
> 标签：c#, .net, windows-8

```
[DataContract]
class UserData
{
    [DataMember]
    public string Name { get; set; }

    [DataMember]
    public int ID { get; set; }

    [DataMember]
    public int phoneNumber { get; set; }

    [DataMember]
    public string Course { get; set; }
    [DataMember]
    public Uri Image { get; set; }
}

[DataContract]
class UserItems
{
    [DataMember]
    static ObservableCollection<UserData> _items = new ObservableCollection<UserData>();
    [DataMember]
    public static ObservableCollection<UserData> Items
    {
        get { return _items; }
    } 
```

这就是`AppDataManager`课堂

```
class AppDataManager
{
    public static async Task SaveAsync<T>(T data, string fileName)
    {

        StorageFile file = await ApplicationData.Current.LocalFolder.CreateFileAsync(fileName, 
            CreationCollisionOption.GenerateUniqueName);

        var stream = await file.OpenStreamForWriteAsync();
        var serializer = new DataContractSerializer(typeof(T));

        serializer.WriteObject(stream ,data);
        await stream.FlushAsync();
    }

    public static async Task<T> RestoreAsync<T>(string fileName)
    {
        try
        {
            var file = await ApplicationData.Current.LocalFolder.GetFileAsync(fileName);

            var instream = await file.OpenStreamForReadAsync();
            var serializer = new DataContractSerializer(typeof(T));
            return (T)serializer.ReadObject(instream);
        }
        catch (Exception)
        {
            return default(T);
        }
    }
}
} 
```

我试图保存一个对象并且它起作用了，但是集合是我的问题，我正在使用的应用程序是在他每次输入数据时保存用户数据。

**问题是：**如何保存数据集合以及如何将其作为数据集合检索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T17:32:34.407

检查此链接，它是关于 Windows Phone 环境的，但我认为它也适用于您的情况： http: [//geekswithblogs.net/mikebmcl/archive/2010/12/29/datacontractserializer-type-is-not-serializable-because-它不是公共的.aspx](http://geekswithblogs.net/mikebmcl/archive/2010/12/29/datacontractserializer-type-is-not-serializable-because-it-is-not-public.aspx)。使用属性装饰您的`_items`私人成员`DataMember`可能是问题所在。

如果不是这样，可能`ObservableCollection<T>`与.`DataContractSerializer``List<T>``DataMember`

# xcode - 使用 XCode 4.3.2 进入 OpenSSL 代码

> ID：14414109
> 
> 赞同：1
> 
> 时间：2013-01-19T11:59:38.980
> 
> 标签：xcode, debugging, openssl

我在互联网上找到了这个项目：[https](https://github.com/x2on/OpenSSL-for-iPhone) ://github.com/x2on/OpenSSL-for-iPhone 。

它有一个演示应用程序，可以计算 MD5 值并从编辑框中获取文本输入。在演示应用程序中，我可以进入计算 MD5 值的 OpenSSL 代码。

我正在使用 XCode 4.3.2。我有一个项目也使用 OpenSSL。在项目中，SSL 握手出现问题（此代码在 OpenSSL 中执行）。

虽然我已经使用“x2on”中的构建脚本构建了库（libcrypto.a 和 libssl.a）并将这些库添加到我的项目中，但我无法从我自己的项目中进入对 OpenSSL 方法的调用。

当我将设置与我自己的应用程序进行比较时，我也找不到演示应用程序中存在的任何相关设置（来自“x2on”）。如果我尝试进入 OpenSSL 调用，则执行将继续进行到下一行（我没有进入 .asm 代码，也没有进入 OpenSSL 代码）。此外，如果我使用鼠标右键并选择“跳转到定义”，它会将我带到 OpenSSL 头文件而不是实现 (.c)。

有人可以在这里给出一些提示吗？一般而言，“步入”应该如何工作？库 (.a) 是否包含对源代码位置的引用？在 XCode 中哪里可以设置源代码的搜索路径？如何强制 XCode 重新索引包括 OpenSSL 代码在内的代码并使“跳转到定义”工作？

感谢任何帮助，因为我确实发现了更多正在或一直在努力解决这个问题的人。

补充：我创建了一个小型测试应用程序，将 libcrypto.a 和 libssl.a 添加到 Frameworks 文件夹，并将 OpenSSL 头文件的路径包含在 Build Settings | 标题搜索路径。步入一段 OpenSSL 代码/方法没问题...但是，当我将相同的策略应用于我的大型项目时，它会跳过 OpenSSL 调用而不是步入 OpenSSL 调用...我听说每个项目应该只引用一次静态库吗？如果项目多次引用静态库，那么这是否会破坏单步执行该库代码的功能......？

忘了补充：对于小型测试应用程序，无需指明 OpenSSL 源文件的位置。所以我的初步结论是 .a 库包含对 OpenSSL 源文件的引用（否则 XCode 怎么可能知道源文件的位置？）。

分享一些进一步的信息：在我的大型项目和测试应用程序中，都无法通过选择“跳转到定义”来跳转到源代码。因此，进入代码和“跳转到定义”似乎/无关。

# ruby-on-rails - 尽管 URI 正确，但 Gravatar 图像未显示 - Ruby on Rails

> ID：14414110
> 
> 赞同：4
> 
> 时间：2013-01-19T11:59:40.513
> 
> 标签：ruby-on-rails, ruby, gravatar

我正在阅读 Michael Hartl Rails 教程，但在“添加 Gravatar”部分时遇到了一个奇怪的问题。我已经对照 Rails 中 Gravatar 的另一个实现检查了代码，我为不同的教程做了，但看不出有什么不同。

基本上：图像不会出现，但如果您右键单击该空间并访问它指向正确 Gravatar 页面的 URL。

代码：（show.html.erb）

```
<%= gravatar_for @user %> 
```

代码：（users_helper.rb）

```
def gravatar_for(user, options = { size: 50 })
    size = options[:size]
    gravatar_id = Digest::MD5::hexdigest(user.email.downcase)
    gravatar_url = "https://secure.gravatar.com/avatars/#{gravatar_id}.png?s=#{size}"
    image_tag(gravatar_url, alt: user.name, class: "gravatar")
end 
```

完全被难住了，知道我错过了很明显的事情，但是从书和 Gravatar 网站上，我似乎已经做到了这一点......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T01:59:00.190

网址错误

```
gravatar_url = "https://secure.gravatar.com/avatars/#{gravatar_id}.png?s=#{size}" 
```

正确版本

```
gravatar_url = "https://secure.gravatar.com/avatar/#{gravatar_id}.png?s=#{size}" 
```

单数形式“.../avatar/....”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-13T05:55:28.267

我遇到了同样的问题，我通过在 Adblock 和 ghostery 中将 Cloud9 页面列入白名单来解决

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-23T09:29:00.070

对我来说同样的问题。[我通过将 gravatar_url 更改为“ http://gravatar.com/avatar/#](http://gravatar.com/avatar/#) {gravatar_id}”而不是 https 连接来修复它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T14:26:44.070

那是整个 users_helper.rb 文件吗？

我的看起来像这样：

```
module UsersHelper

  # Returns the Gravatar (http://gravatar.com/) for the given user.
  def gravatar_for(user)
    gravatar_id = Digest::MD5::hexdigest(user.email.downcase)
    gravatar_url = "https://secure.gravatar.com/avatar/#{gravatar_id}"
    image_tag(gravatar_url, alt: user.name, class: "gravatar")
  end
end 
```

随着

> 模块用户助手

和一个额外的

> 结尾

# android - 为什么 Google 不使用 jarsigner 来签署 apk？

> ID：14414119
> 
> 赞同：0
> 
> 时间：2013-01-19T12:00:45.440
> 
> 标签：android, adt

在Android源码项目中，发现ADT不使用jarsigner对APK进行签名，如：

```
jarsigner -sigalg MD5withRSA -digestalg SHA1 -keystore *pathtokey* -storepass *yourpass*         -keypass *yourpass* *app.apk* *keyalias* 
```

或者

```
String args[] = {"-keystore", keystore, "-storepass", password, jar, keyname};
JarSigner js = new JarSigner();
js.run(args); 
```

，ADT会读取keystore并通过编码对apk进行签名，这真的让我很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T12:38:51.190

也许当时只有 sun.security.* 实现可用，他们不想将 sun.* 包导入 Android 源。所以他们创建了自己的签名者实现。

[http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/security/tools/JarSigner.java](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/security/tools/JarSigner.java)

# javascript - Javascript / Jquery 使用变量访问对象

> ID：14414123
> 
> 赞同：-1
> 
> 时间：2013-01-19T12:01:28.823
> 
> 标签：javascript, jquery, arrays, object

> **可能重复：**
> [动态对象属性名称](https://stackoverflow.com/questions/4244896/dynamic-object-property-name)

通过 ajax 调用，我收到一个对象：E

此对象包含许多子元素：`width`、`height`等。

`console.log (E.width)`给了我所有的元素`E.width`

当我分配一个var时：`tempElement = 'width'`

为什么 console.log(e.tempElement) 返回“未定义”以及如何通过变量访问对象的子元素

```
$(function () {
    $('#widthSelect').on('change', function () {
        var updateArray = new Array();
        updateArray[0] = 'height';
        updateArray[1] = 'rim';
        updateArray[2] = 'load';
        updateArray[3] = 'speed';
        updateArray[4] = 'brand';
        updateArray[5] = 'season';
        getValues(updateArray);
    });

    function getValues(updateArray) {
        var data = updateArray.join('=&') + '=';
        $.ajax({
            type: 'POST',
            dataType: 'json',
            url: '******',
            data: data,
            success: function (e) {
                element = updateArray[0];
                console.log(e.element);
            }
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T12:15:46.330

试试这个：

```
console.log( e[element] ); 
```

当您使用“点表示法”时`e.element`，后面的位`.`将按字面意思作为属性名称。您的对象没有名为的属性，`"element"`因此您得到`undefined`. 如果使用数组样式表示法，方括号内的位将作为表达式求值，结果将用作属性名称。

```
e.width
// is equivalent to
e["width"] // note the quotation marks
// and equivalent to
someVariable = "width";
e[someVariable]
// and also equivalent to
e[someFunction()]  // assuming someFunction() returns the string "width" 
```

# hornetq - HornetQ 客户端 STOMP

> ID：14414127
> 
> 赞同：0
> 
> 时间：2013-01-19T12:01:55.483
> 
> 标签：hornetq, stomp

为什么我不能使用**hornetq-core-client.2.2.21.Final.jar**创建一个简单的 stomp 客户端？

```
Map<String, Object> properties = new HashMap<String, Object>();
properties.put("host", "localhost");
properties.put("port", 61612);
properties.put("protocol", "stomp");
TransportConfiguration transportConfiguration = new TransportConfiguration(NettyConnectorFactory.class.getName(), properties);
ServerLocator serverLocator = HornetQClient.createServerLocatorWithoutHA(transportConfiguration);
ClientSessionFactory clientSessionFactory = serverLocator.createSessionFactory();
ClientSession clientSession = clientSessionFactory.createSession();
clientSession.createQueue("queue", "queue", true);
ClientProducer clientProducer = clientSession.createProducer("queue");
ClientMessage clientMessage = clientSession.createMessage(true);
clientMessage.getBodyBuffer().writeString("Hello");
clientProducer.send(clientMessage); 
```

我收到以下错误：

> java.lang.IllegalStateException：以下键对配置连接器无效：协议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T08:53:47.100

您应该使用 Stomp 协议来发送消息：

```
public void sendViaStomp(Serializable obj, String queueName) 
    {
        try 
        {
            Socket socket = new Socket("127.0.0.1",61612);

            String connectFrame = "CONNECT\n" +
                    "login: guest\n" +
                    "passcode: guest\n" + 
                    "request-id: 1\n" +
                    "\n"+
                    END_OF_FRAME;
            sendFrame(socket, connectFrame);

            String text = (String) obj;
            String messageFrame = "SEND\n" +
                    "destination: jms.queue." + queueName + "\n" +
                    "\n"+
                    text + 
                    END_OF_FRAME;
            sendFrame(socket, messageFrame);

            System.out.println("Sent Stomp Message:" + text);

            String disconnectFrame = "DISCONNECT\n" +
                    "\n" + 
                    END_OF_FRAME;
            sendFrame(socket, disconnectFrame);

            socket.close();
        } 
        catch (UnknownHostException e) 
        {
            e.printStackTrace();
        }
        catch (IOException e) 
        {
            e.printStackTrace();
        }
    }
private void sendFrame(Socket socket, String data)
    {
        byte[] bytes;
        try 
        {
            bytes = data.getBytes("UTF-8");
            OutputStream outputStream = socket.getOutputStream();
            for (int i = 0; i < bytes.length; i++)
            {
                outputStream.write(bytes[i]);
            }
            outputStream.flush();
        } 
        catch (UnsupportedEncodingException e)
        {
            e.printStackTrace();
        } 
        catch (IOException e)
        {
            e.printStackTrace();
        }
    } 
```

# javascript - 对于函数内部

> ID：14414131
> 
> 赞同：1
> 
> 时间：2013-01-19T12:02:23.863
> 
> 标签：javascript

我无法理解这个功能：

```
function power(base, exponent) {
  var result = 1;
  for (var count = 0; count < exponent; count++)
    result *= base;
  return result;
}

show(power(2, 10)); 
```

如果基数和指数在函数内部没有任何关系，怎么可能`show(power(2, 10))`等于？`1024`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:12:39.487

给出函数内部基数和指数之间关系的关键部分是：

`count < exponent;`

这意味着`result`乘以 的`base`循环恰好运行`exponent`次数。这正是指数的定义：来自[维基百科](http://en.wikipedia.org/wiki/Exponentiation)：

> 取幂对应于重复乘法；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:06:04.940

这个函数完成了这项工作。对于 0 到 10，将值乘以 2，这就是 pow(2, 10) 的含义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T12:06:50.180

我建议使用调试器逐步完成它。 `base`并且`exponent`在函数中是相关的：`base`本质上是乘以自身的`exponent`时间，因为`exponent`是循环上的计数器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T12:06:54.613

它确实有关系。

底数 = 2
指数 = 10

它会做的是 FOR(COUNT < Exponent)，所以它会在函数中循环 10 次。并将结果每次乘以基数。这是2。

所以

1.  1 * 2 = 2（新结果 = 2）
2.  2 * 2 = 4（新结果 = 4）
3.  4 * 2 = 8（新结果 = 8）
4.  8 * 2 = 16
5.  16 * 2 = 32
6.  32 * 2 = 64
7.  64 * 2 = 128
8.  128 * 2 = 256
9.  256 * 2 = 512
10.  512 * 2 = 1024

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-19T12:06:57.483

2 的 10 次方是 2 x 2 x 2 x 2 x 2 x 2 x 2 x 2 x 2 x 2 您将变量初始化为 1，这是乘法的单位元素 (1 x N = N)，然后计算 A 的 B 次方，

```
result = 1
FOR 1 TO B
    result = result * A
return result; 
```

# mysql - 为什么 MySQL 会选择错误的索引？

> ID：14414135
> 
> 赞同：11
> 
> 时间：2013-01-19T12:02:31.540
> 
> 标签：mysql, indexing, database-performance

我在 MySQL 中有一个分区表，如下所示：

```
CREATE TABLE `table1` (
   `id` bigint(19) NOT NULL AUTO_INCREMENT,
   `field1` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL,
   `field2_id` int(11) NOT NULL,
   `created_at` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
   PRIMARY KEY (`id`,`created_at`),
   KEY `index1` (`field2_id`,`id`)
) ENGINE=InnoDB AUTO_INCREMENT=603221206 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci
/*!50100 PARTITION BY RANGE (to_days(created_at))
(PARTITION p_0 VALUES LESS THAN (730485) ENGINE = InnoDB,
  ..... lots more partitions .....
 PARTITION p_20130117 VALUES LESS THAN (735250) ENGINE = InnoDB) */; 
```

这是对表的典型 SELECT 查询：

```
 SELECT field1 from TABLE1 where field2_id = 12345 and id > 13314313; 
```

解释一下，MySQL 有时决定使用 PRIMARY 而不是 index1。当您进行第一次解释时，这似乎非常一致。然而，经过几次反复解释，MySQL 最终还是决定使用索引。问题是，这个表有数百万行，并且插入和选择以每秒几次的顺序命中它。选择错误的索引会导致这些 SELECT 查询最多花费约 40 秒，而不是亚秒级。无法真正安排停机时间，因此我无法在表上运行优化（由于大小，可能需要很长时间），并且不确定在这种情况下它是否会有所帮助。

我通过强制索引解决了这个问题，所以它看起来像这样：

```
 SELECT field1 from TABLE1 FORCE INDEX (index1) WHERE field2_id = 12345 and id > 13314313; 
```

我们在 MySQL 5.1.63 上运行它，目前我们无法摆脱它。

我的问题是，为什么 MySQL 选择了错误的索引？除了在所有查询上强制索引之外，还有什么可以解决的吗？分区是否混淆了 InnoDB 引擎？我用 MySQL 做了很多工作，以前从未见过这种行为。查询尽可能简单，索引也是完美匹配。我们有很多查询都假设 DB 层会做正确的事情，我不想通过所有这些查询来强制使用正确的索引。

更新1：

这是典型的解释，没有 FORCE INDEX 子句。放入后，可能的键列仅显示强制索引。

```
 id select_type   table     type    possible_keys    key     key_len  ref   rows
  1 SIMPLE        table1    range   PRIMARY,index1   index1  12       NULL  207 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T12:34:38.177

我不是 100% 确定，但我认为这听起来很合乎逻辑：

你分区你的表`BY RANGE (to_days(created_at))`。该`created_at`字段是primary_key的一部分。您的选择查询正在使用主键的另一部分。这样，服务器优化引擎认为这将是最快的索引 - 使用分区和`id`-primary-part。

我建议（不知道导致您选择的真正原因）将您的分区范围更改为 id 并更改 index1-key 的顺序。

有关分区的更多信息，[请查看](http://www.mysqlperformanceblog.com/2010/12/11/mysql-partitioning-can-save-you-or-kill-you/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:21:26.690

我不确定为什么引擎会选择不正确的索引。我认为具有 EQUALITY 测试的索引将取代具有 >、< 或范围的索引。但是，另一个可能有助于强制正确索引的选项是在另一个 id 列上强制“计算”值，因此引擎可能无法与索引直接相关......类似

```
WHERE field2_id = 12345 and id > 13314313 
```

变成

```
WHERE field2_id = 12345 and id + 0 > 13314313 
```

# c# - 使用 numericUpDown 更改文本框中的小数位

> ID：14414138
> 
> 赞同：0
> 
> 时间：2013-01-19T12:02:50.677
> 
> 标签：c#, winforms, decimal, numericupdown

我使用 Visual Studio 2010，windows 窗体（c#）。

我需要使用 numericUpDown1 更改文本框中值的小数位。

例子：

![在此处输入图像描述](../Images/cc3cffe359470ba0532c74957486ac40.png) ![在此处输入图像描述](../Images/fbea147ea72734a39f9a3f1771d5a9ca.png)

![在此处输入图像描述](../Images/eb4ddbc14d1ac1404b69faeba13fc600.png) ![在此处输入图像描述](../Images/a1c2eb7a9170b92d36d286ead60b30ca.png)

![在此处输入图像描述](../Images/06288ad78a43f4c0e6babcbf5b272182.png) ![在此处输入图像描述](../Images/9b623b34133b96aa09372838988dec13.png)

![在此处输入图像描述](../Images/9a143311a242f2bc7817a5fb62520a0b.png) ![在此处输入图像描述](../Images/400fb1e3f38c28bd81b93527eee47628.png)

![在此处输入图像描述](../Images/de939a0951bf4bceb3be05e04a489f2d.png) ![在此处输入图像描述](../Images/0ea8560c71eade490bdd0e8bdc55dd32.png)

我试过这段代码：

```
private void numericUpDown1_ValueChanged(object sender, EventArgs e)
    {

      //  tbxConvertito.Text = (decimal.Parse(tbxConvertito.Text) * 10m).ToString();

        if (numericUpDown1.Value == 0)
        {
            int decimalPlace = 0;
           // Decimal xDecimal = decimal.Parse(tbxConvertito.text);

            decimal xDecimal = decimal.Parse(tbxConvertito.Text);
            tbxConvertito.Text = (Math.Round(xDecimal, decimalPlace)).ToString();
        }

        if (numericUpDown1.Value == 1)
        {
            int decimalPlace = 1;
            // Decimal xDecimal = decimal.Parse(tbxConvertito.text);

            decimal xDecimal = decimal.Parse(tbxConvertito.Text);
            tbxConvertito.Text = (Math.Round(xDecimal, decimalPlace)).ToString();
        }

    } 
```

但不工作。请问我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T12:42:41.563

您应该使用十进制值创建字段，以保持原始值。

如果你这样做：

```
int decimalPlace = 1;
decimal xDecimal = decimal.Parse(tbxConvertito.Text);
tbxConvertito.Text = (Math.Round(xDecimal, decimalPlace)).ToString(); 
```

你失去了你的十进制变量的原始值。

试试这个：

```
public partial class Form1 : Form
{
        public decimal myDecimal = 3755.25012345M;

        public Form1()
        {
            InitializeComponent();

            tbxConvertito.Text = myDecimal.ToString();

            numericUpDown1_ValueChanged(this, EventArgs.Empty);
        }

        private void numericUpDown1_ValueChanged(object sender, EventArgs e)
        {          
            int decimalPlace = (int)numericUpDown1.Value;
            tbxConvertito.Text = Decimal.Round(myDecimal, decimalPlace).ToString();
        }
} 
```

没有使用方法的解决`Round`方法：

```
 public partial class Form1 : Form
    {
        public decimal myDecimal = 3755.25012345M;

        public Form1()
        {
            InitializeComponent();

            tbxConvertito.Text = myDecimal.ToString();

            numericUpDown1_ValueChanged(this, EventArgs.Empty);
        }

        private void numericUpDown1_ValueChanged(object sender, EventArgs e)
        {          
            int decimalPlace = (int)numericUpDown1.Value;

            string[] numbers = myDecimal.ToString().Split(new char[] { '.', ',' });

            string tmp = string.Empty;

            if (decimalPlace <= numbers[1].Length)
            {
                tmp = "," + numbers[1].Substring(0, decimalPlace);

                if (tmp.EndsWith(","))
                    tmp = string.Empty;
            }
            else
                tmp = "," + numbers[1];

            tbxConvertito.Text = numbers[0] + tmp;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:44:07.303

`String`您可以使用操作来实现此目的。试试这个

```
decimal xDecimal = decimal.Parse(tbxConvertito.Text);
string str = xDecimal.ToString();
if (!str.Contains(","))
            decimalPlace--;
tbxConvertito.Text = str.Replace(",", "").Insert((str.Length-1) - decimalPlace,","); 
```

并在您的代码中像这样使用它

```
private void numericUpDown1_ValueChanged(object sender, EventArgs e)
{

  //  tbxConvertito.Text = (decimal.Parse(tbxConvertito.Text) * 10m).ToString();

    if (numericUpDown1.Value == 0)
    {
        int decimalPlace = 0;
       // Decimal xDecimal = decimal.Parse(tbxConvertito.text);

        decimal xDecimal = decimal.Parse(tbxConvertito.Text);
        string str = xDecimal.ToString();
        if (!str.Contains(","))
            decimalPlace--;
        tbxConvertito.Text = str.Replace(",", "").Insert((str.Length-1) - decimalPlace,",");
    }

    if (numericUpDown1.Value == 1)
    {
        int decimalPlace = 1;
        // Decimal xDecimal = decimal.Parse(tbxConvertito.text);

        decimal xDecimal = decimal.Parse(tbxConvertito.Text);
        string str = xDecimal.ToString();
        if (!str.Contains(","))
            decimalPlace--;
        tbxConvertito.Text = str.Replace(",", "").Insert((str.Length-1) - decimalPlace,",");
    }

} 
```

# html - 无法从隐藏的 HTML 标签中提取数据

> ID：14414149
> 
> 赞同：1
> 
> 时间：2013-01-19T12:04:22.340
> 
> 标签：html, excel, vba

下面的 HTML 代码充当工具提示信息，出现在鼠标悬停在链接上。使用 .getelementbyclassname 方法，我无法从页面中获取值“故事和体验”。我猜，在加载时工具提示可见之前，HTML 代码不可用于提取。如何使其可见或提取数据？

我正在使用 EXCEL VBA 来执行此操作。

```
 <div id="ext-comp-1115" class="x-tip rich-tooltip" style="position: absolute; z-index: 25000; visibility: hidden; padding: 3px 0px 5px; width: 323px; left: 131px; top: 168px; display: none;">
<div class="ellipsis">Type: <span class="rich-tooltip-item">Story &amp; Experience</span></div></div></div> 
```

VBA代码：

```
Dim IE As New InternetExplorer
IE.navigate "https://swym.3ds.com/#post:16884"
IE.Visible = True
Do
DoEvents
Loop Until IE.readyState = READYSTATE_COMPLETE
Application.Wait (Now() + TimeValue("00:00:016"))
Dim doc As HTMLDocument
Set doc = IE.document
Dim dd As Variant
dd = doc.getElementsByClassName("ellipsis").tags("span") 
MsgBox dd 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-03-17T19:16:50.727

doc.getElementsByClassName("ellipsis").tags("span") 返回一个对象而不是字符串值。我相信您正在寻找标签的 innerText 属性，所以要么......

```
'Set dd equal to the "span" tag object
Set dd = doc.getElementsByClassName("ellipsis").tags("span")
MsgBox dd.innerText 
```

或者

```
'Assign the "span" tag object's innerText string value to the dd variable
dd = doc.getElementsByClassName("ellipsis").tags("span").innerText
MsgBox dd 
```

# django - 创建一个大网址

> ID：14414150
> 
> 赞同：0
> 
> 时间：2013-01-19T12:04:23.700
> 
> 标签：django, url, sorting, view, filtering

有参考：sort1、sort2 filter1、filter2

我们点击一​​个 sort1 并有一个新的 url，如：`www.example.com?sort=1`

然后我们点击filter1，我们必须有：`www.example.com?sort=1&filter=1`

然后我们点击filter2，我们必须有：`www.example.com?sort=1&filter=2`

等等...

我该怎么做，添加更多参数？我的参数会互相改变，而且总是只有一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:15:17.153

`sort`像你这样的查询参数将通过变量`filter`传递给你的`/`路由。`GET`所以你的 URLconf 看起来像：

**网址.py**

```
...
url(r'^/$',
    sorter
), 
```

请注意，您不要将`GET`参数放在 URLconf 中。相反，它们以键值方式解析并放入[HTTPRequst](https://docs.djangoproject.com/en/1.4/ref/request-response/#httprequest-objects)对象，该对象将传递给您的视图。您的视图如下所示：

**视图.py**

```
def sorter(request):
   ... 
```

在这个视图中，您可以`GET`通过 访问您的参数`request.GET`。例如，您可能使用`request.GET['sort']`来获取`sort`参数的值。因为参数是键/值对，所以基本上可以按任意顺序拥有任意数量的参数，而使用它们取决于视图的逻辑。您可能希望从[本教程的第 4 部分](https://docs.djangoproject.com/en/1.4/intro/tutorial04/)开始获取请求处理的示例，注意 URL 查询参数是传入的，`request.GET`而不是`request.POST`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:13:15.027

尝试[文档](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs)中的一些示例，替换`POST`为`GET`模板和视图中的示例，看看会发生什么

# c# - 使用委托从不同线程更新 UI

> ID：14414152
> 
> 赞同：0
> 
> 时间：2013-01-19T12:04:38.173
> 
> 标签：c#, multithreading, delegates

我有一个管理 UI 的类，其中包含此方法：

```
public void SetField(int field, int value) 
```

我有一个代表声明：

```
public delegate void SetFieldDelegate(int field, int value); 
```

在按钮按下事件中，我在后台线程上调用另一个类的计算量大的方法。UI 没有冻结，工作正在完成。有时，我想更新 UI，但我尝试为此使用委托，以避免跨线程操作：

```
Gui.SetFieldDelegate TestDelegate = new Gui.SetFieldDelegate(gui.SetField); 
```

在繁重的工作方法中，我调用：

```
TestDelegate.Invoke(field, value); 
```

但这仍然是无效的跨线程操作。我敢肯定这是微不足道的，但我迷路了。此外，如果有更简单的方法可以做到这一点，欢迎提出任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T12:07:49.007

您正在调用*delegate*，它不会对线程做任何事情 - 它只是同步调用它`Invoke`。

 *您需要调用`Invoke`UI 的元素，例如

```
form.Invoke(TestDelegate, value); 
```

或者`BeginInvoke`改为：

```
form.BeginInvoke(TestDelegate, value); 
```

假设您使用的是 Windows 窗体。如果您使用的是 WPF 或 Silverlight，则需要使用`Dispatcher.Invoke`or`Dispatcher.BeginInvoke`代替，例如

```
form.Dispatcher.BeginInvoke(TestDelegate, value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T12:07:24.567

您需要使用`Dispatcher.BeginInvoke(DispatcherPriority.Input, () => { /* do some UI work - updating etc*/ });`WPF 或`this.BeginInvoke (new MethodInvoker(() => /* do some UI work - updating etc*/));`Winforms。*

# php - 从数据库加载数据 + ajax + php

> ID：14414153
> 
> 赞同：1
> 
> 时间：2013-01-19T12:04:40.210
> 
> 标签：php, mysql, ajax, database

我有一个关于从数据库加载多个字段并在 javascript 中使用它们的问题。

这是我的“死亡”表，其中包含以下字段：

```
- district
- year_1999
- year_2000
- year_2001
- year_2002
- year_2003
- year_2004
- year_2005
- year_2006
- year_2007
- year_2008
- year_2009 
```

现在我想加载字段 year_.... 当 District = 'districtname'

这就是我所拥有的：（PHP）

```
$host = "localhost";
  $user = "root";
  $pass = "root";

  $databaseName = "testdatabase";
  $tableName = "deaths";

  //--------------------------------------------------------------------------
  // 1) Connect to mysql database
  //--------------------------------------------------------------------------

  $con = mysql_connect($host,$user,$pass);
  $dbs = mysql_select_db($databaseName, $con);

  //--------------------------------------------------------------------------
  // 2) Query database for data
  //--------------------------------------------------------------------------
  $result = mysql_query("SELECT year_1999,year_2000,year_2001,year_2002,year_2003,year_2004,year_2005,year_2006,year_2007,year_2008,year_2009 FROM $tableName WHERE district = 'Binnenstad'");          //query

  $data = array();
  while ( $row = mysql_fetch_row($result) )
  {
    $data[] = $row;
  }
  echo json_encode( $data ); 
```

Javascript：

```
$(function () 
  {
    //-----------------------------------------------------------------------
    // 2) Send a http request with AJAX http://api.jquery.com/jQuery.ajax/
    //-----------------------------------------------------------------------
    $.ajax({                                      
      url: './api4.php',                  //the script to call to get data          
      data: "",                        //you can insert url argumnets here to pass to api.php
                                       //for example "id=5&parent=6"
      dataType: 'json',                //data format      
      success: function(rows)          //on recieve of reply
      {
        //--------------------------------------------------------------------
        // 3) Update html content
        //--------------------------------------------------------------------

        for (var i in rows)
        {
          var row = rows[i];          

          var data = row[0];

          $('#districts ul').append("<li>" + data + "</li>")
                  .append();
        } 
      } 
    });
  }); 
```

但这仅显示第一列数据（year_1999）。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T12:18:17.273

而是`for (var i in rows) ...`尝试：

更新。仔细看看你的 php，试着`something like`每年画一下：

```
$.each(rows, function(i, data) {
    $.each(data, function(j, year) {
        $('#districts ul').append("<li>" + year + "</li>")

    });
}); 
```

# javascript - JS - 将连接（对象）从一个函数传递到另一个函数

> ID：14414155
> 
> 赞同：1
> 
> 时间：2013-01-19T12:05:02.730
> 
> 标签：javascript, node.js

我是 JS 新手，我有一个简单的问题。我正在编写一个 node_redis 代码来连接到数据库。我创建了一个 db 模块，其中有一个 init 函数来启动连接。该模块还有另一个查询数据库的功能。对于查询，我需要第一个函数中的连接（dbConnection）对象，然后在第二个函数中使用它。我该怎么做呢？我可以通过使用全局变量来完成它，但大多数地方告诉我这是一个坏主意。

对不起，如果这个问题很愚蠢，我正在学习如何编码。谷歌的结果告诉我可以通过将其作为对象属性传递来完成。但我不知道这是否是在我的上下文中做事的正确方法，甚至不知道如何去做。

```
var redis = require('redis'); 

module.exports = redisDb = {
// Initialize the module. Invokes callback when ready (or on error)
init: function(config, callback) {

    // Open the database connection
    var dbConnection = redis.createClient(config.db.port, config.db.host, {no_ready_check: true}); 

    dbConnection.auth(config.db.authKey, function() {
        console.log("Connected!");
        console.log(dbConnection.keys('*'));
    });

    dbConnection.on('connect'     , log('connect'));
    dbConnection.on('ready'       , log('ready'));
    dbConnection.on('reconnecting', log('reconnecting'));
    dbConnection.on('error'       , log('error'));
    dbConnection.on('idle'         , log('idle...'));
    dbConnection.on('end'         , log('end'));

    function log(type) {
        return function() {
            console.log(type, arguments);
        }
    }
    callback("callback - Connected");
},

getValue: function(key, callback) {
    dbConnection.hgetall("hosts", function (err, obj) {
    console.dir(obj);
    });
}
}; 
```

编辑：尝试了另一种方式。仍然失败。

```
module.exports = redisDb = (function() {
var config = require('../config');
var redis = require('redis'); 

return {
    connection: function(config) {
        var dbConnection = redis.createClient(config.db.port, config.db.host, {no_ready_check: true}); 

        dbConnection.auth(config.db.authKey, function() {
            console.log("Authenticated!");
        });
        return dbConnection
    },
    getValue: function(connection, callback) {
        connection.hgetall("hosts", function (err, obj) {
        console.dir(obj);
        });
    }
}
})(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:14:55.333

现在一种方法是如您所说创建`dbConnection`一个对象属性。另一种方法是调用`init()`，`getValue()`每次你想要一些值时都会建立不同的连接。

因为数据库连接是一种宝贵的资源，我会说最好使用第二种变体。当然，您需要`dbConnection`从`init()`.

PS：全局变量最初是为这些事情制作的，然后人们发现越少越好。这就是为什么使用全局变量被认为是一种不好的风格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T23:17:08.090

我通过简单地在父函数中声明连接来使代码工作。

```
module.exports = _redisDb = (function() {

    var redis = require('redis'); 
    var config = require('../config');

    var dbConnection = redis.createClient(config.db.port, config.db.host, {no_ready_check: true});
    dbConnection.auth(config.db.authKey, function() {
        console.log("Authenticated!");
    });

    var getValue = function() {
            dbConnection.hgetall("hosts", function (err, obj) {
            console.dir(obj);
            });
        }

    return {
        getValue: getValue
    }
})(); 
```

虽然上述工作，我仍然希望有人告诉我如何在同一模块的函数之间传递变量/对象。

# c++ - 在子进程之间共享指针

> ID：14414156
> 
> 赞同：1
> 
> 时间：2013-01-19T12:05:05.300
> 
> 标签：c++, ipc, shared-memory, popen

我有一个 64 位应用程序，它通过 popen2 实现创建 2 个子进程（32 位）。一切都是用 C++ 编写的。

我需要 2 个子进程来访问内存中的同一个对象，我不知道如何做到这一点。

如果我理解正确，每个子进程都会有不同的内存映射，因此我不能只在两者之间传递内存地址。

附加信息：目标平台是 Mac ~~，但我正在寻找一个尽可能独立于平台的~~答案 Mac 特定的答案很好，我可能不会在其他平台上使用这种方法。我只是对使用线程知之甚少；我走这条路是因为子进程必须是 32 位的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T12:13:03.833

您可以使用[*共享内存*](http://en.wikipedia.org/wiki/Shared_memory)概念。这意味着，您分配（使用操作系统服务）一个内存，这两个子进程都可以看到。

正如 wiki 推荐的那样，您可以使用[boost.interprocess](http://www.boost.org/doc/libs/1_52_0/doc/html/interprocess.html)在平台无关级别上使用共享内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T12:10:25.230

这是一个难题。

您是正确的，每个进程都有自己的地址空间。一个进程创建的对象不能被另一个进程访问。

可以使用共享内存，并将对象放在那里。一个复杂的问题是，通常共享内存段将在不同的地址映射到每个进程的地址空间。这意味着您不能在这些对象中使​​用指针。这可以通过使用索引而不是指针来缓解。

此外，如果进程 A 是 32 位，进程 B 是 64 位，则原始类型（例如）`long`可以具有不同的宽度。因此，在这种情况下共享数据时，您需要使用固定宽度类型，例如`int32_t`.

最后一个复杂性是同步：如果一个进程可以在另一个进程读取或修改对象时修改它，则需要引入进程间同步。

# ruby-on-rails - Rails 在用户范围内隐藏/过滤特定于管理员的 javascript 文件

> ID：14414158
> 
> 赞同：2
> 
> 时间：2013-01-19T12:05:26.953
> 
> 标签：ruby-on-rails, asset-pipeline

我正在尝试将一些 js 文件的范围仅用于版主和管理员使用。使用该应用程序的普通用户不得看到这些 javascript 代码。我怎样才能做到这一点？任何建议都会很棒..

# c# - c# process/cmd 输出解析为变量

> ID：14414159
> 
> 赞同：0
> 
> 时间：2013-01-19T12:05:27.877
> 
> 标签：c#, process, cmd, progress-bar

我正在为命令行程序 rtmp-plugin 制作 gui。我需要从 cmd 程序读取输出数据到三个变量的方法：下载、时间和完成。在 cmd 输出中是示例“3000 kb / 12 sec (12%)”，没有“”。如何在没有 kb 的情况下获得 3000 个下载变量，在没有 sec 的情况下获得 12 个时间，在没有 () 和 % 的情况下获得 12 个完成。我在下面运行 cmd 进程的代码。

```
 int downloaded, time, done;
    var proc = new Process
        {
            StartInfo = new ProcessStartInfo
            {
                FileName = "Data/yle-dl/yle-dl.exe",
                Arguments = "-o pasila.flv http://areena.yle.fi/tv/1755554 --rtmpdump rtmpdump.exe ",
                UseShellExecute = false,
                RedirectStandardOutput = true,
                CreateNoWindow = false
            }
        };

        proc.Start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T12:33:52.630

您可以使用正则表达式捕获程序输出并解析值。请注意，您还应该捕获经常发生的错误输出，正常输出将作为错误处理。

```
 Process process = new Process();
 process.StartInfo.FileName = "Data/yle-dl/yle-dl.exe";
 process.StartInfo.Arguments = "-o pasila.flv http://areena.yle.fi/tv/1755554 --rtmpdump rtmpdump.exe ";
 process.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
 process.StartInfo.CreateNoWindow = true;
 process.StartInfo.RedirectStandardOutput = true;
 process.StartInfo.RedirectStandardError = true;
 process.StartInfo.UseShellExecute = false;
 process.OutputDataReceived += new DataReceivedEventHandler(ReadOutput);
 process.ErrorDataReceived += new DataReceivedEventHandler(ReadOutput);

 process.Start();
 process.BeginOutputReadLine();
 process.BeginErrorReadLine();

 process.WaitForExit();

  private static void ReadOutput(object sender, DataReceivedEventArgs e)
  {
     if (e.Data != null)
     {
       Match m = Regex.Match(e.Data, "(\\d+)[^0-9]*(\\d+)[^0-9]*(\\d+)[^0-9]");
       if (m.Success)
       {
        textBox1.Text = m.Result("$1");
        string time = m.Result("$2");
        string percent = m.Result("$3");
       }
     }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:21:42.327

如果命令行已经有某种输出，您可以使用[BeginOutputReadLine](http://msdn.microsoft.com/de-de/library/system.diagnostics.process.beginoutputreadline%28v=vs.110%29.aspx)来捕获它。

否则，您可以将程序集添加到程序引用中并访问程序用来指示您的状态的（如果存在）变量。

# maven - 使用“LATEST”和“RELEASE”版本后，maven 安装变得非常缓慢

> ID：14414165
> 
> 赞同：1
> 
> 时间：2013-01-19T12:05:47.840
> 
> 标签：maven, compilation

我在日常工作中使用 maven 2.2.1。最近我发现我的“maven install”变得很慢（大约慢了 3 倍）。

在做了许多编译和调试之后，我发现它有很多 RELEASE 和 LATEST 版本依赖项（它们曾经是特定的数字）阻碍了编译进度。

我知道“RELEASE”和“LATEST”都是 maven 中不推荐使用的函数，不应再使用。但是因为采用“RELEASE”和“LATEST”是我在工作中无法改变的。我只能用代码试试运气。他们在这里：

```
public class DefaultMavenProjectBuilder extends AbstractLogEnabled
implements MavenProjectBuilder, Initializable, Contextualizable
{
private Map processedProjectCache = new HashMap();

public MavenProject buildFromRepository( Artifact artifact,...) {
    String cacheKey = createCacheKey( artifact.getGroupId(), artifact.getArtifactId(), artifact.getVersion() );   //  <=========   the "get key"
    MavenProject project = (MavenProject) processedProjectCache.get( cacheKey );
    if ( project != null )
    {
        return project;
    }
    Model model = findModelFromRepository( artifact, remoteArtifactRepositories, localRepository, allowStubModel );
    ProjectBuilderConfiguration config = new DefaultProjectBuilderConfiguration().setLocalRepository( localRepository );
    MavenProject mavenProject = buildInternal("Artifact [" + artifact + "]", model, config, remoteArtifactRepositories,
            null, false);

    return mavenProject;
}

private MavenProject buildInternal(String pomLocation,
                                   Model model,
                                   ProjectBuilderConfiguration config,
                                   List parentSearchRepositories,
                                   File projectDescriptor,
                                   boolean strict, String cacheKey)
    throws ProjectBuildingException
{
    //...
    cacheKey = createCacheKey( project.getGroupId(), project.getArtifactId(), project.getVersion() );   //  <=========   the "set key"
    processedProjectCache.put( cacheKey, project );
    //...
}
} 
```

我发现主要原因是 buildInternal() 被调用了 10 倍以上。造成这种情况的原因是“set key”和“get key”变得不同，例如： set key: com.foo:bar:RELEASE get key: com.foo:bar:1.0.11

我的计划是将“get key”传递给buildInternal，并直接用作“set key”，但不确定这不会破坏其他东西......

有什么建议吗？

提前致谢 ：）

# ios - 是否有必要为 SELECT 语句锁定同时 SQLite 访问？

> ID：14414167
> 
> 赞同：3
> 
> 时间：2013-01-19T12:06:05.003
> 
> 标签：ios, multithreading, sqlite

我正在使用 FMDB 访问标准的 iOS 内部 SQLite 数据库，在多个线程之间共享一个 db 连接。

为了使其线程安全，我一次将对数据库的访问锁定为一个代码块。一切都很好，尽管显然现在对数据库的访问有点瓶颈。

我的问题是：只要它们都是只读的 SELECT 语句，我可以通过允许来自多个线程的同时查询来缓解这个问题吗？

我在任何地方都找不到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T13:36:44.310

您不能使用同一连接同时执行多个查询。

但是，对于纯只读访问，您可以使用多个连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T15:14:29.867

每个线程可以有一个`FMDatabase`对象。您可能必须编写代码来测试真正的繁忙情况并正确处理它们。例如设置`busyRetryTimeout`适合您的情况（例如，您希望它在争用情况下重试多长时间）。如果超时到期并且您的数据库查询失败，也可以优雅地处理。

显然，使用共享`FMDatabaseQueue`是从多个线程进行数据库交互的最简单方法。请参阅 FMDB 的[使用 FMDatabaseQueue 和线程安全](https://github.com/ccgus/fmdb/blob/master/README.markdown)部分`README`。

# javascript - 在新窗口中打开 Youtube 视频？

> ID：14414168
> 
> 赞同：0
> 
> 时间：2013-01-19T12:06:22.023
> 
> 标签：javascript, html

我正在使用以下 html 在页面中嵌入 youtube 窗口，

```
<iframe src="http://www.youtube.com/embed/VIDEO_ID" width="320" height="190"></iframe> 
```

是否有可能当我点击播放时，它应该将我重定向到 youtube 页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T16:50:28.337

我用另一个`div`来覆盖真实的`iframe`元素。因此，当用户单击他们认为的位置时，会触发`iframe`该事件。`div` `onclick`

你可以在这里看到一个演示[http://jsbin.com/uhajun/2/edit](http://jsbin.com/uhajun/2/edit)

# jquery - 使用 Fancybox 进行 jQuery 同位素过滤

> ID：14414180
> 
> 赞同：1
> 
> 时间：2013-01-19T12:07:22.723
> 
> 标签：jquery, fancybox, jquery-isotope, fancybox-2

我用 Imagegallery 创建了一个网站，该网站能够使用 jQuery Isotope 进行过滤。您可以单击缩略图，然后使用 fancybox 插件循环浏览图像：

[网站](http://agnesleppa.fi/)

现在的问题是，当 Imagegallery 被过滤时，fancybox 插件仍然循环遍历所有图像。即使是那些在应用过滤器时没有出现的人。

我不知道我该如何解决这个问题。

Fancybox 用`rel="gallery"`. 同位素决定了css类的过滤效果。因此，如果我将过滤 css 类添加到`rel=""`标签（同位素过滤类由 cms 生成），当显示所有内容时，我将不再能够循环浏览所有图像。

我真的无法理解这一点。你有任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T15:55:04.567

有一些代码会有所帮助。但是，我可以向您展示我是如何让 fancybox 处理过滤后的图像的。

我没有使用 rel=gallery，而是使用 data-fancybox-group=gallery。.fancybox 是我用同位素过滤字符串调用fancybox 的类。

```
// filter buttons
        $('#filters a').click(function(){
              var selector = $(this).attr('data-filter');
          $('#isotopegallery').isotope({ filter: selector }, function(){
            if(selector == "*"){
             $(".fancybox").attr("data-fancybox-group", "gallery");
            } else{ 
             $(selector).find(".fancybox").attr("data-fancybox-group", selector);
            }
          });
          return false;
        }); 
```

这一切都在过滤器按钮中。如果您无法使其工作，请分享您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-04T10:41:16.107

我尝试按照 ellenmva 解释的方式进行操作，但无法正常工作。我最终删除了该`$('#isotopegallery').isotope({ filter: selector }, function()`部分。所以我剩下的是：

```
$('.filterbutton').on("click", function(){
    var selector = $(this).attr('data-option-value');
    if(selector == "*"){
        $(".fancybox").attr("data-fancybox-group", "gallery");
    } else{ 
        $(selector).find(".fancybox").attr("data-fancybox-group", selector);
    }
   return false;
}); 
```

这似乎起到了作用，现在它工作得很好。

# java - 从 Prim 的 MST 到 Dijkstra SPT 的 Java 算法

> ID：14414183
> 
> 赞同：2
> 
> 时间：2013-01-19T12:07:28.077
> 
> 标签：java, algorithm

我正在遵循[Java](http://www.cs.princeton.edu/~rs/Algs3.java5/code.txt)中的[算法，第 5 部分：图形算法，第 3 版](http://www.informit.com/store/algorithms-in-java-part-5-graph-algorithms-9780201361216)书的代码，并在第 294 页中描述了我们可以通过修改 Prim 的最小生成树 (MST) 算法来获得经典的 Dijkstra 算法（我测试并工作很好）通过以下方式：将优先级分配从`P = e->wt()`边缘权重更改`P = wt[v] + e->wt()`为从源到边缘目的地的距离。问题是，当我进行更改时，随后的条件永远不会评估为`true`，这是可以理解的。`wt`是一个双数组，初始化为 eg`Double.MAX_VALUE`因此无论是什么`v`和`w`是，这个条件永远不会成立（假设非负权重）：

```
P = wt[v] + e->wt();
if (P < wt[w]) { // this can never happen ... bug?
   // ...
} 
```

我检查了这本书的网站，没有发现任何勘误表。

这是我的自包含代码版本，带有可运行的 Main 和书中的测试用例：

更新：

*   `wt[getSource().index] = 0.0;`在来自答案之一的反馈之后添加了初始化行。源顶点属于距离为零的 SPT。

    ```
    import java.util.*;

    public class AdjacencyList {
        //=============================================================
        // members
        //=============================================================
        private static class Edge {
            int source;
            int target;
            double weight;
        };
        private static class Vertex {
            int index;
            String name;
            List<Edge> edges = new ArrayList<Edge>();
            public Vertex(int index, String name) {
                this.index = index;
                this.name = name;
            }
        };
        private static final int UNDEFINED = -1;
        private int edgesCount = 0;
        private final Vertex[] vertices;
        private final boolean digraph;
        private int orderCount;

        //=============================================================
        // public
        //=============================================================
        public AdjacencyList(int verticesCount, boolean digraph) {
            this.vertices = new Vertex[verticesCount];
            this.digraph = digraph;
        }

        public Vertex createVertex(int index) {
            return createVertex(index, String.valueOf(index));
        }

        public Vertex createVertex(int index, String name) {
            Vertex vertex = new Vertex(index, name);
            vertex.index = index;
            vertex.name = name;
            vertices[index] = vertex;

            return vertex;
        }

        public Edge addEdge(int begin, int end, double weight) {
            return addEdge(vertices[begin], vertices[end], weight);
        }

        public Edge addEdge(Vertex begin, Vertex end, double weight) {
            edgesCount++;
            Edge edge   = new Edge();
            edge.source = begin.index;
            edge.target = end.index;
            edge.weight = weight;
            vertices[begin.index].edges.add(edge);
            if (!digraph) {
                Edge reverse = new Edge();
                reverse.source = end.index;
                reverse.target = begin.index;
                reverse.weight = edge.weight;
                vertices[end.index].edges.add(reverse);
            }
            return edge;
        }

        // inefficient find edge O(V)
        public Edge findEdge(int begin, int end) {
            Edge result = null;
            Vertex vertex = vertices[begin];
            List<Edge> adjacency = vertex.edges;
            for (Edge edge : adjacency) {
                if (edge.target == end) {
                    result = edge;
                    break;
                }
            }
            return result;
        }

        // inefficient remove edge O(V)
        public void removeEdge(int begin, int end) {
            edgesCount--;
            removeOneEdge(begin, end);
            if (!digraph) {
                removeOneEdge(end, begin);
            }
        }

        public final Vertex[] getVertices() {
            return vertices;
        }

        public int getVerticesCount() {
            return vertices.length;
        }

        public int getEdgesCount() {
            return edgesCount;
        }

        public Vertex getSource() {
            return vertices[0];
        }

        public Vertex getSink() {
            return vertices[vertices.length - 1];
        }

        public void dijkstra() {
            int verticesCount = getVerticesCount();
            double[] wt = new double[verticesCount];
            for (int i = 0; i < wt.length; i++) {
                wt[i] = Double.MAX_VALUE;
            }
            wt[getSource().index] = 0.0;
            Edge[] fr  = new Edge[verticesCount];
            Edge[] mst = new Edge[verticesCount];
            int min = -1;
            Edge edge = null;
            for (int v = 0; min != 0; v = min) {
                min = 0;
                for (int w = 1; w < verticesCount; w++) {
                    if (mst[w] == null) {
                        double P = 0.0;
                        edge = findEdge(v, w);
                        if (edge != null) {
                            if ((P = wt[v] + edge.weight) < wt[w]) {
                                wt[w] = P;
                                fr[w] = edge;
                            }
                        }

                        if (wt[w] < wt[min]) {
                            min = w;
                        }
                    }
                }

                if (min != 0) {
                    mst[min] = fr[min];
                }
            }

            for (int v = 0; v < verticesCount; v++) {
                if (mst[v] != null) {
                    System.out.print(mst[v].source + "->" + mst[v].target + " ");
                }
            }
        }

        public void pushRelabel() {
            // TODO
        }

        //=============================================================
        // private
        //=============================================================

        private void removeOneEdge(int begin, int end) {
            Vertex beginVertex = vertices[begin];
            List<Edge> adjacency = beginVertex.edges;
            int position = -1;
            for (int i = 0; i < adjacency.size(); i++) {
                if (adjacency.get(i).target == end) {
                    position = i;
                    break;
                }
            }
            if (position != -1) {
                adjacency.remove(position);
            }
        }

        private static AdjacencyList createDijkstraGraph() {
            int numberOfVertices = 6;
            boolean directed = true;
            AdjacencyList graph = new AdjacencyList(numberOfVertices, directed);
            for (int i = 0; i < graph.getVerticesCount(); i++) {
                graph.createVertex(i);
            }
            graph.addEdge( 0, 1, .41);
            graph.addEdge( 1, 2, .51);
            graph.addEdge( 2, 3, .50);
            graph.addEdge( 4, 3, .36);
            graph.addEdge( 3, 5, .38);
            graph.addEdge( 3, 0, .45);
            graph.addEdge( 0, 5, .29);
            graph.addEdge( 5, 4, .21);
            graph.addEdge( 1, 4, .32);
            graph.addEdge( 4, 2, .32);
            graph.addEdge( 5, 1, .29);
            return graph;
        }

        /**
         * Test main
         *
         * @param args
         */
        public static void main(String[] args) {
            // build the graph and test dijkstra shortest path
            AdjacencyList directedDijkstra = createDijkstraGraph();
            // expected:
            System.out.println("\n\n*** testing dijkstra shortest path");
            directedDijkstra.dijkstra();
        }
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T13:47:35.297

你弄错了，因为 v != w, wt[v] + e->wt() 可以小于 wt[w]。实际的错误是你需要设置`wt[source] = 0`（dijkstra是单源最短路径，你需要一个源！）！关于这本书：如果他们忘记了那部分，他们的坏:-P

# c# - 从连接在一起的两个 sql 表中删除行

> ID：14414187
> 
> 赞同：0
> 
> 时间：2013-01-19T12:07:39.327
> 
> 标签：c#, sql, sql-server, wpf, inner-join

有两个表：

```
Table1 : UserID Name Job
Table2 : BookID Book Car UserID 
```

我将这两个表加载到一个 wpf 数据网格中：

```
da.SelectCommand = new SqlCommand("select Table1.UserID, Table1.Name, Table1.Job, Table2.Book, Table2.Car from Table1 inner join Table2 on Table1.UserID = Table2.UserID"); 
```

我想通过 DataGrid 从 Table2 中删除一行：

```
 SqlCommand com = new SqlCommand("delete from Table2 where BookID=@BookID)",con); 
```

但不工作，

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T12:13:47.053

您必须使用以下方式删除行

```
DELETE FROM table2
WHERE  userid = (SELECT userid
                 FROM   table1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:31:47.903

你期待这样的事情吗？

```
DELETE FROM B WHERE BOOKID IN (SELECT BOOKID FROM B,A WHERE B.USERID=A.USERID AND B.BOOK='ABCD'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T09:54:09.117

你说“它必须从某个用户那里删除一本书，而不是所有的书。”。您必须知道必须删除书籍的用户 ID。

如果要删除用户书籍，请执行以下操作：

从表 2 中删除用户 ID 在 (user_id1,user_id1, etc .....); 但是你要删除大行，使用批量删除机制。

如果您没有用户 ID 并且有图书 ID，则必须执行以下操作：

从 Table2 中删除 bookid 在 (book_id1,book_id2, etc ..); 或从表 2 中删除 bookid =？//根据您的开发语言，您设置“？” 范围。我不知道 C# 语法。

# assembly - x86 程序集：movsd 指令问题

> ID：14414194
> 
> 赞同：4
> 
> 时间：2013-01-19T12:08:37.437
> 
> 标签：assembly, x86, masm32, fasm

这是我的问题：
我尝试使用`scanf`(in `msvcrt.dll`) 输入单个浮点值，`flat assembler`然后我编写了一个简单的“scanf 程序”，如下所示 (in `C`)：

```
#include <stdio.h>

int main() {
    float a;

    scanf("%f", &a);
    printf("Just input: %f", a);
    return 0;
} 
```

然后使用参数`cl.exe`编译`/FA`生成汇编文件，如下所示：

```
 lea eax, DWORD PTR _a$[ebp]
    push    eax
    push    OFFSET $SG2935
    call    _scanf
    add esp, 8
; Line 8
    cvtss2sd xmm0, DWORD PTR _a$[ebp]
    sub esp, 8
    movsd   QWORD PTR [esp], xmm0
    push    OFFSET $SG2936
    call    _printf
    add esp, 12                 ; 0000000cH 
```

我误解的是`movsd`指令。根据这里： http: [//faydoc.tripod.com/cpu/movsb.htm](http://faydoc.tripod.com/cpu/movsb.htm)它`Move doubleword at address DS:(E)SI to address ES:(E)DI`但我没有看到任何设置`esi`，`edi`在这里和`movsd`生成的源文件有两个参数，但在链接中的文档中它不应该。有人可以在这里解释一下吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-19T12:29:40.367

有两条同名的x86指令！

1.  MOVS/MOVSB/MOVSW/ **MOVSD** /MOVSQ - 将数据从字符串移动到字符串
2.  **MOVSD** — 移动标量双精度浮点值

检查英特尔[数据表](http://download.intel.com/products/processor/manual/325462.pdf)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-19T12:18:17.637

我怀疑网页显示的图片少于完整图片。

它讨论了`A5`操作码，但还有其他变体，例如`F2 0F`允许在 XMM 寄存器和更多任意内存位置之间移动。

有关更多详细信息，请参见[此处](http://www.jaist.ac.jp/iscenter-new/mpc/altix/altixdata/opt/intel/vtune/doc/users_guide/mergedProjects/analyzer_ec/mergedProjects/reference_olh/mergedProjects/instructions/instruct32_hh/vc202.htm)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-19T12:17:24.123

这是*另*一条 MOVSD 指令，它是 SSE 指令的一部分。在这里，它将双精度浮点值从 xmm0 移动到内存中。

# magento - 我的自定义块没有在 magento 的管理端显示标题按钮

> ID：14414197
> 
> 赞同：1
> 
> 时间：2013-01-19T12:09:02.180
> 
> 标签：magento, magento-1.7

我正在从控制器调用我的块，但它不显示标题按钮。我通过单击按钮调用我的控制器函数并使用 (

```
 $this->loadLayout(); 
     $this->_addContent($this->getLayout()->createBlock('mymodule/adminhtml_mymodule_edit_tab_addanswer'));

     $this->renderLayout();. 
```

在 addanswer 页面上，我只是使用该类

```
Mymodule_Block_Adminhtml_module_Edit_Tab_Addanswer extends Mage_Adminhtml_Block_Widget_Form
{ 
  protected function _prepareForm()
  {
// code 
}
} 
```

它显示数据，如附加图像![在此处输入图像描述](../Images/3ec4e489d51d0742f51f2ebb7db754f9.png)

我想添加保存或添加类似按钮，但不知道从哪里可以做到这一点。我从块或从 edit.php 添加按钮，但我不知道如何从控制器或直接表单中添加按钮。是有可能吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T15:44:33.127

你可能错过了

```
class CompanyName_Mymodule_Block_Adminhtml_Addanswer_Edit extends Mage_Adminhtml_Block_Widget_Form_Container
{
    public function __construct()
    {
        parent::__construct();

        $this->_objectId = 'id';
        $this->_blockGroup = 'addanswer';
        $this->_controller = 'adminhtml_addanswer';

        $this->_updateButton('save', 'label', Mage::helper('addanswer')->__('Save'));
        $this->_updateButton('delete', 'label', Mage::helper('addanswer')->__('Delete'));
    }

..... 
```

看看[@Custom Module with Custom Database Table](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/custom_module_with_custom_database_table)

# c# - 即使指定了 TaskContinuationOptions，任务延续也始终运行

> ID：14414198
> 
> 赞同：5
> 
> 时间：2013-01-19T12:09:02.647
> 
> 标签：c#, asynchronous, task-parallel-library, .net-4.5

我想在异步任务成功完成时运行一些代码。

通过阅读网络上的文档和示例，我认为我可以使用`Task.ContinueWith`和指定`TaskContinuationOptions.OnlyOnRanToCompletion`.

但是，这并不像我预期的那样。

以下代码是在 Visual Studio 2012、.Net 4.5 中创建的控制台程序：

```
using System;
using System.Threading.Tasks;

namespace TaskContinueTest
{
    class Program
    {
        static void Main(string[] args)
        {
            var jobTask = Task.Factory.StartNew(() => { });

            jobTask.ContinueWith((task, options) =>
            {
                Console.WriteLine("Completed handler. Task status is {0}", task.Status);
            }, TaskContinuationOptions.OnlyOnRanToCompletion);

            jobTask.ContinueWith((task, options) =>
            {
                Console.WriteLine("Faulted handler. Task status is {0}", task.Status);
            }, TaskContinuationOptions.OnlyOnFaulted);

            Console.ReadLine();
        }
    }
} 
```

运行时，我得到输出：

```
Completed handler. Task status is RanToCompletion
Faulted handler. Task status is RanToCompletion 
```

这非常令人惊讶（至少对我而言）。为什么要安排两个延续？

如果我在 中抛出异常，我会得到相同的行为`jobTask`，但现在的输出是：

```
Completed handler. Task status is Faulted
Faulted handler. Task status is Faulted 
```

所以框架清楚地知道了任务的状态，但是为什么两个continuations都还在调度呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-19T12:22:38.577

我认为问题在于你不小心调用[了这个重载](http://msdn.microsoft.com/en-us/library/hh139097.aspx)

```
public Task ContinueWith(
    Action<Task, Object> continuationAction,
    Object state
) 
```

你想要的是[这个重载](http://msdn.microsoft.com/en-us/library/dd321576.aspx)：

```
public Task ContinueWith(
    Action<Task> continuationAction,
    TaskContinuationOptions continuationOptions
) 
```

您只需要更改 lambda 表达式以使用单个参数：

```
Task.ContinueWith(task => Console.WriteLine(...),
    TaskContinuationOptions.OnlyOnRanToCompletion); 
```

# magento - 如何检查产品属性集中是否存在属性？Magento

> ID：14414200
> 
> 赞同：7
> 
> 时间：2013-01-19T12:09:19.760
> 
> 标签：magento, attributes, product, catalog

如何检查产品属性集中是否存在属性？

我需要知道产品是否具有其属性集的属性。

我得到的属性是：

```
$attrPricekg = Mage::getModel('catalog/product')->load($_product->getId())->getPricekg(); 
```

如果产品属性集中存在属性，则 $attrPricekg 显示：为产品设置值，如果没有为产品设置值，则显示 0。

如果该属性在产品属性集中不存在，则 $attrPricekg 显示 0。这是我的问题。我需要避免这种情况，我想检查该产品的属性是否不存在。

谢谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-19T17:11:15.633

现在我将提供一个无论如何都有效的答案！

```
$product = Mage::getModel('catalog/product')->load(16);

$eavConfig = Mage::getModel('eav/config');
/* @var $eavConfig Mage_Eav_Model_Config */

$attributes = $eavConfig->getEntityAttributeCodes(
    Mage_Catalog_Model_Product::ENTITY,
    $product
);

if (in_array('pricekg',$attributes)) {
    // your logic
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-12T12:12:01.730

要检查产品中是否存在特定属性，即使该属性的值为“null”，它也应该返回 true。

一种有效的方法是：

```
$attr = Mage::getModel('catalog/resource_eav_attribute')->loadByCode('catalog_product',$code);
if (null!==$attr->getId()) 
```

{ //属性存在代码这里}

当然也可以写成一行：

```
if(null!===Mage::getModel('catalog/resource_eav_attribute')->loadByCode('catalog_product','attributecode_to_look_for')->getId()) {
    //'attributecode_to_look_for' exists code here
} 
```

找到并修改了一下： [https ://github.com/astorm/Pulsestorm/issues/3](https://github.com/astorm/Pulsestorm/issues/3)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-19T12:21:06.430

可能这种方式对你更好：

```
$attribute = Mage::getModel('catalog/product')->load($productId)->getResource()->getAttribute($attributeCode);
if ($attribute && $attribute->getId()) { ... } 
```

你也可以试试

```
$attributes = $product->getAttributes(); 
```

但是您可以检查属性集合中的所有内容：

```
$entityTypeId = Mage::getModel('eav/entity')
            ->setType('catalog_product')
            ->getTypeId();
$attributeId = 5;
$attributeSetName   = 'Default';
$attributeSetId     = Mage::getModel('eav/entity_attribute')
                ->getCollection()
                ->addFieldToFilter('entity_type_id', $entityTypeId)
                ->addFieldToFilter('attribute_set_name', $attributeSetName)
                ->addFieldToFilter('attribute_id', $attributeId)
                ->getFirstItem(); 
```

可能是源代码需要一些更正，但我想你会理解这个想法。

在此处查看更多示例 - [http://www.blog.magepsycho.com/playing-with-attribute-set-in-magento/](http://www.blog.magepsycho.com/playing-with-attribute-set-in-magento/)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-01-19T13:43:04.317

***编辑：这不是正确的答案。***

```
$product->offsetExists('pricekg'); 
```

见[`Varien_Object::offsetExists()`（链接）](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/lib/Varien/Object.php#L850)。

# php - 一个phpnuke网站

> ID：14414201
> 
> 赞同：2
> 
> 时间：2013-01-19T12:09:29.650
> 
> 标签：php, web

我有一个带有 phpnuke 的网站，但不是我创建的。但现在我负责，它不起作用。它以前工作，但现在它不工作。

首先它只是没有来。只是一个空白页。我发现问题出在这条线`mainfile.php`

```
if (!ini_get('register_globals')) {
    @import_request_variables("GPC", "");
} 
```

我刚刚发表了评论。现在是第一页，但它在页面顶部给了我这个警告

```
Strict Standards: Resource ID#10 used as offset, casting to integer (10) in /www/sites/sanad-rahbordi.sbu.ac.ir/httpdocs/db/mysql.php on line 212

Strict Standards: Resource ID#10 used as offset, casting to integer (10) in /www/sites/sanad-rahbordi.sbu.ac.ir/httpdocs/db/mysql.php on line 213

Strict Standards: Resource ID#10 used as offset, casting to integer (10) in /www/sites/sanad-rahbordi.sbu.ac.ir/httpdocs/db/mysql.php on line 212

Strict Standards: Resource ID#10 used as offset, casting to integer (10) in /www/sites/sanad-rahbordi.sbu.ac.ir/httpdocs/db/mysql.php on line 213 
```

这是包含 212 和 213 行的函数`mysql.php`

```
function sql_fetchrow($query_id = 0)
{
    if(!$query_id)
    {
        $query_id = $this->query_result;
    }
    if($query_id)
    {
        $this->row[$query_id] = @mysql_fetch_array($query_id); // 212
        return $this->row[$query_id]; // 213
    }
    else
    {
        return false;
} 
```

我通过评论显示了 212 和 213 行。那么问题是什么？我想不通。我尝试在这两行中替换`$query_id`为`(int)$query_id`，并且错误现在没有显示出来，但是站点不起作用。我的意思是第一页出现了，但是当我点击每个链接时，它只是出现在`index.php`. 没有链接有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T12:16:52.127

问题是，您尝试使用**资源 id**作为数组中的**键。**这是不可能的，因此 php 将资源 id 转换为整数。

如果您手动转换资源，这将起作用，PHP 不会就此发出警告。`"@"`隐藏在“mysql_fetch_array”期间发生的任何错误。由于您想查看错误，因此应将其删除。

```
if($query_id)
{
    $intQueryId = (integer) $query_id;
    $this->row[$intQueryId] = mysql_fetch_array($query_id); // 212
    return $this->row[$intQueryId]; // 213
} 
```

else 缺少一个“{”

```
 else
    {
      return false;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T12:13:15.867

总的来说，听起来您正在使用使用 PHP 代码的软件，就像十年前一样。有人升级了下面的 PHP，所以该网站不再工作。

我建议迁移到现代软件，无论是版本还是产品。我认为修补已经突破的东西没有任何用处。作为维护者，你只会给自己带来更多麻烦。

根据它的[wiki 页面](http://en.wikipedia.org/wiki/PHP-Nuke)，它的存在版本从那时起已经有“许多安全修复”。如果您想继续使用该软件，我建议您朝那个方向迁移。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-02T18:20:44.987

上述解决方案都对我不起作用。我的解决方案是：

```
if($query_id) {
     $q_id=$query_id[0];
     $this->row[$q_id] = @mysql_fetch_array($query_id);
     return $this->row[$q_id];
} else {
     return false;
} 
```

希望这会对某人有所帮助。

# asp.net-mvc-4 - 将表单身份验证（SimpleMembership）添加到 webapi 应用程序

> ID：14414202
> 
> 赞同：0
> 
> 时间：2013-01-19T12:09:32.633
> 
> 标签：asp.net-mvc-4, asp.net-web-api, simplemembership

我正在尝试向 MVC4 webapi 项目添加在 MVC 4 web 应用程序项目中找到的简单成员身份提供程序身份验证机制，用于为其页面提供丰富 JS 内容的混合应用程序，该应用程序使用 AJAX 调用 webapi 操作来执行其任务. 我需要应用程序用户进行身份验证，然后他们才能使用这些页面中提供的应用程序，所以我认为我可以使用表单身份验证。因此，我需要将其添加到现有的 WebApi 项目中，并让我的授权操作返回 302（将用户重定向到登录页面）而不是 401。

无论如何，我错过了一些东西，因为一旦我尝试使用 WebSecurity 方法，我就会得到以下异常：

```
`System.InvalidOperationException was caught
  Message=To call this method, the "Membership.Provider" property must be an instance of "ExtendedMembershipProvider".
  Source=WebMatrix.WebData` 
```

`有人可以建议修复吗？以下是我为添加授权所采取的步骤：`

 `1）Web.config：添加到system.web：

```
<authentication mode="Forms">
    <forms loginUrl="~/Account/Login" timeout="2880" />
</authentication> 
```

添加到 appsettings（第 2 个条目用于将 401 替换为 302）：

```
<add key="enableSimpleMembership" value="true"/>
<add key="webapi:EnableSuppressRedirect" value="false" /> 
```

还要从原始模板中删除个人资料、成员资格和角色管理器部分（它们不适用于简单的成员资格）。

2) 为 OpenAuth 添加 NuGet 包（DotNetOpenAuth Core、DotNetOpenAuth ext for ASP.NET、DotNetOpenAuth 1.0(a) consumer、DotNetOpenAuth 1.0(a)、DotNetOpenAuth OpenID Core、DotNetOpenAuth OpenID Relying Party）。

3）将 InitializeSimpleMembership.cs 添加到过滤器（代码非常标准，见下文）。

4) 从 MVC Web 应用程序项目中复制 AccountModels.cs 中的模型、Views/Account 中的所有视图以及 AccountController.cs。

InitializeSimpleMembership 代码在这里：

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = false, Inherited = true)]
public sealed class InitializeSimpleMembershipAttribute : ActionFilterAttribute
{
    private static SimpleMembershipInitializer _initializer;
    private static object _initializerLock = new object();
    private static bool _isInitialized;

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        LazyInitializer.EnsureInitialized(ref _initializer, ref _isInitialized, ref _initializerLock);
    }

    private class SimpleMembershipInitializer
    {
        private static void SeedData()
        {
            // seed data: users and roles
            if (!WebSecurity.UserExists("TheAdminGuyName"))
                WebSecurity.CreateUserAndAccount("TheAdminGuyName", "password");

            if (!Roles.RoleExists("administrator")) Roles.CreateRole("administrator");

            if (!Roles.IsUserInRole("TheAdminGuyName", "administrator"))
                Roles.AddUserToRole("TheAdminGuyName", "administrator");
        }

        public SimpleMembershipInitializer()
        {
            Database.SetInitializer<UsersContext>(null);
            try
            {
                using (var context = new UsersContext())
                {
                    if (!context.Database.Exists())
                    {
                        ((IObjectContextAdapter)context).ObjectContext.CreateDatabase();
                    }
                }
                WebSecurity.InitializeDatabaseConnection("DefaultConnection", "User", "UserId", "UserName", autoCreateTables: true);
                SeedData();
            }
            catch (Exception ex)
            {
                throw new InvalidOperationException("The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588", ex);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T15:41:46.460

这可能是相关的，因为它特别提到了您的错误： [http ://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp- net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)`

# django - Django-Haystack：如何限制在给定字段具有特定值的条目内搜索？

> ID：14414207
> 
> 赞同：1
> 
> 时间：2013-01-19T12:10:12.703
> 
> 标签：django, search, django-haystack

假设我有一个模型`Person`，其中有一个`PersonIndex`类`search_indexes.py`可以搜索它的所有字段。**我怎样才能只在那些说该`has_title`字段`True`**的条目中进行搜索？

**我尝试了以下方法，但它只是在所有条目中搜索**，而不仅仅是在其中的`has_title`那些`True`：

```
srch = request.GET.get('search', "") 
sqs = SearchQuerySet().filter(has_title=True)
clean_query = sqs.query.clean(srch)
results = sqs.raw_search(clean_query) 
```

我正在使用`Whoosh 2.4.1`,`Django-haystack 1.2.7`和`Django 1.4`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T14:24:54.120

使用`filter(content=clean_query)`而不是`raw_search(clean_query)`. 有关更多详细信息，请参见[此处](https://stackoverflow.com/questions/14216207/haystacks-searchqueryset-filter-not-doing-anything-whoosh-2-4-1-django-hays/14415290#14415290)。

# c# - 托管 C# 中的任何等价物 __asm int 3？

> ID：14414212
> 
> 赞同：1
> 
> 时间：2013-01-19T12:10:46.157
> 
> 标签：c#, debugging

有没有办法从 C# 程序中强制触发调试中断，类似于将“int 3”指令注入本机程序？

我的用例：一个自定义的“异常”对话框，我可以在其中按下“调试”按钮并立即切换到 Visual Studio 窗口，向我显示位置和调用堆栈（而不是手动切换，使用“全部中断”并选择 GUI线）。只有当我已经在调试我的程序时，它才需要工作。

# java - eclipse 是否使用 Java Instrumentation API 进行热代码替换

> ID：14414215
> 
> 赞同：15
> 
> 时间：2013-01-19T12:11:17.677
> 
> 标签：java, eclipse

我最近有一项任务，我必须使用热代码替换功能。所以我使用 tools.jar 中提供的 Java Instrumentation API 来完成它。

eclipse 是否使用一些不同的逻辑来热替换新的类文件或使用相同的 Java API？我试图从一些地方阅读但不清楚：

> Eclipse Java 调试器通过调试通道将新的类文件传输到另一个 JVM

[Eclipse Hot Code Replace](http://wiki.eclipse.org/FAQ_What_is_hot_code_replace%3F)中的这一行不清楚。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T08:03:12.500

我相信 eclipse 使用相同的逻辑，它们都依赖于一个名为 JVMTI 的本机接口。JVMTI 提供工具来检查状态，并控制在 Java 虚拟机中运行的应用程序的执行。

Java Instrumentation Implementation中有一个JVMTI的代理。与 vm 对话并执行某些任务的代理。它也有 redefineClasses 方法。

Eclipse Java调试器或其他工具使用JPDA（Java Platform Debugger Architecture），JPDA主要有三个部分（JVMTI、JDWP、JDI）。JVMTI充当被调试者，JDI充当调试器，JDWP充当它们之间的通信通道。

最后，他们都与 JVMTI 对话，并且使用相同的逻辑。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T07:16:18.997

不，调试器通常使用 JDI。

com.sun.jdi.VirtualMachine#redefineClasses

有关详细信息，请参阅以下链接。 [http://docs.oracle.com/javase/7/docs/technotes/guides/jpda/index.html](http://docs.oracle.com/javase/7/docs/technotes/guides/jpda/index.html)

# javascript - jqgrid select：表单中的选项文本与表格中的选项文本不同

> ID：14414216
> 
> 赞同：1
> 
> 时间：2013-01-19T12:11:26.433
> 
> 标签：javascript, jqgrid

如果我有这些选择选项...

```
var OptionsOnTable = "1:OptionA extra text;2:OptionB extra text;3:OptionC extra text;"
var OptionsOnDialogForm = "1:OptionA;2:OptionB;3:OptionC;" 
```

在这个专栏...

```
{name:"col2",index:"col2",editable:true,formatter:"select",edittype:"select"},
editoptions:{value: OptionsOnTable} 
```

更改对话框表单上的选项文本但将选项文本保留在表格上的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T16:08:32.603

如果您使用则显示在基于或`formatter: "select"`的网格中的文本。另一方面，它将仅在表单编辑期间使用。因此，您可以为一列同时指定*和*。它会解决你的问题。`formatoptions.value``editoptions.value``editoptions.value``formatoptions.value` *`editoptions.value`*

 *例如，我`ship_via`在[演示](http://www.ok-soft-gmbh.com/jqGrid/FormatterSelect.htm)中使用了以下列的定义：

```
formatter: "select", formatoptions: { value: "FE:_FedEx_;TN:_TNT_;IN:_Intim_", defaultValue: "IN" },
edittype: "select", editoptions: { value: "FE:FedEx;TN:TNT;IN:Intim", defaultValue: "IN" },
stype: "select", searchoptions: { value: ":Any;FE:=FedEx=;TN:=TNT=;IN:=Intim=", sopt: ["eq", "ne"] } } 
```

因此，人们在选择中看到三种*不同*的文本：一种在网格中，另一种在编辑过程中，第三种在搜索对话框中：

![在此处输入图像描述](../Images/a26d332d31cc41d2fd954681455b72a4.png)

和

![在此处输入图像描述](../Images/d071d0fa422c368a09e7e661a03092da.png)*

# android - 以编程方式更改 android:enabled="true"

> ID：14414218
> 
> 赞同：4
> 
> 时间：2013-01-19T12:11:38.167
> 
> 标签：android

一开始，我的应用程序将关于复选框首选项的首选项设置为“真”。现在我需要以编程方式设置此值 (android:enabled="true") 或 false。任何的想法？

```
protected void checkLicense(){
        PackageManager manager = getPackageManager();
        if (manager.checkSignatures("core.package.name", "key.package.name")
            == PackageManager.SIGNATURE_MATCH) {
            //full version
            isEnabled = true;
            Toast.makeText(this, "pro", Toast.LENGTH_LONG).show();
        }
        else {
            Toast.makeText(this, "free", Toast.LENGTH_LONG).show();
            isEnabled = false;

<CheckBoxPreference
                        android:enabled="true"
                        android:title="Now"
                        android:defaultValue="false"
                        android:key="keep" /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T12:21:28.677

**启用复选框**

```
getPreferenceScreen().findPreference("checkbox-preference-key").setEnabled(true); //Enabling 
```

* * *

**禁用复选框**

```
getPreferenceScreen().findPreference("checkbox-preference-key").setEnabled(false);//Disabling 
```

# java - 旋转屏幕时字符串为空

> ID：14414219
> 
> 赞同：-2
> 
> 时间：2013-01-19T12:11:44.360
> 
> 标签：java, android, null, rotation, screen

当屏幕旋转时，我也尝试恢复字符串值，但它始终为空。

```
public class Main_screen extends Activity {
    TextView t;
    String path, ext;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main_screen);
        t = (TextView) findViewById(R.id.textView2);
        if (savedInstanceState != null){
            path = savedInstanceState.getString(path);
            ext = savedInstanceState.getString(ext);
            t.setText(getString(R.string.selected) + "\n" + path + "\n\n" + getString(R.string.unpr_new) + "\n" + path + ext);
        }
    } 
```

当我旋转设备时，路径和分机为空。我需要手动保存字符串吗？还是在已保存实例中旋转时自动保存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T12:14:37.247

如果在您声明的清单文件中，请检查此项

```
android:configChanges="orientation" 
```

如果你声明了这个标志，活动将不会被销毁和重新创建，并且回调

并覆盖此方法 :==>> onConfigurationChanged()

将被调用。

# android - 没有关闭硬件加速，MapView 不可见

> ID：14414222
> 
> 赞同：2
> 
> 时间：2013-01-19T12:12:13.733
> 
> 标签：android, background, android-mapview, hardware-acceleration

我`Google Maps Android API v2`用来展示一个小的`MapView`. 但是，为了实现我的应用程序的功能，我需要为此视图关闭硬件加速。我是这样做的：

**创建：**

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    GoogleMapOptions options = new GoogleMapOptions();
    options.zoomControlsEnabled(false);
    options.rotateGesturesEnabled(false);
    options.scrollGesturesEnabled(false);
    options.tiltGesturesEnabled(false);
    options.zoomGesturesEnabled(false);

    MapView mv = new MapView(this, options);
    mv.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
    mv.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, 200));

    this.addView(mv);

    mv.onCreate(savedInstanceState);
} 
```

问题是那样地图是不可见的！由于下方的所有视图都被向下推，人们可以看到视图应该在那里，但它是不可见的！

*现在奇怪的部分来了：*
如果我将这一行添加到我的`onCreate`方法中，地图就会变得可见

```
 mv.setBackgroundColor(Color.GREEN); 
```

为什么这突然起作用了？我希望我的背景是透明的，但是添加`Color.TRANSPARENT`为背景会使地图再次消失:(

# python - 部署scrapy项目

> ID：14414224
> 
> 赞同：0
> 
> 时间：2013-01-19T12:12:22.393
> 
> 标签：python, deployment, scrapy, scrapyd

我正在尝试使用scrapyd 部署scrapy 项目。我可以通过使用正常运行我的项目

```
cd /var/www/api/scrapy/dirbot
scrapy crawl dmoz 
```

这是我一步一步做的：

1/ 我跑

```
scrapy version -v
>> Scrapy  : 0.16.3
lxml    : 3.0.2.0
libxml2 : 2.7.8
Twisted : 12.2.0
Python  : 2.7.3 (default, Aug  1 2012, 05:14:39) - [GCC 4.6.3]
Platform: Linux-3.2.0-31-virtual-x86_64-with-Ubuntu-12.04-precise 
```

2/安装scrapyd

```
aptitude install scrapyd-0.16 
```

3/ 我在 /var/www/api/scrapy/dirbot (http://domain.com/api/scrapy/dirbot) 有项目 scrapy。我编辑scrapy.cfg

```
[settings]
default = dirbot.settings
[deploy:scrapyd2]
url = http://domain.com/api/scrapy/dirbot/
username = vu
password = hoang 
```

4/ 我用部署命令测试

```
scrapy deploy -l
>> scrapyd2             http://domain.com/api/scrapy/dirbot/ 
```

5/ 但是当我使用命令时

```
scrapy deploy -L scrapyd2
>> /usr/local/lib/python2.7/dist-packages/Scrapy-0.16.3-py2.7.egg/scrapy/settings/deprecated.py:23: ScrapyDeprecationWarning: You are using the following settings which are deprecated or obsolete (ask scrapy-users@googlegroups.com for alternatives):
    BOT_VERSION: no longer used (user agent defaults to Scrapy now)
  warnings.warn(msg, ScrapyDeprecationWarning)
Traceback (most recent call last):
  File "/usr/local/bin/scrapy", line 5, in <module>
    pkg_resources.run_script('Scrapy==0.16.3', 'scrapy')
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 499, in run_script
    self.require(requires)[0].run_script(script_name, ns)
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 1235, in run_script
    execfile(script_filename, namespace, namespace)
  File "/usr/local/lib/python2.7/dist-packages/Scrapy-0.16.3-py2.7.egg/EGG-INFO/scripts/scrapy", line 4, in <module>
    execute()
  File "/usr/local/lib/python2.7/dist-packages/Scrapy-0.16.3-py2.7.egg/scrapy/cmdline.py", line 131, in execute
    _run_print_help(parser, _run_command, cmd, args, opts)
  File "/usr/local/lib/python2.7/dist-packages/Scrapy-0.16.3-py2.7.egg/scrapy/cmdline.py", line 76, in _run_print_help
    func(*a, **kw)
  File "/usr/local/lib/python2.7/dist-packages/Scrapy-0.16.3-py2.7.egg/scrapy/cmdline.py", line 138, in _run_command
    cmd.run(args, opts)
  File "/usr/local/lib/python2.7/dist-packages/Scrapy-0.16.3-py2.7.egg/scrapy/commands/deploy.py", line 76, in run
    f = urllib2.urlopen(req)
  File "/usr/lib/python2.7/urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "/usr/lib/python2.7/urllib2.py", line 406, in open
    response = meth(req, response)
  File "/usr/lib/python2.7/urllib2.py", line 519, in http_response
    'http', request, response, code, msg, hdrs)
  File "/usr/lib/python2.7/urllib2.py", line 444, in error
    return self._call_chain(*args)
  File "/usr/lib/python2.7/urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "/usr/lib/python2.7/urllib2.py", line 527, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
urllib2.HTTPError: HTTP Error 404: Not Found 
```

和

```
scrapy deploy scrapyd2 -p project
>> /usr/local/lib/python2.7/dist-packages/Scrapy-0.16.3-py2.7.egg/scrapy/settings/d           eprecated.py:23: ScrapyDeprecationWarning: You are using the following settings            which are deprecated or obsolete (ask scrapy-users@googlegroups.com for alternat           ives):
    BOT_VERSION: no longer used (user agent defaults to Scrapy now)
  warnings.warn(msg, ScrapyDeprecationWarning)
Building egg of project-1358597244
'build/scripts-2.7' does not exist -- can't clean it
zip_safe flag not set; analyzing archive contents...
Deploying project-1358597244 to http://domain.com/api/scrapy/dirbot/addversio           n.json
Deploy failed (404):
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>404 Not Found</title>
</head><body>
<h1>Not Found</h1>
<p>The requested URL /api/scrapy/dirbot/addversion.json was not found on this se           rver.</p>
<hr>
<address>Apache/2.2.22 (Ubuntu) Server at domain.com Port 80</address>
</body></html> 
```

***** 我不明白什么是蟒蛇蛋。你能给我举个例子吗？我不知道我有没有。也许那个文件是/var/www/api/scrapy/dirbot/setup.py？****

 **```
from setuptools import setup, find_packages

setup(
    name         = 'project',
    version      = '1.0',
    packages     = find_packages(),
    entry_points = {'scrapy': ['settings = dirbot.settings']},
) 
```

***** 如何部署我的项目。我不知道我到底做错了什么，或者错过了一步？****

 **谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T07:39:44.430

从错误来看，您要抓取的网站似乎会出现 404 错误，要么是您放置了错误的网站，要么存在一些配置错误。

关于 python egg，有一个很好的答案，请查看[什么是 Python egg？](https://stackoverflow.com/questions/2051192/what-is-a-python-egg)

关于 setup.py ：据我所知，它用于使用命令从源代码安装 python 应用程序`python setup.py install`

**编辑**：似乎我对命令感到困惑`pip`，对此感到抱歉****

# javascript - 在 Express 中间件中访问会话对象

> ID：14414225
> 
> 赞同：4
> 
> 时间：2013-01-19T12:12:27.900
> 
> 标签：javascript, node.js, express

这是我的 Express 中间件堆栈：

```
var server = express()
    .use(express.cookieParser())
    .use(express.session({secret: 'Secret'}))
    .use(express.bodyParser())
    .use(function printSession(req, res, next) {
        console.log(req.session.user);
        next();
    })
    .use(express.static('./../')); 
```

这里有两条路线：

```
server.post('/setSession', function (req, res) {
    req.session.user = 'admin';
}

server.post('/getSession', function (req, res) {
    console.log(req.session.user);
} 
```

现在找到路由处理程序中的会话管理。我可以设置`session.user`，并且它将持续存在于同一会话中的后续请求，如`getSession`. 但是，中间件函数`printSession`总是打印`undefined`.

如何访问`session`中间件中的填充对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T16:27:52.667

该程序运行良好。在我访问之前`/setSession`，中间件打印`after session: undefined`。一旦我得到 /setSession，它就会打印`after session: admin`. 只要您正在使用（不是 curl）测试的浏览器存储并发送会话 cookie，这将按预期工作。

```
var express = require('express');
var server = express();
server.use(express.cookieParser());
server.use(express.session({secret: 'SEKRET'}));
server.use(function (q,r,n) {console.log('after session:', q.session.user);n();});
server.get('/', function (q,r,n) {r.send("you got slashed");});
server.get('/setSession', function (req, res) {
  console.log("logging admin in via /setSession");
  req.session.user = 'admin';
  res.send("admin logged in");
});
server.listen(3000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:43:39.210

你的设置一定有问题。以下示例与您的代码非常相似，但`GET`改为使用`POST`，对我来说效果很好

```
app.configure(function(){
  // ...
  app.use(express.cookieParser('your secret here'));
  app.use(express.session());

  app.use(function(req, res, next) {
    console.log(req.session.user + ' from middleware');
    next();
  });

  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
}); 
```

和

```
app.get('/getSession', function(req, res) {
  console.log(req.session.user);
  res.send('awesome');
});

app.get('/setSession', function(req, res) {
  req.session.user = 'admin';
  res.send('done');
}); 
```

现在，当您执行以下操作时，一切都按预期工作

1.  GET /getSession => 来自中间件的未定义，未定义
2.  GET /setSession => 从中间件未定义
3.  GET /getSession => 来自中间件的管理员，管理员

# wcf - 在没有主服务器的本地网络中聊天

> ID：14414227
> 
> 赞同：0
> 
> 时间：2013-01-19T12:12:39.913
> 
> 标签：wcf, chat, communication, lan, tcp-ip

如何在没有主服务器的情况下构建聊天应用程序？我考虑`WCF service`在每台连接到网络的计算机上托管，并尝试在`LAN`. 启动我的聊天应用程序后的简单场景：

*   启动主机聊天 wcf 服务
*   将我的客户连接到我自己的服务
*   搜索可用的主机`LAN`（例如，如果在适当的端口上打开）
*   试图连接到他们托管的聊天 wcf 服务
*   其他机器正在连接到我的服务

每台机器都使用自己的服务来发送消息。每个服务都存储连接的客户端，并删除断开连接的用户。

我不太喜欢这个解决方案，所以也许你有更好的主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:29:33.527

为了实现这一点，我最好的选择是在每个 WCF 服务上实现一个小型 UDP boardcast，这样每个客户端都知道何时有任何新客户端连接。UDP 也可以通过 WCF Discovery 实现

# windows-8 - Jquery 无法在 Visual Studio 2012 中使用 HTML 5 模板创建的 Windows 8 Phone 应用程序上运行

> ID：14414233
> 
> 赞同：2
> 
> 时间：2013-01-19T12:13:03.513
> 
> 标签：windows-8, visual-studio-2012, windows-phone-8

我正在使用 Visual Studio 2012 创建示例 Windows 8 Phone 应用程序。

从我选择的“创建新项目”选项中，

> Windows > Windows Phone HTML5 应用程序

我还在项目中添加了一个 jquery.min.js 文件，如下所示。

![在此处输入图像描述](../Images/582e6d95c3750710e0d24d90d4b9531b.png)

下面是我用 index.html 编写的代码...

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" type="text/css" href="/html/css/phone.css" />
        <script type="text/javascript" src="/html/js/jquery.min.js" ></script>
        <title>Windows Phone</title>
        <script type="text/javascript">
          $("#dynamic-box").text("hey !");
        </script>
    </head>
    <body>
        <div>
            <p>MY APPLICATION</p>
        </div>
        <div id="dynamic-box"></div>
    </body>
</html> 
```

但无论我尝试什么，我的 jquery 代码都无法正常工作。是否有其他方法可以在 Windows 8 Phone 应用程序中编写 jquery？

请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T17:25:27.717

这里发生了两件事，一件是 jQuery，一件是 Windows Phone：

1.  将您的代码放入[准备好的](http://api.jquery.com/ready/)事件中（它不会在网页中按原样工作）

    ```
    <script type="text/javascript">
        $(document).ready(function () {
            $("#dynamic-box").text("hey!");
        });
    </script> 
    ```

2.  在导航到打开页面之前设置[IsScriptEnabled 。](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.controls.webbrowser.isscriptenabled%28v=vs.105%29.aspx)`Browser_Loaded`翻转 中的语句顺序`MainPage.xaml.cs`。

    ```
    private void Browser_Loaded(object sender, RoutedEventArgs e)
    {
        // Add your URL here
        Browser.IsScriptEnabled = true;
        Browser.Navigate(new Uri(MainUri, UriKind.Relative));
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T06:09:05.570

我最近[写了一篇](http://yassershaikh.com/windows-8-phone-development-how-to-use-jquery-using-html-5-template-in-visual-studio-2012/)关于这个的帖子，认为在这里分享它很有用......

**第 1 步：将 jquery.min.js 添加到解决方案中**

![在此处输入图像描述](../Images/ca1cba87114683e7130a4c7d3cab54ef.png)

**第二步：改变`Browser_Loaded`方法中的语句顺序，如下图**

```
private void Browser_Loaded(object sender, RoutedEventArgs e)
{
    // Add your URL here
    Browser.IsScriptEnabled = true;
    Browser.Navigate(new Uri(MainUri, UriKind.Relative));
} 
```

**第 3 步：示例 Jquery 代码**

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" type="text/css" href="/html/css/phone.css" />
        <script type="text/javascript" src="/html/js/jquery.min.js" ></script>
        <title>Windows Phone</title>
      <script type="text/javascript">
        $(document).ready(function () {
          $("#message").text("Welcome !");

          $("#goBtn").click(function(){
            $("#message").text("button has been pressed");
          });
        });
      </script>
    </head>
    <body>
        <div>
            <p>MY APPLICATION</p>
        </div>
        <div id="message"></div>
        <input type="button" id="goBtn" value="press me !" />
    </body>
</html> 
```

**输出**

![在此处输入图像描述](../Images/401accebe120788e46c1910ad0b201a9.png)

# symfony - 如何修复 Gedmo 可排序中的“此存储库只能附加到 ORM 可排序侦听器”错误？

> ID：14414243
> 
> 赞同：5
> 
> 时间：2013-01-19T12:14:21.037
> 
> 标签：symfony, doctrine-orm, jquery-ui-sortable, doctrine-extensions

当使用 StofDoctrineExtensions （这是 Gedmo Doctrine Extensions 的 Symfony2 端口）排序行为时，我不断收到此错误：

> 此存储库只能附加到 ORM 可排序侦听器

由于我无法在官方文档中轻松找到答案，因此我将在此处留下答案以供将来参考。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-03T02:26:10.327

您需要启用您正在使用的任何侦听器。在这种情况下，可排序。

```
stof_doctrine_extensions:
    default_locale: en_US
    orm:
        default:
            sortable: true 
```

对于 Symfony 4，在`/config/packages/stof_doctrine_extensions.yaml`. 对于旧版本的 Symfony，请将其添加到`config.yml`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:14:21.037

为了使用 Sortable 行为，您需要将事件侦听器添加到包的引导方法

```
<?php

namespace Acme\DemoBundle;

use Symfony\Component\HttpKernel\Bundle\Bundle;

class AcmeDemoBundle extends Bundle
{
    public function boot()
    {
        // get the doctrine 2 entity manager
        $em = $this->container->get('doctrine.orm.default_entity_manager');

        // get the event manager
        $evm = $em->getEventManager();
        $evm->addEventSubscriber(new \Gedmo\Sortable\SortableListener);
    }
} 
```

# validation - 如何从 CakePHP 的一个位置验证多个字段？

> ID：14414249
> 
> 赞同：1
> 
> 时间：2013-01-19T12:14:44.180
> 
> 标签：validation, cakephp, field, cakephp-2.3

我想在一个地方验证多个字段。所以在一个表格中，我包含了 4 个字段，如下所示

1.  facebook_link
2.  推特链接
3.  google_plus_link
4.  linked_in_link

用户至少键入以上任何一个字段。请帮助我获得解决方案，例如，用户在表单中键入任何链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T12:24:56.543

您可以添加自己的验证方法。

```
public $validate = array(
    'facebook_link' => array(
        'rule'    => array('validateLink'),
        'message' => '...'
    ),
    'twitter_link' => array(
        'rule'    => array('validateLink'),
        'message' => '...'
    ),
    'google_plus_link' => array(
        'rule'    => array('validateLink'),
        'message' => '...'
    ),
    'linked_in_link' => array(
        'rule'    => array('validateLink'),
        'message' => '...'
    ),
);

public function validateLink($link) {
    $allFieldsAreEmpty = (
        empty($this->data[$this->alias]['facebook_link']) &&
        empty($this->data[$this->alias]['twitter_link']) &&
        empty($this->data[$this->alias]['google_plus_link']) &&
        empty($this->data[$this->alias]['linked_in_link'])
    );

    return !$allFieldsAreEmpty;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-26T08:27:04.507

希望这对你有用。

```
public $validate = array(
    'facebook_link' => array(
        'rule'    => array('customValidation','facebook_link'),
        'message' => 'Please enter facebook link.'
    ),
    'twitter_link' => array(
        'rule'    => array('customValidation','twitter_link'),
         'message' => 'Please enter twitter link.'
    ),
    'google_plus_link' => array(
        'rule'    => array('customValidation'),
         'message' => 'Please enter google plus link.'
    ),
    'linked_in_link' => array(
        'rule'    => array('customValidation'),
         'message' => 'Please enter linkedin link.'
    ),
);

function customValidation($data , $filed) {
    if(empty($data[$filed])) {
        return false;
    }
    return true;
} 
```

# assembly - PIC 是否处理不可屏蔽的中断？

> ID：14414269
> 
> 赞同：6
> 
> 时间：2013-01-19T12:16:26.153
> 
> 标签：assembly, x86, hardware, interrupt, computer-architecture

是否有用于绕过可编程中断控制器的不可屏蔽中断的单独通信总线？

还是 PIC 管理所有中断，但按照惯例传递所有不可屏蔽的中断？

这是否依赖于架构，或者是否有特定的理由偏爱一个而不是另一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:11:03.147

我的答案来自很久以前在遥远的星系中设计计算机时获得的一些硬件经验……很久以前，我认为我应该从参考资料中获得一些帮助。[当我在这里](https://stackoverflow.com/questions/7422708/how-to-send-nmi-on-same-system)阅读SO 时，我发现了一个下载[英特尔 ia32 64 位系统软件开发手册](http://www.intel.com/content/dam/doc/manual/64-ia-32-architectures-software-developer-vol-3a-3b-system-programming-manual.pdf)的地方。

第一个问题的答案是 NMI 是处理器上的一个引脚，它与 PIC 配置的可屏蔽中断隔离。

您的第二个问题的答案是 PIC 与 NMI 没有任何关系。但是，如果您有 APIC 或高级可编程中断控制器，则可以按照手册中的说明生成 NMI：

> 处理器通过传递模式 NMI 在系统总线（Pentium 4、Intel Core Duo、Intel Core 2、Intel Atom 和 Intel Xeon 处理器）或 APIC 串行总线（P6 系列和 Pentium 处理器）上接收消息。

您的第三个问题的答案可以在您的第二个问题的答案中看到。也就是说，如果您的硬件中有 APIC（而不仅仅是 PIC）。如果您想了解有关 APIC 如何发送 NMI 的更多详细信息，请查看我提供的 SO 链接。我没有在这里详细介绍，因为你问的是“低级”PIC，而不是 APIC。但万一我误解了你，我想你会在 SO 链接上找到很多信息，如果这还不够，那么继续下载英特尔手册。

我希望这能澄清一些事情。干杯！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T12:47:08.307

PIC（可编程中断控制器）不管理 x86 中的 NMI（不可屏蔽中断）。NMI 直接进入处理器或通过另一个控制器，例如。互联网服务提供商。请参阅[OSDev：不可屏蔽中断](http://wiki.osdev.org/Non_Maskable_Interrupt)。

但是，根据[链接](http://www.superfrink.net/athenaeum/OS-FAQ/os-faq-pics.html)，您可以通过以下方式禁用 NMI：

```
/* enable the NMI */
void NMI_enable(void)
{
    outb(0x70, inb(0x70)&0x7F);
}

/* disable the NMI */
void NMI_disable(void)
{
    outb(0x70, inb(0x70)|=0x80);
} 
```

# c# - 如何在 C# 中以低延迟/非常小的延迟在 C# 中播放音频文件？

> ID：14414271
> 
> 赞同：3
> 
> 时间：2013-01-19T12:16:42.520
> 
> 标签：c#, audio, parallel-processing, mp3

如何在 C# 中以很少的延迟播放音频文件（.mp3）？我的意思是，文件应该在提供用户输入之后才开始播放。

另外，如何同时播放两个音频文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T12:27:13.620

为了尽可能减少延迟，您需要在没有/静音数据的情况下运行音频播放，并且在感兴趣的事件中，您将向已经活动的设备提供真实的播放数据。通过这种方式，您可以消除可能发生的激活音频播放设备的开销。开销并没有那么大，因此您可能希望不要使您的应用程序过于复杂。

可以选择播放音频的 API：[DirectShow.NET](http://directshownet.sourceforge.net/)，尤其是 NAudio。

除非您打算在独占模式下使用播放设备（您不太可能想要这样做），否则所有 API 都支持多个独立流的播放，并且所有混合都是在幕后自动为您完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:22:01.807

看看[NAudio](http://naudio.codeplex.com/)库。

要同时播放多个文件，请参阅[这篇文章](http://opensebj.blogspot.co.at/2009/02/naudio-tutorial-2-mixing-multiple-wave.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T14:10:25.797

我将向您展示我是如何使用 DirectX AudioVideoPlayback 做到这一点的：

```
public class MusicPlayer
{
    private static Audio m_Audio;

    private static void Loop(Object Sender, EventArgs e)
    {
        ((Audio)Sender).SeekCurrentPosition(0d, SeekPositionFlags.AbsolutePositioning);
    }

    public static void Dispose()
    {
        if (m_Audio != null)
        {
            m_Audio.Stop();
            m_Audio.Dispose();
            m_Audio = null;
        }
    }

    public static void Mute()
    {
        if ((m_Audio != null) && m_Audio.Playing)
            m_Audio.Volume = -10000;
    }

    public static void Play(String filePath, Boolean loop)
    {
        if (File.Exists(filePath))
        {
            Dispose();

            if (m_Audio == null)
                m_Audio = new Audio(filePath);
            else
                m_Audio.Open(filePath);

            if (loop)
                m_Audio.Ending += Loop;

            m_Audio.Volume = MusicSettings.Volume - 10000;
            m_Audio.Play();
        }
    }

    public static void Unmute()
    {
        if (m_Audio != null)
            m_Audio.Volume = MusicSettings.Value - 10000;
    }
} 
```

你可以从这个片段开始。

# opencv - opencv检测真实世界坐标

> ID：14414274
> 
> 赞同：0
> 
> 时间：2013-01-19T12:16:59.423
> 
> 标签：opencv, coordinates, stereoscopy

我遵循了“Learning OpenCV”一书中的立体实现。我有基本的、基本的、旋转的、平移的矩阵，我如何计算我点击的对象的真实世界位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T02:35:04.837

您可以使用`ReprojectTo3D`.

reprojectImageto3D 函数需要视差图、与图像大小相同的输出数组和数组 Q（视差到深度图）。

Q 是从 stereoRectify 函数计算出来的 -> stereoRectify 需要固有的相机矩阵、失真系数以及 2 个相机之间的相对旋转和平移向量 (R&T)。

要计算所有这些，请使用输出所有这些的 stereoCalibrate 函数。 [http://opencv.willowgarage.com/documentation/camera_calibration_and_3d_reconstruction.html](http://opencv.willowgarage.com/documentation/camera_calibration_and_3d_reconstruction.html) - 这是我提到的所有功能的链接。

因此，编码顺序的步骤是：

1> stereoCalibrate（现在使用来自同一相机的 2 个视图）：获取失真系数、相机和 R & T 的内在矩阵。（您已经执行过）。

2> 计算视差并存储图像 - 使用此处显示的视差计算（[从 2 张图像进行 3d 重建，没有有关相机的信息](https://stackoverflow.com/questions/9026567/3d-reconstruction-from-2-images-without-info-about-the-camera)）来了解作为 reprojectImageto3D 的第一个和第二个参数的预期输入类型。

3> 使用 stereoRectify 得到 Q。

4> 将所有值插入 reprojectImage to3D 以生成坐标。输出数组 _3dImage 中的每个条目，即在每个像素处，我们将一起存储 3 个值：对应于像素的 x,y 坐标和从 Q 计算的 z 坐标。这个 z 坐标本质上是我们想要的。

一旦你计算出视差图并使用 Q 获得 _3dImage，每个`(i, j)`都有值。我什至将它移植到 PCL 以查看 3D 图像，这就是它的外观。`_3dImage``(x, y, z)`

这就是视差图的样子

![在此处输入图像描述](../Images/4d2a9e76064a4278eae9cf1de3b76580.png)

这是使用 PCL 的相应 3D 视图

![在此处输入图像描述](../Images/87343fad45906be5249de42cc46d4fa1.png)

# php - 引号引起的 PHP 语法错误

> ID：14414275
> 
> 赞同：0
> 
> 时间：2013-01-19T12:17:06.403
> 
> 标签：php, string, syntax-error, double-quotes

我一直在尝试通过使用引号来调解此错误，但由于某种原因，我无法通过错误。

这是我的代码：

```
<form action='finish.php?id="<?=$row['session_id']?>"' method='post'>
  <textarea name='counselorcomments' rows='10' cols='50' placeholder='Please make sure to finish session before logging out! Also please be short and consise with your comments!'></textarea>
  <input type='submit' name='finish' value='Finish Session'>
  <input type='submit' name='additional' value =' Additional Counseling Needed'> 
</form> 
```

这是错误：

> PHP Parse error: syntax error, unexpected $end in /var/www/DBFinaid/NewDBLogic/counselor.php on line 108, referer: Https: my test server 。com！

我知道这个问题源于我对单引号和双引号的低水平理解，所以如果我可以请求是否有一个链接，我可以在哪里开始引用引号，那就太棒了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T12:21:09.393

`unexpected $end`通常意味着错位的花括号，一个未闭合的花括号。
通过删除大部分来调试代码，直到问题消除。然后开始添加它们并找出它出现的位置。

您发布的代码中没有语法错误。

# javascript - 使用取自 HTML 的 JavaScript 打印数据

> ID：14414283
> 
> 赞同：0
> 
> 时间：2013-01-19T12:18:26.867
> 
> 标签：javascript, jquery, html

我正在尝试学习如何调试 jquery。我试图制作一个将动态添加输入字段的页面。数据被发送到jquery。现在进行调试，我尝试`console.log`了整个数组，但在 Firefox 中出现此错误：

> [17:40:27.073] 未声明 HTML 文档的字符编码。如果文档包含 US-ASCII 范围之外的字符，则文档将在某些浏览器配置中呈现乱码。页面的字符编码必须在文档或传输协议中声明。@file:///Users/ateevchopra/Desktop/takemehome%20dynamic/TakeMeHome/index.html

如果我的代码中有错误，请解释这意味着什么。这是我的代码

**HTML：**

```
<!doctype html>
<html>

 <head>
    <title>TakeMeHome</title>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="js/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.8.1.custom.min.js"></script>
    <script type="text/javascript" src="js/main.js"></script>
    <script type='text/javascript' src='js/app.js'></script>

  </head>

  <body>
    <center><form id="details">
      Your Place:<input id="source" type="text"><br><br>
      Friend1:<input id="friend1" type="text"><br><br>
      <div id="friends"></div>
      <div id="button">Add!</div><br><br>

       <input type="submit" value="go">
    </form>
  </body>

</html> 
```

**jQuery：**

```
 var j=2;
var friends = [];

$(document).ready(function(){

    $('#button').click(function(){
      if(j<11){
          $('#friends').append('Friend'+j+':<input type="text" id="friend'+j+'"/><br/><br/>'); 
        j++;
      }
     else
      {
     alert("Limit reached");
   }
    });

});

$("form").submit(function(){

    friends[0] = ('#source').val();
    for(var i=1;i<j;i++)
    {
        friends[i] = ('#friends'+i+'').val();
    }

    console.log(friends);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:21:48.987

该错误与 JavaSCript 无关。

如果您添加一个类似的元标记，`<meta charset="UTF-8" />`它应该是固定的。

我还看到您在 doctype 声明中有一个类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T12:21:57.953

这不是您的 Javascript 代码中的错误，而是 Firefox 发出的关于实际 HTML 标记有效性的一般警告。

文档的编码应该在`meta`标签内声明一个`header`标签。例如，如果您的编码是 UTF-8，它将是：

```
<head>
    ...
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    ...
</head> 
```

由于您的文档类型是 HTML5，您还可以使用该`charset`属性：

```
<head>
    ...
    <meta charset="UTF-8">
    ...
</head> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T12:34:36.763

您的代码运行良好，您可以从此控制台看到它。[日志](http://www.jsfiddle.net/fqQLC/) 非常适合调试，但我更喜欢您使用 firebug 进行调试。使用 firebug，您可以调试每一行，还可以查看每个变量的值。我正在使用带有firefox的firebug。[您可以从该链接](https://www.addons.mozilla.org/en-US/firefox/addon/firebug/)下载 firebug for firefox 。希望对您有所帮助。

# git - 将子域绑定到没有 apache 的目录（可通过 ssh 获得）

> ID：14414285
> 
> 赞同：2
> 
> 时间：2013-01-19T12:18:31.810
> 
> 标签：git, ssh, subdomain, subdirectory

我知道如何通过虚拟主机将域/子域绑定到使用 apache 的目录。我想在不使用 apache 和 http 的情况下做同样的操作。可以使用 ssh 或 git 协议工作的东西。我在互联网上找不到任何数据。

特别是在 github 上，要克隆存储库，您可以使用“git@github.com:symfony/symfony.git”，我很确定管理存储库的用户不会存储在 / 。

有任何想法吗 ？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:28:00.767

它可以与 ssh 一起工作的方式是当您使用[ssh**强制命令**机制](http://oreilly.com/catalog/sshtdg/chapter/ch08.html#22858)时，它将调用脚本：

*   你的 git 命令（克隆、推送、拉取）
*   你的仓库名称（从 gi​​t 命令推导出来）

该脚本*知道*存储库在哪里。

这种方法的一个例子是用**[gitolite](https://github.com/sitaramc/gitolite)**完成的（请参阅**[gitolite 是如何工作](http://sitaramc.github.com/gitolite/how.html)**的）。[它在安装过程中生成](https://github.com/sitaramc/gitolite/blob/master/src/lib/Gitolite/Rc.pm#L40-L42)
的.gitolite.rc会将所有裸 rpeos 放在：`~/repositories`

```
$rc{GL_REPO_BASE} = "$ENV{HOME}/repositories"; 
```

然而，`~/.ssh/config`在客户端使用适当的文件，您将克隆一个 gitolite 存储库：

```
git clone gitolite:myrepo 
```

更多详情请参阅“[用户在使用 gitolite 时需要输入密码](https://stackoverflow.com/a/10909791/6309)”。

# c++ - C++ 为什么使用公有、私有或受保护的继承？

> ID：14414286
> 
> 赞同：13
> 
> 时间：2013-01-19T12:18:43.870
> 
> 标签：c++, inheritance, private, public, protected

好吧，关于这个主题有足够的信息。例如，这个线程对我来说很清楚：[私有、公共和受保护继承之间的区别](https://stackoverflow.com/questions/860339/difference-between-private-public-and-protected-inheritance-in-c)

除了一点；为什么有用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-19T12:28:01.277

使用**公共继承**来反映**is-a 关系**。这是继承的主要用途，尤其是与虚函数结合使用。它允许重用接口，不仅是新代码重用旧代码，还允许旧代码重用新代码！（因为在运行时分派虚函数）。

在特殊情况下，使用**私有继承**来反映**is-implemented-in-terms-of 关系**。这是一个经常被过度使用的模式，通常可以通过组合（将可能的基类作为数据成员）来达到等效的目标。另一个缺点是您可以轻松地对同一基类进行多重继承（删除两次或多次），从而导致所谓的[钻石问题](http://en.wikipedia.org/wiki/Multiple_inheritance#The_diamond_problem)。

**避免使用受保护的继承**，它表明您的类接口是客户端相关的（派生类与世界）。这通常是由于类具有多种职责，建议将其重构为单独的类是合适的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T12:35:12.130

这个问题的答案涉及类接口和数据封装，而不是语言能力。

受保护和私有继承的用例相当有限，因为通常有其他选项可以更好地解决问题（例如使用组合，而不是继承）。但是，有时您*必须*从某种类型继承（例如与第三方库接口），但您强烈*希望*（出于与类的用户界面相关的原因）隐藏从基类继承的大多数成员来自您的新类型用户的课程。一个典型的场景是当您需要您的类型具有某个类的成员函数以供内部使用时，但是如果从类本身外部调用它会破坏您的新类型的逻辑。

在这些情况下，您需要使用`private`或`protected`继承（取决于接口是否应该类似地限制为进一步的派生类。

但是请记住，这只是（强烈）向您班级的用户暗示他们应该如何使用它。您正在调整其公共接口以隐藏其基类中公开的某些功能。严格来说，这并不能阻止人们访问这些成员，因为任何人仍然可以将指向派生类的指针转换为指向基类的指针，并以这种方式访问​​“隐藏”资源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T12:22:11.410

这都是关于**数据封装**的。

[http://en.wikipedia.org/wiki/Encapsulation_(面向对象编程)](http://en.wikipedia.org/wiki/Encapsulation_(object-oriented_programming))

[封装概念](https://stackoverflow.com/questions/4772956/encapsulation-concept/4772966#4772966)

保护您的类的“内部”数据免受其他类的影响是很好的。好处包括：

*   其他类必须通过已知的正确访问机制（例如方法）来访问您的类，并且不能直接使用您的类的内部（因此可能会使您的类进入一些未知和损坏的状态）
*   您可以更改班级的内部运作，并知道其他班级不会因此而中断
*   减少与课程的可见外部接触点，使您的课程更易于使用和理解

选择使用`protected`而不是`private`也使您的代码更容易通过子类化进行扩展。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T12:37:02.180

**Private：**类的私有成员只能从类函数、构造函数和析构函数中访问。将使用您的课程的客户将无法访问它们。因此，例如，如果您正在实现一个列表类并且想要跟踪列表的大小，那么您应该有一个私有变量（`listSizeP`例如）。您这样做是因为您不希望客户端能够在不插入元素的情况下修改列表的大小。

**公共：**公共成员也可以被客户端访问。在上面提到的列表示例中，函数`insert`和`erase`应该是公共的。

**protected：**类的protected成员，和private成员一样，只能从类函数中访问，但也可以被该类继承的类访问（实际上取决于派生类继承基类的方式。如果不是公有继承，那么派生类就不能访问基类的私有成员。这就是为什么最常见的继承方式是公有继承）。例子：

```
#include <iostream>

using namespace std;

class Base {
public:
    int num;
public:
    Base(int x=0) : num(x) {}
};

class Derived : public Base {
public:
    Derived(int x=0) : Base(x) {}
    void tell() { cout << "num: " << num << endl; }
};

int main() {
    Derived D(4);
    D.tell(); // would cause error if num was private
    return 0;
} 
```

# ios - 在核心数据中应该有一个逆

> ID：14414287
> 
> 赞同：5
> 
> 时间：2013-01-19T12:18:59.783
> 
> 标签：ios, objective-c, core-data

> **可能重复：**
> [每个核心数据关系都必须有一个逆向关系吗？](https://stackoverflow.com/questions/764125/does-every-core-data-relationship-have-to-have-an-inverse)

我有以下具有关系的实体： ![在此处输入图像描述](../Images/0d0d2587f425bf0f00b68951b2163b00.png)

A`CombinedSH`必须有 a`Subject`和 a `StudyHour`。
A`Subject`不能有`CombinedSH`.
A`StudyHour`不能有`CombinedSH`.

在我的应用程序中， a `Subject`/ a`StudyHour`将具有`CombinedSH`. 问题是 Xcode 给了我以下警告：

> 警告：错误配置的属性：CombinedSH.studyHour 应该有一个倒数。
> 
> 警告：错误配置的属性：CombinedSH.subject 应该有一个逆。

所以 Xcode 说应该有一个逆向 - 但在我的应用程序中它没有意义。我该怎么办？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-19T12:28:03.530

`Subject`您可以定义从to的逆关系`CombinedSH`并将其标记为“可选”。那么“Subject”不需要有“CombinedSH”。

这样做让 Xcode 很开心，但也有另一个优势。假设你有对象

```
CombinedSH *csh1;
Subject *s1; 
```

和

```
csh1.subject = s1; 
```

如果`s1`被删除会怎样？如果没有反向关系，`csh1.subject`将指向某个已删除的对象。

但是如果你定义了反向关系，并且将该关系的“删除规则”设置为“无效”，那么删除会`s1`自动设置

```
csh1.subject = nil 
```

因此`subject`不能再指向已删除的对象。

# jquery - 从 Json 响应中获取单个值

> ID：14414290
> 
> 赞同：2
> 
> 时间：2013-01-19T12:19:15.507
> 
> 标签：jquery

> **可能重复：**
> [我有一个嵌套的数据结构/JSON，我怎样才能访问一个特定的值？](https://stackoverflow.com/questions/11922383/i-have-a-nested-data-structure-json-how-can-i-access-a-specific-value)

我的 Json 响应如下所示：

```
[{"referenceid":"999","firstname":"Firstname","middlename":"Middlename","lastname":"Surname","shortlisted":"0"}] 
```

我怎样才能检索 referenceid 值？我已经搜索和搜索了......尝试了各种各样的东西，但我只能返回一个“未定义”。

谢谢

编辑：

忘记了我的其他代码：-

```
function populateFormData() {

var mxKey = $.now();

$.get("\\web\\php\\somesite\\phpData.php?mxKey" + mxKey, function(applicationData) {

    console.log("Application Data: " + applicationData);

    var jsonData = JSON.parse(applicationData);

    console.log("Json Parse Data: " + jsonData);

}); 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T12:21:29.747

像这样：

```
var a = [{
  "referenceid": "999",
  "firstname": "Firstname",
  "middlename": "Middlename",
  "lastname": "Surname",
  "shortlisted": "0"
}];

alert(a[0].referenceid); 
```

# java - HTTPURLConnection.getContent java.io.FileNotFoundException

> ID：14414292
> 
> 赞同：1
> 
> 时间：2013-01-19T12:19:41.280
> 
> 标签：java, http-status-code-404, httpurlconnection

我使用 a`HttpURLConnection`连接到网站并接收`ResponseCode=404 (HTTP_NOT_FOUND)`. 但是，我在浏览器 (IE) 中打开网站没有问题。

为什么会有差异，我能做些什么呢？

这是我的程序：

```
String responseMsg = "";

String cgsUrl = "http://localhost:9081/ntes/";

URL url = new URL(cgsUrl);
System.out.println("ouuuuuuu-->"+url.getContent());

InputStream in = url.openConnection().getInputStream();

StringBuffer respDataBuf = new StringBuffer();
respDataBuf.setLength(0);
int b = -1;

while((b = in.read()) != -1) {
    respDataBuf.append((char)b);
}
responseMsg = respDataBuf.toString(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T15:21:05.050

如果这是 404 错误，这肯定是特定的服务器配置。

也许你的用户代理被禁止了，或者你没有携带特殊的标题等等。我建议您从浏览器中复制标头（所有标头）并使用它们在您的 Java 程序中发出请求。

然后你把它们一个一个扔掉，找到那个是强制性的

# html - 在 CSS 类中设置颜色不起作用

> ID：14414293
> 
> 赞同：6
> 
> 时间：2013-01-19T12:19:57.143
> 
> 标签：html, css, colors

我无法设置这个 CSS 类，颜色指令不起作用，但 text-shadow 可以。帮我？

```
.jumbotron {
    position: relative;
    padding: 40px 0;
    color: #6495ed;
    text-align: center;
    text-shadow: 0 1px 3px rgba(0,0,0,.4), 0 0 30px rgba(0,0,0,.075);
} 
```

我试图删除文本阴影，但它也没有工作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-19T12:35:34.813

用于`!important`覆盖其他颜色样式。

喜欢：`color: #6495ed !important`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:44:34.357

我认为右括号丢失了。将所有设置放在`.jumbotron`课堂上并尝试一下。祝你好运。

我对您的 CSS 代码进行了如下测试：

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Untitled</title>
    <meta name="author" content="" />
    <style>
    .jumbotron {
      position: relative;
      padding: 40px 0;
      color: red;
      text-align: center;
      text-shadow: 0 1px 3px rgba(0,0,0,.4), 0 0 30px rgba(0,0,0,.075);
    }
    </style>
</head>
<body>
  <p class="jumbotron">This is a test</p>
</body>
</html> 
```

它似乎运作良好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-30T12:31:16.340

```
<!doctype html>
<head>
<html>
    <style>
    .jumbotron {
      position: relative;
      padding: 40px 0;
      color: #6495ed !important;
      text-align: center;
      text-shadow: 0 0px 0px rgba(0,0,0,.4), 0 0 30px rgba(0,0,0,.075);
    }
    </style>
</head>
<body>
  <p class="jumbotron">hello world</p>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-02T18:51:45.363

另一种可能性可能是不小心使用了 HTML 注释标签而不是 CSS 注释标签，或者在`color: #6495ed;`导致用户代理忽略`color: #6495ed;`声明之前添加了一些无法识别的字符

```
<!doctype html>
<html>
<head>
    <style>
    .jumbotron { 
        position: relative;
        padding: 40px 0; <!--some comments -->
        color: #6495ed; 
        text-align: center;
        text-shadow: 0 1px 3px rgba(0,0,0,.4), 0 0 30px rgba(0,0,0,.075);
    }
    </style>
</head>
<body>
    <p class="jumbotron">Testing...</p>
</body>
</html> 
```

用户代理会将其视为

```
<!doctype html>
<html>
<head>
    <style>
    .jumbotron { 
        position: relative;
        padding: 40px 0; 
        text-align: center;
        text-shadow: 0 1px 3px rgba(0,0,0,.4), 0 0 30px rgba(0,0,0,.075);
    }
    </style>
</head>
<body>
    <p class="jumbotron">Testing...</p>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-24T14:33:36.857

如果背景颜色发生变化但文本没有变化，那么一个可能的原因可能是锚点。默认情况下，当您将文本放置在锚点中时，它会自动变为下划线，因为它是一个链接，并且在访问一次时会带下划线。因此，如果其他人遇到此问题，请尝试在 css 中覆盖它

```
a:hover, a:active, a:link, a:visited {
   text-decoration:none;
   color : #000; /* for example */ 
} 
```

或者简单地重复css项目并在类前面添加“a”：

我的班级，我的班级一个{}

# c# - SignalR 和 MVC4

> ID：14414295
> 
> 赞同：1
> 
> 时间：2013-01-19T12:20:15.183
> 
> 标签：c#, javascript, asp.net, signalr

我正在尝试让示例[https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs](https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs)与 MVC4 一起运行。

我添加了

```
<script src="/signalr/hubs" type="text/javascript"></script> 
```

并在我的 html 中的单个 javascriptfiles 之前包含 jquery。但我收到 Chrome 控制台错误

```
http://localhost:35787/signalr/hubs/ 403 (Forbidden) 
Uncaught TypeError: Cannot read property 'client' of undefined 
```

当然，我安装了 nuget-package 并创建了 hub 类。我没有文件夹 /signalr/hubs？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T07:10:04.730

在 WebAPI 路由之前在顶部注册 Hub。

```
RouteTable.Routes.MapHubs();
WebApiConfig.Register(GlobalConfiguration.Configuration);
FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
RouteConfig.RegisterRoutes(RouteTable.Routes); 
```

如果上述方法不起作用，那么试试这个

```
<system.webServer> <modules runAllManagedModulesForAllRequests="true"> </modules> 
```

欲了解更多信息，请阅读： [https ://github.com/SignalR/SignalR/wiki/Faq](https://github.com/SignalR/SignalR/wiki/Faq)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:30:18.310

路由注册了吗？

应用程序_开始：

```
...
RouteTable.Routes.MapHubs();
RouteConfig.RegisterRoutes(RouteTable.Routes);
... 
```

[在常见问题解答](https://github.com/SignalR/SignalR/wiki/Faq)中也提到

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T12:39:53.007

我在我保存集线器的项目中创建了一个文件夹“/signalr/hubs”。这导致了错误！在我删除它之后它可以工作。

# php - jQuery - 在 PHP while 循环中检查一个输入框与另一个输入框

> ID：14414297
> 
> 赞同：0
> 
> 时间：2013-01-19T12:20:28.427
> 
> 标签：php, jquery, html

我在编写订单提交页面时遇到了一个相当大的问题，该页面的目的是为订单提交争议 - 提供两个字段填写，但前提是一个字段小于另一个字段。

基本上，一个是下拉框，另一个是争议框，查询如下：

如果 DisputesTextBox = "" 并且下拉框 = "请选择..."

一切都很好 - 启用提交按钮

如果 DisputesTextBox != "" 并且下拉框 = "请选择..."

错误（反之亦然，因此如果填写了争议但 dropwn = 请选择...） - 提交按钮已禁用

如果 DisputesTextox != "" 并且下拉框 = "Other"

一切都很好 - 启用提交按钮

如果 DisputesTextBox > 装运箱

错误 - 提交按钮被禁用

```
<table>
                <thead>
                    <tr><th>Item ID</th><th>Description</th><th>Dispute Quantity</th><th>Shipped Quantity</th><th>Ordered Quantity</th><th>Reason</th></tr>
                </thead>
                <tbody>
                    <?php
                        $data = mysql_query("SELECT * FROM `artran09` WHERE `invno` = '$invoiceno'") or die(mysql_error());
                        echo "<center>";
                        $i = -1;        
                        echo "<form action=\"submitdispute.php?invno=".$invoiceno."&ordate=".$placed."\" method=\"POST\" onsubmit=\"return confirm('Are you sure you are ready to dispute your order?');\">";

                            while ($info = mysql_fetch_array($data)) {              
                                $i += 1;                                    
                                echo "<tr>"; 
                                echo "<td>".$info['item']."</td>"; 
                                echo "<td>".$info['descrip']."</td>";       

                                echo "<td><input type=\"text\" input name=".$i." onKeyPress=\"return numbersonly(this, event)\"  maxLength=\"3\"></td>"; 

                                echo "<td><input type=\"text\" value=".$info['qtyshp']." onKeyPress=\"return numbersonly(this, event)\" maxLength=\"3\" disabled=\"disabled\"></td>"; 

                                echo "<td><input type=\"text\" value=".$info['qtyord']." onKeyPress=\"return numbersonly(this, event)\" maxLength=\"3\" disabled=\"disabled\"></td>"; 

                                echo "<td><select name = \"reason$i\">";
                                echo "<option>Please Select...</option>";
                                echo "<option>Short/Not received</option>";
                                echo "<option>Damaged Goods</option>";
                                echo "<option>Product Not Ordered</option>";                    
                                echo "</select></td>";

                                echo "</tr>"; 
                            }

                    ?>
                </tbody>
            </table>
        </div>
    </div>
    <p><input type = "submit" value = "Dispute" name ="Submit">
    </form> 
```

谢谢，希望有人能帮忙！

为 Wolf/任何可以提供帮助的人编辑 - 这里的代码是怎么回事：

-- 我编辑的代码 --

```
function validateSubmit(){

   // this will loop through each row in table
   // Make sure to include jquery.js
   $('tr').each( function() {
      // Find first input
      var input1 = $(this).find('input').eq(0);
      var qty1 = input1.val();
      // Find Second input
      var input2 = $(this).find('input').eq(1);
      var qty2 = input2.val();
      // Find third input
      var input3 = $(this).find('input').eq(2);
      var qty3 = input3.val();
      // Find select box
      var selectBx = $(this).find('select');
      var selectVal = selectBx.val();
      // Add your validation code here for the inputs and select
      // Return true if all validations are correct
      // Else return false
        if(qty1 = "" && selectVal = "Please Select...") {
            return true;
            alert("You have an error somewhere, please check over your quantites.");
            break;
        }
        if (qty1 > qty2) {
            return false;
            alert("You have an error somewhere, please check over your quantites.");
            break;
        }
   });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T12:24:21.670

```
 return true;
        alert("You have an error somewhere, please check over your quantites.");
        break; 
```

如果调用 return，当前函数的执行将立即停止并返回值。这意味着在执行 return 语句之后什么都没有。`alert()`不会运行，因为函数以`return true`.

# jquery - Cookie 在 Ajax 请求之前设置，但响应使用较旧的 cookie IE

> ID：14414299
> 
> 赞同：1
> 
> 时间：2013-01-19T12:20:35.400
> 
> 标签：jquery, ajax, internet-explorer, cookies, jquery-cookie

我的IE有点问题，我希望这个网站的最后一个......</p>

所以，我正在使用 Wordpress，并且我有几个受保护的帖子。我必须使用的模板（由代理商选择）将所有帖子加载在同一页面中，并且有数千张图片，这并不是一个好主意。因此，当访问者单击其项目时，我选择使用 ajax 加载页面。

所以在密码表单的相同想法中，它们是使用 Ajax 提交的。在我请求之前，我将 cookie 'pageloaded' 设置为页面的 id，以了解响应页面中显示的帖子（一个包含所有帖子的页面，所以只想生成受保护的帖子）。

当我转到一个页面时，Ajax 发送一个 post 变量，但是使用表单，我不能因为 wp-login.php（表单的操作页面）重定向到前一页，所以我丢失了 post 变量。然后我有了使用cookie的想法！好吧，它适用于除 IE 之外的所有浏览器：/

```
var pageloaded = form.find( 'input[name="pageloaded"]' ).val();
$.cookie('wp_pageloaded', null);
$.cookie('wp_pageloaded',pageloaded, { path: '/' });
var permalink = form.attr('action');
var newurl = permalink;

$.ajax({
    type: 'post',
    headers: {
        "Cache-Control":"no-cache",
        "Expires": "Mon, 26 Jul 1997 05:00:00 GMT" },
    url:newurl,
    data:{
        post_password: post_password,
        pageloaded: pageloaded
    },
    success:function(data, textStatus, jqXHR){
        var container_loaded = $(data).find('#'+pageloaded+' .the-content');
        $(container).html($(container_loaded).html());
        var formNew = $(container).find('form');
        $(formNew).submit(function(event) {
            checkpassword(event);
        });
    }
}); 
```

IE反应到底是什么：他存储了第一种形式的cookie，所以第一个请求就可以了。对于第二个请求，cookie 仍然是第一个。

我重新加载页面，这次 cookie 设置为第二个表单变量，第一个是忽略，依此类推……最后发送的表单在页面刷新时设置下一个变量（手动）。

看起来 IE 很好地设置了 cookie，但在 ajax 请求中读取了旧的：/

谢谢你的帮助 ;）

**编辑：我尝试先对执行 setcookie() 的 php 文件执行请求，然后对最终文件执行 ajax 请求，但问题仍然相同：/ 我将尝试使用会话，但我想知道 IE 有什么问题：/**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T13:18:35.283

好的，所以会话测试是一个了不起的想法！:P 你猜怎么着？要在 IE 的 Ajax 请求中激活 cookie，您只需`<? session_start();?>`在请求文件的开头编写。我不知道为什么，但它有效：/

# android - ListView 的标题是否被视为项目？

> ID：14414301
> 
> 赞同：-1
> 
> 时间：2013-01-19T12:20:54.887
> 
> 标签：android, header, android-listview, position

为什么要添加标题以`listView`将项目位置移动一个？

当我添加标题时，列表中第一项的位置不再是 0 而是 1。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:58:08.533

您的“标题”表示与所有其他项目相同的数据，但布局不同。

标头可能包含数据，也可能不包含。（您可能没有使用它，但其他开发人员可以轻松地将列表数据添加到他的页眉和页脚）。

因此，由于页眉可以包含数据，它实际上是一个项目，它占据位置 0。同样，页脚占据最后一个位置（如果使用）

# javascript - 如何将点击传播到光标下的所有 div？

> ID：14414306
> 
> 赞同：11
> 
> 时间：2013-01-19T12:21:16.067
> 
> 标签：javascript, jquery, css, javascript-events

我有一堆 div 绝对位于彼此之上。当我将点击事件绑定到所有这些时，只有顶部 div 响应。如何将事件发送到光标下的所有 div？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T16:54:03.613

采用 FelixKling 的使用建议`document.elementFromPoint()`和 Amberlamps 的小提琴，并使用 jQuery 进行 DOM 交互，我最终得到以下结果：

```
$divs = $("div").on('click.passThrough', function (e, ee) {
  var $el = $(this).hide();
  try {
    console.log($el.text());//or console.log(...) or whatever
    ee = ee || {
      pageX: e.pageX,
      pageY: e.pageY
    };
    var next = document.elementFromPoint(ee.pageX, ee.pageY);
    next = (next.nodeType == 3) ? next.parentNode : next //Opera
    $(next).trigger('click.passThrough', ee);
  } catch (err) {
      console.log("click.passThrough failed: " + err.message);
  } finally {
    $el.show();
  }
}); 
```

**[演示](http://jsfiddle.net/E9zTs/2/)**

`try/catch/finally`用于确保再次显示元素，即使发生错误。

两种机制允许通过或不通过点击事件：

*   仅将处理程序附加到选定的元素（标准 jQuery）。
*   命名空间点击事件，`click.passThrough`类似于`event.stopPropagation()`.

单独或组合，这些机制在控制“passThrough”行为的连接和传播方面提供了一些灵活性。例如，在 DEMO 中，尝试`p`从“b”元素中删除类，看看传播行为是如何变化的。

就目前而言，需要编辑代码以获得不同的应用程序级行为。更通用的解决方案是：

*   允许以编程方式附加特定于应用程序的行为
*   允许以编程方式抑制“passThrough”传播，类似于`event.stopPropagation()`.

这两个目标都可以通过`clickPassthrough`在 jQuery 中建立一个具有潜在“passThrough”行为的事件来实现，但要实现这一目标还需要做更多的工作。也许有人想试一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T12:52:37.890

这并不像您想象的那么容易。这是我想出的解决方案。我只在 Chrome 中测试过，没有使用任何框架。

以下代码片段仅用于向`div`文档中的每个添加单击事件，触发时输出其类名。

```
var divs = document.getElementsByTagName("div");
for(var i = 0; i < divs.length; i++) {
    divs[i].onclick = function() {
        console.log("class clicked: " + this.className);
    };
} 
```

将点击事件附加到正文元素，以便我们的脚本注意到每个点击事件。

```
if(document.addEventListener) {
    document.body.addEventListener("click", countDivs);
} else if(document.attachEvent) {
    document.attachEvent("onclick", countDivs);
} 
```

遍历您要检查的所有 div（您可能需要在此处调整到您喜欢的 div 范围）。生成它们的计算样式并检查鼠标坐标是否在 div 的位置加上它的宽度和高度的范围内。当 div 是我们的源元素时不要触发 click 事件，因为此时已经触发了 click 事件。

```
function countDivs(e) {
    e = e || window.event;
    for(var i = 0; i < divs.length; i++) {
        var cStyle = window.getComputedStyle(divs[i]);
        if(divs[i] !== e.target && e.pageX >= parseInt(cStyle.left) && e.pageX <= (parseInt(cStyle.left) + parseInt(cStyle.width)) && e.pageY >= parseInt(cStyle.top) && e.pageY <= (parseInt(cStyle.top) + parseInt(cStyle.height))) {
            divs[i].click();
        }
    }
} 
```

CSS：

```
.a, .b, .c {
  position: absolute;
  height: 100px;
  width: 100px;
  border: 1px #000 solid
}
.a {
  top: 100px;
  left: 100px;
}
.b {
  top: 120px;
  left: 120px;
}
.c {
  top: 140px;
  left: 140px;
} 
```

HTML：

```
<div class="a"></div>
<div class="b"></div>
<div class="c"></div> 
```

我还添加了一个[jsFiddle](http://jsfiddle.net/E9zTs/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T13:02:05.300

一种简单的方法是使用 elementFromPoint()：

[http://jsfiddle.net/SpUeN/1/](http://jsfiddle.net/SpUeN/1/)

```
var clicks = 0,cursorPosition={};

$('div').click(function (e) {
    if(typeof cursorPosition.X === 'undefined') {
         cursorPosition.X = e.pageX;
        cursorPosition.Y = e.pageY;
    }
    clicks++;
    e.stopPropagation();
    $(this).addClass('hided');
    var underELEM = document.elementFromPoint(cursorPosition.X, cursorPosition.Y);
    if (underELEM.nodeName.toUpperCase() === "DIV") $(underELEM).click();
    else {
        $('#clicks').html("Clicks: " + clicks);
        $('.hided').removeClass('hided');
        clicks=0;
        cursorPosition = {};
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T14:05:06.673

如果您绝对堆叠元素，则将它们全部堆叠在定位容器中并处理来自该父级的事件可能会更简单。然后，您可以操纵它的**孩子**而无需测量任何东西。

# asp.net - 如何仅在某些条件下异步运行 ASP.NET 页面？

> ID：14414315
> 
> 赞同：0
> 
> 时间：2013-01-19T12:22:04.327
> 
> 标签：asp.net, asynchronous-pages

我有一个 ASP.NET 页面，它通常运行得很快，但*有时*必须调用一个可能需要几秒钟才能响应的外部服务。所以，大多数时候，我希望这个页面像往常一样同步运行，但在需要调用服务时异步运行。

我猜我可以`<%@ Page Async="true" ... %>`在代码隐藏中设置并仅在需要时运行异步代码（设置事件处理程序等）。如果我不设置异步事件处理程序，页面将正常同步运行，不会影响性能或其他问题。

这种方法被认为是完美的，还是有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T20:43:46.777

您提出的方法很好。如果运行时检测到一个标记为 Async=true 但没有启动任何异步工作的页面，它只会同步运行该页面。只有非常少量（几乎无法衡量）的开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:38:38.980

尝试 "Asp.net Ajax" 使用 ScriptManager ， "update pannels" 用于 asp.net ajax。

# python - 如何根据列表项对列表列表进行排序，列表项是python中表示为字符串的数字？

> ID：14414316
> 
> 赞同：1
> 
> 时间：2013-01-19T12:22:08.297
> 
> 标签：python, string, list, sorting

我有 3 个列表：

```
>>> a = ["12", "a"]
>>> b = ["123", "b"]
>>> c = ["4", "c"] 
```

我将它们放在一个新列表中：

```
>>> d = [a,b,c] 
```

当我根据每个内部列表的第一项对它们进行排序时：

```
>>> sorted(d, key=itemgetter(0))
[['12', 'a'], ['123', 'b'], ['4', 'c']] 
```

但我想要：

```
[['4', 'c'], ['12', 'a'], ['123', 'b']] 
```

此外，第一项可能有前导零：

```
>>> a = ["012", "a"]
>>> b = ["0123", "b"]
>>> c = ["04", "c"] 
```

同样，我想以这种方式查看排序列表：

```
[['04', 'c'], ['012', 'a'], ['0123', 'b']] 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T12:24:52.453

只需`int()`在 key getter 中使用：

```
In [5]: sorted(d, key=lambda x:int(x[0]))
Out[5]: [['4', 'c'], ['12', 'a'], ['123', 'b']] 
```

在第二个例子中：

```
In [10]: sorted(d, key=lambda x:int(x[0]))
Out[10]: [['04', 'c'], ['012', 'a'], ['0123', 'b']] 
```

# .net - 实时波形图

> ID：14414321
> 
> 赞同：0
> 
> 时间：2013-01-19T12:22:26.920
> 
> 标签：.net, wpf, graphics, gdi+, waveform

我试图想出一个好的设计来在.Net中绘制实时波形。每 x 毫秒添加一个样本，当波形位于页面末尾时，它会重置到开头并开始覆盖现有波形（如 ECG 心率监视器中）。

过去我以一种非常简单的方式做到这一点：只需以固定间隔为每个样本绘制一个像素。虽然这没问题，但当我尝试添加任何类型的背景时，我很快就遇到了麻烦，例如：网格。当样本/像素与网格重叠时，在第二次通过时清除它会变得很复杂，因为您不能只用白色像素覆盖它。

也许为此使用 WPF 而不是 Winforms 会更容易，因为我可以将波形作为一个元素，并且在我移动元素时应该自动保留/重绘背景。

你会如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:28:02.070

您可以将曲线放入[Path](http://msdn.microsoft.com/en-us/library/ms615632.aspx)控件的[Data](http://msdn.microsoft.com/en-us/library/system.windows.shapes.path.data.aspx)属性中的[PathGeometry](http://msdn.microsoft.com/en-us/library/system.windows.media.pathgeometry.aspx)（或[StreamGeometry](http://msdn.microsoft.com/en-us/library/system.windows.media.streamgeometry.aspx)）中。

```
<Canvas>
    <Path Stroke="Black" StrokeThickness="3">
        <Path.Data>
            <PathGeometry>
                <PathFigure x:Name="figure" IsClosed="False">
                    <PathFigure.Segments>
                        <PolyLineSegment x:Name="polyline"/>
                    </PathFigure.Segments>
                </PathFigure>
            </PathGeometry>
        </Path.Data>
    </Path>
</Canvas> 
```

在代码隐藏中更新 PathGeometry：

```
figure.StartPoint = ...;
polyline.Points.RemoveAt(...);
polyline.Points.Add(...); 
```

# arrays - 使用变量在 bash 中传递 grep 模式

> ID：14414324
> 
> 赞同：4
> 
> 时间：2013-01-19T12:22:55.050
> 
> 标签：arrays, bash, design-patterns, grep, ifs

我正在努力传递变量中包含的几个 grep 模式。这是我的代码：

```
#!/bin/bash
GREP="$(which grep)"
GREP_MY_OPTIONS="-c"
for i in {-2..2}
do
  GREP_MY_OPTIONS+=" -e "$(date --date="$i day" +'%Y-%m-%d')
done
echo $GREP_MY_OPTIONS

IFS=$'\n'
MYARRAY=( $(${GREP} ${GREP_MY_OPTIONS} "/home/user/this path has spaces in it/"*"/abc.xyz" | ${GREP} -v :0$ ) ) 
```

这就是我想要它做的事情：

*   确定/定义 grep 的位置
*   分配一个变量 (GREP_MY_OPTIONS) 保存我将传递给 grep 的参数
*   将几个模式分配给 GREP_MY_OPTIONS
*   使用 grep 和我存储在 $GREP_MY_OPTIONS 中的模式搜索包含空格的路径中的多个文件并将它们保存在数组中

当我使用“echo $GREP_MY_OPTIONS”时，它正在生成我所期望的，但是当我运行脚本时它失败并出现以下错误：

**/bin/grep: 无效选项 -- ' '**

我究竟做错了什么？如果路径中没有空格，一切似乎都可以正常工作，所以我认为这与 IFS 有关，但我不确定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T12:36:44.857

如果您想`grep`在一组路径中获取一些内容，可以执行以下操作：

```
find <directory> -type f -print0 |
    grep "/home/user/this path has spaces in it/\"*\"/abc.xyz" |
    xargs -I {} grep <your_options> -f <patterns> {} 
```

所以这`<patterns>`是一个包含您要在每个文件中搜索的模式的文件`directory`。

考虑到您的回答，这将满足您的要求：

```
find "/path\ with\ spaces/" -type f | xargs -I {} grep -H -c -e 2013-01-17 {} 
```

来自`man grep`：

```
 -H, --with-filename
          Print  the  file  name for each match.  This is the default when
          there is more than one file to search. 
```

由于要将元素插入数组，因此可以执行以下操作：

```
IFS=$'\n'; array=( $(find "/path\ with\ spaces/" -type f -print0 |
    xargs -I {} grep -H -c -e 2013-01-17 "{}") ) 
```

然后将值用作：

```
echo ${array[0]}
echo ${array[1]}
echo ${array[...]} 
```

使用变量传递参数时，用于`eval`评估整行。请执行下列操作：

```
parameters="-H -c"
eval "grep ${parameters} file" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T18:37:57.343

如果将 GREP_MY_OPTIONS 构建为数组而不是简单的字符串，则可以使原始大纲脚本正常工作：

```
#!/bin/bash
path="/home/user/this path has spaces in it"
GREP="$(which grep)"
GREP_MY_OPTIONS=("-c")
j=1
for i in {-2..2}
do
    GREP_MY_OPTIONS[$((j++))]="-e"
    GREP_MY_OPTIONS[$((j++))]=$(date --date="$i day" +'%Y-%m-%d')
done

IFS=$'\n'
MYARRAY=( $(${GREP} "${GREP_MY_OPTIONS[@]}" "$path/"*"/abc.xyz" | ${GREP} -v :0$ ) ) 
```

我不清楚您为什么使用`GREP="$(which grep)"`，因为您将执行与直接`grep`编写相同的操作`grep`——除非，我想，您有一些别名`grep`（这就是问题所在；不要使用别名`grep`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T13:00:40.670

你可以做一件事而不会使事情变得复杂：

首先在脚本中更改目录，如下所示：

```
cd /home/user/this\ path\ has\ spaces\ in\ it/
$ pwd
/home/user/this path has spaces in it 
```

**或者**

```
$ cd "/home/user/this path has spaces in it/"
$ pwd
/home/user/this path has spaces in it 
```

然后在你的脚本中做任何你想做的事情。

```
$(${GREP} ${GREP_MY_OPTIONS} */abc.xyz) 
```

**编辑**：

```
[sgeorge@sgeorge-ld stack1]$ ls -l
total 4
drwxr-xr-x 2 sgeorge eng 4096 Jan 19 06:05 test tesd
[sgeorge@sgeorge-ld stack1]$ cat test\ tesd/file 
SUKU
[sgeorge@sgeorge-ld stack1]$ grep SUKU */file
SUKU 
```

**编辑**：

```
[sgeorge@sgeorge-ld stack1]$ find */* -print | xargs -I {} grep SUKU {}
SUKU 
```

# collections - 为什么没有HashSet 实现 IReadOnlyCollection ?

> ID：14414330
> 
> 赞同：10
> 
> 时间：2013-01-19T12:23:58.257
> 
> 标签：collections, .net-4.5, base-class-library

.NET 4.5 中新的只读接口（例如[`IReadOnlyCollection<T>`](http://msdn.microsoft.com/en-us/library/hh881542.aspx)和[`IReadOnlyDictionary<TKey,TValue>`](http://msdn.microsoft.com/en-us/library/hh136548.aspx)）非常有用，尤其是因为它们已在常见的 BCL 类型（例如`Collection<T>`、`List<T>`和`Dictionary<TKey,TValue>`.

但是，`HashSet<T>`并`SortedSet<T>`没有升级为 implement `IReadOnlyCollection<T>`，我看不出这个决定背后的逻辑，因为这些类在没有任何修改或破坏性更改的情况下与接口匹配。它只是被 BCL 团队忽略了，还是我在这里遗漏了什么？

（这特别烦人，因为没有内置方法可以将集合包装在 a`IReadOnlyCollection<T>`中。确实，`ReadOnlyCollection<T>`包装`IList<T>`而不是`ICollection<T>`。我知道编写自己的包装器是微不足道的。）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-07-30T14:04:33.373

**2015 年更新**：在 .NET 4.6 中修复

> 只读接口在集合类型 HashSet、LinkedList、Queue、SortedDictionary、SortedList、SortedSet 和 Stack 上实现。[944715]

[https://dotnet2015.blob.core.windows.net/changes/dotnet46-changes.txt](https://dotnet2015.blob.core.windows.net/changes/dotnet46-changes.txt)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-19T14:52:56.267

在 4.5 中添加 IReadOnlyXxx 接口的最可能原因是因为它们需要使 .NET 集合在 WinRT 项目（商店和电话应用程序）中可用。需要将集合正确映射到 WinRT 的 IVectorView<> 和 IMapView<> 接口。这是由 CLR 中内置的语言投影自动完成的。WinRT 没有等效的 ISet<> 接口，因此根本不需要更改 HashSet<>。

* * *

更新：在 .NET 4.5.1 中解决了不对称问题，这无疑要感谢大量的客户反馈 :)，HashSet<> 现在也实现了 IReadOnlyCollection<>

# actionscript-3 - AS3 URLRequest，将字符串添加到变量并转到该新 URL？

> ID：14414332
> 
> 赞同：0
> 
> 时间：2013-01-19T12:24:15.390
> 
> 标签：actionscript-3, url, variables, urlrequest

这让我现在快疯了！

var url 的定义时间更长。

```
url = url + ".jpg";
var fileRequest:URLRequest = new URLRequest(url); 
```

由于某种原因，这不起作用......“.jpg”没有被添加。但是，如果我尝试这样做：

```
url = ".jpg" + url;
var fileRequest:URLRequest = new URLRequest(url); 
```

它有效，但我不希望 .jpg 出现在网址的开头...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T15:49:20.640

试试 url += ".jpg"; 或者 url = String(url)+".jpg";

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-16T01:44:52.800

我整天都在寻找同样的问题。在我通过的途中遇到了这个线程。找到了解决方案。 [https://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLVariables.html](https://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLVariables.html)

因此，我将分享以帮助您加快速度。

这绝对有效。

var currImage:int = 1;

var urlVariables:URLVariables = new URLVariables("文件夹=../images/&currImage=1&file=.png");

var url = urlVariables.folder + urlVariables.currImage + urlVariables.file;

```
 //changes image..
url = urlVariables.folder + 2 + urlVariables.file; 
```

或者

```
url = urlVariables.folder + currImage + urlVariables.file; 
```

您可以删除第二个 urlVariable (&currImage=1)。我刚刚展示了它是如何工作的。

从这里您可以操纵数字变量来加载其他图像。

# api - 如何使用 ffmpeg av_interleaved_write_frame() 编写由 x264_encoder_encode() 生成的 NAL

> ID：14414334
> 
> 赞同：2
> 
> 时间：2013-01-19T12:24:25.407
> 
> 标签：api, ffmpeg, decode, encode, x264

我一直在尝试按以下顺序制作“flv”视频文件：

```
av_register_all();

// Open video file
if (avformat_open_input(&pFormatCtx, "6.mp4", NULL, NULL) != 0)
    return -1; // Couldn't open file

// Retrieve stream information
if (avformat_find_stream_info(pFormatCtx, NULL) < 0)
    return -1; // Couldn't find stream information

// Dump information about file onto standard error
av_dump_format(pFormatCtx, 0, "input_file.mp4", 0);

// Find the first video stream
videoStream = -1;
for (i = 0; i < pFormatCtx->nb_streams; i++)
    if (pFormatCtx->streams[i]->codec->codec_type == AVMEDIA_TYPE_VIDEO) {
        videoStream = i;
        break;
    }
if (videoStream == -1)
    return -1; // Didn't find a video stream

// Get a pointer to the codec context for the video stream
pCodecCtx = pFormatCtx->streams[videoStream]->codec;

// Find the decoder for the video stream
pCodec = avcodec_find_decoder(pCodecCtx->codec_id);
if (pCodec == NULL) {
    fprintf(stderr, "Unsupported codec!\n");
    return -1; // Codec not found
}
// Open codec
if (avcodec_open2(pCodecCtx, pCodec, NULL) < 0)
    return -1; // Could not open codec

// Allocate video frame
pFrame = avcodec_alloc_frame();

// Allocate video frame
pFrame = avcodec_alloc_frame();

// Allocate an AVFrame structure
pFrameYUV420 = avcodec_alloc_frame();
if (pFrameYUV420 == NULL)
    return -1;

// Determine required buffer size and allocate buffer
numBytes = avpicture_get_size(pCodecCtx->pix_fmt, pCodecCtx->width, pCodecCtx->height);
buffer = (uint8_t *) av_malloc(numBytes * sizeof(uint8_t));

// Assign appropriate parts of buffer to image planes in pFrameYUV420
// Note that pFrameYUV420 is an AVFrame, but AVFrame is a superset of AVPicture
avpicture_fill((AVPicture *) pFrameRGB, buffer, pCodecCtx->pix_fmt, pCodecCtx->width, pCodecCtx->height);

// Setup scaler
img_convert_ctx = sws_getContext(pCodecCtx->width, pCodecCtx->height, pCodecCtx->pix_fmt, pCodecCtx->width, pCodecCtx->height, pCodecCtx->pix_fmt, SWS_BILINEAR, 0, 0, 0);
if (img_convert_ctx == NULL) {
    fprintf(stderr, "Cannot initialize the conversion context!\n");
    exit(1);
}

// Setup encoder/muxing now
filename = "output_file.flv";
fmt = av_guess_format("flv", filename, NULL);
if (fmt == NULL) {
    printf("Could not guess format.\n");
    return -1;
}
/* allocate the output media context */
oc = avformat_alloc_context();
if (oc == NULL) {
    printf("could not allocate context.\n");
    return -1;
}
oc->oformat = fmt;
snprintf(oc->filename, sizeof(oc->filename), "%s", filename);

video_st = NULL;
if (fmt->video_codec != AV_CODEC_ID_NONE) {
    video_st = add_stream(oc, &video_codec, fmt->video_codec);
}

// Let's see some information about our format
av_dump_format(oc, 0, filename, 1);

/* open the output file, if needed */
if (!(fmt->flags & AVFMT_NOFILE)) {
    ret = avio_open(&oc->pb, filename, AVIO_FLAG_WRITE);
    if (ret < 0) {
        fprintf(stderr, "Could not open '%s': %s\n", filename, av_err2str(ret));
        return 1;
    }
    }
/* Write the stream header, if any. */
ret = avformat_write_header(oc, NULL);
if (ret < 0) {
    fprintf(stderr, "Error occurred when opening output file: %s\n", av_err2str(ret));
    return 1;
}

// Setup x264 params
x264_param_t param;
x264_param_default_preset(&param, "veryfast", "zerolatency");
param.i_threads = 1;
param.i_width = video_st->codec->width;
param.i_height = video_st->codec->height;
param.i_fps_num = STREAM_FRAME_RATE; // 30 fps, same as video
param.i_fps_den = 1;
// Intra refres:
param.i_keyint_max = STREAM_FRAME_RATE;
param.b_intra_refresh = 1;
// Rate control:
param.rc.i_rc_method = X264_RC_CRF;
param.rc.f_rf_constant = 25;
param.rc.f_rf_constant_max = 35;
// For streaming:
param.b_repeat_headers = 1;
param.b_annexb = 1;
x264_param_apply_profile(&param, "baseline");

x264_t* encoder = x264_encoder_open(&param);
x264_picture_t pic_in, pic_out;
x264_picture_alloc(&pic_in, X264_CSP_I420, video_st->codec->width, video_st->codec->height);

x264_nal_t* nals;
int i_nals;

// The loop:
// 1\. Read frames
// 2\. Decode the frame
// 3\. Attempt to re-encode using x264
// 4\. Write the x264 encoded frame using av_interleaved_write_frame
while (av_read_frame(pFormatCtx, &packet) >= 0) {
    // Is this a packet from the video stream?
    if (packet.stream_index == videoStream) {
        // Decode video frame
        avcodec_decode_video2(pCodecCtx, pFrame, &frameFinished, &packet);

        // Did we get a video frame?
        if (frameFinished) {
            sws_scale(img_convert_ctx, pFrame->data, pFrame->linesize, 0, pCodecCtx->height, pic_in.img.plane, pic_in.img.i_stride);
            int frame_size = x264_encoder_encode(encoder, &nals, &i_nals, &pic_in, &pic_out);

            if (frame_size >= 0) {
                if (i_nals < 0)
                    printf("invalid frame size: %d\n", i_nals);
                // write out NALs
                for (i = 0; i < i_nals; i++) {
                    // initalize a packet
                    AVPacket p;
                    av_init_packet(&p);
                    p.data = nals[i].p_payload;
                    p.size = nals[i].i_payload;
                    p.stream_index = video_st->index;
                    p.flags = AV_PKT_FLAG_KEY;
                    p.pts = AV_NOPTS_VALUE;
                    p.dts = AV_NOPTS_VALUE;
                    ret = av_interleaved_write_frame(oc, &p);
                }
            }
            printf("encoded frame #%d\n", frame_count);
            frame_count++;
        }
    }

    // Free the packet that was allocated by av_read_frame
    av_free_packet(&packet);
}

// Now we free up resources used/close codecs, and finally close our program. 
```

下面是**add_stream()**函数的实现：

```
/* Add an output stream. */
static AVStream *add_stream(AVFormatContext *oc, AVCodec **codec, enum AVCodecID codec_id) {
    AVCodecContext *c;
    AVStream *st;
    int r;
    /* find the encoder */
    *codec = avcodec_find_encoder(codec_id);
    if (!(*codec)) {
        fprintf(stderr, "Could not find encoder for '%s'\n",
                avcodec_get_name(codec_id));
        exit(1);
    }
    st = avformat_new_stream(oc, *codec);
    if (!st) {
        fprintf(stderr, "Could not allocate stream\n");
        exit(1);
    }
    st->id = oc->nb_streams - 1;
    c = st->codec;
    switch ((*codec)->type) {
    case AVMEDIA_TYPE_AUDIO:
        st->id = 1;
        c->sample_fmt = AV_SAMPLE_FMT_FLTP;
        c->bit_rate = 64000;
        c->sample_rate = 44100;
        c->channels = 2;
        break;
    case AVMEDIA_TYPE_VIDEO:
        avcodec_get_context_defaults3(c, *codec);
        c->codec_id = codec_id;
        c->bit_rate = 500*1000;
        //c->rc_min_rate = 500*1000;
        //c->rc_max_rate = 500*1000;
        //c->rc_buffer_size = 500*1000;
        /* Resolution must be a multiple of two. */
        c->width = 1280;
        c->height = 720;
        /* timebase: This is the fundamental unit of time (in seconds) in terms
         * of which frame timestamps are represented. For fixed-fps content,
         * timebase should be 1/framerate and timestamp increments should be
         * identical to 1\. */
        c->time_base.den = STREAM_FRAME_RATE;
        c->time_base.num = 1;
        c->gop_size = 12; /* emit one intra frame every twelve frames at most */
        c->pix_fmt = STREAM_PIX_FMT;
        if (c->codec_id == AV_CODEC_ID_MPEG2VIDEO) {
            /* just for testing, we also add B frames */
            c->max_b_frames = 2;
        }
        if (c->codec_id == AV_CODEC_ID_MPEG1VIDEO) {
            /* Needed to avoid using macroblocks in which some coeffs overflow.
             * This does not happen with normal video, it just happens here as
             * the motion of the chroma plane does not match the luma plane. */
            c->mb_decision = 2;
        }
        break;
    default:
        break;
    }
    /* Some formats want stream headers to be separate. */
    if (oc->oformat->flags & AVFMT_GLOBALHEADER)
        c->flags |= CODEC_FLAG_GLOBAL_HEADER;
    return st;
} 
```

编码完成后，我检查输出文件**output_file.flv**。我注意到它的大小非常大：**101MB**并且无法播放。如果我使用 ffmpeg 对输入文件进行解码/编码，那么我会得到一个大小约为 83MB 的输出文件（与用作输入的原始 .mp4 文件大小大致相同）。此外，仅使用 ffmpeg C api 而不是使用 x264 进行编码步骤的 83MB 输出也可以正常播放。有谁知道我哪里出错了？我已经尝试研究了几天，但没有运气:(。我觉得我已经接近让它工作了，但是，我就是不知道我做错了什么。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T11:28:14.403

要生成正确的 AVPacket，您应该将所有 nals 写入同一个数据包，就像在[http://ffmpeg.org/doxygen/trunk/libx264_8c_source.html](http://ffmpeg.org/doxygen/trunk/libx264_8c_source.html)中所做的那样（参见`encode_nals`和`X264_frame`函数）

# c# - 将一个对象值传递给另一个对象

> ID：14414337
> 
> 赞同：1
> 
> 时间：2013-01-19T12:24:40.660
> 
> 标签：c#, object

如何将一个对象值传递给另一个需要相同值的对象例如：如果我有

```
Contact contact = new Contact();
Scheduler scheduler = new Scheduler(); 
```

调用一个方法来获取所有的联系信息，现在我有可用的contact.id

调度程序方法期望 personId 是 contact.id 没有做`scheduler.personId = contact.id`并将值传递给 LoadScheduler 什么是正确的方法？谢谢

```
private void LoadSchedule(Scheduler scheduler)
{
...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T12:32:57.793

你所做的并没有错。

```
scheduler.personId = contact.id
LoadSchedule(scheduler); 
```

否则，您的方法需要更好的论据..

```
LoadSchedule(contact.id);
...
private void LoadSchedule(int contactId)
{

} 
```

但是，您将无法`Scheduler`访问对象的所有字段。但如果这很重要..

甚至：

```
LoadSchedule(contact);
...
private Scheduler LoadSchedule(Contact contact)
{
     Scheduler scheduler = new Scheduler { personId = contact.id };
     //load...
     return scheduler;
} 
```

或者，您可以使用适当的实例方法（或扩展方法）从调度程序对象加载调度。

```
class Scheduler
{
    public void Load()
    {

    }
} 
```

因此，现在您只需`scheduler.Load()`拥有正确的实例就可以调用。所有这些都没有错，但取决于您需要逻辑所在的类/层。在不了解域的情况下，很难说哪个是最好的。*把工作交给合适的班级*。为了更好地提供帮助，请先告诉我们您为什么认为您的方法是错误的？

# java - 如何使用 eclipse 添加对 jfugue 的依赖？

> ID：14414341
> 
> 赞同：2
> 
> 时间：2013-01-19T12:25:16.653
> 
> 标签：java, eclipse, maven, jfugue

我正在开发一个需要 jfugue 的 Eclipse IDE 项目。如何使用 Maven 将此依赖项添加到我的项目中？

我尝试过了：

1.  右键项目名->Maven->添加依赖；
2.  我从 pom.xml 表单中添加了一个依赖项：

    ```
    <dependency>
     <groupId>org</groupId>
     <artifactId>jfugue</artifactId>
     <version>4.1.0</version>
     <type>java-source</type>
    </dependency> 
    ```

3.  我添加了存储库：

    ```
    <repository>
     <id>jfugue-repo</id>
     <url>http://jfugue.googlecode.com/svn/trunk/jfugue/</url>
    </repository> 
    ```

4.  它搜索带有断开链接的文件，但我看不到它，因为它在进度视图中出现的时间不超过一秒钟。

我怎样才能解决这个问题？谢谢你的帮助。

**更新 1** jfugue pom.xml 是[这个](http://jfugue.googlecode.com/svn/trunk/jfugue/pom.xml)。我的 pom.xml 是[这个](http://pastebin.com/raw.php?i=i5HaV3GG)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T13:19:38.183

似乎 pom.xml 没有远程存储库。使用以下[链接](http://maven.apache.org/guides/mini/guide-3rd-party-jars-local.html)了解如何将 jar 安装到本地存储库中。您还`<repository`从项目的 pom.xml 中删除了标签。

# python - 在 contains_eager() 中指定具有继承层次结构的实体的完整路径

> ID：14414345
> 
> 赞同：11
> 
> 时间：2013-01-19T12:25:41.850
> 
> 标签：python, sqlalchemy

我有一个像这样的查询

```
(session.query(Root).with_polymorphic('*')
    .outerjoin(Subclass.related1).options(contains_eager(Subclass.related1))) 
```

到目前为止，一切正常。

我也想急切地加载`Related1.related2`，我试过这个：

```
(session.query(Root).with_polymorphic('*')
    .outerjoin(Subclass.related1).options(contains_eager(Subclass.related1))
    .outerjoin(Related1.related2).options(contains_eager(Related1.related2))) 
```

但它不起作用：

> sqlalchemy.exc.ArgumentError：在此查询中指定的任何实体上都找不到属性“related2”。请注意，必须指定从根 (Mapper|Root|root) 到目标实体的完整路径。

鉴于它`related1`通过子类与根实体相关，我看不到如何指定完整路径。

我也试过

```
(session.query(Root).with_polymorphic('*')
    .outerjoin(Subclass.related1).options(contains_eager(Subclass.related1))
    .outerjoin(Related1.related2).options(contains_eager('related1.related2'))) 
```

可以预见的是失败了

> sqlalchemy.exc.ArgumentError：在此查询中的映射实体 Mapper|Root|root 上找不到名为“related1”的属性。

如何在 中指定间接相关实体的完整路径`contains_eager()`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-21T02:09:44.817

contains_eager 需要查询知道的实体的完整路径：

```
contains_eager(Subclass.related1, Related1.related2) 
```

# c++ - 执行同一类的“Object = object”时出现段错误

> ID：14414347
> 
> 赞同：0
> 
> 时间：2013-01-19T12:25:43.667
> 
> 标签：c++, segmentation-fault

首先，我想要做的是通过执行“object++”来调整类数组的大小，但在执行 C++ 程序时出现“Segmentation fault（core dumped）”错误。问题出在 operator++ 重载方法中。它应该将第一个数组的包含复制到临时对象中（operator= 重载已经完成并且效果很好），然后更改数组的高度和宽度，最后再次复制对象内的临时对象，即回来。当我评论“*this = *tmpPlateau;” 数组已调整大小，但包含未复制。这是代码：

```
Plateau& Plateau::operator++() {

      // New sizes
      int newHauteur = this->height + 2 ; 
      int newLargeur = this->width + 2 ; 

      // Tableau temporaire avec le contenu du plateau actuel
      Plateau* tmpPlateau = this ;      

      // Actualisation des dimensions 
      this->height = newHauteur ; 
      this->width = newLargeur ;

      this->plateau = new Etat*[height] ; 
      for (int i = 0; i < height; i++) {

        plateau[i] = new Etat[width] ;

      }

      *this = *tmpPlateau ;     

      return *this ;
} 
```

operator= 重载方法：

```
Plateau& Plateau::operator=(const Plateau& tab) {

      this->plateau = new Etat*[height] ; 
      for (int i = 0; i < height; i++) {

            this->plateau[i] = tab.plateau[i] ; 

       }

       Plateau(height, width) ;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T12:30:41.880

我认为问题是双重的。

首先，`tmpPlateau`不是一个单独的对象。它只是另一个指向`*this`：

```
 Plateau* tmpPlateau = this ; 
```

因此，以下调用`operator=()`with`*this`作为其参数：

```
 *this = *tmpPlateau ; 
```

我怀疑崩溃是因为您`operator=()`没有正确处理自我分配。

然而，真正的问题是`tmpPlateau`需要保存对象的*副本*而不是*指向*它的指针。

`std::vector`最后，如果您使用而不是数组，您会发现实现您的类要容易得多。这将使它更容易成长`plateau`。

# android - Android内核，WiFi扫描系统调用

> ID：14414348
> 
> 赞同：0
> 
> 时间：2013-01-19T12:25:45.057
> 
> 标签：android, linux-kernel

我正在研究 android 内核（果冻豆）。

我专注于`/net/mac80211/scan.c`模块和扫描行为，以了解它的`PS_mode`工作原理。无论如何，我找不到任何系统调用在更高级别调用内核的`ieee80211_scan_work`函数（调用函数的位置）。`ieee80211_start_scan()`

我想知道这个函数是否甚至被 API 调用，有没有人知道它，如果知道，它`syscall`是上升的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T22:10:28.140

在这里查看我的回复以获得对 mac80211 的总体概述： [如何学习 Linux 无线驱动程序（mac80211）的结构？](https://stackoverflow.com/questions/7157181/how-to-learn-the-structure-of-wireless-drivers-mac80211)

来自用户空间的接口不是基于系统调用，而是使用 netlink API。通过发送 NL80211_CMD_TRIGGER_SCAN 命令完成扫描。在您收到扫描已完成的 NL80211_CMD_NEW_SCAN_RESULTS 事件后，您发出 NL80211_CMD_GET_SCAN 以获取扫描结果。要查看此示例，请查看 wpa_supplicant 代码。

您看不到任何人调用 ieee80211_scan_work，因为它是一个工作队列处理程序。如果您不熟悉工作队列，您可以选择一本内核书籍来解释它们。这项工作在 ieee80211_alloc_hw() 中被初始化为 local->scan_work 的处理程序。

“让它运行”的代码在 ieee80211_start_sw_scan() 中，它实际上对 scan_work 进行排队。请注意，scan_work 仅用于 SW 扫描，这意味着 mac80211 管理扫描（即它保持一个定时器来切换通道并调用较低的 HW 驱动程序将 HW 设置为特定通道）。这仅取决于您的硬件功能。对于某些硬件，扫描完全由硬件驱动程序甚至固件完成。如果您的硬件驱动程序实现了硬件扫描，它将实现 hw_scan mac80211 回调。

# javascript - 将文本框的值获取到另一个 html 文件

> ID：14414349
> 
> 赞同：0
> 
> 时间：2013-01-19T12:25:52.670
> 
> 标签：javascript, html

我在 index.html 中有一个文本框，我想获取它的值并将其放入另一个 html 文件中的文本框，即 result.html。（他们使用相同的 .js 文件）

index.html 文本框：

```
<input id="txt2" readonly="true" type="number" value="0" name="score" style="border:none;background-color:#f0f2f7"> 
```

result.html 文本框：

```
<input id="txt3" readonly="true" type="number" value="0" name="score" style="border:none;background-color:#f0f2f7"></td> 
```

这是它将自动转到其他页面的代码：

```
if((mins == 0) && (secs == 0)) {
    //window.alert("Time is up.Your score is "+score); // change timeout message as required
    document.getElementById('txt2').value = score;
    window.location = "score.html" // redirects to specified page once timer ends and ok button is pressed
} 
else {
    cd = setTimeout("redo()",1000);
} 
```

txt3 将如何获得 txt2 的值，因为它们在不同的 html 中？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:47:36.430

更改结果页面 URL 如下；

```
window.location = "result.html?val="+document.getElementById('txt2').value; 
```

**结果.html**

```
<input id="txt3" readonly="true" type="number" value="0" name="score" style="border:none;background-color:#f0f2f7"></td>  

<script>
document.getElementById('txt3').value=window.location.search.replace("?val=","");
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T12:38:26.313

像这样使用查询字符串

```
http://mysite.com/index.html?name=john 
```

并使用 javascript 在不同的 html 页面上获取此名称

```
function loadPageVar (sVar) {  
  return unescape(window.location.search.replace(new RegExp("^(?:.*[&\\?]" + escape(sVar).replace(/[\.\+\*]/g, "\\$&") + "(?:\\=([^&]*))?)?.*$", "i"), "$1"));  
}  

// Would alert the value of QueryString-variable called name  
alert(loadPageVar("name")); 
```

# php - POST 和 cookie 的问题

> ID：14414351
> 
> 赞同：0
> 
> 时间：2013-01-19T12:26:12.067
> 
> 标签：php, asp-classic, session-cookies

我有一个带有 cURL 的 PHP 脚本，它向 ASP 文件发出 POST 请求（不是我的，所以我无法更改它）。

我设置了一个`ASPSESSIONID`从 Echo（Mac 的 HTTP POST 应用程序）收到的 Cookie (使用 Echo（使用相同的 Cookie）它可以工作，并接收新数据。当我现在用我的脚本提出相同的请求时，它也可以工作！如果没有 Echo，我怎么能做到这一点？

我的代码：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, "Bgnm=3Ve&rst=$rst");  
curl_setopt($ch, CURLOPT_HTTPHEADER,array('Cookie: ASPSESSIONIDAACQRCDD=LAODBMKAPLDAJNILIKFGFPFP'));
$output = curl_exec($ch);
$info = curl_getinfo($ch);
curl_close($ch); 
```

正常的 HTML 表单（完全工作）：

```
<form method="post" target="rechts"> 
<p align="center"> 
<br>Kies een basisgroep:<br>
<select name="Bgnm">
<option>1a</option><option>1b</option>
</select>
<br>
<br>Kies een roostersoort:<br>
<select name="rst">
<option selected="">Basisrooster</option>
<option>Rooster deze week</option>
<option>Rooster volgende week</option> 
</select>
<br><br>en druk op deze knop:
<br>
<input type="submit" value="toon lessen en lijst">
</p>
</form> 
```

我在 Echo 中的设置： [Echo 设置（图片）](http://img268.imageshack.us/img268/4479/fotovz.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T23:14:08.723

我的错！我向错误的 URL 提出了请求。无论如何感谢您的帮助！

# iphone - FMDB：错误 14，无法打开数据库文件

> ID：14414353
> 
> 赞同：3
> 
> 时间：2013-01-19T12:26:17.257
> 
> 标签：iphone, insert-update, fmdb

目前我正在为我的 iPhone 应用程序使用 FMDB 包装器。我的问题是，在执行 2000 条 SQL 插入语句（从 5000 到 8000 条 sql 语句中）后，出现以下错误：

> “错误 14，无法打开数据库文件”

谁能帮我解决这个错误？

这是我的代码：

```
 -(BOOL)insertOrUpdateinTable:(NSString *)tableName:(NSMutableArray *)columnName:       (NSMutableArray *)columnValue {

[self initiateFMDB];
NSString *queryString=@"";
BOOL success;
//queryString =[[NSString alloc]init];

if (![db open]) {
    NSLog(@"could not open db");
}
else {
        //insert into Category(Categorycode,CategoryDesc) values (1,2)
        queryString=[queryString stringByAppendingFormat:@"insert into     %@(",tableName];
        for (int cntCName=0; cntCName<[columnName count]; cntCName++) {
            if (cntCName<[columnName count]-1){
                queryString=[queryString     stringByAppendingFormat:@"%@,",[columnName objectAtIndex:cntCName]];
            }
            else    {
                queryString=[queryString     stringByAppendingFormat:@"%@",[columnName objectAtIndex:cntCName]];
            }
        }

        queryString=[queryString stringByAppendingString:@") values ("];
        for (int cntCValue=0; cntCValue<[columnValue count]; cntCValue++) {
            if (cntCValue<[columnValue count]-1){
                queryString=[queryString     stringByAppendingFormat:@"'%@',",[columnValue objectAtIndex:cntCValue]];
            }
            else {
                queryString=[queryString    stringByAppendingFormat:@"'%@'",[columnValue objectAtIndex:cntCValue]];
            }
        }

       queryString=[queryString stringByAppendingString:@")"];
//  NSLog(@"QueryString=%@",queryString);
    @try {
    success=[db executeUpdate:[NSString stringWithFormat:@"%@",queryString]];
}
@catch (NSException *exception) {
    NSLog(@"Exception error for selectFromItemPhoto is %@",[exception reason]);
}
}

    if (success==TRUE) {
            NSLog(@"Data inserted successfully");
        }
    else {
        NSLog(@"Data is not inserted successfully");
    }

   //  queryString=nil;
   // [queryString release];
if ([db open]) {
    [db close];
}
return success;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:37:28.417

我刚刚重新格式化了您的代码并删除了某些内容。尝试打印查询字符串，看看是否有任何问题。

尝试以下操作：

```
-(BOOL)insertOrUpdateinTable:(NSString *)tableName withColumns:(NSMutableArray *)columnName withValues:(NSMutableArray *)columnValue 
{

[self initiateFMDB];
NSString *queryString=@"";
BOOL success;

if (![db open]) {
    NSLog(@"could not open db");
    return NO; //no need to proceed if DB could be opened.
}

//insert into Category(Categorycode,CategoryDesc) values (1,2)
queryString=[queryString stringByAppendingFormat:@"insert into %@(",tableName];

for (int cntCName=0; cntCName<[columnName count]; cntCName++) 
{
        if (cntCName<[columnName count]-1)
           queryString=[queryString stringByAppendingFormat:@"%@,",[columnName objectAtIndex:cntCName]];
        else   
           queryString=[queryString stringByAppendingFormat:@"%@",[columnName objectAtIndex:cntCName]];

}//first for loop ends here

queryString=[queryString stringByAppendingString:@") values ("];

for (int cntCValue=0; cntCValue<[columnValue count]; cntCValue++) 
{
        if (cntCValue<[columnValue count]-1) 
            queryString=[queryString stringByAppendingFormat:@"'%@',",[columnValue objectAtIndex:cntCValue]];
        else
            queryString=[queryString stringByAppendingFormat:@"'%@'",[columnValue objectAtIndex:cntCValue]];
}//second for loop ends here

queryString=[queryString stringByAppendingString:@")"];

NSLog(@"QueryString=%@",queryString);

@try {
    success=[db executeUpdate:[NSString stringWithFormat:@"%@",queryString]];
}
@catch (NSException *exception) {
    NSLog(@"Exception error for selectFromItemPhoto is %@",[exception reason]);
}

if (success==YES)
        NSLog(@"Data inserted successfully");
else
    NSLog(@"Data is not inserted successfully");

[db close];

return success;
} 
```

# plpgsql - 关于将 T-SQL 存储过程和 UDF 转换为 Postgres PL/pgSQL 的最新白皮书

> ID：14414358
> 
> 赞同：1
> 
> 时间：2013-01-19T12:27:17.923
> 
> 标签：plpgsql, database-migration

我将不胜感激有关将 T-SQL 存储过程和用户​​定义函数迁移到 Postgres 的当前旗舰版本的白皮书的链接。理想的情况是通过突出显示两个数据库完成任务或以不同方式提供需求解决方案并且没有直接对应物（内置系统@@functions 和触发器的粒度是我想到的两个领域，但我想可能还有其他领域，比如 Date Math 或字符串处理库）。

# c++ - 无法将参数 1 从“PrintVisitor *const”转换为“Visirot &”

> ID：14414365
> 
> 赞同：0
> 
> 时间：2013-01-19T12:28:02.620
> 
> 标签：c++, design-patterns, composite, typeconverter, visitor-pattern

我使用了两种设计模式 Composite 和 Visitor。我对 Composite 没有任何问题。但是当他开始为输入和输出编写派生类时，出现了一些错误，我从未找到过解决方案。尽管在现实中，如果一切都是*InputVisitor*完成的，那么只剩下*PrintVisitor*和*main()*。

这是我的代码：

**UPD：**我重写了部分代码。现在我没有错误，但它只打开终端，什么也没做......

PS也许我没有正确实施模式。有人有更好的主意吗？

```
#include <iostream>
#include <fstream>
#include <string>
#include <vector>

using namespace std;

class BaseComponent {
public:
    virtual void add(BaseComponent *)=0;
    virtual void accept(class Visitor &)=0;
};

class Card :public BaseComponent {
public:
    Card (string bookName, vector<string> authors, int year): _bookName(bookName), _authors(authors), _year(year) {}

    string getBookName() const {
        return _bookName;
    }
    vector<string> getAuthors() const {
        return _authors;
    }
    int getYear() const {
        return _year;
    }

    void setBookName(string bookName) {
        _bookName = bookName;
    }
    void setAuthors(vector<string> authors) {
        copy(authors.begin(), authors.end(), _authors.begin());
    }
    void setYear(int year) {
        _year = year;
    }

    void add(BaseComponent *){}
    void accept(class Visitor &);
private:
    string _bookName;
    vector<string> _authors;
    int _year;
};

class Folder :public BaseComponent {
public:
    Folder(): _folderName(""), _parentFolder("") {}
    Folder(string parentFolder): _folderName(""), _parentFolder(parentFolder) {}

    string getFolderName() const {
        return _folderName;
    }
    string getParentName() const {
        return _parentFolder;
    }
    vector<BaseComponent*> getSubFolders() const {
        return _subFolders;
    }

    void setFolderName(string folderName) {
        _folderName = folderName;
    }
    void setParentFolder(string parentFolder) {
        _parentFolder = parentFolder;
    }

    void add(BaseComponent *component) {
        _subFolders.push_back(component); 
    }
    void accept(class Visitor &);
private:
    string _folderName;
    string _parentFolder;
    vector<BaseComponent*> _subFolders;
};

class Visitor {
public:
    virtual void visitCard(Card *)=0;
    virtual void visitFolder(Folder *)=0;
};

void Card::accept(class Visitor &visitor) {
    visitor.visitCard(this);
}

void Folder::accept(class Visitor &visitor) {
    visitor.visitFolder(this);
}

class InputVisitor :public Visitor {
public:
    InputVisitor(string file): _file(file){}

    void setFile(string file) {
        _file = file;
    } 

    void visitCard(Card *){}
    void visitFolder(Folder *folder){
        ifstream input(_file);

        string folderName;
        getline(input, folderName);
        folder->setFolderName(folderName);

        string fileName;
        while (!input.eof()) {
            input >> fileName;
            if (fileName == "----") {
                break;
            } else {
                Folder *subFolder = new Folder(folderName);
                InputVisitor *inputVisitor = new InputVisitor(fileName);
                subFolder->accept(*inputVisitor);
                folder->add(subFolder);
            }
        }
        while (!input.eof()) {
            string name, tempAuthor;
            vector<string> authors;
            int n, year;

            input >> name;
            input >> n;
            for (int i = 0; i<n; ++i) {
                input >> tempAuthor;
                authors.push_back(tempAuthor);
            }
            input >> year;
            Card *subBook = new Card(name, authors, year);
            folder->add(subBook);
        }
        input.close();
    }
private:
    string _file;
};

class PrintVisitor :public Visitor {
public:
    PrintVisitor(string outputFile): _outputFile(outputFile) {}

    void setOutputFile(string outputFile) {
        _outputFile = outputFile;
    }

    void visitFolder(Folder *folder) {
        ofstream output(_outputFile);
        output << folder->getFolderName() << endl << "\t";

        vector<BaseComponent*> subFolders = folder->getSubFolders();
        vector<BaseComponent*>::iterator it;
        for (it=subFolders.begin(); it!=subFolders.end(); ++it) {
            (*it)->accept(*this);
        }

        output.close();
    }
    void visitCard(Card *card) {
        ofstream output(_outputFile);
        output << "Book: " << card->getBookName() << endl
            << "Author(s): ";
        vector<string> authors = card->getAuthors();
        for (vector<string>::iterator it=authors.begin(); it!=authors.end(); ++it) {
            output << *it << " ";
        }
        output << endl << "Year: " << card->getYear();

        output.close();
    }
private:
    string _outputFile;
};

int main() {
    Folder root;
    root.accept(*(new InputVisitor("root.txt")));
    root.accept(*(new PrintVisitor("output.txt")));
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T12:45:55.427

## 第一个问题。

假设错字`Visirot`是固定的，那么在第 152 行你有

```
subFolders[i]->accept(this); //Here some probrem 
```

它将一个指向 T 的指针传递给期望 T 的地方。

只需取消引用该指针：

```
subFolders[i]->accept(*this); 
```

## 第二个问题。

在主程序中应用相同的修复是*错误*的：

```
int main() {
    BaseComponent *root;
    InputVisitor *input;
    input->setFile("root.txt");
    root->accept(*input);  //Here
    PrintVisitor *output;
    output->setOutputFile("output.txt");
    root->accept(output); //And here
    return 0;
} 
```

这会取消引用未初始化的指针，从而产生**Undefined Behavior**。

不要那样做。

将其重写为例如

```
int main() {
    Folder root;
    InputVisitor input;
    input.setFile("root.txt");
    root.accept(input);  //Here
    PrintVisitor output;
    output.setOutputFile("output.txt");
    root.accept(output); //And here
} 
```

（并且可能用`Folder`你想要的任何具体类替换。）

## 第三个问题。

在第 144 行，您将分配给一个流：

```
_outputFile = ofstream(outputFile); 
```

where`_outputFile`是 type 的成员`ofstream`，并且`outputFile`是 a `string`。

这使用了 g++ 在 4.7.1 版中未实现的 C++11 功能（流的右值分配）。

大概的想法是关闭`_outputFile`并重新打开它：只需这样做，代码将更具可移植性：

```
// Add failure checking:
_outputFile.close();
_outputFile.open( outputFile ); 
```

此外，更具描述性的命名会更好……

## 给定代码中的一般问题集。

编译上面的代码会产生一些关于有符号/无符号比较和未使用的局部变量的警告。解决这一切。`-Wall`使用 g++ 和Visual C++以最高实际警告级别构建`/W4`，并使其编译干净。

## 逻辑错误和测试。

即使它编译干净，也可能并且通常会保留逻辑错误。要根除这些问题，请设计一组*完全可重复*的测试，并附上任何必要的测试数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:35:46.720

在这段代码中：

```
InputVisitor *input;
input->setFile("root.txt");
root->accept(input);  //Here 
```

InputVisitor 是一个*输入。您的接受函数引用访问者。将其更改为：

```
root->accept(*input);  //Here 
```

除了我在评论中提到的错字之外，一切都会好起来的。

如果你删除了`class`类名前面的所有，编译器会告诉你什么时候有拼写错误的类名。否则，它只会将其视为“将来某个时候会有一个名为的类`Visirot`，而我现在并不关心其中有什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T12:36:07.980

这是 的声明`BaseComponent::accept`：

```
virtual void accept(class Visirot &)=0; 
```

这是电话：

```
root->accept(input);  //Here 
```

这是 的声明`input`：

```
InputVisitor *input; 
```

所以，首先，声明`BaseComponent::accept`显然有一个错字；`Visirot`应该是`Visitor`。

其次，`accept`需要 a `Visitor&`，但它是用 a 调用的`InputVisitor*`。`InputVisitor`派生自`Visitor, so`InputVisitor* `is convertible to`Visitor* `and`InputVisitor& `is convertible to`Visitor& `, but there is no conversion from a pointer-to-type into a reference-to-type. So either change`BaseComponent::accept` 以获取指针或更改调用以传递引用。

# php - 我无法启动使用 Symfony 创建的站点

> ID：14414368
> 
> 赞同：0
> 
> 时间：2013-01-19T12:28:34.007
> 
> 标签：php, symfony1

我使用 Symfony 创建了一个站点，其中包含[该站点](http://symfony.com/legacy/doc/tutorial/1_2/en/my-first-project)的说明。

我做的最后一个命令是：

```
$ php symfony help propel:generate-module 
```

我按照说明在 MySQL 中创建了数据库。在数据库中，我有两个表发布和评论。

我有文件夹：

```
d:\xampp\htdocs\sf_sandbox\apps\frontend\modules\post 
d:\xampp\htdocs\sf_sandbox\apps\frontend\modules\comment 
```

但是当我尝试使用推荐运行此站点时：

```
localhost:8081/sf_sandbox/web/frontend_dev.php/post 
```

或者

```
localhost:8081/sf_sandbox/web/frontend_dev.php/comment 
```

Mozilla 正在加载该站点，但没有任何反应，显示任何错误，仅标志重新加载当前页面旋转。

如何运行我的第一个站点？

# asp.net - 如何创建子域

> ID：14414370
> 
> 赞同：1
> 
> 时间：2013-01-19T12:29:46.733
> 
> 标签：asp.net, subdomain

我将在我的网站上创建一些子域。当我创建一个子域时，我必须定义一个子域将引用新创建的子域的目录。但我想要一个不同的解决方案。

我想检测用户何时输入 URL，使用了哪个子域，然后对每个特殊的子域进行一些操作。例如，如果网站用户输入 a.mysite.com，我会从 URL 中提取“a”子域，然后在不重定向网页的情况下在页面中加载一些数据。

请帮助我如何在网络服务器和本地主机上执行这些操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T19:58:21.140

通常，您的应用程序不关心主机名，因此您必须配置 IIS 以处理所有请求。

*   **仅限生产：**为您的域创建通配符 DNS 记录（例如***.domain.tld**）
*   您的 IIS 站点应该没有显式绑定，以便所有传入请求都命中此应用程序（其他站点应该仍然可以正常工作！）。

在此之后，您可以检查`HttpContext.Current.Request.Url`并提取请求的子域。

# magento - 购买产品时如何保存附加属性？

> ID：14414371
> 
> 赞同：0
> 
> 时间：2013-01-19T12:29:57.263
> 
> 标签：magento

我在 Magento 中拥有由制造商大量定制的产品（即颜色），但这些属性不会改变产品价格。例如，您可以选择白色或蓝色产品，但价格相同。我有 4-5 个类似的产品属性，客户通过 javascript 选择，并在产品视图页面上获得预览。

知道如何将这些属性传递给（到结帐过程中的以下步骤），以便我可以 a）在购物车中显示它们（在产品名称下） b）在订单和管理模块中获取它们（我需要的地方再次重新生成预览，这次是针对商家）。

我已经有一个自定义模块，所以如果我必须覆盖一些 Magento 代码和/或模板，那很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T15:26:17.923

你可以：

1.  创建一个自定义模块，以编程方式将这些选项添加到`additional_options`您的商品添加到购物车时。请参阅[向报价项目添加选项](https://stackoverflow.com/a/9496266/1191288)

2.  为每个产品或可配置产品创建自定义选项。请参阅[在 Magento 中添加自定义产品选项](http://www.youtube.com/watch?v=wfZCXjWqrSM)

# c# - 精确匹配或类似单词的正则表达式

> ID：14414373
> 
> 赞同：1
> 
> 时间：2013-01-19T12:30:13.147
> 
> 标签：c#, regex

我需要在文本行中找到相似或准确的单词。例如：

我有以下模式： `(Abarth|Alfa\s+Romeo|Aston\s+Martin|Audi|Austin)`

并且输入字符串是：`Alfa Rom`或`Alfa Romeo Contata` 结果应该是：`Alfa Romeo`尽可能。

我有 100 多个品牌，我想在“自动完成”中使用它们。

如何使用正则表达式模式进行此类搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:53:32.557

问号使正则表达式中的前面的标记成为可选的。例如：`colou?r`同时匹配`colour`和`color`。

您可以通过使用圆括号将它们组合在一起并将问号放在右括号之后来使多个标记成为可选。例如：`Nov(ember)?`将匹配`Nov`和`November`。

通过包含多个问号，您可以编写一个匹配许多备选方案的正则表达式。`Feb(ruary)? 23(rd)?`匹配`February 23rd`,和. `February 23`_`Feb 23rd``Feb 23`

来源：[http ://www.regular-expressions.info/optional.html](http://www.regular-expressions.info/optional.html)

# android - Android_ListView_新活动

> ID：14414378
> 
> 赞同：0
> 
> 时间：2013-01-19T12:30:43.477
> 
> 标签：android, android-listview

我可以在线性布局中定义文本视图和列表视图吗？

如果是，那么我正在尝试定义一个列表视图并希望每个列表项都打开一个新活动。但我的活动没有运行，它显示**“不幸的是，您的应用程序被迫关闭”**。请帮忙！

这是代码：

```
public class Second_listview extends ListActivity
{

static final String[] type = new String[]{

    "Array", "Strings" 

 };

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    setContentView(R.layout.second_listview);

    // setting up list view

    setListAdapter (new ArrayAdapter<String>(this, R.layout.second_listview, type));
    ListView list = getListView();
    list.setTextFilterEnabled(true);
    list.setOnItemClickListener(new OnItemClickListener(){

        @Override
        public void onItemClick(AdapterView<?> arg0, View view, int arg2,
                long arg3) {
            // TODO Auto-generated method stub

            //liking each list item to start a new activity

            switch(arg2)

            {
              case 1 : Intent myIntent1 = new Intent(view.getContext(), Array_list.class);
                       startActivityForResult(myIntent1, 0);
                       break;
              case 2 : Intent myIntent2 = new Intent(view.getContext(), String_list.class);
                       startActivityForResult(myIntent2, 0);
                       break;

            }

        }

    });
}

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T16:03:03.390

只需执行以下操作...

FirstActivity(MainActivity.java)

```
package com.example.getlistitemvalueinnewactivity;

import android.os.Bundle;

import android.app.Activity;

import android.content.Intent;

import android.view.Menu;

import android.view.View;

import android.widget.AdapterView;

import android.widget.AdapterView.OnItemClickListener;

import android.widget.ArrayAdapter;

import android.widget.ListView;

import android.widget.TextView;

import android.widget.Toast;

public class MainActivity extends Activity implements OnItemClickListener {

String[] str={"Hello","Android","Apple","Rakesh","BlackBerry"};

@Override

public void onCreate(Bundle savedInstanceState)

{

super.onCreate(savedInstanceState);

 setContentView(R.layout.activity_main);

  ListView lv=(ListView)findViewById(R.id.listView1);

  ArrayAdapter arr =new     ArrayAdapter(this,android.R.layout.simple_expandable_list_item_1,str);                                                                              

lv.setAdapter(arr);

lv.setOnItemClickListener(this);

}

public void onItemClick(AdapterView arg0, View arg1, int arg2, long arg3) {

// TODO Auto-generated method stub

String s= (String) ((TextView) arg1).getText();

//Toast.makeText(this, s, 100).show();

Intent intent = new Intent();

intent.setClass(this, Next.class);

Bundle bundle = new Bundle();

bundle.putString("Value", s);

intent.putExtras(bundle);

startActivity(intent);

} 
```

}

SecondActivity(Next.java)

```
package com.example.getlistitemvalueinnewactivity;

import android.os.Bundle;
import android.widget.TextView;
import android.app.Activity;

public class Next extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.nextpage);
 TextView tv1=(TextView)findViewById(R.id.textView1);
 Bundle bundle = this.getIntent().getExtras();
 String textName_value = bundle.getString("Value"); 
 tv1.setText(textName_value);
  }
} 
```

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:background="#000000">

<ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true" >
   </ListView>

 </RelativeLayout> 
```

下一页.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="200dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="192dp"
        android:text="TextView" />

</RelativeLayout> 
```

AndroidManifest.xml

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.example.getlistitemvalueinnewactivity"
  android:versionCode="1"
  android:versionName="1.0" >

  <uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
        <activity android:name=".Next"></activity>
      </application>

          </manifest> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T13:02:02.947

如下所述，将您的列表视图的 ID 设置为“@android:id/list”。

```
 <ListView
            android:id="@android:id/list"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" /> 
```

这可能是一个问题。如果可能的话，也让我们知道您的布局文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T13:34:13.570

改变

```
setListAdapter (new ArrayAdapter<String>(this,R.layout.main, type)); 
```

进入

```
setListAdapter (new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, type)); 
```

请参阅下面的完整代码

```
public class Second_listview extends ListActivity
{

static final String[] type = new String[]{

"Array", "Strings" 

 };

@Override
protected void onCreate(Bundle savedInstanceState) {
// TODO Auto-generated method stub
super.onCreate(savedInstanceState);

setContentView(R.layout.second_listview);

// setting up list view

setListAdapter (new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, type));
ListView list = getListView();
list.setTextFilterEnabled(true);
list.setOnItemClickListener(new OnItemClickListener(){

    @Override
    public void onItemClick(AdapterView<?> arg0, View view, int arg2,
            long arg3) {
        // TODO Auto-generated method stub

        //liking each list item to start a new activity

        switch(arg2)

        {
          case 1 : Intent myIntent1 = new Intent(view.getContext(), Array_list.class);
                   startActivityForResult(myIntent1, 0);
                   break;
          case 2 : Intent myIntent2 = new Intent(view.getContext(), String_list.class);
                   startActivityForResult(myIntent2, 0);
                   break;

        }

    }

});
}
} 
```

# php - PHP检查对象或类中是否存在属性

> ID：14414379
> 
> 赞同：200
> 
> 时间：2013-01-19T12:30:49.447
> 
> 标签：php, class, variables, object, parameters

我了解 PHP 没有纯对象变量，但我想检查属性是否在给定的对象或类中。

```
$ob = (object) array('a' => 1, 'b' => 12); 
```

或者

```
$ob = new stdClass;
$ob->a = 1;
$ob->b = 2; 
```

在**JS 中，**我可以这样写来检查`a`对象中是否存在变量：

```
if ('a' in ob) 
```

在**PHP 中，**可以做这样的事情吗？

* * *

## 回答 #1

> 赞同：339
> 
> 时间：2013-01-19T12:32:10.450

# [property_exists( 混合 $class , string $property )](http://php.net/manual/en/function.property-exists)

```
if (property_exists($ob, 'a')) 
```

* * *

# [isset( 混合 $var [, 混合 $... ] )](http://php.net/manual/en/function.isset.php)

**注意**：请注意，**如果属性为 null，isset() 将返回 false**

```
if (isset($ob->a)) 
```

* * *

示例 1：

```
$ob->a = null
var_dump(isset($ob->a)); // false 
```

示例 2：

```
class Foo
{
   public $bar = null;
}

$foo = new Foo();

var_dump(property_exists($foo, 'bar')); // true
var_dump(isset($foo->bar)); // false 
```

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2015-03-10T11:08:36.070

要检查属性是否存在以及它是否也为空，您可以使用函数`property_exists()`.

文档： http: [//php.net/manual/en/function.property-exists.php](http://php.net/manual/en/function.property-exists.php)

与 isset() 不同，property_exists() 会返回 TRUE，即使该属性的值为 NULL。

> bool property_exists ( 混合 $class , string $property )

例子：

```
if (property_exists($testObject, $property)) {
    //do something
} 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-06-08T18:12:04.507

*isset*或*property_exists*都不适合我。

*   *如果属性存在但为 NULL，则*isset返回 false。**
**   *如果属性是对象的类定义的一部分，则property_exists*返回 true，即使它已被取消设置。*

 *我最终选择了：

```
 $exists = array_key_exists($property, get_object_vars($obj)); 
```

例子：

```
 class Foo {
        public $bar;

        function __construct() {
            $property = 'bar';

            isset($this->$property); // FALSE
            property_exists($this, $property); // TRUE
            array_key_exists($property, get_object_vars($this)); // TRUE

            unset($this->$property);

            isset($this->$property); // FALSE
            property_exists($this, $property); // TRUE
            array_key_exists($property, get_object_vars($this)); // FALSE

            $this->$property = 'baz';

            isset($this->$property); // TRUE
            property_exists($this, $property); // TRUE
            array_key_exists($property, get_object_vars($this));  // TRUE
        }
    } 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2019-03-20T05:25:10.773

**解决方案**

`echo $person->middleName ?? 'Person does not have a middle name';`

在 if 语句中显示它的外观，以便更清楚地了解它是如何工作的。

```
if($person->middleName ?? false) {
    echo $person->middleName;
} else {
    echo 'Person does not have a middle name';
} 
```

**解释**

检查某物是否存在的传统 PHP 方法是：

```
if(isset($person->middleName)) {
    echo $person->middleName;
} else {
    echo 'Person does not have a middle name';
} 
```

或者对于更具体的课程方式：

```
if(property_exists($person, 'middleName')) {
    echo $person->middleName;
} else {
    echo 'Person does not have a middle name';
} 
```

这些在长格式语句中都很好，但在三元语句中它们变得不必要的麻烦，如下所示：

`isset($person->middleName) ? echo $person->middleName : echo 'Person does not have a middle name';`

您也可以只使用三元运算符来实现这一点，如下所示：

`echo $person->middleName ?: 'Person does not have a middle name';`

但是......如果该值不存在（未设置），它将引发`E_NOTICE`并且不是最佳实践。如果值为`null`，则不会引发异常。

因此，三元运算符的救援使这成为一个简洁的小答案：

`echo $person->middleName ?? 'Person does not have a middle name';`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-07-17T19:17:55.737

如果您想知道某个属性是否存在于您定义的类的*实例*中，只需`property_exists()`与`isset()`.

```
public function hasProperty($property)
{
    return property_exists($this, $property) && isset($this->$property);
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-19T12:35:29.410

要检查是否存在某些内容，您可以使用 PHP 函数 isset()[参见 php.net](http://php.net/manual/en/function.isset.php)。此函数将检查变量是否已设置且不为 NULL。

例子：

```
if(isset($obj->a))
{ 
  //do something
} 
```

如果您需要检查一个属性是否存在于一个类中，那么您可以使用内置函数[property_exists()](http://php.net/manual/en/function.property-exists.php)

例子：

```
if (property_exists('class', $property)) {
    //do something
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-03-31T21:42:19.387

通常我使用一种自定义助手

```
 /**
     * @param Object $object
     * @param string $property as a string with nested properties 'prop1.nesterdProp.deepvalue'
     * @param mixed $default
     * @return mixed
     */
    function getPropertyOrDefault(Object $object, string $property, $default = null)
    {
        $value = $object;
        $path = explode('.', $property);
        foreach ($path as $prop) {
            if (is_object($value) && property_exists($value, $prop)) {
                $value = $value->{$prop};
            } else {
                return $default;
            }
        }
        return $value;
    } 
```

请记住，如果属性为空，您将获得空值且没有默认值。

顺便说一句，类似的助手也适用于 JS。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-12-15T08:43:39.250

在对象上使用 array_key_exists() 在 php 7.4 中已弃用

相反，应该使用 isset() 或 property_exists()

参考：[php.net](https://www.php.net/manual/en/migration74.deprecated.php)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-31T07:05:33.090

把我的 2 美分放在这里。

给定以下课程：

```
class Foo
{
  private $data;

  public function __construct(array $data)
  {
    $this->data = $data;
  }

  public function __get($name)
  {
    return $data[$name];
  }

  public function __isset($name)
  {
    return array_key_exists($name, $this->data);
  }
} 
```

将发生以下情况：

```
$foo = new Foo(['key' => 'value', 'bar' => null]);

var_dump(property_exists($foo, 'key'));  // false
var_dump(isset($foo->key));  // true
var_dump(property_exists($foo, 'bar'));  // false
var_dump(isset($foo->bar));  // true, although $data['bar'] == null 
```

希望这会帮助任何人*

# html - 如何在网页上渲染用 3ds Max 制作的 3D 模型？

> ID：14414380
> 
> 赞同：1
> 
> 时间：2013-01-19T12:30:56.733
> 
> 标签：html, 3d, 3dsmax, 3d-rendering

我有来自客户的 .obj、.3ds 和 .ase 文件，该客户使用 3ds Max 创建了这个 3D 模型。我需要在网页上显示这个 3D 模型。我也可以使用 HTML5。

有或没有 HTML5 如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T12:45:15.630

您可以尝试使用 Unity 网络播放器之类的东西，您必须创建一些框架来支持您想要的内容，但这应该不会太难，然后您可以在任何带有统一网络播放器插件的浏览器上运行它。

还有其他可能有用的播放器，但不一定是所有网络版本。Inventor 可以很好地处理 3ds max 文件，并且可能有其他播放器，但我不确定是否有网络版本，可能值得研究。

有一些项目可以肯定地提供帮助，例如 Three.js，这肯定是一个开始的地方。

# django - 我在我的 Mac Snow Leopard 10.6.8 中使用 BitNami Django Stack。我很难找到在其中创建新应用程序的方法。

> ID：14414384
> 
> 赞同：1
> 
> 时间：2013-01-19T12:31:44.203
> 
> 标签：django, bitnami

我在我的 Mac Snow Leopard 10.6.8 中使用 BitNami Django Stack。我无法找到在其中创建新应用程序的方法作为我选择的应用程序名称*prag*的名称，该名称已在内部使用。请帮忙 。

# ios - 添加笔画后，文本变得不可见

> ID：14414387
> 
> 赞同：1
> 
> 时间：2013-01-19T12:32:12.987
> 
> 标签：ios, quartz-graphics, core-text

我有下一个问题（下面的示例代码）：
我正在使用`CATextLayer`并`NSAttributedString`显示风格化文本。在我为属性添加笔画之前，一切正常。当我添加笔画时 - 文本变得不可见并且在显示中我只能看到笔画。拜托，我不明白会发生什么，为什么我不能同时使用文本和笔画？谢谢。

```
UIFont* font = [UIFont fontWithName: size:];
UIColor* strokeColor = [UIColor colorWithRed: green: blue: alpha:1.f];
UIColor* foregroundColor = [UIColor colorWithRed: green: blue: alpha:1.f];
CTFontDescriptorRef fontDescriptor = CTFontDescriptorCreateWithNameAndSize(...);
CTFontRef ctFont = CTFontCreateWithFontDescriptor(...);

NSDictionary* attributes = [NSDictionary dictionaryWithObjectsAndKeys:
                            strokeWidth, kCTStrokeWidthAttributeName,
                            [strokeColor CGColor], kCTStrokeColorAttributeName,
                            ctFont, kCTFontAttributeName,
                            [foregroundColor CGColor], kCTForegroundColorAttributeName,
                            nil];

NSAttributedString* attributedText = 
[[NSAttributedString alloc] initWithString:text attributes:attributes];

CATextLayer* infoTextLayer = [[[CATextLayer alloc] init] autorelease];
infoTextLayer.string = attributedText;
...
infoTextLayer.frame = frame;
[self.layer addSublayer:infoTextLayer]; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-31T11:32:36.430

您的 strokeWidth 对于文本和笔画必须为负，而仅对笔画必须为正。来自苹果文档：

> *kCTStrokeWidthAttributeName*。此属性解释为字体点大小的百分比，控制文本绘制模式：正值仅影响描边绘制；负值用于描边和填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:48:51.237

使用 kCGTextFillStroke - 同时填充和描边

# javascript - Express 中更好的中间件链接

> ID：14414389
> 
> 赞同：1
> 
> 时间：2013-01-19T12:32:52.677
> 
> 标签：javascript, node.js, express

这是我的 Express 配置代码：

```
var server = express()
    .use(express.cookieParser())
    .use(express.session({secret: buffer.toString('hex')}))
    .use(express.bodyParser())
    .use(express.static('./../'));

server.use(server.router); 
```

`.use`最后一个不像其他的那样被锁住，这很烦人。

如何完整链接我的 Express 中间件定义？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T14:49:34.727

express [use 实现](https://github.com/visionmedia/express/blob/master/lib/application.js#L134)`this`每次都返回，因此总是可链接的。可链接性问题来自您对 的不必要使用，当您通过、等`server.use(server.router)`添加第一个非中间件路由时，express 会自动为您完成。这可以[在此处的 express 源代码中看到](https://github.com/visionmedia/express/blob/master/lib/application.js#L407)，尽管这是一个共同点混乱和问题（其中大部分来自于做而不是让路由器默认去它去的地方，这几乎总是它的正确位置。所以这里是论坛：`server.get``server.post``server.user(server.router)`

1.  正确排序`server.use`调用以设置您的中间件
2.  您的特定路由`server.get('/home')`以及其他 HTTP 方法功能
3.  任何错误处理、404 中间件等

Express 会在 1 之后、2 之前添加路由器，一切都会好起来的。

在您声明的评论中，如果您省略该`server.router`行，您将无法访问`req.session`. 对不起，但事实并非如此。`req.session`这是一个完整的工作快速应用程序，它在会话中间件未定义之前显示一个中间件，在会话中间件存在之后立即显示另一个中间件。

```
 var express = require('express');
    var server = express();
    server.use(function (q,r,n) {console.log('Before cookie:', q.session);n();});
    server.use(express.cookieParser());
    server.use(function (q,r,n) {console.log('after cookie:', q.session);n();});
    server.use(express.session({secret: 'SEKRET'}));
    server.use(function (q,r,n) {console.log('after session:', q.session);n();});
    server.get('/', function (q,r,n) {r.send("you got slashed");});
    server.listen(3000); 
```

运行它，你会在控制台上看到它。

```
Before cookie: undefined
after cookie: undefined
after session: { cookie: 
   { path: '/',
     _expires: null,
     originalMaxAge: null,
     httpOnly: true } } 
```

但是，如果您问为什么不能在`server`定义变量的同一语句中将变量用作函数参数，那正是 JavaScript 的工作原理，与 express 的关系为零。你不能这样做：

```
var foo = console.log(foo.bar); 
```

因为`foo`在整个语句完成之前是未定义的。

FWIW 我认为像这样的可链接代码是可疑的。它对调试器和断点不友好，不支持作为一流的语言功能，并且与每行未缩进和相比并没有真正为您节省任何字符`app.use(app.router)`，但就这样吧。

# php - 使用 Doctrine 在 Symfony2 中测试控制器

> ID：14414393
> 
> 赞同：9
> 
> 时间：2013-01-19T12:33:14.193
> 
> 标签：php, symfony, phpunit, symfony-2.1

我在 Symony2 中创建了一个非常简单的 REST 控制器，控制器操作中有数据库插入/更新/删除。

有没有一种很好的方法来为这些控制器操作编写单元/集成测试而不污染生产数据库？我是否必须与不同的环境一起工作 - 或者框架供应商是否有为此提出的方法？

电流控制器示例：

```
public function postAction()
{
    $json = $this->getRequest()->getContent();
    $params = json_decode($json);
    $name = $params->name;
    $description = $params->description;

    $sandbox = new Sandbox();
    $sandbox->setName($name);
    $sandbox->setDescription($description);
    $em = $this->getDoctrine()->getManager();
    $em->persist($sandbox);
    $em->flush();

    $response = new Response('/sandbox/'.$sandbox->getId());
    $response->setStatusCode(201);
    return $response;
} 
```

当前测试示例：

```
class SandboxControllerTest extends WebTestCase
{

    public function testRest()
    {
        $client = static::createClient();

        $crawler = $client->request('POST', '/service/sandbox', array(), array(), array(), json_encode(array('name' => 'TestMe', 'description' => 'TestDesc')));

        $this->assertEquals(
                201, $client->getResponse()->getStatusCode()
        );
    }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-19T12:56:33.357

在我看来，您绝对应该避免在测试中更改数据库。

我最喜欢的实现方式是在测试客户端中注入实体管理器模拟。例如：

```
public function testRest()
{
    // create entity manager mock
    $entityManagerMock = $this->getMockBuilder('Doctrine\ORM\EntityManager')
        ->setMethods(array('persist', 'flush'))
        ->disableOriginalConstructor()
        ->getMock();

    // now you can get some assertions if you want, eg.:
    $entityManagerMock->expects($this->once())
        ->method('flush');

    // next you need inject your mocked em into client's service container
    $client = static::createClient();
    $client->getContainer()->set('doctrine.orm.default_entity_manager', $entityManagerMock);

    // then you just do testing as usual
    $crawler = $client->request('POST', '/service/sandbox', array(), array(), array(), json_encode(array('name' => 'TestMe', 'description' => 'TestDesc')));

    $this->assertEquals(
            201, $client->getResponse()->getStatusCode()
    );
} 
```

您应该注意此解决方案的一件事是您需要在每个请求之前注入您的模拟服务。这是因为客户端在每个请求之间重新启动内核（这意味着容器也在重建）。

**编辑：**

我在控制器测试中的 GET 方法是，我可以模拟实体存储库等，以便对从 db 获取的每个数据进行存根，但这需要大量工作并且不是很舒服，所以在这种情况下我更喜欢（我的意思是只有当我们说话时关于控制器的测试）实际上从数据库中获取真实数据。我所说的真实数据是指用教条固定装置创建的数据。只要我们不更改数据库，我们就可以依赖灯具。

但是，如果我们谈论更改数据库中的数据（POST/PUT/DELETE 方法），我总是使用模拟。如果您将使用 em mock 并对“perist”和“flush”方法设置适当的期望，则可以确保在没有任何数据库修改的情况下实际正确创建/更新/删除数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T12:58:54.217

这是我所做的

在您的测试类中添加 $kernel 静态变量并创建一个在测试模式下加载内核的函数

```
protected static $kernel;
protected static $container;

public static function setUpBeforeClass()
{
    self::$kernel = new \AppKernel('test', true);
    self::$kernel->boot();

    self::$container = self::$kernel->getContainer();
} 
```

并作为测试函数的第一行，调用`self:setUpBeforeClass()`

这使得 symfony 加载 config_test.yml 配置文件，你可以在那里定义不同的数据库连接

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-27T14:39:36.137

一个很好的方法是使用单独的 SQLite 数据库和 DoctrineFixturesBundle，特别是如果您需要在数据库中有一些测试数据。

*   [这是安装 FixturesBundle 的方法](http://symfony.com/doc/current/bundles/DoctrineFixturesBundle/index.html)
*   [一种设置夹具和测试的干净方法](http://vincent.composieux.fr/article/test-your-doctrine-repository-using-a-sqlite-database)

    [确保您在 php 中激活了 SQLite 扩展](https://stackoverflow.com/questions/948899/how-to-enable-sqlite3-for-php)

# php - isset 奇怪的行为和处理函数返回的数据

> ID：14414399
> 
> 赞同：1
> 
> 时间：2013-01-19T12:33:45.160
> 
> 标签：php, isset

任何人都可以向我解释为什么下面的代码行打印出来是真的吗？

```
$a = "string";

if(isset($a['error'])) echo true; else echo false; 
```

当我进行函数调用时，如果它工作正常，我会返回预期的数据，或者 return `array("error" => $error)`;

然后在接收到返回的数据时，我检查 isset($var['error']) 是否存在，如果不是，那么我知道我收到了一些预期的数据。

如果您能建议我这是在函数调用之间处理数据的好方法还是坏方法，我也将不胜感激？如果对此有更好的“良好做法”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T12:41:57.930

好吧，这是一些 PHP 的错误行为，幸运的是，这些错误已在最近的某个版本中得到修复。

您可以使用用于寻址数组元素的相同方括号来寻址字符串中的单个字符。

`'error'`评估为 0，然后你得到了`$a[0]`哪个设置。

要解决这个问题，您必须先检查 $a 是否是数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:41:56.657

我相信这是一个错误，它已在 PHP 5.4+ 中修复：[http ://codepad.viper-7.com/fz1rnT](http://codepad.viper-7.com/fz1rnT)

看起来与, where和are 字符串`isset($str[$key])`的方式相同`isset($str[intval($key)])``$str``$key`

处理错误的最佳方法是例外：

*   [http://php.net/manual/en/language.exceptions.php](http://php.net/manual/en/language.exceptions.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T12:42:40.847

我不是 100% 确定为什么会出现这样的行为，但我知道 PHP 允许您以与数组类似的方式处理字符串。

```
$a = "StackOverflow";

echo $a[2]; // a
echo $a[4]; // k
echo $a[6]; // v
echo $a[8]; // r 
```

现在，当您将字符串键作为数组的索引传递时，PHP 将尝试将该字符串解析为数值以用作键。

```
echo $a['stack']; // S
echo $a['over']; // S
echo $a['flow']; // S

echo $a['0stack']; // S
echo $a['1over']; // t
echo $a['2flow']; // a
echo $a['3flow']; // c
echo $a['4flow']; // k 
```

# joomla2.5 - 如何在 chronoform 中使用龙门对象？

> ID：14414400
> 
> 赞同：0
> 
> 时间：2013-01-19T12:33:47.657
> 
> 标签：joomla2.5

我想在 head 中添加 css 和 js 文件。但我的模板使用龙门。所以我需要使用龙门对象来添加css和js。但是在我的自定义表单代码中无法访问此对象。我认为我的 requireonce 函数不能包含该文件。

```
require_once('../../../../templates/rt_graffito/lib/gantry/gantry.php');
$gantry->init();
$gantry->addStyle('media/moo_rainbow/css/mooRainbow.css', 5);
$gantry->addScript('media/moo_rainbow/js/mooRainbow.js'); 
```

这是我在计时表中使用的代码。但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:51:18.597

我敢打赌，您可以使用核心 Joomla`document`对象，然后 gantry 会捡起它，请尝试以下操作：

```
<?php
 // ... some code here
 $document = &JFactory::getDocument();
 $document->addScript('media/moo_rainbow/js/mooRainbow.js');
 $document->addStyleSheet( 'media/moo_rainbow/css/mooRainbow.css');
 // ... other code 
```

和文档参考

[http://docs.joomla.org/JDocument/addStyleSheet](http://docs.joomla.org/JDocument/addStyleSheet)
[http://docs.joomla.org/Adding_JavaScript](http://docs.joomla.org/Adding_JavaScript)

# objective-c - 找一个合适的词汇库来搭建一个C结构

> ID：14414403
> 
> 赞同：1
> 
> 时间：2013-01-19T12:33:59.460
> 
> 标签：objective-c, c, dictionary, neural-network, vocabulary

让我们从问题的最终目的开始：我的目标是建立一个基于单词的神经网络，它应该接受一个基本句子并为每个单词选择它应该在句子本身中产生的含义。然后它会学习一些关于语言的东西（例如两个给定单词之间可能的相关性，在一个句子中找到两者的概率是多少等等）并在最后阶段（学习阶段之后）尝试构建根据一些输入，一些非常简单的句子。

为了做到这一点，我需要某种表示给定语言词汇表的数据库，我可以从中提取一些信息，例如单词列表、定义、同义词等。数据库的结构应该使我可以构建包含所需信息的 C 数据结构，例如

```
typedef struct _dictEntry DictionaryEntry;
typedef struct _dict Dictionary;

struct _dictEntry {
    const char *word;               // Word string
    const char **definitions;       // Array of definition strings
    DictionaryEntry **synonyms;     // Array of pointers to synonym words
    Dictionary *dictionary;         // Pointer to parent dictionary
};

struct _dict {
    const char *language;           // Language identification string
    int count;                      // Number of elements in the dictionary
    float **correlations;           // Correlation matrix between i-th and j-th entries
    DictionaryEntry *entries;       // Array of dictionary entries
}; 
```

或等效的 Obj-C 对象。

我知道（从[搜索 Mac OSX 系统词典？](https://stackoverflow.com/questions/1696387/searching-the-mac-osx-system-dictionaries)）苹果提供的词典是经过许可的，所以我不能使用它们来创建我的数据结构。基本上我想要做的是以下内容：给定一个任意词，AI 想要获取所有定义包含 A 的字典条目并只选择这样的定义。然后，我将实施某种交叉程序，以根据句子的其余部分选择最合适的定义和同义词，并建立一个相关矩阵。

让我举个小例子：假设我输入了一个包含“play”的句子；我想获取所有条目（例如“游戏”、“乐器”、“演员”等）“游戏”这个词可以关联到并为每个条目选择相应的定义（我不想要例如提取与“工具”含义相对应的“乐器”定义，因为您不能“玩工具”）。然后，我将在句子的其余部分中选择最合适的定义：如果它还包含“演员”一词，那么我将为“戏剧”赋予“戏剧”的含义或其他合适的定义。最基本的方法是扫描字典中的每个定义，搜索“play”这个词 所以我需要不受限制地访问所有定义，据我所知，这不能使用位于 /Library/Dictionaries 下的字典来完成。遗憾的是，这项工作必须离线完成。

是否有任何可用资源可供我下载，让我掌握所有定义并获取我的信息？目前我对任何特定的文件格式（可能是数据库或 xml 或其他任何文件）都不感兴趣，但它必须是我可以分解并放入数据结构的东西。我试图用谷歌搜索它，但是，无论我使用什么关键字，如果我包含“词汇”或“字典”这个词，我（很明显）只会在一些在线词典网站上获得关于其他词定义的页面！我想这不是最好的搜索...

我希望问题很清楚......如果不是，我会尝试以不同的方式解释它！无论如何，提前感谢大家提供任何有用的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T15:49:30.233

可能是一个免费的本体，比如[http://www.eat.rl.ac.uk](http://www.eat.rl.ac.uk)会帮助你。在大学部门有几个可用的。

# networking - 子弹不会为其他玩家碰撞

> ID：14414405
> 
> 赞同：0
> 
> 时间：2013-01-19T12:34:24.597
> 
> 标签：networking, unity3d, instantiation, collision, photon

我一直在研究火焰喷射器作为我的武器之一。它是一款平台多人在线游戏。它也与光子一起工作。我遇到了火焰问题（以及其他步枪子弹）。

火焰喷射器发射的火焰正在使用 PhotonNetwork.Instantiate 进行实例化。它们确实会与实例化它们的玩家发生碰撞，而其他玩家能够看到实例化它们和它们的运动。但是由于某种原因，实例化它们的玩家会看到他们与谁相撞并看到他们相撞，但被射击的另一个玩家不会看到火焰与自己或墙壁相撞。火焰拥有它们的碰撞和运动脚本以及一个 photonView 组件。

我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:13:10.517

问题已解决 - 必须在子弹上放置一个刚体。:)

# java - 正则表达式在 java 1.5 中不起作用

> ID：14414407
> 
> 赞同：1
> 
> 时间：2013-01-19T12:34:32.550
> 
> 标签：java, regex, jdk1.5

```
public static final String PATTERN = "(?<=(^|,))(([^\",]+)|\"([^\"]*)\")(?=($|,))";
public static void main(String[] args) {
    String line = ",1234,ABC";
    Matcher matcher = Pattern.compile(PATTERN).matcher(line);
    while (matcher.find()) {
        if (matcher.group(3) != null) {
            System.out.println(matcher.group(3));
        } else {
            System.out.println(matcher.group(4));
        }
    }
} 
```

我使用上面的程序来解析字符串`",1234,ABC"`。解析后我应该得到 3 个令牌，如下所示：

1.  空字符串即“”
2.  1234
3.  美国广播公司

它似乎适用于 Java 1.6，但不适用于 Java 1.5。

自 Java 1.4 以来，正则表达式就在 java 中，那么为什么我会遇到这样的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T15:06:26.923

这是 Java 类库（Sun 的实现，由 Oracle 接管）中的一个错误，至少在 JRE 1.5 Update 18 和 JRE 1.6 Update 32 之前（我测试过的 2 个版本）。

`(?<=pattern)`经过一些测试，正面后视和负面后视`(?<!pattern)`^(1,2)的实现存在一些错误。*也许*这与引擎在后视非捕获组内由交替分隔的不同宽度^(3时引擎如何回溯有关。)`|`

在后视中交换项目的顺序有时有效⁴，但附录 2 显示它可能并非一直有效。

***目前，从后视中提取交替***似乎是一种可能的解决方案。例如：具有交替`(?<=pat1|pat2|pat3)`的后视转换为`(?:(?<=pat1)|(?<=pat2)|(?<=pat3))`. 重复直到没有`|`内部的后视。对于我在下面使用的测试用例，它似乎产生了正确的结果。

所以对于有问题的正则表达式，这是解决方法（假设原来的是正确的）：

```
"(?:^|(?<=,))(?:([^\",]+)|\"([^\"]*)\")(?:$|(?=,))" 
```

以防万一前瞻出现问题，我还将其替换为非捕获组，因为您的用例的结果保持不变。（测试尚未显示存在错误，但以防万一。）虽然我不完全确定，但我想我们可以相信引擎至少在`(?<=,)`和`(?=,)`. 我也冒昧地减少捕获组的数量，所以请重新计算。

**附录**

1.  使用输入字符串`",abc,1234"`和正则表达式`"(?<=^|[,.])"`和`"(?<!^|[,.])"`. JRE 1.5u18 和 JRE 1.6u32 的结果不同。对于**正向**后视`"(?<=^|[,.])"`，与 JRE 1.6u32 的输出相比，JRE 1.5u18 的输出中缺少位置 1 的匹配。相反，对于 JRE 1.5u18，位置 1 出现在**负**后视的结果中`"(?<!^|[,.])"`，而 JRE 1.6u32 的输出不包含它。

    看到这种互补行为并不奇怪，因为正面和负面的后视是完全相反的。

2.  另一个使用输入字符串`",abc,."`和正则表达式的测试`"(?<=,abc|[,.])"`。与 JRE 1.6u32 相比，位置 1 的匹配不会出现在 JRE 1.5u18 的结果列表中。

    如果我们交换交替：`"(?<=[,.]|,abc)"`，与 JRE 1.6u32 相比，JRE 1.5u18 的结果中缺少位置 4 的匹配。

3.  可能不限于不同的宽度，但这是我测试过的情况。

4.  `",1234,ABC,\"sdfsdf,sdf\",sdfskhkf,"`我可以通过交换`^`和交替使问题中的正则表达式在此输入上起作用`,`，即更改`(?<=(^|,))`为`(?<=(,|^))`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T12:43:08.063

```
String line = ",1234,ABC";
String[]arr= line.split(",");
System.out.println("arr.length = " + arr.length);
for(String s : arr)
{
   System.out.println("s = \"" + s+"\"");
} 
```

输出是：

```
arr.length = 3
s = ""
s = "1234"
s = "ABC" 
```

# sql - 我们可以在多个数据库上定义过程或选择语句吗？

> ID：14414415
> 
> 赞同：0
> 
> 时间：2013-01-19T12:35:40.730
> 
> 标签：sql, sql-server-2008-r2

我需要一个数据库的一些数据和另一个数据库的一些数据并执行一些操作。我们可以在 sql server 2008 中执行此操作吗？在我的项目中假设我想在CRM数据库中获取医生和化学家数据库的数据并想生成操作，我们该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:38:49.963

如果两个数据库都属于同一个 sql server 实例，则可以使用对象的完整限定名，例如`[DbName].[scheme].[table]`if 在不同实例上，则必须创建链接服务器。当然，按预期提供访问权限。

# cognos-tm1 - Cognos TM1 中以什么格式存储数据以及如何从数据库中提取数据？

> ID：14414416
> 
> 赞同：1
> 
> 时间：2013-01-19T12:35:41.913
> 
> 标签：cognos-tm1

Cognos TM1 中的数据是如何存储（格式）的，以何种格式提取？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T10:17:04.123

我检查这个标签已经有一段时间了，因为几个月来没有任何活动。这个问题也可能“失效”了，但以防万一：

数据以二进制文件的形式存储在磁盘上。您不能直接从这些访问它。在操作上，它存储在服务器的内存中。至于问题的第二部分，如果您要提取原始数据转储，则导出通常是文本形式，ASCII 或 Unicode。（两者都支持。）

更典型的是，它将通过前端客户端应用程序拉出，最常见的是：

*   Perspectives，它是 Microsoft Excel 的插件，允许将数据网格（“切片”）嵌入 Excel 工作表中，可以作为硬编码提取（“快照”）或通过直接从/向服务器。（也就是说，切片工作表可以保存为普通的 Excel 工作簿，稍后加载，如果用户连接到服务器，只需重新计算工作表即可使用当前的实时数字进行更新。）

*   Architect，看起来与 Perspectives 相同，但缺少 Excel 集成。

*   Cognos BI。（Cognos 购买了 TM1 引擎并将其用作其报告工具的后端。）

*   TM1 Web，它允许数据显示在浏览器中（您可以从中复制/粘贴）或导出到 Excel 工作表或 Acrobat .pdf。

*   使用 TM1 API 以 VB6、C、Java 或其中一种 .Net 语言创建的定制应用程序。（虽然 .Net API 在功能方面出了名的薄弱。）在这种情况下，这些值只是作为数字馈送提供给客户端，应用程序对它们的处理取决于它。

还有一些其他前端，例如Executive Viewer，尽管这不是特定的TM1 前端。

# python - Python 中的链接工作池

> ID：14414419
> 
> 赞同：4
> 
> 时间：2013-01-19T12:35:55.847
> 
> 标签：python, queue, multiprocessing, threadpool

我正在尝试设置一个如下所示的链接工作池系统​​：

```
 ╭────────╮                  ╭─────────╮                  ╭─────────╮
 │        ├──> Worker 1 ───> │         ├──> Worker 3 ───> │         │
 │  Data  ├──> Worker 1 ───> │  Queue  ├──> Worker 3 ───> │  Queue  ├───> Output
 │        ├──> Worker 1 ───> │         ├──> Worker 3 ───> │         │
 ╰────────╯                  ╰─────────╯                  ╰─────────╯ 
 ╭────────╮                     ^ ^ ^
 │        ├──> Worker 2 ────────┘ │ │
 │  Data  ├──> Worker 2 ──────────┘ │
 │        ├──> Worker 2 ────────────┘
 ╰────────╯ 
```

在推出我自己的通用解决方案之前，是否有任何现有的库（或干净`multiprocessing`/`threading`示例）可以使用？我不知道该怎么称呼这种设置，所以我的谷歌搜索没有给我很多有用的结果。

任何提示表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T13:07:00.763

我之前看过[Beanstalkd](http://kr.github.com/beanstalkd/)，它非常擅长处理多处理器作为生产者和/或消费者的工作队列，从而不必担心线程。

[beanstalkc](https://github.com/earl/beanstalkc/)有一个 Python 客户端

示例取自他们的 wiki。

```
>>> import beanstalkc
>>> beanstalk = beanstalkc.Connection(host='localhost', port=14711)
>>> beanstalk.put('hey!')
1
>>> job = beanstalk.reserve()
>>> job.body
'hey!'
>>> job.delete() 
```

这可能适合您的需求 - IIRC 您也可以拥有持久队列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T12:42:10.110

ZeroMQ 是一个轻量级的解决方案，并具有 Python 绑定。 [http://www.zeromq.org/bindings:python](http://www.zeromq.org/bindings:python)

# jsf - RichFaces 文件上传不重新渲染

> ID：14414420
> 
> 赞同：1
> 
> 时间：2013-01-19T12:36:02.663
> 
> 标签：jsf, richfaces, jsf-1.2

我正在尝试在上传文件（照片）后重新渲染几个组件，但由于某种原因，上传完成后，组件不会被重新渲染。有人可以帮忙吗？我在 Tomcat 6 中运行应用程序的 64 位 Windows 7 机器上使用 Java 1.6 JSF 1.2 Richfaces 3.3.3 Seam 2.2GA；

```
<h:panelGrid columns="2" id="photoGrid"
    rendered="#{not signUpAction.fileUpRendered}"     styleClass="standard">
    <h:graphicImage value="#{signUpAction.imageUrl}" width="150" height="171" />
    <a4j:region>
        <a4j:commandLink id="remove" action="#{signUpAction.removePhoto}"
            reRender="a4jphotoUpload" value="Remove Photo" />
    </a4j:region>                               
</h:panelGrid>
<h:panelGroup id="photoGroup" rendered="#{signUpAction.fileUpRendered}">
    <rich:fileUpload maxFilesQuantity="1"
        fileUploadListener="#{signUpAction.listener}"
        addControlLabel="Add a photo..." allowFlash="true"
        id="photoUploadWidget" autoclear="true"
        listHeight="1" immediateUpload="true" acceptedTypes="jpg,jpeg,png,gif">
        <f:facet name="label">
            <h:outputText value="{_KB}KB from {KB}KB uploaded --- {mm}:{ss}" />
        </f:facet>
        <a4j:support event="onuploadcomplete" reRender="photoGrid,photoGroup"/>
    </rich:fileUpload>
</h:panelGroup> 
```

我终于想出了一个解决方案，我调用了一个 a4j:jsFunction 来重新渲染组件并从 onuploadcomplete 事件中调用它（参见下面的代码）

```
<h:panelGroup id="photoGroup" rendered="#{signUpAction.fileUpRendered}">
    <rich:fileUpload maxFilesQuantity="1" fileUploadListener="#{signUpAction.listener}"
    addControlLabel="Add a photo..."
    id="photoUploadWidget" autoclear="true" onuploadcomplete="reloadPhotoPanel()" onfileuploadcomplete="reloadPhotoPanel()"
    listHeight="1" immediateUpload="true" acceptedTypes="jpg,jpeg,png,gif">
    </rich:fileUpload>
</h:panelGroup>     
</a4j:outputPanel>  

<a4j:jsFunction id="reloadPhotoPanel" name="reloadPhotoPanel" reRender="photoPanel,photoGrid,photoGroup" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T13:54:02.637

问题是您试图重新渲染第一次加载页面时未渲染的组件，这将是`photoGrid`组件。

为了使其工作，您应该将 non-rendererd 组件包装在一个`UIContainer`(like `<a4j:outputPanel>`) 中，该组件将始终被渲染并重新渲染更大的容器。

```
<!--
     now you will rerender the a4j:outputPanel 
     and the inner h:panelGrid will appear/dissapear
-->
<a4j:outputPanel id="photoGrid">
    <h:panelGrid columns="2"
        rendered="#{not signUpAction.fileUpRendered}"     styleClass="standard">
        <h:graphicImage value="#{signUpAction.imageUrl}" width="150" height="171" />
        <a4j:region>
            <a4j:commandLink id="remove" action="#{signUpAction.removePhoto}"
                reRender="a4jphotoUpload" value="Remove Photo" />
        </a4j:region>                               
    </h:panelGrid>
</a4j:outputPanel>
<!--
     following the same logic in the h:panelGroup that renders
     the rich:fileUpload component
-->
<a4j:outputPanel id="photoGroup">
    <h:panelGroup rendered="#{signUpAction.fileUpRendered}">
        <rich:fileUpload maxFilesQuantity="1"
            fileUploadListener="#{signUpAction.listener}"
            addControlLabel="Add a photo..." allowFlash="true"
            id="photoUploadWidget" autoclear="true"
            listHeight="1" immediateUpload="true" acceptedTypes="jpg,jpeg,png,gif">
            <f:facet name="label">
                <h:outputText value="{_KB}KB from {KB}KB uploaded --- {mm}:{ss}" />
            </f:facet>
            <a4j:support event="onuploadcomplete" reRender="photoGrid,photoGroup"/>
        </rich:fileUpload>
    </h:panelGroup>
</a4j:outputPanel> 
```

# java - 做Web服务将数据重定向到java中请求的源

> ID：14414423
> 
> 赞同：1
> 
> 时间：2013-01-19T12:36:15.223
> 
> 标签：java, web-services

我创建了一个 Web 服务，它接收数据并将其存储在数据库中。为了向用户确认存储，我已将存储的数据作为响应显示在与（Web 服务正在处理的）JSON 输出相同的页面中。

现在我有一个疑问，是否可以将响应重定向到请求页面。

为了您更好的理解，

*   > 用户从 html 文件 (upload.html) 上传数据。

*   > 现在 Web 服务会将数据存储在数据库 (upload.java) 中，并在同一页面中将输出显示为 JSON（当前正在使用这种方式）

*   > 我可以将响应 JSON 输出带回 html (upload.html) 并显示 JSON 输出吗

这种方式可行吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T13:25:07.527

您正在将用户的数据发布/发送到服务器，然后再次将响应重定向到用户。**为什么？**

当用户提交您已经拥有的数据时。因此，只需对其进行格式化并向用户显示适当的消息。重定向后显示消息不会增加任何价值，除非您想显示一些来自服务器的消息。

**编辑**

[网络服务教程](http://javapapers.com/web-service/soap-web-service-introduction/)

检查以上链接中的服务代码；它返回字符串。同样，您需要修改您的服务以返回适当的对象。

```
public String hello(@WebParam(name = "name") String txt) {
    return "Hello " + txt + " !";
} 
```

# flash - 使用 Adob e Cirrus 通过本地网络连接 Flash Player

> ID：14414424
> 
> 赞同：0
> 
> 时间：2013-01-19T12:36:25.390
> 
> 标签：flash, apache-flex, rtmfp, adobe-cirrus

我正在使用 Adob​​e Cirrus 在 Flash 播放器通信器中编写语音聊天。我无法处理通过本地网络连接两个 Flash 播放器的问题。我有带有已编译 SWF 文件 (192.168.1.2:8080/evm_server/bin) 的 tomcat 服务器。当我在本地计算机 (192.168.1.2) 上打开此 SWF 文件时，一切正常。我可以登录并调用在网络中其他计算机上登录的客户端，但是当我尝试在另一台计算机上登录并调用 192.168.1.2 时没有任何反应（没有警报显示，但它应该）。这是通信组件的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx"
           xmlns:components="pl.rafalo235.evm_client.components.*"
           show="initGroup(event)"
           creationComplete="initApp(event)">

<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
    <mx:HTTPService id="friendsService"
            method="POST"
            url="{EVMServerConnection.SERVER_ADDRESS}/friends"
            result="friendsService_resultHandler(event)"
            fault="friendsService_faultHandler(event)">
        <mx:request>
            <login>{userAccount.login}</login>
            <password>{password}</password>
        </mx:request>
    </mx:HTTPService>

    <mx:HTTPService id="setPeerIdService"
            method="POST"
            url="{EVMServerConnection.SERVER_ADDRESS}/peerId"
            result="peerIdService_resultHandler(event)"
            fault="peerIdService_faultHandler(event)">
        <mx:request>
            <login>{userAccount.login}</login>
            <password>{password}</password>
            <peerId>{myPeerId}</peerId>
            <a>1</a>
        </mx:request>
    </mx:HTTPService>

    <mx:HTTPService id="clearPeerIdService"
            method="POST"
            url="{EVMServerConnection.SERVER_ADDRESS}/peerId"
            result="peerIdService_resultHandler(event)"
            fault="peerIdService_faultHandler(event)">
        <mx:request>
            <login>{userAccount.login}</login>
            <password>{password}</password>
            <a>0</a>
        </mx:request>
    </mx:HTTPService>
</fx:Declarations>

<fx:Script>
    <![CDATA[
    import flash.events.Event;
    import flash.media.Microphone;
    import flash.net.NetConnection;
    import flash.net.NetStream;
    import mx.collections.ArrayCollection;
    import mx.collections.ArrayList;
    import mx.rpc.events.ResultEvent;
    import mx.rpc.events.FaultEvent;
    import pl.rafalo235.evm_client.data.Account;
    import mx.events.FlexEvent;
    import pl.rafalo235.evm_client.data.Friend;
    import pl.rafalo235.evm_client.events.CallButtonClickEvent;
    import flash.events.NetStatusEvent;
    import mx.controls.Alert;
    import pl.rafalo235.evm_client.net.CirrusServerConnection;
    import pl.rafalo235.evm_client.net.EVMServerConnection;
    import pl.rafalo235.evm_client.events.CirrusServerConnectionEvent;

    [Bindable]
    public var applicationRoot:Main;

    [Bindable]
    public var userAccount:Account;

    [Bindable]
    public var friendsList:ArrayCollection = new ArrayCollection();

    [Bindable]
    private var password:String;

    public function initApp(event:FlexEvent):void {
        friendsListUI.addEventListener(CallButtonClickEvent.CALL_BUTTON_CLICK, onCallButtonClick);
    }

    public function initGroup(event:FlexEvent):void {
        initNetConnection();
        friendsService.send();
    }

    public function destructGroup():void {
        clearPeerIdService.send();
        userAccount = null;
        friendsList.removeAll();
        password = null;
    }

    public function setPassword(password:String):void {
        this.password = password;
    }

    public function friendsService_resultHandler(event:ResultEvent):void {
        if (event.result.friends != null) {
            if (event.result.friends.friend is ArrayCollection) {
                var eventData:ArrayCollection = ArrayCollection(event.result.friends.friend);
                var tmpFriend:Friend = null;

                for each (var eventDataItem:Object in eventData) {
                    tmpFriend = new Friend(eventDataItem);
                    friendsList.addItem(tmpFriend);
                    tmpFriend = null;
                }
            } else {
                friendsList.addItem(new Friend(event.result.friends.friend));
            }
        }
    }

    public function friendsService_faultHandler(event:FaultEvent):void {

    }

    public function switchAuthenticationView(event:MouseEvent):void {
        destructGroup();
        applicationRoot.currentState = "default";
    }

    public function onCallButtonClick(event:Event):void {
        var e:CallButtonClickEvent = CallButtonClickEvent(event);
        connectToPeer(e.friend.peerId);
    }

    // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~private

    [Bindable]
    private var cirrusServerConnection:CirrusServerConnection;

    private const SERVER_ADDRESS:String = "rtmfp://p2p.rtmfp.net/";
    private const DEVELOPER_KEY:String = "f3161a7e23cab7eeae9ea32d-fe63c3b19868";

    private var netConnection:NetConnection;

    [Bindable]
    private var myPeerId:String;
    private var farPeerID:String;

    private var sendStream:NetStream;
    private var recvStream:NetStream;

    private var mic:Microphone;

    private function initNetConnection():void {
        //cirrusServerConnection = new CirrusServerConnection();
        //cirrusServerConnection.addEventListener(CirrusServerConnectionEvent.CONNECTED, openSendStream);
        //cirrusServerConnection.connect();
        netConnection = new NetConnection();
        netConnection.addEventListener(NetStatusEvent.NET_STATUS, netStatusHandler);
        netConnection.connect(SERVER_ADDRESS + DEVELOPER_KEY);

        if (Microphone.isSupported) {
            mic = Microphone.getMicrophone();
            mic.rate = 11;
            mic.setUseEchoSuppression(true);
            mic.gain = 50;
            mic.setSilenceLevel(20);
        }
    }

    private function netStatusHandler(event:NetStatusEvent):void {
        trace("CirrusConnection: " + event.info.code);
        Alert.show("CirrusConnection: " + event.info.code);
        switch(event.info.code) {
            case "NetConnection.Connect.Success":
                myPeerId = netConnection.nearID;
                openSendStream();
                break;
            case "NetStream.Play.Start":
                break;
        }
    }

    private function sendStreamStatusHandler(event:NetStatusEvent):void {
        trace("SendStream: " + event.info.code);
        Alert.show("SendStream: " + event.info.code);
        switch(event.info.code) {
            case "NetStream.Publish.Start":
                setPeerIdService.send();
                break;
            case "NetStream.Play.Start":
                if (Microphone.isSupported) {
                    sendStream.attachAudio(mic);
                } else {
                    Alert.show("Microphone not supported");
                }
                break;
        }
    }

    private function recvStreamStatusHandler(event:NetStatusEvent):void {
        trace("RecvStream: " + event.info.code);
        Alert.show("RecvStream: " + event.info.code);
        switch(event.info.code) {
            case "NetConnection.Connect.Success":
                break;
            case "NetStream.Play.Start":
                recvStream.receiveAudio(true);
                break;
        }
    }

    private function openSendStream():void {
        var sendStreamClient:Object = new Object();
        sendStreamClient.onPeerConnect = function(callerns:NetStream):Boolean {
            trace("peerConnected");
            if (!Boolean(farPeerID)) {
                connectToPeer(callerns.farID);
            }
            return true;
        }

        sendStream = new NetStream(netConnection, NetStream.DIRECT_CONNECTIONS);
        sendStream.addEventListener(NetStatusEvent.NET_STATUS, sendStreamStatusHandler);
        sendStream.client = sendStreamClient;
        sendStream.publish("media");
    }

    public function connectToPeer(id:String):void {
        farPeerID = id;
        recvStream = new NetStream(netConnection,farPeerID);
        recvStream.addEventListener(NetStatusEvent.NET_STATUS, recvStreamStatusHandler);
        recvStream.client = this;
        recvStream.play("media");
    }

    public function peerIdService_resultHandler(event:ResultEvent):void {

    }

    public function peerIdService_faultHandler(event:FaultEvent):void {

    }

    ]]>
</fx:Script>

<s:DataGroup id="friendsListUI" 
            dataProvider="{friendsList}"
                itemRenderer="pl.rafalo235.evm_client.components.FriendItemRenderer"
            x="25" y="25"
            width="200" height="550">

    <s:layout>
        <s:VerticalLayout />
    </s:layout>

</s:DataGroup>

<components:LinkButton x="700" y="25"
        label="Logout" 
        skinClass="pl.rafalo235.evm_client.skins.LinkButtonSkin"
        click="switchAuthenticationView(event)" />

</s:Group> 
```

我通过 Java 服务器 (192.168.1.2:8080/evm_server) 在数据库上发布和获取其他 peerId。也许重要的是只有 192.168.1.2 连接了麦克风。我将不胜感激快速帮助。预先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T14:06:19.870

问题出在防火墙配置中。当我关闭它时，问题就消失了。

# python - 为什么 0 ** 0 在 python 中等于 1

> ID：14414430
> 
> 赞同：32
> 
> 时间：2013-01-19T12:37:07.330
> 
> 标签：python, math

为什么在 Python中`0 ** 0`等于？`1`它不应该像这样抛出异常`0 / 0`吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-19T12:43:54.833

维基百科对历史的有趣报道以及对价值[的不同观点](https://en.wikipedia.org/wiki/Zero_to_the_power_of_zero)`0 ** 0`：

> 这场辩论至少从 19 世纪初就开始了。当时，大多数数学家都同意`0 ** 0 = 1`，直到 1821 年柯西将`0 ** 0`表达式与`0⁄0`未定义形式的表格一起列出。在 1830 年代，Libri 发表了一个无法令人信服的论点`0 ** 0 = 1`，而莫比乌斯站在他一边……

应用于计算机时，[IEEE 754](http://en.wikipedia.org/wiki/IEEE_754-2008)推荐了几种计算功率的函数。它将`pow(0, 0)`and定义`pown(0, 0)`为返回`1`和`powr(0, 0)`返回`NaN`。

大多数编程语言都遵循`0 ** 0 == 1`. 对于整数和浮点参数，Python 也不例外。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-19T12:59:20.360

考虑`x^x`：

使用限制我们可以很容易地得到我们的解决方案并重新排列`x^x`我们得到：

```
x^x= exp(log(x^x)) 
```

现在，我们有：

```
lim x->0 exp(log(x^x))= exp(lim x->0 xlog(x)) = exp(lim x->0 log(x)/(x^-1)) 
```

应用`L'Hôpital`规则，我们得到：

```
exp(lim x^-1/(-x^-2)) = exp(lim x->0 -x) = exp(0) = 1=x^x 
```

但根据 Wolfram Alpha`0**0`的说法是不确定的，他们得到了以下解释：

> 0^0 本身是未定义的。由于 a^0 始终为 1，因此 0^0 应等于 1，但 0^a 始终为 0（对于 a>0），因此 0^ 0 应该等于 0。可以说 0^0=1 是一个自然定义，因为 lim_(n->0)n^n=lim_(n->0^+)n^n=lim_(n->0 ^-)n^n=1。但是，对于 n 的一般复数值，该限制不存在。因此，0^0 的定义选择通常被定义为不确定的。”

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2019-08-31T22:41:53.563

2^2 = (1+1)*(1+1) = 4（两个对象出现两次）

2^1 = (1+1)*1 = 2（一次出现两个对象）

2^0 = (1+1)*0 = 0（没有出现两个对象）

1^2 = 1 *(1+1) = 2（一个对象出现两次）

1^1 = 1 *1 = 1（一个对象出现一次）

1^0 = 1 *0 = 0（一个对象没有出现）

0^2 = 0 *(1+1) = 0（零对象出现两次）

0^1 = 0 *1 = 0（零个对象出现一次）

0^0 = 0 *0 = 0（零个对象未出现）

因此，你不能从无到有！

# matlab - MATLAB 中的时间比较

> ID：14414431
> 
> 赞同：2
> 
> 时间：2013-01-19T12:37:08.903
> 
> 标签：matlab, time

我想在给定的时间间隔内比较时间字符串“09:12:00”？如 , T = '09:12:00';

if ('03:00:00' < T < '05:00:00') 结束

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T13:47:00.647

[只需通过datenum](http://www.mathworks.com/help/matlab/ref/datenum.html)将时间字符串转换为日期序列号

```
if ( datenum('03:00:00') < datenum(T) & datenum(T) < datenum('05:00:00') ) end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:53:08.593

我不知道是否存在可以进行 C 风格比较的标准 Matlab 函数，就像这些用户编写的函数所做的那样：[lexcmp](http://www.mathworks.com/matlabcentral/fileexchange/23035-lexcmp)，[strcmpc](http://www.mathworks.com/matlabcentral/fileexchange/23375-string-comparison) ...

它不一定漂亮，但你可以使用[sort](http://www.mathworks.com/help/matlab/ref/sort.html)、[strcmp](http://www.mathworks.com/help/matlab/ref/strcmp.html)和[find](http://www.mathworks.com/help/matlab/ref/find.html)：

```
T = '09:12:00';

S = sort({'03:00:00', T, '05:00:00'});
F = find(strcmp(T, S));
if (1 == length(F) && 2 == F(1))
    % if T is  between given limits...
end 
```

# iphone - 在 UITabBarController /UIViewControllers 之间移动一个值

> ID：14414432
> 
> 赞同：0
> 
> 时间：2013-01-19T12:37:11.663
> 
> 标签：iphone, objective-c, xcode

我有一个我正在处理的项目，其中涉及 3 个选项卡`UITabBarController`（全部在情节提要中完成）。

每个选项卡都运行在不同的视图控制器上。

我在选项卡 1 上有一个按钮，它执行计算并在文本框中返回结果。我想要这样当我点击计算时，结果也会在选项卡 2 的文本框中返回。

我不太确定如何在`UIViewController`s 之间传递数据，因此不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T13:04:13.900

根据 vshall 所说，您可以执行以下操作：-

**yourAppdelegate.h**

```
@interface yourAppdelegate : UIResponder <UIApplicationDelegate,UITabBarControllerDelegate>
{
      NSString *myCalResult;
}
@property (nonatomic,retain) NSString *myCalResult; 
```

**yourAppdelegate.m**

```
@implementation yourAppdelegate
@synthesize myCalResult, 
```

**yourCalclass.h**

> `#import "yourAppdelegate.h"`

```
@interface yourCalclass : UIViewController
{
yourAppdelegate *objAppdelegate;
} 
```

**yourCalclass.m**

```
- (void)viewDidLoad
{
    objAppdelegate = (yourAppdelegate *) [[UIApplication sharedApplication]delegate];
    [super viewDidLoad];
}

-(IBAction)ActionTotal
{
objAppdelegate.myCalResult=result;
} 
```

现在您存储的结果`objAppdelegate.myCalResult`可以在另一个选项卡中使用此变量来创建您的 Appdelegate 对象。希望它可以帮助你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T12:44:36.827

您可以在应用程序委托中定义一个变量，并将结果存储在该变量中以用于第一类。一旦你切换了类，你就可以通过创建你的 appDelegate 的实例并将它分配给你的文本字段来在你的类 2 中获取该值。

正如 Sanjit 所建议的，NSUserDefaults 也是一种非常方便和干净的方式来实现这一点。

谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T13:01:44.463

如果您真的不需要存储计算值，而只是通知 tab2 中的另一个控制器该值已更改，则可以使用`NSNotificationCenter`发布一个`NSNotification`.
当您在 tab2 中初始化控制器时，您需要将其添加为通知的观察者。

类似的东西：
在tab1中：

```
NSNumber *value = nil; // the computed value
[[NSNotificationCenter defaultCenter]
 postNotificationName:@"com.company.app:ValueChangedNotification"
 object:self
 userInfo:@{@"value" : value}]; 
```

在 tab2 中：注册为观察者（在 init 或 viewDidLoad 方法中）

```
[[NSNotificationCenter defaultCenter]
 addObserver:self
 selector:@selector(valueChanged:)
 name:@"com.company.app:ValueChangedNotification"
 object:nil]; 
```

发布通知时将调用的方法：

```
- (void)valueChanged:(NSNotification *)note
{
    NSDictionary *userInfo = note.userInfo;
    NSNumber *value = userInfo[@"value"];
    // do something with value
} 
```

不要忘记在 viewDidUnload 或更早的时间从观察者中移除控制器：

```
[[NSNotificationCenter defaultCenter] removeObserver:self]; 
```

# ruby-on-rails-3 - 在 Rails 3.2.3 中，where 子句不再有效？

> ID：14414435
> 
> 赞同：0
> 
> 时间：2013-01-19T12:38:07.300
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2

我升级到 Rails 3.2.3，突然这段代码不再工作：

```
 def self.search(query, project_id, person_id)
    if query
      where("number LIKE ?", "%#{query}%")
    elsif project_id
      where("project_id LIKE ?", project_id)
    elsif person_id
      where("projects.person_id = ?", person_id)     
    else
      scoped
    end
  end 
```

这是触发错误的最后一个`where`子句：

```
SQLite3::SQLException: no such column: projects.person_id: SELECT COUNT(DISTINCT "invoices"."id") FROM "invoices" LEFT OUTER JOIN "items" ON "items"."invoice_id" = "invoices"."id" LEFT OUTER JOIN "payments" ON "payments"."invoice_id" = "invoices"."id" WHERE "invoices"."user_id" = 1 AND (projects.person_id = '1') 
```

在我的模型中，所有`belongs_to`和`has_many`语句都设置正确，并且在我以前的 Rails 版本中有效（但不确定是哪一个）。

谁能告诉我如何让它再次工作？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T23:22:20.260

我相信你必须加入`projects`表：

```
..
    elsif person_id
      joins(:projects).where("projects.person_id = ?", person_id)     
    else
.. 
```

# ios - cocos2d-iphone如何在有效处理用户输入的同时刷新屏幕60次/秒？

> ID：14414437
> 
> 赞同：-2
> 
> 时间：2013-01-19T12:38:13.383
> 
> 标签：ios, cocos2d-iphone, game-engine

我对 cocos2d-iphone 的工作原理非常感兴趣。cocos2d默认每秒刷新屏幕60次，是否有一个“绘图线程”负责在屏幕上绘制所有CCNode？还有另一个负责处理用户输入事件的“主线程”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T14:19:33.863

Cocos2d 有一个由 CADisplayLink 驱动的主循环。它每帧更新（访问）每个节点一次。

用户输入事件随时从 iOS SDK 进来，并被 CCGLView 接收。然后将它们分派给触摸代表。

Cocos2D 默认不使用线程，这方面的选项很少。具体来说，您可以更改 Mac OS X 版本以为所有 OpenGL 内容运行第二个线程，但它被标记为实验性的。

# javascript - Google maps API V3 - 无法对 AutocompleteService 预测进行地理编码

> ID：14414445
> 
> 赞同：8
> 
> 时间：2013-01-19T12:38:57.967
> 
> 标签：javascript, google-maps, google-maps-api-3, google-geocoder

我正在使用`google.maps.places.AutocompleteService`获取有关地点搜索的建议，但我无法对某些预测进行地理编码。

一个例子：当我搜索“ *storms river mouth* ”时，我得到的预测之一是“ *Storms River Mouth Rest Camp, South Africa* ”，但无法对该地址进行地理编码以获取纬度/经度，例如：[http ://maps.googleapis.com/maps/api/geocode/json?address=Storms%20River%20Mouth%20Rest%20Camp,%20South%20Africa&sensor=true](http://maps.googleapis.com/maps/api/geocode/json?address=Storms%20River%20Mouth%20Rest%20Camp,%20South%20Africa&sensor=true)

有什么方法可以获取自动完成预测的纬度/经度值？

或者，我不明白为什么谷歌自动完成会返回我无法进行地理编码的预测。

这是我正在使用的逻辑和代码的基本示例：

```
var geocoder = new google.maps.Geocoder();
var service = new google.maps.places.AutocompleteService(null, {
  types: ['geocode'] 
});

service.getQueryPredictions({ input: query }, function(predictions, status) {
  // Show the predictions in the UI
  showInAutoComplete(predictions);
};

// When the user selects an address from the autcomplete list
function onSelectAddress(address) {
  geocoder.geocode({ address: address }, function(results, status) {
   if (status !== google.maps.GeocoderStatus.OK) {
      // This shouldn't never happen, but it does
      window.alert('Location was not found.');
    }
    // Now I can get the location of the address from the results
    // eg: results[0].geometry.location
  });
} 
```

[编辑] - 在此处查看工作示例：http: [//demos.badsyntax.co/places-search-bootstrap/example.html](http://demos.badsyntax.co/places-search-bootstrap/example.html)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-19T13:02:55.517

使用`getPlacePredictions()`而不是`getQueryPredictions()`. 这将返回`reference`该地点的一个，您可以使用它来检索详细信息`placesService.getDetails()`。详细信息将包含该地点的几何形状。

注意：placesService 是一个 google.maps.places.PlacesService 对象。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-07-19T06:49:30.613

AutocompleteService 返回的预测具有**PlaceId**属性。[您可以根据文档https://developers.google.com/maps/documentation/javascript/geocoding](https://developers.google.com/maps/documentation/javascript/geocoding)将 PlaceId 而不是地址传递给地理编码器。

```
var service = new google.maps.places.AutocompleteService();
var request = { input: 'storms river mouth' };
service.getPlacePredictions(request, function (predictions, status) {
    if(status=='OK'){
        geocoder.geocode({ 
            'placeId': predictions[0].place_id
        }, 
        function(responses, status) {
            if (status == 'OK') {
                var lat = responses[0].geometry.location.lat();
                var lng = responses[0].geometry.location.lng();
                console.log(lat, lng);
            }
        });
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T09:22:18.390

尝试这个：

```
function onSelectAddress(address, callback) {
    var geocoder = new google.maps.Geocoder();
    geocoder.geocode({'address': address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            callback(results[0].geometry.location);
        } else {
            alert("Can't find address: " + status);
            callback(null);
        }
    });
} 
```

然后，调用和回调：

```
onSelectAddress('your address here', function(location){
//Do something with location
if (location)
     alert(location);
}); 
```

对不起我的英语不好。我有一个问题要问你：你能告诉我方法 showInAutoComplete() 吗？？？我在 href 列表中显示预测，但我不知道如何保存“点击”地址值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-06T19:57:04.360

Here is the code I have written that is inspired from @Dr.Molle

```
 function initializePlaces(q) {
        googleAutocompleteService = new google.maps.places.AutocompleteService();            
        if(q){
            googleAutocompleteService.getPlacePredictions({
                input: q
            }, callbackPlaces);
        }else { //no value entered loop }
    }

    function callbackPlaces(predictions, status) {
        if (status != google.maps.places.PlacesServiceStatus.OK) {
            alert(status);
            return;
        }

        for (var i = 0; i < predictions.length; i++) {
            googlePlacesService = new google.maps.places.PlacesService(document.getElementById("q"));
            googlePlacesService.getDetails({
                reference: predictions[i].reference
            }, function(details, status){
                if(details){
                    console.log(details.geometry.location.toString());
                }
            });
            console.log(predictions[i].description);
        }
    };

    google.maps.event.addDomListener(window, 'load', initializePlaces);

    $(document).on('keyup', 'input#q', function(e){
        initializePlaces($(this).val());
    }); 
```

Issue I see is a new PlacesService object on every key press that might be an overkill - I don't know the work around although.

Posting it here in-case someone is looking for it.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-19T00:15:35.787

如果您需要以正确的顺序一次返回所有结果，请使用：

```
var service = new google.maps.places.AutocompleteService();
service.getPlacePredictions({
    input: '*** YOUR QUERY ***'
}, function(predictions, status) {
    var data = [];

    if (status != google.maps.places.PlacesServiceStatus.OK) {
        console.error(status);
        processResults(data);
        return;
    }

    var s = new google.maps.places.PlacesService(document.createElement('span'));
    var l = predictions.length;
    for (var i = 0, prediction; prediction = predictions[i]; i++) {
        (function(i) {
            s.getDetails(
                {
                    reference: prediction.reference
                },
                function (details, status) {
                    if (status == google.maps.places.PlacesServiceStatus.OK) {
                        data[i] = details;
                    } else {
                        data[i] = null;
                    }
                    if (data.length == l) {
                        processResults(data);
                    }
                }
            );
        })(i);
    } });

function processResults(data) {
    console.log(data);
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-19T12:56:31.297

也许这可以帮助你。

```
 var autocomplete = new google.maps.places.Autocomplete(this.input);
 //this.input is the node the AutocompleteService bindTo
 autocomplete.bindTo('bounds', this.map);
 //this.map is the map which has been instantiated

 google.maps.event.addListener(autocomplete, 'place_changed', function() {
     var place = autocomplete.getPlace();
     //then get lattude and longitude
     console.log(place.geometry.location.lat());
     console.log(place.geometry.location.lng());
 } 
```

# mysql - 删除/编辑 MySQL ODBC 链接表中的行导致 MS Access 出错

> ID：14414446
> 
> 赞同：5
> 
> 时间：2013-01-19T12:38:59.277
> 
> 标签：mysql, ms-access, odbc, mysql-odbc-connector

我在 Windows 7（64 位）下使用 MS Access 2003，在 MySQL 服务器（5.0.51a-24+lenny5）上使用外部链接表，通过 MySQL ODBC 连接器连接（使用 5.1.10，因为最新的 5.1.11 有问题） . 当我在 MS Access 中打开此表并尝试从中**删除一些记录**时，出现以下错误：

> Microsoft Jet 引擎停止了该过程，因为您和另一个用户正试图同时更改相同的数据。

当我尝试**编辑表中的某些记录**时，出现以下错误：

> 自您开始编辑此记录以来，其他用户已更改此记录。如果您保存记录，您将覆盖其他用户所做的更改。
> 
> 将更改复制到剪贴板可以让您查看其他用户输入的值，然后在您决定进行更改时将更改粘贴回。

但是，**当我通过MS Access 中的*删除或更新查询执行此操作时，它工作正常！***我只是不能直接从表中删除记录。

我发现（请参阅下面的详细分析），当`double`字段的值具有很多十进制数字时，就会出现问题。看：

```
CREATE TABLE `_try4` (
  `a` int(11) NOT NULL default '0',
  `b` double default NULL,
  PRIMARY KEY  (`a`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_czech_ci;

insert into _try4 values (1, NULL),(2, 4.532423),(3,10),(4,0),
     (5,6.34324),(6, 8.2342398423094823); 
```

仅当您尝试删除/编辑最后一条记录 ( `a = 6`) 时才会出现问题，否则没关系！

### 该问题已记录在案：

[http://support.microsoft.com/kb/280730](http://support.microsoft.com/kb/280730)，提出这 3 个解决方法：

> *   将时间戳列添加到 SQL 表。（然后 JET 将仅使用此字段来查看记录是否已更新。）
> *   将 SQL Server 中的数据类型修改为非浮点数据类型（例如，十进制）。
> *   运行更新查询以更新记录。您必须这样做，而不是依赖记录集更新。

但是，这 3 种解决方法并不令人满意。只有第一个可能是，但这种解决方法没有奏效 - 正如预期的那样。它可能仅适用于 MS SQL Server。

## 这个问题还有其他解决方案/解决方法吗？

**额外细节：**

*   MySQL 服务器只为我服务，没有其他人访问它。
*   插入新记录工作正常。
*   此表的主键定义良好。
*   重新启动 MS Access 没有帮助。
*   删除指向 ODBC 表的链接并再次链接它也无济于事。
*   从全新的 Access 数据库链接表没有帮助。
*   将 MySQL 数据库引擎从 MyISAM 更改为 InnoDB 也无济于事。
*   权限没有问题，有这个user@host的所有权限。
*   我通常可以毫无问题地从服务器上的 MySQL 控制台中删除记录。
*   尝试设置 MySQL 连接器 ODBC 选项没有帮助：允许大结果、启用自动重新连接、允许多个语句、启用动态游标、强制使用只进游标、不缓存只进游标的结果。
*   我在 MySQL ODBC 连接器中打开了调试，它创建了`myodbc.sql`日志，但是在编辑/删除时它没有包含任何相应的查询（不知道为什么）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T12:50:51.440

有关链接表结构的更多详细信息会有所帮助，但我会冒险猜测。

当我在 SQL Server 链接表中包含可为空的布尔字段时，我在 MS Access 2003 和 2010 中都遇到了类似的问题。似乎 JET 数据库存在可空 nit 字段的问题。查看此答案以获取更多信息：[https ://stackoverflow.com/a/4765810/1428147](https://stackoverflow.com/a/4765810/1428147)

我通过使布尔字段不可为空并设置默认值来解决我的问题。如果您的问题与我的相同，但使用 MySQL，请尝试这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-09T17:51:59.157

我在这里解决了同样的问题。解决方案是从表中的十进制字段中删除默认值。我能够保留十进制数据类型，但只是删除了我之前已经用 0.0000 定义的默认值，现在我设置为 null 并修复了错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-22T18:59:14.207

我的解决方法是将表格数据复制到 excel 中，然后使用 phpadmin 清除表格，然后在 excel 中进行编辑并将“新”数据（即，编辑后的所有数据）复制回访问。

# javascript - 在没有 JQuery 的情况下通过everyclick 移动 Div

> ID：14414450
> 
> 赞同：2
> 
> 时间：2013-01-19T12:39:23.083
> 
> 标签：javascript, jquery

我使用这个 jquery 通过每次点击来移动一个 div。

```
$(document).ready(function(){
    $('#hero').click(function(){
        $(this).animate({
            left: '+=50px'
    },300);
    })
}) 
```

只要有可能更深入地了解纯 JS，我就想避免使用 jquery。

无论如何不使用jquery也能达到同样的效果吗？

我知道这会更复杂，但只是尝试学习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T12:44:42.843

您可以在 javascript 中使用相同的技术：

```
// get the object refrence
var hero_obj = document.getElementById('hero');

// attach the onclick event
hero_obj.onclick = function(){ 
    this.style.left = ( parseInt(this.style.left, 10) + 50 ) + 'px' 
}; 
```

但是效果不会像jquery那么流畅

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T14:58:16.743

这是带有动画的代码。此代码段仅适用于现代浏览器，但也很容易修改以与旧浏览器 (IE) 一起使用。（实际上只需要修复事件的附件。）

```
window.onload = function () {
    var timer, k, intervals, kX, kY,
        counter = 0,
        hero = document.getElementById('hero'),
        posX = hero.offsetLeft,
        posY = hero.offsetTop,
        anim = function (elem, params) {
            posX += kX;
            posY += kY;
            elem.style.left = posX + 'px';
            elem.style.top = posY + 'px';
            if (counter > intervals) {
                clearInterval(timer);
                counter = 0;
            } else {
                counter++;
            }
            return;
        },
        move = function (elem, params) {
            if (timer) {
                clearInterval(timer);
                counter = 0;
            }
            k = Math.atan2(params.left, params.top);
            kX = Math.sin(k);
            kY = Math.cos(k);
            intervals = Math.floor(Math.sqrt(Math.pow(params.left, 2) + Math.pow(params.top, 2)));
            timer = setInterval(function () {
                anim(elem, params);
                return;
            }, params.speed);
            return;
        };
    document.getElementById('hero').addEventListener('click', function (e) {
        move(e.currentTarget, {left: 50, top: 0, speed: 0});
        return;
    }, false);
    return;
} 
```

如您所见，使用此代码，您还可以垂直移动元素并调整速度。要切换方向，只需添加`-`到相应的属性。该代码仅使用像素作为单位，但如果需要，很容易修改。

将此功能代码转换为对象也很容易。也可以通过传递属性`params.duration`而不是使用`params.speed`and 进行一些高级计算`kX`来添加类似 jQuery 的持续时间`kY`。

[在jsFiddle](http://jsfiddle.net/zsgsQ/2/)工作演示

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T15:53:27.623

几周前，我在[vanilla-js.com](http://vanilla-js.com/)上偶然发现了这个宝石：

```
var s = document.getElementById('thing').style;
s.opacity = 1;
(function(){(s.opacity-=.1)<0?s.display="none":setTimeout(arguments.callee,40)})(); 
```

我真的很喜欢代码的简单性和大小。优雅高效！

我`left`根据上面的代码创建了一个影响您选择的元素属性的函数：

```
/* element: DOM element such as document.getElementById('hero')
   distance: distance in pixels to move to the left such as 50 or 100 */
function moveBy(element, distance){
    var target = isNaN(parseInt(s.left)) ? distance : parseInt(s.left) + distance;
    (function(){
        s.left = isNaN(parseInt(s.left)) ? '1px' : (parseInt(s.left) + 1).toString() + 'px';
        if(parseInt(s.left) <= distance) setTimeout(arguments.callee, 40);
    })();
} 
```

您可以四处玩耍，看看在速度和平滑度方面符合您的喜好。[在 jsfiddle 上尝试一下](http://jsfiddle.net/remibreton/Mufb9/2/)。

```
/* So you go: */
moveBy(document.getElementById('hero'), 50);
/* Or you can bind it to an event */
document.getElementById('hero').addEventListener('click', function(event){
    moveBy(this, 50);
}); 
```

如果您愿意将其变得更好，那么需要什么样的解决方案才能将`left`属性替换为`translate`. 正如[Paul Irish 在他的博客中所说](http://paulirish.com/2012/why-moving-elements-with-translate-is-better-than-posabs-topleft/)，提供比使用(top-left-bottom-right)`translate`移动元素更好的性能。`TRBL`也可以添加某种缓动功能以使事情变得顺畅。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T17:25:23.160

我需要在不使用框架的情况下创建一个动画解决方案。
对我来说，棘手的部分是处理与用户交互相关的中断/重新启动动画。我发现如果你的动画双发，你很快就会遇到麻烦。

这是在 github 上：[https ://github.com/robCrawford/js-anim](https://github.com/robCrawford/js-anim)

有一些支持功能，但这里是主要动画：

```
function animate(el, prop, to, pxPerSecond, easing, callback){
/**
* Animate style property
* i.e. animate(div1, "width", 1100, 1000, "out", function(){console.log('div1 anim end')});
* 
* @param el  DOM element
* @param prop  Property to animate
* @param to  Destination property value
* @param pxPerSecond  Speed of animation in pixels per second
* @param easing (optional)  Easing type: "in" or "out"
* @param callback (optional)  Function to call when animation is complete
*/
    var frameDur = 10,
        initPropVal = parseInt(getCurrCss(el, prop)),
        distance = Math.abs(to-initPropVal),
        easeVal = (easing==="in")?1.5:(easing==="out")?0.5:1, // >1 ease-in, <1 ease-out
        elAnimData = getData(el, 'animData');

    //Quit if already at 'to' val (still fire callback)
    if(initPropVal===to){
        if(callback)callback.call();
        return;
    }

    //Init animData for el if first anim
    if(!elAnimData){
        elAnimData = {};
        setData(el, {'animData':elAnimData});
    }

    //Get data for prop being animated or create entry
    var animDataOb = elAnimData[prop];
    if(!animDataOb)animDataOb = elAnimData[prop] = {};

    //Don't re-initialise an existing animation i.e. same prop/to
    if(animDataOb.to === to)return;
    animDataOb.to = to; //Store 'to' val

    //Clear any exisiting interval
    if(animDataOb.intId){
        clearInterval(animDataOb.intId);
        animDataOb.intId = null;
    }

    //Create new anim
    animDataOb.intId = (function(animDataOb){
        var totalSteps = Math.round((distance/pxPerSecond)/(frameDur*.001)),
            thisStep = 0;

        return setInterval(function(){
            var newVal = easeInOut(initPropVal, to, totalSteps, thisStep++, easeVal);
            if(!isNaN(newVal))el.style[prop] = newVal + "px"; //Allow 0
            if(thisStep > totalSteps)endAnim(animDataOb, callback);
        }, frameDur);
    })(animDataOb);
}

function endAnim(animDataOb, callback){
//End anim
    clearInterval(animDataOb.intId);
    animDataOb.intId = animDataOb.to = null;
    if(callback)callback.call();
} 
```

# c++ - Python C++：C++ 中是否有类似 python.split() 的方法？

> ID：14414451
> 
> 赞同：4
> 
> 时间：2013-01-19T12:39:34.733
> 
> 标签：c++, python

> **可能重复：**
> [如何在 C++ 中标记字符串？](https://stackoverflow.com/questions/53849/how-do-i-tokenize-a-string-in-c)
> [在 C++ 中拆分字符串](https://stackoverflow.com/questions/236129/splitting-a-string-in-c)

请问在 C++ 中有没有类似 python.split(",") 的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T12:47:39.803

从某些地方获得以下代码..可能会有所帮助

```
#define MAIN 1
#include <string>
#include <vector>
#include <iostream>
using namespace std;

class splitstring : public string {
    vector<string> flds;
public:
    splitstring(char *s) : string(s) { };
    vector<string>& split(char delim, int rep=0);
};

vector<string>& splitstring::split(char delim, int rep) {
    if (!flds.empty()) flds.clear();
    string work = data();
    string buf = "";
    int i = 0;
    while (i < work.length()) {
        if (work[i] != delim)
            buf += work[i];
        else if (rep == 1) {
            flds.push_back(buf);
            buf = "";
        } else if (buf.length() > 0) {
            flds.push_back(buf);
            buf = "";
        }
        i++;
    }
    if (!buf.empty())
        flds.push_back(buf);
    return flds;
}

#ifdef MAIN
main()
{
    splitstring s("Humpty Dumpty sat on a wall.   Humpty Dumpty had a great fall");
    cout << s << endl;

    vector<string> flds = s.split(' ');
    for (int k = 0; k < flds.size(); k++)
        cout << k << " => " << flds[k] << endl;

    cout << endl << "with repeated delimiters:" << endl;
    vector<string> flds2 = s.split(' ', 1);
    for (int k = 0; k < flds2.size(); k++)
        cout << k << " => " << flds2[k] << endl;
}
#endif 
```

在提升：

```
vector<string> results;
boost::split(results, line, boost::is_any_of("@")); 
```

在 STL 中：

```
template <typename E, typename C>
size_t split(std::basic_string<E> const& s, C &container,
        E const delimiter, bool keepBlankFields = true) {
    size_t n = 0;
    std::basic_string<E>::const_iterator it = s.begin(), end = s.end(), first;
    for (first = it; it != end; ++it) {
        if (delimiter == *it) {
            if (keepBlankFields || first != it) {
                container.push_back(std::basic_string<E > (first, it));
                ++n;
                first = it + 1;
            } else ++first;
        }
    }
    if (keepBlankFields || first != it) {
        container.push_back(std::basic_string<E > (first, it));
        ++n;
    }
    return n;
} 
```

# ruby - Amazon S3 - 使用 Ruby 1.9.3 生成过期链接

> ID：14414455
> 
> 赞同：2
> 
> 时间：2013-01-19T12:39:52.567
> 
> 标签：ruby, amazon-s3

我正在尝试创建一个过期链接以允许使用 Ruby (1.9.3) 访问 S3 上的私有文件。

我一直按照这里的说明进行操作：http: [//docs.aws.amazon.com/AmazonS3/2006-03-01/dev/RESTAuthentication.html#RESTAuthenticationQueryStringAuth](http://docs.aws.amazon.com/AmazonS3/2006-03-01/dev/RESTAuthentication.html#RESTAuthenticationQueryStringAuth) - 但是我得到的最终值是错误的。该示例仅提供最终结果，而不是每个步骤的值，因此我不确定哪里出了问题。无论实现如何，中间值都应该相同。

我正在使用的 Ruby 代码（包括相同的密钥并且从上面的链接过期）：

```
require "cgi"
require "base64"
require "openssl"
require "digest/sha1"

key_id = 'AKIAIOSFODNN7EXAMPLE' # Example Amazon key id and secret key
key = 'wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY'
expires = 1141889120
string_to_sign =  "GET\n\n\n#{expires.to_s}\n/johnsmith/photos/puppy.jpg"

digest = OpenSSL::HMAC.digest(OpenSSL::Digest::Digest.new("sha1"), key, string_to_sign)
base64 = Base64.encode64(digest).strip
signature = CGI::escape(base64)

puts "Digest: #{digest}"
puts "Base64: #{base64}"
puts "Signature: #{signature}" 
```

输出：

*   摘要：}'\n\x18p\x83#CX\xE4N\xC2b\x9FUs\xC5J1\xB6
*   Base64: fScKGHCDI0NY5E7CYp9Vc8VKMbY=
*   签名：fScKGHCDI0NY5E7CYp9Vc8VKMbY%3D

但是亚马逊页面上的签名是：NpgCjnDzrM%2BWFzoENXmpNDUsSn8%3D

关于哪里出错的任何想法？

# python - PYTHON 更改启动目录

> ID：14414458
> 
> 赞同：1
> 
> 时间：2013-01-19T12:40:05.110
> 
> 标签：python, python-2.7

当我启动我的 python shell 时，它从一个特定的目录开始。我想将其更改为其他目录。这样以后每当我再次打开 python shell 时，它都会在新的 set 目录中打开。

我正在使用 Python 2.7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T12:56:37.383

你可以做类似的事情，假设类 Unix 系统。

设置 PYTHONSTARTUP 脚本在启动 Python REPL 时运行。

```
$ export PYTHONSTARTUP=$HOME/.pythonrc 
```

在 $HOME/.pythonrc 中创建 python 脚本

```
# file: ~/.pythonrc
# I always want to start python in my Projects dir.
import os
os.chdir(os.path.join(os.path.expanduser("~"), "Projects")) 
```

在 python REPL 中测试它。

```
>>> import os
>>> os.getcwd()
'<<YOUR_HOME>>/Projects' 
```

您可以更改它以适应您的特定需求，但通常它会做正确的事情。

# symfony - 在 prod 中找不到模板

> ID：14414461
> 
> 赞同：2
> 
> 时间：2013-01-19T12:40:48.727
> 
> 标签：symfony, symfony-2.1

我刚刚将我的应用程序上传到我的网站空间，并通过 ssh 清除了缓存。但是在 prod 环境中，我的日志文件向我显示了一个异常：

> InvalidArgumentException：找不到模板“项目：新闻：overview.html.twig”。（未捕获的异常）在 /path/to/my/project/vendor/symfony/symfony/src/Symfony/Bridge/Twig/TwigEngine.php 第 123 行

你有什么想法我能做什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T12:43:05.667

在大多数情况下，问题是 windows 不区分大小写而 linux 是。因此，请检查您的文件以及文件和文件夹是否区分大小写。

# java - Java将字符串（日/月/年）格式转换为日期

> ID：14414462
> 
> 赞同：0
> 
> 时间：2013-01-19T12:40:53.800
> 
> 标签：java, string, date

我正在尝试将字符串转换为日期

```
String date = "12/31/2012";
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-mm-dd");
        try {
            Date parse = sdf.parse(date);
            System.out.println(parse);
        } catch (ParseException ex) {     
            ex.printStackTrace();
        } 
```

但在我看来，它有一个`Exception`. 的`ParseExpception`。这是为什么？我想为`12/31/2012`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T12:41:46.137

日期字符串 -`12/31/2012`

它与 -`MM/dd/yyyy`

*   d - 一个月中的哪一天
*   M - 一年中的月份
*   y - 年

...

```
SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T12:41:56.527

月份的格式`MM`不是`mm`，您应该使用`-`而不是`/`您的格式化程序分隔符，`/`并且您的格式应该与您的日期字符串相匹配。

```
date 12-31-2012
fmt  MM-dd-yyyy

String date = "12-31-2012";
        SimpleDateFormat sdf = new SimpleDateFormat("MM-dd-yyyy"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-05T16:44:32.390

[如果你可以使用 Joda 时间](http://www.joda.org/joda-time/)

```
String dateStr = "11/15/2013";
Date date = DateTimeFormat.forPattern("dd/MM/yyyy").parseDateTime(dateStr).toDate(); 
```

# android - 如果已经填写了他的个人资料 android，用户将被定向到其他活动

> ID：14414465
> 
> 赞同：1
> 
> 时间：2013-01-19T12:41:19.260
> 
> 标签：android

我想问一下首先要求用户填写个人资料表格以便填写，然后定向到主要活动的逻辑。关闭应用程序然后重新打开后，配置文件活动不应首先启动，而是现在主要活动。我怎样才能做到这一点？我需要帮助。谢谢。

这是我到目前为止所尝试的：

```
 private void doThread(){

    Thread timer = new Thread(){
        public void run(){
            try{
                sleep(5000); // sleeps/delays for 3 seconds
            } // end try
            catch(InterruptedException e){
                e.printStackTrace();
            }finally{
                // this is going to create new intent activity for 
                // based on the action name (com.fps.ihealthfirst.IHEALTHFIRSACTIVITY)

                boolean firstTime = mPreferences.getBoolean("user_prefs", true);
                if (firstTime) { 
                    Intent myProfile = new Intent( Disclaimer.this, Profile_Pref.class );
                    startActivity(myProfile);
                }
                else{
                Intent openIHealthFirst = new Intent( "com.fps.iHealthFirst.IHEALTHFIRSTACTIVITY" );
                startActivity( openIHealthFirst );
                finish();
                }
            }// end finally
        } // end run method
    }; // end thread

    timer.start();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T12:56:30.153

根据您的选择，您可以选择将从*Profile Form*收集的信息保存在数据库或[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)文件中。这部分是相当主观的，如果您已经在应用程序中使用了数据库，您可能会考虑它。

以下是用户设置/输入个人资料详细信息后处理逻辑/流程的一些建议：

*第一：*如果您还没有使用*Splash Screen*，您必须考虑创建一个。这将为您提供一小段缓冲时间来检查用户是否已经输入了他的个人资料详细信息。

*第二：*如果他没有，你可以打开*Profile Form* `Activity`。如果在检查数据库或`SharedPreferences`文件后，您发现数据表明已填写表格，您可以直接显示主要活动。

我个人会更倾向于使用`SharedPreferences`这项任务。

以下是一些开始使用 SharedPreferences 的教程：

[http://android-er.blogspot.in/2011/01/example-of-using-sharedpreferencesedito.html](http://android-er.blogspot.in/2011/01/example-of-using-sharedpreferencesedito.html)

[http://saigeethamn.blogspot.in/2009/10/shared-preferences-android-developer.html](http://saigeethamn.blogspot.in/2009/10/shared-preferences-android-developer.html)

[http://myandroidsolutions.blogspot.in/2012/06/android-store-persistent-data-using.html](http://myandroidsolutions.blogspot.in/2012/06/android-store-persistent-data-using.html)

[http://moorandroid.blogspot.in/p/shared-preferences-on-android.html](http://moorandroid.blogspot.in/p/shared-preferences-on-android.html)

它们可能不是特定于您的问题，但会为您提供保存值的逻辑。检索保存的值将相当简单。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-22T23:32:48.093

你可以使用`SharedPreferences`。我有同样的问题，[这里](https://stackoverflow.com/questions/21703114/skip-start-of-activity-if-a-condition-has-already-been-met)有一个很好的答案。一探究竟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T12:50:39.867

一种方法是将表单信息保存到 SD 卡上，然后加载并检查信息，如果信息存在，则可以转到下一个活动。检查这个答案以获得解释。

*   [我可以只在第一次打开应用程序时运行 android 活动吗？](https://stackoverflow.com/q/3010457/1626878)

另一种是检查主要活动中的特定共享首选项，如果缺少该共享首选项，则再次启动单次运行活动。检查以下答案以获取解释。

*   [首次打开应用程序时如何仅启动一次活动？](https://stackoverflow.com/q/7238532/1626878)
*   [判断android app是否是第一次使用](https://stackoverflow.com/q/4636141/1626878)

# c - 初始化器必须是常量

> ID：14414480
> 
> 赞同：3
> 
> 时间：2013-01-19T12:43:04.330
> 
> 标签：c

我正在尝试学习 C，但在以下代码中出现错误。

如果我在体积中使用**半径**，则会出现错误：`error #2069: Initializer must be constant.`

```
#include <stdio.h>
#define PI (3.14)

/* Define radius*/
int radius = 10;
float volume = ( 4.0f / (3.0f * PI * radius) );

int main(void){

return 0;
} 
```

但是当我用一个实际的数字改变半径时，它编译得很好。

```
#include <stdio.h>
#define PI (3.14)

/* Define radius*/
int radius = 10;
float volume = ( 4.0f / (3.0f * PI * 10) );

int main(void){

    return 0;
} 
```

为什么会发生这种情况，我该怎么做才能使第一个版本正常工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T12:46:21.530

在 C 中，您不能使用非常量表达式初始化全局变量。

**C99 标准：第 6.7.8 节：**

> 具有静态存储持续时间的对象的初始化程序中的所有表达式都应为常量表达式或字符串文字。

在您的示例中，`volume`是具有静态存储持续时间的全局变量，并且`radius`不是常量。因此错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T12:44:35.053

在 C 中，您只能使用*常量表达式*初始化函数外部的变量。 `int radius`不是常量表达式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-19T12:58:32.397

不能使用非常量表达式初始化静态*对象。*在你的例子中，

```
float volume = ( 4.0f / (3.0f * PI * radius) ); 
```

`volume`是一个全局变量，具有静态持续时间。所以它不能用非常量表达式初始化。

但是，如果`volume`是局部变量，则可以在 C99 中使用非常量值对其进行初始化。因此，在`C99`.

```
#include <stdio.h>
#define PI (3.14)

/* Define radius*/
int radius = 10;

int main(void){
float volume = ( 4.0f / (3.0f * PI * radius) );
return 0;
} 
```

`C90`但是在所有初始化器都必须是常量表达式的情况下，这同样是无效的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T12:45:01.923

在这方面的常数是没有内存地址的东西。`radius`有一个内存地址，所以它不能用于初始化。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-19T12:49:16.947

它只是 C，而不是 C++，所以`radius`必须是常量，但如果你想要它作为变量。
定义为`volume`_`main()`

```
#include <stdio.h>
#define PI (3.14)

/* Define radius*/
int radius = 10;
int main(void){
float volume = ( 4.0f / (3.0f * PI * radius) );
return 0;
} 
```

现在，错误可能会消失。

# iphone - 滚动表格视图时部分下方的行

> ID：14414482
> 
> 赞同：0
> 
> 时间：2013-01-19T12:43:05.483
> 
> 标签：iphone, objective-c, uitableview, collapse, sections

我是 iPhone 编程的新手，但我遇到了一个问题。`UITableView`我已经在单击节标题时展开和折叠行的地方实现了节标题和行。但问题是这样的：当行在单击节标题时展开时，滚动行在节标题下方。我想滚动行和节标题，它不应该在节标题下。我怎样才能达到预期的效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T12:49:23.500

我认为您在更新数据源后忘记调用以下方法：

要添加行：

```
[self.tableView insertRowsAtIndexPaths:<#(NSArray *)#> withRowAnimation:<#(UITableViewRowAnimation)#>]; 
```

要删除行：

```
[self.tableView deleteRowsAtIndexPaths:<#(NSArray *)#> withRowAnimation:<#(UITableViewRowAnimation)#>]; 
```

你也可能需要

```
[self.tableView insertSections:<#(NSIndexSet *)#> withRowAnimation:<#(UITableViewRowAnimation)#>]; 
```

和

```
 [self.tableView deleteSections:<#(NSIndexSet *)#> withRowAnimation:<#(UITableViewRowAnimation)#>]; 
```

![展开和滚动时部分下的行](../Images/8051625acbaf9339db07165e273db3bd.png)

# batch-file - 以批处理模式运行 exe（并回答提升的问题）

> ID：14414498
> 
> 赞同：1
> 
> 时间：2013-01-19T12:44:45.267
> 
> 标签：batch-file, exe

谁能帮我编写我想要的批处理文件？

我有一个exe文件。一旦我双击它，就会弹出一个黑色的 DOS 窗口并询问我“文本文件的名称是什么”。我必须输入带有扩展名的全名。按下回车键后，在同一个黑色 DOS 窗口中又出现了一个问题，例如“您的文件中有多少列？1\. 10 列；2\. 100 列：3\. 150 列。此后，exe 文件会再问几个类似的问题。

我想让exe处理多个输入文本文件，只是输入文件的名称和数据不同，但实际上列数和行数等都是一样的。

所以我想也许一个批处理文件可以在批处理模式下运行这个 exe（回答提升的问题）。

bat 文件中的代码可能如下所示：

```
@echo off
:: Let the exe run and process file1
start C:\Batexe\myprogram.exe
:: Could anyone help with the code to answer following up questions automatically (no need to even display the questions)?
:: Could anyone help with the code to answer following up questions automatically (no need to even display the questions)?
:: Could anyone help with the code to answer following up questions automatically (no need to even display the questions)?
:: Could anyone help with the code to answer following up questions automatically (no need to even display the questions)?

:: Let the exe run and process file2
:: Could anyone help with the code to answer following up questions automatically (no need to even display the questions)?
:: Could anyone help with the code to answer following up questions automatically (no need to even display the questions)?
:: Could anyone help with the code to answer following up questions automatically (no need to even display the questions)?
:: Could anyone help with the code to answer following up questions automatically (no need to even display the questions)?

:: Let the exe run and process file3
.
.
. 
```

我可能有 100 个文本输入文件。上面的代码块我可能会重复 100 次（感觉很蠢）。希望我已经说清楚了。那么有人可以帮助我吗？提前致谢！！！我已经在其他地方发布了相同的问题，但尚未得到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T15:17:15.550

只要您的 exe 程序从标准输入中获取输入，您就可以通过管道将响应传递给程序。无需使用 START。

```
echo Response | yourProgram.exe 
```

您可以使用括号轻松地传递一系列响应

```
(
  echo Response 1
  echo Response 2
  echo Response 3
) | yourProgram.exe 
```

你说只有第一个响应改变 - 文件名。您可能应该使用某种形式的 FOR 循环来迭代您的文件名。我举几个例子。

如果要处理特定目录中的所有 .TXT 文件：

```
@echo off
for %%F in ("pathToYourFolder\*.txt") do (
  echo %%F
  echo ConstantColumnCount
  echo ConstantRowCount
  echo etc.
) | yourProgram.exe 
```

如果要显式列出批处理文件中的文件：

```
@echo off
for %%F in (
  file1.txt
  optionalPath1\file2.txt
  file3.txt
  etc.
) do (
  echo %%F
  echo ConstantColumnCount
  echo ConstantRowCount
  echo etc.
) | yourProgram.exe 
```

如果在名为 FileList.txt 的文件中列出所有要处理的文件，则每行一个文件：

```
@echo off
for /f "eol=: delims=" %%F in (FileList.txt) do (
  echo %%F
  echo ConstantColumnCount
  echo ConstantRowCount
  echo etc.
) | yourProgram.exe 
```

还有更多的可能性 - FOR 命令非常灵活。

# c# - 如何将文件从 Visual Studio 部署到 XAML Metro App 中的可访问文件夹？

> ID：14414500
> 
> 赞同：2
> 
> 时间：2013-01-19T12:44:52.293
> 
> 标签：c#, windows-8, windows-runtime, .net-4.5

我有 XAML Metro 应用程序。我需要部署一个静态文件，以便在每次应用启动时读取。我只能访问某些路径（例如 LocalStorage 和 InstalledLocation ..对吗？）

**如何让 VS 2012 将该文件（rtf 文档）部署到应用程序可以读取的位置？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T12:51:55.193

一个好的解决方案是将文件放在 VS 解决方案的 Assets 子文件夹中，并通过以下方式访问：

```
Windows.ApplicationModel.Package.Current.InstalledLocation.GetFileAsync(@"Assets\file.rtf") 
```

[来自 Microsoft 的 InstalledLocation 文档](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.package.installedlocation)

例如

```
var file = await Windows.ApplicationModel.Package.
                     Current.InstalledLocation.GetFileAsync(@"Assets\file.rtf");
result = await file.OpenAsync(Windows.Storage.FileAccessMode.Read); 
```

在以下博客文章中很好地展示了：

[http://blogs.msdn.com/b/metroapps/archive/2012/07/15/access-your-application-assets-folder.aspx](http://blogs.msdn.com/b/metroapps/archive/2012/07/15/access-your-application-assets-folder.aspx)

这里也有很好的信息：

[http://blog.jerrynixon.com/2012/06/windows-8-how-to-read-files-in-winrt.html](http://blog.jerrynixon.com/2012/06/windows-8-how-to-read-files-in-winrt.html)

# c# - C# System.InvalidOperationException：对象当前正在其他地方使用

> ID：14414502
> 
> 赞同：0
> 
> 时间：2013-01-19T12:45:08.307
> 
> 标签：c#, multithreading, gdi+, game-loop

我已经看到关于同一主题的问题，但不知道如何解决这个问题。在我的游戏中，我使用两个线程一个`Logic`线程和`UI`线程。这是我遇到的问题

```
System.InvalidOperationException: Object is currently in use elsewhere.
   at System.Drawing.Graphics.FromImage(Image image)
   at GECS.Core.Game.UpdateLoop() in c:\Us....ore\Game.cs:line 82
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

我只在 UI 线程上渲染。这是我的渲染循环。我把它放在构造函数中。

```
while (true) {
    if (!Created) {
        break;
    }
    if (Win32.PeekMessage(out msg, IntPtr.Zero, 0, 0, (uint)Win32.PM.REMOVE)) {
        if (msg.message == (uint)Win32.WindowsMessage.WM_QUIT) {
            break;
        } else {
            Win32.TranslateMessage(ref msg);
            Win32.DispatchMessage(ref msg);
        }
    } else {
        Text = Global.TITLE;
        now = GetCurrentTime();
        Graphics front = Graphics.FromHwnd(Handle);
        front.DrawImage(backBuffer, 0, 0);
        front.Dispose();
    }
} 
```

还有我的逻辑循环

```
while (Created) {
    now = GetCurrentTime();
    while (now > game_time) {
        elapsedTime = 1000/Global.ACTUAL_STEPS_FOR_SECOND;
        Update(elapsedTime);
        Map.UpdateObjects(elapsedTime);
        game_time += step_size;
    }
    Graphics g = Graphics.FromImage(backBuffer);   // This line is error
    g.Clear(Color.WhiteSmoke);
    Render(g);
    g.Dispose();
} 
```

我怎么解决这个问题？已经尝试将逻辑循环粘贴到渲染循环之上，这让我的游戏变得如此缓慢。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T13:30:25.557

“双线程”当然是问题所在。它们不能允许两个线程同时访问*backBuffer*。您必须使用锁来防止这种情况发生。大致：

```
private object bufferLock = new object();
...
    using (var front = Graphics.FromHwnd(Handle)) {
        lock (bufferLock) {
            front.DrawImage(backBuffer, 0, 0);
        }
    } 
```

和

```
 lock (bufferLock) {
        using (var g = Graphics.FromImage(backBuffer) {  // No more error
            g.Clear(Color.WhiteSmoke);
            Render(g);
        }
    } 
```

其余的看起来也不那么健康，你没有确保你在两个线程之间正确地乒乓球，并且非常不清楚哪个线程拥有窗口。

# android - 当我遇到警告时出现什么问题 ..“已达到编译 SQL 语句的最大大小”？

> ID：14414508
> 
> 赞同：0
> 
> 时间：2013-01-19T12:45:19.750
> 
> 标签：android, sqlite

如果存在，如果我遇到这个问题是什么，它只是一个警告并且我监控我的数据库，它不会跳过任何东西。但也许我忽略了.. 我害怕它有严重的错误，也许现在或者将来可能会困扰我的应用程序，它真的是一个沉重的数据库。

一个明确的答案是我真正需要的......谢谢，我可能会`bindArgs = ?`像Android建议的那样将所有那些“WHERE”更改为，但这需要我很多时间，而且我有比这更多的优先事项......谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T12:50:56.383

尝试将所有 sql 查询放在单独的类中，以便您打开数据库查询。
使用 Databasehelper 类...

# java - jsp页面中的javascript

> ID：14414528
> 
> 赞同：0
> 
> 时间：2013-01-19T12:47:58.247
> 
> 标签：java, javascript, jsp

嗨，我正在尝试在 jsp 页面中添加一些 javascript，但这不起作用。下面是我的代码。

```
<head>
    <script type="text/javascript">
$(document).ready(function () {
    $(".jsscript").fadeTo(20, 0.6);
    $(".jsscript").mouseleave(function () {
        $(this).fadeTo(800, 0.6);
    });
    $(".jsscript").mouseenter(function () {
        $(this).fadeTo(320, 1);
    });
})
</script>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Gadgets</title>
</head> 
```

这是我的 head 标签中使用的 javascript，下面是在同一页面上找到的图像

```
<td align="center"><img class="jsscript" src="images/<%=p.getFileName()%>" width="300"/></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T12:57:37.213

```
<script src="http://code.jquery.com/jquery.min.js"></script> 
```

将此添加到头部

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-19T12:51:21.300

最后缺少半列

```
<script type="text/javascript">
$(document).ready(function () {
    $(".jsscript").fadeTo(20, 0.6);
    $(".jsscript").mouseleave(function () {
        $(this).fadeTo(800, 0.6);
    });
    $(".jsscript").mouseenter(function () {
        $(this).fadeTo(320, 1);
    });
});
</script> 
```

查看您的控制台。

# java - java - 如何在java中的方法中将枚举作为参数传递？

> ID：14414530
> 
> 赞同：38
> 
> 时间：2013-01-19T12:48:03.127
> 
> 标签：java, enums

```
public class Enumvalues{

    enum courseList {
        JAVA,
        C,
        PYTHON,
        PERL
    }

    enum generalInformation {
        NAME,
        AGE,
        PHONE
    }  

    enum sex {
        MALE,
        FEMALE
    }
}

public static void main(String args[]) {
     printEnumValue(generalInformation); // how to pass enum in this block
}

static void printEnumValue(enum generalInformation) { // how to receive enum  in this block    
    System.out.println(java.util.Arrays.asList(generalInformation.values()));
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-19T12:55:01.410

枚举是一个类。因此，您可以传递类的实例（`EnumValues.generalInformation.PHONE`例如），也可以传递类本身（`EnumValues.generalInformation.class`例如）。

如果要列出一个枚举类的所有实例，则需要传递枚举类，并使用`EnumSet.allOf(EnumValues.generalInformation.class)`例如。

您的困惑主要来自您不尊重 Java 命名约定这一事实。ENums 是类，应该以大写字母开头（`GeneralInformation`例如）。混淆的另一个来源是名称的错误选择。JAVA 不是课程列表。这是一门课程。所以枚举应该命名为`Course`.

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-10-16T01:31:45.537

> 请注意，您的问题混合了两个不同的问题：将枚举传递给函数或将枚举常量传递给函数。我的理解是你想传递枚举本身，而不是它的常量之一给函数。如果不是：请参阅 Narendra Pathai 关于如何将单个枚举常量传递给函数的答案。如果您不知道枚举和枚举常量之间的区别是什么，请查看有关枚举的[文档](https://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)...

我知道您想要的是拥有一个打印（或任何其他）函数，您可以在其中传递任何可能的枚举，以打印每个枚举的可能值（即常量）。我找到了以下两种方法来做到这一点：

假设我们有以下枚举：

```
// The test enum, any other will work too
public static enum ETest
{
    PRINT,MY,VALUES
} 
```

**变体 1：**将常量数组从您的枚举传递给您的函数；由于枚举的常量是静态值，它们可以很容易地访问并传递给您的“打印”函数，如下所示：

```
public static void main(String[] args)
{
    // retreive all constants of your enum by YourEnum.values()
    // then pass them to your function
    printEnum(ETest.values());
}

// print function: type safe for Enum values
public static <T extends Enum<T>> void printEnum(T[] aValues)
{
    System.out.println(java.util.Arrays.asList(aValues));
} 
```

**变体 2：**将枚举的类作为函数参数传递。这可能看起来更漂亮，但请注意涉及反射（性能）：

```
public static void main(String[] args)
{
    printEnum2(ETest.class);
}

// print function: accepts enum class and prints all constants
public static <T extends Enum<T>> void printEnum2(Class<T> aEnum)
{
    // retreive all constants of your enum (reflection!!)
    System.out.println(java.util.Arrays.asList(aEnum.getEnumConstants()));
} 
```

在我看来，最好使用 variante 1，因为在 variante 2 中过度使用反射。variante 2 给您的唯一优势是您拥有 Enum 本身的 Class 对象（静态枚举，不仅是常量）在你的函数内部，所以我已经提到它的完整性。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-01-19T12:50:22.917

如果你想从枚举中传递一个值

```
 public class Test {

    enum GeneralInformation{
        NAME;
    }

    private static void print(GeneralInformation val){
        System.out.println(val);
    }

    public static void main(String[] args) {
        print(GeneralInformation.NAME);
    }
} 
```

否则，如果您希望通过整个班级，因为从问题中不清楚

```
private static void print(Class<?> generalInfo){

    }

    public static void main(String[] args) {
        print(GeneralInformation.class);
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-06-01T20:56:17.847

TestEnumMain.java：

```
package enumSample;

import org.apache.commons.lang3.EnumUtils; 

    public static void main(String[] args) {
        boolean result= isValidEnum(DummyEnum.class, "APPLE"); 
        System.out.println("result= " + result); 
        boolean result2= isValidEnum2(DummyEnum.class, "COF"); 
        System.out.println("result2= " + result2); 
        //boolean result3= isValidEnum2(A_Different_Enum.class, "COF");  //works
        //System.out.println("result3= " + result3); 

    }

    public static<E extends Enum<E>> boolean isValidEnum2(Class<E> enumClass, String enumName) {

        System.out.println("enumClass.getEnumConstants().length= " + enumClass.getEnumConstants().length); 
        System.out.println("enumClass.getEnumConstants()[0]= " + enumClass.getEnumConstants()[0]); 
        System.out.println("enumClass.getEnumConstants()[1]= " + enumClass.getEnumConstants()[1].name()); 
        System.out.println("enumName.valueOf(enumClass)= "+ enumName.valueOf(enumClass));

        if(enumName== null) {
            return false; 
        } else {
            try {
                if(enumClass.isAssignableFrom(DummyEnum.class)) { /*Checks if enumClass is an instance of DummyEnum.class*/
                    for (int i=0; i!= enumClass.getEnumConstants().length; i++) {
                        System.out.println("(DummyEnum) enumClass.getEnumConstants()["+i+"]).code()= "+ ((DummyEnum) enumClass.getEnumConstants()[i]).code());          
                        if(enumName.equals(((DummyEnum) enumClass.getEnumConstants()[i]).code())) {
                            return true; 
                        }
                    }                   
                    return false; 
                } else {
                    Enum.valueOf(enumClass, enumName); 
                    return true; 
                }
            } catch (IllegalArgumentException var3){
                return false; 
            }
        }

    }

    //Original Method from apache.commons.long3.EnumUtils: 
    public static<E extends Enum<E>> boolean isValidEnum(Class<E> enumClass, String enumName) {
        if(enumName== null) {
            return false; 
        } else {
            try {
                Enum.valueOf(enumClass, enumName); 
                return true; 
            } catch (IllegalArgumentException var3){
                return false; 
            }
        }
    }
} 
```

虚拟枚举.java：

```
package enumSample;

public enum DummyEnum {
    APPLE("APP"), 
    GOOGLE("GOOG"), 
    CAPITAL_ONE("COF");

    private String code; 
    DummyEnum(String code) {this.code= code;}
    public String code() {return code;}
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-19T12:54:33.190

`printEnumValue(EnumValues.generalInformation.NAME,EnumValues.generalInformation.AGE,EnumValues.generalInformation.PHONE);`
接收：

```
public static void printEnumValue(EnumValues.generalInformation en){
System.out.println(en.toString());
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-19T12:54:29.293

枚举就像类型一样使用：

```
static void printEnumValue(courseList generalInformation) { // how to receive enum  in this block 
```

像这样使用：

`printEnumValue(courseList.JAVA);`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-02T09:45:04.783

枚举在技术上是 Enum 类的后代。因此，如果您只想在方法中使用 Enum 的标准方法（例如 values()），请像这样传递参数： `static void printEnumValue(Enum generalInformation)` 看，您唯一需要更改的是大写字母 E。

# javascript - Ruby on Rails3：将rails代码执行到js.erb视图中，不起作用

> ID：14414535
> 
> 赞同：0
> 
> 时间：2013-01-19T12:49:19.257
> 
> 标签：javascript, ruby-on-rails-3, jquery

我想动态地做 kaminari 分页器

这段代码，处理点击事件到 Kaminari 链接

Kaminari.js

```
$(document).ready(function() {
  $(".paginator a").on("click", function() {
    $.getScript(this.href);
    return false;
  });
}); 
```

用户控制器：

```
def index
  @users = User.all(:order => "name")
  @users = Kaminari.paginate_array(@users).page(params[:page]).per(10)
end 
```

index.html.erb

```
<h1>Users</h1>
<div id="users-page">
  <%= render 'users'  %>
</div>

<%= paginate @users %> 
```

然后我为用户动态分页写了一个js.erb视图：

应用程序/视图/用户/index.js.erb

如果我只放像

```
alert("paging"); 
```

当我点击分页链接时，完美的警报消息。

但是如果我把 <%= ... %> 代码放在里面，这个javascript响应就不会执行。

```
alert("paging");
$("#users-page").html(<%= render 'users' %>) 
```

要么显示消息。

这可能是问题所在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T13:28:55.383

当存在 javascript 错误时会发生这种情况。在这种情况下，html() 函数中缺少引号。

```
$("#users-page").html("<%= escape_javascript(render ('users')) %>") 
```

# c - Linux fork() 命令

> ID：14414537
> 
> 赞同：-2
> 
> 时间：2013-01-19T12:49:29.367
> 
> 标签：c, linux, ubuntu, fork, printf

我写了一个程序

```
#include <stdio.h>
#include <unistd.h>

int main()
{
    int returnVal = fork();
    printf("Return Value: %i\n", returnVal);
    return 1;
} 
```

当我编译并运行时，我得到以下输出我只给出了一个 printf 语句，那么为什么我看到 2 个打印。如果我删除打印，则不会打印任何内容。

```
alwin@alwin-desktop:~/Projects/Nix$ ./a.out 
Return Value: 5547
Return Value: 0 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T12:53:03.937

你需要通过 man 命令:-)

查看：[`pid_t fork(void);`](http://linux.die.net/man/2/fork)

> 通过`fork()`复制调用进程创建一个新进程。新进程（称为子进程）**是调用进程**（称为父进程）的完全副本。

详细信息:: 首先您执行了创建子进程的代码。现在您有两个进程执行相同的代码。所以有两个打印语句，第一个是父进程，第二个是子进程。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-19T13:00:54.307

`printf`你程序中的语句被执行了`twice`，因为一旦fork成功，程序就被`two processes`（`child`和`parent`进程）控制了。所以这里的printf，是子进程和父进程都执行的

为了避免这种行为，最好在程序中使用 fork() 进行三种不同的条件检查

```
int pid;
if((pid = fork()) == -1 )
{ //fork unsuccessful 
 }
else if ( pid > 0)
{ //This is parent
 }
else
{//This is child
 } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-19T12:51:37.367

`fork`创建一个新进程。所以有两个进程执行下一条语句。父进程有`returnVal = 5547`（子进程的PID）和子进程`returnVal = 0`。

> 该`fork()`函数应创建一个新进程。新进程（子进程）应是调用进程（父进程）的精确副本

# svn - 简单的 SVN 提交后挂钩，用于将更改的文件导出到测试服务器

> ID：14414541
> 
> 赞同：3
> 
> 时间：2013-01-19T12:50:08.117
> 
> 标签：svn, shell, post-commit, post-commit-hook

使用 SVN，我目前正在使用测试服务器上的以下命令手动将存储库的内容导出到测试服务器（通过 SSH/Shell 登录后）：

```
svn export http://svn.domain.co.uk/project /home/user/public --force 
```

但是我想在使用相同命令但只导出已更改的文件（包括任何删除/重命名/移动）`post-commit`的目录下创建一个脚本，否则每次我提交时更新测试服务器需要很长时间。`hooks``svn export`

Stack Overflow 上的其他答案涉及使用与我无关的**命令**`svn up`，因为测试服务器副本**不是**导出，而是导出，或者涉及使用外部脚本（Python 或 Perl），这也不是我在找什么。一个简单明了的 bash 脚本就可以了；）****`working copy`****

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T02:17:04.387

你可以：

*   在链接问题的答案中使用第三个 URL 中的答案（或参见[第 2 版](http://www.electrictoolbox.com/subversion-export-changed-files-cli-v2/)）（两者都是 Bash）
*   捕获第一个主机 thomasfischer.biz，当它在线时（更简单的代码，只导出一个修订版，而不是范围，就像来自electrictoolbox 的 bash 一样）
*   使用 Electrictoolbox 的代码作为基础，但替换`svn diff`为`svnlook changed`（也在输出的后处理中）以更清晰的形式在单个修订中进行更改****

# c# - DataGridView 第一行编辑在复选框列中不起作用

> ID：14414543
> 
> 赞同：0
> 
> 时间：2013-01-19T12:50:21.637
> 
> 标签：c#, winforms, datagridview

我有一个像这张图片一样的datagridview：

![在此处输入图像描述](../Images/3233e8508cefb163d0087b3846487011.png)

我设置`ColumnsHeaderVisible`为`False`，第一列是`DataGridViewCheckBoxColumn`。

问题是我可以通过单击鼠标取消选中所有行，但第一行不可更改。

我无法选中/取消选中表格的第一行。

我想再说一遍，我不能用鼠标点击来做到这一点。

问题是什么？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T12:57:02.273

在数据边界之后，您应该在 DataBindingComplete 事件中调用

```
dataGridView.ClearSelection(); 
```

[数据绑定完成事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.databindingcomplete.aspx)

**编辑：**

您可以遍历 DataBindingCompleteEvent 中的所有行

```
private void dataGridView_DataBindingComplete(object sender,
    DataGridViewBindingCompleteEventArgs e)
{
    for (int i = 0; i < dataGridView.Rows.Count - 1; i++)
    {
       dataGridView.Rows[i].Cells[0].Value = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T14:13:59.383

```
 private void Form1_Load(object sender, EventArgs e)
        {
            dataGridView1.CellContentClick += new DataGridViewCellEventHandler(dataGridView1_CellContentClick);
        } 

private void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e)
        {
            if (e.ColumnIndex == 0)
            {
                dataGridView1[0, e.RowIndex].Value = !(bool)dataGridView1[0, e.RowIndex].Value;

            //Or
            //bool IsBool = false;
            //IsBool = bool.TryParse(dataGridView1[0, e.RowIndex].EditedFormattedValue.ToString(), out IsBool);
            //if (IsBool)
            //   dataGridView1[0, e.RowIndex].Value = IsBool;
            }
        } 
```

**编辑：**将代码放入`CellClick event`

```
 private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
        {
            if (e.ColumnIndex == 0)
            {
                //Find primaykey from dataTable   
                DataRow[] Rows = dataTable.Select("Id = '" + dataGridView1[1, e.RowIndex].EditedFormattedValue.ToString() + "'");
                Rows[0]["CheckBoxes"] = !bool.Parse(Rows[0]["CheckBoxes"].ToString());
            }
        } 
```

# mysql - 仅选择不同的“名称”并按其“最新日期”排序

> ID：14414550
> 
> 赞同：0
> 
> 时间：2013-01-19T12:51:05.480
> 
> 标签：mysql, sql, join, inner-join

我使用 MySQL 数据库来管理组织的捐款。捐赠者可以进行多次捐赠。因此，我有两个表：`donators`包含有关捐赠者的信息，并`donations`包含有关捐赠时间和金额的信息。两个表都通过`donatorID`.

我想读出每个不同捐赠者的信息。该列表应按最后一次捐赠的日期排序。我想出了下面的代码，但它使用第一次捐赠的日期而不是最后一次捐赠的日期。

如何使用每个捐赠者的最新捐赠日期？

```
SELECT
    DISTINCT(`donators`.`name`),
    `donators`.`city`,
    `donators`.`country`,
    `donators`.`website`
FROM
    `donators`
INNER JOIN
    `donations`
ON
    `donators`.`donatorID` = `donations`.`donatorID`
ORDER BY `donations`.`date` DESC 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T12:53:29.420

```
SELECT  a.*, b.max_DATE
FROM    Donators a
        INNER JOIN
        (
            SELECT  DonatorID, MAX(date) max_DATE
            FROM    Donations
            GROUP   BY DonatorID
        ) b ON a.DonatorID = b.DonatorID
ORDER   BY  b.max_DATE DESC 
```

如果您想`donation`根据最近的捐赠日期显示表格的记录，

```
SELECT  a.*, c.*
FROM    Donators a
        INNER JOIN Donations c
            ON a.DonatorID = c.DonatorID
        INNER JOIN
        (
            SELECT  DonatorID, MAX(date) max_DATE
            FROM    Donations
            GROUP   BY DonatorID
        ) b ON  c.DonatorID = b.DonatorID AND
                c.date = b.max_DATE
ORDER   BY c.date DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T12:56:55.460

假设您对`donations`表中的各个值不感兴趣，您可以使用以下查询：

```
SELECT
    `donators`.`name`,
    `donators`.`city`,
    `donators`.`country`,
    `donators`.`website`,
    MAX(`donations`.`date`) AS LastDate
FROM `donators`
INNER JOIN `donations` ON `donators`.`donatorID` = `donations`.`donatorID`
GROUP BY 
    `donators`.`name`,
    `donators`.`city`,
    `donators`.`country`,
    `donators`.`website`
ORDER BY
    LastDate DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T13:10:29.260

```
SELECT
    who.name
    , who.city
    , who.country
    , who.website
    , what.thedate
FROM donators who
JOIN donations what ON what.donatorID = who.donatorID
WHERE NOT EXISTS (
        SELECT * 
        FROM donations nx  
        WHERE nx.donatorID = what.donatorID
        AND nx.thedate > what.thedate
        )
ORDER BY what.thedate DESC
        ; 
```

# php - 什么是 no-debug-non-zts-20090626？

> ID：14414551
> 
> 赞同：12
> 
> 时间：2013-01-19T12:51:09.773
> 
> 标签：php

在`php.ini`我有：

```
extension_dir = "/usr/lib/php/extensions" 
```

但是，运行`php-config`给出：

```
--extension-dir  [/usr/lib/php/extensions/no-debug-non-zts-20090626] 
```

这个目录不存在，我在网上找不到任何关于它的信息。

任何人都可以对这个奇怪的目录有所了解吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-19T12:54:21.047

它是 PHP 的扩展目录，以影响扩展兼容性的一些因素命名：线程安全（非 zts）、调试（非调试）和引擎版本（20090626）。

我建议不要改变路径。如果它不存在，请创建它，并将您的扩展放在那里。它也是 PECL 安装扩展的地方。

# c# - 通过 TCP 发送图像时的损坏问题

> ID：14414556
> 
> 赞同：0
> 
> 时间：2013-01-19T12:51:43.233
> 
> 标签：c#, image, tcp, client-server, corruption

我已经尝试解决这个问题很长一段时间了，这是一个相当烦人的问题。基本上，我有一个 XNA 程序，它连接到服务器并从中下载图片以用作纹理 2D。在 LAN 中测试时一切正常，但是当我将程序发送给朋友通过 WAN 进行测试时，图像最终随机损坏。在大多数情况下，图像的开始就在那里，但之后它只是相同的颜色。我已经尝试了所有可以找到的解决方案，但似乎没有任何解决方法。这是我发送/接收图片的代码：

# 客户

```
 NetworkStream nws = tcpcl.GetStream();
        while (true)
        {
            byte[] buffer = new byte[1024*1024*5];
            int buffpos = 0;
            while (nws.DataAvailable == false) Thread.Sleep(50);
            while (nws.DataAvailable == true)
            {
                buffer[buffpos] = (byte)nws.ReadByte();
                buffpos++;
            }

            byte[] actData = new byte[buffpos];
            for (int I = 0; I < buffpos; I++)
            {
                actData[I] = buffer[I];
            }

            string message = ASCIIEncoding.ASCII.GetString(actData);
            string ID = message.Substring(0, 1);
            string data = message.Substring(1);
            if (actData[0] == 1)
            {
                int namelength = BitConverter.ToInt32(actData, 1);
                byte[] _name= new byte[namelength];
                Array.Copy(actData, 5, _name, 0, namelength);
                string name = ASCIIEncoding.ASCII.GetString(_name);

                int avatarlength = BitConverter.ToInt32(actData, 5 + namelength);
                byte[] avatar = new byte[avatarlength];
                Array.Copy(actData, 9 + namelength, avatar, 0, avatarlength)
                    ;
                File.WriteAllBytes("content/" + name + ".png", avatar);

                FileStream fs=  File.OpenRead("Content/" + name + ".png");
                User _user = new User(name, Texture2D.FromStream(GraphicsDevice, fs));
                fs.Close();

                User.AddUser(_user);
            }
        } 
```

# 服务器

```
 us.endpoint = new IPEndPoint(groupEP.Address, groupEP.Port);
                us.gameenabled = true;
                us.x = Game.spawnx;
                us.y = Game.spawny;

                byte[] player_avatar = Game.playerAvatar(us.Username);
                byte[] setup= new byte[5+player_avatar.Length];

                setup[0] = (byte)maxcls;
                BitConverter.GetBytes(player_avatar.Length).CopyTo(setup, 1);
                player_avatar.CopyTo(setup, 5);

                NetworkStream nws = us.clientsock.GetStream();
                nws.Write(setup, 0, setup.Length); 
```

除了效率，代码中是否有任何内容可能导致 WAN 上的上述问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-29T15:26:29.530

BrownishMonster 在评论中解决了这个问题。

> 两个字节数组是否相同？我认为可能发生的事情是某些字节被错误地解释为控制字符。解决这个问题的方法是使用 base64 编码：Convert.ToBase64String 或 Convert.FromBase64String。

# javascript - 在不同的 src="..." 文件中获取 Joose 2 类以在 MSIE 8 及更低版本中工作

> ID：14414560
> 
> 赞同：0
> 
> 时间：2013-01-19T12:51:58.797
> 
> 标签：javascript, internet-explorer, web, internet-explorer-8, joose

[此页面](http://www.shlomifish.org/fc-solve-temp/js-fc-solve/text/)为 Freecell 实现了基于 JavaScript 的在线求解器，但在我的 Windows XP 32 位虚拟机上的 Microsoft Internet Explorer 8（可能更低）中不起作用。它在同一虚拟机上的 Firefox 以及我的 x86-64 Mageia Linux 3 系统上的 Firefox 17.0.2 ESR、Opera 和 Google Chromium 上运行良好。

重现：

*   在交易编号中键入“2”。

*   按“填充”。

*   按“解决”。

MSIE 8 抛出一个合适的并声称“FC_Solve”没有定义，但它在[http://www.shlomifish.org/fc-solve-temp/js/web-fc-solve.js](http://www.shlomifish.org/fc-solve-temp/js/web-fc-solve.js)中，它包含在它上面并且使用脚本获取。

我希望我可以在该页面中放弃对旧版本 MSIE 的支持，但我希望它尽可能地防白痴，因为这是我创建在线、基于 JavaScript 的[求解器](http://fc-solve.shlomifish.org/)版本的动机的一部分，这是用 C 编写的。那是因为有些人要求我手动解决他们的交易，因为他们缺乏自己安装和运行我的求解器的专业知识。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T13:01:57.237

IE<=9 不支持`Uint8Array`libfreecellsolver.js 似乎使用的类型化数组（等）。这很可能会阻止它在*任何*不支持类型化数组的 IE 上运行。

除此之外，你想要`String`而不是`string`：

```
if (!string.prototype.repeat) {
string.prototype.repeat = function(count) { 
```

# ios - 弹出框显示在表格视图中长用户输入表单的顶部

> ID：14414561
> 
> 赞同：0
> 
> 时间：2013-01-19T12:52:03.857
> 
> 标签：ios, objective-c, ipad, uipopovercontroller

我已经查看了很多关于此的问题和答案，但似乎没有一个适合我正在做的事情。

我用表格视图制作了一个相当长的用户输入表单（问题的标签和文本视图在表格单元格中），当用户单击具有多选选项的文本视图（如下拉列表）时，我需要触发弹出窗口。弹出框似乎是从 tableviewcontroller 的顶部呈现的，我不确定如何计算放置它的位置，因此它位于单元格中单击的 textview 上方。单元格中可以有多个文本视图，因此我宁愿在选择单元格时不显示弹出框，这似乎是一个选项。

现在，当我单击表单底部的文本视图时，弹出框甚至都不可见。我知道我可以通过硬编码界限的反复试验找到正确的矩形，但必须有一种方法来一致地计算它。

我像这样触发弹出窗口：

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
    Boolean returnVal = YES;
    if(self.popOverController == nil){

        switch(textField.tag)
        {
            case 1:
                 [self fireDisciplinePopOver:[textField bounds]];
                returnVal = NO;
                break;

             case 2:  
                 etc...

             default:
                break;
        }
    }
    return returnVal;
}

-(void)fireDisciplinePopOver:(CGRect)rect
{
    UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil];
    ICAMDisciplineTableViewController *popoverTable = (ICAMDisciplineTableViewController*)[mainStoryboard instantiateViewControllerWithIdentifier: @"DisciplineController"];
    self.popOverController = [[UIPopoverController alloc]initWithContentViewController:popoverTable];
    self.popOverController.delegate = self;
    popoverTable.delegate = self;
    [self.popOverController presentPopoverFromRect:rect inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:30:13.867

我使用 segue 来呈现一个弹出框。segue 包括弹出框的锚视图。我所做的只是将弹出框固定在那里。我认为这应该对你有用。

# ruby-on-rails-3 - How to customize one column and display remaining in activeadmin

> ID：14414563
> 
> 赞同：17
> 
> 时间：2013-01-19T12:52:17.037
> 
> 标签：ruby-on-rails-3, activeadmin

I am using Active admin gem in my rails app. I added resources book which has 20 columns, now i need to customize only one column and print the remaining as it is. I tried below code

```
ActiveAdmin.register Book do
 index do
  column :description do 
    raw "<a class='view_description button'>View Description</a>"
  end
 end
end 
```

but which hides all the columns and show only description. Any help will be useful.

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-19T18:18:51.617

How about this?

```
ActiveAdmin.register Book do
  index do
    columns_to_exclude = ["name"]
    (Book.column_names - columns_to_exclude).each do |c|
      column c.to_sym
    end
    column :description do 
      raw "<a class='view_description button'>View Description</a>"
    end
   end
end 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-19T02:53:36.470

If you specify an index block, you need to put all the columns that you want to show, because you are replacing the "default" behaviour.

In your case, you need to add the other 19 columns with something like:

```
ActiveAdmin.register Book do
 index do
  column :one
  column :two
  column :three
  column :name
  column :title
  column :pages
  column :description do 
    raw "<a class='view_description button'>View Description</a>"
  end
 end
end 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-03-28T07:41:56.343

In my case, I want only rename the one column, I have done this way ->

```
index do
    column :one
    column :two  
    ....
    column "View Description", :description # This will change you column label **description** to **View Description**
end 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-07-16T21:32:24.063

I was curious about this question too. Here is what I found

```
 index do
    column :id
    active_admin_config.resource_columns.each do |attribute|
      column attribute
    end
  end 
```

[https://github.com/activeadmin/activeadmin/blob/5dbf9b690302ecb4ba0c0ce59b2fb4735c88b35c/lib/active_admin/views/index_as_table.rb#L261](https://github.com/activeadmin/activeadmin/blob/5dbf9b690302ecb4ba0c0ce59b2fb4735c88b35c/lib/active_admin/views/index_as_table.rb#L261)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-01-06T16:37:05.840

This also works when you want add or customize just a single column to the default list (based on an association which is for a belongs_to).

```
ActiveAdmin.register Book do
  index do
    column :publisher do |book|
      book.publisher.name
    end
    Book.column_names.each do |c|
      column c.to_sym
    end

  end
end 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-09-25T09:29:13.103

In General, this is quite easy..

```
ActiveAdmin.register Book do
  index do
    (Book.column_names - ["column_to_customize"]).each do |c|
      column c.to_sym
    end
    column :column_to_customize do 
      raw "<a class='view_description button'>View Description</a>"
    end
  end
end 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-02T15:14:10.187

This is pretty accurate to mimic original behavior in a generic way:

```
index do
  selectable_column

  Book.column_names.each do |c|
    # Filter foreign IDs and counter caches
    column c.to_sym unless c.ends_with?('_id') || c.ends_with?('_count')
  end

  Book.reflect_on_all_associations(:belongs_to).map(&:name).each do |association|
    column association
  end

  # Whatever custom thing you want

  actions
end 
```

# java - java聊天（服务器套接字/套接字）

> ID：14414567
> 
> 赞同：0
> 
> 时间：2013-01-19T12:52:49.167
> 
> 标签：java

我需要构建一个应用程序服务器模块 - 一个用于通信客户端的控制台应用程序原则聊天，客户端模块 - 一个 GUI 应用程序聊天，必须连接到服务器。问题是我需要设置连接用户数限制我从配置文件获得的限制在服务器启动时读取

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T12:54:48.263

计算成功接受的次数，如果达到限制就不再接受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:58:43.683

你为什么不把条件放在你的while循环中？

```
try {

        int numOfConnectionLimit = 10; // or read number of connection from that config file

        ServerSocket listenerServ = new ServerSocket(servPort);
        System.out.println("Waiting...." + servPort + " "
                + "" + listenerServ.getInetAddress().getHostAddress());
        while (connectArray.size() < numOfConnectionLimit) {

            sock = listenerServ.accept();
            connectArray.add(sock);
            System.out.println("Client connected from: " + sock.getLocalAddress().getHostName());
            addUserName(sock);

            SocketChatServerReturn chat = new SocketChatServerReturn(sock);
            Thread X = new Thread(chat);
            X.start();

        }
    } catch (Exception exSock) {
        System.out.println("IOException on socket listen: " + exSock);
        exSock.printStackTrace();
    }
} 
```

# google-chrome - texImage2D：宽度或高度超出范围，chrome 24

> ID：14414568
> 
> 赞同：5
> 
> 时间：2013-01-19T12:52:49.350
> 
> 标签：google-chrome, three.js, webgl

我刚刚开始研究 Three.js 提供的好东西。

现在，在尝试使用纹理渲染球体时，我遇到了问题。

我创建了一个光球[图像](http://www.in2systems.nl/wp-content/uploads/2013/01/PANO_20121214_103159_extraklein.jpg)并尝试将其加载到球体上。

我正在使用构建到 Three.js 中的 WebGL 渲染器（从 GIThub 获得最新的 zip）。

有两件事让我感到困惑：

1.  包含纹理的球体在 FF 和 Safari 中都可以完美渲染，但在 Chrome (24.0.1312.52) 中却没有。
2.  [当我尝试另一张图片时，来自github](https://github.com/kennydude/photosphere)上的 @kennydude 示例，它确实适用于所有三个测试的浏览器。

我得到的 Chrome 出现问题的唯一迹象是这个警告：

WebGL：INVALID_VALUE：texImage2D：宽度或高度超出范围

我的脚本完全基于@kennydude 的示例。我将错误一直追溯到 Three.js 文件 r。55 在 25330 行。这是我所能得到的。

为了让 webGL 在 Chrome 中运行，我禁用了黑名单（我的 GPU 出现在该列表中）。

有任何想法吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T15:20:02.673

尝试将图像大小调整为 2 的幂，例如 4096x1024。

# c++ - 解耦通知的两个类

> ID：14414572
> 
> 赞同：2
> 
> 时间：2013-01-19T12:53:06.287
> 
> 标签：c++, algorithm, events, poco

我只是盯着 Poco 框架。我有另一个底层框架，它已经在使用 Poco 框架并抽象了它的某些部分以使其更加容易。

我想用一个简单的场景来解释这个问题：
假设我的程序中有一个矩形对象。该形状`hit Testing`内部具有私有方法，并且在命中测试在一段时间内为真时，我不得不在另一个类（即我的`Fountain`类）中触发一个函数。

我不需要将任何形状的特定对象信息传递给`Fountation`类中的函数。我的框架已经为我提供了一些`NotifyEvent`和的功能`AddListener`。如果我采用这种方法，我的形状类中会有一个事件，该事件将在喷泉中订阅`Add Listener`（如果通过了形状，则为对象），并且从形状类中*通知事件。*

现在，使用 Poco 通知中心，我不会将形状对象引用传递给基础类，而是将`NotificationCenter`引用传递给第二个类。然后`fountain`该类将有一个观察者，并且观察者将从形状通知`postNotification()`
我在这里看到的两种方法之间的唯一区别是不传递特定的对象信息。
我只是一个新鲜的开发人员，尽可能地学习良好的编码实践，并不清楚这里的解耦。这两个类在这里是如何解耦的？（因为我没有传递`shape`对象而只是使用`notificationcenter`对象？）

编辑：添加到上述问题。假设我有 10 个其他类必须收听某个通知，那么我还必须将 的引用传递`Notification Center`给所有这些类吗？只有这样我才能在我的课程中为通知中心添加一个观察者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T13:06:36.237

基本上是的。如果`Fountain`类只知道`NotificationCenter`，那么它不再与形状（`Rectangle`或其他）耦合。这假设形状发布的通知也不依赖于触发它的对象。

编辑：对您的编辑的答复是肯定的，您需要`addObserver`使用每个需要通知的对象调用该方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T13:15:36.913

你应该做的是将消息发送和接收过程解耦成一个观察者 - 监听器结构。这称为**观察者模式**。[您可以在此处](http://en.wikipedia.org/wiki/Observer_pattern)阅读有关此模式的更多详细信息。这将使您免于处理多个引用和事件，以及每次需要将通信添加到另一个类时考虑消息发送/接收实现。

您可以在设计模式一书中找到有关设计模式的更多信息[。可重用的面向对象软件的要素](http://www.amazon.de/Patterns-Elements-Reusable-Object-Oriented-Software/dp/0201633612/ref=sr_1_1?ie=UTF8&qid=1358601484&sr=8-1)。

# c - 用两个指针初始化数组

> ID：14414574
> 
> 赞同：3
> 
> 时间：2013-01-19T12:53:12.990
> 
> 标签：c, arrays

```
int main() {
    int **matrix = {
        {1, 3, 2, 4},
        {3, 2, 4, 5},
        {9, 3, 2, 1}
    };

    getchar();
} 
```

1.  为什么这会显示“标量初始化器周围的大括号”之类的警告？
2.  为什么我需要用多个指针初始化多维数组？（如果你能给我一些非常容易理解的解释……）
3.  如果我想使用 int matrix[3][4] 而不是 int **matrix ...如果我想传递这个数组，函数参数是什么？`int[][]`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T12:54:00.217

`int **`是指针类型而不是数组类型。指针不是数组。使用类型`int [3][4]`。

您不能将数组传递给函数，但可以将指针传递给数组。将指针传递给数组 4 的函数声明`int`将是：

```
void f(int arr[3][4]); 
```

或者

```
void f(int arr[][4]); 
```

或者

```
void f(int (*arr)[4]); 
```

这三个声明是等价的。

# android - 带有 9-Patch 背景的按钮不包装内容

> ID：14414577
> 
> 赞同：4
> 
> 时间：2013-01-19T12:53:42.280
> 
> 标签：android, button, size, custom-controls

好的，我有一个按钮，它使用一个选择器作为其背景。我将宽度和高度设置为 wrap_content。内容是我设置的一些文字。我希望按钮像原生按钮一样围绕文本调整大小，但按钮很大，基本上看起来与其源图像一样大。按钮图像是九个补丁图像，按钮 xml 位于相对布局内。我在这里想念什么？

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
        <item android:state_focused="true" android:state_pressed="false" android:drawable="@drawable/holo_btn" />
        <item android:state_focused="true" android:state_pressed="true" android:drawable="@drawable/holo_btn" />
        <item android:state_focused="false" android:state_pressed="true" android:drawable="@drawable/holo_btn" />
        <item android:drawable="@drawable/holo_btn" />
</selector>

<Button android:id="@+id/btnTaskPriorityLow" 
            android:paddingLeft="@dimen/paddingSmallButton" android:paddingRight="@dimen/paddingSmallButton"
            android:text="@string/strTaskPriorityLow"
            android:layout_width="wrap_content" android:layout_height="wrap_content"
            android:layout_below="@id/textViewCalColor"
            android:layout_toRightOf="@+id/textViewPriority"
            android:layout_marginTop="@dimen/marginTopAppt"
            android:background="@drawable/button_holo_sel"/> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-19T13:12:01.567

如果我理解你有一个巨大的 9-Patch 作为背景。

AFAIK，9-Patch 可以扩展但不能减少。因此，您可能必须编辑 9-Patch 以使其尽可能小。通常您可以将中心可拉伸区域减少到一个像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T12:57:07.600

在这里，您将按钮**layout_width 声明为包装**内容，因此它将宽度作为您在背景中设置的图像。

```
wrap_content 
```

将 View 的大小设置为 wrap_content 将强制它仅扩展到足以包含它所包含的值（或子控件）的程度。对于控件——如文本框 (TextView) 或图像 (ImageView)——这将包装正在显示的文本或图像。对于布局元素，它将调整布局大小以适应作为其子元素添加的控件/布局。

所以要克服这个问题，总是使用九个补丁图像作为背景或更改 dp 中的 layout_width。（例如 100dp）

# c - 使用 Erathothenes 筛子的素因子

> ID：14414578
> 
> 赞同：-3
> 
> 时间：2013-01-19T12:53:42.617
> 
> 标签：c, prime-factoring

尝试使用 Erathothenes 筛子打印一个数的质因数，而不是找到这些因数，然后检查每个因数是否是质数。

```
 #include<stdio.h>
 #include<math.h>

void primeFactors(int num)
{
    int factors[100];

    int i,j=0,u,k=0,l;
    u=sqrt(num);

    for(i=0;i<100;i++)
        factors[i]=1;

    for(i=2;i<=u;i++)
    {
        if(factors[i]==0)
            continue;

        if(num%i==0)
        {
            factors[j]=i;
            l=factors[j];
            k=2*factors[j];
            j++;

            while(k<=u)
            {
                if(factors[k]==0)
                    continue;
                factors[k]=0;
                k+=l;
            }
        }
    }

    for(i=2;i<=u;i++)
        if(factors[i]!=1)
            printf("%d\n",factors[i]);

}

int main()
{
    int n=797;
    primeFactors(n);
    return 0;
} 
```

在 Xcode 上运行它既不显示任何错误也不打印任何东西。我无法弄清楚这个问题。为什么不打印这个？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T14:00:37.660

这部分：

```
while(k<=u)
{
    if(factors[k]==0)
        continue; 
```

看起来很像一个无限循环。

# java - Java将字符串拆分为数组

> ID：14414582
> 
> 赞同：105
> 
> 时间：2013-01-19T12:54:17.533
> 
> 标签：java, string, split

我需要有关`split()`方法的帮助。我有以下内容`String`：

```
String values = "0|0|0|1|||0|1|0|||"; 
```

我需要将值放入数组中。有 3 个可能的字符串：“0”、“1”和“”

我的问题是，当我尝试使用`split()`：

```
String[] array = values.split("\\|"); 
```

我的值只保存到最后一个 0。看起来像部分“|||” 被修剪。我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2013-01-19T13:00:21.170

这种行为在[`String.split(String regex)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)（强调我的）中有明确记录：

> 此方法的工作方式就像通过使用给定表达式和零限制参数调用双参数拆分方法一样。因此，**尾随的空字符串****不包含**在结果数组中。

如果您希望包含那些尾随的空字符串，则需要对[`String.split(String regex, int limit)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)第二个参数 ( ) 使用负值`limit`：

```
String[] array = values.split("\\|", -1); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-19T13:00:47.287

试试这个

```
String[] array = values.split("\\|",-1); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-10-03T15:14:25.963

考虑这个例子：

```
public class StringSplit {
  public static void main(String args[]) throws Exception{
    String testString = "Real|How|To|||";
    System.out.println
       (java.util.Arrays.toString(testString.split("\\|")));
    // output : [Real, How, To]
  }
} 
```

结果不包括“|”之间的空字符串 分隔器。要保留空字符串：

```
public class StringSplit {
  public static void main(String args[]) throws Exception{
    String testString = "Real|How|To|||";
    System.out.println
       (java.util.Arrays.toString(testString.split("\\|", -1)));
    // output : [Real, How, To, , , ]
  }
} 
```

有关更多详细信息，请访问此网站：[http ://www.rgagnon.com/javadetails/java-0438.html](http://www.rgagnon.com/javadetails/java-0438.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T12:58:28.283

这是意料之中的。有关. [_](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29) _`split`

```
Splits this string around matches of the given regular expression. 
```

此方法的工作方式就像通过使用给定表达式和零限制参数调用双参数 split(java.lang.String,int) 方法一样。**因此，尾随的空字符串不包含在结果数组中。**

# javascript - ajax/jquery - 打开简单弹出窗口的脚本

> ID：14414588
> 
> 赞同：1
> 
> 时间：2013-01-19T12:54:29.730
> 
> 标签：javascript, jquery, ajax, popup, window

我需要打开一个弹出窗口的脚本，比如灯箱。但不是图像

它必须从 html 文件加载视频播放器代码，并将视频文件 ID 发送到此代码

html中的播放器代码：

```
<iframe src="http://site.com/embed/video file ID" style="width: 800px; height: 450px; border: none; background-color: #000;" frameborder="0"></iframe> 
```

所以我需要脚本来打开带有上面代码的弹出窗口。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T13:01:52.883

[Fancybox](http://fancybox.net/)在这方面做得非常好。第一版可免费使用。

html:

```
<a class="forpopup" href="http://www.example?iframe">This goes to iframe</a> 
```

JS：

```
$('a.forpopup').fancybox(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T13:02:43.040

参见[jQuery ColorBox](http://www.jacklmoore.com/colorbox)，在[Demos Page](http://www.jacklmoore.com/colorbox/example1/)中通过 AJAX、Flash 和视频示例找到外部 HTML 内容的**Other Content Types**部分。

一个简单的使用示例：

```
// Format:
$(selector).colorbox({key:value, key:value, key:value});

// Examples:
// Image links displayed as a group
$('a.gallery').colorbox({rel:'gal'});

// Ajax
$('a#login').colorbox();

// Called directly, without assignment to an element:
$.colorbox({href:"thankyou.html"});

// Called directly with HTML
$.colorbox({html:"<h1>Welcome</h1>"});

// ColorBox can accept a function in place of a static value:
$("a.gallery").colorbox({rel: 'gal', title: function(){
    var url = $(this).attr('href');
    return '<a href="' + url + '" target="_blank">Open In New Window</a>';
}}); 
```

# vb.net - vb2010中的文本框命名

> ID：14414591
> 
> 赞同：0
> 
> 时间：2013-01-19T12:54:51.460
> 
> 标签：vb.net

我正在 vb2010 中创建一个需要大量文本框的应用程序。将每个文本框重命名为具有唯一标识符非常耗时。例如，将 TextBox1 重命名为 txtName1 是一个漫长的过程，因为它们有很多。

有什么方法可以加快速度，以提供具有唯一 ID 号的用户友好名称？或者这只是一个通过每一个犁的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T17:34:03.300

始终尝试为控件分配一个有意义的名称。如果你按照这种方法，你会发现电脑帮不上忙，所以需要手动完成。就您而言，它如何知道`TextBox1`需要识别一个`name`？

`txtName1`对于控件来说也不是一个好名字，因为**a）**它没有告诉开发人员这个名字是谁，**b）**是什么`1`？它是指名字的第一部分，即名字吗？还是列表中第一个人的名字？正确的名称将类似于`txtCustomerFirstName`或`txtFirstCustomerFullName`（分别用于**a）**和**b）**），除非您有其他考虑，例如保持控件的名称尽可能短、匹配数据库字段名称或其他原因。

**资料来源：**我开发了一个企业级的保险管理应用程序，包含 1000 多个文本框，目前我是任何问题的主要支持联系人。根据我的经验，控件的命名*不是*您大部分时间花费的地方。

作为旁注，如果您通过设计器手动重命名控件，它也会重命名代码中的所有用法。它大大减少了需要完成的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T14:09:49.370

尝试：编辑，因为我现在在 PC 前面；）考虑上面的答案确实很好。无论如何，这里有一些事情要知道。当您在 Excel 工作表中添加文本框或任何其他控件时，它会变成`Embedded`如图所示的类型。

![在此处输入图像描述](../Images/829b0b355eec9e52387abe8d1b1ef573.png)

> [通常，如果您想检查 Control 是否为**Textbox**，我们可以使用**17**，它表示**msoTextBox**，即 TextBox 的**mso 形状类型枚举**。然而，那些嵌入的**Form 类型控件（Forms 2.0）**是 Shapes 并且不会用不同的值区分每种类型，而是常见的**12**，类型 enum 代表**msoMixedShapes**。以下第二个代码适用于 a `FORM`，但是对于 Excel 工作表形状（文本框）很难得到相同的解决...单击链接以查看所有**MsoShapeType Enumeration**。](http://msdn.microsoft.com/en-us/library/office/aa432678%28v=office.12%29.aspx)

如果您真的希望为工作表中的形状文本框赋予有意义的名称，这是一种方法：

```
Option Explicit

Sub reNameMeaningfully()
Dim shp As Shape
Dim arrNames As Variant
Dim i As Integer

    arrNames = WorksheetFunction.Transpose(Sheets(1).Range("D2:D7").Value)
    '-- assuming that you have exact number of names for the exact number of controls

    For i = LBound(arrNames) To UBound(arrNames)
        Set shp = Sheets(1).Shapes(i)
        '-- we can't check Type here. So we check if default-name begins with Text
        If shp.Name Like "Text*" Then
            shp.Name = arrNames(i)
        End If
    Next i

End Sub 
```

输出：

![在此处输入图像描述](../Images/46fb68a4c988d8e08e838b217970901a.png)

如果这些 tecboxes 在 a`Form`那么试试这个：您可以使用相同的逻辑将所有名称放在一个范围内，然后遍历该范围；）

```
Dim Cont as Control
Dim i as integer
i = 1
 For Each Cont In Me.Controls
     If TypeName(Cont) = "TextBox" Then 
          Cont.name = "txt" & i '-- Rename 
     End If 
 Next Cont 
```

# javascript - 如何在 Google Drive Picker 上显示文件夹而不显示私人文件？

> ID：14414593
> 
> 赞同：2
> 
> 时间：2013-01-19T12:55:22.867
> 
> 标签：javascript, google-drive-api

我是 Google Picker 的新手，我用它玩了一点。我正在一个项目中工作，您可以选择一个文件，但我不想在选择器中显示私人文件，也不想显示文件夹而不是显示所有文件而没有顺序。

我有这个代码：

```
<script type="text/javascript">
        // Use the Google Loader script to load the google.picker script.
        google.setOnLoadCallback(createPicker);
        google.load('picker', '1', {'language':'es'});

        // Create and render a Picker object for searching images.
        function createPicker(){
            window.picker = new google.picker.PickerBuilder().
                addView(google.picker.ViewId.DOCS).
                setCallback(function(data){
                    if (data[google.picker.Response.ACTION] == google.picker.Action.PICKED){
                        var fileId = data.docs[0].id;
                        $.post('/poststatus.php', { q: fileId,  type: 'google' }, function(r){ $('#cuadro').html(r); });
                    }
                }).
                build();
        }
        function opengoogle(){ window.picker.setVisible(true); } 
```

所以当用户点击一个按钮时，函数 opengoogle() 就会启动。我找到了一个`DocsView.setIncludeFolders(boolean)`显示文件夹的函数 ( )，但我不知道如何使用它。

谢谢你，阿德里亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T05:16:31.320

你需要更多类似的东西：

```
var view = new google.picker.View(google.picker.ViewId.DOCS);
view.setIncludeFolders(true);
var picker = new google.picker.PickerBuilder().addView(view)
// ... build as normal 
```

# php - 从前一个日期获取 X 个月并返回

> ID：14414596
> 
> 赞同：0
> 
> 时间：2013-01-19T12:55:35.433
> 
> 标签：php, date, strtotime

下面的代码给了我从今天的日期和回来的 X 个月，但我想从 2012 年 11 月 1 日获得 X 个月的日期，然后回来。如何才能做到这一点？

```
// $nrOfMonths can be 1, 3 and 6

function GetIncidents(nrOfMonths) {

    $stopDate = strtotime('-' . $nrOfMonths .' months');

    ... rest of the code ...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T13:00:52.153

你可以这样做：

```
$stopDate = strtotime('1st November 2012 -' . $nrOfMonths .' months'); 
```

虽然，我更喜欢这种语法：

```
$stopDate = strtotime("1st November 2012 - {$nrOfMonths} months"); 
```

因此，您的代码应遵循以下模式：

```
function GetIncidents(nrOfMonths) {

    //your preferred syntax!

    //the rest of your code

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T13:02:46.747

使用`DateTime`和`DateInterval`类来实现这一点。

```
$date = new DateTime('November 1, 2012');
$interval = new DateInterval('P1M'); // A month

for($i = 1; $i <= $nrOfMonths; $i++) {
    $date->sub($interval); // Subtract 1 month from the date object
    echo $i . " month(s) prior to November 1, 2012 was " . $date->format('F j, Y');
} 
```

# objective-c - 默认 iPhone 电话簿联系人 通知我的 APP 默认联系人应用程序中的某些联系人是否被修改

> ID：14414600
> 
> 赞同：1
> 
> 时间：2013-01-19T12:56:10.617
> 
> 标签：objective-c, cocoa-touch, ios4

默认iPhone电话簿联系人通知我的APP默认联系人应用程序中的某些联系人是否被修改，以及是否修改了联系人修改发生的位置。

谁能为此建议我一些逻辑或API。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T13:36:07.210

**您可以通过ABAddressBookRegisterExternalChangeCallback** 获取地址簿的任何更改[这是官方文档，请参考。](http://developer.apple.com/iphone/library/documentation/AddressBook/Reference/ABAddressBookRef_iPhoneOS/Reference/reference.html#//apple_ref/c/func/ABAddressBookRegisterExternalChangeCallback)

# html - 基础黑暗主题

> ID：14414601
> 
> 赞同：1
> 
> 时间：2013-01-19T12:56:16.393
> 
> 标签：html, web, responsive-design, zurb-foundation

我想通过 zurb 为基础创建一个深色主题，具有深色背景和浅色文字。我找不到更改项目设置的方法，所以我一直在编辑生成的 CSS 文件，这并不理想。我希望我可以将 sass 文件编辑为具有深色主题，但我希望有一些我可以做的配置来代替所有这些。

设置文件的相关部分，我不知道如何使背景变暗...

```
// Colors Settings

// $mainColor: #2ba6cb;
// $secondaryColor: #e9e9e9;
// $alertColor: #c60f13;
// $successColor: #5da423;
// $txtColor: #222;
// $highlightColor: #ffff99;
// $black: #000;
// $white: #fff;
// $shinyEdge: rgba(#fff, .5);
// $darkEdge: rgba(#000, .2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:00:41.573

您正在寻找正确的地方。您只需要取消注释这些行，例如：

```
// Colors Settings

// $mainColor: #2ba6cb;
// $secondaryColor: #e9e9e9;
// $aler... 
```

应该是这样的：

```
// Colors Settings

$mainColor: #000000;
// $secondaryColor: #e9e9e9;
// $aler... 
```

关于更改背景颜色，我认为您必须将其作为 app.scss 的一部分进行，我所做的是将其他颜色设置添加到我的 settings.scss 文件中，然后在 app.scss 中使用它们：

```
// Colors Settings

$background:#000000;
$mainColor: #000000;
// $secondaryColor: #e9e9e9;
// $aler...

body,html {
    background:$background;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:08:38.603

你有正确的区域。

如果您查看 _global.scss，您可以在第 7 行看到：

```
body { background: $white; font-family: $bodyFontFamily; font-weight: $bodyFontWeight; font-style: $bodyFontStyle; font-size: ms(0); line-height: 1; color: $bodyFontColor; position: relative; -webkit-font-smoothing: $fontSmoothing; } 
```

基本上背景被设置为`$white;`

`$white`然后出现在 scss 文件的许多不同区域中，因此您可以

1.  将变量更新`$white`为深色并查看它的外观
2.  为颜色创建一个新变量`$dark`并更新第 7 行以引用新变量。

# php - 使用 PHP 从 Instagram 获取基本信息

> ID：14414606
> 
> 赞同：8
> 
> 时间：2013-01-19T12:56:36.160
> 
> 标签：php, instagram

```
$url = 'https://api.instagram.com/v1/users/XXXX?access_token=XXXX';
echo json_decode(file_get_contents($url))->{'followed_by'}; 
```

我正在使用此代码，但我不明白问题所在。我是 PHP 新手，所以请原谅新手的错误。我试图让“followed_by”自行显示。我已经设法让 Facebook 的“赞”和 Twitter 的追随者以这种方式显示。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2016-02-11T08:17:05.260

如果您需要在不登录的情况下获取关注者数量（或其他字段），Instagram 可以很好地将它们放在页面源中的 JSON 中：

```
$raw = file_get_contents('https://www.instagram.com/USERNAME'); //replace with user
preg_match('/\"edge_followed_by\"\:\s?\{\"count\"\:\s?([0-9]+)/',$raw,$m);
print intval($m[1]);

//returns "123" 
```

希望有帮助。

**2016 年 5 月 24 日**更新为更能容忍 JSON 中的空格。

**2018 年 4 月 19 日**更新为使用新的“edge_”前缀。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T12:58:55.177

根据[Instagram API Docs](http://instagram.com/developer/endpoints/users/)，`followed_by`is a child of `counts`which is a child of `data`.

```
https://api.instagram.com/v1/users/1574083/?access_token=ACCESS-TOKEN 
```

回报：

```
{
"data": {
    "id": "1574083",
    "username": "snoopdogg",
    "full_name": "Snoop Dogg",
    "profile_picture": "http://distillery.s3.amazonaws.com/profiles/profile_1574083_75sq_1295469061.jpg",
    "bio": "This is my bio",
    "website": "http://snoopdogg.com",
    "counts": {
        "media": 1320,
        "follows": 420,
        "followed_by": 3410
    }
} 
```

因此，以下应该有效。

```
<?php 
$url = 'https://api.instagram.com/v1/users/XXXX?access_token=XXXX';
$api_response = file_get_contents($url);
$record = json_decode($api_response);
echo $record->data->counts->followed_by;

// if nothing is echoed try
echo '<pre>' . print_r($api_response, true) . '</pre>';
echo '<pre>' . print_r($record, true) . '</pre>';
// to see what is in the $api_response and $record object 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-26T02:21:01.700

尝试这个..

```
<?php 
$instagram = "https://api.instagram.com/v1/users/xxxxx/?access_token=xxxxx";
$instagram_follows = json_decode(file_get_contents($instagram))->data->counts->followed_by;
echo $instagram_follows;
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-04T14:46:02.397

```
function get_https_content($url=NULL,$method="GET"){
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_VERBOSE, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:31.0) Gecko/20100101 Firefox/31.0');
    curl_setopt($ch, CURLOPT_URL,$url);
    return curl_exec($ch);
}

function ig_count($username) {
    return json_decode(get_https_content("https://api.instagram.com/v1/users/1460891826/?client_id=ea69458ef6a34f13949b99e84d79ccf2"))->data->counts->followed_by;
} 
```

这是我的代码:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-30T12:03:11.430

试试这个...

```
$url = 'https://api.instagram.com/v1/users/USER_ID?access_token=YOUR_TOKEN';
$api_response = file_get_contents($url);
$record = json_decode($api_response);

echo $followed_by = $record->data->counts->followed_by; 
```

[点击](http://hkpatel201.blogspot.in/2015/07/login-using-Instagram.html)获取用户的所有信息

# c - 在 Linux 中使用 system("command")

> ID：14414613
> 
> 赞同：2
> 
> 时间：2013-01-19T12:57:15.250
> 
> 标签：c, linux, web-crawler, wget

**是否建议使用system()**从 C 中的 C 程序调用 shell 命令？

我想用 C 开发一个网络爬虫并想使用**wget**从 URL 中获取内容？我应该使用**system(" wget ...")**吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-19T13:08:08.723

不管是哪种编程语言，调用系统 shell 确实应该是最后的手段，因为：

*   它几乎肯定不会在其他操作系统下工作。
*   错误处理实际上很复杂（您需要捕获和解析错误流）。通常这只是没有完成，所有错误都被忽略。
*   如果您将这样的应用程序移植到另一个平台，则所有调用的工具也必须移植。

`wget`当我们将一些讨厌的 perl 代码移植到移动设备时，同样是一个问题。虽然只是从 Linux 到 Linux，但我们发现“标准”`wget`有一些 BusyBox 不支持的开关，因此也需要移植`wget`，后来甚至`grep`好像 perl 没有自己的模式搜索。在那之后，我完全相信最好不要。

# sql - 获取两列之和的行数并将这些行分组

> ID：14414616
> 
> 赞同：0
> 
> 时间：2013-01-19T12:57:34.277
> 
> 标签：sql, codeigniter, count

对不起，如果标题有点奇怪......但基本上我想做的是......我会先做一个例子然后我会发布我的代码

**TableA**有这些列

*   d-id (INT)
*   内容（文本）

**TableB**有这些列

*   d-id (INT)
*   差异内容（文本）

并且有一个**TableC**有 column `d-id`。

现在我正在尝试从`content`and`dif_content`和`SUM`这两列中获取行数，同时根据`d-id`

**TableC**有`main_content`我想要的数量，`content`就像`dif_content`这样：

*   一行(1)
*   另一排(5)
*   又一排(3)

`content`行中的数字是该行的`dif_content`行数。

这是我现在拥有的代码

```
 $query = $this->db->query(
            'SELECT TableA.d-id , TableB.d-id , count(TableA.content) as num_content , count(TableB.dif_content) AS num_dif_content 
             FROM TableA , TableB
             WHERE TableA.d-id = TableB.d-id
             SUM(num_content + num_dif_content) as content_total' 
```

为了更详细，我正在使用 Codeigniter，所以如果你有办法使用 Active Record 来做到这一点，那就太好了。

这是我做过的最复杂的查询。（这几年我一直在编程）

如果您无法理解我想要做什么，我深表歉意，如果您需要了解更多信息，请发表评论，我会很乐意编辑帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T14:25:23.243

嗯，也许我没有清楚地理解你的问题。如果我是对的，这可能是您需要的查询：

```
SELECT 
    *, count_t1 + count_t2 as count_all
FROM
    (SELECT d_id, COUNT(content) as count_t1 FROM TableA GROUP BY d_id) t1
    LEFT JOIN
    (SELECT d_id, COUNT(dif_content) as count_t2 FROM TableB GROUP BY d_id) t2
    ON t1.d_id = t2.d_id; 
```

您可以使用此[sqlfiddle 链接进行预览](http://www.sqlfiddle.com/#!2/a97ec/4/0)

# django - 哪些是练习 Django 部署的最佳网络免费主机？

> ID：14414619
> 
> 赞同：10
> 
> 时间：2013-01-19T12:57:48.880
> 
> 标签：django, deployment, host

我是 Django 的初学者，但我想在线查看我的项目而无需支付主机费用，因为它只是为了学习部署过程。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-19T13:53:20.497

尝试[pythonanywhere](http://www.pythonanywhere.com)。imo，它是您可以找到的最好的免费 django 云主机之一

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-19T19:28:45.200

[Heroku](http://www.heroku.com/)是免费的。它使用部署方式`git`，因此您还将在此过程中了解到这一点。

[我建议在Github](http://www.github.com)上设置一个帐户——公共存储库也是免费的——并按照教程为您的应用程序设置存储库。然后学习如何将该 repo 部署到 Heroku。

两个站点的文档都很棒。

# php - 将多个文本框值传递给控制器 代码点火器

> ID：14414621
> 
> 赞同：0
> 
> 时间：2013-01-19T12:58:07.063
> 
> 标签：php, javascript, jquery, ajax, codeigniter

我是[Codeigniter](http://ellislab.com/codeigniter)的新手，所以我不知道该怎么做。
实际上，我的视图页面有五行，我通过 for 循环生成，其中每行包含两个选择框和两个输入框。我不知道如何首先在**jQuery**中获取这些值，然后传递给控制器​​。实际上我知道如何从一个简单的文本框中获取值，但是因为我在循环中生成它们并给它们一个单独的 id，所以我不知道如何在 jQuery 中获取值然后传递给控制器​​。

这是我的看法

```
 <tr>
        <th>Category:</th>
    <th>Items:</th>
       <th>Selling Price:</th>
        <th>quantity:</th>

</tr>

    <?php for ($i = 0; $i < 5; $i++) {

    ?>
    <tr> //Categories
<td><?php echo form_dropdown('cat_id', $records2, '#', 
        "id='category_".$i."'  onchange='getItems(this.value,".$i.")' ");?>
                        </td>
          <!-- Items -->

  <td>form_dropdown('item_id', $records3, '#', "id='items_".$i."'"); ?> </td>
    <!-- end of Items -->

    <td> <?php echo form_input($price); ?></td>

<td><?php echo form_input($quantity); }?></td> 
```

项目选项基于类别选择，这意味着如果我从类别中选择某个选项，则针对类别的项目将显示在第二个选择框中。

这是我的 Javascript，用于前两个选择框的功能

```
 <script type="text/javascript">

function getItems(category_id,index) {

       $("#items_" + index + " > option").remove(); 

    $.ajax({
        type: "POST",
        url: "stockInController/get_Items/"+category_id, 
        success: function(items) 
        {
            $.each(items,function(item_id,item_name) 
            {
                var opt = $('<option />'); 
                opt.val(item_id);
                opt.text(item_name);
                $('#items_'+ index).append(opt); 
            });
        }

    });
}
 </script> 
```

现在问题就在这里；我想从所有行中获取值，然后传递给控制器​​。
这是用于捕获然后将值发送到控制器的 javascript

```
 <script type="text/javascript">
 $('#btns').click(function() { //  $("#form").serialize() 
```

在这里，我做的不对，首先我不知道如何在这里获取项目和类别的值，然后另一件事是如何能够获取多个文本框值，因为有五行，以及其中的文本值已填写 将发送

```
var item_id = $('#items').val();   
var item_id = $('#items').val();

var price = $('#price').val();
var quantity = $('#quantity').val();

var form_data = {
        cat_id: $('#cat_id').val(),

        quantity: $('#quantity').val(),
        item_id: $('#items').val(),

};

$.ajax({
    url: "<?php echo site_url('salesController/addSales'); ?>",
    type: 'POST',
    data: form_data,
    dataType: 'json',
    success: function(msg) {
        if(msg.res == 1)
        {

            alert("true");
        }
        else{
            alert("false");          
          }

    }
});

return false;
    });

</script> 
```

这是我的控制器，我也不知道在这里获取多个值。
这是我正在做的代码，我知道我错了，但我不知道如何改正

```
 $data = array(
            'cat_id' => $this->input->post('cat_id'),

            'item_id' => $this->input->post('item_id'),
            'price' => $this->input->post('sales_date'),
            'quantity' => $this->input->post('sales_bill_no'),

            ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T13:10:12.377

不了解php，但也许您可以在请求中发送多个参数，例如：

```
 var cat_id = $('#cat_id').val();
   var quantity = $('#quantity').val();
   var item_id = $('#items').val();

$.ajax({
url: "<?php echo site_url('salesController/addSales'); ?>",
type: 'POST',
data: 'cat_id='+cat_id+'&quantity='+quantity+'&item_id='+item_id,
success: function() {

} 
```

});

在 groovy 中我会像解析它们一样

```
params.cat_id
params.item_id etc... 
```

也许这可以帮助您或有人帮助您

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T13:07:03.387

在您的情况下，设置`name`您的`input`和`select`元素，如`cat_ids[]`、和。请注意这些名称末尾的 （我已将名称更改为复数形式，这只是名称约定:)）。`item_ids[]``prices[]``quantities[]``[]`

在控制器`$this->input->post('cat_ids')`中将返回一个名为并包含所有 id的**数组**，这对于, , ... 是相同的，您可以使用这样的循环遍历所有发布的值：`cat_id``$this->input->post('item_ids')``$this->input->post('prices')``for`

```
for($i = 0; $i < count($data['cat_id']); $i++)
{
    $yourItem = array (
        'cat_id' => $data['cat_id'][$i],
        'item_id' => $data['item_id'][$i],
        'price' => $data['price'][$i],
        'quantity' => $data['quantity'][$i],
    );
} 
```

要在 Ajax 中使用 jQuery 发送表单数据，您可以设置您`form_data=$('your-form-id').serialize();`的值，而不是手动构建它的值 :)

# qt4 - 将分隔符添加到 QTableView 的操作？

> ID：14414633
> 
> 赞同：3
> 
> 时间：2013-01-19T12:58:57.720
> 
> 标签：qt4, qtableview

在`QMenu`有`addSeparator()`可用的功能时，QTableView 中的等价物是什么？

我只看到添加动作的功能（即`addAction()`），当我将上下文菜单模式设置为时，我应该如何添加分隔符`ActionContextMenu`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T22:38:40.160

```
QAction *separator = new QAction(this);
separator->setSeparator(true);
addAction(separator); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T06:43:36.277

我认为您可以设置`ContextMenuPolicy`并`Qt::CustomContextMenu`使用分隔符构建自定义菜单`QWidget::actions()`。

# c++ - 无法打开包含文件：except.h

> ID：14414636
> 
> 赞同：0
> 
> 时间：2013-01-19T12:59:23.417
> 
> 标签：c++, windows, winapi, sdk

编辑：感谢 Hans Passant 解决，非常感谢！:)

由于以下错误，我的 Win32 应用程序将无法编译：

```
 Error 1: error C1083: Cannot open include file: 'excpt.h' 
```

我正在使用 VS Express for Desktop，并且手动安装了 Windows 7 SDK。在我的例子中， SDK 路径`C:\Program Files x86)\Microsoft SDKs\Windows\v7.0`包含在 Additional Include Directories、Include Directories 和 Additional Libary Directories 下，并带有适当的 include/lib 后缀。

根据我可以告诉 excpt.h 它应该在哪里 - 我能够通过 windows.h 标头访问它。我什至重新安装了VS，但我仍然无法运行该程序。

# c++ - 重方法调用阻塞 cout

> ID：14414640
> 
> 赞同：1
> 
> 时间：2013-01-19T13:00:06.423
> 
> 标签：c++, cout

> **可能重复：**
> [为什么我的 cout 输出没有立即出现？](https://stackoverflow.com/questions/10554474/why-does-my-cout-output-not-appear-immediately)

我有一个非常繁重的方法（它检查一个数字是否是素数 - Euler 3），它会阻止`cout`.
这怎么可能？这是我的代码：

```
int main(int argc, char * argv[]) {
    cout << "-----------------------------------------------------------" << endl;
    cout << "isPrime(3): " << ((isPrime(3)) ? "true" : "false") << endl;
    cout << "isPrime(10): " << (isPrime(10) ? "true" : "false") << endl;
    cout << "BLAH";
    cout << "BLAH";
    cout << "BLAH";
    cout << "BLAH";
    cout << "BLAH";
    cout << "BLAH";
    cout << "isPrime(600851475143): " << (isPrime(600851475143.0) ? "true" : "false") << endl; // This one takes very long to complete
    cout << "-----------------------------------------------------------";
} 
```

像这样，它输出：

```
[Session started at 2013-01-19 13:50:12 +0100.]
-----------------------------------------------------------
isPrime(3): false
isPrime(10): false 
```

然后停止（几分钟）。（`isPrime()`坏了，我知道！）如果我用`isPrime(600851475143)`out 注释该行，它当然会在不到一秒的时间内输出除注释行的输出之外的所有内容。

一个非常繁重的方法调用怎么可能阻塞应该已经写入的输出`cout`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T13:02:02.383

`cout`写入标准输出，通常是行缓冲的。即缓冲区仅在遇到换行符或 时才会刷新到控制台`endl`，或者当您显式调用`cout.flush()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T13:03:17.690

如果使用`cout.flush();`or `cout << endl;`，将打印直到刷新点的输出。

这是因为 cout 试图有效地使用 I/O 调用。由于所有代码都在一个线程中运行，因此无法添加超时或其他东西，因此如果您的调用需要花费几分钟，则不会处理输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T13:02:43.313

流缓冲输出，并且仅在看到换行符时才将其写入控制台。

# debugging - 在远程 Glassfish 上记录和/或调试

> ID：14414643
> 
> 赞同：2
> 
> 时间：2013-01-19T13:00:30.213
> 
> 标签：debugging, logging, glassfish

我有个问题。我在远程 Glassfish 实例上部署了一个 Web 服务。现在我需要一些简单的日志或调试系统来更正我的代码（最好使用简单的打印）。我的想法是使用 glassfish 日志文件，因为我可以从管理 GUI 访问它，但它不起作用；我无法写入此文件。有什么想法可以解决这个问题吗？或者我可以使用的任何其他方法？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T15:23:32.657

Glassfish 的默认记录解决方案是使用`java.util.logging`(JUL) 记录器。

您可以在代码中使用它，如下所示：

```
package org.example.something; 
```

[...]

```
import java.util.logging.Logger; 
```

[...]

```
Logger logger = Logger.getLogger(getClass().getName());
logger.severe("severe");
logger.info("info");
logger.fine("fine"); 
```

您可以通过运行在`http://servername:4848/`. 还有其他方法。

在我尝试过的 Glassfish 3.1 中，您可以在 Configurations、your-server-config、Logger Settings 页面、Log Levels 选项卡上为每个记录器设置日志级别。您可以按添加记录器。您将类的包作为记录器名称，因此在此示例中`org.example.something`并选择日志级别。只要日志级别`com.sun.enterprise.server.logging.GFFileHandler`也设置在此级别或以下，任何高于或高于此级别的内容都会被记录。请参阅[Glassfish 3.1.1 突然停止写入服务器日志](https://stackoverflow.com/questions/9373629/glassfish-3-1-1-suddenly-stopped-writing-to-server-log)

按保存，更改应立即生效。在“常规”选项卡中，您可以找到日志记录结束位置的配置。

您也可以在管理工具中浏览日志。选择服务器，常规选项卡，查看日志文件。

# android - 收到短信时如何更改imagebutton中的图像

> ID：14414645
> 
> 赞同：1
> 
> 时间：2013-01-19T13:00:45.693
> 
> 标签：android

我一直在写我的论文，但我一直在接收短信。我能够将消息正文从广播接收器传递到活动并在活动中烤消息。但是，有多个图像按钮，并且特定的图像按钮将根据消息正文发生变化。我的代码看起来像：

```
public String message;
.
.
.

//in my onCreate
.
.
.
Intent intent = getIntent();
message=intent.getStringExtra("messagefrombroadcastreceiver");
//Toast message here

if(message.equals("1")){
//set imagebutton1
}else if(message.equals("2")){
//set imagebutton2
}
.
.
.
. 
```

该应用程序能够发送消息，但是当我添加 if-else-if 部分时它会强制关闭。我真的不知道我做错了什么

LOGCAT 是...

```
01-24 18:39:35.271: W/dalvikvm(30941): threadid=1: thread exiting with uncaught exception (group=0x400f1560)
01-24 18:39:35.341: E/AndroidRuntime(30941): FATAL EXCEPTION: main
01-24 18:39:35.341: E/AndroidRuntime(30941): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.thesistrial1/com.example.thesistrial1.Thesis}: java.lang.NullPointerException
01-24 18:39:35.341: E/AndroidRuntime(30941):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1658)
01-24 18:39:35.341: E/AndroidRuntime(30941):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1674)
01-24 18:39:35.341: E/AndroidRuntime(30941):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-24 18:39:35.341: E/AndroidRuntime(30941):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:942)
01-24 18:39:35.341: E/AndroidRuntime(30941):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-24 18:39:35.341: E/AndroidRuntime(30941):    at android.os.Looper.loop(Looper.java:130)
01-24 18:39:35.341: E/AndroidRuntime(30941):    at android.app.ActivityThread.main(ActivityThread.java:3735)
01-24 18:39:35.341: E/AndroidRuntime(30941):    at java.lang.reflect.Method.invokeNative(Native Method)
01-24 18:39:35.341: E/AndroidRuntime(30941):    at java.lang.reflect.Method.invoke(Method.java:507)
01-24 18:39:35.341: E/AndroidRuntime(30941):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:904)
01-24 18:39:35.341: E/AndroidRuntime(30941):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:662)
01-24 18:39:35.341: E/AndroidRuntime(30941):    at dalvik.system.NativeStart.main(Native Method)
01-24 18:39:35.341: E/AndroidRuntime(30941): Caused by: java.lang.NullPointerException
01-24 18:39:35.341: E/AndroidRuntime(30941):    at com.example.thesistrial1.Thesis.onCreate(Thesis.java:63)
01-24 18:39:35.341: E/AndroidRuntime(30941):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-24 18:39:35.341: E/AndroidRuntime(30941):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1622)
01-24 18:39:35.341: E/AndroidRuntime(30941):    ... 11 more
01-24 18:39:35.341: E/AndroidRuntime(30941): [Blue Error Handler] Make Debugging Report file for main
01-24 18:39:35.341: E/AndroidRuntime(30941): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.thesistrial1/com.example.thesistrial1.Thesis}: java.lang.NullPointerException
01-24 18:39:35.341: E/AndroidRuntime(30941):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1658)
01-24 18:39:35.341: E/AndroidRuntime(30941):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1674)
01-24 18:39:35.341: E/AndroidRuntime(30941):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-24 18:39:35.341: E/AndroidRuntime(30941):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:942)
01-24 18:39:35.341: E/AndroidRuntime(30941):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-24 18:39:35.341: E/AndroidRuntime(30941):    at android.os.Looper.loop(Looper.java:130)
01-24 18:39:35.341: E/AndroidRuntime(30941):    at android.app.ActivityThread.main(ActivityThread.java:3735)
01-24 18:39:35.341: E/AndroidRuntime(30941):    at java.lang.reflect.Method.invokeNative(Native Method)
01-24 18:39:35.341: E/AndroidRuntime(30941):    at java.lang.reflect.Method.invoke(Method.java:507)
01-24 18:39:35.341: E/AndroidRuntime(30941):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:904)
01-24 18:39:35.341: E/AndroidRuntime(30941):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:662)
01-24 18:39:35.341: E/AndroidRuntime(30941):    at dalvik.system.NativeStart.main(Native Method)
01-24 18:39:35.341: E/AndroidRuntime(30941): Caused by: java.lang.NullPointerException
01-24 18:39:35.341: E/AndroidRuntime(30941):    at com.example.thesistrial1.Thesis.onCreate(Thesis.java:63)
01-24 18:39:35.341: E/AndroidRuntime(30941):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-24 18:39:35.341: E/AndroidRuntime(30941):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1622)
01-24 18:39:35.341: E/AndroidRuntime(30941):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:52:50.613

引起：java.lang.NullPointerException 01-24 18:39:35.341: E/AndroidRuntime(30941): at com.example.thesistrial1.Thesis.onCreate(Thesis.java:63)

第 63 行...

# python - Sqlalchemy 抱怨外键不存在但实际上存在

> ID：14414650
> 
> 赞同：10
> 
> 时间：2013-01-19T13:01:14.257
> 
> 标签：python, postgresql, sqlalchemy

我有以下型号：

```
class Look(Base):
  __tablename__ = "looks"
  id = Column(Integer, primary_key=True)
  url = Column(String, nullable=False, unique=True)

class Similarity(Base):
  __tablename__ = 'similarities'
  __table_args__ = (UniqueConstraint('look_id_small', 'look_id_big'),)
  id = Column(Integer, primary_key=True)
  look_id_small = Column(Integer, ForeignKey('looks.id'), nullable=False)
  look_id_big = Column(Integer, ForeignKey('looks.id'), nullable=False) 
```

当我运行此代码时：

```
try:
  with session.begin_nested():
    similarity = Similarity()
    similarity.look_id_small, similarity.look_id_big = look_id1, look_id2
    session.add(similarity)
    session.commit()
except Exception, e:
  logging.error(e)
  print "look_id1: %s, look_id2: %s" % (look_id1, look_id2) 
```

这是我得到的错误：

```
2013-01-19 04:55:42,974 ERROR Foreign key associated with column 'similarities.look_id_small' could not find table 'looks' with which to generate a foreign key to target column 'id'
look_id1: 217137, look_id2: 283579 
```

所以我尝试在 pgsql 中寻找这些值，它们确实存在！

```
giordano=# SELECT * FROM looks WHERE id = 217137 or id = 283579;
   id   |                      url                      | title | image_url | 
--------+-----------------------------------------------+-------+-----------+
 217137 | http://foo.com                                |       |           |     
 283579 | http://baz.com                                |       |           |
(2 rows) 
```

我整晚都在试图弄清楚这一点。

一些线索：

1.  我只在某些值上得到这些错误。
2.  我不认为在同一张桌子上有双外键会导致问题。

任何人？

编辑：

```
giordano=# \d+ looks 
                                              Table "public.looks"
    Column     |       Type        |                     Modifiers                      | Storage  | Description 
---------------+-------------------+----------------------------------------------------+----------+-------------
 id            | integer           | not null default nextval('looks_id_seq'::regclass) | plain    | 
 url           | character varying | not null                                           | extended | 
Indexes:
    "looks_pkey" PRIMARY KEY, btree (id)
    "looks_url_key" UNIQUE CONSTRAINT, btree (url)
Referenced by:
    TABLE "similarities" CONSTRAINT "similarities_look_id_big_fkey" FOREIGN KEY (look_id_big) REFERENCES looks(id)
    TABLE "similarities" CONSTRAINT "similarities_look_id_small_fkey" FOREIGN KEY (look_id_small) REFERENCES looks(id)
Has OIDs: no

giordano=# \d+ similarities
                                             Table "public.similarities"
    Column     |       Type       |                         Modifiers                         | Storage | Description 
---------------+------------------+-----------------------------------------------------------+---------+-------------
 id            | integer          | not null default nextval('similarities_id_seq'::regclass) | plain   | 
 look_id_small | integer          | not null                                                  | plain   | 
 look_id_big   | integer          | not null                                                  | plain   | 
Indexes:
    "similarities_pkey" PRIMARY KEY, btree (id)
    "similarities_look_id_small_look_id_big_key" UNIQUE CONSTRAINT, btree (look_id_small, look_id_big)
Foreign-key constraints:
    "similarities_look_id_big_fkey" FOREIGN KEY (look_id_big) REFERENCES looks(id)
    "similarities_look_id_small_fkey" FOREIGN KEY (look_id_small) REFERENCES looks(id)
Has OIDs: no 
```

编辑

打开我的 postgresql 语句后，这就是我所看到的：

```
LOG:  statement: BEGIN
LOG:  statement: select version()
LOG:  statement: select current_schema()
LOG:  statement: show transaction isolation level
LOG:  statement: SELECT CAST('test plain returns' AS VARCHAR(60)) AS anon_1
LOG:  statement: SELECT CAST('test unicode returns' AS VARCHAR(60)) AS anon_1
LOG:  statement: ROLLBACK
LOG:  statement: BEGIN
LOG:  statement: DECLARE "c_10dfc08d0_1L" CURSOR WITHOUT HOLD FOR SELECT feedbacks.id AS feedbacks_id, feedbacks.user_id AS feedbacks_user_id, feedbacks.look_id AS feedbacks_look_id 
    FROM feedbacks 
     LIMIT 500
LOG:  statement: FETCH FORWARD 1 FROM "c_10dfc08d0_1L"
LOG:  statement: FETCH FORWARD 5 FROM "c_10dfc08d0_1L"
LOG:  statement: FETCH FORWARD 10 FROM "c_10dfc08d0_1L"
LOG:  statement: FETCH FORWARD 20 FROM "c_10dfc08d0_1L"
LOG:  statement: FETCH FORWARD 50 FROM "c_10dfc08d0_1L"
LOG:  statement: FETCH FORWARD 100 FROM "c_10dfc08d0_1L"
LOG:  statement: FETCH FORWARD 250 FROM "c_10dfc08d0_1L"
LOG:  statement: FETCH FORWARD 500 FROM "c_10dfc08d0_1L"
LOG:  statement: FETCH FORWARD 1000 FROM "c_10dfc08d0_1L"
LOG:  statement: CLOSE "c_10dfc08d0_1L"
LOG:  statement: ROLLBACK
LOG:  unexpected EOF on client connection 
```

我没有看到任何“插入”。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T02:30:42.777

原来使用 ForeignKey(Look.id) 成功了！！

根据#sqllachemy 的argonholm 的说法：

18:25 agronholm: 我猜想文本表格引用的语法不是你所期望的 18:26 agronholm: 也许 ForeignKey('Look.id') 也可以？

# perl - 哈希中每个键的不同类型的值

> ID：14414652
> 
> 赞同：2
> 
> 时间：2013-01-19T13:01:18.203
> 
> 标签：perl, hash

我在[谷歌](http://www.google.com/search?q=different+types+for+each+key+in+a+hash+in+perl&oq=different+types+for+each+key+in+a+hash+in+perl)搜索，但我没有找到任何有用的东西。

尽管有很多 Perl 教程，但我没有找到任何教程会提到每个键都有不同值的哈希？在 Perl 中这样的事情可能吗？

例如，可以有一个像它有 2 个键 ( `a`, `b`) 的散列，其中：

```
$myhash{"a"}=1;
$myhash{"b"}=[ 'hamnet', 'shakespeare', 'robyn', ]; 
```

以上可能吗？

* * *

我试过这个：

```
#!/usr/bin/perl

use strict;
my %x;

$x{"a"}="b";
$x{"b"}=['c','d'];

foreach (keys %x)
{
  print $_."\n";
  print "$x{$_}";
} 
```

但它正在输出：

```
a
bb
ARRAY(0x1ece50) 
```

我对如何访问此哈希的元素感到困惑。

我想告诉你这一切，尽管我对 Perl 有一点了解，但我是一个关于哈希的完全新手。

* * *

好的，我发现了一件事——要访问散列中的数组，我需要做：

```
@{$x{"b"}} 
```

但是正如我已经告诉过你的，散列的值可以是数组也可以是标量值，所以要访问上述散列，我需要先识别值的类型，然后再访问它！我怎样才能做到这一点？也就是说，如何识别键的值是标量、数组还是散列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T13:51:19.193

我认为这是你想要的：

```
 #!/usr/bin/perl -w
 use strict;
 my %x;

 $x{"a"}="b";
 $x{"b"}=['c','d'];

 foreach my $a (keys %x)
 {
     if ( ref $x{$a} eq 'ARRAY' )
     {
         foreach my $b ( @{ $x{$a} } )
         {
             print $b."\n";
         }
     }
     else
     {
         print $x{$a}."\n";
     }
 } 
```

**输出：**

```
# perl test.pl 
b
c
d 
```

检查哈希值是否为“数组”引用。如果是，则遍历数组并打印值。否则，立即打印散列值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T15:25:09.733

> “尽管有很多 Perl 教程，但我没有找到任何教程会提到每个键都有不同值的散列？在 Perl 中可以做到这一点吗？”

您可能已经尝试查看[Perl 发行版中包含的教程](http://perldoc.perl.org/index-tutorials.html)，其中包括[Perl Data Structures Cookbook (perldsc)](http://perldoc.perl.org/perldsc.html)。它包括[“更多详细记录”](http://perldoc.perl.org/perldsc.html#MORE-ELABORATE-RECORDS)一章，其中提供了有关如何创建和使用值具有不同类型的哈希的示例。

> “但正如我告诉过你的，散列的值可以是数组也可以是标量值，所以要访问上面的散列，我需要先识别值的类型，然后再访问它！我该怎么做呢？ ？也就是说，我如何识别键的值是标量、数组还是散列？

[由于您似乎对引用](http://perldoc.perl.org/perlref.html)和运算符的使用不熟悉[`ref`](http://perldoc.perl.org/functions/ref.html)，您可能还想看看[Mark 关于引用的非常简短的教程 (perlreftut)](http://perldoc.perl.org/perlreftut.html)。

请注意，所有这些教程（以及更多）已经随您的 Perl 发行版一起提供，您可以通过键入 eg 来访问它们

```
perldoc perlreftut 
```

在命令行上。（在某些系统上，您可能需要安装一个额外的包来启用该`perldoc`命令。如果您打算进行任何 Perl 编程，强烈建议您这样做。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T14:05:48.277

> 所以为了访问上面的哈希，我需要首先识别值的类型，然后访问它！我该怎么做？即，我如何确定键的值是否是单数、数组、散列？

我认为一个干净的解决方案是编写一个简单的`to_string`函数（不支持更深的嵌套结构），它标识值是标量、数组引用还是散列引用（这是`[...]`创建：对匿名数组的引用，见[perlreftut](http://p3rl.org/perlreftut)）。阅读更多关于[ref](http://p3rl.org/perlfunc#ref)的信息。

```
sub to_string {
    my $thing = shift;

    for (ref $thing) {

        # join with comma if $thing is an array ref
        return join ', ' => @$thing when 'ARRAY';

        # join key-value list with comma if $thing is a hash ref
        return join ', ' => map {"$_ => $thing->{$_}"} keys %$thing when 'HASH';

        # else: simply return the $thing itself
        return $thing;
    }
} 
```

在一个简单的示例程序中

```
my %data = (
    foo => 42,
    bar => [1, 2, 3],
    baz => {a => 'yay', b => 'nay'},
);

for my $key (keys %data) {
    say "$key: " . to_string($data{$key});
} 
```

它会给你这个输出：

```
bar: 1, 2, 3
baz: a => yay, b => nay
foo: 42 
```

请注意，您必须

```
use feature qw(say switch); 
```

对于这个程序。！:)

# actionscript-3 - AS3 - PixelBender 着色器参数错误

> ID：14414653
> 
> 赞同：1
> 
> 时间：2013-01-19T13:01:34.633
> 
> 标签：actionscript-3, shader, pixel-bender

我有一个问题，它变得非常烦人。我想使用一个简单`Shader`的方法来返回图像中所有像素的颜色，但简单地将脚本分配给 a`Shader`被证明是一个挑战。我不知道 PixelBender 脚本，也不打算过多研究它，因为我只想将它用于这个简单的功能，但从示例中我构建了这个简单的脚本：

```
<languageVersion : 1.0;>

kernel PixelColourShader
<   namespace : "puggsoy";
    vendor : "Puggsoy";
    version : 1;
>
{
    input image4 src;
    output pixel4 dst;

    void
    evaluatePixel()
    {
        dst = sampleNearest(src, outCoord());
    }
} 
```

这是我为测试加载它而制作的一个简单的 AS3 脚本：

```
package 
{
    import flash.display.Shader;
    import flash.display.Sprite;
    import flash.utils.ByteArray;

    public class Main extends Sprite 
    {
        [Embed(source = "PixelColourShader.pbj", mimeType = "application/octet-stream")]
        private var PixelColourShader:Class;

        private var shader:Shader;

        public function Main():void 
        {
            shader = new Shader(new PixelColourShader() as ByteArray);
        }

    }

} 
```

我查看了许多示例，我确信这是加载它的正确方法。但是，这总是在运行时出现此错误：

```
[Fault] exception, information=ArgumentError: Error #2004: One of the parameters is invalid. 
```

我不知道为什么。从我所看到的参数是完全有效的。

我正在使用 Flex 4 SDK 在带有 FlashDevelop 的 AIR 应用程序中进行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-01T19:22:01.080

您需要使用 Adob​​e Pixel Bender 之类的工具将您的文本文件编译成二进制 pbj。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T13:48:16.173

尝试这个：

```
var shaderShader = new Shader();
 shader.byteCode = new PixelColourShader(); 
```

# javascript - 关闭 iOS Safari 时停止 HTML5 音频循环

> ID：14414654
> 
> 赞同：1
> 
> 时间：2013-01-19T13:01:35.000
> 
> 标签：javascript, ios, html, ios6, html5-audio

好的，所以我有这样简单的东西：

```
<audio autoplay='autoplay' loop='loop' id='audio' controls>
  <source src='http://www.w3schools.com/html/horse.ogg'/>
  <source src='http://www.w3schools.com/html/horse.mp3'/>
</audio> 
```

现在，当我在 iOS 设备上播放音频时，它可以正常循环播放，*但是*，当我关闭浏览器窗口或切换选项卡时，它只会继续循环播放，而暂停它的唯一方法是关闭浏览器选项卡. 我尝试使用 JavaScript删除`loop='loop'`并重播它，~~*这很有效，但是对于大约 1.5 分钟长的音频，它仍然很烦人。*~~但这也不起作用，因为即使浏览器未打开，事件也会触发。`onended`*`ended`*

 *[声音是我在网上找到的第一个声音的演示](http://jsfiddle.net/x843X/)，但请注意，我的实际声音很长，所以`pause`当浏览器窗口关闭时我确实需要它。

我试过暂停它`onblur`，`onunload`但`onbeforeunload`无济于事。有没有办法阻止音频在后台播放？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T12:06:07.930

设法找到解决方案：

利用循环来检查用户是否在网页上。存储时间。

```
var lastSeen;
var loop = function (){
    lastSeen = Date.now();
    setTimeout(loop, 50);
};
loop();

var music = document.getElementById('music');
music.addEventListener('timeupdate', function (){
    if(Date.now() - lastSeen > 100){
        this.pause();
    }
}, false); 
```

这大致就是我的文件的样子。由于`timeupdate`事件会在音频元素上持续触发，如果它正在播放，我只需要检查我的循环最后一次调用的时间。如果它在 100 多毫秒前被调用，我会暂停音乐。在我测试过的 iPad 上工作起来就像一个魅力。*

# ios - cocos2d 的调度方法是在另一个线程中运行的吗？

> ID：14414655
> 
> 赞同：5
> 
> 时间：2013-01-19T13:01:36.517
> 
> 标签：ios, cocos2d-iphone, game-engine

我们可以使用`scheduleUpdate`or`schedule:@selecotr(xxx)`来调度一个方法来运行。

计划的方法是否在另一个线程中运行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-19T13:14:36.250

不。Cocos2d 对象不是线程安全的，需要在主线程上运行。计时器安排在主运行循环上。所以在任何情况下都不要阻塞主线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T14:22:23.347

您可以使用 [self performSelectorInBackground:…] 和类似的 NSObject 方法。

通常的警告适用。cocos2d 中的几乎每个属性都被标记为“非原子”，因此不是线程安全的，因此除非您确切地知道您在多线程是什么以及为什么要这样做，否则您可能会遇到常见的多线程问题。

# spring - Spring Security 3 + 随机盐 + 哈希 + 自定义 UserDetails + 自定义 UserDetailsS ervice

> ID：14414660
> 
> 赞同：2
> 
> 时间：2013-01-19T13:01:57.007
> 
> 标签：spring, security

我必须做类似这个问题[Spring Security 3 + Random Salt中所问的事情](https://stackoverflow.com/q/10620314/1196822)

我有自定义 UserDetails 和 UserDetailsS​​erviceImpl。

现在，在进行身份验证时，我需要添加自己的逻辑，因为存储在 DB 中的密码是以 django 风格完成的，例如 sha1$1c004$f40171c3e790320d88f88f607b5290edeca3225b。

我应该覆盖身份验证方法以拥有自己的逻辑吗？如果是这样，那么我必须覆盖哪个类？

下面是我所做的更多细节。

我的 spring-security.xml 看起来像这样

```
<authentication-manager>
<authentication-provider user-service-ref="userDetailsServiceImpl">
    <password-encoder hash="sha">
    <salt-source ref="saltSource" />
        </password-encoder>
    </authentication-provider>
</authentication-manager>

<beans:bean id="saltSource" class="org.springframework.security.authentication.dao.ReflectionSaltSource">
    <beans:property name="userPropertyToUse" value="salt" />
</beans:bean>

<beans:bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <beans:property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <beans:property name="url" value="jdbc:mysql://localhost:3306/db_name" />
    <beans:property name="username" value="root" />
    <beans:property name="password" value="root" />
</beans:bean>

<beans:bean id="userDetailsServiceImpl" class="com.company.service.impl.UserDetailsServiceImpl">
    <beans:property name="dataSource" ref="dataSource" />
</beans:bean> 
```

我的自定义 UserDetails 类看起来像这样

```
public class UserDetailsImpl extends User {

/**
 * 
 */
private static final long serialVersionUID = 1L;

@SuppressWarnings("deprecation")
public UserDetailsImpl(String username, String password, boolean enabled,
        boolean accountNonExpired, boolean credentialsNonExpired,
        boolean accountNonLocked,
        GrantedAuthority[] authorities, String salt) {

    super(username, password, enabled, accountNonExpired, credentialsNonExpired,
            accountNonLocked, authorities);
    this.salt = salt;
}

private String salt;

public String getSalt() {
    return salt;
}

public void setSalt(String salt) {
    this.salt = salt;
}

} 
```

我的自定义 UserDetailsS​​erviceImpl 看起来像这样

```
public class UserDetailsServiceImpl implements IUserDetailsService {

private DriverManagerDataSource dataSource;

public DriverManagerDataSource getDataSource() {
    return dataSource;
}

public void setDataSource(DriverManagerDataSource dataSource) {
    this.dataSource = dataSource;
}

public UserDetails loadUserByUsername(String username)
        throws UsernameNotFoundException, DataAccessException {
    String sql = "SELECT au.username, au.password, au.is_active, pu.role " +
            "       FROM auth_user au, profile_userprofile pu WHERE au.id = pu.user_id " +
            "       AND au.username like :username ";
    MapSqlParameterSource source = new MapSqlParameterSource();
    source.addValue("username", username);

    SimpleJdbcTemplate sjt = new SimpleJdbcTemplate(getDataSource());
    User user = sjt.queryForObject(sql, new UserMapper(), source);
    String _password = user.getPassword();

    return user;
}

private GrantedAuthority[] getAuthorities(String role) {
    List<GrantedAuthority> authList = new ArrayList<GrantedAuthority>();
    authList.add(new GrantedAuthorityImpl("ROLE_USER"));

    if(role.equals("admin"))
        authList.add(new GrantedAuthorityImpl("ROLE_ADMIN"));

    return authList.toArray(new GrantedAuthority[] {});
}

private class UserMapper implements ParameterizedRowMapper<User> {

    public User mapRow(ResultSet rs, int arg1) throws SQLException {

        // getting salt from the stored password 
        // and setting it in my custom User object
        String _password = rs.getString("password");
        String password[] = _password.split("\\$");
        String salt = password[1];

        return new UserDetailsImpl(rs.getString("username"), rs.getString("password"), rs.getInt("is_active") == 1 ? true : false, 
                true, true, true, getAuthorities(rs.getString("role")), salt);
    }

}

} 
```

# java - Ant 构建工具失败

> ID：14414665
> 
> 赞同：0
> 
> 时间：2013-01-19T13:02:14.243
> 
> 标签：java, jsp, jakarta-ee, ant, tomcat6

当我尝试使用`Eclipse Juno IDE`.

任何人都可以帮我修复此消息`Eclipse Juno Console`：

```
Buildfile: C:\online1\OnlineQuestion\build.xml build: build: deploy:      
[copy] Copying 103 files to C:\Program Files (x86)\Tools\Tomcat6.0\webapps\OnlineTestEngine  BUILD FAILED     
C:\online1\OnlineQuestion\build.xml:46: Failed to copy 
C:\online1\OnlineQuestion\war\1Result.jsp to C:\Program Files (x86)\Tools\Tomcat6.0\webapps\OnlineTestEngine\1Result.jsp 
due to failed to create the parent directory for C:\Program Files (x86)\Tools\Tomcat 6.0\webapps\OnlineTestEngine\1Result.jsp  
Total time: 827 millisecond 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T13:37:44.790

如果要在`Program Files`or中写入文件或创建文件夹`Program Files (x86)`，则需要以管理员身份运行，否则写入权限将被拒绝。

有三种可能的解决方案：

1.  从以管理员身份启动的 cmd 提示符运行 ant 或尝试以管理员身份运行 Eclipse
2.  将 Tomcat 安装在外部位置，`Program Files`因此无需提升权限即可从构建脚本部署文件
3.  编辑您的 Tomcat`server.xml`并将 appBase 更改为您具有写入权限的位置，例如`<Host name="localhost" appBase="C:\Users\me\webapps" ...`

# php - browscap 路径的基本目录

> ID：14414666
> 
> 赞同：2
> 
> 时间：2013-01-19T13:02:22.403
> 
> 标签：php

在 PHP.ini 中有一行用于添加浏览器功能文件：

```
browscap = extra/browscap.ini 
```

该路径相对于哪个目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T15:03:49.360

它表明；

```
// in windows (my pc):
D:\LAMP\php5.3.10\extras\browscap.ini
// in ubuntu
/usr/share/php5/extras/browscap.ini (or somewhere like this where php is located) 
```

# c# - C# MVC 4 多登录系统

> ID：14414671
> 
> 赞同：1
> 
> 时间：2013-01-19T13:02:45.210
> 
> 标签：c#, asp.net-mvc-4, entity-framework-5, asp.net-4.5

我正在创建一个具有 3 个人们需要登录的逻辑区域的站点：

1.  客户登录
2.  公司登录
3.  管理员/业务经理登录

我正在尝试找出处理登录的最佳方法。

是否可以将身份模型与 3 个不同的登录页面、3 个不同的表等一起使用并将它们全部分开？如果是这样，我该怎么做？

还是我只需要通过角色来处理这个问题，尽管需要保存的数据会有很大不同，并且它们已经在 3 个系统中的每一个上都有多个角色？

我正在使用 C# MVC 4、.Net 4.5、Wntity 框架 5。欢迎提出任何意见或想法，因为我正在努力弄清楚如何去做。

有没有人实现过类似的东西？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T16:46:07.283

我自己从未这样做过，但您可能想尝试使用表单身份验证配置值上的“路径”参数为每个区域指定一个单独的 cookie。

[http://msdn.microsoft.com/en-us/library/vstudio/1d3t3c61%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/vstudio/1d3t3c61%28v=vs.90%29.aspx)

本文有一个关于分区站点的部分可能有用：http: [//msdn.microsoft.com/en-us/library/ff648341.aspx](http://msdn.microsoft.com/en-us/library/ff648341.aspx)

# mysql - X.column 中的 DELETE FROM X WHERE 值不会出现在 Y.column 中

> ID：14414673
> 
> 赞同：0
> 
> 时间：2013-01-19T13:02:48.473
> 
> 标签：mysql, database, pdo

假设一个网站根据发布的媒体格式对热门故事进行分类。其数据库由以下表格组成：

![故事表](../Images/8d0578ce83d87fd1256c67dc41afe51b.png)

![链接表](../Images/b7233b078220b6ff1ecd2572d7f015b6.png)

![媒体表](../Images/ccfccd78ee362a20729f2236cd702d98.png)

如果一个故事从数据库中删除，它的媒体关联也应该被删除。如果与某种媒体相关的唯一故事被删除，则有关该媒体的信息现在变得无用，也必须删除。

例如，如果蜘蛛侠 (story_id 2) 被删除，它与电影和漫画媒体的链接也应该被删除。由于没有其他故事以漫画的形式发布，因此必须去除以漫画为媒介的信息，而以电影为媒介的任何信息仍然与其他故事相关，必须保持不变。

抽象地说，我想通过以下方式实现这一目标：

```
//delete the story itself:
DELETE FROM stories WHERE stories.story_id = 2

//delete its links to media:
DELETE FROM links WHERE links.story_id = 2

//delete any  media that might subsequently no longer have any links to them:
DELETE FROM media WHERE media.medium_id does not occur in links.medium_id 
```

或者像这样：

```
//delete the story itself:
DELETE FROM stories WHERE stories.story_id = 2

//fetch its associated media ids:
SELECT links.medium_id FROM links WHERE links.story_id = 2

//delete the story's links to any media:
DELETE FROM links WHERE links.story_id = 2

//consider deleting the types of media of which a story has just been deleted:
DELETE FROM media WHERE media.medium_id does not occur in links.medium_id and medium.medium_id = <previously fetched medium id(s)> 
```

作为更好方法的一部分，我将如何实际写出这些查询或其他查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T13:05:20.790

如果您的表设置为`FOREIGN KEY`，那么您可能需要考虑使用[`ON DELETE CASCADE`](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

然后，当您从`story`表中删除时，链接到该故事的项目将被删除。

来自[MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)：

> CASCADE：删除或更新父表中的行，并自动删除或更新子表中匹配的行。支持 ON DELETE CASCADE 和 ON UPDATE CASCADE。在两个表之间，不要定义多个作用于父表或子表中的同一列的 ON UPDATE CASCADE 子句。

SO用户[@Marc B](https://stackoverflow.com/questions/2914936/mysql-foreign-key-constraints-cascade-delete/2917374#2917374)写了一个关于设置的很好的答案：

[MySQL外键约束，级联删除](https://stackoverflow.com/questions/2914936/mysql-foreign-key-constraints-cascade-delete/2917374#2917374)

编辑#1，您的表格将设置为类似于以下内容：

```
CREATE TABLE stories
    (`story_id` int not null, 
     `story_title` varchar(18), 
     `story_rating` varchar(9),
     primary key (story_id),
     key idx_story_id (story_id)
    ) ENGINE=InnoDB;

CREATE TABLE media
    (`medium_id` int not null, 
     `medium_name` varchar(9), 
     `medium_popularity` varchar(6),
     primary key (medium_id),
     key idx_medium_id (medium_id)
     ) ENGINE=InnoDB;

CREATE TABLE links
    (`link_id` int not null, 
     `story_id` int, 
     `medium_id` int,
     primary key (link_id),
     key ix_story_id (story_id), 
     key ix_medium_id (medium_id),
    FOREIGN KEY (story_id) REFERENCES stories(story_id)
       ON DELETE CASCADE,
    FOREIGN KEY (medium_id) REFERENCES media(medium_id)
       ON DELETE CASCADE
     ) ENGINE=InnoDB; 
```

然后，当您从`media`或`stories`表中删除时，表中的相应记录`links`也将被删除。

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/0f0cb/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T13:11:26.373

使用 InnoDB，bluefeet 的方法是正确的。但是，如果它只是一次性操作，那么语法如下......

```
DELETE x FROM table1 x LEFT JOIN table2 y ON y.id = x.id WHERE y.id IS NULL; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T13:10:35.003

没有理由进行额外的选择查询：

```
//delete the story itself:
DELETE FROM stories WHERE stories.story_id = 2

//delete its links to media:
DELETE FROM links WHERE links.story_id = 2

//delete any  media that might subsequently no longer have any links to them:
DELETE FROM media WHERE media.medium_id NOT IN((SELECT medium_id FROM link)) 
```

但是，就像@bluefeet 说的我会考虑使用`ON DELETE CASCADE`.

# android - Android POST JSON OBJECT - 如何设置 $_POST 索引

> ID：14414676
> 
> 赞同：0
> 
> 时间：2013-01-19T13:03:06.047
> 
> 标签：android

我有一个我想发布到服务器的 JSONObject。

这是代码：

```
JSONObject obj = new JSONObject();
for(int k = 0; k<len;k++){
    obj.put("nachrichten_ids", params[k]);
}
HttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost("xxxxx");
HttpEntity entity;
StringEntity s = new StringEntity(obj.toString());
s.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
entity = s;
httpPost.setEntity(entity);
HttpResponse response;
response = httpClient.execute(httpPost); 
```

通过执行 Log.i("TEST",obj) 我得到 JSON 对象：

**{"nachrichten_ids":"[2144,2138]"}**

该数据被发送到服务器。但我无法访问它： **没有 $_POST 索引。** (PHP)

如何设置索引，以便我可以访问 json 对象，**例如 $_POST['nachrichten_ids']**。然后我必须使用该数据，例如使用 php json_decode()

任何的想法 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T13:08:29.450

尝试将您的 JSON 对象放入名称值对中。您添加的对的名称是您在网络上阅读时应使用的名称。例如这里我将通过调用 $_POST['Password'] 来获取密码。

```
 List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

    nameValuePairs.add(new BasicNameValuePair("Password", "My password"));
    nameValuePairs.add(new BasicNameValuePair("Mail", "My mail"));

    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    // Execute HTTP Post Request
    BasicHttpResponse response = (BasicHttpResponse) httpclient.execute(httppost);
    HttpEntity entity = response.getEntity(); 
```

# multithreading - Delphi 类的同步

> ID：14414678
> 
> 赞同：2
> 
> 时间：2013-01-19T13:03:19.097
> 
> 标签：multithreading, delphi, class

我有一个关于德尔福多线程的问题。假设，我有一个线程，我有一个类，它做一些工作并且必须有同步。我怎么能做到？我做这个程序（在 ThreadClass 中）：

```
procedure TThreadClass.SynchProc(P: TProc);
begin
 ...
 Synchronize(TThreadProcedure(P));
 ...
end; 
```

我从我的班级中调用它，在线程中运行，但是......在过程符号“同步”是TThread的一个方法，即对象“（Self as TThread）”，但是当我从我的班级中调用它时，变量“Self”不包含我的 ThreadClass 对象（我不知道，它被包含，可能是第二类的对象，在 Thread 中运行）。分别该程序不起作用。我搜索其他变体（我将我的 threadClass 对象传递给第二类对象并尝试从第二类的过程中调用“同步”过程，但编译器不想编译它）。

你能帮助我吗？将不胜感激任何帮助

来自乌克兰的问候 PS对不起我的英语不好

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T13:42:39.557

我不是 100% 确定我理解，但我认为你有这样的情况。你有一个`TThread`后代，比如说`TMyThread`。而该类又使用另一个名为的类`TThreadClass`，它不是从`TThread`. 您想`Synchronize`从`TThreadClass`.

以下是一些选项：

1.  `TThread`将实例传递给`TThreadClass`. 这是一个相当残酷的解决问题的方法。现在`TThreadClass`可以对线程做任何事情，而它只想调用`Synchronize`.
2.  将引用该`Synchronize`方法的过程变量传递给`TThreadClass`. 这使`TThreadClass`我们能够做它需要做的事情，仅此而已。
3.  调用`TThread.Synchronize`传递`nil`第一个参数的类方法。

其中，最后一个选项是最简单的。你可以这样做：

```
procedure TThreadClass.SynchProc(P: TThreadProcedure);
begin
  TThread.Synchronize(nil, P);
end; 
```

Note that it is not a good idea to pass in a `TProc` and cast to `TThreadProcedure` as per the code in the question. Force the caller to pass in a procedural variable of the right type. In this case the cast is benign, but you should always aim to avoid casts.

# umbraco - Umbraco - 动态页面

> ID：14414680
> 
> 赞同：0
> 
> 时间：2013-01-19T13:03:29.640
> 
> 标签：umbraco

我希望有人能给我一些帮助，我打算做什么......

我想创建一个动态的“City.aspx”页面，它接受一个 url 参数并根据该特定城市动态生成一个页面。

例如，如果有人叫“City.aspx?city=london”，那么它将构建一个包含与伦敦相关的自定义内容的页面，如果有人称该页面为“City.aspx?city=manchester”，它将构建一个包含相关内容的页面到曼彻斯特。

我已经研究过构建站点地图和 UrlRewriting 并且很确定我可以使用参数重定向到这个新页面，但不知道下一步我需要做什么。

有人可以帮忙吗？

谢谢

出租车路线

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T16:20:16.607

我建议您创建像 /city/london/1234 这样的 url，其中最后一部分是文档的 ID。通过使用 Umbraco 内置的 UrlRewrite 功能，可以将 url 内部重写为 /city.aspx?name=london&id=1234 在 /config/Urlewriting.config 中可以添加重写规则。对于上面你需要这样的东西：

```
 <add name="city_rewrite"
       virtualUrl="^~/city/(.*)/(.*)"
       rewriteUrlParameter="ExcludeFromClientQueryString"
       destinationUrl="~/city.aspx?name=$1&amp;cityid=$2"
       ignoreCase="true" /> 
```

一旦你解决了这个问题，你可以在你的代码隐藏中使用以下代码关闭 City.aspx 宏来获取相应的文档。

```
 // get the city Document Id from the querystring
    string cityID = HttpContext.Current.Request.QueryString["cityid"];

    if (!string.IsNullOrWhiteSpace(cityId))
    {
      // get the cityNode
      Node cityNode = new Node(cityId);
      // do whatever you want with this node, like display it's data
    } 
```

这是一个 .NET 宏，但当然您可以使用 XSLT 或 Razor 代码执行相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T23:44:51.850

如果您拥有标准 Umbraco 内容之外的信息，这些信息对于每个城市都是动态的，那么只需编写一个或多个宏（或部分视图？）以通过该“城市”获取参数获取动态数据。然后，您可以使用 UrlRewriting 使 URL 看起来像标准网页 (/city/london.aspx)。UrlRewriting 将使该 URL 在服务器上看起来好像是这样的：/city.aspx?city=london。（[http://our.umbraco.org/wiki/reference/packaging/package-actions/community-made-package-actions/add-an-url-rewrite-rule](http://our.umbraco.org/wiki/reference/packaging/package-actions/community-made-package-actions/add-an-url-rewrite-rule)）

在您的宏中，您可以通过括号语法（[http://our.umbraco.org/wiki/reference/templates/umbracomacro-element/macro-parameters ）将“city”get 参数作为宏参数传递给宏/高级宏参数语法](http://our.umbraco.org/wiki/reference/templates/umbracomacro-element/macro-parameters/advanced-macro-parameter-syntax)）。或者您可以通过请求变量 (razor) 或 Umbraco.library (XSLT) 获取城市参数。

# java - Servlet 从没有 enctype="multipart/form-data" 的表单上传文件

> ID：14414683
> 
> 赞同：0
> 
> 时间：2013-01-19T13:04:12.450
> 
> 标签：java, html, tomcat, servlets

是否可以在不使用 multipart/form-data 的情况下从 html 表单上传文件？我使用的是 Servlets 2.5，所以我不能使用 getPart 方法，我仍然想使用 getParameter 方法从字段中获取值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T13:12:53.817

像其他人一样，使用 apache commons fileupload 来处理 mpe 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T03:43:05.667

您必须使用`enctype`form 属性来上传文件。

而且由于您没有使用 Servlet 3.0，因此如果您想继续使用`request.getParameter()`调用从输入字段中获取数据，则必须创建自己的过滤器。[您可以在此处](http://balusc.blogspot.com/2007/11/multipartfilter.html)和[此处](http://balusc.blogspot.com/2009/12/uploading-files-in-servlet-30.html)找到完整示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T13:23:26.853

`multipart/form-data`编码类型是 HTML 文件上传机制的一个基本部分 - 例如，参见它[最初标准化的 RFC ，特别是](https://www.rfc-editor.org/rfc/rfc1867)[标题为“使用 ENCTYPE=x-www-form-urlencoded 的文件传输”的](https://www.rfc-editor.org/rfc/rfc1867#section-5.8)这一部分。

虽然现在还有其他上传文件的方法（例如，由 Flash 小部件支持），但这些方法都不能让您以正常`x-www-form-encoded`格式提交部分表单，还可以附加上传的文件。

也许您可以编写一个包装器对象，该对象包装一个 API，该 API 支持`multipart/form-data`并`getParameter`在其之上为非文件字段实现您想要的方法。

# jquery - 支持 css3 和 ie8 的弧形文本

> ID：14414693
> 
> 赞同：10
> 
> 时间：2013-01-19T13:05:43.310
> 
> 标签：jquery, css, canvas, internet-explorer-8, css-transforms

我试图为具有 css3 属性的文本赋予弧形，并更改 js 以支持 ie8。但这不起作用。

```
this.$letters.each(function (i) {
    var $letter = $(this),
        transformation = (_self.options.radius === -1) ? 'none' : 'translateX(' + $letter.data('x') + 'px) translateY(' + $letter.data('y') + 'px) rotate(' + $letter.data('a') + 'deg)',
        transition = (animation) ? 'all ' + (animation.speed || 0) + 'ms ' + (animation.easing || 'linear') : 'none';

    filterIE = 'M11=' + $letter.data('x') + ', M21=' + $letter.data('y') + ',rotation=' + $letter.data("a") + 'deg'; // js function for supporting ie8
    //alert(filterIE);
    $letter.css({
        '-webkit-transition': transition,
        '-moz-transition': transition,
        '-o-transition': transition,
        '-ms-transition': transition,
        'transition': transition
    })
    .css({
        '-webkit-transform': transformation,
        '-moz-transform': transformation,
        '-o-transform': transformation,
        '-ms-transform': transformation,
        'transform': transformation,
        'filter': "progid:DXImageTransform.Microsoft.Matrix(" + filterIE + ")"  // js function for supporting ie8
    });

    function getIEVersion() {
        var rv = -1; // Return value assumes failure.
        if (navigator.appName == 'Microsoft Internet Explorer') {

            var ua = navigator.userAgent;
            var re = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
            if (re.test(ua) != null)

                rv = parseFloat(RegExp.$1);
        }
        return rv;
    }

    function checkVersion() {
        var ver = getIEVersion();

        if (ver != -1) {
            if (ver <= 9.0) {
                //.css("-ms-filter","progid:DXImageTransform.Microsoft.Matrix(M11=1.4488887394336025, M12=-0.388228567653781, M21=0.388228567653781, M22=1.4488887394336025, SizingMethod='auto expand')"
                //);// do something
            }
        }
    }

    checkVersion();
}); 
```

用粗体标记的文本是对我的 js 函数的更改。有谁可以帮我离开这里吗。我在[jsfiddle上做了一个演示](http://jsfiddle.net/SxNzb/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-09T13:26:11.983

由于这个问题是在 2013 年提出的，并且 IE8 正在迅速退出，我想我会给出一个惊人的弧形文本 CSS 生成器的链接：http: [//csswarp.eleqtriq.com/](http://csswarp.eleqtriq.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:32:38.740

您的 IE 转换代码是错误的。它应该是这样的：

```
var cos = Math.cos;
var sin =Math.sin;
var deg2rad = 180 * Math.PI;
var filterIE = 'M11=' + ($letter.data('x')+cos($letter.data("a")/deg2rad)) + ',M12=' + sin($letter.data("a")/deg2rad) + ', M21=' + ($letter.data('y')-sin($letter.data("a")/deg2rad)) + ',M22=' + cos($letter.data("a")/deg2rad) + ',sizingMethod=\'auto expand\'' 
```

此外，IE9+ 支持 CSS3 转换。你只需要`-ms-`前缀。

# mysql - 连接所有行/ alt。在所有行中使用正则表达式查找

> ID：14414695
> 
> 赞同：1
> 
> 时间：2013-01-19T13:05:52.597
> 
> 标签：mysql, sql

我有一张这样的桌子：

```
+----+---------------------------------------------------+
| id |                       value                       |
+----+---------------------------------------------------+
|  1 | My favourite website is http://stackoverflow.com/ |
|  2 | This text doesn't have a link! :(                 |
|  3 | Hi! A link! http://www.google.com/                |
+----+---------------------------------------------------+ 
```

但当然有很多行。我真正想要的是字段中所有 URL 的列表。实际上，它们是博客文章，因此有些文章会有多个链接。我只对外部链接感兴趣（即以 (/http(s)?/) 开头）。

所以，我的第一个想法是执行一个返回如下内容的 SQL 查询：

```
My favourite website is http://stackoverflow.com/,This text doesn't have a link! :(,Hi! A link! http://www.google.com/ 
```

所以我可以在 PHP 中使用正则表达式。

**我该如何编写该查询？**

或者，使用 SQL 直接进入 URL 列表会很棒，但我怀疑由于多个链接的事情，这可能太难了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T13:06:33.760

采用`GROUP_CONCAT`

```
SELECT GROUP_CONCAT( value  )
FROM   tableName 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/aac70/2)

其他来源

*   [GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

# git - 如何着色 git 错误、警告和致命消息？

> ID：14414696
> 
> 赞同：23
> 
> 时间：2013-01-19T13:05:55.250
> 
> 标签：git

在对用户的 git 问题进行故障排除时，我不断遇到一些人没有注意到来自 git 的错误/警告消息，然后烫伤了他们的手指。有什么方法可以着色错误和警告 git 输出？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-03-09T23:01:12.863

由于我没有找到合适的方法来为错误消息着色，我的解决方案是在 git 返回错误代码 (!=0) 时添加额外的警告。

为此，请将其添加到您的`~/.bashrc`或`~/.bash_profile`

```
# Wrap git. On errors, print an additional line in red.
git(){
    command git "$@"
    local exitCode=$?
    if [ $exitCode -ne 0 ]; then
        printf "\033[0;31mERROR: git exited with code $exitCode\033[0m\n"
        return $exitCode
    fi
} 
```

结果如下： [![在此处输入图像描述](../Images/909d31eb0d4438ddba79e54f698c058f.png)](https://i.stack.imgur.com/DmJeg.png)

请注意，将 stderr 着色为红色效果不佳，因为 git 在 stderr 中记录了许多内容，而不仅仅是错误。并且在标准输出中输出了一些错误。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-05-20T23:37:51.837

使用 Git 2.18（2018 年第二季度），您现在可以更好地记录设置以着色推送错误/提示。

请参阅[Johannes Schindelin ( ) 的](https://github.com/dscho)[提交 79f62e7](https://github.com/git/git/commit/79f62e7dd96ae0cf98b7eca1b763012d1a4db0bb)（2018 年 4 月 21 日[）](https://github.com/dscho)。^(（由)^([Johannes Schindelin 合并 --](https://github.com/dscho)) ^([--](https://github.com/dscho))^在^([提交 79f62e7](https://github.com/git/git/commit/79f62e7dd96ae0cf98b7eca1b763012d1a4db0bb))^(中，2018 年 4 月 24 日）)[`dscho`](https://github.com/dscho)
^([`dscho`](https://github.com/dscho))

> ## `push`: 着色错误
> 
> 这是试图解决我遇到的一个问题，这些人是 Git 新手——尤其是团队环境中的同事——他们错过了他们向远程位置的推送失败，因为失败和成功都返回了一个白色文本块.
> 
> 一个例子是，如果我将某些东西推送到远程存储库，然后一位同事尝试推送到同一个远程存储库并且推送失败，因为它要求他们先拉取，但他们没有注意到，因为成功和失败都返回一个块的白色文本。然后他们继续他们的业务，认为它已经成功推动。
> 
> **此补丁为错误和提示着色（分别为红色和黄色），因此每当推送到失败的远程存储库时出现故障时，它会更加明显**。

* * *

使用 Git 2.19（2018 年第三季度），边带代码学会了在接收端输入行的开头选择性地绘制选定的关键字。

请参阅[Han-Wen Nienhuys ( ) 的](https://github.com/hanwen)[提交 bf1a11f](https://github.com/git/git/commit/bf1a11f0a100b080a25233980c14b5ae8f3a7d2d)（2018 年 8 月 7 日[）](https://github.com/hanwen)。 帮助者：[Jonathan Nieder (](https://github.com/artagnon) [)](https://github.com/artagnon)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([d280170 提交中](https://github.com/git/git/commit/d28017005fc64e9cfba3068bfe3c975cf7787767))^(，2018 年 8 月 20 日）)[`hanwen`](https://github.com/hanwen)
[`artagnon`](https://github.com/artagnon)
^([`gitster`](https://github.com/gitster))

> ## `sideband`：突出显示远程边带输出中的关键字
> 
> 着色由配置设置“ `color.remote`”控制。
> 
> 支持的关键字是“ `error`”、“ `warning`”、“ `hint`”和“ `success`”。
> 如果它们出现在行首，它们会突出显示，这在错误消息中很常见，例如。
> 
> ```
> ERROR: commit is missing Change-Id 
> ```
> 
> Git 推送过程本身会打印许多不可操作的消息（例如，带宽统计信息、流程不同阶段的对象计数器）。
> 这掩盖了服务器可能发回的可操作错误消息。
> 突出显示边带中的关键字会引起对这些消息的更多关注。
> 
> 此更改的背景是 Gerrit 进行服务器端处理以创建或更新代码审查，并且必须在推送期间将可操作的错误消息（例如缺少 Change-Id）传达给用户。
> 用户研究表明，新用户很难看到这些消息。
> 
> 突出显示是在客户端而不是服务器端完成的，因此服务器不必增加了解终端转义码和终端状态的能力。
> 它也与 Git 控制本地显示的当前状态一致（例如，在消息前加上“ `remote:`”）。
> 
> 可以使用`color.remote.<KEYWORD>`配置设置来配置突出显示。
> 由于键是不区分大小写的，我们也可以不区分大小写匹配关键字。
> 
> 最后，这个解决方案是向后兼容的：许多服务器已经在他们的消息前加上“错误”，他们将受益于这个变化，而不需要服务器更新。
> 相比之下，服务器端解决方案可能需要`TERM`通过协议检测变量`git`，因此需要同时更改服务器和客户端。

* * *

注意：使用 Git 2.21（2019 年第一季度）：以某个关键字开头的行，以及仅包含这些关键字之一的行，应该涂上颜色以便于观察，**但后者是自从在 2.19 中引入该功能以来就被破坏了，该功能已得到纠正**。

请参阅[Stefan Beller ( ) 的](https://github.com/stefanbeller)[提交 1f67290](https://github.com/git/git/commit/1f672904508c9c4e722efaf6bb8696b2e7b9d8e0)（2018 年 12 月 3 日[）](https://github.com/stefanbeller)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([20b3bc1 提交中](https://github.com/git/git/commit/20b3bc155864730380e8186f7d71ee2196a79603))^(，2019 年 1 月 14 日）)[`stefanbeller`](https://github.com/stefanbeller)
^([`gitster`](https://github.com/gitster))

> ## `sideband`：仅带有关键字的颜色线
> 
> [引入 bf1a11f](https://github.com/git/git/commit/bf1a11f0a100b080a25233980c14b5ae8f3a7d2d) ( : `sideband`highlight keywords in remote sideband output, 2018-08-07) 时，仔细考虑了要突出显示的字符串。
> 但是[59a255a](https://github.com/git/git/commit/59a255aef05633c45c780987fa0c861cda9006f2) ( `sideband`: do not read beyond the end of input, 2018-08-18) 带来了原始未测试的回归。
> 仅包含关键字且不包含其他内容 (" `SUCCESS`") 的行仍应着色。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-19T18:58:55.907

没有 git 内置方法可以做到这一点。Git 只是将错误打印到 STDERR，并不关心错误的致命性或任何事情。你**可以**做的是把 STDERR 染成红色。在 ServerFault 上已询问如何执行此操作：[https ://serverfault.com/questions/59262/bash-print-stderr-in-red-color](https://serverfault.com/questions/59262/bash-print-stderr-in-red-color)

有三个基本选项：

1.  像这样运行你的命令：

    ```
    *git-command* 2> >(while read line; do echo -e "\e[01;31m$line\e[0m" >&2; done) 
    ```

2.  使用包装脚本（请参阅 ServeFault 了解这些），并运行类似的命令

    ```
    mywrapper *git-command* 
    ```

3.  安装[标准错误](https://github.com/sickill/stderred)。这将允许您使效果永久化，而无需修改命令行。不过，不确定这是否适用于 Windows。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T13:58:24.393

您可以`color`使用`git`.

有关更多信息和示例，请参阅[http://git-scm.com/book/en/Customizing-Git-Git-Configuration#Colors-in-Git或](http://git-scm.com/book/en/Customizing-Git-Git-Configuration#Colors-in-Git)[http://blog.philippmetzler.com/?p](http://blog.philippmetzler.com/?p=15)的第二部分[=15](http://blog.philippmetzler.com/?p=15)

示例：（添加到您的 .gitconfig）

```
[color]
     interactive = always
[color "interactive"]
     error = red bold 
```

# c# - 默认为区域控制器

> ID：14414697
> 
> 赞同：2
> 
> 时间：2013-01-19T13:05:57.637
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-routing, asp.net-mvc-areas

对于 ASP.NET MVC 应用程序，我有 2 个控制器，名称为`Home`. 其中一个控制器在一个`Areas`部分中，一个不在。如果有人转到基本路径`/`，我会尝试默认使用该`Areas`部分中的控制器。我的印象是这是可能的。我有以下设置，我相信它应该可以实现 -

![在此处输入图像描述](../Images/2381bbad926ee0fc476a6687d59a5408.png)

当我去的时候`/`，我还是被带到了Controller in`MVCArea01/Controllers/`而不是`MVCArea01/Areas/Admin/Controllers/`。

（如果图片中的代码太小看不清，这里是方法的代码，RegisterRoutes）

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", id = UrlParameter.Optional }, // Parameter defaults
        new[] {"MVCAreas01.Areas.Admin.Controllers"}  // I believe this code should cause "/" to go to the Areas section by default
    );

} 
```

什么是正确的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T13:08:28.357

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { 
            controller = "Home", 
            action = "Index", 
            id = UrlParameter.Optional, 
            area = "Admin" 
       }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T17:50:25.080

@ABogus

我修改了 AdminAreaRegistration.cs 文件。参考下图

![修改了 MapRoute](../Images/1dbc30bb37ff134cdf4c74ac2cb2a929.png)

我还修改了 Route.config 如下。

![Route.config 也被修改。](../Images/9154e74e7d3158266942a7a42846e035.png)

我得到了这样的输出

![默认路由到 Areas->Admin->Controller->Home](../Images/9e382001e3b934ad7497c8c95fb34019.png)

[您可以从https://www.dropbox.com/s/o8in2389e8aebak/SOMVC.zip](https://www.dropbox.com/s/o8in2389e8aebak/SOMVC.zip)下载示例项目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T18:51:53.950

您应该为您的起始页面创建额外的路由，这会将处理定向到正确的控制器：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "Home_Default",
        "",
        new { controller = "Home", action = "Index", id = UrlParameter.Optional },
        new[] { "MVCAreas01.Areas.Admin.Controllers" });

    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional },
        namespaces: new[] { "MVCAreas01.Controllers" }
    );
} 
```

# excel - 如何导出内容（在一个里面 ) 通过 JSP 导入 excel 我使用 JSP 开发了一个 Web 应用程序，它创建了一个包含多个页面元素和多个记录的页面。我想将其中的内容导出到一个excel文件中。 我使用了代码 response.setContentType("application/vnd.ms-excel"); response.setHeader("Content-Disposition", "inline 问问题 问问题 2013-01-19T13:06:22.370 1692 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我使用 JSP 开发了一个 Web 应用程序，它创建了一个包含多个页面元素和多个记录的页面。我想将其中的内容导出到一个excel文件中。 我使用了代码 response.setContentType("application/vnd.ms-excel"); response.setHeader("Content-Disposition", "inline; filename=" + "excel.xls"); 如本文所述http://www.quicklyjava.com/export-web-page-to-excel/ 但它会导出整个页面。如何仅导出该特定表中的内容？ 我不能使用 Apache POI 库，因为我必须格式化（文本颜色、单元格颜色）JSP 中的内容。我需要在 excel 文件中使用相同的格式。 有人可以帮我吗？:) 还没有找到在页面中仅导出单个表的方法。但是预期的任务（创建带有格式化数据的 excel 表）可以由 Apache POI HSSF 库完成 以下是学习方法和示例的链接 - http://poi.apache.org/spreadsheet/how-to.html#user_api http://poi.apache.org/spreadsheet/examples.html exceljspapache-poiexport-to-excelpoi-hssf 4 1 回答 1 This answer is useful 0 还没有找到在页面中仅导出单个表的方法。但是预期的任务（创建带有格式化数据的 excel 表）可以由 Apache POI HSSF 库完成 以下是学习方法和示例的链接 - http://poi.apache.org/spreadsheet/how-to.html#user_api http://poi.apache.org/spreadsheet/examples.html 于 2013-01-29T13:18:37.493 回答 Related 1 python - 我无法访问我班级的属性？ 1 function - 括号 Powershell 函数 3 ruby-on-rails - Rails 新动作尝试秀 1 java - LWJGL 的 Matrix4f.mul 方法是先乘还是后乘？ 1 ruby-on-rails - rake db:migrate 失败（活动记录） 1 stanford-nlp - 如何保留 MaxEntTagger 中不可标记的字符？ 2 java - OpenJDK开发JavaEE？ 3 java - 您可以将包含不可打印字符的字节数组转换为字符串吗？ 2 c - 如何使用 linux 内核一次进行多个系统调用？ 3 objective-c - 在 Objective-C 中调用指定的初始化器后如何执行额外的初始化？（自我 = [自我...） Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14414698
> 
> 赞同：0
> 
> 时间：
> 
> 标签：excel, jsp, apache-poi, export-to-excel, poi-hssf

我使用 JSP 开发了一个 Web 应用程序，它创建了一个包含多个页面元素和多个记录的页面。我想将其中的内容导出到一个excel文件中。

我使用了代码

```
response.setContentType("application/vnd.ms-excel");
response.setHeader("Content-Disposition", "inline; filename="
        + "excel.xls"); 
```

如本文所述[http://www.quicklyjava.com/export-web-page-to-excel/](http://www.quicklyjava.com/export-web-page-to-excel/)

但它会导出整个页面。如何仅导出该特定表中的内容？

我不能使用 Apache POI 库，因为我必须格式化（文本颜色、单元格颜色）JSP 中的内容。我需要在 excel 文件中使用相同的格式。

有人可以帮我吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:18:37.493

还没有找到在页面中仅导出单个表的方法。但是预期的任务（创建带有格式化数据的 excel 表）可以由 Apache POI HSSF 库完成

以下是学习方法和示例的链接 - [http://poi.apache.org/spreadsheet/how-to.html#user_api](http://poi.apache.org/spreadsheet/how-to.html#user_api)

[http://poi.apache.org/spreadsheet/examples.html](http://poi.apache.org/spreadsheet/examples.html)

# php - PHP - 检测国家

> ID：14414705
> 
> 赞同：1
> 
> 时间：2013-01-19T13:07:15.687
> 
> 标签：php, geo, country, country-codes

> **可能重复：**
> [用于在 php 中检测用户 contry 的包？](https://stackoverflow.com/questions/4457920/package-for-detecting-users-contry-in-php)
> [基于 IP 地址的地理位置 - PHP](https://stackoverflow.com/questions/7766978/geo-location-based-on-ip-address-php)

我想检测我的访问者所在的国家/地区。

我在谷歌找到了解决方案，但结果什么都没有。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T13:27:57.757

这是我将国家与访问者的IP一起获取的方式。

```
// this is where you get the ip
$ip = $_SERVER['REMOTE_ADDR'];

// this is where you include the code that gets the country
// you can find the code for this file on the link below    
include("geoiploc.php");

// this is where you create the variable that get you the name of the country
$country = getCountryFromIP($ip, " NamE "); 
```

[php geo ip loc 不起作用](https://stackoverflow.com/questions/16702162/php-geo-ip-loc-does-not-work)

希望这可以帮助。

愿代码与您同在！

更新：

这是我一直在使用的另一种方法

```
 $json = file_get_contents('http://ipinfo.io/' . $this->getIP());
    $data = json_decode($json);
    return $data->country; 
```

也有这项服务，但我发现上面的那个好多了……

```
 'http://getcitydetails.geobytes.com/GetCityDetails?fqcn=' . $this->getIP() 
```

这是获取ip的好方法：

```
private function getIP() {
    $server_keys = [
        'HTTP_CLIENT_IP',
        'HTTP_X_FORWARDED_FOR',
        'HTTP_X_FORWARDED',
        'HTTP_X_CLUSTER_CLIENT_IP',
        'HTTP_FORWARDED_FOR',
        'HTTP_FORWARDED',
        'REMOTE_ADDR'
    ];

    foreach ($server_keys as $key) {
        if (array_key_exists($key, $_SERVER) === true) {
            foreach (explode(',', $_SERVER[$key]) as $ip) {
                if (filter_var($ip, FILTER_VALIDATE_IP) !== false) {
                    return $ip;
                }
            }
        }
    }
} 
```

希望它可以帮助某人！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T13:11:06.763

```
 <?php 
// Author: www.easyjquery.com 
$ip = $_SERVER['REMOTE_ADDR']; 
// remember chmod 0777 for folder 'cache' 
$file = "./cache/".$ip; 
if(!file_exists($file)) { 
    // request 
    $json = file_get_contents("http://api.easyjquery.com/ips/?ip=".$ip."&full=true"); 
    $f = fopen($file,"w+"); 
    fwrite($f,$json); 
    fclose($f); 
} else { 
    $json = file_get_contents($file); 
} 

$json = json_decode($json,true); 
echo "<pre>"; 
print_r($json); 

?> 
```

[演示链接](http://api.easyjquery.com/test/demo-ip.php)

# r - R package tourr：颜色的一个因素

> ID：14414713
> 
> 赞同：2
> 
> 时间：2013-01-19T13:08:56.703
> 
> 标签：r

我正在寻找优秀的旅行团。我能够生成黑点动画，例如：

```
 library(ggplot2)
 library(tourr)

 animate(flea[, 1:6]) 
```

但是如何按因子生成带有彩色点的动画呢？按大小，按年份等的示例颜色点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T13:28:29.070

您可以使用 ？`animate_stereo`它使用红蓝立体图来显示 3d 游览路径。

```
animate_stereo(flea[, 1:6]) 
```

或类似的东西：

```
animate(data = flea[, 1:6], tour_path = grand_tour(4),
        display = display_stereo(blue = rgb(0, 0, 1), 
                                 red  = rgb(1, 0, 0))) 
```

# php - php curl从facebook下载多张照片作为zip不起作用

> ID：14414715
> 
> 赞同：0
> 
> 时间：2013-01-19T13:09:17.583
> 
> 标签：php, facebook-graph-api, curl, facebook-php-sdk

我正在使用 curl 从 Facebook url 为授权用户获取照片，对于每张照片，我将其添加到 zip 文件中，以允许用户以 zip 格式下载整个专辑。

```
 if( !isset($_GET['id']) )
die("No direct access allowed!");
    require 'facebook.php';
  $facebook = new Facebook(array(
'appId'  => 'removed',
'secret' => 'removed',
'cookie' => true,
));

if( !isset($_GET['id']) )
die("No direct access allowed!");
    $params = array();
    if( isset($_GET['offset']) )
        $params['offset'] = $_GET['offset'];
    if( isset($_GET['limit']) )
        $params['limit'] = $_GET['limit'];
    $params['fields'] = 'name,source,images';
    $params = http_build_query($params, null, '&');
    $album_photos = $facebook->api("/{$_GET['id']}/photos?$params");
    if( isset($album_photos['paging']) ) {
        if( isset($album_photos['paging']['next']) ) {
            $next_url = parse_url($album_photos['paging']['next'], PHP_URL_QUERY) . "&id=" . $_GET['id'];
        }
        if( isset($album_photos['paging']['previous']) ) {
            $pre_url = parse_url($album_photos['paging']['previous'], PHP_URL_QUERY) . "&id=" . $_GET['id'];
        }
    }
    $photos = array();
    if(!empty($album_photos['data'])) {
        foreach($album_photos['data'] as $photo) {
            $temp = array();
            $temp['id'] = $photo['id'];
            $temp['name'] = (isset($photo['name'])) ? $photo['name']:'photo_'.$temp['id'];
            $temp['picture'] = $photo['images'][1]['source'];
            $temp['source'] = $photo['source'];
            $photos[] = $temp;
        }
    }
    ?>
<?php if(!empty($photos)) { ?>
<?php
$zip = new ZipArchive();

$tmp_file =tempnam('.','');
$file_opened=$zip->open($tmp_file, ZipArchive::CREATE);

foreach($photos as $photo) {
    $url=$photo['source'];
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    $download_file=curl_exec($ch);
    #add it to the zip
    $file_added=$zip->addFile($download_file);
}

    # close zip
    $zip->close();

    # send the file to the browser as a download
    header('Content-Description: File Transfer');
    header('Content-Type: application/force-download');
    header('Content-Disposition: attachment; filename="albums.zip"');
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . filesize($tmp_file));
    ob_clean();
    flush();
    readfile($tmp_file);
    exit;
 } ?> 
```

问题： zip->open 创建一个文件， zip->add 为每个添加的文件返回 1 但 zip 大小仍然为 0 并且 readfile 不提示下载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T14:07:04.523

目前，您正在尝试这样做：

```
foreach ($photos as $photo) {
    $url = $photo['source'];
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    $download_file = curl_exec($ch);
    $file_added = $zip->addFile($download_file);
} 
```

这不起作用，因为`$dowload_file`它是一个**字符串**而不是一个**文件名**。您需要将 cURL 参数保存到文件中，并将文件名传递给`$zip->addFile`. 如果您查看[PHP 的文档](http://php.net/manual/en/ziparchive.addfile.php)，它需要一个文件名，而不是字符串：

> 要添加的文件的路径。

您需要执行以下操作：

```
$temp_file = './temp_file.txt';
file_put_contents($temp_file, $download_file);
$file_added = $zip->addFile($temp_file);

// Delete after use
unlink($temp_file); 
```

# c# - 无法在 detailsview 模板字段中找到控件

> ID：14414716
> 
> 赞同：0
> 
> 时间：2013-01-19T13:09:32.853
> 
> 标签：c#, asp.net, session, detailsview

我遇到了这个错误“对象引用未设置为对象的实例。” 当我尝试设置我从上一页获得会话的值并将其设置在模板字段上时。当我调试它时，会话值在那里（成功会话结束）。我想要做的是显示我在 detailsview 上的会话的价值。

aspx：

```
 <asp:DetailsView ID="DetailsView1" runat="server" AutoGenerateRows="False">

    <Fields>
        <asp:TemplateField HeaderText="Order Number " SortExpression="poNum">

            <ItemTemplate>
                <asp:Label ID="test" runat="server" Text='<%# Bind("poNum") %>'></asp:Label>
            </ItemTemplate>

        </asp:TemplateField>

       </Fields>
    </asp:DetailsView> 
```

后面的代码：

```
 protected void Page_Load(object sender, EventArgs e)
  {

    ((Label)DetailsView1.FindControl("test")).Text = Session["poNum"].ToString();
   } 
```

我想知道为什么我无法从 detailsview 中获得控制权？

**编辑**

```
 Label aaa = new Label();
    aaa.Text = Session["poNum"].ToString();

    Label orderNum = (Label)DetailsView1.FindControl("test"); // orderNum was null here 
    orderNum.Text = aaa.Text; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T13:24:00.700

您可以在 DetailsView 的 DataBound 事件中访问 Label。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T13:22:10.313

您是否在数据绑定 DetailsView 之前调用 FindControl？如果是这样，它将返回 null - 还没有任何东西可以找到。

# java - 使用 java hibernate 插入

> ID：14414719
> 
> 赞同：0
> 
> 时间：2013-01-19T13:09:43.797
> 
> 标签：java, hibernate

我有一个客户

```
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Basic(optional = false)
@Column(name = "cl_id")
private Long clId;

@JoinColumn(name = "vl_id", referencedColumnName = "vl_id")
@ManyToOne
private City cityId; 
```

每当我以这种方式创建新客户端时：

```
Client c = new Client();
c.setCityId(new City()); 
```

并坚持下去。如果城市不存在，它也不存在。除非 City 对象有一个 Id ，否则这个城市不会被持久化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T13:30:26.490

您必须启用[级联](http://en.wikibooks.org/wiki/Java_Persistence/Relationships#Cascading)：

```
@JoinColumn(name = "vl_id", referencedColumnName = "vl_id")
@ManyToOne(cascade=CascadeType.PERSIST)
private City cityId; 
```

# python - Python：TypeError：“builtin_function_or_method”类型的参数不可迭代

> ID：14414720
> 
> 赞同：12
> 
> 时间：2013-01-19T13:09:56.377
> 
> 标签：python, python-3.x

我有以下代码：

```
def search():
    os.chdir("C:/Users/Luke/Desktop/MyFiles")
    files = os.listdir(".")
    os.mkdir("C:/Users/Luke/Desktop/FilesWithString")
    string = input("Please enter the website your are looking for (in lower case):")
    for x in files:
        inputFile = open(x, "r")
        try:
            content = inputFile.read().lower
        except UnicodeDecodeError:
            continue
        inputFile.close()
        if string in content:
            shutil.copy(x, "C:/Users/Luke/Desktop/FilesWithString") 
```

总是给出这个错误：

```
line 80, in search
    if string in content:
TypeError: argument of type 'builtin_function_or_method' is not iterable 
```

有人可以解释为什么。

比

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-19T13:18:47.130

换行

```
content = inputFile.read().lower 
```

到

```
content = inputFile.read().lower() 
```

您的原始行将内置函数分配给您的变量内容，而不是调用该函数`str.lower`并分配绝对不可迭代的返回值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T13:19:32.593

你正在使用

```
content = inputFile.read().lower 
```

代替

```
content = inputFile.read().lower() 
```

即你得到的函数更低，而不是更低的返回值。

实际上你得到的是：

```
>>> 
>>> for x in "HELLO".lower:
...     print x
... 
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
TypeError: 'builtin_function_or_method' object is not iterable 
```

# php - 缓存php文件并返回缓存的html文件

> ID：14414722
> 
> 赞同：-1
> 
> 时间：2013-01-19T13:10:11.620
> 
> 标签：php, performance

我有一个非常大的 mysql 表，因此我试图 chache 整个 php 文件并返回缓存的 html 文件。

我很轻松地使用了这个[Caching Dynamic PHP pages](http://papermashup.com/caching-dynamic-php-pages-easily/)并且效果很好，但是当编写新的 html 文件的时候，它需要很长时间才能加载...我需要在哪里修改它...

**php代码：**

```
$cachefile = 'cache.html';
$cachetime = 4 * 60;
// Serve from the cache if it is younger than $cachetime
if (file_exists($cachefile) && time() - $cachetime < filemtime($cachefile)) {
include($cachefile);
echo "<!-- Cached copy, generated ".date('H:i', filemtime($cachefile))." -->\n";
exit;
}
ob_start(); // Start the output buffer

/* Heres where you put your page content */

// Cache the contents to a file
$cached = fopen($cacheFile, 'w');
fwrite($cached, ob_get_contents());
fclose($cached);
ob_end_flush(); // Send the output to the browser 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T13:14:35.370

假设您正在谈论 HTML 表格，这样的缓存不会加快加载时间。
渲染一个大表需要浏览器太多时间，而不是 PHP 来生成它。

因此，为了让事情变得更快，您必须减小表格大小或实施某种分页或动态加载。

# android - 为 Google Play 中的现有应用程序更新 Android 应用程序（.apk 文件）

> ID：14414727
> 
> 赞同：0
> 
> 时间：2013-01-19T13:10:33.380
> 
> 标签：android

目前我有四个`.apk`文件用于具有不同版本代码和版本 1.0 的 android 应用程序。现在我想用相同的四个`.apk`文件更新我的应用程序，但现在每个 apk 的清单文件都有一些更改。我为每个更新的`.apk`文件使用相同的证书密钥（现有一个）和不同的版本代码和 1.1 版本。

现在在我的 Google Play 帐户中，现有的四个 apk 处于活动模式。现在，当我上传更新的四个 apk 时，我也必须激活它们。

我的问题是我应该停用旧的还是让它们保持原样？

**以前用过：**

```
android:minSdkVersion="7"
android:targetSdkVersion="16" 
```

**目前使用：**

```
 android:minSdkVersion="8"
 android:targetSdkVersion="16" 
```

# linked-list - Dwolla - 关联交易或决斗付款

> ID：14414731
> 
> 赞同：1
> 
> 时间：2013-01-19T13:10:44.643
> 
> 标签：linked-list, dwolla

场景 - 想让客户在我们的网站上购买产品，直接向供应商付款，同时触发供应商向我们付款。

这可以用 Dwolla 完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:46:08.210

是的，这可以使用[`transactionSend()`API 调用](https://developers.dwolla.com/dev/docs/transactions/send)来完成，您的 Dwolla 帐户会将钱汇到供应商的 Dwolla 帐户。如上所述，您可以`facilitator fee`从此交易中获取一个（`facilitatorAmount`是`transactionSend()`选项之一）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:19:18.947

您是要收取一定比例的订单，还是只在 dwolla 的费用之上收取费用？另外，你在什么环境下工作？即，您是使用 php、ruby 等进行编码，还是使用 Dwolla 为非编码人员提供的简单链接之一？

编辑：您可以收取固定费用或按百分比收取调解人费用。这是 api 的链接： [https](https://developers.dwolla.com/dev/pages/facilitator) ://developers.dwolla.com/dev/pages/facilitator 如果您愿意，可以根据文档以编程方式更改每个事务。

如果您使用的是 Dwolla 的非编码器链接，那么我不知道。

# asp.net-mvc - 获取当前路线并为其添加参数

> ID：14414735
> 
> 赞同：1
> 
> 时间：2013-01-19T13:11:07.103
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我在 MVC 剃刀视图中有以下路由 url

```
@Url.RouteUrl(new { lang = "EN"}) 
```

**我想让它匹配当前视图的默认映射路由并在末尾添加查询字符串参数**

我的 global.asax.cs 文件中只有控制器操作的默认映射路由。

我最近安装了 ELMAH，现在第一场比赛是

```
/elmah?lang=EN 
```

我试过看看下面给我带来了什么

```
@Url.RouteUrl(Url.RequestContext.RouteData.Values.Values) 
```

我最终得到

```
/elmah?Count={number of errors here} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T16:43:27.397

回答@nemesv 的问题，他在评论中尽可能地回答了这个问题

> 您可以通过两个步骤并借助临时变量来完成。像这样：

```
@{ 
    var myRouteValues = new RouteValueDictionary(
        Url.RequestContext.RouteData.Values
    );
    myRouteValues.Add("lang", "EN"); 
} 

@Url.RouteUrl(myRouteValues) 
```

这只是为了让我可以关闭它。

# html - Perl LibXML 获取节点的最后一行

> ID：14414738
> 
> 赞同：0
> 
> 时间：2013-01-19T13:11:26.353
> 
> 标签：html, xml, perl, libxml2

我在 Perl 中使用 LibXML，它存储每个节点的起始行号，但我如何才能获得最后一个？

我尝试通过..获取最后一行号

*   ..counting 节点的innerhtml 中的换行符，但LibXML 以与原始格式不同的格式返回innerhtml，因此行号不同。
*   ..node->getLastChild->line_number，但也没有成功。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T22:47:43.080

如果`line_number`按照您所说的返回节点的第一行，您只需要

```
my $s_line_num = $node->line_number();
my $e_line_num = $node->nextSibling()->line_number(); 
```

但事实并非如此。`line_number`返回的实际上更接近节点最后一行的编号。为此，我们可以简单地查看前一个兄弟的行号。

```
my $s_line_num = $node->previousSibling()->line_number();
my $e_line_num = $node->line_number(); 
```

但是，虽然这是它为非元素节点返回的内容，但它返回元素的开始标记（而不是整个元素）的最后行号。那是完全没用的。

对不起，没办法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-18T14:22:38.403

如果 line_number 如您所说返回节点的第一行，那么您只需要

```
my $parser = XML::LibXML->new( XML_LIBXML_LINENUMBERS==>1);

my $e_line_num = $node->line_number(); 
```

=> 1);

# c++ - 重写这个智能指针

> ID：14414739
> 
> 赞同：1
> 
> 时间：2013-01-19T13:11:59.083
> 
> 标签：c++, smart-pointers, ace, poco-libraries

我将一些代码从 ACE 转移到 Poco。我是多线程设计的新手，所以让我有点困惑！

```
typedef Arc::AutoPtr<ResultSet, ACE_Thread_Mutex> QueryResult; 
```

我不能像这样重写它，因为 Poco::AutoPtr 只接受一个参数作为类模板

```
typedef Poco::AutoPtr<ResultSet, Poco::Mutex> QueryResult; 
```

我该怎么写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T13:59:14.200

我不确定是什么`Arc::AutoPtr`，因为我在 ACE 文档中找不到类似的内容。但是，如果它与 Poco 的相应 typedef 相同，`ACE_Refcounted_Auto_Ptr`则可能是`typedef Poco::SharedPtr<ResultSet> QueryResult;`. 但是从文档中不清楚 Poco 中的 SharedPtr 是否实现了线程安全引用计数，所以你必须小心。

`Poco::AutoPtr`实际上是一个侵入式智能指针，需要指向类型的支持（类似于`boost::intrusive_ptr`）。

# android - 自定义视图未正确显示嵌套的 ImageView

> ID：14414742
> 
> 赞同：0
> 
> 时间：2013-01-19T13:12:12.537
> 
> 标签：android, android-custom-view

我一直在尝试创建一个自定义视图，用于指示专有设备的电池电量。

因此，当读取设备的电池电量时，会`setPercentage(int batteryLevel)`在自定义视图上调用该方法：

问题是，无论我设置什么值，自定义视图似乎都没有改变。

这是课程：

```
public class RectangleView extends LinearLayout {
    private ArrayList<ImageView> views = new ArrayList<ImageView>();

    public RectangleView(Context context, AttributeSet attributeSet) {
        super(context, attributeSet);
        init(context);
    }

    public RectangleView(Context context) {
        super(context);
        init(context);
    }

    private void init(Context context) {
        this.setOrientation(LinearLayout.HORIZONTAL);
        for (int i = 0; i < 10; i++) {
            ImageView loadingPiece = new ImageView(context);
            loadingPiece.setBackgroundColor(Color.BLACK);
            this.addView(loadingPiece);
            LayoutParams layoutParams = (LayoutParams)loadingPiece.getLayoutParams();
            layoutParams.weight = 1.0f;
            layoutParams.height = this.getHeight();
            layoutParams.width = 0;
            loadingPiece.setLayoutParams(layoutParams);
            views.add(loadingPiece);
        }
    }

    public void setPercentage(int amountToShow) {
        for (int i = 0; i < views.size(); i++) 
            if (i < amountToShow)
                views.get(i).setVisibility(View.VISIBLE);
            else
                views.get(i).setVisibility(View.INVISIBLE);
    }
} 
```

校准 setPersentage(5) 应该显示 5 个图像视图 - 但是没有任何改变，视图本身似乎是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T13:18:49.793

我认为这是因为`LayoutParams`您使用了（当时`getHeight()`返回）。`0`看看这是否有所作为：

```
 this.setOrientation(LinearLayout.HORIZONTAL);
    for (int i = 0; i < 10; i++) {
        ImageView loadingPiece = new ImageView(context);
        loadingPiece.setBackgroundColor(Color.BLACK);
        LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(0,
            LinearLayout.LayoutParams.FILL_PARENT, 1.0f);
        this.addView(loadingPiece, lp);   
        views.add(loadingPiece);        
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T13:27:22.333

我认为使用带有自定义可绘制背景的简单视图并根据百分比以不同方式呈现该背景会更容易。或者为什么不使用 ProgressBar？

# css - 哪个背景图像优先。媒体查询或 css？

> ID：14414743
> 
> 赞同：1
> 
> 时间：2013-01-19T13:12:15.983
> 
> 标签：css, media-queries, css-specificity

我的问题是关于背景图像。我正在为 iPhone 屏幕设计一个主页，我想为移动版本使用稍微不同的图像。我的媒体查询不在单独的 css 文件中，只是嵌入在 index.html 中。问题...主要的 CSS 图像覆盖了我的查询图像。我检查了额外的括号等。我认为媒体查询优先于主 css？如果我将媒体查询放在 css 链接文件中，我会得到我想要的结果吗？

这是我的主要css代码：

```
#container
{
  background-image:url(images/1000_framec.jpg);
  background-repeat:no-repeat;
  width:999px;
  height:980px;
  margin:0 auto;
} 
```

以下是我的媒体查询代码：

```
@media only screen and max-width 320px {
  #container
  {
    width:98%;
    background:url(images/1000_frameo.jpg) no repeat left;
    margin-top:80px;
    -webkit-background-size:contain;
    -moz-background-size:contain;
    -o-background-size:contain;
    background-size:contain;
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T13:19:31.273

媒体查询和`@media`规则*是*CSS。但是这些[对 cascade 是透明的](https://stackoverflow.com/questions/13241531/what-are-the-rules-for-css-media-query-overlap/13611538#13611538)，因此无论您是否将样式规则放入规则中`@media`，或者是否将其放入已链接的样式表中`media="..."`，都不会影响该规则在 cascade 中的优先级。

其余的[级联规则](http://www.w3.org/TR/CSS21/cascade.html)照常适用：最具体的选择器胜出，一系列同样具体的选择器中的最后一个胜出，内联样式优先于内部样式表，而内部样式表又优先于外部样式表，以及很快。

# c++ - c++ 类及其布局和转换

> ID：14414745
> 
> 赞同：1
> 
> 时间：2013-01-19T13:12:41.350
> 
> 标签：c++, oop, polymorphism

我得到了这段代码来测试我对 cpp 的理解，我很困惑：

```
#include "stdafx.h"
#include <iostream>
#include <cstddef>

using namespace std;

class A
{
public:
    A() : m_x(0) { }

public:
    static ptrdiff_t member_offset(const A &a)
    {
        const char *p = reinterpret_cast<const char*>(&a);
        const char *q = reinterpret_cast<const char*>(&a.m_x);

        return q - p;
    }

private:
    int m_x;
};

class B
    : public A
{
public:
    B() : m_x('a') { }

public:
    static int m_n;

public:
    static ptrdiff_t member_offset(const B &b)
    {
        const char *p = reinterpret_cast<const char*>(&b);
        const char *q = reinterpret_cast<const char*>(&b.m_x);

        return q - p;
    }

private:
    char m_x;
};

int B::m_n = 1;

class C
{
public:
    C() : m_x(0) { }
    virtual ~C() { }

public:
    static ptrdiff_t member_offset(const C &c)
    {
        const char *p = reinterpret_cast<const char*>(&c);
        const char *q = reinterpret_cast<const char*>(&c.m_x);

        return q - p;
    }

private:
    int m_x;
};

int _tmain(int argc, _TCHAR* argv[])
{
    A a;
    B b;
    C c;
    std::cout << ((A::member_offset(a) == 0) ? 0 : 1);
    std::cout << ((B::member_offset(b) == 0) ? 0 : 2);
    std::cout << ((A::member_offset(b) == 0) ? 0 : 3);
    std::cout << ((C::member_offset(c) == 0) ? 0 : 4);
    std::cout << std::endl;

    return 0;
} 
```

答案是0204。前3个案例我都懂了，最后一个没懂。last 和 first 之间的区别在于虚拟析构函数。这有关系吗？如果是，如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T13:19:24.807

该代码示例具有**[实现定义的行为](https://stackoverflow.com/questions/2397984/undefined-unspecified-and-implementation-defined-behavior)**。无法保证任何情况下的输出。**不能**保证类的成员总是放置在连续的内存位置。它们之间可以添加填充字节。并且是否添加填充作为实现细节被忽略了。您对扮演角色的怀疑`virtual`可能是真的^([注1：])。但需要注意的重要一点是即使没有`virtual`输出也不能保证。

**参考：**
C++11：9.2 类成员 [class.mem]

> 14) 分配具有相同访问控制（第 11 条）的（非联合）类的非静态数据成员，以便后面的成员在类对象中具有更高的地址。未指定具有不同访问控制的非静态数据成员的分配顺序 (11)。**实现对齐要求可能会导致两个相邻的成员不会被立即分配；管理虚拟功能 (10.3) 和虚拟基类 (10.1) 的空间要求也是如此。**

* * *

^([注 1]：)
动态调度本身是一种实现定义的机制，但大多数（*阅读所有已知*的）实现都使用虚拟表和指针机制来实现它。
对于多态类（*不从任何其他类派生*） ，***通常***虚拟指针存储为类的第一个元素。因此，当您在环境中运行代码示例时，可以合理地假设这是在最后一种情况下发生的幕后情况。

**[在线样本](http://ideone.com/lUhw58)**：

```
#include<iostream>
using std::cout;
using std::endl;

class B;
typedef void (*HANDLE_DOSOMETHING)(B *const, int q);

class B
{
public:
  virtual void doSomething(int q)
  {
      std::cout<<"B::doSomething()"<<q<<endl;
  }
  void dummy()
  {
      HANDLE_DOSOMETHING *f1ptr = NULL;
      int                *vtbl  = NULL;
      int                *vptr  = (int *)this; // address of the object

      vtbl = (int *)*vptr; //address of the VTABLE

      f1ptr = (HANDLE_DOSOMETHING *)&(vtbl[0]); //address of the 1st virtual function
      (*f1ptr)(this, 55);
   }
};
int main()
{
    B objb;
    objb.dummy();
    return 0;  
} 
```

**输出：**

```
B::doSomething()55 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T13:23:49.643

是的，虚拟成员函数（在本例中为析构函数）保存在“vtable”中，该“vtable”通常存储为类数据结构的第一个元素。

但是，请注意，C++ 标准中没有严格的规则说明情况就是如此。

# javascript - 如何比较值

> ID：14414747
> 
> 赞同：0
> 
> 时间：2013-01-19T13:12:49.040
> 
> 标签：javascript, jquery, html

这是我的代码

我通过 ajax 和 mysql 从数据库中获取电子邮件地址，它在 . 所以在下面的功能比较（）中，我从跨度检索数据以与文本字段数据进行比较。但它没有正确比较。请帮帮我

```
function validate(pageForm) 
    {
    /************Getting error values in return values***********************/
    var returncomparing = "";

    /*********************************/
      //FIELD WHICH YOU HAVE TO VALDATE

      returncomparing += comparing(pageForm.email);
     /********************************************/

      if (returncomparing != "") 
      {

          document.getElementById('error').innerHTML = returnIndustry;

      }

          return false;
    } 
```

给出正确的 EMAIL 后仍然给出错误...（请提供登录用户 ID）

```
function comparing(pageForm){
    var error = "";
     // var fetchedEmail=document.forms["pageForm"]["email_fetch"].value;
     var em=document.forms["pageForm"]["email"].value;
     //var emai = document.getElementById('emlTst').value;
     var email = document.getElementById('txtHint').innerHTML;
     //document.getElementById('emlTst').value = email;
    if(em != email){
        document.getElementById('error_email2').innerHTML="Please Provide Login User ID";
        pageForm.style.borderColor = 'red';
        error='5';
     }
     else  if(em == email){
            document.getElementById('error_email2').innerHTML="";
            error = "";
         }
         else {
             document.getElementById('error_email2').innerHTML="";
             pageForm.style.borderColor = '#c7c7c7';
             }
  return error;
}
/*************************************************************/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T13:26:50.377

```
 var em = $('#email').val().toLowerCase();
 var email = $('#txtHint').val().toLowerCase(); 
```

# linux - “mov rax, QWORD PTR fs:0x28” 汇编指令有什么作用？

> ID：14414763
> 
> 赞同：17
> 
> 时间：2013-01-19T13:15:02.467
> 
> 标签：linux, assembly, gdb, x86-64

在此指令执行之前，fs 包含 0x0。

另外我想知道我如何从 GDB 中的这个内存区域读取，那会是什么命令？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-21T08:08:50.180

现代操作系统（如 Linux 和 Windows）中的`fs`和`gs`寄存器指向线程特定的和其他操作系统定义的结构。修改段寄存器是受保护的指令，因此只有操作系统可以为您设置这些。

这个问题应该有助于解释究竟是什么意思：[amd64 fs/gs registers in linux](https://stackoverflow.com/questions/6611346/amd64-fs-gs-registers-in-linux)。

寄存器的实际值`fs`不是地址。它是一个*选择器*- GDT 的偏移量，描述了该段可以/不能用于什么。您看不到隐藏的 fs 基址和限制寄存器的值是什么 - 它们是内部 CPU 寄存器，只能通过向 fs 写入新的“选择器”来更新（此时基址/限制寄存器从 GDT 更新）。

# c# - 对要分配给 Combobox 的列表进行排序

> ID：14414765
> 
> 赞同：1
> 
> 时间：2013-01-19T13:15:17.077
> 
> 标签：c#, .net, wpf, .net-4.5, generic-list

我有一个字符串列表让我们说

```
List<string> mia = new list<string>; 
```

我正在从数据库中向其中添加数据

```
using (SqlCommand command = new SqlCommand("SELECT xyz FROM table",sqlConnection1))
{
     sqlConnection1.Open();
     using (SqlDataReader reader = command.ExecuteReader())
     {
          while (reader.Read())
          {
               mia.Add(reader["xyz"].ToString());
          }

     }
     sqlConnection1.Close();                     
} 
```

数据已成功添加到其中。

```
combobox.ItemsSource =mia; 
```

即使这样也很好

但是当我尝试做

```
comboOpthol.ItemsSource =mia.Sort(); 
```

智能感知抛出错误无法将类型“void”隐式转换为`System.collections.IEnumerable`. 为什么会出现这个错误。我的列表包含所有数据，那么为什么显示它无效？列表定义列表的方式有问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-19T13:18:09.880

因为该`Sort()`方法没有返回值（它将列表排序并返回`void`）。您需要先排序，然后将列表分配给项目源：

```
mia.Sort();
comboOpthol.ItemsSource = mia; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T13:18:30.460

`List<T>.Sort`不返回新列表，而是对现有列表进行排序。

```
mia.Sort();
comboOpthol.ItemsSource = mia; 
```

考虑在数据库级别使用 对结果进行排序`ORDER BY`。

You've tagged your question with `linq` which leads me to believe you think `List<T>.Sort()` is linq. It is not, it's a method of `List<T>`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T13:18:48.223

You should sort it before setting it as source:

```
mia.Sort();
comboOpthol.ItemsSource =mia; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T13:19:08.963

This is happening because .Sort() does not return a "new" sorted list. It just sorts the excisting one.

Just do

```
mia.Sort();
comboOpthol.ItemsSource = mia; 
```

# macos - 沙盒允许我的应用程序点击 Quartz 事件吗？

> ID：14414766
> 
> 赞同：2
> 
> 时间：2013-01-19T13:15:19.060
> 
> 标签：macos, appstore-sandbox

根据[该软件](http://smilesoftware.com/textexpander/faq.html)的作者：

`TextExpander cannot be "sandboxed" according to the latest restrictions from Apple`

这是 TextExpander 所做的：

`TextExpander saves your fingers and your keyboard, expanding custom keyboard shortcuts into frequently-used text`

这到底是什么意思？我想对 Quartz 事件做出反应并相应地发布 Quartz 事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T16:50:56.827

它看起来不可能`CGEventTap`在沙盒应用程序中使用。这个[Apple Developer Forum 主题](https://devforums.apple.com/message/742845#742845)显示了一些细节。

# php - Codeigniter - 限制从 URL 调用直接访问控制器功能

> ID：14414768
> 
> 赞同：2
> 
> 时间：2013-01-19T13:15:37.100
> 
> 标签：php, codeigniter, codeigniter-2

我想知道是否有任何方法可以限制通过 URL 访问我的控制器功能。但我想通过我在网站上的链接给他们打电话。例如，如果我的站点中有一个指向控制器功能的链接：

```
<a href='test/function'>Call me</a> 
```

但是当我将上述 URL 放在浏览器地址栏中时，我不希望调用控制器函数。有人能帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T13:30:06.960

这是不可能的。Apache 和 CodeIgniter 允许通过手动输入的浏览器 URL 或访问的超链接访问您的 PHP 脚本到外部世界。两种方案都以完全相同的方式连接到您的 Web 应用程序，但它们的*到达方式不同*。

您可以使用以下方法仅允许访问您的 CodeIgniter 脚本（即阻止公共用户访问控制器）：

```
if ( ! defined('BASEPATH')) exit('No direct script access allowed'); 
```

正如马库斯所指出的，你可以使用类似的东西：

```
if (!$_SERVER['HTTP_REFERER']) $this->redirect('/home'); 
```

但它往往非常不一致。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-10T10:57:00.013

解决方法：将此代码放在每个控制器方法的开头

```
if (defined('BASEPATH') && !$this->input->is_ajax_request()) 
    exit('No direct script access allowed'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T13:39:39.477

正如您在评论中所说，如果您想通过 AJAX 加载链接：

您的标记：

```
<a href="test/function" data-key="abc"> 
```

你的jQuery：

```
$('a').on('click',function(){
    var data = $(this).data('key');
    $('#result').load($(this).attr("href") + '?key=' + data);
}); 
```

然后在您的 CodeIgniter 控制器中，您检查您的密钥是否存在并匹配（“abc”），否则您返回 403 或类似的东西。

此外，您当然可以检查`$_SERVER['HTTP_REFERER']`用户来自哪里（但这很容易被欺骗），并且仅在您自己的站点发出 GET 请求时才允许访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-20T17:16:12.723

这真的很有帮助。我还将此添加为附加检查

```
$allowed_host = gethostname();
$host = parse_url($_SERVER['HTTP_REFERER'], PHP_URL_HOST);
if(substr($host, 0 - strlen($allowed_host)) != $allowed_host)
  $this->redirect('/home');` 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-23T04:50:04.400

```
 In view: `<input type="hidden" value="1" name="back">`

 put inside your function in Controller: 

if(($this->input->post('back'))==1)
              {
                echo " what you want do here";
              }
              else
              {
                 $this->load->view('template',array('welcome_page')) ;
              } 
```

表单验证，您将在此 if 条件中输入..这肯定会工作..

# jna - JNA 在 ubuntu 11.10 及以后版本无法获取系统空闲时间

> ID：14414771
> 
> 赞同：0
> 
> 时间：2013-01-19T13:16:35.033
> 
> 标签：jna, ubuntu-11.10

JNA 在 ubuntu 11.10 版本以后无法获取系统空闲时间。

```
 public static long getIdleTimeMillis() {
            X11.Window win = null;
            Xss.XScreenSaverInfo info = null;
            X11.Display dpy = null;

            final X11 x11 = X11.INSTANCE;
            final Xss xss = Xss.INSTANCE;

            long idlemillis = 0L;
            try {
                    dpy = x11.XOpenDisplay(null);
                    win = x11.XDefaultRootWindow(dpy);
                    info = xss.XScreenSaverAllocInfo();
                    xss.XScreenSaverQueryInfo(dpy, win, info);

                    idlemillis = info.idle.longValue();

            } finally {
                    if (info != null)
                            x11.XFree(info.getPointer());
                    info = null;

                    if (dpy != null)
                            x11.XCloseDisplay(dpy);
                    dpy = null;
            }
            return idlemillis; 
```

我正在使用此代码来捕获空闲时间。它在较低版本的 ubuntu 中运行良好。但它不适用于最新版本。

它没有从生产线上移动

最终 Xss xss = Xss.INSTANCE;

请建议我一个适当的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T13:35:47.463

事实上，这个代码只有在系统上安装了“libxss1”包时才有效。从 ubuntu 11.10 开始，默认不安装 libXss.so。

sudo apt-get install libxss1 解决这个问题，但是需要额外的系统包安装

# javascript - 画布的 HTML5 适合和居中内容

> ID：14414776
> 
> 赞同：0
> 
> 时间：2013-01-19T13:17:13.663
> 
> 标签：javascript, html, canvas

我想创建一个画布，它可以自动适应并自动居中绘制在其上的形状。

我有：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />

    <title>Fit Canvas Content</title>

</head>

<body>
    <canvas id="myCanvas" width="500" height="500" style="border:1px solid #000000;">
        Your browser doesn't support the HTML5 canvas.
    </canvas>
    <script>
        var c = document.getElementById("myCanvas");
        var ctx = c.getContext("2d");
        ctx.fillStyle = "black";
        ctx.fillRect(-5, -50, 10, 100);
        ctx.fillRect(-50, -5, 100, 10);
    </script>
</body>
</html> 
```

请记住，画布内容是动态的，形状可以位于任何位置并且可以具有任何大小。

![画布上的形状集合](../Images/4f8cd41e604251cc319bac040815050e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T16:19:23.977

我猜你想要这样的东西：http: [//jsfiddle.net/e3qSP/1/](http://jsfiddle.net/e3qSP/1/)

这是用于绘制包含 JSDoc 的加号的函数：

```
var c = document.getElementById("myCanvas");
var ctx = c.getContext("2d");
ctx.fillStyle = "black";
drawPlus(20, c);

/**
 * Draws plus in the middle of the canvas with specified width
 *
 * @public
 * @param {number} plusWidth The width of the plus
 * @param {canvas} canvas The canvas on which the plus should be drawn
 */
function drawPlus(plusWidth, canvas) {
    var height = parseInt(canvas.height),
        width = parseInt(canvas.width),
        size = Math.min(height, width);
    ctx.fillRect((width - plusWidth) / 2, (height - size) / 2, plusWidth, size);
    ctx.fillRect((width - size) / 2, (height - plusWidth) / 2, size, plusWidth);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-07T10:43:45.577

This will fit and scale to the canvas. Note that there is no padding, but thats easy to add

Firstly, you need to setup something to track transforms.

```
this.trackTransforms = function (ctx) {
    var svg = document.createElementNS("http://www.w3.org/2000/svg", 'svg');
    var xform = svg.createSVGMatrix();
    ctx.getTransform = function () { return xform; };

    var savedTransforms = [];
    var save = ctx.save;

    ctx.save = function () {
        savedTransforms.push(xform.translate(0, 0));
        return save.call(ctx);
    };

    var restore = ctx.restore;
    ctx.restore = function () {
        xform = savedTransforms.pop();
        return restore.call(ctx);
    };

    var scale = ctx.scale;
    ctx.scale = function (sx, sy) {
        xform = xform.scaleNonUniform(sx, sy);
        return scale.call(ctx, sx, sy);
    };

    var rotate = ctx.rotate;
    ctx.rotate = function (radians) {
        xform = xform.rotate(radians * 180 / Math.PI);
        return rotate.call(ctx, radians);
    };

    var translate = ctx.translate;
    ctx.translate = function (dx, dy) {
        xform = xform.translate(dx, dy);
        return translate.call(ctx, dx, dy);
    };

    var transform = ctx.transform;
    ctx.transform = function (a, b, c, d, e, f) {
        var m2 = svg.createSVGMatrix();
        m2.a = a; m2.b = b; m2.c = c; m2.d = d; m2.e = e; m2.f = f;
        xform = xform.multiply(m2);
        return transform.call(ctx, a, b, c, d, e, f);
    };

    var setTransform = ctx.setTransform;
    ctx.setTransform = function (a, b, c, d, e, f) {
        xform.a = a;
        xform.b = b;
        xform.c = c;
        xform.d = d;
        xform.e = e;
        xform.f = f;
        return setTransform.call(ctx, a, b, c, d, e, f);
    };

    var pt = svg.createSVGPoint();
    ctx.transformedPoint = function (x, y) {
        pt.x = x; pt.y = y;
        return pt.matrixTransform(xform.inverse());
    }
} 
```

Next you need to be able to actually fit the contents. My function assumes you know the absolute width and height of the contents, you'll have to figure this out yourself but should be fairly easy. Note that if something starts at -150 and goes to +150, its width is 300.

```
this.fitToContents = function (widthOfContents, heightOfContents) {

    var p1 = this.context.transformedPoint(0, 0);
    var p2 = this.context.transformedPoint(this.canvas.width, this.canvas.height);

    var centerX = (p2.x - p1.x) / 2;
    var centerY = (p2.y - p1.y) / 2;

    centerX -= widthOfContents / 2;
    centerY -= heightOfContents / 2;

    this.context.translate(centerX, centerY);

    var lastX = this.canvas.width / 2,
        lastY = this.canvas.height / 2;

    var scaleFactorX = this.canvas.width / widthOfContents;
    var scaleFactorY = this.canvas.height / heightOfContents;

    var scaleFactorToUse = Math.abs(scaleFactorX) < Math.abs(scaleFactorY) ? scaleFactorX : scaleFactorY;

    var pt = this.context.transformedPoint(lastX, lastY);
    this.context.translate(pt.x, pt.y);
    this.context.scale(scaleFactorToUse, scaleFactorToUse);
    this.context.translate(-pt.x, -pt.y);
} 
```

Putting it together itll look something like this:

```
this.init = function (elementId) {
    this.canvas = document.getElementById(elementId);
    this.context = this.canvas.getContext('2d');

    this.trackTransforms(this.context);

    this.context.canvas.width = this.canvas.offsetWidth;
    this.context.canvas.height = this.canvas.offsetHeight;

    this.draw();
}

this.draw = function () {

    this.fitToContents(300,300);

    // you can now draw other stuff
    // you can probably only fit to contents once, 
    // in the init function, if their positions don't change
    this.drawStuff();
} 
```

# ruby-on-rails - to_json 正在返回空对象

> ID：14414777
> 
> 赞同：1
> 
> 时间：2013-01-19T13:17:27.027
> 
> 标签：ruby-on-rails, json

我有一个具有以下定义的 ruby​​ 类：

```
class MyResponse
        attr_writer :status, :message

        def initialize(status,message) 
                @status = status
                @message = message
        end
end 
```

当我尝试对 MyResponse 类型的对象执行 to_json 时，我正确地获取了 json 转换后的字符串。

问题是，使用传递给 MyResponse 的相同参数集，我有时会得到空字符串。

前任：

```
response = MyRespons.new("Abcd", 0) 
```

puts response.to_json 给出：

```
"{\"status\": \"Abcd\", \"message\": 0}" 
```

有时也会给出：

```
"\"#<MyResponse:0xb687d884>\"" 
```

我的问题是如何捕获 json 错误？因为，在第二种情况下，传递给 MyResponse 类的参数绝对没有区别。

行为是随机的。

更新：我发现了一个类似的问题。但答案是更新 gem。我无法更新我当前的 gem。 [Rails：to_json 方法未按预期工作](https://stackoverflow.com/questions/5836537/rails-to-json-method-not-working-as-expected?rq=1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T05:53:12.937

好吧，原来 json gem 有问题。我现在正在使用原始 to_json 的别名，这似乎工作正常。

# php - jquery创建自定义表单并使用可拖动插件进行排列，用户完成后如何保存？

> ID：14414778
> 
> 赞同：0
> 
> 时间：2013-01-19T13:17:43.283
> 
> 标签：php, mysql, css, jquery-ui, draggable

简单的 php/mysql/js 项目需要我让用户能够自定义一些表单。所以我写了这个页面，这样用户就可以编辑默认表单，添加自己的输入并拖动它们以根据需要排列它们。

现在我的问题是如何保存最终结果？我应该将每个输入的样式输入 mysql 吗？或者我应该提取所有输入的所有 css 并将它们作为文本保存到 mysql 中？

有任何想法吗 ？

[小提琴示例](http://jsfiddle.net/5D8Xc/)

这是我的代码html

```
<h1>Form editer</h1>
<div id='form' style="position:relative;width:100%;border:1px dashed grey"></div>
<div id="generator">
   <label for="label">label</label><input type="text" value="" name="label">
   <label for="system">System name</label><input type="text" value="" name="system">
   <label for="type">input type</label><select name="type">
   <option value="input">input</option><option value="dropdown">dropdown</option</select>
   <label for="value">value</label><input type="text" value="" name="value">
   <button type="button" name="generate">generate</button>
   <div style="border:1px solid;width:250px;height:50px;margin: 0 auto;" id="tempo"></div>
   <button id="add_2_form" type="button" name="add to form">add to form</button>
</div> 
```

Js（插件：jquery，可拖动）

```
$('button[name="generate"]').click(function(){
    var html,
    label=$('#generator input[name=label]').val(),
    sys=$('#generator input[name=system]').val(),
    type=$('#generator [name=type]').val(),
    value=$('#generator input[name=value]').val(),x;

    if(type == 'dropdown'){
        html='<label for="'+sys+'">'+label+'</label><select name="'+sys+'">';
        arr=value.split(",");
        for (x in arr)
        {
        html=html+'<option value="'+arr[x]+'">'+arr[x]+'</option>';
        }
        html=html+'</select>';
        $('#tempo').html(html);
    }else{
        html='<label for="'+sys+'">'+label+'</label><input type="'+type+'" name="'+sys+'" value="'+value+'">';
        $('#tempo').html(html);
    }
});
$('#add_2_form').click(function(){
var html='<p>'+$('#tempo').html()+'</p>';
    $('#form').append(html);
    $('#form p').css('border','1px dashed blue').draggable();
}); 
```

![在此处输入图像描述](../Images/fb169e7766fede309640e9623cae4fe3.png)

到目前为止，这是我的代码，但是现在如何在用户创建表单并拖动所有输入后保存表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T13:22:52.487

您必须构建自己的定位机制并将它们保存在会话或 cookie（使用 PHP）或本地存储（使用 JavaScript）中。在用户第二次访问此页面时，检查旧设置是否存在并通过设置位置以适合您保存的内容来恢复 UI。

我认为最简单的机制是存储元素`name`（或`id`）及其`top`, `left`, ... 值。

# java - 使用 SWIG 制作 Java 共享库的 SIGSEGV 错误

> ID：14414779
> 
> 赞同：3
> 
> 时间：2013-01-19T13:17:59.137
> 
> 标签：java, swig, nfc, segmentation-fault

所以，我正在尝试使用 SWIG 将 C 库 (libnfc) 移植到 Java。

我已经到了编译共享库的地步，一个基本的“nfc_version()”方法调用就可以了。但是，调用“nfc_init()”进行设置会导致 SIGSEGV 错误。直接调用nfc库就可以了。

我用来生成共享库的命令：

```
swig -java -I../libnfc/include nfclib.i 
gcc -c -I/usr/lib/jvm/java-7-openjdk-i386/include/ -I/usr/lib/jvm/java-7-openjdk-i386/include/linux nfclib_wrap.c
gcc -shared nfclib_wrap.o ../build/libnfc/libnfc.so libnfc_wrap.so 
```

libnfc.i 文件：

```
%module nfc
%{
#include <nfc/nfc.h>
#include <nfc/nfc-types.h>
#include <nfc/nfc-emulation.h>
%}

%include <nfc/nfc.h>
%include <nfc/nfc-types.h>
%include <nfc/nfc-emulation.h> 
```

即它应该包括 libnfc 提供的所有方法。

这是我得到的错误日志：http: [//openetherpad.org/AyVDsO4XTg](http://openetherpad.org/AyVDsO4XTg)

显然，从我提供的信息中可能无法找到具体的解决方案。但是任何尝试的事情的建议都会非常感激（我在这里的知识已经结束了）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T18:33:05.610

要始终自动将相同的指针传递给函数，这在 SWIG 中相当简单。例如，给定“头”文件 test.h，它捕获了问题的核心部分：

```
struct context; // only used for pointers

void init_context(struct context **ctx) { *ctx=malloc(1); printf("Init: %p\n", *ctx); }
void release_context(struct context *ctx) { printf("Delete: %p\n", ctx); free(ctx); }

void foo(struct context *ctx) { printf("foo: %p\n", ctx); } 
```

我们可以包装它，并通过执行以下操作自动导致全局上下文传递到预期的任何地方：

```
%module test

%{
#include "test.h"

// this code gets put in the generated C output from SWIG, but not wrapped:
static struct context *get_global_ctx() {
  static struct context *ctx = NULL;
  if (!ctx) 
    init_context(&ctx);
  return ctx;
}
%}

%typemap(in,numinputs=0) struct context *ctx "$1=get_global_ctx();"

%ignore init_context; // redundant since we call it automatically

%include "test.h" 
```

这会为此设置一个类型映射`struct context *ctx`，而不是从 Java 获取输入，`get_global_ctx()`在匹配的任何地方自动调用。

这可能足以让 Java 开发人员使用一个理智的接口，但它并不理想：它强制上下文是全局的，这意味着没有 Java 应用程序可以同时使用多个上下文。

鉴于 Java 是一种 OO 语言，一个更好的解决方案是使上下文成为一流的对象。我们也可以让 SWIG 为我们生成这样的接口，尽管它有点复杂。我们的 SWIG 模块文件变为：

```
%module test

%{
#include "test.h"
%}

// These get called automatically, no need to expose:
%ignore init_context;
%ignore delete_context;

// Fake struct to convince SWIG it should be an object:
struct context {
  %extend {
    context() {
      // Constructor that gets called when this object is created from Java:
      struct context *ret = NULL;
      init_context(&ret); 
      return ret;
    }
    ~context() {
      release_context($self);
    }
  }
};

%include "test.h" 
```

我们可以成功地运行这段代码：

```
public class run {
  public static void main(String[] argv) {
    System.loadLibrary("test");
    context ctx = new context();
    // You can't count on the finalizer if it exits:
    ctx.delete();
    ctx = null;
    // System.gc() might also do the trick and in a longer
    // running app it would happen at some point probably.
  }
} 
```

给出：

```
Init: 0xb66dab40
Delete: 0xb66dab40 
```

在动态类型语言中，这将是最困难的部分——我们可以使用一种或另一种形式的元编程来根据需要插入成员函数。因此，我们将能够`new context().foo();`完全按预期说出类似的话。Java 是静态类型的，所以我们需要更多的东西。我们可以通过多种方式在 SWIG 中执行此操作：

1.  接受我们现在可以`test.foo(new context());`非常愉快地调用 - 尽管它看起来仍然很像 Java 中的 C，所以我建议如果你最终编写大量看起来像 C 的 Java，这可能是一种代码味道。

2.  用于`%extend`（手动）将方法添加到上下文类中，`%extend`在 test.i 中变为：

    ```
    %extend {
        context() {
          // Constructor that gets called when this object is created from Java:
          struct context *ret = NULL;
          init_context(&ret); 
          return ret;
        }
        ~context() {
          release_context($self);
        }
        void foo() {
          foo($self);
        }
      } 
    ```

3.  与 一样`%extend`，但使用类型映射在 Java 端编写胶水：

    ```
    %typemap(javacode) struct context %{
      public void foo() {
        $module.foo(this);
      }
    %} 
    ```

    （注意：这需要在接口文件中足够早才能工作）

请注意，我在这里没有向 SWIG 展示我的上下文结构的真实定义 - 对于需要真实定义的任何内容，它*始终*遵循我的“库”，因此不透明指针保持完全不透明。

* * *

`init_context`用双指针包装的更简单的解决方案是使用`%inline`提供一个仅在包装器中使用的额外函数：

```
%module test

%{
#include "test.h"
%}

%inline %{
  struct context* make_context() {
    struct context *ctx;
    init_context(&ctx);
    return ctx;
  }
%}

%ignore init_context;

%include "test.h" 
```

足以让我们编写以下Java：

```
public class run {
  public static void main(String[] argv) {
    System.loadLibrary("test");
    // This object behaves exactly like an opaque pointer in C:
    SWIGTYPE_p_context ctx = test.make_context();
    test.foo(ctx);
    // Important otherwise it will leak, exactly like C
    test.release_context(ctx);
  }
} 
```

替代但类似的方法将包括使用[cpointer.i 库](http://www.swig.org/Doc2.0/Library.html#Library_nn3)：

```
%module test

%{
#include "test.h"
%}

%include <cpointer.i>

%pointer_functions(struct context *,context_ptr);

%include "test.h" 
```

然后您可以将其用作：

```
public class run {
  public static void main(String[] argv) {
    System.loadLibrary("test");
    SWIGTYPE_p_p_context ctx_ptr = test.new_context_ptr();
    test.init_context(ctx_ptr);
    SWIGTYPE_p_context ctx = test.context_ptr_value(ctx_ptr);
    // Don't leak the pointer to pointer, the thing it points at is untouched
    test.delete_context_ptr(ctx_ptr);
    test.foo(ctx);
    // Important otherwise it will leak, exactly like C
    test.release_context(ctx);
  }
} 
```

还有一个`pointer_class`宏比这更面向对象，可能值得使用。关键是您提供了工具来处理 SWIG 用来表示它一无所知的指针的不透明指针对象，但避免了`getCPtr()`本质上颠覆类型系统的调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:52:23.960

所以 Flexo 的答案是解决这个问题的正确方法，但 SWIG 还提供了“cpointer.i”模块（在此处描述：[http](http://www.swig.org/Doc1.3/SWIGDocumentation.html#Library_nn3) ://www.swig.org/Doc1.3/SWIGDocumentation.html#Library_nn3 ），它允许我拼凑一个快速的解决方案，以便我可以测试我的基本库是否正常工作。我想我只是为了完整性而提出这个答案，并为任何偶然发现这个问题的人提供一个替代方案。

之所以需要这样做，是因为我将其描述为 SWIG 生成的内容的不对称性。基类型对象有一个属性 swigCPtr，它是该对象的内存地址（“自指针”）。然后要创建一个指针，您只需从基本类型中获取 swigCptr 并将其传递给 swig 生成的指针类型 (SWIGTYPE_p_X) 的构造函数。但是指针类型只存在于 Java 中，并且只保存 swigCptr 值。没有保存该指针的“c”内存块。因此，指针类型中没有等效的 swigCPtr。即指针类型中没有存储自指针，就像基类型中存储了自指针一样。

因此，您不能创建指向指针 (SWIGTYPE_p_p_X) 的指针，因为在构造它时没有指针的地址来传递它。

我的新“.i”文件如下：

```
%module nfc
%{
#include <nfc/nfc.h>
#include <nfc/nfc-types.h>
#include <nfc/nfc-emulation.h>
%}

%include <nfc/nfc.h>
%include <nfc/nfc-types.h>
%include <nfc/nfc-emulation.h>

%include "cpointer.i"
%pointer_functions(nfc_context*, SWIGTYPE_p_p_nfc_context) 
```

最后一个宏的作用是提供 4/5 函数来生成指针。这些函数都接受并返回 swig 应该已经生成的类型。Java 中用于使 nfc_init 和 nfc_open 命令正常工作的新用法：

```
SWIGTYPE_p_p_nfc_context context_p_p = nfc.new_SWIGTYPE_p_p_nfc_context();
nfc.nfc_init(context_p_p);
//get the context pointer after init has set it up (the java doesn't represent what's happening in the c) 
SWIGTYPE_p_nfc_context context_p = nfc.SWIGTYPE_p_p_nfc_context_value(context_p_p);
SWIGTYPE_p_nfc_device pnd = nfc.nfc_open(context_p, null); 
```

请注意，在 init 命令完成*后*，我必须从双指针中获取指针，因为存储在 java 指针对象中的信息与 C 的“世界”是分开的。因此，检索 context_p_p 的“值”将给出一个带有正确指针值的 context_p。

# ios - GoogleMaps SDK for iOS 上是否存在标记动画？

> ID：14414780
> 
> 赞同：11
> 
> 时间：2013-01-19T13:18:03.117
> 
> 标签：ios, google-maps, google-maps-sdk-ios

`GMSMarker`是否可以通过`GMSMapView`动画移动/旋转？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T00:23:43.293

1.2 中的添加是`GMSMarker`该类具有一个`animated`属性 - 我假设您只是将其设置为`YES`，然后通过设置其`map`属性将标记添加到地图（虽然我没有尝试过）。

[https://developers.google.com/maps/documentation/ios/reference/interface_g_m_s_marker](https://developers.google.com/maps/documentation/ios/reference/interface_g_m_s_marker)

```
GMSMarker *marker = [[GMSMarker alloc] init];
marker.position = CLLocationCoordinate2DMake(-33.8683, 151.2086);
marker.title = @"Sydney";
marker.snippet = @"Australia";
marker.animated = YES;
marker.map = mapView_; 
```

我认为这意味着当它被放到地图上时标记将被动画 - 并不是说​​你可以像这个原始问题那样制作一个高速动画标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:00:25.983

不，我担心它们不是因为我们无法访问谷歌地图可以访问的 OpenGL 上下文。您可以做的最好的事情是将标记旋转为需要重绘的 UIImage，或者您可以移动标记，但除非您以非常小的增量执行此操作，否则它会跳跃！

我建议向[Google](http://code.google.com/p/gmaps-api-issues/issues/list)报告错误，他们可能会包含它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-05T16:21:53.640

我的解决方案是继承 GMSMarker 类并使用计时器添加对 PNG 序列的支持。这是代码的粗略草图：

。H：

```
#import <GoogleMaps/GoogleMaps.h>

@interface AnimatedGMSMarker : GMSMarker

@property (nonatomic, strong) NSString *animationBaseName;

-(void)setAnimation:(NSString *)name forFrames:(NSArray *)frames;

@end 
```

.m

```
#import "AnimatedGMSMarker.h"

@implementation AnimatedGMSMarker{
    int _currentFrame;
    NSArray *_frameArray;
    NSTimer *_timer;
}

-(void)setAnimation:(NSString *)name forFrames:(NSArray *)frames{
    _frameArray = frames;
    _currentFrame = 0;
    _animationBaseName = name;
    self.icon = [UIImage imageNamed:[NSString stringWithFormat:@"%@%@",_animationBaseName,_frameArray[_currentFrame++]]];
    _timer = [NSTimer scheduledTimerWithTimeInterval:1.0/24.0f
                                                     target:self
                                                   selector:@selector(onRefreshTimer:)
                                                   userInfo:nil
                                                    repeats:YES];
}

-(void)onRefreshTimer:(NSTimer *)timer{
    self.icon = [UIImage imageNamed:[NSString stringWithFormat:@"%@%@",_animationBaseName,_frameArray[_currentFrame++]]];
    if (_currentFrame >= _frameArray.count){
        _currentFrame = 0;
    }
}

@end 
```

然后一旦你实例化一个，只需发送如下内容：

```
[self.myAnimatedMarker setAnimation:@"some_library_name" forFrames:@[@0,@1,@2,@3,@4,@5,@6,@7,@8,@9]]; 
```

并确保您的库有一堆相同大小和注册的 PNG，名称为“some_library_name0”“some_library_name1”等。帧数组处理允许您重复帧而不创建新的 PNG。

性能方面，在模拟器中制作动画非常慢，但在设备上看起来相当不错。

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-16T07:09:44.543

目前，标记只有一个选项可以显示为动画。

最近为 iOS 版 Google Maps SDK 编写了集群化库，带有动画折叠/分解。我使用的方法是通过手动位置更新动画。如果屏幕上有很多标记同时进行动画处理，它会很慢（即使所有可能的计算都在后台和结果缓存中），所以需要很多优化和限制。因此，如果您真的需要使用适用于 iOS 的 Google Maps SDK 或有时，特别是在旧设备上，您必须使用的优化将完全禁用您的自定义动画，那么现在最好多考虑一下。

# javascript - Javascript函数在萤火虫上返回未定义

> ID：14414781
> 
> 赞同：3
> 
> 时间：2013-01-19T13:18:06.030
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何从函数的 AJAX 调用返回响应？](https://stackoverflow.com/questions/14220321/how-to-return-the-response-from-an-ajax-call-from-a-function)

在我的 App 命名空间上，我刚刚定义了一个函数：

版本 1

```
window.App = {
  isLogged: function () {
    $.get('/user/isLogged', function (data) {
      if (data == 'true') {
        return true;
      }
      return false;
    });
  }
}; 
```

第 2 版

```
window.App = {
  isLogged: function () {
    var test = $.get('/user/isLogged');
    console.log(test.responseText);
  }
}; 
```

在版本 1 上，当我在 firebug 'App.isLogged()' 上尝试该功能时，我得到了一个很好的未定义：S

在版本 2 上，当我在 firebug 上尝试该功能时，responseText 似乎未定义：卡住：

我对javascript很陌生，也许是范围问题......

我认为我的功能目标很明确，有更好的方法来实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T13:30:30.717

第一个版本 `$.get`是异步的，这就是为什么你没有得到返回值

在第二个版本 `$.get`返回没有`responseText`字段的延迟对象

```
window.App = {
  isLogged: function () {
    var dfd = $.Deferred();
    $.get('/user/isLogged', function (data) {
      if (data == 'true') {
        return dfd.resolve();
      }
      return dfd.reject();
    });
    return dfd.promise();
  }
};

$.when(App.isLogged()).then(function() {
  //your code
}).fail(function() {
  //fail code
}); 
```

# ios - Android 设备无法识别 iPhone 中准备的 vcard 的 QR 码

> ID：14414796
> 
> 赞同：1
> 
> 时间：2013-01-19T13:20:16.807
> 
> 标签：ios, qr-code

我已经实现了一个 iPhone 二维码生成器。它适用于电子邮件、URL、文本等。不过，当我尝试绑定电子名片时遇到了一个问题。

我使用了以下格式：

```
@"BEGIN:VCARD VERSION:2.1 N:Satya;Dash;;; ADR;DOM;PARCEL;HOME:;;**** Mission Street;Cuttack City;Orissa;94014;INDIA. EMAIL;INTERNET:satya@domain.com TEL;CELL:22-122-4567 TEL;CELL:133-156-3345  END:VCARD" 
```

QR 码在我的 iPhone QR 码阅读器中运行良好（带有一些信息任务的警报，这是可以理解的）。但是，Android QR 码扫描仪不会读取它。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:31:38.737

您的 vCard 应如下所示：

```
@"BEGIN:VCARD\r\nVERSION:2.1\r\nN:Satya;Dash;;;\r\nADR;DOM;PARCEL;HOME:;;****Mission Street;Cuttack City;Orissa;94014;INDIA.\r\nEMAIL;INTERNET:satya@domain.com\r\nTEL;CELL:22-122-4567\r\nTEL;CELL:133-156-3345\r\nEND:VCARD" 
```

# c# - MySQL 中带有波兰字符的 AES_DECRYPT() 和 AES_ENCRYPT()

> ID：14414800
> 
> 赞同：2
> 
> 时间：2013-01-19T13:20:58.413
> 
> 标签：c#, mysql, encryption, aes

我有一个 MySQL 数据库，它被配置为接收带有波兰语字符的数据（例如 ą、ę、ó、ł、ń 等）。

现在我想使用 将这些波兰字符的数据发送到数据库`AES_ENCRYPT()`，然后使用`AES_DECRYPT()`. 我的问题是我在 C# 中收到一个 byte[] 数组，它有 X 个元素，其中 X 是我收到的文本长度。每个数组元素都有一个它所代表的字符的 ASCII 码。我可以使用 Encoding Class 轻松地将其转换为文本，但我不会在输出文本中获得波兰语字符。

F. 例如：

我发送`AES_ENCRYPT('ąąą', '123')`到分贝。我得到了`AES_DECRYPT('sql command','123')`，我得到`byte[]`了它有 3 个元素，每个人都有 '97' 值，代表`'aaa'`- NOT `'ąąą'`。如何以`AES_DECRYPT/ENCRYPT`允许我向我的数据库发送/获取波兰字符的方式使用？！或者如何从 aes_decrypt() 而不是 byte[] 获取字符串输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T13:39:58.090

使用编码进行转换可能会对您有所帮助。

```
select convert(aes_decrypt(aes_encrypt('ąąą', 'abcdefg'), 'abcdefg') using UTF8); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T14:18:48.807

您的 MySQL 数据以字符为单位，而加密则以字节为单位。您需要在加密之前将字符转换为字节，并将解密的字节转换回字符。这意味着您需要明确指定要在两端使用的字符编码，以便它们匹配。当前标准是 UTF-8，因此您应该在每一端指定它。如果 UTF-8 不起作用，那么在两端尝试一些 Microsoft 特定的字符编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T13:34:12.750

为什么不在代码中而不是在查询中实现加密/解密？

```
private static Byte[] Encrypt(String toEncrypt, Byte[] Key, Byte[] IV)
{
    CryptoStream streamCrypto = null;
    MemoryStream streamMemory = null;
    RijndaelManaged aes = null;
    StreamWriter streamWriter = null;

    try
    {
        aes = new RijndaelManaged();
        aes.Key = Key;
        aes.IV = IV;

        ICryptoTransform encryptor = aes.CreateEncryptor(aes.Key, aes.IV);

        streamMemory = new MemoryStream();
        streamCrypto = new CryptoStream(streamMemory, encryptor, CryptoStreamMode.Write);
        streamWriter = new StreamWriter(streamCrypto);

        streamWriter.Write(toEncrypt);

    }
    finally
    {
        if (streamWriter != null)
            streamWriter.Close();

        if (streamCrypto != null)
            streamCrypto.Close();

        if (streamMemory != null)
            streamMemory.Close();

        if (aes != null)
            aes.Clear();
    }

    return streamMemory.ToArray();
}

public static String Decrypt(Byte[] toDecrypt, Byte[] Key, Byte[] IV)
{
    CryptoStream streamCrypto = null;
    MemoryStream streamMemory = null;
    RijndaelManaged aes = null;
    StreamReader streamReader = null;
    String output = null;

    try
    {
        aes = new RijndaelManaged();
        aes.Key = Key;
        aes.IV = IV;

        ICryptoTransform decryptor = aes.CreateDecryptor(aes.Key, aes.IV);

        streamMemory = new MemoryStream(toDecrypt);
        streamCrypto = new CryptoStream(streamMemory, decryptor, CryptoStreamMode.Read);
        streamReader = new StreamReader(streamCrypto);

        output = streamReader.ReadToEnd();
    }
    finally
    {
        if (streamReader != null)
            streamReader.Close();

        if (streamCrypto != null)
            streamCrypto.Close();

        if (streamMemory != null)
            streamMemory.Close();

        if (aes != null)
            aes.Clear();
    }

    return output;
} 
```

在您的代码中，您加密您的字符串，然后将加密数据发送到数据库：

```
Byte[] encrypted = Encrypt(yourString, Key, IV); 
```

当您从数据库中提取数据时，您只需使用以下命令取回字符串：

```
String decrypted = Decrypt(dbData, Key, IV); 
```

如果您不喜欢这种方式，只需像这样使用您的查询：

```
INSERT INTO mysecrets (mysecret1, mysecret2) VALUES (AES_ENCRYPT(secret1, YOUR_ENCRYPTION_KEY), AES_ENCRYPT(secret2, YOUR_ENCRYPTION_KEY))

SELECT AES_DECRYPT(mysecret1, YOUR_ENCRYPTION_KEY) AS secret1, AES_DECRYPT(mysecret1, YOUR_ENCRYPTION_KEY) AS secret2 FROM mysecrets 
```

# iphone - 无法在 iOS 中为对象设置值

> ID：14414802
> 
> 赞同：1
> 
> 时间：2013-01-19T13:21:24.387
> 
> 标签：iphone, ios, objective-c

我是 iOS 开发的新手。

我有一门课叫宠物

```
@interface Pet : NSObject
@property(nonatomic, strong) NSString *petName;
@property(nonatomic, strong) NSString *petBreed;
@end 
```

在我的一种方法中，我试图为 Pet 类型的声明对象设置值：

```
Pet *selectedPet;

-(NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath
{        
UITableViewCell *cell=[tableView cellForRowAtIndexPath:indexPath];
NSString *currentPetTemp,*currentBreedTemp;
currentPetTemp = cell.textLabel.text;
currentBreedTemp = cell.detailTextLabel.text;
selectedPet.petName = currentPetTemp;
selectedPet.petBreed = currentBreedTemp;
NSLog(@"%@ Name1: %@",selectedPet.petName,currentPetTemp);

return indexPath; 
```

}

NSLog 为 'currentPetTemp' 显示正确的值，但为`selectedPet.petName`.

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T13:23:07.150

您尚未对其进行初始化...执行以下操作：

```
Pet *selectedPet=[[Pet alloc]init]; 
```

或者，

```
 Pet *selectedPet=[Pet new]; 
```

编辑：

根据您的评论`Initializer element is not a compile time constant`，当您定义任何方法范围之外的变量时，会显示此警告。这个地方仅适用于常量值。

你需要在 viewDidLoad/init/awakeFromNib 中进行 alloc-init。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T14:06:32.573

有两个问题。第一个是`Pet *selectedPet;`代码行的位置。如果您只是将它放在类似方法之外的 .m 文件中，它将是一个全局变量；这可能不是你想要的。您可能希望将其设为实例变量。像，在你的 .m 文件的顶部：

```
@implementation MyViewController {
    Pet *selectedPet;
} 
```

第二个问题是默认`selectedPet`值为`nil`; 也就是说，它是空的。你需要先初始化它。我会建议这样的东西，它创建一个新的宠物对象，然后设置名称和品种：

```
-(NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath
{        
    UITableViewCell *cell=[tableView cellForRowAtIndexPath:indexPath];
    selectedPet = [[Pet alloc] init];
    selectedPet.petName = cell.textLabel.text;
    selectedPet.petBreed = cell.detailTextLabel.text;
    NSLog(@"%@ Name1: %@",selectedPet.petName,currentPetTemp);

    return indexPath;
} 
```

（这假设您使用的是 ARC；否则，您需要进行一些内存管理。）

# ruby-on-rails - 如何将 Rails 应用程序从 2.3.5 升级到 3.2.x？

> ID：14414803
> 
> 赞同：4
> 
> 时间：2013-01-19T13:21:30.690
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, ruby-on-rails-2

我有 Rails 2.3.5 应用程序，我想升级到 3.2.x。如何升级到 Rails 3.2.x？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T14:45:28.800

我绝对推荐安装 Rails 升级 gem ( [rails upgrade gem](https://github.com/rails/rails_upgrade) )。对我来说，它被证明是非常有用的，它可以作为列出和验证所有需要升级到 Rails 3.0 的起点。

我也会推荐这本电子书[http://www.railsupgradehandbook.com/](http://www.railsupgradehandbook.com/)

一旦你在 Rails 3.0，你需要迁移到资产管道，这是另一个很好的起点：[http ://railscasts.com/episodes/282-upgrading-to-rails-3-1](http://railscasts.com/episodes/282-upgrading-to-rails-3-1)

这不是一项简单的任务，您需要确保您的代码在每一步都不会中断，但我发现这些工具非常适合让球滚动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T07:20:27.950

请参考链接，[http://www.spritle.com/blogs/2013/02/08/upgrade-rails-2-application-to-rails-3/](http://www.spritle.com/blogs/2013/02/08/upgrade-rails-2-application-to-rails-3/) 它可能对您有所帮助。

# uiwebview - segue destinationViewController 未检测到目标视图控制器

> ID：14414804
> 
> 赞同：2
> 
> 时间：2013-01-19T13:21:39.537
> 
> 标签：uiwebview, segue

# 视图控制器.m

```
//
//  ViewController.m
//  WebViewDemo
//
//  Created by Vu Van Tiep on 1/15/13.
//  Copyright (c) 2013 Vu Van Tiep. All rights reserved.
//

#import "ViewController.h"
#import "WebViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if([[segue identifier] isEqualToString:@"GoogleSegue"]){
        WebViewController *desView = (WebViewController*) [segue destinationViewController];
        UIWebView *webView = desView.webView;
        if([webView respondsToSelector:@selector(loadRequest:)] || webView != nil){
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"title" message:@"message" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [alert show];
        }
        //webView is nil

    }
}

@end 
```

# WebViewController.m

```
//
//  WebViewController.m
//  WebViewDemo
//
//  Created by Vu Van Tiep on 1/15/13.
//  Copyright (c) 2013 Vu Van Tiep. All rights reserved.
//

#import "WebViewController.h"

@interface WebViewController ()

@end

@implementation WebViewController
@synthesize webView;

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.webView.scalesPageToFit = YES;
}

@end 
```

# WebViewController.h

```
@interface WebViewController : UIViewController
@property (weak, nonatomic) IBOutlet UIWebView *webView;

@end 
```

当我使用 [segue destinationViewController] 时，我得到了 WebViewController 对象，但是当我访问该对象的 webView 属性时，它是 nil

有人可以向我解释一下吗？:(

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:18:26.690

您的 WebViewController 的视图尚未初始化。你需要告诉它初始化。行后做

```
WebViewController *desView = (WebViewController*) [segue destinationViewController]; } 
```

通过添加行

```
[desView view]; 
```

[这与Use destinationViewController button in a custom segue 中](https://stackoverflow.com/questions/15311630/use-destinationviewcontroller-button-in-a-custom-segue)的问题相同。虽然这一定是一个非常普遍的问题，但我发现很难找到有关此的信息。

# php - REQUEST_URI 包含 php $_SERVER 中的 favicon.ico 路径为什么

> ID：14414806
> 
> 赞同：1
> 
> 时间：2013-01-19T13:21:54.200
> 
> 标签：php

变量`$_SERVER['REQUEST_URI']`包含`favicon.ico`主页中的文件路径。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T13:28:51.003

实现对 SEO 友好的 URL，人们总是知道它的行为类似于 404 处理程序，因此将在任何**不存在的**URL 上调用 php 路由器，包括 favicon.ico（如果它不存在）。
因此，必须预见到这种可能性，并在没有识别到​​任何应用程序 url 时发出定期 404 响应。

# x++ - 在 AX 2012 表单中向组添加滚动条

> ID：14414807
> 
> 赞同：2
> 
> 时间：2013-01-19T13:22:02.767
> 
> 标签：x++, axapta, dynamics-ax-2012

我需要在组中设置滚动条，如下所示，因为有更多垂直快速选项卡可用，当您打开任何选项卡时它们会隐藏起来，如下所示。我使用选项卡并选择样式作为 Fasttab。我试图将选项卡及其标签页的 Scrollbar 属性设置为 yes 但没有结果。

![滚动条添加](../Images/083f1964679f89c2095c413a3a999896.png)

任何帮助都会很棒！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T09:18:25.883

我已经解决了这个问题。通过正确设置高度和宽度属性。属性是：

团体：-

高度：列宽
宽度：列宽

标签：-

高度：列宽
宽度：列宽

标签页：

高度：自动
宽度：列宽

就是这样！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-28T09:24:09.690

我有完美的解决方案:)

在 from 中添加一个新组。里面什么都没有。

```
Set HideEmpty=false.  
Set Height=ColumnHeight, Width=ColumnWidth

Set forms Height=Auto, Width=Auto. 
```

## 就这些。

表格可以`Re-size`，滚动条显示。

# asp.net-mvc-4 - 接近购物车存储，带有 sessionID 的数据库

> ID：14414811
> 
> 赞同：1
> 
> 时间：2013-01-19T13:22:24.180
> 
> 标签：asp.net-mvc-4, shopping-cart

为了清楚起见，我要将我的购物车存储在数据库中。只是我想了解有关如何准确存储它的详细信息。

我的购物车和订单有以下结构： ![购物车](../Images/f21e2273233095c2f77baaafef5baf01.png)

首先，这在技术上是一个好方法吗？

*   **带有 sessionID、日期和金额的产品被添加到购物车。** *鉴于它不是真正的购物车而是来自不同购物车的更多产品集合，我是否要添加另一个表或重命名该表？*

    *   **当用户想要订购他的产品时，我们将它们放在 order_items 表中。当用户选择购买时，他的订单被放置在订单表中。**

这是一个好方法，还有更好的方法吗？

PS：用户无需注册即可下单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T05:07:30.957

我通常做的是有一个中间表，比如 ProductsInCart，它有三列，ProductID、CartID 和 Quantity。ProductID 键入 Products，CartID 键入 Carts，数量只是一个正整数。

# objective-c - [XXXX performSelector:withObject:]: 消息发送到释放的实例

> ID：14414814
> 
> 赞同：0
> 
> 时间：2013-01-19T13:22:46.193
> 
> 标签：objective-c, cocoa, nsviewcontroller

从 NSView 启动 IBAction 时，我收到此错误消息。

**XXXX 是 AccountTableCellViewController 我确实给它加上了一个抽象名称，以防它可以帮助其他人。**

这是组件的结构：

我有一个加载此视图的应用程序： ![在此处输入图像描述](../Images/d05563e20af5630a5679918728900886.png)

使用这个 NSView 作为单元格 ![在此处输入图像描述](../Images/7be802907013076ad22e58561c92e43f.png)

TableView 的绑定方式如下：

```
@property (nonatomic,retain) IBOutlet NSTableView *tableView; 
```

我显示的内容如下**（我对没有在任何地方链接控制器有一些疑问）**

```
- (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
{
    Account *account = (Account *)[self.dataSource objectAtIndex:row];

    AccountTableCellViewController *controller = [[AccountTableCellViewController alloc] initWithNibName:@"AccountTableCellViewController" bundle:nil ];
    controller.account = account;
    return [controller view] ;
} 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T16:47:04.937

这是您的代码的 pre-ARC 等价物

```
- (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
{
    Account *account = (Account *)[self.dataSource objectAtIndex:row];

    AccountTableCellViewController *controller = [[AccountTableCellViewController alloc] initWithNibName:@"AccountTableCellViewController" bundle:nil ];
    controller.account = account;
    NSView *result = [[controller view] retain];
    [controller release]; /// !!!
    return [result autorelease];
} 
```

`tableView:viewForTableColumn:`您的控制器在返回时已被释放。您在评论中说您已尝试将控制器保持在数组中，但这无济于事。请使用代码的相应部分更新您的问题，因为这里有问题。

# android - 如何在安卓的谷歌地图上设置闹钟或提醒

> ID：14414821
> 
> 赞同：2
> 
> 时间：2013-01-19T13:24:22.017
> 
> 标签：android, google-maps, alarm

我正在尝试基于 GPS tat 实现警报，如果我在城市 x 并且当我到达那个特定的精确点时，我会在那个地方放置一个针点，它应该给我一个警报或警报我已经实现了一个完整的地图结构，我也有编程用于显示我当前的位置并用于定位。我不知道如何附加源代码，请以这种方式帮助我，我对 android 真的很陌生，我不知道该怎么做。这是代码，请指导我哪里出错了。

```
public void onLocationChanged(Location l) 
{
 // TODO Auto-generated method stub
 lat=(int) (l.getLatitude() *1E6) ;
 longi=(int) (l.getLongitude() *1E6);
 ourLocation= new GeoPoint(lat,longi);
 OverlayItem overlayItem= new OverlayItem(ourLocation,"","");   
 CustomPinpoint custom=new CustomPinpoint(d,Main.this);
 custom.insertPinPoint(overlayItem);
 overlayList.add(custom);
 controller.setCenter(ourLocation); 
     geocoder= new Geocoder(getBaseContext(), Locale.getDefault());

    try
    {       
    List<Address>address1=geocoder.getFromLocation
    (ourLocation.getLatitudeE6()/1E6,ourLocation  .getLongitudeE6()/1E6, 1);

   if(address1.size()>0 )
    {
   for(int i=0; i<address1.get(0).getMaxAddressLineIndex();i++)
   {                
       display1 += address1.get(0).getAddressLine(i)+"\n";

    }

    }

}
catch(IOException e1)
{
    e1.printStackTrace();
    Toast.makeText(getBaseContext(), "error", Toast.LENGTH_LONG).show();
}

if(display1.equals(display))
{   
    AlertDialog alert= new AlertDialog.Builder(Main.this).create();
    alert.setTitle("Destination");
    alert.setMessage("You Reached to  destination");
    alert.setButton("OK",new DialogInterface.OnClickListener() 
{

     public void onClick(DialogInterface arg0, int arg1) 
     {
         // TODO Auto-generated method stub
      }
       });
    alert.show();   
      }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T15:06:43.107

您上面的代码不足以显示警报对话框。要在您的代码中应用警报，您必须包含这样的代码形式；

```
/**
     * Function to show settings alert dialog On pressing Settings button will
     * lauch Settings Options
     * */
    public void showSettingsAlert() {
        AlertDialog.Builder alertDialog = new AlertDialog.Builder(mContext);

        // Setting Dialog Title
        alertDialog.setTitle("GPS is settings");

        // Setting Dialog Message
        alertDialog
                .setMessage("GPS is not enabled. Do you want to go to settings menu?");

        // On pressing Settings button
        alertDialog.setPositiveButton("Settings",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        Intent intent = new Intent(
                                Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                        mContext.startActivity(intent);
                    }
                });

        // on pressing cancel button
        alertDialog.setNegativeButton("Cancel",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        dialog.cancel();
                    }
                });

        // Showing Alert Message
        alertDialog.show();
    } 
```

并且您必须在项目的 src/ 目录中制作如下所示的单独的 java 代码（类）；

下面的类名是“AlertDialogManager.java”。

```
public class AlertDialogManager {
    /**
     * Function to display simple Alert Dialog
     * @param context - application context
     * @param title - alert dialog title
     * @param message - alert message
     * @param status - success/failure (used to set icon)
     *               - pass null if you don't want icon
     * */
    public void showAlertDialog(Context context, String title, String message,
            Boolean status) {
        AlertDialog alertDialog = new AlertDialog.Builder(context).create();

        // Setting Dialog Title
        alertDialog.setTitle(title);

        // Setting Dialog Message
        alertDialog.setMessage(message);

        if(status != null)
            // Setting alert dialog icon
            alertDialog.setIcon((status) ? R.drawable.success : R.drawable.fail);

        // Setting OK Button
        alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
            }
        });

        // Showing Alert Message
        alertDialog.show();
    }
} 
```

# javascript - WordPress + jScrollPane

> ID：14414822
> 
> 赞同：1
> 
> 时间：2013-01-19T13:24:23.610
> 
> 标签：javascript, jquery, wordpress, jscrollpane

晚上好，我正在尝试在 Wordpress 模板中使用 jScrollPane，我快疯了，总是显示“非皮肤”滚动条......

此代码加载在 header.php 中，.portfolio-post-content 仅包含文本：

```
<script type="text/javascript" charset="utf-8">
    $(function() {
            $('.portfolio-post-content').jScrollPane();
        });
</script> 
```

style.css 中的元素：

```
.portfolio-post-content { width:130px; float:left; overflow: auto; height: 500px; } 
```

HTML 输出：

```
 <!-- Main Page Content Begin -->

    <div id="main"> 

      <div id="page-content" class="portfolio-container main-container-single-portfolio" style="position:relative;">

        <div class="container sidebar-left single-project">    

          <!-- Media Begin --> 
          <div class="portfolio-post-media twelve columns"></div>
          <!-- Media End -->        

          <!-- Content Begin -->       
          <div class="portfolio-post-content four columns">text...</div>
          <!-- Content End --> 
```

头文件在其他 .js 文件之前加载 jScrollPane.css。这听起来像是与嵌套 div 元素有关的问题。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:24:08.883

1：

```
<script type="text/javascript" charset="utf-8">
    var $ = jQuery.noConflict();

    $(function() {
        $('.portfolio-post-content.four.columns').jScrollPane();
    });
</script> 
```

2：[http ://www.radiospeck.it/barchitects/wp-content/themes/spacing/js/jquery.mousewhell.js?ver=3.4.2](http://www.radiospeck.it/barchitects/wp-content/themes/spacing/js/jquery.mousewhell.js?ver=3.4.2)

未加载

3：

```
.portfolio-post-content.four.columns {
   height: 200px;
} 
```

你可以测试：

```
jQuery('.portfolio-post-content.four.columns').css({
    height: '200px'
}).jScrollPane(); 
```

# android - SeekBar 颜色条与进度和拇指不匹配

> ID：14414823
> 
> 赞同：1
> 
> 时间：2013-01-19T13:24:33.620
> 
> 标签：android, seekbar, repaint, autorotate

当屏幕旋转时，我的搜索栏的彩色条回到其初始值，而拇指保持在正确的位置。

基本上从这个：

![在此处输入图像描述](../Images/a95af3c9173509d13a5ee91b6efe0d25.png)

它变成这样：

![在此处输入图像描述](../Images/5b36166c38c8777b44b1ae5c0252d1cf.png)

请注意，`TextView`显示`15`连接到搜索栏并正确显示相同的值，该值在搜索栏上`onCreateView`检索值时更新`getProgress`，因此搜索栏在内部*具有*正确的进度，但“忘记”更新其栏。另请注意，如果稍微移动，该栏将正确更新。

奇怪的是我有一个相同的搜索栏，我在上面执行完全相同的操作（方法调用等），但这个从来没有这个问题。

它们在 XML 布局文件中以相同的方式定义（除了`id`）。

这些搜索栏在 a`Fragment`中显示为 a `ViewPager`，这里或多或少是片段的代码：

```
public class NewCharacterNameFragment extends Fragment
        implements NumericSeekBar.OnValueChangedListener {

    private static final String LEVEL = "org.my.package.LEVEL";
    private static final String STATS = "org.my.package.STATS";

    private NumericSeekBar levelBar;   // Causing problems
    private NumericSeekBar statsBar;   // Well behaved

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {

        super.onCreateView(inflater, container, savedInstanceState);

        if (savedInstanceState == null) {  // defaults values to avoid multiple checks later
            savedInstanceState = new Bundle();
            savedInstanceState.putInt(LEVEL, 1);
            savedInstanceState.putInt(STATS, 30);
        }

        View view = inflater.inflate(R.layout.new_character_name_fragment, container,
                                     false);

        levelBar = (NumericSeekBar) view.findViewById(R.id.levelSeekBar);
        statsBar = (NumericSeekBar) view.findViewById(R.id.statPointsSeekBar);

        levelBar.setValue(savedInstanceState.getInt(LEVEL));
        levelBar.setMax(20);
        levelBar.setValueChangedListener(this);

        statsBar.setValue(savedInstanceState.getInt(STATS));
        statsBar.setMax(100);
        statsBar.setValueChangedListener(this);

        // Initialize the text-views with the progress values:
        TextView tView = (TextView) view.findViewById(R.id.statPointsNumTextView);
        tView.setText(Integer.valueOf(statsBar.getValue()).toString());
        tView = (TextView) view.findViewById(R.id.levelNumTextView);
        tView.setText(Integer.valueOf(levelBar.getValue()).toString());

        return view;
    }

    @Override
    public void onSaveInstanceState(Bundle savedInstanceState) {

        super.onSaveInstanceState(savedInstanceState);
        savedInstanceState.putInt(LEVEL, levelBar.getValue());
        savedInstanceState.putInt(STATS, statsBar.getValue());
    }

    @Override
    public void onNumericSeekBarValueChanged(NumericSeekBar bar, int value,
                                             boolean fromUser) {
        // Called whenever the seekbar value changes
        if (bar == statsBar) {
            TextView view = (TextView) getView().findViewById(R.id.statPointsNumTextView);
            view.setText(Integer.valueOf(value).toString());
        } else if (bar == levelBar) {
            TextView view = (TextView) getView().findViewById(R.id.levelNumTextView);
            view.setText(Integer.valueOf(value).toString());
        }
    }
} 
```

我创建的小部件在哪里`NumericSeekBar`，基本上是一个`LinearLayout`带有两个递增和递减按钮和搜索栏的小部件：

```
public class NumericSeekBar extends LinearLayout
        implements SeekBar.OnSeekBarChangeListener, View.OnClickListener {

    public interface OnValueChangedListener {
        public void onNumericSeekBarValueChanged(NumericSeekBar bar, int value,
                                                 boolean fromUser);
    }

    private Button incButton;
    private Button decButton;
    private SeekBar seekBar;

    private OnValueChangedListener listener = null;

    private int maxValue = 100;
    private int value = 0;

    public NumericSeekBar(Context ctx) {
        super(ctx);
        setOpts();
        setWidgets();
    }

    public NumericSeekBar(Context ctx, AttributeSet attributes) {
        super(ctx, attributes);
        setOpts();
        setWidgets();
    }

    public void setValueChangedListener(OnValueChangedListener listener) {
        this.listener = listener;
    }

    public void setMax(int maxValue) {
        this.maxValue = maxValue;
        seekBar.setMax(maxValue);
    }

    public int getValue() {
        return this.value;  // using seekBar.getProgress() obtains same results
    }

    public boolean setValue(int value) {
        if (value < 0 || value > maxValue) {
            return false;
        }
        this.value = value;
        seekBar.setProgress(value);
        return true;
    }

    @Override
    public void onStopTrackingTouch(SeekBar bar) {
        bar.setSecondaryProgress(bar.getProgress());
    }

    @Override
    public void onStartTrackingTouch(SeekBar bar) {
    }

    @Override
    public void onProgressChanged(SeekBar bar, int value, boolean fromUser) {
        this.value = value;
        if (listener != null ){
            listener.onNumericSeekBarValueChanged(this, value, fromUser);
        }

        if (!fromUser) {
            bar.setSecondaryProgress(0);
        }
    }

    @Override
    public void onClick(View v) {
        // Handle increment/decrement button clicks
        if (v.equals(incButton)) {
            this.setValue(this.getValue() + 1);
        } else if(v.equals(decButton)) {
            this.setValue(this.getValue() - 1);
        }
    }

    private void setOpts() {
        setOrientation(HORIZONTAL);

        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            setShowDividers(SHOW_DIVIDER_NONE);
        }
    }

    private void setWidgets() {
        incButton = new Button(getContext());
        decButton = new Button(getContext());
        seekBar = new SeekBar(getContext());

        incButton.setText("+");
        incButton.setTextSize(TypedValue.COMPLEX_UNIT_SP, 16);
        incButton.setLayoutParams(new LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,
                                                   ViewGroup.LayoutParams.WRAP_CONTENT,
                                                   (float) 0.4));
        incButton.setOnClickListener(this);
        decButton.setText("-");
        decButton.setTextSize(TypedValue.COMPLEX_UNIT_SP, 16);
        decButton.setLayoutParams(new LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,
                                                   ViewGroup.LayoutParams.WRAP_CONTENT,
                                                   (float) 0.4));

        decButton.setOnClickListener(this);

        LayoutParams layoutParams = new LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,
                                                     ViewGroup.LayoutParams.WRAP_CONTENT,
                                                     (float) 0.2);
        layoutParams.gravity = Gravity.CENTER;

        seekBar.setLayoutParams(layoutParams);

        setMax(this.maxValue);
        setValue(this.value);

        addView(incButton);
        addView(seekBar);
        addView(decButton);

        seekBar.setOnSeekBarChangeListener(this);
    }
} 
```

这发生在模拟器和物理设备上。

**编辑：**我刚刚在 android 4 模拟器上测试了我的应用程序，但这并没有发生，所以它似乎与 2.x 相关。

**EDIT2：**我已经尝试过中的`invalidate()`酒吧`onCreateView`，但问题仍然存在。我也尝试过加入，但没有任何改变。我真的不明白发生了什么。`onStart``onResume``levelBar.setValue(levelBar.getValue())``onResume`

**EDIT3：**我添加了一个包含六个这样的条的另一个片段，只有`levelBar`上面代码中的行为奇怪。我想知道这怎么可能。要么有一些非常奇怪的错误，要么我做的不正确，即使我看不到哪里（并且在 android 4.x 中一切正常）。

**EDIT4：**我的第三次编辑不正确：现在*几乎*所有的酒吧都有这种行为。以上`statsBar`似乎是唯一不受影响的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:03:01.990

我终于明白代码有什么问题了。

似乎更改 a 的最大值`SeekBar`不会触发彩条的重绘，但会触发拇指的重绘**。**这可能是 android 2.x 中的一个错误（因为它不会在 android 4.x 中发生）。

要解决这个问题，您只需在设置搜索栏上的进度*之前*设置最大值。

在我的情况下，只有一些条受到影响，因为我将默认最大值设置`NumericSeekBar`为 100，并且只有具有不同最大值的条受到影响。

目前尚不清楚为什么使视图无效`onResume`不会产生正确的小部件重新绘制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-10T06:42:36.547

我找到了递归方法：

```
final SeekBar seekBar = (SeekBar) findViewById(R.id.test_seekbar);
seekBar.setMax(4000);
seekBar.setProgress(1500);
new Thread(new Runnable() {
    public void run() {
        seekBar.setProgress(500);
    }
}).start();
for (int i = 0; i < 5000; i++) {
    seekBar.setProgress(2000);
} 
```

上面的代码，`ProgressBar#setProgress`在工作线程中调用，它会导致错误。Android 官方文档建议在主线程中调用它，如下所示：

```
public class MyActivity extends Activity {
private static final int PROGRESS = 0x1;

private ProgressBar mProgress;
private int mProgressStatus = 0;

private Handler mHandler = new Handler();

protected void onCreate(Bundle icicle) {
    super.onCreate(icicle);

    setContentView(R.layout.progressbar_activity);

    mProgress = (ProgressBar) findViewById(R.id.progress_bar);

    // Start lengthy operation in a background thread
    new Thread(new Runnable() {
        public void run() {
            while (mProgressStatus < 100) {
                mProgressStatus = doWork();

                // Update the progress bar
                mHandler.post(new Runnable() {
                    public void run() {
                        mProgress.setProgress(mProgressStatus);
                    }
                });               
            }
        }
    }).start();
}
} 
```

# android - MenuDrawer 的 Listview 在不同的 android 版本上呈现不同

> ID：14414825
> 
> 赞同：1
> 
> 时间：2013-01-19T13:24:40.763
> 
> 标签：android, android-layout, android-listview

我正在为 Android OS 2.2+ 编写一个 Android 应用程序。

我有以下结构：

> ListView : 用于 MenuDrawer 的视图
> 
> ListAdapter : 充当 ListView 源的适配器

对于我正在使用的菜单抽屉：[https ://github.com/SimonVT/android-menudrawer](https://github.com/SimonVT/android-menudrawer)

在**Android 2.2**上：
![安卓 2.2](../Images/7bf9a3494c478c4d00b44d4d424682f3.png)

在**Android 4.0**上：
![安卓4.0](../Images/5a9cc396527dd41b0907c608b3164262.png)

问题是类别的风格和标题正在互换！

```
<style name="MenuDrawerCategoryStyle">
    <item name="android:textStyle">bold</item>
    <item name="android:textColor">?android:attr/textColorSecondary</item>
    <item name="android:textSize">14sp</item>
    <item name="android:gravity">center_vertical</item>
    <item name="android:paddingLeft">16dp</item>
    <item name="android:background">@drawable/menu_drawer_category_bg</item>
    <item name="android:singleLine">true</item>
    <item name="android:ellipsize">end</item>
</style>

<style name="MenuDrawerTitleStyle">
    <item name="android:background">@drawable/abs__list_selector_holo_dark</item>
    <item name="android:textColor">?android:attr/textColorPrimary</item>
    <item name="android:textSize">18sp</item>
    <item name="android:paddingLeft">16dp</item>
    <item name="android:paddingRight">32dp</item>
    <item name="android:paddingTop">8dp</item>
    <item name="android:paddingBottom">8dp</item>
    <item name="android:drawablePadding">16dp</item>
    <item name="android:gravity">center_vertical</item>
</style> 
```

我错过了什么吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:34:02.680

我得到了这个问题。这与我用于膨胀视图的缓存技术有关。您必须小心在适配器中使用缓存。我正在缓存独立于元素样式的元素视图，这导致了问题。

# machine-learning - 逻辑回归数据集标签的含义是什么？

> ID：14414826
> 
> 赞同：3
> 
> 时间：2013-01-19T13:24:47.953
> 
> 标签：machine-learning, libsvm

我已经学习了几天的逻辑回归，我认为逻辑回归的数据集的标签需要为 1 或 0，对吗？

但是当我查找[libSVM](http://www.csie.ntu.edu.tw/~cjlin/libsvmtools/datasets/regression.html#bodyfat)库的[回归数据集](http://www.csie.ntu.edu.tw/~cjlin/libsvmtools/datasets/regression/abalone)时，我看到标签值是连续数字（例如 1.0086,1.0089 ...），我错过了什么吗？

请注意，libSVM 库可用于回归问题。

非常感谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T17:49:16.370

与其名称相反，逻辑回归是一种分类算法，它输出以数据点为条件的类概率。因此，训练集标签需要为 0 或 1。对于您提到的数据集，逻辑回归不是合适的算法。

SVM 是一种分类算法，它使用输入标签 -1 或 1。它不是概率算法，它不输出类概率。它也可以适应回归。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T14:22:30.430

您是在使用 3rd 方库还是自己编程？通常，标签用作基本事实，因此您可以看到您的方法有多有效。

例如，如果您的算法试图预测某个特定实例是什么，它可能会输出 -1，那么基本事实标签将为 +1，这意味着您没有成功分类该特定实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T04:11:37.447

请注意，“回归”是一个通用术语。说某人将执行回归分析并不一定会告诉您他们将使用什么算法，也不一定告诉您数据集的所有性质。它真正告诉您的是，您有一组样本，这些样本具有您想要用来预测单个结果值的特征（条件概率模型）。

逻辑回归和线性回归之间的一个主要区别是前者通常在分类的、二进制标记的样本集上进行训练。而后者是在真实标记的（ℝ）样本集上训练的。

任何时候你的标签是真正的价值，这意味着你可能会使用*线性回归*或类似的，或者如果你想实际上使用*逻辑回归*，则将那些真正的价值标签转换为分类标签（例如通过阈值或箱） 。但是，如果您尝试从一种此类问题设置转换为另一种设置，则结果的质量和解释可能存在很大差异。

另请参见[回归分析](http://en.wikipedia.org/wiki/Regression_analysis)。

# java - GAE+Objectify 类层次结构和 refs(...)

> ID：14414828
> 
> 赞同：1
> 
> 时间：2013-01-19T13:25:15.000
> 
> 标签：java, generics, google-cloud-datastore, objectify

我有以下课程：

1.  `Streamable`界面
2.  `DiaryEntry`工具`Streamable`
3.  `StatusEntry`工具`Streamable`

还有一个`stream`字段是 a `LinkedList<Ref<? extends Streamable>>`，（在我看来）应该同时包含`Ref<DiaryEntry>`和`Ref<StatusEntry>`。

不幸的是，我错了，因为我在这一行得到一个编译错误：

```
ofy().load().refs(stream).values(); 
```

错误是：

`The method refs(Iterable<Ref<E>>) in the type Loader is not applicable for the arguments (LinkedList<Ref<? extends Streamable>>)`

是否有可能我以某种糟糕的方式对我的实体或字段进行了建模？该方法是否应该`refs`具有此签名`refs(Iterable<Ref<? extends E>>)`而不是当前签名？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T10:22:57.607

我认为 Objectify 不适用于接口成员列表。我相信你会看到一个异常，说构造函数缺少 for `Streamable`。据我说，解决这个问题的最好方法是有具体的课程。在那种情况下`List<Ref<Streamable_Concrete_Class>>`可以处理扩展的其他类`Streamable_Concrete_Class`。持久化 List 后，List 的 @Load 注释应按预期工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T18:34:34.677

您没有在您的问题中提供足够的信息来了解整个情况，例如什么类声明`E`以及该类型参数的边界是什么。

但为了冒险猜测，请尝试重新声明`refs`采用`Iterable<? extends Ref<? extends E>>`.

# python - ctypes：将字符串转换为函数？

> ID：14414830
> 
> 赞同：3
> 
> 时间：2013-01-19T13:25:37.727
> 
> 标签：python, c, casting, ctypes, metasploit

我正在阅读文章[在渗透测试期间规避反病毒的技巧，](http://pen-testing.sans.org/blog/pen-testing/2011/10/13/tips-for-evading-anti-virus-during-pen-testing)并对给定的 Python 程序感到惊讶：

```
from ctypes import *
shellcode = '\xfc\xe8\x89\x00\x00....'

memorywithshell = create_string_buffer(shellcode, len(shellcode))
shell = cast(memorywithshell, CFUNCTYPE(c_void_p))
shell() 
```

shellcode 被缩短。有人可以解释发生了什么吗？我对 Python 和 C 都很熟悉，我尝试过阅读该[`ctypes`](http://docs.python.org/2.7/library/ctypes.html#module-ctypes)模块，但还有两个主要问题：

*   存储在什么中`shellcode`？
    我知道这*与*C 有关（在文章中它是来自 Metasploit 的 shellcode，并且选择了不同的 ASCII 表示法），但我无法确定它是 C 源（可能不是）还是源自某种编译（哪一个？）。

*   根据第一个问题，演员阵容中发生了什么神奇的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T22:42:16.190

看看这个 shellcode，我从[这里](http://www.shell-storm.org/shellcode/files/shellcode-648.php)取出它（它会弹出一个 MessageBoxA）：

```
#include <stdio.h>

typedef void (* function_t)(void);

unsigned char shellcode[] =
    "\xFC\x33\xD2\xB2\x30\x64\xFF\x32\x5A\x8B"
    "\x52\x0C\x8B\x52\x14\x8B\x72\x28\x33\xC9"
    "\xB1\x18\x33\xFF\x33\xC0\xAC\x3C\x61\x7C"
    "\x02\x2C\x20\xC1\xCF\x0D\x03\xF8\xE2\xF0"
    "\x81\xFF\x5B\xBC\x4A\x6A\x8B\x5A\x10\x8B"
    "\x12\x75\xDA\x8B\x53\x3C\x03\xD3\xFF\x72"
    "\x34\x8B\x52\x78\x03\xD3\x8B\x72\x20\x03"
    "\xF3\x33\xC9\x41\xAD\x03\xC3\x81\x38\x47"
    "\x65\x74\x50\x75\xF4\x81\x78\x04\x72\x6F"
    "\x63\x41\x75\xEB\x81\x78\x08\x64\x64\x72"
    "\x65\x75\xE2\x49\x8B\x72\x24\x03\xF3\x66"
    "\x8B\x0C\x4E\x8B\x72\x1C\x03\xF3\x8B\x14"
    "\x8E\x03\xD3\x52\x33\xFF\x57\x68\x61\x72"
    "\x79\x41\x68\x4C\x69\x62\x72\x68\x4C\x6F"
    "\x61\x64\x54\x53\xFF\xD2\x68\x33\x32\x01"
    "\x01\x66\x89\x7C\x24\x02\x68\x75\x73\x65"
    "\x72\x54\xFF\xD0\x68\x6F\x78\x41\x01\x8B"
    "\xDF\x88\x5C\x24\x03\x68\x61\x67\x65\x42"
    "\x68\x4D\x65\x73\x73\x54\x50\xFF\x54\x24"
    "\x2C\x57\x68\x4F\x5F\x6F\x21\x8B\xDC\x57"
    "\x53\x53\x57\xFF\xD0\x68\x65\x73\x73\x01"
    "\x8B\xDF\x88\x5C\x24\x03\x68\x50\x72\x6F"
    "\x63\x68\x45\x78\x69\x74\x54\xFF\x74\x24"
    "\x40\xFF\x54\x24\x40\x57\xFF\xD0";

void real_function(void) {
    puts("I'm here");
}

int main(int argc, char **argv)
{
    function_t function = (function_t) &shellcode[0];

    real_function();
    function();
    return 0;
} 
```

在任何调试器下编译它一个钩子，我将使用 gdb：

```
> gcc shellcode.c -o shellcode
> gdb -q shellcode.exe
Reading symbols from shellcode.exe...done.
(gdb)
> 
```

反汇编 main 函数，看看调用`real_function`和之间的区别`function`：

```
(gdb) disassemble main
Dump of assembler code for function main:
   0x004013a0 <+0>:     push   %ebp
   0x004013a1 <+1>:     mov    %esp,%ebp
   0x004013a3 <+3>:     and    $0xfffffff0,%esp
   0x004013a6 <+6>:     sub    $0x10,%esp
   0x004013a9 <+9>:     call   0x4018e4 <__main>
   0x004013ae <+14>:    movl   $0x402000,0xc(%esp)
   0x004013b6 <+22>:    call   0x40138c <real_function> ; <- here we call our `real_function`
   0x004013bb <+27>:    mov    0xc(%esp),%eax
   0x004013bf <+31>:    call   *%eax                    ; <- here we call the address that is loaded in eax (the address of the beginning of our shellcode)
   0x004013c1 <+33>:    mov    $0x0,%eax
   0x004013c6 <+38>:    leave
   0x004013c7 <+39>:    ret
End of assembler dump.
(gdb) 
```

有两个`call`，我们在处打个断点`<main+31>`，看看eax里面加载了什么：

```
(gdb) break *(main+31)
Breakpoint 1 at 0x4013bf
(gdb) run
Starting program: shellcode.exe
[New Thread 2856.0xb24]
I'm here

Breakpoint 1, 0x004013bf in main ()
(gdb) disassemble
Dump of assembler code for function main:
   0x004013a0 <+0>:     push   %ebp
   0x004013a1 <+1>:     mov    %esp,%ebp
   0x004013a3 <+3>:     and    $0xfffffff0,%esp
   0x004013a6 <+6>:     sub    $0x10,%esp
   0x004013a9 <+9>:     call   0x4018e4 <__main>
   0x004013ae <+14>:    movl   $0x402000,0xc(%esp)
   0x004013b6 <+22>:    call   0x40138c <real_function>
   0x004013bb <+27>:    mov    0xc(%esp),%eax
=> 0x004013bf <+31>:    call   *%eax                    ; now we are here
   0x004013c1 <+33>:    mov    $0x0,%eax
   0x004013c6 <+38>:    leave
   0x004013c7 <+39>:    ret
End of assembler dump.
(gdb) 
```

查看eax中地址继续的数据的前3个字节：

```
(gdb) x/3x $eax
0x402000 <shellcode>:   0xfc    0x33    0xd2
(gdb)                    ^-------^--------^---- the first 3 bytes of the shellcode 
```

因此，CPU 将`call 0x402000`在我们的 shell 代码的开头`0x402000`，让我们反汇编曾经的内容`0x402000`：

```
(gdb) disassemble 0x402000
Dump of assembler code for function shellcode:
   0x00402000 <+0>:     cld
   0x00402001 <+1>:     xor    %edx,%edx
   0x00402003 <+3>:     mov    $0x30,%dl
   0x00402005 <+5>:     pushl  %fs:(%edx)
   0x00402008 <+8>:     pop    %edx
   0x00402009 <+9>:     mov    0xc(%edx),%edx
   0x0040200c <+12>:    mov    0x14(%edx),%edx
   0x0040200f <+15>:    mov    0x28(%edx),%esi
   0x00402012 <+18>:    xor    %ecx,%ecx
   0x00402014 <+20>:    mov    $0x18,%cl
   0x00402016 <+22>:    xor    %edi,%edi
   0x00402018 <+24>:    xor    %eax,%eax
   0x0040201a <+26>:    lods   %ds:(%esi),%al
   0x0040201b <+27>:    cmp    $0x61,%al
   0x0040201d <+29>:    jl     0x402021 <shellcode+33>
   .... 
```

如您所见，shellcode 只不过是汇编指令，唯一不同的是您编写这些指令的方式，它使用特殊技术使其更具可移植性，例如从不使用固定地址。

相当于上述程序的python：

```
#!python

from ctypes import *

shellcode_data = "\
\xFC\x33\xD2\xB2\x30\x64\xFF\x32\x5A\x8B\
\x52\x0C\x8B\x52\x14\x8B\x72\x28\x33\xC9\
\xB1\x18\x33\xFF\x33\xC0\xAC\x3C\x61\x7C\
\x02\x2C\x20\xC1\xCF\x0D\x03\xF8\xE2\xF0\
\x81\xFF\x5B\xBC\x4A\x6A\x8B\x5A\x10\x8B\
\x12\x75\xDA\x8B\x53\x3C\x03\xD3\xFF\x72\
\x34\x8B\x52\x78\x03\xD3\x8B\x72\x20\x03\
\xF3\x33\xC9\x41\xAD\x03\xC3\x81\x38\x47\
\x65\x74\x50\x75\xF4\x81\x78\x04\x72\x6F\
\x63\x41\x75\xEB\x81\x78\x08\x64\x64\x72\
\x65\x75\xE2\x49\x8B\x72\x24\x03\xF3\x66\
\x8B\x0C\x4E\x8B\x72\x1C\x03\xF3\x8B\x14\
\x8E\x03\xD3\x52\x33\xFF\x57\x68\x61\x72\
\x79\x41\x68\x4C\x69\x62\x72\x68\x4C\x6F\
\x61\x64\x54\x53\xFF\xD2\x68\x33\x32\x01\
\x01\x66\x89\x7C\x24\x02\x68\x75\x73\x65\
\x72\x54\xFF\xD0\x68\x6F\x78\x41\x01\x8B\
\xDF\x88\x5C\x24\x03\x68\x61\x67\x65\x42\
\x68\x4D\x65\x73\x73\x54\x50\xFF\x54\x24\
\x2C\x57\x68\x4F\x5F\x6F\x21\x8B\xDC\x57\
\x53\x53\x57\xFF\xD0\x68\x65\x73\x73\x01\
\x8B\xDF\x88\x5C\x24\x03\x68\x50\x72\x6F\
\x63\x68\x45\x78\x69\x74\x54\xFF\x74\x24\
\x40\xFF\x54\x24\x40\x57\xFF\xD0"

shellcode = c_char_p(shellcode_data)

function = cast(shellcode, CFUNCTYPE(None))
function() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T15:14:02.730

*   `shellcode`，如果我没记错的话，它包含特定于架构的编译代码，大致翻译为函数调用。（不是架构专家，代码被截断了……）

*   因此，一旦你用 . 创建了一个 C 风格的字符串`create_string_buffer`，你就可以欺骗 python 认为它是一个带有`cast`调用的函数。然后 Python 执行最初包含在`shellcode`.

这里有一个有用的链接：http: [//www.blackhatlibrary.net/Python#Ctypes](http://www.blackhatlibrary.net/Python#Ctypes)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T16:00:31.687

我们不要忘记，为了拥有可执行代码，必须将其转换为您的机器可以理解的格式。您在那里所做的是提供可以由您的机器解释的字节码序列，因此您可以告诉您的机器执行它。通过提供最终字节码，您实际上是在跳过编译器的工作；这种技术在即时编译器中很常见，它们必须在程序运行时创建可执行代码。因此，这实际上与 C（或 Python，或任何其他语言）几乎没有关系，但与预期运行此代码的架构的细节有很大关系。

第一个字节码是`CLD`（0xfc），然后是一条`CALL`指令（0xe8），该指令使代码根据该字节码序列中接下来的4个字节中指定的偏移量跳转到地址，依此类推。

# c++ - 为什么在参数中使用 initializer_list 而不是 vector？

> ID：14414832
> 
> 赞同：46
> 
> 时间：2013-01-19T13:26:13.830
> 
> 标签：c++

`initializer_list`对于未知数量的参数，的实际好处和目的是什么？为什么不直接使用`vector`并完成它呢？

事实上，它听起来只是一个`vector`有另一个名字的。何苦？

我看到的唯一“好处”`initializer_list`是它具有`const`元素，但这似乎不足以成为发明这种全新类型的理由。`const vector`（毕竟你可以只使用 a 。）

那么，我错过了什么？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-19T13:36:39.390

它是程序员和编译器之间的一种契约。程序员说`{1,2,3,4}`，编译器从中创建一个类型的对象`initializer_list<int>`，其中包含相同的元素序列。该契约是语言规范对编译器实现的要求。

这意味着，不是程序员手动创建这样的对象，而是编译器创建对象，并将该对象传递给`initializer_list<int>`作为参数的函数。

`std::vector`实现利用了这个契约，因此它定义了一个构造函数作为`initializer_list<T>`参数，以便它可以使用初始化列表中的元素初始化自己。

现在假设**一段时间**`std::vector`没有任何构造函数`std::initializer_list<T>`作为参数，那么你会得到这个：

```
 void f(std::initializer_list<int> const &items);
 void g(std::vector<int> const &items);

 f({1,2,3,4}); //okay
 g({1,2,3,4}); //error (as per the assumption) 
```

根据假设，因为`std::vector`没有作为参数的构造`std::initializer_list<T>`函数，这*意味着*您不能将`{1,2,3,4}`作为参数传递给`g()`如上所示，因为编译器*无法直接***创建**out `std::vector`of the expression的实例。这是因为程序员和编译器之间从来没有签订过这样的合同，并且是由语言强加的。正是*通过*，才能创造出自己的表达。`{1,2,3,4}` ***`std::initializer_list``std::vector``{1,2,3,4}`***

 ***现在您将了解，`std::initializer_list`可以在需要 . 形式的表达式的任何地方使用`{value1, value2, ...., valueN}`。这就是为什么标准库中的其他容器也定义了`std::initializer_list`作为参数的构造函数。通过这种方式，没有容器依赖于任何其他容器来构造 形式的表达式`{value1, value2, ...., valueN}`。

希望有帮助。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-19T13:30:43.013

好吧，`std::vector` *必须*使用`initializer_list`来获取该语法，因为它显然不能使用自己。

无论如何，`initializer_list`旨在极其轻量级。它可以使用最佳存储位置并防止不必要的复制。使用`vector`，您总是会获得堆分配，并且很有可能获得比您想要的更多的副本/移动。

此外，语法有明显的差异。其中之一是模板类型推导：

```
struct foo {
    template<typename T>  
    foo(std::initializer_list<T>) {}
};

foo x{1,2,3}; // works 
```

`vector`不会在这里工作。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-19T13:40:12.527

`initializer_list`over的最大优点`vector`是它允许您*就地*指定特定的元素序列，而无需专门的处理来创建该列表。

即使您确切知道哪些元素将被推入向量中，这也使您免于设置多个调用`push_back`（或`for`循环）来初始化 a 。`vector`

事实上，`vector`它本身有一个构造函数接受一个`initializer_list`更方便的初始化。我想说这两个容器是互补的。

```
// v is constructed by passing an initializer_list in input
std::vector<std::string> v = {"hello", "cruel", "world"}; 
```

当然，重要的是要意识到它`initializer_list`确实有一些限制（不允许缩小转换），这可能使其在某些情况下不合适或无法使用。***

# java - 如何使用 PDFBox 填写横向 PDF 表单

> ID：14414836
> 
> 赞同：1
> 
> 时间：2013-01-19T13:26:50.317
> 
> 标签：java, pdf, pdfbox

如何使用 PDFBox 库填写水平 pdf 表单？

我访问我的字段并使用提供的示例代码填充它们，它工作正常。但是，如果 pdf 页面水平倾斜，则填写的文本仍保留在垂直位置。

我试过先旋转页面然后填写表格，但这些字段似乎是独立的。我还尝试通过定义的各种设置方法来格式化字段`PDField`，`PDTextbox`但这也没有效果。

最后，我知道某些旋转属性是通过 控制的`PDAnnotation`，`PDAnnotationWidget`但尝试设置它们`PDAppearanceCharacteristics`对初始文本旋转没有影响。相反，用户需要与该字段进行交互才能使其生效。

提前致谢， J3lly

# java - 从 JFreeChart XYLineChart 中提取阈值的最大值

> ID：14414838
> 
> 赞同：5
> 
> 时间：2013-01-19T13:26:50.833
> 
> 标签：java, charts, jfreechart

我想用 XYLineChart 实现 JFreeChart 的功能。所以，现在我有一个 XYLineChart，我想根据峰的中心找到 x 值（参见附图以了解我想要的内容）。所以，我想实现一个阈值线（水平线，蓝色的），用户可以把它放在他想要的地方，并且在那个特定的 y 值处，阈值线需要与 XYLine （光谱）相交。对我来说，从该点开始迭代值并查看前一个或前一个点（比如说 10 个点）是否具有较低的趋势似乎是合乎逻辑的，如果没有，并且具有较高的趋势，很明显最大值在当前点，然后迭代到该点并根据该最大值 y 获得 x 的值。

拜托，我需要更多的想法，并且如果有人有时间指导我完成这件从未在 JFreeChart 中做过的事情（我认为）。

![在此处输入图像描述](../Images/d82055251e8f6976d53be81b5a47b292.png)

**编辑（1）：**这可以是另一种解决方案吗？要提取 Y RangeValue，它与数据相交的阈值线，然后应用线斜率方程，直到线斜率方程反转（因此存在最大值）。JFreeChart 的 LineFunction2D 是这样做的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T19:29:31.013

您可以使用 a [`ValueMarker`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/plot/ValueMarker.html)，如图所示[，](https://stackoverflow.com/a/14336387/230513)在所需的*y*值处放置一条水平的蓝线。另请参阅[*如何在数据集中找到峰值？*](https://stats.stackexchange.com/q/36309).

# mongodb - 如何重置 mongoid 文档的所有无效字段？

> ID：14414839
> 
> 赞同：2
> 
> 时间：2013-01-19T13:27:01.707
> 
> 标签：mongodb, mongoid

我有一个验证失败的[mongoid](http://mongoid.org/en/mongoid/index.html)文档（在 rails 应用程序中）。我想重置所有无效字段。目前我正在这样做：

```
@product.errors.each do |e,m|
  method_name = "reset_#{e}!"
  @product.send(method_name)
end 
```

这没关系，但是没有更好（更简洁）的方法来做到这一点吗？我已经阅读了[肮脏的跟踪文档](http://mongoid.org/en/mongoid/docs/documents.html#dirty)并进行了谷歌搜索，但我找不到任何关于此的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-31T23:34:57.940

我不知道“更简洁”是什么意思，但您不需要使用“发送”

```
@product.errors.errors.each do |f|
  @product[f] = c.changes[f.to_s].first
end 
```

# android - 无法在 Android 中播放 mp4 视频

> ID：14414843
> 
> 赞同：1
> 
> 时间：2013-01-19T13:27:33.980
> 
> 标签：android, android-mediaplayer, android-videoview

我是 Android 开发的新手，我正在尝试从 RAW 文件夹播放 MP4 视频，但是，虽然我可能在这里阅读了每个答案并在谷歌上浏览了几个小时，但我无法让它工作。

我当前的代码是（在 onCreate() 方法上调用）

```
VideoView vv = (VideoView)findViewById(R.id.video_container);
int vID = getResources().getIdentifier("video1", "raw", getPackageName());
Uri uri = Uri.parse("android.resource://" + getPackageName() + "/" + vID);
MediaController mc = new MediaController(this);
vv.setMediaController(mc);
vv.setVideoURI(uri);
vv.requestFocus();
vv.start(); 
```

（现在视频名称是硬编码的，但应该是从之前的 Intent 传递过来的；我写它是为了排除这个问题的可能性）

在 LogCat 中，我不断收到此错误：

```
Error (1,-2147483648) 
```

这对我来说有点晦涩（似乎与很多事情有关），而该应用程序仅提醒“无法播放此视频”消息，仅此而已。

我是否需要尝试/捕获一些异常以至少获得更好的错误报告？我正在使用的代码与我在互联网上和这里找到的数十个代码相同，都声称它工作正常（并且在 Eclipse 模拟器中播放），并且没有人使用 try/catch；Android Developer 文档有时很难遵循，所以我真的不知道在哪里以及如何放置这些（onPrepare()？）。

视频文件名为“video1.mp4”，放在 res/raw 文件夹中；它的大小约为。10.4 Mb 并且使用带有 Ubuntu 12.04 的 Arista Transcoder 将高分辨率 mov 文件（应用程序是相当于 Ipad 版本的 Android 应用程序）编码为 854 x 480 H.264 / AVC。值得一提的是，转换后的视频在我的电脑上可以正常播放。

我在 Eclipse Indigo 上开发，该应用程序针对平板电脑设备，模拟的 AVD 是 1280x800 mdpi 平板电脑。我现在没有真正的设备（并且几天都不会），所以我无法测试问题是否只是在模拟器上。

不幸的是，将文件复制到 SD 卡的可能性是不可能的，从远程服务器获取视频也是如此：应用程序需要附带所有嵌入的视频（根据客户的要求），我不知道是否该设备将有或没有 SD 卡（我也不知道它是哪种型号）

# c++ - searching files?

> ID：14414845
> 
> 赞同：0
> 
> 时间：2013-01-19T13:27:55.570
> 
> 标签：c++, file, search, maps

This code is a part of a larger code that indexes files, and tokenizes the words in each file so that you can be able to search a certain word in the large amount of file you have. (like Google)

This function is supposed to search your files for a word that you want to find. But I don't completely understand how it works!

Can someone please explain what this code does and how it does it?

In addition, I have several questions: 1) What exactly in "infile"? 2) What does the built-in function c_str() do? 3) Why does the variable "currentlineno" start at 1? Couldn't the first line in a file start at 0? 4) What is the difference between ++x and x++? 5) What is the difference between the condition "currentlineno < lineNumber" and "currentlineno != lineNumber" ?

This is the code:

```
void DisplayResult(string fileName, int lineNumber)
{
ifstream infile(fileName.c_str(), ifstream::in);

char line[1000];
int currentlineno = 1;

while(currentlineno < lineNumber) 
{
    infile.getline(line, 1000);
    ++currentlineno;
}
infile.getline(line, 1000);
cout<<endl<<"\nResult from ("<<fileName<<" ), line #"<<lineNumber<<": "<<endl;
cout<<"\t"<<line;

infile.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T13:42:09.247

**1) What exactly in "infile"?**

ANS:: Construct object and optionally open file. [Link](http://www.cplusplus.com/reference/fstream/ifstream/ifstream/)

**2) What does the built-in function c_str() do?**

ANS:: It is needed to get a const char* representation of the text stored inside a std::string class. [Link](http://msdn.microsoft.com/en-us/library/3372cxcy%28v=vs.80%29.aspx)

**3) Why does the variable "currentlineno" start at 1? Couldn't the first line in a file start at 0?**

ANS:: Depends on the second input parameter of the function `DisplayResult`.

**4) What is the difference between ++x and x++?**

ANS:: See [this](https://stackoverflow.com/questions/24853/what-is-the-difference-between-i-and-i). Probably you may have heard of Post-Increment and Pre-Increment.

**5) What is the difference between the condition "currentlineno < lineNumber" and "currentlineno != lineNumber" ?**

ANS:: Value of `currentlineno` should not exceed the value of `lineNumber` when condition is `currentlineno < lineNumber`. Value of `currentlineno` may exceed or may be less than the value of `lineNumber` but should not be equal to the value of `lineNumber` when condition is `currentlineno != lineNumber`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T13:47:49.417

This function display the line at the corresponding line number pass by parameter.

1/ Infile permits to open a file as in put streams : [http://www.cplusplus.com/reference/fstream/ifstream/](http://www.cplusplus.com/reference/fstream/ifstream/)

2/ c_str() permits to pass to a string structure to a simple char* (a char array). It is the structure use in the language C, which explains why the method name is "c_str". In C++, we usually use string more than char* cause it is really simpler.

3/ Why currentlineno start at 1 ? The function read the file content before the given line number. The, read one more time to display the wanted line.

4/ ++x is pre-incrementation, x++ is post-incrementation. When you use ++x, x is incremented before to use it, otherwise, with x++, x is incremented after.

```
int x = 1;
cout << ++x; // display 2
x = 1;
cout << x++; // display 1 
```

5/ Look at operators : [http://www.cplusplus.com/doc/tutorial/operators/](http://www.cplusplus.com/doc/tutorial/operators/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T14:54:49.973

This function does not search for words.

It takes as input a file name and a line number. It tries to find and read that line.

The output starts with a line stating: "The result from (`fileName` ), line #`lineNumber`: " It is followed by a text indented by a tab and followed by the found line contents. This second line of output is left incomplete (not followed by a newline).

The found contents is empty, if the file has has less than the requested number of lines or if any of the lines before the requested line has more than 999 characters. If the requested line has more than 999 characters it is truncated to 999 characters.

Other questions:

1) `infile` is a function-scope object of automatic storage duration and type `std::basic_ifstream<char, std::char_traits<char>>`, which is initialized for reading from the file named in `fileName`.

2) The member function c_str() built into the standard library string class returns a pointer to the string contents as a non-modifiable, nul-terminated character array, which is the format typically used in C for strings (type `const char *`). For historical reasons the file-based standard library streams take their file name arguments in this format.

3) Humans typically count line numbers starting with one. That is the convention used for the `lineNumber` parameter. The algorithm used must match this. The `currentlineno` local variable is used to mean 'the number of the next line to be read'. As such it must be initialized with `1`. (This is somewhat confusing, considering the name of the variable.) Other implementations that initialize the line counter with 0 are possible - and indeed natural to most C++ programmers.

4) See any textbook or online reference of C++. Look for "pre-increment" (`++x`) and "post-increment" (`x++`) operators. They have the same side effect (increment x), but differ in the value of the expression. If you don't use the result they are equivalent (for basic types). C++ programmers usually prefer pre-increment as it can generally be implemented more efficiently for user-defined types.

5) Even more basic textbook question. `a < b` tests for a less-than relationship, `a != b` tests for inequality.

Note: All answers assume that the types used are from the standard C++ library, i.e that appropriate includes of the `<string>` and `<iostream>` headers and necessary `using` directives or declarations are used.

# c - 替换数组动态改变其内存

> ID：14414847
> 
> 赞同：2
> 
> 时间：2013-01-19T13:28:18.057
> 
> 标签：c, arrays

我有多维 arr[3][4]。

然后我为 newArr[4][3] 分配内存并将 arr 的行更改为列，将列更改为行，将其保存到 newArr。

是否可以用 newArr 动态替换 arr？一个小例子来说明情况：

```
#include <stdio.h>

void change(int[][4], int, int);

int main()
{
    int arr[][4] = {
        {1, 3, 2, 4},
        {3, 2, 4, 5},
        {9, 3, 2, 1},
    };
    change(arr, 4, 3);
    // now, there should be arr[4][3] = newArr

    getchar();
}

void change(int arr[][4], int cols, int rows)
{
    // create newArr array.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T13:29:27.677

不可以。您不能更改真实数组的大小。

您需要在整个过程中使用动态分配才能完成这项工作。如果您不清楚如何动态分配多维数组，请参阅例如[http://c-faq.com/aryptr/dynmuldimary.html](http://c-faq.com/aryptr/dynmuldimary.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T03:02:47.943

当然你可以做到这一点，但方式略有不同。使用固定大小的数组，您无法做到这一点。您必须进行动态内存分配，然后您可以根据需要使用下标。您只需要跟踪当前使用的下标以避免错误。

```
#include <stdio.h>
#include<string.h>

void change(int **, int, int);

int main()
{
    int **arr = (int **)malloc(sizeof(int)*3*4);

    // Fill this memory in whatever way you like. I'm using your previous array
    // to fill arr.
    // Note that initial_arr is not your working arr. Its just for initialization
    int initial_arr[][4] = {
        {1, 3, 2, 4},
        {3, 2, 4, 5},
        {9, 3, 2, 1},
    };

    memcpy(arr, initial_arr, sizeof(int)*3*4);

    // You can access arr in the same way as you do previously. for example 
    // to print arr[1][2] you can write
    // printf("%d", arr[1][2]);

    change(arr, 4, 3);

    // now, simply copy newArr in arr. and you can subscript arr as arr[4][3]
    memcpy(arr, newArr, sizeof(int)*3*4);

    getchar();
}

void change(int **arr, int cols, int rows)
{
    // create newArr array.
} 
```

# c - C 语言：malloc() 返回的指针和强制转换

> ID：14414854
> 
> 赞同：0
> 
> 时间：2013-01-19T13:28:58.913
> 
> 标签：c, pointers, memory, malloc

> **可能重复：**
> [我要转换 malloc 的结果吗？](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)
> [malloc 的最佳实践是什么？](https://stackoverflow.com/questions/14099967/what-is-the-best-practice-for-malloc)

我是 c 语言的新手，我有一个问题，正如我在课堂上解释的那样：

> malloc() 返回的指针类型为 void *，因此我们需要将其转换为所需的类型

这意味着我需要做：

```
char *str;
str = (char *) malloc(14); 
```

但我不明白，这是必须的吗？假设 malloc 返回那个 void 指针，为什么我在**没有**进行强制转换的情况下看到很多示例？一个例子：

```
float *arr = malloc (20 * sizeof (float)); 
```

谁能解释一下:)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T13:30:25.167

在 C 中，不需要这种转换。转换确实是隐式的。

> **C11 (n1570)，第 6.3.2.3 节指针**
> 
> 指向的指针`void`可以转换为指向任何对象类型的指针或从指向任何对象类型的指针转​​换。指向任何对象类型的指针都可以转换为指向 void 的指针并再次返回；结果应与原始指针比较。

由于这是不必要的，因此是否强制`malloc`返回是另一个问题（请参见[此处](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)）。

# javascript - 在分页功能中添加 prev & next li

> ID：14414867
> 
> 赞同：0
> 
> 时间：2013-01-19T13:30:40.830
> 
> 标签：javascript

我想将 prev 和 next li 添加到我的分页功能中。该函数本身可以完美运行，并根据您希望从下拉列表接收的行数显示页面数量 .val();

```
function pagination() {
    $('table[data-provide=pagination]').each(function () {

        var $table = $('#foo');
        var $pager = $('<ul></ul>');

        var currentPage = 0;
        var numPerPage = $("#bar").val();
        var numRows = $table.find('.someclass').length;
        var numPages = Math.ceil(numRows / numPerPage);

        $table.unbind('repaginate');

        $table.bind('repaginate', function () {
            $table.find('.someclass').hide().slice(currentPage * numPerPage, (currentPage + 1) * numPerPage).show();
        });

        for (var page = 0; page < numPages; page++) {
            var link = '<a href="#">' + page + '</a>';

            $('<li></li>').html(link).on('click', {
                newPage: page
            }, function (event) {
                currentPage = event.data['newPage'];
                $table.trigger('repaginate');
                $(this).addClass('active').siblings().removeClass('active');
            }).appendTo($pager);
        };

        var prev = '<li id="pagiprev"><a href="#' + (currentPage - 1) + '">&laquo</a></li>';
        var next = '<li id="paginext"><a href="#' + (currentPage + 1) + '">&raquo</a></li>';

        $pager.append(next);
        $pager.prepend(prev);

        $pager.find("li:first-child").addClass('active');

        $($table.data('pager')).html($pager);
        $table.trigger('repaginate');
    });
}; 
```

现在我添加了：

```
var prev = '<li id="pagiprev"><a href="#' + (currentPage - 1) + '">&laquo</a></li>';
var next = '<li id="paginext"><a href="#' + (currentPage + 1) + '">&raquo</a></li>';

$pager.append(next);
$pager.prepend(prev); 
```

但显然这并不像我想象的那么容易。当然，使下一个和上一个 li 的工作跳到上一个页面的下一个是第 1 步。它还应该根据最后一页或第一页添加或删除“活动”类，因为它没有意义能够如果您在第一页，请单击上一个按钮。

# html - 在 Blackberry 10 Webworks 上管理数据角色选项卡

> ID：14414870
> 
> 赞同：0
> 
> 时间：2013-01-19T13:30:48.623
> 
> 标签：html, css, jquery-mobile, blackberry-webworks

我有一些问题。我做了一个应用程序，我想将菜单放在标签管理器黑莓上。

这是代码

```
<div data-role="footer" data-position="fixed">
    <div data-role="actionbar">
        <div data-role="tab" data-overflow="true">
            <img src="images/ic_home.png" alt="action_home" />
            <p>Home</p>
            <img src="images/ic_notification.png" alt="action_notification" />
            <p>Notification</p>
        </div> 
```

但它显示错误页面标签不起作用，如下图所示![黑莓网络上的错误图标和 div 布局](../Images/43c84306fec21ed430bea8ee0b83b0ab.png)

我想要的是有两行带有描述的图标然后

我正在使用基于开发的 Jquerymobile。

如何解决这个问题？

提前致谢。

**更新：它现在正在工作，**

我错过了为每个图像创建每个数据角色的概念。但是仍然有问题，当我测试设计时，它显示错误。

像这样：![按下选定选项卡后出错](../Images/39f83a753f15505b73ef3858bf1d10ee.png)

请问如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:52:57.887

好的，我想念解释文档

我可以通过创建不同的 div 来使它正确

```
<div data-role="footer" data-position="fixed">
<div data-role="actionbar">
    <div data-role="tab" data-overflow="true">
        <img src="images/ic_home.png" alt="action_home" />
        <p>Home</p>
    </div>
    <div data-role="tab" data-overflow="true">
        <img src="images/ic_notification.png" alt="action_notification" />
        <p>Notification</p>
    </div> 
```

等等...

# javascript - 在内部函数中传递对象

> ID：14414871
> 
> 赞同：0
> 
> 时间：2013-01-19T13:31:04.870
> 
> 标签：javascript, scope

```
function google(){
     var kevin = "hello";
     john(kevin);
}

function john(arg){
     var mark = arg;
    function yahoo(mark){
          alert(mark);   
    }

} 
```

现在，当我调用我的函数时`google()`，它为什么不调用雅虎中的警报。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T13:33:08.230

你不叫`yahoo`。你需要这样做：

```
function john(arg){
     var mark = arg;
    function yahoo(mark){
          alert(mark);   
    }

    yahoo(mark); // <-------
} 
```

你也可以重构你的代码来做这样的事情：

```
function john(arg){
     var mark = arg;

    (function yahoo(){
          alert(mark);   
    })();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T13:32:23.023

因为里面没有`yahoo`函数调用`john`。

```
function john(arg) {
    var mark = arg;
    function yahoo(mark) {
          alert(mark);   
    }
    yahoo(mark);  // <-- call
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T13:33:31.090

您正在定义函数`yahoo`，但从未真正调用它。试试这个：

```
function google(){
     var kevin = "hello";
     john(kevin);
}

function john(arg){
     var mark = arg;
     yahoo(mark);
     function yahoo(mark){
          alert(mark);   
     }    
} 
```

# android - 如何检测手指何时滑离 ImageButton？

> ID：14414873
> 
> 赞同：1
> 
> 时间：2013-01-19T13:31:34.430
> 
> 标签：android, touch, imagebutton

我有一个 Imagebutton，我在 ActionDOWN 上设置了 ColorFilter，但是如果用户将手指从 ImageButton 上滑开，它仍然会应用 setColorFilter。

**问题：**

*   如何检测手指何时滑落？然后我可以应用 setColorFilter(null);

    ImageButton i1 = (ImageButton)v.findViewById(R.id.imageButton1); i1.setOnTouchListener(new OnTouchListener() {

    ```
     @Override
            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                ImageButton button = (ImageButton)v;
                String principal = "principal";
                if (event.getAction() == MotionEvent.ACTION_DOWN) {
                    button.setColorFilter(0x8066bbdd);
                    return true;
                } else if (event.getAction() == MotionEvent.ACTION_UP) {
                    button.setColorFilter(null);
                    Intent i = new Intent(getActivity(), SubView.class);
                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    i.putExtra("query", principal);
                    startActivity(i);
                    return true;
                }
                return false;
            }
        }); 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T13:37:42.187

您可以使用`MotionEvent.ACTION_OUTSIDE`

```
ImageButton i1 = (ImageButton)v.findViewById(R.id.imageButton1); i1.setOnTouchListener(new OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub
        ImageButton button = (ImageButton)v;
        String principal = "principal";
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            button.setColorFilter(0x8066bbdd);
            return true;
        } else if (event.getAction() == MotionEvent.ACTION_UP) {
            button.setColorFilter(null);
            Intent i = new Intent(getActivity(), SubView.class);
            i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            i.putExtra("query", principal);
            startActivity(i);
            return true;
        } else if(event.getAction() == MotionEvent.ACTION_OUTSIDE)
        {

            // Do some stuffs here
        }

        return false;
    }
}); 
```

**更新 1：**

如果`MotionEvent.ACTION_OUTSIDE`不起作用，您可以尝试`MotionEvent.ACTION_CANCEL`

# android - 在 web 视图中加载页面时在 android 中处理返回键

> ID：14414874
> 
> 赞同：0
> 
> 时间：2013-01-19T13:31:44.427
> 
> 标签：android, android-webview

我在按键时遇到了这种覆盖方法的问题。问题是我有这个错误吗？我不知道我需要把这个方法放在我的活动中的什么地方。

这是我的整个代码：

```
public class UgWeb extends Activity {
    ListView list_ugweb;
    WebView web;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.ugweb);
        list_ugweb = (ListView)findViewById(R.id.list_ugweb);
        @Override
        public boolean onKeyDown(int keyCode, KeyEvent event) 
        {
            if ((keyCode == KeyEvent.KEYCODE_BACK) && web.canGoBack())
            {
                web.goBack();
                return true;
            }
            return super.onKeyDown(keyCode, event);
        }

        String[] ugweb = new String[] {"Studentsite", "Staffsite", "BAAK", "Seminar", "Workshop", "Virtual Class", "iLab", "Gunadarma"};
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1, ugweb)
                {
                    @Override
                    public View getView(int position, View convertView, ViewGroup parent)
                    {
                        View view = super.getView(position, convertView, parent);
                        TextView textview = (TextView)view.findViewById(android.R.id.text1);
                        textview.setTextColor(Color.WHITE);
                        return view;
                    }
                };
        list_ugweb.setAdapter(adapter);
        list_ugweb.setOnItemClickListener(new OnItemClickListener()
        {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int pos, long id)
            {
                String url;
                switch(pos)
                {
                    case 0 : url = "http://www.studentsite.gunadarma.ac.id"; 
                             webview(url);
                             break;
                    case 1 : url = "http://www.staffsite.gunadarma.ac.id";
                             webview(url);
                             break;
                    case 2 : url = "http://www.baak.gunadarma.ac.id";
                             webview(url);
                             break;
                    case 3 : url = "http://www.seminar.gunadarma.ac.id";
                             webview(url);
                             break;
                    case 4 : url = "http://www.lepkom.gunadarma.ac.id";
                             webview(url);
                             break;
                    case 5 : url = "http://www.v-class.gunadarma.ac.id";
                             webview(url);
                             break;
                    case 6 : url = "http://www.ilab.gunadarma.ac.id";
                             webview(url);
                             break;
                    case 7 : url = "http://www.gunadarma.ac.id";
                             webview(url);
                             break;
                    default : break;
                }
            }
        });
    }

    public void webview(String loadurl)
    {
        final String url = loadurl;
        setContentView(R.layout.webview);
        web = (WebView)findViewById(R.id.view);
        final Activity activity = UgWeb.this;
        final ProgressDialog progressdialog = new ProgressDialog(activity);
        progressdialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        progressdialog.setCancelable(true);
        web.getSettings().setBuiltInZoomControls(true);
        web.setWebChromeClient(new WebChromeClient()
        {
            public void onProgressChanged(WebView view, int progress)
            {
                progressdialog.show();
                progressdialog.setMessage("Please wait..");
                progressdialog.setProgress(0);
                activity.setProgress(progress * 1000);
                if(progress == 100 && progressdialog.isShowing())
                {
                    progressdialog.dismiss();
                }
            }
        });
        web.setWebViewClient(new WebViewClient());
        web.loadUrl(url);
    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_ugsimpliy_beta, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T13:45:21.343

在 onCreate() 之后使用这个方法：

```
public class UgWeb extends Activity {

            @Override
            public void onCreate(Bundle savedInstanceState) {
                .......
            }

            @Override
            public boolean onKeyDown(int keyCode, KeyEvent event) 
            {
                if ((keyCode == KeyEvent.KEYCODE_BACK) && web.canGoBack())
                {
                    web.goBack();
                    return true;
                }
                return super.onKeyDown(keyCode, event);
            }
} 
```

# ruby-on-rails - Rails has_man 通过关系

> ID：14414875
> 
> 赞同：1
> 
> 时间：2013-01-19T13:31:45.493
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, has-many-through

我正在尝试使用`has_many :through`rails 中的关系来返回一组产品功能。请参阅此模型的要点：[https ://gist.github.com/4572661](https://gist.github.com/4572661)

我知道如何`ProductFeature`直接使用模型来做到这一点，但我真的不想直接与它交互。

我希望能够做到这一点：

`features = Product.features`

所以它返回：

`[id: 1, name: 'Colour', value: 'Blue'], [id: 2, name: 'Size', value: 'M'], [id: 3, name: 'Shape', value: 'Round']`

但我只能让它返回：

`[id: 1, name: 'Colour'], [id: 2, name: 'Size'], [id: 3, name: 'Shape']`

我[以此](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)为起点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T16:56:50.227

`has_many :through`旨在将之`join table`视为无非如此。

连接上的任何列都将从关联中忽略。

因此我们必须使用`product_features`

```
product.product_features(include: :feature) 
```

因此我们可以说

```
product.product_features(include: :feature).each do |pf|
  feature = pf.feature

  name = feature.name
  value = pf.value
end 
```

* * *

如果你经常使用这种类型的东西，我会倾向于做这样的事情；

```
class Product
  # always eager load the feature
  has_many :product_features, include: :feature
end

class ProductFeature
  # delegate the feature_name
  delegate :name, to: :feature
end 
```

# python - Python从网站上抓取fb评论

> ID：14414876
> 
> 赞同：3
> 
> 时间：2013-01-19T13:31:48.590
> 
> 标签：python, beautifulsoup

我一直在尝试在以下网站页面上使用 Beautiful Soup 来抓取 Facebook 评论。

```
import BeautifulSoup
import urllib2
import re

url = 'http://techcrunch.com/2012/05/15/facebook-lightbox/'

fd = urllib2.urlopen(url)

soup = BeautifulSoup.BeautifulSoup(fd)

fb_comment = soup("div", {"class":"postText"}).find(text=True)

print fb_comment 
```

输出是一个空集。但是，我可以清楚地看到 facebook 评论位于 techcrunch 网站的检查元素中的上述标签内（我对 Python 并不陌生，想知道这种方法是否正确以及我哪里出错了？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:52:52.127

就像 Christopher 和 Thiefmaster：这都是因为 javascript。

[但是，如果您真的需要该信息，您仍然可以通过http://seleniumhq.org](http://seleniumhq.org)上的 Selenium 检索它，然后在此输出上使用 beautifulsoup。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T13:45:20.860

Facebook 评论是使用 AJAX 动态加载的。您*可以*抓取原始页面以检索此内容：

```
<fb:comments href="http://techcrunch.com/2012/05/15/facebook-lightbox/" num_posts="25" width="630"></fb:comments> 
```

之后，您需要向某些 Facebook API 发送请求，该 API 将为您提供该标签中 URL 的评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T13:46:00.083

您正在查找的页面部分不包含在源文件中。使用浏览器，您可以通过打开页面源来自己查看。

在将文档传递给 BeautifulSoup 之前，您需要使用[pywebkitgtk](http://code.google.com/p/pywebkitgtk/)之类的东西来执行 javascript

# python - 如何打破第一个文档字符串中的链接以满足 pep8？

> ID：14414878
> 
> 赞同：24
> 
> 时间：2013-01-19T13:32:00.917
> 
> 标签：python, python-sphinx, restructuredtext, pep8

我正在使用 Sphinxdoc 生成 api 文档，并且在编写文档字符串时遇到了 pep8 一致性问题。

正如您在下面看到的，到 OWASP 站点的链接在第 105 列结束，远远超过 pep8 规定[的最大行长](http://www.python.org/dev/peps/pep-0008/#maximum-line-length].)

```
def handle_csrf(...):
    """The general recommendation by people in the know [OWASP]_, is
       'to implement the Synchronizer Token Pattern (STP_)'.

       .. [OWASP] The Open Web Application Security Project
          (https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)_Prevention_Cheat_Sheet)
       .. _STP: http://www.corej2eepatterns.com/Design/PresoDesign.htm

    """ 
```

有没有办法包装 url 同时仍将其保留在生成的文档中？

插入反斜杠不起作用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-19T13:43:42.160

反斜杠`\`可以完成这项工作，但会破坏漂亮的缩进。

```
def handle_csrf():
    """The general recommendation by people in the know [OWASP]_, is
       'to implement the Synchronizer Token Pattern (STP_)'.

       .. [OWASP] The Open Web Application Security Project
          (https://www.owasp.org/index.php/Cross-\
Site_Request_Forgery_(CSRF)_Prevention_Cheat_Sheet)
       .. _STP: http://www.corej2eepatterns.com/Design/PresoDesign.htm

    """ 
```

结果（长线也是如此）：

```
>>> print handle_csrf.__doc__
The general recommendation by people in the know [OWASP]_, is
       'to implement the Synchronizer Token Pattern (STP_)'.

       .. [OWASP] The Open Web Application Security Project
          (https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)_Prevention_Cheat_Sheet)
       .. _STP: http://www.corej2eepatterns.com/Design/PresoDesign.htm 
```

此外，PEP8 是一个指南，而不是法律——这似乎是一个（罕见的）案例，可以忽略它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-25T13:37:15.813

调查[一个问题](https://stackoverflow.com/q/28717178/232794)，我想出了一个（优雅的？）解决方案。

首先，这是我的文档字符串：

```
def ook():
"""The sound a monkey makes...
   ⚠  `SQLAlchemy`_ used here.
"""
... 
```

其次，在第一个文件中，我定义了这个：

```
.. autofunction:: ook
.. _SQLAlchemy: http://www.sqlalchemy.org 
```

因此，当`ook`记录时，`SQLAlchemy`_ 链接有效。

# javascript - WinRT - Javascript - 是否可以实现 FTP、SSH、SFTP，...？

> ID：14414880
> 
> 赞同：1
> 
> 时间：2013-01-19T13:32:35.130
> 
> 标签：javascript, sockets, windows-8, windows-runtime, winjs

是否可以在 Metro 应用程序中实现任何网络协议？

希望 WebSockets 和 XHR 不是唯一可用的网络工具。

希望有人可以提供帮助。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T13:38:29.010

我自己没有尝试过，但这里是你想要做的微软官方文档：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh452996.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh452996.aspx)

# cocos2d-iphone - 在 cocos2d-iphone 中 scheduleUpdate 调度的更新方法运行时间过长怎么办？

> ID：14414882
> 
> 赞同：1
> 
> 时间：2013-01-19T13:32:39.573
> 
> 标签：cocos2d-iphone, game-engine

在 scheduleUpdate 之后，update:(ccTime)dt 每秒会被调用 60 次，如果一次 update 方法的运行时间超过 1/60 秒怎么办？下次通话会被取消吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T14:28:24.450

帧率下降。什么都不会被取消。

在 60 fps 时，cocos2d 和您的代码处理渲染帧所需的所有内容，包括所有 OpenGL 绘图操作，正好是 1/60 秒。完成这一切需要 0.016666666 秒。

如果一个更新周期比这更长，下一帧将在 0.03333333 秒后渲染，如果多个帧连续需要更长的处理时间，则将帧速率降低到 30 fps。前提是一切都在那个时间内完成，否则下一帧更新会延迟到 0.05 秒甚至 0.06666666 秒。

使用 cocos2d 只能获得 60、30、20 或 15 fps 的帧率，因为它使用 CADisplayLink 与屏幕刷新率同步更新。cocos2d 中的帧率计数器可能显示 40 fps 或其他值，因为它是多个帧的平均值。

# c - 如何从未知输入类型（文件流或标准输入）C 中读取数据

> ID：14414883
> 
> 赞同：3
> 
> 时间：2013-01-19T13:32:56.980
> 
> 标签：c

我想知道如何从未知的输入源读取数据，这意味着我不知道用户是要输入一个句子还是要给我一些文本文件。我已经尝试过使用`fscanf`，因为我已经阅读过它适用于未格式化的输入类型这是我的代码，我想获得某种类型的输入（文件或只是一个句子`(echo bla bla bla)`并且`"int"`只打印第`"int"`一个单词。该程序应该用于管道意味着命令看起来像这样：
有两种使用程序的方法：

```
1.echo "blabla" | myprog 2  (number of words to print)
2.cat input.txt | myprog 2  (number of words to print) 
```

有问题的行是第 16 行，我尝试使用`fscanf`
Thanks！

```
 1 #include <stdio.h>
  2 #include <ctype.h>
  3 #include <string.h>
  4 #include <stdlib.h>
  5
  6
  7 int main(int argc, char *argv[]){
  8    char *words[32];
  9    int numofwords = atoi(argv[2]);
 10    int i=0;
 11    int len;
 12    char *word = malloc (32 * sizeof(char));
 13    char c;
 14   while (i<=numofwords){
 15    if ((c = getc (argv[1])) != EOF){
 16         fscanf(argv[1],"%s",&word);
 17         len = strlen (word);
 18         words[i] = malloc ((len+1) * sizeof(char));
 19         i++
 20    }
 21    printf(words[i]);
 22   }
 23   return 0;
 24 }
 25 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T14:21:10.927

可能是我正确理解了您的需求。

我不是在纠正你的代码，而是在编写我自己的代码。

下面是从控制台读取的简单代码： 代码：`main.c`

```
#include <stdio.h>
#include <ctype.h>
#include <string.h>
#include <stdlib.h>
int main(int argc, char* argv[]){
    if(argc!=2){
        printf("\n wrong number of argument\n");
        exit(1);
    }
    int numofwords = atoi(argv[1]);
    char buffer[128];

    //printf("%d\n",numofwords);

    while(numofwords--){
        scanf("%s",buffer);
        printf("%s\n",buffer);
    }
    return 0;
} 
```

它是如何工作的：

```
~$ gcc  main.c -o main 
```

执行：

```
:~$ ./main 

wrong number of argument
:~$ ./main 2
grijesh
grijesh
yourname        
yourname
:~$ 
```

我希望你能理解。该程序只需从控制台读取（扫描）并打印到控制台。while 循环运行您传递命令行输入的次数。

现在，一个文本文件`dumy.txt`一个输入文件：

```
:~$ cat dumy.txt
yourname
myname
hisname
hername
:~$ 
```

现在看看你想通过你的代码实现什么：

```
:~$ cat dumy.txt | ./main 2
yourname
myname
:~$ 
```

如果你想通过`echo`：

```
:~$ echo $'one\ntwo\nthree' | ./main 2
one
two
:~$ 
```

*这是你想要的吗？*

如果是：

你想念的是：

**[你的代码]**

（*错误 1,2*）
您的 fsacnf 在两个方面是错误的：

```
fscanf(argv[1],"%s",&word); 
```

*   第一个论点是`argv[1]`你`char*`需要传递`FILE*`类型是错误的。正如 Oli Charlesworth 先生的回答中所解释的那样。

*   其次，您仍然需要从`stdin`. `|`运算符将输出从第一个命令重定向到第二个命令。

（*错误 3, 4, 5, 6*）
通过发送`echo "blabla"`，您只是发送一个刺痛，您需要像我一样做一些事情（*我在新行的回显字符串中添加了 \n 并且我的回显字符串以开头，`$`因此它不会打印为原始字符串*）。echo 以便您可以根据`argv[1]`不是的第二个参数从代码中读取`argv[2]`。因此，在您的代码中，以下行也是错误的。

```
int numofwords = atoi(argv[2]); 
```

我在我的代码中更正了这一行。

并`i`初始化为零`i = 0`，在while循环条件下`<=`，我认为应该是`<`。

（*错误7*）
你运行代码的方式是错误`echo "blabla" | myprog 2`的，你的程序不知道`mygrog`你必须通过完整的路径。像我一样`./main`，`./`表示当前目录。

这只是我对你的问题的看法。另请阅读 William Pursell 先生在评论中给出的答案。

如果您还有其他疑问，请告诉我。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T14:23:05.000

另一种选择是将文件名作为参数传递。

1.  回声“blabla” | myprog 2（要打印的字数）
2.  myprog 2 input.txt（要打印的字数）

然后你会：

*   如果 argc == 1，则正常继续并使用 fgetc 或其他替代 f* 方法处理标准输入（标准输入是 FILE*）。
*   如果 argc == 2，则从 argv[1] 获取文件名，使用 fopen(filename) 获取 FILE* 并处理它。

否则，您将按照 Oli 所说的操作并获取第一个单词，然后 fopen 并传递给您的处理函数，或者 fseek(stdin, SEEK_SET, 0) 然后将 stdin 传递给您的处理函数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-19T13:34:26.123

我不确定您的问题到底是什么，但我认为可能是“如何将文件输入和控制台输入视为相同？”。

您是否知道`stdin`（标准输入）已经是`FILE *`? 这意味着您可以将它作为第一个参数传递给`fscanf`，就像“普通”文件一样：

```
FILE *normal_file = fopen(...);

// Read from normal file
fscanf(normal_file, "%d", &x);
// Read from stdin
fscanf(stdin, "%d", &y); 
```

# c++ - 从 JFIF/EXIF (JPEG) 标头获取实际图像分辨率？

> ID：14414884
> 
> 赞同：4
> 
> 时间：2013-01-19T13:33:04.713
> 
> 标签：c++, c, header, jpeg, resolution

我创建了一个 C++ 结构，用于读取和验证 JFIF 文件格式的标头。结构如下...

```
#pragma pack(1)
typedef struct _JFIF_Header
{
    WORD SOIMarker;         // start of image marker
    WORD APP0_Marker;       // Application use marker
    WORD APP0_Length;       // Length of APP0 field
    BYTE Identifier[5];     // zero terminating string "JFIF",X'4A', X'46', X'49', X'46', X'00'
    BYTE Version[2];        // X'01',X'02'
    BYTE Units;             // units = 0:no units ;; units = 1:X and Y are dots per inch ;; units = 2:X and Y are dots per cm
    WORD XDensity;          // horizontal pixel density
    WORD YDensity;          // vertical pixel density
    BYTE XThumbnail;        // Thumbnail horizontal pixel density
    BYTE YThumbnail;        // Thumbnail vertical pixel density
}JFIFHeader; 
```

从原始磁盘集群读取并在`JFIFHeader`结构中复制这些字节已经完成，一切正常。现在，问题是，保存的值`XDensity`和`YDensity`变量非常高（`X:24576,Y:24576`我在 Hex-Editor 中读取了图像）。该值不能是图像的实际宽度和高度。的值为，`Units`即`0x01`单位为“像素每英寸”。

如何`1024x826`从这些值中获得实际的图像分辨率？如果这不是正确的方法，请给我任何其他选择。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-19T13:41:34.937

您可以找到 JPEG 的`SOF0`标记 ( `0xC0`)，然后是 16 位长度，然后是每像素位数（8 位）、高度（16 位）、宽度（16 位）和组件数（8 位）。所有值都是网络字节顺序。

![在此处输入图像描述](../Images/bd482e7473f2847536f5b42f06a4f1fe.png)

图像`0x1C2`按`0x1C2`像素 (450x450)。

# php - 导入的配置产品没有关联

> ID：14414889
> 
> 赞同：2
> 
> 时间：2013-01-19T13:33:31.230
> 
> 标签：php, magento, config, magento-1.7, associated-types

我正在使用 Magento 1.7。我能够成功导入可配置产品，但相关产品没有链接到它。我必须通过我的管理员手动链接它们。如何通过 csv 文件链接它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:03:30.760

Magento 导入配置文件不支持此功能。您可以先导入您的产品，然后您可能需要做的是编写一个自定义模块来覆盖导入功能，其中另一个 csv 包含您可配置产品和简单产品之间的关联。

makign 这个关联会比较简单， [如何以编程方式添加可配置产品](http://learntipsandtricks.com/blog/magento/184/Magento-How-to-assign-simple-products-to-configurable-programmatically)

# c# - 在正则表达式中定义和提取变量

> ID：14414891
> 
> 赞同：0
> 
> 时间：2013-01-19T13:33:58.043
> 
> 标签：c#, regex

我想在我的正则表达式中定义一个变量，以便我可以简单地从匹配的输入字符串中提取其对应的值。

例如，我有这样的模式`"\w*\s+\d+"`：

和一个输入字符串，如：`"aaa 113"`

当接收到匹配字符串时，我希望能够简单地提取与模式部分相对应的值，该部分表示`"\d+"`使用 C# 是数值

需要提及的是，我将表达式存储在数据库表中，并且我想从匹配的字符串中提取变量并将它们的值传递给动态检索的查询或存储过程。

我希望该过程完全与上下文无关，因为我们不在匹配字符串中出现变量及其值的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T14:01:07.690

您可以使用带有名称的匹配组，而不取决于其在模式中的顺序：

```
Match match = Regex.Match("aaa 113", @"(?<word>\w*)(?<space>\s+)(?<num>\d+)");
string words = match.Groups["word"].Value;              //"aaa"
string spaces = match.Groups["space"].Value;            //" "
string nums = match.Groups["num"].Value;                //"113" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T13:41:24.563

这就是[匹配组](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match.groups.aspx)的用途。

使用匹配组，您可以轻松提取与正则表达式的*括号子表达式*匹配的子字符串。模式就像（如果您的意图是匹配整个字符串，`"\w*\s+(\d+)"`您可能想要添加 anchors ）。`^``$`

`int.Parse`当你有一个子字符串时，如果这是你想要的（使用或类似的东西），你仍然可以将它转换为数值。

# asp.net - SqlDataSource 不会从数据库中检索登录用户的数据？

> ID：14414892
> 
> 赞同：2
> 
> 时间：2013-01-19T13:34:03.863
> 
> 标签：asp.net, sql-server, asp.net-membership, sqldatasource

我尝试根据登录的 UserId 检索用户的数据，但没有任何进展。有什么建议么？

```
protected void SqlDataSource1_Selecting(object sender, SqlDataSourceSelectingEventArgs e)
{
    // Get a reference to the currently logged on user  
    MembershipUser currentUser = Membership.GetUser();    

    // Determine the currently logged on user's UserId value   
    Guid currentUserId = (Guid)currentUser.ProviderUserKey;   

    // Assign the currently logged on user's UserId to the @UserId parameter     
    e.Command.Parameters["@UserId"].Value = currentUserId; 
} 
```

这是`SqlDataSource`

```
 <asp:SqlDataSource ID="SqlDataSource1" runat="server"
      ConnectionString='<%$ ConnectionStrings:NaviConnectionString %>' 
    SelectCommand="SELECT [UserId], [FirstName], [LastName] FROM [UserProfiles] WHERE ([UserId]  = @UserId)">
    <SelectParameters>
        <asp:Parameter Name="UserId" Type="String"></asp:Parameter>
    </SelectParameters>
  </asp:SqlDataSource> 
```

这是`GridView`

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
               DataKFFeyNames="UserId" DataSourceID="SqlDataSource1" 
               EmptyDataText="There are no data records to display." 
               DataKeyNames="UserId">
     <Columns>
         <asp:BoundField DataField="UserId" HeaderText="UserId" SortExpression="UserId" />
         <asp:BoundField DataField="FirstName" HeaderText="FirstName" SortExpression="FirstName" />
         <asp:BoundField DataField="LastName" HeaderText="LastName" SortExpression="LastName" />
     </Columns>
</asp:GridView> 
```

没有要显示的数据记录。

![在此处输入图像描述](../Images/5e22bafee3b5e6f361a0c08250108400.png)

但是，当我在查询生成器中执行代码时，它可以工作。

所以我需要`UserId`从数据库中手动获取。

![在此处输入图像描述](../Images/4e9f259912d7e0491d1b0aaa07b483a2.png)

然后转到查询生成器，然后执行，然后将`userid`in 粘贴到`UserID`.

![在此处输入图像描述](../Images/c847dec1b855defe5c2a5b288eea2a00.png)

然后它根据以下内容显示正确的数据`UserId`：

![在此处输入图像描述](../Images/9d20b7891e7090eb619fe055a5185f7a.png)

我也尝试将其更改为：

```
 <SelectParameters>
        <asp:Parameter Name="UserId" Type="Empty" DbType="Guid"></asp:Parameter>
  </SelectParameters> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T13:54:18.320

您应该设置一个断点并查看是否`currentUserId`已填充。我相信是的。如果是这样，那么检索 UserId 不是问题，而是设置参数值或选择数据的问题。

我认为您需要将参数的类型从**字符串**更改为**Guid**

```
<SelectParameters>
    <asp:Parameter Name="UserId" Type="Guid"></asp:Parameter>
</SelectParameters> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-19T09:08:22.497

只需更改此：

```
protected void SqlDataSource1_Selecting(object sender, SqlDataSourceSelectingEventArgs e)

{

// Get a reference to the currently logged on user  
   MembershipUser currentUser = Membership.GetUser();    

// Determine the currently logged on user's UserId value   
Guid currentUserId = (Guid)currentUser.ProviderUserKey;   

// Assign the currently logged on user's UserId to the @UserId parameter     
e.Command.Parameters["@UserId"].Value = currentUserId.ToString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-23T08:52:09.033

在参数类型中没有 guid 选项。（同样在上面的代码中，sql数据源没有设置SqlDataSource1_Selecting。）怎么可能回答呢？只需声明参数名称即可。

```
<asp:Parameter Name="UserId"></asp:Parameter> 
```

# php - laravel 处理 OPTION http 方法请求

> ID：14414896
> 
> 赞同：24
> 
> 时间：2013-01-19T13:34:33.260
> 
> 标签：php, cors, laravel

我正在开发一个使用**laravel**作为其后端服务器的**angularjs应用程序。**我无法从 laravel 访问数据，因为在每个 GET 请求之前，angular 首先发送一个 OPTION 请求，如下所示。

 **```
OPTIONS /61028/index.php/api/categories HTTP/1.1
Host: localhost
Connection: keep-alive
Cache-Control: max-age=0
Access-Control-Request-Method: GET
Origin: http://localhost:3501
Access-Control-Request-Headers: origin, x-requested-with, accept
Accept: */*
Referer: http://localhost:3501/
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: UTF-8,*;q=0.5 
```

我试图通过在前置过滤器中添加以下代码来响应这一点

```
if (Request::getMethod() == "OPTIONS") {
    $headers = array(
        'Access-Control-Allow-Origin' => '*',
        'Access-Control-Allow-Methods' => 'POST, GET, OPTIONS, PUT, DELETE',
        'Access-Control-Allow-Headers' => 'X-Requested-With, content-type'
    );
    return Response::make('', 200, $headers);
} 
```

这将创建带有标题的响应：

```
Content-Encoding: gzip
X-Powered-By: PHP/5.3.5-1ubuntu7.11
Connection: Keep-Alive
Content-Length: 20
Keep-Alive: timeout=15, max=97
Server: Apache/2.2.17 (Ubuntu)
Vary: Accept-Encoding
access-control-allow-methods: POST, GET, OPTIONS, PUT, DELETE
Content-Type: text/html; charset=UTF-8
access-control-allow-origin: *
cache-control: no-cache
access-control-allow-headers: X-Requested-With, content-type 
```

虽然设置了标头，但浏览器仍然会抛出错误

```
XMLHttpRequest cannot load http://localhost/61028/index.php/api/categories. Origin http://localhost:3501 is not allowed by Access-Control-Allow-Origin. 
```

我还尝试将允许原点设置为请求标头中显示的原点，如下所示

```
$origin=Request::header('origin');
//then within the headers
'Access-Control-Allow-Origin' =>' '.$origin[0], 
```

仍然是同样的错误我做错了什么？任何帮助是极大的赞赏。

# 编辑 1

我目前正在使用一个非常丑陋的 hack，当收到 OPTIONS 请求时，我会覆盖 laravel 初始化。这是我在 index.php 中完成的

```
<?php
if ($_SERVER['REQUEST_METHOD']=='OPTIONS') {
    header('Access-Control-Allow-Origin : *');
    header('Access-Control-Allow-Methods : POST, GET, OPTIONS, PUT, DELETE');
    header('Access-Control-Allow-Headers : X-Requested-With, content-type');
}else{
/**
 * Laravel - A PHP Framework For Web Artisans
 *
 * @package  Laravel
 * @version  3.2.13
 * @author   Taylor Otwell <taylorotwell@gmail.com>
 * @link     http://laravel.com
 */ 
```

我还必须将 allow-origin 标头添加到 before 过滤器中。

我知道这并不聪明，但这是我目前唯一的解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-23T06:02:03.557

这是参考您关于上述问题的问题。你没有提到 laravel 和 angularJS 的版本。我假设您使用的是最新的 angularJS 和 Laravel。我还假设，角度托管在**http://localhost:3501**上，而 laravel 托管在**http://localhost**上， 只需按照以下步骤操作即可。

*   将下面的代码块放在 laravel 的 /public/.htaccess 文件中

    ```
    Header set Access-Control-Allow-Origin "http://localhost:3501"
    Header set Access-Control-Allow-Methods "GET,POST,PUT,DELETE,OPTIONS"
    Header set Access-Control-Allow-Credentials "true" 
    ```

*   将下面的行放在角度的配置中

    ```
    $httpProvider.defaults.withCredentials = true; 
    ```

切勿使用*****作为通配符。Larvel 无法识别用于会话管理的域。因此，将**http://localhost:3501设置为****Access-Control-Allow-Origin 的**完整域名。我想这些会对你有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-21T07:15:05.750

[这是最近修复](https://github.com/laravel/laravel/pull/1586)的 Laravel 中的一个错误。您可能想要更新到最新版本。

此外，您需要为您的服务器启用 CORS 支持。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-09-19T12:05:44.310

将此添加到您的 index.php 文件中

```
header('Access-Control-Allow-Origin: *'); 
header('Access-Control-Allow-Methods: GET, POST, PATCH, PUT, DELETE, OPTIONS');
header('Access-Control-Allow-Headers: Origin, Content-Type, X-Auth-Token'); 
```**

# windows-8 - Eclipse Juno 在 Windows 8 下找不到存储库

> ID：14414897
> 
> 赞同：2
> 
> 时间：2013-01-19T13:34:37.060
> 
> 标签：windows-8, repository, eclipse-juno

我在 Windows 8 64 下遇到了 Eclipse Juno 64 的问题：它看不到存储库、Maven 和 Eclipse 本身，例如[http://download.eclipse.org/releases/juno](http://download.eclipse.org/releases/juno)

它说一个错误

```
Unable to read repository at http://download.eclipse.org/releases/juno/compositeContent.xml.
Unable to read repository at http://download.eclipse.org/releases/juno/compositeContent.xml.
Cannot assign requested address: connect 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:39:41.963

编辑`eclipse.ini`并添加：

```
-Djava.net.preferIPv4Stack=true 
```

另外，如果您想使用 android SDK，请编辑 android.bat 文件（位于：...\android-sdk\tools 下）
找到`call %java_exe`“并添加

```
“-Djava.net.preferIPv4Stack=true”. 
```

它应该看起来像：

```
call %java_exe% -Djava.net.preferIPv4Stack=true %REMOTE_DEBUG% 
```

# ruby-on-rails - 如何获取当前控制器的实例变量？

> ID：14414898
> 
> 赞同：2
> 
> 时间：2013-01-19T13:34:52.270
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想在不同控制器的各种视图中使用以下部分。有没有办法`@person`用一个更通用的变量来替换，它只是调用当前控制器的实例变量，不管它是`@person`or`@user`还是`@company`什么？

```
<% content_for(:timestamps) do %>
    <p>Created: <%= l @person.created_at, :format => :long %>, Last updated: <%= l @person.updated_at, :format => :long %></p>
<% end %> 
```

谢谢你的帮助。

这是我基于 Xavier 代码的辅助函数：

```
def timestamps
  content_for(:timestamps) do
    current_string = controller.controller_name.singularize
    current_object = instance_variable_get("@#{current_string}")
    created_at_time = l(current_object.created_at, :format => :long)
    updated_at_time = l(current_object.updated_at, :format => :long)
    text = "Created: #{created_at_time}, Last updated: #{updated_at_time}"
    content_tag(:p, text)
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T13:56:40.707

这是可行的。尝试这个：

```
<% content_for(:timestamps) do %>
<% current_string = controller.controller_name.singularize %>
<% current_object = instance_variable_get("@#{current_string}") %>
    <p>Created: <%= l current_object.created_at, :format => :long %>, Last updated: <%= l current_object.updated_at, :format => :long %></p>
<% end %> 
```

当然，您需要进行错误/零检查。如果您是 MVC 纯粹主义者（或者只是喜欢干净的代码），您可能希望将其移至帮助程序。但这是一个功能性的起点。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T13:55:20.940

在每个控制器中定义一个方法来提供您正在寻找的元素。例如，在`PersonController`

```
 def current_element 
   @person
 end 
```

并将此方法定义为 中的助手`ApplicationController`，因此该方法可以从视图中使用

```
 helper_method :current_element 
```

使用此方法结果作为您 partial 的参数：

_the_partial.html.erb

```
<% content_for(:timestamps) do %>
    <p>Created: <%= l element.created_at, :format => :long %>, Last updated: <%= l @person.updated_at, :format => :long %></p>
<% end %> 
```

在您看来：

```
render :partial => 'the_partial', :locals => { :element => current_element } 
```

# jquery - Asp.Net 模态弹出窗口

> ID：14414900
> 
> 赞同：1
> 
> 时间：2013-01-19T13:35:12.177
> 
> 标签：jquery, asp.net, modalpopupextender, modalpopups

我正在研究这个 ASP.Net，我必须在其中实现一个模式弹出窗口，我正在犹豫如何实现这一点。我有各种解决方案，但我觉得它们不够优雅。

首先，我一直在使用 ASp.Net ModalPopupExtender 和使用 jQuery 显示模式弹出窗口之间犹豫不决。我更喜欢 jQuery，但我害怕不兼容。另一方面，当我过去使用 Modal Popup Extenders 时，我发现代码有点复杂。微软的东西在做他们认为你应该做的事情时效果很好，但大多数时候，我得到的要求是针对不同的场景，微软的控件不能开箱即用。

其次，我在加载部分 html 和在模式弹出窗口中使用 iFrame 之间犹豫不决。我宁愿避免使用 iFrame，因为它比控制模式弹出窗口和通过按下 iFrame 中的按钮关闭模式弹出窗口等操作要复杂一些（我知道这样做的方法，但我觉得他们有点尴尬）。但是，我不知道如何在不使用 iFrame 的情况下在模式弹出窗口中呈现一系列内容页面，如下例所示。可以做到吗？

首先，有一个主页，带有打开 de Modal Pop-Up 的链接： ![主页](../Images/923efe6907e64f0d48474cd4e33f6aba.png) 在初始 Modal Pop-Up 中，显示一些信息，可以关闭 de pop-up 或开始一些处理： ![模态弹出窗口 1](../Images/38c25a65fd3ff003f1607d24a963bc18.png) Then a Please Wait处理过程中在模态弹出窗口中显示消息： ![模态弹出窗口 2](../Images/a68a4eb4a6405dd55a299b4a5c16413f.png) 处理完成后，将在弹出窗口中显示结果摘要。此时，可以单击链接查看更多详细信息或单击按钮关闭模式弹出窗口： ![模态弹出窗口 3](../Images/2582a5ae98e8110ee2f3e756508ad202.png) 如果用户单击链接查看详细信息，这些将显示在模式弹出窗口中-向上。必须调整弹出窗口的大小： ![模态弹出窗口 4](../Images/9c8d45ae352c0ecc116cc90a383da4c1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T13:57:03.420

[这里](http://collegegfx.com/10-best-jquery-popup-plugins/)有一些你可以使用的 jquery 弹出插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:34:08.667

我最终使用了 iFrame，但我相信 Ankit 的解决方案也可以。人们必须权衡每种解决方案的优缺点，以选择合适的解决方案。

# dart - DART Web UI：如何在迭代循环中引用索引

> ID：14414901
> 
> 赞同：3
> 
> 时间：2013-01-19T13:35:42.267
> 
> 标签：dart, dart-webui

我想使用 HTML 中迭代循环的索引作为值，如：

```
 <select bind-value="gAddItem.drawType" 
            template iterate="int ind = 0; ind < gDrawDescs.length; ind++">
     <option value="{{ind.toString()}}"> {{gDrawDescs[ind]}} </option>
     </select> 
```

但是这种直观的语法似乎不起作用。有没有办法在 Dart Web-ui 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-25T20:19:14.900

好消息，大家！Seth Ladd 与 Peter B 的回答相关的问题在几个月前已[修复](https://github.com/dart-lang/web-ui/commit/9c79775383c4e01b2147e49de45ac70a82ff051b)`{{$index}}`，因此现在您可以从`<template>`. 从该提交中添加的测试代码：

```
Test the $index meta variable:
<template repeat="item in items" indentation="remove">
  <div>
    "{{item}}" is the {{$index}}{{suffix($index)}} item out of {{$list.length}}.
  </div>
</template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T14:21:24.937

Dart 似乎不允许列表范围文字，这将允许简洁的解决方案：

```
iterate="ind in [0 ... gDrawDescs.length]" 
```

要解决此问题，请创建以下函数：

```
List<int> createList(final int cnt) {
  var list = new List();
  for (var i=0; i<cnt; i++) {
     list.add(i);
  }
  return list;
} 
```

在 HTML 中：

```
iterate="ind in createList(gDrawDescs.length)" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-04T06:02:21.760

或者考虑这个

```
Iterable<int> Indices(int size) => Iterable<int>.generate(size, (i) => i); 
```

# c# - OnSelectedIndexChanged 事件不会为 DropDownList 的第一个元素触发

> ID：14414902
> 
> 赞同：0
> 
> 时间：2013-01-19T13:35:45.570
> 
> 标签：c#, asp.net, .net

我有一个事件`DropDownList`的方法`OnSelectedIndexChanged`改变了一个标签的内容。它工作正常，除了`DropDownList`. 有任何想法吗？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using Newsletter.DAL;
using Newsletter.Services;

public partial class Senders : System.Web.UI.Page
{
    private SenderService _client;
    private List<Sender> _allSenders;
    private DropDownList _dropDownListSenders;
    private TextBox _emailBox;
    private string _selectedSender;

    protected void Page_Load(object sender, EventArgs e)
    {
        _client = new SenderService();
        _allSenders = _client.GetAllSenders();
        _dropDownListSenders = (DropDownList)loginViewMain.FindControl("DropDownListSenders");
        _emailBox = (TextBox)loginViewMain.FindControl("textBoxEmail");
    }

 protected void DropDownListSenders_SelectedIndexChanged(object sender, EventArgs e)
    {
        _selectedSender = _dropDownListSenders.SelectedValue;
        _emailBox.Text = _selectedSender;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T13:47:51.567

您在第一个项目之前有一个“空”项目吗？如果不是，则选择第一项不会更改所选索引（第一项已被选择）并且不会触发事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T14:48:12.290

我添加`ViewStateMode="true"`了`DropDownList`，现在它工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T14:56:14.940

您的第一个元素已被选中，这就是为什么当您再次选择第一个元素时它`OnSelectedIndexChanged`不会触发，因为您没有更改元素。
`OnSelectedIndexChanged`仅当您选择的元素发生更改时才会触发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-04T09:28:46.470

请检查您的第一项是否设置为空字符串（即**string.Empty**）。如果是这样，则将其设置为**null**。这应该可以解决您的问题。

**空字符串问题**： - 事件不考虑将空字符串更改为新的内容。而如果将其设置为 null，则表示 null 已更改为字符串值。希望这可以帮助！快乐的编码...

# c# - 使用 xml 创建 WCF 服务

> ID：14414904
> 
> 赞同：0
> 
> 时间：2013-01-19T13:36:09.530
> 
> 标签：c#, xml, wcf, service

我需要创建 WCF 服务，但我有 2 个 XML 文件而不是函数定义，一个用于回答，第二个用于响应。如何使用该 xml 文件在我的服务中定义功能？

# c++ - 比较 blitz++、犰狳、boost::MultiArray

> ID：14414906
> 
> 赞同：34
> 
> 时间：2013-01-19T13:36:40.887
> 
> 标签：c++, multidimensional-array, armadillo, boost-multi-array, blitz++

我对 blitz++、armadillo、boost::MultiArray 与以下代码进行了比较（借自[一篇旧帖子](https://stackoverflow.com/questions/446866/boostmulti-array-performance-question/539001#539001)）

```
#include <iostream>
using namespace std;
#include <windows.h>
#define _SCL_SECURE_NO_WARNINGS
#define BOOST_DISABLE_ASSERTS 
#include <boost/multi_array.hpp>
#include <blitz/array.h>
#include <armadillo>

int main(int argc, char* argv[])
{
    const int X_SIZE = 1000;
    const int Y_SIZE = 1000;
    const int ITERATIONS = 100;
    unsigned int startTime = 0;
    unsigned int endTime = 0;

    // Create the boost array

    //------------------Measure boost Loop------------------------------------------
    {
        typedef boost::multi_array<double, 2> ImageArrayType;
        ImageArrayType boostMatrix(boost::extents[X_SIZE][Y_SIZE]);
        startTime = ::GetTickCount();
        for (int i = 0; i < ITERATIONS; ++i)
        {
            for (int x = 0; x < X_SIZE; ++x)
            {
                for (int y = 0; y < Y_SIZE; ++y)
                {
                    boostMatrix[x][y] = 1.0001;
                }
            }
        }
        endTime = ::GetTickCount();
        printf("[Boost Loop] Elapsed time: %6.3f seconds\n", (endTime - startTime) / 1000.0);
    }
    //------------------Measure blitz Loop-------------------------------------------
    {
        blitz::Array<double, 2> blitzArray( X_SIZE, Y_SIZE );
        startTime = ::GetTickCount();
        for (int i = 0; i < ITERATIONS; ++i)
        {
            for (int x = 0; x < X_SIZE; ++x)
            {
                for (int y = 0; y < Y_SIZE; ++y)
                {
                    blitzArray(x,y) = 1.0001;
                }
            }
        }
        endTime = ::GetTickCount();
        printf("[Blitz Loop] Elapsed time: %6.3f seconds\n", (endTime - startTime) / 1000.0);
    }

    //------------------Measure armadillo loop----------------------------------------
    {
        arma::mat matArray( X_SIZE, Y_SIZE );
        startTime = ::GetTickCount();
        for (int i = 0; i < ITERATIONS; ++i)
        {
            for (int y = 0; y < Y_SIZE; ++y)
            {
                for (int x = 0; x < X_SIZE; ++x)
                {
                    matArray(x,y) = 1.0001;
                }
            }
        }
        endTime = ::GetTickCount();
        printf("[arma  Loop]  Elapsed time: %6.3f seconds\n", (endTime - startTime) / 1000.0);
    }

    //------------------Measure native loop----------------------------------------
    // Create the native array
    {
        double *nativeMatrix = new double [X_SIZE * Y_SIZE];
        startTime = ::GetTickCount();
        for (int i = 0; i < ITERATIONS; ++i)
        {
            for (int y = 0; y < Y_SIZE*X_SIZE; ++y)
            {
                nativeMatrix[y] = 1.0001;
            }
        }
        endTime = ::GetTickCount();
        printf("[Native Loop]Elapsed time: %6.3f seconds\n", (endTime - startTime) / 1000.0);
        delete[] nativeMatrix;
    }

    //------------------Measure boost computation-----------------------------------
    {
        typedef boost::multi_array<double, 2> ImageArrayType;
        ImageArrayType boostMatrix(boost::extents[X_SIZE][Y_SIZE]);
        for (int x = 0; x < X_SIZE; ++x)
        {
            for (int y = 0; y < Y_SIZE; ++y)
            {
                boostMatrix[x][y] = 1.0001;
            }
        }
        startTime = ::GetTickCount();
        for (int i = 0; i < ITERATIONS; ++i)
        {
            for (int x = 0; x < X_SIZE; ++x)
            {
                for (int y = 0; y < Y_SIZE; ++y)
                {
                    boostMatrix[x][y] += boostMatrix[x][y] * 0.5;
                }
            }
        }
        endTime = ::GetTickCount();
        printf("[Boost computation] Elapsed time: %6.3f seconds\n", (endTime - startTime) / 1000.0);
    }

    //------------------Measure blitz computation-----------------------------------
    {
        blitz::Array<double, 2> blitzArray( X_SIZE, Y_SIZE );
        blitzArray = 1.0001;
        startTime = ::GetTickCount();
        for (int i = 0; i < ITERATIONS; ++i)
        {
            blitzArray += blitzArray*0.5;
        }
        endTime = ::GetTickCount();
        printf("[Blitz computation] Elapsed time: %6.3f seconds\n", (endTime - startTime) / 1000.0);
    }

    //------------------Measure armadillo computation-------------------------------
    {
        arma::mat matArray( X_SIZE, Y_SIZE );
        matArray.fill(1.0001);
        startTime = ::GetTickCount();
        for (int i = 0; i < ITERATIONS; ++i)
        {
            //matArray.fill(1.0001);
            matArray += matArray*0.5;
        }
        endTime = ::GetTickCount();
        printf("[arma  computation] Elapsed time: %6.3f seconds\n", (endTime - startTime) / 1000.0);
    }

    //------------------Measure native computation------------------------------------------
    // Create the native array
    {
        double *nativeMatrix = new double [X_SIZE * Y_SIZE];
        for (int y = 0; y < Y_SIZE*X_SIZE; ++y)
        {
            nativeMatrix[y] = 1.0001;
        }
        startTime = ::GetTickCount();
        for (int i = 0; i < ITERATIONS; ++i)
        {
            for (int y = 0; y < Y_SIZE*X_SIZE; ++y)
            {
                nativeMatrix[y] += nativeMatrix[y] * 0.5;
            }
        }
        endTime = ::GetTickCount();
        printf("[Native computation]Elapsed time: %6.3f seconds\n", (endTime - startTime) / 1000.0);
        delete[] nativeMatrix;
    }

    return 0;
} 
```

在windows，VS2010上，结果是

```
[Boost Loop] Elapsed time:  1.217 seconds
[Blitz Loop] Elapsed time:  0.046 seconds
[arma  Loop]  Elapsed time:  0.078 seconds
[Native Loop]Elapsed time:  0.172 seconds
[Boost computation] Elapsed time:  2.152 seconds
[Blitz computation] Elapsed time:  0.156 seconds
[arma  computation] Elapsed time:  0.078 seconds
[Native computation]Elapsed time:  0.078 seconds 
```

在windows，intel c++上，结果是

```
[Boost Loop] Elapsed time:  0.468 seconds
[Blitz Loop] Elapsed time:  0.125 seconds
[arma  Loop]  Elapsed time:  0.046 seconds
[Native Loop]Elapsed time:  0.047 seconds
[Boost computation] Elapsed time:  0.796 seconds
[Blitz computation] Elapsed time:  0.109 seconds
[arma  computation] Elapsed time:  0.078 seconds
[Native computation]Elapsed time:  0.062 seconds 
```

奇怪的东西：

```
(1) with VS2010, native computation (including loop) is faster than native loop
(2) blitz loop behave so different under VS2010 and intel C++. 
```

要使用 intel c++ 编译器编译 blitz++，blitz/intel/ 文件夹中需要一个名为 bzconfig.h 的文件。但是没有。我只是复制 blitz/ms/bzconfig.h 中的那个。这可能会给出非最佳配置。任何人都可以告诉我如何使用 intel c++ 编译器编译 blitz++？在手册中，它说运行 bzconfig 脚本以获取正确的 bzconfig.h。但我不明白这是什么意思。

非常感谢！

补充一些我的结论：

```
1\. Boost multi array is the slowest.
2\. With intel c++ compiler, native pointers are very fast.
3\. With intel c++ compiler,  armadillo can achieve the performance of native pointers.
4\. Also test eigen, it is x0% slower than armadillo in my simple cases.
5\. Curious about blitz++'s behavior in intel c++ compiler with proper configuration.
   Please see my question. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-22T12:23:52.667

简短回答：`./configure CXX=icpc`，通过阅读 Blitz++ 用户指南找到。

长答案：

> 要使用 intel c++ 编译器编译 blitz++，blitz/intel/ 文件夹中需要一个名为 bzconfig.h 的文件。但是没有。

是的，是的。Blitz++ 应该自己生成文件。根据“安装”部分`blitz.pdf`中包含的 Blitz++ 用户指南，`blitz-0.10.tar.gz`

> Blitz++ 使用 GNU Autoconf，它为各种平台和编译器处理重写 Makefile。

更准确地说，Blitz++ 使用 GNU autotools 工具链（automake、autoconf、configure），可以生成makefile、配置脚本、头文件等等。这些`bzconfig.h`文件应该由`configure`Blitz++ 附带的脚本生成，可以立即使用。

> 我只是复制 blitz/ms/bzconfig.h 中的那个。这可能会给出非最佳配置。

如果“非最佳”对您来说意味着“不工作”，那么是的。:-) 你需要一个`intel/bzconfig.h`准确地代表你的编译器的。

> 任何人都可以告诉我如何使用 intel c++ 编译器编译 blitz++？

阅读并遵循精美的手册，特别是上面提到的“安装”部分。

> 进入“blitz-VERSION”目录，然后输入： `./configure CXX=[compiler]` 其中 [compiler] 是 xlc++、icpc、pathCC、xlC、cxx、aCC、CC、g++、KCC、pgCC 或 FCC 之一。（如果您不选择 C++ 编译器，configure 脚本将尝试为当前平台找到合适的编译器。）

你做过吗？对于 Intel 编译器，您需要使用 `./configure CXX=icpc`.

> 在手册中，它说运行 bzconfig 脚本以获取正确的 bzconfig.h。但我不明白这是什么意思。

我假设“它”是指“那个”。“手动”是什么意思？我的 Blitz++ 用户指南副本没有提到`bzconfig`. 您确定您使用的是与您的 Blitz++ 版本相对应的手册吗？

[PS：在blitz-0.10](http://sourceforge.net/projects/blitz/)的内容中寻找“bzconfig” ，看起来“bzconfig”不再是 Blitz++ 的一部分，而是曾经是：

`find . -name bzconfig`-> 没有结果

`find . -print0 | xargs -0 grep -a -i -n -e bzconfig`：

```
./blitz/compiler.h:44:    #error  In <blitz/config.h>: A working template implementation is required by Blitz++ (you may need to rerun the compiler/bzconfig script) 
```

那需要更新。

```
./blitz/gnu/bzconfig.h:4:/* blitz/gnu/bzconfig.h. Generated automatically at end of configure. */
./configure.ac:159:# autoconf replacement of bzconfig 
```

有了它，这些`bzconfig.h`文件应该由`configure`.

```
./ChangeLog.1:1787: will now replace the old file that was generate with the bzconfig 
```

这可能是切换到 autoconf 的变化。

```
./INSTALL:107:  2\. Go into the compiler subdirectory and run the bzconfig 
```

那需要更新。这就是让你寻找的原因`bzconfig`吗？

```
./README:27:compiler      Compiler tests (used with obsolete bzconfig script) 
```

需要更新，`compiler`不再包含目录。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-22T21:45:12.200

据我所知，您是通过测量单个矩阵乘以标量的速度来判断每个矩阵库的性能。由于其基于模板的策略，Armadillo 将通过将每个乘法分解为大多数编译器的可并行代码来做得非常好。

但我建议您需要重新考虑您的测试范围和方法。例如，您省略了每个[BLAS](https://en.wikipedia.org/wiki/Basic_Linear_Algebra_Subprograms)实现。您需要的 BLAS 函数是[dscal](http://www.mathkeisan.com/usersguide/man/dscal.html)。供应商为您的特定 CPU 提供的实现可能会做得很好。

更相关的是，任何合理的向量库都需要能够做更多的事情：矩阵乘法、点积、向量长度、转置等等，您的测试没有解决这些问题。您的测试正好解决了两件事：元素分配，实际上从不是向量库的瓶颈，以及标量/向量乘法，这是每个 CPU 制造商提供的 BLAS 1 级函数。

这里讨论了 BLAS 级别 1 与编译器发出的[代码](https://scicomp.stackexchange.com/questions/1932/are-daxpy-dcopy-dscal-overkills)。

tl：博士；[将 Armadillo 与为您的平台链接的 BLAS 和 LAPACK 本机库一起使用](http://arma.sourceforge.net/faq.html#blas_lapack_replacements)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-08T09:51:25.997

我的测试表明 boost 数组与原生/硬编码 C++ 代码具有相同的性能。

您需要使用激活的编译器优化来比较它们。也就是说： `-O3` `-DNDEBUG` `-DBOOST_UBLAS_NDEBUG` `-DBOOST_DISABLE_ASSERTS` `-DARMA_NO_DEBUG` ...当我测试 (em++) 时，当您停用它的断言、使用 启用 3 级优化等时，Boost 的执行速度至少快了 10 倍`-O3`。任何公平的比较都应该使用这些标志。

# ruby-on-rails - Rails 与同一模型的多个 Has_one 关系

> ID：14414910
> 
> 赞同：5
> 
> 时间：2013-01-19T13:36:52.053
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, has-one, rails-activerecord

我正在开发 Rails 应用程序，目前我有 2 个模型 - 主题和课程。一个主题有 3 种不同类型的课程 - 讲座、教程和实验室。我建模使得课程模型有 3 个 has_one。

现在，我正在尝试为主题和课程创建一个嵌套表单，但要保存的讲座、教程和实验室始终是第一个呈现的表单。即我有 3 个分别用于 Lecture、Tutorial 和 Laboratory 的嵌套表单，但保存的 Lecture、Tutorial 和 Laboratory 始终是第一个构建的。在我的代码中，首先构建了讲座，因此教程和实验室的属性将遵循我为讲座填写的属性。

我不确定我哪里出错了，或者即使在这种情况下有多个 has_one 关系有效，所以任何建议都将不胜感激。

相关代码如下：

主体模型

```
class Subject < ActiveRecord::Base

  has_one :lecture, :class_name => "Lesson"
  has_one :laboratory,:class_name => "Lesson"
  has_one :tutorial, :class_name => "Lesson"

  accepts_nested_attributes_for :lecture
  accepts_nested_attributes_for :laboratory
  accepts_nested_attributes_for :tutorial 

end 
```

上课模式

```
class Lesson < ActiveRecord::Base
  belongs_to :subject
end 
```

主题和课程嵌套形式

```
<%= form_for(@subject_list) do |f| %>
  <div class="field">
    <%= f.label :subject_code %><br />
    <%= f.text_field :subject_code %>
  </div>
  <div>
    <%= f.fields_for :lecture do |lecture| %>
      <%= render "lecture_fields", :f => lecture %>
    <% end %>
  </div>
  <div>
    <%= f.fields_for :tutorial do |tutorial| %>
      <%= render "tutorial_fields", :f => tutorial %>
    <% end %>
  </div>
  <div>
    <%= f.fields_for :laboratory do |laboratory| %>
      <%= render "laboratory_fields", :f => laboratory %>
    <% end %>
  </div>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

主题控制器中的新操作

```
 def new
    @subject = Subject.new

    lecture = @subject.build_lecture
    laboratory = @subject.build_laboratory
    tutorial = @subject.build_tutorial

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @subject }
    end
  end 
```

如果有人可以帮助我确定我哪里出错了，我将不胜感激。如果在我不应该创建这样的多重关系的情况下，我想就如何实际渲染 3 个带有指示课程类型的默认字段的表单提供一些建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T15:38:00.193

我不确定这是否有效，但我的建议是使用 AR 继承

```
class Lesson < ActiveRecord::Base
end

class LectureLesson < Lesson
  belongs_to :subject
end

class LaboratyLesson < Lesson
  belongs_to :subject
end

class TutorialLesson < Lesson
  belongs_to :subject
end

class Subject
  has_one :lecture_lesson
  has_one :laboratory_lesson
  has_one :tutorial_lesson

  accepts_nested_attributes_for :lecture_lesson
  accepts_nested_attributes_for :laboratory_lesson
  accepts_nested_attributes_for :tutorial_lesson
end 
```

移民

```
class LessonsAndSubjects < ActiveRecord::Migration
  def up
    remove_column :subjects, :lesson_id

    add_column :subjects, :lecture_lesson_id, :integer
    add_column :subjects, :laboratory_lesson_id, :integer
    add_column :subjects, :tutorial_lesson_id, :integer

    add_column :lessons, :type, :string

    add_index :subjects, :lecture_lesson_id
    add_index :subjects, :laboratory_lesson_id
    add_index :subjects, :tutorial_lesson_id
  end

  def down
    remove_column :subjects, :lecture_lesson_id
    remove_column :subjects, :laboratory_lesson_id
    remove_column :subjects, :tutorial_lesson_id

    remove_column :lessons, :type

    add_column :subjects, :lesson_id, :integer
  end
end 
```

它更有意义，它可能会解决嵌套属性的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-06T21:23:40.703

实际上，从 rorra 的答案来看，缺少一点，您需要为每个“孩子”添加一个多态关联，以免引发查询问题

```
class Lesson < ActiveRecord::Base
  belongs_to :subject
end

class LectureLesson < Lesson
  belongs_to :polymorphic_lecture_lesson, polymorphic: true
end

class Subject
  has_one :lesson
  has_one :lecture_lesson, as: :polymorphic_lecture_lesson

  accepts_nested_attributes_for :lesson
  accepts_nested_attributes_for :lecture_lesson
end 
```

在迁移中，您必须添加

```
add_column :lessons, :polymorphic_lecture_lesson_id, :integer, index: true
add_column :lessons, :polymorphic_lecture_lesson_type, :integer, index: true 
```

# c# - 在 razor 中编写额外的 HTML 注释

> ID：14414915
> 
> 赞同：0
> 
> 时间：2013-01-19T13:37:33.320
> 
> 标签：c#, asp.net, html, asp.net-mvc, razor

我正在努力解决以下问题，但找不到可接受的解决方法。

我的挑战：在 Razor 视图中的实际属性值之前写出 HTML 注释。

这是我的（简化的）视图模型：

```
public class Article
{
    public string Title {get;set;}
} 
```

要写出这个标题，我只需在我的 Razor 视图中执行此操作：

```
<h2>@Model.Title</h2> 
```

现在我想在实际标题之前写一个 html 注释，所以生成的 HTML 看起来像这样（简化）：

```
<h2><!-- some parameters for a 3th party system --> This is my title</h2> 
```

HTML 注释来自我应用于“标题”属性的属性。它的值是生成的，因此属性值是在运行时使用 .NET 框架中的 TypeDescriptor 添加的。

现在我知道我可以通过简单地使用 HTML 帮助程序写出我的所有属性来实现这一点。像这样：@MyHelper.Write(m => m.Title)

但是由于可能我的所有属性都需要这个 HTML 注释，所以我想避免使用 HTML 帮助程序，因为它会使视图变得混乱并且不会使视图看起来更好并且（更多）可读。

这是我尝试过的：

*   创建了一个自定义 Razor 基本页面（继承自`WebViewPage<TModel>`）。并覆盖它的“写”方法。

这种工作，但这里最大的问题是我不知道当时写出了哪个属性。无法在“Write”方法中获取当前属性名称。因此，现在我动态搜索我的模型以查找具有已写出值的属性，并在属性中添加 HTML 注释。

我的问题：是否有另一种方法来完成我想要的。如前所述：我想避免使用 HTML 助手来写出我的所有属性。（想想循环等。这不是很好）。

此外，在我的控制器中添加此 HTML 注释不是选项，因为：

1.  它不是实际价值的一部分。是一种元数据。
2.  HTML 注释应添加到`int`'s、double's 和`DateTime`'s。无法调整 double 属性以包含字符串。（图片 a `List<DateTime>`。所有日期都需要此 HTML 注释）
3.  应根据 web.config 设置添加 HTML 注释。是或否。（每个属性值的实际 HTML 注释都不同）

我意识到这个问题相当长。对此感到抱歉。任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T13:41:40.447

您可以使用现有的`@Html.Raw(Model.Title)`

或者，您可以使用显示模板。将 UIHintAttribute 添加到您希望以这种方式运行的属性。

```
public class MyModel 
{
    [UIHint("Raw")]
    public string MyString { get; set; }
} 
```

创建一个名为的新显示模板`Raw.cshtml`，该模板接受字符串类型的模型：

```
@model string
@Html.Raw(model) 
```

然后在您看来，您可以使用：

```
@Html.DisplayFor(m => m.MyString) 
```

这仍然需要您使用助手 ( `DisplayFor`)。这是一种推荐的做法，它允许您以最少的代码更改轻松更改一个或多个字段的行为。

# php - 让ajax通过php更新数据库

> ID：14414918
> 
> 赞同：0
> 
> 时间：2013-01-19T13:37:47.070
> 
> 标签：php, mysql, ajax

我第一次使用 AJAX 向我的 mysql 数据库发送一个简单的查询，该数据库将添加一个“产品”。但是它似乎没有将请求发送到我的数据库。我有 3 个文件 addProduct.php 是表单的基础，test.js 是请求的 javascript/ajax，我的 addProductTodatabase 是查询的位置。

（以防万一我搞砸了文件结构）

*   addProduct.php 位于 F:\xampp\htdocs\cw test.js 位于
*   test.js 位于 F:\xampp\htdocs\cw\javaScript
*   addProductTodatabase.php 位于 F:\xampp\htdocs\cw\mysql

表单使用此代码..

```
<form name ="myForm" class = "hidden" id = "addProduct">
            <h2 class = "under"> Next step: </h2>
            <h4> Fill in the following information </h4>
            <label class = "under" > Product Name <input type="text" name="ProductName" id = "productName"> </label>
            <label class = "under" > Product category <input type="text" name="ProductCategory" id = "productCat"> </label>
            <label class = "under" > Suitable age plus  <input type="text" name="ProductAge" id = "productAge"> </label>
            <label class = "under" >Add a Product discrition </label>
            <textarea  id = "productArea" name ="ProductDis" rows="15" cols="100"></textArea>
            <label class = "under" > Product Price <input type="text" name="ProductPrice" id = "productPrice"> </label>
            <label class = "under" > Number available  <input type="text" name="ProductInStock" id = "productAvailable"> </label>
            <label class = "under" > Image location <input type ="file" name= "ImageLocation" id= "imageLocation"> </label>         
            <input type ="button" onclick = "queryTest()" value = "Submit to database">
            </form> 

            <div id = "loading">this should update </div> 
```

test.js 使用此代码..

```
function queryTest()
{

var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
     document.getElementById('loading').innerHTML = "Please wait..."; 
    //document.getElementById("loading").innerHTML=xmlhttp.responseText;
    }
  }
  //document.getElementById('loading').innerHTML = "Please wait..."; 
  // gets the variables and passes it onto the php page in the url bar
  var productName = document.getElementById('productName').value;
  var productCat = document.getElementById('productCat').value;
  var productAge = document.getElementById('productAge').value;
  var productDis = document.getElementById('productArea').value;
  var productPrice = document.getElementById('productPrice').value;
  var productStock = document.getElementById('productAvailable').value;
  var productImage = document.getElementById('imageLocation').value;
  var queryString = "?ProductName=" + productName + "&ProductCategory=" +  productCat;
  queryString += "&ProductAge=" + productAge + "&ProductDis=" + productDis;
  queryString += "&ProductPrice=" + productPrice + "&ProductInStock=" + productStock;
  queryString += "&ImageLocation=" + productImage;

xmlhttp.open("GET","../mysql/addProductTodatabase.php" + queryString,true);
xmlhttp.send(null);

} 
```

和 addProductToDatabase 使用这个...

```
<?php

    include "databaseLogIn.php";

//get variables from page before  
    $ProductName = $_GET["ProductName"];  
    $ProductCategory = $_GET["ProductCategory"]; 
    $ProductAge = $_GET["ProductAge"];
    $ProductDis = mysql_real_escape_string($_GET["ProductDis"]); 
    $ProductPrice = $_GET["ProductPrice"];
    $ProductInStock = $_GET["ProductInStock"];
    include "/imageHander/imagePointerDownloader.php";

//adds to table
    $sql ="INSERT INTO Product ( ProductName, ProductCategory, SuitableAge, ProductDiscription, ProductPrice, ProductAvailable) 
    VALUES ('$ProductName','$ProductCategory','$ProductAge','$ProductDis','$ProductPrice','$ProductInStock')"; 
    mysql_query($sql,$con);

// gets the product id
    $query="SELECT * FROM Product"; 
    $result=mysql_query($query);
    $ItemID=mysql_numrows($result);

    $PictureCaption = "this is a picture";
// adds picture caption
//adds a image to the table related to the product  
    $sql="INSERT INTO ProductPictures (ItemID, PictureCaption, ImagePointer)
        VALUES ('$ItemID', '$PictureCaption', '$newFile')";
//echo $sql;

    mysql_query($sql,$con)

    mysql_close($con)
  ?> 
```

欢迎任何帮助，感谢您的阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T15:21:42.173

试试这个***addProductTodatabase.php***：

```
<?php

include "databaseLogIn.php";

//get variables from page before  
    $ProductName = mysql_real_escape_string($_GET["ProductName"],$con);  
    $ProductCategory = mysql_real_escape_string($_GET["ProductCategory"],$con); 
    $ProductAge = mysql_real_escape_string($_GET["ProductAge"],$con); 
    $ProductDis = mysql_real_escape_string($_GET["ProductDis"],$con); 
    $ProductPrice = mysql_real_escape_string($_GET["ProductPrice"],$con); 
    $ProductInStock = mysql_real_escape_string($_GET["ProductInStock"],$con); 

// Check if this is the right path - who knows?
    include "./imageHander/imagePointerDownloader.php";

//adds to table
    $sql ="INSERT INTO Product ( ProductName, ProductCategory, SuitableAge, ProductDiscription, ProductPrice, ProductAvailable) 
    VALUES ('$ProductName','$ProductCategory','$ProductAge','$ProductDis','$ProductPrice','$ProductInStock')"; 
    mysql_query($sql,$con);

// gets the product id
    $query="SELECT * FROM Product"; 
    $result=mysql_query($query);
    $ItemID=mysql_numrows($result);

// adds picture caption    
    $PictureCaption = "this is a picture";

//adds a image to the table related to the product  
    $sql="INSERT INTO ProductPictures (ItemID, PictureCaption, ImagePointer)
        VALUES ('$ItemID', '$PictureCaption', '$newFile')";

//echo $sql;

// ---
// You were missing a semicolon here.
// ---
    mysql_query($sql,$con);

// ---    
// You were missing a semicolon also here.    
// ---
    mysql_close($con);

?> 
```

而且您的***test.js***的 addProductTodatabase.php 网址*错误*。它应该是：

```
xmlhttp.open("GET","./mysql/addProductTodatabase.php" + queryString,true); 
```

该路径**相对于包含脚本的 html/php 文件**。

加上 j0k 说的是对的。你***应该***使用 MySQLi。MySQL 已弃用。

# r - 两个数据帧的合并导致R中的多个数据帧

> ID：14414922
> 
> 赞同：-4
> 
> 时间：2013-01-19T13:38:05.083
> 
> 标签：r, merge, dataframe, apply

我试图从它们的 data.frame 结构中剥离两个数据帧，提取每个 data.frame 中的元素，并将从数据帧中提取的数据合并到一个 data.frame 中。这应该会产生一个由两列作为向量组成的 data.frame。请参阅下面的输出（以粗体标记）。

**问题**：输出包含多个 data.frame 元素，而不是包含来自输​​入数据帧的向量的单个 data.frame。

每个数据框包含一个向量。

[编辑^v回应评论。]

到目前为止，我尝试了各种组合`as()`但`unlist()`无济于事......

我正在尝试使用内置的 R 函数和矢量化来解决这个问题（不使用`plyr`and `loops`：使用[循环将多个 data.frames 合并到一个 data.frame 中](https://stackoverflow.com/questions/2209258/merge-several-data-frames-into-one-data-frame-with-a-loop/2209371)，[从 csv 文件中合并许多数据帧](https://stackoverflow.com/questions/1562124/merge-many-data-frames-from-csv-files)，[将 Data.frames 列表重新组合到单个数据框](https://stackoverflow.com/questions/2392915/recombining-a-list-of-data-frames-into-a-single-data-frame)）

**可重现的代码**：我无法复制*错误*，但这是我希望我的代码能够工作的方式：

```
df1<-data.frame<-c(1, 2, 3)
df2<-data.frame<-c(2, 4, 6)

output<-cbind(df1, df2)
print(output)       #Returns a data.frame
str(output)         #                     of vectors
                    #In my case however, a data.frame returns data.frames) 
```

这将返回：

```
 df1 df2
[1,]   1   2
[2,]   2   4
[3,]   3   6 
```

**现实**：

```
readmultiple <- function(directory = "bigdata") {

    ....

    ....
    ....
        output <- cbind.data.frame(filename, readmultiplesum) 
        # This is probably where things go wrong
        return(output)
    }
    output <- lapply(filenames, complete.cases.sum)
    assign("Global.output", output, envir = .GlobalEnv) 
    # There is probably a better way to do this too

    if (firstoutput == 1) {
        Global.output <- merge(as(unlist(Global.output[1]), "vector"), 
                           as(unlist(output[1])), "vector") 
    # as, unlist... Not sure what's needed here
    } else {
        firstoutput <- 1
    }
    str(output)
    return(Global.output)
} 
```

输出**看起来**像

```
[[1]]
   filename result 
          1         142 

[[2]]
   filename result
          1        521

[[3]]
   filename result
          1         324 
```

但我希望它是

```
filename        result 

[1,]   filename[i]  142 

[2,]   filename[i]  521

[3,]   filename[i]  324 
```

...其中 filename[i] 是文件名的索引。

str(输出) 返回

```
List of 2400
 $ :'data.frame':       1 obs. of  2 variables:
  ..$ filename   : Factor w/ 1 level "bigdata/001.csv": 1
  ..$ sumrows: num 142
 $ :'data.frame':       1 obs. of  2 variables:
  ..$ filename   : Factor w/ 1 level "bigdata/001.csv": 1
  ..$ sumrows: num 521
 $ :'data.frame':       1 obs. of  2 variables:
  ..$ filename   : Factor w/ 1 level "bigdata/001.csv": 1
  ..$ sumrows: num 324
 $ :'data.frame':       1 obs. of  2 variables:
  ..$ filename   : Factor w/ 1 level "bigdata/001.csv": 1

..... 
```

dput(head(output)) 返回

```
 list(structure(list(filename = structure(1L, .Label = "bigdata/001.csv", class = "factor"), 
    sumrows = 142), .Names = c("filename", "sumrows"), row.names = c(NA, 
-1L), class = "data.frame"), structure(list(filename = structure(1L, .Label = "bigdata/001.csv", class = "factor"), 
    sumrows = 521), .Names = c("filename", "sumrows"
), row.names = c(NA, -1L), class = "data.frame"), structure(list(
    filename = structure(1L, .Label = "bigdata/001.csv", class = "factor"), 
    sumrows = 324), .Names = c("filename", "sumrows"), row.names = c(NA, 
-1L), class = "data.frame"), structure(list(filename = structure(1L, .Label = "bigdata/001.csv", class = "factor"), 
    sumrows = 1896), .Names = c("filename", "sumrows"
), row.names = c(NA, -1L), class = "data.frame"), structure(list(
    filename = structure(1L, .Label = "bigdata/001.csv", class = "factor"), 
    sumrows = 1608), .Names = c("filename", "sumrows"
), row.names = c(NA, -1L), class = "data.frame"), structure(list(
    filename = structure(1L, .Label = "bigdata/001.csv", class = "factor"), 
    sumrows = 912), .Names = c("filename", "sumrows"), row.names = c(NA, 
-1L), class = "data.frame")) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T15:16:32.627

将列表更改为 data.frame 的一般技术是使用`do.call`

```
ll <- list(c(filename=1 ,result=142 ),c(filename=2 ,result=521 ))
> do.call(rbind,ll)
     filename result
[1,]        1    142
[2,]        2    521 
```

当我将此应用于您的列表时，我得到：

```
do.call(rbind,ll)
         filename sumrows
1 bigdata/001.csv     142
2 bigdata/001.csv     521
3 bigdata/001.csv     324
4 bigdata/001.csv    1896
5 bigdata/001.csv    1608
6 bigdata/001.csv     912 
```

不幸的是，你不精确什么是文件名[i]？

**编辑**

该解决方案似乎适用于 OP：

```
library(plyr)
ldply(ll) 
```

一般来说，您可以使用：

```
ldply(ll,function(x){
           ##you process the row x here
  }
 ) 
```

# php - 通过单击现有图像上传图像

> ID：14414924
> 
> 赞同：1
> 
> 时间：2013-01-19T13:38:37.313
> 
> 标签：php, javascript, html

我有一个简单的个人资料页面，其中包含图像和一些信息。此个人资料页面填满了注册期间提供的信息。

我想要的是允许注册用户在他们的个人资料页面上点击他们的上传图片，并能够用新的图片替换。

我知道如何从数据库端处理这个问题。

我需要 html 或前端方面的帮助。从某种意义上说，我如何使图像可点击以打开上传图像窗口。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-19T13:54:46.307

我认为最简单的解决方案是将实际的文件上传元素放置在页面的偏移量中，然后在用户点击个人资料图像时“向前触发”点击它。

HTML：

```
<input id="profile-image-upload" class="hidden" type="file">
<div id="profile-image">click here to change profile image</div> 
```

JS：

```
$('#profile-image').on('click', function() {
    $('#profile-image-upload').click();
}); 
```

见我的小提琴：http: [//jsfiddle.net/L8xCb/3/](http://jsfiddle.net/L8xCb/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T13:45:08.137

你已经尝试了什么？一种可能的解决方案可能是这样的：

**jQuery：**

```
$('.current_image').click(function() {
   $('.new_image_box').toggle();
}); 
```

**HTML：**

```
<img src="/path/to/avatar.png" class="current_image" />

<div class="new_image_box">
   <input type="file" name="new_avatar"/>
</div> 
```

* * *

如果您想避免使用 JavaScript 并使用 HTML，以便单击现有页面的用户被重定向到新页面，请使用：

```
<a href="/upload-form">
   <img src="/path/to/avatar.png" />
</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T14:00:10.380

html 不允许皮肤文件输入，因此您不能使用图像作为输入。

但是有一些解决方法。我知道的2种方法：

第一个，您输入一个隐藏文件，并在单击图像时触发它。

```
<img src="avatar.jpg" width="50" height="50" alt="" class="myAvatar" />
<input type="file" name="newAvatar" id="newAvatar" style="display:none;" />
<script>
$(".myAvatar").click(function() {
    $("#newAvatar").trigger("click");
});
</script> 
```

第二种方法是，将输入放在图像前面，并将其不透明度设置为 0，

```
<div style="position: relative;">
    <img src="avatar.jpg" width="50" height="50" alt="" class="myAvatar" style="position:absolute; top:0; left:0; z-index:1;" />
    <input type="file" name="newAvatar" id="newAvatar" style="width:50px; height:50px; position:absolute; top:0px; left:0; z-index:2; opacity:0;" />
</div> 
```

注意：虽然有一些缺点，第一种方法在 Internet Explorer 上存在一些问题，如果使用第二种方法，则不能为头像使用鼠标悬停事件。

# android - Android：是否可以更新 MatrixCursor 行（作为旋转时视图重置的解决方案）

> ID：14414925
> 
> 赞同：0
> 
> 时间：2013-01-19T13:39:11.013
> 
> 标签：android, orientation, matrixcursor

我在使用基于 MatrixCursor 重置键盘最小化和方向更改值的 ListView 时遇到问题。

矩阵游标填充了来自 SQL 数据库的数据。这样做是因为我希望原始数据库列是列表视图中的行：

```
public void fillList(boolean rewrite, int rewrite pos, int) {
    myCols = getColArray();    
    SQLiteDatabase myDB = SQLiteDatabase.openDatabase(DB_PATH + DB_NAME, null, SQLiteDatabase.OPEN_READONLY); 
    myCursor = myDB.query("Scoring", statCols, null, null, null, null, null);

    String[] menuCols = new String[] { "_id","Item","Value"};
    int []to = new int[]{R.id.listitem, R.id.listitem_value}; 

    mc = new MatrixCursor(menuCols);

    for (int i = 0; i < (mChoices.size()); i++) {
        statCursor.moveToPosition(draftId);
        String item = mChoices.get(i);          

        String valueString = "";
        int valueCol = statCursor.getColumnIndex(item);
        int value = statCursor.getInt(valueCol);                      
        valueString = (String.valueOf(value));

        mc.addRow(new Object[] {
            i,
            item,
            valueString                                         
        });
    } 
```

这个 fillList() 方法在我的 onCreate 中被调用。然后通过扩展 SimpleCursorAdapter 使用此光标填充 ListView。我对片段的目标是允许用户单击其中一个列表项，从而导致出现带有 EditText 行的 Dialog：

```
@Override
public void onListItemClick(ListView l, final View v, int position, long id) {

    final TextView valueL = (TextView) v.findViewById(R.id.listitem_value);
    String valueString = (String) valueL.getText();
    int value = 100;
    try {
        value = Integer.parseInt(valueString);
    } catch(NumberFormatException nfe) {
    }

    //Create dialog layout
    View view = getActivity().getLayoutInflater().inflate(R.layout.numberpick_popup, null);
    final EditText mInputText = (EditText) view.findViewById(R.id.myText);

    //Create Dialog
    AlertDialog.Builder builder =  new AlertDialog.Builder(this.getActivity());
    builder.setTitle(title);

    builder.setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            valueL.setText(mInputText.getText().toString());
            return;
        }
    });

    builder.setNegativeButton(android.R.string.cancel, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            return;
        }
    });

    builder.setView (view);
    final AlertDialog dialog = builder.create ();
    dialog.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE);
    dialog.show();
} 
```

我遇到的问题是当片段布局在键盘隐藏或方向更改时重新生成时，导致调用 fillData 并覆盖我在列表中更新的任何值。如果我在没有首先最小化键盘或任何方向更改的情况下在对话框中选择“确定”，就会发生这种情况。

我的想法是，当从对话框输入新数据时，应该有某种方法来覆盖 MatrixCursor 中的值。但是我不知道这是否可能，或者光标是否会在状态更改后幸存下来。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T16:02:41.840

我通过在我的列表适配器中创建键值对的 HashMap 并在那里添加更改的值来解决这个问题。因此，在 bindView() 中，我将检查是否存在正在初始化的行的键，如果存在，则使用这些值而不是游标中的值。

我只是做了

```
HashMap<Long,String> 
```

因为我只需要一个可以更改的值，但您可以轻松创建自定义类并制作您的

```
HashMap<Long,CustomClass> 
```

所以你可以改变很多值。

因此，当最初更改值时，只需记住用新值更新该 HashMap，以便重绘 List 时会显示正确的值。这很有效，因为从本质上讲，单独的 MatrixCursor 通常非常小。这在一个非常大的列表上并不明智，因为 HashMap 会失控并占用太多内存。如果您有任何问题，请告诉我。

# android - Android Eclipse 错误 - 不幸的是 已经停止

> ID：14414929
> 
> 赞同：1
> 
> 时间：2013-01-19T13:40:01.573
> 
> 标签：android

我是新来的和安卓的。我查看了类似的主题，但仍然没有找到解决方案。

这是我的 xml 代码。我想要做的是，在单击提交按钮时，没有单击复选框，然后产生错误或成功消息。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:clickable="true"
tools:context=".MainActivity" >

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:ems="10"
    android:hint="Enter Your Name" >

    <requestFocus />
  </EditText>

<CheckBox
    android:id="@+id/checkBox3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/checkBox1"
    android:layout_below="@+id/checkBox2"
    android:layout_marginLeft="15dp"
    android:text="Hello" />

<CheckBox
    android:id="@+id/checkBox4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/checkBox3"
    android:layout_below="@+id/checkBox3"
    android:text="Noon" />

<CheckBox
    android:id="@+id/checkBox2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/checkBox3"
    android:layout_below="@+id/checkBox1"
    android:text="Evening" />

<CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/radioGroup2"
    android:layout_centerVertical="true"
    android:layout_marginLeft="20dp"
    android:checked="true"
    android:text="Morning" />

<Button
    android:id="@+id/submit"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/checkBox1"
    android:layout_below="@+id/checkBox4"
    android:onClick="onClickSubmit"
    android:text="Hello" /> 
```

这是Java代码...

```
CheckBox c1=(CheckBox) findViewById(R.id.checkBox1);
Button sub=(Button) findViewById(R.id.submit);
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

sub.setOnClickListener(new View.OnClickListener() {  
    public void onClick(View v) {  

                    Toast.makeText(MainActivity.this, "Submit!", Toast.LENGTH_SHORT).show();  
            }  
}); 
```

错误日志...

```
 01-19 14:13:47.102: E/AndroidRuntime(2554): FATAL EXCEPTION: main
   01-19 14:13:47.102: E/AndroidRuntime(2554): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.finalfortoday/com.example.finalfortoday.MainActivity}: java.lang.NullPointerException
01-19 14:13:47.102: E/AndroidRuntime(2554):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
01-19 14:13:47.102: E/AndroidRuntime(2554):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-19 14:13:47.102: E/AndroidRuntime(2554):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-19 14:13:47.102: E/AndroidRuntime(2554):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-19 14:13:47.102: E/AndroidRuntime(2554):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-19 14:13:47.102: E/AndroidRuntime(2554):     at android.os.Looper.loop(Looper.java:137)
01-19 14:13:47.102: E/AndroidRuntime(2554):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-19 14:13:47.102: E/AndroidRuntime(2554):     at java.lang.reflect.Method.invokeNative(Native Method)
01-19 14:13:47.102: E/AndroidRuntime(2554):     at java.lang.reflect.Method.invoke(Method.java:511)
01-19 14:13:47.102: E/AndroidRuntime(2554):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-19 14:13:47.102: E/AndroidRuntime(2554):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-19 14:13:47.102: E/AndroidRuntime(2554):     at dalvik.system.NativeStart.main(Native Method)
01-19 14:13:47.102: E/AndroidRuntime(2554): Caused by: java.lang.NullPointerException
01-19 14:13:47.102: E/AndroidRuntime(2554):     at android.app.Activity.findViewById(Activity.java:1839)
01-19 14:13:47.102: E/AndroidRuntime(2554):     at com.example.finalfortoday.MainActivity.<init>(MainActivity.java:16)
01-19 14:13:47.102: E/AndroidRuntime(2554):     at java.lang.Class.newInstanceImpl(Native Method)
01-19 14:13:47.102: E/AndroidRuntime(2554):     at java.lang.Class.newInstance(Class.java:1319)
01-19 14:13:47.102: E/AndroidRuntime(2554):     at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
01-19 14:13:47.102: E/AndroidRuntime(2554):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
01-19 14:13:47.102: E/AndroidRuntime(2554):     ... 11 more 
```

我还没有在 Java 代码中使用过任何东西，但它仍然给我错误。

请帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T13:44:26.340

您不能在方法之外进行分配。把它放在 onCreate 里面：

```
CheckBox c1  = (CheckBox) findViewById(R.id.checkBox1);
Button sub = (Button) findViewById(R.id.submit); 
```

它写在堆栈跟踪中：`sub`当您尝试为其分配点击侦听器时为空。

此外，Glenn 是对的：`android:onClick`如果您要手动设置点击侦听器，请删除该属性。

* * *

已编辑。我以前的答案：

按钮对齐错误：

```
android:layout_below="@+id/checkBox4" 
```

`checkBox4`不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T13:48:52.397

Better to remove the `android:onClick` attribute.

```
<Button
    android:id="@+id/submit"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/checkBox1"
    android:layout_below="@+id/checkBox4"
    android:onClick="onClickSubmit"
    android:text="Hello" /> 
```

It should be

```
<Button
    android:id="@+id/submit"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/checkBox1"
    android:layout_below="@+id/checkBox4"
    android:text="Hello" /> 
```

# php - 如何在没有“重复密钥更新”的情况下使用 insertFromSelect(...)？

> ID：14414932
> 
> 赞同：5
> 
> 时间：2013-01-19T13:40:18.437
> 
> 标签：php, mysql, magento, magento-1.6

我正在修改 Createat.php，你可以[在这里查看源代码](http://php.r3dcode.com/files/Magento/1.6/1.0/app/code/core/Mage/Sales/Model/Resource/Report/Order/Createdat.php)。

快速概览：

```
$select->from(array('o' => $this->getTable('sales/order')), $columns)
  ->join(array('oi' => $selectOrderItem), 'oi.order_id = o.entity_id', array())
  ->where('o.state NOT IN (?)', array(
    Mage_Sales_Model_Order::STATE_PENDING_PAYMENT,
    Mage_Sales_Model_Order::STATE_NEW
  ));
...
$select->where('o.channel_name IS NULL');
$adapter->query($select
  ->insertFromSelect($this->getMainTable(), array_keys($columns))); 
```

所以在这一点上一切都很好。我的 sales_order_aggregated_created 表现在包含所有“网站”销售总额。

```
$select->reset('where');
$select->where('o.channel_name = ?', 'Amazon');
$adapter->query($select
  ->insertFromSelect($this->getMainTable(), array_keys($columns))); 
```

这就是我的问题所在，当我重置（'where'）并按另一个通道名称过滤并尝试将新行插入表中时，insertFromSelect（）函数正在使用“INSERT ... ON DUPLICATE KEY UPDATE”并覆盖值来自上一个查询的内部表。

是否有 $select->someFunction() 不会在重复时更新，或者我在哪里可以找到 insertFromSelect() 函数的定义？或者，也许还有另一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-19T11:09:57.617

`Varien_Db_Adapter_Interface`有一个常量`INSERT_ON_DUPLICATE`，您可以将其作为标志传递`insertFromSelect()`以禁用默认`ON DUPLICATE KEY UPDATE`行为。

```
$adapter->query(
    $adapter->insertFromSelect(
        $select,
        $this->getMainTable(),
        array_keys($columns),
        Varien_Db_Adapter_Interface::INSERT_ON_DUPLICATE
    )
); 
```

# c++ - 围绕递归函数的 lambda 包装器中的 this-pointer 捕获

> ID：14414933
> 
> 赞同：3
> 
> 时间：2013-01-19T13:40:18.807
> 
> 标签：c++, templates, c++11, lambda, this-pointer

我有一个`Wrap<T>`带有递归成员函数的类模板`test(int)`，我想将它传递给带有 lambda 的 STL 算法（`std::accumulate`在下面的代码中）。

如果我使用默认的捕获列表`=`，并创建我的递归成员函数`static`，一切都很好并得到我想要的结果。

但是，如果我将其设为非静态成员函数，Visual C++ 和 gcc 4.7.2 都会抱怨一个未初始化的`this`-pointer，除非我将递归调用限定为`this->test()`.

```
#include <algorithm>
#include <iostream>
#include <vector>

template<typename T>
struct Wrap 
{
   static int test1(int depth)
   {
      std::vector<int> v = { 0, 1, 2, 3 };
      return depth == 0? 1 : std::accumulate(v.begin(), v.end(), int(0), [=](int sub, int const&) {
         return sub + test1(depth - 1);
      });   
   }

   int test2(int depth)
   {
      std::vector<int> v = { 0, 1, 2, 3 };
      return depth == 0? 1 : std::accumulate(v.begin(), v.end(), int(0), [=](int sub, int const&) {
         return sub + /*this->*/test2(depth - 1);
      });   
   }   
};

int main()
{
   std::cout << Wrap<int>::test1(0) << "\n"; // 1
   std::cout << Wrap<int>::test1(1) << "\n"; // 4
   std::cout << Wrap<int>::test1(2) << "\n"; // 16

   Wrap<int> w;
   std::cout << w.test2(0) << "\n"; // 1
   std::cout << w.test2(1) << "\n"; // 4
   std::cout << w.test2(2) << "\n"; // 16
} 
```

[LiveWorkSpace](http://liveworkspace.org/code/dGesb%2419)上的输出：

```
source.cpp: In instantiation of 'int Wrap<T>::test2(int) [with T = int]':   
source.cpp:32:26:   required from here 
source.cpp:19:74: error: missing initializer for member 'Wrap<T>::test2(int) [with T = int]::<lambda(int, const int&)>::__this' [-Werror=missing-field-initializers] 
```

取消注释该`/*this->/*`部分，给出与静态成员函数相同的结果。

**为什么我需要用 来限定我的递归调用`this->`？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T14:23:42.297

我相信这是 GCC 4.7.2 的一个错误。警告说：

`missing initializer for member 'Wrap<T>::test2(int) [with T = int]::<lambda(int, const int&)>::__this'`

这意味着编译器识别出`this`要捕获的指针，并且生成的闭包确实包含一个指向它的指针，但是该指针没有在闭包的构造函数中初始化。

尝试访问/更改成员变量（在您的示例中不存在，但可以轻松添加）会导致运行时错误这一事实证实了这一点。例如，这显示在 liveworkspace.org 上没有输出

```
#include <algorithm>
#include <iostream>
#include <vector>

template<typename T>
struct Wrap 
{
    int test2(int depth)
    {
        m_test++;
        std::vector<int> v = { 0, 1, 2, 3 };
        return depth == 0? 1 : std::accumulate(
             v.begin(), v.end(), int(0), [=](int sub, int const&) {
             return sub + /*this->*/test2(depth - 1);
             });   
    }

    int m_test = 0;
};

int main()
{
    Wrap<int> w;
    std::cout << w.test2(2) << "\n"; // 1
} 
```

这段代码可以用 Clang 3.2 和 VS2012 很好地编译，这似乎证实了一个错误的存在。

# java - 无法通过 PHP 调用带参数的 Java 程序

> ID：14414934
> 
> 赞同：0
> 
> 时间：2013-01-19T13:40:22.427
> 
> 标签：java, php, parameters, exec

我正在尝试将 Java 项目与网站连接起来。该项目位于“website_folder/data/backend”中，当时我想测试以下示例是否有效：

[java代码]

```
public static void main(string args[]) {
   if(args[0].equals("5") {
      File f = new File("/location/to/file/result.txt");
      if(!f.exists()) {
         f.createNewFile();
         FileWriter fstream = new FileWriter("/location/to/file/result.txt");
         BufferedWriter out = new BufferedWriter(fstream);
         out.write("It works!");
         out.close();
      }
   }
} 
```

在 PHP 文件中，我必须执行以下命令：

```
<?php
exec("java -cp /data/backend/Project/build/classes/project/Main.class/ main 5",$output); 
?> 
```

但什么也没发生！我的意思是，该文件不是在我在 main 方法中指定的目录中创建的。我试图在 PHP 命令中运行项目的 .jar 文件，通过变量传递参数“5”，在 exec 命令中添加到目录路径中：“i:/xampp/htdocs/ website_folder/"（I:\ 是我安装了虚拟服务器 -xampp- 的磁盘驱动器），但徒劳无功。我在命令的语法上做错了吗？

**编辑：** 我将命令更改为指向 .jar 文件（java -jar /data/backend/Project/dist/Project.jar 5），问题就解决了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T15:13:30.057

尝试这个：

```
"java -cp /data/backend/Project/build/classes/ project.Main 5" 
```

这假设包含您的`main`方法的类在包中`project`并被调用`Main`。如果不是这种情况，请进行相应调整。

# android - 将 inputStream 复制到文件并从中读取

> ID：14414937
> 
> 赞同：0
> 
> 时间：2013-01-19T13:40:34.973
> 
> 标签：input-stream的内容复制到, file-output-stream, android, storage, inputstream, filestream

我想将实际上是位图的[input-stream的内容复制到](/questions/tagged/input-stream "显示标记为“输入流”的问题")[file-output-stream](/questions/tagged/file-output-stream "显示标记为“文件输出流”的问题")。之后，我想将文件输出流的内容传递给 BitmapFactory.decodeStream。结果是我得到了损坏的图像！我的这些东西的代码如下。

```
private void copyInStreamToFile(InputStream is) {
    byte buf[] = new byte[1024];
    int len;

    FileOutputStream fos;
    try {
        fos = context.openFileOutput(FILENAME, Context.MODE_PRIVATE);
        while ((len = is.read(buf)) > 0)
            fos.write(buf, 0, len);
        fos.close();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

private static FileInputStream getStream() throws FileNotFoundException {
    return context.openFileInput(FILENAME);
} 
```

我在下载方法中调用它

位图 downloadBitmap(String url) { final int IO_BUFFER_SIZE = 4 * 1024;

```
 // AndroidHttpClient is not allowed to be used from the main thread
    final HttpClient client = AndroidHttpClient.newInstance("Android");
    final HttpGet getRequest = new HttpGet(url);

    try {
        HttpResponse response = client.execute(getRequest);
        final int statusCode = response.getStatusLine().getStatusCode();
        if (statusCode != HttpStatus.SC_OK) {
            Log.w("ImageDownloader", "Error " + statusCode
                    + " while retrieving bitmap from " + url);
            return null;
        }

        final HttpEntity entity = response.getEntity();
        if (entity != null) {
            InputStream inputStream = null;
            try {
                inputStream = entity.getContent();
                copyInStreamToFile(new FlushedInputStream(inputStream));

                DeviceProperties device = new DeviceProperties(activity);
                return decodeBitampFromResource(device.getDeviceHeight(),
                        device.getDeviceWidth());
            } finally {
                if (inputStream != null) {
                    inputStream.close();
                }
                entity.consumeContent();
            }
        } 
```

最后一种进行解码的方法是：

```
public static Bitmap decodeBitampFromResource(int reqWidth, int reqHeight) {
    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    FileInputStream fis;
    InputStream is;
    Bitmap bitmap = null;
    // kanonika tha vriskei to megethos tis photo alla kapoio problima
    // iparxei me ton sixronismo
    try {
        fis = getStream();

        options.inJustDecodeBounds = true;

        BitmapFactory.decodeStream(fis, null, options);

        // Calculate inSampleSize
        options.inSampleSize = calculateInSampleSize(options, reqWidth,
                reqHeight);

        // Decode bitmap with inSampleSize set
        options.inJustDecodeBounds = false;
        fis.close();
        fis = getStream();

        bitmap = BitmapFactory.decodeStream(fis, null, options);
        fis.close();

    } catch (FileNotFoundException e) {
        e.printStackTrace();

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();

    }
        return bitmap;

} 
```

我必须清除文件输出流的内容吗？正如我从android开发人员那里知道的那样，openFileOutput 打开文件并覆盖它的内容，或者如果它不存在则创建它。

# cognos-tm1 - 如何提高 Cognos TM1 中报表的性能？

> ID：14414938
> 
> 赞同：0
> 
> 时间：2013-01-19T13:40:38.010
> 
> 标签：cognos-tm1

当用户在 TM1 web 中生成报告时，如何提高报告性能？这样做的各种方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T20:49:50.787

主要是通过抑制零和优化您在行/列上使用的子集。

# android - 在同一个 Layout 中启动两个动画

> ID：14414940
> 
> 赞同：7
> 
> 时间：2013-01-19T13:41:11.667
> 
> 标签：android, android-linearlayout, alpha, translate-animation

我正在尝试做一个 alpha 并在 RelativeLayout 中进行翻译。我定义了两者：

```
AlphaAnimation alpha;
alpha = new AlphaAnimation(0.0f, 1.0f);
alpha.setDuration(1500);
alpha.setFillAfter(true);

TranslateAnimation translate;
translate = new TranslateAnimation(Animation.RELATIVE_TO_SELF, 0,                                                                       
                 Animation.RELATIVE_TO_SELF, 0,
                 Animation.RELATIVE_TO_SELF, 1, 
                 Animation.RELATIVE_TO_SELF, 0);
translate.setDuration(1000); 
```

所以我在我的 RelativeLayout 中开始动画

```
RelativeLayout.startAnimation(translate);
RelativeLayout.startAnimation(alpha); 
```

问题是在这种情况下，只有 alpha 动画开始而不是翻译。有人能帮我吗？问题是如何在同一个对象中同时启动两个不同的动画（在我的例子中是相对布局）

* * *

我解决了这个问题。我添加了它：

```
AnimationSet animationSet = new AnimationSet(true);
animationSet.addAnimation(alpha);
animationSet.addAnimation(translate);

RelativeLayout.startAnimation(animationSet); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-22T13:34:21.557

如果要同时运行两个动画，可以使用动画集：

[http://developer.android.com/reference/android/view/animation/AnimationSet.html](http://developer.android.com/reference/android/view/animation/AnimationSet.html)

例如；

```
as = new AnimationSet(true);
as.setFillEnabled(true);
as.setInterpolator(new BounceInterpolator());

TranslateAnimation ta = new TranslateAnimation(-300, 100, 0, 0); 
ta.setDuration(2000);
as.addAnimation(ta);

TranslateAnimation ta2 = new TranslateAnimation(100, 0, 0, 0); 
ta2.setDuration(2000);
ta2.setStartOffset(2000); // allowing 2000 milliseconds for ta to finish
as.addAnimation(ta2); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-19T17:15:21.187

您当前的代码将不起作用，因为一旦第一个动画开始，第二个动画就会结束并自行启动。所以你需要等到它完成。

尝试这个 ：

```
translate.setAnimationListener(new AnimationListener() {

    public void onAnimationStart(Animation animation) {
        // TODO Auto-generated method stub

    }

    public void onAnimationRepeat(Animation animation) {
        // TODO Auto-generated method stub

    }

    public void onAnimationEnd(Animation animation) {
        // TODO Auto-generated method stub
        RelativeLayout.startAnimation(alpha);
    }
}); 
```

如果您想同时执行它们，我建议您在 res/anim/ 文件夹中创建一个 animation.xml 文件。

例子：

```
<?xml version="1.0" encoding="utf-8"?>
<set
 xmlns:android="http://schemas.android.com/apk/res/android">
<scale
android:fromXScale="1.0"
android:fromYScale="1.0"
 android:toXScale=".75"
 android:toYScale=".75"
 android:duration="1500"/>
<rotate
android:fromDegrees="0"
 android:toDegrees="360"
 android:duration="1500"
 android:pivotX="50%"
 android:pivotY="50%" />
<scale
android:fromXScale=".75"
 android:fromYScale=".75"
 android:toXScale="1"
 android:toYScale="1"
 android:duration="1500"/>
</set> 
```

Java 代码：

```
 Animation multiAnim = AnimationUtils.loadAnimation(this, R.anim.animation);
    RelativeLayout.startAnimation(multiAnim); 
```

# python - 认为python无法识别系统模块

> ID：14414941
> 
> 赞同：0
> 
> 时间：2013-01-19T13:41:17.313
> 
> 标签：python, python-module, enthought

我已经在 Ubuntu 12.04 虚拟机上安装了 Enthought Python Distribution（即 python 2.7），如果它能够识别通过 synaptic 包管理器导入的模块，那将非常有用。目前，这些只能被系统提供的python安装识别（很容易理解）。由于两个 python 都是 2.7，是否可以让我的 EPD 安装识别系统模块？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T18:13:57.407

不，不支持将突触安装模块与 EPD 一起使用。当然，您可以尝试将特定的包添加到您的 PYTHONPATH 中，但这可能会产生冲突，尤其是对于包含 C 扩展的模块，这些模块可能链接到稍微不同的 Python 版本。

目前，在 EPD 中安装 python 包的推荐方法是使用该`enpkg`工具。尝试`enpkg -s <packagename>`查看您想要的包是否在 Enthought 的存储库中。如果您还没有，您应该通过运行升级 enpkg 本身`enpkg enstaller`并通过运行输入您的 EPD 凭据`enpkg --userpass`。然后您应该能够使用`enpkg <packagename>` [(Using enpkg to update EPD packages)](https://support.enthought.com/entries/22415022-using-enpkg-to-update-epd-packages)安装支持的软件包。

如果您要查找的软件包不在 Enthought 的存储库中，您可以`enpkg pip`使用该工具安装 pip 并在 EPD 中安装软件包。

或者，您可以下载所需包的源代码并使用 安装它`python setup.py install`，假设包有 setup.py。

注意：如果您在不使用 enpkg 的情况下将软件包安装到 EPD 中，则应确保首先删除该软件包的 EPD 版本（如果存在）（`enpkg --remove <packagename>`）。如果您稍后选择使用 enpkg 安装软件包，则应首先删除您使用替代方法安装的版本[（使用非 EPD 软件包安装程序，例如 pip）](https://support.enthought.com/entries/22914233-using-non-epd-package-installers-such-as-pip)。

Enthought 还有一个即将推出的 GUI 包管理器，目前处于测试阶段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T18:47:51.357

有同样的问题。Enthought 发行版使用完全不同的 python 路径和库前缀，而不是您运行的磨机系统发行版。因此，如果您使用 pip，pip 将安装在您的系统路径上，而不是您的 EPD 路径上。解决方案：

1) 获取您的 EPD 前缀：`enpkg --path`

2）在某处写下来

3）如果你 pip install 然后输入：

`pip install --install-option="--prefix=$PREFIX_PATH" package_name`

正如 Ian Bicking 在[使用 pip 将 Python 包安装到不同的目录中所写的那样？](https://stackoverflow.com/questions/2915471/pip-how-do-i-install-a-python-package-into-a-different-directory).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-27T22:47:38.030

以前的答案可能已经过时了。在版本 4.6.3 上使用 enpkg --env 获取前缀

```
$ enpkg --version
enstaller version: 4.6.3

$ enpkg --env 
```

# ruby-on-rails - Heroku 上的 Mongoid 连接池

> ID：14414942
> 
> 赞同：2
> 
> 时间：2013-01-19T13:41:18.010
> 
> 标签：ruby-on-rails, ruby, mongodb, heroku, mongoid

我在 heroku 上部署了一个应用程序。有时后台进程会引发以下错误：“任务因错误而失败：无法在 5.0 秒内获得连接。最大池大小当前为 1；请考虑增加池大小或超时。”

我怎样才能增加`pool size`或`timeout`？不幸的是，我在 Mongoid 文档和资源中找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T16:12:47.487

您可以在以下位置指定池大小`mongoid.yml`：

```
production:
    pool_size: 5 
```

详情[在这里](https://groups.google.com/forum/?fromgroups=#!topic/mongoid/uA6K9oFx-A8)。

# ruby-on-rails - 带有旅程 1.0.4 的单元测试导致 ActionController::RoutingError: No route matches

> ID：14414945
> 
> 赞同：0
> 
> 时间：2013-01-19T13:41:37.313
> 
> 标签：ruby-on-rails, unit-testing, ruby-on-rails-3.2, rails-routing, journey

[更新到 Rails 3.2.6 或 Rspec 2.11.0 时](https://stackoverflow.com/questions/11466917/routing-error-when-updating-to-rails-3-2-6-or-rspec-2-11-0)的 SO-thread Routing 错误很好地解释了这个问题：

**旅程 >= 1.0.4 (Rails 3.2.11)** ，所有与路由相关的单元测试都失败，而应用程序本身继续正常运行。

使用**Rails 3.2.6**并将旅程锁定到 1.0.3 是一种已变得不可接受的解决方法。

例如，这是最简单的失败测试之一：

**路线.rb**

```
ProjRails::Application.routes.draw do

    devise_for :users, :controllers => {:registrations => "users/registrations"}

    resources :users do
      collection do
        get 'current' => 'users#redirect', :as => :current
      end
    end

    # ...

  end
end 
```

**users_controller_test.rb**

```
require 'test_helper'

class UsersControllerTest < ActionController::TestCase
  setup do
    @user = FactoryGirl.create(:user)
    @current_user = FactoryGirl.create(:user)
    sign_in @current_user
  end

  # ...

  test "should get new" do
    get :new                    # this is line 25
    assert_response :success
  end

  # ...

end 
```

**堆栈跟踪**

```
 8) Error:
test_should_get_new(UsersControllerTest):
ActionController::RoutingError: No route matches {:controller=>"users", :action=>"new"}
    /home/me/.rvm/gems/ruby-1.9.3-p362/gems/actionpack-3.2.11/lib/action_dispatch/routing/route_set.rb:533:in `raise_routing_error'
    /home/me/.rvm/gems/ruby-1.9.3-p362/gems/actionpack-3.2.11/lib/action_dispatch/routing/route_set.rb:529:in `rescue in generate'
    /home/me/.rvm/gems/ruby-1.9.3-p362/gems/actionpack-3.2.11/lib/action_dispatch/routing/route_set.rb:521:in `generate'
    /home/me/.rvm/gems/ruby-1.9.3-p362/gems/actionpack-3.2.11/lib/action_dispatch/routing/route_set.rb:562:in `generate'
    /home/me/.rvm/gems/ruby-1.9.3-p362/gems/actionpack-3.2.11/lib/action_dispatch/routing/route_set.rb:558:in `generate_extras'
    /home/me/.rvm/gems/ruby-1.9.3-p362/gems/actionpack-3.2.11/lib/action_dispatch/routing/route_set.rb:554:in `extra_keys'
    /home/me/.rvm/gems/ruby-1.9.3-p362/gems/actionpack-3.2.11/lib/action_controller/test_case.rb:151:in `assign_parameters'
    /home/me/.rvm/gems/ruby-1.9.3-p362/gems/actionpack-3.2.11/lib/action_controller/test_case.rb:463:in `process'
    /home/me/.rvm/gems/ruby-1.9.3-p362/gems/actionpack-3.2.11/lib/action_controller/test_case.rb:49:in `process'
    /home/me/.rvm/gems/ruby-1.9.3-p362/gems/devise-2.1.2/lib/devise/test_helpers.rb:19:in `block in process'
    /home/me/.rvm/gems/ruby-1.9.3-p362/gems/devise-2.1.2/lib/devise/test_helpers.rb:71:in `catch'
    /home/me/.rvm/gems/ruby-1.9.3-p362/gems/devise-2.1.2/lib/devise/test_helpers.rb:71:in `_catch_warden'
    /home/me/.rvm/gems/ruby-1.9.3-p362/gems/devise-2.1.2/lib/devise/test_helpers.rb:19:in `process'
    /home/me/.rvm/gems/ruby-1.9.3-p362/gems/actionpack-3.2.11/lib/action_controller/test_case.rb:390:in `get'
    /home/me/proj/test/functional/users_controller_test.rb:25:in `block in <class:UsersControllerTest>' 
```

关于 SO 似乎有相当多的相关问题 - 所有问题都未解决或没有具体解决方案。

**任何人都知道如何解决这个问题？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:31:18.590

[rails-translate-routes README ( https://github.com/francesc/rails-translate-routes#testing](https://github.com/francesc/rails-translate-routes#testing) )的“测试”部分解释了必须将语言环境作为参数添加到操作调用中。

```
get :new 
```

**必须改为这样的东西：**

```
get :new, locale: 'en' 
```

如自述文件中所述，存在一个猴子补丁以避免这样做的必要性。

一个问题仍然存在：**为什么在 Rails 3.2.6/Journey 1.0.3 中没有添加它也能工作？**

# windows-phone-7 - ScheduledActionService.LaunchForTest 在初始安装后不调用 ScheduledTaskAgent 的 OnInvoke

> ID：14414947
> 
> 赞同：1
> 
> 时间：2013-01-19T13:41:48.433
> 
> 标签：windows-phone-7, scheduled-tasks, windows-phone-8, windows-phone

首先让我说几天前我已经让 PeriodicTask 工作了，但是当我回来做其他事情时，我注意到 PeriodicTask 的 OnInvoke 不再被调用。

我认为我做的基本正确：如果找到现有的 PeriodTask，则删除现有的 PeriodTask，仅在调试构建中调用 LaunchForTest，并且我检查了项目和 WMAppManifest.xml 中是否正确引用了 ScheduledAgent。

这就是我设置 PeriodicTask 的方式：

```
 try
            {
                PeriodicTask backgroundTask = null;
                backgroundTask = ScheduledActionService.Find(BGTASK_NEW_EPISODES) as PeriodicTask;
                if (backgroundTask != null)
                {
                    ScheduledActionService.Remove(backgroundTask.Name);
                }

                // Start our background agent.
                backgroundTask = new PeriodicTask(BGTASK_NEW_EPISODES);
                backgroundTask.Description = "Foobar";

                ScheduledActionService.Add(backgroundTask);
#if DEBUG
                ScheduledActionService.LaunchForTest(BGTASK_NEW_EPISODES, TimeSpan.FromSeconds(5));
#endif
            }
            catch (InvalidOperationException e)
            {
                if (e.Message.Contains("BNS Error: The action is disabled"))
                {
                    App.showNotificationToast("Background tasks have been disabled from\nsystem settings.");
                }
            }
            catch (Exception) {  }
       } 
```

这是我的 WMAppManifest.xml：

```
 <ExtendedTask Name="BackgroundTask">
    <BackgroundServiceAgent Specifier="ScheduledTaskAgent" Name="PodcatcherBackgroundService" Source="PodcatcherBackgroundService" Type="PodcatcherBackgroundService.ScheduledAgent" /> 
  </ExtendedTask> 
```

当我第一次安装应用程序时，会调用 OnInvoke。但是如果我重新启动应用程序，它就不会被调用。设备和模拟器也是如此。

我还验证了后台任务已在设置中启用，并且我的电池已充满电（设备是 WP7 设备，它通过 USB 连接到 PC。对于模拟器，当然，这无关紧要）。

那么接下来我应该检查什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T14:23:06.853

好的，看来我已经解决了。

在某些情况下，我忘记调用`NotifyComplete()`后台任务。在这种情况下，Windows Phone 似乎只是忽略了后续调用后台工作程序的尝试。

# database - Cloud Foundry + JPA + Spring + EntityManager

> ID：14414948
> 
> 赞同：0
> 
> 时间：2013-01-19T13:42:00.800
> 
> 标签：database, jpa, cloud-foundry

我想使用云数据源将基于 Web 的 WAR 部署到 CloudFoundry 中。

我已经定义了一个这样的bean：

```
 <cloud:data-source id="dataSource"/>      
       <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
            <property name="dataSource" ref="dataSource"/>
            <property name="persistenceUnitName" value="myPersistenceUnit" />
            <property name="jpaVendorAdapter">
                   <bean class="org.springframework.orm.jpa.vendor.EclipseLinkJpaVendorAdapter">
                     <property name="showSql" value="true"/>
                     <property name="generateDdl" value="true"/>

                  </bean>
            </property>           
        </bean> 
   </beans> 
```

....但是当我尝试部署时，我得到一个 Java 代理异常：Cannot apply class transformer without LoadTimeWeaver specified

但是我不能在不上传 jar 工具代理的情况下指定 Java 代理.....

有什么解决办法？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T17:02:20.787

我对 EclipseLink 不是很熟悉，所以我什至不确定编织器要求是否来自 EclipseLink，但是

一种方法是将您的应用程序部署为独立应用程序（*即*在其周围部署您自己的 tomcat），这样您就可以将额外的 weaver jar 放入`lib/`. 看看[http://blog.cloudfoundry.org/2012/06/18/deploying-tomcat-7-using-the-standalone-framework/](http://blog.cloudfoundry.org/2012/06/18/deploying-tomcat-7-using-the-standalone-framework/)和[https://github.com/ericbottard/cloudfoundry-tomcat-7](https://github.com/ericbottard/cloudfoundry-tomcat-7)

此外，如果您只有一个数据源，您可以`<cloud:datasource />`通过上传常规应用程序并让 Cloud Foundry*自动重新配置*您的应用程序来避免使用特定于 cloudfoundry 的命名空间（此处的信息：http: [//blog.springsource.org/2011/11/ 04/using-cloud-foundry-services-with-spring-part-2-auto-reconfiguration/](http://blog.springsource.org/2011/11/04/using-cloud-foundry-services-with-spring-part-2-auto-reconfiguration/)）事实上，这可能是让 EclipseLink 在 Cloud Foundry 上无缝工作的方式（我猜这里）

当然，也可以选择切换到另一个不需要类检测的提供程序，但这有点极端。

同样，我不是 Eclipse Link 大师，所以我可能在这里遗漏了一些东西......

# c++ - 特殊异常类有什么需要？

> ID：14414949
> 
> 赞同：7
> 
> 时间：2013-01-19T13:42:07.730
> 
> 标签：c++, exception, stl, hierarchy

为什么 C++ 标准要费心发明`std::exception`类？他们有什么好处？我问的原因是这样的：

```
try
{
  throw std::string("boom");
}
catch (std::string str)
{
  std::cout << str << std::endl;
} 
```

工作正常。稍后，如果需要，我可以制作自己的轻量级“异常”类型。那么我为什么要打扰`std::exception`呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-19T13:45:47.727

> **为什么 C++ 标准要费心发明`std::exception`类？他们有什么好处？**

它提供了一个通用且一致的接口来处理标准库抛出的异常。标准库生成的所有异常都继承自`std::exception`.

请注意，标准库 api 可能会抛出许多不同类型的异常，举几个例子：

*   `std::bad_alloc`
*   `std::bad_cast`
*   `std::bad_exception`
*   `std::bad_typeid`
*   `std::logic_error`
*   `std::runtime_error`
*   `std::bad_weak_ptr | C++11`
*   `std::bad_function_call | C++11`
*   `std::ios_base::failure | C++11`
*   `std::bad_variant_access | C++17`

等等......
`std::exception`是所有这些异常的基类：

![异常层次结构](../Images/e475a351c127013d0d456d66c5e9fcb5.png)

为所有这些异常提供基类，允许您使用通用异常处理程序处理多个异常。

* * *

**如果需要，我可以制作自己的轻量级“异常”类型。那么我为什么要打扰`std::exception`呢？**

如果您需要自定义异常类，请继续制作一个。但是`std::exception`让你的工作更轻松，因为它已经提供了很多好的异常类应该具备的功能。它使您可以轻松地从它派生并为您的类功能覆盖必要的功能（*特别是）。`std::exception::what()`*
这为您提供了`std::exception`处理程序的 2 个优势，

*   可以捕获标准库异常以及
*   自定义异常类类型的异常

^(图片提供：[http ://en.cppreference.com/w/cpp/error/exception](http://en.cppreference.com/w/cpp/error/exception))

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-19T14:20:37.553

> **为什么 C++ 标准要费心发明 std::exception 类？他们有什么好处？**

拥有不同[类型的异常](http://www.cplusplus.com/reference/stdexcept/)可以让您捕获特定**类型**的错误。从公共基础派生异常允许根据情况捕获更通用或特定错误的粒度。

在 C++ 中，现有的**类型**系统已经存在，因此当您可以在语言中显式创建所需类型的异常时，不需要标准化错误字符串。

***std::exception*****及其派生类的存在有两个主要原因：**

1.  标准库必须具有某种异常层次结构才能在异常情况下抛出。**总是抛出一个std::string**是不合适的，因为你没有干净的方法来定位特定类型的错误。

2.  为库供应商提供一个可扩展的基于类的接口，以抛出最基本的错误类型并为用户提供通用的回退。您可能希望提供比简单的**what()**字符串更多的错误元数据，以便发现错误的人可以更智能地从中恢复。

    同时，如果用户只关心该错误消息，则作为通用基础的**std::exception**允许一般包罗万象，而不是**...。**

如果您所做的只是打印并退出，那么这并不重要，但是您也可以使用继承自**std::exception的****std::runtime_error**以方便捕获。

 **> **稍后，如果需要，我可以制作自己的轻量级“异常”类型。那么我为什么要打扰 std::exception 呢？**

如果您从**std::runtime_error**继承并使用您自己的自定义错误类型，那么您可以追溯添加错误元数据，而无需重写 catch 块！相反，如果您曾经更改过错误处理设计，那么您将被迫重写所有**std::string**捕获，因为您无法安全地从**std::string**继承。这不是一个前瞻性的设计决定。

如果现在看起来还不错，想象一下，如果您的代码作为共享库在多个项目之间共享，并且有各种程序员在处理它。迁移到新版本的库会很痛苦。

这甚至没有提到 std::string 可以在复制、构造或访问字符期间抛出自己的异常！

[Boost 的网站在这里](http://www.boost.org/community/error_handling.html)有一些关于异常处理和类构建的良好指南。

# 用户故事

> 我正在编写一些网络代码并使用第三方供应商的库。在用户输入的无效 IP 地址上，此库会引发自定义异常**nw::invalid_ip**从 **std::runtime_error**派生。**nw::invalid_ip**包含一个描述错误消息的**what()**，但也包含提供的**wrong_ip()**地址。
> 
> 我还使用**std::vector**来存储套接字，并利用检查**的 at()**调用来安全地访问索引。我知道如果我在一个超出范围的值上调用**at() ，则会抛出****std::out_of_range**。
> 
> 我知道也可能会抛出其他东西，但我不知道如何处理它们，或者它们到底是什么。
> 
> 当我收到**nw::invalid_ip**错误时，我会弹出一个模式，其中包含一个输入框，供用户使用无效的 IP 地址填充，以便他们可以编辑它并重试。
> 
> 对于**std::out_of_range**问题，我通过对套接字运行完整性检查并修复不同步的向量/套接字关系来做出响应。
> 
> 对于任何其他**std::exception**问题，我会使用错误日志终止程序。最后我有一个**catch(...)**记录“未知错误！” 并终止。
> 
> 仅抛出**std::string**很难稳健地执行此操作。

这是在不同情况下抛出一些东西的基本示例，因此您可以尝试捕获异常。

# ExampleExceptions.cpp

```
#include <vector>
#include <iostream>
#include <functional>
#include <stdexcept>
#include <bitset>
#include <string>

struct Base1 {
    virtual ~Base1(){}
};
struct Base2 {
    virtual ~Base2(){}
};

class Class1 : public Base1 {};
class Class2 : public Base2 {};

class CustomException : public std::runtime_error {
public:
    explicit CustomException(const std::string& what_arg, int errorCode):
        std::runtime_error(what_arg),
        errorCode(errorCode){
    }
    int whatErrorCode() const {
        return errorCode;
    }
private:
    int errorCode;
};

void tryWrap(typename std::function<void()> f){
    try {
        f();
    } catch(CustomException &e) {
        std::cout << "Custom Exception: " << e.what() << " Error Code: " << e.whatErrorCode() << std::endl;
    } catch(std::out_of_range &e) {
        std::cout << "Range exception: " << e.what() << std::endl;
    } catch(std::bad_cast &e) {
        std::cout << "Cast exception: " << e.what() << std::endl;
    } catch(std::exception &e) {
        std::cout << "General exception: " << e.what() << std::endl;
    } catch(...) {
        std::cout << "What just happened?" << std::endl;
    }
}

int main(){
    Class1 a;
    Class2 b;

    std::vector<Class2> values;

    tryWrap([](){
        throw CustomException("My exception with an additional error code!", 42);
    });

    tryWrap([&](){
        values.at(10);
    });

    tryWrap([&](){
        Class2 c = dynamic_cast<Class2&>(a);
    });

    tryWrap([&](){
        values.push_back(dynamic_cast<Class2&>(a));
        values.at(1);
    });

    tryWrap([](){
        std::bitset<5> mybitset (std::string("01234"));
    });

    tryWrap([](){
        throw 5;
    });
} 
```

# 输出：

```
Custom Exception: My exception with an additional error code! Error Code: 42
Range exception: vector::_M_range_check
Cast exception: std::bad_cast
Cast exception: std::bad_cast
General exception: bitset::_M_copy_from_ptr
What just happened? 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T14:26:33.890

这是一个合理的问题，因为`std::exception`实际上只包含一个属性：`what()`, a `string`。所以很容易只使用`string`而不是`exception`. 但事实是 an`exception`不是 a `string`。如果您将异常视为仅仅是一个`string`，您将失去从提供更多属性的专用异常类中派生的能力。

例如，今天您`string`在自己的代码中抛出 s。明天您决定为某些情况添加更多属性，例如数据库连接异常。您不能仅仅从衍生而来`string`做出这种改变；您将需要编写一个新的异常类并更改`string`. Using`exception`是异常处理程序仅使用他们关心的数据的一种方式，可以在需要处理它们时挑选和选择异常。

此外，如果您只抛出和处理`string`-typed 异常，您将错过任何不是您自己的代码抛出的所有异常。如果这种区别是有意的，最好使用通用异常类来表示这一点，而不是`string`.

`exception`也比`string`. 这意味着库开发人员可以编写接受异常作为参数的函数，这比接受`string`.

所有这些基本上都是免费的，只需使用`exception`而不是`string`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T15:42:44.647

仅仅因为 6 行玩具示例中的“工作正常”并不意味着它在实际代码中是可扩展或可维护的。

考虑这个函数：

```
template<typename T>
std::string convert(const T& t)
{
    return boost:lexical_cast<std::string>(t);
} 
```

`bad_alloc`如果无法分配字符串的内存， 这可能会抛出，或者`bad_cast`如果转换失败，则可能会抛出。

此函数的调用者可能想要处理表示输入错误但不是致命错误的失败转换情况，但不想处理内存不足的情况，因为他们对此无能为力，所以让异常向上传播堆栈。这在 C++ 中很容易做到，例如：

```
std::string s;
try {
  s = convert(val);
} catch (const std::bad_cast& e) {
  s = "failed";
} 
```

如果只是抛出异常，因为`std::string`代码必须是：

```
std::string s;
try {
  s = convert(val);
} catch (const std::string& e) {
  if (e.find("bad_cast") != std::string::npos)
    s = "failed";
  else
    throw;
} 
```

这需要更多代码来实现，并依赖于异常字符串的确切措辞，这可能取决于编译器实现和`boost::lexical_cast`. 如果系统中的每一个异常处理都必须进行字符串比较来确定此时是否可以处理错误，那将是混乱且无法维护的。在引发异常的系统的一个部分中对异常消息的拼写进行微小更改可能会导致系统另一部分中的异常处理代码停止工作。这会在错误位置和*每个*系统中的一些错误处理代码。使用异常的优点之一是允许将错误处理与主逻辑分开，如果您基于整个系统中的字符串比较创建依赖关系，您将失去该优势。

C++ 中的异常处理通过匹配异常的类型来捕获事物，它不会通过匹配异常的值来捕获事物，因此抛出不同类型的事物以允许细粒度处理是有意义的。抛出单个字符串类型的东西并根据字符串的值处理它们是混乱的、不可移植的并且更加困难。

> 稍后，如果需要，我可以制作自己的轻量级“异常”类型。那么我为什么要打扰 std::exception 呢？

如果您的代码有用且可重用并且我想在我的系统的一部分中使用它，我是否必须添加捕获所有轻量级类型的异常处理？为什么我的整个系统都应该关心系统的某个部分所依赖的库的内部细节？如果您的自定义异常类型是从中派生的，那么我可以在不知道（或关心）特定类型`std::exception`的情况下捕获它们。`const std::exception&`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T23:27:17.380

哇，我很惊讶没有人提到这一点：

1.  您需要多种类型的异常才能区分它们——某些类型的异常应该被处理，而另一些则不应该。

2.  它们需要有一个通用的基类，以便您能够向用户显示合理的消息，而不必知道您的程序可能抛出的*所有类型的异常（这在使用外部封闭源代码库时是不可能的）。*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-19T14:06:31.733

如果您是该类的唯一用户，则可以避免`std::exception`（*如果您想避免标准库异常*）

* * *

但是，如果您的课程将被其他人（*程序员*）使用，他们将如何处理异常。

如果您的类`throws`a`string`描述了**错误**，那将无济于事，因为您的类的消费者更喜欢更**标准**的方式（*捕获异常对象并查询它是什么方法*）来处理`exception`而不是捕获字符串。

您还可以通过捕获`exception`对象来捕获标准库引发的异常

* * *

您可以覆盖[异常](http://www.cplusplus.com/reference/exception/exception/)`what`类的方法以提供有关错误的更多信息。**

# android - Android标签布局问题

> ID：14414957
> 
> 赞同：0
> 
> 时间：2013-01-19T13:43:01.817
> 
> 标签：android, android-layout, android-actionbar

我在使用 Android 选项卡布局时遇到了一些问题。我一直在尝试制作一个包含 4 个选项卡和它们下方的片段的屏幕，当用户按下每个选项卡时，片段会动态切换到另一个活动并且选项卡保持静态，我的问题是我试图用选项卡来实现它布局，并且自 Android 4.0 起已弃用，因此我使用操作栏选项卡尝试了它，但后来我有了我不想要也不需要的操作栏。

我有两个问题：

1.  是否可以使用操作栏但隐藏操作栏并仅显示选项卡？
2.  有没有办法在 Android 4.0 及更高版本上使用选项卡布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T22:07:44.737

1.  我不确定您是否可以实现它，但如果您想使用 ActionBar，[这](http://android-developers.blogspot.in/2011/04/customizing-action-bar.html)将是最好的起点之一。

2.  仅仅因为它已被弃用，并不意味着您不能在 Android 4+ 中使用标签。;)

    **您当然可以在 Android 4+ 中使用 Tabs 和 TabLayout**并且一切正常（尽管您显然不应该因为 ActionBar 是必须更好的选择）。

    我自己尝试过，因为即使我更喜欢 TabLayout 而不是 ActionBar，幸运的是直到现在还没有遇到任何问题！

    您会注意到的唯一一件事是 Eclipse 将在已弃用的代码上画一条黄线（您显然可以忽略或选择隐藏所有已弃用的警告）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T22:08:24.320

1.是的，有可能.....你应该试试[http://actionbarsherlock.com/](http://actionbarsherlock.com/)

2.ActionBarSherlock 从 sdk 7 工作到 sdk 16

# matlab - 在 Matlab 中对巨大的点云进行分箱和平均

> ID：14414959
> 
> 赞同：2
> 
> 时间：2013-01-19T13:43:09.213
> 
> 标签：matlab, 3d, binning

我有一个巨大的 3D 点云，[3x40e6]。它是一个平面的点云，所以在这个意义上它更像是 2.5D。我想将点云合并到一个固定的网格范围中，这样我就可以将它放入一个 2D 矩阵并使用 imagesc（mymap）查看它。

我确实解决了这个问题，但是时间太长了。这是我到目前为止得到的。它工作正常，但需要 10 分钟。它插入了所有类型的 jive，我不需要。

```
xlin=linspace(min(xx),max(xx),meshsz*dxxyy);
ylin=linspace(min(yy),max(yy),meshsz);
[X,Y]=meshgrid(xlin,ylin);
disp('+ Flattening (X,Y,Z) information into 2D (X,Y)(Z) mesh..')
%Fit to 2D grid (takes a long time)
Z=griddata(xx,yy,zz,X,Y);%,'cubic'); 
```

我真正想做的是将我的 [3xN] 向量中的所有数据合并到我的特定 2D 范围图中。我想我必须将所有值合并到该地图中（有一些出色且快速的合并算法），但我还需要其中的特定 Z 坐标标量，因为这是我想要在每个 bin 中平均的值。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:30:48.407

这是您可以一步完成的方法。`accumarray`允许您轻松交换用于组合数据的函数，以便您可以使用例如`std`查看局部可变性或`numel`查看每个 bin 中的计数。

```
%# transform your x,y coordinates to pixel (=bin) values
minX = min(xx);
maxX = max(xx);
minY = min(yy);
maxY = max(yy);

targetSize = [512 512];

xxBin = round( (xx-minX)/(maxX-minX)*(targetSize(1)-1) ) +1;
yyBin = round( (yy-minY)/(maxY-minY)*(targetSize(2)-1) ) +1;

%# map by using accumarray, take the mean of each bin 
map = accumarray([xxBin(:),yyBin(:)],zz,targetSize,@mean,0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T15:32:35.947

解决了。每百万点需要 200 毫秒。

```
yidx=[min(yy):dy:max(yy)];
xidx=[min(xx):dx:max(xx)];
ZmapSum=zeros(length(yidx),length(xidx));
ZmapIdx=zeros(size(ZmapSum));

[nx,binx] = histc(xx,xidx);
[ny,biny] = histc(yy,yidx);
%bin==0 means the value is out of range
binx=binx+1; biny=biny+1;
%binzero=( (binx==0) | (biny==0) );
%binx(binzero) = [];
%biny(binzero) = [];
%xx(binzero) = [];
%yy(binzero) = [];
%zz(binzero) = [];

%binx and biny give their respective bin locations
for i=1:1:length(xx)
    ZmapSum(biny(i),binx(i))=ZmapSum(biny(i),binx(i))+zz(i);
    ZmapIdx(biny(i),binx(i))=ZmapIdx(biny(i),binx(i))+1;
end

Zmap=ZmapSum./ZmapIdx; 
```

# python - 使用 python gae、babel 和 i18n 进行国际化。无法输出正确的字符串

> ID：14414960
> 
> 赞同：2
> 
> 时间：2013-01-19T13:43:17.743
> 
> 标签：python, google-app-engine, internationalization, python-babel

```
jinja_env = jinja2.Environment(loader = jinja2.FileSystemLoader(template_dir),extensions=['jinja2.ext.i18n'], autoescape = True)
jinja_env.install_gettext_translations(i18n)

config['webapp2_extras.i18n'] = {
    'translations_path': 'locale',
    'template_path': 'views'
}

app = webapp2.WSGIApplication([
    ('/', MainController.MainPageHandler)
], config=config, debug=True) 
```

在 messages.po 文件中。

> "Project-Id-Version: PROJECT VERSION\n" "Report-Msgid-Bugs-To: EMAIL@ADDRESS\n" "POT-Creation-Date: 2013-01-19 19:26+0800\n" "PO-修订日期：2013-01-19 19:13+0800\n" "最后译者：全名 \n" "语言团队：en_US \n" "复数形式：nplurals=2;复数=(n ! = 1)\n" "MIME-Version: 1.0\n" "Content-Type: text/plain; charset=utf-8\n" "Content-Transfer-Encoding: 8bit\n" "Generated-By: Babel 0.9 .6\n"
> 
> #~ msgstr "Hello-World"
> 
> #~ msgstr "Hello World"

在处理程序中：

```
from webapp2_extras import i18n

from webapp2_extras.i18n import gettext as _

class MainPageHandler(Handler.Handler):
    def get(self):
        locale = self.request.GET.get('locale', 'en_US')
        i18n.get_i18n().set_locale(locale)
        logging.info(locale)
        message = _('Hello-World')
        logging.info(message)
        self.render("main.html") 
```

在 html 文件中：

```
<div id="main">

    {{ _("Hello-World") }}
</div> 
```

当导航到网页时，它返回字符串“Hello-World”而不是“Hello World”。我不知道怎么了。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T16:03:33.870

有几件事可能是错误的，或者可能只是描述中缺少...

webapp2 翻译的默认“域”是“messages”，而不是“message”，因此如果您键入的文件实际上是“message.po”，则需要更改。

其次，翻译工作在编译后的 .mo 文件上，而不是 .po 上，所以如果你还没有运行编译步骤 ( `pybabel compile -f -d ./locale`)，你需要这样做。你应该有一个文件`locale/en_US/LC_MESSAGES/messages.mo`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-24T16:24:40.613

谢谢，@tipsywacky，我对 jinja2、babel 和 GAE 有点迷茫，你的代码让我走上了正确的道路。

我想为其他“堆栈器”分享我的代码，您可以在其中欣赏一件奇怪的事情：不知道为什么，但我不需要设置**配置**变量来使所有工作正常。

```
import webapp2
import jinja2
import os
import logging
# Internacionalization functions
from webapp2_extras import i18n
from webapp2_extras.i18n import gettext as _
# Put here the path to the jinja templates, relative to the actual file
jinja_env = jinja2.Environment(loader=jinja2.FileSystemLoader(os.path.abspath(os.path.join(os.path.dirname(__file__), "..", "views"))),
        extensions=['jinja2.ext.i18n'],
        autoescape=False)
jinja_env.install_gettext_translations(i18n)

# This controller handles the generation of the front page.
class MainPage(webapp2.RequestHandler):
    def get(self):
        locale = self.request.get('locale', 'es_ES')
        i18n.get_i18n().set_locale(locale)
        logging.info(_('Hello-World'))
        template = jinja_environment.get_template('main.html')
        self.response.out.write(template.render())

app = webapp2.WSGIApplication([('/', MainPage)], debug=True) 
```

仅使用此代码和您的 HTML 文件（以及已编译的 message.mo 文件）：

```
<div id="main">
    {{ _("Hello-World") }}
</div> 
```

我的应用程序会翻译日志记录文本和 HTML 文本。

太好了，我花了一整天的时间寻找一种本地化的方法，最后我得到了它。

我唯一不明白的是你的配置变量。为什么我不需要它？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T20:32:06.690

好吧，弄清楚出了什么问题。

在 messages.po 文件中，我`#: gettext_example.py:16`将`msgid "Hello-World"`. 然后重新编译它，它就可以工作了。

# regex - sed 命令附加电子邮件地址

> ID：14414964
> 
> 赞同：1
> 
> 时间：2013-01-19T13:43:39.683
> 
> 标签：regex, sed, osx-lion

我有一个 csv 文件，我想用 .example.com 附加所有电子邮件。结果将是 foo@bar.com.example.com 我想从终端使用 sed 命令执行此操作，但我无法弄清楚正确的语法是什么。例子：

```
email1@foo.bar;name1;surname1
email3@foo.bar;name2;surname2
email3@foo.bar;name3;surname3 
```

应该成为

```
email1@foo.bar.example.com;name1;surname1
email3@foo.bar.example.com;name2;surname2
email3@foo.bar.example.com;name3;surname3 
```

我尝试使用`sed -i "" -e 's/\(@[A-Z0-9.-]+\.[A-Z]{2,4}\)/\1.example.com/g'`file.csv 但它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T14:34:33.030

我刚刚注意到[osx-lion](/questions/tagged/osx-lion "显示标记为“osx-lion”的问题")标签，这意味着您正在使用 BSD sed。你需要`-E`旗帜来完成这项`+`工作：

```
$ cat > file

email1@foo.bar;name1;surname1
email3@foo.bar;name2;surname2
email3@foo.bar;name3;surname3

$ sed -E 's/(@[a-zA-Z0-9.-]+)/\1.example.com/' file

email1@foo.bar.example.com;name1;surname1
email3@foo.bar.example.com;name2;surname2
email3@foo.bar.example.com;name3;surname3 
```

您的字符类还需要检查`a-z`以及`A-Z`，因为它们默认区分大小写。

参考：[如何在 mac os x (BSD) sed 上转义加号？](https://stackoverflow.com/questions/4453760/how-to-escape-plus-sign-on-mac-os-x-bsd-sed)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T16:18:09.320

您可以在第一个分号前插入文本：

```
sed 's/;/.example.com;/' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T06:43:06.217

尝试这个

`sed -re 's/(\w+@\w+.\w+)/\11.example.com/g' temp.txt`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T14:40:37.923

我想我找到了解决方案： sed -i ".bkp" -E "s/(@[a-zA-Z0-9.-]+)/&.example.com/g" file.csv

# .net - 防止日历通知中断我的 WP7 应用

> ID：14414966
> 
> 赞同：0
> 
> 时间：2013-01-19T13:43:55.133
> 
> 标签：.net, windows-phone-7

我正在为 Windows Phone 开发睡眠阶段闹钟，现在它工作得很好。必须始终打开应用程序这一事实的第一个问题已通过手动“变暗”屏幕等来解决。但是我昨晚偶然发现了另一个问题：如果日历触发某些通知的弹出窗口，我的应用程序似乎完全停止运行，直到我点击它，这对于闹钟应用程序来说当然是灾难性的。

有没有办法克服这个问题，例如只要这个应用程序正在运行就禁用通知？或者该应用程序也在日历弹出窗口下运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:02:05.427

**不，没有办法禁用系统通知**。这种限制是有充分理由的。试想一下，用户会下载并安装一个应用程序，该应用程序会抑制会议通知等。

# android - 无法在另一个活动中访问一个活动的变量

> ID：14414968
> 
> 赞同：0
> 
> 时间：2013-01-19T13:44:17.323
> 
> 标签：android, variables, android-activity

我的 FirstActivity 包含此代码

```
mHandler.postDelayed(mLaunchTask,10000);
private Runnable mLaunchTask = new Runnable() 
            {
                public void run() 
                {
                    Intent i = new Intent(getApplicationContext(),NearestPoint.class);
                    Bundle params = new Bundle();
                    params.putFloat("latiA", latA);
                    params.putFloat("longiA", longA);
                    params.putFloat("latiB", latB);
                    params.putFloat("longiB", longB);
                    params.putFloat("latiC", latC);
                    params.putFloat("longiC", longC);
                    i.putExtras(params);
                    startActivity(i);
                }
            }; 
```

NearestPoint 活动包含此代码

```
public float latA, longA, latB, longB, latC, longC;
  Intent it = getIntent(); {        
   if (it != null)
   {
       Bundle params = it.getExtras();
       if (params != null)
       {
            latA = params.getFloat("latiA");
            longA = params.getFloat("longiA");  
            latB = params.getFloat("latiB");
            longB = params.getFloat("longiB");  
            latC = params.getFloat("latiC");
            longC = params.getFloat("longiC");  
        }
   }} 
```

我无法在 NearestPoint 活动中正确访问 latA、longA 等的值。我尝试使用 Toast 显示：

```
Toast.makeText(getApplicationContext(),"\nPoint A: \nLatitude: " + latA  + "\nLongitude: " + longA,  Toast.LENGTH_LONG).show(); 
```

在 FirstActivity 它给出了正确的值，但在 NearestPoint 我得到 0.0 作为纬度和经度。

这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.gpsdistance"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.gpsdistance.FirstActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.gpsdistance.NearestPoint"
            android:label="@string/title_activity_nearest_point" >
        </activity>
        <activity
            android:name="com.example.gpsdistance.MinimumDistance"
            android:label="@string/title_activity_minimum_distance" >
        </activity>
    </application>

    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.INTERNET" />

</manifest> 
```

这是我完整的 FirstActivity 课程：

```
package com.example.gpsdistance;

import android.os.Bundle;
import android.os.Handler;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.TextView;
import android.widget.Toast;

public class FirstActivity extends Activity {

    Button btnShowLocation, btnMinDis;
    TextView display= null;
    //private final Context mctx;
    double latuser;
    double longuser;
    double dx1, dy1, delta_long1, delta_lat1, final_long1, final_lat1;
    double dx2, dy2, delta_long2, delta_lat2, final_long2, final_lat2;
    double dx3, dy3, delta_long3, delta_lat3, final_long3, final_lat3;
    public float latA, longA, latB, longB, latC, longC;
    public String latiA, longiA, latiB, longiB, latiC, longiC ;
    // GPSTracker class
    GPSTracker gps;

    void  getGPS() 
    {
      gps = new GPSTracker(FirstActivity.this);
    }

    void points()
    {

        latuser = gps.getLatitude();
        longuser = gps.getLongitude();

        dx1 = 120*Math.cos(35); 
        dy1 = 120*Math.sin(35); 
        delta_long1 = dx1/(111320*Math.cos(latuser));   
        delta_lat1 = dy1/110540;   
        final_long1 = longuser + delta_long1;
        final_lat1 = latuser + delta_lat1;
        dx2 = 150*Math.cos(38); 
        dy2 = 150*Math.sin(38); 
        delta_long2 = dx2/(111320*Math.cos(latuser));   
        delta_lat2 = dy2/110540;   
        final_long2 = longuser + delta_long2;
        final_lat2 = latuser + delta_lat2;
        dx3 = 180*Math.cos(38); 
        dy3 = 180*Math.sin(38); 
        delta_long3 = dx3/(111320*Math.cos(latuser));   
        delta_lat3 = dy3/110540;   
        final_long3 = longuser + delta_long3;
        final_lat3 = latuser + delta_lat3;

        latA= (float)final_lat1;
        longA= (float)final_long1;
        latB= (float)final_lat2;
        longB= (float)final_long2;
        latC= (float)final_lat3;
        longC= (float)final_long3;
    }

    private float getLatiA() {
          return this.latA;
        }
   /*public FirstActivity(Context ctx)
   {
       this.mctx = ctx;
       getGPS();
       points();
   } */
    private float computeDistance(double lat1, double lon1,
            double lat2, double lon2) {
            // Based on http://www.ngs.noaa.gov/PUBS_LIB/inverse.pdf
            // using the "Inverse Formula" (section 4)

            int MAXITERS = 20;
            // Convert lat/long to radians
            lat1 *= Math.PI / 180.0;
            lat2 *= Math.PI / 180.0;
            lon1 *= Math.PI / 180.0;
            lon2 *= Math.PI / 180.0;

            double a = 6378137.0; // WGS84 major axis
            double b = 6356752.3142; // WGS84 semi-major axis
            double f = (a - b) / a;
            double aSqMinusBSqOverBSq = (a * a - b * b) / (b * b);

            double L = lon2 - lon1;
            double A = 0.0;
            double U1 = Math.atan((1.0 - f) * Math.tan(lat1));
            double U2 = Math.atan((1.0 - f) * Math.tan(lat2));

            double cosU1 = Math.cos(U1);
            double cosU2 = Math.cos(U2);
            double sinU1 = Math.sin(U1);
            double sinU2 = Math.sin(U2);
            double cosU1cosU2 = cosU1 * cosU2;
            double sinU1sinU2 = sinU1 * sinU2;

            double sigma = 0.0;
            double deltaSigma = 0.0;
            double cosSqAlpha = 0.0;
            double cos2SM = 0.0;
            double cosSigma = 0.0;
            double sinSigma = 0.0;
            double cosLambda = 0.0;
            double sinLambda = 0.0;

            double lambda = L; 
            for (int iter = 0; iter < MAXITERS; iter++) {
                double lambdaOrig = lambda;
                cosLambda = Math.cos(lambda);
                sinLambda = Math.sin(lambda);
                double t1 = cosU2 * sinLambda;
                double t2 = cosU1 * sinU2 - sinU1 * cosU2 * cosLambda;
                double sinSqSigma = t1 * t1 + t2 * t2; 
                sinSigma = Math.sqrt(sinSqSigma);
                cosSigma = sinU1sinU2 + cosU1cosU2 * cosLambda; 
                sigma = Math.atan2(sinSigma, cosSigma); 
                double sinAlpha = (sinSigma == 0) ? 0.0 :
                    cosU1cosU2 * sinLambda / sinSigma; 
                cosSqAlpha = 1.0 - sinAlpha * sinAlpha;
                cos2SM = (cosSqAlpha == 0) ? 0.0 :
                    cosSigma - 2.0 * sinU1sinU2 / cosSqAlpha;

                double uSquared = cosSqAlpha * aSqMinusBSqOverBSq; 
                A = 1 + (uSquared / 16384.0) * 
                    (4096.0 + uSquared *
                     (-768 + uSquared * (320.0 - 175.0 * uSquared)));
                double B = (uSquared / 1024.0) * 
                    (256.0 + uSquared *
                     (-128.0 + uSquared * (74.0 - 47.0 * uSquared)));
                double C = (f / 16.0) *
                    cosSqAlpha *
                    (4.0 + f * (4.0 - 3.0 * cosSqAlpha)); 
                double cos2SMSq = cos2SM * cos2SM;
                deltaSigma = B * sinSigma * 
                    (cos2SM + (B / 4.0) *
                     (cosSigma * (-1.0 + 2.0 * cos2SMSq) -
                      (B / 6.0) * cos2SM *
                      (-3.0 + 4.0 * sinSigma * sinSigma) *
                      (-3.0 + 4.0 * cos2SMSq)));

                lambda = L +
                    (1.0 - C) * f * sinAlpha *
                    (sigma + C * sinSigma *
                     (cos2SM + C * cosSigma *
                      (-1.0 + 2.0 * cos2SM * cos2SM))); 

                double delta = (lambda - lambdaOrig) / lambda;
                if (Math.abs(delta) < 1.0e-12) {
                    break;
                }
            }

            float distance = (float) (b * A * (sigma - deltaSigma));

            return distance;
    }

    /*public FirstActivity()
        {
            getGPS();
            if(gps.canGetLocation())
            points();
        }*/

    @Override
    protected void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.firstactivity);
            final LinearLayout lView = new LinearLayout(this);  
            display= new TextView(this);
            btnMinDis=new Button(this);
            btnMinDis.setText("Nearest Point");
            final Handler mHandler = new Handler();
            btnShowLocation = (Button) findViewById(R.id.buttonLocation);

            btnShowLocation.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) 
                {
                    // TODO Auto-generated method stub

                    getGPS();
                    // check if GPS enabled
                    if(gps.canGetLocation())
                        {

                        points();
                            float initialdisA = computeDistance( latuser, longuser, latA, longA);
                            float initialdisB = computeDistance( latuser, longuser, latB, longB);
                            float initialdisC = computeDistance( latuser, longuser, latC, longC);         
                            Toast.makeText(getApplicationContext(),"Point A: \nLatitude: " + latA  + "\nLongitude: " + longA,  Toast.LENGTH_LONG).show();
                            lView.addView(display);
                            setContentView(lView);
                            display.setText("Initial Location is - \nLatitude: " + latuser + " N" + "\nLongitude: " + longuser + " E"
                                        + "\n\n\nPoint A:\n" + "Latitude: " + latA + "N" + "\nLongitude: " + longA + "E" 
                                        + "\nPoint B:\n" + "Latitude: " + latB + "N" + "\nLongitude: " + longB + "E" 
                                        + "\nPoint C:\n" + "Latitude: " + latC + "N" + "\nLongitude: " + longC + "E"
                                        + "\n\n\nInitial Distance A: " + initialdisA + "m" + "\nInitial Distance B: " + initialdisB + "m" + "\nInitial Distance C: " + initialdisC + "m");

                            mHandler.postDelayed(mLaunchTask,10000);
                        }
                    else
                        {
                    // GPS or Network is not enabled
                    // Ask user to enable GPS/network in settings
                    gps.showSettingsAlert();
                        }   
              }  

            private Runnable mLaunchTask = new Runnable() 
            {
                public void run() 
                {
                    Intent i = new Intent(getApplicationContext(),NearestPoint.class);
                   Bundle params = new Bundle();
                    params.putFloat("latiA", getLatiA());
                    params.putFloat("longiA", longA);
                    params.putFloat("latiB", latB);
                    params.putFloat("longiB", longB);
                    params.putFloat("latiC", latC);
                    params.putFloat("longiC", longC);
                    i.putExtras(params); 
                    startActivity(i);
                }
            };    
         });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.firstactivity, menu);
        return true;
    }

} 
```

这是完整项目的链接： [http ://www.filedropper.com/gpsdistance](http://www.filedropper.com/gpsdistance)

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T14:21:47.870

发生这种情况是因为在您实例化您的可运行文件时，latA、longA、latB、longB、latC、longC 的值为零。您应该为每个值使用一个 getter，如下所示：

```
mHandler.postDelayed(mLaunchTask,10000);
private Runnable mLaunchTask = new Runnable() 
            {
                public void run() 
                {
                    Intent i = new Intent(getApplicationContext(),NearestPoint.class);
                    Bundle params = new Bundle();
                    params.putFloat("latiA", getLatiA()); //You should to call a getter here
                    i.putExtras(params);
                    startActivity(i);
                }
            };    

//In your class     
private double getLatiA() {
  return this.latiA;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T15:09:47.080

我不明白您为什么要在另一个线程中运行活动。我建议使用服务。[http://developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html)

# android - 如何在具有四个片段的屏幕中实现视图寻呼机？

> ID：14414969
> 
> 赞同：0
> 
> 时间：2013-01-19T13:44:18.840
> 
> 标签：android, android-fragments, android-viewpager

每个屏幕的平板电脑应用程序分为四个部分（四个片段）。我在一个布局中添加了四个片段到片段事务。现在我必须在其中实现视图寻呼机。我怎样才能做到这一点。使用该视图寻呼机库，我必须将片段管理器和片段列表作为参数传递。在我的场景中，如何一次传递每 4 个参数？

我的主要活动是：

```
> public void onCreate(Bundle savedInstanceState) {
>       super.onCreate(savedInstanceState);
>       setContentView(R.layout.activity_main);         NewsFragment[]
> newsFragment_obj = new NewsFragment[GlobalValues.titile.length];
> 
>       fragMentTra = getFragmentManager().beginTransaction();
> 
>       for (int i = 0; i < GlobalValues.titile.length; i++) {
>           newsFragment_obj[i] = new NewsFragment(GlobalValues.titile[i],
>                   GlobalValues.content[i]);       }
> 
>       fragMentTra.add(R.id.fragment_container1, newsFragment_obj[0],
>               "Fragment1");       fragMentTra.add(R.id.fragment_container2, newsFragment_obj[1],
>               "Fragment2");       fragMentTra.add(R.id.fragment_container3, newsFragment_obj[2],
>               "Fragment3");       fragMentTra.add(R.id.fragment_container4, newsFragment_obj[3],
>               "Fragment4");
> 
>       fragMentTra.commit();   } 
```

这就是我将四个片段添加到屏幕的方式。现在只关注查看寻呼机。那么您能否告诉我如何使用带有示例代码的视图寻呼机来实现这一点。

我的 XML 文件是：

```
<LinearLayout
    android:id="@+id/upper"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:orientation="horizontal" >

    <LinearLayout
        android:id="@+id/up_left_area"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="#ffff66" >

        <FrameLayout
            android:id="@+id/fragment_container1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/up_right_area"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="#ccffff" >

        <FrameLayout
            android:id="@+id/fragment_container2"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />
    </LinearLayout>
</LinearLayout>

<LinearLayout
    android:id="@+id/lower"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:orientation="horizontal" >

    <LinearLayout
        android:id="@+id/down_left_area"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="#66cc33" >

        <FrameLayout
            android:id="@+id/fragment_container3"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/down_right_area"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="#cc6600" >

        <FrameLayout
            android:id="@+id/fragment_container4"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T13:52:14.687

你根本不需要使用`FragmentTransactions`。如果您[想](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)拥有 4 个“可滑动”屏幕，每个屏幕作为`Fragment`.

您想要的主要内容是`ViewPager`从您的 XML 中获取：

`mPager = (ViewPager)findViewById(R.id.pager);`

然后你想`FragmentPagerAdapter`通过扩展`FragmentPagerAdapter`和定义片段的构造来创建你的自定义：

```
public static class MyAdapter extends FragmentPagerAdapter {
    public MyAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public int getCount() {
        return NUM_ITEMS; // In this case, 4
    }

    @Override
    public Fragment getItem(int position) {
        // This is basically just making a new Fragment
        // e.g. if (position == 0) return new FirstPageFragment()
        return ArrayListFragment.newInstance(position);
    }
} 
```

然后制作适配器：

`mAdapter = new MyAdapter(getSupportFragmentManager());`

然后将适配器设置在`ViewPager`：

`mPager.setAdapter(mAdapter);`

这有**很多**问题。例如，`ViewPager`处理片段标签的设置，因此您必须非常小心 Activity 重新创建（请参阅[ViewPager 和片段 - 存储片段状态的正确方法是什么？](https://stackoverflow.com/questions/7951730/viewpager-and-fragments-whats-the-right-way-to-store-fragments-state)有关此的讨论）。

还有很多事情你需要考虑。如果片段不在屏幕上，你想保留它们吗？如果你只想要一些呢？查看[FragmentStatePagerAdapter](http://developer.android.com/reference/android/support/v4/app/FragmentStatePagerAdapter.html)和[ViewPager.setOffscreenLimit](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setOffscreenPageLimit%28int%29)

# .net - 将依赖项组合到控制台应用程序中

> ID：14414971
> 
> 赞同：2
> 
> 时间：2013-01-19T13:44:30.503
> 
> 标签：.net, console-application

我有一个用 C# 创建的控制台应用程序。我专门将其分为 3 个解决方案：-

1.  类库
2.  类库的单元测试
3.  控制台应用程序

控制台应用程序特别愚蠢。它只接受参数并将它们传递给我的类库中的类。

* * *

以目前的形式，我必须为我的类库部署带有 dll 的 exe。现在我宁愿能够独立部署 exe 而不会增加对 dll 的依赖的复杂性。我想将类库分开，因为它的功能对我正在构建的其他应用程序很有用。

所以我的问题是；当我构建控制台应用程序时，有没有办法将依赖库与 exe 捆绑在一起？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T13:47:43.180

您可以使用[ILMerge](http://www.microsoft.com/en-gb/download/details.aspx?id=17630)以这种方式组合程序集。

> ILMerge 是一个用于将多个 .NET 程序集合并到一个 .NET 程序集的实用程序。它适用于可执行文件和 DLL，并带有几个用于控制输出处理和格式的选项。

这将是构建后的一个额外过程，尽管您应该能够自动化它。

# android - 如何自动启动像whatsapp这样的Android应用程序？

> ID：14414973
> 
> 赞同：1
> 
> 时间：2013-01-19T13:44:48.073
> 
> 标签：android, autostart, whatsapp

我如何像whatsapp一样在android上自动启动我的应用程序。应用程序必须在系统重新启动时启动...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T15:35:06.837

你可能想写一个服务，它会读取互联网数据。要在引导写入广播接收器时启动它，它将在 BOOT_COMPLETED 或 ACTION_EXTERNAL_APPLICATIONS_AVAILABLE 上执行。您的 GUI 应用程序应该使用 AIDL 接口与服务通信 - 如果服务将在与应用程序相同的进程中运行，则不需要 AIDL。

# hibernate - 休眠：分离没有级联到集合

> ID：14414978
> 
> 赞同：0
> 
> 时间：2013-01-19T13:45:27.957
> 
> 标签：hibernate, session, cascade, detach

我目前正在对使用 Hibernates 分离的对象作为 DTO 进行一些测试。但是我有一个问题，即父bean的分离没有级联到父bean集合中包含的bean（尽管设置了CascadeType.ALL）。

例如，我有一个父级，其中包含一组属性，这些属性具有属性类型的外键。我是这样读的：

```
Parent bean = (Parent) session.createCriteria(Parent.class)
    .add(Restrictions.eq("id", 1223215031850009727l))
    .setFetchMode("attributes", FetchMode.JOIN)
    .createAlias("attributes.type", "attributetype")
    .uniqueResult(); 
```

在阅读了 bean 之后，我将它从会话中分离出来：

```
session.evict(bean); 
```

之后我输出一些数据：

```
System.out.println(bean.getName());
for (Attribute attr : bean.getAttributes()) {
    System.out.println(attr.getName());
    System.out.println(attr.getType().getName());
} 
```

到目前为止，一切都按预期工作。但是，如果我从 bean 的加载中删除“createAlias”，我希望在访问属性类型时会出错，因为它也应该从会话中分离（属性映射包含 CascadeType.ALL）。而不是错误，休眠会触发 SQL 来加载类型。

为什么属性没有从会话中分离出来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T14:52:47.167

我找到了解决方案。还必须在外键属性上设置级联（至少 DETACH）。

# java - Java 易失性链表

> ID：14414981
> 
> 赞同：1
> 
> 时间：2013-01-19T13:45:55.720
> 
> 标签：java, list, sorting, thread-safety

我正在尝试对 LinkedList 进行非常特殊的排序。我使用 ListIterator 来查找我想要添加项目的位置，并且运行良好。唯一的问题是我有多个线程想要添加和排序项目。添加本身是同步的，但 LinkedList 使用非易失性属性。那不安全，是吗？这是我正在尝试做的事情（简化）：

```
public class Test {
    private LinkedList<Long> list = new LinkedList<Long>();

    synchronized void add ( final long number ) {
        // iterate our sorting list
        final ListIterator<Long> iterator = list.listIterator( list.size() );
        while (iterator.hasPrevious()) {
            long current = iterator.previous();
            if (current < number) {
                if (iteratot.nextIndex() >= list.size()) {
                    list.add( number ); // I don't need the iterator anymore
                } else {
                    iterator.next();
                    iterator.add( number );
                }
            }
            // This here gets difficult 
            // I need the current number here! (which is the one that is a little lower than the added one)
        }
    }
} 
```

上面的源代码只类似于我正在做的事情，并且比原来的要简单得多。

是否有另一种我没有见过的 List 类型是线程安全的，或者是我不知道的另一种解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T13:51:21.967

只要访问和修改的唯一方法`Test.list`是通过`Test.add()`，您的代码就是线程安全的。

如果还有其他方法可以访问/修改`Test.list`，您需要告诉我们更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T13:51:42.160

可以看到[synchronizedList](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#synchronizedList%28java.util.List%29)方法。

> 返回由指定列表支持的同步（线程安全）列表。为了保证串行访问，对后备列表的所有访问都通过返回的列表完成是至关重要的。

# css - 正文背景 100% 的文档宽度？

> ID：14414982
> 
> 赞同：0
> 
> 时间：2013-01-19T13:45:58.970
> 
> 标签：css

我有一个可以缩放页面整个宽度的正文背景。

目前，它设置为 background-size: 100% 50px;

100% 非常适合大屏幕：背景按预期跨越页面的宽度。我也在寻找适用于小屏幕（和手机！）的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T13:54:40.170

我将背景从 body{} 移到了 html{}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T14:05:20.853

将代码移至`html`

```
html { 
  background: url(image.jpg) no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
} 
```

# java - 在谷歌地图上动态添加标记集群

> ID：14414987
> 
> 赞同：0
> 
> 时间：2013-01-19T13:46:26.930
> 
> 标签：java, javascript, jsp, google-maps-api-3, google-maps-markers

我想在地图上动态添加标记并使用 markerCluster 对它们进行聚类，如下面的链接：http: [//google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/docs/examples.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/docs/examples.html) 场景是，当用户进入我的网站时，他们会看到一个初始的谷歌地图，当他们按下按钮时，我会返回我的数据库获取 100 个数据并在地图上为用户绘制，因为 100 个数据在 5 月有点大特别是它们很接近，所以我想使用markerCluster，但不知何故它不起作用，我不知道为什么，控制台中没有错误显示（我使用chrome的Web开发工具）

这是我的 javascript，我使用 java、javascript 和 jsp：

```
$('#addMarkerData').click(function(){
console.log('into addMarkerData click function');
$.get('getphoto.do',{},function(Result){
    var markers = [];
    var image = 'img/location.png';
    for(var i=0; i < 100; i++){
            console.log(Result[i].photoId);
            console.log(Result[i].latitude);
            console.log(Result[i].longitude);
            console.log(Result[i].imgURL);  
              var latLng = new google.maps.LatLng(Result[i].latitude,
                      Result[i].longitude);
              var marker = new google.maps.Marker({
                  animation: google.maps.Animation.DROP,
                  position: latLng,
                  icon: image
              });
              markers.push(marker);
    }
    var markerCluster = new MarkerClusterer(map, markers);
    console.log(markerCluster.getTotalMarkers());
}); 
```

});

变量 map 在另一个 .js 文件上声明，并将在此 .js 文件之前加载

还有一件事，我代码的最后一行，`console.log(markerCluster.getTotalMarkers())`显示正确答案（100），顺便说一句

如果有人能给我一些建议，将不胜感激谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T14:55:12.660

您应该`MarkerClusterer`在函数外部创建，以便可以反复使用它。您可以在创建地图后立即创建它：

```
var map = new google.maps.Map();
var markerCluster = new MarkerClusterer(map); 
```

然后，您可以在 JSON 回调中使用`addMarker()`or方法。`addMarkers()`每次都将使用相同的标记聚类器，因此不会删除任何先前添加的标记。代码的大致轮廓：

```
$('#addMarkerData').click(function () {
    $.get('getphoto.do', {}, function (Result) {
        var markers = [];
        for (var i = 0; i < Result.length; i++) {
            var marker = new google.maps.Marker({
                animation: google.maps.Animation.DROP,
                position: new google.maps.LatLng(Result[i].latitude, Result[i].longitude),
                icon: 'img/location.png'
            });
            markers.push(marker);
        }
        markerCluster.addMarkers(markers);
        console.log(markerCluster.getTotalMarkers());
    });
}); 
```

# javascript - 使用窗口的主滚动条在其自己的 div 中滚动内容

> ID：14414988
> 
> 赞同：0
> 
> 时间：2013-01-19T13:46:51.233
> 
> 标签：javascript, jquery, css, html

> **可能重复：**
> [使用浏览器的主滚动条滚动特定的 DIV 内容](https://stackoverflow.com/questions/6887112/scroll-particular-div-contents-with-browsers-main-scrollbar)

我正在尝试复制“使用资源管理器的主滚动条滚动特定 div 并将内容隐藏在固定（位置：固定）标题下”。

看看[这个网站上](http://www.brokennightmovie.com)的一个例子。如您所见，在网站中，中间的内容可以通过窗口的主滚动条滚动，并且内容类型隐藏在固定标题的“下方”。

以下是我为正文（中间的内容）所拥有的 CSS：

```
#body {
    position: relative;
    padding: 0;
    margin-left: 320px;
    margin-top: 130px;
    width: 500px;   
} 
```

这是固定标题的CSS：

```
#header {
    position: fixed;
    top: 0;
    text-shadow:0 -1px 0 rgba(0,0,0,0.5);   
    width: 100%;
    height: 130px;
    z-index:2;
} 
```

中间的内容当前在固定标题下方滚动，但它显示在那里，因为我的标题只是一个 PNG 图像。因此，当我滚动时，可以看到文本在标题图像下方流动！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T13:52:29.333

您应该在标题背景上使用与实际正文背景相同的背景图像（相同的纹理），您将获得所需的效果。

[http://jsbin.com/uqimac/1/edit](http://jsbin.com/uqimac/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T13:51:27.683

你的内容 div 应该有：

```
#content {
  height:500px; /* some fixed height */
  overflow:hidden; /* hide the scrollbars */
} 
```

# c#-4.0 - Telerik Report 在每个报告页面上仅显示数据集中的第一个值

> ID：14414992
> 
> 赞同：1
> 
> 时间：2013-01-19T13:47:29.967
> 
> 标签：c#-4.0, telerik, report, telerik-reporting

我正在研究 Telerik 报告。我有显示客户基本信息的主要报告。除了基本信息外，customerID 被传递给一个函数`GenerationBubbleSheet(ds.tables[0].Rows[0]["CustomerID"].toString())`，该函数以气泡格式显示 customerID（通过设置气泡的可见性开/关）

如果我循环遍历数据集，就像 `for(int i = 0; i < ds.tables[0].Rows.Count; i++) { GenerationBubbleSheet(ds.tables[0].Rows[i]["CustomerID"].toString()); }` 它在一个页面上显示所有客户 ID 而不是每页显示一个客户 ID。

当只有一个客户存在时它工作正常，但如果有多个客户数据集（例如 10 个条目），它只在每个客户报告上显示第一个 customerID（其他信息显示正确。我该如何解决这个问题？