# StackOverflow 问答 14826000-14826999

# javascript - 使用 observableArray 在点击绑定上切换值

> ID：14826002
> 
> 赞同：1
> 
> 时间：2013-02-12T05:28:26.797
> 
> 标签：javascript, knockout.js, knockout-2.0

我是淘汰赛新手并使用教程，但没有运气。

我正在尝试将一组图像设置为类似于一组复选框。它们最初应在数组“self.brands”中设置为“true”，并具有“.active”类。在单击事件中，我希望他们将它们切换为真或假，并将类从 .active 设置为 .deactive

数组“self.brands”代表 4 个属性。ID、图像路径、alt 标记、选中（真或假）。当您单击图像时，它应该切换真/假值，将 css 从 .active {opacity:1} 设置为 deactive {opacity:0.2}。

这是 self.brands 可观察数组：

```
self.brands = ko.observableArray([["1",'acdsee.jpg','ACD See',"true"], "2",'amazon.jpg','Amazon',"true"], ["3",'aol.jpg','AOL',"true"], ["4",'cisco.jpg','Cisco',"true"]; 
```

这是图像的html：

```
<a href="#">Select All</a> | <a href="#">Deselect all</a>
<br />
<div id="brands">
<ul data-bind="foreach: brands" class="brands">
                  <li data-bind="click: $parent.setBrand,
               css: { active: $data == $root.chosenBrandId() }"><a href="javascript:void(0);" data-bind="click: $parent.setBrand"> <img data-bind="attr:{src: $data[1], alt: $data[2]}" /></a> 
               </li>
                </ul>
</div> 
```

CSS：

```
.active {opacity:1}
.deactive {opacity:0.2} 
```

淘汰码：

```
self.chosenBrandId = ko.observable();

self.setBrand = function(brand) { 

self.chosenBrandId(brand); 
}; 
```

我在设置时遇到问题。当前，当您单击图像时，它一次仅将 .active 类应用于一张图像。当我尝试获取 self.chosenBrandId(brand) 的值时，它返回 [object, object]。所以我不明白如何将 selectedBrandID 中的值设置为 true，我试过了

```
self.chosenBrandId(brand)[3]; 
```

但这返回未定义，所以我想知道如何设置值，甚至可以在返回 [object,object] 的“品牌”变量中检索哪些参数；

希望它以下列方式表现：

1) onclick 在 .active 和 .deactive 类之间切换单个图像？

2) 单个图像的 onclick 更改 self.brands 数组的布尔真/假值？

3) 创建一个函数，当您单击链接“全选”或“取消全选”时，将所有图像 css 和数组值从 .active 和 true 或 .deactive 和 false 更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T06:16:25.150

看起来您的 CSS 类“活动”逻辑是错误的，您的代码一次只允许设置一个。（看起来你也复制了点击绑定）。

如果您想切换这些复选框，则 true/false 属性应该是 ko.observable。我已将代码修改如下：

[http://jsfiddle.net/JvqHs/](http://jsfiddle.net/JvqHs/)

```
var self = this;
self.brands = ko.observableArray([{
    id: "1",
    img: 'acdsee.jpg',
    name: 'ACD See',
    active: ko.observable(true)
}, {
    id: "2",
    img: 'amazon.jpg',
    name: 'Amazon',
    active: ko.observable(true)
}, {
    id: "3",
    img: 'aol.jpg',
    name: 'AOL',
    active: ko.observable(true)
}, {
    id: "4",
    img: 'cisco.jpg',
    name: 'Cisco',
    active: ko.observable(true)
}]);

self.setBrand = function (brand) {
    var state = !brand.active();
    brand.active(state);
}; 
```

# iphone - ipad，iphone中的链接器错误

> ID：14826010
> 
> 赞同：0
> 
> 时间：2013-02-12T05:28:38.757
> 
> 标签：iphone, ipad, ios6

嗨，当我尝试编译我的应用程序时出现此错误。我尝试替换按钮的名称仍然显示相同？

![在此处输入图像描述](../Images/373eb07e39e5f0db445e958d7f5a426d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:21:59.877

尝试按照步骤操作。希望它有帮助，如果没有，请恢复。

**1）打开您的项目 2）选择您的项目目标 3）转到构建阶段部分 4）转到编译源选项卡 5）然后在那里搜索 xcode 说重复的文件名，然后删除它们。6）清理项目，然后尝试运行它。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:36:19.490

转到 x 代码首选项![在此处输入图像描述](../Images/ce80926f665403e29d3a08a2dcd910a2.png)

然后转到位置并单击“/Deriveddata”旁边的小箭头并删除派生数据

![在此处输入图像描述](../Images/da65e77c9227b63983129f4a74107df1.png)

这应该解决它

# ekeventkit - 从所有 EKCalendar 获取事件

> ID：14826011
> 
> 赞同：0
> 
> 时间：2013-02-12T05:28:42.723
> 
> 标签：ekeventkit

我想从所有日历（家庭、工作、日历和生日）中获取事件。我从默认日历中获取事件，但无法从生日日历中获取事件。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T14:20:04.390

[This answer](https://stackoverflow.com/a/12934628/849963) might help you:

```
NSDate* endDate =  [NSDate dateWithTimeIntervalSinceNow:[[NSDate distantFuture] timeIntervalSinceReferenceDate]];
NSArray *calendarArray = [NSArray arrayWithObject:cal];
NSPredicate *fetchCalendarEvents = [eventStore predicateForEventsWithStartDate:[NSDate date] endDate:endDate calendars:calendarArray];
NSArray *eventList = [eventStore eventsMatchingPredicate:fetchCalendarEvents];

for(int i=0; i < eventList.count; i++){

    NSLog(@"Event Title:%@", [[eventList objectAtIndex:i] title]);

} 
```

# c# - DisplayModeProvider.Instance.Modes.Add 无条件调用

> ID：14826013
> 
> 赞同：0
> 
> 时间：2013-02-12T05:28:45.463
> 
> 标签：c#, asp.net-mvc-4

我们当前的项目正在利用在线找到的以下代码片段根据需要将用户引导到移动视图：

```
DisplayModeProvider.Instance.Modes.Insert(0, new DefaultDisplayMode("Mobile")
    {
        ContextCondition = (context => RequirementsHelper.BrowserIsMobile(context.GetOverriddenUserAgent()))
    }); 
```

它允许我们根据用户代理字符串轻松地将用户引导到 index.cshtml 或 index.mobile.cshtml。到目前为止，一切都很好。

扩展这个想法，我很想实现一个基于 DisplayModeProvider 的本地化引擎（因为我们网站的不同版本看起来有很大不同，但功能几乎相同。）

所以我最初的快速测试是创建以下方法：

```
protected void DisplayNZSkin()
{
    System.Web.WebPages.DisplayModeProvider.Instance.Modes.Add(new System.Web.WebPages.DefaultDisplayMode("NZ")
    {
        ContextCondition = (context => true)
    });
} 
```

当我确定要显示 NZ 皮肤时，我可以调用它（不幸的是，它依赖于一些数据库调用）。这个想法是，当它被调用时，它会强制渲染 index.nz.cshtml。

这是个坏主意。仅在我的控制器中存在此方法（未调用），就使所有页面都呈现其 .nz 版本。单步执行，表明代码总是被执行。`(context => true)`在每个页面调用中都会调用该函数。

那里发生了什么事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T18:21:37.030

我有几乎相同的想法，所以我会放上我的版本，让我们看看它是否能解决你的问题。

我从这篇文章开始
[http://www.codeproject.com/Articles/576315/LocalizeplusyourplusMVCplusappplusbasedplusonplusa](http://www.codeproject.com/Articles/576315/LocalizeplusyourplusMVCplusappplusbasedplusonplusa)

但是将其更改为使用它，因为过滤器在模型绑定之后。

```
public class ExtendedControllerFactory:DefaultControllerFactory
{
    protected override IController GetControllerInstance(System.Web.Routing.RequestContext requestContext, Type controllerType)
    {
        Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo(GetCultureFromURLOrAnythingElse());
        Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo(GetCultureFromURLOrAnythingElse());
        return base.GetControllerInstance(requestContext, controllerType);
    } 
```

这样 global.asax 应该有这个

```
 protected void Application_Start()
    {
        ControllerBuilder.Current.SetControllerFactory(new ExtendedControllerFactory());

    System.Web.WebPages.DisplayModeProvider.Instance.Modes.Insert(0, new System.Web.WebPages.DefaultDisplayMode("EN")
        {
            ContextCondition = context => Thread.CurrentThread.CurrentCulture.Name.Equals("en-US", StringComparison.CurrentCultureIgnoreCase)
        });
    System.Web.WebPages.DisplayModeProvider.Instance.Modes.Insert(0, new System.Web.WebPages.DefaultDisplayMode("BR")
        {
            ContextCondition = context => Thread.CurrentThread.CurrentCulture.Name.Equals("pt-BR", StringComparison.CurrentCultureIgnoreCase)
        }); 
```

我认为这应该做你想做的，但我从来没有在生产中尝试过。

# .net - 找不到路径的一部分抛出异常

> ID：14826017
> 
> 赞同：1
> 
> 时间：2013-02-12T05:28:50.477
> 
> 标签：.net, powershell

```
$ErrorActionPreference = 'Continue'

try
{
    $fileEntries = [IO.Directory]::GetFiles("somedirectory", "*",[IO.SearchOption]::AllDirectories); 
}
catch [Exception]
{
    $_.Exception.Message
}
foreach($fileName in $fileEntries) 
{ 
    [Console]::WriteLine($fileName); 
} 
```

**上面的代码抛出异常**

找不到路径 '\blah\dah\dodah\updity_and_suppy\03 的一部分。文档 hokeypokey\imp\lalalid\welpy qwerty-poloky 架构 - tada sausy（来自 Internet）todady poloky TPG upodsl poliduity\B4PE 到 Y3 - 外部 asdfds polm toluky 到 Saftgy 3 yuppy App\Old Docs'。

我稍微混淆了路径，但布局在那里。

我尝试使用 GetFiles 而不是 Get-ChildItem 的原因是速度。我正在通过网络遍历可能有 100 TB 的数据，而 Get-ChildItem 在检索 .Net 对象时速度太慢，并且包含的​​信息超出了我的需要。

我要问的问题是“可以使用类似于 > -ErrorAction SilentlyContinue 的方法忽略此错误吗？” 或“有没有办法阻止此错误的发生？”

谢谢您的考虑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T07:08:06.437

```
$ErrorActionPreference = 'Stop'

function recurse
{

    param($path)

    try
    {
           $fileEntries = [IO.Directory]::GetFiles($path)
           [System.IO.DirectoryInfo]$directInf = New-Object IO.DirectoryInfo($path)
           $folders = $directInf.GetDirectories()
    }
    catch [Exception]
    {
           $_.Exception.Message
           $folders = @()
     }

    foreach($fileName in $fileEntries) 
    {

          #[Console]::WriteLine($fileName); 

    }

    Remove-Variable -ErrorAction SilentlyContinue -Name fileEntries 

    foreach($folder in $folders)
    {
        recurse($path + $folder + "\")
    }
    Remove-Variable -ErrorAction SilentlyContinue -Name folders 
}

recurse #path that you wish to search 
```

这可能不是最好的解决方案，但它会递归地遍历文件夹并获取文件名，比网络上的 get-childitem 快得多，并且处理超过 260 的路径抛出的异常并继续（它不能解决问题，只是忽略并继续）。Remove-Variable 是为了帮助解决内存问题，它是否有帮助是另一回事。

# database - facebook群组通知背后的逻辑是什么？

> ID：14826027
> 
> 赞同：2
> 
> 时间：2013-02-12T05:30:06.007
> 
> 标签：database, facebook, database-design, database-connection, database-schema

我想知道facebook群组通知的逻辑是什么以及它是如何工作的？如果一个用户关闭通知，那么用户将不会收到通知，但组流将继续进行。

# actionscript-3 - 使用 Flex 在文本区域上输入或删除标签

> ID：14826029
> 
> 赞同：1
> 
> 时间：2013-02-12T05:30:33.603
> 
> 标签：actionscript-3, apache-flex, flex4, flex3

我正在使用 Flex，我有一个文本区域，当我输入一些文本并点击键盘上的`Space`或`Enter`按钮时，我希望它创建一些带有`X`标记的设计，就像 Stack Overflow 标签部分一样。

如果我输入“Flex”并按空格或回车，它将添加`Flex X`. 然后，如果我单击十字标记 ( `X`)，“Flex”将从标签文本框中删除。

![例子](../Images/b4a105ae2b691a44983179eb3236ce80.png)

请帮助我处理这种类型的文本框或文本区域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:15:48.990

做到这一点并非易事。这是我几年前在电子邮件客户端上使用的方法。

创建一个自定义的“容器”类，它可以扩展`Group`(Flex 4) 或`UIComponent`(Flex 3)。此容器将有两种类型的子对象：一个`TextInput`表示标签或电子邮件地址的另一个对象。

最初容器只有一个孩子，`TextInput`其大小为容器宽度的 100%。有`TextInput`一个键盘事件监听器来检测用户何时按下`Space`或`Enter`“提交”地址并将其转换为“标签”对象。

当文本“提交”时，您：

*   删除输入到文本输入中的文本。
*   根据输入的文本创建“标签”并将其添加到容器中。将其添加到容器时，将其添加到文本输入的前面。
*   调整文本输入的大小，使其现在占据容器的剩余宽度。如果当前行的文本输入空间不足，则将文本输入放置在下一行的下方并再次使其宽度为 100%。

“tag”对象有一个“x”图标的事件监听器，当点击它时会导致标签从容器中移除。

在 Flex 4 中，您的容器类可以是 a `Group`，并且子文本输入和标记对象的所有大小/定位都可以通过自定义 Spark 布局来完成。如果您在 Flex 3 中执行此操作，那么大小/定位逻辑将是容器逻辑的一部分。在这两种情况下，您都应该使用适当的 Flex 生命周期方法来调整容器的子对象的大小/定位。

# node.js - NodeJS/GeddyJS：设置从模型中获取数据的限制

> ID：14826030
> 
> 赞同：2
> 
> 时间：2013-02-12T05:30:34.970
> 
> 标签：node.js, geddy

我正在为 NodeJS 应用程序使用 GeddyJS 框架。

在任何模型中调用**all()**方法时，我遇到了设置限制的问题。

我尝试提供**限制**作为选项之一，但它没有按预期工作。

**geddy.model.User.all({userId: 1}, {sort:{createdAt: "desc"},limit:10}, function(err,data){**

任何帮助？？？

PS：我们使用 MongoDB 作为数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T07:25:19.290

这就是你要找的我认为：

```
geddy.model.User.all(
  {}, 
  {sort: {createdAt: 'desc'}, limit: 10},
  function (err, data) {
    // do stuff
  }
); 
```

如果这对您不起作用，请让我们（框架开发人员）知道您遇到了什么错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T05:59:28.270

我在文档中没有看到任何关于使用限制的内容；但是，这可能对您有用。

```
geddy.model.User.all(
                     {userId: 1}, 
                     {sort:{createdAt: "desc"}},
                     {limit:10}, 
                     function(err, data){
                      // do stuff
                     }) 
```

# javascript - Firefox 扩展：发现可疑 url 时停止页面加载

> ID：14826033
> 
> 赞同：0
> 
> 时间：2013-02-12T05:30:45.287
> 
> 标签：javascript, firefox, firefox-addon

我正在开发一个简单的 Firefox 扩展程序，它跟踪请求的 url 并在后台调用 Web 服务，该服务检测 URL 是否可疑，并根据服务返回的结果，扩展程序决定停止页面加载并提醒用户关于伪造或其他情况的信息，如果用户仍然希望转到该页面，他可以被重定向到他请求的原始页面

我添加了一个 http-on-modify-request 观察者

```
var observerService = Components.classes["@mozilla.org/observer-service;1"].getService(Components.interfaces.nsIObserverService);
observerService.addObserver(requestObserverListener.observe, "http-on-modify-request", false); 
```

和观察者

```
var requestObserverListener = {observe: function (subject, topic, data) {

  //alert("Inside observe");
  if (topic == "http-on-modify-request") {
    subject.QueryInterface(Components.interfaces.nsIHttpChannel);
    var url = subject.URI.spec; //url being requested. you might want this for something else 
   //alert("inside modify request");

    var urlbarvalue = document.getElementById("urlbar").value;
    urlbarvalue = processUrl(urlbarvalue, url);
    //alert("url bar: "+urlbarvalue);
    //alert("url: "+url);
    document.getElementById("urlbar").style.backgroundColor = "white";
    if(urlbarvalue == url && url != "")
    {
        var browser = getWindowForRequest(subject);
        if (browser != null) {
           //alert(""+browser.contentDocument.body.innerHTML);
          alert("inside browser: "+url);
          getXmlHttpRequest(url);
        }
    }
  }

},
} 
```

因此，当 URLbar 中的 URL 和请求的 url 匹配时，**REST 服务**将通过 ajax **getXmlHttpRequest(url) 调用；**方法

现在，当我运行此扩展程序时，对服务进行了调用，但在服务返回任何响应之前，页面被加载，这是不合适的，因为用户可能同时输入他的凭据并受到损害

我想首先在浏览器选项卡上向用户显示警告消息，如果他仍想访问该页面，则可以通过单击警告消息窗口中的链接将其重定向到该页面

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T20:35:03.720

我还没有尝试过这段代码，所以我不确定它是否会正常工作`suspend`，`resume`但这是我会尝试的。您正在使用[nsIRequest](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIRequest "nsIRequest")对象作为您的对象，`subject`因此您可以调用`subject.suspend()`它。从那里使用回调到您的 XHR 调用`cancel()`或`resume()`nsIRequest。

这是相关的（未经测试的）代码片段。我的 XHR 假设某种承诺 .the() 返回，但希望您理解其意图：

```
 if(urlbarvalue == url && url != "")
  {
      var browser = getWindowForRequest(subject);
      if (browser != null) {
        // suspend the pending request
        subject.suspend();
        getXmlHttpRequest(url).then(
                                    function success() { subject.resume(); },
                                    function failure() { subject.cancel(Components.results.NS_BINDING_ABORTED); });
      }
  } 
```

只是一些公平的警告，您实际上不想以这种方式实现附加组件。

对每个 HTTP 请求进行远程调用会非常慢。安全浏览模块执行一次调用来下载被认为是“不安全”的站点的数据库，然后它可以根据 HTTP 请求页面快速检查数据库，这样它就不必每次都进行单独的调用。

这里有一些关于这种拦截的更多信息值得一读：[https ://developer.mozilla.org/en-US/docs/XUL/School_tutorial/Intercepting_Page_Loads#HTTP_Observers](https://developer.mozilla.org/en-US/docs/XUL/School_tutorial/Intercepting_Page_Loads#HTTP_Observers)

另外我担心您的 XHR 请求实际上会循环，因为 XHR 调用会创建一个`http-on-modify-request`事件，因此您的代码实际上可能会在能够检查当前 URL 之前检查您的 XHR 请求是否有效。您可能需要对您的 URL 检查域进行安全检查。

这是另一个与您的类似的 stackoverflow 问题，可能有用：[如何阻止特定选项卡上的 HTTP 请求？](https://stackoverflow.com/questions/6167145/how-to-block-http-request-on-a-particular-tab)

祝你好运！

# php - 简单目标="_blank"

> ID：14826035
> 
> 赞同：0
> 
> 时间：2013-02-12T05:31:09.370
> 
> 标签：php, html

我很难简单地尝试在这个 PHP 条件中包含一个 target="_blank" 。有人可以帮我吗？

```
if (!empty($options['help_uid'])) echo '<li class="help-icon">
   <a href="' . $options['help_uid'] . '">'
. '<img src="' . get_stylesheet_directory_uri()
. '/icons/help-icon.png" width="24" height="24" alt="Help">'
. '</a></li>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:35:07.107

你可以试试这个

```
if (!empty($options['help_uid'])) { ?>
<li class="help-icon">
   <a href="<?php echo  $options['help_uid']; ?>" target="_blank">
<img src=" <?php echo get_stylesheet_directory_uri(); ?>/icons/help-icon.png" width="24" height="24" alt="Help"/>
</a>
</li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:33:42.880

你应该这样使用

```
if (!empty($options['help_uid'])) echo '<li class="help-icon">
   <a href="' . $options['help_uid'] . '" target="_blank">'
. '<img src="' . get_stylesheet_directory_uri()
. '/icons/help-icon.png" width="24" height="24" alt="Help">'
. '</a></li>'; 
```

# php - 无法从 PHP SOAP 访问 IIS 中的 WCF

> ID：14826048
> 
> 赞同：1
> 
> 时间：2013-02-12T05:32:04.197
> 
> 标签：php, wcf, soap, iis-7

我们有两个相同 WCF 服务的实例，一个在 Visual Studio 2010 (IIS Express) 中运行，另一个在 IIS Server 7 中运行。我们使用 PHP5 本机 SOAP 调用来访问该服务。

在访问 Visual Studio 实例时，它运行良好，没有任何问题。但是当尝试访问 IIS 7 实例时，我们得到`Uncaught SoapFault exception`如下信息：

```
PHP Fatal error:  SOAP-ERROR: Parsing Schema: can't import schema from 'http://example.com/WCFService/Service.svc?xsd=xsd0' in C:\\xampp\\htdocs\\synergy_client\\test.php on line 2
PHP Fatal error:  Uncaught SoapFault exception: [WSDL] SOAP-ERROR: Parsing Schema: can't import schema from 'http://example.com/WCFService/Service.svc?xsd=xsd0' in C:\\xampp\\htdocs\\synergy_client\\test.php:2\nStack trace:\n#0 C:\\xampp\\htdocs\\synergy_client\\test.php(2): SoapClient->SoapClient('[http://]example.com...')\n#1 {main}\n  thrown in C:\\xampp\\htdocs\\synergy_client\\test.php on line 2 
```

用于访问该服务的 PHP 代码是：

```
<?php
$client = new SoapClient("[http://]example.com/WCFService/Service.svc?wsdl");
$result2 = $client->LoginAdmin(array('username' => "username",'password' => "password")); 
```

IIS 7 实例的 web.conf 是：

```
 <?xml version="1.0"?>
   <configuration>
    <system.web>
    <compilation debug="true" strict="false" explicit="true" targetFramework="4.0">
    <assemblies>
        <add assembly=...../>
      </assemblies>
    </compilation>
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

Visual Studio 实例的 web.conf（按预期运行）：

```
 <?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" strict="false" explicit="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

由于我们是 .Net 新手，因此我们需要您的帮助来解决问题。

附加信息：localhost 被 example.com [http://] 替换为 http://，因为我无法放置链接。

**编辑：** 这是直接在浏览器中访问 wsdl 时生成的脚本。

```
<wsdl:definitions name="Service" targetNamespace="http://tempuri.org/">
<wsdl:types><xsd:schema targetNamespace="http://tempuri.org/Imports">
<xsd:import schemaLocation="http://localhost/WCFService/Service.svc?xsd=xsd0" namespace="http://tempuri.org/"/>
<xsd:import schemaLocation="http://localhost/WCFService/Service.svc?xsd=xsd1" namespace="http://schemas.microsoft.com/2003/10/Serialization/"/>
<xsd:import schemaLocation="http://localhost/WCFService/Service.svc?xsd=xsd2" namespace="http://schemas.microsoft.com/2003/10/Serialization/Arrays"/>
</xsd:schema></wsdl:types><wsdl:message name="IService_LoginAdmin_InputMessage"><wsdl:part name="parameters" element="tns:LoginAdmin"/>
</wsdl:message>
....... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:16:49.203

得到解决方案！谢谢 Luuk 的及时回复和时间来建议解决方案，正如它所说

```
`can't import schema from http://example.com/WCFService/Service.svc?xsd=xsd0' 
```

我试图通过浏览器访问架构链接并得到 404 错误。然后谷歌搜索并找到以下解决方案。

```
Allow access for IIS_IUSERS to the folder 'C:/Windows/Temp' 
```

希望这个答案对某人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:51:07.853

更改架构位置，因为 phpclient 可能不在托管 wcf 服务的同一台服务器上运行。您可以在 serviceMetadata 中更改它：

```
<serviceMetadata httpGetEnabled="true" httpGetUrl="http://example.com/WCFService/Service.svc"  /> 
```

资料来源： [如何更改 WCf 服务的 wsdl 文件中的默认模式位置？](https://stackoverflow.com/questions/3179179/how-to-change-the-default-schemalocation-in-wsdl-file-of-wcf-service)

# c# - C# 控制台应用程序解码 urlencoded 字符串

> ID：14826049
> 
> 赞同：1
> 
> 时间：2013-02-12T05:32:05.287
> 
> 标签：c#, youtube

我正在使用 youtoube 服务获取视频信息（ [http://www.youtube.com/get_video_info?video_id=VideoId](http://www.youtube.com/get_video_info?video_id=VideoId)），它以 :application/x-www-form-urlencoded 的形式返回响应我想用 C# 解码它我尝试过的控制台应用程序：System.Web.HttpUtility.UrlDecode 但它返回相同的字符串。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:16:49.917

对 UrlDecode 的结果使用 System.Web.HttpUtility.ParseQueryString，您将获得一个 NameValueCollection，它可以让您访问解码的数据。

```
string query = System.Web.HttpUtility.UrlDecode(input);
NameValueCollection result = System.Web.HttpUtility.ParseQueryString(query);

foreach (var key in result.AllKeys)
{
    var value = result[key];
    Console.WriteLine("{0}: {1}", key, value);
} 
```

# google-chrome - 您仍然可以在带有 manifest 2.0 的浏览器中创建 Chrome 打包应用程序吗？

> ID：14826050
> 
> 赞同：2
> 
> 时间：2013-02-12T05:32:09.180
> 
> 标签：google-chrome, google-chrome-app

我见过的所有示例都显示应用程序在它们自己的窗口中启动。这对于 chromebook/chrome os 来说可能很棒，但是是否还有在浏览器选项卡中启动的选项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T19:53:46.363

不，没有办法做到这一点。Chrome 打包应用程序不应该在浏览器中运行。但是，您可以使用`window.open`. 但是在发出命令后，您将无法控制该选项卡。

如果您需要在 Chrome 打包应用程序和浏览器之间进行某种集成/控制，您可以创建一个扩展程序并在扩展程序和应用程序之间建立一个通信管道 - 只要两者都在运行，使用`chrome.runtime.sendMessage`API。

请参阅[此示例](https://github.com/GoogleChrome/chrome-app-samples/tree/master/samples/messaging)以获取完全执行此操作的简单代码（两个应用程序和一个扩展程序直接交换消息，无需任何服务器组件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:45:15.630

`chrome.app.window.create`将为应用程序创建一个新窗口。

如果你想操作窗口，你应该切换到 chrome.tabs API 并寻找一个扩展而不是一个应用程序。

# 参考

*   [chrome.tabs](https://developer.chrome.com/extensions/tabs.html)
*   [chrome.app.window](http://developer.chrome.com/trunk/apps/app.window.html)

# java - 从java中的类对象运行任意函数

> ID：14826052
> 
> 赞同：0
> 
> 时间：2013-02-12T05:32:23.143
> 
> 标签：java, function, reflection, closures

我想知道我们是否可以在java中做这样的事情。假设我有一些成员的班级：

```
Class Test {
  // some constructors and members
  public Object func;
} 
```

然后我从其他一些类中定义了一些函数。我想在运行时将这些函数分配给我的 Test 类，以便根据情况， eval(test.func) 可以是任何函数。你会怎么做？不过，在 javascript 中很容易完成，将函数作为字符串传递。

反射或关闭与我想要实现的目标有关吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T05:37:47.133

从[调用-a-method-named-string-at-runtime-in-java-and-c](https://stackoverflow.com/questions/2882948/calling-a-method-named-string-at-runtime-in-java-and-c)

在java中，它可以通过反射api来完成。

看看[Class.getMethod(String methodName, Class... parameterTypes)](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Class.html#getMethod%28java.lang.String,%20java.lang.Class...%29)。

一个完整的示例（带有参数的非静态方法）将是：

```
import java.lang.reflect.*;

public class Test {

    public String methodName(int i) {
        return "Hello World: " + i;
    }

    public static void main(String... args) throws Exception {
        Test t = new Test();
        Method m = Test.class.getMethod("methodName", int.class);
        String returnVal = (String) m.invoke(t, 5);
        System.out.println(returnVal);
    }
} 
```

哪个输出：

> 你好世界：5

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:40:07.810

您可以使用`reflection`它的名称来调用方法，例如

```
Method myMethod = getClass().getMethod("methodName",MyClass.class);
myMethod.invoke(classObj); 
```

如果您想要`eval`执行动态代码，请考虑[JRuby](http://jruby.org/)或[Groovy](http://groovy.codehaus.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T05:41:01.393

答案是**肯定**的，你*可以*这样做，但你应该这样做吗？这种模式适用于具有一流功能的语言，但 java 是[名词王国，](http://steve-yegge.blogspot.com/2006/03/execution-in-kingdom-of-nouns.html)适用不同的模式。

当我必须使用 Java 进行函数式编程时，我会使用[Google 的 Guava 库](http://docs.guava-libraries.googlecode.com/git/javadoc/overview-summary.html)来提供帮助。我可以使用反射并坚持使用纯 Java，但我喜欢 Guava 提供的抽象。Guava 定义了一个[Function 对象](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Function.html)，它基本上是对函数的引用（具有通用输入类型和输出类型）。

```
class Test {
  // some constructors and members
  public Function func;

  @Test
  public void testFunc() {
    assertEquals("abc", func.apply("123"));
  }
} 
```

# android - 使用标签时通知未显示在 Android 中

> ID：14826054
> 
> 赞同：2
> 
> 时间：2013-02-12T05:32:23.820
> 
> 标签：android, notifications

我正在编写一个应用程序，其中我使用两个选项卡，一个用于获取 facebook 朋友列表，第二个选项卡用于获取电话簿朋友列表

在电话簿朋友选项卡中，我还会收到朋友的生日并为此显示提醒，如果我单独尝试，我也可以收到提醒，无需与另一个选项卡组合（即：使用 Facebook 选项卡）

这意味着一旦我将它组合到选项卡中，我就不会收到任何生日通知。

我正在使用以下课程来获取电话簿朋友生日的通知：

```
 public class BirthdayReminder extends ListActivity {
// TODO: call/write message on birthday
// TODO: hideNotificationPref

private final DateFormatSymbols dateSymbols = new DateFormatSymbols();

private Database db;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getListView().setFastScrollEnabled(true);

    this.db = new Database(getContentResolver());

    // debug code
    // Debug.logDatabase(this);

    // start BirthdayBroadcastReceiver if it is activated
    Preferences prefs = Preferences.getInstance(getApplicationContext());
    if (prefs.getActivateService()) {
        BirthdayBroadcastReceiver.restart(getApplicationContext());
    }
}

@Override
protected void onResume() {
    super.onResume();

    updateView();
}

private void updateView() {
    // create new list adapter
    MultiListAdapter listAdapter = new MultiListAdapter();
    List<ListAdapter> adapterList = listAdapter.getListAdapters();

    // load birthday and contact information
    List<Contact> contacts = this.db.getAllContacts();
    List<BirthContact> birthContacts = BirthContactHelper.createBirthContactList(contacts);

    // group all contacts by known and unknown birthday
    SortedSet<BirthContact> knownBirthdays = new TreeSet<BirthContact>(new BirthContactBirthdayComparator());
    SortedSet<BirthContact> unknownBirthdays = new TreeSet<BirthContact>(new BirthContactNameComparator());

    for (BirthContact birthContact : birthContacts) {
        DateOfBirth dateOfBirth = birthContact.getDateOfBirth();

        if (dateOfBirth != null) {
            knownBirthdays.add(birthContact);
        } else {
            unknownBirthdays.add(birthContact);
        }
    }

    Integer currentMonth = null;
    BirthContactAdapter currentBirthContactAdapter = null;
    String[] monthStrs = this.dateSymbols.getMonths();
    for (BirthContact birthContact : knownBirthdays) {
        int month = birthContact.getDateOfBirth().getDate().get(Calendar.MONTH);

        if (currentMonth == null || currentMonth != month) {
            currentMonth = month;

            currentBirthContactAdapter = new BirthContactAdapter(this);
            adapterList.add(new CategoryAdapter(this, monthStrs[currentMonth]));
            adapterList.add(currentBirthContactAdapter);
        }

        currentBirthContactAdapter.add(birthContact);
    }

    adapterList.add(new CategoryAdapter(this, getResources().getString(R.string.unknownBirthdays)));
    adapterList.add(new BirthContactAdapter(this, unknownBirthdays));

    setListAdapter(listAdapter);
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    BirthContact birthContact = (BirthContact) l.getAdapter().getItem(position);

    Intent editorIntent = new Intent(this, BirthdayEditor.class);
    editorIntent.putExtra(BirthdayEditor.CONTACT_ID, birthContact.getContact().getId());
    startActivity(editorIntent);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.layout.menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
    case R.id.preferences:
        startActivity(new Intent(this, PreferenceWindow.class));
        return true;
    case R.id.quit:
        finish();
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
}
   } 
```

我正在使用下面的代码在单击特定选项卡时调用两个不同的类。

但是每当我将其更改为选项卡时，我都没有收到任何通知 TabSample.java：

```
public class TabSample extends TabActivity {

String response;
@SuppressWarnings("unused")
private static JSONArray jsonArray;
public static TabHost mTabHost;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Bundle extras = getIntent().getExtras();
    if (extras == null) {
        return;
    }
    response = getIntent().getStringExtra("FRIENDS");
    try {
        jsonArray = new JSONArray(response);
    } catch (JSONException e) {
        FacebookUtility.displayMessageBox(this,
        this.getString(R.string.json_failed));
    }
    setTabs();

}
private void setTabs() {
    addTab("", R.drawable.tab_menu, com.chr.tatu.sample.friendslist.facebook.FriendsList.class);
    addTab("", R.drawable.tab_contact, com.chr.tatu.sample.friendslist.contacts.BirthdayReminder.class);

} 
```

通知：

```
 public class BirthdayBroadcastReceiver extends BroadcastReceiver {

private static final String TIMED = "timed";

@Override
public void onReceive(Context context, Intent intent) {
    if (intent.getBooleanExtra(TIMED, false)) {
        notifyBirthdays(context);
    }

    start(context);
}

private static PendingIntent createPendingIntent(Context context) {
    Intent intent = new Intent(context, BirthdayBroadcastReceiver.class);
    intent.putExtra(TIMED, true);
    return PendingIntent.getBroadcast(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
}

public static void start(Context context) {
    AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
    PendingIntent pendingIntent = createPendingIntent(context);

    Preferences prefs = Preferences.getInstance(context);
    Time nextUpdateTime = prefs.getUpdateTime();

    Calendar wakeUpCal = Calendar.getInstance();
    wakeUpCal.set(Calendar.HOUR_OF_DAY, nextUpdateTime.getHours());
    wakeUpCal.set(Calendar.MINUTE, nextUpdateTime.getMinutes());
    wakeUpCal.set(Calendar.SECOND, wakeUpCal.getActualMinimum(Calendar.SECOND));
    wakeUpCal.set(Calendar.MILLISECOND, wakeUpCal.getActualMinimum(Calendar.MILLISECOND));

    if (wakeUpCal.before(Calendar.getInstance())) {
        wakeUpCal.add(Calendar.DAY_OF_MONTH, 1);
    }

    alarmManager.set(AlarmManager.RTC_WAKEUP, wakeUpCal.getTimeInMillis(), pendingIntent);
}

public static void stop(Context context) {
    AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
    PendingIntent pendingIntent = createPendingIntent(context);
    alarmManager.cancel(pendingIntent);
    pendingIntent.cancel();
}

public static void restart(Context context) {
    stop(context);
    start(context);
}

private void notifyBirthdays(Context context) {
    Calendar today = CalendarUtils.todaysCalendar();
    Database db = new Database(context.getContentResolver());

    Preferences prefs = Preferences.getInstance(context);
    NotificationManager notificationManager = (NotificationManager) context
            .getSystemService(Context.NOTIFICATION_SERVICE);
    Resources res = context.getResources();

    List<Contact> contacts = db.getAllContacts();

    // calculate next birthdays
    SortedMap<Integer, List<String>> nextBirthdays = new TreeMap<Integer, List<String>>();
    for (Contact contact : contacts) {
        Integer timeSpanToNextBirthday = null;
        for (RawContact rawContact : contact.getRawContacts()) {
            for (DateOfBirth dateOfBirth : rawContact.getDatesOfBirth()) {
                int timeSpan = CalendarUtils.timeSpanToNextBirthday(today, dateOfBirth.getDate());

                if (timeSpanToNextBirthday == null || timeSpanToNextBirthday > timeSpan) {
                    timeSpanToNextBirthday = timeSpan;
                }
            }
        }

        if (timeSpanToNextBirthday != null && timeSpanToNextBirthday <= prefs.getDaysBeforeReminder()) {
            List<String> infoNames = nextBirthdays.get(timeSpanToNextBirthday);
            if (infoNames == null) {
                infoNames = new ArrayList<String>();
                nextBirthdays.put(timeSpanToNextBirthday, infoNames);
            }
            infoNames.add(contact.getName());
        }
    }

    // collect all sentences for the notification
    List<String> notificationTexts = new ArrayList<String>();
    int countBirthdays = 0;
    for (Integer days : nextBirthdays.keySet()) {
        List<String> birthdayList = nextBirthdays.get(days);
        String names = StringUtils.join(birthdayList, ", ").toString();
        notificationTexts.add(getBirthdayText(res, days, names));
        countBirthdays += birthdayList.size();
    }

    // cancel all notifications (clear old once)
    notificationManager.cancelAll();

    // create new notification
    if (notificationTexts.size() > 0) {
        String titleText = String.format(res.getQuantityString(R.plurals.notificationTitle, countBirthdays),
                countBirthdays);
        Intent intent = new Intent(context, BirthdayReminder.class);
        Notification notification = new Notification(R.drawable.balloons2, titleText, System.currentTimeMillis());
        if (countBirthdays > 1) {
            notification.number = countBirthdays;
        }
        PendingIntent pi = PendingIntent.getActivity(context, 0, intent, Intent.FLAG_ACTIVITY_NEW_TASK);
        notification.setLatestEventInfo(context, titleText, StringUtils.join(notificationTexts, ", "), pi);
        notificationManager.notify(0, notification);
    }
}

private String getBirthdayText(Resources res, int days, String names) {
    String text;
    switch (days) {
    case 0:
        text = String.format(res.getString(R.string.notificationText_today), names);
        break;
    case 1:
        text = String.format(res.getString(R.string.notificationText_tomorrow), names);
        break;
    default:
        text = String.format(res.getString(R.string.notificationText_other), days, names);
    }
    return text;
}
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:39:18.840

您是否在 Notifications Service 类中使用了正确的包名称，就像几个月前我做了相同类型的项目一样，我在相同的动作中挣扎，当我遇到愚蠢的错误时：

这是正确的方法：

```
 <receiver android:name="packagename.BirthdayBroadcastReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver> 
```

# sql - 如何在sql中获得多个计数

> ID：14826055
> 
> 赞同：0
> 
> 时间：2013-02-12T05:32:26.440
> 
> 标签：sql, sql-server, sql-server-2008

我的数据库中有一个表，其中有两列：

1.  用户名 ( `nvarchar(max)`)
2.  评分 ( `int`)

现在用户可以在评分中输入最大数字 5 和最小数字 1 现在我要查询用户保存了多少次 1、多少次 2、多少次 3、多少次 4 和多少次 5

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:38:14.067

```
SELECT Rating, COUNT(column_name)
FROM   TABLE
GROUP BY
       Rating 
```

# c# - 在 C# asp.net 中从数据库中设置复选框值

> ID：14826058
> 
> 赞同：1
> 
> 时间：2013-02-12T05:32:36.983
> 
> 标签：c#, asp.net

我有 8 个`checkboxes`。
在`page load`我想编写代码的事件中，
如果`value`是将出现。 如果是它就会出现。`database``"Submitted"``checkbox``checked`
`value``"Not Submitted"``unchecked`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T05:50:09.653

你可以有这样的东西

```
if(!Page.IsPostBack)
{
     var isChecked = dbvalue.ToLower() == "submitted" ? true : false;
     for (var i = 0; i < 8;i++ )
     {
         CheckBox chk = (CheckBox)Form.FindControl("chk" + i);
         if(chk != null) chk.checked = isChecked;
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:37:42.813

您可以像这样检查值

```
if(!Page.IsPostBack)
{
    if(dbvalue=="Submitted")
    {
      chk1.checked=true;
      chk2.checked=true;
      chk3.checked=true;
      chk4.checked=true;
      chk5.checked=true;
      chk6.checked=true;
      chk7.checked=true;
      chk8.checked=true;
    }
    else if(dbvalue=="Not Submitted")
    {
        chk1.checked=false;
      chk2.checked=false;
      chk3.checked=false;
      chk4.checked=false;
      chk5.checked=false;
      chk6.checked=false;
      chk7.checked=false;
      chk8.checked=false;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T06:16:08.820

如果不想在代码隐藏中做任何事情，一种更快更简单的方法是在选择查询上创建一个数据类型位的新列，然后将复选框绑定到该列。0 = 假，1 = 真。示例是：

```
SELECT
CAST((CASE WHEN SubmitColumn = 'Submitted' THEN
    1
ELSE
    0
END) AS BIT) AS chkValue

FROM Table_1 
```

# netsuite - nlobjFile.getValue 在 Suitelet 中不起作用

> ID：14826067
> 
> 赞同：0
> 
> 时间：2013-02-12T05:33:13.907
> 
> 标签：netsuite

我在 NetSuite Suitelet 中使用了以下代码来上传和处理文件：

```
function main(request,response){
    if (request.getMethod() == 'GET'){
        var form = nlapiCreateForm('Item Import Correction', false);    
        var fileField = form.addField('custpage_file', 'file', 'Select CSV');                
        form.addSubmitButton();        
        response.writePage(form);        
    }else{
        try{
            var file = request.getFile("custpage_file");
            var content = file.getValue();//exception
            response.write(content);
        }catch(ex){
            response.write('Exception:'+ex);
        }
    }    
} 
```

`getValue()`当我选择一个文件并提交它时，我在调用`nlobjFile`. 这是响应的输出：

```
Exception:JavaException: java.lang.NullPointerException: charsetName 
```

但是，我将`getValue()`调用替换为同一对象的其他方法，例如`getSize()`or `getType()`，代码工作正常。

我只想解析用户在 Suitelet 中选择的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:04:55.703

getFile() - 返回通过 nlobjForm.addField(name, type, label, sourceOrRadio, tab) 方法添加的文件。添加文件字段类型时，您将设置“文件”的类型参数。

确保您使用 getFile() 引用的字段确实存在于表单中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:04:47.310

调用该`setEncoding()`方法对`nlobjFile`我有用。我使用的是中文编码，所以这是对我有用的代码

```
var file = request.getFile("custpage_file");
file.setEncoding('GB18030');// Chinese
var content = file.getValue();//no exception 
```

# jquery - 如何删除页面中的样式表 CSS 文件并阻止它们被加载？

> ID：14826070
> 
> 赞同：0
> 
> 时间：2013-02-12T05:33:24.693
> 
> 标签：jquery, css

假设我有一个名为 style.css 的 CSS 文件，并且页面中加载了更多。如果样式表的文件名是 style.css（不管路径和 URL），如何使用 jQuery 自动删除它们？

我正在使用它，但它不起作用：

```
$('link[rel=stylesheet][href~="style.css"]').remove(); 
```

我这样做是因为如果某个条件为真（使用 JS 检查），我不希望它们被加载。是否有其他方法可以防止使用 jQuery 将 CSS 文件加载到浏览器？

感谢您的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:37:10.333

我建议使用服务器端解决方案。设置条件以从代码中添加/省略样式标签。即使它来自像 iFrame 这样的第三方，您也可以始终使用 cURL 来获取数据并在将其发送到浏览器之前删除样式标签。

专注于在需要时添加样式，而不是在不需要时删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:47:17.640

看看[yepnope](http://yepnopejs.com/) js

```
yepnope([{
  test : /* boolean(ish) - Something truthy that you want to test             */,
  yep  : /* array (of strings) | string - The things to load if test is true  */,
  nope : /* array (of strings) | string - The things to load if test is false */,
  both : /* array (of strings) | string - Load everytime (sugar)              */,
  load : /* array (of strings) | string - Load everytime (sugar)              */,
  callback : /* function ( testResult, key ) | object { key : fn }            */,
  complete : /* function                                                      */
}, ... ]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T05:41:36.947

`body`为您的标签添加一个类，例如： `condition1`. 制作你所有的 CSS

```
body.condition1 .something {
 width: 100px;
 height: 100px;
} 
```

为您的每个条件执行此操作，然后您可以根据您的条件使用 jquery`add`或类。`remove`

# c# - 从由相同键索引的多个较小字典的元素构建字典

> ID：14826078
> 
> 赞同：0
> 
> 时间：2013-02-12T05:34:13.033
> 
> 标签：c#, performance, linq, dictionary

我有一个 master`Dictionary<int, SolarSystem>`和几个较小`Dictionary<int, JumpsHelperClass>`的 ,`Dictionary<int, KillsHelperClass>`等。我的`SolarSystem`类由这些较小的辅助类`JumpsHelperClass`,`KillsHelperClass`等组成。它们都由相同的`int`键索引。

问题是，这些较小的字典是由异步 api 调用填充的，而我持有 master 的 master 类`Dictionary<int, SolarSystem>`订阅，以便在他们获得新信息以更新其 master 列表时得到通知。但是，不能保证主列表具有较小列表在更新时所做的所有键。事实上，主词典可能完全是空的。

我尝试过这样的方法：

```
 void JumpsRequest_UpdatedResults(object sender, EventArgs e)
    {
        foreach (int item in JumpsRequest.JumpsBySolarSystemID.Keys)
        {
            try
            {
                SolarSystemsByID[item].Jumps = JumpsRequest.JumpsBySolarSystemID[item];
            }
            catch (KeyNotFoundException ex)
            {
                SolarSystemsByID.Add(item, new SolarSystem(JumpsRequest.JumpsBySolarSystemID[item], new HelperClasses.KillsHelperClass()));
            }
        }
    } 
```

但这是非常低效的。每次`JumpsRequest`从 api 获取新信息并更新其`Dictionary<int, JumpsHelperClass>`. 有没有一种方法可以以某种方式合并字典，避免每次添加到 master 时的 try catch 开销。

主词典倾向于在任何给定时间保存大约 4-8k 个元素以供参考。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:34:51.370

如果您担心的主要问题是 try/catch，您可以使用 ContainsKey 在尝试更新之前检查给定密钥是否存在，例如：

```
 void JumpsRequest_UpdatedResults(object sender, EventArgs e)
    {
        foreach (int item in JumpsRequest.JumpsBySolarSystemID.Keys)
        {
            if (SolarSystemsByID.ContainsKey(item))
            {
                SolarSystemsByID[item].Jumps = JumpsRequest.JumpsBySolarSystemID[item];
            }
            else
            {
                SolarSystemsByID.Add(item, new SolarSystem(JumpsRequest.JumpsBySolarSystemID[item], new HelperClasses.KillsHelperClass()));
            }
        }
    } 
```

如果您想避免在字典中进行两次查找（上面的代码会这样做），您还可以执行以下操作：

```
 void JumpsRequest_UpdatedResults(object sender, EventArgs e)
    {
        foreach (int item in JumpsRequest.JumpsBySolarSystemID.Keys)
        {
            SolarSystem system;
            if (SolarSystemsByID.TryGetValue(item, out system))
            {
                system.Jumps = JumpsRequest.JumpsBySolarSystemID[item];
            }
            else
            {
                SolarSystemsByID.Add(item, new SolarSystem(JumpsRequest.JumpsBySolarSystemID[item], new HelperClasses.KillsHelperClass()));
            }
        }
    } 
```

# sql - 转换varchar int时间格式SQL

> ID：14826082
> 
> 赞同：-1
> 
> 时间：2013-02-12T05:34:29.120
> 
> 标签：sql, database

我想编写基本上会导致约会时间的查询。这是我想要的全图。![在此处输入图像描述](../Images/60fe8c555fe0984860d605dbd479a0b6.png)

问题是 FL_CO_APPOINTMENT 表中的 Time 列是 varchar(50) ，而所需的列约会格式是 09:00 - 11:00 01/12/2012 。如何操作 varchar(50) 的时间列以获得所需公式中提到的结果。我有谷歌但没有找到任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:14:05.570

您可以将 varchar 字段转换为日期时间。

尝试这个

```
select  '('+Convert(varchar,convert(datetime,'09:00 AM'),108) + ' - ' +Convert(varchar, dateadd(minute,10,convert(datetime,'09:00 AM')),108) +') '+ Convert(varchar,convert(datetime,'2013-02-04 00:00:00.000'),101) 
```

根据你的表

```
select  '('+Convert(varchar,convert(datetime,[Time]),108) + ' - ' +Convert(varchar, dateadd(minute,[DURATION],convert(datetime,[TIME])),108) +') '+ Convert(varchar,convert(datetime,[AppointmentDate]),101)
from FL_CO_APPOINTMENT JOIN FL_FAULT ON .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:28:10.963

我咨询了前辈，他们建议我这个解决方案。 `substring(CONVERT(varchar,convert(datetime,FL_CO_APPOINTMENT.AppointmentDate)+FL_CO_APPOINTMENT.Time),13,5) +'' - ''+ substring(convert(varchar,DATEADD(HOUR,2,convert(datetime,FL_CO_APPOINTMENT.AppointmentDate)+FL_CO_APPOINTMENT.Time)),13,5) +'' ''+ convert(varchar, FL_CO_APPOINTMENT.AppointmentDate, 11) Appointment`

谢谢大家的回答

# android - 在 EditText 中，单击特定文本子集时会弹出一个对话框

> ID：14826086
> 
> 赞同：6
> 
> 时间：2013-02-12T05:34:51.187
> 
> 标签：android, onclick, android-edittext, touch-event

**找到两个解决方案 - 请参阅选定的答案**

当用户单击 EditText 的某个区域时，我想弹出一个对话框。我使用 onClick 来捕获点击。这部分有效：用户第一次点击 EditText，软键盘弹出，对话框没有。随后的点击会调出键盘，然后是对话框（键盘消失）。

我怀疑这与 EditText 获得焦点有关。

这是一个代码片段：

```
public class PrefixEditText extends EditText implements TextWatcher, OnClickListener
{
  public PrefixEditText (Context context)
  {
    super (context);
    setOnClickListener (this);
  }

  @Override
  public void onClick(View v)
  {
    int selStart = getSelectionStart();
    if (selStart < some_particular_pos)
      bring_up_dialog();
  }
} 
```

重要提示：我不想完全禁用正常的 EditText 行为。我希望用户能够进行区域选择（用于复制和粘贴）。我可能仍然希望它获得焦点（所以当使用物理键盘的人使用该应用程序时，我不会破坏模型）。并且点击设置光标位置就可以了。因此，覆盖 onTouch 并阻止来自 EditText 的所有 onTouch 操作的解决方案对我不起作用。

**更新** 我发现了更多。如果 EditText 获得焦点，则调用 onFocusChange 而不会调用 onClick。如果它已经具有焦点，则调用 onClick 而不会调用 onFocusChange。

其次，可以通过调用隐藏键盘

```
setInputType (InputType.TYPE_NULL); 
```

在 onFocusChange 中这样做是有效的——键盘永远不会出现。在 onClick 中这样做（假设键盘在单击之前被隐藏）显然为时已晚 - 键盘出现然后消失。

下一个尝试的想法是在 onTouch 期间隐藏键盘。但是，我害怕弄乱该代码 - 似乎我发现的任何东西对于未来版本的 EditText 来说都是非常脆弱的。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T05:45:48.367

也许这可以工作

```
 EditText e = new EditText(context);
    e.setOnFocusChangeListener(new OnFocusChangeListener() {

        public void onFocusChange(View v, boolean hasFocus) {
            // TODO Auto-generated method stub
        if(hasFocus)
        {
            //dialogue popup
        }
        }
    }); 
```

或者你可以使用`e.hasFocus();`然后使用`e.setFocusable(false);`使它失去焦点

//////////////我的代码

```
e.setInputType(InputType.TYPE_NULL);

e.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub
        AlertDialog.Builder sa = new Builder(ctx);
        sa.create().setOnDismissListener(new OnDismissListener() {

            public void onDismiss(DialogInterface dialog) {
                // TODO Auto-generated method stub
                e.setInputType(InputType.TYPE_CLASS_TEXT);
            }
        });
        sa.show();
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T05:49:11.057

尝试更改捕获单击 onClick 到 onTouch

```
 this.editText.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_DOWN) {
                                //dialogue popup
            }
            return false;
        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T09:21:30.047

试试这个，如果它可以帮助你。第一次edittext将表现为正常的editttext，并且你可以根据需要显示对话框

```
 EditText editText;
mTim_edittext.setOnFocusChangeListener(new OnFocusChangeListener() {

      public void onFocusChange(View v, boolean hasFocus) {

     if(!hasFocus){

    //statement

 if(condition){

AlertDialog diaBox = Utils.showErrorDialogBox(  "Term in Months Cannot be 0", context);                             
diaBox.show();
              }

            }
        }
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T16:40:05.387

经过大量实验，这里有两个可行的解决方案！我在我的两台设备上对它们进行了测试——Nexus 7 运行 4.2.1，Kyocera C5170 运行 4.0.4。我的首选是解决方案 2。

**解决方案 1**

首先，诀窍是在 EditText 有机会完成它的工作之前确定 onTouch 而不是 onClick 中的光标位置 - 特别是在它弹出键盘之前。

一个额外的评论：一定要在你的清单中为弹出窗口设置 android:windowSoftInputMode="stateHidden" ，否则你会得到键盘和弹出窗口。

这是整个代码：

```
public class ClickText extends EditText implements OnTouchListener
{
  public ClickText (Context context, AttributeSet attrs)
  {
    super (context, attrs);
    setOnTouchListener (this);
  }

  @Override
  public boolean onTouch (View v, MotionEvent event)
  {
    if (event.getActionMasked() == MotionEvent.ACTION_DOWN)
    {
      int line = getLayout().getLineForVertical ((int)event.getY());
      int onTouchCursorPos = getLayout().getOffsetForHorizontal (line, event.getX());
      if (onTouchCursorPos < 10) // or whatever condition
        showPopup (this); // or whatever you want to do
    }
    return false;
  }

  private void showPopup (final EditText text)
  {
    Intent intent = new Intent (getContext(), Popup.class);
    ((Activity)getContext()).startActivity (intent);
  }
} 
```

**解决方案 2**

这个实际上更简单，而且我认为更好——副作用更少。

在这里，诀窍是让 EditText 完成所有的点击处理，然后异步覆盖它。要点是：等待触摸“放开” - MotionEvent.ACTION_UP - 然后不要立即执行您的操作，而是将 Runnable 发布到事件队列并在那里执行您的操作。

整个代码：

```
public class ClickText extends EditText implements OnTouchListener
{
  public ClickText (Context context, AttributeSet attrs)
  {
    super (context, attrs);
    setOnTouchListener (this);
  }

  @Override
  public boolean onTouch (View v, MotionEvent event)
  {
    switch (event.getActionMasked())
    {
      case MotionEvent.ACTION_UP:
      {
        post (new Runnable ()
        {
          // Do this asynch so that EditText can finish setting the selectino.
          @Override
          public void run()
          {
            int selStart = getSelectionStart();
            int selEnd = getSelectionEnd();

            // If selStart is different than selEnd, user has highlighed an area of
            // text; I chose to ignore the click when this happens.
            if (selStart == selEnd)
              if (selStart >= 0 && selStart < 10) // or whatever range you want
                showPopup (this);
          }            
        });

        break;
      }
    }

    return false;
  }

  private void showPopup (final EditText text)
  {
    Intent intent = new Intent (getContext(), Popup.class);
    ((Activity)getContext()).startActivity (intent);
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-17T12:59:01.677

使用下面的代码片段

```
this.editText.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_DOWN) {
                                //dialogue popup
            }
            return false;
        }
    }); 
```

# javascript - Select2：根据标签搜索

> ID：14826087
> 
> 赞同：0
> 
> 时间：2013-02-12T05:34:57.200
> 
> 标签：javascript, jquery

我想要如下图所示的搜索框。

[https://plus.google.com/u/0/photos/114872147731683389826/albums/5843935056831072545?authkey=CKai5M3A-ePvogE](https://plus.google.com/u/0/photos/114872147731683389826/albums/5843935056831072545?authkey=CKai5M3A-ePvogE)

我可以使用 select2 插件吗？如果是，请告诉我如何做到这一点？或者指出我任何其他方式来做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:39:46.000

使用 jquery+msdropdown...[看看这里](http://www.marghoobsuleman.com/jquery-image-dropdown)...[演示](http://www.marghoobsuleman.com/mywork/jcomponents/image-dropdown/samples/index.html)在这里

内置 jquery，易于定制和完全可换肤

# c# - WPF 和 Windows 窗体混合环境问题

> ID：14826088
> 
> 赞同：0
> 
> 时间：2013-02-12T05:34:57.900
> 
> 标签：c#, wpf, winforms

我有一个带有用户控件的 WPF dll。当我在 WPF 项目中使用它作为参考时，它工作得很好。

我需要在混合环境中进行测试。所以我创建了一个 Windows 窗体解决方案，添加了对 WPF dll 和 WindowsFormsIntegration dll 的引用。我在表单中放置了一个 ElementHost。

在后面的代码中，我在 WPF 用户控件命名空间上调用 using，创建了用户控件的一个对象并将其分配为 ElementHost 的子对象。到目前为止，智能感知似乎也可以正常工作。但是，在我构建项目的那一刻，我收到一个构建错误，提示我没有找到我使用的 WPF 命名空间。

所有 dll 都在 .NET 3.5 中构建，客户端解决方案也在 .NET 3.5 中。这是一个已知的问题？这种情况可能会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:32:43.183

您能否按照以下链接检查您是否已引用在 Winform 中运行 WPF 自定义控件所需的所有 dll

[http://msdn.microsoft.com/en-us/library/ms742215.aspx](http://msdn.microsoft.com/en-us/library/ms742215.aspx)。

# java - 通过 BufferedReader 读取文件时，while 循环未退出

> ID：14826089
> 
> 赞同：0
> 
> 时间：2013-02-12T05:35:00.803
> 
> 标签：java, file-io, java-io

在我的应用程序中，我有客户端和服务器程序，只要服务器从客户端获得连接，服务器就会将所有可用的 ID 从 MySQL 表发送到客户端，为此我使用了 while 循环来读取文件的内容。

我尝试了以下代码：

```
while((a=in.read())!=-1) 
```

但是当文件中没有内容来读取while循环时我的问题没有退出，它本身就停在那里。如何退出while循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:41:18.283

`in.read()`将阻塞直到有数据可供读取。请参阅 API 文档[http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#read()](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#read())

> 此方法会一直阻塞，直到输入数据可用、检测到流结束或引发异常。

您可以`in.available()`在执行 in.read() 之前检查是否有任何字节可供读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:40:42.027

您不应该使用`while`循环，而应该使用线程，线程将等待来自套接字的输入，当数据可用时它将读取，然后它将发送/处理在流中找到的输入。使用 while 和等待（阻塞）你的主线程不是一个好主意

# java - 无线电组作为循环页面指示符

> ID：14826099
> 
> 赞同：0
> 
> 时间：2013-02-12T05:35:40.473
> 
> 标签：java, android, android-viewpager, radio-group, viewpagerindicator

我正在尝试将 RadioGroup 用作 CircularPageIndicator。问题在于 RadioGroup.OnCheckedChangeListener。**当onPageSelected**被调用时，它似乎调用它自己。但是我希望它反之亦然，即当我选择一个单选按钮时，它应该根据提供的数组索引的位置更改视图。但是，当我更改单选按钮上的检查时，似乎永远不会调用 onCheckedChange，因此永远不会触发 onCheckedChange。

```
public class MainActivity extends Activity implements RadioGroup.OnCheckedChangeListener, OnPageChangeListener {

    ViewPager mImagePager;
    ImagePagerAdapter mPagerAdapter;
    RadioGroup mPageIndicator;
    boolean swipeChange = false;

    int[] mRadioButtonIds = new int[] { R.id.radio0, R.id.radio1, R.id.radio2, R.id.radio3, R.id.radio4 };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        initComponents();
        mPageIndicator.setOnCheckedChangeListener(this);
        mImagePager.setAdapter(mPagerAdapter);
        mImagePager.setOnPageChangeListener(this);
    }

    /**
     * 
     */
    private void initComponents() {
        mPageIndicator  = (RadioGroup) findViewById(R.id.radioGroup1);
        mImagePager     = (ViewPager) findViewById(R.id.imgPager);
        mPagerAdapter   = new ImagePagerAdapter();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public void onPageScrollStateChanged(int arg0) {

    }

    @Override
    public void onPageScrolled(int arg0, float arg1, int arg2) {

    }

    @Override
    public void onPageSelected(int pSelectedPagePosition) {
        swipeChange = true;
        mPageIndicator.check(mRadioButtonIds[pSelectedPagePosition]);
    }

    @Override
    public void onCheckedChanged(RadioGroup group, int checkedId) {
        if (!swipeChange) {
            int itemPosition = Arrays.asList(mRadioButtonIds).indexOf(checkedId);
            mImagePager.setCurrentItem(itemPosition, true);
            swipeChange = false;
        }
    }

} 
```

注意：我不想使用任何第三方代码/库来创建自定义循环页面指示器。

任何人都可以在这里指出一个错误。RadioGroup 是否有理由不工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T03:13:54.713

我忘了看文档！

[http://developer.android.com/guide/topics/ui/controls/radiobutton.html](http://developer.android.com/guide/topics/ui/controls/radiobutton.html)

# ruby - 试图让 rvm 工作，但运行时出错

> ID：14826104
> 
> 赞同：1
> 
> 时间：2013-02-12T05:36:11.387
> 
> 标签：ruby, terminal, rvm

运行 rvm reinstall 1.9.3 时出现以下错误，我按照一些建议删除了下面的这些文件和文件夹，现在即使在删除 rvm 并使用 curl 重新安装后我也没有它们，我该怎么办？我使用了 rails 安装程序，我认为这就是把整个事情搞砸的原因。我只想从头开始。

```
rm -rf /opt/sm 
rm /etc/rvmrc
rm /etc/profile.d/sm.sh 
```

我在尝试安装 rvm reinstall 1.9.3 时也得到了这个输出

```
$ rvm reinstall 1.9.3
Removing /usr/local/rvm/src/ruby-1.9.3-p385...
Removing /usr/local/rvm/rubies/ruby-1.9.3-p385...
Searching for binary rubies, this might take some time.
No binary rubies available for: osx/10.8/x86_64/ruby-1.9.3-p385.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
Fetching yaml-0.1.4.tar.gz to /usr/local/rvm/archives
Extracting yaml to /usr/local/rvm/src/yaml-0.1.4
Configuring yaml in /usr/local/rvm/src/yaml-0.1.4.
Error running 'env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include ./configure --prefix=/usr/local/rvm/usr --disable-shared', please read /usr/local/rvm/log/ruby-1.9.3-p385/yaml/configure.log
Compiling yaml in /usr/local/rvm/src/yaml-0.1.4.
Error running 'make', please read /usr/local/rvm/log/ruby-1.9.3-p385/yaml/make.log
Installing Ruby from source to: /usr/local/rvm/rubies/ruby-1.9.3-p385, this may take a while depending on your cpu(s)...
ruby-1.9.3-p385 - #downloading ruby-1.9.3-p385, this may take a while depending on your connection...
ruby-1.9.3-p385 - #extracting ruby-1.9.3-p385 to /usr/local/rvm/src/ruby-1.9.3-p385
ruby-1.9.3-p385 - #extracted to /usr/local/rvm/src/ruby-1.9.3-p385
ruby-1.9.3-p385 - #configuring
Error running 'env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include ./configure --disable-install-doc --prefix=/usr/local/rvm/rubies/ruby-1.9.3-p385 --with-opt-dir=/usr/local/rvm/usr --disable-shared', please read /usr/local/rvm/log/ruby-1.9.3-p385/configure.log
There has been an error while running configure. Halting the installation. 
```

请帮助我永远解决这个问题。

制作日志

```
[2013-02-11 21:27:46] make
make: *** No targets specified and no makefile found.  Stop. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:29:23.550

删除文件后，您还需要打开新终端 - 如果没有帮助 - 重新启动计算机

# css - 按钮图像不起作用

> ID：14826105
> 
> 赞同：0
> 
> 时间：2013-02-12T05:36:11.877
> 
> 标签：css

我的代码中附加了一张图片，但在 IE 中没有显示：

```
#upload_button{
background-image:url(images/upload.gif);
width:215px;
height:61px;
background-repeat:no-repeat;
border:none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:37:45.377

IE7 和 IE8 不支持 CSS 属性“background-image”。

您需要将其替换为

“背景：透明网址（）；”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:47:29.537

下面的代码在 IE 6/7/8 中完美运行。

```
#upload_button{
background-image:url(http://www.gravatar.com/avatar/41d7639adf8a1916fab202db8cb16273?s=32&d=identicon&r=PG);
width:215px;
height:61px;
background-repeat:no-repeat;
border:none;

}

  <input type="button" value="button" id="upload_button" /> 
```

# ios - 在没有全屏的情况下在 UIWebView 中播放 Youtube 视频

> ID：14826106
> 
> 赞同：9
> 
> 时间：2013-02-12T05:36:19.283
> 
> 标签：ios, objective-c, youtube

我想在我的应用程序中嵌入一个 Youtube 视频。但通常的技术是，我们在 UIWebView 中嵌入一个 youtube 视频，当用户点击时，它会自动在 MPMoviePlayerController 中启动。但这会全屏启动。如何在不全屏的情况下在 MPMoviePlayerController 中播放此 youtube 视频。我想在屏幕的一半显示这个。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-24T09:55:49.573

有几种方法可以做到这一点。除了设置：

```
videoView.allowsInlineMediaPlayback = YES; 
```

最简单和最肮脏的方法是禁用这样的控件：

## 方法一

> 注意`controls: 0`

```
const player = new YT.Player("player", {
  width: "100%",
  height: "50%",
  videoId: "[your video id]",
  playerVars: {
    controls: 0,
    rel: 0,
    modestbranding: 1,
    html5: 1,
    showinfo: 0,
  },
}); 
```

## 方法二

> HTML 嵌入式 iFrame 代码（注意`&controls=0`和/或`&playsinline=1`）

```
<iframe
  id="ytplayer"
  type="text/html"
  width="100%"
  src="http://www.youtube.com/[your_video_id]?autoplay=1&controls=0&playsinline=1&modestbranding=1&rel=0&showinfo=0&autohide=1&html5=1"
  webkit-playsinline
  frameborder="0"
></iframe>; 
```

您只需添加`&playsinline=1`（或`playsinline:1`在 Javascript 案例中的 next 内`playerVars`）在这种情况下，用户仍然可以全屏播放，但播放器应该在您的视图边框中正常启动。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-11-25T15:20:44.630

我正在使用定义为`YTPlayerView`播放视频的 UIView。

我遵循了本教程：[嵌入视频的 YouTube 教程](https://developers.google.com/youtube/v3/guides/ios_youtube_helper)

我创建了一本字典。然后我将它添加到 videoId 定义（我正在播放的视频）。

**来自 YouTube 教程：**

> 用以下代码替换`loadWithVideoId`: 调用：

**目标-C**

```
 NSDictionary *playerVars = @{
   @"playsinline" : @YES,
 };

[self.playerView loadWithVideoId:@"M7lc1UVf-VE" playerVars:playerVars]; 
```

**斯威夫特 2.1：**

```
 var playerVars = ["playsinline" : 1]

   videoId.loadWithVideoId(["videoId"], playerVars: playerVars) 
```

这将在尝试播放视频时禁用全屏，并且还允许用户根据需要进入全屏。

希望对某人有所帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-12T06:44:25.650

你设置**了 allowedinlinemediaplayback**。但这个功能在 iPad 上。在 iPhone 中不适用。如果您尝试在 iPhone 上使用 uiwebview 播放视频，它将以全屏模式播放。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)

![在此处输入图像描述](../Images/4a3eb5e1a47f75a578f8483228b7772c.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-15T03:41:20.037

将视频包装在html5文件中并添加标签`webkit-playsinline`属性。`<video>`然后设置`webView.allowsInlineMediaPlayback = YES;`这对我来说很完美。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-03T14:58:06.310

似乎仍然没有办法做到这一点`MPMoviePlayerController`，但使用 UIWebView 的最佳解决方法是`YTPlayer`Youtube 开源的。[您可以在Github](https://github.com/youtube/youtube-ios-player-helper)上获取源代码，然后您就可以按照本[教程](https://developers.google.com/youtube/v3/guides/ios_youtube_helper)进行操作。

我只是按照那个教程做的，它工作得很好，而且是相当可定制的。全屏播放`AVFullScreenViewController`是系统标准，因此可以旋转以获得更好的全屏观看效果。

# html - iframe 没有与它的父窗口一起调整大小

> ID：14826110
> 
> 赞同：0
> 
> 时间：2013-02-12T05:36:36.770
> 
> 标签：html, css, iframe, resize

见这里：http: [//jsfiddle.net/5HYve/](http://jsfiddle.net/5HYve/)

```
<div style="position: fixed; top:0; right:0; width:300px; height: 100%; text-align:justify; overflow:hidden;" class="chat-container">
    <iframe id="chat_1" style="width:300px;height:100%;" scrolling="no" frameborder="0" src="http://www.twitch.tv/chat/embed?channel=riotgames&amp;hide_chat=myspace,facebook,twitter&amp;default_chat=jtv"></iframe>
</div> 
```

尝试调整结果象限的大小，您会看到 iframe 中的内容不会根据其父级的大小调整大小。我无权访问 iframe 中的代码。有没有办法做到这一点，或者我是否会受到 iframe 中写得不好的 CSS 的约束？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:32:08.267

看起来他们正在使用 JS 来检测可用的窗口大小。我能想到的最好的办法是在页面调整大小时刷新 iframe 内容。这是 jQuery 的一个片段，可以做到这一点。

```
var 
    iframe = $('#chat_1'),
    url = iframe.attr('src');
$(window).on('resize',function(){
    iframe.attr('src',url);
}) 
```

您可能想要使用去抖动插件[http://benalman.com/projects/jquery-throttle-debounce-plugin/](http://benalman.com/projects/jquery-throttle-debounce-plugin/)来最小化刷新次数。

更新： http: [//jsfiddle.net/TyYj3/5/](http://jsfiddle.net/TyYj3/5/)这是您的示例代码片段。

# oop - 为什么要为每个映射器类创建一个接口？

> ID：14826111
> 
> 赞同：1
> 
> 时间：2013-02-12T05:37:03.213
> 
> 标签：oop, design-patterns

在 MVC 应用程序中，模型被拆分为单独的域和映射器层，为什么要为每个映射器类提供自己的接口？

我现在已经看到了一些示例，其中一些来自受人尊敬的开发人员，例如这个博客的案例，[http://site.svn.dasprids.de/trunk/application/modules/blog/models/](http://site.svn.dasprids.de/trunk/application/modules/blog/models/)

我怀疑这是因为开发人员希望代码被可能拥有自己后端的其他人重用。是这样吗？还是我错过了什么？

请注意，在我看到的示例中，开发人员不一定要为域对象创建接口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:50:36.083

因为接口是类之间的契约（我有点假设你已经知道了）。当一个类期望您传递具有特定接口的对象时，目标是通知您，该类实例期望特定方法可以在所述对象上执行。

我能想到的唯一情况是，当为数据映射器定义接口有意义时，**可能是**使用[工作单元](http://martinfowler.com/eaaCatalog/unitOfWork.html)来管理持久性。但即便如此，简单地注入一个可以创建数据映射器的工厂也会更有意义。

**TL;DR：**有人做得过火了。

> [**PS：**很可能，我对这个完全错误，因为我对这个主题有点偏见 - 我的映射器只包含 3 个（+构造函数）公共方法：`fetch()`和`store()`..`remove()`虽然名称方法名称往往会改变. 我更喜欢从域对象中获取检索条件，如此处[所述](https://stackoverflow.com/a/11943107/727208)。]

# java - 如何将字节 [] 存储到 android/java 中的单个变量中

> ID：14826113
> 
> 赞同：1
> 
> 时间：2013-02-12T05:37:03.590
> 
> 标签：java, android, type-conversion, bytearray

我有一个`String str = "admin:admin"`

我想将其转换为 ASCII。

我试过`str.getByte("US-ASCII");`这是给我返回一个 byte[] 数组（即`[97, 100, 109, 105, 110, 58, 97, 100, 109, 105, 110]`）。我想要单个字符串变量中的 ASCII 值。我怎样才能做到这一点。

简单我想要这个字符串 strASCII = "971001091051105897100109105110"

这可能吗？

我也试过这个

```
StringBuilder builder = new StringBuilder();
    for (int i=0; i<=b.length; i++) {
        builder.append(b);
    }
    String result = builder.toString(); 
```

但现在它给我带来了这样的东西

```
[B@405666e0[B@405666e0[B@405666e0[B@405666e0[B@405666e0[B@405666e0[B@405666e0[B@405666e0[B@405666e0[B@405666e0[B@405666e0[B@405666e0 
```

这是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:38:16.557

尝试简单地循环`StringBuilder`：

```
StringBuilder builder = new StringBuilder();
for (byte b : arr) {
    builder.append(b);
}
String result = builder.toString(); 
```

当然，你可以对字符串连接做同样的事情，但是`StringBuilder`对于很多小的附加，显式使用会更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:02:08.840

使用简单的循环和字符串生成器我们也可以做到这一点。

```
 StringBuilder builder = new StringBuilder();
    for (int i = 0; i < b.length; i++) {
        builder.append(b[i]);
    }
    String result = builder.toString(); 
```

# python - for循环中matplotlib中的多个图例

> ID：14826119
> 
> 赞同：20
> 
> 时间：2013-02-12T05:37:24.640
> 
> 标签：python, matplotlib, legend

以下程序执行良好，但只显示一个图例。如何显示所有四个图例？请看附图。

```
import matplotlib.pyplot as plt
dct = {'list_1' : [1,2,4,3,1],'list_2' : [2,4,5,1,2],'list_3' : [1,1,3,4,6],'list_4' : [1,1,2,2,1]}

xs = [0,1,2,3,4]

for i in [1,2,3,4]:
    plt.plot(xs,dct['list_%s' %i])
    plt.legend(['%s data' %i])

plt.show() 
```

![在此处输入图像描述](../Images/b9df2eb988d7f3a28d55e7c04abcf444.png)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-12T05:50:35.193

```
import matplotlib.pyplot as plt
dct = {'list_1' : [1,2,4,3,1],'list_2' : [2,4,5,1,2],'list_3' : [1,1,3,4,6],'list_4' : [1,1,2,2,1]}

xs = [0,1,2,3,4]

for i in [1,2,3,4]:
    plt.plot(xs,dct['list_%s' %i], label='%s data' % i)

plt.legend()

plt.show() 
```

您正在与`legend`工作方式背道而驰，每次调用它都会破坏当前的图例并用新的图例替换它。如果你只给出`legend`一个字符串列表，它会遍历艺术家（代表要绘制的数据的对象），`axes`直到它用完标签（因此你的第一条曲线被标记为第四条曲线）。如果您`kwarg` `label`在`plot`命令中包含 ，当您`legend`不带任何参数调用时，它将遍历艺术家*并为带有标签的艺术家生成图例条目。

[*] 它会挑选哪些艺术家有一些例外

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-12T05:54:27.223

AFAIK，您需要使用所有参数调用 legend 一次。

```
import matplotlib.pyplot as plt
dct = {'list_1' : [1,2,4,3,1],'list_2' : [2,4,5,1,2],
       'list_3' : [1,1,3,4,6],'list_4' : [1,1,2,2,1]}

xs = [0,1,2,3,4]

lines = []    
for i in range(1,5):
    lines += plt.plot(xs,dct['list_%s' %i], label="{} data".format(i)) 
```

请注意，我在此处包含了标签作为绘图函数的参数之一，以便稍后我们可以调用 get_label()。

```
labels = [l.get_label() for l in lines]
plt.legend(lines, labels)
plt.show() 
```

如果您有单独的轴（例如 twinx），这也将起作用，并且所有图例信息都将通过一个图例出现。顺便说一句，我似乎记得 % 表示法很旧，应该更喜欢 str.format()，但恐怕我不记得为什么了。

# c++ - 使用 Boost 库时的错误

> ID：14826122
> 
> 赞同：1
> 
> 时间：2013-02-12T05:37:31.820
> 
> 标签：c++, boost, centos

//编辑为先前的错误消失了

我已将 ppclinux 库替换为特定库。新错误出现为-

```
libboost_thread-gcc44-mt-1_49.a(thread.o): relocation R_X86_64_32 against `.text' can not be used when making a shared object; recompile with -fPIC
../../ThirdPartyLibs/boost/stage/lib/libboost_thread-gcc44-mt-1_49.a: could not read symbols: Bad value
collect2: ld returned 1 exit status
make: *** [libAFE.so] Error 1 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T04:27:38.037

解决了。

问题是这些库是用 64 位构建的。配置 bjam 命令解决了它。命令如下——

```
bjam toolset=gcc address-model=64 architecture=x86 variant=release link=static,shared --layout=versioned --build-type=complete 
```

# mongodb - MongoDb 中 $ref (DBRef) 的真正目的是什么

> ID：14826132
> 
> 赞同：7
> 
> 时间：2013-02-12T05:38:18.773
> 
> 标签：mongodb

我想在我的应用程序中使用 mongo，当我在考虑设计问题时，我提出了一个问题，那么 DBRef 的优点/目的是什么？

例如：

```
> names = ['apple', 'banana', 'orange', 'peach', 'pineapple']
[ "apple", "banana", "orange", "peach", "pineapple" ]
> for (i=0; i<5; i++) {
... db.fruits.insert({_id:i, name:names[i]})
... }
> db.fruits.find()
{ "_id" : 0, "name" : "apple" }
{ "_id" : 1, "name" : "banana" }
{ "_id" : 2, "name" : "orange" }
{ "_id" : 3, "name" : "peach" }
{ "_id" : 4, "name" : "pineapple" } 
```

我想把这些水果储存在一个篮子里：

```
> db.basket.insert({_id:1, items:[ {$ref:'fruits', $id:1}, {$ref:'fruits', $id:3} ] })
> db.basket.insert({_id:2, items:[{fruit_id: 1}, {fruit_id: 3}]})
> db.basket.find()
{ "_id" : 1, "items" : [ DBRef("fruits", 1), DBRef("fruits", 3) ] }
{ "_id" : 2, "items" : [ { "fruit_id" : 1 }, { "fruit_id" : 3 } ] } 
```

这两种技术之间的真正区别是什么？对我来说，使用 DBRef 看起来你只需要插入更多数据而没有任何优势......如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T08:11:39.307

基本上，DBRef 是一个自我描述的 ObjectID，它是一个存在于所有驱动程序（我认为所有驱动程序）中的客户端助手，它提供了在您的应用程序中轻松获取相关行的能力。

他们不是：

*   加入
*   可级联关系
*   服务器端关系
*   已解决的服务器端

它们也没有在 Map Reduce 中使用，由于分片的复杂性，该功能被取消。

但是，使用这些并不总是很好，因为如果您知道与该行相关的集合与仅存储 ObjectID 相比，它们会占用相当多的空间。不仅如此，而且由于它们的解析方式，如果能够（轻松）形成一个范围以一次性查询相关行，则每个相关记录都需要一个一个延迟加载，因此它们可以增加查询量您也对数据库进行了操作，从而增加了游标。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T06:13:59.300

来自“MongoDB：权威指南”的 DBRefs 不是必需的，存储 MongoID 更加轻量，但 DBRefs 提供了一些有趣的功能，如下所示：

在文档中加载每个 DBRef：

```
var note = db.notes.findOne({"_id":20});
note.references.forEach(function(ref) {
  printjson(db[ref.$ref].findOne({"_id": ref.$id}));
}); 
```

如果引用存储在不同的集合和数据库中，它们也很有帮助，因为 DBRef 包含该信息。如果您使用 MongoID，则必须记住 MongoID 所引用的数据库和集合。

在您的示例中，篮子文档的 items 数组可能包含水果集合中的引用，但也包含蔬菜集合。在这种情况下，DBRef 实际上会很方便。

# ios - 仅一个屏幕的横向模式 - iPhone

> ID：14826137
> 
> 赞同：0
> 
> 时间：2013-02-12T05:38:44.073
> 
> 标签：ios, titanium, orientation, landscape, portrait

我正在使用与 iPhone 兼容的 Titanium 开发应用程序。我在 4 个视图之间导航。第一视图（纵向）--->第二视图（横向）->第三视图（纵向）--->第四视图（纵向）所以我的应用程序中有3个纵向视图，我使用*了Tiapp.xml*并添加

```
<orientations device="iphone">
     <orientation>Ti.UI.PORTRAIT</orientation>
</orientations> 
```

对于第二个视图，我使用了以下代码；

```
var winCheckInLogin = Ti.UI.createWindow({
    backgroundColor : "black",
    orientationModes : [Titanium.UI.LANDSCAPE_LEFT, Titanium.UI.LANDSCAPE_RIGHT],
    navBarHidden : true, // Hides the native title bar
});

winCheckInLogin.addEventListener("open", function() {
    Titanium.UI.orientation = Titanium.UI.LANDSCAPE_LEFT;
}); 
```

但是对于加载时间，在我旋转设备后，第二个视图出现在纵向模式下，它保持为横向。我需要将其加载为横向模式并按原样锁定该屏幕。

请帮我解决这个问题。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:47:51.717

在你的 tiapp.xml

```
<orientations device="iphone">
     <orientation>Ti.UI.PORTRAIT</orientation>
     <orientation>Ti.UI.LANDSCAPE_LEFT</orientation>
     <orientation>Ti.UI.LANDSCAPE_RIGHT</orientation>
</orientations> 
```

对于所有窗口（而不是视图），请务必将该窗口的属性添加为：

```
orientationModes: [Ti.UI.PORTRAIT] 
```

对于仅纵向 Windows，

并且仅用于横向：

```
orientationModes: [Ti.UI.LANDSCAPE_LEFT, Ti.UI.LANDSCAPE_RIGHT] 
```

这应该可以解决您正在寻找的技巧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T04:15:37.313

Gayan，不建议在 iPhone 中为单个应用程序使用不同的方向模式。请阅读[**方向设计原则**](http://docs.appcelerator.com/titanium/latest/#!/guide/Orientation)

> [Apple 的开发者文档](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/UEBestPractices/UEBestPractices.html#//apple_ref/doc/uid/TP40006556-CH20-SW1)说：“人们希望以不同的方向使用您的应用程序，而当您能够满足这种期望时，这是最好的。” 换句话说，不要将处理方向视为麻烦，而是机会。
> 
> Apple 进一步建议，在选择锁定或支持方向时，**应考虑遵循以下原则：**
> 
> 在 iPhone/iPod Touch 上——**不要在单个应用程序中混合窗口的方向；因此，要么锁定整个应用程序的方向，要么对方向变化做出反应。**
> 
> 在 iPhone 上 – 不支持纵向倒置方向，因为这可能会使用户在接听电话时将手机倒置。

但是，如果您想使用不同的方向，只需将以下内容添加到您的 tiApp.xml`<orientations device="iphone">`标签下

```
<orientations device="iphone">
     <orientation>Ti.UI.LANDSCAPE_LEFT</orientation>
     <orientation>Ti.UI.LANDSCAPE_RIGHT</orientation>
</orientations> 
```

这将为您解决问题！

[http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.Window-property-orientationModes](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.Window-property-orientationModes)

# java - String.replaceAll() 不适用于某些字符串

> ID：14826143
> 
> 赞同：19
> 
> 时间：2013-02-12T05:39:10.927
> 
> 标签：java, string, str-replace

我正在编辑一些从 tesseract ocr 获得的电子邮件。

**这是我的代码：**

```
 if (email != null) {
        email = email.replaceAll(" ", "");
        email = email.replaceAll("caneer", "career");
        email = email.replaceAll("canaer", "career");
        email = email.replaceAll("canear", "career");
        email = email.replaceAll("caraer", "career");
        email = email.replaceAll("carear", "career");
        email = email.replace("|", "l");
        email = email.replaceAll("}", "j");
        email = email.replaceAll("j3b", "job");
        email = email.replaceAll("gmaii.com", "gmail.com");
        email = email.replaceAll("hotmaii.com", "hotmail.com");
        email = email.replaceAll(".c0m", ".com");
        email = email.replaceAll(".coin", ".com");
        email = email.replaceAll("consuit", "consult");
    }
    return email; 
```

但是输出不正确。

**输入 ：**

```
amrut=ac.hrworks@g mai|.com 
```

**输出 ：**

```
lalcl.lhlrlwlolrlklsl@lglmlalil|l.lclolml 
```

但是当我在每次替换后将结果分配给一个新字符串时，它工作正常。为什么同一字符串中的连续赋值不起作用？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-12T05:44:31.160

您将在[String.replaceAll() 的 Javadoc 中](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll(java.lang.String%2C%20java.lang.String))注意到第一个参数是[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)。

句号 ( ) 和竖线 ( ) 和花括号 ( `.`) 都有特殊含义。您需要将它们全部转义，例如：`|``}`

```
email = email.replaceAll("gmaii\\.com", "gmail.com"); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-12T05:52:08.890

（这是 Java 吗？）

请注意，在 Java 中，replaceAll 接受正则表达式并且点匹配任何字符。您需要转义点或使用

```
somestring.replaceAll(Pattern.quote("gmail.com"), "replacement"); 
```

还要注意这里的错字：

```
email = emai.replaceAll("canear", "career"); 
```

应该

```
email = email.replaceAll("canear", "career"); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-12T05:47:12.337

您必须`.`通过`\\.`以下方式逃脱：

```
if (email != null) {
    email = email.replaceAll(" ", "");
    email = email.replaceAll("caneer", "career");
    email = email.replaceAll("canaer", "career");
    email = email.replaceAll("canear", "career");
    email = email.replaceAll("caraer", "career");
    email = email.replaceAll("carear", "career");
    email = email.replace("|", "l");
    email = email.replaceAll("}", "j");
    email = email.replaceAll("j3b", "job");
    email = email.replaceAll("gmaii\\.com", "gmail.com");
    email = email.replaceAll("hotmaii\\.com", "hotmail.com");
    email = email.replaceAll("\\.c0m", "com");
    email = email.replaceAll("\\.coin", "com");
    email = email.replaceAll("consuit", "consult");
}
return email; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-12T06:11:21.390

通过意识到`replaceAll()`第一个论点是`regex`你可以减少你的比较

例如，您可以`career`通过以下方式检查单词的可能拼写错误`regex`

`email = email.replaceAll("ca[n|r][e|a][e|a]r", "career"));`

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-02-12T05:47:21.810

您正在使用一些正则表达式字符。

`\`请使用或使用`Pattern.quote`方法逃避它们

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-02-12T05:47:37.960

我想你不知道第一个参数`replaceAll`是正则表达式。

`.`, `|`,`}`的解释可能与您的预期不同。

```
.   Any character (may or may not match line terminators) 
```

[http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)

更好地利用空间

```
\s  A whitespace character: [ \t\n\x0B\f\r] 
```

并以前导转义其他特殊字符`\\`

# javascript - 未捕获的TypeError：无法调用未定义的backbone.js的方法“替换”

> ID：14826149
> 
> 赞同：12
> 
> 时间：2013-02-12T05:40:02.763
> 
> 标签：javascript, html, templates, backbone.js, underscore.js

我正在尝试使用backbone.js 开发一个简单的RSS 应用程序。我正在使用这个backbone.js[教程](http://coenraets.org/blog/2011/12/backbone-js-wine-cellar-tutorial-part-2-crud/)。在定义模板时，我在第 2 行（模板）上收到以下错误。有人能告诉我为什么教程中定义了 tagName: "li" 吗？

> 未捕获的TypeError：无法调用未定义的backbone.js的方法“替换”

**Javascript**

```
window.SourceListView = Backbone.View.extend({
    tagName:"li",
    template: _.template($('#tmpl_sourcelist').html()),

    initialize:function () {
        this.model.bind("change", this.render, this);
        this.model.bind("destroy", this.close, this);
    },

    render:function (eventName) {
        $(this.$el).html(this.template(this.model.toJSON()));
        return this;
    },

    close:function () {
        $(this.el).unbind();
        $(this.el).remove();
    }
}); 
```

**HTML**

```
 <script type="text/template" id="tmpl_sourcelist">
                        <div id="source">
                        <a href='#Source/<%=id%>'<%=name%></a>
                        </div>
                </script> 
```

谢谢

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-02-12T06:02:01.837

你在这里得到你的错误：

```
template: _.template($('#tmpl_sourcelist').html()), 
```

的部分`_.template`内部涉及[`String#replace`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace)在生成已编译模板函数的过程中调用未编译的模板文本。该特定错误通常意味着您实际上是在说：

```
_.template(undefined) 
```

如果`#tmpl_sourcelist`当您说 DOM中没有`$('#tmpl_sourcelist').html()`.

有几个简单的解决方案：

1.  调整您的`<script>`订单，以便您`#tmpl_sourcelist`在尝试加载视图之前到达。
2.  `initialize`在视图而不是视图的“类”定义中创建编译的模板函数：

    ```
    window.SourceListView = Backbone.View.extend({
        tagName:"li",
        initialize:function () {
            this.template = _.template($('#tmpl_sourcelist').html());
            //... 
    ```

就目前`tagName`而言，[精美的手册](http://backbonejs.org/#View-el)是这样说的：

> **埃尔** `view.el`
> 
> [...]`this.el`是从视图的`tagName`、`className`和属性（如果指定`id`）创建的。`attributes`如果不是，则**el**为空`div`。

因此，在您看来：

```
tagName: 'li' 
```

意味着 Backbone 将自动创建一个新`<li>`元素作为您视图的`el`.

# java - Java NIO 文件路径问题 2

> ID：14826151
> 
> 赞同：1
> 
> 时间：2013-02-12T05:40:09.507
> 
> 标签：java, windows, file, permissions, nio

我正在尝试通过 Java 查看文件的所有文件权限。为此，我正在使用 Java 1.7 并使用`Java.nio.Files`

代码是：

```
File f = new File("C:/Users/drusia/Desktop/TestDir/Dell.txt");

PosixFileAttributes attrs = Files.readAttributes(paths,  PosixFileAttributes.class, LinkOption.NOFOLLOW_LINKS);
Set <PosixFilePermission> permissions = attrs.permissions ();
System.out.println (PosixFilePermissions.toString (permissions)); 
```

但我得到一个错误

```
 java.lang.UnsupportedOperationException
    at sun.nio.fs.WindowsFileSystemProvider.readAttributes(Unknown Source)
    at java.nio.file.Files.readAttributes(Unknown Source)
    at org.apache.commons.io.comparator.Prac.main(Prac.java:29) 
```

相同的程序在 Ubuntu 上运行得非常好（当然文件路径更改为现有的 Unix 目录）并且给出了所有详细信息。但这在 Windows 上不起作用。

有人可以帮我弄这个吗？

导入语句是：-

```
 import java.io.File;
      import java.io.IOException;
      import java.nio.file.Files;
      import java.nio.file.LinkOption;
      import java.nio.file.Path;
      import java.nio.file.Paths;
      import java.nio.file.attribute.FileAttribute;
      import java.nio.file.attribute.PosixFileAttributes;
      import java.nio.file.attribute.PosixFilePermission;
      import java.nio.file.attribute.PosixFilePermissions; 
```

# javascript - 使用 javascript 窗口函数的动态 SVG 背景

> ID：14826154
> 
> 赞同：0
> 
> 时间：2013-02-12T05:40:40.470
> 
> 标签：javascript, dynamic, svg, window

我正在尝试将我的背景设置为 SVG 图像。但是，我希望使用 javascript 窗口函数动态构造大小。这是逻辑...

```
<script>
  function getWidth()
  {
    var w=window.innerWidth
    || document.documentElement.clientWidth
    || document.body.clientWidth;

    return w;

  }

  function getHeight()
  {
    var h=window.innerHeight
    || document.documentElement.clientHeight
    || document.body.clientHeight;

    return h;

  }

</script>

<svg xmlns="http://www.w3.org/2000/svg" version="1.1">

**var wid = getWidth();
  <rect width=wid height="100"**
  style="fill:rgb(0,0,255);stroke-width:1;stroke:rgb(0,0,0)"/>
</svg> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T23:35:15.493

CSS3 是解决方案。

```
html, body
{
    height: 100%;
}

body {
    background:url(../Images/books.svg);
    background-size:100% 100%;
    background-repeat:no-repeat;
} 
```

# cancan - 带有复数类名的 CanCan 单例加载

> ID：14826157
> 
> 赞同：1
> 
> 时间：2013-02-12T05:40:54.003
> 
> 标签：cancan

我目前在使用最新版本的 CanCan 时遇到问题。似乎 gem 不会加载具有复数名称的单例资源。

```
class Preferences < ActiveRecord::Base
  self.table_name = 'preferences'
  belongs_to :user
end

class User < ActiveRecord::Base
  has_one :preferences
end

#controller
class PreferencesController < ApplicationController
  before_filter :authenticate_user! #from Devise

  load_and_authorize_resource :singleton => true,
                              :through => :current_user,
                              :through_association => :preferences,
                              :parent => false
end

#ability.rb
class Ability
  include CanCan::Ability

  def initialize(user)
    can [:read, :update], Preferences, :user_id => user.id
  end
end 
```

当我运行控制器规范时，我不断收到这样的错误：

```
Failures:

 1) PreferencesController GET #show should return http success
     Failure/Error: get :show
     NameError:
       uninitialized constant Preference
     # ./spec/controllers/preferences_controller_spec.rb:10:in `block (3 levels) in <top (required)>' 
```

似乎无论`load_resource`我尝试哪种参数组合，如果不恢复手动加载资源，我都无法让我的规范再次通过，如下所示：

```
class PreferencesController < ApplicationController
  before_filter :authenticate_user!

  def show
    @preferences = current_user.preferences
    authorize! :read, @preferences
  end
end 
```

`load_and_authorize_resource`我需要使用一些神奇的参数组合吗？我在另一个单例控制器中使用相同的配置，其中资源属于正常的 Rails 约定（即用户 has_one :profile），所以我知道这在正常情况下已经有效。

# android - 使用 openmax AL 框架播放 mp4 文件

> ID：14826161
> 
> 赞同：3
> 
> 时间：2013-02-12T05:41:05.953
> 
> 标签：android, mp4, openmax

如何使用 openmax AL 框架和 android 缓冲区队列播放 mp4 文件？我想android缓冲区队列只提供了.ts数据

这是代码：

```
XADataLocator_AndroidBufferQueue loc_abq = { XA_DATALOCATOR_ANDROIDBUFFERQUEUE, NB_BUFFERS };

 XADataFormat_MIME format_mime = {
            XA_DATAFORMAT_MIME, XA_ANDROID_MIME_MP2TS, XA_CONTAINERTYPE_MPEG_TS };

 XADataSource dataSrc = {&loc_abq, &format_mime}; 
```

然后创建媒体播放器对象。

但它给了我一个错误，因为无法使用未提供 MPEG-2 TS 数据的 XA_DATALOCATOR_ANDROIDBUFFERQUEUE 数据源创建播放器。

# c++ - 改良版背包

> ID：14826166
> 
> 赞同：0
> 
> 时间：2013-02-12T05:41:26.660
> 
> 标签：c++, algorithm

我知道如何编写 0-1 背包问题的解决方案。但是，我不知道如何更改此代码，以便我们可以选择同一项目的多个副本。因此，对于每个项目 i ，我们有另一个参数 k(i)，它表示 i 存在的副本数。如果有人可以帮助我，我将不胜感激。下面是我在 k(i) = 1 时的代码。查看背包函数以获得自上而下的 dp 解决方案

```
#include<cstring>
#include<cstdio>
#include<iostream>
using namespace std;
int n, g;
int p[1005],w[1005];
int dp[1004][35];// num of object and weight left

int knapsack(int resourcel, int item){
    //if(resourcel < 0) return (1<<31);
    if(item == n) return 0;
    if(resourcel == 0) return 0;
    if(dp[item][resourcel] != -1) return dp[item][resourcel];

    if(resourcel - w[item] < 0){
        dp[item][resourcel]  = knapsack(resourcel,item+1);
        return dp[item][resourcel];
    }
    else{
        int take = knapsack(resourcel - w[item],item+1) + p[item];
        int notTake = knapsack(resourcel,item+1);
        dp[item][resourcel] = take > notTake?take : notTake;
        return dp[item][resourcel];
    }

}
int main(){
    int tc,dummy, sum =0;
    //freopen("in.txt","r",stdin);
    scanf("%d",&tc);
    for(int i = 0 ; i < tc; i++){
        sum  = 0;
        memset(dp,-1,sizeof(dp));
        scanf("%d",&n);
        //cout<<" n is : "<<n<<endl;
        for(int j = 0 ; j < n ;j++){
            scanf("%d %d",&p[j],&w[j]);
            //cout<<" price and val  is : "<<p[j]<<" " << w[j]<<endl;
        }
        scanf("%d",&g);
        //cout<<"g is : "<<g<<endl;
        for(int p = 0 ; p< g;p++){
            scanf("%d",&dummy);
            sum+= knapsack(dummy,0);//wight allowed and item visited
        }
        printf("%d\n",sum);

    }

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:17:20.437

您的背包代码过于复杂。这是另一种方法：

让`dp[i] = maximum profit we can get for weight i`.

```
for i = 1 to numItems do
  for j = knapsackWeight down to items[i].weight do
    dp[j] = max(dp[j], dp[j - items[i].weight] + items[i].profit) 
```

现在，您还需要一个字段`item.copies`。我们可以简单地在中间添加另一个循环来迭代多次。

```
for i = 1 to numItems do
  for k = 1 to items[i].copies do
    for j = knapsackWeight down to items[i].weight do
      dp[j] = max(dp[j], dp[j - items[i].weight] + items[i].profit) 
```

# android - 无需配对的蓝牙文件共享

> ID：14826172
> 
> 赞同：-2
> 
> 时间：2013-02-12T05:42:01.950
> 
> 标签：android, bluetooth

有没有办法通过蓝牙发送文件而无需在android中配对？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:01:26.710

[这是我在这里](http://developer.android.com/guide/topics/connectivity/bluetooth.html#FindingDevices)找到的文档的一部分。RFCOMM 通道在这里用于蓝牙通信。这可能有助于您了解配对是必要的。

> 配对意味着两个设备知道彼此的存在，具有可用于身份验证的共享链接密钥，并且能够相互建立加密连接。连接意味着设备当前共享一个 RFCOMM 通道，并且能够相互传输数据。当前的 Android 蓝牙 API 要求设备在建立 RFCOMM 连接之前进行配对。

再下图，

> 如果这两个设备之前没有配对过，那么 Android 框架会在连接过程中自动向用户显示配对请求通知或对话框。因此，当尝试连接设备时，您的应用程序不需要关心设备是否已配对。您的 RFCOMM 连接尝试将阻塞，直到用户成功配对，或者如果用户拒绝配对，或者配对失败或超时，您的 RFCOMM 连接尝试将失败。

# django - Django错误'unicode'对象没有属性'objects'

> ID：14826183
> 
> 赞同：4
> 
> 时间：2013-02-12T05:43:35.700
> 
> 标签：django, attributeerror

我正在从 [https://docs.djangoproject.com/en/dev/intro/tutorial01/](https://docs.djangoproject.com/en/dev/intro/tutorial01/)编写我的第一个 django 应用程序， 我遇到了 2 个问题。

我的 Models.py 是

从 django.db 导入模型

```
class Poll(models.Model):
    question = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')
    def _unicode_(self):
        return self.question self.question                                                                                                                                                   
class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice_text = models.CharField(max_length=200)
    votes = models.IntegerField(default=0)
     def _unicode_(self):
        return self.question 
```

我的第一个错误是当我这样做的时候

```
 python manage.py shell
 from mysite.myapp.models import Poll,Choice
 p = Poll(question="What Your Name",pub_date"1990-02-04")
 p.save()
 Poll.objects.all()
 [<Poll: Poll object>, <Poll: Poll object>] 
```

为什么它不显示 { 民意调查：怎么了？} 反而

```
 [<Poll: Poll object>, <Poll: Poll object>] 
```

我的第二个问题是当我输入

```
 p = Poll.objects.get(id=1)
 p.question.objects.all() 
```

我得到这个错误

```
 AttributeError: 'unicode' object has no attribute 'objects' 
```

我如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T05:46:59.910

1.  您必须定义`__unicode__`模型的方法，而不是`_unicode_`.此外，您给出的代码 `return self.question self.question`语法无效。

2.  `p`是一个 poll 实例，`p.question`是 CharField 不是 ForeignKey，没有属性对象。`p`有对象，调用`p.objects.all()`效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:52:41.633

1> 它`__unicode__`不是`_unicode_`

```
Poll(models.Model):
    question = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')
    def __unicode__(self):
        return self.question, self.pub_date

class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice_text = models.CharField(max_length=200)
    votes = models.IntegerField(default=0)
    def __unicode__(self):
        return self.choice_text 
```

2> objects 函数是文档实例的属性而不是字段，p.questions 是文档字段，

# java - 从 Java 代码调用 C++ 的问题 (Android)

> ID：14826184
> 
> 赞同：1
> 
> 时间：2013-02-12T05:43:46.330
> 
> 标签：java, android, c++, java-native-interface, unsatisfiedlinkerror

我正在尝试使用 ndk 从 android 代码调用本机函数，但遇到了一些问题。该应用程序将运行一小段时间，然后出现一个错误，指示“已意外停止”。Logcat 显示这是因为 UnsatisfiedLinkError: surfaceCreated。

日志猫：

```
02-12 00:09:33.918: E/AndroidRuntime(25900): FATAL EXCEPTION: GLThread 10
02-12 00:09:33.918: E/AndroidRuntime(25900): java.lang.UnsatisfiedLinkError: surfaceCreated
02-12 00:09:33.918: E/AndroidRuntime(25900):    at com.example.lesnaH.gameengine.GameRenderer.surfaceCreated(Native Method)
02-12 00:09:33.918: E/AndroidRuntime(25900):    at com.example.lesnaH.gameengine.GameRenderer.onSurfaceCreated(GameSurfaceView.java:23)
02-12 00:09:33.918: E/AndroidRuntime(25900):    at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1373)
02-12 00:09:33.918: E/AndroidRuntime(25900):    at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1138) 
```

这是我试图从 Java 调用函数的地方：

```
package com.example.lesnaH.gameengine;

import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;

import android.content.Context;
import android.opengl.GLSurfaceView;

public class GameSurfaceView extends GLSurfaceView {
    private GameRenderer renderer;

    public GameSurfaceView(Context context)
    {
        super(context);
        renderer = new GameRenderer();
        setRenderer(renderer);
    }
}

class GameRenderer implements GLSurfaceView.Renderer {

    public void onSurfaceCreated(GL10 gl, EGLConfig config) {
        surfaceCreated();
    }

    public void onSurfaceChanged(GL10 gl, int width, int height) {
        surfaceChanged(width, height);
    }

    public void onDrawFrame(GL10 gl) {
        drawFrame();
    }

    public native void surfaceCreated();
    public native void surfaceChanged(int w, int h);
    public native void drawFrame();
} 
```

以下是这些函数在 C++ 中的实现：

```
#include <jni.h>
void initializeOpenGL();
void resizeViewport(int newWidth, int newHeight);
void renderFrame();

JNIEXPORT void JNICALL Java_com_example_lesnaH_gameengine_GameRenderer_surfaceCreated(JNIEnv*, jobject)
{
    initializeOpenGL();
}

JNIEXPORT void JNICALL Java_com_example_lesnaH_gameengine_GameRenderer_surfaceChanged(JNIEnv*, jobject, jint width, jint height)
{
    resizeViewport(width, height);
}

JNIEXPORT void JNICALL Java_com_example_lesnaH_gameengine_GameRenderer_drawFrame(JNIEnv*, jobject)
{
    renderFrame();
} 
```

这是我的 Android.mk：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE := gameengine
LOCAL_SRC_FILES := graphics.cc \
                   graphicsExports.cc
LOCAL_LDLIBS := -lGLESv2

include $(BUILD_SHARED_LIBRARY) 
```

如果有人希望我发布其他任何内容/提供更多信息，我很乐意这样做。非常感谢您能给我的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:57:54.480

我想你不见了`System.loadLibrary()`。

# qt - Qt中的父子窗口通信-子窗口打开两次

> ID：14826187
> 
> 赞同：1
> 
> 时间：2013-02-12T05:44:09.890
> 
> 标签：qt, qt-creator

我有两个窗口，一个父母和一个孩子。在父窗口中，我有一个 Next 按钮，它 onClick()'ed 打开子窗口，但在我的情况下，两个子窗口正在打开，这是什么错误！？

这是我的代码：

**.h 文件**

*主窗口.h*

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include <info.h>
#include <QtGui>

namespace Ui {
    class MainWindow;
}

class MainWindow : public QMainWindow {
    Q_OBJECT
public:
    MainWindow(QWidget *parent = 0);
    ~MainWindow();

protected:
    void changeEvent(QEvent *e);

private:
    Ui::MainWindow *ui;
    void setSignals();

private slots:
    void process();
};

#endif // MAINWINDOW_H 
```

*信息.h*

```
#ifndef INFO_H
#define INFO_H

#include <QMainWindow>

namespace Ui {
    class info;
}

class info : public QMainWindow {
    Q_OBJECT
public:
    info(QWidget *parent = 0);
    ~info();

protected:
    void changeEvent(QEvent *e);

private:
    Ui::info *ui;
};

#endif // INFO_H 
```

**.cpp 文件**

*主窗口.cpp*

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include <QtGui/QApplication>

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    setSignals();
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::changeEvent(QEvent *e)
{
    QMainWindow::changeEvent(e);
    switch (e->type()) {
    case QEvent::LanguageChange:
        ui->retranslateUi(this);
        break;
    default:
        break;
    }
}

void MainWindow::setSignals(){
    connect(ui->pushButton,SIGNAL(clicked()),this,SLOT(process()));
    connect(ui->pushButton_2,SIGNAL(clicked()),this,SLOT(close()));
}

void MainWindow::process(){
        info *i;
        i = new info;
        this -> hide();
        i -> show();
} 
```

*信息.cpp*

```
#include "info.h"
#include "ui_info.h"

info::info(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::info)
{
    ui->setupUi(this);
}

info::~info()
{
    delete ui;
}

void info::changeEvent(QEvent *e)
{
    QMainWindow::changeEvent(e);
    switch (e->type()) {
    case QEvent::LanguageChange:
        ui->retranslateUi(this);
        break;
    default:
        break;
    }
} 
```

*主文件*

```
#include <QtGui/QApplication>
#include "mainwindow.h"

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    w.show();
    return a.exec();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:56:16.227

我解决了，问题来了：

在设计器头文件中，即在 ui_mainwindow.h 中，我有：

`QObject::connect(pushButton, SIGNAL(clicked()), MainWindow, SLOT(process())); QObject::connect(pushButton_2, SIGNAL(clicked()), MainWindow, SLOT(close()));`

在源文件中，即 mainwindow.cpp 中`setSignals()`，我再次声明：

```
void MainWindow::setSignals()
{
connect(ui->pushButton,SIGNAL(clicked()),this,SLOT(process()));
connect(ui->pushButton_2,SIGNAL(clicked()),this,SLOT(close()));
} 
```

因此，通过这两个连接，我们接到了两个电话`process()`，我们必须评论任何人才能只显示一个子窗口。就是这样 ：-）

# data-mining - weka中的离散化

> ID：14826188
> 
> 赞同：0
> 
> 时间：2013-02-12T05:44:10.723
> 
> 标签：data-mining, weka

我需要知道何时是在 weka 中进行离散化的合适时间。我有数据集，我需要从该数据中创建训练和测试数据样本。我应该在采样前还是采样后对数值属性进行离散化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:44:39.027

这应该是显而易见的。

只要您**获得与执行的拆分无关的相同结果，**您就可以在之后进行。但是这样做有什么*好处*呢？那就先做预处理吧。

如果您通过四舍五入进行离散化 - 例如浮点数为整数 - 那么您应该没问题（这不受拆分的影响）。但是如果你用分位数来离散化，很明显你可能会搞砸，因为你会对*不同的部分进行不同的离散化*！

假设您将数据离散化为两个不同的值：

```
Input data    Type     Output value
0.9           good     1.05
1.0           good     1.05
1.1           good     1.05
1.2           good     1.05
---
2.1           good     2.20
2.3           good     2.20
2.2           good     2.20
---  SPLIT HERE ---
1.1           bad      1.20
1.2           bad      1.20
1.3           bad      1.20
---
1.9           bad      2.00
2.0           bad      2.00
2.1           bad      2.00 
```

看，通过使用每个值簇的平均值，“好”和“坏”都被离散化为两个离散值。但由于“好”和“坏”的平均值不同，结果属性清楚地揭示了真正的成员资格。检测“坏”的任务变得更加容易。

**永远不要执行单独的预处理。**

# c# - 如何在 WCF asp.net 的另一个项目中引用输入字段？

> ID：14826191
> 
> 赞同：0
> 
> 时间：2013-02-12T05:44:35.610
> 
> 标签：c#, asp.net, wcf, web-services

我在一个解决方案中有 2 个项目。一个叫RentalService，一个叫RentalClient。
我正在尝试使用 RentalClient 输入数据（费率，天数），这些数据将发送到 RentalService 进行处理，并通过将费率乘以天数返回价格。

以下是该服务的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;

namespace RentalService
{
    [ServiceContract]
    public interface ICalcPrice
    {
        [OperationContract]
        CalcPrice CalculatePrice(double price);
    }
    [DataContract]
    public class CalcPrice
    {
        [DataMember]
        public double Rate {get; set;}
        [DataMember]
        public int Days {get; set;}
        [DataMember]
        public double price {get; set;}
    }
} 
```

这是服务代码：我没有完成它，因为我很难过：/

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;
using RentalClient;

namespace RentalService
{
    public class CalcPrice : ICalcPrice
    {
    public txtRate.text 

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:52:09.233

> 我正在尝试使用 RentalClient 输入数据（费率，天数），这些数据将发送到 RentalService 进行处理并通过将费率乘以天数返回价格

您需要定义一个接受`Rate`和`Days`作为参数的方法。在您的接口中定义该方法`ICalcPrice`并在您的类中实现`CalcPrice`

```
[ServiceContract]
public interface ICalcPrice
{
    [OperationContract]
    CalcPrice CalculatePrice(double price);

    [OperationContract]
    CalcPrice CalculatePrice(double price, int days);

} 
```

然后在你的课上：

```
public class CalcPrice : ICalcPrice
{
     public CalcPrice CalculatePrice(double price, int days)
     {
       //your logic
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T09:04:22.933

每次您在服务器端对合同进行更改时，不要忘记在客户端更新您的引用。

![在此处输入图像描述](../Images/89f9edbf2a46477aede14a0f6304e9ef.png)

这将为您构建一个新的 wsdl，其中将包含您的合同的更新。在此之后，您将能够使用带有 2 个参数的 CalculatePrice 方法。

# c# - 在角色控制器下方查找对象

> ID：14826192
> 
> 赞同：2
> 
> 时间：2013-02-12T05:44:44.807
> 
> 标签：c#, object, scripting, unity3d

我有一个字符控制器，它以恒定的速度沿 z 轴移动。我想知道角色控制器下的楼层名称。角色控制器永远不会与地板发生碰撞。这是一个平行运动。我使用 Raycast 在 C# 中找到地板，使用：

```
myray = Camera.main.ScreenPointToRay(Input.mousePosition);
if (Physics.Raycast(myray, myhit, 1000)) {
    Debug.DrawLine (ray.origin, hit.point);
    print(myhit.collider.name);
} 
```

这给出了一个错误。有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:51:25.843

很难说出您的问题是什么，但是将此行为附加到您的角色控制对象将获得光线投射命中的第一个对象的名称。

我正在使用一个倒置的图层蒙版来忽略我将字符控制对象设置为的“播放器”图层。这样光线投射就不会击中地板之前的物体。

```
using UnityEngine;
using System.Collections;

public class GetFloorName : MonoBehaviour 
{
    public string NameOfRaycastHitObject;

    void Update () 
    {
        RaycastHit hitInfo;
        int layerMask = ~(1 << LayerMask.NameToLayer("Player"));
        float distance = 100f;

        if (Physics.Raycast(transform.position, Vector3.down, out hitInfo, distance, layerMask))
        {
            NameOfRaycastHitObject = hitInfo.collider.name;
        }
    }
} 
```

# android - 无法使用 AMR 窄带 H.264 编码从 .net 服务器播放文件

> ID：14826193
> 
> 赞同：0
> 
> 时间：2013-02-12T05:44:45.277
> 
> 标签：android, iphone, amr

1.  AMR 窄带是 Android 2.1 中捕获的视频的默认音频编码
2.  当我将其上传到我的服务器并尝试在我的 Mac 上的 chrome 网络浏览器中查看它或从我的 iPhone 流式传输时，它不会播放（如果我将它本地复制到我的 mac，它会在 quicktime 中播放）

有没有办法让这个玩？我错过了哑剧类型吗？它在 android 浏览器中的 android 手机上本地播放良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T05:19:32.553

服务器很好。原来的问题是 iOS 不支持 AMR 编码（至少在视频中）。

# java - 使用 Java 的带有文本输入字段的可滚动背景图像

> ID：14826197
> 
> 赞同：0
> 
> 时间：2013-02-12T05:45:16.077
> 
> 标签：java, image, swing, background, jpanel

我对Java很陌生，并且已经被困了几个小时试图弄清楚如何执行以下操作......

我想创建一个显示包含输入框的面板（具有可滚动的背景图像）的 Java 程序。想象一个以 800×800 显示的面板，但图像更像是 2000x2000，输入框到处都是。当你滚动时，什么都不应该移动。

如果有人能指出正确的方向或有他们愿意分享的示例代码，我将非常感激。

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:53:50.930

你可以试试 JScrollPane：[JScrollPane](http://docs.oracle.com/javase/7/docs/api/javax/swing/JScrollPane.html)

# javascript - 在“if”条件下检查嵌套对象的更好方法？

> ID：14826198
> 
> 赞同：1
> 
> 时间：2013-02-12T05:45:25.173
> 
> 标签：javascript, coding-style, conditional-statements

考虑我有一个像这样的对象：

```
Obj.Boo.Foo.Zoo 
```

好的，现在如果我想确定它`zoo`有一个值而不是空的，我应该这样做：

```
if(Obj != null && Obj.Boo != null && Obj.Boo.Foo != null && Obj.Boo.Foo.Zoo != null) {
    //blah blah
} 
```

如果在 之后我有更多的嵌套对象`Zoo`，我应该扩展`if`并且代码变得有点格式错误。

有没有更好的方法来处理这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T06:17:58.343

我保留了一个小功能，我会`chainGet(obj, chain, default)`在这样的情况下调用：

```
function chainGet(obj, chain, dflt) {
    if (typeof chain === "string")
        chain = chain.split(".");
    var result = obj;
    for (var i = 0; i < chain.length; i += 1) {
        if (result === undefined)
            break;
        result = result[chain[i]];
    }
    return result === undefined? dflt : result;
} 
```

例如：

```
> chainGet({ foo: 42 }, "foo")
42
> chainGet({ foo: 42 }, "bar", "x")
'x'
> chainGet({ foo: { bar: 42 }}), "foo.bar")
42 
```

这甚至适用于数组：

```
> chainGet([{ foo: [42] }], [0, "foo", 0])
42 
```

当然，长链的点状访问是[一种代码味道](http://en.wikipedia.org/wiki/Law_of_Demeter)，所以在使用它们时应该小心……但有时你必须这样做；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:24:36.600

如果您真的不需要处理这种情况，一个不好的做法是尝试在 try catch 语句中访问 Object

```
try{
    // access Obj.Boo.Foo.Zoo
}
catch{
    // catch a NullReferenceException
} 
```

更好的方法是修改您的 getter 和 setter，以便父对象在您尝试访问子对象及其 null 时抛出合适的异常或处理此异常。在这种情况下，检查第一个对象就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-29T14:50:37.213

它可以在不使用函数的情况下实现。捷径方法可能是 -

```
if(((((Obj || {}).Boo || {}).Foo || {}).Zoo || {}) != {}) {
    // Zoo has a value and not empty
} 
```

或者 ES6 的方式——

```
const checkNull = (keys, Object) =>
  keys.reduce((Obj, o) =>
    (Obj && Obj[o]) ? Obj[o] : null, Object)

console.log(checkNull(['Boo', 'Foo', Zoo], Obj))
// [Value of Zoo]
console.log(checkNull(['Boo', 'Foo1', Zoo], Obj))
// null 
```

# powershell - 通过搜索用户的电子邮件地址来显示用户所属的组 - Quest Powershell Active Roles Management Shell

> ID：14826200
> 
> 赞同：0
> 
> 时间：2013-02-12T05:45:34.667
> 
> 标签：powershell, active-directory

这是我目前正在使用的命令：

> $user = Get-QADUser -email user@domain.com -enabled ; $user.memberOf | 获取-QADGroup | findstr 绿色

“绿色”只是组名上的一个识别标记。

有时这个命令工作得很好。它根据输入的电子邮件地址向我显示与用户所属的“绿色”匹配的所有组。

然而，有时它不会......我明白了：

> Get-QADGroup：无法验证参数“身份”上的参数。参数为 null 或空。提供一个不为 null 或空的参数，然后再次尝试该命令。在 line:1 char:97 + $user = Get-QADUser -email user@domain.com -enabled ；$user.memberOf | 获取 QAD 组 <<<< | findstr Green + CategoryInfo : InvalidData: (:) [Get-QADGroup], ParameterBindingValidationException + FullyQualifiedErrorId : ParameterArgumentValidationError,Quest.ActiveRoles.ArsPowerShellSnapIn.Powershell.Cmdlet s.GetGroupCmdlet

数周以来，我一直在谷歌上搜索并尝试对此进行修改和变化，但没有运气。我希望有人可以解释不一致的行为并提供更好或更一致的工作命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:22:42.333

试试这个：

```
Get-QADMemberOf -Identity user@domain.com -Name Green 
```

# java - 如何使用数据库进行用户会话？

> ID：14826202
> 
> 赞同：0
> 
> 时间：2013-02-12T05:45:37.583
> 
> 标签：java

客户要求我使用会话保存在数据库中，而不是在服务器中。客户端的服务器是 4 台 WAS 服务器、12 台 DB 服务器和 8 台文件服务器。它们都是独立的服务器，位于不同的位置。由于用户可以从 A WAS 服务器跳转到 B WAS 服务器，因此他们希望将会话保存在数据库中，因为这样更容易获取用户信息。但是我完全不知道如何获取会话并将其保存到数据库中。

有什么办法吗？有参考吗？有什么书吗？我真的需要帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:12:36.403

您可以为每个用户设置一个布尔属性，例如 'isLoggedIn' 。使用过滤器或拦截器，对于每个请求，您都可以检查他是否已经登录。但是，此过程会使您的应用程序变慢。有可用的缓存支持集群，如 Hazelcast 缓存。因此，您可以将所有 WAS 服务器指向一个公共 hazelcast 缓存并将用户登录信息存储在缓存中，而不是数据库中，这将大大提高您的应用程序的速度。

# android - 在 Android 中通过 JavaMail API 在没有用户干预（无意图）的情况下发送电子邮件

> ID：14826204
> 
> 赞同：1
> 
> 时间：2013-02-12T05:45:44.370
> 
> 标签：android, jakarta-mail

为此，我使用了以下代码：

```
package moin.sms;

import java.util.Date; 
import java.util.Properties; 
import javax.activation.CommandMap; 
import javax.activation.DataHandler; 
import javax.activation.DataSource; 
import javax.activation.FileDataSource; 
import javax.activation.MailcapCommandMap; 
import javax.mail.BodyPart; 
import javax.mail.Multipart; 
import javax.mail.PasswordAuthentication; 
import javax.mail.Session; 
import javax.mail.Transport; 
import javax.mail.internet.InternetAddress; 
import javax.mail.internet.MimeBodyPart; 
import javax.mail.internet.MimeMessage; 
import javax.mail.internet.MimeMultipart; 

import android.os.Bundle;
import android.util.Log;
import android.widget.Button;

public class Mail extends javax.mail.Authenticator { 
  public String _user; 
  public String _pass; 

  private String[] _to; 
  private String _from; 

  private String _port; 
  private String _sport; 

  private String _host; 

  private String _subject; 
  private String _body; 

  private boolean _auth; 

  private boolean _debuggable; 

  private Multipart _multipart; 

  public void Mail() { 
    _host = "smtp.gmail.com"; // default smtp server 
    _port = "465"; // default smtp port 
    _sport = "465"; // default socketfactory port 

    _user = ""; // username 
    _pass = ""; // password 
    _from = ""; // email sent from 
    _subject = ""; // email subject 
    _body = ""; // email body 

    _debuggable = false; // debug mode on or off - default off 
    _auth = true; // smtp authentication - default on 

    _multipart = new MimeMultipart(); 

    // There is something wrong with MailCap, javamail can not find a handler for the multipart/mixed part, so this bit needs to be added. 
    MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap(); 
    mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html"); 
    mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml"); 
    mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain"); 
    mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed"); 
    mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822"); 
    CommandMap.setDefaultCommandMap(mc); 
  } 

  public boolean send() throws Exception { 
    Properties props = _setProperties(); 

    if(!_user.equals("") && !_pass.equals("") && _to.length > 0 && !_from.equals("") && !_subject.equals("") && !_body.equals("")) { 
      Session session = Session.getInstance(props, this); 

      MimeMessage msg = new MimeMessage(session); 

      msg.setFrom(new InternetAddress(_from)); 

      InternetAddress[] addressTo = new InternetAddress[_to.length]; 
      for (int i = 0; i < _to.length; i++) { 
        addressTo[i] = new InternetAddress(_to[i]); 
      } 
        msg.setRecipients(MimeMessage.RecipientType.TO, addressTo); 

      msg.setSubject(_subject); 
      msg.setSentDate(new Date()); 

      // setup message body 
      BodyPart messageBodyPart = new MimeBodyPart(); 
      messageBodyPart.setText(_body); 
      _multipart.addBodyPart(messageBodyPart); 

      // Put parts in message 
      msg.setContent(_multipart); 

      // send email 
      Transport.send(msg); 

      return true; 
    } else { 
      return false; 
    } 
  } 

  public void addAttachment(String filename) throws Exception { 
    BodyPart messageBodyPart = new MimeBodyPart(); 
    DataSource source = new FileDataSource(filename); 
    messageBodyPart.setDataHandler(new DataHandler(source)); 
    messageBodyPart.setFileName(filename); 

    _multipart.addBodyPart(messageBodyPart); 
  } 

  @Override 
  public PasswordAuthentication getPasswordAuthentication() { 
    return new PasswordAuthentication(_user, _pass); 
  } 

  private Properties _setProperties() { 
    Properties props = new Properties(); 

    props.put("mail.smtp.host", _host); 

    if(_debuggable) { 
      props.put("mail.debug", "true"); 
    } 

    if(_auth) { 
      props.put("mail.smtp.auth", "true"); 
    } 

    props.put("mail.smtp.port", _port); 
    props.put("mail.smtp.socketFactory.port", _sport); 
    props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory"); 
    props.put("mail.smtp.socketFactory.fallback", "false"); 

    return props; 
  } 

  // the getters and setters 
  public String getBody() { 
    return _body; 
  } 

  public void setBody(String _body) { 
    this._body = _body; 
  } 
  public String[] getTo(){
      return _to;
  }

  public void setTo(String[] _to){
      this._to = _to;
  }

  public String getFrom(){
      return _from;
  }

  public void setFrom(String _from){
      this._from=_from;
  }

  public String getSubject(){
      return _subject;
  }

  public void setSubject(String _subject){
      this._subject=_subject;
  }

} 
```

调用它的活动如下：

```
package moin.sms;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class GmailSendActivity extends Activity {

public void onCreate(Bundle icicle) { 
        super.onCreate(icicle); 
        setContentView(R.layout.main); 
        final TextView t1 = (TextView) findViewById(R.id.textView1);
        Button addImage = (Button) findViewById(R.id.button1); 
        addImage.setOnClickListener(new View.OnClickListener() { 
          public void onClick(View view) { 
            Mail m = new Mail();
            m._user = "**My Gmail ID**"; // username 
            m._pass = "**PASSWORD**"; // password

            String[] toArr = {"cistoran@live.com", "ivan017@gmail.com"}; 
            m.setTo(toArr); 
            m.setFrom("moin18@gmail.com"); 
            m.setSubject("This is an email sent using my Mail JavaMail wrapper from an Android device."); 
            m.setBody("Email body."); 

            try { 
              m.addAttachment("/sdcard/filelocation"); 

              if(m.send()) { 
                Toast.makeText(GmailSendActivity.this, "Email was sent successfully.", Toast.LENGTH_LONG).show(); 
              } else { 
                Toast.makeText(GmailSendActivity.this, "Email was not sent.", Toast.LENGTH_LONG).show(); 
              } 
            } catch(Exception e) { 
              //Toast.makeText(MailApp.this, "There was a problem sending the email.", Toast.LENGTH_LONG).show(); 
              Log.e("MailApp", "Could not send email", e); 
            } 
          t1.setText("to :"+m.getTo().toString()+"* from: "+m.getFrom()+"* Sub: "+m.getSubject()+"* Messg: "+m.getBody());  
          } 

        }); 
      } 

} 
```

我已经添加了必要的罐子。IE

**(1) 邮件.jar**

**(2) 激活.jar**

**(3) 附加.jar**

但是当我在 Eclipse IDE 中运行它时，LogCat 上会显示以下错误消息：

```
02-10 11:20:06.682: E/MailApp(435): Could not send email
02-10 11:20:06.682: E/MailApp(435): java.lang.NullPointerException
02-10 11:20:06.682: E/MailApp(435): at moin.sms.Mail.addAttachment(Mail.java:117)
02-10 11:20:06.682: E/MailApp(435): at moin.sms.GmailSendActivity$1.onClick(GmailSendActivity.java:34)
02-10 11:20:06.682: E/MailApp(435): at android.view.View.performClick(View.java:2408)
02-10 11:20:06.682: E/MailApp(435): at android.view.View$PerformClick.run(View.java:8816)
02-10 11:20:06.682: E/MailApp(435): at android.os.Handler.handleCallback(Handler.java:587)
02-10 11:20:06.682: E/MailApp(435): at android.os.Handler.dispatchMessage(Handler.java:92)
02-10 11:20:06.682: E/MailApp(435): at android.os.Looper.loop(Looper.java:123)
02-10 11:20:06.682: E/MailApp(435): at android.app.ActivityThread.main(ActivityThread.java:4627)
02-10 11:20:06.682: E/MailApp(435): at java.lang.reflect.Method.invokeNative(Native Method)
02-10 11:20:06.682: E/MailApp(435): at java.lang.reflect.Method.invoke(Method.java:521)
02-10 11:20:06.682: E/MailApp(435): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-10 11:20:06.682: E/MailApp(435): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-10 11:20:06.682: E/MailApp(435): at dalvik.system.NativeStart.main(Native Method) 
```

它甚至没有在移动设备上运行，我还在清单文件中添加了 INTERNET 权限。谁能告诉这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:59:41.977

我从您的`LogCat`问题中了解到的很多信息都在代码片段中：-

```
m.addAttachment("/sdcard/filelocation"); 
```

您到底想在邮件中附加什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:32:54.567

你应该试试`m.addAttachment("/mnt/sdcard/filelocation");`

甚至更好：

```
Environment.getExternalStorageDirectory().getAbsolutePath() + File.separator + "myaudio.3gpp" 
```

另外，检查您是否在清单中添加了以下权限：

```
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
```

# db2 - db2 中无法识别保存点

> ID：14826205
> 
> 赞同：0
> 
> 时间：2013-02-12T05:45:46.320
> 
> 标签：db2, savepoints

我有以下查询 -

```
SAVEPOINT A ON ROLLBACK RETAIN CURSORS;

select max(id) from testdb.table1;

ROLLBACK TO SAVEPOINT A;

commit 
```

我收到以下错误

```
ROLLBACK TO SAVEPOINT A
DB21034E  The command was processed as an SQL statement because it was not a 
valid Command Line Processor command.  During SQL processing it returned:
SQL0880N  SAVEPOINT "A" does not exist or is invalid in this context.  
SQLSTATE=3B001 
```

我是 DB2 新手，我没有得到任何启动事务类型语句，但是存在提交。

如何解决此错误？

**解析度**

我得到了关注-

```
update command options using c OFF; 

SAVEPOINT A ON ROLLBACK RETAIN CURSORS;

select max(id) from testdb.table1;

ROLLBACK TO SAVEPOINT A;

commit;

update command options using c ON ; 
```

它在我的上下文中运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:56:01.493

```
update command options using c OFF; 

SAVEPOINT A ON ROLLBACK RETAIN CURSORS;

select max(id) from testdb.table1;

ROLLBACK TO SAVEPOINT A;

commit;

update command options using c ON ; 
```

# android - 在 Pandaboard 上启动 Android 4.2.1

> ID：14826208
> 
> 赞同：1
> 
> 时间：2013-02-12T05:45:55.720
> 
> 标签：android, boot, android-4.2-jelly-bean, pandaboard

我正在尝试`Android 4.2.1`启动`PandaBoard`。我从[这里](http://blog.sola-dolphin-1.net/archives/4334161.html)得到了资源。虽然在构建时没有问题，但在启动时它会崩溃。

我在 Panda4430 和 Panda4460 板上都试过了。

当我在 Panda4430 中尝试时，它没有进入内核启动阶段。

控制台输出是，

```
3725412 bytes read
## Booting image at 80000000 ...
   Image Name:   Linux-3.0.31-g4a094a5-dirty
   Image Type:   ARM Linux Kernel Image (uncompressed)
   Data Size:    3725348 Bytes =  3.6 MB
   Load Address: 80008000
   Entry Point:  80008000
   Verifying Checksum ... OK
OK
I2C read: I/O error

Starting kernel ...

Uncompressing Linux... done, booting the kernel. 
```

我为 Panda4430 使用了以下引导参数：

```
setenv bootargs androidboot.console=ttyO2 console=ttyO2,115200n8 mem=456M@0x80000000 mem=512M@0xA0000000 root=/dev/mmcblk0p2 rw rootdelay=2 init=/init vram="32M" omapf0
setenv bootcmd 'mmcinit 0; fatload mmc 0 0x80000000 uImage;bootm 80000000'
boot. 
```

当我在 Panda4460 中尝试时，它崩溃了。

以下是使用logcat获取的日志。

```
shell@android:/ $
shell@android:/ $ logcat
--------- beginning of /dev/log/main
E/uim-sysfs(   91): uim: Inside main
E/uim-sysfs(   91): uim:ST built into the kernel ?
E/uim-sysfs(   91): uim:BT driver module un-available...
E/uim-sysfs(   91): uim:BT driver built into the kernel ?
E/uim-sysfs(   91): uim:FM driver module un-available...
E/uim-sysfs(   91): uim:FM driver built into the kernel ?
E/uim-sysfs(   91): uim:GPS driver module un-available...
E/uim-sysfs(   91): uim:GPS driver built into the kernel ?
E/uim-sysfs(   91): uim:FM V4L2 driver module un-available...
E/uim-sysfs(   91): uim:FM V4L2 driver built into the kernel ?
E/uim-sysfs(   91): uim:found bluetooth rfkill entry @ 0
E/uim-sysfs(   91):
E/uim-sysfs(   91): uim:changed permissions for /sys/class/rfkill/rfkill0/state(0)
E/uim-sysfs(   91):
I/installd(   98): installd firing up
E/cutils  (   98): Failed to read /data/.layout_version: No such file or directory
E/installd(   98): Could not create directories; exiting.
E/keystore(   99): chdir: /data/misc/keystore: No such file or directory
--------- beginning of /dev/log/system
I/Vold    (   88): Vold 2.1 (the revenge) firing up
E/Vold    (   88): Error reading configuration (No such file or directory)... continuing anyways
I/DEBUG   (   93): debuggerd: Feb  8 2013 18:31:46
I/Netd    (   92): Netd 1.0 starting
W/InterfaceController(   92): Warning (Cannot load library: load_library(linker.cpp:745): library "/system/lib/libnetcmdiface.so" not found) while opening the net interface coy
I/SurfaceFlinger(   94): SurfaceFlinger is starting
I/SurfaceFlinger(   94): SurfaceFlinger's main thread ready to run. Initializing graphics H/W...
E/libEGL  (   94): eglGetDisplay:121 error 300c (EGL_BAD_PARAMETER)
E/libEGL  (   94): eglInitialize:137 error 3008 (EGL_BAD_DISPLAY)
I/gralloc (   94): using (fd=14)
I/gralloc (   94): id           = omapfb
I/gralloc (   94): xres         = 1280 px
I/gralloc (   94): yres         = 720 px
I/gralloc (   94): xres_virtual = 1280 px
I/gralloc (   94): yres_virtual = 1440 px
I/gralloc (   94): bpp          = 32
I/gralloc (   94): r            = 16:8
I/gralloc (   94): g            =  8:8
I/gralloc (   94): b            =  0:8
I/gralloc (   94): width        = 203 mm (160.157639 dpi)
I/gralloc (   94): height       = 114 mm (160.421051 dpi)
I/gralloc (   94): refresh rate = 73.12 Hz
E/ti_hwc  (   94): Composer HAL failed to load compatible Graphics HAL
E/SurfaceFlinger(   94): composer device failed to initialize (Invalid argument)
W/SurfaceFlinger(   94): getting VSYNC period from fb HAL: 13676897
E/libEGL  (   94): validate_display:245 error 3008 (EGL_BAD_DISPLAY)
F/libc    (   94): Fatal signal 11 (SIGSEGV) at 0xdeadbaad (code=1), thread 123 (SurfaceFlinger)
I/DEBUG   (   93): failed to open tombstone file '/data/tombstones/tombstone_00': No such file or directory
I/mediaserver(   97): ServiceManager: 0x40de0e30
I/AudioFlinger(   97): Using default 3000 mSec as standby time.
I/CameraService(   97): CameraService started (pid=97)
I/AudioPolicyManagerBase(   97): loadAudioPolicyConfig() loaded /system/etc/audio_policy.conf
I/AudioFlinger(   97): loadHwModule() Loaded primary audio interface from OMAP4 audio HW HAL (audio) handle 1
I/AudioFlinger(   97): HAL output buffer size 1920 frames, normal mix buffer size 1920 frames
I/AudioMixer(   97): found effect "Multichannel Downmix To Stereo" from The Android Open Source Project
I/AudioFlinger(   97): Using module 1 has the primary audio interface
I/AudioFlinger(   97): AudioFlinger's thread 0x40de9fb8 ready to run
W/AudioFlinger(   97): Thread AudioOut_2 cannot connect to the power manager service
W/AudioFlinger(   97): Thread AudioOut_2 cannot connect to the power manager service
I/audio_a2dp_hw(   97): adev_open:  adev_open in A2dp_hw module
I/AudioFlinger(   97): loadHwModule() Loaded a2dp audio interface from A2DP Audio HW HAL (audio) handle 3
I/AudioPolicyService(   97): Loaded audio policy from LEGACY Audio Policy HAL (audio_policy)
D/AndroidRuntime(  163):
D/AndroidRuntime(  163): >>>>>> AndroidRuntime START com.android.internal.os.ZygoteInit <<<<<<
D/AndroidRuntime(  163): CheckJNI is OFF
D/MDnsDS  (   92): MDnsSdListener::Hander starting up
D/MDnsDS  (   92): MDnsSdListener starting to monitor
D/MDnsDS  (   92): Going to poll with pollCount 1
E/dalvikvm(  163): Could not stat dex cache directory '/data/dalvik-cache': No such file or directory
I/dalvikvm(  163): Unable to open or create cache for /system/framework/core.jar (/data/dalvik-cache/system@framework@core.jar@classes.dex)
D/dalvikvm(  163): Unable to process classpath element '/system/framework/core.jar'
E/dalvikvm(  163): Could not stat dex cache directory '/data/dalvik-cache': No such file or directory
I/dalvikvm(  163): Unable to open or create cache for /system/framework/core-junit.jar (/data/dalvik-cache/system@framework@core-junit.jar@classes.dex)
D/dalvikvm(  163): Unable to process classpath element '/system/framework/core-junit.jar'
E/dalvikvm(  163): Could not stat dex cache directory '/data/dalvik-cache': No such file or directory
I/dalvikvm(  163): Unable to open or create cache for /system/framework/bouncycastle.jar (/data/dalvik-cache/system@framework@bouncycastle.jar@classes.dex)
D/dalvikvm(  163): Unable to process classpath element '/system/framework/bouncycastle.jar'
E/dalvikvm(  163): Could not stat dex cache directory '/data/dalvik-cache': No such file or directory
I/dalvikvm(  163): Unable to open or create cache for /system/framework/ext.jar (/data/dalvik-cache/system@framework@ext.jar@classes.dex)
D/dalvikvm(  163): Unable to process classpath element '/system/framework/ext.jar'
E/dalvikvm(  163): Could not stat dex cache directory '/data/dalvik-cache': No such file or directory
I/dalvikvm(  163): Unable to open or create cache for /system/framework/framework.jar (/data/dalvik-cache/system@framework@framework.jar@classes.dex)
D/dalvikvm(  163): Unable to process classpath element '/system/framework/framework.jar'
E/dalvikvm(  163): Could not stat dex cache directory '/data/dalvik-cache': No such file or directory
I/dalvikvm(  163): Unable to open or create cache for /system/framework/telephony-common.jar (/data/dalvik-cache/system@framework@telephony-common.jar@classes.dex)
D/dalvikvm(  163): Unable to process classpath element '/system/framework/telephony-common.jar'
E/dalvikvm(  163): Could not stat dex cache directory '/data/dalvik-cache': No such file or directory
I/dalvikvm(  163): Unable to open or create cache for /system/framework/mms-common.jar (/data/dalvik-cache/system@framework@mms-common.jar@classes.dex)
D/dalvikvm(  163): Unable to process classpath element '/system/framework/mms-common.jar'
E/dalvikvm(  163): Could not stat dex cache directory '/data/dalvik-cache': No such file or directory
I/dalvikvm(  163): Unable to open or create cache for /system/framework/android.policy[   86.676879] init: untracked pid 995 exited
.jar (/data/dalvik-cache/system@framework@android.policy.jar@classes.dex)
D/dalvikvm(  163): Unable to process classpath element '/system/framework/android.policy.jar'
E/dalvikvm(  163): Could not stat dex cache directory '/data/dalvik-cache': No such file or directory
I/dalvikvm(  163): Unable to open or create cache for /system/framework/services.jar (/data/dalvik-cache/system@framework@services.jar@classes.dex)
D/dalvikvm(  163): Unable to process classpath element '/system/framework/services.jar'
E/dalvikvm(  163): Could not stat dex cache directory '/data/dalvik-cache': No such file or directory
I/dalvikvm(  163): Unable to open or create cache for /system/framework/apache-xml.jar (/data/dalvik-cache/system@framework@apache-xml.jar@classes.dex)
D/dalvikvm(  163): Unable to process classpath element '/system/framework/apache-xml.jar'
E/dalvikvm(  163): No valid entries found in bootclasspath '/system/framework/core.jar:/system/framework/core-junit.jar:/system/framework/bouncycastle.jar:/system/framework/ex'
E/dalvikvm(  163): VM aborting
F/libc    (  163): Fatal signal 11 (SIGSEGV) at 0xdeadd00d (code=1), thread 163 (zygote)
I/DEBUG   (   93): failed to open tombstone file '/data/tombstones/tombstone_00': No such file or directory
I/ServiceManager(   87): service 'media.audio_policy' died
I/ServiceManager(   87): service 'media.audio_flinger' died
I/ServiceManager(   87): service 'media.player' died
I/ServiceManager(   87): service 'media.camera' died
I/Netd    (  325): Netd 1.0 starting
W/InterfaceController(  325): Warning (Cannot load library: load_library(linker.cpp:745): library "/system/lib/libnetcmdiface.so" not found) while opening the net interface coy
I/mediaserver(  324): ServiceManager: 0x40a9be30
I/AudioFlinger(  324): Using default 3000 mSec as standby time.
I/CameraService(  324): CameraService started (pid=324)
I/AudioPolicyManagerBase(  324): loadAudioPolicyConfig() loaded /system/etc/audio_policy.conf
I/AudioFlinger(  324): loadHwModule() Loaded primary audio interface from OMAP4 audio HW HAL (audio) handle 1
I/AudioFlinger(  324): HAL output buffer size 1920 frames, normal mix buffer size 1920 frames
I/AudioMixer(  324): found [   86.894531] request_suspend_state: wakeup (0->0) at 86888305667 (1970-01-01 00:01:26.883666996 UTC)
effect "Multichannel Downmix To Stereo" from The Android Open Source Project
I/AudioFlinger(  324): Using modul[   86.914154] init: untracked pid 777 exited
e 1 has the primary audio interface
I/AudioFlinger(  324): AudioFlinger's threa[   86.923431] init: untracked pid 776 exited
d 0x40039008 ready to run
W/AudioFlinger(  324): Thread AudioOut_2 cannot connect to the power manager service
W/AudioFlinger(  324): Thread AudioOut_2 cannot connect to the power manager service
I/audio_a2dp_hw(  324): adev_open:  adev_open in A2dp_hw module
I/AudioFlinger(  324): loadHwModule() Loaded a2dp audio interface from A2DP Audio HW HAL (audio) handle 3
I/AudioPolicyService(  324): Loaded audio policy from LEGACY Audio Policy HAL (audio_policy)
D/MDnsDS  (  325): MDnsSdListener starting to monitor
D/MDnsDS  (  325): MDnsSdListener::Hander starting up
D/MDnsDS  (  325): Going to poll with pollCount 1
E/keystore(  538): chdir: /data/misc/keystore: No such file or directory
I/installd(  537): installd firing up
E/cutils  (  537): Failed to read /data/.layout_version: No such file or directory
E/installd(  537): Could not create directories; exiting.
I/SurfaceFlinger(  536): SurfaceFlinger is starting
I/SurfaceFlinger(  536): SurfaceFlinger's main thread ready to run. Initializing graphics H/W...
E/libEGL  (  536): eglGetDisplay:121 error 300c (EGL_BAD_PARAMETER)
E/libEGL  (  536): eglInitialize:137 error 3008 (EGL_BAD_DISPLAY)
I/gralloc (  536): using (fd=14)
I/gralloc (  536): id           = omapfb
I/gralloc (  536): xres         = 1280 px
I/gralloc (  536): yres         = 720 px
I/gralloc (  536): xres_virtual = 1280 px
I/gralloc (  536): yres_virtual = 1440 px
I/gralloc (  536): bpp          = 32
I/gralloc (  536): r            = 16:8
I/gralloc (  536): g            =  8:8
I/gralloc (  536): b            =  0:8
I/gralloc (  536): width        = 203 mm (160.157639 dpi)
I/gralloc (  536): height       = 114 mm (160.421051 dpi)
I/gralloc (  536): refresh rate = 73.12 Hz
E/ti_hwc  (  536): Composer HAL failed to load compatible Graphics HAL
E/SurfaceFlinger(  536): composer device failed to initialize (Invalid argument)
W/SurfaceFlinger(  536): getting VSYNC period from fb HAL: 13676897
E/libEGL  (  536): validate_display:245 error 3008 (EGL_BAD_DISPLAY)
F/libc    (  536): Fatal signal 11 (SIGSEGV) at 0xdeadbaad (code=1), thread 539 (SurfaceFlinger)
I/DEBUG   (   93): failed to open tombstone file '/data/tombstones/tombstone_00': No such file or directory
D/AndroidRuntime(  541):
D/AndroidRuntime(  541): >>>>>> AndroidRuntime START com.android.internal.os.ZygoteInit <<<<<< 
```

然后日志从这一行重复。

我对 Panda4460 使用了以下引导参数：

```
setenv bootargs androidboot.console=ttyO2 console=ttyO2,115200n8 mem=1G root=/dev/mmcblk0p2 rw rootdelay=2 init=/init vram="64M"
setenv bootcmd 'mmcinit 0; fatload mmc 0 0x80000000 uImage;bootm 80000000'
boot 
```

请指导我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-31T07:22:50.937

我认为您下载 AOSP 并编译它以进行闪烁。然后你会得到这个错误：设备不会在屏幕上绘制任何东西。

在 logcat 中，您发现 surfaceflinger 崩溃了。

我在 maguro 设备中遇到了这个问题，因为 AOSP 中没有包含许多非开源代码。详细的崩溃日志是[http://www.5wpc.info/it/technical/os/android/2014/10/31/AOSP/](http://www.5wpc.info/it/technical/os/android/2014/10/31/AOSP/)

您可以在[https://developers.google.com/android/nexus/drivers#magurojdq39](https://developers.google.com/android/nexus/drivers#magurojdq39)下载这些二进制文件，然后重新制作以进行修补。

# jquery - 使用 UIButton 在 UIWebView 中切换 DIV？

> ID：14826209
> 
> 赞同：0
> 
> 时间：2013-02-12T05:46:06.693
> 
> 标签：jquery, ios, xcode, uiwebview, uibutton

我正在开发一个包含 UIWebView 的应用程序。我希望用户能够单击 UIButton（或 UIButtonBarItem），这将触发 UIWebView 中的 div 元素打开和关闭（使用 jQuery - `$('shade').toggle();`）。这可能吗？

***元素的名称..***
UIWebView = UIButtonBarItem = 内的 div 的 id =*`forumIndex`*
*`forumMenuTrigger`*
*`#shade`*

![在此处输入图像描述](../Images/07b67753db2591a71b4fba32bd1b15b2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:53:49.613

像这样的东西应该工作。

如果您为点击 UIButton 时设置了 IBAction，您可以在 IBAction 方法中执行如下操作：

```
[self.webView stringByEvaluatingJavaScriptFromString:@"$('#shade').toggle();"]; 
```

我在这里假设您的视图控制器已将 webview 定义为属性（在本例中为“webView”） - 将其替换为适当的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:54:38.097

在处理程序中`UIButton`，您需要以某种方式获取`UIWebView`. 我假设你可以自己做到这一点。

让`forumIndex`成为 的名称`UIWebView`。使用[`- (NSString *)stringByEvaluatingJavaScriptFromString:(NSString *)script`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIWebView_Class/Reference/Reference.html#//apple_ref/occ/instm/UIWebView/stringByEvaluatingJavaScriptFromString%3a)方法将 JavaScript 注入`UIWebView`.

```
[forumIndex stringByEvaluatingJavaScriptFromString: @"$('#shade').toggle();"]; 
```

# iphone - 强制用户启用 iCloud

> ID：14826211
> 
> 赞同：2
> 
> 时间：2013-02-12T05:46:22.587
> 
> 标签：iphone, ios, ipad, icloud

我们正在开发一个应用程序，我们需要在 iCloud 中存储一些信息，并且应该在设备之间同步。

为此，我们应该强制用户为应用启用 iCloud。我们可以做类似的事情，

启动应用程序后，只需检查应用程序是否启用了 iCloud，如果没有提醒用户启用 iCloud 并重试？如果不启用 iCloud，我们不允许用户进入应用程序。

苹果会允许这样做吗？

我认为我们不能强迫用户启用 iCloud，这取决于他们是否启用它。我的理解正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:01:10.093

是的，你的理解是正确的。您不能强制用户在其设备上启用 iCloud。这是一件好事。

你需要重新考虑这一点。只有一台设备的用户呢？强迫这些用户在你的应用中使用 iCloud 是没有意义的。没有其他设备可以同步。

最后，您可以检查 iCloud 是否可用。如果没有，您可以告诉用户您的应用确实需要它（出于某种未知原因）并阻止他们继续。

这里没有人可以肯定地说苹果是否会允许这样做。我知道，作为用户，我不会对仅在启用 iCloud 时才有效的应用程序感到满意。它应该是用户的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:54:36.477

为此，您必须检查设备中是否安装了 iCloud。所以在你的

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
  NSFileManager *fileManager = [NSFileManager defaultManager];
  NSURL *iCloudURL = [fileManager URLForUbiquityContainerIdentifier:nil];
  NSLog(@"%@", [iCloudURL absoluteString]);

  if(iCloudURL){
    NSUbiquitousKeyValueStore *iCloudStore = [NSUbiquitousKeyValueStore defaultStore];
    [iCloudStore setString:@"Success" forKey:@"iCloudStatus"];
    [iCloudStore synchronize]; // For Synchronizing with iCloud Server
    NSLog(@"iCloud status : %@", [iCloudStore stringForKey:@"iCloudStatus"]);
   }
} 
```

这将检查 iCloud 状态。在这里，您可以检查真假情况，如果它是假的，您可以退出应用程序并提醒用户在从设置中启用他的 iCloud 后重试。

希望这可以帮助 ！！:)

**PS :-**当然，要实现上述代码，您首先必须完成实现 iCloud 的权利和基础知识的必要性，我认为这是您知道的。

# orchardcms - 博客区布局

> ID：14826212
> 
> 赞同：6
> 
> 时间：2013-02-12T05:46:23.637
> 
> 标签：orchardcms

我的布局文件中有以下区域：

```
@Display(Model.Blog) 
```

我想始终将我的博客文章列表呈现到这个区域，所以我编辑了我的 placement.info 文件，如下所示：

```
<Place Parts_Blogs_BlogPost_List="Blog"/> 
```

Parts.Blogs.BlogPost.List.cshtml 位于我的主题的 Views 目录中。

我无法让博客呈现。如果将区域的名称更改为“内容”，它会起作用....

**更新**

在我的主题目录根目录下的placement.info 中：

```
 <Place Parts_Blogs_BlogPost_List="/BlogZone"/> 
```

在我的 layout.cshtml

```
@if (Model.Content != null) {
<div id="content">
    <div class="container"> 
        @Display(Model.Content)
    </div>
</div>
}

@if (Model.BlogZone != null)
{

<div id="content">blog zone
    <div class="container">
        <div class="row-fluid">
            <h2 class="title-divider"><span>Company <span class="de-em">Blog</span></span> <small>We love to talk!</small></h2>
        </div>
        <div class="row"> 
            <!--Blog Roll Content-->
            <div class="span9 blog-roll blog-list">
                @Display(Model.BlogZone) 
            </div>
        </div>
    </div>
</div>
} 
```

“Parts_Blogs_BlogPost_List”部分仍呈现在“内容”区域内。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:59:25.550

键入`/Blog`而不是`Blog`在placement.info 文件中。

前面的斜线告诉 Orchard 您的意思是*全局*区域（来自`Layout.cshtml`文件），而不是本地区域（每个项目也有它的本地内容、页眉、页脚等区域）。没有`Blog`本地区域之类的东西 - 这就是为什么你什么都看不到的原因。

**更新：**您还需要指定位置，即。`/BlogZone:before`或`/BlogZone:2`等等。

# javascript - jQuery onclick show next 隐藏第一个可见的 div

> ID：14826214
> 
> 赞同：0
> 
> 时间：2013-02-12T05:46:29.923
> 
> 标签：javascript, jquery

我有一组 div，我只想一次显示 4 个。默认情况下，当您单击下一步时，您会看到 1,2,3,4，如果您单击下一步，您应该看到 2,3,4,5，如果您单击下一步，您应该看到 3,4,5,6，如果您单击上一个，您应该看到 1 ,2,3,4，如果您最初单击 prev，我不希望发生任何事情。当你走到尽头时，我希望下次点击不会发生任何事情。

目前这是我所拥有的，但它似乎是一个公平的方式？，（[点击这里](http://jsfiddle.net/aaronk85/dRfb4/4/)），

```
 <div class="testwrap">
        <div class="testtitle">
            <h3>Test title 1</h3>
        </div>
    <span style="float:left" id="prev">prev</span>

        <div class="testclass test1">1</div>
        <div class="testclass test2">2</div>
        <div class="testclass test3">3</div>
        <div class="testclass test4">4</div>
        <div class="testclass test5">5</div>
        <div class="testclass test6">6</div>
        <div class="testclass test7">7</div>
        <div class="testclass test8">8</div>
        <div class="testclass test9">9</div>
        <div class="testclass test10">10</div>
    <span style="float:right" id="next">next</span>

    </div>

    <script>
    $('.testclass:gt(3)').hide();

    $('#prev').click(function() {
        var first = $('.testwrap').children('.testclass:visible:first');
        first.prevAll('.testclass:lt(1)').show();
        first.prev().nextAll('.testclass').hide()
    });

    $('#next').click(function() {
        var last = $('.testwrap').children('.testclass:visible:last');
        last.nextAll('.testclass:lt(1)').show();
        last.next().prevAll('.testclass').hide();
    });
    </script>

    <style>
    .testwrap {
        float: left;
        background: orange;
        width: 500px;
    }

    .testclass {
        background: none repeat scroll 0 0 yellow;
        border: 1px solid red;
        float: left;
        font-size: 28px;
        height: 40px;
        margin: 7px 3px;
        overflow: hidden;
        width: 100px;
        text-align: center;
    }
    .testtitle {
        float:left;
        display:inline;
        width: 100%;
    }
    </style> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T05:53:22.837

在您的下一次单击时..从第一个开始全部可见...并显示`.testclass:lt(4)`..在上一次单击时...从最后一次开始全部可见...并显示`.testclass:lt(4)`

尝试这个

```
$('.testclass:gt(3)').hide();

$('#prev').click(function() {
  var first = $('.testwrap').children('.testclass:visible:last');
  if(first.prevAll('.testclass:lt(4)').length == 4){  //updated check if count of total displayed div is 4.. then sho() and hide() 
    first.prevAll('.testclass:lt(4)').show();
    first.prev().nextAll('.testclass').hide()
  }
});

$('#next').click(function() {
  var last = $('.testwrap').children('.testclass:visible:first');
  if(last.nextAll('.testclass:lt(4)').length == 4){ //updated
    last.nextAll('.testclass:lt(4)').show();
    last.next().prevAll('.testclass').hide();
  }
}); 
```

[在这里摆弄](http://jsfiddle.net/bipen/dRfb4/6/)

我又加了一个`<div>`来检查逻辑..你可以试试..

更新[的小提琴](http://jsfiddle.net/bipen/dRfb4/12/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T06:17:49.293

对于这样的分页，我将使用一个包含当前活动页面的变量和 slice 方法来显示请求的范围：

```
var cP = 0 /* current page */, 
    vP = 4 /* how many page links should be visible */;

$('.testclass:gt('+(vP-1)+')').hide();

$('#prev').click(function() {
    if(cP > 0) { 
        cP--;
        $('.testclass').hide();
        $('.testclass').slice(cP,cP+vP).show();
    }
});

$('#next').click(function() {
    if(cP < $('.testclass').length-vP ) { 
        cP++;
        $('.testclass').hide();
        $('.testclass').slice(cP,cP+vP).show();
    }
}); 
```

你在这里找到一个[小提琴](http://jsfiddle.net/2ZEGt/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T06:00:40.953

尝试这个：

```
$('.testclass:gt(3)').hide();

$('#prev').click(function() {
    var first = $('.testwrap').children('.testclass:visible:last');
    if(first.prevAll('.testclass:lt(4)').length==4)
    {
        first.prevAll('.testclass:lt(4)').show();
        first.prev().nextAll('.testclass').hide()
    }
});

$('#next').click(function() {
    var last = $('.testwrap').children('.testclass:visible:first');
    if(last.nextAll('.testclass:lt(4)').length==4)
    {
         last.nextAll('.testclass:lt(4)').show();
         last.next().prevAll('.testclass').hide();
    }
}); 
```

检查小提琴[http://jsfiddle.net/dRfb4/13/](http://jsfiddle.net/dRfb4/13/)

# open-source - Kannel 短信计数

> ID：14826222
> 
> 赞同：3
> 
> 时间：2013-02-12T05:46:55.133
> 
> 标签：open-source, sms, kannel

我正在使用坎内尔。当我发送超过 160 个字符的消息时出现问题。Kannel 将其拆分为 2 条或更多条消息。仅在第一个上设置了已注册的交付标志。这意味着 kannel 仅在第一部分要求 DLR。

我可以确定所有零件都已交付吗？我可以为邮件的所有部分设置注册传递标志吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:25:09.833

这个问题并不完全清楚，但是（从 Kannel 1.5.0 开始）：

1.  如果您在将长消息拆分为单独的 SMS 消息时遇到问题，则应在 sendms 配置中将*concatenation*参数设置为*true*。这样，Kannel 将构建适当的多部分消息；

2.  回复：关于 D​​LR 的第二部分 - 不，不幸的是，Kannel 似乎故意为第一部分/消息设置了*registered_delivery标志。*从理论上讲，它应该考虑所有部分的 DLR，但是，在实践中，此类问题非常罕见（不过取决于您的 SMSC。）我假设 Kannel 作者认为性能提升足够显着，可以这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-19T16:39:51.647

Most of smsc venders give delivery flag only if full part of message is delivered in hand set

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-03T13:23:58.350

您正在寻找的是 smsc 组上的此指令

[![在此处输入图像描述](../Images/70e722a0f4b4d4548730a23740185f3b.png)](https://i.stack.imgur.com/ccGkv.png)

参考这里[http://kannel.org/download/1.5.0/userguide-1.5.0/userguide.html#AEN1198](http://kannel.org/download/1.5.0/userguide-1.5.0/userguide.html#AEN1198)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-23T00:45:24.460

任何移动服务提供商都只允许您一次发送 160，这就是为什么它分为两部分。您是否使用 sqlbox 发送消息？有时它可能会有所帮助。我还不太确定。

# canopen - CANopen 对象字典是否可动态检索？

> ID：14826224
> 
> 赞同：2
> 
> 时间：2013-02-12T05:47:00.030
> 
> 标签：canopen

我有一个设备（电动机控制器），它有一些关于其 CANOpen 实现的不错的文档。但是，有些条目丢失或我认为文档有误。

是否有 SDO 或其他方式让符合 CANopen 的设备吐出包括所有信息的对象字典？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:51:24.697

没有简单的方法可以通过规范来做到这一点。如果您没有 .EDS 文件，则只能使用普通 SDO 查询轮询配置条目。

# objective-c - Mail Composer 多个按钮

> ID：14826235
> 
> 赞同：0
> 
> 时间：2013-02-12T05:47:22.357
> 
> 标签：objective-c, ios6, mfmailcomposeviewcontroller

我有一个希望得到帮助的问题，我让最初的邮件编辑器加载并正常工作，但我想知道是否可以说添加多个按钮可以调出邮件编辑器，我就是在我的应用程序中尝试做的是让用户能够通过附件将文件通过电子邮件发送给自己，但是有没有一种方法可以拥有多个按钮，当单击它时，邮件编写器将提供该文件。我希望这是有道理的，提前感谢任何提供帮助的人

这是在我的 .h 文件中

```
- (IBAction)Email:(id)sender; 
```

这是在我的 .m 文件中

```
- (IBAction)Email:(id)sender
{
    if ([MFMailComposeViewController canSendMail]) 
        MFMailComposeViewController *mail = [[MFMailComposeViewController alloc] init];

    mail.mailComposeDelegate = self;
    [mail setSubject:@"Questions or Concerns"];

    NSArray *recipient = [NSArray arrayWithObjects:@"abc@yahoo.com", nil];
    [mail setToRecipients:recipient];

    NSString *body = @"Please Send Your Feedback or any Suggestoins";
    [mail setMessageBody:body isHTML:NO];

    [self presentViewController:mail animated:YES completion:Nil];
}

- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
{
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T08:30:46.520

你有很多选择让我们采取以下 senario 你有 2 个按钮 but1 (tag=1, attachment is file1) but2 (tag=2, attachment is file2) 你应该将两个按钮连接到相同的方法

```
- (IBAction)Email:(id)sender; 
```

在 .m 文件中

```
- (IBAction)Email:(id)sender
{
    if ([MFMailComposeViewController canSendMail]) 
        MFMailComposeViewController *mail = [[MFMailComposeViewController alloc] init];

    mail.mailComposeDelegate = self;
    [mail setSubject:@"Questions or Concerns"];
 if (((UIButton *)sender).tag==1){
            // add file 1
    }
    else   if (((UIButton *)sender).tag==2){
            // add file 2 
    }
    NSArray *recipient = [NSArray arrayWithObjects:@"abc@yahoo.com", nil];
    [mail setToRecipients:recipient];

    NSString *body = @"Please Send Your Feedback or any Suggestoins";
    [mail setMessageBody:body isHTML:NO];

    [self presentViewController:mail animated:YES completion:Nil];
}

- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
{
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

# php - 图像并排放置，如何垂直列出它们？

> ID：14826236
> 
> 赞同：0
> 
> 时间：2013-02-12T05:47:24.490
> 
> 标签：php, html, css

我不知道如何在这段代码中中断，所以下面这段代码中的下巴图像以垂直格式显示多个图像（而不是水平并排显示它们）。因为图像很宽，如果我水平显示它们会占用很多空间？我的编码知识很基础，所以如果你能告诉我具体的位置，那将非常有帮助.. :)。我也不确定是否应该使用分页符

或 a
， span 或其他。

```
 // Hack for jAwards integration, displays some medals of the user for Kunena 1.6
                $number_medals = 10;  // number of medals to show
                $query = "SELECT b.image, b.name"
            . "\n FROM #__jawards_awards AS a"
            . "\n LEFT JOIN #__jawards_medals AS b ON b.id = a.award"
            . "\n WHERE a.userid=". $this->profile->userid
            . "\n ORDER BY RAND() LIMIT ".$number_medals;

        $database = &JFactory::getDbo(); 
        $database->setQuery( $query );
                $medals = $database->loadObjectList();

                // URL links to the jAwards-Tab for Community Builder which displays all
                // medals of the user - change to another URL of needed
                $awards_url=JRoute::_('index.php?option=com_comprofiler&task=userProfile&user='.$this->profile->userid."&tab=getawardstab");

                // CSS-class "ja_medals" allows individual styling of medal images and
                // container. "nobr" keeps the medals from breaking apart, display them 
                // in one row.
                $msg_jawards = "<div class=\"ja_medals\"><nobr>";
            foreach ($medals as $med){
        $msg_jawards.= "<a href=\"$awards_url\" title=\"$med->name\">" 
            . "<img style='border:0px;padding:0px;' src=\"".KUNENA_JLIVEURL."/images/medals/".$med->image ."\" alt=\"".$med->name."\" />"
            . "</a>";    
        }

        $msg_jawards.="</nobr></div>";
        unset($medals);
        echo $msg_jawards;

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T05:48:17.183

`<br/>`像这样在图像之间添加：

```
<img src="..." />
<br />
<img src="..." /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T07:22:48.090

从代码中删除`<nobr>`标签并在样式表文件中添加以下行

```
.ja_medals img { display: block; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T05:49:15.753

$msg_jawards.= "name\">" . "image ."\" alt=\"".$med->name."\" />" . "
"; 把 <BR /> 标签放在最后。或者将您的图像放在 P 标签中

# java - 从 WeatherUnderground 读取 JSON 回复

> ID：14826237
> 
> 赞同：0
> 
> 时间：2013-02-12T05:47:26.817
> 
> 标签：java, json, url, gson, weather

```
package test;

import java.net.*;
import java.io.*;
import com.google.gson.*;
import com.google.gson.stream.JsonReader;

public class TestGson {

    URL callToApi;
//------------------------------------------------------------------------------
    public static void main(String[] args) {
        new TestGson();
    }
//------------------------------------------------------------------------------
    public TestGson(){
        try{
            sendCallToApi();
            readJson();
        }catch(IOException e){
            e.printStackTrace();
        }
    }
//------------------------------------------------------------------------------
    public void sendCallToApi(){
        try{
            callToApi = new URL("http://api.wunderground.com/api" +
                    "/[insert key here]" +
                    "/geolookup/conditions/forecast/q/" +
                    "Australia/" +
                    "Sydney.json");
        }catch(MalformedURLException e){
            e.printStackTrace();
        }
    }
//------------------------------------------------------------------------------
    public void readJson() throws IOException{
    Gson g = new Gson();
    InputStreamReader in = new InputStreamReader(callToApi.openStream());
    BufferedReader reader = new BufferedReader(in);
    String message = "hello";
    StringBuffer buf = new StringBuffer();

    while(message!=null){
        message = reader.readLine();
        buf.append(message);
    }
    message = buf.toString();
    String wdf = g.fromJson(message, String.class);
    System.out.println(wdf);
}
//------------------------------------------------------------------------------
} 
```

* * *

这是我第一次尝试使用 GSON 解析 JSON。我只是打电话给 Weather Underground 网站，要求他们向我发送澳大利亚悉尼的天气。
但是，我收到多个错误：

```
Exception in thread "main" com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected a string but was BEGIN_OBJECT at line 1 column 2
    at com.google.gson.Gson.fromJson(Gson.java:806)
    at com.google.gson.Gson.fromJson(Gson.java:761)
    at com.google.gson.Gson.fromJson(Gson.java:710)
    at com.google.gson.Gson.fromJson(Gson.java:682)
    at test.TestGson.readJson(TestGson.java:49)
    at test.TestGson.<init>(TestGson.java:19)
    at test.TestGson.main(TestGson.java:13)
Caused by: java.lang.IllegalStateException: Expected a string but was BEGIN_OBJECT at line 1 column 2
    at com.google.gson.stream.JsonReader.nextString(JsonReader.java:464)
    at com.google.gson.internal.bind.TypeAdapters$13.read(TypeAdapters.java:349)
    at com.google.gson.internal.bind.TypeAdapters$13.read(TypeAdapters.java:337)
    at com.google.gson.Gson.fromJson(Gson.java:795)
    ... 6 more 
```

**是什么导致了这些错误？如何正确调用 Wea​​ther Underground API 以接收天气信息？**

我通过修改 Mykong.com 上给出的示例进行了尝试。

## 来自 Weather Underground 的 JSON 回复

```
{   "response": {       "version": "0.1"        ,"termsofService": "http://www.wunderground.com/weather/api/d/terms.html"       ,"features": {      "geolookup": 1      ,       "conditions": 1     ,       "forecast": 1       }   }       ,   "location": {       "type":"INTLCITY",      "country":"SD",     "country_iso3166":"SA",     "country_name":"Saudi Arabia",      "state":"",     "city":"Jeddah",        "tz_short":"AST",       "tz_long":"Asia/Riyadh",        "lat":"21.67000008",        "lon":"39.15000153",        "zip":"00000",      "magic":"1",        "wmo":"41024",      "l":"/q/zmw:00000.1.41024",     "requesturl":"global/stations/41024.html",      "wuiurl":"http://www.wunderground.com/global/stations/41024.html",      "nearby_weather_stations": {        "airport": {        "station": [        { "city":"Jeddah King Abdul Aziz International Airport", "state":"", "country":"Saudi Arabia", "icao":"OEJN", "lat":"21.70000076", "lon":"39.18333435" },       { "city":"Jeddah", "state":"", "country":"SD", "icao":"OEJN", "lat":"21.67000008", "lon":"39.15000153" },       { "city":"Makkah", "state":"", "country":"SD", "icao":"OEMK", "lat":"21.43000031", "lon":"39.77000046" }        ]       }       ,       "pws": {        "station": [        ]       }       }   }       ,   "current_observation": {        "image": {      "url":"http://icons-ak.wxug.com/graphics/wu2/logo_130x80.png",      "title":"Weather Underground",      "link":"http://www.wunderground.com"        },      "display_location": {       "full":"Jeddah, Saudi Arabia",      "city":"Jeddah",        "state":"",     "state_name":"Saudi Arabia",        "country":"SD",     "country_iso3166":"SA",     "zip":"00000",      "latitude":"21.67000008",       "longitude":"39.15000153",      "elevation":"12.00000000"       },      "observation_location": {       "full":"Jeddah, ",      "city":"Jeddah",        "state":"",     "country":"SD",     "country_iso3166":"SA",     "latitude":"21.67000008",       "longitude":"39.15000153",      "elevation":"39 ft"     },      "estimated": {      },      "station_id":"OEJN",        "observation_time":"Last Updated on February 12, 9:00 AM AST",      "observation_time_rfc822":"Tue, 12 Feb 2013 09:00:00 +0300",        "observation_epoch":"1360648800",       "local_time_rfc822":"Tue, 12 Feb 2013 09:08:53 +0300",      "local_epoch":"1360649333",     "local_tz_short":"AST",     "local_tz_long":"Asia/Riyadh",      "local_tz_offset":"+0300",      "weather":"Clear",      "temperature_string":"77 F (25 C)",     "temp_f":77,        "temp_c":25,        "relative_humidity":"57%",      "wind_string":"From the North at 10 MPH",       "wind_dir":"North",     "wind_degrees":10,      "wind_mph":10,      "wind_gust_mph":0,      "wind_kph":17,      "wind_gust_kph":0,      "pressure_mb":"1011",       "pressure_in":"29.86",      "pressure_trend":"0",       "dewpoint_string":"61 F (16 C)",        "dewpoint_f":61,        "dewpoint_c":16,        "heat_index_string":"NA",       "heat_index_f":"NA",        "heat_index_c":"NA",        "windchill_string":"NA",        "windchill_f":"NA",     "windchill_c":"NA",     "feelslike_string":"77 F (25 C)",       "feelslike_f":"77",     "feelslike_c":"25",     "visibility_mi":"N/A",      "visibility_km":"N/A",      "solarradiation":"",        "UV":"-1",      "precip_1hr_string":"-9999.00 in (-9999.00 mm)",        "precip_1hr_in":"-9999.00",     "precip_1hr_metric":"-9999.00",     "precip_today_string":"0.00 in (0.0 mm)",       "precip_today_in":"0.00",       "precip_today_metric":"0.0",        "icon":"clear",     "icon_url":"http://icons-ak.wxug.com/i/c/k/clear.gif",      "forecast_url":"http://www.wunderground.com/global/stations/41024.html",        "history_url":"http://www.wunderground.com/history/airport/OEJN/2013/2/12/DailyHistory.html",       "ob_url":"http://www.wunderground.com/cgi-bin/findweather/getForecast?query=21.67000008,39.15000153"    }       ,   "forecast":{        "txt_forecast": {       "date":"3:00 AM AST",       "forecastday": [        {       "period":0,     "icon":"partlycloudy",      "icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",       "title":"Tuesday",      "fcttext":"Clear in the morning, then partly cloudy. High of 84F. Breezy. Winds from the NNW at 10 to 20 mph.",     "fcttext_metric":"Clear in the morning, then partly cloudy. High of 29C. Breezy. Winds from the NNW at 15 to 30 km/h.",     "pop":"0"       }       ,       {       "period":1,     "icon":"clear",     "icon_url":"http://icons-ak.wxug.com/i/c/k/clear.gif",      "title":"Tuesday Night",        "fcttext":"Clear. Low of 70F. Winds from the NNW at 10 to 15 mph.",     "fcttext_metric":"Clear. Low of 21C. Breezy. Winds from the NNW at 15 to 25 km/h.",     "pop":"0"       }       ,       {       "period":2,     "icon":"partlycloudy",      "icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",       "title":"Wednesday",        "fcttext":"Clear in the morning, then partly cloudy. High of 88F. Winds from the NNW at 5 to 15 mph.",      "fcttext_metric":"Clear in the morning, then partly cloudy. High of 31C. Breezy. Winds from the NNW at 10 to 25 km/h.",     "pop":"0"       }       ,       {       "period":3,     "icon":"clear",     "icon_url":"http://icons-ak.wxug.com/i/c/k/clear.gif",      "title":"Wednesday Night",      "fcttext":"Clear in the evening, then partly cloudy. Low of 70F. Winds from the NW at 5 to 15 mph.",        "fcttext_metric":"Clear in the evening, then partly cloudy. Low of 21C. Breezy. Winds from the NW at 10 to 25 km/h.",       "pop":"0"       }       ,       {       "period":4,     "icon":"partlycloudy",      "icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",       "title":"Thursday",     "fcttext":"Clear in the morning, then partly cloudy. High of 88F. Winds from the North at 5 to 10 mph shifting to the WSW in the afternoon.",       "fcttext_metric":"Clear in the morning, then partly cloudy. High of 31C. Winds from the North at 5 to 15 km/h shifting to the WSW in the afternoon.",       "pop":"0"       }       ,       {       "period":5,     "icon":"clear",     "icon_url":"http://icons-ak.wxug.com/i/c/k/clear.gif",      "title":"Thursday Night",       "fcttext":"Clear. Low of 73F. Winds from the WNW at 5 to 10 mph.",      "fcttext_metric":"Clear. Low of 23C. Winds from the WNW at 5 to 15 km/h.",      "pop":"0"       }       ,       {       "period":6,     "icon":"clear",     "icon_url":"http://icons-ak.wxug.com/i/c/k/clear.gif",      "title":"Friday",       "fcttext":"Clear. High of 88F. Winds from the NNE at 5 to 10 mph shifting to the WSW in the afternoon.",        "fcttext_metric":"Clear. High of 31C. Winds from the NNE at 5 to 20 km/h shifting to the WSW in the afternoon.",        "pop":"0"       }       ,       {       "period":7,     "icon":"clear",     "icon_url":"http://icons-ak.wxug.com/i/c/k/clear.gif",      "title":"Friday Night",     "fcttext":"Clear. Low of 72F. Winds from the NW at 5 to 10 mph.",       "fcttext_metric":"Clear. Low of 22C. Winds from the NW at 5 to 15 km/h.",       "pop":"0"       }       ]       },      "simpleforecast": {     "forecastday": [        {"date":{   "epoch":"1360692000",   "pretty":"9:00 PM AST on February 12, 2013",    "day":12,   "month":2,  "year":2013,    "yday":42,  "hour":21,  "min":"00", "sec":0,    "isdst":"0",    "monthname":"February", "weekday_short":"Tue",  "weekday":"Tuesday",    "ampm":"PM",    "tz_short":"AST",   "tz_long":"Asia/Riyadh"},       "period":1,     "high": {       "fahrenheit":"84",      "celsius":"29"      },      "low": {        "fahrenheit":"70",      "celsius":"21"      },      "conditions":"Partly Cloudy",       "icon":"partlycloudy",      "icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",       "skyicon":"mostlysunny",        "pop":0,        "qpf_allday": {     "in": 0.00,     "mm": 0.0       },      "qpf_day": {        "in": 0.00,     "mm": 0.0       },      "qpf_night": {      "in": 0.00,     "mm": 0.0       },      "snow_allday": {        "in": 0,        "cm": 0     },      "snow_day": {       "in": 0,        "cm": 0     },      "snow_night": {     "in": 0,        "cm": 0     },      "maxwind": {        "mph": 17,      "kph": 27,      "dir": "NW",        "degrees": 317      },      "avewind": {        "mph": 14,      "kph": 22,      "dir": "NW",        "degrees": 324      },      "avehumidity": 52,      "maxhumidity": 74,      "minhumidity": 43       }       ,       {"date":{   "epoch":"1360778400",   "pretty":"9:00 PM AST on February 13, 2013",    "day":13,   "month":2,  "year":2013,    "yday":43,  "hour":21,  "min":"00", "sec":0,    "isdst":"0",    "monthname":"February", "weekday_short":"Wed",  "weekday":"Wednesday",  "ampm":"PM",    "tz_short":"AST",   "tz_long":"Asia/Riyadh"},       "period":2,     "high": {       "fahrenheit":"88",      "celsius":"31"      },      "low": {        "fahrenheit":"70",      "celsius":"21"      },      "conditions":"Partly Cloudy",       "icon":"partlycloudy",      "icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",       "skyicon":"partlycloudy",       "pop":0,        "qpf_allday": {     "in": 0.00,     "mm": 0.0       },      "qpf_day": {        "in": 0.00,     "mm": 0.0       },      "qpf_night": {      "in": 0.00,     "mm": 0.0       },      "snow_allday": {        "in": 0,        "cm": 0     },      "snow_day": {       "in": 0,        "cm": 0     },      "snow_night": {     "in": 0,        "cm": 0     },      "maxwind": {        "mph": 14,      "kph": 22,      "dir": "NW",        "degrees": 308      },      "avewind": {        "mph": 12,      "kph": 19,      "dir": "NW",        "degrees": 315      },      "avehumidity": 51,      "maxhumidity": 75,      "minhumidity": 39       }       ,       {"date":{   "epoch":"1360864800",   "pretty":"9:00 PM AST on February 14, 2013",    "day":14,   "month":2,  "year":2013,    "yday":44,  "hour":21,  "min":"00", "sec":0,    "isdst":"0",    "monthname":"February", "weekday_short":"Thu",  "weekday":"Thursday",   "ampm":"PM",    "tz_short":"AST",   "tz_long":"Asia/Riyadh"},       "period":3,     "high": {       "fahrenheit":"88",      "celsius":"31"      },      "low": {        "fahrenheit":"73",      "celsius":"23"      },      "conditions":"Partly Cloudy",       "icon":"partlycloudy",      "icon_url":"http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",       "skyicon":"mostlysunny",        "pop":0,        "qpf_allday": {     "in": 0.00,     "mm": 0.0       },      "qpf_day": {        "in": 0.00,     "mm": 0.0       },      "qpf_night": {      "in": 0.00,     "mm": 0.0       },      "snow_allday": {        "in": 0,        "cm": 0     },      "snow_day": {       "in": 0,        "cm": 0     },      "snow_night": {     "in": 0,        "cm": 0     },      "maxwind": {        "mph": 9,       "kph": 14,      "dir": "West",      "degrees": 259      },      "avewind": {        "mph": 7,       "kph": 11,      "dir": "WSW",       "degrees": 250      },      "avehumidity": 51,      "maxhumidity": 69,      "minhumidity": 37       }       ,       {"date":{   "epoch":"1360951200",   "pretty":"9:00 PM AST on February 15, 2013",    "day":15,   "month":2,  "year":2013,    "yday":45,  "hour":21,  "min":"00", "sec":0,    "isdst":"0",    "monthname":"February", "weekday_short":"Fri",  "weekday":"Friday", "ampm":"PM",    "tz_short":"AST",   "tz_long":"Asia/Riyadh"},       "period":4,     "high": {       "fahrenheit":"88",      "celsius":"31"      },      "low": {        "fahrenheit":"72",      "celsius":"22"      },      "conditions":"Clear",       "icon":"clear",     "icon_url":"http://icons-ak.wxug.com/i/c/k/clear.gif",      "skyicon":"mostlysunny",        "pop":0,        "qpf_allday": {     "in": 0.00,     "mm": 0.0       },      "qpf_day": {        "in": 0.00,     "mm": 0.0       },      "qpf_night": {      "in": 0.00,     "mm": 0.0       },      "snow_allday": {        "in": 0,        "cm": 0     },      "snow_day": {       "in": 0,        "cm": 0     },      "snow_night": {     "in": 0,        "cm": 0     },      "maxwind": {        "mph": 10,      "kph": 16,      "dir": "WSW",       "degrees": 248      },      "avewind": {        "mph": 7,       "kph": 11,      "dir": "WSW",       "degrees": 248      },      "avehumidity": 53,      "maxhumidity": 60,      "minhumidity": 38       }       ]       }   }}null 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T22:15:23.187

你似乎不明白是做什么`Gson`的。它是一个 JSON 解析器，特别是将 JSON 反序列化为 Java POJO 的解析器。

在您的代码中，您有：

```
String wdf = g.fromJson(message, String.class); 
```

您告诉 Gson 将 JSON 反序列化为 Java`String`对象。它不能那样做；你的 JSON*不是*一个`String`对象——它是一个从 Weather Underground 返回的大 JSON 对象。您已经有一个包含 JSON 文本本身的 Java `String`( )。`message`

您需要创建一个可以将 JSON 反序列化到的 POJO，或者使用 Gson 的解析器和关联的对象/方法从您想要的 JSON 中挑选出部分。

这是 POJO 的开始（所有字段都公开，没有 getter/setter，只是为了使这个示例变小）：

```
class MyWUPojo {
    public Response response;
    // more after this that match the JSON
}

class Response {
    public String version;
    public String termsofservice;
    public Map<String, Integer> features;
} 
```

然后，您将 JSON 反序列化为以下实例`MyWUPojo`：

```
MyWUPojo wup = new Gson().fromJson(message,MyWUPojo.class); 
```

如果你不想走 POJO 路线，你可以解析 JSON，然后从中得到你想要的：

```
JsonObject o = (JsonObject) new JsonParser().parse(message); 
```

现在您可以使用各种方法`JsonObject`来访问已解析的 JSON。（见： http: [//google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonObject.html](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonObject.html)）

GSON[用户指南](https://sites.google.com/site/gson/gson-user-guide)写得很好，并详细解释了这一点。

**编辑添加：**在你`null`的 JSON 末尾是由这个引起的：

```
while(message!=null){
    message = reader.readLine();
    buf.append(message);
} 
```

您追加`null` *然后*循环退出。它需要是：

```
while ((message = reader.readline()) != null) {
    buf.append(message);
} 
```

# asp.net-mvc - MVC 模型和更新 db 中的 1 个字段

> ID：14826242
> 
> 赞同：0
> 
> 时间：2013-02-12T05:48:19.640
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework

是否可以在不将所有其他模型项传回控制器的情况下更新模型中的 1 个字段？

例如，如果我的模型有 4 个项目（id、firstname、lastname、address）

如果我的 xxx.cshtml 文件只有 1 个可编辑的名字字段，我是否还需要在 httpost 中包含所有 4 个项目？这是没有意义的，如果我只想编辑 1 个字段，但我的记录可能包含模型中的许多（即 16 个）字段。

目前，我正在查询一条记录，只获取 2 个字段，即 id 和 firstname 来显示和编辑。当我保存时，它似乎没有保存。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:03:08.560

您追求的是 TryUpdateModel。

它只会更新 ModelBinder 为其找到表单值的属性。

[http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.tryupdatemodel(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.tryupdatemodel(v=vs.108).aspx)

您可以使用 entityframework 从数据库中获取模型，然后调用 TryUpdateModel（您也可以选择传入要更新的属性的白名单，这可以防止恶意用户通过添加表单值来更改模型中的其他属性）。

检查返回值以查看是否发生了验证错误。

例子：

```
[HttpPost]
public ActionResult Edit(int id, FormCollection form)
{
   var model=_db.Widgets.Find(id);

   //make sure that the model exists in our database
   if (model==null)
   {
      return HttpNotFoundResult();
   }

   if (TryUpdateModel(model,new string[] {"Property1","Property2"}))
   {
      _db.SaveChanges();
      return RedirectToAction("Index"); //or wherever you want to go
   }
   else  //TryUpdateModel returns false on a validation error
   {
      //return to the view and give the user a chance to fix the validation error(s)
      return View("Edit",model);
   }

} 
```

# python - 在大型数据集中搜索

> ID：14826245
> 
> 赞同：2
> 
> 时间：2013-02-12T05:48:29.140
> 
> 标签：python, data-structures

我有一个用户列表：朋友（50,000）和一个活动参与者列表（25,000 个活动和每个活动的参与者列表）。我想找到用户参加活动的前 k 个朋友。这需要为每个用户完成。

我尝试遍历列表，但计算成本非常高。我也试图通过创建加权图来做到这一点。（Python）

让我知道是否有其他方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:02:29.037

Python 的集合对象（字典、集合和 collections.Counter）可以轻松完成这项任务：

```
from collections import Counter

def top_k_friends(friends, events, k=2):
    '''Given a dictionary users mapped to their set of friends
    and a dictionary of events mapped to a set of their attendees,
    find the top k friends with whom the user goes to the event.
    Do this for each user.

    '''
    for user, users_friends in friends.iteritems():
        c = Counter()
        for event, attendees in events.iteritems():
            if user in attendees:
                c.update(users_friends.intersection(attendees))
        print user, '-->', c.most_common(k)

if __name__ == '__main__':

    friends = {
        'robert' : {'mary', 'marty', 'maggie', 'john'},
        'paul' : {'marty', 'mary', 'amber', 'susan'}
    }

    events = {
        'derby': {'amber', 'mary', 'robert'},
        'pageant': {'maggie', 'paul', 'amber', 'marty', 'john'},
        'fireworks': {'susan', 'robert', 'marty', 'paul', 'robert'}
    }

    top_k_friends(friends, events) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:54:45.363

我建议您在数据库（例如[sqlite](http://docs.python.org/2/library/sqlite3.html)）中执行此操作，或者对于纯 python 内存选项，请参阅[norman](https://readthedocs.org/projects/norman/)。无论哪种方式都比尝试使用列表自己实现这一点要快得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T06:07:15.340

你能做这样的事情吗。

我假设用户的朋友相对较少，并且特定用户参加的活动也远少于活动总数。

因此，对于用户的每个朋友，都有一个参加事件的布尔向量。

做一个点积和那些有最大值的将是最有可能与用户相似的朋友。

再次，.在你这样做之前..你将不得不过滤一些事件以保持你的向量的大小是可管理的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T07:37:52.130

如果我更好地理解您当前的数据结构是什么样子，我会给您一个代码示例，但这听起来像是熊猫数据框 groupby 的工作（以防您不喜欢像其他人建议的那样实际使用数据库）。

# asp.net - 在单个视图中传递多个视图模型

> ID：14826246
> 
> 赞同：1
> 
> 时间：2013-02-12T05:48:49.153
> 
> 标签：asp.net, view, asp.net-mvc-4, viewmodel, asp.net-mvc-viewmodel

即使我相信我已经定义了所有模型并希望正确传递，但我收到一个错误，指出当需要另一个模型时我正在传递一个模型。

主视图：

```
@model Project.Models.ProfileModel

 @(ViewBag.HasLocalPassword ? Html.Partial("_ChangePasswordPartial", Model.PasswordModel) : Html.Partial("_SetPasswordPartial", Model.PasswordModel))

            @Html.Partial("_UsernamePartial", Model.UsernameModel)
            @Html.Partial("_PlayNamePartial", Model.PlayNameModel) 
```

楷模：

```
 public class ProfileModel
{
    public PasswordModel PasswordModel { get; set; }
    public PlayNameModel PlayNameModel { get; set; }
    public UsernameModel UsernameModel { get; set; }
} 
```

用户名操作 GET：

```
public ActionResult _UsernamePartial()
    {
        var usernameModel = new UsernameModel();
        using (var db = new DataContext())
        {
            usernameModel.Username =
                (from u in db.Users where u.ID == WebSecurity.CurrentUserId select u.Username).FirstOrDefault();
        }
        return PartialView(usernameModel);
    } 
```

用户名 POST 操作：

```
[HttpPost]
    public ActionResult _UsernamePartial(UsernameModel usernameModel)
    {
        if (ModelState.IsValid)
        {
            using (var db = new DataContext())
            {
                User user = db.Users.FirstOrDefault(u => u.ID == WebSecurity.CurrentUserId);
                user.Username = usernameModel.Username;
                db.SaveChanges();
            }
        }
        return View("_UsernamePartial");
    } 
```

配置文件操作：

```
public ActionResult Profile(ManageMessageId? message)
    {
        var profile = New ProfileModel();
        ViewBag.StatusMessage =
            message == ManageMessageId.ChangePasswordSuccess ? "Your password has been changed."
            : message == ManageMessageId.SetPasswordSuccess ? "Your password has been set."
            : message == ManageMessageId.RemoveLoginSuccess ? "The external login was removed."
            : "";
        ViewBag.HasLocalPassword = OAuthWebSecurity.HasLocalAccount(WebSecurity.GetUserId(User.Identity.Name));
        ViewBag.ReturnUrl = Url.Action("Profile");
        return View(profile);

    } 
```

用户名的查看页面：

```
@model Acatar.Models.UsernameModel

@using (Html.BeginForm("_UsernamePartial", "Account")) {

       <p id="legend">Username</p>
       @Html.TextBoxFor(m=>m.Username)

    <button type="submit" value=" Username">Save</button>
} 
```

**错误信息：** `The model item passed into the dictionary is of type 'Project.Models.ProfileModel', but this dictionary requires a model item of type 'Project.Models.UsernameModel'.`

非常感谢我哪里出错的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:05:23.013

当您发布到 时`_UsernamePartial`，这充当返回另一个 Partial 的子操作方法。你正在回过头来

您实际上是在传回 View _UsernamePartial 但返回它

```
return View("_UsernamePartial"); 
```

没有 usernameModel

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:06:02.393

如果您调用 Html.Partial 我不相信它会调用操作方法。您应该使用 Html.RenderAction() 来调用控制器操作。

# width - 响应式网页设计中的宽度与最大宽度

> ID：14826248
> 
> 赞同：0
> 
> 时间：2013-02-12T05:48:55.717
> 
> 标签：width, responsive-design, css

在有关响应式网页设计的教程中建议对图像使用 max-width:100% 以使其灵活。为什么我们可以为此使用 width:100% ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-27T00:08:00.797

我有同样的问题，我认为这是做了一个小实验后的答案：

`width:100%;`无论发生什么，都会缩放图像的宽度。

*   当`100%`大于该图像的原始分辨率时，图像会不断缩放，因此看起来很模糊。
*   当`height`分配给该图像时，宽度会不断缩放并因此被拉伸。

`max-width:100%;`更仔细地缩放图像的宽度。

*   当`100%`大于该图像的原始分辨率时，图像停止缩放并看起来很精致。
*   当`height`分配给该图像时，宽度停止缩放并保持纵横比。

所以我认为这就是人们使用`max-width`而不是`width`.

实验截图：[这里](http://www.etblue.idv.tw/et/experiment/www.etblue.idv.tw-et-experiment-width.html.png)（草图为 600 px * 432 px）

实验网页：[这里](http://www.etblue.idv.tw/et/experiment/width.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T07:17:06.970

较小的图像，例如 200px 宽的图像将始终扩展到父容器的宽度，在更大的屏幕上可能会更宽。结果，您最终会得到放大的图像，由于可见的伪影，这些图像很少看起来不错。

# mysqli - 准备好的语句结果在一个表中

> ID：14826249
> 
> 赞同：0
> 
> 时间：2013-02-12T05:48:59.280
> 
> 标签：mysqli, prepared-statement

拜托，这是我第一次使用 php 尝试 mysqli。我正在尝试将结果打印到表格中，但表格中没有显示任何数据。

我之前试过

> printf("%s %s\n", $c_id, $ctitle);

我得到了正确的结果。但我想要表格中的结果。

我打算这是一个详细信息页面，将链接到主页项目。我的代码：

```
<?php
$mysqli = new mysqli("localhost", "joseph", " ", "collectionsdb");

if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}
    if ($stmt = $mysqli->prepare("SELECT c_id,ctitle,csubject,creference,cyear,cobjecttype,cmaterial,ctechnic,cwidth,cheight,cperiod,cmarkings,cdescription,csource,cartist,cfilename FROM collections ORDER BY c_id")) {   
    /* Execute the prepared Statement */
    $stmt->execute();

    /* Bind results to variables */
    $stmt->bind_result($c_id,$ctitle,$csubject,$creference,$cyear,$cobjecttype,$cmaterial,$ctechnic,$cwidth,$cheight,$cperiod,$cmarkings,$cdescription,$csource,$cartist,$cfilename);

?>  

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-GB">
<body>  

<?php
    /* fetch values */
    while ($rows = $stmt->fetch()) {

    // print image and data into a html table ?? 
?>
    <table border="1" align="left">
<tr>
    <td rowspan=16> <?php echo '<img src="./images/'.$rows['cfilename'].'" width="300" height="400" />';  ?> </td>
</tr>

<tr><td>ID</td><td><?php echo $rows['c_id']; ?></td></tr>
<tr><td>TITLE</td><td><?php echo $rows['ctitle']; ?></td></tr>
<tr><td>SUBJECT</td><td><?php echo $rows['csubject']; ?></td></tr>
<tr><td>REFERENCE No.</td><td><?php echo $rows['creference']; ?></td></tr>
<tr><td>YEAR</td><td><?php echo $rows['cyear']; ?></td></tr>
<tr><td>OBJECT TYPE</td><td><?php echo $rows['cobjecttype']; ?></td></tr>
<tr><td>MATERIAL USED</td><td><?php echo $rows['cmaterial']; ?></td></tr>
<tr><td>TECHNIC</td><td><?php echo $rows['ctechnic']; ?></td></tr>
<tr><td>WIDTH</td><td><?php echo $rows['cwidth']; ?></td></tr>
<tr><td>HEIGHT</td><td><?php echo $rows['cheight']; ?></td></tr>
<tr><td>PERIOD</td><td><?php echo $rows['cperiod']; ?></td></tr>
<tr><td>MARKINGS</td><td><?php echo $rows['cmarkings']; ?></td></tr>
<tr><td>DESCRIPTION</td><td><?php echo $rows['cdescription']; ?></td></tr>
<tr><td>SOURCE</td><td><?php echo $rows['csource']; ?></td></tr>
<tr><td>ARTIST</td><td><?php echo $rows['cartist']; ?></td></tr>
</table>

<?php
    }

    /* Close the statement */
    $stmt->close();
}
else {
    /* Error */
    printf("Prepared Statement Error: %s\n", $mysqli->error);
}

/* close our connection */
$mysqli->close();
?> 
```

谢谢你。

约瑟夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:50:56.117

您必须使用之前绑定的变量而不是 $rows 数组 - 即 $c_id,$ctitle,$csubject
您还放错了`<table>`标签。将其移出循环。

如您所见，mysqli 对于准备好的语句是非常不可用的。
将其与手动占位符一起使用或移至 PDO。
例如，它将使您的代码**更**清洁（这是您需要的所有代码）：

```
<?php
$db = new DB();
$data = $db->getAll("SELECT * FROM collections ORDER BY c_id");
?>  
<table border="1" align="left">
<?php foreach ($data as $rows) { ?>
  <tr>
    <td rowspan=16>
      <img src="/images/<?php echo $rows['cfilename'] ?>" width="300" height="400" />
    </td>
  </tr>
  <tr><td>ID</td><td><?php echo $rows['c_id']; ?></td></tr>
  <tr><td>TITLE</td><td><?php echo $rows['ctitle']; ?></td></tr>
  <tr><td>SUBJECT</td><td><?php echo $rows['csubject']; ?></td></tr>
  <tr><td>REFERENCE No.</td><td><?php echo $rows['creference']; ?></td></tr>
  <tr><td>YEAR</td><td><?php echo $rows['cyear']; ?></td></tr>
  <tr><td>OBJECT TYPE</td><td><?php echo $rows['cobjecttype']; ?></td></tr>
  <tr><td>MATERIAL USED</td><td><?php echo $rows['cmaterial']; ?></td></tr>
  <tr><td>TECHNIC</td><td><?php echo $rows['ctechnic']; ?></td></tr>
  <tr><td>WIDTH</td><td><?php echo $rows['cwidth']; ?></td></tr>
  <tr><td>HEIGHT</td><td><?php echo $rows['cheight']; ?></td></tr>
  <tr><td>PERIOD</td><td><?php echo $rows['cperiod']; ?></td></tr>
  <tr><td>MARKINGS</td><td><?php echo $rows['cmarkings']; ?></td></tr>
  <tr><td>DESCRIPTION</td><td><?php echo $rows['cdescription']; ?></td></tr>
  <tr><td>SOURCE</td><td><?php echo $rows['csource']; ?></td></tr>
  <tr><td>ARTIST</td><td><?php echo $rows['cartist']; ?></td></tr>
<?php } ?>
</table> 
```

# php - PHP 重定向和包含

> ID：14826254
> 
> 赞同：1
> 
> 时间：2013-02-12T05:49:13.553
> 
> 标签：php, redirect, include

我有一个处理mysql连接的php文件（login.php），

然后在成功登录后重定向到某种会员页面。

这完美无瑕。

**但是**，当我尝试**include("login.php")**并使用**$username**变量时，它会显示重定向的 html，或者在这种情况下显示**header("location:members.html")**的输出；

这可能不是一个缺陷，可能是 php 的一个功能，如果是这样，我是否应该将 login.php 文件分离为两个文件，一个检查，一个如果成功则重定向？

提前致谢

文件信息：login.html

```
<html>

<head>
<title>Login</title>

</head>
<body>

<form action="login.php" method="post">

<table cellpadding=10>
<tr>
<td>Username:</td>
<td><input type="text" name="username"></input></td>
</tr>

<tr>
<td>Password:</td>
<td><input type="password" name="password"></input></td>
</tr>

<tr>
<td colspan="2"><input type="submit"></input></td>
</tr>
</table>

</form>

</body>

</html> 
```

登录.php

```
<?php 
session_start();

$con = mysql_connect($host,$_POST['username'],$_POST['password']);

if(!$con)
{
    die("Could Not Connect!" . "\n" . "Reason: " . mysql_error());
}
else
{
    $_SESSION['username'] = $_POST['username'];
    //header("Location:interact.html");
    echo "<script>window.location = 'http://localhost/interact.html'</script>";
}

?> 
```

交互.html

```
<html>
<head>

<title>Nexus | Envoy</title>

</head>

<body>
<p><?php echo "WELCOME ". $_SESSION['username']; ?></p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:02:00.813

首先，您应该将 html 切片为页眉、内容和页脚。每个页面的内容更改以及页眉和页脚将保持不变。在头文件中添加 session_start() 和建立连接的代码。

只是给你一个粗略的想法...

登录.php

```
<?php 
session_start();

$con = mysql_connect($host,$_POST['username'],$_POST['password']);

if(!$con)
{
    die("Could Not Connect!" . "\n" . "Reason: " . mysql_error());
}
else
{
    $sql=mysql_query("select * from users where username = '".$_POST['username']."' and
      password = '".$_POST['password']."' ");

    if(mysql_num_rows > 0) 
   {
    $_SESSION['username'] = $_POST['username'];
    header("Location:interact.php");
   }
  else
  {
    echo "Invalid Username/password";
   }
}

?> 
```

登录

用户名密码：

交互.php

连结 | 使者

-> 切片 html 并包含页眉和页脚文件。-> 根据请求的 url 更改内容，例如保留一个文件，例如 index.php 并包含标题，然后是其内容，最后是页脚。-> 假设请求是 index.php?content=register，那么您将获得 $_REQUEST['content'] 的值并基于它包含内容文件 ->like if $_REQUEST['content'] = '注册'，包括（'register.php'）。Register.php 将仅包含内容，不包含页眉和页脚。->如果 $_REQUEST['content'] 为空，则显示主页。示例 header.php：示例页脚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:37:19.093

1.切片html并包含页眉和页脚文件。
2.根据请求的url更改内容，例如保留一个文件说index.php并包含标题，然后是其内容，最后是页脚。- 假设请求是 index.php?content=register，那么您将获得 $_REQUEST['content'] 的值，并基于它包含内容文件 ->like if $_REQUEST['content'] = '注册'，包括（'register.php'）。Register.php 将仅包含内容，不包含页眉和页脚。
3.如果 $_REQUEST['content'] 为空，显示主页。

示例 header.php：

```
<?php 
session_start();

$con = mysql_connect($host,$_POST['username'],$_POST['password']);

if(!$con)
{
    die("Could Not Connect!" . "\n" . "Reason: " . mysql_error());
}

if($_REQUEST['content'] == 'register')  $title="Register";
if($_REQUEST['content'] == 'login')  $title="Login";
..
?>
<html>

<head>
<title><?php echo $title; ?</title>

</head>
<body> 
```

示例 footer.php

```
</body>
</html> 
```

示例 index.php

```
<?php

require('header.php');

if(isset($_REQUEST['content']) && !empty($_REQUEST['content']))
{
  if($_REQUEST['content'] == 'register')  include('register.php');
  if($_REQUEST['content'] == 'interact')  include('interact.php');
   if($_REQUEST['content'] == 'login')  include('login.php');
   ..
}
else
{
include('home.php');
}

require('footer.php');

?> 
```

示例内容文件 (login.php)

```
if(!empty($_POST))
{
 $sql=mysql_query("select * from users where username = '".$_POST['username']."' and
      password = '".$_POST['password']."' ");

if(mysql_num_rows > 0) 

  {
    $_SESSION['username'] = $_POST['username'];
    header("Location:interact.php");
   }
  else
  {
    echo "Invalid Username/password";
   }

} ?>
<form action="login.php" method="post">

<table cellpadding=10>
<tr>
<td>Username:</td>
<td><input type="text" name="username"></input></td>
</tr>

<tr>
<td>Password:</td>
<td><input type="password" name="password"></input></td>
</tr>

<tr>
<td colspan="2"><input type="submit"></input></td>
</tr>
</table>

</form> 
```

# phpfox - 是否有任何 phpfox 开发人员指南可以帮助我建立 custum phpfox 网站？

> ID：14826260
> 
> 赞同：0
> 
> 时间：2013-02-12T05:49:32.520
> 
> 标签：phpfox

嗨，我正在寻找一个指南，以便我可以建立我的第一个 phpfox 网站。虽然我已经下载了 phpfox 版本并在本地系统上成功配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:35:56.390

I have already post an answer here [What is the basic skeleton of a phpfox module?](https://stackoverflow.com/questions/14721269/what-is-the-basic-skeleton-of-a-phpfox-module) you can take a look to see whether it could solve your problem?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T10:07:19.873

使用[phpfox api](http://www.phpfox.com/phpapi/)和[phpfox 知识库](http://www.phpfox.com/kb/)作为参考，它们会对你有很大帮助

# width - 页眉不随页面宽度扩展

> ID：14826261
> 
> 赞同：0
> 
> 时间：2013-02-12T05:49:47.360
> 
> 标签：width, page-layout

不知道为什么会这样。我的头是一个标准的div，没什么特别的。当内容扩展页面宽度时，标题不会随之扩展。看截图：

[http://dl.dropbox.com/u/7830551/Screenshots/e5zxgw58gxm9.png](http://dl.dropbox.com/u/7830551/Screenshots/e5zxgw58gxm9.png)

我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:52:26.567

键入将宽度设置为`100%`：

```
<div style="width: 100%">
  <!-- Your header HTML here -->
</div> 
```

# java - Hibernate 命名查询错误参数 id 不作为命名参数存在 [from Employeename e where e.name=:name]

> ID：14826262
> 
> 赞同：0
> 
> 时间：2013-02-12T05:49:55.817
> 
> 标签：java, hibernate, named-query

我有两个类，一个 POJO 和一个主类，我正在使用带有注释的命名查询在休眠中。

POJO类如下

```
@NamedQueries(
        {
            @NamedQuery(
                    name="findEmployeeName",
                        query="from Employeenam e where e.name=:name" 
                    )
        }
)
@Entity
@Table(name = "employee")
public class Employeenam {

    // public String tostring(){return id+" " +name+ " " +salary+ " " +job;}

    @Id
    @GeneratedValue
    @Column(name = "id")
    int id;

    @Column(name = "name")
    String name;

    @Column(name = "salary")
    int salary;

    @Column(name = "job")
    String job;

    public int setId() {
        return id;
    }

    public void getId(int Id) {
        this.id = Id;
    }

    public String setName() {
        return name;
    }

    public void getName(String Name) {
        this.name = Name;
    }

    public int getSalary() {
        return salary;
    }

    public void setSalary(int Salary) {
        this.salary = Salary;
    }

    public String setJob() {
        return job;
    }

    public void getJob(String Job) {
        this.job = Job;
    }

} 
```

主要课程为：

```
public class FetchData {
    public static void main(String[] args) {

        Configuration configuration = new Configuration();
        configuration.configure("hibernate.cfg.xml");
        SessionFactory sfactory = configuration.buildSessionFactory();
        Session session = sfactory.openSession();
        Query query = session.getNamedQuery("findEmployeeName");
        query.setString("name", "dfdsf");
        Employeenam e = new Employeenam();
        List<Employeenam> empList = query.list();
        session.close();
    }
} 
```

我收到以下错误

```
Parameter id does not exist as a named parameter in [from Employeenam e where 
 e.name=:name] 
```

有人可以帮我解决这个问题..我又哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T08:32:32.037

```
public int setId() 
{
    return id;
}

public void getId(int Id) {
    this.id = Id;
} 
```

您错误地编写了 ID 的 getter 和 setter 方法。getId 应该返回 int 而不是 setId。

# php - php登录脚本中的setcookie不起作用

> ID：14826264
> 
> 赞同：1
> 
> 时间：2013-02-12T05:49:59.247
> 
> 标签：php, cookies, setcookie

我有一个登录脚本，我在其中对用户进行身份验证，一旦身份验证完成，我想为他设置 cookie。但是我的脚本在身份验证之前执行得很好，但是在 setcookie 之后它没有进一步执行，可能是它无法执行这个函数。这是我的代码。

```
$validCredentials = checkCredentials($loginEmail, $loginPassword);
    if ($validCredentials === 1)
    {
        if(isset($_POST['rememberMe'])) 
        {
            $yearExpire = time() + 60*60*24*365; // 1 Year
            setcookie('rememberedUser', $loginEmail, $yearExpire);
            setcookie('loggedIn', $loginEmail, $yearExpire);
        }
        else  
        {
            if(isset($_COOKIE['rememberedUser'])) 
            {
                $pastExpire = time() - 100;
                setcookie('rememberedUser', '', $pastExpire);
            }
            $shortExpire = time() + 60*60*24;
            setcookie('loggedIn', $loginEmail, $shortExpire);
            die(msg(0,"Logged In !"));

        }
     } 
```

请告诉我我的代码有什么问题。请帮忙 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:52:33.053

你写了这一行

```
die(msg(0,"Logged In !")); 
```

并因此停止执行。

# cakephp - CakePHP 将 SQL 转换为分页

> ID：14826265
> 
> 赞同：0
> 
> 时间：2013-02-12T05:50:07.953
> 
> 标签：cakephp, pagination

我有一个返回我想要的结果的 SQL 语句，但是我需要对这些结果进行分页，并且在过去几天试图将查询转换为 $this->paginate 时遇到了麻烦

我正在使用两个具有 habtm 关系的表；项目和 item_owns。item_owns 表包含 3 列：id、item_id 和 user_id，而 items 表包含 id、collection_id 和 name。

返回我需要的结果的 SQL：

```
SELECT it.id, it.name, COALESCE(count,0) as count 
FROM items as it 
LEFT OUTER JOIN (
    SELECT count(ito.item_id) as count, ito.item_id 
    FROM item_owns as ito 
    WHERE ito.user_id='4ffb9027-8c0c-4086-a13e-01a0cab1739a' 
    GROUP BY ito.item_id
) as ct ON ct.item_id = it.id
WHERE it.collection_id='4fc923f5-0a58-453f-9507-0c0c86106d80'; 
```

下面的代码片段让我很接近，但是我最终不得不在分页函数之外按 user_id（按 item_id 分组）对 item_owns 进行计数，这意味着我无法根据计数进行排序......

```
$this->paginate = array(
'limit' => 5,
            'conditions' => array('Item.collection_id'=> $id ),
            'fields' => array('Item.id', 'Item.collection_id', 'Item.name'),
            'contain' => array(
                'ItemOwn'=>array(
                    'fields' => array('ItemOwn.id, ItemOwn.item_id, ItemOwn.user_id'),
                    'conditions' => array('ItemOwn.user_id' => $this->Session->read('Auth.User.id')),

                    )
                )
            ); 
```

我也尝试过使用'joins' => array()，但不确定如何在字段数组中指定“count”调用

```
$this->paginate = array(
    'limit' => 5,
    'fields' => array('Item.id', 'Item.collection_id', 'Item.name', 'count(ItemOwn.item_id)'),
    'conditions' => array('Item.collection_id'=> $id, 'ItemOwn.user_id' => $this->Session->read('Auth.User.id') ),
    'joins' => array(
        array(
            'alias' => 'ItemOwn',
            'table' => 'item_owns',
            'foreign_key' => false,
            'type' => 'LEFT OUTER',
            'conditions' => array('ItemOwn.item_id = Item.id'),
            'group' => 'ItemOwn.item_id'
            )
        )
    ); 
```

我怀疑我可能需要使用自定义分页功能，但我再次不确定某些 JOIN 和条件会在哪里......

任何想法都非常感谢！谢谢 MK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:40:12.690

您使用的 contains 很好，但您还应该使用 Cake 的[计数器缓存](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)进行计数。

# c# - 在 asp.net mvc3 图表助手中如何向系列数据添加标记

> ID：14826271
> 
> 赞同：2
> 
> 时间：2013-02-12T05:50:57.530
> 
> 标签：c#, asp.net-mvc-3

在使用图表助手的 asp.net mvc3 中，我正在尝试绘制具有系列数的折线图。我想添加标记/突出显示单个系列的点。

我的代码是

```
var chart = new Chart(900, 500, ChartTheme.Blue).AddTitle("Status: "+ status)
            .SetXAxis("Year", 0, 60)
            .SetYAxis("Age", 0, 30)
            .AddSeries(chartType: "line", xValue: XYear, yValues: YAge, name:"1st series",markerStep:5)
            .AddSeries(chartType: "line", xValue: x1, yValues: y1, name: "2nd series")
            .AddSeries(chartType: "line", xValue: x2, yValues: y2, name: "3rd series")
            .AddLegend()
            .GetBytes("png");

            return File(chart, "image/png"); 
```

在第一个系列中，作为输入给出的所有点都需要突出显示。如何使用图表助手实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:00:52.490

您在**System.Web.Helpers.Chart**命名空间中使用的这个类没有那么强大。它将为您提供一些简单的图表功能，但它实际上只是我相信围绕微软提供的真实图表框架的一个包装器。**查看命名空间System.Web.UI.DataVisualization.Charting**中的 Chart 对象以执行您想要执行的操作。我已经多次使用此 Chart 对象，它可以完全按照您的要求进行操作。

# java - 使用spring实现登录检查

> ID：14826272
> 
> 赞同：0
> 
> 时间：2013-02-12T05:50:59.073
> 
> 标签：java, spring-mvc

我目前正在通过一个小型数据库项目使用spring mvc进行自我教育，但我被困在登录验证的初始步骤中。

```
package Spittles.dao;

import java.sql.ResultSet;
import java.sql.SQLException;

import javax.sql.DataSource;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.simple.ParameterizedRowMapper;

import Spittles.services.LoginService;
import SpringForm1.model.Spittler;

public class SpittlerDao implements LoginService {

    private DataSource dataSource;
    private JdbcTemplate jdbcTemplate;

    @Autowired
    public void setDataSource(DataSource dataSource)
    {
        this.dataSource=dataSource;
        this.jdbcTemplate=new JdbcTemplate(dataSource);
    }

    public Spittler checkSpittlerLogin(Spittler spittlerLogin)
    {
        String sql="SELECT * FROM spittler where spittler_email=? and spittler_password=?";
        return jdbcTemplate.queryForObject(sql,new ParameterizedRowMapper<Spittler>(){
                public Spittler mapRow(ResultSet rs,int rowNum)  throws SQLException
                {
                    Spittler spittler = new Spittler();
                    spittler.setSpittler_name(rs.getString("spittler_name"));
                    spittler.setSpittler_email(rs.getString("spittler_email"));
                    spittler.setSpittler_email(rs.getString("spittler_id"));
                    return spittler;
                }
        },spittlerLogin.getSpittler_email(),spittlerLogin.getSpittler_password() );
    }

} 
```

我的 LoginController 如下。

```
package SpringForm1.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;

import Spittles.dao.SpittlerDao;
import Spittles.services.LoginService;
import SpringForm1.model.Spittler;

@Controller
public class LoginController {

    @Autowired
    private LoginService loginService;

    @RequestMapping(value="/login.html",method=RequestMethod.GET)

    public String loginPage(@ModelAttribute("loginData")Spittler spittler)
    {
        return "login";
    }
    @RequestMapping(value="/logindo.html",method=RequestMethod.POST)
    public String logindo(@ModelAttribute("loginData")Spittler spittler)
    {
        Spittler spittlerData = loginService.checkSpittlerLogin(spittler);
        if(spittlerData!=null)
        {
            return "home";
        }
        else
        {
            return "login";
        }

    }
} 
```

现在我面临的问题是，当使用输入正确的电子邮件和密码时，我会被重定向到所需的主页。但是如果电子邮件或密码不正确，我的要求是重定向回登录页面，但我得到以下异常。

```
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0 
```

那么可能是什么问题？我是春天的新手，所以任何建议都会教会我一些新东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:55:00.267

您应该首先检查行号。如果登录无效，结果集将为空。所以你必须先检查结果集是否为空，然后抛出适当的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T03:22:53.000

可能这可以帮助..

您不需要电子邮件和密码。所以，将查询修改为`Select count(*) from`...。它将返回您`1`或`0`总是。在此基础上处理您的条件。

如果你想在你的项目中实现标准，那么使用自定义身份验证管理器实现 Spring Security。

# vba - 如何在 VBA 中调用字符串中的函数

> ID：14826277
> 
> 赞同：2
> 
> 时间：2013-02-12T05:51:27.117
> 
> 标签：vba, ms-access, outlook

我有一个 MS Access 数据库，我想在其中调用一个函数，该函数在字符串中包含今天的日期，如下所示。我正在尝试将今天的日期放在将要创建的新电子邮件的主题行和电子邮件正文中。有什么想法可以实现这一目标吗？

```
Private Sub Command_Click()

Dim objOutlook As Outlook.Application
Dim objEmail As Outlook.MailItem
Dim ThisDay As Date

ThisDay = Format(Now, "mm/dd/yy")    

Set objOutlook = CreateObject("Outlook.application")
Set objEmail = objOutlook.CreateItem(olMailItem)

With objEmail
    .To = ""
    .CC = ""
    .Subject = "Daily Email Processed " *(Thisday)
    .Body = "Hi," + vbNewLine + vbNewLine + vbNewLine + "Please find below the number of Emails processed for the  " + vbNewLine + vbNewLine + "Email Count = " + vbNewLine + "O Count = "
    .Attachments.Add ""
    .Attachments.Add ""
    .Display        
End With

Set objOutlook = Nothing

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:01:35.600

您打算在*ThisDay*变量 中存储一个`Format()`表达式。返回一个字符串，因此声明要匹配的变量。*`Format()`*

 *```
'Dim ThisDay As Date
Dim ThisDay As String 
```

将格式化的日期字符串加载到*ThisDay*后，可以将其连接到主题行的其余部分。

```
'.Subject = "Daily Email Processed " *(Thisday)
.Subject = "Daily Email Processed " & Thisday 
```*

# ios - 直到我在运行时单击屏幕，该功能才起作用

> ID：14826279
> 
> 赞同：-2
> 
> 时间：2013-02-12T05:51:27.400
> 
> 标签：ios, xcode, ipad, nstimer

我想在视图加载几秒钟后显示一个动画图像，然后将其隐藏并查看其他 2 个图像，我使用了一个数组来为图像设置动画然后设置一个计时器来重复调用函数 onTimer，在这个函数中我检查是否图像动画一次，如果是这样，请停止计时器并查看其他 2 个图像

当我运行项目时它工作正常，只是在我点击屏幕之前不会出现 2 张图像！

她是代码：

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.
outline.animationImages = [NSArray arrayWithObjects:
                           [UIImage imageNamed:@"traffic.png"],
                           [UIImage imageNamed:@"red.png"],
                           [UIImage imageNamed:@"yellow.png"],
                           [UIImage imageNamed:@"green.png"], nil];

[outline setAnimationRepeatCount:1];
outline.animationDuration = 4;
[outline startAnimating];

 timer = [NSTimer scheduledTimerWithTimeInterval: 1.0/30.0 target:self selector:@selector(onTimer) userInfo:nil repeats:YES];

}

-(void) onTimer {

if (![outline isAnimating]  == TRUE){ // if animation has been played once, do something
    NSLog(@"animation stopped, do something");
    rannan.image = [UIImage imageNamed:@"rannan.png"];
    outline.image = [UIImage imageNamed: @"outline.png"];
    [ timer invalidate];

    // do something
}
} 
```

看起来由于某种原因 isAnimating 没有设置为 TRUE 直到我在项目运行时单击屏幕

希望我能找到这个答案:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:30:01.217

我只是想知道为什么您每 1/30 秒触发一次计时器。您将动画设置为 4 秒，这样您就可以在 4 秒后触发计时器。

一种检查视图是否不再动画的方法：

```
CALayer *presentationLayer = (CALayer*)outline.layer.presentationLayer;
if(![presentationLayer animationKeys])
{
    NSLog(@"animation stopped, do something");
} 
```

# android - 卡尔曼滤波器安卓

> ID：14826282
> 
> 赞同：0
> 
> 时间：2013-02-12T05:51:38.717
> 
> 标签：android, kalman-filter

我尝试实现从 code.google.com 获得的以下代码我收到错误，例如 org.ejml 无法解析、SimpleMatrix 无法解析和 DenseMatrix64F 无法解析。解决方案是什么？

您可以在此链接中获取代码

[http://code.google.com/p/android-lucid-dreaming-app/source/browse/Lucid+Dreaming+App/src/com/luciddreamingapp/actigraph/filter/SimpleFilter.java?r=15](http://code.google.com/p/android-lucid-dreaming-app/source/browse/Lucid+Dreaming+App/src/com/luciddreamingapp/actigraph/filter/SimpleFilter.java?r=15)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:53:56.840

您的项目缺少定义这些类的外部 jar。确保将`lib`文件夹下的所有库都包含到您的类路径中（右键单击 Eclipse 中的 jar 并选择`Build Path -> Add to Build Path`.

您将需要以下罐子`EJML-nogui.jar`，`commons-math_trimmed2.jar`并且`gson-1.7.1.jar`

# sql - 获取动态时间段内的重复事件

> ID：14826283
> 
> 赞同：0
> 
> 时间：2013-02-12T05:51:38.337
> 
> 标签：sql

好的，问题来了：我有一张带有日期标记的交易表。假设日期已经从日期戳中删除，并且表格看起来像这样：

```
;WITH TRX(TRX_Id, TRX_SalesTotal, TRX_TimeStamp) AS
    (
        SELECT  1, 100, '09:00:00' UNION ALL
        SELECT  2, 100, '09:10:00' UNION ALL
        SELECT  3, 200, '17:00:00' UNION ALL
        SELECT  4, 999, '11:50:00' UNION ALL
        SELECT  5, 999, '12:10:00' UNION ALL
        SELECT  6, 999, '12:15:00' UNION ALL
        SELECT  7, 100, '08:50:00' UNION ALL
        SELECT  8, 600, '17:00:00' UNION ALL
        SELECT  9, 700, '17:00:00' UNION ALL
        SELECT 10, 100, '09:45:00' UNION ALL
        SELECT 11, 100, '17:00:00' UNION ALL
        SELECT 12, 777, '09:00:00' UNION ALL
        SELECT 13, 777, '09:10:00' UNION ALL
        SELECT 14, 777, '10:10:00' 
    ) 
```

我必须报告销售价值在一小时内出现超过 2 次的所有交易。在任何给定的时间。（因此，根据数据，一个销售总额可以是 12:30 - 13:30，另一个销售总额可以是 12:05 - 13:05。）

因此，上述数据的结果应为：

```
TRX_ID   TRX_SalesTotal      TRX_TimeStamp
1        100                 09:00:00 
2        100                 09:10:00
7        100                 08:50:00
10       100                 09:45:00
4        999                 11:50:00
5        999                 12:10:00
6        999                 12:15:00 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T08:36:02.350

```
SELECT TRX_Id, TRX_SalesTotal, TRX_TimeStamp
FROM TRX TRX1
WHERE (SELECT COUNT(*)
       FROM TRX TRX2
       WHERE TRX1.TRX_SalesTotal=TRX2.TRX_SalesTotal
             AND
             TRX1.TRX_TimeStamp BETWEEN DATEADD(hour, -1, TRX2.TRX_TimeStamp)
                                        AND
                                        DATEADD(hour, 1, TRX2.TRX_TimeStamp))
       >1 
```

看到这个[SQLFiddle](http://sqlfiddle.com/#!3/37b9f/3)

# vb.net - How to import Microsoft.Office.Interop.Excel on a console application?

> ID：14826285
> 
> 赞同：2
> 
> 时间：2013-02-12T05:51:40.843
> 
> 标签：vb.net, excel, console-application, office-interop

It works fine on my Website Application, but I have to use it too on console application that will run from the task scheduler.

This is how I'm calling the import:

```
Imports Excel = Microsoft.Office.Interop.Excel 
```

Problem is when I try to import it from the console app, I get this error:

```
Namespace or type specified in the Imports 'Microsoft.Office.Interop.Excel' doesn't contain any public member or cannot be found 
```

Any ideas on how to solve this? Thanks.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T05:55:10.217

You should [`Add Reference`](http://msdn.microsoft.com/en-us/library/vstudio/wkze6zky.aspx) to `Microsoft.Office.Interop.Excel` component

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-17T22:02:29.020

with Visual Studio 2013 the answer to this question is to add reference:

Microsoft Excel 15.0 Object Library

# javascript - 当我们选择任何项目表单下拉列表时，如何在 Facebook 显示的文本框中显示文本

> ID：14826287
> 
> 赞同：-4
> 
> 时间：2013-02-12T05:51:43.020
> 
> 标签：javascript, jquery, asp.net, ajax

当我们选择任何项目表单下拉列表时，如何在文本框中显示文本，如 facebook 显示？我想知道这个概念，如果他们如何修改它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:14:24.903

你可以看看[这个](http://loopj.com/jquery-tokeninput/)插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:25:19.343

我不太确定你的意思，但听起来你想在选择列表上的选项时更新文本框？如果是这种情况，您可能需要为此使用 ajax。这是一个非常好的教程......它很容易理解并且也有示例。希望能帮助到你！

[http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/)

# sql-server - SQL Server 更新另一个表行中的所有列

> ID：14826288
> 
> 赞同：1
> 
> 时间：2013-02-12T05:51:50.623
> 
> 标签：sql-server, vb.net, rows

我有两张表，一张是用定时器间隔`sensor_pool`改变值`temp_cel`

**传感器池**

```
| address | temp_cels |
|---------------------|
| sensor1 | 83C       |
| sensor2 | 82C       |
| sensor3 | 85C       |
| sensor4 | 85C       |
| sensor5 | 84C       | 
```

和另一个`sensor_history`我动态创建列的表（添加了传感器地址作为列名的列）。我能够捕获日期时间，但不能`temp_cels`从另一个表中捕获。

```
INSERT INTO sensor_history(datetime) VALUES(" & dtfStr & ") 
```

*   `dtfStr = timestamp`

**传感器历史**

```
|    datetime    | sensor1 | sensor2 | sensor3 | sensor4 | sensor5 | 
|------------------------------------------------------------------|
| 12022013080513 |  NULL   |  NULL   |  NULL   |  NULL   |  NULL   | 
```

到目前为止，我有一个在 for 循环内的查询（用于获取列）

```
IF EXISTS(SELECT datetime FROM sensor_history where datetime='" & dtfStr & "') 
MERGE sensor_history sh USING sensor_pool sp ON [(SELECT '" & dgvSensors.Rows(l).Cells(0).Value & "' 
FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME='sensor_history' AND COLUMN_NAME='" & dgvSensors.Rows(l).Cells(0).Value & "')] = sp.sens_code 
WHEN MATCHED THEN UPDATE SET sh.[" & dgvSensors.Rows(l).Cells(0).Value & "] = st.temp_cels 
WHEN NOT MATCHED BY TARGET THEN INSERT ([" & dgvSensors.Rows(l).Cells(0).Value & "]) VALUES (st.temp_cels);" 
```

dgvSensors datagridview 与 sensor_pool 表相同。vb.net + SQL Server

这就是我的目标结果应该是：

```
|    datetime    | sensor1 | sensor2 | sensor3 | sensor4 | sensor5 | 
|------------------------------------------------------------------|
| 12022013080513 |   83C   |   82C   |   85C   |   85C   |   84C   | 
```

希望有人能帮助我

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:00:39.370

```
INSERT INTO sensor_history(datetime,sensor1,sensor2,sensor3,sensor4,sensor5) 
VALUES(getdate(),
select temp_cels from sensor_pool where address='sensor1',
select temp_cels from sensor_pool where address='sensor2',
select temp_cels from sensor_pool where address='sensor3',
select temp_cels from sensor_pool where address='sensor4',
select temp_cels from sensor_pool where address='sensor5') 
```

# c++ - FireBreath Mac OS X 基金会

> ID：14826289
> 
> 赞同：0
> 
> 时间：2013-02-12T05:51:58.903
> 
> 标签：c++, macos, firebreath, browser-plugin

我的 FireBreath 插件的 Mac 版本出现链接错误，如下所示：

```
Undefined symbols for architecture x86_64:
  "_IOIteratorNext", referenced from:
      MyFunction(...) in MyFile.o 
```

**请帮我解决这个链接错误。**

我有类似的错误`"_IOObjectRelease", "_IORegistryEntryCreateCFProperty", "_IORegistryEntryGetParentEntry", "_IOServiceGetMatchingServices", "_IOServiceMatching", and "_kIOMasterPortDefault"`。这让我相信我需要包含 IOKIT 和 COREFOUNDATION 框架。

我已经得出结论，这些是我需要的框架，因为我可以通过像这样直接将它们添加到 Xcode 来暂时使构建成功：

1.  在项目导航器中选择项目。
2.  选择目标。
3.  选择“构建阶段”选项卡。
4.  打开“Link Binaries With Libraries”扩展器（您可能必须使用“Add Build Phase”）。
5.  单击“+”按钮一次以添加每个框架。

通过 Xcode 添加框架后，构建成功。但是，一旦再次运行准备脚本“prepmac.sh”，框架就会丢失并且构建失败。

我已经尝试通过编辑 PluginConfig.cmake 和 Mac/projectDef.cmake 以多种方式通过 FireBreath 添加框架，甚至考虑修改 CMakeLists.txt，但这似乎不太有希望。

我在这两个`.cmake`文件中尝试了以下各种组合的语句，但我不确定将它们放在哪里：

```
find_library(IOKIT_FRAMEWORK IOKit)
message("Finding library IOKit: ${IOKIT_FRAMEWORK}")

find_library(COREFOUNDATION_FRAMEWORK CoreFoundation)
message("Finding library CoreFoundation: ${COREFOUNDATION_FRAMEWORK}")

target_link_libraries(${PROJECT_NAME}
    ${COREFOUNDATION_FRAMEWORK}
    ${IOKIT_FRAMEWORK}
    ${PLUGIN_INTERNAL_DEPS}
) 
```

似乎没有任何更改会更改构建日志。当然，我正在使用“prepmac.sh”在更改之间生成项目，其中新的“消息”语句报告：

```
Finding library IOKit: /System/Library/Frameworks/Cocoa.framework
Finding library CoreFoundation: /System/Library/Frameworks/CoreFoundation.framework 
```

* * *

**解决方案**：根据出租车司机的建议，解决方案是在 Mac/projectDef.cmake 中正确指定正确的框架，并完全删除构建目录并使用 prepmac.sh 脚本从头开始重新制作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:27:51.780

仅仅做一个 find_library 是不够的。您还需要将其添加到 target_link_libraries 调用中。此外，您应该真正确保您的案例与库本身相匹配；我不知道这在 mac 上是否重要，但如果它是一个区分大小写的文件系统（是的，这可能在 mac 上），这是一个很好的做法。

框架的正确案例是“IOKit”和“CoreFoundation”

[您可以在firebreath.org上的](http://firebreath.org)[使用库](http://npapi.com/x/WoAT)页面上找到有关如何正确执行此操作的更多信息。尝试这样的事情：

```
find_library(IOKIT_FRAMEWORK IOKit)
find_library(COREFOUNDATION_FRAMEWORK CoreFoundation)
target_link_libraries(${PROJECT_NAME} ${COREFOUNDATION_FRAMEWORK} ${IOKIT_FRAMEWORK}) 
```

请注意，这需要位于您的 Mac/projectDef.cmake 文件中，位于“add_mac_plugin”调用*之后的某个位置。*

# android - 在android中嵌套ActionBar？

> ID：14826294
> 
> 赞同：0
> 
> 时间：2013-02-12T05:52:16.857
> 
> 标签：android, nested, android-actionbar

有没有办法`ActionBar`在Android中嵌套？

我的意思是..

当我按下`tab buttons`选项卡菜单中的一个时，我想`sub-menu tabs`在主菜单下方显示另一个

那可能吗 ？如果你能给我提供例子，请..

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:24:12.473

```
import com.example.android.supportv4.R;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentTabHost;

public class FragmentTabs extends FragmentActivity 
{
  private FragmentTabHost mTabHost;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.fragment_tabs);
        mTabHost = (FragmentTabHost)findViewById(android.R.id.tabhost);
        mTabHost.setup(this, getSupportFragmentManager(), R.id.realtabcontent);

        mTabHost.addTab(mTabHost.newTabSpec("simple").setIndicator("Simple"),
                FragmentStackSupport.CountingFragment.class, null);
        mTabHost.addTab(mTabHost.newTabSpec("contacts").setIndicator("Contacts"),
                LoaderCursorSupport.CursorLoaderListFragment.class, null);
        mTabHost.addTab(mTabHost.newTabSpec("custom").setIndicator("Custom"),
                LoaderCustomSupport.AppListFragment.class, null);
        mTabHost.addTab(mTabHost.newTabSpec("throttle").setIndicator("Throttle"),
                LoaderThrottleSupport.ThrottledLoaderListFragment.class, null);
    }
} 
```

这也可以通过片段嵌套在片段内部使用：

```
import com.example.android.supportv4.R;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentTabHost;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class FragmentTabsFragmentSupport extends Fragment {
    private FragmentTabHost mTabHost;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        mTabHost = new FragmentTabHost(getActivity());
        mTabHost.setup(getActivity(), getChildFragmentManager(), R.id.fragment1);

        mTabHost.addTab(mTabHost.newTabSpec("simple").setIndicator("Simple"),
                FragmentStackSupport.CountingFragment.class, null);
        mTabHost.addTab(mTabHost.newTabSpec("contacts").setIndicator("Contacts"),
                LoaderCursorSupport.CursorLoaderListFragment.class, null);
        mTabHost.addTab(mTabHost.newTabSpec("custom").setIndicator("Custom"),
                LoaderCustomSupport.AppListFragment.class, null);
        mTabHost.addTab(mTabHost.newTabSpec("throttle").setIndicator("Throttle"),
                LoaderThrottleSupport.ThrottledLoaderListFragment.class, null);

        return mTabHost;
    }

    @Override
    public void onDestroyView() {
        super.onDestroyView();
        mTabHost = null;
    }} 
```

有关更多详细信息，请参阅[http://developer.android.com/reference/android/support/v4/app/FragmentTabHost.html](http://developer.android.com/reference/android/support/v4/app/FragmentTabHost.html)

# java - Glassfish - java.lang.NoClassDefFoundError

> ID：14826295
> 
> 赞同：2
> 
> 时间：2013-02-12T05:52:17.880
> 
> 标签：java, jakarta-ee, websocket, glassfish-3, java-7

我正在关注此[博客](https://blogs.oracle.com/arungupta/entry/websockets_and_java_ee_7)以在 glasshfish 中运行示例 websocket 应用程序。部署失败并出现以下错误。但是提到的类文件在 pom.xml 中可用，并且它也列在依赖项中。能否请你帮忙？

![在此处输入图像描述](../Images/477904de3de42aecdbbdf08fdc3c2def.png)

```
 Error occurred during deployment: Exception while loading the app : java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.NoClassDefFoundError: org/glassfish/websocket/spi/Endpoint. Please see server.log for more details.
The module has not been deployed.
See the server log for details.
    at org.netbeans.modules.j2ee.deployment.devmodules.api.Deployment.deploy(Deployment.java:210)
    at org.netbeans.modules.maven.j2ee.ExecutionChecker.performDeploy(ExecutionChecker.java:178)
    at org.netbeans.modules.maven.j2ee.ExecutionChecker.executionResult(ExecutionChecker.java:130)
    at org.netbeans.modules.maven.execute.MavenCommandLineExecutor.run(MavenCommandLineExecutor.java:212)
    at org.netbeans.core.execution.RunClassThread.run(RunClassThread.java:153) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T08:49:36.967

解决了。Glassfish 的 modules 文件夹和 WEB-INF\lib 文件夹中不应有相同的 jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-23T15:17:14.237

您可能只需要清理和构建您的项目。

# mysql - 如何计算两个字段的减法并将该ans保留在同一张表中mysql的第三个字段中？

> ID：14826297
> 
> 赞同：0
> 
> 时间：2013-02-12T05:52:22.013
> 
> 标签：mysql

我有三个字段，即 num1 num2 和 num3/ans 我想减去 num1 和 num2 字段，并且 ans 应该在 num3/ans 字段中，例如 num1 值为 400，num 值为 100，然后 ans/num3 字段中的值应该会自动出现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:53:51.263

你需要这个吗？

```
UPDATE tbl
SET num3 = num1 - num2 
```

或者如果你想要计算字段，直接是不可能的，但是你可以使用触发器

```
CREATE TRIGGER MyTrigger
BEFORE INSERT ON tbl
FOR EACH ROW
    SET NEW.num3 = NEW.num1 - NEW.num2; 
```

# javascript - 资源解释为文档，但使用 MIME 类型音频/mpeg 传输

> ID：14826301
> 
> 赞同：0
> 
> 时间：2013-02-12T05:52:32.587
> 
> 标签：javascript, jquery, google-chrome

开头有很多问题

[*资源解释为文档，但使用 MIME 类型* **音频/mpeg传输**](https://stackoverflow.com/search?q=Resource%20interpreted%20as%20Document%20but%20transferred%20with%20MIME%20type)

我有一个 javascript 函数可以播放我的声音。效果很好，简单又薄。

```
function Play(mp3Path)
{
    $("#sound_").remove();
    $('#soundEvent').html('<embed id="sound_" autostart="true" hidden="true" 
        src="' + mp3Path + '" type="audio/mpeg" />');
    //Line above formatted for readability
} 
```

当我执行上述函数时，我在 chrome 中收到以下警告。
`Resource interpreted as Document but transferred with MIME type audio/mpeg`

![在此处输入图像描述](../Images/0aad1e60ef9f16652274defed83ccdb1.png)

我的修复尝试涉及将 type 属性添加到 embed 元素。

*有没有办法在不对*代码进行重大更改或转到 HTML5/flash的情况下摆脱该警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:10:14.037

你不能，摆脱警告购买你可以隐藏它：

```
console.groupCollapsed(' ');console.log('just example');console.groupEnd(); console.log('b') 
```

# vb.net - 在输入控件中使用自动完成

> ID：14826304
> 
> 赞同：0
> 
> 时间：2013-02-12T05:52:43.633
> 
> 标签：vb.net, winforms

使用“SuggestAppend”模式时，我在使用自动完成时遇到问题。当我在某些（比如说）组合框中完成编辑文本时，程序导航到下一个控件。但是，如果我回到那些组合框，我在里面输入的用于自动建议 + 附加的文本会从上次记住我的程序场景中不好的地方。

而不是那种本机行为，我想要那个组合框，当我离开它时，“忘记”我输入的内容并将（搜索的）字符串重置为“无”，就像程序启动时一样。

我相信这是内部程序，但我也相信可能存在一些 hack 来实现可以改进我的程序逻辑的功能。

# html - 通过 SVG 路径为“div”设置动画

> ID：14826305
> 
> 赞同：3
> 
> 时间：2013-02-12T05:52:48.927
> 
> 标签：html, svg, jquery-svg, svg-animate

我是 HTML5、SVG 的菜鸟。基本上我需要通过我创建的 SVG 路径移动一个 html“div”对象。

我的 HTML 看起来像这样

```
<div class="movepath">

        <div class="car" id="car"></div>

<svg id="canvas" width="1000px" class="content" xmlns="http://www.w3.org/2000/svg" height="370px">
<style type="text/css"><![CDATA[
    .lineC {
        fill:#fff;stroke:#000;
    }
]]></style>

</svg>

    </div> 
```

CSS

```
.movepath {
width:"1000px";
height:350px;
position:relative;
float:left;
}

.car {
width:100px;
height:50px;
background-color:red;
position:absolute;
left:0;top:0;
} 
```

js

```
var width=getDocWidth();
    $('#canvas').width(width+'px');
    $('.movepath').width(width+'px');

    var shape = document.createElementNS(svgNS, "path");

    var points = 'M0 10 Q -27 10, 95 80 T'+width+' 40';
    shape.setAttributeNS(null, "d", points);
    shape.setAttributeNS(null, "class", "lineC");
    shape.setAttributeNS(null, "id", 'road');
    document.getElementById("canvas").appendChild(shape); 
```

创建了这样的路径。我很困惑如何通过创建的路径移动 $('#car') ？

请指教

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:00:47.720

基本上你需要一个循环（一个在相等的时间步长中触发的函数，所以没有»for«或»while«循环），您需要从路径中获取一个点，例如：

```
length = path.getTotalLength() * i;
point = path.getPointAtLength( length ); 
```

比：

```
div.style.left = point.x + 'px';
div.style.top = point.y + 'px'; 
```

其中`i`是一个介于 0 和 1 之间的值，表示动画的进度。总而言之，还有更多需要了解的内容，并且有不同的方法可以移动 div（即 css 转换）或获取值，但基本上就是这样。

# php - PHP：语法错误，第 107 行 /etc/php5/cli/php.ini 中出现意外的“&”

> ID：14826306
> 
> 赞同：0
> 
> 时间：2013-02-12T05:52:53.697
> 
> 标签：php

我试图在我的 php 脚本中使用 proc_open() 来调用和执行另一个 php 脚本。以下是代码：

```
$descriptors = array(
 0 => array("pipe","r"),
 1 => array("pipe","w"),
 2 => array("file","./error_log.txt","a")
) ;
$cwd="./";
$process=proc_open('php reversegame.php &', $descriptors,$pipes,$cwd); 
if (is_resource($process)) {
  $return_value = proc_close($process);
} 
```

这会在 error_log.txt 中写入以下错误

> PHP：语法错误，第 107 行 /etc/php5/cli/php.ini 中出现意外的“&”

我是 proc_open 的新手，并且仍在尝试掌握此功能的用法。我实际上是在运行另一个脚本的同时尝试执行这个 php 脚本！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:55:18.837

`&`从此行中删除

```
$process=proc_open('php reversegame.php ', $descriptors,$pipes,$cwd); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T08:00:01.737

您将需要使用[pcntl_fork()查看分叉进程](http://php.net/manual/en/function.pcntl-fork.php)

我不知道这是否会让您将其他脚本置于后台，但您应该能够分叉当前线程，然后在新的分叉线程仍在运行的情况下结束当前线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T06:03:15.087

您可能禁用了`proc_open`.

搜索`disable_functions`你会看到`disable_functions = show_source,system,shell_exec,passthru,exec,phpinfo,proc_open`。

现在将其更改为`disable_functions =` .

并重新启动所有服务并尝试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T06:05:38.730

我也面临这个错误。但是这个错误不应该阻止你的脚本工作。此错误是由于在 INI 文件中使用 & 运算符造成的（例如使用 error_reporting E_ALL & ~E_NOTICE）。

# ios - ios - 如何将崩溃报告拖到组织者中？

> ID：14826307
> 
> 赞同：1
> 
> 时间：2013-02-12T05:52:53.560
> 
> 标签：ios

我正在尝试调试我需要“符号化”的崩溃报告，而我以前从未“符号化”过。

我遇到了一些将崩溃报告拖放到 Organizer 以对其进行符号化的说明。

我怎么做？我是否将崩溃报告保存到文件中并将其放在某处？我有点困惑。有人可以解释一下这个过程吗？

谢谢！

# linux - 如何通过用户通过 ssh 发送的公钥获取用户信息？

> ID：14826308
> 
> 赞同：2
> 
> 时间：2013-02-12T05:53:00.470
> 
> 标签：linux, github, ssh, pki

当用户使用公钥通过 SSH 连接时，Github 是如何检测到它是哪个用户？

```
ssh -T git@github.com
Hi **Ben**! You've successfully authenticated, but GitHub does not provide shell access. 
```

如何实现这样的功能，特别是考虑到用户信息在 MySQL 等数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:15:14.387

我相当确定这是使用集中的 authorized_keys 文件以及命令选项来完成的。查看[手册页](http://linux.die.net/man/8/sshd)的 AUTHORIZED_KEYS FILE FORMAT 部分。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T05:55:53.853

用户总是发送登录信息（`git`在你的情况下）。公钥/私钥对仅用于验证用户身份。

# go - Go/CGo - 你如何使用作为指针传递的 C 数组

> ID：14826319
> 
> 赞同：8
> 
> 时间：2013-02-12T05:53:55.787
> 
> 标签：go, cgo

我将其作为问题/答案发布，因为我花了一段时间才解决，而且我不介意对我的解决方案提供一些反馈。在 Go/CGo 中，如何处理作为指针传递的 C 数组？

例如，使用这个 C 结构：

```
struct _GNetSnmpVarBind {                     
    guint32     *oid;       /* name of the variable */
    gsize       oid_len;    /* length of the name */
    ... and other fields
}; 
```

我想将 oid 字段转换为 Go 字符串，如何使用 guint32* 指针？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T08:15:28.913

[您可以使用我在 go wiki 中看到的提示](https://github.com/golang/go/wiki/cgo#turning-c-arrays-into-go-slices)将 C 数组转换为 Go 切片

未经测试，但希望你能明白！不要让切片的寿命比 C 数据长，因为它直接指向它。

上次我使用它时，我查看了反汇编，它生成了非常有效的代码。

```
func gIntArrayOidString(oid *_Ctype_guint32, oid_len _Ctype_gsize) (result string) {
    var oids []uint32
    sliceHeader := (*reflect.SliceHeader)((unsafe.Pointer(&oids)))
    sliceHeader.Cap = oid_len
    sliceHeader.Len = oid_len
    sliceHeader.Data = uintptr(unsafe.Pointer(oid))

    var result string
    for _, value := range oids {
        result += fmt.Sprintf(".%d", value)
    }
    return result[1:]
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T05:53:55.787

我这样做的方法是找到要读取的字节数（guint32 * oid_len 的大小），然后对字节数执行 binary.Read()，然后循环遍历大小块中的字节。回想起来容易；困难的部分是让类型转换工作，因为 Go 比 C 更严格。

例如，这里是将 guint32* 转换为 Go 字符串（表示 SNMP OID）的 Go 代码：

```
func gIntArrayOidString(oid *_Ctype_guint32, oid_len _Ctype_gsize) (result string) {
    size := int(unsafe.Sizeof(*oid))
    length := int(oid_len)
    gbytes := C.GoBytes(unsafe.Pointer(oid), (_Ctype_int)(size*length))
    buf := bytes.NewBuffer(gbytes)

    for i := 0; i < length; i++ {
        var out uint32
        if err := binary.Read(buf, binary.LittleEndian, &out); err == nil {
            result += fmt.Sprintf(".%d", out)
        } else {
            return "<error converting oid>"
        }
    }
    if len(result) > 1 {
        return result[1:] // strip leading dot
    }
    return "<error converting oid>"
} 
```

注释？

* * *

上下文：代码来自[gsnmpgo](https://github.com/soniah/gsnmpgo/blob/master/stringers.go#L56)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-12T07:52:12.947

我假设来自 gsnmp 的值不一定是 little-endian，而是原生字节顺序。我只会使用 unsafe.Sizeof 来遍历数组。例如

```
package main

import (
    "unsafe"
    "fmt"
)

var ints = [...]int32 {1, 2, 3}

func main() {
    var result string
    var p *int32 = &ints[0]
    for i := 0; i < len(ints); i++ {
        result += fmt.Sprintf(".%d", *p)
        p = (*int32)(unsafe.Pointer(uintptr(unsafe.Pointer(p))+unsafe.Sizeof(*p)))
    }
    fmt.Println(result[1:])
} 
```

# c++ - 理解 C++ 中的 const

> ID：14826321
> 
> 赞同：1
> 
> 时间：2013-02-12T05:53:56.630
> 
> 标签：c++, constants

我们得到了一个语义和语法正确的方法，如下所示：

```
const Foo & bar( const Bim & bam ) const; 
```

我们应该解释三个 const 调用中的每一个的含义。我是 C++ 新手，不知道它们是什么意思。我（大致）理解，最后的 const 意味着该方法只能在 const 变量上调用，并承诺不会传播更改。但是，我不明白其他两个。如果我在最后一个错误，请纠正我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T06:02:29.557

请参阅下面的说明

```
(1)const Foo & bar( (2)const Bim & bam ) (3)const; 
```

1.  该方法返回不可变的 Foo 类型的引用。
2.  Bim 类型的methods 参数不会被该方法修改。这意味着您可以将 const 和非常量的对象传递给此方法。无论哪种方式，该方法都不会修改对象，或者只能调用该对象上的 const 方法。
3.  这意味着此方法不会以任何方式更改对象。

PS：如果你是个顽皮的男孩，3 有办法解决这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:01:51.630

> 我（大致）理解，最后的 const 意味着该方法只能在 const 变量上调用，并承诺不会传播更改。

对了一半。该函数可以在 const 或非 const 对象上调用，并承诺不修改对象的状态（非可变成员）或调用任何非 const 成员函数。调用非常量对象是可以的，但反之则不然。也就是说，如果尾随的 const 不存在，则*无法*在 const 对象上调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T06:06:33.943

-> For int func1() const; 当您在函数末尾指定常量时，这意味着此函数是只读的，您不能修改调用此函数的对象。-> 对于 func (const bim); 如您所知，函数参数中的常量不允许更改该特定对象。-> 而对于 const func2(); 表示此函数的返回类型是常量。

# php - 如何在默认值中使用数学表达式？

> ID：14826323
> 
> 赞同：1
> 
> 时间：2013-02-12T05:53:59.783
> 
> 标签：php, math

为什么以下在 PHP 中不起作用？

> 常量天数 = 60*24*3；

我收到以下错误。

> 解析错误：语法错误，第 1 行出现意外的 T_CONST

我也无法将表达式分配给属性数组的值。请注意，我只使用常量值（不调用函数或类似的东西）。

```
class A
{
    public $value = array('days'=>60*24*3);
} 
```

以上不起作用。

> $value = array('days'=>60*24*3);

**但是，如果它被分配给一个局部变量，那就很好了！**

赋值时如何使用数学表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:59:02.023

常量是使用`define()`函数定义的。`const`是类内部的保留字（在 PHP 5.3 之前不能在类范围之外使用）。所以：

```
define('DAYS', 60*24*3); 
```

会正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-14T23:03:02.203

虽然定义一个常量可以正常工作，但它会改变全局范围。一种更封装的方法是在构造函数中设置属性：

```
<?php

class Foo {

    private $duration;

    public function __construct()
    {
        $this->duration = 60 * 60 * 24 * 3;
    }
} 
```

# php - 脚本中的 mktime 错误！谁能帮我吗？

> ID：14826333
> 
> 赞同：0
> 
> 时间：2013-02-12T05:55:08.430
> 
> 标签：php, mktime

我的网站出现持续的 mktime 错误。

functions.php 中的主要 mktime 代码如下：

```
function mkprettytime($s) {
if ($s < 0)
    $s = 0;

$t = array();
$t["day"] = floor($s / 86400);
$s -= $t["day"] * 86400;

$t["hour"] = floor($s / 3600);
$s -= $t["hour"] * 3600;

$t["min"] = floor($s / 60);
$s -= $t["min"] * 60;

$t["sec"] = $s;

if ($t["day"])
    return $t["day"] . "d " . sprintf("%02d:%02d:%02d", $t["hour"], $t["min"],     $t["sec"]);
if ($t["hour"])
    return sprintf("%d:%02d:%02d", $t["hour"], $t["min"], $t["sec"]);
    return sprintf("%d:%02d", $t["min"], $t["sec"]);
}

function sql_timestamp_to_unix_timestamp($s){
return mktime(substr($s, 11, 2), substr($s, 14, 2), substr($s, 17, 2), substr($s,     5, 2), substr($s, 8, 2), substr($s, 0, 4));
} 
```

错误是：

```
[12-Feb-2013 11:06:36] PHP Warning:  mktime() expects parameter 4 to be long, string given in /home/myweb/public_html/bgcode/functions.php on line 543 
```

而 543 行是（来自上面的行/脚本）

```
return mktime(substr($s, 11, 2), substr($s, 14, 2), substr($s, 17, 2), substr($s, 5, 2), substr($s, 8, 2), substr($s, 0, 4)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:04:52.497

由于您传递的所有值都是字符串，并且第四个必须是数字，因此您需要计算到第四个参数并确保它是一个数字。如果您的 substr 正确完成（我没有检查），那么在传递它之前将该值转换为数字将是一件简单的事情。首先要做的是仔细检查您作为参数 4 传递的内容是否与您认为的相同。然后阅读`intval()`： http: [//php.net/manual/en/function.intval.php](http://php.net/manual/en/function.intval.php)

编辑补充：经过一分钟的思考，我怀疑您是否需要这样的函数（如果您使用的是 MySQL，请参阅 UNIX_TIMESTAMP()），即使您这样做了，strtotime() 也可能会完成繁重的工作为你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T06:09:38.617

实际上，我认为您正在寻找 strtotime 函数，而不是 mktime：

[http://www.php.net/manual/en/function.strtotime.php](http://www.php.net/manual/en/function.strtotime.php)

然后，您可以调用 strtotime 而不是创建自己的 sql_timestamp_to_unix_timestamp 函数，除非您希望它以不同于 strtotime 本身的方式处理无效值。

# windows-8 - 如何在win8应用程序中获取图像的像素

> ID：14826343
> 
> 赞同：0
> 
> 时间：2013-02-12T05:56:11.777
> 
> 标签：windows-8, windows-runtime

在 c# 中，我们可以使用按像素比较图像，

```
 Bitmap b1 = new Bitmap(textBox1.Text);
        Bitmap b2 = new Bitmap(textBox2.Text);       
            for (int x = 0; x < b1.Width; x++)
            {
                for (int y = 0; y < b1.Height; y++)
                {
                    if (b1.GetPixel(x, y) != b2.GetPixel(x, y))
                    {
                        Console.Out.Write("Mismatch");
                    }
                }
            } 
```

winRT 应用程序中的像素如何通过这种方式进行比较？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:25:09.957

```
using System;
using System.Diagnostics;
using System.IO;
using System.Linq;
using System.Runtime.InteropServices.WindowsRuntime;
using System.Threading.Tasks;
using Windows.ApplicationModel;
using Windows.UI.Popups;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Media.Imaging;

namespace App110
{
    public sealed partial class MainPage : Page
    {
        public MainPage()
        {
            this.InitializeComponent();
            Test();
        }

        private async void Test()
        {
            // Comparing image to itself should return true
            Debug.Assert(await ComparePackageImages("Assets\\Logo.png", "Assets\\Logo.png"));

            // "Copy of Logo.png" is "Logo.png" with changed one pixel
            // and should return false when compared with "Logo.png"
            Debug.Assert(!await ComparePackageImages("Assets\\Logo.png", "Assets\\Copy of Logo.png"));

            // Two images of different size should 
            Debug.Assert(!await ComparePackageImages("Assets\\Logo.png", "Assets\\SmallLogo.png"));

            await new MessageDialog("Success!").ShowAsync();
            Application.Current.Exit();
        }

        private async Task<bool> ComparePackageImages(string packageFilePath1, string packageFilePath2)
        {
            var b1 = await LoadWriteableBitmapFromPackageFilePath(packageFilePath1);
            var b2 = await LoadWriteableBitmapFromPackageFilePath(packageFilePath2);

            var pixelStream1 = b1.PixelBuffer.AsStream();
            var pixelStream2 = b2.PixelBuffer.AsStream();

            return StreamEquals(pixelStream1, pixelStream2);
        }

        private static async Task<WriteableBitmap> LoadWriteableBitmapFromPackageFilePath(string packageFilePath1)
        {
            var bitmap = new WriteableBitmap(1, 1);
            var storageFile = await Package.Current.InstalledLocation.GetFileAsync(packageFilePath1);

            using (var streamWithContentType = await storageFile.OpenReadAsync())
            {
                await bitmap.SetSourceAsync(streamWithContentType);
            }

            return bitmap;
        }

        static bool StreamEquals(Stream stream1, Stream stream2)
        {
            const int bufferSize = 2048;
            byte[] buffer1 = new byte[bufferSize]; //buffer size
            byte[] buffer2 = new byte[bufferSize];

            while (true)
            {
                int count1 = stream1.Read(buffer1, 0, bufferSize);
                int count2 = stream2.Read(buffer2, 0, bufferSize);

                if (count1 != count2)
                    return false;

                if (count1 == 0)
                    return true;

                // You might replace the following with an efficient "memcmp"
                if (!buffer1.Take(count1).SequenceEqual(buffer2.Take(count2)))
                    return false;
            }
        }
    }
} 
```

流比较由[比较 C# 中的二进制文件](https://stackoverflow.com/questions/968935/c-sharp-binary-file-compare)提供。

位图访问代码片段由[WinRT XAML Toolkit](http://bit.ly/WinRTXamlToolkit)提供。

# android - 替换默认的 Android Maps API v2 更改 MyLocation 图标

> ID：14826345
> 
> 赞同：27
> 
> 时间：2013-02-12T05:56:18.977
> 
> 标签：android, google-maps, android-maps-v2

我想用我自己的图像替换 Android Maps V2 用于“我的位置”的默认图标。我创建了自己的图块提供程序，它引入了一些主要是蓝色的地图，因此默认的“我的位置”图标，即蓝色的小箭头，很难看到。

![](../Images/efecd2c3f129deff14fa6567cce3e79b.png)

以前我只是重写了 的 draw 方法`MyLocationOverlay`，但新 API 中似乎没有。

我还需要图标能够旋转，就像箭头一样，取决于你面对的方向。所以我不能只使用普通的标记。基本上我只需要为那个箭头创建一个自定义图像。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-12T06:07:20.447

我简单的解决方法就是禁用谷歌地图的“我的位置”

并使用我的图标在地图上创建 ImageView，然后使用

onClick 和 getMyLocation ， onClick 中的 animateCamera

```
 this.mGoogleMap.getUiSettings().setMyLocationButtonEnabled(false);
 this.mGoogleMap.setMyLocationEnabled(true); 
```

.

```
@Override
public void onClick(final View v) {

    Location location = this.mGoogleMap.getMyLocation();

        if (location != null) {

            LatLng target = new LatLng(location.getLatitude(), location.getLongitude());
            CameraPosition position = this.mGoogleMap.getCameraPosition();

            Builder builder = new CameraPosition.Builder();
            builder.zoom(15);
            builder.target(target);

            this.mGoogleMap.animateCamera(CameraUpdateFactory.newCameraPosition(builder.build()));

          }    
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-10-29T06:50:41.930

Google Play 服务的最新更新现在允许您使用“平面”标记并旋转它们，这正是我所需要的。这是我实现它的方式的简单版本。我可能可以做一些事情来优化和调整动画，但它暂时可以完成这项工作。欢迎任何反馈。

```
Marker mPositionMarker;
GoogleMap mMap;

@Override
public void onLocationChanged(Location location) {

    if (location == null)
        return;

    if (mPositionMarker == null) {

        mPositionMarker = mMap.addMarker(new MarkerOptions()
                .flat(true)
                .icon(BitmapDescriptorFactory
                        .fromResource(R.drawable.positionIndicator))
                .anchor(0.5f, 0.5f)
                .position(
                        new LatLng(location.getLatitude(), location
                                .getLongitude())));
    }

    animateMarker(mPositionMarker, location); // Helper method for smooth
                                                // animation

    mMap.animateCamera(CameraUpdateFactory.newLatLng(new LatLng(location
            .getLatitude(), location.getLongitude())));

}

public void animateMarker(final Marker marker, final Location location) {
    final Handler handler = new Handler();
    final long start = SystemClock.uptimeMillis();
    final LatLng startLatLng = marker.getPosition();
    final double startRotation = marker.getRotation();
    final long duration = 500;

    final Interpolator interpolator = new LinearInterpolator();

    handler.post(new Runnable() {
        @Override
        public void run() {
            long elapsed = SystemClock.uptimeMillis() - start;
            float t = interpolator.getInterpolation((float) elapsed
                    / duration);

            double lng = t * location.getLongitude() + (1 - t)
                    * startLatLng.longitude;
            double lat = t * location.getLatitude() + (1 - t)
                    * startLatLng.latitude;

            float rotation = (float) (t * location.getBearing() + (1 - t)
                    * startRotation);

            marker.setPosition(new LatLng(lat, lng));
            marker.setRotation(rotation);

            if (t < 1.0) {
                // Post again 16ms later.
                handler.postDelayed(this, 16);
            }
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-31T12:12:05.983

从 3.1.36 开始，您无法更改图标（我觉得它将来会更改，但从 API v2 改进实施的速度来看，不会在圣诞节之前）。

但是，您现在可以使用标记，因为它具有`setIcon`功能。

基本上你必须忘记`GoogleMap.setMyLocationEnabled`，因为它总是会出现在上面。相反，您将创建自己的`LocationClient`并使用 lat、long 和 Bearing from`Location`来更新`Marker`. 另外添加一个`Circle`并使用准确度来产生类似于默认 myLocation 可视化的效果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T07:47:01.980

您无法处理 Google 地图上 MyLocation 按钮的单击事件，是的，但是有一个技巧可以让您根据需要获得行为：
首先在您的 layout.xml 文件中添加地图和虚拟 MyLocation 按钮。
您可以在相对布局的帮助下实现这一点：

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <fragment
        android:id="@+id/map"
        android:name="com.google.android.gms.maps.SupportMapFragment"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <Button
        android:id="@+id/myLocationButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginRight="10dp"
        android:layout_marginTop="10dp"
        android:background="@drawable/mylocation" />
</RelativeLayout> 
```

您可以使用“mylocation.png”，就像您在 Google 地图上看到的一样。
`LocationManager locationManager = (LocationManager)getSystemService(LOCATION_SERVICE);`

```
 Criteria criteria = new Criteria();
    String s = locationManager.getBestProvider(criteria, false);

    Location location = locationManager.getLastKnownLocation(s); 
```

调用您的虚拟 MyLocation 按钮的单击事件，您将在其中添加标记
`private GoogleMap googleMap; googleMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap(); LatLng latLng = new LatLng(location.getLatitude(), location.getLongitude()); googleMap.addMarker(new MarkerOptions().icon(YOUR_MODIFIED_ICON).position(latLng).title(TITLE).snippet(SNIPET));`
通过这种方式您可以修改 Google 地图的默认图标。
是的，您还需要设置缩放级别：
`googleMap.moveCamera(CameraUpdateFactory.newLatLng(latLng));`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-05T11:09:45.477

这是访问位置按钮的代码：

```
View mv=findViewById(R.id.map);
        View locationButton = ((View) mv.findViewById(Integer.parseInt("1")).getParent()).findViewById(Integer.parseInt("2"));
        RelativeLayout.LayoutParams rlp = (RelativeLayout.LayoutParams) locationButton.getLayoutParams();
// position on right bottom
        rlp.addRule(RelativeLayout.ALIGN_PARENT_TOP, 0);
        rlp.addRule(RelativeLayout.ALIGN_PARENT_TOP, RelativeLayout.TRUE);
        rlp.setMargins(0, 180, 180, 0); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-27T21:00:30.763

试试这个; 我使用它在地图上绘制路线，但我为标记和我的位置设置图标声明这个以查看您的位置：

```
 LocationManager locationManager = (LocationManager) 
    getSystemService(LOCATION_SERVICE);
    Criteria criteria = new Criteria();
    String provider = locationManager.getBestProvider(criteria, true);
    Location myLocation= locationManager.getLastKnownLocation(provider);

    longitude = myLocation.getLongitude();
    latitude  = myLocation.getLatitude();
    fromPosition = new LatLng(latitude, longitude); 
```

并创建一个这样的函数，我用于在地图上绘制，但我在标记和我的位置上设置了图标：

```
mGoogleMap.clear();
if(response.equalsIgnoreCase("Success"))
{
     ArrayList<LatLng> directionPoint = v2GetRouteDirection.getDirection(document);
     PolylineOptions rectLine = new PolylineOptions().width(7).color(Color.BLUE);

     for (int i = 0; i < directionPoint.size(); i++) {
     rectLine.add(directionPoint.get(i));
     }
     // Adding route on the map
     mGoogleMap.setOnMarkerClickListener(MainActivity.this);
     mGoogleMap.addPolyline(rectLine);
     markerOptions.position(fromPosition);
     markerOptions.draggable(true);
     Marker1 = mGoogleMap.addMarker(new MarkerOptions()
               .position(Estadio)
               .title("Estadio Cuscatlan")
               .snippet("Estadio Cuscatlan")                                                    
               .icon(BitmapDescriptorFactory                                          
               .fromResource(R.drawable.mapmarker))); 
     Marker2 = mGoogleMap.addMarker(new MarkerOptions()
               .position(Metrocentro)
           .title("Metrocentro")
           .snippet("Metrosuelo")
           .icon(BitmapDescriptorFactory
           .fromResource(R.drawable.mapmark
      Marker3 = mGoogleMap.addMarker(new MarkerOptions()
            .position(Mejicanos)
            .title("Mejicanos")
            .snippet("Mejicanos")
            .icon(BitmapDescriptorFactory
            .fromResource(R.drawable.mapmarker)));  
      MarkerMe = mGoogleMap.addMarker(new MarkerOptions()                                             
                        .position(fromPosition) 
                        .icon(BitmapDescriptorFactory
                        .fromResource(R.drawable.car64)));
   }
    Dialog.dismiss();
    } 
} 
```

# syntax - Ocaml语法解释好吗？

> ID：14826348
> 
> 赞同：0
> 
> 时间：2013-02-12T05:56:35.207
> 
> 标签：syntax, ocaml

我是 Ocaml 的新手，我试图弄清楚这个函数是如何工作的：

```
let ccc c1 c2 c3 = fun (s1, s2, s3) n ->
     let (t1, r1) = (c1 s1 2) in
        if r1 = 0
        then let (t2, r2) = (c2 s2 n) in ((t1, t2, s3), r2)
        else let (t3, r3) = (c3 s3 n) in ((t1, s2, t3), r3) ;; 
```

`c1, c2, c3`都是“选择者”。我知道该函数的目的是接收 3 个选择器，让第一个选择器选择要使用的其他两个选择器中的哪一个，但我对语法感到困惑。谁能解释一下？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T06:16:44.597

不知道哪个部分令人困惑，很难回答。这里有一些简单的例子，展示了一些比较棘手的部分。

```
# let f = fun x -> x + 1;;
val f : int -> int = <fun>
# f 3;;
- : int = 4 
```

这定义`f`为一个将整数加一的函数。该表达式`fun args -> expr`定义了一个函数，并将`let`该函数绑定到 name `f`。

```
# let f x = x + 1
val f : int -> int = <fun>
# f 3;;
- : int = 4 
```

这定义了相同的函数 f。意思是完全一样的，只是一个稍微友好的符号。

无论出于何种原因，您的代码都使用*这两种*表示法。我不确定我是否有这样做的充分理由，但它确实强调如果您将三个函数传递给`ccc`您将获得一个函数。

其他部分非常简单（尽管可能需要一些时间来适应）：

函数调用仅通过将内容彼此相邻编写来形成：

```
c1 s1 2
c2 s2 n
c3 s3 n 
```

这些只是对`c1`、`c2`和的调用`c3`。

元组使用逗号（通常也使用括号）形成。`(t1, r1)`调用返回的一对值也是如此`c1`。

我假设你理解`if`//`then`和`else`. `let` `in`如果不是，它们并不难解释。

我实际上建议阅读有关 OCaml 的教程。它应该比在 SO 上一次问一个问题更有效。[ocaml.org](http://ocaml.org)上有很好的教程。

# javascript - 如何保留共享节点集群中所有节点进程的变量？

> ID：14826349
> 
> 赞同：22
> 
> 时间：2013-02-12T05:56:36.487
> 
> 标签：javascript, node.js, node-cluster

似乎所有节点唤醒器进程都在工作，就好像它正在执行同一应用程序的新副本一样。但是希望保留一些由节点集群中所有节点工作人员（子进程）共享的变量。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-12T14:31:21.333

所有工作进程确实是您的应用程序的新副本。每个 worker 都是使用 child_process.spawn 创建的全功能进程。所以不，他们不共享变量。这可能是最好的方式。如果您想在工作进程（通常是会话）之间共享信息，您应该考虑将这些信息存储在数据库中。

如果你准备好一直使用节点，你可以使用[dnode 之](https://github.com/substack/dnode)类的东西让你的工作人员向主进程询问数据。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-12T16:53:45.033

您可以尝试在主进程和子进程之间进行通信。例如：

脚本 test.master.js：

```
var cluster = require('cluster');
var childScript = __dirname + '/test.child.js';

cluster.setupMaster({ exec: childScript });

proc = cluster.fork();
proc.on('message', function(message) {
    console.log('message from child: ', message);
    proc.send('Hello from master!');
}); 
```

脚本 test.child.js：

```
console.log('Child initializing..');

process.on('message', function(message) {
    console.log('message from master: ', message);
});

process.send('Hello from Child!'); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-13T20:19:54.123

我为此使用了外部 memcached 或 redis 服务器。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-13T16:40:14.003

我认为集群的整个想法是拥有可以在不同 cpu 上独立运行的实例。共享它们都可以访问和更改的内存（一个全局变量）会引入更多的复杂性（锁等）并使这些实例相互依赖。

外部数据库将是一个很好的解决方案，因为它可以解决所有数据访问问题，但它很可能会降低性能。

消息传递是一个更好的主意。您可以在集群中保存 var 的本地实例。当集群更新值时，向其余集群发送消息并更新值。这很棒，因为它是异步且非阻塞的，但您的值更新不会立即反映。

怎么样：将变量存储在数据库上，并且每次发生值更改时都会通知实例。他们可以将新值存储在本地变量中，并仅在需要时进行数据库调用

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-27T17:05:45.387

如果您希望以只读方式共享内容，请查看[mmap-object](https://www.npmjs.com/package/mmap-object)。我将它用于大型内存查找表。

刚才在服务器上检查，一个 346M 的文件总共占用了 156M 的内存（mmap 仅在访问的页面中）并且 mmap-object 在 44 个进程之间共享它，每个进程的开销为 3.5M。

因为它是只读的，所以我不必担心进程间锁定和可能带来的混乱。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-03-07T14:46:31.913

还没有人提到这一点，但这是[Node Worker Threads](https://nodejs.org/api/worker_threads.html)的完美案例，它刚刚在最新版本的 Node v11.11.0 中退出了实验模式。

# php - 数据库中的数据不显示

> ID：14826354
> 
> 赞同：0
> 
> 时间：2013-02-12T05:57:02.337
> 
> 标签：php, android, mysql, ajax

嗨，我开发了一个 android 应用程序，它从 mysql 数据库中检索数据，但数据未显示。这是我的代码。

```
public class AllStoresFragment extends ListFragment{
    private String mClient;
    private String mBaseUrl="http://192.168.1.5/Flutura/PHP/";
    private String mDataUrl=mBaseUrl+"Core/Data/android.data.php";
    //private String mAssetsUrl=mBaseUrl+"Assets/";
    private ArrayList<String> mStoreDetailsList;
    private String mRequest="outlets";
    private String mLocation="all";
    private SharedPreferences myPrefs ;
    private StoreListItemAdapter mListAdapter;  

    public AllStoresFragment(StoreListItemAdapter listAdapter){
        mListAdapter = listAdapter;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        myPrefs = getActivity().getSharedPreferences("myPrefs", Context.MODE_WORLD_READABLE);
        executeAjaxRequest();

        return super.onCreateView(inflater, container, savedInstanceState);
    } 

    @Override
    public void onStart() {
        super.onStart(); 
        /** Setting the multiselect choice mode for the listview */
        getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    }

    private void executeAjaxRequest(){
        if(mListAdapter != null){
            mListAdapter.clear();
        }
        mClient = myPrefs.getString("client", "all");
        String url = mDataUrl+"?client="+mClient+"&request="+mRequest+"&location="+mLocation;       
        Log.v("url",url); 

        AsyncHttpClient httpclient = new AsyncHttpClient();
        httpclient.get(url, new AsyncHttpResponseHandler() {
            @Override
            public void onSuccess(String response) {
                setOutletData(response);
            }
        });
    }

    private void setOutletData(String response){        
        /** Creating array adapter to set data in ListView using AJAX Data*/

        try{            
          ArrayList<StoreDetails> store_details_list = new ArrayList<StoreDetails>();
          Log.v("response",response);
          mStoreDetailsList = Utils.ToArrayList(new JSONArray(response));
          Log.v("store_list",mStoreDetailsList.toString());

          Iterator<String> i = mStoreDetailsList.iterator();          
          String json_store = "";

          //Loop the list
          while( i.hasNext() ){
            json_store = i.next();
            JSONObject store = new JSONObject( json_store );      

            //Create a StoreDetails object and add it to the ArrayList Of StoreDetails
            store_details_list.add( new StoreDetails( store ) );            
          }     
          //Set the data adapter for the List

          StoreListItemAdapter sla = new StoreListItemAdapter( getActivity() , R.layout.storelist_item , store_details_list );
          sla.notifyDataSetChanged();
          setListAdapter(sla  );
        }
        catch(JSONException e){
          e.printStackTrace();
        }

    }
    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {  
      // TODO Auto-generated method stub      
      Intent myIntent = new Intent(getActivity(),StoreActivity.class);// getActivity needs to be called since this is a Fragment Class.
      SharedPreferences myPrefs = getActivity().getApplicationContext().getSharedPreferences("myPrefs",Context.MODE_WORLD_READABLE);
      SharedPreferences.Editor prefsEditor = myPrefs.edit();

      prefsEditor.putString("outlet_details", mStoreDetailsList.get(position));
      prefsEditor.commit();
      startActivity(myIntent);
   }
} 
```

这是我的 php 代码。

```
<?php

//connect to the db
$user = "root";
$pswd = "";
$db = "recommendations_db";
$host = "localhost";
$conn = mysql_connect($host, $user, $pswd);
mysql_select_db($db);
$query = "SELECT * FROM outlets";
$result = mysql_query($query) or die("Unable to verify user because : " . mysql_error());

while($row = mysql_fetch_array($result))
  {
  $output[] = $row; 
  }
echo json_encode($output);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:00:19.287

尝试这个。

```
while($row = mysql_fetch_assoc($result))
{
   $output[] = $row;
}

echo "<pre>"; // this is just test
print_r($output); // this is just test so after test remove it.

echo json_encode($output); 
```

`mysql_fetch_assoc()`是带有键名的数组，因此它们更易于阅读。

# templates - 在渲染期间使用 Kendo TreeView 中的模板（Razor 视图）

> ID：14826357
> 
> 赞同：1
> 
> 时间：2013-02-12T05:57:08.873
> 
> 标签：templates, razor, treeview, kendo-ui

我想在树视图中的每个项目旁边插入一个额外的隐藏 Kendo 控件（文本框、下拉列表等）。在 Telerik Treeview 中，我使用了

**更新：**

```
telerikTreeview.Template.InlineTemplate =@<text>  @(Html.Kendo().AutoComplete().Name("test1"))  </text>; 
```

在渲染期间，我能够在树视图项旁边插入一个控件。

这对 Kendo Treeview 可行吗？它似乎没有 InlineTemplate 功能。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:15:20.570

是的，有可能，您是否尝试过模板方法？

```
@(Html.Kendo().TreeView()
    .Name("treeview")
    .DataTextField("Name")
    .DataSource(dataSource => dataSource
        .Read(read => read
            .Action("Employees", "TreeView")
        )
    )
    .Template("<input type='text' /> ")
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T03:07:51.090

我刚刚发现 Kendo 仍然支持内联模板。它只是没有出现在智能和他们的文档中。不知道那里发生了什么。但是当我尝试这段代码时，它起作用了！

```
 kendoTreeview.Template.InlineTemplate = @<text>
     @(Html.Kendo().AutoComplete().Name("test1")) 
   </text>; 
```

谢谢您的帮助！

# iphone - 内部分配说明

> ID：14826358
> 
> 赞同：2
> 
> 时间：2013-02-12T05:57:12.137
> 
> 标签：iphone, ios, objective-c, xcode, itunes

我有一个应用程序，我需要无限的非技术人员才能下载，我无法通过 iTunes 商店分发它。

我读过一些关于内部发行的文章，这似乎是我应该追求的。我还不完全确定它是如何工作的。

据我了解，您可以编译该应用程序并将其上传到某种网站，然后人们可以从那里下载它。

这是从用户角度来看的过程吗？

你能链接到一个例子吗？

你知道描述整个过程的好（最近的）教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:03:28.920

从您的问题中，我了解到，您想开发仅供公司人员使用的应用程序。并且应用程序不会显示在 Apple Store 上供其他一般人下载。

为了那个原因，

你应该去开发“企业帐户”。

实际上，Apple 有两种类型的帐户：

1) 开发者账号：当你在 App Store 上发布你的应用程序时使用。

2) 企业帐户：这是用于内部开发的。当您将帐户创建为 Enterprise 时，您将能够创建用于内部开发的应用程序，公司人员可以下载并在他/她的设备上安装该应用程序。您不能使用此帐户在 App Store 上发布您的应用程序。

我希望，这些信息对你有用。

有一个好的开始。

干杯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T06:04:17.963

1.  这是从用户角度来看的过程吗？:**是的，这是可能的。只是您需要企业分发许可证。几个月来，我一直在无线分发我的应用程序，没有任何问题。当然，我是根据企业许可证分发的，该许可证每年花费 299 美元，旨在供内部业务使用。**
2.  你能链接到一个例子吗？：**检查并[在](https://developer.apple.com/programs/ios/enterprise/)[这里](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/ManaginganiOSDistributionCertificate/ManaginganiOSDistributionCertificate.html)申请**
3.  你知道描述整个过程的好（最近的）教程吗？:**你也会在上面的链接中得到这个。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T06:44:30.723

好吧，我有同样的疑问，我曾经用几个答案搞砸了自己。然后我坐了一会儿，浏览了苹果文档。这是他们文档中的一些注释

**要为 iOS 开发和部署自定义应用程序，**

首先在以下网址注册 iOS 开发者企业计划：[developer.apple.com/programs/ios/enterprise](http://developer.apple.com/programs/ios/enterprise) 注册后，

您可以申请**开发者证书和开发者配置文件**。

您在开发过程中使用这些来构建和测试您的应用程序。开发配置文件允许使用您的开发者证书签名的应用程序在注册设备上运行。您在 iOS 配置门户中创建开发人员配置文件。

那是为了构建和测试应用程序。

***现在进行分发***

有两种选择：

```
 In-House and Ad-Hoc 
```

**Ad-Hoc ：** ad-hoc 配置文件过期`after 3 months`并指定*`which devices (by device ID)`*可以运行您的应用程序的开发版本。您将开发人员签名的构建和开发配置文件分发给您的应用程序团队和**测试人员**。

**In-House：** 现在，当您觉得您的应用程序已准备好在完成所有测试后分发给真实用户时。您可以使用构建您的应用内部配置文件。查看图片以获取更多详细信息![在此处输入图像描述](../Images/ea79ea8d8d795985ca737d7652af6c18.png)

唯一的区别是您不需要为内部分发配置文件添加设备 ID。

我使用 testflightapp.com 来分发带有内部配置文件的应用程序。您可以选择使用自己的线框。

我知道您不需要将您的应用提交到应用商店进行审核。它不是必需的，但我的客户总是希望如此，我将我们的企业应用程序提交到应用程序商店仅用于审核而不是发布。

我会建议你通过这个[文档](https://help.apple.com/iosdeployment-apps/mac/1.1/#app43ad8905)

快乐编码:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T06:17:46.993

您可以简单地使用[https://testflightapp.com/](https://testflightapp.com/)。它非常易于使用。

您可以生成一个临时分发证书，其中包括您需要与之共享的所有 UDID。上传之后，您将构建到 testflight。它具有通过电子邮件通知用户的功能。

然后您的最终用户可以简单地从设备打开该电子邮件并通过单击安装按钮安装构建。

# django - 如何给当前时间有默认值

> ID：14826364
> 
> 赞同：0
> 
> 时间：2013-02-12T05:58:30.657
> 
> 标签：django

在模型中，我有一个 DateTime 字段。但在我的模板中，我有单独的日期和时间供用户输入。我如何将当前时间设为默认值。

```
Models.py

 datetime_reading=models.DateTimeField()

truepower_reading=models.DecimalField(verbose_name="True Power Reading(KWH)",max_digits=6,decimal_places=2,blank=False,null=False)
apparentpower_reading=models.DecimalField(verbose_name="Apparent Power Reading(KVAH)",max_digits=6,decimal_places=2,blank=False,null=False)
truepower_consumed=models.DecimalField(max_digits=6,decimal_places=2,blank=False,null=False)
voltage_reading=models.IntegerField(blank=False,null=False)
powerfactor=models.DecimalField(max_digits=3,decimal_places=2)

 Forms.py

Date=forms.DateField()
Time=forms.TimeField()
fields = ('date', 'time', 'truepower_reading', 'apparentpower_reading',"voltage_reading")
class Meta:
    model=KEBReading
    exclude=("truepower_consumed","powerfactor","datetime_reading")
    widgets = {

               "date" : forms.widgets.DateInput(format="%d/%m/%Y"),
               "time" : forms.widgets.TimeInput(format="%H:%M")
               }

 views.py
 def KEBReading1(request):
q2=KEBReading.objects.all().order_by('datetime_reading')[:30]

form = KEBReading_form()
monthform=MonthForm()
if request.method == "POST":
    if request.POST.get('KEBsubmit'):
        form = KEBReading_form(request.POST)
        if form.is_valid():
            try:
                prevdate=KEBReading.objects.latest("datetime_reading")                   
                date=form.cleaned_data["Date"]
                print type(date)

                time=form.cleaned_data["Time"]
                print type(time)

                kr_truepower_reading = form.cleaned_data["truepower_reading"]
                kr_apparentpower_reading = form.cleaned_data["apparentpower_reading"]

                truepower_consumed1=kr_truepower_reading-prevdate.truepower_reading
                powerfactor1=((kr_truepower_reading-prevdate.truepower_reading)/(kr_apparentpower_reading-prevdate.apparentpower_reading))     
                form1=form.save(commit=False)
                print "tee"
                form1.datetime_reading=datetime.combine(date,time)
                print form1.datetime_reading

                form1.truepower_consumed=truepower_consumed1
                form1.powerfactor=powerfactor1

                print form1.powerfactor

                form1.save() 
```

这是我的视图代码。我试图从表格中获取输入的时间。但我是否给用户输入的当前时间。

```
views.py

q2=KEBReading.objects.all().order_by('datetime_reading')[:30]

form = KEBReading_form()
monthform=MonthForm()
if request.method == "POST":
    if request.POST.get('KEBsubmit'):
        form = KEBReading_form(request.POST)
        if form.is_valid():
            try:
                prevdate=KEBReading.objects.latest("datetime_reading")    
                time = datetime.datetime.now().strftime("%I")
                data = {'Time':time}
                form = KEBReading_form(data)     

                date=form.cleaned_data["Date"]
                print type(date)

                time=form.cleaned_data["Time"]
                print type(time)

                kr_truepower_reading = form.cleaned_data["truepower_reading"]
                kr_apparentpower_reading = form.cleaned_data["apparentpower_reading"] 
```

我在上面提到的观点中给出了它。我是否也必须在表格中指定 sumthin ？？？

我想要小时、分钟和秒。这是正确的吗

```
form = KEBReading_form()
time1 = datetime.datetime.now()
time=time1.hour,time1.minute,time1.second

data = {'Time':time}
print data
form = KEBReading_form(data) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:01:12.543

该[文档](https://docs.djangoproject.com/en/dev/ref/forms/api/#dynamic-initial-values)描述了在表单中设置初始值。

**视图.py**

```
def view_name(request):    
    q2=KEBReading.objects.all().order_by('datetime_reading')[:30]
    time = datetime.datetime.now().strftime("%I:%M")
    data = {'Time':time}
    form = KEBReading_form(data)
    monthform=MonthForm()

    if request.method == "POST":
        ...........

    return render(request, 'page.html', {'form':form,}) 
```

# android - NoClassDefFoundError，找不到类***

> ID：14826367
> 
> 赞同：0
> 
> 时间：2013-02-12T05:58:39.667
> 
> 标签：android, api, noclassdeffounderror

我正在开发一个在我的模拟器（Android 4.0.3）和运行 Android 4.1.2 的设备上运行良好的应用程序。我也让这个应用程序在另一台运行 Android 2.2.2 的设备上运行良好，但它不再在这台旧设备上运行。在我的 MainMenuActivity 的 onClick 方法中定义意图时，我得到的错误是 NoClassDefFoundError。

自从在旧设备上测试应用程序以来，我进行了一些更改，但相关的似乎是我已将 Android sdk 更新到 API 17（我相信从 API 15 开始）。

我确实有一个包含在应用程序中的 jar 文件，但它没有在 NoClassDefFoundError 所指的类中使用。

我已经尝试了许多针对这些问题的建议解决方案，例如定义一个名为 libs 的新文件夹并将 jar 文件放入其中，或者转到构建路径，选择 Order and Export 下的文件，然后将其移至顶部以及清洁和重建。

任何帮助将不胜感激，因为此应用程序的最低 sdk 版本为 8。

非常感谢你！

**编辑**

我相信我已经找到了问题所在。我在导致错误的活动中实现 android.widget.PopupMenu.OnMenuItemClickListener ，但 eclipse 没有给我任何警告，这仅对 API 11 及更高版本有效。不知道为什么会这样。无论如何，我将不得不找到一些工作来获得我需要的效果。我会将其标记为已解决，但任何有关如何做到这一点的建议将不胜感激。

再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:18:26.647

我在导致错误的活动中实现 android.widget.PopupMenu.OnMenuItemClickListener ，但 eclipse 没有给我任何警告，这仅对 API 11 及更高版本有效。删除这个实现和相关的方法就可以了。

# ios - 如何自定义 UITableViewCell 以在一个单元格中合并多个大小的图像？

> ID：14826368
> 
> 赞同：0
> 
> 时间：2013-02-12T05:58:49.623
> 
> 标签：ios, objective-c, xcode, uitableview

![在此处输入图像描述](../Images/a1e7f69c63fefdccf91cbbbbfd74d5ae.png)

我正在从 JSON 提要加载多个 (3-4) 项（数量会因日期而异）。每个项目将有 4 个属性：icon、title、subtitle 和 large_image。解析并显示第一项后，我希望显示下一项。

我的问题是：我可以为提要中的每个项目定制一个 UITableViewCell 看起来像这样吗？如果是这样，我该怎么做？通过 google/stackoverflow 搜索，我看到了如何在自定义单元格中执行图标图像 + 标题 + 副标题，但也没有关于如何合并大图像。

如果不是自定义 UITableView，我该如何启用它？我是否制作了根据提要中的项目数量动态呈现的单个 UILabel 和 UIImageView？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:06:58.880

非常简单，但适合 iOS 初学者。

以下是步骤：

```
Create a xib file (which should be a subclass of UITableViewCell. Drag and drop 2 UILabels, and place it how you want for each row. Drag and drop 2 imageviews as well. One should be for icon, (preferably smaller in size) and other one should depict the large image. 

In `cellForRowAtIndexPath method of tableview, try to load the custom cell object and pass the values you have in json parsed array (formatted array containing data for each row). Update your cell UI in cellforRowAtIndexPath.` 
```

[点击这里](http://www.icodeblog.com/2009/05/24/custom-uitableviewcell-using-interface-builder/ "点击这里")-`this is something which best fits your issue, you can customize more according to your need. (add label, largeimageview)`

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:09:39.463

您正在寻找自定义的 uitableviewcell。这个问题已经在[这里](https://stackoverflow.com/questions/9014105/where-is-a-good-tutorial-for-making-a-custom-uitableviewcell)问过了，也有一个教程链接。从一个简单的例子开始。

# c - 获取jpeg图像的大小

> ID：14826371
> 
> 赞同：1
> 
> 时间：2013-02-12T05:59:07.990
> 
> 标签：c

我正在尝试通过执行以下操作来获取图像文件的大小

```
fp = fopen(path,"rb");
fseek(fp,0,SEEK_END);
size = ftell(fp);
fseek(fp,0,SEEK_SET); 
```

问题是当我到达第一个 fseek 时，我的程序终止了。我已经用文本文件进行了测试，它可以工作，并且在网上看到了一些其他示例，其中相同的方法适用于图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:07:46.480

你很封闭，只是一点点不同

```
FILE *f = fopen("filename", "rb");
long size = 0;

if (f == NULL)
 printf("error"); //handle error
else
{
fseek(f, 0, SEEK_END);
size = ftell(f);
} 
```

# c# - 在我的代码上隐藏继承的成员警告消息！- 不知道从哪里来

> ID：14826372
> 
> 赞同：3
> 
> 时间：2013-02-12T05:59:14.260
> 
> 标签：c#, .net

我是 C# 新手，我有一个在按下按钮或键盘快捷键时被调用的方法。起初，一切都很顺利，当我的项目几乎完成时，我做了一些代码清理（我删除了一些注释并删除了不必要的代码）。但之后会出现一条警告消息，并且键盘快捷键不像以前那样起作用，这是警告消息：

> 警告 1“Inventory_program.IPForm.Update()”隐藏了继承的成员“System.Windows.Forms.Control.Update()”。如果打算隐藏，请使用 new 关键字。

这是我的代码：

```
 private void Update()
    {
     if (getset.clik2 == 1)
       {
         MessageBox.Show("No data to update, dumbass!!", "!!");
       }
     else
       {
         query = @"select ip_address, pc_name, mac_address, users_owner, locations, remarks
                 from it_ip_inventory ";
         dataGridView1.DataSource = exec.InitConn(query);

       }            
    } 
```

抱歉，我没有足够的人气来上传图片。

请帮忙，我不知道如何解决它。我正在使用 WinForms。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T06:08:00.477

该方法`Update()`是为控件基类定义的。

见这里：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.control.update.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.update.aspx)

在您的代码中，如果它们具有不同的参数（重载），您可以将事物命名为与现有（继承）方法相同的名称。在您的情况下，您`Update()`的签名与内置方法相同。

我建议您借此机会将方法重命名为更具描述性的名称，例如

```
private void UpdateFromDatabase()
{
} 
```

# python - 从微笑文件中检索所有分子

> ID：14826373
> 
> 赞同：3
> 
> 时间：2013-02-12T05:59:18.970
> 
> 标签：python, bioinformatics, biopython, cheminformatics

我正在处理 .smiles 文件。.smiles 文件的文件结构是：[http ://en.wikipedia.org/wiki/Chemical_file_format#SMILES](http://en.wikipedia.org/wiki/Chemical_file_format#SMILES)

我想从微笑文件中获取所有原子。这意味着如果有单个“C”原子，则意味着将有 4 个“H”原子连接到它们。

我在搜索时发现 python 中有一些模块可以解析微笑格式，但它们不提供支持的氢原子。（例如：他们只给出'C'而不是其他4个'H'原子连接到那个'C'原子）

如何使用 python 找到所有原子，包括连接的“H”原子。
需要转换为所有原子的微笑文件示例，包括连接的“H”原子：

```
[H]OC([H])([H])[C@@]1([H])C([H])=C([H])[C@@]([H])(n2c([H])nc3c(nc(nc23)N([H])[H])N([H])C2([H])C([H])([H])C2([H])[H])C1([H])[H] 
```

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T09:38:42.803

请参阅[打开通天塔](http://openbabel.org/wiki/Main_Page)。

Open Babel 网站上的有用链接

*   “[指南](http://openbabel.org/wiki/Category%3aGuides)”
*   [能力](http://openbabel.org/wiki/Capabilities)
*   [在 Open Babel 中使用 Python](http://openbabel.org/wiki/Python)
*   [其他工具](http://openbabel.org/wiki/Tutorial%3aOther_Tools)，包括一个工具（[obprop](http://openbabel.org/wiki/Obprop)）

另请参阅
[此博客](http://pythonchem.blogspot.in/)（由 Casper Steinmann 撰写）关于 Python 化学（使用 Open Babel，但并非全部）

**更新** 请参阅此代码（未经测试）：

```
mymol = pybel.readstring("smi",  
"[H]OC([H])([H])[C@@]1([H])C([H])=C([H])[C@@]([H])(n2c([H])nc3c(nc(nc23)" + \
"N([H])[H])N([H])C2([H])C([H])([H])C2([H])[H])C1([H])[H")
print mymol.addh() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T07:07:14.600

*我想从微笑文件中获取所有原子。这意味着如果有单个“C”原子，则意味着将有 4 个“H”原子连接到它们。* 这个假设是不正确的，它可以是1,2,3个氢。

尝试使用 openbabel、CDK 或类似的化学信息学库。

但是，为什么你需要文件中的所有原子？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-12T07:24:01.657

对于以 SMILES 形式给出的化合物的分子量，Openbabel 的 Python 绑定应该可以工作：

```
import pybel
mol = pybel.readfile("smi", "stuff.smi").next()
print mol.molwt 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-12T09:05:39.280

试试[frowns](http://frowns.sourceforge.net/)，这是一个化学信息学工具包，旨在快速开发化学相关算法。它几乎 100% 用 Python 编写，一小部分用 C++ 编写。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-11T15:19:31.050

[RDKIT](http://www.rdkit.org) is a well defined cheminformatics library in python.

To read a molecule from smiles,

```
from rdkit import Chem

m = Chem.MolFromSmiles('[H]OC([H])([H])[C@@]1([H])C([H])=C([H])[C@@]([H])(n2c([H])nc3c(nc(nc23)N([H])[H])N([H])C2([H])C([H])([H])C2([H])[H])C1([H])[H]') 
```

After you read in the smiles into an RDKIT molecule you can pretty much do everything. documentation - [http://www.rdkit.org](http://www.rdkit.org)

# javascript - javascript如何结束子窗口

> ID：14826377
> 
> 赞同：0
> 
> 时间：2013-02-12T05:59:38.970
> 
> 标签：javascript, video, window.open

我在 javascript 中有一个窗口，可以打开一个子窗口来播放视频。子窗口的唯一目的是播放视频，仅此而已

javascript代码：

```
locationstr = targetvideostr + ".mp4"   // example: locationstr = "video232.mp4"
videowindow = window.open (locationstr, "") // open new window 
```

子窗口打开正常，视频自动启动并完美播放。但是，我希望子窗口在视频播放结束后自动关闭。

一些浏览器会在视频播放结束后自动关闭子窗口，但其他浏览器不会这样做并让窗口保持打开状态。（视频结束后，chrome 不会关闭窗口，而 android 默认浏览器会关闭）。

我可以从家长那里查看视频是否结束了吗？我可以在子窗口中设置一个事件以使其自行关闭吗？

感谢您的任何想法或帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:03:01.273

如果子窗口位于其他域名上，则您不能与子窗口交互（读取或写入属性，并执行函数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:10:23.093

使用 HTML5 **onended**事件处理程序

```
var video = document.getElementById('video');
video.onended = function(e) {
    videowindow.close();
} 
```

# python - 从两列随机生成唯一组合

> ID：14826378
> 
> 赞同：1
> 
> 时间：2013-02-12T05:59:40.110
> 
> 标签：python, linux, excel, shell, random-sample

我在一个大文件中有两列，比如说

```
pro1 lig1
pro2 lig2
pro3 lig3
pro4 lig1
..... 
```

其次是列冗余。例如，我想要与给定组合不匹配的双倍大小的新随机组合

```
pro1 lig2
pro1 lig4
pro2 lig1
pro2 lig3
pro3 lig4
pro3 lig2
pro4 lig2
pro4 lig3
..... 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T06:15:58.770

如果您希望第一列中的每个值都有两个结果，我会强制使用不匹配的部分，如下所示：

```
import random

def gen_random_data(inputfile):
    with open(inputfile, "r") as f:
        column_a, column_b = zip(*(line.strip().split() for line in f))

    for a, b in zip(column_a, column_b):
        r = random.sample(column_b, 2)
        while b in r: # resample if we hit a duplicate of the original pair
            r = random.sample(column_b, 2)

        yield a, r[0]
        yield a, r[1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T06:52:15.403

使用一些排序、过滤、链接和列表推导，您可以尝试：

```
from itertools import chain
import random
random.seed(12345) # Only for fixing output, remove in productive code

words = [x.split() for x in """pro1 lig1
pro2 lig2
pro3 lig3
pro4 lig4""".split("\n")]

col1 = [w1 for w1,w2 in words]
col2 = [w2 for w1,w2 in words]

col1tocol2 = dict(words)        

combinations = chain(*[
                    [(w1, w2) for w2 in 
                        sorted(
                            filter(
                                lambda x: x != col1tocol2[w1], 
                                col2),
                            key=lambda x: random.random())
                            [:2]]
                    for w1 in col1])

for w1,w2 in combinations:
    print w1, w2 
```

这给出了：

```
pro1 lig3
pro1 lig2
pro2 lig4
pro2 lig1
pro3 lig4
pro3 lig2
pro4 lig3
pro4 lig1 
```

主要技巧是使用随机函数`key`for `sorted`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T06:11:54.500

```
c = """pro1 lig1
pro2 lig2
pro3 lig3
pro4 lig4"""
lines = c.split("\n")
set_a = set()
set_b = set()
for line in lines:
    left, right = line.split(" ")
    set_a |= set([left])
    set_b |= set([right])

import random
for left in sorted(list(set_a)):
    rights = random.sample(set_b, 2)
    for right in rights:
        print left, right 
```

**输出**

```
pro1 lig2
pro1 lig4
pro2 lig4
pro2 lig3
pro3 lig1
pro3 lig4
pro4 lig2
pro4 lig1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T06:09:24.033

假设您有两列：

```
col1 = ['pro1', 'pro2', ...]
col2 = ['lig1', 'lig2', ...] 
```

那么最直接的方法是使用`itertools.product`和`random.sample`如下：

```
from itertools import product
from random import sample

N = 100 #How many pairs to generate

randomPairs = sample(list(product(col1, col2)), N) 
```

如果`col1`和`col2`包含重复项，您可以通过`set(col1)`和提取唯一项`set(col2)`。

请注意，`list(product(...))`将生成`N * M`元素列表，其中`N`和`M`是列中唯一项目的数量。如果`N * M`最终数量很大，这可能会导致问题。

# ruby-on-rails - 在 Rails 中，是否可以将显示视图用作编辑视图？

> ID：14826383
> 
> 赞同：2
> 
> 时间：2013-02-12T05:59:54.587
> 
> 标签：ruby-on-rails, model-view-controller

这里是 Rails 新手，如果这很简单，请原谅。我很难找到答案，在我深入研究之前我想知道答案。

我打算构建的应用程序在“显示”视图和“编辑”视图之间并没有真正的区别。在大多数情况下，我会列出条目（索引视图），您只需单击即可直接进入编辑视图。不需要“显示”视图。

大多数应用程序都是这样的。不过，仍有一些部分需要“显示”视图。

是否可以设置这样的路由结构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T06:08:18.090

是的，您不必总是使用所有 7 个操作。

路由示例：

```
resources :users, except: :show 
```

控制器：

```
def edit
  @user = User.find(params[:id])
end

def update
  @user = User.find(params[:id])
  if @user.update_attributes(params[:user])
    redirect_to edit_user_path(@user)
  else
  ...
  end
end 
```

像往常一样将表单添加到编辑视图以及您将在显示视图中放入的任何其他内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T06:08:40.303

如果不需要显示视图，您可以简单地告诉资源路由`routes.rb`不包括它，例如：

```
resources :users, :except => :show 
```

如果您想对编辑和显示使用相同的视图，`show`例如，在您的操作中，您可以执行以下操作：

```
def show
  @user = User.find(params[:id])
  render :action => 'edit'
end 
```

这将`edit.html.erb`在显示操作被击中时使用该文件，尽管在我看来，您最好的选择是选择您计划使用的视图并在您的`routes.rb`.

如果您只是想在两个视图之间共享大量视图代码，但仍要区分它们，则只需将[Partials](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)用于共享代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T06:03:35.767

是的 - 您只需将表单部分添加到显示页面。这很常见。

# c++ - 为什么这让我得到一个指向 const 对象字段的非常量指针？

> ID：14826386
> 
> 赞同：0
> 
> 时间：2013-02-12T06:00:00.717
> 
> 标签：c++, constants

我正在用 clang++ ("Apple clang version 4.1 (tags/Apple/clang-421.11.66) (based on LLVM 3.1svn)") 编译这个片段，尽管 GCC 也可以做到这一点：

```
#include <iostream>

struct Foo
{
    typedef unsigned char MemoryPage[0x1000];

    MemoryPage* pages;

    Foo() { pages = new MemoryPage[16]; }
    ~Foo() { delete[] pages; }

    unsigned char* PointerToOffset(unsigned offset) const
    {
        return pages[offset >> 12] + (offset & 0xfff);
    }
}; 
```

它编译得很好。我很惊讶，因为`PointerToOffset`有`const`限定符，但返回值是非`const` `unsigned char`指针。

我还可以确保它返回的内存范围内的值`pages`，这意味着我得到了一个`const`指向实际对象数据的实际非指针`const`，而不是对目标数组的最终副本的悬空引用。

结果似乎是一个 const 不正确的方法，但仍然可以编译。是什么让它合法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T06:06:20.487

用最简单的话来说，变量，

```
MemoryPage* pages; 
```

将变为：

```
MemoryPage* const pages;  // and not `const MemoryPage*`
//          ^^^^^ 
```

在你的`const`函数里面：`PointerToOffset()`.

的意思`const`是类变量*不能被修改*。要创建`pages`一个不可变的实体，它`const`必须应用于`pages`自身，而不是它所指向的内容。
这就是编译器没有错误的原因。

为了理解起见，简单尝试声明`pages`为`const MemoryPage*`，然后您会注意到编译器即使在非常量函数中也会发出错误。

# ios - 如何在 VisualStudio 中运行现有的 phonegap(ios) 应用程序以进行 Windows 开发

> ID：14826387
> 
> 赞同：3
> 
> 时间：2013-02-12T06:00:17.350
> 
> 标签：ios, visual-studio-2010, cordova, windows-phone-7.1, cordova-2.0.0

自 6 个月以来，我一直在研究 phonegap (IOS)，应用程序已准备就绪。但现在我希望这个应用程序在visualstudio上运行。

我正在使用 VS2010 并且还为手机开发安装了 windows sdk。我还为 windows 安装了 cordova 模板，并且它在新开发中工作正常。

但现在我只想使用我在 xcode 中为 windows 中的 ios 制作的现成 phonegap 应用程序。

我怎样才能使它成为可能？

**编辑：** 当尝试将我的 ios 应用程序运行到 VS 时，我只是替换 VS 中应用程序的 WWW 文件夹并尝试运行应用程序。它很好地打开了模拟器，甚至调用了第一个“Index.html”页面，但没有 css/js 引用它的getting.even不调用点击事件。那么我必须为 Windows 执行的 WWW 文件夹结构有什么变化吗？我是 Windows 手机的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:47:17.580

1.  建设项目；然后检查 CordovaSourceDictionary.xml 中存在的所有文件
2.  如果没有，请确保您的所有文件都有构建操作内容（[如何在文件上设置构建操作 - 属性窗口中未显示高级属性](https://stackoverflow.com/questions/6498245/how-to-set-build-action-on-a-file-advanced-properties-not-displayed-in-propert)）
3.  如果这没有帮助尝试将以下行添加到您的 index.html 以查看是否有任何 js 错误（错误将显示在 VS 输出窗口中 - Ctrl+Alt+O）

> ```
> <script type="text/javascript">
>     window.console = {
>         log: function (str) { window.external.Notify(str); }
>     };
> 
>     // output errors to console log
>     window.onerror = function (e) {
>         console.log("window.onerror ::" + JSON.stringify(e));
>     };
> 
>     console.log("Installed console !");
> </script> 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:20:27.603

The cordova.js might be different on WP. Try to create a brand new WP project then copy the cordova.js to the www folder and you are good to go.

# knockout.js - 使用多个视图模型构建具有淘汰赛的搜索功能

> ID：14826394
> 
> 赞同：1
> 
> 时间：2013-02-12T06:00:57.520
> 
> 标签：knockout.js

我的搜索功能有 2 个视图模型，第一个视图模型包含 2 个可观察对象、搜索字符串和搜索类型。第二个视图模型是基于搜索的结果。在我的 Ajax 帖子中，我使用搜索类型和搜索字符串作为变量来获得所需的结果。但我收到以下错误***未捕获的错误：无法解析绑定。消息：ReferenceError：未定义客户；绑定值：foreach:Customers***因为客户数组尚未初始化，我根据搜索按钮单击为我的第二个视图模型应用绑定。这是一个[小提琴](http://jsfiddle.net/Fumunchu/CZaZU/)来更好地解释我正在尝试做的事情。

这是我完整的 javascript 代码段：

```
 var CustomerSearchViewModel = {
        SearchType: ko.observable(""),
        SearchString: ko.observable(""),
        setSearchType: function (data, element) {
            this.SearchType($(element.target).val());
        }
    }

    var CustomerSearhResultViewModelDS = function (data) {
        var self = this;
        self.CustomerID = ko.observable(data.CustomerID);
        alert(self.CustomerID);
        self.CustomerName = ko.observable(data.CustomerName);
        self.CustomerEMail = ko.observable(data.CustomerEMail);
        self.CustomerTelephone = ko.observable(data.CustomerTelephone);
        self.CustomerCompanyName = ko.observable(data.CustomerCompanyName);
        self.CustomerCompanyAddress1 = ko.observable(data.CustomerCompanyAddress1);
        self.CustomerCompanyAddress2 = ko.observable(data.CustomerCompanyAddress2);
        self.CustomerCompanyZipCode = ko.observable(data.CustomerCompanyZipCode);
    }

    var CustomerSearhResultViewModel = function (Customer) {
        var self = this;

        self.Customers = ko.observableArray(Customer);

        $.ajax({
            url: "/Services/DataServicesECOM.svc/CustomerSearch",
            data: { SearchType: CustomerSearchViewModel.SearchType(), SearchString: CustomerSearchViewModel.SearchString() },
            type: "GET",
            contentType: "application/json; charset=utf-8",
            dataType: "JSON",
            timeout: 10000,
            success: function (Result) {
                var MappedCustomer =
              $.map(Result.d,
             function (item) {
                 return new CustomerSearhResultViewModelDS(item);
             }
               );
             self.Customers(MappedCustomer);
                $('#ModalDetail').modal('show');
            },
            error: function (xhr, status) {
                alert(status + " - " + xhr.responseText);
            }
        });
    };

    function ActivateSearch() {
        var VM = new CustomerSearhResultViewModel();
        ko.applyBindings(VM);
    }

    $(document).ready(function () {
        ko.applyBindings(CustomerSearchViewModel);
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:28:03.877

嗯，首先，您需要将每个视图模型绑定到页面的不同部分。请参阅[使用 knockout.js 渲染局部视图以](https://stackoverflow.com/questions/14597544/render-partial-view-using-knockout-js/14600067#14600067)了解如何执行此操作。

其次，您需要在页面加载时初始化一个空的搜索结果视图模型，并将其绑定到您想要的页面部分，然后在获得结果后*更新*该视图模型。

顺便说一句，当您的视图模型与您的数据模型具有完全相同的属性时，我会使用[剔除映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)而不是手动复制数据。

# java - AspectJ - 将 try-finally 块排除在方面

> ID：14826396
> 
> 赞同：0
> 
> 时间：2013-02-12T06:01:07.363
> 
> 标签：java, aop, aspectj

我有很多这样的方法：

```
 Connection connection = null;
    try {
        connection = new Connection();
        connection.connect();
        .... // method body

    } finally {
        if (connection != null) {
            connection.disconnect();
        }
    } 
```

我可以将这部分排除在方面（AspectJ）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T09:25:31.183

您可以将连接管理提取到环绕建议中，并通过将上下文`Connection`暴露在`ThreadLocal`. 定义一个具有静态属性的公共类：

```
public class ConnectionHolder {
  public static final ThreadLocal<Connection> connection = new ThreadLocal<>();
} 
```

在周围的建议中，您必须将 设置`ThreadLocal`为打开的连接，并**确保之后无条件清除它**。这是`ThreadLocal`s 的最大缺陷：将对象泄漏到不相关的上下文中。还要注意继承的子线程`ThreadLocal`（曾经在 WebSphere 中有一个问题）。

总而言之，`ThreadLocal`s 是一个相当肮脏的解决方案，但其他任何事情都需要您使用像 Spring 这样的依赖注入框架，配置请求范围的 bean 等，这将是一个好主意，但需要更多研究你的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:44:30.740

[或者，您可以使用模板模式](http://en.wikipedia.org/wiki/Template_method_pattern)提取连接管道以避免复制/粘贴。基本思想是这样的：

```
abstract ConnectionTemplate {
    private Connection connection = // ...

    /**
     * Method to be implementad by child classes
     */
    public abstract void businessLogicCallback(); 

    /**
     * Template method that ensure that mandatory plumbing is executed
     */
    public void doBusinessLogic() {
        try {
            openConnection();
            // fetch single result, iterate across resultset, etc
            businessLogicCallback();
        finally {
            closeConnection();
        }
    }

    void openConnection() {
        connection.open();
    }

    void closeConnection() {
        if (connection != null) {
            connection.close();
        }
    }
} 
```

现在，实现类可以很简单

```
class ImportantBusinessClass extends ConnectionTemplate {

    @Override
    public void businessLogicCallback() {
        // do something important
    }
} 
```

你像这样使用它

```
ImportantBusinessClass importantClass = new ImportantBusinessClass();
importantClass.doBusinessLogic();      // opens connection, execute callback and closes connection 
```

* * *

Spring 框架在某些地方使用了这种技术，特别是[JdbcTemplate](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/jdbc.html#jdbc-JdbcTemplate)处理 SQL、连接、行和域对象之间的映射等。实现细节请参考 GitHub 中的[源代码](https://github.com/SpringSource/spring-framework/blob/3.2.x/spring-jdbc/src/main/java/org/springframework/jdbc/core/JdbcTemplate.java)。

# c# - 使用点阵打印机在 C# 中进行 Unicode（马拉雅拉姆语）打印

> ID：14826397
> 
> 赞同：0
> 
> 时间：2013-02-12T06:01:09.683
> 
> 标签：c#, unicode, printing

当我尝试使用[RawprinterHelper 类](http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/f2721e4f-77f6-4d22-9e47-cae0af4d20a8)打印 unicode（马拉雅拉姆语 - 一种南印度语言）时，我正在打印垃圾字符。我正在使用点阵打印机进行打印。

有没有更好的方法来使用 C# 打印南印度语言？我需要如下格式的点阵打印机（爱普生）

> +++++++++++++++++++++++++++++++++++++++++++++++
> 日期：-
> 公司名称
> ++ +++++++++++++++++++++++++++++++++++++++++++++
> 
> Unicode字符串1（马拉雅拉姆语）.... ..Unicode string2（马拉雅拉姆语）....Unicode string（n）（马拉雅拉姆语）等............

# .htaccess - 如何在具有多个 ID 的 htaccess .php 文件中进行重定向

> ID：14826411
> 
> 赞同：1
> 
> 时间：2013-02-12T06:01:59.687
> 
> 标签：.htaccess, redirect

我删除了许多旧网址：

```
viewnews.php?id=1357570020
viewnews.php?id=1565656889
viewnews.php?id=7877878768
viewnews.php?id=7876876876 
```

我有一千个这样的网址。我希望将所有这些 URL 重定向到我的主页。它们不再存在。

我希望当有人访问 mysite.com/viewnews.php?id=(ANY ID HERE) 时自动转发到 www.mysite.com

我如何在 htaccess 中做到这一点？我已经尝试了很多东西。

```
Redirect 301 /viewnews.php(.*)$ http://www.mysite.com/ 
```

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:18:42.940

使用 mod_rewrite 您可以使用以下代码来处理此任务：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+viewnews\.php\?id=[^\s]+ [NC]
RewriteRule ^ http://%{HTTP_HOST}? [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:18:31.183

请改用 RedirectMatch。参考本站：[http ://www.simonecarletti.com/blog/2009/01/apache-query-string-redirects/](http://www.simonecarletti.com/blog/2009/01/apache-query-string-redirects/)

> 如果您需要批量重定向一组页面，您可能需要使用**RedirectMatch**指令。

因此，您使用该指令并且需要告诉正则表达式从哪里开始“^”以及在哪里结束正则表达式“$”。试试这个：

```
RedirectMatch ^/viewnews.php?id=([0-9]*)$ http://www.mysite.com/ 
```

吃两粒药，早上给我打电话。:D

# c# - 在 www 后为带有数字的 url 创建正则表达式。和@后有数字的邮件

> ID：14826422
> 
> 赞同：-1
> 
> 时间：2013-02-12T06:02:45.690
> 
> 标签：c#, html, regex, url

我不擅长正则表达式，这就是为什么发布这个。我有代码来获取所有 url 以及来自 html 的所有电子邮件。但我需要以下内容。我可以使用以下获取所有网址：

```
Regex regx = new Regex("http://([\\w+?\\.\\w+])+([a-zA-Z0-9\\~\\!\\@\\#\\$\\%\\^\\&amp;\\*\\(\\)_\\-\\=\\+\\\\\\/\\?\\.\\:\\;\\'\\,]*)?",
                        RegexOptions.IgnoreCase);
                        MatchCollection ms = regx.Matches(body);

                        foreach (Match m in ms)
                        {
                            string tmpLink = m.Value.ToString();

                        } 
```

现在我想进一步匹配它是否包含 www 之后的数字。所以我会将它标记为垃圾邮件。或者可以有一个完整的代码而不是这个内部循环。电子邮件也是如此，获取那些在@之后有数字的电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:27:37.723

您的正则表达式的工作方式如下： http://([\w+?\.\w+])+([a-zA-Z0-9\~\!\@\#\$\%\^\&\*\ (\)_\-\=\+\\\/\?\.\:\;\'\,]*)?

`http://` - http://

`([\\w+?\\.\\w+])+` - 以下任何一项出现一次或多次 - 单词字符, `+`, `?`, `.`(不需要的转义`.`)

`([a-zA-Z0-9\\~\\!\\@\\#\\$\\%\\^\\&amp;\\*\\(\\)_\\-\\=\\+\\\\\\/\\?\\.\\:\\;\\'\\,]*)?`- 带有单词字符或列出的字符出现零次或多次的可选部分（充满了不需要的转义）

For`http://`后跟`www.`使用`http://www\.`和`http://www\.\d+[\w.]*`匹配`http://www.`，后跟一个或多个数字，后跟零个或多个单词字符或点。

对于后面有数字的电子邮件`@`，请使用`[A-Za-z]\w+\@\d+[\w.]*`.

**注意：**我不确定您的要求。

# php - php 当单击显示在此服务器上找不到请求的 URL /文件名的链接时

> ID：14826423
> 
> 赞同：1
> 
> 时间：2013-02-12T06:02:48.627
> 
> 标签：php, .htaccess

有一个 php 项目是用核心 php 制作的。现在我的工作是更改一些样式表问题。所以我只是用数据库下载了所有文件。之后，我只是在我的本地主机（LAMP）上进行了所有设置。然后我刚刚浏览了页面，我看到主页显示正确。但是当我点击任何一个链接时，我只是得到了一个错误，比如

```
Not Found

The requested URL /filename.php was not found on this server.

Apache/2.2.22 (Ubuntu) Server at localhost Port 80 
```

当我使用`tail /var/log/apache2/error.log`命令查看错误日志时检查问题。我刚看到

```
[error] [client 127.0.0.1] script '/var/www/filename.php' not found or unable to stat, referer: http://localhost/path to the project folder/ 
```

那么有人可以告诉我这里有什么问题吗？任何帮助和建议都将是非常可观的。谢谢 ...

**更新**

当我下载文件时，我的`.htaccess`文件是这样的

```
#suPHP_ConfigPath /home/demosite/public_html
<IfModule mod_php4.c>
php_value session.use_trans_sid 0
php_value session.cookie_time 3600
php_value session.gc_maxlifetime 3600
#php_value session.cookie_domain ".demosite.com"
</IfModule>
RewriteEngine On
RewriteRule ^([a-zA-Z0-9_+-]+)\.html $1.php
#RewriteRule 404\.shtml$ 404.php
Options +SymLinksIfOwnerMatch
RewriteBase /
RewriteCond %{HTTP_HOST} .
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteCond %{HTTP_HOST}<>%{REQUEST_URI} ^([A-Za-z0-9]+)\.demosite\.com<>/([^/]*) 
RewriteCond %1<>%3 !^(.*)<>\1$ [NC]
RewriteRule   ^(.*)$ - [E=USER:%1]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{HTTP_HOST} !^www\. 
RewriteCond %{HTTP_HOST} !^demosite\.com 
RewriteCond %{ENV:USER} ^(.+)$
RewriteRule ^(.*) company_index.php?uid=%1

RewriteCond %{HTTP_HOST} ^www\.([A-Za-z0-9]+)\.demosite\.com 
RewriteRule ^(.*) company_index.php?uid=%1

RewriteRule categories\/([a-zA-Z0-9_+-]+)\.html browsecats.php?browse=$1
RewriteRule categories\/([a-zA-Z0-9_+-]+)\/([0-9]+)\/([a-zA-Z0-9_+-]+)\.html browsecats.php?browse=$1&cid=$2
RewriteRule listings\/([a-zA-Z0-9_+-]+)\.html listings.php?browse=$1
RewriteRule listings\/([a-zA-Z0-9_+-]+)\/([0-9]+)\.html listings.php?browse=$1&pg=$2
RewriteRule listings\/([a-zA-Z0-9_+-]+)\/([0-9]+)\/([a-zA-Z0-9_+-]+)\.html listings.php?browse=$1&cid=$2
RewriteRule listings\/([a-zA-Z0-9_+-]+)\/([0-9]+)\/([a-zA-Z0-9_+-]+)\/([0-9]+)\.html listings.php?browse=$1&cid=$2&pg=$4
RewriteRule ^([a-zA-Z0-9_+-]+)\.htm$ $1.html 
```

这里 demosite 是站点名称。我已经替换了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:08:57.027

假设您使用它，您还添加了 .htaccess 到您的标签中，

如果有，`RewriteBase /`但您的项目位于子目录中，请确保将子目录添加到否则重写将在错误目录中查找文件，因此添加您的：

```
RewriteBase /path_to_the_project_folder 
```

# javascript - 如何选择合适的 javascript 框架以及如何开始？

> ID：14826424
> 
> 赞同：6
> 
> 时间：2013-02-12T06:02:55.097
> 
> 标签：javascript, node.js, backbone.js, angularjs, meteor

这是我在堆栈上的第一篇文章，所以我对每个答案都很兴奋。

在选择正确的 javascript 框架时，我遇到了一个非常大的问题。只是一些个人信息，我知道 JavaScript 的基础知识，我会写 jQuery，当然我知道 HTML5 和 CSS3。但我想像其他许多人一样跳入服务器端应用程序，我猜。几个月以来，我一直在网上阅读有关所有不同框架的信息，但是要决定一个框架实在是太复杂了。

几天前我开始尝试 angularJs，但由于某种原因，我并没有真正理解它，因为它更深入，因为我并不真正理解文档，而且据我搜索，那里没有太多的视频广播。我可以通过视频更好地学习。

然后我切换到meteor.js，但他们的文档更加复杂，而且那里的视频也不多。在阅读有关流星的信息时，我前往 node.js，因为据说，如果我了解 node.js，它更容易理解。但是在我理解 node.js 之前，我会浪费很多时间。我知道我必须学习它，但我只想从一个客户端框架开始，它可以轻松地与 node.js 连接。

我现在的基本意图是，从一个真正的基本待办事项应用程序开始，只是为了我自己学习它，以后可能会添加越来越多的功能。有一天我想继续尝试另一个应用程序和另一个等等。这是一个很长的路要走。但我不能为它选择一个框架。我想要一些对不同用例非常开放的东西，无论是小型应用程序还是大型应用程序。以防万一未来。但大多数情况下，当我阅读一个框架时，他们也会说一些关于 commonJS、underscore.js 等的东西，这让我很困惑，因为我总是认为我必须学习所有这些东西。

那么最好的开始方式是什么？我应该回到 Angular 并进一步尝试吗？我应该尝试自己编写它并在需要时查看文档，还是应该先阅读完整的文档？流星也一样。我也一直在我的脑海里有骨气，如果它可能更好的话。这个领域一开始就让人不知所措，那么你的经验是什么？你是如何开始的，最好的方法是什么？我不想在没有决定的情况下浪费更多时间进行毫无意义的阅读。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T06:20:36.583

选择一个 JavaScript 框架并不是一件容易的事——那里有很多，它们在质量、特性和成熟度方面差别很大。我建议访问[TodoMVC](http://todomvc.com/)站点，该站点演示了相同的应用程序 - 一个简单的待办事项列表 - 使用各种不同的框架实现。

它就如何做出适合您的选择提供以下指导：

> 一旦您下载了最新版本并使用了这些应用程序，您将需要决定一个特定的框架来尝试。
> 
> 研究在您感兴趣的框架中定义模型、视图和（在适用的情况下）控制器和类所需的语法，并尝试亲自编辑代码以了解直接使用它的感觉。
> 
> 请确保如果您对此感到满意，您确实会花更多时间研究该框架（包括阅读官方文档、源代码及其完整的功能列表）。框架通常比我们在示例中展示的内容要多得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T02:44:19.733

我现在正在逐步完成*node.js*，而不使用任何框架。我现在忽略了框架，因为我想用 node.js 弄清楚我能做什么和不能做什么*到目前为止* ，我已经让*node.js用一个***hello**语句、一个 JSON 语句、一个文本文件的内容来响应包括渲染的 HTML 文件，列表中的下一个是来自 Mongodb 数据库的记录。我还将 HTML 页面分解为头文件、正文文件和页脚文件，并使用*q.js*库中的 Promise 将整个文件 HTML 页面呈现为一个单元。出于必要，我将所有 HTML 页面呈现为动态页面，但我正在研究呈现静态页面。

前天我还用SSL实现了*node.js ，我想出了如何将**node.js*导出到heroku，我需要实现从http到https的重定向。

一旦我感到舒服（如果不是彻底）——“彻底”可能是矫枉过正——在没有框架的情况下熟悉*node.js*，我将一次添加一个框架，如*express.js*和*socket.io*，看看我能做什么他们每个人分开。我相信这种一次一个框架的洋葱层方法是以合理的信心掌握*node.js的最可靠、最省时的方法。*而且这种方法的可行性是现实的，因为我们只讨论了三个或四个框架。

I am surprised that you never explored *bootstrap.js* at the front end - at this point, I can do *bootstrap.js* in my sleep - and that you never looked into AJAX calls, which allow asynchronous communication with the back end.

# android - 自定义字符串数组中的字符串项

> ID：14826425
> 
> 赞同：0
> 
> 时间：2013-02-12T06:02:56.317
> 
> 标签：android

我下面来自字符串数组的 xml 行没有格式化。

```
 <string-array
    name= "viewrequest">
     <item><font size = "20"><b>"Request 1 Title:"<u>"STATUS"</u></b></font> 
    <font size="12"><b> "\nCreated:"</b> DD/MM/YY
       "\nDescription : the lazy brown fox jumps over the lazy dog"
    <b>" \n \nUpdated:"</b> "DD/MM/YY" 
        <b>"\nUpdated by : "</b>"XYZ"</font></item>
    </string-array> 
```

谁能帮我怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:16:06.710

您可以将值输入字符串并使用模式匹配格式化字符串以形成数组。当我从 wsdl 获取数组时，我就是这样做的。

```
String r = ”anyType{string=10054; string=10055; string=10056; string=10035; string=10052; string=10036; string=10037; string=10038; }”;
String temp = r.replaceAll(";\\s", ",").replaceAll("string=", " ")
.replace("anyType{", "").replace(",}", "");
String[] fulname = temp.split(",\\s+"); 
```

'r' 是一个字符串数组

r =”anyType{字符串=10054; 字符串=10055；字符串=10056；字符串=10035；字符串=10052；字符串=10036；字符串=10037；字符串=10038；}”</p>

第 2 步 - 然后创建一个名为 temp 的字符串变量，我在其中使用 replaceAll 函数删除所有不需要的字符。删除不需要的字符后 temp 看起来像这样

temp=”10054, 10055, 10056, 10035, 10052, 10036, 10037, 10038”</p>

step3-最后创建了一个名为'fulname'的字符串数组，并将修改后的字符串用',\s'拆分后的数组fulname如下所示

全名 = [ 10054, 10055, 10056, 10035, 10052, 10036, 10037, 10038]

这将正常工作，因为所有 wsdl 数组都返回具有相同不需要的字符的相同类型的字符串

希望你能理解 祝你好运

# matlab - MATLAB Cell2Mat 逐行转换

> ID：14826426
> 
> 赞同：2
> 
> 时间：2013-02-12T06:02:58.810
> 
> 标签：matlab

说我有一个数组`A={[2x3],[3x3],[2x3]}`。我想知道如何将其转换为矩阵`a=[2x3;3x3;1x3]`

例子：

```
A={[1 1 1;2 2 2],[3 3 3;4 4 4;5 5 5],[6 6 6]} 
```

转换为

```
B=[1 1 1;2 2 2;3 3 3;4 4 4;5 5 5;6 6 6] 
```

.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T06:09:19.460

在您编写的示例中，您需要转置 A 才能使用`cell2mat`：

```
cell2mat(A') 
```

将`B`根据需要输出

# c - 降序不能正常工作c编程

> ID：14826427
> 
> 赞同：1
> 
> 时间：2013-02-12T06:02:59.920
> 
> 标签：c, arrays, sorting

升序做得很好。但是当我输入一个不同的数字时，它应该调用降序，我认为这是很好的定义。然而我有一个随机排序..

```
 #include<stdio.h>

void sort(int b[], int size, int (*upordown)(int a, int b));
void swap(int *elt1, int *elt2);
int ascending(int a, int b);
int descending(int a, int b);
main()
{
int size =8;
int order,a[size],i;
fprintf(stdout, "please enter a sequence of numbers you wish to sort:\n");
for(i =0; i<size; i++)
{
    scanf("%d", &a[i]);
}
printf("\n please enter 1 for ascending order or 2 for descending order");
scanf("%d", &order);
if(order == 1)
{
    sort(a, size, ascending);
}
else 
{
    sort(a, size, descending);
}
printf("Here is the new re arranged array: \n");
for(i =0; i<size; i++)
{
    printf("%d\t", a[i]);
}
printf("\n");
return 0;
}

void sort(int b[], int size, int (*upordown)(int a, int b))
{
int pass, j;
for(pass =0; pass< size;pass++)
{
    for(j=0; j<size; j++)
    {
        if((*upordown)(b[j], b[j+1]))
        {
            swap(&b[j], &b[j+1]);
        }
    }
}

}

void swap(int *elt1, int *elt2)
{
int hold;
if(*elt1 > *elt2)
{
    hold = *elt1;
    *elt1 = *elt2;
    *elt2 = hold;
}

}

int ascending(int a, int b)
{
return b<a;
}
int descending(int a, int b)
{
return b>a;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:06:36.837

那是因为您的交换功能不正确。它应该简单地交换其传递的参数：

```
void swap(int *elt1, int *elt2)
{
    int hold;
    hold = *elt1;
    *elt1 = *elt2;
    *elt2 = hold;
} 
```

它不应包含比较。

# java - Java中的匹配映射键

> ID：14826431
> 
> 赞同：1
> 
> 时间：2013-02-12T06:03:07.520
> 
> 标签：java, regex, map

我有一个 Map，它的键是一个字符串，它包含以下键：

“你早安”

“你今天过得怎么样”

“这一天过得很充实”

“提前致谢”

我想知道是否有一个包含两个特定单词的键。当然可能有不止一个匹配键，但我需要知道是否有布尔答案 - 真或假。

在上面的例子中，对于“morning”和“you”这两个词我会得到正确的结果，而对于“are”和“butiful”这两个词我会得到正确的结果——错误的。

有没有办法在**不**遍历地图的情况下检查这样的事情？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:09:24.733

简单的回答：没有这样的方法。

有几种类型的地图。

HashMap 基于散列算法，它几乎打乱了字符串的内容。这是故意的，没有办法从哈希键中可靠地导出字符串的内容。

SortedMap 允许您快速定位已排序的值，但无法帮助您在这些字符串中找到单词。

完成您需要做的事情的唯一方法是遍历整个密钥集。

或者，您可以使用文本搜索算法为您的字符串集建立索引并允许您加快搜索速度。

考虑一下： http: [//lucene.apache.org/core/](http://lucene.apache.org/core/)

另一个想法是提出适合您需要的自己的散列算法或映射实现。这可能比看起来更复杂......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:14:46.930

如果不进行迭代，这可能是不可能的，因为当前的 Map 实现没有任何此类方法。但是还有其他实用程序库可以帮助您。看看[这个问题](https://stackoverflow.com/questions/122105/java-what-is-the-best-way-to-filter-a-collection)，它与您提出的问题相似。它谈到了以下两个可以帮助您的库

*   [λj](http://code.google.com/p/lambdaj/)
*   [谷歌收藏](http://code.google.com/p/google-collections/)

# java - 如果 jsp 中的条件不起作用

> ID：14826441
> 
> 赞同：1
> 
> 时间：2013-02-12T06:04:15.797
> 
> 标签：java, jsp, if-statement, struts2, javabeans

我正在使用以下 if 条件，但它不起作用。

加载 jsp 页面时，***将显示输出而不检查条件*。**

*   代码期望接收表单的值，将它们放在 obj 属性中，并在收到结果“o”时将它们发送到 Xclass，它应该是消息。

我的.jsp

```
 <jsp:useBean id="obj" class="com.User"/>

    <jsp:setProperty property="*" name="obj"/>

      <%
         String myoutput = myclass.Xclass(obj);
         out.print(myoutput);
         if(myclass.Xclass(obj).equals("output"))
            {
               out.print("message goes here");
            }
      %> 
```

myclass.class

```
 public String Xclass(User obj){
           return "output";
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:12:02.740

在 version2 中，您错过了分号 ;

```
 String output = myclass.Xclass(obj); 
```

尝试值。尝试`print` `output`下面的代码

```
if(output.trim().equalsIgnoreCase(¨o¨))
{
// your message goes here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T06:19:42.240

你为什么要把逻辑放在你的表示层上，让你的 BL 出现并不是一个好习惯。我猜你正在使用 struts2 框架。那么你应该使用**s:if**

**更新部分：**

无论您的表单有多长，**struts2 值堆栈**都会保存您的任何数量的数据以及您的操作并将您的请求数据**呈现**给您的类，请尝试为您各自**的表单元素使用****DTO**或单独的**bean**和**POJO 类**。

 **因为这就是**Struts2**的设计方式，只有这样做才能通过将视图与业务逻辑分离来实现**MVC 模式**。

**您的 JSP 页面**

```
 <s:form action="yourAction">

                <s:textfield name="name" label="Name"/>
                   .....
                <s:submit ></s:submit>
    </s:form> 
```

**在你的行动课上**

```
@Action
  public class XYZ{
    private form-elements-name;

    getters & setters for form-elements-name

    ..............

    your Business-Logic

   public String YourLogic()
  {
     ...............
  } 
```

}**

# c# - 表达式树：可以使用动态表达式方法构建吗？

> ID：14826443
> 
> 赞同：1
> 
> 时间：2013-02-12T06:04:25.557
> 
> 标签：c#, .net-4.0

我是表达式树的新手，一直在尝试构建动态表达式以用于`.Where()`Linq 中的方法到实体查询。`Expression.Equal(exp, exp)`当我显式调用和之类的表达式方法时，我可以让它全部工作`Expression.GreaterThan(exp, exp)`。我想做的不是对 Expression.Method 进行硬编码，这样我就可以传递一个带有方法名称的字符串并使用它动态构建。我有一个下面的例子。这可能吗？我不知道如何进行。

```
 static void Main(string[] args)
 {

   int i = 1;
   int? iNullable = 1;
   object o = 1;
   int j = 2;

   ParameterExpression pe1 = Expression.Parameter(typeof(int));
   ParameterExpression pe2 = Expression.Parameter(typeof(int));

   //explicitly creating expression by calling Expression.Method works fine
   Expression call = Expression.Equal(pe1, pe2);
   var f = Expression.Lambda<Func<int, int, bool>>(call, pe1, pe2).Compile();

   Console.WriteLine(f(i, i));
   Console.WriteLine(f((int)iNullable, i));
   Console.WriteLine(f(i, (int)o));
   Console.WriteLine(f(i, j));

   //I want to use a dynamic Expression method instead of Expression.Equal
   //so that it could be substituted with Expression.GreaterThan etc.
   String expressionMethod = "Equal";

   //get the method
   MethodInfo method = typeof(Expression)
     .GetMethod(expressionMethod, 
      new[] { typeof(Expression), typeof(Expression) });

   //I'm lost ....

    Console.ReadKey();

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:46:57.307

原来我只需要调用该方法！我会提出这个解决方案，以防其他人可以从中受益。

```
class Program
{
  static void Main(string[] args)
  {

    int i = 1;
    int? iNullable = 1;
    object o = 1;
    int j = 2;

    ParameterExpression pe1 = Expression.Parameter(typeof(int));
    ParameterExpression pe2 = Expression.Parameter(typeof(int));

    //explicitly creating expression by calling Expression.Method works fine
    Expression call = Expression.Equal(pe1, pe2);
    var f = Expression.Lambda<Func<int, int, bool>>(call, pe1, pe2).Compile();

    Console.WriteLine(f(i, i));
    Console.WriteLine(f((int)iNullable, i));
    Console.WriteLine(f(i, (int)o));
    Console.WriteLine(f(i, j));

    //I want to use a dynamic Expression method instead of Expression.Equal
    //so that it could be substituted with Expression.GreaterThan etc.
    List<String> expressionMethod = new List<string>(){"Equal", "GreaterThan"};

    foreach (String s in expressionMethod) DynamicExpression(s, j, i); 

    Console.ReadKey();
  }

  static void DynamicExpression(String methodName, int n1, int n2)
  {
    ParameterExpression pe1 = Expression.Parameter(typeof(int));
    ParameterExpression pe2 = Expression.Parameter(typeof(int));

    //get the method
    MethodInfo method = typeof(Expression)
        .GetMethod(methodName,
         new[] { typeof(Expression), typeof(Expression) });

    //Invoke
    Expression dynamicExp = (Expression)method.Invoke(null, new object[] { pe1, pe2 });
    var f = Expression.Lambda<Func<int, int, bool>>(dynamicExp, pe1, pe2).Compile();

    Console.WriteLine("Result for " 
         + n1.ToString() + " " 
         + methodName + " " + n2.ToString() + ": " + f(n1, n2));
  }
} 
```

# php - 在 php 脚本中创建数据库表的克隆

> ID：14826444
> 
> 赞同：2
> 
> 时间：2013-02-12T06:04:27.110
> 
> 标签：php, mysql

我必须创建数据库表的克隆。我使用 wordpress 数据库，我想创建一个 WP-options 表的克隆。如何在数据库中创建特定表的克隆。我找到了一些代码

```
set_time_limit(0);

$username = 'XXXXXX';
$password = 'YYYYYY';
$hostname = 'ZZZZZZ';
$database = 'AAAAAA';

try {
    $pdo = new PDO("mysql:host={$hostname};dbname={$database}", $username, $password);
}
catch(PDOException $e) {
    die("Could not connect to the database\n");
}

echo '<pre>';
$stmt1 = $pdo->query('SHOW TABLES', PDO::FETCH_NUM);
foreach($stmt1->fetchAll() as $row) {
    $stmt2 = $pdo->query("SHOW CREATE TABLE `$row[0]`", PDO::FETCH_ASSOC);
    $table = $stmt2->fetch();
    echo "{$table['Create Table']};\n\n";
}
echo '</pre>'; 
```

但我不明白如何在我给出的路径的文件夹中获取数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:12:16.687

我在谷歌搜索几个小时之前和之后遇到了同样的问题，我最终得到了下面的代码。

希望这会有所帮助。

好极客很抱歉使用`mysql_**`它已弃用。

```
<?php
$DBIUser = 'someuser';
$DBIPass = 'thepassword';

$NewUser = 'someloser';
$NewPass = 'thepassword';

$oldServer = 'my crappy old mysql server domain';
$newServer = 'localhost';

if ($argv[0] > " ")
{
    $dbname = $argv[1];
    echo "Starting copy of the $argv[1] database.\n";
    $dbpre = mysql_connect($oldServer, $DBIUser, $DBIPass);
    mysql_select_db($dbname, $dbpre);
    $sql = "SHOW TABLES FROM $dbname";
    echo $sql."\n";
    $result = mysql_query($sql);

    if (!$result)
    {
        echo "DB Error, could not list tables\n";
        echo 'MySQL Error: ' . mysql_error();
        exit;
    }

    $dbtbl = mysql_connect($oldServer, $DBIUser, $DBIPass);
    mysql_select_db($dbname, $dbpre);
    $dbnew = mysql_connect($newServer, $NewUser, $NewPass);
    mysql_select_db("mysql", $dbnew);

    $res2 = mysql_query("CREATE DATABASE IF NOT EXISTS ".$dbname,$dbnew);
    if (!$res2)
    {
            echo "DB Error, could not create database\n";
            echo 'MySQL Error: ' . mysql_error();
            exit;
    }
    mysql_select_db($dbname, $dbnew);

    if($result === FALSE)
    {
        die(mysql_error());
    }

    $f = fopen($dbname.'.log', 'w');
    fwrite($f, "Copy all tables in database $dbname on server $oldServer to new database on server $newServer.\n\n");
    while ($row = mysql_fetch_row($result))
    {
        echo "Table: {$row[0]}\n";
        fwrite($f, "Table ".$row[0]."\n");
        $tableinfo = mysql_fetch_array(mysql_query("SHOW CREATE TABLE $row[0]  ",$dbtbl));
        $createsyntax = "CREATE TABLE IF NOT EXISTS ";
        $createsyntax .= substr($tableinfo[1], 13);

        mysql_query(" $createsyntax ",$dbnew);

        $res = mysql_query("SELECT * FROM $row[0]  ",$dbpre); // select all rows
        $oldcnt = mysql_num_rows($res);
        echo "Count: ".$oldcnt." - ";

        $errors = 0;
        while ($roz = mysql_fetch_array($res, MYSQL_ASSOC) )
        {
          $query =  "INSERT INTO $dbname.$row[0] (".implode(", ",array_keys($roz)).") VALUES (";
          $cnt = 0;
          foreach (array_values($roz) as $value)
          {
            if ($cnt == 0)
            {
              $cnt++;
            } else
            {
              $query .= ",";
            }
            $query .= "'";
            $query .= mysql_real_escape_string($value);
            $query .= "'";

          }
          $query .= ")";

          $look = mysql_query($query,$dbnew);
          if ($look === false)
          {
            // write insert to log on error
            $errors = $errors + 1;
            fwrite($f, mysql_error()." - ".$query."\n");
          }

        }
        $sql = "select count(*) as cnt from $dbname.$row[0] ";
        $res = mysql_query($sql, $dbnew);
        $roz = mysql_fetch_array($res);
        echo $roz['cnt']." - Errors: ".$errors."\n";
        fwrite($f, "Old Record Count: ".$oldcnt." - New Record Count: ".$roz['cnt']." - Errors: ".$errors."\n");
        fwrite($f,"End table copy for table $row[0].\n\n");

    }
    fclose($f);
}
else
{
    var_dump($argv);
}
?>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-13T06:26:28.197

我不确定它是关于一个表还是整个数据库，因为您要求一个表，但显示了一个试图复制完整数据库的代码。

这是我使用 PHP 和 MySQLi 复制完整数据库的脚本：

```
// Database variables

$DB_HOST = 'localhost';
$DB_USER = 'root';
$DB_PASS = '1234';

$DB_SRC = 'existing_db';
$DB_DST = 'newly_created_db';

// MYSQL Connect

$mysqli = new mysqli( $DB_HOST, $DB_USER, $DB_PASS ) or die( $mysqli->error );

// Create destination database

$mysqli->query( "CREATE DATABASE $DB_DST" ) or die( $mysqli->error );

// Iterate through tables of source database

$tables = $mysqli->query( "SHOW TABLES FROM $DB_SRC" ) or die( $mysqli->error );

while( $table = $tables->fetch_array() ): $TABLE = $table[0];

    // Copy table and contents in destination database

    $mysqli->query( "CREATE TABLE $DB_DST.$TABLE LIKE $DB_SRC.$TABLE" ) or die( $mysqli->error );
    $mysqli->query( "INSERT INTO $DB_DST.$TABLE SELECT * FROM $DB_SRC.$TABLE" ) or die( $mysqli->error );

endwhile; 
```

如果您只想复制一个表，您可以将其修改为如下所示（目标表必须存在于此代码中）：

```
// Database variables

$DB_HOST = 'localhost';
$DB_USER = 'root';
$DB_PASS = '1234';

$DB_SRC = 'existing_db';
$DB_DST = 'newly_created_db';

$DB_TABLE = 'wp_options';

// MYSQL Connect

$mysqli = new mysqli( $DB_HOST, $DB_USER, $DB_PASS ) or die( $mysqli->error );

// Copy table and contents in destination database

$mysqli->query( "CREATE TABLE $DB_DST.$DB_TABLE LIKE $DB_SRC.$DB_TABLE" ) or die( $mysqli->error );
$mysqli->query( "INSERT INTO $DB_DST.$DB_TABLE SELECT * FROM $DB_SRC.$DB_TABLE" ) or die( $mysqli->error ); 
```

# artificial-intelligence - 为多个对手扩展极小极大算法

> ID：14826451
> 
> 赞同：13
> 
> 时间：2013-02-12T06:05:13.440
> 
> 标签：artificial-intelligence, minimax

对于井字游戏等游戏的两个玩家，极小极大算法得到了很好的描述。我需要为坦克游戏编写 AI。在这个游戏中，坦克必须在一个有墙壁形式障碍物的迷宫中移动。目标是收集硬币堆。如果只有两个玩家，则可以实现极小极大算法。但是如何实现两个以上呢？在每个回合中，每个玩家都会尝试最大化自己的获胜优势。我不能将所有玩家视为一个敌人，试图仅减少我的获胜优势，创建两个玩家级别，就像在原始的极小极大算法中一样。如果问题的格式不好，请原谅。这个论坛还是新手

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2020-08-27T04:40:19.357

Mihai Maruseac 说 MiniMax 不能再使用只是部分正确。如果“MiniMax”指的是 MiniMax 的“标准变体”，那么他完全正确！（这就是他的意思。）但是，您也可以将 MiniMax 视为 MaxiMax，其中两个玩家各自最大化自己的奖励（这正是 AlphaWolf 在问题中所写的）。因此，对 n 个玩家的泛化称为`Max^n`，它仍然可以被视为 MiniMax，不知何故。无论如何，下面我将解释为什么标准的 2 人 MiniMax 确实不能用于 3 人或更多人的多人游戏环境。然后，最后，我给出了正确的替代方案，即`Max^n`算法的参考。

所以让我们首先考虑是否可以通过将所有对手都视为 Min-Players 来简单地将 2-player MiniMax 变成 n-player MiniMax，即他​​们都将尝试最小化 MAX 玩家的奖励。

好吧，你不能！让我解释一下为什么。

首先，回想一下 MiniMax 总是专门考虑 2 人零和游戏。因此，MiniMax 通常只用一个游戏结果来描述。但是，从技术上讲，有两个！MAX播放器的那个和MIN播放器的那个。因此，为了超形式上正确，必须为每个搜索节点提供一个 2 元组作为游戏结果，例如 (payoff-P1,payoff-P2)，其中 payoff-P1 是 P1 (MAX) 和 payoff 的结果-P2 是 P2 (MIN) 的结果。然而，由于我们通常考虑零和博弈，我们知道它们的总和总是为零，即 payoff-P1 + payoff-P2 = 0。因此，我们总是可以推断出对方的胜利，因此只代表来自P1的视角。此外，最小化收益-P2 与最大化收益-P1 相同。

对于几乎所有的游戏（除了现实生活中心理因素发挥作用的情况，比如报复而不考虑自己的损失），我们总是假设*所有代理人都*玩理性。当我们讨论两个以上的玩家时，这将非常重要！什么是理性？假设所有其他玩家也玩理性游戏，每个玩家的目标都是最大化他们自己的奖励（！）。

回到 2 人零和：我们确实利用/假设了理性，因为 P1 (MAX) 已经在最大化它的奖励（根据定义），而 MIN 也在*最大化*它*自己的*奖励，因为它正在最小化 MAX（即，因为零和与最大化 MINs 奖励相同）。因此，两个玩家都在最大化自己的奖励，因此玩得很理性。

现在让我们假设我们有超过 2 个玩家，为简单起见说 3 个。

不要让我们看看我们是否可以简单地用 MIN 玩家替换所有对手（有时会建议这样做，所以我发现从教学的角度来看它很有用）。如果我们这样做，两者都只会最小化 MAX 玩家的奖励，而 MAX 会继续最大化自己的奖励。然而，这在语义上意味着两个敌人合作对抗 MAX。这种合作打破了我们对理性的假设，即玩家不再最大化自己的奖励！（因此，最小化 MAX 的奖励仅相当于在有两个玩家时最大化自己的奖励，而不是在有更多玩家的情况下。）我举一个例子来说明：

[![在此处输入图像描述](../Images/1266a3841d0b05837290cfaa1a8564d5.png)](https://i.stack.imgur.com/bpwvU.jpg)

我们在这里看到的是以下内容：

*   像往常一样，我们有一个游戏树，其中三个玩家（P1、P2、P3）交替轮流。每个玩家有两个回合。最迟游戏在 3 步后结束（从技术上讲，P1 必须转身，但两个状态都是最终/叶子，所以游戏结束）。该游戏描述了一个 3 人零和游戏（尽管不再需要零和！所有描述的内容在没有这个假设的情况下也可以工作！）。
*   最大胜利是 20，分配给 3 名玩家。（请注意，在我的版本中，所有胜利都是正数。但是，它仍然是零和，因为所有胜利总和的值完全相同，因此它可以很容易地转换为它们始终加起来为零的一个。 ) 胜​​利显示为元组“payoff-P1 / payoff-P2 / payoff-P3”。
*   此外，我用两种不同的颜色展示了各自玩家所追求的策略：紫色是假设只有 P1 是 MAX 玩家而其他人只最小化其奖励的策略（不关心自己的奖励）。红色显示了假设所有玩家都是 MAX 玩家的*理性策略，即最大化他们自己的奖励。*

那么如果 P2 和 P3 被认为是 MIN 玩家，这个游戏会发生什么？他们会最小化 P1 的奖励，所以 P1 假设在玩 m1 时它只会收到 5，因为 P2 可以通过玩 m2 来最小化 P1 的奖励。因此 P1 将选择它的第二步 m2 赢得（仅）10。

然而，这两个对手都是 MIN 玩家的假设可以被视为两个玩家的合作（这是不合理的）。因为，在假设理性的情况下，玩家 P2 永远不会玩 m2，因为 P3 实际上会玩 m3（所以 P3 赢得 5 而不是 0）。但是假设所有对手都最小化 P1 将使 P2 选择 m2，因为这使 P3 能够玩 m1，从而将 P1 的胜利减少到 5（而不是如果 P3 理性地玩，则为 15）。因此，使用 MAX/MIN/MIN 策略可以找到（或假设）对手合作对抗 P1/MAX 的策略，这在现实中（假设理性）永远不会发生！所以 MiniMax 适应超过 2 名玩家显然是错误的。（即，在检测永远不会发生的情况方面过于悲观。）我们可以在图中看到，当假设理性代理人时，

这是为了表明 MiniMax 必须以*不同*的方式进行扩展。

应该如何显而易见：简单地用一个向量分别表示每个玩家的结果，如上所述。而不是根据轮到谁来最大化或最小化，我们总是最大化当前玩家的结果。由此产生的算法也被称为`Max^n`用于 n 个玩家。再次注意，MiniMax 仅`Max^2`包含元组 (payoff-P1,payoff-P2)，其中 payoff-P2 定义为 -payoff-P1。

该`Max^n`算法由 CA Luckhardt 和 KB Irani 在“N 人游戏的算法解决方案”中描述，第五届全国人工智能会议论文集 (AAAI'86)，p.158-162，AAAI 出版社。该论文可在以下网址公开获取：[https ://www.aaai.org/Papers/AAAI/1986/AAAI86-025.pdf](https://www.aaai.org/Papers/AAAI/1986/AAAI86-025.pdf)

请注意，`Max^n`由于搜索空间（即博弈树）呈指数增长，因此在实践中从未使用过 MiniMax。相反，人们总是使用 Alpha/Beta 修剪，这是一种相当直观的扩展，它永远不会访问/探索树的分支，无论如何搜索都毫无意义。Alpha/Beta 还扩展到适用于 n 玩家游戏 (n>2)，Richard Korf 在《人工智能》第 48 期（1991 年）第 99-111 页的“多人 alpha-beta 修剪”中进行了描述。该文章可在以下网址公开获取：[https ://www.cc.gatech.edu/~thad/6601-gradAI-fall2015/Korf_Multi-player-Alpha-beta-Pruning.pdf](https://www.cc.gatech.edu/%7Ethad/6601-gradAI-fall2015/Korf_Multi-player-Alpha-beta-Pruning.pdf)

最后，让我添加一个非常有趣的观察：在 2 人零和 MiniMax 中，计算的策略是“完美的”，因为它肯定会至少实现 MiniMax 保证/计算的胜利。如果对手打得不理性，即偏离了自己的策略，那么结果只会更高。在 n 玩家零和 MiniMax 中，即，`Max^n`，现在不是这样了！回想一下，P1 的理性策略是玩 m1 从而赢得 15（如果对手玩理性）。但是，如果对手不理智地打球，那么几乎所有事情都会发生。在这里，如果P2确实非理性地打m2，那么P1的输出完全取决于P3的做法，所以P1也可以严重少赢。原因在于，在 2 人零和游戏中，对手的行为会直接影响自己的结果——而且仅此而已！但是如果有 3 个或更多玩家，胜利也可以分配给其他玩家。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T12:49:35.000

您不能再为此使用极小极大。除非您制定一个混合目标，即最大化一个人的利润和最小化另一个人的利润总和。但这很难实现。

更好的是创建能够在战略层面上学习需要做什么的算法。将游戏转变为两人游戏：我与其他人，从这里开始。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-09-28T00:52:27.660

如何使用多个最小化代理处理最小化函数是运行一个最小化函数，所有代理的深度相同。一旦最小化代理全部通过，您就可以在最后一个最小化代理上运行最大化函数。

```
# HOW YOU HANDLE THE MINIMIZING FUNCTION - If this pseudocode helps make better sense out of this.
scores = []
if agent == end_of_minimizing_agents: # last minimizing agent
    for actions in legal_actions: 
        depth_reduced = depth-1
        scores.append(max(successor_state, depth_reduced))
else:
    for actions in legal_actions: 
        scores.append(min(successor_state, depth))
bestScore = min(scores)
return bestScore 
```

# tridion - 如何在 Tridion 代理的字段中插入超过 3400 字节的文本？

> ID：14826452
> 
> 赞同：7
> 
> 时间：2013-02-12T06:05:16.587
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我有一个包含很多元数据字段的架构。我们希望能够通过 Tridion API 从代理中搜索基于该模式的组件，例如：

```
using Tridion.ContentDelivery.DynamicContent.Query;
private static Criteria getSearchCriteria(
        string searchText,
        params BrokerConstants.MetadataField[] fields)
    var searchCriteria = new List<Criteria>();
    foreach (var f in fields)
    {
        var mkcText = new CustomMetaKeyCriteria(f.Name);
        var mvcText = new CustomMetaValueCriteria(
                mkcText, 
                "%" + searchText + "%",
                Criteria.Like);
        searchCriteria.Add(mvcText);
    }
    return new OrCriteria(searchCriteria.ToArray());
} 
```

到目前为止，这很好用：用户可以输入一些搜索文本，我们通过代理 API 将搜索文本传递给 Tridion，然后 Tridion 将与该搜索文本匹配的组件返回给我们。

但！如果我在任何组件的内容字段中添加大量文本，则 Tridion 发布过程会在“部署”阶段失败：

> 阶段：部署处理阶段失败，无法部署组件 [Component id=tcm:9-2617-16 title=xyz schema=tcm:9-2325-8]，CustomMeta 字段 StringValue 大于支持的 3400 字节大小！

我尝试将代理数据库的 CUSTOM_META 表中的 KEY_STRING_VALUE 列从 nvarchar(3400) 更改为 nvarchar(MAX)，但这似乎并没有解决问题。

我根本没有超出限制：“wc”告诉我我的文本中有 4037 个字节。大约 6000 左右听起来对我的需求来说是一个舒适的上限。

有没有一种简单的方法可以增加我在此字段中允许的文本字节数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T09:14:59.930

没有支持的方式来做你希望完成的事情。另外，请记住自定义元的实际目的是什么。在我看来，您通过在列中添加大量内容来滥用它。

无论如何，如果您真的想走这条路，那么您需要联系 Tridion 支持或访问[sdltridionworld](https://www.sdltridionworld.com/downloads/hotfixes/SDL_Tridion_2011_SP1_1/index.aspx)（需要登录）并下载 CD_2011.1.1.83467（或任何包含 CD_2011.1.1.81125 的修补程序，CD_2011.1.1.83475 除外！！！）。修补程序的变化是它消除了在部署时对元数据大小的硬检查。换句话说，它允许您通过让数据库服务器决定是否允许您在该列中存储这么多内容来对自己进行射击。***请注意，Tridion不***支持更改数据库列。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T09:47:12.397

**不**支持更改代理数据库中列的定义，并且可能会导致您将来的实施出现支持和升级问题。

*听起来*您正在获取组件的文本内容并将其放入基于文本的元数据字段中，以便在前端提供某种全文搜索功能（如果我错了，请原谅我）。这不一定符合 Content Delivery API 的预期目的。

我建议您参考上一个[关于](https://stackoverflow.com/questions/14453592/implementing-full-text-search-with-tridion-query)实施自由文本搜索的问题，以及我的[回答](https://stackoverflow.com/questions/14453592/implementing-full-text-search-with-tridion-query/14454851#14454851)

# maven - 命令行创建maven web项目失败

> ID：14826454
> 
> 赞同：0
> 
> 时间：2013-02-12T06:05:25.853
> 
> 标签：maven

在 windows 7 cmd 控制台中使用 maven 3.0.3：

*mvn archetype:generate -DgroupId="com.maven" -DartifactId="web" -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=false*

maven-archetype-quickstart 有效，但 maven-achetype-webapp 没有：

*mvn archetype:generate -DgroupId="com.maven" -DartifactId="web" -DarchetypeArtifactId=maven-achetype-webapp -DinteractiveMode=false*

```
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building Maven Stub Project (No POM) 1
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] >>> maven-archetype-plugin:2.2:generate (default-cli) @ standalone-pom >>>
[INFO]
[INFO] <<< maven-archetype-plugin:2.2:generate (default-cli) @ standalone-pom <<<
[INFO]
[INFO] --- maven-archetype-plugin:2.2:generate (default-cli) @ standalone-pom ---
[INFO] Generating project in Batch mode
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 3.212s
[INFO] Finished at: Tue Feb 12 17:02:01 EST 2013
[INFO] Final Memory: 14M/154M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:2.2:generate (default-cli) on project standalone-pom: The desired archetype does
not exist (org.apache.maven.archetypes:maven-achetype-webapp:1.0) -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T08:09:57.137

我想你可能有一个错字：不应该是`maven-aRchetype-webapp`吗？（缺少 R）

# html - 编写外部 html 页面以从 crm 获取数据

> ID：14826455
> 
> 赞同：0
> 
> 时间：2013-02-12T06:05:26.563
> 
> 标签：html, crm, dynamics-crm-4

我正在使用 crm 4.0。

我想编写一个外部 HTML 页面来从实体中获取记录。该实体基本上包含 URL。我想要做的是获取这些 URL 并将它们设置为 HTML 页面上的超链接。

因此，如果记录包含 www.abc.com，则 html 页面应显示 www.abc.com，当我单击它时，它应该指向该网站。

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:20:56.197

您需要按照[http://msdn.microsoft.com/en-us/library/cc151038.aspx](http://msdn.microsoft.com/en-us/library/cc151038.aspx)中的说明访问 Web 服务。如果您使用 html 执行此操作，您可能需要手动编写肥皂调用，这是非常乏味的工作。我不是网络开发人员，所以这部分不在我的范围内:)

如果您需要更多路线，请大声喊叫

# algorithm - 排序矩阵搜索主定理分析

> ID：14826465
> 
> 赞同：0
> 
> 时间：2013-02-12T06:06:40.077
> 
> 标签：algorithm, matrix, time-complexity, divide-and-conquer, master-theorem

所以问题是找出 x 是否在按行和按列升序的排序矩阵的元素之一中。

例子 ：

1 2 3

4 5 6

7 8 9

我有兴趣找到这个问题的分而治之解决方案的时间复杂度。我用谷歌搜索了它，但我只找到了 O(m+n) 解决方案，并且还从这个[Search a sorted 2D matrix](https://stackoverflow.com/questions/3316246/search-a-sorted-2d-matrix)中找到了。但他说（对答案发表评论）“T(R) = 3T(R/4)”，为什么 f(R) = 0？

问题是使用主定理的分而治之解决方案的复杂性是什么？在 T(R) = 3T(R/4) + f(R) 中，f(R) 应该是多少？

如果有帮助，这是我的分而治之的解决方案：

```
bool find_x_in_matrix(int x, int mat[3][3], int top_row, int top_col, int bot_row, int bot_col) {
if(top_row > bot_row || top_col > bot_col)
    return false;

int mid_row = (bot_row + top_row) / 2;
int mid_col = (bot_col + top_col) / 2;

if(mat[mid_row][mid_col] == x)
    return true;
else if(mat[mid_row][mid_col] > x) {
    return find_x_in_matrix(x, mat, top_row, mid_col, mid_row - 1, bot_col) ||
        find_x_in_matrix(x, mat, top_row, top_col, mid_row-1, mid_col-1) || 
        find_x_in_matrix(x, mat, mid_row, top_col, bot_row, mid_col-1);
}else if(mat[mid_row][mid_col] < x) {
    return find_x_in_matrix(x, mat, top_row, mid_col + 1, mid_row, bot_col) || 
        find_x_in_matrix(x, mat, mid_row + 1, top_col, bot_row, mid_col) || 
        find_x_in_matrix(x, mat, mid_row + 1, mid_col + 1, bot_row, bot_col);       
}
} 
```

编辑以澄清解决方案：

算法： 1\. 将矩阵的中间元素与搜索值进行比较 2\. 如果值等于 m(i,j)，则返回 true 3\. 如果值较小，则搜索矩阵的右上角、左上角、左下角的值矩阵 4\. 如果值较大，则在矩阵的右上角、右下角、左下角搜索值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:23:45.203

递归关系

```
T(R) = 3T(R/4) + c 
```

很清楚，因为在每一步中，您都在丢弃 1/4 的搜索空间并查看剩余的 1/4 空间 3 次。

根据 wiki，f(n) 是在递归调用之外完成的工作的成本，其中包括划分问题的成本和将解决方案合并到子问题的成本。

我认为这只是一个常数。f(n) 可能不为零，但它绝对是一个常数值，并且不依赖于搜索空间。

编辑：

我不确定如何使用主定理，但如果我们展开递归关系，我们会得到

```
 T(n) = 3^2* T(n/(4^2)) + c(1 + 3) 
```

前进，`T(n) = 3^k * T(n/4^k) + c(3^0 + 3^1 ... + 3^(k-1))`

这就是我卡住的地方..我们可以减少 RHS 吗？忘记了我的高中数学。

不过，我必须得到纠正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T08:07:13.400

我不知道这是否正确，但我正在使用主定理的案例 2

T(R) = 3T(R/4) + theta(1)

f(R) = theta(1) = theta(R) = theta(R^(log4(3)))

f(R) = theta(R^(log4(3))) = theta(R^(log4(3)) * logk(R)) 在 k = 0 时为真，因此时间复杂度为：

T(R) = theta(R^(log4(3)) * log(R)) = theta(R^0.8 * log(R))

# php - 浏览器空闲时弹出jquery（内部php）

> ID：14826475
> 
> 赞同：-1
> 
> 时间：2013-02-12T06:07:21.140
> 
> 标签：php, jquery

大家好，我有一个关于 jquery 的小问题，如果我们想让 jquery 在浏览器空闲（大约 30 分钟）时弹出其中包含 php 和 mysql 数据，是否有可能：D

有人可以给我一个例子或任何教程，会有帮助吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:12:56.803

这样的事情应该让你开始：

```
var remindTimer;
function remind() {
    $.ajax({
        url : '/getData.php',
        success : function(data) {
            alert(data);
        }
    });
}
function restartRemindTimer() {
    clearTimeout(remindTimer);
    remindTimer = setTimeout(remind, 1800000); // 30 min
}
$(document).on('mousemove keypress', restartRemindTimer); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:13:43.700

你当然可以...

```
 <script type="text/javascript">
 idleTime = 0;
$(document).ready(function () {
//Increment the idle time counter every minute.
var idleInterval = setInterval("timerIncrement()", 60000); // 1 minute

//Zero the idle timer on mouse movement.
$(this).mousemove(function (e) {
    idleTime = 0;
});
$(this).keypress(function (e) {
    idleTime = 0;
});
})
function timerIncrement() {
idleTime = idleTime + 1;
if (idleTime > 29) { // 30 minutes
    $(selector).load(url); // or perform ajax request
}
}
</script> 
```

# iphone - IAd implementation in iphone apps

> ID：14826476
> 
> 赞同：0
> 
> 时间：2013-02-12T06:07:32.680
> 
> 标签：iphone, ios, xcode

I'm doing an iphone app. Can i implement iAds in iphone apps?. iAds integration is possible only in universal apps only? plz help me..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:10:48.263

Yes, you can implement iAds in your iPhone app.

iAd is provided by Apple and it can be used in both iPhone and iPad application. And also for Universal app.

Only ad size will be different as per the iPhone and iPad screens.

Have a good start.

Cheers!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:18:54.240

iAd can be integrate in iPhone, iPad and Universal App, It is nothing like that 'your app should be Universal App to used iAd feature'.

When it comes to iAd, apple has following concern:

"iPhone apps running in compatibility mode on iPad will not display a test ad in development or live ads in deployed apps running in the compatibility environment. To ensure that your app is capable of displaying iAd banners for all your customers, make sure you’ve developed an app that supports all possible devices."

that's why Apple suggested to create Universal app to utilise iAd on iDevices.

Please go through with the [this](http://www.raywenderlich.com/1371/how-to-integrate-iad-into-your-iphone-app) nice blog for integrating iAd in iOS App.

OR

Follow [guidelines](https://developer.apple.com/iad/resources/) and [example](http://developer.apple.com/library/ios/#samplecode/iAdSuite/Introduction/Intro.html) given by Apple.

# sqlite - 在 sqlite 数据库中搜索符号

> ID：14826477
> 
> 赞同：0
> 
> 时间：2013-02-12T06:07:39.160
> 
> 标签：sqlite, select, escaping

我需要在字段内容 sqlite 数据库中搜索这些`! @ # $ % ^ & * ( ) '\`符号，我正在使用以下 sql 字符串

```
Select ID From Tasks Where '--' || tasks || '--' ||  note || '--'  like '%! @ # $ % ^ & * ( ) ""%' 
```

或者我试过这个

```
Select ID From Tasks Where task LIKE '[!] [@] [#] [$] [%] [^] [&] [*] [(] [)] ''%' 
```

但搜索不返回任何结果。对于该领域的`task`一些内容是

1.  `Today's tasks`或者

2.  `here are some wildcards ! @ # $ % ^ & * ( ) '`或者

3.  `Some brakest are [ ] { } ( )`

因此，如果我整体搜索第一个项目，我应该得到它，或者如果我搜索`! @ # $ % ^ & * ( ) '`，我应该得到第 2 个项目。等等

如果我在字段中传递文本中的某些通配符或所有通配符以相同的顺序传递，我应该得到包含该值的行

我知道某些符号在 sqlite sql 中有意义，那么如何在 sql 查询字符串中转义所有或任何这些字符

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:31:00.110

我会用这个：

```
Select ID From Contacts Where (email || mobile || main || other) GLOB '*[!@#$%^&*()\]*' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:44:35.880

首先，SQL中的字符串用单引号括起来；如果你想写一个包含单引号的字符串，你必须通过加倍来转义它们：

```
SELECT ID FROM Tasks WHERE task = 'Today''s tasks' 
```

为避免这种情况，大多数语言都允许您使用参数：

```
db.execute("SELECT ID FROM Tasks WHERE task = ?", [ "Today's tasks" ]) 
```

* * *

其次，`LIKE`操作员对`%`和`_`字符进行特殊解释。要在没有特殊含义的情况下使用这些字符，您可以使用该[`ESCAPE`子句](http://www.sqlite.org/lang_expr.html#like)指定转义 、 和自身的`%`字符`_`：

```
SELECT ID FROM Tasks WHERE task LIKE '%! @@ # $ @% ^ & * ( ) ''%' ESCAPE '@' 
```

这种转义完全独立于 SQL 字符串引用；即使您使用参数，您仍然必须使用：

```
db.execute("SELECT ID FROM Tasks WHERE task LIKE ? ESCAPE '@'",
           [ "%! @@ # $ @% ^ & * ( ) '%" ]) 
```

* * *

第三，`GLOB`操作符没有特殊的转义字符；你从字面上使用特殊字符，你必须以特殊的方式使用它们。从文档中：

> 通配规则：
> 
> *   `'*'` 匹配任何零个或多个字符的序列。
> *   `'?'` 只匹配一个字符。
> *   `[...]` 匹配所附字符列表中的一个字符。
> *   `[^...]` 匹配一个不在封闭列表中的字符。
> 
> 使用`[...]`and`[^...]`匹配，可以将一个字符作为or`']'`之后的第一个字符包含在列表中。可以使用 指定字符范围。示例： 匹配任何单个小写字母。要匹配 a ，请将其设为列表中的最后一个字符。`'['``'^'``'-'``"[a-z]"``'-'`
> 
> 提示：匹配`'*'`或`'?'`，将它们放入`"[]"`。像这样：
> 
> `abc[*]xyz``"abc*xyz"`仅 匹配

# api - 除了 cUrl 之外，使用 Big commerce API 还需要什么？

> ID：14826480
> 
> 赞同：0
> 
> 时间：2013-02-12T06:07:45.420
> 
> 标签：api, bigcommerce

嗨，我在下面编写了此代码以使用 bigcommerce API。但它似乎有一些服务器问题。我的服务器是 PHP >5.3 & curl 启用但 API 似乎没有返回任何响应。谁能帮我解决这个问题？

这是我的代码

```
 $ch = curl_init(); 
        curl_setopt($ch, CURLOPT_URL, 'https://store-bwvr466.mybigcommerce.com/api/v2'); 
    curl_setopt($ch, CURLOPT_USERPWD, 'demo'.':'.'df38dd10e9665a3cfa667817d78ec91ee9384bc3');
    curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
    curl_setopt($ch, CURLOPT_TIMEOUT, 30); 

    curl_setopt($ch, CURLOPT_HTTPHEADER, array('Connection: close'));

    $result = curl_exec($ch); 

    curl_close($ch);

 echo "<textarea>".$result."</textarea>";

 phpinfo(); 
```

您可以将其签入我的实时服务器[http://fuzonmedia.com/big/server_test.php](http://fuzonmedia.com/big/server_test.php)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:46:02.487

跟进上一个答案 - 您还可以使用 Bigcommerce PHP 库 ( [https://github.com/bigcommerce/bigcommerce-api-php](https://github.com/bigcommerce/bigcommerce-api-php) )，它提供了一种使用 PHP 与 API 交互的更简单方法。您可以访问以下产品 -

```
require 'vendor/autoload.php';
use Bigcommerce\Api\Client as Bigcommerce;
$products = Bigcommerce::getProducts();

    foreach($products as $product) {
        echo $product->name;
        echo $product->price;
    } 
```

关于大卫关于密码的回答，您需要将其设置为 rsa_rc4_128_sha，类似于以下内容。希望这会有所帮助。-

```
Bigcommerce::configure(array(
'store_url' => 'https://store-xxx.mybigcommerce.com',
'username' => 'admin',
'api_key' => 'xxxxxx'
));
Bigcommerce_Api::setCipher('rsa_rc4_128_sha')
Bigcommerce_Api::verifyPeer(false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:35:54.297

Bigcommerce API 的所有请求都需要使用 SSL_RSA_WITH_RC4_128_SHA 密码进行加密。API 的大多数初始问题是由于在发送请求时没有告诉 cURL 使用正确的密码。当您的系统使用[NSS](http://git.fedorahosted.org/cgit/mod_nss.git/plain/docs/mod_nss.html)库来处理加密时，您可以通过以下代码行告诉 cURL 使用哪个密码。

```
 curl_setopt($ch, CURLOPT_SSL_CIPHER_LIST, 'rsa_rc4_128_sha'); 
```

如果这不能解决您的问题，您需要检查 cURL 是否返回任何错误。您可以通过如下修改代码来做到这一点。

```
 $result = curl_exec($ch); 
    if ($result === false) {
        echo '<textarea>'.curl_error($ch).'</textarea>'; 
    } else {
        echo "<textarea>".$result."</textarea>";
    }
    curl_close($ch); 
```

输出错误消息可能会为您提供更多关于出现问题的线索。您还可以通过打开**详细**选项来获取更多信息。请注意，此信息会输出到***STDERR***，因此您不会在网页上看到它，除非您将***STDERR***重定向到***STDOUT***，即浏览器窗口。

```
 // Switch on verbose information and display it on the web page.
    curl_setopt($ch, CURLOPT_VERBOSE, true);
    curl_setopt($ch, CURLOPT_STDERR, fopen('php://output', 'w+')); 
```

希望以上有所帮助。

亲切的问候，
大卫

# android - GROUP BY 在 sqlite 笔记中工作

> ID：14826482
> 
> 赞同：2
> 
> 时间：2013-02-12T06:07:48.373
> 
> 标签：android, android-sqlite

我在我的 sql 查询中使用 GROUP BY。

查询是：

```
SELECT _id, message_type, message_type_id FROM msgs_list GROUP BY message_type_id 
```

此查询没有执行 GROUP BY 的功能。**它的功能如下：

```
SELECT _id, message_type, message_type_id FROM msgs_list 
```

当我将数据库从设备下载到 Windows 机器时，相同的查询在 Windows 机器上运行良好。

观察结果：

![在此处输入图像描述](../Images/346b7b7c682957b458edb854ed94b73a.png)

预期结果 ：

![在此处输入图像描述](../Images/b60ba6eddafdd9aa5a83a502edb26481.png)

任何机构都可以提出可能的解决方案。

谢谢，
沙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:11:29.117

据我所知，GROUP BY 子句可以与“aggregate_function”或 Have 子句一起使用。

**[GROUP BY 语句](http://www.w3schools.com/sql/sql_groupby.asp)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T06:14:55.310

您使用了错误的语法，Group by 的语法如下：

```
SELECT column_name, aggregate_function(column_name)
FROM table_name
WHERE column_name operator value
GROUP BY column_name 
```

在您的情况下，您没有使用任何聚合函数。

例子：

```
SELECT Customer,OrderDate,SUM(OrderPrice) 
FROM Orders
GROUP BY Customer,OrderDate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T07:13:25.307

感谢每一位的支持。

问题不在于 SQL 查询。问题在于`CursorTreeAdapter`我将其用作`ExpandibleListView`.

在`getGroupCount()`适配器的方法中，我将默认计数更新为`cursor.getCount()`. 现在它按预期工作。

再次，非常感谢您的建议。

问候，
沙。

# java - 如何在android中的BroadcastReceiver onReceive方法中调用另一个方法？

> ID：14826486
> 
> 赞同：1
> 
> 时间：2013-02-12T06:08:17.437
> 
> 标签：java, android

您好我正在使用 BroadcastReciever 来跟踪传入的消息并将消息发送到数据库以通过 Web 服务进行存储。但是每当我在 onReceive 方法中调用一个方法时，它都会显示错误消息`unable to start receiver`。

```
package com.android.message.alert;

import android.app.AlertDialog;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.speech.tts.TextToSpeech;
import android.telephony.SmsMessage;
import android.util.Log;
import android.view.View.OnClickListener;
import android.widget.Toast;
import com.webservice.call.SendWebservice;

public class MessageListener extends BroadcastReceiver
{
    TextToSpeech tts;
    public static final String ACTION = "android.provider.Telephony.SMS_RECEIVED";
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        if(intent!=null && intent.getAction()!=null && ACTION.compareToIgnoreCase(intent.getAction())==0)
        {
            Bundle bundle = intent.getExtras();
            Object[] pdus = (Object[]) bundle.get("pdus");
            final SmsMessage[] message = new SmsMessage[pdus.length];
            for (int i = 0; i < pdus.length; i++) 
            {
                message[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
            }
            SendWebservice.sendToWebservice(message[0].getMessageBody());
        }   
    }
} 
```

有关如何在 onReceive 方法中调用另一个方法的任何帮助都会有所帮助。请帮助我关于这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:14:12.740

我在下面的代码中调用广播接收器中的 web 服务：

```
public class CheckTechToolsWebServiceReceiver extends BroadcastReceiver {
  String responsePanelIcon = "";
  private Context mContext;

  @Override
  public void onReceive(Context context, Intent intent) {
    /*
     * System.out.println("Data.isWebServiceConnected" +
     * Data.isWebServiceConnected);
     */mContext = context;
    Data.deviceTime = System.currentTimeMillis();
    try {
      new BackGroundTask().execute(context);
    } catch (Exception e) {
      // TODO: handle exception
      e.printStackTrace();
    }
  }

  private void doFailureSettins() {
    Data.isWebServiceConnected = false;
    Data.isInternetConnected = false;
    Data.PANEL_ICON_STATUS = null;
  }

  private class BackGroundTask extends AsyncTask<Context, Context, String> {
    @Override
    protected String doInBackground(Context... params) {
      // TODO Auto-generated method stub
      callServices();
      return null;
    }

    @Override
    protected void onPostExecute(String result) {
      // TODO Auto-generated method stub
      super.onPostExecute(result);
      Iterator<CheckTechToolsServiceAvailaibilityListener> iterator = ConstantLib.WEBSERVICE_STATE_SET
          .iterator();

      while (iterator.hasNext()) {
        CheckTechToolsServiceAvailaibilityListener webServiceStateListener = iterator
            .next();
        webServiceStateListener
            .techToolsWebServiceState(Data.isWebServiceConnected);
      }
    }
  }

  private void callServices() {
    Data.PANEL_ICON_STATUS = responsePanelIcon;
    String panelId = "";
    try {
      if (GetPanelStatusEntityBean.getInstance().getPanelID() != null) {
        panelId = GetPanelStatusEntityBean.getInstance().getPanelID();
      } else {
        panelId = "";
      }

      // System.out.println("onRecieve.....");
      if (CheckNetworkStateClass.isOnline(mContext)) {

        LocationListenerClass.getInstance(mContext)
            .getCurrentLocation();
        HttpPost httpPost = new HttpPost(ConstantLib.BASE_URL
            + "CheckSurepollNetworkConnection");

        String post = "{\"Latitude\":" + "\"" + Data.CURENT_LATITUDE
            + "\"" + "," + "\"PanelID\":" + "\"" + panelId + "\""
            + "," + "\"Longitude\":" + "\"" + Data.CURENT_LONGITUDE
            + "\""
            + " }";

        // Log.v(ConstantLib.LOG1, " post : " + post);
        httpPost.setEntity(new StringEntity(post));

        /*
         * Log.i(ConstantLib.LOG, "URL : = " + ConstantLib.BASE_URL +
         * "CheckSurepollNetworkConnection");
         */httpPost.setHeader("Accept", "application/json");
        httpPost.setHeader("Content-type", "application/json");
        HttpParams httpParameters = new BasicHttpParams();
        int timeoutConnection = ConstantLib.CONNECTION_TIMEOUT;
        HttpConnectionParams.setConnectionTimeout(httpParameters,
            timeoutConnection);
        int timeoutSocket = ConstantLib.SOCKET_TIMEOUT;
        HttpConnectionParams
            .setSoTimeout(httpParameters, timeoutSocket);
        HttpResponse httpResponse = new DefaultHttpClient(
            new BasicHttpParams()).execute(httpPost);
        String responseJson = EntityUtils.toString(httpResponse
            .getEntity());

        // Log.v(ConstantLib.LOG1, " server response : " +
        // responseJson);

        // Get hold of the response entity
        if (responseJson != null) {
          JSONObject jsonObject = new JSONObject(responseJson);
          if (jsonObject.getString(ConstantLib.PANEL_ICON) != null) {
            responsePanelIcon = jsonObject
                .getString(ConstantLib.PANEL_ICON);
            Data.PANEL_ICON_STATUS = responsePanelIcon;
          }

          JSONObject jsonObject1 = new JSONObject(responseJson);
          String responseCode = jsonObject1
              .getString(ConstantLib.RESPONSE_CODE);
          String responseMessage = jsonObject1
              .getString(ConstantLib.RESPONSE_MESSAGE);
          String isSuperPollNetworkAvailable = jsonObject1
              .getString(ConstantLib.IS_SUPERPOLL_NETWORK_AVAILABLE);

          if (isSuperPollNetworkAvailable
              .equalsIgnoreCase(ConstantLib.TRUE)) {
            Data.isWebServiceConnected = true;
          } else {
            Data.isWebServiceConnected = false;
          }
        }
      } else {
        Data.isWebServiceConnected = false;
        Data.isInternetConnected = false;
      }

    } catch (SocketTimeoutException e) {
      doFailureSettins();

    } catch (ConnectTimeoutException e) {
      doFailureSettins();

    } catch (Exception e) {
      doFailureSettins();
    }
  }
} 
```

# java - 能够通过覆盖 toString() 仅打印 ArrayList 中的某些对象

> ID：14826489
> 
> 赞同：0
> 
> 时间：2013-02-12T06:08:26.560
> 
> 标签：java, oop, object, arraylist, tostring

在覆盖 toString() 后，我在打印出对象时遇到了一些问题。在不覆盖 toString() 的情况下，我可以打印出对象引用而不会出现任何错误。但是，当我尝试覆盖 toString() 方法时，我只能打印出一些输出（大约 30 个输出中的 10 个），而另一些则给出错误。

错误是：

```
Exception in thread "main" java.lang.NullPointerException
        at Airline.toString(AirlineMain.java:277)
        at java.lang.String.valueOf(String.java:2902)
        at java.io.PrintStream.println(PrintStream.java:821)
        at AirlineMain.main(AirlineMain.java:432) 
```

基本上我有一个名为“Airline”的类，并且正在创建对象并将其存储到`ArrayList<Airline>`.

Airline 类构造函数：

```
public Airline(String fromCity, String toCity, SGTime departTime,
             int arriveDay, SGTime arriveTime, int cost) {
         this.fromCity = fromCity;
         this.toCity = toCity;
         this.departTime = departTime;
         this.arriveDay = arriveDay;
         this.arriveTime = arriveTime;
         this.cost = cost;

     } 
```

SGTime 构造函数：

```
public SGTime(int hour, int min) {
          this.hour = hour;
          this.min = min;
      } 
```

我对 toString() 的覆盖：

```
public String toString() {
return getFromCity() +" "+ getToCity()+" "+getDepartTime().getHour()+":"+getDepartTime().getMin()+" "+getArriveDay()+" "+getArriveTime().getHour()+":"+getArriveTime().getMin()+" "+getCost();
} 
```

所有实例属性都定义了访问器。例子：

```
public String getFromCity (){
         return fromCity;
} 
```

提前感谢您的任何指导！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T06:11:26.373

在

```
return getFromCity() +" "+ 
  getToCity()+" "+
  getDepartTime().getHour()+":"+
  getDepartTime().getMin()+" "+
  getArriveDay()+" "+
  getArriveTime().getHour()+":"+
  getArriveTime().getMin()+" "+
  getCost(); 
```

NPE 的唯一可能原因是 if`getDepartTime()`或`getArriveTime()`return null。

如果任何其他方法返回 null，那么 JLS 15.18.1.1 会将它们转换为文字 string `"null"`。对于`getDepartTime`并且`getArriveTime`您正在尝试调用一个方法，如果返回的引用为 null，则会抛出 NPE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T06:22:37.120

不要重新发明轮子。`apache-commons ToStringBuilder` [我建议您使用像http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/builder/ToStringBuilder.html](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/builder/ToStringBuilder.html)这样的知名库。如果您`toString()`用于调试目的，那么您也可以查看它的子类`ReflectionToStringBuilder`。它将通过几行代码来处理需求，例如：

```
@Override
toString() {
    if(!DEBUG_ON) {
       return super.toString();            
    }
     return ReflectionToStringBuilder.toString(this);
} 
```

编辑：反射（在深层对象图上）是一个缓慢的操作，你应该谨慎使用它。出于调试目的（在测试环境中）或一次性使用它是可以的。

# redirect - 具有 302 重定向的 flowplayer 作为视频文件

> ID：14826494
> 
> 赞同：1
> 
> 时间：2013-02-12T06:08:40.290
> 
> 标签：redirect, jwplayer, http-status-code-302

我试图让 JW Player 将文件源作为 302 重定向。

例如

```
 <div id="myElement">Loading the player...</div>

<script type="text/javascript">

        jwplayer("myElement").setup({

            file: "http://release.theplatform.com/content.select?pid=wDDAdred_zKoOybAKvsfHai8DNT1zHhg&UserName=Unknown" type="video/mp4",

        });

    </script> 
```

重定向似乎工作正常，但播放器没有播放视频。有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:08:17.787

如果您打算使用 JW 播放器进行这样的重定向，您只需要更改一些代码。

在这一行下：

```
file: "http://release.theplatform.com/content.select?pid=wDDAdred_zKoOybAKvsfHai8DNT1zHhg&UserName=Unknown" type="video/mp4", 
```

添加：

```
type: "mp4" 
```

这应该够了吧。

您还需要确保文件以 H.264 编码。

我尝试测试您的重定向 URL，但收到以下“拒绝访问”消息：

```
Access Denied
You don't have permission to access "http://dev6.content2.video.news.com.au/txM2thOTquWY8V3sFImEr2rPxFVGOLdh/DOcJ-FxaFrRg4gtDEwOmtrOjBrO9IBkc?" on this server.

Reference #18.e04503f.1360681662.1f1248c7 
```

# c# - 文本框中的列表框选定项

> ID：14826495
> 
> 赞同：1
> 
> 时间：2013-02-12T06:08:54.327
> 
> 标签：c#, asp.net, .net

我有两个列表框、两个文本框和按钮。当我按下按钮时，列表框 1 的项目被移动到列表框 2，但我想在文本字段中显示所选项目，我该怎么做？

```
txtbox.Text = listbox3.selecteditem.value; 
```

不工作，我也试过

```
txtbox.Text = listbox3.selecteditem.tostring(); 
```

这是我的一段代码。'我对 asp .net 更新鲜

```
if (RadioButton1.Checked == true)
{
  a = ListBox3.SelectedValue.ToString();
  b = ListBox3.SelectedIndex;
  ListBox4.Items.Add(a);
  ListBox3.Items.RemoveAt(ListBox3.Items.IndexOf((ListBox3.SelectedItem)));

  TextBox1.Text = RadioButton1.Text.ToString();
  TextBox2.Text = ListBox3.SelectedItem.Value;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T06:19:58.957

```
if (RadioButton1.Checked == true)
{    
            var a = ListBox3.SelectedValue.ToString();
            var b = ListBox3.SelectedIndex;

            ListBox4.Items.Add(a);
            ListBox3.Items.RemoveAt(b);

            TextBox1.Text = RadioButton1.Text.ToString();
            TextBox2.Text = a;
} 
```

另外，我建议您检查该`SelectedIndex`值，如果在 中未选择任何项目`ListBox`，`SelectedIndex`则将是`-1`

更好的代码版本

```
if (RadioButton1.Checked == true)
{    

    var b = ListBox3.SelectedIndex;
    var a = ListBox3.SelectedValue.ToString();

    if (b < 0)
    {
        // no ListBox item selected;
        return;
    }

    ListBox4.Items.Add(a);
    ListBox3.Items.RemoveAt(b);

    TextBox1.Text = RadioButton1.Text.ToString();
    TextBox2.Text = a;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-04T06:28:11.110

```
private void listBox1_SelectedIndexChanged_1(object sender, EventArgs e)
    {
        textBox1.Text = listBox1.SelectedItem.ToString();  
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T06:24:54.083

你需要编辑最后一行代码......很可能是这样......使用“GetSelectedItem”而不是“SelectedItem”

```
TextBox2.Text = ListBox3.GetSelectedItem.toString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-30T19:41:28.567

我遇到了同样的问题，发现您需要先将选定的值分配给字符串。然后将该字符串分配给文本框。

```
private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    string value1 = listBox1.SelectedItem.ToString();
    TextBox1.Text=value1;
} 
```

希望能帮助到你！

# java - java.net.ConnectException

> ID：14826497
> 
> 赞同：5
> 
> 时间：2013-02-12T06:08:57.627
> 
> 标签：java, android, httpwebrequest, tethering, google-nexus

当我通过 USB 连接并尝试连接在我的笔记本电脑上运行的 web 服务通过 Google Nexus 运行我的应用程序时，我遇到了以下错误，但我能够连接到 webservie。请指教。

```
 java.net.ConnectException: failed to connect to /192.168.1.122 (port 8080):       
           connect failed: ENETUNREACH (Network is unreachable)

            at libcore.io.IoBridge.connect(IoBridge.java:114)
            at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
            at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
            at java.net.Socket.startupSocket(Socket.java:566)
            at java.net.Socket.tryAllAddresses(Socket.java:127)
            at java.net.Socket.<init>(Socket.java:177)
            at org.apache.commons.httpclient.protocol.DefaultProtocolSocketFactory.createSocket(DefaultProtocolSocketFactory.java:80)
            at org.apache.commons.httpclient.protocol.DefaultProtocolSocketFactory.createSocket(DefaultProtocolSocketFactory.java:122)
            at org.apache.commons.httpclient.HttpConnection.open(HttpConnection.java:707)
            at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:387)
            at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
            at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
            at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:15:32.773

仅仅因为您将手机连接到计算机并不意味着它将创建网络连接。

创建 LAN 在 LAN IP 上运行 web 服务。并使用 wifi 连接到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T10:47:20.417

您需要将服务发布到您的手机可以通过无线局域网连接到它们的位置。USB 仅用于调试目的

# ruby-on-rails - 我似乎无法用 grep 处理纯字符串

> ID：14826500
> 
> 赞同：4
> 
> 时间：2013-02-12T06:09:02.643
> 
> 标签：ruby-on-rails, ruby

我是初学者，所以请原谅我这个相当简单的问题：

当我尝试运行以下代码时：

```
c = "hey there you you"
newarray = c.grep("you")
puts newarray 
```

我在 ST2 中收到错误：`<main>': undefined method`grep' for "hey there you":String (NoMethodError)

但是，当我使用数组运行此代码时，它可以工作：

```
c = ["hey", "there", "you"]
newarray = c.grep("you")
puts newarray 
```

我正在学习的书中的示例显示了将 grep 直接应用于字符串的示例，因此我不确定为什么会发生这种情况。任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T06:10:45.060

grep 是一种可枚举的方法，因此它可以应用于数组和散列。"hey there you you" 是一个字符串，所以你正在寻找`include?`or`match`或`scan`

```
"hey there you you".match 'you'
"hey there you you".scan 'you' # returns 2 results 
```

# php - Laravel 模板 - 将数据传递给布局

> ID：14826506
> 
> 赞同：4
> 
> 时间：2013-02-12T06:09:24.970
> 
> 标签：php, laravel

如何将数据传递给布局文件？我只能在内容页面上访问传递的数据，而不能在布局文件上访问。

```
public function get_index($name){
    return View::make('widget.'.$name)
            ->with("title", ucwords($name).' &lsaquo; Document Management System');
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T15:47:33.080

利用

```
View::share('data', $data); 
```

在您的`before`过滤器或`__construct`您的`Base_Controller`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T06:46:01.140

您需要一个全局视图变量。我认为您需要查看`View::share('title', $title);` 我也认为您可以将其与`->shares('title', $title)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-13T19:46:01.263

您还可以`$this->layout->with('foo', 'bar')`在操作中使用 from 使变量`foo`可用于您的布局。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T21:23:23.750

我最近遇到了一种情况，我需要在我的主模板中动态更改 @include('layouts._sidebarLeft') 语句。View::share($key, $value) 解决了这个问题。然后我将我的模板更改为@include($key)，每当我需要从默认模板更改它时，我只需在控制器中返回视图之前运行另一个 View::share()。我在 /start/global.php 中定义了默认侧边栏

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-26T18:06:12.970

使用`View::share()` [https://laravel.com/docs/7.x/views#sharing-data-with-all-views](https://laravel.com/docs/7.x/views#sharing-data-with-all-views)

7.x 的文档说要在 ServiceProvider 中调用此方法。

# c# - 如何在 Windows Metro 应用程序中使用 xml 解析在 Gridview 中绑定图像

> ID：14826510
> 
> 赞同：0
> 
> 时间：2013-02-12T06:09:39.197
> 
> 标签：c#, windows-store-apps

我正在开发我的第一个 Windows 8 应用程序。我正在尝试显示填充有图像和图像描述的 GridView。我想从我创建的 XML 文件中获取数据。我找到了 GridView 的 ItemSource 属性，并尝试将我的 XML 文件绑定到它，但我不能这样做。

请告诉我完成这项任务的正确方法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:56:12.040

您不能将 XML 文件直接绑定到`GridView.ItemsSource`，您需要先将其解析为对象。我会创建一个类，其中包含要显示的所有数据`GridView`：

```
public class GridViewItem
{
    public string Description { get; set; }
    public ImageSource Image { get; set; }
} 
```

下一步是将 XML 文件解析为`GridViewItem`s 列表：

```
var xmlString = await FileIO.ReadTextAsync(storageFile);
var xml = XDocument.Parse(xmlString);
var Items = xml.Element("rootNode").Elements("itemNode").Select(i => new GridViewItem
    {
        Description = (string)i.Element("descriptionNode"),
        Image = ParseImage(i.Element("imageNode"))
    }).ToList(); 
```

我假设您的 XML 中的标签是`rootNode`,`itemNode`和. 另外我不知道您的图像数据是如何存储在 XML 中的。将其转换为的逻辑应该在.`descriptionNode``imageNode``ImageSource``ParseImage()`

剩下的唯一事情就是将`Items`上面的列表分配给视图模型中充当您的属性`DataContext`并将其绑定到`ItemsSource`：

```
<GridView ItemsSource="{Binding Items}" /> 
```

这是基本思想。我的回答中缺少很多细节，但根据您的问题，这是我能做的最好的事情。

# unix - Unix排序后如何用awk选择每组相关行的顶行

> ID：14826511
> 
> 赞同：1
> 
> 时间：2013-02-12T06:09:40.657
> 
> 标签：unix, sorting, awk

我有以下数据（实际上有~1M行）

```
foo qux 0 x,y
bar twe 1 a,b,c
foo qux 2 x,y,z 
```

我想要做的是按第一个字段对它进行排序，当有一个平局时，选择一个具有最高值的第三个字段。产量：

```
bar twe 1 a,b,c
foo qux 2 x,y,z 
```

但是为什么这段代码不起作用？

```
 sort -k1,1 -k2,2 -k3,3nr datafile.txt |
   awk '$3 != x {print} {x = $3}'   
   # The last awk line attempts to pick top from tie 
```

正确的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T07:10:26.120

您的命令接近正确，但您需要中断`$1`，而不是`$3`. 另外，您的陈述是您需要先对第一个字段然后第三个字段进行排序，但是代码是按第一个字段排序，然后是第二个字段，然后是第三个字段。

那么，名义上，您需要：

```
sort -k1,1 -k3,3nr datafile.txt | awk '$1 != x { print } { x = $1 }' 
```

如果您需要中断第一个和第二个字段（并对它们进行排序），那么：

```
sort -k1,1 -k2,2 -k3,3nr datafile.txt |
awk '$1 != x || $2 != y { print } { x = $1; y = $2; }' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:25:36.320

```
sort -k1,1rn <your_file>|awk '{a[$1]=$0;}END{for(i in a)print a[i]}' 
```

# jquery - 如何旋转 HTML5 Canvas 的背景图像并使用滑块放大和缩小？

> ID：14826515
> 
> 赞同：1
> 
> 时间：2013-02-12T06:09:56.853
> 
> 标签：jquery, css, html5-canvas

我是编码的初学者。我想做这些事情：

1.  创建一个画布。
2.  放一些背景图片。请注意，我只想要背景图片。我不想使用'drawImage（image，x，y）'将图像保留在前景中。
3.  保留一个可用于放大和缩小背景图像的滑块。（这里的问题是，如果我将图像保留在背景中，我不知道如何捕捉它，因此我可以重新调整它的大小）。
4.  保留两个按钮。一键向左旋转图像，二键向右旋转图像。

我只想使用 HTML5、CSS3 和 jQuery 来做这些事情。

如果有人可以向我解释一些初学者容易理解的东西，我将不胜感激。如果可能，请详细解释代码。

谢谢你。

这是我尝试过的代码：

```
 <div class="slider" style="width:500px; height:10px;"></div>
        <br />

        <div id="div_buttons">
            <table border="0">
                <tr>
                    <td>
                        <input type="button" id="rotateLeft" align = "left" value="Rotate Left" />
                    </td>

                    <td>
                        <input type="button" id="rotateRight" align = "left" value="Rotate Right" />
                    </td>
                </tr>
            </table>
        </div>

    <!--HERE IS THE STYLE TAG... -->
    <style type="text/css">
        img
        {
            opacity: 0.5;
        }

        .canvas
        {
            background: url('script.jpg');
            opacity: 0.5;
        }
    </style>

    <!--HERE IS THE JAVASCRIPT INSIDE <SCRIPT> TAG... -->
    <script type="text/javascript">
        var canvas = document.getElementById("myCanvas");
        var context = canvas.getContext('2d');
        var globalElement_width;
        var globalElement_height;

        $(document).ready
        (function() {
            $img = $('.canvas img');
                globalElement_width = $img.width();
                globalElement_height = $img.height();

                $(".slider").slider
            ({
                        step: 1,
                        min: 10,
                        max: 100,
                        value: 0,
                        slide: function(event, ui)
                            {
                                resize_img(ui.value);
                            }
                });

                //$('.canvas img').draggable();

                $("#rotateLeft").click(function() { 
                    $('canvas').css({
                                "transform":"rotate(-90deg)"
                                });
                    }
                ) //addClass("left")

                $("#rotateRight").click(function() {

                    $('canvas').css({
                                "transform":"rotate(0deg)"
                                });
                    }
                )
            });

            function resize_img(val) 
        {
            var width = globalElement_width;
            var height = globalElement_height;
            var zoom_percen = (height * 1); // Maximum zoom 50%
            var ASPECT = 10;//zoom_percen / 30;
            var zoom_value = val / 1;
            var size = width + ASPECT * zoom_value;
            var d = ASPECT*zoom_value/10;          

            $img = $('.canvas img');
            $img.stop(true).animate({
            marginTop: -d,
            marginLeft: -d,
            width: size,
            height: size
            }, 250);
        }

    </script>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:05:41.580

这是我自己的问题的答案。代码运行良好。仅在旋转图像时遇到问题，并且有点缩放。

这是代码：

```
 <div id="div_buttons" style="position: absolute; top: 580px;">
            <table border="0">
                <tr>
                    <td>
                        <input type="button" id="rotateLeft" align = "left" value="Rotate Left" />
                    </td>

                    <td>
                        <input type="button" id="rotateRight" align = "left" value="Rotate Right" />
                    </td>
                </tr>
            </table>
        </div>

        <div id="result" style="position: absolute; top: 520px;" >Here is the div</div>

    <!--HERE IS THE STYLE TAG... -->
    <style type="text/css">
        img
        {
            opacity: 0.5;
        }

        .canvas
        {
            background: url('sky.jpg') no-repeat 30% 30%;
            height: 500px;
            width: 500px;
            repeat: false;
            opacity: 0.5;
            repeat: none;
        }
    </style>

    <!--HERE IS THE JAVASCRIPT INSIDE <SCRIPT> TAG... -->
    <script type="text/javascript">
        var canvas = document.getElementById("myCanvas");
        var context = canvas.getContext('2d');
        var globalElement_width;
        var globalElement_height;
        var newangle = 0;
        var operation = "";

        $(document).ready
        (function() {
            $img = $('.canvas');
                globalElement_width = $img.width();
                globalElement_height = $img.height();

                $(".slider").slider
            ({
                        step: 1,
                        min: 1,
                        max: 100,
                        value: 0,
                        slide: function(event, ui)
                            {
                                resize_img(ui.value);
                            }
                });

                //THIS IS THE CODE THAT MAKES CANVAS BACKGROUND ROTATE LEFT.
                $("#rotateLeft").click(function() { 
                    $('.canvas').css({
                        "transform":"rotate(-90deg)"
                                });
                    }
                ) //addClass("left")

                //THIS IS THE CODE THAT MAKES CANVAS BACKGROUND ROTATE RIGHT.
                $("#rotateRight").click(function() {
                    $('.canvas').css({
                            "transform":"rotate(0deg)"
                                });
                    }
                )

                //TRYING TO MAKE CANVAS ANNOTABLE.

                //ALL MOUSE LISTENERS ARE SET HERE.
                canvas.onmousedown = function (e) //WHEN MOUSE IS CLICKED
                {
                    canvas.isDrawing = true;

                }

                canvas.onmouseup = function (e) //WHEN MOUSE CLICK IS RELEASED
                {
                    canvas.isDrawing = false;

                }

                canvas.onmousemove = function(e)
                {

                    var res = document.getElementById('result');
                    res.innerHTML = e.pageX + ", " + e.pageY;

                    if (!canvas.isDrawing) {
                       return;
                    }

                    var x = e.pageX - this.offsetLeft;
                    var y = e.pageY - this.offsetTop;
                    var radius = 5; // or whatever
                    var fillColor = '#ff0000';
                    context.fillCircle(x, y, radius, fillColor);
                }

                context.fillCircle = function (x, y, radius, fillColor)
                {
                    //alert("fillCircle is here...");
                    this.fillStyle = fillColor;
                    this.beginPath();
                    this.moveTo(x, y);
                    this.arc(x, y, radius, 0, Math.PI * 2, false);
                    this.fill();
                }
            });

            function resize_img(val) 
        {
            context.save();
            var width = globalElement_width;
            var height = globalElement_height;
            var zoom_percen = (height * 1); // Maximum zoom 50%
            var ASPECT = 10;//zoom_percen / 30;
            var zoom_value = val / .5;
            var size = width + ASPECT * zoom_value;
            var d = ASPECT*zoom_value/10;          

            $img = $('.canvas');
            $img.stop(true).animate({
            marginTop: -d,
            marginLeft: -d,
            width: size,
            height: size
            }, 250);
            context.restore();

        }
    </script>

</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:34:37.747

如果你想放大和缩小图像，你可以对背景图像执行此操作意味着[检查这个 stackoverflow 问题](https://stackoverflow.com/questions/14803733/html5-canvas-smoothzoom/14807597#14807597)

它可以帮助你

# android - 移动网络应用程序在原生时使用什么而不是 LocalStorage？

> ID：14826517
> 
> 赞同：1
> 
> 时间：2013-02-12T06:10:00.720
> 
> 标签：android, ios, html, local-storage

就像标题一样。这似乎是一个简单的问题，但我对原生开发不是很熟悉，所以我想得到一个解释。

我的问题是：

> Web 应用程序（包括具有移动友好的 UI&UX 的移动 Web 应用程序，可以使用流行的框架，如 Sencha Touch、jQuery Mobile 等）具有使用 LocalStorage 的“离线”能力。这可以简单理解为浏览器的“持久化数据库”。那么当它们变成原生的（我的意思是把它们打包成原生应用程序）时，LocalStorage 是否仍然存在并且可以工作？如果是，它们仍然是 LocalStorage 还是会被“转换”成另一种具有相同功能的原生存储？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:52:36.443

他们（根据我自己的经验和 iOS 来自阅读）没有使用任何东西 - 他们使用相同的本地存储！

这是通过告诉正在运行页面的本机 WebView/webkit 将所有本地存储映射到设备持久存储上的某个路径来完成的。实现起来非常简单。请注意，使用 Android 持久数据将需要您请求用户许可才能将数据写入磁盘。

从 HTML 开发人员的角度来看，没有什么特别需要做的。

# php - Yii radioButtonList - JUI Buttonset - 隐藏输入字段

> ID：14826518
> 
> 赞同：1
> 
> 时间：2013-02-12T06:10:03.983
> 
> 标签：php, jquery-ui, yii

我是 Yii 的新手。

如果我使用 Yii Form Builder 使用以下代码生成一个 radioButtonList

```
echo $form->radioButtonList($person,'gender_code',array('m'=>'Male','f'=>'Female')); 
```

它输出以下 HTML

```
<input id="ytPerson_gender_code" type="hidden" value="" name="Person[gender_code]" />
<input id="Person_gender_code_0" value="m" type="radio" name="Person[gender_code]" /> 
<label for="Person_gender_code_0">Male</label><br/>
<input id="Person_gender_code_1" value="f" type="radio" name="Person[gender_code]" /> 
<label for="Person_gender_code_1">Female</label> 
```

为什么会生成隐藏输入字段？它有什么用途。？有什么办法可以删除吗？

我正在尝试将单选按钮转换为 Jquery UI 按钮集，但隐藏的输入字段与单选按钮具有相同的名称，因此，jquery UI 按钮集会中断。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T06:26:16.910

根据 yii 文档，如果未选中单选按钮，他们仍然可以获得一个值。应该有一个 htmlOption 告诉它不要显示。尝试： `radioButtonList($person,'gender_code',array('m'=>'Male','f'=>'Female'),array('uncheckValue'=>NULL))`

# kendo-grid - KENDO UI 可编辑内联网格服务器绑定不显示验证消息

> ID：14826519
> 
> 赞同：1
> 
> 时间：2013-02-12T06:10:08.553
> 
> 标签：kendo-grid

使用`Razor MVC 4.0` 我有一个必填字段为“ `Name`”的视图（在模型中指定）。我有一个`Kendo Grid / EditMode InLine / Server bound Data source`（见下文）

@(Html.Kendo().Grid(模型)

```
 .Name("Grid") 

  .Events(e => e.Edit("gridChange")) 

  .Columns(columns =>
  {
      columns.Bound(p => p.Id).Hidden();   //Create a column bound to the "ProductID" property
      columns.Bound(p => p.Name).Width(120); //Create a column bound to the "ProductName" property
      columns.Bound(p => p.SortValue).Width(80).EditorTemplateName("SortNumericTextBox");   //Create a column bound to the "UnitPrice" property
      columns.Bound(p => p.Active).Width(100);//Create a column bound to the "UnitsInStock" property

      columns.Command(command => command.Edit()).Width(100);
  })
 .ToolBar(toolbar => toolbar.Create())
 .Editable(editable => editable.Mode(GridEditMode.InLine))
 .DataSource(dataSource => dataSource
        .Server()
        .Model(model =>
        {
            model.Id(p => p.Id);
            model.Field(p => p.Name ).Editable(true);
            model.Field(p => p.SortValue);
            model.Field(p => p.Active);

        })

     // Configure CRUD -->
        .Create(create => create.Action("Create", "MonitorType"))
        .Read(read => read.Action("Index", "MonitorType"))
        .Update(update => update.Action("Edit", "MonitorType"))         
        .PageSize(5)

       )
 .Pageable() //Enable paging

 ) 
```

在控制器（HTTP）中编辑和创建检查`ModelState.IsValid`（名称为空时为假）。没有更新发生。返回网格。

```
 [HttpPost]
    public ActionResult Create(MonitorType monitortype)
    {
        if (ModelState.IsValid)
        {
            unitOfWork.MonitorTypeRepository.Insert(monitortype);
            unitOfWork.Save();
            return RedirectToAction("Index");
        }

        //GridRouteValues() is an extension method which returns the
        //route values defining the grid state - current page, sort expression, filter etc.
        RouteValueDictionary routeValues = this.GridRouteValues();
        return RedirectToAction("Index", routeValues);
    } 
```

但是 - 验证消息是“不”显示。

您如何显示验证消息？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-03T21:43:54.443

据我所知，需要两件事。

`DataSource`首先，在（例如`.ajax().events(events => events.Error("error_handler"))`）中分配错误处理程序事件。

其次，添加错误处理程序脚本（此代码几乎在每个 Kendo UI 演示中都可用）：

```
 function error_handler(e, status) {
    if (e.errors) {
        var message = "The following are errors:\n";
        $.each(e.errors, function (key, value) {
            if ('errors' in value) {
                $.each(value.errors, function () {
                    message += this + "\n";
                });
            }
        });
        alert(message);
    }
} 
```

最后，控制器需要返回`ModelState`作为参数，以便显示错误。再次查看网格演示，您将在[MVC 控制器代码](http://demos.kendoui.com/web/grid/editing.html "剑道用户界面演示")中看到以下内容：

```
return Json(results.ToDataSourceResult(request, ModelState)); 
```

# user-interface - 我不明白如何在 Racket 上实现用户界面

> ID：14826520
> 
> 赞同：1
> 
> 时间：2013-02-12T06:10:11.890
> 
> 标签：user-interface, scheme, racket

开始在 Racket 中选择 GUI 并立即插入标签。就这样被撞了（求代码不多找毛病，我刚开始学Racket）：

```
#lang racket/gui 
(define my-settings-hash (make-hash))
(define my-settings-hash "label" "Test")
(define my-settings-hash "width" 300)
(define my-settings-hash "height" 300)
(define my-tabs-list (list "Tab 0"
                           "Tab 1"
                           "Tab 2"))
(define root-wnd (new frame% [label (hash-ref my-settibgs-hash "label")]
                             [width (hash-ref my-settings-hash "width")]
                             [height (hash-ref my-settings-hash "height"]))
(define tab-panel (new tab-panel%
                             (parent root-wnd)
                             (choices my-tabs-list)
                             (callback
                               (lambda (tp e)
                                (case (send tp get-selection)
                                 ((0) (send tp change-children (lambda (children) (list a-panel))))
                                 ((1) (send tp change-children (lambda (children) (list b-panel))))
                                 ((2) (send tp change-children (lambda (children) (list a-panel)))))))))
(define a-panel (new panel%
                 (parent tab-panel)
                 (label "A-panel")))
(define b-panel (new panel%
                 (parent tab-panel)
                  (label "b-panel")))
(send frame show #t) 
```

（对不起，如果有额外的括号）。这就是问题所在 - 当程序在两个面板的主窗口中启动时，但只有在开关丢失后，一个单独存在。我哪里钝了？如果您能给出更正或工作示例，我将不胜感激（但请以“头”的决定为准，因为直到非常了解球拍并且我无法理解，或多或少复杂）。先感谢您！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T09:10:35.873

## Racket语言的理解错误

您的代码中的错误不仅仅是“额外的括号”。您的示例代码对我来说根本没有运行，这表明您对 Racket 本身没有足够的基本熟练程度，无法在其中开发 GUI 方面取得非常有效的进展。此类错误的一个示例是以下行：

```
 (define my-settings-hash "label" "Test")` 
```

`define`表格不能以这种方式形成；在 Racket（或 Scheme）中说是没有意义的

```
(define N A B) 
```

if`N`只是一个标识符。

## 开发方法中的错误

你应该在 DrRacket 中开发你的代码；这将帮助您纠正您在代码中犯的许多错误。由于您`#lang`的代码顶部有一个指令，您应该能够立即开始使用 DrRacket 本身。

DrRacket 很容易发现的另一个错误示例：拼写错误的标识符`my-settibgs-hash`。

至于如何实现选项卡的实际问题，正如您所问的，您应该阅读`tab-panel%`该类本身的文档。DrRacket 有一个集成的帮助台，因此您可以右键单击类似的标识符`tab-panel%`，提供的菜单选项之一是“查看来自球拍/gui/base、球拍/gui 的选项卡面板% 的文档”；[单击该按钮会将您带到该课程的文档网页](http://docs.racket-lang.org/gui/tab-panel_.html)的本地副本。

## tab-panel%界面的使用误区

阅读文档后`tab-panel%`，请特别注意`tab-panel%`没有`label`参数，至少在 5.3.2 版本中没有（这是新的，但我怀疑这个接口在一段时间内没有显着变化）。我不知道您要在那里做什么，但我怀疑您正试图让某种文本显示在面板内。在 Racket 中创建文本有几个不同的选项；最简单的可能是`message%`。（不过，我建议浏览[整个小部件库](http://docs.racket-lang.org/gui/Widget_Gallery.html)，因为其他小部件可能更符合您的需求。）

## 示例固定代码

这是我修改后的代码，从我正在运行的 DrRacket 中剪切和粘贴。我试图尽可能多地忠实于您的原始代码（考虑到转录中存在的基本错误，我假设您一定是从某个地方转录的；如果您提供一个链接到那个原始来源）。

```
#lang racket/gui 

(define my-settings-hash (make-hash))
(hash-set! my-settings-hash "label" "Test")
(hash-set! my-settings-hash "width" 300)
(hash-set! my-settings-hash "height" 300)
(define my-tabs-list (list "Tab 0"
                           "Tab 1"
                           "Tab 2"))
(define root-wnd (new frame% [label (hash-ref my-settings-hash "label")]
                             [width (hash-ref my-settings-hash "width")]
                             [height (hash-ref my-settings-hash "height")]))
(define tab-panel (new tab-panel%
                             (parent root-wnd)
                             (choices my-tabs-list)
                             (callback
                               (lambda (tp e)
                                (case (send tp get-selection)
                                 ((0) (send tp change-children (lambda (children) (list a-panel))))
                                 ((1) (send tp change-children (lambda (children) (list b-panel))))
                                 ((2) (send tp change-children (lambda (children)
                                                                 (list a-panel)))))))))
(define a-panel (new panel% (parent tab-panel)))
(define a-text (new message% (parent a-panel) (label "A-panel")))
(define b-panel (new panel% (parent tab-panel)))
(define b-text (new message% (parent b-panel) (label "b-panel")))

(send root-wnd show #t) 
```

# php - 将 pdf 与表单域合并

> ID：14826525
> 
> 赞同：1
> 
> 时间：2013-02-12T06:10:27.757
> 
> 标签：php, linux, pdf, pdftk

```
pdftk test.pdf test.pdf cat output test2.pdf 
```

我正在尝试使用该命令复制一页 PDF，但运气不佳。我运行该命令，test2.pdf 的第一页有表单字段，但第二页没有。

即使我确实设法让第二页具有与第一页相同的表单字段。我希望第二页表单字段的名称略有不同。比如代替“name”可能是“name2”和“name3”等等。然后 FDF 会以不同的方式填充每个页面。

有任何想法吗？

我最终尝试在 PHP 中执行此操作，但确实可以访问 CLI。pdftk 已经安装。为了增加便携性，我不希望安装任何其他东西，但是这样做是一种选择。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:54:55.127

我想通了。我首先通过这种方法将每个 FDF 应用于 test.pdf：

```
pdftk test.pdf fill_form page1.fdf output page1.pdf flatten dont_ask
pdftk test.pdf fill_form page2.fdf output page2.pdf flatten dont_ask
pdftk page1.pdf page2.pdf cat output final.pdf dont_ask 
```

# php - 了解 Magento 模块的架构

> ID：14826527
> 
> 赞同：0
> 
> 时间：2013-02-12T06:10:41.267
> 
> 标签：php, magento

我使用 PHP Core 和自定义 MVC 工作了 1 年半，直到搬到 magento 办公桌。

一开始我觉得这很困难，但后来我掌握了主题集成和以前完成的模块的维护。现在我开始创建模块并且对架构感到非常困惑。

坦率地说，每次我写新代码时，它都运行良好，但后来编辑掉了，因为它不完全符合 Magento 的编码风格，所以浪费了前辈的很多时间。

例如，当我需要检查某些内容并更新数据库时，我会写道，

```
<?php 
$resource = Mage::getSingleton('core/resource');
$readConnection = $resource->getConnection('core_read');
$query = "SELECT ststus FROM table WHERE Id='".$id."'";
$select_query = $readConnection->fetchOne($query);
$update_value= $select_query[0];
if($update_value=='2')
{
$writeConnection = $resource->getConnection('core_write');
$query = "UPDATE table SET field_name='C' WHERE Id='".$id."'";
$writeConnection->query($query);
}
?> 
```

这后来改为简单的这个，

```
foreach ($dealroomIds as $dealroomId) {
                $manufacturers = Mage::getSingleton('module/module')
                    ->load($dealroomId)
                    ->setStatus($this->getRequest()->getParam('status')); //getting status 
                    if($this->getRequest()->getParam('status')=='2'){
                    $manufacturers->setRunningStatus('C'); // setting new status
                    }
                $manufacturers->setIsMassupdate(true)
                    ->save();
                Mage::getSingleton('dealroom/deals')->UpdateDealProducts($dealroomId); // Update
                    } 
```

上面给出的只是一个例子，仅此而已。

要了解更多关于编码风格和标准，我认为有必要了解更多关于

*   堵塞
*   控制器
*   模型
*   帮手
*   数据

我进行了搜索，但无论我阅读和理解的内容都与基本内容相去甚远。如果有人简单而基本地指出这些的联系和功能，那将对我有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T11:40:11.833

你检查过这个吗？Alan Storm 共有 8 篇文章，涵盖了 Magento 的大部分内容。

[http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-1-introduction-to-magento](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-1-introduction-to-magento)

如果您觉得难以理解，恐怕您需要先加强您的 OOP 和 MVC 概念。

# c++ - 仅为应用程序禁用页面文件？

> ID：14826534
> 
> 赞同：4
> 
> 时间：2013-02-12T06:11:23.020
> 
> 标签：c++, paging, pagefile

我有一个实时应用程序在磁盘 IO 访问时间很*糟糕*的服务器上运行（实际传输速度很好，但请求磁盘访问可能需要几秒钟才能被授予）。

即使有大量可用物理内存，Windows 也会将内存移动到页面文件中，因此即使普通应用程序从未明确尝试访问磁盘，它们也可能需要磁盘访问。

有没有一种方法可以实用地禁用应用程序的页面文件，而不是禁用整个页面文件系统？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T06:17:08.203

您可以使用[VirtualLock](http://msdn.microsoft.com/en-us/library/aa366895%28VS.85%29.aspx)将进程虚拟地址空间的指定区域锁定到物理内存中，确保后续对该区域的访问不会导致页面错误。

# jquery-isotope - 为什么同位素 js 插件将元素推入 1 列？

> ID：14826537
> 
> 赞同：1
> 
> 时间：2013-02-12T06:11:39.723
> 
> 标签：jquery-isotope

我有一个 3 列网格布局，其中有几行跨越完整的 3 列。我也使用 imagesLoaded 插件加载图像。但是，同位素将所有内容都推入 1 列，并且对源代码的审查显示每个项目都剩下：0px。

下面是我的 HTML、CSS 和 JS 的片段，关于这个问题有什么线索吗？

HTML：

```
<div id="feature-work" class="clearfix">
                        <figure class="websites wide-feature"><a href="#">
                            <img src="http://html5doctor.com/wp-content/uploads/2010/03/macaque.jpg" alt="Monkey!" >
                            <figcaption>1\. Macaque</figcaption>
                        </a></figure>

                        <figure class="websites tall-feature"><a href="#">
                            <img src="http://html5doctor.com/wp-content/uploads/2010/03/kookaburra.jpg" alt="Monkey!" >
                            <figcaption>2\. Kookaburra</figcaption>
                        </a></figure>

CSS:

    #feature-work {
        margin:0 auto;
        width:960px;
    }

    #feature-work figure {

        position:relative;
        float:left;
        overflow:hidden;
        margin:10px;
        padding:0;
        width:298px;
        height:298px;
        border:1px solid #ccc;
    }

    #feature-work figure img {
        float:left;
        width:100%;
        height:218px;
        overflow:hidden;
    } 
```

JS

```
$container = $('#feature-work');    

    $container.imagesLoaded( function(){

            $container.isotope({
                itemSelector : 'figure',
                layoutMode: 'masonry'

            });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:37:18.647

对某些人来说可能很明显，但是如果您的第一项大于“默认”大小，则它会干扰同位素的计算，因此您需要显式设置 layoutMode 和 columnWidth。下一个“陷阱”是它看起来 columnWidth 使用元素 outerWidth 即包括边距！

$container = $('#feature-work'); $container.imagesLoaded(函数(){

```
 $container.isotope({
        itemSelector : 'figure',
        layoutMode:'masonry',
        masonry:{
            columnWidth: 320
        }       
    }); 
```

});

# oracle - 在函数内执行过程（ORA-14551 错误）

> ID：14826538
> 
> 赞同：2
> 
> 时间：2013-02-12T06:11:49.333
> 
> 标签：oracle, function, procedure, dml

这个问题与我[之前的问题有关](https://stackoverflow.com/questions/14768880/calling-procedure-from-oracle-to-crystal-report)。

我有一个过程（`PROC_YEARLYACTIVELIST2`），它将显示在指定年份的所有活动记录。
它将删除以前的内容`TBLACTIVELISTYEARLY2`并插入结果`PROC_YEARLYACTIVELIST2`。

我创建了一个函数，它将执行`TBLACTIVELISTYEARLY2`，从中选择所有记录`TBLACTIVELISTYEARLY`并将其放入`CURSOR C_IH`，并返回水晶报表的表格。

以下只是部分代码：

```
宣布
  CURSOR C_IH IS SELECT * FROM tblActiveListYearly2;

  ctr 整数；
  我号码；  
  currDeploymentComputer COL_TYPE_DEPLOYMENT_COMPUTER := COL_TYPE_DEPLOYMENT_COMPUTER NULL);
  R_IH C_IH%ROWTYPE;

 开始
 PROC_YEARLYACTIVELIST2(in_year);

  打开 C_IH;
   我：= 0；
    环形 （....）

```

我试图将该函数称为

```
SELECT GETDEPLOYMENT_COMPUTER('2012') from dual; 
```

并且有`ORA-14551`错误

```
ORA-14551: cannot perform a DML operation inside a query 
ORA-06512: at "NPLS.PROC_YEARLYACTIVELIST2", line 12
ORA-06512: at "NPLS.GETDEPLOYMENT_COMPUTER", line 3 
```

搜索了一下，发现是因为和`INSERT`, `UPDATE`or `DELETE`and冲突`DUAL`。

有没有其他方法可以在返回表的函数中执行我的过程？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T08:22:24.897

不; 出于很好的原因，您*不能*在 SELECT 语句中执行 DML。

您正在更改数据库中的数据，而 Oracle 需要数据的读取一致视图，即它需要知道您选择的内容不会被您选择的内容改变。

你正在做的事情听起来非常不必要。你有一个 3 步过程：

1.  从表中删除一些数据
2.  将新数据插入该表
3.  从表中选择数据。

为什么不简单地选择您需要的数据；会快很多吗？如果您必须预处理数据，那么您可以有一个与数据选择异步执行此操作的过程。

我对 Crystal Reports 一无所知，但您也可以在 PL/SQL 块中执行此操作。

```
declare
   l_getdeployment my_variable_type;
begin
   l_getdeployment := GETDEPLOYMENT_COMPUTER('2012');
end;
/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T06:32:08.003

我认为您需要将 DML 更改和报告部分分开。应该在您的报告函数调用之外调用进行数据更改的过程......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T01:50:07.327

这太复杂了。
由于我想从表格中获取记录到水晶报表，我将我选择的内容放到表格中。

现在，我意识到我可以将我的过程中的逻辑放入函数中，将其放入 a`SYS_REFCURSOR`中，返回并使用以下查询调用函数：

```
SELECT * FROM TABLE(GETDEPLOYMENT_COMPUTER('2012')); 
```

无论如何，感谢那些回应并帮助我的人。:)

# java - 如何在 RMI（客户端代码）中使用在服务器端代码中定义的事件？

> ID：14826542
> 
> 赞同：3
> 
> 时间：2013-02-12T06:12:03.793
> 
> 标签：java, events, rmi

在 RMI（客户端代码）中，如何使用在服务器端代码中定义的事件？

例如，以下服务器端代码定义`PropertyChangeSupport`事件。

**它如何在客户端实现？**

```
package rmiservice.services.calculator;

import java.beans.PropertyChangeSupport;
import java.rmi.Naming;
import java.rmi.RemoteException;
import java.rmi.server.UnicastRemoteObject;
import java.util.LinkedList;
import java.util.Queue;

public class CalculatorService extends UnicastRemoteObject implements ICalculator {
private Queue<Integer> numbers = new LinkedList<Integer>();
private Integer result;
***private PropertyChangeSupport propertyChangeSupport = new PropertyChangeSupport(this);***

public CalculatorService() throws RemoteException {
    super();

}

public void start() throws Exception {
    java.rmi.registry.LocateRegistry.createRegistry(1099);
    Naming.bind("CalculatorService", this);
    System.out.println("Calculator Service is Run  . . .");
}

public void stop() throws Exception {

    Naming.unbind("CalculatorService");
    UnicastRemoteObject.unexportObject(this, true);

    System.out.println("Calculator Service is Stop . . .");

}

//-------------------------------------------------------------------
//------------------------------ Implements ICalculator -------------

public void addNumber(Integer number) throws Exception {
    numbers.add(number);
}

public Integer getResult() throws Exception {
    return this.result;
}

public void setResult(Integer result) throws Exception {
    Integer oldResult = this.getResult();
    this.result = result;
    ***propertyChangeSupport.firePropertyChange("result", oldResult, result);***
}

public void calculate(Operation operation) throws Exception {
    Integer _result = 0;

    if (numbers.size() < 2)
        return;

    switch (operation) {
        case Add: {
            _result = 0;
            while (numbers.size() > 0) {
                _result += numbers.poll();
            }
            break;
        }

        case Substract: {
            _result = numbers.poll();
            while (numbers.size() > 0) {
                _result -= numbers.poll();
            }
            break;
        }

    }

    this.setResult(_result);

}
//------------------------------------------------------------------- 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-10T08:10:35.750

这就是它的完成方式

抱歉，我的示例已经完成，不完全适合您的代码，但它应该很容易适应

## 1\. 共享代码（将服务器接口暴露给任何客户端的 jar）

```
//The interface that RMI will use to pass event handlers between client and server
public interface ServerEventHandler extends Remote {

    //This is not actually required (using it for testing)
    public void setId(int id) throws RemoteException;

    //This is not actually required (using it for testing)
    public int getId() throws RemoteException;

    // Here we use String as event type.
    // Could be any number of Serializable or Remote arguments
    public void handle(String message) throws RemoteException;

}

// A simple interface that will allow us to remotely (un)register event handlers
public interface ServerObjectWithCallback extends Remote {

    public void addServerEventHandler(ServerEventHandler handler) throws RemoteException;

    public void removeServerEventHandler(ServerEventHandler handler) throws RemoteException;

} 
```

## 2\. 服务器代码（启动和接口实现）

```
public class ServerObjectWithCallBackImpl implements ServerObjectWithCallback {

    private static final SimpleDateFormat sdf = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss,SSS", Locale.ROOT);

    // A counter to automatically assign unique ids to new event handlers
    private int handCount = 0;
    // This will provide references to client-side event handlers and a way to
    //  access their ids with no remote call
    private HashMap<Integer, ServerEventHandler> handlers = new LinkedHashMap<Integer, ServerEventHandler>();
    // A fixed pool of 10 threads for asynchronous event handling
    private ExecutorService threads = Executors.newFixedThreadPool(10);

    // A simple counter that will allow printing a different message each time
    // (for the sake of this test only)
    private int eventcounter = 0;

    @Override
    public synchronized void addServerEventHandler(ServerEventHandler handler) throws RemoteException {
        // Assign a new id to handler and keep a reference to it
        handler.setId(++handCount);
        handlers.put(handCount, handler);
        System.out.println("New handler added with id " + handCount);
    }

    @Override
    public synchronized void removeServerEventHandler(ServerEventHandler handler) throws RemoteException {
        try {
            // Get handler id and forget about it
            int id = handler.getId();
            handlers.remove(id);
            System.out.println("Handler with id " + id + " removed");
        } catch (RemoteException e) {
            System.err.println("#Could not retrieve id for handler to unregister");
        }
        // TODO safer method "removeById" that will avoid unnecessary remote call to getId()
    }

    public synchronized void onServerEvent(Object event) {
        // This is where the remote callbacks take place
        // This method is called from server side and performs asynchronous
        //      callback on each registered client
        // TODO event should actually be of a more meaningfull type than Object
        System.out.println(sdf.format(new Date()) + "> Firing event #" + ++eventcounter + ": " + event + " (" + handlers.size()
                + " registered handlers)");
        for (int id : handlers.keySet()) {
            try {
                ServerEventHandler handler = handlers.get(id);
                threads.execute(new EventRunnable(handler, id, event, eventcounter));
            } catch (Exception e) {
                System.err.println("#Could not execute async callback on handler " + id);
                e.printStackTrace();
            }
        }
    }

    // A private runnable that will suit our needs to perform callbacks asynchronously
    // If we didn't, server might hang because of client behavior or missing client
    // Moreover, one client being slow would delay event dispatch to other clients
    private static class EventRunnable implements Runnable {

        private ServerEventHandler handler;
        private int handlerId;
        private Object event;
        private int eventNum;

        public EventRunnable(ServerEventHandler handler, int handlerId, Object event, int eventNum) {
            this.handler = handler;
            this.handlerId = handlerId;
            this.event = event;
            this.eventNum = eventNum;
        }

        @Override
        public void run() {
            try {
                handler.handle("message #" + eventNum + " sent on " + sdf.format(new Date()) + " = " + event);
            } catch (Exception e) {
                // TODO Better exception management : react depending on cause
                System.err.println("handler " + handlerId + " seems to have gone away: " + e.toString());
                // TODO Self-unregister handler after some unavailability time
                //  and possibly destroy client session as well
            }
        }
    }

}

public class MainCallback {
    private static ServerObjectWithCallBackImpl soc;
    private static ServerObjectWithCallback stub;

    public static void main(String[] args) throws RemoteException, AlreadyBoundException, InterruptedException {

        Registry reg = null;
        try {
            // Startup RMI registry
            reg = LocateRegistry.createRegistry(1099);
            System.out.println("RMI started");

            // Instantiate the RMI entry-point for the client, which will also
            //      be the object sending events
            soc = new ServerObjectWithCallBackImpl();
            stub = (ServerObjectWithCallback) UnicastRemoteObject.exportObject(soc, 0);
            // Bind the remote object's stub in the registry
            reg.bind("CallbackServer", stub);
            System.out.println("ServerObjectWithCallback bound to RMI (CallbackServer). Waiting for client");

            // This will be our event object : a counter
            int count = 0;
            while (true) {
                // Wait between 1 and 5 seconds
                Thread.sleep((int) (Math.random() * 4000 + 1000));
                // Fire event
                soc.onServerEvent(++count);
            }
        } finally {
            try {
                // Close up registry
                UnicastRemoteObject.unexportObject(reg, true);
                System.out.println("RMI registry destroyed");
            } catch (Exception e) {
                System.out.println("Could not destroy RMI registry");
            }
        }
    }
} 
```

## 3\. 客户端代码（启动和处理程序实现）

```
// This is our event handler implementation
// Note how it extends UnicastRemoteObject:
//  this is what allows the magic of calling client methods from server,
//  along with the fact that it implements ServerEventHandler, which is a Remote interface known from server
public class ClientSideEventHandler extends UnicastRemoteObject implements ServerEventHandler {

    private static final long serialVersionUID = 5094195049935134358L;

    private static final SimpleDateFormat sdf = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss,SSS", Locale.ROOT);

    // id is just a way of discriminating clients for this test
    private int id;

    public ClientSideEventHandler() throws RemoteException {
        super();
    }

    // Make id available to server so it can number clients as it wishes
    @Override
    public int getId() throws RemoteException {
        return id;
    }

    @Override
    public void setId(int id) throws RemoteException {
        this.id = id;
    }

    // This is the actual callback method
    @Override
    public void handle(String message) throws RemoteException {
        System.out.println(sdf.format(new Date()) + "> Message from server: " + message);
    }

    // Overriding toString allows testing whether the handler is a reference or
    //      a serialized copy on server side
    @Override
    public String toString() {
        return this.getClass().getSimpleName() + "[" + id + "]";
    }

}

public class MainCallback {

    public static void main(String[] args) throws InterruptedException, RemoteException {
        // Connect to RMI registry on server
        Registry registry = null;
        try {
            registry = LocateRegistry.getRegistry("localhost", 1099);
            System.out.println("Connected to server");
        } catch (RemoteException e) {
            System.out.println("Error connecting to RMI");
            e.printStackTrace();
            return;
        }

        ServerObjectWithCallback soc = null;
        // Create an event handler on our side
        ClientSideEventHandler handler = new ClientSideEventHandler();
        try {
            // Get RMI server entry-point from remote RMI registry
            soc = (ServerObjectWithCallback) registry.lookup("CallbackServer");
            System.out.println("CallbackServer recovered from server");
            // Register for server events
            soc.addServerEventHandler(handler);
            System.out.println("Handler registered. Waiting for events");
        } catch (RemoteException | NotBoundException e) {
            System.out.println("Error getting MyRemoteInterface");
            e.printStackTrace();
            return;
        }

        // Just wait indefinitely for an event to happen
        while (true) {
            Thread.sleep(1000);
        }
    }

} 
```

所以：

*   您的服务器通过共享 jar 公开其远程接口
*   其中之一将在服务器端实现以提供事件触发（即您的 CalculatorService）
*   另一个将在客户端实现以提供事件处理（我猜这将是您的 PropertyChangeSupport）
    *   客户端事件处理程序也必须是 UnicastRemoteObject 的子类，以便它可以通过代理传递给服务器，并且服务器可以远程调用它的方法。
*   回调应该被异步调用，以防止一个客户端阻塞服务器线程和/或延迟对其他客户端的回调

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:27:42.457

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-12T06:23:18.037

我可能误解了这个问题。

但据我所知，RMI 并不涉及您所询问的那种事件绑定。

客户端基本上会查找在 RMI Registry 中注册的对象并调用其中的方法。

您必须自己实现事件处理代码。

如果您询问如何调用 RMI 绑定对象的方法，您可以在

[http://en.wikipedia.org/wiki/Java_remote_method_invocation](http://en.wikipedia.org/wiki/Java_remote_method_invocation)

# mysql - 如何在一个查询中使用内部联接获取列值的总和？

> ID：14826545
> 
> 赞同：1
> 
> 时间：2013-02-12T06:12:26.433
> 
> 标签：mysql, sql, database, inner-join

我有一个表名作为 a_ad_display 我有下表

```
advId | Displaytime 
```

我有一个带有以下列的 a_advertise 表

```
advertiseId| advertisename| mediaTypeId 
```

我有一个带有以下列的 a_mediatype 表

```
mediaTypeId | medianame

1 | Image
2 | Animation
3 | video 
```

a_display 表中有多个 advId 条目

我想用他们的 mediaType 获取广告显示的总和，比如 a_display 表中有多少视频、图像和动画类型的广告

我已经这样做了

```
SELECT 
  mdtype.medianame AS _type,
  SUM(mdtype.medianame = 'Image') AS _display 
FROM
  a_ad_display a 
  INNER JOIN a_advertise adv 
    ON adv.advertiseId = a.advId 
  INNER JOIN a_mediatype mdtype 
    ON mdtype.mediaId = adv.mediaTypeId 
GROUP BY medianame ; 
```

但我得到了以下结果

![在此处输入图像描述](../Images/6311172bd622bc6034602e56adf87653.png)

但是如果只写 sum(distinct mdtype.medianame) 那么它会给我错误......那么我怎样才能在一个查询中获得图像视频和动画的所有值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T06:31:04.000

```
SELECT
    m.medianame,
    COUNT(as.advId) as Total
FROM    a_mediatype as m
INNER JOIN a_advertise as a ON a.mediaTypeId = m.mediaTypeId
INNER JOIN  a_ad_display as ad ON ad.advId = a.advertiseId
GROUP BY m.mediaTypeId 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T06:28:13.720

试试这个...

```
SELECT mdtype.medianame as _type, SUM(mdtype.medianame) as _display
FROM a_ad_display a
INNER JOIN a_advertise adv ON ad.advertiseID=a.advId
INNER JOIN a_mediatype mdtype ON mdtype.mediaID=adv.mediaTypeId
GROUP BY _type
HAVING DISTINCT(_type) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T06:31:30.257

你可以试试这个

```
SELECT m.mediaTypeId, 
       MIN(m.medianame) AS `type`, 
       COUNT(m.mediaTypeId) AS `count`
  FROM a_ad_display a LEFT JOIN 
       a_advertise d on d.advertiseId=a.advId LEFT JOIN 
       a_mediatype m on m.mediaId=d.mediaTypeId 
GROUP BY m.mediaTypeId 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T06:45:43.860

试试这个 ：

```
SELECT
    m.medianame,
    COUNT(as.advId) as Total
FROM a_mediatype as m
INNER JOIN a_advertise as a 
ON a.mediaTypeId = m.mediaTypeId
INNER JOIN  a_ad_display as ad 
ON ad.advId = a.advertiseId
GROUP BY m.mediaTypeId 
```

# css - 随内容增长但开始填充整个页面的动态 div

> ID：14826547
> 
> 赞同：0
> 
> 时间：2013-02-12T06:12:41.907
> 
> 标签：css

提前致谢。现在我对“包装器”中的“内容”和“页脚”有疑问。以下是这些的样式。

```
#content
{

   width: 100%;
   min-height: 100%;
   position: relative;
   background-color: #b2b2b2;

}

#footer
{

   width: 100%;
   min-height: 40px;
   position: relative;
   bottom: 0;
   background-color: #e23e23;

}

#wrapper
{

   width: 100%;
   height: 100%;
   background-color: green;
   position: fixed;
   top: 0;
   left: 0;

} 
```

这一切都很好，除了我希望内容占据页面的其余高度（页脚除外）。我用来执行此操作的任何方法都可以做到，如果我过度填充内容，则内容会超出页脚。

换句话说，我希望内容和页脚占据窗口的高度，但如果内容过满，它应该将页脚向下推并创建一个滚动条。

这可以用 css 完成吗？如果不能，我该如何用 JS 来完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:26:05.267

听起来你想要的是一个“粘性页脚”。以下是一些参考资料：

*   [http://css-tricks.com/snippets/css/sticky-footer/](http://css-tricks.com/snippets/css/sticky-footer/)
*   [http://www.cssstickyfooter.com/](http://www.cssstickyfooter.com/)
*   [http://ryanfait.com/sticky-footer/](http://ryanfait.com/sticky-footer/)

# wcf-data-services - 用于 WCF 数据服务的 WCAT 6.1

> ID：14826551
> 
> 赞同：0
> 
> 时间：2013-02-12T06:13:04.683
> 
> 标签：wcf-data-services, wcat

我将 WCAT 6.1 用于 WCF 数据服务。执行 WCAT 脚本时是否可以在我的代码中插入断点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T05:34:29.243

我自己从未做过，但我可以想象在执行 WCAT 脚本时调试 WCF DataService 与通过[从 Web 浏览器访问 DataService](http://msdn.microsoft.com/en-us/library/dd728279%28v=vs.110%29.aspx)手动调试它没有什么不同。

让它工作的关键是你需要配置你的 WCAT 场景来向一个 URI 发出请求，该 URI 解析到你的 DataService 正在运行并且安装了 VS.NET 的计算机。

假设您的 DataService 托管在`http://localhost:12345/northwind.svc`

然后，您将设置您的方案以具有如下所示的请求：

```
scenario
{
    transaction                        
    {                                  
        id = "Debug WCF DataService";
        weight = 10;

        request
        {
          verb = GET;
          url = "http://localhost:12345/northwind.svc";
        }
    }
} 
```

祝你好运！

# linux - bash 中过去 24 小时的 Grep 时间戳

> ID：14826552
> 
> 赞同：0
> 
> 时间：2013-02-12T06:13:05.460
> 
> 标签：linux, bash, grep, design-patterns

我有一个日志文件，其中包含以下格式的数据

```
[1360643407] SERVICE NOTIFICATION: qreda;demo-jms2;OutConnectorResponse-SPONSORED-SMS;CRITICAL;notify-service-by-email;CRITICAL ConsumerCount=0

[1360643487] SERVICE NOTIFICATION: qreda;demo-jms2;OutConnectorResponse-OPT-IN-OUT;CRITICAL;notify-service-by-email;CRITICAL ConsumerCount=0 
```

我想 grep 这个文件来显示过去 24 小时的日志。这里日期显示为时间戳。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:20:34.660

您可以`awk`为此使用：

```
awk 'BEGIN {now=systime()} {then=strtonum(gensub(/\[|\]/,"","g",$1)); if(now-86400<=then) print}' 
```

# android - 如何更改 AsynTask 的返回类型？

> ID：14826555
> 
> 赞同：-1
> 
> 时间：2013-02-12T06:13:17.133
> 
> 标签：android, asynchronous

我对编程很陌生，我已经`AsynTask`像这样扩展了这个类：

```
private class HttpCalls extends AsyncTask<Void,Void,JSONObject> 
```

我已经覆盖了这样的方法：

```
protected JSONObject doInBackground(Void... voids) {
     . . .
     return jsonObject;
} 
```

但是当我打电话时，`new HttpCalls().execute()`我希望返回类型为，`JSONObject`但我得到的是：

```
AsyncTask<Void,Void,JSONObject> 
```

我如何将其更改为`JSONObject`. 提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:15:11.283

这样做

```
JSONObject j = new HttpCalls().execute(); 
```

实际上不会返回一个`JSONObject`. 它将返回一个`AsyncTask`自身。

你应该在`onPostExecute()`

```
@Override
protected void onPostExecute(JSONObject result) {

    super.onPostExecute(result);

    // Do some stuffs
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T06:15:39.270

```
class YouClass {

public JSONObject result;

   private class HttpCalls extends AsyncTask<Void,Void,JSONObject>
       {
   @Override
   protected void onPostExecute(JSONObject result) {
       super.onPostExecute(result);
               YouClass.result = result;
       } } } 
```

# php - Kohana：如何从 ajax 发送内部请求，如外部请求？

> ID：14826556
> 
> 赞同：0
> 
> 时间：2013-02-12T06:13:21.300
> 
> 标签：php, kohana, kohana-3.2

我有一些控制器 Ajax。该控制器对请求进行一些验证，如果不是来自 ajax，则返回错误消息。

函数 is_ajax() 检查标头 X-Requested-With 并返回 true 或 false。

我正在使用来自 ajax 的这个链接并且所有的工作。

/ajax/somecontroller/someaction

当我尝试在内部使用它时 - 我有自己的验证错误 - 而不是 ajax 请求。

有我的代码：

```
$deleted = Request::factory("/ajax/somecontroller/someaction")
                        ->headers("Content-Type", "application/x-www-form-urlencoded")
                        ->headers('HTTP_X_REQUESTED_WITH', 'XmlHttpRequest')
                        ->headers('X-Requested-With', 'XmlHttpRequest')                            
                        ->method(Request::POST)
                        ->post(array(
                            "id_zone_comp" => $id_zone_comp
                        ))
                        ->execute()->body(); 
```

我发送所需的标题但有错误。

如何像外部一样发送内部请求？

小花 3.2.

* * *

当然，我可以处理诸如 Ajax 之类的内部查询，只需在 is_internal() 之后授予它们访问权限，但这不是答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:58:20.677

The problem you're facing is related to the fact that it is in fact an internal request. Because of that the headers you're sending are not populating `$_SERVER` environment info array. They're kept inside `$this->request->headers()` instead.

The ajax check is done in based on $_SERVER contents, like this:

```
if (isset($_SERVER['HTTP_X_REQUESTED_WITH']))
{
    // Typically used to denote AJAX requests
    $requested_with = $_SERVER['HTTP_X_REQUESTED_WITH'];
} 
```

The only solution that would not include `is_internal()` check would be to make this request an external one and to do that you'd have to set the request URL to include protocol (`http://`) and full domain name - essentially a full address. Then, the request will populate $_SERVER array with new headers and `is_ajax()` should let it through.

# html - HTML 5 移动应用程序和存储身份验证数据

> ID：14826561
> 
> 赞同：0
> 
> 时间：2013-02-12T06:13:39.990
> 
> 标签：html, mobile

我正在为我的软件构建一个 HTML 5 移动应用程序。

我浏览了一些与我类似的问题，但似乎都有不同的答案，具体取决于他们的需求。我不确定最好的解决方案。

是否可以使用 AJAX 提交表单来验证移动应用程序中的用户名和密码？我会使用HTTPS。

然后使用 sessionStorage 存储返回的令牌？

我还想使用 sessionStorage 存储一个 API 密钥，这样我就可以从 API 中提取数据。

sessionStorage 是否足够安全以存储 API 密钥？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:28:23.987

首先，本地和会话存储没有加密，期间。它们就像一个 cookie，您需要自己进行加密/解密。所以不，不要将您的密钥以纯文本形式存储在会话存储中。至于另一个问题，我几乎不知道你在说什么......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T00:15:53.937

对于那些感兴趣的人，这就是我决定做的事情：

1.  使用 AJAX over HTTPS 将登录详细信息发送到服务器
2.  服务器验证并发送回一个在一定时间后过期的令牌
3.  令牌存储在 sessionStorage 中，每次我请求从服务器加载某些内容时，它都会检查令牌是否有效

# java - 仅在整个 UI 启动时运行线程

> ID：14826564
> 
> 赞同：1
> 
> 时间：2013-02-12T06:13:44.180
> 
> 标签：java, multithreading, invokelater

我只想在整个 UI 正常启动时运行一个线程，即。所有组件都已`paint()`完成。我试过了`SwingUtilities.invokeLater()`，但线程仍然在整个 UI 启动之前或所有组件`paint()`未完成时运行。

*有可能*吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:20:55.990

无法知道整个 UI 何时启动，主要是因为您编写了自己的众多组件，这些组件可能需要自己的甜蜜时间才能加载。

有[SwingUtilities.invokeAndWait](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingUtilities.html#invokeAndWait%28java.lang.Runnable%29)。但时机将是一个问题。从某种意义上说，一旦你确定你已经调用了设置你的 UI 的初始化代码，你就必须调用它。

一种方法是可能有一个检查标志。假设您有 5 个主要组件，每个加载后都会设置自己的检查标志（或者您可以说拥有标志的公共类）。您的线程将继续等待所有 ckeckflags，然后继续。

您也可以使用 CountdownLatch，但我不会推荐它。把事情简单化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:21:10.510

好的。现在我明白你的问题是什么了。方法paint() 不适合进行invokeLater() 调用。

方法paint() 可能会被多次调用。实际上，每当需要重新绘制屏幕的一部分时都会调用它。

您可能希望在侦听器的代码中或在对话框关闭时添加以后的调用，但绝不应该从方法 paint() 调用。

此外，方法 paint() 本身总是从 Event Dispatch Thread 调用，因此如果要确保从 EDT 调用它，那么执行 invokeLater 就非常多余。

如果您向我们展示您为启动应用程序而编写的方法，我们可能会指出您需要在哪里进行代码调用。

# android - 我需要处理系统生成的弹出窗口。有什么方法可以在弹出窗口中获取文本

> ID：14826567
> 
> 赞同：-2
> 
> 时间：2013-02-12T06:14:03.487
> 
> 标签：android

我需要处理系统生成的弹出窗口。有什么方法可以在弹出窗口中获取文本。该弹出消息不是由我的程序创建的。我们是否有可能需要处理该弹出消息。如果我们能处理，请告诉我。

例如：- 系统生成了一条弹出消息。拨打电话后，我们会弹出消息，说明您的余额和东西。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:18:09.700

不绝对你不能，你甚至不拥有这个弹出/对话框。

但如果您有兴趣实现相同的功能，您可以这样做，例如使用 USSD 服务检查信用余额。

# jquery - iphone风格的复选框

> ID：14826569
> 
> 赞同：0
> 
> 时间：2013-02-12T06:14:19.983
> 
> 标签：jquery, css, css-transitions

我想创建一个复选框！

```
<label id="sliderLabel">
    <input type="checkbox" />
    <span id="slider">
        <span id="sliderOn">SELECTED</span>
        <span id="sliderOff">SELECT</span>
        <span id="sliderBlock"></span>
    </span>
</label> 
```

但是当我增加复选框的宽度时。它不工作。这是我的代码[jsfiddle](http://jsfiddle.net/muthusamy/RUvhw/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T06:22:25.617

```
 jsfiddle.net/RUvhw/3/ 
```

我猜你不是自己做的？您只需要稍微调整一下这些值，直到获得所需的尺寸...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T06:23:17.110

您需要修改宽度和左侧值。我已经分叉并更新了您的问题/答案。

[http://jsfiddle.net/Pfxe6/](http://jsfiddle.net/Pfxe6/)

```
p {
    margin: 10px;
}

#sliderLabel {
    border: 1px solid #a2a2a2;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;    
    border-radius: 3px;
    cursor: pointer;
    display: block;
    height: 30px;
    margin: 20px auto;
    overflow: hidden;
    position: relative;
    width: 200px;
}
#sliderLabel input {
    display: none;
}
#sliderLabel input:checked + #slider {
    left: 0px;
}
#slider {
    left: -100px;
    position: absolute;;
    top: 0px;
    -moz-transition: left .25s ease-out;
    -webkit-transition: left .25s ease-out;
    -o-transition: left .25s ease-out;
    transition: left .25s ease-out;
}
#sliderOn, #sliderBlock, #sliderOff {
    display: block;
    font-family: arial, verdana, sans-serif;
    font-weight: bold;
    height: 30px;
    line-height: 30px;
    position: absolute;
    text-align: center;
    top: 0px;
}
#sliderOn {
    background: #3269aa;
    background: -moz-linear-gradient(top,  #3269aa 0%, #82b3f4 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#3269aa), color-stop(100%,#82b3f4));
    background: -webkit-linear-gradient(top,  #3269aa 0%,#82b3f4 100%);
    background: -o-linear-gradient(top,  #3269aa 0%,#82b3f4 100%);
    background: -ms-linear-gradient(top,  #3269aa 0%,#82b3f4 100%);
    background: linear-gradient(top,  #3269aa 0%,#82b3f4 100%);
    color: white;
    left: 0px;
    width: 100px;
}
#sliderBlock {
    background: #d9d9d8;
    background: -moz-linear-gradient(top,  #d9d9d8 0%, #fcfcfc 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#d9d9d8), color-stop(100%,#fcfcfc));
    background: -webkit-linear-gradient(top,  #d9d9d8 0%,#fcfcfc 100%);
    background: -o-linear-gradient(top,  #d9d9d8 0%,#fcfcfc 100%);
    background: -ms-linear-gradient(top,  #d9d9d8 0%,#fcfcfc 100%);
    background: linear-gradient(top,  #d9d9d8 0%,#fcfcfc 100%);
    border: 1px solid #a2a2a2;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    border-radisu: 3px;
    height: 28px;
    left: 100px;
    width: 100px;
}
#sliderOff {
    background: #f2f3f2;
    background: -moz-linear-gradient(top,  #8b8c8b 0%, #f2f3f2 50%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#8b8c8b), color-stop(50%,#f2f3f2));
    background: -webkit-linear-gradient(top,  #8b8c8b 0%,#f2f3f2 50%);
    background: -o-linear-gradient(top,  #8b8c8b 0%,#f2f3f2 50%);
    background: -ms-linear-gradient(top,  #8b8c8b 0%,#f2f3f2 50%);
    background: linear-gradient(top,  #8b8c8b 0%,#f2f3f2 50%);
    color: #8b8b8b;
    left: 200px;
    width: 100px;
} 
```

# ios - Facebook iOS SDK 3.1 如何更改用户创建页面的信息？

> ID：14826572
> 
> 赞同：1
> 
> 时间：2013-02-12T06:14:42.843
> 
> 标签：ios, facebook-page, facebook-ios-sdk

我正在开发一个 iOS 应用程序，我通过 Facebook iOS SDK 3.1 集成了 FaceBook。我想更改用户创建的页面信息，例如。以编程方式封面照片、头像、描述、关于等。[我在http://developers.facebook.com/docs/reference/api/page/](http://developers.facebook.com/docs/reference/api/page/)上找到了一些 url，但我不知道如何将这些 url 与参数一起使用。这种功能有什么例子吗？

# embedded - 在8051中设置定时器中断，卡住

> ID：14826577
> 
> 赞同：0
> 
> 时间：2013-02-12T06:14:56.850
> 
> 标签：embedded, 8051, interrupt, sdcc

嗨，我正在尝试在 8051 的定时器 3 上设置溢出定时器中断。代码卡在中断例程中。我正在使用 2511F32 (wixel)

下面是中断设置代码：

{ ......

```
T3CTL |= 0xE0;                  // set prescaler to tick frequency / 128 (DIV) bits 7:5
T3CTL |= 0x04;                  // Clear counter value (CLR - bit 2)
T3CTL |= 0x00;                  // Timer mode set to free running (00) bits 1:0
T3CTL |= 0x08;                  // Enable overflow interrupt (OVFIM) bit 3

T3CCTL1 &= ~0x40;               // disable timer compare interrupts
T3CCTL0 &= ~0x40;               // disable timer compare interrupts

IEN1  |= 0x08;                  // Enable Timer 2 interrupts

T3CTL |= 0x10;                  // Start the timer (START - bit 4)

EN = 1;

...... 
```

}

这是中断例程代码

```
ISR(T3,0)
{
    TIMIF &= ~0x07;      //   T3OVFIF Clear T3 overflow interrupt flag - bit 0
    LED_YELLOW_TOGGLE();
} 
```

它仍然被困在 ISR 例程中。没有其他要清除的中断标志。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:48:51.730

你怎么说代码卡在ISR中？如果 LED 处于切换状态，则中断一直处于启用状态，并且一旦完成就会调用 isr。它永远不会返回到主代码..

# android - PageViewer 向下滚动

> ID：14826586
> 
> 赞同：0
> 
> 时间：2013-02-12T06:15:36.230
> 
> 标签：android, view, scroll, android-viewpager

我正在使用页面查看器，但是当我滚动页面查看器的内容（垂直）时，我都没有接到电话

```
public void onPageScrollStateChanged(int arg0) 
    {
        android.util.Log.e("XXXX", "onPageScrollStateChanged");

    }
or
    @Override
    public void onPageScrolled(int arg0, float arg1, int arg2) 
    {
        android.util.Log.e("XXXX", "Page Is scrolleed");

    } 
```

但是当我水平滚动页面时，我会在上面收到回电。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:48:16.530

ViewPager 仅保存视图。onPageScrollStateChanged 和 onPageScrolled 仅在页面更改时调用，即仅水平滚动。

垂直滚动由您添加到 ViewPager（使用适配器）的视图实现。因此，将滚动侦听器添加到您的子视图（即您要添加到 PageViewer 的视图）。

# android - 有没有提供谷歌服务用于在android App中存储和分发应用内产品？

> ID：14826598
> 
> 赞同：0
> 
> 时间：2013-02-12T06:16:15.987
> 
> 标签：android, in-app-purchase

我正在开发一个带有 in App products 的 android 应用程序。我已经阅读了有关不同服务的信息，例如在应用程序计费中，在应用程序中查询购买的物品。我想知道是否有任何服务可以存储我的应用程序产品并从中分发（应用程序可以从那里下载）。我是应用程序产品的新手，想知道这是否可能。请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:18:46.587

Google 只是充当付款处理方，并在付款、取消或完全处理时通知您。对购买的任何进一步操作必须由您完成，并且 Google 不提供任何服务器来专门托管应用内内容。所有这些都必须在您自己的服务器上完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T06:22:26.430

您可以使用[APK 扩展文件](http://developer.android.com/google/play/expansion-files.html)来存储一些额外的文件，以便以后下载。虽然不是出于这个原因，但您也许可以将您的应用内产品存储在此类扩展文件中，并在需要时下载（即购买后）

# python - 如何使用 GAE bulkloader 从多个 csv 文件上传数据？

> ID：14826603
> 
> 赞同：0
> 
> 时间：2013-02-12T06:16:40.300
> 
> 标签：python, google-app-engine, google-cloud-datastore

我正在开发我的第一个 App Engine 应用程序。我还没有把它上传到appspot.com——我现在只是在使用开发服务器。

我已经编写了一些模型，我自己的`bulkloader.yaml`文件，我目前正在尝试将`appcfg.py`我的示例数据加载到数据存储中（两种不同类型的数千个实体）。

在这个问题：[uploading-data-with-bulkloader](https://stackoverflow.com/questions/5937011/uploading-data-with-bulkloader)中，原始发布者提到他通过将数据拆分为多个文件来解决他的问题。我怎样才能做到这一点？

目前我正在使用`appcfg.py`这样的：

```
appcfg.py upload_data --config_file=bulkloader.yaml   --url=http://localhost:8080/_ah/remote_api --filename=mydata/objects.csv --kind=FirstObject --email=test@example.com 
```

如何添加第二个`filename`and `kind`？我从此处的示例 .yaml 文件中得到了这样的印象：[bulkloadersample.appspot.com](http://bulkloadersample.appspot.com/)，但是bulkloader 的版本可能已过时（例如，它使用`model`而不是`kind`在转换器中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:44:42.947

哎呀。离开电脑一段时间后，答案很明显——我应该打两个电话`appcfg.py`，如下：

```
appcfg.py upload_data --config_file=bulkloader.yaml --kind=Model1 # more options here 
```

和 appcfg.py upload_data --config_file=bulkloader.yaml --kind=Model2 # 更多选项在这里

从生产服务器下载时，可以一次下载数据存储中的所有种类，但在任何其他情况下似乎无法上传或下载多种种类。

# iphone - NSMutableArray 发布导致崩溃

> ID：14826606
> 
> 赞同：0
> 
> 时间：2013-02-12T06:16:53.023
> 
> 标签：iphone, objective-c, memory-leaks, nsmutablearray

我正在使用 XCode 开发 iPhone 应用程序。我是这个平台的新手，需要一些关于特定问题的帮助......

我有一个方法可以处理一些数据并返回两个整数值作为包裹到 NSMutableArray 中的 NSNumber。

这是方法：

```
-(NSMutableArray *)processPoints:(int) x:(int) y
 {
 NSMutableArray *mutArray = [[NSMutableArray alloc] initWithCapacity:3];
 int x9,y9;

 // ...do some processing...

 NSNumber* xNum = [NSNumber numberWithInt:x9];
 NSNumber* yNum = [NSNumber numberWithInt:y9];

 [mutArray addObject:xNum];
 [mutArray addObject:yNum];

  return [mutArray autorelease];
 } 
```

我从另一种方法调用上述方法，将 NSNumber 内容复制到局部变量中，然后释放 NSMutable 数组的本地副本。

但是当释放这个 NSMutable 数组（变量 'mutArray'）时，应用程序崩溃了。

这是方法：

```
-(void)doNinjaAction
 {
   NSMutableArray* mutArray = [self processPoints: x :y];

   NSNumber* s1 = [[mutArray objectAtIndex:0] retain];
   NSNumber* s2 = [[mutArray objectAtIndex:1] retain];

   x = [s1 integerValue];
   y = [s2 integerValue];

   //...proceed with other stuff...

   [mutArray autorelease]; //this is where the system crashes. same for 'release'            
                           //instead of 'autorelease'
  } 
```

你能解释一下我在内存释放过程中哪里出错了。

我对这个过程的理解有点不稳定。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:22:11.683

因为你过度释放了数组。您将其分配初始化`processPoints:`，然后自动释放它-没错，这就是您处置其所有权的方式。

之后，您**不需要也不得**再次自动释放或释放它。这不是`malloc()`来自标准库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T06:19:58.707

当你调用语句时

```
 NSMutableArray* mutArray = [self processPoints: x :y]; 
```

这本身就起到自动释放的作用。

因此显式释放数组将导致应用程序崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T06:22:03.730

您不止一次发布 mutArray。一次在`processPoints`函数中，再次在`doNinjaAction`.

要解决崩溃删除：

```
[mutArray autorelease]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T06:23:57.473

```
-(NSMutableArray *)processPoints:(int) x:(int) y
 {
 NSMutableArray *mutArray = [[NSMutableArray alloc] initWithCapacity:3];
 int x9,y9;

 // ...do some processing...

 NSNumber* xNum = [NSNumber numberWithInt:x9];
 NSNumber* yNum = [NSNumber numberWithInt:y9];

 [mutArray addObject:xNum];
 [mutArray addObject:yNum];

[mutArray autorelase];
  return mutArray;
 } 
```

试试这个，它会解决它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T04:48:27.027

```
-(NSMutableArray *)processPoints:(int) x:(int) y
 {
 NSMutableArray *mutArray =[[[NSMutableArray alloc] initWithCapacity:3]autorelease];
 int x9,y9;

 // ...do some processing...

 NSNumber* xNum = [NSNumber numberWithInt:x9];
 NSNumber* yNum = [NSNumber numberWithInt:y9];

 [mutArray addObject:xNum];
 [mutArray addObject:yNum];

  return mutArray;
 } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-12T07:56:00.463

正如@H2CO3 和@AppleDelegate 所建议的那样，这是正确的。

我仍然建议使用 ARC 并将您的项目转换为启用 ARC。

转到编辑->重构->转换为Objectiv-C ARC

然后你不需要在任何地方做任何发布。它将自行处理所有版本:)

# ruby-on-rails - 如何为具有许多模型调用的方法编写简短、干净的 rspec 测试？

> ID：14826607
> 
> 赞同：3
> 
> 时间：2013-02-12T06:16:56.433
> 
> 标签：ruby-on-rails, ruby, rspec, mocking, rspec2

我无法为我想编写的方法提出一些测试。

该方法将获取一些数据的散列并用它创建一堆关联的模型。问题是，我很难弄清楚编写此类测试的最佳实践是什么。

例如，代码将：

取一个看起来像这样的哈希：

```
{
  :department => 'CS',
  :course_title => 'Algorithms',
  :section_number => '01B'
  :term => 'Fall 2012',
  :instructor => 'Bob Dylan'
} 
```

并将其保存到模型`Department`、`Course`、`Section`和`Instructor`.

这将需要多次调用`model.find_or_create`，等等。

我怎么能去测试这个方法的每个单独的目的，例如：

```
it 'should find or create department' do
  # << Way too many stubs here for each model and all association calls
  dept = mock_model(Department)
  Department.should_receive(:find_or_create).with(:name => 'CS').and_return(dept)
end 
```

有没有办法避免大量存根以保持每个测试的优先级（快速独立可重复自检及时）？有没有更好的方法来编写这个方法和/或这些测试？我真的更喜欢短而干净的`it`积木。

非常感谢您的帮助。

编辑：该方法可能如下所示：

```
def handle_course_submission(param_hash)
  department = Department.find_or_create(:name => param_hash[:department])
  course = Course.find_or_create(:title => param_hash[:course_title])
  instructor = Instructor.find_or_create(:name => param_hash[:instructor])
  section = Section.find_or_create(:number => param_hash[:section_number], :term => param_hash[:term])

  # Maybe put this stuff in a different method?
  course.department = department
  section.course = course
  section.instructor = instructor

end 
```

有没有更好的方法来编写方法？我将如何编写测试？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T02:08:47.000

我的第一个想法是您可能正遭受更大的设计缺陷。如果没有看到您方法的更大背景，很难给出很多建议。但是，通常最好将方法分解成更小的部分并遵循单级抽象原则。

[http://www.markhneedham.com/blog/2009/06/12/coding-single-level-of-abstraction-principle/](http://www.markhneedham.com/blog/2009/06/12/coding-single-level-of-abstraction-principle/)

您可以尝试以下方法，尽管如前所述，这绝对仍然不理想：

```
def handle_course_submission(param_hash)
  department = find_or_create_department(param_hash[:department])
  course = find_or_create_course(param_hash[:course_title])
  # etc.
  # call another method here to perform the actual work
end

private

def find_or_create_department(department)
  Department.find_or_create(name: department)
end

def find_or_create_course(course_title)
  Course.find_or_create(title: course_title)
end

# Etc. 
```

在规范...

```
let(:param_hash) do
  {
    :department => 'CS',
    :course_title => 'Algorithms',
    :section_number => '01B'
    :term => 'Fall 2012',
    :instructor => 'Bob Dylan'
  }
end

describe "#save_hash" do
  before do
    subject.stub(:find_or_create_department).as_null_object
    subject.stub(:find_or_create_course).as_null_object
    # etc.
  end

  after do
    subject.handle_course_submission(param_hash)
  end

  it "should save the department" do
    subject.should_receive(:find_or_create_department).with(param_hash[:department])
  end

  it "should save the course title" do
    subject.should_receive(:find_or_create_course).with(param_hash[:course_title])
  end

  # Etc.

end

describe "#find_or_create_department" do
  it "should find or create a Department" do
    Department.should_receive(:find_or_create).with("Department Name")
    subject.find_or_create_department("Department Name")
  end
end

# etc. for the rest of the find_or_create methods as well as any other
# methods you add 
```

希望其中一些有所帮助。如果您发布更多示例代码，我可能能够提供不太笼统且可能有用的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T06:14:28.613

鉴于提供的新上下文，我将在您的模型中进一步拆分功能。同样，这实际上只是首先想到的，并且绝对可以改进。在我看来，这`Section`是这里的根对象。因此，您可以添加一个`Section.create_course`方法或将其包装在一个[服务对象](http://blog.codeclimate.com/blog/2012/10/17/7-ways-to-decompose-fat-activerecord-models/)中，如下所示：

## 更新了此示例以使用异常

```
class SectionCreator

  def initialize(param_hash)
    number = param_hash.delete(:section_number)
    term = param_hash.delete(:term)

    @section = find_or_create_section(number, term)
    @param_hash = param_hash
  end

  def create!
    @section.add_course!(@param_hash)
  end

  private

  def find_or_create_section(number, term)
    Section.find_or_create(number: number, term: term)
  end

end

class Section < ActiveRecord::Base

  # All of your current model stuff here

  def add_course!(course_info)
    department_name = course_info[:department]
    course_title = course_info[:course_title]
    instructor_name = param_hash[:instructor]

    self.course = find_or_create_course_with_department(course_title, department_name)
    self.instructor = find_or_create_instructor(instructor_name)
    save!

    self
  end

  def find_or_create_course_with_department(course_title, department_name)
    course = find_or_create_course(course_title)
    course.department = find_or_create_department(department_name)
    course.save!
    course
  end

  def find_or_create_course(course_title)
    Course.find_or_create(title: course_title)
  end

  def find_or_create_department(department_name)
    Department.find_or_create(name: department_name)
  end

  def find_or_create_instructor(instructor_name)
    Instructor.find_or_create(name: instructor_name)
  end

end

# In your controller (this needs more work but..)
def create_section_action
  @section = SectionCreator.new(params).create!
rescue ActiveRecord::RecordInvalid => ex
  flash[:alert] = @section.errors
end 
```

请注意添加`#find_or_create_course_with_department`方法如何允许我们在其中添加部门的关联，同时保持`#add_course`方法清洁。这就是为什么我喜欢添加这些方法，即使它们有时看起来像在`#find_or_create_instructor`方法的情况下是多余的。

以这种方式分解方法的另一个优点是它们更容易在测试中存根，正如我在第一个示例中所展示的那样。您可以轻松地对所有这些方法进行存根，以确保数据库实际上没有受到攻击并且您的测试运行得很快，同时通过测试预期保证功能是正确的。

当然，这很大程度上取决于您对如何实现它的个人偏好。在这种情况下，服务对象可能是不必要的。`Section.create_course`您可以像我之前引用的方法一样轻松地实现它，如下所示：

```
class Section < ActiveRecord::Base

  def self.create_course(param_hash)
    section = find_or_create(number: param_hash.delete(:section_number), term: param_hash.delete(:term))
    section.add_course(param_hash)
    section
  end

  # The rest of the model goes here
end 
```

至于你的最后一个问题，你绝对可以在 RSpec 中存根方法，然后`should_receive`在这些存根之上应用期望。

现在已经很晚了，所以如果我错过了什么，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T06:35:04.383

用于传递要创建的部分数组：

```
class SectionCreator

  # sections is the array of parameters
  def initialize(sections)
    @sections = sections
  end

  # Adding the ! here because I think you should use the save! methods
  # with exceptions as mentioned in one of my myriad comments.
  def create_sections!
    @sections.each do |section|
      create_section!(section)
    end
  end

  def create_section!(section)
    section = find_or_create_section(section[:section_number], section[:term])
    section.add_course!(section_params)
  end

  # The rest of my original example goes here

end

# In your controller or wherever...

def action
  SectionCreator.new(params_array).create_sections!
rescue ActiveRecord::RecordInvalid => ex
  errors = ex.record.errors
  render json: errors
end 
```

希望这涵盖了所有内容。

# c++ - 如何在OpenGL中找出屏幕平面上有多少个单位

> ID：14826611
> 
> 赞同：0
> 
> 时间：2013-02-12T06:17:21.070
> 
> 标签：c++, opengl, scaling, dimension, unit-conversion

如何以opengl自己的单位获得观察平面的相对大小？我需要找出“opengl 单位”中的宽度和高度。是否有可以检索此信息的功能？

我假设一个单位（让我们说 1.0f） in`Z`将相当于一个单位 in `X`，即使转换为一个真正的测量系统毫无意义。

我知道我可以通过使用`GetSystemMetrics(SM_CXSCREEN)`或来获得屏幕尺寸`glutGet(GLUT_SCREEN_WIDTH)`，但这是以像素为单位的。

为了处理图形窗口调用，我在非 Windows 操作系统上使用 freeglut，在 Windows 上使用 WinAPI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T08:35:34.423

假设您想绘制类似 UI 的东西，将投影矩阵设置为 Orthographic 矩阵`glOrtho`，然后您没有任何透视，并且在世界坐标和屏幕坐标之间有直接的正交映射。您`glOrtho`调用的参数决定了您的视口在世界坐标中的宽度/高度。

如果您想同时绘制 UI 和 3D 场景，请使用剪贴蒙版绘制 UI`glOrtho`和绘制场景，`glPerspective`以确保不会破坏您的 UI。

* * *

另一方面，如果您想知道透视 3D 场景中视口的宽度，以便知道绘制对象有多大，那么您将不得不处理透视投影。您需要知道在哪个 Z 坐标处您想知道视口的宽度/高度。您可以使用它`gluUnProject`来计算与给定屏幕坐标和 Z 平面相对应的世界坐标。

然而，最好反过来做，总是用给定的大小绘制你的对象，然后计算你的投影矩阵应该是什么，以使该对象正确地出现在你的视口中。

# django - 角度js无法识别范围内的变量

> ID：14826615
> 
> 赞同：1
> 
> 时间：2013-02-12T06:17:53.710
> 
> 标签：django, scope, angularjs

我是新手，`angularjs`事实上这是我第一次在我`angularjs`的一个应用程序中使用。该应用程序是使用 django 开发的。但是我目前正在尝试的与 django 无关（我猜），我有一个非常简单的模板，如下所示：

```
<html xmlns:ng="http://angularjs.org" lang="en" ng-app"><head>
    <title>Testing Angular</title>
    <link rel="stylesheet" type="text/css" href="/static/css/application.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" »="" type="text/javascript">
    </script>
    <script type="text/javascript" src="/static/js/messages.js"></script>
    <script src="http://code.angularjs.org/angular-1.0.0.min.js"></script>
    <script src="/static/js/marketing/app.js"></script>
    <script src="/static/js/marketing/controllers.js"></script>

</head>
<body>
    <div id="content" ng-controller="UserListControl" class="ng-scope">
        [[ users.length ]]
    </div>
</body>
</html> 
```

以下分别是 和 的`app.js`内容`controllers.js`。

### 应用程序.js

```
'use strict';

var newApp = angular.module('newApp', []) 
    .config(function($interpolateProvider){
        // To prevent the conflict of `{{` and `}}` symbols
        // between django templating and angular templating we need
        // to use different symbols for angular.
        $interpolateProvider.startSymbol('[[');
        $interpolateProvider.endSymbol(']]');
    }); 
```

### 控制器.js

```
function UserListControl($scope) {
    $scope.users = [   
        {   
            'name' : 'John Doe',
            'type' : 'Platinum',
        },  
        {   
            'name' : 'Matt Hill',
            'type' : 'Gold',
        }   
    ];  
} 
```

但是模板只是渲染`[[ users.length ]]`而不是实际渲染长度。

我还尝试了`ngRepeat`如下指令：

```
<p ng-repeat="user in users">
    <p>[[user.name]], ([[user.type]])</p>
<p> 
```

和

```
<tr ng-repeat="i in [0, 1, 2, 3, 4, 5, 6, 7]"><td>[[ i ]]</td></tr> 
```

第一个`ng-repeat`指令呈现：

```
<!-- ngRepeat: usr in users -->
<p ng-repeat="usr in users" class="ng-scope">
        </p>
<p ng-repeat="usr in users" class="ng-scope">
        </p>
<p><a href="#"></a>()</p>
<p></p> 
```

第二个呈现：

```
<!-- ngRepeat: i in [0, 1, 2, 3, 4, 5, 6, 7] -->
<tr ng-repeat="i in [0, 1, 2, 3, 4, 5, 6, 7]" class="ng-scope"><td>[[ i ]]</td></tr>
<tr ng-repeat="i in [0, 1, 2, 3, 4, 5, 6, 7]" class="ng-scope"><td>[[ i ]]</td></tr>
<tr ng-repeat="i in [0, 1, 2, 3, 4, 5, 6, 7]" class="ng-scope"><td>[[ i ]]</td></tr>
<tr ng-repeat="i in [0, 1, 2, 3, 4, 5, 6, 7]" class="ng-scope"><td>[[ i ]]</td></tr>
<tr ng-repeat="i in [0, 1, 2, 3, 4, 5, 6, 7]" class="ng-scope"><td>[[ i ]]</td></tr>
<tr ng-repeat="i in [0, 1, 2, 3, 4, 5, 6, 7]" class="ng-scope"><td>[[ i ]]</td></tr>
<tr ng-repeat="i in [0, 1, 2, 3, 4, 5, 6, 7]" class="ng-scope"><td>[[ i ]]</td></tr>
<tr ng-repeat="i in [0, 1, 2, 3, 4, 5, 6, 7]" class="ng-scope"><td>[[ i ]]</td></tr> 
```

为什么它无法识别变量？我究竟做错了什么 ？

### PS：

控制台中没有错误。

*   角度版本：1.0.0
*   Django 版本：1.4
*   网络浏览器：谷歌浏览器 24.0.1312.68
*   操作系统：Ubuntu 12.04

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T06:32:55.757

在 HTML 元素的引导中，ng-app 属性应如下所示：

```
ng-app="newApp" 
```

这样 Angular 就会知道使用您在 app.js 中定义的模块。我刚刚用你的代码试了一下， interpolateProvider 的变化工作得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T06:39:48.080

添加一个 ng-app="newApp"，尝试将 Angular 脚本标签移动到 html 正文的底部，并在第一个用户转发器中修复关闭的 p 标签。

```
<div ng-app="newApp">
<div id="content" ng-controller="UserListControl" class="ng-scope">
        [[ users.length ]]

        <p ng-repeat="user in users">[[user.name]], ([[user.type]])</p>
</div>
<script src="http://code.angularjs.org/angular-1.0.0.min.js"></script> 
```

请参阅以下小提琴：

[http://jsfiddle.net/jwanga/VLRVU/](http://jsfiddle.net/jwanga/VLRVU/)

# batch-file - 批量创建文件夹，然后使用文本文件重新定位现有文件夹和子文件夹

> ID：14826625
> 
> 赞同：1
> 
> 时间：2013-02-12T06:18:50.187
> 
> 标签：batch-file

我的结构中有一堆文件夹（和子文件夹）......

```
Test/Student001/ABC,
Test/Student001/DEF,
Test/Student002/ABC,
Test/Student002/DEF, etc... 
```

然后我需要做的是将这些文件夹（及其子文件夹和其中的文件）重新定位到另一个位置，这样它就像......

```
Test/Class01/ArronAmos(Student001)/ABC
Test/Class01/ArronAmos(Student001)/DEF
Test/Class02/BrettBesty(Student002)/ABC
Test/Class02/BrettBesty(Student002)/DEF 
```

我有所有文件夹（和子文件夹）原始名称和新名称的文本文件（像这样保存）..

```
studentdata.txt

A (studentcode), B (studentnewname), C (Class)

Student001, ArronAmos (Student001), Class01

Student002, BrettBesty (Student002), Class02 
```

有没有办法让一批基本上像这样进行（使用上面文本文件中的 A、B 和 C - 如果可能的话，最好是一个 txt 文件）......

```
md 'C' ::which will skip past if folder exists

rename folder 'A' to 'B' ::only rename of root folder and leave subfolders intact

move folder 'B' to 'C' ::move new named folder (B) and all subfolders and contents to new root folder (C) 
```

新目录和子文件夹的创建（对于新的和未来的学生）就像这样并且效果很好（除非有一种方法可以调用第二个文本文件来创建子文件夹而不是编码，那会很棒 - 但没什么大不了的我猜）...

创作批次

```
 cd /d %~dp0 pause

FOR /F "delims=~" %%f in (dirlist.txt) DO md "%%f"

:: This code creates directories referenced from a .txt file: - :: FOR /F "delims=~" %%f in (dirlist.txt) DO MD "%%f"

pause

FOR /D %%x in (*) do mkdir "%%x\Individual Behaviour Plans" "%%x\Individual Learning Plans" "%%x\Student Reports" "%%x\Student Support Group Meetings"

:: This code creates a new dir within every folder in batch location: - :: FOR /D %%x in (*) do mkdir "%%x\value"

pause 
```

这是我从其他技术之一收到的重命名批次，不太了解它或不知道修改它以使其工作..

```
*rename_users.bat** :: Script to Rename folders - prefixing from a text file

setlocal ENABLEDELAYEDEXPANSION

Set Rootfolder=Test Set Names=names.txt

:: Goto Root Folder cd /d %~dp0

:: Start Line Counter Set LineCount=0

           :: For Every folder in the directory
           For /d /r %%g in (*) DO (
                           :: Increment the line counter by 1 (see the use of "!" >instead of "%" due to delayed expansion)
                           Set /a LineCount=!Linecount!+1
                           :: Call the Rename Folder sub - passing through the >variables of folder name and line counter
                           Call:RenameFolder %%g !LineCount!)
:RenameFolder :: For all of the tokens in the findstr on the names file for /f "Tokens=1* delims=:" %%a in ('findstr /n "^" "%Names%"') DO ( :: If the line counter matches the line number If %%a==%~2 ( :: Rename the Folder Move "%~1" "%~1 %%b") ) ::Return to the Primary 
Goto:EOF

Set Rootfolder= Set Names= Set linecount= Set Drive=

Endlocal 
```

诀窍是我们不能只使用创建目录（和子目录）批处理文件，因为有些文件夹以原始格式存在，其中包含我们需要坐在新结构子文件夹中的数据......并手动移动它们将是一个选择...如果没有 900 多个学生文件夹也可以这样做...

我希望有某种形式的意义......谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:43:05.230

下面的批处理文件做你想做的事：

```
@echo off
setlocal EnableDelayedExpansion

rem Enter into working directory
cd C:/Test

rem Process the file with original and new names
for /F "skip=1 tokens=1-3 delims=," %%a in (studentData.txt) do (

   rem Get studentNewName end eliminate spaces
   set "studentNewName=%%b"
   set "studentNewName=!studentNewName: =!"

   rem If the new folder not exist, create it
   if not exist "%%c/!studentNewName!" md "%%c/!studentNewName!"

   rem Move files from old folder 
   move "%%a/*.*" "%%c/!studentNewName!"

   rem And delete old empty folder
   rd "%%a"

) 
```

安东尼奥

# java - Java(Android)：查找未使用的类

> ID：14826628
> 
> 赞同：1
> 
> 时间：2013-02-12T06:18:54.530
> 
> 标签：java, android, removeclass

在我的 Android 应用程序中，我使用许多**开源 JAVA 库**作为源代码。它使应用程序的大小非常庞大。

数量`classes`约为**6000+**。我想从中删除`unused classes`。任何人都知道如何做到这一点。我找到了很多工具，但那是用于删除未使用的代码。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T06:29:35.053

使用 Proguard。它剥离了未使用的类和库。链接：http: [//developer.android.com/tools/help/proguard.html](http://developer.android.com/tools/help/proguard.html)

编辑：超出 gc 开销限制不是因为您使用的是 proguard。这是因为eclipse允许使用的内存很低。您可以通过增加允许的内存限制 ( [https://www.simplified.guide/eclipse/fix-gc-overhead-limit-exceeded](https://www.simplified.guide/eclipse/fix-gc-overhead-limit-exceeded) ) 来解决此问题。执行此操作，运行 proguard，您的应用程序将最小化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:31:05.067

好吧，如果您使用的是开源 Java 库，您应该首先找出这些库的分发许可证。某些许可证不允许您重新打包可分发的内容，而其他许可证仅允许您将新软件开源（包括您的代码）重新打包。[http://opensource.org/licenses](http://opensource.org/licenses)

因此，在您检查了许可证和/或联系了权利持有人之后。

您可以编写一个工具，通过所有第三方代码从您的类中遵循依赖关系树，并生成不在该树中的类的列表。我想大多数 IDE 不会做你想做的事，因为他们会认为一个库要么被使用，要么不被使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T06:35:57.290

[proguard](http://proguard.sourceforge.net/)为 java 做这个。据我所见，它已经是 android 堆栈的一部分 - [http://developer.android.com/tools/help/proguard.html](http://developer.android.com/tools/help/proguard.html)。

查看链接并尝试找出它对您不起作用的原因（可能您没有创建发布版本）。如果它正在工作，并且您仍然有一个巨大的文件，那么您可能正在使用使用大量文件的库，而您对此无能为力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-22T14:32:43.933

步骤1

使用 Proguard 或 R8 生成 usage.txt 和 mapping.txt

添加`-printusage`到您的 proguard.pro 文件中运行

`./gradlew app:minifyReleaseWithProguard`或者`./gradlew app:minifyReleaseWithR8`

第2步

查找在usage.txt中但不在mapping.txt中的类名记录，这些是Proguard/R8删除的未使用类

编写这样的算法并不难，但你可以考虑我使用 Java Set 数据结构的方法

更多细节[在这里](https://ericntd.medium.com/find-unused-classes-in-android-codebase-c3c9fc686f4b)

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-02-12T06:22:19.733

6000节课？？？？？？嗯，这就是为什么人们为删除未使用代码的编译器支付 2000 美元的原因。如果您将代码放在 Eclipse 中，它将在库和您根本不使用的变量下放置一条黄线。

希望这可以帮助。

# c++ - 从虚函数调用派生类的成员

> ID：14826632
> 
> 赞同：0
> 
> 时间：2013-02-12T06:19:32.897
> 
> 标签：c++, virtual-functions

我对虚拟功能有点困惑。

假设您有带有虚函数 foo() 的基类，然后该函数在派生类中被覆盖

```
 class Baseclass
   {  
   public:
       virtual void foo()
       {
           //...
       }
   };

   class Derived: public BaseClass
   {
   private:
       int member_val;
   public:
       Derived( int init )
           : member_val( init )
       {}
       void foo()
       {
           member_val++;
       }
   }; 
```

和 foo 使用派生类的成员值，当我编写此代码时

```
Derived d( 10 );
Base* bPtr = &d;
bPtr->foo(); 
```

foo() 调用派生类，因为 _vptr 指向“派生类虚拟表”，而“派生类虚拟表”中​​的指针指向派生类的 foo()，但是它如何找到 member_val，导致基指针不知道关于它。什么“this”从 Derived 类传递给 foo()。我们称它为 Base*（这是 Base 类型），但要找到 member_val，我们需要 Derived*（此 Derived 类型）。那么它是如何在引擎盖下工作的呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T21:25:35.703

正确的问题是一半的答案。就像你的情况一样，你问`this`传递给了什么`Derived::foo()`，答案是“相同的”。您创建一个 class 对象`Derived`。它在内存中分配如下：

```
Derived:
--------
vptr_t* vptr
int member_val 
```

然后你施放`&d`，即`Derived*`to `Base*`。指针怎么了？没有什么。它只是改变了它的类型，而不是它指向的实际地址。您可以将其转换回`Derived*`using`dynamic_cast<Derived*>()`甚至`static_cast<Derived*>`. 在这种情况下使用两者都是绝对安全的。

所以唯一的实际问题是虚函数表是如何工作的？但这是另一个问题，看起来你明白了。

请注意：当多个基类一个接一个地位于内存中时，多重继承会使事情变得更加复杂。

# android - 我可以将活动中的值发送到广播接收器，但我不能长时间使用它

> ID：14826634
> 
> 赞同：0
> 
> 时间：2013-02-12T06:19:40.813
> 
> 标签：android, broadcastreceiver

实际上，在我的应用程序中，我想在我的手机拨打任何电话时发送一条消息......这里的应用程序安装时间要求提供父母号码及其号码从我的第一个活动发送到广播接收器活动......它在那里接收到敬酒值..但是当我打电话时，它的值更改为null ...有人可以帮助我在电话通话时访问该值..有可能吗？如何..谢谢我的代码如下.. .

在我的第一个活动中向广播接收器发送值：

```
try
{
     Toast.makeText(getApplicationContext(), "try", Toast.LENGTH_LONG).show();

     Intent in = new Intent("my.action.string");
     in.putExtra("parent", PARENT);//this string sending to broadcast receiver
     sendBroadcast(in);
}
 catch (Exception e) 
 {
    // TODO: handle exception
     e.printStackTrace();
} 
```

我的广播接收器是：

```
public class myBroadcast extends BroadcastReceiver
{
    String out_number;
    String myparent;
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        // TODO Auto-generated method stub
        myparent = intent.getExtras().getString("parent"); //this sting access the number first and then change to null at making phone call
        final String my=myparent;
        Toast.makeText(context, "broadcst"+myparent, Toast.LENGTH_LONG).show();

        if (intent.getAction().equals("android.intent.action.NEW_OUTGOING_CALL"))
        {
            out_number=intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);
            Toast.makeText(context, "broadcst"+my+" "+out_number, Toast.LENGTH_LONG).show();
            SmsManager sm=SmsManager.getDefault();
            sm.sendTextMessage(myparent, "5554", "calling..to"+myparent, null, null); //5554 is my emulator number to check its in emulator
             Toast.makeText(context, "send"+out_number, Toast.LENGTH_SHORT).show();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:57:56.100

```
/*
 * The Receiver is intended for the incoming calls read though the phone
 * state for more details see android.content.BroadcastReceiver
 * 
 * @author parul
 * 
 */

public class InComingCallReciever extends BroadcastReceiver {

  public static String LOG = "InComingCall";

  /*
   * (The onReceive is invoked when we receive an arbitrary intent from the
   * Incoming call Service)
   * 
   * @see android.content.BroadcastReceiver#onReceive(android.content.Context,
   * android.content.Intent)
   */

  @Override
  public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub

    Log.v(LOG, "InComingCallReciever");

    Bundle bundle = intent.getExtras();
    if (bundle == null) {
      return;
    }
    String state = bundle.getString(TelephonyManager.EXTRA_STATE);
    Log.v(LOG, "" + state);

    if (state.equalsIgnoreCase(TelephonyManager.EXTRA_STATE_RINGING)) {
      String phoneNumber = bundle
          .getString(TelephonyManager.EXTRA_INCOMING_NUMBER);

      Toast.makeText(context, "The Incoming Number is ..." + phoneNumber,
          Toast.LENGTH_SHORT).show();
      Log.v(LOG, "incomming number is ... " + phoneNumber);
    } else {
      Log.v(LOG, "test 2 ");
    }
  }
} 
```

# xml - 在 perl 中检查并纠正 xml 语法

> ID：14826636
> 
> 赞同：0
> 
> 时间：2013-02-12T06:19:54.563
> 
> 标签：xml, perl, perl-module

如果 xml 文件的格式不正确，我的任务是更正它们的语法。目前我正在手动执行此任务。有什么方法可以验证`XML`文件的语法，如果 XML 格式不正确，则将其更正为格式正确？

`Perl`是否可以使用脚本进行验证和更正？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T06:52:05.200

[XML::LibXML](http://search.cpan.org/perldoc?XML%3a%3aLibXML%3a%3aParser)是一个验证解析器。您可以使用它来确定 XML 是否有效。

```
use XML::LibXML qw( );
my $parser = XML::LibXML->new();
if (eval { $parser->parse_file($qfn) }) {
   print "ok\n";
} else {
   print "error:\n$@";
} 
```

* * *

自动更正 XML 是另一回事。如果不做大量假设，就不可能自动修复错误的 XML。例如，没有办法知道是否

```
<foo>/bar<baz/</foo> 
```

本来是

```
<foo>/bar&lt;baz/</foo> 
```

或者

```
<foo>/bar<baz/></foo> 
```

甚至是别的东西。

XML::LibXML 确实具有自动修复/忽略某些错误的选项。谁知道它是否做出与您相同的假设。采用

```
use XML::LibXML qw( );
my $parser = XML::LibXML->new( recover => $recover );
my $doc = $parser->parse_file($in_qfn);
$doc->toFile($out_qfn); 
```

如果您希望解析器在解决问题时收到警告，请使用`1`for 。如果您希望解析器静默解决问题， 请使用for 。 不管你用什么，如果遇到不可恢复的错误，它仍然会抛出异常。`$recover`
`2``$recover`
`$recover`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T09:06:09.383

您可以尝试[XML::Liberal](https://metacpan.org/module/XML%3a%3aLiberal)：“解析损坏的 XML 的超级自由 XML 解析器”，看看它是否适合您。

# iphone - 我对 5 个按钮使用相同的操作，想知道调用哪个按钮？

> ID：14826644
> 
> 赞同：0
> 
> 时间：2013-02-12T06:20:38.087
> 
> 标签：iphone, ios5, ibaction

我对 5 个按钮使用相同的操作，想知道哪个按钮被调用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T06:24:18.907

在这种情况下，请尝试为按钮分配唯一标签。

在目标方法中重新获得按钮标签如下

例如

```
-(void)targetMethod:(id)sender{

UIButton *button = (UIButton *)sender;

int clickedButtonTag = button.tag ;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T06:23:35.610

为 nib 中的按钮赋予标签值，然后将其添加到按钮操作中：

```
allbtn = sender;
    btntag = allbtn.tag;
    NSLog(@"btntag:%d",btntag);
    if(btntag==1)
    {
    } 
```

现在很简单，您可以轻松找到您点击的按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T11:04:33.310

采用：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button addTarget:self 
           action:@selector(aMethod:)
 forControlEvents:UIControlEventTouchDown];
[button setTitle:@"Show View" forState:UIControlStateNormal];
button.frame = CGRectMake(80.0, 210.0, 160.0, 40.0);
button.tag=1;
[view addSubview:button]; 
```

然后使用：

```
-(void)aMethod:(id)sender{

UIButton *button = (UIButton *)sender;

int clickedBtnTag = button.tag ;

Nslog("clicked button tag is %d",clickedBtnTag);

} 
```

试试这个，然后请回复我..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-15T06:15:16.420

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button addTarget:self 
           action:@selector(aMethod:)
 forControlEvents:UIControlEventTouchDown];
[button setTitle:@"Show View" forState:UIControlStateNormal];
button.frame = CGRectMake(80.0, 210.0, 160.0, 40.0);
button.tag=1;
[view addSubview:button];

-(void)aMethod:(id)sender{

UIButton *button = (UIButton *)sender;

int clickedBtnTag = button.tag ;

Nslog("clicked button tag is %d",clickedBtnTag);

} 
```

试试这个，然后请回复我..

# android - 在 dojo.mobile 上的 Android 4.1 上不会触发 Click 事件

> ID：14826645
> 
> 赞同：0
> 
> 时间：2013-02-12T06:20:50.580
> 
> 标签：android, dojo, ibm-mobilefirst

这是来自 Worklight 论坛的持续讨论。-> “[在 Android 4.1 上不会触发 Click 事件](https://www.ibm.com/developerworks/forums/thread.jspa?messageID=14939570&#14939570)”

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:03:45.600

我重新打开了这张 Dojo 票以跟踪问题：[http ://trac.dojotoolkit.org/ticket/15878](http://trac.dojotoolkit.org/ticket/15878)

从其他报告相同情况的用户看来，当您使用 Chrome 浏览器时会出现问题，但在使用“标准”Android 浏览器时不会出现问题。你能证实这一点吗？

# asp.net - 在具有reportviewer 的页面上进行两次页面回发

> ID：14826648
> 
> 赞同：3
> 
> 时间：2013-02-12T06:20:56.133
> 
> 标签：asp.net, reportviewer

我的问题是，如果页面具有控制权，则*aspx*页面将重新加载两次。`ReportViewer`这是我的*.aspx*页面中的代码，

我的问题是，如果页面具有控制权，则*aspx*页面将重新加载两次。`ReportViewer`这是我的*.aspx*页面中的代码，

```
<%@ Register Assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, 
    Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" 
    Namespace="Microsoft.Reporting.WebForms" TagPrefix="rsweb" %> <br><br> 
```

和 ..

```
<rsweb:ReportViewer ID="ReportViewer1" runat="server" 
    Font-Names="Verdana" Font-Size="7pt" Width="100%" Height="500px" 
    BackColor="#FAE28C" WaitControlDisplayAfter="10000" Visible="false" /> 
```

这是在我后面的代码中，

```
ReportDataSource rds = 
    new ReportDataSource
        ("dsSource", _PendingTicketAgeBC.SelectDailyTicketAgeInQueue(_SomeBE));
ReportViewer1.LocalReport.DataSources.Clear();
ReportViewer1.LocalReport.DataSources.Add(rds);
ReportViewer1.LocalReport.ReportPath = Server.MapPath(".") + "\\Somereport.rdlc";

ReportParameter paramHedaer = new ReportParameter();
paramHedaer.Name = "paramHeader";
paramHedaer.Values.Add(mHeaderparam);
ReportViewer1.LocalReport.SetParameters(new ReportParameter[] { paramHedaer });

ReportViewer1.Visible = true; 
```

谁能指导我解决问题的正确方法。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-02T15:28:27.003

我遇到了这个问题，并通过在 ReportViewer 控件上将 AsyncRendering 设置为 false 来解决。请注意，默认值为 true。希望有帮助

# jquery - jQuery ui 可拖动拖放到 iframe

> ID：14826652
> 
> 赞同：4
> 
> 时间：2013-02-12T06:21:09.303
> 
> 标签：jquery, iframe, drag-and-drop, draggable, droppable

我正在尝试使用 jQuery ui 可拖动和可放置，如果我在同一页面上尝试，它工作正常。但是当我尝试将一个元素拖放到 iframe 中定义的可放置区域时，它就不能完美地工作。它有效，但不适用于 iframe 中的整个可放置区域，并且它也可放置在框架外。

这是我所做的

我的主页：Home.html

```
<!DOCTYPE html>
<html><head>
    <title>jQuery UI Draggable</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
    <link href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" rel="stylesheet">

    <script type="text/javascript">
        $(function () {
            $("#FirstDiv").draggable({ revert: "invalid",iframeFix: true });
            $("#SecondDiv").draggable({ revert: "invalid" });
            $("#frame").load(function () {
                var $this = $(this);
                var contents = $this.contents();
                contents.find('.DroppableDiv').droppable({
                    drop: function (event, ui) { alert('dropped'); }
                });
            });
        });
    </script>
</head>
<body style="cursor: auto;" >

<div class="demo">
<div id="mainDiv" style="background-color: #FAE6B6; height:200px">
<div id="FirstDiv" style=" border-style:solid; border-width:1px; font-size:medium; height:20px; width:300px">First Div</div>
<div id="SecondDiv" style=" border-style:solid; border-width:1px; font-size:medium; height:20px; width:300px">Second Div</div>
</div>
</div>
<iframe id="frame" src="test.html" style="width: 800px; height: 400px"></iframe>

</body></html> 
```

这是我的 iframe 内容 test.html

```
<!DOCTYPE html>
<html>
<head>
    <title>jQuery UI Draggable - inner html</title>
    <style>
     .DroppableDiv {
        background-color:red;
        height: 500px;
        width: 500px;
     }
    </style>
</head>
<body style="cursor: auto;">
    <div class="DroppableDiv">
    </div> 
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-23T16:52:08.280

您可以尝试以下方法：

```
$('#draggables div', parent).draggable(); 
```

这里也有几个不同的答案：

[https://web.archive.org/web/20170426075018/http://jqfaq.com/how-to-implement-drag-and-drop-between-iframes/](https://web.archive.org/web/20170426075018/http://jqfaq.com/how-to-implement-drag-and-drop-between-iframes/)

[jQuery 和 iframe 以及奇怪的定位：有解决方法吗？](https://stackoverflow.com/questions/4491981/jquery-and-iframes-and-weird-positioning-is-there-a-workaround/15091193#15091193)

祝你好运！

# javascript - 用javascript分隔时间元素

> ID：14826655
> 
> 赞同：0
> 
> 时间：2013-02-12T06:21:28.973
> 
> 标签：javascript, jquery, clock, slice

我正在尝试构建一个时钟应用程序，其概念是用图像替换数字。

我的方法是将小时和分钟分成两个元素。

例如 --> 02:30 变成 --> 0,2 : 3,0

切片方法不起作用

```
var today=new Date();
var h=today.getHours();
var m=today.getMinutes();

h=checkTime(h);
m=checkTime(m);
h1 = h.slice(0,1);
console.log(h); 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:26:24.657

```
var h1 = Math.floor(h / 10),
    h2 = h % 10; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:27:09.873

使用 toString(); 如果您想在时间跨度内获取每个“数字”，则改为子字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T06:35:04.793

获取小时和分钟，将整数通过 toString 转换并拆分。（您甚至不必拆分，您可以简单地通过 h[0] 等访问字符串的每个字母/符号）：

```
var d = new Date(),
    h = ((h = d.getHours()) < 10 ? '0' + h : h).toString().split(''),
    m = ((m = d.getMinutes()) < 10 ? '0' + m : m).toString().split('');

// testing
console.log(h);
console.log(m); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T06:38:12.707

无需处理字符串操作：

```
var h1 = Math.floor(h / 10);
var h2 = h % 10; 
```

# visual-studio-2010 - Visual Studio 2010 背景闪烁

> ID：14826656
> 
> 赞同：0
> 
> 时间：2013-02-12T06:21:35.233
> 
> 标签：visual-studio-2010, windows-8

我正在使用 VS2010 和 Windows 8。每当我运行应用程序时，窗口都会开始闪烁，这很奇怪。

我尝试了以下事情，但没有得到任何帮助。

1.  打开工具/选项对话框
2.  在选项树中选择环境/常规页面。
3.  取消选中“根据客户端性能自动调整视觉体验”，然后取消选中“启用丰富的客户端视觉体验”复选框。
4.  关闭工具/选项对话框

我还尝试在 regedit 中进行一些更改。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-12T14:44:51.953

设置`DoubleBuffered`并`True`查看是否有帮助。`BackgroundImageLayout`此外，如果您有背景图像，请尝试不同的设置。

# iphone - Objective-C - 将变量保存在 .h 或 .m 中 - 有什么区别吗？

> ID：14826659
> 
> 赞同：2
> 
> 时间：2013-02-12T06:21:51.793
> 
> 标签：iphone, ios, objective-c

在 .h 文件中 -

```
@interface MyClass : NSObject {
    @someAccessibilityModifier int a; // someAccessibilityModifier = @public, @private
} 
```

或在 .m 文件中 -

```
@implementation MyClass {
    @someAccessibilityModifier int a; // someAccessibilityModifier = @public, @private
} 
```

以上两者有什么区别（因为两种方式，`a`' 的可访问性和行为将相同）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T06:25:12.337

在前者中，`a` *可*在课堂外访问。`@private`如果您不希望这是真的，您必须指定。

在任何情况下，除非您明确希望您的 ivar 在课堂外可见（而且您几乎肯定不会），否则您应该使用后一种形式（在 中指定`@implementation`）。Ivar 通常被认为是实现细节，因此不应出现在标题中。

唯一的例外是如果您正在编写 32 位 OS X 代码，因为它仍然使用脆弱的 ABI，它需要在`@interface`.

# excel - 启动用户表单多页进入特定页面

> ID：14826663
> 
> 赞同：6
> 
> 时间：2013-02-12T06:22:08.610
> 
> 标签：excel, excel-2010, vba

我有一个名为*SheetBox的用户窗体*

*SheetBox*包含一个 3 页的多页窗口

> "page1" 用于选择要导入的工作表
> "page2" 包含一个伪进度条
> "page3" 用于选择要保护的工作表

我现在需要的是一种在单击工作表上的按钮时打开用户窗体时打开特定页面的方法

例如：
**ImportBttn**打开用户表单的第 1 页
**ProtctBttn**打开用户表单的第3页

我这样做是为了减少我需要创建的用户表单的数量，而不是创建 3 个单独的用户表单。这也有助于减小文件大小。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-12T09:58:24.840

这也有效

```
Sub ImportBttn_Click()
Load SheetBox: SheetBox.MultiPage1.Value = 0: SheetBox.Show
End Sub

Sub ProtctBttn_Click()
Load SheetBox: SheetBox.MultiPage1.Value = 2: SheetBox.Show
End Sub 
```

这首先加载 sheetbox，更改多页页面，然后显示它

但是感谢调用者方法，当我需要知道按下哪个按钮时会很有用

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-12T08:31:28.543

在 UserForms`Initialise`事件中，用于`Application.Caller`检测工作表上的哪个按钮被按下，然后设置`multipage`

```
Private Sub UserForm_Initialize()
Select Case Application.Caller
Case "ImportBttn"
`1st tab
Me.MultiPage1.Value = 0
Case "ProtctBttn"
`3rd tab
Me.MultiPage1.Value = 2
End Select
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-02T15:38:10.720

我的项目使用了几个多页。由于选项卡的用户定义名称是动态的，因此我将默认选项卡设置为 ...

```
Sub iconDailyEntry_Click()
    Call init_GUI(frmGUI.mulGUI, "pgDaily")
End Sub

Sub init_GUI(mPage As MSForms.MultiPage, pgName As String)
  mPage.Value = mPage(pgName).Index
  mPage.Parent.Show
End Function 
```

冲洗并重复每个按钮的点击事件。干杯。

# playframework - 向 Play 2.0 (scala/sbt) 项目添加构建步骤

> ID：14826665
> 
> 赞同：6
> 
> 时间：2013-02-12T06:22:19.663
> 
> 标签：playframework, playframework-2.0, sbt

我正在用 Scala 编写一个 Play 2.0 项目，我需要在 SBT 开始决定要编译的内容之前运行一个命令行工具（该命令将在项目中创建/替换一个 .scala 文件，并用一些数据生成的文件）。我是 SBT 的完全新手，在 Google 上的一些快速时间并没有发现任何有希望的东西。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T15:35:25.920

要在编译之前创建源代码，请查看源代码生成器：

[http://www.scala-sbt.org/0.12.3/docs/Howto/generatefiles.html](http://www.scala-sbt.org/0.12.3/docs/Howto/generatefiles.html)

# c# - 类在调用 Serialize 时尝试转换为 self

> ID：14826676
> 
> 赞同：0
> 
> 时间：2013-02-12T06:23:16.420
> 
> 标签：c#, protobuf-net

我有以下基本代码：

```
[Serializable]
[ProtoContract(ImplicitFields = ImplicitFields.AllFields, SkipConstructor = true, InferTagFromName = true, UseProtoMembersOnly = false,ImplicitFirstTag=10)]
public class BaseCustomDictionary<TKey, TValue>
{
    [NonSerialized]
    [ProtoIgnore]
    private System.Collections.Generic.Dictionary<TKey, System.Collections.ObjectModel.Collection<TValue>> collection;

    private System.Collections.Generic.Dictionary<TKey, TValue[]> serializationCollection;

    [OnSerializing]
    [ProtoBeforeSerialization]
    private void OnSerializing(StreamingContext context)
    {
        serializationCollection = System.Collections.Generic.Dictionary<TKey, TValue[]>();
        foreach (KeyValuePair<TKey, System.Collections.ObjectModel.Collection<TValue>> values in collection)
        {
            TValue[] array = new TValue[values.Value.Count];
            values.CopyTo(array, 0);
            serializationCollection.Add(values.Key, array);
        }
    }

    [OnDeserialized]
    [ProtoAfterDeserialization]
    private void OnDeserialized(StreamingContext context)
    {
        collection = new System.Collections.Generic.Dictionary<TKey, System.Collections.ObjectModel.Collection<TValue>>();
        foreach (KeyValuePair<TKey, TValue[]> value in serializationCollection)
        {
            foreach (TValue v in value.Value)
            {
                Add(value.Key, v);
            }
        }
        serializationCollection = null;
    }

    public BaseCustomDictionary()
    {
        collection = System.Collections.Generic.new Dictionary<TKey, System.Collections.ObjectModel.Collection<TValue>>();

        MetaType metaType = RuntimeTypeModel.Default[typeof(BaseCustomDictionary<TKey, TValue>)];
        metaType.AddSubType(1, typeof(DerivedCustomDictionary<TKey, TValue>));
    }

    public void Add(TKey key, TValue value)
    {
        if (!collection.ContainsKey(key))
        {
            collection.Add(key, CreateCollection());
        }
        collection[key].Add(value)
    }

    public virtual System.Collections.ObjectModel.Collection<TValue> CreateCollection()
    {
        return new System.Collections.ObjectModel.Collection<TValue>();
    }
}

[Serializable]
[ProtoContract(ImplicitFields = ImplicitFields.AllFields, SkipConstructor = true, InferTagFromName = true, UseProtoMembersOnly = false, ImplicitFirstTag=10)]
public class DerivedCustomDictionary<TKey, TValue>
{
    public override System.Collections.ObjectModel.Collection<TValue> CreateCollection()
    {
        return new System.Collections.ObjectModel.ObservableCollection<TValue>();
    }
}

[ProtoContract(...)]
[ProtoInclude(1, typeof(DerivedClass))]
public abstract class SomeClass
{
    private DerivedCustomDictionary<System.Type, SomeClass> children = new DerivedCustomDictionary<System.Type, SomeClass>();

    public DerivedCustomDictionary<System.Type, SomeClass> Children
    {
        get
        {
            return children;
        }
    }
}

public class DerivedClass : SomeClass
{
    public string Text
    {
        get;
        set;
    }
}

DerivedClass root = new DerivedClass();
//ADD CHILDREN THAT HAVE CHILDREN ETC.
using(FileStream stream = new FileStream("Path", FileMode.Create, FileAccess.Write, FileShare.Read))
{
    Serializer.Serialize(stream, root)
} 
```

当我打电话时，`Serializer.Serialize(stream, root)`我得到一个错误，它试图将“孩子”的类型投射到`BaseClass`不会令人震惊地失败的类型。

# php - 如何使用php查找一个月中某一天的周数

> ID：14826679
> 
> 赞同：0
> 
> 时间：2013-02-12T06:23:30.000
> 
> 标签：php

嗨，我发现这个[PHP 获取每个月的周数](https://stackoverflow.com/questions/5853380/php-get-number-of-week-for-month)很有帮助，但它在从星期日开始的所有月份都会出现一些错误，例如“2013-09-01”将周数设为 2（实际上是“1”）.. 任何人都得到了有什么想法？？请提前分享谢谢......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T06:28:47.353

使用`date("W","2013-09-01");`.it 将返回周数为 01。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-08T20:30:42.687

向它添加 strtotime 函数.. 工作正常.. date("W",strtotime("2013-09-01"));

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-01T06:39:28.137

此实用程序函数返回特定日期的月份中的第几周。需要两个参数：通缉日和同月的第一天

```
class WeekCalculator
{    
    public static function getWeekOfMonth($date, $firstDayOfMonth) {    
        $w1 = date("W", $firstDayOfMonth->getTimestamp());
        $w2 = date("W", $date->getTimestamp());

        $weekNum = $w2 - $w1 + 1;
        return $weekNum;
    }
} 
```

示例用法

```
WeekCalculator::getWeekOfMonth(new \DateTime('2016-8-8'), new \DateTime('2016-8-1')); 
```

返回 2（2016 年 8 月的第二周）

# android - 仅在后端托管服务器添加图像时更新 android Gallery View 的最佳方法

> ID：14826680
> 
> 赞同：0
> 
> 时间：2013-02-12T06:23:32.370
> 
> 标签：android

我从后端服务调用中获取了一组图像 URL，解析它们后，我下载图像并显示在画廊视图中。我编写了一个 Asynctask 以在 onCreate 方法中从服务器获取响应，我的要求是每当我服务器团队在服务调用中添加了一个图像，我需要更新我的画廊视图，否则我对进行不必要的网络资源操作不感兴趣。我该如何实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:32:59.477

实现此场景的一种简单方法是推送通知。每当您的服务器团队进行一些更改时，您都会收到通知消息。如果您能在消息中获取一些**JSON 字符串**会更好，以便您可以将该消息解析为 JSONObject，然后执行您的网络操作。

# batch-file - 将 HTA 与批处理文件一起使用

> ID：14826682
> 
> 赞同：1
> 
> 时间：2013-02-12T06:23:36.457
> 
> 标签：batch-file, hta

我创建了具有用户表单的 HTA 文件以从用户那里收集数据。我从批处理文件中调用这个 HTA 文件。

读取用户输入后，我希望将输入值从 HTA 传递到批处理文件。有没有可能实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:26:09.687

是的，您可以让 HTA 文件将值返回到批处理文件，但不能直接执行此操作。您必须使用 Javascript 使用用户提供的值创建一个文本文件，然后您的批处理文件才能处理这些值。这是一个站点，其中列出了几种读取和写入文本文件的方法：

[http://www.c-point.com/JavaScript/articles/file_access_with_JavaScript.htm](http://www.c-point.com/JavaScript/articles/file_access_with_JavaScript.htm)

使用其中一个，我创建了一个非常简单的示例来演示如何完成：

简单表单.hta

```
<HTML> 
  <HEAD> 
    <SCRIPT language="JavaScript">
      function WriteFile() {
        var fso  = new ActiveXObject("Scripting.FileSystemObject"); 
        var fh = fso.CreateTextFile("c:\\Output.txt", true); 
        fh.WriteLine(myForm.FN.value + '~' + myForm.LN.value);
        fh.Close(); 
      }
    </SCRIPT>
  </HEAD>
  <BODY>
    <FORM name="myForm">
      <P>First Name: <INPUT name="FN" type="text"></P>
      <P>Last Name: <INPUT name="LN" type="text"></P>
      <P><INPUT type="button" value="Save Values" onclick="WriteFile();"></P>
    </FORM>
    <P>After you click 'save', close the window.</P>
  </BODY>
</HTML> 
```

现在批处理文件：

```
@echo off

start /wait SimpleForm.hta
for /f "tokens=1,2 delims=~" %%i in (C:\Output.txt) do (
  set FirstName=%%i
  set LastName=%%j
)

del C:\Output.txt

echo The user entered %FirstName% %LastName% for their name. 
```

您将需要处理用户在其中一个文本字段中输入分隔符（在我的示例中为波浪号）并放弃`for`语句的参数解析的复杂性。例如，您可以使用用户不会键入的晦涩字符。

# r - 绘制 Luv 颜色；复制 ggplot2 书中的图 6.11

> ID：14826686
> 
> 赞同：3
> 
> 时间：2013-02-12T06:23:50.780
> 
> 标签：r, colors, ggplot2, color-space

我试图从 Hadley Wickham 的[ggplot2 书中](https://rads.stackoverflow.com/amzn/click/com/0387981403)复制图 6.11 ，它在 Luv 空间中绘制 R 颜色；点的颜色代表自己，不需要图例。 ![在此处输入图像描述](../Images/cdc47fca6b0baacefcf3172d54c27bd7.png)

这里有两个尝试：

```
library(colorspace)
myColors <- data.frame("L"=runif(10000, 0,100),"a"=runif(10000, -100, 100),"b"=runif(10000, -100, 100))
myColors <- within(myColors, Luv <- hex(LUV(L, a, b)))
myColors <- na.omit(myColors)
g <- ggplot(myColors, aes(a, b, color=Luv), size=2)
g + geom_point() + ggtitle ("mycolors") 
```

![在此处输入图像描述](../Images/b52db87be6c547b7ab0bf38b3a5d4188.png)

第二次尝试：

```
other <- data.frame("L"=runif(10000),"a"=runif(10000),"b"=runif(10000))
other <- within(other, Luv <- hex(LUV(L, a, b)))
other <- na.omit(other)
g <- ggplot(other, aes(a, b, color=Luv), size=2)
g + geom_point() + ggtitle("other") 
```

![在此处输入图像描述](../Images/a58b59968f49cd1218677ed0be48d401.png)

有几个明显的问题：

1.  这些图表看起来与该图完全不同。关于所需代码的任何建议？
2.  第一次尝试在 Luv 列中生成了很多 NA 字段（在 10,000 次运行中只有约 3100 种命名颜色，而第二次运行中约 9950 种）。如果 L 应该在 0-100 之间，而 u 和 v 在 -100 和 100 之间，为什么我在第一次运行时会有这么多 NA？我试过四舍五入，它没有帮助。
3.  为什么我有传奇？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T07:11:04.003

你会得到奇怪的颜色，因为`aes(color = Luv)`说“为列中的每个唯一字符串分配一种颜色`Luv`”。如果您`color`在 之外分配`aes`，如下所示，这意味着“使用这些显式颜色”。我认为这样的事情应该接近你提出的数字。

```
require(colorspace)
x <- sRGB(t(col2rgb(colors())))
storage.mode(x@coords) <- "numeric" # as(..., "LUV") doesn't like integers for some reason
y <- as(x, "LUV")
DF <- as.data.frame(y@coords)
DF$col <- colors()
ggplot(DF, aes( x = U, y = V)) + geom_point(colour = DF$col) 
```

# iphone - 在应用程序设置屏幕中增加单元格的高度

> ID：14826693
> 
> 赞同：0
> 
> 时间：2013-02-12T06:24:17.910
> 
> 标签：iphone, objective-c, xcode, application-settings

我正在使用本[教程](http://www.informit.com/articles/article.aspx?p=1846575&seqNum=12)来开发应用程序设置屏幕。问题是我想增加设置屏幕中单元格的高度。而且我没有采取任何表格视图，我正在使用 Root.plist 文件来执行此操作。即我想增加高度此[图像](http://ptgmedia.pearsoncmg.com/images/chap16_9780133028348/elementLinks/16fig09.jpg)中的法律字段 （应用程序设置屏幕不在应用程序的表格视图中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:29:57.327

首先，您需要保存选定的 indexPath 行：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
   self.selectedRowIndex = [indexPath retain];
   [tableView beginUpdates];
   [tableView endUpdates];
} 
```

然后，当您拥有当前选定的索引时，您可以告诉 tableView 它应该为该行提供更多空间。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
{
   //check if the index actually exists
   if(selectedRowIndex && indexPath.row == selectedRowIndex.row) 
   {
        return 100;
   }
   return 44;
} 
```

这将为所选单元格返回高度 100。你也可以检查[这个](http://www.roostersoftstudios.com/2011/04/14/iphone-uitableview-with-animated-expanding-cells/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:46:47.087

从您的图像中可以看出，您需要增加行高的 indexPath 是第 1 节和第 0 行：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
{

   NSIndexPath *indexValue = [NSIndexPath indexPathForRow:0 inSection:1];

   if (indexValue == indexPath)
      return 100.0;
   else
      return 44.0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T06:28:38.230

在 UITableView 中使用此设置的行高

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
// Return the height For Row.
return 100.0;
} 
```

# android - 向左或向右滑动列表视图项目详细活动以在 android 中滑动视图

> ID：14826696
> 
> 赞同：1
> 
> 时间：2013-02-12T06:24:29.700
> 
> 标签：android, listview, gesture

我有一个列表视图，当我单击列表视图中的任何项目时，将打开一个详细的活动。这个布局有许多小部件，如 textview、ImageView、共享按钮等。现在我想滑动项目的这个详细活动以显示详细视图列表中的下一项。我正在关注这个[http://misha.beshkin.lv/android-swipe-gesture-implementation/](http://misha.beshkin.lv/android-swipe-gesture-implementation/)但是当我从左向右滑动时，下一个视图不显示只是得到一条吐司消息“向右滑动”。任何人都可以指导我如何解决这个问题吗？我是 android 的新手，将不胜感激。以下是我使用的代码

MainActivity.java（列表视图页面）

```
public class MainActivity extends ListActivity  {

ArrayList<HashMap<String, String>> songsList;
ListView list;
LazyAdapter adapter;
JSONArray posts;

// All static variables
static final String URL = "http://siteurl/posts/pages";

static final String KEY_URL_FOR_MAP = "url_site"; 
 static final String KEY_POSTS = "posts";
 static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_SITEURL = "url";
static final String KEY_DATE = "date";
static final String KEY_CONTENT = "content";
static final String KEY_AUTHOR = "author";
static final String KEY_NAME = "name";
static final String KEY_ATTACHMENTS = "attachments";
static final String KEY_SLUG = "slug";
static final String KEY_THUMB_URL = "thumbnail";
static final String KEY_IMAGES = "images";
static final String KEY_URL = "url";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

  final  ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

        // Creating JSON Parser instance
                final JSONParser jParser = new JSONParser();

                // getting JSON string from URL
                JSONObject json = jParser.getJSONFromUrl(URL);
                try {
                      posts = json.getJSONArray(KEY_POSTS);

        // looping through all song nodes <song>
                for(int i = 0; i < posts.length(); i++){
                    JSONObject c = posts.getJSONObject(i);
                    // Storing each json item in variable
                    String id = c.getString(KEY_ID);
                    String title = c.getString(KEY_TITLE);
                    String siteurl = c.getString(KEY_SITEURL);
                    String date = c.getString(KEY_DATE);
                    String content = c.getString(KEY_CONTENT);
                    // to remove all <P> </p> and <br /> and replace with ""
                     content = content.replace("<br />", "");
                     content = content.replace("<p>", "");
                     content = content.replace("</p>", "");

                    //authornumber is agin  JSON Object
                    JSONObject author = c.getJSONObject(KEY_AUTHOR);
                    String name = author.getString(KEY_NAME);

                    String url = null;
                    String slug = null;
                    try {
                    JSONArray atta = c.getJSONArray("attachments");
                    for(int j = 0; j < atta.length(); j++){
                        JSONObject d = atta.getJSONObject(j);

                        slug = d.getString(KEY_SLUG);

                        JSONObject images = d.getJSONObject(KEY_IMAGES);

                        JSONObject thumbnail = images.getJSONObject(KEY_THUMB_URL);
                        url = thumbnail.getString(KEY_URL);

                    }
                    } catch (Exception e) {
                        e.printStackTrace();

                    }

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(KEY_ID, id);
            map.put(KEY_TITLE, title);
            map.put(KEY_URL_FOR_MAP, siteurl);
            map.put(KEY_DATE, date);
            map.put(KEY_NAME, name);
            map.put(KEY_CONTENT, content);
            map.put(KEY_SLUG, slug);
            map.put(KEY_URL, url);

            // adding HashList to ArrayList
            songsList.add(map);
                }   
                }catch (JSONException e) {
                    e.printStackTrace();

                    }

         final ListView  list=(ListView)findViewById(android.R.id.list);

         // Getting adapter by passing json data ArrayList
            adapter=new LazyAdapter(this, songsList);    
             list.setAdapter(adapter);

    // Launching new screen on Selecting Single ListItem
    list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            HashMap<String, String> map = songsList.get(position);

            Intent in = new Intent(MainActivity.this, SampleDesp.class);
            in.putExtra(KEY_TITLE, map.get(KEY_TITLE));
            in.putExtra(KEY_URL_FOR_MAP, map.get(KEY_URL_FOR_MAP));
            in.putExtra(KEY_DATE, map.get(KEY_DATE));                         
            in.putExtra(KEY_NAME, map.get(KEY_NAME));
            in.putExtra(KEY_CONTENT, map.get(KEY_CONTENT));
            in.putExtra(KEY_URL, map.get(KEY_URL));

            startActivity(in);
        }

    });   

 }
   } 
```

SampleDesp.java（详细活动）

```
public class SampleDesp extends Activity implements SimpleGestureListener {
  private SimpleGestureFilter detector;

 static String title;
 String content; 

    // Your Facebook APP ID
    private static String APP_ID = "308180782571605"; // Replace with your App ID

    // Instance of Facebook Class
    private Facebook facebook = new Facebook(APP_ID);
    private AsyncFacebookRunner mAsyncRunner;
    String FILENAME = "AndroidSSO_data";
    private SharedPreferences mPrefs;

    Button btnFbLogin;
    Button btnPostToWall;

    // JSON node keys
    static final String KEY_URL_FOR_MAP = "url_site"; 
    private static final String KEY_TITLE = "title";
    private static final String KEY_SITEURL = "url";
    private static final String KEY_DATE = "date";
    private static final String KEY_NAME = "name";
    private static final String KEY_CONTENT = "content";
    private static final String KEY_URL = "url";
     static final String KEY_SLUG1= "slug";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sampledes);
        detector = new SimpleGestureFilter(this,this);

        final LinearLayout line1 = (LinearLayout)findViewById(R.id.ll1);
        LinearLayout line2 = (LinearLayout)findViewById(R.id.ll2);

        Button btnShare = (Button)findViewById(R.id.share);

        btnShare.setOnClickListener(new OnClickListener() {

      public void onClick(View v) {
        // TODO Auto-generated method stub
      line1.setVisibility(View.VISIBLE);

      }
    });
        // getting intent data
        Intent in = getIntent();
        final String url1 = in.getStringExtra(KEY_URL);

        ImageView imgv = (ImageView) findViewById(R.id.imgdesc);
        ImageLoader imageLoader = new ImageLoader(getApplicationContext());
        imageLoader.DisplayImage(url1, imgv);

        // Get JSON values from previous intent

        final String title = in.getStringExtra(KEY_TITLE);
        final String siteurl = in.getStringExtra(KEY_URL_FOR_MAP);
        String date = in.getStringExtra(KEY_DATE);
        String name = in.getStringExtra(KEY_NAME);
        final String content = in.getStringExtra(KEY_CONTENT);

        // Displaying all values on the screen
        TextView lblName = (TextView) findViewById(R.id.name_label);
        TextView lblUrl = (TextView) findViewById(R.id.url_label);

        TextView lblCost = (TextView) findViewById(R.id.email_label);
        TextView lblDesc = (TextView) findViewById(R.id.mobile_label);
        TextView lblCont = (TextView) findViewById(R.id.content_label);

        lblName.setText(title);
        lblUrl.setText(siteurl);
        lblCost.setText(date);
        lblDesc.setText(name);
        lblCont.setText(content);

        final ImageView email3 = (ImageView) findViewById(R.id.email);

       email3.setOnClickListener(new View.OnClickListener() {
          public void onClick(View v){
              //my codes
           Intent intent = new Intent(Intent.ACTION_VIEW);
           Uri data = Uri.parse("mailto:?subject=" + title + "&body=" + content);
           intent.setData(data);
           startActivity(intent);
          }

        });

         final ImageView sms4 = (ImageView) findViewById(R.id.sms);
            sms4.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v){
               // Perform action on click

                Intent shareIntent = new Intent(Intent.ACTION_SEND);
                shareIntent.setData(Uri.parse(Uri.encode(title)+Uri.encode(content))); 

                shareIntent.setType("text/*");
                shareIntent.putExtra(android.content.Intent.EXTRA_TEXT, content);           
                startActivity(shareIntent);
            }
         });

            final ImageView twitter4 = (ImageView) findViewById(R.id.twitter);
            twitter4.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v){
               // Perform action on click
               Intent i = new Intent(Intent.ACTION_VIEW);
               i.setData(Uri.parse("http://twitter.com/?status=" + Uri.encode(title) + "" + Uri.encode(siteurl)));
               startActivity(i);

            }
         });

            Button btnFbLogin = (Button) findViewById(R.id.btn_fblogin);
            btnFbLogin.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    Log.d("Image Button", "button Clicked");
                    loginToFacebook();
                    if (facebook.isSessionValid()) {
                        postToWall();
                    }
                }

            });
    }
     @Override 
        public boolean dispatchTouchEvent(MotionEvent me){ 
          this.detector.onTouchEvent(me);
         return super.dispatchTouchEvent(me); 
        }
    public void onSwipe(int direction) {
      String str = "";

      switch (direction) {

      case SimpleGestureFilter.SWIPE_RIGHT : str = "Swipe Right";
                                                      break;
      case SimpleGestureFilter.SWIPE_LEFT :  str = "Swipe Left";
                                                     break;
      case SimpleGestureFilter.SWIPE_DOWN :  str = "Swipe Down";
                                                     break;
      case SimpleGestureFilter.SWIPE_UP :    str = "Swipe Up";
                                                     break;

      } 
       Toast.makeText(this, str, Toast.LENGTH_SHORT).show();
     }

     public void onDoubleTap() {
        Toast.makeText(this, "Double Tap", Toast.LENGTH_SHORT).show(); 
     }

                /**
                 * Function to login into facebook
                 * */

                private void loginToFacebook() {
                    // TODO Auto-generated method stub
                     {

                    mPrefs = getPreferences(MODE_PRIVATE);
                    String access_token = mPrefs.getString("access_token", null);
                    long expires = mPrefs.getLong("access_expires", 0);

                    if (access_token != null) {
                        facebook.setAccessToken(access_token);

                        Log.d("FB Sessions", "" + facebook.isSessionValid());
                    }

                    if (expires != 0) {
                        facebook.setAccessExpires(expires);
                    }

                    if (!facebook.isSessionValid()) {
                        facebook.authorize(this,
                                new String[] { "email", "publish_stream" },
                                new DialogListener() {

                                    @Override
                                    public void onCancel() {
                                        // Function to handle cancel event
                                    }

                                    @Override
                                    public void onComplete(Bundle values) {
                                        // Function to handle complete event
                                        // Edit Preferences and update facebook acess_token
                                        SharedPreferences.Editor editor = mPrefs.edit();
                                        editor.putString("access_token",
                                                facebook.getAccessToken());
                                        editor.putLong("access_expires",
                                                facebook.getAccessExpires());
                                        editor.commit();

                                                                                }

                                    @Override
                                    public void onError(DialogError error) {
                                        // Function to handle error

                                    }

                                    @Override
                                    public void onFacebookError(FacebookError fberror) {
                                        // Function to handle Facebook errors

                                    }

                                });

                     }else{}
                     }
                     }

                    /**
                     * Function to post to facebook wall
                     * */
                    public void postToWall() {
                         Bundle parameters = new Bundle();
                    parameters.putString("title", "visit us");
                        parameters.putString("link", "http://india.dollardesi.net/ads/metro-logistic-packers-movers/");

                        // post on user's wall.
                        facebook.dialog(this, "feed",parameters, new DialogListener() {

                            @Override
                            public void onFacebookError(FacebookError e) {
                            }

                            @Override
                            public void onError(DialogError e) {
                            }

                            @Override
                            public void onComplete(Bundle values) {
                            }

                            @Override
                            public void onCancel() {
                            }

                        });

                    }       

                    /**
                     * Function to Logout user from Facebook
                     * */
                    public void logoutFromFacebook() {
                        mAsyncRunner.logout(this, new RequestListener() {
                            @Override
                            public void onComplete(String response, Object state) {
                                Log.d("Logout from Facebook", response);
                                if (Boolean.parseBoolean(response) == true) {
                                    runOnUiThread(new Runnable() {

                                        @Override
                                        public void run() {
                                            // make Login button visible
                                            btnFbLogin.setVisibility(View.VISIBLE);

                                        }

                                    });

                                }
                            }

                            @Override
                            public void onIOException(IOException e, Object state) {
                            }

                            @Override
                            public void onFileNotFoundException(FileNotFoundException e,
                                    Object state) {
                            }

                            @Override
                            public void onMalformedURLException(MalformedURLException e,
                                    Object state) {
                            }

                            @Override
                            public void onFacebookError(FacebookError e, Object state) {
                            }

                        });
                    }

                     } 
```

SimpleGestureFilter.java

```
public class SimpleGestureFilter extends SimpleOnGestureListener{

 public final static int SWIPE_UP    = 1;
 public final static int SWIPE_DOWN  = 2;
 public final static int SWIPE_LEFT  = 3;
 public final static int SWIPE_RIGHT = 4;

 public final static int MODE_TRANSPARENT = 0;
 public final static int MODE_SOLID       = 1;
 public final static int MODE_DYNAMIC     = 2;

 private final static int ACTION_FAKE = -13; //just an unlikely number
 private int swipe_Min_Distance = 100;
 private int swipe_Max_Distance = 350;
 private int swipe_Min_Velocity = 100;

 private int mode      = MODE_DYNAMIC;
 private boolean running = true;
 private boolean tapIndicator = false;

 private Activity context;
 private GestureDetector detector;
 private SimpleGestureListener listener;

 public SimpleGestureFilter(Activity context,SimpleGestureListener sgl) {

  this.context = context;
  this.detector = new GestureDetector(context, this);
  this.listener = sgl; 
 }

 public void onTouchEvent(MotionEvent event){

   if(!this.running)
  return;  

   boolean result = this.detector.onTouchEvent(event); 

   if(this.mode == MODE_SOLID)
    event.setAction(MotionEvent.ACTION_CANCEL);
   else if (this.mode == MODE_DYNAMIC) {

     if(event.getAction() == ACTION_FAKE) 
       event.setAction(MotionEvent.ACTION_UP);
     else if (result)
       event.setAction(MotionEvent.ACTION_CANCEL); 
     else if(this.tapIndicator){
      event.setAction(MotionEvent.ACTION_DOWN);
      this.tapIndicator = false;
     }

   }
   //else just do nothing, it's Transparent
 }

 public void setMode(int m){
  this.mode = m;
 }

 public int getMode(){
  return this.mode;
 }

 public void setEnabled(boolean status){
  this.running = status;
 }

 public void setSwipeMaxDistance(int distance){
  this.swipe_Max_Distance = distance;
 }

 public void setSwipeMinDistance(int distance){
  this.swipe_Min_Distance = distance;
 }

 public void setSwipeMinVelocity(int distance){
  this.swipe_Min_Velocity = distance;
 }

 public int getSwipeMaxDistance(){
  return this.swipe_Max_Distance;
 }

 public int getSwipeMinDistance(){
  return this.swipe_Min_Distance;
 }

 public int getSwipeMinVelocity(){
  return this.swipe_Min_Velocity;
 }

 @Override
 public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
   float velocityY) {

  final float xDistance = Math.abs(e1.getX() - e2.getX());
  final float yDistance = Math.abs(e1.getY() - e2.getY());

  if(xDistance > this.swipe_Max_Distance || yDistance > this.swipe_Max_Distance)
   return false;

  velocityX = Math.abs(velocityX);
  velocityY = Math.abs(velocityY);
        boolean result = false;

  if(velocityX > this.swipe_Min_Velocity && xDistance > this.swipe_Min_Distance){
   if(e1.getX() > e2.getX()) // right to left
    this.listener.onSwipe(SWIPE_LEFT);
   else
    this.listener.onSwipe(SWIPE_RIGHT);

   result = true;
  }
  else if(velocityY > this.swipe_Min_Velocity && yDistance > this.swipe_Min_Distance){
   if(e1.getY() > e2.getY()) // bottom to up 
    this.listener.onSwipe(SWIPE_UP);
   else
    this.listener.onSwipe(SWIPE_DOWN);

   result = true;
  }

   return result;
 }

 @Override
 public boolean onSingleTapUp(MotionEvent e) {
  this.tapIndicator = true;
  return false;
 }

 @Override
 public boolean onDoubleTap(MotionEvent arg0) {
  this.listener.onDoubleTap();;
  return true;
 }

 @Override
 public boolean onDoubleTapEvent(MotionEvent arg0) {
  return true;
 }

 @Override
 public boolean onSingleTapConfirmed(MotionEvent arg0) {

  if(this.mode == MODE_DYNAMIC){        // we owe an ACTION_UP, so we fake an       
     arg0.setAction(ACTION_FAKE);      //action which will be converted to an ACTION_UP later.                                    
     this.context.dispatchTouchEvent(arg0);  
  }   

  return false;
 }

    static interface SimpleGestureListener{
     void onSwipe(int direction);
     void onDoubleTap();
 }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:08:28.113

改变

```
 case SimpleGestureFilter.SWIPE_LEFT : str = "Swipe Left";
     break; 
```

至

```
case SimpleGestureFilter.SWIPE_LEFT : str = "Swipe Left";
         //Fire intent to your detail activity here
         break; 
```

我希望我更接近您的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:04:48.707

我认为它可能有效：

```
 //code from your onItemClick
    HashMap<String, String> map = songsList.get(position);

        Intent in = new Intent(MainActivity.this, SampleDesp.class);
        in.putExtra(KEY_TITLE, map.get(KEY_TITLE));
        in.putExtra(KEY_URL_FOR_MAP, map.get(KEY_URL_FOR_MAP));
        in.putExtra(KEY_DATE, map.get(KEY_DATE));                         
        in.putExtra(KEY_NAME, map.get(KEY_NAME));
        in.putExtra(KEY_CONTENT, map.get(KEY_CONTENT));
        in.putExtra(KEY_URL, map.get(KEY_URL));
        in.putExtra(LIST_POSITION, position); //passing incremented position

        startActivity(in); 
```

然后在您的详细信息活动中，您将拥有列表中当前项目的位置，详细信息显示在屏幕上。所以现在你可以增加位置，并在你的 onSwipe(int direction) 方法中使用相同的代码（上面的代码）。因此，如果您想在左侧滑动中打开下一个项目详细信息，请执行以下操作：

```
 public void onSwipe(int direction) {

  switch (direction) {

  case SimpleGestureFilter.SWIPE_RIGHT : 
                                  break;
  case SimpleGestureFilter.SWIPE_LEFT :  
  Intent in = getIntent();
  in.putExtra(KEY_TITLE, map.get(KEY_TITLE));
  in.putExtra(KEY_URL_FOR_MAP, map.get(KEY_URL_FOR_MAP));
  in.putExtra(KEY_DATE, map.get(KEY_DATE));                         
  in.putExtra(KEY_NAME, map.get(KEY_NAME));
  in.putExtra(KEY_CONTENT, map.get(KEY_CONTENT));
  in.putExtra(KEY_URL, map.get(KEY_URL));
  in.putExtra(LIST_POSITION, position); //passing clicked position
  finish();
  startActivity(intent);
                                 break;
  case SimpleGestureFilter.SWIPE_DOWN :  
                                 break;
  case SimpleGestureFilter.SWIPE_UP :    
                               break;

  } 

 } 
```

但是对于 SWIPE_LEFT 中的这段代码，当您将 Extras 添加到您的意图时，您需要从 MainActivity 访问 HashMap，因此您可以在 MainActivity 中添加一个公共静态方法，例如：

```
public static String getSongFromHashMap(String key) {
    return songsList.get(key);
} 
```

并在 SWIPE_LEFT 代码中使用此方法。我知道这不是最好的解决方案，但它应该可以工作:)

# php - 图像裁剪系统不适用于 png 或 gif，但适用于 jpg

> ID：14826698
> 
> 赞同：0
> 
> 时间：2013-02-12T06:24:48.957
> 
> 标签：php

这是我的php代码：

```
<?php

$dst_x = 0;
$dst_y = 0;
$src_x = $_POST['left'];
$src_y = $_POST['top'];
$dst_w = $_POST['width'];
$dst_h = $_POST['height'];
$src_w = $_POST['width'];
$src_h = $_POST['height'];

$file_name = 'test.gif';

$allowed = array('jpg','jpeg','gif','png');
$file_extension= explode('.', $file_name); 
$file_extn= strtolower(end($file_extension));

$dst_image = imagecreatetruecolor($dst_w,$dst_h);

if(in_array($file_extn, $allowed) == 'jpg, jpeg'){
    $src_image = imagecreatefromjpeg($file_name);
} 
else if(in_array($file_extn, $allowed) == 'gif') {
    $src_image = imagecreatefromgif($file_name);
}
else if(in_array($file_extn, $allowed) == 'png') {
    $src_image = imagecreatefrompng($file_name);
}

imagecopyresampled($dst_image, $src_image, $dst_x, $dst_y, $src_x, $src_y, $dst_w, $dst_h, $src_w, $src_h);
imagejpeg($dst_image, "new.jpg");

?> 
```

当我裁剪图像时，它适用于 jpg 但不适用于 png 或 gif。它显示的只是一张空白图片。我确定 if 语句有问题。这里有什么问题？如果我单独做，没有 if 语句，它没有问题，是的，我希望我的输出是 jpeg。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:28:32.803

首先你在这里犯了一个错误。

```
else if(in_array($file_extn, $allowed) == 'png') {
   $src_image = imagecreatefromgif($file_name);
} 
```

应该 ：

```
else if(in_array($file_extn, $allowed) == 'png') {
   $src_image = imagecreatefrompng($file_name);
} 
```

并且因为必须有一个单独的 if 语句。

```
if(in_array($file_extn, $allowed) == 'jpg, jpeg'){
   $src_image = imagecreatefromjpeg($file_name);
} 
```

# django - 显示特定用户 django 的模型值

> ID：14826699
> 
> 赞同：2
> 
> 时间：2013-02-12T06:24:50.437
> 
> 标签：django, django-models, django-templates, django-views

我想显示他输入的用户的数据。这是我的模型

```
class IgaiaContent(models.Model):
    CONTENT_CHANNELS = (
        ('YouTube','Youtube'),
        ('FaceBook','FaceBook'),
        ('Flickr','Flickr'),
        ('Instagram','Instagram'),
    )
    content_name =          models.CharField(max_length=255, primary_key=True)
    content_type =          models.CharField(max_length=255,null=True)
    content_source =        models.CharField(max_length=255,null=True, choices=CONTENT_CHANNELS)
    content_location =      models.CharField(max_length=255,null=True)
    content_latitude =      models.DecimalField(max_digits=20,decimal_places=2,null=True)
    content_longitude =     models.DecimalField(max_digits=20,decimal_places=2,null=True)
    content_embed_code =    models.TextField(null=True)
    content_description =   models.TextField(null=True)
    content_tags_user  =  models.CharField(max_length=255,null=True)  
    content_time_uploaded = models.DateTimeField(auto_now_add=True)
    content_time_updated =  models.DateField(null=True)

    def __unicode__(self):
        return self.content_name
        return self.content_type
        return self.content_source
        return self.content_location
        return self.content_latitude
        return self.content_longitude
        return self.embed_code
        return self.description
        return self.tags_user 
        return self.time_uploaded
        return self.time_updated

tagging.register(IgaiaContent) 
```

我的观点

```
def create_page(request):
    if request.method == 'POST':
            form = AuthorForm1(request.POST) 
            if form.is_valid(): 
                    form.save()
                    return HttpResponseRedirect('/thanks/')
    else:
            form = AuthorForm1()

    c = {}
    c.update(csrf(request))
    return render_to_response('portal/form1.htm',{'form':form},context_instance=RequestContext(request)) 
```

我的表单模板：

```
<form method="post" style="height: 553px; width: 594px">
<div class="style12">

{% csrf_token %}

        </br>{{ form.as_p }}

</div>
</form> 
```

这就是我展示我的模型值的方式

```
employee_info1 = {
    "queryset" : IgaiaContent.objects.all(),
    "template_name" : "portal/emp1.html",
}

urlpatterns = patterns('',

    (r'^view5/',  list_detail.object_list, employee_info1),
) 
```

emp1.html

```
{% if object_list %}
<table>
<ul>
{% for item in object_list %}
   <li>{{item.content_name}}</li>
   <li>{{item.content_type}}</li>
   <li>{{item.content_source}}</li>
   <li>{{item.content_location}}</li>
   <li>{{item.content_latitude}}</li>
   <li>{{item.content_longitude}}</li>
   <li>{{item.content_embed_code}}</li>
   <li>{{item.content_description}}</li>
   <li>{{item.content_tags_user}}</li>
   <li>{{item.content_time_uploaded}}</li>
   <li>{{item.content_time_updated}}</li></ul>
{% empty %}
   <td colspan="11">No items.</td>
{% endfor %}
</table>
{% endif %} 
```

它没有显示特定的用户价值意味着它正在向我显示所有内容。谁能告诉我如何显示特定的用户值/数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T07:47:16.110

您需要更新模型，使其包含一个存储用户的字段 -

```
from django.contrib.auth.models import User

class IgaiaContent(models.Model):
    #...
    user = models.ForeignKey(User) 
```

然后，您需要按照[此处](https://stackoverflow.com/questions/862522/django-populate-user-id-when-saving-a-model)所述创建一个[ModelForm](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/)。

```
class IgaiaContentForm(forms.ModelForm):

   def __init__(self, *args, **kwargs):
       self.request = kwargs.pop('request', None)
       return super(MyModelForm, self).__init__(*args, **kwargs)

   def save(self, *args, **kwargs):
       kwargs['commit']=False
       obj = super(MyModelForm, self).save(*args, **kwargs)
       if self.request:
           obj.user = self.request.user
       obj.save()

   class Meta:
        model = IgaiaContent 
```

现在更新您的视图，以便您使用新的 ModelForm

```
def create_page(request):
    if request.method == 'POST':
            form = IgaiaContentForm(request.POST) 
            if form.is_valid(): 
                    form.save()
                    return HttpResponseRedirect('/thanks/')
    else:
            form = IgaiaContentForm() 
    #... 
```

现在在您的 object_list 视图中，您可以执行以下操作 -

```
from django.shortcuts import render_to_response

def object_list(request):
    #....
    object_list = IgaiaContent.objects.filter(user=request.user)
    return render_to_response('object_list_template.html', {'object_list': object_list}) 
```

# sass - Compass/Susy 禁用自动清除修复？

> ID：14826709
> 
> 赞同：0
> 
> 时间：2013-02-12T06:25:41.300
> 
> 标签：sass, compass-sass, susy-compass

我是第一次使用 Compass/Susy。我在使用 @include 容器 mixin 时遇到问题。它会自动对其应用clearfix。这是不希望的。有没有办法关闭它，或者覆盖它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:22:43.513

是的，您可以 fork [susy 的来源](https://github.com/ericam/susy/)并更改此文件： [https ://github.com/ericam/susy/blob/master/sass/susy/_grid.scss](https://github.com/ericam/susy/blob/master/sass/susy/_grid.scss)

看起来 pie-clearfix 应用在这个 mixin 中：`@mixin apply-container`

可能有一种方法可以覆盖混合...或者只是制作另一个与这个类似的 - 然后调用它。

# regex - 在 Python 中选择大于之后的所有内容

> ID：14826711
> 
> 赞同：0
> 
> 时间：2013-02-12T06:26:01.453
> 
> 标签：regex, python-2.7

我有一个字符串

```
"Tyson Invitational 02/08/2013','#FFFFCC')""; ONMOUSEOUT=""kill()"" >6.54" 
```

我将如何使用正则表达式来选择右括号后的所有内容？又如何获得 6.54？

我试过了

```
\>(.*) 
```

但我不确定它是否正常工作。我用

```
m = re.search( '\>(.*)', row_out[5]) 
```

并得到

```
<_sre.SRE_Match object at 0x10b6105d0> 
```

不确定是什么问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:37:02.610

```
>>> import re
>>> str="""Tyson Invitational 02/08/2013','#FFFFCC')""; ONMOUSEOUT=""kill()"" >6.54"""
>>> re.search('\>(.*)',str)
<_sre.SRE_Match object at 0x7f0de9575558> 
```

和你以前一样。但是将搜索结果分配给一个变量，然后

```
>>> f=re.search('\>(.*)',str)
>>> f.groups()
('6.54',) 
```

# ruby - 使用 axlsx gem 向 Excel 工作表中的单元格添加注释

> ID：14826714
> 
> 赞同：3
> 
> 时间：2013-02-12T06:26:05.473
> 
> 标签：ruby, ruby-on-rails-3.1, axlsx

我正在使用 axlsx gem 创建 excel 表。我正在尝试生成一个包含标题的报告。我想为每个包含标题文本的单元格添加注释。我可以通过右键单击单元格并选择“插入评论”在 Libre office calc 中正常执行此操作。我想在尝试使用 ruby​​ 程序生成 excel 表时做同样的事情。

我的代码如下所示：

```
wb = xlsx_package.workbook
style_shout = wb.styles.add_style sz: 12, b: true, alignment: { horizontal: :center }

choices = ["Title", "First Name","Last Name", "Company","ID Number", "Email ID"]

# Build the Excel
wb.add_worksheet(name: "users_list") do |sheet|
  sheet.add_row choices.flatten, :style => style_shout
end 
```

axlsx 的文档显示了一个 add_comment 方法，用于向工作表添加注释。我想向特定单元格添加评论。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T06:55:53.940

您可以执行以下操作，并指定要添加注释的单元格引用。在下面的示例中，它设置为“A1”，您需要将其设置为要在其中呈现评论的单元格。（例如“B7”）

`sheet.add_comment :ref => 'A1', :author => 'Bob', :text => 'Yes We Can!'`

最好的

随机的

# c++ - 等效于 opencv 中的 Matlabs“查找”功能

ID：14826715

赞同：4

时间：2013-02-12T06:26:08.260

标签：c++, c, matlab, opencv, matrix

# performance - 运行 StatsD 时 node.js 100% cpu 利用率

> ID：14826720
> 
> 赞同：2
> 
> 时间：2013-02-12T06:26:35.233
> 
> 标签：performance, node.js, cpu-usage, metrics, statsd

我想通过我所做的一些压力测试来测试 StatsD 的性能。最终我发现当每秒有 80,000 个数据包时，Node.js 在我的环境中达到 100% 的 CPU 利用率。

我知道每秒 80,000 个事件是相当大量的事件，但我想知道是否有人知道 StatsD 对 Node.js 的限制是什么。什么是正常事件率？

另外，我可以做些什么来提高 Node.js 的性能，使其不会达到 100% 的 cpu 利用率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:31:13.890

根据 StatsD 贡献者的说法，经过测试和测量的指标速率在每秒 15,000 到 20,000 个指标之间。那已经足够好了，这就是我想要的。

您可以在我在 StatsD 的 github 项目中打开的问题中查看有关它的更多详细信息： [https ://github.com/etsy/statsd/issues/249](https://github.com/etsy/statsd/issues/249)

# android - 如何获得仅更改列表中选定项目颜色的视图

> ID：14826723
> 
> 赞同：1
> 
> 时间：2013-02-12T06:26:44.677
> 
> 标签：android, android-listview, selection

我正在开发一个应用程序，其中我有一个列表视图。在列表视图中，我只想更改所选项目的颜色。这意味着如果我点击第一个项目它应该改变颜色然后我再次点击第二个项目然后第一个项目的颜色将变得正常并且它会改变第二个项目的颜色。我在这里使用自定义列表视图。这里`position`是选中项，`CommonUtilities.getListPosition()`是全局定义的存储位置的方法。我可以在选择时更改颜色，但是当我单击第二个项目时，颜色不会更改为以前的颜色。

```
if (position == CommonUtilities.getListPosition()) {
    v.setBackgroundColor(Color.CYAN);
}else{
    v.setBackgroundColor(Color.WHITE);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:29:50.527

[ListView 项目背景通过自定义选择器](https://stackoverflow.com/questions/2562051/listview-item-background-via-custom-selector)。此链接将为您提供帮助。使用选择器。按下时和正常模式下指定不同的颜色。我希望这正是你要找的。

当您单击列表视图中的一行时，您可以在单击时更改列表视图的颜色。然后在发布时恢复正常状态。为什么单击第二行时要更改第一行颜色？列表视图中的每一行都保持正常状态，直到被单击为止。释放时恢复正常状态。上面的链接可以帮助您实现相同的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:36:55.020

在 ListView 的 xml 中应用 listSelector，如下所示：

```
android:listSelector="@drawable/list_selector" 
```

并在 drawable 文件夹中创建 list_selector.xml 文件，内容如下：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@color/row_not_selected" android:state_pressed="false" android:state_selected="false"/>
    <item android:drawable="@color/row_selected" android:state_pressed="true" android:state_selected="true"/>

</selector> 
```

`colors.xml`并在with names中创建两种颜色`row_not_selected, row_selected`。

就是这样。谢谢。如果还有其他需要，请告诉我。

# maven - 如何在 Eclipse 中使用已安装的 Maven 版本

> ID：14826724
> 
> 赞同：2
> 
> 时间：2013-02-12T06:26:49.857
> 
> 标签：maven, eclipse-plugin, m2e

我已经以 zip 格式下载了 Apache-Maven-3.0.4 并解压缩到名为 My Documents\Software 的目录中。我已将 Path 变量设置为指向 Maven\bin 目录。现在，当我从命令提示符处检查时，命令`mvn`仅在工作在 Maven\bin 目录中。

我想在 eclipse 中使用 Maven。我必须单独下载 eclipse m2e 插件还是可以使用已经安装的 Maven-3.0.4。如果我安装 eclipse m2e 插件，我在哪里可以找到已安装的 m2e 插件？

我应该将我的项目放在哪个目录中以`mvn package`命令工作？

这可能听起来很傻，但我是 Maven 新手。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T06:38:06.627

去`window->preference->maven->installation`。点击`Add`。在这里，您可以指定外部 Maven 安装，而不是内部。 ![在此处输入图像描述](../Images/4ad59f5dd6049227f90293994547400b.png)

但是你需要为此安装m2e插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:12:31.097

你用的是我的eclipse还是简单的eclipse？？？

当您右键单击项目以添加 Maven 功能时，有一个选项

看看这个教程...找到右键单击配置选项

[关联](http://wiki.eclipse.org/M2E-WTP/New_and_Noteworthy/0.16)

问候安舒尔·卡塔

# delphi - 从 TWebBrowser 获取 Cookie

> ID：14826727
> 
> 赞同：1
> 
> 时间：2013-02-12T06:27:09.537
> 
> 标签：delphi, indy, twebbrowser

尝试使用 indy 下载文件，（发布到 asp 保存 excel 响应）但遇到错误，使用 wireshark 请求缺少 cookie。

试图从 Twebbrowser 窗口中获取 cookie 并保存。

```
procedure TForm1.WebBrowser1DownloadComplete(Sender: TObject);
var
document: IHTMLDocument2;
cookies:tstringlist;
begin
cookies:=tstringlist.Create;
document := WebBrowser1.Document as IHTMLDocument2;
cookies.Add(document.cookie);
//do stuff with them
end; 
```

什么都不返回，从 twebbrowser 中提取 cookie（或 2）的最佳方法是什么，或者我缺少更好的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:47:57.730

`TWebBrowser`是 Internet Explorer 的包装器，它本身就是 WinInet 的包装器。Indy 不与 IE/WinInet 共享 cookie，因此您必须手动将 cookie 详细信息复制到 Indy 的`TIdCookieManager`组件中。但是，该`IHTMLDocument2.cookie`属性只是一个分隔的字符串`name=value`对（如果它返回任何内容，由于安全限制），它不包含足够的信息供 Indy 使用，例如 cookie 的源 URL 和目标域/路径，所以你有从其他地方获取该信息，例如通过解析存储在 Windows`Cookies`文件夹中的 IE cookie 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T10:46:02.353

由于恶意软件 (ab) 使用 JavaScript 和 document.cookie 属性的历史，网络服务器可能会在 HTTP 级别请求 cookie 仅通过 HTTP 返回，而不能通过 JavaScript 使用。

[https://www.owasp.org/index.php/HTTPOnly](https://www.owasp.org/index.php/HTTPOnly)

我不确定您的实例是否属于这种情况，但您提到您使用 Indy 来获取文件。如果您自己将其中的数据放入 WebBrowser1，那么 cookie 数据不会被复制是有道理的，因为它是 HTTP 事务的属性。请参阅有关 cookie 的 Indy 文档：

[http://www.indyproject.org/docsite/html/TIdHTTP_CookieManager.html](http://www.indyproject.org/docsite/html/TIdHTTP_CookieManager.html)

# c++ - C++ fstream 读写同一个文件

> ID：14826732
> 
> 赞同：1
> 
> 时间：2013-02-12T06:27:36.543
> 
> 标签：c++, fstream

这是一个简单的程序，它**在文件末尾写入一个换行符，**其中包含每行开始的相对位置。

代码：

```
#include <iostream>
#include <fstream>
#include <string>
#include <cstdlib>
using namespace std;

int main() {
    ofstream fout("copyOut");
    fout << "abcd" << '\n' << "efg" << '\n' << "hi" << '\n' << "j" << endl;
    fout.close();
    cout << "======================   random access to a stream" << endl;
    // open for input and output and preposition file pointers to end-of-file
    // file mode argument see Chapter 8.4
    fstream inOut("copyOut", fstream::ate | fstream::in | fstream::out);
    if (!inOut) {
        cerr << "Unable to open file!" << endl;
        exit(EXIT_FAILURE); // see Section 6.3.2
    }
    // inOut is opened in ate mode, so it starts out positioned at the end
    auto end_mark = inOut.tellg();  // remember original end-of-file position
    inOut.seekg(0, fstream::beg);       // reposition to the start of the file
    size_t cnt = 0;                     // accumulator for the byte count
    string line;                        // hold each line of input
    // while we haven't hit an error and are still reading the orginal data
    // and can get another line of input
    while (inOut && inOut.tellg() != end_mark && getline(inOut, line)) {
        cnt += line.size() + 1;         // add 1 to account for the newline
        auto mark = inOut.tellg();      // remember the read position
        inOut.seekp(0, fstream::end);   // set the write marker to the end
        inOut << cnt;                   // write the accumulated length
        // print a separator if this is not the last line
        if (mark != end_mark)
            inOut << " ";
        inOut.seekg(mark);              // restore the read mark
    }
    inOut.seekp(0, fstream::end);       // seek to the end
    inOut << "\n";                      // write a newline at end-of-file
    inOut.close();
    return 0;
} 
```

而程序执行后的“copyOut”文件内容为：

```
abcd
efg
hi
j
5 6 7 8

(there is a blank line at the end of the file) 
```

然而，预期的内容是：

```
abcd
efg
hi
j
5 9 12 14

(there is a blank line at the end of the file) 
```

似乎`getline`in`while condition`首先读`abcd`入`line`然后将一系列空字符串读入`line`.

请帮忙。

**[编辑]**

环境：Win7、Eclipse for C++、Mingw(g++ version 4.7.2)

# java - Java Web 开发初学者

> ID：14826736
> 
> 赞同：-2
> 
> 时间：2013-02-12T06:27:42.200
> 
> 标签：java, web, applet

我最近用 java 做了很多，我想开始用它做一些 web 开发。 ，然后在里面运行应用程序。有点像你在这里可以找到的：http://minecraft.net/play [-](http://minecraft.net/play)这只是一个运行 java 应用程序的窗口。我想知道是否有人可以帮助我开始.. 我已经知道一些 Java，就像我说的。我一直在使用 netbeans 来尝试解决这一切。但到目前为止，我不知道如何让那种类型的窗口显示出来。我可以获得基本的 html 输出，但我想要例如，在网页内的框架中运行 myClass.class..

myClass.class 可能有这样的代码：

```
public class myClass {
    public static void main(String[] args){
        public String s = "I am foobar.";
        System.out.println(s);
    }
} 
```

我希望输出是那个 Java 框架，里面有简单的输出“我是 foobar”。

再次感谢您帮助我开始..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:32:25.030

只需创建一个 java 框架并向其中添加内容。

刚开始，

[http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-JFrame.html](http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-JFrame.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:36:24.783

您正在寻找小程序。

从这里开始：http: [//docs.oracle.com/javase/tutorial/deployment/applet/index.html](http://docs.oracle.com/javase/tutorial/deployment/applet/index.html)

# phpmyadmin - 如何在 ubuntu 的 apache2 服务器中使用分发存档（zip 或 tar）安装 phpmyadmin？

> ID：14826740
> 
> 赞同：-1
> 
> 时间：2013-02-12T06:28:03.307
> 
> 标签：phpmyadmin, apache2

使用 Debian 软件包是在 apache2 服务器中安装 phpmyadmin 的最简单方法。但是是否有任何有用的资源可以在 ubuntu 中使用 tar 或 zip 存档安装 phpmyadmin。到目前为止，我已经下载了 phpmyadmin 的 zip 存档并将内容复制到 /var/www目录。有什么资源可以帮助我吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-12T16:41:24.983

始终阅读文档：[http ://wiki.phpmyadmin.net/pma/Quick_Install](http://wiki.phpmyadmin.net/pma/Quick_Install)

# asp-classic - ASP URLDecode - 不正确的转换

> ID：14826743
> 
> 赞同：1
> 
> 时间：2013-02-12T06:28:06.443
> 
> 标签：asp-classic

我有一个网站，谷歌在我的网站上拍摄了一些链接并通过以下 URL 发送

[http://www.globalpropertyonline.net/test.asp?town=gand%EDa](http://www.globalpropertyonline.net/test.asp?town=gand%EDa)

我有一个我在网上找到的 URLDecode 函数来解码 %ED

但是，这似乎不是以正确的方式工作。

%ED 应该是这样的：í

所以当我解码它时，这个词应该是 gandía

但相反，我得到了以下词：gandï¿½a

在 google 获取链接的页面上，它正确显示为 gandía，但它在网站管理员工具中提示我以下链接有错误 500，这是因为当我尝试使用此名称并将其发送到 MYSQL 查询时它崩溃了错误 500 但如果我有 gandía 那么它就起作用了！

所以，我的主要问题是我将 %ED 作为 URLEncode 发送，我想在将其发送到我的数据库查询之前对其进行解码。

在我的 ASP 页面中，我使用 UTF-8 编码如下。

```
<%@ CodePage=65001 Language="VBScript"%> 
<%
Response.CodePage = 65001
Response.CharSet = "utf-8" 
```

这是我用来解码它的代码，但如果得到 gandía，我会得到这个：gandï¿½a

任何帮助将不胜感激

```
<%@ CodePage=65001 Language="VBScript"%> 
<%
Response.CodePage = 65001
Response.CharSet = "utf-8" 

MyTown = Request("town")

response.write URLDecode(MyTown)

    Function URLDecode(str) 
        str = Replace(str, "+", " ") 
        For i = 1 To Len(str) 
            sT = Mid(str, i, 1) 
            If sT = "%" Then 
                If i+2 < Len(str) Then 
                    sR = sR & _ 
                        Chr(CLng("&H" & Mid(str, i+1, 2))) 
                    i = i+2 
                End If 
            Else 
                sR = sR & sT 
            End If 
        Next 
        URLDecode = sR 
    End Function

%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:11:15.183

看起来您尚未将页面定义为 UTF-8 *client-side*。你可以通过在里面添加这个`<head></head>`：

`<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />`

# perl - 催化剂作用接受 0-n 参数

> ID：14826746
> 
> 赞同：2
> 
> 时间：2013-02-12T06:28:14.720
> 
> 标签：perl, catalyst, args

在[Catalyst](http://www.catalystframework.org/)中有没有办法指定 sub 接受 0-n 参数，比如 0-1？所以一个动作可能是这样的：

```
sub add :Local :Args(#between 0 and 1) { 
    my ($self, $c) = @_;
    #catalyst code
} 
```

我知道这样的事情可能可以通过正则表达式以某种方式解决，但我想知道是否有办法通过使用 Args 动作修饰符指定它来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:40:14.037

除非您从该操作链接另一个操作，否则您可以`:Args`完全放弃并测试自己是否提供了参数。从[文档](http://search.cpan.org/~hkclark/Catalyst-Manual-5.9006/lib/Catalyst/Manual/Intro.pod#Action_types)中：

> No :Args 完全意味着采用任意数量的参数。

# linux - svn 导出除某些目录外的所有目录

> ID：14826748
> 
> 赞同：5
> 
> 时间：2013-02-12T06:28:20.013
> 
> 标签：linux, bash, svn, export

我正在将存储库的 svn 导出到临时位置，然后在将代码库复制到部署目录之前删除一些目录。

有没有办法在“导出”命令期间“排除”目录列表？

这样做的原因是导出更快（不需要获取我在此部署中删除的内容）tail，因此部署脚本更快。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T06:55:37.940

您可以使用 of 的概念`Sparse Directories Exclusion`来实现这一点。有关它的详细信息，您可以在[此处](http://subversion.apache.org/docs/release-notes/1.6.html#sparse-directory-exclusion)阅读。

这篇[博](http://blogs.collab.net/subversion/sparse-directories-now-with-exclusion)文也解释了上述概念。

> 假设我不再关心我的项目工作副本的某个目录中发生了什么。也许我不再关心 Subversion 项目的网站了。好吧，有了这个新的排除功能，我可以告诉 Subversion 删除那个目录：

```
$ cd ~/projects/subversion/trunk 
$ svn update --set-depth=exclude www
D         www 
$ ls www ls: cannot access www: No such file or directory 
$ 
```

> 木已成舟。当我将来更新我的工作副本时，我将不会收到针对该 www 目录的任何更改。如果我后来决定再次关心该目录，我可以再次“重新订阅”它：
> 
> ```
> $ svn update --set-depth=infinity www 
> A    www 
> A    www/links.html 
> A    www/testing-goals.html 
> … 
> A    www/tigris-permissions.html 
> A    www/webdav-usage.html Updated to revision 36292\. 
> $ 
> ```

# php - 需要使用 foreach 的逻辑

> ID：14826753
> 
> 赞同：0
> 
> 时间：2013-02-12T06:28:45.760
> 
> 标签：php, logic, weblogic

我有一个下表显示

```
Task No.    Person            Company           Project Task               Date Tracked Total Time  Comments
14.1    vaish, arpit          ABC-TecHolding    Relaunch Websitnalysis     2013-02-12   19:21:03    
14.2    vaish, arpit          Sugarion          New Opensource Server      2013-02-12   19:21:03    
14.6    vaish, arpit          Sugarion          New Opensource Server      2013-02-12   19:21:03    
5.26    Projectmanager, Paul  ABC-Tec Holding   Relaunch Website           2010-03-13   03:40:16    
5.27    Projectmanager, Paul  ABC-Tec Holding   Relaunch Website           2010-03-12   03:40:16    
5.27    Projectmanager, Paul  ABC-Tec Holding   Relaunch Website           2010-03-13   03:40:16    
8.2     Worker, Willi         Customers ACME    Hosting Data transfer      2010-03-13   00:21:18    
14.2    Worker, Willi         Sugarion          New Opensource Server      2013-02-06   00:21:18    fyhbvghjukjjkhhlhh uuiuijujj jookljh 
```

这是我的 foreach 循环

```
foreach($result123 as $key=>$task) {
            $time=$this->addtime($task['name'],$range['start'],$range['end']); //to calculate total time per user in time range

            $diff       = $task['estimated']+$task['tracked'];
            $diffSign   = $diff > 0 ? '-' : '+';

            $table->addRow(array(
                'number'    => $task['tasknumber'].' '.$task['id_project'] ,
                'person'=> $task['name'],
                'customer'      => $task['company'],
                'project'       => $task['project'],
                'task'      => $task['task'],
                'date'      => $task['date_tracked'],
                'tracked'   => $task['workload_tracked'],
                'Total_Time'        => $time,
                'comment'=>$task['comment']
            ));

        } 
```

总时间列显示每人跟踪的总时间。我希望每个人只显示一次总时间，而不是每行一次又一次地显示。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:40:57.813

**我就是这样做的（伪代码）：**

*   设置一组“已检查”人员
*   Foreach 记录：
*   人在“已检查”数组中吗？
*   如果是，请继续。
*   如果否，则显示总数并将人员添加到“已检查”人员。

* * *

**在 PHP 中：（**如果我做对了）

```
 $checked = array();

  foreach($result123 as $key=>&$task) {
        $time=$this->addtime($task['name'],$range['start'],$range['end']); //to calculate total time per user in time range

        $diff       = $task['estimated']+$task['tracked'];
        $diffSign   = $diff > 0 ? '-' : '+';

        if (in_array($task['name'],$checked) $time =0;
        else {
              $checked[] = $task['name'];
        }

        $table->addRow(array(
            'number'    => $task['tasknumber'].' '.$task['id_project'] ,
            'person'=> $task['name'],
            'customer'      => $task['company'],
            'project'       => $task['project'],
            'task'      => $task['task'],
            'date'      => $task['date_tracked'],
            'tracked'   => $task['workload_tracked'],
            'Total_Time'        => $time,
            'comment'=>$task['comment']
        ));

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:46:57.170

```
$name = '';

foreach($result123 as $key=>$task) {

if ($name == $task['name']) {
$time = '';
}
elseif ($name != $task['name']) {
$time=$this->addtime($task['name'],$range['start'],$range['end']); 
$name = $task['name'];
}

$diff= $task['estimated']+$task['tracked'];
$diffSign= $diff > 0 ? '-' : '+';

$table->addRow(array(
'number'    => $task['tasknumber'].' '.$task['id_project'] ,
'person'=> $task['name'],
'customer'      => $task['company'],
'project'       => $task['project'],
'task'      => $task['task'],
'date'      => $task['date_tracked'],
'tracked'   => $task['workload_tracked'],
'Total_Time'        => $time,
'comment'=>$task['comment']
));

} 
```

我认为应该这样做。

# jsf-2 - 仅在调用 tabview 更改侦听器后如何将 tabview 的活动索引设置为零

> ID：14826756
> 
> 赞同：0
> 
> 时间：2013-02-12T06:29:07.457
> 
> 标签：jsf-2, primefaces

```
 <p:tabView widgetVar="addSystemWizard" style="width:980px;height:400px;" dynamic="true"  activeIndex="#{testBean.messagesTab.activeIndex}" >  

          <p:ajax event="tabChange" listener="#{testBean.onTabChange}" update=":tabview:sysMsg"/>  

            <p:tab id="generalInfo" title="1\. General Information">  `enter code here`

private TabView messagesTab;

    public TabView getMessagesTab () {
        if(messagesTab==null){
            messagesTab= new TabView();
        }
        return messagesTab;
    }

    public void setMessagesTab(TabView messagesTab ) {
        this.messagesTab = messagesTab;
    }

    public void onTabChange(TabChangeEvent event){
        if(test.getName()==null || test.getName().equals("")){

            FacesMessage msg = new FacesMessage(FacesMessage.SEVERITY_ERROR, event.getTab().getId() ,"please enter all required fields");  

            FacesContext.getCurrentInstance().addMessage(null, msg);  
            int idx=0;
            messagesTab= (TabView) event.getComponent();
            messagesTab.setActiveIndex(idx);
        }

    } 
```

我在 tabview 上调用 tabchange 事件，我的页面上有 name 属性，如果该属性为空白或 null 我必须留在同一个选项卡上，否则我必须转到下一个选项卡，基本上执行验证.. 我已经发布了上面代码来做到这一点，但它不工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:01:31.393

我发现这篇[博客文章](http://ovaraksin.blogspot.de/2013/02/how-to-prevent-tab-changing-in.html "博文")描述了如何使用 a`p:remoteCommand`和 javascript 来实现这一点。

> 尝试了上述问题的各种方法（使用 p:ajax event="tabChange" 等），我想出了一个干净且运行良好的解决方案。下面的代码将 PrimeFaces TabView 开启为“向导模式”。这意味着，当用户尝试切换选项卡并在当前选项卡中出现验证错误时，他/她会停留在同一选项卡上。主要思想是使用 p:remoteCommand 来延迟决定选项卡切换。如果不存在验证错误，则通过 TabView 小部件的方法 select 进行切换。

XHTML：

```
<p:tabView ... widgetVar="tv_widget" styleClass="tv_selector">
    ...
</p:tabView>

<p:remoteCommand name="tv_remoteCommand" process="@(.tv_selector)" update="@(.tv_selector)" global="false"
        oncomplete="handleTabChangeTV(xhr, status, args, tv_widget)"/>

<h:panelGroup id="tv_script" styleClass="tv_selector">
    <script type="text/javascript">
          $(function(){
              bindOnClickTV(tv_remoteCommand, tv_widget);
          });
    </script>
</h:panelGroup> 
```

Javascript：

```
function bindOnClickTV(rc, widget) {
    // unbind PrimeFaces click handler and bind our own
    widget.jq.find('.ui-tabs-nav > li').unbind('click.tabview').
        off('click.custom-tabview').on('click.custom-tabview', function (e) {
            var element = $(this);

            if ($(e.target).is(':not(.ui-icon-close)')) {
                var index = element.index();

                if (!element.hasClass('ui-state-disabled') && index != widget.cfg.selected) {
                    // buffer clicked tab
                    widget.clickedTab = element.index();

                    // call remote command
                    rc();
                }
            }

            e.preventDefault();
        });
}

function handleTabChangeTV(xhr, status, args, widget) {
    if (!args.validationFailed) {
        widget.select(widget.clickedTab);
    }
} 
```

# php - 如何在不使用提交按钮的情况下提交表单

> ID：14826757
> 
> 赞同：4
> 
> 时间：2013-02-12T06:29:33.317
> 
> 标签：php, javascript

我是**JavaScript 和 php**的新手。

如何在不使用提交按钮的情况下提交表单？

如果可能，不使用锚标签。

请指导我如何完成此任务。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-12T06:32:44.157

只需使用以下代码

```
<form id="jsform" action="whatever you want">
// input fields
</form>

<script type="text/javascript">
  document.getElementById('jsform').submit();
</script> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-12T06:32:37.103

您可以使用 javascript`submit()`函数提交它

```
<script type="text/javascript">
function submitform()
{
document.forms["myform"].submit();
alert("Value is sumitted");
}
</script>

<form id="myform" action="submit.php" method="post">
Search: <input type="text" name="query">
<a href="javascript: submitform()">Submit</a>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T06:39:49.763

我认为您可以将提交按钮的可见性设置为“隐藏”并使用以下 javascript。

```
<script type="text/javascript">
// Using jQuery.

$(function() {
$('form').each(function() {
    $('input').keypress(function(e) {
        // Enter pressed?
        if(e.which == 10 || e.which == 13) {
            this.form.submit();
        }
    });

    $('input[type=submit]').hide();
   });
});
</script>

<form name="formName" method="post">
   <input name="someName" type="text" /><br />
   <input name="somePass" type="password" />
   <input type="submit" style="visibility: hidden;" />
</form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T06:52:34.760

在 javascript 中，它必须使用在自定义按钮或锚点中实现的表单**submit()方法。**

在 PHP 中，您可以使用**curl**库（客户端 URL 库）。

# c - 使用 char* 的分段错误（核心转储）

> ID：14826763
> 
> 赞同：1
> 
> 时间：2013-02-12T06:29:51.923
> 
> 标签：c

我是 C 编程新手。我在
尝试打印字符串时遇到分段错误（核心转储）。请帮忙。

```
#include <stdio.h>
#include <string.h>
int main()
{
  char *ptr;
  strcpy(ptr, "mystring");
  printf( "%s\n", ptr);
 return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T06:30:53.753

您还没有为指针指向的内存分配任何内存。

```
char array[MAX_LEN + 1];

char *ptr = array;

strncpy(ptr, "Cadence", MAX_LEN);
ptr[MAX_LEN] = '\0';

printf( "%s\n", ptr); 
```

请注意，这`strncpy()` *可能是*一种更安全的复制字符串的方法，因为我们指定了要复制的最大字符数，这使得超出字符串和“乱写”内存变得更加困难。

**更新**以回应评论：我已经更改了上面的代码以使用更安全的模式。您可能还想调查`strlcpy()`（非标准库）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:38:46.943

当您声明 时`char *ptr;`，您为指向 char 的指针分配内存。但是如果你想在 char 里面放一个字符串，它就会溢出。

因此，您必须为您的字符串分配内存：

字符 str[1024]; // 这是您可以放入 str 的最大字符串长度。

此外，不要忘记`\0`终止每个字符串且大小为一个字符的空终止符 ( )

# wpf - 使用 MVVM 显示新窗口并获取更新数据

> ID：14826765
> 
> 赞同：3
> 
> 时间：2013-02-12T06:30:22.010
> 
> 标签：wpf, mvvm, interface, modal-dialog

我正在开发一个 WPF MVVM 应用程序。我在数据网格中显示一些数据。我有两个按钮来添加和编辑选定的记录。我在 ViewModel 中有数据，我必须显示另一个窗口（视图）并确保 ViewModels 不应该有关于视图的信息。我应该在哪里创建它的视图和视图模型？如何取回数据并更新数据网格？如何在 MVVM 中实现这一点？我们还没有决定使用任何框架，所以我必须创建自己的界面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:16:21.767

*注意：这最终是一个很长的答案 - 如果有什么不清楚的地方请问我*

对话窗口的实现在 MVVM 设计中是一个有争议的问题，不同的人使用不同的方法。

和你一样，我决定不使用任何框架并手动实现大多数东西。当谈到对话窗口时，我选择通过从我的 ViewModel 内部启动对话窗口来务实地实现 MVVM。此外，我允许每个 Dialog ViewModel 引用它所显示的 Window，因此它可以在适当的时候关闭它（详情如下）。这打破了一些严格的 MVVM “规则”，但它完成了工作。

这样做的主要缺点是，如果您正在测试通过对话框的内容，它可能会破坏单元测试。但是，您可以走很长一段路而不会遇到这个问题，而且它还没有困扰我。

我已经建立了一些可以轻松扩展的对话框 ViewModel 库。在这里发布的代码太多了，但我会向您展示重点。

**对话框的基本 ViewModel**

我的每个对话框窗口都有一个继承自的 ViewModel `DialogViewModelBase`，这与我的常规类似`ViewModelBase`，因为它提供对`INotifyPropertyChanged`等的支持。有趣的部分是这个公共方法，我从任何地方调用它来启动对话框：

```
/// <summary>
/// Creates window instance for this dialog viewmodel and displays it, getting the dialog result.
/// </summary>
public void ShowDialogWindow()
{
    // This is a property of the DialogViewModelBase class - thus, each DialogViewModel holds a reference to its own DialogWindow:
    this.DialogWindow = new Dialogs.Views.DialogWindow();
    // Tell the DialogWindow to display this ViewModel:
    this.DialogWindow.DataContext = this;
    // Launch the Window, using a method of the Window baseclass, that only returns when the window is closed:
    this.DialogWindow.ShowDialog();
} 
```

通过上述方法启动的窗口将在`Window.DialogResult`设置其属性时关闭。这就是为什么`DialogWindow`是`DialogViewModelBase`类的属性 - 当子类化对话框`ViewModel`想要关闭对话框窗口时，它只是设置结果：

```
protected void CloseDialogWithResult(bool dialogWindowResult)
{
    // Setting this property automatically closes the dialog window:
    this.DialogWindow.DialogResult = dialogWindowResult;
} 
```

**对话框视图的宿主窗口**

该方法实例化的`Dialogs.Views.DialogWindow`类在 XAML 中定义，是. 它有两个重要的特点。首先是它的主要内容元素只是一个绑定到当前上下文的元素。这允许我为 的不同子类定义不同的，并且将根据上下文的类型托管相应的：`ShowDialogWindow``Window``ContentControl``Views``DialogViewModelBase``DialogWindow``View`

```
<ContentControl Content="{Binding}" /> <!-- In reality this is inside a border etc but its simplified here for demonstration --> 
```

XAML的第二个重要特性`DialogWindow`是它定义了哪个对话框`Views`与哪个对话框一起使用`ViewModels`。这是一个示例：

```
<Window.Resources>
    <!-- DEFAULT ViewModel-View TEMPLATES -->

    <DataTemplate DataType="{x:Type dialogs:YesNoMessageBoxDialogViewModel}">
        <views:MessageBoxView />
    </DataTemplate>

    <DataTemplate DataType="{x:Type dialogs:ErrorDialogViewModel}">
        <views:ErrorDialogView/>            
    </DataTemplate>

</Window.Resources> 
```

所有这一切的作用是，我可以将对话框定义为子类`DialogViewModelBase`并为每个对话框实现一个`View`，然后告诉`DialogWindow`它必须`View`为`ContentControl`哪个对话框显示`ViewModel`。

**启动对话框并获得结果**

下面是我的一个应用程序的示例，我`ViewModels`在其中启动了一个对话框窗口，允许用户选择要创建的资产类型：

```
public void CreateNewAsset()
{
    // Instantiate desired Dialog ViewModel:
    Dialogs.NewAssetTypeSelectionDialogViewModel dialog = new Dialogs.NewAssetTypeSelectionDialogViewModel();

    // Launch Dialog by calling method on Dialog base class:
    dialog.ShowDialogWindow();

    // Execution will halt here until the Dialog window closes...

    // The user's selection is stored in a property on the dialog ViewModel, and can now be retrieved:
    CalculatorBase.AssetTypeEnum newAssetType = dialog.AssetType;

    switch (newAssetType)
    {
        // Do stuff based on user's selection...
    }
} 
```

*PS：我真的应该写一篇关于这个的博客文章——当我这样做时，我会在这里发布链接，因为博客文章可能会有更完整的代码示例。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T08:08:56.287

这取决于您如何处理数据。我将假设只有当用户单击保存之类的东西时才能接受在弹出窗口中所做的更改，否则它们应该被丢弃。因此，首先，我建议使用 MVC 方法作为控制器非常适合此类任务。您在其中构建视图模型，为它们分配视图并显示视图。VM只是保存数据和命令，命令执行方法保存在控制器中。换句话说，你有管理你的虚拟机和视图的单例类。您应该查看[Prism](http://compositewpf.codeplex.com/)框架。它提供了很棒的东西，例如视图区域，您可以在其中注入不同的用户控件在运行时、命令和 MVC 分层以及 IOC 和 DI 模式开箱即用。

# macos - 如何让 ZSH 使用最新的 git 版本？

> ID：14826768
> 
> 赞同：2
> 
> 时间：2013-02-12T06:30:35.280
> 
> 标签：macos, git, path, zsh

我在 OS X 上使用 ZSH 和 oh-my-zsh。

今天我用hombrew更新到最新版本的git（1.8.something）。

但是，如果我运行

```
➜  ~  git --version
git version 1.7.10.2 (Apple Git-33) 
```

我看到仍然使用旧版本。在 bash 上一切正常，并调用了最新版本的 git。

由于我是 ZSH 的新手，任何关于如何设置 ZSH 以使用“新”git 的建议都非常感谢！

最好的，

托比

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T06:35:42.353

这意味着您的`$PATH`变量未设置为包含正确的`git`（以及所有其他自制软件安装）。

尝试`echo $PATH`同时使用 bash 和 zsh。您应该至少看到一个区别：您安装自制软件的目录，可能是`/usr/local/bin`. （它要么不在其中，要么在`/usr/bin`Apple 提供的二进制文件所在的位置之后。）

要修复它，请添加一行

```
export PATH=/usr/local/bin:$PATH 
```

到你的`~/.zshenv`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T06:35:09.600

如果 PATH 修改没有立即生效，您需要意识到使用 zsh 您需要键入“rehash”以便 zsh 识别路径中有新的可执行文件。或者只是注销并重新登录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T06:35:33.087

比较 和 中的`which git`（和`echo "$PATH"`）`bash`的输出`zsh`。

包含最新的目录`git`可能不存在于`$PATH`变量 for 中`zsh`，但它存在于`bash`. 这可能是由于`$PATH`在您的`~/.bashrc`和/或`~/.bash_profile`文件中添加的项目引起的，这些项目`zsh`在启动时没有来源。如果是这样，请将相同的作业添加`PATH`到您的`~/.zshrc`

# android - android中的联系人表中的字段是什么？

> ID：14826769
> 
> 赞同：0
> 
> 时间：2013-02-12T06:30:36.390
> 
> 标签：android

我也想知道 RawContacts 和 Data 表结构？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:08:50.763

```
public class ContactActivity extends Activity implements OnClickListener {

  ContactUtils contactUtils;
  private EditText phoneEditText, nameEditText;
  private Button saveButton;
  private Spinner mContactPhoneTypeSpinner;
  private ArrayList<Integer> mContactPhoneTypes;
  private String phoneType;

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    phoneEditText = (EditText) findViewById(R.id.phoneNumberEditText);
    nameEditText = (EditText) findViewById(R.id.nameEditText);
    mContactPhoneTypeSpinner = (Spinner) findViewById(R.id.contactPhoneTypeSpinner);
    mContactPhoneTypes = new ArrayList<Integer>();
    mContactPhoneTypes
        .add(ContactsContract.CommonDataKinds.Phone.TYPE_HOME);
    mContactPhoneTypes
        .add(ContactsContract.CommonDataKinds.Phone.TYPE_WORK);
    mContactPhoneTypes
        .add(ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE);
    mContactPhoneTypes
        .add(ContactsContract.CommonDataKinds.Phone.TYPE_OTHER);

    // Populate list of account types for phone
    ArrayAdapter<String> adapter;
    adapter = new ArrayAdapter<String>(this,
        android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    Iterator<Integer> iter;
    iter = mContactPhoneTypes.iterator();
    while (iter.hasNext()) {
      adapter.add(ContactsContract.CommonDataKinds.Phone.getTypeLabel(
          this.getResources(), iter.next(),
          getString(R.string.undefinedTypeLabel)).toString()
      );
    }
    mContactPhoneTypeSpinner.setAdapter(adapter);
    mContactPhoneTypeSpinner.setPrompt(getString(R.string.selectLabel));

    mContactPhoneTypeSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {

      @Override
      public void onItemSelected(AdapterView<?> arg0, View arg1,
          int arg2, long arg3) {
        // TODO Auto-generated method stub
        phoneType = "" + mContactPhoneTypes.get(arg2);
      }

      @Override
      public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub
      }
    });

    saveButton = (Button) findViewById(R.id.saveButton);
    saveButton.setOnClickListener(this);
  }

  @Override
  public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.saveButton:
      String phoneNumber = phoneEditText.getText().toString().trim();
      String name = nameEditText.getText().toString().trim();
      if (phoneNumber.length() < 0) {
        Toast.makeText(this, getString(R.string.phoneNumberValidation),
            Toast.LENGTH_SHORT).show();
      } else if (name.length() < 0) {
        Toast.makeText(this, getString(R.string.nameValidation),
            Toast.LENGTH_SHORT).show();
      } else {
        contactUtils = new ContactUtils(this, phoneNumber, name,
            phoneType);
      }
      break;
    default:
      break;
    }
  }

  @Override
  protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
  }
} 
```

# terminal - 如何在终端中停止/取消“git log”命令？

> ID：14826770
> 
> 赞同：19
> 
> 时间：2013-02-12T06:30:46.400
> 
> 标签：terminal, command

在终端中，我运行了这个命令`git log`。它显示了一个日志列表，但似乎因为它很长，终端没有显示所有内容。在日志下方 `:`，当我按下回车键时，我可以看到更多日志。

如何终止命令，并显示运行另一个命令的提示。

根据我的搜索，我意识到`ctrl+c`应该使用它，但它对我不起作用。我试图进入`!`，它停止了该任务，我返回到`$`. 但我不确定这是正确的方式，因为当被击中时`!`，从 ./a/b/c 将我移动到 ./a/b/

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-12T06:33:00.177

您可以按该键`q`（对于*quit*），它应该带您到提示符。

请看这个[链接](https://stackoverflow.com/questions/1696433/how-to-exit-a-git-status-list-in-terminal)。

# bitmap - 为图像创建一个通用类是否明智？

> ID：14826772
> 
> 赞同：2
> 
> 时间：2013-02-12T06:30:53.980
> 
> 标签：bitmap, xamarin.ios, uiimage, xamarin.android, android-drawable

我对 Android 的 MonoTouch / Mono 有点陌生。我在 iOS 和 Android 应用程序的平台上工作，并且正在将我们的本机代码移植到 C#。

我们的应用程序显示图像。然而，在 Mono 中没有通用的图像类型。在 Android 的 Mono 中，一个选项正在使用`Bitmap`（不能被子类化）或者`BitmapDrawable`，在 iOS 中有`UIImage`.

为了使应用程序中的一些代码在不同平台上更加一致，在我看来，创建一个处理图像的通用类是个好主意。该类基本上是相应“本机”类的外观。我希望此类具有的功能之一是从字节数组创建图像对象。目前我的代码如下所示（并且工作正常）：

```
using System;

#if ANDROID
using Android.Graphics;
using Android.Graphics.Drawables;
#else
using MonoTouch.UIKit;
using MonoTouch.Foundation;
#endif

namespace OurCompany.Core
{
#if ANDROID
    public class Image : BitmapDrawable
    {
        public Image (byte[] bytes) : base(BitmapFactory.DecodeByteArray (bytes, 0, bytes.Length))
        {

        }
    }   
#else
    public class Image : UIImage
    {
        public Image (byte[] bytes) : base(NSData.FromArray(bytes), 1)
        {

        }
    }
#endif
} 
```

现在我想知道，使用此设置可能会遇到任何问题吗？我想知道这样的设置是否会出现任何性能、缓存或其他问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:27:41.707

是的，这是有道理的。

虽然我个人更喜欢使用接口而不是使用#if 的方法——我发现接口在重构、测试等方面效果更好——并且当您移植到新平台（mac、winrt、wp 等）时，该方法可以更好地扩展

只要您仔细设计您的界面，那么您就不应该遇到任何特定的性能问题 - 但是如果您发现您的代码开始在像素阵列级别上工作，那么您可能会错过原生优化机会。

有关类似领域的一些想法 - 绘图 - 请参阅 Frank 在[https://github.com/praeclarum/CrossGraphics上的工作](https://github.com/praeclarum/CrossGraphics)

# linq - 是否有 Linq to OQL 提供程序？

> ID：14826774
> 
> 赞同：2
> 
> 时间：2013-02-12T06:31:00.100
> 
> 标签：linq, oql

我想将 Linq 查询转换为[OQL](http://en.wikipedia.org/wiki/Object_Query_Language)。

是否有 Linq to OQL 提供程序？

# javascript - 引导日期选择器在 IE8 中没有响应

> ID：14826783
> 
> 赞同：2
> 
> 时间：2013-02-12T06:31:30.540
> 
> 标签：javascript, jquery, twitter-bootstrap, datepicker

我有类似的问题，如[Bootstrap Datepicker Not Working](https://stackoverflow.com/questions/13058725/bootstrap-datepicker-not-working)。我遵循将 datepicker 代码放入 document.ready() 的解决方案

`$(function(){ $('#datepicker').datepicker(); });`

但是，仍然在单击 datepicker 图标时，它显示“停止脚本运行...”弹出。我使用 jquery 1.8.3 版本和 bootstrap 版本 2.1.1。它在 Jquery 版本 1.8.1 中工作正常。有什么变化需要为 jquery 版本 1.8.3 完成

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T18:27:24.513

这是 2012 年 9 月原始版本中的一个错误。编码人员已经分叉了该项目并进行了修复/改进 - 其中之一就是这个 IE 7/8 错误......

[https://github.com/eternicode/bootstrap-datepicker/issues/144](https://github.com/eternicode/bootstrap-datepicker/issues/144)

基本上，下载最新的 Master 构建内容，你就可以开始了。

# facebook - Facebook 通过应用程序 > 应用程序名称 > 推广 > 自定义广告的 iOS 提要停止加载

> ID：14826784
> 
> 赞同：1
> 
> 时间：2013-02-12T06:31:34.703
> 
> 标签：facebook

尝试在 Facebook 中为 iOS 应用程序创建广告时，我们无法继续点击“自定义广告”按钮的阶段？

一个示例广告出现，显示了我们为 Facebook 应用创建的 800x100 横幅，但这不适合 Facebook iOS 广告，因此我们选择“自定义广告”按钮，然后弹出“正在加载...”对话框。但它只是挂在那里，并没有进入流程的“自定义广告”部分。

是 Facebook 服务器这么忙，还是有其他问题？我们偶尔通过多个浏览器尝试过这个。

# php - PHP 运行 BASH 脚本以在本地添加打印机 (OS X)

> ID：14826785
> 
> 赞同：0
> 
> 时间：2013-02-12T06:31:37.723
> 
> 标签：php, macos, bash

提前感谢您的帮助。我正在尝试为我的组织建立一个公共网站，其中包含组织的所有打印机和随附的配置（打印机名称、位置详细信息、SMB 路径和 OS X 已经提供的要使用的驱动程序）。用户将从该网站搜索打印机并通过单击链接将打印机添加/安装到他们的 OS X 工作站。

我正在考虑建立一个 PHP 站点和 BASH 脚本促进的打印机安装操作。以下是代码：

这是webSite.php

```
<?PHP
 exec("bash ./InstallPrinter.sh");
?> 
```

这是 InstallPrinter.sh BASH 脚本

```
#!/bin/sh
lpadmin -p ToshibaPrinterName -L Location/Building/Level 1 -v smb://prin-server.AD.ORG/ToshibaEStudio4520C-A -P"/Library/Printers/PPDs/Contents/Resources/TOSHIBA_eS4520CSeries.gz"
cupsenable ToshibaPrinterName
/usr/sbin/accept ToshibaPrinterName 
```

打印机将安装但不是本地安装在工作站上，而是安装在托管 PHP 和 BASH 脚本的服务器上。我看到打印机出现在 OS X 系统偏好设置中，这不是预期的结果。有没有办法让 BASH 脚本在本地工作站上运行它的命令？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T08:07:20.163

您无法在本地机器上执行 bash 脚本（出于显而易见的原因），您也无法提供 bash 脚本来下载，而无需将 CHMOD 权限更改为可执行文件。我建议制作applescript来添加打印机并提供下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:33:48.790

不可以。您必须提供 shell 脚本作为下载并指导用户如何运行它。

# jquery - jQuery，ajax不会缓存

> ID：14826786
> 
> 赞同：0
> 
> 时间：2013-02-12T06:31:40.267
> 
> 标签：jquery, ajax, browser-cache

为什么我的 jQuery ajax 不支持[ETag](http://en.wikipedia.org/wiki/HTTP_ETag)功能？

您在第二个示例中看到，没有“If-None-Match”标头。但为什么？

在两个经过测试的浏览器中，我有一个 50% 的更改，有一个缓存将按 F5，但只需通过单击链接重新打开页面，它就不起作用。

**不工作 jQuery 示例**

```
var xmlhttp;
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        console.log( xmlhttp.responseText );
    }
}
xmlhttp.open("GET","/energyManagerSensor/getCleanData/sensor_id/4?shrink_type=day&from=18.11.2011&to=23.02.2013",true);
xmlhttp.send(); 
```

请求标头

```
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip, deflate
Accept-Language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7,de-CH;q=0.6,fr-FR;q=0.5,fr;q=0.4,en-gb;q=0.3,sr-RS;q=0.2,sr;q=0.1
Cache-Control   max-age=0
Connection  keep-alive
Cookie  PHPSESSID=iie173rsc5bqggll6uhmg6m7i6
Host    sfportal3_hh_dev
If-Modified-Since   Tue, 12 Feb 2013 0:0:0 GMT
If-None-Match   4SdayF1321570800T1361574000
Referer http://sfportal3_hh_dev/energyManagerDisplay/view/display_id/1
User-Agent  Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:18.0) Gecko/20100101 Firefox/18.0 FirePHP/0.7.1
x-insight   activate 
```

响应标题

```
Cache-Control   max-age=3600
Connection  close
Date    Tue, 12 Feb 2013 06:16:23 GMT
Expires Thu, 19 Nov 1981 08:52:00 GMT
Server  Apache/2.2.22 (Ubuntu) 
```

**不工作的 jQuery 示例**

```
$.ajax({
    url: "/energyManagerSensor/getCleanData/sensor_id/4?shrink_type=day&from=18.11.2011&to=23.02.2013",
    type: 'GET',
    dataType: "json",
    cache: true,
    ifModified: true,
    success: function(return_data) {
    console.log(return_data);
    }
}); 
```

请求标头

```
Accept  application/json, text/javascript, */*; q=0.01
Accept-Encoding gzip, deflate
Accept-Language de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7,de-CH;q=0.6,fr-FR;q=0.5,fr;q=0.4,en-gb;q=0.3,sr-RS;q=0.2,sr;q=0.1
Connection  keep-alive
Cookie  PHPSESSID=iie173rsc5bqggll6uhmg6m7i6
Host    sfportal3_hh_dev
Referer http://sfportal3_hh_dev/energyManagerDisplay/view/display_id/1
User-Agent  Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:18.0) Gecko/20100101 Firefox/18.0 FirePHP/0.7.1
X-Requested-With    XMLHttpRequest
x-insight   activate 
```

响应标题

```
Cache-Control   max-age=3600
Connection  Keep-Alive
Content-Type    text/json
Date    Tue, 12 Feb 2013 06:18:41 GMT
Etag    5SdayF1321570800T1361574000
Expires Tue, 12 Feb 2013 07:02:18 GMT
Keep-Alive  timeout=5, max=74
Last-Modified   Tue, 12 Feb 2013 0:0:0 GMT
Server  Apache/2.2.22 (Ubuntu)
Transfer-Encoding   chunked
X-Powered-By    PHP/5.3.10-1ubuntu3 
```

**测试环境**

*   火狐 18.0.2
*   铬 24.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:34:38.443

我发现了问题：

[1.) http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)上的“ifModified” 在我看来是绝对错误的。在阅读了 jQuery[源代码](https://github.com/jquery/jquery/blob/master/src/ajax.js)之后，我将删除这句话：

~~“仅当响应自上次请求以来发生更改时，才允许请求成功。”~~

并且会这样写：如果“ifModified”为真，则将使用 lastModified 和 etag 标头选项进行主动缓存。

2.) 我在 PHP 中遇到了问题

需要始终发送 ETag，在 304 响应的情况下也是如此。

```
<?php
// Save performance use ETag system 
// @see http://en.wikipedia.org/wiki/HTTP_ETag
$lastmod = gmdate('D, d M Y 0:0:0 \G\M\T', time());
$etag = $sensor_id . 'S' . $shrink_type . 'A' . $alarms . 'F' . $from . 'T' . $to . 'D' . date('Dmy');

$ifmod = isset($_SERVER['HTTP_IF_MODIFIED_SINCE']) ? $_SERVER['HTTP_IF_MODIFIED_SINCE'] == $lastmod : null; 
$iftag = isset($_SERVER['HTTP_IF_NONE_MATCH']) ? $_SERVER['HTTP_IF_NONE_MATCH'] == $etag : null; 

header_remove('Pragma');
header_remove('Cache-Control');
header('Expires: ' . gmdate('D, d M Y H:m:i \G\M\T', time() + 3600));
header('Cache-Control: max-age=3600');
header('Last-Modified: ' . $lastmod); 
header('ETag: ' . $etag);

if (($ifmod || $iftag) && ($ifmod !== false && $iftag !== false)) { 
    header('HTTP/1.0 304 Not Modified'); 
    die();
} 
```

# asp.net-mvc - asp.net mvc 文件夹/对象层次结构

> ID：14826790
> 
> 赞同：6
> 
> 时间：2013-02-12T06:31:50.287
> 
> 标签：asp.net-mvc, oop, architecture, import, import-from-csv

## 背景

我有一个使用 CSV 文件导入产品的 Asp.net MVC 3.5 应用程序。CSV 文件可以来自一组特定的可配置源。要配置新的 CSV 源，用户最初会指定哪些 CSV 列映射到哪些产品属性。此配置将存储为导入模板，并在之后每次导入时可供选择。

我在尝试为此功能规划文件夹/对象结构时遇到了困难。我理解（并且喜欢）Asp.net MVC 在路由方面的灵活性，所以我知道我们可以在这里做任何事情。但是，我想要任何可以帮助我们保持对象结构更加健全和可维护的建议。

最初，我设置了一个包含 Import.aspx 视图的产品文件夹。这似乎很适合控制器/动作模型。但是，当我考虑管理上述模板的功能时，事情变得令人困惑。

编辑：导入模板可以应用于不同的对象。所以 Product 只是一个可以为其创建一个或多个 ImportTemplate 的对象。例如，可能具有 ImportTemplate 的另一个对象可能是 Customer。

## 问题

我应该在 Product 文件夹下创建一个名为 ImportTemplate 的子文件夹并将 CRUD 视图放在那里吗？然后我会为导入模板函数添加一个自定义路由。我在这里关心的是文件夹深度以及与兄弟操作导入的混淆。还是应该将 ImportTemplate 提升一个级别，然后使用路由将其放置在 Product 文件夹下？听起来很乱。

也许文件夹结构应该是产品/导入/模板。我在这种情况下看到的问题是 Import 并不是一个真正的对象。我可以看到它是一个控制器，但它实际上是一个*动作*。如果我使用这种结构，我是否应该在 Import 文件夹中放置一个 Upload.aspx 视图（以替换上面提到的 Product/Import.aspx）？这似乎有点笨拙。

编辑：上面添加的要求是 ImportTemplate 可以与除产品（即客户）以外的对象相关联，将 ImportTemplate 文件夹直接放在 Views 文件夹下会更好吗？

构建此对象/文件夹层次结构的任何替代想法？

## 研究

为了研究这个问题，我回顾了有关文件夹结构和深度的问题。这里有几个问题有答案，但实际上并没有为我的问题提供答案。

- [ASP.NET MVC 视图或 URL 应该有多少层？](https://stackoverflow.com/questions/1412090/asp-net-mvc-how-many-levels-deep-should-a-view-or-url-be)

- [ASP.NET MVC 3 文件夹结构](https://stackoverflow.com/questions/7290423/asp-net-mvc-3-folder-structures)

-[分层 MVC 路由策略](https://stackoverflow.com/questions/12907099/strategy-for-hierarchical-mvc-routing)

# 一个例子

编辑：用户定期从第三方导入产品列表。他们正在从将上传到网站的 CSV 文件中导入数据。他们创建/添加产品导入模板的实例到他们的帐户。此模板实例存储以下设置：

*   CSV 文件中名为“title”的列应导入到 Product Name 字段。
*   CSV 中“类别”列下无法识别的类别应导入为“未知”类别。

不同的用户可能有不同的规则，基于不同的第 3 方 CSV 格式或基于他们自己的系统配置（即，他们没有上述用户的未知类别设置）。

*   CSV 中名为“部件号”的列应导入到“产品名称”字段和“产品编号”字段。
*   默认情况下，无法识别的类别应导入“通用”类别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:18:53.647

您是绝对正确的，鉴于 ASP MVC 的灵活性，您可以在此处就文件夹结构做任何事情。如果您习惯于 ASP.NET WebForms，请记住 MVC 完全不同，因为它不使用文件夹和文件作为资源的直接映射，并且路由基于控制器和操作。当您习惯以“ASP 经典”方式进行操作时，这可能需要您习惯。

因此，关键的考虑因素是什么对您和您的用户最有意义，并且每个人都清楚一切在哪里。

> 也许文件夹结构应该是产品/导入/模板。我在这种情况下看到的问题是 Import 并不是一个真正的对象。我可以看到它是一个控制器，但它实际上是一个动作。如果我使用这种结构，我是否应该在 Import 文件夹中放置一个 Upload.aspx 视图（以替换上面提到的 Product/Import.aspx）？这似乎有点笨拙。

是的，听起来你的控制器应该有一个 Import 动作，或 Upload 动作等……这些中的每一个都可以在该控制器的视图文件夹中有一个相应的视图，*但模板本身可能不需要是 views*。您的模板只是导入产品时控制器操作将引用的资源。在这种情况下，自定义路由不会成为问题，我不会将模板放在视图文件夹中。我会将它们放在一个中心位置，并在我所有需要访问它们以进行导入操作的控制器中引用它们。

你可以使用这样的东西：

```
MyApp project
    Controllers
        ProductController
    Models
        Product
    ImportTemplate
        Template1
        Template2
    Views
        Product
            Import.aspx
            Edit.aspx
            Index.aspx
            etc… 
```

，`Import.aspx`或`Upload.aspx`可能是用户可以选择模板并导入产品（或映射列并保存新模板）的页面。每个视图都会有一个对应的控制器动作。您的控制器的导入或上传操作将直接访问模板文件；您需要做的就是在您的控制器中包含对 ImportTemplate 文件夹的引用（或模型、服务层......将使用模板的任何地方）

```
using  MyApp.ImportTemplate
//namespace matches folder structure, “MyApp/ImportTemplate” 
```

当用户在产品导入页面上时，URL 将类似于`/Product/Import/`，并且模板本身不一定会出现在 URL 中，除非您将其作为参数传递`/Product/Import/templateID`或`/Product/Import?templateID=123456`.

同样，关键是做对您的项目最有意义的事情，并为您保持组织和清晰，并且在构建/部署应用程序时可以节省您的时间。

例如，我倾向于将事情分成两个或多个项目，以便在部署时更容易。例如，我可能有这样的文件夹结构：

```
App.UI project
    Content
        CSS
    Scripts
    Images
    Views

App.Core project (any code that will be compiled)
    Controllers
    Templates
    Models
        Helpers
        Interfaces
        Repositories
    ViewModels 
```

然后我只需要部署`App.UI`项目，其中的所有内容都`App.Core`将被编译并包含在`App.UI\bin`文件夹中

# c# - 返回错误答案的日期差异

> ID：14826791
> 
> 赞同：1
> 
> 时间：2013-02-12T06:31:52.057
> 
> 标签：c#, asp.net, datetime, datepicker

我真的很想对我一直面临的这个问题提供一些指导。我试图从文本框中找出两个日期之间的区别。

```
 protected void Button1_Click(object sender, EventArgs e)
{
    a = TextBox1.Text.ToString().Trim();
    b = TextBox2.Text.ToString().Trim();
    DateTime c = new DateTime();
    DateTime d = new DateTime();
    c = Convert.ToDateTime(a);
    d = Convert.ToDateTime(b);
    System.TimeSpan diffr = d - c;
    Response.Write(diffr.Days);
} 
```

以上是我在 Button Click 事件中编写的代码。问题是，代码返回的差异是错误的。

即，如果要找到 12/02/2013 和 11/02/2013 之间的差异，则代码不会返回 1，而是返回 30。类似地，要找到 12/02/2013 和 10/02/2013 之间的差异，而不是返回 2 的代码返回 61。

我正在使用 Jquery DatePicker 来选择日期！请提供帮助，因为我的所有搜索都没有产生任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:37:18.080

在进行减法之前，您应该将日期格式转换为 dd/mm/yyyy。所以这是你的最终代码-

```
protected void Button1_Click(object sender, EventArgs e)
{
        string a, b;
        a = TextBox1.Text.ToString().Trim();
        b = TextBox2.Text.ToString().Trim();
        DateTime c = new DateTime();
        DateTime d = new DateTime();
        c = Convert.ToDateTime(a);
        d = Convert.ToDateTime(b);

        DateTime to_datetime = DateTime.ParseExact(a, "dd/MM/yyyy",
                                           System.Globalization.CultureInfo.InvariantCulture);
        DateTime from_datetime = DateTime.ParseExact(b, "dd/MM/yyyy",
                                                     System.Globalization.CultureInfo.InvariantCulture);
        System.TimeSpan diffr = to_datetime - from_datetime;
        Response.Write(diffr.Days);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T06:39:21.243

唯一的问题是**日期的格式**。
正如您所写，它显示的是月差而不是日期差。
尝试使用 datetime.parseexact 并指定您的格式

## 例子：-

```
 string poop = "2005-12-14T14:35:32.1700000-07:00";
 DateTime poo = DateTime.ParseExact(poop,"yyyy-MM-ddTHH:mm:ss.fffffffzzz",        
                                System.Globalization.CultureInfo.InvariantCulture); 
```

在你的情况下

```
 string sDate1=TextBox1.Text.ToString().Trim();
 string sDate2=TextBox1.Text.ToString().Trim();

 DateTime dt1= DateTime.ParseExact(sDate1,"MM-dd-yyyy",        
                                System.Globalization.CultureInfo.InvariantCulture);
 DateTime dt2= DateTime.ParseExact(sDate2,"MM-dd-yyyy",        
                                System.Globalization.CultureInfo.InvariantCulture);

 System.TimeSpan diffr =dt2 - dt1;
 Response.Write(diffr.Days); 
```

它应该工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T08:08:36.247

您可以将 jQuery datepicker 的日期格式更改为

```
$("#txtDate.datepicker").datepicker({ dateFormat: 'mm-dd-yy' }); 
```

在 jQuery 中，您可以将迄今为止的测试解析为

```
var dateInJs = $.datepicker.parseDate('mm-dd-yy', $('#txtDate.datepicker').val()); 
```

或者在 .NET 中，您可以将“dd-MM-yyyy”格式的日期解析为

```
DateTime.ParseExact(txtDate.Text, "dd/MM/yyyy", System.Globalization.CultureInfo.InvariantCulture); 
```

您也可以在 .NET 中使用 CultureInfo，例如

```
DateTime Date = DateTime.Parse(txtDate.Text, System.Globalization.CultureInfo.CreateSpecificCulture("hi-IN")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T06:37:43.137

也许你可以使用[`TimeSpan`](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)：

```
DateTime startTime = '';
DateTime endTime = '';

TimeSpan span = endTime.Subtract( startTime ); 
```

接下来你可以利用`span.Seconds, span.Days`...等

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T07:50:40.030

我认为这个问题是由于您的计算机日期时间格式设置造成的。请将您的计算机日期时间格式更改为 dd/MM/yyyy 格式，然后重试。

# android - 我如何使用（DUN 或 PAN）从 android 连接到另一部手机？

> ID：14826792
> 
> 赞同：1
> 
> 时间：2013-02-12T06:31:59.917
> 
> 标签：android, bluetooth

我为 android 创建了一个简单的蓝牙终端，我想与其他不支持 android 的手机连接 uuid=1115(PAN) 与个人区域网络....并与 android 共享互联网连接。我是如何做到的？我知道（DUN ) 是 AT+CGDCONT=1,"IP","APN"... 拨号后使用 ATD*99***1# ...我用 DUN 蓝牙服务再次测试它...

```
 AT+CGDCONT=1,"IP","MYAPN"
 REPLY OK

 ATD*99***1#
 REPLY CONNECT 
```

之后我能做什么？我可以从终端使用 url？如何将我的应用程序保持在背景并打开浏览器以使用互联网？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-23T16:57:05.643

对于 PAN，它与您为 DUN 所做的方式完全不同，后者涉及使用您提供的接入点设置进行远程 RAS 拨号（考虑 PPP 链接）。PAN 涉及使用 BNEP 层通过虚拟蓝牙以太网驱动程序/接口为您提供所需的网络连接。PAN 中不涉及 RAS 拨号，因此您不需要使用 DUN 执行的 AT 命令来启动连接。

要使 PAN 正常工作，您的手机 + 台式电脑（比如说）也需要支持 PAN 配置文件。想象一下，如果您想在没有移动数据订阅或 Wi-Fi 不可用的情况下使用手机上的浏览器，但您附近有一台支持 Internet + 蓝牙的 PC，您将启动从手机到 PC 的 PAN 连接。底层 BNEP 将负责在 ACL 有效负载中携带和路由带有以太网帧的蓝牙数据包。请参阅更多 BNEP 协议以了解更多信息。

# apache-flex - ios Mobile项目，如何添加MXML？

> ID：14826802
> 
> 赞同：0
> 
> 时间：2013-02-12T06:32:36.717
> 
> 标签：apache-flex, flash-builder

我刚刚下载了新的 Flashbuilder 并为 iOS 创建了一个新项目。

我无法向其中添加新的 MXML 组件，它说没有 flex 项目？不支持 MXML 吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T03:24:32.457

我是一个工具。我创建了一个“Actionscript 移动应用程序”。难怪。

# xcode - 使用 xcode 找不到 SDL_types.h 文件

> ID：14826805
> 
> 赞同：0
> 
> 时间：2013-02-12T06:32:42.253
> 
> 标签：xcode, sdl

尝试在 xcode 4.6 上使用 SDL_mixer 时出现此错误...

SDL_types.h 文件未找到.. 在 SDL_mixer.h 文件中

据我所知，我包含了所有正确的文件，并且已将框架（SDL 和 SDL_mixer）包含到我的 /systems/library/frameworks 文件夹中，并且它编译良好，直到我将 SDL_mixer.h 添加到我的项目中。我应该怎么办？

这是 main.cpp

```
#include <SDL/SDL.h>
#include "SDLMain.h"
#include "SDL_mixer.h"

int main(int argc, char ** argv)
{
    SDL_Init(SDL_INIT_EVERYTHING);
    Mix_Chunk song;
    //Initialize SDL_mixer
    if( Mix_OpenAudio( 22050, MIX_DEFAULT_FORMAT, 2, 4096 ) == -1 )
    {
        return false;
    }

    song = Mix_LoadWAV("song.wav");
    SDL_SetVideoMode(1000, 500, 32, SDL_SWSURFACE);
    SDL_Event event;
    bool done = false;
    while(!done)
    {
        while (SDL_PollEvent(&event))
        {
            if (event.type == SDL_QUIT)
            {
                done = true;
            }
            if (event.type == SDL_KEYDOWN)
            {
                if (event.key.keysym.sym == SDLK_UP)
                {
                    Mix_PlayChannel( -1, song, 0 );
                }
            }
        }
    }
    SDL_Quit();

    return 0;
} 
```

# java - 用Java编译和运行C程序

> ID：14826814
> 
> 赞同：1
> 
> 时间：2013-02-12T06:33:07.830
> 
> 标签：java, c

我正在尝试从此链接运行源代码

[从 Java 应用程序编译和运行源代码](https://stackoverflow.com/questions/5642840/compile-and-run-source-code-from-java-application)

我安装了 Mingw32 编译器，更改了编译器位置路径，并在 Eclipse 中运行示例 .cpp 文件时出现此错误。

```
public class C_Compile {
    public static void main(String args[]){

        String ret = compile();
        System.out.println(ret);

    }
        public static String compile()
        {
            String log="";
             try {
                 String s= null;
               //change this string to your compilers location
             Process p = Runtime.getRuntime().exec("cmd /C  \"C:\\MinGW\\bin\\mingw32-gcc-4.6.2.exe\" C:\\MinGW\\bin\\Hello.cpp ");

             BufferedReader stdError = new BufferedReader(new 
                  InputStreamReader(p.getErrorStream()));
             boolean error=false;

             log+="\n....\n";
             while ((s = stdError.readLine()) != null) {
                 log+=s;
                 error=true;
                 log+="\n";
             }
             if(error==false) log+="Compilation successful !!!";

         } catch (IOException e) {
             e.printStackTrace();
         }
             return log;
        }

      public int runProgram() 
        {
            int ret = -1;
           try
             {            
                 Runtime rt = Runtime.getRuntime();
                 Process proc = rt.exec("cmd.exe /c start a.exe");
                 proc.waitFor();
                 ret = proc.exitValue();
             } catch (Throwable t)
               {
                 t.printStackTrace();
                 return ret;
               }
           return ret;                      
        }} 
```

错误：

```
mingw32-gcc-4.6.2.exe: error: CreateProcess: No such file or directory 
```

谁能告诉我在哪里放置我的源 .cpp 文件。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:46:53.607

错误消息表明，未找到 gcc 编译器本身。你为什么不使用`gcc.exe`，而不是`mingw32-gcc-4.6.2.exe`反正？如果你更新 MinGW，后者将失效！当路径不包含空白字符时，您也不需要在字符串中使用 \"。

您可以将您的 cpp 文件放在您想要的任何位置，并提供该 gcc 的路径。Exec 还应该有一个参数`dir`，您可以将其设置为 cpp 的目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-19T14:35:14.270

```
 public static void CompileCprog(String filename){

        File dir = new File("C://Users//JohnDoe//workspace//Project");

        try {  
            String exeName = filename.substring(0, filename.length() - 2);
            Process p = Runtime.getRuntime().exec("cmd /C gcc " + filename + " -o " + exeName, null, dir);  
//          Process p = Runtime.getRuntime().exec("cmd /C dir", null, dir);  
            BufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream()));  
            String line = null;  
            while ((line = in.readLine()) != null) {  
                System.out.println(line);  
            }  
        } catch (IOException e) {  
            e.printStackTrace();  
        }   
    } 
```

这对我来说非常有效。

“dir”变量可以设置为您想要的任何位置。

第一个“p”进程编译一个程序，并在您正在编译的程序的同一位置生成一个同名（减去 .c）的 .exe 文件。

如果您的命令有输出，则可以使用缓冲阅读器。如果您将命令字符串更改为 .exec("cmd /C dir"); 结果将打印在输出中。（我使用日食）

# charts - 如何使气泡图底部对齐并相互粘连

> ID：14826815
> 
> 赞同：1
> 
> 时间：2013-02-12T06:33:14.127
> 
> 标签：charts, d3.js, data-visualization

请问有没有办法实现图片上圆圈的布局和排列。我想创建一个由一系列圆圈组成的图表，这些圆圈链接在一起并在底部对齐。

![在此处输入图像描述](../Images/e000c838826f45ec16582e4f3009dacd.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T10:41:35.637

两个半径分别为 r1 和 r2 的圆之间的距离为：

![在此处输入链接描述](../Images/9524e17cae86028acec035cdf385524b.png)

您可以使用它来将您的圆圈定位在 x 轴上。示例参见：[http](http://bl.ocks.org/7a9d6c4725367aaed5db) ://bl.ocks.org/7a9d6c4725367aaed5db 。

# javascript - 如何使用javascript在href上禁用谷歌浏览器中的新标签选项

> ID：14826817
> 
> 赞同：1
> 
> 时间：2013-02-12T06:33:30.633
> 
> 标签：javascript, google-chrome, tabs

我有一个具有多个 a href 链接的应用程序。右键单击它们会在 Chrome 浏览器中显示“新标签”。单击它会打开一个新选项卡，但该应用程序并非设计为在新选项卡中工作。有什么方法可以禁用该选项或在 Chrome 中捕获新标签的事件。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:47:42.913

不，那是不可能的。这是一项浏览器功能，可在新选项卡中打开链接。这就是链接`<a>`标签的目的。

但是，您可以使用例如`<span>`标签并在其上附加`onclick`处理程序来执行页面导航：

```
<span onclick="window.location.href='nextpage.html'">Next page</span> 
```

使用 CSS，您可以设置 span 的样式，使其看起来像一个链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:53:38.343

链接根据其目标属性在新选项卡中打开，目标属性指定打开链接文档的位置。只需`target="_blank"`从`<a>`标签或设置中删除`target="_self"`

# asp.net - jquery-ajax 将值发布到 http-generic-handler 不返回任何内容

> ID：14826819
> 
> 赞同：0
> 
> 时间：2013-02-12T06:33:37.133
> 
> 标签：asp.net, jquery, httphandler

我有一个`generic-http-handler`，我从 jQuery 调用它。
我的处理程序仅`insert values in database`但不返回任何内容。
我打电话`handler`如下

```
function InsertAnswerLog(url) {
$.ajax({
    type: "POST",
    url: "../Services/Handler.ashx",
    data: { 'Url': url, 'LogType': "logtype" },
    success: function (data) {
    },
    error: function (Error) {

    }
});
} 
```

一切对我来说都很好。
但这是将值发布到服务器的最佳方式吗？
或者我可以以更好的方式使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:55:00.687

您发送的数据类型似乎是 JSON 编码的尝试在发送之前以这种形式序列化数据，然后在服务器端您应该在发送回数据之前对数据进行编码。

在发送到服务器之前进行序列化

```
 function InsertAnswerLog(url) {
   var DatatoSend =  { 'Url': url, 'LogType': "logtype" } ;
   $.ajax({
   type: "POST",
   url: "../Services/Handler.ashx",
   data: {Jsondata: JSON.stringify(DatatoSend)},
   success: function (data) {
   },
   error: function (Error) {
  }
  });
  } 
```

现在在服务器端 scipt

```
 // NB: i use PHP not asp.net but it think it should be something like
     Json.decode(Jsondata);
     // do what you want to do with the data
     // to send response back to page 
     Json.encode(Resonponse);
      // then you could in php echo or equivalent in asp send out the data 
```

在服务器端脚本上解码 json 数据很重要，当要发送响应时，应将其编码回 JSON 格式，以便将其理解为返回的 json 数据。我希望这有帮助。

# plsql - 如何修复oracle中的变异触发器

> ID：14826820
> 
> 赞同：0
> 
> 时间：2013-02-12T06:33:37.513
> 
> 标签：plsql, triggers, oracle11g

我编写了用于更新同一个表中的列值的触发器。对于Ex，我在更新assettype列后在metermaster表上写了一个触发器，在触发器中我试图更新同一个metermaster表中的instantaneousinterval列。它抛出这样的错误

错误：ORA-04091：表 PSEB.METERMASTER 正在变异，触发器/函数可能看不到它。

我的触发代码如下：

```
CREATE OR REPLACE TRIGGER PSEB.spiupdate
AFTER
update of assettype
ON pseb.metermaster
referencing new as new old as old
    for each row
DECLARE
vassettype number;
resval number(10);
vassettypename varchar2(50);
vmeterid number;
begin
   select :new.assettype,:new.meterid INTO vassettype,vmeterid from dual;
   select assettypename into vassettypename from pseb.METERASSETINSTTYPE where ASSETTYPEID=vassettype;
    select case when assettypename  like 'DT' then 86400 when assettypename  like 'HT' then 3600 when assettypename  like 'FSB' then 86400 end  into resval from pseb.meterassetinsttype where assettypename =vassettypename; 
    update pseb.metermaster set instantaneousinterval=resval where meterid=vmeterid;
end; 
```

我尝试使用

```
pragma autonomous_transaction; 
```

但它给出了死锁条件。错误：ORA-00060：在等待资源时检测到死锁 ORA-06512：

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:41:15.187

而不是这个更新语句

```
update pseb.metermaster set instantaneousinterval=resval where meterid=vmeterid; 
```

采用

```
:new.instantaneousinterval=resval; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T06:40:27.280

当语句导致触发器触发并且触发器引用导致触发器的表时，就会发生变异表。避免此类问题的最佳方法是不使用触发器，但我怀疑 DBA 没有花时间这样做。他本可以执行以下操作之一：

将触发器更改为后触发器。

将其从行级触发器更改为语句级触发器。

转换为复合触发器。

修改了触发器的结构以使用行级和语句级触发器的组合。

通过提交使触发器具有自主性。

试试这个编译指示自治事务；与提交

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T07:15:50.307

由于触发器正在更新定义它的同一个表，为什么不更新第一个更新语句本身中的两列呢？

即，而不是使用更新

```
UPDATE pseb.metermaster
SET    assettype = '<v_assettype>'; 
```

并依靠触发器来更新瞬时间隔列，为什么不使用如下更新语句（**代码未经测试**）

```
UPDATE pseb.metermaster
SET    assettype = '<v_assettype>',
       instantaneousinterval = (SELECT CASE
                                           WHEN assettypename LIKE 'DT' THEN 86400
                                           WHEN assettypename LIKE 'HT' THEN 3600
                                           WHEN assettypename LIKE 'FSB' THEN 86400
                                       END
                               FROM   pseb.meterassetinsttype
                               WHERE  assettypeid = '<v_assettype>'); 
```

在我看来，在这种情况下使用触发器和自治事务将是错误的方法。要了解此错误的原因，请在[http://asktom.oracle.com/](http://asktom.oracle.com/)中搜索此错误。

# android - 向视图添加多个视图

> ID：14826822
> 
> 赞同：-3
> 
> 时间：2013-02-12T06:33:38.403
> 
> 标签：android, layout, android-linearlayout, viewflipper

我想将一个包含 4 个按钮和一个 textview 的视图添加到线性布局中，并将新制作的视图设置为 viewflipper ...客户的要求是我需要以编程方式而不是使用 xml 文件来创建布局

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:45:20.243

建议在 XML 中定义 UI。但是对于您的客户要求，您可以动态地执行此操作。在 android 中，xml 和运行时（.java 文件）中的 UI 是可选的。因此，使用 java 方法创建 LinearLayout 并将新创建的视图添加到其中。最后，您可以将此 LinearLayout 添加到 ViewFlipper。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:00:34.147

请参阅这是示例代码，这可能对您有所帮助。代替 LockView，您可以提及其他视图。

```
 lockLayout = (LinearLayout) findViewById(R.id.quick_lock_layout);

   private void renderLockLayout() {
        lockLayout.removeAllViews();
        lockLayout.invalidate();

        lockLayout.setLayoutParams(new LinearLayout.LayoutParams(
                lockLayoutWidth + 7, (height / 6)));
        /*
         * Toast.makeText(ApplicationContext.getContext(), "Num count is :" +
         * _totalLocks, Toast.LENGTH_SHORT).show();
         */
        Log.i(getClass().getSimpleName(), "Total :" + _totalLocks);
        lockViewArray = new LockView[_totalLocks];
        for (int index = 0; index < _totalLocks; index++) {
            LockView lockview = (LockView) inflater.inflate(R.layout.lockview,
                    null);
            lockview.setLayoutParams(new LayoutParams((width),
                    LayoutParams.WRAP_CONTENT));
            lockLayout.addView(lockview);
            lockViewArray[index] = lockview;
        }
        lockLayout.invalidate();
    } 
```

# jquery - 在动态创建的元素上调用 .each 的正确方法？

> ID：14826823
> 
> 赞同：4
> 
> 时间：2013-02-12T06:33:41.633
> 
> 标签：jquery, events

继这里的答案[https://stackoverflow.com/a/1207393/1786228](https://stackoverflow.com/a/1207393/1786228)和现在相当老的 jQuery 插件（[http://www.erichynds.com/jquery/jquery-create-event/](http://www.erichynds.com/jquery/jquery-create-event/)）

`on`创建新元素时要捕获的正确事件是什么？例如，我有输入框，可以在其中设置预先输入/自动完成功能。我这样做：

```
$(.input_box).each( function() { 
  // set stuff here 
  // setup options etc
  // apply autocomplete plugin to element (this is a jQuery plugin)
  var ac = $(this).autocomplete(acOptions);
}); 
```

然后我有一个按钮可以将更多相同的输入框添加到表单中。如何`.each`仅为新输入框调用该函数？如果我`$(.input_box).each...`再次使用，原来的盒子会再次添加插件。

我基本上想执行以下操作，但没有要绑定的“创建”事件。

```
$(document).on("create", "input_box", function(e) { 
  // set stuff here 
  // setup options etc
  // apply autocomplete plugin to element (this is a jQuery plugin)
  var ac = $(this).autocomplete(acOptions);
} ); 
```

有这样的活动吗？如果没有，实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:12:03.330

如上所述：您可以使用突变事件。但是这些事件有一些限制：不支持 IE 9 之前的版本，并且这些事件也存在一些性能问题。在你的情况下，你会听**DOMNodeInserted**。一个可能的例子：

```
document.addEventListener("DOMNodeInserted", function(event){
    var target = event.srcElement || event.target;
    if (target && target.tagName.toLowerCase() == 'input') {
        // do what you want to do here....
    }
}); 
```

在您的情况下，我希望更简单一些：将您的 init 逻辑放在一个单独的函数中，并在每次操作 DOM 后调用此函数。在这个函数内部，为每个初始化的元素添加一个类或数据值，并检查这个类以确保只初始化一次：

```
function init() {
    $('.input_box').not('.initialized').each( function() { 
        var ac = $(this).addClass('initialized').autocomplete(acOptions);
    });
} 
```

# android - 在地图视图上动态添加多个叠加层

> ID：14826824
> 
> 赞同：0
> 
> 时间：2013-02-12T06:33:48.793
> 
> 标签：android, google-maps, android-mapview, itemizedoverlay

我有一个 mapView，在 GestureListener 的帮助下，我设法获得了 onLongPress 的覆盖。我真正想要的是，我想一个一个地添加标记（具有相同的图标）。就像我想在地图上标记不同的位置（不是一次全部）。对于 MapView 和 Overlays 的新手来说，这方面的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:55:13.117

使用 ItemizedOverlay 类在特定的经度和纬度上添加可绘制对象。

在你的 MapActivity 写

GeoPoint your_point =（在此处提供地理点信息）；

Drawable drawable = this.getResources().getDrawable(R.drawable.your_point_image);

HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable, MapsActivity.this, mapView); GeoPoint 点 = new GeoPoint((int) (your_point.getLat() * 1E6), (int) (your_point.getLon() * 1E6));

OverlayItem overlayitem1 = new OverlayItem(your_point);

itemizedoverlay.addOverlay(overlayitem1); mapView.getOverlays().add(itemizedoverlay);

在哪里

HelloItemizedOverlay 扩展了 ItemizedOverlay{

public HelloItemizedOverlay(Drawable defaultMarker, Activity context, MapView mapView) { super(boundCenterBottom(defaultMarker)); mContext = 上下文；this.mapView = 地图视图；

```
} 
```

}

我是这样做的，它有效。

# jquery - div动画期间绝对定位的文本“隐藏”

> ID：14826827
> 
> 赞同：0
> 
> 时间：2013-02-12T06:34:30.560
> 
> 标签：jquery, css, animation

我有一个 div，其中一些文本定义为该 div 的一部分。部分文本绝对定位在 div 的边界之外。作为我的解决方案的一部分，我在单击 div 时为 div 的大小设置动画。在动画过程中，div 之外的文本会消失，但在动画完成后会重新出现。整个动画过程都会显示div里面的文字。

在这里看到它：http: [//jsfiddle.net/PVabR/](http://jsfiddle.net/PVabR/)

这是我的 div：

```
<div id="fac-node-8033091339" class="node" style="left:54px;top:91px;width:129px;height:45px;">
    <div class="facility">
        <div class="tt" title="Maximum samt procent dækket">
            <div class="maximum">1.000 DKK</div>
            <div class="utilized">45%</div>
        </div>
        <div class="acctNo">
            <div class="label">Kontonr.</div>
            <div class="text">Kontonummer 123456789</div>
        </div>
    </div>
</div> 
```

.maximum 和 .utilized 显示在 div 之外。

谁能向我解释为什么？如果有解决方案，我很想听听。

提前致谢

# visual-studio-2012 - 在不安装 SWI-Prolog 的情况下部署使用 SWI-Prolog 的应用程序

> ID：14826830
> 
> 赞同：0
> 
> 时间：2013-02-12T06:34:47.580
> 
> 标签：visual-studio-2012, swi-prolog, vspackage

我创建了一个在其中使用 SWI-Prolog 的 VS-Package 应用程序 (.vsix)。

我的问题是：如何在不要求用户运行 SWI-Prolog 安装程序的情况下部署我的 VS-Package 应用程序（VS 2012）？我是否可以在我的客户端计算机中创建一个文件夹并在其中复制一些 SWI-Prolog 库？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-24T19:48:47.413

根据[文档](http://www.swi-prolog.org/pldoc/man?section=saved-states)，这是保存状态并将模拟器传入的情况：

`swipl -o mystate --stand_alone=true -c myload.pl`

--Options 被传递给 qsave_program/2，因此如果您需要更多定制，可能的值将在链接中讨论。[一个文档示例，也值得一读](http://www.swi-prolog.org/pldoc/man?section=cmdlinecomp)

# java - 如何将输入 XML 文档的所有参数传递到输出 XML 文档

> ID：14826837
> 
> 赞同：0
> 
> 时间：2013-02-12T06:35:23.323
> 
> 标签：java, xml-parsing

一般任务是 XML 文档处理。最好将所有输入 XML 参数通常以`<p:MyDocument xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="urn:where/to/look/4/schema" schemaVersion="1.3">` 传递给输出 XML 的形式给出。更具体地说，如何从输入 XML 中获取它们？我可以通过它们（如果我提前知道它们）作为

```
Element rootElement = document.createElementNS("urn:hard/coded", root);         
rootElement.setAttribute("schemaVersion", "myWish"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:00:55.373

您可以使用获取所有属性详细信息`document.getAttributes()`

# php - 检查序列化数组

> ID：14826844
> 
> 赞同：0
> 
> 时间：2013-02-12T06:35:45.680
> 
> 标签：php, mysql, wordpress

我必须从 wordpress 数据库中获取 wp-options 表，并且必须对序列化数据进行反序列化。我从数据库表中获取选项值的代码写在下面。

```
function option_value_change () {
  global $wpdb;
  $myrows = $wpdb->get_results( "SELECT *
  FROM `wp_options`");
    foreach ($myrows as $rows){
      $option = get_option($rows->option_name);
      modify_domain_name($option);
            echo $rows-> option_value ."<br />";
    }
} 
```

现在我想检查序列化数据。我如何将数据检查为序列化数据。如果那是序列化数据，那么我该如何反序列化该数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:51:08.563

也许检查它是一个对象还是一个数组，如果不是，则反序列化它。

```
<?php
if (!is_array($var) && !is_object($var)) {
  $var = unserialize($var);
}
?> 
```

或者，根据您的数据是肯定是对象/数组还是序列化数据，您也可以只测试它是否是字符串。

```
<?php
if (is_string($var)) {
  $var = unserialize($var);
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:01:32.437

Wordpress 有一个名为[maybe_unserialize()](http://codex.wordpress.org/Function_Reference/maybe_unserialize)的函数，它适合你的工作。

顾名思义，该函数只有在变量被序列化时才会对其进行反序列化。

**编辑：**

我不知道您当前的需求，但以防万一您不知道，WordPress 有一个[get_option()](http://codex.wordpress.org/Function_Reference/get_option)函数，它从表中读取一个值`options`并在需要时将其反序列化，然后再将其返回给您。

# html - 剑道图表导出为 pdf 或 png

> ID：14826845
> 
> 赞同：4
> 
> 时间：2013-02-12T06:35:53.613
> 
> 标签：html, kendo-ui, kendo-chart

我有一个带有远程数据的剑道图表。是否可以将图表导出为 png 或 pdf 格式

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-22T15:12:29.970

自从[Atanas Korchev 的回答](https://stackoverflow.com/a/14831525/315493)以来，kendo 已经实现了一种内置方法来将图表导出为 png、svg 或 pdf 文件。

如果要导出 png 文件，可以使用[exportImage 函数](http://docs.telerik.com/kendo-ui/api/javascript/dataviz/ui/chart#methods-exportImage)：

```
kendoChart.exportImage().done(function(data) {
    kendo.saveAs({
        dataURI: data,
        fileName: "chart.png"
    });
}); 
```

对于 PDF，它与[exportPDF 函数](http://docs.telerik.com/kendo-ui/api/javascript/dataviz/ui/chart#methods-exportPDF)的逻辑几乎相同：

```
chart.exportPDF({ paperSize: "Auto", landscape: true }).done(function(data) {
    kendo.saveAs({
        dataURI: data,
        fileName: "chart.pdf"
    });
}); 
```

您可以参考[剑道图表 API 文档](http://docs.telerik.com/kendo-ui/api/javascript/dataviz/ui/chart)以了解有关这些功能的更多详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T11:30:54.043

如果您使用一些第三方工具，例如[InkScape](http://inkscape.org/) ，这是可能的。后者可以将 SVG（Kendo UI Chart 原生格式）转换为几乎任何其他格式，包括 PNG 和 PDF。您可以使用图表的[svg](http://docs.kendoui.com/api/dataviz/chart#svg)方法获取底层 SVG，然后将其发送到远程服务。

这是一个 ASP.NET MVC 应用程序，它显示了如何：[https ://github.com/telerik/kendo-examples-asp-net/tree/master/chart-inkscape-export](https://github.com/telerik/kendo-examples-asp-net/tree/master/chart-inkscape-export)

# c# - 特定程序中所有窗口句柄的关系

> ID：14826848
> 
> 赞同：0
> 
> 时间：2013-02-12T06:36:03.497
> 
> 标签：c#, winapi

在 C# 中，我想获取特定程序的所有活动窗口句柄。

例如，我想获取 Outlook 客户端和所有 Outlook 打开的邮件窗口。可能会打开 2/3/etc 邮件窗口。我不能使用活动窗口标题来获得某种关系，因为它可能完全不同。

我可以使用 EnumWindows、IsWindowVisible 来获取所有打开的窗口的列表。子窗口或窗口组（即与 Outlook 相关的所有窗口、与 Skype 相关的所有窗口等）之间是否存在任何关系？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:46:30.863

在这种情况下，您需要使用 WinAPI。
首先，每个窗口都与一个所有者进程相关联 - 使用 GetWindowThreadProcessId。
其次，所有窗口都有父/子关系——使用 EnumChildWindows 和 GetParent。

# java - Android 依赖项在 Eclipse 中未更新

> ID：14826849
> 
> 赞同：0
> 
> 时间：2013-02-12T06:36:14.457
> 
> 标签：java, android, eclipse, dependencies

我在 Eclipse 中有两个项目，一个是 Android Java，另一个是常规 Java。常规 Java 是 Android 的依赖项。具体来说，我正在使用 libGDX 制作 Android 游戏。

如果我更改常规 Java 项目中的某些内容（一直如此），我必须通过铁环来更新 Android 项目。我要么一直手动清理 Android 项目，要么必须通过添加/删除随机新行来“修改”它，以便它更新。

这令人难以置信的沮丧和极大的时间浪费——这对于非 Android 项目也不是问题。我该如何解决？

Eclipse 版本：Indigo 服务版本 2

# php - 我的正则表达式不知道何时停止

> ID：14826852
> 
> 赞同：1
> 
> 时间：2013-02-12T06:36:19.690
> 
> 标签：php, regex, greedy, regex-greedy

我正在尝试匹配这个（特别是名称）：

```
<tr>
    <th class="name">Name:</th>
    <td>John Smith</td>
</tr> 
```

像这样：

```
preg_match('/<th class="name">Name:<\/th>.+?<td>(.+)<\/td>/s', $a, $b); 
```

但是，虽然它与名称匹配，但它不会停在名称的末尾。它继续运行另外 150 个左右的字符。为什么是这样？我只想匹配名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T06:38:57.077

使最后一个量词非贪婪：`preg_match('/<th class="name">Name:<\/th>.+?<td>(.+?)<\/td>/s', $a, $b);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:44:42.313

不要使用正则表达式来解析 HTML，使用 DOMDocument 非常容易：

```
<?php 
$html = <<<HTML
<tr>
    <th class="name">Name:</th>
    <td>John Smith</td>
</tr>
<tr>
    <th class="name">Somthing:</th>
    <td>Foobar</td>
</tr>
HTML;

$dom = new DOMDocument();
@$dom->loadHTML($html);

$ret = array();
foreach($dom->getElementsByTagName('tr') as $tr) {
    $ret[trim($tr->getElementsByTagName('th')->item(0)->nodeValue,':')] = $tr->getElementsByTagName('td')->item(0)->nodeValue;
}

print_r($ret);
/*
Array
(
    [Name] => John Smith
    [Somthing] => Foobar
)
*/
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T06:47:00.997

```
preg_match('/<th class="name">Name:<\/th>\s*<td>(.+?)<\/td>/s', $line, $matches); 
```

`</th>`仅匹配and之间的空格`<td>`，并且非贪婪匹配名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T09:02:42.660

这是你的比赛

```
preg_match(!<tr>\s*<th[^>]*>Name:</th>\s*<td>([^<]*)</td>\s*</tr>!s) 
```

它会完美地工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T08:36:50.193

```
preg_match('/<th class="name">Name:<\/th>.+?<td>(?P<name>.*)<\/td>/s', $str, $match);

echo $match['name']; 
```

# java - eclipse中是否预装了mysql jdbc驱动程序？

> ID：14826855
> 
> 赞同：-2
> 
> 时间：2013-02-12T06:36:25.937
> 
> 标签：java, eclipse

好吧，我使用 netbeans，所以我是 eclipse 的新手。eclipse 中是否预装了 mysql jdbc 驱动程序，还是我们必须下载它？另外，我想如何查看 eclipse IDE 中可用的库列表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:43:47.610

Eclipse 不存在 Mysql jdbc lib。您必须下载它并在您的项目中添加构建路径。

您可以在下面找到相关的库链接：

[http://mac.softpedia.com/get/Developer-Tools/MySQL-Connector-J.shtml](http://mac.softpedia.com/get/Developer-Tools/MySQL-Connector-J.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:46:02.497

Eclipse是IDE，它由jar组成，作为对大多数框架或数据库的支持，你可以自己下载jar并添加到你的构建路径中，或者使用eclipse库添加它。

[这是如何将mysql jar添加到eclipse插件中](http://wiki.eclipse.org/Create_and_Export_MySQL_JDBC_driver_bundle)

你必须先从[这里下载 jar](http://www.java2s.com/Code/JarDownload/mysql/mysql-connector.jar.zip)

问候安舒尔

# iphone - 如何将为 iPhone 创建的项目更改为 ipad（通用）？

> ID：14826858
> 
> 赞同：1
> 
> 时间：2013-02-12T06:36:50.587
> 
> 标签：iphone, ios, xcode, ipad, cocoa-touch

我开始了针对 iPhone 的应用程序，现在我也想在 iPad 上使用我的应用程序。当我开始作为 iPhone 项目时，即使我添加了 iPad xib，它也没有正确显示，如何转换我的项目，这将适用于 iPhone 和 iPad（通用）。有什么办法可以改变项目设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T06:41:26.013

单击目标->摘要，然后将设备更改为通用。 ![在此处输入图像描述](../Images/6dc1d9119d65da71e9ab10e5e3ae209a.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T06:39:48.043

在 Xcode 中打开项目。在 Targets 菜单下，右键单击您的应用程序。选择“升级 iPad 的当前目标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T06:44:25.223

另一种更具用户交互性的方式是

单击您的项目->单击目标->iOS应用程序目标->设备->通用。

# c# - 水晶报表首页空白

> ID：14826860
> 
> 赞同：0
> 
> 时间：2013-02-12T06:37:05.833
> 
> 标签：c#, crystal-reports, report

我正在 Visual Studio 2005 中制作一个应用程序来在水晶报表上显示数据。我根据供应商编号对元素进行了分组。我这里有两个问题。

首先是水晶报表的第一页是空白的。它只显示列名、日期和页码。但数据从第二页显示。

[http://img203.imageshack.us/img203/9165/erru.jpg</a>](http://img203.imageshack.us/img203/9165/erru.jpg</a&gt) ;[^]

我的第二个问题是我想在供应商代码的位置显示供应商名称作为页面标题。供应商代码和供应商名称都在不同的数据库中。所以我将不得不为此编写一个查询。那么，该怎么做。

希望我的问题很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T08:15:51.623

正如@Arun 所指出的，取消选中“Group Together”选项。还要检查您是否在“报告”标题部分中检查了“之前/之后的新页面”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:51:43.227

在您的组属性中，取消选中“保持组在一起”选项。由于组数据不适合在同一页面上，为了防止组被拆分，整个组被移动到新页面。

至于获取供应商名称，您必须更改 SQL 查询以使用 VendorCode 作为外键加入供应商表（连同数据库名称 [DBName.VendorTable]）并从该表中检索供应商名称。

# postgresql - 如何从 .sql postgresql 备份恢复单个表？

> ID：14826862
> 
> 赞同：21
> 
> 时间：2013-02-12T06:37:21.273
> 
> 标签：postgresql, sed, postgresql-9.1

表的行被错误地从数据库中删除。我们有一个 db 备份，它会生成一个可以像这样恢复的 sql 文件：

```
psql -h localhost -d proddump -f /Users/U/Desktop/prod_db_backup/PostgreSQL/site_prod.sql 
```

这最终会在本地进行完全还原。但是我们需要将单个表的行恢复到生产环境。关于如何使用 PostgreSQL 9.1 进行这项工作的任何提示？

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-02-25T16:15:15.090

我不知道有任何工具可以做到这一点，但是这个单行`precious_table`从`my_backup.sql`文件中提取：

```
sed -n '/^COPY precious_table /,/^\\\.$/p' my_backup.sql 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-12T09:19:52.653

如果您需要单表还原等，请不要进行 SQL 备份。[使用`pg_dump`'`-Fc`选项](http://www.postgresql.org/docs/current/static/app-pgdump.html)- “自定义”格式。这可以使用`pg_restore`. 可以进行选择性恢复，以及各种其他方便的功能。`pg_restore`如果需要，可以稍后将自定义格式的转储转换为 SQL 转储。

如果您遇到现有转储，您唯一的选择是：

*   使用文本编辑器将目标表数据提取到单独的文件中，然后将其恢复；或者

*   将转储还原到一次性数据库，然后用于`pg_dump`选择仅包括该表的转储。由于它是一次性的，因此您可以在一些卸载的快速但不安全的机器上使用单独的 Pg 实例，在该机器上打开所有“让它快速但如果你愿意就吃掉我的数据”选项，例如`fsync=off`. 你不应该在*生产*中设置它。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-12T09:55:06.977

您可以在 roder 中使用 grep + sed 来获取表数据：

首先，您需要确定边界：

```
$ fgrep -Ehn '^(COPY |CREATE TABLE )' db.sql
49:CREATE TABLE test (
60:CREATE TABLE test2 (
71:CREATE TABLE test3 (
82:COPY test (i) FROM stdin;
100090:COPY test2 (i) FROM stdin;
200098:COPY test3 (i) FROM stdin; 
```

为了提取表 test2 的数据：

```
sed -n '100090,200097p' < db.sql | sed -e 's/^COPY test2/COPY new_table_name/' > new_table_name.sql 
```

注意，您需要从第二个数字中减去一个（即排除下一个副本stmt）

现在，您可以加载`new_table_name.sql`和恢复您需要的数据。现在，您可以将数据加载到新表中

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-04-11T18:50:12.287

有一个简单的方法。

'pg_restore' 有一个 '--table/-t' 选项。

```
pg_restore -a -t your_table /path/to/dump.sql 
```

对远程主机使用“-h”。[在此处](http://www.postgresql.org/docs/9.1/static/app-pgrestore.html)查看其他选项

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-12-01T01:46:03.813

[我最近写了一个关于如何恢复单个 postgres 表](https://thomasvilhena.com/2020/11/restoring-individual-postgres-table)的分步指南。

简而言之，它不适用于 SQL 备份，您需要切换`pg_dump`到生成备份文件：

```
pg_dump.exe --host localhost --port 5432 --username "postgres" --schema "public" --format custom --blobs --verbose --file "my_database.dump" "my_database" 
```

然后，每当您需要恢复特定表以进行数据恢复或错误调查时，您必须：

1.  创建一个空的本地数据库`my_database_restored`
2.  `my_table`在空数据库中创建需要恢复的表
3.  运行`pg_restore`以选择性地导入所需表的数据：

```
pg_restore.exe -U postgres --data-only -d "my_database_restored" -t "my_table" "my_database.dump" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-12T10:35:54.530

我碰巧有[`pg_dumpall`](http://www.postgresql.org/docs/current/interactive/app-pg-dumpall.html)垃圾场。而且我想`users`从名为的数据库中恢复名为的表`edc`，因为您很可能*会*在不同的数据库甚至模式中拥有同名的表。

就我而言，以下`sed`oneliner 有效：

```
sed -ne '/^\\connect edc/,/^\\connect/{/\susers\(\s\|$\)/,/;\|\\\./p}' pg92.dump 
```

它能做什么：

1.  `/^\\connect edc/,/^\\connect/`将搜索限制在我的数据库范围内；
2.  `{…}`将执行范围内的所有内部命令；
3.  `/\susers\(\s\|$\)/`单独匹配所有行`users`，包括行尾；
4.  `/;\|\\\./`匹配包含`;`或包含的行`\.`
5.  `p`强制输出匹配的行（注意，使用 sed 调用`-n`）。

根据数据的复杂性，您可能需要对此进行调整。

您所要做的就是使用正确的开关将`sed`输出传送到命令。`psql`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-11-28T16:41:22.923

我已经编写了一些命令来仅从纯文本 pg_dumpall 恢复一个表的 DATA。灵感来自 Zouppen，谢谢。这是给法国读者的。

Restaurer les DONNÉES d'une table à partir d'une sauvegarde 'plain text SQL' faite, par exemple, avec pg_dumpall

1.  se positionner dans le répertoire [/data/bkp/] contenant le fichier de sauvegarde [pg_full_bak.dmp]

> ```
> $ cd /data/bkp/
> $ ls -l 
> ```

2.  extraire les données de la table "ma_table" du schéma "public" dans le fichier {ma_table.sql}

> ```
> $ sed -n '/^COPY public.ma_table /,/^\\\.$/p' pg_full_bak.dmp > ma_table.sql
> $ ls -l 
> ```

3.  s'assurer que les données Sont bien celles 出席者

    > ```
    > $ less ma_table.sql 
    > ```

4.  se connecter sur la base [db_name] contenant la table [ma_table] vide à restaurer, avec un compte ayant les droits en écriture sur la table [ma_table]

    > ```
    > $ psql -d db_name 
    > ```

5.  vérifier que la table à restaurer [ma_table] est bien vide

> ```
> postgres@db_name# select count(*) nb from ma_table ;
> +------+
> |  nb  |
> +------+
> |   0  |
> +------+ 
> ```

6.  => 进口商 les données effacées <=

    > ```
    > postgres@db_name# \i ma_table.sql 
    > ```

7.  vérifier que les données ont bien été importées

    > ```
    > postgres@db_name# select count(*) nb
    > from ma_table
    > ;
    > +-------+
    > |   nb  |
    > +-------+
    > | 9876  |
    > +-------+ 
    > ```

这在 pg **9.3下对我有用**

**最简单的方法：步骤 2、4 和 6**

# c# - 在 MVC3 中通过邮件发送 Zip 文件

> ID：14826863
> 
> 赞同：0
> 
> 时间：2013-02-12T06:37:26.513
> 
> 标签：c#, asp.net-mvc-3

我已经使用**ICSharpCode.SharpZipLib.Zip**库来创建 Zip 文件，它工作正常，但是当我将此 Zip 文件附加到邮件附件时，由于附加的 zip 文件，邮件不会发送，

这是将 zip 文件附加到邮件的代码

```
System.Net.Mail.Attachment attachment = null;
                try
                {
                    MemoryStream memoryStream = new MemoryStream();
                    attachment = new System.Net.Mail.Attachment(memoryStream, "test.zip");
                }
                catch (Exception e)
                {
                    return false;
                } 
```

请知道我如何通过邮件发送 zip 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:41:12.540

你的代码

```
MemoryStream memoryStream = new MemoryStream();
attachment = new System.Net.Mail.Attachment(memoryStream, "test.zip"); 
```

传递了一个 Stream，但该 Stream 是空的（ 中没有任何内容`memoryStream`）。

如果要使用 MemoryStream，则必须将 ZIP 文件的内容读入内存。如果 ZIP 已在磁盘上，您也可以使用 FileStream。

如果使用 MemoryStream，请确保将其位置设置为 0。

```
memoryStream.Position = 0; 
```

根据您使用 SharpZipLib 的方式，您可能有权访问[ZipOutputStream](http://www.icsharpcode.net/CodeReader/SharpZipLib/031/ZipZipOutputStream.cs.html)。如果你这样做，我认为你可以使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:41:41.723

这个问题可能有很多原因，

1.  检查文件日期和时间
2.  文件大小（基于服务器设置）
3.  尝试不同的格式（rar、7z 等）

# java - 在java中制作扩展类的arraylist

> ID：14826869
> 
> 赞同：1
> 
> 时间：2013-02-12T06:38:09.837
> 
> 标签：java, oop, arraylist

如果我创建一个扩展类对象的arrayList 可以吗？

前任：

```
Class A {
  private aa;
}
Class B extends A {
  private ArryList <A>;
} 
```

我希望我的 B 类应该具有 A 的所有值和 A 的数组列表。

除了制作两个具有相同参数的不同类之外，还有其他方法吗？

或者这种方法对我有用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:44:04.450

我认为您需要像这样使用getter和setter：

```
Class A {
  private int aa;
  public int getAA(){
    return aa;
  }
  public void setAA(int aa){
    this.aa = aa;
  }
}
Class B extends A {
  private ArryList <A> aaa;
} 
```

你也可以像@Pradeep Simha 说的那样做`protected int aa`，现在你可以从 B 类访问 aa 字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:49:11.923

你的设计应该有效。

```
class Reply
{

}

class Comment extends Reply 
{
    private List<Reply> repliesToComment;
} 
```

# android - attrs.xml 中的 Android 常量

> ID：14826872
> 
> 赞同：0
> 
> 时间：2013-02-12T06:38:25.663
> 
> 标签：android

我看到在 android attrs.xml (data/res/values/attrs.xml) 中声明的维度常量，例如

```
<attr name="padding" format="dimension" />
<!-- Sets the padding, in pixels, of the left edge; see {@link android.R.attr#padding}. -->
<attr name="paddingLeft" format="dimension" />
<!-- Sets the padding, in pixels, of the top edge; see {@link android.R.attr#padding}. -->
<attr name="paddingTop" format="dimension" />
<!-- Sets the padding, in pixels, of the right edge; see {@link android.R.attr#padding}. -->
<attr name="paddingRight" format="dimension" /> 
```

如果我是正确的，则该值在 `./data/res/values/styles.xml`as `<item name="android:paddingLeft">20dp</item>`等中定义。

这些是某种“首选”尺寸值吗？这些值在发布之间是否相对稳定，以便直接使用这些常量不会影响外观。

谢谢。

编辑：

为了澄清一点，我想知道在我的视图布局中使用这些“android”定义的值的含义，比如。

```
<TextView android:text="@string/text"
    android:layout_width="wrap_content"
    android:layout_height="?android:attr/listPreferredItemHeightSmall"
    android:paddingStart="?android:attr/expandableListPreferredItemPaddingLeft"/> 
```

我没有定义这些值，而是在 android 命名空间中引用它。这样做安全吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:44:50.257

正如您可以`Drawables`使用不同的后缀创建一样，`Layouts`使用后缀，您可以通过不同的后缀创建`values`目录，例如

```
values
values-large "or" values-sw600dp
values-xlarge "or" values-sw720dp 
```

在此，您可以创建常量。这将有助于创建动态布局。

假设您需要为普通屏幕和平板电脑创建布局，两者都需要不同的间距。那你会怎么做？创建两个不同的布局？或者只是在`values`目录中添加两个条目？

答案是`values`目录。它的高效。

**编辑**

布局.xml

```
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="@dimen/margin_left"> 
```

你已经定义了`margin_left`里面`values`和`values-sw600dp`目录，比如

```
<dimen name="margin_left">20dp</dimen>

<dimen name="margin_left">40dp</dimen> 
```

分别。这将为您提供更多想法来创建一种`layout`有效的处理方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:42:24.967

我不确定我是否正确理解了这个问题，但如果你使用独立的单位，如 dp、dip、sp 等，而不是像素的原始值，那么它在不同的设备上看起来是一样的。您可以在这里阅读：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# c# - 如何在 C# 中读取超过 0x20 的字符串？

> ID：14826873
> 
> 赞同：0
> 
> 时间：2013-02-12T06:38:35.860
> 
> 标签：c#, string, space, smartcard-reader

我正在尝试通过读卡器（ACS Reader）读取存储在智能卡中的数据，该驱动程序附带了一些我导入到我的 C# .NET 应用程序中的 DLL（提供读写功能）

我现在面临的问题是读取函数（int readValue(ref data (of string data type), int sector #, key etc.)），而我现在尝试读取的数据中有 SPACE (0x20) ，说#### ## ##等。

我在阅读时得到的输出只到第一个空格 #### 而不是整个块。

有没有办法可以避免这个问题？说我可以强制字符串类型理解空格吗？

我之前使用的是用 VS C++ 6 编写的早期应用程序，现在我正在尝试迁移到 C#。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:24:36.510

试试这个：[.NET 的智能卡框架](http://www.codeproject.com/Articles/16653/A-Smart-Card-Framework-for-NET)

# c# - 在 localhost 上创建文件（Web 服务器物理路径）

> ID：14826876
> 
> 赞同：0
> 
> 时间：2013-02-12T06:39:08.733
> 
> 标签：c#, asp.net

目前我在**asp.net**网站上工作，我对 asp.net 不是很熟悉。我有一个`WebForm`，当用户单击**提交**按钮时，`.txt`应该在服务器上创建一个文件（文本文件名是用户输入的唯一 ID。）
我使用以下内容创建文件。

```
File.Create( Server.MapPath("~") + id + @".txt"); 
```

但是，当站点在我的电脑的本地主机上运行时，这给了我错误。
**拒绝访问路径“C:\inetpub\wwwroot\XXX\YYY.txt”。**

这与访问权限有关。我应该怎么做才能解决这个问题。请给我建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:40:27.330

将 NETWORK SERVICE 的写入权限添加到相关文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T18:15:02.427

```
File.Create(@"\\127.0.0.1\www\test\test.txt"); 
```

# regex - 正则表达式 re 非英文字符

> ID：14826879
> 
> 赞同：1
> 
> 时间：2013-02-12T06:39:19.340
> 
> 标签：regex, actionscript-3

今天一直致力于让一个正则表达式工作在付钱给几个人给我写一个执行以下操作（他们都做不到）之后......

允许所有英文字母数字字符，允许所有非英文字母数字字符，例如日语、西班牙语重音等...，并允许此标点符号`)('$!.,&`

我以为我通过消除所有我不想要的标点符号来破解它，但后来意识到它会让一堆其他不需要的字符，例如项目符号...

```
_string = string.replace(/[\"\#\%\*\+\/\:\;\<\=\>\?\@\[\\\]\^\_\`\\{\|\}\~]/g, ""); 
```

（在 AS3 中）

我也一直在尝试结合`\p{L}` `\p{Nd}`计算`)('$!.,&`他们会让所有语言中的所有字母数字字符通过，然后是标点符号，但还没有破解。

那么有没有办法做到这一点（对于 AS3？） - 允许任何语言的任何字母数字字符，加上这个标点符号`)('$!.,&`

我很乐意付钱给能做到的人。

谢谢参观。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:13:49.323

您可以使用`\uXXXX`元序列来指定字符的 unicode id，但您必须手动为每种语言添加范围。我使用过的最流行语言（非亚洲语言）的一些范围：

```
zh:
AaBbCcDdEeFfGgHHIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz

茹：
АаБбВвГгДдЕеЁёЖжЗзИиЙйКкЛлМмНнОоПпРрСсТтУуФфХхЦцЧчШшЩщЪъЫыЬьЭэЮюЯя

点：
ÁÂÃÀÇÉÊÍÓÔÕÚÜáâãàçéêíóôõúü

德：
abcdefghijklmnopqrstuvwxyzäöüßABCDEFGHIJKLMNOPQRSTUVWXYZÄÖÜ

左：
aābcčdeēfgģhiījkķlļmnņoprsštuūvzžAĀBCČDEĒFGĢHIĪJKĶLĻMNŅOPRSŠTUŪVZŽ

请：
aąbcćdeęfghijklłmnńoóprsśtuwyzźżAĄBCĆDEĘFGHIJKLŁMNŃOÓPRSŚTUWYZŹŻ

tr：
abcçdefgğhıijklmnoöprsştuüvyzABCÇDEFGĞHIİJKLMNOÖPRSŞTUÜVYZ

等：
abcdefghijklmnopqrsšzžtuvwõäöüxyABCDEFGHIJKLMNOPQRSŠZŽTUVWÕÄÖÜXY

[所有字符]：
ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyzÀÁÂÃÄÇÉÊÍÓÔÕÖÚÜßàáâãäçéêíóôõöúüĀāĄąĆćČčĒēĘęĞğĢģĪīİıĶķĻļŁłŃńŅņŚśŞşŠšŪūŹźŻżŽžЁАБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмнопрстуфхцчшщъыьэюяё

RegExp 匹配所有 [ALL CHARS]：
[\u0041-\u005A,\u0061-\u007A,\u00C0-\u00C4,\u00C7,\u00C9-\u00CA,\u00CD,\u00D3-\u00D6,\u00DA,\u00DC,\u00DF-\u00E4,\ u00E7,\u00E9-\u00EA,\u00ED,\u00F3-\u00F6,\u00FA,\u00FC,\u0100-\u0101,\u0104-\u0107,\u010C-\u010D,\u0112-\u0113,\u0118- \u0119,\u011E-\u011F,\u0122-\u0123,\u012A-\u012B,\u0130-\u0131,\u0136-\u0137,\u013B-\u013C,\u0141-\u0146,\u015A-\u015B ,\u015E-\u0161,\u016A-\u016B,\u0179-\u017E,\u0401,\u0410-\u044F,\u0451]+

```

# iphone - 确定 GKSession 蓝牙设备何时超出范围

> ID：14826882
> 
> 赞同：0
> 
> 时间：2013-02-12T06:39:36.487
> 
> 标签：iphone, bluetooth, p2p, gksession

我正在使用`GKSession, GKSessionDelegate`在多个 iX（iPod、iPad、iPhone 等）设备之间实现对等蓝牙连接。我想显示*range*中当前可用/连接的设备的列表。

我目前依赖

`- (void)session:(GKSession *)session peer:(NSString *)peerID didChangeState:(GKPeerConnectionState)state`

去做这个。不幸的是，当设备超出范围时，似乎无法可靠地调用此方法。是否有“更好”的方法来确定设备是否在范围内？

一些代码：

```
- (void)session:(GKSession *)session peer:(NSString *)peerID didChangeState:(GKPeerConnectionState)state {

    NSString* connectionStateString=
    (state==GKPeerStateAvailable)?@"available":
    (state==GKPeerStateUnavailable)?@"unavailable":
    (state==GKPeerStateConnected)?@"connected":
    (state==GKPeerStateDisconnected)?@"disconnected":@"connecting";
    // Add the peer to the Dictionary
    NSArray* details=[NSArray arrayWithObjects:[session displayNameForPeer:peerID],connectionStateString,nil];
    [connectionPeers setObject:details forKey:peerID];

    if (state == GKPeerStateAvailable) {
        NSLog(@"Adding peerID:%@",peerID);
        [session connectToPeer:peerID withTimeout:60];//'connect' to everything, so data can be sent
    }
    else if (state == GKPeerStateUnavailable || state==GKPeerStateDisconnected) {
        [connectionPeers removeObjectForKey:peerID];
    }
    [self listPlayers];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:34:29.340

GKSession 建立在 Bonjour over Bluetooth 之上，我相信您的问题是 bonjour 服务仍显示为活动状态，因为当对等方与网络断开连接时，Bonjour 不会使服务广告无效。我认为 mDNS 记录仅在发生 mDNS 缓存超时（您无法调整）或广告对等方手动使服务无效时才会过期。

我认为 GKSession 不会轻易地通过广告在这里做你想做的事。但是，一旦超出蓝牙范围，已连接的对等方应断开连接。

# opencv - OpenCV相机标定使用旋转矩阵

> ID：14826883
> 
> 赞同：2
> 
> 时间：2013-02-12T06:39:38.140
> 
> 标签：opencv, image-processing, computer-vision

[http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#calibratecamera](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#calibratecamera)

我使用 cv::calibrateCamera 方法和 9*6 棋盘图案。现在我得到了每个模式对应的 rvecs 和 tvecs，有人可以解释一下 rvecs 和 tvecs 的格式吗？据我所知，每个都是 3*1 矩阵。并且 OpenCV 文档建议查看 Rodrigues 函数。

[http://en.wikipedia.org/wiki/Rodrigues'_rotation_formula](http://en.wikipedia.org/wiki/Rodrigues%27_rotation_formula)

就罗德里格斯而言，这是一种以角度θ围绕给定轴旋转矢量的方法。但为此我们需要四个值单元 Vector(ux,uy,uz) 和角度。但 openCV 似乎只使用 3 个值。

OpenCV 罗德里格斯文档参考以下链接[http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#void Rodrigues(InputArray src, OutputArray dst, OutputArray jacobian)](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#void%20Rodrigues%28InputArray%20src,%20OutputArray%20dst,%20OutputArray%20jacobian%29)

表示它将把 3*1 矩阵转换为 3*3 旋转矩阵。这个矩阵和我们使用 3D 图形的矩阵一样吗？我可以将其转换为 4*4 矩阵并将其用于如下转换吗

M4X4 [

xxx 0

xxx 0

xxx 0

0 0 0 1

]

x ：是罗德里格斯函数的输出 3by3 矩阵的值。关系是否有效：

Vout = M4X4 * Vin；使用上面的矩阵。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:42:13.330

3x1 旋转向量可以通过向量指向的**方向定义旋转轴和向量****大小**定义角度来表示旋转矩阵。使用 opencv 函数`Rodrigues(InputArray src, OutputArray dst)`，您可以获得适合您描述的函数的旋转矩阵。

# c# - 理解 lambda 参数语法

> ID：14826887
> 
> 赞同：2
> 
> 时间：2013-02-12T06:40:12.510
> 
> 标签：c#, .net, lambda

```
 static uint Fibonacci(uint n)
    {
        return n <= 1 ? n : Fibonacci(n - 1) + Fibonacci(n - 2);
    }

Func<uint> fibN = () => Fibonacci(n);
Func<int, int, int> add = (a, b) => a + b; 
```

我了解添加函数语法：它返回 a + b 语句的 int 结果，其中 int a 和 b 参数“进入”。

但是为什么 fibN 函数有空参数 block () ？n 不是“去”这个函数作为参数吗？请帮助我掌握对这一刻的一些理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:46:42.390

你的第一个 lambda：

```
Func<uint> fibN = () => Fibonacci(n); 
```

没有任何参数。因为现在它不会编译，因为变量 n 是必需的。此变量可以来自 lambda 参数，也可以来自当前范围。由于 lambda 没有参数，并且当前范围内不存在变量 n，因此它不会编译。

要使其编译，您可以执行以下操作：

```
uint n = 1; // Or any other value
Func<uint> fibN = () => Fibonacci(n); 
```

注意：使用像您的第一个 lambda 一样的 lambas 语句，您将依赖于当前范围来执行它们。因此，编译的匿名方法不是静态的。另一方面，您的第二个 lambda 语句不依赖于当前范围（因为它使用的所有变量都是 lambda 参数），并且此 lambda 被编译为静态匿名方法。这可能会帮助您了解如何编译 lambda 语句。基本上 lambda 语句被编译成普通的匿名方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T06:47:20.483

功能：

```
Func<uint> fibN = () => Fibonacci(n); 
```

可以改写如下，假设`n`是一个类变量：

```
private uint fibN() {
    return Fibonacci(n);
} 
```

因此 fibN 返回 uint，但不需要输入参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T06:50:04.390

考虑以下代码：

```
class Program
{
    static void Main(string[] args)
    {
        Func<uint> fibN = () => Fibonacci(n);
    }

    static uint Fibonacci(uint n)
    {
        return n <= 1 ? n : Fibonacci(n - 1) + Fibonacci(n - 2);
    }
} 
```

只要没有`n`合适类型的变量可以使用，它就不会出现。但是，如果您添加：

```
uint n = 5; 
```

进入`Main`方法或

```
static uint n = 5; 
```

到类，代码将编译。

* * *

让我们拆解。对于以下代码：

```
static void Main(string[] args)
{
    uint n = 3;
    Func<uint> fibN = () => Fibonacci(n);
} 
```

我们得到：

```
.method private hidebysig static void  Main(string[] args) cil managed
{
  .entrypoint
  .maxstack  3
  .locals init ([0] class [mscorlib]System.Func`1<uint32> fibN,
           [1] class Utils.Program/'<>c__DisplayClass1' 'CS$<>8__locals2')
  IL_0000:  newobj     instance void Utils.Program/'<>c__DisplayClass1'::.ctor()
  IL_0005:  stloc.1
  IL_0006:  nop
  IL_0007:  ldloc.1
  IL_0008:  ldc.i4.3
  IL_0009:  stfld      uint32 Utils.Program/'<>c__DisplayClass1'::n
  IL_000e:  ldloc.1
  IL_000f:  ldftn      instance uint32         Utils.Program/'<>c__DisplayClass1'::'<Main>b__0'()
  IL_0015:  newobj     instance void class [mscorlib]System.Func`1<uint32>::.ctor(object,
                                                                              native int)
  IL_001a:  stloc.0
  IL_001b:  nop
  IL_001c:  ret
} // end of method Program::Main 
```

在这段代码中，您可能会发现一个隐藏类`c__DisplayClass1`，我们可以在其中看到一个`uint32`名为的公共字段`n`：

```
.field public uint32 n 
```

和方法`<Main>b__0`：

```
.method public hidebysig instance uint32 
    '<Main>b__0'() cil managed
{
  .maxstack  1
  .locals init ([0] uint32 CS$1$0000)
  IL_0000:  ldarg.0
  IL_0001:  ldfld      uint32 Utils.Program/'<>c__DisplayClass1'::n
  IL_0006:  call       uint32 Utils.Program::Fibonacci(uint32)
  IL_000b:  stloc.0
  IL_000c:  br.s       IL_000e
  IL_000e:  ldloc.0
  IL_000f:  ret
} // end of method '<>c__DisplayClass1'::'<Main>b__0' 
```

它实际上调用`Fibonacci`并传递了`n`变量。所以编译器将局部变量提取`n`到一个单独的类中；以及将 lambda 提取到此类的方法中。最后看起来你分配`c__DisplayClass1.<Main>b__0`给`Func<uint> fibN`.

# python - 列表中的 Python os.path.join()

> ID：14826888
> 
> 赞同：126
> 
> 时间：2013-02-12T06:40:15.950
> 
> 标签：python, python-2.7, os.path

我可以

```
>>> os.path.join("c:/","home","foo","bar","some.txt")
'c:/home\\foo\\bar\\some.txt' 
```

但是，当我这样做时

```
>>> s = "c:/,home,foo,bar,some.txt".split(",")
>>> os.path.join(s)
['c:/', 'home', 'foo', 'bar', 'some.txt'] 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：232
> 
> 时间：2013-02-12T06:40:15.950

问题是，`os.path.join`不`list`作为参数，它必须是单独的参数。

这就是`*`'splat'运算符发挥作用的地方......

我可以

```
>>> s = "c:/,home,foo,bar,some.txt".split(",")
>>> os.path.join(*s)
'c:/home\\foo\\bar\\some.txt' 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-02-12T10:39:05.550

假设`join`不是那样设计的（正如 ATOzTOA 指出的那样），并且它只需要两个参数，您仍然可以使用内置的`reduce`：

```
>>> reduce(os.path.join,["c:/","home","foo","bar","some.txt"])
'c:/home\\foo\\bar\\some.txt' 
```

相同的输出，如：

```
>>> os.path.join(*["c:/","home","foo","bar","some.txt"])
'c:/home\\foo\\bar\\some.txt' 
```

仅出于完整性和教育原因（以及其他`*`不起作用的情况）。

**Python 3 的提示**

`reduce`已移至`functools`模块。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-04-17T16:43:56.597

我偶然发现了列表可能为空的情况。在这种情况下：

```
os.path.join('', *the_list_with_path_components) 
```

注意第一个参数，它不会改变结果。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-02-12T06:44:39.467

这只是方法。你没有错过任何东西。[官方文档](http://docs.python.org/2/library/os.path.html)显示可以使用列表解包来提供几个路径：

```
s = "c:/,home,foo,bar,some.txt".split(",")
os.path.join(*s) 
```

注意`*s`只是`s`in的意思`os.path.join(*s)`。使用星号将触发列表的解包，这意味着每个列表参数将作为单独的参数提供给函数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-06T10:21:31.827

如果您想从函数式编程的角度来考虑，这也可以被认为是一个简单的 map reduce 操作。

```
import os
folders = [("home",".vim"),("home","zathura")]
[reduce(lambda x,y: os.path.join(x,y), each, "") for each in folders] 
```

`reduce`在 Python 2.x 中内置。在 Python 3.x 中，它已移至`itertools`但是接受的答案更好。

这已在下面回答，但如果您有需要加入的项目列表，请回答。

# c++ - 如何使用基于范围的循环语法遍历 STL 容器中的连续对？

> ID：14826893
> 
> 赞同：4
> 
> 时间：2013-02-12T06:40:38.173
> 
> 标签：c++, c++11, iterator

如何创建自定义类以使用基于范围的循环遍历 STL 容器中的连续项对？

这是我想要的语法和输出：

```
std::list<int> number_list;
number_list.push_back(1);
number_list.push_back(2);
number_list.push_back(3);

auto paired_list = Paired(number_list);
for (const auto & pair : paired_list) {
  std::printf("The pair is (%d, %d)\n", *(pair[0]), *(pair[1]));
  // or
  //std::printf("The pair is (%d, %d)\n", *(pair.first), *(pair.second));
}
// output:
// The pair is (1, 2)
// The pair is (2, 3) 
```

我知道需要这些（以及更多），但我无法弄清楚：

```
template <class T>
class Paired {
  ???
  class iterator {
    ???
  }
  iterator begin() {
    ...
  }
  iterator end() {
    ...
  }
} 
```

不用担心`const`修饰符。

没有提升。

不要修改或复制容器中的对象。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-12T09:16:23.060

这就是我要做的。

```
#include <iterator>
#include <utility>

template <typename FwdIt> class adjacent_iterator {
public:
    adjacent_iterator(FwdIt first, FwdIt last)
        : m_first(first), m_next(first == last ? first : std::next(first)) { }

    bool operator!=(const adjacent_iterator& other) const {
        return m_next != other.m_next; // NOT m_first!
    }

    adjacent_iterator& operator++() {
        ++m_first;
        ++m_next;
        return *this;
    }

    typedef typename std::iterator_traits<FwdIt>::reference Ref;
    typedef std::pair<Ref, Ref> Pair;

    Pair operator*() const {
        return Pair(*m_first, *m_next); // NOT std::make_pair()!
    }

private:
    FwdIt m_first;
    FwdIt m_next;
};

template <typename FwdIt> class adjacent_range {
public:
    adjacent_range(FwdIt first, FwdIt last)
        : m_first(first), m_last(last) { }

    adjacent_iterator<FwdIt> begin() const {
        return adjacent_iterator<FwdIt>(m_first, m_last);
    }

    adjacent_iterator<FwdIt> end() const {
        return adjacent_iterator<FwdIt>(m_last, m_last);
    }

private:
    FwdIt m_first;
    FwdIt m_last;
};

template <typename C> auto make_adjacent_range(C& c) -> adjacent_range<decltype(c.begin())> {
    return adjacent_range<decltype(c.begin())>(c.begin(), c.end());
}

#include <iostream>
#include <vector>
using namespace std;

void test(const vector<int>& v) {
    cout << "[ ";

    for (const auto& p : make_adjacent_range(v)) {
        cout << p.first << "/" << p.second << " ";
    }

    cout << "]" << endl;
}

int main() {
    test({});
    test({11});
    test({22, 33});
    test({44, 55, 66});
    test({10, 20, 30, 40});
} 
```

这打印：

```
[ ]
[ ]
[ 22/33 ]
[ 44/55 55/66 ]
[ 10/20 20/30 30/40 ] 
```

笔记：

*   我没有对此进行详尽的测试，但它尊重前向迭代器（因为它不会尝试使用 ++、!= 和 * 之外的操作）。

*   range-for 的要求极弱；它不需要转发迭代器应该提供的所有东西。因此，我已经达到了 range-for 的要求，但仅此而已。

*   “NOT m_first”注释与如何接近范围末端有关。从空范围构造的相邻迭代器具有 m_first == m_next，它也是 == last。从 1 元素范围构造的相邻迭代器具有 m_first 指向该元素和 m_next == 最后。从多元素范围构造的相邻迭代器具有指向连续有效元素的 m_first 和 m_next。随着它的增加，最终 m_first 将指向最后一个元素，而 m_next 将是最后一个。next_range 的 end() 返回的内容是从 (m_last, m_last) 构造的。对于一个完全空的范围，这在物理上与 begin() 相同。对于 1+ 元素范围，这在物理上与 begin() 不同，它在我们不做之前一直递增 t 有一个完整的对 - 这样的迭代器有 m_first 指向最后一个元素。但是如果我们根据它们的 m_next 比较迭代器，那么我们会得到正确的语义。

*   “NOT std::make_pair()”注释是因为 make_pair() 衰减，而我们实际上想要一对引用。（我本可以使用 decltype，但 iterator_traits 也会告诉我们答案。）

*   剩下的主要微妙之处在于禁止将右值作为 make_adjacent_range 的输入（这样的临时人员不会延长他们的生命；委员会正在研究这个问题），并播放 ADL 舞蹈以尊重非成员的开始/结束，以及内置 -在数组中。这些练习留给读者。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T07:57:43.863

*编辑*我正在使用`transform`的 .

使用[`adjacent_difference`](http://en.cppreference.com/w/cpp/algorithm/adjacent_difference).

第二个版本采用二进制函数，将两个值转换为新的（不同的）值：

```
string make_message(int first, int second) {
    ostringstream oss;
    oss << "The pair is (" << first << ", " << second << ")";
    return oss.str();
} 
```

我们现在可以将相邻对转换为第三个范围。我们将使用`ostream_iterator`to`cout`像一个范围：

```
list<int> numbers;
//...
adjacent_difference(numbers.begin(), numbers.end(),
                    ostream_iterator<string>(cout, "\n"),
                    make_message); 
```

*第二次编辑*

我在[comp.lang.c++.moderated](http://compgroups.net/comp.lang.c++.moderated/adjacent-convenience-algorithms-on-ad/73154)上发现了一个问题，询问为什么标准库中没有更多的“相邻”函数，例如`for_each_adjacent`. 回复说他们使用[`std::mismatch`](http://en.cppreference.com/w/cpp/algorithm/mismatch).

我认为这将是比实现特殊的相邻迭代器更好的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T08:46:39.600

试试这个。

```
#include <list>
#include <iostream>

template<class T, class TIter = typename T::iterator, class TVal = typename T::value_type>
class PairedImpl {
    T& m_t;
public:
    class Iter {
        TIter m_it;
    public:
        Iter(const TIter & it) : m_it(it)  {}

        bool  operator!=(const Iter& it)   {         return m_it != it.m_it; }
        Iter& operator++()                 { ++m_it; return *this; }
        const Iter & operator *() const    {         return *this; }
        const TVal & first()      const    {         return *m_it; }
        const TVal & second()     const    {         return *std::next(m_it); }
    };

    PairedImpl(T& t) : m_t(t) {}

    Iter begin() { return Iter(m_t.begin()); }

    Iter end() {
        TIter end = m_t.end();
        return Iter(m_t.empty() ? end : --end);
    }
};

template<class T>
PairedImpl<T> Paired(T& t) {
    return PairedImpl<T>(t);
} 
```

用法

```
int main()
{
    std::list<int> lst;
    lst.push_back(1);
    lst.push_back(2);
    lst.push_back(3);
    lst.push_back(4);
    lst.push_back(5);

    for (const auto & pair : Paired(lst)) {
        std::cout << "(" << pair.first() << ", " << pair.second() << ")" << std::endl;
    }
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-12T08:01:10.943

好的，一个小时没有答案，我想出了一个可行的解决方案。请注意，这使用了我自己的`FixedLengthVector`，这正是它听起来的样子。

```
template <class T>
class Grouped {
private:
  // length of grouped objects
  static const unsigned length_ = 2;
  // hold pointer to base container to avoid comparing incompatible iterators
  T * base_container_;
public:
  // constructor
  Grouped(T & base_container) :
      base_container_(&base_container) {
  }
  // iterator
  class iterator {
  private:
    // hold pointer to base container to avoid comparing incompatible iterators
    T * base_container_;
    // hold pointers to objects in base container
    FixedLengthVector<length_, typename T::value_type *> ptr_;
    // hold iterator to last object
    typename T::iterator last_iterator_;
  public:
    // constructor
    iterator(T & base_container, typename T::iterator & it)
        : base_container_(&base_container),
          last_iterator_(it) {
      // set up pointers if possible
      unsigned i = 0;
      // check for end iterator
      if (last_iterator_ == base_container_->end()) {
        ptr_.fill(NULL);
        return;
      }
      // set up first object
      ptr_[0] = &*last_iterator_;
      // set up next objects
      for (unsigned i = 1; i < length_; ++i) {
        ++last_iterator_;
        if (last_iterator_ == base_container_->end()) {
          ptr_.fill(NULL);
          return;
        }
        ptr_[i] = &*last_iterator_;
      }
    }
    // dereference operator
    FixedLengthVector<length_, typename T::value_type *> & operator * (void) {
      assert(ptr_[0] != NULL);
      return ptr_;
    }
    // pre-increment
    iterator & operator ++ (void) {
      // can't increase past end
      assert(last_iterator_ != base_container_->end());
      // find next iterator
      ++last_iterator_;
      if (last_iterator_ == base_container_->end()) {
        ptr_.fill(NULL);
        return * this;
      }
      // cycle pointers left
      for (unsigned i = 1; i < length_; ++i) {
        ptr_[i - 1] = ptr_[i];
      }
      ptr_[length_ - 1] = &*last_iterator_;
      return * this;
    }
    // equality comparison
    bool operator == (const iterator & that) const {
      return base_container_ == that.base_container_ &&
             last_iterator_ == that.last_iterator_;
    }
    // inequality comparison
    bool operator != (const iterator & that) const {
      return !(*this == that);
    }
  };
  // end iterator
  iterator end() {
    return iterator(*base_container_, base_container_->end());
  }
  // begin iterator
  iterator begin() {
    return iterator(*base_container_, base_container_->begin());
  }
}; 
```

# ruby-on-rails - 在控制器中使用 Bootstrap Navbar 选项？

> ID：14826894
> 
> 赞同：0
> 
> 时间：2013-02-12T06:40:39.313
> 
> 标签：ruby-on-rails

所有，我正在尝试使用 Bootstrap Navbar 用户选项来控制向用户显示的帖子的过滤。

该模型包括一个“过期”字段，它是一个日期时间类型。

三个选项是：All（无过滤）、Open（仅显示未解决的问题）和 Closed（显示已关闭）。有没有办法在不定义三个不同`index.html.erb`变体（DRY 问题）的情况下做到这一点。如果`@post.expired < Time.now`.. 等，过滤器应该只显示已关闭的问题。

换一种说法——控制器可以“知道”用户选择了什么，尽管我正在使用的导航栏只是一个花哨的导航工具栏？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:52:21.097

通常这是通过在请求中包含一个参数并在控制器中查找该参数来完成的。引导导航栏使用常规锚链接，因此您应该能够轻松地向它们添加参数（来自[doc](http://twitter.github.com/bootstrap/components.html#navbar)的修改示例）：

```
<div class="navbar">
  <div class="navbar-inner">
    <a class="brand" href="/some_url">List</a>
    <ul class="nav">
      <li><a href="/some_url">All</a></li>
      <li><a href="/some_url?filter=open">Open</a></li>
      <li><a href="/some_url?filter=closed">Closed</a></li>
    </ul>
  </div>
</div> 
```

您可以`filter`通过访问 的值来读取控制器中的参数`params[:filter]`。

# flash - Flash 和 SWFUpload I/O 错误 #2038 仅在 Chrome 上（Flash 错误或？）

> ID：14826905
> 
> 赞同：0
> 
> 时间：2013-02-12T06:41:39.930
> 
> 标签：flash, swfupload

我正在使用 SWFUpload。这里：

[http://devservices.northcarolina.edu/lcl/ded_unco/uploadtest.php](http://devservices.northcarolina.edu/lcl/ded_unco/uploadtest.php)

如果您尝试上传文件，Flash 会给出错误 #2038。此错误仅在 Chrome 上发生。它在 IE、Safari、Firefox、Opera 中运行良好。

我可以确认服务器正在发回 200。我还可以确认整个文件已被传输。但是，不知何故，在 Chrome 中，flash 将其转换为 IOErrorEvent.IO_ERROR,"Error #2038"。它在我拥有的所有其他浏览器中都可以正常工作。如何阻止此错误的发生？

铬版：24.0.1312.57 m

操作系统：Windows 7

Chrome 扩展：无

Flash 版本：11,5,31,139

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:02:01.530

Flash 版本：11,5,31,139?? 听起来您正在使用有一些错误的内置 Chrome Flash 插件（称为 Pepper Flash）。禁用 Pepper Flash 并尝试从 Adob​​e 站点安装的最新 Adob​​e Flash 插件。

# xquery - 使用 marklogic 和 xdmp 发送电子邮件

> ID：14826908
> 
> 赞同：0
> 
> 时间：2013-02-12T06:41:46.960
> 
> 标签：xquery, marklogic

我浏览了产品库，发现有一种方法叫做`xdmp:email($node)`，它只能使用一种叫做`smtp`中继（？）的东西来发送电子邮件，它确实`NOT`需要任何身份验证。如何使用我的电子邮件发送电子邮件，例如具有以下配置：

```
outgoing smtp server: smtp.gmail.com
smtp port: 465
username: username@gmail.com
password: ****
Use secure connection: true. 
```

`send email`当我们自动化“ ”过程时，这组参数很常见。现在，在 marklogic 中，我们有一个名为的方法`xdmp:email`，它没有提供任何地方来指定这些参数。那么我们如何在 marklogic 中发送电子邮件呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:37:56.140

设置一个本地 smtp 中继，它只侦听本地连接，不需要登录，但充当更智能主机的身份验证中继。在您的示例中，更智能的主机可能是 google。

例如，如果您想使用 postfix 作为您的身份验证中继，您可以按照[http://www.postfix.org/SOHO_README.html](http://www.postfix.org/SOHO_README.html) “在 Postfix SMTP/LMTP 客户端中启用 SASL 身份验证”下的说明进行操作。

# ios - 目标c（ipad）dismissViewControllerAnimated不工作

> ID：14826912
> 
> 赞同：1
> 
> 时间：2013-02-12T06:42:19.000
> 
> 标签：ios, objective-c, xcode, ipad, uisplitviewcontroller

如果需要登录，我有一个 splitviewcontroller 会调用 loginview 控制器。这就是我所说的模态视图

```
if([[NSUserDefaults standardUserDefaults] objectForKey:@"username"] == nil){
        [self performSegueWithIdentifier:@"LoginSegue" sender:self];
    } 
```

这就是我的故事板的样子：

```
 --- uinavigation
                       - masterview |
uispliviewcontroller
                       - detailview |
                                    --- main dashboard view -(LoginSegue)--loginviewcontroller
                                             |
                                             |------ another viewcontroller 
```

现在我可以毫无问题地进入登录视图，然后我会尝试关闭模式，以便它可以使用它返回到主仪表板视图

```
if([[NSUserDefaults standardUserDefaults] objectForKey:@"username"] != nil){

        [self dismissViewControllerAnimated:YES completion:nil];
    } 
```

但它不会做任何事情。

想知道如何正确关闭登录后调用的模式视图？

非常感谢任何建议。

谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T06:51:54.983

对于登录，模式演示可能更有意义。与其将它与 segue 连接，不如给 LoginViewController 一个 Storyboard ID，例如“LoginViewController”。（删除segue，在storyboard中选择login vc，在identity inspector中找到storyboard id字段）。

然后，而不是`performSegue`，这样做......

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
UIViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"LoginViewController"];
[self presentViewController:vc animated:YES completion:^{}]; 
```

完成此操作后，dismiss 将按您的预期运行。

# html - 在 CSS 中遇到 80% 高度的问题，目前没有找到解决方案。

> ID：14826913
> 
> 赞同：0
> 
> 时间：2013-02-12T06:42:21.193
> 
> 标签：html, css

我正在尝试为游戏社区创建一个网站。该网站应该是非常简约的，标题/导航覆盖页面的 100%x20%，主要内容覆盖 100%x80%。我让 div 显示出来，但我似乎无法让它们正确定位自己。由于我不得不使用“位置：绝对；” 我真的不知道如何使这些事情正常工作。请记住，我对 HTML/CSS 还是很陌生。

```
<!DOCTYPE html>

<html style="height:100%;">
<head>
<title>ESI | Missioners and Miners Haven</title>
<link rel="stylesheet" type="text/css" href="styles/styles.css" />
</head>

<body style="height:100%;">
<div id="contianer">

<div id="navbar">

<div id="logobox">
<p>ESI Official Site</p>
</div>

<ul>
    <li><a href="#">Sign Up!</a></li>
    <li><a href="#">ESI Blog</a></li>
    <li><a href="#">Corp Op's</a></li>
    <li><a href="#">Home</a></li>
</ul>

</div>

<div id="content">

</div>

</div>

</body>
</html> 
```

这就是 HTML，这是 CSS 的重要部分：

```
#container
{
width:100%;
height:100%;
}

#navbar
{
width:100%;
height:20%;
background:#35291F;
list-style:none;
float:left;
position:absolute;
}

#content
{
margin:10%;
width:90%;
height:80%;
background:grey;
position:absolute;
} 
```

我知道这个问题已经被问过很多次了，但我在这个网站上找到的解决方案都没有奏效。

感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:03:02.493

`margin:10%`会给所有人10％（左上右下）。

给`margin-top`

如果位置是绝对的，则不需要浮动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:59:42.557

[http://jsfiddle.net/rainthinks/t23bD/1/](http://jsfiddle.net/rainthinks/t23bD/1/)

全屏模式：http: [//jsfiddle.net/rainthinks/t23bD/1/embedded/result/](http://jsfiddle.net/rainthinks/t23bD/1/embedded/result/)

```
html, body, #container {
    height:100%;
}
#navbar {
    height:20%;

    background:#35291F;
    list-style:none;
}
#content {
    height:80%;

    background:grey;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T06:52:59.247

你不能用`%`我知道的 a 来指定高度。你可能会想用`px`这个。你应该问自己的是，100% 对你来说是什么？因为窗口的高度和它的高度一样可变。当您在 CSS 中指定百分比时，这些元素包含其父容器的该百分比。你不会想要绝对定位这些元素。您也不需要指定`body`or`html`元素的高度。如果不从视觉上看你到底想完成什么，很难告诉你你的价值观应该是什么，但从那里开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T06:55:45.413

这是你想要的吗？

```
#content
{
    margin-top:20%;
    width:100%;
    height:80%;
    /* ... */
} 
```

[http://jsfiddle.net/WJrW3/](http://jsfiddle.net/WJrW3/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T06:53:50.503

如果要为此使用绝对定位，则需要`top`适当设置以`#content`向下移动。

其他几件事：

*   不要设置内联样式（你的 html 和 body 标签）。使用您的样式表。
*   为什么`float`开`#navbar`？该元素已经定位`absolute`。
*   `margin`on`#content`适用于所有方向（也适用于顶部和底部）。

[JS Bin 演示](http://jsbin.com/oxebac/1/edit)

# java - Eclipse 不会为匿名类推断泛型吗？

> ID：14826917
> 
> 赞同：1
> 
> 时间：2013-02-12T06:42:43.847
> 
> 标签：java, eclipse, generics

以下 java 代码在 Eclipse 中以红色突出显示，*但编译良好*。IDE错误是：

> 类型不匹配，无法从类型`Optional<Runnable>`转换 `Optional<new Runnable>`

从推断的泛型来看，编译器应该没问题，但我的 IDE 失败了。Eclipse 中某处是否存在不正确的设置？

```
Optional<Runnable> o;

o = Optional.of(new Runnable() {
  @Override
  public void run() {

  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:45:07.030

这应该是：

```
Optional <Runnable> o;

o = Optional.<Runnable>of (new Runnable () {
    @Override
    public void run () {
        /* your code here */
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T07:00:02.270

在 Eclipse 下启用 Java 7 后，需要两行代码来处理您的语法：

```
Runnable t = new Runnable(){@Override public void run() {/**/}};
Optional< Runnable > o = Optional.of( t ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T07:13:16.707

正如其他人指出的那样，两行或 Optional.<Optional>of() 是必要的。

javac (jdk 1.7) 失败：

```
错误：不兼容的类型
  o = Optional.of(new Runnable() {
                 ^
  必需：可选<Runnable>
  发现：可选<<匿名可运行>>
1 个错误

```

javac (jdk 1.6) 也失败了：

```
不兼容的类型
发现：可选<<匿名 java.lang.Runnable>>
必需：可选<java.lang.Runnable>
  o = Optional.of(new Runnable() {
                 ^
1 个错误

```

所以这似乎是定义的 Java 行为，但不知道为什么。

# sql - 根据 Case 或 If 语句选择列

> ID：14826919
> 
> 赞同：0
> 
> 时间：2013-02-12T06:43:00.207
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我不想根据条件/参数显示列我想要的是

```
if(@SelectFlag==true)
    select name,Address,salary,CreatedBy from employee
else (@UpdateFlag==true)
    select name,Address,salary from employee    
    -- in this case i don't require the column "CreatedBy" 
```

如何根据上述情况进行查询或存储过程..

感谢和问候..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:47:54.417

这是创建存储过程的示例，也许您只需要一个参数来指示您要做什么

```
CREATE PROCEDURE procedurenameHere(@EventFlag INTEGER)
AS
    -- @EventFlag
    -- 1 for SELECT
    -- 2 for UPDATE
    IF @EventFlag = 1
        SELECT  name,Address,salary,CreatedBy 
        FROM    employee
    ELSE IF @EventFlag = 2
        SELECT  name,Address,salary, NULL AS CreatedBy 
        FROM    employee
GO 
```

执行：

```
EXEC procedurenameHere 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:48:16.560

使用单个`=`and`1`而不是`true`.

```
if @SelectFlag = 1
  select name, Address, salary, CreatedBy from employee
else
if @UpdateFlag = 1
  select name, Address, salary from employee 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T06:59:37.480

试试这个

表：emp
列：姓名、地址、工资、creditedBy

```
declare My_Block
    p_select_flag emp.SelectFlag%type;
    p_updateFlag  emp.UpdateFlag%type;
BEGIN
    select selectFlag into p_select_flag from emp where name='ASIF';
    select update into p_updateFlag from emp where name='ASIF';

IF p_select_flag = 'TRUE' THEN
    select name,Address,salary,CreatedBy from employee;
ELSIF UpdateFlag = 'TRUE' then
    select name,Address,salary from employee;
END IF;

END My_Block 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T08:39:14.707

U 可以在 SP 内部调用带参数并将一个参数作为 FLAG 作为整数传递：

使用 single = 和 1,2 而不是 true。

1 表示选择和 2 表示更新

```
if @FLAG = 1
  select name, Address, salary, CreatedBy from employee
else
if @FLAG = 2
  select name, Address, salary from employee 
```

# haxe - Neko到底是什么？

> ID：14826920
> 
> 赞同：29
> 
> 时间：2013-02-12T06:43:00.387
> 
> 标签：haxe, neko

我已经开始使用 Haxe 将我的 ActionScript 3 项目转换为 NME，但是，我想知道 Linux 世界中的 Neko 是什么？我搜索了一下，发现它是一只动画猫！

谁能给我解释一下？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-12T09:47:01.117

[对于大多数人来说， Neko](http://nekovm.org/)只不过是 Haxe 的目标。这在技术上并不正确（它确实有自己的语言，并且可能成为其他语言的目标），但对于大多数人来说，Neko 是 Haxe 输出目标之一。

与 Java 虚拟机 (JVM) 可以以多种语言为目标的方式相同（参见[wikipedia](http://en.wikipedia.org/wiki/List_of_JVM_languages#JVM_languages)上的列表），Neko 是一种理论上可以从多种语言写入的字节码格式。然而，对于 Neko，大多数人似乎使用 Haxe 来创建他们的 *.n 文件。

对于 Haxe 程序员，Neko 目标可让您：

*   编写命令行工具和实用程序（例如，haxelib 和 haxedoc 是用针对 Neko 的 Haxe 编写的）
*   编写 Web 应用程序或动态网页 - 使用 mod_neko（或 mod_tora），您可以获得与 PHP 具有相同功能的 Web 处理器，但速度要快一些。
*   使用 NME（最初从 Neko 开始，它代表 Neko Media Engine）创建游戏，并快速编译它们，目标更接近 CPP 的目标，但编译速度更快，并且输出是跨平台的。
*   与 Haxe 密切相关的运行时，可以在宏等中使用 - 因此您可以在宏中使用所有 neko.* 类。

如果您只对定位 SWF 或 JS 感兴趣，那么您可能对 Neko 的需求不大。但是，如果您正在编写服务器端代码，您会欣赏它的性能，如果您正在编写 CPP，您可能会喜欢有一个简单的目标，该目标非常容易编译，而且编译起来非常快，并且行为类似于 CPP。

当然，在 Haxe neko 之外是它自己的语言……但至少在我看来，大多数人只是将它与 Haxe 一起使用。

**更多信息：**

如果您想用 Neko 语言编写（参见[本教程](http://nekovm.org/doc/begin)），您可以将代码保存为“myfile.neko”并使用 编译`nekoc myfile.neko`，这将编译 Neko 字节码文件“myfile.n”。

如果您想用 Haxe 语言编写，您可以将文件保存为“MyFile.hx”并使用“haxe -neko myfile.n -main MyFile”进行编译。

由这两者生成的“myfile.n”没有人类可读的源代码——这是 Neko 字节码。您可以在任何安装了 Neko 的计算机上运行它`neko myfile.n`。您可以通过运行`nekotools boot myfile.n`.

这是[Neko 入门](http://old.haxe.org/doc/start/neko)教程，它涵盖了您编写的命令行程序和（非常非常基本的）网页。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-09-16T11:01:38.497

“Neko”是日语中[“猫”](https://translate.google.com/?ie=UTF-8&hl=en&client=tw-ob#en/ja/cat)的意思，这可能就是你找到你所做的事情的原因。

[Neko](http://nekovm.org/)也是一个虚拟机（“VM”），类似于 Java 虚拟机（“JVM”）或 .Net 公共语言运行时（“.Net CLR”）。

Neko 有一种定制的高级语言，可作为易于定位的语言后端（在某种程度上类似于[C](http://llvm.org/)，但不像[LLVM](https://en.wikipedia.org/wiki/C--)，它更接近于汇编语言）。换句话说：这是一种编程语言可以翻译成的东西，而不是更复杂的“完整”编译（如汇编、字节码或机器码）。Neko 的语言可以翻译成字节码，它是可移植的，通常存储在“.n”文件中。

Neko 是由 Nicolas Cannasse（制作 Haxe 编程语言的人）制作的，这可能就是为什么 Haxe 在其编译器中有一个 Neko 目标，并且 Haxe 工具（例如“haxelib”）使用它。由于这些工具被编译成“.n”文件，它们只需要构建一次，然后它们就可以在任何安装了 VM 可执行文件“neko”的平台上工作。

也许关于 neko 的一个更有趣的地方，以及为什么你应该为 Haxe 开发学习它是它是用于编译时宏的运行时。请参阅[本教程](http://code.google.com/p/hx-macro-examples/wiki/CompileTimeTemplates)，了解如何在编译时运行部分程序并完全访问构建机器，这意味着您甚至可以在编译时执行复杂的任务，例如解析数据文件。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-12T06:46:37.790

> Neko 为几种不同的语言提供了一个通用的运行时，包括 javascript 和 haxe。编译器将源文件 (.neko) 转换为可以在虚拟机上执行的字节码文件 (.n)。您可以将编译器用作独立于虚拟机的独立命令行可执行文件，或用作 neko 库来执行交互式语言的编译和运行。neko 是由 nicolas cannasse 写的。

你可以[在这里找到 Neko 教程](http://blog.presidentbeef.com/neko_tutorial/)

# php - 在主页中动态加载 PHP

> ID：14826921
> 
> 赞同：0
> 
> 时间：2013-02-12T06:43:13.377
> 
> 标签：php, jquery, ajax

当谈到 PHP 和 AJAX 时，我还是个新手，所以我一直遇到问题，在网上搜索了一些想法之后，我发现我做不到了。我正在寻找一种在一个主页上动态加载内容（PHP/HTML 混合）的方法。主页将包含导航，一旦单击此导航中的链接，主内容 div 中的内容就会改变。很简单，对，但我在这个话题上一直很努力。

到目前为止，我最喜欢的方法是 CSS-Tricks [Rethinking Dynamic Page Replacing Content](http://css-tricks.com/rethinking-dynamic-page-replacing-content/)，它使用了 HTML5 History API。我喜欢它允许使用后退和前进浏览器按钮，但我无法让它在 Chrome 中工作。

这不是典型的“帮我弄清楚我的代码出了什么问题”的问题，所以我提前道歉。大多数情况下，我正在寻找一些关于如何最好地解决这个问题的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:58:11.983

去阿贾克斯吧……几周前我也遇到过类似的情况。我对此了解不多，但这个网站很有帮助： [http ://www.w3schools.com/ajax/ajax_example.asp](http://www.w3schools.com/ajax/ajax_example.asp)

它有一些简单的例子可以帮助你理解调用是如何工作的。我希望它有所帮助。很难给出更具体的建议，因为您没有对您的应用程序进行太多解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:57:39.917

这可以通过 AJAX 完成，您将需要一个内容/视图/页面锚来确定加载的内容，然后您可以使用它从您的 php 加载内容，

`#hash`这是用于确定内容的 jQuery 代码片段，因此`http://example.com/#home`将执行 ajax 请求`$_POST['view']='home'`

```
$(function(){
    // Detect hashchange (browser back/forward buttons)
    $(window).bind('hashchange', function() { 
      load_content();
    });
    // Init content
    load_content();
});

function load_content(){
    //get the hash
    var page = window.location.hash;
    page = page.substring(1);
    if(page == ''){
        page='home';
    }

    //get the content, replace any - with / so php can route to sub actions ect
    $.post("./", { 'view': page.replace("-","/") },
    function(data) {
        //load the content into the load container
        $("#load").html(data).fadeIn('slow');
    });
}

<div id="load"></div> 
```

然后你可以简单地在 php 中找到你的脚本的路径：

```
$route      = explode('/',$_POST['view']);
$controller = (!empty($route[0])) ? $route[0] : null;
$action     = (!empty($route[1])) ? $route[1] : null; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T07:04:32.890

这是一个简单的例子，让你理解：

单击导航链接进行 ajax 调用，

```
<p id="test">CLICK ME</p>

<p id="result">Your result</p> 
```

脚本标签内的 Ajax 代码如下：

```
$(document).ready(function() {  

$("#test").click(function(){

    $.ajax({
        url : 'testing.php',
        type : 'GET',
        async : 'true',
        cache : 'false',

        success : function(data, textStatus, xhr)
        {
            $('#result').empty().html(data);
        },
    });

});
}); 
```

注意：ajax 调用 url 可以是 php 或 html 页面，甚至可以是文本文件，您可以在其中将结果显示在主页分区上。

# delphi - 检查组件是否是任一类型

> ID：14826922
> 
> 赞同：0
> 
> 时间：2013-02-12T06:43:22.267
> 
> 标签：delphi

我正在尝试检查组件是否是类型`TMachine`，或者`TLabel` 如果是，我希望它释放它，只要它不是 Label1 或 label2

但它不会让我做`OR` 任何`if Components[I] is (TMachine) or (TLabel) then`方法来解决这个问题？

```
 procedure TfDeptLayout.FormClose(Sender: TObject; var Action: TCloseAction);
var
  I: Integer;
begin
     for I := ComponentCount -1 downto 0 do
      begin
          if Components[I] is (TMachine) or (TLabel) then
              if Components[I].Name <> Label2.Name then
                if Components[I].Name <> label3.Name then
                  components[I].Free;
      end;
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T06:56:54.837

您不能`or`以这种方式使用，您还需要“重复” `is`。

您也不需要使用 Components[I].Name，只需将 Components[I] 引用与 Label1 和 Label2 引用进行比较即可：

```
procedure TfDeptLayout.FormClose(Sender: TObject; var Action: TCloseAction);
var
  I: Integer;
begin
     for I := ComponentCount -1 downto 0 do
     begin
       if (Components[I] is TMachine) or (Components[I] is TLabel) then
         if Components[I] <> Label2 then
           if Components[I] <> label3 then
             components[I].Free;
      end;
end; 
```

也可以（但可能不太可读）组合所有条件：

```
procedure TfDeptLayout.FormClose(Sender: TObject; var Action: TCloseAction);
var
  I: Integer;
  comp: TComponent;
begin
     for I := ComponentCount -1 downto 0 do
     begin
       Comp := Components[I];
       if (Comp is TMachine) then
         Comp.Free
       else if (Comp is TLabel) and (Comp <> Label2) and (Comp <> Label3) then
         Comp.Free;
     end;
end; 
```

顺便说一句，最好给代码中引用的组件一个有意义的名称，而不是使用默认的 Label1、Label2... 名称

# mysql - 为什么在mysql重启后改变表执行

> ID：14826925
> 
> 赞同：0
> 
> 时间：2013-02-12T06:43:43.703
> 
> 标签：mysql, alter-table

我已经阅读了mysql中alter table命令的一些解决方法/替代方法。但是，我发现最快的方法是重新启动 mysql 服务器（当然这不是您想要在生产环境中执行的操作）

mysql重启后alter table执行得更快有什么原因吗

（这是在 AWS EC2 微型实例上 - mysql Ver 14.14 Distrib 5.5.28，对于 debian-linux-gnu (x86_64) 使用 readline 6.2 ）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:05:55.350

1.  桌子上没有锁。进程无需等待；
2.  对磁盘的影响较小，因为 alter 需要大量的磁盘使用。

# c# - 是否可以通过反序列化某些协议来生成 C# 类？

> ID：14826926
> 
> 赞同：1
> 
> 时间：2013-02-12T06:43:45.020
> 
> 标签：c#, wcf, serialization

我需要基于反序列化序列化类生成或定义新类。所以我想将类定义从服务器传输到客户端，以便稍后访问它的属性。

有可能吗？怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:22:27.760

**正确**的做法是为您的服务公开一个[模式定义以](http://msdn.microsoft.com/en-us/magazine/cc163394.aspx#S6)供客户端使用并从中生成强类型类定义，或者向客户端提供带有 DTO 合同定义（类/接口定义）的 DLL。

如果您没有选择这些方法（没有模式和没有带接口的 dll）但仍想生成类定义，则可以以**不正确的方式**从服务的示例数据生成 .cs 类定义（调用服务对次并拦截响应或使用一些[http客户端](http://web-sniffer.net/)）。但是，这种方法并不能保证您将获得准确或/和完整的生成。基本上你可以从：

[XML->XSD->C#](http://msdn.microsoft.com/en-us/library/x6c1kb0s%28v=vs.71%29.aspx) cs 类文件（甚至[直接将 XML 转为 C# cs 文件](http://www.liquid-technologies.com/XmlDataBinding/Xml-Schema-To-Cs.aspx)）或[JSON->C# 类文件](http://json2csharp.com/)

并且将对象反序列化为动态对象，尤其是当您不拥有服务器和客户端代码时，这几乎是您能做的最糟糕的事情。这样，**您就不会将类定义转移到 client**。反序列化到动态对象实际上根本没有反序列化，事实上，它为您提供了一个带有语法糖的字符串字典，可以在运行时将它们作为属性访问，而没有编译时支持，这可能等于一场灾难。简而言之，除非您拥有所有代码，否则不要这样做（这也不是一个好主意，但也许您可以通过某种方式获得）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:46:55.157

传输属性定义和数据本身的一种可移植方式是使用 JSON 序列化程序。

`dynamic`您可以使用 JSON.Net反序列化为对象

[使用 Json.net 将 json 对象反序列化为动态对象](https://stackoverflow.com/questions/4535840/deserialize-json-object-into-dynamic-object-using-json-net)

# svn - Tortoisesvn 中的增量备份

> ID：14826927
> 
> 赞同：0
> 
> 时间：2013-02-12T06:43:46.940
> 
> 标签：svn, tortoisesvn

我必须每天为我的 SVN 存储库执行增量备份。我不想让它自动化，手动命令/脚本执行对我有用。谁能告诉我用于增量备份的命令/脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:01:10.453

您可以生成一系列补丁文件[http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-patch.html](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-patch.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T08:45:43.190

从文件系统的角度来看，Subversion 存储库只是普通的目录。您可以在服务器端使用任何备份工具

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T17:10:29.590

不应通过 TortoiseSVN 进行备份；这应该通过直接访问存储库来完成。请参阅[http://svnbook.red-bean.com/en/1.7/svn.reposadmin.maint.html#svn.reposadmin.maint.backup](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.maint.html#svn.reposadmin.maint.backup)

# javascript - 学习Javascript和jquery的建议

> ID：14826929
> 
> 赞同：0
> 
> 时间：2013-02-12T06:43:55.983
> 
> 标签：javascript, jquery

我想学习 JavaScript。为此，我最近从 OReilly's 购买了一本名为“<em>JavaScript The Good Parts”的书。虽然这本书很老了，但我得到了一些关于这本书的很好的反馈。我想学习从头开始编写纯 JavaScript 代码，然后转向 jquery。这个愿景有什么建议吗？

我还有一个问题，只是出于好奇——是否可以使用 JavaScript 或 jquery 在内部开发桌面应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T06:51:05.697

如果你在谷歌上搜索，那么有很多教程网站，比如

对于 JavaScript

1.  [http://www.w3schools.com/js/default.asp](http://www.w3schools.com/js/default.asp)
2.  [http://www.echocho.com/javascript.htm](http://www.echoecho.com/javascript.htm)
3.  [http://www.tizag.com/javascriptT/](http://www.tizag.com/javascriptT/)
4.  [http://www.tutorialspoint.com/javascript/index.htm](http://www.tutorialspoint.com/javascript/index.htm)
5.  [http://www.quackit.com/javascript/tutorial/](http://www.quackit.com/javascript/tutorial/)

对于 jQuery

1.  [http://www.w3schools.com/jquery/default.asp](http://www.w3schools.com/jquery/default.asp)
2.  [http://docs.jquery.com/Tutorials](http://docs.jquery.com/Tutorials)

并且有很多教程和PDF，但你可以从上面的网址开始

或从这里参考答案[https://stackoverflow.com/tags/javascript/info](https://stackoverflow.com/tags/javascript/info)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T06:52:46.600

尝试： 1\. [http://www.w3schools.com/js/default.asp](http://www.w3schools.com/js/default.asp) - w3schools 的 javascript 教程 2\. [http://www.w3schools.com/jquery/default.asp](http://www.w3schools.com/jquery/default.asp) - w3schools 的 jquery 教程

这些将给出 javascript 和 jquery 的概念。

熟悉jquery后，还可以访问：http://api.jquery.com/

这是官方的 jquery api“博客”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T06:55:46.020

*JavaScript The Good Parts*是一本很棒的 Javascript 书籍，我不推荐它来学习这门语言。一旦你理解了语言的概念，你应该回到它。正如@PitaJ 在评论中已经提到的，你应该看看这里的学习部分：[https ://stackoverflow.com/tags/javascript/info](https://stackoverflow.com/tags/javascript/info)

是的，可以开发桌面应用程序。但是，您将需要允许您执行此操作的软件。即：[http](http://appjs.org/) ://appjs.org/或[http://www.tidesdk.org/](http://www.tidesdk.org/) 从质量的角度讲，像这样开发的软件可能永远不会达到原生构建应用程序的水平。您可能还会发现[node.js](http://nodejs.org)项目很有趣。

**编辑：** Windows 8 还允许您构建桌面 Javascript 应用程序。[适用于 Windows 的 MSDN Javascript 应用程序](http://msdn.microsoft.com/en-us/library/windows/apps/br211385.aspx)

# c# - 如何转换列表 在 C# 中从 mssql 数据库中获取列表的字符串？

> ID：14826934
> 
> 赞同：-4
> 
> 时间：2013-02-12T06:44:23.317
> 
> 标签：c#, sql-server, windows-phone-8

在 windows phone 开发中，我有一些来自 MS SQL 数据库的数据。我正在从数据库发送一个列表，但我想将它转换为客户端中的字符串数组。但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:50:51.893

在 C# 中，如果你有列表，那么你可以试试这个：

```
string[] str = lst.ToArray(); 
```

C# List 具有`ToArray()`内置方法。

这是一段代码，假设您可能希望从 C# 连接到 SQL Server，将 select 语句行放入列表中，然后将该列表转换为字符串数组：（`?`根据您的系统使用适当的值填写标记/数据库。[这里是 MSDN 文章：一](http://msdn.microsoft.com/en-sg/library/bh8kx08z.aspx)和[二。](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection%28v=vs.71%29.aspx)

```
 using (SqlConnection CONN = new SqlConnection("server=?;database=?;Integrated Security=?"))  {
      //e.g. new SqlConnection("Data Source=localhost;Integrated Security=SSPI;Initial Catalog=dbname");
 String queryString = "SELECT CustomerID, CompanyName FROM dbo.Customers";
 SqlDataAdapter adapter = New SqlDataAdapter(queryString, CONN);
 DataSet dset = New DataSet(); 
 adapter.Fill(dset, "Customers");

     List<string> lst = new List<string>();
     //iterate through Dataset
     foreach(DataRow row in dset.Tables["Customers"].Rows)
     {
       lst.Add(row["CompanyName"].ToString());
     }
     //to string array
     string[] str = lst.ToArray();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:52:59.253

```
// New list here.
List<string> l = new List<string>();
l.Add("one");
l.Add("two");
l.Add("three");
l.Add("four");
l.Add("five");

// B.
string[] s = l.ToArray(); 
```

[参考](http://www.dotnetperls.com/convert-list-array)

# android - Android : Facebook 注销

> ID：14826949
> 
> 赞同：0
> 
> 时间：2013-02-12T06:45:07.477
> 
> 标签：android, facebook, logout

我有一个 LoginViaFacebook Acitivity 和一个用于 facebook Login 的登录按钮。我使用以下代码登录到 facebook

```
private String[] permissions = {"publish_stream",
        "read_stream", "user_photos", "publish_checkins", "photo_upload",
        "email", "user_birthday" };

if (access_token != null) {
        Utility.fb.setAccessToken(access_token);
        token = access_token;

        Log.e("OnCretae Facebook Token------------", token);
    }
    if (expires != 0) {
        Utility.fb.setAccessExpires(expires);
    }

    btn_login.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            if (CheckInternet.checkConn(LoginViaFacebook.this)) {

                Utility.fb.authorize(LoginViaFacebook.this, permissions,
                        new DialogListener() {

                            @Override
                            public void onFacebookError(FacebookError e) {
                                // TODO Auto-generated method stub
                                Toast.makeText(getApplicationContext(),
                                        "onFacebookError",
                                        Toast.LENGTH_LONG).show();
                                Log.e("Sajolllllllllllllllll", e + "");
                            }

                            @Override
                            public void onError(DialogError e) {
                                // TODO Auto-generated method stub
                                Toast.makeText(getApplicationContext(),
                                        "onError", Toast.LENGTH_LONG)
                                        .show();
                                Log.e("Sajolllllllllllllllll", e + "");
                            }

                            @Override
                            public void onComplete(Bundle values) {
                                // TODO Auto-generated method stub
                                editor = sp.edit();
                                token = Utility.fb.getAccessToken();

                                Log.e("Token---------", token);
                                editor.putString("access_token",
                                        Utility.fb.getAccessToken());
                                editor.putLong("access_expires",
                                        Utility.fb.getAccessExpires());
                                editor.commit();
                                Toast.makeText(getApplicationContext(),
                                        "Login Successful",
                                        Toast.LENGTH_LONG).show();
                                mProgress = ProgressDialog.show(
                                        LoginViaFacebook.this, "",
                                        "Please Wait...", true);
                                Thread t = new Thread(retriveProfileData);
                                t.start();

                            }

                            @Override
                            public void onCancel() {
                                // TODO Auto-generated method stub
                                Toast.makeText(getApplicationContext(),
                                        "onCancel", Toast.LENGTH_LONG)
                                        .show();

                            }
                        });
            }

        }
    }); 
```

如果用户未注销，我会保存访问令牌以便下次直接登录

我有另一个活动，即设置并有按钮注销。我使用以下代码从 facebook 注销

```
lagoutLayout.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            final String[] items = new String[] { "Yes", "No" };
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(
                    SettingsActivity.this,
                    android.R.layout.select_dialog_item, items);

            AlertDialog.Builder builder = new AlertDialog.Builder(
                    SettingsActivity.this);

            builder.setTitle("Select Option");
            builder.setAdapter(adapter,
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int item) { // pick

                            // from
                            // camera
                            if (item == 0) {

                                try {
                                    editor.remove("FacebookId");
                                    editor.remove("EmailId");
                                    editor.commit();

                                    Log.e("Pre----------------", sp1
                                            .getString("access_token", "d"));
                                    editor1.remove("access_token");
                                    editor1.remove("access_expires");
                                    editor1.commit();

                                    Log.e("After----------------", sp1
                                            .getString("access_token", "d"));

                                    Log.e("DATATTAT--------",
                                            sp.getString("FacebookId",
                                                    "saf")
                                                    + "  "
                                                    + sp.getString(
                                                            "EmailId", "as"));
                                    String r = Utility.fb
                                            .logout(SettingsActivity.this);
                                    Log.e("Res-----------", r);
                                } catch (MalformedURLException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                } catch (IOException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                }

                            } else { // pick from file

                                dialog.dismiss();
                            }
                        }
                    });

            dialog = builder.create();

            dialog.show();

        }

    }); 
```

Facebook Logout 方法的响应在 Log 中显示为 true。但是当我再次运行应用程序时，它会自动登录到 facebook 我找不到问题。请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:17:53.943

我使用这段代码，它工作得很好

```
 public void logout() {
    if (!isConnected(activity)) {
        Toast.makeText(activity, "Internet not connected", Toast.LENGTH_LONG).show();
        return;
    }
    SessionEvents.onLogoutBegin();
    AsyncFacebookRunner asyncRunner = new AsyncFacebookRunner(this.facebook);
    asyncRunner.logout(this.context, new LogoutRequestListener());
} 
```

这是听众

```
 public class LogoutRequestListener extends BaseRequestListener {
    public void onComplete(String response, final Object state) {
        // callback should be run in the original thread, 
        // not the background thread
        mHandler.post(new Runnable() {
            public void run() {
                SessionEvents.onLogoutFinish();
                Intent intent= new Intent(activity,Login.class);
                activity.startActivity(intent);
                activity.finish();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-26T07:51:45.717

对于上面的 facebook sdk 版本 3

```
public void logoutFacebook() {
    Session session = Session.getActiveSession();
    if(session != null && session.isOpened()){
        session.closeAndClearTokenInformation();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T08:57:51.467

尝试这个 ：

我希望这会对你有所帮助......

```
if (mFacebook.isSessionValid()) {
    try {
        String str = mFacebook.logout(getApplicationContext());
        SessionStore.clear(getApplicationContext());
    } catch (MalformedURLException e) {                     
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T06:54:19.643

如果您在登录时扩展和使用 facebook openSession，您必须使用 closeSession 将其关闭并将其放入您的注销中，或者您可以像这样简单地将它放在 onDestroy

```
public void onDestroy() {
        this.closeSession();
        super.onDestroy();
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-20T10:18:50.693

如果您从 google 建议中查看此答案并使用 facebook sdk v4 或更高版本，请使用此行。它完美地工作。

```
if (AccessToken.getCurrentAccessToken() != null) {
                LoginManager.getInstance().logOut();
            } 
```

# sql - 在 Oracle 中生成唯一的批次 ID

> ID：14826950
> 
> 赞同：0
> 
> 时间：2013-02-12T06:45:17.870
> 
> 标签：sql

我需要在临时表中批量插入一些行，然后再删除它们。我需要一个唯一的 ID，它可以专门识别和删除插入到单个事务中的行。我如何实现这一目标？

提前致谢

我想使用批量插入在临时表中放置几行，使用它与数据库中的其他表进行一些连接等，并在完成后删除这些行。所以一旦数据被使用，我应该能够删除它们。可能有很多用户同时使用这个临时表，因此我需要一些唯一的 id 来指定在单个插入中插入的行，以便可以使用简单的 delete 语句删除它们，而无需删除其他用户当时输入的行 delete from table where = 'xxx'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:45:50.423

通常的方法是使用序列预先生成您的 Batch ID，然后将该 Batch ID 提供给您的 INSERT 语句：

```
create sequence seq_batchid;

declare
  l_BatchID number;
begin
  /* if you're using release 10 or earlier, use 
  select seq_batchid.nextval into BatchID from dual; 
  instead */  
  l_BatchID := seq_batchid.nextval; 

  INSERT INTO temp_table(BatchID, ...) (SELECT l_BatchID, ...)
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:29:26.630

Oracle 序列可能会起作用。但要确认这一点，您需要向我们提供有关您想要实现的目标的更多信息。如果您也可以给我们表格结构，那就太好了。

# c - 为什么不能分配相同类型和大小的数组？

> ID：14826952
> 
> 赞同：6
> 
> 时间：2013-02-12T06:45:23.333
> 
> 标签：c, arrays

如果我声明两个数组 -`arr1`并且`arr2`- 例如，`int`每个大小为 10 的类型，并初始化第一个数组，并且我希望创建`arr1`in的副本`arr2`；为什么我不能直接给出指示`arr2 = arr1`？

我知道可以分配两个相同类型的结构。为什么数组不是这种情况？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T08:24:53.983

数组的问题在于，在所有表达式中（传递给 the`sizeof`和一元运算符时除外`&`），它们都转换为指向其第一个元素的指针。

所以，假设你有：

```
int arr1[10];
int arr2[10];
... 
```

然后，如果你写类似

```
arr1 = arr2; 
```

您实际上是在尝试这样做：

```
arr1 = &arr2[0]; 
```

或这个：

```
&arr1[0] = &arr2[0]; 
```

在这两种情况下，您都会遇到阻止代码编译的问题。在前一种情况下，您尝试在两种不兼容的类型（数组与指针）之间进行分配，而在后一种情况下，您尝试修改常量指针（`&arr1[0]`）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-12T07:11:44.940

实际上他们可以，但以间接的方式：

```
#include <stdio.h>

int main(){
  int arr1[3] = {0};
  int arr2[3] = {1, 2, 3};

  struct tmp{
      int arr[3];
  };

  printf("%d %d %d\n", arr1[0], arr1[1], arr1[2]);

  // casting array to address of struct
  // before dereferencing & asigning to it
  *(struct tmp*)arr1 = *(struct tmp*)arr2;

  printf("%d %d %d\n", arr1[0], arr1[1], arr1[2]);

  return 0;
} 
```

你甚至可以用更通用的方式来制作它：

```
#include <stdio.h>

#define STRUCT_TO(type, size) struct temp##__LINE__{type arr[size];}; *(struct temp##__LINE__*)
#define STRUCT_FROM *(struct temp##__LINE__*)

int main(){
  int arr1[3] = {0};
  int arr2[3] = {1, 2, 3};

  printf("%d %d %d\n", arr1[0], arr1[1], arr1[2]);

  STRUCT_TO(int,3) arr1 = STRUCT_FROM arr2;

  printf("%d %d %d\n", arr1[0], arr1[1], arr1[2]);

  return 0;
} 
```

或者......如果我们可以牺牲一些可移植性，那么我们可以使语法更加对称：

```
#include <stdio.h>

#define ARRAY_LENGTH(arr) (sizeof(arr)/sizeof(arr[0]))
#define TEMP_STRUCT struct temp##__LINE__
#define AS_STRUCT_DESTINATION(arr) TEMP_STRUCT{typeof(arr[0]) arrTmp[ARRAY_LENGTH(arr)];}; *(TEMP_STRUCT*) arr
#define AS_STRUCT_SOURCE(arr) *(TEMP_STRUCT*) arr

int main(){
  int arr1[3] = {0};
  int arr2[3] = {1, 2, 3};

  printf("%d %d %d\n", arr1[0], arr1[1], arr1[2]);

  AS_STRUCT_DESTINATION(arr1) = AS_STRUCT_SOURCE(arr2);

  printf("%d %d %d\n", arr1[0], arr1[1], arr1[2]);

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T07:19:07.510

如果变量是指向数组的指针，则不能将数组分配给另一个数组。即使在这种情况下，您也不会创建副本，而只会创建指向同一数组的另一个指针。

要复制数组，您应该使用 memcpy() 复制整个内容：

```
int a[3] = {1,2,3};
int b[3];
memcpy(b, a, sizeof(a)); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-12T06:48:43.183

在 C 中，数组类型不保存大小，因此如果`a`有类型`int[]`并且`b`有类型`int[]`，则计算`a == b`我们需要知道 和 的实际大小，`a`这`b`在编译时和运行时都不知道。

# javascript - 通过 Sencha Touch 2 使用 Web Worker

> ID：14826954
> 
> 赞同：2
> 
> 时间：2013-02-12T06:45:34.450
> 
> 标签：javascript, extjs, sencha-touch-2, web-worker

前提：具有 Java 背景的完整 Sencha touch/Js noob -（5 天）

是否可以通过 Sencha Touch 使用 HTML5 网络工作者？我的场景是，我有一个使用 Sencha Touch 2 制作的应用程序，并与电话间隙打包在一起，在其中一个场景中，单击按钮时，控制器会进行 API 调用，这会使 UI 暂时处于非活动状态 - 理想情况下喜欢将其移至辅助线程并保持 UI 尽可能响应，但由于 JS 是单线程的，我想利用 HTML5 webworkers 进行 Sencha touch 。我找到**[了这个](https://market.sencha.com/extensions/ext-ux-webworker)**插件，但我可以将它与 Sencha Touch 2 一起使用吗？如果不是，我还有其他选择。请注意，这是针对具有 Sencha touch 的移动/平板电脑开发人员，而不是针对台式机的 extJS。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T09:55:59.830

我从您的问题中了解到，您想使用 webworkers 来呈现 UI，对吗？我认为这是不可能的，因为网络工作者的范围非常有限。以下是网络工作者可以访问的内容列表：

*   *导航器对象*
*   *位置对象（只读）*
*   *XMLHttpRequest*
*   *setTimeout()/clearTimeout() 和 setInterval()/clearInterval()*
*   *应用程序缓存*
*   *使用 importScripts() 方法导入外部脚本*
*   *产生其他网络工作者*

这是网络工作者无法访问的内容列表：

*   *DOM（它不是线程安全的）*
*   *窗口对象*
*   *文档对象*
*   *父对象*

遵循网络工作者用例列表：

*   *预取和/或缓存数据以供以后使用*
*   *代码语法高亮或其他实时文本格式*
*   *拼写检查程序*
*   *分析视频或音频数据*
*   *后台 I/O 或 Web 服务轮询*
*   *处理大型数组或庞大的 JSON 响应*
*   *图像过滤*
*   *更新本地 Web 数据库的多行*

有关网络工作者及其环境的更多信息：http: **[//www.html5rocks.com/en/tutorials/workers/basics/](http://www.html5rocks.com/en/tutorials/workers/basics/)**

谈论我的扩展：我认为 Sencha 不太适合，因为它使用 Ext 结构和类。

最后，我不知道任何适用于网络工作者的 Sencha UX。

**更新 (2013/03/20)**

[ExtJS-WebWorker](https://github.com/wilk/ExtJS-WebWorker)现在也适用于 Sencha Touch！

# java - JSP Javabean 生成错误

> ID：14826957
> 
> 赞同：0
> 
> 时间：2013-02-12T06:45:46.497
> 
> 标签：java, jsp, javabeans

我有一个如下代码，其中包含变量名称和变量的 Javabean

```
package Model;

public class SampleServ 
{
    private String Name;

    public String getName() 
    {
        return Name;
    }

    public void setName(String name) 
    {
        Name = name;
    }
} 
```

我创建了一个 JSP 文件并使用 Javabean 将值设置如下

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
    <%@ page import="Model.SampleServ" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<jsp:useBean id="objUsers" class="Model.SampleServ"></jsp:useBean>
<jsp:setProperty property="Name" name="objUsers" value="Mugil"/>
<jsp:getProperty property="Name" name="objUsers"/>
</body>
</html> 
```

现在页面显示以下消息如下

```
Feb 12, 2013 12:32:28 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [jsp] in context with path [/JSTL] threw exception [Cannot find any information on property 'Name' in a bean of type 'Model.SampleServ'] with root cause
org.apache.jasper.JasperException: Cannot find any information on property 'Name' in a bean of type 'Model.SampleServ'
    at org.apache.jasper.runtime.JspRuntimeLibrary.getReadMethod(JspRuntimeLibrary.java:797)
    at org.apache.jasper.compiler.Generator$GenerateVisitor.visit(Generator.java:1062)
    at org.apache.jasper.compiler.Node$GetProperty.accept(Node.java:1126)
    at org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2376)
    at org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2428)
    at org.apache.jasper.compiler.Node$Visitor.visit(Node.java:2434)
    at org.apache.jasper.compiler.Node$Root.accept(Node.java:475)
    at org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2376)
    at org.apache.jasper.compiler.Generator.generate(Generator.java:3474)
    at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:249)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:372)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:352)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:339)
    at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:594)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:344)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:391)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
c 
```

为什么会发生这种情况。

谢谢回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:50:06.660

您的属性名称是“名称”，而不是“属性名称”

顺便说一句，您没有遵循标准的 java 命名约定。字段应该用 camelCase 定义，并且应该是私有的。即`private String name;`而不是`public String Name;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:51:27.573

尝试阅读该`printStackTrace`消息，它清楚地表明`Cannot find any information on property 'propertyName' in a bean of type 'Model.SampleServ'`

在这一行`<jsp:setProperty property="propertyName" name="objUsers" value="Mugil"/>` 中，您使用了**property** =" `propertyName`" 这应该是您在**SampleServ**中可用的属性名称，因此请使用`property=¨Name¨`并尝试遵循**bean 属性的命名约定**

**编辑**：

**SampleServ.java**

```
public class SampleServ 
{
    private String name;

    public String getName() 
    {
        return name;
    }

    public void setName(String name) 
    {
       name = name;
    }
} 
```

在您的jsp页面中替换`<jsp:setProperty property="propertyName" name="objUsers" value="Mugil"/>` 为

```
<jsp:setProperty property="name" name="objUsers" value="Mugil"/> 
```

# c - 二维数组分配的段错误

> ID：14826958
> 
> 赞同：2
> 
> 时间：2013-02-12T06:45:51.617
> 
> 标签：c, pointers, malloc

我有一个结构“单元格”定义为

```
typedef struct{
int id;
terrainType terrain;
} cell; 
```

然后我制作一个二维单元格数组

```
cell** makeCellGrid(int sizeX, int sizeY)
{  
    cell** theArray;  
    int i;

    theArray = (cell**) malloc(sizeX*sizeof(cell*));  

    for ( i = 0; i < sizeX; i++)
    {
        theArray[i] = (cell*) malloc(sizeY*sizeof(cell));  
    }

   return theArray;  
} 
```

起初我认为这工作正常，但后来出现了一些段错误，我发现使用某些值（例如 makeCellGrid(32, 87) ）它会中断。我对 C 指针和内存垃圾相当新鲜，希望有人能在这里为我指明正确的方向。

使用较低的数字界限，我可以毫无问题地访问它

```
map[i][j].id = x; 
```

等等

编辑：忘记添加，从测试中，段错误源自

```
theArray[i] = (cell*) malloc(sizeY*sizeof(cell)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T07:20:17.673

`malloc()`该代码缺少对系统调用的错误检查。

因此，如果第一次调用`malloc()`失败，第二次调用（在循环中）尝试分配内存，`NULL`这确实会导致您正在目睹的分段违规。

您可能会考虑像这样修改您的代码：

```
#include <stdlib.h>

typedef struct {
  int id;
  TerrainType terrain;
} CellType;

void freeCellGrid(CellType ** ppCells, size_t sizeX)
{
  size_t i = 0;
  for (; i < sizeX; ++i)
  {
    free(ppCells[i]);
  }

  free(ppCells);
}

CellType ** makeCellGrid(size_t sizeX, size_t sizeY)
{  
    CellType ** ppCells = malloc(sizeX * sizeof(*ppCells));  

    if (ppCells)
    {
      size_t i = 0;

      for (; i < sizeX; ++i)
      {
          ppCells[i] = malloc(sizeY * sizeof(**ppCells));  
          if (NULL == ppCells[i])
          {
            freeCellGrid(ppCells, i);
            ppCells = NULL;

            break;
          }
      }
   }

   return ppCells;  
} 
```

关于我的修改的注意事项：

*   始终检查系统调用是否有错误（在返回`malloc()`on 错误的情况下`NULL`）
*   更好地使用`unsigned`类型来访问内存/数组索引；`size_t`是为了这个
*   在 C 中，不需要转换`void *`函数返回的值，例如`malloc()`
*   始终尝试尽快初始化变量；未初始化的变量很容易导致应用程序的“非理性”行为
*   如果使用指针，将间接级别“编码”到它们的名称中可能会有所帮助（我在这里使用前缀`pp`表示它是一个 2 级间接）
*   类型与变量不同：区分这一点的一种方法是使用大写字母 ( `CellType`) 开头类型名称和使用小写字母 ( `ppCells`) 开头的变量。
*   如果将内存分配给指针并且分配内存的大小适合指针的类型很重要，那么使用（取消引用的）指针本身作为`sizeof`运算符的参数总是更安全，然后是某种类型。由于分配内存的指针的声明可能会在开发过程中发生更改，并且参数的调整`malloc()`将被忘记。简而言之：像我一样做是不容易出错的。
*   如果封装结构（包括数组）的动态创建，那么还可以实现一个解除分配它的方法（这里：）`freeCellGrid()`。最好先编写此释放器，然后在编写分配器的错误处理时手动编写（如第二次调用所示`malloc()`）。

# php - 一键两个动作

> ID：14826964
> 
> 赞同：0
> 
> 时间：2013-02-12T06:46:29.093
> 
> 标签：php, javascript, jquery

我想从数据库中的一个按钮提交数据，并且同一个按钮应该导出数据库的 CSV，我试过但它不起作用，只有发送数据我有两个按钮

```
<div class="mws-form-item large">
<input type="submit" class="button" name="submit1" value="Generate Serials" />
<a href="get_csv.php" style="text-decoration:none">
<input type="button" name="get_csv" value="Export CSV"/></a>
</div>

and tried the in the following way
<div class="mws-form-item large">
<a href="get_csv.php" style="text-decoration:none">
<input type="submit" class="button" name="submit1" value="Generate Serials" />
</a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:51:28.213

如果你可以使用 jQuery，那么你可以将点击事件绑定到提交按钮，并在点击后调用的函数中执行你需要的所有操作。

例如：

```
<input type="submit" id="submitBut"> 
```

为此，您可以拥有：

```
$("#submitBut").click(function(){

//operations you need to perform

}) 
```

# java - 在Java中获取哈希映射中的值

> ID：14826965
> 
> 赞同：0
> 
> 时间：2013-02-12T06:46:31.580
> 
> 标签：java, hashmap

我不是 Java 开发人员，这不是我的作业或什么的。我只需要获取这些参数的值：end & begin。这就是我所拥有的：

```
rs = [{}, {end=2013/11/5, begin=2012/11/6}] 
```

我想知道我是否可以获得这样的值：

```
rs[1].end
rs[1].begin 
```

来源是：

```
protected QueryParameters prepareForm(final ActionContext context) {
    final SearchErrorLogForm form = context.getForm();
    Map<String, Object> rs = form.getValues();
    System.out.println(rs);

    /*the output is: {pageParameters={}, period={end=2013/11/5, begin=2013/11/6}} */
} 
```

抱歉，rs 类型是 hashmap。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:54:09.377

这不是一个有效的陈述。

分配数组的正确方法是：

```
String dates[] = {"2013/11/5","2012/11/6"};
String start = dates[0];
String end = dates[1]; 
```

[oracle docs](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)上有一个很好的教程

好的，这是一个包含两个 Map 的 Map。第一个名为“pageParameters”的地图是空的。第二个被命名为 period 并包含两个项目。键“end”映射到值“2013/11/5”。键“开始”映射到值“2013/11/6”。

要访问地图中的对象，您可以这样做：

```
final Map<String, String> period = (Map<String, String>) rs.get("period");
final String begin = period.get("begin");
final String end = period.get("end"); 
```

如果您想在地图期间更改一个值，则需要覆盖已经存在的值：

```
period.put("end", "NEW_END");
rs.put("period", period); 
```

有关更多信息，Oracle 提供了关于 Hashmaps的精彩[教程。](http://docs.oracle.com/javase/tutorial/collections/interfaces/map.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T06:54:05.100

你可以这样做：

`rs[1][0]`为了第一

`rs[1][rs[1].length-1]`最后

# driver - 使用 x64 检查构建环境进行编译时出现 WDK 错误

> ID：14826971
> 
> 赞同：0
> 
> 时间：2013-02-12T06:46:47.603
> 
> 标签：driver, windows-7-x64, wdk

我尝试在 Windows 7 x64 中构建内核模式驱动程序。我已经禁用了补丁保护。每当我打开 x64 检查构建环境命令提示符时，我都会收到此错误“警告：不支持 x64 本机编译。使用交叉编译器”。请帮我解决这个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T21:30:24.107

那不是错误。这是完全正常的，你可以忽略它。它只是告诉你，x64 编译器实际上是一个生成 64 位代码的 32 位编译器。因此，术语“交叉编译器”。

# javascript - 对构造函数的引用

> ID：14826973
> 
> 赞同：1
> 
> 时间：2013-02-12T06:46:53.827
> 
> 标签：javascript, typescript

如何获取 typescript 中任何对象的构造函数的引用？

JavaScript 中的示例：

```
var anyObject = new this.constructor(options); 
```

或者

```
var anyObject = new someObj.constructor(options); 
```

或者

```
class Greeter { 
  greeting: string; 
  constructor(message: string, options: any) { 
       this.options = options; 
       this.greeting = message; 
  } greet() { 
     return "Hello, " + this.greeting; 
  } createAnyObj(){  
     return new this.constructor(this.options); 
  } 
} 

 var t= new Greeter('mes',{param1: 'val1'});
 var b=t.createAnyObj(); 
```

谢谢。

更多示例：

[>>>链接到打字稿游乐场](http://www.typescriptlang.org/Playground/#src=class%20A%7B%0A%09constructor%28public%20options%3a%20any%29%7B%7D%0A%09dublicate%28%29%7B%0A%09%09return%20new%20this.constructor%28this.options%29;%0A%09%7D%0A%09someMethod%7B%0A%09%09return%20%27Hello!%20I%20am%20class%20A!%27;%0A%09%7D%0A%7D%0A%0Aclass%20B%20extends%20A%7B%0A%09someMethod%7B%0A%09%09return%20%27This%20is%20class%20B!%27;%0A%09%7D%0A%7D%0A%0Avar%20objA%20=%20new%20A%28%7Bkey1%3a%20%27value1%27%7D%29;%0Avar%20objWhithOptionsObjA%20=%20objA.dublicate%28%29;%20//=%3E%20Instaceof%20class%20A%0A%0A%0Avar%20objB%20=%20new%20B%28%7Bkey2%3a%20%27value2%27%7D%29;%0Avar%20objWhithOptionsObjB%20=%20objB.dublicate%28%29;%20//=%3E%20Instaceof%20class%20B)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:27:55.737

您可以使用以下代码实现所需的功能：

```
class A {
    constructor(public options: any) {

    }

    duplicate() {
        return new A(this.options);
    }

    someMethod() {
        return 'Hello! I am class A!';
    }
}

class B extends A {
    constructor(options: any) {
        super(options);
    }

    someMethod() {
        return 'This is class B!';
    }

    duplicate() : A {
        return new B(this.options);
    }
}

var objA = new A({key1: 'value1'});
var objWhithOptionsObjA = objA.duplicate(); //=> Instaceof class A
alert(objWhithOptionsObjA.someMethod());

var objB = new B({key2: 'value2'});
var objWhithOptionsObjB = objB.duplicate(); //=> Instaceof class B
alert(objWhithOptionsObjB.someMethod()); 
```

您需要一个构造函数，`B`它只是将选项传递给超类。您覆盖重复方法以返回 a `B`，它是 的子类型`A`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T05:17:20.197

This problem was solved with next solution:

```
module Example{
    // Thank you, JavaScript!
    export function getConstructor(obj){
        return obj.constructor;
    }
    export class A{
        constructor(private options: any){}
        dublicate(){
            return new (getConstructor(this))(this.options);
        }
        someMethod(){
            return 'This is class A';
        }
    }
    export class B extends A{
        someMethod(){
            return 'This is class B';
        }
    }
}

// Class A
var objA = new Example.A({key1: 'val1'});
console.log(objA.someMethod(), objA); //=> This is class A
var objA2 = objA.dublicate();
console.log(objA2.someMethod(), objA2); //=> This is class A

// Class B
var objB = new Example.B({key2: 'val2'});
console.log(objB.someMethod(), objB); //=> This is class B
var objB2 = objB.dublicate();
console.log(objB2.someMethod(), objB2); //=> This is class B 
```

**Live example** => [Open playground](http://tinyurl.com/d6mklnz)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T06:50:20.063

使用`new`运算符在构造函数中使用所需参数实例化对象。这类似于您在其他面向对象编程语言中的操作方式，下面是 typescript 官方网站的示例

```
class Greeter {
    constructor(public message: string, public options?: any) {          
     }

     greet() {
      return "Hello, " + this.message;
     }

     createAnyObj(){  
        return new Greeter(this.message, this.options);         
     } 
}

var greeter = new Greeter("world"); 
```

# asp.net-mvc - 如何在 MVC4 中隐藏 URL 的参数

> ID：14826975
> 
> 赞同：6
> 
> 时间：2013-02-12T06:46:56.003
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

`http://localhost:49397/ChildCare/SponsorChild/83`

这是链接，当我单击表中的操作链接并重定向到编辑操作时正在生成该链接，现在我想在 URL 中隐藏数字“83”我该如何实现这一点，

我正在使用 VS2010 MVc4 Razor，抱歉我的英语不好提前谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T14:28:57.223

如果您使用链接，链接通过`GET`请求发送到服务器，那么参数在 url 中。你可能有两个选择：

1 - 参数必须在`data`属性上`data-id="83"`，然后创建一个表单以通过邮寄发送数据，并创建`input`带有属性的标签`data-x`，例如：

```
<a href="my/url" data-id="83> link </a> 
```

然后使用 javascript 您需要创建表单：

```
<form method="POST" action="my/url">
    <input value="83 name="id" type="hidden" /> 
</form> 
```

并使用 JS 表单提交运行事件，例如：`jQuery('form').submit()`

2 - 您可以在控制器中加密然后解密获取参数：[如何在MVC中加密和解密数据？](https://stackoverflow.com/a/15767143/138071)

**编辑**

第一点的例子：

html:

```
<div id="container-generic-form" style="display:none;">
   <form action="" method="POST"></form>
</div>

<a href="my/url" data-id="83" data-other="blue" class="link-method-post">my link</a> 
```

JS：

```
$(function() { // document ready

   var controlAnchorClickPost = function(event) {

       event.preventDefault(); // the default action of the event will not be triggered

       var data = $(this).data(), 
           form = $('#container-generic-form').find('form');

       for(var i in data) {

          var input = $('<input />', {
             type: 'hidden',
             name: i
          }).val(data[i]);

          input.appendTo(form);
        }

        form.submit();
   };

   $('a.link-method-post').on('click', controlAnchorClickPost); //jquery 1.7

}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-12T15:56:56.457

我们使用两个这样的页面来隐藏变量

```
public ActionResult RestoreSavedSession(string id)
    {
        Session["RestoreSavedSession"] = id;
        return RedirectToAction("RestoreSavedSessionValidation");
    }

    public ActionResult RestoreSavedSessionValidation()
    {
        return View("RestoreSavedSessionValidation");
    } 
```

您点击`RestoreSavedSession`它然后将参数存储在本地并调用它从[Session](https://msdn.microsoft.com/en-us/library/microsoft.hpc.scheduler.session.session(v=vs.85).aspx)或[Cache](https://msdn.microsoft.com/en-us/library/system.web.caching.cache(v=vs.110).aspx)或其他任何`RestoreSavedSessionValidation`地方读取参数的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-05T02:30:54.540

我使用预览方法将路由数据存储到 TempData，并将其路由到正确的操作。

```
 public async Task<ActionResult> Preview(string act, string ctl, string obj)
    {
        TempData["Data"] = obj;
        return RedirectToAction(act, ctl);
    } 
```

使用它

```
return RedirectToAction("Preview","Controller",new {act="action",ctl="controller",obj=JsonConvet.SerializeObject(obj)}); 
```

路由后

```
var x=JsonConvert.DeserializeObject<T>(TempData["Data"].ToString()); 
```

# java - Java，其他包中的类可见性，但在其他插件中不可见

> ID：14826976
> 
> 赞同：0
> 
> 时间：2013-02-12T06:46:55.600
> 
> 标签：java, plugins, visibility

我有一个包含我的数据库设置（用户名、密码）的 java 类。我想在我的插件的所有包中使用这个类，但我不希望它对其他插件可用。

我怎样才能做到这一点？删除该类的公共属性会将其从所有其他包中隐藏起来，并将其公开将其暴露给所有其他插件，这在我的情况下是不好的。

函数和变量没有类似protected的关键字吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:55:31.187

> 我怎样才能做到这一点？

不要在类中拥有凭据，而是创建一个配置文件并在需要的类中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:59:37.920

如果您的数据库信息存储为纯文本变量，那么您设置的可见性无关紧要。任何有兴趣的人都会很容易找到这些字符串。

我不确定您要插入什么，但我使用的大多数平台都有一种方式来说明应该共享/隐藏哪些包。这将特定于平台（Netbeans、Eclipse 等...）

除此之外，如果你制作你的类/变量`protected`，那么只有在相同`package`或`extend`能够使用它们的类中。如果没有设置可见性修饰符，则默认为包，并且使用仅限于同一包中的类。

# discrete-mathematics - (a mod 2*x)-(a mod x)

> ID：14826979
> 
> 赞同：-1
> 
> 时间：2013-02-12T06:46:59.827
> 
> 标签：discrete-mathematics, modulus

我试图找到这个表达式的可能值。

```
(a mod 2*x)-(a mod x) 
```

我怀疑它们可能是 0 或 x，但我真的不确定。我似乎无法写下正确的论点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:53:01.347

您是正确的，可能的值为 0 和`x`，假设`a`和`x`都是正数。逻辑如下。

让`a`表格

```
a = p*x + b 
```

那么很容易看出`a mod x = b`。

对于`a mod 2*x`, 如果`p = 2*r`(`p`是偶数) 那么

```
a = 2*r*x + b = (2*x)*r + b 
```

所以`a mod 2*x = b`and `p = 2*r + 1`(`p`是奇数) 然后

```
a = (2*r + 1)*x + b = 2*r*x + x + b = (2*x)*r + x + b 
```

这样`a mod 2*x = x + b`。结合这些结果，差异是`b - b = 0`（何时`p`为偶数）或`(x + b) - b = x`（何时`p`为奇数）。

# bash - 对于两列，如何对按第二列分组的第一列中的值求和？

> ID：14826981
> 
> 赞同：2
> 
> 时间：2013-02-12T06:47:02.097
> 
> 标签：bash, sed, awk

我有以下平面文件，并想确定每个用户第一列中所有点的总和。例如：

```
50       user1
100      user2
10       user1
20       user3 
```

会回来

```
60       user1
100      user2
20       user3 
```

有可能做这个bash吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:07:02.017

```
#!awk -f
{
  foo[$2] += $1
}    
END {
  for (bar in foo)
    print foo[bar], bar
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T06:51:59.793

```
awk '{a[$2]+=$1}END{for(i in a )print a[i],i}' your_file 
```

# git - git 扩展来显式跟踪文件重命名？

> ID：14826983
> 
> 赞同：2
> 
> 时间：2013-02-12T06:47:15.070
> 
> 标签：git, rename

**首先是问题**：

git 是否有任何工具或补丁可以使其专门存储有关文件重命名的元数据（就像 git-svn 对“git-svn-id”所做的那样）？如果做不到这一点，是否有另一个 DVCS 可以为我提供快速的本地分支（如 git）和正确的文件重命名跟踪（如集市）？

**现在有一些关于我为什么需要这个的背景：**

我开始使用 git 几个月了，我真的很喜欢它。除了它不跟踪重命名的事实。

在我看来，不跟踪重命名的决定是基于错误的假设，即重要的是内容，而不是名称。我不同意。让我给你一个现实世界的例子。

我有一个类`RefinementPresentation`用作网页视图模板中的模型。我将类移动到一个单独的包（模型），然后，因为该类不仅仅是一个模型并且包含大量逻辑，我通过将逻辑移动到另一个类来重构它。正如你可以想象的那样，现在这个类与原来的类几乎没有相似之处。但从概念上讲，它是同一件事——它仍然是视图的模型。*这就是我的观点。该文件是同一个文件（重命名/移动）还是不同的文件是我脑海中的一个概念，没有工具可以或应该尝试为我做这件事。*如此不同，再多的启发式或猜测都不会让 git 认识到这实际上是一个移动的文件。这意味着 git log 永远不会向我显示过去的历史。当然，历史仍然存在——它并没有丢失——只是更难找到了。因此我的问题是：有没有办法避免这种不便？

**编辑**：在单独的提交中移动和重构是一个很好的解决方法，请参阅下面的评论（感谢 Eevee！）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T08:06:23.100

最少的努力，最大的回报：在单独的提交中移动和重构文件。

就其价值而言，git 在这里并不*完全*疯狂，它的作用有[各种合理的理由](http://article.gmane.org/gmane.comp.version-control.git/217)——并不是说它有太多的安慰。:)

# php - 表单和文件上传到两个不同的控制器

> ID：14826987
> 
> 赞同：0
> 
> 时间：2013-02-12T06:47:30.280
> 
> 标签：php, html, codeigniter, post, file-upload

我有一个表单，我想用一个提交按钮提交。

但是，我上传文件的操作与数据库发布的控制器不同。看起来像这样……

```
<form method="post" action="/admin/upholstery_product/add/">
<h3>Add a Product</h3>
Frame: <input type="text" name="productname" /><br>

Parent Category:
<select name="category">
    <?php
    foreach($cats AS $cat){
        $sel = ($curCat->category_id == $cat->category_id) ? 'selected' : '';

        echo "<option value='".$cat->category_id."' ".$sel.">" . $cat->category_name . "</option>\n";
    }
    ?>
</select><br />

Family: <input type="text" name="family" /><br>

Width: <input type="text" name="width" size="6" /><br>

Height: <input type="text" name="height" size="6" /><br>

Depth: <input type="text" name="depth" size="6" /><br>

Seat Width: <input type="text" name="seat_width" size="6" /><br>

Seat Height: <input type="text" name="seat_height" size="6" /><br>

Seat Depth: <input type="text" name="seat_depth" size="6" /><br>

Arm Height: <input type ="text" name="arm_height" size="6" /><br>

Features: <textarea cols="40" rows="20" name="features"></textarea><br>

<form method="post" action="/upload/product_image_upload">
Image File: <input type="file" name="image" id="image"/><br>
</form>

<form method="post" action="/upload/product_image_upload">
Thumbnail File: <input type="file" name="thumbnail" id="thumbnail"/><br>
</form>

<form method="post" action="/upload/pdf_upload">
PDF File: <input type="file" name="pdf" id="pdf"/><br>
</form>

Status: <select name="status">
        <option value="active">Active</option>
        <option value="inactive">Inactive</option>
        </select> <br>

<input type="submit" name="submit" value="Add Product" /><br>
</form> 
```

有没有办法将文件操作发布到一个控制器并使用单个提交按钮提交到我的另一个控制器？现在代码不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:16:30.497

严格来说，您想要做的是不可能的：您在一个页面上有两个单独的表单，并且您想同时提交两个表单。

这里的主要问题是：提交表单的结果是一个新页面。不同的操作 = 不同的页面。你想展示哪一个？

解决方法：将文件和数据都提交到同一个脚本；如果处理程序*需要*分开，请让第一个处理程序将数据发布到“幕后”的第二个处理程序。

# xml - 在不能接受集合的上下文中调用 Postgresql 合并和集合值函数

> ID：14826990
> 
> 赞同：1
> 
> 时间：2013-02-12T06:47:56.913
> 
> 标签：xml, postgresql, coalesce

我有这两个类似的查询，但在第一种情况下它工作正常，但在第二种情况下失败

```
CREATE OR REPLACE FUNCTION XmlNodes(xmlData xml, selector TEXT) RETURNS  TABLE(r xml)
AS $$ SELECT unnest(xpath(selector, xmlData)); $$ LANGUAGE SQL;

with tmp (x) AS(
SELECT r from
 XmlNodes('<Data>
  <RegDeletedItem Id="a60ded3d-2d2f-4f57-91d5-0091579bddb9" />
  <RegDeletedItem Id="4295e41c-0a09-4601-984a-eac7a9e91fe1" />
</Data>', '/Data/RegDeletedItem')),
sel (y) AS (
select CAST(unnest(xpath('/RegDeletedItem/@Id', r.x))::varchar AS uuid) AS "DeletedItem_ForeignEntity" from tmp as r)

SELECT COALESCE(y, '00000000-0000-0000-0000-000000000000') AS "DeletedItem_ForeignEntity" from sel 
```

这失败了

错误：在不能接受集合的上下文中调用的集合值函数

```
SELECT coalesce((CAST(unnest(xpath('/RegDeletedItem/@Id', r))::varchar AS uuid)), '00000000-0000-0000-0000-000000000000') AS "DeletedItem_ForeignEntity" from
 XmlNodes('<Data>
  <RegDeletedItem Id="a60ded3d-2d2f-4f57-91d5-0091579bddb9" />
  <RegDeletedItem Id="4295e41c-0a09-4601-984a-eac7a9e91fe1" />
</Data>', '/Data/RegDeletedItem') as r; 
```

有没有办法让后者工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:54:00.963

好的，我找到了方法，请注意 xpath 中的 SELECT：

```
SELECT coalesce((CAST((SELECT x[1]::varchar FROM xpath('/RegDeletedItem/@Id', r) AS x) AS uuid)), '00000000-0000-0000-0000-000000000000') AS "DeletedItem_ForeignEntity" from
 XmlNodes('<Data>
  <RegDeletedItem Id="a60ded3d-2d2f-4f57-91d5-0091579bddb9" />
  <RegDeletedItem Id="4295e41c-0a09-4601-984a-eac7a9e91fe1" />
</Data>
', '/Data/RegDeletedItem') as r; 
```

# jquery-mobile - Jquery 移动页眉和页脚跳来跳去

> ID：14826991
> 
> 赞同：0
> 
> 时间：2013-02-12T06:48:12.173
> 
> 标签：jquery-mobile, header, footer

我在我的 web 应用程序上固定了页眉和页脚。但是我总是遇到问题（如图所示），然后我专注于输入字段。标题也有同样的问题......这让我的网络应用看起来很糟糕。

我正在寻找一些解决方案，但找不到任何工作。希望有人有解决方案，也可以帮助其他人。

这里 id 页脚 div 属性：

```
 <div data-role="footer" data-position="fixed" data-id="footer" data-tap-toggle="false" data-position="fixed"> 
```

![页脚失败](../Images/05243e7485a98363c31ef048b4efa3a9.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:01:00.703

您有 data-position="fixed" 重复。检查此页面以获取更多信息[http://jquerymobile.com/test/docs/toolbars/bars-fixed-options.html](http://jquerymobile.com/test/docs/toolbars/bars-fixed-options.html)

# html - 文本溢出：没有宽度的表格单元格中的省略号

> ID：14826992
> 
> 赞同：40
> 
> 时间：2013-02-12T06:48:13.530
> 
> 标签：html, css

我正在尝试`text-overflow: ellipsis;`在中间单元格中实现响应式表格宽度，如下所示：

`| Button 1 | A one-lined text that is too long and has to be... | Button 2 |`

整个表必须`width: 100%;`与设备一样大。我不能设置一个固定的宽度，`Button 1`也不能`Button 2`因为应用程序是多语言的（`max-width`虽然应该是可能的）。

我可以尝试任何我想要的，`...`只有在我设置固定宽度时才会出现。如何在没有 JavaScript 帮助的情况下告诉中间单元“使用可用空间”？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-10-27T20:47:38.163

这并不是一个真正干净的解决方案，但它不使用 JS，并且在我测试过的每个浏览器中都可以使用。

`table-layout: fixed`我的解决方案包括将单元格的内容用和包裹在表格中`width: 100%`。

请参阅[**演示**](http://jsfiddle.net/V83Ae/38/)。

这是完整的解决方案：

```
<table class="main-table">
    <tr>
        <td class="nowrap">Button 1</td>
        <td>
            <table class="fixed-table">
                <tr>
                    <td>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Delectus doloremque magni illo reprehenderit consequuntur quia dicta labore veniam distinctio quod iure vitae porro nesciunt. Minus ipsam facilis! Velit sapiente numquam.</td>
                </tr>
            </table>
        </td>
        <td class="nowrap">Button 2</td>
    </tr>
</table> 
```

```
.main-table {
    width: 100%;
}

.fixed-table {
    /* magic */
    width: 100%;
    table-layout: fixed;

    /*not really necessary, removes extra white space */
    border-collapse: collapse;
    border-spacing: 0;
    border: 0;
}
.fixed-table td {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.nowrap {
    /* used to keep buttons' text in a single line,
     * remove this class to allow natural line-breaking.
     */
    white-space: nowrap;
} 
```

* * *

目前还不清楚侧边按钮的意图是什么，因此我习惯`white-space: nowrap`将它们保持在同一行。根据用例，您可能更喜欢应用 a`min-width`并让它们自然换行。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-10-27T20:47:54.867

在表格上设置 100% 宽度并指定`fixed`表格布局：

```
table {
    width: 100%;
    table-layout: fixed;
} 
```

然后，为应该有省略号的表格单元格设置以下内容：

```
td:nth-child(2) {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
} 
```

瞧！带有省略号溢出的响应表！

演示：http: [//jsfiddle.net/VyxES/](http://jsfiddle.net/VyxES/)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-04-09T20:10:57.870

HTML

```
<tr>
    <td>
        <span class="ellipsis"> A very looooooooooooooooooooooooooooooong string</span>
    </td>
</tr> 
```

CSS

```
td {
    position: relative;
}

.ellipsis {
    /*Here is the trick:*/
    position: absolute;
    width: 100%;
    /*End of the trick*/

    text-overflow: ellipsis;
    white-space: nowrap;
    overflow: hidden;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-02-13T05:12:25.600

一种更简洁的方法是简单地在 td 上设置一个最大宽度。

根据@Fabrício Matté 的回复，

[http://jsfiddle.net/V83Ae/89/](http://jsfiddle.net/V83Ae/89/)

```
<table class="main-table">
<tr>
    <td class="nowrap">Button 1</td>
    <td class="truncate">
        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Delectus doloremque magni illo reprehenderit consequuntur quia dicta labore veniam distinctio quod iure vitae porro nesciunt. Minus ipsam facilis! Velit sapiente numquam.</td>
    <td class="nowrap">Button 2</td>
</tr> 
```

和

```
body { margin: 0; }

.main-table {
    width: 100%;
}

.truncate {
    text-overflow: ellipsis;
    white-space  : nowrap;
    overflow     : hidden;
    max-width    : 100px; /* Can be any size, just small enough */
}

.nowrap {
    white-space: nowrap;
} 
```

我不知道为什么会这样，但确实如此，所以如果有人能弄清楚为什么应用最大宽度是如何工作的，那么请让我知道，因为我是偶然这样做的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-25T19:24:28.623

在敲了几个小时的头后，没有任何解决方案，终于找到了。

您想要作为溢出底部的元素需要一个最小/最大宽度，其中最大值低于最小宽度。然后，您可以溢出元素或其子元素，您可以在其中使用您选择的任何方式设置：%、px、auto。

我在不止一种棘手的情况下尝试过它，它适用于所有情况。

我会尝试用我的例子发布一个fidle，但这应该可以帮助你。

```
/* Apply on base element for proper overflow */
max-width: 1px;
min-width: 10000px;

/* Apply on self or child, according to need */
width: 100%;
overflow: hidden;
white-space: nowrap;
text-overflow: ellipsis; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-10T01:26:51.160

[干得好](https://jsfiddle.net/btx522ak/1/)

```
<div class="container">
  <div>
    Button 1
  </div>
  <div class="fill">
    <div class="lockText">
      A one-lined text that is too long and has to be...
    </div>
  </div>
  <div>
    Button 2
  </div>
</div> 
```

诀窍是使用首先占用剩余空间的单元格设置表格布局（css表格，请注意！）。

```
.container {
  display: table;
  width: 100%;
}

.container > div {
  display: table-cell;
  white-space: nowrap;
  position : relative;
  width : auto;

  /*make it easier to see what's going on*/
  padding : 2px;
  border : 1px solid gray;
}

.container > .fill {
  width : 100%;
} 
```

然后添加约束自身的文本。

```
.lockText {
  position : absolute;
  left : 0;
  right : 0;
  overflow: hidden;
  text-overflow: ellipsis;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-12T06:56:14.570

[更新]我的道歉，似乎并没有像那样工作：http: [//jsfiddle.net/kQKfc/1/](http://jsfiddle.net/kQKfc/1/)

不过会留在这里，因为它在某些情况下对我们有用。
[/更新]

我们的项目中有这个 css，试一试：

```
.nowr
{
    display: block;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
} 
```

# iphone - 未知警报 void _WebThreadLockFromAnyThread(bool),

> ID：14826995
> 
> 赞同：1
> 
> 时间：2013-02-12T06:48:17.733
> 
> 标签：iphone, ios, ipad

当我运行我的代码时，我的代码被卡住并给出日志：

> void _WebThreadLockFromAnyThread(bool), 0x904db10：从主线程或web线程以外的线程获取web lock。不应从辅助线程调用 UIKit。

这是什么原因，解决方法是什么？

我的代码：

```
-(IBAction)action:(id)sender{
    NSLog(@"HI");
    [self performSelectorInBackground:@selector(parse) withObject:nil];
}

-(void)parse{
    rssOutputData = [[NSMutableArray alloc]init];

 //[self performSelectorOnMainThread:@selector() withObject:nil waitUntilDone:NO];
        [NSThread detachNewThreadSelector: @selector(startIndicator) toTarget: self withObject: self];
     url=[[NSURL alloc]initWithString:[NSString stringWithFormat:@"http://service.technologyorg.com/service1/AuthenticateStudent=%@,%@,1",t1.text,t2.text]];
    NSLog(@"A%@",url);

    NSURLRequest *lRequest = [NSURLRequest requestWithURL:url
                                              cachePolicy:NSURLRequestUseProtocolCachePolicy
                                          timeoutInterval:30.0];
    NSURLResponse *response;
    NSError * error;
    //[NSURLConnection connectionWithRequest:lRequest delegate:self];
    [NSURLConnection sendSynchronousRequest:lRequest returningResponse:&response error:&error];
    NSLog(@"AB%@",response);
    if (nil == response) {
        NSLog(@"%@",error);
        [self performSelectorOnMainThread:@selector(updateTable) withObject:nil waitUntilDone:NO];
        UIAlertView * alert=[[UIAlertView alloc]initWithTitle:@"Connection failed!" message:nil delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];
    }

    xmlData=[[NSMutableData alloc]initWithContentsOfURL:url];
    NSLog(@"B%@",xmlData);
    xmltitle=nil;
    xmlParserObject =[[NSXMLParser alloc]initWithData:xmlData];
    [xmlParserObject setDelegate:self];
     dispatch_async(dispatch_get_global_queue(0, 0), ^{
    [xmlParserObject parse];
       dispatch_async(dispatch_get_main_queue(), ^{
    NSLog(@"XML:%@",xmllink);
    if ([xmltitle isEqualToString:@"true"]) {
        HomeViewController *lv=[[HomeViewController alloc]init];
        lv.s1=[[NSString alloc]initWithFormat:@"%@",xmllink];
        lv.s2=[[NSString alloc]initWithFormat:@"%@",xm1];
        myStaticPassword=[[NSString alloc]initWithFormat:@"%@",xm2];
        [self presentModalViewController:lv animated: YES];
        [self performSelectorOnMainThread:@selector(updateTable) withObject:nil waitUntilDone:NO];
    }else{
         [self performSelectorOnMainThread:@selector(updateTable) withObject:nil waitUntilDone:NO];
        UIAlertView * alert=[[UIAlertView alloc]initWithTitle:@"Incorrect Username/Password" message:@"Please check your Username or Password" delegate:nil cancelButtonTitle:@"Cancel" otherButtonTitles:nil, nil];
        [alert show];
    }

       });
    });
} 
```

# javascript - 如何在 Phonegap 应用程序中将渲染的 Highchart 图表导出为 pdf/png/jpeg？

> ID：14826996
> 
> 赞同：1
> 
> 时间：2013-02-12T06:48:20.787
> 
> 标签：javascript, cordova, highcharts, phonegap-plugins, canvg

我正在尝试使用

```
chart.exportChart({
  type: 'application/pdf',
  filename: 'my-pdf'
}); 
```

在 Phonegap 应用程序中没有成功，尽管在浏览器中一切正常。

我的问题：

我想在 iOS 电子邮件客户端中将呈现的图表附加为 pdf/png/jpeg。如何使用`chart.exportChart`或任何其他方式将下载的内容保存到 iOS 应用程序沙箱？`filename`我应该在方法的键中给出 App Sandbox 路径`chart.exportChart`吗？

**这是我试过的：（**我在cordova-1.6.1.js上）

```
window.requestFileSystem  = window.requestFileSystem || window.webkitRequestFileSystem;
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFileSys, fail);

function fail() {

}

function gotFileSys(fileSystem) {
    chart.exportChart({
       type: 'application/pdf',
    filename: fileSystem.root.fullPath+"/my-pdf"
    });
} 
```

以上不工作，控制台说 -

> [INFO] 成功回调错误：File1 = TypeError: 'undefined' is not a function

PS：我尝试的方式是一种绝望的行为:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:23:24.690

可以这样——

```
canvg(document.getElementById('canvas'), chart.getSVG());
var canvas = document.getElementById("canvas") ; 
var img = canvas.toDataURL("image/png").replace("data:image/png;base64,", ""); //img is base64 encoded and can be persisted in the App Sandbox. 
```

将需要编写一个PhoneGap 插件并使用[Matt 的Category](http://www.cocoawithlove.com/2009/06/base64-encoding-options-on-mac-and.html)将base64 编码`img`转换为图像并将二进制文件保存在App Sandbox 中。

**canvg**脚本可在[此处](http://code.google.com/p/canvg/)获得，[此处](http://www.phpied.com/rgb-color-parser-in-javascript/)也应包含在标记中。

# c# - 处理有错误且不可与 null 或 DBnull.value 比较的对象

> ID：14826997
> 
> 赞同：0
> 
> 时间：2013-02-12T06:48:35.277
> 
> 标签：c#, .net, exception, null, dbnull

我有一个名为 Person 的类（我们称之为实体），它映射到数据库表（Person 表）。此表的记录可能在所有字段中都包含空值，但只有一个，即 PK。

简而言之，我们如何定义 Person 实体：

```
...
private System.DateTime _BirthDate;

[DisplayName("Birth Date")]
[Category("Column")]
public System.DateTime BirthDate
{
    get
    {
        try { return _BirthDate; }
        catch (System.Exception err) 
        { throw new Exception("Error getting BirthDate", err); }
    }
    set
    {
        try { _BirthDate = value; }
        catch (System.Exception err)
        { throw new Exception("Error setting BirthDate", err); }
    }
}
... 
```

问题是当我得到人员名单时

```
var dsPersons = DataHelper.personTabelAdapter.GetFilteredPersons(nationalNo, name); 
```

那些在 db 中为 null 的字段有异常，所以我无法将它们与 null 甚至 DBNull.Value 进行比较，请在调试中查看我的代码的下图

![在此处输入图像描述](../Images/5639a1ba4a2318501e933dfd59aab051.png)

我想检查它们是否为空，以便我可以决定填充我的新对象字段或不填充它们。

这是我得到的异常的详细信息

```
System.Web.Services.Protocols.SoapException: Server was unable to process request. ---> System.Data.StrongTypingException: The value for column 'BirthDateFa' in table 'Person' is DBNull. ---> System.InvalidCastException: Unable to cast object of type 'System.DBNull' to type 'System.String'.

   at EcomService.Data.EcomDS.PersonRow.get_BirthDateFa() in c:\Projects\Project\EcomForms\EcomService\EcomService\Data\EcomDS.Designer.cs:line 30607

   --- End of inner exception stack trace ---

   at EcomService.Data.EcomDS.PersonRow.get_BirthDateFa() in c:\Projects\Project\EcomForms\EcomService\EcomService\Data\EcomDS.Designer.cs:line 30610

   at EcomService.Classes.Entities.Person.GetFilteredPersons(String nationalNo, String name) in c:\Projects\Project\EcomForms\EcomService\EcomService\Classes\Entities\Person.cs:line 898

   at EcomService.EService.GetFilteredPersons(String nationalNo, String name) in c:\Projects\Project\EcomForms\EcomService\EcomService\EService.asmx.cs:line 172

   --- End of inner exception stack trace --- 
```

这是我的网络方法

```
[WebMethod]
public List<Person> GetFilteredPersons(string nationalNo, string name)
{
    return Person.GetFilteredPersons(nationalNo, name);
} 
```

调用这个方法

```
static public List<Person> GetFilteredPersons(string nationalNo, string name)
{
    List<Person> persons = new List<Person>();
    var dsPersons = DataHelper.personTabelAdapter.GetFilteredPersons(nationalNo, name);
    foreach (var dsPerson in dsPersons)
    {
        Person person = new Person();
        person.BirthDateFa = dsPerson.BirthDateFa;
        //I don't know how to deal with the exceptions here
        .... //other fields
        persons.Add(person);
    }
    return persons;
} 
```

我真的被困在这件作品中了。欢迎您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:56:53.553

出现异常是因为您使用的是强类型 DataSet。StrongTypingException 文档说：

当用户访问 DBNull 值时，强类型 DataSet 引发的异常。

请阅读这篇文章， http: [//msdn.microsoft.com/en-us/magazine/cc163877.aspx](http://msdn.microsoft.com/en-us/magazine/cc163877.aspx)

例子 ：

```
object.Is<ColumnName>Null() //which returns true or false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:54:19.017

您可以通过调用返回布尔值的 Is(columnname)Null() 函数来检查类型化数据集中的对象是否为空。这些强类型异常是由于该列为空。例如 dsPerson.IsBirthDateNull() 。

# javascript - TypeError: $(...).valid 不是 jquery 验证中的函数

> ID：14826998
> 
> 赞同：0
> 
> 时间：2013-02-12T06:48:39.053
> 
> 标签：javascript, jquery, jquery-validate

下面的代码在独立上运行良好，但在服务器上部署 jsp 时会引发 javascript 错误。我已经为 .valid 方法包含了 jquery.validation.js。

```
 if (jQuery("input[name=uname]").valid()& jQuery("input[name=add]").valid() & jQuery("input[name=cty]").valid()& jQuery("input[name=stat]").valid()& jQuery("input[name=zip]").valid()& jQuery("input[name=ssn]").valid()& (jQuery('#Terms_Cond').is(":checked"))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:54:21.437

把 & 改成 &&，然后试试。

```
if (jQuery("input[name=uname]").valid()&& jQuery("input[name=add]").valid() && jQuery("input[name=cty]").valid()&& jQuery("input[name=stat]").valid()&& jQuery("input[name=zip]").valid()&& jQuery("input[name=ssn]").valid()&& (jQuery('#Terms_Cond').is(":checked"))) 
```