# StackOverflow 问答 13180000-13180999

# php - 整个过程在一个 php 文件中

> ID：13180000
> 
> 赞同：-1
> 
> 时间：2012-11-01T15:11:58.700
> 
> 标签：php, performance, architecture

我在一个 php 文件中完成整个过程。例如; crud 操作，编写表单，发布/获取数据。那是错的吗？或者导致性能损失？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:22:08.080

您的代码没有分隔或结构化，很难找到一些配置来快速更改它。这对您来说可能很好，但对于将来支持或修复您的代码的其他开发人员来说很难。

# internet-explorer - 为什么 Internet Explorer 不在我的网页上呈现 VML？

> ID：13180004
> 
> 赞同：0
> 
> 时间：2012-11-01T15:12:11.773
> 
> 标签：internet-explorer, graphics, vector-graphics, vml

首先，我知道微软在 1998 年就停止了 VML 的开发。尽管如此，我继承了一个带有一堆 VML 标记的网页，我真的很想让它工作而不重写整个事情。

问题是，我将页面从一种技术（经典 ASP）移动到另一种技术（ASP.net MVC 4），现在 VML 不再呈现。它在原始页面中呈现良好，但是当我将 VML 标记复制到另一个页面时，它不会呈现。为了解决这个问题，我只将 VML 代码的一小部分复制到一个小的 HTML 文件中，即使这样也不会呈现。

以下内容呈现为空白页。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>    
    <v:polyline modify='false' id='t1' points = "7pt,131pt,6pt,128pt,6pt,128pt,6pt,123pt,6pt,123pt,11pt,120pt,11pt,120pt,18pt,121pt,21pt,123pt,26pt,126pt,26pt,137pt,20pt,143pt,14pt,2in,14pt,2in,8pt,140pt,8pt,140pt,7pt,138pt,7pt,138pt,7pt,136pt,7pt,131pt" >
    </v:polyline>    
</body>
</html> 
```

期望的行为是这应该呈现一个小形状。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:35:25.580

您没有为`v`前缀声明命名空间。

另外，请查看有关 VML的[旧 MSDN 文档。](http://msdn.microsoft.com/en-us/library/bb264142%28VS.85%29.aspx)

# ruby-on-rails - 在 Rails ActiveAdmin gem 中修改 BaseController

> ID：13180005
> 
> 赞同：6
> 
> 时间：2012-11-01T15:12:15.983
> 
> 标签：ruby-on-rails, activeadmin, controllers

我在 Rails 应用程序中使用 ActiveAdmin gem。如果我想添加一个适用于所有 activeadmin gem 的新 before 过滤器，我该怎么做？我想我可以修改 ActiveAdmin 中的 BaseController 来实现这一点，但是从 rails 应用程序中进行此修改的正确方法是什么？有没有办法复制和覆盖 BaseController？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T15:51:10.383

如果我理解你，有一个特殊的配置

```
 # == Controller Filters
  #
  # You can add before, after and around filters to all of your
  # Active Admin resources from here.
  #
   config.before_filter do

   end 
```

你可以在 initializers/active_admin.rb 中找到它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-13T02:18:47.697

我通过在`config/initializers/active_admin.rb`. 只需检查线路 `#enter code here`

`#Controller Filters`

`# You can add before, after and around filters to all of your`

`# Active Admin resources and pages from here.`

在此处写下您的代码，与描述的相同`Fivell`

# reference - SSAS CUBE 2 个事实表和 1 个维度

> ID：13180009
> 
> 赞同：2
> 
> 时间：2012-11-01T15:12:26.703
> 
> 标签：reference, ssas, cube, fact

我有 2 个事实表和 1 个维度。

Fact1 外键直接指向 DIM 主键。

Fact1 和 Fact2 有共同的列，例如“orgkey”

Fact2 没有连接到 DIM，因为它没有任何公共列。

但我想将 Fact2 连接到 DIM。

因此，当 Fact1 和 Fact2 得到公共列时，我在 DSV（CUBE 构建）中连接了 Fact1 和 Fact2。

问题是 Fact2 无法引用 DIM 表，因为当我选择 DIM 属性时我没有得到任何数据。

我怀疑人际关系。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:33:41.570

您需要在维度用法中添加与 Fact2 的连接。

通过 Fact1 的连接是多对多的（如果我正确理解了您的架构）。

问题是必须按特定顺序进行连接。

您需要在将 Dim 连接到 Fact2 之前将 Fact1 连接到 Fact2，这样当您选择 Dim 和 Fact2 之间的多对多关系时，下拉列表将填充 Fact1

我希望这有帮助。

# java - 使用 imageicons 创建标签数组时出现 nullpointerexception

> ID：13180010
> 
> 赞同：-1
> 
> 时间：2012-11-01T15:12:30.307
> 
> 标签：java, label, bufferedimage, imageicon

我正在尝试编写的程序有点问题。我希望能够从文件选择器中获取图片并将它们打印在 JPanel 上。现在可以检索图片，但我似乎无法将它们放入 JLabels 数组中，我得到了 NullPointerException。我知道这个例外意味着什么，但我看不出我在哪里或如何做错了什么，有人可以帮我找出我的错误吗？

```
private class OpenFileHandler implements ActionListener {

    public BufferedImage [] getBufferedImages() {
        chooser = new JFileChooser();
        chooser.setMultiSelectionEnabled(true);
        chooser.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);
        chooser.setFileFilter(new FileNameExtensionFilter("Images", "PNG", "JPG", "GIF", "BMP"));
        int result = chooser.showOpenDialog(null);

        if (result == JFileChooser.APPROVE_OPTION) {
            imagesFile = chooser.getSelectedFiles();
        }

        imagesBuf = new BufferedImage[imagesFile.length];

        for (int i = 0; i<imagesFile.length; i++) {
            try {
                imagesBuf[i] = ImageIO.read(imagesFile[i]);
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return imagesBuf;
    }

    public void actionPerformed(ActionEvent event) {
        if (event.getSource() == openMenu) {
            getBufferedImages();

            for (int i = 0; i<imagesBuf.length; i++) {
                labels[i] = new JLabel(new ImageIcon(imagesBuf[i]));
                picturePanel.add(labels[i]);
            }
        }
    }
} 
```

这是我得到的错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at be.maarten.gallery.GalleryFrame$OpenFileHandler.actionPerformed(GalleryFrame.java:118)
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
at javax.swing.AbstractButton.doClick(Unknown Source)
at javax.swing.plaf.basic.BasicMenuItemUI.doClick(Unknown Source)
at javax.swing.plaf.basic.BasicMenuItemUI$Handler.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:20:31.853

如果您的`GalleryFrame`线`118`指向下面的线：

```
 picturePanel.add(labels[i]); 
```

然后我认为`picturePanel`没有初始化。`actionPerformed`请在方法中使用之前更正/执行初始化。它应该可以正常工作。

如果不是这种情况，请分享第 118 行的声明。

# php - PHP变量消失

> ID：13180011
> 
> 赞同：0
> 
> 时间：2012-11-01T15:12:30.180
> 
> 标签：php, mysql, forms

```
 echo $t1, $t2, $t3, $t4, $uid;
$querytotal = "update customer_det set `t1` = $t1, `t2` = $t2, `t3` = $t3, `t4` = $t4 WHERE `id` = $uid "; 
echo $querytotal; 
```

所以我回显了变量，我看到它们很好。当我去执行更新语句并在之后回显该语句时，它会删除所有变量。我不知道这怎么可能。`t2`Mysql_error: ...对于在第 1 行的 ' = , `t3`= , `t4`= WHERE ='附近使用正确的语法`id`。所以它在 t1 上跳过错误，但在 t2 时踢出？我在这里缺少什么吗？

这是运行前的回显查询`update customer_det set`t1 `= '215',`t2 `= '240',`t3 `= '265',`t4 `= '300' WHERE`id`= '273'`

在`update customer_det set`t1 `= '',`t2 `= '',`t3 `= '',`t4 `= '' WHERE`id之后`= ''`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:15:11.550

```
echo $t1, $t2, $t3, $t4, $uid;
$querytotal = "update customer_det set t1 = '$t1', t2 = '$t2', t3 = '$t3', t4 = '$t4' WHERE id = '$uid' "; 
echo $querytotal; 
```

您需要在 php 中的“双引号”内的变量名周围加上“单引号”，以便它们显示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T16:36:07.200

尝试这个

> 回声$t1，$t2，$t3，$t4，$uid；$querytotal = "更新 customer_det 设置 t1 = '"。$t1 ."', t2 = '"。$t2 ."', t3 = '"。$t3 ."', t4 = '"。$t4 ."' 哪里 id = "。$uid; 回声$查询总计；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T01:58:21.793

试试这个代码：

```
echo $t1, $t2, $t3, $t4, $uid;
$querytotal = "update customer_det set t1 = '{$t1}', t2 = '{$t2}', t3 = '{$t3}', t4 = '{$t4}' WHERE id = {$uid}"; 
echo $querytotal; 
```

变量不会被删除。您的查询不正确。

# c# - 处理时区的工作流程建议

> ID：13180013
> 
> 赞同：3
> 
> 时间：2012-11-01T15:12:34.003
> 
> 标签：c#, asp.net, timezone, timezone-offset

为了概述我的项目，我有一个 ASP.NET WebForm 应用程序，它允许用户登录并安排一个活动。事件处理由我为其编写 Windows 服务的本地 Windows 服务器处理和分派。

一切正常，除了我有一些从东海岸登录的客户和一些从西海岸登录的客户。

有人可以建议我如何处理时区差异的可能工作流程吗？时区信息已经与每个客户端一起存储在数据库中。我只是对如何应用时区信息感到困惑。

我知道`DateTime`有一种`ToUniversalTime()`方法，但它让我对它的工作原理感到困惑，因为它似乎需要知道`DateTime`结构所在的时区才能将其转换为通用时间，据我所知，`DateTime`结构确实结构中没有内置时区信息。

有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:17:33.660

如果事件计划发生*一次*`DateTimeOffset`，则将其存储为UTC 或 UTC是有意义的`DateTime`。如果您将其存储为`DateTimeOffset`，您仍然可以将其显示给具有相关偏移量的用户 - 实际上您可以将其显示为*其他*时区的人，或者作为他们的本地时间，或者作为原始用户的本地时间，并带有它的指示符与观众的当地时间不一样（如果你明白我的意思）。

如果它是经常性的（例如“每天凌晨 4 点”），那么这还不够，因为它不会考虑 DST 的变化。相反，您应该存储*本地*时间和时区标识符。见`TimeZoneInfo.Id`和`TimeZoneInfo.FindSystemTimeZoneById`。

作为一个公然的插件，您可能希望考虑使用[Noda Time](https://github.com/nodatime/nodatime) API 作为内置类型的更具表现力的替代方案......

您几乎肯定*不*应该使用`DateTime.ToUniversalTime()`，因为它使用*系统*时区（即在您的服务器上），这几乎肯定是无关紧要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:36:12.203

我们一直在研究类似的应用程序。我们将 TimeZoneOffset 和 Scheduled Time 存储在数据库表中。在客户端，TimeZOneOffset（以分钟为单位）考虑了夏令时。计算如下：

```
 Dim localZone As TimeZone = TimeZone.CurrentTimeZone 
    Dim StartTime As DateTime = UserEnteredStartDateTime 'from your web app
    Dim TimeZoneOffset As Integer = localZone.GetUtcOffset(StartTime).TotalMinutes 
```

服务器上的存储过程包括一个 where 子句，它选择在预定开始时间加上 30 秒窗口内的行，如下所示：

```
SELECT Invitations.ID, Invitations.OrganizerName, Invitations.OrganizerEmail, Invitations.EMailBody, Invitations.[Subject]
FROM Invitations 
WHERE (Invitations.MailSent=0) 
And (Invitations.SendTime Between DateAdd(mi,Invitations.TimeZOneOffset,GETUTCDATE()) 
And DateAdd(s,(Invitations.TimeZoneOffset*60)+30,GETUTCDATE())) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T15:18:24.167

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.datetime.touniversaltime.aspx)：

> ToUniversalTime 方法将 DateTime 值从本地时间转换为 UTC。要将非本地时区的时间转换为 UTC，请使用 TimeZoneInfo.ConvertTimeToUtc(DateTime, TimeZoneInfo) 方法。要转换与 UTC 的偏移量已知的时间，请使用 ToUniversalTime 方法。
> 
> 从 .NET Framework 2.0 版开始，ToUniversalTime 方法返回的值由当前 DateTime 对象的 Kind 属性确定。

DateTime的默认值[`Kind`](http://msdn.microsoft.com/en-us/library/system.datetime.kind.aspx)未指定，因此您的日期将被假定为本地时间。

# c# - 将文件发送到队列 RabbitMQ

> ID：13180014
> 
> 赞同：2
> 
> 时间：2012-11-01T15:12:36.653
> 
> 标签：c#, rabbitmq, nservicebus, zeromq

我们需要将文件保存在队列中。我们正在尝试将 RabbitMQ 作为中间层。看起来 RabbitMQ 不支持文件流。文件大小大约小于 10MB。出于安全考虑，我们的客户不想将文件保存在磁盘中。我有什么选择？感谢您的任何建议。还有其他开源工具吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:29:51.953

只要将文件转换为字节数组，就可以将它们保存在队列中。如果您有很多文件，我想这将占用合理的内存量，但这是可能的。

# android - GetBufferLock 线程超时

> ID：13180016
> 
> 赞同：7
> 
> 时间：2012-11-01T15:12:41.243
> 
> 标签：android, debugging

我正在 Android Samsung Galaxy TAB 10.1 上开发。官方更新到4.0.4版本后经常报错：

```
11-01 17:04:35.382: E/gralloc(11657): GetBufferLock timed out for thread 11657 buffer 0x55 usage 0x33 LockState 1 
```

并且设备立即重新启动。如果我正在调试自己的应用程序，这个错误看起来完全是随机的。

有什么建议吗？

附言

我唯一的一个无限绘画循环：

```
public void run() {
    Canvas canvas = null;

    while (true) {
        try {
            Thread.sleep(50);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

        try {
            synchronized (lock) {
                if (!invalidated)
                    continue;
            }

            canvas = mHolder.lockCanvas();

            synchronized (mHolder) {
                onDraw(canvas);
            }

            synchronized (lock) {
                invalidated = false;
            }
        } finally {
            if (canvas != null) {
                mHolder.unlockCanvasAndPost(canvas);
                canvas = null;
            }
        }

        synchronized (lock) {
            if (painter == null)
                break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:31:51.753

我猜这个 GPU 内存有问题，当这个错误发生时你是否在做一些繁重的图形显示？

如果不是...也许另一个应用程序是。

值得检查具有大量 GPU 消耗的应用程序（可能是大量动态壁纸？）并将其删除。然后重新启动应该可以解决这个问题。

还要注意你永远不应该写：

```
while (true) {
} 
```

至少添加一个运行标志：

```
while(running){
} 
```

因此您可以在应用程序停止时将运行设置为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T07:07:03.963

看起来需要由其他线程访问的块被您的应用程序无限使用。您是否在您的绘画方法中运行无限循环？

# facebook - 使用 FQL 流表获取标记页面的所有帖子

> ID：13180021
> 
> 赞同：2
> 
> 时间：2012-11-01T15:12:48.853
> 
> 标签：facebook, facebook-graph-api, facebook-fql

有没有办法使用 FQL 中的流表获取标记页面的所有帖子？显然，唯一的索引列是 source_id 但我只能使用它来获取在页面上创建的帖子。但是，在用户时间轴上创建但带有页面标记的帖子呢？

如果没有办法用 FQL 做到这一点。然后，有一种方法可以使用 Graph API 使用 Page 对象的 Tagged 连接。但是，我如何使用图形 API 在日期之间进行过滤？比如从updated_date在x和y之间的连接流中获取所有帖子？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:43:19.210

post_id 也是一个索引字段。您可以使用子查询或连接从 stream_tag 表中获取此信息

`SELECT message FROM stream WHERE post_id IN (SELECT post_id FROM stream_tag WHERE target_id = me()) AND updated_time > LAST_TIME_YOU_CHECKED`

# ruby-on-rails - OmniAuth Shibboleth 策略配置未通过

> ID：13180023
> 
> 赞同：0
> 
> 时间：2012-11-01T15:12:55.060
> 
> 标签：ruby-on-rails, ruby, omniauth, shibboleth

我正在尝试使用[omniauth-shibboleth](https://github.com/toyokazu/omniauth-shibboleth)策略（使用[rack-saml](https://github.com/toyokazu/rack-saml)）。

我的omniauth初始化程序如下所示：

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :shibboleth, {
    :info_fields => {
      :email => 'mail',
    },
    :extra_fields => [:cn, :sn, :schacHomeOrganization],
  }
end 
```

一切都是成功的，直到omniauth-shibboleth应该设置`omniauth.auth`ENV变量，但这最终是部分的。

即-它确实检测到`eduPersonPrincipalName`并将其`uid`正确传递给归档-我可以看到它。

**但**它无法填写`email`，并且额外的参数`cn, sn, schacHomeOrganization`。

我已经验证了`request.env` **确实包含**所有必需的属性，所以问题不在于 Shibboleth 方面。

为了调试，我硬编码了 Gem 文件中的选项`lib/omniauth/strategies/shibboleth.rb`：

```
 option :info_fields, {:email => 'mail'}
  option :extra_fields, [:cn, :sn, :schacHomeOrganization] 
```

然后一切正常。

*因此，我的Omniauth*设置或*omniauth-shibboleth*处理选项的方式似乎存在问题，因此我的配置最终不会与默认值合并。

我究竟做错了什么？

版本：

```
omniauth - 1.1.1
omniauth-shibboleth - 1.0.8
rack-saml - 0.0.4

pow - 0.4.0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T12:21:53.723

事实证明，**Devise**自己处理 Omniauth 初始化，虽然我**可以**使用`config/initializers/omniauth.rb`toggle `:debug => true`，但 Devise 覆盖了我设置的任何其他选项。

因此，在使用**Devise时配置****Omniauth 策略**的正确位置是：**`config/initializers/devise.rb`**

 **```
config.omniauth :shibboleth, {:uid_field => 'eppn',
                     :info_fields => {:email => 'mail', :name => 'cn', :last_name => 'sn'},
                     :extra_fields => [:schacHomeOrganization]
              } 
```

以前我认为该行仅提示设计默认策略。**

# html - JQuery、Struts 1 和 ajax 调用：根据另一个选择选项加载选择选项时出现问题

> ID：13180028
> 
> 赞同：1
> 
> 时间：2012-11-01T15:13:03.750
> 
> 标签：html, jsp, jquery, struts-1

我的jQuery是：

```
$('select[name=select1]').change(function () {
            var cod=$(this).val();
            if (cod>0) {
                $.ajax({
                    url:"Load.do",
                    data: "cod="+cod,
                    success: function (response) {
                            $('#info').html(response); }
                    });
            }
        }); 
```

在 struts-config.xml 中，我有：

```
<action path="/Load" scope="request" type="mypackage.Load"></action> 
```

类 Load 是一个动作：

```
public class Load extends Action {
public ActionForward execute(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response)
{
    // TODO Auto-generated method stub

    Connection con = null;
    Statement stmt = null;
    ResultSet rs = null;

    try {
        // get the connection 
        stmt = (Statement) con.createStatement();

        String cod = request.getParameter("cod");

        String select = new String("Select firstCode, name from mytable where secondCode = '");
        select = select.concat(cod);
        select = select.concat("';");
        rs = stmt.executeQuery(select);
        PrintWriter out = response.getWriter();
        while (rs.next()) {
            out.print("<html:option value='");
            out.print(rs.getString("firstCode"));
            out.print("'>");
            out.print(rs.getString("name"));
            out.println("</html:option>");
            out.flush();
        }

        return null;
    } catch (NamingException e) {
        e.printStackTrace();
    } catch (SQLException e) {
        e.printStackTrace();
    }  catch (Exception e) {
        e.printStackTrace();
    } finally {
        if (rs != null) {
              try { rs.close(); } catch (SQLException e) {}
              rs = null;
        }
        if (stmt != null) {
              try { stmt.close(); } catch (SQLException e) {}
              stmt = null;
        }
        if (con != null) {
              try { con.close(); } catch (SQLException e) {}
              con = null;
        }        
    }

    return null;
}
 } 
```

数据被检索，但它们没有打印在信息 div 中。

在我的 .jsp 页面中，我要填写的选择是：

```
 <html:select property="prop1">
 <html:option value="0">Choose:</html:option>
 <div id="info"></div> 
 </html:select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:24:30.827

JSP 代码并不真正相关。重要的是生成的 HTML 代码。使用 Firebug 或类似工具来检查您的页面内容，并查看问题所在。如果 Struts 操作返回适当的 HTML，如下所示：

```
<option value="2">some label</option>
<option value="3">some other label</option> 
```

然后上面的 Javascript 将用`info`上面的 HTML 替换标识的 div 的内容。所以最终的结果是

```
<select name="prop1">
    <option value="0">Choose:</option>
    <div id="info">
        <option value="2">some label</option>
        <option value="3">some other label</option>
    </div>
</select> 
```

以上是无效的 HTML。选项不应位于 div 内，而应位于 select 元素的正下方。

给选择元素一个 ID，并用您的 AJAX 请求的响应替换选择元素的内容。

但另一个问题是您的操作不会生成 HTML 代码，而是生成包含 Struts 标记的 JSP 代码。这是没有意义的。Struts 标签在服务器端由 JSP 解释。但是您将它们直接发送到浏览器。浏览器只理解 HTML。它不知道 Struts 标签。

为什么不使用推荐的 MVC 方法？该操作应该生成一个 bean 列表，将其存储在请求中，然后转发到 JSP，该 JSP 将使用标签生成 HTML 标记。

最后，你应该

*   使用准备好的语句而不是字符串连接
*   HTML 转义你的字符串。Struts 标签为你做这件事
*   避免吞咽异常
*   不以分号结束 SQL 查询。

# html - Bootstrap 和 HTML5 标签结构语义

> ID：13180030
> 
> 赞同：7
> 
> 时间：2012-11-01T15:13:07.667
> 
> 标签：html, twitter-bootstrap, semantic-markup

我正在使用 bootstrap 和 html5 样板一起编写一个站点，并且我正在尝试以尽可能语义有效的方式来构建它。

所以我的页面非常简单，它由一个页眉、一个有两列的部分和一个页脚组成。

我想知道以下哪种方式是在语义上构建事物的最佳方式，例如页面的部分和页脚部分。

```
<div class="row">
   <section>
      ....
   </section>
<div class="row">
   <footer>
     ....
   </footer>
</div>

<section>
   <div class="row">
     ...
   </div>
</section>
<footer>
   <div class="row">
     ....
   </div>
</footer>

<section class="row">
  ...
</section>
<footer class="row">
  ...
</footer> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T15:16:02.453

最后一个：

```
<section class="row">
  ...
</section>
<footer class="row">
  ...
</footer> 
```

该`row`课程是演示性的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T15:28:51.010

对主要内容使用`<article>`标签。如果两列都包含文章内容，则可以使用`<section>`s 分隔列。

```
<article>
  <section id="part-1">
    <header class="section-header">...</header>
    ...
  </section>
  <section id="part-2">
    <header class="section-header">...</header>
    ...
  </section>
</article>
<footer id="main-footer">
  ...
</footer> 
```

然后添加尽可能多`<div>`的 s 作为 CSS 的钩子。

不要使用引用特定视觉呈现的类名，例如“行”。相反，使用引用内容的类（和 ID），例如“part-1”和“main-footer”。

# jquery - Jquery tmpl 从函数返回 HTML

> ID：13180031
> 
> 赞同：2
> 
> 时间：2012-11-01T15:13:06.997
> 
> 标签：jquery, jquery-templates

我有以下模板

```
<script id="myTemplate" type="text/x-jquery-tmpl">
    <p>${{html Name}}</p>
    <p>${Format(Title)}</p>
</script> 
```

和 javascript 函数 Format()

```
function Format(Title){
 return "<b>" + Title + "</b>";
} 
```

和实际数据

```
var data = { 
    Name: "<h3>Tom</h3>", 
    Title: "Mr."
}; 
```

${{html Name}} 用于显示包含在“Name”中的 html 标签。但是，我的函数“格式”返回的 HTML 标记在我的页面上呈现为文本。如何使用 JQuery tmpl 从函数返回 HTML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:56:44.913

引用`${...}` [**文档**](http://api.jquery.com/template-tag-equal/)：

> ${} 呈现的值被评估为字符串，并且是 HTML 编码的。因此，任何嵌入的标记都将被编码。要在呈现的模板中插入未编码的标记，请改用 {{html}} 模板标签。

所以它可以用 来修复`{{html Format(Title)}}`。

# c++ - 未定义对“libiconv_close”的引用

> ID：13180032
> 
> 赞同：0
> 
> 时间：2012-11-01T15:13:08.913
> 
> 标签：c++, mingw, linker-errors, zxing, scons

我正在尝试使用 MinGW 构建 zxing，但它失败并出现错误`undefined reference to libiconv_close`

这是构建的输出：

```
scons: Reading SConscript files ...
scons: done reading SConscript files.
scons: Building targets ...
g++ -o build\zxing.exe -Ldl -L/usr/lib -LC:/MinGW/msys/1.0/local/lib -liconv build\magick\src\MagickBitmapSource.o build\magick\src\main.o build\libzxing.a -lMagick++ -lMagickWand -lMagickCore
build\libzxing.a(Decoder.o): In function `add':
C:\Workspace\BarCodes\zxing-2.1\cpp/build/core/src/zxing/aztec/decoder/Decoder.cpp:51: undefined reference to `libiconv_open'
C:\Workspace\BarCodes\zxing-2.1\cpp/build/core/src/zxing/aztec/decoder/Decoder.cpp:52: undefined reference to `libiconv'
C:\Workspace\BarCodes\zxing-2.1\cpp/build/core/src/zxing/aztec/decoder/Decoder.cpp:53: undefined reference to `libiconv_close'
build\libzxing.a(DecodedBitStreamParser.o): In function `ZN5zxing6qrcode22DecodedBitStreamParser6appendERSsPKhjPKc':
C:\Workspace\BarCodes\zxing-2.1\cpp/build/core/src/zxing/qrcode/decoder/DecodedBitStreamParser.cpp:70: undefined reference to `libiconv_open'
C:\Workspace\BarCodes\zxing-2.1\cpp/build/core/src/zxing/qrcode/decoder/DecodedBitStreamParser.cpp:85: undefined reference to `libiconv'
C:\Workspace\BarCodes\zxing-2.1\cpp/build/core/src/zxing/qrcode/decoder/DecodedBitStreamParser.cpp:87: undefined reference to `libiconv_close'
C:\Workspace\BarCodes\zxing-2.1\cpp/build/core/src/zxing/qrcode/decoder/DecodedBitStreamParser.cpp:92: undefined reference to `libiconv_close'
collect2: ld returned 1 exit status
scons: *** [build\zxing.exe] Error 1
scons: building terminated because of errors. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:44:36.267

正如@Mat 所说，问题在于链接顺序，`-liconv`需要在命令行中进行。`build\libzxing.a`

# ios - iOS：阅读 NSDictionary 崩溃应用程序

> ID：13180033
> 
> 赞同：0
> 
> 时间：2012-11-01T15:13:10.607
> 
> 标签：ios, nsdictionary

我有一个字典，我存储在另一个字典中，它本身存储在一个数组中，如下所示：

```
NSMutableDictionary* sectionHeights = [[NSMutableDictionary alloc]initWithObjectsAndKeys:
                [NSString stringWithFormat:@"%f", section1Height], @"Section 1 Height",
                [NSString stringWithFormat:@"%f", section2Height], @"Section 2 Height",
        nil];

        [sectionObjects addObject:
         [[NSMutableDictionary alloc] initWithObjectsAndKeys:
          @"Site Inspection Report", @"Form Name",
          @"2", @"Section Count",
          sectionHeights, @"Section Heights",
          nil]
         ]; 
```

我将数组传递给另一个类的属性值。当我尝试回读 sectionHeights 时，应用程序崩溃：

```
//get the subSectionData
    NSDictionary* subSectionData = [sectionObjects objectAtIndex:sectionObjects.count-1];
    NSDictionary* sectionHeights = [subSectionData objectForKey:@"Section Heights"];
    for(id obj in sectionHeights) {
        NSLog(@"%@", obj);
    } 
```

在这种情况下，sectionHeights 有 2 个对象，NSStrings 将被转换为浮点数，但查看控制台输出似乎应用程序正在尝试输出 3 个对象：

```
2012-11-01 10:59:26.338 OAI_Accordion[2402:c07] Section 1 Height
2012-11-01 10:59:26.339 OAI_Accordion[2402:c07] Section 2 Height
2012-11-01 10:59:26.340 OAI_Accordion[2402:c07] -[__NSCFConstantString countByEnumeratingWithState:objects:count:]: unrecognized selector sent to instance 0x9088
2012-11-01 10:59:26.341 OAI_Accordion[2402:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFConstantString countByEnumeratingWithState:objects:count:]: unrecognized selector sent to instance 0x9088'
*** First throw call stack:
(0x1c95012 0x10d2e7e 0x1d204bd 0x1c84bbc 0x1c8494e 0x46e8 0x2c84 0xfb817 0xfb882 0x4aa25 0x4adbf 0x4af55 0x53f67 0x225b 0x177b7 0x17da7 0x18fab 0x2a315 0x2b24b 0x1ccf8 0x1bf0df9 0x1bf0ad0 0x1c0abf5 0x1c0a962 0x1c3bbb6 0x1c3af44 0x1c3ae1b 0x187da 0x1a65c 0x1e9d 0x1dc5 0x1)
libc++abi.dylib: terminate called throwing an exception 
```

我看不出我在哪里设置错误，所以我希望更多的关注它可能会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:48:08.787

看起来您的应用程序由于循环而崩溃：

```
for(id obj in sectionHeights) {
    NSLog(@"%@", obj);
} 
```

这很可能是`countByEnumeratingWithState:objects:count:`您在尝试错误地遍历值字典时收到错误的原因。

您可以通过这样的块使用枚举来遍历您的字典：

```
[sectionHeights enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop)
{
    //
    NSLog(@"key: %@ -> value: %@", key, obj);
}]; 
```

这使您可以并排访问字典键和值。您之前的实现崩溃，因为编译器不知道在您提供的上下文中如何处理字典。

如果您更喜欢快速枚举的语法，您应该通过将代码更改为：

```
for(id obj in [sectionHeights allValues]) {
    NSLog(@"%@", obj);
} 
```

如果您需要字典键，也可以使用 [sectionHeights allKeys]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:44:13.863

请试试这个：

```
NSDictionary* subSectionData = [sectionObjects objectAtIndex:sectionObjects.count-1];
NSDictionary* sectionHeights = [subSectionData objectForKey:@"Section Heights"];

for(id obj in [sectionHeights allValues]) {
    NSLog(@"%@", obj);
} 
```

# iphone - IOS6 我如何听接口方向。不是设备方向

> ID：13180034
> 
> 赞同：1
> 
> 时间：2012-11-01T15:13:09.693
> 
> 标签：iphone, ios, rotation, ios6

我需要知道方向何时从纵向切换到横向，反之亦然。如果我选择听，`UIDeviceOrientationDidChangeNotification`我会面朝上、面朝下等，但只有在界面旋转时才需要运行代码。

我可以这样做[http://the.ichibod.com/kiji/how-to-handle-device-rotation-for-uiviews-in-ios/](http://the.ichibod.com/kiji/how-to-handle-device-rotation-for-uiviews-in-ios/)

```
- (void)deviceOrientationDidChange:(NSNotification *)notification {

 //Obtaining the current device orientation
  UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];

 //Ignoring specific orientations
  if (orientation == UIDeviceOrientationFaceUp || orientation == UIDeviceOrientationFaceDown     || orientation == UIDeviceOrientationUnknown || currentOrientation == orientation) {
   return;
  }

  [NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(relayoutLayers) object:nil];
  //Responding only to changes in landscape or portrait
  currentOrientation = orientation;
} 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:34:05.727

I had similar problems orientating my views when using device orientation. It has up, down, left and right but also unknown and another which I yet to figure it out what it means (int 5 on the enum, 0 being Unknown). Anyways, what I ended up resorting to was to detect the status bar orientation. That remains more consistency for what the user is seeing.

```
UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation]; 
```

Hope this helps.

# javascript - 键入时进行表单验证/更正：首字母

> ID：13180035
> 
> 赞同：0
> 
> 时间：2012-11-01T15:13:19.753
> 
> 标签：javascript, jquery, validation

我想自动更正首字母的字段，但我的知识有限，所以经过一个小时的反复试验，我所拥有的只是一个将输入大写的小脚本。我想要的是这样的：

*   a 变为 A.（大写并以点结尾）

*   AbC 变为 ABC（大写并用点分隔）

*   A1BC_* 变为 ABC（不允许其他字符，大写并用点分隔）

我所拥有的是：

```
 $(".hoofdletters").keyup(function(e)
    {
        $(".hoofdletters").val(($(".hoofdletters").val()).toUpperCase());
    }); 
```

**更新**

我不想浪费任何人的时间并打开一个新话题，所以我在这里尝试一下。我自己也尝试了一些方法来自动将句子中的每个单词大写。一切正常，但由于某种原因，空间被删除了。它与 `+ ''`如果我删除没有任何作用，如果我添加一个空格我在每个字母后得到一个空格，如果我这样离开它，那么空格是不允许的。

有人有什么建议吗？

```
$('.cap').bind('textchange', function (event, previousText) {
        var val = this.value;
        var newVal = '';
        val = val.split(' ');
        for(var c=0; c < val.length; c++) {
                 newVal += val[c].substring(0,1).toUpperCase() +
 val[c].substring(1,val[c].length) + ''; // It has something to do with this line
        }
        this.value = newVal;
    });​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:44:31.613

[小提琴](http://jsfiddle.net/F9znp/)

```
$(document).ready(function() {
    $(".hoofdletters").focus(function() {
        var current = $(".hoofdletters").val();
        $(".hoofdletters").keyup(function(e) {
            var key = String.fromCharCode(e.keyCode);
            console.log(e.keyCode);
            if (key >= 'A' && key <= 'Z') {
                current += key + ".";
                this.value = current;
            }
            else if (e.keyCode == 8) {
                current = $(".hoofdletters").val();

            } else {
                current = "";
            }
        });
        $(".hoofdletters").blur(function() {
            var i = $(".hoofdletters").val();
            var last = i[i.length - 1];
            if (last != "." && i.length !== 0) {
                this.value += ".";
            }
        });
        $('.hoofdletters').keydown(function(e) {
            var i = $(".hoofdletters").val();
            if (e.keyCode == 8 && i.charAt(i.length - 1) == ".") {
                $(".hoofdletters").val(i.slice(0, -1));
                current = $(".hoofdletters").val();
            }
        })
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:20:29.843

这应该有效：

**代码**：

```
$(".hoofdletters").keydown(function(e) {
    var c = String.fromCharCode(e.which).toUpperCase();
    if(c >= 'A' && c <= 'Z') {
        this.value += c.toUpperCase() + ".";
        return false;
    }
    return false;
});​ 
```

**演示**：http: [//jsfiddle.net/aHq4b/](http://jsfiddle.net/aHq4b/)

* * *

**注意：**上述策略有以下限制。

*   它完全阻止了删除/退格等常规操作，因为我们完全控制了 keydown 事件，没有任何东西可以让浏览器执行。
*   它总是在末尾追加字符，而不是在光标位置插入
*   它不支持粘贴操作

以下也应该纠正这些。它使用 zurb 的 textchange 事件，该事件会在文本发生变化时触发，无论使用何种方式（pase/type/text-drag-drop 等）

**代码**：

```
$('.hoofdletters').bind('textchange', function (event, previousText) {
    var t = this.value;
    var newValue = '';
    for(var i = 0; i < t.length; i++) {
        var c = t.charAt(i).toUpperCase();
        if(c >= 'A' && c <= 'Z') {
            newValue += c + '.';
        }
    }
    this.value = newValue;
});​ 
```

**演示**：http: [//jsfiddle.net/aHq4b/1/](http://jsfiddle.net/aHq4b/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T15:19:08.420

由于这里不是找人为您编写代码的地方，所以让我给您一个计划，您可以遵循该计划来解决问题。然后，如果您在此过程中遇到问题，您可以回到这里提出一个更具体的问题。

*   你使用一个变量来存储你的输出，这个变量以一个空字符串开始
*   你遍历所有的字母
    *   如果允许使用该字母，请将其大写版本添加到输出变量的末尾
*   将输入框的新值设置为等于输出变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-31T19:10:46.907

如果您喜欢更短的代码，也许这对您有用。

```
string.replace(/([a-z])([^a-z]*)/gi, '$1.').toUpperCase(); 
```

> 下面的例子...

```
var string = 'a';
string.replace(/([a-z])([^a-z]*)/gi, '$1.').toUpperCase();
=> A.

var string = 'AbC';
string.replace(/([a-z])([^a-z]*)/gi, '$1.').toUpperCase();
=> A.B.C.

var string = 'A1BC_*';
string.replace(/([a-z])([^a-z]*)/gi, '$1.').toUpperCase();
=> A.B.C. 
```

# c# - 如何在 WPF 中插入 N 个点

> ID：13180037
> 
> 赞同：0
> 
> 时间：2012-11-01T15:13:39.030
> 
> 标签：c#, wpf, interpolation

这个想法很简单，假设我有一个包含 N 个项目的 2D 点的集合。我想要一条以柔和方式插入指向的路径。

我尝试使用 Cubic Bezier 但问题是它只需要 3 点，如果我想使用 N 点，其中 N % 3 = 1 或 N % 3 = 2 然后剂量有效，甚至在交叉点使用 N % 3 = 0两个Beizers都不软（做一个高峰）。使用二次贝塞尔曲线不起作用，因为它是一条曲线，例如如果 N = 2，则在两个点之间绘制二次曲线。

我想知道一种方法来做到这一点，如果更简单有效的话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T15:35:48.467

贝塞尔曲线可用于在任意数量的点之间进行插值，而不仅仅是两个或三个点。

看看[构造 Bezier 曲线](http://en.wikipedia.org/wiki/B%C3%A9zier_curve#Constructing_B.C3.A9zier_curves)和[De Casteljau 算法的几何解释](http://en.wikipedia.org/wiki/De_Casteljau%27s_algorithm#Geometric_interpretation)。特别是我过去自己实现了第二个链接，但我很难用比文章本身更好的措辞来表达它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-30T11:36:54.017

为此，我实现了一个可以在 github 中找到的库：

*   [图书馆（Rulyotano.Math）](https://github.com/rulyotano/Rulyotano.Math)
*   [使用示例](https://github.com/rulyotano/wpf-bezier-interpolation)

而这一切都基于这篇[文章](https://www.codeproject.com/Articles/769055/Interpolate-D-points-usign-Bezier-curves-in-WPF)。

# android - 如何在向下滚动 ListView 时隐藏选项卡，然后在用户向上滚动时再次显示它们？

> ID：13180039
> 
> 赞同：1
> 
> 时间：2012-11-01T15:13:40.353
> 
> 标签：android

如果用户向下滚动列表视图，我想让 tabhost 的选项卡淡出

我有以下代码，但它不起作用

```
ListView ls = (ListView) findViewById(R.id.list);
        ls.setOnScrollListener(new OnScrollListener() {
            public void onScrollStateChanged(AbsListView view, int scrollState) {

            }
            int previousVisible = 3;
            public void onScroll(AbsListView view, int firstVisibleItem,
                    int visibleItemCount, int totalItemCount) {
                if (previousVisible < firstVisibleItem) {
                    getParent().findViewById(android.R.id.tabhost)
                            .setVisibility(View.INVISIBLE);
                } else {
                    getParent().findViewById(android.R.id.tabhost)
                            .setVisibility(View.VISIBLE);
                }
                previousVisible = firstVisibleItem;
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-14T09:24:55.200

Lars Werkman 已经实现了一个 Android 库来实现 Roman Nurik 和 Nick Butcher 的这个 UI 原则。

[https://github.com/LarsWerkman/QuickReturnListView](https://github.com/LarsWerkman/QuickReturnListView)

# python - 使用 python/biopython 翻译混合的 fasta 文件

> ID：13180041
> 
> 赞同：0
> 
> 时间：2012-11-01T15:13:49.827
> 
> 标签：python, biopython, fasta

所以我有一个程序，它从数据库中获取一堆序列并将它们下载到一个 fasta 文件中。问题是这些序列可能是蛋白质，也可能是 DNA。我将大的 fasta 文件拆分成许多小的 fasta 文件，一旦我有了序列，我需要它们都是蛋白质。所以我想测试每一个，看看它是否是蛋白质。

如果它们都是蛋白质，我很好，如果它们都是 dna，我有一种优雅的方式来翻译它们，但我需要找到一种方法来测试每个新的 fasta 文件，翻译它并进行翻译替换dna文件

这是我到目前为止所拥有的：

```
from Bio import Entrez, SeqIO  
from Bio.Seq import Seq

record_iter = SeqIO.parse(open(output_file), 'fasta')
for seq_record in record_iter:
    outfile = '{0}.fa'.format(seq_record.id)
    count = SeqIO.write(seq_record,outfile,'fasta')
    xmlfile = '{0}.xml'.format(seq_record.id)
    print xmlfile   # Added this to show it's working, not stalled.
    if...
    #and here is where i would somehow test each "outfile" to see if it's dna or protein and then do something different with each one. 
```

我尝试将其设置为字符串（我认为），但我不能使用字母，因为这不是 fasta 的格式，我尝试了很多其他的东西。无论如何，任何帮助将不胜感激。

只是对于那些不熟悉的人来说，fasta 文件的格式如下：

```
>here is a bunch of identification information about the sequence after the carat.
GAAATTTGAGGCGTTCGCTGTGCAGTGAAAAGTGAGACTTTCTACTGTTCGCGTAGAAAGTGCAATAACC
AAGCCACCCACTCAGTGCCCAGACTAGCAACACAAGTCCGGCAAAATGGGAATCAAGTTCCTGGAAGTTA
TCAAACCGTTCTGCAGTATACTGCCGGAAATCGCAAAACCGGAGCGCAAGATCCAATTCAGGGAGAAAGT
GCTATGGACTGCGATCACCCTGTTCATCTTCCTGGTGTGCTGCCAGATCCCGCTTTTCGGTATCATGAGC
TCAGACTCGGCGGATCCCTTCTACTGGATCCGTGTGATCCTGGCCTCCAACCGTGGTACGCTCATGGAGC
TGGGTATCTCGCCCATCGTGACCTCTGGCCTCATTATGCAGCTGCTGGCCGGAGCA 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:30:27.583

我不熟悉图书馆，但我认为你建议的方式写成：

```
if all(c.upper() in 'ATGC' for c in seq_record.seq):
    pass # it's DNA 
```

# jsf - Facelets 多级模板 - ui:define 未呈现

> ID：13180043
> 
> 赞同：4
> 
> 时间：2012-11-01T15:13:56.517
> 
> 标签：jsf, facelets, myfaces

我有 2 个基本模板 - 一个带有侧边菜单，一个没有 - 两个 ui:include 一个包含 ui:insert 标签的公共页面（模板很大，所以下面的基本示例）。

使用 Mojarra 一切正常，但现在我已经迁移到 MyFaces，ui:insert 标记被忽略，相关 ui:define 的内容不会被渲染（即“这里是我的结果”不显示）。

我应该以某种方式将included-page.xhtml 指定为模板吗？我试过了

```
<ui:composition template="included-page.xhtml" /> 
```

代替

```
<ui:include src="included-page.xhtml" /> 
```

但丢失了CSS。

希望有人可以提出解决方案:)

非常感谢，

尼尔

我的页面.xhtml

```
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
    template="/templates/default-template.xhtml">

    <ui:param name="title" value="My Title" />

    <ui:define name="results">

        Here are my results

    </ui:define>

</ui:composition> 
```

默认模板.xhtml

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
    <title>#{title}</title>
</h:head>

<h:body>

    <ui:include src="included-page.xhtml" />

</h:body>

</html> 
```

包含的page.xhtml

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets">

    <ui:insert name="results">

    </ui:insert>

</ui:composition> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:01:43.470

`<ui:include>`应该是一个`<ui:decorate>`.

```
<ui:decorate template="included-page.xhtml" /> 
```

但是，如果`included-page.xhtml`它本身没有在其他地方重用，我想知道为什么它不只是被内联在主模板中。

### 也可以看看：

*   [Facelets 中 ui:composition 和 ui:decorate 的区别](https://stackoverflow.com/questions/13091927/difference-between-uicomposition-and-uidecorate-in-facelets/13092844#13092844)
*   [ui:decorate 和 ui:include 之间真正的概念区别是什么？](https://stackoverflow.com/questions/10778068/what-is-the-real-conceptual-difference-between-uidecorate-and-uiinclude/10790780#10790780)

# php - 'ftp_get: 打开 BINARY 模式数据连接' - 批量发生在单个文件上

> ID：13180044
> 
> 赞同：1
> 
> 时间：2012-11-01T15:14:01.610
> 
> 标签：php, ftp, cron

我有一个 cron 作业设置，它使用脚本在设定的时间将许多文件从 FTP 下载到本地服务器。当我手动运行脚本时它工作得非常好，它甚至通过 cron 10 次中有 9 次完全正常。但是，有时它设置为获取的文件中的 1 个会失败，并且会引发与此类似的错误：

```
ftp_get(): Opening BINARY mode data connection for Media_4.zip (421623342 bytes). in /home/crons/feeds/get_files.php on line 102 
```

第 102 行是 ftp_get()，我知道它没有任何问题，因为它在手动/其他自动尝试运行时工作正常，但为了完全清楚：

```
foreach ($download_files as $download_file)
{
  $local_file = "{$path}/files/{$download_file}";
  $download = ftp_get($conn_id, $local_file, $download_file, FTP_BINARY);
  if (!$download) 
  {
    ftp_dl_log($queue_number, "FTP download has failed for $source_name: $download_file", "warn");
  } 
  else 
  {
    ftp_dl_log($queue_number, "Downloaded file successfully");
  }
} 
```

我怀疑这与文件大小、权限或类似的东西有什么关系，总共有 ~2gb 分布在多个文件中，总共下载了多个文件，有时它似乎只是在其中一个文件上失败，所有其他文件都在没有问题所以我很困惑。所有文件的示例是：

```
Media_1.zip (600mb, downloads fine)
Media_2.zip (200mb, downloads fine)
Media_3.zip (700mb, downloads fine)
Media_4.zip (400mb, downloads fails)
Media_5.zip (300mb, downloads fine)
Media_6.zip (250mb, downloads fine)
Media_summary.csv (2mb, downloads fine) 
```

大小限制不是问题，也不会发生超时。

我用作示例的文件已上传到 ftp @

```
Oct 31 17:27 
```

并且文件的 ftp_get() 发生@

```
Nov 01 03:14 
```

因此，在请求时文件不可能是不完整的。考虑到我以后可以 ftp_get() 没有错误的同一个文件，它没有损坏。

有谁知道可能导致此问题的任何其他事情？服务器同时执行其他获取是否会导致问题？

欢迎任何建议或见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:33:50.397

我认为您可能正在查看服务器问题。如果您同时运行这样的提要，则可能是负载问题。

那时我会尝试监控服务器负载（使用 top 或 htop），并且可能会重新分配一些其他进程以给这个进程更多的喘息空间。

# android - 从 google play 下载和安装时，android 应用程序的更新会崩溃？

> ID：13180053
> 
> 赞同：-1
> 
> 时间：2012-11-01T15:14:13.630
> 
> 标签：android

我在 android google play 上有应用程序。然后进行了一些更改，我在 google play 上加载了新应用程序。它使用新版本成功上传。但是在新应用程序数据中没有出现。我的应用程序中有 sqlite 数据库。需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T06:27:05.820

在上传第二个版本的应用程序时，我对数据库进行了更改（在数据库中添加了两列）。但我没有处理新上传中的数据库版本控制。那就是它正在崩溃。

如果有人在应用程序中有数据库，请注意 Google Play 上的每次上传。此链接将帮助您访问[包含数据库的版本控制应用程序的有用链接](http://www.drdobbs.com/database/using-sqlite-on-android/232900584)

谢谢并恭祝安康。

# linux - 替换 sed 中的控制字符

> ID：13180057
> 
> 赞同：20
> 
> 时间：2012-11-01T15:14:25.027
> 
> 标签：linux, bash, shell, sed

我需要在 linux 的文本文件中替换所有出现的控制字符 CTRL+A (SOH/ascii 1)，如何在 SED 中实现？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-01T15:32:32.190

尝试：

```
sed 's/^A/foo/g' file 
```

使用`Ctrl`++在上述命令中`V`创建`A`序列。`^A`

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-01T15:31:21.207

通过“替换”，我假设您想“就地”更改文件。

使用 GNU sed：

```
# Create a file with a single control character (SOH)
echo -e "\x01" > file
# Change SOH control characters to the literal string "SOH"
sed -i 's/\x01/SOH/g' file
# Check result
cat file 
```

给...

```
SOH 
```

该`-i`选项在 OS X sed 上不起作用，因此您需要通过将 sed 管道传输到临时文件来解决该问题。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-11-09T14:53:05.447

这可以通过`cat`（`-v`等效地`--show-nonprinting`选项并将其输入`sed`）来完成。

如果控制字符是标题开始 (SOH) 字符 (CTRL+A / ASCII 1)，并且我们想用制表符替换它，我们将执行以下操作：

```
cat -v file | sed 's/\^A/\t/g' > out 
```

`cat -v`将用 ^A 替换 SOH 字符，然后匹配并替换为`sed`.

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-11-01T16:59:41.810

你想用什么来代替它们？如果替换是单个字符，`tr`是比 . 更好的选择`sed`。替换为字母“a”：

```
tr '\1' a < input-file > tmp && mv tmp input-file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-03T18:59:47.520

您可以使用 tr 命令

tr -s '\001' '|' 新文件

tr -s "word or delimiter" 想替换成 "word or delimiter" newfile

# c# - 如何在 vb.net 中将任何 cpu 平台 dll 用于 32 位应用程序？

> ID：13180058
> 
> 赞同：-1
> 
> 时间：2012-11-01T15:14:26.420
> 
> 标签：c#, vb.net

我正在使用一个为任何 cpu 平台构建的 dll，并且我正在为 x86 平台开发一个应用程序，因为我在我的应用程序中引用了这个 dll，我无法访问它的类。

你能建议我该怎么做吗？

我只想在我的 x86 平台或 32 位应用程序的应用程序中使用“任何 cpu”平台构建 dll。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:31:08.667

如果 DLL 真的是为“任何 CPU”构建的，那么无论如何使用 DLL 应该没有问题。您可以使用 coreflags 实用程序来更改程序集的设置以匹配您的目标平台。

# javascript - 我可以把 i 放在 jquery.done() 回调中吗？

> ID：13180059
> 
> 赞同：0
> 
> 时间：2012-11-01T15:14:30.883
> 
> 标签：javascript, jquery, json, for-loop, callback

> **可能重复：**
> [将索引从 for 循环传递到 ajax 回调函数（javascript）](https://stackoverflow.com/questions/6077357/passing-index-from-for-loop-to-ajax-callback-function-javascript)

我想延迟 i++ 直到 jquery 回调完成。我有这个：

```
 for (var i = 0; i < stocks.length; i++) {
        var lastprice = 0
        var stock = stocks[i].stock;
        $.getJSON('http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.quotes%20where%20symbol%20in%20("' + stock + '")&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys',
          function(data) {
            lastprice = data.query.results.quote.LastTradePriceOnly;
          }).done(function() {
             console.log(stock, lastprice);
            });
        }; 
```

问题是循环在 .getJSON 之前完成，所以我最终只是在控制台记录了我数组中的最后一只股票，但是我的数组中所有股票的价格。我试过了，但它只会杀死我的浏览器：

```
 for (var i = 0; i < stocks.length;) {
        var lastprice = 0
        var stock = stocks[i].stock;
        $.getJSON('http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.quotes%20where%20symbol%20in%20("' + stock + '")&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys',
          function(data) {
            lastprice = data.query.results.quote.LastTradePriceOnly;
          }).done(function() {
             console.log(stock, lastprice);
             i++;
            });
        }; 
```

有人知道我在做什么错吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:37:19.947

以下其中一项应该可以满足您的需求：

[http://jsfiddle.net/BxKKP/](http://jsfiddle.net/BxKKP/)

```
var stocks = [
      {"stock":"aapl"},
      {"stock":"yhoo"}
]

for (var i = 0; i < stocks.length;i++) {
    var stock = stocks[i].stock;

    $.ajax({
          url: 'http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.quotes%20where%20symbol%20in%20("' + stock + '")&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys',
          dataType: 'json',
          async: false,
          success: function(data) {
              console.log(stock, data.query.results.quote.LastTradePriceOnly);
          }
    });
};​ 
```

或者：http: [//jsfiddle.net/9NrxY/](http://jsfiddle.net/9NrxY/)

```
var stocks = [
      {"stock":"aapl"},
      {"stock":"yhoo"}
]

for (var i = 0; i < stocks.length;i++) {
    var stock = stocks[i].stock;

     $.getJSON('http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.quotes%20where%20symbol%20in%20("' + stock + '")&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys',
      function(data) {
        console.log(data.query.results.quote.Symbol, data.query.results.quote.LastTradePriceOnly);
      });
};​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:46:32.703

`for loop`如果您杀死浏览器的原因是因为您不小心使用了一种称为**忙等待**（坏）的东西。[http://en.wikipedia.org/wiki/Busy_waiting](http://en.wikipedia.org/wiki/Busy_waiting)

我不知道您的问题的上下文，但是除非在页面的初始加载期间发生这种情况，否则您应该避免同步执行。相反，构建您的代码，使其成为事件驱动的。

例如，如果`for loop`用于在表中生成行，则在 ajax 调用的成功回调函数中实际呈现行。

例子：

```
for (var i = 0; i < stocks.length; i++) {
    var lastprice = 0
    var stock = stocks[i].stock;
    $.getJSON('http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.quotes%20where%20symbol%20in%20("' + stock + '")&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys', function(data) {
        lastprice = data.query.results.quote.LastTradePriceOnly;
        //RENDER ROW
        $('<span class="row"/>').html(lastprice).appendTo('#TABLE_BODY_ELEMENT');
    })
};​ 
```

如果您使用同步而不是异步，则每次循环命中 .getJSON() 调用时，它都会冻结，从而使您的整个页面冻结。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-01T15:18:56.570

你的问题是 getJson 异步执行，但是你需要同步执行。尝试使用 $.ajax 而不是 $.getJson。在 $.ajax 中，将属性 dataType 设置为 json 并将 async 设置为 false。

或根据评论尝试设置 **$.ajaxSetup({ async: false });**

```
 for (var i = 0; i < stocks.length; i++) {
    var lastprice = 0
    var stock = stocks[i].stock;
    $.ajaxSetup({  async:false});
    $.getJSON('http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.quotes%20where%20symbol%20in%20("' + stock + '")&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys',
      function(data) {
        lastprice = data.query.results.quote.LastTradePriceOnly;
      }).done(function() {
         console.log(stock, lastprice);
        });
    }; 
```

# html - 如何使 xhtml 页面遵循严格的语法检查？

> ID：13180065
> 
> 赞同：2
> 
> 时间：2012-11-01T15:14:48.850
> 
> 标签：html, xhtml, doctype, xhtml-1.0-strict

我正在学习 XHTML。如果我的理解是正确的，XHTML 遵循严格的语法。所以我创建了这个标记：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
    <head>    
        <title>XHTML page</title>
<!--    </head> -->
    <body>
        This is the body
    </body>
</html> 
```

我已经注释了结束的 head 标记来检查 XHTML 的严格性。当我用 .xhtml 扩展名保存这个文件时，它显示了一个错误。但是当我使用 .html 扩展名保存它时，浏览器非常宽容并呈现标记，而不管缺少的 head 标签。

所以我的疑问是，是扩展名（.xhtml）使文件实际上是xhtml并赋予它严格的语法行为吗？不应该是确定它是否是 xhtml 的 DOCTYPE 吗？

从我在某处读到的内容来看，在 HTTP 中，文件扩展名并不重要，它的标头类型很重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:36:01.867

从 Web 服务器提供服务时，mime 类型（也称为内容类型）决定了浏览器将文档视为 XHTML 还是 HTML。浏览器**从不**使用 DOCTYPE 来确定页面是否为 XHTML（但 HTML5 之前的验证器会这样做）。

当浏览器从文件系统本地读取文件时，它确实使用文件扩展名来决定它是 XHTML 还是 HTML。

有时，但并非总是如此，服务器被设置为如果客户端请求一个以“.xhtml”结尾的 url，则该文档将使用 XHTML（例如，`application/xhtml+xml`）mime 类型提供。

# html - 网站上的 Apps 脚本停止工作

> ID：13180067
> 
> 赞同：1
> 
> 时间：2012-11-01T15:14:55.227
> 
> 标签：html, google-apps-script, google-sites

操作系统：Windows 7

浏览器：火狐和Chrome

我的谷歌网站上有几个页面使用谷歌应用脚​​本从电子表格中收集数据并将它们作为谷歌应用脚​​本小工具的一部分显示在页面上。最近，（在过去几天内），**它应该从电子表格中显示的信息没有显示出来**。它只是空白。脚本的其余部分似乎运行良好，但很难说。

自上一个工作版本以来，我没有更改任何代码（我已经使用此设置和代码大约 2 个月，之前几乎可以完美运行）。我调试了获取数据的函数，它们仍然可以正常工作，并且数据的格式与以前相同。

如果有帮助，这是我一直在使用的代码。如果重要的话，网站流量每月大约有 200 次访问。

```
 function doGet() {
    var t=HtmlService.createTemplateFromFile('Practices');
    return t.evaluate();
  }

  function getData() {
    var sheet=SpreadsheetApp.openById('CORRECT SPREADSHEET KEY').getSheetByName('Practices');
    return sheet.getDataRange().getValues(); 
} 
```

这是我认为不工作的 Practices.html 文件中的代码块。（这些数据均未显示，但其余数据显示）

```
<div class="carousel" style="display:none;">
  <div class="items">
    <? var date= new Date(); ?>
    <? var data = getData();
     for (var i = 1; i < data.length; ++i) { ?>

      <div>
        <h3><?= data[i][0] ?></h3>
        <p>Date: <?=data[i][1].getMonth()+1 ?>/<?=data[i][1].getDate()?>/<?=data[i][1].getFullYear() ?></p>
        <p><?= data[i][2] ?> </p>
      </div>
    <? } ?>

  </div>
  </div> 
```

我知道有一个显示：无；在这段代码中。它被切换到稍后显示。出于某种原因，如果显示：无；不在那里它只显示第一张幻灯片，但没有显示它之后的幻灯片。

更新：检查了页面的 html 并且所有数据都在那里，具有正确的标签和结构。这让我认为这是我用来制作动画和更改显示设置的 jquery 脚本。我使用相同的 jquery 函数创建了另一个页面，但无需从电子表格中获取数据，它工作正常。虽然，这不是通过应用程序脚本小工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T02:07:17.360

我已经使用您的确切代码创建了一个示例电子表格和一个脚本，减去您提到的 display:none 样式不是您的问题。它确实工作得很好。这表明您的问题在其他地方。

这是电子表格： [https ://docs.google.com/spreadsheet/ccc?key=0AhfBwM8xuKeSdElFSXpIWllKekRyc0EwdF9uZ0VLanc](https://docs.google.com/spreadsheet/ccc?key=0AhfBwM8xuKeSdElFSXpIWllKekRyc0EwdF9uZ0VLanc)

这是脚本： [https ://script.google.com/macros/s/AKfycbwH9zKHFLQ2u_I21xLkG8xgrr_F_Ir_oioE8mOuW4H7kc8WEnVs/exec](https://script.google.com/macros/s/AKfycbwH9zKHFLQ2u_I21xLkG8xgrr_F_Ir_oioE8mOuW4H7kc8WEnVs/exec)

您是否尝试过使用 Chrome 开发人员工具或 Firefox 等检查您的页面，以查看结构是否存在？您可能还想通过调用[此处](https://developers.google.com/apps-script/html_service#DebuggingTemplates)`t.getCode()`描述的 a 来评估之前查看您的页面代码。

**编辑**

如果您在 HtmlService 中使用 jQuery，则可能是问题所在。最近发布的 Apps Script（没有发行说明）破坏了 jQuery 的许多功能（以及其他功能），但没有错误消息，它只是默默地不起作用。现在我已经放弃了将 jQuery 与 Apps Script 一起使用，这太麻烦了。我构建的所有新应用程序现在都使用纯 JavaScript，因为它更容易查明（和解决方法）有问题的方法。

# asp.net - 无法将 Razor 网站部署到 IIS 6

> ID：13180068
> 
> 赞同：0
> 
> 时间：2012-11-01T15:15:04.763
> 
> 标签：asp.net, deployment, razor, asp.net-webpages

我一直在为这个而抓狂。在 StackOverflow 和互联网上找到了许多类似的参考资料，但似乎没有任何帮助。

我只是在打开网站时不断收到“目录列表被拒绝”，而在请求特定的 .cshtml 文件时，“不提供此类页面”。

我要做的是：

*   在 Visual Studio 2010 中，我选择 File > New Web Site > ASP.NET Web Site (Razor)
*   在[http://haacked.com/archive/2011/05/25/bin-deploying-asp-net-mvc-3.aspx](http://haacked.com/archive/2011/05/25/bin-deploying-asp-net-mvc-3.aspx)之后，我选择了“添加可部署程序集”并选择“使用 Razor 语法的 ASP.NET 网页” .
*   我将站点发布到 C:\inetpub\wwwroot\WebSite。
*   在我的开发机器（Windows 7）上的 IIS7 中，我将发布的文件夹转换为应用程序，并将应用程序池设置为“ASP.NET v4.0”。
*   测试本地主机/网站，一切正常。
*   然后我将整个文件夹复制到运行 Windows Server 2003 和 IIS 6 的远程计算机上。
*   在 IIS6 中，我创建了该文件夹的应用程序，并分配了一个 .NET 4 应用程序池。
*   当我打开网站时，我收到“目录列表被拒绝”错误消息。
*   当我尝试打开 Default.cshtml 文件时，我收到“未提供此类页面”。

在我看来，所有必需的 DLL 都包含在 Bin 文件夹中（包含在“添加可部署程序集”选项中）：

*   Microsoft.Web.Infrastructure
*   NuGet.Core
*   System.Web.Helpers
*   System.Web.Razor
*   System.Web.WebPages
*   System.Web.WebPages.Administration
*   System.Web.WebPages.Deployment
*   System.Web.WebPages.Razor
*   网络矩阵数据
*   WebMatrix.WebData

“未提供此类页面”错误页面上报告的 .NET 版本为：Microsoft .NET Framework Version:4.0.30319；ASP.NET 版本：4.0.30319.272。

我在看什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:39:52.487

我找到了答案！令人难以置信的是我不得不搜索这个...

问题是“根”网站（我的 webapp 位于主 web 文件夹下的文件夹中）有一个 Web.config 文件，其中包含以下内容：

```
<add key="webpages:Enabled" value="false" /> 
```

这意味着 .cshtml 网页对于在主网页下创建的任何网站都被禁用...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:39:39.353

您是否设置了网站的权限？我认为您右键单击它并单击“编辑权限”同样对于错误“未提供此类页面”在默认文档中的 IIS 中添加 default.cshtml 如果它不存在。

# symfony - Symfony2 Forms中FormType内部的字段名称？

> ID：13180071
> 
> 赞同：0
> 
> 时间：2012-11-01T15:15:09.163
> 
> 标签：symfony, symfony-forms

请看示例：

```
/** @var FormBuilderInterface $builder */

$builder->add('foo', new MyFormType());
$builder->add('bar', new MyFormType());
$builder->add('baz', new MyFormType()); 
```

我需要从`MyFormType`实例内部获取当前的字段名称（我的意思是字段名称：`foo`，`bar`以及`baz`上面的示例）。我怎样才能做到这一点？选择什么方法以及如何获取其中的字段名称？

更一般地说，我需要调用一些带有字段名称的外部函数作为每个具有特定类型的表单元素的参数，所以我决定从一个`FormType`类内部进行，它看起来像很好的封装。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:03:31.660

据我所知，您无法获取字段名称，但您可以获取父级。从 MyFormType buildForm 方法内部：

```
$parent = $builder->getParent(); 
```

如果我正确理解您的问题，我认为最好的方法是在您的 MyFormType 中添加一个接受字符串的构造函数：

```
$builder->add('foo', new MyFormType('foo')); 
```

# curl - cURL 的证书 cacert.pem 放在哪里？

> ID：13180083
> 
> 赞同：8
> 
> 时间：2012-11-01T15:15:29.887
> 
> 标签：curl, rvm, ssl-certificate

我正在尝试在 Debian 服务器上更新 rvm：

```
rvm get stable 
```

但我收到以下错误：

```
curl: (60) SSL certificate problem: unable to get local issuer certificate
More details here : http://curl.haxx.se/docs/sslcerts.html 
```

我大约 5 个月前安装了这个服务器，一切正常，但似乎[https://rvm.io的证书发生了一些变化](https://rvm.io)

所以我设法下载了一个新的捆绑证书（我的用户目录中的 cacert.pem）：

```
wget http://curl.haxx.se/ca/cacert.pem 
```

并尝试使用[官方文档](https://rvm.io/rvm/upgrading/)所说的不同命令，但可以选择使用证书文件：

```
\curl --cacert ./cacert.pem -L https://get.rvm.io | bash -s stable # update to stable 
```

事情向前推进了一点。不幸的是，在安装过程中，rvm 再次运行 curl，我又遇到了同样的错误。

**所以我想知道将我的 cacert.pem 文件放在哪里来替换 cURL 使用的文件？**

我也尝试了其他技术：创建一个包含 cacert = ~/cacert.pem 的 .curlrc 文件，但出现错误：CAfile: cacert.pem CApath: /etc/ssl/certs

所以我尝试将我的 cacert.pem 复制到 /usr/share/ca-certificates/cacert.org 并在 /etc/ssl/certs 中创建一个指向 /usr/share/ca-certificates/cacert.org/ 的符号链接cacert.pem

但是，当我

```
rvm get stable 
```

我得到了错误：

```
curl: (60) SSL certificate problem: unable to get local issuer certificate
More details here : http://curl.haxx.se/docs/sslcerts.html 
```

我也在下面尝试了这个，但没有不同的结果：

```
sudo update-ca-certificates -f 
```

**所以我想知道将我的 cacert.pem 文件放在哪里？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T10:10:28.510

好的，我设法让它工作，但我对我的解决方案不太满意。

我犯的第一个错误是 .curlrc 文件中的指令不正确。我们应该像指定“curl”命令的选项一样使用这个文件。所以我删除了“等号”：

```
cacert /home/user_me/cacert.pem 
```

有了这个，我能够使命令的第一部分工作：

```
\curl -L https://get.rvm.io | bash -s stable 
```

bash 部分仍然失败，因为 rvm 在 root 模式下再次使用 curl。

所以我将我的**.curlrc**文件也复制到了**/root**文件夹中。

它奏效了！我什至可以调用标准的 rvm 命令：

```
rvm get stable 
```

但这有点棘手，我希望 curl 使用我的 cacert.pem 文件而不使用所有这些 .curlrc 文件。

[谷歌搜索更多，我在这里](http://blog.nowherelan.com/category/linux/ubuntu-linux/hardy/)和[这里](http://turboflash.wordpress.com/2009/06/23/curl-adding-installing-trusting-new-self-signed-certificate/)找到了一些有用的信息。第一个参考有一个小错误：当我阅读“sudo update-ca-certificates --fresh”命令的手册页时，我意识到那个人把他的文件放在了错误的地方。

您必须将证书放入**/usr/share/ca-certificates**文件夹而不是 /usr/local/share/ca-certificates ，然后在配置文件**/etc/ca-certificates.conf**中附加一行证书（例如，“my_ca.crt”）。然后你可以运行你的“sudo update-ca-certificates --fresh”命令。

注意：如果您将证书复制到**/usr/local/share/ca-certificates**，则无需再修改 /etc/ca-certificates.conf 配置文件，也无需运行“sudo update-ca-证书——新鲜”命令。

但是在我的情况下，对于第一个解决方案（/usr/share/ca-certificates），当我运行“sudo update-ca-certificates --fresh”命令时出现错误。作为第二种解决方案，我尝试将我的证书放入 /usr/local/share/ca-certificates。但它没有用。

所以我放弃了，我保留了我的两个 .curlrc 文件。

因此，如果有人能指出我做错了什么，我将不胜感激。

# c# - 当我调用一个新线程时程序断开连接

> ID：13180084
> 
> 赞同：-2
> 
> 时间：2012-11-01T15:15:31.580
> 
> 标签：c#, .net

我有一个 IRC 机器人，我正在尝试创建一个新线程来做一些工作，线程的调用方式如下：

```
 case ".showfiles":
               if (!oThread.IsAlive)
                {
                    say("#channel", "> shared files are:");
                    //a class called shares is in x.cs
                    SHARES SHARED = new SHARES(); 
                    /called a method named begin_find
                    oThread = new Thread(new ThreadStart(SHARED.begin_find));
                    oThread.IsBackground = true;
                    oThread.Start();
                }
                break; 
```

被调用的方法只是扫描文件夹中的所有文件。如果上面的代码没有提供足够的信息，我会发布其余的，但基本上只要我输入 .showfiles 机器人就会断开连接而没有错误，就像它取代了父线程一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:19:43.490

照原样`Thread`，`IsBackground = true`应用程序不会等待它，并在所有前台线程完成后立即终止。如果是这种`Main`方法，程序可能会立即终止并因此断开您的机器人。

然而，这是一个猜测，因为您的代码的上下文并不明显。

# sql - 在查询中调用 SQL 函数

> ID：13180086
> 
> 赞同：0
> 
> 时间：2012-11-01T15:15:37.860
> 
> 标签：sql, sql-server-2008

我在 SQL Server 2008 中遇到了一个函数问题，如果我使用函数执行查询，大约需要 40 秒，如果我删除函数并在查询中添加函数的逻辑，则为 0 秒！

任何人都可以解释为什么使用函数会这么慢的原因？我真的很想使用该函数来封装逻辑，但我没有找到...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:35:10.870

在 JOIN 或 WHERE 子句中使用标量 UDF 可以防止使用强制 SQL Server 执行表扫描的索引。它还将阻止 SQL Server 正确估计行数，这可能会导致以后选择错误的计划。每一行的调用成本也可以加起来。

一般来说，远离标量值 UDF 是个好主意。但是，您可以使用内联表值函数来封装您的逻辑。它们像视图一样被处理并由优化器解决。重要的是您使用的是内联 TVF 类型。多语句 TVF 甚至比标量 UDF 更差。

有关更多详细信息，请查看我的文章：[不同类型函数的性能比较](http://sqlity.net/en/498/t-sql-tuesday-24-prox-n-funx/)

# actionscript-3 - AS3 Video COMPELETE 事件处理程序不起作用？addEventListener(Event.COMPLETE

> ID：13180087
> 
> 赞同：0
> 
> 时间：2012-11-01T15:15:46.910
> 
> 标签：actionscript-3

您好我正在使用 FLVPlayback 2.5 组件并收到此错误，请帮助！- 无法将 fl.video: 转换为 flash.events.VideoEvent。

as3 代码使用 -

```
 comp.addEventListener(Event.COMPLETE, videoComplete);

            function videoComplete(event:VideoEvent):void {
                trace("videoComplete");
            } 
```

完全错误 -

> TypeError：错误 #1034：类型强制失败：无法将 fl.video::VideoEvent@6e974dd1 转换为 flash.events.VideoEvent。在 flash.events::EventDispatcher/dispatchEventFunction() 在 flash.events::EventDispatcher/dispatchEvent() 在 fl.video::FLVPlayback/ [http://www.adobe.com/2007/flash/flvplayback/internal::handleVideoEvent ()](http://www.adobe.com/2007/flash/flvplayback/internal::handleVideoEvent()) 在 flash.events::EventDispatcher/dispatchEventFunction() 在 flash.events::EventDispatcher/dispatchEvent() 在 fl.video::VideoPlayer/ [http://www.adobe.com/2007/flash/flvplayback/internal: :httpDoStopAtEnd()](http://www.adobe.com/2007/flash/flvplayback/internal::httpDoStopAtEnd()) 在 fl.video::VideoPlayer/ [http://www.adobe.com/2007/flash/flvplayback/internal::httpNetStatus()](http://www.adobe.com/2007/flash/flvplayback/internal::httpNetStatus())

修复感谢罗尼！欢呼的人。这对我有用..

```
 import fl.video.VideoEvent;

            comp.addEventListener(Event.COMPLETE, videoComplete);

            function videoComplete(event:Event):void {
                trace("videoComplete");
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T21:30:09.457

lostPixels 在很大程度上解释了错误的含义，但事实并非如此`VideoEvent`，它只是`Event`

```
 comp.addEventListener(Event.COMPLETE, videoComplete);

 function videoComplete(event:Event):void //event:Event not event:VideoEvent
 {
     trace("videoComplete");
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T22:02:50.547

我在那里发表了评论，但我想在这里给你一个完整的解释。当你说：

```
addEventListener(Event.COMPLETE, videoComplete); 
```

它实际上确实调用了您的函数……但事件与您预期的不同。这是因为它实际上是在触发一个 fl.video.VideoEvent，它还有一个名为 COMPLETE 的常量。Event.COMPLETE 和 VideoEvent.COMPLETE = 一个字符串值“完成”，所以它调用你的函数。

第二个问题是功能：

```
function videoComplete(event:VideoEvent):void { 
```

正在监听 flash.events.VideoEvent。当您使用完整的代码时，这可能是一个意外。但是当你调用函数时，它正在接收一个 fl.video.VideoEvent... 因此错误

这样做：

```
import fl.video.VideoEvent;

addEventListener(VideoEvent.COMPLETE, videoComplete);

function videoComplete(event:VideoEvent):void { 
```

你都准备好了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T15:52:05.847

类型强制失败是您尝试将一个严格类型化的变量转换为另一个的结果。这意味着什么（它不是为了容易理解而写的）是这样的：

假设我们有两个变量，一个是数字，一个是字符串。如果我们尝试说 number = string，Flash 会吐出那个错误，因为 string 不能是数字。

这与您的代码有关的是您正在尝试将**Event**转换为**VideoEvent**。

要解决此问题，请将您的代码更改为以下行：

```
 comp.addEventListener(VideoEvent.COMPLETE, videoComplete); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T15:40:45.610

我认为这可能与您所针对的 Flash 播放器版本有关。你能瞄准 FP9 或 FP10 吗？（在 Flash Professional 的属性面板中）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-01T21:05:19.750

您可以在视频末尾添加一个提示点并聆听。

假设 comp 是您的 flvPlayback 组件的实例名称...

```
import fl.video.FLVPlayback;
import fl.video.MetadataEvent;

comp.addEventListener(MetadataEvent.CUE_POINT, video_cp_listener, false, 0, true);

function video_cp_listener(eventObject:MetadataEvent):void {

//run code here when a cue point is found
trace(eventObject.info.name);

} 
```

# c# - 如何在 DetailView 中获取字段值

> ID：13180088
> 
> 赞同：0
> 
> 时间：2012-11-01T15:15:47.850
> 
> 标签：c#, asp.net

我正在尝试访问详细视图中的字段并将其显示在标签中。请注意，我已将该字段转换为模板日期字段。我在输出标签中没有得到任何东西。我在这里做错了什么？谢谢

```
if (this.DetailsView1.DefaultMode == DetailsViewMode.Edit) 
        { 

            { 
                TextBox dv = this.DetailsView1.FindControl("ID") as TextBox; 
                // dv.Text = "RCA Assigned"; 
                Session["MySessionVar"] = dv; 
                OutputLabel.Text = (string)Session["MySessionVar"]; 
            } 
        } 

        else 
        { 
            TextBox dv = this.DetailsView1.FindControl("ID") as TextBox; 
            OutputLabel.Text = (string)Session["MySessionVar"]; 
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:19:02.780

这里有几个问题：

您将整个 TextBox (dv) 存储在 Session 中。然后，您尝试将其转换为字符串。

相反，您应该这样做：

```
Session["MySessionVar"] = dv.Text; 
```

这意味着一个字符串从一开始就存储在 Session 中（装箱为一个对象，因此当你再次取出它时需要转换回字符串）。但是，您为什么要使用 Session 呢？如果您只是希望 TextBox 的内容出现在 OutputLabel 中，那么这应该可以解决问题：

```
TextBox dv = this.DetailsView1.FindControl("ID") as TextBox;     
OutputLabel.Text = dv.Text; 
```

但是标签的内容只会在网页每次由 Web 服务器提供服务时才会被填充。如果您希望标签的内容在编辑 TextBox 的内容时动态更改，则需要查看某种 JavaScript 客户端解决方案。

这真的取决于你想在这里实现什么。您能否在问题中提供更多背景细节？

# c# - 如何判断 RetrieveVirtualItem 何时在 VirtuaListView 上完成？

> ID：13180090
> 
> 赞同：0
> 
> 时间：2012-11-01T15:15:49.770
> 
> 标签：c#, winforms, listview

好的，所以我需要找出 RetrieveVirtualItem 事件何时完成调用 ListView 上的所有项目。我尝试这样做的原因是，当用户向 ListView 添加新项目时，它需要刷新列表，然后选择项目。

使用普通的 WinForms，我实现这一点没有问题。但是，对于虚拟列表，我无法确定 RetrieveVirtualItem 何时完成。如果我需要推出我自己的 ListView 没关系，我只需要一些指导。

**编辑 1**

当用户单击列表视图中的项目时，它将将该项目设置为选中，您可以在代码中执行相同的操作。

```
item.Selected = true; 
```

这会触发 SelectedIndexChanged 事件。在那种情况下，我从所述项目加载内容。如果我处于虚拟模式并且我对项目进行更新。我不能将项目设置为 .Selected = true 直到列表完成更新然后抛出所述事件。

**编辑 2**

我想我正在尝试保留我在此控件中拥有的功能，而不是重组它的整个工作方式。功能是，当用户向列表中添加新项目时，它会将项目添加到列表顶部，将其设置为选中，然后允许用户在右侧输入信息。而不是使用对话框。

**编辑 3**

只是为了让我的问题更清楚。在引发 RetrieveVirtualItem 事件之前将项目设置为 .Selected 不会在刷新后保持项目处于选中状态。

# hibernate - 测试中的持久性 xml

> ID：13180104
> 
> 赞同：-1
> 
> 时间：2012-11-01T15:16:20.153
> 
> 标签：hibernate, spring-mvc, jpa-2.0

在我的春季 JPa 应用程序中..

我最近遇到了一个问题，我必须在持久性 xml 中添加以下内容以使我的测试能够工作：

```
<class>com....</class>
<class>com....</class> 
```

我发现奇怪的是，如果我在主要资源中放置一个基本的持久性 xml，它工作得很好。我的测试会选择它。

但它拒绝从我的测试资源中获取最基本的持久性 xml。

任何人都可以解释为什么会这样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:17:56.230

你的测试资源文件夹在你的类路径中吗？

# html - 背景固定和溢出-y：滚动

> ID：13180105
> 
> 赞同：1
> 
> 时间：2012-11-01T15:16:20.353
> 
> 标签：html, css, background, screen-resolution

我在我的网站上有一张图片作为背景，我将它设置为固定并溢出-y 滚动（这样图片应该保持“静态”而不是滚动。问题是它有一定的高度！一切都适用于一些显示/分辨率，但不适用于其他人！

作为临时修复，我将背景设置为 repeat-y 固定中心顶部，但重复时看起来很难看......有没有办法为所有分辨率固定背景（所以如果在更高分辨率下没有空格）？

在此先感谢，这是更好地理解我在说什么的链接:)

```
carminella DOT it/beta/chi-siamo/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:18:59.610

您可以使用全页背景 jQuery 脚本（例如 Backstretch）来实现此目的：

[http://srobbin.com/jquery-plugins/backstretch/](http://srobbin.com/jquery-plugins/backstretch/)

或者你可以通过 CSS3 来实现：

[http://blog.teamtreehouse.com/quick-tip-full-page-background-images-in-css](http://blog.teamtreehouse.com/quick-tip-full-page-background-images-in-css)

希望有帮助！

谢谢！

# php - 无法在嵌套的 foreach 循环中多次循环遍历 mysql 结果

> ID：13180108
> 
> 赞同：0
> 
> 时间：2012-11-01T15:16:27.973
> 
> 标签：php, mysql

我发现我不能多次循环遍历一组 mysql 结果。这是我不知道的正常现象吗？

我有 2 个嵌套的 foreach 循环，如下所示：

```
foreach ($items as $item) {
    echo $item." ---------------<br>";
    // loop through set of results
    foreach ($mysqlresults as $result) {
        // loop through result
        echo $result." ^^^^^^^^^^<br>";
        while ($row = mysql_fetch_array($result, MYSQL_NUM)) {
            print_r($row);
            echo "<br>";
        }
    }
} 
```

输出：

```
item 1 ---------------
ResourceID#1 ^^^^^^^
row 1 data
row 2 data
row 3 data
row 4 data
ResourceID#2 ^^^^^^^
row 1 data
row 2 data
row 3 data
row 4 data
ResourceID#3 ^^^^^^^
row 1 data
row 2 data
row 3 data
row 4 data
item 2 ---------------
item 3 ---------------
item 4 ---------------
item 5 --------------- 
```

有充分的理由为什么它不能重新循环结果还是我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:21:30.403

您不能因为`mysql_fetch_array`在结果中移动光标。您可以使用`mysql_data_seek($result, 0)`倒带。

# android - 带有自定义适配器的 android listview 冻结活动

> ID：13180111
> 
> 赞同：2
> 
> 时间：2012-11-01T15:16:36.403
> 
> 标签：android, android-listview, android-edittext, custom-adapter

我想做一些类似于 EditContact 活动的事情（使用简单的添加按钮添加各种号码以联系）。

我的第一种方法是创建我动态添加到活动布局的自定义布局（[动态添加组件的活动冻结](https://stackoverflow.com/questions/13108943/activity-with-dynamicly-added-components-freezes)）用户 Budius 提到使用带有自定义适配器的列表视图来实现解决方案。所以我尝试了它，但行为就像我的第一次尝试一样结束。

添加 3-4 个条目后，活动将冻结。（在 Galaxy s3 和模拟器上）

也许你有一个想法？

日志猫：

```
11-01 15:42:33.214: D/dalvikvm(712): GC_CONCURRENT freed 148K, 3% free 8283K/8519K, paused 74ms+102ms, total 242ms
11-01 15:42:33.733: I/Choreographer(712): Skipped 93 frames!  The application may be doing too much work on its main thread.
11-01 15:42:42.293: I/Choreographer(712): Skipped 49 frames!  The application may be doing too much work on its main thread.
11-01 15:42:44.946: D/dalvikvm(712): GC_CONCURRENT freed 72K, 2% free 8672K/8839K, paused 16ms+36ms, total 224ms
11-01 15:42:45.593: I/Choreographer(712): Skipped 66 frames!  The application may be doing too much work on its main thread.
11-01 15:42:48.913: I/Choreographer(712): Skipped 35 frames!  The application may be doing too much work on its main thread.
11-01 15:42:49.093: I/Choreographer(712): Skipped 42 frames!  The application may be doing too much work on its main thread.
11-01 15:42:55.083: I/Choreographer(712): Skipped 125 frames!  The application may be doing too much work on its main thread.
11-01 15:42:55.343: I/Choreographer(712): Skipped 68 frames!  The application may be doing too much work on its main thread.
11-01 15:42:55.653: I/Choreographer(712): Skipped 40 frames!  The application may be doing too much work on its main thread.
11-01 15:43:02.553: D/dalvikvm(712): GC_CONCURRENT freed 318K, 5% free 8821K/9223K, paused 16ms+68ms, total 231ms
11-01 15:43:02.863: D/dalvikvm(712): GC_FOR_ALLOC freed 418K, 7% free 8800K/9415K, paused 73ms, total 76ms
11-01 15:43:02.883: I/Choreographer(712): Skipped 224 frames!  The application may be doing too much work on its main thread.
11-01 15:43:03.013: D/dalvikvm(712): GC_CONCURRENT freed 397K, 7% free 8804K/9415K, paused 74ms+6ms, total 113ms
11-01 15:43:03.013: D/dalvikvm(712): WAIT_FOR_CONCURRENT_GC blocked 33ms
11-01 15:43:03.063: D/dalvikvm(712): GC_FOR_ALLOC freed 386K, 7% free 8802K/9415K, paused 41ms, total 41ms
11-01 15:43:03.183: D/dalvikvm(712): GC_CONCURRENT freed 388K, 7% free 8806K/9415K, paused 75ms+7ms, total 119ms
11-01 15:43:03.183: D/dalvikvm(712): WAIT_FOR_CONCURRENT_GC blocked 35ms
11-01 15:43:03.243: D/dalvikvm(712): GC_FOR_ALLOC freed 378K, 7% free 8803K/9415K, paused 51ms, total 51ms
11-01 15:43:03.433: I/Choreographer(712): Skipped 142 frames!  The application may be doing too much work on its main thread.
comment:..... adding the 4\. row to custom adapter and listview ..... 
11-01 15:36:31.662: I/Choreographer(712): Skipped 36 frames!  The application may be doing too much work on its main thread.
11-01 15:36:32.542: D/dalvikvm(712): GC_CONCURRENT freed 415K, 23% free 9057K/11719K, paused 18ms+15ms, total 139ms
11-01 15:36:32.554: D/dalvikvm(712): WAIT_FOR_CONCURRENT_GC blocked 123ms
11-01 15:36:32.613: D/dalvikvm(712): GC_FOR_ALLOC freed 492K, 23% free 9046K/11719K, paused 56ms, total 56ms
11-01 15:36:32.753: D/dalvikvm(712): GC_CONCURRENT freed 449K, 23% free 9078K/11719K, paused 76ms+7ms, total 134ms
11-01 15:36:32.753: D/dalvikvm(712): WAIT_FOR_CONCURRENT_GC blocked 48ms
11-01 15:36:32.813: D/dalvikvm(712): GC_FOR_ALLOC freed 514K, 23% free 9046K/11719K, paused 54ms, total 54ms
11-01 15:36:32.943: D/dalvikvm(712): GC_CONCURRENT freed 451K, 23% free 9078K/11719K, paused 76ms+8ms, total 128ms
11-01 15:36:32.943: D/dalvikvm(712): WAIT_FOR_CONCURRENT_GC blocked 44ms
11-01 15:36:33.013: D/dalvikvm(712): GC_FOR_ALLOC freed 516K, 23% free 9046K/11719K, paused 53ms, total 53ms
11-01 15:36:33.143: D/dalvikvm(712): GC_CONCURRENT freed 453K, 23% free 9078K/11719K, paused 75ms+9ms, total 127ms
11-01 15:36:33.143: D/dalvikvm(712): WAIT_FOR_CONCURRENT_GC blocked 41ms
11-01 15:36:33.193: D/dalvikvm(712): GC_FOR_ALLOC freed 518K, 23% free 9046K/11719K, paused 50ms, total 50ms
11-01 15:36:33.333: D/dalvikvm(712): GC_CONCURRENT freed 454K, 23% free 9078K/11719K, paused 75ms+8ms, total 137ms
11-01 15:36:33.333: D/dalvikvm(712): WAIT_FOR_CONCURRENT_GC blocked 59ms
11-01 15:36:33.393: D/dalvikvm(712): GC_FOR_ALLOC freed 520K, 23% free 9046K/11719K, paused 56ms, total 56ms
11-01 15:36:33.533: D/dalvikvm(712): GC_CONCURRENT freed 456K, 23% free 9079K/11719K, paused 75ms+8ms, total 129ms
11-01 15:36:33.533: D/dalvikvm(712): WAIT_FOR_CONCURRENT_GC blocked 52ms
comment:..... many of this .....
11-01 15:40:05.064: D/dalvikvm(712): GC_FOR_ALLOC freed 451K, 23% free 9135K/11719K, paused 97ms, total 97ms
11-01 15:40:05.204: D/dalvikvm(712): GC_CONCURRENT freed 451K, 23% free 9135K/11719K, paused 76ms+6ms, total 136ms
11-01 15:40:05.204: D/dalvikvm(712): WAIT_FOR_CONCURRENT_GC blocked 47ms
11-01 15:40:05.293: D/dalvikvm(712): GC_FOR_ALLOC freed 451K, 23% free 9135K/11719K, paused 66ms, total 66ms
11-01 15:40:05.443: D/dalvikvm(712): GC_CONCURRENT freed 451K, 23% free 9135K/11719K, paused 76ms+6ms, total 148ms
11-01 15:40:05.443: D/dalvikvm(712): WAIT_FOR_CONCURRENT_GC blocked 67ms
11-01 15:40:05.513: D/dalvikvm(712): GC_FOR_ALLOC freed 451K, 23% free 9135K/11719K, paused 59ms, total 59ms
11-01 15:40:05.643: D/dalvikvm(712): GC_CONCURRENT freed 451K, 23% free 9135K/11719K, paused 76ms+7ms, total 127ms
11-01 15:40:05.643: D/dalvikvm(712): WAIT_FOR_CONCURRENT_GC blocked 41ms
11-01 15:40:05.703: D/dalvikvm(712): GC_FOR_ALLOC freed 451K, 23% free 9135K/11719K, paused 56ms, total 56ms
11-01 15:40:05.833: D/dalvikvm(712): GC_CONCURRENT freed 451K, 23% free 9135K/11719K, paused 75ms+7ms, total 127ms
11-01 15:40:05.833: D/dalvikvm(712): WAIT_FOR_CONCURRENT_GC blocked 42ms
11-01 15:40:05.913: D/dalvikvm(712): GC_FOR_ALLOC freed 451K, 23% free 9135K/11719K, paused 63ms, total 63ms
11-01 15:40:06.114: D/dalvikvm(712): GC_CONCURRENT freed 451K, 23% free 9135K/11719K, paused 76ms+39ms, total 196ms
11-01 15:40:06.114: D/dalvikvm(712): WAIT_FOR_CONCURRENT_GC blocked 118ms
11-01 15:40:06.963: E/Trace(734): error opening trace file: No such file or directory (2)
11-01 15:40:07.953: D/gralloc_goldfish(734): Emulator without GPU emulation detected. 
```

这是我的活动：

```
package com.float.rezepte;

import java.io.File;
import java.util.ArrayList;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.ProgressDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.view.ViewTreeObserver;
import android.view.ViewTreeObserver.OnGlobalLayoutListener;
import android.widget.ArrayAdapter;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.RatingBar;
import android.widget.TextView;
import android.widget.Toast;

import com.actionbarsherlock.app.SherlockActivity;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuItem;
import com.float.utilities.ImageProcessing;
import com.float.utilities.Utilities;

public class AddRecipeActivity extends SherlockActivity {

private EditText editTextName;
private EditText editTextDescription;
private EditText editTextDuration;
private EditText editTextPortions;
private EditText editTextPortionsUnit;
private RatingBar ratingBarDifficutly;
private ImageView imageViewPicture;
private static final int SELECT_PICTURE = 1;
private static final int TAKE_PICTURE = 2;
public boolean deletePicture = false;
private String selectedImagePath;
private byte[] recipePicture = null;
private Recipe recipe;
private ProgressDialog dialog;
private IngredientAdapter ingredientAdapter;
private ImageButton imageButtonAddIngredient;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_add_recipe);
    ConnectView();
    ArrayList<Ingredient> values;

    if (savedInstanceState != null)
    {
        recipe = savedInstanceState.getParcelable("recipe");
        editTextName.setText(recipe.getName());
        editTextDescription.setText(recipe.getDescription());
        editTextDuration.setText(String.valueOf(recipe.getDuration()));
        editTextPortions.setText(String.valueOf(recipe.getPortions()));
        editTextPortionsUnit.setText(recipe.getPortionsUnit());
        ratingBarDifficutly.setRating(recipe.getDifficulty());
        values = (ArrayList<Ingredient>) recipe.getIngredientList();
    }else{
        recipe = new Recipe();
        values = new ArrayList<Ingredient>();
    }

    ingredientAdapter = new IngredientAdapter(this, values); 
    final ListView listViewIngredients = (ListView) findViewById(R.id.listViewIngredients);
    listViewIngredients.setAdapter(ingredientAdapter);

    imageButtonAddIngredient.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {
            ingredientAdapter.addItem(new Ingredient());
            ingredientAdapter.notifyDataSetChanged();
            Utilities.setListViewHeightBasedOnChildren(listViewIngredients);
        }
    });

    final ViewTreeObserver observer = imageViewPicture.getViewTreeObserver();
       observer.addOnGlobalLayoutListener (new OnGlobalLayoutListener () {
            @Override
            public void onGlobalLayout() {          
                imageViewPicture.getViewTreeObserver().addOnGlobalLayoutListener(this);
                if(recipe.getPicture() != null){
                    imageViewPicture.setImageBitmap(ImageProcessing.scaleImage(recipe.getPicture(), imageViewPicture.getWidth(), imageViewPicture.getHeight()));
                }
            }
        });
}

private void ConnectView(){
    editTextName = (EditText) findViewById(R.id.editTextName);
    editTextDescription = (EditText) findViewById(R.id.editTextDescription);
    editTextDuration = (EditText) findViewById(R.id.editTextDuration);
    editTextPortions = (EditText) findViewById(R.id.editTextPortions);
    editTextPortionsUnit = (EditText) findViewById(R.id.editTextPortionsUnit);
    ratingBarDifficutly = (RatingBar) findViewById(R.id.ratingBarDifficulty);
    imageViewPicture = (ImageView) findViewById(R.id.imageViewPicture);
    imageButtonAddIngredient = (ImageButton) findViewById(R.id.imageButtonAddIngredient);
}

@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
  super.onSaveInstanceState(savedInstanceState);
  savedInstanceState.putParcelable("recipe", copyUserInputToRecipe());
}

private Recipe copyUserInputToRecipe(){
    recipe.setName(editTextName.getText().toString());
    recipe.setDescription(editTextDescription.getText().toString());
    recipe.setDifficulty(ratingBarDifficutly.getRating());
    if(!editTextDuration.getText().toString().equals("")){
        recipe.setDuration(Integer.parseInt(editTextDuration.getText().toString()));
    }
    if(!editTextPortions.getText().toString().equals("")){
        recipe.setPortions(Integer.parseInt(editTextPortions.getText().toString()));
    }
    recipe.setPortionsUnit(editTextPortionsUnit.getText().toString());
    if(recipePicture != null){
        recipe.setPicture(recipePicture);
    }
    return recipe;
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.activity_add_recipe, menu);
    return true;
}

@Override
public void onBackPressed() {
    super.onBackPressed();
    overridePendingTransition(android.R.anim.fade_in,
            android.R.anim.fade_out);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.menu_cancel_recipe:
        finish();
        break;
    case R.id.menu_save_recipe:
            Intent returnIntent = new Intent();
            returnIntent.putExtra("recipe", recipe);
            setResult(RESULT_OK, returnIntent);
            finish();

        break;
    }
    return super.onOptionsItemSelected(item);
}
} 
```

编辑： ViewTreeObserver 是问题所在。删除它后，没有冻结出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:25:12.570

两件事情：

1.  您在适配器中的 addItem 方法的实现不是线程保存。使其同步。您的 getView 方法中还有一个 data.remove(...) 调用 - 再次以线程不安全的方式完成。

2.  当相应的文本更改时，您会修改您的成分对象。在您的成分类的实现中，您是否还更改了关联的 EditText 组件的内容？如果是这样，您将进入一个无限循环，每次调用 editText.setText(...) 时都会调用 TextWatcher。SGS 3 是一个四核 CPU 设备，因此它可以实时处理多达 4 个线程（一个是永久用于 UI，所以留下另外 3 个）。

解决这些问题，看看你是否能抓住局势的尾巴。对于 SGS 3 来说，操作的重量应该不是什么大问题——它有足够的能量来应对。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T22:39:49.313

如果我不得不猜测，似乎您的适配器方法中有文本观察器类，更重要的是`getView()`. 所以，我假设它正在为每一行制作课程，并一直在同时聆听**每一行。**根据您拥有的行数，如果文本观察者天生就可能会占用大量资源。你应该找到一种不同的方法来实现它。也许在您的适配器之外进行设置（为了安全起见），或者一些构造函数工作，或者让适配器以某种方式实现它。或者我会做什么 - 只听所选行中的视图。并在未选中时关闭。值得一试。

**编辑：**有很多方法。但我认为最简单的方法`BaseAdapter`是在您想要收听的每件事上设置一个标签， `position`然后`onFocusChanged`我想（如果`OnClick`给出问题），如果标签与位置匹配，则执行您的操作。但是，如果没有这个，如果它表现良好，那么所有这些可能都是不必要的。据我们所知，监听器方法已经被很好地优化了。只是当时想不出别的解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T02:34:23.533

因此，您存储图像字节以在设备方向更改时重用...

您可以通过覆盖来检测设备方向的变化

```
 onConfigurationChanged(Configuration newConfig) 
```

活动中的方法。阅读 [http://developer.android.com/reference/android/app/Activity.html#onConfigurationChanged(android.content.res.Configuration](http://developer.android.com/reference/android/app/Activity.html#onConfigurationChanged(android.content.res.Configuration) )

和

[http://developer.android.com/reference/android/content/res/Configuration.html](http://developer.android.com/reference/android/content/res/Configuration.html)

确保指定

```
 android:configChanges="orientation" 
```

在该活动的清单条目中。有了这个，您可以检测设备是纵向还是横向。最重要的是，这只会在设备方向改变时触发（不像全局布局监听器，它会随着屏幕上的每一个细微变化而触发）。

希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-16T07:39:21.440

如果您在主 ui 中进行更新，或者通过线程进行更新，或者在主 ui 线程上授予网络策略权限，这些事情就会发生。

唯一的方法是使用 AsyncTask。通过这个和在 asynctask 设置适配器视图等结束时获取您的数据。

# ruby-on-rails - FactoryGirl 定义 - 未定义的关联方法

> ID：13180112
> 
> 赞同：6
> 
> 时间：2012-11-01T15:16:37.303
> 
> 标签：ruby-on-rails, factory-bot

我有以下

在 /app/models 中：

```
class Area < ActiveRecord::Base
   has_many :locations
end
class Location < ActiveRecord::Base
   belongs_to :area
end 
```

在 /app/test/factories/areas.rb

```
FactoryGirl.define do
  factory :area do
    name 'Greater Chicago Area'
    short_name 'Chicago'
    latitude 42
    longitude -88
  end
  factory :losangeles, class: Area do
     name 'Los_Angeles Area'
     short_name 'Los Angeles'
     latitude 50
     longitude 90
  end
end 
```

在 /app/test/factories/locations.rb

```
FactoryGirl.define do
  factory :location do
    name "Oak Lawn"
    latitude 34
    longitude 35
    association :area
  end
  factory :malibu, class: Location do
    name "Malibu"
    latitude 60
    longitude -40
    association :losangeles
  end
end 
```

当我尝试运行它时，我得到：

```
NoMethodError: undefined method `losangeles=' for #<Location:0x00000102de1478>
test/unit/venue_test.rb:10:in `block in <class:VenueTest>' 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T15:47:18.383

您收到此错误是因为您试图告诉您的`malibu`工厂设置一个名为 的关联`losangeles`，该关联不存在。存在的是`losangeles`创建`Area`. 你想要的是：

```
FactoryGirl.define do
  factory :location do
    name "Oak Lawn"
    latitude 34
    longitude 35
    association :area
  end
  factory :malibu, class: Location do
    name "Malibu"
    latitude 60
    longitude -40
    association :area, factory: :losangeles
  end
end 
```

[在此处](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#associations)查看文档

请注意，您还可以使用嵌套来定义第二个工厂：

```
FactoryGirl.define do
  factory :location do
    name "Oak Lawn"
    latitude 34
    longitude 35
    association :area

    factory :malibu do
      name "Malibu"
      latitude 60
      longitude -40
      association :area, factory: :losangeles
    end

  end
end 
```

# python - 从 Fabric 中的用户那里获取密码，而不是回显该值

> ID：13180114
> 
> 赞同：6
> 
> 时间：2012-11-01T15:16:50.137
> 
> 标签：python, passwords, hide, user-input, fabric

我正在使用[Fabric](http://docs.fabfile.org)来自动化部署。在这个过程中，我使用[提示](http://docs.fabfile.org/en/1.4.3/api/core/operations.html#fabric.operations.prompt)功能来询问用户一些输入。特别是我需要询问密码，并且我想隐藏用户输入的值，例如使用 Python [getpass](http://docs.python.org/2/library/getpass.html)。`prompt`由于`key`和`validate`args的处理，我想使用它。

是否有 Fabric 内置方法可以这样做，或者我是否需要更改[提示源](https://github.com/fabric/fabric/blob/master/fabric/operations.py#L213)（最终发送拉取请求）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T15:23:55.690

您也许可以[`prompt_for_password`](https://github.com/fabric/fabric/blob/master/fabric/network.py#L426)在`fabric.network`

```
def prompt_for_password(prompt=None, no_colon=False, stream=None):
    """
    Prompts for and returns a new password if required; otherwise, returns
    None.

    A trailing colon is appended unless ``no_colon`` is True.

    If the user supplies an empty password, the user will be re-prompted until
    they enter a non-empty password.

    ``prompt_for_password`` autogenerates the user prompt based on the current
    host being connected to. To override this, specify a string value for
    ``prompt``.

    ``stream`` is the stream the prompt will be printed to; if not given,
    defaults to ``sys.stderr``.
    """
    from fabric.state import env
    handle_prompt_abort("a connection or sudo password")
    stream = stream or sys.stderr
    # Construct prompt
    default = "[%s] Login password for '%s'" % (env.host_string, env.user)
    password_prompt = prompt if (prompt is not None) else default
    if not no_colon:
        password_prompt += ": "
    # Get new password value
    new_password = getpass.getpass(password_prompt, stream)
    # Otherwise, loop until user gives us a non-empty password (to prevent
    # returning the empty string, and to avoid unnecessary network overhead.)
    while not new_password:
        print("Sorry, you can't enter an empty password. Please try again.")
        new_password = getpass.getpass(password_prompt, stream)
    return new_password 
```

看起来这是fabric检索ssh密码的方式，然后他们将其设置为`env`使用：

```
def set_password(password):
    from fabric.state import env
    env.password = env.passwords[env.host_string] = password 
```

Key 可以通过设置轻松替换`env`，但看起来您可能需要验证自己...

# php - 多个 mod_rewrite 规则

> ID：13180115
> 
> 赞同：2
> 
> 时间：2012-11-01T15:16:59.107
> 
> 标签：php, apache, .htaccess, mod-rewrite

我已经成功创建了我的 mod_rewrite 规则来更改站点顶层的所有动态 URL，但是现在我需要为第二级创建一个规则，我认为稍后我可能需要第二级重写.

目前我有这个

```
 RewriteEngine on 
    RewriteCond %{SCRIPT_FILENAME} !-d
    RewriteCond %{SCRIPT_FILENAME} !-f
    RewriteRule ^(.+)$ index.php?subj=$1 
```

这有助于将 /index.php?subj=home 更改为 /home，就像 iut 对所有其他页面（例如 /contact /about /events 等）所做的那样。

但是现在我在事件下创建了子页面，因此需要将/events.php?event=event-name 更改为/event-name。但是当我添加另一个规则时，它会搞乱整个网站。我试图做的是这个

```
 RewriteEngine on 
    RewriteCond %{SCRIPT_FILENAME} !-d
    RewriteCond %{SCRIPT_FILENAME} !-f
    RewriteRule ^(.+)$ index.php?subj=$1
    RewriteRule ^(.+)$ event.php?event=$1 
```

但这没有用。

但最重要的是，我想将 index.php 和 / （根）重定向到 /home

任何人都可以向我展示我搜索过的正确规则，但我似乎无法正确理解。

提前谢谢了 ：）

干杯

更新：感谢您迄今为止的所有帮助，我尝试了所有方法，但似乎无法做到正确。正如 Ben 所建议的，我将提供有关 URL 的更多信息。现在整个站点都位于一个子目录中，因为它目前仍在开发中，所以现在它位于 mydomain.com/newwebsite/event.phpevent=2 但 .htaccess 文件当前位于开发的根文件夹中网站所以它在 /newwebsite 目录中。所以我要写的 URL 是 mydomain.com/newwebsite/event/2

您注意到它说“2”，这只是页面/事件 ID。再往下，它将不是 id，而是它的标题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:31:26.460

您正在测试相同的条件两次，您需要区分正则表达式以测试独特的功能。

我会重写类似这样的文件：

```
# Turn on the rewrite engine
RewriteEngine On

# Ignore existing files and directories
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f

# Set the general first level rewrites
RewriteRule ^home/?$ index.php?subj=home [NC]
RewriteRule ^event/(.+)$ event.php?event=$1 [NC] 
```

或者，您也可以像下面这样分层地工作。这将使用第一个匹配：

```
# Turn on the rewrite engine
RewriteEngine On

# Ignore existing files and directories
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f

# Set all the rewrites
RewriteRule ^event/(.+)$ event.php?event=$1 [L]
RewriteRule ^(.+)$ index.php?subj=$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:27:04.077

执行此操作的简单方法是链接到 /event/eventName 而不仅仅是 /eventName。这样您就可以将逻辑放在 .htaccess 中：

```
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^/event/(.+)$ event.php?event=$1 [L]
RewriteRule ^(.+)$ index.php?subj=$1 [L] 
```

此处的 [L] 表示处理应在达到匹配后停止。

另一种方法是将所有请求发送到 index.php?subj= 并且在 index.php 中具有决定是否需要将其作为事件处理的逻辑（即是否存在具有这样名称的事件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T15:27:39.490

在我看来，您的第二个示例有两个重写规则试图捕获相同的东西 (^(.+)$) 并将请求发送到两个不同的地方：

```
 RewriteRule **^(.+)$** index.php?subj=$1
    RewriteRule **^(.+)$** event.php?event=$1 
```

您需要一些东西来区分它们以便触发任何规则：

```
 RewriteRule **^home/(.+)$** index.php?subj=$1
    RewriteRule **^events/(.+)$** event.php?event=$1 
```

或者您需要将请求发送到单个文件/页面/处理程序 - 一个可以为您处理逻辑并呈现正确内容的[前端控制器。](http://en.wikipedia.org/wiki/Front_Controller_pattern)

# django - 如何使用请求数据在基于 Django 类的通用 createview 上设置初始数据

> ID：13180116
> 
> 赞同：9
> 
> 时间：2012-11-01T15:17:00.777
> 
> 标签：django, django-forms, django-generic-views, django-class-based-views

我为我的模型使用了 Django 的通用 createview

```
from myproject.app.forms import PersonForm
class PersonMixin(object):
    model = Person
    form_class = PersontForm

class PersonCreateView(PersonMixin, CreateView):
    pass 
```

这非常适合使用我的自定义表单显示 Person 的创建视图。但是，我在表单中有一个字段，我想用一个值预先填充。我找到了这个答案：[Set initial value to modelform in class based generic views](https://stackoverflow.com/questions/11096617/set-initial-value-to-modelform-in-class-based-generic-views)

但是，我的预填充值来自 request.user 的配置文件。如何访问 PersonCreateView 中的请求并将其传递给表单？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-01T15:22:43.073

在任何类方法中，您都可以使用 self.request 访问请求。因此，您的用户配置文件将可以通过 self.request.user 访问。

基于您提供的链接，您将能够在 get_initial 方法中使用 self.request.user 来设置值。

IE。

```
def get_initial(self):
    return { 'value1': self.request.user } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T15:28:26.560

首先，你不需要在那里使用 mixin。只需指定`form_class`in `PersonCreateView`; model 也不需要，因为您已经在`form_class`（假设是 的子类`ModelForm`）中指定了它。

关于从哪里获取请求，基于类的视图将其保存在对象中，因此您可以在内部执行 self.request.user`get_initial`或`get_form_kwargs`.

# c#-4.0 - RadGrid CommandItemTemplate：访问 ItemCommand 事件中的控件

> ID：13180120
> 
> 赞同：1
> 
> 时间：2012-11-01T15:17:15.197
> 
> 标签：c#-4.0, radgrid

这是我的场景。我有一个只有 1 个可编辑字段的 radgrid（其余字段设置为只读），因此当它处于编辑模式时，会显示一个允许的编辑。但是当我尝试完成插入（添加）时，它只显示插入的一个字段，但我也需要所有其他字段。

如何在 ItemCommand 事件期间以编程方式切换只读属性而不导致重新绑定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:02:39.213

对于任何感兴趣的人，这是解决方案（无需使用自定义模板）。这会将列的原始状态从只读更改为可编辑状态。

```
protected void rgvDepts_ItemCommand(object source, GridCommandEventArgs e)
    {
        if (e.CommandName.Equals(RadGrid.InitInsertCommandName))
        {
            GridCommandItem item = e.Item as GridCommandItem;
            GridTableView masterTable = item.OwnerTableView;
            GridBoundColumn gbc = null;
            if (item != null && masterTable != null)
            {                    
                gbc = (GridBoundColumn)masterTable.GetColumn("LIFNR");
                if (gbc != null)
                {
                    gbc.ReadOnly = false;
                    gbc.Visible = true;                       
                }
            }
        }
    } 
```

# windows - 为 Windows 提供可用性

> ID：13180123
> 
> 赞同：3
> 
> 时间：2012-11-01T15:17:30.103
> 
> 标签：windows, makefile

我在此[链接](http://mrbook.org/tutorials/make/)中看到我可以创建一个 Makefile，以便可以使用 command 方便地运行它`make`。这种 Makefile 是否也可以在 Windows 中执行，如果没有，如何变成可以在 Windows 上执行的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:19:42.997

你应该看看**[CMake](http://www.cmake.org/)**。它是一个**跨平台**、开源的构建系统。对于 Windows 特定的解决方案，还有**[NMake](http://msdn.microsoft.com/en-us/library/ms930369.aspx)**。

# bash - 可以使用两个 OR'd -name 值运行 find 命令吗？

> ID：13180125
> 
> 赞同：0
> 
> 时间：2012-11-01T15:17:33.293
> 
> 标签：bash

我需要使用 Linux`find`命令来搜索一个名称或另一个名称。

我需要一种方法来查找从 MS Windows 应用程序传输的两个文件。一个带有 .csv 扩展名，另一个带有 .CSV 扩展名。它们的文件名中也有空格，我知道如何处理。

但是，但我不太确定如何将 .CSV 添加到`-name \*.csv`以下`find`命令的参数中。

可以在`-name`参数中对两个值进行或运算吗？

```
for fnam in `find . -maxdepth 1 -type f -name \*.csv -exec echo "{}" \;` 
do
.
.
. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:20:50.063

此命令应该找到这两种类型的文件。请注意括号后的转义字符和空格。

`find . \( -name "*.cvs" -o -name "*.CVS" \)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T15:23:22.650

不清楚，为什么不使用该`-iname '*-csv'`选项？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T15:21:24.710

将脚本的 find 部分更改为这个？

```
find . -maxdepth 1 -type f \( -name \*.csv -o -name \*.CSV \) -exec echo "{}" \; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T15:53:17.797

如果您只是匹配扩展名 .csv 和 .CSV，您不妨使用 globbing 而不是`find`，即

```
for fnam in *.csv *.CSV; do
    ... 
```

# asp.net - Sql Server 链接服务器问题“用户 'NT AUTHORITY\ANONYMOUS LOGON' 登录失败

> ID：13180127
> 
> 赞同：2
> 
> 时间：2012-11-01T15:17:51.010
> 
> 标签：asp.net, sql-server-2008, iis-7, linked-server

我在链接服务器和引用链接服务器的服务器上都有一个域用户。相同的域用户被添加到网络请求 (asp.net) 的池标识中。发生了什么，该应用程序正在成功访问本地数据库并且所有数据都很好。但是，当应用程序尝试访问正在调用链接服务器的存储过程时，它会显示以下错误“用户'NT AUTHORITY\ANONYMOUS LOGON 登录失败”

但更烦人的是它并不总是失败，如果有人登录到 SSMS Web 应用程序可以获取此数据，但如果他从服务器注销，一段时间后此错误开始出现。

当我们在两台服务器（链接服务器和一个使用链接服务器）和 windows 2008 上都有 sql server 2008 R2 时，它工作正常。

但是当我们有 windows 2003 server 和 sql 2005( db 使用链接) 和 windows server 2008 上的 sql server 2008 时失败

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-05T21:04:49.263

这是因为 SQL 服务器的“2-Hops”问题。我可以通过两种方式解决这个问题： 1\. 仍然使用链接服务器：在远程服务器上创建具有 SQL Server 身份验证的用户并提供所有需要的权限。然后打开链接服务器属性并将您的帐户映射到您刚刚创建的用户，如下所示： ![在此处输入图像描述](../Images/14e8afb95f7418d56bd8659d783b2d64.png)

之后，您将能够运行您的脚本

2.  使用 openrowset：

    SELECT a.* FROM OPENROWSET('SQLNCLI', 'Server=;Trusted_Connection=yes;', 'SELECT * from .dbo.') AS a;

# ios - CoreBluetooth：刷新已发现外设的本地名称

> ID：13180134
> 
> 赞同：10
> 
> 时间：2012-11-01T15:18:37.030
> 
> 标签：ios, bluetooth, core-bluetooth, cbperipheral

我成功地发现了一个 Peripheral 并检索了它的本地名称：

```
[advertisementData objectForKey:CBAdvertisementDataLocalNameKey] 
```

但是，如果外围设备停止并使用不同的本地名称重新启动广告，则客户端无法识别更改。我猜

```
- (void)peripheralDidUpdateName:(CBPeripheral *)peripheral 
```

仅当两个设备配对时才有效。有没有办法在不配对的情况下获得更新？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T05:03:24.240

苹果的错误。仍然存在于 iOS 6.1 中。以下是如何重置 CB 缓存的技巧：

1.  备份设备到 iCloud。
2.  重置网络设置。
3.  删除您的应用并通过 Xode 重新安装
4.  此时，您的外围设备将以新名称出现。
5.  手动恢复您的网络设置或从 iCloud 恢复。

对不起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-04T00:22:17.717

您可以在 name 属性上使用 KVO，即使在未连接时也可以使用，至少在 OS X 10.10 中是这种情况。我只是使用它自己调用 -peripheralDidUpdateName: 方法，并通过跟踪名称字符串来消除重复调用。

```
self.name = self.peripheral.name;
[self.peripheral addObserver:self forKeyPath:@"name" options:NSKeyValueObservingOptionNew context:NULL];

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    if([keyPath isEqualToString:@"name"]) {
        [self peripheralDidUpdateName:self.peripheral];
        return;
    }
    [super observeValueForKeyPath:keyPath ofObject:object change:change context:context];
}

- (void)peripheralDidUpdateName:(CBPeripheral *)peripheral {
    if([peripheral.name isEqualToString:self.name]) return;
    if([self.delegate respondsToSelector:@selector(peripheralDidUpdateName:)]) {
        [self.delegate peripheralDidUpdateName:self];
    }
} 
```

# ios - 无法从服务器显示 .doc

> ID：13180136
> 
> 赞同：0
> 
> 时间：2012-11-01T15:18:37.047
> 
> 标签：ios, webview, webserver, mamp, doc

我正在尝试将文档加载到我的应用程序中进行显示，如果它们存储在本地而不是从服务器存储，则此方法有效。我正在使用 MAMP 进行测试。这是我的 viewDidLoad 方法：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSURL *myUrl = [NSURL URLWithString:@"http://localhost:8888/FilesForApp/Docs/MS.doc"];
    NSURLRequest *myRequest = [NSURLRequest requestWithURL:myUrl];
    [_webView loadRequest:myRequest];
} 
```

谁能告诉我这是否缺少某些东西？

- 编辑 - 忘了添加，它不会崩溃，只是显示一个普通的白色显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:42:18.340

1.  确保您可以通过 Web 浏览器访问该文档（确保该文档存在）。
2.  尝试添加 http:// 前缀。
3.  不要忘记将 _webView 作为 subView 添加到您的视图中。
4.  不要忘记设置_webView 的框架。

# php - 使用 apc 编译 mysqlnd_qc 时出错

> ID：13180141
> 
> 赞同：1
> 
> 时间：2012-11-01T15:18:57.820
> 
> 标签：php, memcached, apc, amazon-rds, mysqlnd

运行命令`pecl install mysqlnd_qc`以`APC`启用启用安装缓存我收到以下错误：

```
configure: error: APC is onlysupported if both APC and MySQL Query Cache are compiled statically
ERROR: `/var/tmp/mysqlnd_qc/configure --enable-mysqlnd-qc-apc=yes --enable-qc-memcache=no --enable-qc-sqlite=no' failed 
```

如果没有启用 APC，它编译得很好......

PHP版本：5.3.17

在 Amazon RDS 上运行。

**静态编译 APC 和 MySQL Query Cache 是什么意思？**

它是如何完成的？

* * *

**更新1：**

由于我还没有设法用 APC 编译 mysqlnd_qc，所以我尝试用`memcached`. 这是一个有趣的问题。该`./configure`命令无法识别`pecl`为`memcache`. 我发现选项输入错误...

所以我`pecl`在询问选项时终止了安装并自己运行了以下命令：

```
sudo ./configure --enable-mysqlnd-qc-memcache --with-libmemcached-dir=/usr/
sudo make
sudo make install 
```

所以`memcached`现在可以使用它了。

如果在`Fedora`（我猜也是`RedHat`and `CentOS`）上运行，则可以使用`rpm`：

```
sudo yum install php-pecl-mysqlnd-qc 
```

* * *

**更新 2：**

我设法用 APC 编译，请参阅下面的详细答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:39:07.553

很好地找到了解决方案：

这是我所做的：

获取 php 5.3.17：

```
wget https://github.com/php/php-src/archive/PHP-5.3.17.zip
unzip PHP-5.3.17.zip 
```

获取 mysqlnd_qc：

```
wget http://pecl.php.net/get/mysqlnd_qc-1.1.1.tgz
tar -zxvf http://pecl.php.net/get/mysqlnd_qc-1.1.1.tgz
mkdir -p php-src-PHP-5.3.17/ext/mysqlnd_qc
cp -R mysqlnd_qc-1.1.1/* php-src-PHP-5.3.17/ext/mysqlnd_qc 
```

获取 APC：

```
wget http://pecl.php.net/get/APC-3.1.13.tgz
tar -xzvf APC-3.1.13.tgz
mkdir -p php-src-PHP-5.3.17/ext/apc
cp -R APC-3.1.13/* php-src-PHP-5.3.17/ext/apc/ 
```

编译：（在其他系统上可能不需要全部）

```
sudo yum install bison
sudo yum install libxml2 libxml2-devel
sudo yum install autoconf213
sudo yum install httpd-devel
sudo yum install bzip2 lbzip2 bzip2-libs bzip2-devel

export PHP_AUTOCONF=/usr/bin/autoconf-2.13

./buildconf --force
make clean && make 
```

（对我来说，链接失败，必须在链接中添加“-lpthread”）

```
make test
sudo make install 
```

我还使用了以下 2 个命令，但我不记得是什么时候以及什么时候......

```
phpize
aclocal 
```

运行与`./configure`phpinfo 中的相同并添加以下选项：

```
--with-mysql=mysqlnd --with-mysqli=mysqlnd --with-pdo-mysql=mysqlnd --enable-mysqlnd-qc --enable-mysqlnd-qc-apc --enable-mysqlnd --enable-apc --enable-static=apc 
```

*   **所有的`--with`必须更换。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:44:15.393

看起来您必须从源代码编译并提供正确的 .configure 选项。pecl install 只是给你一个.so，它是一个动态模块扩展，你可以通过 php.ini 添加

因此，如果您真的需要带有 apc 的 mysqlnd_qc（是吗？），您必须获取 php src，并使用所需的模块对其进行编译。

如果您不需要它，请在 pecl install mysqlnd_qc 询问您时说不或按回车键。

# java - SWT - PrintDialog 打印表格/表格查看器的内容

> ID：13180148
> 
> 赞同：0
> 
> 时间：2012-11-01T15:19:09.450
> 
> 标签：java, printing, swt

我有一个对话框，在对话框中有一个 tableviewer，它显示了用户操作的结果。我创建了一个具有打印按钮的方法。打印代码包括是我从示例中找到的示例代码。

```
final Text t = new Text(composite, SWT.BORDER | SWT.MULTI);
   Button localPrintersButton = new Button(composite, SWT.PUSH);
   localPrintersButton.setText("Print Results");
   localPrintersButton.addSelectionListener(new SelectionAdapter() {
       public void widgetSelected(SelectionEvent e) {
          PrintDialog printDialog = new PrintDialog(Display.getCurrent().getActiveShell(), SWT.NONE);
          printDialog.setText("Print");
          PrinterData printerData = printDialog.open( );
          if(!(printerData==null))
          {
              Printer p = new Printer(printerData);
              p.startJob("PrintJob");    
              p.startPage( );
              Rectangle trim = p.computeTrim(0, 0, 0, 0);
              Point dpi = p.getDPI( );
              int leftMargin = dpi.x + trim.x; 
              int topMargin = dpi.y / 2 + trim.y; 
              GC gc = new GC(p);
              Font font = gc.getFont( ); 
              String printText= t.getText( );
              Point extent = gc.stringExtent(printText);
              gc.drawString(printText, leftMargin, topMargin + 
                      font.getFontData( )[0].getHeight( ));
              p.endPage( );
              gc.dispose( );
              p.endJob( );
              p.dispose( );
          }
       }
   }); 
```

当我的对话框打开时，打印按钮旁边有一个文本框。我可以在文本框中输入一些内容，选择打印按钮并选择我的本地打印机，然后它会打印文本框的内容。

我想弄清楚如何打印出表格而不是文本框这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:57:44.467

我想你正在寻找

```
Control.class
public boolean print (GC gc) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:07:40.083

也许您可以[`GC`](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fgraphics%2FGC.html)从小[`Table`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Table.html)部件创建一个并用于[`GC#copyArea(Image, int, int)`](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fgraphics%2FGC.html)创建要打印的表格图像。

如果表格有滚动条并且并非所有数据都可见，您可能需要做一些额外的工作来创建多个图像并将它们拼接在一起。希望这可以帮助。

# reporting-services - SSRS 导出到 Excel - 使用不同的文件名？

> ID：13180149
> 
> 赞同：9
> 
> 时间：2012-11-01T15:19:18.443
> 
> 标签：reporting-services

不确定这是否可行，但我想以与报告文件名*不同的文件名将 SSRS 报告导出到 Excel。*

例如，报告是 MyReport.rdl。当我导出时，它将 Excel 文件输出为 MyReport.xlsx。我想为 Excel 文件使用不同的文件名。有没有允许我这样做的属性？

SSRS 2012

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:10:58.793

将 RDL 文件中的“DisplayName”属性设置为您想要的导出文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:51:45.200

将报告保存到 Excel 时，您可以提供任何您想要的名称。

请检查随附的屏幕截图。

![在此处输入图像描述](../Images/fdd522c374f8c46a1a5c2f22be664ff6.png)

![在此处输入图像描述](../Images/62f283eb5f5090533bcaf5152f3a3641.png)

# asp.net-mvc-4 - 初始视图接收数据后的MVC4返回值

> ID：13180151
> 
> 赞同：1
> 
> 时间：2012-11-01T15:19:23.480
> 
> 标签：asp.net-mvc-4

我正在用 MVC4 创建一个小应用程序，我创建了数据库，每次用户在电话中调用 url 时`myweb.com/xxxuuu`，都能够显示信息。

但是现在我想在您单击我的信息时拆分姓名和电话等信息。再次单击链接以显示我的电子邮件和 facebook 链接。

```
 public ActionResult Entry2(string id)
    {            
        DataSet1.userDataTable table = adapter.GetDatafromuserprofile(id);

        ViewBag.username = table.Rows[0]["username"].ToString();

        ViewData["userid"] = table.Rows[0]["userid"].ToString();

        ViewData["username"] = table.Rows[0]["username"].ToString();

        ViewData["userphone"] = table.Rows[0]["userphone"].ToString();

        ViewData["useremail"] = table.Rows[0]["useremail"].ToString();

        ViewData["userlink1"] = table.Rows[0]["userlink1"].ToString();

        ViewData["userlink2"] = table.Rows[0]["userlink2"].ToString();

        ViewData["usermessage"] = table.Rows[0]["usermessage"].ToString();

        return View();

        //var midata = adapter.obtenervalor(id);
    } 
```

这是我的路由器：

```
routes.MapRoute(
    name: "Profile",
    url: "{id}",
    defaults: new { controller = "Me", action = "Entry2" }
); 
```

但我找不到将 id 发送到控制器并为用户获取附加数据的方法`xxxuuu`。

我希望这很清楚，您可以给我一个解决方案。这是我的视图的初始结果，但是当我单击我的链接时，我返回一个空值。

```
ID: xxxuuu
henry@email.com
Henry 
•   Navigation
•   My Info
•   Contact Me
•   My Links
•   My Message 
```

# jquery - 在 PHP 页面中混合 CakePHP、jQuery 和 Qtip2 时，如何避免糟糕、丑陋的编码习惯？

> ID：13180152
> 
> 赞同：2
> 
> 时间：2012-11-01T15:19:23.707
> 
> 标签：jquery, cakephp-2.0, qtip2

我正在构建一个信息量很大的游戏屏幕，而且，即使只有第一段代码，在屏幕上显示了许多行星，我的代码也开始看起来有点混乱/复杂。

如果可能的话，我还想从查看“查看源代码”的用途中隐藏其中的一些内容，但这是次要问题。

基本上，下面的代码在屏幕上的不同绝对位置绘制 X 行星，并为每个行星提供鼠标悬停工具提示。

必须有一个“更好”和/或更有效的方法来做到这一点？基本上，我会很感激任何提示。

我担心的主要原因是 Qtip2 工具提示将变得更加复杂，页面中会添加各种玩家信息，以及一些聊天/新闻/信息框。我不想从意大利面条代码*开始*，当我还有主要课程要交付到页面时！

我认为我主要关心的是我将生成的大量脚本标签。以我添加到页面的每个工具提示的速率。行星图像（及其标签）的“回声”肯定是不可避免的……我真的不知道，我对此有点陌生。

```
<!-- File: /app/View/Games/main.ctp -->
<?php

    echo $this->Html->script('jquery-1.8.2.min');
    echo $this->Html->script('jquery.qtip');

    $game = $this->Session->read('Game');
?>
<?php
    foreach ($game['Planet'] as $planet) {
        echo $this->Html->image('../img/planet/' . $planet['planet_image_file'] .'.png', array('class' => 'planet_img planet_' . $planet['id'], 'id' => 'planet_' . $planet['id'], 'alt' => $planet['planet_name'], 'style' => 'position:absolute;top:' . $planet['y_position'] . 'px;left:' . $planet['x_position'] . 'px;'));
        echo '<script>$(\'.planet_' . $planet['id'] . '\').qtip({content: \'' . $planet['planet_name'] . '\'});</script>';
        echo '<label for="' . $planet['planet_name'] . $planet['id'] . '" style="position:absolute;top:' . ($planet['y_position'] - 20) . 'px;left:' . $planet['x_position'] . 'px;">' . $planet['planet_name'] . '</label>';
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:29:55.020

1.  使用样式表而不是所有那些内联样式。如果您动态添加样式，`<style>`则标题中始终可以有一个元素，您可以根据需要动态附加 css 定义。

2.  使用图像精灵来帮助优化。这更适合处理背景图像，而不是内联图像，但对于它提供的性能提升，它可能是值得的。

    您将需要使用 css 图像背景的元素，而不是内联图像，但 DOM 可以同样简单。

3.  与其调用一堆脚本来添加 qtip 东西，不如将 qtip 所需的信息作为每个元素的数据属性，并在外部 js 文件中具有一个函数，该函数循环遍历元素并基于 qtip 内容在数据属性上。

    foreach ($game['Planet'] as $planet) { echo $this->Html->image('../img/planet/' . $planet['planet_image_file'] .'.png', array('class' => 'planet_img planet_' . $planet['id'], 'id' => 'planet_' . $planet['id'], 'alt' => $planet['planet_name'], 'data-planet-name' => $planet['planet_name'])); echo '' . $planet['planet_name'] . ''; }

jQuery

```
$('.planet_img').each(function(){
  $(this).qtip({content: $(this).data('planet-name')});
}) 
```

# c - 用 gcc 编译 cuda 会导致：错误：'threadIdx' undeclared

> ID：13180154
> 
> 赞同：0
> 
> 时间：2012-11-01T15:19:33.287
> 
> 标签：c, gcc, cuda, gpgpu, nvcc

如何强制 GCC 在我的代码中使用 threadIdx 行进行编译？

我正在尝试使用 ac 包装器编译我的 cuda 应用程序。

要生成 .so 文件，我运行： nvcc -arch=sm_11 -o libtest.so --shared -Xcompiler -fPIC main.cu

然后我尝试使用以下命令编译 c 包装器：gcc -std=c99 -I/usr/local/cuda/include -o main -L。-ltest main.c

这会在我的代码中导致以下错误几层（包含到包含的文件）：错误：'threadIdx' undeclared

注意：一切都可以作为 GPU 应用程序编译和运行，无需任何 C 包装。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:13:38.307

Gcc 无法编译代码的 cuda 部分。您需要 nvcc 来编译代码。gcc遇到threadIdx时不知道该怎么办。

# reporting-services - MS Visual Basic 中带有空白或字母字符的 IIF 语句

> ID：13180155
> 
> 赞同：1
> 
> 时间：2012-11-01T15:19:37.693
> 
> 标签：reporting-services

我有一个字段 CODE_USER_2 可以等于 1.75、2、2.62、3.75、5.25、6、OT（w/2 个空格或*_* _（4 个空格）。如果是 1.75、2、2.62、3.75、5.25， 6 我希望得到相应的权重（此部分有效）。

如果该字段是**__ 或 OT**，我希望等式的结果为 0。我目前使用以下公式得到 #error。

=IIf(Fields!CODE_USER_2_IM.Value= " " OR "OT" ,0,Switch(Fields!CODE_USER_2_IM.Value=1.75,.629,Fields!CODE_USER_2_IM.Value=2,.67,Fields!CODE_USER_2_IM.Value=2.62, 1.089,Fields!CODE_USER_2_IM.Value=3.75,1.767,Fields!CODE_USER_2_IM.Value=5.25,3.224,Fields!CODE_USER_2_IM.Value=6,3.895))

如果您有想法，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T01:13:31.353

您必须在 OR 之后重复“Fields！CODE_USER_2_IM.Value =”。

或者试试这个 - 更少罗嗦但更晦涩：

=IIf( ( " |OT |" ).Contains(字段！CODE_USER_2_IM.Value + "|"

,0,Switch(Fields!CODE_USER_2_IM.Value=1.75,.629,Fields!CODE_USER_2_IM.Value=2,.67,Fields!CODE_USER_2_IM.Value=2.62,1.089,Fields!CODE_USER_2_IM.Value=3.75,1.767,Fields!CODE_USER_2_IM .Value=5.25,3.224,字段！CODE_USER_2_IM.Value=6,3.895

, 真, 0))

始终使用以下命令关闭 Switch：

, 真 , [默认值] )

还要注意，SSRS 表达式中的匹配是精确的，例如 2 个空格不 = 4 个空格。

# sql-server - SSRS 2005 数字格式 int 和 double 在一个字段中

> ID：13180160
> 
> 赞同：2
> 
> 时间：2012-11-01T15:19:45.587
> 
> 标签：sql-server, reporting-services

我正在使用`SSRS 2005`. 问题是我想用数字放置，所以如果数字是 23455，它应该显示为 23,455 我知道该怎么做我在这个字段中有两种数据类型 int 和 double。我为适应它所做的是将数字更改为字符串，但如果我将它们提取到 Excel，它们会显示绿色三角形。

为了消除 Excel 中的绿色三角形，我使用`CDEC()`了将字符串转换为数字的函数，我在数字中松散了。

我想知道是否甚至可以在具有两种不同数据类型（即 double 和 int）的字段中放置一个逗号。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T15:37:16.550

字符串不是你的朋友！不要将数字转换为字符串。

您应该设置单元格（文本框或占位符）的格式以包含逗号。右键单击文本框或占位符以获取属性对话框。使用数字窗格进行格式化。（您也可以在属性窗格中设置完全相同的设置。

使用这些将使数字在单元格中保留为数字，并将格式导出到 Excel 而不转换为字符串。

![SSRS 文本框属性对话框](../Images/78e83a2300804691345c271fd85d941e.png) ![SSRS 属性窗格](../Images/bfdbc7e702ad3a25f88547bf2f19c2e7.png)

# internet-explorer-9 - IE9 无法正确显示页脚

> ID：13180163
> 
> 赞同：1
> 
> 时间：2012-11-01T15:19:52.680
> 
> 标签：internet-explorer-9, typo3, meta-tags, doctype

我在 IE9 显示页脚时遇到问题。[http://www.advinsure.nl/](http://www.advinsure.nl/) 这是 TYPO3 cms 网站。TYPO3 的版本是 4。

在主页上它是正确的，但是如果您单击“Opdrachtgevers”，页脚就会混乱。如果我单击 IE9 中的兼容性按钮，页脚将正确显示。

**我试过的：**我添加了这个标签：（`<meta http-equiv="X-UA-Compatible" content="IE=edge" />`也试过“8”而不是“Edge”），它必须让IE9在兼容模式下工作，它没有帮助。

我也改变了 DOCTYPE （我在服务器上项目的模板文件夹中手动改变了它）从

`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">`.

到

`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">`

但是当我检查来源时，以上都不是：

`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">`

如何使页脚正确显示？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:03:06.077

如果这是一个 TYPO3 网站（就像它似乎来自标记），则文档类型由 TYPO3 设置，而不是模板。

您正在寻找的 TypoScript 设置是`config.doctype`，它的文档在这里： [http](http://typo3.org/documentation/document-library/core-documentation/doc_core_tsref/4.7.0/view/1/6/#id1556666) ://typo3.org/documentation/document-library/core-documentation/doc_core_tsref/4.7.0/view/1/6/#id1556666 （对于 TYPO3 4.7 )

寻找“doctype”设置，有一个接受值的列表。

# wcf - Silverlight 轮询双工超时

> ID：13180165
> 
> 赞同：0
> 
> 时间：2012-11-01T15:20:04.370
> 
> 标签：wcf, silverlight, service, pollingduplexhttpbinding

我目前正在开发一个实现轮询双工服务的应用程序。我遇到了客户端中止的问题，我不确定使用客户端的原因或正确的处理方式。

现在我正在让客户收到这样的问候消息

```
client = OperationContext.Current.GetCallbackChannel<IDuplexMyClient>(); 
```

然后我只是在课堂上坚持使用它并像这样使用它发送东西

```
client.MyFunction(data); 
```

发送数据之间可以有任意时间，因为它取决于用户交互。我遇到的问题是我收到以下错误。

```
The communication object, System.ServiceModel.Channels.ServiceChannel, cannot be used for communication because it has been Aborted. polling duplex 
```

这是处理客户的错误方式吗？知道为什么它会中止吗？

即使我每秒发送一次消息，它似乎也能做到这一点，无论如何，它似乎只是在一段时间后超时。

# jsp - JSP中的ContainsKey

> ID：13180169
> 
> 赞同：0
> 
> 时间：2012-11-01T15:20:30.030
> 
> 标签：jsp, map, struts2, jstl

我的jsp中有一张地图`userDetailsMap<String,List<String>>`。
并且`eligibleUser,notEligibleUser,enrolledUser`是钥匙。
我可以很容易地检查`s:iterator`标签内的钥匙。

喜欢（此代码有效）：

```
<s:iterator var="userDetailsMap" value="context.userDetails">
            <s:if test="%{#userDetailsMap.key=='eligibleUser'}">
            //some code
            </s:if>
            <s:if test="%{#userDetailsMap.key=='notEligibleUser'}">
            //some code
            </s:if>
            <s:if test="%{#userDetailsMap.key=='enrolledUser'}">
            //some code
            </s:if>
</s:iterator> 
```

但是我如何检查一个特定的键是否存在？我用过 ：

1.

```
<s:if test="%{#userDetailsMap['eligibleUser'] == null}">
//some code
</s:if> 
```

2.

```
<s:if test="%{#userDetailsMap.containsKey('eligibleUser')}">
//some code
</s:if> 
```

但他们两个都没有工作。
请给我建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:23:43.173

您的第二种方法看起来不错。但是从最上面的代码来看，我想知道你真的想要这个吗？

```
 <s:if test="%{context.userDetails.containsKey('eligibleUser')}">
//some code
</s:if> 
```

请注意，我已删除该`#`标志，因为我不确定您是否需要它作为操作中的变量。如果我错了，请纠正我。

一些参考仅供参考。

[http://commons.apache.org/ognl/language-guide.html](http://commons.apache.org/ognl/language-guide.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T10:57:44.370

编辑：根据您的迭代器有效的声明，

这是有效的（经过测试）：

```
 <s:if test="context.userDetails.containsKey('eligibleUser')">
        //some code
  </s:if> 
```

如果您的 userDetail 直接由 Action 通过 getter 公开，则使用

```
 <s:if test="userDetails.containsKey('eligibleUser')">
        //some code
  </s:if> 
```

我假设 UserDetails 是包含经过身份验证的用户的“徽章”的 bean，地图中的三个 List 是按用户角色分组的用例。

在这种情况下，要根据经过身份验证的用户的用户角色打印所有用例，甚至不知道角色的密钥，请使用：

```
 <s:iterator value="userDetailsMap">
        User Role: <s:property value="key" />
        <br/>
        <ul>
            <s:iterator value="value">
                <li>
                    Use Case: <s:property />
                </li>
            </s:iterator>               
        </ul>
    </s:iterator> 
```

# sql - 试图在没有预先定义临时表的情况下将动态 SQL 子查询结果放入 SQL-Server 2008 临时表中

> ID：13180175
> 
> 赞同：2
> 
> 时间：2012-11-01T15:20:52.633
> 
> 标签：sql, sql-server, pivot, dynamic-sql, temp-tables

我正在尝试将我的结果放入临时表中，但无法使其正常工作。

```
DECLARE @query nvarchar(max)
SET @query = N'SELECT * INTO ##TmpTbl FROM (SELECT * FROM Tbl1)'
EXEC(@query) 
```

我究竟做错了什么？

> 注意：我不能预定义临时表/表变量，因为正在运行的实际问题是一个透视问题，其结果中没有预定义的列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T15:25:13.663

您在子查询中缺少别名：

```
DECLARE @query nvarchar(max)
SET @query = N'SELECT * 
               INTO ##TmpTbl 
               FROM (SELECT * FROM Tbl1) src'  <--- you need an alias
EXEC(@query) 
```

# asp.net-mvc-3 - 为什么我的自动完成功能不工作 MVC3 Razor Engine

> ID：13180176
> 
> 赞同：1
> 
> 时间：2012-11-01T15:20:56.873
> 
> 标签：asp.net-mvc-3, jquery, autocomplete

我使用这个博客中的代码[Autocompletion Textbox in MVC Using jQuery](http://blogs.msdn.com/b/miah/archive/2008/11/13/autocompletion-textbox-in-mvc-using-jquery.aspx)

但我的 jQuery 没有触发。我怀疑它与我的选择器有关。我也在使用 MVC，但我看不出这会使 javascript 有什么不同。

代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using UserManager.Models;

namespace UserManager.Controllers
{
    public class UserManagerController : Controller
    {
        //
        // GET: /UserManager/

        public ActionResult Index()
        {
            try
            {
                var data = new UserManager.Models.UserManagerTestEntities();
                return View(data.vw_UserManager_Model_Add_Users.ToList());

            }
            catch (Exception ex)
            {
                return View(ViewBag);
            }

        }

        public ActionResult CreateUser()
        {

            var data = new UserManager.Models.UserManagerTestEntities();
            ViewBag.Message = "Create New User";
            return View();
        }

        public ActionResult LookUpGroupName(string q, int limit)
        {
            //TODO: Map list to autocomplete textbox control
            DAL d = new DAL();
            List<string> groups = d.groups();

            var GroupValue = groups
                .Where(x => x.StartsWith(q))
                .OrderBy(x => x)
                .Take(limit)
                .Select(r => new { group = r });

            // Return the result set as JSON
            return Json(GroupValue, JsonRequestBehavior.AllowGet);
        }
    }
}

@model UserManager.Models.vw_UserManager_Model_Add_Users
@{
    ViewBag.Title = "Create New User";
}
<h2>
    CreateUser</h2>
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>New User Details</legend>
        <div class="editor-label">
            @Html.LabelFor(Model => Model.salutation)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => Model.salutation)
            @Html.ValidationMessageFor(model => Model.salutation)
        </div>
        <div class="editor-label">
            @Html.LabelFor(Model => Model.firstname)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => Model.firstname)
            @Html.ValidationMessageFor(model => Model.firstname)
        </div>
        <div class="editor-label">
            @Html.LabelFor(Model => Model.lastname)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => Model.lastname)
            @Html.ValidationMessageFor(model => Model.lastname)
        </div>
        <div class="editor-label">
            @Html.LabelFor(Model => Model.password)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => Model.password)
            @Html.ValidationMessageFor(model => Model.password)
        </div>
        <div class="editor-label">
            @Html.LabelFor(Model => Model.email)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => Model.email)
            @Html.ValidationMessageFor(model => Model.email)
        </div>
        <div class="editor-label">
            @Html.LabelFor(Model => Model.isactive)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => Model.isactive)
            @Html.ValidationMessageFor(model => Model.isactive)
        </div>
        <div class="editor-label">
            @Html.Label("Group Name")
            <!-- GroupName -->
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => Model.group_name)
            @Html.ValidationMessageFor(model => Model.group_name)
        </div>
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>

    <div>
        @Html.ActionLink("Back to List", "Index")
    </div>
}
<script type="text/javascript">
    $(document).ready(function () {
        $("#group_name").autocomplete('@Url.Action("LookUpGroupName")', 
        {
        dataType: 'json',
        parse: function (data) {
            var rows = new Array();
            alert("before loop");
            for (var i = 0; i < data.length; i++) {
                rows[i] = { data: data[i], value: data[i].group, result: data[i].group }
            }
            return rows;
        },
        formatItem: function (row, i, max) {
            return row.group
        },
        width: 300,
        highlight: false,
        multiple: true,
        multipleseparator: ","
    });
});

</script> 
```

呈现给浏览器的 HTML：

```
<input name="group_name" class="text-box single-line" id="group_name" type="text" value=""/> 
```

可能是一些简单的东西，我只是看不到它。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:24:45.430

我不相信`@Html.EditorFor(model => Model.group_name)`添加和 ID 到它创建的元素，因此您的选择器将不匹配。您可以像这样添加一个 ID：

```
@Html.EditorFor(model => Model.group_name, new { ID = "group_name"}) 
```

此外，如果您不想使用 jquery 在 ID 上进行选择，最好使用 ID 选择器`#group_name`，除非您实际上有许多元素的 ID 实际上以`group_name`所有元素开头，并且您想要选择所有元素一次。

**更新**

您使用以selector[开头的属性](http://api.jquery.com/attribute-starts-with-selector/)`input[id^=group_name`，并且其中有一个错字。您缺少`]`选择器中的关闭。即便如此，如果您不打算选择多个 ID 都以 开头的元素，那么`group_name`您的标记表明您没有。那么你应该真正使用 ID 选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:14:55.400

使用 MVC3 Razor 时，此语法将不起作用：

```
$("#postTags").autocomplete('<%=Url.Action("LookUpGroupName",) %>', 
```

这是因为 Razor 引擎不理解 WebForms 引擎语法。相反，我使用了：

```
$("#group_name").autocomplete('@Url.Action("LookUpGroupName")', 
```

我使用了只接受 ActionResult 名称的重载方法。这对我有用，但如果您的解决方案设置不同，您可能必须同时提供 Controller 和 ActionResult 争论。

最后，当我发出 AJAX 请求时，我收到了错误代码 500。这是因为在我的 LookUpGroupName 方法中，我必须重构这行代码：

```
return Json(GroupValue); 
```

至：

```
return Json(GroupValue, JsonRequestBehavior.AllowGet); 
```

我原来的帖子有所有正确的代码供任何人将来参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T15:48:18.870

用这个做一个测试运行

```
 $(function() {
        var availableTags = [
            "ActionScript",
            "AppleScript",
            "Asp",
            "BASIC",
            "Scala",
            "Scheme"
        ];
        $( "#group_name" ).autocomplete({
            source: availableTags
        });
    }); 
```

# c# - 当我尝试创建具有两个子元素的 StackPanel 并将其分配给 Flyout 时，为什么我的 Flyout 会崩溃？

> ID：13180180
> 
> 赞同：0
> 
> 时间：2012-11-01T15:21:04.277
> 
> 标签：c#, dynamic, winrt-xaml, application-settings, callisto

我试图在 GridView 中右键点击网格时调用 Callisto Flyout（最终目标是允许用户更改值并将其存储在 ApplicationDataContainer 中）。我首先尝试了一个示例，该示例创建了一个我在网上找到的菜单——它有效，但我不想要一个菜单​​。所以我尝试将它从一个菜单更改为一个 StackPanel，上面有一个 TextBlock 和一个 TextBox。这段代码，虽然：

```
private void ItemView_RightTapped(object sender, RightTappedRoutedEventArgs e)
{
    var flyOut = new Flyout {PlacementTarget = sender as UIElement, Placement = PlacementMode.Mouse};

    var sp = new StackPanel {MinWidth = 240, MinHeight = 80, Orientation = Orientation.Horizontal};

    var tblk = new TextBlock {MinWidth = 60, MinHeight = 72};
    sp.Children.Add(tblk);

    TextBox tb = new TextBox {MinWidth = 120, MinHeight = 72};
    sp.Children.Add(tb);

    flyOut.Content = sp;
    flyOut.IsOpen = true;

    UpdateLayout();        
} 
```

...崩溃并带我到 App.gics 中的这一行：

```
if (global::System.Diagnostics.Debugger.IsAttached) global::System.Diagnostics.Debugger.Break(); 
```

顺便说一句，我最终可能会将此代码从 RightTapped 事件移到 Charms Settings 中它可能“正确”的位置，但我认为无论哪种情况都需要解决这个问题。

## 更新

我试图通过将弹出窗口从“就地”移动到 Windows 8 设置面板来采取不同的方法：

```
public ItemsPage()
{
    InitializeComponent();
    SettingsPane.GetForCurrentView().CommandsRequested += OnSettingsPaneCommandRequested;
}

private void ItemView_RightTapped(object sender, RightTappedRoutedEventArgs e)
{
    SettingsPane.Show();
}

private void OnSettingsPaneCommandRequested(SettingsPane sender, SettingsPaneCommandsRequestedEventArgs args)
{
    args.Request.ApplicationCommands.Add(new SettingsCommand("commandSetSection1Name",
                                                            "Change the name of Section 1", SetAndSaveSectionNames));
    args.Request.ApplicationCommands.Add(new SettingsCommand("commandSetSection2Name",
                                                            "Change the name of Section 2", SetAndSaveSectionNames));
    args.Request.ApplicationCommands.Add(new SettingsCommand("commandSetSection3Name",
                                                            "Change the name of Section 3", SetAndSaveSectionNames));
    args.Request.ApplicationCommands.Add(new SettingsCommand("commandSetSection4Name",
                                                            "Change the name of Section 4", SetAndSaveSectionNames));
    args.Request.ApplicationCommands.Add(new SettingsCommand("commandSetSection5Name",
                                                            "Change the name of Section 5", SetAndSaveSectionNames));
    args.Request.ApplicationCommands.Add(new SettingsCommand("commandSetSection6Name",
                                                            "Change the name of Section 6", SetAndSaveSectionNames));
}

private void SetAndSaveSectionNames(IUICommand command)
{
    var flyOut = new Flyout(); // flyOut is a Callisto control

    var sp = new StackPanel {MinWidth = 240, MinHeight = 80, Orientation = Orientation.Horizontal};

    var tblk = new TextBlock {MinWidth = 60, MinHeight = 72};
    sp.Children.Add(tblk);
    TextBox tb = new TextBox {MinWidth = 120, MinHeight = 72};
    sp.Children.Add(tb);
    flyOut.Content = sp;
    flyOut.IsOpen = true;

    UpdateLayout();        
} 
```

然而，同样的事情发生了——我可以通过右键单击 GridView (ItemView_RightTapped) 中的一个网格，然后选择其中一个来调用 SetAndSaveSectionNames()

“更改第 N 部分的名称”文本块或“设置”面板上的任何内容，但是：crasho！

如果一个家伙想在“设置”面板中设置几十个设置，那将如何工作 - 似乎没有比我添加的六个更多的空间 - 它会在某个时候产生一个 ViewBox 或 ScrollBox 或其他东西来适应这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T06:51:31.327

异常可能是**NotImplementedException**，因为 Callisto 代码没有实现**PlacementMode.Mouse**选项。我今天遇到了这个问题。

请参阅：[https ://github.com/timheuer/callisto/blob/master/src/Callisto/Controls/Flyout/Flyout.cs](https://github.com/timheuer/callisto/blob/master/src/Callisto/Controls/Flyout/Flyout.cs)

```
case PlacementMode.Mouse:
    throw new NotImplementedException("Mouse PlacementMode is not implemented."); 
```

# iphone - 想要取回我拍摄的视频

> ID：13180186
> 
> 赞同：1
> 
> 时间：2012-11-01T15:21:29.170
> 
> 标签：iphone, ios, avfoundation

我已经使用 AVFoundation 创建了一个相机，现在我想要我的视频，以便我可以将它上传到我的服务器上，我该怎么做？

我正在使用 MKNetworkKit 在服务器上上传视频。

我得到这样的输出：

```
file://localhost/private/var/mobile/Applications/4B2E02E5-3EE2-493E-8ECF-4B1DA29B9387/tmp/output.mov 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:37:43.250

伙计们，我通过一些帮助弄清楚了这里是代码。

```
- (void)              captureOutput:(AVCaptureFileOutput *)captureOutput
didFinishRecordingToOutputFileAtURL:(NSURL *)anOutputFileURL
                    fromConnections:(NSArray *)connections
                              error:(NSError *)error
{

   videodata = [NSData dataWithContentsOfURL:outputFileURL];

   //NSLog(@"output file url is :%@",anOutputFileURL);

    NSLog(@"output video data size is:%d", videodata.length);

    if ([[self delegate] respondsToSelector:@selector(recorder:recordingDidFinishToOutputFileURL:error:)]) {
        [[self delegate] recorder:self recordingDidFinishToOutputFileURL:anOutputFileURL error:error];
    }

    //NSLog(@"captureOutput is: %@",captureOutput);
    // NSLog(@"anOutputFileURL is: %@",anOutputFileURL);

    //videoPath = [NSString stringWithContentsOfURL:anOutputFileURL encoding:NSUTF8StringEncoding error:nil];

    //videoPath = [anOutputFileURL absoluteString];

    //videoURL = anOutputFileURL;
   // videodata = captureOutput;
   // NSLog(@"video path is: %@",videodata);

    UIAlertView *message = [[UIAlertView alloc] initWithTitle:nil
                                                       message:@"Do you want to upload this content to the yes stream network ?"
                                                      delegate:self
                                             cancelButtonTitle:nil
                                             otherButtonTitles:@"Yes",@"No",nil];
    [message show];
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];
    if([title isEqualToString:@"Yes"])
    {
        NSLog(@"Yes was selected.");

        self.flUploadEngine = [[fileUploadEngine alloc] initWithHostName:@"manektech.net" customHeaderFields:nil];

        NSMutableDictionary *postParams = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                           @"testApp", @"appID",
                                           nil];      
        self.flOperation = [self.flUploadEngine postDataToServer:postParams path:@"/dilipvideotest/savefile.php"];

        [self.flOperation addData:videodata forKey:@"uploadfile" mimeType:@"video/mov" fileName:@"output.mov" ];

        [self.flOperation onCompletion:^(MKNetworkOperation *operation) {

            NSLog(@"response string is : %@", [operation responseString]);

            /*   
             This is where you handle a successful 200 response
             */
        }     
                               onError:^(NSError *error) {
                                   NSLog(@"error : %@", error);
                                   UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                                                   message:[error localizedDescription]
                                                                                  delegate:nil
                                                                         cancelButtonTitle:@"Dismiss"
                                                                         otherButtonTitles:nil];
                                   [alert show];        
                               }];

        [self.flUploadEngine enqueueOperation:self.flOperation ];

    }
    else if([title isEqualToString:@"No"])
    {
        NSLog(@"No was selected.");
        //[self readMovie:outputFileURL];
    }
} 
```

# java - onPictureTaken 方法 - 将数据作为 tiff 获取？

> ID：13180188
> 
> 赞同：2
> 
> 时间：2012-11-01T15:21:37.610
> 
> 标签：java, android, android-camera

所以我正在阅读许多关于如何获得图像预览然后保存的教程。通常的教程涉及使用`SurfaceHolder`and`SurfaceView`和`PictureCallback`.

正如[文档](http://developer.android.com/reference/android/hardware/Camera.PictureCallback.html#onPictureTaken%28byte%5B%5D,%20android.hardware.Camera%29)中显示的那样，这是

`public abstract void onPictureTaken (byte[] data, Camera camera)`

通常要保存图像，您可以执行以下操作

```
/** Handles data for jpeg picture */
PictureCallback jpegCallback = new PictureCallback() {
    public void onPictureTaken(byte[] data, Camera camera) {
        FileOutputStream outStream = null;
        try {
            // write to local sandbox file system
            // outStream =
            // CameraDemo.this.openFileOutput(String.format("%d.jpg",
            // System.currentTimeMillis()), 0);
            // Or write to sdcard
            outStream = new FileOutputStream(String.format(
                    "/sdcard/%d.jpg", System.currentTimeMillis()));
            outStream.write(data);
            outStream.close();
            Log.d(TAG, "onPictureTaken - wrote bytes: " + data.length);
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
        }
        Log.d(TAG, "onPictureTaken - jpeg");
    }
}; 
```

但我对保存 jpeg 不感兴趣。我想保存一个 tiff 图像。阅读文档我发现了一个关于`data`格式的非常普遍的评论：

> 拍照后图像数据可用时调用。数据的格式取决于回调的上下文和 Camera.Parameters 设置。

所以我点击了[Camera.Parameters](http://developer.android.com/reference/android/hardware/Camera.Parameters.html)但我没有发现任何有用的东西。

有没有办法将字节保存为 tiff？难道我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T16:44:22.787

不，不直接支持 TIFF。[保存 TIFF 文件的最兼容选项是使用BitmapFactory](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeByteArray%28byte%5B%5D,%20int,%20int%29 "位图工厂")解码从 takePicture 接收到的 JPEG ，然后使用 TIFF 库将位图作为 TIFF 文件保存到磁盘。

Android 的 API 不直接支持 TIFF，因此您必须找到第 3 方库。

您可能需要考虑改用 PNG，因为 API 直接支持它；你可以直接调用[Bitmap.compress](http://developer.android.com/reference/android/graphics/Bitmap.html#compress%28android.graphics.Bitmap.CompressFormat,%20int,%20java.io.OutputStream%29)。

# objective-c - 查看忽略自己的框架并从子视图获取高度

> ID：13180192
> 
> 赞同：0
> 
> 时间：2012-11-01T15:22:10.700
> 
> 标签：objective-c, ios

我将图像添加到图像视图，然后将图像视图添加到视图。自定义视图忽略了自己的框架并从图像视图中获取高度。我该如何解决这个问题？

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {

    UIImage* image = [UIImage imageNamed:@"UILabelMe.png"];

    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 10, image.size.width, image.size.height)];
    [imageView setImage:image];

    UIView* customView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 100)];
    [customView addSubview:imageView];

    return customView;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:28:06.537

您还需要实现：

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section 
```

根据[文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006942-CH3-SW3)，标题视图只有在实现时才能正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:40:13.987

上面的代码工作正常。尝试为**自定义视图添加****背景颜色**并检查它。

# javascript - javascript中的赋值和var关键字

> ID：13180195
> 
> 赞同：6
> 
> 时间：2012-11-01T15:22:27.327
> 
> 标签：javascript, node.js, browser

我正在阅读“学习节点”一书，我陷入了一个非常简单的问题，一个我没有考虑太多的问题：javascript 中的赋值。

作者指出，我们应该意识到，通过使用 Node 的 REPL，以下内容将返回 undefined：

```
var a = 2
(undefined) 
```

而下面的代码将在 REPL 中返回“2”：

```
a = 2
2 
```

这是为什么？上面的代码不是属性吗？怎么来的？如果 var 'a' 直到代码中的那个点才存在，为什么它不存在和归属？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T16:03:25.190

根据[ECMA-262 § 12.2](http://www.ecma-international.org/ecma-262/5.1/#sec-12.2)，*VariableStatement*（即`var identifier=value`）显式地不返回任何内容。此外，*VariableStatement*是一个语句；语句不返回值，并且将语句放在表达式所在的位置是无效的。

例如，以下所有内容都没有任何意义，因为它们将 Statement 放在您需要产生价值的表达式的地方：

```
var a = var b;
function fn() { return var x; } 
```

根据[§ 11.13.1](http://www.ecma-international.org/ecma-262/5.1/#sec-11.13.1)，对变量 ( ) 的**赋值**`identifier=value`返回分配的值。

* * *

当您编写`var a = 1;`时，它会声明`a`并将其值初始化为`1`. 因为这是一个*VariableStatement*，所以它什么都不返回，并且 REPL 打印`undefined`。

`a=1`是一个赋值`1`给的表达式`a`。由于没有`a`，JavaScript 会在普通代码中隐式创建一个*全局* `a`变量（但会在严格模式下抛出 a `ReferenceError`，因为您不允许在严格模式下隐式创建新的全局变量）。

不管之前是否`a`存在，表达式仍然返回分配的值，，`1`所以 REPL 打印出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:33:38.483

Just guessing here - this could probably be verified by referring to the ECMAScript 5th Edition spec (but man that thing is a pain) - it probably has to do with the specification of the "var" statement vs assigning attributes to the "global" object.

When you declare a variable and assign a value to it (`var a=2`) the returned value is likely "undefined" because that's what the spec says the "var" statement should return.

When you assign a variable to a symbol without using the "var" statement you are actually assigning a value to an attribute of the global object of that name. That is, `a=2` is the same as saying `window.a=2` and we know that assinging a value to an attribute returns the value assigned.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T15:34:14.327

`var a = 2` is a statement. Thus it has no value.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T16:02:14.257

您正在评估一份声明清单。在评估语句列表时，返回最后一个产生值的语句的值。[http://ecma-international.org/ecma-262/5.1/#sec-12.1](http://ecma-international.org/ecma-262/5.1/#sec-12.1) - 请注意本节末尾的示例。如果列表中没有任何语句返回值，则不会返回任何内容（这是`undefined`在 JavaScript 中）。

变量语句，不返回值。[http://ecma-international.org/ecma-262/5.1/#sec-12.2](http://ecma-international.org/ecma-262/5.1/#sec-12.2)

赋值运算符确实返回一个值（以及执行赋值）。[http://ecma-international.org/ecma-262/5.1/#sec-11.13.1](http://ecma-international.org/ecma-262/5.1/#sec-11.13.1)

# caching - phpthumb 删除特定文件的缓存

> ID：13180197
> 
> 赞同：1
> 
> 时间：2012-11-01T15:22:31.807
> 
> 标签：caching, rotation, phpthumb, purge

我正在使用库 phpthumb 在个人项目中动态调整图像大小。我让用户能够修改他们上传的图像并旋转它。我需要清除特定图像的 phpthumb 缓存。我怎样才能做到这一点？

提前致谢 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:54:42.957

好的，我终于找到了，为了刷新图像的缓存，我们可以像这样添加一个哈希参数：

```
<img src="/uploads/phpThumb.php?src=/uploads/photo/myimage.jpg&w=250&ar=x&hash=<?php echo time(); ?>" alt="#"/> 
```

# java - 如何将日期 TextView 转换为 Long 以与当前日期进行比较

> ID：13180208
> 
> 赞同：3
> 
> 时间：2012-11-01T15:23:12.497
> 
> 标签：java, android, date

我有一个问题，日期比较。我有一个来自 TextView 的日期（通常存储在 SQLite 文本字段中）。TextView rowduedate 带有一个日期，其值为：“2012/10/01 15:16” 所以它不是空的。但是我在 LogCat 中收到以下错误：

```
11-01 15:16:55.445: E/AndroidRuntime(783): FATAL EXCEPTION: main
11-01 15:16:55.445: E/AndroidRuntime(783): java.lang.NumberFormatException: Invalid   long: ""
11-01 15:16:55.445: E/AndroidRuntime(783):  at   java.lang.Long.invalidLong(Long.java:125)
11-01 15:16:55.445: E/AndroidRuntime(783):  at java.lang.Long.parseLong(Long.java:346)
11-01 15:16:55.445: E/AndroidRuntime(783):  at java.lang.Long.parseLong(Long.java:319)
11-01 15:16:55.445: E/AndroidRuntime(783):  at com.android.demo.notepad3.Notepadv3$1.setViewValue(Notepadv3.java:100) 
```

这是代码：

```
TextView dueDate = (TextView) view.findViewById(R.id.rowduedate);
String due = (String) dueDate.getText().toString();

if(due!=null){
Long longDue = Long.parseLong(due);
String now = new Date().toString();
Long longNow = Long.parseLong(now);

if(longDue <= longNow){

       dueDate.setTextColor(Color.RED);
}               
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:28:41.747

您需要告诉您的代码日期的格式，以便从中提取时间。

```
String strDate = "2007-12-25";
SimpleDateFormat Formatter = new SimpleDateFormat("yyyy/MM/dd");
Date myDate    = Formatter.parse(strDate); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:54:10.000

看来您正在尝试解析一个空字符串，请注意这一点。

假设您的 dueDate:TextView 包含以下格式的有效日期“2012/10/01 15:16”：

```
long due = new SimpleDateFormat("yyyy/MM/dd HH:mm").parse(dueDate.getText().toString()).getTime();

if (due <= System.currentTimeMillis()) 
    dueDate.setTextColor(Color.RED); 
```

这应该有帮助，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T03:48:11.040

不要通过将日期字符串解析为`Long`

这是比较日期值的方法。核实

```
TextView dueDate = (TextView) view.findViewById(R.id.rowduedate);
String due = (String) dueDate.getText().toString();
SimpleDateFormat parser=new SimpleDateFormat("yyyy/MM/dd HH:mm");
Date d = null;
Date now = new Date();
if(due!=null){
try {
  d = parser.parse(due);
} catch (ParseException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
if(d.before(now){

       dueDate.setTextColor(Color.RED);
}               
} 
```

# java - 访问http请求体原始数据

> ID：13180212
> 
> 赞同：1
> 
> 时间：2012-11-01T15:23:36.343
> 
> 标签：java, http, servlets, stream, playframework

我正在尝试使用播放框架来实现一个 Web 应用程序，以替代与旧的非浏览器旧式 http 客户端连接的旧 http 服务器实现。

该客户端是用 Delphi 编写的，它直接在请求正文中发布数据，其中包含一些关于它的标头信息。

我以为我会得到一些东西

```
request.body /* In the play controller */ 
```

但什么都没有。

请看下面的代码：

```
public static void uploadPicture() {

        InputStream data = request.body;
    String fx = Play.getFile("").getAbsolutePath()+File.separator+"uploads"+File.separator+"test.jpg";
        File f = new File(fx);
        FileOutputStream moveTo = new FileOutputStream(fx);
        try {
                byte[] b = new byte[4096];
                for (int x = 0; (data.read(b)) != -1;){
                    moveTo.write(b, 0, x);
            }
        } finally{
            moveTo.close();
        }

    } 
```

**编辑**：为了澄清我的观点：我去了，我在 eclipse`HttpServlet`中创建了一个简单的动态 Web 项目，`doPost()`当我得到它时，`request.getInputStream()`它包含从旧客户端发送的文件。

播放是对请求体做些什么！？

我有哪些选择？

谢谢。

伊尔凡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:00:35.047

好的，这是 Play 1.2.4 中的一个错误。我安装了最新版本 1.2.5，一切正常。

`request.body`您可以在控制器中访问请求的原始正文。

# sql - 如何使用 SSIS 包转换“SQL_Latin1_General”排序？

> ID：13180214
> 
> 赞同：2
> 
> 时间：2012-11-01T15:23:35.223
> 
> 标签：sql, sql-server-2008, ssis, collate

我们刚刚注意到我们的 2 个服务器已使用**SQL_Latin1_General_CP1_CI_AS**和**Latin1_General_CI_AS**设置。

我创建了一个脚本，它再次比较两个数据源（因为它是一个简单的 SELECT 语句，我没有包含它，它使用相同的列但来自不同的源）当我尝试将它们合并在一起时我收到了整理错误。

> 消息 468，级别 16，状态 9，第 2 行无法解决UNION 操作中“ **SQL_Latin1_General_CP1_CI_AS** ”和“ **Latin1_General_CI_AS ”之间的排序规则冲突。**

其中一个来源是由**SSIS**包填充的表，有没有办法调整 SSIS 项目以在将“SQL_Latin1_General_CP1_CI_AS”格式发送到目标表之前将其转换为“Latin1_General_CI_AS”？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:56:01.760

`COLLATE Latin1_General_CI_AS`您可以像这样在使用 SQL_Latin1_General_CP1_CI_AS 的表中的每一列之后使用句子。

```
SELECT COLUMN_A COLLATE Latin1_General_CI_AS AS COL1 
FROM TABLE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T04:06:33.303

您的错误消息看起来像您的 UNION 在单个 SQL 语句中？例如选择...联合...选择

正如 Shiva 所描述的，在您的 SSIS 数据流中，您可以使用两个（或更多）OLE DB 源对象并将它们与“Union All”转换结合起来。每个 OLE DB 源对象将只有一个没有 UNION 子句的 SELECT。这种设计在设计/维护（列名上的联合，无需从每个源填充每一列）和运行时吞吐量方面也具有优势。

我认为您还需要在 OLE DB Source 对象上使用此技术。 [http://blog.stevienova.com/2009/04/16/ssis-pulling-data-from-a-non-default-collat​​ion-db-to-a-default-collat​​ion-db/](http://blog.stevienova.com/2009/04/16/ssis-pulling-data-from-a-non-default-collation-db-to-a-default-collation-db/)

# jquery - 单击时两次可折叠的脚本中的脚本

> ID：13180221
> 
> 赞同：0
> 
> 时间：2012-11-01T15:23:51.913
> 
> 标签：jquery, jquery-mobile, collapsable

我有点生气，因为我没有找到提示：我有一个可折叠的集合，它是从数据库动态创建的，它显示了一些日期。然后我想将内容填充到可折叠的内容中，这也应该是可折叠的（这会显示特定日期的一些细节） 此内容来自另一个正在工作的 ajaxcall (getDaydata(gotDate))。但是，如果我单击以展开子集（dateget-content-collapsible 类），则 ajax 调用会被触发两次，并且附加会终止布局。那么我怎样才能防止第二个事件被触发呢？谢谢您的帮助。克劳斯

```
$('#home').live('pagebeforecreate',function(event, ui){
countview = 7;
getPersons(countview);
});

getPersons(countview);
});
$('.dateget-headline').live('expand', function(){
var str=this.id;
var gotDate=str.substring (8,18);
getDaydata(gotDate);
});

function getPersons(countstand)
{
$.ajax({
url: 'fllist1.php',
 type: 'GET',
 data: {countitems: countstand},
 dataType: "json",
  success: function (data) {

 $.each(data, function(i,Person)
    {
    $('<div/>', {
   'id': 'dateget-'+Person.dataget+'-collapsible',
   'data-role':'collapsible',
   'class':'dateget-headline',
   'data-collapsed':'true',
    }).appendTo('#main-content-list');
    $('#dateget-'+Person.dataget+'-collapsible').html('<h5>'+ Person.dataget +'</h5>');   
 $('.datelist').collapsible();
//create a new collapsible set inside the collabsible

$('<div/>', {
'id': 'dateget-'+Person.dataget+'-collapsible-set',
 'data-role':'collapsible-set',
'class':'dateget-content-collapsible-set',
'data-theme':'c',
'data-content-theme':'d',
}).appendTo('#dateget-'+Person.dataget+'-collapsible');
$('.dateget-headline').collapsible();
});
}
});
};

 function getDaydata(gotDate){
 var gotDate=getDaydata.arguments[0];
 $.ajax({
 url: 'getDatedetails.php',
 type: 'GET',
 data: 'detailday=' + gotDate,
dataType: "json",
 success: function (data) {
      $.each(data, function(i,Fldet){

    $('<div/>', {
    'id': 'dateget-'+Fldet.id+'-collapsible',
    'data-role':'collapsible',
    'class':'dateget-content-collapsible',
    'data-collapsed':'true',
     }).appendTo('#dateget-'+gotDate+'-collapsible-set');
   $('#dateget-'+Fldet.id+'-       collapsible').html('<h1>'+Fldet.reg+'</h1>'+Fldet.call+Fldet.arrtt+Fldet.dept );

});
$('.dateget-content-collapsible').collapsible();
},

}
});
}; 
```

在这里您可以看到正在运行的脚本：http: [//nixnutz.info/lowimobil2.php](http://nixnutz.info/lowimobil2.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:52:41.493

你试过了`event.preventDefault();`吗？
您可以在[此处找到可折叠的内容事件](http://jquerymobile.com/demos/1.2.0/docs/content/content-collapsible-events.html)

# php - PHP Undefine 索引问题

> ID：13180224
> 
> 赞同：-1
> 
> 时间：2012-11-01T15:24:00.343
> 
> 标签：php

我正在用 php 创建一个联系表单。但是当我在我的 xampp 服务器中运行它时，我收到一条错误消息。我不明白为什么会这样。我想不通。以下是我的错误信息。

**错误信息：**

```
Notice: Undefined index: Send in D:\Software\Installed\xampp\htdocs\Omdatech-Co\eng\resellers.php on line 91 (First Line ex: if(isset($_POST['Send']) & $_POST['Send'] == "Submit")) 
```

**php代码：**

```
<?php
        if(isset($_POST['Send']) & $_POST['Send'] == "Submit")
        {
            $fname = mysql_real_escape_string($_POST['fname']);
            $email = mysql_real_escape_string($_POST['email']);
            $conum = mysql_real_escape_string($_POST['conum']);
            $country = mysql_real_escape_string($_POST['country']);
            $find = mysql_real_escape_string($_POST['find']);
            $msg = mysql_real_escape_string($_POST['msg']);

            $err = array();

if(isset($fname) & isset($email) & isset($conum) & isset($country) & isset($find) & 
isset($msg))
            {
if(empty($fname) & empty($email) & empty($conum) & empty($country) & empty($find) & 
empty($msg))
                {
                    $err[] = "All field require";
                }
                else
                {
                    if(empty($fname))
                    $err[] = "Your first name require";
                }

            }
            else
            {
            if(!empty($err))
                            {
                                foreach($err as $er)
                                {
                                    echo "<font color=red>$er</font><br/>";
                                }
                            }
                            else
                            {
                                echo "Thank you.";
                            }
            }

        }           
        ?> 
```

任何人都可以解决这个问题吗？为什么我收到这条消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:24:41.623

因为您在需要逻辑运算符时使用的是位运算符：

```
if(isset($_POST['Send']) && $_POST['Send'] == "Submit") 
```

注意两者`&&`并没有`&`。

逻辑运算符短路，因此当`isset()`返回时`false`，不会评估以下比较。位运算符尝试计算一个值，并评估比较，因此发出警告。

# c# - 我可以使以下 IQueryable linq 语句通用吗

> ID：13180227
> 
> 赞同：3
> 
> 时间：2012-11-01T15:24:07.330
> 
> 标签：c#, entity-framework, generics, linq-to-sql

有没有办法可以使以下数据库查询生成器通用？

```
private IQueryable<Foo> ByName(IQueryable<Foo> dbQuery, Query query)
{
    string[] searchTerms = query.Data.Replace(" ","").ToLower().Split(',');

    if (query.Exclude)
    {
        return dbQuery.Where(x => searchTerms.All(
            y => y != x.Name.Replace(" ", "").ToLower()));
    }

    return dbQuery.Where(x => searchTerms.Any(
        y => y == x.Name.Replace(" ", "").ToLower()));
} 
```

对于 Foo 的许多不同属性，我都有相同的功能。ByCounty、ByTown、ByStreet 等

我之前写过一些返回 linq 的函数，如下所示

```
public Expression<Func<Foo, bool>> FoosAreWithinDistanceFromGeocode(
    double distance, Geocode geocode)
{
    double distanceSquare = distance * distance;
    return foo => ( SqlFunctions.Square((double)(
        foo.Address.Geocode.Easting - geocode.Easting)) +
        SqlFunctions.Square((double)(fooAddress.Geocode.Northing - 
        geocode.Northing)) ) <= distanceSquare;
} 
```

但我似乎无法找到 Linq-to-SQL 的东西是否不能使用泛型，或者是否可以将属性作为泛型传递等等。

* * *

编辑：我通常为单个搜索词工作。

```
Where [query.Data == "Foo1"]

return dbQuery.Where(SearchMatch("Name", query.Data));

public Expression<Func<Foo, bool>> SearchMatch(string propertyName, string searchTerm)
{
    var foo = Expression.Parameter(typeof(Foo), "foo");
    var prop = Expression.Property(foo, propertyName);
    var search = Expression.Constant(searchTerm);
    var equal = Expression.Equal(prop, search);

    return Expression.Lambda<Func<Foo, bool>>(equal, foo);
} 
```

任何人都知道如何使它适用于字符串数组？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T15:42:43.020

您需要定义一个接口来公开您要访问的属性，如下所示：

```
public interface IHaveName
{
    string Name { get; }
} 
```

然后，在您的类上，您将实现接口：

```
public class Foo : IHaveName 
```

如果您使用的是从 DBML 文件生成的类，这些类会用[`partial`关键字](http://msdn.microsoft.com/en-us/library/wa80x488.aspx)标记，因此实现接口就像创建一个新文件并插入一样简单：

```
public partial class Foo : IHaveName 
```

由于该属性已在从 .dbml 文件生成的*其他.cs 文件中声明为公共，因此该接口是隐式实现的。*

最后，您将重写您的`ByName`方法以采用具有实现您的接口的约束的泛型类型参数`IHaveName`：

```
private IQueryable<T> ByName<T>(IQueryable<T> dbQuery, Query query)
    where T : IHaveName
{
    // Everything else is the same. 
```

对于您的其他属性（以及使用它们的方法），您可以将它们聚合到一个接口中，或者根据您的需要将它们分开。

* * *

根据您的编辑，如果要动态创建表达式，则不必放弃编译时安全性：

```
public Expression<Func<Foo, bool>> SearchMatch(
    Expression<Func<Foo, string>> property, string searchTerm)
{
    var foo = Expression.Parameter(typeof(Foo), "foo");
    // Get the property info from the property expression.
    var prop = Expression.Property(foo, 
        (property.Body as MemberExpression).Member as PropertyInfo);
    var search = Expression.Constant(searchTerm);
    var equal = Expression.Equal(prop, search);

    return Expression.Lambda<Func<Foo, bool>>(equal, foo);
} 
```

然后你这样称呼它：

```
var expression = SearchMatch(f => f.Name, "searchTerm"); 
```

这可确保您传递给的属性`SearchMatch`实际存在于`Foo`. 请注意，如果您想让其他标量属性类型通用，您可以执行以下操作：

```
public Expression<Func<Foo, bool>> SearchMatch<T>(
    Expression<Func<Foo, T>> property, T searchTerm)
{
    var foo = Expression.Parameter(typeof(Foo), "foo");
    // Get the property info from the property expression.
    var prop = Expression.Property(foo, 
        (property.Body as MemberExpression).Member as PropertyInfo);
    var search = Expression.Constant(searchTerm);
    var equal = Expression.Equal(prop, search);

    return Expression.Lambda<Func<Foo, bool>>(equal, foo);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-01T15:51:26.357

如果我理解你想要实现的反思可能会对你有所帮助。至少如果你玩得很好。这是一个简化但有效的示例

```
internal class Program
{
    private class Data
    {
        public string Name { get; set; }
        public string Address { get; set; }

        public override string ToString()
        {
            return String.Format("My name is {0} and I'm living at {1}", Name, Address);
        }
    }

    static Expression<Func<Data,bool>> BuildExpression(PropertyInfo prop, IQueryable<string> restrict)
    {
        return (data) => !restrict.Any(elem => elem == prop.GetValue(data, null));
    }

    static IQueryable<Data> FilterData(IQueryable<Data> input, Expression<Func<Data, bool>> filter)
    {
        return input.Where(filter);
    }

    public static void Main (string[] args)
    {
        List<Data> list = new List<Data>()
                               {
                                   new Data {Name = "John", Address = "1st Street"},
                                   new Data {Name = "Mary",Address = "2nd Street"},
                                   new Data {Name = "Carl", Address = "3rd Street"}
                               };

        var filterByNameExpression = BuildExpression(typeof (Data).GetProperty("Name"),
                                                     (new List<string> {"John", "Carl"}).AsQueryable());

        var filterByAddressExpression = BuildExpression(typeof(Data).GetProperty("Address"),
                                                     (new List<string> { "2nd Street"}).AsQueryable());

        IQueryable<Data> filetedByName = FilterData(list.AsQueryable(), filterByNameExpression);
        IQueryable<Data> filetedByAddress = FilterData(list.AsQueryable(), filterByAddressExpression);

        Console.WriteLine("Filtered by name");
        foreach (var d in filetedByName)
        {
            Console.WriteLine(d);
        }

        Console.WriteLine("Filtered by address");
        foreach (var d in filetedByAddress)
        {
            Console.WriteLine(d);
        }

        Console.ReadLine();
    } 
```

但是，我几乎可以肯定它不适用于 LINQ-to-SQL。解决它的一种方法是`IQueryable`在将其传递给此类过滤方法之前将其具体化（例如，通过调用`ToList`它们）。

# php - 通过 entry.php 重写 URL

> ID：13180230
> 
> 赞同：0
> 
> 时间：2012-11-01T15:24:17.813
> 
> 标签：php, apache, .htaccess, clean-urls

我的应用程序目录下有两个目录

```
my_app:
  .htaccess
  lib:
    entry.php
  web:
    css:
      css_file1
      css_file2
    js:
      js_file1
      js_file2 
```

我的网址将是这样的[http://example.com/my_app/my_path](http://example.com/my_app/my_path)

在**my_app**目录下，有两个目录**web**和**lib**。

如果**my_path**可以映射到**web**目录下的任何文件，请使用它。

例如，[http://example.com/my_app/css/css_file1](http://example.com/my_app/css/css_file1)应该映射到**my_app/web/css/css_file1**。

否则将其重定向到**lib/entry.php/my_path****以便**可以通过**$_SERVER['PATH_INFO']**访问 my_path重定向应该是内部的。重定向对用户不可见。

我想在**.htaccess**中编写配置来完成它。我编写了下面给出的代码。

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule (.*) ../web/$1  
    RewriteCond web/%{REQUEST_FILENAME} !-f 
    RewriteCond web/%{REQUEST_FILENAME} !-d 
    RewriteRule (.*) lib/entry.php/$1 
</IfModule> 
```

但我收到 403 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:43:05.740

我相信以下内容应该适用于您，`/var/www/.htaccess`即直接在`$DOCUMENT_ROOT`：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{DOCUMENT_ROOT}/$1/web/$2 -f [OR]
RewriteCond %{DOCUMENT_ROOT}/$1/web/$2 -d
RewriteRule ^([^/]+)/(.*)$ $1/web/$1 [L]

RewriteCond %{ENV:REDIRECT_STATUS} !200
RewriteRule ^([^/]+)/(.*)$ $1/lib/entry.php/$2 [L] 
```

# excel - Excel 2010 中的小时计算

> ID：13180234
> 
> 赞同：2
> 
> 时间：2012-11-01T15:24:36.350
> 
> 标签：excel

我有一个 Excel 2010 工作簿，其中包含一个单元格，其值`9876:54:32`（手动输入）表示 9876 小时、54 分钟和 32 秒，例如电话通话时间。

然后我有一个单元格，其值`1000`（手动输入）代表 1000 个调用。

我想将这些值相除以获得每次通话 592.615 分钟的平均通话时间。

我正在做一个常规的 =A1/B1 并且它给了我一个错误。

*** 已编辑 *** 感谢 Brain Webster 纠正我的数学。我的意思是 9.876 小时。但关键是 Excel 给了我一个错误，而不是我的手动数学。玩弄它，我发现 Excel 对我来说很好，值高达`9999:59:59`. 一旦我尝试使用 10000:00:00 及以上，它就不会将其识别为时间值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:59:31.850

我喜欢这些看似简单的谜语，所以这是我作为公式和 VBA 尝试的解决方案：

我原来的：

```
= (LINKS(A38;FINDEN(":";A38)-1)/24)+ZEITWERT("0"&RECHTS(A38;LÄNGE(A38)-FINDEN(":";A38)+1)) 
```

翻译：

```
= (LEFT(A38,FIND(":",A38)-1)/24)+TIMEVALUE("0"&RIGHT(A38,LEN(A38)-FIND(":",A38)+1)) 
```

这将为您提供给定 10k 持续时间文本的正确值。您只需将单元格的格式设置为`[h]:mm:ss`. 然后这些值看起来相同，但一个是字符串，另一个是数字 - 这是一个主要区别；）

在 vba 中它看起来更容易，并且一旦定义，您可以将其用作工作表函数。

```
Public Function GetDurationValue(ByVal strInput As String) As Double
  Dim arrResult As Variant

  arrResult = Split(strInput, ":") 'saves you parsing
  GetDurationValue = (arrResult(0) / 24) + _
                     TimeSerial(0, arrResult(1), arrResult(2))

End Function

A38 = "10971:12:14"
=GetDurationValue(A38)
=457.13349537037 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:42:52.480

您可以使用 LEFT 和 RIGHT 函数检索部分时间值，然后将这些值相加并乘以 60 [分钟]（分别为 3600 [小时]）。

像这样的小时、分钟、秒（A1 是具有时间值的单元格）：

```
B1=VALUE(LEFT(A1;FIND(":";A1)))*3600
B2=VALUE(LEFT(A1;FIND(":";A1; FIND(":";A1))))*60
B3=VALUE(LEFT(A1;FIND(":";A1; FIND(":";A1; FIND(":";A1))))) 
```

现在你可以总结一下：

```
C1=SUM(B1;B2;B3) 
```

然后按呼叫计数（A2 是具有呼叫计数的单元格）：

```
D1=C1/A2 
```

最后像时间一样格式化：

```
E1=TEXT(D1/(24*3600);"d \day\s hh:mm:ss") 
```

顺便说一句：我在 Excel 2013 中尝试过，当我在单元格中输入 111:22:33 时，它会自动转换为时间。那么我可以像你尝试的那样划分它......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T16:10:36.967

Excel 似乎无法识别小时数 > 10000。因此我们需要引入一个`IF()`以查看是否是这种情况并确定小时> 10000的情况的替代公式

`=IF(ISERROR(FIND(":",A2)),A2/B2, <SCRIPT IN CASE OF >10000>)`

`<SCRIPT IN CASE OF >10000>`现在将是：

`VALUE(LEFT(A2,FIND(":",A2)))/24+VALUE(LEFT(A2,FIND(":",A2, FIND(":",A2))))/(24*60)+VALUE(LEFT(A2,FIND(":",A2, FIND(":",A2,FIND(":",A2)))))*(24*60*60)`

结合并享受！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T10:37:46.963

假设你在 A1 中不超过`100,000`小时，并且你总是显示小时、分钟和秒，那么这个公式就足够了

`=IFERROR(A1/B1,(LEFT(A1)*10000/24+RIGHT(A1,10))/B1)`

将结果单元格格式化为 [h]:mm:ss 以将结果作为时间值

在`10971:12:14`A1 和`1000`B1 中应该给出`10:58:16`[或格式化结果单元格`[m]:ss`以获得分钟和秒的结果，如`658:16`]

此版本适用于任意小时数，有或没有秒

`=IFERROR(A1/B1,(LEFT(A1,FIND(":",A1)-1)/24+RIGHT(A1&IF(COUNTIF(A1,":*:"),"",":00"),5)/60)/B1)`

# c++ - 无法在 C++ 中读取文本文件

> ID：13180244
> 
> 赞同：-2
> 
> 时间：2012-11-01T15:25:15.407
> 
> 标签：c++

我被这个简单的问题难住了。我正在用 C++ 读取一个文本文件：

```
std::ifstream stream; 
stream.open(filename); 
if (!stream) 
   cout << "Invalid stream" << endl; 
```

确实如此，`!stream`但文本文件似乎没有任何问题。什么情况下可以`stream`造假？

**注意：** is_open 返回 true

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:32:02.283

您没有提供足够的信息。然而，我的精神力量揭示了：

`filename`是相对路径，你当前的工作目录不是你想的那样。

在您的`if`子句中，在通过 打印之前 `std::cout`，添加以下内容：

```
perror(filename.c_str()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:27:59.453

您的文件可能无法访问，或者您可能没有足够的权限来访问该文件。

也许它在其他地方开放？检查文件的路径是否正确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T16:41:55.773

这段代码对我有用：

```
#include<iostream>
#include<string>
#include<fstream>

using namespace std;

int main()

{
    std::ifstream infilestream;
    std::string line;

    infilestream.open("test.txt");
    while(infilestream)
    {
      std::getline(infilestream, line);
      cout<<line<<"\n";
    }
    infilestream.close();

    return(0);

} 
```

# mysql - Mysql DB 这是最高效的设计吗？

> ID：13180249
> 
> 赞同：1
> 
> 时间：2012-11-01T15:25:40.047
> 
> 标签：mysql, database-design

`mysql`我有一个管理 50 个州的法规的现有数据库。当前设置是相关的 - 50 个州中的每个州的三个表：

`state_table`包含章节/子章节标题 `item_table`包含结束记录 `department_table`包含将两者关联的 ID。

总而言之，它处理了大约 620,000 条记录

我不是数据库设计专家，并且一直按原样使用它，但是，所有 50 个州的表的性质限制了对所有州的搜索等，我想知道是否有更好的方法。

我想知道我是否应该考虑将其组合成一个单一的一组 3 个关系表，用于整个国家，或者甚至一个单一的表来处理所有事情。

我在其他论坛上问过这个问题，并被告知要阅读各种数据库模式和结构等。所以如果有人可以建议前进的方向以及我所拥有的与替代方案的优缺点会很好！

谢谢！

就是这样，X 50

阿拉巴马州

> ID
> 名称
> 州
> 父母 描述

alabama_department

> 部门 - 来自“阿拉巴马州”的 ID
> 
> 项目 - 来自“alabama_item”的 ID

阿拉巴马州项目

> ID
> 名称
> 描述
> 关键字
> Doc_ID
> Effective_date
> ... ...

查询：我通过链接逐步了解章节/子章节/结束记录的层次结构，这很好，但我开始更多地关注搜索能力，并且认为我所拥有的东西有点过头了，这听起来像你们中的几个这么想（矫枉过正）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T15:29:13.127

如果我认为你有 150 个表（3 * 50 个状态）是正确的，那么：

您应该有一个“状态”表，其中包括 a`stateID`和`stateName`。然后对章节/子章节使用 ONE 表，对部门使用 ONE，对最终记录使用 ONE，并使用`stateID`将不同的记录与状态相关联。

**每个状态不**应该有 3 个表，您可以使用每个状态表并仅与状态表相关。这会将您带到四张桌子而不是 150 张桌子。

# javascript - 在用 javascript 制作井字游戏时，如何创建一个 AI 来选择任何随机框，但尚未选择一个？

> ID：13180250
> 
> 赞同：1
> 
> 时间：2012-11-01T15:25:47.347
> 
> 标签：javascript, html, algorithm, dom-events

我正在制作井字游戏，但我被卡住了。我制作了一个跟随你移动的人工智能，但它有点搞砸了。自己尝试一下，看看会发生什么。任何人都可以看看他们是否能够改进它并解释他们是如何做到的？为了简单起见，我怎样才能让 AI 选择尚未选择的任何框。这是代码：

```
<!DOCTYPE html>
<html>
<body>
    <input type="button" id="k1" value="  " onclick="tictactoe(this)">
    <input type="button" id="k2" value="  " onclick="tictactoe(this)">
    <input type="button" id="k3" value="  " onclick="tictactoe(this)">
    <br />
    <input type="button" id="k4" value="  " onclick="tictactoe(this)">
    <input type="button" id="k5" value="  " onclick="tictactoe(this)">
    <input type="button" id="k6" value="  " onclick="tictactoe(this)">
    <br />
    <input type="button" id="k7" value="  " onclick="tictactoe(this)">
    <input type="button" id="k8" value="  " onclick="tictactoe(this)">
    <input type="button" id="k9" value="  " onclick="tictactoe(this)">
    <script>
        var Xturn = true;
        var nummoves = 0;
        var cat;
        function tictactoe(square) {
            var value = square.value;
            var doc1 = document.getElementById("k1").value;
            var doc2 = document.getElementById("k2").value;
            var doc3 = document.getElementById("k3").value;
            var doc4 = document.getElementById("k4").value;
            var doc5 = document.getElementById("k5").value;
            var doc6 = document.getElementById("k6").value;
            var doc7 = document.getElementById("k7").value;
            var doc8 = document.getElementById("k8").value;
            var doc9 = document.getElementById("k9").value;

            for (nummoves = 0; nummoves < 2; nummoves++) {

                if (doc1 == "X") {
                    cat = document.getElementById("k2").value = "O";
                    Xturn = true;
                }

                if (doc2 = "X") {
                    cat = document.getElementById("k4").value = "O";
                    Xturn = true;
                }

                if (doc3 == "X") {
                    cat = document.getElementById("k5").value = "O";
                    Xturn = true;
                }

                if (doc4 == "X") {
                    car = document.getElementById("k9").value = "O";
                }
            }

            for (nummoves = 2; nummoves < 3; nummoves++) {

                if (doc1 == "X") {
                    cat = document.getElementById("k7").value = "O";
                    Xturn = true;
                }

            }

            if (value != "X" && value != "O") {
                if (Xturn == true) {
                    square.value = "X";
                    return Xturn = false;
                    nummoves++;
                } else if (Xturn == false) {
                    square.value = "O";
                    return Xturn = true;
                    nummoves++;
                }
            } else {
                alert("That square has been clicked.");
            }
        }
    </script>
</body>
</html> 
```

请注意，我承认整个概念不是我的，但我做了有点混乱的 AO 部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:41:11.363

跟踪一个开放方块列表，然后从该列表中随机选择。

这样你就可以消除循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:27:38.270

您可以迭代考虑“按钮”并根据随机选择未检查的第一个或另一个。

```
for(i=1;i<10;i++) {
   if (document.getElementById('k'+i).value = ' ') {
       // not played yet !
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T15:36:52.560

考虑以下逻辑：

```
// function that does an AI move
function doAIMove(xOrO) {
    // randomly gets a number from 1 to 9
    var randomSquare = document.getElementById("k" + getRandomInt(1, 9));
    while (randomSquare.value != " ") {
        randomSquare = document.getElementById("k" + getRandomInt(1, 9));
    }

    randomSquare.value(xOrO);
}

function getRandomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
} 
```

这效率不高，但它可以按照您的要求工作。无论如何，您需要检查是否还有剩余的方块要填写。

您还应该考虑实现非常简单的“井字游戏”AI。你应该遵循这个伪算法：

在制作类似井字游戏的游戏时，AI 应该像这样工作：

```
1\. Check if there is a tile that you can win in 1 move
    if there is no such tile:
2\. Check if there is a tile that your opponent can win in 1 move
    if there is no such tile:
3\. Check if there is a tile that can make two tiles apply to the rule #1
    if there is no such tile:
4\. Check if there is a tile that your opponent can make two tiles apply to the rule #2
    if there is no such tile:
5\. implement your own AI form this point 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T14:06:22.373

用于井字游戏的 HTML 和 JS/JQuery 实现的[jsFiddle链接。](http://jsfiddle.net/bhatkrishnakishor/LGHHQ/)
目前它只有一个没有计算机作为对手的两个玩家实现。希望您能在此基础上进行构建。

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title> - jsFiddle demo by bhatkrishnakishor</title>

  <script type='text/javascript' src='//code.jquery.com/jquery-1.9.1.js'></script>

  <link rel="stylesheet" type="text/css" href="/css/result-light.css">

  <style type='text/css'>
    .tictactoe {
    width: 125px;
    height: 125px;
    background: #A2A8A1;
};
  </style>

<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
//this is a demo tic tac toe game
$(document).ready($('input.tictactoe').click(tictactoe));
$(document).ready($('#ff').click(reset));

var whoseMove = 'X';
var xMove = new Array();
var oMove = new Array();
var gameOver = false;
var winningConditions = new Array(     'aa/ab/ac','ba/bb/bc','ca/cb/cc','aa/ba/ca','ab/bb/cb','ac/bc/cc','aa/bb/cc','ac/bb/ca');
var whoWon = '';

function tictactoe() {
    if(gameOver == false && this.value == '  '){
        if(whoseMove == 'X'){
            this.value = whoseMove;
            xMove[xMove.length] = this.id;
            whoseMove = 'O';
        }
        else {
            this.value = whoseMove;
            oMove[oMove.length] = this.id;
            whoseMove = 'X';
        }
    }

    if(xMove.length >2){
        whoWon = endGame();
    }

    if(gameOver && whoWon != '' && whoWon != 'draw') {
        alert(whoWon + ' won!')
    }

    if(!gameOver && whoWon == 'draw') {
        alert('Games been draw!');
    }    
}

function endGame() {
    var winningCombinations = new Array();

    //set this variable value to true incase the game is over
    gameOver = true;    

    for(var index = 0; index < 8; index = index + 1){
        var xMatchCount = 0;
        var oMatchCount = 0;
        winningCombinations = winningConditions[index].split('/');
        for(var i = 0; i < 3; i = i + 1){
        console.log('winningCombinations ' + winningCombinations[i]);
        for(var j = 0; j < xMove.length; j = j + 1){
            console.log('xMove ' + xMove[j]);
            if(winningCombinations[i] == xMove[j]){
                xMatchCount = xMatchCount + 1;
                if(xMatchCount == 3){
                    return 'X';
                }
            }
        }
        for(var k = 0; k < oMove.length; k = k + 1){
            //console.log('oMove ' + oMove[k]);
            if(winningCombinations[i] == oMove[k]){
                oMatchCount = oMatchCount + 1;
                if(oMatchCount == 3){
                    return 'O';
                }
            }                
                }
        }
    }

    console.log('x Move Count ' + xMove.length);
    console.log('o Move Count ' + oMove.length);

    if(xMatchCount < 3 && oMatchCount < 3){
        gameOver = false;
    } 

    if(xMove.length + oMove.length == 9){
        return 'draw';
    }
}

function reset() {

    console.log('Xs Move - ' + xMove.join('/'));
    console.log('Os Move - ' + oMove.join('/'));
    console.log(winningConditions.length);

    whoseMove = 'X';
    xMove = new Array();
    oMove = new Array();
    gameOver = false;
    whoWon = '';

    $('input').filter(function() {
    if(this.id != 'ff') {
        this.value = '  ';
        }
    });
}
});//]]>  

</script>

</head>
<body>
      <input type="button" id="aa" class="tictactoe" value="  ">
    <input type="button" id="ab" class="tictactoe" value="  ">
    <input type="button" id="ac" class="tictactoe" value="  ">
    <br />
    <input type="button" id="ba" class="tictactoe" value="  ">
    <input type="button" id="bb" class="tictactoe" value="  ">
    <input type="button" id="bc" class="tictactoe" value="  ">
    <br />
    <input type="button" id="ca" class="tictactoe" value="  ">
    <input type="button" id="cb" class="tictactoe" value="  ">
    <input type="button" id="cc" class="tictactoe" value="  ">
    <br /><br />
    <input type="button" id="ff" value="Reset">

</body> 
```

# mysql - LAMP 服务器、MYSQL、PuTTy

> ID：13180252
> 
> 赞同：0
> 
> 时间：2012-11-01T15:25:59.853
> 
> 标签：mysql, lamp, putty

我通过 PuTTY 连接到 LAMP 服务器。

我不知道是否有可用的 GUI，所以我通过 CLI 执行此操作。现在的问题是我需要数据库中的某些字段，但由于缺少文档，我不知道数据库的外观。

我应该如何处理这个问题。在数据库中有 148 个表。我应该一次只通过每张桌子吗？有没有聪明的方法？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T15:31:50.777

您总是可以安装 PHPMyAdmin，但如果您无权安装，您可以尝试[MySQL Workbench](http://www.mysql.com/downloads/workbench/)。这安装在您的计算机上，您只需输入服务器信息并连接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:32:02.063

有很多可用于 MySQL 的 GUI 工具，其中一些通常安装在服务器上，而另一些则在桌面上运行，这里有一个简短的列表：

MySQL Workbench - 具有非常好的功能的官方 mysql gui 工具（特别是用于 db 设计）

PHPMyAdmin - 基于 Web 的界面，可以安装在服务器上并通过 Web 界面访问。

HeidiSQL（免费，Windows）- 桌面应用程序

SQLYog（很多功能，花钱） - 桌面应用程序

Sequel Pro（免费、纤薄且适用于 macosx）- 桌面应用程序

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-23T11:09:13.193

您还可以使用 mysql-query 浏览器连接数据库。

窗口使用的下载链接：-> [http://downloads.mysql.com/archives/query/](http://downloads.mysql.com/archives/query/)

# c# - 如何在 Sharepoint 2010 中的 c# 工作流程中重置 InfoPath 表单的数字签名？

> ID：13180253
> 
> 赞同：5
> 
> 时间：2012-11-01T15:26:00.707
> 
> 标签：c#, sharepoint-2010, workflow, digital-signature, infopath2010

> 正如问题所说，我有一个在 SP2010 上运行的 InfoPath 表单，提交时使用 ac# 工作流。如果表单在工作流程中被拒绝，那么我需要重置它。我控制了一切，除了如何将数字签名重置为 null、nill、nada、什么都没有、不存在！有任何想法吗？我现在在看谷歌，但目前，我什至不确定数字签名的 om？

哇，我注意到这个问题突然变得越来越流行，赏金几乎消失了。只是把它放在那里，我不打算不赏金某人，但我本周早些时候（2012 年 11 月第 2 周）需要答案，因此我尽可能多地搜索、玩和摇摇欲坠的代码，直到我最终找到自己的在其他人回答我之前回答。但是，为了将来参考，如果有人给出更好的答案，我很乐意回来并代表他们。谢谢大家的支持，我真的希望我的回答对别人和对我一样有用。

[NOW] [**Bloggered**](http://spyk3lc.blogspot.com/2012/11/how-to-reset-digital-signature-on.html) ^(&&) [**Gisted**](https://gist.github.com/4059946#file_work_flow_reset_info_path_signatures) [可能再也没有人像我一样努力搜索这个答案了，:P]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:20:09.100

> # ¡¡¡ 我找到了我的答案！！！
> 
> [¡¡¡ 它适用于工作流程！]

历经千辛万苦，我终于想出了一个解决办法。它涉及几个步骤。一、提升安全！否则，非管理员用户将导致工作流程出错。似乎它应该以这种方式工作，但是......其次，获得正确的架构！我花了一段时间才找到我的，~~我忘记了确切的步骤，但是，它并不难找到。~~ `UPDATED: Can be found as an attribute of xmlDoc.Document, see updated code`单步执行（调试）您的工作流程，无需命名空间/架构，并在文档到达时突出显示它。其中一个属性是作为架构链接的 url。无论如何，你想看看解决方案！？是吗？向下看！

```
SPSecurity.RunWithElevatedPrivileges(delegate()
{
    SPFile formFile = workflowProperties.Item.File;
    MemoryStream ms = new MemoryStream(formFile.OpenBinary());
    XmlTextReader rdr = new XmlTextReader(ms);
    XmlDocument xmlDoc = new XmlDocument();
    xmlDoc.Load(rdr);
    rdr.Close();
    ms.Close();
    XmlNamespaceManager nsm = new XmlNamespaceManager(xmlDoc.NameTable);
    String schemaUri = xmlDoc.DocumentElement.GetAttributeNode("xmlns:my") != null ? xmlDoc.DocumentElement.GetAttributeNode("xmlns:my").Value : "http://schemas.microsoft.com/office/infopath/2003/myXSD/2012-09-04T20:19:31";
    nsm.AddNamespace("my", schemaUri);
    XmlNode nodeSignatureCollection = xmlDoc.DocumentElement.SelectSingleNode("my:signatures1", nsm);
    if (nodeSignatureCollection != null)
    {
        if (nodeSignatureCollection.HasChildNodes)
        {
            foreach (XmlNode nodeSignature in nodeSignatureCollection.ChildNodes)
            {
                //  HERE IT IS!!!
                if (nodeSignature.HasChildNodes && !nodeSignature.IsReadOnly) nodeSignature.RemoveAll();
            }
        }
    }
    byte[] xmlData = System.Text.Encoding.UTF8.GetBytes(xmlDoc.OuterXml);
    formFile.SaveBinary(xmlData);
    formFile.Update();
}); 
```

请记住，此设置用于通过多个签名。虽然我怀疑如果只有一个签名会改变任何事情。

> 任何关于使这个更甜更小的建议都被接受，但是，我必须要求解释。老实说，我几乎不明白这里发生了什么！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:08:32.577

> 以下答案只有一半有效。它留在这里用于教学目的。（[完整的工作答案可以在这里找到。](https://stackoverflow.com/questions/13180253/how-to-reset-digital-signature-of-an-infopath-form-during-c-sharp-workflow-in-sh#answer-13279257)）它适用于管理员用户，但仅此而已。它也仅适用于代码背后的 InfoPath 表单。不是来自工作流程。 [添加提升的特权似乎有 0 效果]
> 
> 我将把这个答案和我的另一个答案一起留在这里，以便有人可以从这两个例子中学习，甚至可能通过评论指导其他人（包括我自己），以及为什么一种方法可能比另一种更好。在这一点上，我真的不想再解释了，因为我真的不想再看到任何这段代码了！哈哈！

```
public void FormEvents_Loading(object sender, LoadingEventArgs e)
{
    string[] actionFields = new string[] { "/my:myFields/my:.../my:...", "/my:myFields/my:.../my:...", etc... };
    for (int i = 0; i < actionFields.Length; i++)
    {
        String field = actionFields[i];
        XPathNavigator node = this.MainDataSource.CreateNavigator().SelectSingleNode(field, this.NamespaceManager);
        if (node.Value.ToLower() == "reject")
        {
            XPathNavigator sigNode = this.MainDataSource.CreateNavigator();
            if (this.Signed) //then unsign it
            {
                for (int ii = 2; ii <= 13; ii++)
                {
                    try
                    {
                        XPathNavigator xSignedSection = sigNode.SelectSingleNode(String.Format("my:myFields/my:signatures1/my:signatures{0}", ii), this.NamespaceManager);
                        if (xSignedSection.HasChildren)
                        {
                            xSignedSection.MoveToChild(XPathNodeType.Element); xSignedSection.DeleteSelf();
                        };
                    }
                    catch (Exception ex) { };
                };
            };
        };
    };
} 
```

# ipad - 从适用于 iPad 的 Phonegap 应用程序中安装 OTA plist 应用程序

> ID：13180258
> 
> 赞同：3
> 
> 时间：2012-11-01T15:26:33.433
> 
> 标签：ipad, cordova, childbrowser

我正在尝试从 Phonegap iPad 应用程序中启动 OTA 应用程序安装。我试过这个：

```
var url = "http://www.example.com/test.plist";
window.open("itms-services://?action=download-manifest&url=" + url, "_blank"); 
```

这适用于 iOS 5 但**不适用于 iOS 6**。

我还尝试使用 ChildBrowser 插件指向带有指向 OTA 应用程序安装链接的页面，但这也不起作用（如果我直接从本机 iPad 浏览器中访问该网页，它工作正常）。

有谁知道我如何从 Phonegap iPad 应用程序中启动 OTA 应用程序安装？（必须在 iOS 5 和 iOS 6 中工作）。

*我正在尝试在临时 iPad 应用程序中实现自动更新功能（而不是通过 App Store）。所以当应用程序检测到有新的更新时，它会提示用户安装新的更新，这就是我需要这个功能的地方。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T04:57:45.113

好的。事实证明。iOS 6 的模拟器不理解此 url `itms-services://?action=download-manifest`，因此无法正常工作。

在运行 iOS 6 的物理 iPad 上测试后一切正常。

# html - Chrome 和 IE 中的按钮区别

> ID：13180259
> 
> 赞同：0
> 
> 时间：2012-11-01T15:26:37.047
> 
> 标签：html, internet-explorer, google-chrome, internet-explorer-9

所以我有一个网站 - 在输入客户/保存客户我有一些按钮 - 它们在 IE 9 中正确显示，但在 Chrome 中不正确（功能在两者中都可以正常工作） - 它只是为了外观我想让它看起来正确同时。

所以这就是它的外观（IE 9）

![在此处输入图像描述](../Images/99d77b24bb96df6d5fcaa45e14b95aaf.png)

这就是它在 Chrome 中的样子（不正确）

![在此处输入图像描述](../Images/ebe07da2f7ff17d5e11e99d4ec27be93.png)

我一直在下面的源代码中尝试不同的东西——但是 havenet 让它在 Chrome 和 IE 中都可以工作，所以也许有人能发现我遗漏的东西。

```
 <div class="PanelPadd" style="margin-top: 10px; text-align: right; padding: 5px; height:25px;">
                            <div id="Div8" style="text-align: right; float: right;">
                                <table>
                                    <tr>
                                        <td valign="middle" style="padding-right: 5px;">
                                            <a id="FindCorrAddress" href="javascript:pageSMCustomerCreate.doRequest(2)">Find Addresses</a></td>
                                        <td valign="middle" style="padding-right: 5px;">
                                            <a id="ClearCAddress" href="javascript:pageSMCustomerCreate.doClearCAddress()">Clear</a></td>
                                        <td valign="middle" style="padding-right: 5px;">
                                            <asp:ImageButton ID="ImageButton4" ImageUrl="./images/buttons/SaveCustomer.gif" runat="server"
                                                OnClick="OnSaveCustomer" /></td>
                                    </tr>
                                </table>
                            </div>
                        </div> 
```

在任何具有类 PanelPadd 的样式表中都没有什么特别之处 - 设置了背景颜色并设置了边框，如下所示。

```
.PanelPadd    { background-color:#EFEFEF; border:solid #AAAAAA 1px; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:38:47.357

您没有显示足够的样式代码来分析问题。但我假设您将某个宽度设置为`FindCorrAddress`and `ClearCAddress`。

由于最小的字体渲染差异，或舍入错误，甚至可能是盒子模型的差异（您是否在兼容性视图中运行 IE9？），适合一个浏览器的特定宽度可能不适合另一个浏览器。

最好的解决方案是完全不设置宽度，让内容流动并定义容器本身的宽度。

另外，请删除`<table>`. 使用表格进行布局是非常糟糕的风格并且自找麻烦。

# javascript - 使用 DataTables 识别过滤的行

> ID：13180260
> 
> 赞同：0
> 
> 时间：2012-11-01T15:26:41.777
> 
> 标签：javascript, datatables

我继承的一个使用 DataTables 的项目及其过滤器功能存在一些问题。

问题是在填充表格的主函数中，它具有以下代码：

```
var rowPos = mainTable.fnAddData(tableData, false)[0];
var rowData = mainTable.fnSettings().aoData[rowPos];

$(rowData.nTr).attr("id", "UID" + id); // Since the id doesn't always match the row

rowData.ID = id; 
```

现在我知道第三行几乎没有用，除非 fnAddData 的“false”参数设置为“true”。这是因为 HTML 元素在设置为 'false' 时实际上并不存在于 DOM 中，因此无法设置 'id' 属性。

我不能使用'true'，因为当向表格添加数百行时，它将在大约 4 秒内呈现表格。但是当我使用“假”时，它几乎会立即呈现表格（不到一秒）。所以在 'fnAddData()' 中使用 'true' 标志甚至不是一个选项。

我看到最后一行似乎在做某事，但我试图在 DataTables 网站上找到相关文档，但似乎找不到任何有价值的东西。我假设它允许某人将 UID（唯一记录 ID）绑定到实际的行号，这是想要的。

我的代码还使用了“fnRowCallback”，此时它尝试设置“id”属性，例如：

```
var id = mainTable.fnSettings().aoData[tablePos].ID;
$(row).attr("id", "UID" + id); // Since the id doesn't always match the row 
```

主要问题是它似乎不起作用！如果我应用表过滤器并有意过滤掉除应为“UID”3 的记录之外的所有记录，在“fnRowCallback”中，我的“id”变量设置为 0。因此属性集始终为“UID0”并导致各种不好的参考。

有没有办法将我的数据库记录 ID 正确分配给表行？然后稍后再引用它们，例如在“fnRowCallback”函数中？还是有人设法弄清楚了其他一些技巧？

提前感谢您的时间和回复！

**更新：2012.11.01 12:33** - 我已经根据迄今为止的各种发现在下面添加了一个答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:46:43.573

我一直在做一些挖掘，到目前为止，这是我的结论......

使用我在这个 SO[页面](https://stackoverflow.com/questions/4552944/displaying-objects-in-ie-developer-tools-console)上找到的 JavaScript 对象检查（通过“goreSplatter”），我能够转储各种 DataTables 对象。

正如预期的那样，我意识到我的“rowData”对象是一个小容器。并意识到“rowData.ID”属性最初并不存在于这个数据结构中。我猜应用程序开发人员自己插入了它，这是有道理的。

从“fnRowCallback()”函数中，我进行了相同的对象检查，试图找到我初始化“ID”的初始“rowData”。我发现它如下：

```
var rowData = mainTable.fnSettings().aoData[tablePos]; 
```

当我转储“rowData.ID”的值时，我意识到我的“ID”值已按预期正确设置。

当我做过滤器时会出现问题！由于某种原因，“rowData.ID”似乎总是“0”。似乎 DataTables 获取了对象的副本，但没有设置任何它不知道的属性，因此结果为“0”。

所以这绝对是一个错误（至少在我看来）！我将联系 DataTables 人员，了解他们希望用户如何将自定义应用程序数据绑定到他们的行，并查看他们是否也可以在过滤过程中设置这些属性。

稍后我将报告任何进一步的发现。

# c# - 当另一个应用程序使用实体框架 4.1 和 DBContext 更改数据库时的异步通知

> ID：13180262
> 
> 赞同：2
> 
> 时间：2012-11-01T15:26:47.357
> 
> 标签：c#, entity-framework, dbcontext

我有一个 REST Web 服务，用于与多个客户端进行通信、某种聊天，但我必须在客户端通信后立即对数据库进行所有更改，然后在进行更改时通知所有其他客户端.

我基本上收到了一个 POST 请求，并且我必须在修改条目后立即回复。

现在我让我的线程休眠 1 秒，然后每秒为每个请求重新创建上下文，如果数据库发生更改，我发送响应。这对我来说看起来很丑，我想知道当数据库中的特定条目被修改时是否有一些事件或异步方法需要通知？

谢谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:48:30.080

如果您使用的是 MS SQL Server，您可能会成功使用 Sql Dependencies。这是一个简短教程的链接： [C# & SqlDependency - Monitoring your database for data changes](http://dotnet.dzone.com/articles/c-sqldependency-monitoring)。

Microsoft 的 Notification Services 继任者[SQL Server 2008 R2 – 复杂事件处理 (CEP) 技术](http://www.microsoft.com/sqlserver/2008/en/us/R2-complex-event.aspx)也可能满足您的目的，但我对它一无所知，只知道网页上的内容。

# php - 填充一个容器（一个 div）直到它被填满

> ID：13180264
> 
> 赞同：1
> 
> 时间：2012-11-01T15:26:50.690
> 
> 标签：php, javascript, dynamic

我有一个字符串数组。

```
$x=array('blabla1', 'blabla2', ...); 
```

我想`div`用字符串填充一个块，`$x`直到我填满为止`div`。我的高度`div`是固定的`$h`。

例如，我想放入我的类似的`div`东西

```
<div>
     <ul>
           <li> 'blabla1' </li>
           <li> 'blabla2' </li>
           <li> 'blabla3' </li>
           ...
      </ul>
</div> 
```

直到满为止。

任何猜测如何做到这一点？Javascript 还是 php？谢谢 ：）

**为什么我要这样做：**我的网页上有一个带有建议链接的侧 div。我想在此侧 div 中放置尽可能多的建议链接。

可乐

PS：随意编辑我的帖子（例如，添加标签）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:33:00.400

Because you already know the fixed height value of your div. You can also add a fixed height value to the li elements and then from php do the following: I am assuming that you already set the fixed height values for the div and ul in your css.

```
 $div_height = 500px;
    $li_height = 21px;

    echo '<div id="mydiv"><ul id="myul">';

    for($i=0;$i<=$div_height;$i+=$li_height){
       echo "<li>"."your content here"."</li>";
    }

echo '</ul></div>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:35:16.823

仅使用 php 来执行此操作将是有问题的。

我的建议是结合使用溢出隐藏 css 属性和 jquery 插件来做到这一点：

[dotdotdot](http://dotdotdot.frebsite.nl/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T15:36:13.143

您必须以任何固定的可测量单位（例如 px）确定 div 的高度。然后调整每个列表项的高度。通过除以 div 的高度/列表项的高度，您将知道所需的列表项的数量，例如 n，因此在您的 div 中执行以下操作：

```
<div class="define-height">
<ul>
<?php
for ($i = 0; $i < $n; $i++){
?>
<li><?php echo $x[$i];?></li>
<?php } ?>
<ul>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T06:35:36.130

从评论：

*   任何你不能只使用溢出的理由：隐藏？– 马克 B

*   然后你必须通过javascript来做。从 javascript 是创建后获得 dom 元素高度的唯一方法。也许这个 div 必须通过一个只返回一个 li 元素的 ajax 调用来动态填充 php。然后在 javascript 中计算是否有足够的空间来存储 li 元素，在这种情况下进行下一次调用，直到没有更多可用空间。您还可以在您的 div 中设置溢出：隐藏，但这只会隐藏 div 之外的内容。– 斜线28cu

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T15:48:10.577

使用 jQuery 客户端：

```
while( $("#divId").height() > $("#ulId").height() ) {
    $("#ulId").append("<li>blabla1</li>");
} 
```

# sql - Devexpress 钻取报告 - 将每个案例显示的记录数限制为 1

> ID：13180265
> 
> 赞同：0
> 
> 时间：2012-11-01T15:26:52.110
> 
> 标签：sql, devexpress, xtrareport

我正在尝试制作一个钻取报告，其中用户单击一年，然后获得另一个屏幕，显示该年的月度数据。我的代码中出现错误，因为“EcoYear”不在我绑定主报告的存储过程中。我可以将具有 EcoYear 的表添加到存储过程中，但随后我会为每个案例打印 15 页。（每个案例有 15 年）

这是我调试时出现错误的代码：

```
using System;
using System.Data;
using System.Drawing;
using System.Windows.Forms;
using System.Collections;
using System.ComponentModel;
using DevExpress.XtraReports.UI;
using System.Drawing.Printing;

namespace StdEco
{
    public partial class StdEcoRpt : DevExpress.XtraReports.UI.XtraReport
    {
        public StdEcoRpt()
        {
            InitializeComponent();
        }

        private void xrLabel1_BeforePrint(object sender, PrintEventArgs e)
        {
            ((XRLabel)sender).Tag = GetCurrentRow();
        }

        private void xrLabel1_PreviewClick(object sender, PreviewMouseEventArgs e)
        {
            DetailReport detailReport = new DetailReport();
            detailReport.CaID.Value = (int)((DataRowView)e.Brick.Value).Row["CaseID"];
            detailReport.EYear.Value = (int)((DataRowView)e.Brick.Value).Row["EcoYear"];
            detailReport.ShowPreviewDialog();
        }

        private void xrLabel1_PreviewMouseMove(object sender, PreviewMouseEventArgs e)
        {
            Cursor.Current = Cursors.Hand;
        }

    }
} 
```

错误是：列“EcoYear”不属于表 StdEcoMonthlyHeaderFooter。

我从现在开始获得 EcoYear 的表是 StdEcoMonthlyData。

当我将 EcoYear 添加到 StdEcoMonthlyHeaderFooter 存储过程时，我要么需要能够将该代码连接到 StdEcoMonthlyData 存储过程，要么以某种方式仅在每种情况下打印一条记录。

谢谢您的帮助。

# javascript - 如何在不拖动的情况下触发拖动（）

> ID：13180268
> 
> 赞同：3
> 
> 时间：2012-11-01T15:26:59.113
> 
> 标签：javascript, jquery, jquery-ui, draggable

我正在使用 jQuery UI 或更具体的可拖动功能。是否可以触发 drag() 并告诉元素移动/拖动某处而不自己动手？像 el.dragTo(position) 这样的东西。

提前致谢！

编辑：我有点使用可拖动功能作为调整大小。我在其他两个 div 之间有一个 1px 的薄 div。当我在任一方向拖动 div 时，我会根据拖动拖动 div 的数量调整其他两个 div 的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:29:48.820

使用 jQuery`animate()`

```
$(element).animate({
    top: '10px',
    left: '30px'
}); 
```

演示：http: [//jsfiddle.net/maniator/BXVx2/](http://jsfiddle.net/maniator/BXVx2/)

# api - Liferay API 中缺少 com.liferay.mozilla

> ID：13180270
> 
> 赞同：2
> 
> 时间：2012-11-01T15:27:05.933
> 
> 标签：api, liferay, mozilla

我需要使用这些包中的一些类

1.  com.liferay.mozilla.javascript.context
2.  com.liferay.mozilla

和 com.liferay.mozilla.javascript.ScriptableObject 类，但我不知道它们被包装在哪个 jar 中，当然 Liferay 支持完全沉默。

所以如果有人遇到这个问题并且有解决我的问题的方法，请回答我:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T17:32:13.300

JAR 文件称为“liferay-rhino.jar”，但我无法在 Liferay Portal 6.0.6 之后的版本中找到它。因此，如果您想在 portlet 中使用它，您应该单独下载它。

在 5.2 和 6.0.6 版本中，它位于文件夹中`ROOT/WEB-INF/lib`。

# java - 使用 WSGEN 生成工件时“缺少 SEI”

> ID：13180271
> 
> 赞同：4
> 
> 时间：2012-11-01T15:27:07.413
> 
> 标签：java, web-services, jaxb, jax-ws, wsgen

我是 Web 服务开发的初学者。我想使用 wsgen.exe 生成工件。

这是我的代码：

```
 package com.calc.ws;

  import javax.jws.WebService;

  @WebService
  public class Calculator {
      public int add(int a, int b) {
          return (a + b);
      }
      public int sub(int a, int b) {
          return (a - b);
      }
  } 
```

我面临的问题是当我想用这个命令（一个衬里）从命令行生成工件时：

```
C:\Program Files\Java\jdk1.7.0_05\bin\wsgen 
     -cp "c:\users\mico\workspaceSOA\calcWS\src\com.calc.ws.Calculator" 
     -verbose 
     -d "C:\users\mico\classes\" 
```

我收到此错误：

```
Missing SEI. 
```

这是什么原因造成的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T21:03:03.120

Wsgen.exe 的调用方式如下：

```
WSGEN [options] <SEI> 
```

它[读取 Web**服务端点实现**类 (SEI)](http://docs.oracle.com/javase/6/docs/technotes/tools/share/wsgen.html)并生成 Web 服务部署和调用所需的所有工件。

在您发布的命令行中，我只看到选项，您没有指定 SEI。并且从这里消息“Missing SEI”（即您没有提供强制性命令行参数）。

我不知道你的确切设置，但如果我有这个结构：

```
c:\temp
├───classpath
│   └───com
│       └───calc
│           └───ws
│               └───Calculator.class
└───generated 
```

如果我运行（在一行上）：

```
wsgen -cp c:\temp\classpath 
      -keep 
      -s c:\temp\generated 
      com.calc.ws.Calculator 
```

我会上课，但如果我只跑：

```
wsgen -cp c:\temp\classpath 
      -keep 
      -s c:\temp\generated 
```

我会得到：

```
Missing SEI 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T18:20:24.610

```
The error "Missing SEI" means Service Endpoint Interface is missing. Please create an interface for your service. please refer below code:

Service Interface:
package com;
import javax.jws.WebService;

@WebService
public interface Calculator {
    public int add(int a, int b);
    public int sub(int a, int b);
}

Service Class implementing Service Interface:
package com;

import javax.jws.WebService;

@WebService
public class CalculatorImpl implements Calculator {
    public int add(int a, int b) {
        return (a + b);
    }
    public int sub(int a, int b) {
        return (a - b);
    }
}

Command which i have used is:
>wsgen -cp . com.CalculatorImpl -keep -verbose -d ./stub

Before executing above please make sure that destination folder stub is already created.

Please try and let me know if still you are facing issue in this... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-12T09:17:37.477

就我而言，我正在从 JAX-RPC 迁移到 JAX-WS，并且更改了包名称。通过更改它，我将不得不更改 xml 文件中的所有映射，例如在 webservices.xml 中。如果您收到**“Missing SEI”**错误，一个简单的解决方案是查找并删除该**`webservices.xml`**文件，您应该很好地使用 JAX-WS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-23T07:09:27.223

对于我的情况。这项工作。

1.  cd {project_path}/bin
2.  "C:\Program Files\Java\jdk1.7.0_05\bin\wsgen" -cp 。com.calc.ws.Calculator -verbose -d "C:\users\mico\classes\"
3.  完毕。

# c++ - 如何将登录用户的域\用户获取到当前会话

> ID：13180272
> 
> 赞同：0
> 
> 时间：2012-11-01T15:27:22.280
> 
> 标签：c++, windows, wtsapi32

我正在寻找一种方法来获取登录到我的进程运行的会话的用户的用户名和域。我不能依赖我的进程令牌信息，因为它是从不同用户的令牌创建的，并且包含不正确的信息。

我更喜欢不依赖WTS服务的方式。

我尝试使用[GetUserObjectInformation](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28%22WINUSER/GETUSEROBJECTINFORMATION%22%29;k%28GETUSEROBJECTINFORMATION%29;k%28SOLUTIONITEMSPROJECT%29;k%28DevLang-%22C%2b%2b%22%29;k%28TargetOS-WINDOWS%29&rd=true)然后[LookupAccountSid](http://msdn.microsoft.com/en-us/library/aa379166%28VS.85%29.aspx)，但 LookupAccountSid 返回 ERROR_NONE_MAPPED 因为“它发生在没有相应帐户名称的 SID 上，例如标识登录会话的登录 SID。”

```
bool GetCurrentUserAndDomain(OUT wstring & user, OUT wstring & domain)
{
bool ret = false;

HWINSTA hWinStation = GetProcessWindowStation();
if (hWinStation == NULL) {
    //LOG_ERROR(L"Failed to GetProcessWindowStation");
    return false;
}

SID * pSID = NULL;
USEROBJECTFLAGS uof = {4};
DWORD requiredSize;

GetUserObjectInformation(hWinStation, UOI_USER_SID, NULL, NULL, &requiredSize);

pSID = (SID*) new BYTE[requiredSize];

if (!GetUserObjectInformation(hWinStation, UOI_USER_SID, pSID, requiredSize, NULL))
{
    //LOG_ERROR(L"Failed to GetUserObjectInformation2");
    goto end;
}

SID_NAME_USE sidType;
DWORD dwUserNameSize = 64, dwDomainNameSize = 64;
wchar_t szUserName[64], szDomainName[64];
szDomainName[0] = '\0';
szUserName[0] = '\0';

if (LookupAccountSid(NULL, pSID, szUserName, &dwUserNameSize, szDomainName, &dwDomainNameSize, &sidType))
{
    ret = true;
    user = szUserName;
    domain = szDomainName;
}

if  (GetLastError() == ERROR_NONE_MAPPED)
{
    // the SID is a Logon sid
}
end:
delete [] pSID;
return ret;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:18:53.233

您可以使用 GetUserNameEx API。 [http://msdn.microsoft.com/en-us/library/windows/desktop/ms724435(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724435%28v=vs.85%29.aspx)

# android - 最终程序不显示地图。为什么？

> ID：13180274
> 
> 赞同：-1
> 
> 时间：2012-11-01T15:27:38.500
> 
> 标签：android, apk

> **可能重复：**
> [Google 地图可以在模拟器上显示，但不能在 Android 设备上显示](https://stackoverflow.com/questions/5231830/google-map-can-be-displayed-on-emulator-but-not-in-android-device)

我想获得最终版本的 .apk 文件，但是当我在手机上安装程序时，程序不显示地图，但是当我在 eclipse 中运行程序时，程序运行正常。我想，也许这个程序没有地图库。问题是什么？我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:34:14.960

It's because you are deploying using the Google Maps Api key for debug, not for release.

You should read [https://developers.google.com/maps/documentation/android/mapkey](https://developers.google.com/maps/documentation/android/mapkey).

Hope it helps, and if you need more helps let me know.

Steps to generate apiKey for release:
1\. Build Keystore - from eclipse > right click on project and then android tools > Export Signed Application Package 2\. Open cmd and write

```
c:\Program Files (x86)\Java\jre7\bin > keytool -v -list -alias <your alias> -keystore <path to keystore> 
```

where < your alias > is one used when generating the keystore
< path to keystore > to path where you have placed the keystore
This command can be different for you.

You will get the MD5 code needed for generating the api key.

Hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:36:54.013

谢谢我写了这个，cmd不写MD5！我把 pictur cmd 放在下面。 ![命令](../Images/6d80c471705e3bf95af73fb4bcb13b83.png)

# c# - 在 Windows 7 事件日志中，什么是“源”？

> ID：13180276
> 
> 赞同：1
> 
> 时间：2012-11-01T15:27:45.520
> 
> 标签：c#, .net, windows-7, event-log

我正在用 C# 编写一个简单的应用程序并将一些内容写入事件日志。我已经宣布了“来源”的名称，但我真的不知道这是在做什么。有人可以将我链接到一些阅读或给我一个非常高层次的解释我所命名的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:29:51.877

它是事件的发起者。应该是您的应用程序名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T15:30:38.063

Source 属性应该定义记录事件的内容。它通常是您的应用程序的名称，但如果您有大量的东西，它可能是您应用程序中的某个特定模块。

[顺便说一句， MSDN](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.source%28v=vs.100%29.aspx)始终是寻找此类内容的好地方。

# jquery - jQuery：查找具有特定属性的多个元素类型

> ID：13180279
> 
> 赞同：0
> 
> 时间：2012-11-01T15:27:51.243
> 
> 标签：jquery

我目前有以下代码：

```
$('input[data-geo], select[data-geo]').doSomething() 
```

理想情况下，我只想声明`[data-geo]`一次属性。不确定这是否可能，但大致如下：

```
$('(input, select)[data-geo]') 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:41:27.263

您可以使用以下内容：

```
​$('[data-geo]')​​​.​filter(':input')​ 
```

在这个小提琴上测试成功：http: [//jsfiddle.net/cHJ6S/](http://jsfiddle.net/cHJ6S/)

有关详细信息，请参阅 jQuery 网站上的以下页面：http: [//api.jquery.com/input-selector/](http://api.jquery.com/input-selector/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:38:52.130

您可以[`.filter()`](http://api.jquery.com/filter/)用于此类情况

```
$('input, select').filter('[data-geo]').doSomething() 
```

这将仅选择具有属性的`input`and`select`元素`[data-geo]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T15:34:42.537

你也可以做

```
$('[data-geo]').doSmth(); 
```

但是，这意味着您在每个具有此属性的元素上调用 doSmth() ，而不仅仅是`select`and `input`。

# c# - 为什么检测到更改的对象属性但未检测到刷新对象

> ID：13180289
> 
> 赞同：1
> 
> 时间：2012-11-01T15:28:35.403
> 
> 标签：c#, wpf, binding, .net-4.5

我一直在玩数据绑定和使用 INotifiedProperty 接口（包括新的 .Net 4.5 CallerMemberName 属性）。

一切正常，但我不明白为什么更新对象的属性会刷新它绑定的标签，但刷新对象本身不会重新刷新标签。

例如，如果我有以下窗口：

```
<Grid Name="TestGrid">
    <!-- Grid definitions here -->

    <Label Grid.Column="0" Grid.Row="0">The value is :</Label>
    <Label Grid.Column="1" Grid.Row="0" Content="{Binding TestVal1}"/>

    <Button Grid.Column="0" Grid.Row="1" Click="Button_Click_1">Refresh</Button>
    <Button Grid.Column="1" Grid.Row="1" Click="Button_Click_2">New class instance</Button>
</Grid> 
```

背后有以下代码：

```
public MainWindow()
    {
        InitializeComponent();

        TestGrid.DataContext = TestClass1;
    }

    public TestClass TestClass1 = new TestClass();

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        TestClass1.ChangeTestVal1();
    }

    private void Button_Click_2(object sender, RoutedEventArgs e)
    {
        TestClass1 = new TestClass();
    } 
```

绑定以下类：

```
public class TestClass : INotifyPropertyChanged
{
    public TestClass()
    {
        ChangeTestVal1();
    }

    public event PropertyChangedEventHandler PropertyChanged;

    internal void OnPropertyChanged([CallerMemberName] String caller = null)
    {
        var handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(caller));
        }
    }

    private string _TestVal1;
    public string TestVal1
    {
        get { return _TestVal1; }
        set
        {
            if (value != _TestVal1)
            {
                _TestVal1 = value;
                OnPropertyChanged();
            }
        }
    }

    public void ChangeTestVal1()
    {
        TestVal1 = "TestVal1 = " + DateTime.Now.ToString("dd-MMM-yyyy HH:mm:ss");
    } 
```

结果是单击“刷新”按钮有效，而单击“新建类实例”则无效。

我的问题是，我知道我可以将“TestGrid.DataContext = TestClass1”添加到第二个按钮的代码中以使其工作，但它肯定应该检测到 TestClass 的实例在刷新时发生变化？我是否错误地设置了绑定？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T15:33:26.397

您正在分配 TestGrid.DataContext = TestClass1; 将变量的对象引用更改为不同的对象不会更改 TestGrid 的 DataContext 属性中的对象引用。查看 OOP 的基础知识以获取更多详细信息

编辑：我的意思是，做 TestClass1 = new TestClass(); 不会改变网格的 Datacontext 仍然是以前的对象实例这一事实。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T15:34:06.157

发生这种情况是因为数据上下文引用了 TestClass1。您正在做的是在未绑定到您的 DataContext 的 TestClass1 中分配一个新引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T15:36:16.997

绑定的实际更新通过以下方式触发：

```
OnPropertyChanged(); 
```

这反过来在您设置属性时触发，而不是在您设置整个类时触发。因此，正如预期的那样，设置类在标签中没有可见的效果。

# javascript - AngularJS对Controller和rootScope的多种使用

> ID：13180293
> 
> 赞同：19
> 
> 时间：2012-11-01T15:28:47.597
> 
> 标签：javascript, data-binding, controller, angularjs

我想在 2 个单独的 HTML 元素上使用控制器，并在编辑一个列表时使用 $rootScope 使 2 个列表保持同步：

**HTML**

```
<ul class="nav" ng-controller="Menu">
    <li ng-repeat="item in menu">
        <a href="{{item.href}}">{{item.title}}</a>
    </li>
</ul>

<div ng-controller="Menu">
    <input type="text" id="newItem" value="" />
    <input type="submit" ng-click="addItem()" />
    <ul class="nav" ng-controller="Menu">
        <li ng-repeat="item in menu">
            <a href="{{item.href}}">{{item.title}}</a>
        </li>
    </ul>    
</div> 
```

**JS**

```
angular.module('menuApp', ['menuServices']).
    run(function($rootScope){
        $rootScope.menu = [];
    });

angular.module('menuServices', ['ngResource']).
    factory('MenuData', function ($resource) {
        return $resource(
            '/tool/menu.cfc', 
            {
                returnFormat: 'json'
            },
            {
                getMenu: {
                    method: 'GET',
                    params: {method: 'getMenu'}
                },
                addItem: {
                    method: 'GET',
                    params: {method: 'addItem'}
                }
            }
        );
    });

function Menu($scope, MenuData) {

    // attempt to add new item
    $scope.addNewItem = function(){
        var thisItem = $('#newItem').val();

        MenuData.addItem({item: thisItem},function(data){
            $scope.updateMenu();
        });
    }   

    $scope.updateMenu = function() {
        MenuData.getMenu({},function(data){
            $scope.menu = data.MENU;
        });         
    }

    // get menu data
    $scope.updateMenu();
} 
```

当页面加载时，`UL`和都`DIV`显示来自数据库的正确内容，但是当我使用该`addNewItem()`方法时，只有`DIV`更新。

`$scope.menu`有没有更好的方法来构建我的逻辑，或者我可以做一些事情来确保`UL`同时更新？

这是一个类似的例子：http: [//plnkr.co/edit/2a55gq](http://plnkr.co/edit/2a55gq)

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-01T16:14:01.073

我建议使用保存菜单及其方法的服务。该服务将更新控制器引用的菜单。

在这里看到一个工作的 plunker：http: [//plnkr.co/edit/Bzjruq](http://plnkr.co/edit/Bzjruq)

这是示例 JavaScript 代码：

```
angular
 .module( 'sampleApp', [] )
 .service( 'MenuService', [ '$rootScope', function( $rootScope ) {

   return {
      menu: [ 'item 1' ],
      add: function( item ) {
        this.menu.push( item );
      } 
   };

 }])
 .controller( 'ControllerA', [ 'MenuService', '$scope', function( MenuService, $scope ) {

   $scope.menu = MenuService.menu;

   $scope.addItem = function() {
    MenuService.add( $scope.newItem );  
   };

 }]); 
```

以及示例 Html 页面：

```
<!DOCTYPE html>
<html>

  <head lang="en">
    <meta charset="utf-8">
    <title>Custom Plunker</title>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js"></script>
    <script src="app.js"></script>
  </head>

  <body ng-app="sampleApp">

    <div ng-controller="ControllerA">
      <ul>
        <li ng-repeat="item in menu">{{item}}</li>
      </ul>
      <input type="text" ng-model="newItem" /><input type="submit" ng-click="addItem()" />
    </div>

    <div ng-controller="ControllerA">
      <ul>
        <li ng-repeat="item in menu">{{item}}</li>
      </ul>
    </div>

  </body>

</html> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T15:53:07.250

编辑：

这是更新版本[plunker](http://plnkr.co/edit/N0drzW?p=preview)。它适用于两个控制器。

主要思想是使用服务和广播将数据与指令同步。

```
app.service('syncSRV', function ($rootScope) {
    "use strict";
    this.sync = function (data) {
        this.syncData = data;
        $rootScope.$broadcast('updated');
    };
});
app.controller('MainCtrl1', ['$scope', function ($scope) {
    }])
    .controller('MainCtrl2', ['$scope', function ($scope) {
    }]);
app.directive('sync',function (syncSRV) {
    "use strict";
    return {
        template: '<div><input ng-model="syncdata" type="text" /></div> ',
        controller: function ($scope, $element, $attrs) {
            $scope.$watch('syncdata', function (newVal, oldVal, $scope) {
                syncSRV.sync(newVal);
            }, true);
        }
    };
}).directive('dataview', function (syncSRV) {
    "use strict";
    return {
        template: '<div>Sync data : {{data}}</div> ',
        controller: function ($scope, $element, $attrs) {
            $scope.$on('updated', function () {
                $scope.data = syncSRV.syncData;
            });
        }
    };
});

<div ng-controller="MainCtrl1">
    <fieldset>
        <legend> Controller 1</legend>
        <div dataview></div>
        <div sync></div>
    </fieldset>
</div>
<div ng-controller="MainCtrl2">
    <fieldset>
        <legend> Controller 2</legend>
        <div dataview></div>
        <div sync></div>
    </fieldset>
</div> 
```

这是我将为这种情况做的事情。

我将为

```
<ul class="nav" ng-controller="Menu">
        <li ng-repeat="item in menu">
            <a href="{{item.href}}">{{item.title}}</a>
        </li>
</ul> 
```

所以一旦项目更新，它将在两个指令中更新。

[小例子](http://plnkr.co/edit/N0drzW?p=preview)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-29T13:29:50.337

我只想更新和简化所选答案。看来您可以通过删除此行来减少这种情况： `$rootScope.$broadcast( 'MenuService.update', this.menu );`

和这个块：

```
$scope.$on( 'MenuService.update', function( event, menu ) {
 $scope.menu = menu;
}); 
```

原因是，我们已经在使用一个 Service，它基本上绑定了两个相同的控制器，所以不需要使用 $rootScope.$broadcast 并添加一个 observable。

在这里工作： [http ://plnkr.co/edit/1efEwU?p=preview](http://plnkr.co/edit/1efEwU?p=preview)

您只需要链接服务，当我重构代码时，我能够将其减少到 13 行而不是 22 行。

# php - 如果帐户类型 x 包括 y？

> ID：13180297
> 
> 赞同：0
> 
> 时间：2012-11-01T15:28:58.217
> 
> 标签：php, sql

我试图将一组用户引导`Basic`到一种类型的个人资料页面`mod_profile.php`，将另一组用户引导`upgraded`到不同的个人资料页面`mod_account.php`。到目前为止，我有这个，但它似乎遇到了麻烦。当我打开`mod_account.php`它无法从`mod_profile`其他个人资料页面重新声明某些功能时，我遇到了错误，但我不明白为什么，我只想为每种用户类型加载一个页面。

有人可以告诉我我做错了什么吗？

我的`profile.php`页面：

```
 <?php
    $page_title = "Profile";
    include('includes/header.php');
    include ('includes/mod_login/login_form2.php');     

    // GET PROFILE ID FROM URL
    if (isset ($_GET['id'])) {
        $profile_id = $_GET['id'];
    }
    ?>

    <?php
    $user_info_set = get_user_info();
    if (!$user = mysql_fetch_array($user_info_set)) {
        include ('includes/mod_profile/mod_noprofile.php');
    } else if (!isset($profile_id)) {
        include("includes/mod_profile/mod_noprofile.php");
    }

    $profile_info_set = get_profile_info();
    while ($profile = mysql_fetch_array($profile_info_set)) 

    if (isset ($profile_id))
    if ($user['account_status'] == "Active") {
        include("includes/mod_profile/mod_profile.php");
    }

    $profile_info3_set = get_profile_info3();

    while ($profile = mysql_fetch_array($profile_info3_set)) 
        if (isset ($profile_id))
        if ($user['account_type'] == "Basic

    ----------

    ") {
        include("includes/mod_profile/mod_account.php");
    }
    ?>
    <script type="text/javascript" src="assets/js/jquery.prettyPhoto.js"></script>
    <?php include('includes/footer.php');?> 
```

我定义的功能代码：

```
 // profile functions
        function get_user_info() {
            global $connection;
            global $profile_id;
            $query = "SELECT *
                        FROM ptb_users
                        WHERE id = \"$profile_id\"
                        AND account_status = \"Active\" ";
            $user_info_set = mysql_query($query, $connection);
            confirm_query($user_info_set);
            return $user_info_set;
        }

function get_profile_info() {
            global $connection;
            global $profile_id;
            $query = "SELECT *
                        FROM ptb_profiles, ptb_users
                        WHERE ptb_profiles.user_id = \"$profile_id\"
                        AND account_type = \"Basic\"
                        AND ptb_profiles.user_id = ptb_users.id";
            $profile_info_set = mysql_query($query, $connection);
            confirm_query($profile_info_set);
            return $profile_info_set;

            }

            function get_profile_info3() {
            global $connection;
            global $profile_id;
            $query = "SELECT *
                        FROM ptb_profiles, ptb_users
                        WHERE ptb_profiles.user_id = \"$profile_id\"
                        AND account_type = \"Upgraded\"
                        AND ptb_profiles.user_id = ptb_users.id";
            $profile_info3_set = mysql_query($query, $connection);
            confirm_query($profile_info3_set);
            return $profile_info3_set;

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:24:42.367

好的，所以您的问题是您有时会两次加载同一个文件并重新定义函数。PHP 对此有一个解决方案:) [http://php.net/manual/en/function.include-once.php](http://php.net/manual/en/function.include-once.php)

```
include_once "functions.php" 
```

这意味着在加载任何页面时，functions.php 只会在尚未加载的情况下加载。

让我知道这是否有助于解决您的问题。第二个代码块是什么文件？

# javascript - 如何使用 Jquery 支持检测 Firefox？

> ID：13180299
> 
> 赞同：0
> 
> 时间：2012-11-01T15:29:03.800
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何使用 JQuery.support 检查浏览器是否为 Firefox？](https://stackoverflow.com/questions/1088934/how-do-i-use-jquery-support-to-check-if-the-browser-is-firefox)

大家好，我正在尝试使用 Jquery 支持属性来检测 Firefox 浏览器，但我不知道如何才能做到这一点：（
例如，我知道如何检测浏览器是否支持不透明度（`jQuery.support.opacity`），但我想使用类似的东西来检测**仅 Firefox不**使用`$.browser`属性。
谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:33:16.390

This seems to be related to your question: [How do I use JQuery.support to check if the browser is Firefox?](https://stackoverflow.com/questions/1088934/how-do-i-use-jquery-support-to-check-if-the-browser-is-firefox)

You don't use support as a means to check what browser the user is using, but rather if the browser supports the DOM manipulation that you're trying to do.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:35:39.513

可以在没有 jquery 的情况下这样做。您可以使用 if 语句进行检查，如下所示。

```
var ss = document.createElement('style');
if(ss.styleSheet)// checking if ss.styleSheet is supported.
{        
     ss.styleSheet.cssText = content;
} 
```

如果要检查是否支持某个属性，可以通过 if 语句来完成。

# c - 如何附加两个指针？

> ID：13180304
> 
> 赞同：0
> 
> 时间：2012-11-01T15:29:21.293
> 
> 标签：c, ansi

有人可以帮我处理这段代码。我需要将这两个指针附加在一起，但它对我不起作用。该代码不会将指针添加在一起。我认为 *mystrcat 函数是错误的。

```
// stringAdds.cpp : Defines the entry point for the console application.
//

char *mystrcat(char *s, char *p);

int _tmain(int argc, _TCHAR* argv[])
{
    char myChar = 0;
    int i = 0;

    char *s = (char*) malloc (1);
    char *p = (char*) malloc (1);

    printf("Input s: ");
    while ((myChar=getchar()) != '\n')
    s[i++]=myChar;
    s[i]='\0';
    //scanf("%s", &s);
    printf_s("%s", s);

    printf("\nInput p: ");
    i = 0;
    while ((myChar=getchar()) != '\n')
    p[i++]=myChar;
    p[i]='\0';
    printf_s("%s\n", p);

    printf_s("return string: %s", mystrcat(s,p));   
}

char *mystrcat(char *s, char *p)
{
    int sizeOfs = 0;
    int sizeOfp = 0;
    int sizeZero = 0;

    while(*s!='\0')
    {
        sizeOfs++;
    }
    while(*p!='\0')
    {
        sizeOfp++;
    }
    for( int i=0; i<sizeOfp; i++) 
        {
            s[sizeOfs++]=p[sizeZero++];
        }
    s[sizeOfs]='\0';

    return s;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:33:51.290

Since this is probably a homework, here are some hints:

Inside `mystrcat`

*   `while(*s!='\0')` is an infinite loop, because `s` does not change inside loop's body
*   You do not need to know the size of `p`
*   Store `s` so that you could return its value
*   Move `s` to the end of the string using a loop
*   Copy `p`'s characters into what's pointed to by the new `s` pointer until you hit `'\0'`
*   You are done

Outside `mystrcat`

*   Your `mystrcat` function assumes that `s` has enough space to store all characters of `s`, all characters of `p`, and a null terminator. Your code `malloc`s the space enough to hold just the null terminator. You need to change the logic to provide more space.
*   Everything that you `malloc` must be `free`d.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:34:36.903

您的 malloc 只有 1 个字节，但您可能将许多字符放入 *s 和 *p。在将它们放入数组之前，您至少需要为每个字符存储空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T15:33:38.277

Did you mean just this? I think there's some missing de-referencing in your example.

```
char *strcat (char *dest, const char *src)
{
char *dp;
char *sp = (char *)src;

if ((dest != NULL) && (src != NULL))
{
    dp = &dest[strlen(dest)];

    while (*sp != '\0')
    {
        *dp++ = *sp++;
    }
    *dp = '\0';
}
return dest;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T15:33:51.820

Correct code:

```
char *ss=s;
while(*ss!='\0')
{
    sizeOfs++; ss++;
}
char *pp=p;
while(*pp!='\0')
{
    sizeOfp++; pp++;
} 
```

You basicaly had an infinite loop. I would also malloc bigger size in order to not cause any memory overflows.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T15:58:58.887

Jeniffer，我不得不承认，这看起来和[我之前提到的代码非常相似](https://stackoverflow.com/questions/13165470/appending-strings-with-pointers-using-ansi-c)

但是您缺少一些关键要素。

首先，当我做初始时`malloc()`：

```
char * str1 = malloc(6); // give string 1 some memory 
```

我这样做是为了让我要在字符串中放入足够的内容（该示例中为“hello”）。您正在尝试动态获取字符串，直到看到`'\n'`. 所以如果你想使用这种方法，你必须分配一些“足够大”的东西。

```
char *s = (char*) malloc (1); 
```

这不能“足够大”，因为字符串必须至少有空间容纳一个字符和一个`'\0'`，否则它不是一个字符串，只是一个字符。:)

你真的无法确定什么是“足够大”，所以如果字符串大小没有上限，那么只要抓住一些内存，如果你接近溢出它就会得到更多：

```
char *s = (char*) malloc (50); //That's better, room for some char's 
```

* * *

您错过的第二点，在`mystrcat()`函数中，请参阅我在那里输入的行：

```
// We need more memory for s, it was only made to hold its own string so :
s = realloc(s, length of s + length of p + 1);  // +1 for NULL terminator 
```

您可以[阅读 realloc()](http://www.cplusplus.com/reference/clibrary/cstdlib/realloc/)但基本上它可以为您提供更多内存。当您连接字符串时，您可能需要获得更多内存。这就是计算 和 的大小的意义`a`所在`p`。

* * *

第三点，我给你的伪代码是：

```
while(s's character is not '\0') 
```

你在做什么是行不通的。您需要检查字符串中的字符，`'\0'`例如：

```
while(s[counter] != '\0') 
```

并在你去的时候增加计数器。

# ruby-on-rails - 访问 VPN 上的数据库

> ID：13180305
> 
> 赞同：1
> 
> 时间：2012-11-01T15:29:29.310
> 
> 标签：ruby-on-rails, database, activerecord, heroku, vpn

我的 Rails 3.2 应用程序连接到多个外部服务器，其中一个是 SQL Server 数据库（我使用 ActiveRecord + tinytds 连接到它）。

今天，数据库主机决定必须在他们的 VPN 上访问数据库。我的连接现在失败了。

如何将我的 Rails 应用程序（或只是与此数据库的连接）连接到 VPN，以便我可以访问此数据库？我的应用程序托管在 Heroku 上。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T16:07:41.840

简短的回答：你不能。您将不得不切换主机。

[更长的答案：如果 VPN 软件可用于 linux，理论上您可以使用自定义 buildpack](https://devcenter.heroku.com/articles/buildpack-api)将其提供给 heroku ，然后从您的应用程序中使用它。然而，这是一项相当艰巨的任务。

编辑： j_mcnally 提出了一个很好的观点，我忘记了。buildpack 可能不起作用，因为即使您确实提供了软件，也不太可能创建使其实际工作所需的 tun 或 tap 适配器。

我最后的建议是在 Heroku 基础设施之外的某个地方托管一个代理，然后通过 VPN 访问数据库。也许将它托管在 EC2 上，因为这样您至少可以将代理放在同一个可用区中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:15:00.270

是的，很多用于 linux 的 VPN 软件最终都需要内核扩展等来为 vpn 连接等创建虚拟接口。所以这可能行不通。

# php - 301 将动态重定向到静态 URL - Magento

> ID：13180306
> 
> 赞同：1
> 
> 时间：2012-11-01T15:29:38.523
> 
> 标签：php, .htaccess, magento

对于我的一生以及我多年来使用 .htaccess 的经验，我无法让这个简单的重定向工作......我完全被难住了，所以任何帮助都会很棒；

来自： [http ://www.offices-furniture.co.uk/pp?prod=fridgemaster-desk-fan.html](http://www.offices-furniture.co.uk/pp?prod=fridgemaster-desk-fan.html)

至： [http ://www.offices-furniture.co.uk/fridgemaster-desk-fan.html](http://www.offices-furniture.co.uk/fridgemaster-desk-fan.html)

应该很简单，但是哦不..

我正在使用 magento，拥有自己的专用服务器，因此可以完全访问所有内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:32:57.657

Use plugin Make your transition to Magento go smoothly with this simple yet powerful URL redirect management tool.

[http://www.magentocommerce.com/magento-connect/smooth-move-seo-301-redirect-handler-3958.html](http://www.magentocommerce.com/magento-connect/smooth-move-seo-301-redirect-handler-3958.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:44:10.277

[http://www.mbstrategic.com/02/301-redirects-for-dynamic-urls-to-static-pages-with-htaccess/](http://www.mbstrategic.com/02/301-redirects-for-dynamic-urls-to-static-pages-with-htaccess/)

使用 htaccess 将动态 URL 的 301 重定向到静态页面

htaccess中需要文章id，查看excel表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-05T11:16:18.273

终于在一段时间后触底了。基本上 Magento 干扰了 htaccess 文件，所以我在另一个网站上进行了测试；

[http://www.office-desks.co.uk/solar-cantilever-combi-desks.html](http://www.office-desks.co.uk/solar-cantilever-combi-desks.html) 实际上是从 [http://www.office-desks.co.uk/cat/product.php?prod加载结果=太阳能悬臂组合desks.html](http://www.office-desks.co.uk/cat/product.php?prod=solar-cantilever-combi-desks.html)

现在我有漂亮干净的 URL 哇 :)

这是我的 htaccess 代码，可以帮助某人；

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)\.html$ cat/product.php?prod=$1

RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^(.*)\.php$ cat/cat.php?cat=$1

RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^([^\.]+)$ cat/cat.php?cat=$1 
```

导致问题的magento中的行是这些（直到通配符）；

```
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule (.*) m1_seourls.router.php

RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule (.*) m1_seourls.router.php 
```

# c++ - 在 C++ 中使用 LinkList 处理文件

> ID：13180313
> 
> 赞同：3
> 
> 时间：2012-11-01T15:30:01.043
> 
> 标签：c++, file-io, binaryfiles, file-handling, doubly-linked-list

**问题：**我正在尝试将双向链接列表的对象写入（二进制写入）文件并从中写入。我必须写入对象的完整内容，然后从文件中加载它，并将其存储到新对象中，以按 FIFO 顺序重新创建列表。我认为我写得正确，但我真的不知道如何从文件中加载（读取）它。

记住：我只是想保存和读取`CONTENTS`一个节点，&`NOT POINTERS.`

代码：

```
//template type BOOK class

template<class mytype>
class BOOK      
{
private:
    static int count;   //declaration of static variable to set ID for books
public:
    BOOK<mytype> *next, *prev;  //BOOK type pointers; 'next' to store address of 
next BOOK & 'prev' to store address of previous BOOK
    int ID;         //variable to store ID of a book
    string bookName;//string to store name of a book
    string author;  //string to store name of author of book
    string book_type;//string to store type of a book
    long copies;    //variable to store no. of copies a book
    long price;     //variable to store price of a book
    string status;  //to store status of a book, either its in stock or not
    dynamicQueue<string> book_queue;    //created an object of queueClass as data member of each Book

    BOOK()  //Constructor 0 argument to initialize everything
    {
        count++;    //increment counter
        ID=count;   //assign counter to ID to be ID of newly added book

        next = prev = 0;        //Initializing both pointers to 0

        bookName = "\0";
        author = "\0";
        book_type = "\0";
        copies = price = 0;
        status= "InStock";
    }

    BOOK(BOOK *n =  0, BOOK *p = 0, string book = "\0", string athr = "\0", string buk_type = "\0", long cp=0, long pr=0) //Constructor multiple arguments, to store information about a book
    {
        next = n;       //store contents of user-given value n into next
        prev = p;       //store contents of user-given value p into previous

        bookName = book;//store contents of user-given value book into bookName
        author = athr;  //store contents of user-given value athr into author
        book_type = buk_type;//store contents of user-given value buk_type into book_type
        copies = cp;    //store contents of user-given value cp into copies
        price = pr;     //store contents of user-given value pr into price
        status= "InStock";
        count++;        //increment counter
        ID=count;       //assign counter to ID to be ID of newly added book
    }
};

template <class mytype>    // declaration of
int BOOK<mytype>::count=0; // static variable to set ID for books
//-------------------- 
```

添加新书的主要部分。

```
BookStoreDataBase<char> obj;    //created object of Doubly linked list
string Book, Author, Booktype;
long Copies=1, Price=0;
cout<<"Enter Name of Book = ";  cin>>Book;
cout<<"Enter Author = ";        cin>>Author;
cout<<"Enter Type of Book = ";  cin>>Booktype;
cout<<"Enter Number of Copies = ";  cin>>Copies;
cout<<"Enter Price (PKR) = ";   cin>>Price;

obj.addBook(Book, Author, Booktype, Copies, Price); 
```

保存功能将所有数据保存到文件

```
template <class mytype>
void DoublyLinkedList<mytype>::save_data()
{
    NODE<mytype> * temp = head; //made copy of head
    fstream file;     //created new file
    file.open("mydata.txt", ios::binary | ios::out | ios::app);

    while(temp->next!=0) //Until link list end
    {
          file.write(reinterpret_cast<char*>(&temp), sizeof(temp));
          temp = temp - > next; //move temp to next node
    }
    file.write(reinterpret_cast<char*>(&temp), sizeof(temp)); //write again for last  
                                                              //book's data
    file.close();
} 
```

*现在我几乎不知道如何从文件中读取列表，将内容存储到每个节点中并扰乱保存的排列，以 FIFO 顺序重新创建列表。所以我可以稍后打印。我已经练习了很多，去了论坛等，但没有找到任何具体的解决方案。请帮帮我。提前致谢*

* * *

我努力的一个样本

```
template <class mytype>
void DoublyLinkedList<mytype>::load_data()
{
    fstream file;
    file.open("mydata.txt", ios::binary | ios::in);
    while(!file.eof())
    {
        NODE<mytype> *temp = new NODE<mytype>;
        file.read(reinterpret_cast<char*>(&temp), sizeof(temp));
        if(is_Empty())
        {
            head = tail = temp;
        }
        else
        {
            temp->prev->next = temp;
            temp->next=0;
        }
    }
    file.close();
}
//------------------- 
```

没有编译时错误。

**运行时错误：** DobulyList.exe 中 0x00CD8391 处的未处理异常：0xC0000005：访问冲突写入位置 0x00000004。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:08:27.520

我认为最好的办法是在 BOOK 类上有一个方法，该方法可以以预定义的方式序列化内容。

```
template<class mytype>
class BOOK      
{
private:
    //members
public:
    //more members

    ....

    bool read( istream& in );
    bool write( ostream& out );

    ....

}; 
```

所以因为你想要二进制 - 你需要为 ID 写入和 int ，然后是大小，字符串的字节等......

然后你把它倒过来读。读取一个int并分配给ID，然后读取大小，读取大小字符并分配给字符串等...

例如

```
//fill in template stuff I'm lazy...
bool Book::read( istream& in )
{
     size_t stringSize; //you need to think about what types you read/write
     char buffer[SomeArbitrarySize];
     file.read( ID ,sizeof(int));
     file.read( stringSize ,sizeof(size_t));
     file.read( buffer, stringSize );
     mStringMember = buffer;
     ... etc ...
} 
```

然后对于列表中的每个项目，您将读取/写入调用委托给节点。您可能还想先写入/读取节点数量的条目。

```
template <class mytype>
void DoublyLinkedList<mytype>::load_data()
{
    fstream file;
    file.open("mydata.txt", ios::binary | ios::in);
    while(!file.eof())
    {
        NODE<mytype> *temp = new NODE<mytype>;
        temp->read(file);
        if(is_Empty())
        {
            head = tail = temp;
        }
        else
        {
            temp->prev->next = temp;
            temp->next=0;
        }
    }
    file.close();
} 
```

# c++ - c++ int array - 删除一个 int 并移动数组的其余部分

> ID：13180314
> 
> 赞同：0
> 
> 时间：2012-11-01T15:30:06.667
> 
> 标签：c++, arrays

我希望有一双新的眼睛可以帮助我找到我做错了什么。我正在尝试在数组中搜索某个 int，一旦找到它，它将删除它并将剩余的元素移过来以填充“删除”所在的位置。

这将用于像 A.remove(25) 这样的类 obj，其中 obj A 包含一些变量，例如 Num（数组中的元素数）、Cap（数组的总容量）和 Pool[]（其中包含所有数字）。

```
bool Set::remove(int X)
{
        for(unsigned J=0; J<Num; J++)
        {
                if(Pool[J] == X)
                {
                        for(unsigned Z=J; J<Num; Z++)
                        {
                                if(Z == (Num-1))
                                {
                                        Pool[Z] = NULL;
                                }
                                else
                                {
                                        Pool[Z] = Pool[Z+1];
                                }
                        }
                        return true;
                }
        }
        return false;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T15:33:43.777

在你的内部 for 循环中：

```
for(unsigned Z=J; J<Num; Z++) 
```

循环条件应该`Z<Num`代替`J<Num`：

```
for(unsigned Z=J; Z<Num; Z++) 
```

否则`J<Num`将继续评估为真，`Z`并将递增，直到超出范围`Pool`

# jquery - 如何使用jQuery在div下找到一类文本区域？

> ID：13180315
> 
> 赞同：0
> 
> 时间：2012-11-01T15:30:09.413
> 
> 标签：jquery, html, jquery-selectors, textarea

我在这里使用 jQuery。我下面有一个 div 我还有一个 div 我这里有一个文本区域 我需要找到一类文本区域

我的代码：

```
<script type="text/javascript">
    $(document).ready(function () {
        alert('function fired');
    $('.select').mouseleave( function () {
            alert('will hide');
            $('.select').hide();
        });
    });
  </script> 
```

这里是我的 html div 标签：

```
<div id="btndiv" style="height:373px;width:800px; border:10px  solid orange ">
    <div id="btndiv1" style="height:360px;width:800px; border: 1px solid orange  ;">
        <textarea  rows="10"  class="select"  id="editor1"> </textarea>
    </div>
</div> 
```

我需要调用一类文本区域。我怎么能这样做？我已经尝试过但仍然没有工作任何帮助将不胜感激 - 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:34:15.533

```
 $("div textarea").attr("class") 
```

or

```
 $("div div textarea").attr("class") 
```

or

```
 $("#editor1").attr("class") //if u know id 
```

or

```
 $("div#btndiv textarea").attr("class")  // if u know id of div 
```

or

```
 $("div#btndiv").find("textarea").attr("class") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:35:45.063

更加具体，

```
$('textarea','#btndiv1').attr('class'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T15:36:03.613

你可以做

```
$(this).attr('class'); 
```

/

```
var outside = $('#btndiv1 .select').attr('class') ;

    $('.select').mouseleave( function () {
           alert('will hide');
           $('.select').hide();
           var inside = $(this).attr('class') ;
     }); 
```

# ruby-on-rails-3 - Rails 3 - 归档父项时将依赖项标记为归档

> ID：13180317
> 
> 赞同：1
> 
> 时间：2012-11-01T15:30:15.817
> 
> 标签：ruby-on-rails-3

我不确定标题是否真的正确解释了我正在尝试做的事情，所以请原谅我。我有一个名为 clients 的表，用于我构建的发票系统。我也有称为项目和发票的表格。

这是我的数据库结构的示例（不是表中的实际列，仅作为示例）。

```
Clients
    id
    name
    description
    archive

Projects
    id
    client_id
    name
    description
    archive

Projects
    id
    client_id
    project_id
    name
    description
    archive 
```

我已经创建了独立归档给定发票、项目或客户的能力。但是，我想看看如果我想让客户的项目和发票在我存档客户时自动标记为存档，那么最好的方法是什么。我的过程是这样的：

*   存档客户将存档客户、具有该客户 ID 的所有项目以及具有相同客户 ID 的所有发票。
*   归档项目将归档项目和具有该项目 ID 的所有发票。
*   归档发票只是归档发票本身

注意：“存档”是指存档位被翻转为 1 而不是 0（未存档/活动）。

**顺便**说一句，你存档的方式是在编辑屏幕上有一个“存档？” 您将选中以存档项目的复选框。

我知道在我的控制器中的编辑操作中，我可以说类似`if archive == 1`然后运行附加的 sql 更新语句来更新依赖项`else @object.save`以保存已编辑项的数据。

# 我的问题？

有一个更好的方法吗？我通常提到的方式是最佳实践吗？当删除“父”项时，我已经`:dependent => :destroy`在模型中的其他地方使用删除关联表中的行。Rails 中是否有一些预置的东西可以让我通过表的关系来标记我正在尝试做的事情？

感谢您对此的任何帮助！希望我能很好地解释问题和问题，但如果您有问题，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:52:40.870

更好的方法是`after_update`在`Client`and`Project`模型上创建一个：

```
class Client < ActiveRecord::Base
  after_update :archive_check

  private
  def archive_check
    projects.each{|p| p.archive = self.archive; p.save} if self.archive_changed?
  end
end

class Project < ActiveRecord::Base
  after_update :archive_check

  private
  def archive_check
    invoices.each{|i| i.archive = self.archive; i.save} if self.archive_changed?
  end
end 
```

因此，当您保存客户端时，将`archive_check`触发。然后如果存档，它将更新所有相关的`projects`. 由于您更新了`projects`，因此这次`archive_check`也将在`Project`模型中为每张发票触发。

# drupal - 内部服务器错误 Drupal 7

> ID：13180319
> 
> 赞同：1
> 
> 时间：2012-11-01T15:30:17.813
> 
> 标签：drupal, internal-server-error

几天以来，我的网站出现了问题。当我访问 URL：[striptekening.com](http://www.striptekening.com)时，将返回 500 Internal Server Error。我不知道为什么。什么都没有改变。

该网站是在 Drupal 7 中构建的

我的 phpinfo 文件可以在这里找到：[phpinfo 文件](http://www.striptekening.com/info.php)

服务器错误日志：

[2012 年 10 月 30 日星期二 10:58:10] [警告] [客户端 193.239.187.26] mod_fcgid：读取数据超时 31 秒

[2012 年 10 月 30 日星期二 10:58:10] [错误] [客户端 193.239.187.26] 脚本头过早结束：index.php

我希望你能帮助我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T06:43:17.610

关闭快速 CGI 并尝试！有些东西快速 CGI 可能不支持。

# php - 使用 $_POST 从多个文本字段中获取数字？

> ID：13180324
> 
> 赞同：1
> 
> 时间：2012-11-01T15:30:43.193
> 
> 标签：php

我正在尝试在我的数据库中存储给定的时间：

我有 2 个输入小时和分钟的文本字段 - hh:mm

我需要将这些值合并到一个变量中，如下所示：

```
$time = hhmm00 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:32:18.953

这应该做的工作。

```
$time = $_POST['hours'] . $_POST['minutes'] . "00"; 
```

从那里你会看到你可以怎么做：

```
$time = $_POST['hours'] . ':' . $_POST['minutes'] . ":00";//outputs 12:12:00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:32:29.780

尝试这样的事情：

```
echo "{$_POST['hours']}:{$_POST['minutes']}:00"; 
```

# ios - 服务器每分钟检查一次

> ID：13180325
> 
> 赞同：1
> 
> 时间：2012-11-01T15:30:44.440
> 
> 标签：ios, sql-server, database, push-notification, push

我正在创建一个 iOS 应用程序，它允许用户在将添加到数据库的设置中存储喜欢的时间。我正在尝试设置一个服务器，它将数据库时间与服务器时间相匹配，当它匹配时，发送推送通知。可以使用一些指导来了解如何设置服务器端检查以及如何解决可能有 10,000-100,000 个条目的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:27:34.247

这是一个非常开放的问题，但我会先将 24 小时格式的时间放入一个整数列，然后在该列上创建一个聚集索引。然后，您可以每分钟运行一次查询，仅返回当前时间间隔的记录并循环访问它们以触发推送通知。

如果您需要更详细的答案，您应该发布有关您的问题的更多详细信息。

# php - PHP 中的基本 SQL 更新查询

> ID：13180326
> 
> 赞同：0
> 
> 时间：2012-11-01T15:30:56.783
> 
> 标签：php, sql

我正在使用 MVC 框架并且在 SQL 查询中遇到问题。

在我的网站上发布帖子的用户会收到一封包含确认 URL 的电子邮件：

```
mywebsite.com/confirm/f9b83b3bf994e5db3b06ya20eb306a24/ 
```

路由正确，但我想将 SQL“已发布”字段更改为 1（默认设置为 0）

所以基本上，除了我的 UPDATE SQL 查询之外，一切都正常工作，这可能有点愚蠢，但我是这个领域的初学者，经过多次尝试后我无法修复它。

```
 if(substr(ROUTE, 0, 8) == 'confirm/')
        {
            if(strlen($code = substr(ROUTE, 8, 32)) == 32)
            {
                if($row = db::fetch(db::query('SELECT `id` FROM `'.DB_PREFIX.'Posts` WHERE `published`=0 AND `confirm`="'.db::escape($code).'"'), 'row'))
                {

//This is the problematic line
                 db::query('UPDATE '.DB_PREFIX.'Posts SET published=1 WHERE published=0 AND confirm="'.db::escape($code).'"');

                }
            }

            header('Location: '.WEB.'publish_success.html');
        } 
```

感谢您的帮助 ：）

编辑：问题修复了添加 WHERE 子句！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:32:58.717

UPDATE 命令中没有 WHERE 子句。

```
db::query('UPDATE `'.DB_PREFIX.'.Posts` SET `published`=1 WHERE id = ' . $row['id'] ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:45:52.407

你能试试下面的查询吗？我不知道它是否会起作用。

```
 db::query("UPDATE `".DB_PREFIX."Posts` SET `published`=1 WHERE `published`=0 AND `confirm`='".db::escape($code)."'"); 
```

# archive - 使用 symstore 删除所有早于 X 个月的 pdb

> ID：13180327
> 
> 赞同：3
> 
> 时间：2012-11-01T15:30:59.210
> 
> 标签：archive, symstore

我浏览了这些文章，但找不到我的问题的答案-

我们已将 pdb 发布到服务器，但空间不足......我们希望使用 symstore 正确取消发布/移动/归档等，因此我们不会影响事务 ID 和它们的存储方式。

如何指定移动/删除所有早于 X 个月的 pdb

我在这里查看了命令列表：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms681378 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681378(v=vs.85).aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-27T13:05:30.153

我认为该[`AgeStore`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff538006%28v=vs.85%29.aspx)命令是调试工具的一部分，是专门为此目的而制定的。就像是

```
AgeStore \\symbolserver\symbols -days=90 
```

将删除所有超过三个月的符号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T00:53:28.823

000Admin 文件夹中的 server.txt 文件是一个 CSV 格式的文本文件，其中包含您需要的所有信息。

您可以解析此文件并获取存储的每个文件的 ID 和日期。

如果日期早于 X 个月，则针对该 ID 发出删除命令。

请注意，删除命令将锁定并修改 server.txt 文件，因此我建议您完全解析它，关闭它，然后在发出删除命令时迭代列表。

# msbuild - MSBUILD 批处理目标

> ID：13180328
> 
> 赞同：2
> 
> 时间：2012-11-01T15:31:04.567
> 
> 标签：msbuild

我想将应用程序部署到服务器列表。我已经处理了所有构建问题，但是在发布到服务器列表时遇到了问题。我想从外部文件中读取服务器列表并调用传递每个服务器名称的目标。

```
<ItemGroup>
    <File Include="$(SolutionFolder)CP\Build\DenormDevServers.txt" />
</ItemGroup>

<Target Name="DeployToServer" Inputs="Servers" Outputs="Nothing">
    <Message Text="Deployment to server done here.  Deploying to server: @(Servers)" />
</Target>

<Target Name="Test">
    <ReadLinesFromFile File="@(File)">
        <Output TaskParameter="Lines" ItemName="Servers" />
    </ReadLinesFromFile>

    <CallTarget Targets="DeployToServer" ContinueOnError="true"></CallTarget>
</Target> 
```

我似乎无法将它“部署”到列表中的每个服务器。输出如下所示：

```
Deployment to server done here.  Deploying to server: 
```

请注意，没有服务器名称，也没有多次完成。DenormDevServers.txt 中有 2 行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:59:15.920

您没有正确使用输入和输出。

您的部署目标应该类似于

```
<Target Name="DeployToServer" Inputs="@(Servers)" Outputs="%(Identity)">
    <Message Text="Deployment to server done here.  Deploying to server: %(Servers.Identity)" />
</Target> 
```

你应该使用依赖而不是显式调用目标，例如

```
<Target Name="Test" DependsOn="LoadServers;DeployToServer"/> 
```

并创建一个新的目标 LoadServers，将文件读入 @(Servers) 项。

[编辑] Outputs="%(Identity)" 的原因是在没有实际执行最新检查的情况下获得目标批处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:58:04.357

这达到了你的结果。我认为您尝试使用任务有点像方法。

```
<?xml version="1.0" encoding="utf-8"?>
<Project  xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0" DefaultTarget="Test" >

<ItemGroup>
    <File Include=".\CP\Build\DenormDevServers.txt" />
</ItemGroup>

<Target Name="DeployToServer" DependsOnTargets="Test">
   <Message Text="Deployment to server done here.  Deploying to server: @(Servers)" /> 
</Target>

<Target Name="Test">
    <ReadLinesFromFile File="@(File)">
        <Output TaskParameter="Lines" ItemName="Servers" />
    </ReadLinesFromFile>
</Target>
</Project> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T16:06:02.503

这将是最干净的方法。使用 DependsOnTargets 确保 Test 目标在 DeployToServer 之前运行。

要获取 ItemGroup 中每个项目的值，您必须使用 %(Identity)。

以下代码将产生所需的输出。

```
<ItemGroup>
    <File Include="$(SolutionFolder)CP\Build\DenormDevServers.txt" />
</ItemGroup>

<Target Name="DeployToServer"
        DependsOnTargets="Test">
    <Message Text="Deployment to server done here.  Deploying to server: %(Servers.Identity)" />
</Target>

<Target Name="Test">
    <ReadLinesFromFile File="@(File)">
        <Output TaskParameter="Lines"
                ItemName="Servers" />
    </ReadLinesFromFile>       
</Target> 
```

# ios - 配置文件“团队”为“未知”

> ID：13180329
> 
> 赞同：17
> 
> 时间：2012-11-01T15:31:08.403
> 
> 标签：ios, provisioning

今天，我更新了我的 Ad Hoc 配置文件，以包含使用开发人员配置门户的新设备。

更新正常进行，但下载更新后的配置文件后，XCode 管理器中的“团队”字段显示“未知”。构建配置文件时找不到。

知道是什么导致了这个“未知”团队吗？我以 PList 的形式打开了配置文件，发现团队名称仍包含在文件本身中。

今天还有其他人有类似的问题吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-13T15:49:55.283

对我来说，在“配置”选项卡上打开“**管理器**”窗口，然后单击“**刷新”按钮**（在右下角）后，它就起作用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T23:55:35.943

我的错。打开实用程序 > 钥匙串访问。您应该会看到一堆带有非描述元数据的私钥或公钥。将它们全部删除，然后转到 Xcode 的 Organizer。转到设备选项卡，从库中选择配置文件并点击刷新。团队应在最新的配置文件中定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-24T11:55:21.907

我的个人 iCloud 帐户未连接到登录个人资料的帐户，因此我的帐户不是团队/组织的成员。添加我的个人帐户并重新启动 Xcode 后，团队名称出现了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-28T07:21:14.210

由于这个答案已经有点老了，但在搜索未知团队问题时仍然显示为第一个结果：确保您的帐户有权访问[此处](https://stackoverflow.com/questions/35674208/development-team-not-showing-in-xcode)描述的证书和标识符。

我在上述帖子的评论中也提到了它，但您最终需要在 App Store Connect 上启用和保存证书访问权限后，在 Xcode > Preferences > Accounts 中删除并添加您的帐户，以便所有团队都出现在 Xcode 中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T03:49:22.307

一定要检查这个答案，不仅我的团队“未知”，而且组织者一直在崩溃。

[刷新配置文件时 Xcode 崩溃](https://stackoverflow.com/questions/15434296/xcode-crash-when-refreshing-provisioning-profiles)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-12T19:37:09.617

这个问题与太多的 SSL 证书混淆 Xcode 有关。请参阅[http://simianzombie.com/?p=2306](http://simianzombie.com/?p=2306)。

# java - Android EditText，让它填满整个屏幕并在其中任意位置书写

> ID：13180332
> 
> 赞同：3
> 
> 时间：2012-11-01T15:31:10.607
> 
> 标签：java, android

正如标题所说，我试图拥有一个或多或少占据整个屏幕的 EditText 字段。这不是问题，但问题是当您开始写入时，它开始位于屏幕中间。而且你不能选择在哪里写。我试图实现的是让它像一个笔记。我可以在我选择的地方写，任何人都知道如何使这项工作:)？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:52:13.093

你应该能够做到这一点

1.  为 EditText 实现 onTouch 侦听器（但请确保您不使用该事件）。
2.  `getRawX`通过事件和`getRawY`方法找到您触摸屏幕的位置。
3.  `android:padding`根据您选择的坐标设置 EditText 。

# javascript - Javascript (ExtJs) 为 URL 返回 404 错误，但当我在浏览器中键入它时没有问题

> ID：13180333
> 
> 赞同：0
> 
> 时间：2012-11-01T15:31:12.673
> 
> 标签：javascript, asp.net-mvc, vb.net, json, extjs

我在前端使用 ExtJs，在后端使用 ASP.NET。我对两者都很陌生。我正在尝试使用 ExtJs 向后端发送请求，但是，我收到 404 错误。当我将 URL 从控制台复制到任何浏览器的地址栏时，它工作正常。我使用的是本地主机 URL，所以我不确定这是否是错误。这是我的 ExtJs 代码。（我意识到代码中还有其他一些问题，我现在只希望前端连接到后端）。

ExtJs 代码：

```
Ext.define('AM.store.Users', {
    extend: 'Ext.data.Store',
    model: 'AM.model.User',
    autoLoad: true,

    proxy: {
        type: 'ajax',
        api: {
            read: 'http://localhost:3849/Home/AmazonRender?numDays=3',
            update: 'data/updateUsers.txt'
        },
        reader: {
            type: 'json',
            root: 'users',
            successProperty: 'success'
        }
    },
    updateUser: function (button) {
        var win = button.up('window'),
    form = win.down('form'),
    record = form.getRecord(),
    values = form.getValues();

    record.set(values);
    win.close();
    this.getUsersStore().sync();
}
}); 
```

ASP.NET 代码：

```
Function amazonRender(ByVal numDays As Integer) As ActionResult
        Dim list As New List(Of Double)()

        Dim bucketName As String = ""
        Dim accessKey As String = ""
        Dim secretKey As String = ""
        ConnectToAmazon(bucketName, accessKey, secretKey)

        Dim client As AmazonS3
        client = Amazon.AWSClientFactory.CreateAmazonS3Client(accessKey, secretKey,  RegionEndpoint.USEast1)
        Dim request As ListObjectsRequest = New ListObjectsRequest
        request.BucketName = bucketName
        Dim response As ListObjectsResponse = client.ListObjects(request)
        Dim id As Integer = 1
        Dim responseJsonString As String = "["

        Dim responseList As List(Of String) = New List(Of String)
        For Each s3 As S3Object In response.S3Objects
            responseJsonString = responseJsonString + "{id: " + id.ToString + ", FileName: '" + s3.Key.Trim + "'},"
            id = id + 1
        Next
        responseJsonString = responseJsonString.Substring(0, responseJsonString.Length - 1)
        responseJsonString = responseJsonString + "]"
        Dim serializer As JavaScriptSerializer = New JavaScriptSerializer

        Return Json(New With {Key .success = "true", Key .users = responseJsonString}, JsonRequestBehavior.AllowGet)
    End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T04:02:21.330

指定 URL 时无需传递完整路径。您可以从 URL 中删除 localhost 和端口号“3849”。如果您使用的是 FireFox，请使用“fire bug”插件。它会告诉你 ExtJS 发布的是什么 URL，你可以将它与实际工作的 url 匹配。在 FireFox 中，您还可以使用一个名为“RESTClient”的插件，它允许您向服务器发送请求，然后您可以检查响应。

# javascript - 使用 javascript/jquery mobile 将锚标记更改为按钮？

> ID：13180334
> 
> 赞同：0
> 
> 时间：2012-11-01T15:31:15.520
> 
> 标签：javascript, forms, html, jquery-ui, jquery-mobile

我正在尝试将我的锚标记更改为一个按钮并使其正常运行，但是当我更改它时似乎：

```
var editButton = document.createElement('a');

        editButton.href = "#additem"; 
```

这：

```
var editButton = document.createElement('button');

        editButton.href = "#additem"; 
```

单击按钮时，不执行任何操作。但是，如果我将其切换回来，则链接可以正常工作...我的目标本质上是将锚文本更改为实际的 jquery 按钮。

我也尝试将属性类设置为 ui 按钮，但也没有做任何事情。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:33:53.863

按钮没有href属性，你可以像这样监听按钮的onclick事件：

```
var editButton = document.createElement('button'); 
editButton.onclick = function(e){ location.href = 'http://' + window.location.hostname + window.location.pathname +'#additem'} 
```

# java - Eclipse Juno 内容助手 (CTRL-Space) 无法正常工作

> ID：13180338
> 
> 赞同：0
> 
> 时间：2012-11-01T15:31:30.183
> 
> 标签：java, eclipse

我在使用 eclipse Juno 时遇到问题。每次我执行 CTRL-Space 时都会弹出一条消息错误，说“代码辅助花费了太长时间......”。我已经尝试了在此站点上找到的所有建议，但似乎没有任何解决问题的方法。有人有其他建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:48:27.683

尝试使用参数启动 eclipse ......

```
-vmargs -Dorg.eclipse.jdt.ui.codeAssistTimeout=60000 
```

# javascript - spotify 过滤标题

> ID：13180341
> 
> 赞同：0
> 
> 时间：2012-11-01T15:31:40.693
> 
> 标签：javascript, spotify

我正在 Spitiy 框架内构建个人应用程序。我遇到了具有特殊特殊字符（如单引号/双引号、& 符号等）的曲目和艺术家标题的问题......

在挖掘解决方案时，我发现了使用 replace() 方法的 hack。但随后进行了更多挖掘，我从 Spotify 本身找到了一个示例代码，并发现了一些奇怪的东西。本质上，当示例代码收集轨道信息，然后将其显示在

标签，曲目标题正确显示了特殊字符，但是当我尝试在说警报（）中显示信息或作为文本框中的值时，标题出现时特殊字符弄乱了。

同样，我可以使用 replace() 方法来解决这个问题，但我很想知道为什么会发生这种行为（也就是 innerHTML 显示正确与警报和文本框错误）。

这是我使用的代码：

[http://codetidy.com/3891/](http://codetidy.com/3891/)

编辑：

从我读到的内容看来，innerHTML 实际上确实将特殊字符编码为常见的 Web 表单。但由于我将值放入文本框中，因此我制作了自己的过滤器：

[http://codetidy.com/3892/](http://codetidy.com/3892/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:00:16.470

首先，阅读 HTML 编码和（例如）innerHTML 和 innerText 之间的区别（以及未正确处理这两者之间的区别的 XSS 安全隐患！）

现在，Spotify Api（至少是 Spotify 应用程序中的一个；Web API 的工作方式不同）默认返回 HTML 编码的值。

如果您确定要对字符串进行文本编码，请对字符串使用 decodeForText() 方法 (so `var textname = data.name.decodeForText();`)。

另请参阅[有关此问题的 Spotify 文档](https://developer.spotify.com/technologies/apps/guidelines/integration/#encodedstrings)。

# powershell - 使用 powershell 和 7zip 创建存档的脚本

> ID：13180346
> 
> 赞同：3
> 
> 时间：2012-11-01T15:31:55.570
> 
> 标签：powershell

我们有几台服务器每天将日志文件写入 C:\Logs。每个月，应该运行一个脚本来识别超过 30 天的文件，将它们存档，并删除源文件。C:\Logs 文件夹包含日志文件，以及还包含日志文件的子文件夹（名为 1234、4567、7890）。作为 Powershell 的新手，我将下面的脚本放在一起，希望可以自动执行此任务。

该脚本能够识别超过 30 天的文件（我在测试它时让它输出了文件名）但是当存档例程开始时，它会将所有内容压缩到 C:\Logs 文件夹中并且不保留子文件夹结构。

该脚本可能不是以最好的方式编写的，所以如果您对我如何改进它并让它做它需要做的事情有任何建议，我很想听听任何建议。

```
$Hname = hostname #Name of server
$Source = "C:\logs" #Folder where log files reside
$Archive = "C:\logs\$hname\Archive.zip" #Folder where archive file will be created
$Extension = "*.txt" #Only files with this extension will be identified and archived
$Date = Get-Date #Today's date
$Days = "30" #Number of days past today's date that will be archived
$Files  =  get-childitem $Source  -include $Extension -recurse | Where-Object {$_.LastWriteTime -lt $Date.AddDays(-$Days)}                                                         
$FileNames = ""

foreach ($File in $Files)
{
    write-host "File Name : $File " $File.LastWriteTime 
    $FileNames = $FileNames + " " + $File  
}
write-host "Files to archive : " $FileNames

if($FileNames.Trim() -ne "")
{
    [string]$Zip = "C:\apps\7-zip\7z.exe"; #path to 7Zip executable
    [array]$arguments = "a", "-tzip", "-y", $Archive, $Source+$Extension;
    & $Zip $arguments ;
}

foreach ($File in $Files)
{
    write-host "Deleting file :"$File
    #remove-item $File -exclude *.zip
}
else
{
    write-host "No files to archive"
}

write-host "Archive Completed" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T03:20:29.460

```
 $Hname = hostname #Name of server
    $Source = "C:\logs" #Folder where log files reside
    $Archive = "C:\logs\$hname\Archive.zip" #Folder where archive file will be created
    $Extension = "*.txt" #Only files with this extension will be identified and archived

    $Days = "30" #Number of days past today's date that will be archived
    $CutDay = [DateTime]::Now.AddDays($Days)
    $Files  =  get-childitem $Source  -include $Extension -recurse | Where-Object {$_.LastWriteTime -lt $CutDay}                                                         

    foreach ($File in $Files)
    {
        write-host "File Name : $File " $File.LastWriteTime 
    }

    pushd $Source
    $FileNames = @($Files | %{$_.FullName.Substring($Source.Length+1)} )

    if($FileNames.Count -ne 0)
    {
        [string]$Zip = "C:\apps\7-zip\7z.exe"; #path to 7Zip executable
        [array]$arguments = @("a", "-tzip", "-y", $Archive) + $FileNames
        & $Zip $arguments ;
    }

    foreach ($File in $Files)
    {
        write-host "Deleting file :"$File
        #remove-item $File -exclude *.zip
    }
    else
    {
        write-host "No files to archive"
    }

    write-host "Archive Completed" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-06T19:34:53.787

你必须使用7zip吗？

我使用[dotnetzip](http://dotnetzip.codeplex.com/)完成了相同的任务，并且能够保存文件夹结构。

这是我的代码，您可以使用它并向其中添加日期逻辑：

```
[System.Reflection.Assembly]::LoadFrom("c:\\\User\\bin\\Ionic.Zip.dll");
$zipfile = new-object Ionic.Zip.ZipFile("C:\user\temp\logs\TestZIP.zip");

$directory = "C:\user\temp\logs\"
$children = get-childitem -path $directory
foreach ($o in $children)
{
   if($o.Name.EndsWith(".log")){
      $e = $zipfile.AddFile($o.FullName)
   }
}
$zipfile.Save()
$zipfile.Dispose() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:03:10.163

在阅读了更多内容并使用了此处发布的脚本和帮助之后，我想出了一些可以满足我需要的东西。我确信有更好的方法来解决它（比如添加更多逻辑和 if/then 语句），但它已经足够好了。当我在编写 powershell 脚本方面做得更好时，我可能会重新审视这个脚本。这就是我得到的...

```
#========================================================
#
#           Log Archive & Move Script
#           Ver. 1.0.0  11/12/2012
#
#========================================================

#Machine hostname - needed for archive creation and identification
$hname = hostname

#Map network drive
$net = $(New-Object -Com WScript.Network)
$net.MapNetworkDrive("X:", "\\your network share\your folder",  
$false, "domain\user", "password") 

#Network folder where archive will be moved and stored
$newdir = "X:\your folder\$hname"

#Archive log entry
$log = "c:\logs\"+ $today + " " + $hname + " " + "Log Archive.txt"

#Local folder where archive file will be created
$archive = "C:\temp\"+ $today + " " + $hname + ".zip" 

#Path to network folder
$archpath = "$newdir" 

#Today's date
$Now = Get-Date 

#Today's date formatted for archive file creation
$today = Get-Date -f MM-yyyy 

#Files older than $Days will be archived and deleted
$Days = "45" 

#Folder where files you want archived are stored
$TargetFolder = "C:\Folder\Logs" 

#Only files with this extension will be archived and deleted
$Extension = "*.txt" 

$LastWrite = $Now.AddDays(-$Days)
$Files = Get-Childitem $TargetFolder -Include $Extension -Recurse | Where {$_.LastWriteTime -   le "$LastWrite"}
$allfiles = "C:\temp\@()"

new-item $newdir -itemtype directory -force

#=================================================
#                        
#   -Identify log files older than x days
#   -Create zip archive
#   -List which files were archived
#   -Write log entry
#
#=================================================

foreach ($File in $Files)  
{ 

add-content -path $log -value "Archived: $file  to $archive  on $Now succesfully"

if ($File -ne $NULL)
    {

function create-7zip ([string] $TargetFolder){
#path to 7Zip executable
[string]$Zip = "C:\path to 7zip\7-zip\7z.exe"; 
[array]$args = "a", "-tzip", "-y", "-r", "$archive";

& $Zip $args $file;
}

    write-host "Archiving File $File" -ForegroundColor "Blue" 
    create-7zip | Out-File $allfiles
    }
else
    {
    Write-Host "No files to archive" -foregroundcolor "Red"
    }
}

#=================================================
#                       
#   -Delete files that were already archived
#   -Exclude newly created zip file
#   -List which files were deleted
#   -Write log entry
#
#=================================================     

foreach ($File in $Files)
{
write-host "Deleting file :"$File
remove-item $File -exclude *.zip
add-content -path $log -value "Deleted file:`t$file succesfully"
}

#======================================================
#                       
#   -Create folder in log archive repository
#   -Move zip archive to long term storage
#   -List files that were moved
#   -Write log entry
#
#====================================================== 

new-item $newdir -itemtype directory -force
try
{
Move-Item $archive -destination $archpath -force -ErrorAction:SilentlyContinue
"Moved $archive to $archpath at $now successfully   `r`n=================================================================================================    ========================================`r`n" | add-content $log
}
catch
{
"Error moving $archive:" | add-content $log
}
write-progress -activity "Moving Archive" -status "Progress:"

#=========================================================
#                       
#   -Email log to recepients with a brief explanation
#
#=========================================================

$Mail = @{
SMTPServer = '127.0.0.1'
Body = 'Log archive operations have completed on server:' + "  " + $hname + "  " + '@' + "  " +    $now  
To = 'youremail@mail.com'
From = $hname + '@mail.com'
Subject = $hname + " " + 'Log Archive Created'
 }
"c:\logs\"+ $today + " " + $hname + " " + "Log Archive.txt" | Send-MailMessage @Mail

#=========================================================
#                       
#   -Disconnect mapped network drive used to move archive
#
#=========================================================

$net.RemoveNetworkDrive("x:") 

#=========================================================
#                       
#   -Finish script
#
#=========================================================

write-host -foregroundcolor "Red" "`r`n Archive Completed. Email Sent" 
```

# javascript - 条件 SQL 格式化

> ID：13180347
> 
> 赞同：0
> 
> 时间：2012-11-01T15:31:55.953
> 
> 标签：javascript, sql, mysqli, adodb

我想知道这是否可能，而且肯定是。我想基本上根据用户输入有条件地创建一个动态 SQL 语句（对于这个例子，我们将使用 3 个文本框输入）：

```
var firstname = document.getElementById('firstname').value
var middle = document.getElementById('middle').value
var lastname = document.getElementById('lastname').value
var SQL 
```

（如果所有 3 个字段都已填写...）

```
SQL = "SELECT * FROM TABLE WHERE [Firstname] = '" + firstname + "' AND [Middle] = '" + middle + "' AND [Lastname] = '" + lastname + "'" 
```

（如果填写了 3 个字段中的 2 个...）

```
SQL = "SELECT * FROM TABLE WHERE [Firstname] = '" + firstname + "' AND [Lastname] = '" + lastname + "'" 
```

有没有更好的方法来做到这一点？更短的东西？还是我必须评估每个字段中的文本然后定义 SQL？

只是想知道，但问永远不会伤害。

周杰伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:36:41.537

像这样的东西应该工作......

```
SQL = "SELECT * FROM TABLE WHERE 

  1 =
  (
  case
     when LEN('" + firstname + "') > 0  and LEN('" + lastname + "') > 0 and LEN('" + middle + "') > 0 then ([Firstname] = '" + firstname + "' AND [Lastname] = '" + lastname + "' AND [Middle] = '" + middle + "')
     when LEN('" + firstname + "') = 0  and LEN('" + lastname + "') > 0 and LEN('" + middle + "') > 0 then ([Lastname] = '" + lastname + "' AND [Middle] = '" + middle + "')
     ...
  end
  ) 
```

**或更好：**

```
SQL = "SELECT * FROM TABLE WHERE 
(
  (LEN('" + firstname + "') > 0 AND [FirstName] = '" + firstname + "') 
 OR 
   LEN('" + firstname + "') = 0
) 
AND (same for secondName) 
AND (same for middle)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:40:18.930

如果您能够将值作为参数传递到查询中，那么

```
SQL = " SELECT * 
    FROM TABLE 
    WHERE (@firstName is null OR [FirstName] = @firstName) 
      AND (@middle is null OR [Middle] = @middle)
          AND (@lastName is null OR [Lastname] = @lastName" 
```

这也将阻止查询缓存被垃圾邮件发送，因为您只会在缓存中存储 1 个查询计划。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T15:45:09.703

[请永远不要这样做。](http://xkcd.com/327/) 参数化查询[是您的朋友。](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

# python - 将图像作为窗口的背景，仍然可以在其上放置按钮和其他控件

> ID：13180352
> 
> 赞同：-1
> 
> 时间：2012-11-01T15:32:13.220
> 
> 标签：python, python-2.7, tkinter

我需要一种将图像作为窗口背景的方法，并且仍然能够在其上放置按钮和其他控件。

这是我的代码：

```
from __future__ import division
from Tkinter import *
from PIL import Image, ImageTk, ImageFilter
import random
import Tkinter as tk

class MyGame(object):

    def __init__(self):
        self.root=Tk()
        self.root.wm_title("Working Tittle")

        img = Image.open("azure.PNG").convert("L") # convert changes the color to grey etc
        (w, h) = (img.size[1], img.size[1])
        print (w, h)
        tkpi = ImageTk.PhotoImage(img)
        label = Label (self.root, image =tkpi)
        label.grid(row=0, column=0, padx=5, pady=5)
        img2 =img.copy()
        pixels = img2.load()
        for x in range(w):
            for y in range(h):
                pixels[x,y] = 255

        tkpi = ImageTk.PhotoImage(img)
        label = Label (self.root, image =tkpi)
        label.grid(row=0, column=0, padx=5, pady=5)

        #this is for the canvas
        self.canvas = Canvas(self.root, width=200, height=200,bg="blue")
        self.canvas.pack()
        self.rectangle = self.canvas.create_rectangle(1, 210,250, 130, fill='green', outline='green')
        self.rectangle = self.canvas.create_rectangle(100, 180, 160, 100, fill='grey', outline='grey')
        self.oval = self.canvas.create_oval(2,2,40,40, fill ='yellow', outline='yellow')
        points = [92, 101, 168, 101, 129, 77]
        self.polygon = self.canvas.create_polygon( points,fill ='brown', outline='brown')

        # used for the coordinates
        self.canvas.bind("<B1-Motion>",self.button_click)
        self.root.mainloop()

        # this is used to find the coordinate
    def button_click(self, e):
        self.canvas.coords(self.polygon, e.x, e.y)
        print "%d %d" %(e.x,e.y)

MyGame() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:35:40.677

我通常这样做的方式是 a) 使用您想要的背景图像创建一个标签，以及 b) 用于`place`将图像放置在包含框架中。这样做，您可以像往常一样继续在框架中打包或网格化对象。

例如：

```
self.image = tk.PhotoImage(...)
label = tk.Label(self,image=self.image)
label.place(x=0, y=0, relwidth=1.0, relheight=1.0, anchor="nw") 
```

# gstreamer - 我在 gstreamer 中发现错误了吗？

> ID：13180355
> 
> 赞同：1
> 
> 时间：2012-11-01T15:32:21.853
> 
> 标签：gstreamer

我正在构建一个使用 gstreamer 作为媒体后端的应用程序。我想我可能已经隔离了 gstreamer 中的一个错误。是这种情况还是我做错了什么？

如果我使用以下方法解码并立即编码 jpeg 图像：

```
gst-launch filesrc location=../front_thumbnail_1976.jpg ! jpegdec ! colorspace ! video/x-raw-yuv,format='(fourcc)'UYVY,width=2592,height=1936,framerate='(fraction)'0/1 ! jpegenc ! filesink location=sample.jpeg 
```

一切正常。但是，如果我尝试使用中间文件拆分管道，如下所示：

```
gst-launch filesrc location=../front_thumbnail_1976.jpg ! jpegdec ! colorspace ! video/x-raw-yuv,format='(fourcc)'UYVY,width=2592,height=1936,framerate='(fraction)'0/1 ! filesink location=sample.yuv

gst-launch filesrc location=sample.yuv ! video/x-raw-yuv,format='(fourcc)'UYVY,width=2592,height=1936,framerate='(fraction)'0/1 ! jpegenc ! filesink location=sample.jpeg 
```

我得到一个段错误（在第二行）。我错过了一步吗？还是gstreamer有问题？如果需要，我可以提供我的示例数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:16:01.423

如果你得到一个段错误，那么你确实发现了一个错误。[在http://bugzilla.gnome.org](http://bugzilla.gnome.org)上提交错误报告。还可以：

```
gdb --args gst-launch filesrc location=sample.yuv ! video/x-raw-yuv,format='(fourcc)'UYVY,width=2592,height=1936,framerate='(fraction)'0/1 ! jpegenc ! filesink location=sample.jpeg 
```

在 gdb 中键入 'r' 以进行运行，并在崩溃时键入 'bt' 以获取回溯。确保您已安装调试包 fpr gstreamer/glib/libjpeg。将回溯附加到错误报告。

# html - 如何在两个图像之间保持居中 的

> ID：13180359
> 
> 赞同：0
> 
> 时间：2012-11-01T15:32:34.860
> 
> 标签：html, internet-explorer, css

我有以下设计，其中我有一个介于两者之间的图像`<div>`。我的目标是保持两个 div 之间的图像。

在此示例中，我希望主图像 (400x200) 位于绿色图像 ( `#firstLayer`) 和灰色 (身体背景) 之间。我的解决方案在 Firefox 16、safari 和 Chrome 中运行良好，但在 IE 中不起作用。在 IE 中，图像显示在`#firstLayer`.

这是问题的[JFiddle](http://jsfiddle.net/vW9bn/4/)

这是用于快速查看的 html 和 css：

HTML：

```
<body>
<div id="firstLayer">
  <img id="image" class="center" src="http://lorempixel.com/400/200/" >
         <div id="mainContent">
          main page content
         </div>
  </div>
</body> 
```

CSS：

```
body{
 background:gray;  
}
#firstLayer{
    background: url("http://www.enough.de/fileadmin/docimport/images/background-image.png") no-repeat;

    height:500px;
    width:500px;

}
img#image{
 z-index:-1; 
}

.center{
    width: 400px;
    height: 200px;
    position: absolute;
    left: 50%;
    top: 50%;
    margin-left: -200px;
    margin-top: -100px;
} 
```

IE中这个问题的修复方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:43:27.140

尝试这样的事情。

```
 <div id="firstLayer" style="width:700px;height:700px;text-align:center;">
         <center>   <img id="image" class="center" src="My_Signature.jpg" 
                                   style="width:400px;height:200px;" > </center>
         <div id="mainContent">
          main page content
         </div>
  </div> 
```

希望，它会帮助你。干杯。！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:38:40.693

尝试添加`position:relative;`到您的`#firstlayer`div：

```
#firstLayer {
    position: relative;
} 
```

这与 IE 中的一个错误有关，该错误将忽略图像上的 z-index，因为它是绝对定位的，添加相对于父 div 的位置可以解决此问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T16:25:34.377

为了使您的图像居中，您可以尝试 2 个选项：

1-将您的图像放在“中心”标签内。

前任：`<center><img id="image" class="center" src="http://lorempixel.com/400/200/" ></center>`

2-在你的图像上使用这个 css 类。

```
img.center{ display: block; margin: 0 auto;} 
```

# php - 即使添加了主键，ON DUPLICATE KEY UPDATE 仍会添加重复项

> ID：13180360
> 
> 赞同：0
> 
> 时间：2012-11-01T15:32:43.220
> 
> 标签：php, mysql, sql-update

我正在尝试编写一个函数，如果它存在则更新 mysql 表，如果不存在则创建它。

我的脚本仍然创建一个新条目而不是更新。

这是我的sql结构：

```
CREATE TABLE IF NOT EXISTS `loan` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `bank_id` int(11) DEFAULT NULL,
  `name` longtext COLLATE utf8_unicode_ci,
  `rate` decimal(8,3) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `loan_0b0af02d` (`bank_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1 ; 
```

这是我的 php 脚本：

```
$item_insert_sql = "INSERT INTO loan(id, bank_id, name, rate) VALUES ('" . $id . "', '" . $bank_id . "', '" . $name . "', '" . $rate . "'), primary key (id), ON DUPLICATE KEY UPDATE (name='$name', rate='$rate')";
$insert_item = mysql_query($item_insert_sql, $db); 
```

我需要做什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:35:16.290

您的插入语句不正确。您不能在插入中定义主键，并且您的`on duplicate`语法也很糟糕：

```
INSERT INTO table (... fields ...) VALUES (... values ...)
ON DUPLICATE KEY SET field1=value1, field2=value2, etc... 
```

如果您对 query() 调用进行了最小的错误处理，您就会收到错误消息：

```
$insert_item = mysql_query($item_insert_sql, $db) or die(mysql_error());
                                                 ^^^^^^^^^^^^^^^^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:02:03.673

您能否尝试以下查询：

```
$item_insert_sql = "INSERT INTO loan(id, bank_id, name, rate) VALUES ('" . $id . "', '" . $bank_id . "', '" . $name . "', '" . $rate . "') ON DUPLICATE KEY UPDATE name='$name', rate='$rate'; 
```

# xcode - 视图控制器中的导航栏（是否允许？）

> ID：13180362
> 
> 赞同：0
> 
> 时间：2012-11-01T15:32:52.243
> 
> 标签：xcode, uinavigationbar, viewcontroller

使用 StoryBoards 将导航栏插入视图控制器页面很容易，您只需这样做。但是如何更改导航栏标题？

这是因为您不允许在视图控制器中放置导航栏，如果是这样，解决方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:51:19.297

要以编程方式在 UIViewController 中设置标题，有一个`setTitle:`方法。你可以通过调用它 `[self.navigationItem setTitle:@"Whatever is in these quotes will be my title"];`

或者如果你有

```
NSString *myTitleString = [NSString stringWithFormat:@"Whatever is in these quotes will be my title"]; 
```

您只需

```
[self.navigationItem setTitle:myTitleString]; 
```

您可以在 UIViewController 的 .m 文件中的任何位置使用这些方法，可能`viewDidLoad`在`viewWillAppear:animated`或`initWithStyle:style`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:43:08.700

问题也可能是您将 UIViewController 添加到项目中的方式。与其将视图控制器拖放到情节提要上，然后将导航栏拖放到视图控制器上，不如尝试仅拖放一个导航控制器。当你放下导航控制器时，它会自动带上一个 View Controller 并自动将 Navigation Bar 放在它带来的 View Controller 上。

然后，就像在我的其他答案中一样，添加`<UINavigationControllerDelegate>`到链接到新视图控制器的 .h 文件中，并`[self.navigationItem setTitle:@"My Title"]`在您的文件中使用`viewDidLoad`来设置标题。

# java - 从整个 SOAP 消息的字符串 XML 创建 SOAPMessage

> ID：13180372
> 
> 赞同：11
> 
> 时间：2012-11-01T15:33:18.250
> 
> 标签：java, web-services, soap

呵呵，我可以从整个 SOAP 消息的字符串表示中创建一个 SOAPMessage 吗？我尝试这样做的原因是我有一个用于捕获 SOAP 消息的 Web 服务的 SOAP 处理程序。我需要将整个 SOAP 消息保存在 Web 服务中以发送到另一个组件。现在，Web 服务剥离了 SOAP 信封信息。因此，在处理程序中，我制作了 SOAP 消息的副本，对其进行了 base64 编码，删除了原始正文内容，并添加了编码字符串。在 Web 服务中，我试图解码正文（编码的 SOAP 消息）并将其重构为 SOAPMessage 以发送到另一个组件。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-05-27T14:44:05.623

[根据 Javadoc](https://docs.oracle.com/javase/8/docs/api/javax/xml/soap/MessageFactory.html "根据 JavaDoc")，`javax.xml.soap.MessageFactory`创建方法用必要的对象（如信封、正文、标头）预先填充 SOAP 消息，以确保正确形成消息。但是，`createMessage`接受消息数据的唯一方法变体将其作为`InputStream`. 因此需要`String`进行`InputStream`转换，即从字符串字节创建一个新的字节流。

为简洁起见，这是一个简化的示例。在应用程序代码中，可以通过将其提取到字段/常量、指定所需的 SOAP 协议版本、不同的字符集等来避免在每个方法调用上创建工厂。

```
private SOAPMessage getSoapMessageFromString(String xml) throws SOAPException, IOException {
    MessageFactory factory = MessageFactory.newInstance();
    SOAPMessage message = factory.createMessage(new MimeHeaders(), new ByteArrayInputStream(xml.getBytes(Charset.forName("UTF-8"))));
    return message;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T21:50:38.100

我分两步做到了这一点。首先创建了一个 DOM Document，然后从 Document 中创建了 SOAPMessage。

# ruby-on-rails - 选择一个随机数随机数次，但决不会两次相同的随机数

> ID：13180379
> 
> 赞同：5
> 
> 时间：2012-11-01T15:33:35.050
> 
> 标签：ruby-on-rails, ruby, random

> **可能重复：**
> [如何在 Ruby 中生成一个包含 n 个唯一随机数的列表？](https://stackoverflow.com/questions/119107/how-do-i-generate-a-list-of-n-unique-random-numbers-in-ruby)

我想要做：

```
Random.rand(0..10).times do
  puts Random.rand(0..10)
end 
```

例外情况是，如果随机数已经显示，则无法再次显示。我如何最轻松地做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T15:39:45.227

作为一个快速的单线：

```
rands = (0..10).to_a.shuffle[0, Random.rand(0..10)] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T15:43:50.070

[如果您使用的是 Ruby 1.9，则另一种带有Array#sample](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-sample)的单行器

```
rands = (0..10).to_a.sample(­Random.ran­­d(0..10)) 
```

# android - 位图太大，无法上传到纹理中

> ID：13180382
> 
> 赞同：2
> 
> 时间：2012-11-01T15:33:39.787
> 
> 标签：android, opengl-es, bitmap, imageview

当我尝试在 imageview 中渲染位图时

```
mImageView.setImageBitmap(mBitmap); 
```

我会看到位图太大而无法上传到日志中的纹理中。

好的，我知道 OpenGL 会抛出此警告消息是有限制的。
但是我可以知道图像是否渲染成功吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:35:09.023

您应该通过获取`GL_MAX_TEXTURE_SIZE`环境值的值来检查最大纹理大小。

您可以在 GLBEnchmark 网站上查看各种 Android 设备的此值：[http ://www.glbenchmark.com/phonedetails.jsp?benchmark=glpro25&D=Google+Nexus+S&testgroup=gl](http://www.glbenchmark.com/phonedetails.jsp?benchmark=glpro25&D=Google+Nexus+S&testgroup=gl)

为了减少视频内存占用，您可能需要使用 ETC1 纹理。如果您使用 OpenGL ES 2.0，您可以立即使用它（ETC1 是 GL ES 2.0 规范的一部分），如果您使用 OpenGL 1.1，您应该通过查看 GL 扩展列表来检查 ETC1 支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:02:33.880

可能除了非常明显的“它在屏幕上吗？” 回答。只是不要发疯，你应该没事。您可以执行裁剪或调整图像副本等操作以减少 RAM 占用。我从未尝试过使用大图像，但 Android 通常会执行崩溃或减速等操作。

# c++ - Open file with input name

> ID：13180390
> 
> 赞同：2
> 
> 时间：2012-11-01T15:33:52.553
> 
> 标签：c++, string, file-io, stringstream

I've got this piece of code in C++ from someone else that I am now working with but I'm not sure why the "std::string()" is been added.

```
std::ifstream File;
std::stringstream FileName;
FileName << Name; //Name being a string that has been passed as an input to the function.
                 // Eg."MyFile"
newFileName << ".txt"; //"MyFile.txt"

File.open(std::string(FileName.str()).c_str(), std::ios::in | std::ios::binary); 
```

My question is, since str() returns a string, and c_str() gets a string and transforms it into c string, why do we need to put it inside the "string()"? Could it not be writen like:

```
File.open((FileName.str()).c_str(), std::ios::in | std::ios::binary); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:35:47.827

是的，可以这样写。

使用

```
std::string(FileName.str()) 
```

是绝对没有意义的。

# imagemagick - ImageMagick - 将 XV/VIFF 转换为 BMP

> ID：13180397
> 
> 赞同：0
> 
> 时间：2012-11-01T15:34:12.770
> 
> 标签：imagemagick, imagemagick-convert

我想将 Khoros 可视化图像（`.XV`或`.VIFF`扩展名）转换为位图。我试过了

```
convert tree.xv tree.bmp 
```

但它返回黑色图像，而原始图像类似于以下内容：

![ImageMagick 转换](../Images/211a38e07038afe960d81d8707526659.png) ![应该如何](../Images/25f08e9f4d5024bb441da66cfcf3a293.png)

我查看了这个[ImageMagick 描述](http://linux.about.com/library/cmd/blcmdl1_ImageMagick.htm)，它显然支持这种格式：

> ImageMagick 实用程序可识别以下图像格式：
> 
> `Name Mode Description`
> 
> `VIFF *rw+ Khoros Visualization image`

是否可以将`.XV`图像转换为`.BMP`或`.PNG`使用 ImageMagick？

如果有人想测试，请在[此处下载该图](https://www.dropbox.com/s/ypezedefrp0rx7j/tree_09_o.xv)的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-19T19:06:08.550

ImageMagick 中的错误将在 6.8.7-0 版本中修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-17T15:46:55.810

我正在解决同样的问题（可能在同一个 Brodatz 数据集上:-)）。我的解决方案只是使用[GraphicsMagick](http://www.graphicsmagick.org/)。

虽然 ImageMagick 返回了黑色图像（与您的问题相同），但 GraphicsMagick 包对我来说效果很好。用法很相似，`gm`在开头加上：

```
gm convert tree.xv tree.bmp 
```

# c++ - C++ 根据运行时值选择要使用的虚拟基类的实现

> ID：13180402
> 
> 赞同：0
> 
> 时间：2012-11-01T15:34:22.910
> 
> 标签：c++, inheritance, boost

我有一个 C++ 纯虚拟基类/接口，其中有几个实现在代码的不同位置定义，以后可能会添加其他实现。我需要一种方法来注册可用的实现，（从配置文件、用户输入等）读入要使用的接口的实现，然后构造该实现的实例。

我怎样才能以一般方式做到这一点（即，表驱动，而不是使用明确列出每个实现的 switch/case 语句）？我无法确定如何从指示类型的运行时值转换为我可以实例化的编译时类型。

boost有这样的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:39:25.703

标准方法涉及一种称为[**factory**](http://en.wikipedia.org/wiki/Factory_method_pattern)[的创建](http://en.wikipedia.org/wiki/Creational_pattern) [模式](http://en.wikipedia.org/wiki/Design_pattern_(computer_science))，它根据用户提供的标识符实例化具体类型。[](http://en.wikipedia.org/wiki/Factory_method_pattern)

 **如果您已经在使用 Boost，请查看[Boost.Functional/Factory](http://www.boost.org/doc/libs/1_51_0/libs/functional/factory/doc/html/index.html)，但自己构建基于表的调度机制并不是很[困难](https://stackoverflow.com/q/1832003/1170277)。这是您如何使用具有运行时多态性的 Boost 版本：

```
struct abstract
{
    virtual ~abstract() = default;
    virtual void f() = 0;
};

struct concrete1 : abstract
{
    virutal void f() override;
};

struct concrete2 : abstract
{
    virutal void f() override;
};

typedef boost::function<abstract*()>  abstract_factory;

int main()
{
    // Here, each factory refers to a function, although sometimes
    // people use the term factory to mean the dispatch table itself.
    std::map<std::string, abstract_factory> factories;
    factories["foo"] = boost::factory<concrete1*>();
    factories["bar"] = boost::factory<concrete2*>();

    // Create a new concrete object.
    auto foo = factories["foo"]();

    // vtable dispatch "concrete1".
    foo->f();

    ...
} 
```**

# php - 如何使用 MYSQL 数据制作“排序依据”下拉列表

> ID：13180409
> 
> 赞同：0
> 
> 时间：2012-11-01T15:34:35.640
> 
> 标签：php, html, mysql

嘿伙计们，我已经坚持了一段时间了，真的需要帮助。到了我确信这很容易做到的地步，但我只是没有以正确的方式看待它。

我拥有的是一个名为“company_list.php”的页面，在此页面上，我显示了公司表中的所有公司。我想要做的是有一个下拉选择表单来对我的结果进行排序。目前我只是想按类别排序。

表公司：公司ID类别ID公司名称等...

表类别：categoryID categoryName

```
**FORM**
    <form action="company_list.php" method="POST" >
<label>Category: </label>
<select name="categoryID">
<?php foreach ($categorys as $category) : ?>
<option value="<?php echo $category['categoryID']; ?>">
<?php echo $category['categoryName']; ?>
</option>
<?php endforeach; ?>
</select>
<input type="submit" value="Sort" /> 
```

**PHP**这是我卡住的地方，尝试了很多不同的东西，请帮助！

```
 //include db here
//global
global $db;
if(isset($_POST['categoryID']) === " '.$categoryID.' ") {
$query='SELECT *
FROM company
WHERE categoryID ="'.$categoryID.'"
$db->query($query);
}
//get data
//get all cats
$query='SELECT * FROM category
ORDER BY categoryID';
$categorys=$db->query($query);
//Get all COMPANYS for cat
$query='SELECT * FROM company WHERE categoryID = "'.$categoryID.'"
ORDER BY companyName ASC';
$category_companys=$db->query($query); 
```

我在这里碰壁了，真的很想得到一些帮助。提前致谢。

我能够完成与此类似的事情，但不在下拉列表中。以下是我所做的，但不知道如何将其放入下拉列表中。

**PHP**

```
 global $db;
if(!isset($categoryID)) {
@$categoryID = $_GET['categoryID'];
if(!isset($categoryID)){
$categoryID=2; //I want to start by displaying companys for all categorys...not at categoryID=2
}
}
//get name of all categorys
$query='SELECT * FROM category
WHERE categoryID = "'.$categoryID.'"';
$category_results=$db->query($query);
$category_row = $category_results->fetch();
$categoryName = $category_row['categoryName'];
//get all cats
$query='SELECT * FROM category
ORDER BY categoryID';
$categorys=$db->query($query);
//Get all COMPANYS for cat
$query='SELECT * FROM company WHERE categoryID = "'.$categoryID.'"
ORDER BY companyName ASC';
$category_companys=$db->query($query); 
```

**HTML**

```
 <!--lists all category`s in <li> not a drop down form -->
<?php foreach($categorys as $category) : ?>
<li>
<a href="company_list.php?categoryID=<?php echo $category['categoryID']; ?>" >
<?php echo $category['categoryName']; ?>
</a>
</li>
<?php endforeach; ?>
<!--Result Set-->
<table border="1px solid black" cellspacing="1px" cellpadding="2px;" style="margin-top:5px;">
<!--<h1>Company Name</h1>-->
<th>Company Name</th>
<th>Address</th>
<th>Phone</th>
<th>Email</th>
<?php foreach($category_companys as $company) : ?>
<tr>
<td><a href="company_page.php?company_id=<?php echo $company['companyID']; ?>">
<?php echo $company['companyName']; ?></a>
</td>
<td>
<?php echo $company['companyAddress']; ?>
</td>
<td>
<?php echo $company['companyPhone']; ?>
</td>
<td>
<?php echo $company['companyEmail']; ?>
</td>
</tr>
<?php endforeach; ?>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:39:49.503

你的 php 语法很糟糕：

```
if(isset($_POST['categoryID']) === " '.$categoryID.' ") {
                                    ^^^^^^^^^^^^^^^^^^ 
```

正在尝试将发布的值与具有空格、单引号、句点、$categoryID 变量的值、另一个句点、另一个引号、另一个空格的字符串进行比较。

您是否想要：

```
if(isset($_POST['categoryID']) === $categoryID) { 
```

反而？请注意，这很可能仍然会失败。来自 $_GET/$_POST/$_REQUEST 超全局变量的任何东西都是**STRING**。如果 $categoryID 是整数，则比较将失败，因为类型不匹配 - 即使值相同。

PS 格式正确（例如缩进）的代码是您的朋友。不要害怕标签。

# parsing - iText 提取“？” 而不是“fi”

> ID：13180414
> 
> 赞同：1
> 
> 时间：2012-11-01T15:34:44.827
> 
> 标签：parsing, pdf, itext

我使用 iText 5.3.3

我尝试从 pdf 文件中提取文本。

我使用类似的东西：

```
 File f (....)

    FileInputStream fis = new FileInputStream(f);

    r = new PdfReader(fis);

    String s=PdfTextExtractor.getTextFromPage(r, 1);
    System.out.print(s); 
```

我明白了：

“(...)新加坡航空公司面临历史上第一起致命坠机事故引发的危机(...)”

对于文本：

“(...)新加坡航空公司面临历史上第一次致命坠机事故引发的危机(...)”

或：“（...）国家运营商和最终结论表明需要（...）”

对于文本：“(...)国家运营商和最终结论表明需要(...)”

如您所见，我得到“？” 插入“fi”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:54:05.577

"fi" 可以是一个 unicode 字符，称为 LATIN SMALL LIGATURE FI

可以在此处找到有关该角色的更多信息。

[http://www.eki.ee/letter/chardata.cgi?ucode=FB01](http://www.eki.ee/letter/chardata.cgi?ucode=FB01)

这通常是由于编码问题或显示此文本的网页上使用的字体未解码源中呈现“fi”的字体。

尝试使用 UTF8 编码规范化您的 pdf 阅读器字符串，如果浏览器字体不知道如何呈现它，您可能需要检查 unicode 字符并解析出不需要的字符，例如“fi”。

一种方法是编写一个可以解析出任何不需要的 unicode 字符的正则表达式。下面是一个例子

```
 //Used this to get the unicode range below : http://www.utf8-chartable.de/unicode-utf8-table.pl
                s = s.Replace(/[^\u0000-\u036F\u2000-\u2023\u2153-\u217E\u20A0-\u20B5]/g, ""); 
```

希望这可以帮助。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:17:34.460

问题解决了。

我更改了 .txt 文件的默认编码。

在 Eclipse 中：窗口>>常规>>内容类型>>文本默认编码：UTF-8

# ruby - Sprockets 中的条件要求

> ID：13180417
> 
> 赞同：3
> 
> 时间：2012-11-01T15:35:11.773
> 
> 标签：ruby, sprockets

如何使用 Sprockets 有条件地要求资产？

我在询问之前搜索了解决方案，并在 Sprockets 存储库中找到了这个讨论 -[有条件的要求](https://github.com/sstephenson/sprockets/issues/90)

那里讨论的解决方案是使用 ERB：

```
<% require_asset "#{ActiveScaffold.js_framework}/my_test" %> 
```

我试过这样：

**应用程序.js.erb**

```
<% if debug == true %>
   <% require_asset "lib-debug" %>
<% else %>
   <% require_asset "lib-min" %>
<%end%> 
```

**耙文件**

```
def bundle_app(debug)
  env = Sprockets::Environment.new
  env.append_path "app/"
  env.js_compressor = Uglifier.new
  assets = env.find_asset("app.js.erb")
  return assets.to_s
end 
```

但这会导致以下错误：

> #<#:0x00000001576d30> 的未定义局部变量或方法“调试”

肯定有一些易于修复的错误，但我是 Ruby 新手，无法发现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:32:44.050

一种可能的解决方案是将以下内容添加到 bundle_app 方法中：

```
env.context_class.class_eval "def debug; #{!!debug}; end" 
```

更新后的 bundle_app() 方法：

```
def bundle_app(debug)
  env = Sprockets::Environment.new
  env.append_path "app/"
  env.context_class.class_eval "def debug; #{!!debug}; end"
  env.js_compressor = Uglifier.new
  assets = env.find_asset("app.js.erb")
  return assets.to_s
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T03:18:26.273

也许，由于您的示例使用调试作为参数，您可以使用结算来在开发环境中拥有资产？

如果是这样，在 config/environments/development.rb

```
config.assets.precompile << 'lib-debug.js' 
```

# python - 为什么 django 模板渲染字典这么慢？

> ID：13180419
> 
> 赞同：9
> 
> 时间：2012-11-01T15:35:15.207
> 
> 标签：python, django, django-templates, django-views, jinja2

当我使用 django 1.4 的默认模板系统渲染一个中等复杂的字典（4 级深度，~2K 数据点）时，模板渲染步骤需要超过 2800 毫秒。当我直接从 python 执行 html-gen 时，它需要大约 80 毫秒。即使使用另一个模板库 ( [jinja2](http://jinja.pocoo.org/docs/) ) 也可以在 300 毫秒内呈现相同的数据（实际上，几乎完全相同的模板语法 - 因为 jinja2 几乎是一个替代品）。

有趣的是，您甚至不必在模板中实际*渲染*字典即可在 django 的模板系统中导致此性能问题……您所要做的就是*将*其作为可用变量传递给模板。我的一个朋友建议这可能意味着系统是，“......做一个防御性副本或（更愚蠢的）一个理解 [which] 由于运行构造函数而需要时间”

任何人都知道为什么 django 的默认模板系统需要这么长时间来呈现字典？

*** 我将在下面添加请求的详细信息 ***

我在调试模式下运行并将 DebugToolbarMiddleware 设置为我的中间件类之一。我的 settings.py 文件包括：

```
TEMPLATE_CONTEXT_PROCESSORS = global_settings.TEMPLATE_CONTEXT_PROCESSORS + (
    'django.core.context_processors.request',
) 
```

和....

```
# rendering like this
return render(
    request,
    template_name='ltm/search_results.html',
    context_instance=RequestContext(request, {
        'menus': menus,
        'results': result_dict
    })
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:28:43.307

如果您可以向我们提供您的模板代码以更好地了解我们正在处理的模板处理类型，那就太好了。

首先，您遍历字典内容的方式之间存在潜在差异。`dict.items()`返回一个元组列表，它会消耗额外的内存并需要时间来初始构造，但如果您使用`dict.iteritems()`.

当您传入以点开头的变量名时，还会涉及一些开销`.`，例如`foo.bar.baz`，Django 的模板执行所谓的[*变量查找*](https://docs.djangoproject.com/en/dev/ref/templates/api/#variables-and-lookups)，试图确定您是通过键访问字典项、对象的属性还是通过索引访问列表项。我没有使用 Jinja2，所以变量查找的问题可能完全不相关，但如果两者之间存在差异，则值得考虑。

在任何一种情况下，由于您处理的是一个相当大的字典，因此如果您可以在视图中重新组织它的结构以简化稍后在模板中访问数据的方式，这可能会有所帮助。

# artificial-intelligence - 使用什么类型的 AI 来预测零件兼容性？

> ID：13180424
> 
> 赞同：3
> 
> 时间：2012-11-01T15:35:31.053
> 
> 标签：artificial-intelligence, relational-database, neural-network, expert-system

我要从一开始就说我不是程序员，我对不同类型的 AI 有一个粗略的了解，我只是一个构建 Web 应用程序的商人。

无论如何，我正在投资开发的网络应用程序是为了我的爱好。在这个爱好的行业中有很多硬件/产品的零件制造商、产品制造商、升级和插件制造商等。目前，我正在为那些知识渊博的人建立一个众包平台，并标记这些部分之间的兼容性，因为它并不总是明确的，例如：

制造商 A 制造“A”级产品，制造商 B 制造通常与“A”级产品配套的升级/部件，但由于某种原因与制造商 A 的特定“A”级产品不兼容。

然而，数据库中很大一部分（>60%-70%）的产品/部件可以通过它们的属性推断出它们的兼容性，

***例如：***

第 1 部分是带有“X”毫米接收器的“A”型，第 2 部分也是带有“X”毫米接口的“A”型，因此这两个部分是兼容的。

或者

Part 1是一个8mm的齿轮，因此任何厂家的所有8mm衬套都与part 1兼容。此外，所有齿轮在数据库中只能与衬套和齿轮箱有兼容性关系，而一个齿轮之间不可能有有意义的兼容性和导轨或接收器，因为这些部件没有接口。

现在我想要的是一个能够从众包平台社区的决策中学习的 AI，并能够根据它们的标记属性、它们是什么类型的部件等来推断新部件/产品的兼容性。

**解决这个问题的最佳人工智能形式是什么？**我在考虑一个专家系统，但由于数以万计的零件、数百种零件类型和许多制造商之间的复杂关系，明确地设计所有的知识规则将是令人生畏的。

**ANN（神经网络）是否适合从众包平台用户的许多输入/决策中学习？**

非常感谢任何帮助/输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:41:36.390

这听起来像是一个约束满足问题。我会尝试使用最小冲突等 CSP 解决方案来解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:45:11.897

这听起来足够复杂，也许可以证明尝试在任务中训练神经网络是合理的。由于决策已经被众包，这些决策可用于训练神经网络。

缺点是很难达到当时 100% 正确的结果。当 NN 出错时，应该将其用作训练数据，并希望将来避免同样的错误。但这几乎是神经网络的普遍缺点：很难理解完全进化的 NN 背后的逻辑，有时甚至更难纠正所说的逻辑，如果它是神经网络长时间学习的结果。

* * *

或者，如果您能找到一种方法来定义导致部件不兼容的原因，也可以尝试更传统的方法。或者也许通过将它们分类到兼容性组（我敢肯定这将是一项漫长而艰巨的任务......但这就是众包的用武之地）。

* * *

答案不多，我知道，但我希望它能帮助你产生一些关于从哪里开始的想法

# xdebug - phpStorm，xdebug：有没有办法从调试中排除某些目录？

> ID：13180425
> 
> 赞同：13
> 
> 时间：2012-11-01T15:35:38.527
> 
> 标签：xdebug, phpstorm

当我调试时，我想排除某些目录 - 例如，每次实例化一个类时，我的调试器都会进入 Doctrine 的 ClassLoader::loadClass() 这很烦人......我尝试添加那些我想要排除的目录在 Settings / PHP / Debug / Skipped Paths 中，但这无济于事......

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-12T13:46:01.483

Xdebug 不支持在调试或分析时跳过目录。这是我想补充的。[在http://bugs.xdebug.org/view.php?id=901](http://bugs.xdebug.org/view.php?id=901)有一个功能请求。看来 Jetbrains 也有一张票：http: [//youtrack.jetbrains.com/issue/WI-4722](http://youtrack.jetbrains.com/issue/WI-4722)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-10-29T17:42:33.550

我在 PhpStorm 中发现的（我不知道它是从哪个版本开始的 - 我现在是 2018.1） `Lanugage & Frameworks > PHP > Debug > Step Filters`：。

对于 Symfony 4，这些`Skipped Methods`为调试带来了平静：

*   `Composer\Autoload\ClassLoader->findFileWithExtension`
*   `Composer\Autoload\ClassLoader->findFile`
*   `Symfony\Component\Debug\DebugClassLoader->loadClass`
*   `Symfony\Component\Debug\DebugClassLoader->checkClass`
*   `Symfony\Component\Debug\DebugClassLoader->getOwnInterfaces`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-02-23T07:04:17.507

PHP Storm 2016.2 上确实存在该功能

在下面`Languages & Frameworks > PHP > Debug > Skipped Paths`

[![PHP 风暴 2016.2](../Images/e828bde630ce78bd523b323a8087e11d.png)](https://i.stack.imgur.com/gKadJ.png)

# jquery - jquery Ui价格滑块cookie

> ID：13180427
> 
> 赞同：1
> 
> 时间：2012-11-01T15:35:40.297
> 
> 标签：jquery, user-interface, slider

我很难为低价格滑块集成 cookie 支持（不太好）

这是js的代码

```
$(window).load(function(){
function showProducts(minPrice, maxPrice) {
    $("#products li").hide().filter(function() {
        var price = parseInt($(this).data("price"), 10);
        return price >= minPrice && price <= maxPrice;
    }).show();
}

$(function() {
    var options = {
        range: true,
        min: 0,
        max: 500,
        values: [50, 300],
        slide: function(event, ui) {
            var min = ui.values[0],
                max = ui.values[1];

            $("#amount").val("$" + min + " - $" + max);
            showProducts(min, max);
        }
    }, min, max;

    $("#slider-range").slider(options);

    min = $("#slider-range").slider("values", 0);
    max = $("#slider-range").slider("values", 1);

    $("#amount").val("$" + min + " - $" + max);

    showProducts(min, max);
});​
}); 
```

和html

```
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<div class="demo">

    <p>
        <label for="amount">Price range:</label>
        <input type="text" id="amount" style="border:0; color:#f6931f; font-weight:bold;" />
    </p>

    <div id="slider-range"></div>
    <ul id="products">
            <li data-price="10"> product - £10 </li>
            <li data-price="50"> product - £50 </li>
            <li data-price="100"> product - £100 </li>
            <li data-price="150"> product - £150 </li>
            <li data-price="200"> product - £200 </li>
        </ul>
    </div 
```

​</p>

这是我的 jsfindle[价格滑块的链接](http://jsfiddle.net/nSJAS/)

它使用 jquery 1.72

我的问题是如何为其提供 cookie 支持，因此当访问者选择某些内容时，它将保存他的选择，当他刷新页面或返回页面时，它仍将包含他选择的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:05:55.910

试试这个，它应该适用于 cookie

演示：http: [//jsfiddle.net/nSJAS/38/](http://jsfiddle.net/nSJAS/38/)

**JS代码：**

```
//COOKIE code from MDN https://developer.mozilla.org/en-US/docs/DOM/document.cookie
var allCookies = {
  getItem: function (sKey) {
    if (!sKey || !this.hasItem(sKey)) { return null; }
    return unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)" + escape(sKey).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"), "$1"));
  },
  setItem: function (sKey, sValue, vEnd, sPath, sDomain, bSecure) {
    if (!sKey || /^(?:expires|max\-age|path|domain|secure)$/i.test(sKey)) { return; }
    var sExpires = "";
    if (vEnd) {
      switch (vEnd.constructor) {
        case Number:
          sExpires = vEnd === Infinity ? "; expires=Tue, 19 Jan 2038 03:14:07 GMT" : "; max-age=" + vEnd;
          break;
        case String:
          sExpires = "; expires=" + vEnd;
          break;
        case Date:
          sExpires = "; expires=" + vEnd.toGMTString();
          break;
      }
    }
    document.cookie = escape(sKey) + "=" + escape(sValue) + sExpires + (sDomain ? "; domain=" + sDomain : "") + (sPath ? "; path=" + sPath : "") + (bSecure ? "; secure" : "");
  },
  removeItem: function (sKey, sPath) {
    if (!sKey || !this.hasItem(sKey)) { return; }
    document.cookie = escape(sKey) + "=; expires=Thu, 01 Jan 1970 00:00:00 GMT" + (sPath ? "; path=" + sPath : "");
  },
  hasItem: function (sKey) {
    return (new RegExp("(?:^|;\\s*)" + escape(sKey).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=")).test(document.cookie);
  },
  keys: /* optional method: you can safely remove it! */ function () {
    var aKeys = document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g, "").split(/\s*(?:\=[^;]*)?;\s*/);
    for (var nIdx = 0; nIdx < aKeys.length; nIdx++) { aKeys[nIdx] = unescape(aKeys[nIdx]); }
    return aKeys;
  }
};

function showProducts(minPrice, maxPrice) {
    $("#products li").hide().filter(function() {
        var price = parseInt($(this).data("price"), 10);
        return price >= minPrice && price <= maxPrice;
    }).show();
}

var min_value = parseInt(allCookies.getItem("cookie_min_val"), 10);
min_value = (min_value > 0) ? min_value : 0;

var max_value = parseInt(allCookies.getItem("cookie_max_val"), 10);
max_value = (max_value > 0) ? max_value : 0;
//alert(cookie_val);
$(function() {

    var options = {
        range: true,
        min: 0,
        max: 300,
        values: [min_value?min_value:50, max_value?max_value:300],
        slide: function(event, ui) {
            var min = ui.values[0],
                max = ui.values[1];

            $("#amount").val("$" + min + " - $" + max);
            allCookies.setItem("cookie_min_val", min, "", "/");
            allCookies.setItem("cookie_max_val", max, "", "/");
            showProducts(min, max);
        }
    }, min, max;

    $("#slider-range").slider(options);

    if(min_value>0){
        min = min_value;
        max = max_value;
    }else{
        min = $("#slider-range").slider("values", 0);
        max = $("#slider-range").slider("values", 1);
    }

    $("#amount").val("$" + min + " - $" + max);

    showProducts(min, max);
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:01:13.543

要在 jQuery 中添加对 cookie 的支持，只需遵循本教程：

[http://www.electrictoolbox.com/jquery-cookies/](http://www.electrictoolbox.com/jquery-cookies/)

这个 js 需要作为 jQuery 标准插件“安装”（因此只需在页面中包含 js 文件），您将能够在保存商店列表的位置写入和读取 cookie。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T16:11:04.280

你想要的是一个[名为***$.cookie()***](https://github.com/carhartl/jquery-cookie)的 jQuery 插件。

然后您可以执行以下操作：

```
 slide: function(event, ui) {
        var min = ui.values[0],
            max = ui.values[1];

        $("#amount").val("$" + min + " - $" + max);

        $.cookie('the_cookie', { min: min, max: max });

        showProducts(min, max);
    } 
```

# excel - Excel vba更改形状公式而不选择形状

> ID：13180429
> 
> 赞同：0
> 
> 时间：2012-11-01T15:35:45.677
> 
> 标签：excel, vba

我正在尝试更改形状内的公式而不选择它，但不断收到运行时错误。

以下是我迄今为止尝试过的一些代码：

```
 Sheets("Quote").Shapes.Range(Array("Rectangle 87")).Formula = " =CommAnnualOutput"
    Sheets("Quote").Shapes("Rectangle 87").Formula = " =CommAnnualOutput"
    Sheets("Quote").Shapes("Rectangle 87").DrawingObjects.Formula = " =CommAnnualOutput" 
```

这些似乎都不起作用。有没有办法在不先选择形状的情况下更改公式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:47:24.623

请在此处找到您问题的答案：

[使用 Excel 形状链接单元格](https://stackoverflow.com/questions/8189317/link-cell-with-excel-shape)

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:53:42.037

您上次尝试错过了两个字符。那将是

```
Sheets("Quote").Shapes("Rectangle 87").DrawingObject.Formula = "=CommAnnualOutput" 
```

# wpf - 绑定到资源中 DO 的 DP 不起作用且没有错误？

> ID：13180433
> 
> 赞同：0
> 
> 时间：2012-11-01T15:35:52.373
> 
> 标签：wpf, mvvm

我正在尝试创建一个类，该类将管理基于不同对象集合的输入的对象集合。生成的集合特定于我的用户界面，而输入集合只是数据对象（模型）的集合。

我希望能够将输入集合绑定到我的 DataContext 的属性。因此，在 XAML 中而不是在后面的代码中似乎会很好。我尝试实现 DepedencyObject 并为输入集合创建一个 DP。我还在我的 GraphPlotManager 依赖对象中实现了 IEnumerable，因此我可以将其他控件项源绑定到它。

我试过这个：

```
<local:GraphPlotManager x:Key="plotManager"
                                 GraphObjects="{Binding GraphObjects}"> 
```

并使用 DataContextSpy

```
<common:DataContextSpy x:Key="spy2" />
<local:GraphPlotManager x:Key="plotManager"
                                 GraphObjects="{Binding Source={StaticResource spy2}, Path=DataContext.GraphObjects}" /> 
```

我的绘图管理器的构造函数被调用，但从不设置或修改依赖属性，并且输出窗口中没有显示任何错误。是什么赋予了？

编辑：这是 DP 代码（我使用了代码片段，只添加了一个 OnChanged 处理程序）

```
public ObservableCollection<GraphObjectViewModel> GraphObjects
{
    get { return (ObservableCollection<GraphObjectViewModel>)GetValue(GraphObjectsProperty); }
    set { SetValue(GraphObjectsProperty, value); }
}

public static readonly DependencyProperty GraphObjectsProperty =
    DependencyProperty.Register("GraphObjects", typeof(ObservableCollection<GraphObjectViewModel>), typeof(GraphPlotManager), new UIPropertyMetadata(null, OnGraphObjectsChanged));

private static void OnGraphObjectsChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
{
    // this code never gets hit and the Collection is still null as far as I can tell
} 
```

Edit2：在 will 的建议之后，我将数据绑定输出的详细程度一直提高，这就是我使用间谍得到的结果：

```
System.Windows.Data Information: 10 : Cannot retrieve value using the binding and no valid fallback value exists; using default instead. BindingExpression:Path=DataContext.GraphObjects; DataItem='DataContextSpy' (HashCode=44673241); target element is 'GraphPlotManager' (HashCode=565144); target property is 'GraphObjects' (type 'ObservableCollection`1') 
```

**更新：**

如果我的经理从 Freezable 继承，它可以在没有间谍的情况下工作，但如果我不继承可冻结，即使使用 DataContextSpy 也不能。我不确定在这种情况下我是否需要间谍。如果我的 GraphPlotManager 没有继承可冻结，是否可以工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:30:20.780

从 Freezable 继承而不是 DepedencyObject 允许我在 UserControl.Resources 中声明我的 GraphPlotManager 并能够使用 Bindings 和 ElementName Bindings。

[利用 Freezables 为绑定提供继承上下文](http://drwpf.com/blog/2008/05/22/leveraging-freezables-to-provide-an-inheritance-context-for-bindings/)

我知道这个技巧，但我想我主要是在 ContextMenus 或 ToolTips 方面看到它，并没有真正意识到它可能适合这种情况。

我发现的另一个有用的类是 IValueConverter，它允许您在 DataBindings 中放置断点，以检查它们何时触发以及值是什么。

```
public class DebugConverter : IValueConverter
{
    public static DebugConverter Instance = new DebugConverter();
    private DebugConverter() { }

    #region IValueConverter Members

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        Debugger.Break();
        return value; //Binding.DoNothing;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        Debugger.Break();
        return value; //Binding.DoNothing;
    }

    #endregion
}

public class DebugExtension : MarkupExtension
{
    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        return DebugConverter.Instance;
    }
} 
```

来源：[在 WPF 中调试数据绑定问题](http://wpftutorial.net/DebugDataBinding.html)

# c# - 我在哪里把 [XmlAttribute] 属性放在 c# 中？

> ID：13180434
> 
> 赞同：0
> 
> 时间：2012-11-01T15:36:00.133
> 
> 标签：c#, attributes, xml-attribute

我通过提供相应的公共属性将一些公共字段更改为私有。

例如：

```
public string Name; 
```

是更改为

```
private string _name;
public string Name
{
    get{ return _name;}
    set{ _name = value;}
} 
```

但是，原始公共字段上的 [XmlAttribute] 属性呢？即确实

```
[XmlAttribute]
public string Name; 
```

变成：

```
[XmlAttribute]
private string _name;
public string Name
{
    get{ return _name;}
    set{ _name = value;}
} 
```

或者

```
private string _name;
[XmlAttribute]
public string Name
{
    get{ return _name;}
    set{ _name = value;}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T15:37:52.223

第二个解决方案。

顺便说一句，如果您在 getter 或 setter 中没有做任何特别的事情，您不再需要（.net 3.0 和 +）私有字段。

您可以使用[自动实现的属性](http://msdn.microsoft.com/en-us/library/bb384054%28v=vs.100%29.aspx)。

```
[XmlAttribute]
public string Name {get;set;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:40:03.270

而不是做

```
private string _name;
public string Name
{
get{ return _name;}
set{ _name = value;}
} 
```

为什么不做

```
public string Name { get; set; } 
```

我认为这是在 C# 3.0 中引入的

# javascript - 一种 3d 旋转效果，是否只能使用 css3、html5 和 javascript？

> ID：13180437
> 
> 赞同：0
> 
> 时间：2012-11-01T15:36:03.153
> 
> 标签：javascript, html, css

我想知道旋转菜单的效果是否可以通过主题技术实现？这是链接：[http ://www.youtube.com/watch?v=fdsv-y9LUa4&hd=1](http://www.youtube.com/watch?v=fdsv-y9LUa4&hd=1)

或者唯一的出路是使用闪光灯？有人可以提供一些相关插件的链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:41:53.207

是的，它完全有可能！

[http://www.w3schools.com/html/html5_canvas.asp](http://www.w3schools.com/html/html5_canvas.asp)

并在这里查看它的实际效果:)

[http://www.kevs3d.co.uk/dev/canvask3d/k3d_test.html](http://www.kevs3d.co.uk/dev/canvask3d/k3d_test.html)

希望有帮助！

# php - 如何将phar文件放在phar文件中？

> ID：13180438
> 
> 赞同：13
> 
> 时间：2012-11-01T15:36:04.760
> 
> 标签：php, phar

我想在 phar 文件中放置一个 phar 文件。我最直接地尝试了它：

```
$p = new Phar('test.phar', null, 'self.phar');
$p->setStub('<?php Phar::mapPhar();
include \'phar://self.phar/index.php\'; __HALT_COMPILER(); ?>');
$p['index.php'] = '<?php
echo "hello world\n";';

$p = new Phar('test2.phar', null, 'self.phar');
$p->setStub('<?php Phar::mapPhar();
include \'phar://self.phar/index.php\'; __HALT_COMPILER(); ?>');
$p['index.php'] = '<?php
echo "hello phar world\n";';
$p['test.phar'] = file_get_contents('test.phar'); 
```

然而 PHP 只是不想打开它。它不接受以下任何内容，包括：

```
// Warning: Phar::mapPhar(phar://path/to/test2.phar/test.phar): failed to open
// stream: Invalid argument in phar://path/to/test2.phar/test.phar
include('phar://test2.phar/test.phar');

// Warning: include(phar://test2.phar/test.phar/index.php): failed to open
// stream: phar error: "test.phar/index.php" is not a file in phar "test2.phar"
include('phar://test2.phar/test.phar/index.php');

// Warning: include(phar://test2.phar/phar://test.phar/index.php): failed to
// open stream: phar error: "phar:/test.phar/index.php" is not a file in phar
// "test2.phar"
include('phar://test2.phar/phar://test.phar/index.php'); 
```

我知道这个问题的建设性是有限的，因为它可能不适用于 phar-in-phar 但可能我只是错过了如何做到这一点的方法，而我只是没有看到树木的木材。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T00:51:15.063

在 PHP 中加载 phar 文件应该使用的函数是[Phar::loadPhar](http://php.net/manual/en/phar.loadphar.php)例如

```
Phar::loadPhar("test2.phar", "test2"); 
```

将通过别名 test2 加载和访问 phar 文件 test2.phar，因此您可以通过执行以下操作包含其中的文件：

```
include ('phar://test2/index.php'); 
```

但是，如果该文件位于 phar 本身内，这似乎不起作用。loadPhar 的 PHP 代码是：

```
fp = php_stream_open_wrapper(fname, "rb", IGNORE_URL|STREAM_MUST_SEEK, &actual); 
```

显然 IGNORE_URL 标志使文件无法打开。

有一种解决方法 - 将包含在另一个 phar 中的 phar 文件提取到一个临时文件中，然后显然可以毫无问题地加载它。以下代码将提取包含在第二个 phar 文件中的 phar 文件 (phar1.phar)，然后调用 loadPhar。

```
function extractAndLoadPhar(){

    $tempFilename =  tempnam( sys_get_temp_dir() , "phar");

    $readHandle = fopen("phar://phar2/phar1.phar", "r");
    $writeHandle =  fopen($tempFilename, "w");

    while (!feof($readHandle)) {
        $result = fread($readHandle, 512);
        fwrite($writeHandle, $result);
    }

    fclose($readHandle);
    fclose($writeHandle);

    $result = Phar::loadPhar($tempFilename, "phar1");
}

extractAndLoadPhar(); //Extract and load the phar
include ('phar://phar1/src1.php'); //It can now be referenced by 'phar1' 
```

我在此处放置了此代码的工作副本[https://github.com/Danack/pharhar](https://github.com/Danack/pharphar)创建了一个 phar，将其嵌入到第二个 phar 中，然后从第二个 phar 中的第一个 phar 加载并调用一个函数。

需要注意的是 - 我不相信这种技术是一个好主意。每个 phar 文件的存根文件似乎有些模棱两可（也就是我不明白）。即它们是否都被加载，或者它只是最外层的phar文件，它的存根加载并运行。

# java - 如何在 Maven 构建期间重命名生成的类？

> ID：13180439
> 
> 赞同：2
> 
> 时间：2012-11-01T15:36:10.423
> 
> 标签：java, maven, refactoring, automated-refactoring

对于我正在处理[的项目](https://github.com/Riduidel/agorava-stackoverflow)，我将查询发送到 StackExchange 并使用[jsonschema2pojo maven plugin](http://wiki.jsonschema2pojo.googlecode.com/git/site/0.3.3/generate-mojo.html)将 JSON 结果转换为 POJO 。问题很简单：该插件总是命名包装器类`Data`及其包含的数据`Item`，当我希望命名包装器`*Wrapper`和包含的类`Answer`以调用`answers`端点时（例如）。

好吧，无论如何，我怎么能把`Data`类重命名为`AnswerWrapper`和`Item`类重命名为`Answer`？我知道它们所在的文件夹、用于定义的包等等。唯一缺少的是执行该操作的工具/插件/java 应用程序。我被[定向](https://stackoverflow.com/questions/704062/are-there-any-open-source-command-line-tools-to-refactor-java-code#704103)到[JRefactory](http://jrefactory.sourceforge.net/csr-commandline.html)，但下载的 JAR 看起来不能提供我想要的操作（并且缺少文档使其无法使用）。

那么，有没有更现代/更有效的解决方案？（或者至少一些我可以集成到我的 Maven 构建中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:52:20.200

也许不是最简单的解决方案，但可以很好地满足您的要求的一种解决方案是实际向 maven 插件添加功能以支持自定义生成的类的名称。它当然包括构建您自己的版本，并可能提交一个补丁以将其包含在主线中。

# javascript - carouFredSel 响应高度

> ID：13180445
> 
> 赞同：16
> 
> 时间：2012-11-01T15:36:21.600
> 
> 标签：javascript, responsive-design, caroufredsel

我在使用 carouFredSel 的响应式轮播时遇到高度问题。

因为图像是响应式的，并且轮播也设置为响应式。

它仍然将图像的最大高度添加到 div。

当我的图像为 740 宽且高度为 960 时。它将图像调整为响应宽度以适应屏幕，图像也被重新调整以适应宽度，但 div 似乎仍然认为存在高度为 960 的图像。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-01T16:01:29.170

不久前我偶然发现了这个问题；我找到的唯一解决方案是在调整浏览器大小时调整容器大小。它可以解决问题，但我的书呆子不太喜欢它。

我只引用了轮播，并添加了`onCreate`功能：

```
var $carousel = $("#swiper");

$carousel.carouFredSel({
  width: "100%",
  height: "auto",
  responsive: true,
  auto: true,
  scroll: { items: 1, fx: 'scroll' },
  duration: 1000,
  swipe: { onTouch: true, onMouse: true },
  items: { visible: { min: 4, max: 4 } },
  onCreate: onCreate
});​

function onCreate() {
  $(window).on('resize', onResize).trigger('resize');
}

function onResize() {
  // Get all the possible height values from the slides
  var heights = $carousel.children().map(function() { return $(this).height(); });
  // Find the max height and set it
  $carousel.parent().add($carousel).height(Math.max.apply(null, heights));
} 
```

* * *

**如果你在 2015 年还在使用这个插件，那么是时候继续前进了。**
免费版不再受支持，商业版现在是 Wordpress 插件。另外，现在谁需要破解滑块以使其响应？！

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-07-25T04:01:22.290

什么对我有用（甚至可以追溯到我的模板中的 6.0.3 版）：

正在设置 height: 'variable' 在这两个项目和主要选项中，例如：

```
 $('#foo').carouFredSel({
    responsive: true,
    width: '100%',
    height: 'variable',
    items: {
        height: 'variable'
    }
}); 
```

我可以随时调整大小，不再裁剪 DIV 等中的文本......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-23T15:41:53.250

```
$('#foo2').carouFredSel({
      responsive: true,
      auto: true,
      width: "100%",
      height: "100%",
      scroll: 3,
      prev: '#prev4',
      next: '#next4',
      items: {
        width: '100%',
        height: '100%'
      }
    }).trigger('resize'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-20T08:58:50.310

我在 carouFredsel 6.2.0 中遇到了一个问题，当在配置中给定 height:'variable' 时，创建的包装器更新了它的高度 OK，但实际的项目列表将与第一个项目的高度保持一致。然后，这会裁剪掉任何比第一个更高的后续项目。updateSizes 触发器似乎没有做任何事情，所以我使用 onAfter 事件解决了它；

```
scroll : {
  onAfter : function( data ) {          
    var carousel_height = $(this).parents('.caroufredsel_wrapper').css('height');
    $(this).css('height', carousel_height);
  }
 } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-01T21:39:39.840

没有黑客，这是使用 6.2.1 中的自定义事件。在为页面创建滑块后，设置一个窗口调整大小处理程序，并在其中为每个滑块获取新高度并使用“配置”事件来重置该滑块的高度。最后触发“updateSizes”事件。相关代码：

```
var options = {
  responsive: true,
  height: 'auto',
  onCreate: function() { jQuery(window).on('resize', resizeMyslider); },
  // remaining options
  ...
};
myslider.carouFredSel(options);

function resizeMyslider(e) {
  var newHeight = 0;
  // Get new height of items (be sure css isn't setting a fixed height)
  myslider.children().map(
    function() {
      newHeight = Math.max(newHeight, jQuery(this).height());
    }
  );
  // Change configuration of slider
  myslider.trigger('configuration', ['height', newHeight + 'px']);
  // Tell slider to use new configuration height
  myslider.trigger('updateSizes');
} 
```

理想情况下，您会通过超时或 requestanimationframe 来实现窗口调整大小事件，但这是基础。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T11:59:54.390

我在使用 CSS 媒体查询来设置 caroufredsel_wrapper 元素的尺寸方面取得了一些成功，使用 !important，如下所示：

```
.caroufredsel_wrapper {
    width: 700px !important;
    height: 393px !important;
}
@media screen and (max-width: 768px){
    .caroufredsel_wrapper {
        width: 460px !important;
        height: 258px !important;
    }
} 
```

然后我能够摆脱`onCreate`上述答案中的东西。性能也更高，因为在单个调整大小期间拖动窗口框架时，绑定到 window.resize 事件可以多次触发该函数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-10T23:16:30.640

我遇到了同样的问题并做了以下事情：

删除了从 3648 到 3652 的行，这些行看起来像：

```
if (is_number(o.items[o.d[dim]]))
{
    console.log(o.d[dim]);
    return o.items[o.d[dim]];
} 
```

这段代码在函数 ms_getLargestSize 内。

这解决了列表高度问题。为了解决包装器高度，我将 ~3609 行的参数从 true 更改为 false，该行如下所示：

```
var sz = cf_mapWrapperSizes(ms_getSizes($v, o, true), o, false); 
```

改成：

```
var sz = cf_mapWrapperSizes(ms_getSizes($v, o, false), o, false); 
```

在此之后，滑块在调整大小时工作正常，不再像 div 那样裁剪元素！

我希望它有所帮助，拉斐尔安吉琳

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-01T14:56:26.367

height: "auto" 表示旋转木马的高度将与内部最高项目的高度相同，包括不可见的项目！在响应模式下，只会更改可见项目的高度，因此轮播的高度将保持不变。（不会更改任何可见项目。）

您应该使用 height: "variable" 代替它仅根据可见项目的高度自动调整轮播的大小。

更多可在规格中找到： http: [//caroufredsel.dev7studios.com/configuration.php](http://caroufredsel.dev7studios.com/configuration.php)

希望这可以帮助。问候迪奇

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-09T22:41:35.533

[http://caroufredsel.dev7studios.com/examples/responsive-carousels.php](http://caroufredsel.dev7studios.com/examples/responsive-carousels.php) 诀窍是在项目内部设置宽度和高度。

```
$("#foo2").carouFredSel({
    responsive  : true,
    scroll      : {
        fx          : "crossfade"
    },
    items       : {
        visible     : 1,
        width       : 870,
        height      : "46%"
    }
}); 
```

问候拉尔斯

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-12-19T00:32:40.630

为插件和对我有用的项目指定 100% 的高度：

```
$('#carousel').carouFredSel({
    responsive: true,
    width: '100%',
    height: '100%',
    items: {
        height: '100%'
    }
}); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-12-23T22:05:10.050

我认为 Lars 的想法是正确的，如果您为高度指定 % 并且启用了**Responsive : true**，那么您并没有给它一个父包装器的百分比，您声明的是高度与宽度的百分比。因此，如果您的滑块在全宽时为 1000 像素宽，并且您希望它在全宽设置**高度时为 500 像素高：“50%”**将为您提供正确的起始高度，并且您的图像将根据页面大小调整而刷新。

请参阅此页面上第二个示例的代码[http://docs.dev7studios.com/caroufredsel-old/examples/responsive-carousels.php](http://docs.dev7studios.com/caroufredsel-old/examples/responsive-carousels.php)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-03-27T00:11:31.847

我想通了，caroufredsel 响应式工作正常，您只需要将图像的 css 设置为这样。

```
.caroufredsel_wrapper ul li img{
    height: auto;
    max-width: 100%;
    width: 100%;
} 
```

caroufredsel 响应式功能只会让您获得图像高度 不需要 jquery/javascript 就可以了。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-05-20T01:12:05.190

皮埃尔的回答几乎有效，除了它不检查最高的幻灯片，它检查第一张幻灯片的高度。在我的幻灯片放映中，第五张幻灯片更高，最后被切断了。

然而，在修修补补之后，我发现使用 resize 上的配置会强制调整高度！因此，作为替代方案，这是打开调试的功能。

```
var carousel = $("#swiper");

carousel.carouFredSel({
  width: "100%",
  height: "auto",
  responsive: true,
  auto: true,
  scroll: {
    items: 1,
    fx: 'scroll'
  },
  duration: 1000,
  swipe: {
    onTouch: true,
    onMouse: true
  },
  items: {
    visible: {
      min: 4,
      max: 4
    }
  },
  onCreate: function () {
    $(window).on('resize', function () {
      carousel.trigger('configuration', ['debug', false, true]);
    }).trigger('resize');
  }
});​ 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2015-02-05T04:10:08.610

我的情况是：

1) 在火狐上，carouFredSel carousal 中的图像是响应式的，即当我们改变窗口大小时，可以在 caroufredsel_wrapper 上将图像调整为新的宽度和高度。

2) 在 Chrome 上，carousal 中的图像不显示。但是，当我们改变屏幕尺寸时，哪怕是一点点，图像都会无形地出现并做出响应。

```
var $j = jQuery.noConflict();

/**
 * Init media gallery. Init carousel. Init zoom.
 */
function initMediaGallery() {

...

$j('#prod-gal').carouFredSel({
    direction       : "left",
    responsive      : true,
    width           : "100%",
    height          : "null",
    prev            : ".slick-prev",
    next            : ".slick-next",
    items : {
        display     : "block",
        float       : "left",
        height      : "706",
        visible     : 2,
        start       : 0
    },
    scroll : {
        items : {
            visible:
            {
                min: 2,
                max: 2
            }
        },
        easing          : "swing",
        duration        : 150,
        pauseOnHover    : true
    },
    auto    :   {
        play            : false,
        timeoutDuration : 2000,
    },
    pagination: {
        container       : ".pagination",
        anchorBuilder   : false
    },

});

} 
```

** 据我了解，在我的情况下，图像高度可以是“可变的”或一个固定值，例如 706。这只是初始全屏尺寸，当我们设置“responsive: ture”时，carouFredSel 应该可以自动计算所有图像的尺寸。但是为什么会这样？？

查看源代码，我们可以在 Chrome 上看到 .caroufredsel_wrapper height=0。一旦我们稍微改变浏览器大小，它将是 height=706（例如，在我的情况下）。

我尝试使用调整大小事件（如下所示），将包装器设置为初始大小，但它不工作，除非我设置了固定值，如 706。但如果我们设置一个固定值，它将始终是这个高度。

```
 onCreate: function () {
        var self = this;
        $j(window).on('resize', function () {
            $j(self).parent().height($j(self).children().first().height());
        }).trigger('resize');
    } 
```

我们可以调试js，看到返回的高度默认为0，即使我们在初始化时为每个项目图像设置了一个固定值。

```
console.log($j(self).children().first().height()); 
```

到目前为止，我们可以假设在初始化 carouFredSel 对象时，carouFreSel js 无法正确创建高度。最后，我尝试进行此更改，因为在 Chrome 上启动时计算图像高度时 carouFredSel 看起来有一些“错误”（我猜）。

```
<script type="text/javascript">
    //jQuery(document).ready(function(){
    jQuery(window).load(function(){ /* */
        initMediaGallery();
    });
</script> 
```

# jquery - jQuery datepicker如何在加载时执行函数

> ID：13180446
> 
> 赞同：1
> 
> 时间：2012-11-01T15:36:21.670
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我有以下脚本可以正常工作：

```
$(".txtDate").datepicker( {
    changeMonth: true,
    changeYear: true,
    yearRange: "+0:+1",
    showButtonPanel: false,
    dateFormat: "dd/mm/yy",
    onSelect: function(dateText, obj){
        test_function( dateText );
    }
} );

$('.txtDate').datepicker( "setDate" , new Date() );

function test_function( strDate ) {
    alert( strDate );
} 
```

它`datepicker`启用 HTML 控件`.txtDate`，默认情况下在网页加载时显示今天的日期，`.txtDate`如果我从`datepicker`.

我的问题是，如何在页面加载时`datepicker`执行`test_function`，以便在页面加载时设置的警报中显示默认日期`datepicker`？

警报`test_function`只是一个测试，看看何时`datepicker`执行其他功能，最终结果会复杂得多。

另外，我有一个基于小部件的网站，它允许人们一次在页面上添加许多相同的小部件，这意味着我将拥有许多`.txtDate`控件。所以我不能只得到 的值`.txtDate`，我需要根据 $(this) 找到最接近的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:49:22.767

您尝试`test_function()`在页面加载中调用此函数，因此您可以在页面加载中获取日期选择器默认值，例如，

```
<script type="text/javascript" language="javascript">
$(function(){
   $('.txtDate').datepicker( "setDate" , new Date() );     
   test_function();
});

function test_function() {
   alert( $("#txtDate").val() );
 }
</script> 
```

您不需要将任何参数值传递给此 js 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:10:04.893

试试这个

```
 function addLoadEvent(func) {
       var oldonload = window.onload;
       if (typeof window.onload != 'function') {
         window.onload = func;
       } else {
         window.onload = function() {
           if (oldonload) {
             oldonload();
           }
           func();
         }
       }
       }

    addLoadEvent(incompleteForm);

    function incompleteForm()
    {
       alert( $("#txtDate").val() );
    } 
```

# node.js - node.js 中的时间问题

> ID：13180447
> 
> 赞同：1
> 
> 时间：2012-11-01T15:36:25.250
> 
> 标签：node.js, express

我无法理解如何正确处理节点回调中的分配。我正在读取配置文件并使用道具在快速应用程序中设置它的值来解析.yaml。当我尝试使用我显然设置的内容时，我无法 app.get 这些值。（props 模块需要 cfg_decoder）。console.log() 在回调中正常工作，但是如何在回调之外处理 app.get 或知道何时设置了值？

```
app = express()

fs.readFile('./config.yaml', function (err,data) {
  if (err) {
    return console.log(err);
  }

  cfg = cfg_decoder(data);
  app.set('title', cfg['title'])
  app.set('port', cfg['port'])

  console.log(app.get('title'))

}); 
```

附带说明一下，这是设置配置选项的好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:55:20.287

只要实例化了 express 对象，您就应该能够在任何范围内使用 app.get() 方法。

您可以让 fs.readFile() 函数返回您的设置值，然后让 app.set() 在读取函数的范围之外完成。

```
function read(file){
    var content;
    fs.readFileSync(file, function (err, data) {
        if (err) return console.log(err);
        content = cfg_decoder(data);
    });
    return content;
}

var config = read('./config.yaml');
app.set('title', cfg['title'])
app.set('port', cfg['port']) 
```

对于我的应用程序，我使用 config.js 文件，或者您可以使用 config.json 文件（这会更容易）。在我的 .js 文件中，我只有一个对象数组声明并让它导出该对象。

**配置.js**：

```
var config = {
    host: '127.0.0.1',
    port: '8000',
    title: 'Title',
    /* etc */
};
module.exports = config; 
```

**应用程序.js**：

```
var config = require('./config'),
    express = require('express'),
    app = express();

app.set('title', config.title);
app.listen(config.port, config.host); 
```

我希望这有帮助。

# ruby-on-rails - 使用 cucumber 和 Ruby on Rails 登录到控制台

> ID：13180449
> 
> 赞同：1
> 
> 时间：2012-11-01T15:36:25.307
> 
> 标签：ruby-on-rails, cucumber, capybara

我正在使用 cucumber 和 rails 构建一些测试场景和步骤

例如，这是一个简单的代码，用于检查和取消选中页面中的复选框，我想记录正在发生的事情，就像一种调试：

```
When /^I (un)?check all ratings$/ do |uncheck|
  page.all("[type='checkbox']").each do |checkbox|
    if !uncheck
      check(checkbox[:id])
      #i want Here to log which checkboxes are checked
    else
      uncheck(checkbox[:id])          
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T15:47:22.487

如果您正在寻找的只是登录到标准输出，那么只需`puts`在您的步骤中添加一个即可。

但是您可以在您的步骤中放置任何类型的任意 ruby​​，因此您可以打开一个文件并写入该文件，或者使用 ruby`Logger`​​ 或其他任何东西。天空是极限。

# bash - 使用 bash 脚本显示 cpu 使用情况并在 txt 文件中打印

> ID：13180451
> 
> 赞同：0
> 
> 时间：2012-11-01T15:36:30.483
> 
> 标签：bash

我有个问题。

我需要执行一个 bash 脚本命令来显示 CPU 使用情况并在外部 txt 文件中标记。

有什么想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:46:32.157

您可以`sysstat`按照评论中的建议使用或坚持使用（可能已安装）`top`。我系统中的示例（如果需要，您当然可以 grep 特定字段）：

```
$ top -bn 1 | sed -n '3p'
%Cpu(s): 16.4 us,  3.1 sy,  0.0 ni, 79.0 id,  1.3 wa,  0.0 hi,  0.2 si,  0.0 st 
```

您可以添加时间戳`date`：

```
$ date
Thu Nov  1 19:46:15 MSK 2012 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T13:31:45.240

顶级版本和 sysstat 从来没有为我工作过。这做到了：

```
ps -A -o pcpu | tail -n+2 | paste -sd+ | bc 
```

# asp.net-mvc - 由于外键关系，模型状态无效

> ID：13180453
> 
> 赞同：0
> 
> 时间：2012-11-01T15:36:45.297
> 
> 标签：asp.net-mvc

由于 ModelState 无效，创建对象失败。任何帮助将不胜感激。简化模型如下所示：

```
public partial class Timerecord
{
    public int ID { get; set; }
    public int locationID { get; set; }
    public int teamID { get; set; }
    public int actionID { get; set; }
    public System.DateTime currentTime { get; set; }

    public virtual Location Location { get; set; }
    public virtual Action Action { get; set; }
} 
```

由于错误，创建正确提供的 Timerecord 失败：“从类型 'System.String' 到类型 'Project.Models.Action' 的参数转换失败，因为没有类型转换器可以在这些类型之间转换。”} System.Exception { System.InvalidOperationException}

Timerecord 的所有属性都很好，但是 Action 和 Location 都是 Null（这不是问题......因为外键是正确的）。我必须自己设置 de 异物然后重新评估模型，还是必须提供构造函数 Action(string)？

```
 [HttpPost]
    [ValidateAntiForgeryToken]
    public ActionResult Create(Timerecord tm)
    {
        try
        {
            if (ModelState.IsValid)
            {
                db.Timings.Add(tm);
                db.SaveChanges();
                return RedirectToAction("Index");
            }
            else
            {
                var errors = ModelState.SelectMany(x => x.Value.Errors.Select(z => z.Exception));
                ...
            }
            ... 
```

该问题似乎是由Controller的Create方法引起的（简化）：

```
 public ActionResult Create()
    {
        Timerecord tm = new Timerecord();
        LocationDBContext dbLoc = new LocationDBContext();
        ActionDBContext dbAct = new ActionDBContext();

        tm.currentTime = DateTime.Now;
        tm.locationID = 1;
        tm.actionID = 5;
        tm.Location = dbLoc.Location.Find(tm.locationID);
        /* THE PROBLEM: tm.Action = dbAct.Action.Find(tm.actionID); PROBLEM HERE */

        ViewData.Model = tm;
        return View();
    } 
```

位置没有问题，Action 有问题。感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:07:18.493

将 Action 重命名为 Activity，一切正常！猜猜绑定（...）搞砸了 System.Action？！？没有其他解释。也许有人可以证实这种麻烦。

# css - 提交按钮 css。Firefox 中的大纲

> ID：13180454
> 
> 赞同：1
> 
> 时间：2012-11-01T15:36:51.803
> 
> 标签：css, forms, firefox

我想控制表单提交按钮的设计，但我不想摆脱焦点上的轮廓（周围的蓝色边框）。我在使用 Firefox 时遇到问题。

我认为这对可访问性很重要，因为很多人使用标签来填写表格。轮廓给出了一个方向，以查看选择的内容。

我认为关键是边框，我认为要控制设计我应该给边框一些css，甚至没有边框。如果我在 Firefox 中设置边框，轮廓会消失，并且会出现一些难看的虚线。我可以用 ::-moz-focus-inner {border:0;} 摆脱那些行但是，我不知道如何只给 Firefox 一个阴影。

那么问题来了：

*   我能否以一种不同的方式控制提交按钮的设计，使其适用于所有浏览器，甚至是 Firefox？

*   如何给出**可以在 Firefox 中使用的轮廓或阴影**？

我在这里有这个例子：http: [//jsfiddle.net/56mfx/15/](http://jsfiddle.net/56mfx/15/)

CSS：

```
input[type="submit"] {    
    width: 80px;
    height: 25px; 
    color: #fff;
    background-color: #ccc;
    border:solid thin #ddd;
}​ 
```

HTML：

```
<input type="submit" name="submit" value"send" id="submit">​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:57:17.760

这是您的自定义提交按钮。您也可以使用图像。

HTML：

```
<input type="submit" value="Submit" class="submit" /> 
```

CSS：

```
.submit{
    background:#BDBDBD;
    height:30px;
    width:100px;
    border:none;
    color:#2E2E2E;
    font:family:Arial;
    font-weight:bold;
    font-size:15px;
    cursor:pointer;
}

.submit:hover{
    background:#DF01D7;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:50:02.650

你知道，你可以创建一个`<div>`然后提交你的表单。

```
<div class="sbmtBtn" onmouseup="document.forms['myform'].submit()">Submit</div> 
```

然后样式化

```
.sbmtBtn{
    width: 80px;
    height: 25px; 
    color: #fff;
    background-color: #ccc;
    border:solid thin #ddd;
    /* Use the following to set a shadow only in FF */
    -moz-box-shadow: 0 0 3px #000000;
} 
```

我总是喜欢使用 a`<div>`作为按钮，因为我有更多的控制权。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T11:17:11.647

您可以通过以下方式解决：

```
input[type="submit"] {    
     width: 80px;
     height: 25px; 
     color: #fff;
     background-color: #ccc;
     border:solid thin #ddd;
     outline: none;

     -moz-box-shadow: 0 0 3px #333;

     /* or for outline:
     -moz-outline: 1px solid #c00;
     */
} 
```

# javascript - JSON Javascript 转义

> ID：13180462
> 
> 赞同：7
> 
> 时间：2012-11-01T15:37:32.020
> 
> 标签：javascript, json

所以我在下面有一些我的示例动态 JSON，我遇到的麻烦是正确地转义所有内容，以便它由 JSON.parse 或 Jquery.parseJSON 正确处理，由于某种原因它目前不是。我试过替换所有引号，但它没有解决任何问题......

```
var Json = '{"resolved_id":"244296544","resolvedUrl":"http:\/\/www.engadget.com\/2012\/11\/01\/windows-phone-for-mac\/","host":"engadget.com","title":"Windows Phone 7 Connector for Mac updated for WP8, rebranded simply as \'Windows Phone\'","datePublished":"2012-11-01 04:49:00","timePublished":1351763340,"responseCode":"200","excerpt":"For Mac users who prefer Microsoft as their mobile partner, Windows Phone 7 Connector has been the one bridging the divide so far. The sync app has just been updated to v3.0, gaining support for Windows Phone 8 and a concise new name -- \"Windows Phone\" -- to match its Windows 8 counterpart.","authors":{"5437327":{"author_id":"5437327","name":"Deepak Dhingra","url":"http:\/\/www.engadget.com\/editor\/deepak-dhingra"}},"images":{"1":{"item_id":"244296544","image_id":"1","src":"http:\/\/www.blogcdn.com\/www.engadget.com\/media\/2012\/11\/win-phone-for-mac-1351752168.jpg","width":"0","height":"0","credit":"","caption":""}},"videos":"","wordCount":116,"isArticle":1,"isVideo":0,"isIndex":0,"usedFallback":0,"article":"\n<a href=\"http:\/\/www.engadget.com\/2012\/11\/01\/windows-phone-for-mac\/\" nodeIndex=\"493\"><img src=\"http:\/\/www.blogcdn.com\/www.engadget.com\/media\/2012\/11\/win-phone-for-mac-1351752168.jpg\" \/><span class=\"ril_caption\"> <cite><\/cite><\/span><\/a>\n<p nodeIndex=\"91\" scoreAddedToParent=\"37\">For Mac users who prefer Microsoft as their mobile partner, <a href=\"http:\/\/www.engadget.com\/2011\/08\/31\/windows-phone-7-mango-will-play-nicer-with-macs-update-your-con\/\" nodeIndex=\"495\">Windows Phone 7 Connector<\/a> has been the one bridging the divide so far. The sync app has just been updated to v3.0, gaining support for <a href=\"http:\/\/www.engadget.com\/2012\/10\/29\/windows-phone-8-review\/\" nodeIndex=\"496\">Windows Phone 8<\/a> and a concise new name -- \"Windows Phone\" -- to match its <a href=\"http:\/\/www.engadget.com\/2012\/10\/29\/microsft-adds-windows-phone-app-to-windows-store\/\" nodeIndex=\"497\">Windows 8 counterpart<\/a>. The new app plays well with <a href=\"http:\/\/www.engadget.com\/tag\/RetinaMacbookPro\/\" nodeIndex=\"498\">Retina Macs<\/a> too, while other goodies in the changelog include drag-and-drop capability for transferring files in either direction, along with support for iPhoto 9.3.2 and Aperture 3.3.2\. Incoming WP8 devices such as the <a href=\"http:\/\/www.engadget.com\/2012\/10\/29\/htc-8x-review-windows-phone-8s-compact-flagship\/\" nodeIndex=\"499\">HTC 8X<\/a> and the <a href=\"http:\/\/www.engadget.com\/2012\/10\/04\/nokia-lumia-920-for-atandt-hands-on-a-windows-phone-8-flagship-wi\/\" nodeIndex=\"500\">Lumia 920<\/a> will also get enhanced ringtone features and allow battery life to be monitored via the app. Persuaded? Then collect your goods at the source link below.<\/p>\n\n"}'; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T15:46:21.940

在 JSON 中，字符串中的引号需要用反斜杠转义：`{"key": "prop with \" quote"}`。

在 JavaScript 中，字符串文字中的引号和反斜杠需要使用反斜杠进行转义：`"string with \\backslash and \" quote"`。

如果您确实需要在 JS 字符串文字中使用 JSON（没有理由这样做），则需要对它们进行双重转义：`json = "{\"key":\"prop with \\\" quote and \\n linebreak\"}"`. 对于围绕“Windows Phone”的引用，您还没有这样做。

但是，在处理此类问题时，您一定做错了什么。通常，您从 ajax 调用等中获取 JSON 字符串，您已经将它们作为字符串值获取。如果您想将一些服务器创建的 JSON 直接回显到 js 脚本中，则无需将其包装在字符串文字中 - 它已经[[几乎]](http://timelessrepo.com/json-isnt-a-javascript-subset)有效的 Object Literal 语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:46:44.187

您的问题可能是您的整个`Json`对象只是一个字符串，因为开头和结尾的引号。JSON 的想法是将复杂变量分配给一个对象，如下所示：

```
var Json = {
  "resolved_id": "244296544",
  ...
} 
```

此外，无需转义正斜杠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T15:42:03.050

一路走到最后：

```
'...\n\n"}'; 
```

转义反斜杠：

```
'...\\n\\n"}'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T15:47:32.073

根据[JSONLint](http://jsonlint.com/)，您的问题出在这一行：

```
"title": "Windows Phone 7 Connector for Mac updated for WP8, rebranded simply as \'Windows Phone\'", 
```

如果您删除 ' 上的反斜杠，它会验证。在[JSON](http://www.json.org/)中，您不会逃避 '

不幸的是，由于您使用 ' 来分隔字符串，因此您需要找到另一种方法来转义它。您可以使用 \u0027 代替 \'。

# b-method - 用b语言测试一个程序

> ID：13180463
> 
> 赞同：2
> 
> 时间：2012-11-01T15:37:33.757
> 
> 标签：b-method

我不确定这是否适合stackoverflow，但我不知道还能问哪里。对于用[b 语言](https://en.wikipedia.org/wiki/B-Method)编写的程序（不是 B 语言，C 和 C++ 的前身），我想知道它是否写得好，是否可以进行编译或测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T01:40:45.883

使用[Atelier B，高效部署 B 方法的工业工具](http://www.atelierb.eu/en/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-19T08:53:08.087

您可以使用[Pro B](https://www3.hhu.de/stups/prob/index.php/Main_Page)为您在 Atelier B 中编写的内容制作动画。

# linux - 远程 SSH 的 Shell 脚本

> ID：13180467
> 
> 赞同：1
> 
> 时间：2012-11-01T15:37:50.280
> 
> 标签：linux, bash, shell, unix, ssh

我是`shell`脚本新手，我`centos`正在运行。我想编写`ssh`一个远程机器的shell脚本并执行一堆命令。我面临的问题是如何为连接远程机器的命令提供用户名、密码、远程机器地址和私有访问密钥。

我用谷歌搜索并找到了一些脚本，但它们都需要一个名为 的实用程序`expect`，我不想安装任何实用程序，只是为了运行我的脚本。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T03:23:37.223

您可以在`ssh`通话中传递您需要的所有内容，执行以下操作：

```
ssh -i private_key_path user_name@remote_machine "command" 
```

如果您要多次使用此连接，并希望对其进行配置，请将以下行添加到您的`.ssh/config`文件中：

```
Host host_alias
    User user_name
    HostName remote_machine
    IdentityFile private_key_path 
```

然后访问远程机器，并执行你想要的命令，方法是：

```
ssh host_alias "command" 
```

请注意，命令 AFAIK 必须用引号括起来，因为它必须仅被视为**一个**参数`ssh`。

# tapestry - Tapestry 入门

> ID：13180474
> 
> 赞同：2
> 
> 时间：2012-11-01T15:38:16.483
> 
> 标签：tapestry

我期待进入 Tapestry5 的世界。我在 JSF 和 Struts 中进行了广泛的开发。有什么好书或教程可以帮助我入门吗？

亲切的问候，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T08:56:20.320

从“[入门](http://tapestry.apache.org/getting-started.html)”指南开始，然后查看[jumpstart以及](http://jumpstart.doublenegative.com.au/jumpstart/)[官方文档](http://tapestry.apache.org/documentation)的其余部分。

[邮件列表](http://tapestry.apache.org/community.html#Community-ReportingProblems/GettingSupport)和[wiki](http://wiki.apache.org/tapestry/FrontPage)也很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T17:34:49.550

有一本书即将出版，由 Igor Drobiazko 撰写并自行出版。

关于这本书的详细信息在这里：[http ://www.tapestry5book.com/](http://www.tapestry5book.com/)

# ssis - 如何跨包内的脚本任务访问变量？

> ID：13180475
> 
> 赞同：3
> 
> 时间：2012-11-01T15:38:17.357
> 
> 标签：ssis

我在序列容器中有两个 SSIS 脚本任务。我已经**`StartTime`**在`Script Task 1`. 我想在`Script Task 2`.

是否可以访问`StartTime`内部的变量`Script Task 2`？如何访问变量？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T16:57:00.043

在 SSIS 包中创建变量时，可以定义变量的范围。此范围定义控制流上的哪些任务对变量具有可见性。

### 描述变量范围的示例包：

这是一个示例 SSIS 包。

我创建了一个包，其中包含一个序列容器和两个脚本任务。我在不同的范围内创建了四个变量。

如果要查看不同作用域下定义的所有变量，需要勾选`Variables`窗格上的第四个按钮。该选项由屏幕截图中的箭头指示。

以下是变量在每个范围内的工作方式：

**`StartTime_Package`**- 这个变量是在 scope 下声明的`MyPackage`，它也恰好是包名。这是顶级范围。此变量将对控制流上的所有任务可见。

**`StartTime_Sequence`**- 该变量在范围内声明，范围`Sequence Container`是序列容器任务的给定名称。此变量仅对序列容器和序列容器中的任务可见。

**`StartTime_Task1`**- 此变量在范围内声明，范围`Script Task 1`是序列容器中第一个脚本任务的给定名称。此变量仅对第一个脚本任务可见，其他任务不可见。

**`StartTime_Task2`**- 此变量在范围内声明，范围`Script Task 2`是序列容器中第二个脚本任务的给定名称。此变量仅对第二个脚本任务可见，其他任务不可见。

![变量范围](../Images/2b8603f7adbfdf5ee706a6afb4c0a648.png)

### 如何检查任务是否可以访问变量？

这是识别特定任务是否可以访问变量的更简单方法。让我们取消选中“变量”窗格上的第三个选项。

点击`Script Task 1`。您会注意到该变量`StartTime_Task2`未显示在“变量”窗格中，因为`Script Task 1`它不可见。

同样，您可以单击任务并验证它可以访问哪些变量。

您必须根据您的要求决定变量的范围。如果您要跨任务共享变量的值，则可以安全地在最顶层的包级别范围内声明它。

如果您非常确定不会访问特定任务之外的某个变量，那么在该任务的范围级别声明它是安全的。

![变量的范围。](../Images/388d1164cf65d03af503f2a1e1b0c585.png)

### 如何使用脚本任务读取变量或将值写入变量？

双击脚本任务，会出现脚本任务编辑器。您必须确定是只想读取变量值还是在任务中修改它。我将修改一个变量值，然后在消息框中显示该值。为此，我必须选择一个已经在包上声明的变量，并为脚本任务提供读写访问权限。单击`ReadWriteVariables`属性的省略号按钮

![脚本任务编辑器](../Images/624b441c5a55ecdfcf35c9957fbc4d83.png)

选择变量将列出脚本任务有权访问的变量（系统和用户级别）。我要选择`StartTime_Package`变量。

![选择变量](../Images/f625d9a7506fb7ccf6b7d063aab2ee5f.png)

您可以看到现在在属性中列出的变量。您可以选择多个变量。单击编辑脚本，以便我们可以修改 C# 代码以将值写入变量然后读取它。

![编辑脚本](../Images/e4df8b9d22e059ae07313eea4377a55e.png)

将以下代码粘贴到脚本任务中。第一行分配值，这里我只是在今天的日期上加上 7 天。第二行在消息框中显示变量的值。

```
public void Main()
{
    Dts.Variables["StartTime_Package"].Value = DateTime.Now.AddDays(7);

    MessageBox.Show(Dts.Variables["StartTime_Package"].Value.ToString());
    Dts.TaskResult = (int)ScriptResults.Success;
} 
```

![脚本任务代码](../Images/81aecedb6d6a474c2155a60cacc77b19.png)

如果我们运行包，它将在消息框中显示该值。该包于 2012 年 11 月 1 日执行，您可以看到该包显示 2012 年 11 月 8 日的修改值。

![消息框](../Images/3cefaef33d3174462f0c46310ed94499.png)

希望这能让您对 SSIS 中的变量范围有所了解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:16:23.793

确保变量 (StartTime) 的范围是 Package - 应该这样做。变量可在整个包中使用。

在第一个脚本任务中，将您的变量添加为 Readwrite 变量，并可能在脚本中分配一些值。

同样在第二个脚本任务中，将其添加为读取或读写变量，您可以在那里引用它。

# c# - 无法更新用户，因为它正在检查唯一的用户名

> ID：13180481
> 
> 赞同：2
> 
> 时间：2012-11-01T15:38:46.820
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

我有用户创建的页面，显然我不希望我的用户拥有相同的用户名，所以我为此创建了验证，但是我现在编辑用户时遇到问题。当我尝试编辑用户时，它不允许我这样做，因为它说用户名已经被占用。但我什至不想编辑用户名，只是密码什么的。

编辑：我确实通过调用犯了错误`ValidateModel()`，现在我解决了这个问题，但仍然遇到问题。

**验证器**

```
public class UniqueUsername : ValidationAttribute
{
    public override bool IsValid(object value)
    {
        if (value == null) return true; // In Edit view you can't edit username so it's null

        FinanceDataContext _db = new FinanceDataContext();
        var user = _db.Users.ToList().Where(x => x.Username.ToLower() == value.ToString().ToLower()).SingleOrDefault();

        if (user == null) return true;
        return false;
    }
} 
```

**模型**

```
public class User
{
    public int ID { get; set; }

    // When I remove UniqueUsername and Remote validators everything works just fine
    [Required]
    [UniqueUsername(ErrorMessage = "Username is already taken")]
    [Remote("CheckUsername", "User", null, ErrorMessage = "Username is allready taken", HttpMethod = "POST")]
    public string Username { get; set; }

    [Required]
    public string Password { get; set;}
} 
```

**行动**

```
[HttpPost]
[ValidateAntiForgeryToken]
public ActionResult Edit(User u)
{
    // Get user we want to edit
    var user = _db.Users.Where(x => x.ID == u.ID).SingleOrDefault();
    if (user == null) return HttpNotFound();

    // Set new fields manually
    if (!string.IsNullOrEmpty(u.Password)) user.Password = Infrastructure.Encryption.SHA256(u.Password);

    ModelState.Remove("Username"); // this doesen't seem to do much...

    _db.SaveChanges(); // validation error here
    return Content(Infrastructure.Helper.SerializeObject(u));
} 
```

**错误**

> 一个或多个实体的验证失败。有关更多详细信息，请参阅“EntityValidationErrors”属性。

*我知道为什么它会给我带来错误。因为他检查用户名是否已经被使用，当然它已经被使用，但我想验证用户名是否只在 CREATE 上使用，而不是在 EDIT 上（因为你不能更改你的用户名）*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:46:50.283

您的编辑方法加载`User`具有用户名的实体。之后，您调用`ValidateModel`它检查`User`数据库中是否存在具有此用户名的 a，如果存在则返回 false（无效）。好吧，当然有一个，因为您刚刚加载了它！该错误表明您的 IsValid 方法返回 false。

您的问题的解决方案是检查用户名是否已经存在但 id 不同。将您的验证更改为此代码：

```
public class UniqueUsername : ValidationAttribute
{
    public override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        if (value == null) return ValidationResult.Success; // In Edit view you can't edit username so it's null
        var currentUser = validationContext.ObjectInstance as User;
        FinanceDataContext _db = new FinanceDataContext();
        var user = _db.Users.ToList().Where(x => x.Username.ToLower() == value.ToString().ToLower() && x.ID != currentUser.ID).SingleOrDefault();

        if (user == null) return ValidationResult.Success;
        return new ValidationResult("Username exists");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:51:30.317

您获得的异常是由于在属性“ProxyCreationEnabled”设置为 true 的情况下创建了 EF 上下文。试试这个，而不是“context.ContextOptions.ProxyCreationEnabled = false;”

但是，就您的验证而言，我将摆脱数据注释，而是使用更容易使用和编写测试的流畅验证。

[http://fluentvalidation.codeplex.com/wikipage?title=mvc&referringTitle=Documentation](http://fluentvalidation.codeplex.com/wikipage?title=mvc&referringTitle=Documentation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T15:46:40.133

我不确定你在这里做什么，因为你正在验证你刚刚从数据库中提取的模型，那应该还没有被验证吗？

发布的用户模型 (u) 在发布时经过验证，您可以通过以下方式验证其验证：

```
if(ModelState.IsValid) 
```

如果这没有验证，那么您可以在这种情况下使用 *username 删除特定的属性验证错误）：

```
var username = ModelState["Username"];
if (username != null)
{
   username.Errors.Clear();
} 
```

除非您允许更改用户名，否则应该没问题；我假设用户名将与经过验证的数据库版本保持不变。

# c# - 将元组列表转换为字典

> ID：13180486
> 
> 赞同：20
> 
> 时间：2012-11-01T15:39:08.013
> 
> 标签：c#

如何以最短的方式将元组列表转换为字典（C#）？

```
IList<Tuple<long, int>> applyOnTree = getTuples(); 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-01T15:41:33.410

假设`long`是键，`int`是值；

```
applyOnTree.ToDictionary(x => x.Item1, x => x.Item2); 
```

显然，如果相反，只需将这两个颠倒即可。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T15:41:25.477

使用`ToDictionary`扩展方法：

```
var dictionary = applyOnTree.ToDictionary(l => l.Item1, l => l.Item2); 
```

# http - windows下使用telnet测试http

> ID：13180487
> 
> 赞同：5
> 
> 时间：2012-11-01T15:39:10.773
> 
> 标签：http, telnet, windows-7-x64

我正在学习 http，并尝试使用 telnet 发送我自己的 http 请求。

在命令提示符下，我输入：

```
telnet google.com 80 
```

结果：屏幕被清除，我看到一个闪烁的光标。1\. 为什么我没有看到任何表明我已连接的迹象？

现在，尝试键入 http 命令 (get index.html...) 我看到光标在我键入时向右移动，但我没有看到字母出现在屏幕上。只有空格。2\. 为什么会这样？

（使用windows7 64位）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-01T15:57:30.473

> 为什么我没有看到任何表明我已连接的迹象？

*空白屏幕上*闪烁的光标表示您已连接。否则，您将收到描述无法连接原因的错误消息。

> 我在键入时看到光标向右移动，但我没有看到字母出现在屏幕上。

[使用 localecho](https://stackoverflow.com/questions/1098503/how-to-unsupress-local-echo)。

> 一个 http 命令（获取 index.html...）

这不是一个有效的 HTTP 请求，您至少应该输入类似这样的内容，后跟两个`Enter`s：

```
GET / HTTP/1.1
Host: google.com 
```

查看有关如何构造 HTTP 请求的[RFC并查看一些示例。](https://www.rfc-editor.org/rfc/rfc2616)

# java - java.util.Map 的交集

> ID：13180488
> 
> 赞同：44
> 
> 时间：2012-11-01T15:39:12.817
> 
> 标签：java, dictionary, collections, set-intersection

是否有`java.util.Map`在两张地图上执行交叉路口的方法或任何实用程序？（通过“键”与两个地图相交）

我找不到任何东西。我总是可以实现自己的交集逻辑，但我希望其中一个`java.util.*`类中已经有一些操作可以做到这一点。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-11-01T15:43:21.060

怎么样：

```
Map map1 = ...;
Map map2 = ...;
Map result = new ...(map1);
result.keySet().retainAll(map2.keySet()); 
```

或者：

```
Map map1 = ...;
Map map2 = ...;
Set result = new ...(map1.keySet());
result.retainAll(map2.keySet()); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-01T16:07:31.533

如果您使用 Guava，您可以使用[`Maps.difference`](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/Maps.html#difference-java.util.Map-java.util.Map-)获取一个[`MapDifference`](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/MapDifference.html)对象，您可以从中提取`entriesInCommon()`和`entriesDiffering()`作为地图。（披露：我为 Guava 做出了贡献。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-01T15:43:17.387

番石榴[`Sets.intersection(Set, Set)`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Sets.html)应该完成这项工作，每个 Map 的 keySet 作为参数传入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T15:46:03.120

我会推荐 apache [collectionUtils#intersection](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/CollectionUtils.html#intersection%28java.util.Collection,%20java.util.Collection%29)

请执行下列操作：

```
 Collection intersection=    
      CollectionUtils.intersection(map1.keySet(),map2.keySet()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T15:43:10.443

要测试交叉点，您可以使用 containsAll() 操作。'如果此集合包含指定集合的​​所有元素，则返回 true。如果指定的集合也是一个集合，如果它是这个集合的一个子集，这个方法返回 true。

要获取这些相交元素的集合，您可以使用 retainAll() 操作。

这些方法都可以在这里找到

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Set.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Set.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T15:49:40.347

循环遍历一张地图的键，看看它们是否在第二张地图中：

```
private Map getIntersection(Map mapOne, Map mapTwo)
{
    Map intersection = new HashMap();
    for (Object key: mapOne.keySet())
    {
        if (mapTwo.containsKey(key))
           intersection.put(key, mapOne.get(key));
    }
    return intersection;
} 
```

# excel - 总计列的自定义公式

> ID：13180492
> 
> 赞同：4
> 
> 时间：2012-11-01T15:39:27.560
> 
> 标签：excel, excel-2010, pivot-table, powerpivot

我经常遇到一个问题，我想在数据透视表的值区域中使用的公式与我想用于该行的总计列的公式不同。我通常想对值求和，但我想对总和求平均。如果我旋转列标签上的日期、行标签上的肉类类型和值中的总和顺序，这就是我通常会得到的结果。

```
Row Lables | Day 1 | Day 2 | Day 3 | Grand Total
________________________________________________
Beef       |  100  |  105  |  102  |   307
Chicken    |  200  |  201  |  202  |   603 
```

我得到了按天计算的总和以及“总计”列中所有天数的总和。这是我想要的：

```
Row Lables | Day 1 | Day 2 | Day 3 | Grand Total (Avg of Day Totals)
________________________________________________
Beef       |  100  |  105  |  102  |   102.3
Chicken    |  200  |  201  |  202  |   201.0 
```

在这种情况下，订单仍按天求和，但总计现在是总和的平均值。我现在要做的是将 Pivot 数据复制并粘贴到单独的工作表上，然后计算平均值。如果有一种方法可以使用自定义的总计列来做到这一点，那将是不可思议的。这对我来说是数据透视表的最大缺点之一，但我希望这是由于我的无知，而这通常是。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T02:34:05.233

您可以编写一个度量来检查特定过滤器上下文中的“行”数，并将其嵌套在 IF() 中以确定使用哪个。

如果使用 PowerPivot V2，则为：

```
=IF(HASONEVALUE(Calendar[Day]), SUM(AMOUNT), AVERAGE(AMOUNT)) 
```

如果使用 PowerPivot V1，则为：

```
=IF(COUNTROWS(Calendar[Day])=1, SUM(AMOUNT), AVERAGE(AMOUNT)) 
```

两者都做同样的事情，因为它们在给定的上下文中评估表中的行数，当肉类类型为“牛肉”时，临时过滤的表只有一行。如果它没有一行，那么它会沿着 AVERAGE() 的路径前进

这假设您的列标题“天”位于名为日历的表中（如果您不使用单独的日历表，那么您将缺少 PowerPivot IMO 最强大的功能）。雅各布

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T18:27:16.830

我想不出一个“好”的方法，但这里有一个选择。再次将 Amount 字段添加到数据区域并将操作更改为 Average。然后使用条件格式隐藏数据区域中的平均值并隐藏总区域中的总和。

![具有条件格式的数据透视表](../Images/8434e8acd330967228fd859ac3f095f0.png)

在自己动手的数据透视表中使用一些数组公式可能会更好。您失去了数据透视表的好处，但在数据方面获得了更大的灵活性。

# facebook-graph-api - 我可以在提交后更改 Facebook 时间线操作吗

> ID：13180496
> 
> 赞同：0
> 
> 时间：2012-11-01T15:39:47.443
> 
> 标签：facebook-graph-api, facebook-timeline

我正在通过定义几个自定义操作在应用程序中添加时间线集成，但我们稍后可能会更改这些操作（添加可选参数、更改框可视化、措辞等）。

这是否可以*在*我们提交操作以供批准之后，并且在它们最终获得批准之后进行？我希望他们需要再次获得批准，但我不确定。

已经发布的操作会发生什么？在最终的重新批准过程中会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:48:08.043

当然，如果你改变它们，你的行为必须再次经过批准。

对于现有和已批准的操作，当您更改它们并再次提交以供批准时，它们应保持原样，它们将显示其“旧”行为，直到更改获得批准。

# pandas - 移动 MultiIndex 时间序列的最有效方法

> ID：13180499
> 
> 赞同：7
> 
> 时间：2012-11-01T15:39:55.143
> 
> 标签：pandas

我有一个由许多堆叠时间序列组成的 DataFrame。索引是 (poolId, month)，其中两个都是整数，“月”是自 2000 年以来的月数。计算多个变量的一个月滞后版本的最佳方法是什么？

现在，我做类似的事情：

```
cols_to_shift = ["bal", ...5 more columns...]
df_shift = df[cols_to_shift].groupby(level=0).transform(lambda x: x.shift(-1)) 
```

对于我的数据，我运行了整整 60 秒。（我有 48k 不同的池和总共 718k 行。）

我正在从 R 代码和等效的 data.table 调用中转换它：

```
dt.shift <- dt[, list(bal=myshift(bal), ...), by=list(poolId)] 
```

只需 9 秒即可运行。（这里的“myshift”类似于“function(x) c(x[-1], NA)”。）

有没有办法让熊猫版本在速度方面恢复正常？我在 0.8.1 上对此进行了测试。

编辑：这是一个生成足够接近的数据集的示例，因此您可以了解我的意思：

```
ids = np.arange(48000)
lens = np.maximum(np.round(15+9.5*np.random.randn(48000)), 1.0).astype(int)
id_vec = np.repeat(ids, lens)
lens_shift = np.concatenate(([0], lens[:-1]))
mon_vec = np.arange(lens.sum()) - np.repeat(np.cumsum(lens_shift), lens)
n = len(mon_vec)
df = pd.DataFrame.from_items([('pool', id_vec), ('month', mon_vec)] + [(c, np.random.rand(n)) for c in 'abcde'])
df = df.set_index(['pool', 'month'])
%time df_shift = df.groupby(level=0).transform(lambda x: x.shift(-1)) 
```

我尝试时花了 64 秒。该数据的每个系列都从第 0 个月开始；真的，它们都应该在 np.max(lens) 月结束，开始日期参差不齐，但已经足够好了。

编辑 2：这是一些比较 R 代码。这需要 0.8 秒。80 的系数，不好。

```
library(data.table)
ids <- 1:48000
lens <- as.integer(pmax(1, round(rnorm(ids, mean=15, sd=9.5))))
id.vec <- rep(ids, times=lens)
lens.shift <- c(0, lens[-length(lens)])
mon.vec <- (1:sum(lens)) - rep(cumsum(lens.shift), times=lens)
n <- length(id.vec)
dt <- data.table(pool=id.vec, month=mon.vec, a=rnorm(n), b=rnorm(n), c=rnorm(n), d=rnorm(n), e=rnorm(n))
setkey(dt, pool, month)
myshift <- function(x) c(x[-1], NA)
system.time(dt.shift <- dt[, list(month=month, a=myshift(a), b=myshift(b), c=myshift(c), d=myshift(d), e=myshift(e)), by=pool]) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T14:49:20.880

我建议您重塑数据并与 groupby 方法相比进行一次转变：

```
result = df.unstack(0).shift(1).stack() 
```

这会切换级别的顺序，因此您需要交换和重新排序：

```
result = result.swaplevel(0, 1).sortlevel(0) 
```

您可以验证它是否滞后了一个周期（您需要 shift(1) 而不是 shift(-1)）：

```
In [17]: result.ix[1]
Out[17]: 
              a         b         c         d         e
month                                                  
1      0.752511  0.600825  0.328796  0.852869  0.306379
2      0.251120  0.871167  0.977606  0.509303  0.809407
3      0.198327  0.587066  0.778885  0.565666  0.172045
4      0.298184  0.853896  0.164485  0.169562  0.923817
5      0.703668  0.852304  0.030534  0.415467  0.663602
6      0.851866  0.629567  0.918303  0.205008  0.970033
7      0.758121  0.066677  0.433014  0.005454  0.338596
8      0.561382  0.968078  0.586736  0.817569  0.842106
9      0.246986  0.829720  0.522371  0.854840  0.887886
10     0.709550  0.591733  0.919168  0.568988  0.849380
11     0.997787  0.084709  0.664845  0.808106  0.872628
12     0.008661  0.449826  0.841896  0.307360  0.092581
13     0.727409  0.791167  0.518371  0.691875  0.095718
14     0.928342  0.247725  0.754204  0.468484  0.663773
15     0.934902  0.692837  0.367644  0.061359  0.381885
16     0.828492  0.026166  0.050765  0.524551  0.296122
17     0.589907  0.775721  0.061765  0.033213  0.793401
18     0.532189  0.678184  0.747391  0.199283  0.349949

In [18]: df.ix[1]
Out[18]: 
              a         b         c         d         e
month                                                  
0      0.752511  0.600825  0.328796  0.852869  0.306379
1      0.251120  0.871167  0.977606  0.509303  0.809407
2      0.198327  0.587066  0.778885  0.565666  0.172045
3      0.298184  0.853896  0.164485  0.169562  0.923817
4      0.703668  0.852304  0.030534  0.415467  0.663602
5      0.851866  0.629567  0.918303  0.205008  0.970033
6      0.758121  0.066677  0.433014  0.005454  0.338596
7      0.561382  0.968078  0.586736  0.817569  0.842106
8      0.246986  0.829720  0.522371  0.854840  0.887886
9      0.709550  0.591733  0.919168  0.568988  0.849380
10     0.997787  0.084709  0.664845  0.808106  0.872628
11     0.008661  0.449826  0.841896  0.307360  0.092581
12     0.727409  0.791167  0.518371  0.691875  0.095718
13     0.928342  0.247725  0.754204  0.468484  0.663773
14     0.934902  0.692837  0.367644  0.061359  0.381885
15     0.828492  0.026166  0.050765  0.524551  0.296122
16     0.589907  0.775721  0.061765  0.033213  0.793401
17     0.532189  0.678184  0.747391  0.199283  0.349949 
```

这种方法的性能还不错（在 0.9.0 中可能会慢一点）：

```
In [19]: %time result = df.unstack(0).shift(1).stack()
CPU times: user 1.46 s, sys: 0.24 s, total: 1.70 s
Wall time: 1.71 s 
```

# entity-framework - 存储库模式解决了哪些具体问题？

> ID：13180501
> 
> 赞同：46
> 
> 时间：2012-11-01T15:40:00.803
> 
> 标签：entity-framework, design-patterns, domain-driven-design, repository-pattern

*（注意：我的问题与三个月前提出[这个问题](https://stackoverflow.com/questions/11618809/few-things-about-repository-pattern-that-i-simply-dont-understand)的人非常相似，但从未得到回答。）*

我最近开始使用 MVC3 + Entity Framework，我一直在阅读，最佳实践是使用存储库模式来集中访问 DAL。这还伴随着您希望将 DAL 与域（尤其是视图层）分开的解释。但在我看到的示例中，存储库是（或*似乎是*）简单地返回 DAL 实体，即在我的情况下，存储库将返回 EF 实体。

所以我的问题是，如果存储库只返回 DAL 实体，它有什么好处？这不会增加一层复杂性，不会消除在层之间传递 DAL 实体的问题吗？如果存储库模式创建了“进入 DAL 的单一入口点”，那与上下文对象有何不同？如果存储库提供了一种机制来检索和持久化 DAL 对象，那么它与上下文对象有何不同？

另外，我至少在一个地方读到了工作单元模式集中存储库访问以管理数据上下文对象，但我也不明白为什么这很重要。

我有 98.8% 的把握我在这里遗漏了一些东西，但从我的阅读中我没有看到它。当然，我可能只是没有阅读正确的资料...：\

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-11-02T04:04:21.380

我认为术语“存储库”通常被认为是在Martin Fowler[的“企业应用程序架构](https://rads.stackoverflow.com/amzn/click/com/0321127420)模式”一书中描述的“[存储库模式”。](http://martinfowler.com/eaaCatalog/repository.html)

> 存储库在域和数据映射层之间进行调解，就像内存中的域对象集合一样。客户端对象以声明方式构造查询规范，并将它们提交给 Repository 以获得满意。对象可以添加到存储库中，也可以从存储库中删除，就像它们可以从简单的对象集合中一样，存储库封装的映射代码将在幕后执行适当的操作。

从表面上看，Entity Framework 完成了所有这些，并且可以用作存储库的简单形式。但是，存储库可能不仅仅是数据层抽象。

根据 Eric Evans 的《[领域驱动设计](https://rads.stackoverflow.com/amzn/click/com/0321125215)》一书，存储库具有以下优点：

> *   他们为客户提供了一个简单的模型，用于获取持久性对象并管理它们的生命周期
> *   它们将应用程序和域设计与持久性技术、多种数据库策略甚至多个数据源解耦
> *   他们传达有关对象访问的设计决策
> *   它们允许轻松替换虚拟实现以进行单元测试（通常使用内存中的集合）。

第一点大致相当于上面那一段，不难看出Entity Framework本身很容易做到。

有人会争辩说 EF 也完成了第二点。但通常 EF 仅用于将每个数据库表转换为 EF 实体，并将其传递给 UI。它可能抽象了数据访问的*机制*，但几乎没有抽象出幕后的关系数据结构。

*在主要面向数据的*简单应用程序中，这似乎不是重点。但是随着应用程序的领域规则/业务逻辑变得更加复杂，您可能希望更加*面向对象*。数据的关系结构包含对业务领域不重要的特性，但这些特性是数据存储的副作用，这种情况并不少见。在这种情况下，仅仅抽象持久性机制是不够的，还要抽象数据结构本身的性质。单独的 EF 通常不会帮助您做到这一点，但存储库层会。

至于第三个优势，EF 不会（从 DDD 的角度）提供帮助。通常 DDD 不仅使用存储库来抽象数据持久性的机制，而且还提供有关如何访问某些数据的约束：

> 我们也不需要对更方便通过遍历查找的持久对象进行查询访问。例如，可以从 Person 对象请求一个人的地址。最重要*的是，禁止访问 AGGREGATE 内部的任何对象，除非从根遍历。*

换句话说，您不会仅仅因为您的数据库中有一个地址表而有一个“AddressRepository”。如果您的设计选择以这种方式管理 Address 对象的访问方式，那么 PersonRepository 就是您定义和实施设计选择的地方。

此外，DDD 存储库通常是封装与域数据集相关的某些业务概念的地方。OrderRepository 可能有一个名为OutstandingOrdersForAccount 的方法，它返回一个特定的Orders 子集。或者，客户存储库可能包含 PreferredCustomerByPostalCode 方法。

如果没有添加存储库抽象层，Entity Framework 的 DataContext 类不能很好地适应这种功能。它们适用于 DDD 所谓的规范，它可以是简单的布尔表达式，发送到一个简单的方法，该方法将根据表达式评估数据并返回匹配项。

至于第四个优势，虽然我确信有某些策略可能会让一个人替代数据上下文，但将其包装在存储库中会使它变得非常简单。

关于“工作单元”，这是 DDD 书中所说的：

> *将事务控制权留给客户端。*虽然 REPOSITORY 会插入和删除数据库，但它通常不会提交任何内容。例如，在保存后提交是很诱人的，但客户端可能具有正确启动和提交工作单元的上下文。如果 REPOSITORY 不动手，事务管理会更简单。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-11-01T15:47:12.330

实体框架`DbContext`基本上类似于*存储库*（以及*工作单元*）。您不必在简单的场景中将其抽象出来。

存储库的主要优点是您的域可以是无知的并且独立于持久性机制。在基于层的架构中，依赖关系从 UI 层向下通过域（或通常称为业务逻辑层）指向数据访问层。这意味着 UI 依赖于 BLL，而 BLL 本身又依赖于 DAL。

在更现代的架构中（通过域驱动设计和其他面向对象的方法传播），域应该没有向外指向的依赖项。这意味着 UI、持久性机制和其他一切都应该依赖于域，而不是相反。

然后，存储库将通过其在域内的接口表示，但在域外的持久性模块中具有其具体实现。这样域只依赖于抽象接口，而不是具体的实现。

这基本上是面向对象与架构级别的过程编程。

另请参阅[**Ports and Adapters** aka **Hexagonal Architecture**](http://alistair.cockburn.us/Hexagonal+architecture)。

存储库的另一个优点是您可以为各种数据源创建类似的访问机制。不仅适用于数据库，还适用于基于云的商店、外部 API、第三方应用程序等。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-01T15:56:32.097

没错，在这些简单的情况下，存储库只是 DAO 的另一个名称，它只带来一个价值：您可以将 EF 切换到另一种数据访问技术。今天你使用 MSSQL，明天你会想要一个云存储。或者使用 micro orm 而不是 EF 或从 MSSQL 切换到 MySql。

在所有这些情况下，最好使用存储库，因为应用程序的其余部分不会关心您现在使用的存储空间。

在有限的情况下，您从多个来源（db + 文件系统）获取信息，repo 将充当外观，但它仍然是 DAO 的另一个名称。

“真正的”存储库仅在您处理域/业务对象时才有效，对于不会更改存储的以数据为中心的应用程序，仅 ORM 就足够了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-01T16:16:07.393

鉴于您的情况，我会简单地选择一组接口来表示需要从数据层返回的数据结构（您的领域模型）。然后，您的实现可以是 EF、Raw ADO.Net 或任何其他类型的数据存储/提供程序的混合。这里的关键策略是将实现从直接消费者（您的域层）中抽象出来。当您想要对域对象进行单元测试时，这很有用，并且在不太常见的情况下 - 完全更改您的数据提供者/数据库平台。

如果还没有的话，您应该考虑使用[IOC 容器，因为它们通过](http://en.wikipedia.org/wiki/Inversion_of_control)[Dependency Injection](http://en.wikipedia.org/wiki/Dependency_injection)使您的解决方案的松散耦合变得非常容易。 [有很多可用](http://www.hanselman.com/blog/ListOfNETDependencyInjectionContainersIOC.aspx)的，我个人更喜欢[Ninject](http://ninject.org/)。

领域层应该封装你所有的业务逻辑——问题领域的规则和需求，并且**可以**被你的 MVC3 Web 应用程序直接使用。[在某些情况下，引入位于域层之上的服务层](http://martinfowler.com/eaaCatalog/serviceLayer.html)是有意义的，但这并不总是必要的，并且对于简单的 Web 应用程序来说可能是多余的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-01T15:52:43.117

在您有多个数据源并希望使用一致的编码策略访问它们的情况下，它会很有用。

例如，您可能有多个 EF 数据模型，一些数据使用带有存储过程的传统 ADO.NET 访问，一些数据使用 3rd 方 API 访问，还有一些从位于 Windows NT4 服务器上的 Access 数据库访问扫帚柜里的灰尘。

您可能不希望您的业务或前端层关心数据的来源，因此您构建了一个通用存储库模式来访问“数据”，而不是访问“实体框架数据”。

在这种情况下，您的实际存储库实现将彼此不同，但调用它们的代码不会知道差异。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-29T20:11:48.390

要考虑的另一件事是，即使您知道将使用单个数据存储，创建存储库抽象仍然可能有意义。原因是您的应用程序可能需要一个功能，而您的 ORM du jour 要么表现不佳（性能），要么根本没有，或者您只是不知道如何使 ORM 满足您的需求。

如果您将 ORM 包装在经过深思熟虑的存储库界面之后，您可以轻松地在您认为合适的不同技术之间切换。在我的存储库中看到一些方法使用 EF 进行工作而其他方法使用 PetaPoco 或（喘气）ADO.net 代码之类的方法并不少见。存储库抽象使您能够为手头的工作使用正确的工具，而不会将这些复杂性泄漏到客户端代码中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-17T17:40:19.187

我认为对许多文章所说的“存储库”存在很大的误解。这就是为什么人们怀疑这些抽象带来的真正价值。

在我看来，纯粹形式的存储库是 IEnumerable，而您和许多文章都在谈论“数据访问服务”。

我在[这里](http://michaellogutov.com/repository-you-mean-data-access-service/)写过博客。

# c# - 没有 XNA 的 Windows Phone 中的点击和拖动手势

> ID：13180504
> 
> 赞同：2
> 
> 时间：2012-11-01T15:40:17.090
> 
> 标签：c#, windows-phone-7, xaml, gesture, windows-phone-8

我想知道 Windows Phone 是否有某种手势允许我点击一个按钮，然后拖动到另一个按钮并点击它，当然没有 XNA 框架，因为这不是游戏，我不想使用它。

例如，我有两个按钮“A”和“B”，如果点击 A 然后我将手指（仍在屏幕上）拖到 B 上，那么 B 应该与 A 一起选择。

我希望每个人都能理解我的问题，当然我是用 C# 和 XAML for Windows Phone 8 来做这一切的。

感谢您的回答。干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T05:00:58.967

您可以使用[Phone Toolkit](http://phone.codeplex.com)中提供的`DragStarted`和`DragCompleted`事件。示例代码：[http ://www.scottlogic.co.uk/blog/colin/2012/06/a-gesture-driven-windows-phone-todo-application-part-two-drag-re-ordering/](http://www.scottlogic.co.uk/blog/colin/2012/06/a-gesture-driven-windows-phone-todo-application-part-two-drag-re-ordering/)`Microsoft.Phone.Controls.GestureListener`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:00:38.613

我也更喜欢使用 Microsoft 通过 windpwsphone 工具包提供的已经实现的手势。这可能是您可以获得的标准手势的最佳实现。正如@Arun 已经展示的那样，已经完成了拖放实现。

但是，如果这对您来说还不够，您可以随时根据 UIElement 拥有的原始事件创建自己的手势。请参阅：http: [//msdn.microsoft.com/en-us/library/ms604577%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/ms604577%28v=vs.95%29.aspx)

# java - 传入“This”关键字

> ID：13180506
> 
> 赞同：1
> 
> 时间：2012-11-01T15:40:26.873
> 
> 标签：java, this

```
public class CommandForm extends Form implements CommandListener {

    Display d;

    public CommandForm(String msg) {

        super(msg);
        this.addCommand(exit);

    }

    private void showMessage(String title, String text) {
        Alert a = new Alert(title, text, null, AlertType.INFO);
        d.setCurrent(a, this);

    }

    public void prepare_view(Display d){
        this.setCommandListener(this);
        this.d = d;
    }

    public void show_view(){
        d.setCurrent(this);
    }
} 
```

我不知道这个例子中“this”关键字的确切含义。我的讲师说它是当前对象，当我进一步询问时，他说它是 CommandForm。那是对的吗？当您将'this' 传递到括号中时，例如setCommandListener(this)，您实际上是在传递CommandForm 吗？我知道如何使用“this”的唯一方法就是这样，this.d = d。所以这对我来说有点新鲜。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:45:47.030

他是对的。如果您调用`setCommandListener(this)`，则将对当前对象的引用传递给该方法。当你这样做时，`this.d = d`你正在将作为类的一部分的变量`d`（即`this`）设置为传入的值（在括号中）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T15:43:10.570

你的讲师确实是正确的。它是当前对象，`this`只是一种引用当前范围内的对象的方法。

您使用关键字将引用传递给其他对象，例如`object.doSomethingWith(this)`，和/或解决成员和变量之间的歧义（例如`this.x = x`- 这里有两个不同`x`的 s）。

查看[关于“this”的 Java 语言规范部分](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.8.3)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T15:42:46.683

是的，`this`关键字是对该类的特定实例的引用`CommandForm`。

# android - 如何使用 android 列出 ftp 目录？

> ID：13180514
> 
> 赞同：4
> 
> 时间：2012-11-01T15:40:56.810
> 
> 标签：android, ftp

[已解决] 如何获取我的 ftp 服务器上的文件和文件夹列表？

我知道如何连接和上传文件，但不知道如何获取目录列表：

```
 try {
                FTPClient ftpClient = new FTPClient();
                ftpClient.connect(InetAddress.getByName("176.28.25.46"));
                ftpClient.login("******", "******");
                System.out.println("status :: " + ftpClient.getStatus());

                ftpClient.setFileType(FTP.BINARY_FILE_TYPE);
                ftpClient.enterLocalPassiveMode();

                // Prepare file to be uploaded to FTP Server
                File file = new File("default.prop");
                FileInputStream ifile = new FileInputStream(file);

                // Upload file to FTP Server
                ftpClient.storeFile("/subdomains/giveyourapps/httpdocs/apps/default.prop",ifile);
                ftpClient.disconnect();  

            } catch (Exception e) {
                e.printStackTrace();
            } 
```

但是我在谷歌上找到的每个代码都对我不起作用：-/

```
 try {

                FTPClient ftpClient = new FTPClient();
                ftpClient.connect(InetAddress.getByName("176.28.25.46"));
                ftpClient.login("******", "******");
                System.out.println("status :: " + ftpClient.getStatus());

                String toppath = new String();
                FTPFile[] ftpDirs = ftpClient.listDirectories();
                for (int i = 0; i < ftpDirs.length; i++) {
                    toppath = ftpDirs[0].getName();
                    Log.d("CONNECT", "Directories in the ftp server are "
                            + ftpDirs[i].getName());
                }

                FTPFile[] ftpdirs2 = ftpClient.listFiles(toppath);
                for (int i = 0; i < ftpdirs2.length; i++) {
                    Log.d("CONNECT",
                            "File i need is  " + ftpdirs2[i].getName());
                }

            } 
```

对于每个有同样问题的人。它现在可以使用该代码：（感谢 user1106888）

```
 try {

                FTPClient ftpClient = new FTPClient();
                ftpClient.connect(InetAddress.getByName("176.28.25.46"));
                ftpClient.login("******", "******");
                System.out.println("status :: " + ftpClient.getStatus());
                ftpClient.setFileType(FTP.BINARY_FILE_TYPE);
                ftpClient.enterLocalPassiveMode();

                try{
                String toppath = new String();
                FTPFile[] ftpDirs = ftpClient.listDirectories();
                for (int i = 0; i < ftpDirs.length; i++) {
                    toppath = ftpDirs[0].getName();
                    System.out.println("Directory->: " + ftpDirs[i].getName());

                }

                FTPFile[] ftpdirs2 = ftpClient.listFiles(toppath);
                for (int i = 0; i < ftpdirs2.length; i++) {
                    System.out.println("Files->: " + ftpdirs2[i].getName());
                }
                }catch (Exception e) {
                    e.printStackTrace();
                } 

            } catch (Exception e) {
                e.printStackTrace();
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:52:18.803

您可以使用[CkFtp2](http://www.chilkatsoft.com/refdoc/javaCkFtp2Ref.html) API 轻松获取 FTP 目录列表信息。如下所示：

```
CkFtp2 ftp = new CkFtp2();

int n = ftp.get_NumFilesAndDirs();
    if (n < 0) {
        outStr += ftp.lastErrorText() + "\n";
        tv.setText(outStr);
        setContentView(tv);
        return;
    }

    if (n > 0) {
        for (int i = 0; i <= n - 1; i++) {

            //  Display the filename
            outStr += ftp.getFilename(i) + "\n";

            //  Display the file size (in bytes)
            outStr += ftp.GetSize(i) + "\n";

            //  Is this a sub-directory?
            if (ftp.GetIsDirectory(i) == true) {
                outStr += ".. this is a sub-directory" + "\n";
            }

            outStr += "--" + "\n";
        }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:54:26.713

使用此代码，它应该会有所帮助

```
FTPFile[] ftpDirs = mFTPClient.listDirectories();
                    for (int i = 0; i < ftpDirs.length; i++) {
                        toppath = ftpDirs[0].getName();
                        Log.d("CONNECT", "Directories in the ftp server are "
                                + ftpDirs[i].getName());
                    }

                    FTPFile[] ftpdirs2 = mFTPClient.listFiles(toppath);
                    for (int i = 0; i < ftpdirs2.length; i++) {
                        Log.d("CONNECT",
                                "File i need is  " + ftpdirs2[i].getName());
                    } 
```

# sql - 转换为 float 与 int 返回不同的结果

> ID：13180517
> 
> 赞同：1
> 
> 时间：2012-11-01T15:41:07.777
> 
> 标签：sql, sql-server, tsql

从数学上讲，这些结果是相似的，我只是对它们的行为感到好奇。当我的局部变量被声明为浮点数的第一个版本时，舍入函数会停止显示在第二个小数处的小数。在将局部变量声明为 int 的第二个版本中，`round`函数四舍五入到小数点后两位，然后添加一堆零。为什么变量类型会导致`round`函数表现不同？

```
declare @totalpop float 
set @totalpop = (select count(distinct patid) from members)
select @totalpop
select edutext
,COUNT(*) as educationCounts
,round(100.0*COUNT(*)/@totalpop,2)
from
(
select distinct m.patid, e.eduText
    from members as m
    inner join EducationTable as e on e.eduID = m.education
)x
group by x.eduText 
```

--不四舍五入到小数点后两位

```
declare @totalpop int
set @totalpop = (select count(distinct patid) from members)
select @totalpop
select edutext
,COUNT(*) as educationCounts
,round(100.0*COUNT(*)/@totalpop,2)
from
(
select distinct m.patid, e.eduText
    from members as m
    inner join EducationTable as e on e.eduID = m.education
)x
group by x.eduText 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:50:44.177

首先，让我们看一下 ROUND() 函数定义：

```
Returns a numeric value, rounded to the specified length or precision. 
```

它说 ROUNDED 到指定的长度，而不是 TRUNCATE 到指定的长度。

现在，使用 int 和 float 会产生完全不同的表达式类型。您可以轻松地将它们与以下查询进行比较（我切换`COUNT(*)`到 1，`@totalpop`也切换到 1）：

```
Select sql_variant_property(100.0 * 1 / convert(int, 1), 'BaseType') BaseType,
       sql_variant_property(100.0 * 1 / convert(int, 1), 'Precision') Precision,
       sql_variant_property(100.0 * 1 / convert(int, 1), 'Scale') Scale

Select sql_variant_property(100.0 * 1 / convert(float, 1.0), 'BaseType') BaseType,
       sql_variant_property(100.0 * 1 / convert(float, 1.0), 'Precision') Precision,
       sql_variant_property(100.0 * 1 / convert(float, 1.0), 'Scale') Scale 
```

这告诉我们，使用 int，表达式会给你一个数字。使用浮点数，你会得到一个浮点数。根据微软的说法，他们的 ROUND 函数在传递一个浮点数时将返回一个浮点数，当传递一个数字时返回一个小数。

您可以在那里阅读所有相关信息：http: [//msdn.microsoft.com/en-us/library/ms175003.aspx](http://msdn.microsoft.com/en-us/library/ms175003.aspx)

最后，您可以看到浮点数在零开始时被截断，而数字在达到比例限制之前永远不会被截断：

```
select CONVERT(float, 3.330000),          -- 3.33
       CONVERT(numeric(17, 12), 3.330000) -- 3.330000000000 
```

# susy-compass - 如何使用 Susy 在相同的垂直空间中布局左侧 1 行和右侧 2 行？

> ID：13180522
> 
> 赞同：-1
> 
> 时间：2012-11-01T15:41:31.037
> 
> 标签：susy-compass

如何在 Susy 中实现以下布局？

```
_________________________________
|              |   Rt. Top      |
|     Left     |________________|
|              |   Rt. Bottom   |
|______________|________________| 
```

及其相反：

```
_________________________________
|   Lt. Top      |              |
|________________|    Right     |
|   Lt. Bottom   |              |
|________________|______________| 
```

到目前为止，对于上图，我尝试过：

```
 #header {
    #logo { @include span-columns( 4, 12); }
    #search { @include span-columns(8 omega,12 ); }
    #menu { @include span-columns(8 omega,12 ); }
  }

  <header id="header">
    <div id='logo'>logo logo logo logo<br>logo logo logo logo<br>logo logo logo logo<br>logo logo logo logo<br>logo logo logo logo<br>logo logo logo logo</div>
    <div id='search'>search search search<br>search search search<br>search search search<br>search search search<br>search search search<br>search search search</div>
    <div id='menu'>menu menu menu<br>menu menu menu<br>menu menu menu<br>menu menu menu<br>menu menu menu<br>menu menu menu<br>menu menu menu<br>menu menu menu</div>
  </header> 
```

结果是：

```
_________________________________
|              |                |
|     Left     |     Rt. Top    |
|______________|________________|
               |   Rt. Bottom   |
               |________________| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:49:06.377

原来我上面的例子工作正常，我只是在示例文本中看不到这一点。为了将来参考，这对上述两种情况都有效。注意 HTML div 的顺序：bottom-left 必须出现在 sidebar-right 之后。

```
 <header id="header">
<div id='logo'>logo logo logo logo logo logo logo logo logo logo logo logo logo logo logo logo logo logo logo logo logo logo logo logo logo logo logo logo logo logo logo logo logo logo logo logo logo</div>
<div id='search'>search search search search search search search search search search search search search search search search search search</div>
<div id='menu'>menu menu menu menu menu menu menu menu menu menu menu menu menu menu menu menu menu menu menu menu menu menu menu menu</div>

<div id='top-left'>top top top top top top top top top top top top top top top top top top top top top top top top</div>
<div id='sidebar-right'>right right right right right right right right right right right right right right right right right right right right right right right right right right right right right right right right right right right right right right</div>
<div id='bottom-left'>bottom bottom bottom bottom bottom bottom bottom bottom bottom bottom bottom bottom bottom bottom bottom</div> </header> 
```

萨斯：

```
 #header {
#logo { @include span-columns( 4, 12); }
#search { @include span-columns(8 omega,12 ); }
#menu { @include span-columns(8 omega,12 ); }
#top-left { @include span-columns( 8, 12); }
#bottom-left { @include span-columns( 8, 12); }
#sidebar-right { @include span-columns(4 omega,12 ); } } 
```

（每个示例中的底部 2 行代码连接在一起；似乎是 stackoverflow 的行数限制）

# php - 如何结合php表单的两个动作

> ID：13180525
> 
> 赞同：0
> 
> 时间：2012-11-01T15:41:39.290
> 
> 标签：php, html, forms

我想将以下两个动作结合起来，有人可以帮助我吗？我想在提交按钮上一键执行两个操作！

**行动一：**

```
<form name="loginform" id="loginform" action="<?php echo esc_url( site_url( 'wp-login.php', 'login_post' ) ); ?>" method="post"> 
```

**行动二：**

```
<form name="loginform" id="loginform" action="<?php echo esc_url( site_url( 'wp-login2.php', 'login_post2' ) ); ?>" method="post"> 
```

我想将数据发送到两个不同的脚本，这就是为什么我无法组合它们，当我尝试组合它们时，它会将数据发送到一种形式而不是两者。我想将两者结合起来，以便将数据发送到两个脚本..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:55:05.773

您可以尝试使用自定义操作作为目标并使用 cURL 发出两个请求

```
<?php
$targets = array('http://example.com/wp-login-one.php',
                             'http://example.com/wp-login-two.php');

$cookie = 'cookie.txt'; // MUST be writable to script 
$postdata = '';
foreach($_POST as $key => $value){
    $postdata .= '&'.$key.'='.$value;
}

foreach($targets as $url){
    $ch = curl_init(); 
    curl_setopt ($ch, CURLOPT_URL, $url); 
    curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
    curl_setopt ($ch, CURLOPT_USERAGENT, "Put your desired User Agent here"); 
    curl_setopt ($ch, CURLOPT_TIMEOUT, 60); 
    curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1); 
    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); 
    curl_setopt ($ch, CURLOPT_COOKIEJAR, $cookie);
    curl_setopt ($ch, CURLOPT_COOKIEFILE, $cookie);  
    curl_setopt ($ch, CURLOPT_POSTFIELDS, $postdata); 
    curl_setopt ($ch, CURLOPT_POST, 1); 
    $result = curl_exec ($ch); 

    curl_close($ch);    
    echo $result;  
}
?> 
```

这是未经测试的代码 - 虽然可以肯定它会工作 - 如果需要，我可以进一步改进它以在野外工作！

# amazon-s3 - Amazon Cloudfront 有时会忽略来自 S3 的 http 标头

> ID：13180530
> 
> 赞同：1
> 
> 时间：2012-11-01T15:42:00.773
> 
> 标签：amazon-s3, http-headers, amazon-cloudfront

我有一个从 AWS S3 提供文件的云端发行版。

检查以下文件：

[http://s3.amazonaws.com/kekanto_static/css/site.v70.css](http://s3.amazonaws.com/kekanto_static/css/site.v70.css)

[http://s3.amazonaws.com/kekanto_static/css/site.v71.css](http://s3.amazonaws.com/kekanto_static/css/site.v71.css)

如果您查看标题，您会发现两个文件都包含以下条目：

```
Content-Encoding:gzip 
```

两者都按应有的方式正确压缩在 S3 存储桶中。

但是当从 Cloudfront 提供服务时，内容编码不会出现：

[http://img.kekanto.com/css/site.v70.css](http://img.kekanto.com/css/site.v70.css)

[http://img.kekanto.com/css/site.v71.css](http://img.kekanto.com/css/site.v71.css)

知道为什么会这样吗？

我还检查了 Cloudfront 端点：

[http://d1l2emnu9r9dtc.cloudfront.net/css/site.v70.css](http://d1l2emnu9r9dtc.cloudfront.net/css/site.v70.css)

[http://d1l2emnu9r9dtc.cloudfront.net/css/site.v71.css](http://d1l2emnu9r9dtc.cloudfront.net/css/site.v71.css)

问题仍然存在。

编辑：看起来在失效后一切都再次正常工作，所以你将无法测试我给出的 URI。

我所能想到的只是 S3 存储桶使文件可用，并且仅在一段时间后，标头变得可用，有时会导致标头被跳过。

我怎样才能防止这种情况？除了在让我的网络服务器知道有新版本之前将我的上传文件设置为休眠一段时间之外？

# php - 连接到我的 SQL 数据库的 php 脚本

> ID：13180534
> 
> 赞同：0
> 
> 时间：2012-11-01T15:42:16.380
> 
> 标签：php, sql, database, cpanel

尝试使用 PHP 连接到我的数据库时出现错误。

```
$connect = mysql_connect("localhost","username","password") or die ("Couldn't Connect!");
mysql_select_db("databasename") or die ("Couldnt find database"); 
```

当我尝试运行脚本时，它一直说`'Couldnt find database'`这意味着我正在连接到服务器，但我的数据库无法连接。

我在这里做错了吗？我已经从 Cpanel 复制并粘贴了我的数据库名称，所以我知道没有任何错误。但在 Cpanel 中显示为 'mywebsite'_database

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:46:59.240

您在问题中指定您的数据库被调用：

> '我的网站'_数据库

如果是这种情况，那么您需要将代码更改为

```
// Connect to the database
$connect = mysql_connect("localhost","username","password") or die ("Couldn't Connect!");

// Select the database
mysql_select_db("mywebsite_databasename",$connect) or die ("Couldnt find database"); 
```

如果上述方法不起作用，那么我建议您通过列出该**特定用户的数据库来**调试您的连接。这样做：

```
// Connect to the database
$connect = mysql_connect("localhost","username","password") or die ("Couldn't Connect!");

// Get all the databases for this particular user
$databases = mysql_list_dbs($connect);

// Loop through the databases and write them on the screen
while($database = mysql_fetch_assoc($databases)) {
     echo $database['Database']."\n";
}

exit; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:47:24.750

`mysql_select_db("mywebsite_database")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T15:47:41.387

打印出服务器中所有数据库的名称（使用**mysql_list_dbs**）。

找到正确的数据库名称并用它替换“databasename”。

```
$connect = mysql_connect("localhost","username","password") or die ("Couldn't Connect!");

$db_list = mysql_list_dbs($connect);

while ($row = mysql_fetch_object($db_list)) {
     echo $row->Database . "\n";
}

mysql_select_db("databasename", $connect) or die ("Couldnt find database"); 
```

我建议使用 MySQLi 扩展，因为 mysql_* 目前处于折旧过程中。

我希望这有帮助

# javascript - javascript：表单选择选项和输入字段

> ID：13180537
> 
> 赞同：4
> 
> 时间：2012-11-01T15:42:31.077
> 
> 标签：javascript, forms, select, option

我有一个表单`input`字段，当用户键入“文本 2”时，我希望在表单中选择“文本 2” `select`：

```
<select id="formsel">
    <option value="text 1">text 1</option>
    <option value="text 3">text 2</option>
    <option value="text 3">text 3</option>
</select>
<input type='text' id='input' /> 
```

我从`input`这样的地方得到价值：

```
var input_val = document.getElementById('input').value; 
```

但我无法从动态表单`select`中选择选项

```
document.form.formsel.value = input_val; 
```

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:52:33.727

您的代码没有显示`form`您正在尝试使用 访问`document.form`，所以我假设没有表单。尝试`select`通过其 id 访问。这似乎对我有用：

```
<script>
document.getElementById('input').onkeyup = function()
{
    var input_val = document.getElementById('input').value;
    document.getElementById('formsel').value = input_val;
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:55:02.777

根据您的评论，您似乎正在使用 jQuery（如果是这种情况，您应该使用 jQuery 标记所有问题）。

这应该让你得到你想要的

```
var selectedText = $("#formsel option:selected").text() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T15:48:00.207

看起来你可能有错字。

```
<option value="text 3">text 2</option> 
```

应该：

```
<option value="text 2">text 2</option> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T15:56:21.963

试试这个：

```
var nodes = document.getElementById('formsel'),
    txt = document.getElementById('input').value, node;

for ( var i = nodes.length; i--; ) {

    node = nodes[i];

    if ( txt === nodes[i].value ) {

        node.selected = true; break;

    }

} 
```

# javascript - 如何动态更改 Youtube Player videoID

> ID：13180540
> 
> 赞同：33
> 
> 时间：2012-11-01T15:42:46.020
> 
> 标签：javascript, jquery, iframe, youtube-api

我想使用 YT.Player 代码来检测事件。我有一个带有 Youtube 视频 ID 的 CSV 文件和一个将 ID 放入数组中的函数，并且希望能够在用户单击图像时动态更改 ID。基本上是这样的：

**html**

```
<!-- 1\. The <iframe> (and video player) will replace this <div> tag. -->
<div id="player"></div> 
```

**javascript**

```
// 2\. This code loads the IFrame Player API code asynchronously.
var tag = document.createElement('script');
tag.src = "//www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

// 3\. This function creates an <iframe> (and YouTube player)
//    after the API code downloads.
// NOTE: videoId is taken out and instead is placed as the generated IFRAME src from the postSelection function

var player;
function onYouTubeIframeAPIReady() {
   player = new YT.Player('player', {
      height: '100%',
      width: '100%',
      videoId: '<<CALL TO FUNCTION OR VARIABLE HERE>>',
      events: {
         //'onReady': onPlayerReady,
         'onStateChange': onPlayerStateChange
      }
   });
} 
```

如果您熟悉此代码，那么会发生`#player`DIV 被 IFRAME 替换。我可以使用此功能更改 IFRAME 源：

```
function postSelection() {
    $("#player").attr("src", _selected.attributes.url); //_selected.attributes.url comes from the CVS file
} 
```

但这非常有问题，而且对跨浏览器不友好。如果我使用标准 IFRAME 而不是 YT Player API，那么一切正常。但我想检测结束，暂停等等，所以我必须使用 API。我的猜测是，这是一个状态问题，并且在创建 IFRAME 的过程中丢失了持久性。

问候。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-11-01T16:15:58.053

使用 js api 非常简单。当您想加载新视频时，只需在[https://developers.google.com/youtube/iframe_api_reference#loadVideoById](https://developers.google.com/youtube/iframe_api_reference#loadVideoById)`player.loadVideoById(videoId);`调用 详细信息

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-08-11T09:57:46.493

如果这对像我一样挣扎的人有帮助......

这`player.loadVideoById(videoId)` 仅在 videoId 被硬编码时对我有用，例如 `player.loadVideoById('sdfexxdfse')`

当我尝试将该值直接放入变量中或存储在数组中时，即使它包含相同的信息，它也无法正常工作。

视频每次都出现错误的参数。

以这种方式将其添加到变量中

`var x = new String(variabledatahere)`

做了这项工作。

# .net - AssemblyInfo.cs 有什么用途？

> ID：13180543
> 
> 赞同：133
> 
> 时间：2012-11-01T15:43:00.540
> 
> 标签：.net

我的问题很基本。我想知道的是`AssemblyInfo.cs`文件是用来做什么的？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-11-01T15:44:30.007

> AssemblyInfo.cs 包含有关您的程序集的信息，例如名称、描述、版本等。您可以通过阅读其中包含的注释找到有关其内容的更多详细信息。
> 
> 如果您删除它，您的程序集将在没有任何信息的情况下被编译，即在文件属性的详细信息选项卡中，您将看不到名称、没有描述、版本 0.0.0.0 等。
> 
> 与 assembly:Guid 关联的值是在程序集作为 COM 对象公开时将标识该程序集的 ID。因此，如果您的程序集不是 COM 公开的，则不需要它。它是随机生成的。无论如何，通常情况下，您不需要修改它。

致谢：http: [//social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/8955449f-71ac-448e-9ee6-5329fceecd3c](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/8955449f-71ac-448e-9ee6-5329fceecd3c)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-01T15:45:11.037

> 在 AssemblyInfo 文件中，Informal Attributes 包含有关产品名称、描述、商标、版权的信息。一般来说，这些信息要么是硬编码的，要么是存储在数据库或平面文件中的。.NET 程序集提供将此信息存储在 AssemblyInfo 文件中，并在编译后成为程序集的一部分。因此，在运行时可以读取此信息。
> 
> **部分装配信息**
> 
> 1 AssemblyTitle ：来自程序集的标题名称。
> 
> 2 AssemblyDescription：它提供来自程序集的详细描述。
> 
> 3 AssemblyCompany：它提供来自装配的公司信息。
> 
> 4 AssemblyProduct：提供装配的生产信息。
> 
> 5 AssemblyCopyright：提供程序集的版权。
> 
> 6 AssemblyTrademark：它提供来自组件的商标。
> 
> 这些属性中的每一个都有一个定义的类，用于从 AssemblyInfo 文件中读取信息。

来自：[https ://www.dotnetspider.com/forum/157292-assemblyinfo-file.aspx](https://www.dotnetspider.com/forum/157292-assemblyinfo-file.aspx)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-01T15:45:40.523

转到您的项目属性，应用程序选项卡，然后单击程序集信息按钮。

这就是 AssemblyInfo.cs 中存储的内容。

在 Windows 资源管理器中，右键单击项目的 .exe 输出，选择属性，然后转到详细信息选项卡。那是由 AssemblyInfo.cs 生成的信息。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-11-01T15:47:15.073

在 AssemblyInfo 文件中，您可以存储可以从项目中的每个位置获取的信息，因此您不必更新所有位置，只需更新 assemblyInfo。

例如 - 在此文件中您更新版本号，它会在您的站点中自动更新。在 html 页面中，要获取版本号，请编写：

```
Assembly assembly = Assembly.GetAssembly(typeof(ProjectName.WebSite.Controllers.MyController));
string version = assembly.GetName().Version.ToString(); 
```

每次上传新版本时都会更新。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-01T15:44:18.353

它是装配级属性的方便位置，例如版本、公司名称等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-22T08:24:32.350

AssemblyInfo.cs 包含有关您正在构建的应用程序的一般信息，其中一些信息包括您的应用程序的标题、版权等，例如，如果您的应用程序的标题是“MyApplication”，您应该看到如下内容：[assembly: AssemblyTitle （“我的应用程序”）]

# windows - _CrtCheckMemory 使用示例

> ID：13180544
> 
> 赞同：6
> 
> 时间：2012-11-01T15:43:03.540
> 
> 标签：windows, debugging, heap-memory, visual-studio-debugging

我试图了解如何使用`_CrtCheckMemory`来跟踪我正在处理的 Windows 应用程序中的堆损坏。我似乎无法让它返回`false`。这是我的测试代码：

```
int* test = new int[1];
for(int i = 0; i < 100; i++){
    test[i] = 1;
}
assert( _CrtCheckMemory( ) ); 
```

在上面的代码中，`_CrtCheckMemory( )`返回 true。我在调试模式下运行。为了获得`_CrtCheckMemory`标记问题的简单示例，我还需要做什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T17:21:23.963

需要一个额外的步骤，您必须说服编译器将默认的*new*运算符替换为调试分配器。只有调试分配器会创建“无人区”区域来检测堆块的不足或覆盖。这是有风险的，使用原始分配器编译的代码不会与没有编译的代码很好地混合。所以它迫使你明确地选择加入。

这最好在预编译的头文件（默认为stdafx.h）中完成，这样您就可以确保*所有*代码都使用调试分配器。像这样：

```
#ifdef _DEBUG
#  define _CRTDBG_MAP_ALLOC
#  define _CRTDBG_MAP_ALLOC_NEW
#  include <crtdbg.h>
#  include <assert.h>
#endif 
```

CRTDBG 宏获得了 malloc() 函数并替换了*新的运算符。*

请注意，您发布的代码将首先触发另一个诊断。在 Windows Vista 及更高版本上，Windows 堆分配器首先会抱怨，因为代码破坏了 Windows 堆的完整性。通过仅索引到 2 来使覆盖更微妙。

# python - TypeError：“_io.TextIOWrapper”对象不可调用

> ID：13180554
> 
> 赞同：-1
> 
> 时间：2012-11-01T15:43:27.160
> 
> 标签：python, python-3.x

当我测试我的代码时：

```
def read_classification_from_file(path, name):
        path = add_slash(path) + name
        myfile = open(path, "r")
        mydict = {}
        for line in myfile():
                x = line.split(" ")
                x[1]=x[1].replace("\n","")
                mydict[x[0]]=x[1]
        return mydict
def add_slash(path):
        if path.endswith('/'): return path
        return path + '/' 
```

我收到错误：

```
 Traceback (most recent call last):
    File "spamfilter/solution/test_quality_for_corpus.py", line 59, in test_allPredictionsHam
    q = self.compute_quality_for_corpus(CORPUS_DIR)
    File "/local/ulohy/env/data/4893_1/quality.py", line 9, in compute_quality_for_corpus
    truth_dic = utils.read_classification_from_file(corpus_dir, "!truth.txt")
    File "/local/ulohy/env/data/4893_1/utils.py", line 5, in read_classification_from_file
    for line in myfile():
    TypeError: '_io.TextIOWrapper' object is not callable 
```

所以，我只是字体明白，错误在哪里。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:45:04.080

你只是想要`for line in myfile:`。 `file`可以直接迭代对象（一次产生 1 行）。但是，文件对象不支持调用（例如`myfile()`，因为`file.__call__`未实现而未实现）。

# java - 即使我选中“记住我的选择”，超级用户对话框也会继续显示

> ID：13180555
> 
> 赞同：2
> 
> 时间：2012-11-01T15:43:30.810
> 
> 标签：java, android, root

在我的应用程序中，我请求 root 权限，我接受它并检查“记住我的选择”，但每次我尝试以 root 身份运行命令时，“允许/禁止”对话框再次出现。

有什么解决办法吗？

# xml - 使用 for-each-group 的 XSLT 嵌套分组

> ID：13180556
> 
> 赞同：2
> 
> 时间：2012-11-01T15:43:33.557
> 
> 标签：xml, xslt, xpath, xslt-2.0

我必须根据某些属性对值进行分组。因此我想使用for-each-group。

这是我正在使用的输入 XML：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<cities>
  <city country="Germany"   continent="Europe">Munich</city>
  <city country="Germany"   continent="Europe">Dortmund</city>
  <city country="France"    continent="Europe">Brest</city>
  <city country="Japan"         continent="Asia" >Tokyo</city>
  <city country="Korea"      continent="Asia" >Seoul</city>
  <city country="Germany"   continent="Europe">Hannover</city>
  <city country="Poland"         continent="Europe">Krakau</city>
  <city country="Russia"      continent="Asia" >Omsk</city>
  <city country="Japan"         continent="Asia" >Kobe</city>
  <city country="Japan"         continent="Asia" >Ibaraki</city>
  <city country="Russia"      continent="Europe">St. Petersburg</city>
  <city country="Saudi-Arabia" continent="Africa">Riad</city>
  <city country="Ireland"        continent="Europe">Galway</city>
  <city country="Cameroon"       continent="Africa">Yaoundé</city>
  <city country="Austria"    continent="Europe">Vienna</city>
</cities> 
```

现在，我想创建一个具有嵌套列表格式的输出文件。
首先，我想按大陆分组，然后按国家内部分组，即国家和大陆内的城市分组。

输出应该看起来像这样：

```
<ul>
  <li>Europe
    <ul>
      <li>Germany
        <ul>
          <li>Munich</li>
          <li>Dortmund</li>
          <li>...</li>
        </ul>          
      </li>
      <li>France
        <ul>
          <li>...</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Asia
    <ul>...</ul>
  </li>
  <li>Africa
    <ul>...</ul>
  </li>
</ul> 
```

到目前为止，我所拥有的是以下 XSLT 样式表：

```
<xsl:template match="cities">
  <ul>
    <xsl:for-each-group select="city" group-by="@continent">
      <li>
        <xsl:value-of select="@continent" />
          <xsl:for-each-group select="stadt" group-by="@land">
           <ul>
             <li>
               <xsl:value-of select="@land" />
             </li>
           </ul>
         </xsl:for-each-group>
      </li>
    </xsl:for-each-group>
  </ul>
</xsl:template> 
```

这适用于第一级，即按大陆分组。但它不适用于列表中的嵌套级别。我需要一种方法来引用当前的分组元素，以便仅针对当前大陆按国家/地区分组。

最好/最方便的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T16:27:55.447

您的 XSLT 似乎与 XML 不太匹配，因为您嵌套的**xsl:for-each-group**引用了一个元素**stadt**和一个属性**@land**，它们没有出现在 XML 中。但是，我认为您真正需要使用的是**current-group()**函数来迭代组中的元素。在这种情况下，您将按当前大陆内的国家/地区进行分组。

```
<xsl:for-each-group select="current-group()" group-by="@country"> 
```

然后你将需要另一个嵌套循环来遍历该国的城市。

```
<xsl:for-each select="current-group()"> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>
   <xsl:template match="cities">
      <ul>
         <xsl:for-each-group select="city" group-by="@continent">
            <li>
               <xsl:value-of select="@continent"/>
               <ul>
                  <xsl:for-each-group select="current-group()" group-by="@country">
                     <li>
                        <xsl:value-of select="@country"/>
                        <ul>
                           <xsl:for-each select="current-group()">
                              <li>
                                 <xsl:value-of select="."/>
                              </li>
                           </xsl:for-each>
                        </ul>
                     </li>
                  </xsl:for-each-group>
               </ul>
            </li>
         </xsl:for-each-group>
      </ul>
   </xsl:template>
</xsl:stylesheet> 
```

在给定的 XML 上运行时，输出以下内容

```
<ul>
   <li>Europe
      <ul>
         <li>Germany
            <ul>
               <li>Munich</li>
               <li>Dortmund</li>
               <li>Hannover</li>
            </ul></li>
         <li>France
            <ul>
               <li>Brest</li>
            </ul></li>
         <li>Poland
            <ul>
               <li>Krakau</li>
            </ul></li>
         <li>Russia
            <ul>
               <li>St. Petersburg</li>
            </ul></li>
         <li>Ireland
            <ul>
               <li>Galway</li>
            </ul></li>
         <li>Austria
            <ul>
               <li>Vienna</li>
            </ul></li>
      </ul></li>
   <li>Asia
      <ul>
         <li>Japan
            <ul>
               <li>Tokyo</li>
               <li>Kobe</li>
               <li>Ibaraki</li>
            </ul></li>
         <li>Korea
            <ul>
               <li>Seoul</li>
            </ul></li>
         <li>Russia
            <ul>
               <li>Omsk</li>
            </ul></li>
      </ul></li>
   <li>Africa
      <ul>
         <li>Saudi-Arabia
            <ul>
               <li>Riad</li>
            </ul></li>
         <li>Cameroon
            <ul>
               <li>Yaound</li>
            </ul></li>
      </ul></li>
</ul> 
```

请注意，您可能希望将最内部的**xsl:for-each**替换为**xsl:apply-templates**以避免过度缩进！

# actionscript-3 - 使用对象文字作为 ActionScript 3 类的默认属性值

> ID：13180557
> 
> 赞同：-1
> 
> 时间：2012-11-01T15:43:38.123
> 
> 标签：actionscript-3

如果我在 ActionScript 中使用对象文字作为属性的默认值，这会创建一个被所有实例引用的*单个*对象，还是为每个实例创建一个新对象？

例如，如果我创建了这个的多个实例`AddressBook`......

```
class AddressBook {
    private var numbersByName:Object = {};

    public function addNumber(name:String, number:String):void {
        numbersByName[name] = number;
    }

    public function getNumber(name:String):String {
        return numbersByName[name];
} 
```

...他们会表现得正常，还是会使用相同的`numbersByName`对象，导致一个对象的所有更改也适用于其他对象？

* * *

即使每个`AddressBook`实例都获得了自己的对象，但可以想象，Flash 可能只是浅浅地应用此行为。考虑嵌套对象文字的默认值：

```
class AddressBook {
    private var indicies:Object = {
        numberToName: {},
        nameToNumber: {}
    };

    public function addNumber(name:String, number:String):void {
        indicies.numberToName[number] = name;
        indicies.nameToNumber[name] = number;
    }

    public function getName(number:String):String {
        return indicies.numberToName[number];
    }

    public function getNumber(number:String):String {
        return indicies.nameToNumber[number];
    }
} 
```

是为每个实例重新创建整个嵌套文字，还是不同的`indicies`对象共享相同的`numberToName`对象？

* * *

一般来说，一个类的属性之间会不会有一个对象字面量默认值...

```
class MyClass {
    private var myProperty:Object = { a: [1, 2, 3], b: { d: 4, e: 5 } };
} 
```

...和一个在构造函数中初始化它的？

```
class MyClass {
    private var myProperty:Object;
    public function MyClass() {
        myProperty = { a: [1, 2, 3], b: { d: 4, e: 5 } };
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:56:20.353

当您创建类的实例时，它将具有自己的唯一变量。

所以

```
var class_a:AddressBook = new AddressBook();
var class_b:AddressBook = new AddressBook();

class_a.var = 1;
class_b.var = 2;
trace(class_a.var) //traces 1. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:01:29.247

将创建全新的对象，不会重复使用任何对象。无论您使用简单`AddressBook`的还是带有嵌套对象文字的结果，您都会得到相同的结果：

```
trace("None instantiated yet.")

var a:* = new AddressBook;
trace("A instantiated.");

var b:* = new AddressBook; 
trace("B instantiated.");

a.addNumber("John", "555-5555");
trace(a.getNumber("John")); // prints 555-5555
trace(b.getNumber("John")); // prints null 
```

在对象文字内设置断点。第一次中断时的输出是什么？

```
None instantiated yet. 
```

第二次？

```
None instantiated yet.
A instantiated. 
```

每次创建实例时都会评估对象文字，并且不会在其他时间进行评估。

不幸的是，我无法找到这种行为的明确参考。ActionScript“规范”没有包含足够的细节。更好的参考将不胜感激。

# asp.net - HTMLEditorExtender 未正确加载到 Server.Transfer

> ID：13180558
> 
> 赞同：0
> 
> 时间：2012-11-01T15:43:39.370
> 
> 标签：asp.net, htmleditorextender

我正在编写一个使用 HTMLEditorExtender 的 Web 应用程序。我使用以下代码调用它：

```
 <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server" EnablePageMethods="true" />
    <asp:TextBox ID="htmlTextBox" runat="server" TextMode="Multiline" Width="90%" Rows="25" />
    <asp:HtmlEditorExtender ID="htmlEditorExtender" TargetControlID="htmlTextBox" runat = "server" EnableSanitization="false" >
    <Toolbar> 
            <asp:Undo />
            <asp:Redo />
            <asp:Bold />
            <asp:Italic />
            <asp:Underline />
            <asp:ForeColorSelector />
            <asp:FontNameSelector />
            <asp:FontSizeSelector />
            <asp:JustifyLeft />
            <asp:JustifyCenter />
            <asp:JustifyRight />
            <asp:JustifyFull />
            <asp:InsertOrderedList />
            <asp:InsertUnorderedList />
            <asp:CreateLink />
            <asp:UnLink />
    </Toolbar>
    </asp:HtmlEditorExtender> 
```

*注意：我知道设置 EnableSanitization="false" 是不好的，但这个应用程序只能私下使用。*

使用该代码，当页面加载时，文本框如下所示：

![](../Images/c0ad983052fe45aa333079fdb2d2b688.png)

这看起来不错！

但是，在我的应用程序中，我导航到另一个页面，然后需要使用 Server.Transfer(page_URL) 导航回该页面。当我这样做时，HTMLEditorExtender 不再正确加载，我得到如下所示的内容：

![](../Images/76722ddbd9e48cab2b9a1884dcc308dd.png)

如何让它在 Server.Transfer() 上正确加载？我在想它可能是一个简单的标志，我需要在创建 HTMLEditorExtender 元素时调用它，但我尝试了一些，但没有任何效果。

编辑：我应该补充一点，我使用的是 IE 8，它必须在 IE 8 中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:35:16.950

我更改停止使用 Server.Transfer() 并决定在 ASP 中设置 PostBackUrl。出于某种原因，这行得通。

# overlay - 绑定按键不起作用 - jquery 工具覆盖

> ID：13180567
> 
> 赞同：1
> 
> 时间：2012-11-01T15:44:14.893
> 
> 标签：overlay, jquery, jquery-tools

我无法为我应用覆盖的 div 绑定按键。下面是代码。

```
<div> 
    Content  <a href="#" id="load">Load overlay</a>
</div>

<div id="overlayDiv" class="overlay">
    <div id="someInnerDiv">
         Text 

    </div>
</div>

<script type="text/javascript> 
    function LoadOverlay()
    {
        $('#overlayDiv').overlay();
        $('#someInnerDiv').keypress(function() { alert (' key was pressed' ); });
        $('#someInnerDiv').focus();
    }
    $("#load").click(LoadOverlay);​
</script> 
```

警报没有出现。这是 jsfiddle 上的代码：http: [//jsfiddle.net/JEmgg/4/](http://jsfiddle.net/JEmgg/4/)

我猜这是捕捉事件的叠加层，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:48:44.077

如果您用一些 textarea 或输入 type='text' 替换该 div，则 keypress 事件有效，因此当您键入时，keypress 事件发生并且警报将起作用。

演示：http: [//jsfiddle.net/JEmgg/5/](http://jsfiddle.net/JEmgg/5/)

代替 ：

```
 <div id="someInnerDiv" ></div> 
```

和

```
 <input type="text" id="someInnerDiv" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T15:50:50.760

问题是您不能在没有文本区域、输入类型文本或其他输入元素的情况下插入文本。试试这个代码，它可以工作： [DEMO](http://jsfiddle.net/JEmgg/6/)

```
<div id="overlayDiv" class="overlay">
    <div id="someInnerDiv">
         Text
        <input type="text" name="test" id="test"/>
    </div>
</div> 
```

# android - 获取 lListView 上的所有完整可见对象

> ID：13180571
> 
> 赞同：18
> 
> 时间：2012-11-01T15:44:29.633
> 
> 标签：android, listview

我有一个 ListView，其中包含更多元素，然后我可以一次显示。现在我想从所有元素中获取索引，这些元素是完全可见的（-> 不包括仅部分可见的元素）。此时我使用`getFirstVisiblePosition()`& `getLastVisiblePosition()`into an`for-loop`来迭代它们，但是这些方法并不像我想要的那样准确。

有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-01T16:28:21.990

ListView 将其行组织在一个自上而下的列表中，您可以使用`getChildAt()`. 所以你想要的很简单。让我们获取第一个和最后一个视图，然后检查它们是否*完全*可见：

```
// getTop() and getBottom() are relative to the ListView, 
//   so if getTop() is negative, it is not fully visible
int first = 0;
if(listView.getChildAt(first).getTop() < 0)
    first++;

int last = listView.getChildCount() - 1;
if(listView.getChildAt(last).getBottom() > listView.getHeight())
    last--;

// Now loop through your rows
for( ; first <= last; first++) {
    // Do something
    View row = listView.getChildAt(first);
} 
```

* * *

**添加**

> 现在我想从所有元素中获取索引，这些元素是完全可见的

我不确定那句话是什么意思。如果上面的代码不是您想要的索引，您可以使用：

```
int first = listView.getFirstVisiblePosition();
if(listView.getChildAt(0).getTop() < 0)
    first++; 
```

拥有一个与您的适配器相关的索引（即`adapter.getItem(first)`.）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:45:41.310

我这样做的方法是扩展您传入适配器`getView`的任何视图`ListView`并覆盖方法`onAttachedToWindow`并`onDetachedToWindow`跟踪可见的索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T18:15:57.947

试试 onScrollListner，你可以使用 getFirstVisiblePosition 和 getLastVisiblePosition。

这个[这个](https://stackoverflow.com/questions/13130389/how-to-get-items-currently-displayed-in-adapterview/13134100#13134100)链接，它包含类似类型的问题。我想你在那里得到了答案......

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-12-12T11:20:18.463

上面的代码有些正确。如果您需要找到视图的完全可见位置，请使用以下代码

```
public void onScrollStateChanged(AbsListView view, int scrollState)  {
    // TODO Auto-generated method stub
    View v = null;

    if (scrollState == 0) {
        int first =0;
        if (view.getChildAt(first).getTop() < 0)
            first++;
        int last = list.getChildCount() - 1;
        if (list.getChildAt(last).getBottom() > list
                .getHeight())
            last--;
        // Now loop through your rows
        for ( ; first <= last; first++) {
            // Do something

            View row = view.getChildAt(first);
            // postion for your row............ 
            int i=list.getPositionForView(row);
        }
    }
        // set the margin.
} 
```

# android - Android如何截取屏幕截图？

> ID：13180574
> 
> 赞同：7
> 
> 时间：2012-11-01T15:44:45.133
> 
> 标签：android, screenshot

我知道如何截屏，但我想知道它是如何工作的。

至少从 Android 4.0 开始，你已经可以通过同时按住手机上的音量减小键和电源键来截屏，Android 会捕获当前屏幕并将其保存到 SD 卡中。

我只是想知道是否有人知道这是如何工作的，例如，它是在后台持续运行的服务，还是每个应用程序中内置的东西，或者 . 另外，它位于Android的源代码中的什么位置？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T16:02:02.630

浏览[源代码](http://androidxref.com/4.1.1/)，我找到了侦听组合键并启动该过程的部分：

下面是具体代码：

[http://androidxref.com/4.1.1/xref/frameworks/base/policy/src/com/android/internal/policy/impl/PhoneWindowManager.java#3270](http://androidxref.com/4.1.1/xref/frameworks/base/policy/src/com/android/internal/policy/impl/PhoneWindowManager.java#3270)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-01T16:04:47.223

如果您只想截取非常直接的屏幕截图：

```
public Bitmap screenShot(View view) {
    Bitmap bitmap = Bitmap.createBitmap(view.getWidth(),
            view.getHeight(), Config.ARGB_8888);
    Canvas canvas = new Canvas(bitmap);
    view.draw(canvas);
    return bitmap;
} 
```

只需使用您想要快照的视图调用此方法。因此，如果您想要整个屏幕，只需传入您 top most `ViewGroup`。如果您想要系统控件也只需调用：

```
screenShot((ViewGroup) view.getParent()); 
```

现在，如果您想知道“降低音量 + 电源键”在操作系统中的工作方式比您也可以访问的更深。无法从 APK AFAIK 拦截电源按钮。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-01T16:06:42.897

我刚刚在源代码树中找到了代码：[https ://github.com/android/platform_frameworks_base/tree/master/packages/SystemUI/src/com/android/systemui/screenshot](https://github.com/android/platform_frameworks_base/tree/master/packages/SystemUI/src/com/android/systemui/screenshot)

我想这只是通读它以更好地理解该过程的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T16:17:30.417

Android 应用程序使用意图来调用系统级资源。例如——大多数运行相机的软件都是由操作系统提供的。Android 操作系统基于 unix/linux 内核，因此使用相机看起来像这样。

1.  应用程序/进程决定它要使用相机。
2.  该应用程序/进程构建一个意图并将其传递给操作系统。
3.  意图由操作系统处理，相机软件在新进程中执行（exec）。调用进程可以在同步调用 Intent 时阻止它，或者它可以异步运行，调用应用程序和 Intent 调用的应用程序可以同时运行。在相机的示例中，它可能会被同步调用并阻塞。
4.  用户使用相机进程来拍照。
5.  相机进程退出并产生错误或图片。
6.  操作系统执行一些 ipc（进程间通信）以将图片传递回调用进程。根据应用程序调用的意图类型，使用管道或消息传递的选择留给操作系统。相机可能会使用消息传递，因为父进程在子进程运行时被阻塞。
7.  现在阻塞等待返回意图的调用进程被操作系统唤醒并返回到运行状态。
8.  图片已返回给调用应用程序，供其使用。

当您拍摄屏幕截图时，这正是发生的事情。有一个进程正在运行来处理用户界面。它基本上坐下来等待输入和过滤任何应该由操作系统解释的东西，然后再通过管道传输到当前正在运行的应用程序。这是另一个 unix 约定，此时在我能想到的每个操作系统中都是标准的——管道输入流。它允许操作系统在传递给应用程序之前捕获更高优先级的输入，例如操作系统控制命令。（想想 Windows 中的 ctrl-alt-delete，或 unix 中的 ctrl-c/ctrl-z。）当屏幕截图键被按下时，这个上游 io 进程执行一个特殊的程序来拍摄屏幕截图（通过意图）和命令从未真正传递给“正在运行”的应用程序。该程序在新进程中执行（exec），构建屏幕位图，将它保存到画廊空间，然后死掉——所有这些都与调度程序处理时间共享异步进行，因此手机始终感觉“响应”。您在 John Bokers 中看到使用所有 gorp 回答源代码来实现这一点。

# c++ - 使用 new 关键字创建的 c++ 对象不呈现；在堆栈上创建的对象确实

> ID：13180575
> 
> 赞同：6
> 
> 时间：2012-11-01T15:44:52.067
> 
> 标签：c++, opengl

**编辑**：我已经剥离了所有纹理和法线贴图，但问题仍然存在

我正在尝试在屏幕上绘制一大块地形。渲染函数如下所示：

```
void TerrainChunk::Render()
{
   std::cout << "Render Me!\n";
   glColor3f(0.5f, 0.5f, 0.5f)
   glDisable(GL_LIGHTING);
   for(int x = 1; x < kChunkSize - 1; x++)
   {
      for(int z = 1; z < kChunkSize - 1; z++)
      {
         std::cout << height_map_[x][z] << " ";
         glBegin(GL_TRIANGLE_STRIP);
            glVertex3f(x, height_map_[x][z], z);
            glVertex3f(x+1, height_map_[x+1][z], z);       
            glVertex3f(x, height_map_[x][z+1], z+1);
            glVertex3f(x+1, height_map_[x+1][z+1], z+1);
         glEnd();
      }
      std::cout << std::endl;
   }
   glEnable(GL_LIGHTING);
} 
```

在堆栈上创建对象时

```
TerrainChunk chunk("chunk1.png", "grass.png");
chunk.Init(); 
```

它完美呈现。

当我用 new 创建它时

```
TerrainChunk *chunk = new TerrainChunk("chunk1.png", "grass.png");
chunk->Init(); 
```

什么都没有出现。在这两种情况下，都会调用 Render 并打印出正确的高度图。我希望这两种情况的行为相同。

**编辑**：这是请求的 Init() 代码。它所做的只是在每次调用 Render() 时加载我已经验证正确的高度图。

```
void TerrainChunk::Init()
{
   std::cout << height_file_ << ", " << texture_file_ << std::endl;

   //Load height map
   SDL_Surface *temp = IMG_Load(height_file_.c_str());
   if(!temp)
   {
      printf("Failed to load chunk.\n");
      exit(-1);
   }
   Uint32 *pixels = (Uint32 *)temp->pixels;
   for(int z = 0; z < kChunkSize; z++)
   {
      for(int x = 0; x < kChunkSize; x++)
      {
         Uint8 r, g, b;
         SDL_GetRGB(pixels[x + z * temp->w], temp->format, &r, &g, &b);
         height_map_[x][z] = g / 12;
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:40:13.187

当同一个对象在堆栈上创建时有效，但在堆中创建时无效，反之亦然，这通常是因为成员未初始化。堆分配是零初始化的，而堆栈分配不是。我建议在 valgrind 下运行你的程序，它很可能会告诉你出了什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:55:52.840

我不得不同意 Luchian Grigore：基于堆栈的版本将在您使用完时自动删除；基于堆的版本只会被显式删除。

如果你改变：

```
TerrainChunk *chunk = new TerrainChunk("chunk1.png", "grass.png");
chunk->Init(); 
```

至：

```
TerrainChunk *chunk = new TerrainChunk("chunk1.png", "grass.png");
chunk->Init();
delete chunk; 
```

结果不一样吗？

# java - 时间范围内的小时是否跨越 2 天？

> ID：13180577
> 
> 赞同：1
> 
> 时间：2012-11-01T15:45:01.730
> 
> 标签：java, date, time

我有一个只能在特定时间范围内执行的函数。用户可以通过输入开始和结束时间来指定这个时间范围。

我遇到的问题是时间范围跨越几天。例如：开始范围小时：18（18:00 下午 6 点） 结束范围小时：6（06:00 上午 6 点）

一个简单的：

```
if( hour >= startrange && hour <= endrange ) { now in range } 
```

在这种情况下不起作用。

我发现很难为这个问题想出一个解决方案。也许今天我的头脑已经足够了。( ;) )

谁能给我指个方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:05:49.507

如果 startrange > endrange，则必须更改 if 子句。所以：

```
if (startrange > endrange) {
    if (hour > startrange`) hour = hour -24;
    startrang = startrange -24;
}
if( hour >= startrange && hour <= endrange ) { now in range } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:47:52.007

首先，我会使用[Joda Time](http://joda-time.sf.net)及其`LocalTime`类型来表示时间。然后你可以这样做：

```
static boolean isInRange(LocalTime start, LocalTime end, LocalTime value) {
    // Avoid equality problems - see description
    if (value.equals(start) || value.equals(end)) {
        return true;
    }
    if (start.compareTo(end) > 0) {
        return !isInRange(end, start, value);
    }
    return start.compareTo(value) < 0 && value.compareTo(end) < 0;
} 
```

换句话说，您通常只会在`value`获得开始/结束范围时进行最终比较`start <= end`- 但是如果您从相反的方式开始，那么您只需反转进行反向比较的结果.

换句话说，如果某物*不在*范围内（上午 2 点，晚上 10 点），则它在范围内（晚上 10 点，凌晨2 点）。

或者，您可以避免递归调用：

```
static boolean isInRange(LocalTime start, LocalTime end, LocalTime value) {
    return start.compareTo(end) > 0
        // Reversed: if it's earlier than the end point, or later than the start
        ? value.compareTo(end) <= 0 || start.compareTo(value) <= 0
        : start.compareTo(value) <= 0 && value.compareTo(end) <= 0;
} 
```

棘手的一点是平等。上面的代码假定起点/终点都包含在内，无论哪种方式。如果您想要其他任何东西，则需要非常仔细地考虑每种情况。

# iphone - Instruments VM 跟踪器为空

> ID：13180585
> 
> 赞同：3
> 
> 时间：2012-11-01T15:45:39.617
> 
> 标签：iphone, ios, xcode, ios6, instruments

与此问题相同的症状[为什么 VM Tracker 为空？](https://stackoverflow.com/questions/11692242/why-vm-tracker-is-empty).

使用运行 iOS 6、XCode 4.5 的 iPhone5，我开始分析我的项目（我也尝试过独立运行 Instruments）。我确保启用自动快照（我也尝试过手动快照）。我可以看到 VM 跟踪器中的状态从“空闲”切换到“分析过程”非常短暂，所以它似乎在做某事，但是我的 VM 跟踪器图表总是空的，好像没有数据一样。

Mac 的控制台和 iPhone 的控制台中有一些警告，但没有错误，也没有特定于 VM 跟踪器的内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T04:18:20.087

上次这种情况发生在我身上时，确保应用程序使用开发证书（而不是分发证书）签名为我解决了这个问题。

# java - Java 类定义中的语法错误

> ID：13180590
> 
> 赞同：-1
> 
> 时间：2012-11-01T15:45:49.413
> 
> 标签：java

谁能向我解释这里有什么问题？

谢谢。

```
public class test {

    int num1 = 1, num2 = 2;

    num1=num1+num2;

} 
```

它在“num1=num1+num2;”上出错 说“令牌上的语法错误”；“，，预期”

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:46:53.267

您不能放置任意语句，例如`num1=num1+num2;`在类级别。语句必须始终位于方法、构造函数或（静态或非静态）初始化程序块中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:46:53.530

您的分配不在方法或静态初始化程序块中。简而言之，*您希望它何时执行*？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T15:49:47.563

将其`num1=num1+num2;`放在方法或初始化块中，您不能将赋值语句放在方法/构造函数/初始化块之外。

```
 {
    num1=num1+num2;
    } 

or 

  public void m1() {
    num1=num1+num2;
     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T15:47:35.337

您在方法之外添加，在 main 中添加并使 num1/2 静态，或者在另一种方法中添加，而不是在空白处。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T15:47:38.743

你没有给你的代码一个方法，所以你的总结不在正确的地方。

# jtable - 更新 JTable

> ID：13180594
> 
> 赞同：3
> 
> 时间：2012-11-01T15:46:08.797
> 
> 标签：jtable

我已经看到我的问题被问了好几次，但我从来没有看到我期望的答案。我已经在 J​​Table 中输入了数据库的元素，我希望能够通过一些 JButton 删除/添加元素。问题是当我添加/删除时，修改在数据库中可见，但在 JTable 中不可见。当我停止程序并再次运行它时，JTable 会更新。修改行后我能做些什么来立即更新表？我试过做`this.table.repaint()`，但没有奏效。我想我必须对 tablemodel 做一些事情，可能是，`fireTableStructureChanged();`但我不太了解如何使用它 非常感谢您抽出宝贵的时间。

这是我在 JTable 的控制器类中的部分代码，我认为它不会有帮助..

```
public void update(Observable o, Object message) {
    Integer iMessage = (Integer) message;

    if (iMessage == Cours.CHANGEMENT_ELEVES) {
        int sizeEl = this.modele.getAllEleves().size();

        if (this.modele.getAllEleves() !=null) {
            Vector<String[]> data = this.modele.getAllEleves();

            for (int i=0; i<sizeEl; i++) {
                this.table.setValueAt(data.get(i)[0],i, 0);
                this.table.setValueAt(data.get(i)[1],i,1);
                this.table.setValueAt(data.get(i)[2],i,2);
        }
        this.table.repaint();
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T04:18:01.613

当您想要将 JTable 与数据库同步时，请添加以下代码。

```
 // Here Add Your Data Fetch Code From DataBase 
        For e.g.
       Vector<Object> objVect_Dt = util.GetQueryResultSet(query);
       Vector<Vector<String>> data = (Vector<Vector<String>>) objVect_Dt.get(1);
       Vector<String> header = (Vector<String>) objVect_Dt.get(0); 
```

从数据库获取数据后更新表模型为

```
 DefaultTableModel dtm = new DefaultTableModel(data, header);
        Table.setModel(dtm);
         table.repaint(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T11:11:07.773

它不是 Jtable 重绘或重新验证的问题。当您从表模型中添加行或删除行时，您必须触发事件 fireTableRowInserted 或 tableDatachangeEvent。以下代码是示例：

```
class myModel extends AbstractTableModel
{
////
////
////
////
////
       // Remove Row from table Model
        public void removeRow(int row) {
            data.removeElementAt(row);
            fireTableRowsDeleted(getRowCount(), getRowCount());
        }

        // Add new row to table
        public void addRow(Vector row) {
            data.addElement(row);
            fireTableRowsInserted(0, getRowCount());
        }
} 
```

# java - 为什么 Java 原始类型的修饰符是 public、abstract 和 final？

> ID：13180600
> 
> 赞同：22
> 
> 时间：2012-11-01T15:46:30.180
> 
> 标签：java, reflection

在对 Java 类型进行一些反思的过程中，我遇到了一个我不理解的奇怪现象。

检查`int`其修饰符返回`public`,`abstract`和`final`. 我理解`public`and `final`，但是`abstract`on 原始类型的存在对我来说并不明显。为什么会这样？

编辑：我不是在反思，`Integer`而是在`int`：

```
import java.lang.reflect.Modifier;

public class IntegerReflection {
    public static void main(final String[] args) {
        System.out.println(String.format("int.class == Integer.class -> %b", int.class == Integer.class));
        System.out.println(String.format("int.class modifiers: %s", Modifier.toString(int.class.getModifiers())));
        System.out.println(String.format("Integer.class modifiers: %s", Modifier.toString(Integer.class.getModifiers())));
    }
} 
```

运行时的输出：

```
int.class == Integer.class -> false
int.class modifiers: public abstract final
Integer.class modifiers: public final 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T16:08:53.877

根据[JLS 8.1.1.1 - 抽象类](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.1.1)：

> 抽象类是不完整的或被认为不完整的类。

根据定义，不能有`int.class`. 你不能编译这种代码：

```
int a = new int(); 
```

没有构造函数`int`。没有创建对象。 `int.class`甚至没有延长`Object`。如果您运行以下代码行，您将得到`null`结果。

```
System.out.println(int.class.getSuperclass()); 
```

所以因为你永远不可能有一个真正的实例`int.class`，它是根据定义的`abstract`。此外，根据[Integer API](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#TYPE)，`Integer.TYPE`字段（包含`int.class`）是一个仅*表示*原始类型的类。

以下代码证明了这一点：

```
int a = 4;
System.out.println(int.class.isInstance(a)); 
```

这返回`false`。

因此，如API`int.class`中所述，可能只是在系统中用于表示目的。`Integer`也有`void.class`类型但没有`null.class`类型的事实使我认为这主要与反射一起使用。不过，这只是推测。

* * *

如果有人感兴趣，那么它`int.class`基本上不包含反射包识别的任何内容，并且可能只是一个虚拟类。如果您运行以下代码，您将看到它没有构造函数、字段和方法。

```
Method[] intMethods = int.class.getMethods();

if(intMethods.length == 0) {
    System.out.println("No methods.");
}
else {
    for(Method method : intMethods) {
        System.out.println(method.getName());
    }
}

Constructor[] intConstructors = int.class.getConstructors();

if(intConstructors.length == 0) {
    System.out.println("No constructors.");
}
else {
    for(Constructor constructor: intConstructors) {
        System.out.println(constructor.getName());
    }
}

Field[] intFields = int.class.getFields();

if(intFields.length == 0) {
    System.out.println("No fields.");
}
else {
    for(Field field: intFields) {
        System.out.println(field.getName());
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T15:51:42.003

如果你跑

```
System.out.println(Modifier.toString(int.class.getModifiers())); 
```

你得到

```
public abstract final 
```

可能是因为你不能对它进行子类化——即最终的，你不能实例化它——即抽象的。

来自 Oracle 的[抽象方法和类](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)

> 抽象类不能被实例化，但它们可以被子类化。

事实上，它也是最终的意味着它不能是子类。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-01T19:22:39.647

## 来自 JVM 规范：

> 抽象类是不完整的或被**认为**不完整的类。只有抽象类可以有抽象方法，也就是已经声明但还没有实现的方法。
> 
> 如果一个类的定义是完整的，并且不需要或 > 不需要子类，则可以将其声明为最终类。因为 final 类永远不会有任何子类，所以 final 类的方法不能在子类中被覆盖。一个类不能既是最终的又是抽象的，因为这样的类的实现永远不可能完成。

根据[规范](http://docs.oracle.com/javase/specs/jvms/se5.0/html/ClassFile.doc.html#75734)，一个类不能既是抽象的又是最终的。*但是*，JVM 似乎没有将原始类型视为类，这在技术上是正确的，因为原始类型**不是**类，而是由 JVM（使用`Class getPrimitiveClass(const char *name)`）提供给语言运行时的。

所以`int`，以及所有其他原始类型，

```
> a. Should be accessible from within the language: Make it `public` 
> b. Should not be extensible                     : Make it `final` 
> c. Should not be instantiated with `new`        : Make it `abstract`. 
```

我从 JVM 规范中关于为什么原始类型的理论`abstract`是因为它们被**认为是**不完整的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T16:11:17.073

`int.class`也可以作为`Integer.TYPE`表示原始类型的 Class 实例来访问`int`。

鉴于您无法实例化此类的对象（因为 int 不是实例，它们是原始类型），我认为将类型标记为`abstract`.

[目前我在JLS](http://docs.oracle.com/javase/specs/jls/se7/html/index.html)中找不到对此的参考。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-17T07:11:24.940

也许这只是`primitive class`不同的特殊标记`normal class`。

JVM代码实现：

```
mirror::Class* ClassLinker::InitializePrimitiveClass(ObjPtr<mirror::Class> primitive_class,
                                                     Primitive::Type type) {

  Handle<mirror::Class> h_class(hs.NewHandle(primitive_class));
  // public final static
  h_class->SetAccessFlags(kAccPublic | kAccFinal | kAccAbstract);
  h_class->SetPrimitiveType(type);
  h_class->SetIfTable(GetClassRoot(kJavaLangObject)->GetIfTable());

  // ...
  return h_class.Get();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-12T02:23:47.503

> 为什么 Java 原始类型的修饰符是 public、abstract 和 final？

用于状态的 Java 11 [javadoc ：](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Class.html#getModifiers())`Class.getModifiers()`

> *如果底层类是一个数组类，那么它的`public`,`private`和`protected`修饰符与其组件类型的修饰符相同。如果 this`Class`表示原始类型 or `void`，则其`public`修饰符始终为真，其`protected`和`private`修饰符始终为假。如果此对象表示数组类、原始类型或`void`，则其`final`修饰符始终为真，其`interface`修饰符始终为假。**它的其他修饰符的值不是由本规范确定的**。*

所以 javadoc 指定原始类型是`public`and `final`。这很直观。这将是在这两种情况下进行选择的原因。

从技术上讲，`abstract`对原始类型没有任何意义。原始类型不是类，并且不能使用`new`. 然而，考虑到其他 Java API 的工作方式（例如反射方法查找），有必要拥有`Class`代表所有 Java 类型的对象。因此，`Integer.TYPE`==`int.class`和类似的需要存在。

无论如何，无论出于何种原因，规范对表示原始类型的`abstract`a 上的修饰符说“未指定” 。`Class`

但是，`Class`修饰符表示为整数中的位，并且 JVM 实现必须为该整数中的“抽象”位位置返回一个值。虽然根据规范，这两种选择（1 或 0）都没有任何意义，但^(对于)Java 工程师（可能早在 1990 年代）来说，在原始类型的情况下为位选择²的特定值比 1 更好（比如说）在运行时随机返回 1 或 0。

所以底线是：

*   的选择`abstract`是（或可能）完全是任意的，所以不要赋予它任何意义。
*   如果您依赖当前的行为`abstract`，那么*理论上*存在您的代码将在 Java 的未来版本中中断的风险......如果他们改变了行为。

* * *

^(1 - 在我看来，这更好，因为`Class`API 的用户比非确定性行为更容易具有确定性行为。而且以这种方式实现它很可能更简单。
2 - 我们很可能永远无法确定做出具体选择的原因。也许有人扔了硬币？没关系。)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-11-01T15:51:02.290

如果您反映到从抽象类继承的类中，然后尝试挖掘该实例的基类，则在抽象类中定义为抽象的属性将没有价值，但它是类定义的一部分。

这是一个例子：

```
public class absBase{

    private string name;
    private int ID;

    public abstract int GetID();
}

public class concreteClass:absBase{
    @Override
    public int GetID(){
        return ID + 1;
    }
} 
```

因此，如果您反映的是 absBase，并查看 GetID，则它必须是抽象的，如果您查看的是具体的 Class.GetID()，但它将是公共的。希望有帮助。

# python - 如何使用 WTForms、Jinja 和 Python 管理多个同名 HTML 元素

> ID：13180601
> 
> 赞同：0
> 
> 时间：2012-11-01T15:46:30.020
> 
> 标签：python, jinja2, wtforms

我用 Jinja 定义了一个 HTML 模板，在那里我定义了三 (3) 个同名的文本字段。然后在后端使用 get_all 方法收集所有值。

然后为了添加表单验证等，我添加了 WTForms 库。然后我将表单定义为：

```
class RoleForm(BaseForm):
    name = fields.TextField(_('Name')) 
```

在 HTML 页面中，我将这个元素渲染了三 (3) 次。

现在，当我提交表单并且验证失败时，我使用表单作为输入重新呈现模板。但是每个元素都有我输入的值，所有文本字段都具有第一个文本字段的值。

此外，如果验证没问题，我会使用 form.name.data，它不会提供三个文本字段中的所有数据，而只提供第一个。

你知道我该如何处理这种情况吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:29:00.507

您正在寻找[`wtforms.fields.FieldList`](http://wtforms.simplecodes.com/docs/1.0.2/fields.html#wtforms.fields.FieldList)现场外壳：

```
class RoleForm(BaseForm):
    name = fields.FieldList(fields.TextField(_('Name')), min_entries=3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-22T18:38:24.710

您需要做的是创建这样`input`的 HTML 元素，例如：

```
<input name="row-{{ loop.index0 }}" type="checkbox"> 
```

它将呈现如下输入：

```
<input name="row-0" type="checkbox">
<input name="row-1" type="checkbox"> 
```

在一个循环或类似的东西里面。然后您将能够检索表单内容：

```
class ListForm(Form):
    row = FieldList(fields.TextField('Row')) 
```

# c++ - C++ std::bad_alloc 来自堆栈分配？

> ID：13180603
> 
> 赞同：0
> 
> 时间：2012-11-01T15:46:32.147
> 
> 标签：c++, opencv, stack-overflow, std, mod-pagespeed

我们的代码中有一个测试试图解决堆栈溢出错误（在 OpenCV 的旧修改版本中）。AFAIK，如果实际上存在堆栈溢出，则测试应该 SEGV。

我们的一位用户由于`std::bad_alloc`抛出异常而导致测试失败。听起来此异常仅针对堆分配引发（新运算符的结果 - [http://www.cplusplus.com/reference/std/new/bad_alloc/](http://www.cplusplus.com/reference/std/new/bad_alloc/)）。

这可能是由于大量堆栈分配而发生的吗？

作为参考，测试是：[http ://code.google.com/p/modpagespeed/source/browse/trunk/src/net/instaweb/rewriter/image_test.cc#826](http://code.google.com/p/modpagespeed/source/browse/trunk/src/net/instaweb/rewriter/image_test.cc#826)

错误报告是：[http ://code.google.com/p/modpagespeed/issues/detail?id=528](http://code.google.com/p/modpagespeed/issues/detail?id=528)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:49:09.510

不，此异常仅从`operator new/new[]`.

即使您不在`operator new/new[]`任何地方使用它也可能发生 - 原因 - STL 容器确实使用它。

# android - 解析 XML Android - 标签解析

> ID：13180606
> 
> 赞同：4
> 
> 时间：2012-11-01T15:46:34.077
> 
> 标签：android, xml, dom

我试图建立一个应用程序来阅读这个提要：[http ://loc.grupolusofona.pt/index.php/?format=feed](http://loc.grupolusofona.pt/index.php/?format=feed)

它工作得很好，除了当它到达元素时，它只是跳过它，让它空白。

这是我得到的：

```
public class AndroidXMLParsingActivity extends ListActivity {

// All static variables
static final String URL = "http://loc.grupolusofona.pt/index.php/?format=feed";
// XML node keys
static final String KEY_ITEM = "item"; // parent node
static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_DESC = "description";
static final String KEY_LINK = "link";
static final String KEY_PUBDATE = "pubDate";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_ITEM);
    // looping through all item nodes <item>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
        map.put(KEY_DESC, parser.getValue(e, KEY_DESC));
        map.put(KEY_LINK, parser.getValue(e, KEY_LINK));
        map.put(KEY_PUBDATE, parser.getValue(e, KEY_PUBDATE));

        // adding HashList to ArrayList
        menuItems.add(map);
    }

    // Adding menuItems to ListView
    ListAdapter adapter = new SimpleAdapter(this, menuItems,
            R.layout.list_item,
            new String[] { KEY_TITLE, KEY_DESC, KEY_PUBDATE, KEY_LINK }, new int[] {
                    R.id.title, R.id.desc, R.id.pub, R.id.link});

    setListAdapter(adapter);

    // selecting single ListView item
    ListView lv = getListView();

    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem

            String title = ((TextView) view.findViewById(R.id.title)).getText().toString();
            String description = ((TextView) view.findViewById(R.id.desc)).getText().toString();
            String link = ((TextView) view.findViewById(R.id.link)).getText().toString();

            // Starting new intent

            System.out.println("Title: " + title);
            System.out.println("Link: " + link);
            System.out.println("Description:" + description);
            Intent in = new Intent(Intent.ACTION_VIEW);
            in.setData(Uri.parse(link));

            startActivity(in);

        }
    });
}
} 
```

和 XMLParser：

```
public class XMLParser {

// constructor
public XMLParser() {

}

/**
 * Getting XML from URL making HTTP request
 * @param url string
 * */
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
}

/**
 * Getting XML DOM element
 * @param XML string
 * */
public Document getDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
}

/** Getting node value
  * @param elem element
  */
 public final String getElementValue( Node elem ) {
     Node child;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                 if( child.getNodeType() == Node.TEXT_NODE  ){
                     return child.getNodeValue();
                 }
             }
         }
     }
     return "";
 }

 /**
  * Getting node value
  * @param Element node
  * @param key string
  * */
 public String getValue(Element item, String str) {     
        NodeList n = item.getElementsByTagName(str);        
        return this.getElementValue(n.item(0));
    } 
```

}

关于我做错了什么的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:25:05.813

我认为，问题在于`<description>`该站点返回的标签都包含`<![CDATA[`部分，而不是文本。您的代码`XMLParser.getElementValue`仅返回`TEXT`节点的值。改变这个：

```
if( child.getNodeType() == Node.TEXT_NODE  ){
    return child.getNodeValue();
} 
```

至：

```
if( child.getNodeType() == Node.TEXT_NODE || child.getNodeType() == Node.CDATA_NODE ){
    return child.getNodeValue();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:53:49.663

```
public final String getElementValue( Node elem ) {
 Node child;
 if( elem != null){
     if (elem.hasChildNodes()){
         for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
             if( child.getNodeType() == Node.TEXT_NODE  ){
                 return child.getNodeValue();
             }
         }
     }
 }
 return "";
} 
```

您正在使用此代码在解析描述时给出 null 。

我尝试您的代码并获取描述的内容。

我用

```
child.getTextContent() 
```

它给了我内容。

将您的代码更改为

```
public final String getElementValue( Node elem ) {
 Node child;
 if( elem != null){
 if (elem.hasChildNodes()){
     for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
         if(child.getNodeName().equalsIgnoreCase("description"))
         {
             return child.getTextContent();
         }
         if( child.getNodeType() == Node.TEXT_NODE  ){
             return child.getNodeValue();
         }
     }
 }
 }
 return "";
} 
```

你也得到了描述的内容...... 试试看..，。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T17:24:42.270

描述标签包含一个 CDATA 元素。因此它不是一个文本节点，所以你检查

```
if( child.getNodeType() == Node.TEXT_NODE  ) 
```

这些节点将是错误的。孩子很可能是 CDATA_SECTION_NODE。该节点也可能有多个子节点（如果 CDATA 之外的文本包括空格，则为文本节点），在这种情况下您需要处理选择正确的子节点。

# joomla - Joomla 2.5试图获取非对象错误的属性

> ID：13180620
> 
> 赞同：2
> 
> 时间：2012-11-01T15:47:18.103
> 
> 标签：joomla, joomla-extensions

> **可能重复：**
> [试图获取非对象的属性](https://stackoverflow.com/questions/5891911/trying-to-get-property-of-non-object-in)

在为 joomla 2.5 开发自定义组件时，我遇到了一个问题。

我通过 MVC 结构从我的数据库中提取数据。一切正常，除非查询没有返回任何结果。

在我看来，我遇到了一个`Trying to get property of non-object`错误。

有什么办法可以防止这种情况并向用户显示没有任何结果的好消息吗？

模型部分：

```
$this->_gallery = array();
            // Load the data
        if (empty( $this->_gallery )) {
            $query = ' SELECT #__gallery.id, user_id, merk, type, name, bouwjaar, vermogen, #__gallery_kleur.kleur, transmissie, #__gallery_benzine.soort AS brandstof, cilinders, motorinhoud, gewicht, link FROM #__gallery LEFT JOIN #__gallery_merk ON #__gallery.merk_id = #__gallery_merk.merk_id LEFT JOIN #__gallery_type ON #__gallery.type_id = #__gallery_type.type_id LEFT JOIN #__gallery_autoinfo ON #__gallery.id = #__gallery_autoinfo.galleryid LEFT JOIN #__gallery_kleur ON #__gallery_autoinfo.kleur = #__gallery_kleur.kleurid LEFT JOIN #__gallery_benzine ON #__gallery_autoinfo.brandstof = #__gallery_benzine.benzineid LEFT JOIN #__users ON #__gallery.user_id = #__users.id LEFT JOIN (SELECT * FROM #__gallery_foto ORDER BY #__gallery_foto.hoofdfoto ASC) as #__gallery_foto ON #__gallery.id = #__gallery_foto.galleryid GROUP BY #__gallery.id ';
            $this->_db->setQuery( $query );
            $this->_db->query();
            $num_rows = $this->_db->getNumRows();

            $this->_gallery = $this->_db->loadObjectList();
        }
        if (!$this->_gallery) {
            $this->_gallery = new stdClass();
            $this->_gallery->id = 0;
        }
    $this->_total = count($this->_gallery); 

    if ($num_rows == 0) {
    if ($this->getState('limit') > 0) {
 $this->_gallery    = array_splice($this->_gallery, $this->getState('limitstart'), $this->getState('limit') );
    }
    }
     return $this->_gallery; 
```

看法：

```
 // No direct access to this file
defined('_JEXEC') or die('Restricted access');

// import Joomla view library
jimport('joomla.application.component.view');
jimport( 'joomla.html.pagination' );

/**
 * HTML View class for the HelloWorld Component
 */
class GalleryViewGallery extends JView
{
    // Overwriting JView display method
    function display($tpl = null) 
    {
        $gallery = $this->get( 'Gallery' );
        $this->assignRef( 'gallery',    $gallery );

        $this->items = $this->get('Gallery');
        $this->pagination = $this->get('Pagination'); 

        // Check for errors.
        if (count($errors = $this->get('Errors'))) 
        {
            JError::raiseError(500, implode('<br />', $errors));
            return false;
        }
        // Display the view
        parent::display($tpl);
    }
} 
```

默认.php：

```
// No direct access to this file
defined('_JEXEC') or die('Restricted access');
//$document = &JFactory::getDocument(); $document->addStyleSheet('components'.DS.'com_gallery'.DS.'css'.DS.'gallery.css');
$document = &JFactory::getDocument(); $document->addStyleSheet('components/com_gallery/css/gallery.css');
?>
<p>
In onderstaande overzicht wordt overzicht van galleries getoond, ben op je zoek naar iets specifieks ?. Gebruik dan het zoekscherm aan de linkerkant van deze pagina om een aangepast overzicht te tonen.
</p>
<?php
$count = '1';

foreach($this->gallery as $gallery){
if($count == '0'){
    echo 'Geen resultaat';
}else{
?>
<div class="gallery_wrapper">
<?php
if($gallery->merk OR $gallery->type > Null){
echo "<div class=\"gallery_merktype\">";
echo "<a href='gallerie?view=gallerydetail&amp;gallery=" . $gallery->id . "' target='_self'>";
echo "<H1>";
echo $gallery->merk;
echo " ";
echo $gallery->type;
echo "</H1>";
echo "</a>";
echo "</div>";
}
//Weergeven afbeelding, bepaling maximale hoogte en breedte gebeurt in CSS.
if($gallery->link > Null){
echo "<div class=\"gallery_foto\">";
echo "<div class=\"gallery_foto_clip\">";
echo "<a href='gallerie?view=gallerydetail&amp;gallery=" . $gallery->id . "' target='_self'><img src='../galleryimage/thumb/" . $gallery->link . "' width='200px' alt='Afbeelding'/></a>";
echo "</div></div>";
}               
?>
<div class="gallery_wrapper_info">
<?php
//Weergeven gallery gegevens.
if($gallery->bouwjaar > Null){
echo "<div class=\"gallery_info_title\">Bouwjaar:</div>";
echo "<div class=\"gallery_info_values\">";
echo $gallery->bouwjaar;
echo "</div>";
}
if($gallery->vermogen > Null){
echo "<div class=\"gallery_info_title\">Vermogen:</div>";
echo "<div class=\"gallery_info_values\">";
echo $gallery->vermogen;
echo "</div>";
}
if($gallery->kleur > Null){
echo "<div class=\"gallery_info_title\">Kleur:</div>";
echo "<div class=\"gallery_info_values\">";
echo $gallery->kleur;
echo "</div>";
}
if($gallery->transmissie > Null){
echo "<div class=\"gallery_info_title\">Transmissie:</div>";
echo "<div class=\"gallery_info_values\">";
echo $gallery->transmissie;
echo "</div>";
}
if($gallery->brandstof > Null){
echo "<div class=\"gallery_info_title\">Brandstof:</div>";
echo "<div class=\"gallery_info_values\">";
echo $gallery->brandstof;
echo "</div>";
}               
if($gallery->cilinders > Null){
echo "<div class=\"gallery_info_title\">Cilinders:</div>";
echo "<div class=\"gallery_info_values\">";
echo $gallery->cilinders;
echo "</div>";
}
if($gallery->motorinhoud > Null){
echo "<div class=\"gallery_info_title\">Motorinhoud:</div>";
echo "<div class=\"gallery_info_values\">";
echo $gallery->motorinhoud;
echo "</div>";
}
if($gallery->gewicht > Null){
echo "<div class=\"gallery_info_title\">Gewicht:</div>";
echo "<div class=\"gallery_info_values\">";
echo $gallery->gewicht;
echo "</div>";
}
?>
<div class="gallery_bekijken">
<H2><a href="index.php/gallerie?view=gallerydetail&amp;gallery=<?php echo $gallery->id; ?>" target="_self">Bekijk Gallery</a></H2>
</div>
</div>

</div>

<?php   
}
}
?>

<form method="post" name="limiet">
<?php echo $this->pagination->getPagesLinks(); ?>
<center>
<?php echo $this->pagination->getLimitbox(); ?>
</center>
</form> 
```

* * *

太好了！，我已经尝试过以下方式，它对我有用：

```
if(is_object($this->gallery)){
echo "No result";
}else{

//DATA

} 
```

作为记录：

填充数组的 print_r：

```
Array ( [0] => stdClass Object ( [id] => 146 [user_id] => 861 [merk] => Seat [type] => Leon [name] => Danny [bouwjaar] => 2004 [vermogen] => 190 [kleur] => Geel [transmissie] => Handgeschakeld [brandstof] => Diesel [cilinders] => 4 [motorinhoud] => 1900 [gewicht] => 1210 [link] => p1793sjnq51u373r12qdobs1d2b2.jpg ) ) 
```

还有一个空的：

```
stdClass Object ( [id] => 0 ) 
```

虽然我之前错过了一些东西，但在模型中我将限制变量调整为“0”而不是默认的“5”进行测试。

如果我把它放回“5”，当查询没有返回任何结果时，我会得到一个 array_splice 错误。当有数据时，它可以完美运行。

也许我在这里也做错了什么？

我的模型中的一段代码：

```
$this->_gallery = array();
            // Load the data
        if (empty( $this->_gallery )) {
            $query = ' SELECT #__gallery.id, user_id, merk, type, name, bouwjaar, vermogen, #__gallery_kleur.kleur, transmissie, #__gallery_benzine.soort AS brandstof, cilinders, motorinhoud, gewicht, link FROM #__gallery LEFT JOIN #__gallery_merk ON #__gallery.merk_id = #__gallery_merk.merk_id LEFT JOIN #__gallery_type ON #__gallery.type_id = #__gallery_type.type_id LEFT JOIN #__gallery_autoinfo ON #__gallery.id = #__gallery_autoinfo.galleryid LEFT JOIN #__gallery_kleur ON #__gallery_autoinfo.kleur = #__gallery_kleur.kleurid LEFT JOIN #__gallery_benzine ON #__gallery_autoinfo.brandstof = #__gallery_benzine.benzineid LEFT JOIN #__users ON #__gallery.user_id = #__users.id LEFT JOIN (SELECT * FROM #__gallery_foto ORDER BY #__gallery_foto.hoofdfoto ASC) as #__gallery_foto ON #__gallery.id = #__gallery_foto.galleryid GROUP BY #__gallery.id ';
            $this->_db->setQuery( $query );
            $this->_gallery = $this->_db->loadObjectList();
        }
        if (!$this->_gallery) {
            $this->_gallery = new stdClass();
            $this->_gallery->id = 0;
        }
    $this->_total = count($this->_gallery); 

    if ($this->getState('limit') > 0) {
     $this->_gallery    = array_splice($this->_gallery, $this->getState('limitstart'), $this->getState('limit') );
    }
     return $this->_gallery;
} 
```

当没有结果和限制设置为 5 时，我认为错误：

```
Warning: array_splice() expects parameter 1 to be array, object given in 
```

Print_R 没有返回结果，但我认为这很明显。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:02:38.827

检查对象是否有数据。您可以使用以下组合

```
isset- Determine if a variable is set and is not NULL

is_null - Finds whether a variable is NULL

empty — Determine whether a variable is empty

is_array — Finds whether a variable is an array 

is_object — Finds whether a variable is an object 
```

您可以使用类似的东西（如果行数为 0，则将对象设置为 null）。

```
If(!is_null($this->gallery))
{
//show data
}
else
{
//show a msg
} 
```

你可以检查是否`$this->gallery`是一个对象。

```
If(is_object($this->gallery))
{
//show data
}
else
{
//show a msg
} 
```

根据结果​​集明智地选择上述内容。如果你可以发布一个`print_r`我可以告诉你你必须使用什么。

***关于问题的更新***

> 警告：array_splice() 期望参数 1 是数组，对象在

它可能不起作用的原因是因为`$this->_gallery`可能不是数组。

> stdClass Object ( [id] => 0 ) <-- 这是一个对象而不是数组。如果要调用 array_slice() 函数，第一个参数应该是一个数组。

要检查某物是否为数组，您可以执行以下操作：

```
is_array($this->_gallery); // returns true or false 
```

如果是数组，则可以调用`array_slice()`.

希望这可以帮助。如果你有任何问题在这里问。

# lotus-notes - 在 Lotus Notes 视图中组合列

> ID：13180625
> 
> 赞同：0
> 
> 时间：2012-11-01T15:47:27.120
> 
> 标签：lotus-notes, lotus-formula

Lotus Notes 视图中是否有等效的 GROUP BY 语句？

目前我的桌子是这样布置的：

```
| JOB # | SHIP DATE 1 | MODULE 1 | SHIP DATE 2 | MODULE 2 |
| 111   | APRIL 2013  |  123-XYZ |  APRIL 2013 | 654-ABC  | 
```

对此（/代表twistie）：

```
\/|SHIP DATES|
    |MODULE 1|
    |MODULE 2| 
```

最终输出类似于：

```
\/|April 2013|
    123-XYZ (this record would be from MODULE 1)
    654-ABC (this record would be from MODULE 2)
\/|June 2013|
    876-DEF (this record is from MODULE 1, since there is no ship date for MODULE 2 in this month/year only one job appears) 
```

有什么办法可以将发货日期列合并在一起吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T16:20:09.633

视图的分类最接近于 Notes 视图中的“分组依据”。因此，您使用分类视图走在正确的轨道上（即类别是扭曲级别的行）

您应该能够使用视图中的“将多个值显示为单独的条目”设置来实现此目的。将模块列的公式设置为

```
Module1:Module2 
```

这意味着该列的值是一个包含两个条目的多值列表，即 module1 的值和 module2 的值。

对于您的分类列公式，您应该能够使用

```
@Unique(ShipDate1:ShipDate2); 
```

获取显示发货日期的列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:16:02.257

在 Ship Dates 列中，您可以通过将这两个字段与冒号组合来“合并”这两个字段。因此，如果这两个字段分别称为 ShipDate1 和 ShipDate2，则列公式为：

```
ShipDate1:ShipDate2 
```

您还必须在列上标记此属性：

![在此处输入图像描述](../Images/9541a5198e390b01fb41b6d72f6c5099.png)

# php - 使用自动页面刷新更改表单

> ID：13180638
> 
> 赞同：0
> 
> 时间：2012-11-01T15:48:13.680
> 
> 标签：php, javascript, forms

这是一种多种形式的操作，出于某种原因，我无法弄清楚。

```
<? 
  if( $parameters['system'] == 1)
  { 
     $parameters['type'] = 1;    
  }
  elseif( $parameters['system'] == 6) 
  {
     $parameters['type'] = 2; 
  } 
?> 
```

他们输入条件子句并在屏幕上更改类型参数，但是，页面需要一个`"refresh"`才能实际应用更改。

**我尝试创建一些javascript函数来执行此操作并在更改后调用它无济于事。关于如何处理这个的任何想法？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:50:56.993

添加此内容以重新加载您的页面，并为系统 +1。

```
<script>
   window.location = "thePage.php?system=<?=intval($parameters['system'])+1?>";
</script> 
```

# javascript - 如何使用来自 1 个目录的图像填充无限滚动？

> ID：13180642
> 
> 赞同：0
> 
> 时间：2012-11-01T15:48:34.090
> 
> 标签：javascript, jquery

我有一个`<div id="content" class="clearfix"></div>` which self 填充了来自我服务器上单独目录的图像 url 列表。

这是该站点的实时 URL：http: [//ilovesmallies.com/forum/showcase.php](http://ilovesmallies.com/forum/showcase.php)

我想在这个 div 中使用无限滚动和砌体插件。

但是，我不确定如何使用此脚本指向图像网址列表...

这是它现在的编码方式并且不起作用。

```
<script>
  $(function(){

    var $container = $('#content');

    $container.imagesLoaded(function(){
      $container.masonry({
        itemSelector: '.box',
        columnWidth: 250
      });
    });

    $container.infinitescroll({
      navSelector  : '#content',    // selector for the paged navigation 
      nextSelector : '#content a',  // selector for the NEXT link (to page 2)
      itemSelector : '.box',     // selector for all items you'll retrieve
      loading: {
          finishedMsg: 'No more pages to load.',
          img: 'http://i.imgur.com/6RMhx.gif'
        }
      },
      // trigger Masonry as a callback
      function( newElements ) {
        // hide new items while they are loading
        var $newElems = $( newElements ).css({ opacity: 0 });
        // ensure that images load before adding to masonry layout
        $newElems.imagesLoaded(function(){
          // show elems now they're ready
          $newElems.animate({ opacity: 1 });
          $container.masonry( 'appended', $newElems, true ); 
        });
      }
    );

  });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:57:32.927

你能渲染所有的图像吗？

我最喜欢的方法是首先对图像项进行分页，然后应用：

itemSelector <---> 每个项目的类。（在你的情况下，它可以是每个图像）

navSelector <---> 分页元素的id

nextSelector <---> 指向分页中的元素（链接到下一页）

我只是让分页不显示。

# java - Java堆内存

> ID：13180648
> 
> 赞同：0
> 
> 时间：2012-11-01T15:48:54.250
> 
> 标签：java, memory, heap-memory

我有一个关于 Java 堆空间的问题。

我有一个程序，它使用地理工具从街道网络创建图表。我用它做了一些事情，但我遇到了 OutOfMemoryError 但我不确定为什么。我使用以下代码来获取可用内存量。

```
Runtime rt = Runtime.getRuntime();
long maxMb = rt.freeMemory()/(1024*1024);
System.out.println("Your JVM has " + maxMb + " MB of memory left"); 
```

当我运行我的程序时，似乎有足够的内存（见输出）。此控制台输出在 OutOfMemory 错误发生之前完成。那么出了什么问题呢？当我扩大 Java 堆空间时，仍然发生 OutOfMemory 错误（但还剩 1461 MB）。我不知道为什么会这样？有任何想法吗？

```
Your JVM has 981 MB of memory left
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
at java.util.Arrays.copyOf(Unknown Source)
at java.util.Arrays.copyOf(Unknown Source)
at java.util.ArrayList.grow(Unknown Source)
at java.util.ArrayList.ensureCapacityInternal(Unknown Source)
at java.util.ArrayList.add(Unknown Source)
at masterthesis.datastructures.Stroke.addStrokeSegment(Stroke.java:78)
at masterthesis.algorithms.StrokeBuilder.buildStroke(StrokeBuilder.java:145)
at org.geotools.test.Main.main(Main.java:109) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:00:19.617

以下是调试 OOM 的一种方法。

1.  将您的最大堆大小调整为合理的大小，例如 256 MB。将其保持在合理的低水平将有助于您完成第 3 步。
2.  将 -XX:+HeapDumpOnOutOfMemoryError 添加到命令行。这将在遇到 OOM 后转储内存。
3.  [在Eclipse Memory Analyzer](http://www.eclipse.org/mat/)中打开转储并尝试分析最大的对象。它可以生成看起来像这样的报告。

![在此处输入图像描述](../Images/7095efcc1097af5c5d23b876f8434437.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:52:18.260

你应该使用[jmap](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jmap.html)来了解你的内存是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T15:52:41.923

尝试阅读[Java：OutOfMemoryError Exception 和 freeMemory()](https://stackoverflow.com/questions/8183343/java-outofmemoryerror-exception-and-freememory)

> Runtime.freeMemory() javadoc 说这是返回“当前可用于未来分配对象的内存总量的近似值”
> 
> 所有动态结构的工作方式是它们以块的形式分配内存。当 HashMap 变满时，它不会再为一个对象分配额外的空间。它分配了一些大小的块。我不知道它在 JVM 中的确切工作方式，但它可能会尝试分配两倍于当前使用的内存量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T15:56:25.737

由于输出表明您还有大量内存，并且在数组列表增长期间发生错误，我猜测您有一个非常巨大的数组列表，您可以将对象放入其中。当 JVM 尝试增加列表时，您没有足够的内存堆空间以容纳列表大小的两倍。

我会调查您实际在列表中放入了多少对象`addStrokeSegment()`。

# php - 输出后在 php 中发送的标头仍然有效

> ID：13180649
> 
> 赞同：0
> 
> 时间：2012-11-01T15:49:08.320
> 
> 标签：php, http-headers

我有这个简单的脚本：

```
this is output!

<?php

header("Location: http://www.google.com");

?> 
```

你信不信它有效，我也没有收到任何警告！

手册说在发送标头之前不应进行任何输出，否则将不会实际发送标头。但无论如何它确实有效，这让我很烦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:50:34.923

这是可能的，因为[输出缓冲区](http://www.php.net/manual/en/intro.outcontrol.php)。

# objective-c - 如何解释作为 NSAppleScript 结果返回的记录

> ID：13180653
> 
> 赞同：1
> 
> 时间：2012-11-01T15:49:16.683
> 
> 标签：objective-c, applescript, appleevents, applescript-objc

我使用 NSAppleScript 的 executeAndReturnError 方法从一个 Objective-C 应用程序运行一个 AppleScript。这将返回一个包含脚本结果的 NSAppleEventDescriptor 对象。我的脚本返回一个 applescript 记录。如何解释objective-c中的记录？例如，如果返回的脚本记录是 { name:"Jakob", phone:"12345678" } 如何在 name 属性中获取字符串“Jakob”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:07:36.730

这是将记录转换为字典的方法。请注意，我没有尝试过，但它应该可以工作。

此外，您的“名称”键不是在 applescript 中使用的好键，因为“名称”对 applescript 有其他含义。我经常在记录中使用它时遇到问题。我建议将其更改为“theName”之类的名称或在条形|name| 中使用它。

```
-(NSDictionary*)recordToDictionary:(NSAppleEventDescriptor*)theDescriptor {
    NSUInteger j,count;
    id thisDescriptor = [theDescriptor descriptorAtIndex:1];
    count = [thisDescriptor numberOfItems];
    NSMutableDictionary* thisDictionary = [NSMutableDictionary dictionaryWithCapacity:count/2];
    for (j=0; j<count; j=j+2) {
        NSString* theKey = [[thisDescriptor descriptorAtIndex:(j+1)] stringValue];
        NSString* theVal = [[thisDescriptor descriptorAtIndex:(j+2)] stringValue];
        [thisDictionary addEntriesFromDictionary:[NSDictionary dictionaryWithObject:theVal forKey:theKey]];
    }
    return (NSDictionary*)[[thisDictionary retain] autorelease];
} 
```

当然，在记录为字典格式后，您可以使用字典上的“valueForKey：”实例方法来获取“Jacob”。

# c# - 如何使用 Interop.Word 在 C# 中进行邮件合并？

> ID：13180654
> 
> 赞同：1
> 
> 时间：2012-11-01T15:49:19.980
> 
> 标签：c#, printing, interop, ms-word, placeholder

我在 Word 中有一个用于打印发票的模板。

现在，我想知道如何以编程方式创建 Word 文档并将模板内容复制到新文档中，这样我仍然有一个干净的模板，然后替换我使用 Mail.Merge 键入的占位符。我发现了类似的 Mail.Merge 问题，但大多数都需要 Spire 组件，我不感兴趣，因为它需要付费。我只是一个学生。其他人，实际上并没有那么大的帮助。

我现在面临的问题如下：

1.  创建 Word 文档
2.  将模板内容复制到新文档中
3.  如何添加占位符名称，`MailMerge`因为我对此感到非常困惑。
4.  做`MailMerge`

这是我目前编写的代码，这实际上是我第一次使用 Interops

```
Document document = new Document();
Microsoft.Office.Interop.Word.Application wordApp = new Microsoft.Office.Interop.Word.Application();
document = wordApp.Documents.Open(fileName);
string[] fieldNames = {"date_issued", "month_covered", "tuition", "lunchfee", "discount", "in_no", "student_no", "student_name", "amount_due", "amount_paid", "balance", "penalty", "status"};
string[] data = new string[25];
Range range;
document.MailMerge.Fields.Add(range, fieldNames[0]);
document.MailMerge.Execute(); 
```

我对这部分真的很困惑

```
document.MailMerge.Fields.Add(range, fieldNames[0]); 
```

我不知道`range`是为了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:04:04.023

如果您的模板是实际模板而不是普通的 Word 文档（扩展名为 .dotx 或 .dot，而不是 .docx/.doc），则无需复制任何内容。只需根据模板创建一个新文档：

```
var doc = wordApp.Documents.Add("put template path here"); 
```

这将包含您的模板的内容。如果您使用 Word UI 在模板中设置了邮件合并（包括合并数据的位置），这也将被转移到新文档中。

然后您可以从 C# 执行邮件合并：

```
doc.MailMerge.Execute(); 
```

# accessibility - 如何在页脚中使用/不使用页眉标签，以使代码 WCAG 2.0 AA 有效？

> ID：13180655
> 
> 赞同：1
> 
> 时间：2012-11-01T15:49:21.460
> 
> 标签：accessibility, wcag

以下是 WCAG 2.0 AA 无效的代码示例。无效部分是在页脚中使用 H3 标签，而 H1 和 H3 标签之间没有 H2：*[WCAG v2 1.3.1 (A)] 正确嵌套标题 (H1 > H2 > H3)：*

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>test</title>
</head>
<body>
    <h1>test</h1>
    <p>lorem</p>
    <footer>
        <h3>test f</h3>
        <ul>
            <li>1</li>
            <li>2</li>
        </ul>
    </footer>
</body>
</html> 
```

考虑到页脚之前的内容是由不了解 WCAG 指南的编辑编辑的，那么编写 WCAG 网站的最佳方法是什么？

到目前为止，我看到了 2 个解决方案：

1.  不要在页脚中使用 h3 或任何其他页眉标签
2.  通过在页脚中的 h3 之前添加 h1 和 h2 来重置页眉嵌套，并将它们从 CSS 中隐藏。

我认为这些都不是好的解决方案。原因如下： 1\. 页脚有时可由用户编辑（CMS 使用），您必须始终考虑页脚内容之前存在的内容 2\. 我不认为用 css 隐藏内容是一个好的解决方案

这个问题有什么解决办法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T12:03:40.977

您想要分割[元素](http://www.w3.org/TR/html5/content-models.html#sectioning-content-0)：`section`、、`article`和。`nav``aside`

每个切片元素都应该有一个标题。而且您可以随时使用`h1`！

因此，您的示例可能如下所示：

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>test</title>
</head>
<body>
    <h1>test</h1>
    <p>lorem</p>
    <footer>
      <section>
        <h1>test f</h1>
        <ul>
            <li>1</li>
            <li>2</li>
        </ul>
      </section>
    </footer>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-20T11:42:47.667

我不建议使用太多的 h1。它不反对 wcag，但不同的标题级别有助于屏幕阅读器的用户（例如我）理解层次结构。跳过标题级别也不是最好的，但它仍然比拥有太多 h1 更好。我建议始终在页脚中使用 h3，如果有时您从 h1 跳到 h3，那没关系。用户会理解它，因为那部分是重复的。它不反对 wcag，对于实际用户来说更容易理解。

# expressionengine - 表达式引擎：安装模块时创建多个发布表单选项卡

> ID：13180661
> 
> 赞同：3
> 
> 时间：2012-11-01T15:49:46.820
> 
> 标签：expressionengine

是否可以创建一个将两个选项卡输出到发布屏幕的模块，或者我是否有两个创建另一个模块来创建我的第二个选项卡或只是另一个 tab.file.php 文件？

**代码**

**文件：** upd.my_module.php

```
class My_module_upd {
    var $version = '1.0';

    public function __construct(){
        $this->EE =& get_instance();
    }

    public function install(){
    $this->EE->load->dbforge();

    $data = array(
            'module_name' => 'My Module',
            'module_version' => $this->version,
            'has_cp_backend' => 'y',
            'has_publish_fields' => 'y'
    );

    $this->EE->db->insert('modules', $data);
    return true;
    }

    public function tabs(){
    $tabs['tab_1'] = array(
        'field_1'   => array(
                            'visible'       => TRUE,
                            'collapse'      => FALSE,
                            'htmlbuttons'   => TRUE,
                            'width'         => '100%'
                            ),

        'field_2'       => array(
                            'visible'       => TRUE,
                            'collapse'      => FALSE,
                            'htmlbuttons'   => TRUE,
                            'width'         => '100%'
                            )
            );

    $tabs['tab_2'] = array(
            'field_1'   => array(
                    'visible'       => TRUE,
                    'collapse'      => FALSE,
                    'htmlbuttons'   => TRUE,
                    'width'         => '100%'
                ),
            );

    return $tabs;   
    } 
```

}

**文件：** tab.my_module.php

```
class My_module_tab {
public function __construct(){
    $this->EE =& get_instance();
}

public function publish_tabs($channel_id, $entry_id = ''){
    $settings = array(
            'field_1' => array(
                    'field_id'              => 'field_1',
                    'field_label'           => 'Field 1',
                    'field_type'            => 'text',
                    'field_required'        => 'n',
                    'field_data'            => '',
                    'field_text_direction'  => 'ltr',
                    'field_maxl'            => 100,
                    'field_instructions'    => '',
            ),
            'field_2'   => array(
                    'field_id'              => 'field_2',
                    'field_label'           => 'Field 2',
                    'field_type'            => 'text',
                    'field_required'        => 'n',
                    'field_data'            => '',
                    'field_text_direction'  => 'ltr',
                    'field_maxl'            => 100,
                    'field_instructions'    => '',
            ),
    );

    return $settings;
    }
 } 
```

在 My_module_upd->tabs() 方法中，它看起来可以在数组中声明多个选项卡，但 My_module_tab 类似乎只适合控制一个选项卡。谁能指出我正确的方向？

# android - SyncAdapter 在同步期间是否支持上传和下载？

> ID：13180665
> 
> 赞同：5
> 
> 时间：2012-11-01T15:50:01.673
> 
> 标签：android, synchronization, android-syncadapter

我正在尝试编写一个 Android`SyncAdapter`并且有点困惑。在同步期间（即 in `onPerformSync()`），我希望能够从远程服务器下拉数据，但也可以将数据推送到远程服务器（这是 2 路同步吗？或者当服务器也同步时是 2 路同步启动同步？）。

无论如何，我猜我需要`android:supportsUploading="true"`在清单文件中进行设置。但是，据我了解，文档说这仅用于上传。是否可以在使用`SyncAdapter`? 的同步操作中同时进行上传和下载。

谢谢。

**编辑：**看起来样本`SyncAdapter`有两种同步方式（尽管我不是 100% 确定）——但仅限于 API 11+。我想支持早期的 API 级别 - 这不可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:29:59.760

我不知道您使用什么协议来发送或接收数据，但如果您使用 http，您可以轻松地通过使用 HTTP Get-Request 接收数据和使用 POST 或 PUT Request 发送数据来完成这两者。

# php - 多次安装和升级后无法识别codesniffer命令

> ID：13180667
> 
> 赞同：3
> 
> 时间：2012-11-01T15:50:02.287
> 
> 标签：php, apache, pear, codesniffer

我尝试使用 pear 安装代码嗅探器，但我的 mac 无法识别 phpcs 命令。

# 梨配置

```
Configuration (channel pear.php.net):
=====================================
Auto-discover new Channels     auto_discover    1
Default Channel                default_channel  pear.php.net
HTTP Proxy Server Address      http_proxy       <not set>
PEAR server [DEPRECATED]       master_server    pear.php.net
Default Channel Mirror         preferred_mirror pear.php.net
Remote Configuration File      remote_config    <not set>
PEAR executables directory     bin_dir          /usr/local/pear/bin
PEAR documentation directory   doc_dir          /usr/local/pear/docs
PHP extension directory        ext_dir          /opt/local/lib/php/extensions/no-debug-non-zts-20090626
PEAR directory                 php_dir          /usr/local/pear/share/pear
PEAR Installer cache directory cache_dir        /private/tmp/pear/cache
PEAR configuration file        cfg_dir          /usr/local/pear/cfg
directory
PEAR data directory            data_dir         /usr/local/pear/data
PEAR Installer download        download_dir     /tmp/pear/install
directory
PHP CLI/CGI binary             php_bin          /opt/local/bin/php
php.ini location               php_ini          /opt/local/etc/php5/php.ini-development
--program-prefix passed to     php_prefix       <not set>
PHP's ./configure
--program-suffix passed to     php_suffix       <not set>
PHP's ./configure
PEAR Installer temp directory  temp_dir         /tmp/pear/install
PEAR test directory            test_dir         /usr/local/pear/tests
PEAR www files directory       www_dir          /usr/local/pear/www
Cache TimeToLive               cache_ttl        3600
Preferred Package State        preferred_state  stable
Unix file mask                 umask            22
Debug Log Level                verbose          1
PEAR password (for             password         <not set>
maintainers)
Signature Handling Program     sig_bin          /usr/local/bin/gpg
Signature Key Directory        sig_keydir       /opt/local/etc/pearkeys
Signature Key Id               sig_keyid        <not set>
Package Signature Type         sig_type         gpg
PEAR username (for             username         <not set>
maintainers)
User Configuration File        Filename         /Users/anthonygordon/.pearrc
System Configuration File      Filename         /opt/local/etc/pear.conf 
```

我检查了 php_bin 并且 php 可执行文件在那里。

当我运行 phpcs 我得到`command not found`

我试过升级梨，卸载重装代码嗅探器，一切。当我运行安装列表时，我得到

# 梨清单

```
Package          Version State
Archive_Tar      1.3.10  stable
Console_Getopt   1.3.1   stable
PEAR             1.9.4   stable
PHP_CodeSniffer  1.4.0   stable
Structures_Graph 1.0.4   stable
XML_Util         1.2.1   stable 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T21:48:09.967

phpcs 脚本应该在里面`bin_dir`，所以`/usr/local/pear/bin/phpcs`首先要确保该文件存在。如果不是，则安装出现问题。

看看能不能直接运行：`php /usr/local/pear/bin/phpcs -?`

如果输出 PHPCS 帮助，则 PHPCS 安装正确，问题可能出在您的 $PATH 上。运行`echo $PATH`并确保`/usr/local/pear/bin`显示在那里。如果没有，您可以修改路径设置，或者您可以配置 PEAR 以将可执行脚本放在其他位置。

例如，您的 $PATH 可能已经包含`/usr/local/bin`（就像我的 Mac 一样），因此您可以将其更改`bin_dir`为：

```
pear uninstall php_codesniffer
pear config-set bin_dir /usr/local/bin
pear install php_codesniffer 
```

现在`phpcs`再次尝试该命令。

# bash - 令人困惑的语法错误：文件意外结束

> ID：13180669
> 
> 赞同：0
> 
> 时间：2012-11-01T15:50:07.197
> 
> 标签：bash

当我尝试运行它时，我的 bash 脚本中不断出现以下错误，我似乎找不到问题所在。我认为这与我如何关闭循环有关。任何帮助将非常感激

```
bash: random: line 66: syntax error: unexpected end of file 
```

下面是我的代码

```
#!/bin/bash
one=$RANDOM
two=$RANDOM

# Declare variable choice and assign value 4
choice=5
# Print to stdout
echo "1\. -l"
echo "2\. -m"
echo "3\. -c"
echo "4\. -i"
echo -n "Please choose a word [1,2,3,4]? "
while [ $choice -eq 5 ]; do

  #option -l
  if [ $choice -eq 1 ] ; then
   #do something

      else
      echo "Please make a choice between 1 -4 !"
      echo "1.-l"
      echo "2.-m"
      echo "3.-c"
      echo "4.-i"
      echo -n "Please choose a word [1,2,3 or 4]? "
      choice=5

      fi

echo"finished"
done 
```

编辑* 删除了导致缩进问题的笨重代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T15:51:41.680

你还没有`done`为你的 while 循环做一个：

```
while [ $choice -eq 5 ]; do
   ...lots of stuff ...
done <---you're missing this 
```

# eclipse - EGit - pull= 失败并且没有冲突

> ID：13180671
> 
> 赞同：7
> 
> 时间：2012-11-01T15:50:10.003
> 
> 标签：eclipse, git, svn, github, egit

当我做团队时->拉上我的项目

我的结果失败了，然后在合并输入下面我有两个修改，但它们都没有影响同一个文件，所以没有冲突。

为什么这个显示失败？这是一个错误吗？

![臭虫](../Images/e868104f280bcef4f289603600dab1fa.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T18:56:12.230

我刚刚做了一个团队->重置。

我选择“混合”（头部和索引），看起来它正在工作。

（但我不知道这是否是最好的方法）

# c++ - Microsoft 运行时库

> ID：13180672
> 
> 赞同：0
> 
> 时间：2012-11-01T15:50:15.547
> 
> 标签：c++, visual-studio-2010, mfc

我们正在为客户端编写一个 MFC 程序，并为它们提供可执行文件，但事实证明它们需要安装运行时。我没有时间学习如何创建安装程序，所以我打算尝试将代码生成/运行时库更改为 /MT 并影响程序的大小，但现在我收到此错误，

```
fatal error C1189: #error :  Please use the /MD switch for _AFXDLL builds 
```

我正在使用 Visual Studio 2010。我只想能够将代码（小型可执行文件）提供给客户端并运行。

顺便说一句，如果有人能指出我如何构建安装程序的好文章的方向，我将不胜感激。

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:08:24.537

/MT 适用于 C 运行时库。您还需要处理 MFC 库。配置属性 - 常规 - 在静态库中使用 MFC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:08:39.947

[这](http://msdn.microsoft.com/en-us/library/ms235299%28v=vs.100%29.aspx)是一篇关于重新分发客户端运行应用程序所需的 Visual C++ 文件的文章。可能最简单的选择是从[此处](http://www.microsoft.com/en-us/download/details.aspx?id=5555)获取 32 位版本的安装程序或从[此处](http://www.microsoft.com/en-us/download/details.aspx?id=14632)获取64 位版本的安装程序。或者，如果您要编写安装程序，您可以使用合并模块，它应该已包含在您的 Visual Studio 中。

# android - 部分安卓设备遇到java.lang.NoClassDefFoundError

> ID：13180675
> 
> 赞同：5
> 
> 时间：2012-11-01T15:50:24.923
> 
> 标签：android

这是我在这里的第一个问题，希望它不会被忽视。

申请已于 3 个月前发布。通常应用程序在多个 android 设备上进行了测试并且运行良好，但一些客户遇到了崩溃。

堆栈跟踪：

```
java.lang.NoClassDefFoundError: com.lostnfound.mobile_app.Past_mapactivityinstance
at com.lostnfound.mobile_app.Past_map_fragm.onCreateView(Past_map_fragm.java:52)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:845)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1058)
at android.support.v4.app.FragmentManagerImpl.addFragment(FragmentManager.java:1156)
at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:270)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
at android.app.Activity.setContentView(Activity.java:1862)
at com.lostnfound.mobile_app.Past_act.onCreate(Past_act.java:44)
at android.app.Activity.performCreate(Activity.java:4492)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
at android.app.ActivityThread.access$600(ActivityThread.java:123)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method) 
```

Past_map_fragm 代码：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    ...
    final TabSpec tabSpec = tabHost.newTabSpec("map").setIndicator("Map")
            .setContent(new Intent(getActivity(), Past_mapactivityinstance.class));
    ...
} 
```

我知道 NoClassDefFoundError 确实是一般错误。我无法弄清楚为什么该应用程序在大多数 android 设备上都能正常工作，但有些会遇到这个错误。

显现：

```
<uses-sdk android:minSdkVersion="7"
          android:targetSdkVersion="8" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:16:10.373

如果您可以发布更多代码，也许可以提供更多帮助。看起来您正在尝试使用 Past_mapactivityinstance 的某个地方，但我在您发布的 3 行代码中没有看到它。我敢打赌，如果您要在代码中搜索 Past_mapactivityinstance 并将其替换为 Live_mapactivityinstance，您的应用程序会出现一些不同的行为。

# dependencies - 这个指令块是否避免了错误的依赖？

> ID：13180683
> 
> 赞同：0
> 
> 时间：2012-11-01T15:50:58.027
> 
> 标签：dependencies, scheduling, computer-architecture, instruction-set

我的指令块

```
I0: ADD R1,R1,R1
I1: LOAD R1,R1,#0
I2: MUL R1,R1,R1 
```

我不在乎指令集的作用，但我的观点是，如果我在所有指令中只使用 1 个寄存器，我将避免`false dependencies`（反和输出）。

我认为它会避免，因为从 I0 到 I1.. I1 到 I2 .. 等存在流依赖（也称为真正的依赖），这将成为任何其他依赖的超级种子

# jakarta-ee - 在条件下在无状态 SessionBean 中注入特定的 EntityManager

> ID：13180684
> 
> 赞同：0
> 
> 时间：2012-11-01T15:50:59.830
> 
> 标签：jakarta-ee, web-applications, jboss, entitymanager, stateless-session-bean

我目前正在处理调用无状态会话 Bean 以与数据库交互的 Web 应用程序。我的问题是关于这样的应用程序如何调用相同的会话 bean，以便后者可以选择必须使用哪个实体管理器来访问数据库。

目前我管理这种情况，启动不同的 Jboss 实例，监听不同的端口，并且在每个实例中我部署了相同的会话 Bean 池，并且一个或多个 Web 应用程序必须处理相同的数据库。换句话说，每个 Jboss 实例都包含一定数量的 Web 应用程序、一个持久性单元`(persistence.xml in META-INF jar containing the @Entity's)`和会话 bean 池，它们都在一个耳朵内。主要弱点在哪里是不言而喻的：我需要处理更多不同的数据库，我必须维护尽可能多的 Jboss 实例，它主要是不可持续的，但不仅是因为资源原因。

**我的最后一个问题是：**部署不同的 Web 应用程序调用会话 bean 的最佳实践是什么，这些会话 bean 仅对注入其中的 EntityManager 有所不同？

**提前致谢**

stfn

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:25:33.817

使用 CDI`@Producer`方法执行此操作。我假设您知道如何区分`@PersistenceContext`您拥有的众多 s，因此您制作了一个生产者，如下所示：

```
// first inject all the entity managers that you have into your CDI producer
@PersistenceContext(name = "name0")
private EntitManager em0;

@PersistenceContext(name = "name1")
private EntitManager em1;

@PersistenceContext(name = "name2")
private EntitManager em2;

...

// then have your producer method with logic to chose the right EntityManager to be returned
@Produces @MyPersistenceContext
public EntityManager obtainTheRightEM(InjectionPoint caller) {
    if (hasCondition0(caller)) {
        return em0;
    } else if (hasCondition1(caller)) {
        return em1;
    } else if (hasCondition2(caller)) {
        return em2;
    } else {
        ...
    }
} 
```

然后在你`@EJB`的 s 中替换`@PersistenceContext`为`@Inject @MyPersistenceContext`。

此外，`@MyPersistenceContext`根据您的特定问题，可能需要也可能不需要创建限定符。如果您有特定的*配置值*需要传递给生产者以便于决定`EntityManager`从生产者返回哪个值，请考虑`@Nonbinding`在自定义限定符中使用一些字段。

您最终可能会因为只有一个`@EJB`部署而侥幸成功。

干杯! 希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:08:23.557

你想要达到的目标并不是很清楚......

是否使用不同的数据库来分离来自不同客户的数据（每个数据库具有相同的结构）？为此，Hibernate (http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch16.html) 中有一些多租户支持，但在 JPA 中尚未标准化。

您可以通过任何方式将不同的耳朵放在同一个 Jboss 实例上（您将需要使用不同的 Web 上下文名称）以减少资源消耗。（但是您将失去操作系统级别的进程控制，一个租户可以使用所有资源而无法确保另一个租户获得最少的资源。）

# java - 需要有关 EJB3 bean 类型与单元测试的建议

> ID：13180688
> 
> 赞同：1
> 
> 时间：2012-11-01T15:51:11.230
> 
> 标签：java, unit-testing, jakarta-ee, junit, ejb

首先，这是我的设置：

*   应用服务器：jBoss 4.2.3GA
*   使用的框架：Struts 2、EJB3
*   数据库管理系统：PostgreSQL 9.0.3

默认情况下，出于安全目的，我总是将我的 bean 设置为 @Local。当不需要时，我不想在同一个容器中打开其他应用程序的门。

现在，我专注于通过测试驱动我的开发（测试驱动开发）。因此，我为我的测试创建了一个单独的项目（一种测试项目），以避免在与应用程序相同的项目中编写测试代码和安装测试工具（EasyMock、jUnit、StrutsTest 等）。

所以......这意味着我将我的 bean 设置为 @Remote 以便能够从我的 jUnit 测试类中访问它们。

我的问题是：有没有办法使用某种条件编译/构建从@Local 切换到@Remote？每次都必须将我的 bean 设置回 Local 非常麻烦和无聊。每个开发人员都知道重构会带来问题，因此我试图找到一种适当的方法来管理我的 bean 的可见性。另一个想法来自属性或 XML 文件，所以我只需要根据我的需要打开或关闭一个东西。

对于每个要测试的 bean，我需要： - 将接口设置为 @Remote - 在会话 bean 中添加远程接口的 implements 项

任何的想法？

非常感谢你

查尔斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:58:17.083

如果我理解得很好，您可以从单元测试连接到应用程序服务器以访问远程 EJB，对吗？

几年以来我一直没有使用 EJB，但是有两种方法可以在没有远程通信的情况下对 EJB 进行单元测试：

1.  使用嵌入式容器，请参阅将[EJB 3.1 容器嵌入到您的单元测试中](http://www.adam-bien.com/roller/abien/entry/embedding_ejb_3_1_container)
2.  您将 EJB 用作普通的 java 类并自己模拟依赖项，请参阅[Java EE 的单元测试](http://www.oracle.com/technetwork/articles/java/unittesting-455385.html)。您可以配置模拟以返回特定事件的特定值。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:28:22.493

另一种选择而不是使用嵌入式容器
（JBoss 嵌入式容器的形状非常糟糕，我害怕:(）
是使用像[Arquilian](http://arquillian.org/guides/getting_started/)这样的工具，它有一个部署 API，
并且可以创建一个通过测试代码生成的“迷你企业应用程序” , 以包含您的 EJB 并将它们部署在应用程序服务器上。

# vim - 在突出显示中支持 256 色 cterm 颜色的最佳实践

> ID：13180689
> 
> 赞同：2
> 
> 时间：2012-11-01T15:51:12.477
> 
> 标签：vim

我从 gui MacVim 的土地上第一次涉足 iTerm2/vim/vimux 领域。我遇到的第一个问题是我使用的几个插件在 cterm 领域支持非常差的 8color 高光。所以，我想尽可能地改进它们......

我查看了一些[wikia 建议](http://vim.wikia.com/wiki/256_colors_in_vim)，并找到了支持 256 种颜色的配色方案，[看看他们是如何做到](https://github.com/ciaranm/inkpot/blob/master/colors/inkpot.vim)的。看起来有些直截了当，但是...

以前有人这样做过吗？如果已经有一个支持库来简化工作，我讨厌在三个插件中解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T16:18:41.227

不要碰你的插件。您只需要将 iTerm2 设置中的终端类型更改为`xterm-256colors`.

我现在手头没有 Mac，但我知道它很容易找到。

如果您的配色方案是仅 GUI 的，您可以使用 CSApprox 或一些类似的插件将其转换为 256 色配色方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:55:49.090

插件应该通过`:hi def MyGroup ...`. 有了它，您可以覆盖您的默认`~/.vimrc`值

```
:hi MyGroup ctermfg=... ctermbg=... 
```

如果插件遗漏了该`def`部分，您仍然可以在插件获取*后*覆盖突出显示（例如在`~/.vim/after/plugin/`脚本中）。

但我同意 romainl 的观点，首先，确保在您的终端中获得 256 种颜色，并使用 CSApprox 使您的颜色方案适应高彩终端，如果您最喜欢的颜色方案不支持开箱即用。

# cordova - 如何加快phonegap jquery移动页面更改

> ID：13180692
> 
> 赞同：6
> 
> 时间：2012-11-01T15:51:23.563
> 
> 标签：cordova, jquery-mobile

我目前正在与一位开发人员合作，该开发人员正在使用 Phone Gap 开发一个相对简单的数据捕获 iPad 应用程序的早期阶段。从 UI 功能上看，该应用程序本质上是：-

*   5 数据采集“页面”
*   顶部的导航栏有 5 个选择器指向每个页面
*   当您加载应用程序时，您位于第 1 页，向左滑动会引入正常的幻灯片动画并将您移动到第 2 页等
*   当您单击其中一个选择器时，它会引入幻灯片动画并将您移动到该页面
*   这些页面有简单的数据输入字段、图像和滑块等 - 出于本次测试的目的，我们甚至删除了所有这些，只在每个页面上放置一个占位符字段。

我们目前正在努力克服的关键问题是，每当您移动到另一个页面（通过在导航器上滑动或选择）时，在过渡开始和新页面出现之前会有 1-2 秒的延迟。即使我们从页面中删除图像，也会存在 1-2 秒的延迟。我们希望将此延迟降低到 <0.5 秒和/或让它“感觉”更像是一个原生应用程序，就在页面中移动而言。

从技术层面来看，这就是应用程序的组成部分：-

*   JQM 1.2.0
*   各种 jQuery 版本高达 1.8.2
*   Web 2.0（HTML5、CSS3、jScript）
*   网络套件
*   当前使用多页的单个文件（但是尝试了多页并没有区别）
*   硬件加速、WebKit 调整、同步转换
*   众多 JQM 和 jQuery 插件

我们是 PhoneGap 和 iOS 应用程序开发的新手。我们正在继续研究尝试克服这种速度延迟的方法，并想知道：-

1.  有没有人开发过这样的应用程序并设法使页面切换/滑动顺畅且接近原生？（而且绝对延迟小于 1 秒）
2.  为了显着提高页面切换速度，是否有任何可靠的提示/途径可供探索？
3.  有没有人强烈认为我们所看到的可能是使用 PhoneGap 开发时所能获得的最好的东西，如果是这样，是否有替代方案也主要使用 Web 技术，不需要 Xcode 知识，并且比这更具视觉性能?

我将感谢任何人对此提供的任何提示和见解，因为如果无法解决这种延迟和迟缓问题，我们可能需要放弃 Phone Gap 并寻找一个本机解决方案，这在我们的解决方案中并不是一个简单的选择情况。非常感谢您对我第一次发布堆栈溢出的支持！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T16:04:40.273

jQuery Mobile 默认为点击事件添加了 300 毫秒的延迟——它正在监听诸如双击和滑动之类的事情。如果您不使用任何这些类型的事件，请考虑合并 FastClick（可[在此线程上](http://forum.jquery.com/topic/how-to-remove-the-300ms-delay-when-clicking-on-a-link-in-jquery-mobile)获得），它解决了我在 PhoneGap/jQueryMobile 应用程序中的速度问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T16:31:08.487

我个人的意见在这里。在尝试让 jQuery mobile 感觉原生时，我没有太多运气。我使用一个名为[App-UI](http://triceam.github.com/app-UI/)的框架来处理页面转换，并作为我的应用程序的基本框架（这个框架是超轻量级的）。然后我用纯 CSS 设计 UI。（这会使应用程序感觉更加原生 - 尝试使用 CSS3 处理过渡）。

[https://github.com/triceam/app-UI](https://github.com/triceam/app-UI)

这需要其他依赖项，包括：

*   jQuery - [http://jquery.com/](http://jquery.com/)
*   jQuery 动画增强 - [https://github.com/benbarnett/jQuery-Animate-Enhanced](https://github.com/benbarnett/jQuery-Animate-Enhanced)
*   iScroll 4 - [http://cubiq.org/iscroll-4](http://cubiq.org/iscroll-4)
*   NoClickDelay - [http://cubiq.org/remove-onclick-delay-on-webkit-for-iphone](http://cubiq.org/remove-onclick-delay-on-webkit-for-iphone)

再说一次，这是我自己的看法。在开发感觉原生的移动应用程序时，这对我来说最有效。

# java - 将对象添加到数组列表时出现空指针异常

> ID：13180694
> 
> 赞同：-1
> 
> 时间：2012-11-01T15:51:28.457
> 
> 标签：java, nullpointerexception

我在以下代码中遇到空指针异常，我试图将“newColumn”引用的对象添加到 Java 中“this.neighborColumns”引用的 ArrayList。我在这里先向您的帮助表示感谢。

```
 for (int column = xInitial; column < xFinal; ++column)
    {
        for (int row = yInitial; row < yFinal; ++row)
        {
            // TODO: To make inhibition a circle around input column, change
            // to remove conners of this rectangle inhibition
            Column newColumn = this.region.getColumn(column, row);
            if (newColumn != null)
            {
                this.neighborColumns.add(newColumn);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:52:52.000

您可能尚未初始化您的 arraylist `neighborColumns`。

您必须在调用 add 之前对其进行初始化

```
List<Type> neighborColumns = new ArrayList<>(); 
```

最好在向其中添加内容之前检查 arrayList 是否为空

```
 if (newColumn != null && neighborColumns !=NULL)
            {
                this.neighborColumns.add(newColumn);
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:53:03.113

您的代码未显示您如何定义`this.neighborColumns`列表，但根据您的问题标题，我猜测`this.neighborColumns`指向 null；

在对其执行任何操作之前，将neighborColums 分配给列表实现对象。例子：

```
neighborColumns = new ArrayList<type>(); 
```

# c# - 如何全球化 RegularExpressionValidator 错误信息？

> ID：13180696
> 
> 赞同：0
> 
> 时间：2012-11-01T15:51:30.370
> 
> 标签：c#, asp.net, gridview, textbox, validation

有什么方法可以让我们全球化RegularExpressionValidator errorMessage？而不是调用错误消息，我们可以从资源文件中调用它？这是我所拥有的：

```
<FooterTemplate>
                                    <asp:TextBox ID="addCREDIT_TYPE" style="WIDTH: 55px" Runat="Server" MaxLength="1"></asp:TextBox>
                                    <asp:RegularExpressionValidator ID="valCreditType" ControlToValidate="addCREDIT_TYPE" ValidationExpression="B|P|C|b|p|c"
                                    ErrorMessage="Invalid Type. Enter B or C or P" Runat="server" Display="Dynamic"></asp:RegularExpressionValidator>
                                    </FooterTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:58:03.220

是的，只需使用资源中的动态值而不是静态文本来呈现错误消息。ASP.NET 2.0 中的文章[资源和本地化](http://msdn.microsoft.com/en-us/magazine/cc163566.aspx)涵盖了一些可能性：

```
... ErrorMessage="Text="<%$ Resources:Litware, ErrorMessage %>" ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:48:02.850

这对我有用。以防万一有人卡在同一位置，这就是答案。这很简单。

ErrorMessage="<%# Resources.MyProject.CustomErrorMessage %>"

# jquery - jQuery inArray()

> ID：13180697
> 
> 赞同：0
> 
> 时间：2012-11-01T15:51:32.960
> 
> 标签：jquery

> **可能重复：**
> [如何检查 jQuery 对象是否存在于数组中？](https://stackoverflow.com/questions/8769022/how-to-check-if-jquery-object-exist-in-array)

有什么方法可以确定 dom 元素是否在 dom 元素数组中？

IE

```
$(".container img").each(function(){
   views.push($(this).clone());
}); 
```

创建一个克隆图像元素的数组。我现在想检查该数组中是否有新的图像元素？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:55:51.620

```
$(".container img").each(function(){
    if(jQuery.inArray($(this), views) === -1)
    {
        views.push($(this).clone());
    }
}); 
```

或检查[如何检查 jQuery 对象是否存在于数组中？](https://stackoverflow.com/questions/8769022/how-to-check-if-jquery-object-exist-in-array)其他解决方案。

供您使用，请查看[http://jsfiddle.net/hxAg4/34](http://jsfiddle.net/hxAg4/34)

# android - JNI编码和使用JNI连接java的c/c编码的区别

> ID：13180699
> 
> 赞同：3
> 
> 时间：2012-11-01T15:51:37.210
> 
> 标签：android, c++, java-native-interface

我正在做一个在 android 上使用 opencv 的项目。我正在使用 C++ 进行编码，但想在 Android 智能手机上实现该程序。我不想仅仅因为android在java中就将c++代码转换为java，所以我要使用JNI。在我的研究中，我遇到了真正使用 JNI 编码风格的代码，但我无法理解如何将我的 c++ 代码转换为 JNI 代码。我发现在 android opencv 示例教程 4 中，它只使用了与教程 3 不同的 c++ 代码。那么这两者之间的真正区别是什么？我想知道 JNI 编码风格是否会给我带来更快的性能。到目前为止，我只能使用 c++ 并将其与 java 集成，但应用程序崩溃了。

来自android opencv教程3：

```
JNIEXPORT void JNICALL
Java_org_opencv_samples_tutorial3_Sample3View_FindFeatures(JNIEnv* env, jobject,
jint width, jint height, jbyteArray yuv, jintArray bgra)
{
    jbyte* _yuv  = env->GetByteArrayElements(yuv, 0);
    jint*  _bgra = env->GetIntArrayElements(bgra, 0);

    Mat myuv(height + height/2, width, CV_8UC1, (unsigned char *)_yuv);
    Mat mbgra(height, width, CV_8UC4, (unsigned char *)_bgra);
    Mat mgray(height, width, CV_8UC1, (unsigned char *)_yuv);

    cvtColor(myuv, mbgra, CV_YUV420sp2BGR, 4);

    vector<KeyPoint> v;

    FastFeatureDetector detector(50);
    detector.detect(mgray, v);
    for( size_t i = 0; i < v.size(); i++ )
        circle(mbgra, Point(v[i].pt.x, v[i].pt.y), 10, Scalar(0,0,255,255));

    env->ReleaseIntArrayElements(bgra, _bgra, 0);
    env->ReleaseByteArrayElements(yuv, _yuv, 0);
} 
```

来自android opencv教程4：

```
JNIEXPORT void JNICALL
Java_org_opencv_samples_tutorial4_Sample4View_FindFeatures(JNIEnv*, jobject, jlong
addrGray, jlong addrRgba)
{
    Mat* pMatGr=(Mat*)addrGray;
    Mat* pMatRgb=(Mat*)addrRgba;
    vector<KeyPoint> v;

    FastFeatureDetector detector(50);
    detector.detect(*pMatGr, v);
    for( size_t i = 0; i < v.size(); i++ )
        circle(*pMatRgb, Point(v[i].pt.x, v[i].pt.y), 10, Scalar(255,0,0,255));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:18:52.407

JNI 是 Java 代码和本机代码（C、C++）之间的层。它依赖于本地关键字和静态方法。在您的应用程序中，您将仅使用 Java 方法和类。您需要将 C/C++ 源代码编译为动态库，即 .so 文件。

JNI 使人们能够编写本地方法来处理无法完全用 Java 编程语言编写应用程序的情况，例如，当标准 Java 类库不支持特定于平台的功能或程序库时

您不应该总是使用 C 和 C++ 编写代码。它会增加您的应用程序的复杂性。
[看到这个](http://developer.android.com/tools/sdk/ndk/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:12:00.900

您可以使用 Android NDK 使用 c/c++ 构建一个 android 应用程序

看看这里 [我可以用 C++、C 进行 Android 编程吗？](https://stackoverflow.com/questions/2773650/can-i-do-android-programming-in-c-c)

# ruby-on-rails - Ruby on Rails - 如何委托给多态关联？

> ID：13180710
> 
> 赞同：6
> 
> 时间：2012-11-01T15:52:05.593
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-4, polymorphic-associations

是否可以在多态模型中使用`delegate`或`has_many`关联`has_one`？这是如何运作的？

```
class Generic < ActiveRecord::Base
    ...

  belongs_to :generable, polymorphic: true

  delegate :file_url, to: :image, allow_nil: true
  delegate :type_cat, to: :cat, allow_nil: true
end

class Image < ActiveRecord::Base
   ...
  has_one :generic, as: generable, dependent: :destroy
end

class Cat < ActiveRecord::Base
   ...
  has_one :generic, as: generable, dependent: :destroy
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-14T17:22:20.940

不确定这是否与您想要做的完全匹配，因为很难从您的示例中看出，但是......

```
class Generic < ActiveRecord::Base
  ...
  belongs_to :generable, polymorphic: true
  ...
  delegate :common_method, to: :generable, prefix: true
end

class Cat
  def common_method
    ...
  end
end

class Image
  def common_method
    ...
  end
end 
```

允许您说以下内容：

```
generic.generable_common_method 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-28T20:43:05.640

不幸的是，`delegate`宏根本不适合多态关联——当然，除非您可以确保您的所有多态关联都实现了委托方法（哪种方式违背了目的）。

并且该选项只会在没有礼物的情况`allow_nil`下防止发生。但是，如果存在 a*但未*实现委托方法，您仍将获得 a 。`NoMethodError``generable``generable` *`generable``NoMethodError`*

 *你最好的办法是像这样实现委托：

```
class Generic < ActiveRecord::Base
  ...

  belongs_to :generable, polymorphic: true

  def file_url
    generable.try(:file_url)
  end

  def type_cat
    generable.try(:type_cat)
  end

  ...
end 
```

使用此实现，如果不响应该方法，`@generic.file_url`将简单地返回。`nil``generable`

* * *

另一种选择是，为您提供[DRYer 代码](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself)并避免使用一堆只说“在多态关联上尝试相同的方法名称”的方法，您可以在一行上定义所有这些方法并让它们像这样动态生成：

```
class Generic < ActiveRecord::Base
  ...

  belongs_to :generable, polymorphic: true

  METHODS_FOR_POLYMORPHIC_DELEGATION = %i(
    file_url
    type_cat
    something_else
    and_another_something_else
  )

  METHODS_FOR_POLYMORPHIC_DELEGATION.each do |method_name|
    define_method(method_name) { generable.try(method_name) }
  end

  ...
end 
```*

# ruby-on-rails - Ruby 教程 Ch9 练习 #9 - 测试失败

> ID：13180713
> 
> 赞同：0
> 
> 时间：2012-11-01T15:52:13.357
> 
> 标签：ruby-on-rails, testing, rspec, railstutorial.org

我尝试搜索这个并发现了许多问题，没有一个可以给我一个有效的答案。我应该进行测试以确保管理员用户无法删除自己。

这是我在 authentication_pages_spec.rb 中的内容

```
describe "as admin user" do
  let(:admin) { FactoryGirl.create(:admin) }
  before { sign_in admin }

  describe "can't delete self" do
    before { delete user_path(admin) }
    specify { response.should redirect_to(users_path), 
              flash[:error].should =~ /Cannot delete own admin account!/i }
  end      
end 
```

这是我在 users_controller.rb 中的内容

```
def destroy
    user = User.find(params[:id])
    if (current_user == user) && (current_user.admin?)
      flash[:error] = "Cannot delete own admin account!"
    else
      user.destroy
      flash[:success] = "User destroyed."
    end
  redirect_to users_path
end 
```

测试失败并显示结果：

```
1) Authentication authorization as admin user can't delete self 
     Failure/Error: flash[:error].should =~ /Cannot delete own admin account!/i }
       expected: /Cannot delete own admin account!/i
            got: nil (using =~)
     # ./spec/requests/authentication_pages_spec.rb:139:in `block (5 levels) in <top (required)>'

Finished in 3.75 seconds
83 examples, 1 failure

Failed examples:

rspec ./spec/requests/authentication_pages_spec.rb:138 # Authentication authorization as admin user can't delete self 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T05:42:21.400

这就是我所做的。希望它至少可以作为参考。

**规范/请求/authentication_pages.spec**

```
describe "authorization" do
  ...

  context "as an admin user" do
    let(:admin) { create(:admin) }

    before do
      visit signin_path
      sign_in(admin)
    end

    context "prevents admin users from destroying themselves" do
      it "does not delete the user" do
        expect do
          delete user_path(admin)
        end.not_to change(User, :count)
      end

      context "after failing to delete" do
        let(:no_suicide) { "Cannot delete own admin account!" }

        before { delete user_path(admin) }
        specify do
          response.should redirect_to(users_url),
                                      flash[:error].should == no_suicide
        end
      end
    end
  end
end 
```

**应用程序/控制器/users_controller.rb**

```
class UsersController < ApplicationController
  ...

  before_filter :admin_user, only: :destroy

  ...

  def destroy
    user = User.find(params[:id])
    if !current_user?(user)
      user.destroy
      flash[:success] = "User destroyed."
    else
      flash[:error] = "Cannot delete own admin account!"
    end
    redirect_to users_url
  end

  ...

  private

    def admin_user
      redirect_to root_url unless current_user.admin?
    end

    ...
end 
```

# python - 在 Python 守护进程中维护日志记录和/或 stdout/stderr

> ID：13180720
> 
> 赞同：18
> 
> 时间：2012-11-01T15:52:25.000
> 
> 标签：python, logging, fork, daemon

我找到的在 Python 中创建守护进程的每个秘诀都涉及分叉两次（对于 Unix），然后关闭所有打开的文件描述符。（有关示例，请参见[http://www.jejik.com/articles/2007/02/a_simple_unix_linux_daemon_in_python/ ）。](http://www.jejik.com/articles/2007/02/a_simple_unix_linux_daemon_in_python/)

这一切都很简单，但我似乎有一个问题。在我正在设置的生产机器上，我的守护进程正在中止 - 因为所有打开的文件描述符都已关闭，所以静默中止。我目前在调试问题时遇到了棘手的问题，并且想知道捕获和记录这些错误的正确方法是什么。

设置日志记录以使其在守护进程后继续工作的正确方法是什么？我只是`logging.basicConfig()`在守护进程后第二次调用吗？`stdout`捕获和的正确方法是什么`stderr`？我不清楚为什么所有文件都被关闭的细节。理想情况下，我的主要代码可以调用`daemon_start(pid_file)`并且日志记录将继续工作。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-04T05:01:26.113

我将该`python-daemon`库用于我的守护进程行为。

此处描述的接口：

*   [http://www.python.org/dev/peps/pep-3143/](http://www.python.org/dev/peps/pep-3143/)

这里的实现：

*   [http://pypi.python.org/pypi/python-daemon/](http://pypi.python.org/pypi/python-daemon/)

它允许指定一个`files_preserve`参数，以指示在守护进程时不应关闭的任何*文件描述符*。

如果您需要在守护进程之前和之后通过*相同* `Handler`的实例进行日志记录，您可以：

1.  `basicConfig`首先使用or或其他设置您的日志记录处理程序`dictConfig`。
2.  记录东西
3.  `Handler`确定您的 s 所依赖的文件描述符。不幸的是，这取决于`Handler`子类。如果您的首次安装`Handler`是 a `StreamHandler`，则它的值是`logging.root.handlers[0].stream.fileno()`; 如果您的第二次安装`Handler`是 a `SyslogHandler`，则您需要`logging.root.handlers[1].socket.fileno()`; 等等。这很混乱:-(
4.  通过创建`DaemonContext`与`files_preserve`您在步骤 3 中确定的文件描述符列表相等的文件来守护您的进程。
5.  继续记录；您的日志文件不应该在双叉期间关闭。

正如@Exelian 建议的那样，另一种方法可能是在守护进程`Handler`之前和之后实际使用不同的实例。在守护进程之后，立即销毁现有的处理程序（通过`del`从`logger.root.handlers`？）并创建相同的新处理程序；`basicConfig`由于@dave-mankoff 指出的问题，您不能只是重新打电话。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-11T00:07:40.613

如果您将日志处理程序对象与根记录器对象分开设置，然后将处理程序对象作为一个独立步骤添加而不是一次完成所有操作，则可以为此简化代码。以下内容应该适合您。

```
import daemon
import logging

logger = logging.getLogger()
logger.setLevel(logging.DEBUG)
fh = logging.FileHandler("./foo.log")
logger.addHandler(fh)

context = daemon.DaemonContext(
   files_preserve = [
      fh.stream,
   ],
)

logger.debug( "Before daemonizing." )
context.open()
logger.debug( "After daemonizing." ) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-19T03:38:21.927

We just had a similar issue, and due to some things beyond my control, the daemon stuff was separate from the stuff creating the logger. However, logger has a .handlers and .parent attributes that make it possible with something like:

```
 self.files_preserve = self.getLogFileHandles(self.data.logger)

def getLogFileHandles(self,logger):
    """ Get a list of filehandle numbers from logger
        to be handed to DaemonContext.files_preserve
    """
    handles = []
    for handler in logger.handlers:
        handles.append(handler.stream.fileno())
    if logger.parent:
        handles += self.getLogFileHandles(logger.parent)
    return handles 
```

# mysql - 仅在创建该数据库后，无法以 root 身份访问某些数据库

> ID：13180721
> 
> 赞同：3
> 
> 时间：2012-11-01T15:52:26.280
> 
> 标签：mysql, database, root, privileges, grant

作为 root@localhost

```
mysql> CREATE USER 'aaa'@'%';
Query OK, 0 rows affected (0.00 sec)

mysql> GRANT USAGE ON * . * TO 'aaa'@'%' WITH MAX_QUERIES_PER_HOUR 0 MAX_CONNECTIONS_PER_HOUR 0 MAX_UPDATES_PER_HOUR 0 MAX_USER_CONNECTIONS 0 ;
Query OK, 0 rows affected (0.00 sec)

mysql> CREATE DATABASE IF NOT EXISTS `aaa` ;
Query OK, 1 row affected (0.00 sec)

mysql> FLUSH PRIVILEGES;
Query OK, 0 rows affected (0.00 sec)

mysql> GRANT ALL PRIVILEGES ON `aaa` . * TO 'aaa'@'%';
ERROR 1044 (42000): Access denied for user 'root'@'localhost' to database 'aaa' 
```

**发生了什么事..为什么它会给我那个错误？**

```
mysql> show grants;
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Grants for root@localhost                                                                                                                                                                                                                                                                                                                                                                                        |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, RELOAD, SHUTDOWN, PROCESS, FILE, REFERENCES, INDEX, ALTER, SHOW DATABASES, SUPER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, REPLICATION SLAVE, REPLICATION CLIENT, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, CREATE USER ON *.* TO 'root'@'localhost' IDENTIFIED BY PASSWORD '*B67132C4A56F2FFFE0AA531DECF0C98895F9CB9B' WITH GRANT OPTION |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T15:55:37.160

我过去遇到过这种情况，我的解决方案是显式连接到 127.0.0.1 而不是 localhost 别名

```
mysql -uroot -h127.0.0.1 
```

希望这对你有用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:22:58.377

权限不够。您正在尝试授予**所有**权限。但是，用户 'root'@'localhost' 没有**所有**权限。

'SHOW GRANTS' 命令已输出权限列表 -`GRANT SELECT, INSERT,...`

但应该是这样的——`GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost'...`

首先授予root帐户所有权限，或者只授予未授予的权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-03T13:32:18.843

5.7 中的一点精度：

```
mysql -uroot -h127.0.0.1  -p

GRANT ALL PRIVILEGES ON *.* TO 'root';

quit 
```

然后

```
mysql -u root  -h mynode mydb -p 
```

工作正常

# vb.net - 在 VB.NET 2010 上安装自定义控件？

> ID：13180732
> 
> 赞同：0
> 
> 时间：2012-11-01T15:52:53.310
> 
> 标签：vb.net, user-controls

我创建了一个自定义控件，现在我必须创建一个安装包，将我的控件集成到 VB IDE 中（将其添加到工具箱中）。问题是我不知道 DLL 文件应该放在哪里以及如何“注册”它以便它与其他控件一起显示。你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:38:35.217

步骤 1) 打开您的自定义控件并创建它 ( `F7`)

步骤 2) 打开项目，将其添加到

步骤 3) 右键单击​​工具箱 > 选择元素 > 浏览 > ...[yourproject]\bin\Debug[yourcontrol].dll > 打开

# solr - Solr Highlighting：如何为同一字段请求多个片段长度？

> ID：13180736
> 
> 赞同：4
> 
> 时间：2012-11-01T15:53:11.210
> 
> 标签：solr, highlighting

我正在尝试找到一种方法来为单个字段请求多个不同长度的片段。我知道这可以通过发出两个单独的查询或复制字段来完成，但我想避免将查询负载或索引大小加倍。我也不想求助于编写自定义代码段生成器。

我正在使用 Solr 4.0，我认为新的[字段别名](http://wiki.apache.org/solr/CommonQueryParameters#Field_alias)功能可能是一个理想的解决方案。但是，突出显示组件似乎不理解这种新语法。例如，以下请求将理想地返回两个突出显示的片段：一个简短的片段和完整的字段：

```
http://localhost:8983/solr/select?defType=edismax&q=foo&qf=content&fl=id&hl=true&hl.fl=content,snip:content&f.content.hl.fragsize=50000&f.snip.hl.fragsize=200&wt=json&indent=true 
```

这会导致如下所示：

```
"highlighting":{
"12345":{
  "content":{
    "snippet":["<em>foo</em> bar baz"]},
  "snip:content":{
    "snippet":null}}, 
```

由此我得知荧光笔查找名为“snip：content”的字段并失败。[我使用 fl、qf 和f.myalias.qf](http://wiki.apache.org/solr/ExtendedDisMax#Field_aliasing_.2BAC8_renaming)参数中指定的字段别名尝试了多种变体，但无济于事。我一直在讨论 JIRA 问题、补丁和源代码，但我无法确定正确的语法应该是什么。

有没有人对如何解决这个问题有想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:49:49.940

您可以查看[hl.snippets](http://wiki.apache.org/solr/HighlightingParameters#hl.snippets) :-

> 每个字段生成的突出显示片段的最大数量。注意：可以生成从零到该值的任意数量的片段。此参数接受每个字段的覆盖。
> 
> 默认值为“1”。

# android - 动态改变数组的大小

> ID：13180738
> 
> 赞同：1
> 
> 时间：2012-11-01T15:53:16.143
> 
> 标签：android

我正在编写一个简单的 GPS 程序，它将位置存储在`String`对象数组中。现在数组设置为 100。当`String`添加另一个时，它会创建一个`String`200 的新数组，将旧数组复制到新数组，然后将变量设置为等于新数组。有没有办法动态扩大数组的大小，而不必每次都创建一个新数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T15:58:44.157

听起来您应该使用[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)类。它为您提供了动态增长数组的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:56:14.007

试试[向量](http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html)？

显然，您也可以使用[Java 集合框架](http://docs.oracle.com/javase/tutorial/collections/index.html)中的任何其他类，具体取决于您的要求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T15:56:56.550

或者您可以使用`ArrayList<String>`并继续添加您认为合适的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T16:47:34.563

最好的方法是使用 ArrayList

# python - PyPy 显示不准确的基准测试结果？

> ID：13180740
> 
> 赞同：2
> 
> 时间：2012-11-01T15:53:22.617
> 
> 标签：python, benchmarking, pypy

我在[Project Euler](http://projecteuler.net/problem=204)上工作，想知道是否可以使用 PyPy 加速我的解决方案。但是，我发现结果非常令人失望，因为计算需要更多时间。

```
d:\projeuler>pypy problem204.py
3462.08630405 mseconds

d:\projeuler>python problem204.py
1823.91602542 mseconds 
```

由于毫秒输出是使用 python 的`time`模块计算的，所以我使用内置的基准命令再次运行它。

```
d:\projeuler>pypy -mtimeit -s "import problem204" "problem204._main()"
10 loops, best of 3: 465 msec per loop

d:\projeuler>python -mtimeit -s "import problem204" "problem204._main()"
10 loops, best of 3: 1.87 sec per loop 
```

PyPy 报告说完成运行大约需要半秒钟。但是，我尝试多次运行 pypy question204 并且输出从未接近基准测试的 0.5 秒。与 pypy 不同的是，python 的 mtimeit 结果与输出一致。pypy 给了我不准确的基准，还是有一些我不明白的魔法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T16:04:46.963

请注意，timeit

1.  多次运行该语句（在您的情况下为 10 次），并且
2.  这样做几次（默认情况下为 3 次）并给出最少的次数，原因[在文档中列出](http://docs.python.org/3/library/timeit.html#timeit.Timer.repeat)。

这取决于您的代码，但完全有可能 JIT 编译器要为这个令人困惑的结果负责。每次启动一个新的 pypy 进程时都会产生 JIT 预热开销，但在 timeit 基准测试期间只有一次（因为`_main`在同一进程中运行多次）。此外，如果您的代码的某些部分运行得太频繁以至于它在`_main`运行一次时没有被编译，而是仅在运行 3 次时才编译，那么后续运行也会更快，这会进一步消除第一次运行的最佳结果（即运行`pypy problem204.py`一次的那个）。

结果`timeit`是正确的，因为它（大致）匹配代码在最佳情况下的速度 - 预热的 JIT 编译器，很少将 CPU 丢失给其他程序等。你的问题是你想知道一些不同的东西 -时间包括 JIT 预热。

# javascript - 如何防止访问者通过检查员查看我的网站？

> ID：13180741
> 
> 赞同：0
> 
> 时间：2012-11-01T15:53:24.110
> 
> 标签：javascript

> **可能重复：**
> [如何禁用右键单击我的网页？](https://stackoverflow.com/questions/737022/how-do-i-disable-right-click-on-my-web-page)

假设我有这张非常酷的图片，我不希望它被盗，我不希望人们查看源代码，不幸的是，出于某种未知原因，他们所要做的就是打开网络检查器，他们有你的图片，css，html，应有尽有！

为什么这上面什么都没有？

我不想在互联网上的任何其他地方看到我非常棒的形象。

因此，如果有人可以帮助我解决这个问题，我会非常高兴。

（我知道有些人的图像非常棒，他们明白，我只知道！）

加油^^

米索斯

编辑：他们是怎么做到的？[https://dl.dropbox.com/u/107533178/Screen%20shot%202012-11-02%20at%202.00.10%20PM.png](https://dl.dropbox.com/u/107533178/Screen%20shot%202012-11-02%20at%202.00.10%20PM.png)

这是网站的链接：

[http://player.hulu.com/embed/myspace_player_v002.swf?pid=50023725&embed=false&partner=MySpace&videoID=107805066&autoplay=true&referrer=http%3a%2f%2fvids.myspace.com%2findex.cfm%3ffuseaction%3dvids.individual% 26videoid%3d107805066](http://player.hulu.com/embed/myspace_player_v002.swf?pid=50023725&embed=false&partner=MySpace&videoID=107805066&autoplay=true&referrer=http%3a%2f%2fvids.myspace.com%2findex.cfm%3ffuseaction%3dvids.individual%26videoid%3d107805066)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T15:54:24.740

你不能。你无法阻止它。也许会让无知的人稍微困难一些。

可以这样考虑：如果您希望某人可以看到您的网页，则该人的浏览器必须下载您的 html、css、图像、所有内容，才能显示该页面。现在，他们在浏览器中获得了该页面的完整副本。**您**在服务器上做的任何事情都不能阻止这种情况，因为这样一开始页面就不会可见。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T15:57:32.207

这是来自兄弟网站的讨论：[水印值得吗？](https://photo.stackexchange.com/questions/856/is-watermarking-worth-it)

以下是网络上最多产的图片海报 Trey Ratcliff 的摘要：

[https://plus.google.com/+TreyRatcliff/posts/UTKKo5Su6Rj](https://plus.google.com/+TreyRatcliff/posts/UTKKo5Su6Rj)

> **为什么我不使用水印**
> 
> 我经常收到这个问题，而且我知道它是在昨晚的现场视频群聊中出现的。我知道我的观点与许多其他摄影师不同，这没关系。
> 
> 如您所知，我的作品都是知识共享非商业性的。这意味着人们，只要他们给予信任并链接回 [http://www.StuckInCustoms.com](http://www.StuckInCustoms.com)，就可以在他们的博客、壁纸、个人用途上使用我的图像——任何东西——只要它不用于商业用途。每天，我都会将 6000+ 像素的最大分辨率图像上传到 Internet。我根本没有任何恐惧……相信我，生活在一个没有网络隐身恐惧的世界里是相当解放的。
> 
> 想要授权我们的图像的人会定期联系我们的授权团队——我们每周都会收到很多这样的授权。
> 
> 那我为什么不用水印呢？这是一个多方面的哲学——</p>
> 
> 1.  水印看起来很难看。每当我看到带有水印的照片时，很多时候，我能想到的就是那个水印！这太让人分心了。也许这只是我。
>     
>     
> 2.  合法公司不会窃取图像用于商业用途。所以我没有任何逻辑上的恐惧。*在紧急情况下，打破玻璃并查看#4
>     
>     
> 3.  还有其他服务，例如 Tineye（和 Google），可以帮助我的团队轻松找到底层供应商。
>     
>     
> 4.  我们确实在版权局注册了我们的图像，所以如果有人在没有适当许可的情况下将图像用于商业用途，那很容易提起诉讼。
>     
>     
> 5.  我不必维护每个图像的两个版本——一个有水印，一个没有。
>     
>     
> 6.  不使用水印和使用知识共享可以帮助越来越多的人自由地使用您的图像以获得乐趣，这增加了流量并建立了我称之为“互联网信任”的东西。
>     
>     
> 7.  随着图像搜索和图像识别越来越好，将不再需要水印。在 1 年多的时间里，我们将能够右键单击图像并选择“Google-find the original creator”——互联网上的第一人有一点线索。
>     
>     
> 8.  是的，最后，会有底部喂食者偷你的东西。我称之为在互联网上做生意的成本。这些是从 7-11 偷来的井字游戏。保持 100% 的数字库存是不可能的，因此想要在您的在线策略中“完美”是一种幻想。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T16:01:35.887

您可以尝试很多事情，例如阻止 f12 键，阻止在浏览器中单击右键，但这不会阻止人们拍摄您的图像，如果他们愿意的话。想一想。如果你看到一个页面，这意味着你已经在浏览器缓存的某个地方下载了它。

如果您的图片真的很棒 - 请访问[https://photo.stackexchange.com/](https://photo.stackexchange.com/)并了解如何为您的图片获取版权。

# php - mssql_connect()：无法连接到服务器（没有 freetds.conf）

> ID：13180746
> 
> 赞同：2
> 
> 时间：2012-11-01T15:53:37.677
> 
> 标签：php, sql-server, freetds

我有两台服务器：一台是 OpenSUSE，另一台是 SLES 11 sp2 Suse Linux Enterprise Server。

为了连接到 MSSQL，我必须为 php 安装 mssql.so。

OpenSUSE 允许从 rpm 安装 mssql。SLES - 没有 mssql rpm，这就是为什么需要编译它。

OpenSUSE：已安装 mssql rpm =>

```
$server="172.x.x.x:49888";
$username="username";
$password="password";
$link = mssql_connect($server, $username, $password); 
```

到这里就成功连接MSSQL了！

SLES：使用 mssql.so 编译 =>

```
$server="172.x.x.x:49888";
$username="username";
$password="password";
$link = mssql_connect($server, $username, $password); 
```

错误：警告：mssql_connect()：无法连接到服务器：172.xxx:49888

如果我编辑 freetds.conf

```
#A typical Microsoft server
[Dovico]
    host = 172.x.x.x
    port = 49888
    tds version = 7.0 
```

并像这样更改php：

```
$server="Dovico";
$username="username";
$password="password";
$link = mssql_connect($server, $username, $password); 
```

=> 成功连接到 MSSQL！

所以我的问题是如何使用这个在 SLES 上建立 MSSQL 连接（使用 mssql.so 编译）

```
mssql_connect("172.x.x.x:49888", "username", "password"); 
```

而不使用 freetds.conf ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-01T18:22:14.760

编辑`freetds.conf`（取消注释并更改版本）：

从

```
[global]
        # TDS protocol version
;   tds version = 4.2 
```

到

```
[global]
        # TDS protocol version
    tds version = 7.0 
```

并重新启动 Apache。

# ssrs-2008 - 无法读取数据集“Dataset3”的下一个数据行，将 varchar 值转换为数据类型 int 时转换失败

> ID：13180747
> 
> 赞同：0
> 
> 时间：2012-11-01T15:53:40.203
> 
> 标签：ssrs-2008, reporting-services, ssrs-tablix

我正在运行一个包含 3 个参数的报告。第二个参数根据在第一个参数中选择的值填充，第三个参数根据第二个参数填充。

我可以在第二个和第三个参数中选择多个值。

当我在第二个参数中选择 2 个值时，将填充第三个值，当我执行 SELECT ALL 时，它仍然可以工作。

但是当我选择 3 个或更多值时，它会引发错误。

> *本地报告期间出现错误
> 无法读取数据集“Dataset3”的下一个数据行，
> 将 varchar 值“430.2”转换为数据类型 int 时转换失败*

你能告诉我我的方法应该是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T07:42:15.277

> 你能告诉我我的方法应该是什么。

问题在于数据和数据集查询。您应该在数据集 2 后面运行查询，并确定开始给您带来麻烦的 3 个值是什么。检查这些值是否实际上是正确的数据类型（参数的类型）。很可能其中一个值是“430.2”，而参数的类型是 INT。

如果这不起作用，那么您应该在数据集 3 后面执行查询，以便将`WHERE myval IN (@Param3)`位中的参数替换为您使用先前查询检索到的值的逗号分隔列表。

如果两者都没有出现，那么下一步可能是运行 SQL Profiler 并获取 SSRS 发送到服务器的实际查询。挑选出这些查询，并尝试手动运行它们以调试问题。

您可能要检查的另一件事是数据集的字段映射设置是否与数据集查询实际返回的类型匹配。

# asp.net-mvc - 如何将具有 DataAnnotationsExtensions 的 MVC 4 应用程序发布到 AppHarbor？

> ID：13180751
> 
> 赞同：0
> 
> 时间：2012-11-01T15:53:51.270
> 
> 标签：asp.net-mvc, data-annotations, appharbor

我有一个引用 DataAnnotationsExtensions 和 DataAnnotationsExtensions.ClientValidation 的项目，尽管路径设置为 bin 文件夹，但当我尝试在 AppHarbor 中发布它时，它给了我一个未找到的错误消息。

```
    C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1578,5)：
警告 MSB3245：无法解析此引用。找不到程序集
“DataAnnotationsExtensions.ClientValidation”。检查以确保该程序集存在于磁盘上。
如果您的代码需要此引用，您可能会遇到编译错误。
[D:\temp\jeb1ouer.ipc\input\Financy.Data\Financy.Data.csproj]

```

我应该怎么做才能完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:06:44.523

您可能应该只[从 NuGet 安装相关的 dll](http://nuget.org/packages/DataAnnotationsExtensions)并使用[NuGet 包还原使 AppHarbor 自动安装它](http://blog.appharbor.com/2012/02/06/use-nuget-package-restore-to-avoid-pushing-packages-to-appharbor)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:20:39.170

我刚刚解决了！该路径引用了 bin 文件夹，但 GitHub 没有上传 bin 文件夹，所以我将 dll 移动到 packages 文件夹，一切正常。

# visual-studio-2010 - Visual Studio 调试器给出异常但在运行时运行

> ID：13180757
> 
> 赞同：0
> 
> 时间：2012-11-01T15:54:09.983
> 
> 标签：visual-studio-2010

我有一个关于 Visual Studio 2010 的简单问题。当我在调试器模式下运行简单的 5 行无错误代码时，出现异常。但是，当我从 Debug 目录运行可执行文件时，它运行良好。为什么会发生这种情况？

谢谢你。

编辑 ：

```
#include "highgui\highgui.hpp"
#include "core\core.hpp"
#include <iostream>
using namespace cv;
int main()

{
Mat img=imread("im.jpg",CV_8UC1);
namedWindow("bok",1);
imshow("bok",img);
waitKey(10);
system("PAUSE");
return 0;
} 
```

# c# - 如何使用 C# 和 xaml 在 Windows 8 中更改列表视图中每个项目的背景？

> ID：13180758
> 
> 赞同：1
> 
> 时间：2012-11-01T15:54:15.717
> 
> 标签：c#, xaml, listview, background, windows-8

我正在尝试使用 C# 和 xaml 在 Windows 8 中创建一个列表视图。我希望每个列表项都有不同的背景。

是否可以使用 C# 和 XAML 来完成？

如何通过 c# XAML 代码设置每个项目的背景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-29T06:41:05.057

在这里你就这么简单。

```
<StackPanel Margin="0,0,1122,0">
    <ListView>
            <ListViewItem Background="blue">
                <TextBlock Text="Hello"></TextBlock></ListViewItem>

            <ListViewItem Background="green">
                <TextBlock Text="Hello"></TextBlock>
            </ListViewItem>
        </ListView>
    </StackPanel> 
```

使用 Visual Studio 2012 测试。c# XAML

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:49:19.840

[在这里](https://stackoverflow.com/a/12010234/901059)查看答案。您可以使用带有数据转换器的行索引来设置背景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T17:55:17.560

您可以绑定到自定义对象的属性（或列表已绑定到的任何对象的属性）。如果该属性从不通知更改，那么这些背景将保留您设置的任何内容。如果您希望它们基于某个值，则应为自定义对象提供确定颜色的方式/基于什么的方法。

# html - 媒体查询如何提高移动用户的网站性能

> ID：13180762
> 
> 赞同：4
> 
> 时间：2012-11-01T15:54:31.933
> 
> 标签：html, css, media-queries

我读过使用媒体查询为移动设备更改站点是件好事，因为它的开销更少，而且手机的下载速度也更慢。但这有什么帮助呢？除了隐藏我不想在移动设备上看到的元素之外，我可以做任何事情吗？它仍然需要下载隐藏的元素。那么有什么收获呢？我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:01:10.403

响应式/自适应网站设计的整个理念与其说是让您的网页大小或它的资产更小……不如说是让在移动设备上查看您的网站的人们可以访问和阅读内容。我永远不会因为有人在移动设备上而说隐藏元素，我会说相应地进行设计和开发，以便内容在移动设备和/或平板电脑设备上更具表现力。

根据您的收益声明；您从设计和开发一个不仅适合桌面用户，还适合移动和平板电脑用户的网站中获得的收益。更多的人将不太可能离开，而更容易留下并查看您的内容。

**您可以在下面阅读有关响应式网站设计的更多信息：**

[http://blog.teamtreehouse.com/beginners-guide-to-responsive-web-design](http://blog.teamtreehouse.com/beginners-guide-to-responsive-web-design)

[http://www.techrepublic.com/blog/webmaster/how-to-get-started-with-responsive-web-design/1769](http://www.techrepublic.com/blog/webmaster/how-to-get-started-with-responsive-web-design/1769)

[http://www.alistapart.com/articles/responsive-web-design/](http://www.alistapart.com/articles/responsive-web-design/)

**您还可以阅读以下有关响应式网站设计的好处的更多信息：**

[http://www.loungelizard.com/web-design-blogs/design/the-benefits-of-responsive-web-design/](http://www.loungelizard.com/web-design-blogs/design/the-benefits-of-responsive-web-design/)

[http://www.seomoz.org/ugc/responsive-web-design-the-ultimate-guide-for-online-marketers](http://www.seomoz.org/ugc/responsive-web-design-the-ultimate-guide-for-online-marketers)

***快速说明：媒体查询与响应式/自适应网站设计密切相关。***

希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:00:39.560

通过媒体查询和 CSS，您不只是“隐藏”内容。根据您的设置方式，您不只是隐藏内容 - 它没有被加载。

您还可以使用媒体查询来选择图像分辨率，具体取决于视口。您可以将低分辨率图像发送到移动设备，并将高分辨率图像发送到视网膜显示器。

请参阅： [http ://css-tricks.com/snippets/css/retina-display-media-query/](http://css-tricks.com/snippets/css/retina-display-media-query/)

[http://menacingcloud.com/?c=highPixelDensityDisplays](http://menacingcloud.com/?c=highPixelDensityDisplays)

[http://www.leemunroe.com/responsive-design/](http://www.leemunroe.com/responsive-design/)

# android - 遍历数组以更新屏幕

> ID：13180764
> 
> 赞同：2
> 
> 时间：2012-11-01T15:54:51.137
> 
> 标签：android, arrays

我有一个数组中的名称列表，单击其中的一个会将我带到一个记录屏幕，该屏幕显示名称和该名称的代码。信息以匹配长度的数组形式提供。我希望能够单击记录屏幕中的按钮，将我带到下一个名称的相应屏幕。

我从意图中获取了 listView 项的索引 i，然后使用它从数组中获取该名称的正确数据。

下面是我的记录屏幕代码。

```
public class RecordActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_record);

Intent intent = getIntent();
final int i = intent.getIntExtra(MainActivity.EXTRA_INDEX, 0);  

final String[]names = getResources().getStringArray(R.array.names);
final String[]codes = getResources().getStringArray(R.array.codes);

final TextView nameView = new TextView(this);
nameView = (TextView) findViewById(R.id.vNames);
String vName = names[i];
nameView.setText(vName);

TextView codeView = new TextView(this);
codeView = (TextView) findViewById(R.id.vCodes);
String vCode = codes[i];
codeView.setText(vCode);

nextButton = (Button) findViewById(R.id.nextButton);
nextButton.setOnClickListener(new OnClickListener(){
    public void onClick(View v) {

    }
    }});
} 
```

在按钮的 onClick 方法中，我想做“设置 i=i+1，然后刷新数据”之类的操作，但是对于编程来说，我并不完全确定如何“编写”它。

我试过了

```
if (i<names.length) {
  nameView.setText(names[i]);
  i++;} 
```

但我收到错误“我无法分配最终的局部变量，因为它是在封闭类型中定义的”。

我希望尽可能保持一般性，因为我希望有多达 12 个数组调用索引来显示信息。

任何想法都会非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:00:14.007

你提到的具体问题在这里：

```
final TextView nameView = new TextView(this);
nameView = (TextView) findViewById(R.id.vNames); 
```

标记为 final 的字段只能分配一次。在第一行中，您为其分配了一个新的 TextView，这完全是多余的，因为您想在下一行中从布局中分配对视图的引用，然后由于最终的 nameView 已经分配而失败。

```
final TextView nameView = (TextView) findViewById(R.id.vNames); 
```

我也有同样的问题。只需删除 final 关键字，或者，如果您希望它是 final 的，请将其分配给不同的变量：

```
int x = i;
if (x<names.length) {
   nameView.setText(names[x]);
   x++;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:02:41.243

不要设置 i final - 而是使用

```
this.i 
```

在 OnClickListener 方法中访问它。在正常的编码约定中，您可能不会使用 i 作为变量，但更清楚地表明它代表什么。

# c++ - LLVM 是典型的虚拟机吗？

> ID：13180767
> 
> 赞同：9
> 
> 时间：2012-11-01T15:55:05.937
> 
> 标签：c++, llvm

我想知道 LLVM 是像 Java 或 .Net 那样的典型虚拟机，还是只是运行时环境，就像普通的 C++ 运行时一样？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T16:48:53.937

这两者都不是。

LLVM 曾经代表“低级虚拟机”，但这绝不意味着 Java 或 .NET 意义上的完整虚拟机，并且“LLVM”此后不再是缩写。

LLVM 的核心部分是 LLVM IR。

IR 代表内部表示，这是编译器中使用的术语，指的是前端和后端之间使用的程序表示。IR 允许将解析语言的细节与代码生成的细节分离。在传统的编译器设计中，理想的前端和后端组件可以自由混合，这样 N 个前端和 M 个后端将允许您创建 NxM 编译器。

LLVM 的 IR 不同于传统的内部表示；而不是基于抽象语法树 LLVM IR 是一种汇编语言，或类似于 Java 和 .NET 的字节码。这就是“虚拟机”的用武之地。但是 LLVM IR 并不像 .NET 和 JVM 那样强制执行高级语义，例如数组边界检查。此外，LLVM IR 可以进行 JIT 编译，但通常它会静态编译为本机代码，就像任何传统编译器的后端对 IR 所做的一样。

* * *

LLVM 已经发展为围绕核心编译器基础架构的许多组件命名的伞式项目。最初 LLVM 是 IR 和对其进行操作的工具（优化、代码生成），但已经发展到包含更多内容，包括一些针对 LLVM IR 的前端、用于解析和生成程序集的机器代码框架、通用目标文件处理、调试器，链接器...

如果您有兴趣，每年都会举办一次 LLVM 会议，涵盖 LLVM 中发生的事情和使用 LLVM 的项目，他们会记录并发布演示文稿： http: [//llvm.org/devmtg/](http://llvm.org/devmtg/)。今年将在下周举行。

# bots - 在 IRC 上处理 470 转发的正确方法是什么？

> ID：13180769
> 
> 赞同：1
> 
> 时间：2012-11-01T15:55:06.287
> 
> 标签：bots, irc

我构建了一个机器人来监控 irc.freenode.com 上的几个频道。但是，一段时间后，机器人会收到一条 470 转发消息，并且似乎与频道一一断开。

```
:morgan.freenode.net 470 ircbot #linux ##linux :Forwarding to another channel 
```

处理这个问题的正确方法是什么？我是否因为不活动而被置于这个新频道？我应该重新加入频道吗？我应该重新加入服务器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:18:12.163

这是由模式引起的`+f`- 不请自来的转发。

本质上，这种模式允许运营商将非例外用户转发到辅助通道。可能这是频道运营商的预期行为，尽管您**可以**尝试重新加入主要频道 - 您必须联系频道运营商以解决任何特定于频道的政策问题。

[Freenode 文档](http://freenode.net/using_the_network.shtml#modes) 的摘录：

> **禁止频道转发**
> 
> 后缀“$#channel”可以附加 [...] 以使用户被转发到#channel。在这种情况下，在用户之前被告知无法加入的所有情况下，他们将改为加入禁止掩码中指定的频道，并发送一个 470 数字来描述转发。
> 
> 当在 +i 频道（仅限邀请）上指定时，尝试加入频道且不在仅限邀请豁免列表 (+I) 中的用户将自动发送到 [转发频道]。客户端会收到一条 470 数字消息，其中列出了原始频道和目标频道。如果设置了 +j 并且超出了连接限制，客户端也将被转发。

[配套来源](https://toxin.jottit.com/freenode_channel_modes)

# sql - 如何在sql中求和以达到总计

> ID：13180770
> 
> 赞同：1
> 
> 时间：2012-11-01T15:55:06.943
> 
> 标签：sql

我有一个销售 ID 列表，后跟他们的总销售额和购买量。我现在想总结总销售额和购买量。我试图插入 sum totalbuy 和 totalsell 作为总数。但这并没有奏效。

```
select sales_id, 
   SUM(CASE WHEN side= 'buy' THEN 1 ELSE 0 END) AS totalbuy, 
   SUM(CASE WHEN side= 'sell' THEN 1 ELSE 0 END) AS totalsell 
from car_orders 
where sales_id like '%%' 
GROUP BY sales_id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:07:57.220

`where`如果您想要与该子句匹配的所有 salesid 的总数，请删除`group by`：

```
select 
   SUM(CASE WHEN side= 'buy' THEN 1 ELSE 0 END) AS totalbuy, 
   SUM(CASE WHEN side= 'sell' THEN 1 ELSE 0 END) AS totalsell 
from car_orders 
where sales_id like '%%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:57:19.163

```
SELECT 
  sales_id, 
  totalbuy, 
  totalsell, 
  (totalbuy + totalsell) as total 
FROM
 (SELECT 
   sales_id, 
   SUM(CASE WHEN side= 'buy' THEN 1 ELSE 0 END) AS totalbuy, 
   SUM(CASE WHEN side= 'sell' THEN 1 ELSE 0 END) AS totalsell
   FROM car_orders 
   WHERE sales_id like '%%' 
   GROUP BY sales_id)q 
```

或者如果边只能是“买”或“卖”

```
SELECT 
  sales_id, 
  SUM(CASE WHEN side= 'buy' THEN 1 ELSE 0 END) AS totalbuy, 
  SUM(CASE WHEN side= 'sell' THEN 1 ELSE 0 END) AS totalsell,
  COUNT(*) as total
FROM car_orders 
WHERE sales_id like '%%' 
GROUP BY sales_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T15:58:04.187

```
select sales_id, 
   SUM(CASE WHEN side= 'buy' THEN 1 ELSE 0 END) AS totalbuy, 
   SUM(CASE WHEN side= 'sell' THEN 1 ELSE 0 END) AS totalsell,
   SUM(1) as totalbuyplussell 
from car_orders 
where sales_id like '%%' 
GROUP BY sales_id 
```

假设方 = 买入或卖出。

# javascript - JSlint Jquery 错误 - 预期 }

> ID：13180771
> 
> 赞同：0
> 
> 时间：2012-11-01T15:55:07.780
> 
> 标签：javascript, jquery

我正在使用别人的所见即所得编辑器代码，但 JSlint 说有两个错误。我想知道是否有人可以帮助解释/修复它们。

这是代码：http: [//jsfiddle.net/sCATj/40/](http://jsfiddle.net/sCATj/40/)

JSlint 说的错误是：

```
Error:
Problem at line 3 character 40: Expected '{' and instead saw 'return'.
if (!(array instanceof Array)) return;

Problem at line 4 character 25: Cannot set property 'first' of undefined 
```

我不知道jquery。我应该只放一个}而不是返回吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T15:59:50.927

JSLint 是一个 Lint，而不是一个普通的语法检查器。

[它要求所有`if`语句都与*块*而不是*语句相关联*](http://www.jslint.com/lint.html#required)

这是有效的 JavaScript：

```
if (foo)
    return something; 
```

这是更易于维护的 JavaScript（并且 JSLint 要求）：

```
if (foo) {
    return something;
} 
```

主要原因是，如果稍后编辑代码以添加另一个语句，编辑器可能不会注意到大括号丢失并执行以下操作：

```
if (foo)
    bar = foo;
    return something; 
```

这给出了相同的结果：

```
if (foo) {
    bar = foo;
}
return something; 
```

而不是想要的：

```
if (foo) {
    bar = foo;
    return something;
} 
```

避免捷径（尤其是那些有条件的捷径（**如果**只有一个语句，可以省略大括号））是一种防御编程形式，可以减少引入的错误的变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:57:37.660

从技术上讲，如果块内只有一个语句，您可以省略花括号`if`。

您可以放心地忽略此“错误”。

# c# - 创建公共谓词函数

> ID：13180774
> 
> 赞同：30
> 
> 时间：2012-11-01T15:55:29.220
> 
> 标签：c#, linq-to-sql

首先，我不确定用什么术语来问这个问题，这可能就是为什么我没有通过搜索自己找到答案的原因。

所以我正在使用 Linq to SQL (C#, .Net 4)，我想获得一个符合条件的所有用户的列表，我会做这样的基本操作：

```
var users = DataContext.Users.Where(x => x.Criteria1 == "something"); 
```

但在这种情况下，我想匹配一些字段，问题是这些特定字段是一个常见的检查，我希望能够创建一个专用函数，我可以在我的任何用户查询中使用它来检查这个匹配。

为了更好地解释这一点，让我们举个例子：假设一个用户有 5 个标志，我想要一个通用的检查来查看是否设置了这些标志中的*任何一个。*所以我可以这样写我的查询：

```
var users = DataContext.Users.Where(x => x.Flag1 || x.Flag2 || x.Flag3 || x.Flag4 || x.Flag5); 
```

但是我想做的是分离出“5标志检查”，这样我也可以在其他查​​询中使用它，最终我想使用类似的东西：

```
var users = DataContext.Users.Where(x => x.Criteria1 == "something" && CheckForFlags(x)); 
```

我已经通过具有这样的功能尝试了这一点：

```
static bool CheckForFlags(User user)
{
   return user.Flag1 || user.Flag2 || user.Flag3 || user.Flag4 || user.Flag5;
} 
```

但我收到一个错误：

> “方法 'Boolean CheckForFlags(User)' 不支持对 SQL 的转换。”

...这是有道理的，但是我可以做些什么来使这项工作按我想要的方式工作吗？或者这是一个限制，因为我使用的是 Linq to SQL，实际上它可以与 Linq to Objects 一起使用？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-11-01T16:18:05.823

LINQ to SQL 如何处理表达式的巧妙之处在于，您实际上可以在代码的其他地方构建表达式并在查询中引用它们。你为什么不尝试这样的事情：

```
public static class Predicates
{
    public static Expression<Func<User, bool>> CheckForFlags()
    {
        return (user => user.Flag1 || user.Flag2 || user.Flag3 ||
                        user.Flag4 || user.Flag5);
    }

    public static Expression<Func<User, bool>> CheckForCriteria(string value)
    {
        return (user => user.Criteria1 == value);
    }
} 
```

一旦定义了谓词，就很容易在查询中使用它们。

```
var users = DataContext.Users
    .Where(Predicates.CheckForFlags())
    .Where(Predicates.CheckForCriteria("something")); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T16:10:49.337

你试过 PredicateBuilder 吗？我已经一年多没有使用它了，但我发现它在编写“或在哪里”查询时很有效。

[http://www.albahari.com/nutshell/predicatebuilder.aspx](http://www.albahari.com/nutshell/predicatebuilder.aspx)

他们页面上的一个例子：

```
IQueryable<Product> SearchProducts (params string[] keywords)
{
  var predicate = PredicateBuilder.False<Product>();

  foreach (string keyword in keywords)
  {
    string temp = keyword;
    predicate = predicate.Or (p => p.Description.Contains (temp));
  }
  return dataContext.Products.Where (predicate);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T16:08:23.633

我*认为*这会起作用，并且我*认为*我已经在我的 Linq-to-SQL 项目中使用了它，但是我找不到一个示例。如果没有，请告诉我。

* * *

与其创建函数，不如在`Users`对象上创建一个新属性：

```
partial class Users {
   bool CheckForFlags
    {
       get { 
          return Flag1 || Flag2 || Flag3 || Flag4 || Flag5;
       }
    }
} 
```

那么你应该能够做到

```
var users = DataContext.Users.Where(x => x.CheckForFlags); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T16:08:56.850

据我所知，有两种可能的方法可以做到这一点。

快速简单的方法是在 SQL 执行后过滤结果，如下所示：

```
var users = DataContext.Users.Where(x => x.Criteria1 == "something");
    .ToEnumerable()
    .Where(x => CheckForFlags(x)); 
```

但是，这在性能方面非常差。它将返回数据库中仅匹配第一个条件的所有行，然后在客户端的内存中过滤结果。功能齐全，但远非最佳。

第二个**更高效**的选项是在数据库本身上创建一个 UDF 并从 LINQ 调用它。例如看[这个问题](https://stackoverflow.com/questions/1698921/linq-to-sql-custom-function)。明显的缺点是它将代码移动到数据库中，这是没有人喜欢的（出于许多正当理由）。

很可能还有其他可行的解决方案，但这是我所知道的仅有的两个。

# facebook - 使用 php sdk 登录 facebook 不会返回有效的 $user

> ID：13180777
> 
> 赞同：0
> 
> 时间：2012-11-01T15:55:39.433
> 
> 标签：facebook, facebook-graph-api

我正在尝试仅使用 php sdk 登录 facebook 应用程序。为什么php身份验证不起作用。->获取用户（）；始终返回零。

```
 <?php

// Provides access to app specific values such as your app id and app secret.
// Defined in 'AppInfo.php'
require_once('AppInfo.php');

// Enforce https on production
if (substr(AppInfo::getUrl(), 0, 8) != 'https://' && $_SERVER['REMOTE_ADDR'] != '127.0.0.1') {
  header('Location: https://'. $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI']);
  exit();
}

// This provides access to helper functions defined in 'utils.php'
require_once('utils.php');
require_once('sdk/src/facebook.php');

$facebook = new Facebook(array(
  'appId'  => AppInfo::appID(),
  'secret' => AppInfo::appSecret(),
  'sharedSession' => true,
  'trustForwarded' => true,
        'cookie' => true
));

$auth_url = $facebook->getLoginUrl(array(
        'scope' => 'email,publish_stream'       
));

$user = $facebook->getUser();

if (empty($user)) {
    echo("<script> top.location.href='" . $auth_url . "'</script>");
} else {
    echo ("Welcome User: " . $user);
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:09:39.887

您没有将 acces_token 设置为 facebook 对象。当用户在认证后被重定向到你的页面时，你应该在你的`$facebook`对象中设置用户 access_token 然后调用`$facebook->getUser()`

您可以执行以下操作：

```
if(isset($_GET['code'])){
  $access_token = $facebook->getAccessTokenFromCode($_GET['code']);
  $facebook->setAccessToken($access_token);
}
$user = $facebook->getUser(); 
```

# java - 使用 Joox 解析 Xml 字符串

> ID：13180778
> 
> 赞同：1
> 
> 时间：2012-11-01T15:55:39.497
> 
> 标签：java, xml, joox

如何`String`使用[jOOx](https://github.com/jOOQ/jOOX)解析 Xml ？parse 方法接受 String uri，但不接受 Xml `String`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T17:24:51.663

看起来你可以使用`JOOX` [类](https://github.com/jOOQ/jOOX/blob/master/jOOX/src/main/java/org/joox/JOOX.java)和[StringReader](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/StringReader.html)来做到这一点。例如：

```
String xml = "<?xml version='1.0'?><root><child attr='attr' /></root>";
StringReader sr = new StringReader( xml );
Match m = JOOX.builder().parse( sr ); 
```

请参阅 JOOX 使用的[DocumentBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/parsers/DocumentBuilder.html) API。

您可能必须将其转换为`StringReader`等价`InputSource`物，但这是一个相对微不足道的转换。从测试用例：

```
 xmlExampleString = IOUtil.toString(JOOXTest.class.getResourceAsStream("/example.xml"));
    xmlExampleDocument = builder.parse(new ByteArrayInputStream(xmlExampleString.getBytes())); 
```

在这种情况下，您可以编写：

```
String xml = "<?xml version='1.0'?><root><child attr='attr' /></root>";
StringReader sr = new StringReader( xml );
ByteArrayInputStream bais = new ByteArrayInputStream( new InputStreamReader( sr ) );
document = builder.parse( bais ); 
```

那应该让你开始。请注意，可能有更简单的方法可以将字符串转换为输入流。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-02T07:48:55.823

在最简单的形式中，它看起来像这样

```
// Parse the document from string
Document document = $(new StringReader("<?xml version='1.0'?><root><child attr='attr' /></root>")).document(); 
```

然后做你的匹配

```
// Wrap the document with the jOOX API and find root element
Match m = $(document).find("root"); 
```

# jquery - jquery + 跨域 + ajax + webservice 调用

> ID：13180779
> 
> 赞同：0
> 
> 时间：2012-11-01T15:55:47.223
> 
> 标签：jquery, ajax

我的网络服务网址是[http://www.webservicex.net/globalweather.asmx](http://www.webservicex.net/globalweather.asmx)

操作是 GetCitiesByCountry

```
$.ajax({
            type: 'POST',
            url: "http://www.webservicex.net/globalweather.asmx?op=GetCitiesByCountry",
             data: "{'CountryName':'" + user + "'}",
            contentType: "application/json; charset=utf-8",
            dataType: "jsonp",
            crossDomain: true,
            success: function (msg, status) {
                alert("successful");
                console.log(msg.d);
            },
            error: function (msg, status) {
                alert("failure");
                console.log("failure");
                console.log(msg);
                $('#myplace').html("The status is " + status + " with msg= " + msg + " .<br />" + msg.statusText + " .<br />" + msg.responseText + " .<br />" + msg.status);
            }
        }); 
```

但我收到以下错误。

```
The status is parsererror with msg= [object Object] .
success .
undefined .
200 
```

当我将“印度”作为输入时。

如何解决这个问题..提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T06:03:15.927

我用来获取 jsonp 的 url 实际上并没有返回 json 响应。谢谢@SLaks

[单击此处](http://api.geonames.org/citiesJSON?north=44.1&south=-9.9&east=-22.4&west=55.2&lang=de&username=demo) 如果有人想尝试，此 url 将返回 json。

# database - Spring H2 嵌入式数据库文件？

> ID：13180781
> 
> 赞同：10
> 
> 时间：2012-11-01T15:55:51.540
> 
> 标签：database, spring, h2

我目前使用嵌入式码头和 H2 数据库在 maven 上运行我的 petproject：

```
<jdbc:embedded-database id="dataSource" type="H2">
   <jdbc:script location="/WEB-INF/database.sql"/>
</jdbc:embedded-database> 
```

每次运行服务器时，此设置都会重置我的数据库。我想将数据库保存为磁盘中的文件，这样我就不会在每次服务器启动时丢失数据。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T13:17:37.267

您可以通过连接字符串来控制它。

```
jdbc:h2:~/test; # saves to the file ~/test
jdbc:h2:mem:db1 # in memory 
```

更多信息[在这里](http://www.h2database.com/html/features.html#in_memory_databases)。

编辑：

似乎连接字符串在 spring H2 配置中是[硬编码的，所以我假设这意味着您必须通过扩展](https://fisheye.springsource.org/browse/~br=3.2.0.RC1/spring-framework/spring-jdbc/src/main/java/org/springframework/jdbc/datasource/embedded/H2EmbeddedDatabaseConfigurer.java?r=02a4473c62d8240837bec297f0a1f3cb67ef8a7b)[EmbeddedDatabaseConfigurer](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/jdbc/datasource/embedded/EmbeddedDatabaseConfigurer.html)来编写自己的实现，假设在`H2EmbeddedDatabaseConfigurer`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-01-27T16:34:31.867

老问题，但我花了很多时间弄清楚如何将嵌入式 H2 数据库保存到文件中，我想分享我学到的东西。

正如@ebaxt 所说，您可以在连接字符串中配置嵌入式数据库的位置。如果要将其保存在文件系统中，请使用`~/`语法：

```
jdbc:h2:~/example/embeddedDb 
```

如果要将其保存在项目文件夹中，则必须使用`./`语法

```
jdbc:h2:./example/embeddedDb 
```

这将在您的主文件夹或项目根文件夹内的文件夹`embeddedDb.mv.db`中创建文件。`example`但这会在每次应用程序启动时清除数据库。为了避免这种情况，我使用该`INIT`属性告诉 H2 仅在它不存在时才创建模式（在我的情况下为队列）：

```
INIT=create schema if not exists Queue; 
```

然后在您的 DDL 脚本中，您必须使用 create table if not exists 语句来创建所有表：

```
// create-db.sql
    CREATE TABLE IF NOT EXISTS Queue (
       id INTEGER PRIMARY KEY AUTO_INCREMENT,
       ...
   ); 
```

并告诉 H2 每次获得连接时运行脚本：

```
// if you want to store the script in the file system
runscript from '~/example/create-db.sql'

// if you want to store the script in the project folder
runscript from './example/create-db.sql' 
```

总结一下，这就是以 java 注释方式创建数据库（EmbeddedDb）所必须做的：

```
 import org.springframework.jdbc.datasource.DriverManagerDataSource;

    @Bean
    DataSource datasource(){

        DriverManagerDataSource dataSource = new DriverManagerDataSource();
        dataSource.setDriverClassName("org.h2.Driver");
        dataSource.setUsername("embedded");
        dataSource.setPassword("embedded");
        dataSource.setUrl("jdbc:h2:~/example/EmbeddedDb;INIT=create schema if not exists Queue\\; runscript from '~/example/create-db.sql'");

        return dataSource;
    } 
```

或使用 XML：

```
 <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource"
        destroy-method="close">
        <property name="driverClassName" value="org.h2.Driver" />
        <property name="url" value="jdbc:h2:~/example/EmbeddedDb;INIT=create schema if not exists Queue\; runscript from '~/example/create-db.sql'" />
        <property name="username" value="embedded" />
        <property name="password" value="embedded" />
    </bean> 
```

使用此方法，仅当应用程序第一次运行或数据库文件不存在时才会创建数据库。否则只会加载连接。

您还可以使用[hsqldb](https://mvnrepository.com/artifact/org.hsqldb/hsqldb)库通过一个漂亮的界面监控数据库状态，添加以下 bean：

```
 import org.h2.tools.Server;
    import org.hsqldb.util.DatabaseManagerSwing;

    @Bean(initMethod = "start", destroyMethod = "stop")
    public Server startDBManager() throws SQLException {
        DatabaseManagerSwing.main(new String[] { "--url", "jdbc:h2:~/example/EmbeddedDb", "--user", "embedded", "--password", "embedded" });
        return Server.createWebServer();
    } 
```

参考：

[http://www.mkyong.com/spring/spring-embedded-database-examples/](http://www.mkyong.com/spring/spring-embedded-database-examples/)

[http://www.h2database.com/html/features.html#embedded_databases](http://www.h2database.com/html/features.html#embedded_databases)（在连接部分执行 SQL）

# javascript - 如何将结构从 V8 C++ 函数返回到 javascript 模块

> ID：13180783
> 
> 赞同：7
> 
> 时间：2012-11-01T15:55:54.050
> 
> 标签：javascript, visual-c++, v8

我是 Javascript 和 V8 库的新手。我的要求是调用 C++ 函数并将 C 结构返回给 Javascript 模块。

```
struct empDetails {
    int empNo;
    string empName;
};

v8::Handle<v8::Value> getDetails(const v8::Arguments &args) {
    if ((args.Length() != 1) || !args[0]->IsUint32()) {
        return v8::ThrowException(v8::Exception::Error    
                (v8::String::New("Invalid> arguments.")));
    }
    uint32_t userId = args[0]->ToUint32()->Value();
    empDetails e;
    company::GetEmpdetails(userId, e); // other static function in my project
    return e;
} 
```

在返回声明中，我收到错误消息。谁能告诉我如何从 V8 C++ 函数返回一个结构。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T03:20:18.153

您想创建 Javascript 对象并用您的数据填充它的每个成员。

```
#define function(name) v8::Handle<v8::Value> name(const v8::Arguments& a)

    function (example_object) {
        v8::HandleScope handle_scope;
        Handle<Object> Result = Object::New();
        Result->Set(String::New("name"), String::New("Stackoverflow"));
        Result->Set(String::New("url"), String::New("http://stackoverflow.com"));
        Result->Set(String::New("javascript_tagged"), Number::New(317566));
        return handle_scope.Close(Result);
    } 
```

从 Javascript 调用：

```
log(JSON.stringify(example_object())) 
```

输出

```
{"name":"Stackoverflow","url":"http://stackoverflow.com","javascript_tagged":317566} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T09:35:26.360

当你想创建 node.js 模块时，

```
npm install ref
npm install ref-array
npm install ref-struct 
```

在你的 js 源代码中：

```
var ref = require('ref');
var ArrayType = require('ref-array')
var StructType = require('ref-struct');
var empDetails = StructType({
    empNo: ref.types.int,
    empName: ArrayType('char', STRING_LENGTH)
});
var result = new empDetails;
getDetails(999, result.ref()); 
```

在您的模块源代码中：

```
struct empDetails {
    int empNo;
    char empName[STRING_LENGTH];
};
v8::Handle<v8::Value> getDetails(const v8::Arguments &args) {
    if((args.Length() != 2) || !args[0]->IsUint32()){
        return v8::ThrowException(v8::Exception::Error    
            (v8::String::New("Invalid> arguments.")));
    }
    uint32_t userId = args[0]->ToUint32()->Value();
    struct empDetails src;
    company::GetEmpdetails(userId, src);
    v8::Handle<v8::Object> dst = args[1]->ToObject();
    if(node::Buffer::Length(dst) >= sizeof(struct empDetails))
        memcpy(node::Buffer::Data(dst), &src, sizeof(struct empDetails));
    return args.This();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-02T12:12:47.140

C++

```
struct empDetails {
    int empNo;
    string empName;
};

void getDetails(const FunctionCallbackInfo<Value>& args) {

    Isolate* isolate = args.GetIsolate();
    HandleScope scope(isolate);

    if(args.Length() != 1) {
        isolate->ThrowException(Exception::TypeError(String::NewFromUtf8(isolate, "Wrong number of arguments")));
        return;
    } 

    if (!args[0]->IsNumber()) { 
        isolate->ThrowException(Exception::TypeError(String::NewFromUtf8(isolate, "Wrong arguments")));
        return;
    }

    int empId = args[0]->NumberValue();

    // You can call your c++ function here instead of a returning a dummy struct
    empDetails e;
    e.empNo = empId;
    e.empName "Hello World";

    Local<Object> result = Object::New(isolate);
    result->Set(String::NewFromUtf8(isolate, "empNo"), Number::New(isolate, e.empNo));
    result->Set(String::NewFromUtf8(isolate, "empName"), String::NewFromUtf8(isolate, e.empName.c_str()));

    args.GetReturnValue().Set(result);        

} 
```

Javascript

```
const emp = require('your-module')
var empDetails = obj.getDetails(123)
console.log("number:" + empDetails.empNo + " name: " + empDetails.empNo) 
```

# python - 在 Python 中，如何初始化/重新初始化关联数组（字典）？

> ID：13180784
> 
> 赞同：1
> 
> 时间：2012-11-01T15:55:57.683
> 
> 标签：python, dictionary

在我正在编写的 Python 程序中，我将使用一个关联数组（字典），它将年份值作为键，并将 12 个月观察的列表作为值。例如，在将我的数据读入字典后，我可能会得到一个看起来像这样的字典（3 个键指向 3 个包含 12 个值的列表）：

```
{ 1953:[34,39,29,12,16,14,35,42,44,31,22,29],
  1954:[30,31,32,11,19,22,31,41,34,37,25,22],
  1955:[35,36,37,15,19,25,30,45,38,39,21,26] } 
```

每次我将数据读入字典时，我可能有不同数量的键/值对。我想在循环的每次迭代开始时从一个空字典开始，该字典从文件中读取数据（为简单起见，假设它是一个逗号分隔的 13 个值列表，其中第一个是年份，然后是 12 个每月观察值）。我是 Python 新手，想学习在 Python 中做这类事情的最佳实践。在Java中我会这样做：

```
for (int i = 0; i < 3; i++)
{
    Map<String, List<String>> yearToObservationsMap= new HashMap<String, List<String>>();
    String line = bufferedReader.readLine();
    while (line != null)
    {
        line = bufferedReader.readLine();
        List<String> yearPlusObservations = line.split(",");
        String year = yearPlusObservations.remove(0); 
        yearToObservationsMap.put(year, yearPlusObservations);
    }

    // now I can work with the dictionary to process the data
} 
```

我的用例是每次使用字典时都需要在字典中有可变数量的条目，所以我想在每次加载之前重新初始化（或清空？）它。例如，在一次迭代中，我可能有 5 年的数据，下一次迭代将有 30 年的数据，下一次将有 17 年的数据。因此，在每次迭代中，我都想清除字典。但是我是否也想以一种给它一个明确的形式的方式声明字典，也就是说，总是知道它的键是年份，值总是12个整数的元素列表？

提前感谢您对理解这一点的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:59:06.833

只需打开文件，用'，'分割并将其传递给`dict`理解......

```
with open('your_file') as fin:
    lookup = {row[0]:row[1:] for row in (line.split(',') for line in fin)} 
```

或者，使用 CSV 模块（并且**正确地**（对我咳嗽），转换为 int）

```
with open('test.csv') as fin:
    csvin = csv.reader(fin)
    lookup = {col[0]:col[1:] for col in (map(int, row) for row in csvin)} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T16:21:02.487

我会反过来回答你的问题。你问：

> 但是我是否也想以一种给它一个明确的形式的方式声明字典，也就是说，总是知道它的键是年份，值总是12个整数的元素列表？

这个问题的答案是否定的。Python 是动态类型的，因此省去了 Java 中必需的类型注释。此外，字典可以包含（[不可变](http://en.wikipedia.org/wiki/Immutable_object)）对象的异构集合作为键，将字符串与整数混合等等，并且可以包含任何对象作为值。

至于重新初始化字典，您每次都可以创建一个新字典。但也有`.clear()`一种方法可以清空字典。如果您不想每次都创建新字典，无论出于何种原因，请使用`.clear()`.

您可以在其他答案中查看有关*如何*执行此操作的详细信息，但我想我会更直接地解决您的实际问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T16:00:12.337

像这样的东西：

```
In [4]: with open("data1.txt") as f:
    dic={}
    for line in f:
        spl=line.split(",")
        dic[spl[0]]=map(int,spl[1:]) 
    print dic
   ...:     
   ...:     
{'1955': [35, 36, 37, 15, 19, 25, 30, 45, 38, 39, 21, 26],
 '1954': [30, 31, 32, 11, 19, 22, 31, 41, 34, 37, 25, 22],
 '1953': [34, 39, 29, 12, 16, 14, 35, 42, 44, 31, 22, 29]} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T15:58:33.747

这是基本逻辑

```
answer = {}
with open('path/to/input') as f:
    for line in f:
        line = [int(i) for i in line.strip().split(',')]
        answer[line[0]] = line[1:] 
```

如果要处理多个文件，每个文件包含不同年数的数据，然后，将其包装到一个函数中：

```
def getData(infilepath):
    answer = {}
    with open(infilepath) as f:
        for line in f:
            line = [int(i) for i in line.strip().split(',')]
            answer[line[0]] = line[1:]
    return answer 
```

# javascript - jQuery .load 问题。不受父 javascript 文件的影响

> ID：13180785
> 
> 赞同：0
> 
> 时间：2012-11-01T15:56:01.030
> 
> 标签：javascript, jquery

尝试使用该`.load`函数加载文件时，该新加载的文件不受我正在加载的父文件中的 jQuery 的影响。不是`<script src=''></script>`在每个正在加载的页面中添加代码，有没有更好的方法让我的 javascript 文件在这些文件中工作？或者这是让 javascript 在新加载的文件中工作的唯一方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:06:03.360

这完全取决于您的脚本是如何设置的。没有脚本意味着没有确切的解决方案。

该[`.load()`](http://api.jquery.com/load/)方法在当前脚本运行时加载脚本。这意味着在加载文件时，您的脚本很可能已经运行完毕。

这就是我们有回调的原因。完成另一个操作后运行回调。

```
$.load(url, function(responseText, textStatus, XMLHttpRequest) {
    var paragraph = $('<p />').html(responseText);

    // append new paragraph
    $(document.body).append(paragraph);
});

// hide all paragraphs
$('p').css('display', 'none'); 
```

我可以想象你认为正在添加的段落会隐藏，因为我们隐藏了所有段落。

**错误的**

当你的段落被添加到正文中时，负责隐藏你的段落的行就已经完成了。因此，您必须（再次）执行回调中的操作，如下所示：

```
$.load(url, function(responseText, textStatus, XMLHttpRequest) {
    var paragraph = $('<p />').html(responseText);

    // append new paragraph
    $(document.body).append(paragraph);

    // do it again
    $('p').css('display', 'none');
});

// hide all paragraphs
$('p').css('display', 'none'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:04:50.853

听起来您正试图让事件处理程序在页面加载后绑定到元素？例如，您可能在父文档中有一些类似的东西：

```
$('#something').click(function(){ alert('You clicked me'); } 
```

这些事件处理程序立即“绑定”，不会影响使用 .load() 加载的元素。您必须做的是使用`live()`活页夹或`.on()`活页夹。`.on()`是首选，但开始习惯可能有点奇怪。

解决问题的最快方法是将事件绑定分别从`.click`、等更改`.change`为`.live('click', function(){} )`和`.live('change', function(){})`。

或者使用`on()`你应该做的正确方法：

```
$(document).on('click', '#element', function(){ alert('you clicked me'); }); 
```

您运行该`on`方法的元素应该是一个父容器，它不是通过`.load`您绑定的所有元素所在的位置加载的。`document`已经足够并且可以工作，但在性能方面它不是最好的

如果您发布代码，我们可以提供更量身定制的答案。我已尽力详细解释它，但我可能过于复杂了。因此，如果您有任何问题，那就问吧。

jQuery.on()：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

jQuery.live()：[http ://api.jquery.com/live/](http://api.jquery.com/live/)

# php - PHP忽略我的date.timezone？

> ID：13180786
> 
> 赞同：2
> 
> 时间：2012-11-01T15:56:11.943
> 
> 标签：php, apache, datetime, timezone

`time()`一直产生相同的时间戳，即使在我的 php.ini 中我一直在

`date.timezone = "Asia/Irkutsk"`

和

`date.timezone = "Europe/Belgrade"`

phpinfo():

```
date/time support   enabled
"Olson" Timezone Database Version   2012.3
Timezone Database   internal
Default timezone    Asia/Irkutsk 

date/time support   enabled
"Olson" Timezone Database Version   2012.3
Timezone Database   internal
Default timezone    Europe/Belgrade 
```

时间戳保持不变。怎么来的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:58:51.187

你做了错误的假设。

Unix 时间戳始终采用 UTC。没有例外。更改时区不会更改纪元的确切时刻（1970 年 1 月 1 日），因此从那时起的秒数将始终是“正确的”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:58:32.373

更改 php.ini 后需要重启 PHP

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-15T17:29:28.527

我遇到了这个问题并与我的主人交谈，他们解释说 php.ini 中的任何时区设置都被忽略，并且 .htaccess 文件必须更改如下；

将此添加到 .htaccess

```
php_value date.timezone "Europe/London" 
```

然后显示使用

```
echo date('d-m-Y H:i'); 
```

# java - Java Nice 格式双精度

> ID：13180792
> 
> 赞同：0
> 
> 时间：2012-11-01T15:56:34.547
> 
> 标签：java, string, double

如何将双精度格式化为字符串，以便显示所有（无限制）小数位（如果它们存在但不显示任何尾随 0）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:15:42.887

```
double x = ...;
DecimalFormat fmt = new DecimalFormat();
fmt.setMinimumFractionDigits(0);
fmt.setMaximumFractionDigits(Integer.MAX_VALUE);
System.out.println(fmt.format(x)); 
```

Integer.MAX_VALUE 是一个愚蠢的数字，但任何足够大的数字都可以，正如您从 setMaximumFractionDigits javadoc 中看到的那样：

> 设置数字的小数部分允许的最大位数。对于除 BigInteger 和 BigDecimal 对象以外的格式化数字，使用 newValue 和 340 中的较低值。负输入值替换为 0。

# php - 来自数据库的 UTF8 无法正确显示 (Codeigniter)

> ID：13180793
> 
> 赞同：0
> 
> 时间：2012-11-01T15:56:33.807
> 
> 标签：php, mysql, codeigniter, utf-8, collation

我有一个由 Codeigniter、Mysql 和 Apache 组成的网络服务器设置。

一个页面加载我从一个 mysql 表中获取数据，如下所示：

```
CREATE TABLE IF NOT EXISTS `names_table` (
`id` integer NOT NULL AUTO_INCREMENT PRIMARY KEY,
....
`name` varchar(180) NOT NULL,
....
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_bin; 
```

服务器端的数据显示为

```
echo $this->db->get_where('names_table', array('id' => '6'))->result()->name; 
```

提供给客户端的页面标头通过以下方式发送

```
header("Content-Type: text/html; charset=UTF-8"); 
```

另外我将元信息设置为

```
<meta http-equiv="content-type" content="text/html; charset=utf-8"> 
```

服务于客户端请求的 PHP 文件以 UTF-8 编码，没有 BOM，但名称显示为**Schönefeld**虽然应该是**Schönefeld**。

对应id的name字段里面存储`names_table`了*536368c383c2b66e6566656c64*。

我花了几个小时寻找可能的解决方案，并且我已经应用了迄今为止我发现的所有提示，但没有工作。非常感谢。

* * *

编辑：

在向客户端显示数据之前，我运行

```
mb_detect_encoding($name_field); 
```

它说它是UTF-8。我也在 Chrome 中查看设置了 UTF-8 编码的页面。

如果我理解正确，我不应该调用`utf8_decode()`从数据库返回的变量，因为浏览器已经知道文档是 UTF8 格式并采取适当的措施对其进行解码，对吗？

**解决**

事实证明，表中的数据没有正确导入。我必须使用关于它的字符集的明确声明，就像[这里](https://stackoverflow.com/questions/2133198/importing-bulk-csv-data-in-utf-8-into-mysql)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:34:38.047

将连接设置为 UTF-8。

MySQL：

```
SET NAMES utf8; 
```

使用 mysql：

```
mysql_set_charset('utf8', $connection); 
```

使用 mysqli：

```
$connection->set_charset('utf8'); 
```

等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T23:47:07.067

确保您的文件已保存为**没有 BOM 的 UTF-8**。

这取决于您使用的 IDE，但例如在 Notepad++ 中有一个编码文件菜单。

# javascript - 防止更改 Jquery 中的文本框值

> ID：13180795
> 
> 赞同：0
> 
> 时间：2012-11-01T15:56:41.037
> 
> 标签：javascript, jquery, asp.net

> **可能重复：**
> [使用 jquery 禁用文本框？](https://stackoverflow.com/questions/1648901/disable-textbox-using-jquery)

如何防止在`document.getElementsByName()`. 有一个这样的选项。

```
document.getElementById("Quantity").defaultValue; 
```

是否有任何选项可以阻止我的文本框的值在`document.getElementsByName()`. 发出警报后，我想让文本框的值在条件不匹配时保持不变。我的代码：

```
 $(function () {
            $('input[name=Quantity]').blur(allownumbers);
        });
        function allownumbers() {
            var elements = document.getElementsByName('Quantity');
            for (var i = 0; i < elements.length; i++) {
                if (elements[i].value == '' || elements[i].value < 1) {
                    alert('Please enter a valid value');
                    return false;
                }
                else if (elements[i].value > 100) {
                    alert('There is no enough inventory for this product to fulfill your order');
                    return false;
                }
            }
            return true;
        }
  <input id="Quantity" type="text" name="Quantity"/> 
```

有什么建议么。

编辑：我尝试使用此代码。

```
$("#textbox1").removeAttr("disabled"); 
```

如果我输入 200。警报出现并且文本框被禁用，所以我什至无法在文本框中重新输入正确的值。如何恢复我的文本框的默认值。?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:05:43.973

就像发布的 adamb 一样，您可以禁用输入。另一种方法是在输入上设置一个属性（可能 defaultval='the default'）并用该`defaultval`属性替换输入的值。

在您的示例中，您的客户最好将输入实际设置为限制。例如，你的条件是 100 是最大值，所以如果有人输入一个更大的数字，比如 200，它会将框更改为可能的最大值，即 100。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:11:39.090

您可以将原始值存储在变量或隐藏字段中，然后在更新失败时替换该值。如果页面加载时范围是已知的，则可以使用范围验证。

对于模糊验证，警报通常过于突兀。

# angularjs - angularjs 中的 ng-model 属性

> ID：13180797
> 
> 赞同：2
> 
> 时间：2012-11-01T15:56:53.803
> 
> 标签：angularjs

我的html代码；

```
 <!doctype html>
            <html ng-app ng-controller="peopleController">
              <head>
                <script src="js/angular.min.js" type="text/javascript"></script>
                <script>
                function peopleController($scope){
                        $scope.people = [
                            { name : "aa" , age : 14 },
                            { name : "ss" , age : 11},
                            { name : "dd" , age : 12},
                            { name : "ff" , age : 16},
                            { name : "gg" , age : 13}
                        ];

                        $scope.keys=(function(obj){
                            var keys = [];
                            for(var key in obj){
                                console.log(obj);
                                if(obj.hasOwnProperty(key)){ keys.push(key);}
                            }
                            return keys;
                        })($scope.people[0]);
                    }
                </script>
                <title>aasss</title>
              </head>
              <body >
              <select ng-model="aaa">
                <option ng-repeat="x in keys" value="{{x}}">{{x}}</option>
              </select> 
              </body>
            </html> 
```

为选择元素生成 html 部分；

```
 <select ng-model="aaa" class="ng-pristine ng-valid">
                <option value="? undefined:undefined ?"></option>
                <!-- ngRepeat: x in keys -->
                <option ng-repeat="x in keys" value="name" class="ng-scope ng-binding">name</option>
                <option ng-repeat="x in keys" value="age" class="ng-scope ng-binding">age</option>
            </select> 
```

当我从选择元素中删除 ng-model="aaa" 属性时，问题不会出现。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T17:30:19.323

您不应该在 select 中使用 ng-repeat，review [select doc](http://docs.angularjs.org/api/ng.directive%3aselect)。select 有自己的理解机制。另外，不确定为什么选择器中有 2 ng-repeat。似乎您可能想要封装 2 组键。

# php - 使用 PHP CURL 发布 JSON

> ID：13180801
> 
> 赞同：1
> 
> 时间：2012-11-01T15:57:14.873
> 
> 标签：php, json, curl

我的任务是发布到只接受 JSON 的 API。我正在使用 PHP 的 CURL 来完成此操作。

我之前已经发布到 API 没有任何问题，但从来没有使用 JSON，这是我不熟悉的东西，我试图自己研究并解决问题，但我没有任何运气。

在与我试图发帖的公司的某人交谈时，我被告知我的服务器正在访问他们的服务器，唯一的错误是我的帖子正文没有正确格式化 JSON ..（这家公司没有人知道 php :(所以那里没有帮助）

这是我的代码：

```
$jarr = array("ProviderID" => "L005A", "FirstName" => $first, 
           "LastName" => $last, "PhoneNumber" => $PhoneNumber, 
           "PhoneNumberType" => $PhoneNumberType);

$content = json_encode($jarr);

$curl_handle = curl_init("URL Im posting to");
 curl_setopt($curl_handle, CURLOPT_HTTPHEADER, array(
'Accept: application/json;charset=utf-8',
    'Content-Type: application/json;charset=utf-8',
    'Expect: 100-continue',
    'Connection: Keep-Alive'));
    curl_setopt($curl_handle, CURLOPT_HEADER, 1);
    curl_setopt($curl_handle, CURLOPT_POST, 0);
    curl_setopt($curl_handle, CURLOPT_POSTFIELDS, $content);
    curl_setopt($curl_handle, CURLOPT_FOLLOWLOCATION, 0);
    curl_setopt($curl_handle, CURLOPT_RETURNTRANSFER, 1);
    $first = curl_exec($curl_handle);
    curl_close($curl_handle);
    echo "Result ";
    echo $first; 
```

从我得到的文档中，我必须遵循的唯一参数是：
方法：发布

标头：
接受：application/json；charset=utf-8
内容类型：application/json；charset=utf-8
期望：100-continue
连接：Keep-Alive

目前，当我执行脚本时，我得到以下回报：

> 结果 HTTP/1.1 100 继续 HTTP/1.1 400 错误请求 Cache-Control: no-cache Pragma: no-cache Content-Type: application/json; charset=utf-8 过期：-1 服务器：Microsoft-IIS/7.5 X-AspNet-Version：4.0.30319 X-Powered-By：ASP.NET 日期：星期四，2012 年 11 月 1 日 15:43:18 GMT 内容长度: 26 {"record.ProviderID":[""]}

所以导致 400 错误是因为我的正文格式不正确。我的问题，我将如何格式化我需要以正确的 JSON 格式发送的数据？

根据我的阅读，这段代码应该这样做，但它没有：

```
$jarr = array("ProviderID" => "L005A", "FirstName" => $first,
           "LastName" => $last, "PhoneNumber" => $PhoneNumber,
           "PhoneNumberType" => $PhoneNumberType);

$content = json_encode($jarr); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T06:33:38.997

我遇到了同样的问题。调试后发现，在发送 JSON 字符串时，没有引用或双引号 Integer 值是罪魁祸首。您需要将双引号整数值作为字符串发送。

例如：

```
{"PhoneNumber":9876543210} 
```

或者

```
{"PhoneNumber":"9876543210"} 
```

不管用。

但

```
{"PhoneNumber":"N_9876543210"} 
```

将工作。

一旦我弄清楚这个问题的根本原因是什么，就会立即更新。如果有人知道，请尽快更新。

编辑：通过 URL 编码解决的问题。我希望它也能解决你的情况。

# sass - Sass：为输入字段创建 mixin

> ID：13180807
> 
> 赞同：3
> 
> 时间：2012-11-01T15:57:43.657
> 
> 标签：sass, compass-sass

我是 Sass 的新手，所以我需要帮助来为我的输入字段创建混合。

但是，如果有人知道已经为此制作的 mixin，或者 Compass 有一个可以完成此操作的 mixin，请告诉我（我们）。

我的 .scss 文件中目前有以下 CSS 规则：

```
input[type="text"],
input[type="password"],
input[type="email"],
input[type="search"],
input[type="url"],
textarea, 
select { ... }

input[type="text"]:hover,
input[type="text"]:focus,
input[type="password"]:hover,
input[type="password"]:focus,
input[type="email"]:hover,
input[type="email"]:focus,
input[type="search"]:hover,
input[type="search"]:focus,
input[type="url"]:hover,
input[type="url"]:focus,
textarea:hover,
textarea:focus,
select:hover,
select:focus  { ... } 
```

现在，正如我们所知，HTML5 提供了一组不错的新[输入类型](http://www.456bereastreet.com/archive/201004/html5_input_types/)，但现在我不需要添加像`date`,`month`或之类的输入类型`week`，这就是为什么我没有“还”列出它们的原因。

因此，如果将来我需要添加它们，我将更新您在上面看到的列表。

然而，我的问题是我觉得我在这里重复自己，另外，每次为我添加到列表中的每种新输入类型选择项目、复制、粘贴和编辑的工作都是愚蠢的，我几乎可以肯定Sass 的 mixin 可以对此有所帮助。问题是为此创建一个 mixin 老实说让我很困惑。

我在这里和网上寻找类似的东西，但找不到任何东西。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T16:57:20.570

好的，我最终找到了 Sass 混合库**[Bourbon](http://thoughtbot.github.com/bourbon/)**。

[他们有一个HTML5 输入类型](http://thoughtbot.github.com/bourbon/#html5-input-types)的“附加组件” （这里是他们创建[的 .scss 文件的链接](https://github.com/thoughtbot/bourbon/blob/master/app/assets/stylesheets/addons/_html5-input-types.scss)），但它没有`:hover`或`:focus`伪元素。所以我添加了它们。

老实说，我不知道我所做的是否是编写这个 mixin 的最佳方式，但它的效果非常好：

```
//************************************************************************//
// Generate a variable ($all-text-inputs) with a list of all html5
// input types that have a text-based input, excluding textarea.
// http://diveintohtml5.org/forms.html
//************************************************************************//
$inputs-list: 'input[type="email"]',
              'input[type="number"]',
              'input[type="password"]',
              'input[type="search"]',
              'input[type="tel"]',
              'input[type="text"]',
              'input[type="url"]',

              // Webkit & Gecko may change the display of these in the future
              'input[type="color"]',
              'input[type="date"]',
              'input[type="datetime"]',
              'input[type="datetime-local"]',
              'input[type="month"]',
              'input[type="time"]',
              'input[type="week"]';

$unquoted-inputs-list: ();

@each $input-type in $inputs-list {
  $unquoted-inputs-list: append($unquoted-inputs-list, unquote($input-type), comma);
}

$all-text-inputs: $unquoted-inputs-list;

// You must use interpolation on the variable:
// #{$all-text-inputs}
//************************************************************************//
//   #{$all-text-inputs}, textarea {
//     border: 1px solid red;
//   }

// :hover and :focus pseudo elements
// Added by Ricardo Zea
// http://ricardozea.net
// @ricardozea
// Tracking: http://stackoverflow.com/questions/13180807/sass-create-mixin-for-input-fields

$inputs-list-hf:'input[type="email"]:hover',
                'input[type="number"]:hover',
                'input[type="password"]:hover',
                'input[type="search"]:hover',
                'input[type="tel"]:hover',
                'input[type="text"]:hover',
                'input[type="url"]:hover',
                'input[type="color"]:hover',
                'input[type="date"]:hover',
                'input[type="datetime"]:hover',
                'input[type="datetime-local"]:hover',
                'input[type="month"]:hover',
                'input[type="time"]:hover',
                'input[type="week"]:hover',

                'input[type="email"]:focus',
                'input[type="number"]:focus',
                'input[type="password"]:focus',
                'input[type="search"]:focus',
                'input[type="tel"]:focus',
                'input[type="text"]:focus',
                'input[type="url"]:focus',
                'input[type="color"]:focus',
                'input[type="date"]:focus',
                'input[type="datetime"]:focus',
                'input[type="datetime-local"]:focus',
                'input[type="month"]:focus',
                'input[type="time"]:focus',
                'input[type="week"]:focus';

$unquoted-inputs-list-hf: ();

@each $input-type-hf in $inputs-list-hf {
  $unquoted-inputs-list-hf: append($unquoted-inputs-list-hf, unquote($input-type-hf), comma);
}

$all-text-inputs-hf: $unquoted-inputs-list-hf;

// You must use interpolation on the variable:
// #{$all-text-inputs-hf}
//************************************************************************//
//   #{$all-text-inputs-hf}, textarea {
//     border: 1px solid red;
//   } 
```

如您所见，我复制并粘贴了原始混合，并添加了前缀`-hf`，当然还有`:hover`and`:focus`到新规则中。

在我的 .scss 文件中，我添加了这个*@import*：

`@import "html5-input-types";`（不需要下划线`_`或文件扩展名`.scss`）

在我的 .scss 文件的“表单”部分中，我添加了以下规则：

```
/*Normal state*/
#{$all-text-inputs}, 
textarea,
select { ... }

/*:hover and :focus states*/
#{$all-text-inputs-hf}, 
textarea:hover, 
textarea:focus,
select:hover,
select:focus { ... } 
```

我知道我在 mixin 文件（*html5-input-types.scss*`textarea` ）之外有，但不确定我是否将它们包含在其中，必须考虑一下。`select`

 *无论如何，这对我来说效果很好，尽管如果将来有任何变化，我仍然需要更新*html5-input-types.scss*，但至少我处理这些输入字段的效率比以前更高。

希望我在这里所做的可以帮助其他人。

如果你们中的任何人有改进 mixin 的建议，请务必让我（我们）知道。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-14T21:25:23.677

万一有人出于同样的原因遇到这个问题。为什么不让 SASS 完成这项工作？

[代码笔](https://codepen.io/cschloegel/pen/dybXGwg?editors=1100#0)

```
$form-background: #f8f8f8;
$form-color: #000;
$form-border: 1px solid lighten($form-color, 50%);

$form-focus-background: darken($form-background, 10%);
$form-focus-color: #999;
$form-focus-border: 1px solid $form-color;

%input-styles {
    width: 15em;
    min-height: 30px;
    margin: 0 0 15px 15px;
    background: $form-background;
    color: $form-color;
    border: $form-border;
    transition: .2s ease-in-out;
    transition-property: color, background-color, border;
}

%input-styles--focus {
    background-color: $form-focus-background;
    color: $form-focus-color;
    border: $form-focus-border;
}

@mixin input-styles($styles, $focus_styles) {
    $types: 'email', 'number', 'radio', 'password', 'search', 'tel',
            'text', 'url', 'color', 'date', 'datetime',
            'datetime-local', 'month', 'time', 'week';

    @each $type in $types {
        input[type="#{$type}"] {
            @extend #{$styles};

            &:focus {
                @extend #{$focus_styles};
            }
        }
    }

    select,
    textarea {
        @extend #{$styles};

        &:focus {
            @extend #{$focus_styles};
        }
    }
}

@include input-styles('%input-styles', '%input-styles--focus'); 
```*

# java - 处理自己的滚动的 JTabel 替代方案

> ID：13180810
> 
> 赞同：1
> 
> 时间：2012-11-01T15:57:49.000
> 
> 标签：java, swing, jtable

我想知道是否有人知道基于 Swing 的 JTable 替代方案，它可以处理自己的滚动，而不必放在 JScrollPane 中。

让我解释一下为什么。我目前正在做一个项目，我需要以表格格式从数据库中显示多达 1.6 GB 的数据。我花了一周半的时间研究 JTable 及其所有相关的类。我所学到的让我相信 JTable 是不够的，原因如下。

数据集太大而无法在屏幕上显示的 JTable 需要放入 JScrollPane 中，该 JScrollPane 充当太大而无法在屏幕上显示的组件的移动窗口。这满足了能够拥有一个不使用分页的大得离谱的 JTable 的要求。但是，仍然会创建整个 JTable，这会导致要求 TableModel 提供所有数据。在这一点上我可能是错的，但我的实践经验和缺乏关于这些东西基础的文档表明我不是。

我需要一个 JTable，它会不断滚动从数据库中分页并在 TableModel 端缓存（只有大约 100-300 条记录）的巨大数据集，（注意！这是重要的部分）只要求在表的可见区域。我的经验表明，JScrollPane 中的标准 JTable 将要求提供所有数据，而不管什么是可见的，从而阻止任何类型的后端分页工作。告诉我我错了，给我看一个有效的反例，或者指向我需要的第三方组件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T18:45:27.867

对此没有通用解决方案，因为实现取决于您打算如何将数据模型划分为可管理的部分。正如[这里](https://stackoverflow.com/a/9069375/230513)`List<Record>`所建议的，您可以使用该`subList()`方法对任意一个进行分区。[您可以公开组成每个分区的单个模型，如此处](https://stackoverflow.com/a/8260663/230513)所示。另请参阅使用 SQL 的这种替代[方法。](https://stackoverflow.com/a/9068108/230513)

> 我需要连续滚动而不是分页。

您的实现`TableModel`可以使用`SwingWorker`不断更新视图的 a，如本[示例](https://sites.google.com/site/drjohnbmatthews/randomdata)或[API](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)中所示。

# php - 只显示可用变量但不显示 IF，这可能吗？

> ID：13180811
> 
> 赞同：1
> 
> 时间：2012-11-01T15:57:49.613
> 
> 标签：php

假设我有这个“个人资料页面”代码：

```
<table border="1">
<tr>
<td>First Name : </td>
<td>John</td>
</tr>
<tr>
<td>Last Name : </td>
<td>Doe</td>
</tr>
<tr>
<td>Hobby : </td>
<td>Soccer</td>
</tr>
...
</table> 
```

并且这些配置文件是从数据库中存储的，并且某些字段是可选的。例如：hobby、yahoo messenger ID、twitter ID 等。

如何有效地显示所有可用信息？我的意思是，少使用 IF... 因为目前这就是我正在做的事情：

```
<table border="1">
<tr>
<td>First Name : </td>
<td>John</td>
</tr>
<tr>
<td>Last Name : </td>
<td>Doe</td>
</tr>

<?php
if (!empty($hobby)){
echo '<tr>
<td>Hobby : </td>
<td>'.$hobby.'</td>
</tr>';}
?>

<?php
if (!empty($YahooID)){
echo '<tr>
<td>Yahoo ID : </td>
<td>'.$YahooID.'</td>
</tr>';}
?>

...
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T16:02:50.073

遍历您的属性（firstName、lastName...）或列（DB 端），如果设置，则在某个数组中添加一个键/值条目：nameOfAttribute、valueOfAttribute。

渲染 HTML 时，循环遍历这个数组

```
echo '<tr><td>'.$key.' : '</td><td>'.$value+'</td></tr>'; 
```

或者，

```
function renderIfSet($value, $title)
{
   if ($value) return '<tr><td>$title :</td><td>$value</td></tr>';
} 
```

你的代码变成：

```
<? echo renderIfSet($hobby, "Hobby") ?>
<? echo renderIfSet($YahooID, "Yahoo ID") ?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T16:06:49.073

```
 function someAction($data) {
        if (!empty($data['data'])) {
            return '<tr>
            <td>{$data[title]} : </td>
            <td>'.$data['data'].'</td>
            </tr>';             
        }
    }

$datas = array(
  array('data' => $YahooID, 'title' => 'YahooID'),
  .... );

foreach($datas as $k => $v) {
   echo someAction($)
} 
```

类似的东西

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T16:04:37.767

创建一个函数...

```
function checkVal($label,$value){
    if(!empty($value)){
        $row .= '<td>'.$label.'</td>';
        $row .= '<td>'.$value.'</td>';
    }
} 
```

调用你的函数...

```
checkVal('Hobby',$hobby); 
```

# javascript - 如何从表单值创建 JSON？

> ID：13180812
> 
> 赞同：0
> 
> 时间：2012-11-01T15:57:51.220
> 
> 标签：javascript, jquery

我正在尝试从动态表单字段和值创建 JSOn，

当用户提交时，我想在#results 中显示 json 提要

我有以下代码片段：

```
<form id="myform" class="form-wd">
    ............
</form>
<div id="results"> </div>
</div> 
```

```
$('#myform-wiz').on('submit', function(ev) {
    //alert($(this).serialize());
    var data = $(this).serialize(); // -> The URL encoded form data
    $("#results").text(data);
    ev.preventDefault();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:59:44.037

我认为您对 JSON.stringify 感兴趣？

```
 data = $(this).serialize();
    json_data = JSON.stringify(data);
     $("#results").text(json_data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:30:01.880

或者，尝试[jquery-json 插件](https://code.google.com/p/jquery-json/)并调用 .toJSON() 方法将 javascript 对象、数字、字符串或数组序列化为 JSON。

```
var thing = {plugin: 'jquery-json', version: 2.3};

var encoded = $.toJSON( thing );
// '{"plugin":"jquery-json","version":2.3}'
var name = $.evalJSON( encoded ).plugin;
// "jquery-json"
var version = $.evalJSON(encoded).version;
// 2.3 
```

# c# - 关闭 mdi 表单后平铺剩余的 mdi 表单

> ID：13180813
> 
> 赞同：0
> 
> 时间：2012-11-01T15:57:51.893
> 
> 标签：c#, winforms, events, mdi, tile

我有一个 mdi 表单，我想在其中一个孩子关闭后平铺其所有 mdi 孩子。我尝试将子窗体的关闭事件设置为平铺所有窗口的方法，但我遇到的问题是它也平铺了刚刚关闭的窗口。我相信这是因为在触发回调结束之前仍然会引用刚刚关闭的窗口。所以我的问题是：有没有办法在其中一个关闭后让所有剩余的 mdi 孩子平铺？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:56:42.337

从子窗体的关闭事件调用`MdiParent.LayoutMdi`不会忽略关闭的窗体？例如`this.MdiParent.LayoutMdi(MdiLayout.TileHorizontal);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T23:12:19.400

好的，我想通了。正如 Hans Passant 所说，“你必须稍后再做，在子窗体关闭并消失之后。使用 BeginInvoke() 很容易做到。” 再次感谢汉斯！

# ruby-on-rails - Rails 从外部链接到嵌套资源

> ID：13180814
> 
> 赞同：0
> 
> 时间：2012-11-01T15:57:53.453
> 
> 标签：ruby-on-rails, ruby, routing

我有一个（简化的）路由，例如：

```
resources :users do
    resources :messages
end

resources :searches 
```

我有一个搜索模型/资源，遵循 Railscasts [http://railscasts.com/episodes/111-advanced-search-form](http://railscasts.com/episodes/111-advanced-search-form)

现在，当我的搜索完成时，我想要一个指向 user_message_path 下的实际消息的链接，但我无法在 Search 资源下访问它，因为它没有嵌套在其中。

这是我路由/设计它的方式的问题，还是有 Rails 访问它的方式，比如辅助方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:54:39.253

我认为您正在尝试将两件不相关的事情联系起来。您有具有嵌套消息的用户，并且您有搜索。只需使用 user_message_path 链接到消息，它不必**在**搜索资源下或根本与搜索资源相关。

该链接可能看起来像

```
user_message_path([@user, @message]) 
```

# c# - 以编程方式设置 APN 设置 wp7

> ID：13180819
> 
> 赞同：1
> 
> 时间：2012-11-01T15:58:11.273
> 
> 标签：c#, windows-phone-7

我开始开发应用程序以使用 windows phone 7 自动设置设备的系统参数

我的问题是如何在 windows phone 7 或 windows phone 8 中以编程方式设置设备的 APN 和代理（windows API 或程序 c#）

如果 Windows Phone 专家有想法，请帮助我。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:47:02.977

据我所知，在 WP7 中无法访问此类设置，但在 WP8 中有一个跳跃

检查此链接 [http://msdn.microsoft.com/library/windowsphone/develop/ff626516(v=vs.105).aspx](http://msdn.microsoft.com/library/windowsphone/develop/ff626516(v=vs.105).aspx)

# asp.net - 如何在使用 ...?id=3 等查询参数时只允许特定用户访问特定页面

> ID：13180820
> 
> 赞同：1
> 
> 时间：2012-11-01T15:58:15.103
> 
> 标签：asp.net, membership

我有一个页面根据请求中的 id 参数显示一些数据。

用户必须登录

我应该如何阻止用户访问属于其他用户的某些 ID。重定向是最佳选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:08:42.340

您可以在呈现页面之前检查服务器端，然后重定向...等：

```
void Page_Load(object sender, EventArgs e)
{    
    string bla = Request["key"] != null ? Request["key"] : "";
    if(String.IsNullOrEmpty(bla))
    if (bla=="yourvaluetocheck" && !User.IsInRole("theroletouse"))
    {
        Response.Redirect("~/permissiondenied.aspx");
    }
} 
```

这是一个非常简单的示例，我会将这种类型的逻辑放在我的应用程序的中心位置以供重用。

# javascript - 如何从“a href”超链接启动 LightBox 画廊

> ID：13180828
> 
> 赞同：0
> 
> 时间：2012-11-01T15:58:32.123
> 
> 标签：javascript, lightbox, href

Stack Overflow 提供了一些非常有用的提示：运行多个 LightBox 画廊等，但我还有一个问题希望你们能帮助...

在静态 HTML 页面中，我有一个用户单击以启动 LightBox 库的图像；非常简单的东西，就像常规的 LightBox 演示一样。

但是，我想在实际显示“单击此处查看图库”的图像下方包含一个“a href”按钮（对于那些可能不知道他们需要单击图像以启动图库等的用户）。

您能否告诉我基本的“a href”按钮需要什么代码才能在单击后立即启动 LightBox 画廊？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:49:59.157

如果您阅读了灯箱网站上的[如何使用](http://lokeshdhakar.com/projects/lightbox2/)部分，您可以看到重要的内容：

rel="lightbox" 属性。这意味着该链接应该作为灯箱叠加层中的图像打开，因此 <a> 标记内的内容无关紧要。

还有一个关于对这些链接进行分组的示例：

```
<a href="images/image-1.jpg" rel="lightbox[roadtrip]">image #1</a>
<a href="images/image-2.jpg" rel="lightbox[roadtrip]">image #2</a>
<a href="images/image-3.jpg" rel="lightbox[roadtrip]">image #3</a> 
```

请注意，rel="" 属性已更改。灯箱后面有一个 [groupname] 部分。具有相同组名的链接将在一个画廊中打开。

如果您对 javascript 知之甚少，这种不显眼的 lightbox2 方法很有效。无需编写单行 javascript 代码，只使用 rel 属性。

# c++ - 如何在 C++ 中创建一组 IDirect3DSurface9（D3D 表面）表面？

> ID：13180830
> 
> 赞同：2
> 
> 时间：2012-11-01T15:58:35.793
> 
> 标签：c++, arrays, visual-c++, directx, direct3d

如果我想创建一个 D3D 表面，我会像下面那样做。同样，如果我想创建一个类型为 IDirect3DSurface9* 的 D3D 表面数组，我该如何在 C++ 中执行？

```
IDirect3DSurface9** ppdxsurface = NULL;
IDirect3DDevice9 * pdxDevice = getdevice(); // getdevice is a custom function which gives me //the d3d device. 

pdxDevice->CreateOffscreenPlainSurface(720,480,
                                                D3DFMT_A8R8G8B8,
                                                D3DPOOL_DEFAULT,
                                                pdxsurface,
                                                NULL); 
```

**QUERY :: 如何在 C++ 中创建 D3D 设备数组？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T17:03:20.620

`ppdxsurface`未正确声明，您需要提供指向**指针对象**的指针，而不仅仅是指向指针的指针。应该是`IDirect3DSurface9*`，不是`IDirect3DSurface9**`：

```
IDirect3DSurface9* pdxsurface = NULL;
IDirect3DDevice9* pdxDevice = getdevice();

pdxDevice->CreateOffscreenPlainSurface(720, 480,
   D3DFMT_A8R8G8B8, D3DPOOL_DEFAULT,
   &pdxsurface, // Pass pointer to pointer
   NULL);

// Usage:
HDC hDC = NULL;
pdxsurface->GetDC(hDC); 
```

要创建表面数组，只需在循环中调用它：

```
// Define array of 10 surfaces
const int maxSurfaces = 10;
IDirect3DSurface9* pdxsurface[maxSurfaces] = { 0 };

for(int i = 0; i < maxSurfaces; ++i)
{
   pdxDevice->CreateOffscreenPlainSurface(720, 480,
      D3DFMT_A8R8G8B8, D3DPOOL_DEFAULT,
      &pdxsurface[i],
      NULL);
} 
```

或者`std::vector`如果您更喜欢动态数组，请使用：

```
std::vector<IDirect3DSurface9*> surfVec;

for(int i = 0; i < maxSurfaces; ++i)
{
   IDirect3DSurface9* pdxsurface = NULL;
   pdxDevice->CreateOffscreenPlainSurface(720, 480,
      D3DFMT_A8R8G8B8, D3DPOOL_DEFAULT,
      &pdxsurface,
      NULL);
   surfVec.push_back(pdxsurface);
} 
```

# google-chrome-extension - 用于 wget 下载的 Chrome 扩展

> ID：13180831
> 
> 赞同：4
> 
> 时间：2012-11-01T15:58:39.290
> 
> 标签：google-chrome-extension, download, wget

我可以开发一个 Chrome 扩展程序，只需单击一个按钮，就可以使用`wget`命令下载当前网页？我想知道这在概念上是否可行。我想要`wget`而不是简单地保存页面的原因是，`wget`可以指定许多不同的选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T21:09:03.413

据我所知，做这些事情的唯一一种可能性是通过 **[NPAPI 插件](http://developer.chrome.com/extensions/npapi.html)**

如果它仅用于您的私人用途（并非在所有操作系统上您都可以使用 wget 命令），您可以通过 AJAX 启动 wget ：

*Chrome 扩展 => AJAX 调用 => Web 服务器脚本 => Wget 启动*

# ruby-on-rails - 在特定服务器上“缺少这些必需的宝石”，已安装宝石

> ID：13180832
> 
> 赞同：2
> 
> 时间：2012-11-01T15:58:39.447
> 
> 标签：ruby-on-rails, rubygems

尝试运行 rake db:migrate 我得到：

```
$ rake db:migrate
(in /home/user/domains/staging)
log level debug
Missing these required gems:
  haml  ~> 3.1.4
  htmlentities  
  fastercsv  

You're running:
  ruby 1.8.7.72 at /usr/bin/ruby1.8
  rubygems 1.3.7 at /home/user/.gem/ruby/1.8, /usr/lib/ruby/gems/1.8

Run `rake gems:install` to install the missing gems.
rake aborted!
no such file to load -- json 
```

我有两台服务器，它们都是通过 git 存储库更新的。在一台服务器上一切正常，在另一台服务器上出现上述错误。

这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T21:47:37.227

“ruby”/“rake”等可执行文件的路径是否指向服务器上不工作的正确路径？看起来您想使用 REE，但您的堆栈跟踪是 1.8，而不是 REE。

您可能需要导出一个环境变量来更新您的路径以指向正确的 Ruby 二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:13:27.697

您是否尝试过`bundle install`或`sudo bundle install`正在生产中？您也可以尝试`bundle exec rake db:migrate`而不是仅仅`rake db:migrate`. 这些是一种猜测，但可能会有所帮助。

# events - 如何使用 MSBuild 编译 Shadows 事件

> ID：13180837
> 
> 赞同：0
> 
> 时间：2012-11-01T15:58:53.120
> 
> 标签：events, msbuild, interop, shadows

我正在尝试使用设置一个不依赖于 Visual Studio 安装但使用 msbuild 的 CI 服务器。我们的解决方案包括一个互操作项目。Visual Studio 可以很好地处理这个项目，但是 msbuild 似乎对这样的事件有问题，从继承自 System.Windows.Forms.UserControl 的互操作用户控件中获取：

```
Public Shadows Event Click() 'Event must be marked as Shadows since .NET UserControls have the same name. 
```

我从 MSBuild 得到的错误是：错误 BC30029：派生类不能引发基类事件。

我读[了这个](http://msdn.microsoft.com/en-us/library/0ecakwbz.aspx)，但我的 Event 语句和 RaiseEvent 语句已经在同一个类中（引发上述错误的那个类）。我认为这个解决方案不适用于我的情况。

解决这个问题的最佳方法是什么？如果您需要更多信息，请与我们联系。

谢谢。

# ms-access - 获取 Access 报告中使用的变量的值

> ID：13180841
> 
> 赞同：0
> 
> 时间：2012-11-01T15:59:07.900
> 
> 标签：ms-access, excel, vba

我有一份报告（“rptEstimate”）用作在 Access 中运行的大型程序的一部分。此报告有一个文本字段，其表达式为 =Nz([txtTaxTotal],0)+Nz([txtSubTotal],0)。在哪里可以找到 txtTaxTotal 和 txtSubTotal 的值？有什么方法可以查看哪些表格链接到特定报告？

我希望将这些值导出到电子表格中，可能是通过 Excel VBA，但我需要先隔离它们。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T16:03:15.233

查找报告的记录来源。在设计视图中，您可以在数据选项卡的属性表中找到它。此外，检查报表上名为 的控件`txtSubTotal`，这可能绑定到来自记录源的字段。您可以在属性表上选择一个控件的名称，该控件本身将被突出显示。

# c++ - 如何在编译时计算类成员的偏移量？

> ID：13180842
> 
> 赞同：20
> 
> 时间：2012-11-01T15:59:07.193
> 
> 标签：c++, templates, metaprogramming, offset, member

给定 C++ 中的类定义

```
class A
{
  public:
    //methods definition
    ....

  private:
    int i;
    char *str;
    ....
} 
```

是否可以在编译时使用 C++ 模板元编程计算类成员的偏移量？该类不是 POD，可以有虚方法、原语和对象数据成员。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-11-22T09:20:17.937

基于 Matthieu M. 的回答，但更短且没有宏：

```
template<typename T, typename U> constexpr size_t offsetOf(U T::*member)
{
    return (char*)&((T*)nullptr->*member) - (char*)nullptr;
} 
```

它是这样称呼的：

```
struct X { int a, b, c, d; }

std::cout << "offset of c in X == " << offsetOf(&X::c); 
```

**编辑：**

杰森赖斯是正确的。这不会在 C++11 中产生实际的常量表达式。[鉴于http://en.cppreference.com/w/cpp/language/constant_expression](http://en.cppreference.com/w/cpp/language/constant_expression)中的限制，这看起来不太可能——特别是没有指针差异并且`reinterpret_cast`可以在常量表达式中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-01T17:23:34.367

好吧...在 C++11 中，您实际上可以使用常规 C++ 工具（即，无需委托给特定的编译器内在函数）计算此类偏移量。

在[liveworkspace](http://liveworkspace.org/code/aaac67c05a0b50fe5c2e8468d4660436)行动：

```
template <typename T, typename U>
constexpr int func(T const& t, U T::* a) {
     return (char const*)&t - (char const*)&(t.*a);
} 
```

但是，这依赖于对此处实例`t`的引用`constexpr`，这可能不适用于所有类。它不禁止`T`拥有`virtual`方法，甚至不禁止构造函数，只要它是`constexpr`构造函数即可。

尽管如此，这仍然是一个很大的障碍。在未评估的上下文中，我们实际上可以`std::declval<T>()`用来模拟拥有一个对象；虽然没有。因此，这对对象的构造函数没有具体要求。另一方面，我们可以从这样的上下文中提取的值很少……而且它们确实对当前的编译器造成了问题……好吧，让我们假装吧！

在[liveworkspace](http://liveworkspace.org/code/4797681a092e09726252990b1fe89127)行动：

```
template <typename T, typename U>
constexpr size_t offsetof_impl(T const* t, U T::* a) {
    return (char const*)t - (char const*)&(t->*a) >= 0 ?
           (char const*)t - (char const*)&(t->*a)      :
           (char const*)&(t->*a) - (char const*)t;
}

#define offsetof(Type_, Attr_)                          \
    offsetof_impl((Type_ const*)nullptr, &Type_::Attr_) 
```

我预见到的唯一问题是`virtual`继承，因为它在运行时放置了基础对象。如果有其他缺陷，我会很高兴。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-01T16:42:26.750

不，一般不会。

offsetof 宏存在于 POD（普通旧数据）结构中，并且可以使用 C++0x 稍微扩展为标准布局结构（或其他类似的轻微扩展）。因此，对于那些受限制的情况，您有一个解决方案。

C++ 为编译器编写者提供了很大的自由度。我不知道有任何子句会阻止某些类对类成员具有可变偏移量——但是，我也不确定编译器为什么会这样做。;)

现在，一种保持代码标准兼容但仍有偏移量的方法是将数据粘贴到 POD（或某些 C++0x 扩展）子结构中，offsetof 将在该子结构上工作，然后在该子结构上工作struct 而不是整个类。或者您可以放弃标准合规性。你的类中结构的偏移量是未知的，但结构中成员的偏移量是未知的。

要问的一个重要问题是“我为什么想要这个，我真的有充分的理由吗”？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-23T03:18:28.937

在 1996 年由 C++ 最初设计者之一 Stanley B. Lippman 撰写的《深入了解 C++ 对象模型》一书中，在第 4.4 章中提到了指向成员函数

*从获取非静态数据成员的地址返回的值是该成员在类布局中的位置的字节值（加 1）。可以将其视为不完整的值。在访问成员的实际实例之前，它需要绑定到类对象的地址。*

虽然我隐约记得前世某处的 +1，但我以前从未见过或使用过这种语法。

```
class t
{
public:
    int i;
    int j;
};
int (t::*pmf)() = &t::i; 
```

至少根据描述，这似乎是获得“几乎”偏移的一种很酷的方式。

但它似乎不再起作用了，至少在 GCC 中。我得到一个

```
Cannot initialize a variable of type 'int (t::*) with an rvalue of type "int t:: *' 
```

有没有人有任何关于这里发生的事情的历史？这样的事情还有可能吗？

网络问题——过时的书永远不会消失……

# jquery - popcorn.js 开始和停止时间

> ID：13180848
> 
> 赞同：1
> 
> 时间：2012-11-01T15:59:11.343
> 
> 标签：jquery, media, popcornjs

刚开始查看 popcorn.js 但遇到了一些麻烦。

我有一个30秒的曲目，

但是我希望文件从 2 秒开始播放，并在结束前 3 秒停止播放。

有谁知道这是否可能，因为我在文档中找不到它？

无论是那个还是有一个命令可以跳转到时间线中的一个点，所以几乎就像

```
pop.playAt('2 second'); 
```

类似的东西？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T16:31:10.117

这里有两个简单的步骤：1）将视频提前两秒 2）确保它在 27 秒处停止（30 - 3）

要推进视频，您可以使用 currentTime 方法，但如果您尝试在视频元数据加载之前设置 currentTime，则会遇到错误。（当您第一次设置视频时，浏览器在获取标题之前不知道持续时间是多少，并且您不能将 currentTime 设置为晚于持续时间。）

```
var popcorn = Popcorn('#video');
if (popcorn.duration()) {
  popcorn.currentTime(2);
} else {
  popcorn.on('loadedmetadata', function() {
    popcorn.currentTime(2);
  }
} 
```

现在，要确保视频在 27 秒处停止，您可以使用“cue”方法，该方法需要几秒钟时间和一个回调函数来触发。

```
popcorn.cue(27, function() {
  popcorn.pause();
}); 
```

现在，默认情况下，Popcorn 在收到来自视频的“timeupdate”事件时会触发事件，通常是每 1/4 秒（250 毫秒）。因此，您可能会看到视频运行了几帧。（例如，它可能会在 27.1 秒处停止）。如果您需要更高的精度，请使用 frameAnimation 选项，这会使爆米花尝试更新到 60fps（每 16 毫秒）。

```
var popcorn = Popcorn('#video', {
  frameAnimation: true
}); 
```

您还可以通过在 URL 上附加锚点形式的提示来告诉浏览器只向 Web 服务器询问您需要的视频部分，从而节省加载时间。

```
http://example.com/videos/myvideo.webm#t=2,27 
```

这取决于浏览器和 Web 服务器的支持，但不会有什么坏处。

**编辑：**实际上，不要在这里使用 frameAnimation 。问题是它使用requestAnimationFrame，如果你的浏览器标签不可见，你不能保证它会被调用。这对动画有意义，但不是在这里。我可能会在 popcorn.js 中提出一个解决方案。

# windows - 批处理文件：增加文本文件中的值时出现“缺少运算符”错误？

> ID：13180849
> 
> 赞同：1
> 
> 时间：2012-11-01T15:59:26.893
> 
> 标签：windows, batch-file, cmd, text-files, directory-structure

这是一个与[crono](https://stackoverflow.com/users/1462/crono)的答案相关的语法问题：[https ://stackoverflow.com/a/40869/1783806](https://stackoverflow.com/a/40869/1783806)

```
@echo off

for /f " delims==" %%i in (counter.txt) do set /A temp_counter= %%i+1
echo %temp_counter% > counter.txt 
```

假设`count.bat`and`counter.txt`位于同一目录中。

更改目录结构时出现“缺少操作员”错误。

这是我将结构更改为时 CMD 返回的内容`"C:\foo\counter.txt"`：

```
C:\foo>for /F " delims==" %i in ("C:\foo\counter.txt") do set /A temp_counter=%i+1

C:\foo>set /A temp_counter=C:\foo\counter.txt+1
Missing operator.

C:\foo>echo 0  1>"C:\foo\counter.txt" 
```

如果文件位于不同的目录中，如何使相同的代码工作？

有人还可以解释为什么会发生错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T17:31:15.530

在第一个代码中，您没有引用 IN() 子句，因此将其视为文件。

在第二个代码中，您确实引用了 IN() 子句，因此它被视为字符串文字而不是文件。如果要在文件名周围使用引号，则必须将该`USEBACKQ`选项添加到 FOR /F 选项中。键入`HELP FOR`以获取有关 FOR 命令的许多变体的更多信息。

# ruby-on-rails - Rails has_many：通过自定义属性？

> ID：13180850
> 
> 赞同：0
> 
> 时间：2012-11-01T15:59:29.133
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我目前有一个车辆模型，它有一个定义所有者属性的自定义方法：

```
def owners
    @owners = sales.map(&:customer) + quotes.map(&:customer)
    @owners = @owners.uniq
end 
```

此方法似乎工作得很好，并返回车辆的所有者数组。

但是，当我想使用`owners`此方法在另一个模型中生成的时，我遇到了问题。当我在另一个模型上这样做时：

```
has_many :owners, :through => :vehicles 
```

这会产生错误：

```
ActiveRecord::HasManyThroughSourceAssociationNotFoundError: Could not find the source association(s) :owner or :owners in model Vehicle. 
```

我试过添加`:source => :owners`，但我得到了同样的错误。

我应该指出我确实有`:owners`attr_accessible。

那么，当所有者在自定义方法中定义而不是普通变量时，我可以做一个 :through 关联吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:13:00.440

直接回答你的问题，不。

Rails 的`has_many :through`功能旨在处理 ActiveRecord 关联。在这里，您要声明与`owners`通过该表调用的表的关联`vehicles`，但实际上没有要加入的所有者表：由于您使用属性手动查找所有者，因此您没有将它们保存为数据库中的记录。

为了让这个为你工作，我会跳过使用 ActiveRecord 关联。相反，只需在相关模型上定义类似的内容：

```
def owners
  self.vehicles.collect(&:owners).flatten.uniq
end 
```

但是，如果您开始在数据库中保存所有者，则*可以*使用直通关联，在这种情况下，您提供的语法将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:14:27.230

Rails Api 说 through: 选项希望您指定一个关联来执行查询。它试图根据连接表车辆找到这个所有者关联，但找不到它，因为它不存在。我认为如果不从 Rails 深入研究 HasMany-Builder，您的方法就无法工作。

# java - Dropbox ChunkedUpload

> ID：13180853
> 
> 赞同：1
> 
> 时间：2012-11-01T15:59:43.550
> 
> 标签：java, dropbox, dropbox-api

我正在尝试将分块上传到 Dropbox。我已经根据 Dropbox API 文档中的示例编写了一个代码，但它失败了。

以下代码引发该异常：

> com.dropbox.client2.exception.DropboxIOException：Apache HTTPClient 遇到错误。没有反应，再试一次。在 com.dropbox.client2.RESTUtility.execute(Unknown Source) at com.dropbox.client2.DropboxAPI$ChunkedUploadRequest.upload(Unknown Source) at com.dropbox.client2.DropboxAPI$ChunkedUploader.upload(Unknown Source) at com.dropbox .client2.DropboxAPI$ChunkedUploader.upload（未知来源）

这是代码：

```
/** Uploads content to Dropbox.
 * @param dropbox An already linked dropbox API
 * @param stream The stream to upload
 * @param length The number of bytes to upload
 * @param path The path where to store the uploaded content
 * @return a boolean, false if the upload was cancelled, true if it completes 
 * @throws IOException
 * @throws DropboxException
 */
public static boolean upload(DropboxAPI<?> dropbox, InputStream stream,
        long length, String path) throws IOException, DropboxException {
    // Create a chunked uploader
    ChunkedUploader uploader = dropbox.getChunkedUploader(stream, length);
    try {
        int tryCounter = 1;
        while (!uploader.isComplete()) {
            try {
                uploader.upload(); // The exception occurs on this line
            } catch (DropboxException e) {
                tryCounter++;
                if (tryCounter > 5) throw e; // Give up after a while.
                System.err.println ("Upload failed, trying again ...");
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e1) {
                }
            }
        }
    } catch (DropboxPartialFileException e) {
        // Upload was cancelled
        return false;
    }
    // If the upload completes, determine the current revision of the path.
    String parentRev = null;
    try {
        Entry metadata = dropbox.metadata(path, 1, null, false, null);
        parentRev = metadata.rev;
    } catch (DropboxServerException e) {
        // If the error is not a FileNotFound error => It's really an error
        if (e.error!=DropboxServerException._404_NOT_FOUND) throw e;
    }
    // Finish the upload
    uploader.finish(path, parentRev);
    return true;
} 
```

知道我做错了什么吗？

PS：当然，我验证了其他 api 函数与我传递给该方法的 DropboxAPI 实例没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:15:07.757

我已将问题提交给 Dropbox 团队。他们只是回答我这是 Dropbox API 中的一个错误。版本 1.5.3 修复了它。

# java - Java 泛型：> 是什么意思？

> ID：13180855
> 
> 赞同：2
> 
> 时间：2012-11-01T15:59:44.933
> 
> 标签：java, generics

继上一篇[文章之后](https://stackoverflow.com/questions/11363788/type-mismatch-cannot-convert-from-class-to-class)，我希望有人可以帮助澄清/确认我对以下 java 泛型语句的理解，并就最后一个语句的含义提供一些输入：

如果：

```
Class<abc> className = x 
```

意味着将`x`类型分配`abc`给 `Class`变量`className`

和：

```
Class<? extends IAbc> className = x 
```

表示分配`x`哪个实现`IAbc`变量`Class`的接口`className`

有什么作用：

```
Class<? extends IAbc<?>> className = x 
```

意思是？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T16:01:35.250

这只是意味着它`IAbc`本身就是一个泛型类型`IAbc<T>`，你要求一个`Class`对象代表一些参数化的一些实现，`IAbc`但你不知道（或关心？）哪个。

更有趣的是

```
Class<? extends IAbc<? extends Number>> 
```

它将接受任何实现`IAbc<Number>`, `IAbc<Integer>`,`IAbc<Double>`等的类。

# php - readfile() 不适用于某些 URL

> ID：13180856
> 
> 赞同：1
> 
> 时间：2012-11-01T15:59:45.883
> 
> 标签：php, url, readfile

以下代码没有让我得到正确的文件：

```
<?php
header("Content-Type: application/octet-stream");
readfile("http://player.vimeo.com/play_redirect?clip_id=24195442&sig=49daac0ff885745c27601a80402bba14&time=1351783454&quality=hd&codecs=H264&type=moogaloop_local&embed_location=");
?> 
```

相反，它似乎下载了[http://player.vimeo.com/play_redirect?clip_id=24195442](http://player.vimeo.com/play_redirect?clip_id=24195442)。我曾尝试使用*htmlentities*或*htmlspecialchars*，但它并没有改变任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:49:31.887

这在视频和下载网站上很常见。为了防止琐碎的直接链接或热链接，它们会在用户与页面、视频播放器或验证码进行交互后为主要数据生成一个唯一的 URL。这就是您的 URL 的`sig`和`time`部分。此类生成的 URL 通常通过 IP 地址与用户绑定，并且会在一段时间后过期。

要传递该类型的内容，您必须破译用于生成视频 URL 的步骤。它通常像请求 HTML 页面然后在 Flash 小程序参数或脚本标记中查找 URL 一样简单。其他站点在复杂的客户端脚本或 Flash 小程序中生成 URL。

我快速浏览了 Vimeo 并弄清楚了如何获取 URL，它似乎工作正常。试试这个：

```
$clipId = 24195442;

ini_set('user_agent', 'Mozilla/5.0 (Windows NT 6.1; rv:10.0.9) Gecko/20100101 Firefox/10.0.9');
$config = json_decode(file_get_contents('http://player.vimeo.com/config/' . $clipId));
$videoUrl = 'http://player.vimeo.com/play_redirect?clip_id=' . $clipId .
    '&sig=' . $config->request->signature .
    '&time=' . $config->request->timestamp;
header('Content-Type: application/octet-stream');
readfile($videoUrl); 
```

是的，您必须设置[User-Agent](https://en.wikipedia.org/wiki/User_agent)字符串。当它看起来不像真正的浏览器时，Vimeo 拒绝了它。

我不知道是否有一个 Vimeo API 说它*应该*可以工作。请注意，它可能仅在 Vimeo 不更改其站点结构的情况下才有效。如果可能的话，最可靠的做法是保存或缓存视频文件并从您自己的服务器本地提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:53:59.253

试试这个例子，它基于 Vimeo Simple API（版本 2）。自己复制粘贴试试吧……

[http://www.lib.montana.edu/~jason/files/api/vimeo/item.txt](http://www.lib.montana.edu/~jason/files/api/vimeo/item.txt)

如果需要，请检查是否有注释行以使用 curl_init() 方法。从第 57 行开始，到第 69 行结束。但如果示例第一次运行，请忽略它。

# salesforce - 显示与查阅字段相关的值

> ID：13180857
> 
> 赞同：1
> 
> 时间：2012-11-01T15:59:47.060
> 
> 标签：salesforce, visualforce

我对使用 Visualforce 和 Salesforce 很陌生，所以请多多包涵……我正在自学如何通过复制我们的销售代表用来记录收到的订单的表单来构建 visualforce 页面。我很难弄清楚如何做一些（可能）非常基本的事情，我希望有人能帮助我指出正确的方向。我发现了很多关于如何做的事情的说明，这些事情要么是我想要的或类似的，但不是我正在寻找的，这让我对实现这个特定目标需要做什么感到非常困惑工作。

这是我到目前为止所做的......

我在我的页面上设置了一个查找字段，允许用户填充销售代表是谁（使用用户对象）。我有点困惑为什么我会看到一个文本框和一个搜索按钮，而不仅仅是一个可供选择的代表下拉框，但我想这既不是这里也不是那里......

```
<apex:page standardController="Order__c" extensions="OrderNewExtension">
<apex:actionRegion >
    <apex:inputField value="{!Order__c.User__c}" required="true" id="userID">
        <apex:actionSupport event="onchange" reRender="salesRepDetails" />
    </apex:inputField>
</apex:actionRegion>

<apex:outputPanel id="salesRepDetails" rendered="true">
    <table border="0" cellspacing="0" cellpadding="5" width="75%" style="border: 1px solid magenta;">
        <tr>
            <td colspan="2" width="50%">&nbsp;</td>
            <td><apex:outputLabel value="Phone: " for="repPhone" /></td>
            <td class="data">***Something needs to go here***</td>
        </tr>
        ...
    </table>
</apex:outputPanel> 
```

我想用这个做两件事 -

1）用户选择销售代表后，我希望显示所选代表的电子邮件和电话号码。2）（排序可选）我希望此字段预先填充当前用户的姓名和数据，这样，唯一需要查找代表的时间是当我们的支持人员输入某些内容时其他人。这有意义吗？

我不确定任何人还需要什么来帮助我，但如果我有能力在这里获取这些信息，我会这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T19:11:52.243

你的控制器：

```
public with sharing class yourController
{
    // Defining objects
    public User selectedUser { get; set; }
    public Order__c order { get; set; }

    // Constructor where the user data will be pre-populated
    public yourController()
    {
        order = new Order__c();
        order.User__c = UserInfo.getUserId();
        selectedUser = [ Select Id, Email, Phone From User Where Id = :UserInfo.getUserId() ];
    }

    // Method for reading selected user data
    public pageReference readUser()
    {
        selectedUser = [ Select Id, Email, Phone From User Where Id = :order.User__c ];
        return null;
    } 
} 
```

视觉力量页面：

```
<apex:outputPanel id="userDetails">
    <apex:pageBlock>
        <apex:pageBlockSection columns="1">
            <apex:inputField value="{!order.User__c}">
                <apex:actionSupport event="onchange" action="{!readUser}" reRender="userDetails"/>
            </apex:inputField>
            <apex:outputField value="{!selectedUser.email}"/>
            <apex:outputField value="{!selectedUser.phone}"/>
        </apex:pageBlockSection>
    </apex:pageBlock>    
</apex:outputPanel> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-06-15T20:23:05.497

我认为你想要一个预测查找字段之类的东西。我创建了一些可能有助于 [http://tweaksalesforce.blogspot.in/2015/06/simple-lookup-field-with-drop-down-list.html?m=1](http://tweaksalesforce.blogspot.in/2015/06/simple-lookup-field-with-drop-down-list.html?m=1)

# python - Zip 作为列表理解

> ID：13180861
> 
> 赞同：5
> 
> 时间：2012-11-01T15:59:57.850
> 
> 标签：python, list, zip, list-comprehension

我有一个相当最后的数据列表，如下所示：

```
data = [[1, 2, 3], [4, 5, 6], [7, 8, 9]] 
```

我正在尝试压缩它，以便得到这样的东西：

```
zipped_data = [(1, 4, 7), (2, 5, 8), (3, 6, 9)] 
```

我知道我可以做到这一点

```
l = [(data[0]), (data[1]), (data[2])]
zipped_data = zip(*l) 
```

但我想写一个列表推导来为`data`. 我试过这个，但它没有用。

```
s = [zip(i) for i in data]
s
[[(1,), (2,), (3,)], [(4,), (5,), (6,)], [(7,), (8,), (9,)]] 
```

谁能确定我在这里出错的地方？谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-01T16:01:08.280

尝试`*`：

```
In [2]: lis=[[1, 2, 3], [4, 5, 6], [7, 8, 9]]

In [3]: zip(*lis)
Out[3]: [(1, 4, 7), (2, 5, 8), (3, 6, 9)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T16:09:42.470

如果您真的想重写`zip`为列表理解，那么我会这样做：

```
In [25]: data = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]

In [26]: [tuple(lis[j] for lis in data) for j in range(min(len(l) for l in data))]
Out[26]: [(1, 4, 7), (2, 5, 8), (3, 6, 9)]

In [27]: data = [[1, 2, 3], [4, 5, 6], [7, 8]]

In [28]: [tuple(lis[j] for lis in data) for j in range(min(len(l) for l in data))]
Out[28]: [(1, 4, 7), (2, 5, 8)] 
```

虽然，`zip(*data)`绝对是解决这个问题的更好方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T16:10:13.300

我会这样做，[`zip`](http://docs.python.org/2/library/functions.html#zip)但这里是用列表理解完成的

```
def zip_lists(lists):
    """
        Assuming all lists have the same length

        >>> zip_lists([[1, 2, 3], [4, 5, 6], [7, 8, 9]])
        [[1, 4, 7], [2, 5, 8], [3, 6, 9]]

        >>> zip_lists([[1, 2], [3, 4], [5, 6], [7, 8]])
        [[1, 3, 5, 7], [2, 4, 6, 8]]

    """
    return [[l[x] for l in lists] for x in range(len(lists[0]))] 
```

# php - 在 1.2.0 RC4 中使用 Titanium.include() 有问题吗？

> ID：13180863
> 
> 赞同：2
> 
> 时间：2012-11-01T16:00:00.483
> 
> 标签：php, tidesdk

我是唯一一个对此有问题的人吗？我现在没有确切的代码，但它类似于以下内容......（这是我用来启动和运行 TideSDK 的最简单的示例）

我的 index.html 中有...

```
<script>
    Titanium.include("testLibrary.php")
</script>
<script>
    var testresult = new testMethod();
    document.write(testresult);
</script> 
```

我在资源目录中的 testLibrary.php 文件非常简单...

```
<?php
    function testMethod()
    {
        $fixedResult = "The most basic php variable for display in the DOM";
        return $fixedResult;
    } 
```

我为打包等打开了 php。当我在索引文件中包含 php 代码时一切正常，所以我知道 php 正在工作，我只是无法让 include 工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:29:31.140

将我的评论移至答案，因为不确定 WikingFrog 是否通过电子邮件收到通知：评论

你为什么在方法上调用 new ？`var testresult = testMethod();`应该管用

此外，您不需要`<?php`.php 文件中的 open 标记，这可能是您问题的根源。

# linux - 恢复使用 rsync -avz --delete 删除的文件

> ID：13180864
> 
> 赞同：6
> 
> 时间：2012-11-01T16:00:08.333
> 
> 标签：linux, rsync, ubuntu-11.10, ext4

是否可以恢复使用 rsync -avz --delete 删除的文件？如果是，有哪些建议的工具可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T16:22:58.837

我假设您在某些 unix 系统上运行 rsync。如果您没有文件系统的备份，那么从 unix 文件系统中恢复已删除的文件是一个冗长乏味的过程。高级步骤：

1.  查找文件所在的分区
2.  创建整个分区的映像`% dd if=/partition of=partition.img ..` （假设您有足够的空间将其存储在本地不同分区的某个地方，或者您可以将其复制到不同的系统`% dd if=/partition | ssh otherhost "dd of=partition.img"`）
3.  以十六进制编辑打开 img 文件（假设您知道丢失的文件的内容，并且在看到内容时可以识别它们。）
4.  注意文件的字节偏移量和长度
5.  用于`grep -b`提取丢失文件的内容。

请享用！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T14:27:23.483

我无法让 extundelete 工作，所以我最终使用 photorec + find/grep 来恢复我的重要文件。

# sql-server - SSIS Oracle 查询返回无行

> ID：13180867
> 
> 赞同：0
> 
> 时间：2012-11-01T16:00:15.207
> 
> 标签：sql-server, ssis, oracle10g

我在 SQL Developer（Oracle 的工具）中运行查询，将其复制到 SSIS，单击预览，但它什么也没返回。它在 Oracle 中运行良好。有任何想法吗？在 Oracle 中运行大约需要 120 秒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T03:58:30.287

预览有 30 秒超时，您无法延长 AFAIK。这可能是您无法预览的原因。

尝试在下游添加一个虚拟转换（例如多播），然后在两者之间的数据流路径上添加一个数据查看器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-03T21:37:26.637

我看到这篇文章已经休眠了一段时间，但我发现添加`UseSessionFormat=True;`到连接字符串的末尾解决了这个问题。

# java - 从浏览器运行小程序时出现 InvocationTargetException

> ID：13180871
> 
> 赞同：0
> 
> 时间：2012-11-01T16:00:27.127
> 
> 标签：java, applet, processing

我有一个使用 Processing (http://www.processing.org) 库的小程序。处理库包含在`core.jar`我试图将其嵌入网页中。这是html

```
<html>    
<body>
<applet width=300 height=300 code="Applet.class" archive="core.jar"> 
   no applet
</applet>
</body>    
</html> 
```

小程序代码如下

```
import processing.core.*;
import java.util.ArrayList;

class Heart extends PApplet //subclass of Applet
{
    Particle p;
    ArrayList<Particle> particles;
    PImage heart;

    public void setup() //These are overrides of PApplet methods
    {
        ...do stuff...
    }

    public void draw() //These are overrides of PApplet methods
    {
        ...more stuff....
    }

    PVector randVec(float min, float max)
    {
      ...etc etc....
    }
} 
```

我可以发布完整的小程序代码，但我不知道是否有必要。

当我加载 .html 页面时。我得到一个 java.lang.reflect.InvocationTargetException。Java 控制台中没有堆栈跟踪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-15T09:33:00.687

2个问题：

1）心脏类应该是公开的：

```
 public class Heart extends PApplet { 
      ... 
```

2）您的小程序标签应为：

```
<applet width=300 height=300 code="Heart.class" archive="core.jar"> 
```

# html - 强制浏览器专注于特定元素

> ID：13180873
> 
> 赞同：2
> 
> 时间：2012-11-01T16:00:33.333
> 
> 标签：html, animation, webkit

我刚刚完成了一个使用 HTML5 和 CSS webkit 动画的 iOS 网络应用程序。

假设当我在屏幕上拖动任何位置时，我的手指会跟随元素“A”。当元素 A 跟随我的手指时，我注意到一些丢帧。这仅在 iPad 上很明显。如果我一直触摸元素 A，那么在不丢帧的情况下跟随我的触摸移动会好很多，但是如果我触摸其他任何东西而不是元素 A 并返回到元素 A，那么元素 A 会丢帧很长时间试图跟随我的手指，就像浏览器一样失去了对元素的关注，因为我点击了其他地方。

有没有办法强制浏览器将焦点保持在元素 A 上，这样它就不会掉帧？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:25:51.640

您基本上可以`blur`通过重新聚焦元素来取消事件。以下是使用 jQuery 的方法：

```
$(document).ready(function () {
    $(element).blur(function () {
        var self = this;
        setTimeout(function () { self.focus(); }, 20);
    });
}); 
```

# python - 如何在 Django 中呈现缓存的 JSONP 视图

> ID：13180876
> 
> 赞同：1
> 
> 时间：2012-11-01T16:00:53.110
> 
> 标签：python, django, json, caching, django-views

我正在查询一个选举信息数据库并将它们吐出 JSONP 以用于我们正在创建的一些 ajax/jQuery 小部件。

然而，我想要做的是缓存视图，以便每次呈现小部件时都不会收到新请求。

我遇到了两个问题。

1.  我应该使用哪种缓存方法来呈现此视图，以便数据库不会受到重创。

2.  我需要将视图呈现为 JSONP，这意味着我需要回调变量是动态的（它当前与我的脚本一起使用，但我担心它不会与缓存视图一起使用）。

这是我的代码的样子。

```
from models import race
from models import candidates
from django.http import HttpResponse
from django.utils import simplejson

def data(request):

    data = []
    races = race.objects.all()

    for election in races:

        race_candidate = candidates.objects.filter(race__id=election.pk)

        candidate_info = []
        for n,candidate in enumerate(race_candidate):
            candidate_values = {
                "name":candidate.name,
                "percent":candidate.percent,
                "totalvotes":candidate.totalvotes,
                "partyname":candidate.partyname,
                "partyabbrv":candidate.partyabbrv,
                }

            candidate_info.append(candidate_values)

        race_values = {
            "title":election.title,
            "description":election.description,
            "priority":election.priority,
            "decided":election.decided,
            "candidates":candidate_info,
            }

        data.append(race_values)

    json_races = '{"races":' + simplejson.dumps(data) + '}'

    if("callback" in request.GET.keys()):
        callback = request.GET["callback"]
    else:
        callback = None

    if(callback):
        response = HttpResponse("%s(%s)" % (
                callback,
                simplejson.dumps(data)
                ), mimetype="application/json"
            )
    else:
        response = HttpResponse(json_races, mimetype="application/json")
    return response 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T16:17:33.880

您必须将[低级缓存 API](https://docs.djangoproject.com/en/dev/topics/cache/#the-low-level-cache-api)与您喜欢的任何缓存后端一起使用。

```
from django.core.cache import cache

...

CACHE_TIMEOUT = 3600      # choose your timeout

def data(request):
    jsonstring = cache.get('elections')

    if jsonstring is None:
        data = [{
                "title": election.title,
                "description": election.description,
                "priority": election.priority,
                "decided": election.decided,
                "candidates": [
                      {
                         "name": candidate.name,
                         "percent": candidate.percent,
                         "totalvotes": candidate.totalvotes,
                         "partyname": candidate.partyname,
                         "partyabbrv": candidate.partyabbrv,
                    } for candidate in election.candidates_set.all()
                  ],
                } for election in race.objects.all()]

        jsonstring = simplejson.dumps(data)
        cache.set('elections', jsonstring, CACHE_TIMEOUT)

    callback = request.GET.get('callback')

    if callback:
        response = HttpResponse("%s(%s)" % (callback, jsonstring),
                                mimetype="application/json")
    else:
        response = HttpResponse('{"races":' + jsonstring + '}',
                                mimetype="application/json")

    return response 
```

在你的，根据[文档](https://docs.djangoproject.com/en/dev/topics/cache/#setting-up-the-cache)`settings.py`进行配置。内存后端是最简单的，memcached 可能是最好的。`CACHE`

# qt - 在 QTreeWidget 中拖放 QTreeWidgetItems 时，如何捕捉已移动的项目以便检索其新父项？

> ID：13180884
> 
> 赞同：2
> 
> 时间：2012-11-01T16:01:14.990
> 
> 标签：qt, drag-and-drop, pyqt

我有一个简单的 TreeWidget，其中填充了子类 TreeWidgetItems。当这些项目之一通过内部拖放事件移动时，我如何捕捉被移动的项目？

当项目被移动时，我想抓住这个项目，这样我就可以得到它的新父项目。

我尝试使用 eventFilter 来查找 ChildRemoved 事件，但是当我为孩子询问事件时，它返回一个通用 QObject，而不是我的子类项目。我错过了什么？

```
def eventFilter(self, sender, event):
    if event.type() == QtCore.QEvent.ChildRemoved:
        widgetItemThatMoved = event.child()
        self.updateSomething(widgetItemThatMoved)
    return False 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T07:27:38.337

你需要实现一个dragEnterEvent、dragMoveEvent和dropEvent

要访问丢弃的 QTreeWidgetItem(s)，您可以在 dropEvent 中执行此操作

```
class myTreeWidget(QtGui.QTreeWidget):
    def __init__(self, parent = None):
        super(myTreeWidget, self).__init__(parent)
        self.setAcceptDrops(True)

    def dragEnterEvent(self, event):
        print('dragEnterEvent happened')
        event.acceptProposedAction()

    def dragMoveEvent(self, event):
        print('dragMoveEvent happened')
        event.acceptProposedAction()

    def dropEvent(self, event):
        print('dropEvent happened')
        widgetItemThatMoved=event.source().currentItem()
        parentThatReceivedIt=self.itemAt(event.pos())
        self.theFunc(parentThatReceivedIt,widgetItemThatMoved )
        event.acceptProposedAction()

    def functionToCallWhenDropped(self,theFunc):
        #this method allows you to pass a reference to this class so you assign it to a local variable for easy calling.
        self.theFunc=theFunc 
```

最好添加一个额外的方法 functionToCallWhenDropped 以便您可以访问父类方法，在父类中，您将执行类似这样的操作

```
 def someMethod(self):
        self.tw=myTreeWidget(parent)
        self.tw.functionToCallWhenDropped(self.wasDropped)

    def wasDropped(self, newParent, theMovedChild):
        #this method will be called the very moment you drop the item
        print(newParent.text(0)+" => "+theMovedChild.text(0)) 
```

我希望这可以帮助别人。

# php - PHPunit mock 仅观察

> ID：13180889
> 
> 赞同：3
> 
> 时间：2012-11-01T16:01:28.720
> 
> 标签：php, phpunit

我在理解模拟对象时遇到了一些问题。

我想要的是一个**正常工作**的观察者，但要确保使用正确的参数调用方法。

据我所知，这应该是我正在寻找的：观察者：

```
class Observer
{
    public function returnFooIfBar($bar)
    {
        return ($bar == 'bar') ? 'foo' : ;
    }
} 
```

学科：

```
class Subject
{
    $obs;
    __construct(Observer $dependency)
    {
        $this->obs = $dependency;
    }

    public function tradeStrings($string)
    {
        $this->obs->returnFooIfBar($string);
    }
} 
```

测试：

```
class SubjectTest
{
    public function testCallsObsMethod()
    {
        $obs = $this->getMock('Observer') ;
        $obs->expect($this->once()) 
            ->method('returnFooIfBar') 
            ->with($this->equlTo('bar')) ;

        $subj = new Subject($obs);
        $returnString= $subj->TradeStrings('bar') ;

        $this->assertEqual('foo', $returnString) ;
    }
} 
```

据我了解，这测试：

1.  Observer::getFooIfBar 被调用一次。
2.  Observer::getFooIfBar 得到字符串 'bar' 3\. 该方法按照类中定义的方式工作，并将 'foo' 作为字符串返回。

据我了解，除了没有运行构造函数/自动加载之外，原始类的功能没有改变。

如果我在运行 getMock() 时模拟一个方法，则模拟对象的方法只有在我指定它时**才会返回一些东西。**

```
$obs = $this->getMock('Observer', array('returnFooIfBar'));
$obs->expects($this->once())
    ->method('returnFooIfBar')
    ->with('bar')
    ->will($this->returnValue('foo'); 
```

我理解对吗？如果不能，请您为我澄清一下，因为我希望对此有所了解。:)

**编辑：**更改了帖子，以使我更清楚我所追求的以及我目前对它的理解。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T16:18:38.043

如果您让 phpunit 创建一个模拟对象，它会在内部构建一个新的临时类，该类扩展原始类并使用模拟特定代码实现该类的所有方法。

这背后的想法是解耦测试用例中的对象。虽然您给定的示例是有效的，但您不会以这种方式使用它。但是您的示例测试无论如何都会失败，因为模拟函数`returnStringFooIfBar`不会返回任何内容。

这是它应该如何工作的：

```
$obs = $this->getMock('observer') ;
$obs->expect($this->once()) 
    ->method('returnStringFooIfBar') 
    ->with($this->equlTo('bar'))
    ->will($this->returnValue('foo'));

$returnString= $obs->returnStringFooIfBar ('bar') ;
$this->assertEqual('foo', $returnString) ; 
```

但是现实世界的测试用例会涉及一些要测试的对象：

```
class TestObject {

    private $observer;
    public function __construct($observer) {
        $this->observer = $observer;
    }

    public function doMagicAndNotify() {
        // do heavy magic

        //notify observer
        $obsresult = $this->observer->returnStringFooIfBar('bar');

        return 'didmagic';
    }
}

class TestObjectTest extends PHPUnit_Framework_TestCase {

    public function testObserverCalling() {
        $obs = $this->getMock('observer') ;
        $obs->expect($this->once()) 
            ->method('returnStringFooIfBar') 
            ->with($this->equlTo('bar'));

        $test = new TestObject($obs);
        $returnString= $test->doMagicAndNotify() ;

        $this->assertEqual('didmagic', $returnString) ;
    }
} 
```

**编辑：**

> 我想要的是一个正常工作的观察者，但要确保使用正确的参数调用方法。
> 
> 据我了解，除了没有运行构造函数/自动加载之外，原始类的功能没有改变。

它实际上是相反的。Observer 的临时子类覆盖所有（或指定）方法并更改原始功能（模拟方法的父级根本不执行）。它不会覆盖构造函数，无论如何都会调用它。

不可能断言模拟方法的方法调用并同时调用其原始方法。

请参阅[方法模板](https://github.com/sebastianbergmann/phpunit-mock-objects/blob/master/src/Framework/MockObject/Generator/mocked_class_method.tpl.dist)和[生成器](https://github.com/sebastianbergmann/phpunit-mock-objects/blob/master/src/Framework/MockObject/Generator.php)以供参考。

**请记住**：你不是在这里测试你的观察者的正确行为，你是在嘲笑它的行为来测试这个主题。

sitenote:`$this->returnCallback($someCallback)`是一个强大的功能，可能会帮助你。我不喜欢这个主意，但你可以这样做：

```
public function testObserverCalling() {
    $obs = new Observer();
    $obsmock = $this->getMock('observer') ;
    $obsmock->expect($this->once()) 
        ->method('returnStringFooIfBar') 
        ->with($this->equlTo('bar'))
        ->will($this->returnCallback(array($obs, 'returnStringFooIfBar')));

    $test = new TestObject($obsmock);
    $returnString= $test->doMagicAndNotify() ;

    $this->assertEqual('didmagic', $returnString) ;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-14T20:15:58.990

您现在可以在 phpunit 中使用`enableProxyingToOriginalMethods()`.

```
class SubjectTest extends \PHPUnit\Framework\TestCase
{
    public function testCallsObsMethod()
    {
        $obs = $this->getMockBuilder('Observer')
          ->enableProxyingToOriginalMethods()
          ->getMock();
        $obs->expect($this->once()) 
          ->method('returnFooIfBar');

        $subj = new Subject($obs);
        $returnString= $subj->tradeStrings('bar') ;

        $this->assertEqual('foo', $returnString) ;
    }
} 
```

# vb.net - 如何通过 VB.net 中的命名管道发送类

> ID：13180897
> 
> 赞同：1
> 
> 时间：2012-11-01T16:01:42.370
> 
> 标签：vb.net, serialization, named-pipes

使用 VB2008，我在需要通信的 2 台计算机上有 2 个应用程序。我设置了一个命名管道，到目前为止，它正在工作。我可以在这两个程序之间来回发送字符串。

现在，我需要能够发送一个类或一个对象。我在某处读到序列化是要走的路。所以，在客户端，我有：

```
Public Class cTest

    Dim Var1 As Boolean
    Dim Var2 As String = "a test"
    Dim Var3 As New Collections.ArrayList

    Public Sub AddItem(ByVal Item As String)
        Var3.Add(Item)
    End Sub

End Class

Private Sub Button8_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button8.Click

        Dim oClasse As New cTest

        oClasse.AddItem("StarWars")
        oClasse.AddItem("StarTrek")

        oPipe.SendToPipe(oClasse)
    End Sub

End Class

Public Sub SendToPipe(ByVal test As cTest)

        Dim xmlTest As New Xml.Serialization.XmlSerializer(GetType(cTest))
        xmlTest.Serialize(pipeClient, test)

    End Sub 
```

在服务器端（在远程计算机上）：

```
Public Function ReadString() As String

        Dim len As Integer = 0
        len = CType(ioStream.ReadByte(), Integer) * 256
        len += CType(ioStream.ReadByte(), Integer)

        Try
            Dim serializer As New Xml.Serialization.XmlSerializer(GetType(cTest))
            Dim Test As cTest

            Test = CType(serializer.Deserialize(ioStream), cTest)
        Catch ex As Exception
        End Try

End Function 
```

serializer.Deserialize 抛出异常，说明 XML 格式不正确。

我做错了什么？

感谢您的时间和帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:34:00.690

最后，经过大量测试和谷歌搜索，我想通了：

在客户端使用以下代码时，它可以工作：

```
Dim oClasse As New cTest

oClasse.AddItem("StarWars")
oClasse.AddItem("StarTrek")

Using PStream As IO.Pipes.NamedPipeClientStream = New IO.Pipes.NamedPipeClientStream(".", "VisionEnginePipeRead1", PipeDirection.Out, PipeOptions.None, TokenImpersonationLevel.None)
            PStream.Connect()
            Dim xmlTest As New Xml.Serialization.XmlSerializer(GetType(cTest))
            xmlTest.Serialize(PStream, oClasse)
End Using 
```

这在服务器端：

```
Dim Test As cTest

Using PStream As NamedPipeServerStream = New NamedPipeServerStream(pipeName,   PipeDirection.In, 1, PipeTransmissionMode.Byte, PipeOptions.None)
            PStream.WaitForConnection()
            Dim serializer As New Xml.Serialization.XmlSerializer(GetType(cTest))

            Test = CType(serializer.Deserialize(PStream), cTest)
End Using 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:06:02.687

如果我是你，我会使用 WCF 自托管服务并让两者使用回调进行通信

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T18:36:20.990

这开始是一个评论，但我的空间已经用完了。我不是命名管道通信方面的专家，但是已经有几个小时了，这可能不是真正的问题。

您需要首先在同一个应用程序中测试序列化/反序列化。换句话说，首先从图片中取出管道。这将隔离这是序列化问题还是命名管道问题。假设您的代码在同一个应用程序中完成时可以工作，那么您需要比较两个应用程序生成的 xml - 让它们都执行序列化。如果 xml 相同（我对此表示怀疑），则将其通过管道并再次进行比较。

在这里走得更远，但您可能会看到 ctest 对象的命名空间不同。如果是这种情况，在两个应用程序之间共享的库中定义共享类可能会有所帮助。

# javascript - 如何在 javascript/jquery/undescore 中将数组减少到特定数量？

> ID：13180903
> 
> 赞同：0
> 
> 时间：2012-11-01T16:02:07.637
> 
> 标签：javascript, jquery, arrays, underscore.js

我有一个像这样的数组：

```
["a", "b", "c", "d", "e"] 
```

现在我只想拥有前 3 个项目。我将如何*动态*删除最后两个，以便我也可以拥有一个 20 个字母的数组，但也可以将其减少到前 3 个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T16:05:41.230

```
var a = ["a", "b", "c", "d", "e"];
a.slice(0, 3); // ["a", "b", "c"]

var b = ["a", "b", "c", "d", "e", "f", "g", "h", "i"];
b.slice(0, 3); // ["a", "b", "c"] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T16:05:58.577

怎么样[`Array.slice`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)？

```
var firstThree = myArray.slice(0, 3); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T16:05:46.787

[拼接](http://www.w3schools.com/jsref/jsref_splice.asp)功能似乎是您所追求的。您可以执行以下操作：

```
myArray.splice(3); 
```

这将删除第三个之后的所有项目。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-01T16:06:56.860

要提取前三个值，请使用[`slice`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)：

```
var my_arr = ["a", "b", "c", "d", "e"];
var new_arr = my_arr.slice(0, 3); // ["a", "b", "c"] 
```

要删除最后一个值，请使用[`splice`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)：

```
var removed = my_arr.splice(3, my_arr.length-3); // second parameter not required
// my_arr == ["a", "b", "c"] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T11:14:31.817

在 underscore.js 我们可以使用第**一个**函数

**_.first(array, [n])**别名：head

*返回数组的第一个元素。传递 n 将返回数组的前 n 个元素。*

```
_.first(["a", "b", "c", "d", "e"],3);
=> ["a", "b", "c"] 
```

# sql - 只有在唯一列的情况下才能插入行的 Sql 表

> ID：13180907
> 
> 赞同：-1
> 
> 时间：2012-11-01T16:02:20.053
> 
> 标签：sql, postgresql, database-design, unique

我想创建一个包含人、房子和家庭的表格，其中只有来自同一家庭的人才能住在同一所房子里。

到目前为止，我所拥有的内容不起作用，因为我只能发布具有独特家庭和房屋的一行。有没有办法做到这一点？

```
CREATE TABLE familyhouse (
  person VARCHAR(64),
  house VARCHAR(64),
  family VARCHAR(64),
  unique(house,family)
); 
```

正确表格示例：

```
man,'1','1'
man2,'1','1'
man3,'1','1'
man4,'2','2'
man5,'2','2'
man6,'3','3' 
```

不正确的表格示例：

```
man,'1','1'
man2,'1','1'
man3,'1','2' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:35:10.417

我会利用外键的力量，将房子和家庭放在他们自己的桌子（family_house）和居民的单独桌子上。

```
CREATE TABLE family_house (
  house VARCHAR(128) NOT NULL UNIQUE,
  family VARCHAR(64) NOT NULL,
  PRIMARY KEY (house, family)
);

CREATE TABLE residents (
  person VARCHAR(64),
  house VARCHAR(128),
  family VARCHAR(64),
  UNIQUE (person, house, family),
  FOREIGN KEY (house, family) REFERENCES family_house
); 
```

这样我就可以在同一个家中有多个居民，但一个家只能有一个家庭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:43:15.780

您可以使用[CHECK CONSTRAINT](http://www.postgresql.org/docs/8.1/static/ddl-constraints.html)来维护这一点：

```
CREATE TABLE familyhouse (
  person VARCHAR(64),
  house VARCHAR(64),
  family VARCHAR(64)
);
CREATE FUNCTION CheckFamilyHouse(VARCHAR(64), VARCHAR(64))
RETURNS BOOLEAN AS $$
    SELECT CASE WHEN EXISTS 
                        (   SELECT  1
                            FROM    FamilyHouse
                            WHERE   Family = $1
                            AND     House != $2
                        )
                THEN false
                ELSE true
            END
$$ LANGUAGE SQL;

ALTER TABLE familyHouse 
ADD CONSTRAINT CHK_FamilyHouse
CHECK(CheckFamilyHouse(family, house)); 
```

With the above in place the second insert below will fail:

```
INSERT INTO familyhouse VALUES(1, 1, 1);
INSERT INTO FamilyHouse VALUES(2, 2, 1); 
```

with the message:

```
ERROR: new row for relation "familyhouse" violates check constraint "chk_familyhouse": INSERT INTO FamilyHouse VALUES(2, 2, 1) 
```

**[SQL Fiddle Example](http://www.sqlfiddle.com/#!1/68aaa/4)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T16:39:11.197

```
create table house (
    id serial primary key
);

create table family (
    id serial primary key
);

create table house_family (
    house_id integer,
    family_id integer,
    primary key (house_id, family_id),
    foreign key (house_id) references house (id),
    foreign key (family_id) references family (id)
);

create table person (
    id serial primary key,
    family_id integer,
    house_id integer,
    foreign key (house_id, family_id) references house_family (house_id, family_id)
);

insert into house values (1),(2),(3);
insert into family values (1),(2),(3);
insert into house_family values (1,1),(2,2),(3,3);
insert into person (family_id, house_id) values (1,1),(1,1);

select * from house;
 id 
----
  1
  2
  3

select * from family;
 id 
----
  1
  2
  3

select * from house_family;
 house_id | family_id 
----------+-----------
        1 |         1
        2 |         2
        3 |         3

select * from person;
 id | family_id | house_id 
----+-----------+----------
  5 |         1 |        1
  6 |         1 |        1 
```

现在，如果您尝试将来自 family_id 2 的人插入同一个 house_of family_id 1 中：

```
insert into person (family_id, house_id) values (2,1);
ERROR:  insert or update on table "person" violates foreign key constraint "person_house_id_fkey"
DETAIL:  Key (house_id, family_id)=(1, 2) is not present in table "house_family". 
```

# java - Android动画垃圾回收问题

> ID：13180908
> 
> 赞同：2
> 
> 时间：2012-11-01T16:02:26.857
> 
> 标签：java, android, animation, garbage-collection

*   我有一个`arraylist of AnimationDrawables`in android，其中的每个元素都对应一个特定的动画。每个动画都发生在单击特定按钮时。
*   将帧同步添加到动画（单击按钮时）会导致应用程序的响应速度变慢。所以我想到了使用异步任务为我获取帧，并且在我第一次加载活动时它工作正常。
*   第二次非常慢，即动画在很长一段时间后出现。如果我以某种方式尝试缓存动画（通过使动画对象静态），它可以正常工作 2 或 3 次，但随后又会变慢。
*   对于安卓冰淇淋三明治：我还在清单文件中使用了 android:hardwareAccelerated="true" android:largeHeap="true" 。内存似乎是个问题。每个动画一次需要大约 500Kb 的内存。

有人可以建议一个替代方案吗？我知道强迫垃圾是不可能的。那么我能做什么呢？

# java - 自定义模式对话框

> ID：13180909
> 
> 赞同：0
> 
> 时间：2012-11-01T16:02:27.840
> 
> 标签：java, multithreading, swing, swingutilities, invokelater

我正在创建自己的对话框，它基本上是一个 JPanel，设置为 JFrame 上的玻璃窗格。我想让我的对话框模态化，因为在对话框可见时不执行 setVisible() 之后的所有代码，一旦对话框关闭，setVisible() 之后的其余代码必须继续。

为此，我使用线程来显示我的对话框。我知道 SwingUtilities.invokeLater() 方法必须用于更新 gui，因为它是在另一个线程中执行的。但是我的对话框没有显示在屏幕上。

这是我的代码示例：

```
final JFrame frame = new JFrame();
frame.setBounds(0, 0, 1024, 768);
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.getContentPane().setLayout(null);

JButton button = new JButton("Text");
button.setBounds(200, 300, 110, 50);
button.addActionListener(new ActionListener() {

    boolean dispose;

    public void actionPerformed(ActionEvent e) {
        try {
            Thread thread = new Thread(new Runnable() {
                public void run() {
                    final JPanel panelGlass = new JPanel(null);
                    panelGlass.setBounds(frame.getBounds());
                    panelGlass.setBackground(Color.red);
                    frame.setGlassPane(panelGlass);

                    JButton btnClose = new JButton("close");
                    btnClose.setBounds(100, 100, 110, 50);
                    btnClose.addActionListener(new ActionListener() {
                        public void actionPerformed(ActionEvent e) {
                            dispose = true;
                        }
                    });
                    panelGlass.add(btnClose);

                    SwingUtilities.invokeLater(new Runnable() {
                        public void run() {
                            dispose = false;
                            panelGlass.setVisible(true);
                        }
                    });

                    while (!dispose) {
                        try {
                            Thread.sleep(100);
                        } catch (InterruptedException ex) {
                            Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
                        }
                    }
                    panelGlass.setVisible(false);
                }
            });
            thread.start();
            thread.join();
        } catch (Exception ex) {
            Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
});
frame.getContentPane().add(button);

frame.setVisible(true); 
```

为什么我的对话框没有显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:12:29.040

问题在这里：

```
thread.start();
thread.join(); 
```

您启动线程，但您立即等待它完成。这会阻止 UI 线程并且不允许它处理您的`SwingUtilities.invokeLater`更新。

我真的看不出这个`join`呼吁存在的任何充分理由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:15:21.253

你不能那样做，因为

*   您正在从事件调度线程以外的线程访问 Swing 组件
*   发生所有 UI 绘制的事件调度线程完全被对`Thread.join()`.

[您应该能够使用 Java 7 的SecondaryLoop](http://docs.oracle.com/javase/7/docs/api/java/awt/SecondaryLoop.html)执行您想要的操作，但我从未使用过它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T22:12:56.940

*   frame.getRootPane.setGlassPane

*   你的想法很好，但必须从键盘来消费（）事件，只使用 e.consume（）添加 KeyListener 因为 GlassPane 只消费鼠标事件

*   也可以使用 GlassPane 创建整个 Gui，

*   里面的actionperformed显示准备好的GlassPane，然后启动一个Runnable.Thread

*   我有一个关于乘法玻璃板的问题

*   使用JLayer Java7，基于JXLayer Java6

*   您的问题是预订示例，原因是为什么 SwingWorker 是用 Java 实现的

手机回复

# actionscript-3 - box2das3中的表面

> ID：13180910
> 
> 赞同：0
> 
> 时间：2012-11-01T16:02:31.973
> 
> 标签：actionscript-3, box2d, surface, curve

我正在为 as3 使用[box2dflash](http://www.box2dflash.org)，我需要像这样创建弯曲的地面![需要接地](../Images/7d579549ec9da75e14dfde3044490541.png)。

事实：

*   据我所知，我无法创建一个实体对象，因为 box2d 支持凸对象；
*   我没有找到任何基于行的对象。

问题：有没有比下图所示的方法更好的方法？ ![也许不好的解决方案](../Images/bad4adc76fc427a26ecf0b69635543dd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T17:28:41.837

我不能肯定地说，但我认为这是最好的方法。

这篇文章中有一些代码可以做类似的事情： [Terrain like tiny wing](http://www.emanueleferonato.com/2011/08/03/create-a-terrain-like-the-one-in-tiny-wings-with-flash-and-box2d-adding-a-car/)

您将需要查看“drawHill”函数（第 91 行）。抱歉，我无法提供更多帮助，我对 box2D 的经验有限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:35:45.737

我发现你实际上可以创建线。

```
var groundFixtureDef:b2FixtureDef = new b2FixtureDef();
groundFixtureDef.density = 1;
var someShape: b2PolygonShape = new b2PolygonShape();
someShape.SetAsArray( new Array(new b2Vec2(-3,0),new b2Vec2(2,0)), 2);
groundFixtureDef.shape = someShape; 
```

这将创建一条简单的线。但是如果你添加更多的点，它会形成凸形。

# javascript - 在本地机器上使用 javascript 创建文件

> ID：13180913
> 
> 赞同：1
> 
> 时间：2012-11-01T16:02:37.607
> 
> 标签：javascript, firefox

您好，我在下面提到了使用 Firefox 浏览器在本地驱动器上创建 txt 文件的代码，但它不起作用，请帮我解决这些问题

```
function WriteTest() {
    var sFileContent="Dhaval Patel Tried to make life easy";
    var sFilePath="C:/Users/Dhaval Patel/Desktop/RFQ Forms/Test.txt";
    alert(sFilePath +"  "+sFileContent);
    try {
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
    }   
    catch (e) {
        alert("Permission UniversalXPConnect denied.");
    }
    file=Components.classes['@mozilla.org/file/local;1'].createInstance(Components.interfaces.nsILocalFile);
    file.initWithPath(sFilePath);
    file.createUnique(Components.interfaces.nsIFile.NORMAL_FILE_TYPE,420);
    outputStream=Components.classes['@mozilla.org/network/file-output-stream;1'].createInstance(Components.interfaces.nsIFileOutputStream);
    outputStream.init(file,0x04|0x08|0x20,420,0);
    outputStream.write(sFileContent, sFileContent.length);
    outputStream.close();
} 
```

# jquery - 以编程方式打开搜索对话框

> ID：13180918
> 
> 赞同：0
> 
> 时间：2012-11-01T16:02:49.150
> 
> 标签：jquery, jqgrid

我想在 jqgrid 中以编程方式打开一个搜索对话框。

在向服务器提交搜索 ajax 请求后，我想再次以编程方式打开它，那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:08:11.597

解决此问题的一种方法是在搜索按钮上强制执行一个`.click()`事件。

我这样做：

```
$("#search_list2").click(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:08:28.080

您可以尝试使用`fbox_`前缀和网格的 id。假设您`jqGrid`有 id `myGridId`，那么“高级搜索”对话框将有`id="fbox_myGridId"`. 这应该会打开搜索框：

```
$("#fbox_myGridId").show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T16:08:39.620

似乎您可以在使用 jqGrid 的搜索网格时将其设置为一个选项：

```
$("#grid").searchGrid({ closeAfterSearch: false }); 
```

我在这里找到了，这可能与您的问题有关：[可能使 jqGrid 搜索框留在页面上？](https://stackoverflow.com/questions/5688158/possible-to-make-jqgrid-search-box-stay-on-page)

您还可以将其设置为整个网格的默认值：

```
$.extend($.jgrid.search, { 
    closeAfterSearch: false
}); 
```

# ruby-on-rails - 保存具有 has_many 关联的模型

> ID：13180920
> 
> 赞同：0
> 
> 时间：2012-11-01T16:02:59.233
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

这是我的问题，我有三个模型：

产品型号

```
class Product < ActiveRecord::Base
  attr_accessible :description, :title, :photo
  has_many :votes

  has_attached_file :photo, :styles => { :medium => "300x300" }

  before_save { |product| product.title = title.titlecase }

  validates :title, presence: true, uniqueness: { case_sensitive: false }
  validates :photo, :attachment_presence => true

end 
```

用户模型

```
class User < ActiveRecord::Base
    def self.from_omniauth(auth)
      where(auth.slice(:provider, :uid)).first_or_initialize.tap do |user|
        user.provider = auth.provider
        user.uid = auth.uid
        user.name = auth.info.name
        user.oauth_token = auth.credentials.token
        user.oauth_expires_at = Time.at(auth.credentials.expires_at)
        user.save!
      end
    end
end 
```

投票模型

```
class Vote < ActiveRecord::Base
  belongs_to :product
  attr_accessible :user_id
end 
```

现在我需要在我的 VoteModel 上保存一条带有 ProductId 和 UserId 的记录。但是我不知道该怎么做，有人可以帮我吗？

更新

* * *

这是我的投票视图

```
<%= form_for @vote, :html => { :multipart => true } do |f| %>

    <%= f.label :user_id %>
    <%= f.text_field :user_id %>

    <%= f.label :product_id %>
    <%= f.text_field :product_id %>

    <%= f.submit "Crear Producto" %>
<% end %>

<%= link_to 'Cancel', root_path %> 
```

这是控制器

```
class VotesController < ApplicationController

    def create
        @some_product = Product.find(params[:id])
        some_user = current_user
        vote = Vote.create(:user => some_user, :production => some_product)
        save!
    end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:45:14.627

首先 - 您的关联应该在所有模型中正确定义：

```
class Product < ActiveRecord::Base
  has_many :votes
  #...
  # bonus - to know who are the users who voted for the product
  has_many :users, :through => :votes
end

class User < ActiveRecord::Base
  has_many :votes
  #...
  # bonus - to know what products a user has voted on
  has_many :products, :through => :votes
end

class Vote < ActiveRecord::Base
  belongs_to :product
  belongs_to :user
  #...
end 
```

储蓄应该是直截了当的

```
Vote.create(:user => some_user, :production => some_product) 
```

从产品中获取投票

```
some_product.votes 
```

访问从产品投票的用户

```
some_product.users 
```

# parsing - 使用 bison++ 创建 glr 解析器

> ID：13180923
> 
> 赞同：2
> 
> 时间：2012-11-01T16:03:07.057
> 
> 标签：parsing, bison, flex-lexer, glr

我最近一直在开发一个带有 flex/bison bison 对的解析器。我无法让解析器以我想要的方式适应我的应用程序。这包括使解析器可重入和线程安全以及将其很好地适应应用程序框架的问题。

我最近转向 flex++/bison++，它为 C++ 编程提供了许多优势，并提供了一种非常清晰且易于管理的方式来使用 OOP 连接和扩展解析器。Bison++ 与原始野牛共享大部分接口。缺点是围绕特定用法的文档很差。一般来说，界面要直观得多，所以直到现在这还不是问题。

随着我的解析器的开发取得进展，我已经意识到在一些更复杂的解析器中使用 GLR 的潜力。

**问题**：是否可以专门在 bison++ 中使用 GLR，如何激活该选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:43:36.877

GNU Bison 还支持 C++，请参阅[http://www.gnu.org/software/bison/manual/bison.html#C++-Parsers](http://www.gnu.org/software/bison/manual/bison.html#C++-Parsers)。这种支持包括 GLR。

# c++ - What does m(i) represent in the following program? c++

> ID：13180933
> 
> 赞同：0
> 
> 时间：2012-11-01T16:03:32.813
> 
> 标签：c++

I am trying to learn some OOP and I have a problem understanding the following program:

```
#include<iostream>
#include<conio.h>
#include<string.h>
using namespace std;

class A
{
public:
    A(int i) : m(i){}

    friend class B;

    friend void g_afiseaza_m();
private:
    int m;
};

class B
{
public:
    void afiseaza_m()
    {
        A a(250);
        cout<<"clasa B este prietena cu clasa A"<<endl<<" poate accesa membrul privat A::m"<<endl<<a.m<<endl;
    }
};

void g_afiseaza_m()
{
    A a(300);
    cout<<"functia g_afiseaza_m nu este un membru al clasei A dar este prieten"<<endl<<"poate accesa membrul privat A::m"<<endl<<a.m<<endl;
}

int main()
{
    B b;
    b.afiseaza_m();
    g_afiseaza_m();
    getch();
    return 0;
} 
```

Can you please tell me what does this line do: public:A(int i) :m(i){} private: int m? I undestand that A is a constructor with the int parameter i, and that m is a private member of class A but I can't understand what is m(i) ? Is this a matter of syntax ?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T16:04:47.103

The `m(i)` in your constructor initializes the `m` member with value `i`.

Your example has the same outcome (and not behaviour) as

```
A(int i) {
    m = i;
} 
```

Initializing members using initializer lists as in your example is more efficient because the member's constructor is called directly with parameter `i` whereas in the example above, the empty constructor of `m` is called and *then* `m` is assigned value `i`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T16:04:39.017

That's a constructor initializer list, it initializes the member `m` of the class with the specified value.

It's there to prevent initialization followed by immediate assignment in some cases (not here).

Some members can only be initilized in the initializer list - `const` members, reference members, types that aren't default-constructable.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-01T16:05:01.327

```
A(int i) : m(i) {}
         ^^^^^^ this is called member-initialization list. 
```

Here `m(i)` means `m` is being initialized with `i`.

If you have more members, say, `x`, `y` in your class, then you can write this:

```
A(int i) : m(i), x(i*10), y(i*i) {} 
```

So all the 3 members are initialized *before* entering into the constructor body.

See these topics for more detailed answers:

*   [Why should I prefer to use member initialization list?](https://stackoverflow.com/questions/926752/why-should-i-prefer-to-use-member-initialization-list)
*   [Prefer member initialization list to assignment](http://www.parashift.com/c++-faq-lite/init-lists.html)

# google-apps-script - 以前工作的脚本现在在 onOpen 和 onInstall 上有问题；事件并不总是触发

> ID：13180934
> 
> 赞同：3
> 
> 时间：2012-11-01T16:03:39.333
> 
> 标签：google-apps-script, google-apps-script-addon, triggers

所以，我有一堆 Google Apps 脚本，它们使用 onOpen/onInstall 函数来加载菜单或做一些小的启动工作。他们都在画廊工作了很长一段时间。

最近，我不确定具体时间，Google 更新的内容导致了以下问题：

1.  OnOpen 似乎并不总是在打开时执行
2.  OnInstall 触发但无权访问脚本中的函数。具体来说，如果您尝试选择一个菜单项，Apps Scripts 会显示一个错误，指出该功能不存在（但确实存在）

用户有一个非常糟糕的解决方法：安装脚本两次。不知何故，这会注册功能，并且 onInstall 会加载菜单。但这仅在工作表关闭之前有效；然后他们必须再次安装。

所以这是我的问题：

1.  其他人是否有这个问题，他们是否找到了解决方法？
2.  这是谷歌已经承认并正在解决的问题吗？
3.  有谁知道这是什么时候发生的？

最后，我想建议在生产中为脚本“冻结”api 的想法。IE。我们在顶部放置一个变量，说明我们正在使用 API 版本 XXX，这就是触发 Apps 脚本的 API。这是我第三次在生产中遇到被 Google 更新破坏的脚本。在某些时候，我们需要能够知道，当我们向世界推出某些东西时，它会继续发挥作用。用户不会区分我们的错误和 API 中的错误，这意味着我们会从这些问题中获得热量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:25:53.073

**看起来像一个错误**

这似乎是一个错误，触发器附加到外部加载的脚本。修复它的一种方法是手动添加和删除 onOpen 事件触发器。

*注意：您不需要保留触发器，因为代码中存在 onOpen 会隐式添加触发器。*

我在“脚本库”中发布的脚本遇到了同样的问题。

至于 onInstall 触发器，我认为您是 SOL，直到 Google 修复它。

# php - 使用联接表中的值跨多个表联接

> ID：13180935
> 
> 赞同：0
> 
> 时间：2012-11-01T16:03:45.800
> 
> 标签：php, mysql, codeigniter, join, where-clause

我有以下表格：

```
systems
-----------
id
name
price
online
productid

specifications
-------------
id
systemid
type
componentid
quantity

components
-------------
id
name
brand
type
description 
```

我需要使用多个选项过滤这些表。每个系统都有多个规格行，每个“规格”行都链接到相应的“组件”行。

我的问题是这样的：

我需要能够根据表连接按多个属性过滤系统。我一直在使用允许我 1 个搜索选项的代码，但没有进一步的：

```
select
    `systems`.`id`,
    `systems`.`name`, 
    `specifications`.`type` 
from `systems` 
    join specifications 
        on `systems`.`id` = `specifications`.`systemid` 
    join components 
        on `specifications`.`componentid` = `components`.`id`
where 
    `specifications`.`type` = 'cpu' 
    and `components`.`brand` = 'amd' 
```

所以，这会让我做一个连接，其中规格类型是 CPU，品牌是 AMD，但是如果我添加其他东西来寻找，就像`specifications.type ='graphics' AND components.brand = 'nvidia'`它不起作用一样。我认为这是 join 工作方式所固有的，正如我所说，我无法在这里阐明这个问题，因为我对这些更复杂的数据库事务很陌生，并且非常感谢你指出正确的方向！

我正在使用 CodeIgniter 作为我的框架，我想尝试通过 MySQL 来了解这一点，而不是在可能的情况下在 PHP 中进行 - 因为我想更好地了解这里发生的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:06:59.277

你的意思是说

```
select `systems`.`id`,`systems`.`name`, `specifications`.`type` from `systems`
join specifications on `systems`.`id` = `specifications`.`systemid` 
join components on `specifications`.`componentid` = `components`.`id`
where 
     (`specifications`.`type` = 'cpu' AND `components`.`brand` = 'amd') OR
     (`specifications`.`type` = `graphics` AND `components`.`brand` = `nvidia`) 
```

不工作？

这样的事情怎么办

```
SELECT S.`id`, S.`name`, P.`type` FROM `systems` S 
JOIN `specifications` P ON S.`id` = P.`systemid`
WHERE S.`id` IN (

    SELECT S2.`systemid` AS id FROM `specifications` S2
    JOIN `components` C2 ON S2.`componentid` = C2.`id`
    WHERE S2.`type` = 'cpu' AND c2.`brand` = 'amd'
) AND S.`id` IN (

    SELECT S3.`systemid` AS id FROM `specifications` S3
    JOIN `components` C3 ON S3.`componentid` = C3.`id`
    WHERE S3.`type` = 'graphics' AND c3.`brand` = 'nvidia'
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:40:36.773

好的，通过让每个查询作为子查询运行，我已经让它工作了。

因此，它将所有具有 AMD 处理器的系统的 ID 返回到查找所有具有 NVIDIA 显卡的系统的条件 IN 子句。

```
SELECT  `systems`.`id` ,  `systems`.`name` ,  `specifications`.`type` 
FROM  `systems` 
JOIN specifications ON  `systems`.`id` =  `specifications`.`systemid` 
JOIN components ON  `specifications`.`componentid` =  `components`.`id` 
WHERE (
    `specifications`.`type` =  'graphics'
    AND  `components`.`brand` =  'nvidia'
    )
AND (
    `systems`.`id` IN (
          SELECT  `systems`.`id` 
          FROM  `systems` 
          JOIN specifications ON  `systems`.`id` =  `specifications`.`systemid` 
          JOIN components ON  `specifications`.`componentid` =  `components`.`id` 
     WHERE (
          `specifications`.`type` =  'cpu'
          AND  `components`.`brand` =  'amd'
          )
     )
 ) 
```

从编程上讲，我觉得它很麻烦，而且我不确定它是如何提高效率的——作为一个很大程度上是自学成才的程序员，我总是试图确保我以“正确”的方式做事。任何人都可以看到以这种方式运行它的任何问题吗？让 CodeIgniter 返回那组 ID 会更好吗？

请记住，这个问题在某种程度上被简化了，它最终将包含几个子查询——尽管站点本身永远不会承受巨大的负载。

# sencha-touch - 无法打包调试应用程序（无法创建 .apk）

> ID：13180938
> 
> 赞同：2
> 
> 时间：2012-11-01T16:04:10.933
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我正在按照本教程创建 .apk 文件： [http ://docs.sencha.com/touch/2-0/#!/guide/native_android](http://docs.sencha.com/touch/2-0/#!/guide/native_android)

在第 4 步，当我运行以下命令时，没有任何反应：

> sencha 包运行 packager.json

绝对没有任何反应。没有显示成功/错误消息，并且命令提示符已准备好接受下一个命令。

这是我用于调试的配置文件：

```
{
    "applicationName":"myApp",
    "applicationId":"com.techleadz.myApp",
    "iconName":"resources/icons/Icon~ipad_myApp.png",
    "versionString":"1.0",
    "outputPath":"build/",
    "inputPath":"build/native/",
    "configuration":"Debug",
    "platform":"AndroidEmulator",
    "deviceType":"Universal",
    "certificatePath":"C:/Users/Administrator/.android/debug.keystore",
    "certificateAlias":"androiddebugkey",
    "sdkPath":"C:/android-sdk-windows/",
    "orientations": [
        "portrait",
        "landscapeLeft",
        "landscapeRight",
        "portraitUpsideDown"
    ]
} 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:55:52.320

您尚未指定证书密码或 android 列表目标 您必须为您尝试包含的列表目标安装磁盘映像，并且目标必须至少为 7

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T08:35:57.267

你在使用 Ubuntu 吗？如果是这样，则用于本地包装的 sencha 工具存在一些问题。

谢谢

# python - 如何用击键杀死while循环？

> ID：13180941
> 
> 赞同：103
> 
> 时间：2012-11-01T16:04:18.243
> 
> 标签：python, while-loop, break

我正在使用 while 循环读取串行数据并写入 csv 文件。我希望用户一旦觉得他们收集了足够的数据就能够终止 while 循环。

```
while True:
    #do a bunch of serial stuff

    #if the user presses the 'esc' or 'return' key:
        break 
```

我已经使用opencv做了类似的事情，但它似乎在这个应用程序中不起作用（而且我真的不想只为这个函数导入opencv）......

```
 # Listen for ESC or ENTER key
        c = cv.WaitKey(7) % 0x100
        if c == 27 or c == 10:
            break 
```

所以。如何让用户跳出循环？

另外，我不想使用键盘中断，因为脚本需要在while循环终止后继续运行。

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2012-11-01T16:08:35.557

最简单的方法是用通常的`Ctrl-C`（SIGINT）中断它。

```
try:
    while True:
        do_something()
except KeyboardInterrupt:
    pass 
```

由于`Ctrl-C`引发了原因`KeyboardInterrupt`，因此只需在循环外捕获它并忽略它。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2014-08-22T08:09:21.860

有一种解决方案不需要非标准模块并且 100% 可移植：

```
import _thread

def input_thread(a_list):
    raw_input()             # use input() in Python3
    a_list.append(True)

def do_stuff():
    a_list = []
    _thread.start_new_thread(input_thread, (a_list,))
    while not a_list:
        stuff() 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-09-01T11:02:35.950

以下代码对我有用。它需要 openCV（导入 cv2）。

该代码由一个无限循环组成，不断寻找按下的键。在这种情况下，当按下“q”键时，程序结束。可以按下其他键（在本例中为“b”或“k”）以执行不同的操作，例如更改变量值或执行功能。

```
import cv2

while True:
    k = cv2.waitKey(1) & 0xFF
    # press 'q' to exit
    if k == ord('q'):
        break
    elif k == ord('b'):
        # change a variable / do something ...
    elif k == ord('k'):
        # change a variable / do something ... 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2019-04-24T04:02:13.850

对于 Python 3.7，我复制并更改了 user297171 的非常好的答案，因此它适用于我测试的 Python 3.7 中的所有场景。

```
import threading as th

keep_going = True
def key_capture_thread():
    global keep_going
    input()
    keep_going = False

def do_stuff():
    th.Thread(target=key_capture_thread, args=(), name='key_capture_thread', daemon=True).start()
    while keep_going:
        print('still going...')

do_stuff() 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-01T16:17:06.247

pyHook 可能会有所帮助。[http://sourceforge.net/apps/mediawiki/pyhook/index.php?title=PyHook_Tutorial#tocpyHook%5FTutorial4](http://sourceforge.net/apps/mediawiki/pyhook/index.php?title=PyHook_Tutorial#tocpyHook%5FTutorial4)

见键盘挂钩；这是更通用的——如果你想要特定的键盘交互而不仅仅是使用 KeyboardInterrupt。

此外，总的来说（取决于您的使用）我认为仍然可以使用 Ctrl-C 选项来终止您的脚本是有意义的。

另请参阅上一个问题：[Detect in python which keys arepressed](https://stackoverflow.com/questions/694296/detect-in-python-which-keys-are-pressed)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2021-01-26T10:37:24.443

```
pip install keyboard

import keyboard

while True:
    # do something
    if keyboard.is_pressed("q"):
        print("q pressed, ending loop")
        break 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-09-24T12:50:40.353

总是有的`sys.exit()`。

Python 核心库中的系统库有一个退出函数，在原型设计时非常方便。代码将如下所示：

```
import sys

while True:
    selection = raw_input("U: Create User\nQ: Quit")
    if selection is "Q" or selection is "q":
        print("Quitting")
        sys.exit()
    if selection is "U" or selection is "u":
        print("User")
        #do_something() 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-04-01T12:32:58.040

这是一个对我有用的解决方案。从这里和其他地方的帖子中得到一些想法。直到按下定义的键（abortKey），循环才会结束。循环尽可能快地停止，并且不会尝试运行到下一次迭代。

```
from pynput import keyboard
from threading import Thread
from time import sleep

def on_press(key, abortKey='esc'):    
    try:
        k = key.char  # single-char keys
    except:
        k = key.name  # other keys    

    print('pressed %s' % (k))
    if k == abortKey:
        print('end loop ...')
        return False  # stop listener

def loop_fun():
    while True:
        print('sleeping')
        sleep(5)

if __name__ == '__main__':
    abortKey = 't'
    listener = keyboard.Listener(on_press=on_press, abortKey=abortKey)
    listener.start()  # start to listen on a separate thread

    # start thread with loop
    Thread(target=loop_fun, args=(), name='loop_fun', daemon=True).start()

    listener.join() # wait for abortKey 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-04-24T12:32:43.637

我修改了 rayzinnz 的答案以使用特定键结束脚本，在本例中为转义键

```
import threading as th
import time
import keyboard

keep_going = True
def key_capture_thread():
    global keep_going
    a = keyboard.read_key()
    if a== "esc":
        keep_going = False

def do_stuff():
    th.Thread(target=key_capture_thread, args=(), name='key_capture_thread', daemon=True).start()
    i=0
    while keep_going:
        print('still going...')
        time.sleep(1)
        i=i+1
        print (i)
    print ("Schleife beendet")

do_stuff() 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-06-26T05:31:01.890

从这个线程到兔子洞，我来到了这个，适用于 Win10 和 Ubuntu 20.04。我想要的不仅仅是杀死脚本，并使用特定的键，它必须在 MS 和 Linux 中都可以工作。

```
import _thread
import time
import sys
import os

class _Getch:
    """Gets a single character from standard input.  Does not echo to the screen."""
    def __init__(self):
        try:
            self.impl = _GetchWindows()
        except ImportError:
            self.impl = _GetchUnix()

    def __call__(self): return self.impl()

class _GetchUnix:
    def __init__(self):
        import tty, sys

    def __call__(self):
        import sys, tty, termios
        fd = sys.stdin.fileno()
        old_settings = termios.tcgetattr(fd)
        try:
            tty.setraw(sys.stdin.fileno())
            ch = sys.stdin.read(1)
        finally:
            termios.tcsetattr(fd, termios.TCSADRAIN, old_settings)
        return ch

class _GetchWindows:
    def __init__(self):
        import msvcrt

    def __call__(self):
        import msvcrt
        msvcrt_char = msvcrt.getch()
        return msvcrt_char.decode("utf-8")

def input_thread(key_press_list):
    char = 'x'
    while char != 'q': #dont keep doing this after trying to quit, or 'stty sane' wont work
        time.sleep(0.05)
        getch = _Getch()
        char = getch.impl()
        pprint("getch: "+ str(char))
        key_press_list.append(char)

def quitScript():
    pprint("QUITTING...")
    time.sleep(0.2) #wait for the thread to die
    os.system('stty sane')
    sys.exit()

def pprint(string_to_print): #terminal is in raw mode so we need to append \r\n
    print(string_to_print, end="\r\n")

def main():
    key_press_list = []
    _thread.start_new_thread(input_thread, (key_press_list,))
    while True:
        #do your things here
        pprint("tick")
        time.sleep(0.5)

        if key_press_list == ['q']:
            key_press_list.clear()
            quitScript()

        elif key_press_list == ['j']:
            key_press_list.clear()
            pprint("knock knock..")

        elif key_press_list:
            key_press_list.clear()

main() 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-07-06T11:08:52.243

这可能有助于安装 pynput -- pip install pynput

```
from pynput.keyboard import Key, Listener
def on_release(key):
    if key == Key.esc:
        # Stop listener
        return False

# Collect events until released
while True:
    with Listener(
            on_release=on_release) as listener:
        listener.join()
    break 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-05-06T10:51:56.170

这是我在线程和标准库中找到的解决方案

循环一直持续到按下一个键 将按下
的键作为单个字符串返回

适用于 Python 2.7 和 3

```
import thread
import sys

def getch():
    import termios
    import sys, tty
    def _getch():
        fd = sys.stdin.fileno()
        old_settings = termios.tcgetattr(fd)
        try:
            tty.setraw(fd)
            ch = sys.stdin.read(1)
        finally:
            termios.tcsetattr(fd, termios.TCSADRAIN, old_settings)
        return ch
    return _getch()

def input_thread(char):
    char.append(getch())

def do_stuff():
    char = []
    thread.start_new_thread(input_thread, (char,))
    i = 0
    while not char :
        i += 1

    print "i = " + str(i) + " char : " + str(char[0])

do_stuff() 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-03-12T22:32:36.170

这是一个简单的 Windows 解决方案，可以安全地结束当前迭代然后退出。我将它与一个反例一起使用，该示例使用“Esc”键中断循环并退出。它使用[msvcrt包中的](https://docs.python.org/3/library/msvcrt.html)[kbhit()](https://docs.python.org/3/library/msvcrt.html#msvcrt.kbhit)和[getch()](https://docs.python.org/3/library/msvcrt.html#msvcrt.getch)函数。仅出于缓和原因（设置事件之间的时间延迟）调用时间包。

```
import msvcrt, time

print("Press 'Esc' to stop the loop...")
x = 0
while True:
    x += 1
    time.sleep(0.5)
    print(x)

    if msvcrt.kbhit():
        if msvcrt.getch() == b'\x1b':
            print("You have pressed Esc! See you!")
            time.sleep(2)    
            break 
```

**如果按键正在等待读取， ***kbhit()函数将返回 True*****

 *****getch()***函数读取按键并将结果字符作为字节字符串返回。它可以与任何键一起使用

***b'\x1b'***是 'Esc' 键的字节字符串字符。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-07-29T13:57:49.137

这是另一个使用[`threading.Event`](https://docs.python.org/3/library/threading.html#event-objects)的示例，无需捕获`SIGINT`( `Ctrl+c`)。

正如@Atcold 在已接受答案下方的评论中提到的那样，按下`Ctrl+c`循环可能会中断长时间运行的操作并使其处于未定义状态。当长时间运行的操作来自您正在调用的库时，这可能会特别烦人。

在下面的示例中，用户需要按`q`，然后按`Enter`。如果您想立即捕获击键，则需要类似[this answer](https://stackoverflow.com/a/510364/228965)`_Getch()`的内容。

```
import time
from threading import Thread, Event

def read_input(q_entered_event):
    c = input()
    if c == "q":
        print("User entered q")
        q_entered_event.set()

def do_long_running_stuff():
    q_pressed_event = Event()
    input_thread = Thread(target=read_input,
                          daemon=True,
                          args=(q_pressed_event,))
    input_thread.start()
    while True:
        print("I am working ...")
        time.sleep(1)
        if q_pressed_event.is_set():
            break

    print("Process stopped by user.")

if __name__  == "__main__":
    do_long_running_stuff() 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2022-01-14T21:23:02.410

```
from time import sleep
from threading import Thread
import threading

stop_flag = 0

    def Wait_Char():
        global stop_flag
        v = input("Enter Char")
        if(v == "z"):
            stop_flag = 1

    def h():
        while(True):
            print("Hello Feto")
            time.sleep(1)
            if(stop_flag == 1):
                break

    thread1 = Thread(target=Wait_Char)
    thread2 = Thread(target=h)
    thread1.start()
    thread2.start()
    print("threads finished...exiting") 
```

**这不是最好的方法，但它可以完成您想要的工作**，
运行**2 个线程**，一个等待您要使用
**（Wait_Char 方法）**
停止循环的键 和一个 for 循环
**（H 方法）**
，并且都看到一个全局变量**stop_flag**哪个控制停止过程当我按 z 时停止

* * *

## 回答 #16

> 赞同：-3
> 
> 时间：2020-03-07T04:22:42.007

```
import keyboard

while True:
    print('please say yes')
    if keyboard.is_pressed('y'):
         break
print('i got u :) ')
print('i was trying to write you are a idiot ')
print('  :( ') 
```

输入使用'ENTER'**

# jscript - Markdown to HTML：与 WSH 兼容的脚本

> ID：13180942
> 
> 赞同：3
> 
> 时间：2012-11-01T16:04:19.487
> 
> 标签：jscript, wsh, pagedown

[Pagedown](http://code.google.com/p/pagedown/)项目（JS 脚本）中有一个 Markdown 到 HTML 转换器。我的问题是：如何使这个 JS 脚本适应 WSH（Windows 脚本宿主）的使用？我需要例如可以通过 WSH 命令行调用的 js 脚本：

```
cscript.exe md_to_html.js c:\test\aa.md 
```

我在谷歌没有找到这样的页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:06:28.427

使用以下脚本创建名为**pagedown.wsf的 WSF 文件**

```
<job>
    <object id="Stream" progid="Adodb.Stream" /> <!-- utf-8 documents support -->
    <script language="jscript" src="Markdown.Converter.js" />

    <script language="jscript">
            Stream.Charset = 'utf-8';
            Stream.Open();
            Stream.LoadFromFile(WScript.Arguments.Item(0));

            var text = Stream.ReadText();

            WSH.Echo(new Markdown.Converter().makeHtml(text))
    </script>
</job> 
```

并将其与**cscript.exe一起使用**

```
cscript //Nologo pagedown.wsf input.md > output.html 
```

如果 ADODB 出现问题，请尝试从[此处](http://www.microsoft.com/ru-ru/download/details.aspx?id=5793)下载并安装它。

# google-app-engine - appengine-web.xml 和 https 中的版本标签

> ID：13180945
> 
> 赞同：1
> 
> 时间：2012-11-01T16:04:27.713
> 
> 标签：google-app-engine, https

到目前为止，我一直在研究我的服务器应用程序的版本 1。我可以通过 [https://myappid.appspot.com访问该应用程序](https://myappid.appspot.com)

使用我的浏览器。（注意：我使用的是 https，而不是 http）现在，我将版本 id 更改为 2（版本 1 现在是生产版本，版本 2 是下一代版本，我想对其进行测试）。我需要版本 1 来保持默认版本，因为用户正在使用稳定的生产版本。 现在我有 2 个版本，我尝试按照我能找到的说明使用[https://2.latest.myappid.appspot.com](https://2.latest.myappid.appspot.com)通过浏览器（Chrome）访问第 2 版静态首页 。
相反，chrome 给了我以下错误 *您试图访问 2.latest.myappid.appspot.com，但实际上您访问的服务器将自己标识为*.appspot.com。这可能是由于服务器上的错误配置或更严重的原因造成的。您网络上的攻击者可能试图让您访问 2.latest.myappid.appspot.com 的假冒（并且可能有害）版本。您无法继续，因为网站运营商已要求提高此域的安全性。*

这个问题消失了 [http://2.latest.myappid.appspot.com](http://2.latest.myappid.appspot.com)
我已经通过 web.xml 请求安全连接

<传输保证> 元素。那么，我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:15:58.613

试试 2.myappid.appspot.com。

此外，当您在管理控制台中单击版本时，您可以查看应用程序的所有版本。每个版本的编号是一个链接——您可以单击它来访问正在运行的那个版本。

如果您尝试使用 https 访问新版本，则应改用以下内容：

[https://2-dot-myappid.appspot.com/](https://2-dot-myappid.appspot.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:26:46.960

您需要同一应用程序的 2 个实时版本吗？
尽管可能存在一些限制，但这并不是系统的设计目的。https 显然是这些限制之一。

如果您希望版本 2*替换*版本 1，那么您需要做的就是在版本 2 上“设置默认值”，然后它将映射到[https://myappid.appspot.com](https://myappid.appspot.com)

# ios - iPad 以横向启动仅在 768x768 范围内接收触摸

> ID：13180946
> 
> 赞同：3
> 
> 时间：2012-11-01T16:04:34.603
> 
> 标签：ios, ipad, touch, landscape, screen-orientation

从纵向开始时它工作得非常好，当您从纵向旋转到横向并返回时也可以工作。

在横向启动时它不起作用。但是，当您从横向旋转到纵向并返回时，它会起作用。

**在横向启动模式下，屏幕坐标 X 大于 768 时屏幕不会响应任何触摸。**

代码中发生的是，我使用状态栏方向来确定原始方向并手动旋转每个视图。视图正确显示，但未正确接收触摸。

然后当 ipad 开始旋转时，我的根视图控制器将被调用：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration 
```

这将旋转每个子视图。

根控制器：

```
- (void)loadView {
    self.view = [[UIView alloc]init ]; 
    //initialize child views
    [self willRotateToInterfaceOrientation:0 duration:0];    

}

- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration { 
    if ([model isLandscape]) {
        self.view.frame = CGRectMake(0, 0, 1024, 768-80);
    }
    else {
        self.view.frame = CGRectMake(0, 0, 768, 1024-80);
    }
    //rotate child views  
} 
```

我的代码 [model isLandscape] 有效，因此我不需要提供有关其工作原理的详细信息，但无论如何这里是代码：

```
- (bool)isLandscape {
    if (orientation == UIInterfaceOrientationLandscapeLeft || orientation == UIInterfaceOrientationLandscapeRight) 
        return true;
    else 
        return false;
}

-(id) init
{
    [[NSNotificationCenter defaultCenter] addObserver:self   selector:@selector(orientationChanged:) name:UIDeviceOrientationDidChangeNotification object:nil];
}

- (void)orientationChanged:(NSNotification *)notification
{
    UIInterfaceOrientation curOrientation = [[UIDevice currentDevice] orientation];
    if (curOrientation == UIDeviceOrientationPortrait ||
        curOrientation == UIDeviceOrientationPortraitUpsideDown ||
        curOrientation == UIDeviceOrientationLandscapeLeft ||
        curOrientation == UIDeviceOrientationLandscapeRight)
    {
        orientation = curOrientation;
        ((AppDelegate*)([UIApplication sharedApplication].delegate)).savedOrientationForRestart = orientation;
        NSLog(@"changed");
    }
}

-(void)validateOrientation { //first time when initializing orientation
    UIInterfaceOrientation curOrientation = [[UIDevice currentDevice] orientation];
    if (curOrientation != UIDeviceOrientationPortrait &&
        curOrientation != UIDeviceOrientationPortraitUpsideDown &&
        curOrientation != UIDeviceOrientationLandscapeLeft &&
        curOrientation != UIDeviceOrientationLandscapeRight)
    {
        orientation = [[UIApplication sharedApplication] statusBarOrientation];
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:02:18.187

好的。所以事实证明，在数十个背景和图层中，有些没有正确旋转到横向/纵向……调试这个问题非常困难……

最后，我连接了一个触摸调试器，看看哪些视图正确接收触摸，哪些没有......

非常有帮助！只需在代码中使用下面的 UIWindow 子类而不是 UIWindow 就可以了。

```
 #import <UIKit/UIKit.h>
    @interface MyUIWindow : UIWindow {
    }

    -(void)rotate;

    @end 
```

和

```
 #import "MyUIWindow.h"
    @implementation MyUIWindow

    -(id) init{
        self = [super init];
        if(self)
        {
        }
        return self;
    }

    - (void)sendEvent:(UIEvent *)event {
        [super sendEvent:event];
        NSSet *touches = [event allTouches];
        if (touches.count != 1)
            return;
        UITouch *touch = touches.anyObject;    
        UIView * view = touch.view;
        NSLog(NSStringFromClass([touch.view class])); //this prints out touch view
    }

    @end 
```

# linux - 《Linux内核模块编程指南》的procfs1.c

> ID：13180949
> 
> 赞同：1
> 
> 时间：2012-11-01T16:04:38.030
> 
> 标签：linux, module, kernel

[我正在玩“The Linux Kernel Module Programming Guide”](http://www.tldp.org/LDP/lkmpg/2.6/html/x710.html)第 5.1 章中的示例。我编译了源代码，加载了模块，然后当我做 a 时`cat /proc/helloworld`，我注意到以下内容`/var/log/messages`：（我修改了原始源代码以打印`ret`and的值`offset`）

`Oct 31 23:46:00 vm-ubuntu1010 kernel: [221941.287939] procfile_read (/proc/helloworld) called, ret=12, offset=0`

`Oct 31 23:46:00 vm-ubuntu1010 kernel: [221941.287955] procfile_read (/proc/helloworld) called, ret=0, offset=12`

`Oct 31 23:46:00 vm-ubuntu1010 kernel: [221941.287987] procfile_read (/proc/helloworld) called, ret=0, offset=12`

根据日志消息，回调函数`procfile_read`被调用了 3 次。我不明白为什么它是 3 次而不是 2 次。第一次`procfile_read`调用，它返回`12`，所以回调函数将被调用第二次，期间`0`返回。但是为什么要调用第三次呢？我认为（第二次调用）的返回值`0`表明系统调用`read`（因此`procfile_read`）不会再次被调用。

请帮助我理解这个问题。非常感谢！

# javascript - tablesorter 分页使按钮随内容移动

> ID：13180952
> 
> 赞同：0
> 
> 时间：2012-11-01T16:04:42.993
> 
> 标签：javascript, jquery, css, tablesorter

所以我对分页按钮保持在同一个地方（在底部）的方式有一些问题，即使最后一页只有 2 个条目

[http://srikanthrajan.com/test-table/tablesorter.html](http://srikanthrajan.com/test-table/tablesorter.html)

我可以做些什么，以便分页按钮根据条目数移动到顶部吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:07:59.113

目前它在css中定位为“绝对”，尝试将其更改为相对

而不是顶部：280px；位置：绝对；把这些写成风格：clear:left；向左飘浮;

并且不要忘记将桌子也向左浮动，希望这会有所帮助！

# windows - Windows 无法为新数据库实例启动 DBConsole

> ID：13180956
> 
> 赞同：2
> 
> 时间：2012-11-01T16:04:46.070
> 
> 标签：windows, oracle, oracle11g

我收到此错误：

> Windows 无法在本地计算机上启动 OracleDBConsoleOracleInstance2。有关详细信息，请查看系统事件日志。如果这是非 Microsoft 服务，请联系系统供应商，并参阅特定于服务的错误代码 1

我在 Windows 7 上安装了 Oracle 11g，并成功创建了我的第一个数据库实例 (oracleInstance1)，并配置了侦听器和服务。我可以使用 DBconsole URL: 访问这个数据库`https://localhost:1158/em`。

我看到服务开始于：

*   `OracleDBConsoleOracleInstance1`
*   `OracleOraDb11g_home1TNSListener`
*   `OracleServiceOracleInstance1`

接下来，我创建了第二个数据库实例 ( `oracleInstance2`) 并为该数据库配置了一个新服务。我正在使用相同的侦听器，因为我打算在任何时间点使用一个数据库实例。

但是，我在配置过程中收到此警告消息：

```
Enterprise manager configuration succeeded with the following warning - Error starting Database Control. Please execute the following command(s).
  1\. Set the environment variable ORACLE_UNQNAME to Database unique name.
  2\. C:\Oracle\product\11.2.0\dbhome_1\bin\emctl.bat start dbconsole 
```

为了启动新的数据库控制台，我停止了之前运行的 DBConsole OracleDBConsoleOracle1 并启动了新的 DBConsole OracleDBConsoleOracle2 并得到了上述错误。

当我尝试使用手动启动 dbconsole`emctl dbconsole start`时，它​​会启动 OracleDBConsoleOracle1。

我改变了环境变量`ORACLE_SID=oracle2`和`ORACLE_UNQNAME=oracle2`

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:33:40.837

你确定你的环境变量被正确应用了吗？如果你在 DOS 窗口中设置它们，那么它们只会在那里可见，你需要在窗口的“环境变量”屏幕中设置它们。

# facebook - facebook fan gate 仅适用于管理员帐户 Javascript

> ID：13180961
> 
> 赞同：0
> 
> 时间：2012-11-01T16:04:59.857
> 
> 标签：facebook

我的 facebook 应用程序（iframe 应用程序）中有一个 facebook 粉丝门，但它仅在使用管理员帐户登录时才有效。当我用普通用户测试没有沙盒模式的应用程序时，他们被困在非粉丝部分，但他们是粉丝。我检查了页面ID，它是正确的。感谢帮助

```
 FB.getLoginStatus(function (response) {
            if (response.status == 'connected') {
                var user_id = response.authResponse.userID;
                var page_id = "[pageid]"; 
                var fql_query = "SELECT uid FROM page_fan WHERE page_id =" + page_id + " and uid=" + user_id;
                var the_query = FB.Data.query(fql_query);

                the_query.wait(function (rows) {

                    if (rows.length == 1 && rows[0].uid == user_id) {
                        $("#container").show();
                        $("#container_notlike").hide();
                        $("#notloggedin").hide();
                        alert("User like page")

                    }

                    else {
                        $("#container_notlike").show();
                        $("#container").hide();
                        $("#notloggedin").hide();
                        alert("User NOT like page")
                        login();
                    }
                });
            } else {
                $("#container_notlike").hide();
                $("#container").hide();

                $("#notloggedin").show();

                login();

            }
        });

    }
    init(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:36:04.060

[从评论中，您的登录](https://developers.facebook.com/docs/concepts/login/)代码似乎实际上并没有要求`user_likes`您需要检查该页面是否被没有完全公开喜欢的用户喜欢的权限

回复：评论中的其他问题，请参阅[https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/) - 订阅 edge.create 回调，当喜欢按钮时您会收到通知被点击

# matlab - 创建一个序列值用零填充的矩阵（无循环）

> ID：13180964
> 
> 赞同：0
> 
> 时间：2012-11-01T16:05:05.943
> 
> 标签：matlab

我有两个矩阵`a`和`b`1 列和*n*行。

这些矩阵代表最小值和最大值。

从这些我需要创建一个*n* x *m*矩阵。 *m*是最大值`[a ; b]`

结果必须包含 和 之间的每个值，`a(:)`并`b(:)`用零填充。

注意：使用 for 循环很容易，但我想避免循环。

## 例子：

从这两个矩阵开始：

```
>> a = [3 ; 5 ; 2 ; 7 ; 4]

a =

     3
     5
     2
     7
     4

>> b = [7 ; 7 ; 5 ; 8 ; 4]

b =

     5
     7
     4
     8
     4 
```

我想以这个矩阵结束：

```
result =

     3     4     5     6     7     0     0     0
     5     6     7     0     0     0     0     0
     2     3     4     5     0     0     0     0
     7     8     0     0     0     0     0     0
     4     0     0     0     0     0     0     0 
```

## 到目前为止，我有这个：

```
>> result = zeros(size(a,1), max([a ; b]));
>> rows = [1:size(a,1)]

rows =

     1     2     3     4     5

>> index = sub2ind(size(result), rows, b - a + 1)
>> result(index) = b

result =

     0     0     0     0     7     0     0     0
     0     0     7     0     0     0     0     0
     0     0     0     5     0     0     0     0
     0     8     0     0     0     0     0     0
     4     0     0     0     0     0     0     0

>> result(:,1) = a

result =

     3     0     0     0     7     0     0     0
     5     0     7     0     0     0     0     0
     2     0     0     5     0     0     0     0
     7     8     0     0     0     0     0     0
     4     0     0     0     0     0     0     0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T17:07:38.530

我会用一个简单的循环来解决这个问题，这也可能是最快的解决方案

```
a = [3 ; 5 ; 2 ; 7 ; 4]
b = [7 ; 7 ; 5 ; 8 ; 4]
nSteps = b-a+1;
nRows = size(a,1);

result = zeros(nRows, max([a ; b]));

for iRow = 1:nRows
   result(iRow,1:nSteps(iRow)) = a(iRow):b(iRow);
end

result =

 3     4     5     6     7     0     0     0
 5     6     7     0     0     0     0     0
 2     3     4     5     0     0     0     0
 7     8     0     0     0     0     0     0
 4     0     0     0     0     0     0     0 
```

如果您不需要可读性，这里有一个非循环解决方案：

```
result = ones(nRows, max([a ; b]));
result(:,1) = a;
result = cumsum(result,2);
result(bsxfun(@gt,result,b))=0

result =

     3     4     5     6     7     0     0     0
     5     6     7     0     0     0     0     0
     2     3     4     5     0     0     0     0
     7     8     0     0     0     0     0     0
     4     0     0     0     0     0     0     0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:30:56.733

有些问题不值得矢量化：

```
a = [3 ; 5 ; 2 ; 7 ; 4];
b = [7 ; 7 ; 5 ; 8 ; 4];

cols = max(max(a),max(b))
result = zeros(length(a),cols)

for i = 1:length(a)
    A = a(i):b(i)
    result(i,:) = padarray(A, [0 cols-length(A)], 0, 'post');
end 
```

# amazon-ec2 - 使用负载均衡器获取（非 HTTP）客户端 IP

> ID：13180966
> 
> 赞同：0
> 
> 时间：2012-11-01T16:05:09.657
> 
> 标签：amazon-ec2, amazon-web-services, load-balancing

假设我想运行类似 nyan cat telnet 服务器 (http://miku.acm.uiuc.edu/) 的东西，我总共需要处理 10,000 个并发连接。除了负载均衡器外，我还有 10 台服务器。每台服务器可以处理 1000 个并发连接，我想在它前面放一个负载均衡器，将流量随机分配到 10 台服务器。

根据我的阅读，负载均衡器将 HTTP 请求（连同客户端 IP）传递到后端服务器非常简单，可能使用 FastCGI 或 X- 标头。

在这种情况下，负载均衡器使用简单的 TCP 服务器将客户端 IP 传递给后端服务器的最简单方法是什么？是否需要硬件负载平衡器，或者有没有办法简单地通过软件来做到这一点？

换句话说，在对非 HTTP 内容进行负载平衡时，是否有一种统一的方式来传递客户端 IP？与 Google 在对 Google Talk XMPP 服务器或 Gmail IMAP 服务器进行负载平衡时获取客户端 IP 的方式相同

这不是针对任何具体的事情。我只是好奇是否以及如何做到这一点。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:07:50.233

最简单的方法是让负载均衡器完全不可见，并在源 IP 地址和目标 IP 地址不受干扰的情况下继续连接。为此，必须为所有 10 个服务器分配相同的 IP 地址（作为环回地址，而不是物理接口），这将是客户端连接的 IP 地址。到该 IP 地址的 Internet 流量必须流向负载平衡器。负载平衡器必须是服务器的默认网关。

# c# - XDocument XPath + 正则表达式元素定位器

> ID：13180969
> 
> 赞同：2
> 
> 时间：2012-11-01T16:05:16.323
> 
> 标签：c#, xml, linq-to-xml

[XDocument](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)中的 Elements是否有等效的[XmlDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)节点定位器？

```
private const string InvalidDateTest = 
    "[text() = \"0000-00-00\" or text() = \"    -  -  \" or text() = \"-  -  \"]";

xmlDocument.SelectNodes("//DeterminedDate/Value" + InvalidDateTest); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:36:20.367

自己调味：

```
using System.Xml.XPath;

xDocument.XPathSelectElements("//DeterminedDate/Value" + InvalidDateTest); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:09:22.007

XDocument + Xpath 示例：

```
using(var stream = new StringReader(xml))
{
    XDocument xmlFile = XDocument.Load(stream);
    var query = (IEnumerable) xmlFile.XPathEvaluate("/REETA/AFFIDAVIT/COUNTY_NAME");
    foreach(var band in query.Cast < XElement > ())
    {
        Console.WriteLine(band.Value);
    }
    xmlFile.Save("books.xml");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T16:23:28.407

要区分节点，您需要简单地将扩展链接到后代调用，这将过滤掉所需的内容：

```
string Data = @"<?xml version=""1.0""?>
<Notifications>
   <Alerts>
      <Alert>1</Alert>
      <Alert>2</Alert>
      <Alert>3</Alert>
   </Alerts>
</Notifications>";

XDocument.Parse(Data)
         .Descendants("Alert")
         .Where (node => int.Parse(node.Value) > 1 && int.Parse(node.Value) < 3)
         .ToList()
         .ForEach(al => Console.WriteLine ( al.Value ) );       // 2 is the result 
```

# c# - 一组 n 个算法中 k 个对象的排列

> ID：13180970
> 
> 赞同：0
> 
> 时间：2012-11-01T16:05:21.167
> 
> 标签：c#, algorithm, permutation, combinations, combinatorics

我正在寻找一种有效的方法来实现这一目标：

1.  你有一组数字，假设我们的集合等于 4 (N = 4)；
2.  您必须生成 3 个元素的所有排列（K = 3）；

N = 4 和 K = 3 的输出：

```
1 2 3
1 2 4
1 3 2
1 3 4
1 4 2
1 4 3
2 1 3
2 1 4
2 3 1
2 3 4
2 4 1
2 4 3
3 1 2
3 1 4
3 2 1
3 2 4
3 4 1
3 4 2
4 1 2
4 1 3
4 2 1
4 2 3
4 3 1
4 3 2 
```

任何人都有一个很棒的，nice'n'quick 算法在他们的袖子或网络参考？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T16:31:01.460

像这样的伪代码：

```
permute(set, output, len)  //output will hold all the permutations

for each number in the set do
    choose number and store it at output[0]
    if(!empty(set))
        call permute(set{without the number}, output + (len - 1)!, len-1) //adjust the position 
```

调用者`permute(set, output, k)`

# python - 使用python和正则表达式从html中检测图像src？

> ID：13180974
> 
> 赞同：0
> 
> 时间：2012-11-01T16:05:28.960
> 
> 标签：python, html, regex, parsing

我想使用python从html代码的img标签中检测图像的src属性。我认为正则表达式可以完成这项工作。我创建了一个正则表达式

```
\<img .*src="(.*)".*/\> 
```

但是有很多可能的方式来使用 img 标签，例如

```
<img src="images/first.png" alt="" />
<img src="images/first.png" alt="">
<img  alt="" src="images/first.png" />
<img  alt="" width="100" src="images/first.png" height="200"> 
```

所以我的问题是，上述正则表达式是否足以完成任务？任何人都可以提供更好的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:12:41.973

改用 HTML 解析器，Python 有几个可供选择：

*   [ElementTree](http://docs.python.org/library/xml.etree.elementtree.html)是标准库的一部分
*   [BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)是一个流行的第三方库
*   [lxml](http://lxml.de/)是一个快速且功能丰富的基于 C 的库。

元素树示例：

```
from xml.etree import ElementTree

tree = ElementTree.parse('filename.html')
for elem in tree.findall('img'):
    print elem['src'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:06:30.300

你可以使用漂亮的库 BeautifulSoup

# asp.net - 防止在 SQL Server 数据库中注入 html 标签

> ID：13180975
> 
> 赞同：1
> 
> 时间：2012-11-01T16:05:29.637
> 
> 标签：asp.net, sql-server-2005

我在后端创建了一个带有 asp.net 3.5 和 SQL Server 2005 的网站

我们创建了管理站点，用于使用安全用户帐户更新数据库中的数据。我为生活工作了一段时间。

一段时间后，我们发现一些特定`html`的标签被插入到数据库的字符串字段中。

似乎是某种攻击

任何人都可以建议我如何防止这种攻击。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T16:28:39.340

您所拥有的可能是用于部署跨站点脚本攻击的 SQL 注入攻击。然而，这可能不是来自 asp.net 应用程序本身。默认情况下，ASP.NET Web 应用程序将打开请求验证，从而阻止可能*看起来*是跨站点脚本攻击的帖子（它们将在发布 HTML 时收到“危险的请求 500 错误”）。如果您已将其关闭，那么您可能正在暴露自己。

您应该使用像 LINQ to Entities 这样的 ORM，或者至少对正在执行的任何 SQL 查询使用参数化查询，这将大大有助于保护您免受 SQL 注入攻击。但是，您仍然遇到跨站点脚本的问题。查看 Microsoft **[AntiXSS 库](http://msdn.microsoft.com/en-us/security/aa973814.aspx)**以确保您受到保护。

您将遇到的另一个问题是内部人员或通过可能插入数据库的另一个应用程序（如果您将其用作公共数据库）。为此，您可以做的最好的事情是放置一个检查约束，当您在正则表达式上匹配 HTML 时会失败。查看**[这篇](http://msdn.microsoft.com/en-us/magazine/cc163473.aspx)**文章的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:13:37.547

我认为这是一个跨站点脚本攻击。

您可以在应用程序级别（在配置中）将“validateRequest”设置为“true”，或者在页面指令中将其设置在页面级别。

[请在这里](http://msdn.microsoft.com/en-us/library/ff649310.aspx)阅读更多

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-01T16:16:46.610

您应该*始终*对来自用户的任何输入进行编码，以防止跨站点脚本和 SQL 注入攻击。Server.HtmlDecode 和 Server.HtmlEncode 正是出于这个原因。

最重要的是，如果您想完全阻止 Html 标签，请使用正则表达式清除不需要的标签的输入。

# javascript - 如何使 DIV 元素不透明

> ID：13180981
> 
> 赞同：2
> 
> 时间：2012-11-01T16:05:47.493
> 
> 标签：javascript, html, css

我的网站顶部有一个 div，它是 100% 宽的，并且处于绝对和固定的位置。它的代码如下：

```
div.header{
    height: 60px;
    width: 100%;
    position: absolute;
    position: fixed;
    top: 0px;
    left: 0px;
    background-color: #eeeeee;
} 
```

现在一切正常，但是当用户向下滚动时，网站内容会出现在其后面。有没有办法可以防止这种情况发生？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T16:07:33.593

消除`position: fixed;`

它应该像

```
div.header{
    height: 60px;
    width: 100%;
    position: absolute;
    top: 0px;
    left: 0px;
    background-color: #eeeeee;
} 
```

如果你想让它修复而不是 remove `position:absolute`。两者都不会一起工作。

你有`position:absolute`并且`fixed`两者都在一起，但`fixed`会覆盖位置，因为它是在绝对之后。

现在，如果你想出现在其他元素之上并且它有一个 position: absolute 或 fixed 你可以使用`z-index`，heigher z-index 元素将覆盖较低的 z-index 元素。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T16:13:50.677

需要显示在前面的 div 元素应该`z-index`比需要显示在后面的元素具有更高的值。

例如。

```
div.header{
....
....
z-index:9999;
}

div.normal{
....
....
z-index:9998;
} 
```

在我的[网站上](http://www.philipstarritt.com)，我有一个始终显示在底部的 div 页脚。我使用以下代码 - 它可能会在将来或搜索类似查询的人中派上用场。

```
#bottom
{
    position: fixed;
    bottom: 0px;
    left: 0px;
    width: 100%;
    height: 40px;
    z-index: 999;
    background-color: rgb(30,122,212); 
    border-top:3px solid black;
    border-bottom:1px solid black;
    -moz-box-sadow: 0 0 10px white; 
    box-shadow: 0 0 10px white;
} 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T16:12:20.840

这是一个愚蠢的问题。只需`position: fixed;`从您的班级中删除该财产。

# path - 如何删除尾随的“。” 在 $PATH

> ID：13180986
> 
> 赞同：0
> 
> 时间：2012-11-01T16:05:56.470
> 
> 标签：path, solaris, root

我的实验表说，如果 root 中的 $PATH 有一个尾随的“.”，攻击者很可能可以通过强制管理员以 root 身份执行某些恶意程序来获得超级用户访问权限。我完全不明白这一点！有人可以向我解释一下上面的句子是什么意思吗？以及如何删除“。”？

```
echo $PATH

/usr/sbin:/usr/bin:/usr/openwin/bin:/usr/ucb:. 
```

这是在 Solaris 10 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T01:58:02.653

在您的 ~/.profile 文件中，或者在您的 ~/.bashrc 文件中（通过 ~/ 我的意思是您的主目录）

```
export PATH=/usr/sbin:/usr/bin:/usr/openwin/bin:/usr/ucb 
```

现在您已经删除了尾随 .

顺便说一句： /usr/xpg4/bin 有更现代的命令版本，比如 awk - 你可能想把它放在 /usr/bin 之前的 PATH 变量中，除非你被指示保持 PATH 不变。

该声明所指的是：假设坏人损坏了一些可执行文件。一个存在于应用程序目录中。如果您 cd 到该目录，然后键入它将运行的坏文件的名称。你可能不知道它发生了。也许该文件会向世界各地发送大量电子邮件。或者在您的主​​目录中的某个其他可执行文件中放置一个蠕虫。你明白了。

# matlab - 使用匿名函数提取函数的第四个值

> ID：13180990
> 
> 赞同：0
> 
> 时间：2012-11-01T16:06:23.490
> 
> 标签：matlab

> **可能重复：**
> [如何在不使用临时变量的情况下从函数中获取第二个返回值？](https://stackoverflow.com/questions/3710466/how-do-i-get-the-second-return-value-from-a-function-without-using-temporary-var)

作为尝试进行 K 折交叉验证的一部分，我正在尝试编写一个匿名函数，该函数返回另一个函数的第四个参数。

具体来说，函数**SVM**返回五个参数，我想创建一个匿名函数来挑选第四个。

我以为这行得通

```
Func1 = @(x) sum( SVM(x) .* [0, 0, 0, 1, 0] ) 
```

但遗憾的是，它没有——它只返回第一个参数。

有任何想法吗？

谢谢！

# c# - 来自网络的电子邮件，无需绑定网页

> ID：13180991
> 
> 赞同：1
> 
> 时间：2012-11-01T16:06:25.700
> 
> 标签：c#, email, outlook, cdo.message

我有一个处理工作请求的网络应用程序。它通过电子邮件向涉及新的、更改的和已完成的请求的用户发送电子邮件。问题是，当它发送电子邮件时，页面加载需要一段时间。没有电子邮件过程，它工作正常。我现在使用 CDO 直接从代码隐藏发送消息。有没有更好的方法不占用网页？

在更改请求后，我考虑过可能独立运行 exe。有没有办法对将处理电子邮件的脚本进行外壳处理，但继续加载网页，以便外壳脚本独立于页面的代码隐藏运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:12:54.083

您可能会考虑在数据库表或由专用服务读取的文本文件中对电子邮件进行排队。

将电子邮件写入数据库或文本文件会很快，并且该服务只需要每隔几分钟检查一次更改。

问题是您无法通知用户电子邮件未发送，尽管您在尝试 shell 执行另一个程序时会遇到同样的问题。

# maven - 在 IntelliJ IDEA 中签出 maven 依赖项作为模块

> ID：13180992
> 
> 赞同：1
> 
> 时间：2012-11-01T16:06:29.340
> 
> 标签：maven, intellij-idea

我有一个 maven 项目，它被分解成一堆依赖项，其中一些我对版本控制存储库具有 RW 访问权限。

我想将一个从只读依赖项切换到完整的项目模块。IDEA 是否可以使用 POM 中包含的数据来执行此操作？我听说 NetBeans 可以做到这一点。

# c# - 如何监控每个http请求？

> ID：13180994
> 
> 赞同：3
> 
> 时间：2012-11-01T16:06:29.667
> 
> 标签：c#, visual-studio-2010, testing, visual-studio-2012, load-testing

如何监控 Visual Studio 在负载测试期间发出的请求？

提琴手没有帮助，我没有看到合适的 vs 窗口来做呢？我想剪断所有的请求和响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:52:00.740

Visual Studio 要求您手动为 WebTest 配置代理。按照以下说明为您的测试设置代理：http: [//msdn.microsoft.com/en-us/library/ff400220.aspx](http://msdn.microsoft.com/en-us/library/ff400220.aspx)。默认情况下，Fiddler 在`http://127.0.0.1:8888`.

请注意，您将希望在运行负载测试时保持 Fiddler 最小化，以帮助最小化在测试运行时更新 UI 的成本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:13:16.573

[Charles](http://www.charlesproxy.com/)是一个代理工具，可以很好地嗅探和记录 http/https 请求。

# perl - 使用列别名创建 DBIx ResultSet

> ID：13180997
> 
> 赞同：2
> 
> 时间：2012-11-01T16:06:41.827
> 
> 标签：perl, dbix-class

我已经开始使用 DBIx::Class 并且在很大程度上我真的很喜欢它，但真正让我烦恼的是列别名似乎不能完全工作。

例如。假设我有这个表定义：

```
#TestClass.pm

use strict;
use warnings;

package Database::Schema::Result::TestClass;

use base qw/DBIx::Class::Core/;

__PACKAGE__->table("TEST_TABLE");
__PACKAGE__->add_column("ID")
__PACKAGE__->add_columns(NAME => {accessor => "name"},
                         VALUE => {accessor => "value"}
                         ); 
```

然后我尝试创建一个新行，如下所示：

```
 $schema->resultset("TestClass")->create(name => "test", value => "value"); 
```

上面会说： DBIx::Class::ResultSet::create(): No such column name on Database::Schema::Result::TestClass

但是，以下工作正常：

```
 $schema->resultset("TestClass")->create(NAME => "test", VALUE => "value"); 
```

如果稍后我有 TestClass 对象并尝试访问它的列：

```
 $object->NAME; 
```

我通过包“Database::Schema::Result::TestClass”得到无法定位对象方法“NAME”

但这没关系：

```
 $object->name 
```

我希望能够使用我提供的列的访问器创建对象，并创建对象并访问列以保持一致，但情况似乎并非如此。谁能解释这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T19:25:55.583

我认为您的困境的答案在于[*DBIx::Class Tutorial*](http://search.cpan.org/~jrobinson/DBIx-Class-Tutorial-0.0001/lib/DBIx/Class/Tutorial/Part3.pod#Changing_the_standard_accessors)[的第 3 部分](http://search.cpan.org/~jrobinson/DBIx-Class-Tutorial-0.0001/lib/DBIx/Class/Tutorial/Part3.pod#Changing_the_standard_accessors)*。此外，[类](http://search.cpan.org/~ribasushi/DBIx-Class-0.08250/lib/DBIx/Class/ResultSource.pm#add_columns)[方法的](http://search.cpan.org/~ribasushi/DBIx-Class-0.08250/lib/DBIx/Class/ResultSource.pm#add_columns)[手册页`add_columns``DBIx::Class::ResultSource`](http://search.cpan.org/~ribasushi/DBIx-Class-0.08250/lib/DBIx/Class/ResultSource.pm#add_columns)指出：*使用此*（`accessor`属性）*设置此列的访问器方法的名称。如果未设置，将使用列的名称。**

 *基本上你所做的是定义一个列`NAME`并为它创建一个访问器`name`*

# ruby-on-rails - 邮件发送空内容

> ID：13180998
> 
> 赞同：0
> 
> 时间：2012-11-01T16:06:43.417
> 
> 标签：ruby-on-rails, heroku, exception-notification

使用 Rails 3.1.1 和 Heroku + exception_notification gem 3.0.0

从昨天开始，我开始收到我的 notification_notifier 电子邮件，内容为空。主题和一切都和以前一样，但“信息没有内容”。它通常由日志数据、错误发生在哪个页面等组成。

我不确定我能做什么。我最近可以升级 gem，但我不确定，我不确定在这种情况下要降级到哪个版本。

更新：事实证明，从应用程序发送的所有电子邮件都没有内容（“告诉朋友”，“反馈给网站管理员”等），而不仅仅是 exception_notification。所以这不是 exception_notification 错误。

有没有其他人看过这个？你知道我做错了什么吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:10:20.700

该错误是由于初始化程序中的编码错误造成的。无法准确解释什么，因为这是我的应用程序所独有的。对不起一个不好的问题和无用的答案：/