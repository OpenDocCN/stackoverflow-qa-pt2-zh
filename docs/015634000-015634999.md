# StackOverflow 问答 15634000-15634999

# c# - 错误 - 找不到文件 'C:\WINDOWS\TEMP\xxxxxx.dll'

> ID：15634000
> 
> 赞同：4
> 
> 时间：2013-03-26T09:54:07.067
> 
> 标签：c#, .net-3.5, sitecore, sitecore6

在我们的开发服务器上的网站上出现此间歇性错误。每当用户在内容编辑器中时，在页面上或什至在从网站访问任何网页时都会随机收到此消息。使用 Sitecore 6.3。正在使用的 .NET Framework 是 3.5

检查事件日志时，它会发出此警告

错误是

```
Event Type: Warning 
Event Source:   ASP.NET 2.0.50727.0 
Event Category: Web Event  
Event ID:   1309 
Date:       3/26/2013 
Time:       9:26:02 AM 
User:       N/A 
Computer:   XXXXXX 
Description: 
Event code: 3005  
Event message: An unhandled exception has occurred.  
Event time: 3/26/2013 9:26:02 AM  
Event time (UTC): 3/26/2013 9:26:02 AM  
Event ID: 5d6aa660141a4ca0966f5a3fad3b0df6  
Event sequence: 726  
Event occurrence: 2  
Event detail code: 0    
Application information: 
    Application domain: /LM/W3SVC/1829939302/Root-1-130087629613322311 
    Trust level: Full 
    Application Virtual Path: / 
    Application Path: D:\WebSites\Dev\dev1.cms.local\ 
    Machine name: XXXXX    
Process information: 
    Process ID: 7728 
    Process name: w3wp.exe 
    Account name: NT AUTHORITY\NETWORK SERVICE    
Exception information: 
    Exception type: FileNotFoundException 
    Exception message: Could not find file 'C:\WINDOWS\TEMP\vhn7lf5h.dll'.    
Request information: 
    Request URL: http://dev1.cms.local/sitecore/shell/default.aspx?xmlcontrol=RichTextEditor&da=core&id=12b8259DD4D-BD3D-4035-80A4-BC8CB03D260D12d&ed=FIELD280399344&vs&la=en&fld=12b878702CE-F97D-40CB-8F1D-AA7AEBEC8B2412d&so=

Request path: /sitecore/shell/default.aspx 
User host address: 111.11.111.111 
User: sitecore\Anonymous 
Is authenticated: False 
Authentication Type:  
Thread account name: NT AUTHORITY\NETWORK SERVICE    
Thread information: 
    Thread ID: 45 
    Thread account name: NT AUTHORITY\NETWORK SERVICE 
    Is impersonating: False 
    Stack trace:    at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)    at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy)    at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)    at Microsoft.CSharp.CSharpCodeGenerator.FromFileBatch(CompilerParameters options, String[] fileNames)    at Microsoft.CSharp.CSharpCodeGenerator.FromSourceBatch(CompilerParameters options, String[] sources)    at Microsoft.CSharp.CSharpCodeGenerator.System.CodeDom.Compiler.ICodeCompiler.CompileAssemblyFromSourceBatch(CompilerParameters options, String[] sources)    at System.CodeDom.Compiler.CodeDomProvider.CompileAssemblyFromSource(CompilerParameters options, String[] sources)    at Sitecore.CodeDom.Compiler.CSharpCompiler.Compile(String sourceFile, String code, String assemblyFile, StringCollection referencedAssemblies)    at Sitecore.CodeDom.Compiler.CSharpCompiler.Compile(String code, StringCollection referencedAssemblies)    at Sitecore.CodeDom.Compiler.CSharpCompiler.SourceToMemory(String code, StringCollection referencedAssemblies)    at Sitecore.Web.UI.XmlControls.FolderControlSource.BuildControlAssembly(XmlNode fileNode, String& assemblyKey, String& assemblyFile)    at Sitecore.Web.UI.XmlControls.FolderControlSource.GetControlAssembly(String controlName, String& assemblyKey)    at Sitecore.Web.UI.XmlControls.FolderControlSource.ResolveType(String controlName, Boolean includeDynamicTypes)    at Sitecore.Web.UI.XmlControls.ControlSource.GetControlType(String namespacePrefix, String controlName, String mode, Boolean includeDynamicTypes)    at Sitecore.Web.UI.XmlControls.ControlFactory.GetControlType(String controlName, String mode, Boolean includeDynamicTypes)    at Sitecore.Web.UI.XmlControls.ControlFactory.GetControl(Control parent, String controlName, String mode, Object[] properties, AllowGenericControl allowGeneric)    at Sitecore.Web.UI.XmlControls.ControlFactory.GetControl(String controlName)    at Sitecore.Shell.DefaultPage.OnInit(EventArgs e)    at System.Web.UI.Control.InitRecursive(Control namingContainer)    at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-31T15:31:13.377

我有一个类似的异常消息*Source file 'C:\windows\TEMP\2vddx2j2.0.cs' could not be found'*并且内容编辑器不会加载。

```
Exception: Sitecore.CodeDom.Compiler.CompilerException
Message: Source file 'C:\windows\TEMP\2vddx2j2.0.cs' could not be found
Source: File: , line 0
   at Sitecore.CodeDom.Compiler.CSharpCompiler.AssertResults(String sourceFile, CompilerResults results)
   at Sitecore.CodeDom.Compiler.CSharpCompiler.Compile(String sourceFile, String code, String assemblyFile, StringCollection referencedAssemblies)
   at Sitecore.CodeDom.Compiler.CSharpCompiler.Compile(String code, StringCollection referencedAssemblies)
   at Sitecore.CodeDom.Compiler.CSharpCompiler.SourceToMemory(String code, StringCollection referencedAssemblies)
   at Sitecore.Web.UI.XmlControls.FolderControlSource.BuildControlAssembly(XmlNode fileNode, String& assemblyKey, String& assemblyFile)
   at Sitecore.Web.UI.XmlControls.FolderControlSource.GetControlAssembly(String controlName, String& assemblyKey)
   at Sitecore.Web.UI.XmlControls.FolderControlSource.ResolveType(String controlName, Boolean includeDynamicTypes)
   at Sitecore.Web.UI.XmlControls.ControlSource.GetControlType(String namespacePrefix, String controlName, String mode, Boolean includeDynamicTypes)
   at Sitecore.Web.UI.XmlControls.ControlFactory.GetControlType(String controlName, String mode, Boolean includeDynamicTypes)
   at Sitecore.Web.UI.XmlControls.ControlFactory.GetControl(Control parent, String controlName, String mode, Object[] properties, AllowGenericControl allowGeneric)
   at Sitecore.Web.UI.XmlControls.ControlFactory.GetControl(String controlName, String mode, Object[] properties, AllowGenericControl allowGeneric)
   at Sitecore.Web.UI.XmlControls.ControlFactory.GetControl(String controlName, String mode, Object[] properties)
   at Sitecore.Web.UI.XmlControls.ControlFactory.GetControl(String controlName, String mode)
   at Sitecore.Web.UI.XmlControls.ControlFactory.GetControl(String controlName)
   at Sitecore.Shell.DefaultPage.OnInit(EventArgs e)
   at System.Web.UI.Control.InitRecursive(Control namingContainer)
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

原来 AppPool 用户**ApplicationPoolIdentity**没有对 C:\Windows\Temp\ 目录的写入权限。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T10:50:30.867

这篇[博](http://devatheart.azurewebsites.net/2011/04/18/troubleshooting-xmlserializer-failure/)文绝对解决了我们面临的问题。

我们有这段代码

```
System.Diagnostics.Process.Start(RetrievedURL); 
```

它在按钮单击和打开网页的背景中生成 IE 进程（因为 IE 是网络服务器上的默认浏览器）。

这不是一件聪明的事情，但我们删除了该代码，它肯定会在后台停止 IE 进程。

感谢您的研究和这篇博文 Slobodan Stipic，又名 Slobo。

希望此解决方案将来对其他人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-19T13:24:38.813

如果您使用的是虚拟机，请尝试重新启动它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-10-08T19:52:26.353

尝试将 IIS 应用程序池标识设置为网络服务。确保 C:\Windows\Temp 在安全选项卡中具有网络服务用户并具有完全控制权

# django - 在中间件中设置要在模板中访问的变量

> ID：15634003
> 
> 赞同：7
> 
> 时间：2013-03-26T09:54:14.177
> 
> 标签：django

我似乎很难在我的一个中间件类中设置一个变量，然后我可以在模板层中访问该变量。

基本布局是这样的：

```
class TheMiddleware(object):
    def __init__(self, etc):
        stuff...

    def process_response(self, request, response):
        request.my_var = "whatever"
        return response 
```

然后在模板上获得不同的视图：

```
{% custom_tag arg_a %} 
```

这是一个模板标签，应该从请求中返回变量：

```
@register.simple_tag
def custom_tag(arg_a):
    return threading.currentThread().request.my_var 
```

此错误与**“渲染时捕获 AttributeError：'WSGIRequest' 对象没有属性 'my_var'”**

我认为这可能是我在模板标签中访问请求的方式。所以我将 django.core.context_processors.request 添加到我的 TEMPLATE_CONTEXT_PROCESSORS 中，并尝试将请求[对象](https://stackoverflow.com/questions/557460/django-having-middleware-communicate-with-views-templates)传递给标签，然后直接从模板访问请求，但没有运气。

我想我对请求对象的工作方式缺乏了解。是否可以将变量分配给请求对象并在多个视图中选择该变量？我认为请求对象是通过视图传递的，但似乎生成了一个新实例。

如果是这种情况，您将如何在中间件中存储一个全局变量，然后您可以从应用程序中的任何位置访问它，无论是在视图中还是在模板中？

**更新**：

为了消除混淆（无论是我的还是其他人，我都不确定！）我**没有**尝试在视图的 process_response 中间件中设置请求变量，然后在*同一视图的模板中*选择它。我知道那是行不通的，因为在保存变量之前已经处理了模板。（这是我的故意行为）。

我有两个视图，**view1**和**view2**视图一个有一个装饰器，它导致中间件在请求中设置变量。我希望访问该变量的是 view2 模板，它是在设置变量之后出现的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T10:03:14.950

您试图在处理中间件的响应期间设置变量。

我认为您应该实施`process_request()`来设置变量。

```
def process_request(self, request):
    request.my_var = "whatever"
    return 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T10:03:05.257

如果您在请求中设置它，我看不出有任何理由在这里尝试使用 threadlocals。您应该按照您的描述使用上下文处理器。

但是，您的问题的原因`process_response`是在请求/响应周期的响应阶段运行：即*在*您的视图被调用之后。您应该`process_request`改为定义。有关调用中间件方法的顺序的说明，请参见[此处。](https://stackoverflow.com/questions/15634003/setting-a-variable-in-middleware-to-be-accessed-in-the-template#15634003)

# css - 返回后在页面上的内部 div 中滚动位置（重新加载或返回历史记录）

> ID：15634008
> 
> 赞同：0
> 
> 时间：2013-03-26T09:54:24.797
> 
> 标签：css, html, scroll, back, browser-history

我在页面滚动时遇到问题。我在页面上有一个可滚动的页面和另一个可滚动的 DIV，其中包含一长串链接。如果我从此列表转到链接页面并想要返回（浏览器中的正常后退按钮），IE 和 Chrome 将我带到列表顶部（内部 DIV 顶部），但 Firefox 在此列表中返回精确的原始滚动位置。是否有任何解决方案可以在 IE 和 Chrome 中获取原始滚动位置？

# database - Access 2013 的 OleDb 连接字符串是什么？

> ID：15634010
> 
> 赞同：0
> 
> 时间：2013-03-26T09:54:27.257
> 
> 标签：database, ms-access, visual-studio-2012, connection-string, ms-access-2013

我正在使用 Visual Studio 2012 创建一个 Web 应用程序，该应用程序使用以下编程线连接到 Access 2013 数据库：

```
string connectionString = "provider=Microsoft.ACE.OLEDB.12.0;" + "data source=" + Page.Server.MapPath("App_Data\\db1.accdb"); 
```

但是由于错误而无法启动它

> 在本地计算机中找不到 Microsoft.ACE.OLEDB.12.0

Microsoft Access 2013 的正确连接字符串是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T11:25:04.093

充当 Web 服务器的计算机必须安装“Microsoft Access Database Engine 2010”。如果该机器上没有安装 Access，那么您可以在[此处](http://www.microsoft.com/en-us/download/details.aspx?id=13255)下载引擎的安装程序。

*请注意，64 位安装程序仅*包含 64 位版本；它不包括 32 位版本（在同一页面上单独提供）。

**编辑...**

至于连接字符串，我刚刚在我的 Access_2013 机器上测试了以下 VBScript，它运行良好。

```
Option Explicit
Dim con, rst
Set con = CreateObject("ADODB.Connection")
con.Open "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\Gord\Desktop\Database1.accdb;Persist Security Info=False;"
Set rst = CreateObject("ADODB.Recordset")
rst.Open "SELECT Col1 FROM Table1", con
Wscript.Echo rst(0).Value
rst.Close
Set rst = Nothing
con.Close
Set con = nothing 
```

[我从connectionstrings.com](http://www.connectionstrings.com/access-2007)复制了连接字符串。

**编辑...**

如果您有权访问 Web 服务器，则可以检查以下两个文件是否存在：

```
C:\Program Files\Common Files\Microsoft Shared\OFFICE14\ACEOLEDB.DLL

C:\Program Files (x86)\Common Files\Microsoft Shared\OFFICE14\ACEOLEDB.DLL 
```

在 64 位计算机上，第一个文件指示已安装 64 位版本的 Access 数据库引擎。在 32 位机器上，它表示已安装 32 位版本。

如果存在第二个 (x86) 文件，则您知道 32 位版本的 Access 数据库引擎存在于 64 位计算机上。

**编辑回复：最终评论**

这个问题确实与 Access Database Engine 的“位”有关：

> 我安装“Microsoft Access Database Engine 2010”64 位我应该安装 32 位，因为我的 Visual Studio 是 32 位感谢您的建议

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-12T18:17:36.003

这取决于您安装的办公室，如果您有 x64 位办公室，那么您必须将应用程序编译为 x64 以允许它运行，所以如果您希望它在 x36 上运行，那么您必须安装 office x86 才能接受，我试过了上面的所有解决方案，但没有一个有效，直到我意识到我有 Office x64bit，所以我将应用程序构建为 x64 并工作。

我还意识到，如果你把它放到任何 cpu 但不设置为首选 32 位也可以

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-09T15:20:56.567

让提供程序到 12.0 它适用于 ACCESS 2013

只需安装这两个元素：

1)Microsoft Access 2013 运行时： [https ://www.microsoft.com/en-us/download/details.aspx?id=39358](https://www.microsoft.com/en-us/download/details.aspx?id=39358)

然后

2) microsoft access 数据库引擎 2007: [https://www.microsoft.com/en-us/download/details.aspx?id=23734](https://www.microsoft.com/en-us/download/details.aspx?id=23734)

PS：32 位 x86 和 64 位 x64。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-07-07T14:35:18.450

这里用这个

> 提供者=Microsoft.ACE.OLEDB.15.0

这是 ms access 2013 的连接字符串

# java - 不确定 JButton 上的图像

> ID：15634012
> 
> 赞同：1
> 
> 时间：2013-03-26T09:54:28.257
> 
> 标签：java, swing, jbutton

我已经尝试过以下= `ImageIcon clear = new ImageIcon ("icons\delete1.png");`

```
JButton clearBT = new JButton(clear); 
```

它工作得很好，我只是有一个问题要问。图像的目录在我的硬盘中，但我想将我的项目交付给我的教授，所以我不确定图像在他的计算机中是否还会显示。问题是我不确定我放入代码中的目录（确切地说是 " `C:\\Users\\George\\Desktop\Giorgos\\icons\\delete1.png"`）是否会在我教授的电脑上显示一些东西。

非常感谢您的回答，如果我不够清楚，我愿意重新措辞。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:06:45.613

将图片放入您的项目中，您将不得不将代码更改为

```
JButton clearBT = new JButton(new ImageIcon(getClass().getResource(image_path))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:07:12.830

另一种选择是将图像与您的源代码捆绑在一起。例如，在项目层次结构中创建一个“包”/ 目录并将图像存储在那里。

然后，您可以通过以下方式加载它们：

```
ImageIcon image = new ImageIcon(getClass().getResource("/path/to/the/image"); 
```

例如，如果图像在 org/example/program 下，那么上面的内容将是：

```
ImageIcon image = new ImageIcon(getClass().getResource("/org/example/program/image.png"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T10:00:14.683

如果你教授的电脑可以上网，那么你可以使用类似的东西

（请将您的文件上传到互联网上的某个地方，例如[imgur](http://imgur.com)并传递您图片的网址 `new URL(here)`）

```
URL lenna =
            new URL("http://upload.wikimedia.org/wikipedia/en/2/24/Lenna.png");

ImageIcon clear = new ImageIcon (URL);
JButton clearBT = new JButton(clear); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T10:01:26.840

如果图标文件夹在项目目录文件夹中，并且在代码中，您正在调用图像：

ImageIcon clear = new ImageIcon ("icons\delete1.png");

它工作得很好，然后它会在任何地方工作。

只需确保您没有将图像位置地址称为引用计算机硬盘的完整地址。

# c# - 如何用 Value 交换 Hashtable 的键

> ID：15634014
> 
> 赞同：1
> 
> 时间：2013-03-26T09:54:34.633
> 
> 标签：c#, .net, hashtable

我已经通过以下方式解决了。由于它很长，我需要一个更好的。

//代码

```
class Program
{
    static void Main(string[] args)
    {
        Hashtable hsTbl = new Hashtable();

        hsTbl.Add(1, "Suhas");
        hsTbl.Add(2, "Madhuri");
        hsTbl.Add(3, "Om");
        List<object> keyList = new List<object>();
        List<object> ValList = new List<object>();

        Console.WriteLine("Key          Value");
        foreach (DictionaryEntry item in hsTbl)
        {
            Console.WriteLine(item.Key + "      " + item.Value);
            keyList.Add(item.Value);
            ValList.Add(item.Key);

        }
        hsTbl.Clear()

//Swapping          

        for (int i = 0; i < keyList.Count; i++)
        {
            hsTbl.Add(keyList[i], ValList[i]);
        }

//will display hashtable after swapping

        foreach (DictionaryEntry item in hsTbl)
        {
            Console.WriteLine(item.Key + "      " + item.Value);
        }
    }
} 
```

还有其他更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:59:47.743

您可以使用额外的数组和 CopyTo 方法而不是 2 个列表来稍微简单一些，但无需创建额外的 HashTable，如下所示：

//代码

```
using System;
using System.Collections;

class Program
{
  static void Main()
  {
      Hashtable hsTbl = new Hashtable();

      hsTbl.Add(1, "Suhas");
      hsTbl.Add(2, "Madhuri");
      hsTbl.Add(3, "Om"); 

      DictionaryEntry[] entries = new DictionaryEntry[hsTbl.Count];
      hsTbl.CopyTo(entries, 0);
      hsTbl.Clear();

      foreach(DictionaryEntry de in entries) hsTbl.Add(de.Value, de.Key);

      // check it worked

      foreach(DictionaryEntry de in hsTbl)
      {
         Console.WriteLine("{0} : {1}", de.Key, de.Value);
      }
  }
} 
```

请注意，一般情况下，任何方法都不能保证有效，因为原始哈希表中的某些值可能会重复，因此不适合作为键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:00:38.843

你可以使用 generic `Dictionary<string,int>`，这很容易用 Linq 创建：

```
var dictionary = hsTbl.OfType<DictionaryEntry>()
                      .ToDictionary(e => (string)e.Value, e => (int)e.Key); 
```

如果你真的需要`Hashtable`，那么：

```
Hashtable table = new Hashtable();
foreach (DictionaryEntry entry in hsTbl)
    table.Add(entry.Value, entry.Key); 
```

但是，如果要交换值和键，请确保所有值都是唯一的。

# ios - 在ios中读取html文件表

> ID：15634017
> 
> 赞同：1
> 
> 时间：2013-03-26T09:54:45.633
> 
> 标签：ios, xcode, pdf, core-text

我正在创建一个用于读取 html 文件的应用程序。我搜索并发现我们可以轻松地将 html 转换为不可编辑的 PDF 格式。如果我们使用 coretext，那么我们可以编辑字体。在服务器中，我们保留一个 html 文件，其中包括文本和表格。

**我的问题是**

1.  我们如何转换表内的数据？
2.  如何在阅读时更改文本的字体大小？（同一个时间表不应该被打破）

如果有人有想法，请帮助我。在此先感谢

# javascript - 浮动图表中一致的条形宽度

> ID：15634018
> 
> 赞同：2
> 
> 时间：2013-03-26T09:54:46.803
> 
> 标签：javascript, charts, flot

我无法在 Flot 中获得一致的条形宽度。我的图表可以包含 1 到 10 个数据点。当有 10 个数据点时，条形图的大小合适。但是，当数据点少于 10 个时，图表中的条形开始变粗。以下两张图片证明了这一点。

![细条](../Images/60bd4467988da7f23ddc9789dd02ef1a.png)

当有 10 个项目时，这些条的大小适中。

![脂肪棒](../Images/c1b95a0a85a6781ccd10200b2304d8c9.png)

当只有 1 个项目时，栏变得非常大。

我知道该`barWidth`属性，并且已尝试更改它。问题是它只影响图表中包含 10 个项目的条形的大小，但它只影响图表中的粗条。

我还在某处读过，我可以尝试更改`div`包含图表的高度，但我想避免这种情况，因为我希望图表具有固定的尺寸，而不管显示的项目如何。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T12:02:13.010

问题是 barWidth 以轴单位表示。随着您减少条形的数量，y 轴会自动缩放，直到只有一个条形它从 0 变为 1，并且默认条形宽度 0.8 占据了大部分垂直空间。

您可以通过两种方式解决此问题：

1.  计算 barWidth 以随系列数缩放，即 0.8 * numSeries / maxSeries。如果 maxSeries 为 10，则 barWidth 从 10 系列的 0.8 缩放到一个系列的 0.08。

2.  在 y 轴上设置一个固定的最小值和最大值，最大值为 numSeries + (maxSeries - numSeries) / 2，最小值为 -(maxSeries - numSeries) / 2。即使它们的数量低于 maxSeries，这也会在条形图上方和下方保留空间.

这两个都要求您对将出现的最大系列数有所了解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T13:37:56.100

我认为您必须将某处标签传递给您的 yaxis（ticks 属性）。假设您的标签位于 myLabels 数组中。因此，如果只有 1 个标签，请在其前后添加新的空标签以使您的唯一条更小：

```
var myLabels = [];

// add a fake label (in my production code I grab labels from the server)
myLabels.push([0, 'My only label']); // This label has index=0

if (myLabels.length == 1) {
    myLabels.splice(0, 0, [-1, '']); // (-1) is the new index lower than my label's index
    myLabels.push([1, '']); // (1) is the new index greater than my label's index
}

// In configuration of a plot:

// [...]
yaxis: {
    ticks: myLabels,
    // [...]
}, 
```

# wso2 - WSO2 如何将 ESB 与 Identity Server 集成

> ID：15634019
> 
> 赞同：2
> 
> 时间：2013-03-26T09:54:49.320
> 
> 标签：wso2, wso2esb

可能我的理解有误，请指教。

**要求：**

(1) 用户 A 和用户 B 想访问一个 Web 服务 SayHello。

(2) 只有用户 A 有权限。

(3) SayHello web 服务只返回一个字符串“hello”

**之前：**

(1) 调用 SayHello，根据 SayHello?wsdl 创建一个客户端。 - 成功

(2)通过ESB创建代理服务SayHelloProxyService，将此代理服务托管给SayHello服务，根据SayHelloProxyService?wsdl创建客户端。 - 成功

**现在：**

在里面添加 Identity Server，只给用户 A 访问权限，如下图： ![在此处输入图像描述](../Images/2321fab9e3a8932ca30638944aac69aa.png)

**问题**：

现在，我在想如果我还想调用 SayHelloProxyService，我应该更改客户端的代码吗？携带一些令牌，如用户名或 SayHelloProxyService 什么？如果是这样如何编写客户端代码？也许我的理解是完全错误的，但如果有一个关于这方面的小例子会有很大帮助，有人知道吗？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T11:29:45.303

我的理解是您设置了错误的权限。“配置>用户和角色>角色”中的角色权限仅对服务器本身在本地有效，在您的场景中是IS，但对外部服务无效。

如果您需要 IS 来授权某些服务，而不是更改客户端的代码，您可能希望创建一个简单的 XACML 策略，如 [1] 中所述，并启用 WSO2IS 作为策略决策点。

[1] [http://wso2.org/library/articles/2010/10/using-xacml-fine-grained-authorization-wso2-platform](http://wso2.org/library/articles/2010/10/using-xacml-fine-grained-authorization-wso2-platform)

# php - 如何记录 IDE 的魔法（_call 和 _callStatic）方法

> ID：15634021
> 
> 赞同：92
> 
> 时间：2013-03-26T09:54:59.690
> 
> 标签：php, documentation, phpstorm, magic-methods, docblocks

在使用 notepad++ 和 sublime 编码多年后，有人建议我尝试使用 PHP IDE。我正在尝试 phpStorm，它看起来不错。代码完成和文档是一个很棒的功能，但在使用魔术方法时对我来说不起作用。**是否有办法让 phpStorm 了解魔术方法中发生了什么？**

我们的情况是这样的：

```
abstract class a {
    public static function __callStatic($method,$args)
    {
        if(strpos($method,"get_by_") === 0)
        {
            //do stuff
        } elseif(strpos($method,"get_first_by_") === 0) {
            //do stuff
        } elseif($method == "get_all") {
            //do stuff
        }
    }
}

class b extends a {
    // some more stuff
}

b::get_by_user_id(27);
b::get_first_by_id(156);
b::get_all(); 
```

神奇的 callStatic 方法允许我们通过构成函数调用的 1 个或多个参数来获取对象集合。

我看到在这些情况下有一个 @method 语句可供使用，但 phpStorm 只选择了这些语句中的第一个。此外，我只能将返回类型设置为混合，因为我希望能够将其设置为调用它的任何类（在我的示例中为 b）。

任何想法或建议将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2013-03-26T10:17:12.370

使用类级别的 PHPDoc 注释——特别是**@method**标记——在 PhpStorm 中可以正常工作：

```
/**
 * @method static someClass get_by_user_id(int $id) Bla-bla
 * @method static someClass get_first_by_id(int $id) 
 */
abstract class a {
... 
```

在上面：

*   `@method`-- PHPDoc 标签
*   `static`-- 告诉这是静态方法
*   `someClass`或`$this`-- 返回类型
*   `get_by_user_id`-- 方法名
*   `(int $id)`-- 方法签名：`([[type] [parameter]<, ...>])`
*   `Bla-bla`-- 一些可选的描述

更多关于`@method`：

*   [https://docs.phpdoc.org/latest/references/phpdoc/tags/method.html](https://docs.phpdoc.org/latest/references/phpdoc/tags/method.html)
*   [https://github.com/phpDocumentor/phpDocumentor2/blob/develop/docs/PSR.md#711-method](https://github.com/phpDocumentor/phpDocumentor2/blob/develop/docs/PSR.md#711-method)

**PS** 虽然`@method static`在 PhpStorm 中工作正常（告诉 IDE 该方法是静态的），但实际的 phpDocumentor 工具可能（还没有？）支持它（抱歉，有一段时间没有使用它）。

* * *

**或者**：（当然是在 PhpStorm 中）`Settings | Inspections | PHP | Undefined | Undefined method --> Downgrade severity if __magic methods are present in class`——它不会以任何方式帮助此类方法的代码完成，但不会将这些魔术方法标记为“未定义方法”错误。

* * *

**phpDocumentor**`@property`关于为/标签使用正则表达式/部分名称的票据`@method`（它对文档的用途以及在处理代码完成时它对实际 IDE 的帮助有多大）：

*   [https://github.com/phpDocumentor/phpDocumentor2/issues/689](https://github.com/phpDocumentor/phpDocumentor2/issues/689)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-11-27T10:28:35.460

与原始问题有些相关：

您也可以在 phpstorm 元文件中定义它。这是工厂方法（v2016.3）的示例：

```
// Define in .phpstorm.meta.php
namespace PHPSTORM_META {
    $STATIC_METHOD_TYPES = [
        \Factory::create('') => [],
    ];
}

// Then use in code
$factory = new \Factory();
$user = $factory->create(\User::class);
// Here you get autocomplete.
$user->subscribe(); 
```

这样，当魔术发生时，您不必对所有可能性进行 docblock。

有一些[文档](https://confluence.jetbrains.com/display/PhpStorm/PhpStorm+Advanced+Metadata)了解详细信息。

# c# - 使用.net c#根据条件从数据库中随机获取数据

> ID：15634023
> 
> 赞同：0
> 
> 时间：2013-03-26T09:55:20.550
> 
> 标签：c#, .net, database

我从互联网上得到代码，它包含一个名为 TblQuestions 的数据库表。创建了一个 Default.aspx 页面，其文本框名称为 TxtRequiredRecords & button1。当值 2 在文本框中输入并单击按钮 1 时，它会随机生成 2 个问题。如果输入 5，它会从表中随机生成 5 个问题。我想添加另一个文本框 2 用于输入选项。我的目标是，如果我在文本框 1 和 C 中输入 2在 textbox2.it 中，它将仅从选项 C 问题中随机生成 2 个问题。

我在哪里修改我的代码以获得结果？

我的代码 Default.aspx ：-

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">`
 <title>Untitled Page</title>
</head>
<body>
<form id="form1" runat="server">
    <div>
        <asp:TextBox ID="TxtRequiredRecords" runat="server"></asp:TextBox>
        <asp:Button ID="BtnDisplayRecords" runat="server" OnClick="Button1_Click" Text="Display Records" />
        <br />
        <br />
        <asp:GridView ID="GvResults" runat="server">
        </asp:GridView>
    </div>
</form>
</body>
</html> 
```

c#代码：-

```
using System;
using System.Data;
using System.Configuration;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using System.Data.SqlClient;
using System.Collections;
public partial class _Default : System.Web.UI.Page
{
static int TotalRecords;
SqlConnection con;
SqlDataAdapter sqlda;
DataTable dt;
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        string query = "SELECT COUNT(*) AS TotalRecords FROM TblQuestions";
        DataTable dt = GetRecords(query);
        TotalRecords = Convert.ToInt32(dt.Rows[0]["TotalRecords"]);
    }

}
protected void Button1_Click(object sender, EventArgs e)
{
    bool IsInt;
    int RequiredRecords;
    string CSVData, query;
    IsInt = Int32.TryParse(TxtRequiredRecords.Text, out RequiredRecords);
    if (IsInt)
    {
        if (TotalRecords >= RequiredRecords)
        {
            CSVData = GetRandomNumbersCSV(TotalRecords, RequiredRecords);
            query = "SELECT * FROM (SELECT ROW_NUMBER() OVER(ORDER BY QuestionID) AS RowID,* FROM TblQuestions)TempTable WHERE RowID IN(" + CSVData + ")";
            dt = GetRecords(query);
            GvResults.DataSource = dt;
            GvResults.DataBind();
        }
        else
        {
            Response.Write("Required Records must be greater than Requried Records.");
        }
    }
    else
    {
        Response.Write("Invalid Number");
    }
}

public ArrayList RandomNumbers(int max)
{
    ArrayList lstNumbers = new ArrayList();
    Random rndNumber = new Random();
    int number = rndNumber.Next(1, max + 1);
    lstNumbers.Add(number);
    int count = 0;
    do
    {
        number = rndNumber.Next(1, max + 1);
        if (!lstNumbers.Contains(number))
        {
            lstNumbers.Add(number);
        }
        count++;
    }
    while (count <= 10 * max);
    return lstNumbers;
}

public string GetRandomNumbersCSV(int max, int req)
{
    string CSV = "";
    ArrayList lstNumbers = RandomNumbers(max);
    for (int i = 0; i < req; i++)
        CSV += lstNumbers[i].ToString() + ",";
    CSV = CSV.Remove(CSV.Length - 1);
    return CSV;
}

public DataTable GetRecords(string Query)
{
    con = GetConnection();
    con.Open();
    sqlda = new SqlDataAdapter(Query, con);
    dt = new DataTable();
    sqlda.Fill(dt);
    con.Close();
    return dt;
}

public SqlConnection GetConnection()
{
    con = new SqlConnection(ConfigurationManager.ConnectionStrings["sqlcon"].ToString());
    return con;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:33:10.083

通常，ID 范围中可能会有间隙，您的代码会因此而失败。而且你也在努力避免重复。

这样做的正确方法

*   从表中获取 ID 列表，您只能为“选项 C”添加条件。
*   [洗牌](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)IdList
*   取前 N 个元素

# php - 当它们被链接的其他值勾选时如何循环通过复选框

> ID：15634024
> 
> 赞同：0
> 
> 时间：2013-03-26T09:55:21.167
> 
> 标签：php, arrays, loops, checkbox, hidden

我似乎无法正确处理我拥有的这份清单。我有 x 个表，其行数在 10 到 200 之间。每一行代表一个项目，如果您选择一个或多个复选框，它会循环遍历这些复选框并在需要时更新/添加/删除行。我该怎么做呢？

我目前有一个带有 id[] 的隐藏字段，以及两个带有 own[] 和 special[] 的复选框。ID 显然是唯一的项目 ID，两个复选框代表您拥有普通版本还是特殊版本（或没有，或两者兼有）。当我遍历它们时，所有 ID 都会被回显，但我似乎无法将两个复选框的值连接到它们。一个简单的 for 循环将不起作用，因为所有 ID 都会被回显，因此复选框没有正确循环。

我对PHP有点了解，所以用你所拥有的来打我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:06:13.060

您应该尝试制作二维数组（如果我理解得很好）。您也可以忘记隐藏字段：

`checkboxes[<?= $id ?>][own]`和`checkboxes[<?= $id ?>][special]`。你应该在 php 中有这样一个数组：

```
$_POST['checkboxes'] => array(
                         1 => array(
                              'own' => 'on'
                         ),
                         3 => array(
                              'own' => 'on',
                              'special' => 'on
                         )
                    ); 
```

在这里，您检查了 id "1" 的 "own" 复选框和 id "3" 的 "own" 和 "special" 复选框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T22:04:26.490

最终产品：

```
<input type="checkbox" name="product[<?php echo $product['id']; ?>][own]" /> <!-- this is row 20 of the database -->
<input type="checkbox" name="product[<?php echo $product['id']; ?>][own]" /> <!-- row 64 -->
<input type="checkbox" name="product[<?php echo $product['id']; ?>][special]" /> <!-- row 127 --> 
```

提交后，此代码：

```
foreach($_POST['product'] as $id => $p) {
    echo "ID: ".$id." - Own: ".$p['own']." - Special: ".$p['special']."<br />";
} 
```

将产生这个结果：

```
ID: 20 - Own: on - Special:
ID: 64 - Own: on - Special: 
ID: 127 - Own: - Special: on 
```

# transparent - 如何在 Visual Basic 中制作可移动的透明表单？

> ID：15634031
> 
> 赞同：1
> 
> 时间：2013-03-26T09:55:37.370
> 
> 标签：transparent, movable

我创建了一个非常简单的数字时钟，就像练习帮助我的 vb 技能一样。我基本上复制了屏幕右下角的计时器，除了我可以在屏幕上移动它，只有当它有彩色背景时。如果我使面板（计时器的父级）透明，则应用程序不再允许我移动它。我想知道是否可以用鼠标移动透明物体？

（下面的整个代码，非常简单）

```
Public Class Form1 
```

将 X、Y 调暗为整数 将 NewPoint 调暗为新 System.Drawing.Point

Private Sub TextBox1_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) End Sub

Private Sub Label1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) 处理 Label1.Click End Sub

Private Sub Timer1_Tick_1(ByVal sender As System.Object, ByVal e As System.EventArgs) 处理 Timer1.Tick Label1.Text = TimeOfDay End Sub

Private Sub Panel1_MouseDown(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Panel1.MouseDown X = Control.MousePosition.X - Me.Location.X Y = Control.MousePosition.Y - Me.Location.Y End子

Private Sub Panel1_MouseMove(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Panel1.MouseMove If e.Button = Windows.Forms.MouseButtons.Left Then NewPoint = Control.MousePosition NewPoint.X -= (X) NewPoint.Y -= (Y) Me.Location = NewPoint End If End Sub

Private Sub Panel1_Paint(ByVal sender As System.Object, ByVal e As System.Windows.Forms.PaintEventArgs) 处理 Panel1.Paint

结束子

私有共享函数 hwnd() 只要抛出新的 NotImplementedException 结束函数

结束类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:00:04.050

希望以下示例对您有所帮助。

```
using System;
using System.Drawing;
using System.Drawing.Drawing2D;
using System.Drawing.Text;
using System.Windows.Forms;

namespace WhoAmI
{
    public partial class Form1 : Form
    {
        private Point _clickPoint;
        private bool _doMove = false;

        protected override void OnPaint(PaintEventArgs e)
        {
            //base.OnPaint(e);

            SolidBrush text_Brush = new SolidBrush(Color.FromArgb(255, Color.YellowGreen));
            RectangleF text_box = new RectangleF(0, 0, this.Size.Width, this.Size.Height);
            StringFormat f = new StringFormat();
            f.Alignment = StringAlignment.Center;
            f.LineAlignment = StringAlignment.Center;

            //e.Graphics.TextRenderingHint = TextRenderingHint.AntiAliasGridFit;
            e.Graphics.TextRenderingHint = TextRenderingHint.AntiAlias;
            e.Graphics.InterpolationMode = InterpolationMode.HighQualityBilinear;
            e.Graphics.PixelOffsetMode = PixelOffsetMode.HighQuality;
            e.Graphics.SmoothingMode = SmoothingMode.HighQuality;
            //e.Graphics.Clear(Color.Transparent);
            e.Graphics.DrawRectangle(new Pen(Color.YellowGreen, 1), new Rectangle(0, 0, this.Size.Width, this.Size.Height));
            //e.Graphics.FillRectangle(Brushes.Transparent, new Rectangle(0, 0, this.Size.Width - 1, this.Size.Height - 1));
            e.Graphics.DrawString(System.Environment.MachineName, new Font("Arial", 18, FontStyle.Bold), text_Brush, text_box, f);
        }

        //Completely shown but not clickable!
        //protected override CreateParams CreateParams
        //{
        //    get
        //    {
        //        CreateParams parms = base.CreateParams;
        //        parms.ExStyle |= 0x20;  // Turn on WS_EX_TRANSPARENT
        //        return parms;
        //    }
        //}

        protected override void OnPaintBackground(PaintEventArgs e)
        {
            //base.OnPaintBackground(e);      
            e.Graphics.FillRectangle(Brushes.Transparent, new Rectangle(0, 0, this.Size.Width - 1, this.Size.Height - 1));
        }

        public Form1()
        {
            InitializeComponent();

            this.BackColor = Color.White;
            this.TransparencyKey = this.BackColor;
            //this.Opacity = 1F;
        }

        private void Form1_MouseDown(object sender, MouseEventArgs e)
        {
            this._doMove = true;

            this._clickPoint = new Point(e.X, e.Y);
        }
        private void Form1_MouseMove(object sender, MouseEventArgs e)
        {
            if (this._doMove)
            {
                if (e.Button == MouseButtons.Left)
                {
                    this.Location = new Point(this.Left + e.X - this._clickPoint.X, this.Top + e.Y - this._clickPoint.Y);
                }
            }
        }
        private void Form1_MouseUp(object sender, MouseEventArgs e)
        {
            this._doMove = false;
        }
        private void Form1_MouseLeave(object sender, EventArgs e)
        {
            this._doMove = false;
        }
        private void Form1_MouseClick(object sender, MouseEventArgs e)
        {
            if (e.Button == System.Windows.Forms.MouseButtons.Right)
            {
                if (MessageBox.Show("Exit this app?", "Who Am I?", MessageBoxButtons.YesNo) == System.Windows.Forms.DialogResult.Yes)
                {
                    this.Close();
                    this.Dispose();
                }
            }
        }
    }
} 
```

# iphone - 只有 INADDR_ANY 或 0x7f000001 工作如何设置任何其他 IP 地址？

> ID：15634032
> 
> 赞同：0
> 
> 时间：2013-03-26T09:55:38.257
> 
> 标签：iphone, ios, sockets, cfnetworking

我在我的应用程序中使用以下代码，
但是当我设置**192.168.0.1(inhexadecimal form)**
之类的 IP 地址代替**INADDR_ANY/0x7f000001(127.0.0.1)**时出现错误。

```
BAction)createSocket:(id)sender {
CFSocketContext CTX = {0, "this is server", NULL, NULL, NULL};
 tcpServer = CFSocketCreate(NULL,0, 0, 0,kCFSocketAcceptCallBack, 0, &CTX);
if (tcpServer == NULL)
    NSLog(@"server isn't created");
else
    NSLog(@"sever is successfully created");
struct sockaddr_in addr;
memset(&addr, 0, sizeof(addr));
addr.sin_len = sizeof(addr);
addr.sin_family = AF_INET;
addr.sin_port = htons(2048);
addr.sin_addr.s_addr = htonl(0x7f000001); 

NSData *address = [ NSData dataWithBytes: &addr length: sizeof(addr) ];
if (CFSocketSetAddress(tcpServer, (__bridge CFDataRef) address) != kCFSocketSuccess) {
    NSLog(@"socket address not set");
}
else
{
    NSLog(@"socket address is successfully added");
} 
```

我可以添加其他 IP 地址或使用其他 IP 的任何限制吗？如果可以比怎么办？
我想使用其他 ip，因为我正在使用三个 iphone 相互连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:58:10.430

您的本地 IP 地址不是 192.168.0.1。那是你的路由器地址。绑定地址必须是本地主机中 NIC 的 IP 地址，或 INADDR_ANY 或 127.0.0.1。

# javascript - 使用 input type="range" 缩放图像

> ID：15634036
> 
> 赞同：0
> 
> 时间：2013-03-26T09:55:49.380
> 
> 标签：javascript, html, image, input, scale

标题说什么。可能吗？我希望使用诸如输入类型=“范围”之类的滑块从其中心放大和缩小图像。

提前致谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-26T10:07:28.103

```
<input id="ranger" type="range" min="1" max="100" value="100" />
<hr />
<img id="image" src="http://google.com/images/logo.png" width="275" height="95" />

var ranger = document.getElementById('ranger'),
    image =  document.getElementById('image'),
    width = image.width,
    height = image.height;

ranger.onchange = function(){
    image.width = width * (ranger.value / 100);
    image.height = height * (ranger.value / 100);
} 
```

演示：http: [//jsfiddle.net/DnE83/1/](http://jsfiddle.net/DnE83/1/)

研究它，弄清楚它是如何工作的。

# objective-c - IOS6 - 从 viewDidLoad 获取 IBoutlet 的框架返回 0

> ID：15634037
> 
> 赞同：1
> 
> 时间：2013-03-26T09:55:49.607
> 
> 标签：objective-c, uiview, autolayout, viewdidload, iboutlet

我正在使用 Autolayout 制作故事板。我有一个viewController（即myController），并在其中拖入了一个UIView（即myView）。在 myController.h 中，我为 myView 声明了一个 IBOutlet：

```
@property (weak, nonatomic) IBOutlet UIView *myview; 
```

后来我通过故事板将它与我的 UI 相关联（来自 myController 的出口的 ctrl+dradding）。

关键是我以为我可以从 myController viewDidLoad 方法中看到 myView 的大小：

```
NSLog(@"pag h:%f e w:%f",myView.frame.size.height, myview.frame.size.width); 
```

但是这两个输出都是0。我可能在哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T10:06:36.483

如果您使用的是自动布局，那么在 viewDidLoad 布局还没有发生。当从情节提要加载视图时，此时的帧仍然等于 CGRectZero。

在 viewDidAppear: 中再次记录此内容，您将在布局完成后看到框架。

# asp.net - 如何增加 ASP.Net 的执行时间

> ID：15634039
> 
> 赞同：0
> 
> 时间：2013-03-26T09:55:56.510
> 
> 标签：asp.net, mysql

我写了一个查询，它需要超过 30 秒。

我的代码：

```
MySqlConnection myConnection = new    MySqlConnection(ConfigurationSettings.AppSettings["CollectiveIntelligence"]);

    string query = @"SELECT TBL.NAME1,
                           TBL.NAME2 
                      FROM (SELECT MLD1.LOGIN_NAME AS NAME1,
                                   MLD2.LOGIN_NAME AS NAME2 
                              FROM FEDERATED_M_LOGIN_DETAILS MLD1 
                              JOIN FEDERATED_M_LOGIN_DETAILS MLD2 
                             WHERE MLD1.LOGIN_NAME < MLD2.LOGIN_NAME
                          ORDER BY NAME1,NAME2) TBL
                     WHERE NOT EXISTS (SELECT USER_NAME1,
                                              USER_NAME2 
                                         FROM CONNECTION C
                                        WHERE (C.USER_NAME1 = TBL.NAME1 AND C.USER_NAME2 = TBL.NAME2));";

    MySqlCommand myCommand = new MySqlCommand(query, myConnection);

    //Open Connection
    myConnection.Open();
    myCommand.CommandTimeout = 0;
    MySqlDataReader reader = myCommand.ExecuteReader();

    DataTable dt = new DataTable();
    dt.Load(reader);

    GridView1.DataSource = dt;
    GridView1.DataBind();

    myConnection.Close();
    reader.Close(); 
```

发生错误

```
 MySqlDataReader reader = myCommand.ExecuteReader(); 
```

错误消息：**超时已过期。操作完成前超时时间已过或服务器无响应**

如何增加asp.net的执行超时，使其执行查询/

[编辑]

当我点击解释它的显示是这样的

```
id select_type  table   type   possible_keys   key              key_len   ref   rows   Extra
1, SIMPLE,      MLD1,   ALL,   ,               ,                 ,         ,    295,   Using temporary; Using filesort
1, SIMPLE,      MLD2,   ALL,   ,               ,                 ,         ,    295,   Using where; Using join buffer
1, SIMPLE,      C,      index, ,               INDEX_CONNECTION, 94,       ,    30754,   Using where; Using index; Not exists 
```

[/编辑]

请帮忙

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:58:19.117

我会将它添加到您的配置文件中，以便您可以控制每个应用程序。因此，在连接字符串中添加

```
Timeout=60; 
```

例子：

“数据源=来源；初始目录=cata；超时=60；等”

然后，在您的代码中，您可以调用它。

```
myCommand .CommandTimeout = ConfigurationManager.AppSettings["CommandTimeOut"] 
```

不过，我也建议您考虑一下您的 SQL 脚本是否有效！如果可以在其他地方解决，那么更改这些设置是没有意义的。在服务器上本地运行命令，看看是否只需要很长时间才能排除任何其他问题。

要在 Visual Studio 中更改超时，请打开“工具 -> 选项”，然后在数据库工具 - 查询和视图设计器下。在这里，您可以更改时间，甚至禁用取消长时间运行的查询的选项。

表和数据库设计器部分也有超时（仍在数据库工具下）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:59:54.947

您也可以在 IIS 中修改它，

```
select your website > advanced settings >limits > connection Time out 
```

您必须考虑查询的性能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T10:11:07.523

您的查询正在使用过滤器执行选择，对结果集进行排序，然后再次对其进行过滤。最好先过滤它，然后将排序应用于减少的结果集。这将减少您的查询所花费的时间，因此您不会超时。

```
SELECT MLD1.LOGIN_NAME AS NAME1, MLD2.LOGIN_NAME AS NAME2 
FROM FEDERATED_M_LOGIN_DETAILS MLD1 
JOIN FEDERATED_M_LOGIN_DETAILS MLD2 ON MLD1.LOGIN_NAME < MLD2.LOGIN_NAME
WHERE NOT EXISTS (SELECT USER_NAME1, USER_NAME2 
                FROM CONNECTION C
                WHERE C.USER_NAME1 = MLD1.NAME1 AND C.USER_NAME2 = MLD2.NAME2)
               )
ORDER BY MLD1.LOGIN_NAME, MLD2.LOGIN_NAME 
```

## 更新

根据您的其他[问题](https://stackoverflow.com/questions/15616638/how-to-remove-duplicate-rows-from-a-join-query-in-mysql)，可以删除相关的子查询并用子查询替换。

```
SELECT MLD1.LOGIN_NAME AS NAME1, MLD2.LOGIN_NAME AS NAME2 
FROM FEDERATED_M_LOGIN_DETAILS MLD1 
JOIN FEDERATED_M_LOGIN_DETAILS MLD2 ON MLD1.LOGIN_NAME < MLD2.LOGIN_NAME
WHERE (MLD1.LOGIN_NAME + MLD2.LOGIN_NAME) NOT IN 
                     (SELECT USER_NAME1 + USER_NAME2 FROM CONNECTION C )
ORDER BY MLD1.LOGIN_NAME, MLD2.LOGIN_NAME 
```

## 更新 2

由于上述速度较慢，您也可以尝试以下方法。

```
SELECT MLD1.LOGIN_NAME AS NAME1, MLD2.LOGIN_NAME AS NAME2 
FROM FEDERATED_M_LOGIN_DETAILS MLD1 
JOIN FEDERATED_M_LOGIN_DETAILS MLD2 ON MLD1.LOGIN_NAME < MLD2.LOGIN_NAME
LEFT OUTER JOIN CONNECTION C ON C.USER_NAME1 = MLD1.NAME1 AND C.USER_NAME2 = MLD2.NAME2
WHERE C.USER_NAME1 is null and C.USER_NAME2 is null
ORDER BY MLD1.LOGIN_NAME, MLD2.LOGIN_NAME 
```

您可能需要向 FEDERATED_M_LOGIN_DETAILS.LOGIN_NAME、CONNECTION.USER_NAME1 和 CONNECTION.USER_NAME2 添加索引以提高性能。

# android - 创建和插入时出现 SQLITE 错误

> ID：15634041
> 
> 赞同：0
> 
> 时间：2013-03-26T09:55:58.023
> 
> 标签：android, sqlite

有人帮忙，我不知道这段代码有什么问题，对我来说看起来不错...这是我的代码 sqlite

```
package com.ilab.klr3;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.os.AsyncTask;

public class SQLiteDbhelper extends SQLiteOpenHelper {
    private static final int DB_VERSION=1;
    public static final String DB_NAME="klr";
    public static final String CHAPTER_NUMBER="chapter_number";
    public static final String CHAPTER_NAME="chapter_name";
    public static final String CHAPTER_TITLE="chapter_title";
    public static final String PART_DESC="part_description";
    public static final String PART_NUMBER="part_number";
    public static final String PART_TITLE="part_title";
    public static final String ARTICLE_ID="article_id";
    public static final String ARTICLE_CONTENT="article_content";
    public static final String ARTICLE_NUMBER="article_numer";

    public SQLiteDbhelper(Context context) {
        super(context, DB_NAME, null, DB_VERSION);
    }
    @Override
    public void onCreate(SQLiteDatabase db) {
        String create_chapters=String.format("CREATE TABLE IF NOT EXISTS %s(%s INTEGER PRIMARY KEY AUTOINCREMENT,%s TEXT, " +
                "%s TEXT, %s TEXT);",KLRConstants.TABLE_CHAPTER,KLRConstants.CHAPTER_ID, CHAPTER_NUMBER,CHAPTER_NAME,CHAPTER_TITLE);
        String create_parts=String.format("CREATE TABLE IF NOT EXISTS %s(%s INTEGER PRIMARY KEY AUTOINCREMENT,%s TEXT, " +
                "%s TEXT, %s TEXT);",KLRConstants.TABLE_PARTS,KLRConstants.PART_ID,PART_DESC,PART_NUMBER,PART_TITLE);
        String create_articles=String.format("CREATE TABLE IF NOT EXISTS %s(%s INTEGER PRIMARY KEY AUTOINCREMENT,%s TEXT, " +
                "%s TEXT, %s TEXT);",KLRConstants.TABLE_ARTICLES,KLRConstants.ARTICLE_ID,ARTICLE_ID,ARTICLE_CONTENT,ARTICLE_NUMBER);
        db.execSQL(create_articles);
        db.execSQL(create_chapters);
        db.execSQL(create_parts);
        (new InsertSampleData(db)).execute();
    }
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {}
    class InsertSampleData extends AsyncTask<Void, Void, Void>{
        SQLiteDatabase database=null;
        public InsertSampleData(SQLiteDatabase database){
            this.database=database;
        }
        @Override
        protected Void doInBackground(Void... arg0) {
            Chapter chapter1 = new Chapter("I","CHAPTER ONE","SOVEREIGNTY OF THE PEOPLE AND SUPREMACY OF THIS CONSTITUTION");
            Chapter chapter2 = new Chapter("II","CHAPTER TWO","THE REPUBLIC"); 
            Chapter chapter3 = new Chapter("III","CHAPTER THREE","CITIZENSHIP"); 
            Chapter chapter4 = new Chapter("IV","CHAPTER FOUR","BILL OF RIGHTS"); 
            Chapter chapter5 = new Chapter("V","CHAPTER FIVE","LAND AND ENVIRONMENT"); 
            Chapter chapter6 = new Chapter("VI","CHAPTER SIX","LEADERSHIP AND INTEGRITY"); 

            KLRDBAdapter klradapter=new KLRDBAdapter(database);
            klradapter.inserChapter(chapter1);
            klradapter.inserChapter(chapter2);
            klradapter.inserChapter(chapter3);
            klradapter.inserChapter(chapter4);
            klradapter.inserChapter(chapter5);
            klradapter.inserChapter(chapter6);

            return null;
        }

    }
} 
```

这是错误：

```
03-26 00:40:11.170: I/SqliteDatabaseCpp(12343): sqlite returned: error code = 1, msg = table chapter has 4 columns but 3 values were supplied, db=/data/data/com.ilab.klr3/databases/klr
03-26 00:40:11.185: E/KLRDBAdapter(12343): Could not create or Open the database
03-26 00:40:11.220: I/SqliteDatabaseCpp(12343): sqlite returned: error code = 1, msg = table chapter has 4 columns but 3 values were supplied, 
```

我正在尝试创建数据库以及插入，但出现上述错误。我不明白这一点，因为我已经这样做了很多次......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:06:37.000

从您的代码中可以清楚地看出问题所在。您正在创建`chapter`具有四列的表，但在插入时仅指定了 3 个值。

你`create table`的是

```
CREATE TABLE IF NOT EXISTS chapters (
    _id INTEGER PRIMARY KEY AUTOINCREMENT,
    chapter_number TEXT,
    chapter_name TEXT,
    chapter_title TEXT); 
```

而您的插入（未显示但似乎来自错误）是

```
INSERT INTO chapters VALUES (
    'I',
    'CHAPTER ONE',
    'SOVEREIGNTY OF THE PEOPLE AND SUPREMACY OF THIS CONSTITUTION'); 
```

因为您的`_id`is `autoincrement`，您不需要指定它 - 但现在因为您没有指定所有列，您需要明确指定要插入的列，因此您的`insert`语句应该是：

```
INSERT INTO chapters 
    (chapter_number, chapter_name, chapter_title)
VALUES (
    'I',
    'CHAPTER ONE',
    'SOVEREIGNTY OF THE PEOPLE AND SUPREMACY OF THIS CONSTITUTION'); 
```

# authentication - Symfony2 自定义身份验证提供程序错误凭据

> ID：15634046
> 
> 赞同：0
> 
> 时间：2013-03-26T09:56:06.603
> 
> 标签：authentication, symfony-2.2, custom-authentication

我正在实现一个自定义身份验证提供程序，以使用外部 api，大致遵循 symfony 网站上的食谱。它几乎可以正常工作，侦听器正确侦听登录表单，然后调用返回经过身份验证的令牌的身份验证函数，问题是即使我为securityContextInterface设置了经过身份验证的令牌，系统也会返回错误的登录页面证书。在我使用的代码下它会是什么？

安全.yml

```
firewalls:
    dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false

    login:
        pattern:  ^/app/login$
        security: false

    api_secured:
        provider:   in_memory
        pattern:    ^/app
        form_login:
            login_path:  /app/login
            check_path:  /app/login_check
        logout:
            path:   /app/logout
            target: /
        api:   true 
```

服务.yml

```
api.security.authentication.provider:
    class:  Manuel\Myapp\MyAppBundle\Security\Authentication\Provider\ApiProvider
    arguments: ['', %kernel.cache_dir%/security/nonces]
api.security.authentication.listener:
    class:  Manuel\Myapp\MyAppBundle\Security\Firewall\ApiListener
    arguments: [@security.context, @security.authentication.manager, %api.url%] 
```

ApiFactory.php

```
namespace Manuel\Myapp\MyAppBundle\DependencyInjection\Security\Factory;

use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\DependencyInjection\Reference;
use Symfony\Component\DependencyInjection\DefinitionDecorator;
use Symfony\Component\Config\Definition\Builder\NodeDefinition;
use Symfony\Bundle\SecurityBundle\DependencyInjection\Security\Factory\SecurityFactoryInterface;

class ApiFactory implements SecurityFactoryInterface
{
    public function create(ContainerBuilder $container, $id, $config, $userProvider, $defaultEntryPoint)
    {
        $providerId = 'security.authentication.provider.api.'.$id;
        $container
            ->setDefinition($providerId, new DefinitionDecorator('api.security.authentication.provider'))
            ->replaceArgument(0, new Reference($userProvider))
        ;

        $listenerId = 'security.authentication.listener.api.'.$id;
        $listener = $container->setDefinition($listenerId, new DefinitionDecorator('api.security.authentication.listener'));

        return array($providerId, $listenerId, $defaultEntryPoint);
    }

    public function getPosition()
    {
        return 'pre_auth';
    }

    public function getKey()
    {
        return 'api';
    }

    public function addConfiguration(NodeDefinition $node)
    {
    }
} 
```

ApiListener.php

```
namespace Manuel\Myapp\MyAppBundle\Security\Firewall;

use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\HttpKernel\Event\GetResponseEvent;
use Symfony\Component\Security\Http\Firewall\ListenerInterface;
use Symfony\Component\Security\Core\Exception\AuthenticationException;
use Symfony\Component\Security\Core\SecurityContextInterface;
use Symfony\Component\Security\Core\Authentication\AuthenticationManagerInterface;
use Manuel\Myapp\MyAppBundle\Security\Authentication\Token\ApiUserToken;
use Httpful\Request;

class ApiListener implements ListenerInterface {
    protected $securityContext;
    protected $authenticationManager;
    protected $container;

    public function __construct(SecurityContextInterface $securityContext, AuthenticationManagerInterface $authenticationManager, $api)
    {
        $this->securityContext = $securityContext;
        $this->authenticationManager = $authenticationManager;
        //Prendo l'url delle api
        //Viene passato da services.yml alla classe
        $this->api = $api;
    }

    public function handle(GetResponseEvent $event)
    {
        $request = $event->getRequest();
        $data = $request->request->all();

        //Esiste username e password ?
        if(!array_key_exists('_username', $data) || !array_key_exists('_password', $data)) {
            //Ritorna alla pagina di login con bad credentials
            $this->securityContext->setToken(null);
            return;
        }

        //Autentico in remoto
        $username = $data['_username'];
        $password = $data['_password'];

        $response = Request::post($this->api."/token/new.json")
                    ->body(array(
                        'username'=> $username, 
                        'password'=> $password))
                    ->expectsJson()
                    ->sendsForm()
                    ->send(); 
        $decode = json_decode($response);

        //Se esiste allora vado avanti se no muoio
        if(!$decode->success) {
            $this->securityContext->setToken(null);
            return;
        }

        $token = new ApiUserToken();
        $token->setUser(''.$decode->user);
        $token->token = $decode->token;

        try {
            $authToken = $this->authenticationManager->authenticate($token);
            $this->securityContext->setToken($authToken);

        } catch (AuthenticationException $failed) {
            // ... si potrebbe loggare qualcosa in questo punto
            // Per negare l'autenticazione, pulire il token. L'utente sarà rinviato alla pagina di login.
            $this->securityContext->setToken(null);
            return;

            // Negare l'autenticazione con una risposta HTTP '403 Forbidden'
            //$response = new Response();
            //$response->setStatusCode(403);
            //$event->setResponse($response);

        }
    }
} 
```

如果我写：

```
$authToken = $this->authenticationManager->authenticate($token);
var_dump($authToken); die();
$this->securityContext->setToken($authToken); 
```

结果是：

```
object(Manuel\Myapp\MyAppBundle\Security\Authentication\Token\ApiUserToken)#4780 (5) {["user":"Symfony\Component\Security\Core\Authentication\Token\AbstractToken":private]=> object(Symfony\Component\Security\Core\User\User)#4782 (7) { ["username":"Symfony\Component\Security\Core\User\User":private]=> string(4) "user" ["password":"Symfony\Component\Security\Core\User\User":private]=> string(15) "10dmao!?postino" ["enabled":"Symfony\Component\Security\Core\User\User":private]=> bool(true) ["accountNonExpired":"Symfony\Component\Security\Core\User\User":private]=> bool(true) ["credentialsNonExpired":"Symfony\Component\Security\Core\User\User":private]=> bool(true) ["accountNonLocked":"Symfony\Component\Security\Core\User\User":private]=> bool(true) ["roles":"Symfony\Component\Security\Core\User\User":private]=> array(1) { [0]=> string(9) "ROLE_USER" } } ["roles":"Symfony\Component\Security\Core\Authentication\Token\AbstractToken":private]=> array(1) { [0]=> object(Symfony\Component\Security\Core\Role\Role)#4779 (1) { ["role":"Symfony\Component\Security\Core\Role\Role":private]=> string(9) "ROLE_USER" } } ["authenticated":"Symfony\Component\Security\Core\Authentication\Token\AbstractToken":private]=> bool(true) ["attributes":"Symfony\Component\Security\Core\Authentication\Token\AbstractToken":private]=> array(0) { } } 
```

所以是正确的。

ApiUserToken.php

```
namespace Manuel\Myapp\MyAppBundle\Security\Authentication\Token;

use Symfony\Component\Security\Core\Authentication\Token\AbstractToken;

class ApiUserToken extends AbstractToken
{
    public $token;

    public function __construct(array $roles = array())
    {
        parent::__construct($roles);

        // If the user has roles, consider it authenticated
        $this->setAuthenticated(true);
    }

    public function getCredentials()
    {
        return '';
    }
} 
```

ApiProvider.php

```
namespace Manuel\Myapp\MyAppBundle\Security\Authentication\Provider;

use Symfony\Component\Security\Core\Authentication\Provider\AuthenticationProviderInterface;
use Symfony\Component\Security\Core\User\UserProviderInterface;
use Symfony\Component\Security\Core\Exception\AuthenticationException;
use Symfony\Component\Security\Core\Exception\NonceExpiredException;
use Symfony\Component\Security\Core\Authentication\Token\TokenInterface;
use Manuel\Myapp\MyAppBundle\Security\Authentication\Token\ApiUserToken;

class ApiProvider implements AuthenticationProviderInterface
{
    private $userProvider;
    private $cacheDir;

    public function __construct(UserProviderInterface $userProvider, $cacheDir)
    {
        $this->userProvider = $userProvider;
        $this->cacheDir     = $cacheDir;
    }

    public function authenticate(TokenInterface $token)
    {

        //Devo aggiungere utente
        $user = $this->userProvider->loadUserByUsername("user");

        if ($user) {
            $authenticatedToken = new ApiUserToken($user->getRoles());
            $authenticatedToken->setUser($user);

            return $authenticatedToken;
        }

        throw new AuthenticationException('The API authentication failed.');
    }

    public function supports(TokenInterface $token) {
        return $token instanceof ApiUserToken;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:39:33.003

我已经解决了修改 security.yml

```
firewalls:
        dev:
            pattern:  ^/(_(profiler|wdt)|css|images|js)/
            security: false

        login:
            pattern:  ^/app/login$
            security: false

        secured_area:
            pattern:    ^/app
            api: true
            logout:
                path:   /app/logout
                target: / 
```

和 ApiListener.php

```
public function handle(GetResponseEvent $event) {

        if( $this->securityContext->getToken() ){
            return;
        } 
```

因为在防火墙 (app/*) 下的每个 url 上，symfony 都会调用我的侦听器的句柄方法，如果用户已经登录，则安全令牌已经设置并且我返回

和 check_login 功能

```
public function securityCheckAction() {
        // The security layer will NOT intercept this request
        return $this->redirect($this->generateUrl('manuel_myapp_index_after_login')); 
```

check_login 是登录表单的动作，check_login 动作在防火墙下，所以，我的listerner 的handle 方法将第一次被调用，如果凭据正确（使用我的外部api）我强迫symfony 使用in_memory 用户对于登录，然后将执行 check_login 操作。然后，当用户在防火墙下访问另一个页面时，handle 方法将被调用，但身份验证令牌已设置，因此 handle 方法将返回并且一切正常

外部 api 登录现在有效！

# php - 以下查询中的错误是什么？

> ID：15634047
> 
> 赞同：5
> 
> 时间：2013-03-26T09:56:06.607
> 
> 标签：php, mysql, drupal

我在 Drupal6 中编写了以下查询。

```
$sql = 
    "SELECT registryvalue 
    FROM {muln_registry} 
    WHERE fk_applicationid = %d 
    AND registrykey = '%s'";

$result = db_result(db_query($sql, 32, 'SHOW_SCORE_TO_STUDENT')); 
```

它应该返回值 1。但它没有显示任何内容。如果我在 mysql 编辑器中复制并运行，它会正确返回。

但现在它给空了。数据库连接等没有错误。因为其他查询运行良好。

这里可能是什么错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:58:26.133

我只能看到错误是因为`{}`

应该

```
 $sql = "SELECT registryvalue FROM muln_registry WHERE fk_applicationid = %d AND registrykey = '%s'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T20:37:28.697

试一试

```
echo '<pre>';
var_dump(db_query($sql, 32, 'SHOW_SCORE_TO_STUDENT'));
echo '</pre>'; 
```

并查看句柄中有哪些数据。这可能会让您更好地了解出了什么问题。我的建议是切换到 PDO，但我知道当系统已经使用不同的数据库机制时，这不会是一个有效的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T13:32:20.360

如果 'SHOW_SCORE_TO_STUDENT' 每次都相同，为什么不使用：

```
$sql = "SELECT registryvalue FROM {muln_registry} WHERE fk_applicationid = '%d' AND registrykey = 'SHOW_SCORE_TO_STUDENT'"; 
```

此外，您在第二个参数周围有 ' ' 而不是第一个参数，不确定这是否可能是问题？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-26T10:07:20.690

您应该尝试使用 LIKE 运算符来搜索模式。例如 `WHERE column_name LIKE '%searchString'`，将搜索以 searchString 开头的记录。

更多关于Like的信息，您可以搜索它。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-26T10:15:14.603

请用：

```
$sql     = "SELECT registryvalue FROM muln_registry WHERE fk_applicationid = %d AND registrykey = '%s'"; 
```

代替

```
$sql     = "SELECT registryvalue FROM {muln_registry} WHERE fk_applicationid = %d AND registrykey = '%s'"; 
```

{} 花括号已被删除。

# ios - 我如何获得当前的活动视图控制器？

> ID：15634059
> 
> 赞同：7
> 
> 时间：2013-03-26T09:56:43.153
> 
> 标签：ios, objective-c

我遇到了这个问题（一些用户的 Flurry 分析报告了错误，但我无法在我的设备和模拟器上重现它）：

`NSInvalidArgumentException: Application tried to present modally an active controller <CityViewController: 0x361b20>.`

你知道这个错误吗？它发生在你身上吗？

应用程序具有三个按层次排序的视图：当用户位于已知位置之一时，会自动显示带有位置列表的主视图控制器和详细视图（错误消息中提到的 CityViewController）。每当位置发生显着变化时，在打开新位置之前首先关闭详细视图以防止这种情况发生。然而，这显然没有帮助。

CityViewController 也可以将 SMS 编写器作为其子项打开。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-04-07T07:28:32.430

要获得当前可见的视图，您可以使用：

```
[self.navigationController visibleViewController]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T10:50:03.853

所以对原始问题的回复：我如何获得当前的活动视图控制器？

答案在于`[self.navigationController presentedViewController]`而不是 topViewController 或其他任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T10:04:10.430

如果您在触发某些事件时启动模态视图，那么您似乎很可能在该视图已经处于活动状态时尝试再次显示该视图......

# asp.net - 网站部署后如何使用asp.net配置工具

> ID：15634061
> 
> 赞同：0
> 
> 时间：2013-03-26T09:56:47.593
> 
> 标签：asp.net

我了解配置工具可以通过VS2010打开。但是如何为部署在服务器上的应用程序打开这个工具呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-24T21:00:15.983

为所有授权文件夹上传所需的 web.config 文件，一切正常。

# android - 如何从 android 库回调到各种活动

> ID：15634062
> 
> 赞同：2
> 
> 时间：2013-03-26T09:56:47.957
> 
> 标签：android, callback, android-activity

我已经为 Android 编写了一个库，在初始化库后，我注册了位置更新、订阅状态更改、库状态更改和各种其他更新的回调……最初，我希望所有这些更新都回调到`controller`我的android UI 应用程序，然后让控制器启动活动 A，将消息从控制器传递到活动 A 等等。或启动活动 B 以注册订阅并将消息转发到此等 但是，似乎没有办法实现这一点 - 因为每个活动都是孤立的？除非我弄错了？

那么我在这里有什么选择呢？听起来我要么必须为整个应用程序使用一个活动并交换 UI，在查看它之后似乎不是要走的路吗？

我确实尝试将 Application 子类化，这很有效，让我可以从活动中访问我的库——但我希望它反过来。这可能吗？将图书馆包装在服务中可以实现我想要做的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:47:19.063

您可以使用广播并从您的图书馆发送它们。您的每个活动都必须在他们的方法中注册 a`BroadcastReceiver`并在他们的`onResume()`方法中取消注册`onPause()`。当您为活动使用公共基类时，这将相对容易。然后，您可以将命令从您的库发送到当前处于活动状态的任何活动。

# sql - 将数据类型 int 转换为 nvarchar 时出错

> ID：15634063
> 
> 赞同：0
> 
> 时间：2013-03-26T09:56:48.947
> 
> 标签：sql, database, stored-procedures, vb6

我收到一个错误 - '将数据类型'int'转换为`nvarchar`

这是VB6代码：

```
Private Sub Form_Load()
On Error GoTo ErrDoor
Dim lvRS_Status As New ADODB.Recordset
    If gFn_OpenCnn = True Then
    If lvRS_Status.State = adStateOpen Then lvRS_Status.Close
      lvRS_Status.Open "Select Sts_StatusID,Sts_StatusDesc from Status_mst", gvCnn_CBSBSDB, adOpenDynamic, adLockOptimistic, adCmdText
      If lvRS_Status.RecordCount <> 0 Then
        Dcbo_Status.ListField = "Sts_StatusDesc"
        Dcbo_Status.BoundColumn = "Sts_StatusID"
        Set Dcbo_Status.RowSource = lvRS_Status
      End If

    End If
On Error GoTo 0
Exit Sub
ErrDoor:
    MsgBox Error$, vbExclamation
End Sub

Private Sub Cmd_OK_Click()
On Error GoTo ErrDoor
Dim lvStr_Month As String
Dim lvStr_Year As String
Dim lvStr_SelectionFormula As String
Dim lvStr_StationName As String
Dim lvDbl_CurrentSessionID As Double
lvStr_SelectionFormula = ""
 lvDbl_CurrentSessionID = Int((2000 * Rnd) + 1000)

    gvCnn_CBSBSDB.BeginTrans
    gvCnn_CBSBSDB.Execute "Exec DBPrc_SundryDebrorAgewiseDetails " & lvDbl_CurrentSessionID & ", '" & Dcbo_Status.BoundText & "', " & Cbo_SelectMonth.ListIndex + 1 & ", " & Txt_SelectYear.Text & ""
    gvCnn_CBSBSDB.CommitTrans

    Crpt_SundryDebtor.Reset
    Crpt_SundryDebtor.WindowState = crptMaximized

    Crpt_SundryDebtor.ReportFileName = App.Path & "\sundrydebtor_agewise.rpt"
    Crpt_SundryDebtor.DiscardSavedData = True
   If Trim(Cbo_SelectMonth.Text) <> "" Then
       lvStr_Month = "{SundryDebtors_AgeWise.lvStr_Month} = " & Cbo_SelectMonth.ItemData(Cbo_SelectMonth.ListIndex)
       lvStr_SelectionFormula = lvStr_Month
   Else
       MsgBox "Select the month ", vbInformation, "Sundry Debtor Age wise"
       Exit Sub
   End If

   If Trim(Txt_SelectYear.Text) <> "" Then

           lvStr_Month = lvStr_SelectionFormula + " And {SundryDebtors_AgeWise.Sde_Year}  =" & Txt_SelectYear.Text
           lvStr_SelectionFormula = lvStr_Month

    End If

    If Trim(Dcbo_Status.Text) <> "" Then
        If lvStr_SelectionFormula <> "" Then
           lvStr_Month = lvStr_SelectionFormula + " And {Status_Mst.Sts_StatusID} =" & val(Dcbo_Status.BoundText) & ""
           lvStr_SelectionFormula = lvStr_Month
        End If
    End If

    Crpt_SundryDebtor.SelectionFormula = "{Reporter.Session_ID} = " & lvDbl_CurrentSessionID & ""
        Crpt_SundryDebtor.Connect = gvCnn_CBSBSDB
        Crpt_SundryDebtor.DiscardSavedData = True
        Crpt_SundryDebtor.WindowShowRefreshBtn = True
        Crpt_SundryDebtor.WindowShowPrintSetupBtn = True
        Crpt_SundryDebtor.Destination = crptToWindow
        Crpt_SundryDebtor.Action = 1

On Error GoTo 0
Exit Sub
Resume
ErrDoor:
    MsgBox Error$, vbExclamation

End Sub 
```

这是存储过程：

```
CREATE PROCEDURE DBPrc_SundryDebrorAgewiseDetails(
  @SessionId as int,
  @StatusId as int,
  @Month as nvarchar,
  @Year as nvarchar)
as 
begin
if @StatusId=''
begin
    SELECT
      @SessionId,
      Sts_StatusDesc, Agt_AgentName,Sde_OutstandingAsOnDate,
      Sde_AmountLessThanSixMonths,
      Sde_AmountBetweenSixMonthstoOneYear,Sde_AmountBetweenOneToTwoYear,
      Sde_AmountBetweenTwoToThreeYears,Sde_AmountMoreThanThreeYears,
      Sde_TotalAdChanrges,Sde_TotalProgressiveInterest,Sde_TotalOutstandingAsOnDate,
      Sde_Remark, Sde_SundryDebtorCode
    FROM SundryDebtors_AgeWise left join Status_Mst
           on sts_StatusId=Sde_StatusId
         left join Agent_Mst
           on Agt_AgentId=Sde_AgentId
    WHERE SundryDebtors_AgeWise.Sde_Month=@Month 
      and SundryDebtors_AgeWise.Sde_Year=@Year 
    GROUP BY Sts_StatusDesc, Agt_AgentName,Sde_OutstandingAsOnDate,Sde_AmountLessThanSixMonths,Sde_AmountBetweenSixMonthstoOneYear,Sde_AmountBetweenOneToTwoYear,Sde_AmountBetweenTwoToThreeYears,Sde_AmountMoreThanThreeYears,Sde_TotalAdChanrges,Sde_TotalProgressiveInterest,Sde_TotalOutstandingAsOnDate,Sde_Remark,Sde_SundryDebtorCode

End

If @StatusId<>''
Begin

    SELECT
      @SessionId,
      Sts_StatusDesc,Agt_AgentName,Sde_OutstandingAsOnDate,
      Sde_AmountLessThanSixMonths,Sde_AmountBetweenSixMonthstoOneYear,
      Sde_AmountBetweenOneToTwoYear,Sde_AmountBetweenTwoToThreeYears,
      Sde_AmountMoreThanThreeYears,Sde_TotalAdChanrges,Sde_TotalProgressiveInterest,
      Sde_TotalOutstandingAsOnDate,Sde_Remark,Sde_SundryDebtorCode
    FROM SundryDebtors_AgeWise left join Status_Mst
           on sts_StatusId=Sde_StatusId
         left join Agent_Mst
         on Agt_AgentId=Sde_AgentId
    WHERE SundryDebtors_AgeWise.Sde_Month=@Month 
      and SundryDebtors_AgeWise.Sde_Year=@Year 
      and Sts_StatusId=@StatusId
    GROUP BY Sts_StatusDesc, Agt_AgentName,Sde_OutstandingAsOnDate,Sde_AmountLessThanSixMonths,Sde_AmountBetweenSixMonthstoOneYear,Sde_AmountBetweenOneToTwoYear,Sde_AmountBetweenTwoToThreeYears,Sde_AmountMoreThanThreeYears,Sde_TotalAdChanrges,Sde_TotalProgressiveInterest,Sde_TotalOutstandingAsOnDate,Sde_Remark,Sde_SundryDebtorCode
End

End
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:12:49.287

您的 SP 参数是一个 int ：
`@StatusId as int,`

...但是您正在针对空字符串 '' 进行测试：
`if @StatusId=''`

# java - 如何根据instanceof作用于对象？

> ID：15634064
> 
> 赞同：0
> 
> 时间：2013-03-26T09:56:55.993
> 
> 标签：java, oop, gwt

我有一个`GWT` `Canvas`正在绘制几个`Shapes`，例如（我不确定我是否要扩展或实现接口）：

```
Rectangle extends/implements Shape;
Ellipse extends/implements Shape; 
```

对于每个`Shape`我想显示自己的上下文菜单，即将上下文菜单小部件设置为弹出窗口，如：

```
if (shape instanceof Rectangle) {
  Widget contextmenu = new RectangleContextMenu();
} else if (shape instanceof Ellipse) {
  Widget contextmenu = new EllipseContextMenu();
}
popup.setWidget(contextmenu);
popup.show(); 
```

我在这里使用 GWT 并不重要，因为这可能是一个通用的设计问题：

如何对我的 Shape 对象进行操作并始终调用应该属于该实例的操作？

例如，其他操作可能是：

*   `draw()`：当然，椭圆的绘制方式与矩形不同

*   `rotate()`: 椭圆可能遵循不同的旋转规则

*   `delete()`：我以后可以想象删除`Ellipse`对象应该遵循与删除不同的规则`Rectangles`（因为它们稍后将代表我的应用程序中的某些对象）。

由于我仍在设计中：您有什么建议让我以后可以有一个列表，我可以在其中执行诸如`shape.draw()`or之类的事情，`delete(shape)`并且将自动调用适当的方法？

我可以通过`Interface Shape`这里实现：

```
interface Shape {
   abstract draw();
   abstract delete(Shape);
   abstract rotate();
} 
```

，这将有一个缺点，即我必须将所有代码从`draw()`逻辑复制到该接口的所有`Shape`类中`implement`，即使它们只是略有不同，或者它们根本没有区别。

有没有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T10:08:50.713

创建一个`interface`定义`Shape`必须做的事情 - 即定义合同。

创建一个`abstract class`定义在所有`Shape`实例中重复的核心功能。

也许创建更多的`abstract class`es 来定义更具体的功能，例如，对于所有四边形。

最后创建扩展相关基类的具体形状：

```
interface Shape {

    void draw();

    void delete();

    void rotate();
}

abstract class BaseShape implements Shape {

    @Override
    public void draw() {
        //do generic stuff
        //call specific method
        specificDrawStuff();
        //do more generic stuff
    }

    abstract void specificDrawStuff();

    @Override
    public void rotate() {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }

    @Override
    public void delete() {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }
}

class Square extends BaseShape {

    @Override
    void specificDrawStuff() {
        //specfic stuff here
    }
} 
```

通过这种方式，您可以抽象出任何常见的内容，但`implement Shape`如果需要，您也可以直接提取。

# c# - 如何防止解码 Windows Live 邮件中的编码正斜杠？

> ID：15634066
> 
> 赞同：0
> 
> 时间：2013-03-26T09:56:58.043
> 
> 标签：c#, asp.net, base64, urlencode, outlook.com

我有一个通过电子邮件发送的带有继续链接的表格。在此链接中，我添加了一些由`Base64`. 该值包含一个斜杠，该斜杠被编码为`%2F`（使用 a `Server.UrlEncode`）。当我将链接发送到 Windows Live 地址时，我看到 Outlook.com 将`%2F`背面解码为正斜杠。我怎样才能防止这种情况？

我正在发送：
`<a href="http://www.tempuri.com/key=RVQ%2FcGhvbmVfaG9tZSE%3D">Continue</a>`

但我看到：
`<a href="http://www.tempuri.com/key=RVQ/cGhvbmVfaG9tZSE=%3D">Continue</a>`

可以通过将链接`http://www.tempuri.com/key=RVQ%2FcGhvbmVfaG9tZSE%3D`从*任何邮件客户端*发送到 Windows Live 地址来复制它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:38:31.377

您可以尝试对该值进行两次编码。

所以`RVQ/cGhvbmVfaG9tZSE=`被编码为`RVQ%2FcGhvbmVfaG9tZSE%3D`--> 这是你的价值。

现在对此进行编码，您会得到`RVQ%252FcGhvbmVfaG9tZSE%253D`--> 电子邮件客户端不会将 %252F 解码为斜线，因此您的问题就消失了。

只是不要忘记将值解码两次;-)

# drupal-7 - 在 Omega 主题中自定义登录块（Drupal 7）

> ID：15634067
> 
> 赞同：0
> 
> 时间：2013-03-26T09:56:58.233
> 
> 标签：drupal-7

我正在尝试在 Drupal 7 中自定义 Omega 主题。
我想自定义用户登录块，以在“用户栏第二”区域呈现此块；我可以移动该区域中的块，但我想水平显示元素。
我已阅读在 template.php 中创建一个名为 MYTHEME_theme 的函数，并在名为 user-login-block.tpl.php 的模板目录中创建一个模板文件。

我已经在互联网上学习了各种教程和示例，但我无法编写 php 代码来满足我的需求。

提前致谢， 毛罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:10:46.653

如果您想水平显示登录表单，则无需编写任何新功能..只需更改模板渲染等一些 css 更改

# c# - 动态绑定到资源的“路径”

> ID：15634068
> 
> 赞同：6
> 
> 时间：2013-03-26T09:57:02.190
> 
> 标签：c#, wpf, data-binding, dynamicresource

首先是我开始的代码：

```
<ribbon:RibbonMenuButton IsEnabled="{Binding ForegroundIsConfigurable}"
          SmallImageSource="{Binding Source={StaticResource imageSource},
                             Path=Source,
                             UpdateSourceTrigger=OnPropertyChanged}"> 
```

虽然此绑定正在编译并运行良好，但我不满意的原因是`imageSource`运行时发生了变化。

> [StaticResource 标记扩展](http://msdn.microsoft.com/en-us/library/ms750950.aspx)：通过查找对已定义资源的引用，为任何 XAML 属性特性提供值。该资源的查找行为类似于加载时查找，它将查找先前从当前 XAML 页面的标记以及其他应用程序源中加载的资源，并将该资源值生成为运行中的属性值- 时间对象。

由于`imageSource`值在运行时发生变化，我不得不更改`StaticResource`为`DynamicResource`. 但该属性`Source`不是依赖属性，因此以下代码将引发运行时错误：

```
SmallImageSource="{Binding Source={DynamicResource imageSource},
                   Path=Source,
                   UpdateSourceTrigger=LostFocus} 
```

出于这个原因，我需要将动态资源直接绑定到`SmallImageSource`，这是一个依赖属性：

```
SmallImageSource="{DynamicResource imageSource}" 
```

这将再次引发运行时错误，因为`imageSource`类型为`Image`. `SmallImageSource`期望值是`ImageSource`.

现在有人可能会建议将数据上下文设置为我的动态资源并适当地绑定属性。如果我这样做，我会杀死`IsEnabled`具有另一个`DataContext`.

据我所知，`MultiBinding`这也不是一个解决方案，因为这提供了一种将属性绑定到多个源的机制，但不提供针对不同上下文和源的绑定不同属性。

在考虑如何继续时，我想到幸运的是我可以将`ImageSource`繁琐的内容移入`IValueConverter`. 在我的给定数据上下文中，我`RibbonMenuButton`有一个具有适当值的字符串值，这实际上也是我的`ImageSource`.

无论如何，我仍然想知道如果我没有其他方法，我将如何解决问题，即如果两个来源都在不同的数据上下文中。有什么我没有看到的吗？如何通过覆盖`DataContext`动态资源的属性的绑定来确保不杀死其他绑定？

* * *

这与[DrawingImage msdn 页面](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingimage.aspx)`imageSource`上的 XAML 示例非常相似。

```
<Image x:Key="imageSource">
  <Image.Source>
    <DrawingImage>
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:14:22.047

您可以尝试将“imageResource”定义为 an`ImageSource`而不是`Image`. 这对我有用。

```
<r:RibbonWindow
    x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:r="clr-namespace:Microsoft.Windows.Controls.Ribbon;assembly=RibbonControlsLibrary"
    xmlns:pc="clr-namespace:System.Windows.Media;assembly=PresentationCore">
    <Grid>
        <Grid.Resources>
            <pc:ImageSource x:Key="imageSource">your_image.png</pc:ImageSource>
        </Grid.Resources>
        <r:Ribbon>
            <r:RibbonMenuButton
                IsEnabled="{Binding ForegroundIsConfigurable}"
                SmallImageSource="{DynamicResource imageSource}">
            </r:RibbonMenuButton>
        </r:Ribbon>
    </Grid>
</r:RibbonWindow> 
```

此外，您可以使用 ElementName 绑定设置 RibbonMenuButton 的 DataContext 而无需覆盖 IsEnabled，如下所示。

```
<r:RibbonWindow x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:r="clr-namespace:Microsoft.Windows.Controls.Ribbon;assembly=RibbonControlsLibrary"
        Title="MainWindow" Height="350" Width="525">

    <Grid x:Name="root">

        <Grid.Resources>
            <Image x:Key="imageSource" Source="{Binding myImageSource}"/>
        </Grid.Resources>

        <r:Ribbon>
            <r:RibbonMenuButton DataContext="{DynamicResource imageSource}"
                IsEnabled="{Binding ElementName=Root, Path=DataContext.ForegroundIsConfigurable}"
                SmallImageSource="{Binding Source}"/>
        </r:Ribbon>
    </Grid>
</r:RibbonWindow> 
```

# jquery - jQuery 数据操作

> ID：15634071
> 
> 赞同：1
> 
> 时间：2013-03-26T09:57:08.583
> 
> 标签：jquery, ajax, json, magicsuggest

我有一个场景
Ajax 正在正确处理数据，然后可用于 jquery 的自动建议插件，该插件可以正确选择并显示页面上的选定数据。我唯一需要让用户一一选择的所有值都放入隐藏字段中，以便我可以提交。

在头脑中：

```
$('#mycustom').magicSuggest({
data: 'http://dev.ejuicysolutions.com/demo/umer/fb2/data.json',
sortOrder: 'name',
minChars: 2,
maxResults: false,
selectionPosition: 'right',
maxDropHeight: 120,
expandOnFocus: false,
noSuggestionText: 'No Team Member found'
});
}); 
```

在身体->形式：

```
<form method="post" action="">
<h3>Custom</h3>
<input id="mycustom" style="width:400px;" type="text"/>
<input type="hidden" name="values" value="">
</form> 
```

可以在以下位置查看示例：http ://dev.ejuicysolutions.com/demo/umer/fb2/，可以在以下位置查看 文档： [http :](http://dev.ejuicysolutions.com/demo/umer/fb2/) [//nicolasbize.github.com/magicsuggest/](http://nicolasbize.github.com/magicsuggest/) 在文档选项卡中有“ ”。 等待你的答复。

`getValue() : array[int / string]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:21:58.273

您可以使用`getSelectedItems()`插件提供的公共功能。

```
var objMagicSuggest = $('#mycustom').magicSuggest({
            data: 'http://dev.ejuicysolutions.com/demo/umer/fb2/data.json',
            sortOrder: 'name',
            minChars: 2,
            maxResults: false,
            selectionPosition: 'right',
            maxDropHeight: 120,
    expandOnFocus: false,
    noSuggestionText: 'No Team Member found'

        });
var selectedElements = objMagicSuggest.getSelectedItems(); 
```

您将获得选定元素的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:48:39.470

所以有两件事：

*   该插件已准备好表单，这意味着如果包含在表单中，选定的值将自动与其他表单项一起提交。您可以使用“名称”属性为其定义名称（查看文档）。然后，您将使用 $_POST['given-name'] 来检索序列化的值，假设您在后端使用 PHP。

因此，在您的情况下，由于您没有指定 valueField，因此 $_POST['given-name'] 将包含一个序列化的 id 数组。

[编辑]：这是一个例子：

```
 $(document).ready(function() {
        $('#mycustom').magicSuggest({
            data: 'http://dev.ejuicysolutions.com/demo/umer/fb2/data.json',
            sortOrder: 'name',
            minChars: 2,
            maxResults: false,
            selectionPosition: 'right',
            maxDropHeight: 120,
            expandOnFocus: false,
            noSuggestionText: 'No Team Member found',
            name: 'teammembers' // this is what you need to add
        });
    }); 
```

执行选择（例如圣何塞和圣安东尼奥），然后添加提交按钮。

然后在您的服务器端：

```
$teammembers = $_POST['teammembers']; // $teammembers = '[20,17]' 
```

*   如果您想在发送表单进行预处理或其他任何操作之前自己检索值，您有 2 种方法：getValue() 将获取所选 id 的数组和 getSelectedItems() 将获取所选 json 对象的数组对应到您的数据。

根据您的需要，您可以检索其中任何一个，然后将它们与您的请求一起发送。

这是一个使用 selectionchange 事件显示所选名称的 jsfiddle：

[http://jsfiddle.net/KFMtQ/1/](http://jsfiddle.net/KFMtQ/1/)

干杯!

# c# - FindControl 在 GridView 中返回 NULL

> ID：15634073
> 
> 赞同：0
> 
> 时间：2013-03-26T09:57:19.167
> 
> 标签：c#, asp.net, gridview, code-behind, findcontrol

我正在尝试从 ASP.NET 中的代码隐藏操作 a `DropDownList`，它位于 a 的字段中。`GridView`我通过使用该`FindControl`方法添加对本地 DDL 的引用来做到这一点。但是，它似乎不起作用，我尝试了多种方法（`Load`，`Init`事件），但我总是得到一个`NullReferenceException`.

这是我的代码：

```
 <asp:TemplateField HeaderText="Zuständige Führungskraft">
           <ItemTemplate>
           <!-- <%# Eval("ZustaendigeFuehrungskraft")%> -->
                <asp:DropDownList AppendDataBoundItems="true" Enabled="false" runat="server" ID="ddwnFK" >

                </asp:DropDownList>
           </ItemTemplate>
           <EditItemTemplate>
                <asp:DropDownList AppendDataBoundItems="true" runat="server" ID="ddwnFK" >

                </asp:DropDownList>
           </EditItemTemplate>
</asp:TemplateField> 
```

```
 protected void grdBenutzer_RowEditing(object sender, GridViewEditEventArgs e)
        {
            SqlConnection conn = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["ConnectionString"].ToString());

            conn.Open();
            SqlCommand cmd = new SqlCommand("SELECT Nachname, Vorname FROM Benutzer WHERE Benutzerart='Führungskraft' AND Archiviert != 1", conn);
            SqlDataReader dr = cmd.ExecuteReader();
            DataTable table = new DataTable();
            table.Load(dr);
            foreach (GridViewRow row in grdBenutzer.Rows)
            {
                DropDownList ddwnFK = (DropDownList)row.FindControl("ddwnFK");
                //if (ddwnFK == null)
                //    continue;

                ddwnFK.Items.Add("keine");

                foreach (DataRow dtRow in table.Rows)
                {
                    ddwnFK.Items.Add(dtRow["Nachname"].ToString() + ", " + dtRow["Vorname"].ToString());

                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:07:44.543

似乎您正试图在网格的每一行中找到您的下拉菜单（即使页眉/页脚行也不包含您的下拉菜单）。

您可以使用`GridViewEditEventArgs.NewEditIndex`属性访问正在编辑的行：

```
var row = grdBenutzer.Rows[e.NewEditIndex];
var ddwnFK = (DropDownList)row.FindControl("ddwnFK"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T11:00:38.023

你可以尝试访问它吗

```
DropDownList ddwnFK = (DropDownList)row.Cells[0].Controls[0]; 
```

或在快速观看中查看行的内容是什么。

# javascript - 为什么我的搜索功能只在我错过第一个字符时匹配？

> ID：15634074
> 
> 赞同：1
> 
> 时间：2013-03-26T09:57:27.017
> 
> 标签：javascript, jquery, search

我使用 jQuery 从头开始​​编写了一个搜索功能，以满足特定需求。`<span>`它从a 中搜索数据，然后如果它与文本框中的字符串不匹配`<div>`，则隐藏它。`<div>`

我遇到的问题是它会识别字符串但不是第一个字符。它也区分大小写，这不是我想要包含的功能。

```
 //Grab ID of current recordContainer
            var currentID = $(this).attr('id');
        // Add hash tag so it can be used as an ID call
            var currentID2 = ("#" + currentID);
        //Grab data from author span in current recordContainer
            var currentAuthor = $(this).children('span.listLeadAuthor').text();
        //If current author matches anything in the search box then keep it visible
            if (currentAuthor.search(searchBox1) > 0)
            {
                    $(currentID2).show();
                    count++;
            }
        //If search box is empty keep it visible
            else if (searchBox1 === "")
            {
                    $(currentID2).show();
            } 
```

[JSFiddle 这里](http://jsfiddle.net/ZwFpR/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T10:02:51.270

问题是您的 if 语句忽略了第一个字符，因为第一个字符位于索引 0 处。

```
if (currentAuthor.search(searchBox1) > 0) 
```

应该：

```
if (currentAuthor.search(searchBox1) >= 0) 
```

* * *

如果您需要区分大小写，则需要应用`toUpperCase()`或`toLowerCase()`。

```
if (currentAuthor.ToUpperCase().search(searchBox1.toUpperCase()) >= 0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T10:02:09.960

> 我遇到的问题是它会识别字符串但不是第一个字符。

你的问题就在这里：

```
if (currentAuthor.search(searchBox1) > 0) 
```

JS 中的 String.search 为您提供第一个匹配项的*位置*。如果那是文本的开头，那么它就是`0`.

*未找到匹配项*的返回值不是`0`，而是`-1`。

# c# - 过滤视图中的行

> ID：15634076
> 
> 赞同：1
> 
> 时间：2013-03-26T09:57:33.827
> 
> 标签：c#, database, ms-access, datagridview

我是数据库和 C# 的新手，但我想学习它。很抱歉，如果我问任何问题，但我尝试过的任何地方都找不到答案（我在 SQL 数据库中找到了很多答案，但在访问数据库中没有找到答案）

我想制作一个与工人联系的简单程序：

*   将有公司名称，然后是联系该公司经销商的所有必要信息。
*   这个想法是允许用户搜索公司，然后通过按钮`gridview`-> 打开我与这家公司的所有联系人，例如给经销商的电话、老板、传真、电子邮件等。）

我已经`gridview`通过以下代码将数据加载到我的：

```
OleDbConnection connect = new OleDbConnection();
connect.ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\User\Documents\Programy\Baza Danych Kontakty\Dane.accdb";
connect.Open();

OleDbCommand command = new OleDbCommand();
command.Connection = connect;
command.CommandText = "SELECT * FROM Firma";

OleDbDataReader reader = command.ExecuteReader();
while (reader.Read())
{
    dataGridView1.Rows.Add();
    dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells[0].Value = reader[2].ToString();
    dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells[1].Value = reader[0].ToString();
}
connect.Close(); 
```

但我在过滤记录方面遇到了很大的问题。这个数据库应该有百分之几的记录，而且联系人更多，所以我想用手过滤它不是一个好主意。而且我想通过输入来过滤数据`textbox`..

例如：我开始输入：B（它向我显示她名字中包含 B 的每个公司名称）然后 O（它显示带有 BO 的公司）+ E（BOE）+ I（BOEI）+N（BOEIN）和+G .. . 它应该实时过滤（没有按钮“搜索”）。

就像我说的那样，我为 SQL 数据用户找到了很多答案，但对于访问数据用户来说，任何答案都没有。而且我必须保持访问权限，因为我必须在这些数据中进行学校项目。

我希望我对自己的需求足够清楚，并希望有人知道如何帮助我。

非常感谢，很抱歉我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:17:27.387

您可以在绑定后过滤网格的数据，而不管它是从哪个数据源绑定的。

尝试这个：

```
DataView dv = ((DataTable)dataGridView1.DataSource).DefaultView;
dv.RowFilter = "FromColumn like '%" + textBox1.Text + "%'";
dataGridView1.DataSource = dv;
dataGridView1.DataBind(); 
```

在文本框的 textChange 事件中执行上述操作将省略使用按钮来过滤结果！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:16:55.160

通过此代码解决。Manish Mishra 提出了一个好主意:)

因此，使用对我有用的 oledb 和访问数据库进行过滤：（注意：我刚刚开始，所以可能有更好的方法来做到这一点，无论如何它都有效）

`

```
DataView dv = new DataView();
        public Form1()
        {
            InitializeComponent();
        }

    private void Form1_Load(object sender, EventArgs e)
    {
        DataTable datatable = new DataTable();
        OleDbConnection connect = new OleDbConnection();
        connect.ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\User\Documents\Programy\Baza Danych Kontakty\Dane.accdb";
        connect.Open();

        OleDbCommand command = new OleDbCommand();
        command.Connection = connect;
        command.CommandText = "SELECT FirmaKod,FirmaNazwa FROM Firma";

        OleDbDataReader reader = command.ExecuteReader();
        datatable.Load(reader);

        dataGridView1.DataSource = dv = datatable.DefaultView;
        connect.Close();

    }

    private void textBox1_TextChanged(object sender, EventArgs e)
        {
            dv.RowFilter = "FirmaNazwa like '%" + textBox1.Text + "%'";
            if (textBox1.Text == "") dv.RowFilter = string.Empty;
        }` 
```

# asp.net - 如何使用 img 标签

> ID：15634081
> 
> 赞同：0
> 
> 时间：2013-03-26T09:57:51.893
> 
> 标签：asp.net

我是一名学生，在一个简单的应用程序中工作，我不知道如何使用 img 标签，我尝试了一个这样的代码，但是在执行代码时，图像没有显示，请查看代码并帮助我看看有什么问题在代码中。

**代码是：**

```
<asp:Content ID="Content3" ContentPlaceHolderID="MainContent" runat="server">
    &nbsp;
    <table border="0" align="center" cellpadding="0" cellspacing="0" style="width: 100%;
        height: 100%;">
        <tr style="width: 100%; height: 300px;">
            <td valign="middle" align="center">
                <img alt="" src="C:\Documents and Settings\temp.intern1\My Documents\My Pictures\images4.jpg" />&nbsp;
            </td>
        </tr>
        <tr style="height: 65%; vertical-align: top;">
            <td style="width: 90%;" align="center">
                <table cellpadding="0" cellspacing="0" width="100%">
                    <tr>
                        <td style="height: 20px">
                        </td>
                    </tr>
                    <tr>
                        <td align="center" valign="middle" width="100%" style="height: 100%">
                            <div id="Panel1" style="background-color: #87BDEF; height: 300px; width: 600px;">
                                <table cellpadding="0" cellspacing="0" style="height: 400px" width="600px">
                                    <tr>
                                        <td>
                                            &nbsp;
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <table cellpadding="0" cellspacing="0" style="height: 200px" width="600px">
                                                <tr>
                                                    <td align="right" style="padding-left: 5px; width: 50%;">
                                                        <asp:Label ID="lblUserName" runat="server" Text="USER NAME &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:"></asp:Label>
                                                    </td>
                                                    <td align="left" style="padding-left: 5px; width: 50%;">
                                                        <br />
                                                        <asp:TextBox ID="txtUserName" runat="server" Width="70%"></asp:TextBox>
                                                        <asp:RequiredFieldValidator ID="rfvUserName" ErrorMessage="Please enter Username"
                                                            ControlToValidate="txtUserName" runat="server" Width="70%" ForeColor="red" Style="margin-left: 0px;" />
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <br />
                                                    </td>
                                                    <td>
                                                        <br />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td align="right" style="width: 50%;">
                                                        <asp:Label ID="lblPassword" runat="server" Text="PASSWORD &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:"></asp:Label>
                                                    </td>
                                                    <td align="left" style="padding-left: 5px; width: 50%;">
                                                        <br />
                                                        <asp:TextBox ID="txtPassword" runat="server" TextMode="Password" Width="70%"></asp:TextBox>
                                                        <asp:RequiredFieldValidator ID="rfvPassword" ErrorMessage="Please enter Password"
                                                            ControlToValidate="txtPassword" runat="server" Width="70%" ForeColor="red" Style="margin-left: 0px" />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2" align="center">
                                                        <span id="lblInValid" style="color: #C00000; font-family: Verdana; font-size: Small;">
                                                        </span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2" align="center">
                                                        <table width="50%">
                                                            <tr>
                                                                <td align="left" style="padding-left: 5px; width: 50%;">
                                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                                    <asp:Button ID="btnSubmit" runat="server" Text="SUBMIT" OnClick="btnSubmit_Click" />
                                                                    <br />
                                                                    <br />
                                                                    <br />
                                                                </td>
                                                                <td align="left" style="padding-left: 5px; width: 50%;">
                                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                                    <asp:Button ID="btnClear" runat="server" Text="CLEAR" />
                                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <br />
                                                    </td>
                                                    <td>
                                                        <br />
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td height="180px">
                            <br />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <br />
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</asp:Content> 
```

请有人帮我处理这段代码...，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T10:01:02.853

您的图像应位于 Web 服务器可访问的文件夹中。尝试将您的图像包含到您的解决方案文件中（假设您使用的是 Visual Studio），并使用相对路径，例如“/images/image4.jpg”

转到某个网站（如 www.cnn.com），查看任何页面的源代码并查看它们如何设置 img 标签的路径。

您还可以使用 ASP.Net 图像标记，查看[MSDN](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.image.aspx)以获取示例和用法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:01:28.847

问题是您使用的是计算机上图像的地址，因此仅当您从该特定计算机查看页面时才有效。

您应该将图像复制到 Web 应用程序中，例如复制到名为 的文件夹`images`中，然后在图像标记中使用该地址：

```
<img alt="" src="images/images4.jpg" /> 
```

# javascript - Youtube iframe API - Android 全屏

> ID：15634086
> 
> 赞同：5
> 
> 时间：2013-03-26T09:58:00.987
> 
> 标签：javascript, android, youtube-javascript-api

我正在使用 YouTube iframe api 嵌入视频。在 iPhone 上播放视频时，视频会自动切换到全屏模式。我想知道是否可以在 Android 上强制执行相同的行为？（目前视频是内联播放的，看起来不太好）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-24T02:01:56.190

无法自动全屏播放视频。最接近的方法是将播放器放在全屏 div 中并使用 url 参数自动播放：

```
<iframe width="100%" height="100%" src="//www.youtube.com/embed/fSy6uh-GjCc?controls=0&amp;autoplay=1&amp;showinfo=0" frameborder="0" allowfullscreen></iframe> 
```

# maven - maven-war-plugin 创建一个认为其压缩的未压缩文件

> ID：15634088
> 
> 赞同：0
> 
> 时间：2013-03-26T09:58:07.507
> 
> 标签：maven, plugins, war

我有一个二进制文件，在这种情况下是一个公钥，扩展名为 .spec。

当我部署我的战争或只是提取战争文件时，密钥文件已损坏。似乎有什么东西试图解压缩它。原始未压缩文件大小为 162 字节，我从战争中提取后为 280 字节。

如果我将文件重命名为 .png 这不会发生！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T14:15:17.430

@nwinkler 当您询问时，我不知道什么是资源过滤。原来我确实用过！

[此商品与此](https://stackoverflow.com/questions/16483279/maven-war-plugin-increases-size-of-my-resource/16484296)商品重复

# jquery - 从 json 向谷歌地图添加多个标记

> ID：15634089
> 
> 赞同：0
> 
> 时间：2013-03-26T09:58:07.643
> 
> 标签：jquery, ajax, json, maps

我正在尝试构建一个 Web 应用程序，该应用程序从服务器中提取数据并从 JSON 响应中向谷歌地图添加多个标记。这是 JSON 响应的样子：

```
{"key":[{"Latitude":"60.186518","Longitude":"24.950575"}...]} 
```

我试图实现[这篇文章](https://stackoverflow.com/questions/7366861/plotting-latlng-coordinates-from-json-array-on-google-map-the-markers-all-st)中的代码，但我无法让它工作。

到目前为止，这是我的代码：

```
 function success(position) {
  var mapcanvas = document.createElement('div');
  mapcanvas.id = 'mapcontainer';
  mapcanvas.style.height = '600px';

  document.querySelector('article').appendChild(mapcanvas);
  var coords = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
  var options = {
    zoom: 15,
    center: coords,
      panControl: false,
  zoomControl: false,
  mapTypeControl: false,
  scaleControl: false,
  streetViewControl: false,
  overviewMapControl: true,

    navigationControlOptions: {
      style: google.maps.NavigationControlStyle.SMALL
    },
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  var map = new google.maps.Map(document.getElementById("mapcontainer"), options);
  var marker = new google.maps.Marker({
      position: coords,
      map: map,
      title:"You are here!"});

 function getLocations() {

    $.getJSON("http://myurl.com/jsonresponse", function (json) {

        var location;

        $.each(json.key, function (i, item) {
            addMarker(item.Latitude,item.Longitude);
        });

    });
}

function addMarker(lat,lng) {
        marker = new google.maps.Marker({
            position: new google.maps.LatLng(lat,lng),
            map: map,
        });
        markersArray.push(marker);
}

}
if (navigator.geolocation) {
  navigator.geolocation.getCurrentPosition(success);
} else {
  error('Geo Location is not supported');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:32:27.303

请试试这个：

> ```
>  function getLocations() {
>             $.ajax({
>               url: 'http://myurl.com/jsonresponse',
>               async:false,
>               success: function(data) {
>                  $.each(data.key, function(index) {
>                     addMarker(data[index].Latitude,data[index].Longitude);
>                   });
>               }
>             }); 
>         } 
> ```

其他明智的做法是在 addMarker 函数中使用 console.log(lat,lng) 并在此处复制输出。

# python - 连接到 postgres 中的 URI

> ID：15634092
> 
> 赞同：53
> 
> 时间：2013-03-26T09:58:20.957
> 
> 标签：python, psycopg2

我猜这是一个非常基本的问题，但我不知道为什么：

```
import psycopg2
psycopg2.connect("postgresql://postgres:postgres@localhost/postgres") 
```

给出以下错误：

```
psycopg2.OperationalError: missing "=" after
"postgresql://postgres:postgres@localhost/postgres" in connection info string 
```

任何想法？根据[有关连接字符串的文档，](http://www.postgresql.org/docs/current/static/libpq-connect.html#LIBPQ-CONNSTRING)我认为它应该可以工作，但是它只是这样：

```
psycopg2.connect("host=localhost user=postgres password=postgres dbname=postgres") 
```

我在 Ubuntu12.04 上的 Python2.7.3 上使用最新的 psycopg2 版本

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-03-26T12:05:05.603

我会使用`urlparse`模块来解析 url，然后在连接方法中使用结果。这样就可以克服 psycop2 问题。

```
from urlparse import urlparse # for python 3+ use: from urllib.parse import urlparse
result = urlparse("postgresql://postgres:postgres@localhost/postgres")
username = result.username
password = result.password
database = result.path[1:]
hostname = result.hostname
port = result.port
connection = psycopg2.connect(
    database = database,
    user = username,
    password = password,
    host = hostname,
    port = port
) 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-09-15T15:06:02.427

传递给的连接字符串`psycopg2.connect`不被解析`psycopg2`：它被逐字传递给`libpq`。[PostgreSQL 9.2 添加了对连接 URI 的支持](http://www.postgresql.org/docs/9.2/static/libpq-connect.html#LIBPQ-CONNSTRING)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-02-16T09:13:03.023

为了对此进行更新，Psycopg3 实际上包含了一种解析数据库连接 URI 的方法。

例子：

```
import psycopg # must be psycopg 3

pg_uri = "postgres://jeff:hunter2@example.com/db"
conn_dict =  psycopg.conninfo.conninfo_to_dict(pg_uri)

with psycopg.connect(**conn_dict) as conn:
  ... 
```

# javascript - 字符串格式

> ID：15634096
> 
> 赞同：-2
> 
> 时间：2013-03-26T09:58:34.610
> 
> 标签：javascript, jquery

我有一个字符串格式，可以像

```
"( C1 AND C2 OR C3 AND C4) OR (C5 AND C6 ) OR C7" 
```

现在将有这样的通用字符串，我需要删除任何空格 b/w '(' ')' 和 'C' 这是上面示例的条件，我希望将其更改为

```
"(C1 AND C2 OR C3 AND C4) OR (C5 AND C6) OR C7" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:09:16.323

```
var str = "( C1 AND C2 OR C3 AND C4) OR (C5 AND C6 ) OR C7";

str.replace(/(\()\s+|\s+(\))/g, '$1$2') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T10:28:15.160

从[这个](https://stackoverflow.com/questions/2116558/fastest-method-to-replace-all-instances-of-a-character-in-a-string)SO 答案。

[从这里](http://dumpsite.com/forum/index.php?topic=4.msg8#msg8)使用替换功能

```
String.prototype.replaceAll = function(str1, str2, ignore)
{
   return this.replace(new RegExp(str1.replace(/([\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|\<\>\-\&])/g, function(c){return "\\" + c;}), "g"+(ignore?"i":"")), str2);
};
var str = "( C1 AND C2 OR C3 AND C4) OR (C5 AND C6 ) OR C7";
str.replaceAll("( ", "(").replaceAll(" )", ")"); 
```

不过，杰克的回答要好得多，也更简洁。

# sql - 根据值计算天数的 SQL 查询

> ID：15634098
> 
> 赞同：0
> 
> 时间：2013-03-26T09:58:37.627
> 
> 标签：sql, sql-server

我有具有`id`,`timestamp`和控制值的表。

我需要查询具有控制值 0 连续 4 天或更长时间的 id

```
TimeS   ID  Kontrol
2012-06-18  5457554F-E9A5-4312-8BA3-424B2333D0B7    1
2012-06-14  3FC4AC80-7D94-496A-92D0-22350CA3CEA9    1
2012-06-14  FE3C1872-0F13-48CC-A6C9-BBE0EAB07B9D    0
2012-06-13  FE3C1872-0F13-48CC-A6C9-BBE0EAB07B9D    0
2012-06-12  FE3C1872-0F13-48CC-A6C9-BBE0EAB07B9D    0
2012-06-11  FE3C1872-0F13-48CC-A6C9-BBE0EAB07B9D    0 
```

例如，它应该返回`FE3C1872-0F13-48CC-A6C9-BBE0EAB07B9`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:31:30.390

试试这个查询

```
select 
  id, 
  count(distinct TimeS) 
from 
  table1
where 
  kontrol=0
group by 
  id 
having 
  count(distinct TimeS) >= 4; 
```

**[小提琴](http://sqlfiddle.com/#!6/3ea93/1)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:22:20.667

尝试这个：

```
SELECT t1.id
  FROM tableName t1
 WHERE t1.kontrol = 0
   AND EXISTS (SELECT 1
                 FROM tableName t2
                WHERE t2.id = t1.id
                  AND t2.kontrol = 0
                  AND t2.timeS = t1.timeS + 1
                  AND EXISTS (SELECT 1
                                 FROM tableName t3
                                WHERE t3.id = t2.id
                                  AND t3.kontrol = 0
                                  AND t3.timeS = t2.timeS + 1
                                  AND EXISTS (SELECT 1
                                                FROM tableName t4
                                               WHERE t4.id = t3.id
                                                 AND t4.kontrol = 0
                                                 AND t4.timeS = t3.timeS + 1))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T10:23:07.230

```
SELECT DISTINCT t1.id
FROM table t1
     INNER JOIN 
     table t2 ON t2.TimeS+1 days=t1.TimeS
     INNER JOIN 
     table t3 ON t3.TimeS+2 days=t1.TimeS
     INNER JOIN 
     table t4 ON t4.TimeS+3 days=t1.TimeS
WHERE t1.Control = 0 AND
      t2.Control = 0 AND
      t3.Control = 0 AND
      t4.Control = 0 
```

# c# - 如何在 AjaxFileUpload onuploadComplete 事件中获取选定的下拉值？

> ID：15634100
> 
> 赞同：0
> 
> 时间：2013-03-26T09:58:39.037
> 
> 标签：c#, asp.net, asp.net-ajax, ajaxcontroltoolkit

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="test.aspx.cs"  Inherits="test"%>

      <%@ Register assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" tagprefix="asp" %>

       <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

      <html xmlns="http://www.w3.org/1999/xhtml">
       <head runat="server">
       <title></title>
      </head>
      <body style="height: 162px">
<form id="form1" runat="server">
<div>

    <asp:RadioButton ID="MCA" runat="server" Text="MCA" AutoPostBack="True" 
        oncheckedchanged="MCA_CheckedChanged" />
    <br />

</div>
<asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True">
    <asp:ListItem Value="Sem1"></asp:ListItem>
    <asp:ListItem Value="Sem2"></asp:ListItem>
</asp:DropDownList>
<br />
<asp:DropDownList ID="DropDownList2" runat="server" AutoPostBack="True" 
    onselectedindexchanged="DropDownList2_SelectedIndexChanged" 
    ViewStateMode="Enabled">
    <asp:ListItem Value="MCA101"></asp:ListItem>
    <asp:ListItem Value="MCA103">MCA103</asp:ListItem>
</asp:DropDownList>
<br />
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<br />

<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
     <br />
        <asp:AjaxFileUpload ID="AjaxFileUpload1" runat="server" 
            OnUploadComplete="upload"/>
    <br />
    </ContentTemplate>
</asp:UpdatePanel>
</form>
</body>
</html> 
```

事件代码..

```
 protected void upload(Object sender, AjaxControlToolkit.AjaxFileUploadEventArgs e)
      {
        string s = DropDownList1.SelectedValue;
        string t = DropDownList2.SelectedValue;
        string path= string path = Server.MapPath("~/MCA/" + s + "/" +t+ "/")+e.FileName 
      } 
```

// s 和 t 都获得 Dropdownlist 的第一个值，即使选择了其他一些值并且上传不是按照directort 结构完成的。

两个 Dropdownlist 都有几个值，并且两个列表的**回**发属性都为 true。

如何获得 list 的确切选择值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:52:03.573

问题是`Request.Form["__VIEWSTATE"] = null`何时调用 AjaxFileUpload OnUploadComplete 事件。

**修复此问题**（C# 代码）：

在页面加载时在会话中设置下拉选择。

```
protected void Page_Load(object sender, EventArgs e)
{
 if (Request.Form["__VIEWSTATE"] != null)
    Session["Path"] = "//" + DropDownList1.SelectedValue + "//" + DropDownList2.SelectedValue + "//";
} 
```

使用会话值创建文件路径：

```
protected void upload(Object sender, AjaxControlToolkit.AjaxFileUploadEventArgs e)
{
        string path = string.Empty;
        if (Session["Path"] != null)
            path = Server.MapPath("~//MCA" + (string)Session["Path"]) + e.FileName;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:16:10.717

我相信您需要将下拉列表添加到与上传控件相同的更新面板中。

# struct - apache thrift 无法生成递归结构

> ID：15634101
> 
> 赞同：6
> 
> 时间：2013-03-26T09:58:44.853
> 
> 标签：struct, tree, thrift

我想在 apache thrift 中表示一个标准的树结构，但我遇到了以下问题：

```
[ERROR:/path_to_project/thrift/service.thrift:31] (last token was 'TCategoryTree')
Type "TCategoryTree" has not been defined. 
```

这些是我的节俭结构：

```
struct TCategory {
    1: required string name
}

struct TCategoryTree {
    1: required TCategory element,
    2: optional list<TCategoryTree> children
} 
```

第 31 行是`2: optional list<TCategoryTree> children`，我在其中定义了一个与我现在定义的类型相同的字段。

可能是 apache thrift 不支持递归结构还是我在这里犯了某种错误？

编辑：我使用的是 0.9.0 版

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T22:15:05.910

是的，不幸的是 Thrift 还不允许递归结构。有解决此限制的方法，例如在传输数据结构时将其展平。在大多数情况下，这是可行的，尽管它需要在双方都添加一些额外的代码。

这是一个很好的例子： http: [//grokbase.com/t/thrift/user/0984cqwxen/recursive-datatypes](http://grokbase.com/t/thrift/user/0984cqwxen/recursive-datatypes)

* * *

**更新**

当前的 Thrift 开发主干暂时支持这一点。请小心，因为它允许无限的引用循环（A 引用 B 引用 A ...）在尝试序列化时导致堆栈溢出。

# perl - 带有 utf8 字符的 Perl 正则表达式

> ID：15634108
> 
> 赞同：1
> 
> 时间：2013-03-26T09:58:59.600
> 
> 标签：perl

我有这两个文件：`t.pl`和`t`：

```
$ file t.pl t
t.pl: UTF-8 Unicode text
t:    UTF-8 Unicode text
$ cat t
日本 
```

t.pl 有三个版本：

**情况1**

```
use strict;
use warnings;
use utf8;

$_='日本';
if(/日/){
    print "match!\n";
 } 
```

和`perl t.pl`输出`match!`

**案例2**

```
use strict;
use warnings;
use utf8;

while(<DATA>){
    chomp;
    if(/日/){
        print "match!\n";
    }
}
__DATA__
日本 
```

还`match!`

那么**案例3**

```
use strict;
use warnings;
use utf8;

while(<>){
    chomp;
    if(/日/){
        print "match!\n";
    }
} 
```

`perl t.pl t`不显示`match!`

那么案例3有什么问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T10:04:35.827

您必须为输入设置编码，而`use utf8`不是为您这样做。只需插入

```
use open IN => ":utf8"; 
```

在循环之前。有关详细信息，请参阅[打开](https://metacpan.org/module/open)。

# javascript - 使用 Durandal 时查看模型继承

> ID：15634111
> 
> 赞同：2
> 
> 时间：2013-03-26T09:59:04.973
> 
> 标签：javascript, single-page-application, durandal

我正在使用 Durandal 构建一个应用程序，并且我需要跨视图模型共享一些功能。

我有 5 个屏幕要构建，它们实际上都是相同的屏幕，除了在激活函数中它们将调用不同的 api 端点，否则视图和视图模型将是相同的。

我应该遵循一种模式来正确地构建它以促进代码重用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T12:37:05.077

如果视图和视图模型除了调用不同的 api 操作之外是相同的，那么仅将参数作为路由的一部分呢？然后在激活功能中，您可以打开参数。可以指定路由值，以便您的 url 是相关的，例如 [ [http://site/page/subtype]](http://site/page/subtype])，其中 subtype 是参数（而不是使用数值）

关于继承，根据您需要的功能，有很多方法可以进行 JavaScript 继承，这可能有点令人困惑。base2和Prototype等库提供了一些功能齐全的继承模型。 [John Resig 也有一个](http://ejohn.org/blog/simple-javascript-inheritance/)我已经成功使用的继承模型。

一般来说，当涉及到 JS 继承时，我更喜欢坚持更简单的解决方案。如果您需要几乎完整的继承功能集，那么可以考虑使用这些库。如果您只关心从基类访问一组属性和函数，您可能只需将视图模型定义为函数，并将函数的原型替换为所需的基类即可。有关继承的详细信息，请参阅[Mozilla 的开发人员文档](https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript?redirectlocale=en-US&redirectslug=Introduction_to_Object-Oriented_JavaScript#Inheritance)。

这是一个示例：

```
 //viewModelBase
define(function (require) {
    "use strict";

    function _ctor() {

        var baseProperty = "Hello from base";
        function baseFunction() {
            console.log("Hello from base function");
        }
        //exports
        this.baseProperty = baseProperty;
        this.baseFunction = baseFunction;
    };

    //return an instance of the view model (singleton)
    return new _ctor();
});

//view model that inherits from viewModelBase
define(function (require) {
    "use strict";

    function _ctor() {

        var property1 = "my property value";
        function activate() {
            //add start up logic here, and return true, false, or a promise()
            return true;
        }
        //exports
        this.activate = activate;
        this.property1 = property1;
    };

    //set the "base"
    var _base = require("viewModelBase");
    _ctor.prototype = _base;
    _ctor.prototype.constructor = _ctor;

    //return an instance of the view model (singleton)
    return new _ctor();
}); 
```

请记住这个例子所有的结果都是一个有效的单例（即你只会得到相同的实例，无论你需要多少次（）它）

如果您想要一个瞬态（非单例），只需返回 _ctor。然后，您需要在 require() 之后实例化一个新实例。

还有一点需要注意的是，一般来说，函数应该在原型上定义，而不是在构造函数本身内。有关原因的更多信息，请参阅[此链接](https://stackoverflow.com/a/15659151/91189)。因为这个例子只产生了一个实例，所以这是一个有争议的问题，所以函数在构造函数中以提高可读性以及访问私有变量和函数的能力。

# c++ - 无法使用 Boost.Filesystem 链接程序

> ID：15634114
> 
> 赞同：23
> 
> 时间：2013-03-26T09:59:11.303
> 
> 标签：c++, boost, cmake

我正在尝试使用 Ubuntu 12.10 上的 boost::filesystem 示例代码运行程序，但它不想构建。

```
#include <iostream>
#include <boost/filesystem.hpp>
using namespace boost::filesystem;
using namespace std;

void fun(const string& dirPath);
int main()
{
    fun("/home");
    return 0;
}

void fun(const string& dirPath)
{
    path p (dirPath); 

    if (exists(p))  
    {
        if (is_regular_file(p))   
            cout << p << " size is " << file_size(p) << '\n';

        else if (is_directory(p))    
            cout << p << "is a directory\n";

        else
            cout << p << "exists, but is neither a regular file nor a directory\n";
    }
    else
        cout << p << "does not exist\n";
} 
```

和 CMake 代码：

```
project(tttest)
cmake_minimum_required(VERSION 2.8)
aux_source_directory(. SRC_LIST)
add_executable(${PROJECT_NAME} ${SRC_LIST})
FIND_PACKAGE(Boost 1.53 COMPONENTS filesystem system REQUIRED)
include_directories(${Boost_INCLUDE_DIR})
link_directories(${Boost_LIBRARY_DIR})
TARGET_LINK_LIBRARIES(${PROJECT_NAME} ${Boost_LIBRARIES}) 
```

不幸的是它会产生错误

```
CMakeFiles/tttest.dir/main.cpp.o: In function `boost::filesystem::exists(boost::filesystem::path const&)':
main.cpp:(.text._ZN5boost10filesystem6existsERKNS0_4pathE[_ZN5boost10filesystem6existsERKNS0_4pathE]+0x19): undefined reference to `boost::filesystem::detail::status(boost::filesystem::path const&, boost::system::error_code*)'
CMakeFiles/tttest.dir/main.cpp.o: In function `boost::filesystem::is_directory(boost::filesystem::path const&)':
main.cpp:(.text._ZN5boost10filesystem12is_directoryERKNS0_4pathE[_ZN5boost10filesystem12is_directoryERKNS0_4pathE]+0x19): undefined reference to `boost::filesystem::detail::status(boost::filesystem::path const&, boost::system::error_code*)'
CMakeFiles/tttest.dir/main.cpp.o: In function `boost::filesystem::is_regular_file(boost::filesystem::path const&)':
main.cpp:(.text._ZN5boost10filesystem15is_regular_fileERKNS0_4pathE[_ZN5boost10filesystem15is_regular_fileERKNS0_4pathE]+0x19): undefined reference to `boost::filesystem::detail::status(boost::filesystem::path const&, boost::system::error_code*)'
CMakeFiles/tttest.dir/main.cpp.o: In function `boost::filesystem::file_size(boost::filesystem::path const&)':
main.cpp:(.text._ZN5boost10filesystem9file_sizeERKNS0_4pathE[_ZN5boost10filesystem9file_sizeERKNS0_4pathE]+0x19): undefined reference to `boost::filesystem::detail::file_size(boost::filesystem::path const&, boost::system::error_code*)'
collect2: error: ld returned 1 exit status 
```

这个问题的原因是什么以及如何解决？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-08-01T08:01:48.220

Boost 文件系统是 Boost 库之一，由于 C++0x 或 C++11 导致函数签名更改存在一些 ABI 问题。cf Boost 票：[https ://svn.boost.org/trac/boost/ticket/6779](https://svn.boost.org/trac/boost/ticket/6779)

你有三个解决方案：

1.  使用#include（参见[http://www.ridgesolutions.ie/index.php/2013/05/30/boost-link-error-undefined-reference -to-boostfilesystemdetailcopy_file/](http://www.ridgesolutions.ie/index.php/2013/05/30/boost-link-error-undefined-reference-to-boostfilesystemdetailcopy_file/)）：

    ```
    #define BOOST_NO_CXX11_SCOPED_ENUMS
    #include <boost/filesystem.hpp>
    #undef BOOST_NO_CXX11_SCOPED_ENUMS 
    ```

    但是这个解决方案不是一个完整的解决方案，我读到它并不适合所有人。

2.  使用 C++11 选项构建 BOOST（与您用于应用程序的选项相同）：[http ://hnrkptrsn.github.io/2013/02/26/c11-and-boost-setup-guide](http://hnrkptrsn.github.io/2013/02/26/c11-and-boost-setup-guide)

    我也读过它并不适合所有人。

3.  设置专用于您的应用程序的交叉编译器，您可以在专用环境中重建您需要的所有库。这确保了连贯性、稳定性以及更多的可维护性，当然是值得推荐的解决方案。我还没有读过它是否已经过测试——可能是的，而且可能有效。无论如何，交叉编译现在在计算机科学中得到了很好的掌握。你会发现很多很好的教程和支持。在 Linux Gentoo 中，他们有很棒的 sys-devel/crossdev 包，这使它变得非常容易。

在我自己的情况下，解决方案 1 已经解决了这个问题。一旦遇到另一个，我将切换到解决方案3。所以，我还没有测试它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-08-19T09:29:22.150

链接时需要添加 libboost_filesystem 库。或者 libboost_filesystem-mt 如果您的应用程序是多线程的。像这样：

```
g++ -o file -lboost_filesystem-mt source_file.cpp 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-15T23:23:50.153

对我有用的解决方案是用“-c”编译，然后像这样创建可执行文件：

```
g++ -c -o main.o main.cpp
g++ -o my_prog main.o -lboost_system -lboost_filesystem 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T10:08:17.883

对于某些 boost 模块，您必须编译库**并**链接它们（使用 bootstrap.sh）。在你的情况下，你必须编译和链接`Filesystem`，而且可能`System`也是

看看[这里](http://www.boost.org/doc/libs/1_53_0/more/getting_started/unix-variants.html)

**例如：**

*   ./bootstrap.sh (bjam)
*   rm -rf bin.v2 阶段（在 2 个 bjam 命令之间）
*   ./bjam 发布工具集=gcc 地址模型=64 cxxflags=-fPIC
*   ./bjam 调试工具集=gcc 地址模型=64 cxxflags=-fPIC

如果您在 Windows 上进行链接，则不必手动链接您的库，因为它们是使用 pragma 自动链接的。在 Linux 上，您必须这样做。

根据文档，这些模块需要您获取或构建一个库：

*   Boost.文件系统
*   Boost.GraphParallel
*   Boost.IOStreams
*   Boost.MPI
*   Boost.ProgramOptions
*   Boost.Python
*   升压正则表达式
*   Boost.序列化
*   升压信号
*   升压系统
*   Boost.Thread
*   升压波

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-14T17:19:19.610

您需要添加以下库：

```
g++ -o file -lboost_system -lboost_filesystem sourcefile.cpp 
```

如果您使用 Makefile：

```
CC=gcc
CXX=g++
PROG = program
CXXFLAGS := -std=c++1y -g -Wall
LDFLAGS = -L/usr/local/lib -L/usr/lib/x86_64-linux-gnu
LIBS= -lboost_system -lboost_filesystem

SRCS= main.cpp

OBJS=$(subst .cpp,.o,$(SRCS))

all: $(OBJS)
     $(CXX) $(CXXFLAGS) -o $(PROG) $(OBJS) $(LIBS) $(LDFLAGS) 
```

# java - 使用 if 条件检查和 replaceAll 进行代码优化

> ID：15634118
> 
> 赞同：2
> 
> 时间：2013-03-26T09:59:18.653
> 
> 标签：java, string, if-statement, replace

我有一个字符串，我必须在其中检查一些 if 条件并执行一些替换操作，如下所示，

```
for(int i =0; i<10;i++){
    if(name[i].contains("sometext")){
       name[i] = name[i].replaceAll("someregexpattern","replacementtexthere");
    }
} 
```

而不是每次使用'if'条件检查'sometext'的存在，我可以简单地说如下，

```
for(int i =0; i<10;i++){
       name[i] = name[i].replaceAll("someregexpattern","replacementtexthere");
} 
```

无论如何，如果字符串 'name' 不包含 'regexpattern' 的意思，它不会替换任何东西。那么，就性能而言，if 条件是否具有任何意义。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:01:26.737

仅当`sometext`与 相同时才有效`someregexpattern`。否则，`if`条件确实很重要。

假设您`someregexpattern`确实存在于字符串中，但您的`if`条件评估为`false`，在这种情况下，您不应该进行替换。但是如果你删除`if`语句，那么替换就会发生，这并不完全相同。

**例如：-**帮助您更好地理解。

```
String testCondition = "dontReplace";
        String myString = "Hi, I'm SO";
        String regex = "SO";
        String replacement = "Not SO";

        if(myString.contains(testCondition)){
            myString = myString.replaceAll(regex, replacement); // stays "Hi, I'm SO"
        }

        myString = myString.replaceAll(regex, replacement); // Becomes "Hi, I'm Not SO" 
```

如您所见，要求是`String`不应该发生替换，因为条件是`dontReplace`，但由于`if`被删除，替换发生了，即使它不应该发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:28:45.410

“在性能方面的任何意义”还取决于整个事情在您的软件中执行的频率。

分析器运行（通过[visualvm](http://visualvm.java.net/)左右）将显示您的大部分执行时间是否花费在`String#replaceAll()`. 如果不是，您将无法通过优化获得显着改进。这听起来很明显，但它经常被遗忘。

如果优化不会带来显着的收益，那么选择更易读的代码变体几乎总是会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T10:07:51.923

“如果”本身不会影响性能。尽管现在函数调用非常便宜，但 String.contains() 会多做 4-5 次函数调用。

但是，前一种变体可读性更好，并且不易出错。

# android - EditText 多行不起作用

> ID：15634120
> 
> 赞同：0
> 
> 时间：2013-03-26T09:59:31.217
> 
> 标签：android, android-edittext

我有这个 XML：

```
<EditText
    android:id="@+id/textchat"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:ems="10"
    android:inputType="textMultiLine" /> 
```

但是，当我开始在上面写字时，它会在几个字符后停止。我想完全取消字符限制。有人知道怎么做吗？谢谢。

编辑：完整的 XML

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".ChatActivity" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:src="@drawable/logotipo_high_density_vinceri_movil" />

<ImageView
    android:id="@+id/imageView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/imageView1"
    android:src="@drawable/home_high_density_vinceri_movil" />

<ImageView
    android:id="@+id/imageView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/imageView2"
    android:src="@drawable/alertas_high_density_vinceri_movil" />

<ListView
    android:id="@+id/android:list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/textchat"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/imageView1"
    android:background="@drawable/fondo_chat_cuerpo_high_density_vinceri_movil"
    android:divider="@null"
    android:stackFromBottom="true"
    android:transcriptMode="normal" 
    >

</ListView>

<EditText
    android:id="@+id/textchat"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:ems="10"
    android:inputType="textMultiLine"
    android:maxLength="1000"/>

<Button
    android:id="@+id/chatbutton"
    android:layout_width="wrap_content"
    android:layout_height="40dp"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:layout_toRightOf="@+id/textchat"
    android:background="@drawable/chat_btn_enviar_high_density_vinceri_movil" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-05-19T19:30:12.383

以下是为我做的：

```
android:layout_height="wrap_content"
android:inputType="textMultiLine"
android:singleLine="false" 
```

此外，当您在代码中设置它时，请确保 InputType.TYPE_TEXT_FLAG_MULTI_LINE 位也已设置：

```
editText1.setInputType(InputType.TYPE_TEXT_FLAG_MULTI_LINE | InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_FLAG_CAP_SENTENCES); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-04T19:42:34.863

您是否在编辑文本字段中输入实际句子？我发现单词有 64 个字符的限制。因此，如果您只是在没有空格的情况下输入随机字符，看起来好像您已经达到了 EditText 的字符数限制，但实际上您只是达到了一个单词的字符数限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T10:09:48.757

尝试这个：

```
 <EditText
    android:id="@+id/textchat"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:maxLength="100"
    android:ems="10" > 
```

在这里设置你想要的 maxLength 限制`android:maxLength`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T10:25:14.727

尝试

```
<EditText
    android:id="@+id/textchat"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:ems="10"
    android:inputType="textMultiLine"
android:maxLength="1000" /> <!-- Practically not possible for a user to enter 1000 words --> 
```

但是您提供的代码应该可以工作，您的代码对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-15T09:55:08.157

正如`david m lee`它所建议的那样：

```
android:inputType="textMultiLine" 
```

# node.js - 模式如果失败 1 尝试 2 如果失败尝试 3 用于 nodejs

> ID：15634121
> 
> 赞同：0
> 
> 时间：2013-03-26T09:59:31.683
> 
> 标签：node.js

您好，我正在为特定工作寻找模式；

假设我在带有 DOM 的页面中找到标题

如果找到标题，则将其放入 var title 如果 var title 仍然为空，则尝试下一个函数 如果 var title 仍然为空，则尝试下一个函数

那么有没有更好的方法

```
// Find Title
output.title = $('title').text();

if (null(output.title)) {
    output.title = second try
};

if (null(output.title)) {
    output.title = 3rd try
};

etc ? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:20:40.347

我的版本使它更具可扩展性和逻辑性。使用数组和 while 循环（使用 async 模块）：

```
var functions = [function1, function2, function3]
var i = 0
var output.title // to deal with scope issue of output.title only being defined inside whilst. Could have put output.title as argument for callback
async.whilst(
     function () { return i < functions.length && !output.title },
     function (callback) {
          output.title = functions[i]
          i++
          callback()
}, function () {
     if (output.title) {
         //have title
     }
     else {
         // no title was found
     }
}) 
```

# php - 似乎无法从我的请求中得到适当的回应

> ID：15634125
> 
> 赞同：0
> 
> 时间：2013-03-26T09:59:47.277
> 
> 标签：php, javascript, json, dojo, request

这是我用来调用我的 PHP 文件的 ajax/dojo，请求从数据库表中获取数据：

```
 var _getWeatherInfo = function(){
     dojo.xhrget({

         url: "PHP/weather.php?ntown=" + _ntown,

         handleAs: "json",
         timeout: 5000,

         response: function(response, weather_info) {
            _refreshWeatherList 
         },          
         error: function(error_msg, weather_info) {
             _handleError(error_msg);
         }
     });
 } 
```

下面的下一段代码是我用来查看返回的 json 数组对象（现在在 javascript 文件中为“weather_info”）并将对象中的数据添加到我的名为“_weather”的 javascript 数组中的代码。

```
 var _refreshWeatherList = function(weather_info) {
        for (var i = 0; i < weather_info.length; i++) {
        _weather.push(weather_info[i]);
    }
 } 
```

我的问题是：

我认为我实际上并没有从我的 PHP 请求中得到正确的响应，因为当我运行我的应用程序并单击我用来提醒“_weather”数组的按钮时，没有显示任何内容。如何更改我的代码，以便它正确地从我的请求中获得响应。

谢谢你的帮助。

编辑：PHP：

```
<?php   

$ntown = $_GET['ntown'];

$weather = array();

$query="SELECT * FROM `weather` WHERE `town` = '$ntown'";
$result=mysql_query($query) or die ("Query to get data from table failed: ".mysql_error());

while($row = mysql_fetch_row($result)) {

    $weather = $row;
}

echo json_encode($weather);

mysql_close(); 
```

?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:47:05.343

除非这只是一个错字，否则我认为您的问题出在这一点：

```
 response: function(response, weather_info) {
        _refreshWeatherList 
     }, 
```

尝试将其更改为：

```
 load: function(response) {
        _refreshWeatherList(response); 
     }, 
     // or just load: _refreshWeatherList 
```

要调试此类问题，请学习使用浏览器的开发工具。在 Firefox 中，使用工具 -> Web 开发人员 -> Web 控制台，或在 Chrome 中单击 F12 并选择网络选项卡。（其他浏览器通常有类似的工具。）这些工具会告诉你正在发出的任何请求，单击请求将允许你查看响应、标头等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:46:04.497

php代码的问题：

```
$weather = $row; 
```

应该

```
$weather[] = $row; 
```

# ruby-on-rails - Bundler 命令 bundle install --deployment 不捆绑所有 gem

> ID：15634127
> 
> 赞同：1
> 
> 时间：2013-03-26T09:59:48.467
> 
> 标签：ruby-on-rails, ruby, bundler

我正在部署一个 Rails 应用程序，这就是我目前所做的：

构建应用程序步骤：

1.  通过 git 哈希标签进行 git 同步
2.  将 gem 捆绑到应用程序自身目录（供应商/捆绑包）中。
3.  预编译资产。
4.  将应用程序构建到一个 debian 包 (.deb) 中。
5.  在目标机器上，我只是 dpkg -i myapplication.deb 来安装它。那是。

现在问题是第 2 步。

在我执行**bundle package --all**和**bundle install --deployment**之后，并不是所有的 gem 都捆绑到 vendor/bundle/ruby/1.9.1/gems/ 中，它们是来自 git 路径的 gem，而不是来自默认的 ruby​​gems.org。

```
➜ luna-server git:(v0.1.0) ✗ bundle show rails
/Users/qichunren/code/work/luna-server/vendor/bundle/ruby/1.9.1/gems/rails-3.2.11
➜ luna-server git:(v0.1.0) ✗ bundle show luna-channel
/Users/qichunren/code/work/luna-server/vendor/cache/luna-channel-31bb309440e5

```

所以当我在目标机器上运行我构建的rails应用程序时，它显示一些未安装的gem（例如：luna-channel），请捆绑安装，因为它不在/vendor/bundle/ruby/1.9.1/gems/

有没有办法将包缓存中的所有 gem 放入目标包目录？

请帮我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T01:10:38.660

我解决了我的问题，代码在这里：[https ://github.com/qichunren/bundler/commit/192c822724f356f2573cabd4fd4ddc1a217b7d8b](https://github.com/qichunren/bundler/commit/192c822724f356f2573cabd4fd4ddc1a217b7d8b)

如果此更改适用于整个项目，我不知道，但此更改解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:45:15.250

[链接到文档](http://gembundler.com/v1.2/bundle_install.html)有一个`--path`选项`bundle install`

这告诉 bundler 安装所有 gem 的确切路径。

不过，您的开发风格是非典型的，因此我强烈建议您彻底阅读捆绑器文档并非常确定要做什么`bundle package`和`bundle install --deployment`做什么。

[http://gembundler.com/v1.3/deploying.html](http://gembundler.com/v1.3/deploying.html)
[http://gembundler.com/v1.3/bundle_package.html](http://gembundler.com/v1.3/bundle_package.html)

有时很难看出他们在谈论开发机器还是生产机器。

# c# - 如何从 web 方法中捕获 json 中的返回值？

> ID：15634128
> 
> 赞同：0
> 
> 时间：2013-03-26T09:59:51.483
> 
> 标签：c#, asp.net, json, jquery

使用 JSON 的网络和 Web 方法

我的 webmethod 返回值给出为

```
 return ResultValue;
      // which gives 1 as Return Value on SUcessfull insertion 
```

如果返回值为 1，我希望它在我的 JQuery 中显示为成功

为此，我应该如何捕获我的 webmethod 中的返回值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:05:48.167

```
$.ajax({
  url: 'mypage.html',
  success: function(data){
    if(data ==1)
       alert('success');
    else
       alert('failure');
  },
  error: function(){
    alert('failure');
  }
}); 
```

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

或者您在 webmethod 中为您的 Response 对象设置状态代码。像这样的东西：

```
Response.Clear();
Response.StatusCode = 500; // or whatever code is appropriate
Response.End; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:03:33.773

在你的 ajax 代码上试试这个：

```
$.ajax({
    type: "POST",
    success: function(data) {  

      //data=ResultValue

      if(data == 1)
       { // Success Stuff }else {//do stuff}

    },
    error: function(XMLHttpRequest, textStatus, errorThrown) {
        alert("error: " + XMLHttpRequest.responseText);
    },
    dataType: 'json'
}); 
```

此致

# java - 循环的 GWT 不循环

> ID：15634138
> 
> 赞同：0
> 
> 时间：2013-03-26T10:00:25.657
> 
> 标签：java, json, gwt, for-loop

我正在开发一个 GWT 应用程序，我有这个方法：

```
 private static List<Ticket> getTicketsFromJSON(String ticketsJSONString) {
    JSONValue ticketsArrayValue = JSONParser.parseLenient(ticketsJSONString);
    JSONArray ticketsArray = ticketsArrayValue.isArray();
    List<Ticket> ticketsList = new LinkedList<Ticket>();

    for (int i = 0; i < ticketsArray.size(); i++) {

        JSONObject ticketJSON = ticketsArray.get(i).isObject();
        Ticket ticket = new Ticket((int)ticketJSON.get("id").isNumber().doubleValue(), 
                ticketJSON.get("name").isString().stringValue(),
                ticketJSON.get("description").isString().stringValue(),
                (int)ticketJSON.get("complexity").isNumber().doubleValue(),
                (int)ticketJSON.get("priority").isNumber().doubleValue(),
                (long)ticketJSON.get("started").isNumber().doubleValue(),
                (long)ticketJSON.get("finished").isNumber().doubleValue(),
                (long)ticketJSON.get("timespent").isNumber().doubleValue());
        ticketsList.add(ticket);
    }
    Window.alert("Out of the cicle");
    return ticketsList;
} 
```

似乎我进入了循环，但是在创建 Ticket 对象之后什么都没有发生。可能是对象甚至没有初始化。这是票务类：

```
 package org.kanbanizer.client.beans;

public class Ticket {
    private int id;
    private String name;
    private String description;
    private int complexity;
    private int priority;
    private long started;
    private long finished;
    private long timespent;

    public Ticket() {
    }

    public Ticket(int id, String name, String description, int complexity,
            int priority, long started, long finished, long timespent) {
        this.id = id;
        this.name = name;
        this.description = description;
        this.complexity = complexity;
        this.priority = priority;
        this.started = started;
        this.finished = finished;
        this.timespent = timespent;
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public int getComplexity() {
        return complexity;
    }

    public void setComplexity(int complexity) {
        this.complexity = complexity;
    }

    public int getPriority() {
        return priority;
    }

    public void setPriority(int priority) {
        this.priority = priority;
    }

    public long getStarted() {
        return started;
    }

    public void setStarted(long started) {
        this.started = started;
    }

    public long getFinished() {
        return finished;
    }

    public void setFinished(long finished) {
        this.finished = finished;
    }

    public long getTimespent() {
        return timespent;
    }

    public void setTimespent(long timespent) {
        this.timespent = timespent;
    }

} 
```

我尝试使用和 Integer.parseInt 来获取值，但结果是一样的。作为方法参数的字符串不为空。如果有人知道为什么它不起作用，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:15:29.510

我猜你的代码在你的 JSON 获取值上崩溃了，例如`(int)ticketJSON.get("complexity").isNumber()`

如果这些值为 null 或缺失，会发生什么情况？您的代码将因空指针异常而崩溃 - NPE。

放入一些行来检查 NPE。

不过，一般来说，您可能会考虑使用 JavaSsript 覆盖类型来处理这类事情。您可以为票证创建一个叠加层，而不是复制每个值：http: [//googlewebtoolkit.blogspot.ca/2008/08/getting-to-really-know-gwt-part-2.html](http://googlewebtoolkit.blogspot.ca/2008/08/getting-to-really-know-gwt-part-2.html)

# json - ColdFusion 9 中的 JSON 数据错误

> ID：15634144
> 
> 赞同：0
> 
> 时间：2013-03-26T10:01:00.110
> 
> 标签：json, coldfusion, coldfusion-9

我在 ColdFusion 9 中的 JSON 数据在这一行出现错误

```
Internationally renowned for its coverage of major events. 
```

现在，如果我删除“*它*的”这个词，那么它就可以正常工作。

我将 JSON 数据粘贴到 sublime 文本编辑器中，文本看起来不同。见附图

![在此处输入图像描述](../Images/37ebc90f6080e1bdb28f9f9e8c0a3fd4.png)

*“它*的”这个词已经变成了“ *item* ”。

谁能告诉我这里发生了什么以及如何处理它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:50:49.680

尝试一些字符串函数...我不是 CF 程序员，但是有很多字符串函数...二进制解码/编码可能值得一试...有 Asc 函数，它会给你一个序数值ascii 字符...诀窍是找到字符，然后您可以使用 Replace 方法轻松替换它... [http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=functions-pt0_18 .html](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=functions-pt0_18.html)

# android - 在运行对话框中更改文本

> ID：15634147
> 
> 赞同：0
> 
> 时间：2013-03-26T10:01:07.890
> 
> 标签：android, android-widget

我正在为包含进度条和文本视图的对话框使用自定义布局。如果对话框中的文本已经在运行，我想更改它。这是我执行此操作的代码。

```
private static Dialog progressDialog = null;
public static void showLoadingProgress(String msg){
        Log.d("Util", "show loading progress"+progressDialog);//No i18n
        if(progressDialog!=null && progressDialog.isShowing()){
            TextView message = (TextView)progressDialog.findViewById(R.id.progressmsg);
            message.setText(msg);           
        }else{          
            progressDialog = new Dialog(MainActivity.getActivity().getApplicationContext());
            progressDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
            progressDialog.setCancelable(false);
            progressDialog.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
            progressDialog.setContentView(R.layout.customprogress);

            TextView message = (TextView)progressDialog.findViewById(R.id.progressmsg);
            message.setText(msg);

            progressDialog.show();
            Log.d("",progressDialog.isShowing()+""); //No i18n
        }
    }

    public static void hideLoadingProgress(){
        Log.d("Util", "close loading progress"+progressDialog);//No i18n

        if(progressDialog!=null){
        Log.d("ProgressDialog is not null, so making it null",""); //No i18n  
        progressDialog.dismiss();
        progressDialog = null;
        }
    } 
```

我正在从 try 块和从 asyncTask doInBackground() 的 catch 块中调用此方法。第一次从 try 块调用显示对话框，但如果发生任何错误，再次从 catch 块调用发生并抛出此异常

```
03-26 13:42:53.002: E/AndroidRuntime(16151): java.lang.RuntimeException: An error occured while executing doInBackground()
03-26 13:42:53.002: E/AndroidRuntime(16151):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
03-26 13:42:53.002: E/AndroidRuntime(16151):    at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
03-26 13:42:53.002: E/AndroidRuntime(16151):    at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
03-26 13:42:53.002: E/AndroidRuntime(16151):    at java.util.concurrent.FutureTask.run(FutureTask.java:239)
03-26 13:42:53.002: E/AndroidRuntime(16151):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
03-26 13:42:53.002: E/AndroidRuntime(16151):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-26 13:42:53.002: E/AndroidRuntime(16151):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-26 13:42:53.002: E/AndroidRuntime(16151):    at java.lang.Thread.run(Thread.java:856)
03-26 13:42:53.002: E/AndroidRuntime(16151): Caused by: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
03-26 13:42:53.002: E/AndroidRuntime(16151):    at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4746)
03-26 13:42:53.002: E/AndroidRuntime(16151):    at android.view.ViewRootImpl.requestLayout(ViewRootImpl.java:823)
03-26 13:42:53.002: E/AndroidRuntime(16151):    at android.view.View.requestLayout(View.java:15468)
03-26 13:42:53.002: E/AndroidRuntime(16151):    at android.view.View.requestLayout(View.java:15468)
03-26 13:42:53.002: E/AndroidRuntime(16151):    at android.view.View.requestLayout(View.java:15468)
03-26 13:42:53.002: E/AndroidRuntime(16151):    at android.view.View.requestLayout(View.java:15468)
03-26 13:42:53.002: E/AndroidRuntime(16151):    at android.widget.RelativeLayout.requestLayout(RelativeLayout.java:318)
03-26 13:42:53.002: E/AndroidRuntime(16151):    at android.view.View.requestLayout(View.java:15468)
03-26 13:42:53.002: E/AndroidRuntime(16151):    at android.view.View.requestLayout(View.java:15468)
03-26 13:42:53.002: E/AndroidRuntime(16151):    at android.widget.TextView.checkForRelayout(TextView.java:6313)
03-26 13:42:53.002: E/AndroidRuntime(16151):    at android.widget.TextView.setText(TextView.java:3567)
03-26 13:42:53.002: E/AndroidRuntime(16151):    at android.widget.TextView.setText(TextView.java:3425)
03-26 13:42:53.002: E/AndroidRuntime(16151):    at android.widget.TextView.setText(TextView.java:3400 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:06:50.363

您应该在`MainThread`（`UIThread`：***创建视图层次结构的唯一线程可以触摸其视图。***）上调用这些方法，如果您在分开的`thread`情况下调用它们，您应该使用方法调用它们`runOnUiThread()`：：

```
YourActivity.this.runOnUiThread(new Runnable() {

            @Override
            public void run() {
                // TODO Auto-generated method stub
                showLoadingProgress("Loading data...");
            }
        }); 
```

**编辑**：这里是一个[教程](http://www.android-ios-tutorials.com/182/show-progressbar-while-downloading-image-using-asynctask-in-android/)，显示了`ProgressDialog`从服务器下载文件的时间，我认为这正是你想要的，看看它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:32:50.767

我认为您必须通过覆盖 AsyncTask 的 onProgressUpdate() 来“更改”您的文本和进度对话框：

```
 @Override
    protected void onProgressUpdate(Progress... values) {
        // Do your change here with your own data
    } 
```

doInBackground() 应该在后台线程上执行计算。

# ruby - 如何在 Ruby 中将多个模块同时包含到元类和普通类中

> ID：15634155
> 
> 赞同：0
> 
> 时间：2013-03-26T10:01:27.893
> 
> 标签：ruby, module

我有几个模块，比如`Capybara::DSL`, `RSpec::Matchers`, `Router`, `Common`。

我希望能够在我的代码中几乎任何地方使用这些模块中的方法。目前我试图做：

```
module Helper
  # from http://stackoverflow.com/a/4663029/841064
  module ClassMethods
    include Capybara::DSL
    include RSpec::Matchers
    include Router
    include Common
  end

  include Capybara::DSL
  include RSpec::Matchers
  include Router
  include Common

  extend ClassMethods

  def self.included(other)
    other.extend(ClassMethods)
  end
end 
```

然后我想用它作为：

```
module A
  include Helper

  class << self
    # all methods from 4 modules are available in all methods here
  end

  # all methods from 4 modules are available in all methods here
end

class B
  include Helper

  class << self
    # all methods from 4 modules are available in all methods here
  end

  # all methods from 4 modules are available in all methods here. But they aren't available here
end 
```

您是否知道一种方法可以在将所有这些方法包含到模块或类中时作为实例和类方法访问它们？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-26T10:16:59.157

在要包含模块的类中`include`使用两者如何？`extend`

```
module Helper
  include Capybara::DSL
  include RSpec::Matchers
  include Router
  include Common
end

module A
  # Gives methods on instance
  include Helper

  # Gives methods on class
  extend Helper

  #...
end 
```

# .net - 如何指定某些类的实例不应用作字典键？

> ID：15634157
> 
> 赞同：-1
> 
> 时间：2013-03-26T10:01:36.877
> 
> 标签：.net, equals, gethashcode

我对您在实现一个用于在 C# 中编写集成/系统测试的小型库时出现的问题的意见很感兴趣。该库由两部分组成：测试创作 API 和测试运行时 API。测试编写者使用创作 API 来构建测试计划原型。运行时可以获取原型并创建原型的运行时表示并执行它。

为了能够测试名为 RuntimeTestPlanBuilder 的类，我必须在整个运行时对象模型类上重写 Equals 方法。这导致了我也应该重写 GetHashCode 方法的情况。为一些运行时对象模型类实现 GetHashCode 很容易。由于运行时模型上的某些类是为它们实现 GetHashCode 的容器，这很难甚至是不可能的（例如，由于运行时可以将项目添加到容器中，因此无法在 O(1) 中计算哈希码）。

结果，我发现自己想知道如何防止容器的用户将它们作为键放在字典中。我选择的解决方案是重写 GetHashCode 方法并抛出异常。我对这个解决方案不满意，因为它只会在运行时失败。另外，我有点想知道为什么 .Net Framework 设计者选择将 GetHashCode 方法放在 Object 类上。我认为这个决定导致了我的情况，因为我不能很好地将我的容器标记为不合法的字典键。

一个更好的决定（对于 .Net Framework 设计人员）可能是定义一个名为 IHashable 的接口，其中包含 2 个方法：Equals 和 GetHashCode，并通过对通用字典 Item 类型的约束来强制执行该接口。这样我们可以在编译时强制键实现 Equals 和 GetHashCode。此外，很容易理解，不实现此接口的类不应该用作字典键。

我的问题是：您能否提出一个更好的解决方案（一个不会从 GetHashCode 引发异常的解决方案）来指定某些类的实例不应用作字典键？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:02:06.110

一个 Object 应该实现五个方法，GetHashCode 就是其中之一。
无法确定 GetHashCode 当前或未来的唯一用途是用于 Dictionary 键。

唯一的规则是两个相等的对象必须具有相同的 GetHashCode。
但是相同的 GetHashCode 并不意味着两个对象相等。

您可以只对 GetHashCode 或容器中的项目数使用常量 (1)。
或者从 Skeet 看到这个答案

[是否有可能组合哈希码为私有成员生成新哈希](https://stackoverflow.com/questions/1079192/is-it-possible-to-combine-hash-codes-for-private-members-to-generate-a-new-hash)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T00:07:33.557

一般来说，两个对象只有在它们相等且总是相等的情况下才应该将它们自己报告为相等；因此，可变对象（包括可变集合）通常只应被视为彼此相等。不可变集合可以`GetHashCode`通过缓存`GetHashCode()`其成员的值来有效地实现；构造是 O(N)，无论哈希码是在对象构造上计算还是在第一次请求时计算，计算它的总生命周期成本最多为 O(N)。

任何类都没有理由难以实现哈希码。如果一个类使用引用相等，默认`GetHashCode`是完美的。如果它使用可变的相等定义，则`GetHashCode()`可以通过简单地返回一个常量来遵守合同。尝试将多个实例放入字典中可能会产生较差的性能，但可能有人可能会使用包含十几个项目的字典，并且对于这样大小的字典，性能会很好。

# java - 从 android 中的给定地址发出 fetch lat 和 long

> ID：15634158
> 
> 赞同：0
> 
> 时间：2013-03-26T10:01:41.007
> 
> 标签：java, android, google-maps, geocode, httpconnection

我遇到了从谷歌 url 获取纬度和经度的问题，如下所示，我正在使用 asynctask，没有网络问题。我有地址数组，它有 4 个地址，我正在使用如下：

```
for(int i = 0; i < address.length; ++i) {
Log.e("i value: ",i+"");
try {
HttpPost httppost = new HttpPost("http://maps.google.com/maps/api/geocode/json?address=" + address[i] + "&sensor=false");
HttpClient client = new DefaultHttpClient();
.......   //codes to get lat and long
.......
} catch(......) {
 }
} 
```

如您所见，我使用 Log 打印 i 值。它以 0、1、2、3 的形式出现，但它仅第一次调用此 url，即 i 值为 0 并获取该地址的纬度和经度，但没有对于接下来的 3 个值。有什么帮助吗？谢谢

# c# - 整句反词

> ID：15634162
> 
> 赞同：5
> 
> 时间：2013-03-26T10:01:46.547
> 
> 标签：c#

我想以反向格式打印字符串：

输入： `My name is Archit Patel`

输出：`Patel Archit is name My`。

我绑定了以下内容，但它显示为`letaP tihcrA si eman ym`.

```
public static string ReverseString(string s)
{
    char[] arr = s.ToCharArray();
    Array.Reverse(arr);
    return new string(arr);
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-26T10:03:56.940

您需要将字符串拆分为单词并将其反转而不是反转字符：

```
text = String.Join(" ", text.Split(' ').Reverse()) 
```

在框架 3.5 中：

```
text = String.Join(" ", text.Split(' ').Reverse().ToArray()) 
```

在框架 2.0 中：

```
string[] words = text.Split(' ');
Array.Reverse(words);
text = String.Join(" ", words); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-26T10:04:57.620

*“[请把这个程序的代码发给我](https://stackoverflow.com/revisions/15634162/1)。”*

好的 ...

```
using System;
using System.Linq;

class Program
{
    static void Main(string[] args)
    {
        string text = "My name is Archit Patel";

        Console.WriteLine(string.Join(" ", text.Split(' ').Reverse()));
    }
} 
```

现在：你学到了什么？

此外，正如[Guffa 指出的那样](https://stackoverflow.com/a/15634201/215042)，对于 .Net 4.0 以下的版本，您需要添加，因为 string.Join在这些版本`.ToArray()`中没有[正确的重载。](http://msdn.microsoft.com/en-us/library/dd992421.aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-05-30T10:49:07.717

**在没有内置函数的情况下试试这个**

```
public string ReverseFullSentence(string inputString)
        {
            string output = string.Empty;
            string[] splitStrings = inputString.Split(' ');
            for (int i = splitStrings.Length-1; i > -1 ; i--)
            {
                output = output + splitStrings[i]+ " ";
            }
                return output;
        } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-09T20:49:13.880

这应该做你的工作！输出：“Patel Archit 是我的名字”。

```
 static void Main(string[] args)  
    {  
        string sentence = "My name is Archit Patel";  
        StringBuilder sb = new StringBuilder();  
        string[] split = sentence.Split(' ');  
        for (int i = split.Length - 1; i > -1; i--)  
        {  
            sb.Append(split[i]);  
            sb.Append(" ");  
        }  
        Console.WriteLine(sb);  
        Console.ReadLine();  
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T10:07:29.677

你可以试试：

```
string[] words = "My name is Archit Patel".Split(new char[] { ' ' }, StringSplitOptions.RemoveEmptyEntries);
IEnumerable<string> reverseWords = words.Reverse();
string reverseSentence = String.Join(" ", reverseWords); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-06-21T12:37:31.103

您可以使用 Stack 来解决此类查询：

```
String input = "My name is Archit Patel";

        Stack<String> st = new Stack<String>(); 

        for(String word : input.split(" "))
            st.push(word); 

        Iterator it = st.iterator(); 

        while(it.hasNext()){
            System.out.print(st.pop()+" ");
        } 
```

```
Output String: "Patel Archit is name My" 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-01T17:43:31.273

我很欣赏 Rob Anderson 的回答，但它会反转完整的句子，只需编辑它

```
string s = "My name is Archit Patel";

        string[] words = s.Split(' ');
        StringBuilder sb = new StringBuilder();

        for (int i = words.Length - 1; i >= 0; i--)
        {
            sb.Append(words[i]);
            sb.Append(" ");
        }

        Console.WriteLine(sb); 
```

O/P 将是“Patel Archit is name My”

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-11-02T10:29:44.877

# 这是一个简单的方法

```
 public static string MethodExercise14Logic(string str)
        {
            string[] sentenceWords = str.Split(' ');
            Array.Reverse(sentenceWords);
            string newSentence = string.Join(" ", sentenceWords);
            return newSentence;
        }
```

1.  您首先创建一个名为 sentence word 的数组，然后使用 split 方法将您的所有单词填充到数组中。请注意，空格用作分隔符，告诉 split 方法何时准确拆分。
2.  然后使用 Array 类中的 Reverse 方法来反转整个数组。
3.  然后，您使用字符串类的 Join 方法将您现在反转的数组连接到一个名为 newSentence 的字符串中。
4.  最后，该方法返回 newSentence 字符串。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-05-10T07:59:26.483

**this.lblStringReverse.Text = 反向（this.txtString.Text）；**

```
private int NoOfWhiteSpaces(string s)
        {
            char[] sArray = s.ToArray<char>();
            int count = 0;
            for (int i = 0; i < (sArray.Length - 1); i++)
            {
                if (sArray[i] == ' ') count++;
            }
            return count;
        }
        private string Reverse(string s)
        {
            char[] sArray = s.ToArray<char>();
            int startIndex = 0, lastIndex = 0;
            string[] stringArray = new string[NoOfWhiteSpaces(s) + 1];
            int stringIndex = 0, whiteSpaceCount = 0;

            for (int x = 0; x < sArray.Length; x++)
            {
                if (sArray[x] == ' ' || whiteSpaceCount == NoOfWhiteSpaces(s))
                {
                    if (whiteSpaceCount == NoOfWhiteSpaces(s))
                    {
                        lastIndex = sArray.Length ;
                    }
                    else
                    {
                        lastIndex = x + 1;
                    }
                    whiteSpaceCount++;

                    char[] sWordArray = new char[lastIndex - startIndex];
                    int j = 0;
                    for (int i = startIndex; i < lastIndex; i++)
                    {
                        sWordArray[j] = sArray[i];
                        j++;
                    }

                    stringArray[stringIndex] = new string(sWordArray);
                    stringIndex++;
                    startIndex = x+1;
                }

            }
            string result = "";
            for (int y = stringArray.Length - 1; y > -1; y--)

                {
                    if (result == "")
                    {

                        result = stringArray[y];
                    }
                    else
                    {
                        result = result + ' ' + stringArray[y];
                    }
            }
            return result;
        } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-26T10:05:05.173

使用 split 方法将其放入数组中

```
 string[] words = s.Split(' '); 
```

然后用 array.reverse 反转数组

```
words = Array.Reverse(words); 
```

现在您可以使用 for-each 循环打印它并添加空格

希望这可以帮助

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-07-14T18:07:01.850

```
 public static string reversewordsInsentence(string sentence)
    {
        string output = string.Empty;
        string word = string.Empty;
        foreach(char c in sentence)
        {
            if (c == ' ')
            {
                output = word + ' ' + output;
                word = string.Empty;
            }
            else
            {
                word = word + c;
            }
        }
        output = word + ' ' + output;
        return output;
    } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-01-14T21:03:46.877

如果您想要非 linq 解决方案：

```
static string ReverseIntact(char[] input)
{
    //char[] input = "dog world car life".ToCharArray();
    for (int i = 0; i < input.Length / 2; i++)
    {//reverse the expression
        char tmp = input[i];
        input[i] = input[input.Length - i - 1];
        input[input.Length - i - 1] = tmp;
    }
    for (int j = 0, start = 0, end = 0; j <= input.Length; j++)
    {
        if (j == input.Length || input[j] == ' ')
        {
            end = j - 1;
            for (; start < end; )
            {
                char tmp = input[start];
                input[start] = input[end];
                input[end] = tmp;
                start++;
                end--;
            }
            start = j + 1;
        }
    }
    return new string(input);
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-01-26T00:43:36.247

```
public string GetReversedWords(string sentence)
        {
            try
            {
                var wordCollection = sentence.Trim().Split(' ');
                StringBuilder builder = new StringBuilder();
                foreach (var word in wordCollection)
                {
                    var wordAsCharArray = word.ToCharArray();
                    Array.Reverse(wordAsCharArray);
                    builder.Append($"{new string(wordAsCharArray)} ");
                }

                return builder.ToString().Trim();
            }
            catch(Exception ex)
            {
                throw new Exception(ex.Message);
            }
        } 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-07-28T07:59:42.867

```
// This Method will reverse word-of-full-sentence without using built-in methods.
public void revSent()
        {
            string s = "My name is Archit Patel";
            List<string> Words = new List<string>(s.Split(' '));
            List<string> Rev = new List<string>();
            for(int i=Words.Count-1;i>=0;i--)
            {
                Rev.Add(Words.ElementAt(i));
            }
            Console.WriteLine(string.Join(" ", Rev));
        } 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-10-06T20:15:39.160

如果您需要就地进行，这是我对面试问题的解决方案。我使用了另外一个字符进行交换。我假设空格仅用作分隔符。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication1
{
class Program
{
    static void Main(string[] args)
    {
        StringBuilder sb = new StringBuilder("abcd efg hijk");
        Reverse(sb, 0 , sb.Length - 1);
        Console.WriteLine(sb);
        ReverseWords(sb);
        Console.WriteLine(sb);
        ReverseWordOrder(sb);
        Console.WriteLine(sb);
    }
    static void Reverse(StringBuilder sb, int startIndex, int endIndex)
    {

        for(int i = startIndex; i <= (endIndex - startIndex) / 2 + startIndex; i++)
        {
            Swap(sb,i, endIndex + startIndex - i);
        }
    }

    private static void Swap(StringBuilder sb, int index1, int index2)
    {
        char temp = sb[index1];
        sb[index1] = sb[index2];
        sb[index2] = temp;
    }

    static void ReverseWords(StringBuilder sb)
    {
        int startIndex = 0;
        for (int i = 0; i <= sb.Length; i++)
        {
            if (i == sb.Length || sb[i] == ' ')
            {
                Reverse(sb, startIndex, i - 1);
                startIndex = i + 1;
            }
        }
    }
    static void ReverseWordOrder(StringBuilder sb)
    {
        Reverse(sb, 0, sb.Length - 1);
        ReverseWords(sb);
    }
}
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-09-13T16:54:03.047

```
namespace Reverse_the_string
{
    class Program
    {
        static void Main(string[] args)
        {

           // string text = "my name is bharath";
            string text = Console.ReadLine();
            string[] words = text.Split(' ');
            int k = words.Length - 1;
            for (int i = k;i >= 0;i--)
            {
                Console.Write(words[i] + " " );

            }

            Console.ReadLine();

        }
    }
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-10-24T09:14:42.297

不使用拆分和循环

```
public static string ReverseString(string s)
{
    string strToReverse = s;
    int fi = strToReverse.IndexOf(' ');
    int li = strToReverse.LastIndexOf(' ');
    string fp = strToReverse.Substring(0, strToReverse.IndexOf(' ')).TrimStart(' '); ;
    string mp = strToReverse.Substring(fi, li - fi).Trim(' ');
    string ep = strToReverse.Substring(strToReverse.LastIndexOf(' ', strToReverse.Length - 1)).TrimStart(' ');
    return ep + " " + mp + " " + fp;
} 
```

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2021-07-29T10:04:41.630

```
 static void Main(string[] args)
        {
            string str = "the quick brown fox";
            string[] arr = str.Split(' ');
            for (int i = arr.Length - 1; i >= 0; i--)
            {
                Console.Write(arr[i] + " ");
            }

            Console.Read();
        } 
```

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2017-02-28T14:41:21.620

```
 string s = "this is a test";

        string[] words = s.Split(' ');
        StringBuilder sb = new StringBuilder();

        for (int i = words.Length - 1; i >= 0; i--)
        {
            for (int j = words[i].Length -1; j >= 0;j--)
            {
                sb.Append(words[i][j]);
            }
            sb.Append(" ");
        }

        Console.WriteLine(sb); 
```

# android - 限制屏幕上的android应用程序尺寸

> ID：15634163
> 
> 赞同：0
> 
> 时间：2013-03-26T10:01:47.640
> 
> 标签：android

当我在 android 操作系统上启动我的应用程序时，它占据了整个可用屏幕。这是不希望的。我希望我的应用程序只占据屏幕的一部分，比如“10,10,100,100”的矩形。那么如何实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:09:16.637

通过在文件中声明主题，您可以将对话框主题用于单个 Activity `AndroidManifest.xml`：

```
<activity android:theme="@android:style/Theme.Dialog" android:name="your.package.and.ActivityName"/> 
```

这会让你[`Activity`](https://developer.android.com/reference/android/app/Activity.html)看起来像一个[`Dialog`](https://developer.android.com/reference/android/app/Dialog.html).

# android - 如何改变imageview的alpha值

> ID：15634164
> 
> 赞同：2
> 
> 时间：2013-03-26T10:01:54.290
> 
> 标签：android, image, alpha

在我的应用程序中，我想像下面这样更改 ImageView。我只想改变身体上的形象。

![在此处输入图像描述](../Images/5210a2e7507b336af3f7678abad28b1f.png)

我已按照以下链接使用类似的代码更改 alpha 值

```
imageView.setAlpha(255); 
```

但它不起作用。

[如何在 Android 中为视图设置不透明度（Alpha）](https://stackoverflow.com/questions/2838757/how-to-set-opacity-alpha-for-view-in-android)。请任何人建议我如何做到这一点。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-26T10:04:59.560

也许你可以这样尝试，我在正常方式下做起来有困难，但使用“动画”就可以了。

```
AlphaAnimation alpha = new AlphaAnimation(0.5F, 0.5F); // change values as you want
alpha.setDuration(0); // Make animation instant
alpha.setFillAfter(true); // Tell it to persist after the animation ends
// And then on your imageview
yourImageView.startAnimation(alpha); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T10:08:27.417

或者，不使用动画，您可以只[`setAlpha(float alpha)`](http://developer.android.com/reference/android/widget/ImageView.html#setAlpha%28int%29)在`ImageView`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-08T17:26:03.330

这可能是因为[setImageAlpha(float Alpha)](http://developer.android.com/reference/android/widget/ImageView.html#setImageAlpha%28int%29)从 API 级别 16 起已弃用[setAlpha(float Alpha)](http://developer.android.com/reference/android/widget/ImageView.html#setAlpha%28int%29)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-26T12:43:53.023

不透明度介于 0 到 1 之间，您已将值设为 255，
**imageView.setAlpha(255)**。

所以给出0到1之间的值，比如当

你想要 50% 的不透明度，给 0.5。imageView.setAlpha(0.5f)

您也可以在 XML 文件中执行如下操作：

android:layout_width="100dip"
android:layout_height="100dip"
android:id="@+id/ imageViewIcon"
android:src="@drawable/icon"
android:alpha= ".5"

# xpages - XPages validateExpression 不起作用

> ID：15634165
> 
> 赞同：0
> 
> 时间：2013-03-26T10:01:54.583
> 
> 标签：xpages

我想测试用户是否在模式####-##-###-#### 中输入了任何字符或数字

我的表达式是 ^(\w){4}-(\w){2}-(\w){3}-(\w){4}$ 并且似乎适用于在线测试人员，但不适用于我的 validateExpression！

有任何想法吗？

这是我的代码（getComponentValye 是我自己获取值的函数）...

```
<xp:inputText id="nsn" value="#{ddsURFQCI.NSN}">
   <xp:this.validators>
    <xp:validateExpression>
     <xp:this.expression><![CDATA[#{javascript:getComponentValue("nsn").match(new RegExp("^(\w){4}-(\w){2}-(\w){3}-(\w){4}$", "i"))}]]></xp:this.expression>
     <xp:this.message><![CDATA[#{javascript:"NSN must match the pattern ####-##-###-####. (" + getComponentValue("nsn") + ")"}]]></xp:this.message>
     </xp:validateExpression>
   </xp:this.validators>
</xp:inputText>
<xp:message id="message1" styleClass="error" for="nsn"></xp:message> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:10:50.333

我把我的表达改成了这个，它起作用了...... ^[A-Za-z0-9]{4}-[A-Za-z0-9]{2}-[A-Za-z0-9]{3 }-[A-Za-z0-9]{4}$

# php - 简单的计数系统。PHP/.TXT 文件

> ID：15634166
> 
> 赞同：1
> 
> 时间：2013-03-26T10:01:58.617
> 
> 标签：php, file

我有以下简单的计数，系统，我有两件事我做不到。这是我的 count.php 文件：

```
<?php
if (file_exists('admin/all_count.txt')){
    $fil = fopen('admin/all_count.txt', r);
    $dat = fread($fil, filesize('admin/all_count.txt'));
    echo $dat+1;
    fclose($fil);
    $fil = fopen('admin/all_count.txt', w);
    fwrite($fil, $dat+1);
}
else 
{
    $fil = fopen('admin/all_count.txt', w);
    fwrite($fil, 1);
    echo '1';
    fclose($fil);
}
?> 
```

这是 all_count.txt 文件的内容（但我认为你不需要它，反正）：

```
81 
```

问题：-

1.  所以为了让count.php工作，我把`<?php include("count.php"); ?>`我想计数的页面放在里面，但是我把这个包含在哪里，它显示了网页中all_count.txt文件的实际内容，我想隐藏.
2.  我想制作一个脚本，使 all_count.txt 文件的内容为零。提前谢谢你们。

一周前，我尝试将其设为零，但没有奏效：我尝试将其设为零，但没有奏效：zero.php：

```
<?php
if (file_exists('admin/all_count.txt')){
    $fil = fopen('admin/all_count.txt', r);
    $dat = fread($fil, filesize('admin/all_count.txt'));
    $dat-$dat;
    fclose($fil);
    $fil = fopen('admin/all_count.txt', w);
    fwrite($fil, $dat-$dat);
}
else 
{
    $fil = fopen('admin/all_count.txt', w);
    fwrite($fil, 0);
    echo '0';
    fclose($fil);
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T10:06:31.613

1.  考虑为此使用数据库。您必须处理文件的并发访问问题。
2.  您可以打开文件一次进行读写
3.  您应该将 'r' 和 'w' 访问修饰符括在引号中
4.  你不应该回显它（如果你不想要输出）
5.  为了将文件的内容归零，oyu 可以做到

    file_put_contents('admin/all_count.txt','0');

6.  您可以只使用 file_get_contents/file_put_contents - 我认为这对您来说会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:05:48.137

1.  `echo`如果您不希望内容显示在您的页面上，请不要使用。

2.  您已经有办法将计数写入 txt 文件，为什么不能只写入 0 呢？

# windows-store-apps - 在 URL 单击时重定向到 Windows Surface App 特定页面

> ID：15634167
> 
> 赞同：-1
> 
> 时间：2013-03-26T10:02:02.833
> 
> 标签：windows-store-apps, winrt-xaml

我正在开发 Windows 8 商店应用程序，我正在实施忘记密码流程。生成电子邮件并将其发送到用户电子邮件地址（雅虎、Gmail 等）。当用户单击该电子邮件中的身份验证 URL 时，我需要打开我的应用程序的重置密码页面。如何在 URL Click 上打开重置密码页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:48:48.437

您可以使用[协议激活](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh779670.aspx)。您必须通过自定义协议的链接传递一些参数。根据参数，您只需打开/导航到重置密码页面。这是来自 MSDN的[示例。](http://code.msdn.microsoft.com/windowsapps/Association-Launching-535d2cec)

协议激活有一个限制。自定义协议不能超链接。所以用户必须手动复制 URL 并传递给**文件资源管理器**。超链接仅在 Windows 商店应用程序中有效。因此，您可以在电子邮件中发送超链接，如果用户在默认邮件应用程序中打开电子邮件，则协议激活将起作用，但如果用户在浏览器中检查邮件，则它将不起作用，用户必须手动打开 URI。

前任：

```
Click <a href="myprotocol://forgot-password-page">here </a>to reset the password. 
```

# c - 二进制文件中的字节序不一致

> ID：15634170
> 
> 赞同：0
> 
> 时间：2013-03-26T10:02:16.800
> 
> 标签：c, binaryfiles, endianness

我写了一个程序将数字写入二进制文件，代码片段如下：

```
 u_int16_t N=150;
    u_int16_t seed=3;

    FILE * outfile, *infile;

    outfile=fopen("tempfile","wb");
    //write these 2 16-bit numbers into binary file
    fwrite(&seed, 2, 1, outfile);
    fwrite(&N, 2, 1, outfile);

    infile=fopen("tempfile","rb");
    if(infile==NULL) fputs("Fire error\n",stderr);
    //get the size of the file
    fseek(infile,0,SEEK_END);
    int lsize=ftell(infile);
    rewind(infile);

    u_char * temp2=(u_char*)malloc(lsize);
    if(temp2==NULL) printf("temp2 error allocation\n");
    fread(temp2,1,lsize,infile);
    for(i=0;i<lsize;i++)
    printf("%x",temp2[i]);
    printf("\n");
    fclose(infile);
    free(temp2); 
```

结果是：

```
30960 
```

所以 3 打印为`30`小端，而 150 打印为`960`，有一个附加`0`，实际上`0x96=150`，它是大端

为什么和的字节序不同`3`，`150`为什么还有一个额外的`0`？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T10:05:41.607

当你这样做

```
printf("%x",temp2[i]); 
```

在其十六进制数中具有前导零的字节打印*时没有*该零。这意味着一个数字，例如，`0x03`将打印为`3`。

这很明显，您将四个字节写入文件，但在打印输出中只有五个十六进制数字（提示：四个字节是八个十六进制数字）。

相反，例如

```
printf("%02x",temp2[i]); 
```

# r - 如何添加条件来计算海量数据的时间相关性？

> ID：15634173
> 
> 赞同：0
> 
> 时间：2013-03-26T10:02:26.290
> 
> 标签：r, correlation

我想计算两个数据集与另一个数据的条件之间的相关性。我想要 P 的前 50%，这对应于 P 的值大于中位数。

```
 P=c(1,6,5,6,2,8,5)
      sf=c(1,2,6,6,4,5,5)
      Pf=c(1,6,5,8,4,8,5) 
```

正常校正：

```
 cor(sf,Pf) 
```

有条件：

```
 cor(sf[P > median(P)], Pf[P > median(P)]) 
```

这工作得很好。我怎样才能对我的真实数据应用同样的东西？

```
 with condition(using dir3(p is dir3 here)):

              ??? 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:01:21.173

完全相同的代码应该可以工作：

```
function(x){cor(x[,1],x[,2])} 
```

可以写成

```
function(x) { 
  P  <- x[,3]
  sf <- x[,1]
  Pf <- x[,2]
  cor(sf, Pf)
} 
```

变成

```
function(x) { 
  P  <- x[,3]
  sf <- x[,1]
  Pf <- x[,2]
  i <- P > median(P)
  cor(sf[i], Pf[i])
} 
```

# excel - 在excel中运行访问宏

> ID：15634177
> 
> 赞同：3
> 
> 时间：2013-03-26T10:02:33.697
> 
> 标签：excel, vba

我想在 excel vba 中运行访问宏并复制访问查询。
当我运行下面的代码时，在 cn.DoCmd.RunMacro "runCopyqueryVragenlijsten" 行上出现运行时错误 3001

```
'~~> Select access file Database Questionmark.mdb
Set cn = CreateObject("adodb.connection")
Set rs = CreateObject("adodb.recordset")
cn.Open "provider=microsoft.jet.oledb.4.0;data source=D:\Data\Geschiktheidstesten en OPQ-rapport NMBS competenties\Analyse\Database Questionmark.mdb"

'~~> Run access macro
cn.DoCmd.RunMacro "runCopyqueryVragenlijsten"

'~~> Select access query to copy
rs.Open "select * from Copyquery_Vragenlijsten", cn

'~~> paste access query in sheet vragenlijst
Worksheets("vragenlijst").Range("a2").CopyFromRecordset rs

'~~> Close access file and put cursor on cell A1 of sheet evaluatierooster_NL
rs.Close
Set rs = Nothing
Set cn = Nothing 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T11:26:17.130

我建议单独运行宏，然后连接到他的文件并复制数据。

例如来自[http://www.ozgrid.com/forum/showthread.php?t=13173](http://www.ozgrid.com/forum/showthread.php?t=13173)

```
Sub ExportAccessData()

    Dim mydb As Object

    Set mydb = GetObject("G:\mgai\pertrac\database\StrategyResearch.mdb") 
    mydb.Application.Run "ExportData"  
    mydb.Application.Quit 
    Set mydb = Nothing

End Sub 
```

例如来自[http://support.microsoft.com/kb/131921](http://support.microsoft.com/kb/131921)

```
Sub Run_Access_Macro()

    Shell("c:\access\msaccess.exe c:\access\sampapps\nwind.mdb")
    Chan = DDEInitiate("MSACCESS", "system") 
    Application.ActivateMicrosoftApp xlMicrosoftAccess
    DDEExecute Chan, "Sample AutoExec"
    Application.DDETerminate Chan

End Sub 
```

# ios - 退出 iOS 配置文件

> ID：15634188
> 
> 赞同：20
> 
> 时间：2013-03-26T10:03:16.133
> 
> 标签：ios, distribution, enterprise

我的客户有一个启用了应用内购买、游戏套件和推送通知的 iOS 应用，它目前在应用商店中。我想使用内部企业分发证书退出应用程序，以进行内部测试，但仍然能够测试与原始配置文件相关的服务。这可能吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-27T09:30:46.893

我最终这样做了，这是以下几点的组合：-

*   [关于 iPhone/iPad 辞职构建行为的非常棘手的问题](https://stackoverflow.com/questions/6181813/very-tricky-question-about-iphone-ipad-resigned-builds-behaviors)

和

*   [重新签署 IPA (iPhone)](https://stackoverflow.com/questions/6896029/re-sign-ipa-iphone)

1）创建权利plist，防止钥匙串等问题

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>application-identifier</key>
    <string>GBA9L2EABG.com.your.bundle.id.MyApp</string>
    <key>get-task-allow</key>
    <false/>
</dict> 
```

2）解压IPA

```
unzip Application.ipa 
```

3）删除旧代码签名

```
rm -r "Payload/Application.app/_CodeSignature" "Payload/Application.app/CodeResources" 2> /dev/null | true 
```

4) 替换嵌入式移动配置文件

```
cp "MyEnterprise.mobileprovision" "Payload/Application.app/embedded.mobileprovision" 
```

5) 辞职

```
/usr/bin/codesign -f -s "iPhone Distribution: Certificate Name" --resource-rules "Payload/Application.app/ResourceRules.plist" --entitlements Entitlements.plist "Payload/Application.app" 
```

6) 重新包装

```
zip -qr "Application.resigned.ipa" Payload 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-17T15:14:23.773

为了让应用程序比@Koko Carl 所说的更容易辞职，我们调整了 floatsign 脚本，该脚本可以在[https://gist.github.com/Weptun/5406993](https://gist.github.com/Weptun/5406993)找到。使过程变得非常简单：

```
sh floatsign.sh  ~/Downloads/File.ipa "iPhone Distribution: CertificateName" -b new.bundle.id -p /Path/To/Profile/Appstore.mobileprovision   App-resigned.ipa 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-14T18:43:12.037

只是为了在 Koko Carl 的响应中添加一点内容，如果在执行第 5 步（Resign）时遇到 codesign_allocate 问题，请尝试导出 shell 变量 CODESIGN_ALLOCATE 并为其提供 iPhone SDK 中的 codesign allocate 路径。为此，请确保您已安装 xcode 命令行工具（Xcode 中的首选项/更新）

例如，我收到错误：

```
me$ /usr/bin/codesign -f -v -s "iPhone Distribution: Some Company, Inc" --resource-rules "Payload/MyApp.app/ResourceRules.plist" --entitlements Entitlements.plist "Payload/MyApp.app" 
```

输出：

```
Payload/MyApp.app: replacing existing signature
codesign_allocate: object: /Users/mimio/Downloads/Payload/MyApp.app/MyApp malformed object (unknown load command 33)
Payload/MyApp.app: object file format unrecognized, invalid, or unsuitable 
```

为了解决这个问题，我设置了变量：

```
me$ export CODESIGN_ALLOCATE=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/codesign_allocate 
```

然后再次运行我的命令：

```
me$ /usr/bin/codesign -f -v -s "iPhone Distribution: Some Company, Inc" --resource-rules "Payload/MyApp.app/ResourceRules.plist" --entitlements Entitlements.plist "Payload/MyApp.app" 
```

瞧！新的 codesign_allocate 一切正常

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-08T12:37:23.400

*搜索时，这是 stackover flow 中显示的第一个问题。所以想用最新的 iResign mac 应用程序进行更新，这使得使用 GUI 而不是终端中的命令使工作变得超级简单。*

**重新签名**

iReSign 允许使用来自 Apple 的数字证书对 iDevice 应用程序包 (.ipa) 文件进行签名或签名以进行分发。它还可以从 .xcarchive 文件创建签名的 iDevice 应用程序包 (.ipa) 文件。此工具针对企业用户，用于企业部署，当签署应用程序的人与开发应用程序的人不同时。

**如何使用**

iReSign 允许您使用您持有相应私钥的任何证书重新签署任何未加密的 ipa 文件。iResign 还可以从 xcarchive 文件创建签名的 ipa 文件。

将未签名的 .ipa 或 .xcarchive 文件拖到顶部框，或使用浏览按钮。

在 Keychain Access 中输入您的完整证书名称，例如底部框中的“iPhone Developer: Firstname Lastname (XXXXXXXXXX)”。

点击重新签名！等待。退出的文件将保存在与原始文件相同的文件夹中。

来源：[https ://github.com/maciekish/iReSign](https://github.com/maciekish/iReSign)

# django - 使用两个表将数据插入数据库

> ID：15634189
> 
> 赞同：0
> 
> 时间：2013-03-26T10:03:17.367
> 
> 标签：django, django-models, django-forms, django-views

在我看来.py

```
def addinfo(request):
    profile_form = ProfileForm()
    book_form = BookForm(instance=Profile())

    if request.POST:

        profile_form=ProfileForm(request.POST)

        if profile_form.is_valid():
            profile=Profile_form.save()

            book_form=BookForm(request.POST,instance=profile)

            if book_form.is_valid():
                book_form.save() 
```

模型.py 是

```
class Profile(models.Model):
    profile_id = models.AutoField(primary_key=True)
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=40)
    email = models.EmailField()
    age=models.IntegerField()

    class Meta:
    db_table=u'Profile'

    def __unicode__(self):
        return u"%d %s %s %s %d" % (self.pk, self.first_name, self.last_name, self.email,self.age)

class Book(models.Model):
    book_id=models.AutoField(primary_key=True,unique=True)
    book_name=models.CharField(max_length=30)
    publisher_name=models.CharField(max_length=40)
    profile=models.ForeignKey(Author)

    class Meta:
        db_table = u'Book'

    def __unicode__(self):
        return u'%d %s %s' % (self.pk, self.book_name, self.publisher_name) 
```

这是为了将数据保存到两个不同的模型中，我在这个模型中使用表单。一个模型得到更新，另一个表数据没有被插入。不保存页面会刷新。会有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:13:13.987

如果我理解你想要做什么，你应该更换

```
book_form=BookForm(request.POST,instance=profile) 
```

和

```
book = Book(profile_id=profile.id)  
# EDIT shameless copy and paste from Catherine's answer to avoid "profile_id not defined" error
book_form=BookForm(request.POST,instance=book)
if book_form.is_valid():
    book_form.save() 
```

* * *

**编辑**：作为替代方案，您可以更改`Book`模型以使实例可选：

```
profile=models.ForeignKey(Author, null=True) 
```

这样，您的视图将变为：

```
def addinfo(request):
    profile_form = ProfileForm()
    book_form = BookForm()

    if request.POST:
        profile_form=ProfileForm(request.POST)
        if profile_form.is_valid():
            profile=Profile_form.save()
            book_form=BookForm(request.POST)
            if book_form.is_valid():
               book = book_form.save(commit=False)
               book.profile = profile
               book.save() 
```

有关部分的解释，请参见[本段中的注释](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#using-a-subset-of-fields-on-the-form)`commit=False`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:34:36.100

```
def addinfo(request):
    profile_form = ProfileForm()
    book_form = BookForm(instance=Profile())

    if request.POST:
        profile_form=ProfileForm(request.POST)
        if profile_form.is_valid():
            profile=Profile_form.save()

            book = Book(profile_id=profile.id)
            book_form=BookForm(request.POST,instance=book)
            if book_form.is_valid():
                book_form.save() 
```

# visual-studio-2012 - 如何在 Visual Studio 12 中打开 Sprint Burndown 报告

> ID：15634191
> 
> 赞同：0
> 
> 时间：2013-03-26T10:03:26.037
> 
> 标签：visual-studio-2012, burndowncharts

当我使用 VS10 Sprint Burndown Report 时，会在 VS 中打开。现在我使用 VS12 并在我的默认浏览器中打开报告。我怎么能在VS中打开它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:41:24.137

我不知道这是可能的。2012 年，Web Access 是此类报告的中心位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T22:44:48.643

是的，从 VS2010 中打开 SSRS 报告确实在 VS 的浏览器中打开了报告；但是，这种行为在 VS2012 中已更改为在默认浏览器中打开报告。这是因为 VS2012 不再有 Web 浏览器（与 VS2010 一样）。

# javascript - 使用相同 javascript 方法的多个表单

> ID：15634196
> 
> 赞同：-1
> 
> 时间：2013-03-26T10:03:40.273
> 
> 标签：javascript, ajax, forms

我有点坚持我一直在尝试做的事情。

我一直在尝试获取多种形式（六种）来使用我拥有的 javascript 方法。这些表单具有文本输入值，应进行检查，然后传递给 php 文件，然后使用 AJAX 更新页面并确认或出错。

对于这个例子，我将只使用两种形式，这些是我的形式

```
<div class="trade_info_1">
            <h2>Market #1</h2>
            <form action="" method="POST">
                <ul>
                    <li>
                        <label for="market_1">Market: </label><input type="text" name="market_1" id="market_1" />
                    </li>
                    <li>
                        <button type="button" name="button1" id="button1" onclick="check_update_selection()">Update Market!</button>
                    </li>
                </ul>
                <input type="hidden" name="market_number" id="market_number" value="1" />
                <div id="market_1_output">output</div>
            </form>
        </div>

        <div class="trade_info_2">
            <h2>Market #2</h2>
            <form action="" method="POST">
                <ul>
                    <li>
                        <label for="market_2">Market: </label><input type="text" name="market_2" id="market_2" />
                    </li>
                    <li>
                        <button type="button" name="button2" id="button2" onclick="check_update_selection()">Update Market!</button>
                    </li>
                </ul>
                <input type="hidden" name="market_number" id="market_number" value="2" />
                <div id="market_2_output">output</div>
            </form>
        </div> 
```

现在是 AJAX 更新页面的地方。这是我已经有的方法（JS）

```
function check_update_selection() 
 {
if (window.XMLHttpRequest) 
{
    xhr = new XMLHttpRequest();
}
else if (window.ActiveXObject) 
{
    xhr = new ActiveXObject("Microsoft.XMLHTTP");
}

console.log('Market value: ' + document.getElementById('market_number').value);

if(document.getElementById('market_number').value == 1)
{
    var market = document.getElementById('market_1').value;;
    var market_number = 1;
    var html_element = 'market_1';
}
else if(document.getElementById('market_number').value == 2)
{
    var market = document.getElementById('market_1').value;
    var market_number = 2;
    var html_element = 'market_2';
}

xhr.open('POST', 'update_market.php');
xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');
var obj = {market: market};
xhr.send("data=" + JSON.stringify(obj));
xhr.onreadystatechange=function() 
{
    if (xhr.readyState==4) 
    {
        if(market_number == 1)
        {
            document.getElementById("market_1_output").innerHTML = xhr.responseText;
        }
        else if(market_number == 2)
        {
            document.getElementById("market_2_output").innerHTML = xhr.responseText;
        }
    }
} 
```

我不会包含 php，因为它所做的一切都与“TEST”一词相呼应。

第一种形式完美地工作，但是，第二种形式没有，它似乎更新了第一种形式。所以我使用了 console.log(); 并发现每次我提交第二个表单时，似乎都会提交第一个表单中的字段。

我在这件事上走的是正确的道路还是有什么我遗漏的？

另外我正在学习javascript，所以我对平台的了解不是最好的，所以请指出我犯的任何错误。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:08:34.417

您不能使用相同的 id (market_number) 放入相同的第 2 页元素：

```
<input type="hidden" name="market_number" id="market_number" value="2" /> 
```

更好的解决方案可能是定义主函数 check_update_selection 一个参数，然后使用每个表单中的该参数调用它：

```
function check_update_selection(number) 
```

并从您的 HTML 中使用正确的号码调用它：

```
 onclick="check_update_selection(1)"
 onclick="check_update_selection(2)" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:11:11.207

首先在同一个页面中有多个表单指向同一个操作是一种不好的做法。元素的第二个 id 应该是唯一的。

如果您是初学者，那么在 w3c 验证器中验证 HTML，您会从中学到很多东西。

# internet-explorer - 仅包含数字字符的 Internet Explorer URL

> ID：15634200
> 
> 赞同：0
> 
> 时间：2013-03-26T10:03:54.730
> 
> 标签：internet-explorer, character, numeric

我们想发布一个带有 URL 数字字符的网站。URL 就像 http://444。当我们编写 URL 并点击时，我们得到一个错误页面。URL 返回 http://0.0.1.188

当我在 Firefox 中尝试时没有问题。问题可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:07:04.427

这是因为 xxxx 被视为 IP-v4 地址，而 444 超出范围（其 8 位令牌）

# java - 复制整数而不是从数组列表中创建新整数时的 Java 引用

> ID：15634202
> 
> 赞同：0
> 
> 时间：2013-03-26T10:04:00.510
> 
> 标签：java, reference, arraylist

所以我正在编写一个算法来找到一个问题的所有解决方案，每次我找到一个更好的解决方案时，我都会用我的解决方案对象中的解决方案覆盖当前列表，每次我找到一个相同的解决方案时，我都想将它添加到我的解决方案列表。

问题是，在我的输出中，我得到了 6 次相同的解决方案，我想这是因为我正在复制引用而不是添加原始解决方案。

我发现了一个看起来像我的问题的帖子（[Java 中 ArrayList 的问题](https://stackoverflow.com/questions/4161827/problem-with-arraylist-in-java/4161876#4161876)），但我尝试了他们在那里所做的事情，但它并没有解决我的问题。

所以我尝试了不同的东西，这是我想出的最好的。这是我调用的将当前解决方案与当前解决方案对象中的解决方案一起添加到列表的方法。这有点长，我做了一些不必要的事情，我只是想解决我的问题。

```
ArrayList<Integer> horstreets;
ArrayList<Integer> verstreets;

public ArrayList<StreetPlan> addCurrentPlan(Solutions sol) {
    ArrayList<StreetPlan> plan = new ArrayList<>();

    ArrayList<Integer> h = null;
    ArrayList<Integer> v = null;
    //copy all the previous answers
    for (StreetPlan a : sol.getStreetPlans()) {
        h= new ArrayList<>();
        for (Integer b : a.getHorizontalStreets()) {
            Integer c=b.intValue();
            h.add(c);
        }
        v =  new ArrayList<>();
        for (Integer b : a.getVerticalStreets()) {
            Integer c=b.intValue();
            v.add(c);
        }
        plan.add(new MyStreetPlan(h, v));
    }

    //add new solution
    h= new ArrayList<>();
    v= new ArrayList<>();
    for (Integer b : horstreets) {
        int c= b.intValue();
        h.add(c);
    }
    for (Integer b : verstreets) {
        int c= b.intValue();
        v.add(c);
    }

    plan.add(new MyStreetPlan(h, v));
    return plan;
} 
```

这就是我调用新 StreetPlan 并仅添加当前（因此更好）解决方案的方法。

```
public ArrayList<StreetPlan> setBetterPlan() {
    ArrayList<StreetPlan> plan = new ArrayList<>();

    ArrayList<Integer> h = null;
    ArrayList<Integer> v = null;

    h= new ArrayList<>();
    v= new ArrayList<>();
    for (Integer b : horstreets) {
        int c= b.intValue();
        h.add(c);
    }
    for (Integer b : verstreets) {
        int c= b.intValue();
        v.add(c);
    }

    plan.add(new MyStreetPlan(h, v));
    return plan;
} 
```

对不起，如果我把帖子写得有点长，我只是想让它清楚。对不起我的英语：p

***编辑*** 我知道这种方法有很多代码，但如果我这样做

```
 ArrayList<StreetPlan> plan = new ArrayList<>();
    plan.add(new MyStreetPlan(horstreets,verstreets));
    sol = new MySolutions(Bcost, Hstreets, plan); 
```

添加更好的解决方案，并添加一个平等的计划：

```
 ArrayList<StreetPlan> plan = new ArrayList<>();
    plan.add(new MyStreetPlan(horstreets,verstreets));
    plan.addAll(sol.getStreetPlans());
    sol = new MySolutions(Bcost, Hstreets, plan); 
```

我的输出只是一些白线（因为在我的算法末尾`horstreets`并且`verstreets`只是两个空列表）

# asp.net - 使用 T-SQL 将啤酒插入啤酒表时出错

> ID：15634204
> 
> 赞同：0
> 
> 时间：2013-03-26T10:04:02.567
> 
> 标签：asp.net, sql, tsql, database-design, sql-insert

我正在尝试将 7 种不同类型的啤酒插入我使用 T-SQL 创建的名为 Beers 的表中。我的 VALUES 中不断出现错误，但消息如下：

执行查询时出现以下错误：

```
Server: Msg 156, Level 15, State 1, Line 6
Incorrect syntax near the keyword 'VALUES'. 
Incorrect syntax near the keyword 'VALUES'. 
Incorrect syntax near the keyword 'VALUES'. 
Incorrect syntax near the keyword 'VALUES'. 
Incorrect syntax near the keyword 'VALUES'. 
Incorrect syntax near the keyword 'VALUES'. 
Incorrect syntax near the keyword 'VALUES'. 
```

有什么我想念的吗？我无法弄清楚错误是什么。

这是我的 SQL

--将啤酒添加到数据库

```
SET IDENTITY_INSERT [dbo].[Beers] ON

IF NOT EXISTS (SELECT [BeerId] FROM [dbo].[Beers] WHERE [BeerId] = 1)
 INSERT INTO [dbo].[Beers] ([BeerId], [BeerName], [BeerPricePerBottle], [BeerType],    [BeerRating], [Enabled], [DateInserted],[DateLastActivity],
 VALUES (1, 'Black_Butte', '$9.00', 'porter', NULL, 1, '20071111', '20071111')

IF NOT EXISTS (SELECT [BeerId] FROM [dbo].[Beers] WHERE [BeerId] = 2)
 INSERT INTO [dbo].[Beers] ([BeerId], [BeerName], [BeerPricePerBottle], [BeerType],  [BeerRating],  [Enabled], [DateInserted],[DateLastActivity],
 VALUES (2, 'Corona', '$5.00', 'lager', NULL, 1, '20071111', '20071111')

IF NOT EXISTS (SELECT [BeerId] FROM [dbo].[Beers] WHERE [BeerId] = 3)
 INSERT INTO [dbo].[Beers] ([BeerId], [BeerName], [BeerPricePerBottle], [BeerType], [BeerRating], [Enabled], [DateInserted],[DateLastActivity],
 VALUES (3, 'Duvel', '$12.00', 'pale ale', NULL, 1, '20071111', '20071111')

IF NOT EXISTS (SELECT [BeerId] FROM [dbo].[Beers] WHERE [BeerId] = 4)
 INSERT INTO [dbo].[Beers] ([BeerId], [BeerName], [BeerPricePerBottle], [BeerType], [BeerRating], [Enabled], [DateInserted],[DateLastActivity],
 VALUES (4, 'Guinness', '$7.00', 'stout', NULL, 1, '20071111', '20071111')

IF NOT EXISTS (SELECT [BeerId] FROM [dbo].[Beers] WHERE [BeerId] = 5)
 INSERT INTO [dbo].[Beers] ([BeerId], [BeerName], [BeerPricePerBottle], [BeerType], [BeerRating], [Enabled], [DateInserted],[DateLastActivity],
 VALUES (5, 'Heineken', '$6.00', 'lager', NULL, 1, '20071111', '20071111')

IF NOT EXISTS (SELECT [BeerId] FROM [dbo].[Beers] WHERE [BeerId] = 6)
 INSERT INTO [dbo].[Beers] ([BeerId], [BeerName], [BeerPricePerBottle], [BeerType], [BeerRating], [Enabled], [DateInserted],[DateLastActivity],
 VALUES (6, 'Pilsner_Urquell', '$6.50', 'pilsner', NULL, 1, '20071111', '20071111')

IF NOT EXISTS (SELECT [BeerId] FROM [dbo].[Beers] WHERE [BeerId] = 7)
 INSERT INTO [dbo].[Beers] ([BeerId], [BeerName], [BeerPricePerBottle], [BeerType], [BeerRating], [Enabled], [DateInserted],[DateLastActivity],
 VALUES (7, 'Stone', '$10.00', 'IPA', NULL, 1, '20071111', '20071111')

SET IDENTITY_INSERT [dbo].[Beers] OFF 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:06:48.780

您在 VALUES 之前缺少右括号：

```
INSERT INTO [dbo].[Beers] ([BeerId], [BeerName], [BeerPricePerBottle], [BeerType], [BeerRating], [Enabled], [DateInserted],[DateLastActivity]) VALUES 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:31:13.390

尝试这个：

如果不存在（选择 [BeerId] 从 [dbo].[Beers] WHERE [BeerId] = 1）插入（[dbo].[Beers]（[BeerId]，[BeerName]，[BeerPricePerBottle]，[BeerType]， [BeerRating], [Enabled], [DateInserted],[DateLastActivity]) 值 (1, 'Black_Butte', '$9.00', 'porter', NULL, 1, '20071111', '20071111')

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T10:08:46.477

`INSERT`您缺少右括号并在每个语句的末尾添加了额外的逗号...

如下更改，它将起作用，

**从**

```
,[DateLastActivity],
 VALUES (1, 'Black_Butte', '$9.00', 'porter', NULL, 1, '20071111', '20071111') 
```

**至**

```
,[DateLastActivity])
 VALUES (1, 'Black_Butte', '$9.00', 'porter', NULL, 1, '20071111', '20071111') 
```

# c# - 如何在 C# 中生成多维列表<>

> ID：15634208
> 
> 赞同：3
> 
> 时间：2013-03-26T10:04:27.617
> 
> 标签：c#, list, visual-studio-2008

您好，我尝试在 C# 中创建一个包含国家、城市和街道的列表。

起初我使用 SQL 从 3 个不同的表中获取数据。然后我想要一个看起来像这样的列表：

```
 Germany
       Frankfurt
            Siemensweg 14
       Berlin
            Bernstr 4

   USA
        New York
            Atlstr.24
            Zumbastr. 45
   Turkey 
```

这是我到目前为止所拥有的，但它没有按预期工作：

```
public class iOrt
{
    public class ORT
    {
        public string RegionID { get; set; }
        public string RegionName { get; set; }
        public List<STADT> Stadt { get; set; }

    }

    public class STADT
    {
      public string Stadname { get; set; }
    }

    //SQL Verbindung wird ausgelesen
    protected static string GetConnectionString()
    {
        return ConfigurationManager.ConnectionStrings["Bookit"].ConnectionString;
    }

    internal static List<ORT> Ort()
    {
        List<ORT> ortObject = new List<ORT>();
        List<STADT> stadtObject = new List<STADT>();

        ortObject.Add(new ORT {
        RegionID="235",
        RegionName="deutschland",
        Stadt = stadtObject.Add(new STADT{

            Stadname="Frankfurt"})

        });

        return ortObject;

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T10:28:20.753

```
public class Street
    {
        public string Name { get; set; }
    }

    public class City
    {
        public string Name { get; set; }
        public List<Street> Streets { get; set; }
    }

    public class Country
    {
        public string Name { get; set; }
        public List<City> Cities { get; set; }
    }

    public static List<Country> Ort()
        {
            List<Country> countries = new List<Country>();
            countries.Add(new Country()
            {
                Name = "Country1",
                Cities = new List<City>()
                {
                    new City()
                    {
                        Name="City1",
                        Streets=new List<Street>()
                        {
                            new Street()
                            {
                                Name="Street 1"
                            },
                            new Street()
                            {
                                Name="Street 2"
                            }
                        }
                    },
                    new City()
                    {
                        Name="City2",
                        Streets=new List<Street>()
                        {
                            new Street()
                            {
                                Name="Street 1"
                            },
                            new Street()
                            {
                                Name="Street 2"
                            }
                        }
                    }
                }
            });
            return countries;

        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T10:09:59.107

返回 Country 对象列表。Country 对象包含 City 对象的列表。城市对象包含地址对象列表等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T10:10:55.063

您需要在这里制作不同的课程。您需要为 Country、City、Street 创建三个类（或更多，取决于您的结构）。国家有一个城市列表，一个城市有一个街道列表。

```
public class Country
{
    public string Name { get; set; }
    public List<City> Cities { get; set; }
}

public class City
{
    public string Name { get; set; }
    public List<Street> Streets { get; set; }
}

public class Street
{
    public string Name { get; set; }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-26T10:10:56.230

您的对象初始化代码不正确。应该：

```
internal static List<ORT> Ort()
{
    List<ORT> ortObject = new List<ORT>();

    ortObject.Add(new ORT
                  {
                      RegionID="235",
                      RegionName="deutschland",
                      Stadt = new List<STADT>()
                      {
                          new STADT { Stadname="Frankfurt" }
                      }
                  });

    return ortObject;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T10:09:52.117

您需要组织数据。你为什么不使用类来这样做。考虑下面

```
public class County
{
    public string Name{get;set;}
    public List<City> Cities{get;set;}
}

public class City
{
    public string Name{get;set;}
    public List<Region> {get;set;}
}

public class Region
{
   public string Name{get;set;}
   public int Code{get;set;}
} 
```

然后你可以有一个方法

```
internal static List<Country> Ort()
{
   Country country = new Country();
   Country.Name="Germany";
   Country.Cities = new List<City>();  

   City city1 = new City();
   city1.Name="Frankfurt";
   city1.Regions = new List<Region>();

   Region region = new Region(); 
   region.Name = "Siemensweg";
   region.code = 14;

   city1.Regions.Add(region);

   region = new Region();
   region.Name = Bernstr;
   region.Code = 4;

   city1.Regions.Add(region);

   country.Cities.Add(city1);

   List<Country> countries = new List<Country>();
   countries.Add(country);

   return countries;   

   //or you can make your classes in a loop on a table row collection 

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-26T10:11:02.337

我认为您的结构应如下所示：

```
public class Country {
      public string CountryName { get; set; }
      public List<CountryRegion> Regions { get; set; } 
}

pulic class CountryRegion 
{
     public string RegionName { get; set; }  
     public List<Area> Areas { get; set; }    
}

public class Area {
     public string AreaName { get; set; }
     public int Population { get; set; }

} 
```

获取结构：

```
Germany
   Frankfurt
        Siemensweg 14
   Berlin
        Bernstr 4 
```

你可以做：

```
 var Germany = new Country();
  Germany.CountryName = "Germany";
  Germany.Regions = new List<CountryRegion>();

  var Siemensweg = new Area();
  Siemensweg.AreaName = "Siemensweg";
  Siemensweg.Population = 14;

  var Bernstr = new Area();
  Bernstr.AreaName = "Bernstr";
  Bernstr.Population = 4;

  Germany.Regions.Add(new CountryRegion { RegionName = "Siemensweg", new List<Area> { Siemensweg } });
  Germany.Regions.Add(new CountryRegion { RegionName = "Berlin", new List<Area> { Bernstr } }); 
```

# symfony - 教义：在填充字段之前更改格式？

> ID：15634215
> 
> 赞同：0
> 
> 时间：2013-03-26T10:04:53.610
> 
> 标签：symfony, doctrine

`245,95`在我的表格中，所有价格都以格式（欧洲格式）存储为字符串。我无法改变这一点。在我的应用程序内部，我希望所有价格都是浮动的。

我可以在填充实体字段之前更改格式吗？在普通的 sql 中，我可以使用 a`REPLACE`并完成我想要的。

我一直在研究 Symfony 数据转换器，但它看起来只适用于表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:57:49.757

您可以在 getter 方法中编写转换逻辑。

```
.
.
.
function getPrice(){
      $price = conversionLogic($this->price);
      return $price;
}
.
.
. 
```

# android - 多个 Horizo ntalListView 使用同一个适配器？

> ID：15634216
> 
> 赞同：0
> 
> 时间：2013-03-26T10:04:56.263
> 
> 标签：android, listview, adapter

我正在使用两个具有相同适配器的 Horizo​​ntalListView。但是只有一个 Horizo​​ntalListView 是可见的，我不知道我做错了什么。

我的活动 onCreate 方法：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.books_library);
            ScienceBooks = (HorizontalListView) findViewById(R.id.ScienceBooks);
        FictionBooks = (HorizontalListView) findViewById(R.id.FictionBooks);
        adapter = new BookAdapter(BooksLibrary.this, 1, images);
        adapter1 = new BookAdapter(BooksLibrary.this, 1, images);
        ScienceBooks.setAdapter(adapter);
        FictionBooks.setAdapter(adapter1);
    } 
```

**book_library.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <com.devsmart.android.ui.HorizontalListView
        android:id="@+id/ScienceBooks"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
         />

    <com.devsmart.android.ui.HorizontalListView
        android:id="@+id/FictionBooks"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:44:21.733

如果您将`wrap_content`常量设置为`HorizontalScrollView`高度，这是一个已知错误。`HorizontalScrollView`在修复此错误之前，您可以通过为此类定义绝对高度来使用临时解决方案`android:layout_height="220dp`（当然，任何高度都可以）。改为使用该`layout_weight`属性也应该有效。

# android - Android：在 CustomDialog 上使用计算器时出错

> ID：15634217
> 
> 赞同：0
> 
> 时间：2013-03-26T10:04:57.217
> 
> 标签：android, dialog, calculator

我已经为一项活动制作了一个计算器，并且效果很好，但是我尝试将此代码用于 customDialog 以显示此计算器，但是当我单击计算器的一个按钮时，应用程序崩溃了。java.lang.IllegalStateException：在活动类中找不到方法 ButtonClickHandler(View)

```
android.view.ContextThemeWrapper for onClick handler on view class android.widget.Button with id 'button5'
03-26 10:47:18.394: E/AndroidRuntime(7696):     at android.view.View$1.onClick(View.java:3685)

03-26 10:47:18.394: E/AndroidRuntime(7696): Caused by: java.lang.NoSuchMethodException: ButtonClickHandler [class android.view.View]
03-26 10:47:18.394: E/AndroidRuntime(7696):     at java.lang.Class.getConstructorOrMethod(Class.java:460) 
```

这是我的代码的一部分以及 CustomDialog 中的代码。

```
 calculadora.setOnClickListener(new View.OnClickListener(){

    boolean clear_screen = true;                                
    boolean operator_state = false ;
    boolean insert_state = false;
    boolean last_click = false;
    float Operand1 = 0f;
    float Operand2 = 0f;
    float Answer = 0f;
    String Operator = ""; 
```

考虑到问题可能出在“ButtonClickHandler”中，我该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:34:01.010

我只是在活动中执行此操作并将活动样式设置为主题/对话框

# hibernate - 在 Hibernate 4 中使用 Hibernate 分片，但为 SessionFactoryImplementor 获取 NoClassDefFoundError

> ID：15634224
> 
> 赞同：1
> 
> 时间：2013-03-26T10:05:26.330
> 
> 标签：hibernate

我正在尝试将 hibernate-shards 与 hibernate 4 一起使用，但我遇到了一个找不到类的错误。当我运行一个尝试写入分片数据库的示例应用程序时，我收到以下异常：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/hibernate/engine/SessionFactoryImplementor
at org.hibernate.shards.ShardedConfiguration.buildSessionFactory(ShardedConfiguration.java:251) 
```

* * *

这是我的 Maven POM 文件中的相关部分：

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-core</artifactId>
    <version>4.0.0.Final</version>
</dependency>

<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-c3p0</artifactId>
    <version>4.0.0.Final</version>
</dependency>

<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>5.1.18</version>
</dependency>

<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-shards</artifactId>
    <version>3.0.0.Beta2</version>
</dependency> 
```

* * *

查看 hibernate-core jar 文件，该类的包似乎与 hibernate-shards 所期望的不同。它现在似乎在一个`spi`目录中。

```
$ jar tvf lib/hibernate-core-4.0.0.Final.jar  | grep SessionFactoryImplementor
   3049 Wed Dec 14 22:47:16 EST 2011 org/hibernate/engine/spi/SessionFactoryImplementor.class 
```

* * *

我发现[了另一个问题，使用 hibernate-shards 和 Spring Framework 的人也有类似的问题](https://stackoverflow.com/q/13072690/1145388)。我没有使用 Spring，所以我认为该问题的解决方案不会对我有用。

* * *

[这个问题的](https://stackoverflow.com/q/6684694/1145388)答案表明，可以使用 hibernate-shards 的分支来处理最新版本的 hibernate，但是该答案中指向分支的链接现在是一个错误。

* * *

我希望从源代码（从 gi​​thub 克隆）编译最新版本的 hibernate-shards 可以解决问题。但是当我使用我这样创建的 hibernate-shards-4.0.0-SNAPSHOT 时，我得到了同样的异常：

```
# Get the hibernate-shards code
git clone https://github.com/hibernate/hibernate-shards.git
cd hibernate-shards

# Install the gradle build system.  The following commands are for Ubuntu
sudo add-apt-repository ppa:cwchien/gradle
sudo apt-get update
sudo apt-get install gradle

# Compile the hibernate-shards project
gradle :jar :javadoc :sourcesJar
jar cf build/libs/hibernate-shards-4.0.0-SNAPSHOT-javadoc.jar -C build/docs/javadoc/ .

# Install hibernate-shards into maven
mvn install:install-file -DgroupId=org.hibernate -DartifactId=hibernate-shards -Dversion=4.0.0-SNAPSHOT -Dpackaging=jar -Dfile=build/libs/hibernate-shards-4.0.0-SNAPSHOT.jar -Djavadoc=build/libs/hibernate-shards-4.0.0-SNAPSHOT-javadoc.jar -Dsources=build/libs/hibernate-shards-4.0.0-SNAPSHOT-sources.jar 
```

如果我查看 gradle 文件，它是针对 Hibernate 3.6.10.Final 构建的，而不是 Hibernate 4。

* * *

在这一点上，休眠分片是否与休眠 4 不兼容？

# android - Android 中 UIAutomator 测试中的 RunTimeException

> ID：15634226
> 
> 赞同：1
> 
> 时间：2013-03-26T10:05:32.993
> 
> 标签：android, exception, android-uiautomator

实际上我是 UIautomator 测试的新手。我做了一个必须测试的课程。谁能告诉我一些步骤如何制作我的 UIAutomator 测试用例类？我有一些错误，比如......

```
java.lang.RuntimeException: Exception during suite construction
at 

android.test.suitebuilder.TestSuiteBuilder$FailedToCreateTests.testSuiteConstructionFailed(TestSuiteBuilder.java:238)
at java.lang.reflect.Method.invokeNative(Native Method)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:190)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:175)
at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:555)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1661)
Caused by: java.lang.reflect.InvocationTargetException
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
at android.test.suitebuilder.TestMethod.instantiateTest(TestMethod.java:87)
at android.test.suitebuilder.TestMethod.createTest(TestMethod.java:73)
at android.test.suitebuilder.TestSuiteBuilder.addTest(TestSuiteBuilder.java:262)
at android.test.suitebuilder.TestSuiteBuilder.build(TestSuiteBuilder.java:184)
at android.test.InstrumentationTestRunner.onCreate(InstrumentationTestRunner.java:379)
at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4382)
at android.app.ActivityThread.access$1300(ActivityThread.java:141)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1294)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:5041)
at java.lang.reflect.Method.invokeNative(Native Method)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.RuntimeException: Stub!
at com.android.uiautomator.testrunner.UiAutomatorTestCase.<init>(UiAutomatorTestCase.java:5)
at com.example.automatorapp.test.Test2.<init>(Test2.java:11)
... 18 more 
```

我的代码是......

```
 package com.example.automatorapp.test;

    import com.android.uiautomator.core.UiObjectNotFoundException;
    import com.android.uiautomator.testrunner.UiAutomatorTestCase;

public class Test2 extends UiAutomatorTestCase 
{

    public Test2()
    {
    super();
    }

    public void testDemo() throws UiObjectNotFoundException
    {

        getUiDevice().pressHome();

    }

} 
```

请有人帮助我？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:19:01.397

正如 nullpointer 已经指出的那样，需要删除构造函数。

这是修改后的代码（我已经编译并成功运行）

```
package com.example.automatoapp.test;

import com.android.uiautomator.core.UiObjectNotFoundException;
import com.android.uiautomator.testrunner.UiAutomatorTestCase;

public class Test2 extends UiAutomatorTestCase 
{
    public void testDemo() throws UiObjectNotFoundException
    {
        getUiDevice().pressHome();
    }
} 
```

对于以下内容，所有命令都是从命令行运行的，而不是在 IDE 中

这是我如何编译并将 UIAutomator 代码推送到设备 `ant clean build && adb push bin/UIAutomatorExample.jar /data/local/tmp/`

以及我如何运行“你的”测试 `adb shell uiautomator runtest UIAutomatorExample.jar -c com.example.automatoapp.test.Test2`

为了完整起见，这里是输出：

```
INSTRUMENTATION_STATUS: current=1
INSTRUMENTATION_STATUS: id=UiAutomatorTestRunner
INSTRUMENTATION_STATUS: class=com.example.automatoapp.test.Test2
INSTRUMENTATION_STATUS: stream=
com.example.automatoapp.test.Test2:
INSTRUMENTATION_STATUS: numtests=1
INSTRUMENTATION_STATUS: test=testDemo
INSTRUMENTATION_STATUS_CODE: 1
INSTRUMENTATION_STATUS: current=1
INSTRUMENTATION_STATUS: id=UiAutomatorTestRunner
INSTRUMENTATION_STATUS: class=com.example.automatoapp.test.Test2
INSTRUMENTATION_STATUS: stream=.
INSTRUMENTATION_STATUS: numtests=1
INSTRUMENTATION_STATUS: test=testDemo
INSTRUMENTATION_STATUS_CODE: 0
INSTRUMENTATION_STATUS: stream=
Test results for WatcherResultPrinter=.
Time: 1.535

OK (1 test)

INSTRUMENTATION_STATUS_CODE: -1 
```

# iphone - 使用活动指示器和标签显示警报（可更改）

> ID：15634236
> 
> 赞同：3
> 
> 时间：2013-03-26T10:05:46.667
> 
> 标签：iphone, ios, objective-c

> 我做了一个游戏，开始显示活动指示器和活动指示器底部显示带有文本的 UiLable 是：- **2秒后****准备好**文本是：-**设置**和 2 秒后文本是：-开始。
> 
>  **现在我使用 3 个不同的警报来显示这个。
> 
> 我可以只用一个警报来做到这一点吗**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:11:32.713

我想你想要这种类型的警报![在此处输入图像描述](../Images/5c9f68c32b4f03bd97f61427ee5e78e9.png)

这样做试试这个

**在 .h 文件中**

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController {
    IBOutlet UILabel *Lable;
    NSTimer *Timer1;
    NSTimer *Timer2;
    UIActivityIndicatorView *Process;
    UIAlertView *Game;
}
-(IBAction)start:(id)sender;

@end 
```

**在 .M 文件中**

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
int i;

- (void)viewDidLoad
{
    [super viewDidLoad];
}
-(IBAction)start:(id)sender
{
    i=0;
    Game=[[UIAlertView alloc]initWithTitle:@"Please Wait" message:@"\n" delegate:self cancelButtonTitle:nil otherButtonTitles: nil];
    Process=[[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    Process.frame=CGRectMake(129, 50, 30, 27);
    [Process startAnimating];

    Lable=[[UILabel alloc]initWithFrame:CGRectMake(102, 80, 80, 30)];
    Lable.text=@"Ready";
    Lable.backgroundColor=[UIColor clearColor];
    Lable.textColor=[UIColor whiteColor];
    Lable.textAlignment= UITextAlignmentCenter;
    [Game addSubview:Lable];
    [Game addSubview:Process];
    [Game show];
    Timer1 = [NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(Change) userInfo:nil repeats:NO];
}
-(void)Change{
    Timer2 = [NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(Change) userInfo:nil repeats:NO];
    if (i==0)
        Lable.text=@"Set";
    else
        Lable.text=@"Go";

    i++;
    if (i==3) {
        [Timer2 invalidate];
        Timer2=nil; 
        [Process stopAnimating];
        [Game dismissWithClickedButtonIndex:0 animated:YES];

    }
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:15:46.040

下载 SVProgressHUD。这将在 2-3 行代码中为您解决。它工作得很好（它可能没有可更改的消息。如果是这样，请尝试下面的 MBProgressHUD）

[https://github.com/samvermette/SVProgressHUD](https://github.com/samvermette/SVProgressHUD)

还有一个 MBprogressHUD 可以让你在进程的中途更改消息，但我发现它会在应用程序中引起一些小问题。

[https://github.com/jdg/MBProgressHUD](https://github.com/jdg/MBProgressHUD)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T10:12:14.583

```
UIAlertView *processview;
UILabel *lbl;
NSTimer *enableTimer;
int count;

- (void)enableTimerFired:(NSTimer *)timer
{
    switch (count)
    {
        case 1:
            [lbl setText:@"Ready"];
        break;

        case 2:
            [lbl setText:@"Set"];
        break;

        case 3:
            [lbl setText:@"Go"];
        break;

        case 4:
            [enableTimer invalidate];
            enableTimer = nil;
            [processview dismissWithClickedButtonIndex:-1 animated:YES];
        break;

        default:
        break;

    }
    count++;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    processview =  [[UIAlertView alloc] initWithTitle:@"\n" message:@"\n\n" delegate:self cancelButtonTitle:nil otherButtonTitles: nil] ;

    lbl = [[UILabel alloc] initWithFrame:CGRectMake(100, 10, 90, 30)];
    [lbl setText:@"Ready"];
    [lbl setBackgroundColor:[UIColor clearColor]];
    [lbl setTextColor:[UIColor whiteColor]];
    [lbl setTextAlignment:NSTextAlignmentCenter];
    [processview addSubview:lbl];

    UIActivityIndicatorView *largeActivity = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    [largeActivity setFrame:CGRectMake(120, 75, 50, 50)];
    [largeActivity startAnimating];

    [processview addSubview:largeActivity];
    [processview show];

    enableTimer = [[NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(enableTimerFired:) userInfo:nil repeats:YES] retain];
    count = 1;
} 
```**

# iphone - 使用 setAdjustsFontSizeToFitWidth 的动态字体大小不起作用

> ID：15634244
> 
> 赞同：1
> 
> 时间：2013-03-26T10:06:19.320
> 
> 标签：iphone, ios, objective-c, uifont

我有一个`label`包含在一个`UIView`. 边界设置与 the 相同`UIView`，因此`label`应该始终与 is 一样大`view`。

```
self.label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
[self.label setText:@"3"];
[self.label setTextColor:[[UIColor blackColor] colorWithAlphaComponent:0.2f]];
[self.label setFont:[UIFont fontWithName:@"Futura-CondensedExtraBold" size:400]];
[self.label setBackgroundColor:[UIColor clearColor]];
[self.label setTextAlignment:NSTextAlignmentCenter];

[self.label setNumberOfLines:1];
[self.label setMinimumScaleFactor:0.1];
[self.label setAdjustsFontSizeToFitWidth:YES];

[self addSubview:self.label]; 
```

如您所见，我将 400 设置`font size`为 400，这太大了，想用`setMinimumScaleFactor`. 但这对我不起作用。有什么建议么…？

# controller - 一个控制器可以在没有 URL 重定向的情况下分派给 Kohana 中的其他控制器？

> ID：15634245
> 
> 赞同：2
> 
> 时间：2013-03-26T10:06:19.600
> 
> 标签：controller, kohana, routes

我正在编写一个很棒的 Kohana 框架上的 CMS，管理员用户可以在其中选择后端几种页面，并将它们添加到具有完全自定义 URL 的菜单中。

```
Example of custom URL : "mmmm/about" or "aaa/bbb/release" 
```

我有一个数据库表，其中存储了每个 URL 应该显示的内容：

```
Example : 
URL : mmm/about     Pagekind : Content page ; (Page) Id : 7
URL : aaa/release   Pagekind : News         ; (News) Id : 1 
```

每个页面类型都有自己的控制器（因此它会更干净、更易于管理、更容易添加新页面类型）：

```
Examples :
>>> In /application/classes/Controller/Pages :
class Controller_Pages() extends Controller_Template { 
    public function action_index(){
        ...
    }
}
>>> In /application/classes/Controller/News :
class Controller_News() extends Controller_Template { 
    public function action_index(){
        ...
    }
} 
```

我有这样一条路线，可以将所有内容发送到我的菜单控制器：

```
Route::set( 'menu_path', '(<menupath>)', array('menupath' => '.*?') )
->defaults(
    array(
        'controller' => 'menu',
        'action' => 'dispatch'
    )
); 
```

我的菜单控制器应该进行调度：

```
>>> In /application/classes/Controller/Menu :
class Controller_Menu() extends Controller_Template 
{ 
    public function action_dispatch()
    {

        // Get the path :
        $menupath = $this->request->param('menupath');

        // Get page info
        $obj = ORM::factory('tablemenu')->where('URL','=',$menupath)->find();

        // Regarding to page kind, call the appropriate controller
        switch ($obj->Pagekind)
        {
           case 'Content page' : 
              // Call controller Page with $obj->Id as page id
              // ???????? 
              // ???????? 
              break;

           case 'News' : 
              // Call controller News with $obj->Id as news id
              // ???????? 
              // ???????? 
              break;

        }

    }
} 
```

所以我被困在呼叫控制器部分。我的问题是：
- 有没有办法在控制器中调用控制器？（没有针对 SEO 的重定向）
- 如果是，它是否干净？可靠的 ？
- 还有其他方法吗？喜欢覆盖 Route 类？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T14:03:07.877

你在这里有两个选择，我想说两者都可以被认为是干净和可靠的。

## 1\. 内部请求

Kohana 允许进行[内部调用](http://kohanaframework.org/3.3/guide/kohana/requests#internal-requests)，因此您无需进行任何重定向即可实现您正在寻找的内容。

```
class Controller_Menu() extends Controller_Template 
{ 
    public function action_dispatch()
    {
        // Get the path :
        $menupath = $this->request->param('menupath');

        // Get page info
        $obj = ORM::factory('tablemenu')->where('URL','=',$menupath)->find();

        // Regarding to page kind, call the appropriate controller
        switch ($obj->Pagekind)
        {
            case 'Content page' : 
                $url = 'pages/action/' . $obj->Id;
                break;

            case 'News' : 
                $url = 'news/action/' . $obj->Id;
                break;
        }

        // Override current response
        $this->response = Request::factory($url)->execute();
    }
} 
```

请注意，这只是向您展示它如何工作的快速尝试（并且它本身可能不会）。请注意`action`url 的一部分，您需要在某个时候定义它以使其正常工作。不过，重要的是您实际上有一条路线来匹配您在此处内部执行的请求。您还需要想出一个解决方案来解决如何不让这些内部请求通过“menu_path”路由。但既然你还没有尝试过任何东西，我会让你玩它，如果你自己想办法。:)

## 2\. 路由过滤器（推荐）

*我假设您在此项目中使用的是 Kohana **3.3.x**，因为路由过滤器仅在此版本中可用。*

[您可以在Route Filter](http://kohanaframework.org/3.3/guide/kohana/routing#route-filters)中处理请求，而不是将所有请求路由到菜单控制器。

您的路线可能如下所示：

```
Route::set('menu_path', '(<menupath>)',
    array(
        'menupath' => '.*?')
    )
    ->filter(function($route, $params, $request)
    {
        $menupath = $params['menupath'];

        // Get page info
        $obj = ORM::factory('tablemenu')->where('URL','=',$menupath)->find();

        if ($obj->loaded())
        {
            // Regarding to page kind, call the appropriate controller
            switch ($obj->Pagekind)
            {
                case 'Content page' : 
                    $params['controller'] = 'Page';
                    $params['id'] = $obj->Id;
                    break;

                case 'News' : 
                    $params['controller'] = 'News';
                    $params['id'] = $obj->Id;
                    break;
            }

            return $params;
        }

        return FALSE;
    })
    ->defaults(array(
        'action'    => 'index',
    )); 
```

请注意，这里不需要定义默认控制器，因为如果找不到页面，您希望返回 404 错误。不过，我们确实想定义一个默认操作，因为我在您的示例中的任何地方都看不到它定义。

您可能需要考虑使用`Pagekind`与控制器名称匹配的值，然后您不需要`case`为每种类型使用一个，您可以简单地使用：

```
if ($obj->loaded())
{
    $params['controller'] = $obj->Pagekind;
    $params['id'] = $obj->Id;

    return $params;
} 
```

由于 Route 过滤器中的这种复杂性（不仅仅是几行），我还建议将其作为单独的回调函数保留在外部（正如@Daan 在下面的评论中所建议的那样），例如：

```
Route::set('menu_path', '(<menupath>)',
    array(
        'menupath' => '.*?')
    )
    ->filter('MyRouteHelper::myfilter')
    ->defaults(array(
        'action'    => 'index',
    )); 
```

* * *

希望这可以帮助 ：）

# java - JavaFX：将参数从 JavaScript 传递到 JNLP

> ID：15634247
> 
> 赞同：3
> 
> 时间：2013-03-26T10:06:27.137
> 
> 标签：java, javascript, jnlp, argument-passing

我正在尝试使用 Java Web start（由 NetBeans 生成）部署 JavaFX 2 应用程序，我需要使用 JavaScript 将一些参数传递给我的应用程序。

第一个问题：有可能吗？第二个问题：如果可能，我该怎么做。:-)

我的 JNLP 文件是：

```
<?xml version="1.0" encoding="utf-8"?>
<jnlp spec="1.0" xmlns:jfx="http://javafx.com" href="MD.jnlp">
  <information>
    <title>MD</title>
    <offline-allowed/>
  </information>
  <resources>
    <jfx:javafx-runtime version="2.2+" href="http://javadl.sun.com/webapps/download/GetFile/javafx-latest/windows-i586/javafx2.jnlp"/>
  </resources>
  <resources>
    <j2se version="1.6+" href="http://java.sun.com/products/autodl/j2se"/>
    <jar href="MD.jar" size="675286" download="eager" />
    <jar href="lib/log4j-1.2.17.jar" size="519899" download="eager" />
  </resources>
<security>
  <all-permissions/>
</security>

  <applet-desc  width="800" height="600" main-class="com.javafx.main.NoJavaFXFallback"  name="MD" >
    <param name="requiredFXVersion" value="2.2+"/>
  </applet-desc>
  <jfx:javafx-desc  width="800" height="600" main-class="com.blabla.MD"  name="MD" >
    <fx:param name="jmeno" value="hodnota"/>
  </jfx:javafx-desc>
  <update check="always"/>
</jnlp> 
```

我的网页有这个代码：

```
<SCRIPT src="./web-files/dtjava.js"></SCRIPT>
<script>
function launchApplication(jnlpfile) {
    dtjava.launch(            {
            url : 'MD.jnlp',
        },
        {
            javafx : '2.2+'
        },
        {}
    );
    return false;
}
</script> 
```

谢谢。:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T17:47:01.700

解决了：

```
function launchApplication(jnlpfile) {
            dtjava.launch({
                url: 'MD.jnlp',
                params: {'name':'value'}
            },
            {
                javafx: '2.2+'
            },
            {}
            );
            return false;
        } 
```

在 JavaFX 应用程序中，参数不在 String[] args 中，但您必须使用方法：

```
getParameters(); 
```

这[在 Java 部署工具包 (dtjava.js)](http://docs.oracle.com/javafx/2/deployment/deployment_toolkit.htm#BABDJDEC)以及 JavaFX 应用程序[getParameters](http://docs.oracle.com/javafx/2/api/javafx/application/Application.html#getParameters%28%29)方法 JavaDoc 的 JavaFX 部署指南文档中进行了记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:28:16.083

> 第一个问题：有可能吗？

是的，一般来说是可以的。我做过类似的事情，但不是直接从 JavaScript 到 JNLP。

> 第二个问题：如果可能，我该怎么做。:-)

在我的场景中，我只完成了 JNLP 部分而不是 JS。但是这样想：用户通过社交网络之一登录网页（涉及 JS）。JS 和 Ajax 将所需的值传递到服务器端并将用户重定向到部署 JNLP 小程序的页面。

在服务器端有一个 jnlp 文件模板：

```
<fx:param name="jmeno" value="{value}"/> 
```

然后由于服务器通过 Ajax 获得了一个值，它可以使用 PHP 或 JSP 生成正确的 jnlp 文件并将其提供给用户的浏览器。

# javascript - Highcharts：如何设置数据分组

> ID：15634251
> 
> 赞同：7
> 
> 时间：2013-03-26T10:06:32.950
> 
> 标签：javascript, jquery, highcharts, highstock

我有一个包含大量数据的 highstock 图表，我能够定义如何对数据进行分组，但我希望用户指定要使用的数据分组并在日、周、月等之间动态更改。

那么是否有可能有一个按钮，用户可以通过该按钮更改数据的分组方式，如果可以的话如何？

有许多未记录的功能，例如 currentDataGrouping，但没有什么可以设置数据分组......我可以看到任何方式......

```
series: [{
                type: 'column',
                name: title,
                data: data,
                dataGrouping: {
                    units: [['week', [1]], ['month', [1]]]
                }
        }] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T10:13:20.607

API 有一种更新系列的方法（[http://api.highcharts.com/highcharts#Series.update()](http://api.highcharts.com/highcharts#Series.update())）。例如

```
chart.series[0].update({ type: 'spline' }); 
```

您应该能够使用此 API 调用来修改任何系列属性。

例如，您可以定义两个系列对象，并在单击按钮时更新图表以使用您想要的对象：

```
var seriesWeek = {
            type: 'column',
            name: title,
            data: data,
            dataGrouping: {
                units: [ ['week', [1] ] ]
            }
    }

var seriesMonth = {
            type: 'column',
            name: title,
            data: data,
            dataGrouping: {
                units: [ ['month', [1] ] ]
            }
    }

chart.series[0].update(seriesWeek); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-19T16:06:25.103

我总是只有一个时间序列，所以这种方法对我有用（无需手动更新每个时间序列）：

```
self.myChart = new window.Highcharts.stockChart(pChartDivContainer, {
        title: {
            text: 'My title'
        },
        rangeSelector: {
            enabled: true
        },
        plotOptions: {
            series: {

                dataGrouping: {
                    approximation: 'ohlc',
                    units: [
                        ["minute", [1]]
                    ],
                    forced: true,
                    enabled: true,
                    groupAll: true
                }

            }
        }
    }, function (chart) {
        self.onChartReady();
    }); 
```

之后很容易改变单位：

```
self.setCandleInterval = function (pUnit, pInterval) {
    self.myChart.update({
        plotOptions: {
            series: {
                dataGrouping: {
                    units: [
                        [pUnit, [pInterval]]
                    ]
                }
            }
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-10T08:01:24.623

我们围绕这个尝试了一个 Hack，我们使用了 Highstock 的（Splinechart）[RangeSelector](http://api.highcharts.com/highstock#rangeSelector)、 Event 和[DataGrouping](http://api.highcharts.com/highstock#plotOptions.area.dataGrouping)。单击每周 rangeselectorButton 时，我们通过[setExtremes](http://api.highcharts.com/highstock#xAxis.events.setExtremes)捕获此事件。捕获事件后将其近似为“总和”。如果您使用两个系列而不是迭代对象。

```
 events: {
         setExtremes: function (e) {
             if (e.rangeSelectorButton != undefined) {
                 var triger = e.rangeSelectorButton;
                 if (triger.type == 'week') {
                     $.each(this.series, function (index, obj) {
                         obj.options.dataGrouping.units[0] = ['week', [1]];
                     });
                 } else if (triger.type == 'day') {
                     $.each(this.series, function (index, obj) {
                         obj.options.dataGrouping.units[0] = ['day', [1]];
                     });
                 }
             }
         }
     }, 
```

@[小提琴](http://jsfiddle.net/imsinu9/e34eyouu/)

# ruby-on-rails-3 - 带有关注/取消关注按钮的用户列表

> ID：15634259
> 
> 赞同：0
> 
> 时间：2013-03-26T10:06:47.733
> 
> 标签：ruby-on-rails-3

我有一个，当我登录时`Users list`，我需要为每个用户放置按钮。`follow/unfollow`

还有一些其他地方我想使用相同的方法来关注主题/组等。所以我认为最好写一个关联以避免每次我需要这些按钮时进行额外的查询。

我的`user_followings`表结构

```
| id | user_id | recipient_id | 
| 1  | 1       | 2            | 
| 2  | 3       | 2            | 
| 3  | 10      | 3            | 
```

所以这里 id=1 的用户跟随用户 => 2 ...

所以基本上有`has_many`关联类型，因为用户正在关注许多其他用户。但是我想出了一个添加`has_one`关联类型的想法，我将在其中添加一个附加条件`recipient_id=current_user.id`，因此只剩下一条记录并显示以下状态。

如果我成功做到这一点`association`，将非常容易通过`user.following.nil?`查看查看以下状态，而无需额外的查询、缓存等。

我之前在我的 CakePHP 应用程序中做过一次，SQL 查询如下所示：

```
ON (`UserFollowing`.`recipient_id` = `User`.`id` AND `UserFollowing`.`user_id` = 1) 
```

但是 CakePHP 允许动态绑定关系，所以我将 session 中的 current_user.id 直接添加到关联条件中。

我不能在 Rails 中这样做，因为我不能放入`current_user.id`模型来描述条件：

```
user.rb
has_one :following, :class_name => 'UserFollowing', :conditions => {:user_id => current_user.id} 
```

方法 Nb。2

也许我可以使用 解决这个问题`:through`，但我找不到任何示例来`users`从我进行关联的同一张表中获取结果。

方法 Nb。3

是否使用范围[Rails 3 设计， current_user 在模型中不可访问？](https://stackoverflow.com/questions/3742785/rails-3-devise-current-user-is-not-accessible-in-a-model)

不确定，哪种方式最好...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:59:55.407

好吧，我找到了使用范围执行此操作的方法：

```
 # user.rb
  scope :with_relations, lambda { |current_user_id|
    has_one :user_following, :foreign_key => 'recipient_id', :conditions => {:user_id => current_user_id}
    where(:status => 1)
  }

  # users_controller.rb
  @users = User.with_relations(current_user.id).limit(30).order('last_action desc') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:35:08.900

关于这个问题，请阅读第 11 章。为 AZ 阅读有关构建类似 twitter 的应用程序的整本书。

[Ruby On Rails 教程](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T18:36:14.757

虽然这不是您问题的直接答案：考虑 gem: [acts_as_follower](https://github.com/tcocca/acts_as_follower)。我将它用于类似的情况，它似乎符合您的需求。可以让任何东西跟随其他任何东西 - 看看......

# java - 将 BeanClass 注入在 JBOSS 7.1 中持续运行的 ServletContextListener

> ID：15634264
> 
> 赞同：3
> 
> 时间：2013-03-26T10:06:54.407
> 
> 标签：java, jpa, jboss, ejb, jboss7.x

我有一个 ServletContextListener 在我的 JBOSS 7.1 服务器启动时运行。这实质上是在一个文件夹上监听并等待新文件，并在当前等待新的 excel 文件并重命名它们。

**爪哇**

```
public class StagedFolderListener implements ServletContextListener {

    @Inject
    TableDao tableDao;

@Inject
ImportDatabase import;

public void contextInitialized(ServletContextEvent e) {
    System.out.println("Listener starting...");
    Timer timer = new Timer();
    timer.schedule(new TimerTask() {

        @Override
        public void run() 
        {
            ProcessData();
        }
    }, 0, 10000);

}

public void contextDestroyed(ServletContextEvent e) {
    System.out.println("Listener destroyed...");
}

public void ProcessData() {

    String myDirectoryPath = "/home/myStoredFolder";

    File dir = new File(myDirectoryPath);
    for (File child : dir.listFiles()) {
        String extension = "";

        int j = child.getName().lastIndexOf('.');
        if (j > 0) {
            extension = child.getName().substring(j + 1);
        }

        if (fileIsOktoBeImported) {

            // Import the file into the database

                            import.loadDatabase();              

            // Rename the file after processing
        }

        else

        {
            System.out.println("No processing required on file "
                    + child.getName());
        }
    }

} 
```

}

另外，我有另一个类，它读取 excel 文件并通过 JPA 和实体管理器将数据保存到数据库中。这本身就可以正常工作（我将它链接到 GUI 并可以从那里导入）但我需要在我的 ServletContextListener 中调用 loadDatabase() 方法来导入新的 excel 文件。我试图注入将 ImportDatabase 导入 ServletContextListener 并调用 loadDatabase() 方法，但是当 EntityManager 持久保存到数据库时，我得到一个空指针异常。

**爪哇**

```
@Stateful
@LocalBean
public class ImportDatabase implements TableDao{
@Inject
private EntityManager em;   
Row row = null;
FileInputStream inp;
Workbook wb;

public void loadDatabase()
{

 Load data into the Database via JPA

} 
```

更新 Java 以包含 EntityManager 生产者

**爪哇**

```
@Stateful
@RequestScoped
public class Resources{

    @PersistenceContext(type = PersistenceContextType.EXTENDED)
    private EntityManager em;

    @Produces
    public EntityManager getEm() {
        return em;
    }
} 
```

在 ServetContextListener 中调用我的 loadDatabase() 方法的最佳方法是什么？

非常感谢任何帮助，

**更新**

我现在在将 ImportDatabase 类注入 servletContextLIsener 时遇到错误

**错误**

1:15:06,447 错误 [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/mast]]（MSC 服务线程 1-1）配置类 com 的应用程序侦听器时出错。 ericsson.listener.StagedFolderListener：java.lang.IllegalStateException：JBAS011048：无法在 org.jboss.as.ee.component.BasicComponent.constructComponentInstance 构造组件实例（BasicComponent.java:163）[jboss-as-ee-7.1.1 .Final.jar:7.1.1.Final] 在 org.jboss.as.ee.component.BasicComponent.createInstance(BasicComponent.java:85) [jboss-as-ee-7.1.1.Final.jar:7.1.1 .Final] 在 org.jboss.as.web.deployment.component.WebComponentInstantiator$1.(WebComponentInstantiator.java:57) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]

显然我在这里做错了什么......只是不确定是什么，非常感谢任何帮助！

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T11:22:46.450

`@EJB`尝试使用注释将您的 DAO 注入侦听器：

```
@EJB ImportDatabase importDatabase; 
```

此外，您不需要同时注入`TableDAO`and `ImportDatabase`，选择一个或另一个。最后，您当前的生产者是请求范围的，这将阻止它在 servlet 侦听器的上下文中解析（初始化侦听器时请求范围不会处于活动状态）。我建议删除它的范围。

# ios - 如何通过 xcode 点赞 Facebook 页面？

> ID：15634273
> 
> 赞同：-1
> 
> 时间：2013-03-26T10:07:12.613
> 
> 标签：ios, facebook-ios-sdk

我想喜欢 Facebook 上的一个页面（例如[https://www.facebook.com/pages/iPhone/109336685751749?fref=ts](https://www.facebook.com/pages/iPhone/109336685751749?fref=ts)）。

这是 Facebook 上的 iPhone 页面。

我怎样才能通过 xCode 做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:25:18.613

从这里下载示例：[https ://github.com/brow/FacebookLikeView](https://github.com/brow/FacebookLikeView)

然后添加到您的应用程序中。当您对样本的主要类别进行微小更改时，它会喜欢您的链接。

# android - 如何从android Webview调用外部java脚本函数

> ID：15634277
> 
> 赞同：1
> 
> 时间：2013-03-26T10:07:19.863
> 
> 标签：android, android-webview

我在 android webview 中加载了一个 HTML 页面。HTML 页面包含 3 个按钮返回、继续和下一步。

我想获取 Buttons 的点击事件并调用外部 java 脚本文件函数。在不实现 JavaScript 接口和调用 JS 函数的情况下捕获按钮事件的任何方式。

我搜索 Stackoverflow，但我无法获得可以解决我的问题的答案。

# mongodb - Mongo 休息界面

> ID：15634280
> 
> 赞同：1
> 
> 时间：2013-03-26T10:07:20.790
> 
> 标签：mongodb, rest

Mongo Rest 接口是否支持排序查询​​？

```
http://localhost:28017/udc/ProvisionStateEntity/ 
```

上述调用将获取最旧的记录。

如何获取最新记录？

# jquery - JQuery - 排序 div 的问题

> ID：15634285
> 
> 赞同：0
> 
> 时间：2013-03-26T10:07:41.520
> 
> 标签：jquery, jquery-ui-sortable, droppable

我对 JQuery 完全陌生，基本上对整个 Web 开发也很陌生。我正在尝试将一些 div（+ 它们的内容）从左侧 div（#selection）拖动到右侧 div（#drop），然后使它们在“#drop”div 中可排序。我已经完成了拖动部分，但是即使我已经实现了必要的代码，它们也无法在“#drop”div 中排序。

源代码：

html结构：

```
 <body class="doc">
    <div id="header">Business Entry</div>
    <div id="content">
      <div id="selection">
        <div id="dragTelNr" class="draggableElement">
          Telephone Number
        </div>
        <div id="address" class="draggableElement">
          Address
        </div>
      </div>
      <div id="drop">

      </div>
      <div class="clear"></div>
    </div>
  </body> 
```

js：

```
$(document).ready(function () {

  $.fn.exists = function () {
    return this.length !== 0;
  }

  var ids = new Array();
  ids[0] = 1;
  ids[1] = 1;

  var nextSibling;
  var draggableOptions = { opacity: 0.6, revert: true, containment: '#content', zIndex: 100};

  $('.draggableElement').draggable({opacity: 0.6, revert: true, containment: '#content', zIndex: 100,
    start: function(event, ui){
      //nextSibling = ui.helper.next();
    }
  });

  $('#drop').droppable({
    hoverClass: '.dropHover',
    accept: '.draggableElement',
    activate: function(event, ui){
      nextSibling = ui.draggable.next();    
    },
    drop: function(event, ui){

      var draggable = ui.draggable;

      if (draggable.parent().attr('id') != 'drop'){

        var draggableId = draggable.attr('id');

        if (nextSibling.exists() == false){
          $( '<div id = "' + draggableId + '" class="draggableElement"></div>' ).html( ui.draggable.html()).draggable(draggableOptions).appendTo('#selection');
          alert("Insert at the end " + nextSibling);  
        }
        else{
          $( '<div id = "' + draggableId + '" class="draggableElement"></div>' ).html( ui.draggable.html()).draggable(draggableOptions).insertBefore(nextSibling);
            alert("Insert before " + nextSibling); 
        }

        switch(draggableId){
          case 'dragTelNr':
            alert(draggable.attr('id'));
            draggable.attr('id', draggableId + ids[0]).appendTo($(this));
            alert(draggable.attr('id'));
            ids[0]++;
            break;

          case 'address':
            alert(draggable.attr('id'));
            draggable.attr('id', draggableId + ids[1]).appendTo($(this));
            alert(draggable.attr('id')); 
            ids[1]++;
            break;     
        }
      }  
    }

  }); 

  $('#drop').sortable();
  //$('#drop').dissableSelection();
}); 
```

CSS：

```
.doc  {
  margin:auto; /* center in viewport */
  width: 1000px; /* fix page width */
}

#header {
    height: 80px;
    width: 990px;
    background:#efefef;
    border: 1px solic black;
    text-align: center; 
    font: bold 180% arial;
    padding: 1em;
}

#selection { 
  width: 300px; 
  height: 500px; 
  border: 1px solid black; 
  float: left; 
  background-color: #D3D3D3;
  text-align:center;
}

#drop { 
  width: 670px; 
  height: 500px; 
  border: 1px solid black; 
  float: left;
  text-align: center;
}

.clear { 
  clear: both;
} 

#content {
  width: 990px; 
  height: 500px;     
}

.draggableElement {
  line-height: 1.286;
  margin-top: 1.286em;
  margin-bottom: 1.286em;
  border: 2px solid black;

}

.dropHover{
  border: 3px solid black;
} 
```

顺便说一下，库已经正确导入，所以问题不存在。如果有人对如何使其工作有一些建议，我将不胜感激。

这是我的源代码的链接：http: [//jsfiddle.net/Bt23y/](http://jsfiddle.net/Bt23y/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T10:21:41.140

我清理了你的小提琴以专注于重要的事情：

[http://jsfiddle.net/Bt23y/1/](http://jsfiddle.net/Bt23y/1/)

如果您希望能够将项目从一个列表拖到另一个列表中，使其可排序，您可以使用`connectWith`jqueryUI`sortable`

```
<ul id="selection">
    <li>Item1</li>        
    <li>Item2</li>
</ul>
<ul id="drop"></ul> 
```

```
$('#drop').sortable({connectWith: $('#selection')});
$('#selection').sortable({connectWith: $('#drop')}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:16:19.820

“通过将选择器传递给 connectWith 选项，将项目从一个列表排序到另一个列表，反之亦然。最简单的方法是使用 CSS 类对所有相关列表进行分组，然后将该类传递给可排序函数（即，连接：'.myclass'）。”

```
 $('.sortableContainer).sortable({
       ...
       connectWith: ".sortableContainer",
       ...
    }) 
```

演示[http://jqueryui.com/sortable/#connect-lists](http://jqueryui.com/sortable/#connect-lists)

# php - 从 xml 文件中删除名称空间并另存为新的 XML

> ID：15634291
> 
> 赞同：0
> 
> 时间：2013-03-26T10:07:54.790
> 
> 标签：php, xml, namespaces

这是我获取 XML 文件的链接：- [XML LINK](http://services.gisgraphy.com/geoloc/search?lat=13o6&lng=80o12&radius=7000)

这是我的代码：-

```
<?php
function convertNodeValueChars($node) {
    if ($node->hasChildNodes()) {
      foreach ($node->childNodes as $childNode) {
        if ($childNode->nodeType == XML_TEXT_NODE) {
          $childNode->nodeValue = iconv('utf-8', 'ascii//TRANSLIT', $childNode->nodeValue);
        }
        convertNodeValueChars($childNode);         
      }
    }      
  } 

  $doc = new DOMDocument();
  $doc->load('http://services.gisgraphy.com/geoloc/search?lat=13o6&lng=80o12&radius=7000');
  convertNodeValueChars($doc->documentElement);
  $doc->save('general.xml');  
?> 
```

1) 我尝试将 ASCII 字符删除为普通字符
2) 想要删除包含名称空间的 XML 文件的名称空间`<results xmlns="http://gisgraphy.com">`
3) 想要另存为另一个 XML 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:17:07.020

首先在简单的 php 文件上创建以从 URL 加载 xml：-

```
<?php
$dom = new DOMDocument();
$dom->load('http://services.gisgraphy.com/geoloc/search?lat=22.298569900000000000&lng=70.794301799999970000&radius=7000', true);
$dom->save('filename.xml');
?> 
```

然后创建一个 XSLT 文件：-

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"><xsl:output method="xml" version="1.0" encoding="UTF-8" />
        <xsl:template match="*">
                <xsl:element name="{local-name()}">
                        <xsl:apply-templates select="@* | node()"/>
                </xsl:element>
        </xsl:template>
</xsl:stylesheet> 
```

并创建一个 php 文件来加载 xml 文件并实现我们的 xslt 文件：-

```
<?php
$sourcedoc->load('filename.xml');
    $stylesheet = new DOMDocument();
    $stylesheet->load('new4convert.xsl');
     // create a new XSLT processor and load the stylesheet
    $xsltprocessor = new XSLTProcessor();
    $xsltprocessor->importStylesheet($stylesheet);

    // save the new xml file
    file_put_contents('filename.xml', $xsltprocessor->transformToXML($sourcedoc));
?> 
```

如果您想在一个 PHP 文件中使用最终总代码：-

```
<?php
$dom = new DOMDocument();
$dom->load('http://services.gisgraphy.com/geoloc/search?lat=22.298569900000000000&lng=70.794301799999970000&radius=7000', true);
$dom->save('filename.xml');
$sourcedoc = new DOMDocument();
    $sourcedoc->load('filename.xml');
    $stylesheet = new DOMDocument();
    $stylesheet->load('new4convert.xsl');
     // create a new XSLT processor and load the stylesheet
    $xsltprocessor = new XSLTProcessor();
    $xsltprocessor->importStylesheet($stylesheet);

    // save the new xml file
    file_put_contents('filename.xml', $xsltprocessor->transformToXML($sourcedoc));
?> 
```

# javascript - notification.alert Phonegap 中的 Html 标签

> ID：15634293
> 
> 赞同：1
> 
> 时间：2013-03-26T10:08:03.267
> 
> 标签：javascript, html, cordova, notifications

我在 phonegap 中有一个使用 notification.alert 的警报。它工作正常。我现在想要的是如何在其消息中提供 HTML 内容。像这样的东西

```
navigator.notification.alert(
     "Call the Help Desk for assistance at: <a href="#">1(800)309-0136</a>", 
      function() { }, 
     "Having trouble signing in?"
); 
```

这样当用户点击电话号码时，我就可以拨打该号码。我尝试了上面的代码，它只是将标签显示为文本。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:19:19.210

我认为您不能在通知警报正文中使用 html。

相反，您可以使用`navigator.notification.confirm`来拨打电话。像这样：

```
function onConfirm(button) {
    if(button == 'Call') {
        document.location.href = 'tel:1(800)309-0136';  //make the call
    }
}

navigator.notification.confirm(
    'Having trouble signing in?',                                            //title
    'Do you want to call the Help Desk for assistance at 1(800)309-0136?',   //message
     onConfirm,                                                              //callback
    'Call,Exit'                                                              //buttonNames
); 
```

# android - 从网络提供商处获取准确的当前位置

> ID：15634294
> 
> 赞同：6
> 
> 时间：2013-03-26T10:08:04.400
> 
> 标签：android, currentlocation

我在我的应用程序中使用以下代码从网络提供商获取当前位置：

```
LocationManager mgr = (LocationManager) getSystemService(LOCATION_SERVICE);
boolean network_enabled = mgr.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
if(network_enabled){
Location location = mgr.getLastKnownLocation(LocationManager.NETWORK_PROVIDER); 
```

但它给出的位置距离我的实际位置大约 300-700 米。

**这是网络提供商所期望的。但问题是：**

> 在仅启用此网络提供商且没有 GPS 的情况下，我打开了 Foursquare 应用程序，它可以准确地显示我当前的位置。现在，当我回到我的应用程序时，它会显示准确的当前位置，或者说与 Foursquare 显示的位置相同。

同样的事情也发生在像导航器、地图等谷歌应用程序上，

如何才能做到这一点？仅基于网络提供商，其他应用程序如何能够获得确切的位置？

**完整代码：**

```
public class MyLocationActivity extends Activity implements LocationListener {
    private LocationManager mgr;
    private String best;
    Location location;
    public static double myLocationLatitude;
    public static double myLocationLongitude;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mgr = (LocationManager) getSystemService(LOCATION_SERVICE);
        Criteria criteria = new Criteria();
        best = mgr.getBestProvider(criteria, true);
        location = mgr.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        dumpLocation(location);
    }

    public void onLocationChanged(Location location) {

        dumpLocation(location);
    }

    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

    @Override
    protected void onPause() {

        super.onPause();
        mgr.removeUpdates(this);
    }

    @Override
    protected void onResume() {

        super.onResume();
        mgr.requestLocationUpdates(best, 15000, 10, this);
    }

    private void dumpLocation(Location l) {

        if (l != null){

            myLocationLatitude = l.getLatitude();
            myLocationLongitude = l.getLongitude();
        }
    }
} 
```

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T10:18:36.953

你得到的只是最后一个已知的位置。您应该从`LocationManager`. 使用[`LocationManager.getLocationUpdates`](http://developer.android.com/reference/android/location/LocationManager.html).

在您[`LocationListener`](http://developer.android.com/reference/android/location/LocationListener.html)的`onLocationChanged(Location location)`方法上，您可以检查[`Location`](http://developer.android.com/reference/android/location/Location.html)对象，该位置的准确程度，如下所示：

```
float accuracy=location.getAccuracy(); 
```

然后，如果这`Location`对您来说足够准确，您可以停止从`LocationManager`using接收位置更新[`removeUpdates()`](http://developer.android.com/reference/android/location/LocationManager.html#removeUpdates%28android.location.LocationListener%29)，并使用收到的`Location`. 如果`Location`不够准确，您可以等待更精确的`Location`，然后停止更新。

# wordpress - Wordpress MU 的特定子站点的自定义 php 文件

> ID：15634296
> 
> 赞同：-1
> 
> 时间：2013-03-26T10:08:14.977
> 
> 标签：wordpress

我想在我的 Wordpress 多站点网络的一个子站点上拥有一个自定义 php 文件。

例如：child3.mydomain.com/somecustomfile.php

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:13:51.783

这可能不是您要寻找的，但这就是我用来解决此问题的方法：

在特定的子站点中，使用您的任何名称创建页面（但请记住页面 slug！）。在主题中，创建一个名为[page-slug.php](https://codex.wordpress.org/images/1/18/Template_Hierarchy.png)的文件（将 slug 替换为您刚刚创建的页面的 slug）。现在可以在您刚刚创建的页面的 URL 下访问该文件。

# c# - 将响应字符串分配给 C# 中用于智能手机的 webbrowser 控件

> ID：15634304
> 
> 赞同：0
> 
> 时间：2013-03-26T10:08:31.683
> 
> 标签：c#, string, request, browser, response

```
HttpWebRequest myHttpWebRequest1 = (HttpWebRequest)WebRequest.Create("http://www.google.de");
HttpWebResponse myHttpWebResponse1 =(HttpWebResponse)myHttpWebRequest1.GetResponse();
using (Stream stream = myHttpWebResponse1.GetResponseStream())
                {
                    // Get the response stream  
                    StreamReader reader = new StreamReader(stream, Encoding.UTF8);

                    // Read the response into a string 
                    _responseString = reader.ReadToEnd();

                    webBrowser1.DocumentText = _responseString;          
                }

webBrowser1.DocumentText = _responseString; 
```

嘿！在这段代码中，我发送了一个请求，并得到了响应。我将响应读入一个字符串，然后将此字符串分配给 webbrowser 控件。如果我保存响应字符串，我会得到完全相同的站点，但是当我将它分配给 webbrowser 控件时，它看起来会有所不同。

有没有办法将字符串分配给网络浏览器，并显示相同的站点，就像在保存的文件中一样？

# c# - C# SQLite 数据库连接 WPF 崩溃

> ID：15634309
> 
> 赞同：-1
> 
> 时间：2013-03-26T10:08:36.327
> 
> 标签：c#, wpf, sqlite

大家好，希望有人可以帮助我。

我编写了一个小型 WPF 应用程序，它读取 SQL 数据库的密码并将其显示在屏幕上供用户使用。它在 SQL DB 上运行良好，但我们已更改为使用 SQLite，虽然它在我的机器上运行良好（我已经编写了程序）但是当我将 .exe 文件提供给用户时，程序会在它们上崩溃，因为当他们单击 OpenFileDiaglog() 的按钮时（这样用户就可以选择数据库来检索密码）

经过一些试验和错误（注释掉部分代码），当它到达这一行时，它似乎会崩溃。

```
 SQLiteConnection Dbcon = new SQLiteConnection("Data Source= " + Myfile); 
```

但是在机器上的事件查看器中，我尝试运行程序时出现错误是

> 说明：进程因未处理的异常而终止异常信息：System.IO.FileNotFoundException

我尝试在几台不同的机器（vista、xp、win 7）上使用 .exe 文件，所有这些机器上都安装了 .net framework 4.0。

就像我说的那样，只有当它被移动时，我的机器上的所有工作才会出现错误。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:11:53.370

因为你必须在用户机器上调整你的数据库路径，所以在部署时你的数据源上有错误的路径

```
Data Source= Path of your databse 
```

我建议你这个代码

```
"Data Source=" + System.IO.Path.Combine(System.IO.Path. GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase), YourFile) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-21T14:24:47.800

同样的问题，但这并没有为我解决。对我来说，问题是我的主要应用程序位于 .net 4 中，而 sql lite dll 是 .net 2，因此将`useLegacyV2RuntimeActivationPolicy="true"`其作为属性添加到 app.config 中的启动标记。

# string - 将字符串存储在 TObject 类型的属性中的最轻量级方法是什么？

> ID：15634315
> 
> 赞同：0
> 
> 时间：2013-03-26T10:08:46.527
> 
> 标签：string, delphi, delphi-xe2, boxing

情况：

`TDataSet`我从应该保留 id 作为参考的视觉组件创建。组件只能存储对象，不能存储字符串。

伪代码：

```
for Record in DataSet do
  AddComponent.Data := Record['id'] 
```

where`Data`是类型`TObject`，`id`字段是字符串类型（实际上是 GUID）。

问题：

如何在对象属性中存储字符串？

我尝试过使用自定义类型的拳击解决方案`TBox<string>`，但我想避免内存管理问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:18:23.807

如果类型`Data`是，`TObject`那么您将无法避免内存管理问题。编译器不会`TObject`为您管理实例的生命周期。您将不得不使用标准生命周期管理机制之一：

1.  您可以使用 try/finally 块来处理它，并显式调用`Free`.
2.  您从中派生出您的对象，`TComponent`并让它由保证比对您包装的字符串的所有引用寿命更长的东西拥有。

选项 2 有许多变体。其他移交所有权的方法包括使用接口。只要所有者比对该对象的所有引用都长，那么您就是安全的。

我个人不太喜欢选项 2。如果编译器不打算管理我的对象的生命周期，我更愿意自己管理它。我发现如果我使用显式管理，那么更容易推断我的对象何时结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:17:10.290

> 如何在对象属性中存储字符串？

为什么 ？

出色地，

1.  `sizeof(TObject) = sizeof(Pointer)`
2.  `String`是 ref-counted 类型，所以你要么使用`StringRec`cracker 类型并管理所有内在函数，要么使用 compielr 内置计数器。我会尝试第二种方法，尽管它不太有效并且增加了额外的间接级别。

.

```
type StringContainer = record Data: String; end;
     PStringContainer = ^StringContainer;

var p: PStringContainer;

for Record in DataSet do begin
  New(P);
  P^.Data := Record['id'];
  Pointer(AddComponent.Data) := P;
end; 
```

`Dispose(...)`当您不再需要组件中的这些指针时，不要忘记调用。

```
procedure TMyComponent.BeforeDestruction;
var P: PStringContainer;
begin
    P := Pointer(Data);
    Data := nil;
    Dispose(P); // should free the string, since P type was given
    inherited; 
end; 
```

> 我想避免内存管理问题。

究竟是哪一类问题，在程序的哪一部分？

# java - 如何在 Eclipse 中的函数或类的右键菜单中添加命令？

> ID：15634318
> 
> 赞同：2
> 
> 时间：2013-03-26T10:08:52.577
> 
> 标签：java, eclipse, plugins, plugin.xml

这是一种新手问题。所有教程都展示了一种将命令添加到`iFile`对象类的方法。你能给我看一个`plugin.xml`为函数或类注册命令的文件的例子吗？

我想要实现的是在大纲视图或代码本身中右键单击类或函数名称，并在上下文菜单中使用我的新命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T11:23:34.630

关键是要正确使用**visibleWhen**部分。这是一个显示在 Project Explorer 中的命令示例，该命令仅在选择 Java 方法或类时可见：

```
 <menuContribution
        locationURI="popup:org.eclipse.ui.navigator.ProjectExplorer#PopupMenu">
     <command
           commandId="__your.command.id__"
           id="your.contribution.id"
           label="Some Label"
           style="push">
        <visibleWhen
              checkEnabled="false">
           <iterate
                 ifEmpty="false"
                 operator="and">
              <or>
                 <instanceof
                       value="org.eclipse.jdt.core.IType">
                 </instanceof>
                 <instanceof
                       value="org.eclipse.jdt.core.IMethod">
                 </instanceof>
              </or>
           </iterate>
        </visibleWhen>
     </command>
  </menuContribution> 
```

不要忘记将 commandId 设置为真实的东西。

[您可以在此处](http://wiki.eclipse.org/Command_Core_Expressions)找到有关属性和选择测试的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T11:02:32.287

根据[此处](http://wiki.eclipse.org/Menu_Contributions/IFile_objectContribution)的示例，您需要将`objectClass`方法更改为 IMethod 或将类更改为 IType。

PS：

为了查看代表的对象类型，您可以使用 Plugin SelectionSpy 菜单。选择一个对象并单击`Ctrl``Shift`+ `F1`。

# git - 如何在最新版本中链接来自 drupalcode.org git 存储库的单个文件？

> ID：15634320
> 
> 赞同：1
> 
> 时间：2013-03-26T10:08:57.500
> 
> 标签：git, drupal, hyperlink, makefile

您可以像这样链接到 commerce_kickstart 的 drush make 文件：

[http://drupalcode.org/project/commerce_kickstart.git/blob_plain/2abeb052d6cb4afb2450bc4b01bbbc011dbeeb0d:/commerce_kickstart.make](http://drupalcode.org/project/commerce_kickstart.git/blob_plain/2abeb052d6cb4afb2450bc4b01bbbc011dbeeb0d:/commerce_kickstart.make)

例如，此链接为您提供 Tue Mar 26 09:15:43 2013 GMT 的版本，来自 [http://drupalcode.org/project/commerce_kickstart.git](http://drupalcode.org/project/commerce_kickstart.git)

有没有办法生成始终指向最新版本文件的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T22:10:16.303

使用 HEAD 而不是特定的提交。

[http://drupalcode.org/project/commerce_kickstart.git/blob_plain/HEAD:/commerce_kickstart.make](http://drupalcode.org/project/commerce_kickstart.git/blob_plain/HEAD:/commerce_kickstart.make)

# c - 在 ubuntu 12.04 上制作 openwsman 时出错

> ID：15634322
> 
> 赞同：3
> 
> 时间：2013-03-26T10:09:04.313
> 
> 标签：c, linux, linker-errors, building, openwsman

我正在尝试在 Ubunutu 12.04 上构建 openwsman（昨天从官网下载的 2.3.0）。我按照 README.md 中的说明进行操作，在安装了几个附加软件包后，我终于得到了`cmake ..`成功的命令。

但是，当我运行时`make`，出现以下错误：

```
Linking C executable test_list
../libwsman_curl_client_transport.so.1.0.0: undefined reference to `X509_digest'
../libwsman_curl_client_transport.so.1.0.0: undefined reference to `SSL_CTX_set_cert_verify_callback'
../libwsman_curl_client_transport.so.1.0.0: undefined reference to `SSL_CTX_set_verify'
../libwsman_curl_client_transport.so.1.0.0: undefined reference to `EVP_sha1'
collect2: ld returned 1 exit status
make[2]: *** [src/lib/test/test_list] Error 1
make[1]: *** [src/lib/test/CMakeFiles/test_list.dir/all] Error 2 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T07:55:17.430

I have finally been able to resolve this issue. It turns out I needed to change a CMakeLists file in the openwsman library.

What I needed to change are the libraries linked with `libwsman_curl_client_transport`. To fix the issue open the file `src/lib/CMakeLists.txt`(assuming you are located in openwsman base directory) and change the line that looks like:

```
TARGET_LINK_LIBRARIES( wsman_curl_client_transport ${CURL_LIBRARIES}) 
```

To

```
TARGET_LINK_LIBRARIES( wsman_curl_client_transport ${CURL_LIBRARIES} ssl crypto) 
```

In the openwsman distribution I have downloaded(openwsman2.3.0) this is line 53 of the file described.

In what I do here is I tell the given library to be linked with crypto and ssl too and this resolves the linker errors.

Hope this answer helps someone to resolve this issue way faster than I did.

# java - 使用原始套接字发送 HTTP 响应，客户端没有收到消息

> ID：15634331
> 
> 赞同：2
> 
> 时间：2013-03-26T10:09:47.960
> 
> 标签：java

我正在尝试将此消息实体正文发送给客户端。但是，这个消息似乎没有被传送。导致这种情况的可能原因是什么？字符串消息

```
String message = "HTTP/1.0 404 Not Found\r\n" +
                  "Server: " + 
                 "Content-type: html" +
                 "error\r\n" +
                 "<HTML>" +
                 "<HEAD><TITLE>404</TITLE></HEAD>" +
                 "<BODY>404 Not Found" +
                 "<br> nothing </BODY></HTML>" ; 
```

然后，我使用 PrintStream instace 发送消息，它的参数是`message.getBytes()`

在浏览器上看不到 html 消息。

```
 PrintStream sender = new PrintStream(this.socket.getOutputStream());

  String message = // above lines

  sender.write(message.getBytes()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:41:35.370

假设您通过原始套接字发送此数据，您需要修复以下问题：

*   每个标题后都需要一个 CRLF（回车，换行）。
*   标头字段中不应包含“：”字符。
*   `Content-type`应该是`Content-Type`，并且没有命名的标准标题`error`（除非那是您发送的自定义标题，否则将其删除）。
*   `html`不是有效的内容类型，请尝试`text/html`.

# c# - MVC 回发，向模型列表中添加行并重绘表单

> ID：15634337
> 
> 赞同：2
> 
> 时间：2013-03-26T10:10:10.973
> 
> 标签：c#, asp.net-mvc, postback

我有一个模型，其中包含一个订单和订单行。用户可以提交表单，在回发中我们会进行一些行拆分并重建模型和行。问题是隐藏字段根据列表中的索引获取值（看过一些关于此的帖子）

一些代码：

```
Orderview to display the rows:
@Html.EditorFor(r => r.Rows) 
```

OrderRowModel 的编辑器

```
@Model.ItemNo @Html.HiddenFor(r => r.Id) @Html.HiddenFor(r => r.RowNumber) 
```

控制器中更新的伪代码

```
foreach(var r in model.Rows)
{
  if(qty>0) { 
    string errormsg = UpdateRow(r);
    if(!string.IsNullOrEmpty(errormsg))
       ErrorMsgList.Add(r.RowNo, errormsg);
  }
}
var reloadedModel = ReloadOrderAndRows(model.OrderNo);
foreach(var r in reloadedModel.Rows)
{
   if(HasError(r.RowNo, ErrorMsgList))
     r.Error = GetError(r.RowNo, ErrorMsgList);
}
return View(reloadedModel); 
```

**示例** 我有一个包含 3 行 (10,20,30) 的订单，用户使用 qty 更新第 20 行并进行回发。我保存了该行，但根据一些业务数据，该行将分为第 20 行和第 21 行在模型中我重新加载整个模型并将其发送到视图视图现在显示 4 行（10、20、21、30）但是21 的隐藏框的 id 为 30（因为 30 之前在列表位置 2 上）。所有数据字段 qty 和 display 字段都是正确的，它是隐藏字段（即使我将其更改为 editorfor 函数）获得了错误的值。

因此，如果再次提交表单，我将更新错误的行。

那么，为什么我在回发后不重定向到原始视图呢？如果更新失败，我会在重新加载的 RowModel 上设置一些数据。如果我进行重定向，我将丢失在行级别设置的所有详细信息。

我需要以某种方式在与行号相关的输入字段上指定唯一 ID，或者让 mvc 忘记它是回发的结果。我看到重新加载的模型具有正确的值。就像有一个视图状态设置了我的值。

**还不能回答我自己的问题，所以我在编辑中回答 **

好的，所以是 ModelState 保存了这些值。如果我只是为 RowNo 做了一个输出，我得到了正确的值，但输入是由模型状态更新的。所以我现在所做的是在返回视图之前调用 ModelState.Clear() 。

我能想到的唯一损失是，如果出错，数量将不会被保存，我可以通过在控制器中为模型设置值来解决这个问题。

```
ModelState.Clear() 
```

# vb.net - 项目拖动上的 MDI 打开选项卡

> ID：15634341
> 
> 赞同：0
> 
> 时间：2013-03-26T10:10:15.227
> 
> 标签：vb.net, mdi, mdichild

所以我在打开标签到我想拖动一些数据的地方时遇到了一些麻烦。

我有 2 个子 MDI 表单，都有一个列表视图。我想将 listviewitem 从 mdichild 1 拖到 mdichild 2。

问题是当我将数据拖动到相应的 MDI 选项卡时，我无法找到可以显示第二个表单的正确事件。

现在，当我将数据拖到 MDI 选项卡时，我得到的唯一东西是带有条纹的标准黑色圆圈。

关于如何打开标签的任何想法？

感谢所有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:56:50.747

没有代码很难判断问题出在哪里，但它可以像这样简单吗？

```
Private Sub MDIChildForm_DragEnter(sender As System.Object, e As _
              System.Windows.Forms.DragEventArgs) Handles MyBase.DragEnter
    Me.Activate()
    Me.WindowState = FormWindowState.Normal
End Sub 
```

当您拖动它时，这将取消最小化并激活子窗体。这是假设您的“选项卡”是最小化的 MDI 子窗体...

# java - 在先前方法中实例化的对象上调用方法 (Java)

> ID：15634345
> 
> 赞同：0
> 
> 时间：2013-03-26T10:10:31.660
> 
> 标签：java, object, methods

简单地说，我有以下代码：

```
public void dance()
{
CartoonFigure dancer = new CartoonFigure("rico", 300, 300);
danceStepTwo();
danceStepOne();
}

public void danceStepOne()
{
    dancer.turnLeft();
}

public void danceStepTwo()
{
   dancer.turnLeft();
} 
```

但是在舞者对象上调用这些方法会给我一个编译错误“找不到符号 - 变量舞者。” 我该如何解决这个问题，以便我可以从 danceStepOne() 调用舞者对象的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T10:12:20.517

将 dancer 定义为实例变量，以便它对这两种方法都可用。否则将其实例传递给这两种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:17:12.533

由于“danceStepOne”和“danceStepTwo”没有“dancer”对象，无法识别，编译失败。

为此，任何解决方案都可以

1.  将其作为变量传递给方法
2.  将“dancer”声明为全局变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T10:12:08.340

声明`dancer`为字段变量。将它（在顶部）与范围声明一起放在任何方法之外，例如`private CartoonFigure dancer`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T10:12:31.803

您必须将其设为`dancer`全局，并且此错误是由于它仅对方法可见，因此`dance()`将其设为实例字段，如下所示。

```
private CartoonFigure dancer; 
```

初始化它可以在构造函数中完成，如下所示

```
dancer = new CartoonFigure("rico", 300, 300); 
```

# c++ - c ++ Qt：从dll中捕获段错误

> ID：15634346
> 
> 赞同：0
> 
> 时间：2013-03-26T10:10:38.820
> 
> 标签：c++, qt, dll, segmentation-fault, qlibrary

我正在使用 QLibrary 加载外部 dll。在某些情况下，dll 只是崩溃（段错误）。DLL 不会引发异常。处理这个问题的最佳方法是什么？我读到我需要在单独的进程/线程中运行。这是唯一的选择吗？

干杯，米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:41:25.993

不幸的是，您无法对段错误做任何事情，您可以尝试在单独的线程中运行崩溃代码，但这有可能导致您的应用程序中的资源泄漏或大量不一致的状态。

如果 .dll 是您的，我建议您尝试修复段错误，如果它没有将其报告为错误并尝试解决它。

# java - 以下方法的时间复杂度

> ID：15634348
> 
> 赞同：0
> 
> 时间：2013-03-26T10:10:41.733
> 
> 标签：java, time-complexity

我正在尝试确定以下方法的时间复杂度。一开始我有三个 for 循环，它们会产生 m^3。我不知道如何确定，方法结束时递归调用的时间复杂度是多少。

有人可以帮我弄这个吗？

```
void p(int n, int m) {
    int i,j,k ;
    if (n > 0) {
        for (i=0 ; i < m ; i++)
            for (j=0 ; j < m ; j++)
                for (k=0 ; k < m ; k++)
                    System.out.println(i+j*k) ;  
        p(n/m, m) ;
    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:16:14.553

正如您所提到的，O(m^3) 是在没有额外回避的情况下执行的。

总时间只是这一步的时间的乘积。

对于 n = m^(k-1) 是执行 k 次的步骤，因此它有 O(k*m^3)，即 O(ln(n)*m^3)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T22:46:36.983

遵循以下步骤将允许您以正式的方式推断时间复杂度：

![在此处输入图像描述](../Images/35be030e7bf45008435abf5d2dcac855.png)

# command-line - 命令行：在带有空格的子文件夹中创建文件夹

> ID：15634351
> 
> 赞同：0
> 
> 时间：2013-03-26T10:10:46.803
> 
> 标签：command-line, batch-file, cmd

对于一个项目，我收到了 700 个带有机构名称的文件夹（包含空格）。现在的目的是在每个文件夹中创建子文件夹。

[机构文件夹]\Documents\ [机构文件夹]\Images\ [机构文件夹]\Videos\

根据这里的一些帖子，下面的脚本应该可以创建 Documents 文件夹

```
FOR /d %A IN (C:\Users\myname\project\institutions\*) DO mkdir %A\Documents 
```

但是，我在从命令行获得的反馈中注意到，该指令在文件夹名称中的空格处失败。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T11:25:23.303

```
FOR /d %A IN (C:\Users\myname\project\institutions\*) DO mkdir "%A"\Documents 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T10:12:10.943

确保将包含空格的表达式包装`"`为确保 shell 将它们视为单个实体。

# php - joomla 垃圾邮件程序错误

> ID：15634352
> 
> 赞同：1
> 
> 时间：2013-03-26T10:10:49.583
> 
> 标签：php, joomla, joomla2.5

在 joomla 2.5 中使用 widgetkit 地图（yootheme 的外部组件），joomla 检测我何时插入电子邮件地址并给我这个错误

> 此电子邮件地址已受到防止垃圾邮件机器人的保护。您需要启用 JavaScript 才能查看它。

Javascript 显然是启用的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:15:33.317

你有`Content - Email Cloaking`激活插件吗？禁用它，一切都应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-02T07:58:50.783

您可以通过三种方式解决此问题。

*   电子邮件伪装插件禁用。

*   使用自定义模块准备内容时禁用。

*   使用占位符解决特定文章的问题。

有关[Joomla 垃圾邮件程序错误的更多信息](http://www.walkswithme.net/this-email-address-is-being-protected-from-spambots-in-joomla)

希望它可以帮助某人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T12:31:43.187

如果您是程序员或网页设计师，您应该使用您选择的工具查找任何 JavaScript 错误消息，这将帮助您识别问题。

有几个可能的原因。这是其中的两个：

1.  有时，内容插件会干扰另一个插件的标签或输出。显然，电子邮件斗篷插件被正确调用和执行（因此消息），但显示电子邮件地址的 JavaScript 似乎已损坏。您可以尝试重新排序插件，以便在所有第 3 方（即，不是默认的 Joomla）插件之后执行电子邮件斗篷插件。

2.  未加载 JavaScript 库。这通常与模板一起发生。要检查这一点，请将您的安装切换到标准模板（例如 Beez2）。如果问题消失，请更正您的模板。

# sinatra - Sinatra 和“控制器”行为

> ID：15634364
> 
> 赞同：0
> 
> 时间：2013-03-26T10:11:19.293
> 
> 标签：sinatra, rack

Box 中的 Sinatra 不允许单独提交文件吗？像这样：

```
index.php
  get '/' and other

user.php
 get '/user/show/'
 post '/user/new/' and other 
```

如何说 sinatra 使用 user.php 处理 '/user/*' 请求，使用 index.php 处理 '/'。以及如何在一个用 sinatra 编写的文件中发布多个帖子的应用程序？（一个大屁股？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:48:24.203

经过大量阅读，存在一些解决方案：

1.

```
class Get < Sinatra::Base
 get('/') { 'GET!' }
end
class Post < Sinatra::Base
 post('/') { 'POST!' }
end

class Routes < Sinatra::Base
 get('/') { Get.call(env) }
 post('/') { Post.call(env) }
end

run Routes 
```

2.

```
class Foo < Sinatra::Base
 get('/foo') { 'foo' }
end

class Bar < Sinatra::Base
 get('/bar') { 'bar' }
end

Routes = Rack::Mount::RouteSet.new do |set|
 set.add_route Foo, :path_info => %r{^/foo$}
 set.add_route Bar, :path_info => %r{^/bar$}
end

run Routes 
```

# sql - 多列上的 VB.net LINQ 过滤器

> ID：15634366
> 
> 赞同：0
> 
> 时间：2013-03-26T10:11:23.550
> 
> 标签：sql, vb.net, linq, search, filter

嗨，你能告诉我在 LINQ 中实现多列过滤的最佳方法吗

桌子：

```
CREATE TABLE [dbo].[user] (
[id] [int] IDENTITY(1,1) NOT NULL,
[firstName] [nvarchar](50) NULL,
[surname] [nvarchar](50) NULL,
[fullAddress] [nvarchar](1050) NULL 
```

我通常会为此使用 SQL

```
Dim firstname as string = 'bob'
Dim surname as String = 'holdness'
Dim address as String = 'blockbuster street'
Dim Stmquery as string = 'Select * from users '
if not String.isnullorEmpty(firstname) or not String.isnullorEmpty(surname) or not String.isnullorEmpty(address) then 
Stmquery = Stmquery & "where"
end if
if not String.isnullorEmpty(firstname) then
Stmquery = Stmquery & " firstname = " & firstname
end if
    if not String.isnullorEmpty(surname) then
Stmquery = Stmquery & " surname = " & surname
end if
    if not String.isnullorEmpty(address) then
Stmquery = Stmquery & " address = " & address
end if 
```

所以基本上如果字符串为空，它将显示该列的所有记录

有人可以告诉我如何在 LINQ 中执行此操作

谢谢保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:15:07.263

我假设您已经准备好 LINQ to SQL DBContext 并`Users`映射了表。

您可以轻松地扩展您的查询，因为它不会在您调用`ToList()`, `ToArray()`, `First()`,`Last()`等之前对数据库执行。

```
Dim query = dbContext.Users;

If Not String.IsNullOrEmpty(firstname) Then
    query = query.Where(Function(u) u.FirstName = firstname)
End If

If Not String.IsNullOrEmpty(surname) Then
    query = query.Where(Function(u) u.Surname = surname)
End If

If Not String.IsNullOrEmpty(address) Then
    query = query.Where(Function(u) u.Address = address)
End If

' query execution is here, after next line '
Dim results = query.ToList() 
```

# python - 制作 Python 脚本的独立 .exe 文件

> ID：15634367
> 
> 赞同：1
> 
> 时间：2013-03-26T10:11:25.413
> 
> 标签：python, exe, py2exe, pyinstaller

我有一个 python 脚本，其中包含：

```
tempBook = temp.Workbooks.Open("c:\users\CNAME\desktop\Template.xlsx") 
```

一切正常，但是当我创建脚本的 .exe 时，Template.xlsx 不包含在其“构建”文件夹中，它需要 Template.xlsx 出现在桌面上。我想做一个可移植的exe。

有什么方法可以将它包含在构建中，并制作一个没有任何依赖关系的独立 exe？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T10:14:52.440

您需要将文件移动到您的包中，并将其列在您的`setup.py`：

```
setup(
    # ...
    data_files = [('', ['Tempate.xlsx',])],
) 
```

请参阅 的[`data_files`文档](http://www.py2exe.org/index.cgi/data_files)，`py2exe`其中包括用于自动添加数据文件的实用程序功能。

这些文件将添加到您的应用程序根目录中。从您的主脚本中，您可以使用以下方法确定您的应用根目录：

```
import os

try:
    approot = os.path.dirname(os.path.abspath(__file__))
except NameError:  # We are the main py2exe script, not a module
    import sys
    approot = os.path.dirname(os.path.abspath(sys.argv[0])) 
```

# javascript - 在服务器上使用节点嵌合体

> ID：15634371
> 
> 赞同：-1
> 
> 时间：2013-03-26T10:11:40.147
> 
> 标签：javascript, node.js, phantomjs

我使用node-chimera（类似于phantomjs）编写了一个测试脚本。它有一个服务器接口，该接口有一些依赖于节点嵌合体输出的处理。如果一切正常，测试将返回“DONE”。现在一切正常。但是，当我对多个并发用户尝试此操作时，代码似乎永远加载并且从未返回任何内容。我做错了什么？

代码： [https ://gist.github.com/zybler/5244301](https://gist.github.com/zybler/5244301)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:50:32.797

原来你只需要在 c.perform 块内移动 chimera 的声明。

# jquery - pjax 不起作用

> ID：15634373
> 
> 赞同：0
> 
> 时间：2013-03-26T10:11:41.810
> 
> 标签：jquery, history.js, pjax

我对 pjax 有问题。

[我在https://github.com/defunkt/jquery-pjax](https://github.com/defunkt/jquery-pjax)下载了最新的 pjax

然后我编码为演示，但它不起作用。main.html

```
<!DOCTYPE html>
<html>
<head>
    <title>main.html</title>
    <script type="text/javascript" src="../js/jquery/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="../js/jquery/plugin/jquery.pjax.js"></script>
    <script>
        $(function(){
            $(window.document).pjax('a', '#pjax-container')
        });
    </script>
</head>
<body>
    <h1>My Site</h1>
    <div class="container" id="pjax-container">
        Go to <a href="MyHtml.html">next page</a>.
    </div>
</body>
</html> 
```

和 MyHtml.html 如下

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>MyHtml.html</title>
  </head>
  <body>
    This is my HTML page. <br>
  </body>
</html> 
```

当我点击链接时，它直接转发到 MyHtml.html。我的代码有问题吗？

我可以确定 pjax 已经工作了，当我单击 main.html 的后退按钮时，它会返回到我在 main.html 之前使用的另一个页面。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T22:49:55.003

由于您使用的是静态 HTML 页面，因此您将需要该`fragment`选项。您的 pjax 配置应该是：

```
$(function() {
    $(document).pjax('a', '#pjax-container', { 
        fragment: '#pjax-container', 
        timeout: 3000 
    });
}); 
```

此外，您的所有页面都需要具有相似的标记，只有内容`#pjax-container`不同。的内容`#pjax-container`应该是页面之间唯一改变的东西。您的`MyHtml.html`页面可能应该是：

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>MyHtml.html</title>
    <script type="text/javascript" src="../js/jquery/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="../js/jquery/plugin/jquery.pjax.js"></script>
    <script>
    $(function() {
      $(document).pjax('a', '#pjax-container', { 
        fragment: '#pjax-container', 
        timeout: 3000 
      });
    });
    </script>
  </head>
  <body>
    <h1>My Site</h1>
    <div id="pjax-container">
      This is my HTML page. <br />
      Go to the <a href="main.html">main page</a>
    </div>
  </body>
</html> 
```

# php - Jquery/Javascript/PHP：用两位小数显示每个数字

> ID：15634379
> 
> 赞同：-1
> 
> 时间：2013-03-26T10:12:05.833
> 
> 标签：php, javascript, jquery, numbers, decimal

我有一个（希望）快速而简短的问题。我试图找到一个 Javascript、Jquery 或 PHP 函数，它允许我用两位小数显示网页上的每个数字。基本上，0 应该是 0.00，1.5 应该是 1.50，1.54 应该保持 1.54。

但是，我在 stackoverflow 上找到的大多数函数，比如[这个](https://stackoverflow.com/questions/4483540/php-show-a-number-to-2-decimal-places)，似乎都需要我手动输入每个数字（并且不适用于整数）。有没有办法可以将函数应用于类？理想情况下，我正在寻找一个函数，该函数 (1) 适用于同一类中的所有数字，并且 (2) 以两位小数显示这些数字中的每一个，甚至是整数。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:20:39.690

对于 PHP，你有`number_format($whateverNumber,2)`或 sprintf，或者甚至只是简单地类型转换为 float 可能会在给定数据的情况下工作；在 javascript/jquery 中你可以使用`toFixed(2)`；

在 jquery 中你可以做类似的事情

```
$(function(){
    $(".yourClass").each(function(){
        var number = parseFloat($(this).html());
        number = isNaN(number)?0:number;
        $(this).html(number.toFixed(2));
    });
}) 
```

# c# - 我想在我的 Win-phone 应用程序中打开 Youtube URL

> ID：15634380
> 
> 赞同：2
> 
> 时间：2013-03-26T10:12:08.263
> 
> 标签：c#, youtube, windows-phone

我有 Youtube 链接，我想在我的 Windows 手机应用程序中打开该视频我尝试了 MediaElement，但它没有播放 FLV 内容，这是我的替代品，任何人都可以帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:16:59.707

尝试这样的事情：

```
WebBrowserTask wbTask= new WebBrowserTask();
wbTask.Uri = new Uri("http://www.youtube.com/../....");
wbTask.Show(); 
```

也可以参考这个问题>>

[Windows Phone 8 中的 Youtube URL](https://stackoverflow.com/questions/14670120/youtube-url-in-windows-phone-8)

希望它有帮助。

# ios - UIScrollView 以编程方式添加按钮和滚动

> ID：15634383
> 
> 赞同：1
> 
> 时间：2013-03-26T10:12:12.340
> 
> 标签：ios, objective-c, uiscrollview

我是 ios 和 Objective-C 的新手。请对我有点耐心。

我正在尝试开发的应用程序中的功能是一个小型滚动工具栏，其中包含多个按钮、状态切换按钮。工具栏上方还有另一个按钮，可以滑入和滑出工具栏。我成功实现的第二个功能是使用一个视图进行整个设置，并且当滑动按钮触摸事件使整个视图上下动画时。

对于滚动视图，我想以编程方式添加按钮，因此我为类绘制了一个出口并尝试添加一个自创按钮作为子视图。但是我看不到按钮。我也无法观察到滚动视图的滑动。

以下是我添加按钮的方式：此外，上述功能的总视图比总视图控制器的大小要小得多

```
UIButton *button = [[UIButton alloc] init];

button.titleLabel.text = @"hello";

[_scrollTop setContentSize:self.view.frame.size];

[_scrollTop addSubview:button]; 
```

我希望下面的两张图片可以帮助您理解我正在尝试开发的功能。如果有人知道存在类似功能，请直接告诉我。

![关闭](../Images/ed3949ebb3041aca79d08b4412095d43.png)

![打开](../Images/01a1f640ffe7b1c25952a9c3c7df6fd4.png)

**编辑：代码完全是**

```
 //
//  HCILocationViewController.m
//  app2
//
//  Created by Ravi Vooda on 13/03/13.
//  Copyright (c) 2013 housing.co.in. All rights reserved.
//

#import "HCILocationViewController.h"
#import "HCIAnnotationViewController.h"

@interface HCILocationViewController ()

@property int widMap;
@property BOOL showExploreOptions;

@end

@implementation HCILocationViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    _mapLocationView.delegate = self;
    MKPointAnnotation *annotation = [[HCIAnnotationViewController alloc]
                                     initwithHouse:[self singleHome]];
    [_mapLocationView addAnnotation:annotation];
    _widMap = 10000;

    _showExploreOptions = NO;

    /*
     UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [button addTarget:self
               action:@selector(aMethod:)
     forControlEvents:UIControlEventTouchDown];
    [button setTitle:@"Show View" forState:UIControlStateNormal];
    button.frame = CGRectMake(80.0, 210.0, 160.0, 40.0);//give values whatever you want.
    [_scrollTop addSubview:button];
    */
    [self addButtonsToScrollView];

}

- (void)addButtonsToScrollView
{
    NSInteger buttonCount = 4;

    CGRect buttonFrame = CGRectMake(5.0f, 5.0f, self.scrollTop.frame.size.width-10.0f, 40.0f);

    for (int index = 0; index <buttonCount; index++) {
        UIButton *button = [[UIButton alloc]initWithFrame:buttonFrame];
        [button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
        [button setTag:index+1];

        NSString *title = [NSString stringWithFormat:@"Button %d",index+1];
        [button setTitle:title forState:UIControlStateNormal];

        [self.scrollTop addSubview:button];
        buttonFrame.origin.y+=buttonFrame.size.height+5.0f;
    }

    CGSize contentSize = self.scrollTop.frame.size;
    contentSize.height = buttonFrame.origin.y;
    [self.scrollTop setContentSize:contentSize];

}

- (void)buttonPressed:(UIButton *)button
{
    NSLog(@"button pressed");

    switch (button.tag) {
        case 1:
            //Do something
            break;

        default:
            break;
    }
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(MKAnnotationView*) mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation {
    NSString *identifier = @"currDetailsIdentifier";
    MKPinAnnotationView *annotationView = (MKPinAnnotationView *)[_mapLocationView dequeueReusableAnnotationViewWithIdentifier:identifier];

    if (annotationView == nil) {
        annotationView = [[MKPinAnnotationView alloc]
                          initWithAnnotation:annotation
                          reuseIdentifier:identifier];
    } else {
        annotationView.annotation = annotation;
    }

    annotationView.enabled = YES;
    annotationView.canShowCallout = YES;
    return annotationView;
}

-(void) mapViewDidFinishLoadingMap:(MKMapView *)mapView
{

    MKMapRect zoomRect = MKMapRectNull;
    for (id <MKAnnotation> annotation in mapView.annotations) {
        MKMapPoint annotationPoint = MKMapPointForCoordinate(annotation.coordinate);
        MKMapRect pointRect = MKMapRectMake(
                                            annotationPoint.x - (_widMap / 2),
                                            annotationPoint.y - (_widMap/2),
                                            _widMap,
                                            _widMap);
        if (MKMapRectIsNull(zoomRect)) {
            zoomRect = pointRect;
        } else {
            zoomRect = MKMapRectUnion(zoomRect, pointRect);
        }
    }
    [mapView setVisibleMapRect:zoomRect animated:YES];
}

-(void) setMyHouse:(NSDictionary *)singleHouse {
    self.singleHome = singleHouse;
}

- (IBAction)toggleExploreOptionsView:(UIButton *)sender {

    sender.selected = !sender.selected;

    if (_showExploreOptions){
        NSLog(@"Close Options");
        [UIView animateWithDuration:0.2 animations:^{
            _exploreView.frame = CGRectMake(_exploreView.frame.origin.x, _exploreView.frame.origin.y + _exploreOptionsView.frame.size.height, _exploreView.frame.size.width, _exploreView.frame.size.height + _exploreOptionsView.frame.size.height);
        }];
    }
    else {
        NSLog(@"Open Options");
        [UIView animateWithDuration:0.2 animations:^{
            _exploreView.frame = CGRectMake(_exploreView.frame.origin.x, _exploreView.frame.origin.y - _exploreOptionsView.frame.size.height, _exploreView.frame.size.width, _exploreView.frame.size.height - _exploreOptionsView.frame.size.height);
        }];
    }
    _showExploreOptions = !_showExploreOptions;
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:51:48.670

如果我正确理解了您的问题，您需要查看应该在按钮单击事件上显示和折叠的视图。当视图显示时，它应该有一个可滚动的按钮列表。而且您正在寻求帮助以向滚动视图显示许多按钮。

[演示源代码](http://dl.dropbox.com/u/35012982/Demo%20Projects/TestScrollView.zip)

```
- (void)addButtonsToScrollView
{
    NSInteger buttonCount = 5;

    CGRect buttonFrame = CGRectMake(5.0f, 5.0f, self.scrollTop.frame.size.width-10.0f, 40.0f);

    for (int index = 0; index <buttonCount; index++) {
        UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        [button setFrame:buttonFrame];
        [button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
        [button setTag:index+1];

        NSString *title = [NSString stringWithFormat:@"Button %d",index+1];
        [button setTitle:title forState:UIControlStateNormal];

        [self.scrollTop addSubview:button];
        buttonFrame.origin.y+=buttonFrame.size.height+5.0f;
    }

    CGSize contentSize = self.scrollTop.frame.size;
    contentSize.height = buttonFrame.origin.y;
    [self.scrollTop setContentSize:contentSize];

}

- (void)buttonPressed:(UIButton *)button
{
    switch (button.tag) {
        case 1:
            //Do something
            break;

        default:
            break;
    }
} 
```

# database - 分片方案

> ID：15634389
> 
> 赞同：0
> 
> 时间：2013-03-26T10:12:37.510
> 
> 标签：database, sharding, database-partitioning

我正在寻找一些分片方案，我还需要一些关于这方面的文献。到目前为止，我发现的那些：

```
- Key based partitioning 
- Vertical partitioning
- Directory based partitioning 
```

还有更多关于分片的想法吗？如果你能提供一些关于这方面的文献或一些书籍等，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T22:26:26.850

免责声明：我为[ScaleBase](http://www.scalebase.com)工作，这是一个提供完整的 MySQL 横向扩展解决方案的提供商，如果你愿意的话，它是一个“自动分片机”……我们已经看到了一两个关于分片的事情……

我们的网站上有一些关于基于键的分片（哈希、范围、列表）和数据分布的好资源： [http ://www.scalebase.com/products/database-sharding/](http://www.scalebase.com/products/database-sharding/) [http://www.scalebase.com/资源/网络研讨会/](http://www.scalebase.com/resources/webinars/) - （搜索“网络研讨会 – 10.23.12：自动数据分发的好处”）

我还邀请您查看我的博客，帖子例如：[http ://database-scalability.blogspot.co.il/2013/01/partial-partitioning-and-sharding.html](http://database-scalability.blogspot.co.il/2013/01/partial-partitioning-and-sharding.html)

我很乐意回答任何问题或提供更多材料！

# selenium - Facebook 注销脚本

> ID：15634395
> 
> 赞同：0
> 
> 时间：2013-03-26T10:12:54.010
> 
> 标签：selenium

你能告诉我如何使用 selenium 在 chrome 浏览器中注销吗？

例如

```
public class AJ {
    public static void main(String[] args) {
        WebDriver driver = new ChromeDriver();
        driver.get("http://facebook.com");
        WebElement element=driver.findElement(By.name("email"));
        element.sendKeys("user@example.com");
        element=driver.findElement(By.name("pass"));
        element.sendKeys("password");

        element.submit(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:50:17.930

以下代码应该对您有所帮助。

```
public static void main(String[] args) {
    WebDriver driver = new ChromeDriver();
    driver.get("http://facebook.com");
    WebElement element=driver.findElement(By.name("email"));
    element.sendKeys("user@example.com");
    element=driver.findElement(By.name("pass"));
    element.sendKeys("password");

    element.submit();

    //Click on dropdown menu then logout button
    driver.findElement(By.id("userNavigationLabel")).click();
    driver.findElement(By.id("logout_form")).click();

    //Check to see if email login box is available 
    //therefore confirming user has logged out
    driver.findElement(By.name("email"));
} 
```

我建议使用 Chrome 开发人员工具来帮助您找到页面的独特属性，以供 Selenium 查找。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-10T18:30:59.683

在 python 中，使用这行代码也是如此。它使用相同的模块，即 Selenium。因此，只需使用下面传递的参数使用 css 选择器更改元素。

```
logout1 = driver.find_element_by_css_selector("._w0d[action='https://www.facebook.com/logout.php?button_name=logout&button_location=settings']").submit() 
```

希望它有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-10T19:01:22.667

我能够成功从 Facebook 注销。

**这是Java代码**

字符串 url = " [http://facebook.com](http://facebook.com) ";

```
 String email = "email";
    String password = "password";
    System.setProperty("webdriver.chrome.driver", "src/chromedriver 3");
    WebDriver driver = new ChromeDriver(); 

    ChromeOptions options = new ChromeOptions();
    options.addArguments("--disable-notifications");

    driver = new ChromeDriver(options);

    driver.get(url);

    driver.manage().window().maximize();

    driver.findElement(By.id("email")).sendKeys("Your email here");
    driver.findElement(By.id("pass")).sendKeys("Your password here" + Keys.ENTER);
    driver.findElement(By.id("logoutMenu")).click();
    Thread.sleep(2000);
    driver.findElement(By.xpath("//form[contains(@id,'show_me_how_logout')]/../../../..")).click(); 
```

# objective-c - 为从 url 存储数据创建数组

> ID：15634396
> 
> 赞同：0
> 
> 时间：2013-03-26T10:13:07.273
> 
> 标签：objective-c, nsmutablearray

我想将 4 个来自 url 的书名（.php?info=1& **b=1**第一本书的显示名称）存储在数组中，然后运行该代码并使用这些名称。

我也想创建类的对象并将名字专用于第一个对象（第二个名称用于第二个对象等）

这是我的代码：

```
#import "Recipe.h"

for (int i = 1; i <= 4; i++)
    {
        Recipe *booki = [Recipe new];    // create object
        NSLog(@"%d,%@",i,booki);

        NSString *c = [[NSString alloc]initWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://192.168.1.102:81/temp/book.php?info=1&b=%d",i]]];

        NSMutableArray *b = [[NSMutableArray alloc]init];
        [b addObject:c];

        NSLog(@"%@,%@",c,b);

        booki.name = [NSString stringWithString:c];

        recipes = [NSMutableArray arrayWithCapacity:4];
        //NSLog(@"%@",recipes);
        recipes = [NSMutableArray arrayWithObjects:booki, nil]; 
```

在这段代码中，我在对象中只看到一个名字和它的书名

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:27:38.457

问题似乎是这样的。

> 食谱 = [NSMutableArray arrayWithObjects:si, nil];

由于您在 for 循环中循环。如果你想拥有所有的名字。您需要在 for 循环之外创建一个数组。而不是每次向其添加对象时都创建一个新数组。

```
if(!recipes){
   recipes = [NSMutableArray array];
}
[recipes addObject:si]; 
```

# c++ - C++ 中的连续角（matlab 中的 eq 展开函数）

> ID：15634400
> 
> 赞同：10
> 
> 时间：2013-03-26T10:13:20.283
> 
> 标签：c++, angle

我想这并不难，但我已经坚持了一段时间。

我有一个可以双向旋转的关节。传感器为我提供了 -pi 和 +pi 范围内的关节角度。

我想在 -infinity 和 +infinity 范围内转换它。这意味着如果例如关节永远顺时针旋转，角度将从 0 开始，然后增加到无穷大。在 matlab 中， unwrap 函数做得很好：

```
newAngle = unwrap([previousAngle newAngle]);
previousAngle = newAngle; 
```

注意：假设角度没有大跳，肯定没有比 PI 更好。

注：问之前我真的仔细看了看……

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T03:32:18.147

经过一番工作，想出了这个。似乎工作正常。

```
//Normalize to [-180,180):
inline double constrainAngle(double x){
    x = fmod(x + M_PI,M_2PI);
    if (x < 0)
        x += M_2PI;
    return x - M_PI;
}
// convert to [-360,360]
inline double angleConv(double angle){
    return fmod(constrainAngle(angle),M_2PI);
}
inline double angleDiff(double a,double b){
    double dif = fmod(b - a + M_PI,M_2PI);
    if (dif < 0)
        dif += M_2PI;
    return dif - M_PI;
}
inline double unwrap(double previousAngle,double newAngle){
    return previousAngle - angleDiff(newAngle,angleConv(previousAngle));
} 
```

我使用了这篇文章中的代码： [Dealing with Angle Wrap in c++ code](https://stackoverflow.com/questions/11498169/dealing-with-angle-wrap-in-c-code)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-18T22:52:26.470

假设输入角度之间的绝对差小于 2*pi，则以下函数可以完成这项工作：

```
float unwrap(float previous_angle, float new_angle) {
    float d = new_angle - previous_angle;
    d = d > M_PI ? d - 2 * M_PI : (d < -M_PI ? d + 2 * M_PI : d);
    return previous_angle + d;
} 
```

如果你需要解开一个数组，你可以使用这个例程：

```
void unwrap_array(float *in, float *out, int len) {
    out[0] = in[0];
    for (int i = 1; i < len; i++) {
        float d = in[i] - in[i-1];
        d = d > M_PI ? d - 2 * M_PI : (d < -M_PI ? d + 2 * M_PI : d);
        out[i] = out[i-1] + d;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-29T11:13:08.520

```
// wrap to [-pi,pi]
inline double angle_norm(double x)
{
    x = fmod(x + M_PI, M_2PI);
    if (x < 0)
        x += M_2PI;
    return x - M_PI;
}

double phase_unwrap(double prev, double now)
{
    return prev + angle_norm(now - prev);
} 
```

这行得通。

# javascript - 当值是可选时，如何在 Javascript/jQuery 中将 url 拆分为键值对

> ID：15634403
> 
> 赞同：0
> 
> 时间：2013-03-26T10:13:27.603
> 
> 标签：javascript, jquery, regex

我想将一个 url 拆分成键/值对，除了有时有独立的键（不携带任何值）。IE 我有一些这种格式的网址：

```
 'first_resources/99/second_resources/41/third_resources/fourth_resources/98' 
```

这里，第一个、第二个和第四个资源都有 id，但第三个资源没有。

我想让这个输出像这样的数组：

```
[["first_resources",99],["second_resources",41],["third_resources"],["fourth_resources",98]] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:21:56.180

您可以使用相对简单的正则表达式和`Array.map()`操作来做到这一点：

```
var re = /(\w+\/\d+)|(\w+)/g,
str = 'first_resources/99/second_resources/41/third_resources/fourth_resources/98',
results;

results = str.match(re).map(function(item) {
  return item.split('/');
}) 
```

根据您的目标平台，您可能需要填充[`Array.map`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map#Compatibility).

# ios - 如何在启用滚动的情况下向 UIWebView 添加标题视图

> ID：15634405
> 
> 赞同：2
> 
> 时间：2013-03-26T10:13:30.673
> 
> 标签：ios, objective-c, uiwebview

我需要在`UIWebView`. 并且在缩放或缩小 UIWebView 时，标题的框架不会改变。这就像阅读`view controller`一些电子邮件应用程序，例如 Evernote 的阅读视图。

我找到了一个解决方案[https://github.com/protectedtrust/UIWebView-with-Header-and-Footer](https://github.com/protectedtrust/UIWebView-with-Header-and-Footer)。但它并不完美。它会在函数之后布局标题视图`webViewDidFinishLoad:`。但我需要在函数之前布局标题视图`webViewDidFinishLoad`。

那我该怎么做，或者已经有解决方案了？

# wpf - 组合框选定值前景色 XAML WPF

> ID：15634411
> 
> 赞同：0
> 
> 时间：2013-03-26T10:13:57.773
> 
> 标签：wpf, xaml, combobox, selecteditem, foreground

我想在我的组合框中将所选值的前景色更改为白色。有什么方法可以执行欲望动作。干杯Whynottshirt

![组合框](../Images/eafbaacefd65b9a9b975f4d5fd9e6b16.png)

我的组合框的样式：

```
<ResourceDictionary x:Class="Kororder.ApplicationDesign.Styles.MyCombo"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

<Color x:Key="GrayColor_">#FF928B81</Color>
<Color x:Key="LightGrayColor_">#FFC3C3C3</Color>
<Color x:Key="LightLightGrayColor_">#FFF1F1F1</Color>
<SolidColorBrush x:Key="GrayColor" Color="{StaticResource GrayColor_}"/>
<SolidColorBrush x:Key="LightGrayColor" Color="{StaticResource LightGrayColor_}"/>
<SolidColorBrush x:Key="LightLightGrayColor" Color="{StaticResource LightLightGrayColor_}"/>

<Color x:Key="BlueColor_">#0073b0</Color>
<Color x:Key="DarkBlueColor_">#FF004165</Color>
<Color x:Key="LightBlueColor_">#FFa4ddfa</Color>
<SolidColorBrush x:Key="BlueColor" Color="{StaticResource BlueColor_}" />
<SolidColorBrush x:Key="DarkBlueColor" Color="{StaticResource DarkBlueColor_}" />
<SolidColorBrush x:Key="LightBlueColor" Color="{StaticResource LightBlueColor_}" />

<SolidColorBrush x:Key="Foreground" Color="Black"/>
<SolidColorBrush x:Key="ForegroundWhite" Color="White"/>

<Style x:Key="LightGrayBox" TargetType="{x:Type Border}">
    <Setter Property="Background" Value="White"/>
    <Setter Property="BorderThickness" Value="1"/>
    <Setter Property="SnapsToDevicePixels" Value="True"/>
    <Setter Property="BorderBrush" Value="{StaticResource LightGrayColor}" />
</Style>

<Style x:Key="ComboBoxToggleButton" TargetType="{x:Type ToggleButton}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ToggleButton">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition Width="20"/>
                    </Grid.ColumnDefinitions>
                    <Border x:Name="Border" Style="{DynamicResource LightGrayBox}" Grid.ColumnSpan="2" />
                    <Path x:Name="Arrow" Grid.Column="1" Opacity="0.6" Fill="{StaticResource GrayColor}" HorizontalAlignment="Center" VerticalAlignment="Center" Data="M 0 0 L 4 4 L 8 0 Z"/>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="ToggleButton.IsMouseOver" Value="true">
                        <Setter TargetName="Arrow" Property="Opacity" Value="1" />
                        <Setter TargetName="Arrow" Property="Fill" Value="{StaticResource BlueColor}" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="{DynamicResource BlueColor}"/>
                    </Trigger>
                    <Trigger Property="ToggleButton.IsChecked" Value="true">
                        <Setter TargetName="Arrow" Property="Opacity" Value="1" />
                        <Setter TargetName="Arrow" Property="Fill" Value="{StaticResource BlueColor}" />
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter TargetName="Border" Property="Style" Value="{StaticResource LightGrayBox}" />
                        <Setter Property="Foreground" Value="{StaticResource GrayColor}"/>
                        <Setter TargetName="Arrow" Property="Fill" Value="{StaticResource GrayColor}" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<Style x:Key="ComboBoxToggleButtonActive" TargetType="{x:Type ToggleButton}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ToggleButton">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition Width="20"/>
                    </Grid.ColumnDefinitions>
                    <Border x:Name="Border" Grid.ColumnSpan="2" Background="{DynamicResource BlueColor}" />
                    <Path x:Name="Arrow" Grid.Column="1" Opacity="1" Fill="White" HorizontalAlignment="Center" VerticalAlignment="Center" Data="M 0 0 L 4 4 L 8 0 Z"/>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsFocused" Value="true">
                        <Setter TargetName="Border" Property="Background" Value="{DynamicResource BlueColor}" />
                        <Setter TargetName="Border" Property="BorderBrush" Value="White"/>
                        <Setter Property="Foreground" Value="White" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<ControlTemplate x:Key="ComboBoxTextBox" TargetType="TextBox">
    <Border x:Name="PART_ContentHost" Focusable="False" Background="{TemplateBinding Background}" />
</ControlTemplate>

<Style x:Key="StandardComboBox" TargetType="{x:Type ComboBox}">
    <Setter Property="Foreground" Value="{StaticResource Foreground}"/>
    <Setter Property="Height" Value="25"/>
    <Setter Property="HorizontalAlignment" Value="Left"/>
    <Setter Property="IsEditable" Value="True" />
    <Setter Property="OverridesDefaultStyle" Value="true"/>
    <Setter Property="SnapsToDevicePixels" Value="true"/>
    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
    <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
    <Setter Property="ScrollViewer.CanContentScroll" Value="true"/>
    <Setter Property="VerticalAlignment" Value="Top"/>
    <Setter Property="Width" Value="120"/>
    <Setter Property="IsSelected" Value="{Binding IsKeyboardFocusWithin, RelativeSource={RelativeSource Self}, Mode=OneWay}" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ComboBox">
                <Grid GotFocus="OnGotFocus">
                    <ToggleButton Name="ToggleButton" Style="{StaticResource ComboBoxToggleButton}" Grid.Column="2" Focusable="false" ClickMode="Press"
                      IsChecked="{Binding Path=IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" />
                    <ContentPresenter Name="ContentSite" IsHitTestVisible="False" Content="{TemplateBinding SelectionBoxItem}" ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}" 
                                      ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}" Margin="3,3,23,3" VerticalAlignment="Center" HorizontalAlignment="Left" />
                    <TextBox x:Name="PART_EditableTextBox" 
                             CaretBrush="{DynamicResource ForegroundWhite}"
                             Style="{x:Null}" 
                             Template="{StaticResource ComboBoxTextBox}" 
                             HorizontalAlignment="Left" 
                             VerticalAlignment="Center" 
                             Margin="3,3,23,3" 
                             Focusable="True" 
                             Background="Transparent" 
                             Foreground="{StaticResource Foreground}" 
                             Visibility="Hidden" 
                             IsReadOnly="{TemplateBinding IsReadOnly}"/>
                    <Popup VerticalOffset="-1" SnapsToDevicePixels="True" Name="Popup" Placement="Bottom" IsOpen="{TemplateBinding IsDropDownOpen}" AllowsTransparency="True"  Focusable="False" PopupAnimation="Fade">
                        <Grid Name="DropDown" SnapsToDevicePixels="True" MinWidth="{TemplateBinding ActualWidth}" MaxHeight="200">
                            <Border x:Name="DropDownBorder" Style="{DynamicResource LightGrayBox}"/>
                            <ScrollViewer SnapsToDevicePixels="True">
                                <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Contained" />
                            </ScrollViewer>
                        </Grid>
                    </Popup>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="HasItems" Value="false">
                        <Setter TargetName="DropDownBorder" Property="MinHeight" Value="20"/>
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="false">
                        <Setter Property="Foreground" Value="{StaticResource GrayColor}"/>
                    </Trigger>
                    <Trigger Property="IsGrouping" Value="true">
                        <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
                    </Trigger>
                    <Trigger Property="IsSelected" Value="True">
                        <Setter TargetName="ToggleButton" Property="Style" Value="{StaticResource ComboBoxToggleButtonActive}" />
                    </Trigger>
                    <Trigger Property="IsEditable" Value="true">
                        <Setter Property="IsTabStop" Value="false"/>
                        <Setter TargetName="PART_EditableTextBox" Property="Visibility" Value="Visible"/>
                        <Setter TargetName="ContentSite" Property="Visibility" Value="Hidden"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Style.Resources>
        <Style TargetType="ComboBoxItem">
            <Setter Property="SnapsToDevicePixels" Value="true"/>
            <Setter Property="OverridesDefaultStyle" Value="true"/>
            <Setter Property="HorizontalContentAlignment" Value="Left" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBoxItem">
                        <Border Name="Border" Padding="2" SnapsToDevicePixels="true" BorderThickness="1">
                            <ContentPresenter />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsHighlighted" Value="true">
                                <Setter TargetName="Border" Property="Background" Value="{DynamicResource BlueColor}"/>
                                <Setter TargetName="Border" Property="Padding" Value="2,3,2,3" />
                                <Setter Property="Foreground" Value="White" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Style.Resources>
</Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:27:55.177

您应该访问 msdn 站点并获取组合框的默认控件模板。之后，您在项目中使用它并根据您的需要进行更改。此处：[ComboBox ControlTemplate 示例](http://msdn.microsoft.com/en-us/library/ms752094%28v=vs.85%29.aspx)

要么使用 Expression Blend

# android - 当 anyDensity=false 时 Gravity.RIGHT 不起作用

> ID：15634412
> 
> 赞同：1
> 
> 时间：2013-03-26T10:13:59.367
> 
> 标签：android, layout-gravity

我正在开发一个在 Xperia Z 和 Xperia tablet Z 上运行的 Android 应用程序。我的问题是 Gravity.RIGHT 属性在 AndroidManifest 中的 anyDensity=true 时生效，但在 anyDensity=false 时它不起作用。一些最右边的字符被部分隐藏，如下所示。我在 TextView 和 Layout 中尝试了各种设置更改，但未能全部显示。当anyDensity = false时，有人可以告诉我应该设置什么以使Gravity.RIGHT完全工作吗？

谢谢你。

`

```
----------------------------------------
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#000000"
    >

    <TextView
    android:id="@+id/textDP"
    android:textStyle="bold"
    android:typeface="normal"
    android:textSize="15.125dp"
    android:textColor="#0000ff"
    android:background="#cccccc"
    android:layout_width="200dp"
    android:layout_height="wrap_content"
    android:gravity="center_vertical|right"
    android:layout_marginLeft="50px"
    android:layout_marginTop="50px"
    android:text="@string/Sample001"
    />

    <TextView
    android:id="@+id/textDP"
    android:textStyle="bold"
    android:typeface="normal"
    android:textSize="15.125dp"
    android:textColor="#0000ff"
    android:background="#cccccc"
    android:layout_width="200dp"
    android:layout_height="wrap_content"
    android:gravity="center_vertical|right"
    android:layout_marginLeft="50px"
    android:layout_marginTop="75px"
    android:text="@string/Sample002"
    />

    : #Omission
---------------------------------------- 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:07:09.067

如果你使用 android:anyDensity="false"。这会导致您进入您不想要的旧密度兼容模式。而不是设置您的文本大小/布局宽度等。使用 pt 使用与密度无关的 dp。干杯

# php - 我们如何知道在印度 Ccavenue 支付网关中支付是否成功

> ID：15634415
> 
> 赞同：4
> 
> 时间：2013-03-26T10:14:08.070
> 
> 标签：php, payment-gateway, ccavenue

我已经在我的网站中集成了 CcAvenue 支付网关方法以及柑橘支付网关。CCavenue 方法中有一个重定向 url 选项，因此每当用户取消或支付金额时，它会将他们重定向到重定向 url。因此，我的客户希望每当有人取消或支付金额时，它会在重定向页面上向他们显示您的交易失败或成功的状态，并且还会在该重定向页面上向他们显示详细信息。在柑橘支付方式中，他们提供了选项，但在 CCavenue 中，我不知道。是否有任何类型的代码可以帮助我解决问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T10:30:29.470

我可以使用
`if($Checksum=="true" && $AuthDesc=="Y") // This will be shown for the successfull transaction`

欲了解更多信息，请访问以下网址链接：-

[http://subversion.assembla.com/svn/katalog/trunk/html/scripts/modules/payment/class.ccavenue.php](http://subversion.assembla.com/svn/katalog/trunk/html/scripts/modules/payment/class.ccavenue.php)

# php - 使用php将图像插入mssql

> ID：15634416
> 
> 赞同：-2
> 
> 时间：2013-03-26T10:14:16.183
> 
> 标签：php, html, sql-server, image, blob

我想将图像插入到 mssql 中，为用户提供选择图像并插入数据库的选项。所以我使用了以下代码

```
<html>
<head>
<?php 
if ($_SERVER["REQUEST_METHOD"] == "POST") 
{
mmysql_connect("localhost","sample","welcome");
mysql_select_db("samples");

if (empty($_POST["frm"]))   
{

}
else
{
$filename=trim($_REQUEST['slcfile']);
$datastring = file_get_contents($filename);
$data         = unpack("H*hex", $datastring);
echo trim($_REQUEST['slcfile']);
mssql_query("insert into imageinserter values ( 0x".$data['hex'].",'.$filename.')"); 
}

}
?>
</head>
<body>
<form name="frm" action="<?php echo htmlspecialchars($_SERVER["PHP_SELF"]);?>" method="post" >
select image :<input type="file" name="slcfile" /> <br>
<input type="submit" name="slcfile" value="addimage"/> 
</form>
</body>
</html> 
```

但它在 file_get_contents 处说错误错误，说没有找到这样的文件或资源。请帮助解决问题

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:19:37.130

`multipart/form-data`像这样在你的表单中使用：

```
<form enctype="multipart/form-data" name="frm" action="<?php echo htmlspecialchars($_SERVER["PHP_SELF"]);?>" method="post"> 
```

然后通过其临时名称读取上传的文件，例如：`$_FILES['uploadedfile']['tmp_name']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:20:05.523

你需要允许

```
 allow_url_fopen 
```

在您的 php.ini 配置文件中。出于安全考虑，一些主机不允许它

# ssis - 如何根据表格数据创建动态excel表格

> ID：15634418
> 
> 赞同：3
> 
> 时间：2013-03-26T10:14:20.803
> 
> 标签：ssis

给定 SQL Server 中的一张表，其中包含来自三个源表的合并数据，其中包括一列称为 OFFICE 的列，用于区分记录。

这三个源表包含来自三个办公室的数据。

我想动态创建一个 Excel 文件，该文件将根据三个不同的办公室（例如 office1、office2、office3）在一个工作簿中包含 3 张工作表，从而使每张工作表都包含根据其办公室的相关数据。

请推荐一种在 SSIS 中使用动态 Excel 目标的方法，因为我不想使用创建模板文件然后将该模板复制到目标 Excel 文件的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-11T18:19:48.430

虽然这可以使用 scipt 任务和 C# 来完成，但在 [http://www.rafael-salas.com/2006/12/import-header-line-tables-_116683388696570741.html上演示了一个更简单的解决方案](http://www.rafael-salas.com/2006/12/import-header-line-tables-_116683388696570741.html)

和后续

[http://www.rafael-salas.com/2008/03/ssis-and-dynamic-excel-destinations_01.html#！](http://www.rafael-salas.com/2008/03/ssis-and-dynamic-excel-destinations_01.html#!)

但要总结相关细节，您需要使用“执行 SQL 任务”在运行时动态创建工作表，然后再将其用作目标。

创建一个新变量来保存工作表名称，并在迭代它们时将此变量设置为您正在使用的 Office。

此外，创建一个变量来保存将创建每个工作表的 Create table 语句。例如，

“创建表`"+ @[User::SheetName] + "`（`HeaderID`整数，`HeaderName`NVARCHAR（50），`LineID`整数，`LineName`NVARCHAR（50），`LineDetails`NVARCHAR（50））”

并将 For Each 容器内的 Execute SQL 任务的 SQLSourceType 属性设置为变量，然后选择您创建的变量来保存创建语句。

在 Excel 目标组件中，将数据访问模式更改为“表名称或视图名称变量”，然后从变量下拉列表中选择您创建的工作表名称变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T00:38:01.010

我有几个执行类似功能的 SSIS 包。单个 Excel 文件由多个工作表组成，每个工作表由单独的 SQL 查询的结果填充。这是我应用的基本通用步骤。在开始之前，请确保为要应用的数据库和输出 Excel 文件创建一个连接管理器。

1）在控制流中创建一个脚本任务并像下面这样填充它。在这里，我正在创建 Excel 文件以及它将包含的工作表。（工作表不应该包含任何空格或特殊字符。）我下面的代码是在 C# 中。

```
using System;
using System.IO;
using System.Collections.Generic;
using System.Data;
using System.Text;
using Excel = Microsoft.Office.Interop.Excel;
using Microsoft.SqlServer.Dts.Runtime;

namespace ST_87e8d62a054b4e16b60297154afc19d8.csproj
{
[System.AddIn.AddIn("ScriptMain", Version = "1.0", Publisher = "", Description = "")]
public partial class ScriptMain : Microsoft.SqlServer.Dts.Tasks.ScriptTask.VSTARTScriptObjectModelBase
{

    #region VSTA generated code
    enum ScriptResults
    {
        Success = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Success,
        Failure = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Failure
    };
    #endregion

    public void Main()
    {
        Excel.Application xlApp;
        Excel.Workbook xlWorkBook;
        Excel.Worksheet xlWorkSheet;
        object misValue = System.Reflection.Missing.Value;

        xlApp = new Excel.ApplicationClass();
        xlWorkBook = xlApp.Workbooks.Add(misValue);

        //Create First worksheet
        xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);
        xlWorkSheet.Name = "Names";

        //Define column headers for "RawData" WorkSheet
        xlWorkSheet.Cells[1, 1] = "First Name";
        xlWorkSheet.Cells[1, 2] = "Last Name";
        xlWorkSheet.Cells[1, 3] = "Title";

        // Create Second Worksheet
        xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(2);
        xlWorkSheet.Name = "Addresses";

        //Define column headers for "CCDN" WorkSheet
        xlWorkSheet.Cells[1, 1] = "Street";
        xlWorkSheet.Cells[1, 2] = "City";
        xlWorkSheet.Cells[1, 3] = "State";
        xlWorkSheet.Cells[1, 4] = "Zip";
        xlWorkSheet.Cells[1, 5] = "Country";

        string Filename = "C:\\MyFile.xls";

        if (File.Exists(Filename))
        {
            File.Delete(Filename);
        }

        xlWorkBook.SaveAs(Filename, Excel.XlFileFormat.xlWorkbookNormal, misValue, misValue, misValue, misValue, Excel.XlSaveAsAccessMode.xlExclusive, misValue, misValue, misValue, misValue, misValue);
        xlWorkBook.Close(true, misValue, misValue);
        xlApp.Quit();

        releaseObject(xlWorkSheet);
        releaseObject(xlWorkBook);
        releaseObject(xlApp);

        Dts.TaskResult = (int)ScriptResults.Success;
    } 
```

2) 在您的数据库中创建两个将临时填充的表。也就是说，将为第一个工作表的结果填充一个表，为第二个工作表的结果填充第二个表。在每个表的名称前加上“Working_”是一种很好的命名方法，以便您了解每个表的用途。我采用使用表而不是视图的方法是因为我喜欢对我的结果进行排序（ORDER BY），而这不能用视图来完成。

3) 在 SSIS 包中添加 Control Flow 下的两个 Execute SQL Tasks。第一个任务将运行一个 INSERT SQL 语句，该语句将填充您刚刚创建的第一个表，第二个任务将运行另一个 INSERT SQL 语句，该语句将填充刚刚创建的第二个表。

4）在SSIS包中添加Control Flow下的两个Data Flow任务。第一个用于填充第一个工作表，第二个用于填充第二个工作表。

5) 选择第一个数据流任务并在数据流下添加一个 OLE DB 源，您将在其中定义 OLE DB 连接管理器（您的数据库），然后是表或视图。选择创建的第一个新表。确保选择了所有感兴趣的列并且您可以执行预览。

6) 添加数据转换流任务，然后添加 Excel 目标流任务。

7) 对第二个工作表和表格重复步骤 5 和 6。

8) 最后在控制流下添加一个 Excel SQL 任务，它将删除两个工作表的内容。您不希望在下次运行包时包含旧内容。

现在，如果您想在 Excel 文件完成后对其进行格式化并给您的经理留下深刻印象，您也可以使用最终任务脚本（也使用 C#）在代码中执行此操作。这种方法的好处是您不必在 SQL 中应用任何特殊的格式化函数，Excel 可以完成所有工作。您实际上可以在步骤 1 中包含格式，并且一旦您在以下步骤中复制数据，它就会自动格式化。与任何报告输出一样，当让 Excel 或 SSRS 做它们最擅长的事情更有效时，让 SQL 执行格式化步骤（向数据库服务器添加额外的工作）是没有意义的。

```
 public void Main()
    {
        Excel.Application xlApp;
        Excel.Workbook xlWorkBook;
        Excel.Worksheet xlWorkSheet;
        object misValue = System.Reflection.Missing.Value;
        Excel.Range xlRange;

        xlApp = new Excel.ApplicationClass();
        string Filename = "C:\\MyFile.xls";
        xlWorkBook = xlApp.Workbooks.Open(FileName, 0, false, 5, "", "", true, Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0);

        //Format cells in Names worksheet
        xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);

        //Set the header range in bold font
        xlRange = xlWorkSheet.get_Range("a1", "p1");
        xlRange.Font.Bold = true;
        xlRange.WrapText = true;

        //Freeze first row listing headers
        xlWorkSheet.Application.ActiveWindow.SplitRow = 1;
        xlWorkSheet.Application.ActiveWindow.FreezePanes = true;

        //Auto adjust the width of each column
        xlWorkSheet.Columns.AutoFit();

        xlRange = xlWorkSheet.get_Range("c1", "j6467");
        xlRange.Cells.Locked = false;
        xlRange.Interior.Color = 65535;

        xlRange = xlWorkSheet.get_Range("o1", "p6467");
        xlRange.Cells.Locked = false;
        xlRange.Interior.Color = 65535;

        //Do not alert when saving changes to Excel file.
        xlWorkBook.Application.DisplayAlerts = false;

        //Save Excel file modifications
        xlWorkBook.Save();

        //Close workbook and application
        xlWorkBook.Close(true, misValue, misValue);
        xlApp.Quit();

        //Release from cache.
        releaseObject(xlWorkSheet);
        releaseObject(xlWorkBook);
        releaseObject(xlApp);

        //Set formatting of percent cells
        xlRange = xlWorkSheet.get_Range("d3", "d7");
        xlRange.NumberFormat = "###,###%";

      //Define the top left cell and bottom right cell of the table in the Excel worksheet
        xlRange = xlWorkSheet.get_Range("c1", "c7");

        //Draw grid of thin line around each cell in table
        xlRange.BorderAround(Excel.XlLineStyle.xlContinuous, Excel.XlBorderWeight.xlThin, Excel.XlColorIndex.xlColorIndexAutomatic, 1);

        //Draw thick border around entire table
        xlRange = xlWorkSheet.get_Range("a1", "d7");
        xlRange.BorderAround(Excel.XlLineStyle.xlContinuous, Excel.XlBorderWeight.xlThick, Excel.XlColorIndex.xlColorIndexAutomatic, 1);

        //Right justify columns B and C
        xlRange = xlWorkSheet.get_Range("b3", "c7");
        xlRange.HorizontalAlignment = Excel.XlHAlign.xlHAlignRight;

        //Do not alert when saving changes to Excel file.
        xlWorkBook.Application.DisplayAlerts = false;

        //Save Excel file modifications
        xlWorkBook.Save();

        //Close workbook and application
        xlWorkBook.Close(true, misValue, misValue);
        xlApp.Quit();

        //Release from cache.
        releaseObject(xlWorkSheet);
        releaseObject(xlWorkBook);
        releaseObject(xlApp);

        Dts.TaskResult = (int)ScriptResults.Success;
    } 
```

就是这样。请注意，仅出于本示例的目的，我对文件名进行了硬编码。但在我的实际代码中，我应用了一个用户变量，然后由另一个 SQL 语句从另一个数据库表中提取名称来填充该变量。对于最佳实践，让您的 SSIS 包完全由表驱动是一个好主意。这样，对名称和位置所做的任何更改都将在特定于您的 SSIS 包的记录中的数据库表中进行...避免任何需要更新您的 SSIS 包并再次通过开发到质量保证再到生产生命周期。

希望这会有所帮助，如果您有任何问题，请告诉我。

# android - Android，无法在我的设备上绑定端口 67(dhcp)

> ID：15634420
> 
> 赞同：2
> 
> 时间：2013-03-26T10:14:28.647
> 
> 标签：android, permission-denied

1.  我在 mainfest.xml 中添加了 Internet 权限。

2.  我想发送和接收 dhcp 消息。实际上，我想知道我正在连接的网络的域名。但是 Android API 上没有任何可行的方法。（如果有人知道？）

    ```
    03-26 17:50:42.130: W/System.err(6747): java.net.BindException: bind failed: EACCES (Permission denied) 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:29:25.383

我知道 unix 操作系统禁止不以 root 身份运行的应用程序绑定在等于或小于 1024 的端口上。

# spring-security - 在 Spring Security 中删除会话

> ID：15634421
> 
> 赞同：0
> 
> 时间：2013-03-26T10:14:29.420
> 
> 标签：spring-security

我想为除登录屏幕 URL 之外的所有 URL 设置安全性，但我不想使用会话管理。

请帮我解决这个问题。我的安全上下文文件在下面

```
<security:http pattern="/" security="none" />   

<security:http auto-config="false" use-expressions="true" create-session="stateless" access-denied-page="/"   entry-point-ref="authenticationEntryPoint" >
    <security:intercept-url pattern="/**" access="isAuthenticated()" />     
    <security:intercept-url pattern="/logout" access="permitAll" />
    <security:intercept-url pattern="/logout.jsp" access="permitAll" />
    <security:logout logout-url="/j_spring_security_logout" />
    <security:custom-filter ref="authenticationFilter" position="FORM_LOGIN_FILTER"/>
</security:http> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:24:36.100

`intercept-url`您的标签的顺序是错误的。引用[参考文档](http://static.springsource.org/spring-security/site/docs/current/reference/ns-config.html#ns-minimal)：

> 您可以使用多个元素为不同的 URL 集定义不同的访问要求，但它们将按列出的顺序进行评估，并且将使用第一个匹配项。因此，您必须将最具体的匹配项放在顶部。

将`intercept-url`具有通用匹配模式的 移至列表底部。

# php - ZendFramework 2 中的 PHPunit

> ID：15634422
> 
> 赞同：0
> 
> 时间：2013-03-26T10:14:30.813
> 
> 标签：php, phpunit, zend-framework2

我正在尝试将 phpunit 与 zendframework 一起使用，我正在按照教程进行操作

[https://media.readthedocs.org/pdf/zf2/latest/zf2.pdf](https://media.readthedocs.org/pdf/zf2/latest/zf2.pdf)这是我的

引导程序.php

```
<?php
chdir(dirname(__DIR__));
include __DIR__ . '/../init_autoloader.php'; 
```

这是我的 IndexControllerTest.php

```
<?php

namespace ApplicationTest\Controller;

use Zend\Test\PHPUnit\Controller\AbstractHttpControllerTestCase;

class IndexControllerTest extends AbstractHttpControllerTestCase
{
public function setUp()
{
$this->setApplicationConfig(
include '/C:/wamp/www/zf2/config/application.config.php'
);
    parent::setUp();
}

public function testIndexActionCanBeAccessed()
{
    $this->dispatch('/'); // this is line 20
    $this->assertResponseStatusCode(200);

    $this->assertModule('application');
    $this->assertControllerName('application_index');
    $this->assertControllerClass('IndexController');
    $this->assertMatchedRouteName('home');
}
} 
```

我得到了以下错误

```
Warning: include(C:\wamp\www\zf2\module\Application\test/../init_autoloader.php)
: failed to open stream: No such file or directory in C:\wamp\www\zf2\module\App
lication\test\Bootstrap.php on line 4

Fatal error: Class 'Zend\Test\PHPUnit\Controller\AbstractHttpControllerTestCase'
not found in C:\wamp\www\zf2\module\Application\test\ApplicationTest\Controller
\IndexControllerTest.php on line 8 
```

我认为这是一个路径问题（加载）但我不知道如何解决

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:10:36.830

```
Warning: include(C:\wamp\www\zf2\module\Application\test/../init_autoloader.php)
: failed to open stream: No such file or directory in C:\wamp\www\zf2\module\App
lication\test\Bootstrap.php on line 4 
```

此警告告诉您它找不到`init_autoloader.php`文件的位置。假设该文件按照惯例位于 ZF2 项目的根目录中（因此 C:\wamp\www\zf2），您需要更改：

```
include __DIR__ . '/../init_autoloader.php'; 
```

至

```
include __DIR__ . '/../../../init_autoloader.php'; 
```

**编辑**继续...

```
PHP Fatal error: Uncaught exception 'RuntimeException' with message 'Unable to 
load ZF2\. Run php composer.phar install or define a ZF2_PATH environment 
variable.' in C:\wamp\www\zf2\init_autoloader.php:48 
```

您的`init_autloader.php`文件无法找到 ZF2 库自动加载器。当您使用作曲家时。添加

```
"zendframework/zendframework": "2.1.*", 
```

到您`"require"`在 composer.json 中的部分（如果它还没有的话）。运行作曲家并更新您的供应商库

```
php composer.phar update 
```

尝试再次运行该应用程序，看看它是否有效。它可能取决于文件中包含的`init_autoload.php`内容。如果您仍然遇到问题，请将以下内容添加到`init_autoloader.php`

```
if(file_exists('vendor/autoload.php'))
{
    $loader = require 'vendor/autoload.php';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-14T06:05:01.633

这是致命错误的修复。

您的应用程序中一定缺少“zend-test”包。

> $ composer 需要 zendframework/zend-test

# multithreading - pthread在php中不起作用

> ID：15634423
> 
> 赞同：4
> 
> 时间：2013-03-26T10:14:31.920
> 
> 标签：multithreading, installation, php

我已经从[http://windows.php.net/downloads/pecl/releases/pthreads/下载了](http://windows.php.net/downloads/pecl/releases/pthreads/)[PHP Pthreads](http://php.net/book.pthreads) dll 文件，并在 php.ini 中启用了它，如下所示：

```
extension=pthreadVC2.dll
extension=php_pthreads.dll 
```

我使用了以下示例代码：

```
<?php
class AsyncOperation extends Thread 
{
    public function __construct($arg){
        $this->arg = $arg;
    }

    public function run(){
        if($this->arg){
            printf("Hello %s\n", $this->arg);
        }
    }
}

$thread = new AsyncOperation("World");
if($thread->start())
    $thread->join(); 
```

当我执行代码时，出现以下错误：

> 致命错误：在第 2 行的 C:\htdocs\threads\AsyncOperation.php 中找不到类“线程”调用堆栈：0.0008 333464 1\. {main}() C:\htdocs\threads\AsyncOperation.php:0

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-27T09:07:56.830

这里有两个问题：

1) 首先必须正确查找 dll 文件位置。dll文件应如下放置：

```
C:\PHP5\pthreadVC2.dll
C:\PHP5\ext\php_pthreads.dll 
```

并且在 php.ini 文件中只有 php_pthreads.dll 应该被启用为

```
extension=php_pthreads.dll 
```

2) 必须寻找 PHP 和 dll 文件的版本。

我的 PHP 是 VC6 构建，使用的 dll 文件是 VC9。这就是为什么没有安装模块的原因。**我通过使用“ php -m** ”来了解这种差异。

由于没有 dll 文件的 VC6 构建，我使用了 PHP 的 VC9 构建并使用了 pthreads，程序运行良好。

注意：以上两个解决方案解决了我的问题。但是如果您仍然收到错误，请检查您是否启用了调试器 xdebug 或 zend。禁用它们并重试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-06T19:09:27.407

如果您将 PHP 安装在不同的文件夹而不是 C:/PHP5，最好将**pthreadVC2.dll**添加到 httpd.conf。否则，**pthreads**扩展模块找不到它。

```
LoadFile "c:/not_default_php5/pthreadVC2.dll" 
```

注意：如果添加 LoadFile 后，Apache 仍然找不到 DLL，只需删除 Loadfile 行并将 DLL 复制到 Apache bin 文件夹。

```
c:/apache_home/bin/pthreadVC2.dll 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-12-15T12:38:26.593

我找到了一个适合我[的解决方案：](http://php.net/manual/en/pthreads.installation.php#115004)

您应该首先验证您已为您的特定系统（php 版本，64/32 位系统）下载了正确的软件包。

之后，您应该在多个位置包含相关文件。将它们放在描述的每个地方都非常重要，否则它将无法正常工作。

您还应该如上所述更改您的 php.ini 文件（仅适用于 php_pthreads.dll）。

我一直在 Windows 7 64 位系统上将它与 WAMP 一起使用。

# plugins - 影响：如何让我的插件显示的页面 id

> ID：15634426
> 
> 赞同：0
> 
> 时间：2013-03-26T10:14:37.547
> 
> 标签：plugins, confluence

我有一个小问题，我想在我的插件中获得一个显示页面的 id（searchskills.vm 的 id）。

```
<xwork ... >
...
<action name="searchskills"  class="de.twt.confluence.plugins.actions.SearchSkillsAction">
      <result name="success" type="velocity">/templates/manager/searchskills.vm</result>
</action>
...
</xwork> 
```

但我无法得到它的形式：

```
page = getWebInterfaceContext().getPage(); 
```

它只返回空！！！

有没有办法获取页面ID？

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:45:12.160

看看这个：[显示页面 ID](https://confluence.atlassian.com/display/DISC/Show+the+content+ID+%28page+ID%29+in+a+page)我不确定这是否是您正在寻找的解决方案，您能否给我们更详细的描述您正在尝试做什么？

# solr - WCS 的 SolR 如何索引 Magnolia 的内容

> ID：15634432
> 
> 赞同：0
> 
> 时间：2013-03-26T10:14:59.570
> 
> 标签：solr, websphere, magnolia, websphere-commerce

我正在尝试找到一种方法，使用来自其他 CMS 的 Solr 来索引 Magnolia 的内容。（它不是真正的 CMS，但它就像。我说的是 websphere commece 7 FEP5）。

我有一个 Solr 引擎，插入了一个 DB2 数据库，并且已经配置为索引该数据库的内容。现在，我必须插入 Magnolia CMS（带有自己的数据库）。其中一项要求是能够显示搜索结果（由我的 Solr 提供），并且这些搜索结果必须包含 Magnolia 的内容。

有人有什么想法吗？

使用第二个 Solr 系统（Magnolia 中的那个）是不可接受的。

任何想法将不胜感激。

问候，德克斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:43:52.943

这听起来像您应该能够使用 WCS 非结构化内容爬虫来做您想做的事情。

从这里开始：http: [//pic.dhe.ibm.com/infocenter/wchelp/v7r0m0/topic/com.ibm.commerce.developer.doc/concepts/csdmanagesearchsitecontent.htm](http://pic.dhe.ibm.com/infocenter/wchelp/v7r0m0/topic/com.ibm.commerce.developer.doc/concepts/csdmanagesearchsitecontent.htm)

# asp.net - 运行时查看阿拉伯字符

> ID：15634433
> 
> 赞同：3
> 
> 时间：2013-03-26T10:15:00.527
> 
> 标签：asp.net, html, encoding, telerik, arabic

我面临以下问题：当我将特定页面复制到新解决方案时：

在运行时我明白了！

![在此处输入图像描述](../Images/c95cca107ecd79b7446aef51d726073c.png)

虽然在设计时是这样的：

![在此处输入图像描述](../Images/2e7e4054726d693ac0b41a5684269e1e.png)

我的 .aspx ：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

我尝试 `charset=iso-8859-6`改用但同样的问题！如何解决此问题以及为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:37:17.880

经过几次尝试，我只是将字符集更改为`windows-1252`，一切正常。

像这样：

```
 <meta http-equiv="Content-Type" content="text/html; charset=windows-1252" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:00:18.717

> 我尝试改用 charset=iso-8859-6 但同样的问题！

这意味着您的服务器正在发送带有字符集的实际 Content-Type 标头。`<meta>`-tag 次要于实际标头。

你可以这样做：

```
<%@ Page ResponseEncoding="UTF-8" %> 
```

或者

```
Response.ContentType = "text/html; charset=UTF-8"; 
```

但不要只是盲目地破解，使用 Google Chrome 开发人员工具（或任何您喜欢的工具）很容易查看您的服务器发送的标头：

![在此处输入图像描述](../Images/8a955dad6fadc9aa9614dc5457d5487f.png)

# javascript - 在jquery，ie8中获取图像文件的大小和尺寸时出错

> ID：15634434
> 
> 赞同：-1
> 
> 时间：2013-03-26T10:15:04.440
> 
> 标签：javascript, jquery, image, file-upload, internet-explorer-8

我有一个文件控件，通过使用文件控件选择图像，我需要获取图像的大小和尺寸。

HTML 代码：

```
<input type="file"  id="button_background_image_control"  /> 
```

jQuery代码：

```
$('#button_background_image_control').bind('change', function () 
    {             
        if (this.disabled) 
        {
            alert('Your browser does not support File upload.');
        } else 
        {
            var chosen = this.files[0];
            var image = new Image();
            image.onload = function () 
            {
                alert('Width:' + this.width + ' Height:' + this.height + ' ' + Math.round(chosen.size / 1024) + 'KB');
            }; 
            image.src = url.createObjectURL(chosen);
        }
    }); 
```

在 ie8 中运行上述代码时出现错误：0x800a138f - Microsoft JScript 运行时错误：'this.files.0' is null or not an object

在Firefox中它工作正常。我怎样才能让它在ie中工作？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:16:53.680

这不起作用，因为 IE8 不支持此代码正在使用的 HTML5 File API。

如果您需要支持它，有一些 polyfill 脚本可能会通过将缺少的功能（或部分功能）添加到旧版浏览器来帮助您——尝试通读[Modernizr Polyfills 列表](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills)页面并找到*File API*部分。

那里有几个脚本声称有助于在旧浏览器中处理文件，但您需要自己尝试一下，看看哪一个最适合您的需求。

希望有帮助。

# mercurial - Mercurial - 在不更新的情况下查看文件历史记录

> ID：15634436
> 
> 赞同：1
> 
> 时间：2013-03-26T10:15:11.690
> 
> 标签：mercurial, history

我正在处理这个文件，我遇到了一段我认为在历史上的某个时刻发生了变化的代码，我想知道它在哪里发生了变化。

这是一个非常大的文件，有很多历史，所以当我使用 hg diff 时，我会得到一个巨大的列表，我认为搜索它并不有效。

如果我可以查看文件的旧版本，看看文件在某个时间点的样子，那就太好了。然后我可以看到代码当时是如何工作的，因此我可以得出错误是如何演变的结论。当然，我想在不更新文件的情况下执行此操作，因为我目前正在使用它并且已经对其进行了更改。

那么，有什么方法可以在不更新文件的情况下查看文件的历史记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T11:05:19.707

有一些工具可以帮助您：

要获取文件的历史记录，您可以使用`hg log FILE`这可能是最好的起点。

您还可以使用`hg annotate FILE`which 列出文件中的每一行，并说明哪个版本将其更改为当前状态。它还可以使用`--rev REV`命令 tail 进行修订以查看文件的旧版本。

要仅列出给定版本的文件内容，您可以使用`hg cat FILE --rev REV`.

如果证明使用这些工具很难追踪错误，您可以将您的存储库克隆到其他地方并使用`hg bisect`它来追踪它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:06:37.950

hg bisect 可让您找到导致问题的变更集。要开始搜索，请运行`hg bisect --reset`命令。**Mercurial: The Definitive Guide**中有很好的文档。

# html - Twitter-Bootstrap - 将简单元素内联

> ID：15634441
> 
> 赞同：23
> 
> 时间：2013-03-26T10:15:22.337
> 
> 标签：html, css, twitter-bootstrap, inline

无论如何要放置2个`<a>`显示内联的元素？

我试过了：

```
<div class="form-inline">
<a>jjj</a>
<a>sss</a>
</div> 
```

并且

```
 <div class="row-fluid">
    <a class="inline">jjj</a>
    <a class="inline">sss</a>
    </div> 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-26T10:21:23.803

默认情况下应该显示锚标签`inline`。您必须有一些额外的样式设置它们以显示为`block`元素或类似的东西。

使用您的代码，这是一个有效的[JSFiddle](http://jsfiddle.net/2KZVU/)。

检查您的页面以找出锚点的`display`设置位置，然后对其进行修改或将元素设置为`display:inline` *之后*。正如您已经添加的那样`class="inline"`，您只需添加：

```
a { display:block; /* Pre-existing code */ }
a.inline {
    display:inline;
} 
```

另外作为一个注释，我认为`row-fluid`没有 Bootstrap 的其他[脚手架](http://twitter.github.com/bootstrap/scaffolding.html)元素就不能工作，如果你想要一个全宽行，你应该使用：

```
<div class="row-fluid">
    <div class="span12">
        <a class="inline">jjj</a>
        <a class="inline">sss</a>
    </div>
</div> 
```

# c++ - C++ 静态数组和 sizeof 运算符

> ID：15634442
> 
> 赞同：0
> 
> 时间：2013-03-26T10:15:22.917
> 
> 标签：c++, arrays, static, sizeof

我知道`sizeof`是编译时运算符，那么为什么这段代码可以正确编译和运行而没有任何警告呢？

```
#include <iostream>

    int main() {    
        int size;
        std::cin >> size;
        int array[size];
        std::cout << sizeof(array) / sizeof(int) << std::endl;
    }

g++ -v
Reading specs from /usr/lib/gcc/x86_64-redhat-linux/3.4.6/specs
Configured with: ../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --enable-shared --enable-threads=posix --disable-checking --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-java-awt=gtk --host=x86_64-redhat-linux
Thread model: posix
gcc version 3.4.6 20060404 (Red Hat 3.4.6-9) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T10:18:16.943

首先，代码不是有效的 C++，因为 C++ 中没有[可变长度数组](http://en.wikipedia.org/wiki/Variable-length_array)(VLA)。它们是 C 功能。您的 C++ 编译器支持它们作为非标准扩展。使用`-Wvla`或`-pedantic`获得警告：

```
warning: ISO C++ forbids variable length array 'array' [-Wvla] 
```

其次，`sizeof()`运算符在应用于 C VLA 时不再是编译时构造。C 标准在**§6.5.3.4 The `sizeof`operator**中暗示了这一点：

> 如果操作数的类型是变长数组类型，则计算操作数；否则，不计算操作数，结果是一个整数常量。

# android - 相机预览上的文本视图

> ID：15634445
> 
> 赞同：0
> 
> 时间：2013-03-26T10:15:32.300
> 
> 标签：android, textview, android-camera

我正在开发一个相机应用程序。我想在相机预览上显示一个文本视图。如果我添加文本视图，应用程序将显示带有默认文本的文本视图。当我执行 setText 时，应用程序崩溃了。任何机构都可以说出这可能是什么原因吗？

```
<TextView android:layout_width="wrap_content" android:id="@+id/textView1" 
        android:layout_height="wrap_content" android:text="Text"
        android:layout_gravity="center" android:paddingTop="25dp"
        android:textSize="20dp" android:textStyle="bold" android:textColor="#FFFFFF" /> 
```

爪哇代码：

```
TextView text = (TextView) findViewById(R.id.textView1); 
text.setText("hi"); 
```

如果我注释掉 setText 行，那么应用程序将显示默认文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:34:01.537

打电话之前你打过`setContentView()`电话`findViewById()`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T11:27:00.470

您的日志表明 textView1 在 onCreate() 的那个阶段不可用。什么时候加载布局？你可以稍后 setText() 吗？

# java - 正则表达式检查字符串是否以特定字符开头和结尾

> ID：15634449
> 
> 赞同：2
> 
> 时间：2013-03-26T10:15:42.270
> 
> 标签：java, regex, actionscript-3

我需要一个正则表达式来检查字符串是否以特殊字符开头和结尾 -

```
%ASDF%

"ASDF"

@ASDF@ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T10:50:08.107

以下正则表达式匹配以相同字符开头和结尾的字符串：

```
(.).*\1 
```

`.`代表任何字符，封闭用于标记捕获组，以便可以对其进行反向引用。

`.*`匹配零个或多个字符。

`\1`反向引用第一个捕获组（即第一个字符）

所以它匹配**aba**、**#ee#**、**ee**等。如果您需要在开始和结束字符之间至少有一个字符，请将 替换`*`为`+`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T10:21:25.827

```
^((%.+%)|(".+")|(@.+@))$ 
```

*   `^`表示行的开始
*   `$`表示行尾
*   `|`意味着或
*   `.`表示任何字符
*   `+`表示重复 1 次或多次

# embedded - 为嵌入式 Linux ARM9 处理用户空间中的 GPIO

> ID：15634450
> 
> 赞同：0
> 
> 时间：2013-03-26T10:15:46.283
> 
> 标签：embedded, arm, embedded-linux

我必须将我的 GSM 模块与基于 ARM9 的 AM1808 接口。

我已将所有 GPIO 引脚分配给 Da850.c 以及 mux.h 文件。我成功创建了一个 uImage 并将该图像插入到我的闪存中。

我需要处理来自用户应用程序的一些 GPIO。

我知道我们可以从 Kerel 空间处理 GPIO，但我需要从用户空间处理。

例如，我为 GSM 模块的电源键分配了一个 GPIO。我需要通过应用程序更改引脚方式（高或低）。

我该如何处理？

我正在使用 UBUNTU 10.04 进行开发。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:16:15.387

大多数 Linux 内核都内置了 GPIO 机制。通常最容易使用这些机制。[Documentation/gpio.txt](https://www.kernel.org/doc/Documentation/gpio.txt)中的概述。这是常见的新手话题，有很多不错的教程，例如[gpio_sysfs](http://www.tanzilli.com/gpio_sysfs)。如果您遇到问题，您可以发表评论，提供更多信息，例如您正在使用哪个 SBC 和内核版本（例如 LogicPD Zoom 和 2.6.33），以及您将首先尝试哪个 GPIO 引脚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:22:05.693

您可以通过使用 mmap 将物理内存（通过 /dev/mem/）映射到用户内存来处理此问题。

这里有一些示例代码：

[http://naveengopala-embeddedlinux.blogspot.co.uk/2012/01/reading-physical-mapped-memory-using.html](http://naveengopala-embeddedlinux.blogspot.co.uk/2012/01/reading-physical-mapped-memory-using.html)

# facebook - Facebook 对话请求 ie9 &10 sec7111 错误消息

> ID：15634453
> 
> 赞同：0
> 
> 时间：2013-03-26T10:15:53.407
> 
> 标签：facebook, ssl, internet-explorer-9, internet-explorer-10

我开发了一个 Facebook_App，您可以在其中通过请求对话框邀请您的朋友。它适用于 Firefox 和 Chrome，但在 ie9 和 10 中，用户会收到“混合内容警告”并且无法单击共享按钮，如果他们确认消息应用程序已重新加载并且他们必须从头开始。如果我使用 ie 开发人员工具进行调试，我会收到以下错误消息：

> SEC7111：HTTPS 安全性受到 [http://static.ak.facebook.com/connect/xd_arbiter.php](http://static.ak.facebook.com/connect/xd_arbiter.php)的威胁？.....
> 
> SEC7111：HTTPS 安全性受到 [http://static.ak.facebook.com/connect/xd_arbiter.php?version=X的威胁](http://static.ak.facebook.com/connect/xd_arbiter.php?version=X)

有谁知道为什么？这是我的代码：

```
 <body>
    <div id="fb-root"></div>

    <script src="https://connect.facebook.net/de_DE/all.js"></script>       
        <div id="container" class="page004">
            <div id="share"><input class="btn_send" type="button" onclick="sendRequestViaMultiFriendSelector(); return false;" value="" /></div> 

    <script>

    FB.init({
        appId  : 'XXXXXXXXXXX',
        frictionlessRequests: true
    });

    function sendRequestViaMultiFriendSelector() {
        FB.ui({method: 'apprequests', message: 'MESSAGE'}, requestCallback);
    }

    function requestCallback(response) {
        window.location = "referer.php";
    }

    </script>
    </body> 
```

# javascript - 从 iFrame 更改父页面 url 在 IE 中有效，但在 Firefox 和 Chrome 中无效

> ID：15634462
> 
> 赞同：3
> 
> 时间：2013-03-26T10:16:20.927
> 
> 标签：javascript, iframe

我有一个带有 iFrame 的页面。我想更改父母的网址。
目前，我正在使用以下代码：

```
window.parent.location.href = window.parent.location.href + '?myParam=myValue' 
```

它适用于 IE 10，但不适用于 Firefox 或 Chrome。
在 Firefox 上，我收到以下错误：

> 错误：访问属性“href”的权限被拒绝

页面和 iFrame 共享主机，但是在不同的端口上，所以根据[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)它不会起作用。
我的问题是：为什么它可以在 IE 中工作以及如何使它在其他浏览器中工作？

**编辑：**以下工作正常：

```
window.parent.location.href = 'addressGoesHere.com?myParam=myValue'; 
```

在火狐浏览器中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:22:21.067

~~尝试这个~~

 ~~```
window.parent.location='?myParam=myValue'; 
```~~  ~~我尝试并发现：您不能直接（获取它的值）或间接（通过设置它的相对位置 - 它将成为相对于页面设置位置 - 唯一的例外是设置散列（#123） ）。

所以实际答案：

它可以在 IE 中运行，因为它不符合标准

第二部分 - 绝对没有办法。您应该尝试不同的通信方法 - 例如使用跨域 postmessage ( [http://html5demos.com/postmessage2](http://html5demos.com/postmessage2) ) 或使用其他跨域通信方法，例如[http://easyxdm.net/wp](http://easyxdm.net/wp)~~

# android - 为什么Android模拟器比iPhone模拟器慢？

> ID：15634463
> 
> 赞同：4
> 
> 时间：2013-03-26T10:16:24.420
> 
> 标签：android, iphone, android-emulator, ios-simulator

只是好奇。Apple 的 iPhone 模拟器做得很棒吗？

比较时，在 i7 上运行的 android Emulator 和在 i3 上运行的 iPhone 模拟器。iPhone模拟器比真正的iPhone更快。

我没有正确设置吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-26T10:37:52.380

这是架构决策的问题：

*   iOS 模拟器直接在您的 CPU 上运行本机代码 - 必须重新编译项目才能使 x86 架构与模拟器一起使用。模拟器本身只是模拟所有 iOS API。

*   另一方面，Android 模拟器使用[QEMU](http://wiki.qemu.org/Main_Page)来运行 ARM（或 x86，但 ARM 更流行）CPU 虚拟机，所有软件堆栈都在其之上 - Linux 内核、Android 系统映像等。可以将其视为仿真硬件。

这是一种权衡——iOS 的方式要快得多，但更难使其 100% 与目标系统兼容。对于 Apple 来说，这可能更简单一些，因为 iOS 和 Mac OS 有很多共同点。

对于 Android 来说，模拟整个堆栈非常有意义 - 构建跨平台 SDK 更容易，用它测试一些系统级组件更容易，等等。这只是一个不同的生态系统，具有不同的目标。不要忘记，Android 模拟器可用于测试使用 Android NDK 编译的原生 ARM 库。

今天的Android模拟器性能或多或少可以接受，但在早期的Android时代它只是一场灾难。也就是说，我个人认为快速的、API 级别的 Android 原生模拟器将是 SDK 的一个很好的补充，可以更快地测试要求不高的项目。

有趣的阅​​读：http: [//logic-explained.blogspot.com/2011/09/why-is-there-no-x86-native-emulator-for.html](http://logic-explained.blogspot.com/2011/09/why-is-there-no-x86-native-emulator-for.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T10:27:35.547

iphone，iphone模拟器，苹果笔记本，xcode是苹果产品

但是 android
windows-Microsoft android -Google eclipse -eclipse 供应商

这些工具是不同的供应商，为什么 android 模拟器慢。

我只是开玩笑 ：）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T10:56:37.340

是的，这是真的，`emulator`（仅供参考）比模拟器慢。

> 苹果在 iPhone 模拟器上做得很棒吗？

没有其他开发人员可以回答这个问题，因为 iOS 不是开源的。

> 我没有正确设置吗？

不，你什么都对。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-26T10:38:38.707

Apple Simulator 是使用系统配置创建的，这意味着它将自动占用系统的 ram、内存、缓存，您不必配置它，因此 Iphone Simulator 不能充当真实设备，但在 Android 的情况下，必须提供所有配置在创建模拟器之前的细节，Android模拟器在很大程度上将充当真实设备，但可能比iPhone模拟器慢得多。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T11:24:15.587

这很简单：

Android 模拟真实设备，如此真实的架构和非常接​​近的行为和布局。

另一方面，苹果模拟器不是模拟器，所以你不能指望真正的行为，但它有一个紧密的布局，主要解决 IOS，因为你只需要一台设备来测试应用程序的行为。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-26T10:32:41.910

首先，Android 没有 Simulator 它有一个[Emulator](http://developer.android.com/tools/help/emulator.html)。其次，我相信模拟器的速度取决于您的机器配置。`AVD`如果您已正确创建配置并为其提供足够的内存，则配置越好，它将运行得越好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-26T10:40:18.300

Android 模拟器实际上是一个模拟器，旨在模拟运行 Android 的移动设备，这意味着它模拟运行 Android OS 的硬件，使其尽可能接近 100% 相同。JVM 将 Java 字节码转换为由模拟器解码的 ARM 指令。

iOS 模拟器在更高级别上工作，模拟操作系统及其库，将 OS 调用转换为 OS X 实现，并模拟其他方向的事件，如设备旋转或内存不足的情况。当您在 iOS 模拟器上运行应用程序时，该应用程序会编译成 x86，在您的 Mac 上本机运行。与 Android 模拟器不同，您的 iOS 应用程序不会在模拟器中耗尽内存，因为它不受任何特定 iOS 设备的内存限制。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-26T10:37:19.347

Android SDK 有模拟器，而 ios SDK 有模拟器。

模拟器的行为与其他事物相似，但以完全不同的方式实现。它提供了系统的基本行为，但不一定遵守被模拟系统的所有规则。它可以让您了解某些东西是如何工作的。它使用桌面资源，如处理器、内存等，

模拟器是一个行为与其他事物完全一样的系统，并遵守被模拟系统的所有规则。它实际上是另一个系统的完整复制，一直到与仿真系统的输入和输出二进制兼容，但在与原始仿真系统环境不同的环境中运行。

因此，与模拟器相比，模拟器肯定会更快。

# php - Zend Framework 2 (ZF2) 404 Page not found 调用动作时出错

> ID：15634464
> 
> 赞同：0
> 
> 时间：2013-03-26T10:16:26.143
> 
> 标签：php, zend-framework2

我从[ZF2 Skeleton Application](https://github.com/zendframework/ZendSkeletonApplication)开始。我有一个名为`Application`. 在该模块中，我添加了自己的`ShopController`. 它注册在`module.config.php`其中看起来像这样。

```
return array(
    'router' => array(
        'routes' => array(
            'home' => array(
                'type' => 'Zend\Mvc\Router\Http\Literal',
                'options' => array(
                    'route'    => '/',
                    'defaults' => array(
                        'controller' => 'Application\Controller\Index',
                        'action'     => 'index',
                    ),
                ),
            ),
            'application' => array(
                'type'    => 'Literal',
                'options' => array(
                    'route'    => '/application',
                    'defaults' => array(
                        '__NAMESPACE__' => 'Application\Controller',
                        'controller'    => 'Index',
                        'action'        => 'index',
                    ),
                ),
                'may_terminate' => true,
                'child_routes' => array(
                    'default' => array(
                        'type'    => 'Segment',
                        'options' => array(
                            'route'    => '/[:controller[/:action]]',
                            'constraints' => array(
                                'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                                'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                            ),
                            'defaults' => array(
                            ),
                        ),
                    ),
                ),
            ),
            'shop' => array(
                    'type'    => 'segment',
                    'options' => array(
                            'route'    => '/shop[/][:action][/:id]',
                            'constraints' => array(
                                    'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                                    'id'     => '[0-9]+',
                            ),
                            'defaults' => array(
                                    '__NAMESPACE__' => 'Application\Controller',
                                    'controller'    => 'Shop',
                                    'action'        => 'index',
                            ),
                            'child_routes' => array(
                                    'default' => array(
                                            'type'    => 'Segment',
                                            'options' => array(
                                                    'route'    => '/[:controller[/:action]]',
                                                    'constraints' => array(
                                                            'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                                                            'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                                                    ),
                                                    'defaults' => array(
                                                    ),
                                            ),
                                    ),
                            ),
                    ),
            ),
        ),
    ),
    'controllers' => array(
        'invokables' => array(
            'Application\Controller\Index' => 'Application\Controller\IndexController',
            'Application\Controller\Shop' => 'Application\Controller\ShopController',
        ),
    ),
    [... service_manager,translator,view_manager as in skeleton app ...]
); 
```

我可以通过浏览到 my.example.com/shop/ 来访问商店控制器的索引操作，但是当我尝试执行其他操作时，例如 my.example.com/shop/add 它不起作用。我得到一个404。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:50:09.137

我尝试添加 may_terminate = true 并且它正在工作，同时删除 child_routes 确实有效。

```
 'shop' => array(
            'type'    => 'segment',
            'options' => array(
                'route'    => '/shop[/][:action][/:id]',
                'constraints' => array(
                    'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    'id'     => '[0-9]+',
                ),
                'defaults' => array(
                    '__NAMESPACE__' => 'Application\Controller',
                    'controller'    => 'Shop',
                    'action'        => 'index',
                ),
            ),
            'may_terminate' => true, // I added this
            'child_routes' => array(
                'default' => array(
                    'type'    => 'Segment',
                    'options' => array(
                        'route'    => '/[:controller[/:action]]',
                        'constraints' => array(
                            'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                            'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                        ),
                        'defaults' => array(
                        ),
                    ),
                ),
            ),
        ), 
```

# c++ - C++ 函数中非常奇怪的优先级/优先级

> ID：15634466
> 
> 赞同：1
> 
> 时间：2013-03-26T10:16:30.690
> 
> 标签：c++, operator-precedence

为什么下面会打印出“World Hello！”？

据我了解，根据运算符优先级，这应该从左到右进行评估。但相反，它似乎是从右到左。为什么是这样？

```
#include <iostream>

using namespace std;

char print() {
    cout << "World";
    return '!';
}

int main() {
    cout << "Hello " << print() << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T10:21:02.823

我不认为该标准`print()`就操作员的应用程序调用的确切时间提供任何保证`<<`。

在您的情况下，它看起来像`print()`首先被调用，然后`cout << Hello`被评估，然后才被`[result of the previous expression] << [result of print()]`评估。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T10:22:41.297

这变成

```
operator<<
(
    operator<<
    (
        cout,
        "Hello"
    ),
    print()
)
.operator<<
(
    endl
); 
```

参数的评估顺序是*未*指定[的](https://stackoverflow.com/questions/2934904/order-of-evaluation-in-c-function-parameters)，所以没有什么说在调用 second-innermost`operator<<`之前必须先评估最内层。`print()``operator<<`

这样想：`foo( f1(), f2() );`。哪个将首先被评估，`f1()`还是`f2()`？我们不知道。我们只知道两者都将在`foo()`运行前完成。

从左到右的[优先级](http://en.cppreference.com/w/cpp/language/operator_precedence)意味着它最终以我写它的方式配对。

**很久以后编辑：**轻微的技术错误。接听电话`endl`实际上是会员版本。但是对其他任何东西都没有任何影响。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T10:20:52.247

> 这应该从左到右进行评估。

确实如此。你可以从`!`最后看到它。但是，最终的字符串是在对运算符进行评估`cout` **之后**打印的。但是，**在**操作员评估期间，您正在打印`World`. 然后`Hello!`打印。因此，你得到`WorldHello!`.

正如其他人所写的那样，即使它是你得到的结果（我可以验证它），它甚至可能是关于调用顺序的未定义行为，因为评估的顺序是未指定的。

@Bo 提供了一个非常好的指向 C++ 标准的链接：

```
§5.2.2.8 - [...] The order of evaluation of function arguments is unspecified. [...] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T10:20:16.463

订单未定义。看*[评价顺序](http://en.cppreference.com/w/cpp/language/eval_order)*。

```
cout << i << i++; // Undefined behavior 
```

# ios - 在 Interface Builder 上，将 UILabel 连接到自定义 UIView IBOutlet

> ID：15634468
> 
> 赞同：1
> 
> 时间：2013-03-26T10:16:42.223
> 
> 标签：ios, objective-c, interface-builder, iboutlet

我正在使用最新的 SDK 开发一个 iOS 应用程序。

我创建了一个自定义类：

```
#import <UIKit/UIKit.h>

@interface UICustomView : UIView
{
    @private
    int _counter;
}

@property (nonatomic, weak) IBOutlet UILabel* textField;

@end 
```

在 Storyboard 上，我添加了一个`UIView`并将其类更改为`UICustomView`. 为此，`UIView`我添加了一个`UILabel`使用 Interface Builder，但现在我不知道如何将其`UILabel`与`IBOutlet`自定义视图上的连接。

**你知道我该怎么做吗？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T10:17:48.053

新方法（我已经测试过）

选择您`UICustomView`的界面生成器，您应该`UILabel`在“Outlets”下的右侧的检查器中看到您的。将其拖到您的标签以连接它。

![在此处输入图像描述](../Images/f0e5aaaa6a4068d4e89c289e8328ca80.png)

# scala - 播放框架 2.0。升级bonecp

> ID：15634474
> 
> 赞同：3
> 
> 时间：2013-03-26T10:16:44.507
> 
> 标签：scala, playframework, playframework-2.0, sbt, bonecp

Scala 中有一个用于 Play 2.0 的项目。我遇到了一个与 bonecp 0.7.1 数据库连接有关的已知错误，并希望将此库升级到 0.8.0 版。在文件 /project/plugins.sbt 我添加了以下内容：

```
resolvers += "Sonatype OSS Snapshots" at "https://oss.sonatype.org/content/repositories/snapshots/"

libraryDependencies += "com.jolbox" % "bonecp" % "0.8.0-rc2-SNAPSHOT" 
```

但是在编译和分发构建之后，我得到了一个包含 bonecp 0.7.1 的存档。我应该怎么做才能让 Play Framework 使用 bonecp 0.8.0？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T10:17:09.587

在 Build.scala 中添加 appDependencies

```
"com.jolbox" % "bonecp" % "0.8.0-rc1",  
"org.reflections" % "reflections" % "0.9.8" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-26T22:40:33.630

如果是相同的错误，我们已通过将以下内容添加到我们的`application.conf`

```
# There's a bug in BoneCP 0.7.1: It doesn't actually close expired 
# connections until garbage collection, so they leak. If the application 
# is quiet, garbage collection runs may be very far out (days). We work
# around it by not expiring connections.
# See https://groups.google.com/forum/#!topic/play-framework/RM1QwOFz-2A for 
# more info

db.default.maxConnectionAge=0 
```

为了完整起见，链接：[https ://groups.google.com/forum/#!topic/play-framework/RM1QwOFz-2A](https://groups.google.com/forum/#!topic/play-framework/RM1QwOFz-2A)

# c# - C# PInvoke 通过 Win32 API 获取文件和文件夹的 ACL

> ID：15634475
> 
> 赞同：2
> 
> 时间：2013-03-26T10:16:45.200
> 
> 标签：c#, winapi, pinvoke, acl, .net

我需要哪个 PInvoke 来验证 UNC 路径（\UNC\?\ 或 \?\，文件和文件夹）的权限（CanRead、CanWrite、CanExecute...）。使用 System.IO，我可以使用System.IO `fileInfo.GetAccessControll().GetAccessRules`，`AuthorizationRuleCollection`但我无法使用 System.IO，因为此命名空间不支持长路径。

我知道如何获得所有者，但我没有找到其他信息的解决方案。我以为我也必须使用 GetNamedSecurityInfo，但信息非常稀疏。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:01:05.947

解决方案是使用 GetNamedSecurityInfo 和参数 pSecurityDescriptor 以及 DACL 信息请求。

```
// Get Length
var securityDescriptorLength = /* Win32 Call */ GetSecurityDescriptorLength( pSecurityDescriptor );

// Define array to copy
var securityDescriptorDataArray = new byte[ securityDescriptorLength ];

// Copy by marshal to defined array
/* Win32 Call */ Marshal.Copy( pSecurityDescriptor, securityDescriptorDataArray, 0, ( int ) securityDescriptorLength );

// If path is directory
var securityInfo = new DirectorySecurity( );
securityInfo.SetSecurityDescriptorBinaryForm( securityDescriptorDataArray ); 
```

现在您可以使用获取 AccessRules`securityInfo.GetAccessRules()`

# android - 如何使用android在没有用户交互的情况下从相机捕获图像

> ID：15634476
> 
> 赞同：4
> 
> 时间：2013-03-26T10:16:46.520
> 
> 标签：android, camera

我正在开发一个应用程序，它将在应用程序启动时自动捕获图像并将其存储在 SD 卡中。(ie) 应用程序初始化后无需任何用户交互。我听说使用意图我们可以拍照，但用户交互是必要的。所以我使用了相机类。但它不起作用。我遇到了各种帖子，但似乎没有任何用处。任何人都可以给我一个建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T10:29:21.943

您可以完成以下教程，它将达到您的目的。我有类似的要求，我使用了这段代码，它工作得很好！

[相机 API](http://www.vogella.com/articles/AndroidCamera/article.html)

请参阅第 4 节使用相机 API

# javascript - 无法访问 JavaScript 中 for 循环中存在的 If 语句中的数组

> ID：15634487
> 
> 赞同：1
> 
> 时间：2013-03-26T10:17:12.130
> 
> 标签：javascript

JAVASCRIPT：

```
function identifybrand ( allproducts,favBrand){ 
  var favBrandList = new Array();
  var prodType = document.getElementById('prodType').value;
  for (var i=0;i<=allproducts.length;i++) {
    if (favBrand == allproducts[i].brandName) {
      favBrandList.push(allproducts[i]);
    }
  }
  alert(favBrandList);
} 
```

我无法访问 for 循环外的 favBrandList 数组。有谁知道为什么我无法访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:19:50.700

原因应该是您在循环中遇到脚本错误。

你的循环有问题，`i<=allproducts.length`应该是错误的`i<allproducts.length`。

数组索引开始`from 0 to length - 1`，所以当`i`等于时`allproducts.length`，`allproducts[i]`变为未定义并`allproducts[i].brandName`会抛出脚本错误。

```
function identifybrand(allproducts, favBrand) {
    var favBrandList = new Array();
    var prodType = document.getElementById('prodType').value;
    for (var i = 0; i < allproducts.length; i++) {
        if (favBrand == allproducts[i].brandName) {
            favBrandList.push(allproducts[i]);
        }
    }
    alert(favBrandList);
} 
```

# selenium - Selenium 在没有标识符的情况下向字段输入文本

> ID：15634490
> 
> 赞同：-1
> 
> 时间：2013-03-26T10:17:13.020
> 
> 标签：selenium

我想知道是否有人知道将文本输入到没有任何标识符的字段中。发生的情况是，我访问了一个网站，并在 Web 浏览器前显示了一个登录页面。如果我现在使用 F12，我会在后台收到有关该页面的所有信息，但登录页面除外。

有没有办法盲目输入文字，按tab，再输入一些，然后按回车？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:48:30.713

I will make wild guess: That log in page uses HTTP basic authentification and you need to get to that page using Selenium.

If so, simply use this:

```
 driver.get("http://username:password@your-test-site.com"); 
```

Where `driver` is healthy instance of `WebDriver`

**EDIT** In my testing, I had the same issues as you are having. So try this:

1.  Go to your test site manually
2.  Manually log in
3.  Grab the URL you have been redirected to. In my case its something like `http://my-test-site.com/faces/pages/admin/admin.xhtml`
4.  Use that url to get to the site - i.e: `driver.get("http://username:password@my-test-site.com/faces/pages/admin/admin.xhtml");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:20:11.183

假设您使用的是 firefox，您可以采取以下几种方法：

1.  创建并使用您保存了用户名和密码的配置文件。

2.  尝试在 Firefox 首选项中将您的域列入白名单，如下所示：

profile.SetPreference("network.automa

```
tic-ntlm-auth.trusted-uris", "domain.com");
driver = new FirefoxDriver(profile);
driver.Navigate().GoToUrl("http://user:password@domain.com"); 
```

# ruby-on-rails - Rails：日期时间参数为空？

> ID：15634491
> 
> 赞同：0
> 
> 时间：2013-03-26T10:17:21.197
> 
> 标签：ruby-on-rails, datetime, params

在我的帖子视图中，我有一个`_form`带有`title`和`releaseDate`参数的。

在我的控制器中，我从 中获取值`params[:post][:title]`，但`params[:post][:releaseDate]`是空的。

**post_form**

```
<%= form_for(@post) do |f| %>
  <% if @post.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@post.errors.count, "error") %> prohibited this post from being saved:</h2>

      <ul>
      <% @post.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :title %><br />
    <%= f.text_field :title %>
  </div>
  <div class="field">
    <%= f.label :releaseDate %><br />
    <%= f.datetime_select :releaseDate %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

**post_controller**

```
def create
    @title = params[:post][:title]
    @date = params[:post][:releaseDate]

    @post = Post.new(title: @title, releaseDate: @date)
    @post.user_id = current_user.id

    respond_to do |format|
      if @post.save
        format.html { redirect_to @post, notice: 'Post was successfully created.' }
        format.json { render json: @post, status: :created, location: @post }
      else
        format.html { render action: "new" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end 
```

（我没有使用`@post = Post.new(params[:post])`，因为我想对控制器中的`title`and做一些事情。）`releaseDate`

**post.rb (模型)**

```
class Post < ActiveRecord::Base
  attr_accessible :releaseDate, :title, :user_id
  belongs_to :user
end 
```

关于如何从表单中获取日期时间值并进入我的控制器的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:04:35.703

`releaseDate`不是 rails 约定，尝试将字段重命名为`release_date`. 也许这会有所帮助。

为了证明这个概念，您可以使用所谓的虚拟属性：像这样将 release_date getter 和 setter 添加到模型中（请注意，日志可以帮助您缩小问题范围）：

```
class Post < ActiveRecord::Base
  attr_accessible :releaseDate, :title, :user_id
  belongs_to :user

  def release_date
    date = read_attribute('releaseDate')
    logger.debug("READ DATE IS #{date} aND CLASS IS #{date.class}") # see this in rails server logs 
  end

  def release_date=(date)
    logger.debug("WRITE DATE IS #{date} aND CLASS IS #{date.class}") # see this in rails server logs 
    write_attribute('releaseDate', date)
  end
end 
```

并在视图中全部替换`releaseDate`为`release_date`

# c# - 如何在asp.net中打开pdf到pdf查看器

> ID：15634492
> 
> 赞同：4
> 
> 时间：2013-03-26T10:17:22.517
> 
> 标签：c#, asp.net

我有一本 pdf 书，我想在 asp.net 中的浏览器上的 pdf 查看器中打开此 pdf，例如“ [http://wdn.ipublishcentral.net/informatics/viewinside/40590590200230](http://wdn.ipublishcentral.net/informatics/viewinside/40590590200230) ”，你能推荐我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:19:18.530

`<iframe>`标签用于此。

尝试使用此标签，如下所示：

```
 <iframe src="anyfilename.PDF" width="810px" height="700px" scrolling="no" frameborder="0">
</iframe> 
```

如果您使用telerik控件，就像您提供的链接一样，请使用以下>>

```
<radPdf:PdfWebControl id="PdfWebControl1" runat="server" height="600px" width="100%" /> 
```

和代码隐藏>>

```
if (!IsPostBack) 
        {
            //Get PDF as byte array from file (or database, browser upload, remote storage, etc)
            byte[] pdfData = System.IO.File.ReadAllBytes(@"C:\demo.pdf");

            //Load PDF byte array into RAD PDF
            this.PdfWebControl1.CreateDocument("Document Name", pdfData);
        } 
```

希望它有帮助！！！

# android - 避免一个活动的多个实例

> ID：15634493
> 
> 赞同：0
> 
> 时间：2013-03-26T10:17:22.697
> 
> 标签：android, android-intent

我只是希望我的活动只有一个实例。我阅读了有关意图标志和启动模式的信息，但它只是拒绝工作。我尝试了 SingleTask、SingleTop、各种意图标志等。
我的清单：

```
 <activity
        android:name="com.secret.domain.Player"
        android:label="@string/title_activity_player" 
        android:launchMode="singleTask">
    </activity> 
```

和启动代码：

```
Intent intent = new Intent(getActivity(),Player.class);
intent.putExtra(Intent.EXTRA_TEXT,s);
intent.setData( Uri.parse( s ));
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

Player 活动显然会播放音乐，如果我回去创建一个新实例，仍然会播放音乐，两者都可以同时播放。顺便说一句，永远不会调用 OnNewIntent()。
我想我做错了什么，但我不知道是什么。

编辑：我知道这听起来与其他线程相似，但我阅读了它们，但仍然无法弄清楚如何实现我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:53:17.267

# .htaccess - Joomla 2.5 - 使用 .htaccess 或工具调整自定义 URL

> ID：15634494
> 
> 赞同：0
> 
> 时间：2013-03-26T10:17:24.400
> 
> 标签：.htaccess, url, joomla

我刚刚完成了一个带有高尔夫假期数据库的网站。现在的线索是，我正在使用 joomla 内部 url-rewrite 来生成短 url，这通常很棒，我喜欢它。唯一留给 SEO 优化的是，如果我可以将一个单独的 URL 指向数据库中列出的每个报价。特定优惠的网址如下所示：

```
 http://www.mydomain.com/golfurlaub-mit-greenfee/angebote/urlaubsangebot.html?oid=128 
```

“urlaubsangebot.html”将是详细站点，通过参数“oid”传递offerID，然后是我的数据库中的offer ID。

是否可以创建规则/使用工具，让我可以灵活地为每个优惠分配自定义 URL？例如 ：

新网址

```
http://www.mydomain.com/offers/spain/my-offer-name.html 
```

旧网址

```
http://www.mydomain.com/golfurlaub-mit-greenfee/angebote/urlaubsangebot.html?oid=128 
```

我尝试使用 SEF404 和 JoomSEF 等工具，但它们宁愿破坏我的整个结构，也不愿帮助我应用这些 url。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:49:41.427

Joomla 1.6+ 附带**重定向管理器**（组件 > 重定向）。它正是为此目的而设计的（将旧网址重定向到新网址）。

> Joomla 1.6 将包含一个名为 Redirect 的新组件和插件。它的主要功能是提供一种机制来记录 404“未找到”错误，并让网站所有者能够根据需要将这些错误重定向到另一个页面。

如果有指向您的站点的链接导致错误 404，当您打开管理器时，这些应该已经填充到列表中 - 您只需添加要重定向到的新 url。

参考：

*   [Joomla 1.6 中的链接重定向预览](http://community.joomla.org/blogs/community/1071-a-preview-of-link-redirection-in-joomla-16.html)

![链接列表](../Images/cadbf3bba8c9048878bcaa8cdfb37701.png) ![添加链接](../Images/8a2465291de8155fb22585396b2c089f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:40:20.997

您可以为此使用 .htaccess 重写规则：

```
RewriteEngine On
RewriteRule ^(offers/spain/my-offer-name.html)$ index.php?option=com_mycomponent&oid=128 [L] 
```

# dynamics-crm-2011 - CRM 2011 更新插件：更改了哪些字段？

> ID：15634496
> 
> 赞同：7
> 
> 时间：2013-03-26T10:17:33.457
> 
> 标签：dynamics-crm-2011

如何在同步插件中确定哪些字段发生了变化？
插件在更新时注册。
类似 JavaScript 中的 isDirty() 的东西：

```
// TODO: Implement your custom Plug-in business logic.
IOrganizationService service = localContext.OrganizationService;
Entity account = (Entity)localContext.PluginExecutionContext.InputParameters["Target"];
if (account.GetAttributeValue<String>("address1_latitude").isDirty())
{
    service.Create(new Lead { FirstName = "LOCATION CHANGED" }); // this is a stub
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-26T10:19:57.120

Target 中实际存在的属性是已更改的属性。未更改的属性不会出现在那里。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-26T12:19:03.007

我将稍微扩展 GCATNM 的答案。Target 包含更新请求中包含的所有值，而不仅仅是与数据库中当前存在的值不同的值。

除非您在表单上执行一些极其“hacky”的 JavaScript，否则从 CRM Web 前端更新/创建的目标实体将始终只包含已更改的值，因为 CRM UI 中的 JavaScript 只会发送已经改变。

但是，如果您通过其他方法（OData 调用、使用 SDK 的 C# 更新）更新数据，并且更新请求中包含的值实际上并未更改，它们将显示在插件的目标中。例如，如果您有一个 C# 进程获取特定实体的所有属性，然后更新单个属性，则该实体的所有属性都将显示在目标中。

所以真正的目标不是改变了什么，而是插件完成后实体将是什么。您需要在原图像中包含要检查更改的属性，以便能够确定值是否确实已更改。

# sql-server - Entity Framework 5 中的自动增量，没有数据库中的标识列

> ID：15634502
> 
> 赞同：2
> 
> 时间：2013-03-26T10:17:51.067
> 
> 标签：sql-server, entity-framework

我无法为我的问题找到任何合适的解决方案，所以这是我的问题：

在 Entity Framework (5.0) 中，当实际数据库 (SQL Server 2005) 中没有定义标识列时，如何设置要自动递增的 ID 列 (PK)？

我已经看到了 StoreGeneratedPattern，但不确定如果没有数据库中的身份，这将如何工作。手动方法是使用 MAX(id)+1 手动填充 POCO，但这感觉像是一种 hack，我担心它会在多线程环境中引入问题，在这种环境中，多个请求可能会在我的表中插入记录同时。

请注意，我无法更改数据库中的表模式。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:48:22.680

如果您的应用程序的一个实例是唯一将行插入此表的东西，那么`MAX(Id) + 1`hack 可能就足够了。否则，您需要更改数据库模式以在插入时生成这些值——通过使用 IDENTITY 或使用触发器、存储过程等重新发明轮子。

无论您的解决方案是什么，它都应该保证永远不会生成重复的密钥——即使事务恰好回滚一个或多个插入。

如果没有其他内容插入表中，您应该能够将 Id 更改为标识列而不会破坏兼容性。

**仅供参考：**实体框架`StoreGeneratedPattern`（或`DatabaseGeneratedOption`）仅指定如何在插入和更新时处理值。Using`Identity`告诉 EF 该值预计将由数据库在插入时生成。`Computed`意味着它是在插入和更新时生成的。

# c++ - 默认移动构造函数与默认复制构造函数与默认赋值运算符

> ID：15634503
> 
> 赞同：32
> 
> 时间：2013-03-26T10:17:52.460
> 
> 标签：c++, c++11

为什么 C++ 编译器对自动生成的移动构造函数的限制比对自动生成的复制构造函数或赋值运算符的限制更多？

仅当用户未定义任何内容（即：构造函数、复制、赋值、析构函数..）时才会生成自动生成的移动构造函数

仅当用户未分别定义复制构造函数或赋值运算符时，才会生成复制构造函数或赋值运算符。

我想知道为什么会有差异。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-26T10:28:40.003

我相信向后兼容性在这里起着重要作用。如果用户定义了任何“三规则”函数（copy ctor、copy assignment op、dtor），则可以假定该类进行了一些内部资源管理。在 C++11 下编译时，隐式定义移动构造函数可能会突然使类无效。

考虑这个例子：

```
class Res
{
  int *data;

public:
  Res() : data(new int) {}

  Res(const Res &arg) : data(new int(*arg.data)) {}

  ~Res() { delete data; }
}; 
```

现在，如果为这个类生成了一个默认的移动构造函数，它的调用将导致`data`.

至于阻止默认移动构造函数定义的移动赋值运算符：如果移动赋值运算符执行默认值以外的其他操作，则使用默认移动构造函数很可能是错误的。这就是有效的“三法则”/“五法则”。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-26T10:28:02.473

据我所知，这是因为向下兼容。考虑用 C++（C++11 之前）编写的类，以及如果 C++11 开始自动生成与现有复制ctor 或通常任何其他 ctor 并行的 move-ctor 会发生什么。它很容易破坏现有代码，绕过该类的作者编写的 copy-ctor。因此，生成 move-ctor 的规则仅适用于“安全”情况。

这是Dave Abrahams 关于[为什么隐式 move must go](http://cpp-next.com/archive/2010/10/implicit-move-must-go/)*的*文章，最终导致了 C++11 的当前规则。

这是一个失败的例子：

```
// NOTE: This example assumes an implicitly generated move-ctor

class X
{
private:    
    std::vector<int> v;

public:
    // invariant: v.size() == 5
    X() : v(5) {}

    ~X()
    {
        std::cout << v[0] << std::endl;
    }
};

int main()
{
    std::vector<X> y;

    // and here is where it would fail:
    // X() is an rvalue: copied in C++03, moved in C++0x
    // the classes' invariant breaks and the dtor will illegally access v[0].
    y.push_back(X());
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-26T10:38:03.670

创建 C++ 时，决定自动生成默认构造函数、复制构造函数、赋值运算符和析构函数（除非提供）。为什么 ？因为 C++ 编译器应该能够编译（大多数）具有相同语义的 C 代码，这就是`struct`C 中的工作方式。

然而，后来注意到，每当用户编写自定义析构函数时，她可能也需要编写自定义复制构造函数/赋值运算符；这被称为[三巨头的规则](http://c2.com/cgi/wiki?RuleOfTheBigThree)。事后看来，我们可以看到它可以指定生成的复制构造函数/赋值操作符/析构函数只有在这三个都不是用户提供的情况下才会生成，并且它会帮助捕获很多错误。 .. 并且仍然保持与 C 的向后兼容性。

因此，随着 C++11 的出现，决定这一次事情会做对：新的 move-constructor 和 move-assignment-operator 只有在明确用户没有做任何事情时才会自动生成”特别”与班级。任何“特殊”都被定义为重新定义移动/复制/破坏行为。

为了帮助解决这种情况，如果人们会做一些特别的事情，但仍然想要“自动生成”的特殊方法，`= default`还添加了糖衣。

不幸的是，出于向后兼容性的原因，C++ 委员会无法及时回溯并更改自动生成副本的规则；~~我希望他们已经弃用它以为标准的下一个版本铺平道路，但我怀疑他们会这样做。~~然而，它已被弃用（例如，请参阅第 12.8/7 节的复制构造函数，由@Nevin 提供）。

# c# - 是通过保留关键字吗？

> ID：15634507
> 
> 赞同：8
> 
> 时间：2013-03-26T10:18:07.233
> 
> 标签：c#, .net, linq, reserved-words

我在 C# 的保留关键字列表中找不到“by”，但 Resharper Visual Studio 插件似乎认为它是一个 - 它在生成代码时在其前面加上 @ 转义符（例如，通过执行重构命令）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-26T10:19:36.507

[**by**](http://msdn.microsoft.com/en-us/library/cc713645.aspx)是一个[Query Keyword](http://msdn.microsoft.com/en-us/library/bb310804.aspx)，即它是一个关键字，它只出现在[LINQ Query Expressions](http://msdn.microsoft.com/en-us/library/bb397676.aspx)中的某些位置，特别是只出现在[**group**子句](http://msdn.microsoft.com/en-us/library/bb384063.aspx)中。

> **by**上下文关键字用于查询表达式中的group**子句**，以指定应如何对返回的项目进行分组。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T10:20:01.377

`by`在 LINQ 查询语法中使用。它仅在[查询语法上下文中](http://msdn.microsoft.com/en-us/library/bb310804.aspx)保留。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-26T10:22:07.433

`by`不是保留字，它是`query word`用于使用 LINQ 的：

例如：

```
 (from x in Collection
         group x by n); 
```

`reserved`您可以使用`@`前面的符号 转义任何 C#单词。

# android - 如何从整个 sdcard 中仅选择 .mp3 扩展名文件

> ID：15634514
> 
> 赞同：0
> 
> 时间：2013-03-26T10:18:22.820
> 
> 标签：android, android-dialog, android-file

在我的应用程序中，当用户想要上传音频时，该用户应该只能选择 .mp3 扩展文件。如果用户选择任何其他文件，如 .ppt、.pdf，则不允许。

我已经从 SD 卡中获得了用于文件探索的批准代码：[选择文件对话框](https://stackoverflow.com/questions/3592717/choose-file-dialog)。
但我只想要 .mp3 扩展文件或 .mp3 扩展文件列表。

所以我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:26:58.440

也许你可以检查这样的文件

```
File f = new File("/sdcard/"); 
for (File file : f.listFiles()) 
{
    if(file.getName().endsWith(".mp3"))
    {
        // do something with them, add them to list or whatever
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:31:41.890

检查文件模式然后比较，如果是 mp3 则添加到 arraylist，检查下面的函数，它将返回`mp3`.

```
 Vector<String> mStrings =new Vector<String>();
 int mTotalimage=0;
public void fileExtension(File dir) {
       String mp3Pattern = ".mp3";

       File listFile[] = dir.listFiles();
            if (listFile != null) {
                for (int i = 0; i < listFile.length; i++) {
                    String mCheck=listFile[i].getAbsoluteFile().toString();
                    mCheck=mCheck.substring(mCheck.lastIndexOf("/")+1);
    System.out.println("listFile[i].getAbsoluteFile().toString()"+listFile[i].getAbsoluteFile().toString());
    System.out.println("mCheck..."+mCheck);
                    if (listFile[i].isDirectory() && !(mCheck.startsWith(".")) ) {
                        fileExtension(listFile[i]);
                    } else {

                      //fetch jpg from folders.
                      if (listFile[i].getName().endsWith(mp3Pattern)){
                          mStrings.add(listFile[i].getAbsolutePath().toString());
                          mTotalimage++;
                         //fetch png image from folders.
                        }
                    }
                }
            }
            System.out.println("size on return......."+mStrings.size());
        } 
```

# php - Laravel 3 JSON 和 jQuery getJSON

> ID：15634517
> 
> 赞同：0
> 
> 时间：2013-03-26T10:18:25.940
> 
> 标签：php, javascript, jquery, json, laravel

我正在尝试从 laravel 项目中获取 JSON 结果。

我的 webhotel 上有一个 jquery 应用程序，试图在另一台服务器上访问我的 laravel api。每次我在我的 js 中使用 getJSON 时，我都会在 firebug 中收到以下错误：

```
Object { 
  readyState=0, status=0, statusText="error"
} 
```

我的 laravel 控制器正在使用它来生成 json：

```
$article = News::with('Category', 'Author')->find($id);
return Response::json($article, 200, array('Content-Type' => 'application/javascript')); 
```

如果有人能指出我正确的方向，那就太好了。也许是在两个不同的服务器上拥有 jquery 应用程序和 laravel api？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:50:56.837

Only the first param should be required. It will set the headers and response code automatically. The other issue is that the model is actually quite a bit more complex then what you probably want to return. Try the following.

```
return Response::json( $article->to_array() ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:21:00.410

的内容类型`json`应该是

```
array('Content-Type' => 'application/json') 
```

# actionscript-3 - 在 Action script3 中播放多首歌曲

> ID：15634519
> 
> 赞同：0
> 
> 时间：2013-03-26T10:18:26.667
> 
> 标签：actionscript-3, flash-cs5

我有五个按钮，其中包含五首歌曲。然后我有一个播放按钮和停止按钮。现在，当我单击一首歌曲按钮，然后单击播放按钮时，应该播放相应的歌曲。当我按下停止按钮时，歌曲应该停止。我再次选择不同的歌曲并单击播放按钮，应该播放指定的歌曲。我正在使用下面给出的代码，但我无法获得输出。请帮帮我……！！

```
sng1.addEventListener(MouseEvent.CLICK, mclick);
sng2.addEventListener(MouseEvent.CLICK, mclick);
sng3.addEventListener(MouseEvent.CLICK, mclick);
sng4.addEventListener(MouseEvent.CLICK, mclick);
sng5.addEventListener(MouseEvent.CLICK, mclick);
var url:String;
function mclick(e:MouseEvent)
{
        //private var url:String = "FIFA Theme song.mp3";
        if(e.currentTarget.name == "sng1")
        {
             url="Ippadi Mazhai.mp3";
        }
        else if (e.currentTarget.name == "sng2")
        {
             url = "06 Gore Gore.mp3";
        }
        else if (e.currentTarget.name == "sng3")
        {
             url = "FIFA Theme song.mp3";
        }
        else if (e.currentTarget.name == "sng4")
        {
             url = "babe.mp3";
        }
        else if (e.currentTarget.name == "sng5")
        {
             url = "fast_and_furious_5.mp3";
        }

}
        public class audio extends Sprite{
        private var song:SoundChannel;
        private var soundFactory:Sound;
        public function audio() {
            var request:URLRequest = new URLRequest(url);

            soundFactory = new Sound();
            soundFactory.addEventListener(Event.COMPLETE, completeHandler);
            soundFactory.addEventListener(Event.ID3, id3Handler);
            soundFactory.addEventListener(IOErrorEvent.IO_ERROR, ioErrorHandler);
            soundFactory.load(request);
            song = soundFactory.play();
            plybtn.addEventListener(MouseEvent.CLICK, plClick);
            stpbtn.addEventListener(MouseEvent.CLICK, stpClick);
        }
        private function completeHandler(event:Event):void {
            trace("completeHandler: " + event);
        }

        private function id3Handler(event:Event):void {
            trace("id3Handler: " + event);
        }

        private function ioErrorHandler(event:Event):void {
            trace("ioErrorHandler: " + event);
        }

        private function progressHandler(event:ProgressEvent):void {
            trace("progressHandler: " + event);
        }
        private function plClick(evt:MouseEvent)
        {
             song = soundFactory.play();
        }
        private function stpClick(evt:MouseEvent)
        {
             song.stop();
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:41:41.777

`url`仅仅改变以下代码是不够的，您需要一个`new audio()`语句来实际加载该声音并播放它。正确的方法是，如果您`audio`使用所有 5 个不同的 URL 初始化所有 5 个对象，它们都将处于停止状态，然后显示它们并单击它们的按钮。

# python - 芹菜的新贵脚本

> ID：15634521
> 
> 赞同：1
> 
> 时间：2013-03-26T10:18:32.010
> 
> 标签：python, celery, upstart

我有 celeryd 守护进程，正在处理小任务。这个守护进程是用 Upstart 脚本配置的

```
start on starting cessna
stop on stopping cessna

respawn

script
    chdir /home/ubuntu/projects/cessna
    exec su -c 'cd /home/ubuntu/projects/cessna; export MAX_POOL_SIZE="50";export newrelic-admin run-program celeryd -A cessna.celeryconfig --loglevel=info --concurrency=50 --pool=eventlet --queue=cessna_celery -E --pidfile=/tmp/cessna-3.pid >> /home/ubuntu/logs/cessna-w\
orker-3.log 2>> /home/ubuntu/errs/cessna-worker-3.log';
end script 
```

不久之后，我在 rabbitmq 中看到了很多 unack 任务，日志文件中没有崩溃等。我们转移到本地 /etc/init.d/celeryd 守护进程，它解决了问题。那么，它怎么可能 - 用 Upstart 启动 Celery 和 Celery 中未确认的任务之间有什么关系吗？

# iphone - 找出 iPhone 有多少内存？

> ID：15634525
> 
> 赞同：0
> 
> 时间：2013-03-26T10:18:55.180
> 
> 标签：iphone, ios, objective-c, memory, nsdata

我的应用程序获取电影对象的 NSData 并通过网络发送。问题是，如果视频足够大，我担心我的应用程序会因为内存中有太多数据而崩溃。有没有办法检查正在使用的 iPhone 的限制，所以我可以阻止它传输比这更大的视频？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:22:48.323

您的应用程序在使用过多内存时会收到内存警告。这是你唯一的了解方式。视图控制器将`didReceiveMemoryWarning`调用其方法。`UIApplicationDidReceiveMemoryWarningNotification`还将引发一个事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:32:48.180

我认为它没有根据设备中可用的内存来定义限制。我建议你从磁盘上传文件。ASIHTTP 可以从磁盘流式传输文件。这将解决您的记忆问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T10:22:05.920

即使您发现当前设备上的可用内存量，系统也会在您分配一半内存量之前很久就开始杀死应用程序。您不能简单地选择一个合理的安全块大小并分块发送视频吗？

# ios - 表格视图显示项目中的图像

> ID：15634529
> 
> 赞同：0
> 
> 时间：2013-03-26T10:19:10.620
> 
> 标签：ios, tableview

我正在尝试添加我在项目中添加的图像我使用以下代码

```
UIView *selectionView = [[UIView alloc] initWithFrame:CGRectMake(0, 7, 320, 50)];
    [selectionView setBackgroundColor: [UIColor clearColor]];

    UIImage *image = [[UIImage alloc]init];
    image = [UIImage imageWithContentsOfFile:@"PlaceHolder.png"];
    UIImageView* blockView = [[UIImageView alloc] initWithImage:image];
    blockView.frame = CGRectMake(0, -5, 45, 45);

    if([[[_arrayForTable valueForKey:@"URL"] objectAtIndex:[indexPath row]] isEqualToString:@"No Image"] ) 
    {

        [selectionView addSubview:blockView];

    }
    else
    {
        NSString *path = [[_arrayForTable valueForKey:@"URL"] objectAtIndex:[indexPath row]];

        NSURL *url = [NSURL URLWithString:path];
        AsyncImageView *imageView = [[[AsyncImageView alloc] init] autorelease];
        imageView.frame = CGRectMake(0, -5, 45, 45);
        imageView.imageURL=url;
        [selectionView addSubview:imageView];

    } 
```

其他条件工作完美他们有facebook的url在表格视图中显示图像但是如果条件不工作它进入如果条件但图像没有显示请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:22:21.447

```
UIImage *image = [UIImage imageNamed:@"PlaceHolder.png"];
UIImageView* blockView = [[UIImageView alloc] initWithImage:image];

/*
imageNamed: is to load the picture which is in bundle. pass in the picture name
imageWithContentsOfFile: need to pass in the whole address of the file
*/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:23:16.480

尝试

```
 UIImage *image = [UIImage imageNamed:@"yourfile.png"]; 
```

并将图像添加到 imageView 并检查图像文件是否已添加到您的项目中

# jquery - 如何保留从 JSON 加载的特殊字符

> ID：15634535
> 
> 赞同：0
> 
> 时间：2013-03-26T10:19:29.270
> 
> 标签：jquery, ajax, special-characters

例如，在我的 JSON 文件中，我有字符“ä”。但是当加载到我的 html 中时，它不会呈现。我必须向 Ajax 添加一些东西吗？

```
$.ajax({
        url: "json/content.json",
        data: "nocache=" + Math.random(),
        type: "GET",
        contentType: "application/json",
        dataType: "json",
        success: function(source){
            data = source;
            showInfo();
        },
        error: function(data){
            alert("Failed to load content");
        }
    }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:21:00.123

这听起来像是一个字符集问题，json 对特殊字符没有问题。确保服务器回复和显示它的 html 页面之间的字符集匹配。

# java - java sax 解析器破坏 xml 1.1 的属性

> ID：15634536
> 
> 赞同：4
> 
> 时间：2013-03-26T10:19:29.747
> 
> 标签：java, xml, sax, xml-1.1

我正在使用 java 的 sax 类来解析 xml 文件。如果 xml 文件显示 1.0 版，一切正常，但如果显示 1.1 版，则*某些*属性会被破坏，给我错误的结果，但不会引发任何异常。

我的 xml 文件基本上是这样的：

```
<?xml version="1.1" encoding="UTF-8" ?>
<gpx>
  <trk>
    <name>Name of the track</name>
    <trkseg>
      <trkpt lat="12.3456789" lon="1.2345678">
        <ele>1234</ele>
        <time>2013-03-26T12:34:56Z</time>
        <speed>0</speed>
      </trkpt>
      ... and then 419 further identical copies of this trkpt
    </trkseg>
  </trk>
</gpx> 
```

所以我期望，当我使用 sax 解析这个文件时，会找到 420 个 trkpt 标签，并且每个标签都有 lat 和 lon 属性。特别是，我希望找到 420 个“纬度”属性，它们都是“12.3456789”。

对于解析，我构造了一个处理程序对象并将其提供给该本地文件的流：

```
SAXParser saxParser = SAXParserFactory.newInstance().newSAXParser();
inStream = new FileInputStream(file);
saxParser.parse(inStream, handler);
System.out.println("done"); 
```

处理程序类扩展`org.xml.sax.helpers.DefaultHandler`并且只有一种方法`startElement`来响应 trkpt 标记的打开：

```
public void startElement(String uri, String localName, String qName, Attributes attributes)
{
    if (qName.equals("trkpt") && attributes != null
        && attributes.getLength() == 2
        && attributes.getValue(0).charAt(0) != '1')
    {
        // The trkpt tag has two attributes
        // but the value of the first one doesn't begin with '1'
        System.out.println(attributes.getQName(0) + " = " + attributes.getValue(0));
    }
    super.startElement(uri, localName, qName, attributes);
} 
```

那么结果如何呢？如果 xml 文件的版本为 1.0，那么我看到的只是“完成”。找到了 420 个 trkpt 标签，它们都有两个属性，第一个总是被称为“lat”，这个属性的值总是以“1”开头，正如我所料。伟大的！

如果将 xml 文件更改为`version="1.1"`在第一行指定，则会得到以下输出：

```
lat = :34.56Z</t
lat = :56Z</time
done 
```

所以即使我所有的 420 点都应该相同，但其中两个给了我一个完全错误的属性值。不抛出异常。仍然找到了 420 个 trkpt，它们都有两个属性，称为“lat”和“lon”。奇怪的是，lon 值总是可以的。

我通过直接复制/粘贴第一个 trkpt 在文本编辑器中创建了这个 xml 文件，所以我确定所有值都是相同的，我确定 xml 文件中没有具有有趣属性值的点，而且我确保文件没有非 ascii 字符值或实体代码或任何其他奇怪的东西。

我已经在具有两个不同操作系统的三台不同机器上使用 Sun 的 JRE6、OpenJDK6 和 OpenJDK7 进行了尝试。所以要么我做错了什么，要么这个特定的 xml 文件与 xml1.1 不兼容，或者存在一个广泛存在的 sax 错误（这似乎不太可能，因为我认为它会影响很多人）。再次请注意，使用 xml1.0 一切正常。另请注意，数字 420 没有什么特别之处，只是如果文件只有 100 个条目，那么它们都会被正确解析。如果您有数千个条目，那么其中一定数量的条目会以这种方式破坏它们的第一个属性值。属性值的长度似乎总是正确的，但它会从文件中的错误点提取字符。也许索引溢出？

我尝试删除所有速度标签，但如果您有足够的 trkpts，问题仍然存在。它对额外的空格也很敏感，因此如果我在 trkpts 之间添加换行符，问题会出现在不同的点上或返回不同的属性值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:49:10.923

这个错误在 JDK XML 解析器中已经存在多年，Sun 和 Oracle 都没有表现出修复它的兴趣。我强烈建议优先使用 Apache Xerces XML 解析器。

# javascript - 如何将 req 传递给 Mongoose 模型构造函数？

> ID：15634537
> 
> 赞同：1
> 
> 时间：2013-03-26T10:19:30.590
> 
> 标签：javascript, express, mongoose

我正在尝试通过从当前用户的设置中获取它们来为文档设置一些默认值，这些设置在我的快速中间件的 req.user 对象中可用。

我知道可以将 req 对象传递给中间件，但是可以将它传递给 Schema 默认函数吗？就像是：

```
var Comment = new Schema({
  mood:{ type: String, default: function(req) {
    return (req.user.defaults.mood);
  }},
  content: String
}); 
```

# c# - Nunit 异步测试异常断言

> ID：15634542
> 
> 赞同：45
> 
> 时间：2013-03-26T10:19:53.530
> 
> 标签：c#, nunit, async-await

**[编辑（2020 年 5 月）]** - 据报道，此问题已在 NUnit 的较新版本中得到解决。请参阅[Nunit.ThrowsAsync](https://docs.nunit.org/articles/nunit/writing-tests/assertions/classic-assertions/Assert.ThrowsAsync.html)。（参考[这个答案](https://stackoverflow.com/a/40030988/326543)，谢谢@James-Ross）

* * *

我有一个`UserController`执行此操作的控制器

```
// GET /blah
public Task<User> Get(string domainUserName)
{
        if (string.IsNullOrEmpty(domainUserName))
        {
            throw new ArgumentException("No username specified.");
        }

        return Task.Factory.StartNew(
            () =>
                {
                    var user = userRepository.GetByUserName(domainUserName);
                    if (user != null)
                    {
                        return user;
                    }

                    throw new HttpResponseException(Request.CreateErrorResponse(HttpStatusCode.NotFound, string.Format("{0} - username does not exist", domainUserName)));
                });
} 
```

我正在尝试为抛出 404 异常的情况编写测试。

这是我尝试过的输出 -

1)

```
[Test]
public void someTest()
{
        var mockUserRepository = new Mock<IUserRepository>();
        mockUserRepository.Setup(x => x.GetByUserName(It.IsAny<string>())).Returns(default(User));
    var userController = new UserController(mockUserRepository.Object) { Request = new HttpRequestMessage() };

    Assert.That(async () => await userController.Get("foo"), Throws.InstanceOf<HttpResponseException>());
} 
```

**结果** 测试失败

```
 Expected: instance of <System.Web.Http.HttpResponseException>
  But was:  no exception thrown 
```

2.  [测试] public void someTest() { var mockUserRepository = new Mock(); mockUserRepository.Setup(x => x.GetByUserName(It.IsAny())).Returns(default(User)); var userController = new UserController(mockUserRepository.Object) { Request = new HttpRequestMessage() };

    ```
     var httpResponseException = Assert.Throws<HttpResponseException>(() => userController.Get("foo").Wait());
      Assert.That(httpResponseException.Response.StatusCode, Is.EqualTo(HttpStatusCode.NotFound)); 
    ```

    }

**结果** 测试失败

```
 Expected: <System.Web.Http.HttpResponseException>
  But was:  <System.AggregateException> (One or more errors occurred.) 
```

```
[Test]
public void someTest()
{
        var mockUserRepository = new Mock<IUserRepository>();
        mockUserRepository.Setup(x => x.GetByUserName(It.IsAny<string>())).Returns(default(User));
    var userController = new UserController(mockUserRepository.Object) { Request = new HttpRequestMessage() };

    var httpResponseException = Assert.Throws<HttpResponseException>(async () => await userController.Get("foo"));
    Assert.That(httpResponseException.Response.StatusCode, Is.EqualTo(HttpStatusCode.NotFound));
} 
```

**结果** 测试失败

```
 Expected: <System.Web.Http.HttpResponseException>
  But was:  null 
```

```
[Test]
[ExpectedException(typeof(HttpResponseException))]
public async void ShouldThrow404WhenNotFound()
{            var mockUserRepository = new Mock<IUserRepository>();
        mockUserRepository.Setup(x => x.GetByUserName(It.IsAny<string>())).Returns(default(User));

    var userController = new UserController(mockUserRepository.Object) { Request = new HttpRequestMessage() };

    var task = await userController.Get("foo");
} 
```

**结果** 测试通过

问题 -

1.  为什么 Assert.Throws 不处理 HttpResponseException，而 ExpectedException 处理？
2.  我不想只测试抛出的异常。我想断言响应的状态代码。这样做的方法是什么？

对这些行为及其原因的任何比较都会很棒！

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-03-26T12:13:18.887

您看到的问题是由于`async void`.

尤其是：

1.  `async () => await userController.Get("foo")`被转换为`TestDelegate`, 返回`void`, 所以你的 lambda 表达式被视为`async void`. 所以测试运行器将开始执行 lambda，但不会等待它完成。lambda 在`Get`完成之前返回（因为它是`async`），并且测试运行器看到它没有异常地返回。

2.  `Wait`将任何异常包装在`AggregateException`.

3.  同样，`async`lambda 被视为`async void`，因此测试运行程序不会等待其完成。

4.  我建议你做 this`async Task`而不是`async void`，但在这种情况下，测试运行器会等待完成，因此会看到异常。

根据[这个错误报告](https://bugs.launchpad.net/nunitv2/+bug/1071164)，在 NUnit 的下一个版本中会对此进行修复。同时，您可以构建自己的`ThrowsAsync`方法；xUnit的[示例在这里](https://stackoverflow.com/questions/14084923/how-to-handle-exceptions-thrown-by-tasks-in-xunit-nets-assert-throwst)。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2016-10-13T21:05:18.680

我不确定它是何时添加的，但 Nunit 的当前版本（撰写本文时为 3.4.1）包含 ThrowsAsync 方法

见[https://github.com/nunit/docs/wiki/Assert.ThrowsAsync](https://github.com/nunit/docs/wiki/Assert.ThrowsAsync)

例子：

```
[Test]
public void ShouldThrow404WhenNotFound()
{
    var mockUserRepository = new Mock<IUserRepository>();
    mockUserRepository.Setup(x => x.GetByUserName(It.IsAny<string>())).Returns(default(User));
    var userController = new UserController(mockUserRepository.Object) { Request = new HttpRequestMessage() };

    var exception = Assert.ThrowsAsync<HttpResponseException>(() => userController.Get("foo"));

    Assert.That(exception.Response.StatusCode, Is.EqualTo(HttpStatusCode.NotFound));
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-26T12:09:54.597

[该博客](http://code.jonwagner.com/2012/08/06/anonymous-async-methods-a-quicksand-trap/)讨论了与我类似的问题。

我遵循了那里提出的建议，并进行了这样的测试-

```
 [Test]
    public void ShouldThrow404WhenNotFound()
    {
        var mockUserRepository = new Mock<IUserRepository>();
        mockUserRepository.Setup(x => x.GetByUserName(It.IsAny<string>())).Returns(default(User));
        var userController = new UserController(mockUserRepository.Object) { Request = new HttpRequestMessage() };

        var aggregateException = Assert.Throws<AggregateException>(() => userController.Get("foo").Wait());
        var httpResponseException = aggregateException.InnerExceptions
            .FirstOrDefault(x => x.GetType() == typeof(HttpResponseException)) as HttpResponseException;

        Assert.That(httpResponseException, Is.Not.Null);
        Assert.That(httpResponseException.Response.StatusCode, Is.EqualTo(HttpStatusCode.NotFound));
    } 
```

我对此不太满意，但这有效。

**编辑 1**

受@StephenCleary 的启发，我添加了一个静态助手类来执行我正在寻找的断言。看起来像这样 -

```
public static class AssertEx
{
    public static async Task ThrowsAsync<TException>(Func<Task> func) where TException : class
    {
        await ThrowsAsync<TException>(func, exception => { });
    } 

    public static async Task ThrowsAsync<TException>(Func<Task> func, Action<TException> action) where TException : class
    {
        var exception = default(TException);
        var expected = typeof(TException);
        Type actual = null;
        try
        {
            await func();
        }
        catch (Exception e)
        {
            exception = e as TException;
            actual = e.GetType();
        }

        Assert.AreEqual(expected, actual);
        action(exception);
    }
} 
```

我现在可以进行类似的测试 -

```
 [Test]
    public async void ShouldThrow404WhenNotFound()
    {
        var mockUserRepository = new Mock<IUserRepository>();
        mockUserRepository.Setup(x => x.GetByUserName(It.IsAny<string>())).Returns(default(User));
        var userController = new UserController(mockUserRepository.Object) { Request = new HttpRequestMessage() };

        Action<HttpResponseException> asserts = exception => Assert.That(exception.Response.StatusCode, Is.EqualTo(HttpStatusCode.NotFound));
        await AssertEx.ThrowsAsync(() => userController.Get("foo"), asserts);
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-26T10:53:42.060

如果您等待任务，则抛出的异常将聚合到 AggregateException。您可以检查 AggregateException 的内部异常。这可能是您的案例 2 不起作用的原因。

> 由在任务内运行的用户代码引发的未处理异常会传播回加入线程，但本主题后面描述的某些场景除外。当您使用静态或实例 Task.Wait 或 Task.Wait 方法之一时会传播异常，并且您通过将调用包含在 try-catch 语句中来处理它们。如果一个任务是附加子任务的父任务，或者如果您正在等待多个任务，则可能会引发多个异常。要将所有异常传播回调用线程，Task 基础结构将它们包装在 AggregateException 实例中。AggregateException 有一个 InnerExceptions 属性，可以枚举该属性以检查所有引发的原始异常，并单独处理（或不处理）每个异常。即使只抛出一个异常，

[链接到 MSDN](http://msdn.microsoft.com/en-us/library/dd997415.aspx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-05-25T06:22:18.350

我有一个与场景 3 测试用例类似的问题，由于以下结果而失败

```
Expected: <UserDefineException>
But was:  null 
```

通过使用 Assert.ThrowAsync<> 问题得到解决

我的 Web API 操作方法和单元测试用例方法如下

```
public async Task<IHttpActionResult> ActionMethod(RequestModel requestModel)
{
   throw UserDefineException();
}

[Test]
public void Test_Contrller_Method()
{
   Assert.ThrowsAsync<UserDefineException>(() => _controller.ActionMethod(new RequestModel()));
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-08-22T02:43:24.203

这是文档中的一个示例：

```
var ex = Assert.ThrowsAsync<ArgumentException>(async () => await MethodThatThrows()); 
```

1.  利用`ThrowsAsync`
2.  使用`async`/`await`

[https://docs.nunit.org/articles/nunit/writing-tests/assertions/classic-assertions/Assert.ThrowsAsync.html](https://docs.nunit.org/articles/nunit/writing-tests/assertions/classic-assertions/Assert.ThrowsAsync.html)

# python - 带有样本数据集的python字典

> ID：15634548
> 
> 赞同：0
> 
> 时间：2013-03-26T10:20:09.657
> 
> 标签：python, datetime, python-2.7

你能帮帮我吗，我是 python 新手，这是一个包含一些数据的列表

```
data_list=[[], [247L, datetime.datetime(2011, 4, 7, 0, 0), datetime.datetime(2011, 9, 14, 7, 55, 1)],  [247L, datetime.datetime(2011, 4, 7, 0, 0), datetime.datetime(2011, 9, 1, 11, 59)], [247L, datetime.datetime(2011, 4, 7, 0, 0), datetime.datetime(2012, 3, 1, 11, 59)],  [247L, datetime.datetime(2011, 4, 7, 0, 0), datetime.datetime(2012, 4, 29, 22, 54, 11)], [248L, datetime.datetime(2011, 4, 7, 0, 0), datetime.datetime(2012, 3, 1, 11, 59)], [254L, datetime.datetime(2011, 4, 7, 0, 0), datetime.datetime(2012, 3, 1, 11, 59)], [258L, datetime.datetime(2011, 4, 7, 0, 0)], [259L, datetime.datetime(2011, 4, 7, 0, 0), datetime.datetime(2011, 9, 14, 7, 55, 1)], [259L, datetime.datetime(2011, 5, 7, 0, 0), datetime.datetime(2012, 3, 1, 11, 59)]] 
```

其中 247、248.. 是唯一标识，我想将如下所示的日期提取到字典中，

```
data_dict={247:('2011-4-7','2011-9-1'),248:('2011-4-7','2012-3-1'),254:('2011-4-7','2012-3-1'),258:('2011-4-7', '2011-9-14'), 259:('2011-5-7','2011-9-14')} 
```

并将此字典发送到返回这样结果的函数，147 表示 2 个日期之间的天数

```
data_count={247:'147',248:'329',254:'329',258:'0',259:'130'} 
```

我写了一个小代码来计算天数，但我不知道如何通过函数发送它

```
a='2011-5-7'  
b='2011-9-14'   
date_format = "%Y-%m-%d"  
a=datetime.strptime(a, date_format)  
b = datetime.strptime(b, date_format)   
delta = b - a   
print delta.days 
```

这个对吗

```
 class a:
     def __init__(self):

     def datedifference(self,a, b):
       self.date_format = "%Y-%m-%d"
       return (datetime.strptime(b, self.date_format) -datetime.strptime(a,              self.date_format)).days  

  def main():
      data_dict={247:('2011-4-7','2011-9-1'),248:('2011-4-7','2012-3-1'),254: ('2011-4-7','2012-3-1'),258:('2011-4-7',)259:('2011-5-7','2011-9-14')} 
      ob=a()
      {k: ob.datedifference(v[0],v[1]) for k, v in data_dict.iteritems()} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:24:20.117

使它成为一个函数很容易：

```
def datedifference(a, b):
    date_format = "%Y-%m-%d"
    return (datetime.strptime(b, date_format) - datetime.strptime(a, date_format)).days 
```

将其应用于您的应用`data_dict`也不难：

```
{k: datedifference(*v) for k, v in data_dict.iteritems()} 
```

这给出（带有修复的`data_dict`输入样本）：

```
>>> {k: datedifference(*v) for k, v in data_dict.iteritems()}                                                               {248: 329, 258: 160, 259: 130, 254: 329, 247: 147} 
```

这*确实*假设每个数据点有 2 个日期；如果您只有 1，则需要调整函数以测试更少的日期。

首先生成`data_dict`：

```
data_dict = {}

for row in data_list:
    if not row: continue
    key, dates = row[0], row[1:]
    if key in data_dict: continue  # already in there
    data_dict[key] = tuple(map(datetime.date.isoformat, dates)) 
```

生成：

```
{248L: ('2011-04-07', '2012-03-01'), 258L: ('2011-04-07',), 259L: ('2011-04-07', '2011-09-14'), 254L: ('2011-04-07', '2012-03-01'), 247L: ('2011-04-07', '2011-09-14')} 
```

# parsing - Haskell 相当于 scala 收集

> ID：15634549
> 
> 赞同：14
> 
> 时间：2013-03-26T10:20:10.563
> 
> 标签：parsing, scala, haskell

我正在尝试读取包含以下形式的键/值对的文件：

```
#A comment
a=foo
b=bar
c=baz
Some other stuff 
```

正如建议的那样，使用其他各种线路。这想进入一个地图，然后我可以从中查找密钥。

我最初的方法是读入行并拆分 '=' 字符以获得`[[String]]`. 在 Scala 中，我会使用`collect`，它接受一个部分函数（在这种情况下，类似于`\x -> case x of a :: b :: _ -> (a,b)`并将其应用到定义的地方，丢弃未定义函数的值。Haskell 是否有任何等价物？

如果做不到这一点，人们将如何在 Haskell 中做到这一点，无论是按照我的思路还是使用更好的方法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-26T10:24:45.633

通常这是使用`Maybe`类型和完成的`catMaybes`：

```
catMaybes :: [Maybe a] -> [a] 
```

因此，如果您的解析函数具有类型：

```
parse :: String -> Maybe (a,b) 
```

然后您可以通过将输入字符串解析为行、验证每一行并仅返回定义的值来构建映射：

```
Map.fromList . catMaybes . map parse . lines $ s 
```

`s`你的输入字符串在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-22T02:14:03.990

List Monad 提供了您正在寻找的内容。这可能最容易通过列表理解来利用，尽管它也适用于 do 表示法。

首先，这是供参考的 Scala 实现 -

```
// Using .toList for simpler demonstration
scala> val xs = scala.io.Source.fromFile("foo").getLines().toList
List[String] = List(a=1, b=2, sdkfjhsdf, c=3, sdfkjhsdf, d=4)

scala> xs.map(_.split('=')).collect { case Array(k, v) => (k, v) }
List[(String, String)] = List((a,1), (b,2), (c,3), (d,4)) 
```

现在使用 Haskell 的列表理解版本 -

```
λ :m + Data.List.Split
λ xs <- lines <$> readFile "foo"
λ xs
["a=1","b=2","sdkfjhsdf","c=3","sdfkjhsdf","d=4"]

-- List comprehension
λ [(k, v) | [k, v] <- map (splitOn "=") xs]
[("a","1"),("b","2"),("c","3"),("d","4")]

-- Do notation
λ do { [k, v] <- map (splitOn "=") xs; return (k, v) }
[("a","1"),("b","2"),("c","3"),("d","4")] 
```

`fail`发生的情况是模式匹配条件正在过滤掉使用from 方法不匹配的情况`Monad`。

```
λ fail "err" :: [a]
[] 
```

因此，列表理解和 do 表示法都在利用`fail`，这对这一点很不利 -

```
map (splitOn "=") xs >>= (
  \s -> case s of
    [k, v] -> return (k, v)
    _ -> fail ""
) 
```

# scala - 解析 JSON 格式的响应

> ID：15634555
> 
> 赞同：0
> 
> 时间：2013-03-26T10:20:33.377
> 
> 标签：scala, google-bigquery

我正在使用 Scala 的 BigQuery。我尝试了示例 Scala 代码来调用 Google bigQuery API

斯卡拉：

```
val queryInfo: QueryRequest = 
  new QueryRequest().setQuery(s"SELECT * FROM $PROJECT_ID:$dataSetId.$tableId;")
val queryRequest: Bigquery#Jobs#Query = 
  bigquery.jobs().query(PROJECT_ID, queryInfo)
val queryResponse: QueryResponse = 
  queryRequest.execute() 
```

以上 BQ 回报：

```
{
  "jobComplete":true,
  "jobReference":{
    "jobId":"job_xxx",
    "projectId":"xxx"
  },
  "kind":"bigquery#queryResponse",
  "rows":[{"f":[{"v":"1"},{"v":"1364206559422"}]}],
  "schema": {
    "fields":[
      {"mode":"NULLABLE","name":"id","type":"STRING"},
      {"mode":"NULLABLE","name":"timestamp","type":"INTEGER"}
    ]
  },
  "totalRows":"1",
  "pageToken":"xxxx"
} 
```

请帮助我以 JSON 格式解析结果上方的值，或更改查询以返回如下格式的结果：

```
{"id": "1", "timestamp": "1364206559422"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:15:51.527

我喜欢[提升 json](https://github.com/lift/lift/tree/master/framework/lift-base/lift-json/)。

看看乐透的例子，案例类很简单

# android - Android ActionBarSherlock 在 Fragment（不是 FragmentActivity）中显示 ProgressBarIndeterminate

> ID：15634556
> 
> 赞同：1
> 
> 时间：2013-03-26T10:20:34.783
> 
> 标签：android, android-fragments, actionbarsherlock, android-progressbar

如何显示 ProgressBarIndeterminate （或使用这些）

```
requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
setSupportProgressBarIndeterminateVisibility(true); 
```

在`Fragment/SherlockFragment`（不是 SherlockFragmentActivity）中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T10:54:17.793

```
getActivity.setSupportProgressBarIndeterminateVisibility(true); 
```

和

```
getActivity().requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:23:21.697

您不能调用`requestWindowFeature`. `Fragment`要将内容设置为 a`Fragment`您需要覆盖`onCreateView()`并返回`View`您`Fragment`应该显示的内容。

可能您应该阅读更多内容[`Fragments`](http://developer.android.com/guide/components/fragments.html)。

# java - 如何匹配 Java Computer Guess Your Number Game 的给定输出；二进制搜索

> ID：15634562
> 
> 赞同：0
> 
> 时间：2013-03-26T10:20:45.013
> 
> 标签：java

我在这方面遇到了很多麻烦，很快就要到期了，我想知道是否有人知道如何解决我的问题。我必须创建一个程序，其中：“您的任务是实现一个基于二进制搜索原理工作的数字猜测器。在每一步中，计算机将查询间隔减半。当间隔包含单个数字时，它会宣布答案。程序的用户选择 1 到 100 之间的一个数字。然后要求计算机猜测这个数字。

示例输出如下：

```
Is your number greater than 50? (computer is asking this)
no (user responds with yes or no)
Is your number greater than 25?
no
Is your number greater than 13?
no
Is your number greater than 7?
yes
Is your number greater than 10?
yes
Is your number greater than 12?
yes
Is your number 13?
yes
13 is the answer. (computer declares final answer)
Thank you for playing the guessing game. 
```

相比之下，我的示例输出为：

```
Is your number greater than 50?
no
Is your number greater than 25?
no
Is your number greater than 13?
no
Is your number greater than 7?
yes
Is your number greater than 10?
yes
Is your number greater than 11?
yes
Is your number greater than 12?
yes
Is your number 12?
yes
12 is the answer.
Thank you for playing the guessing game. 
```

根据我所做的编辑有一些变化。

代码如下：

```
//import statements
import java.util.Scanner;
import java.util.ArrayList;
public class Numbers
{

//constant to initialize the ArrayList
private final int AT_MOST = 100;
//anArrayList of type ArrayList<Integer> which is to hold the values from 1 - 100 
private ArrayList<Integer> anArrayList;

/**
 * Constructor of the Numbers() class which initializes all of the instance fields
 */
public Numbers()
{
    anArrayList = new ArrayList<Integer>();
    int i =0;
    //while loop to initialize anArrayList with values from 1-100
    while(i < AT_MOST)
    {
        anArrayList.add(i+1);
        i++;
    }
}

public void search()
{
    int low = 0;
    int high = anArrayList.size();
    int i = 0;
    int j = 0;
    while(low <= high)
    {
        int mid = (low + high)/2;
        mid = anArrayList.get(mid - 1);
        Scanner in = new Scanner(System.in);
        System.out.println("Is your number greater than " + mid + "?");
        String answer = in.nextLine();
        if(answer.equalsIgnoreCase("yes"))
        {

            low = mid + 1;

        }
        else if (answer.equalsIgnoreCase("no"))
        {

            high = mid - 1;
            low++;
        }
        if(low == high+1)
        {
            Scanner in2 = new Scanner(System.in);
            System.out.println("Is your number " + mid + "?");
            String finalAnswer = in2.nextLine();
            if(finalAnswer.equalsIgnoreCase("yes"))
            {
                System.out.println(mid + " is the answer.");
                System.out.println("Thank you for playing the guessing game.");
                low = high + 1;;
            }
            else
            {
                System.out.println("Please play again, something went wrong!");
                low = high + 1;
            }
        }
    }
}
} 
```

当然，这也有一个相对较短的测试器类：

```
 public class NumbersGuesser
 {
  public static void main(String[] args)
   {
    //creates a new numbers object
    Numbers newNumber = new Numbers();
    //run method is called, game is played.
    newNumber.search();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T02:03:54.043

既然你努力解决了这个问题，我就继续重组你的 Numbers 类。

我做的第一件事是摆脱 ArrayList。您可以像遍历 ArrayList 一样轻松地对整数进行算术运算。

我添加了几个整数、距离和方向。每次猜测后，距离减半。计算机猜测高或低，直到距离减少到零。在这一点上，这个数字介于低和高之间，包括在内。

方向只是告诉我们下一次猜测是否需要猜测更低（-1）或更高（+1）。

我将高低扫描仪代码拉到自己的方法中。起初它看起来令人困惑，但它所做的只是告诉我们是猜测更高（真）还是更低（假）。通过将此代码移动到它自己的方法中，我可以专注于猜测逻辑。

最后，我在处理结束时关闭了扫描仪。

```
//import statements
import java.util.Scanner;

public class Numbers {

    // constants to start the game
    private final int AT_LEAST = 0;
    private final int AT_MOST = 100;

    /**
     * Constructor of the Numbers() class
     */
    public Numbers() {

    }

    public void search() {
        int low = AT_LEAST;
        int high = AT_MOST;
        int guess = (low + high) / 2;
        int distance = guess / 2;
        int direction = 1;

        System.out.println("Guess a number between " + low + " and " + high
                + ".");

        Scanner in = new Scanner(System.in);

        do {
            boolean greaterThan = getHighLowResponse(in, direction, guess);
            if (greaterThan) {
                low = guess;
                guess += distance;
                direction = 1;

            } else {
                high = guess;
                guess -= distance;
                direction = -1;
            }
            distance /= 2;
        } while (distance != 0);

        for (int i = low; i <= high; i++) {
            System.out.println("Is your number " + i + "?");
            String finalAnswer = in.nextLine().toLowerCase();
            if (finalAnswer.equalsIgnoreCase("yes")) {
                System.out.println(i + " is the answer.");
                System.out.println("Thank you for playing the guessing game.");
                break;
            }
        }

        in.close();

    }

    private boolean getHighLowResponse(Scanner in, int direction, int guess) {
        do {
            System.out.println("Is your number " + getDirection(direction)
                    + " than " + guess + "?");
            String answer = in.nextLine().toLowerCase();
            if (direction < 0) {
                if (answer.equals("yes"))
                    return false;
                if (answer.equals("no"))
                    return true;
            } else {
                if (answer.equals("yes"))
                    return true;
                if (answer.equals("no"))
                    return false;
            }
        } while (true);
    }

    private String getDirection(int direction) {
        if (direction < 0) {
            return "less";
        } else {
            return "greater";
        }
    }
} 
```

# php - 使用 AJAX 将 PHP Session 拉入 JS

> ID：15634563
> 
> 赞同：-4
> 
> 时间：2013-03-26T10:20:47.480
> 
> 标签：php, javascript, ajax

我正在尝试在一些 JS 中使用变量。我了解如何通过 AJAX 执行 PHP 会话，但我需要拉一个 PHP 会话以在 JS 中使用。

谁能帮助指出我如何能够修复下面的代码以显示当前设置为 $_SESSION['variaible']; 的任何内容的警报

谢谢！

会话.php

```
<?php
session_start();
$_SESSION['variable'] = "true";
?> 
```

下载.html

```
<html>
<head>
<script>
function closeDownload()
{
   session_start();
   $variable = $_SESSION['variable'];

   $.get("session.php")   
   alert("<?php echo "$variable"; ?>");
}
</script>

</head>
<body>
<a href="close_download.php" data-role="button" onClick="closeDownload()">Close</a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:26:26.937

你可以这样做。

```
 <?php

   session_start();
   $_SESSION['variable']="mysession";
?>
<html>
<head>  
<script type="text/javascript">
function closeDownload()
{
   alert("<?php echo $_SESSION['variable']; ?>");
}
</script>

</head>
<body>
<a href="javascript:void(0)" data-role="button" onClick="closeDownload()">Close</a>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:27:00.307

在您的情况下，这将类似于：

```
<?php
    session_start();
?>
<head>
    <script>
        function closeDownload()
        {

               var variable = <?php echo $_SESSION['variable']; ?>;

               alert(variable);
        }
    </script>

</head> 
```

PHP 与 JS 是分开的，但您可以像通常使用 HTML 一样从 PHP 中“回显”到 javascript。请记住，这`session_start`必须是您代码中的第一件事，因为它设置了一些标题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T10:27:48.863

**选项一：**

您可以直接访问 php 文件中的变量。

1.  将文件 download.html 重命名为 download.php。
2.  变量 =`<?php echo $_SESSION['variable']; ?>`

**选项二：**

您进行 ajax 调用以从 php 文件中获取值

1.  创建一个文件 getsession.php
2.  `<?php echo $_SESSION['variable']; ?>`
3.  对此页面进行 ajax 调用。

# asp.net-mvc-3 - 将开源 CMS 框架集成到现有的 MVC3 / MVC4 站点中

> ID：15634564
> 
> 赞同：5
> 
> 时间：2013-03-26T10:20:47.620
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, open-source, content-management-system

我的任务是寻找一个可以慢慢集成到一组现有网站中的开源 CMS。通过这种方式，页面可以一个一个地传送到 CMS，而站点在转换期间保持活动状态。

* * *

**是否有人对哪种 CMS 解决方案适合解决我上面概述的问题有任何想法、经验或建议？**

* * *

在过去的几天里，我一直在尝试各种产品，并找到了以下选项。但是，如果没有使用 CMS 的经验，那么从更有经验的开发人员那里获得其他关于应该避免哪些坑的观点会非常有帮助。

[N2 CMS](http://n2cms.com/) - 一个成熟的选项，我已经完成了这项工作，但确实缺乏文档。我还发现很难找到数据库的最低规格要求以及浏览器兼容性。不过，我确实喜欢用于创建模板页面的代码结构。

[Phun CMS](https://github.com/noogen/phuncms) - 这是一个新的开源项目，我非常喜欢程序员处理问题和分离关注点的方式。它可能太新了，但目前无法真正看到。

[Composite C1](http://www.composite.net/) - 一个成熟的 CMS 选项，很棒的文档。但是说它只支持IE9+。

[Umbraco](http://umbraco.com/) - 尚未尝试但看起来很重量级

[Piranha](http://www.piranhacms.org/) - 还没有尝试过，但是很好的网站和文档，还说它很轻量级。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-11T11:27:12.797

我是 Piranha CMS 的首席开发人员，所以也许我可以了解 Piranha CMS 最擅长的领域！

我们的重点是内容管理，并为开发人员提供透明且轻量级的 API。Piranha CMS 几乎**没有**渲染任何 HTML 的组件或助手，它只提供一个数据库、一个管理器界面和一个路由机制，用于检索当前请求的正确数据。

如果您有一个现有网站，您实际上可以完全绕过路由，在管理器界面中一次添加一个页面，然后在现有页面中手动加载页面模型。这将允许您保持原始应用程序完全相同，但管理管理器界面的内容。

希望您能找到您正在寻找的 CMS，如果您对 Piranha 有任何疑问，请随时与我联系！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T14:43:10.477

功能齐全的 ASP.NET CMS 的另一个选择是 Orchard。但与所有功能齐全的 CMS 一样，您会被关于 CMS 的初始学习曲线困住。转换为 CMS 后，您也会坚持使用该 CMS，因此在决定使用 CMS 之前，请先进行所有研究和基本网站功能开发，因为转换后会很困难。

Phun CMS 方法不同。意识到每个站点都是定制的，除了您允许客户修改并且不需要在半夜打电话来进行修改的小东西，Phun CMS 诞生了。ASP.NET MVC 等现代框架已经具备所有 CMS 功能：身份验证、路由、剃须刀模板/主题等... Phun CMS 只是提供了一种存储客户端动态内容的方法。你仍然可以利用你已经知道的关于 ASP.NET MVC 和 Razor 的一切。但我也是 Phun CMS 的作者，所以也许我的评论（有点，只是有点；）偏向于这个话题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-21T09:45:38.347

N2 CMS 绝对符合要求，它特别适合一点一点地集成到现有站点中。它轻巧，美观且反应灵敏。它也对开发人员非常友好，不会强迫您使用它的模型。

唯一的问题是你提到的那个，文档不是最好的，所以最初很难进入。但是，您会发现在最初的障碍之后很容易掌握窍门。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T10:56:39.247

如果您想逐页浏览，我建议设置新的 CMS 尝试匹配所有请求，如果未找到匹配项，而不是抛出 404，重定向到旧实例（这反过来又可以返回如果需要，通用 404）。

我不认为这种解决方案特定于任何 CMS，但请检查您是否能够修改 404 页面行为（实际上，您应该在任何成熟的 CMS 中）。

# c# - 在本地运行云项目时，有没有办法检索用户特定信息？

> ID：15634573
> 
> 赞同：0
> 
> 时间：2013-03-26T10:21:16.790
> 
> 标签：c#, azure, web-config, tokenize

我们的 cscfg 文件中有一些特定于用户的值，例如服务总线名称空间、用户名和密码等。我想知道我们是否可以在本地运行解决方案时在构建时检索这些值，所以场景将是：

1.  从 repo 获取解决方案
2.  在本地构建（这将导致开发人员特定的变量替换 %username% 或 %password% 之类的标记或配置文件中的预定义值
3.  无需替换配置文件中的任何内容即可运行解决方案

我已经看到这个解决方案是用 powershell 实现的，但我正在寻找一个替代方案。基本上，您在构建解决方案之前运行一个 ps 脚本，它会替换（去标记化）配置文件中的任何标记。我想知道我是否可以通过 web.config 转换来做到这一点。但话又说回来，我想需要更改 cscfg 中的值。有什么想法吗？

# javascript - javascript倒计时显示天数？

> ID：15634575
> 
> 赞同：0
> 
> 时间：2013-03-26T10:21:21.687
> 
> 标签：javascript

我有这个将显示秒数的 javascript 倒计时。我需要知道如何在柜台显示天数而不是秒数。

即1天，还剩2小时。

这是代码：

```
 <script type="text/javascript">
var MAX_COUNTER = 1000;
var counter = null;
var counter_interval = null;

function setCookie(name,value,days) {
    var expires;
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        expires = "; expires="+date.toGMTString();
    }
    else {
        expires = "";
    }
    document.cookie = name+"="+value+expires+"; path=/";
}

function getCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1,c.length);
        }
        if (c.indexOf(nameEQ) === 0) {
            return c.substring(nameEQ.length,c.length);
        }
    }
    return null;
}

function deleteCookie(name) {
    setCookie(name,"",-1);
}

function resetCounter() {
    counter = MAX_COUNTER;
}

function stopCounter() {
    window.clearInterval(counter_interval);
    deleteCookie('counter');
}

function updateCounter() {
    var msg = '';
    if (counter > 0) {
        counter -= 1;
        msg = counter;
        setCookie('counter', counter, 1);
    }
    else {
        counter = MAX_COUNTER;

    }
    var el = document.getElementById('counter');
    if (el) {
        el.innerHTML = msg;
    }
}

function startCounter() {
    stopCounter();
    counter_interval = window.setInterval(updateCounter, 1000);
}

function init() {
    counter = getCookie('counter');
    if (!counter) {
        resetCounter();
    }
    startCounter();
}

init();
</script> 
```

目前它只显示秒数，一旦达到 0 就会重新启动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T11:00:28.957

```
http://jsfiddle.net/h2DEr/1/

function updateCounter() {
    var msg = '';
    if (counter > 0) {
        counter -= 1;
        msg = convertSecondsToDays(counter); 
        setCookie('counter', counter, 1);
    }
    else {
        counter = MAX_COUNTER;
    }
    var el = document.getElementById('counter');
    if (el) {
        el.innerHTML = msg;
    }
} 
```

这是将秒转换为天的函数

```
function convertSecondsToDays(sec) {
  var days, hours,rem,mins,secs;
  days =  parseInt(sec/(24*3600));
  rem = sec - days*3600
  hours = parseInt(rem/3600);
  rem = rem - hours*3600;
  mins = parseInt(rem/60);
  secs = rem - mins*60;
  return days +" days " + hours +" hours "+mins + " mins "+ secs + " seconds";
} 
```

**更新：**在@sanya_zol 的回答和大卫史密斯的评论之后

因为 setInterval 不应该每秒运行一次，所以你需要稍微改变你的策略。我也为此修改了小提琴

1.  当您希望它过期时，将 MAX_COUNTER 设置为一个值。
2.  不是将计数器减少 -1，而是检查当前时间，从到期日期中减去它并显示它。

    ```
     EXPIRY_SECONDS = 24*60*60;
      MAX_COUNTER = parseInt(new Date().getTime()/(1000)) + EXPIRY_SECONDS;

      function updateCounter() {
         var msg = '',curTime = parseInt(new Date().getTime()/1000);

         if (curTime < MAX_COUNTER) {
            msg = convertSecondsToDays(MAX_COUNTER- curTime);
            setCookie('counter', MAX_COUNTER- curTime, 1);
         }
         else {
            MAX_COUNTER = parseInt(new Date().getTime()/1000) + EXPIRY_SECONDS;
         }

         var el = document.getElementById('counter');
         if (el) {
           el.innerHTML = msg
         }
       } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:28:29.463

```
counter_interval = window.setInterval(updateCounter, 1000); 
```

1000 是以毫秒为单位的值，那么一天有多少毫秒？

```
counter_interval = window.setInterval(updateCounter, 1000*60*60*24); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T11:03:35.807

除了vdua的回答：

你的代码写得很糟糕。

它使用 setInterval 计数器不精确（此外，它的精度非常非常差）-因此**您的计数器的秒数将等于 1.05-1.2 实际秒数**（实时时间和计数器之间的差异**将累积**）。

您应该每次以较低的间隔（如 100 毫秒）检查系统时间（通过**(new Date).getTime() ）以获得精确的计数器。**

# unity3d - 如何统一使用静态 C++ 库？

> ID：15634579
> 
> 赞同：1
> 
> 时间：2013-03-26T10:21:38.287
> 
> 标签：unity3d

我正在基于 Unity3d 在 iOS 上构建一个应用程序，我需要一个统一链接的静态库（.a）。但是好像不能直接在Unity中导入.a库，必须在XCode项目中导入。您必须在 XCode 中编写一些额外的代码作为中间件。由于 C# 和 C++ 之间的通信会导致一些性能问题（大约 3-5 帧延迟），是否有唯一的方法可以在 Unity 中使用静态 C++ 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:13:27.447

“将 .a 和 .h 文件复制到 Assets/Plugins/iOS”解决方案不适用于最新版本的 Unity。我认为解决这个问题的唯一方法是暂时在 XCode 中手动添加这些 .a 和 .h 文件。

# python - 'lxml.etree._Element' 对象没有属性 'write' ??? （PYTHON）

> ID：15634580
> 
> 赞同：5
> 
> 时间：2013-03-26T10:21:40.637
> 
> 标签：python, lxml, elementtree

```
from lxml import etree

root = etree.Element('root1') 
element = etree.SubElement(root, 'element1')
root.write( 'xmltree.xml' ) 
```

错误：

```
AttributeError: 'lxml.etree._Element' object has no attribute 'write' 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T10:49:06.500

`Elements`(like `root`) 没有`write`方法，但[ElementTrees](http://lxml.de/tutorial.html#the-elementtree-class)有：

```
from lxml import etree

root = etree.Element('root1') 
element = etree.SubElement(root, 'element1')
tree = root.getroottree()
print(type(tree))
# <type 'lxml.etree._ElementTree'>
tree.write('xmltree.xml') 
```

* * *

网上的文档`tree.write`有点难找。这是该方法的文档字符串：

```
In [7]: tree.write?
Type:       builtin_function_or_method
Base Class: <type 'builtin_function_or_method'>
String Form:    <built-in method write of lxml.etree._ElementTree object at 0x95c48cc>
Namespace:  Interactive
Docstring:
    write(self, file, encoding=None, method="xml",
              pretty_print=False, xml_declaration=None, with_tail=True,
              standalone=None, compression=0,
              exclusive=False, with_comments=True)

    Write the tree to a filename, file or file-like object.

    Defaults to ASCII encoding and writing a declaration as needed.

    The keyword argument 'method' selects the output method:
    'xml', 'html', 'text' or 'c14n'.  Default is 'xml'.

    The ``exclusive`` and ``with_comments`` arguments are only
    used with C14N output, where they request exclusive and
    uncommented C14N serialisation respectively.

    Passing a boolean value to the ``standalone`` option will
    output an XML declaration with the corresponding
    ``standalone`` flag.

    The ``compression`` option enables GZip compression level 1-9. 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-26T10:37:27.140

如果您想将新的 xml 保存到文件中，那么`etree.tostring`就是要使用的方法。

例如

```
>>> from lxml import etree
>>> root = etree.Element('root1')
>>> element = etree.SubElement(root, 'element1')
>>> print etree.tostring(root,pretty_print=True) ## Print document
<root1>
  <element1/>
</root1>
>>> with open('xmltree.xml','w') as f: ## Write document to file
...   f.write(etree.tostring(root,pretty_print=True))
...
>>> 
```

# perl - 为什么我不能从模型本身内部访问催化剂模型的配置？

> ID：15634584
> 
> 赞同：1
> 
> 时间：2013-03-26T10:21:48.177
> 
> 标签：perl, catalyst

我有一个看起来像这样的类：

```
package MyApp::Model::Skunk::Find::Images;

use Moose;
use namespace::autoclean;

extends 'Catalyst::Model::Factory';

use Data::Dump qw/dump/;

sub prepare_arguments {
    my ($self, $c) = @_;

    # these are for debugging purposes only

    $c->log->info("package: " . __PACKAGE__);
    $c->log->info("catalyst config: " . dump $c->config);
    $c->log->info("images class: " . __PACKAGE__->config->{class});
    $c->log->info("images root: " .  __PACKAGE__->config->{root});

    return { root => __PACKAGE__->config->{root} };
} 
```

和 myapp.conf 看起来像这样（片段）：

```
<Model::Skunk::Find::Images>
    root    '/foo/bar/myapp/data/img'
    class   MyApp::Find
</Model::Skunk::Find::Images> 
```

我可以访问整个应用程序配置哈希（我知道[这个](https://stackoverflow.com/questions/11776087/access-config-from-inside-catalyst-model)答案），但我似乎无法直接访问类的配置，所以

```
 $c->log->info("images class: " . __PACKAGE__->config->{class});
 $c->log->info("images root: " .  __PACKAGE__->config->{root}); 
```

在 MyApp::Skunk::Find::Images 中都没有产生任何结果。

如果我像这样从包内部配置变量：

```
__PACKAGE__->config( 
                    class => 'MyApp::Find',
                    root  => '/foo/bar/myapp/data/img'
                   ); 
```

一切正常。

谁能帮忙解释一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:26:03.710

Catalyst 组件的配置被传递给它的构造函数。你应该在你的模型中做：

```
has ['class','root'] => (
   isa => 'Str',
   is => 'ro',
); 
```

并在您的方法中使用`$self->class`and `$self->root`。在组件内访问`__PACKAGE__->config`（除了一次，在启动期间*设置*配置）是一个错误。往里看`$c->config`就更离谱了。

# c# - 实体框架..自引用表..获取深度=x的记录？

> ID：15634586
> 
> 赞同：2
> 
> 时间：2013-03-26T10:21:50.217
> 
> 标签：c#, asp.net, sql, entity-framework, self-reference

我在实体框架中成功使用了自引用表。但我不知道如何获得所需深度的记录？

这应该是什么逻辑？

* * *

模型 ：

```
public class FamilyLabel
{
    public FamilyLabel()
    {
        this.Children = new Collection<FamilyLabel>();
        this.Families = new Collection<Family>();
    }

    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int FamilyLabelId { get; set; }
    public string FamilyLabelName { get; set; }

    public virtual FamilyLabel Parent { get; set; }

    public int JamaatId { get; set; }
    public virtual Jamaat Jamaat { get; set; }

    public virtual ICollection<Family> Families { get; set; }
    public virtual ICollection<FamilyLabel>  Children { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T11:57:43.897

理论上，您可以创建一个基于指定深度级别动态构建查询表达式的方法：

```
context.FamilyLabels.Where(x => 
    x.Parent. ... .Parent != null &&
    x.Parent.Parent ... .Parent == null); 
```

以下实现可以解决问题：

```
public static IList<FamilyLabel> Get(DbConnection connection, int depth)
{
    var p = Expression.Parameter(typeof(FamilyLabel));
    Expression current = p;

    for (int i = 0; i < deep; i++)
    {
        current = Expression.Property(current, "Parent");
    }

    var nullConst = Expression.Constant(null, typeof(FamilyLabel));

    var predicate = Expression.Lambda<Func<FamilyLabel, bool>>(
        Expression.AndAlso(
            Expression.NotEqual(current, nullConst),
            Expression.Equal(Expression.Property(current, "Parent"), nullConst)), p);

    using (MyDbContext context = new MyDbContext(connection))
    {
        return context.FamilyLabels.Where(predicate).ToList();
    }
} 
```

但是，大概这会创建一堆连接表达式，所以这可能不是最优化的方式。

# flash - AS3，访问影片剪辑中的公共变量

> ID：15634587
> 
> 赞同：0
> 
> 时间：2013-03-26T10:21:53.553
> 
> 标签：flash, class, variables, movieclip, public

对不起，一个简单的问题，但是......

我有具有公共变量的 DocumentClass `kTemp`：

```
公共 var kTemp:Number = 0;
```

我也有电影剪辑，它有一些带有这个片段的内部时间线代码：

```
var counter1:int = 0;  
计数器1 = kTemp；
```

奇怪的是，但最后一行给出了一个错误：

> 1120：访问未定义的属性 kTemp。计数器 1 = kTemp

我究竟做错了什么？

我虽然从任何地方都可以看到全局变量。
获取影片剪辑中公共变量值的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:49:05.617

我是女贞。

使用谷歌我发现只有这个决定适用于我的情况：

```
var _root=MovieClip(root);
var counter1:int;
counter1 = _root.kTemp; 
```

我还尝试了组合：var public static + Classname.variable，但它不起作用（错误：类似于类的未知属性）... Ich weiß nicht，warum。

# chrome-web-store - 如何在 chrome 网上商店中获取应用程序发布的评论和评论？

> ID：15634591
> 
> 赞同：2
> 
> 时间：2013-03-26T10:21:59.170
> 
> 标签：chrome-web-store

这是示例标题字段。

请求网址：[https ://chrome.google.com/reviews/components](https://chrome.google.com/reviews/components)

请求有效载荷：

```
req={
"appId": 94,
"version": "121024",
"reqId": "1363687747823-0.8877600133419037",
"hl": "en",
"specs": [
    {
        "type": "CommentThread",
        "url": "http%3A%2F%2Fchrome.google.com%2Fwebstore%2Fpermalink%3Fid%3Danekiipncldokmaojfkbfecgfjjjekoc",
        "groups": "chrome_webstore",
        "sortby": "date",
        "startindex": "0",
        "numresults": "25",
        "id": "1616"
    }
],
"internedKeys": [],
"internedValues": []
} 
```

响应是包含评论的 json 文件。

如何制作自动化系统，获取与该应用相关的 appID 和功能审查。

# c# - 如何使用 WCF Web 方法请求进行拦截？

> ID：15634592
> 
> 赞同：1
> 
> 时间：2013-03-26T10:21:59.553
> 
> 标签：c#, asp.net, wcf, request

我有一个托管在 IIS 中的 WCF 服务（.svc 文件），它不是 RESTful。它有一些带有输入参数的网络方法。

```
<%@ ServiceHost Language="C#" Debug="true" Service="MyNameSpace.MyService"%> 
```

每个 Web 方法都有一个名为 sitename 的输入参数，例如：

```
List<string> GetAvailableList(string param1, string sitename); 
```

现在我需要记录 web 方法的输入 url 和输入参数，而不需要去那里更改 web 方法的任何实现。

无论如何，像 ASP.NET 中的 HTTPModule 一样，我可以拦截请求/输入参数并记录它们吗？

我可以创建一个 .dll 并将其部署到 IIS 以便它自动记录/拦截请求吗？

基本上，我想知道每个站点名有多少请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:26:22.610

希望这有帮助

[消息检查器](http://msdn.microsoft.com/en-us/library/aa717047.aspx)- 消息检查器是一个可扩展性对象，可以在服务模型的客户端运行时中使用，并以编程方式或通过配置调度运行时，并且可以在收到消息之后或发送之前检查和更改消息。

# video - 通过 Asp.Net 访问在 Windows Azure 中发布的视频

> ID：15634595
> 
> 赞同：0
> 
> 时间：2013-03-26T10:22:07.413
> 
> 标签：video, azure, windows-phone-8, azure-web-app-service

我需要恢复在 Azure 网站中发布的视频。（该站点的创建只是为了在文件夹（媒体）中托管视频）。我无法访问这些视频。我的想法是托管一个平庸的网站并由 XML 文件引用以显示在 Windows Phone 8 的 MediaElement 控件中。

1）如何访问这些视频，因为当我写存储视频的 url 时，我收到错误 404。 [http://fetchvideos.azurewebsites.net/Media/Video2.mp4](http://fetchvideos.azurewebsites.net/Media/Video2.mp4) 我试图通过更改访问权限FileZilla，但被拒绝了！

2）如果无法访问它们，您还有其他解决方案吗？我需要一个链接/nameFile.extension

谢谢，请原谅我的英语！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T07:25:03.097

可能有点晚了，但这可以帮助其他人。

此错误可能来自您的配置中缺少 MimeMap。您需要在 web.config 文件中添加以下内容：

```
<system.webServer>
  <staticContent>
    <mimeMap fileExtension=".mp4" mimeType="video/mp4"/>
    <mimeMap fileExtension=".ogv" mimeType="video/ogg"/>
    ...
</system.webServer> 
```

并添加您需要的所有类型。

资料来源：[http ://social.msdn.microsoft.com/Forums/windowsazure/en-US/4bba6fa7-1553-4452-a795-c635b60d38ca/video-files-are-not-loaded-and-cannot-be-browsed](http://social.msdn.microsoft.com/Forums/windowsazure/en-US/4bba6fa7-1553-4452-a795-c635b60d38ca/video-files-are-not-loaded-and-cannot-be-browsed)

这对我有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:34:03.550

您看到的错误指出：

> 您要查找的资源已被删除、名称已更改或暂时不可用。

这很可能意味着您的**免费**Azure 网站的资源不足。导航到您的仪表板以检查您是否仍有可用资源来为您的网站提供服务。

适用于 Azure 网站的免费和共享实例的一些限制[在此处](http://www.windowsazure.com/en-us/pricing/details/#header-1)进行了详细描述。对您的情况最重要的是：

> 每个子区域每天 165 MB 的出站数据，每个区域最多 5 GB**；无限的入站数据

因此，您可以很容易地达到服务视频的限制。

# xaml - 在 Windows 商店应用程序 (XAML) 中为组合框下拉样式设置样式

> ID：15634599
> 
> 赞同：1
> 
> 时间：2013-03-26T10:22:19.097
> 
> 标签：xaml, windows-store-apps, winrt-xaml, styling

我正在尝试`ComboBox`在 XAML 中设置控件的样式，但没有设法在下拉/弹出窗口中设置颜色样式。`ComboBox`似乎包含一个`ScrollViewer`所以我正在尝试设置它的样式。中的项目`ScrollViewer`是使用 a 生成的`ContentTemplate`，我想我需要以某种方式对其进行样式设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T13:16:10.800

勾选这个[默认系统刷](http://metro.excastle.com/xaml-system-brushes)。您可以通过在资源字典中添加以下行来自定义这些颜色。

```
<SolidColorBrush x:Key="ComboBoxArrowForegroundThemeBrush" Color="MY_COLOR_HEX_CODE"/> 
```

# asp.net-mvc - 在 ViewModel (MVC4) 中获取 DropDownList 的选定值

> ID：15634606
> 
> 赞同：1
> 
> 时间：2013-03-26T10:22:36.360
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

我有一个视图模型，它具有以下两个属性：

```
 public List<ContributorModel> Contributors { get; set; }
    public Guid ContributorSelected { get; set; } 
```

设置视图时，Contributors 包含一个对象列表，我想在 DropDownList 中显示。回发到服务器时，我希望 ContributorSelected 成为 DropDownList 的值。

所以在我的表格中，我尝试过：

```
 <div class="formrow">
                 @Html.DropDownListFor(m=>m.Contributors.First().Id,new SelectList(Model.Contributors,"Id","LastName"))
             </div> 
```

但我真的不知道如何格式化我的代码，以便 ContributorSelected 获得价值。此外，回发时，model.Contributors 为空。

有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T10:25:57.620

这是因为您的模型不接受选定的贡献者，您的标记应该是：

```
<div class="formrow">
    @Html.DropDownListFor(m=>m.ContributorSelected, new SelectList(Model.Contributors,"Id","LastName"))
</div> 
```

只要确保它`Id`是一个 Guid 就可以了`Model.ContributorSelected`

# asp.net-mvc - EF 4.5 代码优先的复合键的 MVC 脚手架错误

> ID：15634609
> 
> 赞同：2
> 
> 时间：2013-03-26T10:22:43.363
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first, scaffolding, composite-key

我试图弄清楚如何使 MVC 脚手架与复合/复合键一起工作。

我有下表：

```
public class Data
{
    [Key, Column(Order = 0)]
    [ForeignKey("Note")]
    [Display(Name = "Note id")]
    public int NoteId { get; set; }

    [Key, Column(Order = 1)]
    [ForeignKey("Member")]
    [Display(Name = "Member id")]
    public int MemberId { get; set; }

    [Display(Name = "Description")]
    public string Description { get; set; }

    [Display(Name = "Note")]
    public virtual Note Note { get; set; }

    [Display(Name = "Member")]
    public virtual Member Member { get; set; }
} 
```

当我执行脚手架行时：

```
Scaffold Controller Data -Repository 
```

我收到以下错误：

```
Get-PrimaryKey : Cannot find primary key property for type
Pro.Web.Models.Data'. Multiple properties appear to be 
                        primary keys: NoteId, MemberId 
```

这个问题的解决方案是什么？我使用 Visual Studio 2012。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T12:32:22.937

`PrimaryKeyLocation`命名空间下的类具有在 PrimaryKeyLocation.cs 文件本身上实现`T4Scaffolding.Core.PrimaryKeyLocators`的接口列表。`IPrimaryKeyLocator`

阅读可用的五种实现，可以看出您的代码将落在`KeyAttributePropertyLocator`返回标有 [Key] 属性的两个成员的实现上，但是`GetPrimaryKeyCmdlet.cs`从 T4 引擎运行并调用`PrimaryKeyLocation`该类的实现具有以下实现：

```
switch (primaryKeyProperties.Count)
{
    case 0:
      // Code when no key is found
    case 1:
      // Code when one key is found
    default:
      // Code when more than one key is found
      WriteError(string.Format("Cannot find primary key property for type '{0}'. 
                 Multiple properties appear to be primary keys: {1}",
                   foundClass.FullName, primaryKeyPropertyNames));
} 
```

因此，由于 switch 语句不处理多个键，**因此不支持复合键**。解决这个问题的一种方法是实现复合键的情况，但我不知道它对 t4 模板本身的影响。

[脚手架工具的源代码。](http://mvcscaffolding.codeplex.com/SourceControl/changeset/view/7cd57d172314)

# android - 如何在有根设备上在我自己的应用程序之外拍摄设备屏幕截图？

> ID：15634610
> 
> 赞同：0
> 
> 时间：2013-03-26T10:22:48.043
> 
> 标签：android, screenshot

我想截取我的设备屏幕截图，即植根，正在使用以下代码：

```
process = Runtime.getRuntime().exec("su");
DataOutputStream os = new DataOutputStream(process.getOutputStream());
os.writeBytes("/system/bin/screencap -p " + path + "; \n"); 
```

此代码在 Motorola Zoom 上运行良好，因为 Zoom 在 /system/bin/screencap 路径下有屏幕截图，但在 android 2.3.6 的华为升华上，system/bin 中没有屏幕截图文件，所以我无法在华为上截屏. 请建议我，我怎样才能在我的华为设备上截屏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:41:10.097

如果这些设备基于相同的 CPU 系列，您可以尝试从 Zoom 中提取 screencap 二进制文件并将其推送到您的 Ascend。

或者，您可以自己构建 screencap 实用程序（或执行相同操作的某些程序）。毕竟是[开源](https://www.codeaurora.org/gitweb/quic/la/?p=platform/frameworks/base.git;a=tree;f=cmds/screencap;h=b5652d81a046c8c1f05e9107d90ff7cd137091ab;hb=refs/heads/jb_mr1)的。

# ios - 交付应用内购买（服务器端）

> ID：15634613
> 
> 赞同：0
> 
> 时间：2013-03-26T10:22:59.643
> 
> 标签：ios, cocoa-touch, in-app-purchase

我的应用在其应用商店（非消耗品）中提供了额外的内容。产品（外部文件）都存储在我的服务器上，所以我可以动态添加新的。一旦用户购买了一件物品，我的服务器就会对其进行验证并记住交易数据。

我现在如何交付我的内容？假设用户购买它，退出应用程序，然后回来显示内容。由于数据在服务器上，我的应用程序现在需要再次查询服务器以获取内容。服务器如何验证进行查询的客户端是内容的有效购买者？我应该在应用程序上保存一些东西（如交易 ID）然后通过它进行验证吗？还是有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:34:33.623

我选择将已购买产品的交易 ID 和交易日期保存在本地设备上。服务器通过此验证。ID 和日期存储在钥匙串中，以保护它们不被第 3 方读取。

如果有人有更好的建议，他/她仍然可以发布。

# ios - ios修改寄存器调用函数

> ID：15634616
> 
> 赞同：1
> 
> 时间：2013-03-26T10:23:08.013
> 
> 标签：ios, debugging, assembly, gdb, lldb

我连接到 iphone 的调试服务器并能够发送[GDB 串行协议](http://sourceware.org/gdb/current/onlinedocs/gdb/Packets.html)数据包。我可以设置断点并等到它到达。当它确实我想用已知参数调用 objc_msgSend 时，获取它的输出并继续执行。现在我在xcode和lldb中模拟它的过程，所以我不能只使用'call objc_msgSend（object，_cmd）'。

我所做的：

*   为某些代码设置断点
*   register read pc // 读取下一个操作地址
*   register write lr 0x0x0000253a //设置返回地址继续执行（pc值）
*   register write pc 0x30300c88 //我的objc_msg发送地址
*   register write r0 0x16ed30 // 我的对象地址
*   register write r1 0x3161 // 我的选择器地址
*   断点设置-a 0x0x0000253a
*   继续

所以我调用了我的方法，但随后应用程序崩溃并且永远不会到达我的“返回地址”0x0x0000253a。它还用返回值重写 r0，所以我的方法是完全不完整的。我知道我所做的是硬核覆盖寄存器而不存储和恢复以前的值，所以请帮忙。我如何存储/恢复寄存器状态，我做错了什么或我不做哪些必要的事情？

此外，在“调用 objc_msgSend”时跟踪 xcode 的调试器可能会非常有帮助。我尝试使用[这段代码](https://github.com/crackleware/idevice-app-runner)和fruitstrap来使用dtruss，然后研究它的输出——它有数千个内存读取和断点集，对我来说没用。

注意：我只能使用 GDB 串行协议。

# php - 你好世界，为什么这段代码不起作用？

> ID：15634622
> 
> 赞同：-6
> 
> 时间：2013-03-26T10:23:22.860
> 
> 标签：php, if-statement, exit

为什么我的浏览器不显示任何文字？为什么不退出？为什么退出不起作用？

```
<?php 
if(!isset($_POST)){
    exit;
}else{
    echo "any text";
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:26:36.840

请查看 PHP 手册并检查[PHP 基本语法](http://php.net/manual/en/language.basic-syntax.php)

删除线

> 在此处输入代码

代替

```
if(!isset($_POST)){ exit; } 
```

和

```
if(empty($_POST)){ exit("There is no Post data"); } 
```

它应该工作..

通常 $_POST 总是设置！

所以你可以检查它是否为空 - 如果你需要知道是否有 POST 数据..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:30:07.263

您应该检查 count($_POST) == 0 。因为 isset 将始终为真，因为此变量可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T10:29:17.383

当您没有任何 POST 数据时，您的变量 $_POST 仍然是一个空数组，因此这意味着它已设置。如果你想退出，你应该使用[empty()](http://php.net/manual/en/function.empty.php)函数检查 $_POST 变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T10:27:54.053

1.  删除文本“在此处输入代码”并尝试。

2.  添加错误报告（1）；在页面顶部并尝试。

3.  检查中的值`$_POST`，`print_r($_POST);`

    ```
     <?php 

       error_reporting(1);

       print_r($_POST);

       if(empty($_POST)){ exit; }
       else { echo "any text"; }

     ?> 
    ```

# vba - 有没有办法对 VBA 中的代码施加时间限制？

> ID：15634623
> 
> 赞同：0
> 
> 时间：2013-03-26T10:23:32.357
> 
> 标签：vba, excel, timer

我想知道是否有人有任何对代码段施加时间限制的经验。我已经将搜索引擎编程到 VBA 中的 excel 电子表格中，并且有一段代码可以删除重复的结果。现在，如果给定最模糊的搜索条件，这部分有时会持续很长时间。所以我想为这个操作设置一个时间限制。我到处寻找解决方案并尝试使用 OnTime，但它似乎没有按我需要的方式工作。理想情况下，我想要一个强加的时间限制，然后当达到 GoTo 语句时，在代码中进一步移动它。从我读过的内容来看， OnTime 不会中断操作，而是等待它完成，这不是我想要的。

谢谢你们的帮助。艾米

我添加了我的代码：

```
Sub RemoveDuplicates()
Application.ScreenUpdating = False
Application.Calculation = xlCalculationManual
Application.EnableEvents = False
'Code called upon through the other macros which will remove duplicates from all the   types of search.
Application.StatusBar = "Removing Duplicates...."

Dim k As Integer
Dim SuperArray As String
Dim CheckingArray As String
Dim Duplicate As Boolean
Dim i As Integer
Dim j As Integer
Dim m As Integer
Dim Endrow As Integer
Dim Endcolumn As Integer
Dim w As Integer
Dim x As Integer
Dim n As Integer

w = 1
x = 9

Endcolumn = Module6.Endcolumn(x)
Endrow = Module6.Endrow(w)

If Worksheets("Search Engine").Cells(9, Endrow) = "Percentage Similarity" Then
    Endrow = Endrow - 1
End If

    For i = 9 To Endcolumn

        j = 1
        k = i + 1

        Do While j <> Endrow + 1
            SuperArray = Cells(i, j) & Superstring
            Superstring = SuperArray
            j = j + 1
        Loop

        For k = k To Endcolumn
            m = 1
            Do While m <> Endrow
                CheckingArray = Cells(k, m) & Uberstring
                Uberstring = CheckingArray
                m = m + 1
            Loop
            If Uberstring = Superstring Then
            n = 1
                Do While n <> Endrow + 1
                If Worksheets("Search Engine").Cells(k, n).Interior.ColorIndex = 37 Then
                    Worksheets("Search Engine").Cells(i, n).Interior.ColorIndex = 37
                End If
                n = n + 1
                Loop
                Rows(k).Clear
            End If
            Uberstring = -1
        Next k
        Superstring = -1
    Next i

Do While i > 9
    If Cells(i, 1) = Empty Then
        Rows(i).Delete
    End If
    i = i - 1
Loop

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:52:43.190

我假设您的代码必须有某种循环，例如`For Each`, `While ... Wend`,`Do ... Loop Until`等。

在这些情况下，通过比较来扩展条件`Timer`。这将返回一个介于 0 和 86400 之间的 Double，指示自午夜以来经过了多少秒。因此，您还需要考虑休息日。下面是一些示例代码，向您展示了三种不同循环结构的实现：

```
Sub ExampleLoops()
    Dim dblStart As Double
    Dim tmp As Long

    Const cDblMaxTimeInSeconds As Double = 2.5

    dblStart = Timer

    'Example with For loop
    For tmp = 1 To 1000
        tmp = 1     'to fake a very long loop, replace with your code
        DoEvents    'your code here
        If TimerDiff(dblStart, Timer) > cDblMaxTimeInSeconds Then GoTo Finalize 'Alternative: Exit For
    Next

    'Alternative example for Do loop
    Do
        DoEvents 'your code here
    Loop Until TimerDiff(dblStart, Timer) > cDblMaxTimeInSeconds And False 'your condition here

    'Alternative example for While loop
    While TimerDiff(dblStart, Timer) <= cDblMaxTimeInSeconds And True 'your condtion here
        DoEvents 'your code here
    Wend

Finalize:
    'FinalizeCode here
    Exit Sub
End Sub

Function TimerDiff(dblTimerStart As Double, dblTimerEnd As Double)
    Dim dblTemp As Double
    dblTemp = dblTimerEnd - dblTimerStart
    If dblTemp < -43200 Then 'half a day
        dblTemp = dblTemp + 86400
    End If
    TimerDiff = dblTemp
End Function 
```

# sql - linq比较两个ID列表？

> ID：15634625
> 
> 赞同：-1
> 
> 时间：2013-03-26T10:23:38.643
> 
> 标签：sql, linq

我有一个多头列表。我想做一个 linq 查询来比较 long 的 linq 是否等于表中的 id 列表。酒吧有特色，特色有 id，我想选择所有特色在这个长列表中的酒吧......

代码：

`IList<long> pubFeatures`被传递给函数。

```
var result = from pubs in result
              where pubs.PubFeatures.Select(item => item.Id).All(term => pubFeatures.Contains(term))
             select pubs; 
```

但这似乎不起作用它返回所有酒吧

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:32:29.253

```
var result = from pub in pubs
             where pub.PubFeatures.Select(item => pubFeatures.Contains(item.id))
             select pub 
```

# vba - VBA 中的 SQL "%" 等效项

> ID：15634629
> 
> 赞同：3
> 
> 时间：2013-03-26T10:23:49.797
> 
> 标签：vba, excel

VBA中是否有任何相当于“%”符号的SQL？我需要返回一些中间有一些字符的文件。

帮助真的很感激！

例如，这是我的代码：我需要从该网页下载名称为 2013 的所有文件，然后保存并以不同的方式调用它们。这个任务可以吗？

```
Sub Sample()
    Dim strURL As String
    Dim strPath As String
    Dim i As Integer

    strURL = "http://cetatenie.just.ro/wp-content/uploads/Ordin-********.2013.pdf"

    strPath = "C:\Documents and Settings\ee28118\Desktop\178.pdf"

    Ret = URLDownloadToFile(0, strURL, strPath, 0, 0)

    If Ret = 0 Then
        MsgBox "File successfully downloaded"
    Else
        MsgBox "Unable to download the file"
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T10:26:59.060

您可以使用 Like 运算符。

模式中的字符匹配字符串中的字符

```
? Any single character. 
* Zero or more characters. 
# Any single digit (0–9). 
[charlist] Any single character in charlist. 
[!charlist] Any single character not in charlist 
```

例子 ：

```
Dim MyCheck
MyCheck = "aBBBa" Like "a*a"    ' Returns True.
MyCheck = "F" Like "[A-Z]"    ' Returns True.
MyCheck = "F" Like "[!A-Z]"    ' Returns False.
MyCheck = "a2a" Like "a#a"    ' Returns True.
MyCheck = "aM5b" Like "a[L-P]#[!c-e]"    ' Returns True.
MyCheck = "BAT123khg" Like "B?T*"    ' Returns True.
MyCheck = "CAT123khg" Like "B?T*"    ' Returns False. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T10:52:30.200

试试下面的代码：如果字符串中包含字符串**2013**，布尔函数将返回 true。

```
Sub Sample()
    Dim result As Boolean
    result = has2013("http://cetatenie.just.ro/wp-content/uploads/Ordin-********.2013.pdf")
    Debug.Print result
    result = has2013("http://cetatenie.just.ro/wp-content/uploads/Ordin-********.2014.pdf")
    Debug.Print result
End Sub

Function has2013(lnk As String) As Boolean
    has2013 = lnk Like "*2013*"
End Function 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T13:07:50.997

当您导航到上传文件夹时，您会获得其中所有文件的目录列表。您可以遍历该列表上的超链接并测试每个链接，看看它是否符合您的标准，如果符合，请下载它。您需要参考 MSXML 和 MSHTML。这是一个例子。

```
Sub Sample()

    Dim sUrl As String
    Dim xHttp As MSXML2.XMLHTTP
    Dim hDoc As MSHTML.HTMLDocument
    Dim hAnchor As MSHTML.HTMLAnchorElement
    Dim Ret As Long
    Dim sPath As String
    Dim i As Long

    sPath = "C:\Documents and Settings\ee28118\Desktop\"
    sUrl = "http://cetatenie.just.ro/wp-content/uploads/"

    'Get the directory listing
    Set xHttp = New MSXML2.XMLHTTP
    xHttp.Open "GET", sUrl
    xHttp.send

    'Wait for the page to load
    Do Until xHttp.readyState = 4
        DoEvents
    Loop

    'Put the page in an HTML document
    Set hDoc = New MSHTML.HTMLDocument
    hDoc.body.innerHTML = xHttp.responseText

    'Loop through the hyperlinks on the directory listing
    For i = 0 To hDoc.getElementsByTagName("a").Length - 1
        Set hAnchor = hDoc.getElementsByTagName("a").Item(i)

        'test the pathname to see if it matches your pattern
        If hAnchor.pathname Like "Ordin-*.2013.pdf" Then
            Ret = UrlDownloadToFile(0, sUrl & hAnchor.pathname, sPath, 0, 0)

            If Ret = 0 Then
                Debug.Print sUrl & hAnchor.pathname & " downloaded to " & sPath
            Else
                Debug.Print sUrl & hAnchor.pathname & " not downloaded"
            End If
        End If
    Next i

End Sub 
```

**编辑**

我假设 URLDownloadToFile 已经写好了。我没有写，我只是使用下面的函数来测试遍历文件的代码。您可以使用它来确保上述代码适合您，但您需要编写实际代码才能最终下载文件。有了 URLDownloadToFile 的所有参数，我很惊讶它还不存在。

```
Function UrlDownloadToFile(lNum As Long, sUrl As String, sPath As String, lNum1 As Long, lNum2 As Long) As Long

    UrlDownloadToFile = 0

End Function 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T10:27:24.843

在 VBA 中使用带有通配符的 LIKE 函数：

这是一个示例（从[Ozgrid 论坛](http://www.ozgrid.com/forum/showthread.php?t=23047&p=116719#post116719)复制）

```
Dim sht As Worksheet 
For Each sht In ActiveWorkbook.Worksheets 
    If sht.Name Like "FRI*" Then 
         'Add code for Friday sheets
    Else 
        If sht.Name Like "MON*" Then 
             'Add code for Monday sheets
        End If 
    End If 
Next 
```

乘法字符 * 代替零个或多个字符，而**?** 正好代替 1 个字符，**#**代替 1 个数字。还有其他更具体的字符。如果您只想匹配某些字符，则使用匹配策略。

所以你去吧！

此外，您可以查看[Ozgrid 论坛：在 VBA 中使用正则表达式](http://www.ozgrid.com/forum/showthread.php?t=37624&p=187752#post187752)

要获取服务器上的文件列表，请在[Excel 先生的 FTP（使用 DIR）上阅读 - 使用 FTP 列出文件](http://www.mrexcel.com/forum/excel-questions/491558-list-files-via-ftp.html)

# cordova - Windows 应用程序认证工具包失败

> ID：15634631
> 
> 赞同：8
> 
> 时间：2013-03-26T10:23:53.583
> 
> 标签：cordova, visual-studio-2012, windows-8, wack

我有一个应用程序，我为其创建了应用程序包并启动了 Windows 应用程序认证工具包。该套件无法在我的开发系统上测试应用程序。

它给了我以下错误：

```
App launch tests

• Error Found: The app launch test detected the following errors:◦Failed to launch App.
• Impact if not fixed:  An app that fails to launch presents a poor user experience, and will not be accepted by the Windows Store. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T11:05:04.897

当我以系统管理员身份登录时，应用程序启动测试通过了。以前我使用的是没有管理权限的域用户的用户凭据。

因此，我发现登录用户应该对我们尝试启动应用程序的特定系统具有完全的管理员访问权限。

# extjs - 在mvc中加载数据以形成

> ID：15634636
> 
> 赞同：1
> 
> 时间：2013-03-26T10:24:05.797
> 
> 标签：extjs, sencha-touch-2

在我的应用程序中，我有一个列表和详细信息（表单）。单击列表项时，我想将数据加载到详细信息视图（将数据设置为表单的文本字段）。对于列表和详细信息，我正在从远程服务器获取数据。我正在关注 MVC。

现在，当单击 listItem 时，我可以从服务器获取数据并将其保存到存储并显示详细视图。但我无法将数据从商店绑定到表单中的文本字段。

模型

```
Ext.define('App.model.Details', {
    extend: 'Ext.data.Model',
    config: {
        fields: [
            {name: 'Name',  type: 'string'},
            {name: 'BillingStreet',  type: 'string'},
            {name: 'BillingCity',  type: 'string'}

        ]
    }
}); 
```

店铺

```
Ext.define('App.store.Details', {
    extend: 'Ext.data.Store',
    config: {
        model: 'App.model.Details',
        autoLoad :true,

        grouper : function(record) {
            return record.get('Name')[0];
        },
    }
}); 
```

列表显示

```
Ext.define('App.view.View', {
    extend: 'Ext.List',
    alias:'widget.contactlist',
    fullscreen: true,
    id: 'contactlist',
    config:{
        disableSelection:true,
        store:'Contacts',
        itemTpl:'{Name}',
        items:[
        {
            xtype:'toolbar',
            docked:'top',
            title:'Leeds List'
        }

        ]
    }
}); 
```

详细视图

```
Ext.define("App.view.ListDetail", {
    extend: "Ext.form.Panel",
    requires: "Ext.form.FieldSet",
    alias: "widget.listDetail",
    config:{
        scrollable:'vertical'
    },
    initialize: function () {

        this.callParent(arguments);

        var topToolbar = {
            xtype: "toolbar",
            docked: "top",
            title: "Details"

        };

        this.add([
                  topToolbar,
                  { xtype: "fieldset",
                      items: [{
                          xtype: 'textfield',
                          store: 'Details',
                          value : 'Name',
                          label: 'Name'
                      },
                      {
                          xtype: 'emailfield',
                          store: 'Details',
                          value : 'BillingStreet',
                          label: 'Email'
                      },
                      {
                          xtype: 'passwordfield',
                          store: 'Details',
                          value : 'BillingCity',
                          label: 'Password'
                      }

                      ]
                  }
              ]);

    } 
```

});

控制器

```
Ext.define('App.controller.Main', {

    extend: 'Ext.app.Controller',

       config: {
        refs: {
            // We're going to lookup our views by xtype.
            contactlist: "contactlist",
            contactdetail: "listDetail",
            //f_name:"#f_name"

        },
        control: {
            contactlist: {
                // The commands fired by the notes list container.
                itemtap: "oneditLeadCommand"

            }

        },

        routes: {
            'contactlist': 'activateList'
        }
    },

    activateList: function ()
    {
        Ext.Viewport.animateActiveItem(this.getContactlist(), this.slideRightTransition);
    },

    slideLeftTransition: { type: 'slide', direction: 'left' },
    slideRightTransition: { type: 'slide', direction: 'right' },

    oneditLeadCommand: function (list, index, target, record, e, eOpts)
    {

        console.log("onEditLead"+record.data.Id);
        this.activateLeadDetail(record);

    },

    activateLeadDetail: function (record)
    {

      var contactDetail = this.getContactdetail();
      //console.log("activateLeadDetail"+contactDetail.textfield);
      //contactDetail.setRecord(record); // load() is deprecated.
      //this.getF_name().setDisplayField("");

      store = Ext.StoreMgr.get('Details');
      //console.log("activateLeadDetail"+store);
      store.setProxy({
        type: 'ajax',
        url : 'http://10.0.2.2:8080/SalesForce/leads/get-lead-details/00D90000000jvoU!AR4AQB6Xcjz4UNBKf12WOcYHWc31QxK2.fXTcbCvOq.oBosCrjBezhqm8Nqc1hrf8MKK5LjLAu8ZC5IqB1kdpWvJGLdWd5pJ/'+record.data.Id,  //  the json file that holds all our contact info.
        reader: {
            type: 'json'
           }
       });
      store.load();
      var record1 = Ext.StoreMgr.get('Details').getAt(0);
      console.log("activateLeadDetail"+record1);

      Ext.StoreMgr.get('Details').each(function(test){
            console.log("for loop"+test.data);
        });
      contactDetail.setRecord(record1);
      Ext.Viewport.animateActiveItem(contactDetail, this.slideLeftTransition);
   },
    // Base Class functions.
    launch: function () {
        this.callParent(arguments);

        console.log("launch");
    },
    init: function () {
        this.callParent(arguments);
        console.log("init");
    }
}) 
```

请帮助将数据绑定到详细视图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:13:34.437

所以我猜你的联系人商店是在其他地方定义的，但是由于这个正在工作，你没有在这里粘贴代码。

所以关于模型的一个快速说明，您应该*始终*定义一个 idProperty。这是 Sencha 在内部使用来定义商店中的“主键”，因此当您重新加载/刷新商店时可以正常工作。

```
Ext.define('App.model.Details', {
    extend: 'Ext.data.Model',
    config: {
        idProperty: 'Name', // Or something from your server maybe?
        fields: [
            {name: 'Name',  type: 'string'},
            {name: 'BillingStreet',  type: 'string'},
            {name: 'BillingCity',  type: 'string'}

        ]
    }
}); 
```

其次，当你在listView中使用config方法时，为什么在ListDetail视图中使用initialize方法？如果您改为指定配置，您将能够通过执行类似的操作以更简单的方式在其他地方重用此组件的一些

```
items: [
    {
        xtype: 'ListDetail',
        anyOtherAttribute: value
    }
] 
```

但这有点超出了这里的范围。但不管怎么说。所以我认为这里的问题是您已经为面板的每个字段定义了一个商店。很抱歉，我无法检验我的假设，但我会这样做：

```
Ext.define("App.view.ListDetail", {
    extend: "Ext.form.Panel",
    requires: "Ext.form.FieldSet",
    alias: "widget.listDetail",
    config:{
        scrollable:'vertical'
        items:[
           {
               xtype: "toolbar",
               docked: "top",
               title: "Details"
           },
           { 
                xtype: "fieldset",
                itemId: 'detailedListFiledset', //Overall, prefer itemId
                items: [
                    {
                         xtype: 'textfield',
                         value : 'Name',
                         label: 'Name' // may be you want placeholders here?
                    },
                    {
                         xtype: 'emailfield',
                         value : 'BillingStreet',
                         label: 'Email' // and here..
                    },
                    {
                         xtype: 'passwordfield',
                         value : 'BillingCity',
                         label: 'Password' // and here..
                     }

                  ]
             }
        ]
    }
}); 
```

好的，现在问题似乎出在您的控制器中：

*   向您的字段集添加参考
*   添加对您的商店的引用
*   加载商店时创建后加载回调（详细信息）
*   每次清除存储或附加数据并应用过滤器以获取正确的记录（这就是 idProperty 非常有用的原因）
*   设置字段集而*不是面板的记录*

我还没有机会尝试，但我会在今晚晚些时候尝试。不过还是试试吧。

**- 编辑 -**

好的，我终于可以为您编写代码了。

您的代码中有一些问题。我真的不知道你为什么需要两家商店，但假设你需要。我将提供我使用的所有文件（两个商店、两个模型、三个视图和控制器）。您的代码中有三个主要错误：

*   您不应该加载第二个商店并尝试在之后立即获取记录。为此使用和“加载”或“刷新”事件
*   表单的 SetValues 是正确使用的函数
*   您在表单中缺少 name 属性，以便表单知道要绑定到该字段的 store/model 的哪个值。

联系型号：

```
Ext.define('App.model.Contact', {
    extend: 'Ext.data.Model',
    config: {
        idProperty: 'id',
        fields: [
            {name: 'id', type: 'int'},
            {name: 'name',  type: 'string'}
        ]
    }
}); 
```

联系商店：

```
Ext.define('App.store.ContactStore', {
    extend: 'Ext.data.Store',
    requires:['App.model.Contact'],
    config: {
        storeId: 'ContactStore',
        model: 'App.model.Contact',
        autoLoad :true,
        data: [
            {id: 0, name: 'Foo'},
            {id: 1, name: 'Bar'}
        ]
    }
}); 
```

详细型号：

```
Ext.define('App.model.Detail', {
    extend: 'Ext.data.Model',
    config: {
        idProperty: 'id',
        fields: [
            {name: 'id', type: 'int'},
            {name: 'name',  type: 'string'},
            {name: 'billingStreet',  type: 'string'},
            {name: 'billingCity',  type: 'string'}
        ]
    }
}); 
```

详情商店：

```
Ext.define('App.store.DetailStore', {
    extend: 'Ext.data.Store',
    config: {
        model: 'App.model.Detail',
        autoLoad :true,
        data: [
            {id: 0, name: 'Foo', billingStreet:'here', billingCity: 'Somewhere'},
            {id: 1, name: 'Bar', billingStreet:'there', billingCity: 'Somewhere else'}
        ]
    }
}); 
```

联系方式：

```
Ext.define('App.view.ContactList', {
    extend: 'Ext.List',
    xtype: 'contactList',
    fullscreen: true,

    config: {
        itemId: 'contactList',
        store:'ContactStore',
        emptyText: 'test',
        itemTpl: new Ext.XTemplate(
            '{name}'
        ),
        items:[
            {
                xtype:'toolbar',
                docked:'top',
                title:'Leeds List'
            }
        ]
    }
}); 
```

详细视图：

```
Ext.define('App.view.Detail', {
    extend: 'Ext.form.Panel',
    requires: ['Ext.form.FieldSet'],
    xtype: "detail",
    config:{
        scrollable:'vertical',
        items: [
          {
            xtype: 'toolbar',
            docked: 'top',
            title: 'Details'
          },
          { 
            xtype: 'fieldset',
            itemId: 'detailForm',
            items: [{
                xtype: 'textfield',
                store: 'Details',
                name: 'name',
                placeHolder : 'Name',
                label: 'Name'
              },
              {
                xtype: 'textfield',
                store: 'Details',
                placeHolder : 'BillingStreet',
                name: 'billingStreet',
                label: 'BillingStreet'
              },
              {
                xtype: 'textfield',
                store: 'Details',
                placeHolder : 'BillingCity',
                name: 'billingCity',
                label: 'BillingCity'
              }
            ]
          }
        ]
    }
}); 
```

主视图：

```
Ext.define('App.view.Main', {
    extend: 'Ext.Container',
    xtype: 'main',
    config: {
        layout: 'hbox',
        items: [
            {
                xtype: 'contactList',
                flex:1
            },
            {
                xtype: 'detail',
                flex:2.5
            }
        ]
    }
}); 
```

主控制器：

```
Ext.define('App.controller.Main', {
    extend : 'Ext.app.Controller',
    requires: [
        'Ext.Toolbar',
        'Ext.List',
        'App.store.ContactStore',
        'App.store.DetailStore',
        'App.view.Detail',
        'App.view.ContactList'
    ],
    config: {
        //@private
        detailStore: null,
        currentListIndex: -1,
        views : [
            'App.view.ContactList',
            'App.view.Detail'
        ],
        refs: {
            list: 'contactList',
            detail: 'detail',
            detailForm: 'detail #detailForm'
        },
        control: {
            list: {
                itemtap: 'handleItemTapList'
            }
        }
    },
    launch: function() {
        var store = Ext.getStore('DetailStore');
        store.on('refresh', 'handleDetailStoreLoad', this);
        this.setDetailStore(store);
    },
    handleItemTapList: function(list, index, target, record) {
        this.setCurrentListIndex(index);
        this.getDetailStore().load();
    },
    handleDetailStoreLoad: function (store) {
        debugger;
        var record = store.getAt(this.getCurrentListIndex());
        this.getDetail().setValues(record.data);
    }

}); 
```

我们可以在一些事情上争论，但我试图直截了当并让它发挥作用。如果您有更多问题，请提出，但这个例子对我有用。在我看来，您可能不需要第二个商店，因为联系人详细信息可以嵌套在 COntact 商店中，并且您可以使用商店的 hasMany 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:03:17.170

使用 form.setRecord() 将记录加载到表单中

确保您的表单元素具有与模型名称属性匹配的名称属性值

由于您有商店，因此您必须获取一个要加载的模型的引用，使用 getAt() 或 find() 方法在您的商店中获取或查找模型

# drupal - nginx 重写 Drupal 和错误的 URL

> ID：15634639
> 
> 赞同：0
> 
> 时间：2013-03-26T10:24:14.097
> 
> 标签：drupal, nginx, rewrite

这是我为 Drupal 配置的 nginx 配置片段：

```
server {
    listen       80;
    server_name  _;
    root /home/testing/public_html/staging;

    location = /favicon.ico {
        log_not_found off;
        access_log off;
    }

    location = /robots.txt {
        allow all;
        log_not_found off;
        access_log off;
    }

    location = /backup {
        deny all;
    }

    location ~* \.(txt|log)$ {
        deny all;
    }

    location / {
        try_files $uri @rewrite;
    }

    location @rewrite {
        rewrite ^/(.*)$ /index.php?q=$1;
    }

    location ~ \.php$ {
        fastcgi_split_path_info ^(.+\.php)(/.+)$;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_intercept_errors on;
        fastcgi_pass unix:/tmp/php-fpm.sock;
    }

    location ~ ^/sites/.*/files/imagecache/ {
        try_files $uri @rewrite;
    }

    location ~* \.(js|css|png|jpg|jpeg|gif|ico)$ {
        rewrite ^/staging/(.*)$ /$1;
        expires max;
        log_not_found off;
    }

} 
```

这适用于像这样的 URL

```
http://www.testing.com/this/page
http://www.testing.com/that/page 
```

直到处理包含“/staging/”的硬编码 URL。例子：

```
http://www.testing.com/staging/this/page 
```

这将显示**“找不到页面”**页面。我尝试添加这一行：

```
location /staging {
    rewrite ^/staging/(.*)$ /index.php?q=$1;
} 
```

但这似乎根本不起作用。如何使用“/staging/”捕获所有 URL 并正确重写它们，以免出现“找不到页面”错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:25:22.707

您需要添加`last`才能触发另一轮位置匹配。没有它，您的请求将被困在`/staging`location 块中。

```
location /staging {
    rewrite ^/staging/(.*)$ /index.php?q=$1 last;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:40:10.973

通过尝试这个来检查您的网站配置。

[这是一个工作 Nginx 配置的示例](http://phoenixdesign.fr/tutoriels/linux/migration-drupal-apache-nginx) 如果它不起作用，请发布您的错误日志。

# php - 转换 PDF 并添加首页、页脚和水印

> ID：15634646
> 
> 赞同：2
> 
> 时间：2013-03-26T10:24:20.833
> 
> 标签：php, pdf, document, fpdf, libreoffice

我当前的应用程序要求我将文档（doc、excel、ppt、图像等）转换为 PDF。它还需要添加一个包含多个信息（变量）的首页，并为转换后的文档添加页脚。它可能还需要添加文本或徽标图像作为水印。

我已经能够使用 LibreOffice 将文档转换为 PDF。我生成了一个静态 pdf，我可以使用**[PDFtk将它与转换后的文档合并](http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/)**

但我需要动态生成首页，因为对于每个文档，一些信息会发生变化。我想使用 FPDF 生成首页，使用 libreoffice 转换并使用 PDFtk 合并它。但同样，它需要添加页脚和可能的水印。我认为水印可以通过 PDFtk 完成。并且页脚可以由 FPDF 生成。

所以整个过程会是这样的：

*   使用 FPDF 创建首页并保存 pdf
*   使用 LibreOffice 将 Doc 转换为 PDF
*   为转换后的 PDF 添加页脚并使用 FPDF 存储
*   使用 FPDF 生成带水印的 PDF（可能）
*   使用 PDFtk 合并以上三个 pdf

我想我做的处理太多了。有没有更简单的方法来实现这一点？有没有其他方法可以用更少的资源/第三方应用程序/lib 来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T00:33:47.730

如果您对商业许可软件持开放态度，[PDFLib+PDI](http://www.pdflib.com/products/pdflib-family/pdflib-pdi/)将处理您需要的所有任务（转换为 PDF 后）。它在大多数服务器环境中本地运行，性能通常非常好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T11:58:48.660

我用来用 PHP 处理 PDF 的库是[TCPDF](http://www.tcpdf.org/)。它是开源的，您可以使用 HTML 来设置 PDF 样式（无论如何是 HTML 的子集），处理诸如页面之类的事情。我相信您应该能够在 TCPDF 中执行您需要的所有功能。

为了处理可能需要水印等的图像操作，我使用了[GD](http://www.php.net/manual/en/book.image.php)，它提供了许多用于操作图像的功能。如果您需要一些更复杂的图像处理，您可能还想查看[imagemagick](http://www.imagemagick.org/script/index.php)。

所有这些都应该简化您的工作流程，并允许您直接在 PHP 和 HTML 中完成大部分您需要的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T08:36:26.830

我还没有测试过，但是[DomPDF](https://github.com/dompdf/dompdf)看起来是一个不错的项目。我之前使用的是[HTML2PDF](http://html2pdf.fr/en/default)，但它不再更新，所以继续前进。

如果您使用此类库，只需制作 HTML 模板（此外，DomPDF 支持在 html 模板中执行 PHP）并玩得开心；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T08:04:37.780

为了减少我需要做的不同事情的数量，我将简单地使用 FPDI 库。

所以我现在要做的是，

*   将文档转换为 PDF 格式
*   使用 FPDI 创建 Front Page（它扩展了 TCPDF 并使用它的功能）
*   然后我将使用 FPDI 的导入功能导入转换后的文档
*   我也会同时添加水印和页脚

因此，我最终将消除 PDFtk 的使用，并减少使用的库的数量以及需要单独完成的不同活动。

这些事情将只在两个活动中完成：

1.  使用 LibreOffice 转换为 PDF 和
2.  添加首页，使用 FPDI 导入并添加页脚和水印

# wpf - 如何使用 XPath 设置 ListView 控件的 ItemSource

> ID：15634658
> 
> 赞同：0
> 
> 时间：2013-03-26T10:24:46.003
> 
> 标签：wpf, listview, xslt, wpf-controls, xslt-1.0

这个问题有点棘手，因为整个代码是通过 XSLT 自动生成的。这意味着我必须面对一些限制（没有 CodeBehind 等）

我通过 XSLT 成功生成了一个包含 ListView 的 XAML 文件。XAML 文件还包含一个 XMLDataProvider。DataSource 和 Provider 很好，我只是不知道如何为 ListView ItemSource 属性设置 XPath。

这是我的数据源：

```
<RelatedContacts>
        <Contact ShowsInterest="true">
            <Name>John</Name>
            <Lastname>Doe</Lastname>
        </Contact >
        <Contact ShowsInterest="true">
            <Name>Max</Name>
            <Lastname>Mustermann</Lastname>
        </Contact >
        <Contact ShowsInterest="true">
            <Name>Claire</Name>
            <Lastname>Grube</Lastname>
        </Contact >
</RelatedContacts> 
```

这是生成的 ListView 代码片段

```
 <ListView ItemsSource="{Binding XPath=/Contact/RelatedContacts/*}" Name="listview1" DockPanel.Dock="Left, Right, Top, Bottom" Height="125" Background="White" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" FontStyle="Normal" TabIndex="0" IsTabStop="True">
      <ListView.View>
        <GridView>
          <GridViewColumn Header="Name" DisplayMemberBinding="{Binding XPath=../Contact/Name}" />
          <GridViewColumn Header="Lastname" DisplayMemberBinding="{Binding XPath=../Contact/Lastname}" />
        </GridView>
      </ListView.View>
    </ListView> 
```

此代码段将第一项显示三次。（因为数据源中有三个条目）我尝试了很多其他组合，但无法找到可以使用 XSLT 生成的解决方案。例如，这个工作，但我不能用 XSLT 生成它：

```
<ListView ItemsSource="{Binding XPath=/Contact/RelatedContacts//Contact}" Name="listview1" DockPanel.Dock="Left, Right, Top, Bottom" Height="125" Background="White" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" FontStyle="Normal" TabIndex="0" IsTabStop="True">
  <ListView.View>
    <GridView>
      <GridViewColumn Header="Name" DisplayMemberBinding="{Binding XPath=Name}" />
      <GridViewColumn Header="Lastname" DisplayMemberBinding="{Binding XPath=Lastname}" />
    </GridView>
  </ListView.View>
</ListView> 
```

如前所述，生成了 ListView。这是用 XSLT 转换的“源”片段

```
 <ListViewWrapper id="listview1" dock="Fill" text="" theme="" width="1078" height="125" backcolor="White" forecolor="Black" visible="True" mapNode="Contact\RelatedContacts" border-left="1" border-top="1" border-right="1" border-bottom="1" font-name="Tahoma" font-size="9" font-style="Regular">
    <TabIndex>0</TabIndex>
    <TabStop>True</TabStop>
    <Columns>
      <Column title="Name" mapNode="Contact\Name" width="0" />
      <Column title="Lastname" mapNode="Contact\Lastname" width="0" />
    </Columns>
  </ListViewWrapper> 
```

在处理 ListViewWrapper 和创建 ListView 时，XSLT 处理器不知道`mapNode`列的元素，因为层次结构更深。（我确信有一种方法，但我不知道该怎么做。）此外，列也有可能映射到这样的不同元素。

```
<Columns>
  <Column title="Name" mapNode="Contact\Name" width="0" />
  <Column title="Lastname" mapNode="BusinessContact\Lastname" width="0" />
</Columns> 
```

总结一下，这就是我试图实现的目标：

```
ItemsSource="{Binding XPath=/Contact/RelatedContacts//*} 
```

接着

```
<GridViewColumn Header="Name" DisplayMemberBinding="{Binding XPath=Name}" /> 
```

在 ListView 中显示 RelatedContacts 的所有子元素，而不显式定义整个路径。我正在寻找类似占位符的东西。如果没有这个条件，它看起来像`XPath=/Contact/RelatedContacts//Contact`.

对于感兴趣的人，这里提供了 XSLT 样式表的一部分：

```
 <!-- Transformiere ListViewWrapper zu ListView -->
  <xsl:template match="ListViewWrapper">
    <xsl:element name="ListView">
      <xsl:attribute name="ItemsSource">
        <xsl:variable name="binding-path" select="./@mapNode"/>
        <xsl:variable name="bindpath" select="translate($binding-path, '\','/')" />
        <xsl:value-of select="concat('{Binding XPath=/',$bindpath,'/*}')"/>
      </xsl:attribute>
      <xsl:apply-templates select="@*|*" mode="to-attr" />
      <xsl:element name="ListView.View">
        <xsl:apply-templates select="*" />
      </xsl:element>
    </xsl:element>
  </xsl:template>

  <!-- ListView: Transformieren von Columns (Wrapper) zu GridView -->
  <xsl:template match="Columns">
    <xsl:element name="GridView">
      <xsl:apply-templates select="*" />
    </xsl:element>
  </xsl:template>

  <!-- ListView: Transformieren von Column zu GridViewColumn -->
  <xsl:template match="Column">
    <xsl:variable name="binding-path" select="./@mapNode"/>
    <xsl:element name="GridViewColumn">
      <xsl:apply-templates select="@*" />
      <xsl:attribute name="Header">
        <xsl:value-of select="./@title" />
      </xsl:attribute>
      <xsl:attribute name="DisplayMemberBinding">
        <xsl:variable name="bindpath" select="translate($binding-path, '\','/')" />
        <xsl:value-of select="concat('{Binding XPath=../',$bindpath,'}')"/>
      </xsl:attribute>
      <xsl:call-template name="listbox-width"/>
    </xsl:element>
  </xsl:template>

  <!-- ListView: Setzen der Column width. Falls 0 dann nichts angeben (auto size) -->
  <xsl:template match="width" name="listbox-width">
    <xsl:if test="./@width != 0">
      <xsl:attribute name="Width">
        <xsl:value-of select="./@width" />
      </xsl:attribute>
    </xsl:if>
  </xsl:template>

  <!-- Ausschluss des ListView Width Attribut -->
  <xsl:template match="ListViewWrapper/@width"
              mode="to-attr" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:02:52.423

Just do it the right way an it will work!

```
 <ListView ItemsSource="{Binding XPath=/Contact/RelatedContacts/*}" Name="listview1" DockPanel.Dock="Left, Right, Top, Bottom" Height="125" Background="White" Foreground="Black" Visibility="visible" BorderThickness="1,1,1,1" FontFamily="Tahoma" FontSize="9" FontStyle="Normal" TabIndex="0" IsTabStop="True">
      <ListView.View>
        <GridView>
          <GridViewColumn Header="Name" DisplayMemberBinding="{Binding XPath=Name}" />
          <GridViewColumn Header="Lastname" DisplayMemberBinding="{Binding XPath=Lastname}" />
          <GridViewColumn Header="Age" DisplayMemberBinding="{Binding XPath=Age}" />
          <GridViewColumn Header="Street" DisplayMemberBinding="{Binding XPath=Street}" />
          <GridViewColumn Header="City" DisplayMemberBinding="{Binding XPath=City}" />
          <GridViewColumn Header="Postal code" DisplayMemberBinding="{Binding XPath=PostalCode}" />
          <GridViewColumn Header="Country" DisplayMemberBinding="{Binding XPath=Country}" />
        </GridView>
      </ListView.View>
    </ListView> 
```

# node.js - 在代理后面使用 Passport-google

> ID：15634660
> 
> 赞同：0
> 
> 时间：2013-03-26T10:24:47.943
> 
> 标签：node.js, iis-7, proxy, openid, passport.js

我正在使用 Passport-google 登录用户`example.com:3000`。它工作得很好。但是，如果我将 Node.js 服务器放在代理（IIS7；不要问为什么，我必须这样做）之后，并在`example.com`（而不是`example.com:3000`）中访问我的网站，我就无法使用 Passport-google 登录。我在 IIS 中的 RewriteRule：

```
Pattern (.*) 
{HTTP_HOST} Matches myserver.com
{SERVER_PORT} Does not match 3000
Rewrite URL: http://127.0.0.1:3000/{R:1} 
```

我得到的错误：

```
Cannot GET /accounts/o8/ud? 
```

我对 Passport-twitter 和 Passport-facebook 也有同样的问题。

我想我应该在 IIS 中设置一些其他规则，或者在 Passport.js 或 OpenID 中设置一些代理设置，但还没有弄清楚。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:07:29.897

IIS 代理配置错误。在应用程序请求路由（ARR）/服务器代理设置`Reverse rewrite host in response headers`下已打开，因此当护照发送 302 时，将标头中的位置设置为`https://www.google.com/accounts/o8/...`IIS 代理将其替换为`http://myserver.com/accounts/o8/...`. 这当然是一个无效的链接。

# c# - 我如何知道在 C# 中单击了哪个对象？

> ID：15634663
> 
> 赞同：1
> 
> 时间：2013-03-26T10:24:50.090
> 
> 标签：c#, focus, mouseleave

![下图是我的 C# 应用程序的屏幕截图](../Images/39f702d99eaa0d3d10f5b0b618ef9801.png)

为了确保用户名输入有效，我添加了这样的回调方法来进行验证：

```
Regex UserNameRE = new Regex(@"^[a-zA-Z]\w*$");
//being called when input box is not focused any more
private void UserNameInput_Leave(object sender, EventArgs e)
{
    //pop up a warning when user name input is invalid
    if (!UserNameRE.IsMatch(UserNameInput.Text))
    {
        MessageBox.Show("Invalid User Name!");
        this.UserNameInput.Text = "";
        this.UserNameInput.Focus();
    }
} 
```

该方法将在用户完成输入后被调用（该方法与“离开输入框”事件绑定）。当用户留下无效的 User_Name 并开始输入密码时，它会起作用。

但是当用户单击另一个选项卡时，它也可以工作，例如注册选项卡。我不希望这种情况发生。因为如果用户单击“注册”选项卡显然不想再登录，我的 C# 应用程序不应弹出警告框并强制他们再次输入有效的用户名。

C# 如何区分这两种情况？如果我知道单击了哪个对象应该很容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:26:53.277

您将`source`在事件中`sender`发生`UserNameInput_Leave`事件。

```
private void UserNameInput_Leave(object sender, EventArgs e)
{
     //sender is source of event here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:33:33.310

这是一个选项：

```
private void UserNameInput_Leave(object sender, EventArgs e)
    {
        if (sender.GetType() != typeof(TextBox))
        {
            return;
        }
        TextBox tBox = (TextBox)sender;
        //pop up a warning when user name input is invalid
        if (!UserNameRE.IsMatch(UserNameInput.Text) && tBox.Name == UserNameInput.Name)
        {
            MessageBox.Show("Invalid User Name!");
            this.UserNameInput.Text = "";
            this.UserNameInput.Focus();
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T11:24:59.510

我不确定这里是否有适合这种特殊情况的正确解决方案。

当您添加一个处理程序来验证您的鼠标离开时的控件时，无论您单击选项卡中的另一个控件或另一个选项卡本身，它肯定会首先执行。

这种正常的流程不能轻易忽视。必须通过自己处理消息循环来实现，但将触发基于事件的流程、第一次离开焦点和选定的索引更改（选择）事件。我建议您不要打扰流程，因为验证是客户端并且非常快。我建议您在`ErrorProvider`需要时使用并附加到控件，而不是消息框。消息框也很令人不安，根据您的代码，您正在强制将其再次聚焦到文本框。

下面的代码怎么样？

```
public partial class Form1 : Form
{
    ErrorProvider errorProvider = new ErrorProvider();
    public Form1()
    {
        InitializeComponent();
        textBox1.Validating += new CancelEventHandler(textBox1_Validating);
    }

    private void textBox1_Leave(object sender, EventArgs e)
    {
        textBox1.CausesValidation = true;
    }

    void textBox1_Validating(object sender, CancelEventArgs e)
    {
        Regex UserNameRE = new Regex(@"^[a-zA-Z]\w*$");
        if (!UserNameRE.IsMatch(textBox1.Text))
        {
            errorProvider.SetError(this.textBox1, "Invalid username");
        }
    }
} 
```

# sql-server - 在清空文件的任务之后执行时，SSIS 数据流任务不会将记录写入 excel 文件

> ID：15634664
> 
> 赞同：1
> 
> 时间：2013-03-26T10:24:58.823
> 
> 标签：sql-server, excel, ssis

我正在编写一个 SSIS 包以每周从数据库中提取数据并将其写入 excel 文件。每次卸载数据时，都必须从头开始重新生成 excel 文件。我意识到如果我在数据流任务中使用 excel 目标，我无法覆盖现有文件，所以我尝试执行以下操作：

1.  在数据卸载之前添加一个执行 SQL 任务，以使用以下 sql 在文件中重新创建现有工作表

    `DROP TABLE Users$`

    `GO`

    `CREATE TABLE Users$ ( Ref NVARCHAR(10), Username NVARCHAR(20), Active INT, Absent INT, Allow Reconciliation NVARCHAR(4), Prefix NVARCHAR(10), First Name NVARCHAR(25), Middle Name NVARCHAR(25), Last Name NVARCHAR(40), Suffix INT, Email NVARCHAR(33), Work Phone NVARCHAR(10), Required Approvals NVARCHAR(1), Division/Section Ref NVARCHAR(15), Grade Ref NVARCHAR(9), Cost Centre Ref NVARCHAR(15), Location Ref NVARCHAR(5), Last Hire Date NVARCHAR(10), Original Hire Date INT, Manager Ref INT, Approver Ref NVARCHAR(6), Gender NVARCHAR(6), Ethnicity NVARCHAR(25), Language NVARCHAR(5), Expiry Date NVARCHAR(10), Staff Category NVARCHAR(50), Source of Funding NVARCHAR(4), BAC Number INT, Title NVARCHAR(50) )`

    `GO`

2.  保留一个只有列标题的空文件模板，以确保保留列映射，并在数据流任务之前使用脚本任务，用它替换任何现有的输出文件。

在这两种情况下，包都成功执行，我在日志中看到它说记录已写入 excel 文件，但是当我打开文件时，我只看到标题行，没有数据。我的印象是，当替换文件或重新创建工作表时，列映射会变得混乱，我不确定如何继续。

编辑：我必须提到，单独执行数据流任务最终会写入记录。请指教谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:32:55.213

一种可能的解决方案，完全未经测试，但它应该工作：

1.  使用脚本任务将唯一值写入变量。我建议使用 guid 或基于日期/时间的字符串。
2.  首先执行数据流任务，将数据与 guid 一起插入单独的列中
3.  在数据流之后对 excel 文件运行脚本任务，删除 guid 列不等于变量中的值的行

唯一的问题是 guid 将保留在 excel 文件中。

希望有帮助。

# java - Android：解析 XML 数据：带有参数的标签

> ID：15634676
> 
> 赞同：2
> 
> 时间：2013-03-26T10:25:35.743
> 
> 标签：java, android, xml, xml-parsing, xmlpullparser

我想为我的 android 应用程序解析从数据库软件导出的 XML 文件。然而，一些标签有这样的参数：

`<row>
<value column="Index" null="false">1</value>
<value column="Front" null="false">INFO</value>
<value column="Back" null="false">INFO</value>
<value column="Check" null="false">0</value>
</row>`

在尝试查找开始标记来解析它时，我指定了什么字符串值？（例如：要查找行，我将开始抽头与“行”进行比较，如果它返回 true，则计算数据。我对每个值（即索引、前、后和分别检查）做什么？）

我的java代码如下

```
 try{ 
    XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
    factory.setNamespaceAware(true);
    XmlPullParser xpp = factory.newPullParser();

    InputStream stream = context.getResources().openRawResource(com.Whydea.chemistryhelper.R.raw.appxml);
    xpp.setInput(stream, null);

    int eventType = xpp.getEventType();
    while (eventType != XmlPullParser.END_DOCUMENT){
        if(eventType==XmlPullParser.START_TAG){
            handleStartTag(xpp.getName());  //handels Start Tag
        } else if (eventType==XmlPullParser.END_TAG){
            handleEndTag(xpp.getName());
            Ctag=null;
        } else if (eventType==XmlPullParser.TEXT){
            handleText(xpp.getText());
        }
        eventType=xpp.next();
    }

    }catch (NotFoundException e){
        Log.d("XMLpp",e.getMessage());          
    }catch (XmlPullParserException e){
        Log.d("XMLpp",e.getMessage());
    }catch (IOException e){
        Log.d("XMLpp",e.getMessage());
    } 
```

`

编辑：

每个“值”开始标签都有自己的属性（column=...），我如何访问这些？

例如：要访问一行，我有一个值为“row”的字符串常量，并检查开始标签是否对应于它，它是否有效。但是当我声明一个值为“value column=\"Check\" null=\"false\""的字符串常量（我必须使用\ other wise“给出错误）时，它没有找到那个开始标签。那又怎样我的常数应该是？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:43:27.153

如果我正确理解了您的问题，那么要获取您需要执行的每个值，基本上您想要获取 xml 标记内每个属性的值

```
 int attributeCount = xpp.getAttributeCount();
        for(int i = 0; i<attributeCount; i++){
            String name = xpp.getAttributeName(i);
            //Log.d(TAG, "Name: "+name);
            if(name != null && name.equalsIgnoreCase("column")){

                return Integer.parseInt(xpp.getAttributeValue(i));                
            }
        } 
```

因此，一旦您遇到该行，然后在找到它后查找开始标记“值”，然后使用上面的代码获取属性的各个值。

根据您的评论，如果您想获取 XML 标记的文本值，则必须使用 getText() 方法。找到 START_TAG 值后，执行以下代码：

```
 eventType = xpp.next();
                    if(eventType == XmlPullParser.TEXT){
                        String text = xpp.getText();                              
                    } 
```

对于 xml 标签 'INFO' 值，它将返回 'INFO'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-05T10:24:25.543

```
 try {
        final Service S = new Service();
        String xmlString = S.ImportAllPollBoothStatus(IMEI,asscd, boothno);
        if(xmlString.toLowerCase().trim().equals("false")){
            return false;
        }
        DocumentBuilderFactory docFactory = DocumentBuilderFactory
                .newInstance();
        DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
        InputSource is = new InputSource();
        is.setCharacterStream(new StringReader(xmlString));
        Document doc = docBuilder.parse(is);

        NodeList nodes = doc.getElementsByTagName("HT");

        for (int i = 0; i < nodes.getLength(); i++) {

            Element element = (Element) nodes.item(i);
            NodeList blockidnodes = doc.getElementsByTagName("Table");

            for (int blockidcount = 0; blockidcount < blockidnodes
                    .getLength(); blockidcount++) {

                NodeList PollpercentId = element
                        .getElementsByTagName("PollpercentId");
                Element line1 = (Element) PollpercentId.item(blockidcount);

                NodeList asscd1 = element
                        .getElementsByTagName("asscd");
                Element line2 = (Element) asscd1.item(blockidcount);

                NodeList pollgcd = element
                        .getElementsByTagName("pollgcd");
                Element line3 = (Element) pollgcd.item(blockidcount);

                NodeList SessionYearIdref = element
                        .getElementsByTagName("SessionYearIdref");
                Element line4 = (Element) SessionYearIdref.item(blockidcount);

                NodeList MaleVoters = element
                        .getElementsByTagName("MaleVoters");
                Element line5 = (Element) MaleVoters.item(blockidcount);

                NodeList FemaleVoters = element
                        .getElementsByTagName("FemaleVoters");
                Element line6 = (Element) FemaleVoters.item(blockidcount);

                NodeList UpdatedDate = element
                        .getElementsByTagName("UpdatedDate");
                Element line7 = (Element) UpdatedDate.item(blockidcount);

                NodeList timeslot = element
                        .getElementsByTagName("timeslot");
                Element line8 = (Element) timeslot.item(blockidcount);

            this.db.insertVotingStatus(
                        getCharacterDataFromElement(line1),
                        getCharacterDataFromElement(line2),
                        getCharacterDataFromElement(line3),
                        getCharacterDataFromElement(line4),
                        getCharacterDataFromElement(line5),
                        getCharacterDataFromElement(line6),
                        getCharacterDataFromElement(line7),
                        getCharacterDataFromElement(line8));

            }
        }

    }
     catch (Exception e) {
        Log.e("EXCEPTION DURING VIDHANSABHA INSERION",
                "======Insert-VIDHANSABHA-DETAILS=====================" + e);
        return false;
    }
    return true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T10:47:32.677

您是否开发了生成 XML 文件的应用程序？如果是这样，你为什么不改变它？如果 XML 具有以下格式，则解析 XML 会容易得多：

```
<item Index="1" Front="INFO" Back="INFO" Check="0"/>
<item Index="2" Front="INFO" Back="INFO" Check="1"/> 
```

# php - var_export($entity) 导致 PHP 致命错误：AWS 上的嵌套级别太深，但内部托管的 ESX VM 上没有

> ID：15634679
> 
> 赞同：0
> 
> 时间：2013-03-26T10:25:56.163
> 
> 标签：php, amazon-web-services, fatal-error

试图让 AWS 运行一个 drupal 站点。该网站的一部分是每天运行的大型数据导入。但是，作为该过程的一部分，当生成与导入数据相关的错误或警告时，会尝试记录错误`var_export($entity)`。这会导致 PHP 致命错误，使导入过程脱轨，但仅在运行 Ubuntu 12.04 的 Amazon AWS 实例（尝试过的小型/中型 64 位）上。

我们内部托管的 ESX VM 上使用的几乎相同的 Ubuntu/Apache/PHP 版本没有表现出相同的行为，因此我们正在寻找原因。我们宁愿不编辑 PHP 代码，因为它是 Drupal 贡献模块的一部分，所以虽然我们希望 Feeds 模块维护者可能会考虑更安全的路线，但我们也只是想知道为什么似乎有一些限制AWS 以及它是否可以在 VM 上配置？

# javascript - 具有“响应宽度”、“固定高度”、“居中对齐”和“自动旋转”的图像滑块

> ID：15634680
> 
> 赞同：3
> 
> 时间：2013-03-26T10:25:57.103
> 
> 标签：javascript, slider, responsive-slides

我需要一个具有固定高度和居中图像的全宽（响应式）滑块（最小宽度为 960 像素，屏幕较宽的人会看到图像的其余部分（左侧和右侧的额外部分）），它需要自动旋转。

现在我得到了 html/css，但是我的 javascript 是垃圾所以我不知道如何让图像滑动。我在这里检查了很多问题，但似乎没有任何效果。我的图像尺寸是 2300x350。

**CSS：**

```
body {
    margin: 0 auto;
}

#slider_container {
    width:100%;
    height:350px;
    overflow:hidden;
    position: relative;
    z-index: 1;
}

.image {
    position:relative;
    float:left;
    height: 350px;
    width: 100%;
    overflow: hidden;
}

.image img {   
    position:absolute;
    left:50%;
    top:50%;
    margin-left:-1150px;
    margin-top:-175px;
} 
```

**HTML：**

```
<div id="slider_container">
    <div class="image">
        <img src="images/header.jpg" />
    </div>
    <div class="image">
        <img src="images/header2.jpg"/>
    </div>
    <div class="image">
        <img src="images/header3.jpg" />
    </div>
</div> 
```

使用此代码，图片在每个屏幕的中间都很好，但我如何让它滑动和自动旋转？我想第一张图片只需要被第二张替换，所以 z-index 会改变吗？或 + 或 - 一张图片的宽度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:57:23.357

`img`如果使用**flexslider**，您只需要设置标签的样式。试试下面的小提琴链接。我为此包含了四个文件。

*   jQuery 1.9.1
*   flexslider.css
*   jquery.flexslider-min.js
*   bg_direction_nav.png

**[jsfiddle](http://jsfiddle.net/Yxnhr/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-16T15:20:09.330

请检查这个... [http://www.jqueryscript.net/demo/Responsive-jQuery-Full-Width-Image-Slider-Plugin-responsiveSlides/](http://www.jqueryscript.net/demo/Responsive-jQuery-Full-Width-Image-Slider-Plugin-responsiveSlides/)它是全宽和固定高度滑块并自动旋转。在这里，您可以根据需要选择样式

```
$(function(){

    var p=$('#content').responsiveSlides({
        height:450,                     // slides conteiner height
        background:'#fff',              // background color and color of overlayer to fadeout on init
        autoStart:true,                 // boolean autostart
        startDelay:0,                   // start whit delay
        effectInterval:5000,            // time to swap photo
        effectTransition:1000,          // time effect
        pagination:[
            {
                active:true,            // activate pagination
                inner:true,             // pagination inside or aouside slides conteiner
                position:'B_R',         /* 
                                            pagination align:
                                                T_L = top left
                                                T_C = top center
                                                T_R = top right

                                                B_L = bottom left
                                                B_C = bottom center
                                                B_R = bottom right
                                        */
                margin:10,              // pagination margin
                dotStyle:'',            // dot pagination class style
                dotStyleHover:'',       // dot pagination class hover style
                dotStyleDisable:''      // dot pagination class disable style
            }
        ]
    });

}); 
```

更多修改请参见 jquery.responsiveSlides.js

# android - 调整大小和旋转布局android

> ID：15634682
> 
> 赞同：0
> 
> 时间：2013-03-26T10:25:58.730
> 
> 标签：android, android-layout, resize

![在此处输入图像描述](../Images/26da17dd4e441cefefe6f447f6a85788.png)

任何人都可以指导如何做这个布局？我试图弄清楚开发人员如何在触摸事件上旋转和调整布局大小，谁能给我一个例子或指导如何做到这一点。非常感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:31:14.143

尝试这样的事情

```
public class MyGestureDetector extends SimpleOnGestureListener
{       

    @Override
    public void onLongPress(MotionEvent event)
    {
        int X = (int)event.getX();          
        int Y = (int)event.getY();

        ...Rotate the image
    }
} 
```

有关更多信息，请查看此[链接](https://stackoverflow.com/questions/4593211/resize-image-while-rotating-image-in-android)。希望它可以帮助您！

# javascript - WCF Restfull WS post方法和HTML表单

> ID：15634684
> 
> 赞同：4
> 
> 时间：2013-03-26T10:26:04.007
> 
> 标签：javascript, html, .net, wcf, wcf-rest

我在 IIS 上发布了简单的 .net restful web 服务：

```
 [OperationContract]
    [WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Json, UriTemplate = "formTestGET?firstInput={firstInput}&socondInput={socondInput}")]
    string formTestGET(string firstInput, string socondInput);

    [OperationContract]
    [WebInvoke(Method = "POST", ResponseFormat = WebMessageFormat.Json, UriTemplate = "formTestPOST")]
    string formTestPOST(string testInput); 
```

方法的实现：

```
 public string formTestGET(string firstInput, string socondInput)
        {
        try
            {
            return "First Input value: " + firstInput + " Second Input value: " + socondInput;
            }
        catch (Exception e)
            {
            return e.Message;
            }
        }

    public string formTestPOST(string testInput)
        {
        try
            {
            return "Post paramether value: " + testInput;
            }
        catch (Exception e)
            {
            return e.Message;
            }
        } 
```

我的html表单：

```
 <form method="post" action="http://localhost/HTML5RestfulService/Service1.svc/formTestPOST">
        <fieldset>
        <legend>Form Post Request</legend>
            <input name="testInput"/>
            <button>Make Post Request</button>
        </fieldset> 
  </form> 
```

我只想通过 html 表单来使用这个服务。我的 POST 方法有问题。当我使用 Ajax（来自 java 脚本）调用它时它工作正常，但通过表单我无法得到响应。我收到“400 Bad Request”作为错误。

当我想通过 FORM 调用 WS 时，是否应该以不同方式配置我的 WS？

任何建议，请。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-28T04:38:25.793

如果你想在没有 ECMAScript (JavaScript)、Silverlight 或 Flash 的情况下从基本表单调用 WCF 服务，那么我认为你应该听从程先生的建议，将你的 formTestPOST 操作的输入参数更改为单个 Stream Parameter。

有关详细信息，请参阅以下代码：

```
// File: IService1.cs
//       (Based on work by Milos, Shawn Eary, Steven Cheng, and 
//        Web Community)
// 
// References
// [1] - Cheng, Steven (MSFT); Bill2010
//       How would I do the following form POST with WCF REST?
//       MSDN Forums: August 12, 2010 
//       http://social.msdn.microsoft.com/Forums/vstudio/en-US/dde73561-29c0-4c34-b18a-990ae114b92c/how-would-i-do-the-following-form-post-with-wcf-rest
//       [Cited: September 27, 2013]
using System.ServiceModel;
using System.ServiceModel.Web; 
using System.IO; 

[ServiceContract]
public interface IService1
{   
   // To post a basic HTML Form to a WCF Operation, I *think* Mr. Cheng
   // of Microsoft suggests that users put WCF into "Raw Data Transfer"
   // Mode by replacing all input parameters with a single Stream [1]
   [OperationContract]
   [WebInvoke(Method = "POST", ResponseFormat = WebMessageFormat.Json, UriTemplate = "formTestPOST")]
   string formTestPOST(Stream testInput);
} 
```

和

```
// File: Service1.cs
//       (Based on work by: Milos; Shawn Eary; all those listed 
//        in the References Section below; and, the Web Community)
// 
// References
// [1] - Brian; Coderer; Kopp, Darren; James; user1749204     
//       How do you get a string from a MemoryStream?
//       Stack Overflow: September 29, 2008 
//       http://stackoverflow.com/questions/78181/how-do-you-get-a-string-from-a-memorystream
//       [Cited: September 27, 2013]
// 
// [2] - Atlas, Mike; HaggleLad; Gravell, Marc
//       Parsing “multipart/form-data” in .NET/C#
//       Stack Overflow: November 11, 2009
//       http://stackoverflow.com/questions/1716868/parsing-multipart-form-data-in-net-c
//       [Cited: September 27, 2013]
//
// [3] - antscode 
//       Multipart Form Data Parser
//       CodePlex: 2009-2012
//       http://multipartparser.codeplex.com/SourceControl/list/changesets
//       [Cited: September 27, 2013]
// 
// [4] - Polidori, Lorenzo; Ed. S.; Woods, Jake
//       Uploading file from Flex to WCF REST Stream issues (how to decode multipart form post in REST WS)
//       Stack Overflow: January 20, 2012
//       http://stackoverflow.com/questions/5423031/uploading-file-from-flex-to-wcf-rest-stream-issues-how-to-decode-multipart-form
//       [Cited: September 27, 2013]
using System;
using System.IO; 
using System.Web; 

public class Service1 : IService1
{
   public string formTestPOST(Stream testInput)
   {
      // Get the post data out of the Stream testInput
      // Now that your form sucessfully fired this operation, you 
      // can use Brian's technique mentioned at [1] to convert the 
      // stream into a string
      StreamReader someReader = new StreamReader(testInput); 
      String theInput = someReader.ReadToEnd(); 

      // Unfortunately, various places on the internet seem to 
      // indicate that data that you now have in your string
      // theInput is multipart form data.  If you were willing
      // to use ASP.NET Compatibility Mode in your Interface, 
      // then you could have used the trick here mentioned by 
      // Mike Atlas and Mark Gravel in [2] but let's assume
      // you cannot use compatibilty mode.  Then you might 
      // try a multipart parser like the one written by antscode
      // at [3] or you can just do what I did and guess your 
      // way through.  Since you have a simple form, you can 
      // just guess your way through the parsing by replacing
      // "testInput" with nothing and UrlDecoding what is left.
      // That won't work on more complex forms but it works on 
      // this example.  You get some more backround on this 
      // and why UrlDecode is necessary at [4]
      theInput = theInput.Replace("testInput=", ""); 
      theInput = HttpUtility.UrlDecode(theInput); 
      return "Post paramether value: " + theInput;
   }
} 
```

# html - 页脚的网站正在创建一个水平滚动条

> ID：15634686
> 
> 赞同：1
> 
> 时间：2013-03-26T10:26:19.447
> 
> 标签：html, css, footer

这是我目前正在开发的网站：

[http://whybaguio.com/php/about/about.php](http://whybaguio.com/php/about/about.php)

页脚正在创建一个额外的水平滚动条。我不太确定出了什么问题，但有人可以帮助我吗？它还在左侧创建了一个额外的空白......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:30:44.703

页脚左侧的空白是 body 标签上的默认边距/填充。此外，您的页脚的宽度为 100% + 填充，这意味着超过 100%。如果您删除 100% 语句，浏览器会将其设为 100% bij 默认并补偿填充。

将以下两个更改应用于您的 CSS，一切都会好起来的：

```
body {
  padding: 0; // add this line
  margin: 0; // add this line
}

#footer {
 width: 100%; // remove this line
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:29:23.760

这是因为您已经指定了 100%`width` *和* `padding`一个`block`元素。[如果您对旧 IE 版本](http://caniuse.com/#search=box-sizing)不太在意，您可以通过简单地添加以下内容来解决此问题：

```
#footer {
    width:100%;
    padding:30px;
    ...
    -webkit-box-sizing:border-box; /* Older webkit */
    -moz-box-sizing:border-box; /* Firefox */
    box-sizing:border-box;
} 
```

您可能还希望将页面的`body`a`margin`设为 0，以使页脚完全到达屏幕的左侧、右侧和底部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T10:30:45.683

在您的页脚上设置`padding-left: 0;`和。我也想知道......为什么丑陋的自定义滚动条？`padding-right:0;``div`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T10:29:43.337

这是因为您在#footer 上使用了 100% 并且还应用了左右 30px 的填充，这将增加 100% 的屏幕宽度。

从#footer 中删除以下 CSS：

```
padding: 30px; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T10:33:23.540

尝试：

```
#footer{

...
padding: 30px 0;
...

} 
```

# c# - 在PHP下将时间存储到/发送的C# long变量转换为日期时间格式

> ID：15634693
> 
> 赞同：0
> 
> 时间：2013-03-26T10:26:36.437
> 
> 标签：c#, php, api

我得到“634999070963845181”，它存储了 C# 的长变量，相当于“3/26/2013 3:04:56 PM”。现在这个“长”类型时间“634999070963845181”发送到我的 REST API（用 PHP 编写）。在 Rest API 方面，我想从在 . 但在 date('m/d/Y h:i:s A', 634999070963845181) 中不会生成“3/26/2013 3:04:56 PM”。具有返回类型“int”的 PHP 时间函数。

亲爱的忍者，如何从 C# 长变量保持时间中获取 PHP 中的完整时间戳。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:41:37.273

如果您可以控制代码的 C# 端，则应将其修复为以标准格式传输时间戳，例如 ISO8601

否则，您需要了解有关 C# 和 PHP 时间戳的两件事：它们的纪元（即 0）和它们的单位。

对于 PHP，这是从 1970 年 1 月 1 日开始的秒数，而[C# 使用 0001 年和 100 纳秒间隔](http://msdn.microsoft.com/en-gb/library/system.datetime.ticks.aspx)。

# python - 如何让用户在范围内定义自己的插件并使其对自己可见？

> ID：15634698
> 
> 赞同：0
> 
> 时间：2013-03-26T10:26:46.997
> 
> 标签：python, flask

我正在使用烧瓶构建一个 Web 应用程序，它保存所有输入消息（用户向其发送 xml 消息）并找到正确的插件来响应并将响应返回给用户，该应用程序提供了基本插件，但我希望用户在我定义的api下编写自己的插件，下面是架构：

```
plugins     
   common_plugins1.py
   common_plugins2.py  
templates   
actions   
myapp.py 
```

但我遇到了几个问题：

1.  我只希望用户调用他的插件而不是其他插件，其他插件对他是不可见的
2.  我只希望用户调用我定义的定义的功能或模块
3.  我想让它可扩展

是否可以让用户上传他们用python编写的插件？并使应用程序动态加载它。

感谢您的帮助！

下面是插件示例：

```
#coding: utf-8
import somemodule 
from somemodule import *

def do(dmessage,context,default,**option):
    import re   
    try:
        _l=default.split('%|placeholder|%')
        message=ModuleRequestVoice(dmessage)
        r=ModuleResponseMusic()
        return r.render(message,_l[0],_l[1],_l[2],_l[2])
    except Exception,e:
        print 'match voice error:%s'%e
        return False 
```

# html - html2pdf中的Z-index

> ID：15634699
> 
> 赞同：1
> 
> 时间：2013-03-26T10:26:47.980
> 
> 标签：html, css, z-index, html2pdf

我正在尝试使用已实现**html2pdf的**[http://www.simpleinvoices.org](http://www.simpleinvoices.org)构建发票模板。

 **我已阅读文档并在[http://www.tufat.com/docs/html2ps/compatibility.css.2.1.html](http://www.tufat.com/docs/html2ps/compatibility.css.2.1.html)我发现**z-index**兼容性是“部分的，仅支持绝对定位框；仅支持数值”。

我的布局需要一个水印图像（它是 jpg），但分辨率高于 72ppp，这就是为什么我试图将数据表包装到容器 DIV 并将水印包装到另一个容器中，而不是使用背景-image 像往常一样（CSS2.1 不允许自定义背景图像大小）。

**CSS**

```
#container{
    width:700px; 
    position: relative; /* changing to absolute doesn´t work either */
    display:block; 
    z-index:1 !important; 
    margin:15px auto; 
}

#watermark{
    width: 500px; /* image size */
    top:730px;
    left:253px;
    display:block;
    position: absolute;
    z-index:-1 !important;
} 
```

**HTML**

```
<div id="container">    
    <table>
    ...
    </table>
</div>

<div id="watermark">    
    <img src="...">
</div> 
```

为什么表格在 HTML 预览中显示在水印图像上方（正确的行为）而在 PDF 中显示相反（图像下方的表格，这是错误的）？

请问有什么解决办法吗？

TIA**

# excel - Epplus SetPosition 图片问题

> ID：15634709
> 
> 赞同：7
> 
> 时间：2013-03-26T10:27:07.000
> 
> 标签：excel, c#-4.0, epplus

我正在使用[Epplus 库](http://epplus.codeplex.com/)在 Asp.Net C# 中生成 Excel 2010 及更高版本的兼容文件。我正在使用目前最新的版本 3.1.2。

在添加任何这样的图片之前，我先设置行高：

```
ExcelPackage pck = new ExcelPackage();
var ws = pck.Workbook.Worksheets.Add("sheet 1");
while (i < dt.Rows.Count + offset)
{
    ws.Row(i).Height = 84;
    i++;
} 
```

`dt`是我的带有 DataRows 的 DataTable。设置高度后，我再次循环遍历行以添加图片

```
while (i < dt.Rows.Count + offset)
{
    var prodImg = ws.Drawings.AddPicture(dr["code"].ToString(), new FileInfo(path));
    prodImg.SetPosition(i - 1, 0, 14, 0);
    prodImg.SetSize(75);
} 
```

这有效，但这不起作用：

```
var prodImg = ws.Drawings.AddPicture(dr["code"].ToString(), new FileInfo(path));
int w = prodImg.Image.Width;
int h = prodImg.Image.Height;

if (h > 140) // because height of 84 is 140 pixels in excel
{
    double scale = h / 140.0;
    w = (int)Math.Floor(w / scale);
    h = 140;
}

int xOff = (150 - w) / 2;
int yOff = (140 - h) / 2;

prodImg.SetPosition(i - 1, xOff, 11, yOff);
prodImg.SetSize(w, h); 
```

这会导致图片偏离中心和未调整大小的图像。然后这段代码在同一个循环中：

```
var prodImgDm = ws.Drawings.AddPicture("bcdm" + dr["code"].ToString(), new FileInfo(pathDm));
prodImgDm.SetPosition(i - 1, 25, 15, 40);
prodImgDm.SetSize(100); 
```

这有时确实有效。图片`prodImgDm`是具有静态宽度和高度的数据矩阵图像，不需要调整大小，因为它们总是很小/很小。所以也没有`SetSize`在某些行中，它可以工作，而在其他一些行中，它不起作用。真的很奇怪，因为代码是一样的。它可能在库和/或 Excel 中。也许我用错了？有epplus图片专家吗？

提前致谢！！

**编辑**有时一张图片值一千字，所以这里是截图。如您所见，产品图像在单元格中不是水平和垂直对齐的。即使我设置了最右边的数据矩阵，有时也会缩放约 120%，`SetSize(100)`所以这对我来说真的很奇怪。所以最后一个数据矩阵的大小正确......我已经找到[了这个 SO 线程](https://stackoverflow.com/questions/11588704/adding-images-into-excel-using-epplus)，但我认为这对我没有帮助。

![epplus 图片](../Images/ba671971fd22996402ba358cad367268.png)

**编辑**2013/04/09 Essenpillai 给了我一个设置的提示

```
pck.DoAdjustDrawings = false; 
```

但这给了我更奇怪的图像：

![调整图纸](../Images/0632d56b5ae73755a8f0a013e97ebaa7.png)

数据矩阵仍在逐行更改。一排还可以，另一排不行。并且 ean13 代码太宽了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-14T10:20:15.207

我对**Epplus library**有同样的问题。
在我的代码中找不到如何解决这个问题的解决方案后，我检查了这个库的[源代码](https://epplus.codeplex.com/SourceControl/latest)。Epplus 创建 excel 图片总是作为`twoCellAnchor`绘图。在`xlsx`文件中，您可以`drawingXYZ.xml`使用以下代码找到：

```
<xdr:twoCellAnchor editAs="oneCell">
  <xdr:from> ... </xdr:from>
  <xdr:to> ... </xdr:to>
  <xdr:pic>
  ...
</xdr:twoCellAnchor> 
```

因此，图片始终连接到两个单元格，这不是 Epplus 库的可变部分。[您可以在ExcelDrawing.cs](https://epplus.codeplex.com/SourceControl/latest#EPPlus/Drawing/ExcelDrawings.cs)文件中找到这部分代码。

```
 XmlElement drawNode = _drawingsXml.CreateElement(
    "xdr", "twoCellAnchor", ExcelPackage.schemaSheetDrawings);
  colNode.AppendChild(drawNode); 
```

您可以轻松创建自己的此 dll 副本。好消息是您只需要修改**两个文件**即可解决此问题。所以..

[从此站点](https://epplus.codeplex.com/SourceControl/latest)下载 Epplus 库的源代码副本并在 Visual Studio 中打开。

我们需要生成`drawing`as **oneCellAnchor**的代码，因此我们必须为图片移除`<xdr:to>`元素并创建`<xdr:ext />`以图片尺寸为参数的元素。
新的 xml 结构将如下所示：

```
<xdr:oneCellAnchor editAs="oneCell">
  <xdr:from> ... </xdr:from>
  <xdr:ext cx="1234567" cy="7654321" />
  <xdr:pic>
  ...
</xdr:oneCellAnchor> 
```

好的，那么，如何做到这一点？

**Epplus 代码的变化**

*ExcelDrawings.cs*（[文件链接在这里](https://epplus.codeplex.com/SourceControl/latest#EPPlus/Drawing/ExcelDrawings.cs)）

1.  首先我们修改`CreateDrawingXml()`里面的方法`ExcelDrawings.cs`。为了保留原始功能，我们添加了一个`oneCellAnchor`具有默认值的可选参数（如果 create ）。在方法中，基于此参数，我们创建一个或两个单元格锚点并创建或不创建`<xdr:to>`元素。

此方法代码的重要部分：

```
private XmlElement CreateDrawingXml(bool twoCell = true) { 
  if (DrawingXml.OuterXml == "") 
  { ... } // not changed
  XmlNode colNode= _drawingsXml.SelectSingleNode("//xdr:wsDr", NameSpaceManager);
  //First change in method code
  XmlElement drawNode;
  if (twoCell)
    drawNode = _drawingsXml.CreateElement(
      "xdr", "twoCellAnchor", ExcelPackage.schemaSheetDrawings);
  else
    drawNode = _drawingsXml.CreateElement(
      "xdr", "oneCellAnchor", ExcelPackage.schemaSheetDrawings);
  colNode.AppendChild(drawNode);

  //Add from position Element; // Not changed
  XmlElement fromNode = _drawingsXml.CreateElement(
    "xdr", "from", ExcelPackage.schemaSheetDrawings);
  drawNode.AppendChild(fromNode);
  fromNode.InnerXml = "<xdr:col>0</xdr:col><xdr:colOff>0</xdr:colOff>"
    + "<xdr:row>0</xdr:row><xdr:rowOff>0</xdr:rowOff>";

  //Add to position Element;
  //Second change in method
  if (twoCell)
  {
    XmlElement toNode = _drawingsXml.CreateElement(
      "xdr", "to", ExcelPackage.schemaSheetDrawings);
    drawNode.AppendChild(toNode);
    toNode.InnerXml = "<xdr:col>10</xdr:col><xdr:colOff>0</xdr:colOff>"
      + "<xdr:row>10</xdr:row><xdr:rowOff>0</xdr:rowOff>";
  }
  return drawNode;
} 
```

`AddPicture`然后我们在同一个文件中修改两个方法：

```
public ExcelPicture AddPicture(string Name, Image image, Uri Hyperlink)
{
  if (image != null) {
    if (_drawingNames.ContainsKey(Name.ToLower())) {
      throw new Exception("Name already exists in the drawings collection");
    }
    XmlElement drawNode = CreateDrawingXml(false);
    // Change: we need create element with dimensions
    // like: <xdr:ext cx="3857625" cy="1047750" />
    XmlElement xdrext = _drawingsXml.CreateElement(
      "xdr", "ext", ExcelPackage.schemaSheetDrawings);
    xdrext.SetAttribute("cx", 
      (image.Width * ExcelDrawing.EMU_PER_PIXEL).ToString());
    xdrext.SetAttribute("cy", 
      (image.Height * ExcelDrawing.EMU_PER_PIXEL).ToString());
    drawNode.AppendChild(xdrext);
    // End of change, next part of method is the same:
    drawNode.SetAttribute("editAs", "oneCell");
    ...
  }
} 
```

这个方法`FileInfo`作为输入参数：

```
public ExcelPicture AddPicture(string Name, FileInfo ImageFile, Uri Hyperlink)
{
  if (ImageFile != null) {
    if (_drawingNames.ContainsKey(Name.ToLower())) {
      throw new Exception("Name already exists in the drawings collection");
    }
    XmlElement drawNode = CreateDrawingXml(false);
    // Change: First create ExcelPicture object and calculate EMU dimensions
    ExcelPicture pic = new ExcelPicture(this, drawNode, ImageFile, Hyperlink);
    XmlElement xdrext = _drawingsXml.CreateElement(
      "xdr", "ext", ExcelPackage.schemaSheetDrawings);
    xdrext.SetAttribute("cx", 
      (pic.Image.Width * ExcelDrawing.EMU_PER_PIXEL).ToString());
    xdrext.SetAttribute("cy", 
      (pic.Image.Height * ExcelDrawing.EMU_PER_PIXEL).ToString());
    drawNode.AppendChild(xdrext);
    // End of change, next part of method is the same (without create pic object)
    drawNode.SetAttribute("editAs", "oneCell");
    ...
  }
} 
```

所以，这些都是重要的代码。现在我们必须更改搜索节点的代码并保持元素的顺序。

在`private void AddDrawings()`我们改变`xpath`：

```
XmlNodeList list = _drawingsXml.SelectNodes(
  "//xdr:twoCellAnchor", NameSpaceManager); 
```

**对此**：

```
XmlNodeList list = _drawingsXml.SelectNodes(
  "//(xdr:twoCellAnchor or xdr:oneCellAnchor)", NameSpaceManager); 
```

这一切都在这个文件中，现在我们更改
*ExcelPicture.cs*（[文件链接在这里](https://epplus.codeplex.com/SourceControl/latest#EPPlus/Drawing/ExcelPicture.cs)）

在构造函数中附加下一个代码的原始代码查找节点，如下所示：

```
node.SelectSingleNode("xdr:to",NameSpaceManager); 
```

因为我们并不`<xdr:to>`总是创建元素，所以我们更改此代码：

```
internal ExcelPicture(ExcelDrawings drawings, XmlNode node
  , Image image, Uri hyperlink) 
  : base(drawings, node, "xdr:pic/xdr:nvPicPr/xdr:cNvPr/@name")
{
  XmlElement picNode = node.OwnerDocument.CreateElement(
    "xdr", "pic", ExcelPackage.schemaSheetDrawings);
  // Edited: find xdr:to, or xdr:ext if xdr:to not exists
  XmlNode befor = node.SelectSingleNode("xdr:to",NameSpaceManager);
  if (befor != null && befor.Name == "xdr:to")
    node.InsertAfter(picNode, befor);
  else {
    befor = node.SelectSingleNode("xdr:ext", NameSpaceManager);
    node.InsertAfter(picNode, befor);
  }
  // End of change, next part of constructor is unchanged
  _hyperlink = hyperlink;
  ...
} 
```

与 FileInfo 作为输入参数的第二个构造函数相同：

```
internal ExcelPicture(ExcelDrawings drawings, XmlNode node
  , FileInfo imageFile, Uri hyperlink) 
  : base(drawings, node, "xdr:pic/xdr:nvPicPr/xdr:cNvPr/@name")
{
  XmlElement picNode = node.OwnerDocument.CreateElement(
    "xdr", "pic", ExcelPackage.schemaSheetDrawings);
  // Edited: find xdr:to, or xdr:ext if xdr:to not exists
  XmlNode befor = node.SelectSingleNode("xdr:to", NameSpaceManager);
  if (befor != null && befor.Name == "xdr:to")
    node.InsertAfter(picNode, befor);
  else {
    befor = node.SelectSingleNode("xdr:ext", NameSpaceManager);
    node.InsertAfter(picNode, befor);
  }
  // End of change, next part of constructor is unchanged
  _hyperlink = hyperlink;
  ... 
```

现在，图片被创建为`oneCellAnchor`. 如果需要，您可以`AddPicture`为展位变体创建多种方法。最后一步是构建这个项目并创建您自己的自定义`EPPlus.dll`. 然后关闭使用此 dll 的项目并将新文件`EPPlus.dll`,复制到项目`EPPlus.pdb`中`EPPlus.XML`（备份和替换原始 dll 文件）的同一位置（因此您不需要对项目引用或设置进行任何更改）。
然后打开并重建您的项目并尝试这是否能解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-01T08:52:47.833

```
public static void CreatePicture(ExcelWorksheet worksheet, string name, Image image, int firstColumn, int lastColumn, int firstRow, int lastRow, int defaultOffsetPixels)
        {
            int columnWidth = GetWidthInPixels(worksheet.Cells[firstRow, firstColumn]);
            int rowHeight = GetHeightInPixels(worksheet.Cells[firstRow, firstColumn]);

            int totalColumnWidth = columnWidth * (lastColumn - firstColumn + 1);
            int totalRowHeight = rowHeight * (lastRow - firstRow + 1);
            double cellAspectRatio = Convert.ToDouble(totalColumnWidth) / Convert.ToDouble(totalRowHeight);

            int imageWidth = image.Width;
            int imageHeight = image.Height;
            double imageAspectRatio = Convert.ToDouble(imageWidth) / Convert.ToDouble(imageHeight);

            int pixelWidth;
            int pixelHeight;
            if (imageAspectRatio > cellAspectRatio)
            {
                pixelWidth = totalColumnWidth - defaultOffsetPixels * 2;
                pixelHeight = pixelWidth * imageHeight / imageWidth;
            }
            else
            {
                pixelHeight = totalRowHeight - defaultOffsetPixels * 2;
                pixelWidth = pixelHeight * imageWidth / imageHeight;
            }

            int rowOffsetPixels = (totalRowHeight - pixelHeight) / 2;
            int columnOffsetPixels = (totalColumnWidth - pixelWidth) / 2;

            int rowOffsetCount = 0;
            int columnOffsetCount = 0;

            if (rowOffsetPixels > rowHeight)
            {
                rowOffsetCount = (int)Math.Floor(Convert.ToDouble(rowOffsetPixels) / Convert.ToDouble(rowHeight));
                rowOffsetPixels -= rowHeight * rowOffsetCount;
            }

            if (columnOffsetPixels > columnWidth)
            {
                columnOffsetCount = (int)Math.Floor(Convert.ToDouble(columnOffsetPixels) / Convert.ToDouble(columnWidth));
                columnOffsetPixels -= columnWidth * columnOffsetCount;
            }

            int row = firstRow + rowOffsetCount - 1;
            int column = firstColumn + columnOffsetCount - 1;

            ExcelPicture pic = worksheet.Drawings.AddPicture(name, image);
            pic.SetPosition(row, rowOffsetPixels, column, columnOffsetPixels);
            pic.SetSize(pixelWidth, pixelHeight);
        }

        public static int GetHeightInPixels(ExcelRange cell)
        {
            using (Graphics graphics = Graphics.FromHwnd(IntPtr.Zero))
            {
                float dpiY = graphics.DpiY;
                return (int)(cell.Worksheet.Row(cell.Start.Row).Height * (1 / 72.0) * dpiY);
            }
        }

        public static float MeasureString(string s, Font font)
        {
            using (var g = Graphics.FromHwnd(IntPtr.Zero))
            {
                g.TextRenderingHint = System.Drawing.Text.TextRenderingHint.AntiAlias;
                return g.MeasureString(s, font, int.MaxValue, StringFormat.GenericTypographic).Width;
            }
        }

        public static int GetWidthInPixels(ExcelRange cell)
        {
            double columnWidth = cell.Worksheet.Column(cell.Start.Column).Width;
            Font font = new Font(cell.Style.Font.Name, cell.Style.Font.Size, FontStyle.Regular);
            double pxBaseline = Math.Round(MeasureString("1234567890", font) / 10);
            return (int)(columnWidth * pxBaseline);
        } 
```

[在此处输入图像描述](https://i.stack.imgur.com/RhQta.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-16T09:06:45.857

也许我为时已晚，但这是我的答案..您也可以在 codeplex 问题上阅读它（[https://epplus.codeplex.com/workitem/14846](https://epplus.codeplex.com/workitem/14846)）

* * *

我也遇到了这个问题。

经过一番研究，我弄清楚了错误在哪里。

它位于第**149**行代码（**ExcelRow.cs**文件）的 ExcelRow 类中。

有一个错误，当行的高度发生变化时，它会重新计算所有图片的高度，但使用图片宽度代替高度，因此很容易修复。

换行就好

```
var pos = _worksheet.Drawings.GetDrawingWidths(); 
```

至

```
var pos = _worksheet.Drawings.GetDrawingHeight(); 
```

[查看图像上的代码更改](http://i.stack.imgur.com/hce3W.png)

PS 实际适用于***4.0.4版***

# java - 在 Neo4j 中搜索节点并将其从一个图形复制到另一个图形

> ID：15634710
> 
> 赞同：0
> 
> 时间：2013-03-26T10:27:07.767
> 
> 标签：java, neo4j

假设您有 3 个图表，其中一些数据在图表之间共享。那么有没有办法以编程方式执行以下操作：

1.  在图 1 中找到一个节点

2.  在图 2 中搜索该节点（通过属性名称）

3.  如果步骤 2 找到匹配项，那么我想将连接到图 2 中找到的节点的所有节点（包括“间接连接的节点”）并将它们连接到图 1 中的节点。

本质上，我想在图中搜索特定节点，找到直接或间接连接到的所有节点，并将整个连接复制到图 1 中的原始节点。

关于如何做到这一点的任何提示都会很棒。提前致谢。

使用 Neo4j 1.9，对 Cypher 查询不太熟悉，它是社区版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:20:24.010

如果您将所有 3 个图表都放在一个数据库中，那就很简单了。

执行查询以找到您的节点

```
START a=node.... MATCH ... WHERE ... RETURN a.prop as prop, ID(a) as id 
```

假设您的节点已针对您感兴趣的属性进行索引，请对该属性进行索引查找

```
START a=node({id}), b=node:index(property={prop}) 
MATCH (b)-->(c) 
CREATE (c)-[:REL_TYPE]->(a) 
```

# dart - 在 Dart 中测量 Html 元素的宽度和高度

> ID：15634714
> 
> 赞同：8
> 
> 时间：2013-03-26T10:27:21.997
> 
> 标签：dart

我想知道没有边距、边框和填充的元素的确切大小，只是最内框的宽度和高度（见下图）。

目前我知道函数“getBoundingClientRect”，它给出了包括边框和填充在内的大小。还有一个“客户端”属性，它返回一个包含填充的 Rect。

所以问题是，我如何在没有填充的情况下获得宽度和高度？

![CSS 盒子模型](../Images/f82a51d7ba96b14fe362e7a033a4559b.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T20:02:37.783

不幸的是，DOM 不提供这样的功能。这就是为什么大多数库（如 jQuery、ExtJS 等）都提供辅助方法的原因。他们本质上是[解析风格](https://github.com/jquery/jquery/blob/master/src/css.js#L354)并找出答案。

这是一个例子：

```
<div style="width: 100px; height: 100px; padding: 5px; border: 1px solid #000"></div> 
```

```
int getWidth(Element element) {
  var paddingLeft = element.style.paddingLeft.replaceAll('px', ''); // You may want to deal with different units.
  var paddingRight = element.style.paddingLeft.replaceAll('px', '');

  return element.clientWidth - int.parse(paddingLeft) - int.parse(paddingRight);
} 
```

以及用法：

```
print(getWidth(query('#test'))); 
```

结果：

```
100 
```

笔记：

*   您可能会考虑处理不同类型的单位（px、pt、em、...）。
*   该`box-sizing`属性还具有您可能想要检查的效果。

如果我或你碰巧有时间，也许会发布一个 Pub 包或其他东西。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-05T13:36:51.877

这个 pub 包可以预测 DOM 中尚不存在的*文本*的大小（没有边距、边框和填充）：[https ://pub.dartlang.org/packages/textent](https://pub.dartlang.org/packages/textent)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-02T10:51:56.840

试试最近推出的[Element.contentEdge](https://api.dartlang.org/apidocs/channels/stable/dartdoc-viewer/dart-dom-html.Element#id_contentEdge)，这似乎正是你想要的。

[来自 Google 员工的这条](https://code.google.com/p/dart/issues/detail?id=8376#c20)评论列出了一些更相关的方法，这些方法也已添加。请注意，至少其中一些在 API 文档中仍被标记为*Experimental*，但它们仍然很有用。

# c++ - 节点队列（链表）C++

> ID：15634715
> 
> 赞同：1
> 
> 时间：2013-03-26T10:27:22.240
> 
> 标签：c++, linked-list, queue, nodes

我正在尝试将节点存储在队列 (STL) 中，但出现错误。

首先，我想知道Node的结构是否正确。

真的，我想按整数的顺序（从小到大）存储节点，我听说过优先级队列，我尝试使用它，但是我遇到了一个很大的错误，所以我回到了队列。

然后我看到了一些关于节点的运算符重载的东西，但我不知道如何使用它。必须制作一个 Node.h 文件吗？

```
struct Node{
  int freq;
  char Char;
  struct Node *left;
  struct Node *right;
  Node(int freq, char Char){
  freq = freq;
  Char = Char;
 }
};

queue<Node*> list;
Node *a = new Node(2, '4');

list.push(a);

Node *e = list.pop();
cout << e->freq; 
```

错误：

```
error: void value not ignored as it ought to be // Node *e = list.pop(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T10:35:28.083

`pop`是`void`函数。你需要`front`：

```
list.pop();
Node *e = list.front(); 
```

下一个问题是构造函数：

```
Node(int freq, char Char){
  this->freq = freq; // <------- 'this->' is added to access to right variables
  this->Char = Char; // <-------
 } 
```

我的建议是编写您的构造函数，如下所示：

```
Node(int freq, char Char) : freq(freq), Char(Char)
{
} 
```

# c# - 在 C# 中使用 OLEDB 从 Excel 中选择单元格地址

> ID：15634718
> 
> 赞同：1
> 
> 时间：2013-03-26T10:27:36.970
> 
> 标签：c#, excel, select, oledb

我有以下连接字符串：

```
string conn = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=template.xls;Extended Properties=""Excel 12.0 XML;"""; 
```

连接成功。我在excel表中有以下数据

```
ID  Channel Upload
2_b_20_1    1   0,0 Mbps
2_b_20_2    2   0,0 Mbps
2_b_20_3    3   0,0 Mbps
2_b_20_4    4   0,0 Mbps
2_b_20_5    5   0,0 Mbps
2_b_20_6    6   0,0 Mbps
2_b_20_7    7   0,0 Mbps
2_b_20_8    8   0,0 Mbps
2_b_20_9    9   0,0 Mbps
2_b_20_10   10  0,0 Mbps
2_b_20_11   11  0,0 Mbps
2_b_20_12   12  0,0 Mbps
2_b_20_13   13  0,0 Mbps 
```

我需要在第一列中找到包含字符串的单元格的地址。所以在伪选择中它会像：

```
Select "CellAdress" from [MySheet] where Value like '2_b_20_1' 
```

它应该返回这个单元格的地址。

我还没有任何代码，我只是不知道从哪里开始。

有可能吗？先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T11:22:32.583

对于连接字符串，我总是去[ConnectionString.com](http://www.connectionstrings.com)。搜索您尝试打开的 Excel 文件版本的类型。

我猜你应该是：

```
 "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=template.xls;Extended Properties=\"Excel 12.0 Xml;HDR=YES\""; 
```

具有 SQL 查询字符串，对于 excel，您应该这样做

```
 "SELECT * FROM [<SheetName>$<optional range>]"; 
```

例如，如果工作表名称是 MySheet 你可以做

```
 "SELECT * FROM [MySheet$]"; 
```

如果你想选择一个特定的范围，你可以这样做。

```
 "SELECT * FROM [MySheet$A1:C200]"; 
```

在您的情况下（不知道您的其余代码很难），但我相信您需要的是：

```
 "SELECT * FROM [MySheet$] WHERE ID='2_b_20_1'"; 
```

# node.js - NodeJS：异步模块的并行性

> ID：15634723
> 
> 赞同：4
> 
> 时间：2013-03-26T10:27:47.407
> 
> 标签：node.js, async.js

我正在关注异步模块的每个方法（[https://github.com/caolan/async#each](https://github.com/caolan/async#each)）。它说该方法并行迭代数组。“**并行**”是让我感到困惑的词。AFAIK，现在 JavaScript 可以并行执行代码，因为它具有单线程模型。

每个方法中显示的示例侧重于 IO 场景。我使用“每个”方法只是为了添加数组的数字。如果存在并行性，我可以用我的例子证明这一点吗？

谢谢阅读。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T20:43:05.283

异步文档中的“并行”不是指并发方面的“并行”（例如同时运行多个进程或线程），而是指每个步骤独立于其他步骤的“并行”（相反的操作是[`eachSeries`](https://github.com/caolan/async#eachseriesarr-iterator-callback)，其中每个步骤仅在前一个步骤完成后运行）。

并行版本只有在步骤执行某种 I/O 时才有意义，这（由于 Node 的异步性质）可以彼此并行运行：如果一个步骤必须等待 I/O，其他步骤可以愉快地继续发送/接收数据。

如果这些步骤主要受 CPU 限制（即执行大量计算），那么它不会为您提供任何更好的性能，因为就像您说的那样，Node 在单个线程中运行解释器，这不会`async`改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:02:52.483

就像 robertklep 所说，它更多的是并发而不是并行。通过并行执行计算繁重的代码，您不会获得太多的性能提升。当您必须执行并行 I/O（例如，与外部 Web 服务为数组的所有项目通信）时，它很有用。

# java - GWT - 我的流程面板的 html 文件的结构

> ID：15634724
> 
> 赞同：0
> 
> 时间：2013-03-26T10:27:47.690
> 
> 标签：java, html, gwt, flowpanel

我有一个 Flowpanel，里面有一些列表框和标签：

```
 private ListBox lbStartHour = new ListBox();
 private ListBox lbStartMin = new ListBox();
 private ListBox lbPauseMin = new ListBox();
 private ListBox lbEndHour = new ListBox();
 private ListBox lbEndMin = new ListBox();
 private DateBox dbxDate = new DateBox();
 private Button OK = new Button();
 private Label lblError = new Label();
 private Label lblStart = new Label();
 private Label lblPause = new Label();
 private Label lblEnd = new Label();
 private Label lblHour = new Label();
 private Label lblMin = new Label();
 private Label lblDate = new Label();

flowpanel.add(lblHour);
    lblHour.setText("Stunden: ");
    flowpanel.add(lblMin);
    lblMin.setText("Minuten: ");
    flowpanel.add(lbStartHour);
    flowpanel.add(lbStartMin);
    flowpanel.add(lbPauseMin);
    flowpanel.add(lbEndHour);
    flowpanel.add(lbEndMin);
    flowpanel.add(dbxDate);
    dbxDate.setFormat(new DateBox.DefaultFormat(DateTimeFormat.getFormat("dd/MM/yyyy")));
    flowpanel.add(OK);
    OK.setText("Buchen");
    flowpanel.add(lblError);    
    lblError.setText("");
    flowpanel.add(lblDate);
    lblDate.setText("Datum: ");
    flowpanel.add(lblStart);
    lblStart.setText("Beginn: ");
    flowpanel.add(lblPause);
    lblPause.setText("Pause: ");
    flowpanel.add(lblEnd);
    lblEnd.setText("Ende: "); 
```

然后我有一个具有一定结构的 .html 文件，如下所示：

```
<table id="mainTable" style="padding-bottom: 50px">
<tr>
    <td></td>
    <td id="lblHour"></td>
    <td id="lblMin"></td>
</tr>
  <tr>
    <td id="lblStart"></td>
    <td id="lbStartHour"></td>
    <td id="lbStartMin"></td>
  </tr>      
  <tr>
    <td id="lblPause"></td>
    <td></td>
    <td id="lbPauseMin"></td>
  </tr>
  <tr>
    <td id="lblEnd"></td>
    <td id="lbEndHour"></td>
    <td id="lbEndMin"></td>
  </tr>
  <tr>
    <td id="lblDate"></td>
    <td id="dbxDate"></td>
    <td></td>
    <td id="OK"></td>
  </tr>
  <tr>
    <td id="timeBx"></td>
  </tr>
  <tr>
    <td id="error" colspan="5"></td>
  </tr>
</table> 
```

在我的根面板中，我只能用`RootPanel.get("lblHour").add(lblHour);`它来将它“绑定”到我的 java 代码，但是我如何能够对我的 FlowPanel 做同样的事情呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:59:08.647

您需要在[**GWT 的 UiBinder**](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder)上下文中查看将 gwt java 代码与 html 混合和匹配的方法。

GWT 的 UiBinder 为您提供了使用 css/html 的灵活性，并允许您在 gwt 小部件中插入插件。

尝试避免在 RootPanel 中从表格的一个单元格中获取元素并尝试将项目填充到其中。

# sql - 当查询不到一秒时，为什么 IF（查询）需要一个多小时？

> ID：15634733
> 
> 赞同：11
> 
> 时间：2013-03-26T10:28:10.800
> 
> 标签：sql, sql-server

我有以下 SQL：

```
 IF EXISTS
 (
    SELECT
        1
    FROM
        SomeTable T1
    WHERE
        SomeField = 1
    AND SomeOtherField = 1
    AND NOT EXISTS(SELECT 1 FROM SomeOtherTable T2 WHERE T2.KeyField = T1.KeyField)
)
    RAISERROR ('Blech.', 16, 1) 
```

该`SomeTable`表大约有 200,000 行，并且该`SomeOtherTable`表的行数大致相同。

如果我执行内部 SQL (the `SELECT`)，它会在亚秒时间内执行，不会返回任何行。但是，如果我执行整个脚本 ( `IF...RAISERROR`)，则需要一个多小时。**为什么？**

现在，显然，执行计划是不同的——我可以在企业管理器中看到——但同样，*为什么*？

我可能会做类似`SELECT @num = COUNT(*) WHERE`......然后`IF @num > 0 RAISERROR`但是......我认为这有点忽略了这一点。如果您知道它存在，您只能围绕一个错误（而且它在我看来确实像一个错误）进行编码。

* * *

**编辑**：

我应该提一下，我已经尝试按照@Bohemian 的回答将查询重新组合到 OUTER JOIN 中，但这对执行时间没有影响。

* * *

**编辑 2**：

我附上了内部`SELECT`语句的查询计划：

![查询计划 - 内部 SELECT 语句](../Images/d89fd5d7755dd4ea7c7ba523cf9c7e43.png)

...以及整个`IF...RAISERROR`块的查询计划：

![查询计划 - 整个 IF 语句](../Images/6dd6311f1ea369fa39bd9703fcdf956c.png)

显然，这些显示了真实的表/字段名称，但除此之外，查询完全如上所示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T11:16:03.537

`IF`不会神奇地关闭优化或破坏计划。优化器刚刚注意到`EXISTS`最多只需要一行（如 a `TOP 1`）。这称为“行目标”，通常在您进行分页时发生。但也有`EXISTS`, `IN`,`NOT IN`和这样的东西。

我的猜测：如果您写入`TOP 1`原始查询，您会得到相同的（坏的）计划。

优化器在这里尝试变得聪明，并且只使用更便宜的操作生成第一行。不幸的是，它错误地估计了基数。它猜测查询会产生很多行，尽管实际上它不会产生任何行。如果它估计正确，你只会得到一个更有效的计划，或者它根本不会进行转换。

我建议以下步骤：

1.  通过查看索引和统计数据来确定计划
2.  如果这没有帮助，请更改`IF (SELECT COUNT(*) FROM ...) > 0`将给出原始计划的查询，因为优化器没有行目标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T10:48:16.003

这可能是因为优化器可以弄清楚如何将您的查询变成更有效的查询，但是 IF 以某种方式阻止了这种情况。只有一个解释会告诉你为什么查询需要这么长时间，但我可以告诉你如何让整个事情更高效......而不是使用相关子查询，这是非常低效的 - 你会运行“n”个子查询主表中的“n”行 - 使用 JOIN。

尝试这个：

```
IF EXISTS (
  SELECT 1
  FROM SomeTable T1
  LEFT JOIN SomeOtherTable T2 ON T2.KeyField = T1.KeyField
  WHERE SomeField = 1
  AND SomeOtherField = 1
  AND T2.KeyField IS NULL
) RAISERROR ('Blech.', 16, 1) 
```

这里的“技巧”是使用 s LEFT JOIN 并通过在 WHERE 子句中测试是否为空来过滤掉所有连接的行，该子句在连接完成*后执行。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T11:33:26.513

请尝试`SELECT TOP 1 KeyField`。我猜使用主键会更快。

注意：我将其发布为答案，因为我无法发表评论。

# jquery - 获取每个第一个子文本并设置为每个父 ID

> ID：15634739
> 
> 赞同：1
> 
> 时间：2013-03-26T10:28:16.893
> 
> 标签：jquery

我有一张桌子

```
<tbody>
    <tr>
        <td>101</td>
        <td>37,17 m<sup>2</sup></td>
        <td>1</td>
        <td>3</td>
        <td></td>
    </tr>
    <tr>
        <td>102</td>
        <td>30,53 m<sup>2</sup></td>
        <td>1</td>
        <td>2</td>
        <td></td>
    </tr>
    <tr>
        <td>103</td>
        <td>10,53 m<sup>2</sup></td>
        <td>1</td>
        <td>5</td>
        <td></td>
    </tr>
</tbody> 
```

我想从第一个获取文本并将其设置为父级的 id 以像这样结束

```
<tbody>
    <tr id="101">
        <td>101</td>
        <td>37,17 m<sup>2</sup></td>
        <td>1</td>
        <td>3</td>
        <td></td>
    </tr>
    <tr id="102">
        <td>102</td>
        <td>30,53 m<sup>2</sup></td>
        <td>1</td>
        <td>2</td>
        <td></td>
    </tr>
    <tr id="103">
        <td>103</td>
        <td>10,53 m<sup>2</sup></td>
        <td>1</td>
        <td>5</td>
        <td></td>
    </tr>
</tbody> 
```

我写了这样的东西

```
var td = $('tobody td:first-child').text(); - returns 101102103

$('tobody tr').attr('id', td); - returns 101102103 for each tr 
```

这个怎么分开？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T10:32:17.487

只需遍历所有第一个`<td>`元素，找到各自的父元素并设置它们的`id`属性：

```
$('td:first-child').each(function() {
  $(this).parent().attr('id', $(this).text());
}); 
```

如果您有更多表或更大的文档，则锚定操作是有意义的：

```
$('#table-id').find('td:first-child').each(function() {
    var $this = $(this);

    $this.parent().attr('id', $this.text());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:30:42.500

您可以使用`each`迭代`td`并将其分配`id`给父级`tr`

**[现场演示](http://jsfiddle.net/nt3Y8/)**

```
$('td:first-child').each(function(){    
   $(this).closest('tr').attr('id', $.trim($(this).text()));
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T10:32:53.550

尝试这个：

```
$('tobody tr').each(function(){
  $(this).attr('id', $(this).find("td:eq(0)").text().trim());
}); 
```

或者简单地说：

```
$('tbody tr').attr('id' , function(){
  return $(this).find("td:eq(0)").text().trim();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T10:30:58.580

```
$('tr').each(function() {
  var $this = $(this),
      theId = $this.find('td').first().text();  
  $this.attr('id', theId);
}); 
```

请注意，数字 ID 仅在 HTML5 中有效

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T10:38:52.400

`.each()`在 中遍历`<tr>`：

```
$('tbody tr').each(function(){
   var txt = $.trim($('td:first',this).text());
   $(this).attr('id', txt);
}); 
```

### [检查小提琴](http://jsfiddle.net/ySpBc/)

# google-earth - Google Earth Api - 以编程方式进入街景模式

> ID：15634742
> 
> 赞同：3
> 
> 时间：2013-03-26T10:28:21.867
> 
> 标签：google-earth, google-earth-plugin, google-street-view

我试图给 google earth api 一个起点，我从 Google map Api v3（我有 lat 和 lng）返回。我想做的是给谷歌地球一个位置，它可以自动移动到街景级别。

到目前为止，我所做的只能移动到地面。以下代码是我尝试移动 Google 地球相机的方法

```
var lookAt = DS_ge.createLookAt('');
lookAt.setLatitude(myRoute.steps[0].path[0].lat());
lookAt.setLongitude(myRoute.steps[0].path[0].lng());
lookAt.setRange(1000.0); //default is 0.0
DS_ge.getView().setAbstractView(lookAt); 
```

有没有什么方法可以实现结果，比如我将街景小人移动到我想要的位置并显示街景。我认为有一个街景小人功能让它工作，但我找不到它。任何建议都会有所帮助thx :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:16:14.140

要以编程方式进入 StreetView 模式，您需要将*gx:ViewOptions*元素添加到 LookAt 元素：

```
var lookAt = ge.createLookAt('');
// ... set your LookAt parameters
// don't forget default Altitude mode is ClampToGround
lookAt.setAltitudeMode(ge.ALTITUDE_RELATIVE_TO_GROUND)

// enable Street view option on ViewerOptions and add that to LookAt
var viewerOptions = ge.createViewerOptions('');
viewerOptions.setOption(ge.OPTION_STREET_VIEW, ge.OPTION_STATE_ENABLED);
lookAt.setViewerOptions(viewerOptions);

ge.getView().setAbstractView(lookAt); 
```

要控制用户是否可以使用手动导航控件进入街景，请调用

```
var navcontrol = ge.getNavigationControl();
navcontrol.setStreetViewEnabled(true); 
```

# prolog - 未定义过程 s/1 谓词

> ID：15634746
> 
> 赞同：2
> 
> 时间：2013-03-26T10:28:32.930
> 
> 标签：prolog

我正在参加初学者序言课程。我们应该使用 swi-prolog，这就是我所说的

```
% library(swi_hooks) compiled into pce_swi_hooks 0.00 sec, 3,856 bytes
Welcome to SWI-Prolog (Multi-threaded, 64 bits, Version 5.10.4) 
```

我们被要求开发算术谓词 add(X,Y,Z)。使用后继 s(X) [= X+1] 仿函数。此谓词在我的机器上失败，并出现以下错误：

```
ERROR: toplevel: Undefined procedure: s/1 (DWIM could not correct goal) 
```

有没有人有办法解决吗？也许我必须降级我的swpl？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:53:32.990

你的 SWI-Prolog 很好，但你误解了任务。您必须编写 add/3 的定义，使用 Peano 表示而不是通常的数字，例如，2 变为 s(s(0))。您可以搜索类似的问题，例如，我[回答](https://stackoverflow.com/a/10310531/874024)以帮助您了解在您所面临的相同上下文中实际 Prolog 执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T11:00:18.770

您不必降级解释器版本，因为`s/1`它不是实际的谓词（这就是您收到此错误的原因）。`s/1`如您所知，它仅代表“后继者”，它用于以递归方式表示数字。

> Prolog 中的自然数由两个结构构成，即常数符号`0`和 arity 1 的后继函数`s`。所有自然数然后递归地给出为`0, s(0), s(s(0)), s(s(s(0))), ...`。我们采用 s ^n (0) 表示整数*n*的约定，即*n 次*应用后继函数 `0`

*[Sterling L.，Shaphiro E.，“序言的艺术”，第 2 版。- 麻省理工学院出版社]*

我想你会发现[这个相关的问题](https://stackoverflow.com/questions/8197088/what-does-the-s-predicate-do-in-prolog)很有趣。

# actionscript-3 - For循环、数组和影片剪辑——如何实现动态系统

> ID：15634749
> 
> 赞同：0
> 
> 时间：2013-03-26T10:28:51.287
> 
> 标签：actionscript-3, flash

我正在处理从 XML 文件中读取以“构建”动画本身的 Flash 场景。

读取 XML 没有问题，这就像一个魅力。我的问题是何时将资产（图像）放到舞台上。

我的代码如下：

```
import flash.display.Sprite;
import flash.display.Loader;
import flash.net.URLRequest;
import flash.display.MovieClip;

var xmlLoader:URLLoader;
var builderXml:XML;

var container:MovieClip = new MovieClip();
var assetsArray:Array = new Array();

var bg:Sprite;

stage.addChild(container);

init();

function init():void
{
    xmlLoader = new URLLoader();
    xmlLoader.load(new URLRequest("build_me.xml"));
    xmlLoader.addEventListener(Event.COMPLETE, processXML);
}

function processXML(e:Event):void {
    builderXml = new XML(e.target.data);

    for (var i:int = 0; i < builderXml.assets.*.length(); i++){
        var image:MovieClip = new MovieClip();
        var assetArray:Array = new Array();

        image.x = builderXml.assets.asset[i].start.position.x;
        image.y = builderXml.assets.asset[i].start.position.y;

        trace(image.x);

        assetArray.push(builderXml.assets.asset[i].source);
        assetArray.push(builderXml.assets.asset[i].start.scale);
        assetArray.push(builderXml.assets.asset[i].start.position.x);
        assetArray.push(builderXml.assets.asset[i].start.position.y);
        assetArray.push(builderXml.assets.asset[i].start.rotation);
        assetArray.push(image);

        assetsArray.push(assetArray);

        var lc:LoaderContext = new LoaderContext();
        lc.checkPolicyFile = false;

        var loader = new Loader();
        loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onImageLoaded);

        var _myURLRequest = new URLRequest(builderXml.assets.asset[i].source);
        loader.load(_myURLRequest, lc);

        function onImageLoaded(e:Event):void
        {
            loader.contentLoaderInfo.removeEventListener(Event.COMPLETE, onImageLoaded);
            image.addChild(e.target.content);
        }

        container.addChild(assetsArray[i][5]);
    }
    trace(assetsArray);

} 
```

我的 XML 列出了 2 个资产，一个用于背景的 1280 x 720 图像，另一个是我想要定位的简单徽标，使用设置的 x 和 y 坐标。

问题是这两个资产都被添加到同一个影片剪辑中，尽管我在 FOR 循环内创建了一个新的 MC 实例。

我怎样才能让资产遵守单独的影片剪辑，然后我可以将其存储在数组中（很确定我将当前的 MC 正确存储在数组中，只是碰巧 MC 包含 2 个图像，而不是 1 个）

另外，为什么我无法访问“onImageLoaded”函数中的变量“i”？它位于 FOR 循环内...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:36:36.723

您在侦听器中使用全局变量，并期望在侦听器实际触发时不会更改它。侦听器是异步的，因此您应该跟踪哪些加载器触发了一个`Event.COMPLETE`事件，以便您可以`image`从 XML 解析步骤中准备的那些中检索正确的 MC 实例，然后才将加载器的内容填充到其中。[我的答案](https://stackoverflow.com/questions/15605263/how-to-add-pictures-to-a-container-sprite-with-foreach-and-progress-bar/15607518#15607518)有一种方法可以做到这一点，您应该使用的方法类似于用于在那边检索相应进度条的方法。

# c# - 使用未签名的局部变量（字符串）错误

> ID：15634754
> 
> 赞同：0
> 
> 时间：2013-03-26T10:29:11.007
> 
> 标签：c#, string, winforms, undefined

所以我在文本框分配中收到这个错误，但我不明白为什么，谁能给我一个关于该怎么做的建议？

```
 private void button2_Click(object sender, EventArgs e)
    {
        int n = Convert.ToInt32(textBox16.Text);
        int t = Convert.ToInt32(textBox17.Text);
        matrix.CalculeazaQR(n, t);

        string temp;

        for (int i = 0; i < n; i++)
        {
            for (int j = 0; j < n; j++)
            {
                temp = matrix.q[i, j].ToString("0.00");

                if (j % (n - 1) == 0)
                    temp += "\n";

                temp += ",";

            }

        }
        textBox3.Text = temp;

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T10:30:30.407

您`temp`在 for 循环内进行分配，编译器无法确定您是否会进入循环内。您可以像这样初始化`temp`顶部：

```
string temp = string.Empty; 
```

只有条件为真且编译器在编译时无法确定条件是否为真时，循环内的语句才会执行，它会认为 temp 保持未分配，因此出现错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T10:30:37.000

像这样放：

```
string temp=""; 
```

在实际使用它之前，您必须将字符串（或任何变量）分配为空或其他内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T10:30:36.953

*“任何人都可以给我一个建议吗？”*
好吧，初始化文本：

```
string temp = string.Empty; 
```

编译器无法知道 temp（在 上使用`textBox3.Text = temp;`）在循环之后是否有值（例如，当 n < 1 时）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T10:32:02.593

一方面，你的循环一开始就被打破了——只有最后一次迭代才是重要的（即当两者`i`都`j`存在时`n - 1`），因为你要`temp`完全替换 的值。

但是编译器不知道这`n`是积极的——它不知道你会*进入*循环。通常，编译器永远不会假设您输入了`if`语句、`for`语句、`while`语句或循环的主体 - 因此在这些主体中进行的任何*赋值*`foreach`都不会影响局部变量是否在该语句...并且必须先明确分配一个局部变量，然后才能从中读取（就像您在方法结束时所做的那样）。

 *我怀疑你实际上想要一个`StringBuilder`你在循环中附加的：

```
StringBuilder builder = new StringBuilder();
for (...)
{
    for (...)
    {
        builder.AppendFormat("{0:0.00},", matrix.q[i, j]);            
    }
    builder.Append("\n");
}
textBox3.Test = builder.ToString(); 
```*

# php - 在图像上添加文本时出现php错误

> ID：15634755
> 
> 赞同：0
> 
> 时间：2013-03-26T10:29:13.023
> 
> 标签：php, image, wordpress

您好，我是 php 的新手，所以我对此知之甚少。我正在尝试使用表单方法在图像上添加文本，但这不起作用这里是代码

在 form-add-text.php 中

```
 <form id="action-meme" action="mysite.com/image-process.php/">

<input name="cp" id="inputcpname" type="text" >
<input type="submit" >
</form> 
```

这是 image-process.php 中的代码

```
 <?php
  //Set the Content Type
  header('Content-type: image/jpeg');

  // Create Image From Existing File
 $jpg_image = imagecreatefromjpeg('http://i.imgur.com/xxxYpW.jpg');

  // Allocate A Color For The Text
   $white = imagecolorallocate($jpg_image, 255, 255, 255);

  // Set Path to Font File
 $font_path = 'http://fonts.googleapis.com/css?family=Gabriela';

 // Set Text to Be Printed On Image
 $text = $_POST["cp"];

 // Print Text On Image
  imagettftext($jpg_image, 25, 0, 75, 300, $white, $font_path, $text);

 // Send Image to Browser
 imagejpeg($jpg_image);

 // Clear Memory
 imagedestroy($jpg_image);
?> 
```

但是如果我用一些文本替换 "$_POST["cp"]" 效果很好

我无法弄清楚我的工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T10:33:45.647

在表单中添加 method="post"

```
 <form id="action-meme" action="mysite.com/image-process.php/" method="post" >

<input name="cp" id="inputcpname" type="text" >
<input type="submit" >
 </form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:32:18.287

尝试向表单添加方法

```
 <form id="action-meme" action="mysite.com/image-process.php/" method="post"> 
```

# iphone - 如何检查 UIDatePicker 中的日期是否被修改？

> ID：15634757
> 
> 赞同：0
> 
> 时间：2013-03-26T10:29:15.917
> 
> 标签：iphone, ios, cocoa-touch, nsdate, uidatepicker

我`UIDatePicker`用来选择日期。加载查看**日期选择器时，最小日期**设置为**当前日期**，对于我的规范，我需要知道是否进行了任何修改`UIDatePicker`。

```
if ([[date_picker minimumDate] compare:[date_picker date]] != NSOrderedSame) {
  printf("value modified");
} 
```

我已经尝试过上述条件，但即使我没有修改日期，它也总是不匹配。我做错什么了吗？我怎么知道呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:34:36.957

像这样为日期选择器设置控制事件

```
 [date_picker addTarget:self
               action:@selector(pickerChanged:)
     forControlEvents:UIControlEventValueChanged]; 
```

并在 pickerChanged 方法中获取它的值

```
 - (void)pickerChanged:(id)sender{
             selectedDate=[sender date];
       } 
```

日期比较

```
 if ([initialDate compare:selectedDate]!=NSOrderedSame)
        {
           NSLog(@"modified");
         // two dates are same and the date formatting of the two dates must be same
        } 
```

因此，每当您更改日期时，都会触发此方法 initialDate 是在视图加载时设置值

# ruby-on-rails - Rails 开发 Mac OS 或 Windows

> ID：15634758
> 
> 赞同：7
> 
> 时间：2013-03-26T10:29:16.587
> 
> 标签：ruby-on-rails, ruby, windows, macos

我目前正在开始 Ruby on Rails 开发并且目前使用 Windows（XP 或 7），但我发现很多情况下 gem 似乎没有做他们应该做的事情，或者在 Windows 下安装和使用它们很痛苦，比如 twitter- bootstrap 对于 Mac OS 来说似乎很好，但我必须弄清楚 sass-bootstrap 对 Windows 来说更好。它一直在继续，就像今天一样，在 RSpec 测试时我似乎无法启动它来做它的事情，尽管我知道我缺乏经验并没有帮助。

那我应该买一台Mac吗？买一台 Mac 会让我的生活更轻松吗？大多数 RoR 开发人员似乎都在使用它们，并且大多数示例教程似乎都假设我这样做了。

感谢您的任何建议

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T11:36:22.030

最简单的答案是您可以轻松地在任何平台上进行 RoR 开发。

就个人而言，我开始在 Windows 中进行开发，然后在运行 Ubuntu 的 Windows 上切换到 VirtualBox。我现在有一台 MacBook Pro，必须说这是迄今为止最快乐的环境！

Windows - 安装导轨相当简单，但似乎比其他环境慢得多。缺少带有颜色突出显示的简单控制台很烦人

Ubuntu - 比 Windows 下更快（即使是虚拟化的！）。如果您不了解 linux，那么它就不那么有趣了，命令行的学习曲线陡峭，并且需要解决许多依赖项

Mac - 两全其美，漂亮的 UI 用于日常工作，令人敬畏的命令行支持，Ruby 和 RoR 在 MacBook Pro 上运行速度超快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T10:34:19.577

我不使用 mac，我使用 linux，但我在使用 Rails 的早期就从 Windows 切换了。使用mac 比使用windows 好得多。便宜的选择是使用 Ubuntu 双启动你的 Windows 机器。

只是从窗户上下来。

有关更多详细信息，请参阅： [Getting Ruby on Rails environment working and installation sqlite3](https://stackoverflow.com/questions/15574693/getting-ruby-on-rails-environment-working-and-installing-sqlite3/15575072#15575072)

编辑：对于那些处理器支持它的人来说，VirtualBox 也是一种选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T11:12:06.643

我认为您可以使用 linux 版本 - ubuntu 12.04，因为有些 ruby​​ gem 不能在 ruby​​racer、less-rails 等 Windows 上运行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-26T10:33:19.420

我建议尝试使用任何 linux 版本，如 Ubuntu、centos、fedora ......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T10:50:46.077

安装 VirtualBox 并运行 Ubuntu 或 Redhat 虚拟 linux 机器。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-02T17:20:11.633

我在工作和家里大部分时间都在 Windows 下的 Rails 中进行开发。在某些情况下，gem 无法正常工作或需要更多工作才能正常运行。还有一些情况是在 Windows 上开发和部署到 Linux/*NIX 环境可能会导致问题，通常涉及 Gemfile.lock 中特定于 Windows 的 gem，这些 gem 在 Linux/*NIX 上不兼容。

总而言之，只要您注意陷阱，就不会太麻烦。

我还使用 Mac OS X 进行 Rails 开发，我比在 Windows 上更喜欢这种开发体验。话虽如此，我当然**不需要**Mac 就可以在 Rails 中有效地进行开发。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-26T10:51:14.730

我还从 Rails 开发开始，最近给自己买了一台 MacBook Pro。Mac 具有运行 Windows 的解决方案，以防您还需要在 Microsoft 技术堆栈上进行开发。您可以通过内置解决方案 Bootcamp 安装 Windows。或者使用 Parallels 等虚拟化软件在虚拟实例中运行 Windows。

希望这可以帮助，

安东尼

# c++ - C++ 库 API 设计问题

> ID：15634768
> 
> 赞同：4
> 
> 时间：2013-03-26T10:29:39.803
> 
> 标签：c++, api, shared-libraries, static-libraries

我正在创建一个供第三方使用的 C++ 库。虽然我熟悉创建 C 库，但我几乎没有创建 C++ 库的经验。我担心的是，我需要考虑 C++ 库 API 带来的其他问题。如 ：

1.  跨 API 的异常处理。
2.  类成员对库创建的对象的用户访问
3.  用户销毁库创建的对象，反之亦然。
4.  谁知道还有什么...

除了 C 库必须考虑的之外，我还必须考虑什么？

此致

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T15:01:40.663

C++ 是一种比 C 更复杂的语言，因此您需要注意更多的问题。总是存在语言中立的问题，例如如何设计良好的公共/私有分离、文档、版本控制、保持向后兼容性等。但也存在各种 C++ 特定的问题，例如 const 正确性、模板的使用、异常与返回码，不暴露数据成员，您对继承的使用，考虑复制构造函数和赋值运算符，指针或引用的使用，默认参数，朋友，内联的使用等。

完全公开，我是“C++ API 设计”一书的作者。不想听起来像我在推这本书，它确实涵盖了您所询问的主题：如何为 C++ 设计好的 API。您可以查看本书的目录，以便对您应该考虑的问题有一个很好的概述。此外，示例章节还讨论了 pimpl 惯用语，我个人喜欢将其作为在 C++ 中提供更好封装的一种方式。

[http://www.apibook.com/blog/contents](http://www.apibook.com/blog/contents)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:02:52.750

Microsoft 确实为类库提供了设计指南，不确定是否也适用于 Linux，但这些是一般指南，应该适用于各种平台。

[http://msdn.microsoft.com/en-us/library/czefa0ke(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/czefa0ke(v=vs.71).aspx)

# asp.net - 如何使用 C# 在 asp.net 中发送带有该页面快照的邮件

> ID：15634771
> 
> 赞同：-2
> 
> 时间：2013-03-26T10:29:48.883
> 
> 标签：asp.net, sql, email, c#-4.0

我正在从事自动生成工资单项目。在计算工资后，我必须在单击按钮时将工资单的该页面的快照或打印发送到员工 mail_id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:00:40.827

对于发送邮件，您将使用 MailMessage 类。您可以使用 MailMessage 类的 .Attachements 属性发送快照，也可以在 .Body 属性中发送快照。欲了解更多详情，请访问； [http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.aspx](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.aspx)

# android - 从 android 配对到串行到蓝牙加密狗（空白密码）

> ID：15634777
> 
> 赞同：1
> 
> 时间：2013-03-26T10:30:07.467
> 
> 标签：android

我正在尝试将没有 UI 和串行到蓝牙加密狗的设备与我的 android 手机配对。该设备不需要密码……但我手机上的对话框打开并要求输入密码才能连接。我试过 0000、1234、1111 也添加一个字符，然后删除它并单击确定...配对失败。

我也尝试过使用 setPin 方法的代码，但同样的情况发生了。如果没有引脚，我需要将设备引脚传递给 setPin 函数吗？

我偶然发现了这篇文章，它似乎可以工作：

[无需密钥的蓝牙配对](https://stackoverflow.com/questions/11292835/bluetooth-pairing-without-passkey/11626336#11626336)

我在这个例子中的问题是，蓝牙安全中的 strDevicePassKey 变量值是什么。PairRequest(BTAddress, strDevicePassKey); 如果设备不需要密钥或空白密钥？

请任何帮助将不胜感激。

# magento-1.7 - Magento - 前端输入中的颜色选择器

> ID：15634778
> 
> 赞同：0
> 
> 时间：2013-03-26T10:30:10.750
> 
> 标签：magento-1.7, frontend, color-picker

任何人都可以帮助我如何为前端的输入字段添加颜色选择器。在 Javascript 文件夹中，颜色选择器脚本在那里，我们如何使用它。否则帮我在magento中添加一个新的颜色选择器Javascript。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:39:59.610

有很多，[jPicker](http://www.digitalmagicpro.com/jPicker/)就是其中之一。[此博客文章中](http://www.jquery4u.com/plugins/10-color-pickers-plugin/)有更多选项。它们都应该与magento兼容。

# c# - 如何通知组件或子游戏对象已添加到游戏对象

> ID：15634781
> 
> 赞同：6
> 
> 时间：2013-03-26T10:30:25.937
> 
> 标签：c#, notifications, unity3d

`Component`当将 a添加到`GameObject`（甚至是子游戏对象）时，是否可以通知我（可能通过引发的某些方法/事件）？

我希望在编辑器中发生某些事件时收到通知（可能在某些编辑器脚本中），例如：

*   A`Component`已**附加**到`GameObject`实例
*   A`Component`已**附加**到`Prefab`
*   A`GameObject`变成了另一个人的**孩子**`GameObject`

这可能吗？如果是的话怎么办？

* * *

编辑

我找到了一个关心育儿问题的代表：[EditorApplication.hierarchyWindowChanged](http://docs.unity3d.com/Documentation/ScriptReference/EditorWindow.OnHierarchyChange.html?from=EditorApplication)

根据文档，它被称为：

> 每当场景层次结构发生变化时调用。
> 
> 这是transform.parent改变，gameObject.name，创建一个新的游戏对象等等。

我仍然不明白是否有一种方便的方法来理解层次结构中的哪个对象已被更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-22T18:16:03.230

您可以将组件添加到（仅限编辑器）关卡编辑场景中的对象：

```
#if UNITY_EDITOR
using UnityEditor;
using UnityEngine;

public class LevelEditorHelper : MonoBehaviour
{
    LevelEditorHelper()
    {
        EditorApplication.hierarchyWindowChanged -= MyHierarchyChangedCallback;
        EditorApplication.hierarchyWindowChanged += MyHierarchyChangedCallback;
    }

    private static void MyHierarchyChangedCallback()
    {
        Debug.Log("Hierarchy has changed");
    }
}
#endif 
```

然后在回调中，您可以访问当前选定的对象（添加的对象将是活动选择）：

```
GameObject activeObj = Selection.activeGameObject;
if(activeObj != null) {
    ... 
```

现在您可以检查它的父对象以查看它是否与其他任何对象匹配，并执行其他检查以确保这实际上是您感兴趣的事件（请记住，它也会因各种其他层次结构更改而被调用），然后您可以调用另一个功能来执行您想要的任何操作。

**注意：**这不适用于游戏内场景，如果您直接使用关卡编辑器脚本编辑游戏内场景，那么您需要更仔细地放置`#if UNITY_EDITOR`并考虑如何删除不必要的组件（`Start`如果可能的话，可能在构建时或构建时），或者如果您对此感到满意，就让它什么都不做。在我的例子中，我的关卡编辑器是一个仅限编辑器的场景，它会将编辑器场景的特定子集保存为游戏中使用的场景。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T20:46:04.223

没有“内置”的方式可以方便地做到这一点。但是，您可以通过几种方式对其进行模拟。

*   利用`Awake()`组件中的函数来调用它的父级`gameObject`（`SendMessage`为此非常干净）[注意：这仅在您添加新组件实例时才有效]

或者

*   创建一个变量来跟踪它的父级。在该`Update()`方法中，检查当前父级以触发向新父级发送消息。

    这里只是 2 个适用于情况的示例*——*还有更多。归根结底，什么都没有（到目前为止），但从变通的角度来看肯定是可行的。

# java - 如何使用音频播放器搜索栏控制 ImageView？

> ID：15634784
> 
> 赞同：1
> 
> 时间：2013-03-26T10:30:30.950
> 
> 标签：java, android, audio, slideshow, seekbar

我正在使用这个播放器作为项目的基础： [http ://www.androidhive.info/2012/03/android-building-audio-player-tutorial/](http://www.androidhive.info/2012/03/android-building-audio-player-tutorial/)

除此之外，当我想在播放音频文件时显示不同的图像（一种幻灯片）时。每个图像都有一个开始时间和持续时间值。

我已存档播放此图像幻灯片，但问题是我无法停止或暂停它。

我的目标是一个 ImageView，我可以在其中控制搜索栏上显示的图像以及播放和暂停功能，以便在滚动搜索栏时每个图像都会在正确的时间显示。（就像音频文件得到控制一样）

知道我有点卡住了，需要一些方法来继续我的工作。有人知道如何解决这个问题吗？

# php - phpactiverecord - 显示生成的查询？

> ID：15634786
> 
> 赞同：6
> 
> 时间：2013-03-26T10:30:36.780
> 
> 标签：php, phpactiverecord

使用[http://www.phpactiverecord.org/](http://www.phpactiverecord.org/)中的 phpactiverecord ，除了查看数据库服务器的查询日志之外，还有什么方法可以查看生成的 SQL 查询以进行调试？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-08-28T06:15:20.260

在您的模型中：

```
echo self::connection()->last_query; 
```

在您的模型之外：

```
YourModelName::connection()->last_query; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T08:26:45.167

在扩展 ActiveRecord\Model 的类中，最后一个查询在 ClassName::connection()->last_query 中。例如

```
class Todo extends ActiveRecord\Model {
    public static function test() {
        Todo::all();
        var_dump(Todo::connection()->last_query);       
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-30T15:45:12.800

*获取不带参数*的 SQL 语句的几种不同方法：

1.  `static::table()->conn->last_query`#返回对连接的最后一个查询
2.  `static::connection()->last_query`#和第一个一样
3.  `static::table()->last_sql`#this 将只返回发送到查找器函数的最后一个查询，并且不包括关联查询

要获得带有参数集的完整语句，您需要扮演自己的函数（[参见 php.net 注释](http://php.net/manual/en/pdostatement.execute.php#98804)）并将其插入到 php-activerecord/lib/Connection.php::query 函数中。可能不是生产的好主意。

# javascript - Javascript：在函数定义中使用全局变量

> ID：15634794
> 
> 赞同：0
> 
> 时间：2013-03-26T10:30:50.560
> 
> 标签：javascript

我正在尝试执行以下代码：

```
for (var i = 0; i <= 9; ++i) {
    State.prototype["button" + i.toString()] = function () {
        console.log("I am a digit button" + i.toString());
        this.setValue(i.toString());
    };
} 
```

但这是错误的，因为 i 变量对于所有创建的函数都是通用的。例如，我希望函数 State.prototype.button0() 用作：

```
console.log("I am a digit button" + "0");
this.setValue("0"); 
```

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:33:22.437

将它传递给一个函数，这样 的值`i`不会改变：

```
for (var i = 0; i <= 9; ++i) {
    (function(i){
        State.prototype["button" + i.toString()] = function () {
            console.log("I am a digit button" + i.toString());
            this.setValue(i.toString());
        };
    })(i);
} 
```

# c++ - LRU 缓存和多线程

> ID：15634795
> 
> 赞同：1
> 
> 时间：2013-03-26T10:30:54.093
> 
> 标签：c++, multithreading, caching, pthreads, lru

前段时间我已经发了一个帖子，询问关于 LRU 缓存（在 C++ 中）的良好设计。您可以在那里找到问题、答案和一些代码：

[更好地理解 LRU 算法](https://stackoverflow.com/questions/15463128/better-understanding-the-lru-algorithm/15621925#15621925)

我现在尝试对这段代码进行多线程处理（使用 pthread）并得到了一些非常出乎意料的结果。在尝试使用锁定之前，我已经创建了一个系统，其中每个线程都访问自己的缓存（参见代码）。我在 4 核处理器上运行此代码。我尝试用 1 个线程和 4 个线程运行它。当它在 1 个线程上运行时，我在缓存中执行 100 万次查找，在 4 个线程上，每个线程执行 250K 查找。我期望用 4 个线程来减少时间，但结果恰恰相反。1个线程运行2.2秒，4个线程运行超过6秒？？我只是无法理解这个结果。

我的代码有问题吗？这可以以某种方式解释（线程管理需要时间）。如果能得到专家的反馈，那就太好了。非常感谢 -

我编译这段代码： c++ -o cache cache.cpp -std=c++0x -O3 -lpthread

```
#include <stdio.h>
#include <pthread.h>
#include <unistd.h>
#include <sys/syscall.h>
#include <errno.h>
#include <sys/time.h>

#include <list>

#include <cstdlib>
#include <cstdio>
#include <memory>
#include <list>
#include <unordered_map> 

#include <stdint.h>
#include <iostream>

typedef uint32_t data_key_t;

using namespace std;
//using namespace std::tr1;

class TileData
{
public:
    data_key_t theKey;
    float *data;
    static const uint32_t tileSize = 32;
    static const uint32_t tileDataBlockSize;
    TileData(const data_key_t &key) : theKey(key), data(NULL)
    {
        float *data = new float [tileSize * tileSize * tileSize];
    }
    ~TileData()
    { 
        /* std::cerr << "delete " << theKey << std::endl; */
        if (data) delete [] data;   
    }
};

typedef shared_ptr<TileData> TileDataPtr;   // automatic memory management!

TileDataPtr loadDataFromDisk(const data_key_t &theKey)
{
    return shared_ptr<TileData>(new TileData(theKey));
}

class CacheLRU
{
public:
    list<TileDataPtr> linkedList;
    unordered_map<data_key_t, TileDataPtr> hashMap; 
    CacheLRU() : cacheHit(0), cacheMiss(0) {}
    TileDataPtr getData(data_key_t theKey)
    {
        unordered_map<data_key_t, TileDataPtr>::const_iterator iter = hashMap.find(theKey);
        if (iter != hashMap.end()) {
            TileDataPtr ret = iter->second;
            linkedList.remove(ret);
            linkedList.push_front(ret);
            ++cacheHit;
            return ret;
        }
        else {
            ++cacheMiss;
            TileDataPtr ret = loadDataFromDisk(theKey);
            linkedList.push_front(ret);
            hashMap.insert(make_pair<data_key_t, TileDataPtr>(theKey, ret));
            if (linkedList.size() > MAX_LRU_CACHE_SIZE) {
                const TileDataPtr dropMe = linkedList.back();
                hashMap.erase(dropMe->theKey);
                linkedList.remove(dropMe);
            }
            return ret;
        }

    }
    static const uint32_t MAX_LRU_CACHE_SIZE = 100;
    uint32_t cacheMiss, cacheHit;
};

int numThreads = 1;

void *testCache(void *data)
{
    struct timeval tv1, tv2;
    // Measuring time before starting the threads...
    double t = clock();
    printf("Starting thread, lookups %d\n", (int)(1000000.f / numThreads));
    CacheLRU *cache = new CacheLRU;
    for (uint32_t i = 0; i < (int)(1000000.f / numThreads); ++i) {
        int key = random() % 300;
        TileDataPtr tileDataPtr = cache->getData(key);
    }
    std::cerr << "Time (sec): " << (clock() - t) / CLOCKS_PER_SEC << std::endl;
    delete cache;
}

int main()
{
    int i;
    pthread_t thr[numThreads];
    struct timeval tv1, tv2;
    // Measuring time before starting the threads...
    gettimeofday(&tv1, NULL);
#if 0
    CacheLRU *c1 = new CacheLRU;
    (*testCache)(c1);
#else
    for (int i = 0; i < numThreads; ++i) {
        pthread_create(&thr[i], NULL, testCache, (void*)NULL);
        //pthread_detach(thr[i]);
    }

    for (int i = 0; i < numThreads; ++i) {
        pthread_join(thr[i], NULL);
        //pthread_detach(thr[i]);
    }
#endif  

    // Measuring time after threads finished...
    gettimeofday(&tv2, NULL);

    if (tv1.tv_usec > tv2.tv_usec)
    {
        tv2.tv_sec--;
        tv2.tv_usec += 1000000;
    }

    printf("Result - %ld.%ld\n", tv2.tv_sec - tv1.tv_sec,
           tv2.tv_usec - tv1.tv_usec);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:09:24.490

一千个道歉，通过继续调试代码，我意识到我犯了一个非常糟糕的初学者错误，如果你看那个代码：

```
TileData(const data_key_t &key) : theKey(key), data(NULL)
{
    float *data = new float [tileSize * tileSize * tileSize];
} 
```

来自 TikeData 类，其中数据实际上应该是该类的成员变量......所以正确的代码应该是：

```
class TileData
{
public:
    float *data;
    TileData(const data_key_t &key) : theKey(key), data(NULL)
    {
        data = new float [tileSize * tileSize * tileSize];
        numAlloc++;
    }
}; 
```

我对此感到非常抱歉！这是我过去犯的一个错误，我认为原型设计很棒，但有时会导致犯下如此愚蠢的错误。我用 1 个和 4 个线程运行了代码，现在确实看到了加速。1个线程大约需要2.3秒，4个线程需要0.92秒。谢谢大家的帮助，如果我让你浪费了时间，我很抱歉；-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T11:38:06.187

我还没有具体的答案。我能想到几种可能性。一个是`testCache()`using `random()`，几乎可以肯定它是使用单个全局互斥锁实现的。（因此你所有的线程都在竞争互斥锁，它现在在缓存之间乒乓球。）（（假设它`random()`在你的系统上实际上是线程安全的。））

接下来，`testCach()`是访问一个`CacheLRU`用`unordered_maps`and实现的`shared_ptrs`。,`unordered_maps`特别是可能使用某种全局互斥体来实现，这会导致所有线程竞争访问。

要真正诊断这里发生了什么，您应该在`testCache()`. （首先尝试将输入变量的 sqrt() 取 250K 次（相对于 1M 次）。然后尝试线性访问大小为 250K（或 1M）的 C 数组。慢慢建立您当前正在做的复杂事情。）

另一种可能性与`pthread_join`. `pthread_join`在所有线程完成之前不会返回。因此，如果一个比其他花费的时间更长，那么您正在测量最慢的一个。您在这里的计算似乎是平衡的，但也许您的操作系统正在做一些意想不到的事情？（就像将多个线程映射到一个内核（可能是因为您有一个超线程处理器？或者一个线程在运行过程中从一个内核移动到另一个内核（可能是因为操作系统认为它不是智能的）。 )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:22:31.520

这将是一个“建立起来”的答案。我正在使用 4 核 AMD cpu 和 16GB RAM 的 Fedora 16 Linux 系统上运行您的代码。

我可以确认我看到了类似的“线程越多越慢”行为。我删除了随机函数，这根本没有改善。

我将做一些其他的小改动。

# uitextview - 在 UITextView 中绘制格线

> ID：15634802
> 
> 赞同：0
> 
> 时间：2013-03-26T10:31:30.473
> 
> 标签：uitextview, drawrect

在 UITextView 中，我想在文本中绘制格线。为此，我将 UITextView 子类化并覆盖 drawRect。看到一些关于这个主题的帖子（包括在这个网站上），这似乎是正确的开始方式。

这是我画线的循环：

```
for (int x=1;x<numberOfLines;x++) {
    yPos=self.font.lineHeight*x+baselineOffset;
    CGContextMoveToPoint(context,self.bounds.origin.x,yPos);
    CGContextAddLineToPoint(context,self.bounds.size.width,yPos);
} 
```

此代码中的baselineOffset 是恒定的，这意味着我按self.font.lineHeight 步进，但看到下图（行和文本之间的移动缓慢）我显然没有使用正确的值来增加y 坐标（这里称为yPos ）。我应该使用什么？

有没有人知道可能是什么问题？

谢谢你的任何提示。

![在此处输入图像描述](../Images/ff3f5653ba8815ac08a7d64265c1d5ad.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T07:20:34.830

使用`font.leading`而不是`font.lineHeight`.

# flyway - 使用 flyways ant 任务时的调试输出

> ID：15634807
> 
> 赞同：0
> 
> 时间：2013-03-26T10:31:47.377
> 
> 标签：flyway

命令行[文档](http://flywaydb.org/documentation/commandline/)提到了`-x`调试输出的参数。[但是我在 ant 任务文档](http://flywaydb.org/documentation/ant/)中找不到任何内容。有没有办法在那里激活它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:03:55.770

使用标准`ant -d`开关打开调试输出。

# android - 膨胀包含 PDFViewCtrl 的视图

> ID：15634808
> 
> 赞同：1
> 
> 时间：2013-03-26T10:31:47.550
> 
> 标签：android, android-layout, pdf, android-inflate

我试图夸大这个观点

```
<LinearLayout android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="16dp">

    <TextView android:id="@android:id/text1"
        style="?android:textAppearanceLarge"
        android:textStyle="bold"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="16dp" />

    <pdftron.PDF.PDFViewCtrl
        android:id="@+id/pdfviewctrl"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scrollbars = "vertical|horizontal" />

</LinearLayout> 
```

在我的片段 onCreateView 函数中是这样的。

```
 View rootView =   inflater
            .inflate(R.layout.fragment_screen_slide_page, container, false); 
```

但它返回一个错误**“错误膨胀类pdftron.PDF.PDFViewCtrl”**。任何人都可以指出原因（我成功地在活动中设置了这个布局，并且能够访问PDFViewCtrl并向它添加一个pdf文档。）在决定购买许可证之前，我只是想根据我的要求自定义 PDFTron。

完整的堆栈跟踪

```
FATAL EXCEPTION: main
android.view.InflateException: Binary XML file line #37: Error inflating class pdftron.PDF.PDFViewCtrl
at android.view.LayoutInflater.createView(LayoutInflater.java:518)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
at com.example.viewpager.ScreenSlidePageFragment.onCreateView(ScreenSlidePageFragment.java:89)
at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:911)
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:461)
at android.support.v4.app.FragmentStatePagerAdapter.finishUpdate(FragmentStatePagerAdapter.java:163)
at android.support.v4.view.ViewPager.populate(ViewPager.java:1012)
at android.support.v4.view.ViewPager.populate(ViewPager.java:881)
at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1366)
at android.view.View.measure(View.java:8553)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3261)
at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
at android.view.View.measure(View.java:8553)
at android.widget.LinearLayout.measureVertical(LinearLayout.java:531)
at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
at android.view.View.measure(View.java:8553)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3261)
at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
at android.view.View.measure(View.java:8553)
at android.view.ViewRoot.performTraversals(ViewRoot.java:915)
at android.view.ViewRoot.handleMessage(ViewRoot.java:1991)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:150)
at android.app.ActivityThread.main(ActivityThread.java:4385)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.reflect.InvocationTargetException
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
at android.view.LayoutInflater.createView(LayoutInflater.java:505)
... 36 more
Caused by: java.lang.UnsatisfiedLinkError: PDFViewCtrlCreate
at pdftron.PDF.PDFViewCtrl.PDFViewCtrlCreate(Native Method)
at pdftron.PDF.PDFViewCtrl.a(SourceFile:1000)
at pdftron.PDF.PDFViewCtrl.<init>(SourceFile:1057)
... 39 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T23:49:34.123

I was able to reproduce a similar error when I didn't initialize PDFNet before calling the inflater. Try calling PDFNet.initialize() before calling setContentView() or the inflater.

# javascript - 如何上传文件路径为 URL 的文件

> ID：15634809
> 
> 赞同：1
> 
> 时间：2013-03-26T10:31:47.927
> 
> 标签：javascript, asp.net-mvc-2

我编写了文件上传代码，可以很好地上传文件并将其保存在文件夹中。我已经包含一个功能，允许用户加载 PDF 文件的 URL，并且应该上传和保存来自 URL 的文件。编码：

```
function loadURL(box) {
       var box = dhtmlx.modalbox({
           title: "Load URL",
           text: "<div id='form_in_box'><div>Enter the URL of PDF file <hr/><div><div><textarea id='file' style='width: 400px; height: 27px;'></textarea></div><span class='dhtmlx_button'><input type='submit' value='Load URL' style='width: 86px' onclick='save_file(this)'></span><span class='dhtmlx_button'><input type='button' value='Cancel' onclick='close_file(this)' style='width:80px;'></span></label></div></div>",
           width: "300px"
       })
   }

function save_file(box) {
       var file = document.getElementById('file');
       if (file.value == "") {
           alert("Choose a file to upload");
           return false;
       }
       dhtmlx.modalbox.hide(box);

       var fd = new FormData();
       fd.append('file', file.files[0]);
       var xhr = new XMLHttpRequest();
       xhr.open('POST', '/FileUpload/Upload', true);
       xhr.onreadystatechange = function () {
           if (xhr.readyState == 4 && xhr.status == 200) {
               alert('File successfully uploaded to the server');
           }
       };
       xhr.send(fd); 
```

如果我将上面的代码用于 load_URL，则会出现错误：TypeError: file.files is undefined fd.append('file', file.files[0]);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:46:38.230

不要使用 Files API（可用于从文件输入读取本地文件）。只需将 URL 发送到服务器并让您的服务器端代码获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:52:42.787

使用[`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.80%29.aspx)类从远程 url 下载文件。您可以使用该[`DownloadFile`](http://msdn.microsoft.com/en-us/library/ez801hhe.aspx)方法从远程 url 下载文件。

```
public ActionResult DownloadFile(string fileName)
{
    if (!String.IsNullOrEmpty(fileName))
    {
        using (WebClient wc = new WebClient())
        {      
            string targetPath = @"C:\YourFolder\thatUniqueFileName.pdf";         
            wc.DownloadFile(fileName,targetPath);

            return RedirectToAction("Downloaded"); //PRG pattern
        }
    }
    return VieW();
} 
```

如果要将文件保存在项目的**App_Data**文件夹中，可以像这样更改 targetPath 变量值

```
string targetPath = HttpContext.Server.MapPath("~/App_Data/yourPdf.pdf"); 
```

您可以解析 fileUrl 并从中获取文件名并为其添加唯一标识符（以避免覆盖具有相同名称的不同文件）并使用它来保存文件。

# android - 如何在 Android 中实现 CalenderView

> ID：15634812
> 
> 赞同：0
> 
> 时间：2013-03-26T10:31:51.273
> 
> 标签：android, google-calendar-api, android-calendar

我是 android 的新手，所以这听起来有点令人困惑..

我正在制作一个应用程序，它需要在周、日和月视图中显示事件的日历（如谷歌日历）。我已经实现了这是一个测试版本，但我想更改实现以使其更灵活。目前该事件存储在数据库中，并在应用程序的各种活动中进行编辑和使用。我可以让 android 管理它的日历中的事件吗？但我仍然需要能够从应用程序中对其进行操作，并存储除时间、日期和描述之外的额外信息。这些额外信息将用于计算。我们还需要在应用程序中有一个日历。我们可以检索特定于应用程序的事件来执行所有这些操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:45:57.547

本[教程](http://www.grokkingandroid.com/androids-calendarcontract-provider/)可能会有所帮助。

# java - 从 XML 输入生成 Javabean

> ID：15634813
> 
> 赞同：0
> 
> 时间：2013-03-26T10:31:55.233
> 
> 标签：java, xml-parsing

我需要从 xml 输入创建一个 javabean。我提供的 xml 输入中不会有任何异常。我知道像 JAXB 和 Apache XMLbeans 这样的东西可以工作。

但是在这里我需要在不使用其 xsd 的情况下自动生成 JAVAbeanclass。简而言之，当我提供任何 xml 输入时，输出必须是生成的 pojo 类。

有任何输入吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:42:03.670

您可以使用**wsgen 之**类的工具从服务生成类文件。

这是一个例子，

[http://www.mkyong.com/webservices/jax-ws/jax-ws-wsgen-tool-example/](http://www.mkyong.com/webservices/jax-ws/jax-ws-wsgen-tool-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:40:36.553

我认为最好的解决方案是开发自己的 DOM（如果 XML 上有很多项目）或 SAX（如果有很多项目）解析器。DOM 占用更多内存，因此不建议将它用于具有许多节点（和/或许多属性）的 XML。

# complexity-theory - 埃拉托色尼筛法接近复杂性近似

> ID：15634814
> 
> 赞同：0
> 
> 时间：2013-03-26T10:31:55.283
> 
> 标签：complexity-theory, primes, sieve-of-eratosthenes

我试图对埃拉托色尼筛法给出更精确的近似值。

我使用的基本操作和权重：

```
 prime[p]         -> 1 operation
 m = p * p        -> 2 operations
 prime[m] = false -> 1 operation
 m = m + p        -> 2 operations 
```

我的证明：

我的证明正确吗？我在文献中发现复杂度是 O(nlog(log(n))) 或 O(nlog(log(n))/log(n))。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:18:26.517

是的，这是正确的，`O(nloglogn)==O(nloglog(sqrt(n)))`：

![在此处输入图像描述](../Images/d3a0b306308e79b7f889f14955efe611.png)

# xcode - 命令行将所有图像的视网膜显示扩展添加到文件夹中

> ID：15634815
> 
> 赞同：1
> 
> 时间：2013-03-26T10:32:01.377
> 
> 标签：xcode, macos, shell, command-line

将视网膜显示扩展（@2x）添加到特定文件夹中的所有图像的命令行是什么：例如：eximg.png -> eximg@2x.png

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:45:20.967

如果文件名包含空格或特殊字符，这也有效：

```
for f in *.png; do mv "$f" "${f%.png}@2x.png"; done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:47:27.667

如果您的文件名没有特殊字母（例如空格），则此行将`mv cmd`为您打印这些：

```
 ls *.png|xargs -n1|sed -r 's/(.*)(.png)$/mv & \1@2x\2/' 
```

如果所有这些命令都正常，您可以通过管道输出来`|sh`重命名您的文件。

编辑

```
 ls *.png|xargs -n1|sed 's/\(.*\)\(.png\)$/mv & \1@2x\2/' 
```

# vb6 - 查找显示器尺寸和它的公司

> ID：15634817
> 
> 赞同：1
> 
> 时间：2013-03-26T10:32:04.740
> 
> 标签：vb6

如何使用 vb6 代码找到显示器尺寸（不是像素，实际物理尺寸）及其公司（制造商）。我看到了一些使用 WMI（WmiMonitorBasicDisplayParams 和 WmiMonitorID）给出屏幕尺寸的链接，还有一些使用一些注册表给出屏幕尺寸的链接，但对我没有任何作用。谁能告诉我如何使用 vb6 来完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:28:41.640

有一篇关于它的好文章：[这里](http://thetweaker.wordpress.com/2011/11/13/reading-monitor-physical-dimensions-or-getting-the-edid-the-right-way/)

他描述了与您尝试相同的步骤，但失败了，最后想出了其他方法。我不知道它是否适合你，但它似乎是我能找到的最有希望的。

# android - 如何播放 10 分钟的警报通知

> ID：15634823
> 
> 赞同：-4
> 
> 时间：2013-03-26T10:32:18.297
> 
> 标签：android, time, fixed, alarms

如何在 Android 中播放特定时间段的警报通知（例如连续 10 分钟）？

```
public class AlarmReciver extends BroadcastReceiver{

 private static int NOTIFICATION_ID = 1;
 Bundle bundle;
 int notificationId = 0;
 AudioManager audioManager;
 @Override
 public void onReceive(Context context, Intent intent) {
// TODO Auto-generated method stub
  try{
     audioManager = (AudioManager) context.getSystemService (Context.AUDIO_SERVICE);
     audioManager.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
     int maxVolume = audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
     audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, maxVolume, 0);
      //audioManager.setStreamVolume(AudioManager.STREAM_MUSIC,audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC), 0);
     notificationId = intent.getExtras().getInt("notificationId");
     NotificationManager manger = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
Notification notification = new Notification(R.drawable.ic_launcher, "YourBestSelfApp", System.currentTimeMillis());
notification.flags |= Notification.FLAG_AUTO_CANCEL;
notification.defaults =  Notification.DEFAULT_VIBRATE|Notification.DEFAULT_LIGHTS;
notification.sound = Uri.parse("android.resource://"+context.getPackageName()+"/"+R.raw.iphone_5_original);
Intent intent1 = new Intent(context,WelcomeActivity.class);
intent1.putExtra("activityFrom", "notificationAlarm");
PendingIntent activity = PendingIntent.getActivity(context,NOTIFICATION_ID + 1, intent1,  PendingIntent.FLAG_UPDATE_CURRENT);
 notification.setLatestEventInfo(context, "hello","", activity);
notification.number = 1;
manger.notify(notificationId, notification);
    }catch (Exception e) {
    // TODO: handle exception
     e.printStackTrace();
           }
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:40:11.583

// 联系 SyncBroadcast.class ，它可以是一个活动或广播接收器或服务

```
 Intent intent = new Intent(this,ContactsSyncBroadcast.class);
PendingIntent pendingIntent = PendingIntent.getBroadcast(getApplicationContext(),
                0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
AlarmManager alarmManager =  (AlarmManager)getSystemService(ALARM_SERVICE);
alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,10*60*1000,10*60*1000, pendingIntent); 
```

警报将每 10 分钟触发一次。

# ruby - Ruby执行shell命令并获取数组

> ID：15634824
> 
> 赞同：4
> 
> 时间：2013-03-26T10:32:19.427
> 
> 标签：ruby, bash, shell

我从外壳中得到一串几行。是否有可能得到一个`Array`每行都是它的元素？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T10:35:17.690

当然，根据输出，您可以将其拆分。例如：

```
lines = `ls`.split 
```

此解决方案独立于您用于执行程序的方法。只要你得到完整的字符串就可以`split`了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-16T18:38:51.930

最初的问题是按行拆分`split`，默认情况下，该函数在空白处拆分。虽然这可能就足够了，但您可能希望传入正则表达式，如下所示：

```
`ls -l`.split(/$/) 
```

它返回数组中单独元素中的每一行。但是，它并没有摆脱最初的回车或换行。为此，您将需要使用该`map`函数来迭代数组并应用于`strip`每个数组，如下所示：

```
`ls -l`.split(/$/).map(&:strip) 
```

# iphone - 我们可以以编程方式将 iPhone 照片库滚动到底部吗

> ID：15634825
> 
> 赞同：2
> 
> 时间：2013-03-26T10:32:22.430
> 
> 标签：iphone, ios, scroll, uiimagepickercontroller, photo-gallery

在我的应用程序中，我需要从照片库中选择图像，其中有数百张照片。问题是相机拍摄的最新照片，保存在照片库的底部，因此，我必须向下滚动以选择我拍摄的最新照片。有什么方法可以将 ImagePickerViewController 的视图滚动到底部，或者我可以将最新的图片存储在顶部吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T10:47:00.243

```
[self presentViewController:imagePickerController animated:YES completion:^()
        {
               UIView *imagePickerView = imagePickerController.view;
               UIView *view = [imagePickerView hitTest:CGPointMake(5,5) withEvent:nil];
               while (![view isKindOfClass:[UIScrollView class]] && view != nil)
               {
                    view = [view superview];
               }
               if ([view isKindOfClass:[UIScrollView class]])
               {
                   UIScrollView *scrollView = (UIScrollView *) view;
                   CGPoint contentOffset = scrollView.contentOffset;
                   CGFloat y = MAX(contentOffset.y, [scrollView contentSize].height-scrollView.frame.size.height);
                   CGPoint bottomOffset = CGPointMake(0, y);
                   [scrollView setContentOffset:bottomOffset animated:YES];
               }
       }]; 
```

# jquery - 尝试在列表中排序和放置项目时，jQueryUI 可排序闪烁和跳跃

> ID：15634826
> 
> 赞同：7
> 
> 时间：2013-03-26T10:32:24.797
> 
> 标签：jquery, html, css, jquery-ui

我正在使用 jQueryUI 可排序，当我有很长的项目列表时，我尝试更改顺序并将它们拖动到项目周围闪烁并在屏幕上跳跃，这使得几乎不可能订购任何项目。

看起来当您拖动项目时，“此处放置”占位符距离您实际想要放置项目的位置数英里？

尝试移动/订购商品时，如何消除屏幕闪烁和跳跃？

我在这里有一个完整的演示 [http://jsfiddle.net/w3vvL/63/](http://jsfiddle.net/w3vvL/63/)

我现在在这里没有想法了。所以任何帮助都会很棒！

下面的代码只是一个片段，其余的在上面的小提琴中。谢谢

```
 //Connect the two lists enable dragging between each one
    $("#gallery").sortable({
        revert: true,
        connectWith: "#trash",
        refreshPositions: true,

        // Newly added to change container background
        start: function(event, ui) {
            $("li.ui-state-highlight").text("place here"); 
            $(".containerTwo").stop().animate({"background-color":"#ffb9b9", "border-color":"#f06666", "border-top-style":"dashed", "border-right-style":"dashed", "border-bottom-style":"dashed", "border-left-style":"dashed",  "border-width":"1px"}, 500);
        }, 
        stop: function(event, ui) {
             $(".containerTwo").stop().animate({"background-color":"#fff", "border-color":"#aaa", "border-top-style":"solid", "border-right-style":"solid", "border-bottom-style":"solid", "border-left-style":"solid",  "border-width":"1px"}, 50);
        }
    });

    $("#trash").sortable({
        revert: true,
        connectWith: "#gallery",
        refreshPositions: true,

        // Newly added to change container background
        start: function(event, ui) {
            $("li.ui-state-highlight").text("place here"); 
            $(".container").stop().animate({"background-color":"#d4f7cd", "border-color":"#51965a", "border-top-style":"dashed", "border-right-style":"dashed", "border-bottom-style":"dashed", "border-left-style":"dashed",  "border-width":"1px"}, 500);
        }, 
        stop: function(event, ui) {
              $(".container").stop().animate({"background-color":"#fff", "border-color":"#aaa", "border-top-style":"solid", "border-right-style":"solid", "border-bottom-style":"solid", "border-left-style":"solid",  "border-width":"1px"}, 50);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-08-12T16:09:44.917

通过向左添加浮动，它将停止轻弹。

```
.dvdlist li {
display:inline-block;
border:1px solid #000;
cursor:move;
color: #222;
margin: 3px 3px 3px 0;
padding: 5px;
width: auto;
height: auto;
font-size: 12px;
text-align: center;
border: 1px solid #aaa;
border-radius: 5px;
background-color: #FDFCE8; 
float:left;
} 
```

# php - PHP pdf为日文字符生成问题

> ID：15634828
> 
> 赞同：1
> 
> 时间：2013-03-26T10:32:27.167
> 
> 标签：php, pdf, tcpdf

您好我正在使用PHP 的**tcpdf**库来创建 PDF。在此我使用 cid0jp 字体来支持日文字符。但在选择下载后。

前任：

```
$pdf = new PDF('P', 'mm', 'A4', true, 'UTF-8', false);
$pdf->setPrintHeader(false);
$pdf->setPrintFooter(false);
$pdf->SetMargins(15, 27, 15);
$pdf->SetAutoPageBreak(TRUE, 25);
$pdf->SetFont('cid0jp', '', 14);
$pdf->SetMargins(30, 20);
$pdf->AddPage();
$pdf->Write($h=0, '木曜日', $link='', $fill=0, $align='C', $ln=true, $stretch=0, $firstline=false, $firstblock=false, $maxh=0);
$pdf->Output('example_002.pdf', 'D'); 
```

但是下载后生成的PDF没有任何内容。谁能知道是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:54:31.333

问题是因为 PDF 查看器没有所需的字体...下载了所需的字体...这解决了问题。上面提供的示例代码是正确的...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2022-02-22T04:56:43.067

“cid0jp”这个字体支持日文文本。

```
 $xmlWriter->SetFont('cid0jp', '', 14); 
```

# ios - 如何在 iOS 6.0 中使用隐藏的导航控制器更改状态栏色调颜色？

> ID：15634831
> 
> 赞同：2
> 
> 时间：2013-03-26T10:32:30.430
> 
> 标签：ios, objective-c, uinavigationcontroller, uistatusbar

我有 uinavigationcontroller 和 uiviewcontroller。现在我的`navigationbarhidden = yes`. 但是当我隐藏导航栏时，状态栏的颜色就改变了。我想将状态栏的颜色更改为隐藏导航栏的颜色。我这样做了：

![在此处输入图像描述](../Images/bb1168443603e817adb13362de2c6154.png)

如图所示，我没有在任何地方使用导航控制器。这只是 iOS6 中的 hack 方式，但它只改变了不在导航控制器中的视图的颜色。不过对我来说，解决方案只在 iOS6 中很重要

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:45:58.213

**更改状态栏颜色**

![在此处输入图像描述](../Images/15ce8f2144738ee9365018a82b5d5038.png)

**对于隐藏导航栏**

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    [self.navigationController setNavigationBarHidden:YES animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:47:43.417

[正如这篇文章](https://stackoverflow.com/questions/12467794/how-to-set-status-bar-tint-color-on-ios-6)中已经回答的那样：

在您的“项目摘要”中，在“状态栏”中，将“样式”和“色调”设置为“默认”。然后，跳到您的 xib 或故事板中，并在状态栏下方添加一个 UINavigationBar。将 UINavigationBar“样式”设置为“默认”并选择您选择的“着色”。运行！:-)

如果您不希望任何 UINavigationBar 在您的界面中可见，您要做的就是将 UINavigationBar 放在所有对象的后面，或者将“Alpha”设置为零。

# php - 如何根据 url 结构在 PHP 中进行不同的操作

> ID：15634832
> 
> 赞同：0
> 
> 时间：2013-03-26T10:32:30.697
> 
> 标签：php

我有一个 index.php 文件，我想根据 url 结构提供不同的内容。

例如。如果 url 是 mysite.com/index.php/folder1 我运行某个查询并显示结果，如果 url 是 mysite.com/index.php/folder2，则运行不同的查询。

该解决方案还必须适用于 mysite.com/folder1 等（即省略 index.php）。

如果可以将相同的方法扩展到 mysite/com/folder1/category1 等，那将是理想的。注意，这里不需要 GET 变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:43:42.067

您需要的是一个路由组件，它将 url 链接到代码中的类/函数。该组件根据您的要求执行某些类/功能。 [在这个问题](https://stackoverflow.com/questions/115629/simplest-php-routing-framework)中，讨论了不同的策略，尽管缺少一些有趣的现有框架：

*   [Symfony 路由组件](http://symfony.com/doc/2.0/components/routing/introduction.html)
*   [SlimPHP](http://www.slimframework.com/)

您可以使用其中任何一个来完成我之前提到的操作。例如，使用 Symfony 路由组件，您可以将您的路由（潜在的 url）放在一个配置文件中，例如：

```
# routes.yml
route1:
    path:     /foo
    defaults: { _controller: 'MyController::fooAction' }

route2:
    path:     /foo/bar
    defaults: { _controller: 'MyController::foobarAction' } 
```

因此，当请求的 uri 与“/foo”匹配时，*MyController*类中的*fooAction*方法将被执行。如果您不确定如何在现有代码库中实现这一点，我强烈建议您阅读Fabien Potencier 撰写的[关于如何在代码中使用不同 Symfony 组件的系列文章。](http://fabien.potencier.org/article/50/create-your-own-framework-on-top-of-the-symfony2-components-part-1)有一个关于路由部分[的特定帖子。](http://fabien.potencier.org/article/53/create-your-own-framework-on-top-of-the-symfony2-components-part-4)

 *至于需要从你的url中删除“index.php/”，你需要重写它。如果您使用的是 Apache，则需要在虚拟主机配置文件中添加重写规则，或者只需在文档根目录中创建一个 .htaccess 文件。StackOverflow 中有数百个关于这个的问题（比如[这个](https://stackoverflow.com/a/9619319/563072)），[官方文档页面](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)中有大量文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:47:30.683

在您的 .htaccess 文件中添加以下 RewriteRule 并将 .htaccess 文件放入您的 webroot

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

如果系统上不存在文件/目录，上述规则会将所有请求重定向到 index.php。

例如，如果没有上述规则，如果[http://example.com/test](http://example.com/test)返回 404 错误，那么使用上述重定向规则，这将解析为 index.php。现在，在 index.php 中，您可以解析 URL 并根据您的要求进行处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T10:45:33.913

最好的方法可能是在浏览器中分配变量。例如

```
index.php?folder=1      AND index.php?folder=2 
```

然后在 php 中使用：

```
$folder = $GET_['folder']
if($folder == 1)
{
    //show site 1
}
else if ($folder == 2)
{
    //show site 2
}
else
{
    //error code
} 
```

还有其他方法，包括 .htaccess 但对于不想参与其中的人，我发现这是最好的方法*

# sql-server - SQL Server 日期时间到 bigint（纪元）溢出

> ID：15634833
> 
> 赞同：9
> 
> 时间：2013-03-26T10:32:37.197
> 
> 标签：sql-server, datetime

我有一个值为 2013-03-22 15:19:02.000 的“日期时间”列

我需要将此值转换为纪元时间并将其存储在“bigint”字段中

上述时间的实际纪元值是`1363945741898`，，当我使用

```
 select DATEDIFF(s, '1970-01-01 00:00:00', '2013-03-22 15:19:02.000') 
```

我得到`1363965542`，，当我使用

```
select DATEDIFF(ms, '1970-01-01 00:00:00', '2013-03-22 15:19:02.000') 
```

我明白了，

> 消息 535，级别 16，状态 0，第 1 行 datediff 函数导致溢出。分隔两个日期/时间实例的日期部分的数量太大。尝试将 datediff 与不太精确的日期部分一起使用。

如何从**“日期时间”**字段中获取**准确的纪元值**

 **我使用 SQL Server 2008。这也适用于 2005。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-26T11:13:03.517

这是一个未经测试的示例，由徒手编写:)

```
declare @v_Date datetime
set @v_Date = '2013-03-22 15:19:02.000'

declare @v_DiffInSeconds integer
declare @v_DiffInMSeconds bigint

select @v_DiffInSeconds = DATEDIFF(s, '1970-01-01 00:00:00', @v_Date)
select @v_DiffInMSeconds = cast(@v_DiffInSeconds as bigint) * 1000 + cast(DATEPART(ms, @v_Date) as bigint) 
```

**编辑** 我在下面做了这个例子来说明时区转换。给定的时间戳（以秒为单位，我删除了最后三位数字“898”）在这里通过添加 5.5 小时（19800 秒）转换为本地 IST 时区，然后我将其从本地时间转换回时间戳再次格林威治标准时间。以下计算与问题中的值匹配（以秒为单位）。

```
declare @v_time datetime
set @v_time = '1970-01-01 00:00:00'

declare @v_date datetime
set @v_date = '2013-03-22 15:19:01'

-- This returns "March, 22 2013 15:19:01"
select dateadd(s, (1363945741 + 19800), @v_time)

-- This returns "1363945741"
select datediff(s, @v_time, @v_date) - 19800 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-12T19:56:34.180

当试图获得精确的毫秒数时，我们会得到溢出异常。我们可以得到直到秒的值并乘以 1000。

这相当于`new Date().getTime()`在 javascript 中：

使用以下语句以秒为单位获取时间。

```
SELECT cast(DATEDIFF(s, '1970-01-01 00:00:00.000', '2016-12-09 16:22:17.897' ) as bigint) 
```

使用以下语句以毫秒为单位获取时间。

```
SELECT cast(DATEDIFF(s, '1970-01-01 00:00:00.000', '2016-12-09 16:22:17.897' ) as bigint) * 1000 
```

使用以下语句将纪元转换为人类可读的日期时间：

```
select DATEADD(s, 1481300537, '1970-01-01 00:00:00') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-05T10:59:21.680

纪元到日期时间

```
create function [dbo].[EpochToDate](@Date bigint)
returns datetime
begin
    return (select dateadd(s, @Date, '19700101'))
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-13T10:52:10.647

使用下面的代码从纪元时间获取人类可读的日期

```
select DATEADD(s,convert(bigint,@date)/2, DATEADD(s, convert(bigint,@date)/2, '1970-01-01 00:00:00')) 
```**

# javascript - Access-Control-Allow-Origin 错误不允许使用 Ajax 将表单发布到其他服务器获取

> ID：15634835
> 
> 赞同：1
> 
> 时间：2013-03-26T10:32:46.587
> 
> 标签：javascript, ajax, codeigniter

```
 $this->output->set_header("Access-Control-Allow-Origin: *"); 
```

此行似乎适用于通过 ajax 从另一台服务器访问页面，但是当我尝试将数据发布到另一台服务器时，即使上面的行在我的脚本中，我仍然会收到错误消息。

这是我用来发布数据的 Ajax。

```
 $.ajax({
            url: "' . base_url('pagehere') . '",
            type: "POST",
            data: "type=pform&ip="+ip+"&host_server="+host_server+"&mediabar="+mediabar+fields,
            success: function(msg) {
                $("#panelform").hide();
                $(".pthankyou").show();
            }
            }); 
```

这是我要发布到的页面上的内容：

```
 $this->output->set_header("Access-Control-Allow-Origin: *");
        $this->output->set_header("Access-Control-Allow-Methods: POST"); 
```

我不确定我还需要什么才能完成这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:34:44.190

您必须使用凭据设置您的 ajax：

```
$.ajax({...
xhrFields:{
        withCredentials: true
      },
}); 
```

# python - 无法在 Google App Engine 上使用 jinja2 PackageLoader

> ID：15634836
> 
> 赞同：4
> 
> 时间：2013-03-26T10:32:47.290
> 
> 标签：python, google-app-engine, jinja2

我正在尝试使用 jinja2 提供的 PackageLoader，但我无法让它工作。

在我`app.yaml`的声明中，我声明了所需的库：

```
libraries:
- name: jinja2
  version: latest
- name: setuptools
  version: latest 
```

我可以创建的最小示例：

```
import webapp2, sys
from jinja2 import Environment, PackageLoader
sys.path += ['lib/somepackage']

class Test(webapp2.RequestHandler):
    def get(self):
        env = Environment(loader=PackageLoader('common'))
        self.response.write(env.get_template('test.html').render())

routes = [(r"/", Test)]
app = webapp2.WSGIApplication(routes, debug=True) 
```

该包`common`存在于目录中`lib/somepackage`，并且有一个`templates`包含文件的包`test.html`。html 文件仅包含文本“测试”。

当`PackageLoader`构建它时，它`provider`总是`NullProvider`在 Google App Engine 中。当我手动请求提供者时，我`DefaultProvider`很明显这里出了点问题。

要请求提供者，我确保`lib/somepackage`通过`sys.path`转到该目录，然后：

```
>>> import pkg_resources
>>> provider = pkg_resources.get_provider('common')
>>> provider
<pkg_resources.DefaultProvider instance at 0x8490b2c> 
```

当这在 Google App Engine 中失败时，这是回溯的相关部分：

```
 File "/<>/test/main.py", line 7, in get
    self.response.write(env.get_template('test.html').render())
  File "/<>/google_appengine/lib/jinja2-2.6/jinja2/environment.py", line 719, in get_template
    return self._load_template(name, self.make_globals(globals))
  File "/<>/google_appengine/lib/jinja2-2.6/jinja2/environment.py", line 693, in _load_template
    template = self.loader.load(self, name, globals)
  File "/<>/google_appengine/lib/jinja2-2.6/jinja2/loaders.py", line 115, in load
    source, filename, uptodate = self.get_source(environment, name)
  File "/<>/google_appengine/lib/jinja2-2.6/jinja2/loaders.py", line 226, in get_source
    if not self.provider.has_resource(p):
  File "/<>/google_appengine/lib/setuptools-0.6c11/pkg_resources.py", line 1170, in has_resource
    return self._has(self._fn(self.module_path, resource_name))
  File "/<>/google_appengine/lib/setuptools-0.6c11/pkg_resources.py", line 1218, in _has
    "Can't perform this operation for unregistered loader type"
NotImplementedError: Can't perform this operation for unregistered loader type 
```

当我使用 a`FileSystemLoader`代替它时，它可以工作，但是我猜这在 zip 中不起作用：

```
import common.templates
env = Environment(loader=FileSystemLoader(common.templates.__path__)) 
```

我已经看到[了这个 SO question](https://stackoverflow.com/questions/3809304/jinja2-packageloader-on-google-app-engine)但这不是问题。

**更新：**

我刚刚在 1.7.6 SDK 中测试了该示例并且可以正常工作，但是我希望看到它可以在较旧的 SDK（或 old_dev_appserver）上运行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T14:42:54.397

我认为问题出在`pkg_resources`.

一些`os`相关功能并未在 GAE 中实现，但似乎 jinja2 或 Google 提供了一种解决方法。

这些链接说明了这个问题：

[http://code.google.com/p/googleappengine/issues/detail?id=60](http://code.google.com/p/googleappengine/issues/detail?id=60)

[https://github.com/mitsuhiko/jinja2/issues/143](https://github.com/mitsuhiko/jinja2/issues/143)

[谷歌应用引擎上的 Jinja2 PackageLoader](https://stackoverflow.com/questions/3809304/jinja2-packageloader-on-google-app-engine#)

[https://bitbucket.org/tarek/distribute/issue/73/pkg_resources-fails-on-google-app-engine](https://bitbucket.org/tarek/distribute/issue/73/pkg_resources-fails-on-google-app-engine)

我用过

```
jinja_environment = jinja2.Environment(autoescape=True,
loader=jinja2.FileSystemLoader(os.path.join(os.path.dirname(__file__), 'templates'))) 
```

作为样板从“ `template`”目录中获取模板，该目录与设置定义的文件位于同一目录中。但问题是关于压缩为`eggs`和使用的文件`PackageLoader`

*包里面有`__init__.py`文件吗？*不过，您说它适用于 1.7.6。

# validation - anuga模型断言错误

> ID：15634837
> 
> 赞同：0
> 
> 时间：2013-03-26T10:32:48.073
> 
> 标签：validation, testing, assert

伙计们，

我安装了一个名为 Anuga 的模型，当我执行 test_all.py 时。有如下故障。

## 失败：test_parabolic_solve_rectangular_cross_velocities_zero_h (test_kinematic_viscosity_operator.Test_kinematic_viscosity)

回溯（最后一次调用）：文件“/home/lili/anuga_core/source/anuga/operators/test_kinematic_viscosity_operator.py”，第 772 行，在 test_parabolic_solve_rectangular_cross_velocities_zero_h assert num.allclose(u.centroid_values, num.where(h.centroid_values > 0.0, 1.0, 0.0), rtol=1.0e-1) AssertionError

这是asserterror，我不知道如何解决它。

是否有必要通过所有测试验证，然后才能正确使用模型？但是即使我没有通过所有的测试和验证，我仍然可以运行一些东西，我不知道为什么。这真有趣。

非常感谢您的热心帮助。

期待您的帮助。

李莉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T12:04:16.953

要获得与 anuga 水动力模型相关的答案问题，您应该在他们的用户论坛上发邮件。他们将能够很好地解决您的疑问。用户论坛的email id如下。 `anuga-user-request@lists.sourceforge.net`

# android - 布局翻转动画

> ID：15634841
> 
> 赞同：0
> 
> 时间：2013-03-26T10:32:55.597
> 
> 标签：android, android-animation

我想创建一个应用程序，我想在其中将翻转动画应用于布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:35:43.957

```
 private void applyRotation(float start, float end) {
// Find the center of image
final float centerX = image1.getWidth() / 2.0f;
final float centerY = image1.getHeight() / 2.0f;

// Create a new 3D rotation with the supplied parameter
// The animation listener is used to trigger the next animation
final Flip3dAnimation rotation =
       new Flip3dAnimation(start, end, centerX, centerY);
rotation.setDuration(500);
rotation.setFillAfter(true);
rotation.setInterpolator(new AccelerateInterpolator());
rotation.setAnimationListener(new DisplayNextView(isFirstImage, image1, image2));

if (isFirstImage)
{
image1.startAnimation(rotation); // "YourLayout"
} else {
image2.startAnimation(rotation); // "Your Other Layout"
}

} 
```

查看本教程，它完全符合您的要求。 [http://www.inter-fuser.com/2009/08/android-animations-3d-flip.html](http://www.inter-fuser.com/2009/08/android-animations-3d-flip.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:37:31.317

你可以试试这个：

增长_from_middle.xml

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >

    <scale
        android:duration="200"
        android:fillAfter="false"
        android:fromXScale="0.0"
        android:fromYScale="0.7"
        android:interpolator="@android:anim/linear_interpolator"
        android:startOffset="200"
        android:toXScale="1.0"
        android:toYScale="1.0" />

    <translate
        android:duration="200"
        android:fromXDelta="50%"
        android:startOffset="200"
        android:toXDelta="0" />

</set> 
```

收缩到中间.xml

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >

    <scale
        android:duration="200"
        android:fillAfter="false"
        android:fromXScale="1.0"
        android:fromYScale="1.0"
        android:interpolator="@android:anim/linear_interpolator"
        android:toXScale="0.0"
        android:toYScale="0.7" />

    <translate
        android:duration="200"
        android:fromXDelta="0"
        android:toXDelta="50%" />

</set> 
```

将此用作：

```
overridePendingTransition(R.anim.grow_from_middle,R.anim.shrink_to_middle); 
```

希望这会帮助你。

# youtube-api - YouTube Analytics API 上过去日期的数据是否保证不会更改？

> ID：15634844
> 
> 赞同：0
> 
> 时间：2013-03-26T10:33:04.970
> 
> 标签：youtube-api

Google 能否保证从 YouTube 分析 API 中提取的任意日期（例如 2013 年 3 月 20 日）的数据将来不会改变？例如，我们今天和明天提取 2013 年 3 月 20 日的所有类型的报告 - 是否可以看到数字上的差异？

如果可能发生变化 - 这种变化的频率（所有时间，每月一次，每年一次）以及它们有多大（数字可以显着变化 100%-1000%，数字可以轻微变化 1%- 2%）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:59:25.073

没有这样的保证，我们无法提供您询问的有关潜在变化的详细程度。

[YouTube Analytics API 使用与Web 界面](http://youtube.com/analytics)相同的后端数据源。通常，涵盖有关来自 Web 界面的数据的问题的[帮助材料也适用于来自 API 的数据。](http://support.google.com/youtube/bin/answer.py?hl=en&answer=1714323)

# jquery - 使用 JQuery 进行输入字段实时验证？

> ID：15634852
> 
> 赞同：-1
> 
> 时间：2013-03-26T10:33:40.437
> 
> 标签：jquery, html, jsp, input

实际上我的html页面中有两个文本输入框..

```
 <input id="input1" title="Text1">
    <input id="input2" title="Text2"> 
```

现在我想使用第一个文本输入框在第二个输入字段上进行实时验证...

实时验证示例[实时验证](http://livevalidation.com/examples#exampleHomepage)

请给我一些在 Jquery 中进行实时验证的示例代码.. jQuery("#input2").live('change', function() {

```
 if("#input1==#input2") {
            alert('Both are same');
        }   

        else{
            alert('both are not same'); 
        }
    }); 
```

但这是错误..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:44:20.777

您的问题并没有给出足够的内容，但是假设您已经阅读了您提供的链接并且已经实现了类似的验证功能，如果您只是想在每次 a 的内容时调用验证功能`text`输入字段更改您只需：

```
$('input[type="text"]').on('input', function() {
    myValidationFunction();
}) 
```

每当输入的文本发生更改时，我快速创建的[这个快速 JSFiddle会更改段落的文本，并且应该为您指明正确的方向。](http://jsfiddle.net/AKUYh/1)

通过学习官方 jQuery 教程，您将受益匪浅：http: [//try.jquery.com/](http://try.jquery.com/)

# php - 无法从数据库中获取数据

> ID：15634853
> 
> 赞同：0
> 
> 时间：2013-03-26T10:33:43.793
> 
> 标签：php, html

我有一页显示数据，每个数据旁边都有一个*编辑链接*，当我单击该编辑链接时。它显示另一个页面，该页面显示填充了从数据库中获取的数据的表单。现在这种形式有两个输入类型=“文件”。

1）照片

2) 简历

```
<?php
$a =$data['photo'];
?>
<tr>
<td>Photo:</td>
<td><input type="file" onchange="file_selected=true;" name="pic"  ></td>
<td id="f_pic"></td>
</tr>
<tr>
<td colspan=2><img src="Image/<?php echo "$a"; ?>" alt="Photo" width="400" height="200"> </td>
</tr>
<?php
$r =$data['resume'];
?>

<tr>
<td>Resume:</td>
<td><input type="file" onchange="file_selected1=true;" name="doc" id="<?php $data['resume']?>"></td>
<td id="f_doc"></td>
</tr> 
```

现在，当编辑按钮按下所有其他填充的细节时，我无法获得照片和简历的价值。我应该怎么办？？我不知道。

**编辑**

如果有问题但我对此不满意。都是错误的答案。我有一个我要发布的答案，但我想你需要删除重复的标记。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:41:37.850

1.文件字段不能自动填充，请查看下面的替代解决方案
2.在文件文本框附近显示相应的图像，或在简历附近显示文件名（查看链接-查看当前文件）
3.用户可以看到当前图片和简历。
4.如果用户想编辑它们，上传新文件并用旧文件替换。
5.如果用户不想编辑它们，不要更新数据库中的这些字段，让它保持以前的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:41:58.953

出于安全原因，浏览器不允许您将值设置为文件。例如，如果某些页面使用包含密码等敏感信息的文件填充这些字段并自动提交表单。

由于您的意图是编辑表单，因此预先填写已存储的信息并不是一个好主意，就好像用户没有更新照片/简历一样，只需单击提交，您将再次上传这些文件（尽管浏览器不会允许它)

最好的主意是，如果照片缩略图/下载链接已经上传，则显示链接。如果用户选择另一张照片/简历，只需更新您后端的现有照片。

# php - magento配置下的自定义选项卡给出404页面？

> ID：15634859
> 
> 赞同：2
> 
> 时间：2013-03-26T10:34:01.293
> 
> 标签：php, magento

我正在开发一个扩展，`Magento`其中我在管理部分添加了一个下，`tab`但我遇到的问题是当我点击它给我的那个选项卡时。谁能帮我解决这个问题？`general``system->configuration``404 error`

下面是我的`config.xml`代码：

```
<?xml version="1.0"?>
<config>
<!-- turn on our module, required for install support -->
<modules>
    <Gowebbaby_Eventcalendar>
        <version>0.1.0</version>
    </Gowebbaby_Eventcalendar>
</modules>
<frontend>
<routers>
    <eventcalendar>
        <use>standard</use>
        <args>
            <module>Gowebbaby_Eventcalendar</module>
            <frontName>eventcalendar</frontName>
        </args>
    </eventcalendar>
</routers>
<layout>
    <updates>
        <eventcalendar>
            <file>eventcalendar.xml</file>
        </eventcalendar>
    </updates>
</layout>
</frontend>
<admin>
<routers>
    <eventcalendar>
        <use>admin</use>
        <args>
            <module>Gowebbaby_Eventcalendar</module>
            <frontName>eventcalendar</frontName>
        </args>
    </eventcalendar>
</routers>
</admin>
<adminhtml>
<menu>
    <menu2 translate="title" module="eventcalendar">
        <title>Event Calendar</title>
        <sort_order>999</sort_order>
        <children>
            <menuitem1 module="eventcalendar">
                <title>Calendar</title>
                <action>eventcalendar/adminhtml_calendar</action>
            </menuitem1>
            <menuitem2 module="eventcalendar">
                <title>Email Settings</title>
                <action>eventcalendar/adminhtml_emailsettings</action>
            </menuitem2>
        </children>
    </menu2>
</menu>
<acl>
    <resources>
        <admin>
            <children>
                <menu2 translate="title" module="eventcalendar">
                    <title>Event Calendar</title>
                    <sort_order>999</sort_order>
                    <children>
                        <menuitem1>
                            <title>Calendar</title>
                        </menuitem1>
                        <menuitem2>
                            <title>Email Settings</title>
                        </menuitem2>
                    </children>
                </menu2>
            </children>
        </admin>
    </resources>
</acl>
</adminhtml>
<global>
<!-- turn on models -->
<models>
    <eventcalendar>
        <class>Gowebbaby_Eventcalendar_Model</class>
        <resourceModel>eventcalendar_mysql4</resourceModel>
    </eventcalendar>
    <eventcalendar_mysql4>
        <class>Gowebbaby_Eventcalendar_Model_Mysql4</class>
        <entities>
            <eventcalendar>
                <table>eventcalendar</table>
            </eventcalendar>
        </entities>
    </eventcalendar_mysql4>
</models>
<!-- turn on models -->

<!-- turn on database connections -->
<resources>
<!-- setup is needed for automatic installation -->
    <eventcalendar_setup>
        <setup>
            <module>Gowebbaby_Eventcalendar</module>
        </setup>
        <connection>
            <use>core_setup</use>
        </connection>
    </eventcalendar_setup>
    <eventcalendar_write>
        <connection>
            <use>core_write</use>
        </connection>
    </eventcalendar_write>
    <eventcalendar_read>
        <connection>
            <use>core_read</use>
        </connection>
    </eventcalendar_read>
</resources>

<blocks>
    <eventcalendar>
        <class>Gowebbaby_Eventcalendar_Block</class>
    </eventcalendar>
</blocks>

<helpers>
    <eventcalendar>
        <class>Gowebbaby_Eventcalendar_Helper</class>
    </eventcalendar>
</helpers>

<layout>
    <eventcalendar>
        <file>eventcalendar.xml</file>
    </eventcalendar>
</layout>
</global> 
```

下面是我的`system.xml`代码：

```
<?xml version="1.0"?>
<config>
<sections>
    <reminder_settings translate="label" module="eventcalendar">
        <class>separator-top</class>
        <label>Event Calendar - Reminder Settings</label>
        <tab>general</tab>
        <sort_order>100</sort_order>
        <show_in_default>1</show_in_default>
        <show_in_website>1</show_in_website>
        <show_in_store>1</show_in_store>
        <groups>
            <reminder_settings_option translate="label">
                <label>Event Calendar - Reminder Settings</label>
                <frontend_type>text</frontend_type>
                <sort_order>10</sort_order>
                <show_in_default>1</show_in_default>
                <show_in_website>1</show_in_website>
                <show_in_store>1</show_in_store>
                <fields>
                    <reminder_days translate="label"> <label>Send Reminder Email (No. of days)</label>
                        <frontend_type>text</frontend_type>
                        <sort_order>1</sort_order>
                        <show_in_default>1</show_in_default>
                        <show_in_website>1</show_in_website>
                        <show_in_store>1</show_in_store>
                    </reminder_days>
                </fields>
            </reminder_settings_option>
        </groups>
    </reminder_settings>
</sections>
</config> 
```

下面是我的`adminhtml.xml`代码：

```
<?xml version="1.0"?>
<config>
<acl>
    <resources>
        <admin>
            <children>
                <system>
                    <children>
                        <config>
                            <children>
                                <reminder_settings translate="label" module="eventcalendar">
                                    <title>Event Calendar - Reminder Settings</title>
                                </reminder_settings>
                            </children>
                        </config>
                    </children>
                </system>
            </children>
        </admin>
    </resources>   
</acl>
</config> 
```

任何人都可以在这里找出问题吗？

提前致谢

# python - python-config 上可能存在的错误？！它不打印使用 --ldflags 时的完整路径

> ID：15634863
> 
> 赞同：2
> 
> 时间：2013-03-26T10:34:18.773
> 
> 标签：python, macos, python-2.7, makefile, python-config

```
$ python-config --ldflags
-L/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/config -ldl -framework CoreFoundation -lpython2.7 -u _PyMac_Error Python.framework/Versions/2.7/Python 
```

它打印`Python.framework/Versions/2.7/Python`而不是`/Library/Frameworks/Python.framework/Versions/2.7/Python`

当尝试在 a 中使用它时，`Makefile`它不能与 the 一起使用，`python-config --ldflags`但是如果我获取输出并对其进行更改`Python.framework/Versions/2.7/Python`，`/Library/Frameworks/Python.framework/Versions/2.7/Python`它可以完美地工作。

*   我想避免解析`python-config`makefile中的输出的解决方案。
*   我在用`gcc version 4.2.1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T22:07:54.890

这是一个已知的错误，三周前已修复：http: [//bugs.python.org/issue16848](http://bugs.python.org/issue16848)。该修复程序将随 2.7.4 版本一起发布，该版本计划于 4 月 6 日上线。

# delphi - 从 DWScript 中的 TProgramInfo 检索记录参数

> ID：15634866
> 
> 赞同：1
> 
> 时间：2013-03-26T10:34:25.527
> 
> 标签：delphi, dwscript

如何从 TdwsUnit 中函数的 Eval 事件中的 TProgramInfo 对象检索记录参数？似乎该对象仅提供直接检索基本数据类型或可能是脚本对象的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T07:41:18.757

您可以使用该`Members[]`属性来访问记录成员，例如，如果您有一个`p`类型为 的脚本变量`TPoint`，您可以访问并设置 X/Y 成员

```
var p : IInfo;
...
p:=Info.Vars['p'];

px := p.Member['x'].Value;
py := p.Member['y'].Value; 
```

（参见 TdwsUnitTests 中的 PredefinedRecord）

# paypal - 在 PayPal Payflow Link 信用卡表单中创建自定义字段

> ID：15634867
> 
> 赞同：1
> 
> 时间：2013-03-26T10:34:27.043
> 
> 标签：paypal, payflowlink

我需要为 Paypal Payflow 链接信用卡表单添加一个自定义字段。我已经搜索并找到了为 Express Checkout 添加自定义字段的解决方案。我已经尝试但我无法获得解决方案。请帮助我获得解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:27:03.763

您可以使用 Payflow 可用的变量之一，例如 comment1、comment2、user1、user2、user3 等。您应该在开发人员指南中找到这些变量的引用。

# batch-file - 批处理脚本删除文件名或目录中的最后一个单词

> ID：15634870
> 
> 赞同：0
> 
> 时间：2013-03-26T10:34:34.063
> 
> 标签：batch-file

有人可以帮我写一个批处理脚本吗？我需要一个脚本，它可以删除文件名或目录中的最后一个单词和空格。
**例如：**

**执行脚本**New后的****新文件夹**- 删除最后一个空格和单词。**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:24:14.767

```
@ECHO OFF
SETLOCAL enabledelayedexpansion
FOR %%t IN (*) DO (
  CALL :process "%%~nt"
  IF DEFINED success ECHO REN "%%t" "!success!%%~xt"
  )
GOTO :eof

:process
SET "success=%~1"
:procloop
SET "lastchar=%success:~-1%"
SET "success=%success:~0,-1%"
IF NOT DEFINED success GOTO :EOF 
IF NOT "%lastchar%"==" " GOTO procloop
:: Remove any other trailing spaces
:rtsloop
SET "lastchar=%success:~-1%"
SET "success=%success:~0,-1%"
IF "%lastchar%"==" " GOTO rtsloop
SET "success=%success%%lastchar%"
GOTO :eof 
```

对于大多数“正常”名称，这应该可以解决问题。对于包含很少字符的名称（如`!`和`^`-），它可能会失败，但这样的文件/目录名称很愚蠢。

将 更改`FOR`为 a`FOR /d`以处理目录，而不是文件。

本质上，`NAME`...name 的一部分`:process`在引号中传递给例程以保留其间距，并且例程首先删除最后一个字符，直到找到空格，然后继续删除任何其他空格。

如果名称没有空格，`success`则为空，因此未定义，否则将具有新名称。

验证后，将`ECHO REN`改为简单`REN`地进行重命名，这个例程只是简单地报告它打算做什么。

* * *

附录：

我们有一个小小的术语难题。

对于`FILES`，`FILENAME.TXT`如果经常称为文件的“名称”，但是`FILENAME`是“名称”并且`.TXT`是EXTENSION。

当此过程发生时，期望的结果是`FILENAME WITH SPACES.EXT`保留`FILENAME WITH.EXT`文件的 EXTENSION 或 TYPE。

使用 DIRECTORY 名称，仍然支持“EXTENSION”的想法，因此`Folder 18.9.0.17`被视为`Folder 18.9.0`带有扩展名`.17`（扩展名是 final 之后发生的任何内容`.`）

解决方法很简单——不要在重命名中添加扩展名。

```
 IF DEFINED success ECHO REN "%%t" "!success!" 
```

（但请注意 , `Folder 18.9.0.17`, `Folder 18.9.0.18`ALL**将**`Folder 18.9.0.19`在此处重命名目标- 只有第一个可能成功...）**`Folder`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:58:57.753

这应该工作`ren *" "* *" "`。不过要小心，因为这将更改该目录中的所有内容。如果您知道文件或文件夹的第一个单词，那么您可以使用它`ren 1stword" "* *" "`。****

# javascript - 如何检查值是否为空？

> ID：15634878
> 
> 赞同：1
> 
> 时间：2013-03-26T10:34:56.037
> 
> 标签：javascript, jquery

我有一些包含空白选项的选择菜单。当两者都是空白时（通常在第一页加载时），我想显示一些隐藏的 div。

这就是我所拥有的：

```
$('.variant_options select').each(function() { 
    if ($(this).attr('value') === '') {
        // some code here to show hidden div
        console.log("No options chosen");
    }
}); 
```

这似乎不起作用。

**编辑 1**

对于它的价值，我尝试过这样的事情：

```
if (!$(this).attr('value')) 
```

这似乎有效，但它破坏了其他地方的功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T10:37:41.000

`<select>`元素没有`value`属性，所以需要`.val()`在元素上使用来判断当前选中的选项是否为空。

```
if ($(this).val() === '') {
    // value of select box is empty
} 
```

*`this.value === ''`也应该工作*

检查是否未选择任何选项：

```
if (this.selectedIndex == 0) {
    // no option is selected
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:53:39.380

你可以简单地这样做：

```
$('.variant_options select').each(function () {
    if ($.trim($(this).val()) === '') {
        // some code here...
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T10:36:51.750

您可以使用以下方法执行此操作：

```
if($(this).val() === '') {
  // value is empty
} 
```

我也相信以下几点：

```
if(!$(this).prop('value')) { 
  // It's empty 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T10:43:24.643

如果您有空格，请使用此技巧：

```
if ($.trim($(this).val()) === '') { ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T10:37:59.707

jQuery 可以通过使用检查值`$(this).val()`

所以你会这样做 if ($(this).val === '')`

如果你想检查其他属性，比如 href 或 src，你可以这样做

`if ($(this).attr('href') === ''`

# c# - 哈希表序列

> ID：15634879
> 
> 赞同：-3
> 
> 时间：2013-03-26T10:34:57.437
> 
> 标签：c#, hashtable

我正在使用以下代码获取帐户余额，以便在我的软件中获取余额报表。

以下是详细信息：

**ASP**是类名
**Rev_AllAccountBalaces**是一个返回数据表的函数；
**BalanceSheetEndDate**是 DateTime 对象
**ano1**是返回数据表的列名
**account_balance**是一个哈希表

**代码 ：**

```
DataTable dt_all_account_balances = ASP.Rev_AllAccountBalaces(BalanceSheetEndDate);

for (int idx = 0; idx < dt_all_account_balances.Rows.Count; idx++)

{                        
  int ano = Int32.Parse(dt_all_account_balances.Rows[idx]["ano1"].ToString());
  double balance = double.Parse(dt_all_account_balances.Rows[idx]["balance1"].ToString());
  account_balance.Add(ano, balance);                   
} 
```

现在让我们来解决问题..

在向 "account_balance" 添加值和键时，这些值按添加顺序添加。

例如，假设
键值
96 40000
1091 5906
1088 99
1087 4939
1089 49
99 -40000
415 -53993
1036 -100000
1090 1000
1076 42000

它们实际上被添加为
1088 99
1076 42000
1036 -100000
1091 5906
1090 1000
1089 49
99 -40000
1087 4939
96 40000
415 -53993

为什么？？？？？？？

如何像 Datatable 值一样添加它们......？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:41:23.260

Hashtable 是一个映射，它是无序的。尝试使用[SortedList](http://msdn.microsoft.com/en-us/library/ms132319.aspx)。

# r - 为什么当我将栅格地图投影到新的 CRS（R 中的 projectRaster 函数）时，栅格地图的值会发生变化？

> ID：15634882
> 
> 赞同：12
> 
> 时间：2013-03-26T10:35:03.007
> 
> 标签：r, projection, raster

我需要将 latlong 中的地图投影到方位角等距投影。

```
map_proj<-projectRaster(map, crs="+proj=aeqd +lon_0=48+lat_0=18") 
```

在我的原始地图中，我有这些值

```
class       : RasterLayer 
dimensions  : 1713, 2185, 3742905  (nrow, ncol, ncell)
resolution  : 0.008335028, 0.00833354  (x, y)
extent      : 39.06984, 57.28187, -25.93814, -11.66279  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0 
data source : /Users/Oritteropus/Desktop/Progetti/maps/mada_rast2 
names       : mada_rast2 
values      : 0, 255  (min, max)

unique(map)
 [1]  0  1  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 24 25 26 27 28
[24] 29 30 31 32 33 34 35 36 37 38 39 40 
```

在我的投影地图中，我现在有以下值

```
class       : RasterLayer 
dimensions  : 1990, 2254, 4485460  (nrow, ncol, ncell)
resolution  : 1000, 1000  (x, y)
extent      : 4026994, 6280994, -3379165, -1389165  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=aeqd +lon_0=0+lat_0=0 +ellps=WGS84 
data source : in memory
names       : mada_rast2 
values      : -0.1498806, 40  (min, max)

head(unique(map_proj))

[1] -1.498806e-01 -8.050509e-02  0.000000e+00  1.164434e-05  3.575309e-05
[6]  5.233506e-05 
```

我需要保持相同的价值观..有人可以解释我发生了什么或我错在哪里吗？谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-26T11:29:14.323

这是因为重新投影栅格需要一定量的像元变形，并且需要在值之间进行插值。如果要保持相同的值，则必须更改插值方法。改用最近的邻居...

```
map_proj<-projectRaster(map, crs="+proj=aeqd +lon_0=48+lat_0=18" , method = "ngb" ) 
```

来自帮助页面的数据示例`raster:::projectRaster`：

```
r <- raster(xmn=-110, xmx=-90, ymn=40, ymx=60, ncols=40, nrows=40)
r <- setValues(r, 1:ncell(r))
newproj <- "+proj=lcc +lat_1=48 +lat_2=33 +lon_0=-100 +ellps=WGS84"

# Default reproject uses bilinear interpolation
r_bl <- projectRaster( r , crs = newproj )
r_nn <- projectRaster( r , crs = newproj , method = "ngb" )

range(values(r) , na.rm = T) 
#[1]    1 1600
range(values(r_bl) , na.rm = T )
#[1]   -7.671638 1612.968493
range(values(r_nn) , na.rm = T )
#[1]    1 1600 
```

当然，您仍在将值投影到新单元格，因此您可能会得到一些 NA。简而言之，双线性插值对连续变量有意义，而最近邻对分类变量有意义。

# android - groupView 中的 RadioButton 文本

> ID：15634885
> 
> 赞同：-3
> 
> 时间：2013-03-26T10:35:17.800
> 
> 标签：android, android-layout

我在 groupView 中有几个单选按钮，每个单选按钮都有自己的文本。如果此文本不止一行，则此文本的单选按钮与文本居中对齐，但我想将单选按钮对齐到其文本的顶部。

**我的目标 ：-**

我有：

```
 | text line 1

RB | text line 2

   | text line 3 
```

我想：

```
 RB    
 | text line 1

 | text line 2

 | text line 3 
```

对于设置文本，我使用 rb.setText( text );

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:51:50.140

你可以这样试试：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <RadioButton
        android:id="@+id/rb1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/tv1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/test_text" />
</LinearLayout> 
```

# c# - .NET Framework 支持空操作语法或单例

> ID：15634886
> 
> 赞同：2
> 
> 时间：2013-03-26T10:35:23.257
> 
> 标签：c#, .net, lambda, delegates, syntactic-sugar

在使用现有框架时，有时您需要传入一个不执行任何操作的操作委托，通常是原始开发人员添加的扩展点。例子：

```
var anObject = new Foo(() => { }); 
```

并且大概 Foo 对象会在某个时候调用这个委托。我的目标是消除 { } 的使用，因为我的风格规定 { } 需要单独使用，并且需要单独的行，而且我有点强迫症并且讨厌在不必要的情况下冗长。

在处理返回值的操作时，这很简单——您可以提供表达式而不是语句（从而消除大括号。）示例：

```
var anObject = new Foo(() => string.Empty); 
```

所以，我想问题是两个部分......

.NET 是否有任何类型的默认空操作？除了 { } 之外，是否有用于向 lambda 提供空表达式的语法糖？

我目前倾向于的解决方案是在前面的赋值中定义委托，以避免在函数调用中使用 lambda 表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:58:08.683

我不知道什么是内置的。

您可以将委托定义*一次*作为助手单例：

```
var anObject = new Foo(NoOpAction.Instance);

// ...

var anotherObject = new Bar(NoOpAction.Instance);

// ...

public static class NoOpAction
{
    private static readonly Action _instance = () => {};

    public static Action Instance
    {
        get { return _instance; }
    }
} 
```

而且因为每次在整个程序中使用时，您都会收到完全相同的委托，因此`NoOpAction.Instance`您还可以节省创建和垃圾收集都执行相同操作的多个委托的（诚然很小的）成本。

# android - Android OpenGL ES 进程 yuv 预览为 RGBA

> ID：15634887
> 
> 赞同：0
> 
> 时间：2013-03-26T10:35:25.850
> 
> 标签：android, opengl-es

我想使用OpenGL来处理来自Android平台上格式为NV21的相机的数据。

我的代码如下：

顶点着色器：

```
attribute vec4 position;
attribute vec2 inputTextureCoordinate;
varying vec2 v_texCoord;
void main()
{
   gl_Position = position;
   v_texCoord = inputTextureCoordinate;
} 
```

片段着色器：

```
precision mediump float;
varying vec2 v_texCoord;
uniform sampler2D yTexture; 
uniform sampler2D uvTexture;
const mat3 yuv2rgb = mat3(
                        1, 0, 1.2802,
                        1, -0.214821, -0.380589,
                        1, 2.127982, 0
                        );

void main() {    
    vec3 yuv = vec3(
                1.1643 * (texture2D(yTexture, v_texCoord).r - 0.0627),
                texture2D(uvTexture, v_texCoord).a - 0.5,
                texture2D(uvTexture, v_texCoord).r - 0.5
                );
    vec3 rgb = yuv * yuv2rgb;
    gl_FragColor = vec4(rgb, 1.0);
} 
```

我发送 yTexture：

```
GLES20.glTexImage2D(GLES20.GL_TEXTURE_2D, 0, GLES20.GL_LUMINANCE, w, h, 0,                  GLES20.GL_LUMINANCE, GLES20.GL_UNSIGNED_BYTE,                           ByteBuffer.wrap(data)); 
```

其中数据是相机预览的 nv21 格式字节数组我发送 uvTexture：

```
byte[] luminanceAlpha = new byte[w * h / 2];
System.arraycopy(data, w * h, luminanceAlpha, 0, w * h / 2);
GLES20.glTexImage2D(GLES20.GL_TEXTURE_2D, 0,            GLES20.GL_LUMINANCE_ALPHA, w / 2, h / 2, 0,                             GLES20.GL_LUMINANCE_ALPHA,                              GLES20.GL_UNSIGNED_BYTE, ByteBuffer.wrap(luminanceAlpha)); 
```

这就是我认为重要的所有代码。但是当我运行程序时，我发现 GLSurfaceView 中的结果看起来更蓝。我的代码有什么问题吗。我很麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T17:14:23.383

为什么不使用[GLSurfaceView](http://developer.android.com/reference/android/opengl/GLSurfaceView.html)并生成[SurfaceTexture](http://developer.android.com/reference/android/graphics/SurfaceTexture.html)，然后使用[setPreviewTexture](http://developer.android.com/reference/android/hardware/Camera.html#setPreviewTexture%28android.graphics.SurfaceTexture%29)将其传递给相机？如果你想要像素 RGB 数据，使用[glReadPixels](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glReadPixels.xml)来获取缓冲区数据。

# sql - 如何加入这些表

> ID：15634889
> 
> 赞同：0
> 
> 时间：2013-03-26T10:35:35.550
> 
> 标签：sql, sql-server, join

我有一个表“**规则**”，其中有几个 ID，来自 3 个表**A,B,C**中的任何一个。

结构是这样的：

* * *

表 = 规则

列 = ID

```
ID 
--

222

333

555

7899 
```

* * *

表 = A

列 = ID、电子邮件

```
ID        Email

111       test111@gmail.com
555       test555@gmail.com 
```

* * *

表 = B

列 = ID、电子邮件

```
ID        Email

222       test222@gmail.com
7899      test7899@gmail.com 
```

* * *

表 = C

列 = ID、电子邮件

```
ID        Email

333       test333@gmail.com
444       test444@gmail.com 
```

* * *

我需要这样的结果：

```
ID    Email

222   test222@gmail.com

333   test333@gmail.com

555   test555@gmail.com
7899  test7899@gmail.com 
```

注意：A、B、C 表还包含更多信息，它们并不完全相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:47:38.173

```
SELECT  d.*
FROM    rule
CROSS APPLY
        (
        SELECT  id, email
        FROM    a
        WHERE   a.id = rule.id
        UNION ALL
        SELECT  id, email
        FROM    b
        WHERE   b.id = rule.id
        UNION ALL
        SELECT  id, email
        FROM    c
        WHERE   c.id = rule.id
        ) d 
```

请注意，如果`id`存在于多个表中，`id`则将返回所有表中的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:45:58.630

```
select
    r.id,
    e.email
from rule r
left outer join (
    select id, email from A
    union all 
    select id, email from B
    union all
    select id, email from C
    ) as e on r.id = e.id 
```

这将返回“规则”表中的所有记录，即使表 A、B 或 C 中没有匹配的记录

# redirect - Sugarcrm DCMenu Qucik 创建 | 保存重定向后

> ID：15634890
> 
> 赞同：1
> 
> 时间：2013-03-26T10:35:36.347
> 
> 标签：redirect, sugarcrm

我在按钮上显示自定义模块付款的快速创建视图单击`detail View of Accounts via DC menu load view in SugarCRM.` 我想要的是当我在单击 QuickCreate 视图的保存按钮时保存值时，我想将用户重定向到新创建的记录。

在支付模块的保存后逻辑挂钩中，我尝试了所有这些

1) 使用 JavaScript`window.location.href`进行重定向

2) `SugarApplication::redirect()`;

3) 改变了`$_POST['return_module']`,`$_POST['return_action']`和`$_POST['return_id']`

然而，在以正确的方式应用上述所有内容后，页面不会重定向。我正在使用`AJAX UI`帐户模块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T10:29:36.670

我找到了一种解决方法，它显然不是升级安全的，但可以解决问题。

我所做的是在 after_save 上为 CustomModule 创建了一个逻辑挂钩，并将其索引为更大的数字，例如

```
$hook_array['after_save'][] = array(20, 
```

在我的自定义逻辑完成后的那个钩子中，我检查了 AJAX 调用并完成了这样的过程

```
if($_REQUEST['is_ajax_call'] == 1)
{
    echo '{"status":"redirect","url":"index.php?module=lev_payment_schedules&action=DetailView&record='.$bean->id.'&CreatePayment=true"}';
    die();
} 
```

现在在位于的 DCMenu.js 文件中

> jssource\src_files\include\DashletContainer\Containers\DCMenu.js

我为上面刚刚回显的输出添加了一个条件。

在块`DCMenu.save`中的功能中，`switch ( returnData.status )`我将自定义案例条件添加为

```
case 'redirect':                                
    ajaxStatus.flashStatus(SUGAR.language.get('app_strings','LBL_SAVED'),2000);
    window.location.href = returnData.url;                              
   break; 
```

这对我有用，浏览器被重定向到我提供的 URL。我希望这可以帮助别人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:31:16.420

如果您使用此自定义[http://support.sugarcrm.com/04_Find_Answers/03_Developers/100Customization/Modifying_Subpanel_Action_Buttons](http://support.sugarcrm.com/04_Find_Answers/03_Developers/100Customization/Modifying_Subpanel_Action_Buttons)以完整形式重定向用户而不是快速创建，则上述代码应该可以工作。

# node.js - Node.JS + SQL Server + MongoDB + 云上的 Redis

> ID：15634891
> 
> 赞同：0
> 
> 时间：2013-03-26T10:35:36.800
> 
> 标签：node.js, mongodb, azure, heroku, redis

我的典型需求是我想要在云上与 SQL Server、MongoDb 和 redis 交互的 NodeJS 应用程序。

由于此应用程序将使用旧数据库，因此我无法替换 SQL Server。

NodeJS + MongoDB + Redis 在 Heroku 上得到了很好的支持。

NodeJS + MongoDB + SQL Server 在 Azure 上得到了很好的支持。（有 Redis 支持，但通过 vm）

一起使用所有组件的建议是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:41:02.237

就您而言，这基本上取决于您是否需要 Redis。虽然可以让 Redis 在 Windows 上运行，或者 - 正如您所提到的 - 通过 VM（我假设可能在同一系统上运行？）。不支持在 Windows 上本地运行它，并且通过一些实验判断，我也不推荐将它用于生产用途。

如果您只是将 Redis 用作会话存储，则不妨将这部分放在 MongoDB 上，从而使用 Azure-Solution。如果你需要 Redis 来做其他事情，你可能会遇到像我这样的场景：

我们在 Linux 上运行 Node.JS+REDIS+MongoDB，而 MSSQL 在单独的 Windows 机器上运行。从 Node.JS 到 MSSQL 的连接是通过 ODBC/FreeTDS 完成的，它可以很好地满足我的要求（实际上所有其他解决方案都不能很好地工作）。

我们这样做的原因很简单，一旦转换完全完成，我们将在某一时刻从设置中删除 SQL-Server。

# enums - 在 RavenDB 中通过 Enum 查询

> ID：15634893
> 
> 赞同：0
> 
> 时间：2013-03-26T10:35:51.430
> 
> 标签：enums, ravendb

我使用了约定：

```
store.Conventions.SaveEnumsAsIntegers = true; 
```

枚举现在被正确地保存为整数，但是，当我尝试使用枚举进行查询时，查询会在其字符串表示形式中使用枚举进行翻译，这不会给我任何结果。

```
session.Query<Entity>().Where(x => x.EnumProp == MyEnum.Value1); 
```

我的印象是 SaveEnumsAsIntegers 在持久化和查询时根据这篇文章进行转换：

[查询作为整数持久存在的枚举属性不起作用](https://groups.google.com/forum/?fromgroups=#!topic/ravendb/GP73s4JSsn0)

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:06:15.503

我已经针对 RavenDB 2330 进行了测试，它按预期工作。

[在此处](https://gist.github.com/mj1856/5263362)查看通过的单元测试。

如果您有不同的做法，请更新您的问题。谢谢。

# drupal - Drupal：完全覆盖搜索功能，但使用 Drupal 的模板系统（来自模块）

> ID：15634897
> 
> 赞同：0
> 
> 时间：2013-03-26T10:36:01.693
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-theming

我正在编写一个自定义 Drupal 7 模块，它将完全覆盖网站的搜索页面和搜索方法。这是我到目前为止所拥有的：

```
/**
 * Custom search.
 */
function mymodule_search_page() {
  drupal_add_css('css/search.css');

  // Perform a search (not important how)
  $result = do_custom_search('foo');

  return '<p>Results:</p>';
} 
```

现在，如您所见，它并不完整。我不知道如何从中正确返回结构化 HTML。我将如何使用 Drupal 的内置模板系统来呈现结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:50:08.357

你必须使用drupal的内置函数。我希望你正在寻找这样的东西[http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_render/7](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_render/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:19:30.567

这就是我最终做的事情：

```
/**
 * Implements hook_menu().
 */
function mymodule_search_menu() {
  $items = array();
  $items['search'] = array('page callback' => 'mymodule_search_page',
                       'access callback' => TRUE);
  return $items;
}

/**
 * Mymodule search page callback.
 */
function mymodule_search_page() {
  $variables = array();

  // Add stuff to $variables.  This is the "context" of the file,
  // e.g. if you add "foo" => "bar", variable $foo will have value
  // "bar".
  ...

  // This works together with `mymodule_search_theme'.
  return theme('mymodule_search_foo', $variables);
}

/**
 * Idea stolen from: http://api.drupal.org/comment/26824#comment-26824
 *
 * This will use the template file custompage.tpl.php in the same
 * directory as this file.
 */
function mymodule_search_theme() {
  return array ('mymodule_search_foo' =>
                array('template' => 'custompage',
                      'arguments' => array()));
} 
```

希望这对某人有帮助！

# c# - 正确使用 在 C# 中输入泛型方法

> ID：15634898
> 
> 赞同：0
> 
> 时间：2013-03-26T10:36:11.190
> 
> 标签：c#, generics

所以我的真正方法有很大不同，但我归结为这一点。`<T>`当我使用泛型方法时，我似乎并不完全理解如何处理泛型类型。我的理解是，当我们希望相同的逻辑适用于不同的类型时，我们使用泛型方法，但我们希望在运行时自由地确定确切的类型。所以对我来说，当我有这样的方法时，这似乎很自然：

```
internal static void ChangeCode<T>(Entity entity) where T : Entity
{

    T tempEntity;

    if (entity.GetType() == typeof(SomeMoreSpecificEntity))
    {
      tempEntity = new SomeMoreSpecificEntity();
    }
} 
```

但是，如果我尝试这样的事情，我会得到一个错误`Can not convert type T to SomeMoreSpecificEntity`。

所以我错在哪里。能够做到这一点的想法不就是 - 在编译时声明一个通用类型并在运行时转换为更具体的类型吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T10:40:49.103

你不能那样做。检查以下情况：

你有另一个名为的类`SomeMoreSpecificEntity2`被声明：

```
class SomeMoreSpecificEntity2 : Entity
{
} 
```

你调用你的方法`ChangeCode<SomeMoreSpecificEntity2>`，所以`T`是`SomeMoreSpecificEntity2`，所以`tempEntity`也是`SomeMoreSpecificEntity2`，但你试图分配`SomeMoreSpecificEntity`给它。那是行不通的。

您可以尝试将其更改为：

```
internal static void ChangeCode<T>(Entity entity) where T : Entity
{
    Entity tempEntity;

    if (entity.GetType() == typeof(SomeMoreSpecificEntity))
    {
        tempEntity = new SomeMoreSpecificEntity();
    }
} 
```

它编译。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T10:40:06.883

不，您尝试编写的代码已损坏。例如，假设我打电话给：

```
ChangeCode<BananaEntity>(new SomeMoreSpecificEntity()); 
```

这将尝试将类型的引用分配给类型`SomeMoreSpecificEntity`的变量`T`，其中`T`is `BananaEntity`。

目前尚不清楚您要实现什么，但这就是您当前的代码无法编译的原因。鉴于您实际上并没有*将* `T`其他用途用于它不起作用的目的，因此可以更改当前代码以使其成为*非泛型*方法，并仅声明`tempEntity`为 type `Entity`。当然，这可能不适用于您真正想做的事情，但是由于您只提供了非工作代码，因此很难确定:(

关于这条线的三点：

```
if (entity.GetType() == typeof(SomeMoreSpecificEntity)) 
```

*   你真的是`entity`想成为 type`T`而不是 type`Entity`吗？目前它可以是*任何*实体
*   你真的想检查*确切的*类型吗？通常你会使用`is`而不是直接调用`GetType`它并将其与类型进行比较
*   通常比较像这样的类型表明您应该考虑重新设计。在这一点上它绝对不是*通用*的，因为它只处理其中硬编码的类型。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-26T10:44:43.793

```
tempEntity = (T)(object)new SomeMoreSpecificEntity(); 
```

T 只能与对象一起投射

# c# - 如何在 C# 中解析 JSON 对象

> ID：15634900
> 
> 赞同：5
> 
> 时间：2013-03-26T10:36:13.667
> 
> 标签：c#, asp.net-mvc, json.net

我正在关注 JSON 数据

```
[{"id":"1","text":"System Admin","target":{"jQuery1710835279177001846":12},"checked":true,"state":"open"},
{"id":"2","text":"HRMS","target":{"jQuery1710835279177001846":34},"checked":false,"state":"open"},
{"id":"3","text":"SDBMS","target":{"jQuery1710835279177001846":42},"checked":false},
{"id":"8","text":"Admin","target":{"jQuery1710835279177001846":43},"checked":false},
{"id":"9","text":"My test Admin","target":{"jQuery1710835279177001846":44},"checked":false,"state":"open"},
{"id":"24","text":"ModuleName","target":{"jQuery1710835279177001846":46},"checked":false,"state":"open"}] 
```

尝试使用强类型使用[Json.Net进行解析](http://json.codeplex.com/)

这是我的属性类

```
public class testclass
    {
        public string id { get; set; }
        public string text { get; set; }
        public string @checked { get; set; }
        public string state { get; set; }
        public target jQuery1710835279177001846 { get; set; }

    }
    public class testclass2
    {
        public List<testclass> testclass1 { get; set; }

    }

    public class target
    {
        public string jQuery1710835279177001846 { get; set; }
    } 
```

在这里我试图访问我得到异常的数据

```
Cannot deserialize the current JSON array (e.g. [1,2,3]) into type 'QuexstERP.Web.UI.Areas.SysAdmin.Controllers.testclass' because the type requires a JSON object (e.g. {"name":"value"}) to deserialize correctly. 
```

我的控制器代码看起来像

```
 public void Test(string Name, object modeldata)
        {

            var obj = JsonConvert.DeserializeObject<testclass>(Name);

        } 
```

知道如何在 C# 中解决这个问题

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T10:38:35.690

您的 Json 字符串看起来有序列化的数组对象，因为它包含`[ ]`. 这意味着您有一个 Json 字符串，该字符串是在数组对象序列化后形成的。所以你需要反序列化成数组对象，所以试试这个

```
var obj = JsonConvert.DeserializeObject<List<testclass>>(jsonString); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T10:37:30.853

你有一个TestClass数组。所以应该是这样的。

```
var model= JsonConvert.DeserializeObject<List<testclass>>(Name); 
```

你为什么使用 JSonConvert ？在 MVC3 中你可以这样做

```
return Json(yourmodel,JsonRequestBehavior.AllowGet); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T10:41:12.320

你的 json 对象是这样的

```
{
      "id":"1",
      "text":"System Admin",
      "target":{
         "jQuery1710835279177001846":12
      },
      "checked":true,
      "state":"open"
} 
```

我猜应该是这样的

```
{
      "id":"1",
      "text":"System Admin",
      "jQuery1710835279177001846":12,
      "checked":true,
      "state":"open"
} 
```

# php - 我可以在 PHP 代码中包含 C 文件吗？

> ID：15634901
> 
> 赞同：-1
> 
> 时间：2013-03-26T10:36:35.067
> 
> 标签：php

我想知道，当我在[这个存储库](https://github.com/mkoppanen/php-zbarcode/tree/master/tests)中时，测试用例包含一个包含`skipif.inc.php`这两行代码的文件：

```
if (!extension_loaded('zbarcode')) {
    die("Skip.");
} 
```

并且“zbarcodes”文件是一个`.C`文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:40:56.700

实际上，`zbarcode`是一个编译好的 PHP 扩展。也许它与该特定项目中的 .C 文件具有相同的名称，但`extension_loaded`不检查是否加载了 C 文件，仅当加载了编译的 PHP 扩展并准备好使用时。

所以你的问题的答案是：不，你不能。

编辑：很多 C 项目都有一个同名的 C 文件，其中存储了“主”例程，所以这就是混乱的来源。

您需要构建该项目（它在 windows 上变为 .dll，在 *nix 上变为 .so），然后通过 PHP ini 或[`dl()`](http://php.net/dl).

# html - html 5 中的图片标签元标记

> ID：15634903
> 
> 赞同：3
> 
> 时间：2013-03-26T10:36:37.467
> 
> 标签：html, metadata, meta-tags, w3c-validation

我正在用 html5 重建现有网站。标题中有一个`Pics-label` 元元素。

```
<meta http-equiv="Pics-label" content="(somecontent)" > 
```

当我通过[http://validator.w3.org/](http://validator.w3.org/)验证它时，它会出现以下错误。

```
Bad value Pics-label for attribute http-equiv on element meta. 
```

我搜索了互联网，但找不到任何有用的东西。请帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T10:56:10.300

忽略错误消息。这是验证器中的一个错误：它尚未更新以识别[注册表](http://wiki.whatwg.org/wiki/PragmaExtensions)中指定的值。针对 2013 年 3 月 1 日的[错误报告](http://bugzilla.validator.nu/show_bug.cgi?id=966)，此错误已得到确认，但尚未修复。

背景是，与以前的 HTML 版本不同，HTML5 将`<meta http-equiv=...>`元素的使用限制为特定的但可变的标题名称集。

# c++ - 停止与与推力一起使用的 odeint 集成

> ID：15634906
> 
> 赞同：4
> 
> 时间：2013-03-26T10:36:51.850
> 
> 标签：c++, thrust, differential-equations, odeint

我正在尝试将 ODE 系统与 odeint 库集成，并在一组点上并行推进（这意味着具有许多不同初始条件的相同 ODE）。特别是我正在使用自适应步长算法runge_kutta_dopri5。在某些情况下，算法会失败，从而减小步长并极大地减慢整个集成过程。

如果某些测试失败，有没有办法仅针对集合中的某些点停止集成过程？

在我的特殊情况下，由于我正在积分重力问题，我想在点靠近吸引子时停止积分，因此距离小于某个限制。

在串行计算中，我认为这可以通过带有函数的自定义 while 循环来执行，正如[这个问题](https://stackoverflow.com/a/14588283/1611927)`stepper.try_step`背后的想法或多或少所说明的那样。

如何在带推力的并行计算中执行此操作？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:07:41.583

如前所述，这个问题没有直接的解决方案。

一种可能的解决方案是提供一个

1.  报告 ODE 已停止的整数向量。因此，如果该向量的第 i 个元素为零，则意味着第 i 个 ODE 仍在运行。
2.  runge_kutta_dopri5 中的自定义错误检查器，如果当前系统已经停止，则将错误设置为 0。从而避免此错误影响步长控制机制，至少不会对步长控制产生负面影响。请参阅下面的草图，了解如何实现这一点
3.  检查集成是否停止的函数。这原则上可以放在观察者中。

自定义错误检查器的草图可以是（它是从 default_error_checker 复制的）：

```
class custom_error_checker
{
public:

    typedef double value_type;
    typedef thrust_algebra algebra_type;
    typedef thrust_operations operations_type;

    default_error_checker(
            const thrust::device_vector< int > &is_stopped ,
            value_type eps_abs = static_cast< value_type >( 1.0e-6 ) ,
            value_type eps_rel = static_cast< value_type >( 1.0e-6 ) ,
            value_type a_x = static_cast< value_type >( 1 ) ,
            value_type a_dxdt = static_cast< value_type >( 1 ) )
    : m_is_stopped( is_stopped ) ,
      m_eps_abs( eps_abs ) , m_eps_rel( eps_rel ) ,
      m_a_x( a_x ) , m_a_dxdt( a_dxdt )
    { }

    template< class State , class Deriv , class Err , class Time >
    value_type error( const State &x_old ,
                      const Deriv &dxdt_old ,
                      Err &x_err , Time dt ) const
    {
        return error( algebra_type() , x_old , dxdt_old , x_err , dt );
    }

    template< class State , class Deriv , class Err , class Time >
    value_type error( algebra_type &algebra ,
                      const State &x_old ,
                      const Deriv &dxdt_old ,
                      Err &x_err , Time dt ) const
    {
        // this overwrites x_err !
        algebra.for_each3( x_err , x_old , dxdt_old ,
            typename operations_type::template rel_error< value_type >(
                m_eps_abs , m_eps_rel , m_a_x ,
                m_a_dxdt * get_unit_value( dt ) ) );

        thrust::replace_if( x_err.begin() ,
                            x_err.end() ,
                            m_is_stopped.begin() ,
                            thrust::identity< double >()
                            0.0 );

        value_type res = algebra.reduce( x_err ,
                typename operations_type::template maximum< value_type >() ,
                    static_cast< value_type >( 0 ) );
        return res;
    }

private:

    thrust::device_vector< int > m_is_stopped;
    value_type m_eps_abs;
    value_type m_eps_rel;
    value_type m_a_x;
    value_type m_a_dxdt;
}; 
```

您可以通过以下方式在受控的 runge kutta 中使用这样的检查器

```
typedef runge_kutta_dopri5< double , state_type , double , state_type ,
    thrust_algebra , thrust_operation > stepper;
typedef controlled_runge_kutta< stepper ,
    custom_error_checker > controlled_stepper ;
typedef dense_output_runge_kutta< controlled_stepper > dense_output_stepper;

thrust::device_vector< int > is_stopped;
// initialize an is_finished
dense_output_stepper s(
    controlled_stepper(
        custom_controller( is_stopped , ... ))); 
```

最后，您需要一个函数来检查哪个 ODE 已经停止。让我们调用这个函数`check_finish_status`：

```
void check_finish_status(
    const state_type &x ,
    thrust::device_vector< int > &is_stopped ); 
```

您可以在观察者内部调用该函数，并且需要将 is_stopped 传递给观察者。

我们还有一个实验性的脏分支，其中步长控制直接在 GPU 上运行，并分别控制每个 ODE。这确实非常强大且高性能。不幸的是，此功能无法轻松集成到主分支中，因为`__device__ __host__`需要将许多说明符添加到 odeint 的方法中。如果您愿意，可以检查 odeint 存储库中的 cuda_controlled_stepper 分支和/或给我留言以获取更多说明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T19:33:08.003

我认为这是一个很难在具有推力的 GPU 上实现的问题。

我曾经做过类似的模拟，我必须整合同一系统的许多初始条件，但每次整合在不同数量的步骤后停止。不仅仅是轻微的变化，而是数量级，比如在 1000 到 10^6 步之间。我使用在 48 个内核上运行的 OpenMP 编写了一个并行化。对于 OpenMP 并行化，我所做的非常简单：每当一个初始条件完成时，下一个条件就会开始。只要轨迹的总数远大于并行线程，这是相当有效的。原则上，您也可以在 GPU 上以这种方式实现它。一旦一个轨迹完成，你就用一个新的初始条件替换它。当然，您必须做一些簿记，特别是如果您的系统依赖于时间。但总的来说，我认为这可能会奏效。

# android - 拖动布局后丢失“滚动”

> ID：15634907
> 
> 赞同：0
> 
> 时间：2013-03-26T10:36:53.813
> 
> 标签：android, android-layout

我已经实现了这段代码，它基本上允许用户在屏幕上移动布局（只是 Y 轴）：

```
public class MainActivity extends Activity implements View.OnTouchListener{
TextView _view;
private int _yDelta;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    _view = (TextView) findViewById(R.id.textView2);

    _view.setOnTouchListener(this);

}

public boolean onTouch(View view, MotionEvent event) {
    final int Y = (int) event.getRawY();
    view = (View) view.getParent();
    RelativeLayout.LayoutParams lParams = (RelativeLayout.LayoutParams) view.getLayoutParams();

    switch (event.getAction() & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN:
            _yDelta = Y - lParams.topMargin;
            break;
        case MotionEvent.ACTION_UP:
            break;
        case MotionEvent.ACTION_POINTER_DOWN:
            break;
        case MotionEvent.ACTION_POINTER_UP:
            break;
        case MotionEvent.ACTION_MOVE:
            if (Y - _yDelta < -230 || Y - _yDelta > 160){
              //to avoid view going out of screen
            } else {
                lParams.topMargin = Y - _yDelta;
            }

            lParams.bottomMargin = -250;
            view.setLayoutParams(lParams);
            break;
    }
    return true;
} 
```

}

这是我的xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/main"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="300px"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:src="@drawable/bg" />

<RelativeLayout
    android:id="@+id/draggableContent"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/imageView1"
    android:background="#ffffff" >

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="DRAGMEDRAGME DRAGME DRAGME DRAGME"
        android:textSize="25sp" />

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_below="@id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Lorem ipsum dolor sit amet, consectetur adipisicing elit, it amet, consectetur adipisicing elit, it amet, consectetur adipisicing elit, it amet, consectetur adipisicing elit, it amet, consectetur adipisicing elit, it amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt cillum dolore eu it amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt cillum dolore eu it amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt cillum dolore eu it amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt cillum dolore eu fugiat nulla pariaturcillum dolore eu fugiat nulla pariaturcillum dolore eu fugiat nulla pariaturcillum dolore eu fugiat nulla pariatur ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariaturcillum dolore eu fugiat nulla pariaturcillum dolore eu fugiat nulla pariaturcillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
                android:textSize="18sp" />

        </LinearLayout>
    </ScrollView>

</RelativeLayout> 
```

`textView1`如果我不拖动“标题”，则可以滚动。当我拖动标题时，整个布局（draggableContent - as `view.getParent()`）会四处移动。但是，当我尝试滚动该 lorem ipsum 时，它不再可滚动。

有没有什么办法解决这一问题？

我试图找到一些像“scrollable = true”这样的参数，但找不到。

谢谢。

**编辑** 我没有使用布局，而是将其全部替换为 WebView，并且完全一样；无需拖动，它的滚动就可以工作。拖动它后，滚动将不再起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:47:42.247

解决了。

就是这条线

```
lParams.bottomMargin = -250; 
```

我刚刚删除了它，它现在运行良好。

# ios - 自定义 TableViewCell 中的标签不能是多行或换行

> ID：15634908
> 
> 赞同：2
> 
> 时间：2013-03-26T10:36:55.570
> 
> 标签：ios, iphone, uitableview, cocoa-touch, uilabel

我试图使我的自定义`tableViewCell`类中的单元格成为多行并换行。我在这里阅读了我的问答并按照说明进行操作，但仍然找不到解决方案。

我可以调整每个内容长度的动态高度，但仍然无法制作这是我的代码

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   CustomItemCell *cell = [tableView dequeueReusableCellWithIdentifier:@"CustomItemCell"];
   if(cell == nil){
      cell = [[CustomItemCell alloc] initWithStyle:UITableViewCellStyleDefault   reuseIdentifier:@"CustomItemCell"];

      //I set lineBreakMode of cell.postLabel to NSLineBreakByWordWrapping 
      // and set numberofLines = 0 ; 
      cell.postLabel.lineBreakMode = NSLineBreakByWordWrapping;
      cell.postLabel.numberOfLines = 0;
    }
    CustomItem *item = [[channel items] objectAtIndex:[indexPath row]];
   //postLabel is the label that I want to be multiline and wordwrap  
   // postLabel get an NSString from [item post] 
   [[cell postLabel] setText:[item post]];

   [[cell timeLabel] setText:[item time]];
   [[cell distanceLabel] setText:[item distance]];
   [[cell thumbnailView] setImage:[item thumbnail]];

   return cell;
} 
```

我创建了`CustomItemCell.xib`文件。实际上，我还在界面生成器中将行设置为零并将换行符设置为自动换行，但它没有像我预期的那样显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T11:09:06.243

尝试这个，

```
[cell.postLabel sizeToFit]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T11:57:16.273

为多行设置单元格样式，如下所示，

```
cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier]; 
```

核实..

# windows - Windows RT 与 Windows 8

> ID：15634910
> 
> 赞同：1
> 
> 时间：2013-03-26T10:37:09.180
> 
> 标签：windows, windows-8, windows-rt

我是 Windows 编程新手。我有一个简单的问题要问你，但我不清楚。

用于平板电脑的 Windows 8 的 Windows RT 开发有什么不同？（语言 c#）是否可以编写一个应用程序 - 可以在两个系统中工作？

如果有一个阅读链接 - 会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:51:09.050

简短的回答：如果你在 C# 上，它没有任何区别。

有关更详细的解释，请参阅[此问题](https://stackoverflow.com/questions/12631363/windows-rt-and-c-sharp)。

# uri - 带有德语特殊字符的 URI 在 Zend Framework 2 中不起作用（错误 404）

> ID：15634913
> 
> 赞同：2
> 
> 时间：2013-03-26T10:37:17.723
> 
> 标签：uri, url-routing, zend-framework2, zend-framework-routing, url-helper

我想获取城市列表，其中每个城市名称都被链接并引用该城市的页面：

![在此处输入图像描述](../Images/e8d0e41b3209c58f31a019605adac38b.png)

链接（在视图脚本中创建）如下所示：

```
http://project.loc/catalog/Berlin (in the HTML source code url-encoded: Berlin)
http://project.loc/catalog/Erlangen (in the HTML source code url-encoded: Erlangen)
http://project.loc/catalog/Nürnberg (in the HTML source code url-encoded: N%C3%BCrnberg) 
```

“Berlin”、“Erlangen”等有效，但如果城市名称包含德语特殊字符（`ä`、`ö`、`ü`、`Ä`、`Ö`、`Ü`或`ß`），如“Nürnberg”，则会出现 404 错误：

> 发生 404 错误页面未找到。请求的 URL 无法通过路由匹配。没有可用的例外

为什么？以及如何让它发挥作用？

提前致谢！

编辑：

我的路由器设置：

```
'router' => array(
    'routes' => array(
        'catalog' => array(
            'type'  => 'literal',
            'options' => array(
                'route' => '/catalog',
                'defaults' => array(
                    'controller' => 'Catalog\Controller\Catalog',
                    'action'     => 'list-cities',
                ),
            ),
            'may_terminate' => true,
            'child_routes' => array(
                'city' => array(
                    'type'  => 'segment',
                    'options' => array(
                        'route' => '/:city',
                        'constraints' => array(
                            'city'  => '[a-zA-ZäöüÄÖÜß0-9_-]*',
                        ),
                        'defaults' => array(
                            'controller' => 'Catalog\Controller\Catalog',
                            'action'     => 'list-sports',
                        ),
                    ),
                    'may_terminate' => true,
                    'child_routes' => array(
                    // ...
                    ),
                ),
            ),
        ),
    ),
), 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T11:33:57.670

您需要更改约束，可以使用匹配 UTF8 字符的正则表达式，如下所示：

```
'/[\p{L}]+/u' 
```

注意 /u 修饰符（unicode）。

编辑：

问题[解决](https://stackoverflow.com/a/15660197/2019043)了。

解释：

RegEx Route 将 URI 与`preg_match(...)`（Zend\Mvc\Router\Http\Regex 的第[116](https://github.com/zendframework/zf2/blob/master/library/Zend/Mvc/Router/Http/Regex.php#L116)或[118行）匹配。](https://github.com/zendframework/zf2/blob/master/library/Zend/Mvc/Router/Http/Regex.php#L118)为了使用“特殊字符”（128+）来处理字符串，必须将模式修饰符传递`u`给`preg_match(...)`. 像这样：

```
$thisRegex = '/catalog/(?<city>[\p{L}]*)';
$regexStr = '(^' . $thisRegex . '$)u'; // <-- here
$path = '/catalog/Nürnberg';
$matches = array();
preg_match($regexStr, $path, $matches); 
```

并且由于 RegEx Route 将一个 url 编码的字符串传递给`preg_match(...)`，因此需要先对字符串进行解码：

```
$thisRegex = '/catalog/(?<city>[\p{L}]*)';
$regexStr = '(^' . $thisRegex . '$)u';
$path = rawurldecode('/catalog/N%C3%BCrnberg');
$matches = array();
preg_match($regexStr, $path, $matches); 
```

RegEx Route 中没有提供这两个步骤，因此`preg_match(...)`得到一个类似的 steing`'/catalog/N%C3%BCrnberg'`并尝试将其加工成一个类似的正则表达式`'/catalog/(?<city>[\\p{L}]*)/u'`

**解决方案**是使用自定义 RegEx 路由。[这](https://stackoverflow.com/a/15660197/2019043)是一个例子。

# javascript - 是否有一种 lo-dash 方法来检查两个对象是否共享指定的键？

> ID：15634915
> 
> 赞同：2
> 
> 时间：2013-03-26T10:37:23.277
> 
> 标签：javascript, lodash

我有两个对象 A 和 B。我想知道它们是否共享键 x 和 y。

我写了这个：

```
function sharesKeys(keys, objA, objB) {
    return _.every(keys, function (key) {
        return key in objA && key in objB;
    });
} 
```

被称为：

```
if (sharesKeys(['x', 'y'], cellA, cellB)) { ... 
```

但想知道我是否缺少直接执行此操作的 lo-dash 方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-22T00:09:31.417

正如@Bergi 已经说过的那样，你可以这样做，因为 Lo-Dash 中没有这样的功能。

作为建议，您可以测试 N 个对象是否共享该键，而不仅仅是 2 个！

# android - 查找 DDMS 的 Android ADT 错误

> ID：15634917
> 
> 赞同：0
> 
> 时间：2013-03-26T10:37:29.307
> 
> 标签：android, adt, ddms

我下载了最新的 ADT 开始学习如何做一些 Android 开发（我之前尝试过，但没有走得太远）。因此，在遵循 Google 说要做的事情列表之后，我现在在我的应用程序项目中收到以下错误，但我不知道为什么。

```
eclipse.buildId=v21.1.0-569685
java.version=1.7.0_09
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_GB
Framework arguments:  -product com.android.ide.eclipse.adt.package.product
Command-line arguments:  -os win32 -ws win32 -arch x86_64 -product com.android.ide.eclipse.adt.package.product

Error
Mon Mar 25 15:38:30 GMT 2013
Failed to load properties file for project 'MyFirstApp' 
```

&

```
eclipse.buildId=v21.1.0-569685
java.version=1.7.0_09
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_GB
Framework arguments:  -product com.android.ide.eclipse.adt.package.product
Command-line arguments:  -os win32 -ws win32 -arch x86_64 -product com.android.ide.eclipse.adt.package.product

Error
Mon Mar 25 15:37:56 GMT 2013
DDMS files not found: D:\Users\Matt\Documents\Android\eclipse\platform-tools\adb.exe
D:\Users\Matt\Documents\Android\eclipse\tools\hprof-conv.exe 
D:\Users\Matt\Documents\Android\eclipse\tools\traceview.bat 
```

由于我对这一切还很陌生，所以我不知道问题是什么，我原以为只需下载 ADT 并遵循指南就足以让我弄清楚如何开始开发，但显然甚至不能通过第一阶段。我相信这个错误也是我无法让我的应用程序加载到 Android 模拟器的原因。

# android - 使用 SQLite 将电子邮件插入表中

> ID：15634920
> 
> 赞同：1
> 
> 时间：2013-03-26T10:37:32.183
> 
> 标签：android, android-sqlite

我正在尝试将一些数据插入表中，但我在行中 收到异常**java.lang.NullPointerException**

> ih.bind(coldesc,消息);

. 我不知道问题是我的 databaHelper 还是我的方法。

这是我的 retrieveEmails 方法，用于从 GMAIL 中提取所有电子邮件，并将非多部分电子邮件插入到可以完美运行的表中，直到`ih.bind(coldesc,message);`：

```
public void retrieveEmails(){
    Properties props = new Properties();
    props.put("mail.pop3.host" , "pop.gmail.com");
    props.put("mail.pop3.user" , username);
    // Start SSL connection
    props.put("mail.pop3.socketFactory" , 995 );
    props.put("mail.pop3.socketFactory.class" , "javax.net.ssl.SSLSocketFactory" );
    props.put("mail.pop3.port" , 995);

    Session session = Session.getDefaultInstance(props , new Authenticator() {
        @Override
                protected PasswordAuthentication getPasswordAuthentication() {
                    return new PasswordAuthentication( username , password);
                }
    });
    try {
        Store store  = session.getStore("pop3");
        store.connect("pop.gmail.com", 995 , username , password);
        Folder fldr = store.getFolder("Inbox");
        fldr.open(Folder.HOLDS_MESSAGES);

        int totalMsg = fldr.getMessageCount();
        int unread = fldr.getUnreadMessageCount();
        System.out.println("Total MSG: " + totalMsg + " unreaed: " + unread  );

        Message[] messages = fldr.getMessages();
        //Message[] msg = fldr.search(new FlagTerm(new Flags(Flag.SEEN), false));
        Message[] msg = messages;

        System.out.print("size " + messages .length);
        if (messages.length == 0) System.out.println("No messages found.");

        DatabaseHelper dbHelper = DatabaseHelper.getHelper(getApplicationContext());
        db = dbHelper.getWritableDatabase();
        db.beginTransaction();

        for (int i = 0; i < messages.length; i++) {

            System.out.println("Subject : " + messages[i].getSubject());

            if(messages[i].getSubject().contains("Order")){
                System.out.println("Message " + (i + 1));
                System.out.println("From : " + messages[i].getFrom()[0]);
                System.out.println("Subject : " + messages[i].getSubject());
                Object content = messages[i].getContent();

                Object objRef = msg[i].getContent();
                if (!(objRef instanceof Multipart)) {
                   String message =((String)content).replace("<br />", "").replace("<strong>", "").replace("</strong>", "").replace("<div>", "").replace("<h1>", "");
                   message = message.replace("</div>", "").replace("</h1>", "");
                   System.out.print(message);  

                   InsertHelper ih = null;
                    try {
                        ih = new InsertHelper(db, DatabaseHelper.table);
                        final int coldesc = ih.getColumnIndex(DatabaseHelper.column);
                        ih.bind(coldesc,message);
                        ih.execute();

                         db.setTransactionSuccessful();
                         Log.e("","Inserted");
                    } catch (Exception e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } finally {
                        if (ih != null)
                            ih.close();
                        if (db != null) {
                            db.endTransaction();
                            // db.close();
                        }
                    }

                   //return;
                }
                else{
                    Multipart multipart = (Multipart) objRef;

                    //Multipart multipart = (Multipart) msg[i].getContent();

                    for (int x = 0; x < multipart.getCount()-1; x++) {
                        BodyPart bodyPart = multipart.getBodyPart(x);

                        String disposition = bodyPart.getDisposition();

                        if (disposition != null && (disposition.equals(BodyPart.ATTACHMENT))) {
                            System.out.println("Mail have some attachment : ");

                            DataHandler handler = bodyPart.getDataHandler();
                            System.out.println("file name : " + handler.getName());
                        } else {
                            System.out.println(bodyPart.getContent());
                    }
                }
                }
            }
        }

        fldr.close(true);
        store.close();

        Log.d("Store", "Store was closed");

    } catch(Exception exc) {
        Log.e("",exc.toString());
    }

} 
```

这是我的数据库助手类：

```
public class DatabaseHelper extends SQLiteOpenHelper {

  public static final String table = "tblorder";
  public static final String column = "description";

  private static final String DATABASE_NAME = "commments.db";
  private static final int DATABASE_VERSION = 1;

  private static DatabaseHelper instance;

  // Database creation sql statement
  private static final String DATABASE_CREATE = "create table "
      + table + "("+ column
      + "  nvarchar(20) NULL);";

  public DatabaseHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
  }

  @Override
  public void onCreate(SQLiteDatabase database) {
    database.execSQL(DATABASE_CREATE);
  }

  @Override
  public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    Log.w(DatabaseHelper.class.getName(),
        "Upgrading database from version " + oldVersion + " to "
            + newVersion + ", which will destroy all old data");
    db.execSQL("DROP TABLE IF EXISTS " + table);
    onCreate(db);
  }

    public static synchronized DatabaseHelper getHelper(Context context) {

        if (instance == null)
            instance = new DatabaseHelper(context);
            return instance;

    }

} 
```

这是堆栈跟踪：

```
 03-26 10:20:39.200: W/System.err(17132): java.lang.NullPointerException
    03-26 10:20:39.210: W/System.err(17132):    at android.database.DatabaseUtils$InsertHelper.bind(DatabaseUtils.java:1166)
    03-26 10:20:39.210: W/System.err(17132):    at com.example.gmailreceiver.MainActivity.retrieveEmails(MainActivity.java:247)
    03-26 10:20:39.220: W/System.err(17132):    at com.example.gmailreceiver.MainActivity$2.onClick(MainActivity.java:176)
    03-26 10:20:39.225: W/System.err(17132):    at android.view.View.performClick(View.java:3660)
    03-26 10:20:39.230: W/System.err(17132):    at android.view.View$PerformClick.run(View.java:14398)
    03-26 10:20:39.235: W/System.err(17132):    at android.os.Handler.handleCallback(Handler.java:605)
    03-26 10:20:39.240: W/System.err(17132):    at android.os.Handler.dispatchMessage(Handler.java:92)
    03-26 10:20:39.245: W/System.err(17132):    at android.os.Looper.loop(Looper.java:137)
    03-26 10:20:39.250: W/System.err(17132):    at android.app.ActivityThread.main(ActivityThread.java:4517)
    03-26 10:20:39.255: W/System.err(17132):    at java.lang.reflect.Method.invokeNative(Native Method)
    03-26 10:20:39.255: W/System.err(17132):    at java.lang.reflect.Method.invoke(Method.java:511)
    03-26 10:20:39.255: W/System.err(17132):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:995)
    03-26 10:20:39.260: W/System.err(17132):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:762)
    03-26 10:20:39.260: W/System.err(17132):    at dalvik.system.NativeStart.main(Native Method) 
```

# android - 如何在android中的纬度和经度

> ID：15634921
> 
> 赞同：0
> 
> 时间：2013-03-26T10:37:39.927
> 
> 标签：android, android-activity, locationmanager

我开发了简单的应用程序来显示 android 中的纬度和经度......但它显示空指针异常......请让我知道错误是什么......

我的活动课

```
import android.app.Activity;
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.widget.Toast;

public class SignalStrengthActivity extends Activity implements LocationListener{

    private LocationManager  locationManager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    }

    @Override
    protected void onResume() {
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 1, this);
        super.onResume();
    }

    @Override
    protected void onPause() {
        locationManager.removeUpdates(this);
        super.onPause();
    }

    @Override
    public void onLocationChanged(Location location) {
         if (location != null) {
                Toast.makeText(this, "Latitude and Longitude " + location.getLatitude() + " " + 
                        location.getLongitude(), Toast.LENGTH_SHORT).show();
            }

    }

    @Override
    public void onProviderDisabled(String provider) {

         Toast.makeText(this, "Latitude and Longitude Offline ", Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onProviderEnabled(String provider) {

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {

    }
} 
```

我的清单文件：-

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.latitudelongitude"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.latitudelongitude.SignalStrengthActivity"
            android:configChanges="orientation|keyboardHidden|screenSize"
            android:label="@string/app_name"
            android:theme="@style/FullscreenTheme" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

当我执行应用程序时，它不显示任何内容..表明位置对象为空...请让我知道如何解决问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:37:17.507

浏览以下链接：

[链接 1](http://www.vogella.com/articles/AndroidLocationAPI/article.html)

# google-maps-api-3 - 谷歌方向api没有响应

> ID：15634925
> 
> 赞同：1
> 
> 时间：2013-03-26T10:37:49.140
> 
> 标签：google-maps-api-3, google-directions-api

我正在使用谷歌方向 api 来获取两个地方之间的方向/路线。

当我查询

> [http://maps.googleapis.com/maps/api/directions/json?origin=New%20York%20LaGuardia%20Airport%20Marriott,%20Queens,%20NY,%20United%20States&destination=200%20e%2057th%20st%20ny&sensor =假](http://maps.googleapis.com/maps/api/directions/json?origin=New%20York%20LaGuardia%20Airport%20Marriott,%20Queens,%20NY,%20United%20States&destination=200%20e%2057th%20st%20ny&sensor=false)

我得到状态 = NOT_FOUND。

但是，当我使用[https://maps.google.com/搜索从](https://maps.google.com/)**美国纽约皇后区纽约拉瓜迪亚机场万豪酒店**到**200 e 57th st ny**的这条路径时。谷歌显示这两个地方之间的方向路径。你可以通过链接看到这个：[link](https://maps.google.com/maps?saddr=New%20York%20LaGuardia%20Airport%20Marriott,%20Queens,%20NY,%20United%20States&daddr=200%20e%2057th%20st%20ny%20ny&hl=en&ll=40.773392,-73.884945&spn=0.069419,0.131664&sll=40.76858,-73.86776&sspn=0.001085,0.002057&geocode=FSIVbgIdTd-Y-yFK-Kbg2ID1zylL28wekF_CiTFK-Kbg2ID1zw;FdPybQIdUVqX-ynfbUYx5FjCiTFQ1lgZbCZrpw&mra=ls&t=m&z=13&iwloc=ddw0)

我应该怎么做才能从 google api 获得响应。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:54:15.603

Google Maps 使用许多位置数据来源，包括 Places 结果。在我看来，路线服务找不到“美国纽约州皇后区纽约拉瓜迪亚机场万豪酒店”（因为它不是地址）。如果我使用 Places API，那可以找到它。

[使用 javascript API 的示例](http://www.geocodezip.com/v3_example_geo2.asp?addr1=New%20York%20LaGuardia%20Airport%20Marriott,%20Queens,%20NY,%20United%20States&addr2=200%20e%2057th%20st%20ny&place=1&geocode=2)

# sync - 同步框架不更新现有行但上传新添加的行

> ID：15634928
> 
> 赞同：1
> 
> 时间：2013-03-26T10:37:54.903
> 
> 标签：sync, microsoft-sync-framework

我正在使用同步框架将数据从本地（本地）数据库同步到 azure 数据库。我也处理了冲突，但是在它完全运行后不会上传现有行中的新更改，而是插入新添加的行。任何人都可以建议我为什么它不更新现有行。或者是否有任何替代解决方案用于同步

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-27T22:54:16.283

情况是Sync Framework，当发现冲突时，不知道该怎么办。冲突就像您的情况一样，同一行在本地和远程之间具有不同的值。

在这种情况下，您需要编写自己的 ApplyChangeFailed 方法。在本文档中涵盖：http: [//msdn.microsoft.com/en-us/library/cc761628.aspx](http://msdn.microsoft.com/en-us/library/cc761628.aspx)

# android - 在 UIAutomatorTesting 中添加 javadoc 文件

> ID：15634929
> 
> 赞同：0
> 
> 时间：2013-03-26T10:37:57.017
> 
> 标签：android, javadoc, android-uiautomator

谁能告诉我如何从哪里可以找到用于 UIAutomator 测试文件的 javadoc.jar，以便我可以将其添加到 uiautomator.jar。我已经在网上搜索但我无法搜索 javadoc.jar 文件？请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:21:22.297

javadoc 似乎并不容易获得。有进取心的人问 Android 人如何构建相关代码来生成 javadocs：

请参阅[https://groups.google.com/forum/?fromgroups=#!topic/android-building/TOUKcGT2_vI](https://groups.google.com/forum/?fromgroups=#!topic/android-building/TOUKcGT2_vI) “喜欢将 uiautomator.jar 构建为源代码或 javadoc jar”

# c++ - 如何在托管 C++ 中使用手写的 getter/setter 定义属性？

> ID：15634932
> 
> 赞同：1
> 
> 时间：2013-03-26T10:38:03.773
> 
> 标签：c++, .net, visual-c++, syntax, properties

我需要在托管 C++ 项目中使用手写的 getter/setter 定义属性，该类可以从 C# .NET 项目中使用。

*   关于该主题的[codeproject 文章](http://www.codeproject.com/Articles/1050/Using-properties-in-managed-C)建议使用`__property float Volume;`已过时且现在归类为`/crl:oldSyntax`.

*   [Open Standard managed extensions to C++ 文章](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2004/n1600.html)说定义属性，如自动`property float Volume;`生成支持字段，我不想要或不需要。

*   简单地定义像`property float Volume;`compiles这样的属性`/clr`，但是尝试添加像`float Mixer::Volume::get(){ .. }`throw这样的手写 getter/setter `Error C2084: function X already has a body`。

那么，在没有支持字段的情况下，以及使用定制的手写 getter/setter 方法来定义只读或读/写属性的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T11:36:03.580

您自己找到了仅标题版本。如果你想在一个cpp文件中实现getter和setter，语法如下：

```
///////////////////////
// Foo.h:
///////////////////////
ref struct Foo
{ 
    property float Volume
    {
        float get();
        private: void set(float value);
    }
private:
    float m_backingField;
}

///////////////////////
// Foo.cpp:
///////////////////////
float Foo::Volume::get()
{
    return m_backingField;
}

void Foo::Volume::set(float value)
{
    m_backingField = value;
} 
```

**编辑：一些附加信息**：

*   您可以为 getter 和 setter 指定不同的访问修饰符。我修改了源代码以使设置器私有。**请注意，与 C# 不同，如果您使用自动生成后备存储，这是不可能的。**
*   以前称为“C++ 的托管扩展”，现在（从 Visual Studio 2005 开始）称为 C++/CLI。这不仅是更名，而且是全新的修订。双下划线`__property`关键字来自托管扩展，现已弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T11:07:46.180

好吧，我发现您必须在头文件中仅声明一次属性，如下所示：

```
property float Volume {
    float get() {
        return 0;
    }
    void set(float value) {
    }
} 
```

如果您像下面这样声明属性，则会自动生成一个支持字段：

```
property float Volume; 
```

# css - 动画在盒子里不起作用

> ID：15634933
> 
> 赞同：0
> 
> 时间：2013-03-26T10:38:05.523
> 
> 标签：css, animation

问题是关于 CSS3`-webkit-keyframes`和`-webkit-box-align`属性的。

请访问[http://codepen.io/pleasureswx123/pen/fljFH](http://codepen.io/pleasureswx123/pen/fljFH)以获取更多详细信息。

```
/* css code */   
<style>
    .box {
        display:-webkit-box;
        width:200px;
        height:200px;
        border:1px solid lightblue;
        margin:0 auto;`enter code here`
        -webkit-box-align:end;
        -webkit-box-pack:center;
    }
    .inner {
        background:red;
        width:50%;
    }
    .box:hover {
        -webkit-animation:boxalign ease-in 1s infinite;
    }
    /*following don't work*/
    @-webkit-keyframes boxalign {
        0%   { -webkit-box-align : end }
        100% { -webkit-box-align : start }
    }
    </style>
   /* html code */   
    <div class="box">
       <div class="inner">safd</div>
    </div> 
```

CSS3是否`-webkit-keyframes`支持该`-webkit-box-align`属性？为什么我的演示没有变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:46:11.423

检查这个：[https ://developer.mozilla.org/en-US/docs/CSS/box-align](https://developer.mozilla.org/en-US/docs/CSS/box-align)

在本页末尾，您会看到“浏览器兼容性”，并且 chrome 不支持框对齐。

# java - Java JTDS 到 SQL Server 2000

> ID：15634935
> 
> 赞同：1
> 
> 时间：2013-03-26T10:38:06.393
> 
> 标签：java, sql, jtds

我有一个使用 JTDS 连接到 sql server 的方法

```
String url = "jdbc:jtds:sqlserver://192.168.12.123;instance=server-e61t7rvb;DatabaseName=test";
     String driver = "net.sourceforge.jtds.jdbc.Driver";
    String userName = "sa";
    String password = "hello";

                Class.forName(driver);
        conn = DriverManager.getConnection(url, userName, password);
        System.out.println("Connected to the database!!! Getting table list...");
        DatabaseMetaData dbm = conn.getMetaData();
        rs = dbm.getTables(null, null, "%", new String[] { "TABLE" });
        while (rs.next())  System.out.println(rs.getString("TABLE_NAME")); 
```

使用它我可以很好地连接到 SQL 2008，但是当我将它更改为 SQL 2000 服务器时，我得到“服务器没有名为的实例”作为我正在运行的实例名称

```
select @@servername 
```

请注意，我可以使用实例名称从我的计算机使用 sql management studio 登录服务器。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:36:25.403

删除了实例参数，它工作正常

# sql - 基于字段值的乘法重复行

> ID：15634936
> 
> 赞同：0
> 
> 时间：2013-03-26T10:38:07.053
> 
> 标签：sql, sql-server-2008, repeat

我正在尝试根据表中的一列中的值生成多行。我需要行数是列中数据值的三倍。目前我有它，所以它根据列中的值重复行数，但我不知道如何让它产生列中值的三倍。这是我的代码：

```
WITH tmp as (SELECT 1 as rn UNION ALL SELECT rn+1 from tmp WHERE rn<=1000)

    SELECT 
    [SURNAME],
    [NAME],
    [AGE],
    [PAYMENT DAYS PER/WK]

    FROM 
    [PublishedReporting].[dbo].[Sheet1$]
    LEFT JOIN (SELECT * FROM tmp WHERE rn<=50) as 
                                    rowgen on [PAYMENT DAYS PER/WK] >= rowgen.rn

    WHERE
    [PAYMENT DAYS PER/WK] IS NOT NULL

    ORDER BY
    SURNAME,
    NAME

    option (maxrecursion 32767); 
```

这是我的结果示例：所以这里显示了露西亚当斯的 3 行，但我需要它显示 9 ![](../Images/8f66f0821582df50fab3d1ed12234008.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:47:25.100

```
select * from  [PublishedReporting].[dbo].[Sheet1$]  
union all
select * from  [PublishedReporting].[dbo].[Sheet1$]  
union all
select * from  [PublishedReporting].[dbo].[Sheet1$]
order by 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:04:18.863

作为说明，有一种替代方法通常不需要扫描表三次：

```
select t.*
from  [PublishedReporting].[dbo].[Sheet1$] t cross join
      (select 1 as n union all select 2 union all select 3) rows3 
```

# php - 使用动态下拉列表从 MySQL 数据库加载 textarea 中的数据

> ID：15634939
> 
> 赞同：0
> 
> 时间：2013-03-26T10:38:21.507
> 
> 标签：php, mysql

好吧，为了让一切都清楚，我会尽可能清楚地解释一切，并包括图像。像这样的问题可能会很长，但我只是想让一切都清楚。

好吧，我现在有一个“文本框”（TinyMCE AJAX 文件管理器），它显示来自文本文件的 html，如下所示：

![在此处输入图像描述](../Images/438c0052a3a132302d7b724fc1b2caf9.png) 这是此 atm 的代码：

```
Bericht:</td><td align="left"><textarea name="content" cols="50" rows="15"><?php echo "$show"?></textarea></td></tr> 
```

和：

```
<?php
if (file_exists("prwyswig.txt")){
$show = file_get_contents('prwysiwyg.txt');
}
else{
$show = file_get_contents('tabel.txt');
}
?> 
```

我想要的是不再使用文本文件，但我想选择存储在 MySQL 数据库中的 html 代码。我制作了一个动态下拉列表，其中包含“时事通讯”的名称。

所以我想要的是从下拉列表中选择一个时事通讯，然后将属于该标题的 html 加载到 textarea 中。我自己尝试了几件事，但我就是不知道如何管理它。

我是否必须编写另一个查询？我是否必须将 dorpdown 列表放在另一种形式中才能使用提交按钮将数据加载到 textarea 中？

我将在下面发布其余代码和我的数据库表结构，因为您可能需要它们^^ 如果您有任何其他问题，请在评论中提出，任何帮助都会很棒！

***注意：*** 我知道我不应该使用 mysql_* 但这不是这里的问题。稍后我将更改为 PDO！

连接到 DB+query 以选择正确的数据：

```
<?php
mysql_connect('localhost','root','root');
mysql_select_db('NAW') or die (mysql_error());
$strSQL     = "SELECT Content, Titel FROM NAW.Mail";
$sql_result     = mysql_query($strSQL);
?> 
```

动态下拉列表：

```
<td valign=top>Nieuwsbrief:</td>
<td>
<?php
echo "<select name=\"show\">"; 
echo "<option size =30 selected>Select</option>";
if(mysql_num_rows($sql_result)) 
{ 
while($row = mysql_fetch_assoc($sql_result)) 
{ 
echo "<option>$row[Titel]</option>"; 
} 

} 
else {
echo "<option>No Names Present</option>";  
} 
?> 
```

数据库表：

```
ID  Content                 Datum       Titel
1  (lots of encoded html)   18-03-13    test
2  (lots of encoded html)   18-03-13    test2
4  (lots of encoded html)   18-03-13    alles weer testen
5  (lots of encoded html)   20-03-13    testje
6  (lots of encoded html)   21-03-13    Statusupdate week 6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:11:00.807

您可以按如下方式进行，您的表单的 HTML 和 PHP 代码将是这样的。

```
<?php
mysql_connect('localhost','root','root');
mysql_select_db('NAW') or die (mysql_error());
$strSQL     = "SELECT Titel FROM NAW.Mail";
$sql_result     = mysql_query($strSQL);
?>

    <form id="myform">
        <td valign=top>Nieuwsbrief:</td>
        <td>
        <?php
        echo "<select id=\"NieuwsbriefSelect\" name=\"show\">"; 
        echo "<option size =30 selected>Select</option>";
        if(mysql_num_rows($sql_result)) 
        { 
        while($row = mysql_fetch_assoc($sql_result)) 
        { 
        echo "<option value=\"$row[Titel]\">$row[Titel]</option>"; 
        } 

        } 
        else {
        echo "<option>No Names Present</option>";  
        } 
        ?>

    Bericht:</td><td align="left"><textarea name="content" cols="50" rows="15"></textarea></td></tr>

</form> 
```

使用 JQuery 为这样的添加`onChange`事件`<Select>`

```
<script>
// variable to hold request
var request;
$(document).ready(function() {

$('#NieuwsbriefSelect').change(function() {
  //send Ajax call to get new contents
  var selected_text = $(this).val();
  // setup some local variables
  var $form = $("#myform");
  // let's select and cache all the fields
  var $inputs = $form.find("input, select, button, textarea");
  // serialize the data in the form
  var serializedData = $form.serialize();

  // fire off the request to /get_my_contents.php
  request = $.ajax({
    url: "/get_my_contents.php",
    type: "post",
    data: serializedData
   });

   // callback handler that will be called on success
   request.done(function (response, textStatus, jqXHR){
    //populate the TextArea
    $("textarea[name='content']").html(response);
   });

});

});
</script> 
```

最后你的**get_my_contents.php**会是这样的

```
<?php
$title = $_POST["show"];
mysql_connect('localhost','root','root');
mysql_select_db('NAW') or die (mysql_error());
$strSQL     = "SELECT Content from NAW.Mail where Titel = '$title' ";
$sql_result     = mysql_query($strSQL);

$row = mysql_fetch_assoc($sql_result)
print $row["Content"];
?> 
```

希望它能解决您的问题。

**编辑** 你可以试试这个小提琴（只是客户端代码，Ajax 不起作用） [http://jsfiddle.net/jjWdF/](http://jsfiddle.net/jjWdF/)

# sql - PL/SQL - 从另一个表调用属性 - 未定义的操作

> ID：15634941
> 
> 赞同：0
> 
> 时间：2013-03-26T10:38:23.607
> 
> 标签：sql, oracle, plsql

我正在尝试执行以下查询。我认为应该可以工作，但是我似乎没有运行`CREATE Statement`

造成这种情况的原因是`Loco_No.Loco_Class_No.Max_Tow_Weight`我不确定在 PL/SQL 中是否有效的这条逻辑。

```
CREATE TABLE Train
  (Train_No integer PRIMARY KEY,
   Loco_No integer
     REFERENCES Locomotive(Loco_No),
   Back_Loco_No float
     REFERENCES Locomotive(Loco_No),
   Train_Length float
     CONSTRAINT Train_Len
       CHECK(Train_Length <= 400),
   Train_Weight float
     CONSTRAINT Train_Weight
       CHECK(Train_Weight <= Loco_No.Loco_Class_No.Max_Tow_Weight))); 
```

我不能这样称呼我`Max_Tow_Weight`吗？

我的其他表格供参考

```
CREATE TABLE Locomotive
 (Loco_No integer PRIMARY KEY,
  Serial_No integer UNIQUE,
  Loco_Class_No integer
    REFERENCES Locomotive_Class(Loco_Class_No),
  Loco_name varchar2(20));

CREATE TABLE Locomotive_Class
 (Loco_Class_No integer PRIMARY KEY,
  Max_Tow_Weight float NOT NULL,
  Loco_Class_Len float NOT NULL); 
```

**更新**

```
CREATE TRIGGER LOCOWEIGHT 
BEFORE INSERT
ON Locomotive_Class
REFERENCING NEW AS New
FOR EACH ROW
   BEGIN
      SELECT Train_Weight FROM locomotive
   IF (Train_Weight < MAX_TOW_WEIGHT) THEN
       RAISE cError;    
EXCEPTION
WHEN cError THEN
      RAISE_APPLICATION_EXCEPTION('Train weight has exceeded max tow weight');
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:04:32.273

CHECK 约束只能引用定义它们的表中的列。内联 CHECK 约束进一步限制为仅引用定义约束的列，而外联 CHECK 约束可以引用正在定义的表中的多个列。禁止所有 CHECK 约束包含以下任何内容：

*   子查询和标量子查询表达式

*   对非确定性函数的调用（CURRENT_DATE、CURRENT_TIMESTAMP、DBTIMEZONE、LOCALTIMESTAMP、SESSIONTIMEZONE、SYSDATE、SYSTIMESTAMP、UID、USER 和 USERENV）

*   调用用户定义的函数

*   REF 列的取消引用（例如，使用 DEREF 函数）

*   嵌套表列或属性

*   伪列 CURRVAL、NEXTVAL、LEVEL 或 ROWNUM

*   未完全指定的日期常量

[参考这里](http://docs.oracle.com/cd/B28359_01/server.111/b28286/clauses002.htm#CJAEDFIB)。

在我看来，您的 LOCO.LOCO_CLASS.MAX_TOW_WEIGHT 构造是指一个表（LOCO），然后是另一个表（LOCO_CLASS），然后是第二个表的列（MAX_TOW_WEIGHT）。这种语法不正确，而且我真的看不到直接获取您尝试引用的数据的方法。在这种情况下，我认为触发器（可能在插入或更新之前）可能有助于确定是否满足此条件。在此触发器中，您需要执行 SELECT 以获取 LOCO_CLASS 的 MAX_TOW_WEIGHT，然后将该重量与 TRAIN_WEIGHT 进行比较。如果比较失败（即 TRAIN_WEIGHT > MAX_TOW_WEIGHT），则代码将需要引发用户定义的异常，需要编写执行 INSERT 或 UPDATE 的代码来处理该异常。

分享和享受。

# javascript - 在两个视图之间移动文档

> ID：15634946
> 
> 赞同：0
> 
> 时间：2013-03-26T10:38:41.053
> 
> 标签：javascript, xpages, lotus-notes, lotus-domino

我创建了一个包含一些文档的视图。我希望能够单击特定文档旁边的复选框并将它们移动到另一个视图（或以某种方式将它们显示在另一个页面上）并再次返回。所以基本上我希望能够存档文档，然后转到我发送这些文档的页面并将它们从存档中删除，回到文档最初所在的视图。

到目前为止我有（这是我在 xpage 上的视图表，我的文档旁边有一个复选框）

```
<xp:viewPanel rows="10" id="viewPanel2" viewStyle="width:700.0px">
    <xp:this.facets>
        <xp:pager partialRefresh="true" layout="Previous Group Next"
            xp:key="headerPager" id="pager2">
        </xp:pager>
    </xp:this.facets>
    <xp:this.data>
        <xp:dominoView var="allDocsView" viewName="profilesAllDocs">
        </xp:dominoView>
    </xp:this.data>
    <xp:viewColumn columnName="LastActivationDate" id="viewColumn6"
        style="font-size:12pt" showCheckbox="true">
        <xp:viewColumnHeader value="Last Activation Date"
            id="viewColumnHeader6" sortable="true" style="font-size:12pt">
        </xp:viewColumnHeader>
    </xp:viewColumn>
    <xp:viewColumn columnName="LoggerID" id="viewColumn7"
        displayAs="link" openDocAsReadonly="true" style="font-size:12pt">
        <xp:this.converter>
            <xp:convertNumber type="number" integerOnly="true">
            </xp:convertNumber>
        </xp:this.converter>
        <xp:viewColumnHeader value="Logger ID" id="viewColumnHeader7"
            style="font-size:12pt">
        </xp:viewColumnHeader>
    </xp:viewColumn>
    <xp:viewColumn columnName="ExpectedArrivalDate" id="viewColumn8"
        style="font-size:12pt">
        <xp:viewColumnHeader value="Expected Arrival Date"
            id="viewColumnHeader8" style="font-size:12pt">
        </xp:viewColumnHeader>
    </xp:viewColumn>
    <xp:viewColumn columnName="Status" id="viewColumn9"
        style="font-size:12pt">
        <xp:viewColumnHeader value="Status" id="viewColumnHeader9"
            style="font-size:12pt">
        </xp:viewColumnHeader>
    </xp:viewColumn>
    <xp:viewColumn columnName="Alert" id="viewColumn10"
        style="font-size:12pt">
        <xp:viewColumnHeader value="Alert" id="viewColumnHeader10"
            style="font-size:12pt">
        </xp:viewColumnHeader>
    </xp:viewColumn>
</xp:viewPanel> 
```

我还创建了一个按钮。这个想法是使用复选框选择一些文档，单击此按钮，它将文档发送到另一个 xpages（存档）。

我不确定为按钮和复选框分配什么代码，以及按钮如何知道将文档发送到哪里。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T10:57:38.343

如果您需要将文档从一个视图发送到另一个视图，那么您需要查看该视图的选择公式。然后设置文档的必填字段的值，使其满足该选择公式。如果您想将文档恢复到其原始视图，也会发生同样的情况。

在 XPages 中，您可以使用以下代码获取所选文档的注释 ID（无耻地从[这里](https://stackoverflow.com/questions/12054820/get-the-unid-of-selected-documents-and-save-to-scoped-variable)提取:)）

```
var viewPanel=getComponent("viewPanel2");
var docIDArray = viewPanel.getSelectedIds();
for(i=0; i < docIDArray.length; i++) {
   var doc = database.getDocumentByID(docIDArray[i]);
    // Code to manipulate the 'doc' object
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T11:36:44.650

毕竟，我真的不需要移动文档，只需将它们隐藏起来，正如你们中的一些人所建议的那样。

我有一个视图，其中包含一个名为 Archive 的列，该列被隐藏以用于演示目的。存档中的值为否或是（否 - 未存档，是 - 存档）。下一列有一个复选框，用于选择需要存档的行。我所做的只是将视图设置为“按列值过滤”并将字段设置为否。这样，视图显示的行在存档下只有否。要存档一行，我有一个带有此代码的按钮

```
var viewPanel=getComponent("viewPanel1");
var docIDArray=viewPanel.getSelectedIds();
for(i=0;i < docIDArray.length; i++)
{
var docId=docIDArray[i];
var doc=database.getDocumentByID(docId);
doc.replaceItemValue("Archive","Yes");
doc.save();
} 
```

该代码将存档中的值从“否”更改为“是”并将其隐藏在视图中。要从存档中删除文档相同的方法，但它将显示所有值为 Yes 并将 Archive 字段更改为 No。

# java - 无法提取节点下的子节点名称

> ID：15634947
> 
> 赞同：0
> 
> 时间：2013-03-26T10:38:44.760
> 
> 标签：java, dom, xml-parsing

我有一个这样的 XML 文件：

```
<book>
    <chapter name="chap1">
        <section name="c1sec1">
            <paragraph name="title1">sample</paragraph>
        </section>
        <section name="c1sec2">
            <paragraph name="title2">sample1</paragraph>
        </section>
    </chapter>
    <chapter name="chap2">
        <section name="c2sec1">
            <paragraph name="title3">sample2</paragraph>
        </section>
    </chapter>
    <chapter name="chap3">
        <section name="c3sec1">
            <paragraph name="title4">sample3</paragraph>
        </section>
    </chapter>
</book> 
```

我想从特定章节中提取部分。假设从“chap1”，输出应该是这样的：

```
c1sec1
c1sec2 
```

我编写了以下代码来实现这一点：

```
NodeList nodeList = doc.getElementsByTagName("chapter");
for (int i = 0; i < nodeList.getLength(); i++) {
    Node n = nodeList.item(i);
    NamedNodeMap m = n.getAttributes();
    if(m.getNamedItem("name").getTextContent() == "chap1")
    {
        System.out.println(n.getFirstChild().getNodeValue());
    }
} 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:08:41.073

问题的根本原因是使用 == 比较字符串而不是等于

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T11:32:24.560

我建议使用更简单的`getAttribute()`方法：

```
NodeList nodeList = doc.getElementsByTagName("chapter");
for (int i = 0; i < nodeList.getLength(); i++) {
    Element el = (Element)nodeList.item(i);
    if (el.getAttribute("name").equals("chap1"))
    {
        System.out.println("Found chap1");
    }
} 
```

然后，您将需要类似的代码来从章节中提取章节名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T11:26:28.380

尝试`m.getNamedItem("name").getNodeValue()`代替`m.getNamedItem("name").getTextContent()`

# javascript - javascript子元素css

> ID：15634950
> 
> 赞同：1
> 
> 时间：2013-03-26T10:38:49.773
> 
> 标签：javascript, css

我在 css .dragbox 和 .removebutton 中设置了两个类

.dragbox 是 div，.removebutton 是 div 中的按钮

我在页面上有多个动态创建的 .dragbox。

如何使仅当前 .dragbox 的 .removebutton 使用 javascript 可见？

目前，当我将鼠标悬停在一个 .dragbox 上时，所有 .removebuttons 对所有 .dragbox 都可见。我只想显示当前的

这是CSS

```
.dragbox
 {
  position:absolute;
  width:10px;
  height:25px;
  padding: 0.0em; 
  margin:25px;    
  }

 .removebutton
{
      background-image:url(img/delete.png); 
      background-repeat:
      no-repeat;visibility:hidden;
} 
```

继承人的javascript

```
 $('.dragbox').hover(function() 
  { 
    $(this).css('border', '1px solid #000');     
    $(this).css('background-image','url(img/move.png)');
    $(this).css('background-repeat','no-repeat');
    $(this).css('width', '15px');
    $(this).css('height', '15px');          
        $(".removebutton").css('visibility', 'visible'); 
   }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:42:05.487

尝试：

```
$('.dragbox').hover(function() 
{ 
    $(this).css('border', '1px solid #000');     
    $(this).css('background-image','url(img/move.png)');
    $(this).css('background-repeat','no-repeat');
    $(this).css('width', '15px');
    $(this).css('height', '15px');          
    $(this).find(".removebutton").css('visibility', 'visible');
}); 
```

您的原始代码将找到页面上的每个实例`.removeButton`。上面的代码将针对`.removeButton`当前悬停的`.dragbox`div 的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T10:46:40.137

也不需要重复（这个）

```
 $('.dragbox').hover(function() 
      { 
        $(this).css({
       border :'1px solid #000'    ,
       background-image:'url(img/move.png)',
       background-repeat:'no-repeat',
       width: '15px',
       height: '15px'
    })
            $(this).find('.removebutton').css('display', 'block');or /*visibility:visible*/
       }); 
```

# python - GAE Python - 如何在邮件正文中编码特殊字符？

> ID：15634958
> 
> 赞同：1
> 
> 时间：2013-03-26T10:39:12.380
> 
> 标签：python, google-app-engine, email, mime

我喜欢在谷歌应用引擎上使用 python 发送订单通知。问题是邮件正文可能包含像“öäü”这样的特殊字符，但我找不到从内容类型修改字符集的机会。

是否有可能将字符集从 charset="us-ascii" 更改为 example 为 "utf-8" 并仍然使用 google app engine mail api 或解决方法？喜欢加个参数Content-transfer-encoding:quoted-printable？

这是我发送通知的方法：

```
from google.appengine.ext import db
from google.appengine.api import mail

from email.header import Header

def encode_mail_header(line):
    return Header(line, 'utf-8').encode()

msg = u"Message with some chars like öäüßéèô..."
subject = encode_mail_header(u"Hans Müller your Ticket")
sender = "My Service <notification+@localhost.de>"
to = encode_mail_header(u"Hans Müller")
to += " <hans.mueller@localhost>"

message = mail.EmailMessage(sender=sender,
      to=to,
      subject=subject,
      body=msg)
message.send() 
```

从我的开发服务器收到电子邮件代码：

```
Received: from spooler by localhost (Mercury/32 v4.62); 26 Mar 2013 10:50:35 +0100
X-Envelope-To: <hans.mueller@localhost>
Return-path: <notification+@localhost.de>
Received: from [192.168.56.1] (127.0.0.1) by localhost (Mercury/32 v4.62) with ESMTP ID MG000011;
   26 Mar 2013 10:50:24 +0100
Content-Type: multipart/mixed; boundary="===============1598388400=="
MIME-Version: 1.0
To: =?utf-8?q?Hans_M=C3=BCller?= <hans.mueller@localhost>
From: My Service <notification+@localhost.de>
Reply-To:
Subject: =?utf-8?q?Hans_M=C3=BCller_your_Ticket?=
X-UC-Weight: [#   ] 51
X-CC-Diagnostic: Not Header "Date" Exists (51)

--===============1598388400==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit

Message with some chars like öäüßéèô...
--===============1598388400==-- 
```

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:18:44.153

我们使用以下代码：

消息 = 邮件.EmailMessage()

message.subject = "=?utf-8?B?%s?=" % base64.b64encode( u"üäö".encode("UTF-8") )

message.html = u"üäö".encode('ascii', 'xmlcharrefreplace')

# angularjs - 使用自定义 HTML 包装指令（另一个指令）

> ID：15634962
> 
> 赞同：21
> 
> 时间：2013-03-26T10:39:29.373
> 
> 标签：angularjs, angularjs-directive

假设我有一个名为`<my-directive>`. 它做了一些 html 渲染和事件处理，它经过了彻底的测试。

现在我想用另一个包装器指令包装这个指令`<wrapper>`，它将呈现这个 html 片段`<div class="my-div">`，这样我就可以编写如下代码：

```
<wrapper>
   <my-directive></my-directive>
</wrapper> 
```

并且有：

```
<div class="my-div">
   <my-directive></my-directive>
</div> 
```

怎样才能做到这一点？我之前尝试过一些方法，它们似乎都没有工作，所以我没有发布任何代码。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-26T11:03:35.620

您可以创建包装指令，如

```
app.directive('wrapper', function() {
  return {
    restrict: 'E',
    replace: true,
    transclude: true,
    template: '<div class="my-div" ng-transclude></div>'
  };
}); 
```

演示：[Plunker](http://plnkr.co/edit/lAYjaP6gfwoeYPpLPPiJ?p=preview)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-26T11:10:22.387

听起来您`ng-transclude`在外部模板中缺少并且`transclude`在外部指令中设置为 true。该`ng-transclude`属性告诉编译器何时将内部 html 插入`transclude`到`true`

```
app.directive('wrapper',function(){
 return {
   restrict:'E',
   template: '<div>Outer wrapper text<div ng-transclude></div></div>',
   transclude: true,
   replace:true
 }
}); 
```

演示[http://plnkr.co/edit/sfbRyPZjqsTG6cuiaXZV?p=preview](http://plnkr.co/edit/sfbRyPZjqsTG6cuiaXZV?p=preview)

# android - 连接到magento时在Android中验证用户时出错

> ID：15634963
> 
> 赞同：0
> 
> 时间：2013-03-26T10:39:36.917
> 
> 标签：android, magento, xml-rpc

我正在开发执行用户登录检查的 Android 应用程序。

我的代码就像跟随，

```
XMLRPCClient client = new XMLRPCClient(url);
Object object = (String)client.call("login", EmailText,  PasswordText);
SessionId = object.toString(); 
```

其中 url 是有效的 magento 主机路径。此代码仅适用于管理员帐户，这意味着如果我以管理员用户身份登录。但这给了我错误

> XMLRPC 错误：访问被拒绝。[代码 2]

对于其他输入电子邮件地址和密码的用户。我也尝试过使用`customer.login`API，但它给出了

> 无效的 api 路径错误

. 这段代码有什么问题？谁能告诉我用户登录的正确方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T09:36:22.847

Magento 不提供这种类型的设施。我知道 magento 使用 md5 来散列密码。我已经为此编写了代码。代码是，

```
DemoMD5.MD5(salt+passwordText)+":"+salt; 
```

salt是magento生成的随机字符串，passwordText是用户输入的密码。

# c# - 是什么让模板与泛型不同？

> ID：15634970
> 
> 赞同：19
> 
> 时间：2013-03-26T10:40:07.433
> 
> 标签：c#, java, c++, templates, generics

我了解 C++ 中模板与 Java 和 C# 中的泛型不同的方面。C# 是一种具体化，Java 使用类型擦除，C++ 使用鸭子类型，等等。C++ 模板可以做许多 Java 和 C# 泛型不能做的事情（例如模板特化）。但是有许多 Java 泛型可以做 C# 和 C++不能~~做的事情（例如，创建一个泛型家族的有界类型参数，`class Foo<T extends Comparable<?>>`如~~例如运行时通用反射）。*[编辑：显然 Java 泛型比我想象的要弱得多。（这是在说些什么。）无论如何，尽管它们无能，但它们仍然与 C# 的泛型一起被视为泛型。]*

我不明白是什么在概念上使模板与泛型不同。C++ 模板的哪些部分是不能在不是模板但是泛型的东西中完成的事情？例如，如果我要实现一种支持模板的语言，那么其中绝对需要什么？对于支持泛型的语言，我可以省略什么？

我的猜测是模板是泛型的超集，或者它们是实现泛型的一种方式，但我真的不明白真正的模板与真正的泛型有什么区别。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T11:45:27.253

嗯..如果您说您深入了解 C++ 模板并说您没有看到/感觉泛型与它们之间的区别，那么您很可能是对的 :)

有许多差异将描述泛型如何/为什么比模板更好，列出大量差异等，但这与想法的核心几乎无关。

这个想法是允许更好的代码重用。模板/泛型为您提供了一种构建某种高阶类定义的方法，这些定义抽象了一些实际类型。

在这个术语中，它们之间没有区别，唯一的区别是由底层语言和运行时的特定功能和约束强制执行的区别。

有人可能会争辩说，泛型提供了一些额外的特性（通常在谈论对象类树的动态自省时），但其中很少有（如果有的话）**不能**在 C++ 的模板中手动实现。通过一些努力，它们中的大多数都可以实现或模拟，因此它们不能很好地区分“适当的泛型”和“真实模板”。

其他人会争辩说，由于 C++ 的复制粘贴行为，优化的巨大潜力是不同的。对不起，不是真的。Java 和 C# 中的 JIT 也可以做到这一点，嗯，几乎，但做得很好。

然而，有一件事确实可以使 Java/C# 的泛型成为 C++ 模板功能的真正子集。你甚至提到了它！

它是**模板专业化**。

在 C++ 中，每个特化都表现为完全不同的定义。

在 C++ 中，`template<typename T> Foo`专用于 T==int 可能如下所示：

```
class Foo<int> 
{
    void hug_me();

    int hugs_count() const;
} 
```

而专门用于 T==MyNumericType 的“相同”模板可能看起来像

```
class Foo<MyNumericType> 
{
    void hug_me();

    MyNumericType get_value() const;
    void  reset_value() const;
} 
```

仅供参考：这只是伪代码，不会编译:)

Java 和 C# 的泛型都不能做到这一点，因为它们的定义声明所有泛型类型实现都将具有相同的“用户界面”。

更重要的是，C++ 使用了 SFINAE 规则。模板可能存在许多“理论上冲突”的专业化定义。但是，在使用模板时，只使用那些“实际上很好”的模板。

使用类似于上面示例的类，如果您使用：

```
 Foo<double> foood;
 foood.reset_value(); 
```

只会使用第二个特化，因为第一个不会编译，因为 ... "reset_value" 缺失。

使用泛型，你不能这样做。您需要创建一个具有所有可能方法的泛型类，然后在运行时动态检查内部对象并为不可用的方法抛出一些“未实现”或“不支持”异常。这……太可怕了。这样的事情在编译时应该是可能的。

**模板专业化**和**SFINAE**的实际功能、含义、问题和整体复杂性是泛型和模板的真正区别。简单地说，泛型是以这样一种方式定义的，即不可能进行专门化，因此 SFINAE 是不可能的，因此，自相矛盾的是，整个机制更容易/更简单。

在编译器的内部实现更容易/更简单，并且可以被非专家的大脑理解。

尽管我同意 Java/C# 中泛型的整体优势，但我真的很怀念专业化、接口灵活性和 SFINAE 规则。但是，如果我不提及与健全的 OO 设计相关的一件重要事情，我将不公平：如果您对类型 xxx 的模板专业化实际上更改了它的客户端 API，那么很可能它应该命名不同并且应该形成不同的模板. 模板可以做的所有额外好处大部分都添加到了工具集中，因为......在 C++ 中没有反射，它必须以某种方式进行模拟。SFINAE 是编译时反射的一种形式。

因此，差异世界中最大的参与者被简化为用于掩盖运行时缺陷的修补程序的奇怪（有益）副作用，即几乎完全缺乏运行时内省:)）

因此，我说除了语言强制执行的一些任意的，或者运行时平台强制执行的一些任意的之外，没有区别。

它们都只是高阶类或函数/方法的一种形式，我认为这是最重要的东西和特性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T13:38:05.857

首先，我觉得有趣的是 RTTI/内省是大多数答案的重要组成部分。好吧，这不是泛型与模板的区​​别，而是具有自省的语言与没有自省的语言的区别。否则，您也可以声称这是 C++ 类与 Java 类以及 C++ 函数与 Java 函数的区别......

如果您不考虑自省，主要区别在于模板定义了一种图灵完备的语言，在风格上是功能性的，尽管您可以在其上编写可怕的*语法*。我听说的第一个非常复杂的例子（我很想拥有代码，但我没有）是一个*在编译时*计算素数的程序。这确实带来了另一个区别：模板可以采用类型参数、模板参数或非类型参数（*非类型*指的是任何不是类型或模板的东西，比如一个`int`值）。

这在其他答案中已经提到过，但只是说模板可以专门化并且有 SFINAE 并没有明确说明这两个功能足以生成图灵完整的语言。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T11:29:20.307

> Java 泛型可以做很多 C# 和 C++ 不能做的事情（例如，创建一个泛型家族的有界类型参数，例如`class Foo<T extends Comparable<?>>`）

该示例并不完全正确：

```
template <typename Comparable>
struct Foo {
    static bool compare(const Comparable &lhs, const Comparable &rhs) {
        return lhs == rhs;
    }
}; 
```

`compare`只有当模板参数是等式可比类型时，此类模板才会成功实例化函数。它不称为“有界类型参数”，但它具有相同的目的。

如果在 C++ 中您想将`Comparable`其视为显式接口（即基类）而不是鸭子类型的概念，那么您可以`static_assert(is_base_of<Comparable, T>::value, "objects not Comparable");`，或其他任何方式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-26T10:45:57.203

不，模板不是泛型的超集，对于 C++ 模板，您没有与 C# 泛型相同级别的运行时支持，这意味着 C++ 中的 RTTI 无法检测并为您提供模板的元数据，如 Reflection 为C# 中的泛型。

除此之外，我喜欢这个片段：

> C++ 模板使用编译时模型。在 C++ 程序中使用模板时，效果就像使用了复杂的宏处理器一样。
> 
> C# 泛型不仅是编译器的一个特性，也是运行时的一个特性。诸如 List 之类的泛型类型在编译后保持其泛型性（泛型性）。或者，换个角度来看，C++ 编译器在编译时所做的替换是在 C# 泛型世界中的 JIT 时完成的。

完整文章请参见此处：[C# 泛型与 C++ 模板相比如何？](http://blogs.msdn.com/b/csharpfaq/archive/2004/03/12/how-do-c-generics-compare-to-c-templates.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-04T04:55:00.013

这是一个旧线程，我的代表太低，无法评论[接受的答案](http://stackoverflow.com/a/15636289/830988)，但我想补充：

除了显式特化之外，C++ 模板和 C# 泛型的另一个关键区别是 C++ 中使用的**非类型**模板参数：

```
template<int bar> class Foo {};

Foo<1> a;
Foo<2> b;

a = b; //error, different types. 
```

非类型模板参数可以是任何整数类型、枚举以及可以在编译时确定的指针（静态存储变量和函数指针）。在 C++20 中，它们也可以是类类型，但有一定的限制。

C# 和 Java 泛型都不能做到这一点。

您也可以明确地专注于非类型参数。

作为旁注，D 编程语言使用术语“模板”作为泛型编程的命名法，至少在我看来，它的特性在精神上与 C++ 一致，而不是 C#/Java。

我不知道为什么非类型参数被排除在 C# 之外的技术原因，但是作为我现在使用的语言比其他语言更多，我偶尔会错过这个功能。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-26T12:08:35.177

我的答案仅限于 C++ 模板与 Java 泛型。

1.  C++ 模板（类模板和函数模板）是实现编译时多态性的机制，但 AFAIK Java 泛型是运行时机制。
2.  使用 C++ 模板，您可以进行泛型编程，它实际上是完全独立的编程风格/范式，但 Java 泛型本身就是 OO 风格。见下文：
3.  C++ 模板基于 Duck 类型，但 Java 泛型基于类型擦除。在 C++ 中`vector<int>`，`vector<Shape *>`、`vector<double>`和 `vector<vector<Matrix>>`是 4 种不同的类型，但在 Java`Cell<int>`中，`Cell<Integer>` `Cell<double>`和`Cell<Matrix>`是相同的类型。更准确地说，在代码生成期间，编译器首先会擦除类型。您可以通过以下论文中的以下代码进行检查：Vladimir Batov。Java 泛型和 C++ 模板。C/C++ 用户杂志，2004 年 7 月。

    ```
    public class Cell<E>
    {
       private E elem;
       public Cell(E elem)
       { 
          this.elem = elem;
       }
       public E GetElement()
       { 
          return elem;
       }
       public void SetElement(E elem)
       { 
          this.elem = elem;
       } 
    }

    boolean test()
    { 
      Cell<Integer> IntCell(10); 
      Cell<String> StrCell(“Hello”);
      return IntCell.getClass() ==
             StrCell.getClass(); // returns true
    } 
    ```

简而言之，Java 假装是通用的，而 C++ 实际上是。

# c++ - 如何将 Visual Studio 附加到远程机器上进程的子进程？

> ID：15634972
> 
> 赞同：0
> 
> 时间：2013-03-26T10:40:10.573
> 
> 标签：c++, visual-studio, debugging, visual-studio-2008, process

当我在远程机器上运行一个进程时，比如 A.exe，它会产生子进程，比如 childA.exe。

我想做的是，我希望 Visual Studio 在 childA.exe 生成后立即启动（遇到断点）？

我环顾四周，发现无法调试 Visual Studio 中父进程的子进程。也就是说，如果我在代码中设置断点并启动 A.exe；当 childA.exe 开始执行时，它不会到达该断点。

PS：我使用的是visual studio 2008。如果有帮助，我也可以使用vs 2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:44:10.053

您需要在远程机器上[设置 Visual Studio 远程调试器。](http://msdn.microsoft.com/en-us/library/vstudio/y7f5zaaa.aspx)并进行远程调试。

# orchardcms - 是否可以在管理部分的启用功能页面中仅显示 Orchard CMS 模块的功能？

> ID：15634973
> 
> 赞同：3
> 
> 时间：2013-03-26T10:40:10.800
> 
> 标签：orchardcms

让我澄清一下，因为这个问题本身可能看起来有点令人困惑：

我有一个模块-让我们调用这个模块`AB module`。该模块有 2 个功能 - 让我们调用它们`feature A`和`feature B`.

这是一个示例模块清单文件：

```
Name: AB Module
AntiForgery: enabled
Version: 1.0
OrchardVersion: 1.0
Description: Test module with 2 features
Category: My New Category
Features:
    AbModule.FeatureA:
        Name: Feature A
        Category: My New Category
    AbModule.FeatureB:
        Name: Feature B
        Category: My New Category 
```

目前，`My New Category`该页面的部分`Modules`包含三个项目`AB Module`-`Feature A`和`Feature B`。

因为我的模块不包含`Feature A`and之外的任何功能`Feature B`，所以我想对`AB Module`用户隐藏启用选项，因为它在没有启用子功能的情况下不提供任何功能，并且可能会导致混淆。

这可能吗？如果是这样 - 怎么样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T22:58:35.567

默认设置将始终存在。`OrchardFeature`未使用可选属性明确描述的代码将属于此功能。

您需要将默认功能（与模块具有相同标识符的功能）`FeatureA`视为`FeatureB`. 假设您的模块项目已命名`AbModule`，它应该如下所示：

```
Name: AB Module
AntiForgery: enabled
Version: 1.0
OrchardVersion: 1.0
Description: Test module with 2 features
Category: My New Category
Features:
    AbModule:
        Name: Feature A
        Category: My New Category
    AbModule.FeatureB:
        Name: Feature B
        Category: My New Category 
```

在这种情况下`AB Module`，将不再显示为功能 - 您只会`Feature A`看到`Feature B`。

# api - 为什么使用客户/买方 API 凭证？

> ID：15634979
> 
> 赞同：0
> 
> 时间：2013-03-26T10:40:26.567
> 
> 标签：api, testing, paypal, paypal-sandbox

我第一次将 PayPal 集成到客户的网站中。我一直在使用卖家和买家测试帐户并在 Sandbox 上进行测试。我在动态创建“立即购买”按钮时使用了卖家的 API 凭证，这些凭证用于通过 cURL 的 NVP。我还在 IPN 侦听器中使用凭据，一旦买家付款，该凭据就会执行业务逻辑。

我已经测试过使用 PayPal 帐户购买的买家，并且我还测试过使用信用卡购买产品。

1.  我只是想知道，为什么我们需要买方的 API 凭证？是否有一些重要的测试我错过了这些凭据用于进行 API 调用的地方？

2.  如何创建错误以利用“否定”测试，如果我在新的开发人员界面中单击其中一个测试沙盒帐户的“配置文件”，则会显示该选项？

我知道其中一些问题可以通过查看贝宝的开发者网站来回答，而且我一遍又一遍地浏览它的网站页面，我在这里问是因为虽然贝宝很全面，但我觉得不清楚对于我这样的初学者来说已经足够了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:35:42.573

回答你的问题。

1.  这些凭据允许您通过 API 调用访问帐户。这是一种类似于使用用户 ID 和密码访问帐户、对帐户执行操作以及从帐户检索信息的身份验证方法。您不希望任何人都能够访问您的帐户，因此 API 凭据用于访问您的帐户。
2.  如果您想使用负面测试，请参阅开发人员指南。这将告诉您希望您需要传递以触发特定的错误代码。为金额、cvv2、地址等传递不同的值将触发不同的错误。至于在配置文件上触发错误，如果这是您所要求的，您将无法通过负面测试来做到这一点。

# perl - 通过哈希表读取和更改 .txt 文件

> ID：15634980
> 
> 赞同：0
> 
> 时间：2013-03-26T10:40:32.867
> 
> 标签：perl

我正在努力理解如何设置哈希表——如果我理解“Perl 简介”一书以及网络上的各种建议等，我想这是我需要的。我必须阅读 .text/ csv 文件看起来像这样 - 分号和所有：

```
PRENOM;NOM;SEXE;AGE;PAYS;TITRE;GENRE
Cédrick;Matisse;m;25-45;Belgique;La peinture de l'amour;romance
Anne-Pascale;Ork;f;15-25;Belgique;La dernière halte des elfes;fantastique
Anne-Pascale;Ork;f;15-25;Belgique;La tentation du gobelin;fantastique 
```

....它只是和提取。

我想 1) 我应该将所有这些放入一个哈希表中，以便阅读所要求的个人信息：性别、年龄、书籍类型。但是，我似乎无法理解如何将其加载到哈希表中——即使在阅读了各种帖子和“the”Perl 书之后。我一直在使用的代码如下所示：

```
use strict;
use warnings;

my $fichier = $ARGV[0]; # fichier source

open( DONNEES, '<', $fichier )
or die("Impossible d'ouvrir le fichier $fichier\n");

my %sexe = ( 'f' => 0, 'm' => 0);

my %age = ( '0-15' => 0, '15-25' => 0, '25-45' => 0, '45-65' => 0, '65-' => 0 );

my %genre = ( 'art' => 0, 'divers' => 0, 'education' => 0,
         'essai' => 0, 'fantastique' => 0, 'informatique' => 0,
         'pratique' => 0, 'roman' => 0, 'romance' =>0,
         'sci-fi' => 0);

my $sexe = 0;
my $sexem = 0;

print "$fichier\n";

while ( my $ligne = <DONNEES> ) {

chomp($ligne);

# decoupage de chaque ligne du fichier en 6 colonnes
my ($prenom, $nom, $sexe, $age, $pays, $livre, $genre ) = split( /\t/, $ligne ); 
```

ETC .....

在处理已经放置了空格的文档时，使用数组似乎很容易，将它们放在一列中并阅读它们。但是，这里有更多信息。问题是

1) 如何让我的程序忽略文档的第一行 (PRENOM;NOM;etc)？

2）然后我如何才能将所需的项目空间和放置到正确的哈希表中？程序用分号读取整行是问题之一吗？

我没有再包括任何内容，因为这是一门课的作业，这意味着我必须自己解决剩下的问题。在能够阅读上述各个元素之后，我的程序只需打印出有多少“女性”或“男性”，有多少阅读“浪漫”等。

最后，如果问题不清楚或者/并且我在叫错树，请不要犹豫，指出我正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:14:37.890

我相信[Tie::Array::CSV](https://metacpan.org/module/Tie%3a%3aArray%3a%3aCSV)真的很接近您的需要：

```
#!/usr/bin/env perl

use strict;
use warnings;

use Tie::Array::CSV;

sub get_column {
  my $last = int rand 10;
  return map { rand 100 } (0..$last);
}

tie my @out, 'Tie::Array::CSV', 'outfile.csv';

for my $column (0..9) {
  my $row = 0;
  $out[$row++][$column] = $_ for get_column();
} 
```

另请参阅[作者](http://blogs.perl.org/users/joel_berger/2013/03/a-case-for-tiearraycsv.html)解释该模块背后的推理的帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:55:58.900

有很多模块可以帮助您完成该任务。例如，[Text::CSV::Slurp](http://search.cpan.org/perldoc?Text%3a%3aCSV%3a%3aSlurp)将 CSV 转换为哈希数组。

# sql - 如何将两行合二为一？

> ID：15634981
> 
> 赞同：0
> 
> 时间：2013-03-26T10:40:33.630
> 
> 标签：sql, sql-server, sql-server-2008

如何将两行合二为一。

```
EMPCode  actHours    actDate     rowno
107 8.00        2013-01-21  1
107 8.30        2013-01-22  1
107 4.00        2013-01-23  1
107 4.00        2013-01-23  2
107 4.10        2013-01-24  1
107 4.20        2013-01-24  2
107 4.30        2013-01-25  1
107 4.30        2013-01-25  2

I want the result as follows:

actHours    actDate 
8.00        2013-01-21 
8.30        2013-01-22
8.00        2013-01-23 
8.30        2013-01-24
9.00        2013-01-25 
```

任何帮助将不胜感激。提前致谢 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:42:52.577

尝试这个：

```
SELECT SUM(actHours) actHours, actDate FROM Tbl GROUP BY actDate 
```

实际上，如果您提供列的数据类型，答案可能会更具体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:05:04.920

然后用这个，

```
with datecte
as
(
 select  actDate, SUM(DATEDIFF(MINUTE, '0:00:00', actHours)) actHours
 from (
   SELECT actDate,CAST(REPLACE(actHours,'.',':') as time) actHours
   FROM #tb1
      ) k 
 group by actDate
)

SELECT actDate,
actHours = RTRIM(actHours/60) + ':' + RIGHT('0' + RTRIM(actHours%60),2)
FROM datecte 
```

希望这能给你解决方案..

好的@praveen ..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T11:31:43.930

如果数据包含这些怎么办..

```
108 3.40        2013-01-26  1
108 3.50        2013-01-26  2 
```

如果数据类型是`time`，那么你可以使用这个查询..

```
with datecte
as
(
 SELECT actDate,  SUM(DATEDIFF(MINUTE, '0:00:00', actHours)) actHours
 FROM Tb1
 GROUP BY actDate
)
SELECT actDate,
actHours = RTRIM(actHours/60) + ':' + RIGHT('0' + RTRIM(actHours%60),2)
FROM datecte 
```

# java - 如何在 htmlunit 2.9 中处理 NoHttpResponseExcpetion

> ID：15634983
> 
> 赞同：0
> 
> 时间：2013-03-26T10:40:39.963
> 
> 标签：java, htmlunit

当我单击表单的提交按钮时，我遇到了异常。在谷歌上搜索了更多之后，当服务器没有响应 HTMLUnit 提交的请求时，似乎抛出了这个异常。我正在使用 HTMLUnit 2.9。

java.lang.RuntimeException: org.apache.http.NoHttpResponseException: 目标服务器在 com.gargoylesoftware.htmlunit.html.HtmlForm.submit( HtmlForm.java:135) 在 com.gargoylesoftware.htmlunit.html.HtmlSubmitInput.doClickAction(HtmlSubmitInput.java:75) 在 com.gargoylesoftware.htmlunit.html.HtmlElement.click(HtmlElement.java:1244) 在 com.gargoylesoftware.htmlunit .html.HtmlElement.click(HtmlElement.java:1195) at com.gargoylesoftware.htmlunit.html.HtmlElement.click(HtmlElement.java:1158) at com.quinstreet.dms.qaautomationtool.testengine.LeadSubmitter.submitForm(LeadSubmitter.java :1518) 在 com.quinstreet.dms.qaautomationtool.testengine.LeadSubmitter.processFodPage(LeadSubmitter.java:627) 在 com.quinstreet.dms.qaautomationtool.testengine.LeadSubmitter.submitLead(LeadSubmitter.java:431) 在 com.quinstreet.dms.qaautomationtool.testengine.LeadSubmitter.run(LeadSubmitter.java:174) 在 com.quinstreet.dms .qaautomationtool.util.ThreadPool$PooledThread.run(ThreadPool.java:123)

原因：org.apache.http.NoHttpResponseException：目标服务器在 org.apache.http.impl.io.AbstractMessageParser 的 org.apache.http.impl.conn.DefaultResponseParser.parseHead(DefaultResponseParser.java:101) 处响应失败.parse(AbstractMessageParser.java:252) 在 org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:281) 在 org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:247) 在org.apache.http.impl.conn.AbstractClientConnAdapter.receiveResponseHeader(AbstractClientConnAdapter.java:219) 在 org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:298) 在 org.apache.http.protocol.HttpRequestExecutor。在组织执行（HttpRequestExecutor.java:125）。org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:464) 中的 org.apache.http.impl.client 中的 apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:645)。 AbstractHttpClient.execute(AbstractHttpClient.java:820) at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:776) at com.gargoylesoftware.htmlunit.HttpWebConnection.getResponse(HttpWebConnection.java:152) at com .gargoylesoftware.htmlunit.WebClient.loadWebResponseFromWebConnection(WebClient.java:1439) at com.gargoylesoftware.htmlunit.WebClient.loadWebResponse(WebClient.java:1358) at com.gargoylesoftware.htmlunit.WebClient.download(WebClient.java:2127)org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820) 在 org.apache.http.impl.client 的 apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:464)。 AbstractHttpClient.execute(AbstractHttpClient.java:776) at com.gargoylesoftware.htmlunit.HttpWebConnection.getResponse(HttpWebConnection.java:152) at com.gargoylesoftware.htmlunit.WebClient.loadWebResponseFromWebConnection(WebClient.java:1439) at com.gargoylesoftware.htmlunit .WebClient.loadWebResponse(WebClient.java:1358) 在 com.gargoylesoftware.htmlunit.WebClient.download(WebClient.java:2127)org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820) 在 org.apache.http.impl.client 的 apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:464)。 AbstractHttpClient.execute(AbstractHttpClient.java:776) at com.gargoylesoftware.htmlunit.HttpWebConnection.getResponse(HttpWebConnection.java:152) at com.gargoylesoftware.htmlunit.WebClient.loadWebResponseFromWebConnection(WebClient.java:1439) at com.gargoylesoftware.htmlunit .WebClient.loadWebResponse(WebClient.java:1358) 在 com.gargoylesoftware.htmlunit.WebClient.download(WebClient.java:2127)http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:776) 在 com.gargoylesoftware.htmlunit.HttpWebConnection.getResponse(HttpWebConnection.java:152) 在 com.gargoylesoftware.htmlunit.WebClient.loadWebResponseFromWebConnection(WebClient.java:1439)在 com.gargoylesoftware.htmlunit.WebClient.loadWebResponse(WebClient.java:1358) 在 com.gargoylesoftware.htmlunit.WebClient.download(WebClient.java:2127)http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:776) 在 com.gargoylesoftware.htmlunit.HttpWebConnection.getResponse(HttpWebConnection.java:152) 在 com.gargoylesoftware.htmlunit.WebClient.loadWebResponseFromWebConnection(WebClient.java:1439)在 com.gargoylesoftware.htmlunit.WebClient.loadWebResponse(WebClient.java:1358) 在 com.gargoylesoftware.htmlunit.WebClient.download(WebClient.java:2127)下载（WebClient.java:2127）下载（WebClient.java:2127）

请提出解决方案或任何线索来解决此问题。

# javascript - javascript变量在函数中丢失

> ID：15634995
> 
> 赞同：0
> 
> 时间：2013-03-26T10:41:09.677
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在我的谷歌地图代码中处理这个问题，但它实际上是一个架构问题。在某些时候，由于请求太多，谷歌地图限制了响应，那时我想延迟发出另一个请求，但是当我再次调用 function2 时，它说“数组未定义”。

```
function1() {
    var array = JSON.parse(xmlhttp.responseText);

    for (i; i < length; < i++) {
        function2(array[i].one, array[i].two);
    }

    function3() {
        //render directions
    }

    function2(start, end) {
        directionsService.route({
            origin: start,
            destination: end,
        },

        function (result, status) {
            if (status == google.maps.DirectionsStatus.OK)
                function3(result);
            else if (status == google.maps.GeocoderStatus.OVER_QUERY_LIMIT)
                var functionStr = "function2(array[i].one" + ',' + "array[i].two)";
            setTimeout(functionStr, 5000);
        });
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T10:46:23.680

那是因为当你使用一串代码时，`setTimeout()`它会在全局范围内执行，它不知道`array`. 全局范围也不会知道`i`；即使确实如此，`i`无论如何， 的值也已经不再有效。

如果您将函数代码包装在匿名函数中，它应该可以工作，如下所示：

```
setTimeout(function() {
    function2(start, end);
}, 5000); 
```

请注意，您可以在此处简单地重用`start`和`end`，因为这些值已受到保护，不会更改`i`变量。

顺便说一句，您可以考虑序列化您的所有 Google 请求，即一个接一个的请求，以防止出现这些速率问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:49:23.177

setTimeout 中的函数在单独的范围内执行，而不是在数组变量的范围内。您可以将其包装在匿名函数中。

请参见此处： [如何将参数传递给 setTimeout() 回调？](https://stackoverflow.com/questions/1190642/how-can-i-pass-a-parameter-to-a-settimeout-callback)

所以你的代码是：

```
 function (result, status) {
            if (status == google.maps.DirectionsStatus.OK) {
                function3(result);
            } else if (status == google.maps.GeocoderStatus.OVER_QUERY_LIMIT) {
                setTimeout(function () {
                    function2(array[i].one, array[i].two);
                }, 5000);
            }
        }); 
```

请记住，您的代码缺少 if elseif 语句的大括号 {}。我已经添加了这些。