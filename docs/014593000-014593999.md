# StackOverflow 问答 14593000-14593999

# php - 如何根据用户输入的信息以 HTML 格式显示来自 CSV 的数据？

> ID：14593004
> 
> 赞同：0
> 
> 时间：2013-01-29T21:54:15.717
> 
> 标签：php, html, csv

我继承了一个网站，该网站允许用户输入数量，然后扫描条形码，然后将项目编号输入到一个字段中，然后在下一个字段中输入标签。这些数量/项目编号行中有十个可以填写。点击提交后，数据将通过电子邮件发送到一个地址。

我有一个包含两列的 CSV 文件，一列用于项目编号，另一列用于描述。我可以设置它，以便页面会在填充项目编号字段时注意到并显示描述文本吗？

如果有必要，我可以接受将 CSV 保存为单独文件的解决方案，或者需要我将 CSV 数据复制到 HTML 文件中的解决方案。或任何其他开箱即用的解决方案。

此外，HTML 在 PHP 中，我不确定这有多重要。像这样：

```
<?php
if(isset($_POST["submit"])) {
...
} else { ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<body>
...
</body>
</html>
<?php } ?> 
```

非常感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:18:32.087

我认为您必须为该行使用模板并使用 Javascript 动态创建必要的行。

您可以将事件添加到第一个字段。当它发生变化时，您可以向服务器发送请求（使用 Ajax），并使用返回的数据填充第二个字段。

您可以在解释该方法的一部分的地方看到类似[这样](https://stackoverflow.com/questions/7298364/using-jquery-and-json-to-populate-forms)或[这样的其他问题。](https://stackoverflow.com/questions/9098649/jquery-ajax-request-with-json-response-how-to)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T22:24:11.930

除了明显的建议之外`Put the CSV in a DB and fetch it from there`，您还可以读取 csv 文件并将其存储在`javascript`对象中。喜欢：

```
var myObject = {
   item_number_1: description_1,
   item_number_2: description_2,
   ....
   ....
   ....
   item_number_n: description_n
} 
```

然后，您可以通过事件处理程序检查用户输入的项目编号是否在此对象中，如果是，则显示描述。希望有帮助。

**从 csv 创建对象的方法**

```
<script type="text/javascript">
var myObject = {};
<?php
$fp=fopen('PATH_TO_YOUR_CSV_FILE','r');
$str = '';

while(($data=fgetcsv($fp,'',','))!==false) {
   $item = htmlentities(trim($data[0]),ENT_COMPAT,'UTF-8',false);
   $desc = htmlentities(trim($data[1]),ENT_COMPAT,'UTF-8',false);

   $str .= 'myObject["'.$item.'"]="'.$desc.'",';
}
fclose($fp);
echo trim($str,',');
?>
</script> 
```

# javascript - jQuery Datatables 更新一个现有行，同时在其上方添加新行

> ID：14593010
> 
> 赞同：0
> 
> 时间：2013-01-29T21:55:44.177
> 
> 标签：javascript, jquery, datatables

所以我有这张表，我正在使用 datatables.js 来帮助我使它有点功能。也就是说，我遇到了需要在此表中有 6 个最初呈现的行，这些行在很大程度上永远保持不变，并且在其中的位置，除了一个例外 3，但我认为如果我能解决，目前只有一个很重要这一个问题，其他类似的问题应该很容易模仿。无论如何，该规则的例外是 6 个静态行中的最后一行始终保持在底部。有了这个，我需要在最后一行上方附加一行。这意味着第 6 行将是新的 7，新的行将是第 6 行。

我的表从客户端方面进行了排序，但通过隐藏列保留了排序顺序。因此，每当有东西通过它时，我都需要调整排序的列索引。到目前为止，我可以通过第一次运行我提出的函数来做到这一点，但是如果我在运行后再次触发该函数，那么命令就会变得有点疯狂。所以这里说的是我的数据表代码：

```
var oTable = $('#manager').dataTable({
        "sPaginationType": "full_numbers",
        "bPaginate": false,
        "bFilter": false,
        "bAutoWidth": true,
        "sScrollY": "300px",
        "bScrollCollapse": true,
        "aaSortingFixed": [[0,'asc']],
        "oLanguage": {
            "sInfo": 'Tasks: _END_',
            "sEmptyTable": "No Job/Task Sources to display currently.",
            "sInfoEmpty": "No Job/Task(s)."
        },
        "aoColumns": [
              { "bSortable": true, "bVisible": true},
              { "bSortable": false, "sWidth":"5%", "sClass":"center"},
              { "bSortable": false, "sWidth":"85%"},
              { "bSortable": false, "sWidth":"10%"},
           ]
    }); 
```

这是迄今为止我提出的功能..

```
function newTaskData()
{
    var lastTR = taskmanagerTable.fnGetData($('.static:last').get(0));
    var currLast = parseInt(lastTR[0]);
    var newLast = parseInt(lastTR[0])+1;
    alert([newLast, currLast])

    taskmanagerTable.fnUpdate(newLast, currLast, 0);
    taskmanagerTable.fnAddData([currLast, 'checkbox', 'data source', 'E R D']);
    taskmanagerTable.fnDraw();
} 
```

这是第一次运行与多次运行的几个屏幕截图

![第一次运行](../Images/0dcf56b6d273783ff0b4b095f8631402.png) ![多次运行](../Images/ef6d9b1852bc5a151c8559f9919d0cc4.png)

我什至不知道如何解释问题是什么，所以希望图像有所帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:37:08.907

我认为在最后一行（复选框）上使用会更容易`fnDeleteRow`，添加新记录，然后重新添加复选框。

出现您的问题是因为您正在复制整个行对象，包括索引，这就是您最终在屏幕截图中得到两个 6 的原因。

# three.js - 使用自定义 fragmentShader 的灯光和阴影

> ID：14593014
> 
> 赞同：2
> 
> 时间：2013-01-29T22:00:05.150
> 
> 标签：three.js, webgl

我正在创建一个球体并为其添加失真，这工作正常。当我看线框时，它是这样的

![线框](../Images/17590ec93195a964ce47201cd10c4c6e.png)

并且随着线框的转动，它看起来像这样

![坚硬的](../Images/b0a85a10d32d9e0de2c273d14d6b10af.png)

如您所见，当线框关闭时，没有阴影并且变形不可见。

我正在寻找的是在我的自定义 fragmentShader 中放置什么。

我用这个

```
 // calc the dot product and clamp
        // 0 -> 1 rather than -1 -> 1
        vec3 light = vec3(0.5,0.2,1.0);

        // ensure it's normalized
        light = normalize(light);

        // calculate the dot product of
        // the light to the vertex normal
        float dProd = max(0.0, dot(vNormal, light));

        // feed into our frag colour
        gl_FragColor = vec4(dProd, dProd, dProd, 1.0); 
```

但这只会造成非常难看的假光。有什么想法吗？

提前致谢， Wezy

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:45:16.720

如果你想使用 Three.js 的灯光（我想不出为什么不这样做的原因），你需要包含相应的着色器块：

1.  看看 WebGLRenderer 如何在 THREE.ShaderLib 中[组合它的着色器](https://github.com/mrdoob/three.js/blob/dev/src/renderers/WebGLShaders.js#L1952)
2.  在那里选择一种接近您想要的材质并将其定义（制服和两个着色器代码）复制到您的代码中，将其重命名为自定义
3.  删除不需要的块，并将自定义代码添加到适当的位置

# sql - 状态更改之间的天数

> ID：14593017
> 
> 赞同：2
> 
> 时间：2013-01-29T22:04:10.813
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有以下解决方案，但我现在需要对其进行更新以使其工作有所不同。这是我现在得到的代码：

```
DECLARE @table TABLE (Status VARCHAR(50),  StartDate DATETIME)

INSERT INTO @table VALUES ('UP', '01/01/2012')
INSERT INTO @table VALUES ('UP', '04/15/2012')
INSERT INTO @table VALUES ('Down','06/12/2012')
INSERT INTO @table VALUES ('UP','10/04/2012')

SELECT
   t1.Status, t1.StartDate, ISNULL(t2.StartDate,GetDate()) AS 'EndDate',
   DateDiff(day,t1.startdate,ISNULL(t2.StartDate,GetDate())) as StatusDays
FROM
   (SELECT Status, StartDate, ROW_NUMBER() OVER 
    (ORDER BY StartDate) AS 'num' FROM @table) t1
LEFT JOIN
   (SELECT Status, StartDate, ROW_NUMBER() OVER 
    (ORDER BY StartDate) AS 'num' FROM @table) t2
    ON t1.num = t2.num-1 
```

这让我得到了结果，但前两行都是 UP。这是我现在得到的。

```
Status  StartDate   EndDate     StatusDays
UP          2012-01-01      2012-04-15      105
UP          2012-04-15      2012-06-12       58
Down        2012-06-12      2012-10-04      114
UP          2012-10-04      2013-01-29      117 
```

所以，我想看看这个总结：

```
Status  StartDate   EndDate     StatusDays
UP          2012-01-01      2012-06-12      163
Down        2012-06-12      2012-10-04      114
UP          2012-10-04      2013-01-29      117 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:58:41.213

以下 T-SQL 不是最优雅的，但它可以完成这项工作：

```
with mycte as 
(
    select t.Status, t.StartDate, ROW_NUMBER() over (order by t.startdate) as rn
    from @table as t
), 
mycte2 as
(
    select m.Status, m.StartDate, ROW_NUMBER() over (order by m.rn) as rn2
    from mycte as m
    where not exists
    (
        select 1
        from mycte as m2
        where m2.rn=m.rn-1 and m2.status=m.Status
    )
)

select m2.Status, m2.StartDate, cast(isnull(m3.StartDate, getdate()) as date) as EndDate, 
    datediff(day,m2.StartDate, cast(isnull(m3.StartDate, getdate()) as date)) as StatusDays
from mycte2 as m2
left outer join mycte2 as m3
    on m3.rn2=m2.rn2+1 
```

# linq - 尝试循环遍历 Linq 查询结果时出错

> ID：14593018
> 
> 赞同：1
> 
> 时间：2013-01-29T22:06:05.440
> 
> 标签：linq, entity-framework

我需要提取与特定值 ( `CourseCode`) 对应的任意数量的记录，并将这些记录插入到另一个表中。只要`Linq`代码只返回一条记录，此代码就可以正常工作，但是如果有更多记录，我会收到以下消息：

> ObjectStateManager 中已存在具有相同键的对象。现有对象处于已修改状态。一个对象只有在被添加的情况下才能再次添加到 ObjectStateManager 中。

下面是我的代码：

```
 if (_db == null) _db = new AgentResourcesEntities();

            var prodCodes = from records in _db.CourseToProduct
                              where records.CourseCode == course.CourseCode
                              select records;

            foreach (var pt in prodCodes.ToList())
            {
                agentProdTraining.SymNumber = symNumber;
                agentProdTraining.CourseCode = course.CourseCode;
                agentProdTraining.ProductCode = pt.ProductCode;
                agentProdTraining.DateTaken = course.DateTaken;
                agentProdTraining.Method = course.Method;
                agentProdTraining.LastChangeOperator = requestor;
                agentProdTraining.LastChangeDate = DateTime.Now;
                agentProdTraining.DateExpired = course.ExpirationDate;
                agentProdTraining.ProductCode = pt.ProductCode;
                agentProdTraining.NoteId = pt.NoteId;

                _db.AgentProductTraining.AddObject(agentProdTraining);
                _db.SaveChanges();

                PtAdded++;

                EventLog.WriteEntry(sSource, "Product Training added", EventLogEntryType.Warning);
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T22:16:32.683

即使属性值已更改，循环也会重新添加相同的 agentProdTraining 对象。为每个循环执行创建一个新实例。

```
foreach (var pt in prodCodes.ToList())
{
  var agentProdTraining = new AgentProductTraining();

  agentProdTraining.SymNumber = symNumber;
  agentProdTraining.CourseCode = course.CourseCode;
  agentProdTraining.ProductCode = pt.ProductCode;
  agentProdTraining.DateTaken = course.DateTaken;
  agentProdTraining.Method = course.Method;
  agentProdTraining.LastChangeOperator = requestor;
  agentProdTraining.LastChangeDate = DateTime.Now;
  agentProdTraining.DateExpired = course.ExpirationDate;
  agentProdTraining.ProductCode = pt.ProductCode;
  agentProdTraining.NoteId = pt.NoteId;

  _db.AgentProductTraining.AddObject(agentProdTraining);
  _db.SaveChanges();

  PtAdded++;

  EventLog.WriteEntry(sSource, "Product Training added", EventLogEntryType.Warning);
} 
```

# eclipse - 从远程分支创建分支 (EGit)

> ID：14593019
> 
> 赞同：2
> 
> 时间：2013-01-29T22:06:40.293
> 
> 标签：eclipse, git, egit

我在 Eclipse Juno 中使用 EGit 2.1.0。

在存储库上，我右键单击**Remote Tracking文件夹中的****origin/master**分支并创建一个新分支：

 **```
Source ref: refs/remotes/origin/master
Branch name: refs/heads/MyFeature
Merge=true
Checkout=true 
```

所以**MyFeature**分支是*基于*其创建时的**origin/master**的内容。因此，在**Local**文件夹中创建了一个本地分支**MyFeature**。

 **如果我配置分支是说：

```
Upstream Branch: refs/heads/master
Remote: origin 
```

我对最后一部分感到困惑。MyFeature分支基于**origin** **/master**。为什么默认从本地 master 分支而不是远程 master 分支（它基于）提取更改？

从命令行你会做：

```
$ git branch --track MyFeature origin/master
Branch MyFeature set up to track remote branch refs/remotes/origin/master. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T22:30:45.127

“上游分支”是指上游存储库中的分支。“ `refs/heads/master`in `origin`” 是另一种（更长但更精确）的表达“ `origin/master`”的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T22:37:44.693

如果您检查 .git/config 文件或运行 git config -l，您将看到以下内容：

```
branch.MyFeature.remote=origin
branch.MyFeature.merge=refs/heads/master 
```

这意味着您的 MyFeature 分支会跟踪原始远程的 refs/heads/master ref（简称 master 分支）。在这种情况下， refs/heads/master 并不意味着您的本地 refs/heads/master，而是从远程的角度来看。因此，当您从遥控器获取/拉取时，它会发送如下消息：“亲爱的 Origin！请将您的 refs/heads/master 发送给我。谢谢。” :)****

# c# - 以多种语言记录和显示 .NET 异常

> ID：14593026
> 
> 赞同：9
> 
> 时间：2013-01-29T22:07:53.847
> 
> 标签：c#, .net, exception-handling, internationalization

我正在数据库中记录我的应用程序的错误消息和 .NET 异常，并将它们显示在 GUI 上。GUI 以运行应用程序的用户所在地区的语言显示错误消息。为了实现这一点，我只记录错误消息的资源名称，并使用资源文件将它们转换为有意义的消息。

但是，我无法理解如何为 .NET 标准异常消息实现相同的目标。我只能记录消息字符串，但是该语言已经“烘焙”，所以我只能以该单一语言显示异常。

有没有办法获取.NET 异常的*资源名称**+ 插入到消息字符串中的所有参数*，以便我可以记录这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-05T14:21:17.587

异常没有*资源名称之类的东西，但有*[类的](http://msdn.microsoft.com/en-us/library/system.exception.hresult%28v=vs.110%29.aspx)[`HResult`属性`Exception`](http://msdn.microsoft.com/en-us/library/system.exception.hresult%28v=vs.110%29.aspx)。标准[.NET 框架异常具有有效且唯一的`HResult`编号](http://msdn.microsoft.com/en-us/library/9ztbc5s1%28v=vs.110%29.aspx)，您可以将其映射到您自己的资源标识符，然后您可以进行翻译。此外，还有一个`Exception.Data`属性，它*可能*包含有关异常的附加信息。

或者，您可以使用正则表达式等手动解析异常消息，然后映射到您的资源 ID，但我认为这太费力了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T22:21:06.590

我也遇到了这个问题，并对此进行了大量研究。根据我所知道的一切，没有办法本地化异常本身，因为您看到的不是本地化字符串，而是实际代码。该代码仅以一种语言（英语）编写，并且只能这样显示。

# c# - CSV 打印问题

> ID：14593030
> 
> 赞同：0
> 
> 时间：2013-01-29T22:08:22.303
> 
> 标签：c#, .net, csv, streamwriter

我有一个写入 csv 两列的程序。一个是比率，形式为 1:100，或类似的形式，另一个是分数。

这些值存储在字典中并按如下方式打印：

```
foreach (String s in p.normalizedScore.Keys)
{
       sw.WriteLine(s + DELIM + p.normalizedScore[s]);
} 
```

其中 sw 是 StreamWriter 而 DELIM 是逗号。输出如下：

1:10,7.498378506

0.111111111,18.46320676

0.736111111,30.08283816

1:10000 ,40.80688802

1:100000 ,51.93716854

1:1000000,62.89993635

1:10000000,73.54010349

分数都是正确的，但有 2 个比率打印不正确（应该增加 10 倍，所以应该有 1:100 和 1:1000）。当我进入调试器时，我发现在打印时，它仍在正确读取所有比率，这意味着我无法在我的代码中找到比率错误的任何地方。有谁知道问题可能是什么？

编辑：上面的输出是直接从 Excel 复制的，但是如果我在记事本中查看它，数据似乎很好，所以在我看来问题出在 Excel 上。（还是不知道你介意什么。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:24:43.087

根据评论 - 这是一个 Excel 格式问题，而不是代码问题。

将 Cory 的评论添加到答案中，因为我认为它增加了重要的价值：

> 如果您在比率周围加上引号，Excel 不应该尝试任何有趣的格式化业务（您不会在 Excel 中看到引号，这只是用于限定您的值的 CSV 规范的一部分）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T22:57:18.033

不要只是双击文件并在 excel 中打开。打开一个新工作表并从文本文件导入。然后，您将指定它是一列文本 - 或者您可以使用文本限定符创建 csv 并在导入中使用它。

或者，您可以在`s`变量前面添加一个空格。

```
sw.WriteLine(" "+ s + DELIM + p.normalizedScore[s]); 
```

'1:10' 不会被视为表达式。

# c++ - 父进程发生了什么？

> ID：14593033
> 
> 赞同：1
> 
> 时间：2013-01-29T22:09:20.757
> 
> 标签：c++, c, linux

这里的任务是：这是一个基本的 C 程序，它必须包含两个进程。第一个在文件中写入 60 个随机数。需要写入的秒数必须读取文件并仅将偶数写入另一个新文件。所以我有这段代码，需要将偶数写入文件的父进程无法正常工作。我的问题是关于代码的结构。这是描述进程的最佳方式吗？

```
#include <stdio.h>
#include <fcntl.h> 

int main() {
    int pid, fd, buf, i, fd2, buf2;
    pid = fork();

    switch (pid) {
    case 0: {
        printf("\n Child process is writing numbers. \n");
        fd = open("file.dat", O_RDWR | O_CREAT, 0644);

        for (i = 0; i < 60; i++) {
            buf = rand() % 20 - 10;
            printf("\n Writing number %d %d ", i + 1, buf);
            write(fd, &buf, sizeof(buf));
        }

        close(fd);
        break;
    }

    case -1: {
        printf("\n Fork error! \n");
    }

    default: {
        wait(pid);
        printf("\n Parent process is Copying numbers. \n");
        fd = open("file.dat", O_RDONLY);
        fd2 = open("file_output.dat", O_RDWR | O_CREAT, 0644);

        while (read(fd, &buf, sizeof(buf)) == sizeof(buf)) {
            if (buf & ~1)
                (buf2 = buf);
            write(fd2, &buf2, sizeof(buf2));
            printf("Writing number in file_output.dat %d \n", buf2);
        }

        close(fd2);
        close(fd);
    }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:25:25.393

你的条件不对：

```
 if (buf &~ 1) (buf2=buf);
    write(fd2, &buf2, sizeof(buf2)); 
```

无论如何，您都写出数字，但如果它是奇数（除了您需要修复偶数/奇数测试），那么您不会更新`buf2`. 如果第一个数字是奇数，`buf2`则未初始化。

你需要这个：

```
 if (buf % 2 != 0) continue;
    write(fd2, &buf, sizeof(buf));
    printf("Writing number in file_output.dat %d \n", buf); 
```

请注意，这可能无法正确测试负偶数。你可以测试一下`abs(buf) % 2 != 0`。唯一可能无法处理的数字是`INT_MIN`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T22:17:26.913

您对偶数的测试是错误的。您排除第 1 位，因此将选择任何大于 1 的数字。你有效地测试

```
if (buf & 0xfffffffe) ... 
```

但是，您应该改为测试

```
if (!(buf & 1)) ... 
```

甚至

```
if ((buf % 2) == 0) ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T22:22:42.807

好吧，代码中有几个错误。

看起来你想要实现这个：孩子写随机数，父母等待孩子终止，读取随机数，只将偶数写入第二个文件。

但是，您使用了 wait()，这是错误的函数。而是像这样使用 waitpid() ：

```
waitpid(pid, NULL, 0); 
```

另一个错误是在您的代码中只写入偶数。我会这样写：

```
if (!(buf & 1))
    write(fd2, &buf1, sizeof(buf1)); 
```

这样，您根本不需要 buf2。事实上，在你当前的代码中，如果数字不是偶数，它仍然会向文件中写入一个数字！它只会写入它再次读取的最后一个偶数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T01:02:07.733

当您可以使用便携式 fopen/fread/fwrite 时，为什么还要使用非便携式 open/read/write？这对我来说毫无意义。

让我们假设您的 sizeof int == 4。假设您的第一个进程写入 4 个字节，无论出于何种原因，您的第二个进程将其读取为两个 2 个字节的块，因此 read 在您的循环中返回 2：`while (read(fd, &buf, sizeof(buf)) == sizeof(buf))`Is 2 == sizeof (buf) ? 不。也许你的循环在错误的条件下终止......

fread 用两个参数解决了这个问题：一个是项目的大小，一个是你想要的项目数。`for (size_t x = fread(&buf, sizeof buf, 1, file_ptr); x > 0; x = fread(&buf, sizeof buf, 1, file_ptr)) { /* ... */ }`...“成功完成后， fread() 应返回成功读取的元素数，仅在遇到读取错误或文件结尾时才小于 nitems。” 此保证不存在用于读取。您可能需要使用 x 来确定要写入的项目数，因为这会告诉您读取了多少项目。

# java - 番石榴不可变版本的 LinkedHashMultimap？

> ID：14593040
> 
> 赞同：3
> 
> 时间：2013-01-29T22:10:26.890
> 
> 标签：java, guava, immutability, multimap

我想创建 LinkedHashMultiMap 的不可变版本。我可以使用 ImmutableMap 和 ImmutableList 推出自己的产品，但想知道是否有办法扩展 Guava 来做到这一点。例如，使用转发或供应商。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T22:29:33.833

目前尚不清楚您是否想要 a`ListMultimap`或 a ，但无论如何`SetMultimap`您几乎可以肯定分别想要`ImmutableListMultimap`和。`ImmutableSetMultimap`像所有不可变集合一样，它仍然会保留与`LinkedHashMultimap`.

Guava 的不可变集合非常刻意不可扩展。

# eclipse - Github 和 Eclipse：并非所有文件都已提交

> ID：14593042
> 
> 赞同：1
> 
> 时间：2013-01-29T22:11:28.357
> 
> 标签：eclipse, github, commit

我在 Eclipse 中使用 Github，并将我的更改提交给它。我已经在我的项目中添加了一些文件，并且我在每个文件中单击了 Team->“添加到索引”，以便在我提交整个项目时提交它们。但是，这些文件不会添加到提交，当我单击“提交”时，它们不会显示在修改文件列表中。我怎样才能强迫他们承诺？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:46:29.573

听起来您可能对 Git wit SVN 的使用感到困惑。在 SVN 中，当您添加要跟踪的文件时，对文件的更新将始终自动提交。

在 Git 中，当您将文件添加到索引时，只会记录该文件的当前版本。如果您随后更新文件并提交，则不会包含新的更新。解决方案是在您提交之前在项目的根目录上执行“添加到索引”：相当于`git add .`在命令行上。确保你`.gitignore`的设置正确，这样你就不会提交你不打算做的事情。

等效的操作是执行 a `git commit -a`，它会自动添加以前在索引中的所有文件并更新所有已删除的文件。我相信 Eclipse（对于 eGit）中的等效设置将**包括选定的未跟踪文件**，如下面的提交设置中所示。

![在此处输入图像描述](../Images/ebddd50fd3fef6385903aa3f94413aba.png)

# css - 为什么设置标签的样式不起作用？

> ID：14593043
> 
> 赞同：1
> 
> 时间：2013-01-29T22:11:33.643
> 
> 标签：css, gwt

我想更改标签中的字体大小和粗细。我确实在 Stack Overflow 上找到了这个： [StackOverflow 文章](https://stackoverflow.com/questions/14090866/gwt-css-styling-part-of-a-label)

然而，它似乎并没有完全回答这个问题，或者我没有得到一些东西。

考虑以下代码：

```
package com.mycompany.project.client;

import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.user.client.ui.HTML;
import com.google.gwt.user.client.ui.RootPanel;
import com.google.gwt.user.client.ui.Label;

/**
 * Entry point classes define <code>onModuleLoad()</code>.
 */
public class StyleTest implements EntryPoint
{
    private final Label lblATestLabel = new Label( "A Test Label" );

    public void onModuleLoad()
    {
        RootPanel rootPanel = RootPanel.get();
        lblATestLabel.setStyleName( "gwt-Label.TestStyle" );

        rootPanel.add( lblATestLabel, 204, 187 );
        lblATestLabel.setSize( "73px", "32px" );

        HTML hlabel = new HTML();
        hlabel.setStyleName("gwt-Label.TestStyle");
        hlabel.setHTML("Brown <span class=\"brown\">fox</span>");

        rootPanel.add(hlabel, 42, 36);
        hlabel.setSize("335px", "41px");
    }
} 
```

StyleTest.css 底部的这种样式：

```
.gwt-Label.TestStyle {
    color: Green;
    vertical-align: middle;
} 
```

我的期望是我的文本将垂直居中并呈绿色。结果根本没有变化。我可以设置任何我想要的样式，并且标签或 HTML 标签都没有变化。一切看起来都很正常，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:59:11.067

`setStyleName`设置小部件元素的`class`属性（实际上是`className`属性，但这是等价的）；so`lblATestLabel.setStyleName("gwt-Label.TestStyle")`等同于`<div class="gwtLabel.TestStyle">`在 HTML 中具有 a ，即具有单个类`gwt-Label.TestStyle`(`class=""`是空格分隔的) 的元素。

另一方面，`.gwt-Label.TestStyle`作为 CSS 样式表中的选择器，将匹配具有`gwt-label`和`TestStyle`类的任何元素；这将是一个元素，例如`<div class="gwt-Label TestStyle">`（记住：`class=""`是空格分隔的）

因此，根据您的需要，修复您的选择器（`.gwt-Label\.TestStyle`，可能不适用于所有浏览器），重命名您的类（例如`gwt-Label-TestStyle`）或**将**一个类添加到现有的（对于`Label`小部件）`gwt-Label`一个（`lblATestLabel.addStyleName("TestStyle")`）

# java - JavaFX 未在 Netbeans 中编译

> ID：14593046
> 
> 赞同：1
> 
> 时间：2013-01-29T22:11:51.617
> 
> 标签：java, macos, netbeans, javafx, java-7

我正在使用 Mac OS X、Netbeans 7.3 Beta 2 和 JDK 7 u12。

Netbeans 看不到 JavaFX 库。我认为 JavaFX 库随 JDK 7 一起提供？

Netbeans 看到并使用 JDK 7（来自 JDK 6，我现在丢失了我的视网膜图标和文本！），但是当我尝试添加一个库时，没有可用的 JavaFX 库。

我已经完成了 Netbeans 网站上显示的步骤来配置和创建 JavaFX 应用程序，在那里我发现 OS XI 需要 JDK 7，但我没有运气。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:30:36.837

约翰，

您可以尝试在 Oracle JavaFX 2.0 及更高版本论坛上发布您的问题： [https ://forums.oracle.com/forums/forum.jspa?forumID=1385](https://forums.oracle.com/forums/forum.jspa?forumID=1385)

请随时将您的问题的 URL 发送给我@JavaFXpert，我会跟进以确保得到答复。

谢谢，吉姆·韦弗

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T22:45:45.917

jdk7u12 仍是预发布软件，可能与 NetBeans 不兼容。

具体来说，JavaFX 结构的最新变化是[HEADS-UP：jfxrt.jar 移至 jre/lib/ext](http://mail.openjdk.java.net/pipermail/openjfx-dev/2013-January/005677.html)。如果您尝试将 jdk7u12 与 JavaFX 结构更改之前编码的 NetBeans 版本（例如 NetBeans 7.3 beta 2）一起使用，它可能无法开箱即用。同时，我建议使用[jdk 的生产版本](http://www.oracle.com/technetwork/java/javase/downloads/index.html)（例如 jdk7u11），直到 NetBeans 更新其软件以与重新定位的`jfxrt.jar`库一起正常工作。

我知道您注意到您已按照 NetBeans 网站上的步骤进行操作，但您没有链接到它们。确保您已按照[NetBeans JavaFX 设置教程](http://netbeans.org/kb/docs/java/javafx-setup.html)中的详细说明正确配置了 NetBeans JavaFX 平台（尽管该教程目前适用于 NetBeans 7.1 和 7.2，但希望它也适用于您的 7.3 测试版）。此外，请确保在创建项目时，在 NetBeans 中创建“JavaFX 应用程序”——而不是常规的“Java 应用程序”。

如果您仍然遇到问题，请在您的问题中列出您的编译错误。

> 当我尝试添加库时，没有可用的 JavaFX 库。

JavaFX 未配置为 NetBeans 上的库 - 它是“JavaFX 平台”的一部分，如本答案中的设置链接中所述。

> 来自 JDK 6 我现在丢失了我的视网膜图标和文本！

有点不相关，但 JDK8 中的 JavaFX 将支持视网膜显示器（计划于 2013 年 9 月发布数据）。

# delphi - 通过无线电组选择搜索表

> ID：14593051
> 
> 赞同：1
> 
> 时间：2013-01-29T22:12:33.420
> 
> 标签：delphi, ms-access, delphi-xe3

我正在创建一个使用 OLEDB 4.0 连接到 MS ACCESS 数据库的 Delphi XE3 应用程序。我已经在这些表上保存了一些信息，但现在我想开发一个“搜索内容表单”

我想有一个无线电组供用户选择他想如何搜索数据库中每个表的内容。喜欢：按姓名、按日期或按年龄。然后有一个 TEdit 供用户动态键入他在该特定表上查找的内容。

我正在使用 TADOconnection 和 ADOtables。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:35:49.753

假设你有 3 列`Name`，你可能会尝试这样的事情`Date`。`Age`您需要一个计时器，其间隔设置为搜索词写入间隔（例如 1000 毫秒），然后是一个包含 3 个项目的单选组，其中第一个是名称，第二个是日期，第三个是年龄搜索词选择。然后你需要有一个搜索编辑框本身并处理以下事件：

```
procedure TForm1.Edit1Change(Sender: TObject);
begin
  Timer1.Enabled := False;
  Timer1.Enabled := True;
end;

procedure TForm1.RadioGroup1Click(Sender: TObject);
begin
  Timer1.Enabled := False;
  Timer1.Enabled := True;
end;

procedure TForm1.Timer1Timer(Sender: TObject);
begin
  Timer1.Enabled := False;
  ADOTable1.Filtered := False;
  if Edit1.Text <> '' then
  begin
    case RadioGroup1.ItemIndex of
      0: ADOTable1.Filter := 'Name';
      1: ADOTable1.Filter := 'Date';
      2: ADOTable1.Filter := 'Age';
    end;
    ADOTable1.Filter := ADOTable1.Filter + ' LIKE ' + QuotedStr(Edit1.Text);
    ADOTable1.Filtered := True;
  end;
end; 
```

# ruby - 如何在 Windows 上安装 rmagick gem？

> ID：14593055
> 
> 赞同：8
> 
> 时间：2013-01-29T22:12:48.183
> 
> 标签：ruby, rubygems, gem, imagemagick, rmagick

如何为 Windows XP 安装 rmagick gem？我已经安装了带有头文件的 ImageMagick，并安装了 DevKit 附带的 RailsInstaller.org。我不知道在哪里可以解决这些错误。

```
C:\RailsInstaller\ImageMagick-6.8.2-Q16>ruby -v
ruby 1.9.3p125 (2012-02-16) [i386-mingw32]

C:\RailsInstaller\ImageMagick-6.8.2-Q16>gem -v
1.8.16

C:\RailsInstaller\ImageMagick-6.8.2-Q16>path=%PATH%;C:\RailsInstaller\ImageMagick-6.8.2-Q16

C:\RailsInstaller\ImageMagick-6.8.2-Q16>identify
Version: ImageMagick 6.8.2-0 2013-01-24 Q16 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2013 ImageMagick Studio LLC

C:\RailsInstaller\ImageMagick-6.8.2-Q16>gem install rmagick
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
ERROR:  Error installing rmagick:
        ERROR: Failed to build gem native extension.
        C:/RailsInstaller/Ruby1.9.3/bin/ruby.exe extconf.rb
checking for Ruby version >= 1.8.5... yes
Invalid drive specification.
Unable to get ImageMagick version
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
        --with-opt-dir
        --without-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=C:/RailsInstaller/Ruby1.9.3/bin/ruby

Gem files will remain installed in C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rmagick-2.13.1 for inspection.
Results logged to C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rmagick-2    .13.1/ext/RMagick/gem_make.out

C:\RailsInstaller\ImageMagick-6.8.2-Q16>dir include
 Volume in drive C has no label.
 Volume Serial Number is F8E5-EDB8

 Directory of C:\RailsInstaller\ImageMagick-6.8.2-Q16\include

01/29/2013  04:33 PM    <DIR>          .
01/29/2013  04:33 PM    <DIR>          ..
01/29/2013  04:33 PM    <DIR>          magick
01/29/2013  04:33 PM    <DIR>          Magick++
09/05/2009  04:47 PM               419 Magick++.h
01/29/2013  04:33 PM    <DIR>          wand 
```

这是 gem_make.out 的内容

```
C:/RailsInstaller/Ruby1.9.3/bin/ruby.exe extconf.rb
checking for Ruby version >= 1.8.5... yes
Invalid drive specification.
Unable to get ImageMagick version
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
        --with-opt-dir
        --without-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=C:/RailsInstaller/Ruby1.9.3/bin/ruby 
```

这是 extconf.rb 的内容

```
require "mkmf"
require "date"

RMAGICK_VERS = "2.13.1"
MIN_RUBY_VERS = "1.8.5"
MIN_RUBY_VERS_NO = MIN_RUBY_VERS.tr(".","").to_i
MIN_IM_VERS = "6.4.9"
MIN_IM_VERS_NO = MIN_IM_VERS.tr(".","").to_i

# Test for a specific value in an enum type
def have_enum_value(enum, value, headers=nil, &b)
  checking_for "#{enum}.#{value}" do
    if try_compile(<<"SRC", &b)
#{COMMON_HEADERS}
#{cpp_include(headers)}
/*top*/
int main() { #{enum} t = #{value}; t = t; return 0; }
SRC
      $defs.push(format("-DHAVE_ENUM_%s", value.upcase))
      true
    else
      false
    end
  end
end

# Test for multiple values of the same enum type
def have_enum_values(enum, values, headers=nil, &b)
  values.each do |value|
    have_enum_value(enum, value, headers, &b)
  end
end

def exit_failure(msg)
  Logging::message msg
  message msg+"\n"
  exit(1)
end

# Seems like lots of people have multiple versions of ImageMagick installed.
def check_multiple_imagemagick_versions()
   versions = []
   path = ENV['PATH'].split(File::PATH_SEPARATOR)
   path.each do |dir|
      file = File.join(dir, "Magick-config")
      if File.executable? file
         vers = `#{file} --version`.chomp.strip
         prefix = `#{file} --prefix`.chomp.strip
         versions << [vers, prefix, dir]
      end
   end
   versions.uniq!
   if versions.size > 1
      msg = "\nWarning: Found more than one ImageMagick installation. This could cause problems at runtime.\n"
      versions.each do |vers, prefix, dir|
         msg << "         #{dir}/Magick-config reports version #{vers} is installed in #{prefix}\n"
      end
      msg << "Using #{versions[0][0]} from #{versions[0][1]}.\n\n"
      Logging::message msg
      message msg
   end
end

# Ubuntu (maybe other systems) comes with a partial installation of
# ImageMagick in the prefix /usr (some libraries, no includes, and no
# binaries). This causes problems when /usr/lib is in the path (e.g., using
# the default Ruby installation).
def check_partial_imagemagick_versions()
   prefix = config_string("prefix")
   matches = [
     prefix+"/lib/lib?agick*",
     prefix+"/include/ImageMagick",
     prefix+"/bin/Magick-config",
   ].map do |file_glob|
     Dir.glob(file_glob)
   end
   matches.delete_if { |arr| arr.empty? }
   if 0 < matches.length and matches.length < 3
      msg = "\nWarning: Found a partial ImageMagick installation. Your operating system likely has some built-in ImageMagick libraries but not all of ImageMagick. This will most likely cause problems at both compile and runtime.\nFound partial installation at: "+prefix+"\n"
      Logging::message msg
      message msg
   end
end

if RUBY_PLATFORM =~ /mswin/
  abort <<END_MSWIN
+----------------------------------------------------------------------------+
| This rmagick gem is for use only on Linux, BSD, OS X, and similar systems  |
| that have a gnu or similar toolchain installed. The rmagick-win32 gem is a |
| pre-compiled version of RMagick bundled with ImageMagick for use on        |
| Microsoft Windows systems. The rmagick-win32 gem is available on RubyForge.|
| See http://rmagick.rubyforge.org/install-faq.html for more information.    |
+----------------------------------------------------------------------------+
END_MSWIN
end

unless checking_for("Ruby version >= #{MIN_RUBY_VERS}") do
  version = RUBY_VERSION.tr(".","").to_i
  version >= MIN_RUBY_VERS_NO
end
  exit_failure "Can't install RMagick #{RMAGICK_VERS}. Ruby #{MIN_RUBY_VERS} or later required.\n"
end

# Magick-config is not available on Windows
if RUBY_PLATFORM !~ /mswin|mingw/

  # Check for compiler. Extract first word so ENV['CC'] can be a program name with arguments.
  cc = (ENV["CC"] or Config::CONFIG["CC"] or "gcc").split(' ').first
  unless find_executable(cc)
    exit_failure "No C compiler found in ${ENV['PATH']}. See mkmf.log for details."
  end

  # Check for Magick-config
  unless find_executable("Magick-config")
    exit_failure "Can't install RMagick #{RMAGICK_VERS}. Can't find Magick-config in #{ENV['PATH']}\n"
  end

  check_multiple_imagemagick_versions()
  check_partial_imagemagick_versions()

  # Ensure minimum ImageMagick version
  unless checking_for("ImageMagick version >= #{MIN_IM_VERS}")  do
    version = `Magick-config --version`.chomp.tr(".","").to_i
    version >= MIN_IM_VERS_NO
  end
    exit_failure "Can't install RMagick #{RMAGICK_VERS}. You must have ImageMagick #{MIN_IM_VERS} or later.\n"
  end

  $magick_version = `Magick-config --version`.chomp

  # Ensure ImageMagick is not configured for HDRI
  unless checking_for("HDRI disabled version of ImageMagick") do
    not (`Magick-config --version`["HDRI"])
  end
    exit_failure "\nCan't install RMagick #{RMAGICK_VERS}."+
           "\nRMagick does not work when ImageMagick is configured for High Dynamic Range Images."+
           "\nDon't use the --enable-hdri option when configuring ImageMagick.\n"
  end

  # Save flags
  $CFLAGS     = ENV["CFLAGS"].to_s   + " " + `Magick-config --cflags`.chomp
  $CPPFLAGS   = ENV["CPPFLAGS"].to_s + " " + `Magick-config --cppflags`.chomp
  $LDFLAGS    = ENV["LDFLAGS"].to_s  + " " + `Magick-config --ldflags`.chomp
  $LOCAL_LIBS = ENV["LIBS"].to_s     + " " + `Magick-config --libs`.chomp

elsif RUBY_PLATFORM =~ /mingw/  # mingw

  `convert -version` =~ /Version: ImageMagick (\d+\.\d+\.\d+)-\d+ /
  abort "Unable to get ImageMagick version" unless $1
  $magick_version = $1
  $LOCAL_LIBS = '-lCORE_RL_magick_ -lX11'

else  # mswin

  `convert -version` =~ /Version: ImageMagick (\d+\.\d+\.\d+)-\d+ /
  abort "Unable to get ImageMagick version" unless $1
  $magick_version = $1
  $CFLAGS = "-W3"
  $CPPFLAGS = %Q{-I"C:\\Program Files\\Microsoft Platform SDK for Windows Server 2003 R2\\Include" -I"C:\\Program Files\\ImageMagick-#{$magick_version}-Q8\\include"}
  # The /link option is required by the Makefile but causes warnings in the mkmf.log file.
  $LDFLAGS = %Q{/link /LIBPATH:"C:\\Program Files\\Microsoft Platform SDK for Windows Server 2003 R2\\Lib" /LIBPATH:"C:\\Program Files\\ImageMagick-#{$magick_version}-Q8\\lib" /LIBPATH:"C:\\ruby\\lib"}
  $LOCAL_LIBS = 'CORE_RL_magick_.lib X11.lib'

end

#headers = %w{assert.h ctype.h errno.h float.h limits.h math.h stdarg.h stddef.h stdint.h stdio.h stdlib.h string.h time.h}
headers = %w{assert.h ctype.h stdio.h stdlib.h math.h time.h}
headers << "stdint.h" if have_header("stdint.h")  # defines uint64_t
headers << "sys/types.h" if have_header("sys/types.h")

if have_header("wand/MagickWand.h")
   headers << "wand/MagickWand.h"
else
   exit_failure "\nCan't install RMagick #{RMAGICK_VERS}. Can't find MagickWand.h."
end

if RUBY_PLATFORM !~ /mswin|mingw/

  unless have_library("MagickCore", "InitializeMagick", headers) || have_library("Magick", "InitializeMagick", headers) || have_library("Magick++","InitializeMagick",headers)
    exit_failure "Can't install RMagick #{RMAGICK_VERS}. " +
           "Can't find the ImageMagick library or one of the dependent libraries. " +
           "Check the mkmf.log file for more detailed information.\n"
  end
end

have_func("snprintf", headers)
  ["AcquireImage",                   # 6.4.1
   "AffinityImage",                  # 6.4.3-6
   "AffinityImages",                 # 6.4.3-6
   "AutoGammaImageChannel",          # 6.5.5-1
   "AutoLevelImageChannel",          # 6.5.5-1
   "BlueShiftImage",                 # 6.5.4-3
   "ConstituteComponentTerminus",    # 6.5.7-9
   "DeskewImage",                    # 6.4.2-5
   "EncipherImage",                  # 6.3.8-6
   "EqualizeImageChannel",           # 6.3.6-9
   "FloodfillPaintImage",            # 6.3.7
   "FunctionImageChannel",           # 6.4.8-8
   "GetAuthenticIndexQueue",         # 6.4.5-6
   "GetAuthenticPixels",             # 6.4.5-6
   "GetImageAlphaChannel",           # 6.3.9-2
   "GetVirtualPixels",               # 6.4.5-6
   "LevelImageColors",               # 6.4.2
   "LevelColorsImageChannel",        # 6.5.6-4
   "LevelizeImageChannel",           # 6.4.2
   "LiquidRescaleImage",             # 6.3.8-2
   "MagickLibAddendum",              # 6.5.9-1
   "OpaquePaintImageChannel",        # 6.3.7-10
   "QueueAuthenticPixels",           # 6.4.5-6
   "RemapImage",                     # 6.4.4-0
   "RemoveImageArtifact",            # 6.3.6
   "SelectiveBlurImageChannel",      # 6.5.0-3
   "SetImageAlphaChannel",           # 6.3.6-9
   "SetImageArtifact",               # 6.3.6
   "SetMagickMemoryMethods",         # 6.4.1
   "SparseColorImage",               # 6.3.6-?
   "SyncAuthenticPixels",            # 6.4.5-6
   "TransparentPaintImage",          # 6.3.7-10
   "TransparentPaintImageChroma"     # 6.4.5-6
   ].each do |func|
    have_func(func, headers)
  end

checking_for("QueryMagickColorname() new signature")  do
  if try_compile(<<"SRC")
#{COMMON_HEADERS}
#{cpp_include(headers)}
/*top*/
int main() {
  MagickBooleanType okay;
  Image *image;
  MagickPixelPacket *color;
  char *name;
  ExceptionInfo *exception;
  okay = QueryMagickColorname(image, color, SVGCompliance, name, exception);
  return 0;
  }
SRC
    $defs.push("-DHAVE_NEW_QUERYMAGICKCOLORNAME")
    true
  else
    false
  end
end

have_struct_member("Image", "type", headers)          # ???
have_struct_member("DrawInfo", "kerning", headers)    # 6.4.7-8
have_struct_member("DrawInfo", "interline_spacing", headers)   # 6.5.5-8
have_struct_member("DrawInfo", "interword_spacing", headers)   # 6.4.8-0
have_type("DitherMethod", headers)                    # 6.4.2
have_type("MagickFunction", headers)                  # 6.4.8-8
have_type("ImageLayerMethod", headers)                # 6.3.6 replaces MagickLayerMethod
have_type("long double", headers)
#have_type("unsigned long long", headers)
#have_type("uint64_t", headers)
#have_type("__int64", headers)
#have_type("uintmax_t", headers)
#check_sizeof("unsigned long", headers)
#check_sizeof("Image *", headers)

have_enum_values("AlphaChannelType", ["CopyAlphaChannel",                    # 6.4.3-7
                                      "BackgroundAlphaChannel"], headers)    # 6.5.2-5
have_enum_values("CompositeOperator", ["BlurCompositeOp",                    # 6.5.3-7
                                       "DistortCompositeOp",                 # 6.5.3-10
                                       "LinearBurnCompositeOp",              # 6.5.4-3
                                       "LinearDodgeCompositeOp",             # 6.5.4-3
                                       "MathematicsCompositeOp",             # 6.5.4-3
                                       "PegtopLightCompositeOp",             # 6.5.4-3
                                       "PinLightCompositeOp",                # 6.5.4-3
                                       "VividLightCompositeOp"], headers)    # 6.5.4-3
have_enum_values("CompressionType", ["DXT1Compression",                      # 6.3.9-3
                                     "DXT3Compression",                      # 6.3.9-3
                                     "DXT5Compression",                      # 6.3.9-3
                                     "ZipSCompression",                      # 6.5.5-4
                                     "PizCompression",                       # 6.5.5-4
                                     "Pxr24Compression",                     # 6.5.5-4
                                     "B44Compression",                       # 6.5.5-4
                                     "B44ACompression"], headers)            # 6.5.5-4

have_enum_values("DistortImageMethod", ["BarrelDistortion",                  # 6.4.2-5
                                        "BarrelInverseDistortion",           # 6.4.3-8
                                        "BilinearForwardDistortion",         # 6.5.1-2
                                        "BilinearReverseDistortion",         # 6.5.1-2
                                        "DePolarDistortion",                 # 6.4.2-6
                                        "PolarDistortion",                   # 6.4.2-6
                                        "PolynomialDistortion",              # 6.4.2-4
                                        "ShepardsDistortion"], headers)      # 6.4.2-4
have_enum_value("DitherMethod", "NoDitherMethod", headers)                   # 6.4.3
have_enum_values("FilterTypes", ["KaiserFilter",                             # 6.3.6
                                 "WelshFilter",                              # 6.3.6-4
                                 "ParzenFilter",                             # 6.3.6-4
                                 "LagrangeFilter",                           # 6.3.7-2
                                 "BohmanFilter",                             # 6.3.7-2
                                 "BartlettFilter",                           # 6.3.7-2
                                 "SentinelFilter"], headers)                 # 6.3.7-2
have_enum_values("MagickEvaluateOperator", ["PowEvaluateOperator",           # 6.4.1-9
                                           "LogEvaluateOperator",            # 6.4.2
                                           "ThresholdEvaluateOperator",      # 6.4.3
                                           "ThresholdBlackEvaluateOperator", # 6.4.3
                                           "ThresholdWhiteEvaluateOperator", # 6.4.3
                                           "GaussianNoiseEvaluateOperator",  # 6.4.3
                                           "ImpulseNoiseEvaluateOperator",   # 6.4.3
                                           "LaplacianNoiseEvaluateOperator", # 6.4.3
                                           "MultiplicativeNoiseEvaluateOperator", # 6.4.3
                                           "PoissonNoiseEvaluateOperator",   # 6.4.3
                                           "UniformNoiseEvaluateOperator",   # 6.4.3
                                           "CosineEvaluateOperator",         # 6.4.8-5
                                           "SineEvaluateOperator",           # 6.4.8-5
                                           "AddModulusEvaluateOperator"],    # 6.4.8-5
                                                                 headers)
have_enum_values("MagickFunction", ["ArcsinFunction",                        # 6.5.2-8
                                    "ArctanFunction",                        # 6.5.2-8
                                    "PolynomialFunction",                    # 6.4.8-8
                                    "SinusoidFunction"], headers)            # 6.4.8-8
have_enum_values("ImageLayerMethod", ["FlattenLayer",                           # 6.3.6-2
                                      "MergeLayer",                             # 6.3.6
                                      "MosaicLayer",                            # 6.3.6-2
                                      "TrimBoundsLayer" ], headers)             # 6.4.3-8
have_enum_values("VirtualPixelMethod", ["HorizontalTileVirtualPixelMethod",     # 6.4.2-6
                                        "VerticalTileVirtualPixelMethod",       # 6.4.2-6
                                        "HorizontalTileEdgeVirtualPixelMethod", # 6.5.0-1
                                        "VerticalTileEdgeVirtualPixelMethod",   # 6.5.0-1
                                        "CheckerTileVirtualPixelMethod"],       # 6.5.0-1
                                                                 headers)

# Now test Ruby 1.9.0 features.
headers = ["ruby.h"]
if have_header("ruby/io.h")
   headers << "ruby/io.h"
else
   headers << "rubyio.h"
end

have_func("rb_frame_this_func", headers)

# Miscellaneous constants
$defs.push("-DRUBY_VERSION_STRING=\"ruby #{RUBY_VERSION}\"")
$defs.push("-DRMAGICK_VERSION_STRING=\"RMagick #{RMAGICK_VERS}\"")

create_header()
# Prior to 1.8.5 mkmf duplicated the symbols on the command line and in the
# extconf.h header. Suppress that behavior by removing the symbol array.
$defs = []

# Force re-compilation if the generated Makefile changed.
$config_h = "Makefile rmagick.h"

create_makefile("RMagick2")

SUMMARY = <<"END_SUMMARY"

#{"=" * 70}
#{DateTime.now.strftime("%a %d%b%y %T")}
This installation of RMagick #{RMAGICK_VERS} is configured for
Ruby #{RUBY_VERSION} (#{RUBY_PLATFORM}) and ImageMagick #{$magick_version}
#{"=" * 70}

END_SUMMARY

Logging::message SUMMARY
message SUMMARY 
```

这是 mkmf.log 的内容

```
checking for Ruby version >= 1.8.5... -------------------- yes

-------------------- 
```

我也有 Cygwin 并在那里尝试过，但遇到了不同的 ruby​​ 相关错误。我可以看到一些错误，例如“无效的驱动器规格”，但我不知道这是从哪里来的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T01:27:13.927

RMagic 不适用于 ImageMagic 6.8。我用详细的说明更新了 RMagick Github wiki。

[https://github.com/rmagick/rmagick/wiki](https://github.com/rmagick/rmagick/wiki)

在那里我发现了宝石（哈哈），例如

> 如果 ImageMagick 不是系统路径中的第一个，当 extconf.rb 尝试识别 ImageMagick 版本时，您将收到“无效的驱动器规范”错误。

和

```
gem install rmagick -- '--with-opt-dir="[path to ImageMagick]"' 
```

（很明显吧？）

我相信 RMagick 是一个死项目。已经2年没有提交了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T22:24:04.850

您应该使用 rmagick-win32：

[http://rmagick.rubyforge.org/install-faq.html#win](http://rmagick.rubyforge.org/install-faq.html#win)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-14T07:15:05.263

试试这个视频，它完成了窗口 7 的安装过程。我按照这些步骤操作，它对我有用。

[http://www.youtube.com/watch?v=gEWAVlNCKhg&feature=youtu.be](http://www.youtube.com/watch?v=gEWAVlNCKhg&feature=youtu.be)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-02T09:45:41.213

在管理员模式下启动命令提示符。设置 CPATH 和 LIBRARY_PATH 环境变量分别指向 ImageMagick 安装目录的 include 和 lib 子目录（这样 DevKit 会在构建时找到它们）

> 设置 CPATH=C:\Program Files (x86)\ImageMagick-6.7.9-Q16\include 设置 LIBRARY_PATH=C:\Program Files (x86)\ImageMagick-6.7.9-Q16\lib

然后启动一个新的命令提示符并

> 宝石安装 rmagick

这对我有用！[在http://www.redmine.org/projects/redmine/wiki/HowTo_install_rmagick_gem_on_Windows](http://www.redmine.org/projects/redmine/wiki/HowTo_install_rmagick_gem_on_Windows)中查看结果

# php - 清理 Magento Google Api OAuth2 集成

> ID：14593056
> 
> 赞同：6
> 
> 时间：2013-01-29T22:12:49.330
> 
> 标签：php, magento, google-api, oauth-2.0, google-api-client

**简短的问题：** 在 Magento 中为管理区域实施 Google Api OAuth2 身份验证的最简洁方法是什么

**长问题：** 所有新的 Google API 都使用 OAuth2。php 客户端库在这里，它抽象了 OAuth2 处理 [https://code.google.com/p/google-api-php-client/](https://code.google.com/p/google-api-php-client/)

过程很简单

*   用户是否有 AccessToken？
*   不
*   好的，使用客户端库创建登录 url
*   用户点击登录 url 链接，将他们带到谷歌登录
*   一旦经过身份验证，Google 将通过指定的重定向 url 重定向回 Magento
*   Google 将 AccessToken 作为 url 的一部分发回。存储它。
*   使用此 AccessToken 调用各种 API

客户端库中的示例都是平面文件。因此，我正在寻找将其放入 MVC 结构的最佳方法……或者准确地说是 Magento。

让我们具体一点。它检索谷歌通讯录。到目前为止，我有：

*   一个名为 ContactsController 的管理控制器，带有索引操作。它做的第一件事是检查是否有访问令牌。如果没有访问令牌，它将转发到身份验证操作。
*   auth 操作只是呈现一个块，该块具有由 google php 客户端库“createAuthUrl()”生成的 AuthUrl
*   单击链接时，谷歌登录页面会加载并登录
*   Google 会重定向回我在代码中指定的 URL（以及 Google API 控制台[https://code.google.com/apis/console](https://code.google.com/apis/console)）。他们还传回访问令牌。此 URL 必须是可预测的，因此它不能是管理区域 url，因为它们依赖于“key”url 参数。因此，我为 Google 创建了一个前端控制器和操作以重定向回。
*   在前端控制器中，我存储了 AccessToken。
*   然后我重定向回管理控制器 ContactsController 索引操作。它看到一个 AccessToken 并且应用程序实际上可以做一些事情。

我遇到的问题是我无法进行最终重定向。即使我使用的是 adminhtml 助手 getUrl 方法，它确实附加了“key”url 参数，但当我从前端重定向到后端时，我被踢到了仪表板。

有没有更好的方法在 Magento 中实现 Googles OAuth2？

如何重定向到直接管理员 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T23:27:25.327

仅呈现登录链接的整个身份验证操作毫无意义。

一旦 adminhtml_contacts/index 操作意识到没有访问令牌，它就能够使用 Google_Client::createAuthUrl 来确定应该将用户发送到哪里。那么为什么要麻烦把它放到一个实际的链接中呢？相反，我只是立即将它们重定向到 authUrl。

如果用户已经登录谷歌，那么他们不需要做任何事情。Google 看到他们已登录并立即重定向回我指定的（且可预测的）前端控制器操作。

此前端控制器操作存储访问令牌，我重定向回 adminhtml_contacts/index 操作。由于上面指定的 'key' url 参数跨站点请求伪造保护问题，它仍然无法正常工作。

为了解决这个问题，我使用管理控制器中的 preDispatch 挂钩关闭了此操作的密钥。

```
public function preDispatch()
{ 
     if ($this->getRequest()->getActionName() == 'index') Mage::getSingleton('adminhtml/url')->turnOffSecretKey();
     parent::preDispatch();
} 
```

它并不理想，但可以工作，这意味着我实际上可以开始处理 api 而不是乱搞身份验证。

现在要掌握没有客户端抽象的联系人 API，因此我必须深入研究 SimpleXml 命名空间问题和繁琐的 DOMDocument 操作。嘿嗬。

# jquery - 上传 400 错误请求

> ID：14593057
> 
> 赞同：0
> 
> 时间：2013-01-29T22:12:52.590
> 
> 标签：jquery, uploadify

我只是在我的网站上实现 Jquery Uploadify-Plugin。这是代码：

```
$('#uploadbtn').uploadify({
    'debug'    : true,
    'fileTypeDesc' : imagestxt,
    'removeCompleted' : false,
    'uploadLimit' : 40,
    'auto'     : false,
    'queueID'  : 'uploadqueue',
    'fileTypeExts' : '*.jpg; *.jpeg; *.png; *.gif', 
    'buttonClass' : 'uploadbtn',
    'fileSizeLimit' : '5MB',
    'buttonText' : uploadbtntext,
    'swf'      : '../../js/uploadify.swf',
    'uploader' : '../../actions/upload.php',
    'width' : '200',
    'method'   : 'post',
    'onDialogClose'  : function(queueData) {
       if (queueData.queueLength > 0) 
       {
            $(".uploadinstructions").hide();
            $(".albumoptions").show();
            $("#startupload").removeAttr("disabled");
            $(document).blur();
       }
    },
    'onUploadSuccess' : function(file, data, response) {
    alert('The file was saved to: ' + data);
    },
    'onUploadComplete' : function(file) {
        $("#startupload").removeAttr("disabled");
    },
    'onComplete' : function (event, queueID, fileObj, response, data) {
        alert(response);
    }
}); 
```

问题是，当我上传文件时，我在弹出窗口中收到一条错误消息，上面写着（400 Bad Request）。Firebug 中没有显示连接，可能是因为 Flash 应用程序。任何想法，如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:10:29.417

我自己找到了答案，这非常愚蠢和容易，我只需要改变这个：

```
'swf'      : '../../js/uploadify.swf',
'uploader' : '../../actions/upload.php', 
```

对此：

```
'swf'      : '../js/uploadify.swf',
'uploader' : '../actions/upload.php', 
```

# javascript - 在准备好文档时模拟按键

> ID：14593062
> 
> 赞同：0
> 
> 时间：2013-01-29T22:13:05.797
> 
> 标签：javascript, jquery, keypress

我是 JavaScript 和 jQuery 的新手，我想制作自己的起始页。

不幸的是，每次我想搜索时，我都必须点击搜索栏/多功能框（chrome）。我可以使用 JavaScript/jQuery 自动执行此操作吗？按下`F6`将专注于搜索栏。

我想要什么：JavaScript/jQuery 模拟`F6`文档准备好的按键。我发现我无法上班的代码：

```
$(document).ready(function(){
$(jQuery.Event('keypress', {which: 117}));
}); 
```

117 是`F6`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T22:19:29.730

**你不能这样做**，仅仅因为它超出了网页应该做的范围，并且不出所料 Chrome 会阻止这种行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T22:23:28.247

我认为您编写的代码会将 F6 信号发送到您的网站，而不是您的网络浏览器。我怀疑您可以使用 javascript 将密钥库发送到 Web 浏览器，这会是一个安全漏洞吗？

您可以获得的最接近的可能是实现自己的搜索框（使用 Google API）并捕获 F6 事件以关注此搜索框

# javascript - TransitionEnd 过早触发

> ID：14593063
> 
> 赞同：1
> 
> 时间：2013-01-29T22:13:12.033
> 
> 标签：javascript, jquery, html, css, animation

我正在尝试使用 jQuery 和 css 转换对一些动画进行排序。看起来容器宽度应该动画，直到小部件完成从“顶部”css更改的过渡之后，但它们一起触发。

为什么

```
 widget.one('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend', function(i) {

            widget.css({'top': top});

            widget.one('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend', function(i) {

                container.css({'width': "19%"})

            });

        }); 
```

以与此相同的顺序制作动画？

```
 widget.one('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend', function(i) {

            widget.css({'top': top});

        });

        widget.one('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend', function(i) {

            container.css({'width': "19%"})

        }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T22:33:58.177

在您的第一个示例中，您需要在添加 transitionEnd 事件之前设置 css。我相信这是你出错的地方。

```
widget.css({
    'top': '200px'
}).one('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend', function (i) {

    widget.css({
        'top': '0px'
    }).one('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend', function (i) {

        container.css({
            'width': "300px"
        }).one('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend', function (i) {

            container.css({
                'width': "50px"
            }).one('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend', function (i) {

                widget.css({
                    'width': "400px"
                })

            });
        });

    });

}); 
```

只要您使用`one`而不是`on`使用 jQuery，链接转换就可以正常工作。

看到这个jsFiddle：

[http://jsfiddle.net/gordyr/NSCd5/3/](http://jsfiddle.net/gordyr/NSCd5/3/)

我不确定你是否在做不同的事情，但希望这会有所帮助。

虽然我个人会将它包装成一个辅助函数以避免编写太多浏览器特定的代码......像这样的东西（未经测试）：

```
$.fn.transition = function(props, callback){
              $(this).css(props).one('webkitTransitionEnd otransitionend oTransitionEndmsTransitionEnd transitionend', function (i) {
                    if(typeof callback == 'function'){
                            callback();
                    }
              });
        return this;
}); 
```

像这样使用：

```
$(element).transition({top:'0px'}, function(){
      $(this).transition({top:'100px'}, function(){
          $(this).transition({top:'400px'}, function(){
               //Do something else
          });
    });
}); 
```

虽然使用缓存的元素而不是`$(this)`每次都受到当然...

# android - Android：将文件保存到以后可以查看的下载

> ID：14593066
> 
> 赞同：3
> 
> 时间：2013-01-29T22:13:42.747
> 
> 标签：android, file, saving-data

我有一个应用程序需要在连接到流时收集大量数据。我需要将这些数据保存到一个文件中，以便以后可以从我的设备中取出并使用标准计算机进行分析。

我的代码目前看起来像：

```
private void saveData(byte[] data){
    File path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS);
    File file = new File(path, "_Ascent_Test.txt");        
    try {                      
        FileOutputStream stream = new FileOutputStream(file, true);             
        stream.write(data);            
        stream.close();
        Log.i("saveData", "Data Saved");        
    } catch (IOException e) {
        Log.e("SAVE DATA", "Could not write file " + e.getMessage());
    }       
} 
```

它正确地点击了“数据保存”日志，没有任何错误，但是当我从计算机浏览它时，我无法在设备内部存储的任何地方找到该文件。

我错过了什么？

谢谢。

编辑：我需要在 Nexus 7 上运行它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T13:41:52.633

除非您明确使它们可用，否则文件是不可见的。请参阅我[关于 MediaScanner 的博客文章](http://www.grokkingandroid.com/adding-files-to-androids-media-library-using-the-mediascanner/)以了解更多信息。

开发人员的工作是处理此问题并确保用户可能想要访问的所有文件都可供 MediaScanner 使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-14T05:07:48.200

我想做一件非常相似的事情。这就是我如何完全使用您的代码使其工作的方法。

运行我的代码以制作文件后（/storage/emulated/0/Download/_Ascent_Test.txt）：

我下载了 ES 文件资源管理器。

在底部的“快速访问”菜单中，我打开了“显示隐藏文件”。

然后，同样在“快速访问”菜单中，转到本地 -> / 设备。

现在您将能够导航到 /storage 文件夹并一直到 _Ascent_test.txt

从那里您可以打开它并自己发送电子邮件。希望这有帮助！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-29T23:07:55.087

所以这似乎是 Nexus 4 和 7 的一个已知问题。我仍然没有解决方法，但目前，使用 Astro File Manager 给自己发送电子邮件将解决眼前的问题。

[在 Nexus 7 上的外部存储上保存文件并从 PC 检索](https://stackoverflow.com/questions/14346160/saving-files-on-external-storage-on-nexus-7-and-retrieving-from-pc)

[Nexus 4 未通过 MTP 显示文件](https://stackoverflow.com/questions/13737261/nexus-4-not-showing-files-via-mtp)

在这样的事情上浪费几个小时总是很有趣。呸！

# javascript - 淘汰赛 css 绑定和揭示模块 javascript patten

> ID：14593069
> 
> 赞同：0
> 
> 时间：2013-01-29T22:13:54.680
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-4, knockout.js

我正在为我的 javascript 使用显示模块模式，并且我有最糟糕的时间让 css 绑定在淘汰赛中正常工作。

我的JS

```
 my.js.module = (function ($) {
        "use strict";

        var my = { 
            testUrl: null 

        },
            testModel= {
                stuff: [{
                    "testOne": null
                }]
            },
            testViewModel = null,
            testId: null;

    my.bindStuff = function () {

        testViewModel =  ko.mapping.fromJS(testModel);

        ko.applyBindings(testViewModel, $(my.testId).get(0));

        $.getJSON(my.testUrl,
            {},
            function (data) {

                var testModelData = {
                    stuff: data
                };

                ko.mapping.fromJS(testModelData, testViewModel);
            });
    };

    return my;
}(jQuery)); 
```

在我的cshtml中我有

```
<tbody data-bind="foreach: stuff">
                <tr>
                    <td data-bind="text: testOne"></td> 
                </tr>
            </tbody> 
```

现在我想通过敲除使用css绑定来根据testOne的值获取一个css值，它可以是三件事之一。我知道这将是一个 ko,computed 函数，但我无法弄清楚如何让每个特定的东西实例查看 testOne 并获得正确的值来确定通过 ko.computed 函数返回什么。

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:40:01.937

这个小提琴展示了如何使用数组映射并通过敲除设置元素的类，它与您的代码不完全匹配，但应该有所帮助：http: [//jsfiddle.net/davidoleary/UHaVV/](http://jsfiddle.net/davidoleary/UHaVV/)

```
var newData = {    
    test:"this is a test",
    stuff:[
        {"testOne":"Event1"},
        {"testOne":"Event2"},
        {"testOne":"Event3"}
    ]
};

var viewModel = ko.mapping.fromJS( newData );
ko.applyBindings(viewModel);

<div data-bind="text:test"></div>
    <ul data-bind="foreach: stuff">
    <li><span data-bind="text: testOne, attr:{class: testOne}"></span></li>
</ul> 
```

也看看这个问题，看看设置类的两种方法：

[敲除将 css 类绑定到观察到的模型属性](https://stackoverflow.com/questions/7738890/knockout-binding-css-class-to-an-observed-model-property)

您可以使用 attr 或新的 css 绑定两者都在上面的问题中被引用。

# linux - tcpdump 可以跳过标头吗

> ID：14593072
> 
> 赞同：-1
> 
> 时间：2013-01-29T22:14:06.110
> 
> 标签：linux, wireshark, tcpdump

我有一个 IP 数据包，接口上有 x 字节的自定义标头。
有没有办法告诉 tcpdump 或 tshark 忽略前 x 个字节并解码和显示 IP 数据包？
我要做的最后一件事是编写一个自定义解剖器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:44:18.103

因为这是（大概）Linux：

接口的驱动程序必须提供一个`ARPHRD_`值来指定链路层标头的类型（所有 Linux 网络接口驱动程序都必须如此）。

如果该`ARPHRD_`值对于该链路层标头类型是正确的，并且 libpcap 知道该`ARPHRD_`值，它会将其映射到适当的`DLT_`值，并且 tcpdump/*shark，如果他们理解该`DLT_`值，将能够处理数据包。（如果没有，则必须添加支持 - 但我认为 tcpdump 和 *shark 支持`DLT_`libpcap 可以为传输 IP 的接口提供的所有值）。

如果该`ARPHRD_`值对于该链路层标头类型是正确的，并且 libpcap*不*知道该`ARPHRD_`值，它将执行“熟”捕获，这意味着自定义标头将不会提供给 libpcap（假设驱动程序设置了skbuff 中的正确字段；如果不是，驱动程序有问题）并且 libpcap 将使用`DLT_LINUX_SLL`并插入“Linux 熟模式捕获”标头。Tcpdump 和 *shark 处理`DLT_LINUX_SLL`.

如果 Linux 尚未`ARPHRD_`为该自定义标头定义值，则您可能必须定义自己的值；libpcap 不会知道它，并且会退回到“熟模式”捕获。

# javascript - 在新窗口中打开弹出窗口

> ID：14593073
> 
> 赞同：1
> 
> 时间：2013-01-29T22:14:09.543
> 
> 标签：javascript, asp.net, popup

我的网站上有一些弹出窗口，我想在新窗口中打开下一个弹出窗口。但是，它当前在同一窗口中打开。我怎样才能解决这个问题？

```
function pop_up(url) {
    newwindow = window.open(url, 'name', 'height=517,width=885,scrollbars=yes,
        toolbar=no,menubar=no,resizable=yes,location=no,directories=no,status=no,
        titlebar=no,left=400,top=120');

    if (window.focus) { newwindow.focus() }
        return false;
}

Page.ClientScript.RegisterStartupScript(GetType(), "popup", 
    "pop_up('" + "PopUpEmailing.aspx" + "');", true); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T22:17:21.427

将窗口的名称从“name”更改为“_blank”。改变

```
newwindow = window.open(url, 'name', 'height=517,width=885,scrollbars=yes,toolbar=no,menubar=no,resizable=yes,location=no,directories=no,status=no,titlebar=no,left=400,top=120'); 
```

至

```
newwindow = window.open(url, '_blank', 'height=517,width=885,scrollbars=yes,toolbar=no,menubar=no,resizable=yes,location=no,directories=no,status=no,titlebar=no,left=400,top=120'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T22:16:10.823

为每个弹出窗口使用不同的窗口名称。

```
var windowCount = 0;
function pop_up(url) {
     newwindow = window.open(url, 'name' + windowCount++, 'height=517,width=885,scrollbars=yes,toolbar=no,menubar=no,resizable=yes,location=no,directories=no,status=no,titlebar=no,left=400,top=120');
     if (window.focus) { newwindow.focus() }
     return false;

   } 
```

确保您保留窗口名称的有效标识符（以字母或下划线开头，没有嵌入空格），否则 IE 会不高兴。

（如果您不关心名称是什么，则使用“_blank”作为名称更简单。）

# list - Scala 迭代元组映射

> ID：14593074
> 
> 赞同：0
> 
> 时间：2013-01-29T22:14:12.140
> 
> 标签：list, scala, map, iterator

我有一个键值对的映射，我正在尝试获取给定键的值，但是虽然它返回了一个值，但它附带了一些值，知道如何摆脱它吗？我的代码是：

```
val jsonmap = simple.split(",\"").toList.map(x => x.split("\":")).map(x => Tuple2(x(0), x(1))).toMap
val text = jsonmap.get("text") 
```

其中“文本”是键，我想要它映射到的值，我目前得到以下输出：

```
Some("4everevercom") 
```

我尝试使用 flatMap 而不是 Map 但它也不起作用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T22:41:55.753

您正在寻找`apply`方法。`Seq`，`Set`并`Map`实现不同`apply`的方法，不同之处在于每种方法之间的主要区别。

作为语法糖，`.apply`可以在 中省略`o.apply(x)`，所以你只需要这样做：

```
val text = jsonmap("text") // pass "key" to apply and receive "value" 
```

For `Seq`,`apply`接受一个索引并返回一个值，就像您在自己的示例中使用的那样：

```
x(0), x(1) 
```

对于`Set`，`apply`接受一个值，并返回一个`Boolean`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T22:27:01.850

[正如@Brian 所说](https://stackoverflow.com/a/14593097/298389)，您可以使用 getOrElse或“应用”方法并自行处理缺失值：

```
val text: String = jsonmap("text")
// would trow java.util.NoSuchElementException, if no key presented 
```

此外，您可以设置一些默认值，以便 Map 可以回退到它，如果没有找到键：

```
val funkyMap = jsonmap.get("text").withDefaultValue("")
funkyMap("foo")
// if foo or any other key is not presented in map, "" will be returned 
```

如果您想为**所有**缺失的键设置默认值，请使用它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-29T22:17:14.193

您可以使用`getOrElse`which 获取`Some`您指定的值或默认值。如果该键存在于地图中，您将从 中获取值`Some`。如果键不存在，您将获得指定的值。

```
scala> val map = Map(0 -> "foo")
map: scala.collection.immutable.Map[Int,String] = Map(0 -> foo)

scala> map.get(0)
res3: Option[String] = Some(foo)

scala> map.getOrElse(1, "bar")
res4: String = bar 
```

此外，有关 Scala 的 Some and None 选项的信息，请参阅此：http: [//www.codecommit.com/blog/scala/the-option-pattern](http://www.codecommit.com/blog/scala/the-option-pattern)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T13:53:38.957

只是提供可能帮助您使用的其他选项`Option`以及您在标准库中可以找到的其他类似结构。

您还可以在选项上迭代（映射）。这是有效的，因为`Option`它`Iterable`包含零或一个元素。

```
myMap.get(key) map { value =>
  // use value...
} 
```

等效地，您可以使用 a`for`如果您觉得它可以使代码更清晰：

```
for (value <- myMap.get(key)) {
  // use value...
} 
```

# ruby-on-rails - 如何对多个值使用 collection_select 命令来更新第二个模型？

> ID：14593076
> 
> 赞同：0
> 
> 时间：2013-01-29T22:14:30.337
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我正在开发一个媒体库（模型 MediaLibrary），我希望能够为每个项目分配多个主题。

我创建了一个模型 MediaTopic，它将包含媒体库项目的 id 和来自 Topic 模型的主题 id。

MediaLibrary 模型 has_many :media_topics。MediaTopic 模型属于_to :media_library。

这是我的 collection_select 语句。

```
<%= f.label :topic, "Main Topic" %><%= collection_select(:media_library, :topic_id, Topic.order('name'), :id, :name, {prompt: true}, {multiple: true}) %> 
```

我目前在 MediaLibrary 模型中有 :topic_id 。我在尝试将 id 数组写入单个整数值时遇到了一个明显的错误。我想保留没有**multiple: true**参数的当前命令，并添加一个新命令，将 :topic_id 更改为可以保存多个值的内容，然后创建 MediaTopic 行。当我在上面的 collection_select 语句中更改 :topic_id 时，我得到一个未定义的方法错误。我的目标是在删除列之前让新逻辑正常工作。

如何捕获上述 collection_select 语句正在创建的数组？一旦我弄清楚了，我就可以遍历数组并构建我的 MediaTopic 行。我想过也许使用fields_for。但是，在看到我已经有一个 collection_select 正在创建的数组之后，我只想访问该数组并循环遍历它。

我已经在 Stack Overflow 上看到了几种针对更困难情况的解决方案。我曾尝试将它们拼凑在一起，但无济于事。我希望既然我知道我正在创建一个 ID 数组，我可以以某种方式将它们分配给 collection_select 语句中的某些东西。

任何帮助，将不胜感激。如果有人给我答案，我显然错过了一些我可能会尖叫的东西。我只是暂时没有看到它。

**更新 2/18/2013 上午 7:10**

这是我最终在我看来使用的代码：

```
<%= fields_for :media_topics do |media_topic| %>
  <%= media_topic.label :topic, "Topics" %><%= media_topic.collection_select(:topic_id, Topic.order('name'), :id, :name, {}, {multiple: true}) %>
<% end %> 
```

这是我最终在控制器中使用的代码（创建）：

```
@media_library = MediaLibrary.new(params[:media_library])
@media_topics = params[:media_topics]
if @media_library.save
  if @media_topics
    @topic_ids = @media_topics["topic_id"]
    @topic_ids.each do |topic|
      if topic.blank?
      else
        @media_topic                  = MediaTopic.new
        @media_topic.media_library_id = @media_library.id
        @media_topic.topic_id         = topic.to_i
        @media_topic.save
      end
    end
  end
end 
```

这是我最终在控制器中使用的代码（更新）：

```
@media_library = MediaLibrary.update_attributes(params[:media_library])
@media_topics = params[:media_topics]
if @media_library.save
  if @media_topics
    MediaTopic.where("media_library_id = ?", params[:id]).destroy_all
    @topic_ids = @media_topics["topic_id"]
    @topic_ids.each do |topic|
      if topic.blank?
      else
        @media_topic                  = MediaTopic.new
        @media_topic.media_library_id = @media_library.id
        @media_topic.topic_id         = topic.to_i
        @media_topic.save
      end
    end
  end
end 
```

在我的循环中，我检查了数组项是否为空白，因为数组的第一个条目是空白的。我认为它与提示功能有关。无论如何，我的代码运行良好。我已经用另一个模型复制了它，并且可能会再做两个。下一个技巧是将其添加到我已经很复杂的搜索引擎逻辑中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T22:21:44.367

因为我最初写了这个问题，所以我在 Rails 4 中重写了我的应用程序。我能够使用 has_many 开发一个解决方案，并用直接的 collection_select 语句替换我的 fields_for 语句。我最终回答了我自己的问题。下面链接上的答案详细说明了我最终是如何解决这个问题的。

[Rails 4 - 使用 collection_select 获取具有嵌套属性的中间表的 id 数组](https://stackoverflow.com/questions/19908309/rails-4-using-collection-select-to-get-an-array-of-ids-for-an-intermediate-tab)

# php - 通过 cookie 进行身份验证

> ID：14593082
> 
> 赞同：0
> 
> 时间：2013-01-29T22:15:10.463
> 
> 标签：php, cookies

几天前，我在网站的身份验证系统中实现了 cookie 功能，基本上身份验证系统使用会话和 cookie 来检查身份验证。一切正常，但今天我发现了一个奇怪的问题。那是在我关闭并重新打开浏览器之后，cookie仍在浏览器中，但我没有经过身份验证。到目前为止，我只有三个页面 index.php 在根文件夹中，然后是分类目录中的分类.php（分类/index.php），然后是用户目录中的 login.php（用户/登录.php） ..所以发生的事情是，在我重新启动浏览器并浏览 index.php 后，我没有通过身份验证，分类.php 也是如此，但 login.php 对我进行了身份验证。奇怪的是它都使用相同的代码..

这是 header.php（包含在所有三个文件中）

```
 <?php
        //header.php
        // if cookie is set, authenticate directly
        if (isset($_COOKIE['AUTH'])) {
            include_once("../includes/initialize.php"); // requires and initializes all the necessary functions and classes
            // cookie is set, lets see if its vailed and log someone in
            global $database;
            global $salt;
            $now = time();

            list($identifier, $token) = explode(':', $_COOKIE['AUTH']);
            if (ctype_alnum($identifier) && ctype_alnum($token)) {
                $user = User::find_by_identifier($identifier);
                if ($token != $user->token) {
                    setcookie ("AUTH", "", time() - 3600);
                    session_destroy();
                    // echo "wrong token";
                    // fail because the key doesn't match
                } elseif ($now > $user->timeout) {
                    setcookie ("AUTH", "", time() - 3600);
                    session_destroy();
                    // echo "timeout";
                    // fail because the cookie has expired
                } elseif ($identifier!= md5($salt.md5($user->id.$salt))) {
                    // fail because the identifiers does not match
                    setcookie ("AUTH", "", time() - 3600);
                    session_destroy();
                    // echo "wrong identifier";
                } else {
                    /*  Success  */
                    //  $found_user = User::cookie_authenticate($user->email, $user->passwor,$ip);

                    $session->cookie_login($user);
                }
            } else {
                    /* failed because the information is not in the correct format in the cookie */
                setcookie ("AUTH", "", time() - 3600);
                session_destroy();
            }
        }
        ?>

index.php
        <?php
        //index.php

        include_once("includes/initialize.php"); // requires and initializes all the necessary functions and classes

        include_template("header.php");

        ?>

users/login.php

        <?php 
        //login.php
        include("../includes/initialize.php"); // requires and initializes all the necessary functions and classes

        //if aready logged in
        if($session->is_logged_in()) {
            $session->message("<script> TINY.box.show({html:'You are already logged in!',animate:false,close:false,mask:false,boxid:'error',autohide:3,top:-14,left:-17})</script>");
          redirect_to("../index.php");
        }

        include_template("header.php");

        ?> 
```

我在 index.php 中注意到的是，即使浏览器保存了 AUTH cookie

```
 if(isset($_COOKIE['auth'])) 
```

header.php 中的 isset 函数并没有真正检查 cookie 是否在 index.php 中设置，但是 login.php 确实.. 好吧，我不想发布更多代码，因为我知道问题不在于登录类或 cookie 类.. 因为我说，login.php 确实验证了 cookie .. 第一个问题是**为什么 index.php 没有真正通过 isset($_COOKIE['AUTH'])) 函数，尽管在浏览器中设置了 cookie AUTH？**
第二个是，**为什么 login.php 传递相同的 isset cookie 函数，即使两者都包含编写 isset 函数的相同 header.php 文件。**
我希望我把问题说清楚了，我尽我所能..对不起，我问这个问题的能力很差..

```
 public static function authenticate($username="", $password="",$ip) { //login function to authenticate user 

        global $database;
        $username = $database->escape_value($username);
        $password = $database->escape_value(sha1($password));
        $ip = $_SERVER['REMOTE_ADDR'];
        $identifier = md5( $salt . md5($username . $salt ) );

        $query = $database->query("SELECT id FROM ".static::$table_name." WHERE ip = '$ip' AND banned = '1'");

        if ($database->num_rows($query) >= 1 ) { //change to 1
            echo "<div class=\"warning\"> Your IP has been blocked, Possible Spam attempts. Please contact the Admin for further details.</div>";
        } else {
            $sql  = "SELECT * FROM ".static::$table_name." ";
            $sql .= "WHERE email = '{$username}' ";
            $sql .= "AND password = '{$password}'  ";
    //      $sql .= "AND active = '1'  ";
            $sql .= "LIMIT 1";
            $result_array = self::find_by_sql($sql);
            return !empty($result_array) ? array_shift($result_array) : false;
        }
    }

    public function login($user) {
        // database should find user based on username/password
        if($user){
            User::set_login_time($user->id); // set logged in time and identifier
            User::set_cookie_details($user->id); // set cookie expiration time and token
            $this->user_id  = $_SESSION['user_id']       = $user->id;
            $this->username = $_SESSION['username']      = $user->username;
            $this->user_level = $_SESSION['user_level']  = $user->level;
            $this->banned = $_SESSION['user_banned'] ;
            $this->logged_in = true;
        }
    }
    public function is_logged_in() {
        return $this->logged_in;
    }

    public  function cookie_login($user) {
        // if cookie is set, check and match the cookies identifier and token with the stored identifier and token in the database
        // if it matches then login without credentials
        $this->user_id  = $_SESSION['user_id']       = $user->id;
        $this->username = $_SESSION['username']      = $user->username;
        $this->user_level = $_SESSION['user_level']  = $user->level;
        $this->banned = $_SESSION['user_banned'] ;
        $this->logged_in = true;
    }       

    public static function set_login_time($user_id) {
        global $database;
        global $salt;
        $identifier = md5( $salt . md5($user_id . $salt ));
        $time = time();
        $sql = "UPDATE ".static::$table_name." SET modified = '$time',identifier = '$identifier' WHERE id = '{$user_id}' LIMIT 1 "; 
        $database->query($sql);
        return ($database->affected_rows() == 1) ? true : false;
    }

    public static function set_cookie_details($user_id) {
        global $database;
        $user = self::find_by_id($user_id);
        $identifier = $user->identifier;
        $key = md5(uniqid(rand(), true));
        $timeout = time() + 60 * 60 * 24 * 7; // 1 week
        setcookie('AUTH', "$identifier:$key", $timeout);
        $sql = "UPDATE ".static::$table_name." SET token = '$key', timeout = '$timeout' WHERE id = '{$user_id}' LIMIT 1 ";
        $database->query($sql);
        return ($database->affected_rows() == 1) ? true : false;
    }

    $user = User::authenticate($username, $password,$ip); // if returned true

    $session->login($user); 
```

# c# - 如何使用中继器项有效地更新 XML 文件？

> ID：14593083
> 
> 赞同：0
> 
> 时间：2013-01-29T22:15:11.803
> 
> 标签：c#, xml, web, repeater

我将一个 XML 文件绑定到一个转发器，每个项目都在一个文本框中。触发保存操作时，我需要将更改写回 XML 文件。我的问题是最有效的方法是什么，记住 XML 文件非常小。

我能想到三个，但我不知道哪个最好：

1.  循环中继器，在 XML 文件中找到匹配的 ID，更新那些节点
2.  循环 XML 文件，在中继器中找到匹配的 ID，更新那些节点
3.  编写一个新的 XML 文件（替换旧的）

谢谢！

更新了我的 XML 文件的示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<Link>
<LinkNode>
<Section>New York</Section>
<Header>New York</Header>
<Item>IT/ Phone Support</Item>
<Details>Ext 5.8115</Details>
<ID>0</ID>
<HyperLink>0</HyperLink>
</LinkNode>
<LinkNode>
<Section>New York</Section>
<Header />
<Item>Email</Item>
<Details>info@gld.com</Details>
<ID>1</ID>
<HyperLink>2</HyperLink>
</LinkNode>
</Link> 
```

这是我的课：

```
public class Link
{
    public String Section { get; set; }
    public String Header { get; set; }
    public String Item { get; set; }
    public String Details { get; set; }
    public Int32 ID { get; set; }
    public Int32 Hyperlink { get; set; }
} 
```

我的链接构造函数：

```
 var LinksList = new List<Links>();
 var query = links_xml.Root.Descendants("LinkNode").Select(d => d);

            foreach (var q in query)
            {

                var linklist = new Links((!string.IsNullOrEmpty(q.Element("Header").Value)) ? q.Element("Header").Value : "",
                    (!string.IsNullOrEmpty(q.Element("Item").Value)) ? q.Element("Item").Value : "",
                    (!string.IsNullOrEmpty(q.Element("Details").Value)) ? q.Element("Details").Value : "",
                    (int)q.Element("ID"), (int)q.Element("HyperLink"));
                LinksList.Add(linklist);

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:41:27.327

您还可以创建包含所需属性的类对象。将 XML 的读写放在一个 DAL 层中。这样，您的 DAL 传递和接收`List<Url>`这些对象中的一个，并且您从应用程序的其余部分抽象数据访问（在您的情况下为 XML）。

如果您选择更改数据存储方法（更改为 SQL 等），您只需更改 DAL 方法，其余代码不受影响。

如果您想要一些代码来说明，请告诉我。

**编辑：（*一些*代码）**

假设您的元素具有以下属性，这将是您的类：

```
public class Url
{
     public int Id {get; set;}
     public string DisplayName {get; set;}
     public string Url {get; set;}
} 
```

然后您的 DAL 类将如下所示：

```
/// <summary>
/// Handles data access for Url entities
/// </summary>
public static class UrlDAL
{
    /// <summary>
    /// The path where the file resides
    /// </summary>
    const string __FilePath = @"~\App_Data\";
    /// <summary>
    /// The name of the file
    /// </summary>
    const string __FileName = "UrlList.xml";
    /// <summary>
    /// The name of the temporary file. Used to keep a copy of the file if saving the new file fails.
    /// </summary>
    const string __FileNameTemp = "UrlList_TEMP.xml";

    /// <summary>
    /// Retrieves a list of url entity objects
    /// </summary>
    /// <returns></returns>
    internal static List<Url> Retrieve()
    {
        List<Url> urls = null;

        try
        {
            //read xml file
            XDocument data  = XDocument.Load(HttpContext.Current.Server.MapPath(Path.Combine(UrlDAL.__FilePath, UrlDAL..__FileName)));
            //convert to list
            urls = Xml.DeserializeCollection<Url>(data);
        }
        catch (Exception e)
        {
            //perform logging / error handling
        }

        return urls;

    }

    /// <summary>
    /// Saves the list of Url entities 
    /// </summary>
    /// <param name="urls">The list of url objects to save</param>
    internal static void Create(List<Url> urls)
    {

        try
        {
            //convert list into xml document
            XDocument file = Xml.SerializeCollection<Url>(urls);
            //rename the old file so you have a copy of it if saving the new file fails
            File.Copy(Path.Combine(UrlDAL.__FilePath, UrlDAL.__FileName), Path.Combine(UrlDAL.__FilePath, UrlDAL.__FileNameTemp));
            //saving the new file will overwrite the existing file
            file.Save(UrlDAL.__FilePath);
            //delete the old file
            File.Delete(Path.Combine(UrlDAL.__FilePath, UrlDAL.__FileNameTemp));
        }
        catch (Exception e)
        {
            //perform logging / error handling
            //you should also alert yourself of this error so you can manually restore the old file
        }

    }

} 
```

这些是用于 XML 序列化/反序列化的扩展方法：

```
public static class Xml
{
    /// <summary>
    /// Converts an XDoc into a List<T> of entities
    /// </summary>
    /// <typeparam name="T">Any serializable object</typeparam>
    /// <param name="doc"></param>
    /// <returns></returns>
    public static List<T> DeserializeCollection<T>(XDocument doc)
    {
        if (doc == null)
            return null;

        try
        {
            XmlSerializer serializer = new XmlSerializer(typeof(List<T>));
            XmlReader reader = doc.CreateReader();
            List<T> result = (List<T>)serializer.Deserialize(reader);
            reader.Close();
            return result;
        }
        catch (Exception e)
        {
            //perform logging / error handling
            return null;
        }

    }

    /// <summary>
    /// Converts a List<T> of entities into an XDoc.
    /// </summary>
    /// <typeparam name="T">Any serializable object</typeparam>
    /// <param name="paramList"></param>
    public static XDocument SerializeCollection<T>(List<T> paramList)
    {
        if (paramList == null)
            return null;

        XDocument doc = new XDocument();

        try
        {
            XmlSerializer serializer = new XmlSerializer(paramList.GetType());
            XmlWriter writer = doc.CreateWriter();
            serializer.Serialize(writer, paramList);
            writer.Close();
            return doc;
        }
        catch (Exception e)
        {
            //perform logging / error handling
            return null;
        }

    }
} 
```

不要忘记添加对以下命名空间的引用：

```
using System.IO;
using System.Xml;
using System.Xml.Linq;
using System.Xml.Serialization; 
```

话虽如此，你会这样称呼 DAL：

```
//to retrieve the list of urls
List<Url> urls = UrlDAL.Retrieve();
//to save the new list of urls to an xml file
List<Url> urls = [BUILD URL ENTITIES FROM REPEATER];
UrlDAL.Create(urls) 
```

**编辑：**创建 XML 的提示

为了避免反序列化 XML 时出现任何问题（XML 对于解析的内容可能非常挑剔），我倾向于在代码中创建一些（或全部）我想使用的类，并通过 Xml.Serialize 方法运行 List。然后，我使用在那里创建的 xml 作为创建 XML 文件的起点。

**编辑**从转发器创建实例

当您遍历转发器中的每个项目时，您可以像这样使用 .NET的*对象初始化程序：*

```
List<Links> links = new List<Links>();
foreach (RepeaterItem item in rptLinks.Items)
{
   //find all your controls and their values
   string details = ((TextBox)e.Item.Findcontrol("txtDetails")).Text;
   //do this for each control

   //use object initialization here
   links.Add(new Link {Details = details, [PROPERTY NAME] = [REPEATER ITEM VALUE], etc});
} 
```

可以在此处的 MSDN 上找到对此功能的一个很好的解释：[对象和集合初始化程序（C# 编程指南）](http://msdn.microsoft.com/en-us/library/vstudio/bb384062.aspx)

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T22:21:23.280

使用 XmlDocument 加载 xml，然后在其中导航以找到包含要更改的值的元素。

```
System.Xml.XmlDocument xmlDocument = new System.Xml.XmlDocument();
xmlDocument.Load(<filename or stream>);

Now, choose the most suitable method for you to find the elements or
attributes you want to change:

// For example:
XmlNodeList elemList = xmlDocument .GetElementsByTagName("Machine");
for (int i=0; i < elemList.Count; i++)
{
elemList[i].InnerXml = "Whateveryouwant";
} 
```

然后，调用 Save 方法来保存更改。

xmlDocument.Save(...);

# android - 使用 Otto 将数据从 Activity 传递到 Fragment

> ID：14593086
> 
> 赞同：3
> 
> 时间：2013-01-29T22:15:26.547
> 
> 标签：android, android-activity, android-fragments, otto

在我的应用程序中，我将片段动态添加到主活动视图中的容器中。我想知道在添加 Fragment 时使用 Otto 时传递数据的最佳方式是什么。目前这就是我的做法，请在示例中我没有发布我的 CustomObject

在我的主要活动中

```
 getSupportFragmentManager().beginTransaction()
                    .add(R.id.fragment_container, MY_CUSTOM_FRAGMENT).commit();
    BusProvider.getInstance().post(produceCustomString()); 
```

在我的片段里面

```
 @Subscribe
    public void onCustomStringChanged(String customString) {
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T23:46:22.117

`@Subscribe`如果您还`@Produce`注册了相同类型的方法，则将自动调用带有注释的方法。

通知此类新数据片段的最佳方法是您`@Produce`在活动上有一个方法：

```
@Produce public String produceCustomString() {
  return "Hello, World!";
} 
```

然后是所有有方法的片段`@Subscribe`：

```
@Subscribe public void onCustomStringEvent(String event) {
  // ...
} 
```

当您注册具有此方法的片段时，Otto 将调用`@Produce`活动上的方法以获取它将传递给片段方法的最新值。

# jquery - 使用 Angular 完成这种简单技术的最佳方法是什么？

> ID：14593092
> 
> 赞同：3
> 
> 时间：2013-01-29T22:16:50.897
> 
> 标签：jquery, angularjs

我正在寻找最佳实践。

基本上我想要这样，如果你点击一个导航按钮，一个下拉菜单会向下**滑动**。

所以我有 ：

```
= link_to 'lez see the dropdown!', '#', 'ng-click' => 'open_dropdown()' 
```

然后我在我的控制器里..

```
$scope.open_dropdown = -> 
```

但是当我引用时`this`，它会拉出一个不允许您访问 DOM 的 Angular 对象。

**我的 html**

```
<div class="span1">
  <a class="icon settings" ng-click="open_dropdown()" href="#"></a>
  <div class="dropdown">
    Secret drop down stuffs!
  </div>
</div> 
```

所以我想我已经解决了（有点）如何隐藏/显示您为`ng-show`on设置值的 Angular 样式`.dropdown`，但我不希望它显示。它必须*滑动*。

更重要的是，我想这样做，如果你点击其他地方，它就会消失。通常我可以在 jQuery 中用 6 行代码编写所有这些内容。但是 Angular 就像一个专有的封闭社区，所以我觉得我应该在这里利用手头的 koolaid。

**问题**

如何让下拉菜单以最 Angular 的方式向下滑动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T04:18:08.923

CSS 是你的朋友：

```
<a ng-click="isOpen = !isOpen">open</a>
<div class="dropdown" ng-class="{ open: isOpen }">
    dropdown stuff
</div>

.dropdown {
    height: 0;
    transition: height 0.5s ease-in;
    /* vendor prefixes needed as well, see fiddle below */
}
.dropdown.open {
    height: 200px;
     /* I think "height: auto" should work, too */
} 
```

如果您需要更多控制权，请考虑为此功能创建自己的指令。或者看看你是否可以在 Angular-UI 或其他地方找到一个。

* * *

**更新**

[这是一个 JSFiddle](http://jsfiddle.net/4HhQ8/1/)。我也用它进行了测试`height: auto;`并且它有效，但是填充过渡没有正确动画，至少在 Chrome 中是这样。如果您可以使用指定的高度，它的动画效果会更好一些，但我意识到这并不总是理想的。我什至在过渡中加入了不透明度变化——没有它也能正常工作，但我个人喜欢它的外观。

（PS [css3please.com](http://css3please.com/)是一个很好的来源，可以快速检查最常见的 css3 规则需要哪些浏览器前缀。这就是我所有转换规则的来源。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T22:52:26.583

您可以将 CSS translate 属性与 Angular JS 的 ngShow 指令结合使用。Angular 不提供动画效果，但 Angular UI 可能会为您提供。

# c# - 如何将扁平化的 ViewModel 用于 Web API 方法

> ID：14593094
> 
> 赞同：1
> 
> 时间：2013-01-29T22:16:57.747
> 
> 标签：c#, xml, asp.net-web-api, viewmodel

我正在创建一个 Web API 服务，它充当我的客户对后端更复杂的消息传递 API 的门面。代表我需要对后端 API 进行调用的 .XSD 显然*不是*我希望他们理解的。我的目标是展平客户端可以使用的 ViewModel 类中所需的元素。我的 POST 可能如下所示：

```
public HttpResponseMessage Post(FlattenedViewModel flattenedViewModel)
{

} 
```

扁平化视图模型的想法是防止我的客户必须了解任何复杂的数据结构才能调用我的 API。提交它要容易得多（可以是 JSON 或 XML）：

```
<PersonFirstName>John</PersonFirstName>
<PersonLastName>Smith</PersonLastName>
<PersonPhone>123-456-7890</PersonPhone> 
```

比这个：

```
<Person>
  <Name>
    <FirstName>John</FirstName>
    <LastName>Smith</LastName>
  </Name>
  <Communication>
     <Type>
       <Phone>123-456-7890</Phone>
     </Type>
  </Communication>
</Person> 
```

我知道创建类结构来表示第二个示例对我们所有人来说并不难且容易理解。然而，我真正的 .XSD 大约是这个例子的 50 倍。我的目标是提供一个更简单的界面和拥有扁平视图的能力，所以请使用它作为这个问题的约束。想象一下，就像用户在表单上输入数据并按下提交一样；表单就像要输入的数据的平面视图。

我遇到的*障碍如下：*

1.  拥有一个可以重复有限次的节点是可以解决的。但是，在 .xsd: 上具有以下约束的节点`maxOccurs="unbounded"`最初似乎不适用于平面视图。有没有另一种方法可以做到这一点，所以我不必介绍一个集合？或者我可以介绍一个集合，但仍然允许用户不必理解复杂的结构（比如我的第一个例子）？如果可能的话，请提供一个例子。

2.  我有在 .xsd 的不同部分中重复但不相关的节点*名称。*例如节点`ID`或`Date`. 我的解决方案是将父节点名称附加到值以创建类似`SubmitDate`or的属性`PersonID`。我现在遇到的问题是我的 ViewModel 类属性名称与必须映射到域模型中的实体名称不匹配。我正在使用 ValueInjecter，那么是否有任何类型的简化方式我仍然可以将属性映射到具有不同名称（即注释或其他内容）的其他类？

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:36:38.773

我相信答案在于创建供 ValueInjector 使用的自定义注入，然后简单地调用“InjectFrom”来调用它们......

```
_person.InjectFrom<CustomPersonInjection>(flattenedViewModel); 
```

我快速浏览了一些具体示例，这些示例可能对您有所帮助，但可以在合理的时间范围内找到任何东西（尽管它们在那里，谷歌'valueinjecter custom injections'）。

以下是一些帮助您入门的链接：

深度克隆示例： http: [//valueinjecter.codeplex.com/wikipage ?title=Deep%20Cloning&referringTitle=Home](http://valueinjecter.codeplex.com/wikipage?title=Deep%20Cloning&referringTitle=Home)

自定义约定注入：[使用 ValueInjecter 在具有不同属性名称的对象之间进行映射](https://stackoverflow.com/questions/8035364/using-valueinjecter-to-map-between-objects-with-different-property-names)

# magento - Nginx，PHP-FPM magento 配置变得越来越慢

> ID：14593103
> 
> 赞同：2
> 
> 时间：2013-01-29T22:17:30.870
> 
> 标签：magento, nginx, memcached, php

我们有一个运行 magento EE v. 1.10 的专用 2 服务器设置。我们运行 nginx、php-fpm、memcache 作为主要模块。该配置基于 magento 与托管公司合作伙伴发布的白皮书。

随着服务器在线时间的延长，服务器/站点会逐渐变慢。重新启动 php-fpm 后，性能可以接受。然而，随着它的进展，第一个字节的时间变得越来越糟。我们在这里和托管公司都有系统管理员，但没有解决方案。我想寻求帮助的最好方法是问：有没有人遇到过这个问题？我们认为这个问题与没有足够的服务器电源或内存有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:34:19.120

我要检查的第一个地方是您的错误日志。超大日志与未解决（因此会持续记录）错误相结合，可能会导致加载时间显着增加。

# mysql - 多个子查询的报表查询

> ID：14593107
> 
> 赞同：1
> 
> 时间：2013-01-29T22:18:04.653
> 
> 标签：mysql, join, inner-join

使用子查询连接从表中获取多条记录

```
SELECT
  COUNT(*) AS total_count,
  (SELECT
     chat_box.user_id,
     chat_box.message,
     members.id,
     members.display_name
   FROM chat_box INNER JOIN members
        ON chat_box.user_id = members.id
   ORDER BY chat_id DESC LIMIT 1),
  (SELECT COUNT(DISTINCT user_id) FROM chat_box) AS users_count
FROM chat_box 
```

这就是我到目前为止所拥有的，我想`members.display_name`从内部连接中获取`chat_box.user_id = members.id`作为输出的内部连接，并将其`chat_box.message`保存`members.display_name`到`chat_box.message`变量中。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:27:54.427

目前尚不清楚您要做什么，但似乎您可以使用以下内容：

```
select u.user_id,
    u.message,
    u.id,
    u.display_name,
    cb1.total_count,
    cb1.users_count
from
(
    SELECT cb.user_id ,
        cb.message,
        m.id,
        m.display_name
    FROM chat_box cb
    INNER JOIN members m
        ON cb.user_id = m.id
) u
CROSS JOIN
(
    select COUNT(*) AS total_count,
          COUNT(DISTINCT user_id) AS users_count
    FROM chat_box
) cb1 
```

# checksum - 为什么 xlinker 的 sum 和 checksum 不匹配？(IAR 5.40)

> ID：14593108
> 
> 赞同：1
> 
> 时间：2013-01-29T22:18:07.213
> 
> 标签：checksum, crc, iar

我正在使用 IAR 5.40 和 xlink 来生成校验和。生成的校验和和计算的校验和不匹配。这是我的内存映射的样子：

```
Symbol       Checksum  Memory  Start   End    Initial value
------       --------  ------  -----   ---    -------------
__checksum    0xd973    CODE   4400 - FF7D    0x0000 (#0x0000)
                        CODE   FF80 - 243FF 
```

`__checksum`位于_`FF7E - FF7F`

我正在使用 IAR 提供的校验和计算器：

```
sum = fast_crc16(0, (unsigned char *)0x4400, (0xff7d - 0x4400 + 1)); 
```

和`sum`不`__checksum`匹配。看起来我错过了一些东西。需要帮忙！！

# c# - 如何等到内存被释放？

> ID：14593114
> 
> 赞同：1
> 
> 时间：2013-01-29T22:18:35.733
> 
> 标签：c#, memory-management, out-of-memory

我有一个*List<>*，其中包含大约 800,000 个对象。完成此列表后，我将其设置为*null*，然后继续执行其余的例程。

问题是 .NET 的垃圾收集器似乎没有足够快地完成它的工作，因为在将此列表设置为*null*后，内存使用量保持不变，并且出现“内存不足”异常。

有没有办法等待垃圾收集器完成它的工作？

也许我可以重新设计我的程序，这样我就不会一次加载 800,000 个项目，但这是一次性运行的程序，根本不会在生产中使用。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T22:21:36.853

您可以致电：

```
GC.Collect();
GC.WaitForPendingFinalizers();
//I have occasionally seen an extra call to GC.Collect() here 
```

但是，我真的只是将其作为测试，看看它是否有帮助并确定是否`GC`是问题所在。

我假设您已经在`Debug`和`Release`模式下测试了东西。

最后一点，您可能会考虑更改[GC Latency Mode](http://msdn.microsoft.com/en-us/library/bb384202.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T22:20:19.603

如果绝对必要，您可以强制 GC 执行收集：

```
GC.Collect() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T22:20:37.497

[`GC.Collect()`](http://msdn.microsoft.com/es-es/library/system.gc.collect%28v=vs.80%29.aspx)强制垃圾收集器立即运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T17:52:30.500

我最终也使用了 List<>.Clear() 。这会迅速地破坏对象并很快释放资源。

# android - 使用多个脏矩形更新 SurfaceView

> ID：14593117
> 
> 赞同：1
> 
> 时间：2013-01-29T22:18:46.467
> 
> 标签：android, surfaceview

在我正在进行的项目中，我决定使用 SurfaceView 而不是自定义双缓冲介质。它提供了我需要的一切，并且已经双缓冲了。问题是它不会让我指定多个脏矩形来重绘。SurfaceView.lockCanvas(Rect) 只允许单个矩形并且没有参数重绘整个东西是相当昂贵的。显然，为每个 Rect 调用 lockCanvas(Rect) 的另一种解决方案会导致屏幕上的眼睛流血闪烁。您是否有任何解决方案可以让您有机会留在 Android API 领域，如果没有，您是否有任何我可以使用的外部替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:46:31.110

如果您在需要调用 lockCanvas 之前知道脏区（听起来可能），您可以计算一个“超级矩形”来锁定包含所有矩形的区域。例如，如果您的矩形是（使用 l,r,t,b 坐标）[0,10,0,20] 和 [15,30,10,35]，那么您的超级矩形将是 [0,30,0,35 ]。

# c++ - 新运算符分配的公共内存

> ID：14593118
> 
> 赞同：2
> 
> 时间：2013-01-29T22:18:50.027
> 
> 标签：c++, c++11

我被问到一个面试问题：我们如何使用 new 运算符在不同的函数中分配一个类的两个对象，以便它们使用相同的内存空间？

谁能解释这是如何实现的？谢谢。

编辑：所以主要问题是如何创建一个类 Memory_Alloc ，所有其他类都应该使用它来为其对象分配内存。我考虑过使用句柄。然后他问了我上面的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T22:37:34.273

这个问题有点含糊，但在我脑海中你可以使用：

*   Placement new -- 使用 new 操作符来初始化相同的内存地址
*   重载新运算符——重载新运算符以返回相同的地址
*   委托——使用指向实现习语的指针，使两个对象指向同一个实现对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T22:30:37.703

新位置：

```
/* define class Foo */

void fun1(void * p) { ::new (p) Foo; }

void fun2(void * p) { ::new (p) Foo; }

int main()
{
    void * p = ::operator new(sizeof(Foo));

    fun1(p);

    p->~Foo();

    fun2(p);

    p->~Foo();

    ::operator delete(p);
} 
```

永远不要写那样的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T22:33:06.180

不可能，因为两个对象总是占用不同的地址，这也是空对象的大小仍然大于零的原因。也就是说，对于一个技巧问题，您可以创建一个对象，再次销毁它，然后在同一位置创建另一个对象。

现在，剩下一个问题：“内存空间”到底是什么？面试官的意思是地址空间吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T22:34:59.443

> 我们如何使用 new 运算符在不同的函数中分配一个类的两个对象，以使它们使用相同的内存空间？

使用`placement new`运算符来做到这一点。

通常，new 运算符负责在堆中找到足够大的内存块来处理您请求的内存量。new 运算符称为placement new，它允许您指定要使用的位置。您可以使用此功能来设置自己的内存管理过程或处理通过特定地址访问的硬件或在特定内存位置构造对象。

```
struct AType
{
};

void func(AType*& p)
{
  p = new (p) AType;
}

int main()
{
  AType *p1 = new AType; 
  func(p1);
} 
```

另请参阅[放置新](http://en.wikipedia.org/wiki/Placement_syntax)wiki 链接

# xml - VTD-XML 2.11 XPath 表达式 count() 失败并出现异常 com.ximpleware.XPathEvalException: Function Expr can't eval to node set

> ID：14593119
> 
> 赞同：3
> 
> 时间：2013-01-29T22:18:49.520
> 
> 标签：xml, function, xpath, count, vtd-xml

`count(//b)`使用 VTD-XML 2.11 (Java) API，在评估XML 文档上的 XPath 表达式时`<a><b/><b/></a>`，得到的结果不是`2.0`，而是失败并出现以下异常：

```
com.ximpleware.XPathEvalException:  Function Expr can't eval to node set
   at com.ximpleware.FuncExpr.evalNodeSet(FuncExpr.java:1033)
   at com.ximpleware.AutoPilot.evalXPath(AutoPilot.java:876)
   at ...testVTDXMLXPathFunctionCount(TestVTDXMLXPath.java:107) 
```

这是一个重现问题的非常简单的测试用例：

```
public void testVTDXMLXPathFunctionCount() throws Exception {
    AutoPilot autoPilot = new AutoPilot();
    try {
        VTDGen document = new VTDGen();
        document.setDoc("<a><b/><b/></a>".getBytes());
        document.parse(true);
        VTDNav navigator = document.getNav();
        autoPilot.selectXPath("count(//b)");
        autoPilot.bind(navigator);
        int j;
        while ((j = autoPilot.evalXPath()) != -1) {
            System.out.println(navigator.toNormalizedXPathString(j));
        }
    } catch (XPathParseException e) {
        e.printStackTrace();
    } catch (XPathEvalException e) {
        e.printStackTrace();
    } catch (NavException e) {
        e.printStackTrace();
    } finally {
        autoPilot.resetXPath();
    }
} 
```

看起来 count() 函数不能用作 VTD-XML 的 XPath 表达式的开头，尽管它是一个有效的 XPath 1.0 表达式？

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:40:28.040

尝试使用 use`evalXPathToNumber`而不是`selectXPath`.

# c# - 如何在图像周围创建边框/框架？

> ID：14593121
> 
> 赞同：1
> 
> 时间：2013-01-29T22:18:59.230
> 
> 标签：c#

我的代码：

```
private void CreateAnimatedGif(List<string> GifsFilesRadar , List<string> GifsFilesSatellite)//string FileName1 , string FileName2)
{
    Bitmap bitmap = null;
    DirectoryInfo inf = new DirectoryInfo(tempGifFiles);
    FileInfo[] fi = inf.GetFiles("*.gif");
    for (int i = 0; i < fi.Length; i++)
    {
        Bitmap file1 = new Bitmap(GifsFilesRadar[i]);
        Bitmap file2 = new Bitmap(GifsFilesSatellite[i]);
        //calculate the new width proportionally to the new height it will have
        int newWidth = file1.Width + file1.Width / (file2.Height / (file2.Height - file1.Height));

        bitmap = new Bitmap(newWidth + file2.Width, Math.Max(file1.Height, file2.Height));
        using (Graphics g = Graphics.FromImage(bitmap))
        {
            //high quality rendering and interpolation mode
            g.SmoothingMode = SmoothingMode.HighQuality;
            g.PixelOffsetMode = PixelOffsetMode.HighQuality;
            g.InterpolationMode = InterpolationMode.HighQualityBicubic;

            //resize the left image
            g.DrawImage(file1, new Rectangle(0, 0, newWidth, file2.Height));
            g.DrawImage(file2, newWidth, 0);
            string t = @"d:\GifsForAnimations" + "\\" + i.ToString("D6") + ".Gif";
            bitmap.Save(t, System.Drawing.Imaging.ImageFormat.Gif);
            if (i == 4)
            {
                break;
            }
        }
    }
    List<string> gif = new List<string>();
    DirectoryInfo info = new DirectoryInfo(@"d:\GifsForAnimations");
    FileInfo[] finfo = info.GetFiles();
    for (int i = 0; i < finfo.Length; i++)
    {
        gif.Add(finfo[i].FullName);
    }
    newFile.MakeGIF(gif, @"d:\newGifAnim.gif", 80, true);
} 
```

最后我有新的动画 gif 文件。现在我有了边界，这些是位置：

*   左下角：232.0,408.0
*   左上角：232.0,211.0
*   右上角：524.0,211.0
*   右下角：524.0,408.0

我想在每个图像上添加一个围绕它的框架来标记周围的边框。假设边框为红色，边框线大小为 5 像素。

如何围绕现有位图或 gif 文件创建矩形？它不必在这里连接到我的示例代码，但是如何使用我拥有的位置在图像周围创建框架/边框？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T22:30:44.957

您可以在之后添加此行`g.DrawImage(file2, newWidth, 0);`

```
g.DrawRectangle(new Pen(Brushes.Red, 5), new Rectangle(0, 0, newWidth, file2.Height)); 
```

这是一个小测试方法，因此您可以看到它的工作原理

```
 private void button1_Click(object sender, EventArgs e)
    {
        Bitmap bitmap = new Bitmap(@"C:\avatar63.jpg");
        using (Graphics g = Graphics.FromImage(bitmap))
        {
            g.DrawRectangle(new Pen(Brushes.Red, 5), new Rectangle(0, 0, bitmap.Width, bitmap.Height));
        }
        bitmap.Save(@"C:\avatar63New.jpg");
    } 
```

之前：![在此处输入图像描述](../Images/edc9e623bfbfffe94f094dfc4d1425ba.png)之后： ![在此处输入图像描述](../Images/a387cd2321cc2c195b4392d4a6c0575b.png)

你可以在任何你想要的地方添加矩形，你只需要提供`X,Y,Width,Height`

```
g.DrawRectangle(new Pen(Brushes.LimeGreen, 5), new Rectangle(50, 50, 100, 100)); 
```

使用您的 4 点结构，这应该可以工作

```
 Point topLeft = new Point(232,211 );
   Point topRightr = new Point(232, 408);
   Point bottomLeft = new Point(524, 211);
   Point bottomRight = new Point(524, 408);

   g.DrawRectangle(new Pen(Brushes.LimeGreen, 5), new Rectangle(topLeft, new Size(topRightr.X - topLeft.X, bottomLeft.Y - topLeft.Y)));

  // TopLeft = rectangle location
  // TopRight.X - TopLeft.X = Width of rectangle
  // BottomLeft.Y - TopLeft.Y = height of rectangle 
```

![在此处输入图像描述](../Images/b67b8afc3105a91d737e1dcef9dead63.png)

# string - 修改一个字符数组，修改后的部分向后显示

> ID：14593122
> 
> 赞同：1
> 
> 时间：2013-01-29T22:19:01.057
> 
> 标签：string, assembly, 64-bit, x86-64, masm

我刚开始学习汇编，我正在尝试修改一个字符数组。

这是我的汇编代码：

```
.data
data byte 'Five', 0
.code 
    Asm proc
        lea rax, data
        mov dword ptr[rax], 'Four'
        ret
    Asm endp
end 
```

还有我的 C++ 代码：

```
#include <stdio.h>
#include <conio.h>
// external function
extern "C" char* Asm();
// main function
int main()
{
    printf(Asm());
    _getch();
} 
```

当我注释掉时`mov dword ptr[rax], 'Four'`，结果是控制台打印：*"Five"*。但是，如果上面的代码未注释，结果是*"ruoF"*，而不是我预期的结果，显然是*"Four"*。

为什么会这样？我怎样才能让文本以正确的方向输出，而不必做一些像这样的廉价解决方法：`mov dword ptr[rax], 'ruoF'`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:41:57.243

您可以使用：

```
mov   ebx,'Four'
bswap ebx
mov   [rax],ebx 
```

或者，在支持`movbe`（可以用 确认`cpuid`）的 Intel Atom 处理器上：

```
mov   ebx,'Four'
movbe [rax],ebx 
```

# angularjs - 在 Angular JS 中实现 $http 的最佳方法？

> ID：14593124
> 
> 赞同：1
> 
> 时间：2013-01-29T22:19:23.537
> 
> 标签：angularjs

在 Angular JS 中使用 $http 服务的最佳方法是什么？我们如何才能实现承诺范式并做到最好任何帮助将不胜感激。

我浏览了 API 开发人员指南，发现了以下内容。

```
 $http.get(url) 
```

我想知道 promise 调用会是什么样子，我如何将回调函数附加到这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T22:27:33.007

任何对 $http 的调用都会返回一个 Promise 对象，因此您可以像这样调用成功方法或错误：

```
$http.get("/url").success(function(data){ 

})
.error(function(errorData, errorStatus){

}) 
```

或者你可以这样做：

```
var promise = $http.get("/url");

promise.success(...) 
```

确保您阅读了有关[$resource](http://docs.angularjs.org/api/ngResource.%24resource)、[$q](http://docs.angularjs.org/api/ng.%24q)和[$http](http://docs.angularjs.org/api/ng.%24http)以涵盖“角度”方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T22:27:24.070

实现回调的最佳方法是这样的

```
 $http(url).then( function (){
      return //values
   }) 
```

现在，如果您想实现 Promise 范式，您需要在控制器中进行解析配置

```
resolve: {
   value1: return $http.get(url).then( function (response){
      if(response)
         return response.data['value'];
  })
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-01T18:48:33.753

***标准方式（工业）***

*创建一个**js**文件夹。在此文件夹中，创建另一个文件夹名称它**utils。***

由于 $http 请求将被多次发出，因此最好将其分开保存。制作一个 AngularJS 工厂文件并将其命名为 jsonLoader.js。

jsonLoader.js：

```
app.factory("jsonLoader",function($http,$q){
   var object={
    loadJson(json){
        var defer=$q.defer();
//json url of ur data
        var jsonUrl="http://localhost:3000/jsonData/"+json+".json";

        $http.get(jsonUrl).then(function(resolveData){
            defer.resolve(resolveData);//recivedData  
        },
        function(rejectedError){
            console.log("Rejected error from jsonLoader ",rejectedError);
        }
        );
        return defer.promise;
    }
   }
   return object;
}); 
```

现在在你的控制器中注入这个工厂，如下所示：

```
app.controller("mainController",function($scope,mainFactory,jsonLoader){
    $scope.loadNavMenu=()=>{
        console.log("controller");
        var promise =jsonLoader.loadJson('navMenu');
        promise.then(function(recivedData){
            console.log("Data is ",recivedData.data);
//callback function here or some data binding 
            $scope.menuItems=recivedData.data.menuItems;
        }); 
    }
} 
```

# ios - 带有属性文本的 UITextField shouldChangeTextInRange 导致滚动奇怪的行为

> ID：14593125
> 
> 赞同：4
> 
> 时间：2013-01-29T22:19:26.027
> 
> 标签：ios, uitextview, nsattributedstring, uitextviewdelegate

我需要在渲染之前捕获输入的文本，以便对其应用一些属性。

为此，我使用 UITextView 的委托方法 shouldChangeTextInRange 以及 NSAttributedString。到目前为止一切顺利，并且有效。

问题是，当 UITextView 获得一定数量的文本并开始滚动时，更改属性文本使其滚动到顶部，而下一个字符将使其滚动回末尾。

打字时，它一直在上下移动。

设置 textview.text，而不是属性文本，它可以工作 n

有什么建议吗？

提前致谢。

```
- (BOOL) textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{

    NSAttributedString * newString = [[NSAttributedString alloc] initWithString:text attributes:nil];
    NSMutableAttributedString * string = [[NSMutableAttributedString alloc] initWithAttributedString:_textView.attributedText];

    [string insertAttributedString:newString atIndex:range.location];

    textView.attributedText = string;

    range.location += text.length;

    textView.selectedRange = range;

    return NO;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T21:14:27.107

我不确定您的观点`shouldChangeTextInRange`，但要修复不希望的自动滚动，请尝试围绕`textView.attributedText`with的设置`[textView setScrollEnabled:NO]`。

那是：

```
[textView setScrollEnabled:NO];
textView.attributedText = string;
range.location += text.length;
[textView setScrollEnabled:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-07T05:03:44.560

```
textView.layoutManager.allowsNonContiguousLayout = NO; 
```

然后在更改属性文本时它不会滚动到顶部。这个对我有用。

# angularjs - Angular $resource 不会改变方法

> ID：14593130
> 
> 赞同：1
> 
> 时间：2013-01-29T22:19:37.210
> 
> 标签：angularjs, couchdb, httprequest

我正在尝试使用 Angular.js 和 Couchdb 配置一个简单的服务

```
var App = angular.module('myapp', ['ngResource'], function(){});

App.factory('products', ['$resource', function($resource) { 

  var Products = $resource(
      'http://localhost\\:5984/products/_all_docs',
      {},
      { all: { method: 'GET'} }
  );

  return {
    all: function() {
        return Products.all();
    }
  };
}]); 
```

当我`products.all()`从我的控制器打电话时，我总是得到

## 请求标头

```
OPTIONS /productos/_all_docs HTTP/1.1
Host: localhost:5984
Connection: keep-alive
Access-Control-Request-Method: GET
Pragma: no-cache
Cache-Control: no-cache
Origin: http://localhost:8000
User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.56 Safari/537.17
Access-Control-Request-Headers: accept, origin, x-requested-with
Accept: */*
DNT: 1
Referer: http://localhost:8000/
Accept-Encoding: gzip,deflate,sdch
Accept-Language: es-419,es;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

## 响应标头

```
HTTP/1.1 405 Method Not Allowed
Server: CouchDB/1.2.1 (Erlang OTP/R14B04)
Date: Tue, 29 Jan 2013 22:15:31 GMT
Content-Type: text/plain; charset=utf-8
Content-Length: 69
Cache-Control: must-revalidate
Allow: GET,HEAD,POST

Request URL:http://localhost:5984/productos/_all_docs
Request Method:OPTIONS
Status Code:405 Method Not Allowed 
```

我无法想象为什么当我没有声明它时它会发送一个 OPTIONS 方法！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T22:39:35.313

该`OPTIONS`方法来自执行跨源请求。请参阅[为什么我收到的是 OPTIONS 请求而不是 GET 请求？](https://stackoverflow.com/questions/1256593/jquery-why-am-i-getting-an-options-request-insted-of-a-get-request). 即使主机和请求都是 to `localhost`，端口也不同（5984、8000）。请参阅[同源主机，JS 中的不同端口](https://stackoverflow.com/questions/5714135/same-origin-host-different-ports-in-js)。

# ruby - 二进制字母排序红宝石

> ID：14593132
> 
> 赞同：2
> 
> 时间：2013-01-29T22:19:38.817
> 
> 标签：ruby, algorithm, sorting, binary

[我尝试为Chris Pine 教程第 7 章](http://pine.fm/LearnToProgram/?Chapter=07)编写自己的字母搜索，并且我想实现一个二进制方法。字符串输入没有有效性，所以我不知道整数与字符串混合会发生什么，但我的想法是只为字符串列表执行此操作。

```
#get list of strings
puts "type words to make a list. type 'exit' to leave program."
x = ()
list = []
while x.to_s.upcase != 'EXIT'
    x = gets.chomp
    list.push(x)
end 
list.pop

#binary method

nano = list.length
half= list.each_slice(nano/2).to_a
left = half[0]
right = half[1]

nanol=left.length
nanor=right.length

#initialize results array

A = []

for i in 0..nano-1
    smallest_left = left.min
    smallest_right = right.min

        #no difference with this commented out or not
    #if nanol==0
    #    A<<smallest_right
    #end
    #if nanor==0
    #    A<<smallest_left
    #end

        #error message points to the line below (rb:44)
    if smallest_left<smallest_right
        A << smallest_left
        print A
        left.pop[i]
    elsif smallest_left>smallest_right
        A << smallest_right
        print A
        right.pop[i]
    else
        print A
    end
end 
```

对于 input = ['z','b','r','a'] 我可以看到列表在错误中排序：

```
["a"]["a", "b"]["a", "b", "r"] rb:44:in `<': comparison of String with nil failed (ArgumentError) 
```

请帮我看看我的错误:)提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:25:16.860

发生异常是因为您尝试比较 nil。当 nil 在左侧时，您会得到不同的异常。

```
'1' < nil
#=> scratch.rb:1:in `<': comparison of String with nil failed (ArgumentError)

nil > '1'
scratch.rb:1:in `<main>': undefined method `>' for nil:NilClass (NoMethodError) 
```

Your code gets into this situation when the `left` or `right` array is empty (ie all of its elements have been added to A already). Presumably, this is why you had originally added the if-statements for `nanol == 0` and `nanor == 0` (ie to handle when one of the arrays is empty).

Your if-statements have a couple of issues:

1.  You do need the `nanol == 0` and `nanor == 0` statements
2.  The three if-statements are always run, even though only one would apply in an iteration
3.  `nanol` and `nanor` are never re-calculated (ie they will never get to zero)
4.  When the left and right values are equal, you don't actually add anything to the `A` array

The inside of your iteration should be:

```
smallest_left = left.min
smallest_right = right.min

nanol=left.length
nanor=right.length  

if nanol == 0   #Handles left no longer having values
    A << right.delete_at(right.index(smallest_right) || right.length)
elsif nanor == 0    #Handles right no longer having values
    A << left.delete_at(left.index(smallest_left) || left.length)
elsif smallest_left < smallest_right
    A << left.delete_at(left.index(smallest_left) || left.length)
elsif smallest_left > smallest_right
    A << right.delete_at(right.index(smallest_right) || right.length)
else #They are equal so take one
    A << left.delete_at(left.index(smallest_left) || left.length)
end 
```

You will still have an issue (no error, but unexpected results) when your list has an odd number of elements. But hopefully that answers your question.

# javascript - 使用键盘时 jQuery 菜单需要放下

> ID：14593141
> 
> 赞同：1
> 
> 时间：2013-01-29T22:20:37.957
> 
> 标签：javascript, jquery, accessibility, keyboard-navigation

我有一个 jQuery 菜单（jQuery 1.4.2 和 UI 1.8.6），当您使用键盘进入它时，我需要将其下拉。它对键盘的行为需要与对鼠标的行为相同。当您将鼠标悬停在它上面时，它会下降，然后移开鼠标，它会向上滑动。但是，当您使用键盘进入它时，它不会掉落。这是某人提供的使其落在键盘上的代码，但我无法工作：

```
$(document).load(function(){
    $('#buttonbar').attr('tabIndex', 0).on({
        focus: function(){
            $("#buttonbar").triggerHandler("mouseenter");
        },
        blur: function(){
            $("#buttonbar").triggerHandler("mouseleave");
        }
    }); 
}); 
```

[现场演示](http://jsbin.com/udobuc/5/)

**注意：窗口需要 950 像素或更宽才能显示。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:20:18.163

像这样的东西应该为你解决它。

```
 $(document).ready(function(){
    $('#buttonbar').focus(function(){
      $("#buttonbar").triggerHandler("mouseenter");
    });

  $("#buttonbar #visitor-links .last-item a").blur(function(){
      $("#buttonbar").triggerHandler("mouseleave");
    }); 

}); 
```

这是演示：http: [//jsbin.com/udobuc/8/edit](http://jsbin.com/udobuc/8/edit)

# unit-testing - Junit 的超酷 html 报告

> ID：14593142
> 
> 赞同：0
> 
> 时间：2013-01-29T22:20:49.493
> 
> 标签：unit-testing, testing, junit, report

我正在从 Junit 结果中寻找一些很酷的报告生成器，我使用了 maven surefire 但它太差了，我需要图表等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:57:42.247

您可以使用 Jenkins ( [www.jenkins-ci.org](http://www.jenkins-ci.org) ) 运行您的构建。Jenkins 易于设置，它可以根据您的 JUnit 结果创建漂亮的图表和可浏览的报告。

# php - 创建完成表（PHP 和 MYSQL）

> ID：14593149
> 
> 赞同：0
> 
> 时间：2013-01-29T22:21:36.020
> 
> 标签：php, mysql, sql, database

我的数据库有一个挑战表，其中包含以下列：`Challenge_Name, Challenge_Description`. 我有一个名为第二个表`completed_challenges_junction`，它有这些列：`Member_Name, Challenge_Name`. 我需要一种方法来显示挑战表中的所有挑战名称以及`completed_challenges_junction`. 如果没有匹配，那么我希望它显示`NULL`. 我想我已经非常接近让我的 SQL 代码工作了，这就是我现在所拥有的。

```
SELECT challenges.Challenge_Name, challenges.Challenge_Description, completed_challenges_junction.Member_Names 
FROM challenges 
LEFT JOIN completed_challenges_junction ON challenges.Challenge_Name=completed_challenges_junction.Challenge_Name 
```

这可行，但也会带来另一个成员的重复条目。如果我使用`WHERE Member_Name='testmember'`它只在我需要它仍然显示所有`Challenge_Name`s 时带来成员的条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:29:29.280

我不确定你到底想要什么，但也许你正在寻找 'group by' 子句和 group_concat 函数：

```
SELECT challenges.Challenge_Name, challenges.Challenge_Description,
    GROUP_CONCAT(completed_challenges_junction.Member_Names SEPARATOR ', ')
FROM challenges 
LEFT JOIN completed_challenges_junction
    ON challenges.Challenge_Name=completed_challenges_junction.Challenge_Name
GROUP BY challenges.Challenge_Name 
```

此查询将返回每个 Challenge_Name 仅出现一次的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T22:28:22.933

```
SELECT
    A.Challenge_Name,A.Challenge_Description,
    GROUP_CONCAT(IFNULL(B.Member_Names,'')) Member_Names
FROM
    challenges A
    LEFT JOIN completed_challenges_junction B ON
    A.Challenge_Name=B.Challenge_Name AND
    A.Challenge_Description=B.Challenge_Description
GROUP BY
    A.Challenge_Name,A.Challenge_Description
; 
```

或者

```
SELECT
    A.Challenge_Name,A.Challenge_Description,
    GROUP_CONCAT(IFNULL(B.Member_Names,'')) Member_Names
FROM
    challenges A
    LEFT JOIN completed_challenges_junction B
    USING (Challenge_Name,Challenge_Description)
GROUP BY
    A.Challenge_Name,A.Challenge_Description
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T22:28:33.877

您可以像这样将`WHERE`子句添加到`ON`条件中

```
SELECT challenges.Challenge_Name, challenges.Challenge_Description, completed_challenges_junction.Member_Names 
FROM challenges 
LEFT JOIN completed_challenges_junction ON (
  challenges.Challenge_Name=completed_challenges_junction.Challenge_Name
  AND Member_Name='testmember'
) 
```

这样只有*testmember*条目会从 completed_challanges_junction 中出现，但会显示所有挑战。

# java - 在码头上部署 grails 应用程序，503 SERVICE_UNAVAILABLE

> ID：14593155
> 
> 赞同：0
> 
> 时间：2013-01-29T22:22:01.507
> 
> 标签：java, grails, jetty

您好我正在尝试将我的 grails 应用程序部署到我新安装的码头实例。我安装了码头`ubuntu 12.04`，`apt-get install jetty`它在 8080 端口下运行良好。

然后我尝试通过将我的小型 grails 应用程序编译为一个战争文件并将其移动到标准`jetty_home/webapps`文件夹并重新启动码头来部署它。现在问题开始了，每当我在浏览器中转到我的上下文路径时，我都会得到这个：

```
HTTP ERROR: 503

Problem accessing /hello. Reason:

    SERVICE_UNAVAILABLE 
```

当我检查码头日志时，除了一些日志记录错误外，它几乎是空的？

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details. 
```

我无法让它运行我的应用程序，它只是一个 hello-world 应用程序（我之前也尝试过我的真实应用程序）。起初我以为是因为部署机器上的openjre，但后来我尝试用openjdk编译它，它仍然有相同的结果。

我还尝试`jetty:abs`通过 chown 命令在用户下设置 hello.war 文件。根应用程序就是这样部署的，我看不出我的应用程序不能运行的原因。

我检查了一些线程，看看我的安装过程是否有问题，但我找不到任何解决方案。没有记录其他错误。如果我使用`cat 2013_01_29.stderrout.log`它是空的。请帮我找到解决问题的方法，我只想让我的应用程序尽快启动并运行。

谢谢！

**编辑：**

好的，我下载了推荐的 jar 文件，现在我得到了一些关于我的 applicationContext 权限被拒绝的异常。我仍然不确定如何继续，因为我有点困惑。我想这意味着码头没有写入所需的权限`/var/cache/jetty`？

```
2013-01-29 23:31:27.885:INFO::jetty-6.1.24
2013-01-29 23:31:27.945:INFO::Deploy /etc/jetty/contexts/javadoc.xml -> org.mortbay.jetty.handler.ContextHandler@ed42d08{/javadoc,file:/usr/share/jetty/javadoc}
2013-01-29 23:31:28.008:INFO::Extract file:/var/lib/jetty/webapps/hello.war to /var/cache/jetty/data/Jetty_0_0_0_0_8080_hello.war__hello__.yjv6m1/webapp
2013-01-29 23:31:28.051:WARN::Failed startup of context org.mortbay.jetty.webapp.WebAppContext@7786df0f{/hello,file:/var/lib/jetty/webapps/hello.war}
java.io.FileNotFoundException: /var/cache/jetty/data/Jetty_0_0_0_0_8080_hello.war__hello__.yjv6m1/webapp/WEB-INF/applicationContext.xml (Permission denied)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:209)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:160)
    at org.mortbay.resource.JarResource.extract(JarResource.java:215)
    at org.mortbay.jetty.webapp.WebAppContext.resolveWebApp(WebAppContext.java:942)
    at org.mortbay.jetty.webapp.WebAppContext.getWebInf(WebAppContext.java:800)
    at org.mortbay.jetty.webapp.WebInfConfiguration.configureClassLoader(WebInfConfiguration.java:62)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:457)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:152)
    at org.mortbay.jetty.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:156)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:152)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:224)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.xml.XmlConfiguration.main(XmlConfiguration.java:985)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.mortbay.start.Main.invokeMain(Main.java:194)
    at org.mortbay.start.Main.start(Main.java:534)
    at org.mortbay.jetty.start.daemon.Bootstrap.start(Bootstrap.java:30)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.commons.daemon.support.DaemonLoader.start(DaemonLoader.java:243)
2013-01-29 23:31:28.078:INFO::NO JSP Support for , did not find org.apache.jasper.servlet.JspServlet
2013-01-29 23:31:28.118:INFO::Opened /var/log/jetty/2013_01_29.request.log
2013-01-29 23:31:28.143:INFO::Started SelectChannelConnector@0.0.0.0:8080 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:55:40.013

看起来您没有解压缩 war 文件的写入权限 - 它无法写入`/var/cache/jetty/data/Jetty_0_0_0_0_8080_hello.war__hello__.yjv6m1/webapp/WEB-INF/applicationContext.xml`. 这`java.io.FileNotFoundException`令人困惑，但“权限被拒绝”消息告诉您真正的问题。

要么授予自己`/var/cache/jetty/data/`目录下的写入权限，要么以具有写入权限的用户身份运行 Jetty，或者将 Jetty 扩展战争文件的目录更改为您可以写入的位置。

# javascript - 当我使用数组时，kineticjs 鼠标事件不听

> ID：14593156
> 
> 赞同：0
> 
> 时间：2013-01-29T22:22:02.630
> 
> 标签：javascript, html, kineticjs

在 HTML5 的 kintic JS 中，当我使用变量进行操作时，我试图在鼠标上消失线条时效果很好：http: [//jsfiddle.net/Vbwta/](http://jsfiddle.net/Vbwta/)

```
 var layer = new Kinetic.Layer();
        lines0= new Kinetic.Line({
        points: [73+10, 70+10, 340+10, 23+10],
        stroke: 'red',
        strokeWidth: 7,
      });

      lines0.on('mouseover', function() {
            lines0.hide();
          layer.draw();;            
         });

    lines1= new Kinetic.Line({
        points: [53, 50, 320, 03],
        stroke: 'red',
        strokeWidth: 7,
      });

      lines1.on('mouseover', function() {
            //document.body.style.cursor = 'pointer';
            lines1.hide();
          layer.draw();;            
         }); 
```

但是当我使用数组时，同样的事情不能正常工作：http: [//jsfiddle.net/uNak5/](http://jsfiddle.net/uNak5/)

```
var lines= new Array();
    lines[0]= new Kinetic.Line({
        points: [73+10, 70+10, 340+10, 23+10],
        stroke: 'red',
        strokeWidth: 7,
      });

      lines[0].on('mouseover', function() {
            lines[a].hide();
          layer.draw();;            
         });

    lines[1]= new Kinetic.Line({
        points: [53, 50, 320, 03],
        stroke: 'red',
        strokeWidth: 7,
      });

      lines[1].on('mouseover', function() {
            //document.body.style.cursor = 'pointer';
            lines[1].hide();
          layer.draw();;            
         });

         layer.add(lines[0]);
         layer.add(lines[1]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:47:10.407

[http://jsfiddle.net/uNak5/1/](http://jsfiddle.net/uNak5/1/)

我更新了代码，您对数组项的引用设置为

```
 lines[a] 
```

比较起来

```
 lines[0] 
```

在你的听众中

```
 .on('mouseover', function()); 
```

# excel - Excel中字符串的分隔列表，如果没有值则不要添加分隔符

> ID：14593159
> 
> 赞同：0
> 
> 时间：2013-01-29T22:22:10.020
> 
> 标签：excel, excel-2013

我想将值列表转换为 Excel 中的分隔字符串。我正在寻找一个非 VBA 解决方案，但如果你有一个 VBA 解决方案，请发布，以便我可以看到它是如何完成的。

我想转

*   附属公司
*   中心
*   直流
*   特许经营
*   总部

进入：附属 > 中心 > DC > 特许经营 > 总部

**这是我当前的代码**

此代码有效，但它并不优雅且难以扩展到更多列表项

```
=CONCATENATE(U3, IF(W3="","",LuKeyPathDelimiter), W3, IF(Y3="","",LuKeyPathDelimiter), Y3, IF(AA3="","",LuKeyPathDelimiter), AA3, IF(AC3="","",LuKeyPathDelimiter), AC3) 
```

**这是一些屏幕截图**

*   [http://db.tt/k0RZdnVw](http://db.tt/k0RZdnVw)
*   [http://db.tt/M0WXUABb](http://db.tt/M0WXUABb)
*   [https://www.dropbox.com/s/y1w42p7plhicsp9/shot_130130_091714.png](https://www.dropbox.com/s/y1w42p7plhicsp9/shot_130130_091714.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:56:34.900

这是我的 VBA 解决方案版本，得到了很好的评价：

```
Function ConcatenateRange(ByVal cell_range As range, _
                    Optional ByVal seperator As String) As String

Dim cell As range
Dim newString As String
Dim cellArray As Variant
Dim i As Long, j As Long

cellArray = cell_range.Value

For i = 1 To UBound(cellArray, 1)
    For j = 1 To UBound(cellArray, 2)
        If Len(cellArray(i, j)) <> 0 Then
            newString = newString & (seperator & cellArray(i, j))
        End If
    Next
Next

If Len(newString) <> 0 Then
    newString = Right$(newString, (Len(newString) - Len(seperator)))
End If

ConcatenateRange = newString

End Function 
```

它与其他答案类似，但在速度和效率方面存在一些根本差异，例如使用变体数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T23:15:43.320

我喜欢使用以下 VBA 函数而不是工作表函数。它允许您使用您指定的分隔符连接一系列单元格：

```
 Function Concat(useThis As Range, Optional delim As String) As String
     ' this function will concatenate a range of cells and return the result as a single string
     ' useful when you have a large range of cells that you need to concatenate
     ' source: http://chandoo.org/wp/2008/05/28/how-to-add-a-range-of-cells-in-excel-concat/

     Dim retVal As String, dlm As String, cell As Range
     retVal = ""

     If delim = Null Then
        dlm = ""
     Else
        dlm = delim
     End If

     For Each cell In useThis
        If CStr(cell.Value) <> "" And CStr(cell.Value) <> " " Then
           retVal = retVal & CStr(cell.Value) & dlm
        End If
     Next

     If dlm <> "" Then
        retVal = Left(retVal, Len(retVal) - Len(dlm))
     End If

     Concat = retVal

  End Function 
```

# ember.js - 使用 ember-1.0.0-pre.4.min.js 时的错误

> ID：14593161
> 
> 赞同：0
> 
> 时间：2013-01-29T22:22:25.520
> 
> 标签：ember.js

[当我在我的代码上](http://jsfiddle.net/eJaKx/)使用 ember-1.0.0-pre.4.min.js时，我从 Chrome 的控制台调试器中收到以下错误：

未捕获的类型错误：对象原型可能只是一个对象或 null ember-1.0.0-pre.4.min.js:18 未捕获的类型错误：无法调用未定义的方法“扩展”

代码：

```
Win = Em.Application.create({                
    View: {}, 
    Model: {},
    Controller: {}
});

Win.Model.ValuePair = Em.Object.extend({
    id: null,
    name: null
});

Win.View.BrandKeywordView = Em.TextField.extend({
    keyDown: function () {
        var value = this.get('value');

        if (value) {
            Win.Controller.BrandKeywordController.searchBrand(value);
            console.log(Win.Controller.BrandKeywordController.content[0].id);
        }
    }
});

Win.Controller.BrandKeywordController = Em.ArrayProxy.create({
    content: [],

    searchBrand: function (brandName) {
        var me = this;
        $.ajax({
            type: "POST",
            dataType: "json",
            contentType: 'application/json; charset=utf-8',
            url: 'brands/default.aspx/Search',
            data: '{keyword:"' + brandName + '"}',
            success: function (data) {
                var brands = $.parseJSON(data.d);
                me.content = [];
                for (var i = 0, max = brands.length; i < max; i++) {
                    me.pushObject(Win.Model.ValuePair.create({ id: brands[i].Id, name: brands[i].Name }));
                }
            }
        });
    }
}); 
```

但是当我切换到 ember-1.0.beta.2.min.js 时一切正常。

我究竟做错了什么？

我应该使用哪个版本？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:55:29.600

在没有详细研究您的代码的情况下，我的猜测是路由 API。它在 pre2 和 pre3 之间完全改变了，因此不向后兼容。看看[http://emberjs.com/guides/routing/](http://emberjs.com/guides/routing/)

因此，您确实需要将您的代码“迁移”到新版本。它不仅适用于新版本。

请注意，API 已被 pre4 冻结。因此，在 ember js 的下一个主要版本之前，不应再出现 API 向后兼容性问题。

# outlook - 防止在 Outlook 中编辑约会和任务

> ID：14593164
> 
> 赞同：0
> 
> 时间：2013-01-29T22:22:46.830
> 
> 标签：outlook, outlook-addin, outlook-2007, outlook-2010, mapi

是否可以阻止用户在 Outlook 中编辑约会和任务。使用我们正在开发的插件同步任务和约会。

我们想发布第一个版本，但我们必须阻止用户编辑项目，因为我们无法将更改同步回服务器。

我们使用 Redemption 创建基于 MAPI 的约会和任务。

我们还使用 AddinExpress 在 Outlook 中进行一些操作。

欢迎任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:30:49.990

除非您创建自己的商店提供商，否则您无法进行真正只读的约会或任务。您可以尝试拦截每个特定项目的 Wrire 事件并将 Cancel 参数设置为 true。

# javascript - jquery查找和替换多个属性

> ID：14593167
> 
> 赞同：1
> 
> 时间：2013-01-29T22:22:59.560
> 
> 标签：javascript, jquery

抱歉，我才真正开始接触 javascript，但我无法确定语法。

这是我的脚本：

```
jQuery(document).ready(function ($) {
    $('div[align="right"][style="margin-right:15px;"]').each(function () {
        $(this).removeAttr('align')
        $(this).removeAttr('style');
        $(this).addClass('homepagecontent2');
    });
}); 
```

基本上我只想找到每个 div ，`align="right"`然后`style="margin-right:15px;"`删除`align`and`style`并添加类。

当我只是寻找它时它工作正常，`align="right"`但是当我将第二个元素添加到方程中时它会中断。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T22:25:08.407

最好按 CSS 样式过滤元素：

```
$("div[align='right']").filter(function() {
    return $(this).css("margin-right") === "15px";
}).removeAttr("align style").addClass("homepagecontent2"); 
```

# internet-explorer - IE7 中的字体系列 CSS3

> ID：14593169
> 
> 赞同：0
> 
> 时间：2013-01-29T22:23:10.293
> 
> 标签：internet-explorer, css, fonts, internet-explorer-7, font-face

出于某种原因，我的网站导致 IE 以“文档模式 IE7”呈现。我已经用字体版本替换了页面上的精灵和图像图标。不幸的是，font-face css 在这个浏览器中不起作用。当我在 IE 的开发人员工具中将“文档模式”切换到 IE8 或 IE9 时，图标按预期显示。

我不明白为什么 IE7 不显示图标。据我所知，它应该可以使用该字体。

正如您在代码中看到的，我使用了来自 fontello.com 的字体文件和 css 定义。

这是我用来显示图标的样式表：

```
<style type="text/css">
@font-face {
 font-family: 'fontello-postbit';
 src:url(/includes/fonts/fontello-postbit.eot);
 src:url(/includes/fonts/fontello-postbit.eot?#iefix) format('embedded-opentype'),
 url(/includes/fonts/fontello-postbit.woff) format('woff'),
 url(/includes/fonts/fontello-postbit.ttf) format('truetype'),
 url(/includes/fonts/fontello-postbit.svg#fontello-postbit) format('svg');
 font-weight:normal;
 font-style:normal;
}
[class^="icon-"]:before,
[class*=" icon-"]:before {
  font-family: 'fontello-postbit';
  font-style:normal;
  font-weight:normal;
  font-size: 120%;
  display:inline-block;
  text-decoration:none;
  width:1em;
  margin-right:0.2em;
  text-align:center;
  opacity:0.8;
/* fix buttons height, for twitter bootstrap */
  line-height: 1em;
/* Animation center compensation - magrins should be symmetric */
/* remove if not needed */
  margin-right: 0.2em;
  speak: none;
}
.icon-star:before { content: '\2605'; } /* '?' */
.icon-star-empty:before { content: '\2606'; } /* '?' */
.icon-flag:before { content: '\2691'; } /* '?' */
.icon-attention:before { content: '\26a0'; } /* '?' */
/* ... etc ...*/
.icon-user:before { content: '\1f464'; } /* '\1f464' */
</style> 
```

编辑：Duh - 我刚刚注意到 fontello 为 IE7 本身提供了一个 css 解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:29:11.783

可能是因为IE7 无法识别`:before`和伪元素。`:after`

如果它很关键，您可以尝试其中一些解决方案： [after-and-before-css-pseudo-elements-hack-for-ie-7](https://stackoverflow.com/questions/4181884/after-and-before-css-pseudo-elements-hack-for-ie-7)

或者你可以忽略IE7。

# regex - 用于指定 ASCII 范围的 XML Schema 正则表达式

> ID：14593172
> 
> 赞同：0
> 
> 时间：2013-01-29T22:23:41.373
> 
> 标签：regex, xsd, schema, w3c

我正在尝试使用正则表达式和 xsd:pattern 进行限制，以仅允许落在特定 ASCII 值范围内的字符，最多 10 个字符。特别是从 ASCII 值 33 到 126。

截至目前，我有以下要修改的代码段。

```
<xsd:simpleType name="Name">
    <xsd:restriction base="xsd:string">
        <xsd:pattern value="[(\p{L}|\d)._-]{0,9}"/>
    </xsd:restriction>
</xsd:simpleType> 
```

我拥有的另一个选项是在正则表达式中列出从 33 到 126 的单个 ASCII 字符。截至目前，我拒绝走这条路。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T22:36:18.020

使用类似的范围`[!-~]{0,10}`应该可以解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T17:18:27.150

为避免列出所有选项，您可以使用一个范围（正如 Ismail Ghalimi 已建议的那样）：

```
<xsd:pattern value="[!-~]{0,10}"/> 
```

或者，由于您列出的范围本质上是 ASCII 中的整个非空白字符集，因此您可以使用 Unicode 块名称 Basic Latin 和简单的字符类减法。您可以将长度约束移动到单独的方面：

```
<xsd:maxLength value="10"/>
<xsd:pattern value="[\p{IsBasicLatin}-[\s]]*"/> 
```

请注意，在 XSD 中，正则表达式是在没有锚的情况下编写的，因此开头不需要 ^，结尾不需要 $：要么模式匹配整个文字，要么文字不是类型有效的。

# silverlight - Silverlight LinqToSql SQL 跟踪

> ID：14593180
> 
> 赞同：1
> 
> 时间：2013-01-29T22:24:11.697
> 
> 标签：silverlight, linq-to-sql, wcf-ria-services

我在我的项目中使用带有 LinqToSQl 和 WCF RIA 服务的 Silverlight 5.0。我试图弄清楚如何在调试模式下记录底层 SQL 语句的跟踪（到 Sql Server），或者将其记录到控制台窗口或文件中。对于所有 CRUD 操作，我都需要这个。

所有在线示例都指向 DataContext.Log 属性，但我总是发现它的值是“Nothing”，而且我无法从项目的客户端访问它。如果可能的话，我计划在继续检索或保存数据之前有一个用户界面来显示实际的 SQL 语句。这将主要用于调试目的。

有没有办法从客户端查看底层 SQL 语句（使用断点并检查立即窗口中的值，或类似的东西）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:57:02.133

如果要记录 DataContext 执行的 sql 语句，则需要将[TextWriter](http://msdn.microsoft.com/de-de/library/system.io.textwriter.aspx)分配给DataContext 的属性 Log。

[Null 是 DataContext 的Log](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.log.aspx)的默认值，因此禁用了命令的日志记录。

要将 sql 语句记录到控制台，您可以将 Console.Out 分配给该属性。

```
db.Log = Console.Out; 
```

如果要将日志写入文件，可以将[StreamWriter](http://msdn.microsoft.com/de-de/library/system.io.streamwriter.aspx)分配给属性。

# ruby - 在 for 循环中使用 catch/throw 时出错 - 不匹配的“结束”？

> ID：14593181
> 
> 赞同：1
> 
> 时间：2013-01-29T22:24:12.850
> 
> 标签：ruby, syntax-error

我正在阅读[“The Ruby Programming Language”](https://rads.stackoverflow.com/amzn/click/com/0596516177)并想尝试书中提供的示例（第 6 章，改变控制流，catch 和 throw），以使用 catch/throw 打破嵌套循环：

```
for matrix in data do 
  catch :missing_data do
    for row in matrix do 
      for value in row do
        throw :missing_data unless value
        puts value
      end
    end
  end
end 
```

我将数据定义为三个矩阵的数组：

> 数据 => [[[2, 3, 7], [8, 9, 10], [0, 1, 4]], [["a", "b", "c"], ["d", false, "e"], ["f", "g", nil]], [["abc", "def"], ["ghi", "jkl"]]]

然而，当我在 IRB（版本 1.9.3p327）中尝试代码时，我得到一个“意外的 $end，期待 keyword_end”错误。我尝试过使用代码并发现如果我删除最外面的（即 for）循环它可以工作，但是使用循环我得到了错误。为了仔细检查，我创建了一个更简单的循环：

```
for i in [1,2,3] do
  catch :two do
    if i==2 then throw :two end
  end
end 
```

再次，我得到相同的情况：for循环出错，没有for循环没有错误（实际上，使用IRB，我没有机会进入最后一个'end'，但进入第四个后得到错误上一行）。

有谁知道我为什么会收到这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T22:37:21.487

你不需要`do`. `for ... in ...`这实际上是一个语法错误。那是你的问题。`catch`与/无关`throw`。只需`do`从所有`for`循环中删除。

工作示例：

```
for matrix in data 
  catch :missing_data do
    for row in matrix 
      for value in row
        throw :missing_data unless value
        puts value
      end
    end
  end
end 
```

**编辑：**

这是一个 IRB 问题。当我将您的代码放入脚本中时，它可以完美运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T22:37:43.037

这似乎是构建和/或环境相关的（我倾向于环境）：

*   当我从 Sublime Text 2 中执行原始代码时，它可以工作
*   `ruby`从命令行运行时，原始代码有效
*   当我输入原始代码时，它*不起作用*`irb`

`irb`将 the放入`do`external 中`for`，或使用`{}`for the `catch`，可以：

```
$ rvm use 1.9.3-p327                                                                              Using /Users/Dave/.rvm/gems/ruby-1.9.3-p327
$ irb
irb(main):001:0> data = [[[2, 3, 7], [8, 9, 10], [0, 1, 4]], [["a", "b", "c"], ["d", false, "e"], ["f", "g", nil]], [["abc", "def"], ["ghi", "jkl"]]]
irb(main):002:0> for matrix in data do
irb(main):003:1*   catch(:missing_data) {
irb(main):004:2*     for row in matrix do 
irb(main):005:3*       for value in row do
irb(main):006:4*         throw :missing_data unless value
irb(main):007:4>         puts value
irb(main):008:4>       end
irb(main):009:3>     end
irb(main):010:2>   }
irb(main):011:1> end
2
3
7
8
9
10
0
1
4
a
b
c
d
abc
def
ghi
jkl 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T22:49:55.913

正如我在评论中所说，`do`从你的`for`陈述中删除。

# url - Jmeter中的URL编码变量

> ID：14593183
> 
> 赞同：15
> 
> 时间：2013-01-29T22:24:27.453
> 
> 标签：url, automation, httprequest, jmeter

我需要在 中编码一个变量`Jmeter`，但它不是参数。例如：

`URL path: /folder/guest/id;token=${token}/profile?details=yes`

我想对`${token}`变量进行编码，并且只对令牌变量进行编码。我知道您可以`encode`在参数部分进行选择，但这不是参数。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-11-01T22:31:49.733

JMeter 2.10 版现在包含一个 urlencode 函数。

```
${__urlencode(${token})} 
```

见[http://jmeter.apache.org/usermanual/functions.html](http://jmeter.apache.org/usermanual/functions.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-29T23:34:07.303

我发现这样做的最好方法是使用一个`JavaScript`函数：

```
${__javaScript(encodeURIComponent('${token}'))} 
```

所以请求将是：

```
/folder/guest/id;token= ${__javaScript(encodeURIComponent('${token}'))}/profile?details=yes 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-01-31T02:57:29.450

如果您使用的是 JMeter GUI -- HTTP 请求，您可以检查编码选项：

[![在此处输入图像描述](../Images/c2df0bb26425d2c17fcd64c7bf7e019a.png)](https://i.stack.imgur.com/ocJ1H.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-31T19:08:27.793

__urlencode 函数工作正常。只是我们需要将令牌变量放在
引号中。即 ${__urlencode('${token}')}

# objective-c - 从 Objective C 执行命令

> ID：14593184
> 
> 赞同：2
> 
> 时间：2013-01-29T22:24:34.500
> 
> 标签：objective-c, macos, cocoa, command-line

我想从目标 C（Cocoa 框架）执行命令。我正在尝试的命令如下。我尝试使用 NSTask，但是当我执行它时它说“启动路径不可访问”。

```
sudo ifconfig en0 down 
```

我的代码是：

```
- (void)testme {
NSTask *task;
task = [[NSTask alloc] init];
[task setLaunchPath: @"sudo ifconfig en0 down"];

NSArray *arguments;
arguments = [NSArray arrayWithObjects: @"foo", @"bar.txt", nil];
[task setArguments: arguments];

NSPipe *pipe;
pipe = [NSPipe pipe];
[task setStandardOutput: pipe];

NSFileHandle *file;
file = [pipe fileHandleForReading];

[task launch];

NSData *data;
data = [file readDataToEndOfFile];

NSString *string;
string = [[NSString alloc] initWithData: data encoding: NSUTF8StringEncoding];
NSLog (@"command returned:\n%@", string);

[string release];
[task release]; 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T22:28:49.663

`sudo ifconfig en0 down`不是一个明智的发射路径。此命令的正确启动路径是`/usr/sbin/sudo`.

完成后，您仍然需要将正确的参数传递给`setArguments:`. `foo`并且`bar.txt`看起来像您在没有阅读的情况下复制的示例代码。

**更重要的是，虽然，`sudo`从 NSTask 运行将不起作用。**您将需要使用[授权服务](http://developer.apple.com/library/mac/#documentation/security/Reference/authorization_ref/Reference/reference.html)来启动特权命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T22:29:23.137

您需要指定完整的可执行路径，并且应该将参数指定为参数，而不是与启动路径一起指定。`NSTask`不是外壳，它在内部使用系统调用（`execv()`我猜）来调用命令。

```
NSTask *task = [[NSTask alloc] init];
[task setLaunchPath:@"/usr/bin/sudo"];

NSArray *arguments = @[@"ifconfig", @"en0", @"down"];
[task setArguments:arguments]; 
```

# linux - 管道文件进入切口时出现意外操作员

> ID：14593186
> 
> 赞同：1
> 
> 时间：2013-01-29T22:24:39.467
> 
> 标签：linux, shell, ubuntu

我正在尝试使用文件检查文件的类型，然后在我的情况下使用 cut 命令仅获取 JPEG 等类型，然后使用它来检查文件是否是所需的类型。但是，每当我在 Shell 中运行它时，它都会吐出 pic1.jpg：Unexpected Operator。我不确定问题出在哪里，这让我困惑了一段时间。

```
!#/bin/sh

file=$(file -F " " $1)

if [ $file = ERROR: ] || [ $file = empty ] then
    echo "$1 is not a valid jpeg file." >&2 >> error.log
else
    extension=$(file -F " " $1 | cut -f 3 -d " ") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:39:34.857

请注意，您必须在语句中用`$file`双引号括起来。`if`否则，`$file`shell 会将 的内容解释为命令。这是您应该注意的 shell 编码的主要缺陷之一。

此外，您还缺少 the `;`between the`]`和`then`语句。注意`[ ... ]`与命令相同`test`。`]`只是它的最后一个论点。不像您在“普通语言”中所期望的那样“只是一个括号”:)。因此，如果同一行上有两个表达式，则必须用`;`

尽管我可以建议对我的示例进行一些改进，但我的示例与您的示例相同，以指出错误。以下代码将起作用：

```
#!/bin/sh

file=$(file -F " " $1)

if [ "$file" = "ERROR:" ] ||  [ "$file" = "empty" ] ; then
    echo "$1 is not a valid jpeg file." 1>&2 >> error.log
else
    extension=$(file -F " " $1 | cut -f 3 -d " ")
fi

echo "$extension" 
```

请注意，如果没有双引号，您的脚本将导致以下 if 语句：

```
if [ test.sh  POSIX shell script, ASCII text executable = Error: ] || [ test.sh  POSIX shell script, ASCII text executable = empty ] 
```

# php - 使用 PHP 创建 XML 文件时出现 XMLWriter 错误

> ID：14593187
> 
> 赞同：0
> 
> 时间：2013-01-29T22:24:42.443
> 
> 标签：php, xml, xml-parsing, whitespace, xmlwriter

执行下面的代码（减去数据库调用）后，我收到“第 7 列第 331 行错误：文档末尾的额外内容”错误。我浏览了这些论坛，但找不到解决方案。我没有任何随机字符或任何应该添加额外空格的代码......有什么想法吗？

```
<?php 
header('Content-type: text/xml');
mysql_connect("localhost", "---", "---");
mysql_select_db("---");

$query = "SELECT title FROM table";
$result = mysql_query($query);

$xml = new XMLWriter();
$xml->openURI("php://output");
$xml->startDocument();
$xml->setIndent(true);
$xml->writeRaw('<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns:news="http://www.google.com/schemas/sitemap-news/0.9">');
$xml->startElement('url');
while ($row = mysql_fetch_assoc($result)) {
    if(!empty($row)){
        $title = $row['title'];
        $xml->startElement('loc');
            $xml->writeRaw('http://domain.com/article/');
        $xml->endElement();
        $xml->startElement('news:news');
            $xml->startElement("news:publication");
                $xml->startElement("news:name");
                    $xml->writeRaw('Name');
                $xml->endElement();
                $xml->startElement("news:language");
                    $xml->writeRaw('en');
                $xml->endElement();
            $xml->endElement();
            $xml->startElement('news:title');
                $xml->writeRaw($title);
            $xml->endElement();
            $xml->endElement();
    }
}
$xml->endElement();
$xml->flush(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-27T16:03:09.567

编程中的一个关键点是降低某些代码的复杂性。这包括减少缩进，这样就不会有太多的代码相互粘连。这通常很难遵循。

例如，while 体内的 if 子句可以大大简化，将内部已经向上移动一级：

```
while ($row = mysql_fetch_assoc($result)) {

    if (empty($row)) {
        continue;
    }

    $title = $row['title'];
    ...
} 
```

`continue`循环内部只是说：下一次迭代。

您创建的 XML 标记也有缩进。并非所有都可以预防，但是，有些可以。例如，该[`XMLWriter::writeElement()`](http://php.net/xmlwriter_write_element)方法允许输出包含其内部文本的整个元素。这允许减少以下三行：

```
$xml->startElement('loc');
    $xml->writeRaw('http://domain.com/article/');
$xml->endElement(); 
```

对一个：

```
$xml->writeElement('loc', 'http://domain.com/article/'); 
```

由于有多组这样的行，现在的代码实际上已经很短了。通过结束文档也可以改善结尾，甚至不需要刷新。为了使缩进更具可读性，您还可以使用方括号来表示缩进：

```
while ($row = mysql_fetch_assoc($result)) {

    if (empty($row)) {
        continue;
    }

    $title = $row['title'];

    $xml->writeElement('loc', 'http://domain.com/article/');

    $xml->startElement('news:news');
    {
        $xml->startElement("news:publication");
        {
            $xml->writeElement("news:name", 'Name');
            $xml->writeElement("news:language", 'en');
        }
        $xml->endElement();

        $xml->writeElement('news:title', $title);
    }
    $xml->endElement();
}

$xml->endDocument(); 
```

所以这不仅更具可读性，好消息是你遇到错误的情况也得到了修复。那是因为该 [`XMLWriter::writeRaw()`](http://php.net/xmlwriter_write_raw)方法已被删除。它写原始文本的功能是什么，这意味着未转义：

```
$title = 'hackers <3 noodles';

$xml->startElement('news:title');
    $xml->writeRaw($title);
$xml->endElement(); 
```

输出：

```
<news:title>hackers <3 noodles</news:title>
                    ^ 
```

如输出所示，`<`字符逐字进入输出。根据标题，甚至可以注入纯 XML 代码，从而破坏整个文档结构并导致错误。使用`XMLWriter::writeElement()`对此免疫：

```
$title = 'hackers <3 noodles';

$xml->writeElement('news:title', $title); 
```

输出：

```
<news:title>hackers &lt;3 noodles</news:title>
                    ^^^^ 
```

如输出所示，此处使用了属性 XML 实体来保留文档结构。

所以你最初寻找的方法是[`XMLWriter::text()`](http://php.net/xmlwriter_text). 但是对于这种情况，您不再需要它，因为优化后的代码不再存在该问题。所有文本输出都通过`XMLReader::writeElement()`. 另请参阅[*使用 PHP XMLWriter::writeElement 时保留 XML 代码，*](https://stackoverflow.com/q/12844599/367456)这与同一主题但相反。

我希望这对您仍然有用，因为问题有点老了。

# c# - SQL Server 2008 和 SQL Server 2008 Express 之间的批量和批处理，无需存储过程

> ID：14593189
> 
> 赞同：0
> 
> 时间：2013-01-29T22:24:43.550
> 
> 标签：c#, sql-server-2008, sync, microsoft-sync-framework

我想使用 MS Sync Framework v2.1 从 SQL Server 2008 同步到 SQL Server 2008 Express 客户端。当客户端关闭时，服务器可能有多达几十万个新行。由于可能的行数很多，我想实现批处理和批量导入。

有谁知道如何处理这种将未知（几行到大量行）从服务器同步到客户端的情况？

使这更难的一个要求是服务器不能在其上运行存储过程，所以我认为禁止使用，`SyncOrchestrator/SqlSyncProvider`除非客户端可以使用`SqlSyncProvider`并且服务器使用另一个不需要存储过程的提供程序？

我尝试了这种方法，`SyncOrchestrator/SqlSyncProvider`用于本地提供程序，并且`DbServerProvider`用于`RemoteProvider`但收到了`InvalidCastException`. 这可能吗？

考虑到在服务器上不使用存储过程的限制，是否有更好的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:47:25.397

DBServerProvider 是一个较旧的提供程序，其工作方式不同。您将它与 SyncAgent/SqlCeClientSyncProvider/DbServerSyncProvider 组合一起使用。这些提供者是“基于锚的”。

SyncOrchestrator/SqlSyncProvider/SqlCeSyncProvider 组合是较新的组合，并且是“基于知识的”。

较旧的 DbServerProvider OOTB 仅支持客户端数据库的 SQL Compact。曾经有一个 SQLExpressClientSyncProvider，但 MS 已经从下载站点中取出了它。

有一些方法可以通过自己在代码中构建 SQLCommands 来避免不使用 SqlSyncProvider 的存储过程。不过，您仍然需要触发器和跟踪表来跟踪更改。

# ruby-on-rails - RSpec 在使用内联救援调用存根方法时遇到问题

> ID：14593190
> 
> 赞同：0
> 
> 时间：2013-01-29T22:24:43.970
> 
> 标签：ruby-on-rails, rspec, stub

我正在尝试在控制器上测试一种方法：

```
def a_method(list)
  @users = []
  list.each do |x|
    if user=User.find(x) rescue nil
      @users << user
    end
  end
end 
```

在我的 Rspec 示例中，我有：

```
it "should do something" do
  User.stub :find => 'user'
  controller.a_method([1,2,3,4])
  assigns[:users].should == ['user','user','user','user']
end 
```

问题：

它总是拯救 find 方法`user=User.find(x) rescue nil`，即使我已经把它存根了。如果我删除`rescue nil`它工作正常。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:28:47.900

if 条件不接受语句修饰符，例如语句的`rescue`一半。`if`您可以将救援放在完整语句的末尾，如下所示：

```
if user=User.find(x)
  @users << user
end rescue nil 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:49:44.053

为什么不使用 find_by_id 而不是 find？

如果 id 不存在而不是抛出异常， find_by_id 返回 nil，这与您所做的几乎相同，但我猜要快一点，而且阅读起来更干净

# java - 管道中的条件 ExecutionHandler

> ID：14593192
> 
> 赞同：1
> 
> 时间：2013-01-29T22:24:53.567
> 
> 标签：java, multithreading, netty, pipeline

我正在开发的服务器根据从客户端收到的消息有不同的任务要执行，有些任务非常简单并且需要很少的时间来执行，但其他任务可能需要一段时间。

将 ExecutionHandler 添加到管道似乎是复杂任务的一个很好的解决方案，但我想避免线程化简单任务。

我的管道如下所示：

```
pipeline.addLast("decoder", new MessageDecoder());
pipeline.addLast("encoder", new MessageEncoder());
pipeline.addLast("executor", this.executionHandler);
pipeline.addLast("handler", new ServerHandler(this.networkingListener)); 
```

其中 MessageEncoder 返回一个 Message 对象（for `decode`），它定义了请求的任务。

有没有办法根据解码的消息跳过执行处理程序？
这个问题可以概括为：有没有办法确定是否使用下一个处理程序？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T05:39:15.437

您可以扩展它以覆盖其拦截上游事件并调用其消息符合您的条件的s 的方法，而不是按`ExecutionHandler`原样使用。所有其他事件都可以由via处理。那是：`handlerUpstream()``ctx.sendUpstream(e)``MessageEvent``ExecutionHandler``super.sendUpstream(e)`

```
public class MyExecutionHandler extends ExecutionHandler {
    public void handleUpstream(ctx, evt) throws Exception {
        if (evt instanceof MessageEvent) {
            Object msg = ((MessageEvent) evt).getMessage();
            if (msg instanceof ExecutionSkippable) {
                ctx.sendUpstream(evt);
                return;
            }
        }

        super.handleUpstream(evt);
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T23:49:57.527

在向上游发送消息之前，您可以从 MessageDecoder 内的管道中将其删除（或按需添加）。您还可以检查 executionHandler 中的消息并将其传递到上游。如果您无法修改这两个文件，您可以创建另一个处理程序，该处理程序根据消息类型删除 executionHandler。

# regex - 为什么 boost::regex_match 返回我总是假的？

> ID：14593193
> 
> 赞同：1
> 
> 时间：2013-01-29T22:24:59.857
> 
> 标签：regex, boost

很明显这里必须我匹配，但是这段代码仍然返回false。

```
#include <iostream>
#include <boost/regex.hpp>
using namespace std;
using namespace boost;

int main() {
  cout << regex_match("some text", regex("text")) << endl;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T22:29:19.320

`regex_match`必须匹配所有给定的字符序列。试试`regex_search`吧。

# c# - 使用 Eval 和 If 语句 C# 重构 aspx 页面

> ID：14593198
> 
> 赞同：0
> 
> 时间：2013-01-29T22:25:14.180
> 
> 标签：c#, asp.net, refactoring

我想知道是否有更好的方法来编写这段代码。

```
<%#Eval("hasAccess").Equals(true) ? "<a href='/CaseActivities.aspx?" + Eval("caseURL") + "'>" + Eval("caseName") + "</a>" : Eval("caseName")%> 
```

我试过 <% If (Eval("hasAccess") ... 但 asp.net 不喜欢那样:)

我希望有类似的东西

```
<% If Eval("hasAccess") %>
do stuff .. 
<% else %>
do other stuff. 
```

但是当使用带有 IF 的 Eval 时，它会变得一团糟......有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T22:29:29.047

几乎可以肯定，您应该在后面的代码中执行此操作，而不是在 scriptlet 中。在数据绑定的情况下，有几个选项：

1.  与其将这些操作作为数据绑定的一部分执行，不如在绑定之前更改底层数据源，以便数据绑定本身只采用原样的值。

2.  在后面的代码中添加一个方法，该方法获取该列并返回正确的值，这样数据绑定方法只需要评估对该方法的调用并传递该列。

3.  如果要复杂，不要在标记中进行数据绑定；在代码后面使用数据绑定事件（如果可用）。

这些是按照您应该尝试使用它们的优先顺序列出的。

# viewport - 视口元不起作用，并且不允许在 iPhone 上缩放

> ID：14593199
> 
> 赞同：1
> 
> 时间：2013-01-29T22:25:14.250
> 
> 标签：viewport, meta, pinchzoom

我已经尝试了所有方法，但无法让我的客户的网站在我的 iPhone 5 上扩展。

[smalldotdesign.com/clients/ops](http://smalldotdesign.com/clients/ops)

```
<meta name="viewport" content="width=device-width, initial-scale=0.3, minimum-scale=0.25, maximum-scale=5.0, user-scalable=1;" /> 
```

这段代码在 meta 中的正确位置，因为该网站会自动缩放......但不会让我捏缩放。谁能帮我这个？我已经尝试了我能找到的一切。我已经搞砸了一个小时并查看了所有论坛，但他们都说同样的话。

任何指导将不胜感激。即使删除了元标记，页面也不会缩放。也许 CSS 中有一些东西会导致这种情况？

# rest - 制作API，其他方可以ajax提交到我们的服务器

> ID：14593200
> 
> 赞同：0
> 
> 时间：2013-01-29T22:25:15.877
> 
> 标签：rest

我们有一组活动网站 ala [http://safeinthecity.com](http://safeinthecity.com)。我们希望创建一个尽可能通用的 API，其他第三方站点可以集成表单（右侧矩形中的那个），并且表单应该使用 Ajax 发布到我们的服务器。

这里出现了问题 - 浏览器实现跨域限制的原因是不可能的。我们可以让第三方以正常方式将表单发布到我们的服务器，但随后用户将从第三方站点重定向到我们的站点，这并不容易出售。一种解决方案是第三方添加服务器他们发布到的脚本（PHP、Java、.NET、Ruby on Rails 等等），然后第三方服务器脚本通过等效于 Apache HTTP 客户端的 API 发出请求），但这非常麻烦且难以卖出。有没有更聪明的方法来解决这个我还没有发现的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:35:34.877

好的，想出了一个办法，即使这样我也不喜欢不支持 POST、PUT、DELETE

[http://devlog.info/2010/03/10/cross-domain-ajax/](http://devlog.info/2010/03/10/cross-domain-ajax/)

# jquery - 在 jquery 选择器中使用变量

> ID：14593201
> 
> 赞同：0
> 
> 时间：2013-01-29T22:25:22.400
> 
> 标签：jquery

我无法让下面的代码正常工作我没有收到任何错误。我需要的是在`#equipmentList1`更改时显示与选择相对应的下拉列表。然后根据后面下拉列表的选择，它应该只将选择的下拉列表的值写入`equipmentList2`DIV。`selectedVisibleValue1`包含选择第一个下拉列表后出现的字段的 ID 我尝试将其传递给第二个函数以使用它来编写它，`innerHTML`但它的行为就像它没有接收到变量一样，因为没有任何反应。也许我的代码中的其他地方有错误。我是 jQuery 的新手，所以如果有人可以看看，让我知道有什么问题，那就太棒了。

```
$(document).ready(function () {
  $('#equipmentList1').bind('change', function () {
    var elements = $('div.equipmentList2').children().hide(); // hide all the elements
    var value = $(this).val();    

    if (value.length) { // if somethings' selected
      elements.filter('.' + value).show(); // show the ones we want
      var selectedVisibleValue1 = $(".equipmentList2 select:visible").attr("id");
    }
  }).trigger('change');
});   

$(document).ready(function () {
  $("#" + selectedVisibleValue1).bind('change', function () {
    var value = $(this).val();  

    if (value.length) {
      var equipment = document.getElementById("equipmentList1").value;
      document.getElementById('equipmentList2').innerHTML = selectedVisibleValue1;
    }
  }).trigger('change');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:27:47.780

你不需要两个`$(document).ready(...)`函数，只需要一个，把所有的代码放在其中一个。我不确定这是问题的原因，但很有可能。

# javascript - 为不同高度的图像做一个垂直轮播的逻辑

> ID：14593203
> 
> 赞同：0
> 
> 时间：2013-01-29T22:25:25.143
> 
> 标签：javascript, jquery, image, vertical-alignment

我正在做我自己的垂直 jquery carousel ... imgs 来自数据库，我不知道这些高度，那么我需要知道是否有一些逻辑来计算容器的高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:32:49.567

是的，有人说容器有一个类容器 `var container=$("div.container")` 的 div，高度由下式给出 `container.height();`

# c - mexFunction 引用外部头文件

> ID：14593204
> 
> 赞同：1
> 
> 时间：2013-01-29T22:25:28.323
> 
> 标签：c, matlab, mex

我正在尝试使用 mex（MacOSX Lion 上的 MATLAB 2012b）编译 C 文件。我的项目包含三个文件：

1.  定义主要功能的头文件，[smdvquad.h](http://pastebin.com/iPpEXD5a)
2.  smdvquad.h 的 C 实现，即[smdvquad.c](http://pastebin.com/TAA6L3TZ)其中#includes smdvquad.h 和
3.  包含“mexFunction”的 AC 文件，即[mxsmdvquad.c](http://pastebin.com/Tskz1fh4)其中#includes smdvquad.h

整个项目在 Netbeans 上编译得非常好，但是当我尝试在 MATLAB 上使用 mex 编译它时，即使用以下命令：

```
mex -largeArrayDims mxsmdvquad.c 
```

抛出以下错误：

```
>> mex -largeArrayDims mxsmdvquad.c
Undefined symbols for architecture x86_64:
  "_smdv_quad", referenced from:
      _mexFunction in mxsmdvquad.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status

    mex: link of ' "mxsmdvquad.mexmaci64"' failed.

Error using mex (line 206)
Unable to complete successfully. 
```

我还尝试使用 -I mex-argument 指定工作目录，即

```
mex -largeArrayDims -I/path/to/my/project/ mxsmdvquad.c 
```

但徒劳！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:46:57.303

我希望以下其中一项可行：

也许您还需要编译`smdvquad.c`？

```
mex -largeArrayDims mxsmdvquad.c smdvquad.c 
```

或者如果你已经编译了 smdvquad，你可能需要链接它：

```
mex -largeArrayDims mxsmdvquad.c smdvquad.o 
```

或者如果它在不同的目录中，您需要将目录添加到链接器`-L`：

```
mex -largeArrayDims -L/path/to/project mxsmdvquad.c smdvquad.o 
```

# java - 将 POST 请求标头发送到 Web 服务器

> ID：14593205
> 
> 赞同：0
> 
> 时间：2013-01-29T22:25:28.843
> 
> 标签：java, http, http-post, httpclient, undefined-index

我正在尝试向位于 Web 服务器上的 php 文件发送 POST 请求。目前我已成功发送请求，但标头未正确发送。

以下是我要发送的查询字符串：

```
lastName=Jones&title=Android+Game+Programming+2&price=22.99&isbn=9876543210123&year=2012&firstName=Joe&publisher=Android+Press 
```

这就是我尝试将它们发送到服务器的方式：

```
if(method.equalsIgnoreCase("POST")){

        //Write the http post request to web server
        s.getOutputStream().write(("POST " + path + " HTTP/1.0\r\n").getBytes("ASCII"));
        s.getOutputStream().write("Host: www.jdiadt.com\r\n\r\n".getBytes("ASCII"));

        //Request Headers
        String title = "title: "+request.getParameters().get("title") + "\r\n";
        String firstName = "firstName: "+request.getParameters().get("firstName") + "\r\n";
        String lastName = "lastName: " + request.getParameters().get("lastName") + "\r\n";
        String isbn = "isbn: " + request.getParameters().get("isbn") + "\r\n";
        String publisher = "publisher: " + request.getParameters().get("publisher") + "\r\n";
        String year = "year: " + request.getParameters().get("year") + "\r\n";
        String price = "price: " + request.getParameters().get("price") + "\r\n";

       s.getOutputStream().write(title.getBytes("ASCII"));
       s.getOutputStream().write(firstName.getBytes("ASCII"));
       s.getOutputStream().write(lastName.getBytes("ASCII"));
       s.getOutputStream().write(isbn.getBytes("ASCII"));
       s.getOutputStream().write(publisher.getBytes("ASCII"));
       s.getOutputStream().write(year.getBytes("ASCII"));
       s.getOutputStream().write(price.getBytes("ASCII"));

         //Blank line
        String blankline = "\r\n";
        s.getOutputStream().write(blankline.getBytes("ASCII"));

        //Flush and wait for response...
        s.getOutputStream().flush(); 
```

当我运行代码时，我从脚本中收到此通知，这使我相信我没有正确发送标头：

```
Notice: Undefined index: title in C:\wamp\www\bookstore\createBook.php on line 3 
```

对于我尝试检索通过 POST 发送的变量的每一行，它都会给出上述错误。这是代码：

```
$title = $_POST['title'];
$firstName = $_POST['firstName'];
$lastName = $_POST['lastName'];
$publisher = $_POST['publisher'];
$isbn = $_POST['isbn'];
$year = $_POST['year'];
$price = $_POST['price']; 
```

关于可能出现什么问题的任何信息？

`createBook.php`

```
<?php

$title = $_POST['title'];
$firstName = $_POST['firstName'];
$lastName = $_POST['lastName'];
$publisher = $_POST['publisher'];
$isbn = $_POST['isbn'];
$year = $_POST['year'];
$price = $_POST['price'];

try {
    require_once 'BookDAO.php';
    require_once 'Book.php';

    $dao = new BookDAO();
    $book = new Book(NULL, $title, $firstName, $lastName,
                    $publisher, $isbn, $year, $price);

    $dao->insert($book);

    $books = $dao->findAll();

    if (count($books) > 0) {
        echo '<table>';
        echo '<tr>';
        echo '  <th>Title</th>
                            <th>First name</th>
                            <th>Last name</th>
                            <th>Year</th>
                            <th>Price</th>
                            <th>Actions</th>';
        echo '</tr>';
        foreach ($books as $book) {
            echo '<tr>';
            echo '<td>' . $book->getTitle() . '</td>';
            echo '<td>' . $book->getFirstName() . '</td>';
            echo '<td>' . $book->getLastName() . '</td>';
            echo '<td>' . $book->getYear() . '</td>';
            echo '<td>' . $book->getPrice() . '</td>';
            echo '<td>';
            echo '<a href="editBookForm.php?id=' . $book->getId() . '">';
            echo '<img src="images/edit20.png" alt="Edit Book" />';
            echo '</a>';
            echo '<a href="deleteBook.php?id=' . $book->getId() . '"';
            echo ' onclick="return confirm(\'Are you sure you want to delete';
            echo ' this book?\');">';
            echo '<img src="images/delete20.png" alt="Delete Book" />';
            echo '</a>';
            echo '</td>';
            echo '</tr>';
        }
        echo '</table>';
    }
    else {
        echo "<p>There are no books in the database.</p>";
    }
    echo '<p>';
    echo '<a href="createBookForm.php">';
    echo '<img src="images/new20.png" alt="New Book" /> New Book';
    echo '</a>';
    echo '</p>';
}
catch (PDOException $e) {
    exit("Connection failed: " . $e->getMessage());
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:50:23.807

您正在以 GET 类型（查询字符串）的方式设置参数，并尝试使用 POST 获取它们。您应该更改其中任何一个，以使它们相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T23:35:02.137

我自己解决了这个问题。对于想知道我在这里做了什么的人来说，这是我的解决方案。

正如您在上面的代码中看到的那样，我在原始问题中包含我试图一个接一个地发送标题，这是完全错误的事情！

我检查了以下两个链接（特别是第二个链接），发现它们对解释 POST 请求结构非常有帮助。

[http://net.tutsplus.com/tutorials/other/http-headers-for-dummies/](http://net.tutsplus.com/tutorials/other/http-headers-for-dummies/)

[http://ruturajv.wordpress.com/2005/12/25/http-post-request/](http://ruturajv.wordpress.com/2005/12/25/http-post-request/)

然后我回到我的代码，对我构建发布请求的方式进行了以下更改：

```
//POST REQUEST
    if(method.equalsIgnoreCase("POST")){

        //CONSTRUCT REQUEST
        String blankline = "\r\n";
        String query = request.getQueryString();
        String length = String.valueOf(query.length());
        System.out.println(length);

        //Write the http post request to web server
        s.getOutputStream().write(("POST " + path + " HTTP/1.0" +"\r\n").getBytes("ASCII"));
        s.getOutputStream().write(("Host: localhost.com" + "\r\n").getBytes("ASCII"));
        s.getOutputStream().write(("Content-Type: application/x-www-form-urlencoded"+"\r\n").getBytes("ASCII"));
        s.getOutputStream().write(("Content-Length: " + length + "\r\n").getBytes("ASCII"));
        s.getOutputStream().write(blankline.getBytes("ASCII"));
        s.getOutputStream().write(query.getBytes("ASCII"));

        //Flush and wait for response...
        s.getOutputStream().flush(); 
```

然后我只需从服务器读取响应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T22:45:36.050

为什么不使用像 HttpClient 这样的库？它有一个非常好的 API 用于执行 HTTP GET、POST 和其他方法。它将允许您编写不那么脆弱且更易于理解的代码。

链接：[http ://hc.apache.org/httpclient-3.x/](http://hc.apache.org/httpclient-3.x/)

# php - 如何在 php 中上传带有文本的图像，调整大小并将其添加到数据库中？

> ID：14593208
> 
> 赞同：1
> 
> 时间：2013-01-29T22:25:49.217
> 
> 标签：php

这是我对不起作用的问题的解决方案。它由四个不同的 PHP 文件组成，一个带有表单，一个用于更新数据库，一个用于更改图像标题，使其看起来正确并最后显示所有内容。

```
//create form  
<h3>create person</h3>
<form action="create.php" method="post" enctype="multipart/form-data">
name:<input type="text" name="personname" value=""/>
info:<input type="text" name="personinfo" value=""/>
<br />
<br />
image:<input type="file" name="image" />
<input type="submit" name="submit" value="upload" />
</form>

<?php

$people = mysql_query("SELECT * FROM people", $connection);

if(!$people){
die("Failed: " . mysql_error());
}

while ($person = mysql_fetch_array($people)){
echo "<h1>{$person["name"]}</h1>";
echo "<p>{$person["info"]}</p>";
echo "<p>{$person["id"]}</p>";
echo "<P>{$person["img_name"]}</p>"; 
echo "<img src=getimage.php?id=" . urlencode($person["id"]) . ">";
echo "<br /><a href=\"Modify.php?personid=" . urlencode($person["id"]) . "\">Modify     User</a>";
echo " ";
echo "<a href=\"delete.php?personid=" . urlencode($person["id"]) . "\">Delete User</a>"; 
 }

?>

//creates image
<?php include 'includes/connection.php'; ?>
<?PHP

$name = $_POST['personname'];
$info = $_POST['personinfo'];
$img_name = addslashes($_FILES['image']['name']);
$image = imagecreatefromjpeg($_FILES['image']['tmp_name']);
$size = addslashes($_FILES['image']['size']);
$type = addslashes($_FILES['image']['type']);
$size2 = getimagesize($temp);
$width = $size2[0];
$height = $size2[1];

$newwidth = 100;
$ratio = $newwidth/$width;
$newheight = round($height * $ratio);

$new = imagecreatetruecolor($newwidth, $newheight);
imagecopyresampled($new, $image, 0, 0, 0, 0, $newwidth, $newheight, $width, $height);
imagejpeg($image);

mysql_query("INSERT INTO people (`id`,`name`,`info`,`image`,`img_name`) 
VALUES (NULL, '$name','$info','$new','$img_name')")or die(mysql_error);
header ('Location: adminarea.php?linkid=1');

?>

//display image
<?php include 'includes/connection.php'; ?>
<?php

$people = mysql_query("SELECT * FROM people", $connection);

if(!$people){
die("Failed: " . mysql_error());
}
while ($person = mysql_fetch_array($people)){
echo "<h1>{$person["name"]}</h1>";
echo "<p>{$person["info"]}</p>";
echo "<p>{$person["id"]}</p>";
echo "<P>{$person["img_name"]}</p>"; 
echo "<img src=getimage.php?id=" . urlencode($person["id"]) . ">";
echo "<br /><a href=\"Modify.php?personid=" . urlencode($person["id"]) . "\">Modify          User</a>";
echo " ";
echo "<a href=\"delete.php?personid=" . urlencode($person["id"]) . "\">Delete User</a>"; 
 }

?>

 //change header of image
<?php Include 'includes/connection.php';?>
<?php

$id = addslashes($_GET['id']);

$image = mysql_query("SELECT * FROM people WHERE id = $id");
$image = mysql_fetch_assoc($image);
$image = $image['image'];

header("Content-type: image/jpeg");

echo $image;

?> 
```

# css - css 没有按照我希望的方式在多个浏览器中运行

> ID：14593211
> 
> 赞同：0
> 
> 时间：2013-01-29T22:25:59.327
> 
> 标签：css

（我在一个 jsfiddle 站点中有这个，可以在[这里](http://jsfiddle.net/TechGuyAlabama/aHkKC/)看到。）

以下是 Internet Explorer 中发生的情况：

![在此处输入图像描述](../Images/63e0b10440f3a9b0b8f14ef11c029714.png)

这就是我希望它看起来的样子，具有讽刺意味的是，IE 正在做我想做的事。

当我在 Chrome 或 Firefox 中查看此内容时，会发生以下情况：

![在此处输入图像描述](../Images/a657c3adb79acb6ecdb27d3784263b84.png)

正如你所看到的，它没有从中心分裂。

这是我的剃须刀页面的样子：

```
@using System.Collections
@using SuburbanCustPortal.SuburbanService
@model SuburbanCustPortal.SuburbanService.CustomerData      

@{
    ViewBag.Title = "Account Screen";
 }

<h2>AccountScreen</h2>

<div class="leftdiv">
  <fieldset>
    <legend>Customer Info</legend>
    @Html.Partial("CustomerInfo", Model)
  </fieldset>

  <fieldset>
    <legend>Delivery Address</legend>
    @Html.Partial("DeliveryAddress", Model)
  </fieldset>

  <fieldset>
    <legend>Delivery Info</legend>
    @Html.Partial("DeliveryInfo", Model)
  </fieldset>
</div>

<div class="rightdiv">
  <fieldset> 
    <legend>Balance</legend>
      @Html.Partial("AccountBalance", Model)
  </fieldset>

  <fieldset>
    <legend>Account Options</legend>
    <br/>

     @using (Html.BeginForm("AccountScreenButton", "Customer", FormMethod.Post))
    {
      <div class="sidebysidebuttons">
        <div class="box">
          <button name="options" value="payment">Make a Payment</button>
          &nbsp;
          <button name="options" value="activity">Display Activity</button>
        </div>
      </div>      
    }

  </fieldset>

  <fieldset> 
      <legend>Billing Info</legend>
        @Html.Partial("BillingInfo", Model)
    </fieldset>
</div> 
```

这是在我正在调用的css文件中：

```
.leftdiv {
    float: left;
    width: 49%;
  text-align: left;
  display: inline;
}
.rightdiv {
    float: right;
    width: 49%;
  text-align: left;
    display: inline;
}
.sidebysidebuttons {
 float: left;
 display: block;
  margin-left: 60px;  
text-align:center   
} 
```

任何人都知道我怎样才能让它们看起来一样，或者两者都像 IE 如何显示它们或看到我做错了什么？

===== 根据要求 =====

这是页面加载后的页面源：

```
<!DOCTYPE html>

<html>
<head>
  <title>Your Company Name Here : Account Screen</title>
  <link href="/Content/reset.css" rel="stylesheet" type="text/css" />
    <link href="/Content/Site.css" rel="stylesheet" type="text/css" />
    <link href="/Content/web.css" rel="stylesheet" type="text/css" />
    <script src="/Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>
    <script src="/Scripts/Views/main.js" type="text/javascript"></script>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

    <script>
        $(function () {
            $('.focus :input').focus();
        });
    </script>

</head>
    <body>

        <div class="page">

            <div id="header">
                <div id="headerimg"></div>  
                <div id="logindisplay">
                        Welcome <strong>webtest</strong>!
    [ <a href="/Account/LogOff">Log Off</a> ]

                </div>
                <div id="menucontainer">
                    <ul id="menu">

               <li><a href="http://www.xxxxxx.com">Home</a></li>

                          <li><a href="/Customer/AccountScreen">Account</a></li>
                          <li><a href="/Payment/PrePayment">Make Payment</a></li>
                          <li><a href="/GasOrder/OrderGas">Order Gas</a></li>
                          <li><a href="/Home/ContactUs">Contact Us</a></li>
                          <li><a href="/Account/UpdateAccount">Update Login</a></li>

                          <li><a href="/Home/NewsList">* Sales *</a></li>

                    </ul>
                </div>

                <div id="main">

<h2>AccountScreen</h2>

<div class="leftdiv">
  <fieldset>
    <legend>Customer Info</legend>

<div  class="leftdiv">
  <br/>
  <label class="sizedCustomerlabel">Account Number:</label>            
  <label class="sizedCustomerlabel">Name:</label>
  <label class="sizedCustomerlabel">Mailing Address:</label>
  <label class="sizedCustomerlabel">City:</label>
  <label class="sizedCustomerlabel">St/Zip:</label>
  <label class="sizedCustomerlabel">Phone Number:</label>
</div>

<div class="rightdiv">
  <br/>
  <label class="sizedCustomerDataLeftLabel">01 - 02228&nbsp;</label>
  <label class="sizedCustomerDataLeftLabel">PICKERING VALLEY CONTRAC&nbsp;</label>
  <label class="sizedCustomerDataLeftLabel">960 POTTSTOWN PIKE&nbsp;</label>
  <label class="sizedCustomerDataLeftLabel">CHESTER SPRINGS&nbsp;</label>
  <label class="sizedCustomerDataLeftLabel">PA&nbsp;&nbsp;19425&nbsp;</label>
  <label class="sizedCustomerDataLeftLabel">610&nbsp;458-7200</label>
</div>

  </fieldset>

  <fieldset>
    <legend>Delivery Address</legend>

<div  class="leftdiv">
  <br/>
  <label class="sizedCustomerlabel">Care of:</label>
  <label class="sizedCustomerlabel">Delivery Street:</label>            
  <label class="sizedCustomerlabel">Delivery City:</label>  
</div>

<div class="rightdiv">
  <br/>
  <label class="sizedCustomerDataLeftLabel">&nbsp;</label>
  <label class="sizedCustomerDataLeftLabel">&nbsp;</label>
  <label class="sizedCustomerDataLeftLabel">&nbsp;</label>  
</div>

  </fieldset>

  <fieldset>
    <legend>Delivery Info</legend>

<div  class="leftdiv">
  <br/>
  <label class="sizedCustomerlabel">Last Delivery Date:</label>
  <label class="sizedCustomerlabel">Number of Tanks:</label>            
  <label class="sizedCustomerlabel">Tank Serial#:</label>  
  <label class="sizedCustomerlabel">Tank Size:</label> 
  <label class="sizedCustomerlabel">Tank Type:</label> 
  <label class="sizedCustomerlabel">Qty Last Delivered:</label> 
  <label class="sizedCustomerlabel">Year To Date Deliveries:</label> 
  <label class="sizedCustomerlabel">Year To Date Gas:</label> 
  <label class="sizedCustomerlabel">Total Used Last Year:</label> 
</div>

<div class="rightdiv">
  <br/>
  <label class="sizedCustomerDataLeftLabel">10/16/2012&nbsp;</label>
  <label class="sizedCustomerDataLeftLabel">1&nbsp;</label>
  <label class="sizedCustomerDataLeftLabel">&nbsp;</label>
  <label class="sizedCustomerDataLeftLabel">30&nbsp;</label>

      <label class="sizedCustomerDataLeftLabel"> &nbsp;</label>

  <label class="sizedCustomerDataLeftLabel">15&nbsp;</label>  
  <label class="sizedCustomerDataLeftLabel">4&nbsp;</label>  
  <label class="sizedCustomerDataLeftLabel">70.4&nbsp;</label>  
  <label class="sizedCustomerDataLeftLabel">117.0&nbsp;</label>  
</div>

  </fieldset>
</div>

<div class="rightdiv">
  <fieldset> 
    <legend>Balance</legend>
    <div>

<div class="leftdiv">
  <br/>
  <label class="sizedCustomerlabel">Over 30:</label>
  <label class="sizedCustomerlabel">Over 60:</label>
  <label class="sizedCustomerlabel">Over 90:</label>
  <label class="sizedCustomerlabel">Over 120:</label>
  <label class="sizedCustomerlabel">Current:</label>
  <label class="sizedCustomerlabel">Total:</label>
</div>

<div class="rightdiv">
  <br/>
  <label class="sizedCustomerDataRightlabel">$7.15&nbsp;</label>
  <label class="sizedCustomerDataRightlabel">$90.48&nbsp;</label>
  <label class="sizedCustomerDataRightlabel">$5.50&nbsp;</label>
  <label class="sizedCustomerDataRightlabel">$37.31&nbsp;</label>
  <label class="sizedCustomerDataRightlabel">$7.34&nbsp;</label>
  <label class="sizedCustomerDataRightLabelRed">$147.78&nbsp;</label>
</div>

    </div>    
  </fieldset>

  <fieldset>
    <legend>Account Options</legend>
    <br/>

<form action="/Customer/AccountScreenButton" method="post">      <div class="sidebysidebuttons">
        <div class="box">
          <button name="options" value="payment">Make a Payment</button>
          &nbsp;
          <button name="options" value="activity">Display Activity</button>
        </div>
      </div>      
</form>
  </fieldset>

    <fieldset> 
      <legend>Billing Info</legend>
      <div>

<div class="leftdiv">
  <br/>
  <label class="sizedCustomerlabel">Budget Bal:</label>
  <label class="sizedCustomerlabel">Budget Rate:</label>
  <label class="sizedCustomerlabel">Non-Budget Bal:</label>
  <label class="sizedCustomerlabel">LastPayment Date:</label>
  <label class="sizedCustomerlabel">Last Payment Amount:</label>
  <label class="sizedCustomerlabel">Security Deposit:</label>
  <label class="sizedCustomerlabel">Prev Statment Bal:</label>
</div>

<div class="rightdiv">
  <br/>
  <label class="sizedCustomerDataRightlabel">$0.00&nbsp;</label>
  <label class="sizedCustomerDataRightlabel">$0.00&nbsp;</label>
  <label class="sizedCustomerDataRightlabel">$0.00&nbsp;</label>
  <label class="sizedCustomerDataRightlabel">06/27/2012&nbsp;</label>
  <label class="sizedCustomerDataRightlabel">$59.25&nbsp;</label>
  <label class="sizedCustomerDataRightlabel">$0.00&nbsp;</label>
  <label class="sizedCustomerDataRightlabel">$147.78&nbsp;</label>
</div>

      </div>    
    </fieldset>

</div>

                    <div style="clear: both;"></div>
                </div>
                <div id="footer">
                </div>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:33:56.383

看起来右侧的 html 片段包含在一个额外的 div 中，而左侧的 html 片段则没有。例如，比较交货地址和余额的定义方式。余额包含在一个额外的 Div 中。

因此，从我坐的位置来看，非 IE 浏览器正试图显示 IE 忽略的额外 div。您能否将“right-div”部分中的块定义为与左侧相同？对我来说，看起来更多的是关于右侧组的内容与左侧 div 组的定义方式不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:53:40.560

如果您更改 .rightDiv 以使其与边距一起工作而不是向右浮动会发生什么？

```
.rightDiv {
      position:relative;
      float:left;
      width:49%;
      margin-left:2%;
      text-align:left;
      display:inline;
 } 
```

# asp.net-mvc - Html.RouteLink 404 错误

> ID：14593212
> 
> 赞同：1
> 
> 时间：2013-01-29T22:26:00.613
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

任何人都可以帮助解决这个问题，我有以下路线链接：

```
 @Html.RouteLink(@item.strCountry, "WeatherCity", new {id=Regex.Replace(@item.strCountry, " ","-") }) 
```

在我的 RouteConfig 中，我有：

```
routes.MapRoute(
            name: "WeatherCity",
            url: "Cities-In/{id}",
           defaults: new { controller = "Weather", action = "Cities", id = UrlParameter.Optional }
            ); 
```

在我的控制器中，我有：

```
 public PartialViewResult Cities(string id) 
```

也试过

```
public ActionResult Cities(string id) 
```

但无论我做什么，我都会收到 404 错误。

我尝试了很多例子，最后一个是：

[http://davecowart.wordpress.com/2011/06/08/named-routes-in-asp-net-mvc-3/](http://davecowart.wordpress.com/2011/06/08/named-routes-in-asp-net-mvc-3/)

我是否在这里遗漏了一些简单的东西，因为我无法让它工作，我正在使用 MVC4。

任何帮助，将不胜感激

乔治

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:47:22.310

我想我找到了你的问题（读者参考：问题下的“评论”对话）。

你应该把你`routes.MapRoute()`的东西放在默认路由*之前。*否则，默认路由匹配并运行（并且 MVC 停止进一步查找任何后续路由规则）。*MVC 将您的 URL 与默认路由匹配，但随后在DefaultController*中找不到相应的操作 ( `Cities`) 。

# ankhsvn - AnkhSVN 项目分支/切换错误？

> ID：14593219
> 
> 赞同：0
> 
> 时间：2013-01-29T22:27:09.637
> 
> 标签：ankhsvn

在具有多个项目的 VS 2010 解决方案中，如果我右键单击一个项目并让 Ankh 创建一个项目分支并在创建后选中该框以切换到分支，它会正确创建项目的一个分支，但它会切换*解决方案*到该项目 - 导致它从目录中转储解决方案文件和所有其他项目/文件。

我能够通过创建一个新的空白解决方案、添加 3 个控制台应用程序、将解决方案添加到 svn、在其中一个项目上执行项目分支以及其他所有内容从文件夹中转储来重现这一点。VS 仍然显示解决方案和所有项目/文件，但被标记为缺失。

如果我创建项目分支，不勾选自动切换复选框，我可以手动切换项目（右键项目，颠覆，切换），效果很好。

为什么它从项目分支对话框中进行解决方案切换 - 我做错了什么？或者这是一个错误？

AnkhSVN v2.4.11610.27，Visual Studio 2010 v10.0.40219.1 SP1Rel

编辑：同样发生在 VS 2008 和 VS2012

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:25:02.043

基本上这是 Anksvn 的一个案例，它所做的是为完整的解决方案创建一个分支，并为该分支切换完整的解决方案。

# javascript - 检查下一个元素是否具有特定的类

> ID：14593222
> 
> 赞同：1
> 
> 时间：2013-01-29T22:27:30.683
> 
> 标签：javascript, jquery

html结构：

```
<div class="row">
   <div class="span"></div>
   <div class="span"></div>
   <div class="navMenu">
       <ul>
           <li><a href=#">Link 1</a></li>
           <li><a href=#">Link 1</a></li>
       </ul>
    </div>
</div> 
```

然后我在上面的 html 之后添加一个“新”div：

```
 <div class="row">
      <div class="span"></div>
      <div class="span"></div>
      <div class="navMenu">
        <ul>
           <li><a href=#">Link 1</a></li>
           <li><a href=#">Link 1</a></li>
        </ul>
      </div>
   </div>
   <div class="new"></div>

$(".navMore li a").each(function() {
   $(this).on("click", function() {
            $('<div class="new"></div>').insertAfter($(this).closest('.row'));
            $('<div class="span"></div>').appendTo('.new');
   });
}); 
```

最后，我需要在`.new`包含菜单的 div 之后检查是否存在具有类的 div，如果存在，则在其中添加一个`.span`div，如果`.new`不存在具有类的 div，则创建它，然后插入一个具有类的`.span`div它：

```
$(".navMore li a").each(function() {
   $(this).on("click", function() {
      if($(this).next().hasClass("new")){
          $('<div class="span"></div>').appendTo('.new');
      }
      else {
            $('<div class="new"></div>').insertAfter($(this).closest('.row'));
            $('<div class="span"></div>').appendTo('.new');
      }
   });
}); 
```

重要的是，带有类的新 div`.new`是一个在 div 容器菜单旁边具有这样一个类的 div。原因是因为我会使用许多具有许多不同`.row`div 的菜单，所以我想定位正确的一个。

上面的最终代码不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:38:16.613

foreach 循环是不必要的。您可以直接将单击事件绑定到选择器中的所有项目，而不是遍历集合并单独绑定它们。

我会将点击事件绑定到`.row`div，因为点击事件会冒泡......这将使您的选择器非常容易测试下一个兄弟是否有一个`.new`类。

```
$('.row').click(function() {
   var newDiv = $(this).next();
   if(newDiv.hasClass('new')){
      $('<div class="span"></div>').appendTo(newDiv);
  }
  else {
        newDiv = $('<div class="new"></div>');
        newDiv.insertAfter($(this));
        $('<div class="span"></div>').appendTo(newDiv);
  }
}); 
```

**编辑：**

我选择绑定到 .row 的原因是因为关于事件如何传播到其父级的 DOM 规则的一部分说，如果有人单击 Anchor 标记，那么它将向 DOM 中的父级发送事件。所以这意味着如果我们正在监听一个标签的父级的点击，它看起来好像点击来自那个父级（在这种情况下，一个`.row`div）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T22:34:15.237

您不需要 each 循环 - 您还注意到兄弟姐妹是如何`.new`以及`.row`是兄弟姐妹吗？

```
$(".navMore li a").on("click", function() {
  var $el = $(this);
  var $row = $el.closest('.row'); // <-- get to row first
  if($row.next('.new').length){ // check next element
      $('<div class="span"></div>').appendTo('.new');
  }
  else {
        $('<div class="new"></div>').insertAfter($row);
        $('<div class="span"></div>').appendTo('.new');
  }
}); 
```

你的课程也混在一起了。所以你需要确保它们匹配

```
<div class="navMenu"> <!-- <-- here -->
    <ul>
       <li><a href="#">Link 1</a></li>
       <li><a href="#">Link 1</a></li>
    </ul>
  </div> 
```

和

```
$(".navMore li a") // <-- here 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-29T22:34:22.797

```
$(".navMenu ul li a").on("click", function () {
    if ($(this).closest('.row').next('.new').length) {
        $('<div class="span"></div>').appendTo('.new');
    } else {
        $('<div class="new"><div class="span">This is a span.</div></div>').insertAfter($(this).closest('.row'));
    }
}); 
```

# autosys - 作业的下游依赖项的 Autosys/autorep 列表

> ID：14593224
> 
> 赞同：1
> 
> 时间：2013-01-29T22:27:37.217
> 
> 标签：autosys

我正在寻找一种方法来获取 Autosys 中作业的下游依赖项的递归列表。

例如，如果**jobX1**的条件为`s(jobA)`且**jobX2**的条件相同`s(jobA)`，我希望能够列出 jobA 的下游依赖**项**是**jobX1**和**jobX2**以及它们的递归下游依赖项。

我需要它，因为如果我将**jobA**置于冰上但仍需要运行下游依赖项，我想获得一个强制执行的快速列表。我希望`autorep`有一个选择，但我似乎没有找到一个。

我知道我可以编写一个递归依赖的 Perl 脚本，这很容易做到，但我不想重新发明轮子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T23:06:33.073

使用 job_depends 命令。它有 -c 和 -d 选项来列出作业之前和之后的作业。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:50:44.583

在基于 Oracle 的 4.5 版本的 AutoSys（其中 'autosys' 是架构）上，我使用以下查询来获取递归依赖项列表：

```
select ltrim(sys_connect_by_path(b.job_name,' ==> '),' ==> ') parent_child_grandchild
from autosys.job b
start with (   b.condition LIKE ('%jobA%')
         )             
and b.JOB_TYPE ='b'
connect by b.condition like PRIOR concat(concat('%',b.job_name),'%')
order by parent_child_grandchild; 
```

# mysql - MySQLWorkbench 是否包含 MySQL 服务器？

> ID：14593231
> 
> 赞同：5
> 
> 时间：2013-01-29T22:28:03.100
> 
> 标签：mysql, sql, database, mysql-workbench

我的目标是通过类似于 SQL Server Management Studio 的 GUI 在 MySQL 中创建一些简单的表。为了做到这一点，我找到并安装了 MySQL Workbench。

我正在关注本教程：

[http://dev.mysql.com/doc/workbench/en/wb-getting-started-tutorial-admin.html](http://dev.mysql.com/doc/workbench/en/wb-getting-started-tutorial-admin.html)

但在第 5 步，我收到一条错误消息，提示无法连接到 MySQL 服务器。

在我可以使用 MySQL Workbench 之前，我应该安装其他东西吗？我假设 Workbench 包含我需要的一切......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T22:30:18.610

您需要自己安装 MySQL。您可以单独下载它，也可以使用[WAMPserver](http://www.wampserver.com/en/)之类的工具下载它，这使得安装和配置过程变得非常容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-31T09:47:52.547

您将需要一台服务器。所以你可以转到开始->mysql 文件夹->mysql 安装程序。之后，将打开一个 Mysql 安装程序表单。单击添加。您将看到产品列表。根据您的机器选择服务器（x86 或 x64）并按照提供的说明进行操作。下载后，设置管理员密码。现在您可以在工作台中创建您的实例。如果服务器没有运行，运行 services.msc 并启动 MySQL 服务。

# javascript - Bootstrap弹出插件不起作用

> ID：14593232
> 
> 赞同：0
> 
> 时间：2013-01-29T22:28:21.810
> 
> 标签：javascript, jquery, html, css, twitter-bootstrap

我正在尝试使用[Twitter Bootstrap 弹出框插件](http://twitter.github.com/bootstrap/javascript.html#popovers)`<span>`在单击元素时弹出一个弹出框。

所有文件都包含在页面上，包括`bootstrap-tooltip.js`和`bootstrap-popover.js`. 这是我调用弹出框的 jQuery 代码：

```
$('#supported-hosts').popover({
    'animation': true,
    'html': 'test',
    'trigger': 'click'
}); 
```

但是，当我单击该元素时，什么也没有发生。开发人员控制台或其他任何内容中都没有 Javascript 错误。

我也试过这样做没有效果：

```
$('#supported-hosts').on('click', function() {
    $(this).popover('show');
}); 
```

我对出了什么问题一无所知，因为据我从 Bootstrap 文档中可以看出我正在正确使用它。

编辑：HTML 也只是一个 span 元素：

```
<span id="supported-hosts">Supported filehosts</span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:41:53.677

为了显示一个弹出窗口，您需要指出它的内容应该是什么。

您可以在 html 标记本身上执行此操作：

```
<span id="supported-hosts" data-content="Popover content">Supported filehosts</span> 
```

或者使用 JavaScript：

```
$('#supported-hosts').popover({
    'content': 'Popover content'
    'animation': true,
    'html': 'test',
    'trigger': 'click'
}); 
```

默认情况下，弹出框将使用`title`触发它的元素的属性，因此您也可以根据需要使用它。

# c# - 域名和主机名可以相同吗

> ID：14593233
> 
> 赞同：1
> 
> 时间：2013-01-29T22:28:22.233
> 
> 标签：c#, .net, security, active-directory, windows-authentication

最近我试图找到问题“如何确定当前登录用户是否是域的一部分”的答案

在 Stackoverflow 上，我找到了相当不错的答案，其中涉及使用

```
using System.Security.Principal;
using System.DirectoryServices.AccountManagement; 
```

但我也看到一个简单的解决方案说

```
System.Environment.UserDomainName; - gives name of the current user's domain name.
System.Environment.MachineName;    - gives name of the machine. 
```

如果以上两个不相同，则表示用户是 UserDomainName 返回的域的一部分

[很公平， MSDN](http://msdn.microsoft.com/en-us/library/system.environment.userdomainname.aspx)的这个链接也证实了这一点

现在的问题是如果“域名”和“机器名”相同怎么办？或者是否有可能与域名完全相同名称的机器可以加入域？

如果这是真的，是否有可能通过在这个简单的解决方案中添加一些东西来反检查

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T13:43:23.637

我敢打赌，如果当前登录的用户没有登录到域，他或她就没有专有名称。使用类型(1)的[GetUserNameEx 。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724268%28v=vs.85%29.aspx)`EXTENDED_NAME_FORMAT``NameFullyQualifiedDN`

如果您返回一个值，那么您知道当前用户已登录到域。但是，调用此函数可能会在一段时间内意外阻塞您的程序。您可能希望以异步方式调用此函数，因为它可能会尝试连接到某些 Active Directory 服务并最终失败或超时。

实现此目的的一种更有弹性的方法是查找帐户 SID 并检查是否`EqualPrefixSid`可以将其与机器进行比较。如果是这种情况，那么您知道当前帐户是机器本地的（即不在域中）。这不涉及穿越网络并等待超时，因此它是一种更直接的方法。有趣的是，这也意味着如果机器名称与用户域相同，Windows 将不得不假设您要登录的域是本地机器，因此如果出现以下情况，几乎不可能登录到实际域机器名称确实与域相同。

# node.js - node.js Q 承诺库 - 如何使用适当的参数列表从 ninvoke 回调

> ID：14593242
> 
> 赞同：3
> 
> 时间：2013-01-29T22:29:09.007
> 
> 标签：node.js, promise, q

```
q.ninvoke(myNodeJsFunc).then(function(result) {
    console.log(arguments);
});

function myNodeJsFunc(callback) {
    callback(null, arg1, arg2, ..., argN); // first argument is null as no error occurred
} 
```

如果我只传回去`arg1`，`result`就会`arg1`。如果我传回多个参数，`result`将是一个参数数组。有没有办法让 Q 回调将我的每个参数作为单独的参数应用于函数，而不是捆绑到数组中并作为单个参数传回？我希望能够使用命名参数，而不必筛选任意元素的数组。

实际上，我希望*能够*做到这一点：

```
q.ninvoke(myNodeJsFunc).then(function(arg1, arg2, arg3) {
    // do stuff
    if(arg2) {
        // do stuff
    }
    // etc.
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T22:59:49.283

你可以，你所追求的是`spread`：

```
q.ninvoke(myNodeJsFunc)
  .spread(function(arg1, arg2, arg3) {
    // do stuff
    if(arg2) {
      // do stuff
    }
    // etc.
  }); 
```

这不是默认设置的原因是，promise 背后的部分前提是让它们尽可能地像同步对应物。这样，将来您将能够：

```
spawn(function* () {
  var res = yield q.ninvoke(myNodeJsFunc);
  res[0], res[1]...
}); 
```

看起来`yield`是同步的，除了神奇发生的关键字。

运算符很好，`spread`因为在 JavaScript 的下一个版本中，您将能够编写：

```
spawn(function* () {
  let [arg1, arg2, arg3...] = yield q.ninvoke(myNodeJsFunc);
  arg1, arg2 ...
}); 
```

这很好地平行于同步代码：

```
let [arg1, arg2, arg3...] = mySyncFunc();
arg1, arg2 ... 
```

简而言之，当您需要多个参数时，请替换`then`为`spread`.

# jquery - carouFredSel 在本地工作，但不适用于 MAMP 或实时服务器

> ID：14593250
> 
> 赞同：0
> 
> 时间：2013-01-29T22:29:28.797
> 
> 标签：jquery, carousel, caroufredsel

我在使用 carouFredSel jQUERY 插件时遇到了一些问题。我得到了所有的样式并且在本地很好地工作（没有 MAMP），但是当我将文件移动到我的实时服务器并确保一切都在正确的位置时，它就坏了。

我可以在本地使用相同的文件，并且轮播可以正常工作。我开始认为这与我的代码或我的布局方式有关。我不太精通 Javascript（我可以*使用*jQUERY），所以这对我来说是一种学习过程。任何帮助深表感谢。

这是我的标头代码，我使用的是 HTML 5 Boilerplate。

```
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Site Title</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

    <!-- LOAD JQUERY -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.8.2.min.js"><\/script>')</script>
    <script src="js/plugins.js"></script>
    <script src="js/main.js"></script>

    <!-- GOOGLE WEB FONTS -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,400,700,600,300,800' rel='stylesheet' type='text/css'>

            <!-- CSS -->
    <link rel="stylesheet" href="css/normalize.css" />
    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="css/carousel.css" />

    <!-- MODERNIZER -->
    <script src="js/vendor/modernizr-2.6.2.min.js"></script>

    <!-- JAVASCRIPT -->
    <!-- CAROUSEL & jQUERY UI -->
            <script type="text/javascript" src="js/jquery.ui.core.min.js"></script>
            <script type="text/javascript" src="js/jquery.ui.widget.min.js"></script>

            <!-- CAROUSEL -->
            <script type="text/javascript" language="javascript" src="js/jquery.carouFredSel-6.1.0.js"></script>

            <!-- optional include helper plugins -->
            <script type="text/javascript" language="javascript" src="js/jquery.mousewheel.min.js"></script>
            <script type="text/javascript" language="javascript" src="js/jquery.touchSwipe.min.js"></script>
            <script type="text/javascript" language="javascript" src="js/jquery.ba-throttle-debounce.min.js"></script>

            <script type="text/javascript">
            $(document).ready(function() {
                $('#carousel').carouFredSel({
                    auto: true,
                    prev: '#prev2',
                    next: '#next2',
                    pagination: {
                        container: ".pager",
                        pagination: {anchorBuilder: function(nr) { return '<a href="#"><span>'+'XXX'+nr+'</span></a>'; }}
                    },
                    width: 700,
                    height: 150,
                    align: 'center',
                    scroll: {
                items: 4,
                fx: "scroll",
                easing: "swing",
                duration: 1000,
                pauseOnHover: true
                        },
                });
            });
            </script>

</head> 
```

**编辑：**我的错误，我完全忘记发布我的错误控制台所说的内容。它说如下：

错误：TypeError: $("#carousel").carouFredSel 不是函数。

有任何想法吗？任何帮助深表感谢。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:33:09.873

我已经想通了。我不太确定我做错了什么。这是我将上面的内容替换为：

```
 <!-- JAVASCRIPT -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.8.2.min.js"><\/script>')</script>
    <script src="js/plugins.js"></script>
    <script src="js/main.js"></script>
            <script type="text/javascript" src="js/jquery.ui.core.min.js"></script>
            <script type="text/javascript" src="js/jquery.ui.widget.min.js"></script> 
```

有谁知道为什么会这样？可能是因为 jQUERY 在某处被初始化了两次？

# c# - Cocoa 从 DOMDocument 获取输入数据

> ID：14593253
> 
> 赞同：1
> 
> 时间：2013-01-29T22:30:11.370
> 
> 标签：c#, dom, domdocument, monomac

我正在尝试从加载到 Cocoa WebView 控件中的文档中从 DOM 获取数据，但该元素的值似乎为空。我正在使用 MonoMac。我正在使用的代码（C#）如下：

```
var document = WebBrowser.MainFrameDocument;

if (document != null)
{
    // GetAllChildren is a recursive extension function that iterates through a DomNode's
    // ChildNodes property and returns a list of all of them
    var textareaElements = document.GetAllChildren().OfType<DomHtmlElement>().Where(node => node.Name.Equals("TEXTAREA"));
    foreach (var textarea in textareaElements)
    {
        var value = textarea.Value; // this is always ""
    }
} 
```

我是否需要做一些事情来确保我必须将数据输入到网页中的 DOM 引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:32:58.747

这似乎是 MonoMac 实现中的一个错误：[https ://bugzilla.xamarin.com/show_bug.cgi?id=7754](https://bugzilla.xamarin.com/show_bug.cgi?id=7754)

**更新：**有一个有效的拉取请求可以解决这个问题：[https ://github.com/mono/monomac/pull/109](https://github.com/mono/monomac/pull/109)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T21:40:47.133

我很少需要使用 DOM，但似乎返回的节点是类型`Element`的，并且`nodeValue`只会返回一个`Text`类型的字符串。

从`Element`您可以尝试`TextContent`, 确实返回您提到的错误报告的预期值。

或者您可以访问该`Text`节点（`textarea.FirstChild.Value`在您的情况下），这也应该返回您期望的值。

**更新**

错误报告中的原始测试用例没有显示真正的问题。提供了一个较新的测试用例，现在[可以使用](https://github.com/mono/monomac/commit/7f4a126133b2a2cc2025d92841b194c146fdc561)修复程序（在 github monomac repo 上）。

# javascript - jquery航点，在视口中心而不是顶部时激活？

> ID：14593254
> 
> 赞同：4
> 
> 时间：2013-01-29T22:30:15.473
> 
> 标签：javascript, jquery, scroll, jquery-waypoints

所有文档都讨论了航点何时到达视口**顶部**，但我希望当航点的任何部分位于视口中心时触发。

如果我向下滚动，此代码工作得相当好，但是当我向上滚动时，它显然不起作用。

```
$('.section').waypoint(function(direction) {
    highlight('#' + this.id);
}, {
    context: '#scroll',
    offset: function (direction) {
        return $(this).height();
    }
}); 
```

我尝试了下面的代码和几个变体，它甚至从未命中任何一个 return 语句。

```
$('.section').waypoint(function(direction) {
    highlight('#' + this.id);
}, {
    context: '#scroll',

    offset: function (direction) {
        if (direction == 'down') {
            return -$(this).height();
        } else {
            return 0;
        }
    }
}); 
```

所以现在我正在尝试这个，基于航路点示例，但是 $active.id 不像 this.id 那样工作，所以我的函数“highlight”失败了。

```
$('.section').waypoint(function (direction) {
    var $active = $(this);
    if (direction == 'down') {
        $active = $active.prev();
    }
    if (!$active.length) {
        $active = $(this);
    }
    highlight($active.id);
}, {
    context: '#scroll',
    offset: function (direction) {
        return $(this).height();
    }
}); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-30T00:16:33.293

该`offset`选项不采用方向参数。我很想知道您是否从文档中的某个地方得到了它，因为如果函数中使用`direction`了一个部分`offset`，那就是一个错误。

当元素的顶部到达视口的中间时，您可以使用 % 偏移量来告诉航点触发：

```
offset: '50%' 
```

如果您在向上滚动和向下滚动时需要不同的偏移量，最好通过创建两个不同的航点来实现：

```
var $things = $('.thing');

$things.waypoint(function(direction) {
  if (direction === 'down') {
    // do stuff
  }
}, { offset: '50%' });

$things.waypoint(function(direction) {
  if (direction === 'up') {
    // do stuff
  }
}, {
  offset: function() {
    // This is the calculation that would give you
    // "bottom of element hits middle of window"
    return $.waypoints('viewportHeight') / 2 - $(this).outerHeight();
  }
}); 
```

# php - 贝宝 IPN 开发

> ID：14593256
> 
> 赞同：1
> 
> 时间：2013-01-29T22:30:34.623
> 
> 标签：php, paypal, paypal-ipn

我在我的网站上设置 PayPal IPN 来管理订阅付款方面取得了一定的成功。我目前在 PayPal 中设置付款很好，并且将完成的付款从 PayPal 沙箱发送到我的 IPN 效果很好，并将 MySQL 行设置为 is_paid 为 Yes 而不是 No，这反过来又允许用户登录。

我现在想知道，当用户的订阅付款失败或他们取消（所有那些在现实世界中发生的糟糕和讨厌的事情！）时，IPN 将如何让我知道？我希望 IPN 向管理员发送电子邮件

```
<?php
// tell PHP to log errors to ipn_errors.log in this directory
ini_set('log_errors', true);
ini_set('error_log', dirname(__FILE__).'/ipn_errors.log');

// intantiate the IPN listener
include('ipnlistener.php');
$listener = new IpnListener();

// tell the IPN listener to use the PayPal test sandbox
$listener->use_sandbox = true;

// try to process the IPN POST
try {
    $listener->requirePostMethod();
    $verified = $listener->processIpn();
} catch (Exception $e) {
    error_log($e->getMessage());
    exit(0);
}

// TODO: Handle IPN Response here

if ($verified) {

    $errmsg = '';   // stores errors from fraud checks

    // 1\. Make sure the payment status is "Completed" 
    if ($_POST['payment_status'] != 'Completed') { 
        // simply ignore any IPN that is not completed
        exit(0); 
    }

    // 2\. Make sure seller email matches your primary account email.
    if ($_POST['receiver_email'] != 'EMAILHERE') {
        $errmsg .= "'receiver_email' does not match: ";
        $errmsg .= $_POST['receiver_email']."\n";
    }

    // 3\. Make sure the amount(s) paid match
    if ($_POST['mc_gross'] != '3.99') {
        $errmsg .= "'mc_gross' does not match: ";
        $errmsg .= $_POST['mc_gross']."\n";
    }

    // 4\. Make sure the currency code matches
    if ($_POST['mc_currency'] != 'GBP') {
        $errmsg .= "'mc_currency' does not match: ";
        $errmsg .= $_POST['mc_currency']."\n";
    }

    // 5\. Ensure the transaction is not a duplicate.
    mysql_connect('', '', '') or exit(0);
    mysql_select_db('') or exit(0);

    $txn_id = mysql_real_escape_string($_POST['txn_id']);
    $sql = "SELECT COUNT(*) FROM payments WHERE txn_id = '$txn_id'";
    $r = mysql_query($sql);

    if (!$r) {
        error_log(mysql_error());
        exit(0);
    }

    $exists = mysql_result($r, 0);
    mysql_free_result($r);

    if ($exists) {
        $errmsg .= "'txn_id' has already been processed: ".$_POST['txn_id']."\n";
    }

    if (!empty($errmsg)) {

        // manually investigate errors from the fraud checking
        $body = "IPN failed fraud checks: \n$errmsg\n\n";
        $body .= $listener->getTextReport();
        mail('EMAILHERE', 'PayPal IPN Fraud Warning', $body);

    } else {

    // add this order to a table of completed orders
    $payer_email = mysql_real_escape_string($_POST['payer_email']);
    $mc_gross = mysql_real_escape_string($_POST['mc_gross']);
    $sql = "INSERT INTO payments VALUES 
            (NULL, '$txn_id', '$payer_email', $mc_gross)";

    if (!mysql_query($sql)) {
        error_log(mysql_error());
        exit(0);
    }

    // sends an email to the user to confirm subscription
    $websitepath="http://www.gaymate.co.uk";
    $message='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
        <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
        <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>gaymate.co.uk</title>

        <style type="text/css">

        p {
            font-family: Arial;
            font-size: 12px;
            padding: 0 20px 0 20px; }

        .boldTitle {
            font-size: 13px;
            font-weight: bold; }

        .headerTitle {
            font-size: 16px;
            font-weight: bold; }

        .divider2 {
            padding: 0 20px 0 20px; }

        </style>

        </head>

        <body>
        <table width="500" border="0" cellspacing="0" cellpadding="0">
          <tr>
            <td>
            <a href="http://www.gaymate.co.uk/"><img src="http://www.gaymate.co.uk/images/email-header.jpg"></a>
            <img class="divider2" src="'.$websitepath.'/images/email/email-divider2.gif" alt="email-divider2" width="460" height="4" />
        <p>We have recieved confirmation from PayPal that you have completed payment and we are pleased to tell you that your account will be live on our site as soon as it has been approved by one of the moderators.</br></br>The Admin Team @ GayMate.co.uk</p>
       <img src="'.$websitepath.'/images/email/email-divider.gif" alt="email-divider" width="500" height="10" />
    </td>
  </tr>
</table>
<p>&nbsp;</p>
</body>
</html>
          ';

    $to = filter_var($_POST['payer_email'], FILTER_SANITIZE_EMAIL);
    $subject = "GayMate.co.uk Subscription Set-Up Completed";
    $header = "MIME-Version: 1.0\r\n";
    $header .= "From: EMAILHERE\r\n";
    $header .= "Reply-To: EMAILHERE\r\n";
    $header .= "Content-type: text/html; charset=iso-8859-1\r\n";
    mail($to, $subject, $message, $header);  
    }
    $sql = "UPDATE member SET is_paid='Yes' WHERE email='$to'";

    if (!mysql_query($sql)) {
        error_log(mysql_error());
        exit(0);
    }

} else {
    // manually investigate the invalid IPN
    mail('EMAILHERE', 'Invalid IPN', $listener->getTextReport());
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:50:43.957

您需要检查 的值`$_POST['txn_type']`才能知道通知的内容。

来自 PayPal 的文档：[https ://www.paypal.com/cgi-bin/webscr?cmd=p/acc/ipn-subscriptions-outside](https://www.paypal.com/cgi-bin/webscr?cmd=p/acc/ipn-subscriptions-outside)

`subscr_eot`相信你对和感兴趣`subscr_failed`。

一些可能对您有所帮助的额外信息：

*   `subscr_cancel`用户取消订阅后立即发送。
*   `subscr_eot`订阅到期后发送，他们的付款没有通过。

用户取消订阅后，PayPal 将向您发送`subscr_cancel`，然后`subscr_eot`在下一次付款到期时发送。

您可能还想阅读这个相关问题：[Paypal IPN 订阅](https://stackoverflow.com/questions/1061683/subscriptions-with-paypal-ipn)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T22:53:13.217

将这些添加到您的代码中并将 // 电子邮件代码 // 注释更改为您的电子邮件代码，它将正常工作。

前：

```
if ($_POST['payment_status'] != 'Completed') { 
```

添加：

```
// denied payment
if ($_POST['payment_status'] == 'Denied') { 
// email code
exit(0);
}

// failed subscription payment
if ($_POST['txn_type'] == 'subscr_failed') { 
// email code
exit(0);
}

// canceled subscription
if ($_POST['txn_type'] == 'subscr_cancel') { 
// email code
exit(0);
} 
```

并在评论中创建发送电子邮件的必要条件。

# android - Titanium Android 操作栏主题

> ID：14593270
> 
> 赞同：0
> 
> 时间：2013-01-29T22:31:06.853
> 
> 标签：android, tabs, themes, titanium, titanium-mobile

我使用 SDK 3.0 和下面的 xml，我可以将选项卡更改为 Holo Dark 主题。是否可以更改字体大小，因为我得到的那个给了我一个可滑动的 tabBar？我可以得到粉红色而不是蓝色吗？

```
<android xmlns:android="http://schemas.android.com/apk/res/android">
    <tool-api-level>14</tool-api-level>
    <manifest>
    <application android:theme="@android:style/Theme.Holo"></application>
    </manifest>
</android> 
```

编辑：我试图遵循这个例子：[Android Action Bar 主题](https://stackoverflow.com/questions/14158772/android-action-bar-theme)但我无法让它工作。否则这正是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:43:53.110

我正在使用[ActionBarSherlock](http://actionbarsherlock.com/)来支持所有平台上的操作栏。它提供了巨大的定制造型机会。我将蓝色分隔符更改为绿色分隔符。这是我的xml：

AndroidManifest.xml

```
<application android:theme="@style/Theme.GreenAB"></application> 
```

/res/values/abs_green_style.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<style name="Theme.GreenAB" parent="Theme.Sherlock.ForceOverflow">
    <item name="actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
    <item name="android:actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
</style>

<style name="Widget.MyTheme.ActionBar" parent="Widget.Sherlock.ActionBar">
    <item name="android:background">@drawable/green_style</item>
    <item name="background">@drawable/green_style</item>
</style>
</resources> 
```

/res/drawable/green_style.xml

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- Green Bottom Line -->
    <item>
        <shape android:shape="rectangle">
            <solid android:color="#FF177506" />
        </shape>
    </item>

    <!-- Color of the action bar -->
    <item android:bottom="2dip">
        <shape android:shape="rectangle">
            <solid android:color="#000000" />
        </shape>
    </item>
</layer-list> 
```

如果您不需要所有平台的支持，您甚至可以在没有第三方库的情况下使用它。将父主题 (Theme.Sherlock.ForceOverflow) 替换为 Android 资源，并删除样式部分中的重复项条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:27:37.587

您可以使用[ActionBar 样式生成器](http://jgilfelt.github.com/android-actionbarstylegenerator/)来自定义您的 ActionBar 主题。该工具在“res”文件夹中为您提供所需的所有资源。只需将该文件夹复制到`platform/android`应用程序的根项目目录下即可。

在您的自定义清单中或直接在 tiapp.xml 中，您通过其名称引用该主题：

```
<android xmlns:android="http://schemas.android.com/apk/res/android">
   <manifest>
       <application android:theme="@style/Theme.myCustomActionBarTheme" />
   </manifest>
</android> 
```

这个解决方案对我来说非常有效 - 我希望它有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-25T13:41:17.270

我写了一篇关于如何在 Titanium Mobile 中使用自定义 Holo 主题的博客文章：http: [//blog.rafaelks.com/post/47898772164/how-to-use-custom-holo-theme-in-android-with-titanium](http://blog.rafaelks.com/post/47898772164/how-to-use-custom-holo-theme-in-android-with-titanium) .

它类似于**manumaticx**答案。

# javascript - 找出在元素上触发的事件是什么？

> ID：14593272
> 
> 赞同：1
> 
> 时间：2013-01-29T22:31:12.823
> 
> 标签：javascript, jquery, jquery-ui

我正在使用 jQuery 来管理我的文档上的按键并打开一个新窗口：

```
$(document).keypress(function(event){
    var keycode = (event.keyCode ? event.keyCode : event.which);
    if(keycode == '13') {
        // Open a new window
    }
}); 
```

问题是我有一个 jQuery 手风琴，我想保持关闭状态，直到用户明确点击它。我设法让手风琴在“输入”键时不打开，但是如果另一个窗口在新选项卡中打开并变为活动状态，手风琴就会打开。

问题是我不知道在允许它打开的手风琴上什至被解雇了。

有没有一种方法可以对元素上的所有事件进行核对，然后只需添加回您想要的事件（在我的情况下是鼠标按下或单击）？或者报告该元素正在处理哪些事件，以便我可以尝试取消绑定该元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:40:29.503

在尝试找出哪些事件附加到哪些 dom 元素时，我发现这个 scriptlet 非常有用。我可能会帮你弄清楚发生了什么 -[视觉事件](http://www.sprymedia.co.uk/article/Visual+Event+2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T22:38:55.377

您是否尝试过阅读中的“活动”部分

[http://api.jqueryui.com/accordion/#option-active](http://api.jqueryui.com/accordion/#option-active)？

即设置 active 为 false 将折叠所有面板

# sql - 表之间的 Ruby 条件

> ID：14593273
> 
> 赞同：1
> 
> 时间：2013-01-29T22:31:12.647
> 
> 标签：sql, ruby

我有 2 张桌子：

反馈 : faceid (as int), Poolid (as int), deleted (as boolean)

池：id（作为 int），取消（作为布尔值）

两个表之间没有数据库集成，除了某些行包含相同的值（pool.id 可以等于 feedback.poolid）。

如果我在哪里用 SQL 编写查询，它将类似于：

```
SELECT Pool.* , Feedback.* FROM Pool, Feedback WHERE faceid = params[:faceid] 
and deleted = 'f' and (Pool.id = Feedback.poolid and Pool.cancel = 'f') 
```

实现它的最佳（和参数化）方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T07:28:01.803

我认为以下将起作用：

```
 Pool.find_by_sql("select * from pools,feedbacks where pools.id = feedbacks.pool_id and cancelled = false and deleted = false and faceid = #{params[:faceid]}") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:27:30.687

```
@host = Pool.find_by_sql("SELECT pools.* FROM pools, feedbacks WHERE (pools.id = feedbacks.poolid) AND (pools.cancel = 'f') AND (feedbacks.deleted = 'f') AND (feedbacks.faceid = #{params[:faceid]})") 
```

谢谢你们

# jsf - JSF 以编程方式导航到不同的视图

> ID：14593274
> 
> 赞同：0
> 
> 时间：2013-01-29T22:31:17.427
> 
> 标签：jsf, facelets

我的应用程序具有保存和检索功能。我有保存/检索工作，因为对象被保存到数据库并正确检索。但是，在我的检索登录页面中，根据保存的应用程序的状态，我要么想与用户验证一些细节，要么静默导航到最后访问的视图。后者是我遇到麻烦的地方。

我们正在使用 spring bean，在我的 SaveAndRetrieve 页面 bean 中我有：

```
 @PostConstruct
    public void initialise() {
        caseNotFound = false;
        caseReference = saveAndRetrieveActionHandler.getRequestedCaseReference();
        LOGGER.debug("Retrieve initialise. Case ref is {}", caseReference);
        if (caseReference != null) {

            try {
                saveAndRetrieveActionHandler.retrieveApplicationByCaseRef();
                LOGGER.debug("Retrieve initialise - case found");

                final NavigationOutcome outcome = saveAndRetrieveActionHandler.getLastAccessedView();
                if (outcome.getApplicationState() == ApplicationState.QUOTE) {
                    LOGGER.info("Quote retrieved, navigating to view");
                    // HERE IS WHERE THE TROUBLE LIES! THIS DOESNT WORK
                    FacesUtils.setNextViewNavigation(outcome.getViewId());
                }
            } catch (final FrameworkException fe) {
                LOGGER.debug("Exception caught {}", fe);
                caseNotFound = true;
            }
        }
    } 
```

结果是一个枚举，其中包含我需要导航到的视图和应用程序状态（另一个枚举）。如果 applicationState 是引用，我想静默导航。对于所有其他应用程序状态，我想挑战用户来验证它们。

我的 facesUtils 方法是：

```
public static void setNextViewNavigation(final String p_lastAccessedViewId) {
    if (p_lastAccessedViewId != null) {
        getCurrentViewRoot().setViewId(p_lastAccessedViewId);
    }
} 
```

我也试过调用这个方法

```
public static void navigateToOutcome(final String p_outcome) {
    final FacesContext context = getFacesContext();
    final NavigationHandler navigationHandler = context.getApplication().getNavigationHandler();
    navigationHandler.handleNavigation(context, null, p_outcome);
} 
```

尽管我很努力，但我看到了登陆页面，我想静默导航到保存的页面

基本上我想中止当前的生命周期并将viewroot重置为保存的视图。（注意我没有保存组件树本身，只是我的业务对象）

还有一条信息，这是 jsf1.2，但带有 facelets。我不能使用任何 jsf2 特定功能，也不能使用任何第三方 JSF 扩展。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T09:34:23.490

We solved this by using a ui:include tag with the src attribute being a jsf method that determines the name of the page to navigate to.

# excel - 为什么运行 SSIS 的 SQL 作业无法将 Excel 文件移动到 SharePoint 文件夹？

> ID：14593275
> 
> 赞同：1
> 
> 时间：2013-01-29T22:31:31.550
> 
> 标签：excel, ssis, jobs

我在 SQL Server 2008 R2 中创建了一个多步骤 SSIS 包，该包在集成服务中的 DTS 包下启动时运行良好，但在涉及将 Excel 文件复制到 SharePoint 文件夹的步骤中调用 SQL Server 代理作业时失败在服务器上创建。在包中，Run64bitRuntime 设置为 False，当在作业的一个步骤中调用包时，在执行选项下选中“使用 32 位运行时”。这适用于从位于其他 SharePoint 文件夹中的 Excel 文件中读取信息的其他 SSIS 包。这里的独特之处在于我现在正尝试将在服务器上创建的 Excel 文件复制到 SharePoint 文件夹。如果不是因为 Excel 文件的格式和内容不统一，我会改用 SSRS。

这是我选择 SQL Server 代理作业的“查看历史记录”时返回的错误消息。

> 日期 2013 年 1 月 29 日下午 3:13:47 记录作业历史记录（数据拉取）
> 
> 步骤 ID 1 服务器 xxxx-xxx-xx 作业名称 数据拉取步骤名称 运行 xxxx_Extractxxx 持续时间 00:16:13 Sql Severity 0 Sql Message ID 0 Operator Emailed Operator Net sent Operator Paged Retries Attempted 0
> 
> 信息
> 
> 以用户身份执行：CABLE!svcnvdeautomation。适用于 32 位的 Microsoft (R) SQL Server 执行包实用程序版本 10.50.1600.1 版权所有 (C) Microsoft Corporation 2010。保留所有权利。
> 开始时间：下午 3:13:47 错误：2013-01-29 15:30:00.01 代码：0x00000001 源：创建 Excel 文件 描述：System.Reflection.TargetInvocationException：调用目标已引发异常。---> System.Runtime.InteropServices.COMException (0x800A03EC)：来自 HRESULT 的异常：Microsoft.Office.Interop.Excel.WorkbookClass.SaveAs 的 0x800A03EC（对象文件名，对象文件格式，对象密码，对象 WriteResPassword，对象 ReadOnlyRecommended，对象 CreateBackup , XlSaveAsAccessMode AccessMode, Object ConflictResolution, Object AddToMru, Object TextCodepage, Object TextVisualLayout, Object Local) at ST_87e8d62a054b4e16b60297154afc19d8.csproj.ScriptMain.Main() --- 内部异常堆栈跟踪结束 --- 在 System.RuntimeMethodHandle._InvokeMethodFast(Object target ,
> 在 System.RuntimeType.InvokeMember（字符串名称，BindingFlags bindingFlags，Binder binder，Object target，Object[] providedArgs，ParameterModifier[] 修饰符，CultureInfo 文化，String[] namedParams）在 System.Type.InvokeMember（String name，BindingFlags invokeAttr， Microsoft.SqlServer.Dts.Tasks.ScriptTask.VSTATaskScriptingEngine.ExecuteScript() 处的 Binder binder、Object 目标、Object[] args、CultureInfoculture) End Error DTExec：包执行返回 DTSER_FAILURE (1)。开始时间：下午 3:13:47 结束时间：下午 3:30:00 经过时间：972.573 秒。包执行失败。步骤失败。

如果有帮助，下面列出的是用于复制 Excel 文件的代码。

```
public void Main()
{

    SharePointListsService.Lists listService = new SharePointListsService.Lists();
    listService.Credentials = System.Net.CredentialCache.DefaultCredentials;

    // Create variable with format of "2012-11-28"
    string DateTimeNow = DateTime.Now.ToString("yyyy") + "-" + DateTime.Now.ToString("MM") + "-" + DateTime.Now.ToString("dd");

    // Check out the file as defined in SharePoint.
    string fileCheckout = "http://xx.yy.com/Shared%20Documents/Task%20Compliance%20Report.xls";
    bool myResults = listService.CheckOutFile(fileCheckout, "true", DateTime.Now.ToString("f"));

    // Full file name including path and extension
    // "D:\Work area\Reports\Project.xls"
    string FullFileName = Dts.Variables["User::ReportsExcelFileName"].Value.ToString();

    // File Name without path and extension
    // "Project"
    string FileName = GetFileNameWithoutExtFromPath(FullFileName);

    // Path only
    // "D:\Work area\Reports\"
    string Path = GetDirFromPath(FullFileName);

    // From the source file (FullFileName) assemble the [Path] and [Filename] of new file copy that includes a specific date format attached to new file name.
    // "D:\Work area\Reports\Project 2012-11-28.xls"
    File.Copy(FullFileName, (Path + "\\" + FileName + " " + DateTimeNow + ".xls"), true);

    // Get UNC Folder path
    // "\\xx.yy.com\Shared Documents\Data Pulls"        string UNCFolder = Dts.Variables["UNCFolder"].Value.ToString();

    // Get File name as it appears in the Reports folder
    string ReportsExcelFile = FullFileName;

    // Copy the Excel file from the Reports directory to the SharePoint UNC folder location
    File.Copy(ReportsExcelFile, (UNCFolder + "\\" + FileName + ".xls"), true);

    //Check in
    //string fileCheckin = Dts.Variables["User::URLFolder"].Value.ToString();
    string fileCheckin = "http://xx.yy.com/Shared%20Documents/Task%20Compliance%20Report.xls";
    myResults = listService.CheckInFile(fileCheckin, "Completed revision.", "0");

    Dts.TaskResult = (int)ScriptResults.Success;
}

       public String GetFileNameWithoutExtFromPath(String path)
        {
            try
            {
                String filename = path.Substring(path.LastIndexOf("\\") + 1);
                int pos = filename.LastIndexOf(".");

                if (pos != -1)
                    return filename.Substring(0, pos);
                else
                    return filename;
            }

            catch (Exception)
            {
                // error  
                return "";
            }
        }

        public String GetDirFromPath(String path)
        {
            try
            {
                return path.Substring(0, path.LastIndexOf("\\") + 1);
            }
            catch (Exception)
            {
                // error
                return "";
            }
        } 
```

在 SQL Server 配置管理器下，我已将 SQL Server 代理设置为应用具有网络访问权限的登录，其他作业正在调用其他 SSIS 包成功应用该登录。此外，在服务器上的 Componet 服务下，我转到了我的电脑，右键单击并选择属性，这会打开带有六个选项卡的我的电脑属性框。我选择了 COM 安全选项卡并编辑了访问权限以及启动和激活权限的编辑限制。在每个我添加了网络服务。对于访问权限，我检查了允许本地访问，对于启动和激活权限，我选择了本地启动和本地激活。

鉴于上述详细信息，有人可以帮助我确定为什么 SSIS 包在 SQL Server 代理下运行时复制 Excel 文件的步骤继续失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:08:44.053

我假设 SQL 作业正在运行 SSIS 包`SQL Server Agent Service Account`，它可能没有正确的权限将文件从一个文件夹位置复制/移动到另一个文件夹位置。您需要设置一个使用域帐户（最好）凭据的代理帐户。域帐户应具有在文件夹之间复制/移动文件的正确权限级别。

下面的 SO 问题中的答案将逐步介绍如何配置代理帐户。它还解释了如何使用代理帐户在 SQL 作业中执行 SSIS 包。

[如何在我的 SQL Server 代理作业中创建一个将运行我的 SSIS 包的步骤？](https://stackoverflow.com/questions/6712811/how-do-i-create-a-step-in-my-sql-server-agent-job-which-will-run-my-ssis-package)

至少，当我在文件夹之间移动文件时遇到类似问题时，我就是这样做的。

希望能指导您找到解决问题的方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-06T12:28:45.993

添加`C:\Windows\SysWOW64\config\systemprofile\Desktop`文件夹对我有用。

# jquery - 在 div 悬停时，从左到右为悬停的 div 设置动画，并从左到右为隐藏在屏幕外的新 div 设置动画

> ID：14593276
> 
> 赞同：0
> 
> 时间：2013-01-29T22:32:10.213
> 
> 标签：jquery, css, html, css-transitions

如何使用 Jquery 或 CSS3 将悬停的 div（鼠标悬停）动画到屏幕左侧并在另一个下显示新的 div，这是问题的图片链接：http: [//i48.tinypic.com /f12z6.jpg](http://i48.tinypic.com/f12z6.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:35:56.377

您可以使用 CSS3 的 Transform 属性来做到这一点：

[http://www.w3schools.com/cssref/css3_pr_transform.asp](http://www.w3schools.com/cssref/css3_pr_transform.asp)

您要做的是“翻译” div。我可能会使用 jQuery 来添加转换类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T22:49:18.690

使用 CSS 3[过渡](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_transitions)：

```
/* out of view on hover */
.container:hover .hoverMe{
  margin-left: -200px;           
}

/* bring other DIVS inside view when mouse is over container */
.container:hover ~ .slidingOne{
  margin-left: 0;                
}

.hoverMe, .slidingOne{  
  transition: margin 1s;       
}

.slidingOne{
  margin-left: -200px;        
} 
```

假设标记如下所示：

```
<div class="container">
  <div class="hoverMe"> 
    ...
  </div>
</div>    

<div class="slidingOne">
  ...
</div>

<div class="slidingOne">
  ...
</div> 
```

[演示](http://jsfiddle.net/DXTmc/)

# node.js - node.js 应用程序 - 在 appfog 中集成 mongodb

> ID：14593278
> 
> 赞同：1
> 
> 时间：2013-01-29T22:32:23.650
> 
> 标签：node.js, mongodb, appfog

我开始使用 appfog 服务来托管节点应用程序。我在我的应用程序中尝试使用 mongodb 时遇到了麻烦。在您的教程中：[https](https://docs.appfog.com/services/mongodb#walkthrough) ://docs.appfog.com/services/mongodb#walkthrough它是为连接 mongodb 而编写的，如下所示：

```
require('mongodb').connect(mongourl, ... 
```

而 mogourl 是`generate_mongo_url`函数生成的 url。问题是我使用的是较新的 api（我认为），我无法将 url 传递给 open 方法。这就是我使用 mongodb 的方式：

```
var mongoClient = new MongoClient(new Server('localhost', 27017));
mongoClient.open(function(err, mongoClient) { ... 
```

我在哪里以及如何使用生成的 mongourl？如何传递在 generate_mongo_url 函数中使用的凭据和 mongo 变量？

**更新**
根据@mjhm 的建议，这是我的开放函数：

```
var mongoService = null;
if(process.env.VCAP_SERVICES){
    var env = JSON.parse(process.env.VCAP_SERVICES);
    mongoService = env["mongodb-1.8"][0]["credentials"];
} else {
    mongoService = {
        "hostname": "localhost",
        "port": 27017,
        "isLocal": true,
        "username": "",
        "password": "",
        "name": ""
    };
}

this.mongoClient.open(function(err, mongoClient) {
    if (!err) {
        console.log("Open DB Success");
        var db = mongoClient.db(DB_NAME);

        if (!mongoService.isLocal) {
            db.authenticate(mongoService.username,
                mongoService.password, function (err, result) {
                    if (!err) {
                        console.log("Authenticate DB Success");
                        doAction();
                    } else {
                        console.log("Authenticate DB Error: " + err);
                    }
            });
        } else {
            doAction();
        }
    } else {
        console.log("Open DB Error: " + err);
    }
}); 
```

当我在 appfog 上运行此代码时，我等待了很多时间（超过 20 秒），然后我得到：

```
$ curl myappname.eu01.aws.af.cm/list
curl: (52) Empty reply from server 
```

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:34:08.673

您正在寻找的是 MongoClient.connect 功能

[http://mongodb.github.com/node-mongodb-native/driver-articles/mongoclient.html#mongoclient-connect](http://mongodb.github.com/node-mongodb-native/driver-articles/mongoclient.html#mongoclient-connect)

它需要您正在谈论的网址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:37:35.913

您需要在打开数据库后进行[身份验证。](http://mongodb.github.com/node-mongodb-native/api-generated/db.html#authenticate)考虑它的方式是针对数据库而不是连接进行身份验证，因此您发现该`generate_mongo_url`功能不是很有用。

例如：

```
var mongoClient = new MongoClient(new Server('localhost', 27017));

mongoClient.open(function(err, mongoClient) {
    var db = mongoClient.db('test');
    db.authenticate('me', 'mypwd', function (err, result) {
        var coll = db.collection('query_example3');
        coll.find().toArray(function(err, result) {
            console.log(result);
            process.exit(0);
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T22:36:39.553

您的客户端/驱动程序想要连接的 URL 是“localhost”。我用变量*mongoUrl替换它*

```
var mongoClient = new MongoClient(new Server(mongoUrl, 27017)); 
```

# jquery - jqgrid不显示

> ID：14593281
> 
> 赞同：0
> 
> 时间：2013-01-29T22:32:41.720
> 
> 标签：jquery, jqgrid

我的 jqgrid 根本没有显示。我是新来的，所以任何解释都值得赞赏我的页面在下面，据我所知，我有所有必要的文件等，但在 Chrome 中没有一个是 404ed。我应该补充一点，我正在使用带有 Spring 的 Eclipse。我在 Chrome 中看到的错误遵循底部的页面信息。它们似乎只是几个语法错误，但我有一种欺骗性的感觉。

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ page session="false" %>
<html>
<head>
    <link rel="stylesheet" type="text/css" media="screen" href="resources/jqgrid/css/smoothness/ui-lightness/jquery-ui-1.10.0.custom.css" />
<link rel="stylesheet" type="text/css" media="screen" href="resources/jqgrid/css/ui.jqgrid.css" />

<script type="text/javascript" src="resources/jqgrid/js/jquery/jquery-1.4.2.min.js"></script>
<!--  
<script type="text/javascript">
    var $jq = jQuery.noConflict();
</script>
-->
<script type="text/javascript" src="resources/js/jquery/jquery-ui-1.8.6.custom.min.js"></script> 
<script type="text/javascript" src="resources/jqgrid/js/grid.locale-en.js" ></script>
<script type="text/javascript" src="resources/jqgrid/js/jquery.jqGrid.min.js"></script>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

 <script type="text/javascript">
$(function() {
    $("#grid").jqGrid({
        url:'/listgrid',
        datatype: 'json',
        mtype: 'GET',
        colNames:['Title', 'Description', 'Release Year'],
        colModel:[
            {name:'title',index:'title', width:55,editable:false,editoptions:{readonly:true,size:10},hidden:true},
            {name:'description',index:'description', width:100,editable:true, editrules:{required:true}, editoptions:{size:10}},
            {name:'release_year',index:'release_year', width:100,editable:true, editrules:{required:true}, editoptions:{size:10}}
        ],
        postData: { 
        },
        rowNum:20,
        rowList:[20,40,60],
        height: 200,
        autowidth: true,
        rownumbers: true,
        pager: '#pager',
        sortname: 'title',
        viewrecords: true,
        sortorder: "asc",
        caption:"Movies",
        emptyrecords: "Empty records",
        loadonce: false,
        loadComplete: function() {
        },
        jsonReader : {
            root: "rows",
            page: "page",
            total: "total",
            records: "records",
            repeatitems: false,
            cell: "cell",
            id: "id"
        }
    });

});
  </script>

<title>Home</title>
   </head>
   <body>

<h1>
Hello  world!  
</h1>

<P>  The time on the server is ${serverTime}. </P>

<p>JqGrid - Spring 3 MVC Integration Tutorial</p>
<div id="jqgrid">
<table id="grid"></table>
<div id="pager"></div>
</div>
</body>
</html> 
```

我看到的错误是：

```
Resource interpreted as Script but transferred with MIME type text/html:
"http://localhost:8080/movies/resources/jqgrid/js/jquery.jqGrid.min.js". localhost:8
Resource interpreted as Stylesheet but transferred with MIME type text/html:
"http://localhost:8080/movies/resources/jqgrid/css/ui.jqgrid.css". localhost:6
Resource interpreted as Stylesheet but transferred with MIME type text/html:
"http://localhost:8080/movies/resources/jqgrid/css/smoothness/ui-lightness/jquery-ui-1.10.0.custom.css". localhost:5
Resource interpreted as Script but transferred with MIME type text/html: "http://localhost:8080/movies/resources/jqgrid/js/jquery/jquery-1.4.2.min.js". localhost:8
 Uncaught SyntaxError: Unexpected token < :8080/movies/resources/jqgrid/js/jquery/jquery-1.4.2.min.js:3
  Resource interpreted as Script but transferred with MIME type text/html: "http://localhost:8080/movies/resources/js/jquery/jquery-ui-1.8.6.custom.min.js". localhost:8 Uncaught SyntaxError: Unexpected token < :8080/movies/resources/js/jquery/jquery-ui-1.8.6.custom.min.js:3
  Resource interpreted as Script but transferred with MIME type text/html: "http://localhost:8080/movies/resources/jqgrid/js/grid.locale-en.js". localhost:8
   Uncaught SyntaxError: Unexpected token < :8080/movies/resources/jqgrid/js/grid.locale-en.js:3
  Uncaught SyntaxError: Unexpected token < jquery.jqGrid.min.js:3
  Uncaught ReferenceError: $ is not defined localhost:21 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:16:59.643

我自己不使用 Eclipse 或 Spring。所以我帮不了你太多。不过，您可以在您发布的代码中看到一些问题。例如，您使用类似的结构

```
<link ... /> 
```

和

```
<!-- ... --> 
```

为什么您认为您的代码应该被解释为 XHTML？[在quirks mode](http://en.wikipedia.org/wiki/Quirks_mode)强制代码被解释为 XHTML 而不是 HTML**之前**，您必须包含额外的[!DOCTYPE](http://www.w3schools.com/tags/tag_doctype.asp) 。例如，您可以包括 **`<html>`**

 **```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" 
          "http://www.w3.org/TR/html4/strict.dtd"> 
```

之后，我建议您始终将 JavaScript 代码放在`//<![CDATA[` 和之间`//]]>`：

```
<script type="text/javascript">
//<![CDATA[
$(function() {
....
//]]>
</script> 
```

在这种情况下，您将确信您可以在您的 XHTML 页面中包含*任何JavaScript 代码。*

此外，在不同版本的 jQuery UI 之间使用混合是非常糟糕的。您`jquery-ui-1.10.0.custom.css`与`jquery-ui-1.8.6.custom.min.js`. 此外，您使用的*是非常旧*版本的 jQuery ( `jquery-1.4.2.min.js`)。您应该准确阅读将支持哪个版本的 jQuery UI。例如 jQuery UI 1.10.0 和 jQuery UI 1.9.2 支持 jQuery 1.6 及更高版本。如果你真的需要使用旧的 1.4.2 版本的 jQuery，你必须使用 jQuery UI 1.8.x。在这种情况下，我建议您使用[jQuery UI 1.8.24](http://blog.jqueryui.com/2012/09/jquery-ui-1-8-24/)。

我自己不使用 Eclipse 或 Spring。因此，对于设置错误的 MIME 类型 text/html 的问题，我无法为您提供更多帮助。您应该更仔细地比较您正确工作的代码与当前存在问题的代码。或者，您应该在 stackoverflow 上提出新问题，但使用另一个标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T22:39:01.510

你有一个语法错误，通常这会阻止其他脚本按预期运行，修复错误&你可能会有更多的运气。**

# xml - 如何在 XML Schema 1.1 中使用替代方案

> ID：14593284
> 
> 赞同：2
> 
> 时间：2013-01-29T22:32:54.047
> 
> 标签：xml, schema, xsd

从我读过的所有内容来看，我在下面定义的模式应该可以工作（强调替代方案）。我收到以下错误：此上下文不支持“ [http://www.w3.org/2001/XMLSchema:alternative ”元素。](http://www.w3.org/2001/XMLSchema:alternative)

你能指出我做错了什么吗？

这是我当前的架构：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema targetNamespace="http://tempuri.org/XMLSchema.xsd" 
           elementFormDefault="qualified" 
           xmlns="http://tempuri.org/XMLSchema.xsd" 
           xmlns:mstns="http://tempuri.org/XMLSchema.xsd" 
           xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:element name="object">
    <xs:complexType>
      <xs:choice maxOccurs="unbounded" minOccurs="0">
        <xs:element name="property" type="xs:string">
          <xs:alternative test="@name='VIN'" type="VinType"/>
          <xs:alternative test="@name='Year'" type="YearType"/>
          <xs:alternative test="@name='Make'" type="MakeType"/>
        </xs:element>
      </xs:choice>
      <xs:attribute name="type" type="xs:string" use="required" />
    </xs:complexType>
  </xs:element>

  <!-- Vehicle Identification number (VIN) -->
  <xs:simpleType name="VinRestriction">
    <xs:restriction base="xs:string">
      <xs:length fixed="true" value="17"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:complexType name="VinType" mixed="true">
    <xs:simpleContent>
      <xs:extension base="VinRestriction">
        <xs:attribute name="name" use="required">
          <xs:simpleType>
            <xs:restriction base="xs:string">
              <xs:pattern value="VIN" />
            </xs:restriction>
          </xs:simpleType>
        </xs:attribute>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>

  <!-- Vehicle Year -->
  <xs:simpleType name="YearRestriction">
    <xs:restriction base="xs:gYear"/>
  </xs:simpleType>

  <xs:complexType name="YearType" mixed="true">
    <xs:simpleContent>
      <xs:extension base="YearRestriction">
        <xs:attribute name="name" use="required">
          <xs:simpleType>
            <xs:restriction base="xs:string">
              <xs:pattern value="Year" />
            </xs:restriction>
          </xs:simpleType>
        </xs:attribute>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>

  <!-- Vehicle Make -->
  <xs:simpleType name="MakeRestriction">
    <xs:restriction base="xs:string">
      <xs:enumeration value="Chevrolet"/>
      <xs:enumeration value="Ford"/>
      <xs:enumeration value="Mazda"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:complexType name="MakeType" mixed="true">
    <xs:simpleContent>
      <xs:extension base="MakeRestriction">
        <xs:attribute name="name" use="required">
          <xs:simpleType>
            <xs:restriction base="xs:string">
              <xs:pattern value="Make" />
            </xs:restriction>
          </xs:simpleType>
        </xs:attribute>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:56:13.950

正如 Michael Kay 已经指出的那样，您的错误消息最可能的原因是您的未识别 XSD 处理器不支持 XSD 1.1。

但是还有其他一些问题会导致任何符合 XSD 1.1 的处理器出现问题。

*   XSD 1.1 处理器将拒绝`mixed="true"`任何具有简单内容的复杂类型的属性值规范。（1.0 处理器可能会发出警告，但 1.0 表示只是忽略它。）

*   元素声明中的第二个替代方案`property`将类型分配给`YearType`元素，但`YearType`不是从`xs:string`的声明类型派生的`property`，因此作为替代类型是不合法的。由于您的两个替代方案是派生自`xs:string`一个，一个是从派生的`xs:gYear`，因此您需要指定比`xs:string`声明的类型更通用的东西`property`。任何一个`xs:anyType`，`xs:anySimpleType`或`xs:anyAtomicType`应该做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T08:32:31.307

您很可能正在使用不支持 XSD 1.1 的模式处理器。

# javascript - 加载更多功能启动后脚本停止工作

> ID：14593289
> 
> 赞同：0
> 
> 时间：2013-01-29T22:33:30.330
> 
> 标签：javascript, wordpress

我正在开发一个 wordpress 网站[http://taste.fourseasons.com/ingredients/](http://taste.fourseasons.com/ingredients/)

在主要内容部分的底部，有一个调用更多帖子的选项，但是一旦调用它们，允许用户对其进行投票的脚本就不会在新帖子上启用。如果点击投票按钮，用户将被带到页面顶部，就好像它有一个 <"a href="#">

我假设投票脚本在加载时启动，但没有触发在加载原始文档后加载的帖子上的投票按钮？

有什么想法吗？

谢谢！

好的，这就是我认为的相关代码。我试图建立一个 jsfiddle，但我认为这一切仍然在我的脑海中。根据我收集到的信息，我需要创建一个回调函数，以便在将新帖子添加到 DOM 后，重新加载原始投票脚本。希望这是有道理的，并感谢您花时间与有抱负的编剧一起！

从function.php：

```
add_action("wp_ajax_add_votes_options", "add_votes_options");
add_action("wp_ajax_nopriv_add_votes_options", "add_votes_options");
function add_votes_options() {
$postid = $_POST['postid'];
$ip = $_POST['ip'];

if (!wp_verify_nonce($_POST['nonce'], 'voting_nonce_'.$postid))
    return;

$voter_ips = get_post_meta($postid, "voter_ips", true);
if(!empty($voter_ips) && in_array($ip, $voter_ips)) {
    echo "null";
    die(0);
} else {
    $voter_ips[] = $ip;
    update_post_meta($postid, "voter_ips", $voter_ips);
}   

$current_votes = get_post_meta($postid, "votes", true);
$new_votes = intval($current_votes) + 1;
update_post_meta($postid, "votes", $new_votes);
$return = $new_votes>1 ? $new_votes : $new_votes;
echo $return;
die(0);
} 
```

以下是它被拉入页面的方式：

```
<div class="grid_row_1">
<div class="grid_col">
    <?php if (have_posts()) : while (have_posts()) : the_post(); ?>
        <?php the_content(); ?>
    <?php endwhile; ?>
    <?php endif; ?>
</div>      
<div class="clear"></div>   
</div>

<div class="grid_row_1">
<div class="grid_col ingredients post-holder" data-direction="DESC" data-    
order="date">       
    <?php $count = 0; ?>
    <?php if (have_posts()) : ?>
    <?php query_posts('posts_per_page=15&post_type=ingredient&paged='.$paged);  
while ( have_posts() ) : the_post(); ?>
    <?php 
    foreach($ingredient_images as $meta_box) { 
    $data = get_post_meta($post->ID, 'ingredient-images', true); 
    switch($meta_box['name']){
        case 'ingredient_thumb': $feature_thumb = $data[ $meta_box[ 'name' ] 
]; break;
        case 'ingredient_status': $feature_thumb_show = $data[ $meta_box[ 
'name' ] ]; break;
        }               
    } 
    switch($feature_thumb_show){
        case 1: $type='suggested'; break;
        case 2: $type='accepted'; break;
        case 3: $type='featured'; break;
    }
    $theDate= get_the_date( 'o-n-j' );
    $time = strtotime($theDate);
    $one_week_ago = strtotime('-1 week');
    switch($count){
        case 0: echo '<div class="post one-quarter-sub-col-above-480 one-half-sub-col-at-480 first '.$type.'">';       $count++; break;
        case 1: echo '<div class="post one-quarter-sub-col-above-480 one-half-sub-col-at-480 last-at-480 '.$type.'">';  $count++; break;
        case 2: echo '<div class="post one-quarter-sub-col-above-480 one-half-sub-col-at-480 first-at-480 '.$type.'">'; $count++; break;
        case 3: echo '<div class="post one-quarter-sub-col-above-480 one-half-sub-col-at-480 last '.$type.'">';            $count = 0; break;
    }

    $votes = get_post_meta($post->ID, "votes", true);
    $votes = !empty($votes) ? $votes : "0";

    $hasvoted = $_COOKIE['better_votes_'.$post->ID];
    $hasvoted = explode(",", $hasvoted);

    if(in_array($post->ID, $hasvoted)) {
        $vtext = "VOTED";
        $class = 'unvote-sm';
    } else {
        $ip = $_SERVER['REMOTE_ADDR'];
        $voter_ips = get_post_meta($post->ID, "voter_ips", true);
        if(!empty($voter_ips) && in_array($ip, $voter_ips)) {
            $vtext = "VOTED";
            $class = 'unvote-sm';
        } else {
            $vtext = "VOTE";
            $class = 'vote-sm';
        }
    }
    ?>
    <?php if(function_exists('wp_nonce_field')) wp_nonce_field('voting_nonce_'.$post->ID.'', 'voting_nonce_'.$post->ID.''); ?>
        <div class="bg-white pad-lr10 pad-t10 border-lightgrey margin-b10">
            <div class="photo-wrapper ratio-16-9 text-white">
                <?php if($feature_thumb_show!=3): ?>
                <a href="<?php the_permalink() ?>" title="<?php the_title(); ?>"><img src="<?php bloginfo('template_directory'); ?>/images/blank_landscape.gif"></a>
                <div class="image-overlay full-width full-height align-center bg-lightblue">
                    <table class="layout-vert-center full-width full-height">
                        <tr><td><a class="header font-30 tk3 leading-tight" href="<?php the_permalink() ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a></td></tr>
                    </table>
                </div>
                <?php else: ?>
                <a href="<?php the_permalink() ?>" title="<?php the_title(); ?>"><img src="<?php bloginfo('template_directory'); ?>/includes/timthumb.php?src=<?php echo $feature_thumb; ?>&amp;w=220&amp;h=130&amp;a=t"></a>
                <div class="image-overlay bottom bg-black bg-opaque-50 pad-5">
                    <a class="header font-30 tk3 leading-tight" href="<?php the_permalink() ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a>
                </div>
                <?php endif; ?>
                <?php if( $time > $one_week_ago ) {?>
                <div class="image-overlay"><img src="<?php bloginfo('template_directory'); ?>/images/icon_new.png"></div>
                <?php } ?>
            </div>
            <div class="clear"></div>

            <div class="font-16 leading-medium">
                <div class="one-half">
                    <a href="#" class="vote icon-text-link disp-block border-right-lightgrey pad-tb5 pad-r5 tk3" data-post="<?php echo $post->ID ?>">
                        <div class="vote-text pad-t5 float-left"><?php echo $vtext; ?></div>
                        <div class="float-right">
                            <div class="vote-count float-left text-medgrey pad-t5"><?php echo $votes; ?></div>
                            <span class="icon-holder float-left <?php echo $class; ?>"></span>
                        </div>
                        <div class="clear"></div>
                    </a>
                </div>

                <div class="one-half">
                    <a href="#" class="icon-text-link disp-block pad-tb5 pad-l5 tk3">
                        <div class="pad-t5 float-left hide-at-768">COMMENT</div>
                        <div class="float-right"><div class="float-left text-medgrey pad-t5"></div><span class="icon-holder comment-sm float-left pad-t5"><?php comments_number( '0', '1', '%' ); ?></span></div>
                        <div class="clear"></div>
                    </a>
                </div>
                <div class="clear"></div>
            </div>
        </div>
    </div>

        <?php endwhile;?>
        <?php wp_reset_query(); ?>
    <?php endif; ?> 
```

然后添加新帖子：

```
 <div class="grid_row_1">
    <div class="grid_col">
        <div class="border-top-black margin-tb20">
            <div class="align-center"><a class="action-btn pad-lr50 tk3 view-more" href="#">SHOW MORE</a></div>
        </div>
    </div>
</div> 
```

再次感谢您的任何见解！

# objective-c - Obj-C：在方法中使用可变类并返回非可变类

> ID：14593290
> 
> 赞同：1
> 
> 时间：2013-01-29T22:33:35.370
> 
> 标签：objective-c, collections, nsmutablearray

在 Objective-C 中，我发现自己创建了很多 Mutable 对象，然后将它们作为非可变对象返回。我在这里做的方式是简单地返回`NSMutableSet`作为一种`NSSet`好的做法吗？我在想也许我应该指定我复制它。

```
/**  Returns all the names of the variables used in a given
 *   program. If non are used it returns nil */
+ (NSSet *)variablesUsedInProgram:(id)program
{
    NSMutableSet* variablesUsed = [[NSMutableSet alloc]init];
    if ([program isKindOfClass:[NSArray class]]) {
        for (NSString *str in program)
        {
            if ([str isEqual:@"x"] || [str isEqual:@"y"] || [str isEqual:@"a"] || [str isEqual:@"b"])
                [variablesUsed addObject:str];
        }
    }
    if ([variablesUsed count] > 0) {
        return variablesUsed;
    } else {
        return nil;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:30:43.713

如果我是你，我会这样做。

```
+ (NSSet *)variablesUsedInProgram:(id)program
{
    NSSet *variablesUsed;
    if ([program isKindOfClass:[NSArray class]]) {
      NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF = 'x' or SELF = 'y' or SELF = 'z'"];
      variablesUsed = [NSSet setWithArray:[program filteredArrayUsingPredicate:predicate]];  
    }
    int count;
    return (count = [variablesUsed count]) > 0 ? variablesUsed : nil;
} 
```

我发现使用谓词过滤数组非常全面和容易。而不是处理创建一个新的可变类型然后测试某些条件，添加直到循环；在这种情况下，使用谓词似乎更容易。希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T22:42:05.980

这取决于您需要多少安全性。如果您将对象作为 NSSet 返回，它仍然是 NSMutableSet，因此可以轻松地将其转换回 1 并进行修改。

当然，如果您正在创建公共 API，我建议您返回一份副本。对于内部项目，也许方法签名已经足够明确意图。

值得注意的是，通常返回副本对性能的影响可以忽略不计 - 复制不可变实例实际上是免费的，而发送到可变传递的每个副本都将创建另一个副本。所以我会说默认是它的好习惯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:28:28.693

这里不是一个完整的答案，请考虑 NSProxy 的答案，但我想澄清一些事情。

在您的情况下，您从头开始创建对象，并且您没有设置任何 ivar 来指向该对象。在我看来，在很大一部分情况下，您不需要复制返回的可变对象。但是，如果有充分的理由拒绝类客户端更改类，那么您应该复制该变量。

考虑这样的属性：

```
@property (nonatomic,assign) NSSet* set; 
```

类客户端可以这样做：

```
NSMutableSet* set= ... ; // inizialized to some value
classInstance.set= set;
// Mutate the set 
```

一旦改变了集合，它可能会使类处于不一致的状态。

这就是为什么当我拥有一个具有可变版本的类类型的属性时，我总是在属性中放置副本而不是赋值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T22:36:20.750

不，这是一种绝对正确的 OOP 方法（它利用了多态性）。每一个`NSMutableSet`都是适当的`NSSet`。不要过度复制。

# ios - Xcode 更新后 Xcode 4.6 zXing 编译错误 (4H127)

> ID：14593291
> 
> 赞同：16
> 
> 时间：2013-01-29T22:33:35.937
> 
> 标签：ios, xcode, ios-simulator, zxing, xcode4.6

使用 ZXing 的不同项目在上次 Xcode 更新后出现错误：

错误消息是：

1.  未使用私有字段“cached_y_”
2.  未使用私有字段“bits_”
3.  未使用私有字段“cached_row_num_”
4.  未使用私有字段“dataHeight_”

我必须设置任何编译器标志吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-05T09:14:51.663

只需添加此标志

```
-Wno-unused-private-field 
```

在 ZXingWidget 目标 -> 构建设置 -> 其他警告标志下。单击 + 按钮并粘贴标志，清理并再次构建。

![如何设置编译器标志](../Images/14e05f838393a77c4fe0189651928565.png)

（无需删除任何其他标志，只需忽略未使用的私有字段警告）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-31T00:22:44.800

这是使其编译的解决方法。您已经删除了几个编译警告标志：

选择 xzing 项目，构建设置，查找“其他警告标志”并删除 -Werror 和 -Wno-unused-parameter

![在此处输入图像描述](../Images/bccb47066fd5ee86467d5324ce3f2747.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-29T23:24:03.950

他们将项目设置为将警告视为错误。关闭该设置，它应该可以编译，因此您至少可以运行示例代码。

还要告诉他们，以便他们修复警告。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-30T06:35:52.447

看起来这是一个临时修复[http://code.google.com/p/zxing/issues/detail?id=1494](http://code.google.com/p/zxing/issues/detail?id=1494)我希望很快有一个更好的解决方案。

# css - CSS样式表错误

> ID：14593295
> 
> 赞同：1
> 
> 时间：2013-01-29T22:33:47.650
> 
> 标签：css, html, umbraco

我下面的代码有什么问题。下面的代码不能正常工作

```
<ul>
<li><font-color ="Red"/> Text 1</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T22:36:31.840

`Font-color`不是有效的 HTML 标记或样式声明。从语法上讲，这是非法的。

相反，它应该是这样的：`<li style="color:red">foo</li>`

然而，将样式移动到它们自己的样式表中几乎总是更好，并使用类名来代替：

**HTML**

```
<li class="my-class">foo</li> 
```

**CSS**

```
.my-class { color: red; } 
```

正如@JanDvorak 所指出的，尝试对“highlight”之类的类使用描述性名称。

您还可以使用其他[选择器](http://www.w3.org/TR/selectors/#selectors)来设置元素的样式，例如 ID 选择器：

**HTML**

```
<li id="item1">foo</li> 
```

**CSS**

```
#item1 { color: red; } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T22:36:03.643

它应该是：

```
<ul>
  <li style="color: Red;"> Text1</li>
</ul> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-29T22:36:23.560

字体不是自闭合标签。它也被弃用了，所以如果可能的话，你应该考虑改变它。它应该如下所示：

```
<ul>
    <li style='color:red'> Text 1</li>
</ul> 
```

# matplotlib - 具有许多系列的熊猫时间线图的颜色

> ID：14593304
> 
> 赞同：0
> 
> 时间：2013-01-29T22:34:51.397
> 
> 标签：matplotlib, pandas

我正在使用 pandas 来绘制节点集群的数据。我发现 pandas 会重复不同系列的颜色值，这使得它们无法区分。

我尝试提供这样的自定义颜色值并将 my_colors 传递给绘图中的颜色字段：

```
 my_colors = []
  for node in nodes_list:
    my_colors.append(rand_color()) 
```

rand_color() 定义如下：

```
 def rand_color():
    from random import randrange
    return "#%s" % "".join([hex(randrange(16, 255))[2:] for i in range(3)]) 
```

但在这里我也需要避免颜色值太接近而无法区分。我有时有多达 60 个节点（系列）。很可能一个硬编码的颜色值列表是最好的选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T13:31:49.767

您可以从 Matplotlib 中定义的任何颜色图中获取颜色列表，甚至可以通过以下方式获取自定义颜色图：

```
>>> import matplotlib.pyplot as plt
>>> colors = plt.cm.Paired(np.linspace(0,1,60)) 
```

用这些颜色绘制一个例子：

```
>>> plt.scatter( range(60), [0]*60, color=colors )
<matplotlib.collections.PathCollection object at 0x04ED2830>
>>> plt.axis("off")
(-10.0, 70.0, -0.0015, 0.0015)
>>> plt.show() 
```

![颜色](../Images/332c23e814f31df47d69e32942ad76b2.png)

我发现“配对”颜色图对这类事情特别有用，但您可以使用[任何其他可用](http://www.scipy.org/Cookbook/Matplotlib/Show_colormaps)或自定义的颜色图。

# java - 打开一个非常大的JSONArray（在一个文件中）的效率，只是为了看第一个位置

> ID：14593313
> 
> 赞同：0
> 
> 时间：2013-01-29T22:35:49.490
> 
> 标签：java, android, json

我正在我的 android 项目中读取一个 JSON 文件，只是为了查看数组的第一个位置。

事实上，如果这个 JSON 更大什么正常，我认为这不是有效的......

我的 json 文件阅读器：

```
public static JSONObject parseJSONfromInputStrem (InputStreamReader isr){
    try {
        BufferedReader reader = new BufferedReader(isr,8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }

        isr.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;
} 
```

我在哪里调用函数：

```
 FileInputStream fis = c.openFileInput(file);
 InputStreamReader isr = new InputStreamReader(fis);
 JSONObject jso = JSONParser.parseJSONfromInputStrem(isr);
 JSONArray myArray = jso.getJSONArray("data"); 
```

有什么方法可以有效地读取 JSONArray 的第一个位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T23:03:34.937

您应该使用流式 JSON 解析器（想想 DOM 与 SAX）。

[https://stackoverflow.com/a/823632/18573](https://stackoverflow.com/a/823632/18573)列出了一些。可能还有其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:00:34.227

您可以读入少量文件并手动提取值，也可以将值放入单独的文件中。即使它是重复的数据，包含来自主文件的汇总或关键信息的辅助文件也会使事情变得更加高效。

# php - SQL 和 PHP 批量更新

> ID：14593318
> 
> 赞同：0
> 
> 时间：2013-01-29T22:36:02.567
> 
> 标签：php, mysql, sql, codeigniter

我有下表，其中包含以下值：

```
 id   name  farmid   amount    cycleid   totalprice  quantity  month     year
                        1    DAP     1      2400        1         24000      10       DECEMBER  2012
                        2    UREA    1      2500        1         5000        2       DECEMBER  2012
                        3    SENCOR  1      1200        1         2400        2       DECEMBER  2012
                        4    DAP     2      2400        1         2400        1       DECEMBER  2012
                        5    UREA    2      2500        1         2400        1       DECEMBER  2012
                        6    SENCOR  3      2000        2         4000        2       DECEMBER  2012
                        7    DAP     1      3000        2         3000        1       JANUARY   2013
                        8    UREA    2      3000        2         6000        2       JANUARY   2013
                        9    SENCOR  3      3000        2         6000        2       JANUARY   2013 
```

我在制定正确的 SQL 语句以进行批量更新时遇到问题，例如使用年的月份更新行`DECEMBER`并且`2012`仅使用农场`1`注意：农场行在同一个月内不能有多个 cycleid，例如在 12 月。请帮助为上述问题提出正确的 sql 语句。这是我在 code-igniter 中尝试的：

```
 $chemicalarray = array(
            1=>array('name'=>$B41,'farmid'=>$farmname_id,'amount'=>$D41,'cycleid'=>$cycleid,'totalprice'=>$E41,'quantity'=>$C41,'year'=>$E4,'month'=>$E5),
            2=>array('name'=>$B42,'farmid'=>$farmname_id,'amount'=>$D42,'cycleid'=>$cycleid,'totalprice'=>$E42,'quantity'=>$C42,'year'=>$E4,'month'=>$E5),
            3=>array('name'=>$B43,'farmid'=>$farmname_id,'amount'=>$D43,'cycleid'=>$cycleid,'totalprice'=>$E43,'quantity'=>$C43,'year'=>$E4,'month'=>$E5),
            4=>array('name'=>$B44,'farmid'=>$farmname_id,'amount'=>$D44,'cycleid'=>$cycleid,'totalprice'=>$E44,'quantity'=>$C44,'year'=>$E4,'month'=>$E5),
            5=>array('name'=>$B45,'farmid'=>$farmname_id,'amount'=>$D45,'cycleid'=>$cycleid,'totalprice'=>$E45,'quantity'=>$C45,'year'=>$E4,'month'=>$E5),
                              );
                    foreach ($chemicalarray as $key) {
                        $unitsql = "UPDATE chemical SET name = '{$key['name']}', farmid = '{$key['farmid']}' , 
                                        amount = '{$key['amount']}' , cycleid = '{$key['cycleid']}' , 
                                        totalprice = '{$key['totalprice']}', quantity = '{$key['quantity']}' 
                                    WHERE year = '{$key['year']}'
                                        AND month = '{$key['month']}'"; 
                        $q = mysql_query($unitsql); 
                        echo $key['name']; 
                        echo $key['amount']; 
                        if($q==true){ }else{ echo mysql_error(); }
                    }

Output of var_dump is :
array(8) { ["name"]=> string(8) "Round Up" ["farmid"]=> string(1) "1" ["amount"]=> float(1300) ["cycleid"]=> string(1) "1" ["totalprice"]=> float(15600) ["quantity"]=> float(12) ["year"]=> float(2012) ["month"]=> string(8) "DECEMBER" } Done11array(8) { ["name"]=> string(7) "Krismat" ["farmid"]=> string(1) "1" ["amount"]=> float(1500) ["cycleid"]=> string(1) "1" ["totalprice"]=> float(15000) ["quantity"]=> float(10) ["year"]=> float(2012) ["month"]=> string(8) "DECEMBER" } Done11array(8) { ["name"]=> string(3) "DAP" ["farmid"]=> string(1) "1" ["amount"]=> float(2500) ["cycleid"]=> string(1) "1" ["totalprice"]=> float(75000) ["quantity"]=> float(30) ["year"]=> float(2012) ["month"]=> string(8) "DECEMBER" } Done11array(8) { ["name"]=> string(4) "Urea" ["farmid"]=> string(1) "1" ["amount"]=> float(2000) ["cycleid"]=> string(1) "1" ["totalprice"]=> float(50000) ["quantity"]=> float(25) ["year"]=> float(2012) ["month"]=> string(8) "DECEMBER" } Done11array(8) { ["name"]=> string(9) "Dual Gold" ["farmid"]=> string(1) "1" ["amount"]=> float(2500) ["cycleid"]=> string(1) "1" ["totalprice"]=> float(75000) ["quantity"]=> float(30) ["year"]=> float(2012) ["month"]=> string(8) "DECEMBER" } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:06:37.853

您只是为每个月-年组合一遍又一遍地更新相同的确切行。如果您需要将更新限制为仅某些`year`- `month`-`farmid`组合，那么您需要添加`farmid`WHERE 子句。

# bash - 插入字段分隔符以在 shell 脚本中排列和捕获变量中的值

> ID：14593320
> 
> 赞同：1
> 
> 时间：2013-01-29T22:36:05.873
> 
> 标签：bash, shell, sed, awk

我有一个格式不是很好的输出，这会导致捕获变量值的麻烦。

例如：

```
This is counter1 1000
this counter2 2000
this counter3 is higher value 3000 
```

现在从上面的文件中，我只想捕获 1000、2000 和 3000。如果我将 awk 与 print $x 一起使用，其中 x = 任何值，那么它会为每一行分配不同的值。如果我使用 $4，那么对于第一行，我将能够选择 1000，但对于第二行，它不会提供任何值，对于第三行，它会打印得更高，所以我想插入字段分隔符并读取变量。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T22:41:16.563

如果数字始终是最后一个字段，您可以这样做

```
{ print $NF } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T22:42:46.623

如果你只想要最后一个参数，并且只有一个数字：

```
echo $'For example:\nThis is counter1 1000\nthis counter2 2000\n
     this counter3 is higher value 3000\ndone.\n' |
  sed -ne 's/^.* \([0-9]\{1,99\}\)/\1/p'

1000
2000
3000 
```

您甚至可以捕获计数器的编号（因此只读行包含`counterX`）：

```
echo $'For example:\nThis is counter1 1000\nthis counter2 2000\n
     this counter3 is higher value 3000\ndone.\n' |
  sed -ne 's/^.*\(counter[0-9]\{1,99\}\) \(.* \)\{0,1\}\([0-9]\{1,99\}\)$/\1 \3/p'

counter1 1000
counter2 2000
counter3 3000 
```

甚至只是定位分隔符：

```
echo $'For example:\nThis is counter1 1000\nthis counter2 2000\n
     this counter3 is higher value 3000\ndone.\n' |
  sed -ne 's/^\(.*counter[0-9]\{1,99\}.*\) \([0-9]\{1,99\}\)$/\1 :: \2/p'
This is counter1 :: 1000
this counter2 :: 2000
this counter3 is higher value :: 3000 
```

或者，或者……

```
echo $'For example:\nThis is counter1 1000\nthis counter2 2000\n
     this counter3 is higher value 3000\ndone.\n' |
  sed -e 's/^\(.*counter[0-9]\{1,99\}.*\) \([0-9]\{1,99\}\)$/\1 :: \2/'

For example:
This is counter1 :: 1000
this counter2 :: 2000
this counter3 is higher value :: 3000
done. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T22:43:35.873

要打印最后一个单词，请使用

```
awk '{ print $NF }' 
```

要分隔数字单词，您可以使用

```
cat yourfile | tr ' ' '\n' | egrep '^[0-9]+$' 
```

或 GNU 特定的`grep -ow '[0-9]*' yourfile`

要仅查找该行中第一个数字为数字的单词，您可以使用

```
awk '{ for(i=0; i<=NF; i++) if($i ~ /^[0-9]+$/) { print $i; break; } }' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T23:31:01.437

要使用 sed 仅打印最后一个元素，请使用以下内容：

```
sed 's/.* //' 
```

测试输入：

```
cat << EOF > infile
This is counter1 1000
this counter2 2000
this counter3 is higher value 3000
EOF 
```

运行测试：

```
<infile sed 's/.* //' 
```

输出：

```
1000
2000
3000 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T00:59:18.107

使用 sed 的其他方式

`sed -re 's/(.*)\s([0-9]+)/\2/' temp.txt`

输出

```
1000
2000
3000 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T07:09:31.237

正如其他人建议的那样，您可以在 awk 中使用 $NF。如果所有数字始终是最后一个字段，您也可以使用 perl：

```
perl -F -lane 'print $F[scalar(@F)-1]' your_file 
```

或者如果它并不总是最后一个字段，那么：

```
perl -F -lane 'for(@F){print if(/^\d+$/)}' your_file 
```

# jquery - 创建许多 YouTube iframe 播放器会减慢初始页面加载速度

> ID：14593326
> 
> 赞同：1
> 
> 时间：2013-01-29T22:36:34.603
> 
> 标签：jquery, youtube-api, youtube-javascript-api

我正在使用 youtube api 添加很多视频，比在这个例子中更多，一页 15 个，另一页 30 个；逻辑是相同的

```
// load  api
  var tag = document.createElement('script');
  tag.src = "//www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  // make player array
  var players = new Array();

  function onYouTubeIframeAPIReady() {
    players[0] = new YT.Player('player1', { //player1 is a div id in the html, this is how it works throughout the page
      height: '405',
      width: '720',
      videoId: 'Sqd3jUPq3Lw',
      playerVars: { 
          'rel': 0, 
          'enablejsapi': 1,
          'iv_load_policy': 3
          }
    });
    players[1] = new YT.Player('player2', {
      height: '315',
      width: '560',
      videoId: 'Sqd3jUPq3Lw',
      suggestedQuality: 'large',
      iv_load_policy: '3',
      playerVars: { 
          'rel': 0, 
          'enablejsapi': 1,
          'iv_load_policy': 3
          }
    });
    players[2] = new YT.Player('player3', {
      height: '315',
      width: '560',
      videoId: 'Sqd3jUPq3Lw',
      suggestedQuality: 'large',
      iv_load_policy: '3',
      playerVars: { 
          'rel': 0, 
          'enablejsapi': 1,
          'iv_load_policy': 3
          }     
    });
     players[3] = new YT.Player('player4', {
      height: '315',
      width: '560',
      videoId: 'Sqd3jUPq3Lw',
      iv_load_policy: '3',
      playerVars: { 
          'rel': 0, 
          'enablejsapi': 1,
          'iv_load_policy': 3
          }
    });
      players[4] = new YT.Player('player5', {
      height: '315',
      width: '560',
      videoId: 'Sqd3jUPq3Lw',
      playerVars: { 
          'rel': 0, 
          'enablejsapi': 1,
          'iv_load_policy': 3 
          }
    });
    players[5] = new YT.Player('player6', {
      height: '315',
      width: '560',
      videoId: 'Sqd3jUPq3Lw',
      playerVars: { 
          'rel': 0, 
          'enablejsapi': 1,
          'iv_load_policy': 3 
          }
    });
    players[6] = new YT.Player('player7', {
      height: '315',
      width: '560',
      videoId: 'Sqd3jUPq3Lw',
      playerVars: { 
          'rel': 0, 
          'enablejsapi': 1,
          'iv_load_policy': 3 
          }
    });

  }
//to stop the video from playing
  $(document).click( function() {
    //loop players array to stop them all
    $(players).each(function(i){
       this.pauseVideo();
      });
  }); 
```

上述代码的问题在于 iframe 需要很长时间才能加载到页面上。这会干扰其他 javascript，例如触发包含某些视频的模式窗口。

在下一个示例中，我将视频分成 3 个数组，其中 2 个在诸如模态按钮事件之类的事件上触发。

```
// load  api
  var tag = document.createElement('script');
  tag.src = "//www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  // make player array
  var players = new Array();
  var players2 = new Array();
  var players3 = new Array();

  function onYouTubeIframeAPIReady() {
    players[0] = new YT.Player('player1', {
      height: '405',
      width: '720',
      videoId: 'Sqd3jUPq3Lw',
      playerVars: { 
          'rel': 0, 
          'enablejsapi': 1,
          'iv_load_policy': 3
          }
    });

   $('.btn-1').click( function(){

      players2[0] = new YT.Player('player3', {
      height: '315',
      width: '560',
      videoId: 'Sqd3jUPq3Lw',
      suggestedQuality: 'large',
      iv_load_policy: '3',
      playerVars: { 
          'rel': 0, 
          'enablejsapi': 1,
          'iv_load_policy': 3
          }     
    });
     players2[1] = new YT.Player('player4', {
      height: '315',
      width: '560',
      videoId: 'Sqd3jUPq3Lw',
      iv_load_policy: '3',
      playerVars: { 
          'rel': 0, 
          'enablejsapi': 1,
          'iv_load_policy': 3
          }
    });
      players2[2] = new YT.Player('player5', {
      height: '315',
      width: '560',
      videoId: 'Sqd3jUPq3Lw',
      playerVars: { 
          'rel': 0, 
          'enablejsapi': 1,
          'iv_load_policy': 3 
          }
    });

  });

   $('.btn-2').click( function(){

  players3[0] = new YT.Player('player7', {
      height: '315',
      width: '560',
      videoId: 'Sqd3jUPq3Lw',
      playerVars: { 
          'rel': 0, 
          'enablejsapi': 1,
          'iv_load_policy': 3 
          }
    });
    players3[1] = new YT.Player('player8', {
      height: '315',
      width: '560',
      videoId: 'Sqd3jUPq3Lw',
      playerVars: { 
          'rel': 0, 
          'enablejsapi': 1,
          'iv_load_policy': 3 
          }
    });
     players3[2] = new YT.Player('player9', {
      height: '315',
      width: '560',
      videoId: 'Sqd3jUPq3Lw',
      playerVars: { 
          'rel': 0, 
          'enablejsapi': 1,
          'iv_load_policy': 3 
          }
    });
   });
   }

  $(document).click( function() {
    //loop players array to stop them all

    $(players).each(function(i){
       this.pauseVideo();
      });   
      $(players2).each(function(i){
       this.pauseVideo();
      });
      $(players3).each(function(i){
       this.pauseVideo();
      });
        }); 
```

这实际上会错开加载时间。页面加载得很快，虽然模态框需要更长的时间，但我觉得用户愿意再等几秒钟来加载 iframe。

不起作用的是最后一个在文档点击时暂停所有视频的功能（当用户点击离开模式时很有用）。具有讽刺意味的是，如果我摆脱了按钮单击事件，函数 onYouTubeIframeAPIReady 能够为所有三个数组创建 iframe。一旦将这些点击事件添加到函数中，pausevideo 函数就会失败。

我已经阅读了 youtube 文档，但没有找到解决方案。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:28:19.880

为了回答您关于为什么当您采用将`YT.Player`对象存储在单独数组中的方法时所有视频都没有暂停的具体问题，我将假设这是因为您只是迭代`players`数组并调用`pauseVideo()`每个播放器，并且对`players2`(and `players3`) 数组不做同样的事情。

为了解决一次加载大量播放器时 JavaScript 执行延迟的更大问题，您需要记住页面上的 JavaScript 执行是单线程的，如果您花时间在其中，`onYouTubeIframeAPIReady()`则必然会阻止任何处理程序或同时执行的其他代码。因此，如果这对您来说是个问题，您应该尽量减少在该函数中占用执行线程的时间。[这样做的一种技术是将一些通过 setTimeout() 调用延迟](http://javascriptweblog.wordpress.com/2010/06/28/understanding-javascript-timers/)执行的操作排队。

这可能看起来像（未经测试）：

```
var players = [];

function onYouTubeIframeAPIReady() {
  window.setTimeout(function() {
    players.push(new YT.Player('player1', {
      // Your player1 config here...
    }));
  }, 0);

  // Many other window.setTimeout() calls...

  window.setTimeout(function() {
    players.push(new YT.Player('player50', {
      // Your player50 config here...
    }));
  }, 0);
} 
```

您可能还会看到添加`controls: 2`到您的一些好处`playerVars`，如此[处所述](https://developers.google.com/youtube/player_parameters#controls)。

顺便说一句，您在`iv_load_policy`传递给`YT.Player`构造函数的选项中指定一个值。那什么也做不了；你应该把它作为一个值放在`playerVars`部分中（你已经在做）。

# android - 具有特定端口的 Android HTTP 请求

> ID：14593329
> 
> 赞同：1
> 
> 时间：2013-01-29T22:36:42.873
> 
> 标签：android, http, shoutcast, icecast

我正在尝试从 Shoutcast 服务器获取歌曲名称。所以，我的想法是在 Shoutcast 服务器的 7.html 页面上做一些正则表达式，但是我无法获得简单的 HttpGet 请求来接收 7.html 页面。我究竟做错了什么？

如果我从链接中删除端口号，HttpGet 将毫无问题地运行，但我不会得到我的结果。

```
private class GetTrackInfo extends AsyncTask<String, Void, String> {

    @Override
    protected String doInBackground(String... Urls) {

        String url = urls[0];
        if(!url.contains("http://")) url = "http://" + url;
        url = url + "/7.html";
        HttpParams params = new BasicHttpParams();
        HttpClient httpclient = new DefaultHttpClient(params);
        HttpGet http = new HttpGet(url);
        HttpResponse response = null;
        try {
            response = httpclient.execute(http);
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        try {
            response.getEntity().writeTo(out);
        } catch (IOException e) {
            e.printStackTrace();
        }        
        String res = out.toString();
        return res;
    }

    @Override
    protected void onPostExecute(String result) {
        Log.i("GetTrack", "Track result: " + result);
        String[] results = result.split(",");
        String track = results[results.length-1];
        fplayer.setStreamInfoTxt(track);
    }

} 
```

作为一个错误，我得到：

> 01-29 23:28:10.461: W/System.err(962): org.Apache.http.client.ClientProtocolException 01-29 23:28:10.471: W/System.err(962): 在 org.Apache。 http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.Java:557) 01-29 23:28:10.471: W/System.err(962): at org.Apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient .Java:487) 01-29 23:28:10.471: W/System.err(962): 在 org.Apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.Java:465) 01-29 23:28 :10.471: W/System.err(962): 在 com.imsgroups.exyuradio.services.PlayerService$GetTrackInfo.doInBackground(PlayerService.Java:257) 01-29 23:28:10.471: W/System.err(962) : 在 com.imsgroups.exyuradio.services.PlayerService$GetTrackInfo.doInBackground(PlayerService.Java:1) 01-29 23:28:10.481: W/System.err(962): 在 Android.os.AsyncTask$2.call( AsyncTask.Java：185) 01-29 23:28:10.481: W/System.err(962): 在 Java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.Java:305) 01-29 23:28:10.491: W/ System.err(962): 在 Java.util.concurrent.FutureTask.run(FutureTask.Java:137) 01-29 23:28:10.491: W/System.err(962): 在 Java.util.concurrent.ThreadPoolExecutor .runWorker(ThreadPoolExecutor.Java:1068) 01-29 23:28:10.491: W/System.err(962): 在 Java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.Java:561) 01-29 23 ：28：10.491：W / System.err（962）：在Java.lang.Thread.run（Thread.Java：1096）01-29 23：28：10.491：W / System.err（962）：引起： org.Apache.http.ProtocolException：服务器未能响应有效的 HTTP 响应 01-29 23:28:10.511：W/System.err(962)：在 org.Apache.http.impl.conn.DefaultResponseParser.parseHead (DefaultResponseParser.Java:93) 01-29 23:28:10。511: W/System.err(962): 在 org.Apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.Java:174) 01-29 23:28:10.511: W/System.err(962):在 org.Apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.Java:179) 01-29 23:28:10.511: W/System.err(962): 在 org.Apache.http.impl.conn.DefaultClientConnection。 receiveResponseHeader(DefaultClientConnection.Java:235) 01-29 23:28:10.522: W/System.err(962): at org.Apache.http.impl.conn.AbstractClientConnAdapter.receiveResponseHeader(AbstractClientConnAdapter.Java:259) 01-29 23:28:10.522: W/System.err(962): 在 org.Apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.Java:279) 01-29 23:28:10.522: W/System.err(962 ): 在 org.Apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.Java:121) 01-29 23:28:10.522: W/System.err(962): 在 org.Apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.Java:410) 01-29 23:28:10.541: W/System.err(962)：在 org.Apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.Java:555)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:42:11.410

我设法弄清楚了！我的`String url`变量实际上有问题。在用 URLEncode 编码这个字符串后，我看到我有 %0A%0D ，因为我从文件中获取了这些 url。（%0A%0D 是用于转义和换行的字符，请参阅[此处](http://www.w3schools.com/tags/ref_urlencode.asp)了解更多信息）现在一切都像魅力一样工作！所以，伙计们，在发出 Http 请求之前，请务必仔细检查您的网址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T22:48:45.940

您正在修改变量`url`，但随后将原始参数传递给您的`HttpGet`

```
 HttpGet http = new HttpGet(urls[0]); 
```

因此，如果您`urls[0]`还没有`http:`协议，则不会添加它。我想你想要以下 -

```
HttpGet http = new HttpGet(url); 
```

# c++ - c++ - 从 char[2] 转换为 short 时反转字节顺序

> ID：14593331
> 
> 赞同：1
> 
> 时间：2013-01-29T22:36:49.500
> 
> 标签：c++

我有的是这个

```
struct Record
{
unsigned char cat;
unsigned char len[2]={0x00, 0x1b};  // can't put short here because that 
                                   // whould change the size of the struct
unsigned char dat[253];
};
Record record;
unsigned short recordlen = *((unsigned short*)record.len); 
```

这导致`recordlen=0x1b00`而不是`0x001b`

与`*reinterpret_cast<unsigned short*>(record.len)`

你能解释一下为什么吗？我应该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T22:38:55.023

您遇到的称为[“字节顺序”](http://en.wikipedia.org/wiki/Endianness)。在 x86 中，所有数值变量都存储为“小端”，这意味着最低有效字节在前。

从维基百科页面：

> little-endian 系统的特性是可以从内存中读取不同长度的相同值，而无需使用不同的地址。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T22:38:08.417

这取决于您的 CPU 的字节序。参见[维基百科](http://en.wikipedia.org/wiki/Endianness)。

在您的情况下，您有“小端”，这意味着最不重要的字节排在第一位。当您想将数字转换为不同的字节大小时，这很方便：如果您使用 long int 来表示一个短数字，它的表示方式与它是一个短数字相同，只是它末尾有额外的零。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T22:44:01.547

```
unsigned short recordlen = *((unsigned short*)record.len); 
```

这已破了。`record.len` *不*指向`unsigned short`. 告诉编译器它是在撒谎。

我想你想要：

```
unsigned short recordlen = static_cast<unsigned short>(record.len[0]) * 256 +
    static_cast<unsigned short>(record.len[1]); 
```

或者，如果您更喜欢它：

```
unsigned short recordlen = (static_cast<unsigned short>(record.len[0]) << 8) |
    static_cast<unsigned short>(record.len[1]); 
```

如果没有，请编写您真正想要的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T22:55:04.210

> 你能解释一下为什么吗？

因为您不能假设您的计算机体系结构具有特定的[*字节顺序*](http://en.wikipedia.org/wiki/Endianness)。

自然的后续问题是你会怎么做。[`htonl`幸运的是，您可以通过调用这些函数、`htons`、`ntohl`或`ntohs`](http://pubs.opengroup.org/onlinepubs/7908799/xns/htonl.html)来强制执行特定的字节顺序。无论您运行它们的计算机体系结构如何，它们都可以工作：

在发送端，您将主机订单转换为网络订单；在接收端，您从网络订单转换为主机订单。

```
// Sending end
unsigned short recordlen = calculate_len();
*reinterpret_cast<unsigned short*>(record.len) = htons(recordlen);

// Receiving end
unsigned short recordlen = ntohs(*reinterpret_cast<unsigned short*>(record.len)); 
```

# c++ - 为什么 noexcept 在编译时不强制执行？

> ID：14593333
> 
> 赞同：26
> 
> 时间：2013-01-29T22:37:19.837
> 
> 标签：c++, c++11

你可能知道 C++11 有 noexcept 关键字。现在丑陋的部分是这样的：

> 请注意，函数的 noexcept 规范不是编译时检查；它只是程序员通知编译器函数是否应该抛出异常的一种方法。

[http://en.cppreference.com/w/cpp/language/noexcept_spec](http://en.cppreference.com/w/cpp/language/noexcept_spec)

那么这是委员会部分的设计失败还是他们只是将其作为编译作者的练习:) 从某种意义上说，体面的编译器会强制执行它，坏的编译器仍然可以兼容？

顺便说一句，如果您问为什么没有第三个选项（也就是不能完成），原因是我可以很容易地想到一种（慢）方法来检查函数是否可以抛出。如果您将输入限制为 5 和 7（也就是我保证该文件不会包含除 5 和 7 之外的任何内容）并且它只会在您给它 33 时抛出，那么问题就出来了，但恕我直言，这不是一个现实的问题。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-29T22:48:55.183

委员会非常清楚地考虑了（试图）抛出异常规范不允许的异常的代码被认为格式错误的可能性，并拒绝了这个想法。根据 15.4 美元/11 美元：

> 实现不应仅仅因为表达式在执行时抛出或可能抛出包含函数不允许的异常而拒绝表达式。[ 例子：
> 
> ```
>  extern void f() throw(X, Y);
> 
>  void g() throw(X) {
>       f(); // OK
>   } 
> ```
> 
> 调用`f`格式正确，即使在调用时可能会`f`抛出不允许的异常。—结束示例]`Y``g`

不管是什么促成了这个决定，或者它可能是什么，很明显这*不是*事故或疏忽的结果。

至于*为什么*做出这个决定，至少有一些可以追溯到与 C++11 的其他新特性的交互，例如移动语义。

移动语义可以使异常安全（尤其是强保证）更难执行/提供。当你进行复制时，如果出现问题，很容易“回滚”事务——销毁你所做的任何副本，释放内存，原始数据保持不变。仅当/当复制成功时，您才销毁原件。

使用移动语义，这更难——如果你在移动东西的过程中遇到异常，你已经移动的任何东西都需要移*回*原来的位置以恢复原来的顺序——但是如果移动构造函数或移动赋值运算符可以抛出，你可能会在尝试将事物移回以尝试恢复原始对象的过程中得到*另一个异常。*

*将此与 C++11 可以/确实为某些类型自动*生成移动构造函数和移动赋值运算符的事实相结合（尽管有很长的限制列表）。这些不一定保证不会引发异常。如果您明确编写移动构造函数，您几乎总是希望确保它不会抛出，这通常甚至很容易做到（因为您通常“窃取”内容，您通常只是复制一些指针 -容易做到没有例外）。但是，即使对于像`std:pair`. 一对可以移动的东西和需要复制的东西变得很难处理好。

这意味着，如果他们决定在编译时强制执行`nothrow`（和/或`throw()`），一些未知（但可能相当大）数量的代码将被完全破坏——多年来一直运行良好的代码突然不会甚至用新的编译器编译。

除此之外，尽管它们没有被弃用，但动态异常规范仍保留在语言中，因此无论如何它们最终都会在运行时强制执行至少一些异常规范。

所以，他们的选择是：

1.  破坏大量现有代码
2.  限制移动语义，以便它们适用于更少的代码
3.  继续（如在 C++03 中）在运行时强制执行异常规范。

我怀疑有人喜欢这些选择中的任何一个，但第三个显然似乎是最后一个不好的选择。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-30T15:06:48.837

一个原因很简单，异常规范（任何风格）的编译时强制执行是一件令人头疼的事情。这意味着如果您添加调试代码，您可能必须重写整个异常规范层次结构，即使您添加的代码不会引发异常。当你完成调试时，你必须再次重写它们。如果您喜欢这种忙碌的工作，您应该使用 Java 进行编程。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-07-13T08:41:58.597

编译时检查的问题：实际上不可能以任何有用的方式进行。请参见下一个示例：

```
void foo(std::vector<int>& v) noexcept
{
    if (!v.empty())
        ++v.at(0);
} 
```

这段代码可以抛出吗？显然不是。我们可以自动检查吗？并不真地。Java 这样做的方式是将主体放在一个 try-catch 块中，但我认为它并不比我们现在拥有的更好......

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-07-12T19:06:27.947

据我了解（诚然有些模糊），当真正尝试以有用的方式使用它时，发现抛出规范的整个想法是一场噩梦。

调用没有指定它们抛出或不抛出什么的函数必须被认为可能会抛出任何东西！所以编译器，如果它要求你既不抛出也不调用任何可能抛出任何超出你提供的规范的东西实际上强制执行这样的事情，你的代码几乎不能调用任何东西，现有的库将没有任何用处给您或任何其他试图使用 throw 规范的人。

而且由于编译器不可能区分“这个函数可能会抛出一个 X，但调用者很可能会以一种根本不会抛出任何东西的方式调用它”——人们将永远被束缚这种语言的“特征”。

所以......我相信它唯一可能有用的事情是说 nothrow 的想法 - 这表明从 dtors 调用并移动和交换等是安全的，但是你正在做一个符号- 像 const - 更多的是给你的用户一个 API 合约，而不是让编译器负责判断你是否违反了你的合约（就像大多数 C/C++ 一样 - 智能被认为是程序员的一部分，而不是保姆编译器）。

# java - GL 错误值 1285：内存不足

> ID：14593339
> 
> 赞同：3
> 
> 时间：2013-01-29T22:37:46.500
> 
> 标签：java, opengl, lwjgl

我正在尝试以几种不同的方式渲染一个简单的四边形。

当所有内容都存储在一个类中时，我可以很容易地做到这一点。但我希望能够在屏幕上渲染多个对象，因此我开始将代码分开并将各种功能放在单独的类中。问题是，当我将渲染功能放在 Entity 类中时，我开始收到错误消息。

这是函数，它是一个 VertexArrayObject 类：

```
public void render(){
    glBindVertexArray(vaoID);
    glEnableVertexAttribArray(0);
    glEnableVertexAttribArray(1);

    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, vboiID);

    this.exitOnGLError("Before render");
    glDrawElements(GL_TRIANGLES, indicesCount, GL_UNSIGNED_BYTE, 0);
    this.exitOnGLError("After render");

    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);
    glDisableVertexAttribArray(0);
    glDisableVertexAttribArray(1);
    glBindVertexArray(0);

    this.exitOnGLError("error rendering vao");
} 
```

同样，我所做的只是将它从主类移到一个管理 VAO 并在理论上呈现它的类。

它给了我错误值 1285，得到错误的错误调用是标记为“渲染后”的错误调用。（exitOnGLError() 是一种错误检查方法）。

错误 1285 显然意味着“内存不足”，这显然是荒谬的，因为我使用的是 1 兆字节的图像文件并且......我无法想象我的四个顶点浮动缓冲区正​​在填满我所有的 VRAM。

还有什么可能导致此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-26T09:47:18.690

为那些从谷歌来到这里的人分享一个可能的答案。

```
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexBuffer);
glBufferData( GL_ARRAY_BUFFER , sizeof( 索引 ), &indices[0], GL_STATIC_DRAW );

```

请注意以粗体显示的复制粘贴错误。这导致了错误 1285 和相当长一段时间的头疼。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-02T17:21:45.123

仅供参考，我遇到了同样的错误，这是由于我未能添加对 glBufferData 的调用，这是您实际“发送数据”到 opengl 的地方。

```
glBufferData(GL_ARRAY_BUFFER, sizeof(GLSL_XYZNDUV_Item)*p->iNum_verts,p->pVerts,GL_STATIC_DRAW);

glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(GLushort)*p->iNum_tris*2,p->pIndices, GL_STATIC_DRAW); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-13T15:58:16.143

您应该首先验证您以正确的顺序创建所有 OpenGL 类，例如，您应该只在创建 VAO 时绑定 VBO，而不是在渲染它时。

以下是我在我的 VAO 课程中对呼叫进行排序的方式：

```
 // creation
    array = glGenVertexArrays();
    glBindVertexArray(array);

    vertices = glGenBuffers();
    glBindBuffer(GL_ARRAY_BUFFER, vertices);
    glBufferData(GL_ARRAY_BUFFER, b, usage);

    for (attributes) {
        glEnableVertexAttribArray(index);
        glVertexAttribPointer(index, dimension, type, false, bytesPerVertex, offset);
    }

    if (indices are used) {
      indices = glGenBuffers();
      glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indices);
      glBufferData(GL_ELEMENT_ARRAY_BUFFER, buffer, usage);
    }

    // render
    glBindVertexArray(array);
    program.use(); // binds shader program and textures
    if (indices == -1)
        glDrawArrays(mode, 0, size);
    else
        glDrawElements(mode, size, indicesType, 0); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-09-20T11:32:26.113

在 Android 11 上使用 OpenGL渲染文件时，我遇到了同样的错误`.obj`（在 Android 9 上运行良好）。[OpenGL 中似乎存在一个错误，当文件中的源顶点在没有纹理坐标索引](https://en.wikipedia.org/wiki/Wavefront_.obj_file)格式`.obj`的顶点法线索引中定义时（） ，它会抛出内存不足错误。为了规避错误，只需在文件中添加一个纹理坐标（例如）并在每个面中引用它（变成）`f 113//113 76//76 77//77``vt 0.500 1``f 113//113 76//76 77//77``f 113/1/113 76/1/76 77/1/77`

# sql - SQL 子查询没有返回我所期望的

> ID：14593341
> 
> 赞同：1
> 
> 时间：2013-01-29T22:37:57.597
> 
> 标签：sql, sqlite

我有这个问题要解决：**如果两个学生 A 和 B 是朋友，并且 A 喜欢 B 但反之不喜欢，请删除 Likes 条目**。

对于背景，Friend 表有两列，STU1 和 STU2。如果他们是朋友，那么会有一个条目显示 STU1、STU2 和 STU2、STU1。

在 Likes 表中，如果学生 A 喜欢学生 B，则会有 STU1、STU2 的条目，但如果学生 B 不喜欢学生 A，则不会有 STU2、STU1 的条目。

所以，这就是我尝试过的。问题是它仍然在 Likes 表中留下了两行应该不存在的行。关于如何解决这个问题的任何想法？

```
delete from Likes
where exists 
    (select F.STU1, F.STU2 from Friend F
        where exists  
        (select L.STU1, L.STU2 from Likes L, Friend F where
            F.STU1 = L.STU1 and F.STU2 = L.STU2)
        )
    and not exists
        (select L.STU1, L.STU2 from Likes L, Friend F where
            F.STU1 = L.STU2 and F.STU2 = L.STU1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:52:58.770

编辑：

```
with onewayfriends as (
select f.* from friend f
left outer join likes l1 on l1.stu1=f.stu1 and l1.stu2=f.stu2
left outer join likes l2 on l2.stu1=f.stu2 and l2.stu2=f.stu1
where l1.stu1 is null or l2.stu1 is null)

delete l from likes l, onewayfriends f
where l.stu1 in (f.stu1, f.stu2) and l.stu2 in (f.stu1, f.stu2) 
```

编辑 2，因为它是 sqllite 将 cte 重写为嵌套查询，并将带有 join 的删除重写为 'where row id in..'

```
delete from likes where rowid in (select l.rowid from
(
  select f.* from friend f
  left outer join likes l1 on l1.stu1=f.stu1 and l1.stu2=f.stu2
  left outer join likes l2 on l2.stu1=f.stu2 and l2.stu2=f.stu1
  where l1.stu1 is null or l2.stu1 is null
) f, likes l
where l.stu1 in (f.stu1, f.stu2) and l.stu2 in (f.stu1, f.stu2)) 
```

[小提琴](http://www.sqlfiddle.com/#!5/87ab8/12/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T01:50:29.613

你说 Friend 表有两对。因此，我们需要从 Likes 表中删除该对在 Friend 表中的对，但在 Likes 表中不存在反对。

```
DELETE
FROM Likes
WHERE EXISTS (SELECT 1 FROM Friend f WHERE Likes.STU1 = f.STU1 AND Likes.STU2 = f.STU2)
  AND NOT EXISTS (SELECT 1 FROM Likes ml WHERE Likes.STU1 = ml.STU2 AND Likes.STU2 = ml.STU1) 
```

# cordova - Phonegap android离线外部网页

> ID：14593349
> 
> 赞同：1
> 
> 时间：2013-01-29T22:38:33.927
> 
> 标签：cordova, http-redirect, offlineapps

我正在使用 Phonegap 和 Jquery 编写一个应用程序（对于 Android 来说，所以只是为了添加对其他平台的支持），我想知道缓存外部网页的最佳方式。

事实上，我的应用程序将有一些指向外部网站（如雅虎或谷歌）的链接，我想让这些链接在用户没有连接时可供用户使用。

我已经实现了一种将 html 文件存储到文件系统的简单机制，但我希望支持 CSS 文件。

我的问题是我执行以下操作：

*   下载 html 页面（使用 phonegap filetransfer 对象）。
*   解析 html 以获取 css 参考
*   构建指向 css 文件的 url，以防它们没有与绝对链接链接
*   再次使用 phonegap 检索所有 css 文件。

如果初始 url 中存在 http 重定向，因为我为 css 生成的 url 出错，这将无法正常工作。

是否有人已经实现了对外部页面的支持并且可以分享其最佳实践或有一些提示来检索重定向的 url 以解决我的实现问题？

非常感谢

此致

弗洛朗

这不是真的很好，因为

# javascript - JavaScript 编译指示到底是什么？

> ID：14593350
> 
> 赞同：11
> 
> 时间：2013-01-29T22:38:35.717
> 
> 标签：javascript

当您希望以“严格模式”解析 JavaScript 文件（或函数）时，您可以将..

```
"use strict"; 
```

..在您的 JavaScript 文件（或函数）的顶部。

这“使用严格”；就是所谓的“pragma”。

我的问题：**什么是pragma？** 我能想到的最接近的是“指令”。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T22:43:08.100

> 编译器指令称为 pragma（“pragmatic information”的缩写）。

[http://en.wikipedia.org/wiki/Preprocessor_directive](http://en.wikipedia.org/wiki/Preprocessor_directive)

它是一个预处理器指令，或类似代码元数据。它类似于更多使用此类东西的其他语言或编译器。这是关于如何解释后面代码的实用信息。

据我所知，这是 JavaScript 中唯一的一个。强制现代口译员以某种方式行事，但又不破坏旧口译员，这是一种黑客行为。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-02-19T06:22:49.293

> ⚡️ *Pragma*是实用信息的缩写。在简单的英语中，pragmatic 是一个形容词，表示明智和实用。在编程中，*pragma*是指包含有关**编译器或解释器或汇编器应如何处理程序**的有用信息的代码。

它对编程语言本身没有任何贡献，其语法可能会有所不同。它们只影响编译器行为。JavaScript 也有很少的编译指示，其中之一是`strict`.

```
'use strict'; 
```

通过上述 pragma，JavaScript 代码将以严格模式执行。在严格模式下，不允许错误的语法，不进行*提升*，显示静默错误等。它有助于**编写更安全和优化的 JavaScript 代码**。

# c - 输入/输出流？

> ID：14593351
> 
> 赞同：-1
> 
> 时间：2013-01-29T22:38:45.583
> 
> 标签：c

编写一个程序，重复（直到文件结束）从输入流中读取一个字符。如果字符为大写，则将其更改为小写并将其写入输出流。对于所有其他字符，将字符原封不动地写入输出流。使用 getchar() 进行输入，使用 putchar() 进行输出，并使用输入重定向将输入文件连接到程序（参见快速入门的第 16 页）。C:>lowerCase < anyOldTextFile.txt 为此，您需要一个嵌套在 while 循环内的 if 语句。查看 ASCII 表可能会有所帮助。

我不是要求完成我的作业，我真的不知道如何开始这个，我只是在寻找一些提示

这是我尝试过的代码：

```
#include <stdio.h>
#include <stdlib.h>
int main() {
    int c, l;
    printf("Enter Letter: ");
    scanf("%c ", &l);
    c=getchar();
    while (c != EOF) {
        if(l <= 'Z') {
            putchar(l);
        } else if (l <= 'z') {
            putchar(l);
        } else {
            c = EOF;
        }
        system("Pause");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:49:33.967

你的程序应该有一个“main”函数，它可以做以下事情：

1.  在一个循环中，调用该[`getchar()`函数](http://linux.die.net/man/3/getchar)从标准输入流 (stdin) 中读取一个字符，并将其返回值存储到一个`int`名为“c”的变量中（例如）。

2.  如果“c”的值等于EOF，则退出循环（例如使用“break”）或完全退出main（使用“return”或“exit”）。

3.  如果“c”的值是大写字母（参见[`isupper()`函数](http://linux.die.net/man/3/isupper)），则将其转换为小写字母（参见[`tolower()`](http://linux.die.net/man/3/tolower)）。

4.  使用 . 将“c”的值打印到标准输出流 (stdout) [`putchar()`](http://linux.die.net/man/3/putchar)。

# python - 使用 Tkinter 构建应用程序

> ID：14593352
> 
> 赞同：0
> 
> 时间：2013-01-29T22:38:54.700
> 
> 标签：python, user-interface, frameworks, python-3.x, tkinter

因此，我遇到了一些关于使用 Python 构建基本 GUI 应用程序的问题。如果需要，我可以关注应用程序的详细信息，但基本问题在于出现此错误：

SyntaxError: 无效的语法 self.entryVariable.set(u"在此处输入文本。")

我一直在关注如何在 Python 中构建 GUI 的教程，但它是在考虑 2.7 版的情况下编写的（不是我正在使用的 3.3 版）。这是代码：

```
import tkinter
  class simpleapp_tk(tkinter.Tk):
        def __init__(self,parent):
            tkinter.Tk.__init__(self, parent)
            self.parent = parent
            self.initialize()
        #----------------------------
        def initialize(self):
            self.grid()
            #
            self.entryVariable = Tkinter.StringVar()
            self.entry = tkinter.Entry(self, textvariable=self.entryVariable)
            self.entry.grid(column=0, row=0, sticky='EW')
            self.entry.bind("<Return>", self.OnPressEnter
            self.entryVariable.set(u"Enter text here.")
            #The code goes on............ 
```

那么有什么想法出了什么问题吗？如果需要，我可以提供其余代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:43:08.973

好像你在你之后留下了一个逗号`self.entryVariable.set(u"Enter text here.")`

在你之后给一个逗号后尝试运行，如果它仍然给出错误..如果你共享整个代码会更好，这样我就可以自己尝试运行代码并缩短错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:20:32.480

您在错误之前的行上缺少右括号： self.entry.bind("", self.OnPressEnter

# jquery - 防止点击 250ms 功能

> ID：14593355
> 
> 赞同：0
> 
> 时间：2013-01-29T22:38:55.613
> 
> 标签：jquery, function, click, delay

我一直在尝试添加 250 毫秒的延迟，以便如果在第一次单击事件的 250 毫秒内多次单击该元素，该函数不会运行两次。帮助！

```
$(function () {
    $(".layout a").click(function () {
        var rel = $(this).attr('rel'); 
        $.cookie("Layout", $(this).attr('name'), { expires: 365, path: '/media', secure: true });
        $('.content, .searchresults').fadeOut(250, function () {     
           $("link:first").attr("href", rel); window.scrollTo(0, 0); }).delay(150).fadeIn(225); 
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:50:09.677

为什么不删除单击，然后在完成淡出时重新添加它：

```
$(".layout a").click(clickHandler);

function clickHandler() {
    var self = $(this)
    self.unbind('click', clickHandler);

    var rel = $(this).attr('rel'); 
    $.cookie("Layout", $(this).attr('name'), { expires: 365, path: '/media', secure: true });
    $('.content, .searchresults').fadeOut(250, function () {     
       $("link:first").attr("href", rel); 
       window.scrollTo(0, 0);
      self.click(clickHandler); }).delay(150).fadeIn(225); 
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T22:46:54.863

您可以添加一些标记（css 类、自定义属性、数据属性等），以显示当前正在进行的操作。这是如何实现的示例：

```
$(function () {
    $(".layout a").click(function () {
        var $this = $(this);        
        if ($this.data('inprocess') == true)
            return false;

        $this.data('inprocess', true);
        window.setTimeout(function() { $this.data('inprocess', false); }, 250);

        var rel = $(this).attr('rel'); 
        $.cookie("Layout", $(this).attr('name'), { expires: 365, path: '/media', secure: true });
        $('.content, .searchresults').fadeOut(250, function () {     
           $("link:first").attr("href", rel); window.scrollTo(0, 0); }).delay(150).fadeIn(225); 
        return false;
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T22:51:11.017

如果主要问题是阻止点击功能，而一个已经在运行，

更新：感谢@John Koerner 找出我的代码的错误。当我看到并赞成它时，我认为接受的答案是最好的方法。

但这是我更新的答案，

```
$.fn.onlyOneClick = function () {
    this.one("click", function () {
        var self = $(this);
        alert("clicked");
        $("div").fadeIn(1500, function () {
            $(this).fadeOut(1500, function () {
                self.onlyOneClick();
            });
        });
    });
}
$("span").onlyOneClick(); 
```

[演示](http://jsfiddle.net/BuA8D/3/)

# c# - PropertyGrid 控件和下拉列表

> ID：14593364
> 
> 赞同：8
> 
> 时间：2013-01-29T22:39:52.783
> 
> 标签：c#, winforms

我想创建一个下拉列表作为属性的编辑器；如果我只有字符串作为下拉列表的条目，这将正常工作（使用 StringConverter）。但是，当我尝试使用对象列表而不是字符串时，这将不起作用（但是请注意它对普通组合框的工作原理！）这是我的代码：

```
 public static List<Bar> barlist;
    public Form1()
    {
        InitializeComponent();
        barlist = new List<Bar>();
        for (int i = 1; i < 10; i++)
        {
            Bar bar = new Bar();
            bar.barvalue = "BarObject " + i;
            barlist.Add(bar);
            comboBox1.Items.Add(bar);
        }
        Foo foo = new Foo();
        foo.bar = new Bar();
        propertyGrid1.SelectedObject = foo;
    }

    public class Foo
    {
        Bar mybar;

        [TypeConverter(typeof(BarConverter))]
        public Bar bar
        {
            get { return mybar; }
            set { mybar = value; }
        }
    }

    public class Bar
    {
        public String barvalue;
        public override String ToString()
        {
            return barvalue;
        }
    }

    class BarConverter : TypeConverter
    {
        public override bool GetStandardValuesSupported(ITypeDescriptorContext context)
        {
            return true;
        }

        public override StandardValuesCollection GetStandardValues(ITypeDescriptorContext context)
        {
            return new StandardValuesCollection(barlist);
        }
    } 
```

结果（嵌入到表单等中）如下所示：

![在此处输入图像描述](../Images/0b96ea06aa6427e1b04779f333ab4d02.png)

单击一个条目给了我这个：

![在此处输入图像描述](../Images/ba871fad894d965b0b57b8293de3f1d2.png)

（对不起德语文本，我不确定是否可以更改，我的 VS 是英文但我的操作系统不是，错误消息是

```
 Invalid property value.

  The object of type "System.String" cannot be converted to type 
  "XMLTest.Form1+Bar". 
```

我很确定我可以通过定义将字符串转换回 Bar 对象的向后转换工具来解决此问题。这将需要不同的密钥才能使其正常工作。有没有更好的方法来做到这一点？为什么嵌入到 propertyGrid 控件中的组合框使用字符串（普通的组合框对此没有任何问题）

最重要的是，我可以以编程方式更改中间分隔符的位置吗？我还没有找到那个选项。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T23:06:14.617

我将`CanConvertFrom`and`ConvertFrom`方法添加到您的转换类中：

```
class BarConverter : TypeConverter
{
  public override bool GetStandardValuesSupported(ITypeDescriptorContext context)
  {
    return true;
  }

  public override StandardValuesCollection GetStandardValues(ITypeDescriptorContext context)
  {
    return new StandardValuesCollection(barlist);
  }

  public override bool CanConvertFrom(ITypeDescriptorContext context, Type sourceType)
  {
    if (sourceType == typeof(string))
    {
      return true;
    }
    return base.CanConvertFrom(context, sourceType);
  }

  public override object ConvertFrom(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value)
  {
    if (value is string)
    {
      foreach (Bar b in barlist)
      {
        if (b.barvalue == (string)value)
        {
          return b;
        }
      }
    }
    return base.ConvertFrom(context, culture, value);
  }
} 
```

# vb.net - 按连续点之间的距离对点列表进行排序

> ID：14593365
> 
> 赞同：0
> 
> 时间：2013-01-29T22:39:56.847
> 
> 标签：vb.net, algorithm, sorting, distance, point

我有一个 List(Of Point) - 可能有数十万个点。看来，我可以使用它来正确绘制某些东西的唯一方法是按它们之间的距离对其进行排序。

[我在片场使用了 CCL 和凸包，但结果仍然是大量紧密的散列 - 如果我之后按中心角度或斜率或其他东西对它们进行排序，则结果仍然是很好的辐射线]

有没有办法按连续点之间的距离对点列表进行排序？

我用过

```
Dim orderedByX As List(Of Point) = listOfPoints.OrderBy(Function(pt) pt.X).ToList() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T02:49:52.860

你首先需要构造`point, distance`对。例如，您可以通过使用同一列表的移动版本压缩列表来做到这一点。然后按距离对序列进行排序并选择与距离相对应的点。

```
Dim sortedPoint = listOfPoints.Zip(listOfPoints.Skip(1), Function(p1, p2) New With { .Point = p2, .Distance = (p2 - p1).Length }).OrderBy(Function(v) v.Distance).Select(Function(v) v.Point) 
```

我仍然认为这不是你真正想要的。我认为结果列表相当无用。

# jquery - 如何使用带有淘汰赛的 Jquery 表排序器

> ID：14593367
> 
> 赞同：7
> 
> 时间：2013-01-29T22:39:58.933
> 
> 标签：jquery, knockout.js, tablesorter

我有一张表，我需要在上面应用排序。我正在使用淘汰赛和 jquery.tablesorter.js。我也尝试过自定义绑定，但没有帮助。没有淘汰赛我的代码工作正常。下面是我的桌子。

```
<table class="tbl" id="dash" data-bind="sortTable: true">
      <thead>
        <tr class="tag close">
          <th>Type</th>
          <th>Title</th>
        </tr>
      </thead>
      <tbody class="scrollContent" data-bind="foreach: Course">
        <tr>
          <td><i class="icon"></i></td>
          <td><a href="#" id="qtipselector_01" data-bind="text: Title"></a></td>
          <div id="TooltipContent_01" class="hidden">
            <a> Test Tool Tip</a>                 
          </div>
      </div>
    </tr> 
  </tbody>
 </table> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-30T00:17:18.207

这是一个例子：http: [//jsfiddle.net/jearles/RGsEH/](http://jsfiddle.net/jearles/RGsEH/)

注意：JS 和 CSS 文件依赖项是在托管资源下引入的。

**HTML**

```
<table data-bind="sortTable: true">
  <thead>
    <tr>
      <th>Type</th>
      <th>Title</th>
    </tr>
  </thead>
  <tbody data-bind="foreach: course">
   <tr>
      <td data-bind="text: type"></td>
      <td data-bind="text: title"></td>
    </tr> 
  </tbody>
 </table> 
```

**JS**

```
function Course(type, title) {
    this.type = type;
    this.title = title;
}

var ViewModel = function() {
    this.course = ko.observableArray([
        new Course("type", "course1"),
        new Course("another_type", "course2"),
        new Course("second_type", "course5"),
        new Course("third_type", "course4"),
        new Course("fourth_type", "course3")        
    ]);
}

ko.bindingHandlers.sortTable = {
    init: function(element, valueAccessor) {
        setTimeout( function() {
            $(element).addClass('tablesorter');
            $(element).tablesorter({widgets: ['zebra']});
        }, 0);
    }
};

ko.applyBindings(new ViewModel()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-15T09:57:35.927

@john Earles 的上述解决方案适用于预定义的数据表，但是当我们向表中添加动态数据时，它有点中断。

请检查：http: [//jsfiddle.net/vkctata/vdcox07c/1/](http://jsfiddle.net/vkctata/vdcox07c/1/)

```
function Course(type, title) {
      this.type = type;
      this.title = title;
    }
    var ViewModel = function() {
      this.addNewItem = function() {
        this.course.push(new Course("nth_type", "course33"));
        return false;
      }
      this.course = ko.observableArray([
        new Course("type", "course1"),
        new Course("another_type", "course2"),
        new Course("second_type", "course5"),
        new Course("third_type", "course4"),
        new Course("fourth_type", "course3")
      ]);
    }

    ko.bindingHandlers.sortTable = {
      init: function(element, valueAccessor) {
        setTimeout(function() {
          $(element).addClass('tablesorter');
          $(element).tablesorter({
            widgets: ['zebra']
          });
        }, 0);
      }
    };

    ko.applyBindings(new ViewModel()); 
```

我们找到了一种创建几乎通用排序的方法，请点击此链接[敲除排序](https://github.com/vkctata/knockoutsort)

# matlab - 错误：尝试引用非结构数组的字段。（使用全局变量）

> ID：14593370
> 
> 赞同：0
> 
> 时间：2013-01-29T22:40:05.573
> 
> 标签：matlab, global-variables

我正在尝试修改使用全局变量的其他人的代码并不断收到我无法弄清楚的错误。这是我第一次使用全局变量，所以我怀疑它与此有关。我收到此错误：

```
Attempt to reference field of non-structure array.

Error in likelihood (line 35)
X=ModelInfo.X; 
```

这是我运行的代码：

```
clearvars -global
clearvars
global ModelInfo

%Pull in data from MySQL database
ModelInfo.X=.....   %76x2 double type
ModelInfo.y=.....   %76x1 double type

addpath('C:/.../Sampling Plans');
addpath('C:/.../Constructing a Surrogate');

%Number of variables
k=size(ModelInfo.X,2);
%Number of sample points
n=size(ModelInfo.X,1);
%Set upper and lower bounds for search of log theta
UpperTheta=ones(1,k).*2;
LowerTheta=ones(1,k).*-3;

%Run GA search of likelihood
[ModelInfo.Theta,MinNegLnLikelihood]=ga(@likelihood,k,[],[],[],[],LowerTheta,UpperTheta); 
```

...引用外部函数可能性（由其他人编写）：

```
function [NegLnLike,Psi,U]=likelihood(x)

global ModelInfo
X=ModelInfo.X;
y=ModelInfo.y;
theta=10.^x;
p=2; 
n=size(X,1);
one=ones(n,1);

% Pre-allocate memory
Psi=zeros(n,n);
% Build upper half of correlation matrix
for i=1:n
    for j=i+1:n
        Psi(i,j)=exp(-sum(theta.*abs(X(i,:)-X(j,:)).^p)); 
    end
end

% Add upper and lower halves and diagonal of ones plus 
% small number to reduce ill-conditioning
Psi=Psi+Psi'+eye(n)+eye(n).*eps; 

% Cholesky factorisation
[U,p]=chol(Psi);

% Use penalty if ill-conditioned
if p>0
    NegLnLike=1e4;
else

    % Sum lns of diagonal to find ln(abs(det(Psi)))
    LnDetPsi=2*sum(log(abs(diag(U))));

    % Use back-substitution of Cholesky instead of inverse
    mu=(one'*(U\(U'\y)))/(one'*(U\(U'\one)));
    SigmaSqr=((y-one*mu)'*(U\(U'\(y-one*mu))))/n;
    NegLnLike=-1*(-(n/2)*log(SigmaSqr) - 0.5*LnDetPsi);
end 
```

**更新：**

想通了问题。我在开始时将 ModelInfo 声明为全局变量，然后在该`%Pull in data from MySQL database`部分中我创建了一个数据库连接，然后使用该命令清除了一些我们不再需要的变量`clearvars -except`，但我没有在该列表中包含 ModelInfo。之后，我将数据放入 ModelInfo。由于它是全局的，我猜它删除了本地副本或全局副本（不太确定），但它仍然出现在工作区的变量列表中并且`isstruct(ModelInfo)`仍然返回 1 ......所以显然没有任何迹象表明存在问题除了错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:09:08.953

如果这确实是您运行的代码：

```
%Pull in data from MySQL database
ModelInfo.X=.....   %76x2 double type
ModelInfo.y=.....   %76x1 double type 
```

我怀疑它与全局变量有什么关系。您应该有一些某种数据而不是 5 个点`.....`，以使任何代码都能正常工作（因为上面的注释表示“从...中提取数据”）。我也会尝试以评论建议的形式制作这些数据，如果它不属于同一类，即制作它`double`并具有提到的大小。

例如，试着看看用 this 替换这些行是否能让你的代码工作

```
ModelInfo.X=rand(76,2)   %76x2 double type
ModelInfo.y=rand(76,1)   %76x1 double type 
```

# php - 如何使用 OnClick 调用 php 方法

> ID：14593371
> 
> 赞同：1
> 
> 时间：2013-01-29T22:40:21.553
> 
> 标签：php

我是新手，`php`我很难理解它是如何工作的。我使用 C# windowsForm 和 Asp.Net，所以这就是我遇到这么多困难的原因。

我有一个`form`：

```
<html>
    <head><title>Numero 1</title></head>
    <body>
        <form  method='post' action="01.php">

        Valor da Conta de Luz <input type="text"  name="Valor" />
        <input type="submit" value="Verificar Valor" onclick="ValorConta()" />

        </form>
    </body>
</html> 
```

在同一个文件中，我有我的`php`

```
<?php   
    function ValorConta()
    {
        $TxtValor = $_POST["TxtValor"]; 

        if($TxtValor > 50)
        {
            echo "Você está gastando muito !";
        }
        else
        {
            echo "seu gasto é normal !";
        }
    }
?> 
```

我想`ValorConta`通过单击我的按钮来调用此方法，并将其作为`parameter`值传递`textbox`...用 C# 很容易，但现在我不知道该怎么做...而且我的老师解释得不太好它给我。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:42:40.430

简短的回答：通过对 PHP 脚本的 AJAX 调用，指定允许您执行该特定方法的参数。这是因为 PHP 脚本在您获得实际页面之前被解释，并且所有 PHP 代码都被执行。然后，JS 方法无法执行任何 PHP 代码，因为如果您在浏览器中查看页面的源代码，您可以看到，您的页面中没有任何内容！

因此，鉴于您将包含一些逻辑的函数与一些演示输出混合在一起，您必须将它们分隔在两个 php 脚本中。然后，AJAX 调用仅获取您需要的输出。

您必须编写新的 PHP 脚本，以接收参数，这些参数定义了要执行的方法以及将哪些数据作为参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T22:42:57.833

如果包含该函数的 PHP 文件`ValorConta()`被调用`01.php`并位于与 HTML 文件相同的目录中，则应该可以正常工作。

但是请注意，PHP 是在服务器上执行的，而不是在客户端上执行的。所以你不能`onclick`用来调用一个PHP函数。唯一可以触发 PHP 函数的是对调用该函数的 PHP 脚本的新 HTTP 请求。例如，这可以通过 POST 发送表单来实现，就像您在 HTML 文件中所做的那样。

# spring - spring-mongodb 无法以 UTF-8 保存

> ID：14593373
> 
> 赞同：0
> 
> 时间：2013-01-29T22:40:24.580
> 
> 标签：spring, mongodb

我们通过 spring-mongodb 和 mongo-java-driver 在 mongo 中插入文档，一切似乎在程序上运行良好。通过 java 驱动程序访问数据可以正常工作，但通过 mongo 控制台执行相同操作会破坏控制台。

```
> db.item.find()
error:non ascii character detected
> 
```

我看到有一个 JIRA 票有类似的错误，但我不确定这个问题是只是控制台问题还是服务器上真的发生了一些事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T01:36:24.223

您需要确保您在启用 UTF-8 的 MongoDB 构建上运行。一个常见的问题显然是在没有 UTF-8 支持的情况下对 MongoDB 进行自定义构建（或运行旧版本）。10gen 提供的二进制文件应该默认启用此功能。如果他们不这样做，这通常是[问题](https://jira.mongodb.org/browse/SERVER-5280)所在。

# android - Android 4.2 中的模拟位置

> ID：14593375
> 
> 赞同：2
> 
> 时间：2013-01-29T22:40:26.107
> 
> 标签：android, location, android-4.2-jelly-bean

我有[一个 Android 应用程序](https://stackoverflow.com/questions/7071625/using-a-mock-location-in-navigation-app/8083589#8083589)，它使用模拟 GPS 位置提供程序将纬度/经度坐标输入谷歌地图导航应用程序。该应用程序适用于所有 pre-Android 4.2 设备，但不适用于 Nexus 10。我[今天做了一些研究](http://jgrasstechtips.blogspot.com/2012/12/android-incomplete-location-object.html)，但无法弄清楚发生了什么变化。
问题似乎是 LocationManager 没有用新坐标更新。以下行来自运行 4.1 的设备上的 logcat（第一行来自 LocationManager，第二行来自我的应用程序）：

01-29 13:40:22.501：I/LocationManagerService(770)：com.abc.navigationsimulator 的 handleLocationChanged，提供者：gps，纬度：42.2977542，长：-88.00421718333334，方位：278.9126，精度：30.0

01-29 13:40:22.611：V/导航模拟器（14875）：纬度：42.2977542 经度：-88.00421718333334 轴承：-81.08741 速度：10.610382 时间：1359488422459

我只在 4.2 设备上看到第二行。
有谁知道发生了什么变化？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:33:35.387

这是爆炸的实时纳米 [http://developer.android.com/reference/android/location/Location.html#getElapsedRealtimeNanos%28%29](http://developer.android.com/reference/android/location/Location.html#getElapsedRealtimeNanos%28%29)

新的和改进的 JB 4.2 希望使用它来了解修复程序的历史。因此，使用 setElapsedRealtimeNanos 进行设置，并适当检查您是否在正确的 Android 平台上执行此操作

# php - 仅使用 Form 组件的复杂数据结构

> ID：14593376
> 
> 赞同：1
> 
> 时间：2013-01-29T22:40:27.060
> 
> 标签：php, symfony, symfony-2.1, symfony-forms, symfony-2.2

我正在开发一个带有可定制产品的电子商务系统。每个产品可能有一些选项，就其本身而言，可能具有消费者选择的一个或多个值。由于我的用户的高度定制（某些产品可能有超过 1M 的变体），我不能使用变体方法，所以我需要坚持客户选择的选项组合。

一旦每个产品可能具有不同的选项，表单选项就会动态组合。这种形式应该将用户选择转换为关系数据库的可存储结构。

基本上，这是我的场景（我的尝试）：

*   产品
*   选项
*   期权价值
*   产品选项
*   命令
*   订单项
*   订单项选项

夹具：

*   **选项：** 1#沙拉
    *   **值：** 1#番茄、2#生菜、3#泡菜、3#胡萝卜
*   **产品：**汉堡包
*   **产品选项：** 1#沙拉
    *   **值：** 1#番茄、2#生菜、辣椒

我的目标是这样的：

```
class OrderItemType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $field = $builder->create('options', new OptionPickerType(), ['options' => $options['product']->getOptions()]);
        $field->addModelTransformation(new FixOptionIndexTransformer());
        $builder->add($field);
    }
}

class OptionPickerType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        foreach ($options['options'] as $productOption) {
            $name = $productOption->getId();
            $builder->add($name, 'choice', array(
                'choice_list'   => new ObjectChoiceList($productOption->getValues(), 'label', array(), null, 'id'),
                'multiple' => true,
                'cascade_validation' => true,
                'property_path' => '['.$name.']'
            ));
        }
    }
}

$form = $factory->create(new OrderItemType(), ['product' => $product]);

if ($request->isMethod('POST')) {
    $form->bind($request);

    if ($form->isValid()) {
        $item = $form->getItem(); // A collection of ItemOption filled with the OptionValue picked out from Choice field
    }
} 
```

此配置将按预期返回 OptionValue 数组的集合。事实上，这对我的目的来说是不够的。我真正需要的是一个扁平的集合，其中包含所有选择的值以及一些额外的数据：

```
class ItemOption
{
    protected $item;
    protected $productOption;
    protected $option; // $productOption->getName()
    protected $optionValue;
    protected $value; // / $optionValue->getLabel()
} 
```

如您所见，Choice 字段的值实际上在 ItemOption 内部。

经过几天的尝试，我无法弄清楚如何做到这一点，甚至无法思考其他方法。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T09:20:30.927

首先，当我发现很难将表单映射到我的模型时，我通常会发现模型过于复杂。简化模型以在必要时具有清晰的关系和中间对象（在不必要的情况下没有）通常在这里有所帮助。

话虽如此，在我看来，您的选项选择器上的模型转换器应该可以完成这项工作：

```
foreach ($options['options'] as $productOption) {
    // ...
}

$builder->addModelTransformer(new CallbackTransformer(
    // model to normalized
    // needed when setting default values, not sure if required in your case
    function ($modelData) {
    },
    // normalized to model
    // converts the array of arrays of OptionValues to an array of ItemOptions
    function ($normalizedData) {
        $itemOptions = array();

        foreach ($normalizedData as $optionValues) {
            foreach ($optionValues as $optionValue) {
                $itemOption = new ItemOption();
                $itemOption->setProductOption($optionValue->getProductOption());
                $itemOption->setOptionValue($optionValue);
                $itemOptions[] = $itemOption;
            }
        }

        return $itemOptions;
    }
)); 
```

# nest - Elasticsearch NEST/C# 的序列化错误

> ID：14593378
> 
> 赞同：2
> 
> 时间：2013-01-29T22:40:33.087
> 
> 标签：nest

我正在使用 NEST 来索引我的对象，并且在序列化时遇到了 Newtonsoft 错误。我的一个对象有一个自引用循环。有没有办法让我访问 JsonSerializer 并更改它处理自引用的方式而无需修改源代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T07:41:06.390

您可以在客户端上注册自定义转换器：

```
public void AddConverter(JsonConverter converter)
{
    this.IndexSerializationSettings.Converters.Add(converter);
    this.SerializationSettings.Converters.Add(converter);
} 
```

这可能会有所帮助。

但是，没有直接的方法可以更改`JsonSerializerSettings`客户端中使用的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-26T00:19:32.423

现在有一个新的api，看看：

```
 var cs2 = new ConnectionSettings(new Uri("http://localhost:9200"))
        .SetJsonSerializerSettingsModifier(settings => settings.TypeNameHandling = TypeNameHandling.None)
        .EnableTrace(); 
```

感谢添加支持！

# jquery - 提交最后一个输入字段后的jQuery焦点编辑

> ID：14593381
> 
> 赞同：0
> 
> 时间：2013-01-29T22:40:59.107
> 
> 标签：jquery, html

在两个 ID 上的 jQuery keyup 上执行一个函数。

```
$('#supplier_name').keyup(function(){
    clearTimeout(typingTimer);
    if ($('#supplier_name').val) {
        typingTimer = setTimeout(doneTyping, doneTypingInterval);
    }
    $.cookie("inputFocus", "#supplier_name"); 
}); 
```

在此之后提交表单。我想做 jQuery .focus 导致 keyup 函数执行的 ID。

因此，如果我在提交表单后在#supplier_name 中输入文本，我希望将重点放在上面。反之亦然#aircraft_type。

编辑：我正在尝试通过 cookie 执行此操作，但它似乎不起作用。

如何使用以下 jQuery 代码执行此操作：

```
<script>
$(document).ready(function() {
    $("#state").change(function () {
    this.form.submit();
})
$.cookie("inputFocus").focus();
$("#supplier_name").val($("#supplier_name").val());
$("#aircraft_type").val($("#aircraft_type").val());
var typingTimer;                
var doneTypingInterval = 800;  

$('#supplier_name').keyup(function(){
    clearTimeout(typingTimer);
    if ($('#supplier_name').val) {
        typingTimer = setTimeout(doneTyping, doneTypingInterval);
    }
    $.cookie("inputFocus", "#supplier_name"); 
});

$('#aircraft_type').keyup(function(){
    clearTimeout(typingTimer);
    if ($('#aircraft_type').val) {
        typingTimer = setTimeout(doneTyping, doneTypingInterval);
    }
    $.cookie("inputFocus", "#aircraft_type"); });

function doneTyping () {
    $("form").submit();
}

});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T01:53:20.413

上述问题的解决方法是创建一个对象来使用focus()并添加jQquery cookie插件。

更改如下："$.cookie("inputFocus").focus();" 到 "$($.cookie("inputFocus")).focus()"

在页面中添加了以下代码：“”

# assembly - 如何从 SMBIOS 中找到 BIOS 品牌/版本（在带有 FreeDOS 的 VMWare 中）

> ID：14593382
> 
> 赞同：1
> 
> 时间：2013-01-29T22:41:15.667
> 
> 标签：assembly, vmware, bios

我正在编写一个程序，该程序以低级汇编语言查找和打印 PC 信息（CPU、硬盘、BIOS 等），该程序在带有 FreeDOS O/S 的 VMWare 中运行。我需要找到我的 BIOS 版本和品牌 ID（或类似的东西）以及我的硬盘信息。

我了解到可以通过 SMBIOS 访问 BIOS 信息，但我对此不是很熟悉。谁能帮我解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:58:15.973

获取最新的[SMBIOS 规范](http://www.dmtf.org/standards/smbios)，那里有描述。简而言之，您需要在 16 字节对齐的位置扫描`_SM_`BIOS 段（**物理内存第一兆字节的顶部 64K，即 0xF0000-0x100000）中的“”字符串。**它有一个指向包含您需要的信息的表列表的指针。确保验证标头校验和以避免误报。

如果您想要一些示例源代码，请查看[dmidecode](http://www.nongnu.org/dmidecode/)。

另请参阅[此处](http://wiki.osdev.org/System_Management_BIOS)以获取更详细的说明。

# jquery - 使用 jQuery 和 Ajax 为所有用户更改元素的样式

> ID：14593384
> 
> 赞同：1
> 
> 时间：2013-01-29T22:41:16.963
> 
> 标签：jquery, css, ajax

我想要一个按钮，它可以为网站的所有用户更改某个元素的显示属性，而不仅仅是单击按钮的人。该按钮用于通过将元素的显示从“无”更改为“内联”来显示用户在线，并且应该对所有人可见。到目前为止，我有一个带有使用 jQuery 更改显示属性的按钮的 html 文件：

```
<div id="john" style="display:none">John</div>

<script>
var goOnline = function (user) {
    $('#' + user).css('display', 'inline');
}

</script>

<button type="button" onclick="goOnline(john);"/>Go Online</button> 
```

我环顾四周，使用 jQuery 的 Ajax 功能似乎是一个很好的解决方案，但我不确定如何正确实现它。我真的很感激任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:11:59.150

为此，您需要在服务器上进行一些更改。而且我不确定让所有其他客户端立即更新的最佳方法是什么。例如，这可能涉及[轮询](http://en.wikipedia.org/wiki/Polling_%28computer_science%29)

如果您也计划与其他事物具有类似的功能（即一个用户可以为每个人更改的其他事物），我建议您使用数据库来存储这些值并在站点的每次呈现时检查它们。这样，更改不会立即对所有用户可用，但是当有页面刷新（或 ajax 调用）时，更改将被反映。

# jquery - 如何检测滚动条何时具有焦点？

> ID：14593387
> 
> 赞同：1
> 
> 时间：2013-01-29T22:41:29.100
> 
> 标签：jquery, scrollbar

简单的问题：在 jQuery 中是否可以检测滚动条或滚动条轨道上的 mousedown 事件，如果可以，如何检测？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:48:05.277

我不知道是否可以在滚动条上跟踪 mousedown，但是如果您使用的是 jquery，则可以使用滚动功能将事件绑定到滚动条位置更改。

```
jQuery(document).scroll(function () {
    console.log("foo")
}); 
```

[jQuery 滚动文档](http://api.jquery.com/scroll/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T22:56:00.880

滚动条是浏览器的一部分，无法判断是否按下了鼠标按钮。除了在页面中使用自己的滚动条之外，最接近的方法是使用[`scroll()`事件检测用户是否滚动。](http://api.jquery.com/scroll/)

此外，并非所有浏览器/操作系统都可以将“焦点”放在滚动条上。

# c++ - 使用低级 WinAPI 调用的 C++ 中的 Windows 窗体自动化？

> ID：14593388
> 
> 赞同：1
> 
> 时间：2013-01-29T22:41:30.323
> 
> 标签：c++, windows, winforms, winapi

我正在开发一个项目，该项目应该使用 Windows 窗体（一个基本的计算器采用两个整数，一个运算符并有一个等号按钮）使用 C++ 编写的程序，并使用 C++ 和低级 WinAPI 调用使其自动化。

我一直在谷歌上搜索，但我找到的大多数参考资料都相当古老，我想确保我朝着正确的方向前进。我看到了 OLE 自动化，但不确定这是否是正确的方向

我所知道的：我不能使用 Reflection，包括 Visual Studio 的 UI/测试自动化程序集在内的任何 3rd 方库。

我假设无论我使用什么，我都会启动应用程序，通过它的标题获取窗口，通过元素名称以某种方式获取每个元素，模拟点击，读取计算值等等。这就是问题所在

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:37:02.877

听起来您熟悉窗口句柄等基础知识，因此我将跳过该部分，但这里有一些提示可以帮助您入门：

查找窗体的控制窗口 - [EnumChildWindows()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633494%28v=vs.85%29.aspx)

向每个窗口发送消息 - [SendMessage()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644950%28v=vs.85%29.aspx)

最后，您可以发送到按钮的消息列表 -[按钮消息](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775941%28v=vs.85%29.aspx)（对于您的程序，请特别查看 BM_CLICK 消息）

您可以通过查看“msdn 编辑控件（等）消息”找到其他每个控件消息的 MSDN 参考。

# sql - 这个 select 语句怎么可能工作，但这个 update 语句在 VFP 9 中却没有？

> ID：14593389
> 
> 赞同：0
> 
> 时间：2013-01-29T22:41:34.637
> 
> 标签：sql, visual-foxpro, sql-variant

# 概述

我正在尝试`select`在 Visual Fox Pro 9 (VFP9) 中编写一条语句来更新一行（最终还有其他几条记录，我先写了一条 select 语句，效果很好，我得到了预期的结果。

但我对 VFP9 语法有点陌生，*2013 年谁不会呢？* 我期待`UPDATE`其中包含我`select`的操作有点像`UPDATE INNER JOIN`实际*的非 foxprose SQL*。

## 我的选择语句，它工作正常。

```
SELECT temptable3.constate FROM temptable3, prw22001 ;
  WHERE prw22001.empno = temptable3.empno AND temptable3.pssn = prw22001.ssn AND temptable3.empno='5202' AND temptable3.constate <> prw22001.stateid AND prw22001.procyear='2012' 
```

## 我的更新语句（其中包含我的选择语句并且不起作用）：

```
UPDATE prw22001 ;
  SET prw22001.stateid = SELECT temptable3.constate FROM temptable3, prw22001 ;
  WHERE prw22001.empno = temptable3.empno AND temptable3.pssn = prw22001.ssn AND temptable3.empno='5202' AND temptable3.constate <> prw22001.stateid AND prw22001.procyear='2012' 
```

我收到一个错误，上面写着 Microsoft Visual FoxPro`Command contains unrecognized phrase/keyword.`我看不到它在说什么，我的查询中有 4/5 是我原来的选择语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:49:48.507

像这样转换你的陈述：

```
UPDATE prw22001 ;
  SET prw22001.stateid = temptable3.constate ;
  FROM temptable3, prw22001 ;
  WHERE prw22001.empno = temptable3.empno AND temptable3.pssn = prw22001.ssn AND temptable3.empno='5202' AND temptable3.constate <> prw22001.stateid AND prw22001.procyear='2012' 
```

# mysql - 显示具体结果mysql

> ID：14593391
> 
> 赞同：0
> 
> 时间：2013-01-29T22:41:47.057
> 
> 标签：mysql

我有下表

```
ID Name  Progress     Date
------------------------------
1  A1    First Stage  1/1/2013
2  A1    Second Stage 1/2/2013
3  A2    First Stage  1/1/2013
4  A2    Second stage 1/2/2013
5  A3    First Stage  1/2/2013
6  A1    Closed       1/5/2013 
```

我想显示每个名称的阶段，除了最终关闭的名称。例如这个的输出应该是

```
ID Name  Progress     Date
------------------------------
3  A2    First Stage  1/1/2013
4  A2    Second stage 1/2/2013
5  A3    First Stage  1/2/2013 
```

不是 A1，因为 A1 最终是关闭的。

我的查询显示`Select * from table where Progress not like 'Closed'`显然显示了除该行之外的所有结果。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:46:57.407

使用子查询过滤您要排除的所有名称：

```
select distinct name from table where progress = 'Closed' 
```

现在，在您的查询中使用它：

```
select *
from table
where name not in (select distinct name from table where progress = 'Closed'); 
```

希望这可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:12:31.043

```
SELECT x.* 
  FROM my_table x 
  LEFT 
  JOIN my_table y 
    ON y.name= x.name 
   AND y.progress = 'closed' 
 WHERE y.id IS NULL; 
```

# openmp - 如何将线程与openMP中的核心相关联

> ID：14593392
> 
> 赞同：1
> 
> 时间：2013-01-29T22:41:52.040
> 
> 标签：openmp

嗨，我最近开始在 openMP 中编程。我想知道每次重新启动时是否有任何指令可用于将特定线程与特定线程相关联。

假设我有 4 个核心，每个核心有 4 个线程。核心 1 - 线程 1 核心 2 - 线程 2 核心 3 - 线程 3 核心 4 - 线程 4。

现在，我想要的是，每次调度/启动线程 1 时，它都应该在核心 1 本身上启动。它就像线程绑定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:56:52.790

当前的 OpenMP 修订版中没有这样的编译指示，但指定绑定的标准方法将出现在 OpenMP 4.0 中。在此之前，您可以使用特定于供应商的绑定扩展，例如 GNU 的[GOMP_CPU_AFFINITY](http://gcc.gnu.org/onlinedocs/libgomp/GOMP_005fCPU_005fAFFINITY.html)或 Intel 的[KMP_AFFINITY](http://software.intel.com/sites/products/documentation/studio/composer/en-us/2011Update/compiler_c/optaps/common/optaps_openmp_thread_affinity.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T06:52:43.837

您可以创建一个调用 4 个函数的包装器，即 F1()、F2()、F3() 和 F4()。

现在使用，

```
#pragma omp sections
{
    #pragma omp section 
    {
        F1()
    } 
    #pragma omp section 
    { 
        F2()
    }
    #pragma omp section 
    { 
        F3()
    }
    #pragma omp section 
    { 
        F4()
    }
} 
```

这里 F1() 将始终在 thread0 上运行，F2() 在 thread1 上运行，依此类推。

现在在终端中执行此操作：

导出 GOMP_CPU_AFFINITY="0 1 2 3"

现在 Thread0 连接到 Core0 ， Thread1 连接到 Core1 等等。

# ios - UITextView 不会从特定区域之外滚动

> ID：14593397
> 
> 赞同：1
> 
> 时间：2013-01-29T22:42:02.677
> 
> 标签：ios, objective-c, uitextview

我有一个大约 100 行的 UITextView（为了测试它的静态），它可以很好地滚动，但是当我尝试从大约 150 行滚动时，它从底部我无法滚动。这意味着它让我只能从文本视图的特定区域滚动。例如见下图。如果我尝试选择并从顶部滚动到 3 行以上，我可以滚动但在第 3 行以下，它不会让我滚动。我浏览了文档，但找不到任何有意义的东西。![在此处输入图像描述](../Images/06ac458a696649c5a554a001acea2b35.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:27:23.480

如果某些区域没有进行 ui 触摸，这意味着您的 UITextView 被另一个视图重叠。尝试：

```
[self.view bringSubviewToFront:textView]; 
```

也想想恩里科的回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T06:53:37.090

为 TextView 设置背景颜色。它将为您提供 TextView Complete 框架的确切概念，它是背景还是前景的子视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T05:20:34.177

尝试调整 UITextView 的框架大小，使其不与 UITabBarView 重叠。如果你在界面生成器中创建它，你可以在那里调整它的大小。

# r - 如何将数据转换为矩阵格式

> ID：14593402
> 
> 赞同：6
> 
> 时间：2013-01-29T21:12:26.443
> 
> 标签：r

我已通过 read.csv 将原始数据（10000 行和 392 列）导入 R。我想知道如何将其转换为矩阵格式。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T21:22:04.700

您的问题可能会迁移到 StackOverflow。但是，答案相对简单，我会提供。read.csv 会生成一个 data.frame 作为结果。如果您的所有值都是相同的基本元素（即变量）类型，即数字、字符等。那么您可以在矩阵数据结构中表示它们。您可以使用“as.matrix”函数来做到这一点。

例如

```
mydataframe <- data.frame(a=c(1,2),b=c(2,3))    
mymatrix <- as.matrix(mydataframe) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-30T01:01:45.237

如果数据由 读取`read.csv`但实际上与 一致`matrix`，则`scan`首先使用，可能`skip=1`用于跳过标题行。

```
m = matrix(scan("file.csv", what=numeric(), skip=1), nrow=392) 
```

对于结构简单的数据，scan 比 read.csv 快得令人不安。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-29T22:19:47.433

的替代方法`as.matrix()`是`data.matrix()`，它的好处是在转换为矩阵时保留因子变量的数字（编码）信息。考虑：

```
d <- data.frame(1:10, letters[1:10])
as.matrix(d)
data.matrix(d)

> as.matrix(d)
      X1.10 letters.1.10.
 [1,] " 1"  "a"          
 [2,] " 2"  "b"          
 [3,] " 3"  "c"          
 [4,] " 4"  "d"          
 [5,] " 5"  "e"          
 [6,] " 6"  "f"          
 [7,] " 7"  "g"          
 [8,] " 8"  "h"          
 [9,] " 9"  "i"          
[10,] "10"  "j"          
> data.matrix(d)
      X1.10 letters.1.10.
 [1,]     1             1
 [2,]     2             2
 [3,]     3             3
 [4,]     4             4
 [5,]     5             5
 [6,]     6             6
 [7,]     7             7
 [8,]     8             8
 [9,]     9             9
[10,]    10            10 
```

请注意带有文本标签的因子的存在如何将整个矩阵呈现`as.matrix()`为字符矩阵，同时`data.matrix()`通过将因子标签替换为其内部数字代码来保留数据的数字性质。

# ruby-on-rails-3 - 观察者中的 simple_format

> ID：14593409
> 
> 赞同：0
> 
> 时间：2013-01-29T22:42:38.740
> 
> 标签：ruby-on-rails-3, helper, text-formatting, observers

在将一些通知逻辑外包给观察者时，我遇到了另一个问题。

是否可以在观察者内部使用 simple_format ？

我需要它来将来自数据库的文本和来自 I18n.t 的字符串转换成好看的电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:29:31.650

我自己找到了解决方案。只需在文件开头包含 TextHelper-Module 即可使用 simple_format 等帮助程序：

```
include ActionView::Helpers::TextHelper
class SystemmailerObserver < ActiveRecord::Observer
  [...]
end 
```

# git - 分支是管理同一项目的两个（或多个）版本的正确方法吗？

> ID：14593413
> 
> 赞同：1
> 
> 时间：2013-01-29T22:42:55.407
> 
> 标签：git, github

我很好奇 git 是否会执行以下操作。

我有一个已提交的项目，其中包含 Mt.Rushmore 的 JPG a、b、c。

我现在创建项目的一个新分支 (2) 并将文件 a、b、c 替换为具有相同名称但属于黄石公园的新文件并提交。

我的意图是让两个项目相互独立，即使它们本质上是相同的（除了与每个项目相关联的创意 JPG 文件之外，它们很可能永远不会改变）。

我是否正确假设在切换分支时我可以期望文件来回切换？如果是这样，当我在分支之间移动时，从 repo 中删除/下载相关文件的 git 特定命令是什么？

如果这不是处理这个问题的正确方法，那是什么？

具体来说，我有一个 Android 项目，其中 java 代码库可能永远不会改变，但布局将根据各种标准有不同的艺术，我不希望将它们分成两个单独的项目，因为它们具有相同的包名称和所有这一切，它会变得非常混乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:52:56.197

分支可能是管理此问题的好方法。

Git 将根据您所在的分支为您更改图像。前提是它们的名字相同。

你要做的就是：

```
git checkout <branch-name> 
```

如果底层封装相同，只是部分不同。我认为使用子模块会更好。

[http://git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)

这样，当您对底层包进行更改时，将更容易在两个项目之间共享该共同更改。不必解析您正在进行的布局更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T22:59:02.097

您需要的工作流程如下所示：

```
$ git checkout -b rushmore
$ git add a.jpg b.jpg c.jpg
$ git commit -m "Mt.Rushmore"

$ git checkout -b yellowstone"
$ git add a.jpg b.jpg c.jpg  //modified files
$ git commit -m "Yellowstone Park" 
```

到目前为止，您已经拥有`rushmore`包含 Mt.Rushmore 照片的`yellowstone`分支和用黄石公园照片覆盖这些照片的分支。您可以随时使用`checkout -b rushmore`来回切换。

此解决方案有一个缺点：如果您对分支进行了一些其他更改`rushmore`，您可以将它们合并到`yellowstone`分支，只需说：

```
$ git checkout yellowstone
$ git merge rushmore 
```

然而，反向操作将失败，因为黄石照片将覆盖拉什莫尔山。因此，我相信更好的方法是将这些照片外部化或将两组照片提交到单独的目录中。只有一个分支，在运行时（可能使用一些配置选项）决定应该使用哪个照片集。

# html - 如何用css斜切

> ID：14593415
> 
> 赞同：118
> 
> 时间：2013-01-29T22:43:05.543
> 
> 标签：html, css, image, strikethrough

我需要这样的东西： ![](../Images/46f5ce24dee2afc3ed44c89794017cd2.png)

如何用css实现这一点？我知道一种方法是使用背景图片，但我只能用没有任何图片的 css 来实现吗？

* * *

## 回答 #1

> 赞同：218
> 
> 时间：2013-01-29T22:51:52.517

有一个hacky方法可以做到这一点，使用`:before`伪元素。你给`:before`一个边框，然后用 CSS 变换旋转它。这样做不会向 DOM 添加额外的元素，添加/删除删除线就像添加/删除类一样简单。

[这是一个演示](http://jsbin.com/oqibus/1/)

### 注意事项

*   这只适用于 IE8。IE7[不支持`:before`](http://caniuse.com/#feat=css-gencontent)，但是在支持但*不*`:before`支持 CSS 转换的浏览器中会优雅地降级。
*   旋转角度是固定的。如果文本较长，则该行不会触及文本的角落。请注意这一点。

### CSS

```
.strikethrough {
  position: relative;
}
.strikethrough:before {
  position: absolute;
  content: "";
  left: 0;
  top: 50%;
  right: 0;
  border-top: 1px solid;
  border-color: inherit;

  -webkit-transform:rotate(-5deg);
  -moz-transform:rotate(-5deg);
  -ms-transform:rotate(-5deg);
  -o-transform:rotate(-5deg);
  transform:rotate(-5deg);
} 
```

### HTML

```
<span class="strikethrough">Deleted text</span> 
```

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2016-11-09T02:11:43.840

您可以使用背景`linear-gradient`来`currentColor`避免硬编码字体颜色：

```
.strikediag {
  background: linear-gradient(to left top, transparent 47.75%, currentColor 49.5%, currentColor 50.5%, transparent 52.25%);
}
.withpadding {
  padding: 0 0.15em;
}
```

```
The value is <span class="strikediag">2x</span> 3x<br>
The number is <span class="strikediag">1234567890</span>.
<p>
The value is <span class="strikediag withpadding">2x</span>3x<br>
The number is <span class="strikediag withpadding">1234567890</span>.
```

如果您不需要元素完全内联，则可以使用伪元素将行放在元素顶部。这样可以通过更改伪元素的大小来调整角度：

```
.strikediag {
  display: inline-block;
  position: relative;
}
.strikediag::before {
  content: '';
  position: absolute;
  left: -0.1em;
  right: -0.1em;
  top: 0.38em;
  bottom: 0.38em;
  background: linear-gradient(to left top, transparent 45.5%, currentColor 47.5%, currentColor 52.5%, transparent 54.5%);
  pointer-events: none;
}
```

```
The value is <span class="strikediag">2x</span> 3x<br>
The number is <span class="strikediag">1234567890</span>.
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-29T22:53:27.773

```
del {
  position:relative;
  text-decoration:none;
}
del::after {
  content:"";
  position:absolute;
  top:50%; left:0; width:100%; height:1px; 
  background:black;
  transform:rotate(-7deg);
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-29T22:49:52.100

我认为您可能可以将旋转效果应用于水平规则。就像是：

```
<html>
  <body>
    <hr />
    123456
  </body>
</html> 
```

使用 CSS：

```
hr
{
  width: 50px;
  position: absolute;
  background-color: #000000;
  color: #000000;
  border-color: #000000;
  transform:rotate(-7deg);
  -ms-transform:rotate(-7deg);
  -moz-transform:rotate(-7deg);
  -webkit-transform:rotate(-7deg);
  -o-transform:rotate(-7deg);
} 
```

[小提琴](http://jsfiddle.net/jmQ9T/1/)

不过，您的里程可能会因浏览器和版本而异，所以我不确定我是否会诉诸于此。例如，您可能必须使用一些时髦的 VML 代码来支持旧版本的 IE。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-09-22T22:54:38.017

从上面增强 Bojangles 的答案：

```
.strike-diagonal-price {
position: relative;
background-color: black;
color: white;
}
.strike-diagonal-price:before {
position: absolute;
content: "";
left: 0;
top: 45%;
right: 0;
border-top: 2px solid;
border-color: red;
-webkit-transform: rotate(-25deg);
-moz-transform: rotate(-25deg);
-ms-transform: rotate(-25deg);
-o-transform: rotate(-25deg);
transform: rotate(-25deg);
} 
```

现在我得到了我需要的效果： [![在此处输入图像描述](../Images/d71858e3d39db2f93acb4184489eb388.png)](https://i.stack.imgur.com/EJf42.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-29T23:00:54.377

CSS3渐变

```
background-image: linear-gradient(left bottom, rgb(234,20,136) 0%, rgb(255,46,164) 50%, rgb(255,74,197) 0%);
background-image: -o-linear-gradient(left bottom, rgb(234,20,136) 0%, rgb(255,46,164) 50%, rgb(255,74,197) 0%);
background-image: -moz-linear-gradient(left bottom, rgb(234,20,136) 0%, rgb(255,46,164) 50%, rgb(255,74,197) 0%);
background-image: -webkit-linear-gradient(left bottom, rgb(234,20,136) 0%, rgb(255,46,164) 50%, rgb(255,74,197) 0%);
background-image: -ms-linear-gradient(left bottom, rgb(234,20,136) 0%, rgb(255,46,164) 50%, rgb(255,74,197) 0%);

background-image: -webkit-gradient( linear, left bottom,right top,color-stop(0, rgb(234,20,136)), color-stop(0.5, rgb(255,46,164)), color-stop(0, rgb(255,74,197)) ); 
```

我的示例无法完美满足您的需求，但有关更多信息和有趣的调整，请参阅[http://gradients.glrzad.com/](http://gradients.glrzad.com/)。

你所要做的就是创建一个`background-gradient`of`white-black-white`并将你的位置`opacity`放在类似`48% 50% 52%`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-29T22:55:41.053

我认为没有可持续的 CSS 解决方案。

我的纯 CSS 解决方案是在第一个文本元素后面放置另一个文本元素，该元素的字符数相同（字符为 ''）、换行的文本解密和旋转的变换。

就像是：

```
<html>
  <head>
    <style>
      .strike{
       text-decoration: line-through;
      -webkit-transform: rotate(344deg);
      -moz-transform: rotate(344deg);
      -o-transform: rotate(344deg);}
    </style>
  </head>
  <body>
    <p>Text to display</p>
    <p class='strike'></p>
  </body>
</html> 
```

[文本旋转示例](http://www.css3maker.com/text-rotation.html)

我期待看到其他用户提供更好的答案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-11-13T10:39:58.230

这是一个老问题，但作为替代方案，您可以使用 CSS3 线性渐变，例如 ( [http://codepen.io/yusuf-azer/pen/ojJLoG](http://codepen.io/yusuf-azer/pen/ojJLoG) )。

对于广泛的解释和较少的解决方案检查

[http://www.yusufazer.com/tutorials-how-to/how-to-make-a-diagonal-line-through-with-css3/](http://www.yusufazer.com/tutorials-how-to/how-to-make-a-diagonal-line-through-with-css3/)

```
span.price--line-through {
  background-color: transparent;
  background-image: -webkit-gradient(linear, 19.1% -7.9%, 81% 107.9%, color-stop(0, #fff), color-stop(.475, #fff), color-stop(.5, #000), color-stop(.515, #fff), color-stop(1, #fff));
  background-image: -webkit-repeating-linear-gradient(287deg, #fff 0%, #fff 47.5%, #000 50%, #fff 51.5%, #fff 100%);
  background-image: repeating-linear-gradient(163deg, #fff 0%, #fff 47.5%, #000 50%, #fff 51.5%, #fff 100%);
  background-image: -ms-repeating-linear-gradient(287deg, #fff 0%, #fff 47.5%, #000 50%, #fff 51.5%, #fff 100%);
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-04-26T01:21:24.517

我在 HTM 中使用带有 CSS 类的 SVG 来做到这一点：

HTML：

```
<ul>
<li>Regular Price: <div class="zIndex-10a">$4.50</div><div class="zIndex-10b"><svg height="16" width="5"><line x1="0" y1="20" x2="40" y2="0" class="Strike-01a"></svg></div></li>
</ul> 
```

CSS：

```
/* -- CONTAINS TEXT TO STRIKE ---- */ .zIndex-10a { display: inline-block; position: relative;  left:  0px; z-index: 10; }
/* -- CONTAINS SVG LINE IN HTML -- */ .zIndex-10b { display: inline-block; position: relative; right: 40px; z-index: 11; }
/* -- SVG STROKE PROPERTIES ------ */ .Strike-01a { stroke: rgb(255,0,0); stroke-width:2; } 
```

现在可能有更简单的方法。我只是在紧要关头为我的产品详细信息特价页面做了这个。希望它可以帮助某人。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-04-14T16:44:24.743

尝试

```
.mydiv {
    background-color: #990000;
    color: #FFFF00;
    font-size: 2em;
    padding-top: 10px;
    padding-bottom: 10px;
    border-radius: 15px;
    max-width: 300px;
    width: 100%;
}
.strikethrough-100p, .strikethrough-50p{
  position: relative;
 text-align: center;
}
.strikethrough-100p:before {
  position: absolute;
  content: "";
  left: 0;
  top: 50%;
  right: 0;
  border-top: 3px solid;
  border-color: inherit;

  -webkit-transform:rotate(-5deg);
  -moz-transform:rotate(-5deg);
  -ms-transform:rotate(-5deg);
  -o-transform:rotate(-5deg);
  transform:rotate(-5deg);
}
.strikethrough-50p:before {
  position: absolute;
  content: "";
  width:50%;
  left: 25%;
  top: 50%;
  right: 0;
  border-top: 3px solid;
  border-color: inherit;

  -webkit-transform:rotate(-5deg);
  -moz-transform:rotate(-5deg);
  -ms-transform:rotate(-5deg);
  -o-transform:rotate(-5deg);
  transform:rotate(-5deg);
}
```

```
<div class="mydiv">
<div class="strikethrough-100p">123456</div>
</div>
<br>
<div class="mydiv">
<div class="strikethrough-50p">123456</div>
</div>
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2014-07-09T08:46:46.843

这是一个花哨的版本：

```
background:none repeat scroll 0 0 rgba(255, 0, 0, 0.5);
-moz-border-radius:20px 0;
-webkit-border-radius:20px 0;
border-radius:20px 0;
content: "";
height:5px; left:-5%;
position:absolute;
top:30%;
-moz-transform:rotate(-7deg);
-webkit-transform:rotate(-7deg);
transform:rotate(-7deg);
transform-origin:50% 50% 0;
width:110%; 
```

# javascript - 重定向然后提醒

> ID：14593419
> 
> 赞同：2
> 
> 时间：2013-01-29T22:43:12.937
> 
> 标签：javascript, codeigniter, redirect

我正在处理一些事情，当函数成功时，我想重定向到另一个页面并显示警报“函数成功”。

我正在使用 CodeIgniter、Javascript 和 Bootstrap

任何想法将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:50:19.503

一旦页面 X 重定向到页面 Y，页面 X 将不再打开，因此无法再发出警报。您的选择包括：

*   不要重定向。（相反，您可以将页面 Y 放在`iframe`; 中，或者，只需提供指向它的链接，让用户决定是否点击。）
*   不要警觉。
*   重定向*前*提醒。（这基本上是一样的。无论如何，用户在关闭警报之前无法与页面 Y 进行交互，因此无论警报是在它之前还是重定向之后还是之后都没有关系。）
*   让 Y 页发出警报。例如，页面 X 可以重定向到`http://example.com/path/to/Y/?alert=Function+successful`，您可以设计页面 Y 来检测查询字符串并发出警报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T22:50:07.200

当函数成功时，重定向并使用新页面的body onload事件。使用基于另一个 SO 答案的查询字符串提取：

```
if (success)
{
window.location("anotherpage.html?myparm=alertMe");
} 
```

...

另一个页面.html

```
<body onload="bodyLoad();">
...
</body>

<script type="text/javascript">
function bodyLoad()
{
  parmValue = getParameterByName("myparm");
  if(parmValue == 'alertMe')
  {
    alert('Function successful');
  }
}

//http://stackoverflow.com/questions/901115/how-can-i-get-query-string-values
function getParameterByName(name) {
    var match = RegExp('[?&]' + name + '=([^&]*)').exec(window.location.search);
    return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
}
</script> 
```

# c# - 按 itemtemlate 中的多个项目排序

> ID：14593420
> 
> 赞同：2
> 
> 时间：2013-01-29T22:43:14.813
> 
> 标签：c#, wpf, sorting, wpfdatagrid

全部，

我有以下课程

```
public class MyCoolClass
{
    public string Field1{ get; set; }
    public int? Field2{ get; set; }
} 
```

我还有一堂课

```
public class MyOtherClass
{
    ///a bunch of neat properties
    public MyCoolClass CoolClass { get; set; }
} 
```

我有一个绑定到的 MyOtherClass 集合：C#：

```
public ObservableCollection<MyOtherClass> MyCoolDataSource { get; } 
```

XAML：

```
<GroupBox DataContext="{Binding Path=MyCoolDataSource, UpdateSourceTrigger=PropertyChanged}" Header="Test DataGrid">
    <DataGrid ItemsSource="{Binding}" AutoGenerateColumns="False">
        <DataGrid.Columns>
            <!--A bunch of neat fields-->
            <DataGridComboBoxColumn Header="CoolClass" SelectedItem={"Binding Path=CoolClass, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}">
                <DataGridComboBoxColumn.ItemTemplate>
                    <!--DataTemplate that shows all properties of MyCoolClass-->
                </DataGridComboBoxColumn.ItemTemplate>
            </DataGridComboBoxColumn>
        </DataGrid.Columns>
    </DataGrid>
</GroupBox> 
```

现在，我的问题是，假设我想要按某个字段排序的选项（使用 .Net 4.0）。在 WPF 中，这没有问题，我们只使用 SortMemberPath。但是，假设我想按 MyCoolClass 中的所有字段对 DataGrid 中的 CoolClass 列进行排序。这是否可以纯粹从 XAML 中完成，或者我是否坚持在 C# 中创建一个结合两个字段以进行排序的属性？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:00:51.070

您可以尝试使用 Linq。我已经用 List 替换了 ObservableCollection，但是逻辑应该是一样的..

```
List<MyOtherClass> MyCoolDataSource = new List<MyOtherClass>();

MyCoolDataSource.Add(new MyOtherClass { CoolClass = new MyCoolClass { Field1 = "Z", Field2 = 123 } });
MyCoolDataSource.Add(new MyOtherClass { CoolClass = new MyCoolClass { Field1 = "A", Field2 = 3 } });
MyCoolDataSource.Add(new MyOtherClass { CoolClass = new MyCoolClass { Field1 = "J", Field2 = 4 } });
MyCoolDataSource.Add(new MyOtherClass { CoolClass = new MyCoolClass { Field1 = "K" } });

var sortedByField1 = MyCoolDataSource.OrderBy(e => e.CoolClass.Field1).ToList();
var sortedByField2 = MyCoolDataSource.OrderBy(e => e.CoolClass.Field2).ToList();

//display
Console.WriteLine("Ordered by first filed");
sortedByField1.ForEach(e => {
    Console.WriteLine(string.Format("Field 1: {0}, Field 2: {1}", e.CoolClass.Field1, e.CoolClass.Field2));
});

Console.WriteLine("Ordered by second filed");
sortedByField2.ForEach(e => {
    Console.WriteLine(string.Format("Field 1: {0}, Field 2: {1}", e.CoolClass.Field1, e.CoolClass.Field2));
}); 
```

# python - 在 Python 中按分隔符分块列表

> ID：14593421
> 
> 赞同：0
> 
> 时间：2013-01-29T22:43:22.593
> 
> 标签：python, list, parsing, list-comprehension, list-manipulation

将以下形式的列表分块的当前方法是什么：`["record_a:", "x"*N, "record_b:", "y"*M, ...]`，即每个记录的开头由以“：”结尾的字符串表示的列表，并包括直到下一条记录的所有元素。所以下面的列表：

```
["record_a:", "a", "b", "record_b:", "1", "2", "3", "4"] 
```

将分为：

```
[["record_a", "a", "b"], ["record_b", "1", "2", "3", "4"]] 
```

列表包含任意数量的记录，并且每条记录包含任意数量的列表项（直到下一条记录开始或没有更多记录为止）。如何有效地完成此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T22:45:53.123

```
lst = ["record_a:", "a", "b", "record_b:", "1", "2", "3", "4"]
out = []
for x in lst:
    if x[-1] == ':':
        out.append([x])
    else:
        out[-1].append(x) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T22:46:44.673

使用生成器：

```
def chunkRecords(records):
    record = []
    for r in records:
        if r[-1] == ':':
            if record:
                yield record
            record = [r[:-1]]
        else:
            record.append(r)
    if record:
        yield record 
```

然后循环过去：

```
for record in chunkRecords(records):
    # record is a list 
```

或再次变成列表：

```
records = list(chunkRecords(records)) 
```

后者导致：

```
>>> records = ["record_a:", "a", "b", "record_b:", "1", "2", "3", "4"]
>>> records = list(chunkRecords(records))
>>> records
[['record_a', 'a', 'b'], ['record_b', '1', '2', '3', '4']] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T23:32:59.157

```
from itertools import groupby,izip,chain

l = ["record_a:", "a", "b", "record_b:", "1", "2", "3", "4"]

[list(chain([x[0][0].strip(':')], x[1])) for x in izip(*[(list(g) 
            for _,g in groupby(l,lambda x: x.endswith(':')))]*2)] 
```

出去：

```
[['record_a', 'a', 'b'], ['record_b', '1', '2', '3', '4']] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T23:20:58.303

好的，这是我下班后的疯狂 itertools 解决方案：

```
>>> from itertools import groupby, count
>>> d = ["record_a:", "a", "b", "record_b:", "1", "2", "3", "4"]
>>> groups = (list(g) for _, g in groupby(d, lambda x: x.endswith(":")))
>>> git = iter(groups)
>>> paired = ((next(git), next(git)) for _ in count())
>>> combined = [ [a[0][:-1]] + b for a,b in paired]
>>> 
>>> combined
[['record_a', 'a', 'b'], ['record_b', '1', '2', '3', '4']] 
```

（作为一个可以做的事情的例子，而不是作为我必须使用的一段代码。）

# image - KineticJS：获取图像数组 ID

> ID：14593423
> 
> 赞同：1
> 
> 时间：2013-01-29T22:43:38.577
> 
> 标签：image, html, canvas, draggable, kineticjs

这是问题所在：

我有一个画布，还有四个（将来会更多，但 4 个用于测试......无论如何，没关系）可以通过单击“弹出”到画布中的图像。

每个图像可以在画布中多次出现。

到目前为止，弹出工作正常，图像可拖动......但我无法添加一些调整大小或 zIndex 功能，因为我只能选择最后一个添加到画布的图像。

在理想的世界中，我想通过单击/拖动图像，将其放在画布顶部，然后“选择”它，以便我可以将调整大小功能连接到图像。

但是对于图像数组，我无法正确识别拖动的项目，也无法使用（或无法使用）选择器。

谢谢你。

编辑：一些代码

```
var imgCpt = 0;
var image = [];
function addDetails(img)    {
imgCpt++;

var imageObj = new Image();
imageObj.onload = function() {
image[imgCpt] = new Kinetic.Image({
x: 0,
y: 0,
image: imageObj,
draggable: true,
id:image[imgCpt]
});

image[imgCpt].setX((stage.getWidth()/2) - (image[imgCpt].getWidth()/2));   
image[imgCpt].setY((stage.getHeight()/2) - (image[imgCpt].getHeight()/2));

eval(image[imgCpt]).on('click', function() {
alert(eval(imgCpt));
});

layer.add(image[imgCpt]);
stage.add(layer);                           
};

imageObj.src = 'uploads/'+img;
} 
```

我已经尝试过不同的解决方案：多层，并作用于它而不是作用于图像，使用填充有图像而不是图像的形状，但它总是同样的问题：我无法获得相关元素的 id (而不是最后一个插入元素的 id)

此版本适用于数组，但我昨天尝试使用 eval(); 构建图像 id；没有更多的成功。

谢谢您的帮助

EDIT²：抱歉坚持，但我真的很高兴在这一点上得到一些帮助，即使我认为它与 JS 相关而不是纯 KineticJS 相关。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T22:59:25.263

好的伙计们，刚刚解决了问题：

```
eval("image["+imgCpt+"].on('click', function() {alert("+imgCpt+");});"); 
```

代替 ：

```
eval(image[imgCpt]).on('click', function() {
alert(eval(imgCpt));
}); 
```

现在是时候在点击背后设置一个真正的动作了。

感谢您的帮助 ;）

# c# - 实体框架按问题排序

> ID：14593426
> 
> 赞同：4
> 
> 时间：2013-01-29T22:43:54.873
> 
> 标签：c#, linq, entity-framework, exception-handling, sql-order-by

我正在尝试使用实体框架构建我的第一个 MVC 4 应用程序。我正在寻找的只是创建一个下拉列表，其中每个选项的值和文本设置为相同的值。

这有效，直到我投入`GroupBy()`.

创建.cshtml

```
@Html.DropDownList("CustomerName",(SelectList)ViewData["companies"]); 
```

票控制器.cs

```
ViewBag.companies = new SelectList(oc_db.company.Where(c => c.status == "ACTIVE")
                                                 .OrderBy(c => c.name_1)
                                                  .GroupBy(c=>c.name_1)
                                   , "name_1", "name_1"); 
```

这是我收到的错误：

> 数据绑定：'System.Data.Objects.ELinq.InitializerMetadata+Grouping`2[[System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089],[OpsTicketing.Models.company, OpsTicketing, Version= 1.0.0.0，Culture=neutral，PublicKeyToken=null]]' 不包含名为“name_1”的属性。

如果我不使用`GroupBy`查询，尽管有重复项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T04:01:06.047

`GroupBy`不会为您提供基础类型的枚举。它为您提供`IGrouping`对象的枚举，其中包含一个`Key`字段，该字段为您提供该组的键值，以及一个`IEnumerable`允许您迭代该组成员的接口。

如果您`name_1`只需要按顺序排列的唯一值列表，只需选择该字段并执行 a`Distinct`后跟`OrderBy`：

```
ViewBag.companies = new SelectList(oc_db.company.Where(c => c.status == "ACTIVE")
                                                .Select(c=> new {c.name_1})
                                                .Distinct()
                                                .OrderBy(c => c.name_1)
                                   , "name_1", "name_1"); 
```

请注意，您*可以*在没有 的情况下执行此操作`.Select()`，但您必须为您的`company`班级定义“平等”，这比本练习更麻烦。这就是为什么`Distinct`之前没有工作的原因——因为你没有定义是什么让两家公司与众不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T22:46:43.510

您必须在执行 GroupBy 之前解决查询，您可以通过调用`.ToList()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T22:49:39.817

使用 .Distinct() 怎么样？ [http://msdn.microsoft.com/en-us/library/bb348436.aspx](http://msdn.microsoft.com/en-us/library/bb348436.aspx)

如果这就是你所需要的，应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T22:48:42.157

您是否使用分组只是为了使列表与众不同？如果是这样，请尝试：

```
.Where(c => c.status == "ACTIVE")
.OrderBy(c => c.name_1)
.Distinct() 
```

# watir - 选择了下拉列表，但 watir 说已禁用

> ID：14593427
> 
> 赞同：3
> 
> 时间：2013-01-29T22:43:59.507
> 
> 标签：watir

我可以在下拉列表中设置一个选项，但随后我收到一条错误消息。我发现一个在线站点会返回相同的错误：

[http://www.100candles.com/floating_candles.htm](http://www.100candles.com/floating_candles.htm)

```
irb(main):124:0>  $ie = Watir::IE.attach(:url, /100candles/)
=> #<Watir::IE:0x..fd64f0146 url="http://www.100candles.com/t/Vessels?PN=1&SB=Updated" title="Vessels - 100 Candles">
irb(main):126:0> $ie.select_list(:name, "SB").flash
=> #<Watir::SelectList:0x4960ea5e located=true specifiers={:tag_name=>["select"], :name=>"SB"}>
irb(main):127:0> $ie.select_list(:name, "SB").select("Price")
Watir::Exception::ObjectDisabledException: object {:index=>0, :ole_object=>#<WIN32OLE:0x3759e58>} is disabled
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.4.0/lib/watir-classic/element.rb:329:in `assert_enabled'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.4.0/lib/watir-classic/element.rb:470:in `perform_action'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.4.0/lib/watir-classic/input_elements.rb:117:in `select'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.4.0/lib/watir-classic/input_elements.rb:46:in `each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.4.0/lib/watir-classic/input_elements.rb:46:in `block in select'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.4.0/lib/watir-classic/element.rb:472:in `perform_action'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.4.0/lib/watir-classic/input_elements.rb:41:in `select'
    from (irb):127
    from C:/Ruby193/bin/irb:12:in `<main>'
irb(main):128:0> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T03:40:02.803

**问题**

该选择适用于某些选项（前批量成本），但不适用于其他选项（前价格）。查看 SelectList#select 的 watir 代码：

```
def select(item)
  matching_options = []
  perform_action do
    matching_options = matching_items_in_select_list(:text, item) +
      matching_items_in_select_list(:label, item) +
      matching_items_in_select_list(:value, item)
    raise NoValueFoundException, "No option with :text, :label or :value of #{item.inspect} in this select element" if matching_options.empty?
    matching_options.each(&:select)
  end
  matching_options.first.text
end 
```

页面html：

```
<select id="SB" onchange="document.location='/floating_candles.htm?PN=1&amp;SB=' + this.value;" name="SB">
    <optgroup style="font-style: normal;" label="Please Choose">
    <option value="">-
    <option value="PieceCost">Bulk Cost
    <option value="Updated">New Arrivals
    <option value="Popularity">Popularity
    <option value="Price">Price
    <option selected="" value="Relevance">Relevance
    </option></optgroup>
</select> 
```

异常原因可见：

1.  在 SelectList#select 中，它收集与指定条件匹配的文本、标签或值的所有选项。对于“价格”（以及其他失败的选项），该选项被收集（即添加到matching_options）**两次**——一次用于文本匹配，一次用于值匹配。相反，有效的（例如批量成本）只匹配一次，因为它们的文本和值不同。
2.  SelectList#select 将选择每个匹配选项。在“价格”的情况下，这意味着两个选择。
3.  页面上的选择列表有一个刷新页面的 onchange 事件。在“价格”的情况下，选项的第一个选择有效（在观看脚本时可以看到）。但是，失败的是第二个选择。我假设在页面刷新时选择尝试，导致异常。

**解决方案**

解决方法是直接选择option元素。这可确保该选项仅被选中一次：

```
$ie.select_list(:name, "SB").option(:text => "Price").select 
```

# ios - 存折权利？

> ID：14593429
> 
> 赞同：5
> 
> 时间：2013-01-29T22:44:04.837
> 
> 标签：ios, passbook, entitlements, passslot

我正在使用 Passslot 服务在应用程序中执行 Passes。我将在 Provisioning Profile 中创建的 PassID 上传到 Pass 插槽。我还需要在 Xcode 中设置 Passbook 的权利吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T08:54:25.307

如果您的应用程序需要与用户 Passbook 中的通行证进行交互（例如读取、更新或删除），您需要向您的应用程序添加权利。如果您的应用只是向存折添加通行证，则不需要权利。[您可以在存折编程指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/PassKit_PG/Chapters/Apps.html)中找到更多信息

# apache - .htaccess 重定向热链接的 PDF 文件，在哪里没有单一规则

> ID：14593431
> 
> 赞同：1
> 
> 时间：2013-01-29T22:44:08.063
> 
> 标签：apache, .htaccess, mod-rewrite, redirect, hotlinking

我见过很多反盗链策略，但到目前为止，没有一个文件需要唯一的重定向。

我雇主的网站有 500 多个 PDF 文件，其中包含可打印纸工艺品的原始艺术品，她免费提供这些文件，通过广告获利。

我们试图阻止的是其他人只是简单地链接到我们的 .pdf 文件并让他们的用户访问我们的内容而不会看到我们的广告。目标是捕获这些外部链接并将它们重定向到链接到该文件的 .html 页面。

这与我读过的许多问题的不同之处在于，虽然我们希望让用户尽可能接近他们正在寻找的文件，但请求的 .pdf 文件名之间没有可计算的链接，并且他们应该登陆的.html。

到目前为止，鉴于我对 .htaccess 的了解，我想到的最好的想法是使用我能找到的最好的 mod_rewrite 反热链接策略将 /PDF/file.pdf 重命名为 /PDF/file.redirect 之类的东西，然后为每一个写一个单独的重定向规则，例如 /PDF/fall-leaves.redirect 到 /seasons.html 等等。

这个问题有更好的解决方案吗？

谢谢，约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:53:48.237

您可以使用 RewriteMap 而不是一堆规则。有关其工作原理的更多详细信息，请参阅[Apache 文档](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritemap)，但它基本上是一个查找表。

# php - 获得 POST 的价值

> ID：14593432
> 
> 赞同：0
> 
> 时间：2013-01-29T22:44:12.393
> 
> 标签：php, forms

我想通过点击按钮来获得价值。但它不起作用。这是我的代码：

玩家.php

（标题）

```
 <?php
kick_ban(@$_POST['submit']);
getMsg();
?> 
```

（形式）

```
<form method="POST" action="?go=players">
<input type="submit" name="kick" class="btn btn-warning" type="button" value="Wyrzuć" />
<input type="submit" name="ban" class="btn btn-danger" type="button" value="Zbanuj" />
<?php $idgracza = $sValue['playerid'] ?>
</form> 
```

函数_admin.php

```
function kick_ban($post) {
    require_once "../inc/SampRcon.class.php";
        $config = getData('../inc/config.php');
        $port = $config['port'];
        $adrip = $config['adresip'];
        $query2 = new SampRcon(''.$adrip.'', $port, "Modding1");
        if ($query2->connect()) {
        if(isset($_POST['kick'])){
        $query2->kick($idgracza);
        $_SESSION['success'] = 'Gracz o id '.$idgracza.' został pomyślnie wyrzucony z serwera.';
        }
        if(isset($_POST['ban'])){
        $query2->ban($idgracza);
        $_SESSION['success'] = 'Gracz o id '.$idgracza.' został pomyślnie zablokowany.';
        }
        }
        else
        {  
        $_SESSION['error'] = 'Błąd';
        }
        $query2->close(); // Close the connection 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:51:55.383

一个问题是这一行：

```
kick_ban(@$_POST['submit']); 
```

您只是将提交变量（实际上是未定义的）发送到函数。你想要的是这样的：

```
kick_ban($_POST); 
```

现在我并不是说这是一种很好的编码方式，但它会将整个 post 数组发送到您的函数中，以便您可以访问所有变量。

另一个问题是当您尝试访问 kick_ban 函数中的内容时：

```
$_POST['kick'] 
```

和

```
$_POST['ban'] 
```

应该：

```
$post['kick'] 
```

和

```
$post['ban'] 
```

原因是一旦将它们传递给 kick_ban 函数，数组的名称就会变成 $post 而不是 $_POST。

您需要一个隐藏的输入来将 $idgracza 添加到表单中：

```
<input type='hidden' name='idgracza' value = '".$sValue['playerid']."'> 
```

然后在您的 kick_ban 函数中访问它：`$post['idgracza']`

# objective-c - 应用程序在鼠标单击时调用方法。我怎样才能阻止它？

> ID：14593437
> 
> 赞同：0
> 
> 时间：2013-01-29T22:44:54.933
> 
> 标签：objective-c, xcode, method-call

所以我对 Xcode 和 Objective C 很陌生，我已经使用它大约 2 周了。我正在为 OSX 构建一个应用程序。应用程序中的一个窗口在底部有 5 个文本框、一些标签和一个提交按钮。提交按钮链接到关闭窗口、打开新窗口并将文本框的内容输出到新窗口的一个文本字段中的方法。

我让它正常工作，但现在当我做任何事情时，除了单击顶部文本字段之外，提交方法被调用并且窗口关闭。我可以单击窗口中的黑色空间，但单击任何对象都会调用该方法。此外，按 Tab 会调用该方法。我不确定我什么时候导致了这个错误，但任何见解或提示都会非常有用。

抱歉，如果这含糊不清，我什至不知道如何描述这个问题。如果您需要任何具体信息，请询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:02:45.480

尝试在 Interface Builder 中查找。Ctrl 单击或右键单击响应调用该函数的每个字段。查看它们是否链接到函数。

还要检查前面建议的“响应者”。您也可以通过右键单击或 ctrl 单击标有“响应者”的红色响应者框来执行此操作。看看那里是否有任何东西映射到你的功能

# php - 为什么我在使用 codeigniter 时错误地在非对象上获取函数 get()？

> ID：14593440
> 
> 赞同：0
> 
> 时间：2013-01-29T22:45:16.783
> 
> 标签：php, codeigniter

index_model.php 如下：

```
<?php
class index_model extends CI_Model {

    function __construct() {
        parent::__construct();
    }

    function getVideo()
    {
        $query = $this->db->get('videolar');
        return $query->result_array();
    }

}
?> 
```

并且索引控制器也在下面

```
<?php

class index extends CI_Controller {

        function __construct() {
            parent::__construct();
        }

        function index()
    {
                $this->load->model('index_model');
                $data['video'] = $this->index_model->getVideo();
        $this->load->view('index',$data);
    }
}
?> 
```

当我调用索引控制器时，它会返回此错误

> 致命错误：在第 10 行的 /var/www/atlet/application/models/index_model.php 中的非对象上调用成员函数 get()

我在 autoload.php 中设置数据库。

> $autoload['packages'] = array('database');

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T22:50:40.613

您需要在[数组中](https://github.com/EllisLab/CodeIgniter/blob/develop/application/config/autoload.php#L70)[加载数据库`libraries`](https://github.com/EllisLab/CodeIgniter/blob/develop/application/config/autoload.php#L70)，而不是`packages`数组：

```
$autoload['libraries'] = array('database'); 
```

# python - 如何重新排序像素

> ID：14593441
> 
> 赞同：6
> 
> 时间：2013-01-29T22:45:21.387
> 
> 标签：python, image-processing

我在谷歌上搜索过，但找不到任何东西。

我想创建一个可以导入图像、更改像素顺序和保存输出图像的 Python 脚本。

我经常使用 Python，但只使用内置库。因此，如果我必须使用新命令，请尽可能多地描述它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-29T23:27:42.587

```
import sys
import random
from PIL import Image

BLOCKLEN = 64 # Adjust and be careful here.

img = Image.open(sys.argv[1])
width, height = img.size

xblock = width / BLOCKLEN
yblock = height / BLOCKLEN
blockmap = [(xb*BLOCKLEN, yb*BLOCKLEN, (xb+1)*BLOCKLEN, (yb+1)*BLOCKLEN)
        for xb in xrange(xblock) for yb in xrange(yblock)]

shuffle = list(blockmap)
random.shuffle(shuffle)

result = Image.new(img.mode, (width, height))
for box, sbox in zip(blockmap, shuffle):
    c = img.crop(sbox)
    result.paste(c, box)
result.save(sys.argv[2]) 
```

示例输入, `BLOCKLEN = 1`, `BLOCKLEN = 64`, `BLOCKLEN = 128`:

![在此处输入图像描述](../Images/f5a1adb954a9ab212c5a1fe96bbc9133.png) ![在此处输入图像描述](../Images/fdb05746fb7efd32ef8c1593330cd06e.png) ![在此处输入图像描述](../Images/8f7677b61d08d4abe0aba0460793adc3.png) ![在此处输入图像描述](../Images/de9051381ba6a044e1f637ede62a2dde.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T22:50:13.590

您应该查找 PIL 库[链接](http://www.pythonware.com/products/pil/)

# ms-access - 拆分数据库：查询位于何处以及如何查看 SQL？

> ID：14593443
> 
> 赞同：1
> 
> 时间：2013-01-29T22:45:36.613
> 
> 标签：ms-access, vba, ms-access-2007

我正在将基于 Access + VB 的应用程序重新开发为 C# 和 SQL 服务器。我正在使用 Access 数据库的拆分版本。在设计视图中的前端文件中，我看到类似这样的代码，用于某些事件例程从查询中查找值：

`DLookup("someField", "someQuery")`

这可能很简单，但我找不到“someQuery”和一般查询的位置以及如何查看它们。它们没有出现在后端文件中，我看不到如何在前端文件中列出它们。我没有任何运气在网上搜索，[这](http://office.microsoft.com/en-au/access-help/split-an-access-database-HA010342026.aspx)表明它们位于前端文件中。如何查看这些查询的 SQL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:02:49.807

由于您无法打开导航窗格，您可以创建一个新的数据库文件并将前端的查询导入新数据库（请参阅外部数据功能区的导入部分）。如果没有链接表，这些查询将不起作用，但这种努力将使您能够识别存在哪些查询，如果有帮助，您可以检查它们的 SQL。

您甚至可以创建指向后端表的链接，并从前端数据库导入您可能需要的任何其他内容。

# objective-c - 合并 CoreData SQL 文件

> ID：14593448
> 
> 赞同：1
> 
> 时间：2013-01-29T22:46:01.423
> 
> 标签：objective-c, core-data

我一直在努力解决这个问题很长一段时间，但仍然没有找到最有效的方法来处理它。以下是详细信息：

我有一个应用程序，它使用核心数据来存储应用程序要显示的内容。该应用程序以 SQLite 数据库的形式下载内容，并尝试将其与其本地版本合并。这是必要的，因为下载的内容通常需要与用户之前下载的内容相结合。

为了让事情变得更复杂，我还需要一种组合这些文件的方法，以便它们干净地下载（换句话说，核心数据文件中没有无关的关系或孤立的对象）。我已经为此构建了编辑器，但是我再次遇到了合并这些 sqlite 文件的问题。

如果存在的话，我想找到一种更好的方法来组合这些 sqlite 数据库。我已经看到您可以使用持久存储协调器添加许多不同的存储文件，但是将所有正确的存储协调到单个下载包中变得更加困难和危险。

问题是：使用多个 sql 存储并将它们变成一个方便的 .sqlite 文件或让它们无缝运行的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:00:01.183

首先，不要认为这是一个 SQLite 问题。这是一个核心数据问题。如果你在同一个段落中使用 Core Data 和 SQLite，你就已经输了。CD 确实（有时）使用 SQLite 作为其后备存储，但这些知识并不能帮助您解决这个问题。

当我不得不解决合并静态数据和用户生成数据的问题时，我通常使用两种不同的数据模型，在我控制的静态端有一个唯一的 ID。我以编程方式处理静态和实时数据之间的任何组合引用，因为用户数据与我的静态数据相比很小，所以效果很好。

您还可以调查获取的属性，这些属性允许您从不同的持久存储中获取值。

我认为将原始静态数据与更新的静态数据合并是错误的方法。这种操作在设备上需要很长时间。

你可以使用三个不同的持久化存储吗？第一个将与您的应用程序捆绑在一起，立即可用。第二个将是更新的数据，从服务器下载，将完全替代第一个。最后，您将拥有一个用户数据存储，通过获取的属性或您自己的唯一 ID 连接到主数据。

Core Data 也有可能是这个特定钉子的错误锤子。如果你有很多 SQLite 专业知识，并且如果你真的更喜欢使用 SQLite 而不是使用 Core Data，那就跳过 Core Data。在直接 SQLite 中完成整个事情。

# casperjs - 单击与选择器匹配的所有链接

> ID：14593449
> 
> 赞同：8
> 
> 时间：2013-01-29T22:46:02.143
> 
> 标签：casperjs

我有一个链接列表，我必须使用 CasperJS 模拟点击。他们都共享同一个班级。

但是，`this.click('.click-me')`只使用第一个链接上的点击。

点击所有链接的正确方法是什么？我在想也许我应该尝试通过获取链接数量，`evaluate()`然后使用`for`循环。但是，如果我使用`evaluate()`链接数量，我必须使用消息进行通信，这似乎很复杂。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-02-14T02:53:43.057

我最终使用 nth-child() 选择器来完成此操作。就是这样...

*页：*

```
<ul id="links">
  <li><a href="#1">1</a></li>  
  <li><a href="#2">2</a></li>  
  <li><a href="#3">3</a></li>  
</ul> 
```

*脚本：*

```
casper.then(function() {
  var i = 1;
  this.repeat(3, function() {
    this.click('#links li:nth-child(' + i + ') a');
    i++;
  });
}); 
```

您显然不必使用重复，但任何迭代技术都应该有效。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-04T22:23:09.863

正如 CasperJS ML 和记录所建议的那样，这里有一个可能的实现`clickWhileSelector`：

```
var casper = require('casper').create();

casper.clickWhileSelector = function(selector) {
    return this.then(function() {
        if (this.exists(selector)) {
            this.echo('found link: ' + this.getElementInfo(selector).tag);
            this.click(selector);
            return this.clickWhileSelector(selector);
        }
        return this.echo('Done.').exit();
    });
}

casper.start().then(function() {
    this.page.content =
        '<html><body>' +
        '<a href="#" onclick="this.parentNode.removeChild(this);return false;">link 1</a>' +
        '<a href="#" onclick="this.parentNode.removeChild(this);return false;">link 2</a>' +
        '<a href="#" onclick="this.parentNode.removeChild(this);return false;">link 3</a>' +
        '</body></html>';
});

casper.clickWhileSelector('a').run(); 
```

这给出了：

```
$ casperjs c.js
found link: <a href="#" onclick="this.parentNode.removeChild(this);return false;">link 1</a>
found link: <a href="#" onclick="this.parentNode.removeChild(this);return false;">link 2</a>
found link: <a href="#" onclick="this.parentNode.removeChild(this);return false;">link 3</a>
Done. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-08T21:58:15.083

混合其他响应，以避免无限循环（这对我有用，因为我的项目在标签内是连续的）：

```
casper.clickWhileSelector = function(selector, i) {
    return this.then(function() {
        i = i || 1;
        selectorNth = selector+':nth-child(' + i + ')';

        if (this.exists(selectorNth)) {
            this.echo('found link: '+this.getElementInfo(selectorNth).tag);
            this.click(selectorNth);
            return this.clickWhileSelector(selector, i+1);
        }
        return this.echo('Done.').exit();
    });
} 
```

希望能帮助到你！

路易斯。

# c# - 如何使用 NHibernate 将 Component 对象中的私有字段数据永久保存到 Entity 对象中？

> ID：14593452
> 
> 赞同：0
> 
> 时间：2013-01-29T22:46:16.783
> 
> 标签：c#, .net, fluent-nhibernate, mapping

假设我们有一个**Entity**类，它有许多字段和方法，但也有一个**Component**对象。出于任意原因，我们将组件数据封装在一个单独的类中。

```
 public class Entity
    {
            //...other stuff

            public virtual Component Component { get; protected set; }

            //...other stuff
    } 
```

假设我们的**组件**有很多职责，但只有 3 个字段都是**私有字段**。我们出于任意原因将这些字段保密。

```
 public class Component
    {
         //...other stuff

         private string fieldName1 { get; set; }
         private string fieldName2 { get; set; }
         private string fieldName3 { get; set; }

         //...other stuff
    } 
```

现在，假设我们的实体对应于数据库中的一个表。我们希望该表在组件上的每个字段都有一个列。我们分别称它们为“columnName1”、“columnName2”和“columnName3”。

问题是： **我们如何使用 Fluent NHibernate 来永久保存属于实体（与数据库中的表相对应）的组件对象的私有字段数据？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:46:16.783

您可以像这样覆盖实体的自动映射：

```
using FluentNHibernate.Automapping.Alterations;

public class EntityOverride : IAutoMappingOverride<Entity>
{
    public void Override(AutoMapping<Entity> mapping)
    {
         mapping.Component(x => x.Component, c => 
         {
               c.Map(Reveal.Member<Component>("fieldName1"),"columnName1");
               c.Map(Reveal.Member<Component>("fieldName2"),"columnName2");
               c.Map(Reveal.Member<Component>("fieldName3"),"columnName3");
         });
    }
} 
```

# asp.net - 使用 asp .net 读取 HTML 资源文件

> ID：14593457
> 
> 赞同：0
> 
> 时间：2013-01-29T22:46:36.090
> 
> 标签：asp.net, c#-4.0

我正在尝试编写一个将基于 HTML 模板生成电子邮件的 Windows 服务。我希望我的 HTML 模板作为资源包含在我的项目中。我是否已将这些模板文件作为使用文件流读取，或者是否有内置的 C# 函数将这些文件作为资源读取。

有没有更好的方法使用 HTML 文件作为模板在 asp .net 中生成电子邮件

谢谢 SCS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:50:56.677

您只需要创建资源文件（.resx），然后以 key/value 的方式填写它，例如 key = "email_template", value = "your html template"。之后，您将拥有名为 email_template 的字段的类，它将为您提供您的 html 模板，而无需任何额外的编码。

* * *

**UPD**

O，您也可以像 asp.net 用户控件 (*.ascx) 一样保存您的模板，然后使用[本文中描述的技术将其渲染为字符串](http://www.jonkragh.com/index.php/rendering-an-asp-net-usercontrol-to-a-string/)

在 MVC 世界中可能存在相同的变体。可以这样[做](https://stackoverflow.com/questions/483091/render-a-view-as-a-string)

# android - 如何获取 Android FragmentPagerAdapter 的片段引用

> ID：14593464
> 
> 赞同：2
> 
> 时间：2013-01-29T22:46:59.630
> 
> 标签：android, android-fragments, android-activity, fragmentpageradapter

我正在使用带有 FragmentPagerAdapter 的 ViewPager 以允许在 2 个片段之间滑动。我没有使用 FragmentStatePagerAdapter，因为它在它们之间滑动时会破坏并重新创建新的片段实例，并且我不希望其中一个片段中的操作执行多次）。我需要一种方法来获取对 2 个创建的片段的引用以传递给 FragmentPagerAdapter，但以下代码会产生错误（见下文）：

```
public class MyActivity extends FragmentActivity {

    private ViewPager viewPager;
    private MyPagerAdapter pagerAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_layout);
        initViewPager();
    }

    private void initViewPager() {
        List<Fragment> fragments = new ArrayList<Fragment>();
        FragmentManager fragManager = getSupportFragmentManager();
        fragments.add(fragManager.findFragmentById(R.id.fragment_1));
        fragments.add(fragManager.findFragmentById(R.id.fragment_2));
        pagerAdapter = new MyPagerAdapter(fragManager, fragments);
        viewPager = (ViewPager) findViewById(R.id.fragment_pager);
        viewPager.setAdapter(pagerAdapter);
    }
    ...
    ...
    private class MyPagerAdapter extends FragmentPagerAdapter {

        private List<Fragment> fragments;

        public MyPagerAdapter(FragmentManager fragmentManager, List<Fragment> fragments) {
                super(fragmentManager);
                this.fragments = fragments;
        }

        @Override
        public Fragment getItem(int position) {
            return fragments.get(position);
        }
        ...
        ... 
```

这会产生以下错误（或类似错误）：

```
java.lang.IllegalStateException: Can't change container ID of fragment Fragment1{4169f780 #1 id=0x7f0b0005 android:switcher:2131427331:0}: was 2131427333 now 2131427331 
```

有人可以帮我吗？

***编辑***
我也尝试了以下方法，但它恰好将每个片段实例化两次（可以理解），这是我不想要的。除此之外，它适用于以下代码：

```
private void initViewPager() {

    List<Fragment> fragments = new Vector<Fragment>();
    fragments.add(Fragment.instantiate(this, Fragment1.class.getName()));
    fragments.add(Fragment.instantiate(this, Fragment2.class.getName()));
    pagerAdapter = new MyPagerAdapter(getSupportFragmentManager(), fragments);
    viewPager = (ViewPager) findViewById(R.id.fragment_pager);
    viewPager.setAdapter(pagerAdapter);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:09:02.567

这是一个[非常清晰的教程，其中](http://thepseudocoder.wordpress.com/2011/10/05/android-page-swiping-using-viewpager/)包含我用来构建 viewpager 布局的示例代码。

正如@harmanjd 似乎建议的那样，您不要将片段放在带有 viewpager 布局的 XML 文件中。在自己的 XML 和/或 Java 类中定义每一个，像上面那样实例化那些（`fragments.add(Fragment.instantiate(this, CustomFragment.class.getName()))`用于自定义类），将它们放入并将其`pagerAdapter`提供给`ViewPager`.

您`ViewPager`的 XML 应该看起来像这样（除非它是除了片段之外更大布局的一部分）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ViewPager
    android:id="@+android:id/viewpager"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

</LinearLayout> 
```

# c# - NHibernate 类中的自定义数据类型

> ID：14593466
> 
> 赞同：1
> 
> 时间：2013-01-29T22:47:11.307
> 
> 标签：c#, nhibernate, nhibernate-mapping

我在 NHibernate 中有一个类，我希望将属性映射到自定义数据类型。

NHibernate 类看起来像这样

```
namespace Example1.Models
{
    public class Calendar
    {
        public virtual int ID { get; set; }

        public virtual string Workspace { get; set; }
    }
} 
```

带有映射文件

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" auto-import="true">
  <class name="Example1.Models.Calendar, Example1" lazy="true" table="Calendar">
    <id name="ID">
      <generator class="native" />
    </id>
    <property name="Workspace" />
  </class>
</hibernate-mapping> 
```

Workspace 属性中的工作区如下所示

```
http://site/Morning%20meeting?InstanceID=1, Morning meeting 
```

我可以使用 Uri 类将其映射为 URL，但在某些情况下，我还需要将标题与字符串一起提供

```
public class Calendar
{
    public virtual int ID { get; set; }

    private Uri _workspace;
    public virtual Uri Workspace
    {
        get { return _workspace; }
        set
        {
            if (value != null)
            {
                var workspace = value.ToString().Split(new[] { ',' });
                _workspace = new Uri(workspace[0]);
            }
        }
    }
} 
```

例如，我尝试创建一个自定义类并将工作区类型添加到该类

```
private Workspace _workspace;
public virtual Workspace Workspace
{
    get { return _workspace; }
    set { _workspace = new Workspace(value.ToString()); }
}

...

public class Workspace
{
    public Uri Uri { get; set; }
    public string Title { get; set; }

    public Workspace(string workspace)
    {
        if(string.IsNullOrEmpty(workspace))
            return;

        var workspaceArray = workspace.Split(new[] { ',' });

        if (workspaceArray.Length > 0)
            Uri = new Uri(workspaceArray[0]);

        if (workspaceArray.Length > 1)
            Title = workspaceArray[1];

    }
} 
```

这将呈现错误

```
Could not determine type for:Example1.Models.Workspace, Example1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null, for columns: NHibernate.Mapping.Column(Workspace) 
```

实施此类自定义的推荐方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T23:12:53.137

通过实现 IUserType 解决了

此代码仍在进行中，但确实有效

NHibernate 类中的属性

```
private Workspace _workspace;
public virtual Workspace Workspace
{
    get { return _workspace; }
    set
    {
        if (value != null)
        {
            _workspace = value;
        }
    }
} 
```

hbm 文件中的属性

```
<property name="Workspace" type="Example1.Models.WorkspaceType, Example1" /> 
```

和 IUserType 实现

```
public interface IWorkspace
{
    Uri Uri { get; set; }
    string Title { get; set; }
}

public class Workspace : IWorkspace
{
    #region Implementation of IWorkspace

    public Uri Uri { get; set; }
    public string Title { get; set; }

    #endregion

    public Workspace(string workspace)
    {
        if (string.IsNullOrEmpty(workspace))
            return;

        var workspaceArray = workspace.Split(new[] { ',' });

        if (workspaceArray.Length > 0)
            Uri = new Uri(workspaceArray[0]);

        if (workspaceArray.Length > 1)
            Title = workspaceArray[1];

    }
}

public class WorkspaceType : IUserType
{
    #region Implementation of IUserType

    public bool Equals(object x, object y)
    {
        if (x == null && y == null) return true;
        if (x == null || y == null) return false;
        return x.GetType() == y.GetType();
    }

    public int GetHashCode(object x)
    {
        return x.GetHashCode();
    }

    public object NullSafeGet(IDataReader rs, string[] names, object owner)
    {
        var property0 = NHibernateUtil.String.NullSafeGet(rs, names[0]);

        if (property0 == null)
        {
            return null;
        }

        Workspace workspace = new Workspace(property0.ToString());

        return workspace;
    }

    public void NullSafeSet(IDbCommand cmd, object value, int index)
    {
        if (value == null)
        {
            ((IDataParameter)cmd.Parameters[index]).Value = DBNull.Value;
        }
        else
        {
            var state = (IWorkspace)value;
            ((IDataParameter)cmd.Parameters[index]).Value = state.GetType().Name;
        }
    }

    public object DeepCopy(object value)
    {
        return value;
    }

    public object Replace(object original, object target, object owner)
    {
        return original;
    }

    public object Assemble(object cached, object owner)
    {
        return cached;
    }

    public object Disassemble(object value)
    {
        return value;
    }

    public SqlType[] SqlTypes { get { return new[] { NHibernateUtil.String.SqlType }; } }
    public Type ReturnedType { get { return typeof(Workspace); } }
    public bool IsMutable { get { return false; } }

    #endregion
} 
```

# web-scraping - 使用 pjscrape 抓取图像 src 属性

> ID：14593468
> 
> 赞同：1
> 
> 时间：2013-01-29T22:47:19.453
> 
> 标签：web-scraping, phantomjs, scraper

我在抓取图像的图像源时遇到了一些困难。我尝试了以下方法：

```
_pjs.getText('div#customerInfo table tr:nth-child(1) td:nth-child(7) img.attributes.src') 
```

也

```
_pjs.getText('div#customerInfo table tr:nth-child(1) td:nth-child(7) img[src]') 
```

但似乎没有任何效果。`getPattern`有没有办法使用或其他方式做到这一点？

我的代码如下：

```
 pjs.config({ 
    // options: 'stdout', 'file' (set in config.logFile) or 'none'
    log: 'stdout',
    // options: 'json' or 'csv'
    format: 'json',
    // options: 'stdout' or 'file' (set in config.outFile)
    //writer: 'stdout',
    writer: 'file',
    outFile: 'C:\\pjscrape\\pjscrape_out.txt'
});
pjs.addSuite({
    url: 'http://localhost:8080/multivu.portal.htm',
    scraper: function() {
        return [
           _pjs.getText('div#customerInfo table tr:nth-child(1) td:nth-child(2)'),
           _pjs.getText('div#customerInfo table tr:nth-child(1) td:nth-child(4)'),
           _pjs.getText('div#customerInfo table tr:nth-child(1) td:nth-child(7) img.attributes.src')
        ];
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-16T03:26:46.083

我使用了 jQuery，它似乎正在工作！我正在使用这个： $("div#customerInfo table tr:nth-child(1) td:nth-child(7) img").attr("src")

# jscience - JScience 格式化分数

> ID：14593470
> 
> 赞同：0
> 
> 时间：2013-01-29T22:47:32.710
> 
> 标签：jscience

有没有一种简单的方法将数字格式化为分数。

如果用户将“1/4in”输入到 INCH 单位值中，我希望看到“1/4”而不是 .25、1/3 而不是 .333333 等。

有点像某些选择值的别名。

这是我可以在 MeasureFormat 中全局执行的操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T17:47:38.917

`org.jscience.mathematics.number.Rational`您可以构造;的实例 它的实现`toText()`，由 调用`Number#toString()`，可能就是你所需要的。如果没有，`AmountFormat`可以在[此处](https://stackoverflow.com/a/8516237/230513)找到更多信息。

```
Rational a = Rational.valueOf(1, 4);
Rational b = Rational.valueOf(1, 3); 
```

# magento - 分析中的原始数据

> ID：14593476
> 
> 赞同：-1
> 
> 时间：2013-01-29T22:47:51.627
> 
> 标签：magento, google-analytics

我想在我的站点中单独保存数据。例如：访问者 1 在时间 x,y,z 访问了第 1 页、第 2 页、第 3 页。我如何在分析中获取这些数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:05:34.520

您无法在 GA 中查看单个访问者的数据（尝试这样做会违反 Google 的服务条款）。

您可以将跟踪调用重定向到您自己的服务器并编写脚本来解析访问者数据，请在此处查看我的回答：

[谷歌分析的数据库模式/数据库设计是什么样的？](https://stackoverflow.com/questions/13324676/what-would-database-schema-database-design-look-like-for-google-analytics/13363905#13363905)

（这些方法用于与 Urchin 分析软件兼容 - 由于放弃了对 Urchin 的支持，因此这些方法可能会在未来某个时候被放弃）。

# php - 更新数据库中的时间

> ID：14593478
> 
> 赞同：-1
> 
> 时间：2013-01-29T22:47:59.787
> 
> 标签：php, mysql

```
$update_Premium = mysql_query("UPDATE `Users` SET PremiumTill='$PremiumTill' WHERE `UserName` = '{$view}'");

$date = gmdate("d-m-Y G:i");
$PremiumTill = ($date + (30 * 24 * 60 * 60)); 
```

我想要它，所以当 $update_premium 启动时，它会更改数据库中的日期并将 30 天添加到日期中。

可以这样做吗？还是有另一种方法可以做到这一点？

请帮助，提前谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T22:49:39.520

有一种更简单的方法可以做到这一点：

```
UPDATE Users SET PremiumTill = DATE_ADD(PremiumTill, INTERVAL 30 DAY) WHERE ... 
```

# jquery - 如何让 Jquery 检查多个值？

> ID：14593480
> 
> 赞同：-2
> 
> 时间：2013-01-29T22:48:09.523
> 
> 标签：jquery, jquery-ui, javascript-events, javascript

下面的 Jquery 代码运行良好，可以根据条件检查输入值。但是对于 HTML 表单中的 ESNList 文本字段，可以在同一文本字段中输入许多 ESN（数字）并用逗号分隔，我该如何使 Jquery 确保在同一文本字段中输入的所有数字仍然符合 ESNList 的条件，非常感谢您的帮助..

```
 <html>
    <head>
    <script type="text/javascript" src="jquery/jquery-1.8.3.js"></script>
    <script type="text/javascript">

    $(function () {

    $(":text").css("border", "2px solid red");
      $(":text").keyup(function(){
        var enteredData = $(this).val()
        console.log(enteredData);
        if (enteredData == "") {
          $(this).css("border", "2px solid red");
        } else {
          $(this).css("border", "inherit");
        }
        if ($(this).attr("id") == "ESNList"){
          esnList = parseInt(enteredData);
          switch (true){
            case ( esnList >= 986329 && esnList <= 999999):
                $("#ddl_StxName").val("stx2");
                $("#ddl_rtumodel").val("globalstar");
                break;
            case ( esnList >= 660000 && esnList <= 699999):
                $("#ddl_StxName").val("mmt");
                $("#ddl_rtumodel").val("globalstar");
                break;
            case ( esnList >= 200000 && esnList <= 299999):
                $("#ddl_StxName").val("stm3");
                $("#ddl_rtumodel").val("stmcomtech");
                break;
            case ( esnList >= 1202114 && esnList <= 1299999):
                $("#ddl_StxName").val("smartone");
                $("#ddl_rtumodel").val("globalstar");
                break;
          }

        }
      });
      });
    </script> </head>
    <body>
    <form id="provision">
        ESNList:    <input  type="text" id="ESNList" name="ESNList" size="30" /> <br />
        ESN Start:<input type="text" id="ESNStart" name="ESNStart" size="10" /> <br />
        ESN End: <input type="text" id="ESNStart" name="ESNStart" size="10" /> <br />
        UnitName:<input type="text" id="STxName" name="STxName" size="30"  />  <br />  
         Unit Model:   <select name="STxName" id="ddl_StxName">
        <option value="stx2">STX2</option>
        <option value="stm3" selected>STM3</option>
        <option value="acutec">Acutec</option>
         <option value="trackpack">Trackpack</option>
        <option value="mmt">MMT</option>
        <option value="smartone">Smartone</option>
        <option value="smartoneb" >SmartOneB</option>
        </select> <br />
        RTU Model Type:
         <select name="rtumodel" id ="ddl_rtumodel">
        <option value="globalstar">GlobalStar</option>
        <option value="both">Both</option>
        <option value="comtech">Comtech</option>
        <option value="stmcomtech">STMComtech</option>
        </select> <br />
        <input type="submit" value ="submit"  />
        </form>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:54:58.113

您可以通过逗号分隔符拆分列表并验证每个单独的元素。

```
$.each(enteredData.split(","), function(i, str){
    var esnList = +str;
    /* enter validation here */
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T22:55:07.113

而不是`parseInt()`直接使用`enteredData`你会首先使用

```
esnList = enteredData.split(','); 
```

然后你可以用一个循环遍历那个数组，使用`parseInt()`和执行你的检查，或者像 Alexander 那样使用你最喜欢的 JS 库的 map 函数。

纯JS：

```
for(var i = 0; i < esnList.length; i++) {
    ... // parseInt(esnList[i]) and perform checks
} 
```

jQuery：

```
$.each(esnList, function(i, esn) {
    ... // parseInt(esn) and perform checks
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T22:55:51.287

期望用户在输入字段中提供干净、格式良好的数据是乐观的——即使有视觉说明。

在不涉及安全和卫生的情况下，假设用户已经输入了一个格式良好的逗号分隔列表：

```
153, 189, 635 
```

您将需要编写一个函数来获取输入元素的输入值，然后对变量执行 split()。这将为您提供一个数组，您可以循环该数组以根据您的条件检查值。

# c++ - 使用信号处理程序释放资源？

> ID：14593485
> 
> 赞同：0
> 
> 时间：2013-01-29T22:48:23.467
> 
> 标签：c++, valgrind

我写了一个套接字服务器。我意识到当我在它运行时按下 Ctrl-C 时，可能存在内存泄漏。我用 valgrind 找到了这个。

我的服务器代码很简单。基本上我创建了一个 Listener 对象，启动一个线程来接受连接并尝试加入该线程：

```
 try {
    Server::Listener listener(1234);

    boost::thread l(boost::bind(&Server::Listener::start, &listener));

    l.join();

} catch(exception& e) {
    cout<<e.what()<<endl;
} 
```

当我运行 valgrind 时，它给了我：

==3580== 命令：bin/Debug/p_rpc
==3580==
Listner 已启动...
在循环中..
^C==3580==
==3580== HEAP 摘要：
==3580== 在退出时使用: 24 个块中的 3,176 个字节
==3580== 总堆使用量：28 个分配，4 个释放，分配的 4,328 个字节
==3580==
==3580== 1 个块中的 288 个字节可能在 24 个丢失记录 21 中丢失
== 3580== 在 0x4C29E46：calloc（在 /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so）==3580==
由 0x4012084：_dl_allocate_tls（dl-tls.c:297）
==3580== 由 0x4E3AABC： pthread_create@@GLIBC_2.2.5 (allocatestack.c:571)
==3580== by 0x5260F9F: boost::thread::start_thread() (in
/usr/lib/libboost_thread.so.1.49.0) ==3580== by 0x407B93: boost::thread::thread, boost::_bi::list1 > > >(boost::_bi::bind_t, boost: :_bi::list1 > >&&) (thread.hpp:171)
==3580== by 0x404CA4: main (main.cpp:179)
==3580==
==3580== 泄漏总结：
==3580==肯定丢失：0 个块中的 0 个字节
==3580== 间接丢失：0 个块中的 0 个字节
==3580== 可能丢失：1 个块中的 288 个字节
==3580== 仍然可以访问：23 个块中的 2,888 个字节
==3580 == 抑制：0 个块中的 0 个字节
==3580== 未显示可达块（找到指针的块）。
==3580== 要查看它们，请重新运行： --leak-check=full --show-reachable=yes
==3580==
==3580== 对于检测到和抑制的错误计数，重新运行：-v
==3580== 错误摘要：1 个上下文中的 1 个错误（抑制：2 个中的 2 个）
已杀死

它指出可能丢失了 288 字节。我想我可以使用信号处理程序来释放这个资源。但我不知道我是怎么做到的。你能给我一个例子吗？

干杯，埃尔顿

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:52:01.860

当一个进程关闭时，操作系统会自动清理该进程拥有的所有内存。您无需担心程序退出时释放该内存。[该建筑正在拆除。不要费心扫地、清空垃圾桶和擦白板。并且不要在建筑物的出口排队，这样每个人都可以将他们的进/出磁铁移到外面。你所做的只是让拆迁队等你完成这些毫无意义的大扫除任务。](http://blogs.msdn.com/b/oldnewthing/archive/2012/01/05/10253268.aspx)

您*确实*需要担心的泄漏类型是在程序生命周期内不断泄漏的泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T23:02:08.740

原则上，您可以在那里销毁对象。您可以在信号处理程序中执行的操作受到限制，并且它们与线程的混合非常糟糕。请注意，在这方面编译器可以不做*（*或很少）检查，信号处理程序只是一个普通函数。要格外小心。

[这个问题](https://stackoverflow.com/questions/2485028/signal-handling-in-c)的答案提供了一些关于如何做到这一点的细节。

# ruby-on-rails - Ruby on Rails - 访问字段对象的关系数据库项

> ID：14593486
> 
> 赞同：0
> 
> 时间：2013-01-29T22:48:23.633
> 
> 标签：ruby-on-rails, relational-database, rails-activerecord

我在注册表之间有多对一的关系......

```
class Registry < ActiveRecord::Base
  has_many :user_registries
  attr_accessible :logo, :name
  has_attached_file :logo
end 
```

和 user_registries...

```
class UserRegistry < ActiveRecord::Base
    belongs_to :page
    has_one :registry
  attr_accessible :page_id, :registry_id, :url
end 
```

我正在尝试在表单中显示名称或徽标，如下所示：

```
.registry
  = debug f.object.registry.name
  .field
    = f.label :title
    = f.text_field :title
  .field
    = f.label :url
    = f.text_field :url
  .field
    = f.hidden_field :_destroy
    = link_to_function "remove", "remove_fields(this)" 
```

但我得到一个 SQL 错误，如下所示：

```
Mysql2::Error: Unknown column 'registries.user_registry_id' in 'where clause': SELECT  `registries`.* FROM `registries`  WHERE `registries`.`user_registry_id` = 14 LIMIT 1 
```

我的关系没有正确建立吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:52:19.203

我真的不认为这与关系有任何关系。您能否确保在“registries”表中有一个“user_registry_id”列，并且在您的情况下，我相信它应该被设置为外键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:42:01.967

我的关系实际上是不正确的。

```
class UserRegistry < ActiveRecord::Base
    belongs_to :page
    has_one :registry
    attr_accessible :page_id, :registry_id, :url
end 
```

外键在用户注册表中，所以我需要belongs_to 而不是has_one 关系，就像这样。

```
class UserRegistry < ActiveRecord::Base
    belongs_to :page
    belongs_to :registry
    attr_accessible :page_id, :registry_id, :url
end 
```

# java - R rjava noclassdeffound

> ID：14593487
> 
> 赞同：0
> 
> 时间：2013-01-29T22:48:36.823
> 
> 标签：java, windows, r, jvm, cran

我已经成功为 R 使用 xlsx 包已经有一段时间了。该软件包需要 rjava，并且自从最近的 Windows 更新以来，rjava 现在在 R 中引发错误。错误是：

```
require(xlsx) 
Loading required package: xlsx
Loading required package: xlsxjars
Loading required package: rJava
Error occurred during initialization of VM
java/lang/NoClassDefFoundError: java/lang/Object 
```

安装JVM并设置路径：

```
C:\Program Files\R\R-2.15.2\bin\x64>java -version
java version "1.7.0_09"
Java(TM) SE Runtime Environment (build 1.7.0_09-b05)
Java HotSpot(TM) 64-Bit Server VM (build 23.5-b02, mixed mode) 
```

它发生在 R 版本 2.15.0 和 2.15.2 中。

关于它可能是什么或修复的任何想法？

提前致谢。

# c++ - 指针大小和引用传递与指针传递

> ID：14593488
> 
> 赞同：0
> 
> 时间：2013-01-29T22:48:42.010
> 
> 标签：c++, c, pass-by-reference, sizeof, pass-by-pointer

我有两个问题：

1.  我说得对吗，在 4 位系统上，指针是 4 个字节？

2.  “通过引用传递”和“通过指针传递”是同一件事，只是措辞不同吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T22:52:32.463

> 我对吗，在 4 位系统上，指针大小是 4

如果您的系统有 1 位字节，那么肯定是。（但 C 不支持字节短于 8 位的平台。）

> “通过引用传递”和“通过指针传递”是同一件事，但措辞不同吗？

不，指针传递是一种模拟引用传递的 C 方法。[概念不同。](http://yosefk.com/c++fqa/ref.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T23:47:54.607

指针的大小不一定与 CPU 的本机字大小相关；例如，最初的 Macintosh 在只有 24 条地址线的 32 位处理器（摩托罗拉 68000）上运行，因此指针被限制为 24 位。指针值存储在一个 32 位字中，但没有使用前 8 位。一些有进取心的程序员使用这些前 8 位来存储其他数据和指针。当 68020 出现时，这引起了一些胃灼热，它有 32 个地址行。重写该代码以使其“32 位干净”需要一段时间。

另请注意，指向不同类型的指针不必具有相同的大小。

实际上，在任何现代桌面系统（阅读：x86）上，所有指针类型都是 32 位或 64 位宽。但不要依赖于所有架构都是如此。

至于“通过引用传递”和“通过指针传递”，不，它们不是同一概念的不同措辞。

在按引用传递的系统中，函数定义中的形参和函数调用中的*实**参*指定相同的内存（或者至少对其中一个的更改会反映在另一个中）。查看一些老式的 Fortran 代码：

```
C234567890
      PROGRAM CALLSW
      INTEGER M, N

      M = 1
      N = 2

      WRITE(*,*) M, N
      CALL ISWAP(M, N)
      WRITE(*,*) M, N

      STOP
      END

C234567890
      SUBROUTINE ISWAP(A, B)
      INTEGER A, B
      INTEGER TMP

      TMP = A
      A = B
      B = TMP

      RETURN
      END 
```

`A`in 中的形参指定内存中与主程序中`ISWAP`相同的对象，因此写入 to会更改 中的值。您可以将其视为指向（或两者都是指向同一对象的指针）的指针，但该语言对程序员隐藏了这种指针。 `M``A``M``A``M``A``M`

C 通过*值*传递一切；形参和实参总是在内存中指定不同的对象，所以写入一个不会影响另一个。当我们想在子程序中修改一个对象时，我们必须使用操作符显式地传递它的地址`&`，然后在子程序中用`*`操作符取消引用它：

```
void iswap(int *a, int *b)
{
  int tmp;

  tmp = *a;
  *a = *b;
  *b = tmp;
}

int main(void)
{
  int m, n;

  m = 1;
  n = 2;

  printf("m = %d, n = %d\n", m, n);
  iswap(&x, &y);
  printf("m = %d, n = %d\n", m, n);

  return 0;
} 
```

我们没有传递`m`and `n`，而是传递*表达式*`iswap`的结果and ，它们是指向两个对象的指针。同样，在函数中，我们不写入or ，我们写入*表达式*and的结果。 并引用内存中两个完全不同的对象，如 do和. 写入不会有任何影响。 *`&m``&n``iswap``a``b` *`*a``*b``a``m``b``n``a``m`**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T00:48:21.520

关于 C 中的参数传递，[维基百科关于 C 的条目](http://en.wikipedia.org/wiki/C_%28programming_language%29)指出：

> 函数参数总是按值传递。通过显式传递指针值在 C 中模拟传递引用。**

# c++ - 转换/映射方法最佳实践

> ID：14593503
> 
> 赞同：0
> 
> 时间：2013-01-29T22:49:38.803
> 
> 标签：c++, design-patterns

假设有两个 C++ 类 CDataProvider 和 CDbWrapper 如下：

```
Class CDataProvider {
public:
    void setData(MyDataType);
    void getData(MyDataType&);
    // ... snip ...
private:
   MyDataType d; // cached data
   CDbWrapper db;
   convertMyTypeToMyDbType(MyDataType, MyDbDataType&);
   convertMyDbTypeToMyType(MyDbDataType, MyDataType&);

};

Class CDbWrapper {
public:
    bool getFromDb(MyDbDataType&); 
    bool setToDb(MyDbDataType);
    // ... snip ...
}; 
```

在`CDataProvider::setData`我们将首先将数据转换为数据库可以理解的格式并存储它。

我的问题是，在数据提供者中存在这样的转换方法是否有意义，以便能够解耦两个类并且不必共享相同的类型。请注意，实际上，数据更复杂，因此在不干净的类之间共享标头中的数据类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:30:30.350

**已知的解决方案**

通过查看已经存在的设计模式列表（例如：维基百科），没有任何与此问题直接相关的内容。在这种情况下，最好的解决方案是尝试使用已知的设计模式来解决问题。

*包装器*

Adapter/Wrapper 模式可以很好地解决这个问题。这里不同的类型只是包装了原始类型。

**其他解决方案**

复制和粘贴？**:)**

# java - Android - ping 桌面时出错

> ID：14593512
> 
> 赞同：0
> 
> 时间：2013-01-29T22:49:50.177
> 
> 标签：java, android, ip, ping

好吧，在我尝试制作一些应用程序时，我收到了这个错误：

使用此代码：

```
String host = "192.168.0.137";
if (InetAddress.getByName(host).isReachable(4000)) {                            
    Log.i("Host",host + " is reachable");                            
}else{
    Log.i("Host",host + " is not reachable");                            
} 
```

我尝试 ping 我的桌面 IP 192.168.0.137，但得到的答案是无法访问。当我 ping 另一部 Android 智能手机时，我得到一个“可访问”的答案。

当我在 Java 应用程序上尝试相同的代码时，ping 我的智能手机，它是可以访问的。

是的，我正在使用`<uses-permission android:name="android.permission.INTERNET" />`并且正在手机上运行我的应用程序，而不是在模拟器上。我的设备连接在桌面的同一个局域网中。

有什么问题？

# python - 添加自定义列

> ID：14593515
> 
> 赞同：1
> 
> 时间：2013-01-29T22:49:54.137
> 
> 标签：python, sqlalchemy

所以我有一个查询...

```
qry = Query(models.UserList).filter(...) 
```

`models.UserList`包含一个 mixin 方法，它将返回`count`一个相关表

所以我想做的是......

```
qry = qry.order_by(models.UserList.contactCount) 
```

但是，这当然会产生无效的 sql。

那么我该怎么做

```
qry.add_column((this.contactCount).label("contactCount")) 
```

`this.contactCount`只是糟糕的伪代码，但希望你明白这一点。

我一直在研究如何做到这一点，但 sqlalchemy 文档并不是最容易找到东西的东西。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:50:24.710

您可以为此使用 a`column_property`或 a `hybrid_property`。例如：

```
class UserList(Base):
    ...
    contactCount = column_property(
        select(
            [func.count()],
            contact_id == Contact.id,
        ).label('contactCount'),
        deferred=True,
    ) 
```

# javascript - IE9 导入内联 SVG元素损坏

> ID：14593520
> 
> 赞同：3
> 
> 时间：2013-01-29T22:50:09.737
> 
> 标签：javascript, svg, internet-explorer-9

我正在使用[这种方法](https://stackoverflow.com/a/9883539/494954 "这种方法")将 SVG 文档导入页面，并且效果很好，但是在 IE9 中，`<image>`导入后所有标签都不起作用（它们显示为损坏的图像，即使它们的`xlink:href`属性是正确的）。为什么会发生这种情况，有什么办法可以解决吗？这是一个简单的[测试页](http://lakenen.com/svg-test/index.html "测试页面")。它在 Chrome、FF 等中运行良好，但在 IE9 中运行良好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T22:58:56.730

显然，如果我放弃`xlink:`并只使用`href`，如果修复了 IE9 中的问题，但在 Chrome 等中破坏了它。奇怪！如果有人知道为什么，我很乐意接受您的回答。见[测试 2](http://lakenen.com/svg-test/index2.html "测试 2")。

**添加** `href`,***除了*** `xlink:href` **解决无处不在的问题。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T10:03:35.073

[此答案](https://stackoverflow.com/a/9883539/494954)`importNode`中提供的 js 实现没有正确设置命名空间属性，它应该用于正确设置。importNode[的另一种实现](https://stackoverflow.com/questions/6075566/import-svg-node-into-another-document-in-ie9/6075604#6075604)似乎可以解决这个问题，您是否尝试过使用该实现？`setAttributeNS``xlink:href`

# android - ffmpeg rtsp 解码缓冲区太小

> ID：14593531
> 
> 赞同：5
> 
> 时间：2013-01-29T22:51:07.217
> 
> 标签：android, ffmpeg, streaming, rtsp

我正在使用 ffmpeg 在 Android 上解码 rtsp，当图像快速更新或高分辨率时，我很快就会看到像素化：

![工作解码帧](../Images/7d324092a1306eb9876f256cdf10bef0.png)

![非工作解码帧](../Images/591de16914a22a427dabeb48e8f9f45c.png)

谷歌搜索后，我发现它可能与 UDP 缓冲区大小相关。然后，我在 ffmpeg/libavformat/udp.c 中使用以下参数重新编译了 ffmpeg 库

```
#define UDP_TX_BUF_SIZE 327680
#define UDP_MAX_PKT_SIZE 655360 
```

它似乎有所改善，但在某些时候仍然开始失败。知道我应该增加哪个缓冲区以及如何增加吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:17:49.873

对于我的问题（[http://libav-users.943685.n4.nabble.com/UDP-Stream-Read-Pixelation-Macroblock-Corruption-td4655270.html](http://libav-users.943685.n4.nabble.com/UDP-Stream-Read-Pixelation-Macroblock-Corruption-td4655270.html)），我试图从一个多播 UDP 流中捕获别人设置的。因为我没有能力弄乱源代码，所以我最终从使用 libav 切换到使用 libvlc 作为包装器，并且效果很好。以下是对我有用的摘要：

流.h：

```
#include <vlc/vlc.h>
#include <vlc/libvlc.h>

struct ctx {
   uchar* frame;
}; 
```

流.cpp：

```
void* lock(void* data, void** p_pixels){
  struct ctx* ctx = (struct ctx*)data;
  *p_pixels = ctx->frame;
  return NULL;
}

void unlock(void* data, void* id, void* const* p_pixels){
  struct ctx* ctx = (struct ctx*)data;
  uchar* pixels = (uchar*)*p_pixels;
  assert(id == NULL);
} 
```

主.cpp：

```
struct ctx* context = (struct ctx*)malloc(sizeof(*context));
const char* const vlc_args[] = {"-vvv",
                                 "-q",
                                 "--no-audio"};
libvlc_media_t* media = NULL;
libvlc_media_player_t* media_player = NULL;
libvlc_instance_t* instance = libvlc_new(sizeof(vlc_args) / sizeof(vlc_args[0]), vlc_args);

media = libvlc_media_new_location(instance, "udp://@123.123.123.123:1000");
media_player = libvlc_media_player_new(instance);
libvlc_media_player_set_media(media_player, media);
libvlc_media_release(media);
context->frame = new uchar[height * width * 3];
libvlc_video_set_callbacks(media_player, lock, unlock, NULL, context);
libvlc_video_set_format(media_player, "RV24", VIDEOWIDTH, VIDEOHEIGHT, VIDEOWIDTH * 3);
libvlc_media_player_play(media_player); 
```

# php - 用图像替换文字情感

> ID：14593535
> 
> 赞同：1
> 
> 时间：2013-01-29T22:51:28.127
> 
> 标签：php

愿你平安

我搜索了用图像替换文本情感

发现了一个问题，但它有一个问题

```
 <?php
     function emoticons($text) {
             $icons = array(
                     ':)'    =>  '<img src="/images/blank.gif" alt="smile" class="emo1" />',
                     ':-)'   =>  '<img src="/images/blank.gif" alt="smile" class="emo2" />',
                     ':/'    =>  '<img src="/images/blank.gif" alt="smile" class="emo3" />',
              );
            return strtr($text, $icons);
     }

     echo "http://stackoverflow.com good site:) :-)";

     ?> 
```

它输出：（我不希望它这样做）

```
 "http<img src="/images/blank.gif" alt="smile" class="emo3" />/stackoverflow.com good site<img src="/images/blank.gif" alt="smile" class="emo1" /> <img src="/images/blank.gif" alt="smile" class="emo2" />" 
```

我想输出

```
 "http://stackoverflow.com good site:) <img src="/images/blank.gif" alt="smile" class="emo2" />" 
```

* * *

我认为它应该在文本之前或之后有空格然后替换它

在另一个同样的问题中，正确的答案是

```
 foreach($icons as $icon=>$image) {
              $icon = preg_quote($icon);
              $text = preg_replace("~\b$icon\b~",$image,$text);
             } 
```

但我使用它但结果没有任何图像

请帮助我，感谢stackoverflow && all :)

**更新 ：**

我修改了功能并运行良好，但是如果我在聊天消息中使用它想听听您的意见会很好吗？还是会面临问题？

```
 function emoticons($text) {
           $icons = array(
                          ':)'    =>  '<img src="/images/blank.gif" class="emo1"/>',
                          ':-)'   =>  '<img src="/images/blank.gif" class="emo1"/>',
                          ':/'   =>  '<img src="/images/blank.gif" class="emo3"/>',
                     );   
            $text = " ".$text." ";       
            foreach ($icons as $search => $replace){
             $text = str_replace(" ".$search." ", " ".$replace." ", $text);
            }
           return trim($text);
      }

      $str = ":)http://stackoverflow.com good site:) :-)";
      echo emoticons($str); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T23:04:09.707

您可以简单地添加`://`到您的列表中：

```
'://' => '://', 
```

并用相同的字符串替换它。

因为`strtr`首先替换最长的键，所以 URL 不会受到影响

* * *

好吧，如果您只想替换前面有空格的图标，您可以尝试使用正则表达式：

```
foreach($icons as $icon => $image)              
  $text = preg_replace('#(?:^|\s)(' . preg_quote($icon) . ')(?:\s|$)#', $image, $text); 
```

这将匹配前面有空格 / 或位于字符串开头，后跟空格 / 或位于字符串末尾的任何图标。

但我不明白你为什么想要这样，像这样的文字也`foo:)`应该被视为笑脸。仅供参考，我几乎从不在表情符号前加上空格：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T23:33:12.243

怎么样，它只会在它作为字符串的开头或在空格之后替换：

```
function emoticons($text) {
    $icons = array(
        ':)'    =>  '<img src="/images/blank.gif" alt="smile" class="emo1" />',
        ':-)'   =>  '<img src="/images/blank.gif" alt="smile" class="emo2" />',
        ':/'    =>  '<img src="/images/blank.gif" alt="smile" class="emo3" />',
    );

    foreach ($icons as $search => $replace)
        $text = preg_replace("#(?<=\s|^)" . preg_quote($search) . "#", $replace, $text);

    return $text;
}

$str = "http://stackoverflow.com good site:) :-)";

echo emoticons($str); 
```

输出：

```
http://stackoverflow.com good site:) <img src="/images/blank.gif" alt="smile" class="emo2" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T23:00:01.943

尝试将 ' 替换为 " 像这样：

`':)' => "<img src="/images/blank.gif" alt="smile" class="emo1" />",`

如果不工作试试这个：

`":)" => '<img src="/images/blank.gif" alt="smile" class="emo1" />',`

# ruby-on-rails - 没有路线匹配 {:controller=>"comments", :action=>"create"} - 它确实

> ID：14593537
> 
> 赞同：0
> 
> 时间：2013-01-29T22:51:40.733
> 
> 标签：ruby-on-rails

编辑：我看过其中的一些，但找不到答案，所以我试图尽我所能记录下来并提出这个问题。

我有一个带有嵌套评论资源的无模型 Rails 应用程序（调用 API）。如果我直接转到comments#new 或comments#index 操作并相应地发布到comments#create 操作，我可以针对故事发表评论。

但是，我非常希望能够在与父资源的#show 操作相同的页面上发表评论：（opusses#show）

我尝试使用来自 rake 路由的 rails url_helper 路径作为 opuss_comments_path 并明确说明控制器和操作。在这两种情况下，我仍然收到此消息：

```
No route matches {:controller=>"comments", :action=>"create"} 
```

这是我的路线数据库：

```
resources :users
resources :sessions,  only: [:new, :create, :destroy]
resources :osessions, only: [:new, :create, :destroy]

resources :authors do
  member do
    get   :following
    get   :followed
    post  :follow
  end
end

resources :opusses do

  resources :comments

  member  do
    get   :like
    get   :authorfeed
    post  :repost
  end
end 
```

还有我的耙子路线：

```
 DELETE /authors/:id(.:format)                         authors#destroy
    opuss_comments GET    /opusses/:opuss_id/comments(.:format)          comments#index
                   POST   /opusses/:opuss_id/comments(.:format)          comments#create
 new_opuss_comment GET    /opusses/:opuss_id/comments/new(.:format)      comments#new
edit_opuss_comment GET    /opusses/:opuss_id/comments/:id/edit(.:format) comments#edit
     opuss_comment GET    /opusses/:opuss_id/comments/:id(.:format)      comments#show
                   PUT    /opusses/:opuss_id/comments/:id(.:format)      comments#update
                   DELETE /opusses/:opuss_id/comments/:id(.:format)      comments#destroy 
```

&&

```
 like_opuss GET    /opusses/:id/like(.:format)                    opusses#like
  authorfeed_opuss GET    /opusses/:id/authorfeed(.:format)              opusses#authorfeed
      repost_opuss POST   /opusses/:id/repost(.:format)                  opusses#repost
           opusses GET    /opusses(.:format)                             opusses#index
                   POST   /opusses(.:format)                             opusses#create
         new_opuss GET    /opusses/new(.:format)                         opusses#new
        edit_opuss GET    /opusses/:id/edit(.:format)                    opusses#edit
             opuss GET    /opusses/:id(.:format)                         opusses#show
                   PUT    /opusses/:id(.:format)                         opusses#update
                   DELETE /opusses/:id(.:format)                         opusses#destroy 
```

当我从 comments#index 页面调用下面的代码时，它工作得很好。但是，从不同的控制器发布到另一个表单是很常见的，当我从 opuses#show 页面调用此代码时，它会因上述错误而失败。

如果它与 URL 帮助程序有关，我尝试明确指定控制器和操作，但仍然不起作用 - 产生了相同的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:26:30.690

经典的新手错误，但对其他人有利=>

我有 rake 路线并且路径正确，我没有做的是提交父资源的 id。所以 POST 到路径并包含有问题的对象。在我的情况下，这意味着 opuss_comments_path(@opuss["xyz"]) 其中 xyz 是我的对象的 id。

```
opuss_comments GET    /opusses/:opuss_id/comments(.:format)          comments#index
               POST   /opusses/:opuss_id/comments(.:format)          comments#create 
```

啊。。学习了。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T23:03:43.577

根据您的路线，您不必使用 url 助手。但您必须确保您在控制器中拥有 Opuss 对象的句柄。所以做这样的事情；

```
@opuss = Opuss.find(params[:id]) #or your equivalent finder code
@comment = @opuss.comments.build 
```

然后在你看来；

```
<%= form_for([@opuss, @comment]) do |f| %>
  .... rest of form
<% end %> 
```

# git - 让 Heroku 运行非主 Git 分支

> ID：14593538
> 
> 赞同：197
> 
> 时间：2013-01-29T22:51:45.717
> 
> 标签：git, heroku

我在 Heroku 上托管了一个项目，它已经到了我想制作一个备用测试服务器的地步（这样我就可以测试 Heroku 工作人员而不会弄乱生产）。

我已经设置了运行我的主干的主 Heroku 遥控器和一个我希望在其上运行备用分支的 Heroku-dev 遥控器。

我的问题是，由于我的备用分支不是主分支，Heroku 不会构建它。

```
$ git push heroku-dev test
counting objects ...
...
Pushed to non-master branch, skipping build.
To git@heroku.com:example-dev.git
* [new branch]      test -> test 
```

目前无法将此构建切换到主构建。显然，一种选择是创建一个全新的 git 存储库，它是我的测试分支的克隆，但这听起来不太理想。

* * *

## 回答 #1

> 赞同：400
> 
> 时间：2013-01-29T22:54:52.123

您可以使用 Git 将替代分支推送到 Heroku。

```
git push heroku-dev test:master 
```

这会将您的本地测试分支推送到远程的主分支（在 Heroku 上）。

* * *

@Brian Armstrong 的评论：

还值得注意的是，当您准备好回到大师时，您需要做

```
git push -f heroku master:master 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2019-12-07T18:49:45.570

在我的情况下，默认或基本分支是**develop**，所以我使用：

```
 git push heroku develop:master 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-06T17:05:06.940

如果 git push heroku-dev test:master 对您不起作用，请尝试 git push heroku test:master。记住“test:master”中的“test”是你所在的新分支的名称。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2019-07-28T07:05:16.667

您需要先拉取远程分支，然后才能推送非主分支。

在本地存储库中运行以下命令

```
git pull https://heroku:YOUR_HEROKU_API_KEY@git.heroku.com/YOUR_APP_NAME.git 
```

# windows-phone-7 - 带有自定义图像和可变文本的 Bing 地图图钉

> ID：14593542
> 
> 赞同：0
> 
> 时间：2013-01-29T22:51:58.173
> 
> 标签：windows-phone-7, bing-maps, pushpin

我需要在 BingMap 控件上添加一个或多个带有自定义静态图像和文本的图钉，这些图钉是在代码中设置的。这是我的图钉模板：

```
<ControlTemplate x:Key="PushpinTemplate" TargetType="maps:Pushpin">
    <Grid x:Name="ContentGrid"
                Width="39"
                Height="48">
                <Image Source="Images/pin.png" Stretch="None"/>
                <TextBlock Text="Text" />
     </Grid>
 </ControlTemplate> 
```

如何以编程方式更改属性 TextBlock.Text？说将其绑定到属性 Pushpin.Content。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:58:41.817

通过动态生成控制模板来解决。

```
 private ControlTemplate CreateTemplate(string image, string text)
    {
        string xaml = "<ControlTemplate xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\" xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\" xmlns:maps=\"clr-namespace:Microsoft.Phone.Controls.Maps;assembly=Microsoft.Phone.Controls.Maps\" TargetType=\"maps:Pushpin\"><Grid x:Name=\"ContentGrid\" Width=\"39\" Height=\"48\"><Image Source=\"" + image + "\" Stretch=\"None\"/><TextBlock Margin=\"14,2,0,0\" FontSize=\"20\" Text=\"" + text + "\" /></Grid></ControlTemplate>";
        ControlTemplate сt = (ControlTemplate)XamlReader.Load(xaml);
        return сt;
    } 
```

# xcode - cell.detailTextLabel 不起作用

> ID：14593545
> 
> 赞同：0
> 
> 时间：2013-01-29T22:52:01.987
> 
> 标签：xcode, uitableview, detailtextlabel

我想为我的表格设置一个 textLabel 和一个 detailTextLabel。textLabel 工作正常。但是，我无法让 detailTextLabel 显示我设置的文本。下面是我的代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
    }

    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    cell.textLabel.text = @"SomeString";
    cell.detailTextLabel.text = @"hello";

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-08T21:04:57.357

我遇到了类似@user1829700 的问题。

我的初始设置是

> TableView --> Prototype Cell --> (Attribute Inspector) Style - 设置为自定义（按设计）

将样式更改为 - 字幕，它可以解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T03:32:53.710

试试这个 使用适当的 UITableViewCellStyle （除了 UITableViewCellStyleDefault 应该工作）。初始化单元格时会指定单元格的样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-16T14:21:00.373

在您的自定义表格单元格实现中尝试添加 @synthesize detailTextLabel;

标题（.h）：

```
@property (nonatomic, weak) IBOutlet UILabel *textLabel;
@property (nonatomic, weak) IBOutlet UILabel *detailTextLabel; 
```

实施（.m）：

```
@synthesize textLabel;
@synthesize detailTextLabel; 
```

# sql - 通过函数实现的表规则

> ID：14593546
> 
> 赞同：0
> 
> 时间：2013-01-29T22:52:04.850
> 
> 标签：sql, sql-server, database, database-design

（以下 SQL 来自另一个帖子/用户，正在使用 SQL Server 中的 CHECK 约束模拟表级断言）

```
CREATE FUNCTION dbo.fnRedRows()
RETURNS INT
AS
BEGIN
    DECLARE @Return INT
    SELECT @Return=COUNT(*) FROM dbo.Red
    RETURN @Return
END
GO
CREATE TABLE dbo.Red 
(
    id INT IDENTITY(1,1), 
    test VARCHAR(max), 
    CONSTRAINT CK_MaxRows CHECK (dbo.fnRedRows()<5)
)
GO
INSERT INTO dbo.Red (test) VALUES ('HI')
INSERT INTO dbo.Red (test) VALUES ('The')
INSERT INTO dbo.Red (test) VALUES ('first four')
INSERT INTO dbo.Red (test) VALUES ('will work')
INSERT INTO dbo.Red (test) VALUES ('This one will fail')
GO
DROP TABLE dbo.Red
GO
DROP FUNCTION dbo.fnRedRows
GO 
```

CHECK 是否从时间 t=0 开始保持完整性，而无需发生插入或其他事件（与触发器不同）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:59:45.357

在检查约束中使用函数时要非常小心，它们并不总是有效，而且它们通常会成为性能问题。以下是一些严重破坏的示例：

[https://web.archive.org/web/20171013131650/http://sqlblog.com/blogs/tibor_karaszi/archive/2009/12/17/be-careful-with-constraints-calling-udfs.aspx](https://web.archive.org/web/20171013131650/http://sqlblog.com/blogs/tibor_karaszi/archive/2009/12/17/be-careful-with-constraints-calling-udfs.aspx)

[https://web.archive.org/web/20180427092555/http://sqlblog.com/blogs/alexander_kuznetsov/archive/2009/06/25/scalar-udfs-wrapped-in-check-constraints-are-very-多行更新缓慢且可能失败](https://web.archive.org/web/20180427092555/http://sqlblog.com/blogs/alexander_kuznetsov/archive/2009/06/25/scalar-udfs-wrapped-in-check-constraints-are-very-slow-and-may-fail-for-multirow-updates.aspx)

就我个人而言，我只会为此使用触发器。我不确定您通过使用 UDF 和检查约束获得了什么，除了您可以说“我没有使用触发器”。此外，什么样的变化会突然违反你的约束，不需要某种会触发触发器的事件？

# asp.net-mvc - 使用带有 Ajax 请求的部分视图构建表

> ID：14593547
> 
> 赞同：3
> 
> 时间：2013-01-29T22:52:09.133
> 
> 标签：asp.net-mvc, insert, partial-views, tablerow

每次用户按下按钮（使用 Ajax）时，我都需要动态创建（插入）一个新的表行。我的部分视图结构：

```
 <tr>
         <td><td>
         <td><td>
         ...
    </tr> 
```

当我需要在最后插入新行时，我可以执行以下操作：

```
 element_table.innerHTML += ajax_data 
```

但是当我需要将它放在其他行之间时我必须做什么？

我只能返回 [td] 元素并将它们包装在 [tr] 客户端创建的元素 (tr.innerHTML = ajax_data) 中，但我认为这不是一个好主意。

有任何想法吗？

有没有常见的做法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T23:10:36.253

最简单的方法是将 jQuery 与您的 Ajax 响应一起使用。它可以很简单

```
$('#table').append(response) 
```

[追加一行](https://stackoverflow.com/questions/171027/add-table-row-in-jquery)。也可以[在特定索引处插入新行](https://stackoverflow.com/questions/3577860/jquery-insert-new-row-into-table-at-a-certain-index)：

```
$('#my_table > tbody > tr').eq(index).after(response); 
```

请注意，索引是基于 0 的。

# javascript - 按下按钮后显示行

> ID：14593558
> 
> 赞同：-1
> 
> 时间：2013-01-29T22:52:48.617
> 
> 标签：javascript, jquery, hide

![行和“加载更多”](../Images/346b8dc02c786b6b15db14ab4fa2187e.png)

我想默认显示第 1 行，然后当您按下“加载更多”按钮时，每次加载另一行。我已经在行中有内容（不需要 AJAX），但我只想能够在按下按钮时显示它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T23:01:49.880

请参阅此[jsFiddle](http://jsfiddle.net/9pE3L/)示例。

JavaScript 部分，带有 jQ​​uery：

```
$('#loadmore').click(function(){
     $('tr.hide').first().removeClass('hide').addClass('show'); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T22:59:39.867

`display: none;`默认情况下在所有行上使用（第 1 行除外）。

然后在每次点击时，`.show()`在给定的行上使用或：

```
$('BUTTON_SELECTOR').click(function(){
    $('ROWS_CONTAINER_SELECTOR:hidden:first').show();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T22:54:34.177

如果您已经拥有数据，那么您可以简单地将容器 div 设置为`overflow: hidden`并调整其大小以在每次单击时显示额外的行。

```
$("#button").click(function(){
   $("#container").css("height","+=150");
}); 
```

# jsf - 使用 JSF、Hibernate、Spring 刷新数据表以查看每 15 个结果

> ID：14593559
> 
> 赞同：1
> 
> 时间：2013-01-29T22:52:54.040
> 
> 标签：jsf, datatable, javabeans

我有一个使用我的 Bean 填充的数据表。我只想显示前 15 个结果，然后允许用户使用下一个按钮来显示接下来的 15 个结果。这是我的数据表

```
<h:dataTable id ="data" value="#{copd.getCopds()}" var="c"
            styleClass="order-table"
            headerClass="order-table-header"
            rowClasses="order-table-odd-row,order-table-even-row"> 
```

我的 CopdBean 有一个名为 pageNumber 的 int 值，它向下传递以与 CopdDaoImpl 一起使用以确定表的结果。这是后端的快速路径...

CopdBean.java

```
public List<Copd> getCopds(){
    return copdBo.findAllCopd(pageNumber);
} 
```

copdBoImp.java

```
public List<Copd> findAllCopd(int pageNumber) {

    return copdDao.findAllCopd(pageNumber);
} 
```

copdDaoImp.java

```
private static int pageSize = 15;

public List<Copd> findAllCopd(int pageNumber){
    Criteria crit = getSession().createCriteria(Copd.class);
    crit.add(Restrictions.like("copdPK.upi","0%"));
    crit.addOrder(Order.desc("copdPK.upi"));
    crit.setFirstResult(pageSize * (pageNumber -1));
    crit.setMaxResults(pageSize);
    return crit.list();
} 
```

如您所见，当 pageNumber int 值更新时，copd.getCopds() 将显示下一个 15。当我硬编码并将 int 值更改为 2、3 或 4 并运行 webapp 时，一切都会显示正确性。我只需要更新此 pageNumber 值并刷新 dataTable 的按钮功能（也就是调用 copd.getCopds() 并将该结果作为“值”存储在 dataTable 中。

我有一个标记为 Next 的 commandButton，它将调用一个方法来更新我的 pageNumber int 值。但是当这个按钮被点击时，什么也没有发生。我什至在调试中运行过，似乎从未调用过该方法。

```
<h:commandButton value="Next" action="#{copd.nextPage()}"/> 
```

copd.nextPage() 只是将 int 值增加 1。但是单击此按钮不会执行任何操作。我努力了

```
onclick="refreshTable()" 
```

和

```
<script type="text/javascript">
        function refreshTable()
        {
            var table = document.getElementById("data");
            table.refresh();
        }
    </script> 
```

我也试过`<f:ajax render="data"/>`

一切都适用于我的应用程序，我只是想基本上更新 dataTable 中的“值”，然后在不刷新整个页面的情况下刷新 dataTable（我被告知将使用新的 bean 重新开始），这样我m 一次只显示 15 行，而所有 150 或 200 或 4000 行。非常感谢任何帮助，因为我知道它只是我在前端数据表中缺少的一些简单的东西。

# java - I*Binding 在 Eclipse JDT 中的作用是什么？

> ID：14593560
> 
> 赞同：5
> 
> 时间：2013-01-29T22:52:55.723
> 
> 标签：java, eclipse, eclipse-jdt

我目前的理解是，JDT 为我们提供了两种不同的接口和类层次结构来表示和操作 Java 代码：

*   Java 模型：提供一种表示 Java 项目的方法。快速创建但不包含与 AST 类层次结构一样多的信息，例如，没有关于源文件中每个元素的确切位置的信息（在可用的 AST 中）

*   AST：更详细的源代码表示，并提供了操作它的方法。

那是对的吗？

现在，还有一个名为 I*Binding 的接口层次结构（从[IBinding](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/dom/IBinding.html)开始），例如 IMethodBinding。例如，我们有 3 种不同的类型来处理方法：

*   [IMethod](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/IMethod.html)（来自 Java 模型）
*   [MethodInvocation](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/dom/MethodInvocation.html)（来自 AST，可以从 IMethod 获得）
*   [方法绑定](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/dom/IBinding.html)

从 doc IMethodBinding 看起来很像来自 AST 的 MethodInvocation，但我没有看到明显的区别，我什么时候应该使用它们。有人可以澄清一下吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T10:34:45.657

原始 AST 节点不包含它们之间的引用，例如从变量使用返回到其声明，或从方法调用返回到方法声明。可以检查 MethodInvocation 对象的方法名称，但您无法立即了解实际调用了哪个类的哪个方法。为此需要进行范围分析。

这种分析称为*绑定解析*。IBinding 对象附加到 AST 节点，您可以使用它们来查找给定 MethodInvocation AST 节点的 MethodDeclaration AST 节点，使用`CompilationUnit.findDeclaringNode(methodInvocationNode.resolveMethodBidning().getKey())`

或者您可以使用`CompilationUnit.findDeclaringNode(method.getKey())`来查找哪个 AST 节点包含对应于给定 IMethod 对象的声明。

```
MethodInvocation.resolveBinding().getKey() ==
MethodDeclaration.resolveBinding().getKey() ==
IMethod.getKey() 
```

# c++ - With C++, how do I wrap a vector and overload [] for all types?

> ID：14593562
> 
> 赞同：12
> 
> 时间：2013-01-29T22:52:57.860
> 
> 标签：c++, operator-overloading

Long story short, I have

```
#include <vector>

template <class T>
class wrapped_vector {
private:
        std::vector<T> elements;
public:
        wrapped_vector() {
                elements.resize(20);
        }

        T& operator[](int i) {
                return elements[i];
        }

        const T& operator[](int i) const {
                return elements[i];
        }
};

int main(void) {
        wrapped_vector<int> test_int;
        test_int[0] = 1;

        wrapped_vector<bool> test_bool;
        test_bool[0] = true; // remove this line and it all compiles
} 
```

and it gives me the compile error

```
test.cpp: In instantiation of ‘T& wrapped_vector<T>::operator[](int) [with T = bool]’:
test.cpp:28:13:   required from here
test.cpp:15:34: error: invalid initialization of non-const reference of type ‘bool&’ from an rvalue of type ‘std::vector<bool, std::allocator<bool> >::reference {aka std::_Bit_reference}’ 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-29T22:55:01.293

You got bitten by yet another side-effect of the "magic" `std::vector<bool>`.

Since `std::vector<bool>` doesn't actually store a contiguous array of `bool`s, but packs them as a bitset, it cannot return a "real" reference to a bit in the middle of the bitset (since bits aren't directly addressable); for this reason, its `operator[]` returns a proxy object that, overloading its `operator=`, "fakes" a reference semantic.

The problem lies here: this proxy object *is not* a `bool &`, so you cannot return it as such in your method.

The simplest way to solve would be something like this:

```
 typename std::vector<T>::reference operator[](int i) {
            return elements[i];
    }

    typename std::vector<T>::const_reference operator[](int i) const {
            return elements[i];
    } 
```

that guarantees that you actually return whatever type `std::vector` uses as "reference to `T`" in its methods.

Also, you may want to use `std::vector<T>::size_type` for indexes (mostly for coherency of your forwarder functions than anything else).

# c - 将值分配给C中的记录数组

> ID：14593564
> 
> 赞同：0
> 
> 时间：2013-01-29T22:53:07.197
> 
> 标签：c

我有以下问题。对于家庭作业，我应该为 5 个学生创建一个记录“学生”的堆数组，然后分配一些值（姓名等）。现在，当我尝试按照以前的方式为记录分配值时，我得到一个“在 { 之前预期的表达式”错误。

```
Edit:

typedef struct student_t {
char hauptfach[128];
char name[64];
int matnr;
} student;

/Edit

student *students;
students = malloc(5*sizeof(student));

students[0] = {"Info", "Max Becker", 2781356};
students[1] = {"Soziologie", "Peter Hartz", 6666666};
students[2] = {"Hurensohnologie", "Huss Hodn", 0221567};
students[3] = {"Info", "Tomasz Kowalski", 73612723};
students[4] = {"Info", "Kevin Mueller", 712768329}; 
```

但是当我尝试分配一个值时，例如

```
students[0].hauptfach = "Informatik"; 
```

程序编译。

我究竟做错了什么？

提前致谢，

D.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:58:43.487

您还没有显示您的结构定义，但我希望该字符串是一个`char`具有某个最大大小的数组。

要分配字符串，您需要使用`strncpy`. 看那个功能。

基本上，假设`hauptfach`成员是`MAX_LEN+1`字符长：

```
strncpy( students[0].hauptfach, "Informatik", MAX_LEN+1 );
students[0].hauptfach[MAX_LEN] = 0;  // Force termination if string truncated. 
```

哎呀，对不起，我误读了你的问题。以上可能仍然适用。

你不能复制这样的结构。您必须在数组定义中对其进行初始化：

```
struct mystruct students[5]  = {
  {"Info", "Max Becker", 2781356},
  {"Soziologie", "Peter Hartz", 6666666},
  {"Hurensohnologie", "Huss Hodn", 0221567},
  {"Info", "Tomasz Kowalski", 73612723},
  {"Info", "Kevin Mueller", 712768329}
}; 
```

或者，您可以按照所示单独分配字段。另一种选择是您可以通过初始化单个实例然后像这样复制来替换整个数组元素：

```
struct mystruct temp = {"Soziologie", "Peter Hartz", 6666666};
students[0] = temp; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T23:12:21.460

这两个陈述不能真正放在一起：

```
1 students = malloc(5*sizeof(student));
2 students[0] = {"Info", "Max Becker", 2781356}; 
```

(1) 表示您想在运行时动态分配内存。

(2) 表示您想在编译时将列出的值分配给固定地址。不幸的是，编译器不能提前知道地址`students[0]`是什么，所以它不能做你想做的事。

我建议你创建一个辅助函数：

```
void initstudent(student *s, const char hf[], const char name[], int matnr){
  strncpy(s->hauptfach, hf, MAXLEN);
  strncpy(s->name, name, MAXLEN);
  s->matnr=matnr;
} 
```

然后将其应用于您的每个学生。

# javascript - Javascript 结构

> ID：14593566
> 
> 赞同：0
> 
> 时间：2013-01-29T22:53:22.920
> 
> 标签：javascript, oop

我在正确获取我的 JS 代码结构时遇到问题。我基本上是在尝试创建一个包含其他对象的复杂对象。

我所追求的基本上是这样的：

```
object {
    f1: (),
    f2: (),
    objA: {
        objA: {
            v1: ""
        }
    },
    objB: {
        objA: {
            v1: "",
            v2: "",
            f1: ()
        }
    }
} 
```

或类似的东西。我有一些工作，但在对象中，我希望能够引用对象的其他部分。

因此，例如，对于上面的示例，我想将变量设置`object.objA.objB.v1`为等于`object.objA.objA.v1`

当我尝试这个时，我收到一个错误，说它无法访问`objA`未定义的。

我怎样才能解决这个问题或对其进行重组以使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:01:47.910

您的示例引发错误，因为它无效。根本`object.objA.objB.v1`不存在。但是，如果您想使用现有对象的属性，您可以简单地通过以下方式完成：

```
var yourObj =  {
objA: {
    objA: {
        v1: "a"
    }
},
objB: {
    objA: {
        v1: "b",
        v2: "c",
    }
}
}

yourObj.objB.objA.v1 = yourObj.objA.objA.v1;
alert(yourObj.objB.objA.v1); 
```

[jsFiddle](http://jsfiddle.net/HvTfu/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T22:59:43.580

对象文字不是自引用的。您不能引用尚未定义的内容。这就是您收到错误的原因。

您可以做的是在最初定义结构后推迟定义自引用属性。

所以最初定义你的对象：

```
var obj = {
    a: {
        prop1: 1
    },
    b: 2,
    innerObj: {}
}; 
```

然后：

```
obj.innerObj.a = obj.a; 
```

请记住，这不适用于数字等原始类型。这适用于具有引用的对象，例如函数和其他对象/数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T23:00:29.240

不幸的是，在 Javascript 中定义对象字面量时，您不能将对象的其他部分引用到自身。所以：

`object.objA.objB.v1: object.objA.objA.v1`是不合法的。它还没有引用，`object`因为它还没有完成定义。

您可以做的是定义对象，然后在其上设置特定值。它们不会自动更新，除非它们也是对象并因此通过引用传递。

一个可能的解决方案是，它`object.objA.objB.v1`可以是一个返回 的值的函数`object.objA.ovjaA.v1`。

# css - 显示奇怪黑线的 HTML 视频

> ID：14593569
> 
> 赞同：1
> 
> 时间：2013-01-29T22:53:42.773
> 
> 标签：css, html

我对一个包含 3 个视频的 HTML 有一个非常奇怪的问题。我在视频中使用 videojs，所有视频都已转换为三种不同的格式，以确保跨浏览器兼容。

话虽如此，播放视频时，底部或视频右侧会出现奇怪的黑线（这甚至会因浏览器而异！！）。

我完全不知道这些行是从哪里来的，因为它们根本没有出现在 CSS 上。

这是向您展示我在说什么的链接：http: [//tomascamusso.com/helpme](http://tomascamusso.com/helpme)

PS：万一已经成为视频本身的一部分，有没有通用的软件可以编辑这些视频？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T23:34:06.317

该线位于视频覆盖的背景图像中。

[http://tomascamusso.com/helpme/img/hang_on_to_your_assets.png](http://tomascamusso.com/helpme/img/hang_on_to_your_assets.png)

现在我看到播放视频时图像被隐藏（显示：无；）。然而，它确实看起来像视频的结尾，来自提要的静止图像使用相同的背景图像.. 值得研究。

![在此处输入图像描述](../Images/d1b42f4644dae488f4ffc46e6505ac5b.png)- 这是一个截图。

# android - 在 Android 中创建书架视图

> ID：14593571
> 
> 赞同：0
> 
> 时间：2013-01-29T22:53:50.170
> 
> 标签：android, android-layout, android-image

我见过许多采用书架设计的电子书阅读器，其中书籍的放置方式类似于 Apple 的 iBooks 或 Android 的 iReader。我正在尝试在 Android 中构建类似的书架 UI。我已经为布局准备了图形，即shelf_left (34*180)、shelf_right (34*180) 和shelf_center (652*180)。目前我的目标是 720*1280 像素密度的设备，所以我将总宽度保持为 720px。我使用 dp 作为我的长度单位。

我使用 RelativeLayout 作为我的根布局。当我将所有图像放入布局中时，图像没有正确对齐。Shelf_center 获得额外的顶部和底部填充，侧面图像看起来太大。

我无法弄清楚如何控制这种行为。下面是我的 main.xml 布局的代码。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/shelf_left"
        android:layout_width="34dp"
        android:layout_height="180dp"
        android:adjustViewBounds="true"
        android:contentDescription="@string/button"
        android:src="@drawable/shelf_left" />

    <ImageView
        android:id="@+id/shelf_center"
        android:layout_width="652dp"
        android:layout_height="180dp"
        android:layout_toLeftOf="@+id/shelf_right"
        android:layout_toRightOf="@+id/shelf_left"
        android:adjustViewBounds="true"
        android:contentDescription="@string/button"
        android:src="@drawable/shelf_center" />

    <ImageView
        android:id="@+id/shelf_right"
        android:layout_width="34dp"
        android:layout_height="180dp"
        android:layout_alignParentRight="true"
        android:adjustViewBounds="true"
        android:contentDescription="@string/button"
        android:src="@drawable/shelf_right" />

</RelativeLayout> 
```

这是它的外观：

[http://img210.imageshack.us/img210/2885/shelf.png](http://img210.imageshack.us/img210/2885/shelf.png)

请帮我弄清楚我在这里做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:51:22.397

似乎中心图像太宽而无法适应视图并按比例缩小。请注意，侧视图中的垂直木边与底视图的图像不匹配。您是否尝试过使用`android:scaleType`以使图像不会被缩放？

此外，请仔细检查以像素为单位的测量值（您提到以像素为单位的图像大小）是否与`dp`XML 中设置的值匹配。

# java - 诊断 Java 中断标志

> ID：14593572
> 
> 赞同：1
> 
> 时间：2013-01-29T22:53:58.287
> 
> 标签：java, multithreading, interrupted-exception

我有一些看起来像这样的代码：

```
executorService.submit(new Runnable() {
    @Override public void run() {
        while (!Thread.currentThread().isInterrupted()) {
            doWork();
        }
    }
}); 
```

此代码有时无法退出 while 循环，因为内部某处正在清除中断标志`doWork()`。此方法调用第三方库，其中之一是吞下中断。

首先，有什么具体的技术可以用来诊断吗？其次，是否有任何静态分析工具能够发现这种错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T23:01:59.117

> 有什么具体的技术可以用来诊断吗？

您可以扩展`Thread`和覆盖该`interrupt()`方法以设置您自己的内部中断标志。然后，您可以在“doWork()”完成后将内部标志与线程状态进行比较，看看它们是否不同。

您总是可以自己中断线程并查看中断标志在退出时是否被清除`doWork();`。这显然会破坏你的逻辑。

> 是否有任何静态分析工具能够发现这种错误？

据我所知没有。其中一个分析器可能足够聪明，可以捕获线程中断。

# javascript - 使用 javascript/flash 复制到剪贴板

> ID：14593573
> 
> 赞同：1
> 
> 时间：2013-01-29T22:53:58.223
> 
> 标签：javascript, flash, clipboard

我目前正在开发一个 PHP/HTML/Javascript 项目，我正在尝试在用户按下按钮时自动将文本复制到用户剪贴板。

我做了一些研究，发现这可以在 IE 中轻松完成，但所有其他浏览器都不支持这一点，因此嵌入了一个 flash 文件来进行复制。但是，这似乎不起作用。

下面是进行复制的代码

```
function copyToClipboard()
{
    //Copy to clipbord if IE
    if (window.clipboardData && clipboardData.setData)
    {
        window.clipboardData.setData('text', 'I am copied');
    }
    else //other browsers
    {
        alert("other browser");
        var flashcopier = 'flashcopier';
        if(!document.getElementById(flashcopier)) {
            var divholder = document.createElement('div');
            divholder.id = flashcopier;
            document.body.appendChild(divholder);
        }
        document.getElementById(flashcopier).innerHTML = '';
        var divinfo = '<embed src="_clipboard.swf" FlashVars="clipboard='+encodeURIComponent('other browser copied')+'" width="0" height="0" type="application/x-shockwave-flash"></embed>';
        document.getElementById(flashcopier).innerHTML = divinfo;
    }
} 
```

使用 IE 时它似乎工作正常，但使用 Chrome 时，没有任何内容被复制到剪贴板。chrome开发工具中也没有任何错误。

我知道使用上面的代码可以嵌入 Flash 文件，因为如果我将 src 更改为说，`clipboard.swf_rubbish`那么 chrome 开发控制台会说它找不到文件。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:11:27.700

该解决方案不再适用于 Flash Player 10 的发布。因为访问剪贴板数据的安全限制。[您可以在此处](http://www.rodsdot.com/javascript/cross_browser_clipboard_copy_with_pop_over_message.asp)找到解决方法

# eclipse - 在 Windows 中为 Eclipse 编译/使用 libjpeg

> ID：14593579
> 
> 赞同：-1
> 
> 时间：2013-01-29T22:54:37.157
> 
> 标签：eclipse, dll, mingw, libjpeg

这个问题/答案最终将作为这个问题的完整答案：[如何在 C++ 中操作/旋转 JPEG 图像？](https://stackoverflow.com/q/14586759/1666510)因为该问题的答案只有在您已经完成以下所有操作时才有用。

我在这里遵循了指南：[编译 libjpeg](https://stackoverflow.com/questions/12652178/compiling-libjpeg) （使用 MINGW32 Shell 接受的答案指南）

尽管下载了新副本，但它不起作用：

```
$ make
make  all-am
make[1]: Entering directory `/c/tmp/jpeg-9'
  CC       jaricom.lo
  CC       jcapimin.lo
jcapimin.c:127:1: error: conflicting types for 'jpeg_suppress_tables'
jcapimin.c:128:1: note: an argument type that has a default promotion can't matc
h an empty parameter name list declaration
In file included from jcapimin.c:22:0:
jpeglib.h:997:14: note: previous declaration of 'jpeg_suppress_tables' was here
make[1]: *** [jcapimin.lo] Error 1
make[1]: Leaving directory `/c/tmp/jpeg-9'
make: *** [all] Error 2 
```

8d 和 9 都做同样的事情。

进行此问题中指出的更改后：[Compile libjpeg with mingw](https://stackoverflow.com/questions/13087749/compile-libjpeg-with-mingw)

> 将以下定义添加到 jconfig.h
> 
> `#define HAVE_PROTOTYPES 1`

我在制作时得到这个输出：

```
$ make
make  all-am
make[1]: Entering directory `/c/tmp/jpeg-9'
  CC       jaricom.lo
In file included from jinclude.h:20:0,
                 from jaricom.c:17:
jconfig.h:5:24: warning: extra tokens at end of #undef directive [enabled by def
ault]
  CC       jcapimin.lo
In file included from jinclude.h:20:0,
                 from jcapimin.c:21:
jconfig.h:5:24: warning: extra tokens at end of #undef directive [enabled by def
ault]
jcapimin.c:127:1: error: conflicting types for 'jpeg_suppress_tables'
jcapimin.c:128:1: note: an argument type that has a default promotion can't matc
h an empty parameter name list declaration
In file included from jcapimin.c:22:0:
jpeglib.h:997:14: note: previous declaration of 'jpeg_suppress_tables' was here
make[1]: *** [jcapimin.lo] Error 1
make[1]: Leaving directory `/c/tmp/jpeg-9'
make: *** [all] Error 2 
```

然后你必须运行“autoheader”来解决这个问题并再次制作。

它应该是制作的，但我的构建目录中没有任何内容由 ./configure --prefix=/c/tmp/jpeg-9-build/ 设置

我在项目目录的 .lib 文件夹中找到了 libjpeg-9.dll。

凌乱..现在的问题是：如何在 Eclipse 中使用它？

我在主目录中有 exe，在 .lib 子目录中有一些 exe 和 DLL，但没有 .lib 文件 - 如何将这些导入到 Eclipse 项目中，以便可以调用 DLL 中的函数？

`$ make install`收集构建目录中的文件。

我将构建目录的内容迁移到工作的 Eclipse 项目中，并链接了库和包含路径：

![Eclipse中jpeglib基本实现的目录树](../Images/513742b6153450ba64a7a6a10c8d9ce9.png)

我不确定这是否适合我想要使用它的方式，但它确实可以编译。下一部分：从 DLL 中调用函数？

与使用已编译的 jpegtran.exe 相关：[jpegtran.exe 未正确旋转图像](https://stackoverflow.com/q/14612809/1666510)

尝试使用库并在单独的项目中编译：[需要帮助从 libjpeg 编译 jpegtran.c 代码](https://stackoverflow.com/q/14631530/1666510)

当前问题：[需要帮助从 libjpeg 编译 jpegtran.c 代码](https://stackoverflow.com/q/14631530/1666510)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:37:36.320

您对更新 jconfig.h 文件的建议`#define HAVE_PROTOTYPES 1`只是针对更深层次问题的创可贴解决方案：jconfig.h 已损坏并且`#undef`对于您的编译器支持的许多重要项目不正确。

解决此问题的正确方法是按照 install.txt 建议手动编译 ckconfig.c 并让它为您生成一个 jconfig.h，然后继续进行 make 和 make install。

# linux - 如何从多个文件中提取一列，并将这些列粘贴到一个文件中？

> ID：14593580
> 
> 赞同：6
> 
> 时间：2013-01-29T22:54:39.947
> 
> 标签：linux, shell, paste

我想从*多个文件中提取第***5**列，以*数字**顺序*命名，然后将这些列并排粘贴到**一个**输出文件中。

 *****文件名如下所示：

```
sample_problem1_part1.txt
sample_problem1_part2.txt

sample_problem2_part1.txt
sample_problem2_part2.txt

sample_problem3_part1.txt
sample_problem3_part2.txt
...... 
```

每个问题文件 (1,2,3...) 有两个部分 (part1, part2)。每个文件的行数相同。内容如下：

```
sample_problem1_part1.txt
1 1 20 20 1
1 7 21 21 2
3 1 22 22 3
1 5 23 23 4
6 1 24 24 5
2 9 25 25 6
1 0 26 26 7

sample_problem1_part2.txt
1 1 88 88 8
1 1 89 89 9
2 1 90 90 10
1 3 91 91 11
1 1 92 92 12
7 1 93 93 13
1 5 94 94 14

sample_problem2_part1.txt
1 4 330 30 a
3 4 331 31 b
1 4 332 32 c
2 4 333 33 d
1 4 334 34 e
1 4 335 35 f
9 4 336 36 g 
```

输出应如下所示：（按*问题**1** _part **1***、*问题**1** _part **2***、*问题**2** _part **1***、*问题**2** _part **2***、*问题**3** _part **1***、*问题**3** _part **2***等顺序排列）

```
1 8 a ...
2 9 b ...
3 10 c ...
4 11 d ...
5 12 e ...
6 13 f ...
7 14 g ... 
```

我正在使用：

```
 paste sample_problem1_part1.txt sample_problem1_part2.txt > \
     sample_problem1_partall.txt
 paste sample_problem2_part1.txt sample_problem2_part2.txt > \
     sample_problem2_partall.txt
 paste sample_problem3_part1.txt sample_problem3_part2.txt > \
     sample_problem3_partall.txt 
```

接着：

```
for i in `find . -name "sample_problem*_partall.txt"`
do
    l=`echo $i | sed 's/sample/extracted_col_/'`
    `awk '{print $5, $10}'  $i > $l`
done 
```

和：

```
paste extracted_col_problem1_partall.txt \
      extracted_col_problem2_partall.txt \
      extracted_col_problem3_partall.txt > \
    extracted_col_problemall_partall.txt 
```

它适用于*几个*文件，但当文件数量很大（超过**4000**）时，这是一种疯狂的方法。任何人都可以帮助我解决能够处理多个文件的更简单的解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T07:46:28.450

这是使用`awk`和排序文件的一种方式：

```
awk '{ a[FNR] = (a[FNR] ? a[FNR] FS : "") $5 } END { for(i=1;i<=FNR;i++) print a[i] }' $(ls -1v *) 
```

结果：

```
1 8 a
2 9 b
3 10 c
4 11 d
5 12 e
6 13 f
7 14 g 
```

解释：

*   对于每个输入文件的每一行输入：

    *   将文件行号添加到值为第 5 列的数组中。

    *   `(a[FNR] ? a[FNR] FS : "")`是一个三元运算，它被设置为将数组值构建为记录。它只是询问文件行号是否已经在数组中。如果是这样，在添加第五列之前添加数组值，后跟默认文件分隔符。否则，如果行号不在数组中，不要添加任何东西，让它等于第五列。

*   在脚本的最后：

    *   使用 C 风格的循环遍历数组，打印每个数组值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T06:14:11.323

仅对于 ~4000 个文件，您应该能够：

```
 find . -name sample_problem*_part*.txt | xargs paste 
```

如果`find`以错误的顺序命名，请将其通过管道传输到`sort`：

```
 find . -name sample_problem*_part*.txt | sort ... | xargs paste 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T11:28:35.687

```
# print filenames in sorted order
find -name sample\*.txt | sort |
# extract 5-th column from each file and print it on a single line
xargs -n1 -I{} sh -c '{ cut -s -d " " -f 5 $0 | tr "\n" " "; echo; }' {} |
# transpose
python transpose.py ? 
```

其中`transpose.py`：

```
#!/usr/bin/env python
"""Write lines from stdin as columns to stdout."""
import sys
from itertools import izip_longest

missing_value = sys.argv[1] if len(sys.argv) > 1 else '-'
for row in izip_longest(*[column.split() for column in sys.stdin],
                         fillvalue=missing_value):
    print " ".join(row) 
```

### 输出

```
1 8 a
2 9 b
3 10 c
4 11 d
5 ? e
6 ? f
? ? g 
```

假设第一个和第二个文件的行数少于第三个（缺失值替换为`'?'`）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T00:40:04.193

试试这个。我的脚本假定每个文件都有相同的行数。

```
# get number of lines
lines=$(wc -l sample_problem1_part1.txt | cut -d' ' -f1)

for ((i=1; i<=$lines; i++)); do
  for file in sample_problem*; do
    # get line number $i and delete everything except the last column
    # and then print it
    # echo -n means that no newline is appended
    echo -n $(sed -n ${i}'s%.*\ %%p' $file)" "
  done
  echo
done 
```

这行得通。对于 4800 个文件，在 AMD Athlon(tm) X2 双核处理器 BE-2400 上，每 7 行需要**2 分 57.865 秒。**

PS：我的脚本的时间随着行数线性增加。合并 1000 行的文件需要很长时间。您应该考虑学习 awk 并使用 steve 的脚本。我测试了它：对于 4800 个文件，每个文件有 1000 行，只用了**65 秒！**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-28T19:42:58.367

您可以将 awk 输出传递给粘贴并将其重定向到一个新文件，如下所示：

> 粘贴 <(awk '{print $3}' file1) <(awk '{print $3}' file2) <(awk '{print $3}' file3) > file.txt*****

# php - HTTP 欺骗？

> ID：14593584
> 
> 赞同：2
> 
> 时间：2013-01-29T22:54:52.200
> 
> 标签：php, http, spoofing

我有两个问题：

1) 在 PHP 中，当程序员使用“REMOTE_ADDR”变量获取 Web 客户端的 IP 地址时，该 IP 地址是从 HTTP 标头中的字段获取的吗？或者从哪里来？

2) 如果客户端的 IP 地址是从 HTTP 标头中获取的，那么 Web 客户端可以“欺骗”或“更改”HTTP 标头以隐藏其真实 IP 地址吗？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T22:56:10.963

`REMOTE_ADDR`取自 TCP/IP 连接，*很难*欺骗。

但是，如果您的服务器位于反向代理后面，则可能不准确。在这种情况下，您必须阅读`X-Forwarded-For`标头，如果您的代理并不总是覆盖它，它很容易被欺骗*。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T17:02:18.390

**$_SERVER["REMOTE_ADDR"] ：**如前所述，从 TCP 连接中的 IP 套接字获取 IP... 欺骗真实 IP 的方法很容易使用远程服务器，例如：'TOR 网络'。

**示例：** 如果我想向站点服务器发送请求（但我需要欺骗我的 IP），我使用：

```
<?php

$ip = '127.0.0.1';
$port = '9051';
$auth = 'PASSWORD';
$command = 'signal NEWNYM';
$fp = fsockopen($ip,$port,$error_number,$err_string,10);
if(!$fp) { echo "ERROR: $error_number : $err_string";
    return false;
          } else {
                     fwrite($fp,"AUTHENTICATE \"".$auth."\"\n");
                     $received = fread($fp,512);
                     fwrite($fp,$command."\n");
                     $received = fread($fp,512);
                 }
 fclose($fp);
 $ch = curl_init();
 curl_setopt($ch, CURLOPT_URL, "http://whatismyip.org"); //ipimg.php
 curl_setopt($ch, CURLOPT_PROXY, "127.0.0.1:9050");
 curl_setopt($ch, CURLOPT_PROXYTYPE, CURLPROXY_SOCKS5);
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
 curl_setopt($ch, CURLOPT_VERBOSE, 0);
 $response = curl_exec($ch);
 curl_close($ch);
 echo $response;
?> 
```

此代码演示了我如何使用 TOR 服务来欺骗我的 IP，该服务使用 SOCKS5 / SOCKS4 在不使用我的真实 IP 的情况下向另一台服务器发送请求。我正在使用 whatismyip.org 对其进行测试以查看 IP 更改。

玩得开心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T22:56:57.707

1)`$_SERVER["REMOTE_ADDR"]`直接来自 TCP 连接。

2)`$_SERVER["REMOTE_ADDR"]`只能在非 SSL TCP 连接上使用中间人攻击进行欺骗（SSL 握手有一些防止 IP 欺骗的保护）。

2)`$_SERVER`来自 HTTP 标头的变量带有前缀，`HTTP_`是的，如果它们包含 IP 地址，它们可以被调用者轻而易举地欺骗。您永远不应信任`$_SERVER["HTTP_*"]`包含 IP 地址的变量。

# scala - 这个示例 Play 框架代码中的 unapply 有什么用（表单映射）

> ID：14593589
> 
> 赞同：10
> 
> 时间：2013-01-29T22:55:10.570
> 
> 标签：scala, playframework, playframework-2.0

我是 Play 框架的新手，正在阅读 2.1[示例](http://www.playframework.org/documentation/2.1-RC3/Samples)，在`computer-database`示例中，我发现了以下我不完全理解的表单定义。

`Computer.apply`和在这里的作用是什么`Computer.unapply`？

```
 val computerForm = Form(
    mapping(
      "id" -> ignored(NotAssigned:Pk[Long]),
      "name" -> nonEmptyText,
      "introduced" -> optional(date("yyyy-MM-dd")),
      "discontinued" -> optional(date("yyyy-MM-dd")),
      "company" -> optional(longNumber)
    )(Computer.apply)(Computer.unapply)
  ) 
```

（来自`controllers/Application.scala`）

**编辑**：这似乎是一个很好的资源：[https](https://groups.google.com/forum/?fromgroups=#!topic/play-framework/dxNQ8E81YJs) ://groups.google.com/forum/?fromgroups=#!topic/play-framework/dxNQ8E81YJs但仍然不确定我是否完全了解全局。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T23:08:47.360

您应该了解在 Scala 上下文中应用/取消应用的内容，因为它不是特定于 Play2/forms。

*   [Scala 之旅：提取器对象](http://www.scala-lang.org/node/112)
*   [Scala 提取器](http://www.tutorialspoint.com/scala/scala_extractors.htm)

> 在 apply 方法中，我们获取所需的参数并返回我们感兴趣的类的新实例，就像我们在 unapply 中做相反的那样 - 我们获取实例并提取所需的信息并以元组的形式返回它们。

简而言之：`apply`用于从参数构造计算机对象。`unapply`用于相反的情况，从 Computer 对象中提取参数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T23:14:25.083

当您想要将表单绑定到案例类的字段（在本例中`Computer`）时，这是 Play 中的常见模式。

该`mapping`方法允许您提供构造和解构函数，这些函数将被调用以填充表单并从中提取数据。

因为在这里你想去/从`Computer`，你需要一个方法来创建一个`Computer`from 参数，以及一个从 a 中提取参数的方法`Computer`，这正是`Computer.apply`and `Computer.unapply`。

相关示例：[Play 文档中有关 forms](http://www.playframework.org/documentation/2.1-RC3/ScalaForms)的映射示例。

# javascript - 使 Google 地图标记发光

> ID：14593594
> 
> 赞同：0
> 
> 时间：2013-01-29T22:55:37.730
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers

我们正在使用 v3.10 将使用 Google 地图的 Flash 应用程序重写为 HTML/CSS/JavaScript。在 Flash 中，他们使用 mx 效果来创建不同颜色的脉动发光来指示状态。

我一直在尝试找到一种在 JavaScript 中复制它的方法，但我一直无法找到解决方案。我玩过阴影，但它只是一个 png 图像。理想情况下，我想使用 CSS 或 JavaScript 工具，但也许我可以在标记后面使用动画 gif？

```
createMarker = function (mapMarkerVm) {
            var shadow = new google.maps.MarkerImage(
                    '/Content/images/mapIcon_glow.png',
                    new google.maps.Size(36, 52),
                    new google.maps.Point(0, 0),
                    new google.maps.Point(20, 52));
            return new google.maps.Marker({
                title: mapMarkerVm.Title() || "",
                position: new google.maps.LatLng(mapMarkerVm.Latitude() || 0.0, mapMarkerVm.Longitude() || 0.0),
                icon: createMarkerImage(mapMarkerVm.StatusIcon()),
                map: map,
                shadow: shadow,
                draggable: false,
                visible: true
            });
        }; 
```

![在此处输入图像描述](../Images/367ef71b38d32442e423e4fe40ef3aef.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:02:26.047

您可以使用 gif，但必须`optimized: false`在标记构造函数中进行设置。

来源： [.gif 标记谷歌地图](https://stackoverflow.com/questions/5979676/gif-marker-google-maps)

# wordpress-theming - 使用循环在 Wordpress 中显示 3 个具有不同 HTML 标记的帖子

> ID：14593598
> 
> 赞同：0
> 
> 时间：2013-01-29T22:55:41.467
> 
> 标签：wordpress-theming, wordpress

我希望能够在我的 index.php 页面上显示来自同一类别的 3 个帖子，但是由于我网站的 HTML/CSS 编码方式，我很难理解使用循环执行此操作的正确方法（因为三个部分使用的 div 的代码并不相同，它使用不同的 CSS 样式来实现分层效果/外观）。

这是HTML代码。

```
<div id="first-story" class="story">
<div class="content">
<h3 class="story-heading">Headline 1</h3>
    <ul>
       <li>Nullam sit amet scelerisque est. </li>   
       <li>Aliquam erat volutpat. Duis sed nisi nunc, faucibus rutrum mauris. </li>
       <li>Nullam iaculis lorem ut tortor ullamco per aliquet. Integer id leo non mauris pulvinar gravida vitae a enim. </li>
       <li>Nullam sit amet scelerisque est.</li>
    </ul>   
        <a class="learnmore" href="#"><img src="img/button-learnmore.png"></a></div>
    <div class="edge"></div>
</div>

<div id="second-story" class="story">
    <div class="content">
       <h3 class="story-heading">Headline 2</h3>
       <p>Paragraph text</p>
       <a class="learnmore" href="#"><img src="img/button-learnmore.png"></a></div>
    </div>
</div>

<div id="third-story" class="story">
    <div class="edge"></div>
    <div class="content">Headline 3</div>
            <ul>
               <li>List item</li>
            </ul>
            <a class="learnmore" href="#"><img src="img/button-learnmore.png"></a></div>
</div> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T11:03:52.737

快速，讨厌并且会完成工作（显然需要添加 the_content(); 等）

```
<?php 

$i = 1;
?>
<?php if (have_posts()) : ?>
<?php while (have_posts()) : the_post(); ?>
<?php if ($i == 1) { ?>
    <div id="first-story" class="story">
        <div class="content">  
            <h3 class="story-heading"><?php the_title(); ?></h3>
            <ul>
               <li>Nullam sit amet scelerisque est. </li>   
               <li>Aliquam erat volutpat. Duis sed nisi nunc, faucibus rutrum mauris. </li>
               <li>Nullam iaculis lorem ut tortor ullamco per aliquet. Integer id leo non mauris pulvinar gravida vitae a enim. </li>
               <li>Nullam sit amet scelerisque est.</li>
            </ul>   
            <a class="learnmore" href="<?php the_permalink(); ?></a>"><img src="img/button-learnmore.png"></a></div>
            <div class="edge"></div>
        </div>
<?php } elseif ($i == 2) { ?>

                <div id="second-story" class="story">
                    <div class="content">
                       <h3 class="story-heading"><?php the_title(); ?></h3>
                       <p>Paragraph text</p>
                       <a class="learnmore" href="<?php the_permalink(); ?>"><img src="img/button-learnmore.png"></a></div>
                    </div>
                </div>
<?php } else { ?>
                <div id="third-story" class="story">
                    <div class="edge"></div>
                    <div class="content"><?php the_title(); ?></div>
                            <ul>
                               <li>List item</li>
                            </ul>
                            <a class="learnmore" href="<?php the_permalink(); ?>"><img src="img/button-learnmore.png"></a></div>
                </div>
<?php } ?>
    <?php $i++; ?>
    <?php endwhile; ?>
<?php endif; ?> 
```

# r - 使用prcomp和我自己在R中进行主成分分析：不同的结果

> ID：14593603
> 
> 赞同：6
> 
> 时间：2013-01-29T22:55:56.623
> 
> 标签：r, pca

我哪里错了？我正在尝试通过 prcomp 和我自己执行 PCA，但我得到了不同的结果，你能帮帮我吗？

自己动手：

```
>database <- read.csv("E:/R/database.csv", sep=";", dec=",") #it's a 105 rows x 8 columns, each column is a variable
>matrix.cor<-cor(database)
>standardize<-function(x) {(x-mean(x))/sd(x)}
>values.standard<-apply(database, MARGIN=2, FUN=standardize)
>my.eigen<-eigen(matrix.cor)
>loadings<-my.eigen$vectors
>scores<-values.standard %*% loadings
>head (scores, n=10) # I m just posting here the first row scores for the first 6 pc

[,1]       [,2]       [,3]        [,4]       [,5]        [,6]        

2.3342586  2.3426398 -0.9169527  0.80711713  1.1409138 -0.25832090    

>sd <-sqrt (my.eigen$values)
>sd

[1] 1.5586078 1.1577093 1.1168477 0.9562853 0.8793033 0.8094500 0.6574788
0.4560247 
```

使用 PRCOMP 进行操作：

```
>database.pca<-prcomp(database, retx=TRUE, center= TRUE, scale=TRUE)
>sd1<-database.pca$sdev 
>loadings1<-database.pca$rotation
>rownames(loadings1)<-colnames(database)
>scores1<-database.pca$x
>head (scores1, n=10)
PC1        PC2        PC3         PC4        PC5         PC6       
-2.3342586  2.3426398  0.9169527  0.80711713  1.1409138  0.25832090 
```

range (scores-scores1) 不为零！请帮我！！！格洛丽亚

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T00:58:02.683

看起来您的主成分分数或多或少完全相同，只是符号不同。[正如我在这里](https://stats.stackexchange.com/q/30348/5443)了解到的，主成分的符号基本上是任意的。

如果你用类似的东西测试你手动计算的分数`range(abs(scores) - abs(scores1))`，你应该得到非常接近 0 的东西（可能不完全是 0，由于可能的浮点精度影响）。

# titanium - 钛合金 - 如何坚持模型单例？

> ID：14593608
> 
> 赞同：1
> 
> 时间：2013-01-29T22:56:24.670
> 
> 标签：titanium, titanium-mobile, appcelerator-mobile

*在 iOS 和 Android
coffeeScript中运行*

我有一个模型，例如：

```
 exports.definition =
        config:
            columns:
                cookie: "string"
            defaults:
                cookie: ""
            adapter:
                # is this valid?
                type: "sql"
                collection_name: "userInfo"
        extendModel: (Model) ->
            _.extend Model::,
                isSignedIn:->
                    this.get('cookie').length > 0
            Model 
```

还有一个 index.xml：

```
<Alloy>
    <Model id="userInfo" src="userInfo" instance="true"/> 
```

因此，此`userInfo`属性在应用程序的生命周期中发生变化，用户登录，我希望保持该 cookie 保持不变，并在应用程序初始化时自动加载。

我如何在这个框架中做到这一点？

**更新另一个问答**
供参考：http: [//developer.appcelerator.com/question/147601/alloy---persist-and-load-a-singleton-model#255723](http://developer.appcelerator.com/question/147601/alloy---persist-and-load-a-singleton-model#255723)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-22T14:24:50.190

他们在 appcelerator 文档中没有很好地解释它，但是如果您想使用内置合金属性同步适配器存储和检索属性，则必须在使用模型时指定一个唯一的“id”。您已经在 xml 标记中执行了此操作：`<Model id="userInfo"`但这仅适用于该视图文件。如果您想在控制器中访问/更新此属性，请执行以下操作：

```
var UserInfo = Alloy.createModel("userInfo", {id: "userInfo"});
UserInfo.fetch();
UserInfo.set("cookie", "new value");
UserInfo.save(); 
```

如果你想在代码中保留对这个属性的引用，我相信你只需将它附加到alloy.js中的全局命名空间：

```
var UserInfo = Alloy.createModel("userInfo", {id: "userInfo"});
UserInfo.fetch();
Alloy.Globals.UserInfo = UserInfo; 
```

在您执行的控制器中：

```
var UserInfo = Alloy.Globals.UserInfo; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T14:29:34.477

将您的模型`userInfo.js`放入`app/model`中，它可能如下所示：

```
exports.definition = {

    config : {
        "columns" : {
            "cookie" : "string"
        },
        "defaults" : { "cookie" : "" }
        "adapter" : {
            "type" : "sql",
            "collection_name" : "userInfo"
        }
    },

    extendModel : function(Model) {
        _.extend(Model.prototype, {
            isSignedIn : function() {
                this.get('cookie').length > 0
            }
        });
        return Model;
    },

    extendCollection : function(Collection) {
        _.extend(Collection.prototype, {
        });
        return Collection;
    }
} 
```

从这里开始，这取决于您想要做什么，但是您可以轻松地从集合中获取模型`userInfo`，只需将以下`<Collection src="userInfo"/>`内容放在您的 xml 文件中。

作为旁注，我通常只使用这些[`Titanium.App.Properties`](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.App.Properties)东西来存储用户信息。属性用于将与应用程序相关的数据存储在属性/值对中，这些数据在应用程序会话和设备电源循环之后仍然存在。例如：

```
// Returns the object if it exists, or null if it does not
var lastLoginUserInfo = Ti.App.Properties.getObject('userInfo', null);
if(lastLoginUserInfo === null) {
    var userInfo = {cookie : "Whatever the cookie is", id : "123456789"};
    Ti.App.Properties.setObject('userInfo', userInfo);
} else {
   // Show the cookie value of user info
   alert(lastLoginUserInfo.cookie);
} 
```

# c# - 位图参数异常

> ID：14593609
> 
> 赞同：1
> 
> 时间：2013-01-29T22:56:29.437
> 
> 标签：c#, exception, bitmap

我正在尝试创建一个示例程序，但在创建所需的位图时遇到问题。当我尝试运行下面的代码时，我得到了一个 ArgumentException。

我认为这是因为它在磁盘上找不到文件而被抛出。如果是这种情况，我应该将文件放在我的项目中的哪个位置以便它可以找到它？我尝试将文件放在主项目目录中，并尝试将其放在调试和发布文件夹中。

如果这不是导致问题的原因，有人可以指出我正确的方向吗？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;
using System.Drawing;

namespace Given
{
    public class Photo : Form
    {
        Image image;

        public Photo()
        {
            image = new Bitmap("jug.jpg"); // ArgumentException thrown here
            this.Text = "Lemonade";
            this.Paint += new PaintEventHandler(Drawer);
        }

        public virtual void Drawer(Object source, PaintEventArgs e)
        {
            e.Graphics.DrawImage(image, 30, 20);
        }
    }
}

namespace Photo_Decorator
{
    static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new Given.Photo());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:04:07.883

It's throwing this because it can't find the JPG, and therefore can't create a proper bitmap object. You need to either place the image file in the same folder as the EXE (Debug? Release?), or specify the entire path to the image (e.g C:/jug.jpg). Hope this helps :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T22:59:34.123

您需要将该文件放在与可执行文件相同的文件夹中（bin\Debug 或 bin\Release）。您可以将它放在`bin`文件夹中，然后使用 @"..\jug.jpg" 作为路径，这样它就可以在调试和发布模式下工作。

# sql - 选择从现在开始的纪元以来的秒数的行

> ID：14593610
> 
> 赞同：0
> 
> 时间：2013-01-29T22:56:35.170
> 
> 标签：sql, pdo

我想知道有没有办法只选择自纪元以来的时间和“now（）”大于一定秒数的行。

我用一个字段来存储行，该字段包含自 php 函数创建的纪元以来的秒数`time()`。

所以是这样的：

`SELECT * FROM table WHERE (now - field_time) > 60 seconds`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T23:00:01.207

`NOW()`返回一个 SQL DateTime，`UNIX_TIMESTAMP()`如果您不提供任何日期作为参数，您现在需要的是返回自纪元以来的秒数（unix 时间戳）。

# c# - 如何使用 NHibernate CreateCriteria 进行可能为空值的连接？

> ID：14593614
> 
> 赞同：0
> 
> 时间：2013-01-29T22:57:16.657
> 
> 标签：c#, nhibernate

NHibernate 版本：3.3.1

原始查询如下。

```
List<PostInstruction> instructions = PostInstruction.Query(
    Restrictions.Eq("Campaign", campaign),
    Restrictions.In("Status", new PostInstructionStatus[] { 
                PostInstructionStatus.Pending, 
                PostInstructionStatus.Finished 
                }),
    Restrictions.Or(
        Restrictions.Gt("DateCreated", DateTime.UtcNow - TimeSpan.FromMinutes(15)),
        Restrictions.IsNotNull("Post")
        )
    ); 
```

我们只是将它用于计数功能，所以我将它转换为只返回计数，但遇到了问题。我必须执行两个单独的查询才能考虑空 Post 值。有没有办法可以在单个查询中执行以下操作？

```
 public static int CountByCampaignCity(Campaign campaign, City city)
    {
        int finished, pending;

        using (ISession session = DataAccess.SessionFactory.OpenSession())
        using (ITransaction transaction = session.BeginTransaction())
        {
            try
            {
                Type objectType = typeof(PostInstruction);
                ICriteria criteria = session.CreateCriteria(objectType);

                criteria.Add(Restrictions.Eq("Campaign", campaign));
                criteria.Add(Restrictions.Eq("City", city));
                criteria.Add(Restrictions.Eq("Status", PostInstructionStatus.Finished));

                criteria.CreateCriteria("Post").Add(Restrictions.In("Status", new PostStatus[] { PostStatus.Pending, PostStatus.Live }));
                criteria.SetProjection(Projections.CountDistinct("Id"));

                finished = int.Parse(criteria.UniqueResult().ToString());
            }
            catch
            {
                if (transaction != null)
                    transaction.Rollback();

                throw;
            }
        }

        using (ISession session = DataAccess.SessionFactory.OpenSession())
        using (ITransaction transaction = session.BeginTransaction())
        {
            try
            {
                Type objectType = typeof(PostInstruction);
                ICriteria criteria = session.CreateCriteria(objectType);

                criteria.Add(Restrictions.Eq("Campaign", campaign));
                criteria.Add(Restrictions.Eq("City", city));
                criteria.Add(Restrictions.Eq("Post", null));
                criteria.Add(Restrictions.Eq("Status", PostInstructionStatus.Pending));
                criteria.Add(Restrictions.Gt("DateCreated", DateTime.UtcNow - TimeSpan.FromMinutes(15)));
                criteria.SetProjection(Projections.CountDistinct("Id"));

                pending = int.Parse(criteria.UniqueResult().ToString());
            }
            catch
            {
                if (transaction != null)
                    transaction.Rollback();

                throw;
            }
        }

        return pending + finished;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:44:04.503

使用 QueryOver 您应该能够执行以下操作：

```
var instructionsCount = session.QueryOver<PostInstruction>()
    .Select(Projections.Count<PostInstruction>(pi => pi.Id))
    .Where(pi => pi.Campaign == campaign && pi.City == city && (pi.Post == PostStatus.Pending || pi.Post == PostStatus.Live || pi.Post == null)); //Add your other conditions

Console.WriteLine(instructionsCount.SingleOrDefault<int>()); 
```

# ruby-on-rails - Rails：创建功能规范来测试具有文件上传字段的表单

> ID：14593621
> 
> 赞同：3
> 
> 时间：2013-01-29T22:57:55.340
> 
> 标签：ruby-on-rails, rspec, tdd, capybara, bdd

人们如何处理以下情况：我有一个拍摄图像的表格。如何验证图像是否被接受？或者这不是你应该在这个级别的测试中验证的东西吗？

```
scenario "add facebook like gate and save as draft" do
  path =  "#{Rails.root}/app/assets/images/like_gate.jpg"

  visit root_url
  click_link I18n.t(:create_a_new_promotion)
  fill_in I18n.t(:title), with: "My promotion"
  click_button I18n.t(:continue)

  expect(page).to have_text(I18n.t(:promotion_details))
  expect(page).to have_text("My promotion")

  fill_in I18n.t(:like_gate_copy), with: "Like our page to enter the contest!"
  attach_file I18n.t(:upload_lg_image), path
  click_button I18n.t(:save_as_draft)

  expect(page).to have_text(I18n.t(:promotion_successfully_saved))
end 
```

有没有一种特殊的方法来验证它`attach_file`实际上是否成功？此外，人们一般如何测试文件上传？在您的请求规格、控制器规格和型号规格中？我想坚持使用 RSpec 和 Capybara 进行所有测试。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-31T22:58:54.847

既然`attach_file`是水豚方法，就不要测试了。

相反，请考虑有效/无效上传如何改变您的系统状态。例如，如果上传用户头像，请验证用户模型是否有指向您刚刚上传的图像 ID 的指针。如果您正在进行更高级别的测试，请验证用户是否看到了他们希望在页面上看到的上传图片（网址）。

总之，不要测试图片上传，测试它的结果。

`expect(page).to have_selector("img[src=#{path}]")`

# iis-7 - 捆绑不适用于映射的虚拟目录

> ID：14593622
> 
> 赞同：4
> 
> 时间：2013-01-29T22:57:56.073
> 
> 标签：iis-7, asp.net-mvc-4, bundle, virtual-directory, asp.net-optimization

我们有一个站点，其中 CSS 和 JavaScript 分别捆绑到`/Content/`和`/Scripts/`目录中。这两者也是单独域中虚拟目录的映射目标，用于静态资源（因此不提供 cookie）。

问题在于，在我们的生产环境中， where`compilation -> debug`设置为 false（因此启用了捆绑和缩小），相对 URL 工作正常并从捆绑系统提供服务，但静态域 URL（使用指向相同的虚拟目录位置）产量`HTTP 404 errors`。

有没有办法配置 IIS 以允许捆绑适用于此虚拟目录的内容？我的愿景是必须为静态域创建一个单独的虚拟 MVC 项目，以便它识别捆绑，但想看看是否有更好的解决方案。

以下是 IIS 的当前处理顺序：

1.  接收对（捆绑的）资源的传入请求，例如`[static domain]/Content/all.css`
2.  运行任何 HTTP 处理程序，例如捆绑（如果可用）（在静态域的这种情况下没有）
3.  跟随虚拟目录并提供资源（如果可用），即搜索`([main domain]/Content/all.css`）

因为这个文件在文件系统上并不真正存在，所以`HTTP 404`引发了 an 。理想情况下， step **2**应该在 step **3**之后运行。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T23:44:28.990

我做了一些实验并设法解决了它。*不起作用*的是将静态站点的根目录指向主网站的同一个根目录，因为`web.config`文件是共享的 - 对静态站点所做的任何更改（即禁用会话状态）也适用于主网站。

最后，有效的方法如下：

*   让静态域指向文件系统上的单独根文件夹。
*   保持静态站点上的虚拟目录 (`/Content/`和`/Scripts/`) 指向它们在主站点上的相应位置。
*   `.htaccess`由于我们使用 Helicon 的 URL-rewriter 进行缓存清除，因此使用与主站点中使用的相同规则创建一个准系统文件；把它放在静态站点的根目录中。
*   将`global.asax`文件从主网站复制到静态网站的根目录。这不可能是捷径。
*   将`/bin/`文件夹的内容从主网站复制到静态网站。
    *   IIS 中指向`/bin/`主网站上的文件夹的虚拟目录将不起作用。
    *   在文件系统中创建指向主网站文件夹的快捷方式`/bin/`也不起作用。
*   在 IIS 中，确保静态站点使用自己的应用程序池，并且已针对 .NET 4.0 集成管道模式进行了配置。这样 MVC 4 捆绑就可以工作了。
*   `web.config`使用添加创建一个准系统`UrlRoutingModule`。

这是我们`web.config`的静态站点：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.web>
        <customErrors mode="Off">
        </customErrors>
        <sessionState mode="Off" />
        <pages enableSessionState="false" enableViewState="false" enableViewStateMac="false" renderAllHiddenFieldsAtTopOfForm="false" />
    </system.web>
    <system.webServer>
        <validation validateIntegratedModeConfiguration="false" />
        <modules runAllManagedModulesForAllRequests="true">
            <remove name="ScriptModule" />
            <add name="UrlRoutingModule" type="System.Web.Routing.UrlRoutingModule, System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        </modules>
        <urlCompression doStaticCompression="true" doDynamicCompression="true" />
        <security>
            <requestFiltering allowDoubleEscaping="True" />
        </security>
        <tracing>
            <traceFailedRequests>
                <add path="*">
                    <traceAreas>
                        <add provider="ASPNET" areas="Infrastructure,Module,Page,AppServices" verbosity="Verbose" />
                    </traceAreas>
                    <failureDefinitions timeTaken="00:00:00" statusCodes="200" />
                </add>
            </traceFailedRequests>
        </tracing>
        <!-- Cache static content for a month, only enable on UAT or Live -->
        <staticContent>
            <clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="30.00:00:00"/>
        </staticContent>
    </system.webServer>
</configuration> 
```

主要思想是捆绑需要在静态站点上启用和运行 ASP.NET MVC4，因为捆绑是在考虑虚拟目录之前由 IIS 评估的（而且似乎没有办法扭转这种情况）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-13T14:20:39.327

在 css 文件中创建具有相对路径的 url，例如：

```
div.loader {
    background-image: url("../grail/images/loader.gif");
} 
```

在 js 文件中使用母版页中的隐藏文件：

```
@Html.Hidden("HiddenCurrentUrl",  Url.Content("~")) 
```

在包中而不是 CssRewriteUrlTransform 使用您的自定义 IItemTransform

```
public class VirtualCssRewriteUrlTransform : IItemTransform
{
    private CssRewriteUrlTransform wrapper;

    public VirtualCssRewriteUrlTransform ()
    {
        this.wrapper = new CssRewriteUrlTransform();
    }

    public string Process(string includedVirtualPath, string input)
    {
        var result = this.wrapper.Process(includedVirtualPath, input);
        // if virtual directory exists
        if (HttpRuntime.AppDomainAppVirtualPath != "/")
        {
            result = result.Replace(@"url(/", @"url(" + HttpRuntime.AppDomainAppVirtualPath + @"/");
        }

        return result;
    }
} 
```

# sql - 使用外键删除记录

> ID：14593624
> 
> 赞同：2
> 
> 时间：2013-01-29T22:58:18.993
> 
> 标签：sql, foreign-keys

我对使用外键删除记录有一个小问题。问题是，一开始我认为使用外键真的很有帮助，但是当我使用它们时，这对我来说真的有问题。例如：我创建了两个表：

```
Pizza: id, name, price
Order: id_Pizza (Foreign Key), address, telephone, date 
```

在客户下订单的所有时间，都会创建带有所订购比萨饼 ID 的记录。假设我有 2000 份 Margherita 披萨订单（id=1），所以我有 2000 条 id_Pizza = 1 的记录。现在我需要从菜单中删除 margherita，因为我不再想销售那种类型的披萨，但我不能，因为它在表订单中用作外键。

如何管理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T23:08:37.070

永远不要删除行 - 而是引入一`active bit not null`列并在菜单上仅显示具有`active=1`.

妈的，我现在饿了……

# excel - Excel - 打开第二个文件将所有 UDF 输出设置为 #VALUE

> ID：14593626
> 
> 赞同：3
> 
> 时间：2013-01-29T22:58:20.667
> 
> 标签：excel, vba, file-io

这是一个奇怪的问题。

所以我有一个工作簿，它使用了一些用户定义的函数（用 VBA 编写），可以进行简单的求和。这些工作正常。

但是，当我打开第二个工作簿时，所有这些 UDF 的输出都会更改为 #VALUE!。如果我用 ctrl + alt + F9 重新计算工作簿，UDF 会输出它们的正确值。

由于重新计算工作正常，并且函数没有抛出任何错误，我不（认为）问题出在 VBA 代码上......有人知道为什么会这样吗？

注意：我打开第二个文件并不重要，所有工作簿都具有相同的效果。

**已解决** 问题是 UDF 像这样设置工作表对象：

```
Set Sheet = Worksheets("sample_name") 
```

这需要更改为：

```
Set Sheet = ThisWorkbook.Worksheets("sample_name") 
```

# entity-framework - 每个具体类型 (TPC) 继承的模型第一个表保存到两个表

> ID：14593629
> 
> 赞同：1
> 
> 时间：2013-01-29T22:58:52.193
> 
> 标签：entity-framework

尝试首先使用模型实现每个具体类型的表，但是在保存派生类型时，EF 会同时保存到基表和派生表。如何配置 EF 以将类型保存到正确的对应表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:48:11.497

这里有一个很好的讨论选择一种建议反对 TPC for Entity Framework 的方法：http: [//blogs.msdn.com/b/alexj/archive/2009/04/15/tip-12-choosing-an-inheritance-策略.aspx](http://blogs.msdn.com/b/alexj/archive/2009/04/15/tip-12-choosing-an-inheritance-strategy.aspx)

**出于这个原因：**虽然 EF 运行时支持 TPC，但设计器不支持，并且在 EF 中使用 TPC 会强制您避免在基本类型中进行关联。由于这些问题，我们通常不鼓励将 TPC 与实体框架一起使用。

我最好的猜测是，如果您将写入基表和派生表作为您的问题，您是否尝试在您有一个由附加具体类扩展的具体类的地方实现这一点？根据上面的讨论，简单的答案是 TPC 对于 EF 不会像这样工作（引用的文章是 2009 年，但我认为这没有改变）。

# php - PHP - 如何将 SimpleXML 解析的结果正确推送到数组中？

> ID：14593630
> 
> 赞同：0
> 
> 时间：2013-01-29T22:58:53.143
> 
> 标签：php, arrays, xpath, simplexml

我正在尝试将 xml 解析的结果推送到多维数组。XML 的结构在[这里](http://dl.dropbox.com/u/72519118/response.xml)。PHP 程序是（不能正常工作）：

```
$xml_url = simplexml_load_file("url to the xml document");
$data = $xml_url->xpath('MULTIPLE/SINGLE/KEY');

$current = 0;
$topics_list = array();

//display list of 'chapters'
foreach($data as $chap_name) {
    if ($chap_name['name'] == 'name') {
        echo $chap_name->VALUE . '<br />';
        $topics_list[$current]['chapter'] = $chap_name->VALUE;
    }
}

$data2 = $xml_url->xpath('MULTIPLE/SINGLE/KEY[@name="modules"]/MULTIPLE/SINGLE/KEY');

//display list of 'topics' & 'contents'
foreach($data2 as $topic_name) {
    if ($topic_name['name'] == 'name') {
        echo $topic_name->VALUE . '<br />';
        $topics_list[$current]['topic'] = $topic_name->VALUE;
    }
    if ($topic_name['name'] == 'description') {
        echo $topic_name->VALUE . '<br />';
        $topics_list[$current]['content'] = $topic_name->VALUE;
    }
}
print_r($topics_list); 
```

我要在其中推送数据的 Array 的结构是：

```
Array (
            [0] => Array (
                    [chapter] => Chapter_name1
                    [name] => Topic_name1
                    [content] => Content_of_the_topic1
                )
            [1] => Array (
                    [chapter] => Chapter_name1
                    [name] => Topic_name2
                    [content] => Content_of_the_topic2
                )
            [2] => Array (
                    [chapter] => Chapter_name2
                    [name] => Topic_name2
                    [content] => Content_of_the_topic2
            )
            .....
        ) 
```

**更新：**这是上述代码处理的结果：

```
Array(
    [0] => Array(

        [chapter] => SimpleXMLElement Object
            (
                [0] => STÖRUNGEN
            )

        [topic] => SimpleXMLElement Object
            (
                [0] => 3.25 Starke Blutung
            )

        [content] => SimpleXMLElement Object
            (
                [@attributes] => Array
                    (
                        [null] => null
                    )
            )
    ) 
```

)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:29:54.760

尝试将 SimpleXMLElement 中的值“转换”为字符串，然后将其添加到数组中，如下所示：

```
// add (string) after the '='
$topics_list[$current]['content'] = (string) $topic_name->VALUE; 
```

这将确保 SimpleXMLElement 元素的*值*作为字符串而不是对象添加。

另外（如其他人所标记），确保增加 $current 以防止每条记录覆盖前一条

这是您更新的代码；但是*请阅读代码中的注释*

```
$xml_url = simplexml_load_file("url to the xml document");
$data  = $xml_url->xpath('MULTIPLE/SINGLE/KEY');
$data2 = $xml_url->xpath('MULTIPLE/SINGLE/KEY[@name="modules"]/MULTIPLE/SINGLE/KEY');

$current = 0;
$topics_list = array();

//display list of 'chapters'
foreach($data as $chap_name) {
    if ($chap_name['name'] == 'name') {
        $topics_list[$current]['chapter'] = (string) $chap_name->VALUE;
    }

    // display list of 'topics' & 'contents'
    // NOTE: Not sure if this will work as expected, based on
    //       the name 'topic', I suspect a single chapter
    //       will have *multiple* topics.
    //       Also, those 'topics' will probably need to be 'matched'
    //       to the current 'chapter', so that only the topics for
    //       *this* chapter will be added here!
    foreach($data2 as $topic_name) {
        if ($topic_name['name'] == 'name') {
            $topics_list[$current]['topic'] = (string) $topic_name->VALUE;
        }
        if ($topic_name['name'] == 'description') {
            $topics_list[$current]['content'] = (string) $topic_name->VALUE;
        }
    }

    $current++;
}

print_r($topics_list); 
```

# c# - 创建后如何更改 DevExpress 项目的主题？

> ID：14593633
> 
> 赞同：0
> 
> 时间：2013-01-29T22:58:58.227
> 
> 标签：c#, .net, css, devexpress

我创建了一个 DevExpress Web 项目 (.NET) 并在向导中选择了一个主题。我现在在主题方面遇到了一些大小问题，如果不创建新项目并再次通过向导，然后将我的代码复制到新项目中，我无法弄清楚如何更改主题。

我假设在某个地方我缺少一个设置。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:45:15.880

来源：[项目向导](http://documentation.devexpress.com/#AspNet/CustomDocument11614/Choose%20Theme)文档

选择主题选项卡允许您指定要应用于您的站点的主题。您可以使用[可用主题](http://documentation.devexpress.com/AspNet/CustomDocument6655.aspx)或从 dll 文件添加自定义主题。

所选主题指定 devExpress 配置部分的主题设置。

*aspx*

```
<devExpress>
     <themes enableThemesAssembly="true" styleSheetTheme="" theme="Aqua" />
     ...
</devExpress> 
```

来源：[Web 应用程序模板](http://documentation.devexpress.com/#AspNet/CustomDocument11827)

*   模板注册 devExpress 元素并将其与默认设置一起添加到 Web.config 文件中。

*aspx*

```
<configSections>
     <sectionGroup name="devExpress">
          <section name="themes" type="DevExpress.Web.ASPxClasses.ThemesConfigurationSection, DevExpress.Web.v12.1, Version=12.1.3.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" requirePermission="false" />
          <section name="compression" type="DevExpress.Web.ASPxClasses.CompressionConfigurationSection, DevExpress.Web.v12.1, Version=12.1.3.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" requirePermission="false" />
          <section name="settings" type="DevExpress.Web.ASPxClasses.SettingsConfigurationSection, DevExpress.Web.v12.1, Version=12.1.3.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" requirePermission="false" />
          <section name="errors" type="DevExpress.Web.ASPxClasses.ErrorsConfigurationSection, DevExpress.Web.v12.1, Version=12.1.3.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" requirePermission="false" />
     </sectionGroup>
</configSections>
...
<devExpress>
     <themes enableThemesAssembly="true" styleSheetTheme="" theme="DevEx" />
     <compression enableHtmlCompression="false" enableCallbackCompression="true" enableResourceCompression="true" enableResourceMerging="true" />
     <settings rightToLeft="false" />
     <errors callbackErrorRedirectUrl="" />
</devExpress> 
```

*   该模板指定您在向导中设置的 Web.config 选项。

浏览这些文档链接并尝试根据需要修改这些设置。

# php - 将 Zend_Service_Twitter_Search 与经过身份验证的请求一起使用

> ID：14593638
> 
> 赞同：2
> 
> 时间：2013-01-29T22:59:11.613
> 
> 标签：php, zend-framework, twitter, oauth

我需要知道如何将 Zend_Service_Twitter_Search 与 zend_oauth 集成，我在没有 OAuth 的情况下使用它，但后来 twitter 宣布他们将在每个端点上请求身份验证，甚至是公共端点，所以现在我需要对 Zend_Service_Twitter_Search 请求进行身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:34:26.833

我已经通过这种方式“发送推文”完成了它（您可以在Twitter 的[开发站点](https://dev.twitter.com/)上获取为您自己的帐户生成的 oAuth 令牌）：

```
 /**
 * Create new Twitter client
 * 
 * @return Zend_Service_Twitter 
 */
protected function getTwitterClient()
{
    $token = new Zend_Oauth_Token_Access();

    $token->setParams(array(
        'oauth_token'        => 'o auth token',
        'oauth_token_secret' => 'o auth secret',
    ));

    $twitter = new Zend_Service_Twitter(array(
        'consumerKey'    => 'consumer key',
        'consumerSecret' => 'consumer secret',
        'accessToken'    => $token
    ));

    return $twitter;
} 
```

# facebook - 在获得任何特权之前获取用户的 Facebook ID？

> ID：14593639
> 
> 赞同：1
> 
> 时间：2013-01-29T22:59:15.007
> 
> 标签：facebook, facebook-graph-api

是否可以在用户获得任何特权或登录应用程序之前获取用户的 facebook id？或者他是否必须先登录才能访问他的 facebook id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:30:54.277

很简单：不，没有（合法的）方式！

# php - Drupal 6查询多个表

> ID：14593648
> 
> 赞同：1
> 
> 时间：2013-01-29T22:59:45.100
> 
> 标签：php, mysql, drupal

Drupal 6 查询语法有一些问题。我的查询本身就可以正常工作：

```
SELECT term_node.tid, term_data.name FROM term_node, term_data WHERE nid = 22640 
```

以下是我将其转换为与 drupal 6 一起使用时所拥有的内容：

```
$currentTIDs = db_query("SELECT {term_node}.tid, {term_data}.name FROM {term_node}, {term_data} WHERE nid = 22640");

while ($cTids = db_fetch_object ($currentTIDs)) {
array_push($currentTIDsArray, $cTids);
}

drupal_set_message('<pre>' . print_r($currentTIDsArray, TRUE) . '</pre>'); 
```

这会导致一个空的查询/数组？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:32:45.923

这是正确的方法：

```
SELECT tn.tid, td.name FROM {term_node} tn, {term_data} td WHERE nid = 22640"); 
```

# facebook - 是否可以将 Facebook 评论插件与图形对象 ID/图形 URL 而不是 www URL 一起使用？

> ID：14593651
> 
> 赞同：8
> 
> 时间：2013-01-29T22:59:59.647
> 
> 标签：facebook, facebook-graph-api, facebook-comments, facebook-social-plugins

不久前，我构建了这个：

[http://www.littlebray.co.uk/photos.aspx](http://www.littlebray.co.uk/photos.aspx)

这是 Facebook 相册画廊的 Facebook 外部分复制品，画廊部分的照片都是从 Little Bray 页面 (fb.com/littlebray) 上的 Facebook 相册中提取的，放大它们会给你一个全屏视图其中有评论功能在右边距，就像 Facebook。

您会注意到，虽然此评论部分看起来有点像 Facebook 插件，但实际上并非如此，原因是如果我使用 Facebooks 评论插件，当用户在网站上评论照片或评论时在同一张照片上（记住照片来自同一个来源），它将创建两个不同的评论流，一个显示在 FB 上，一个显示在网站上。

使用我的方法，在网站或 FB 上发布的任何评论都会出现在这两个地方，因为它们都直接注入到与照片的对象 ID 相关的 FB 图中。

稍后，我创建了另一个类似的图片库，但在右侧边缘使用 Facebook 的社交插件“评论”来评论照片。但这里的不同之处在于，这些照片是由网站托管的，而不是 Facebook 相册对象，所以这个其他网站是这些图片的唯一来源，因此在通过 URL 发表评论时创建 FB 对象很好。

但是...这让我开始思考，我的第一个示例是否需要大量工作，是否可以使用 Facebook 自己的社交插件以这种方式在 Facebook 上已经存在的对象上发表评论？

我尝试从我的状态更新中将图形 URL [https://graph.facebook.com/FB_OBJECT_ID](https://graph.facebook.com/FB_OBJECT_ID)粘贴到 Facebook 社交插件页面上的评论示例中，但没有显示任何内容。

有任何想法吗？

编辑 - -

我发现我不是一个人在问这个问题：

[为已有的 Facebook 帖子使用社交插件](https://stackoverflow.com/questions/12218849/using-social-plugins-for-pre-existing-facebook-posts?rq=1)

[将打开图形对象中的评论加载到 Facebook 评论社交插件中](https://stackoverflow.com/questions/12012087/load-comments-from-open-graph-object-into-facebook-comments-social-plugin?rq=1)

不过，这些都没有令人满意的答案。也许我只需要改进自己的代码并制作自己的插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T18:52:19.767

此时不能以这种方式使用评论插件。

# vb.net - DataGridView 仅在单击单元格时刷新样式

> ID：14593657
> 
> 赞同：1
> 
> 时间：2013-01-29T23:00:20.963
> 
> 标签：vb.net, datagridview, formatting, cell

我在 VB.NET 和 VS2012 中有一个 DGV。我正在尝试动态更改各种单元格的单元格格式。以下是我的代码：

```
Private Sub gridFinancial_CellFormatting(sender As Object, e As DataGridViewCellFormattingEventArgs) Handles gridFinancial.CellFormatting
    Try
        For Each row As chgltrDataSet.gridsourceRow In frmFinBatchChrg.ChgltrDataSet.gridsource.Rows
            If gridFinancial.CurrentRow.Cells("CompBool").Value = True Then
                Me.gridFinancial.CurrentRow.Cells(0).Style.BackColor = Color.Yellow
                Me.gridFinancial.CurrentRow.Cells(1).Style.BackColor = Color.Yellow
                Me.gridFinancial.CurrentRow.Cells(2).Style.BackColor = Color.Yellow
                Me.gridFinancial.CurrentRow.Cells(3).Style.BackColor = Color.Yellow
                Me.gridFinancial.CurrentRow.Cells(4).Style.BackColor = Color.Yellow
                Me.gridFinancial.CurrentRow.Cells(5).Style.BackColor = Color.Yellow
                Me.gridFinancial.CurrentRow.Cells(6).Style.BackColor = Color.Yellow
                Me.gridFinancial.CurrentRow.Cells(7).Style.BackColor = Color.Yellow
                Me.gridFinancial.CurrentRow.Cells(8).Style.BackColor = Color.Yellow

                Me.gridFinancial.CurrentRow.Cells(0).ReadOnly = True
                Me.gridFinancial.CurrentRow.Cells(1).ReadOnly = True
                Me.gridFinancial.CurrentRow.Cells(2).ReadOnly = True
                Me.gridFinancial.CurrentRow.Cells(3).ReadOnly = True
                Me.gridFinancial.CurrentRow.Cells(4).ReadOnly = True
                Me.gridFinancial.CurrentRow.Cells(5).ReadOnly = True
                Me.gridFinancial.CurrentRow.Cells(6).ReadOnly = True
                Me.gridFinancial.Update()
                Me.gridFinancial.Refresh()
    End if

    Catch ex As Exception

    End Try

End Sub 
```

我已经读过这个： http: [//msdn.microsoft.com/en-us/library/1yef90x0.aspx](http://msdn.microsoft.com/en-us/library/1yef90x0.aspx)也许我遗漏了一些东西，但是现在，应用了该代码，我的 DataGridView 将仅反映该代码如果我在绘制 DataGridView 后单击受影响的单元格之一。换句话说，在加载 DataGridView 之后，单元格只有在我单击它们后才会显示为黄色（然后该行中应该为黄色的所有单元格都显示为黄色）。为什么是这样？我不确定我做错了什么。

作为一个附带问题，这个单元格格式化事件在我的 DGV 被绘制之前至少会触发 40-50 次，而且它只是一个 6 行数据源。没有更好的事件触发器吗？我确信我的代码可能会更好，但这似乎效率很低。

上面代码中的只读属性工作正常，所以我知道事件正在正确触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:26:04.970

无需像您一样设置单元格样式，您可以通过`DataGridViewCellFormattingEventArgs`.

所以是这样的：

```
e.CellStyle.BackColor = Color.Yellow 
```

要考虑的另一件事是，`CellFormatting`从`DataBindingComplete`事件中附加处理程序通常会更好。

```
Private Sub DataGridView1_DataBindingComplete(sender As System.Object, e As System.Windows.Forms.DataGridViewBindingCompleteEventArgs) Handles DataGridView1.DataBindingComplete
    AddHandler DataGridView1.CellFormatting, AddressOf Me.DataGridView1_CellFormatting
End Sub 
```

这解决了在渲染 DataGridView 的可视部分时的一些奇怪行为，方法是确保在附加后续事件之前完成所有操作。

* * *

这个带有 DataBindingComplete 事件的技巧至少应该减少对 CellFormatting 的不必要调用 - 每次更新单元格时都会触发单元格格式化。一旦你全部启动并运行，这只是用户离开单元格的一次。

# iphone - 自动释放指针和函数的问题

> ID：14593660
> 
> 赞同：2
> 
> 时间：2013-01-29T23:00:35.917
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我有一个具有以下签名的函数：

```
- (void)addSource:(NSDictionary *)sourceDetails toPage:(NSString *)pageTitle error:(NSError **)error {

} 
```

然后我尝试如下调用它：

```
NSError *error = nil;
  [[TestManager sharedInstance] addSource:obj toPage:selectedPageTitle error:&error]; 
```

但它总是给我以下错误：

```
Sending 'NSError *const __strong *' to parameter of type 'NSError *__autoreleasing *' changes retain/release properties of pointer 
```

这只是在我昨天升级 XCode 之后发生的，我做错了什么？

# rally - 渲染到一个div，然后导出为jpeg

> ID：14593662
> 
> 赞同：1
> 
> 时间：2013-01-29T23:00:37.087
> 
> 标签：rally

在 Rally App SDK 2.0 中，我想显示一个下拉列表和按钮，以及下面的图表。该按钮会将图表导出（另存为）为 jpeg。1）如何指定要渲染对象的 div？下面的代码忽略了 renderTo 2) 是否有导出 jpeg 图像的示例代码？使用 Canvas 会产生错误

```
 this.add({
                    xtype: 'rallycombobox',
                    fieldLabel: 'Select an Enterprise Release',
                    width: '500px',
                    renderTo: Ext.get("dropdownDiv"),
                    storeConfig: {
                        autoLoad: true,
                        model: 'Program',
                        fetch: 'Name,Releases,ReleaseStartDate,ReleaseDate',
                        sorters: [
                                  {
                                      property: 'Name',
                                      direction: 'ASC'
                                  }
                        ]
                    },
                    listeners: {
                        select: this._onSelect,
                        scope: this
                    }
                });

                this.add({
                    xtype: 'rallybutton',
                    text: 'Export',
                    renderTo: Ext.get("buttonDiv"),
                    handler: function() {
                        var canvas = document.getElementById("chartDiv");
                        var img    = canvas.toDataURL("image/jpeg");
                            // .toDataURL generates error, TypeError: canvas.toDataURL is not a function
                        document.write('<img src="'+img+'"/>');
                    }
                });

                this.add({
                    id: 'chartCmp',
                    xtype: 'rallychart',
                    renderTo: Ext.get("chartDiv"),
                    flex: 1,
                    chartConfig: chartConfig
                }); 
```

// 这里是body语句，去掉了<>，所以它会显示body table tr td div id="dropdownDiv" style="height:50px; width:500px;"/div /td td div id="buttonDiv" style= "高度：50px；宽度：50px；"/div /td /tr /table div id="chartDiv"/div /body

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:56:25.990

在 Ext 中有两种方法可以渲染组件。第一种是将带有 xtype 的配置对象添加到容器中。那就是 this.add(); 应用程序中的行。第二种是使用 Ext.create 实例化组件并在其配置中指定 renderTo。

```
this.add({xtype: 'component', html: 'hello world'});

Ext.create('Ext.Component', { html: 'hello world', renderTo: 'aDiv' }); 
```

首选方式是从那时起您的组件参与应用程序布局的第一种方式。此外，在应用程序中创建 dom 元素（尤其是初始布局）的首选方式是通过项目配置而不是应用程序主体中的静态 html。

所以：

```
Ext.define('My.App', {
    extend: 'Rally.app.App',
    items: [
        { xtype: 'container' itemId: 'dropdownDiv' },
        { xtype: 'container', itemId: 'chartDiv' }
    ]
}); 
```

然后你可以像这样在启动方法中添加内容：

```
this.down('#chartDiv').add(chartConfig); 
```

至于你的画布问题，我不确定。您可能希望将其作为一个单独的问题发布，其中包含有关特定错误的更多详细信息。

# cocoa - NSScrollView 生成滚动条重影

> ID：14593663
> 
> 赞同：0
> 
> 时间：2013-01-29T23:00:38.293
> 
> 标签：cocoa, appkit, nsscrollview

请看附图：http: [//i45.tinypic.com/fu8bpz.png](http://i45.tinypic.com/fu8bpz.png)

有没有人见过这种奇怪的滚动条行为？我在 NSScrollView 中嵌入了一个自定义视图。滚动条似乎没有正确绘制，它们也出现在我的自定义视图的中间。这发生在 10.6 上，但不是在我构建 10.7 时。我也在10.8上看到它。我尝试通过构建 XCode 3.2 和 XCode 4.3 来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T05:03:16.747

我没有平衡我的 [[NSGraphicsContext current] saveGraphicsState] 与适当的 [[NSGraphicsContext current] restoreGraphicsState]。每个 [[NSGraphicsContext current] saveGraphicsState] 必须与 [... restoreGraphicsState] 调用平衡，否则 GraphicsContext 将处于不可预测的状态。

# ruby-on-rails - 升级到 Ruby 1.9.3-p374，现在默认的 Rails 端口是 5000。如何改回来？

> ID：14593664
> 
> 赞同：1
> 
> 时间：2013-01-29T23:00:53.087
> 
> 标签：ruby-on-rails, foreman

我刚刚在我的开发机器上升级到 Ruby 1.9.3-p374。现在，当我使用 启动 Rails 时`foreman start`，它使用端口 5000。

这是我的Procfile：

```
web: bundle exec rails server thin -p $PORT -e $RACK_ENV 
```

我的.env：

```
RACK_ENV=development
PORT=3000 
```

为什么它给我端口 5000，我怎样才能把它改回来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:03:54.417

它使用的是安装在我的旧 ruby​​ 目录下的版本——升级后我没有再次安装它，我忘记了它不在我的 gemfile 中。再次安装它工作。

# jquery - 如何使用 Jquery 替换 span 元素中的文本？

> ID：14593668
> 
> 赞同：2
> 
> 时间：2013-01-29T23:01:06.980
> 
> 标签：jquery, html

我正在尝试将#percent 数量更改为单击的 li 中包含的文本。请有人帮我修复我的代码，谢谢！

```
<div id="percentchooser">
<ul>
    <li>25</li>
    <li>30</li>
    <li class="selectedpercentage">35</li>
    <li>40</li>
    <li>45</li>
    <li>50</li>
</ul>
<div id="percentage"><span id="percentamount">35</span><span id="percentsign">%</span>

</div> 
```

```
$("#percentchooser li").click(function () {

    var percentage = $(this).html();

    $("#percentchooser li").removeClass("selectedpercentage");
    $(this).addClass("selectedpercentage");

    $("#percentageamount").html(percentage);

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T23:03:16.630

您似乎引用了错误的 id，跨度的 id在您的 HTML 示例中，但您在脚本`percentamount`中引用它：`percentageamount`

```
$("#percentchooser li").click(function () {
    var percentage = $(this).html();

    $("#percentchooser li").removeClass("selectedpercentage");
    $(this).addClass("selectedpercentage");

    $("#percentamount").html(percentage);
}); 
```

一些改变它似乎工作。

* * *

[**演示**](http://jsfiddle.net/Mu7cc/)-`#percentamount`改为

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:05:32.900

我在这里看不到任何百分比金额，所以我想这应该可以

```
 $("#percentamount").html(percentage); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T23:06:40.403

您是否考虑过不使用 jQuery？在这种情况下是不必要的：

```
(function() {
  var chooser = document.getElementById('percentchooser'),
      selected = (function() {
        var li = chooser.children[0].children, len = li.length, i;
        for(i=0;i<l;i++) if(li[i].className == "selectedpercentage") return li[i];
      })(), target = document.getElementById('percentamount');
  chooser.onclick = function(e) {
    e = e || window.event;
    var t = e.srcElement || e.target;
    if( !t.tagName) t = t.parentNode; 
    if( t.tagName.toLowerCase() == "li") {
      selected.className = "";
      t.className = "selectedpercentage";
      target.firstChild.nodeValue = t.firstChild.nodeValue;
    }
  };
})(); 
```

# iphone - 试图将 elapsedTime 保存到 coreData

> ID：14593669
> 
> 赞同：0
> 
> 时间：2013-01-29T23:01:08.040
> 
> 标签：iphone, ios, core-data, nsmanagedobjectcontext

我的应用程序的一个核心功能是允许用户跟踪在某个位置花费的时间。但是，我遇到了（显然）一个严重的错误。我有两个核心数据实体：`Location`用于保存用户的位置 - 并`TimeSpentStudying`保存在该位置经过的时间（多对多关系）。我附上截图以使其更清楚：

[http://i.imgur.com/C4VsWK2.png?1](http://i.imgur.com/C4VsWK2.png?1)

这是我的 TimeSpentStudying 课程：

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@class Location;

@interface TimeSpentStudying : NSManagedObject

@property (nonatomic, retain) NSString * libraryNameText;
@property (nonatomic, retain) NSDate * date;
@property (nonatomic, retain) NSNumber * timeSpent;
@property (nonatomic, retain) Location *info;

@end 
```

这是我将`Location`实体传递给 viewController 的地方，它将跟踪经过的时间 - `LibraryTrackTimeViewController`：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
  if (distance < 500) {
  if ([segue.identifier isEqualToString:@"TrackLibraryTimes"]) {
    UINavigationController *navigationController = segue.destinationViewController;

    LibraryTrackTimeViewController *controller = (LibraryTrackTimeViewController *)navigationController.topViewController;
    controller.managedObjectContext = self.managedObjectContext;
    controller.libraryNameText = [[[mapView selectedAnnotations] objectAtIndex:0] title];
  }
  }
} 
```

当我启动计时器时 - 收到此错误：

```
<TimeSpentStudying: 0x1e441130> (entity: TimeSpentStudying; id: 0x1d5a4260 <x-coredata:///TimeSpentStudying/t3B884C6F-8210-4B9E-A716-23DEC24291482> ; data: {
    date = nil;
    info = nil;
    libraryNameText = nil;
    timeSpent = 0;
})
2013-01-29 17:46:25.885 BooksonBooksonBooks[18856:907] -[TimeSpentStudying coordinate]: unrecognized selector sent to instance 0x1e441130
2013-01-29 17:46:25.892 BooksonBooksonBooks[18856:907] CoreData: error: Serious application error.  Exception was caught during Core Data change processing.  This is usually a bug within an observer of NSManagedObjectContextObjectsDidChangeNotification.  -[TimeSpentStudying coordinate]: unrecognized selector sent to instance 0x1e441130 with userInfo (null)
2013-01-29 17:46:25.899 BooksonBooksonBooks[18856:907] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[TimeSpentStudying coordinate]: unrecognized selector sent to instance 0x1e441130' 
```

这是我认为导致错误的方法：

```
-(IBAction)startTimer:(id)sender
{
  startTime = [[NSDate alloc] init];

  elapsedTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(updateTimer) userInfo:nil repeats:YES];

  TimeSpentStudying *timeSpentStudying = [NSEntityDescription insertNewObjectForEntityForName:@"TimeSpentStudying" inManagedObjectContext:self.managedObjectContext];

  timeSpentStudying.timeSpent = [NSNumber numberWithDouble:totalTimeSpentStudying]; 
```

我不太明白这个错误。`LibraryTrackTimeViewController`我是否必须专门为我创建全新的 managedObject 上下文`TimeSpentStudying`？我希望每个`Location`对象都`TimeSpentStudying`保存多个 timeIntervals（日期、timeSpent 等）。我希望我说得足够清楚。如果您需要查看更多内容`LibraryTrackTimeViewController`- 请告诉我，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:26:14.477

错误在这里：

BooksonBooksonBooks[18856:907] -[TimeSpentStudying 坐标]：无法识别的选择器发送到实例 0x1e441130

您在 TimeSpentStudying 类的对象上调用“坐标”，它没有实现该方法，这导致应用程序崩溃。

由于我在您发布的任何代码中都没有看到坐标，并且您说您的其他实体类型是位置，它可能包含一个坐标，因此您可能正在传递一个您打算通过时间花费学习的位置。你在用ARC吗？

# selenium-webdriver - Selenium Grid 可以配置为需要身份验证吗？

> ID：14593670
> 
> 赞同：4
> 
> 时间：2013-01-29T23:01:11.840
> 
> 标签：selenium-webdriver, selenium-grid

如何强制 Selenium 集线器/节点需要密码才能访问？我不是说对浏览器进行身份验证。我的意思是要求 Selenium 服务器在执行测试之前要求输入密码。

似乎如果您正在运行 Selenium 集线器或节点，除非您在非常私有的网络中，否则您将面临很大的风险。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:42:50.010

现在的答案是否定的。

然而，它是一个开源项目，因此您可以编写功能来执行此操作并提供补丁。来源可在此处获得：

[http://code.google.com/p/selenium/source/checkout](http://code.google.com/p/selenium/source/checkout)

或者如果你更喜欢 github，github 镜像是：

[https://github.com/SeleniumHQ/selenium](https://github.com/SeleniumHQ/selenium)

# c++ - linux/solaris 扩展路径 c++

> ID：14593671
> 
> 赞同：0
> 
> 时间：2013-01-29T23:01:17.997
> 
> 标签：c++, linux, filepath

我想要一个函数来扩展传递给它的所有环境变量。当调用转换（假设 $HOME=MyHome）“$HOME/foo $HOME/bar ~myname”到“/MyHome/foo /MyHome/bar /usr/xyz/myname”时，我发现了各种各样的东西将相对路径扩展到绝对路径，但我还没有找到任何完全符合我要求的东西。我希望以前已经这样做过，但我找不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:52:57.240

在 Corbin 的评论中回答：“”“嗯，您可以在所有包含文件夹中搜索 wordexp.h 吗？也许它不是您所期望的。它实际上可能在 posix/wordexp.h 中，而不仅仅是 wordexp.h。其实我是想建议你直接从glibc借代码，但是刚找到之后，好像是一条不好的路。glibc中的wordexp代码是53KB（虽然就glibc而言，其实并没有那么神秘）。 """

# javascript - 如何允许多个用户控件使用相同的 jQuery

> ID：14593674
> 
> 赞同：0
> 
> 时间：2013-01-29T23:01:46.213
> 
> 标签：javascript, jquery, asp.net, user-controls

我在由嵌套 div 组成的网页上有一个简单的旋转元素，位于 ASP.NET UserControl 内。当只有一个控件存在时工作正常。但是，控件的多个实例相互干扰。该脚本在代码隐藏中注册，没有被包含两次。这是jQuery代码：

```
 $(document).ready(function () {
    var timer = null;

    $("div.divRotator").find("div:first-child").show();

    //Wait 5 seconds then call rotate();
    timer = setTimeout(rotate, 4000);

    function rotate() {
        var nextDiv = $("div.divRotator").find("div:visible").next("div");
        if (nextDiv.html() == null) {  //PROBLEM HERE!!!
            nextDiv = $("div.divRotator").find("div:first-child");
            //console.log("rotating...");
        }
        $("div.divRotator").find("div:visible").fadeOut(500, function () { nextDiv.show(); });

        timer = setTimeout(rotate, 4000);
    }
}); 
```

如果所有控件具有相同数量的元素，则此代码将正常工作......但是当它们没有时，事情就会变得不稳定。检查我们是否应该重新开始旋转不起作用，因为 nextDiv 实际上是由多个元素组成的，因为页面上有多个 UserControl 实例。

这里最好的策略是什么？修改代码隐藏中的 div 类/ID 并为每个控件提供单独的 javascript？这似乎很乏味，应该是不必要的。似乎以某种方式修改 nextDiv 的工作方式会更好，但是我的 jQuery 知识在这里让我失望了……肯定有一个简单的解决方案吗？

仅供参考，这是我渲染的内容的样子：

```
<div class="divRotator">
    <div style="display:none"> Some content </div>
    <div style="display:none"> Some more content </div>
    <div style="display:none"> you guessed it </div>
</div>

<div class="divRotator">
    <div style="display:none"> Uh oh, now we got trouble <div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:42:38.877

你不是一开始就关闭你的 div 标签。[http://jsfiddle.net/ryansmith94/5NwbH/](http://jsfiddle.net/ryansmith94/5NwbH/)

```
<div class="divRotator">
    <div style="display:none"> Some content </div>
    <div style="display:none"> Some more content </div>
    <div style="display:none"> you guessed it </div>
</div>

<div class="divRotator">
    <div style="display:none"> Uh oh, now we got trouble </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:47:00.587

也许将您的“divRotator” div 包装在从您的用户控件中获取唯一 ID 的父 div 中可以解决问题。

就像是 ：

```
<div id="divParent" runat="server">
 <div class="divRotator">
    <div style="display:none"> Some content <div>
    <div style="display:none"> Some more content <div>
    <div style="display:none"> you guessed it <div>
 </div>

  <div class="divRotator">
    <div style="display:none"> Uh oh, now we got trouble <div>
  </div>
</div>

/// Javascript

    $(document).ready(function () {
    var timer = null;
    var divParent = $('#<%= divParent.ClientID  %>');
    var divrotator = divParent.find("div.divRotator");

    divrotator.find("div:first-child").show();

    //Wait 5 seconds then call rotate();
    timer = setTimeout(rotate, 4000);

    function rotate() {
        var nextDiv = divrotator.find("div:visible").next("div");
        if (nextDiv.html() == null) {  //PROBLEM HERE!!!
            nextDiv =divrotator.find("div:first-child");
            //console.log("rotating...");
        }
        divrotator.find("div:visible").fadeOut(500, function () { nextDiv.show(); });

        timer = setTimeout(rotate, 4000);
    }
}); 
```

注意：未经测试。你可能需要做一些调整

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T00:03:26.510

像往常一样好的，将问题发布到 StackOverflow（经过几个小时的挫折），然后我得到了答案。我忘记了 $(selector).each() 函数。

修改 rotate() 以更新每个单独的 divRotator 的 nextDiv：

```
 function rotate() {
        $('div.divRotator').each(function (index, value) {    //IMPORTANT BIT
            var nextDiv = $(this).find('div:visible').next('div');
            if (nextDiv.html() == null) {
                nextDiv = $(this).find('div:first-child');
            }

            $(this).find('div:visible').fadeOut(500, function () { nextDiv.show(); });
        });

        timer = setTimeout(rotate, 4000);
    } 
```

现在我们有单独的“nextDiv”元素可以使用和更新。

感谢您的建议和 jsfiddle 的链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T20:21:02.407

如果您使用的是 userControls，您应该使用模块模式之类的东西来保护代码免受外部干扰

```
e.g.
        var specificUserControlName = {};

        (function () {
            specificUserControlName.AnimationJs = function () {

                var _rotate= function () {
             var nextDiv = $("div.divRotator").find("div:visible").next("div");
              if (nextDiv.html() == null) {  //PROBLEM HERE!!!
                  nextDiv = $("div.divRotator").find("div:first-child");
                  //console.log("rotating...");
               }
               $("div.divRotator").find("div:visible").fadeOut(500, function () { nextDiv.show(); });

              timer = setTimeout(rotate, 4000);
                };

                return { // publicly accessible API

                    rotate: function () {
                        _rotate();
                    }

                };

            };

        })();

        var uniqueUserControlShortName= new specificUserControlName.AnimationJs(); 
```

然后可以通过 uniqueUserControlShortName.rotate() 调用函数来限定正确的版本

# java - 多个弹跳球线程问题

> ID：14593678
> 
> 赞同：2
> 
> 时间：2013-01-29T23:01:56.267
> 
> 标签：java, multithreading, listener

我创建了一个程序，可以制作多个具有随机颜色、速度和半径的弹跳球。当用户点击屏幕时，应该会出现一个新的随机球并在屏幕上移动。但我有一个多线程问题。当我点击屏幕时，会出现一个球并且根本不动。当再次点击时，什么也没有发生。

*弹跳球类*

```
public class BouncingBalls extends JPanel implements MouseListener{

private Ball ball;
protected List<Ball> balls = new ArrayList<Ball>(20);
private Container container;
private DrawCanvas canvas;
private int canvasWidth;
private int canvasHeight;
public static final int UPDATE_RATE = 30;

int x = random(480);
int y = random(480);
int speedX = random(30);
int speedY = random(30);
int radius = random(20);
int red = random(255);
int green = random(255);
int blue = random(255);
int count = 0;

public static int random(int maxRange) {
    return (int) Math.round((Math.random() * maxRange));
}

public BouncingBalls(int width, int height){

    canvasWidth = width;
    canvasHeight = height;

    ball = new Ball(x, y, speedX, speedY, radius, red, green, blue);
    container = new Container();

    canvas = new DrawCanvas();
    this.setLayout(new BorderLayout());
    this.add(canvas, BorderLayout.CENTER);
    this.addMouseListener(this);

}

public void start(){

    Thread t = new Thread(){

        public void run(){

            while(true){

                update();
                repaint();
                try {
                    Thread.sleep(1000 / UPDATE_RATE);
                } catch (InterruptedException e) {}
            }
        }
    };
    t.start();
}

public void update(){

    ball.move(container);
}

class DrawCanvas extends JPanel{

    public void paintComponent(Graphics g){

        super.paintComponent(g);
        container.draw(g);
        ball.draw(g);
    }

    public Dimension getPreferredSize(){

        return(new Dimension(canvasWidth, canvasHeight));
    }
}

public static void main(String[] args){

    javax.swing.SwingUtilities.invokeLater(new Runnable(){

        public void run(){

            JFrame f = new JFrame("Bouncing Balls");
            f.setDefaultCloseOperation(f.EXIT_ON_CLOSE);
            f.setContentPane(new BouncingBalls(500, 500));
            f.pack();
            f.setVisible(true);
        }
    });
}

@Override
public void mouseClicked(MouseEvent e) {
    // TODO Auto-generated method stub

}

@Override
public void mouseEntered(MouseEvent e) {
    // TODO Auto-generated method stub

}

@Override
public void mouseExited(MouseEvent e) {
    // TODO Auto-generated method stub

}

@Override
public void mousePressed(MouseEvent e) {

    count++;
    balls.add(new Ball(x, y, speedX, speedY, radius, red, green, blue));
    balls.get(count-1).start();
    start();
}

@Override
public void mouseReleased(MouseEvent e) {
    // TODO Auto-generated method stub

}
} 
```

*球类*

```
import java.awt.Color;
import java.awt.Graphics;

public class Ball{

public static int random(int maxRange) {
    return (int) Math.round((Math.random() * maxRange));
}

private BouncingBalls balls;
int x = random(480);
int y = random(480);
int speedX = random(30);
int speedY = random(30);
int radius = random(20);
int red = random(255);
int green = random(255);
int blue = random(255);
int i = 0;

public Ball(int x, int y, int speedX, int speedY, int radius, int red, int green, int blue){

    this.x = x;
    this.y = y;
    this.speedX = speedX;
    this.speedY = speedY;
    this.radius = radius;
    this.red = red;
    this.green = green;
    this.blue = blue;
}

public void draw(Graphics g){

    for(Ball ball : balls){

        g.setColor(new Color(red, green, blue));
        g.fillOval((int)(x - radius), (int)(y - radius), (int)(2 * radius), (int)(2 * radius));
    }
}

public void move(Container container){

    x += speedX;
    y += speedY;

    if(x - radius < 0){

        speedX = -speedX;
        x = radius;
    }
    else if(x + radius > 500){

        speedX = -speedX;
        x = 500 - radius;
    }

    if(y - radius < 0){

        speedY = -speedY;
        y = radius;
    }
    else if(y + radius > 500){

        speedY = -speedY;
        y = 500 - radius;
    }
}
} 
```

*容器类*

```
import java.awt.Color;
import java.awt.Graphics;

public class Container {

private static final int HEIGHT = 500;
private static final int WIDTH = 500;
private static final Color COLOR = Color.WHITE;

public void draw(Graphics g){

    g.setColor(COLOR);
    g.fillRect(0, 0, WIDTH, HEIGHT);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:07:49.950

你对你的球有两个不同的引用。

你有一个单一的`Ball`被叫`ball`和一个`List`球的参考。您的`update`and`paint`方法仅引用单个`ball`

`Ball`似乎没有`start`方法（我可以看到）所以这`balls.get(count-1).start();`没有意义......

**更新**

*   你不需要参考`ball`
*   虽然不是一个坏主意，但在测试时，您可能应该调用`start`构造函数
*   你的`update`方法`BouncingBalls`应该遍历`balls`列表，调用列表`move`中的每个球......
*   需要访问并应使用列表的`paintComponent`方法。这可能通过模型​​界面更好地实现`DrawCanvas``balls`
*   不要`Ball`用参数构造一个新的，因为它赋予每个球相同的属性，特别是当你以任何方式构造它时为其分配随机值时......
*   `Ball`没有（或不需要）`start`方法

![在此处输入图像描述](../Images/506410bc2f7483a4e694d199be02e557.png)

```
public class BouncingBalls extends JPanel implements MouseListener {

//    private Ball ball;
    protected List<Ball> balls = new ArrayList<Ball>(20);
    private Container container;
    private DrawCanvas canvas;
    private int canvasWidth;
    private int canvasHeight;
    public static final int UPDATE_RATE = 30;
    int x = random(480);
    int y = random(480);
    int speedX = random(30);
    int speedY = random(30);
    int radius = random(20);
    int red = random(255);
    int green = random(255);
    int blue = random(255);
    int count = 0;

    public static int random(int maxRange) {
        return (int) Math.round((Math.random() * maxRange));
    }

    public BouncingBalls(int width, int height) {

        canvasWidth = width;
        canvasHeight = height;

//        ball = new Ball(x, y, speedX, speedY, radius, red, green, blue);
        container = new Container();

        canvas = new DrawCanvas();
        this.setLayout(new BorderLayout());
        this.add(canvas, BorderLayout.CENTER);
        this.addMouseListener(this);

        start();

    }

    public void start() {

        Thread t = new Thread() {
            public void run() {

                while (true) {

                    update();
                    repaint();
                    try {
                        Thread.sleep(1000 / UPDATE_RATE);
                    } catch (InterruptedException e) {
                    }
                }
            }
        };
        t.start();
    }

    public void update() {
        for (Ball ball : balls) {
            ball.move(container);
        }
    }

    class DrawCanvas extends JPanel {

        public void paintComponent(Graphics g) {

            super.paintComponent(g);
            container.draw(g);
            for (Ball ball : balls) {
                ball.draw(g);
            }
//            ball.draw(g);
        }

        public Dimension getPreferredSize() {

            return (new Dimension(canvasWidth, canvasHeight));
        }
    }

    public static void main(String[] args) {

        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                JFrame f = new JFrame("Bouncing Balls");
                f.setDefaultCloseOperation(f.EXIT_ON_CLOSE);
                f.setContentPane(new BouncingBalls(500, 500));
                f.pack();
                f.setVisible(true);
            }
        });
    }

    @Override
    public void mouseClicked(MouseEvent e) {
        // TODO Auto-generated method stub
    }

    @Override
    public void mouseEntered(MouseEvent e) {
        // TODO Auto-generated method stub
    }

    @Override
    public void mouseExited(MouseEvent e) {
        // TODO Auto-generated method stub
    }

    @Override
    public void mousePressed(MouseEvent e) {

        count++;
        balls.add(new Ball());
//        balls.add(new Ball(x, y, speedX, speedY, radius, red, green, blue));
//        balls.get(count - 1).start();
//        start();
    }

    @Override
    public void mouseReleased(MouseEvent e) {
        // TODO Auto-generated method stub
    }

    public static class Ball {

        public int random(int maxRange) {
            return (int) Math.round(Math.random() * maxRange);
        }
        int x = random(480);
        int y = random(480);
        int speedX = random(30);
        int speedY = random(30);
        int radius = random(20);
        int red = random(255);
        int green = random(255);
        int blue = random(255);
        int i = 0;

        public Ball() { //int x, int y, int speedX, int speedY, int radius, int red, int green, int blue) {

//            this.x = x;
//            this.y = y;
//            this.speedX = speedX;
//            this.speedY = speedY;
//            this.radius = radius;
//            this.red = red;
//            this.green = green;
//            this.blue = blue;
        }

        public void draw(Graphics g) {

            g.setColor(new Color(red, green, blue));
            g.fillOval((int) (x - radius), (int) (y - radius), (int) (2 * radius), (int) (2 * radius));

        }

        public void move(Container container) {

            x += speedX;
            y += speedY;

            if (x - radius < 0) {

                speedX = -speedX;
                x = radius;
            } else if (x + radius > 500) {

                speedX = -speedX;
                x = 500 - radius;
            }

            if (y - radius < 0) {

                speedY = -speedY;
                y = radius;
            } else if (y + radius > 500) {

                speedY = -speedY;
                y = 500 - radius;
            }
        }
    }

    public static class Container {

        private static final int HEIGHT = 500;
        private static final int WIDTH = 500;
        private static final Color COLOR = Color.WHITE;

        public void draw(Graphics g) {

            g.setColor(COLOR);
            g.fillRect(0, 0, WIDTH, HEIGHT);
        }
    }
} 
```

**更新**

正如评论员所指出的，`ArrayList`这不是线程安全的，让多个线程同时尝试访问它并不是一个好主意。虽然添加比删除稍微安全一些，但这仍然是不好的做法。

您可以替换`ArrayList`为`Vector`，这将是更简单的解决方案，或者围绕公共监视器锁同步对列表的访问。鉴于您的示例，我将使用`java.util.Vector`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-03T14:27:59.460

你可以试试这个替代的 Java 程序，在一个“开始”按钮上弹跳 10 个彩色球......

```
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import javax.swing.*;
import javaimage.io.*;

class Thr extends Thread
{
    boolean up=false;
    Ballbounce parent;
    int top,left;
    Color c;

    Thr(int t,int l,Color cr,ex5 p)
    {
        top=l;
        if(top > 170)
        top=170-t/8;
        left=t;
        c=cr;
        parent=p;
    }

    public void run()
    {
    try
    {
        while(true)
        {
            Thread.sleep(37);
            if(top >= 188)
            up=true;
            if(top <= 0)
            up=false;
            if(!up)
            top=top+2;
            else
            top=top-2;
            parent.p.repaint();
        }
    }catch(Exception e){}
}
}

    class Ballbounce extends JFrame implements ActionListener
{
int top=0,left=0,n=0,radius=50;
Color C[]={Color.black,Color.cyan,Color.orange,Color.red,Color.yellow,Color.pink,Color.gray,Color.blue,Color.green,Color.magenta};
Thr t[]=new Thr[10];
GPanel p;
JButton b;
Panel  p1;

Ballbounce()
{
setSize(700,300);
setVisible(true);
setLayout( new BorderLayout());
setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
add(p=new GPanel(this),BorderLayout.CENTER);

b= new JButton("Start");
b.addActionListener(this);

add(p1=new Panel(),BorderLayout.SOUTH);
p1.setBackground(Color.lightGray);
p1.add(b);
}

public static void main(String args[])
{
new Ballbounce();
}

public void actionPerformed(ActionEvent e)
{
t[n]=new Thr(left+(radius+13)*n+29,top+n*25,C[n],this);
t[n].start();
n++;
p.repaint();
if(n >9)
b.setEnabled(false);
}
}

class GPanel extends JPanel
{
Ballbounce parent;

GPanel(Ballbounce p)
{
 parent=p;
}

public void paintComponent(Graphics g)
{
super.paintComponent(g);
setBackground(Color.white);

for(int i=0;i< parent.n;i++)
{
g.setColor(parent.t[i].c);
g.fillOval(parent.t[i].left,parent.t[i].top,parent.radius,parent.radius);
}
}
} 
```

我希望你会喜欢它......如果你无法理解代码......你可以随时质疑...... :) 享受代码...... :)

# windows - 无法从 WinPE 中的 Windows 8 安装中完全删除 ProgramData

> ID：14593680
> 
> 赞同：2
> 
> 时间：2013-01-29T23:02:05.823
> 
> 标签：windows, windows-8, permissions, winpe, programdata

我有一个在 WinPE 中运行的脚本，它使用安装了 Windows 的系统驱动器并删除驱动器上的所有内容（保持文件系统完好无损）。

在处理 Windows XP/Vista/7 安装时，它可以正常工作。`attrib -S -A -H -I -R /S /D \`运行，然后所有内容都被删除。

但是，在 Windows 8 中，我遇到了“拒绝访问”错误。由于某种原因，即使作为 WinPE 中的 SYSTEM 用户，我也无法编辑目录`C:\ProgramData\Microsoft\Windows\LocationProvider`。我不能`attrib`用来设置属性，我不能删除它——我什至不能`cd`进入它！`dir /a`只是返回`File Not Found`。

使用`rmdir /S /Q`给了我“拒绝访问”错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T00:11:44.063

假设问题与权限和/或所有权有关，您可以使用内置`robocopy`工具解决它 - 幸运的是，它包含在 Windows PE 中。

首先，创建一个空目录，eg，`x:\empty`然后运行

```
robocopy /e /purge /b x:\empty c:\ 
```

该`/b`标志告诉 robocopy 使用绕过安全性的备份模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:43:38.320

有同样的问题。您需要先[取得所有权](http://www.eightforums.com/tutorials/2808-take-ownership-file-folder-drive-registry-key-windows-8-a.html)，例如使用`takeown.exe`. 然后修复权限，例如使用`icacls.exe`. 然后按照您的意愿进行复制、移动、删除。

# objective-c - buttonTitleAtIndex 不适用于 iOS6

> ID：14593681
> 
> 赞同：2
> 
> 时间：2013-01-29T23:02:06.470
> 
> 标签：objective-c, ios6

我刚刚更新了一个支持 iPhone 5 和 iOS6 的应用程序，我发现了一个奇怪的错误。

在 iOS5 中，此代码运行良好，但在每个 iOS6 设备上，当按下按钮并且调试器将 buttonTitleAtIndex:buttonIndex 视为未知方法时，什么都没有发生。我使用实际的 buttonIndex 数字而不是字符串进行了解决，但我很困惑为什么会发生这种情况，因为我不知道为什么 iOS6 应该改变对此的支持。

```
if([actionSheet buttonTitleAtIndex:buttonIndex] == @"Email to a friend") {
        NSLog(@"Email");
        [self displayComposerSheet];
    }

    else if ([actionSheet buttonTitleAtIndex:buttonIndex] == @"Add to Favorites")                   {
        NSLog(@"favorites");
        [self addFavorite];
    }
    else if ([actionSheet buttonTitleAtIndex:buttonIndex] == @"Post to Facebook") {
        NSLog(@"Facebook");
        [self shareOnFacebook];
    }
    else if ([actionSheet buttonTitleAtIndex:buttonIndex] == @"Tweet this") {
        NSLog(@"tweet");
        [self tweet];
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T23:07:55.703

以下为我打印正确的标题：

```
NSLog(@"TITLE: %@", [actionSheet buttonTitleAtIndex: buttonIndex]); 
```

为了比较，请执行以下操作：

```
[[actionSheet buttonTitleAtIndex: buttonIndex] isEqualToString: @"Email to a friend"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T23:07:14.650

您不能按地址比较 Objective-C 对象。`==`不会按您希望的方式工作。它在 iOS 5 上为您工作只是一个怪癖，并且可以通过简单的重新编译来改变。

您必须用于`-isEqual:`比较两个对象：

```
if ([[actionSheet buttonTitleAtIndex:buttonIndex] isEqual:@"Email to a friend"]) {
    ...
} 
```

更好的方法是将按钮索引与已知列表进行比较（`enum`例如，如果您稍后重命名按钮，这将使本地化更容易并防止错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T23:07:46.000

这可能是因为您没有使用 isEqualToString。"==" 并不是真正进行字符串比较，它只是比较内存中的同一点，这可能是它在 iOS 6 中失败的原因。

# mysql - 将多张表转换为一张表mysql数据库

> ID：14593686
> 
> 赞同：0
> 
> 时间：2013-01-29T23:02:31.123
> 
> 标签：mysql

我有一个包含数百个表的 mysql 数据库。我想将其转换为单个表，其中表名将添加到记录中，这意味着对于特定表中的每一行/数据，我将添加一个新字段，在这个新字段中，值将是表名。有什么方法可以自动执行此操作，而不是我必须在每个表上创建一个新字段并手动插入表名，这将需要一年时间。我在这个数据库上的记录大约是 400000 条记录。带有脚本的 mysqldump 可以做到这一点吗？或任何其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T01:51:37.440

我的建议是生成以下形式的语法：

```
create table xxx as
    select t.*, 'table1' as TableName from table1 t union all
    select t.*, 'table2' as TableName from table2 t union all
    . . . 
```

您可以使用以下方法创建选择语句：

```
select concat('select t.*, ''', Table_Name, ''' as TableName from ', Table_Name, ' union all '
from Information_Schema.Tables 
```

然后，您可以将`create table`线放在前面并删除最后的`union all`.

# javascript - fbAsyncInit 中的“FB 未定义”

> ID：14593689
> 
> 赞同：1
> 
> 时间：2013-01-29T23:02:43.513
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

fbAsyncInit 回调函数中的 FB 对象仍未定义。一旦 FB 已加载并准备好使用 初始化，这样做的目的不就是回调`FB.init({})`吗？

如果我在 中添加另一个异步函数`setTimeout`，则会加载 FB 对象。

看到这个[jsFiddle](http://jsfiddle.net/3p8ZN/4/)。

显然我错过了一些东西。有人可以澄清一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T03:04:33.630

这很尴尬。你能找出丢失的分号吗？感谢[JSLint](http://jslint.com)；

```
<div id="fb-root"></div>

<script>
    window.fbAsyncInit = function () {
    debugger;
       if (typeof FB !== "undefined") alert('FB loaded now');
       else alert('FB not loaded');

        //This works
        setTimeout(function () { 
                if (typeof FB !== "undefined") alert('FB loaded now');
               else alert('FB still not loaded');
            },100);
    }

    (function () {
        debugger;
        var e = document.createElement('script');
        e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
        e.async = true;
        document.getElementById('fb-root').appendChild(e);
    } ());

</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T06:55:05.240

```
<div id="fb-root"></div>

<script>
window.fbAsyncInit = function () 
{
   debugger;
   if (typeof FB !== "undefined") alert('FB loaded now');
   else alert('FB not loaded');

    //This works
    setTimeout(function () 
    { 
        if (typeof FB !== "undefined") 
            alert('FB loaded now');
        else 
            alert('FB still not loaded');
     },100);

};   // --> SEMI-COLON HERE 

(function () {
    debugger;
    var e = document.createElement('script');
    e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
    e.async = true;
    document.getElementById('fb-root').appendChild(e);
} ());

</script> 
```

# gcc - 在 Ubuntu 12.04LTS 上安装 CASAVA 错误

> ID：14593692
> 
> 赞同：4
> 
> 时间：2013-01-29T23:02:48.303
> 
> 标签：gcc, ubuntu, gzip, bioinformatics, bzip2

我正在尝试在 Ubuntu 12.04 LTS 上安装 CASAVA Bcl2Fastq 1.8.3（为 CentOS 开发）。但是，我收到一条错误消息“不支持 gzip 压缩”并且安装失败。幸运的是，我找到了解决这个问题的方法：

```
 sudo ln -s /usr/lib/x86_64-linux-gnu/libpthread* /usr/lib
  sudo ln -s /usr/lib/x86_64-linux-gnu/libz.so /usr/lib 
```

但现在我收到另一个类似的错误“不支持 bzip2 压缩”。我想知道我是否可以做类似的事情来解决这个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T17:13:39.813

我终于通过将 /usr/lib/x86_64-linux-gnu/ 中的 bzip2 库文件链接到 /usr/lib 来解决这个问题：

```
 sudo ln -s /usr/lib/x86_64-linux-gnu/libbz2* /usr/lib 
```

但是我想知道为什么 gcc 无法自动找到库文件，是我的 Unbuntu 安装的问题还是 CASAVA Bcl2Fastq 1.8.3 软件的一些不兼容（因为它是在 CentOS 上开发和测试的）？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-14T20:20:43.357

对于那些返回此问题的人 - 如果您在 /usr/lib/x86_64-linux-gnu/ 下找不到任何适当的 libbz2* 文件，请尝试：

> sudo apt-get install libbz2-dev libbz2

# python - twistd.py 记录到标准输出和文件

> ID：14593694
> 
> 赞同：2
> 
> 时间：2013-01-29T23:02:58.733
> 
> 标签：python, logging, twisted, twistd

我`twistd.py`用来运行我的应用程序如下：

```
twistd -noy -l logfile.log tacfile.tac 
```

不幸的是，现在所有的输出都进入了日志文件，这对过去的调试更好，但对现在的调试更糟。我想要两全其美...如何将`twistd`日志记录到标准输出以及命令行中提供的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:39:45.913

我会尝试：

```
twistd -noy -l - tacfile.tac | tee logfile.log 
```

“-l -” 将扭曲的日志记录到标准输出，tee 将其保存到文件并打印到标准输出。在 ubuntu 上，tee 来自 coreutils 包。

<--- 在下面编辑 --->

如果您只想要特定于 twisted 的内容，可以在 tac 文件中添加以下代码：

```
from twisted.python import log, logfile

logFile = logfile.LogFile.fromFullPath('tacfile.log')
log.addObserver(log.FileLogObserver(logFile).emit) 
```

并用“-l -”扭曲运行

# c# - .NET 从宿主应用程序修改类库应用程序设置

> ID：14593696
> 
> 赞同：0
> 
> 时间：2013-01-29T23:03:10.763
> 
> 标签：c#, vb.net, .net-4.0, class-library, application-settings

假设我在 .NET 4.0 中有以下场景： - 解决方案包含：a）类库 b）控制台应用程序

控制台应用程序引用类库。

我想要的是在我的类库中设置一些应用程序设置并使其可以被类库访问（主机控制台应用程序不应该直接使用这些），但也可以在部署后通过 .config 文件修改（所以如果用户决定他们想要更改其中一项设置的值，他们可以这样做而无需重新部署应用程序。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:05:31.103

据我所知，类库将可以通过点网配置管理框架访问主机文件配置文件。您还可以使用库已知名称的第二个配置文件，并使用 swme 框架在库初始化时手动加载它。

请参考 System.Configuration

```
var configurationFileMap = new ConfigurationFileMap(@"c:\myconfig.config");
var configuration = ConfigurationManager.OpenMappedMachineConfiguration(configurationFileMap); 
```

主机和库都应该能够访问 myfile.config，只要他们知道它的名称。如果你想让它更通用，你可以将配置文件的名称存储在一个已知的注册表项下

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:34:20.190

经过相当多的Google-fu后才弄清楚这一点。

我采用的最终解决方案如下：我在我的服务应用程序中创建了设置（它生成了一个 app.config 文件）。然后我在我的代码库项目和控制台应用程序项目中创建了指向这些设置的链接（这是通过转到添加>现有项目>然后点击添加按钮旁边的下拉箭头并选择“添加为链接”来完成的。虽然代码库项目中的那个不是必需的。

这样做是为了让我在开发过程中只有 1 个设置配置，同时它仍会为我的控制台应用程序生成一个配置文件，我可以在开发过程中从控制台应用程序和代码库访问该配置文件。

最后，我使用下面的代码打开配置文件并访问这些值。作为免责声明，可能有一种更简单的方法可以做到这一点，但我尝试了大约 100 种组合，但没有其他任何效果：

```
 String cfgFileName = "IntercompanyConsoleApp.exe.config";
        ExeConfigurationFileMap cfgMap = new ExeConfigurationFileMap();
        cfgMap.ExeConfigFilename = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location) + "\\" + cfgFileName;

        Configuration cfg = ConfigurationManager.OpenMappedExeConfiguration(cfgMap, ConfigurationUserLevel.None);

        // IntercompanyService is the name of my service app, which is where the real app.config file resides -- hence the entries in the xml are based on this application.
        // Also, the scope of my settings entries is Application
        ClientSettingsSection section = (ClientSettingsSection)cfg.GetSection("applicationSettings/IntercompanyService.Properties.Settings"); 

        Console.WriteLine(section.Settings.Get("Server").Value.ValueXml.InnerText);
        Console.WriteLine(section.Settings.Get("Database").Value.ValueXml.InnerText); 
```

这是一个晦涩难懂的问题，但希望这可以为将来节省一些时间，因为我花了大约 4 个小时试图解决这个问题。

# r - 如何使用 tryCatch 计算一段时间尝试循环中的错误

> ID：14593702
> 
> 赞同：0
> 
> 时间：2013-01-29T23:03:34.403
> 
> 标签：r

我希望能够从我的 lm 模型中计算我的错误/未收敛，try 函数会跳过该模型，使用 a `tryCatch`，我将在下面给出我的代码示例，以便有人可以提供帮助。

```
i =- 0
count = 0
count1 = 0
fit = rep(NA, 1000)

while(i < 1000) try({ 
    count1 = count1 + 1
    dat = sample(data,replace = T)
    fit[i] = lm(y~x1 + x2, data = dat)
    count <- count + 1
}, silent = T) 
```

我上面的这段代码运行平稳，但有时因为我重新采样数据，模型不收敛，因此使用`try`函数，我需要计算模型不收敛的次数。

我尝试在模型之前和之后放置 count1 和 count ，它们都在计数 1000。但我确定某些模型不会收敛并给出错误（因此，如果`x1`分类是这样的，它只有一个级别而不是两个级别重新采样后的水平然后我们有错误）。

有人可以帮助我如何`tryCatch`在这个while循环中使用来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T12:08:01.083

你需要这样的东西（你需要增加你的`while`循环）：

```
i <- 1
count1 <- 0
fit <- rep(NA, 1000)

while(i <= 1000) { 
    dat <- sample(data, replace = T)
    temp <- try(lm(y~x1 + x2, data = dat))
    if(inherits(temp,"try-error"))
        count1 <- count1 + 1
    else
        fit[i] <- temp
    i <- i + 1
} 
```

# django - 模板中的多个表单

> ID：14593703
> 
> 赞同：0
> 
> 时间：2013-01-29T23:03:35.470
> 
> 标签：django, django-forms, django-templates, django-views

只是想知道将这些表单传递给单个模板并验证它们的最有效方法是什么。

```
class AForm(ModelForm):
    #stuff here

class BForm(ModelForm):
    #stuff here 

class CForm(ModelForm):
    #stuff here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:15:55.193

```
from django.template import RequestContext
from django.shortcuts import render_to_response
from .forms import AForm, BForm, CForm

def some_view(request):
    if request.method == 'POST':
        a_form = AForm(request.POST, request.FILES)
        b_form = BForm(request.POST, request.FILES)
        c_form = CForm(request.POST, request.FILES)

        if a_form.is_valid():
            #do stuff...
        if b_form.is_valid():
            #do stuff...
        if c_form.is_valid():
            #do_stuff...
    else:
        a_form = AForm()
        b_form = BForm()
        c_form = CForm()
    variables = RequestContext(request, {'a_form': a_form, 'b_form': b_form, 'c_form': c_form})
    return render_to_response('page.html', variables) 
```

# mysql - “一对多数据库”中的数据库结构复制

> ID：14593705
> 
> 赞同：0
> 
> 时间：2013-01-29T23:03:42.750
> 
> 标签：mysql, replication

我正在研究一些我想称之为复制的东西，但它可能还有其他一些技术术语——因为据我所知，“复制”是将结构及其数据完全复制到从站。我只想要结构复制。我的术语可能是错误的，这就是为什么我似乎无法自己找到答案。

当进行更改、添加或删除时，是否可以设置一个将主结构复制到多个本地数据库的 mysql 环境？我正在寻找一种解决方案，其中每个用户都可以使用自己的唯一数据获取自己的数据库实例，但具有相同的表结构。当对主结构进行更新时，每个用户数据库都应复制相同的过程。

例如，正在向**master.table1**添加一列，该列由**user1.table1**和**user2.table1**复制。

我的第一个想法是在 PHP 中编写一个更新过程，但感觉这将是数据库中内置的一个非常基本的函数，因为我的结论是，使用更少的数据，索引查找会更快（〜总数据除以用户）并且可能更安全（没有不幸的泄漏，如果有的话）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:21:18.637

您可能需要考虑合并数据库“迁移”的使用，这是 Ruby on Rails 框架所普及的东西。 [这个 Google 搜索 PHP 数据库迁移](https://www.google.com/search?q=Rails%20database%20migrations%20for%20PHP&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a)可能是您的一个起点。

这个概念是，当您开发应用程序并进行架构更改时，您可以创建 SQL 迁移脚本来前滚或回滚架构更改。这使得轻松“迁移”您的数据库模式以使用特定代码版本变得非常容易（例如，如果您在多个环境中处理分支代码，每个环境都需要不同版本的数据库）。

这不会像您建议的那样自动进行更新，但肯定是朝着正确方向迈出的一步。还有像 Toad for MySQL 和 Navicat 这样的工具，它们在一定程度上支持模式同步。但同样，这些将是手动比较/同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T23:49:25.967

我使用一组简单的 SQL 脚本解决了这个问题，该脚本用于数据库中的每个更改，名为 year-month-day-description.sql，我按字典顺序运行（这就是它以日期开头的原因）。

当然，您不想每次都运行它们。所以要知道我需要执行哪些脚本，每个脚本的末尾都有简单的插入，它将脚本的文件名插入到数据库中的表中。所以更新器 PHP 脚本只是简单地列出脚本，在表中删除这些并运行其余的。

这个解决方案的好处是，您也可以包含数据转换。而且，它可以是全自动的，只要脚本没问题，就不会发生任何不好的事情。

# process - Paypal ipn 处理和下拉选项/价格按钮逻辑

> ID：14593712
> 
> 赞同：0
> 
> 时间：2013-01-29T23:04:17.803
> 
> 标签：process, paypal, logic, payment, paypal-ipn

我从各种网站阅读了很多帖子，包括贝宝文档。但我有一些我无法解决的问题。其中之一是收到ipn消息后如何设计代码。当然，我使我的代码能够选择和处理消息的变量。喜欢付款状态，我可以将它们保存到数据库中。但关键是我应该如何设计代码来控制付款以克服我的要求。我知道帖子会变得很长，但我觉得需要这个解释。所以我有一个网站，它与付费会员一起使用。登录后检查网站，会员试用是否过期，如果过期，它会在网站的前部显示一个 div，其中包括贝宝按钮，并在单击按钮时重定向到贝宝支付屏幕。用户 shodul 可以选择会员期限，如 6 或 12 次（通过下拉贝宝按钮）。当用户完成他的付款时，ipn 是 trigerd 并且我得到了数据，但是我的所有成员都不必拥有贝宝帐户，因此他们可以直接使用他们的信用卡，如果我理解正确，资金转移可能需要一些时间才能收到我。我应该在哪个时间间隔设置成员批准标志为真？我对此感到困惑。如果我在发送 ipn 后批准他，是否有可能在转移我时发生错误。该过程如何工作。当用户完成他的付款时，ipn 是 trigerd 并且我得到了数据，但是我的所有成员都不必拥有贝宝帐户，因此他们可以直接使用他们的信用卡，如果我理解正确，资金转移可能需要一些时间才能收到我。我应该在哪个时间间隔设置成员批准标志为真？我对此感到困惑。如果我在发送 ipn 后批准他，是否有可能在转移我时发生错误。该过程如何工作。当用户完成他的付款时，ipn 是 trigerd 并且我得到了数据，但是我的所有成员都不必拥有贝宝帐户，因此他们可以直接使用他们的信用卡，如果我理解正确，资金转移可能需要一些时间才能收到我。我应该在哪个时间间隔设置成员批准标志为真？我对此感到困惑。如果我在发送 ipn 后批准他，是否有可能在转移我时发生错误。该过程如何工作。

另一个问题是下拉按钮。当我点击按钮设置选项/价格按钮时，重定向到我的销售页面后会显示错误页面。它不会重定向到付款页面。

真的很抱歉我的长篇文章，但我不知道如何才能在短时间内描述情况

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:35:23.050

如果您需要等到资金可用，您应该在已验证的 IPN 消息中测试“payment_status”的值是否为“已完成”。

电子支票可能需要 3-5 天的时间来收集（有时更长；您可以在您的帐户中查看估计的保留时间）并且 payment_status="Pending"。收集后，您将收到另一条带有“已完成”的 IPN 消息。

请注意，用户永远不会看到 IPN 进程。通常，您设置条件（在表格或足够持久的东西中），然后将用户发送到 PayPal。当用户从 PayPal 回来时，您的代码（位于“return_url”）检查表以查看付款是否成功完成（可能是一个标志，由您的 IPN 处理程序代码设置，该代码由 PayPal 调用/通信时用户优雅地离开 PayPal）。

# javascript - 每 3 次添加新的 div

> ID：14593714
> 
> 赞同：0
> 
> 时间：2013-01-29T23:04:49.963
> 
> 标签：javascript, jquery

重点是`else`位，我正在添加一个 div `$('<div id="content" class="span4"></div>').appendTo('.new');`，我需要检查我是否已经添加了 3 个 div，如果是，则添加一个新的`$('<div class="row-fluid new"></div>').insertAfter($row);`然后重新开始

```
$(".navMore li a").on("click", function() {
    var $el = $(this);
    $('#content').removeAttr('id');
    var $row = $el.closest('.row-fluid');
    if($row.next('.new').length){
        $('<div id="content" class="span4"></div>').appendTo('.new');
    }
    else {
         $('<div class="row-fluid new"></div>').insertAfter($row);
         $('<div id="content" class="span4"></div>').appendTo('.new');
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:11:33.300

我会使用模数（Operators/Modulus.htm">http://www.java2s.com/Tutorial/JavaScript/0040_Operators/Modulus.htm）做这样的事情：

```
$(".navMore li a").on("click", function() {
    var $el = $(this);
    $('#content').removeAttr('id');
    var $row = $el.closest('.row-fluid');

    var count = $('.new').find('span4').length;

    if (count % 3 == 0)
        $('<div class="row-fluid new"></div>').insertAfter($row);

    if($row.next('.new').length){
        $('<div id="content" class="span4"></div>').appendTo('.new');
    }
    else {
         $('<div class="row-fluid new"></div>').insertAfter($row);
         $('<div id="content" class="span4"></div>').appendTo('.new');
    }
}); 
```

这很粗糙，可能需要一些按摩，但我认为这就是你要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:05:11.990

用了这个：

```
$(".navMore li a").on("click", function() {
var $el = $(this);
$('#content').removeAttr('id');
var $row = $el.closest('.row-fluid');
var $rowNew = $row.next('.new');

if ($rowNew.children().length >= 3) {
        $('<div class="row-fluid new"></div>').insertAfter($row);
}

if($row.next('.new').length){
        $('<div id="content" class="span4"></div>').appendTo('.new');
}
else {
        $('<div class="row-fluid new"></div>').insertAfter($row);
        $('<div id="content" class="span4"></div>').appendTo('.new');
}
}); 
```

# opengl - 如何将共享库链接到 libGL 的替代版本？

> ID：14593715
> 
> 赞同：1
> 
> 时间：2013-01-29T23:04:58.813
> 
> 标签：opengl, linker, shared-libraries

我在我的主目录下构建了一个本地版本的 OpenGL。我想将另一个共享库链接到它，但由于某种原因，链接器仍然将它链接到 /usr/lib 下的共享库，正如 ldd 报告的那样：

```
$ cc -o lib/libtfont.so -shared -Wl,-soname,/home/wknight/proj/wkl/tfont.lib/lib/libtfont.so tfont.o -L/home/wknight/proj/wkl/img .lib/lib -limg -L/home/wknight/swtools/opengl/lib -lGL -lGLU

$ ldd lib/libtfont.so
    linux-gate.so.1 => (0xb7710000)
    /home/wknight/proj/wkl/img.lib/lib/libimg.so (0xb76fc000)
    libGL.so.1 => /usr/lib/libGL.so.1 (0xb7689000)
    libGLU.so.1 => /usr/lib/libGLU.so.1 (0xb7618000)
    libc.so.6 => /lib/i686/cmov/libc.so.6 (0xb74d1000)
    libX11.so.6 => /usr/lib/libX11.so.6 (0xb73b4000)
    libXext.so.6 => /usr/lib/libXext.so.6 (0xb73a5000)
    libXxf86vm.so.1 => /usr/lib/libXxf86vm.so.1 (0xb73a0000)
    libXdamage.so.1 => /usr/lib/libXdamage.so.1 (0xb739c000)
    libXfixes.so.3 => /usr/lib/libXfixes.so.3 (0xb7397000)
    libdrm.so.2 => /usr/lib/libdrm.so.2 (0xb738d000)
    libm.so.6 => /lib/i686/cmov/libm.so.6 (0xb7367000)
    libpthread.so.0 => /lib/i686/cmov/libpthread.so.0 (0xb734e000)
    libdl.so.2 => /lib/i686/cmov/libdl.so.2 (0xb7349000)
    libstdc++.so.6 => /usr/lib/libstdc++.so.6 (0xb7254000)
    libgcc_s.so.1 => /lib/libgcc_s.so.1 (0xb7236000)
    /lib/ld-linux.so.2 (0xb7711000)
    libxcb.so.1 => /usr/lib/libxcb.so.1 (0xb721d000)
    librt.so.1 => /lib/i686/cmov/librt.so.1 (0xb7214000)
    libXau.so.6 => /usr/lib/libXau.so.6 (0xb7211000)
    libXdmcp.so.6 => /usr/lib/libXdmcp.so.6 (0xb720b000)

$ ls -l /home/wknight/swtools/opengl/lib/libGL*
lrwxrwxrwx 1 wknight wknight 10 Jan 25 16:57 /home/wknight/swtools/opengl/lib/libGL.so -> libGL.so.1
lrwxrwxrwx 1 wknight wknight 12 Jan 25 16:57 /home/wknight/swtools/opengl/lib/libGL.so.1 -> libGL.so.1.2
-rwxr-xr-x 1 wknight wknight 1836469 Jan 25 16:57 /home/wknight/swtools/opengl/lib/libGL.so.1.2
lrwxrwxrwx 1 wknight wknight 11 Jan 25 16:57 /home/wknight/swtools/opengl/lib/libGLU.so -> libGLU.so.1
lrwxrwxrwx 1 wknight wknight 20 Jan 25 16:57 /home/wknight/swtools/opengl/lib/libGLU.so.1 -> libGLU.so.1.3.070900
-rwxr-xr-x 1 wknight wknight 1634905 Jan 25 16:57 /home/wknight/swtools/opengl/lib/libGLU.so.1.3.070900
lrwxrwxrwx 1 wknight wknight 11 Jan 25 16:57 /home/wknight/swtools/opengl/lib/libGLw.so -> libGLw.so.1
lrwxrwxrwx 1 wknight wknight 15 Jan 25 16:57 /home/wknight/swtools/opengl/lib/libGLw.so.1 -> libGLw.so.1.0.0
-rwxr-xr-x 1 wknight wknight 37068 Jan 25 16:57 /home/wknight/swtools/opengl/lib/libGLw.so.1.0.0
$

```

即使我重命名本地版本的 libGL.so 并链接到新名称，也会发生这种情况。所以在幕后发生了一些我不明白的事情。链接器是在寻找 ld.so.cache 还是什么？我怎样才能覆盖它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:17:25.617

我找到了答案——我只需要将 LD_LIBRARY_PATH 设置为我的本地版本的 libGL.so：

```
$ 出口 LD_LIBRARY_PATH=$HOME/swtools/opengl/lib

$ ldd lib/libtfont.so
    linux-gate.so.1 => (0xb778c000)
    /home/wknight/proj/wkl/img.lib/lib/libimg.so (0xb7778000)
    libGL.so.1 => /home/wknight/swtools/opengl/lib/libGL.so.1 (0xb771f000)
    libGLU.so.1 => /home/wknight/swtools/opengl/lib/libGLU.so.1 (0xb76ae000)
    libc.so.6 => /lib/i686/cmov/libc.so.6 (0xb7559000)
    libX11.so.6 => /usr/lib/libX11.so.6 (0xb743c000)
    libXext.so.6 => /usr/lib/libXext.so.6 (0xb742d000)
    libXdamage.so.1 => /usr/lib/libXdamage.so.1 (0xb742a000)
    libXfixes.so.3 => /usr/lib/libXfixes.so.3 (0xb7424000)
    libXxf86vm.so.1 => /usr/lib/libXxf86vm.so.1 (0xb741f000)
    libdrm.so.2 => /usr/lib/libdrm.so.2 (0xb7415000)
    libpthread.so.0 => /lib/i686/cmov/libpthread.so.0 (0xb73fc000)
    libdl.so.2 => /lib/i686/cmov/libdl.so.2 (0xb73f8000)
    libstdc++.so.6 => /usr/lib/libstdc++.so.6 (0xb7302000)
    libm.so.6 => /lib/i686/cmov/libm.so.6 (0xb72dc000)
    libgcc_s.so.1 => /lib/libgcc_s.so.1 (0xb72be000)
    /lib/ld-linux.so.2 (0xb778d000)
    libxcb.so.1 => /usr/lib/libxcb.so.1 (0xb72a5000)
    librt.so.1 => /lib/i686/cmov/librt.so.1 (0xb729c000)
    libXau.so.6 => /usr/lib/libXau.so.6 (0xb7299000)
    libXdmcp.so.6 => /usr/lib/libXdmcp.so.6 (0xb7293000)
$

```

现在，当我认为 ldd 必须使用运行时环境来报告共享库依赖项时，这对我来说很有意义，而不仅仅是共享库本身中存在的内容。在使用链接到共享库的某些可执行文件之前，我会设置 LD_LIBRARY_PATH，但直到现在我才想到我还必须设置它以检查共享库本身。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-30T00:23:18.730

> 我在我的主目录下构建了一个本地版本的 OpenGL

为什么？你这样做的目的是什么？OpenGL 与其说是一个库，不如说是一个规范。您构建的很可能是 MesaGL。MesaGL 确实提供硬件加速的 OpenGL，仅带有特定的驱动程序子集，这些驱动程序也必须与您的 MesaGL 版本相匹配。没有它们，MesaGL 将陷入缓慢的软件光栅化程序回退。

作为一般规则，您始终将程序动态链接到系统的 libGL.so。如果没有 libGL.so，则仅当您可以处理非常慢的软件光栅化器时，才提供后备实现才有意义。否则，我最好只告知用户他的系统缺陷，或者必须安装更好的 GPU，或者修复驱动程序安装。

* * *

无论如何，如果您想更改搜索库的路径，您应该查看`rpath`链接器标志。

# java - 便携式 (Linux/MacOS/Windows) 文件对象的文件/目录路径无效

> ID：14593719
> 
> 赞同：0
> 
> 时间：2013-01-29T23:05:21.183
> 
> 标签：java, unit-testing, filepath

我一直在尝试设计一个文件路径，如果可能的话，Java 无法使用以下代码在 Linux/MacOS/Windows 上创建一个文件名：

```
File directory = new Directory(dir);
directory.mkdirs(); // should always fail and not affect an existing file/dir

File file = new File(dir, filename);
file.createNewFile(); // should always fail and not affect an existing file/dir 
```

这种路径将用于单元测试，以证明某些错误条件得到正确处理假设测试正在运行`root`（它们不是，但我想专注于无效路径副权限）。到目前为止，我尝试过的一切都将在一个平台（通常是 Windows）上失败，但不会在另一个平台（通常是 Linux）上失败。

建议？

PS。我知道模拟对象、PowerMock 等，但真的只是想让 Java 的原样 File 类无法创建目录/文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:25:39.017

文件名在 Linux 中非法的原因有*很多*（在 iOS 中可能类似），而在 Windows 中则完全不同。你想检查什么？如果您尝试处理 Java 函数的非法名称，它们将失败。如果这是您想要捕获的内容，请为每个人编造一个非法的名称（条件不是那么简单）。如果您想检查您的代码是否捕获到这一点，我只是将问题推迟到较低级别：尝试创建；如果失败，请抱怨。

如果您想知道每个系统的哪些名称是非法的，最好专门询问一下。

# android - Facebook JAR 包含混淆图像

> ID：14593720
> 
> 赞同：1
> 
> 时间：2013-01-29T23:05:27.403
> 
> 标签：android, facebook

我在 android 中有一个应用程序，它使用 facebook sdk 发布`stream.publish`

用户需要在发布帖子之前登录到 facebook，以便他们获得登录提示，该提示应该在左上角有一个圆形关闭按钮。

问题是默认的 facebook 关闭图像显示为应用程序中的另一个图像（我们制作的图像），我们不知道为什么会发生这种情况。我什至尝试更改 facebook jar 中的图像并尝试在 jar 的登录布局文件夹中找到关闭按钮（找不到我想要的布局）。

我什至如何去调试这样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T19:53:06.213

这现在可以工作，但该项目不再使用 JAR。最新的 facebook 实现是将 facebook 代码添加为另一个 eclipse 项目并将其导入您的应用程序。中提琴。

# javascript - 同名函数参数和私有变量

> ID：14593722
> 
> 赞同：5
> 
> 时间：2013-01-29T23:05:33.950
> 
> 标签：javascript, naming, naming-conventions

当必须在 JavaScript 中格式化或转换某些函数参数时，我通常会创建同名私有变量（与函数参数同名的私有变量）：

```
function myFunction(param) {
  var param = Math.floor(param);
  // More code referencing param many times here...
} 
```

**问题：**这被认为是不好的做法吗？有什么我应该担心的缺点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T00:53:29.353

var 被解释器忽略，这没有定义第二个变量。因此，您不妨节省输入 4 个额外字符的时间：)

做同样的事情：

```
var var1 = 2;
var var1 = 3; 
```

# jquery - jquery 1.9.0 直播功能？

> ID：14593724
> 
> 赞同：13
> 
> 时间：2013-01-29T23:05:49.593
> 
> 标签：jquery

**jquery 1.9.0**中没有这个`live()`功能，但是**jquery.unobtrusive.ajax.js**已经在使用这个功能了。

 ****我应该使用旧版本的 jquery 还是其他方式？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T23:06:39.673

自 1.7 起折旧，自 1.9 起移除。改为使用`on()`。

[http://api.jquery.com/on/](http://api.jquery.com/on/)

```
$("#myButton").on("click", function(){
    alert("Clicked");
}); 
```

这里有很多好信息：

[http://www.elijahmanor.com/2012/02/differences-between-jquery-bind-vs-live.html](http://www.elijahmanor.com/2012/02/differences-between-jquery-bind-vs-live.html)

至于 Unobtrusive Ajax，您需要在 v1.9 之前包含一个`live()`仍然存在的 jQuery 版本。

如果您引用的是 MS CDN，

[http://ajax.aspnetcdn.com/ajax/mvc/3.0/jquery.unobtrusive-ajax.js](http://ajax.aspnetcdn.com/ajax/mvc/3.0/jquery.unobtrusive-ajax.js) [http://ajax.aspnetcdn.com/ajax/mvc/3.0/jquery.unobtrusive-ajax.min.js](http://ajax.aspnetcdn.com/ajax/mvc/3.0/jquery.unobtrusive-ajax.min.js)

那么这些似乎并没有直接引用jQuery。只需在代码中包含 1.8 版本而不是 1.9 版本。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-29T23:09:11.997

`.live()`已替换为以下事件委托语法`.on()`：

```
$('#parent').on('click', '.child', function() {
  ...
}); 
```

`#parent`调用选择器时应该存在，因此如果您的元素是顶级元素，请`document`用作父元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T22:43:32.240

jquery.migate 添加回遗留函数。这意味着 jquery.unobtrusive.ajax.js 按预期运行。

根据官方博客引用 jquery.migrate 库，也有一个 nuget pacakge，但显然您需要更新您的模板/布局视图。

[http://blog.jquery.com/2013/01/31/jquery-migrate-1-1-0-released/](http://blog.jquery.com/2013/01/31/jquery-migrate-1-1-0-released/)

[http://nuget.org/packages/jQuery.Migrate/](http://nuget.org/packages/jQuery.Migrate/)

Javascript 控制台确实突出了这个问题......

JQMIGRATE：日志记录处于活动状态 JQMIGRATE：不推荐使用 jQuery.fn.live() JQMIGRATE：不推荐使用 jQuery.fn.andSelf() 替换为 jQuery.fn.addBack() JQMIGRATE：不推荐使用 jQuery.clean()

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-23T15:20:26.203

`live()`在最新的 jQuery 版本中已被弃用，但 Microsoft 将更新的不显眼的脚本保留为覆盖默认脚本的 NuGet 包：

*   [Microsoft.JQuery.Unobtrusive.Ajax](https://www.nuget.org/packages/Microsoft.jQuery.Unobtrusive.Ajax/)
*   [Microsoft.JQuery.Unobtrusive.Validation](https://www.nuget.org/packages/Microsoft.jQuery.Unobtrusive.Validation/)****

# selenium-webdriver - Selenium 2 示例不起作用

> ID：14593725
> 
> 赞同：-1
> 
> 时间：2013-01-29T23:05:52.850
> 
> 标签：selenium-webdriver

我遵循了 [http://www.qaautomation.net/?p=263上的示例](http://www.qaautomation.net/?p=263)

```
package net.qaautomation.examples;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.support.ui.ExpectedCondition;
import org.openqa.selenium.support.ui.Wait;
import org.openqa.selenium.support.ui.WebDriverWait;

/**
 * Search Google example.
 *
 * @author Rahul
 */
public class GoogleSearch {
 static WebDriver driver;
 static Wait<WebDriver> wait;

public static void main(String[] args) {
    driver = new FirefoxDriver();
    wait = new WebDriverWait(driver, 30);
    driver.get("http://www.google.com/");

    boolean result;
    try {
        result = firstPageContainsQAANet();
    } catch(Exception e) {
        e.printStackTrace();
        result = false;
    } finally {
        driver.close();
    }

    System.out.println("Test " + (result? "passed." : "failed."));
    if (!result) {
        System.exit(1);
    }
}

private static boolean firstPageContainsQAANet() {
    //type search query
    driver.findElement(By.name("q")).sendKeys("qa automation\n");

    // click search
    driver.findElement(By.name("btnG")).click();

    // Wait for search to complete
    wait.until(new ExpectedCondition<Boolean>() {
        public Boolean apply(WebDriver webDriver) {
            System.out.println("Searching ...");
            return webDriver.findElement(By.id("resultStats")) != null;
        }
    });

    // Look for QAAutomation.net in the results
    return driver.findElement(By.tagName("body")).getText().contains("qaautomation.net");
} 
```

}

信，但是当我运行它时，我得到了错误

```
Exception in thread "main" java.lang.NoSuchMethodError: org.apache.http.conn.scheme.Scheme.<init>(Ljava/lang/String;ILorg/apache/http/conn/scheme/SchemeSocketFactory;)V
at org.openqa.selenium.remote.internal.HttpClientFactory.getClientConnectionManager(HttpClientFactory.java:59)
at org.openqa.selenium.remote.internal.HttpClientFactory.<init>(HttpClientFactory.java:48)
at org.openqa.selenium.remote.HttpCommandExecutor.<init>(HttpCommandExecutor.java:120)
at org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.start(NewProfileExtensionConnection.java:81)
at org.openqa.selenium.firefox.FirefoxDriver.startClient(FirefoxDriver.java:244)
at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:110)
at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:190)
at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:183)
at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:179)
at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:92)
at com.google.gwt.sample.contacts.test.GoogleSearch.main(GoogleSearch.java:20) 
```

关于什么可能是错的任何想法？实际上，我尝试过的其他几个示例都给了我类似的 NoSuchMethod 错误。EG [http://thomassundberg.wordpress.com/2011/10/18/testing-a-web-application-with-selenium-2/](http://thomassundberg.wordpress.com/2011/10/18/testing-a-web-application-with-selenium-2/) 如果您有任何简单的 Selenium2 示例，我将不胜感激链接。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:45:45.223

如果您想开始使用 Selenium webdriver，我建议您通读 seleniumhq.org 上的文档，也许可以尝试下一页上的示例，它会稍微简化一些。

[http://seleniumhq.org/docs/03_webdriver.jsp](http://seleniumhq.org/docs/03_webdriver.jsp)

我还建议使用 eclipse 并远离 maven 和 ant，直到你很好地掌握了 webdriver，假设你是这些应用程序的新手。

# javascript - 如何使用jQuery通过id从元素中获取html

> ID：14593727
> 
> 赞同：7
> 
> 时间：2013-01-29T23:06:04.743
> 
> 标签：javascript, jquery, html, getelementbyid

我有简单的清单：

```
<ul id="tabs_nav">
    <li id="t_00">data</li>
    <li id="t_01">data</li>
    <li id="t_02">data</li>
    <li id="t_03">data</li>
</ul> 
```

现在：如何获取第一个元素的 html，具体取决于 ID 是什么。我会补充说，所有的 ID 都会随着按钮的点击而动态变化。这是我的代码：

```
btn.on('click',function(){
    var ladder_nav_tabs = $('#tabs_nav'),
        first_ladder_element_inset_id = ladder_nav_tabs.find('li').first().attr('id'),
        first_ladder_element_inset_html = ladder_nav_tabs.find(first_ladder_element_inset_id).html();
    console.log(first_ladder_element_inset_html);
}); 
```

谢谢帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T23:11:55.427

似乎您缺少 id 选择器`#`。

您正在尝试从选择器中获取 html：

```
ladder_nav_tabs.find(first_ladder_element_inset_id).html(); 
```

这不起作用，因为 id 选择器需要`#`. 像这样：

```
ladder_nav_tabs.find("#" + first_ladder_element_inset_id).html(); 
```

尝试以下方法来修复您的代码：

```
btn.on('click',function(){
    var ladder_nav_tabs = $('#tabs_nav'),
        first_ladder_element_inset_id = ladder_nav_tabs.find('li').first().attr('id'),
        first_ladder_element_inset_html = ladder_nav_tabs.find("#" + first_ladder_element_inset_id).html();
    console.log(first_ladder_element_inset_html);
}); 
```

* * *

[**演示**](http://jsfiddle.net/sHAR8/)- 更新到有效的 id 选择器语法

* * *

或者，您可以使用 jQuery 的[**eq**](http://api.jquery.com/eq/)缩短代码，类似于：

```
btn.on('click',function(){
    var theHtml = $('#tabs_nav li').eq(0).html();
    console.log(theHTML);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T23:09:00.887

不要将 jQuery 纯粹用作选择器引擎：

```
btn.onclick = function() {
  console.log(document.getElementById('tabs_nav').children[0].innerHTML);
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T23:07:44.307

查看 jQuery`first-child` [选择器](http://api.jquery.com/first-child-selector/)。具体来说：

```
btn.on('click',function(){
    var first_child = $('#tabs_nav li:first-child');
    var first_child_html = first_child.html();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T23:09:10.387

尝试这个：

```
btn.on('click',function(){
    var ladder_nav_tabs = $('#tabs_nav'),
        first_ladder_element_inset_id = ladder_nav_tabs.find('li:first-child').attr('id'),
        first_ladder_element_inset_html = ladder_nav_tabs.find(first_ladder_element_inset_id).html();
    console.log(first_ladder_element_inset_html);
}); 
```

你必须使用`:first-child`

# haskell - GHCi 中的 Haskell 函数

> ID：14593728
> 
> 赞同：2
> 
> 时间：2013-01-29T23:06:08.207
> 
> 标签：haskell, ghci

我对 Haskell 完全陌生。我一直在尝试学习如何编写函数，比如说添加两个整数。我目前正在使用 GHCi 对 Haskell 进行编码。我尝试从[http://www.haskell.org/tutorial/functions.html](http://www.haskell.org/tutorial/functions.html)学习，但这不起作用，我得到一个不在范围内的错误。我非常感谢任何帮助。我是否应该不使用 GHCi 来编写 haskell 代码来创建函数？GHCi，到目前为止似乎工作正常，除了功能之外的所有东西。

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T23:14:48.657

您必须使用 let 在 GHCI 中声明函数

```
ghci>let add x y = x + y
ghci>add 3 3
6 
```

一般来说，虽然我会建议你打开一个文本编辑器并在那里编写你的函数，保存为 .hs 并在 ghci 中使用 :l 打开它

像这样（来自 RWH）

```
-- file: ch03/add.hs
add a b = a + b 
```

然后：

```
ghci> :l add.hs
[1 of 1] Compiling Main             ( add.hs, interpreted )
Ok, modules loaded: Main.
ghci> add 1 2
3 
```

# javascript - 在 jqgrid 上显示的数据大小限制

> ID：14593731
> 
> 赞同：3
> 
> 时间：2013-01-29T23:06:27.757
> 
> 标签：javascript, jquery, jqgrid

[这是我之前在此处](https://stackoverflow.com/questions/13765715/trouble-to-displaying-json-data-on-jqgrid-and-formatting)发布的问题的后续行动。我有一些我们得到大量数据的情况，大约 200KB 要显示在 jqgrid 上。在这种情况下，永远不会显示最后一组数据。每条记录由换行符分割。数据格式如下：

```
{"data":{"data":"\tat org.aaa.aaa.aaa.aaa.aaa.aaa(aaa.java:512)[147:org.aaa.aaa.aaa:9.1.1]\n\tat aaa.aaa.aaa.aaa.aaa.aaa(aaa.java:1789)[146:org.aaa:9.1.1]\n"}} 
```

网格的代码如下：

```
$("#grid").jqGrid({
    type: "GET", 
    url: "/getdata",
    datatype: "json",
    colNames: [''],
    colModel: [
       {name: 'data', align: 'left', sortable: false}
    ],
    jsonReader: {
        root: "data",
        cell: "",
        id: function () {
            return function () {
                return $.jgrid.randId();
            }
        },
        page: function() { return 1; },
        total: function() { return 1; },
        records: function(obj) { return obj.data.length; }
    },
    loadonce: false,
    viewrecords: true,
    sortname:'',
    rowNum: '9999',
    autowidth: true,
    ignoreCase: true,
    height: "auto",
    multiselect: false,
    sortable: false,
    autoencode: true,
    loadComplete: function() {
         $("tr.jqgrow:even").css("background", "#DDDDDC");
    },
    // We will handle the errors with ajax error handlers for now
    loadError: function(error){
        displayError(error.responseText);
    },
    beforeProcessing: function (data) {
         var items = data.data.split("\n"), i, l, item;
         data.logs = [];
         for (i = 0, l = items.length; i < l; i++) {
            item = $.trim(items[i]);
            if (item.length > 0) {
                data.data.push([item]);
             }
         }
    }
}); 
```

我尝试将 rowNum 设置为 '', 99999，但没有任何效果。总行数 wwas 相同的行似乎从 jqgrid 中的显示中被截断。jqgrid可以显示的数据量有没有限制？到目前为止，jqgrid 上还没有实现分页。

非常感谢任何指针。

谢谢，

阿莎

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T08:43:06.433

首先，我建议您使用正确类型的 jqGrid 的所有输入参数。在[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:options)中，您将找到具有`"Type"`列的表。列的类型`rowNum`是整数。所以你应该使用`rowNum: 9999`而不是`rowNum: '9999'`.

此外，我强烈建议您始终使用`gridview: true`jqGrid 选项。如果将所有数据放在一个页面上，这样的设置可以提高多次填充网格的性能。

同样，我不建议您对`loadComplete`. 它降低了 jqGrid 的性能。例如，您可以定义自定义 CSS 类

```
.myAltRows: { background: #DDDDDC } 
```

并使用选项`altRows: true, altclass: "myAltRows"`。或者，您可以使用`rowattr`回调在网格的选定行上设置自定义`class`或自定义。`style`有关更多详细信息，请参阅[答案](https://stackoverflow.com/a/10531680/315935)。

最后一句话。我不建议您包含具有默认值的选项（例如`type: "GET", loadonce: false, sortname:'', multiselect: false, sortable: false`）或`colModel`具有默认值的属性（例如`align: 'left'`）。您应该检查文档[的选项](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:options)和[`colModel`选项](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:colmodel_options)的默认值列。

# haskell - Haskell UArray 变量类型

> ID：14593732
> 
> 赞同：1
> 
> 时间：2013-01-29T23:06:33.353
> 
> 标签：haskell

我正在尝试使用非常通用的 UArrays 编写一个函数。我想要类型签名：

```
myFunction :: a -> b -> ((UArray Int a), (UArray Int b)) 
```

但是，a 和 b 太笼统了。我希望它们成为可能的实例之一`IArray UArray a`。是否有一些派生类型可以让我指定这个？例如，如果 Num 是一个有效的实例，我可以这样做：

```
myFunction :: (Num a, Num b) => a -> b -> ((UArray Int a), (UArray Int b)) 
```

我想做的事情有意义吗？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T23:35:36.823

我们需要从您将要使用的数组方法中重复约束，例如`array`etc。由于您的索引是固定的并且我们知道它们是 的实例`Ix`，我们只需要添加`IArray`约束：

```
myFunction :: (IArray UArray a, IArray UArray b)
           => a -> b -> ((UArray Int a), (UArray Int b)) 
```

为此，您需要[FlexibleContexts](http://www.haskell.org/ghc/docs/7.2.1/html/users_guide/type-class-extensions.html#instance-rules)（参见第*7.6.3.2 节。实例上下文的宽松规则*）语言扩展。

您还可以考虑将您的函数推广到任意数组（不仅仅是`UArray`s

```
myFunction1 :: (IArray arr a, IArray arr b)
            => a -> b -> ((arr Int a), (arr Int b)) 
```

甚至可能是任意索引：

```
myFunction2 :: (IArray arr a, IArray arr b, Ix i)
            => a -> b -> ((arr i a), (arr i b)) 
```

（对于这 2 个变体，您不需要扩展。）

由于您可能正在使用`UArray`s 来提高速度，因此我建议添加[`INLINE`](http://www.haskell.org/ghc/docs/7.0.4/html/users_guide/pragmas.html#inline-pragma)pragma 以便您的函数在您使用它的地方针对特定数据类型进行优化。这可以显着提高速度。

# c# - 如何将图标添加到 MenuItem？

> ID：14593738
> 
> 赞同：-3
> 
> 时间：2013-01-29T23:06:45.233
> 
> 标签：c#, .net, windows, winforms, menu

> **可能重复：**
> [如何在 MenuItem 中放置图标](https://stackoverflow.com/questions/6623672/how-to-put-an-icon-in-a-menuitem)

我想在退出菜单项旁边放置一个门箭头图标。这可能吗？我敢肯定，因为我以前在其他地方见过它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:24:11.280

假设您使用的是 Visual Studio 2012，使用设计器向菜单添加图标应该非常简单。

右键单击要添加图标的菜单项，然后选择设置图像。![设置图像的菜单截图](../Images/cbca949c0eb888dd3c66b04d7762e5f8.png)

我不记得此选项在以前版本的 Visual Studio 中是否可用，但应该有一种通过 IDE 设置它的简单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:26:26.117

我找到了一个名为 VistaMenu 的开源库，它看起来正是我正在寻找的。它不是自定义绘制的，它是从本机菜单继承的。

[http://wyday.com/vistamenu/](http://wyday.com/vistamenu/)

# sockets - 通过套接字的连续数据流越来越延迟

> ID：14593739
> 
> 赞同：1
> 
> 时间：2013-01-29T23:06:46.953
> 
> 标签：sockets

我正在开发一个应用程序，该应用程序通过 Java 程序链接两个不同的机器人模拟环境。一个模拟环境（我们称之为 A）将机器人的当前状态发送到 Java 应用程序，Java 应用程序进行一些计算，然后将有关此当前状态的数据以及其他一些信息发送到另一个模拟环境（我们称之为它B）。模拟 B 然后更新机器人的状态以匹配模拟 A 的版本。

问题是随着程序继续运行，模拟 B 开始落后于模拟 A 正在做的事情。这种滞后不断增加，因此在一分钟左右后模拟 B 落后了几秒钟。

我正在使用 TCP 套接字在这些环境和 Java 程序之间发送数据。从套接字编程的背景阅读中，我发现快速连续打开和关闭套接字是不好的做法，所以我目前正在做的只是保持两个套接字打开。我有一个循环运行，它从 Sim A 获取数据，进行一些计算，然后将位置数据发送到 Sim B，然后我让线程等待 100 毫秒，然后循环重复。需要明确的是，发送给 B 的位置数据与从 A 接收的数据没有改变。

在研究了延迟问题后，有人向我建议，对于数据流来说，打开和关闭套接字实际上是一个好主意，因为如果你保持套接字打开，如果一个模拟比另一个模拟需要更长的时间来处理事情，你最终位置数据在缓冲区中堆积并按顺序读取，而不是读取最新数据。这是真的？重写我的代码以每 100 毫秒打开和关闭一次套接字可能会消除延迟吗？或者这不是套接字实际工作的方式？

编辑澄清：模拟保持同步比发送所有位置数据更重要，换句话说，为了保持同步，不传递所有数据点是可以接受的。

除了保持套接字打开导致问题之外，是否有人对可能导致延迟问题的原因有任何想法？

提前感谢您的任何见解/建议/提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:56:46.570

您对使用单个连接是正确的。数据确实可以备份，但使用多个连接并不会改变这一点。

这里的基本问题是 Java 程序能否像机器人发送数据一样快地进行计算。如果不能，它就会落后。你可以对网络做各种事情来加速它，但如果计算跟不上，它们是徒劳的。所以你需要调查你的时间安排。

# .net - Ninject 中的“范围”、“上下文”等有什么区别？

> ID：14593741
> 
> 赞同：6
> 
> 时间：2013-01-29T23:06:52.670
> 
> 标签：.net, ninject, ninject-extensions

**范围**、**上下文**、**命名绑定**（和[**激活块**](http://www.planetgeek.ch/2012/04/23/future-of-activation-blocks/)？）的 Ninject 概念能否在概念级别上分开并清楚地解释？

例如，我有一个从数据库加载数据记录的服务，它通过 Ninject 工厂扩展为每条记录构造一个“工人”。服务和单个工作人员都使用实体框架的对象上下文与数据库进行交互。ObjectContext 通过构造函数注入到两者（以及其他共享依赖项）。目前它是单线程的，但最终工作人员需要在自己的线程中并行运行，因此他们将需要自己的 ObjectContext 实例和显式的启动/处置生命周期。ObjectContext 实例需要在工作人员的“工作单元”期间共享（因此不是暂时的，因为它被注入到工作人员使用的多个存储库中）。我被困在试图获得这个功能。

我天真地想要这样的东西（使用[命名范围](https://github.com/ninject/ninject.extensions.namedscope/wiki)和[上下文保存](https://github.com/ninject/ninject.extensions.contextpreservation/wiki)扩展）：

```
Bind<MyDbContext>().ToSelf();
Bind<MyService>().ToSelf();

Bind<IWorkerFactory>().ToFactory().InThreadScope();  // scope prob not necessary

Bind<MyWorker().ToSelf().DefinesNamedScope("workerScopeName");
Bind<MyDbContext>().ToSelf().InNamedScope("workerScopeName"); 
```

这显然（至少对 Ninject 用户来说是显而易见的）由于 MyDbContext 导致“多个匹配的绑定...”错误。在阅读了更多之后，我现在*认为*我可能应该为工作人员使用[命名绑定](https://stackoverflow.com/questions/6133431/how-to-use-ninject-named-bindings-with-dependencyresolver-and-propertyinjection)，它是 ObjectContext。我*认为*我仍然需要范围，以便我可以在工作人员完成时显式处置 ObjectContext（并且具有来自 ninject 范围处理的处置方法）。

无论如何，我仍然主要是在猜测，我发布这个问题是希望有人可以在 Ninject 中澄清这些概念。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T11:29:06.210

**上下文：**当前解析的元信息。它指定当前解析的对象将在对象树中的哪个位置注入。（例如，当前解析的对象将被注入到类 A 的构造函数中，该构造函数被注入到类 B 中，......）它可以用于例如使用`When`重载之一来决定绑定是否适用于当前上下文。它也被传递给流畅语法的许多其他回调（例如 InScope、OnActivation ......）

**范围：**定义对象的生命周期以及何时重用现有实例，有许多预定义范围以及可以从当前上下文指定范围的通用范围（`InScope(ctx => ...`）

**命名绑定：绑定**的元信息。可以结合上下文使用。例如，绑定仅适用于当前上下文中任何父绑定具有某个名称的情况。

**激活块：（** 从 Ninject 2.x - 3.x 开始，这可能会在未来的版本中发生变化）。在激活块内，每个绑定都更改为将激活块作为作用域。这意味着绑定上指定的范围将被忽略。将在一个激活块上为解析创建一个实例。

我个人不会使用该功能，因为它忽略了所有其他类型的范围，例如`InSingletonScope`. 更好地使用 Ninject.Extensions.NamedScope 给出的范围。

关于您的示例：由于您有两个`MyDbContext`绑定，因此您需要为它们添加条件。例如`WhenAnyAncestorNamed`。或者您可以使用另一个范围，例如`InCallScope()`仅使用一个绑定。

# database-design - 非重复数据库设计

> ID：14593746
> 
> 赞同：0
> 
> 时间：2013-01-29T23:07:19.347
> 
> 标签：database-design, relational-database, database-schema

如果我需要保留会员购买历史记录，但又想保持我的数据库尽可能高效（第 3 范式），我将如何避免重复数据？这就是我想出的：

**粗体**= 主键

成员（**memberID**、名字、姓氏、地址、城市、州、邮编）

历史（**historyID**，购买，日期，金额）

会员历史（**会员ID**，**历史**ID ）

与此有关的是我的历史表本身没有任何意义，而连接的表似乎会有一堆重复。任何人 1) 看到此设计的问题 2) 可以告诉我更好的方法来保存成员历史吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:17:47.187

摆脱`MemberHistory`，像这样。

```
Member(memberID(PK), firstName, lastName, address, city, state, zip)

History(historyID(PK), memberID(PK/FK), purchase, date, amount) 
```

没有多对多的关系，所以你不需要`MemberHistory`

# python - 使用客户端 Google 分析记录服务器端 Django 事件

> ID：14593747
> 
> 赞同：1
> 
> 时间：2013-01-29T23:07:20.950
> 
> 标签：python, django, google-analytics, server-side

是否有人对使用客户端 Google Analytics 记录服务器端触发的 Django 事件有任何最佳实践建议？我希望从我的 Django webapp 记录到 GA 的特别精细的服务器端事件。

我已经在使用 Django 消息框架来处理面向用户的消息，所以我不愿意通过尝试将 GA 消息排队然后登录到下一个面向用户的页面来使其过载。我可以使用会话变量来做同样的事情，但这也让人感觉有些混乱。我宁愿实现一个服务器端调用，但那里也没有优雅的解决方案，所以我还是坚持使用标准的 GA API。

有没有人使用 Django/Python 或其他 Web 框架将服务器端事件级联到客户端 Google Analytics 日志记录，您有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T23:53:32.070

GA 有一个非常不错的即将推出的功能，称为[Measurement Protocol](https://developers.google.com/analytics/devguides/collection/protocol/v1/)。它允许您使用简单的 POST 请求从服务器端推送数据。它仍处于开发者预览阶段，但您可以申请访问权限以进行试用。

# c# - XML序列化抑制每个类的单独节点

> ID：14593748
> 
> 赞同：0
> 
> 时间：2013-01-29T23:07:27.127
> 
> 标签：c#, xml, serialization

我正在尝试将多记录平面文件转换为 xml。对于每种记录类型，我都有一个单独的类。有些类只有一个实例，不需要用“类节点”分隔。有些有多次出现，确实需要分开。在使用 xml 序列化程序时，我找不到任何关于忽略/删除类名的帮助。

```
public class Class1
{
    public string StringA;
    public string StringB;
    public string StringC;

}
public class Class2
{
    public string StringD;
    public string StringE;
    public string StringF;
}
 public class Class3
{
    public string Name;
    public Class1 User1 = new Class1 { StringA = "A String", StringB = "B String", StringC = "C String" };
    public Class2 User2 = new Class2 { StringD = "D String", StringE = "E String", StringF = "F String" };

} 
```

下面是序列化：

```
XmlSerializer x = new XmlSerializer(typeof(Class3));
var test = new Class3();
test.Name = "Name";
x.Serialize(Console.Out, test); 
```

我得到以下信息：

```
<Class3>
<Name>Name</Name> 
<User1>
  <StringA>A String</StringA> 
  <StringB>B String</StringB> 
  <StringC>C String</StringC> 
</User1>
<User2>
  <StringD>D String</StringD> 
  <StringE>E String</StringE> 
  <StringF>F String</StringF> 
</User2> 
```

我希望 and 节点消失并成为：

```
<Class3>
  <Name>Name</Name>
  <StringA>A String</StringA>
  <StringB>B String</StringB>
  <StringC>C String</StringC>
  <StringD>D String</StringD>
  <StringE>E String</StringE>
  <StringF>F String</StringF>
</Class3> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-29T23:18:52.640

最简单和最灵活的方法是实现 IXmlSerializable（至少在 Class3 上）。

你可能想看看这个： http: [//www.codeproject.com/Articles/43237/How-to-Implement-IXmlSerializable-Correctly](http://www.codeproject.com/Articles/43237/How-to-Implement-IXmlSerializable-Correctly)

```
public class Class3 : IXmlSerializable
{
    public string Name;
    public Class1 User1 = new Class1 
    {
        StringA = "A String",
        StringB = "B String",
        StringC = "C String"
    };

    public Class2 User2 = new Class2
    {
        StringD = "D String",
        StringE = "E String",
        StringF = "F String"
    };

    public System.Xml.Schema.XmlSchema GetSchema()
    {
        return null;
    }

    public void ReadXml(System.Xml.XmlReader reader)
    {

    }

    public void WriteXml(System.Xml.XmlWriter writer)
    {
        writer.WriteElementString("Name", Name);
        writer.WriteElementString("StringA", User1.StringA);
        writer.WriteElementString("StringB", User1.StringB);
        writer.WriteElementString("StringC", User1.StringC);

        writer.WriteElementString("StringD", User2.StringD);
        writer.WriteElementString("StringE", User2.StringE);
        writer.WriteElementString("StringF", User2.StringF);

    } 
```

# 3d - 为什么网络上的左手和右手坐标系如此混乱？

> ID：14593750
> 
> 赞同：0
> 
> 时间：2013-01-29T23:07:33.263
> 
> 标签：3d, axes

有时我的左右手不太好，所以当我尝试做一些与计算机图形相关的编码时，我最终会在网上查找右手和左手坐标系的东西。无论如何，我的问题与编码无关，而是与网络上有关这些东西的正确定义的信息有关。

每次我抬头我都会变得更加困惑

这是一个页面列表，其中关于 coords 和 hand stuff 的所有内容都彼此不同

[http://www.cnexpo.com/Cartesian.aspx](http://www.cncexpo.com/Cartesian.aspx)

[http://mathworld.wolfram.com/Left-HandedCoordinateSystem.html](http://mathworld.wolfram.com/Left-HandedCoordinateSystem.html)

[http://en.wikipedia.org/wiki/Right-hand_rule](http://en.wikipedia.org/wiki/Right-hand_rule)

[http://www.evl.uic.edu/ralph/508S98/coordinates.html](http://www.evl.uic.edu/ralph/508S98/coordinates.html)

这些轴图像都没有以一致的方式对齐，这使得在心理上难以对齐。

有人可以指出最终确定这个问题的页面或参考，以便我从现在开始可以始终依赖它

我通常认为右手意味着z +朝向我，左手意味着z +远离我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:24:32.150

维基百科的[右手规则页面](http://en.wikipedia.org/wiki/Right-hand_rule)是正确的：右手意味着z+朝向你。

# javascript - #linkTo helper 中的动态 CSS 类字符串（使用 ember.js 版本 pre4）

> ID：14593752
> 
> 赞同：9
> 
> 时间：2013-01-29T23:07:36.617
> 
> 标签：javascript, ember.js, handlebars.js

我有一个这样的车把模板：

```
<script type="text/x-handlebars" data-template-name="sections">
  {{#each section in controller}}
    {{#linkTo "section" section}} {{ section.label }} {{/linkTo}}
  {{/each}}
</script> 
```

一切正常。我的模型对象如下所示：

```
App.Section = DS.Model.extend({
 sectionDetail: DS.attr('number'),
 label: DS.attr('string'),
 cssClass: DS.attr('string')
}); 
```

我想使用助手`"cssClass"`内部的属性。`"#linkTo"`现在，如何（从语法上）完成？

我试过这个，但这显然不起作用，因为 using`{{section.cssClass}}`不会呈现的值`section.cssClass`而是裸字符串`"{{section.cssClass}}"`。

```
<script type="text/x-handlebars" data-template-name="sections">
  {{#each section in controller}}
    {{#linkTo "section" section class="{{section.cssClass}}"}} {{ section.label }} {{/linkTo}}
  {{/each}}
</script> 
```

我找不到有效的解决方案，有人可以在这里为我指出正确的方向，还是很简单无法实现我想要做的事情？我应该以不同的方式构建链接吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-30T01:08:58.253

对于其他在这里绊倒的人，解决方案是使用`classNamesBindings`.

```
<script type="text/x-handlebars" data-template-name="sections">
  {{#each section in controller}}
    {{#linkTo "section" section classNameBindings="section.cssClass"}} 
      {{section.label }}
    {{/linkTo}}
  {{/each}}
</script> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-07-27T23:40:14.903

是的，我有这个：

```
<input type="checkbox" {{bind-attr class=":toggle isLiked:toggleHighlight"}}> 
```

并且需要这样做，使其成为输入助手，但无法弄清楚如何关闭元素（新手）：

```
{{input type="checkbox" checked=isLiked}} 
```

所以 classNameBindings 来救援：

```
{{input type="checkbox" checked=isLiked classNameBindings=":toggle isLiked:toggleHighlight"}} 
```

# jquery - 两个 jQuery 对象冲突

> ID：14593753
> 
> 赞同：0
> 
> 时间：2013-01-29T23:07:39.527
> 
> 标签：jquery, tabs, slider, conflict

我遇到了这个问题，我无法在我的页面上使用两个基于 jQuery 的对象。根据放置，on 或 other 似乎无法正常工作。

目前，代码看起来是这样的：

```
 <script type="text/javascript" src="jquery-1.2.6.min.js"></script>
    <script type="text/javascript" src="jquery-ui-personalized-1.5.2.packed.js"></script>
    <script type="text/javascript" src="sprinkle.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
    <script src="js/slides.min.jquery.js"></script>

    <script>
        $(function(){
            $('#slides').slides({
                preload: true,
                generateNextPrev: false
            });
        });

    </script> 
```

我没有选择，任何想法如何让这些人一起工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T23:11:38.503

你真的不应该同时使用两个`jQuery`版本，但如果你必须：

```
<script type="text/javascript" src="jquery-1.2.6.min.js"></script>
<script>
    $jq1 = $.noConflict(true);
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
<script>
    $jq2 = $.noConflict(true);
</script> 
```

现在您的`1.2.6`版本为`$jq1`，另一个为`$jq2`：

```
$jq1(function(){
        $jq1('#slides').slides({
            preload: true,
            generateNextPrev: false
        });
    }); 
```

# windows - 在 Windows 中创建文件夹最新文件的快捷方式

> ID：14593754
> 
> 赞同：3
> 
> 时间：2013-01-29T23:07:40.673
> 
> 标签：windows, file, directory, shortcut

有没有办法创建快捷方式总是指向 Windows 中文件夹的最新（或最大等）？

例如：
文件夹/文件1 2012-01-01 xxx
文件夹/文件2 2013-01-01 xxx

**文件夹/快捷方式 -> 指向 file2**

编辑文件1后：

文件夹/文件1 2013-02-01 xxx
文件夹/文件2 2013-01-01 xxx

**文件夹/快捷方式 -> 指向 file1**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-10-27T11:44:00.970

您可以使用 PowerShell 脚本为您打开文件：

```
$dir = "C:\test_code"
$filter="*.txt"
$latest = Get-ChildItem -Path $dir -Filter $filter | Sort-Object LastAccessTime -Descending | Select-Object -First 1
Invoke-Item $latest.fullname 
```

# java - getClass().getResource() 异常？

> ID：14593766
> 
> 赞同：2
> 
> 时间：2013-01-29T23:08:27.163
> 
> 标签：java, swing, components, imageicon, getresource

我正在尝试学习如何将图像添加到我的 JFrame。我在 GUI 方面已经足够了，但我根本无法理解为什么这不起作用。

我已经设置了数组，以便我可以制作多个图像，以防您想知道。

(1) 我的问题是 getClass().getResource("0.png"); 由于某种原因，这一直失败。当 main(S...) 去创建对象 GUIv1 时，它在 image[0].....0.png") 中失败；

不知道为什么，我正在使用 eclipse，并且图像就在我的班级所在的默认包中。有什么需要吗？

(2) 这里似乎也有问题，但这不是第一个异常的原因，我也很感激这个问题的答案。

（如果代码字体有误，我深表歉意，这是我第一次来这里）。

```
import java.awt.*;
import javax.swing.*;

public class GUIv1 extends JFrame{

private static int tilesnum = 2;
private static ImageIcon[] image = new ImageIcon[tilesnum + 2];
private static JLabel[] imagepanel = new JLabel[tilesnum + 2];

public GUIv1() {
    setLayout(new FlowLayout());

    image[0] = new ImageIcon(getClass().getResource("0.png"));     //HERE (1)
    image[1] = new ImageIcon(getClass().getResource("1.png"));
    image[2] = new ImageIcon(getClass().getResource("2.png"));
    image[3] = new ImageIcon(getClass().getResource("3.png"));

    for(int i = 0; i < tilesnum + 2; i++) {
        imagepanel[i] = new JLabel(image[i]);
        add(image[i]);                                         //HERE (2)
    }

}

public static void main(String[] args) {

    GUIv1 selectorframe = new GUIv1();  
    selectorframe.setTitle("MapEditor v2");
    //JFrame mainframe = new JFrame("MapEditor v2");    
    selectorframe.pack();
    selectorframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    selectorframe.setVisible(true);
}   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T23:14:46.373

使用时`getClass().getResource()`，您的图像必须与您的类文件位于同一位置`GUIv1.class`，否则`NPE`将`null`值传递给`ImageIcon`.

如果您不确定类根在哪里（在这种情况下，图像应该位于哪里），您可以显示以下结果：

```
System.out.println(getClass().getProtectionDomain().getCodeSource().getLocation()); 
```

在你的构造函数中。

其次，您不能`ImageIcon`直接将 an 添加到您的`JFrame`容器中，因为它不是组件。您可以添加您的`Jlabel`，这*是*一个组件：

```
add(imagepanel[i]); 
```

# interface - F# 和接口实现的成员

> ID：14593771
> 
> 赞同：17
> 
> 时间：2013-01-29T23:08:39.617
> 
> 标签：interface, f#, overloading, overload-resolution, explicit-interface

我有一个令人烦恼的错误。

```
type Animal =

    abstract member Name : string

type Dog (name : string) =

    interface Animal with

        member this.Name : string =
            name

let pluto = new Dog("Pluto")
let name = pluto.Name 
```

最后一行，特别是“名称”会生成一个编译器错误，指出“未定义字段、构造函数或成员‘名称’”。

我使用的解决方法是写

```
let name = (pluto :> Animal).Name 
```

然而，这非常烦人并且会产生很多视觉噪音。有没有人可以在 F# 中做些什么来解析 Name 而无需明确告诉编译器 Name 是 Animal 类型的派生成员？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-29T23:29:41.410

在 F# 中，当您实现接口时，它相当于[C# 中的显式接口实现](http://msdn.microsoft.com/en-us/library/ms173157.aspx)。即可以通过接口调用方法，但不能直接通过类。

[关于接口的 F# 参考文章](http://msdn.microsoft.com/en-us/library/dd233207.aspx)建议添加一个对类型进行向上转换的方法：

```
type Dog (name : string) =

    member this.Name = (this :> Animal).Name

    interface Animal with
        member this.Name : string = name 
```

或者，正如 Daniel 所建议的，你可以反过来做，这意味着你可以避免这种演员：

```
type Dog (name : string) =

    member this.Name = name

    interface Animal with
        member this.Name : string = this.Name 
```

此外，接口名称的 .Net 约定是以 开头`I`，因此您的接口应称为`IAnimal`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-31T08:15:52.970

另一种选择是使用[抽象类](http://msdn.microsoft.com/en-us/library/dd483471.aspx)而不是接口：

```
[<AbstractClass>]
type Animal () =
    abstract Name : string

type Dog (name) = 
    inherit Animal()
    override dog.Name = name

let pluto = Dog("Pluto")
let name = pluto.Name 
```

# ubuntu - 生成 X509 证书并将其附加到 Amazon ec2 帐户

> ID：14593775
> 
> 赞同：1
> 
> 时间：2013-01-29T23:08:47.783
> 
> 标签：ubuntu, amazon-ec2, ubuntu-12.04

亚马逊的文档似乎假设每个使用它的人都知道 X509 证书以及如何生成它们。我没有，而且互联网上似乎没有人有兴趣解释如何做最少的事情来生成适用于 EC2 的 X509 证书。生成与 EC2 一起使用的 X509 证书需要什么，并且在非常具体的步骤中？这些步骤的目标环境是 Ubuntu 12.04。

*编辑：请注意，我不能简单地使用“生成 X509 证书”选项卡，因为这是一个 IAM 帐户。*

# c++ - SDL 控制台输出在调试时有效，但在使用 exe 运行时无效

> ID：14593783
> 
> 赞同：3
> 
> 时间：2013-01-29T23:09:10.403
> 
> 标签：c++, console, sdl, codeblocks, freopen

我正在编写一个实验性的网络程序，基本上是一个学习网络的测试程序。我在带有 mingw 的 Code::Blocks 中使用 SDL 和 SDL_net，因此控制台输出被定向到 stdout.txt。我四处搜索，发现您可以通过在 SDL_Init() 之后添加来解决此问题：

```
freopen("CON", "w", stdout); //stops redirect of output
freopen("CON", "w", stderr); //and errors... 
```

这工作得很好，但只有在 IDE 中构建和运行程序时：在 IDE 之外运行时（例如双击程序），程序运行正常，但控制台输出除外，它仍然是空白的。由于该程序应该是一个控制台程序，这是一个严重的问题......我不想总是在 IDE 中运行该程序来使用它。

任何解决方案都是值得赞赏的，但我更希望它是对代码的更改，尽管在紧要关头一个批处理文件会做（我读过几篇文章，这是唯一有效的方法，但他们没有去非常详细，所以我无法复制它）。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-19T08:47:44.383

# 对于 (MinGW) SDL 2.0 用户

SDL 2.0 默认禁用控制台，或者更确切地说，它不启用它。由于编译`-mwindows`禁用控制台，stdout 不指向任何东西。SDL_Log 有点花哨，可以使用 windows API 找到控制台，但它无法捕获标准输入，因为`cmd.exe`偷了它:(。

SDL 不认领控制台有多种原因，很可能是因为程序是用`-mwindows`. 指定`WinMain`为入口点也可能会`cmd.exe`回收控制台。从我读过的内容`SDL_main`可能会重定向标准输出和标准错误。

你可能会逃脱`#undef`'ing main，和/或

*   调用`AllocConsole();`后`SDL_init(...);`
*   采用`freopen("CON", stdout)`
*   编译没有`-mwindows`( `#undef`'ing`main`似乎没有任何效果)

但是您实际上应该将标准输出重定向到例如 cat，使用（始终遵循“除非必须这样做，否则`main | cat`不要主”的规则）。`#undef`

# TL; 博士

要为 MinGW 捕获`stdout`，只需将您的程序重定向到`cat`: `main | cat`。这是一个 hack，它只是确保 stdout 和 stderr 不指向任何内容。
要同时捕获`stdin`和`stdout`，请在不使用 -mwindows 的情况下进行编译以创建 Windows 控制台应用程序。如有必要，这将打开一个新窗口。

Note: It is especially important to flush output when using one of the above methods. Relying on line buffering is bad practice anyway.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T00:18:14.383

（我昨天无法发布，因为我没有足够的声誉）

好的，对批处理文件的行做了一些试验。我的结果和（几乎）工作批处理文件：

```
program.exe 
```

没有意识到它会这么简单，但仍然无法理解为什么双击程序不起作用。我说几乎可以工作，因为在客户端连接到服务器后控制台空白，所以仍然存在问题。所以，我仍然会非常感谢这个问题的任何帮助。

（昨天的准帖子结束）

（今天的回答开始）

我尝试了 Emartel 的建议，但仍然没有用。做了一些测试，发现打印空字符串的无限循环导致连接客户端后出现黑屏问题。修复了循环，现在它可以正常工作了，尽管我仍然必须使用批处理脚本。

如果有人弄清楚为什么双击不起作用，会很感激。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:23:42.597

您是否查看过[SDL 控制台常见问题解答](http://sdl.beuc.net/sdl.wiki/FAQ_Console)？

他们提供了许多建议，包括：

第一次尝试

```
freopen( "CON", "w", stdout );
freopen( "CON", "w", stderr ); 
```

如果它不起作用（如您的情况），请尝试

```
#include <fstream>
#include <iostream>
using namespace std;
....
ofstream ctt("CON");
freopen( "CON", "w", stdout );
freopen( "CON", "w", stderr );
...
ctt.close(); 
```

或者

```
FILE * ctt = fopen("CON", "w" );
freopen( "CON", "w", stdout );
freopen( "CON", "w", stderr );
...
ctt.close(); 
```

另一种选择是重新编译`SDLmain`库或将`SDLmain`代码添加到您的项目并停止链接到库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-03T04:31:26.227

两个原因：

*   使用 SDL，控制台被禁用。SDL 使用窗口，而不是控制台。

*   SDL 将标准输出（cout 和 printf()）重定向到一个名为 stdout.txt 的文件，该文件位于 *.exe 所在目录的同一文件夹中。

您可以使用：

```
std::cout << "Hello World"; 
```

并且消息将存储在文件 stdout.txt 中。

# appharbor - AppHarbor 单元测试因缺少文件而失败

> ID：14593789
> 
> 赞同：0
> 
> 时间：2013-01-29T23:09:45.993
> 
> 标签：appharbor

我正在使用 AWS S3 在我的 AppHarbor 应用程序上存储文档，并且我编写了一些单元测试以确保我的 AWS 连接对于每次部署都是稳定的。我已将示例图像提交到存储库以测试上传，但该图像似乎没有传输到 AppHarbor 本地存储库。我的所有 AWS S# 单元测试都出现了这个异常：

> System.IO.DirectoryNotFoundException：找不到路径“D:\Core.Tests\data\upload_test.png”的一部分。在 System.IO.__Error.WinIOError（Int32 错误代码，字符串可能全路径）

这是预期的 AppHarbor 还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:36:44.090

该文件可能没有被复制到构建输出目录。确保该文件已签入 git，并且从您的项目中引用它并`Build Action`设置为`Content`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:31:49.293

我确信有几种方法可以正确地做到这一点，但我通过使用 DeploymentItem 属性找到了解决我自己问题的方法，如下所示：

> [测试类]
> 
> [部署项（“数据”，“数据”）]
> 
> 公共类 ExternalTests
> 
> {

而不是尝试使用绝对路径引用文件夹的路径，如下所示：

> //AppDomain.CurrentDomain.BaseDirectory + "\..\..\..\Core.Tests\data\";

干杯。

# c - C中的动态大小的字符串

> ID：14593790
> 
> 赞同：1
> 
> 时间：2013-01-29T23:09:56.183
> 
> 标签：c, string, dynamic, realloc, strcat

我有以下代码并编辑我将在我正在创建的程序中处理的“路径”的字符串。

我的问题是我的代码有效，但我不知道为什么或更清楚我不明白为什么`strcat`允许`src`附加到`dest`. 由于一切都在使用动态字符串，我不应该这样做`realloc dest`。但是当我尝试时，`realloc`失败了

```
#include <stdio.h>
#include <string.h>

    int main(int argc, char** argv) {
        char *src = argv[1];
        char *dest = argv[2];
        char *d_basedir;
        int s_length = strlen(src);

        printf("dest starts as %s: length %zu\n", dest, strlen(dest));
        printf("src starts as %s: length %zd\n", src, strlen(src));

        if(!(src[s_length - 1] == '/')) {
            if((d_basedir = strrchr(src, '/')+1) != NULL) {
                printf("basedir is %s\n", d_basedir);
                strcat(dest, d_basedir);
                printf("dest changed to %s: length %zd\n", dest, strlen(dest));
            }
        }

        printf("dest ends as %s: length %zd\n", dest, strlen(dest));

        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:15:15.583

托管环境为您提供了`argv[]`数组，但您没有分配此内存，因此您不应尝试重新分配它。你根本不应该真正修改`argv[]`。如果要进行修改，请先复制字符串（使用`malloc`等），然后至少可以确定是否有足够的空间，或者`realloc`在连接之前是否需要使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:14:01.807

```
strcat(dest, d_basedir); 
```

实际上相当于：

```
strcat(argv[2], d_basedir); 
```

这是未定义的行为。它可能今天有效，明天失败。您有权写入`argv[2][0]`up to`argv[2][strlen(argv[2])]`但超过该元素（您对`strcat`呼叫所做的事情）是未定义的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T23:15:07.577

它有效，因为你很幸运。就这样 ;-）

通过附加到 dest，您将覆盖程序已分配的一些内存，但它不会将其用于任何重要的事情。所以这就是它“起作用”的原因。

您不能重新分配不是由 malloc 分配的内存。传递给 main() 的参数是这些内存部分之一。

您想要的是为新路径分配足够大的新内存，然后将 strcpy 和 strcat 放入其中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T23:16:47.977

`strcat`不在乎`dest`。它只是一个指向 char 的指针，对于[strcat](http://www.cplusplus.com/reference/cstring/strcat/)来说已经足够了。

由于`argv[2]`来自环境，因此不允许添加到 dest (argv[2])。正确的方法是分配足够的内存，复制`argv[2]`到它并附`d_basedir`加到它

```
char *dest = malloc(strlen(argv[2]) + strlen(d_basedir) + 1);
strcpy(dest, argv[2]);
strcat(dest, d_basedir); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T00:08:18.837

我个人不会对这类代码使用 realloc/malloc。

您可以使用 PATH_MAX（或在某些情况下为 MAX_PATH）来确定您需要的最长路径。

```
 char dest[PATH_MAX]; 

 strcpy(dest, d_basedir);
 strcat(dest, argv[2]); 
```

（这与您编写的内容略有不同，它将 src-path 的 d_basedir 附加到 dest 的末尾，这对我来说似乎是错误的）

# c++ - GPU 加速排序 (~1GB) 和合并排序 (~100GB)

> ID：14593791
> 
> 赞同：3
> 
> 时间：2013-01-29T23:09:58.313
> 
> 标签：c++, sorting, opencl, gpu, gpgpu

我要求一个 c++ 库来进行 GPU 加速排序（大约 1GB 的数据）和合并排序（例如，大约 100GB 的数据——但大小并不重要，因为合并是一种流算法）。许可证必须是 LGPL、BSD 或类似的。由于可移植性，我非常喜欢 OpenCL（但我也对指向 CUDA 库的链接感兴趣）。我很欣赏有关此主题的论文和博客文章的链接。

### 一些背景（如果我错了请纠正我）：

1GB 的 2 路合并排序（即 128 000 000 个 8 字节实体）将消耗大约 log [2 (128 000 000)·1G = 27GB 的内存带宽，这在具有]*顺序*内存带宽的现代 CPU 上约为 1 秒约 30GB/秒。（任何非合并排序似乎都需要更长的时间，因为非顺序内存访问速度要慢 10-100 倍）。

虽然我不熟悉现代 GPU，但我怀疑 1GB 的合并排序将花费 0.2 秒甚至更少，因为典型的 GPU 内存带宽约为 150GB/s，如 AMD/ATI 58xx（参见，例如[http://en .wikipedia.org/wiki/Comparison_of_AMD_graphics_processing_units#Evergreen_.28HD_5xxx.29_series](http://en.wikipedia.org/wiki/Comparison_of_AMD_graphics_processing_units#Evergreen_.28HD_5xxx.29_series)）

这至少是 5 倍的加速。（通过 16x PCI-E 2.0 传输 1GB 的时间约为 0.125 秒，但似乎可以在排序的同时进行 PCI 传输；但是，这可能需要 2GB 或 3GB 的视频卡内存而不是 1GB）。

我怀疑由于多于 2 路合并排序或某种适用于 GPU 的排序，速度会更快。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T23:17:58.107

你看过[推力](http://code.google.com/p/thrust/)吗？

从项目页面：

> Thrust 是一个类似于 C++ 标准模板库 (STL) 的并行算法库。Thrust 的高级接口极大地提高了开发人员的工作效率，同时实现了 GPU 和多核 CPU 之间的性能可移植性。与现有技术（如 CUDA、TBB 和 OpenMP）的互操作性有助于与现有软件的集成。使用 Thrust 快速开发高性能应用程序！

许可证是 Apache，所以它应该适合你。

# visual-studio-2010 - 调试网页使用的DLL

> ID：14593795
> 
> 赞同：0
> 
> 时间：2013-01-29T23:10:24.617
> 
> 标签：visual-studio-2010

我对 VS 很陌生，并且有一个供应商提供的 Web 应用程序，我们为其维护一个 DLL。在其他语言中，我可能只是简单地做了一个 <%="You are here" + strVar %> 类型的语句来让调试信息出现在网页上。但是，我现在不知道如何处理这个问题。

我已将以下几行添加到我的 Web 应用程序调用的方法中：

```
 TextWriterTraceListener tr2 = new TextWriterTraceListener(System.IO.File.CreateText("Output.txt"));
    Debug.Listeners.Add(tr2);
    Debug.WriteLine(sqlStr);
    Trace.WriteLine(sqlStr);
    IDataHelper dh = Retrieve.Implementation.GetHelper(this.GetConnectionString(externalConfig)); 
```

并编译了为调试配置的 DLL。然后我将新的 DLL 和 PDB 文件复制到我的 Web 应用程序并运行我的 Web 应用程序。但是，我的网络应用程序文件夹中没有任何类型的文本文件，也没有看到输出到屏幕的任何类型的调试信息。

有人可以告诉我我缺少什么或指向我一些额外的文档吗？

先感谢您。

rt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T03:38:15.637

我找到了解决方案，并认为我将其发布在这里供其他人使用。我需要在我的应用服务器上安装 Visual Studio 远程调试器并启动远程调试器。然后在 VS 中，我需要 Debug:Attach to Process... 在那里我能够浏览到我的远程 Web 应用程序服务器，并浏览我的代码。

# wcf - WCF服务端异常捕获FaultException

> ID：14593805
> 
> 赞同：1
> 
> 时间：2013-01-29T23:11:50.953
> 
> 标签：wcf, exception, fault

我正在使用 WCF 学习故障异常，并且遇到了一个小问题。我想看看是否有人可以建议执行以下操作的适当方法。

在我的示例中，情况是我有一个登录服务方法。当进行无效的登录尝试时，我会抛出一个自定义错误异常。我还在该方法中有一个 try catch，以便捕获任何其他未知错误并将其作为自定义未知错误异常发送到客户端。

问题是，当我抛出 AuthenticationFault 异常时，一般异常捕获也会抓住它并强制发送 UnknownFault。

查看代码后，我可以理解为什么会发生这种情况。所以，我要问社区应该如何适当地处理这个问题？

我不应该在服务中使用一般异常捕获并始终允许客户端处理吗？我真的不想使用这种方法，因为那样我将如何处理服务器上其他可能的未知异常并可能记录它们？

是否有可能具有类似于“捕获任何异常-except-faults”的捕获状态？

谢谢，下面的代码。

```
try
{
    Authenticator AuthTool = new Authenticator();
    if (AuthTool.Authenticate(credentials))
    {
        //--Successful login code
    }
    else
    {
        AuthenticationFault fault = new AuthenticationFault();
        fault.Message = "Invalid Login or Password";
        throw new FaultException<AuthenticationFault>(fault, new FaultReason(fault.Message));
    }
}
catch (Exception ex)
{
    UnknownFault fault = CommonUtil.CreateCommonFault(ex);
    throw new FaultException<UnknownFault>(fault, new FaultReason(fault.ErrorMessage));
} 
```

上面的“catch (Exception ex)”代码捕获了之前抛出的错误异常。

```
try
{
    //--proxy call to the service Login method
}
catch (FaultException<AuthenticationFault> af)
{
    //--Never gets here
}
catch (FaultException<UnknownFault> uf)
{
    //--This is what is handling although I threw the AuthenticationFault
}
catch (Exception ex)
{
    //--any other unknown error
} 
```

以上是客户端错误处理

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:43:32.037

您需要`AuthenticationFault`在第一个块中明确捕获并重新抛出您的。您的一般捕获是将其转换为`FaultException<UnknownFault>`.

```
try
{
    Authenticator AuthTool = new Authenticator();
    if (AuthTool.Authenticate(credentials))
    {
        //--Successful login code
    }
    else
    {
        AuthenticationFault fault = new AuthenticationFault();
        fault.Message = "Invalid Login or Password";
        throw new FaultException<AuthenticationFault>(fault, new FaultReason(fault.Message));
    }
}
catch (FaultException<AuthenticationFault>
{
    throw;
}
catch (Exception ex)
{
    UnknownFault fault = CommonUtil.CreateCommonFault(ex);
    throw new FaultException<UnknownFault>(fault, new FaultReason(fault.ErrorMessage));
} 
```

# sql - 使用 Select 语句和 from 函数插入表中

> ID：14593807
> 
> 赞同：0
> 
> 时间：2013-01-29T23:11:56.223
> 
> 标签：sql, sql-server, sql-server-2008

我正在尝试使用 Select 语句插入表并从函数中获取值。

```
INSERT INTO  TABLE1 
          ([Col1]
           , [Col2]
           ,[Col3]
           ,[Col4]
           ,[Col5]
           ,[CreationDate]
           ,[CreatedBy]                  
           )  
           VALUES         
 ((Select [Col1],[Col2],[Col3],[Col4
  FROM TABLE2)dbo.FUNTION(paramiter) ,SYSDATETIME(), UPPER('USERNAME')) 
```

注意：我使用的是 SQL SERVER 2008R2。请让我知道该怎么做？

谢谢大家的欢呼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:14:24.163

您需要使用以下语法：

`INSERT INTO table(columns) SELECT ...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:50:34.417

首先使您的选择语句起作用，然后 INSERT INTO TABLE1 ([col1], [col2]...) SELECT...

由于您的 Select 语句现在已损坏，因此插入也已损坏。将您的选择修复为类似

```
Select [Col1],[Col2],[Col3],[Col4],dbo.FUNCTION(parameter), SYSDATETIME(), UPPER('USERNAME')
  FROM TABLE2 
```

# php - 如何让代码行接受单引号

> ID：14593810
> 
> 赞同：0
> 
> 时间：2013-01-29T23:12:06.490
> 
> 标签：php, javascript

由于单引号，我在参数列表错误后收到了一个期待的 ) ：

```
window.top.stopAudioUpload(1, '43', 'Thorne, Grandma's Goodbye excerpt.m4a');

audioupload.php (line 11, col 54) 
```

我的问题是如何让代码行接受单引号？

代码：

```
 <script language="javascript" type="text/javascript">
 window.top.stopAudioUpload(<?php echo $result; ?>, '<?php echo $id; ?>', '<?php echo $_FILES['fileAudio']['name'] ?>');
 </script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T23:14:04.600

试试这个：

```
<script type="text/javascript">
top.stopAudioUpload(
  <?php echo json_encode($result); ?>,
  <?php echo json_encode($id); ?>,
  <?php echo json_encode($_FILES['fileAudio']['name']); ?>
);
</script> 
```

注意缺少引号 - 这很重要，因为`json_encode`如果需要会自动添加这些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T23:13:27.923

尝试\转义字符'Thorne，Grandma\'s Goodbye excerpt.m4a'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T23:15:38.430

您可以尝试使用反斜杠手动转义单引号，`Thorn, Grandma\'s Goodbye excerpt.m4a`也可以使用转义功能 - 请参阅此处的文档：

[http://www.php.net/manual/en/function.htmlspecialchars.php](http://www.php.net/manual/en/function.htmlspecialchars.php "htmlspecialchars")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T23:18:09.077

你的问题在这里：

`window.top.stopAudioUpload(<?php echo $result; ?>, '<?php echo $id; ?>', '<?php echo $_FILES['fileAudio']['name'] ?>');`

更改单引号`'<?php echo`将解决它。所以：

`window.top.stopAudioUpload("<?php echo $result; ?>", "<?php echo $id; ?>", "<?php echo $_FILES['fileAudio']['name'] ?>");`

您也可以使用`json_encode($_FILES['fileAudio']['name'])`. 这会自动添加引号。

# javascript - MongoDB：单个数据库处理程序的 >5 个打开连接

> ID：14593814
> 
> 赞同：18
> 
> 时间：2013-01-29T23:12:53.723
> 
> 标签：javascript, node.js, mongodb

我是 nodejs 和 mongdb 的新手，我将在我的一个项目中使用它们，一旦我的 db 连接正常工作，我很震惊地看到我的代码确实有多少数据库连接。所以，给定这个简单的代码段：

```
var express = require('express');
var mongo = require('mongodb');  
var app = express();

// Further details:
// nodejs: v0.8.18
// mongod: v2.2.2
// node's mongodb driver: v1.2.10

app.get('/', function(req, res){
    res.send('<h1>Ok</h1>');
});

var setUp = function() {   
    // get a handler to the testDB Database
    mongo.Db.connect('mongodb://localhost:27017/testDB', function(err, db) {
        if (err)
            throw err;
        // create a test collection in the database
        db.createCollection('test', function(err, test) {
            if (err)
                throw err;
            // insert a dummy document into the test collection          
            test.insert({'name':'admin', 'pass':'admin'});

            app.listen(3000); 
            console.log('App listening on port 3000');
        });
    });
}

setUp(); 
```

当 nodejs 进程启动时，mongo 守护进程会输出这段日志：

```
... connection accepted from 127.0.0.1:40963 #34 (1 connection now open)
... connection accepted from 127.0.0.1:40964 #35 (2 connections now open)
... connection accepted from 127.0.0.1:40965 #36 (3 connections now open)
... connection accepted from 127.0.0.1:40966 #37 (4 connections now open)
... connection accepted from 127.0.0.1:40967 #38 (5 connections now open)
... connection accepted from 127.0.0.1:40968 #39 (6 connections now open)
... end connection 127.0.0.1:40963 (5 connections now open)
... allocating new datafile /var/data/testDB.ns, filling with zeroes...
... 
```

而这个过程终止时：

```
... connection 127.0.0.1:40964 (4 connections now open)
... connection 127.0.0.1:40965 (3 connections now open)
... connection 127.0.0.1:40966 (2 connections now open)
... connection 127.0.0.1:40967 (1 connection now open)
... connection 127.0.0.1:40968 (0 connections now open) 
```

mongo 驱动程序是否真的需要与 mongod 建立如此多的连接才能获得单个数据库处理程序，或者我实现这个的方式有什么问题？我真的希望在那里只看到一个打开的连接......

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-29T23:19:48.130

`Db.connect`默认情况下打开一个包含 5 个连接的池。如果您想将其限制为单个连接，您可以通过以下[`server`](http://mongodb.github.com/node-mongodb-native/api-generated/server.html?highlight=server#Server)选项执行此操作：

```
mongo.Db.connect(
    'mongodb://localhost:27017/testDB', 
    {server: {poolSize: 1}}, 
    function(err, db) { ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T21:03:44.743

你也可以这样通过

```
var mongoclient = new mongodb.MongoClient(new mongodb.Server(
    'localhost', 27017, {'native_parser': true, 'poolSize': 1} 
)); 
```

# git-merge - 如何配置 Araxis Merge 以与 Git 一起使用？

> ID：14593817
> 
> 赞同：18
> 
> 时间：2013-01-29T23:13:07.907
> 
> 标签：git-merge, git-config

我知道 Araxis Merge 现在是`mergetool`Git 的“完全支持”，所以我能找到的关于配置 Git 以使用它的大部分内容现在已经过时了。特别是，Araxis Merge 应该“开箱即用”，只需执行

```
git config --global merge.tool araxis 
```

提供`araxis`在我的 PATH 上。

但是，由于几个原因，修改我的 PATH 不是一种选择，所以我需要能够指定正确的`path`或`cmd`在`.gitconfig`.

我应该如何配置 Git（在 OS X 上）以便它找到 Araxis Merge？只需遵循其他工具的示例，例如`kdiff3`and `p4merge`with

```
git config --global mergetool.araxis.path /Applications/Araxis Merge.app/Contents/MacOS/Araxis Merge 
```

不工作；（猜测）也不

```
git config --global mergetool.araxis.path /Applications/Araxis Merge.app/Contents/Utilities/araxisgitmerge
git config --global difftool.araxis.path /Applications/Araxis Merge.app/Contents/Utilities/araxisgitdiff 
```

我应该如何配置我的`araxis.path`？是否有其他 Git 设置应该与 Araxis Merge 一起使用？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-04T19:13:26.370

Git 现在直接使用 Araxis`compare`实用程序，而不是`araxisgitdiff`and `araxisgitmerge`，因此只需`path`将

```
/Applications/Araxis Merge.app/Contents/Utilities/compare 
```

例如，通过执行

```
git config --global mergetool.araxis.path '/Applications/Araxis Merge.app/Contents/Utilities/compare' 
```

或直接编辑`~/.gitconfig`以包含

```
[mergetool "araxis"]
     path = /Applications/Araxis Merge.app/Contents/Utilities/compare 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-11-01T18:18:03.560

很难理解这里的线程，所以我粘贴在对我有用的确切 .gitconfig 下面：

```
[diff]
tool = araxis

[merge]
tool = araxis

[mergetool "araxis"]
        path = /Applications/Araxis Merge.app/Contents/Utilities/compare 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-27T23:08:46.760

确保您正在运行 git 版本 1.6.4 或更高版本。将 Araxis Merge 安装映像中的 Utilities 文件夹中的这些实用程序复制到`/usr/local/bin`.

```
araxisgitmerge
araxisopendiff
compare
compare2 
```

然后编辑`~/.gitconfig`并添加这些行：

```
[diff]
    tool = araxis
[merge]
    tool = araxis 
```

下次键入`git mergetool`时，它应该启动 Araxis Merge 图形工具。

此信息取自[此处](http://www.araxis.com/merge_mac/scm_integration.html#Git)的 Araxis 官方文档。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-25T23:25:59.583

@raxacoricofallapatorius 很好的答案！但是您需要使用引号运行该命令行（由于 Araxis Merge 中的空格。没有引号会产生“/Applications/Araxis”的截断路径，这显然不起作用，但是添加引号并重新运行该命令修复了我的问题。谢谢！

使固定：

```
git config --global mergetool.araxis.path "/Applications/Araxis Merge.app/Contents/Utilities/compare" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-12T03:32:22.553

如果您使用 SourceTree（我使用的是 v3.0.8），将 Araxis 合并配置为外部差异工具非常容易：

使用 Araxis Merge*查看*文件差异：

*   安装 Araxis Merge
*   在 SourceTree 中：工具 > 选项 > 差异 > 外部差异工具 > 从下拉列表中选择 AraxisMerge > 确定

（无需定义Arguments，无需重启SourceTree）

示例使用：

*   右键单击要比较的未提交文件 > 选择“外部差异”（或选择文件然后`CTRL-D`） - 这将比较您的最新更改和本地存储库之间的差异。

# php - 根据ubercart中的订单总额不同的运费

> ID：14593818
> 
> 赞同：1
> 
> 时间：2013-01-29T23:13:23.373
> 
> 标签：php, drupal, ubercart

是否可以根据 Ubercart 中的订单总额提供不同的运费？如果订单总计，示例如下：

*   0-50 美元，然后运费为 50 美元
*   50-100 美元，然后运费为 125 美元
*   100-500 美元，然后运费为 1000 美元

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:39:56.067

我认为没有任何特定的选项，但是在 MARKUPS 中您可以选择 percent **，**这可能会给出您需要的接近结果。

# javascript - 显然长度很重要 - javascript长度问题

> ID：14593822
> 
> 赞同：0
> 
> 时间：2013-01-29T23:13:36.250
> 
> 标签：javascript, jquery

如果来自 db 调用的字符串的长度不是 0，我试图显示一个 div

所以，为了测试，我正在尝试：

```
html += '<div class="item_image"> price '+image.item_price; 
```

这将在 div item_image 中打印，例如：

```
price $10 
```

因此，为了显示我想要的 div，因为我正在尝试价格字段不为空：

```
if(image.item_price.length>0){ // price
        html += '<div class="price_holder">'+image.item_price+'</div>';
        } // price 
```

但它没有显示 div，就好像它没有正确读取长度，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T23:23:27.190

你可以检查为

```
if(image.item_price){ // price
    html += '<div class="price_holder">'+image.item_price+'</div>';
} 
```

它将检查`undefined`,`empty string`和`zero value`条件。[Javascript 真假条件](http://javascriptweblog.wordpress.com/2011/02/07/truth-equality-and-javascript/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:24:52.260

你检查过css吗？可能是你把 .price_holder { display: none }

```
html = '';
if (image.item_price.length > 0) {
    html += '<div class="price_holder">' + image.item_price + '</div>';
}
$('body').append(html); // don't forget to append html to where you want it displayed 
```

# sql - 关键字“TOP”附近的语法不正确。SQL 服务器

> ID：14593823
> 
> 赞同：4
> 
> 时间：2013-01-29T23:13:38.360
> 
> 标签：sql, sql-server

我有一个函数，我将它的返回值分配给一个变量，我得到一个错误

关键字“TOP”附近的语法不正确。SQL 服务器

```
if @Miracle is null OR @Miracle   =''
select @Miracle  = TOP(1) M.MiracleName
FROM Miracle M where M.MiracelID = @MiracelID 
```

如何将 TOP 之类的函数分配给变量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T23:16:13.077

我认为您只需要在变量之前移动 TOP 1 ：

```
select TOP 1 @Miracle = M.MiracleName
... 
```

您没有将 TOP 分配给变量，而是使用 TOP 告诉 SQL Server 仅返回一行。

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T23:16:38.950

就这么简单。

```
if @Miracle is null OR @Miracle   =''
select TOP 1 @Miracle  =  M.MiracleName
FROM Miracle M where M.MiracelID = @MiracelID 
```

# regex - 在 shell 文件中使用 grep

> ID：14593824
> 
> 赞同：0
> 
> 时间：2013-01-29T23:13:39.327
> 
> 标签：regex, grep

我有一个关于使用 shell 脚本在文件中获取数据的问题。我想在具有多个条件的某些行中进行搜索。

例如，如果我有这个文件：

```
TX VIDEO ID 34 B 33 SIZE 672 SRC -1 DST 11 T 0.1 1
TX CBR ID 35 B 35 SIZE 10 SRC -1 DST 11 T 0.1 1
RX VOIP ID 0 B 0 SIZE 32 SRC -1 DST 3 D 0.001 0
RX VOIP ID 8 B 8 SIZE 32 SRC -1 DST 5 D 0.001 1
RX VOIP ID 20 B 20 SIZE 32 SRC -1 DST 8 D 0.001 1
RX VIDEO ID 9 B 9 SIZE 1490 SRC -1 DST 5 D 0.002 1
RX VIDEO ID 21 B 21 SIZE 1490 SRC -1 DST 8 D 0.002 1
TX INF_BUF ID 37 B 10 SIZE 776 SRC 1 DST 5 T 0.102 1
TX INF_BUF ID 39 B 22 SIZE 776 SRC 2 DST 8 T 0.102 1 
```

在这个文件中，我有每一行`"RX VIDEO"`和`"TX VIDEO"`行。我要从中获取数据的第一个条件`"RX VIDEO"`是`"DST 3 && DST 5"`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:33:32.610

对于多个条件，您可以将 grep 输出通过管道传输到另一个 grep。

如果要在文件中搜索带有 AAA 和 BBB 的行，可以执行以下操作：

```
grep 'AAA' file | grep 'BBB' 
```

或者你可以用正则表达式搜索它，只用一个 grep：

```
grep -e 'AAA.*BBB' -e 'BBB.*AAA' file 
```

`-e`如果匹配任何选项后的表达式，您将得到一个结果。这意味着它的行为类似于*or*。

这两个示例都会找到类似这样的行：

```
AAABBB
AAA BBB
BBB AAA
BBBAAA
AAA-BBB
AAA---BBB
AAAA BBB
xAAAAAAA BBB AAAAA 
```

等等。

**对于您的示例，它可能是：**

```
grep 'RX VIDEO' file | grep -e 'DST 3' -e 'DST 5' 
```

这将与或`RX VIDEO`一起搜索。`DST 3``DST 5`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:31:31.443

我假设你想要的行`RX VIDEO`也包含`DST 3`或`DST 5`

```
$ grep 'RX VIDEO.*DST [35]' a.txt
RX VIDEO ID 9 B 9 SIZE 1490 SRC -1 DST 5 D 0.002 1 
```

[**参考**](http://thegeekstuff.com/2011/10/grep-or-and-not-operators)

# python - 如何覆盖 Python 的站点包文件夹中的某些库版本

> ID：14593825
> 
> 赞同：0
> 
> 时间：2013-01-29T23:13:41.117
> 
> 标签：python

假设我在 Python 的 site-packages 文件夹中安装了一个名为 libfoo 的库。因此 libfoo 已成为系统范围的库。现在我有一个 python 脚本需要使用较新版本的 libfoo 但不想在系统范围内安装它以防万一其他脚本使用旧版本，有没有办法告诉脚本“请使用 libfoo 版本在另一个位置而不是系统范围的位置”？

请不要告诉我“你应该使用 virtulenv”。我知道虚拟环境。我问这个问题只是为了了解 python 路径的优先级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:19:16.300

路径的优先级列在[sys.path](http://docs.python.org/2/library/sys.html#sys.path)中，您可以更改它。

```
import sys
sys.path.insert(0,'/custom/priority/path') 
```

# c# - 如何拦截 Windows 中物理电源按钮的按下？

> ID：14593834
> 
> 赞同：6
> 
> 时间：2013-01-29T23:14:22.073
> 
> 标签：c#, .net, windows, power-management

有没有办法拦截按下物理电源按钮的事件以对此事件作出反应？IE：

```
Push button -> My program catches the event -> My program performs action. 
```

我的目标是编写一个 C# 程序/服务来监听电源按钮事件，然后打开“问我该怎么做”关机对话框（就像在 Windows XP 时代那样）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:35:53.553

您可以使用 [SystemEvents.SessionEnding 事件](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.sessionending.aspx)

但是我不确定如果按下电源按钮这是否会起作用，当用户尝试注销或关闭系统时会发生此事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T19:41:09.610

我可以从理论上向您解释：该按钮（在大多数系统上与关机相关的按钮）在“电源选项”下有一个选项，您可以在其中指定按下电源按钮时要执行的操作...

正是您正在寻找的 ACTION 事件被窗口绑定到按钮，然后实例化关闭事件。有一些程序可以剖析和监视 Windows 变量和调用，您必须使用其中一个来弄清楚并拦截/覆盖它。

# java - 部署到 JAR 时，Camel Jetty 会话停止工作

> ID：14593839
> 
> 赞同：1
> 
> 时间：2013-01-29T23:14:30.560
> 
> 标签：java, session, jetty, apache-camel

如果我将它部署在 JAR 之外，我有一个可以完美运行的项目。但是，当它部署为 JAR 时，它无法获取会话。以下是文物：

主.java：

```
public class Main {
    public static void main(String[] args) throws Exception{
        JndiContext registry=new JndiContext();

        CamelContext context=new DefaultCamelContext(registry);
        context.addRoutes(new RouteBuilder() {      
            @Override
            public void configure() {
                try{
                    from("jetty:http://0.0.0.0:7700?matchOnUriPrefix=true&sessionSupport=true").bean(HtmlProcessor.class);
                }
                catch(Exception e){
                    e.printStackTrace();
                }
            }
        });

        context.start();
        Thread.sleep(1000000);
        context.stop();

    }
} 
```

HtmlProcessor.java：

```
public class HtmlProcessor {
    public String login(Exchange exchange){
        HttpSession session=exchange.getIn(HttpServletRequest.class).getSession();
        Integer count=(Integer)session.getAttribute("count");
        if (count==null) count=0;
        count++;
        session.setAttribute("count", count);

        StringBuilder sb=new StringBuilder();
        sb.append("<html><body><form>");
        sb.append(count);
        sb.append("<BR><input type=text name=username></form></body></html>");
        return sb.toString();
    }
} 
```

pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>user1</groupId>
  <artifactId>jettysession</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <properties>
        <camel.version>2.10.3</camel.version>
  </properties>
  <dependencies>

        <dependency>
            <groupId>org.apache.camel</groupId>
            <artifactId>camel-core</artifactId>
            <version>${camel.version}</version>
        </dependency>

        <dependency>
            <groupId>org.apache.camel</groupId>
            <artifactId>camel-jetty</artifactId>
            <version>${camel.version}</version>
        </dependency>

        <dependency>
            <groupId>com.sun.jersey</groupId>
            <artifactId>jersey-servlet</artifactId>
            <version>1.13</version>
        </dependency>

  </dependencies>
    <build>
        <plugins>
            <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <executions>
                    <execution>
                        <id>assemble</id>
                        <phase>package</phase>
                        <goals>
                            <goal>assembly</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <archive>
                        <manifestEntries>
                            <Bundle-ClassPath>.</Bundle-ClassPath>
                            <Main-Class>user1.Main</Main-Class>
                        </manifestEntries>
                    </archive>
                    <descriptorRefs>
                        <descriptorRef>jar-with-dependencies</descriptorRef>
                    </descriptorRefs>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

这是异常的有意义的部分：

```
java.lang.NullPointerException
    在 user1.HtmlProcessor.login(HtmlProcessor.java:10)
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke（未知来源）
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke（未知来源）
    在 java.lang.reflect.Method.invoke（未知来源）
    在 org.apache.camel.component.bean.MethodInfo.invoke(MethodInfo.java:341)
...

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:28:24.107

在 META-INF/services/org/apache/camel/ 中有一个名为 TypeConverter 的文件，您需要将其与所有 JAR 中的数据合并。当您执行此 uber JAR 时，我很确定 TypeConverter 文件可能只是最后一个文件，因此您会丢失数据。

请参阅 Camel 的此常见问题解答：http: [//camel.apache.org/how-do-i-use-a-big-uber-jar.html](http://camel.apache.org/how-do-i-use-a-big-uber-jar.html)

# java - 无法使用随机生成的数字对数组进行排序

> ID：14593842
> 
> 赞同：0
> 
> 时间：2013-01-29T23:14:51.643
> 
> 标签：java, arrays, sorting, random, numbers

在数组中生成随机数后，我无法让数组排序。我认为在分配所有数字之前对数组进行排序。我也尝试在主循环内嵌套另一个 for 循环，但我要么得到相同的结果，要么得到一个无限循环的随机数。

```
public static void main(String[] args) {
    int[] anArray;
    anArray = new int[10000];
    Random generator= new Random();

    for(int i=0; i<10000; i++){
       anArray [i]= (generator.nextInt(98)+1);
       java.util.Arrays.sort(anArray);
       System.out.println(anArray[i];
    }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T23:16:02.410

您需要`java.util.Arrays.sort(anArray);`跳出循环，否则您将在每一步进行排序，而第 i 个元素将不是您刚刚添加的元素：

```
for(int i=0; i<10000; i++){
   anArray [i]= (generator.nextInt(98)+1);
}
java.util.Arrays.sort(anArray);
System.out.println(Arrays.toString(anArray)); 
```

# c# - 搜索引擎通过下拉列表选择和文本框条目搜索数据库中的条目并以 aspx 显示

> ID：14593843
> 
> 赞同：0
> 
> 时间：2013-01-29T23:14:52.977
> 
> 标签：c#, asp.net

我正在尝试从 ProductDB（数据库）创建搜索，我希望用户搜索的主要列是 Material_No 和 Product_Line。

到目前为止，我有以下内容：

**下拉列表**：

```
<asp:DropDownList ID="DropDownList" runat="server" Height="16px" 
        onclick="SearchButton_Click" Width="144px" 
        AutoPostBack="True">
        <asp:ListItem>Please select...</asp:ListItem>
        <asp:ListItem Value="0">Material No</asp:ListItem>
        <asp:ListItem Value="1">Product Line</asp:ListItem>
    </asp:DropDownList> 
```

**文本框**：

```
<asp:TextBox ID="TextBox1" runat="server" ontextchanged="TextBox1_TextChanged">
</asp:TextBox> 
```

**搜索按钮**：

```
<asp:Button ID="SearchButton" runat="server" Text="Search" 
onclick="SearchButton_Click" /> 
```

所以我想做的是当用户在单击搜索按钮后键入材料编号或产品线时选择材料编号或产品线时，结果应该以网格格式或类似的形式显示，如果他只是单击搜索没有选择所有结果应该显示的任何内容。

这是我到目前为止所做的。

**旧代码**：

```
protected void SearchButton_Click(object sender, EventArgs e)
    {
        string  Selectedvalue = DropDownList.SelectedItem.Value;
        if (DropDownList.SelectedItem.ToString() == "Material No")
        {
            MessageBox.Show("Material No selected");
            string textbox = TextBox1.Text;
            MessageBox.Show(textbox.ToString());

            SqlConnection conn = new SqlConnection("Data Source=localhost;Initial Catalog=ROG;Integrated Security=True");

            DataSet dsData = new DataSet();

            SqlCommand cmd = new SqlCommand();

            cmd.CommandText = "SELECT * FROM ProductDB WHERE Material_No ='" + TextBox1.Text + "'";
            cmd.Connection = conn;

            conn.Open();

            SqlDataAdapter da = new SqlDataAdapter("", conn);

            SqlCommandBuilder cmdBldr = new SqlCommandBuilder(da);
            da.Fill(dsData, TextBox1.Text);

            MessageBox.Show("Connection Successful");
            conn.Close(); 
        }
        else
        {
            MessageBox.Show("Product Line selected");
        }

    } 
```

**新代码**：

```
private SqlConnection conn;
private SqlDataAdapter daMaterial;
private SqlDataAdapter daProduct;

private SqlCommand cmdMaterial;
private SqlCommand cmdProduct;

private SqlParameter paramMaterial;
private SqlParameter paramProduct;

private DataSet dsMaterial;
private DataSet dsProduct;
private DataGrid dgMaterial;
private DataGrid dgProduct;

private const string tableNameMaterial = "Material_No";
private const string tableNameProduct = "Product_Line";
enter code here
protected void SearchButton_Click(object sender, EventArgs e)
    {
        string Selectedvalue = DropDownList.SelectedItem.Value;
        if (DropDownList.SelectedItem.ToString() == "Material No")
        {
            //MessageBox.Show("Material No. Selected");
            string textbox = TextBox1.Text;
            //MessageBox.Show(textbox.ToString());

            conn = new SqlConnection("Data Source=localhost;Initial Catalog=ROG;Integrated Security=True");
            dsMaterial = new DataSet(); 
            daMaterial = new SqlDataAdapter("SELECT * FROM ProductDB WHERE Material_No = @Material_No", conn);
            daMaterial.SelectCommand.CommandText = "SELECT * FROM ProductDB WHERE Material_No = @Material_No";
            paramMaterial = new SqlParameter();
            paramMaterial.ParameterName = "@Material_No";
            paramMaterial.Value = TextBox1.Text;

            daMaterial.SelectCommand = cmdMaterial;
            cmdMaterial.Parameters.Add("@Material_No", SqlDbType.BigInt).Value = TextBox1.Text;

            daMaterial.Fill(dsMaterial, tableNameMaterial);              

            //MessageBox.Show("Connection Successful");
            conn.Close();
        }
        else
        {
            //MessageBox.Show("Product Line selected");
            string textbox = TextBox1.Text;
            //MessageBox.Show(textbox.ToString());

            conn = new SqlConnection("Data Source=localhost;Initial Catalog=ROG;Integrated Security=True");
            dsProduct = new DataSet();
            daProduct = new SqlDataAdapter("SELECT * FROM ProductDB WHERE Product_Line = @Product_Line", conn);
            daProduct.SelectCommand.CommandText = "SELECT * FROM ProductDB WHERE Product_Line = @Product_Line";
            paramProduct = new SqlParameter();
            paramProduct.ParameterName = "@Product_Line";
            paramProduct.Value = TextBox1.Text;

            daProduct.SelectCommand = cmdProduct;
            cmdProduct.Parameters.Add("@Product_Line", SqlDbType.VarChar, 50).Value = TextBox1.Text;
            conn.Open();
            daProduct.Fill(dsProduct, tableNameProduct);

            //MessageBox.Show("Connection Successful");
            conn.Close();
        }

    } 
```

我收到错误消息“对象引用未设置为对象的实例。”

有人可以检查`Parameter`使用是否正确`SqlDataAdapter`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-01T06:41:10.283

```
 protected void btnSearch_Click(object sender, EventArgs e)
    {
        string Query = string.Empty;
        try
        {
            if (sqlCon.State == ConnectionState.Closed)
            {
                sqlCon.Open();
            }
            if (DropDownList1.SelectedValue.ToString() == "Name")
            {
                Query = "select * from tbl_Employee where Name Like '" + txtSearchName.Text +  "%'";
            }
            else if (DropDownList1.SelectedValue.ToString() == "Designation")
            {
                Query = "select * from tbl_Employee where Designation Like '" + txtSearchName.Text + "%'";
            }
            SqlDataAdapter sqlDa = new SqlDataAdapter(Query, sqlCon);
            DataSet Ds = new DataSet();
            sqlDa.Fill(Ds);
            dgvEmployee.DataSource = Ds;
            dgvEmployee.DataBind();
        }
        catch (Exception ex)
        {

            HttpContext.Current.Response.Write("<script>alert('wfrmGrid: 11')</script>" + ex.Message);
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:32:40.190

一些事情：

```
daProduct = new SqlDataAdapter("SELECT * FROM ProductDB WHERE Product_Line = @Product_Line", conn); 
```

创建一个新的并使用 and对其进行`SqlDataAdapter`初始化，因此以下几行是多余的并且本质上容易出错：`SelectCommand``CommandText``Connection`

1.  `daProduct.SelectCommand.CommandText = "SELECT * FROM ProductDB WHERE Product_Line = @Product_Line";`
2.  `daProduct.SelectCommand = cmdProduct;`

第二条指令甚至用新的`CommandText` 并且`Connection`从未使用过的方式覆盖了第一条指令。

```
paramProduct = new SqlParameter(); 
```

而不是使用这个无参数的构造函数，我会使用[`AddWithValue`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)或者[`Parameters.Add`](http://msdn.microsoft.com/en-us/library/40959t6x.aspx)不太容易出错（例如，你没有提供类型）。

```
cmdProduct.Parameters.Add( .... 
```

现在您正在使用我建议的方法，但从未使用过`paramProduct`. 您也永远不会处理非托管资源（例如，在出现错误时连接保持打开状态），因此请使用`using`-statement。顺便说一句，如果你使用 a`DataAdapter`你甚至不需要打开/关闭连接，那是在`DataAdapter.Fill`.

对不起，但你的代码是一团糟。我不会摆弄你的，而是提供一个应该可以工作的干净版本。

```
....
else
{
    using(var con =  new SqlConnection("Data Source=localhost;Initial Catalog=ROG;Integrated Security=True"))
    using (var daProduct = new SqlDataAdapter("SELECT * FROM ProductDB WHERE Product_Line = @Product_Line", con))
    {
        daProduct.SelectCommand.Parameters.Add("@Product_Line", SqlDbType.VarChar, 50).Value = TextBox1.Text;
        dsProduct = new DataSet();
        daProduct.Fill(dsProduct, "Product_Line");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T11:44:07.797

以下代码正在工作：

```
private const string tableNameMaterial = "Material_No";
private const string tableNameProduct = "Product_Line";

protected void SearchButton_Click(object sender, EventArgs e)
    {
        string Selectedvalue = DropDownList.SelectedItem.Value;
        if (DropDownList.SelectedItem.ToString() == "Material No")
        {
            //MessageBox.Show("Material No. Selected");
            string textbox = TextBox1.Text;
            //MessageBox.Show(textbox.ToString());

            SqlConnection conn = new SqlConnection("Data Source=localhost;Initial Catalog=ROG;Integrated Security=True");
            SqlCommand cmd = new SqlCommand();
            cmd.Connection = conn;

            cmd.CommandText = "SELECT * FROM ProductDB WHERE Material_No = @Material_No";
            cmd.CommandType = CommandType.Text;

            cmd.Parameters.Add("@Material_No", SqlDbType.BigInt);
            cmd.Parameters["@Material_No"].Value = TextBox1.Text;

            SqlDataAdapter daMaterial = new SqlDataAdapter();
            daMaterial.SelectCommand = cmd;

            DataSet dsMaterial = new DataSet();
            conn.Open();
            daMaterial.Fill(dsMaterial, tableNameMaterial);

            //MessageBox.Show("Connection Successful");
            GridView1.DataSource = dsMaterial;
            GridView1.DataBind();

            conn.Close();
        }
        else
        {
            //MessageBox.Show("Product Line selected");
            string textbox = TextBox1.Text;
            //MessageBox.Show(textbox.ToString());

            SqlConnection conn = new SqlConnection("Data Source=localhost;Initial Catalog=ROG;Integrated Security=True");
            SqlCommand cmd = new SqlCommand();
            cmd.Connection = conn;

            cmd.CommandText = "SELECT * FROM ProductDB WHERE Product_Line = @Product_Line";
            cmd.CommandType = CommandType.Text;

            cmd.Parameters.Add("@Product_Line", SqlDbType.VarChar);
            cmd.Parameters["@Product_Line"].Value = TextBox1.Text;

            SqlDataAdapter daProduct = new SqlDataAdapter();
            daProduct.SelectCommand = cmd;

            DataSet dsProduct = new DataSet();
            conn.Open();
            daProduct.Fill(dsProduct, tableNameProduct);

            //MessageBox.Show("Connection Successful");
            GridView1.DataSource = dsProduct;
            GridView1.DataBind();

            conn.Close();
        }

    } 
```

现在，我需要搜索框来自动完成数据库中的字母......如果有人有任何建议，请分享。

谢谢

# iis-8 - 不同驱动器上的 Server 2012 IIS 站点

> ID：14593844
> 
> 赞同：4
> 
> 时间：2013-01-29T23:14:57.343
> 
> 标签：iis-8, windows-server-2012

我正在尝试在全新的 Server 2012 上启动并运行 IIS 8 以运行 .net 4.5 应用程序，但我无法让它跨驱动器工作

```
Error: 500.19
Module
   IIS Web Core 
Notification
   Unknown 
Handler
   Not yet determined 
Error Code
   0x80070005 
Config Error
   Cannot read configuration file due to insufficient permissions  
Config File
   \\?\D:\callsheet-test\web.config 
```

当前站点只是一个文件 index.html。

如果我将文件夹复制到 c: 上的任何位置，例如 c:\callsheet-test\ 或 c:\inetpub\callsheet-test，一旦我在 IIS 8 中更改目标位置（站点 > 基本设置），它就会完美运行。

是否存在 web.config 文件并不重要，因为复杂的 mvc/webforms 应用程序会给出相同的错误。

我曾尝试使用权限复制文件，甚至认为权限似乎与所有用户匹配。我仍然收到此错误。

我已经删除了分区并将其重新创建为挂载点 c:\mount 并且发生了同样的问题。将文件复制到 c:\notamount 并且它们工作正常。

此服务器在 VMware 服务器上运行。Windows 2012 x64 标准。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T02:54:09.233

根据对问题的进一步调查（通过我上面评论中的链接），我通过[此处找到了](http://social.technet.microsoft.com/Forums/en-US/w8itprovirt/thread/20da7ff7-05a7-4085-8e67-258f11755f3d/)**解决方法**：将“审核可移动存储”的组策略值从“未配置”更改为“无审核”并重新启动。我知道很奇怪。此设置位于 Windows 设置/安全设置/高级审核策略配置/系统审核策略/对象访问。

即使我们使用的是 VMWare 而不是 Hyper-V，这种解决方法仍然对我有用。希望微软能给出答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:27:16.100

我也有同样的错误，解决方案也很相似。我在 Windows Server 2012 上安装了 Sql Server 2012，此时我注意到从系统 C: 驱动器运行的 IIS 工作进程无法访问 E: 驱动器上的配置文件。尽管通过 IIS_IUSRS、IUSR、用户和/甚至特定的 AppPool 本身授予了所有必要的 NTFS 权限，但该站点只能在 C: 驱动器上加载。当 IIS 无法访问 E: 驱动器时，即使使用 ApplicationPoolIdentity 帐户以外的管理员帐户运行 AppPool (.NET 4.5)，这一点变得很明显（在此上下文中为 IIS APPPOOL.NET v4.5 - 在 procexp.exe 中验证） . 安装 Sql Server 2012 在安装过程中引发错误，并且需要在其他设置中启用对象访问审核。

解决方案：

1.  运行-> secpol.msc
2.  安全设置 -> 本地策略 -> 审核策略
3.  将“审核对象访问”策略更改为“无审核”

希望这个背景有助于缓解某人的头痛。:-)

# google-analytics - 集成 Google Analytics 和 Mysql Workbench

> ID：14593847
> 
> 赞同：-1
> 
> 时间：2013-01-29T23:15:07.127
> 
> 标签：google-analytics, mysql-workbench

如何集成谷歌分析数据库和 mysql 工作台？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:56:18.533

Google Analytics 不使用 MySql（或任何其他无法扩展的关系数据库），因此您不能使用专为 MySql 设计的工具。

您可以以一种非常迂回的方式，使用 Google App Script 从 GA 中提取数据，将其插入您自己的 MySql 数据库（前提是该数据库可远程访问），并在填充后将 MySql 工作台连接到您的数据库来自您的 GA 帐户的数据。

但是这样做没有什么意义——您必须提出自己的数据库结构（将您的 GA 数据映射到某个关系数据库结构），并且它绝不适合复制 GA 的功能。您可以使用这种设置进行的任何类型的报告，您都可以使用 Google 已经提供的工具更轻松地完成。

# apache - JkMount VS ProxyPassReverse

> ID：14593867
> 
> 赞同：0
> 
> 时间：2013-01-29T23:16:20.920
> 
> 标签：apache, tomcat

我一直在尝试配置我的 Java 应用程序，以便我可以使用 jQuery.post() 向它发送帖子数据。在我的 httpd.conf 中，我尝试使用 ProxyPassReverse 进行设置，如下所示：

```
ProxyPass        /path/ http://mySite:8080/path/
ProxyPassReverse /path/ http://mySite:8080/path/ 
```

这样做有效，但一次只能处理 1 个请求。因此，如果我在第一个请求返回之前发送另一个请求，我会得到一个 404 状态代码并且根本没有输出。

然后我的 Java 开发人员尝试使用 JkMount：

```
JkMount /path* ajp13 
```

但这只是发回tomcat 404页面。

导航到`http://mySite:8080/path/`工作正常，因此实际的 java 应用程序没有问题。

谁能告诉我这里发生了什么，或者我在哪里可以找到可能向我展示有价值的日志？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:06:57.350

我上周刚碰到这个。为了解决它，我不得不安装路径两次。

```
JkMount /path/ ajp13
JkMount /path/* ajp13 
```

# c++ - 为什么 Netbeans 无法识别我的 C++ 应用程序中的 forward_list？

> ID：14593871
> 
> 赞同：1
> 
> 时间：2013-01-29T23:16:38.623
> 
> 标签：c++, netbeans

`forward_list`Netbeans用红线标记我的 C++ 应用程序中的任何实例（错误为`Unable to resolve identifier forward_list`）。Netbeans 也不识别`forward_list`实例具有的任何方法。

但是，我的程序编译得很好。此外，自动完成`#include <forward_list>`作品。

除了预处理器包括之外，我如何告诉 Netbeans 在检查语法和自动完成时识别 C++ 标准库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T02:31:09.060

大部分是从另一个帖子中偷来的，但是将标准更改为`C++11`应该可以解决此问题：

项目 -> 属性 -> 代码辅助 -> C++ 标准 -> C++11。

# iphone - AlertView 正在运行，但没有显示 didReceiveRemoteNotification

> ID：14593874
> 
> 赞同：2
> 
> 时间：2013-01-29T23:16:46.653
> 
> 标签：iphone, ios, objective-c, push-notification

使用我确保`[alertView show];`正在调用的调试器，但对话框不可见，我还需要做什么才能显示它？

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{
    if( [[userInfo objectForKey:@"aps"] objectForKey:@"alert"] != NULL)
    {
        NSString *msg = [[userInfo objectForKey:@"aps"] objectForKey:@"alert"];
        if(msg != nil) {
            UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Usage Alert"
            message:msg  delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil];
            [alertView show];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:00:40.243

在您的视图控制器 .h 文件中，您需要`<UIAlertViewDelegate>`在打开的花括号之前声明 Like this，用大于和小于符号封装：

```
#import <UIKit/UIKit.h>

@interface YourViewControllersName : UIViewController <UIAlertViewDelegate> {

   // your variable declarations are here...
}

 // your method declarations are here... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T01:56:34.993

对不起大家，这原来是我的编译器/xCode 没有真正识别我输入的代码或类似的东西的问题，环境被破坏了。

# linux - 在 Linux 上运行 X-CTU

> ID：14593875
> 
> 赞同：2
> 
> 时间：2013-01-29T23:16:47.523
> 
> 标签：linux, xbee

我正在尝试在 wine 下在 linux 上运行 X-CTU，以便我可以将固件应用到我的 Xbee 收音机。该程序在 wine 下安装并运行良好，但是当我进入调制解调器配置选项卡时，它会出错，说它无法读取我的调制解调器配置。有没有人有这方面的运气？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T23:26:42.323

我能够让它工作。您必须从 Digi 站点 ( [ftp://ftp1.digi.com/support/firmware/](ftp://ftp1.digi.com/support/firmware/) ) 下载所有固件更新。您需要的文件是：

```
82001817_a.zip
82001817_B.zip
82001817_C.zip
82001817_D.zip
82001817_E.zip
82001817_F.zip
82001817_G.zip 
```

将以上文件下载到：

```
~/.wine/drive_c/Program Files (x86)/Digi/XCTU/update 
```

然后打开 X-CTU 并转到调制解调器配置选项卡。单击下载新版本按钮，然后从文件中选择。选择您下载的每个文件。加载完所有内容后，单击读取配置按钮，这一次它应该可以工作。

# asp.net - 使用 Visual Studio 2012 部署 ASP.NET 网站 (.NET 2)

> ID：14593878
> 
> 赞同：0
> 
> 时间：2013-01-29T23:16:54.287
> 
> 标签：asp.net, deployment, visual-studio-2012, web-site-project

我有一个需要使用 Visual Studio 2012 部署的 ASP.NET 2 网站。我需要一个已编译的单个程序集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:09:54.173

发布功能的最新版本（在[此处](http://blogs.msdn.com/b/webdev/archive/2012/11/20/new-web-publish-updates.aspx)进行了描述，可与 Azure 1.8 SDK 一起使用）现在支持网站项目和 Web 应用程序项目的预编译。这是[Web Deployment Projects 的替代品](http://blogs.msdn.com/b/webdev/archive/2012/08/06/plans-regarding-website-projects-and-web-deployment-projects.aspx)，以前可用于 VS2005/2008/2010。它还同样支持两种类型的项目（例如 web.config 转换、数据库部署等）的所有发布场景。

# c# - 调用 WebBrowser.Refresh 后，我应该等待多长时间才能做某事？

> ID：14593879
> 
> 赞同：0
> 
> 时间：2013-01-29T23:16:55.783
> 
> 标签：c#, .net-4.0, webbrowser-control

我有一个网页，我正在撕下一些元素，以便在我正在编写的程序中使用。将特定元素加载到网页中需要一些时间，所以我想我会使用`WebBrowser.Refresh()`它来完成获取最新代码。不幸的是，如果你想在之后做任何事情，这样做会引起很多头痛，因为它不会触发`DocumentCompleted`事件（在有人问之前，它甚至在 MSDN 上明确表示）。

所以我需要一种方法来允许程序在刷新页面后 2 秒内什么都不做。问题是我不知道如何做到这一点并且能够获得更新的`WebBrowser.Document`. 如果我使用 Thread.Sleep，整个应用程序会在它休眠时挂起，并且没有任何更新。

如果我立即尝试，我总是会遇到 WebBrowser 对象永远挂起或抛出 Null Cast 异常的糟糕问题。

有没有其他人遇到过这种问题（或类似问题）并找到了解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:28:29.833

为什么不再次导航到 URL？

```
 webBrowser1.Navigate(webBrowser1.Url); 
```

这将触发您需要的事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:28:01.193

在所需时间刷新时我遇到了类似[的问题。](https://stackoverflow.com/questions/235700/)`WebBrowser`正如您所发现的，试图让它按需刷新是没有希望的；HTTP 响应和 HTML 呈现都是不确定的。

我的建议是附加到[DocumentCompleted](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documentcompleted.aspx)的事件，`WebBrowser`在后台尽早调用所需的网页并向用户显示一些东西来分散他们的注意力，然后`WebBrowser`在`DocumentCompleted`触发后显示完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T15:56:36.207

如果你想偷懒不使用后台线程：

```
wb.Refresh();
while ((wb.ReadyState != WebBrowserReadyState.Complete)) {
    Application.DoEvents();
}
//Refresh is now complete 
```

`ReadyState`应该只在`WebBrowserReadyState.Complete`所有 Ajax 和内容完成加载后进行。

# android - 关闭设备屏幕（不锁定）？

> ID：14593880
> 
> 赞同：1
> 
> 时间：2013-01-29T23:16:57.103
> 
> 标签：android, screen, proximity

我正在制作一个在通话过程中使用接近传感器的应用程序。我的主要问题是当我把它靠在脸上时（在打电话时），设备并没有关闭屏幕。如果有人对如何解决此问题有解决方案，那么我的问题将得到解决。

不过现在，我正在尝试手动关闭屏幕以模仿手机应用程序的正常行为。我浏览了很多关于此的其他帖子，但其中大多数似乎都有关于如何保持屏幕打开的说明。我的情况正好相反......我如何以编程方式将设备设置为关闭屏幕？我不希望它自行锁定或休眠（因为电话仍在进行中），只需完全关闭屏幕即可。

谢谢！

# c - 主线程和其他线程有什么区别？

> ID：14593881
> 
> 赞同：5
> 
> 时间：2013-01-29T23:17:15.280
> 
> 标签：c, multithreading, opengl, glfw

在[GLFW FAQ](http://www.glfw.org/faq.html)的第 2.9 项中指出：

> [...]**强烈建议所有 OpenGL 和 GLFW 调用** （线程管理和同步调用除外）**都从主线程进行**，这应该不是什么大问题，因为只支持单个窗口。这种方法也与 GLFW 的未来方向兼容。

重点是我的。

那么，主线程和其他线程有什么区别呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-06-09T10:54:38.577

该问题涉及旧的 GLFW API 和常见问题解答，请参阅[更新的 GLFW 常见问题解答](http://www.glfw.org/faq.html)和[GLFW 线程安全文档](http://www.glfw.org/docs/latest/intro.html#thread_safety)。

一些限制仍然存在，许多 GLFW 调用必须从主线程进行。主线程和其他线程之间的区别取决于平台特定的窗口创建行为、GLFW 处理的事件等。有关详细信息，请[参阅官方 GLFW 论坛上的此帖子](http://discourse.glfw.org/t/multithreading-glfw/573/5)。

一旦创建了 OpenGL 窗口，就可以使上下文在另一个线程上处于当前状态，并且可以从该线程进行 OpenGL 调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T00:32:29.180

The statement

> "Is … thread safe? No. However, neither is OpenGL."

is wrong. OpenGL is of course thread safe.

Here's the deal: For each thread either one or no OpenGL context can be bound to a drawable (made current). OpenGL calls operate on the context that is active in the thread the calls are made from. It is perfectly possible to transfer a OpenGL context between threads. For this the context to be transfered first must be unbound, then it can be rebound in another thread.

Each OpenGL context manages its own set of state variable and objects (textures, buffers). However context can be "entangled", i.e. share their object space. State is still individual though.

A single drawable (window, PBuffer) can have multiple contexts from different threads being bound to. If contexts from different threads draw to the same drawable a race condition occours and the results are undefined. However in the case of depth tested drawing the outcome should be reasonable. However simultanous drawing to a single drawable will strongly impair performance, so it better is avoided.

The main use for multiple OpenGL contexts in multiple threads is to share their objects so that one thread can load and update data for the other context. It makes sense to bind the helper contexts to off-screen or hidden drawables to prevent race conditions to happen.

There's no technical difference between the threads. From a programming point of view each thread will have a slightly different semantic, which is imposed by the programm running, not by the system architecture. In the case of most OpenGL applications the conventional semantics are, that the main thread will create the window, draw all elements visible to the user (including OpenGL operations) and collect user input. The threads launched from the main thread are worker threads without direct user interaction. However this task distribution is purely by choice and because it turned out to work well. But it's perfectly possible, and sometimes advisable, to use a different scheme. And like already said, there is no technical difference about the threads within a program. All threads are equal rights citizens within a process.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T15:29:36.743

该文档的措辞可能有点误导。更好的措辞是：

> 强烈建议所有 OpenGL 和 GLFW 调用（线程管理和同步调用除外）都**从单个线程进行，最好是调用`glfwInit`and`glfwOpenWindow`**的同一个线程，这应该不是大问题，因为只支持单个窗口。这种方法也与 GLFW 的未来方向兼容。

这样做的原因是 OpenGL 对其上下文具有“当前线程”的概念，这是一个可以在给定时间合法修改或使用该上下文的线程。上下文最初属于创建它的线程。`wglMakeCurrent`您可以通过调用or使其在其他线程中成为“当前” `glxMakeCurrent`，这与 GLFW 不同的是不可移植（但 GLFW 可能有一个包装器，我不确定）。

当然，很可能有几个独立的上下文，并且可以通过在每个线程中使用相同的上下文在使用它之前从多个线程访问相同的上下文。最后，可以在共享状态的多个线程中拥有多个上下文。
但是，这些选项都不是常规情况，因为它要么涉及不可忽略的同步开销，要么不适合 OpenGL 的常见用法。通常，除了“一个线程，一个上下文”之外的任何其他事情，除了极少数例外，都不会提供任何优势，但会带来不必要的复杂性。

因此，*常规情况*是只有一个上下文由一个线程使用，并且可以选择一些有助于将数据混洗到映射缓冲区的工作线程。

至于“主线程”与“任何线程”，没有区别。大多数时候，主线程只是*偶然*地初始化 GLFW（以及因此 OpenGL）的线程。

# java - try-catch-finally 中的错误

> ID：14593882
> 
> 赞同：1
> 
> 时间：2013-01-29T23:17:18.407
> 
> 标签：java, try-catch, finally

我遇到了问题，最终完成了一次尝试捕获，我完成了一切，直到捕获。我的代码错误都说““catch”上的语法错误，符合预期”，我已经完成了谷歌搜索，但没有找到有效的东西。我附上了我的代码，这只是一个放置错误，还是我没有抛出正确类型的错误？提前致谢。

```
 public void setOrder(String field, String value) {
    File dir = new File(finished);
    if (!dir.exists())
    {
        try{
            doc = PDDocument.load(file);
            PDDocumentCatalog docCatalog = doc.getDocumentCatalog();
            PDAcroForm acroForm = docCatalog.getAcroForm();
            PDField acrofield = acroForm.getField( field );
            if(value == null){
                acrofield.setValue("");
            }
            else{
                acrofield.setValue(value);
            }
            doc.save(finished);
        }
        finally{
            if( doc != null ){
                doc.close();
            }
        }
        catch(Exception eer){
            eer.printStackTrace();
        }
    }
    else{
        try{
            doc = PDDocument.load(finished);
            PDDocumentCatalog docCatalog = doc.getDocumentCatalog();
            PDAcroForm acroForm = docCatalog.getAcroForm();
            PDField acrofield = acroForm.getField( field );
            if(value == null){
                acrofield.setValue("");
            }
            else{
                acrofield.setValue(value);
            }
            doc.save(finished);
        }
        finally{
            if( doc != null ){
                doc.close();
            }
        }
        catch(Exception eer){
            eer.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T23:20:12.257

捕获出现在 finally 块之前

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T23:20:00.120

您的`catch`块需要在块*之前*`finally`。

# c++ - C++ 中的非成员 += 重载

> ID：14593884
> 
> 赞同：1
> 
> 时间：2013-01-29T23:17:41.190
> 
> 标签：c++, overloading, operator-keyword

```
#include <iostream>

class A
{
public:
  int a;
  A() { a = 2;}
  A(int f) { a= f;}
  void print() { std::cout << a << std::endl; }
};

class B
{
  A a, at, at2;
  A& operator += (A& b)
  {
    a.a = a.a + b.a;
    return a;
  }
public:
  B(int a_, int at_, int at2_) : a(a_), at(at_), at2(at2_) {};
  void update ()
  {
    a += at;
  }
  void printAll() { a.print(); at.print();}
};

int main()
{
  B value ( 2, 3, 5);
  value.printAll();
  value.update();
  value.printAll();
} 
```

错误是：

> temp.cpp:24:10: 错误: '((B*)this)->B::a += ((B*)this)->B::at' 中的 'operator+=' 不匹配

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T23:27:38.637

您定义的运算符是`A & operator+=(B &, A & )`，不是`A & operator+=(A &, A &)`。因此，您已经定义了如何将 an 添加`A`到 a `B`，但没有定义如何将 an 添加`A`到 an `A`。在定义之后`class A`但在定义之前尝试这个`class B`：

```
A & operator+=(A & a1, const A & a2) { a1.a += a2.a; return a1; } 
```

但是这种运算符更自然地定义为成员函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:27:31.483

```
A& B::operator += (A& b) 
```

方法

```
A & operator+=(B &, A & ) 
```

您只需要添加`operator +=(const A&b)` 到 A 类

```
class A
{
//....
    A& operator += (const A& b)
    {
       a += b.a;
       return *this;
    }
//....
}; 
```

非会员版本是：

```
A & operator+=(A a1, const A & a2) { a1.a += a2.a; return a1; } 
```

# visual-studio - 如何阻止 Visual Studio 创建 pdb 调试文件夹？

> ID：14593885
> 
> 赞同：11
> 
> 时间：2013-01-29T23:17:42.003
> 
> 标签：visual-studio, debugging, visual-studio-2012, visual-studio-debugging

我不确定发生了什么变化，但是，在我的解决方案所在的目录中，Visual Studio 正在创建调试文件夹。

以下是一些正在创建的文件夹和文件：

```
System.Web.Http.pdb/EA80649BB72046E989099D4826726FH83/System.Web.Http.pdb
System.Web.pdb/CG58649BB72046E989099D4826726BHEWL/System.Web.Http.pdb
System.Transactions.pdb/FD28649BB72046E989099D4826726BV8F/System.Web.Http.pdb
System.Xml.pdb/5NIL649BB72046E989099D48267267CD1/System.Web.Http.pdb 
```

是否可以更改设置以阻止创建这些文件夹？它弄乱了我的解决方案目录。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-02T07:23:59.073

在 Debug -> Option and Settings -> Debugging -> SymbolsSymbols -> 在此目录中缓存符号：尝试设置类似的路径`C:\Users\...\AppData\Local\Temp\SymbolCache`

或/和`set _nt_symbol_path _NT_SYMBOL_PATH=srv**http://msdl.microsoft.com/download/symbols`

[排除符号问题](http://msdn.microsoft.com/en-us/library/bb385766.aspx)：`vsperfreport /debugsympath`在命令行运行以显示探查器组件加载符号信息的位置的完整列表，以及使用的符号文件是否与项目正在使用的文件匹配。

[本](http://msdn.microsoft.com/en-us/library/vstudio/ms241613.aspx)主题介绍如何查找和指定符号文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-06T14:30:12.600

我刚遇到这个问题。原来我为符号缓存选择的网络共享脱机/不可用...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-04T17:01:17.050

我也遇到过这种现象。经过多次尝试，我非常简单地解决了这个问题，只需取消选中工具/选项、调试/符号中的 Microsoft 符号服务器复选框即可。

# php - 长 PHP 脚本和回显/打印

> ID：14593886
> 
> 赞同：2
> 
> 时间：2013-01-29T23:17:43.667
> 
> 标签：php, web, echo

我有一些 PHP 脚本可以从命令行或作为网页调用（其中参数是使用 $GET 或 $POST 从其他网页传递的）。

他们可能需要一段时间来执行，比如说 5 分钟。

脚本包括一些“echo”和“print”调用，让我可以实时了解执行过程中发生了什么。

问题是，在网页模式下，这些回显调用在脚本执行结束之前不会在浏览器中打印任何内容。或者有时，一半的回声在 2 分钟后出现，其余的在最后。

当我的脚本在“网页模式”下被调用时，有没有一种简单的方法可以让我的 print()/echo() 调用实时出现？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T23:27:14.663

根据浏览器和输出的大小，flush() 可能会或可能不会起作用（请参阅：[PHP Flush() not working in Chrome](https://stackoverflow.com/questions/6001628/php-flush-not-working-in-chrome)）

如果启用了 mod_gzip，Apache 也可以缓冲输出。

最好的办法是登录 db/session/fs 并让 JS 在客户端轮询更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T23:18:38.070

用于[`ob_flush()`](http://php.net/manual/en/function.ob-flush.php)在脚本执行完成之前强制将输出发送到浏览器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T23:19:59.660

我假设您没有使用输出缓冲，因为您的脚本在 consolde 上输出正常。因此用于[`flush()`](http://php.net/manual/en/function.flush.php)明确告诉 PHP 它应该将输出发送到浏览器。

我建议每 xxx 个输出冲洗一次，而不是在每次输出后冲洗一次，`echo`或者`print`如果它们出现在很短的时间间隔内。

# regex - 正则表达式，需要修复

> ID：14593893
> 
> 赞同：0
> 
> 时间：2013-01-29T23:18:13.103
> 
> 标签：regex

我试图编写在`<ul class=\"theatre\">`和之间提取值的正则表达式`</ul>`

我写了那个正则表达式：

```
<ul class=\"theatre\">(\s)*[<>/ =":\._,)(a-zA-Z0-9(\s)ĄĘŚĆŻŹŁÓĆŃąęśćżźłóćń\-]+</ul> 
```

我的问题是，如何修改此正则表达式以使结果以第一次遇到的`</ul>`标签结尾？这是我的例子：

> [http://regexr.com?33j92](http://regexr.com?33j92)

它应该在之前结束`<div class=`

我知道 regex 不应该用于 html （我之前在 SO 上已经阅读过）。我只需要这样做，以了解为什么它没有首先结束`</ul>`以及如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:39:39.147

你必须使用懒惰？修饰符并使用 dot-all 标志来匹配行尾的点（匹配任何字符）。不应设置“全局”（多匹配）标志

检查这个正则表达式，只检查你的[网络正则表达式测试](http://regexr.com?33j92)中的全点复选框：

```
<ul\s.*?</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:29:25.993

你可以使用

```
 <ul class="theatre">([\s\S]+?)<\/ul> 
```

例如，在 Javascript 中，你可以这样做

```
var str = '<ul class="theatre"> bananas </ul>',
    m = str.match( /<ul class="theatre">([\s\S]+?)<\/ul>/ );

if ( m ) {
    console.log( m[1] );    // " bananas "
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T23:20:42.773

尝试：

```
<ul.*?>(.*?)</ul> 
```

# javascript - 在循环中附加事件 (IE 7)

> ID：14593899
> 
> 赞同：0
> 
> 时间：2013-01-29T23:18:59.503
> 
> 标签：javascript, events, for-loop, closures, anonymous-function

我正在尝试将函数绑定到 Internet Explorer 7 中节点列表中的项目。

```
for(var j = 0; j < navLabels.length; j++)
{
    navInsets[j].onmouseover = function(){showLabel(navLabels[j], true);};
    navInsets[j].onmouseout = function(){showLabel(navLabels[j], false);};
    navInsets[j].onclick = function(){selectNew(j);};
    navLabels[j].onclick = function(){selectNew(j);};
} 
```

showLabel() 和 selectNew() 都是我自己的函数。它们每个都需要传递一个索引，在本例中为 j。

我知道，在匿名函数中，j 最终会成为对 j 的引用，而不是 j 的值。我也知道我可以使用 addEventListener 或 bind 方法来执行此操作，但在 IE 7 中都不允许这样做。我什至知道 attachEvent 方法适用于 ie7，但由于我需要传递参数，所以我需要包装匿名函数中的函数使用 attachEvent （至少这似乎是真的），这是最初的问题。

关于这个主题的任何不太老套的想法？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T23:20:50.300

使用匿名函数来隐藏`j`：

```
(function(j) {
    navInsets[j].onclick = function() {selectNew(j);};
    ...
})(j); 
```

这将强制`j`在您的函数范围内按值传递。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T23:24:19.863

您不一定需要为每个绑定事件使用 IIFE。`j`您可以在所有事件绑定中使用相同的捕获：

```
for(var j = 0; j < navLabels.length; j++) {
    (function(j) {
        navInsets[j].onmouseover = function(){showLabel(navLabels[j], true);};
        navInsets[j].onmouseout = function(){showLabel(navLabels[j], false);};
        navInsets[j].onclick = function(){selectNew(j);};
        navLabels[j].onclick = function(){selectNew(j);};
    })(j);
} 
```

我不认为你能得到比这更“干净”的东西。您可能能够提取匿名函数并使其成为命名函数（在与 and 相同的范围内`navInsets`）`navLabels`，但这可能会使您很难看到循环的实际作用（因为您必须查找一次性函数） . 我没有看到任何明显的其他解决方案，因为无论如何您都需要关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T23:30:12.350

查看您的代码，我认为您可以通过使用事件冒泡/委托来优化您的代码。如果您准备投入一些时间，那么学习 jQuery 可能会收获很多。

如果没有您网站的 HTML 代码（以及 showLabel() 和 selectNew() 的确切工作原理，我无法进一步帮助您，但通常，在导航列表上设置单击和鼠标悬停处理程序可以通过以下简单操作来完成这;

```
 $('ul#nav').on('click', 'label', function(){
     selectNew(this);
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T23:33:03.720

老实说，在这种你只需要一个索引的情况下，我会将它直接存储在元素上。

```
for(var j = 0; j < navLabels.length; j++)
{
    navInsets[j].j = j;
    navInsets[j].onmouseover = function(){showLabel(navLabels[this.j], true);};
    navInsets[j].onmouseout = function(){showLabel(navLabels[this.j], false);};
    navInsets[j].onclick = function(){selectNew(this.j);};
    navLabels[j].onclick = function(){selectNew(this.j);};
} 
```

这是一种非常轻便、干净且快速的解决方案。只是不要存储元素本身，因为这可能会导致泄漏。

但是只存储一个索引是无害的，它避免了闭包泄漏的可能性。

* * *

此外，可能有更好的“DOM 遍历”解决方案，但这取决于您的标记。

# c# - 如何使用 OrmLite 获得固定大小的非空 varchar？

> ID：14593902
> 
> 赞同：4
> 
> 时间：2013-01-29T23:19:20.807
> 
> 标签：c#, sql, varchar, ormlite-servicestack, notnull

在 Poco 类中声明一个`String`属性时，OrmLite 会`varchar(8000) NULL`在数据库中为它生成一个列。例如，我有以下类和为其生成的表：

![在此处输入图像描述](../Images/04013984ddbd26834a724639970fa4d7.png)

![在此处输入图像描述](../Images/5b274ec6f42a73d56acf939f8a0771ed.png)

我想知道如何指定字段的长度。例如，FirstName 有 8000 个字符是没有意义的，我该如何强制`NOT NULL`？和`UserName`列`Password`应始终具有值。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T23:22:05.847

我认为您需要考虑使用注释： `Required`和`StringLength`：

```
[Required]
[StringLength(50)] 
```

所以像：

```
public class Users {
   ...
   [Required]
   [StringLength(50)]
   public String UserName { get; set; }
   ...
} 
```

我认为应该这样做。

祝你好运。

# arrays - 在 ARRAY 中组合日期和整数

> ID：14593906
> 
> 赞同：1
> 
> 时间：2013-01-29T23:19:56.003
> 
> 标签：arrays, postgresql, multidimensional-array, postgresql-9.2

如何选择`array_agg(ARRAY[f1_date,ARRAY[f2_int,f3_decimal]])`？在 ARRAY 中组合`date`和存在错误。**upd：**添加图片解释我打算在哪里以及如何使用数组。问题是分贝大小。将 3 个列转换为多维数组后，我可以节省大量空间。它将是 4M 行而不是 200M。每行将包含最多包含 500 个元素的数组。`integer`

 **![在此处输入图像描述](../Images/24ff6e73e36469ada06ac56c01f7cb49.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:33:54.487

Postgres 中的数组在所有维度上共享相同的基本元素。

### 匿名记录数组

您可以构建一个匿名记录数组（作为基本类型）：

```
SELECT array_agg((i,d))
FROM  (
   VALUES
     (1::int, 2.3::decimal)
    ,(2, 3.4)
    ,(3, 4.5)
   ) x(i, d); 
```

但是，这相当笨拙，因为您无法按名称访问匿名记录的子字段（名称不存在！）。与众所周知的类型一起操作可能更实用..

### 复合类型作为基本类型

创建一个复合类型并将其用作数组的基本类型。

```
CREATE TYPE int_dec AS (i int, d decimal);

SELECT '(1, 2.3)'::int_dec AS id_base
      ,'{"(1, 2.3)","(2, 3.4)","(3, 4.5)"}'::int_dec[] AS id_arr

-- Build an array from composite base type
SELECT array_agg(a)
FROM (
    VALUES
      ('(1, 2.3)'::int_dec)
     ,('(2, 3.4)'::int_dec)
     ,('(3, 4.5)'::int_dec)
    ) x(a);

-- Build an array from composite base type
SELECT array_agg((i,d)) AS anonymous_arr
      ,array_agg((i,d)::int_dec) AS id_arr
FROM  (
   VALUES
     (1::int, 2.3::decimal)
    ,(2, 3.4)
    ,(3, 4.5)
   ) x(i, d); 
```

### 表作为基本类型

任何*表*都可以作为复合类型。

```
db=# CREATE TEMP TABLE int_dec (i int, d decimal);
CREATE TABLE
db=# INSERT INTO int_dec VALUES (1, 2.3), (2, 3.4), (3, 4.5);
INSERT 0 3
db=# SELECT array_agg(id) FROM int_dec id;
            array_agg
---------------------------------
 {"(1,2.3)","(2,3.4)","(3,4.5)"} 
```

### `Text`作为共同点

另一种方法是将所有值转换为，`text`因为*每个*数据类型都可以`text`在 PostgreSQL 中转换为和返回并构建一个`multi-dimensional array`.

为此，您可能对聚合*多维*数组感兴趣。考虑这个相关问题下的答案：
[Selecting data into a Postgres array](https://stackoverflow.com/questions/11762398/selecting-data-into-a-postgres-array-format)

不过，根据我的经验，通常有比构建复杂数组更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:44:03.220

我相信 PostgreSQL 不支持组合多种类型的数组。它应该是所有日期或所有整数，但不能两者混合在一起。

现在，如果您真的想将两者结合起来，您可以将日期转换为整数，但使用[Unix time](http://en.wikipedia.org/wiki/Unix_time)。例如，1359478323 代表 ISO 8601:2013-01-29 16:52:03Z。您会发现几乎所有编程语言的双向转换库。**

# html - 为什么在 textarea 上添加顶部/底部/右侧填充也会移动滚动条和句柄？

> ID：14593913
> 
> 赞同：2
> 
> 时间：2013-01-29T23:20:49.640
> 
> 标签：html, css, textarea, padding

我想对我的文本输入和文本区域应用匹配的填充，但是当我对文本区域应用填充时，它也会移动用于调整文本区域的小手柄，而且它看起来很愚蠢，至少在 Firefox 中是这样。有没有办法解决这个问题，还是我只是强迫症？我个人认为它看起来很可怕。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:28:46.710

如果您愿意删除调整大小手柄，只需添加`resize: none`到您的 CSS。有关演示，请参见[http://jsfiddle.net/2bkMH/2/ 。](http://jsfiddle.net/2bkMH/2/)

# cmake - 使用 cmake 链接库

> ID：14593918
> 
> 赞同：3
> 
> 时间：2013-01-29T23:21:04.377
> 
> 标签：cmake

`bcm2835`我在我的电脑上安装了这个库。要在 c 中编译程序，我必须输入：

```
gcc -o my_program my_program.c -l rt -l bcm2835 
```

现在我必须编译另一个使用相同库的程序`cmake`。我从来没有用过这个。我必须在“cmakelists.txt”的底部添加什么？

我努力了：

```
TARGET_LINK_LIBRARIES(my_program rt)  
TARGET_LINK_LIBRARIES(my_program bcm2835) 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T08:43:33.360

```
cmake_minimum_required (VERSION 2.6)
project( my_program )

find_library( rt_lib rt OTHER_PARAMETERS_THAT_YOU_REQUIRE_SEE_DOCUMENTATION_LINK )
find_library( bcm2835_lib bcm2835 OTHER_PARAMETERS_THAT_YOU_REQUIRE_SEE_DOCUMENTATION_LINK )

include_directories( LIST_OF_REQUIRED_INCLUDE_DIRECTORIES_SEE_DOCUMENTATION_LINK ) 

add_executable( my_program my_program.c )
target_link_libraries( my_program rt_lib bcm2835_lib ) 
```

[这里](http://www.cmake.org/cmake/help/examples.html) 、[这里](http://www.cmake.org/cmake/help/cmake_tutorial.html)和[这里是一些例子，因为 CMake 有很好的文档，你应该在](http://www.cmake.org/Wiki/CMake:How_To_Find_Libraries)[这里](http://www.cmake.org/cmake/help/v2.8.10/cmake.html)阅读更多关于命令的信息。

并且 cmakelists.txt 文件应该命名为 CMakeLists.txt

# functional-programming - 使用 and 进行类型声明

> ID：14593919
> 
> 赞同：0
> 
> 时间：2013-01-29T23:21:09.933
> 
> 标签：functional-programming, ocaml

类型声明有什么好处：

```
type xxx
and yyy 
```

超过

```
type xxx
type yyy 
```

赋予它依赖于另一个的语义？

我正在使用[OcamlWin 4.0](http://caml.inria.fr/download.en.html)，代码来自`C:\OCaml\lib\hashtbl.ml`

```
 type ('a, 'b) t =
  { mutable size: int;                        (* number of entries *)
    mutable data: ('a, 'b) bucketlist array;  (* the buckets *)
    mutable seed: int;                        (* for randomization *)
    initial_size: int;                        (* initial array size *)
  }

and ('a, 'b) bucketlist =
    Empty
  | Cons of 'a * 'b * ('a, 'b) bucketlist 
```

它编译。当我更改`and`为`type`

```
type ('a, 'b) t =
  { mutable size: int;                        (* number of entries *)
    mutable data: ('a, 'b) bucketlist array;  (* the buckets *)
    mutable seed: int;                        (* for randomization *)
    initial_size: int;                        (* initial array size *)
  }

type ('a, 'b) bucketlist =
    Empty
  | Cons of 'a * 'b * ('a, 'b) bucketlist 
```

也可以编译。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T23:42:18.310

`and`定义相互递归声明时经常使用关键字

鉴于你的例子

```
type ('a, 'b) t =
    { mutable size: int;                        (* number of entries *)
      mutable data: ('a, 'b) bucketlist array;  (* the buckets *)
      mutable seed: int;                        (* for randomization *)
      initial_size: int;                        (* initial array size *)
    }

type ('a, 'b) bucketlist =
    Empty
  | Cons of 'a * 'b * ('a, 'b) bucketlist 
```

将给出`Error: Unbound type constructor bucketlist`第 3 行，字符 20-39。但是，使用 and 更改第二种类型将消除错误。

```
type ('a, 'b) t =
    { mutable size: int;                        (* number of entries *)
      mutable data: ('a, 'b) bucketlist array;  (* the buckets *)
      mutable seed: int;                        (* for randomization *)
      initial_size: int;                        (* initial array size *)
    }

and ('a, 'b) bucketlist =
    Empty
  | Cons of 'a * 'b * ('a, 'b) bucketlist 
```

我想不出为什么它会在这两种情况下为您编译的原因，但是如果您使用解释器并且忘记关闭它，那么它的环境中将有旧的绑定。
也就是说，如果您首先使用`and`关键字评估了代码，那么您可以继续重新评估代码，而无需`bucketlist`在环境中定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T04:48:04.583

`and`需要关键字来表达相互递归的定义。例如，

```
type t = A | B of u
and  u = C | D of t 
```

`and`如果您要替换为.将不再编译`type`。但是，在您的示例中，它的使用是多余的。

# ios - ios中的大型导航菜单

> ID：14593921
> 
> 赞同：1
> 
> 时间：2013-01-29T23:21:18.870
> 
> 标签：ios, objective-c

我有一个大的导航菜单，例如网站标题（顶部徽标，底部一些菜单按钮。），并且此导航菜单必须显示在我的应用程序的每个视图中（例如母版页，标题（此导航）将是静态的，但内容会改变）。在我的应用程序中表示此菜单的最佳方式是什么？

我认为 UINavigationBar 可能是合适的，但我不确定。我可以定制那么多吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:26:22.527

完全取决于“那么多”有多少。

您可以使用 UIToolBar 进行更多 UINavigationBar 允许的自定义，但是您必须做一些额外的工作才能使该功能与导航栏的功能相匹配，

或使用具有此 largeNavigationMenu 的 customViewController，并将其用作您在应用程序中使用的所有视图控制器的基类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:27:12.370

您基本上需要使用某种容器控制器。UINavigationController、UITabBarController 或者像抽屉菜单控制器这样的自定义对象。取决于应用程序设计。

# c++ - 为什么unordered_map没有rbegin()和rend()，而只有begin()和end()

> ID：14593922
> 
> 赞同：12
> 
> 时间：2013-01-29T23:21:20.433
> 
> 标签：c++, c++11, iterator, unordered-map

`unordered_map`用 begin()、end() 和前向迭代器遍历 , 似乎很奇怪。

如果是这样，为什么它也没有 rbegin()、rend() 和双向迭代器？有什么技术原因吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-29T23:22:14.197

它是无序的，因此迭代发生的顺序是（或应该是）不重要的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-30T00:03:19.260

引用自`The C++ Standard Library`

> 反向迭代器通过在内部将递增运算符的调用转换为递减运算符的调用，让算法向后运行，反之亦然。所有具有双向迭代器或随机访问迭代器的容器（除了 forward_list 和所有关联容器之外的所有序列容器）都可以通过它们的成员函数 rbegin() 和 rend() 创建反向迭代器。从 C++11 开始，还提供了返回只读迭代器的相应成员函数 crbegin() 和 crend()。
> 
> 对于 forward_lists 和无序容器，不提供向后迭代接口（rbegin()、rend() 等）。原因是实现只需要单链表来遍历元素。

# python - Django 进度条

> ID：14593926
> 
> 赞同：4
> 
> 时间：2013-01-29T23:21:40.133
> 
> 标签：python, django

我正在使用 Django 上传文件并使用 ETL 作业

```
子进程
```

该作业大约需要 15 秒才能运行，而不是让用户认为页面已冻结，我想显示一个[进度条](http://twitter.github.com/bootstrap/components.html#progress)。

我可以找出 AJAX 来更新进度条，但我不知道该怎么做是在子进程运行时返回一个 HttpResponse 。也许线程是解决方案？我在那里没有任何经验。有人可以给我一些指导吗？

这是视图：

```
def start_job(request):
    if request.method == 'POST':
        form = UploadForm(request.POST, request.FILES)
        if form.is_valid() and form.is_multipart():
            save_file(form.cleaned_data['file'])
            subprocess.call(["Kitchen.bat", "/file:job.kjb"])
            return HttpResponseRedirect('/success/')
    else:
        form = UploadForm()
    return render_to_response('template.html') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:02:59.137

谢谢@Bula，[django-celery](http://pypi.python.org/pypi/django-celery)是完美的解决方案。

这是一个很好的[入门视频](http://www.youtube.com/watch?v=WevtkoCA-KQ)。

# javascript - 又一个无尽的页面困境

> ID：14593928
> 
> 赞同：0
> 
> 时间：2013-01-29T23:21:50.087
> 
> 标签：javascript, ruby-on-rails, ruby, jquery, pagination

我正在尝试为我的页面实现无尽的页面设置。这两天我一直在尝试很多不同的方法，但似乎无法让它发挥作用。我喜欢这篇博文中建议的设置，但我似乎无法让它工作： http: [//pedromtavares.wordpress.com/2011/05/08/endless-page-scrolling-with-rails-3-and- jQuery/](http://pedromtavares.wordpress.com/2011/05/08/endless-page-scrolling-with-rails-3-and-jquery/)

我也尝试了 Ryan Bates 截屏视频，但没能实现...

我尝试了以下方法：

已安装的插件

```
rails plugin install git://github.com/pedromtavares/endless_scroll_example.git 
```

修改了我的控制器主页：

```
def index

last = params[:last].blank? ? Time.now + 1.second : Time.parse(params[:last])
@feeds = Feed.input(last)

end 
```

用新方法'input'修改了我的“Feed-model”：

```
def self.input(last)
   self.where("created_at < ? ", last).order('created_at desc').limit(5)
end 
```

修改了我的索引

```
<% content_for :scripts do %>
  <%= javascript_include_tag 'endless' %>
<% end %>

<%unless @feeds.blank?%>
<ul class='list' last="<%=@feeds.to_a.last.created_at%>">
<%= render :partial => 'feeds', :collection => @feeds%>

<div id='infinite-scroll'></div>
</ul>
<%end%> 
```

我的部分 _feeds.html.erb 看起来像这样（只是填写文本:)：

```
<%=feeds.title%>
jfjh
</p>
<p>
    jfjh
    </p>
    <p>
        jfjh
        </p>
        <p>
            jfjh
            </p>
            <p>
                jfjh
                </p>

                 <br>
<hr> 
```

添加了我的新 javascript (endless.js) 由 pedromtavares 提供

```
$('ul').endlessScroll({
  fireOnce: true,
  fireDelay: 500,
    ceaseFire: function(){
      return $('#infinite-scroll').length ? false : true;
    },
    callback: function(){
      $.ajax({
          url: '/home',
          data: {
              last: $(this).attr('last')
          },
          dataType: 'script'
        });
    }
}); 
```

我的最终 javascript 文件如下所示：

```
<% unless @feeds.blank? %>
    $('.endless_scroll_inner_wrap').append("<%=escape_javascript(render :partial => 'feeds', :collection => @feeds)%>");
    $('ul').attr('last', '<%=@feeds.to_a.last.created_at%>')
<% else %>
    $('#infinite-scroll').detach();
<% end %> 
```

我没有收到任何错误，但也没有无限滚动。我从数组中获得了第一个帖子，但没有其他帖子。无法弄清楚我做错了什么，感觉就像我现在已经尝试了一切......请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:27:44.840

我自己也有类似的问题。我的问题是我在我的 javascript 中的追加找不到正确的 div。可能对你有用 -

在您的 javascript 文件中，更改：

```
 $('.endless_scroll_inner_wrap').append... 
```

至：

```
 $('#infinite-scroll').append... 
```

看看是否可以解决它。

# c - 使用函数指针和静态变量时我们需要读锁吗？

> ID：14593930
> 
> 赞同：0
> 
> 时间：2013-01-29T23:21:59.217
> 
> 标签：c, linux, concurrency, mutex

除了变量小于 memalign 并且在某些缓存情况下，我们是否需要读取锁来读取整数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:46:17.367

分析器假定由于`f1()`已获取 的地址，因此可以从任何上下文通过该函数指针调用它。例如，如果您有一个线程正在更新`x`：

```
lock xlock;
update x;
unlock xlock; 
```

并且另一个线程`f1()`同时通过函数指针调用`f1()`，第二个线程中的访问将不受锁的保护。因此，它可能会看到 的部分更新`x`，或者看到更新相对于其他更新的排序不正确。

函数指针之所以重要，是因为如果`f1()`从未获取过的地址，那么分析器可以准确地确定函数的调用位置。当地址被取走时，它必须假设最坏的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T23:47:17.763

从您引用的文本中（强调我的）：

> 如果一个函数的地址被占用，那么**我们假设我们不知道对该函数进行的每个调用的上下文**。

因为 lint 无法确定`f1`可以在其中进行调用的每个上下文，所以它假设可以在任何上下文中调用它，包括访问`x`导致某些数据竞争的上下文。

合理地，您可能不会通过返回来击中任何可怕的东西`x`。但这是一种可能性，使用 lint 的全部目的是减少关于代码如何在意外输入下运行的不确定性。

# php - PHP 连接 SQL 并显示数据

> ID：14593934
> 
> 赞同：0
> 
> 时间：2013-01-29T23:22:09.320
> 
> 标签：php, sql, view-helpers

**大家好**

我创建（复制）了一个网站，可以查看我的数据库中的信息。但是我拥有的代码显示了每个机器人以及成员。

我将它连接到本地主机，数据库是 phpbb3。

我需要一个刺痛来摆脱 group_id 为 6 的机器人。

这是我的代码

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
        <title>View Records</title>
</head>
<body>

<?php
/* 
        VIEW.PHP
        Displays all data from 'phpbb_users' table
*/

        // connect to the database
        include('connect-db.php');

        // get results from database
        $result = mysql_query("SELECT * FROM phpbb_users") 
                or die(mysql_error());  

        // display data in table
        echo "<p><b>View All</b> | <a href='view-paginated.php?page=1'>View Paginated</a></p>";

        echo "<table border='1' cellpadding='10'>";
        echo "<tr> <th>ID</th> <th>Username</th> <th>Email</th> <th></th> <th></th></tr>";

        // loop through results of database query, displaying them in the table
        while($row = mysql_fetch_array( $result )) {

                // echo out the contents of each row into a table
                echo "<tr>";
                echo '<td>' . $row['user_id'] . '</td>';
                echo '<td>' . $row['username'] . '</td>';
                echo '<td>' . $row['user_email'] . '</td>';
                echo '<td><a href="edit.php?id=' . $row['user_id'] . '">Edit</a></td>';
                echo '<td><a href="delete.php?id=' . $row['user_id'] . '">Delete</a></td>';
                echo "</tr>"; 
        } 

        // close table>
        echo "</table>";
?>
<p><a href="new.php">Add a new record</a></p>

</body>
</html> 
```

**谢谢，在高级。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:26:05.600

改变这个：

```
$result = mysql_query("SELECT * FROM phpbb_users") 
```

至

```
$result = mysql_query("SELECT * FROM phpbb_users WHERE group_id <> 6") 
```

# java - 如何使用 Color.rgb？

> ID：14593936
> 
> 赞同：2
> 
> 时间：2013-01-29T23:22:14.410
> 
> 标签：java, android

我正在关注一个教程，并且正在尝试一些代码，并发现当我输入“aditya”时我的应用程序不断崩溃。我知道我用`Color.rgb`错了，但我不知道怎么做。

```
chkCmd.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            String check = input.getText().toString();
            display.setText(check);
            f (check.equals("left")) {
                display.setGravity(Gravity.LEFT);
            } else if (check.equals("center")) {
                display.setGravity(Gravity.CENTER);
            } else if (check.equals("right")) {
                display.setGravity(Gravity.RIGHT);
            } **else if (check.equals("aditya")) {
                display.setText(Color.rgb(184, 134, 011));** 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T23:30:07.733

这条线

```
display.setText(Color.rgb(184, 134, 011)) 
```

正在尝试将显示屏上的文本设置为`Color.rgb(184, 134, 011)`。

您要做的是设置文本的颜色。为此，请编写

```
display.setTextColor(Color.rgb(184, 134, 011)) 
```

在您在显示屏上设置文本之前。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T23:26:45.760

您正在尝试将文本设置为解析颜色的整数，而不是设置文本的颜色。尝试使用这个：

```
display.setTextColor(Color.rgb(184, 134, 011)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T23:29:45.280

我认为它崩溃是因为 Android 将 int 视为 Resource id，所以它没有找到资源并且它崩溃了，尝试替换

```
display.setText(Color.rgb(184, 134, 011)); 
```

到

```
display.setText(String.valueOf(Color.rgb(184, 134, 011))); 
```

它应该工作

# ruby-on-rails - 为什么我在 CentOS 上安装的 Rails 正在寻找 libc.dylib？

> ID：14593937
> 
> 赞同：0
> 
> 时间：2013-01-29T23:22:15.337
> 
> 标签：ruby-on-rails, macos, centos, libc

我正在将 Rails 应用程序（由其他人编写）从 OSX 服务器上运行到 CentOS 服务器上，在我的设置过程中，我试图使用命令创建数据库......

```
/usr/bin/bundle exec /usr/bin/rake db:create RAILS_ENV=production POSTGRES_DIR=/usr 
```

此调用失败并出现以下错误：

```
libc.dylib: cannot open shared object file: No such file or directory 
```

这对我来说毫无意义，dylib 文件是 OSX 的东西，所以我不知道为什么 Rails db:create 操作会寻找 libc.dylib？它不应该只是加载标准的 Linux libc.so 吗？

什么是 db:create 实际执行的具有这种依赖性的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:00:07.900

当在 OSX 上运行并提交给源代码管理时，我的存储库有一个由捆绑程序生成的 .gem 文件的缓存。这些 gem 之一是 OSX 二进制文件，db:create 调用贯穿所有初始化程序代码以执行对 ORM 的调用，因此即使在 db:create 函数期间未使用这些模块，它们也试图加载。

# jquery - 带有开关图例的 jQuery Flot 多轴多条形图

> ID：14593939
> 
> 赞同：0
> 
> 时间：2013-01-29T23:22:31.133
> 
> 标签：jquery, flot

我正在使用两个 x 轴和 Y 轴来绘制图表。我也有条形图，它可以正确显示，但关闭功能在复选框上不起作用

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Power Data</title>
    <link href="layout.css" rel="stylesheet" type="text/css">
    <!--[if lte IE 8]><script language="javascript" type="text/javascript" src="../excanvas.min.js"></script><![endif]-->

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="http://www.pureexample.com/js/flot/excanvas.min.js"></script>
    <script src="http://www.pureexample.com/js/flot/jquery.flot.min.js"></script>

    </head>
    <body>
    <h2>Power Data </h2>
    <p>

        <div id="legendcontainer" style="width: 1100px;position:"></div>
        <div id="placeholder" style="width:1100px;height:400px;"></div>
        <div id="legend" style="width:600px;height:300px;"> </div>

    </p>

 <script type="text/javascript">

$('#legend .legendCB').click(function(){ 

        plotByChoice(true);

});
var loadData = [ 
[40921,760],[40922,728],[40923,743],[40924,737],[40925,721],[40926,719],[40927,727],[40928,715],[40929,707],[40930,710],[40931,714],[40932,724],
[40933,702],[40934,690],[40935,695],[40936,707],[40937,711],[40938,717],[40939,727],[40940,745],[40941,783],[40942,793],[40943,820],[40944,864],
[40945,922],[40946,974],[40947,1028],[40948,1090],[40949,1149],[40950,1196],[40951,1212],[40952,1233],[40953,1217],[40954,1201],[40955,1172],
[40956,1148],[40957,1158],[40958,1143],[40959,1139],[40960,1114],[40961,1101],[40962,1108],[40963,1118],[40964,1106],[40965,1070],[40966,1054],
[40967,1044],[40968,1055],[40969,1050],[40970,1032],[40971,1033],[40972,1001],[40973,978],[40974,961],[40975,960],[40976,984],[40977,995],
[40978,974],[40979,990],[40980,979],[40981,989],[40982,987],[40983,998],[40984,1002],[40985,1014],[40986,1025],[40987,1032],[40988,1041],
[40989,1045],[40990,1067]
];

var predicatedLoad = [
[40921,826],[40922,812],[40923,794],[40924,799],[40925,790],[40926,788],[40927,786],[40928,782],[40929,783],[40930,772],[40931,760],[40932,773],
[40933,768],[40934,765],[40935,762],[40936,762],[40937,774],[40938,770],[40939,776],[40940,801],[40941,817],[40942,840],[40943,871],[40944,927],
[40945,963],[40946,1000],[40947,1051],[40948,1106],[40949,1183],[40950,1231],[40951,1243],[40952,1263],[40953,1247],[40954,1234],[40955,1226],
[40956,1207],[40957,1219],[40958,1207],[40959,1191],[40960,1208],[40961,1170],[40962,1185],[40963,1159],[40964,1163],[40965,1145],[40966,1128],
[40967,1122],[40968,1113],[40969,1118],[40970,1101],[40971,1096],[40972,1091],[40973,1046],[40974,1054],[40975,1029],[40976,1066],[40977,1067],
[40978,1062],[40979,1069],[40980,1075],[40981,1055],[40982,1060],[40983,1080],[40984,1068],[40985,1083],[40986,1067],[40987,1083],[40988,1084],
[40989,1086],[40990,1098],[40991,1122],[40992,1175],[40993,1200],[40994,1140],[40995,1089],[40996,1113],[40997,1106],[40998,1096]

];

var powercut =[
[40921,0],[40922,0],[40923,0],[40924,0],[40925,0],[40926,0],[40927,0],[40928,0],[40929,0],[40930,0],[40931,0],[40932,10],[40933,0],[40934,0],
[40935,0],[40936,0],[40937,0],[40938,0],[40939,10],[40940,0],[40941,0],[40942,10],[40943,0],[40944,0],[40945,0],[40946,0],[40947,0],
[40948,0],[40949,0],[40950,0],[40951,0],[40952,0],[40953,0],[40954,0],[40955,0],[40956,0],[40957,0],[40958,0],[40959,0],[40960,0],
[40961,0],[40962,0],[40963,0],[40964,0],[40965,0],[40966,0],[40967,0],[40968,0],[40969,0],[40970,0],[40971,0],[40972,0],[40973,0],
[40974,0],[40975,0],[40976,0],[40977,0],[40978,0],[40979,20],[40980,0],[40981,0],[40982,0],[40983,0],[40984,0],[40985,0],[40986,0],
[40987,0],[40988,0],[40989,0],[40990,0]
];

var diffData = [[40921,66],[40922,84],[40923,51],[40924,62],[40925,69],[40926,69],[40927,59],[40928,67],[40929,76],[40930,62],[40931,46],
[40932,49],[40933,66],[40934,75],[40935,67],[40936,55],[40937,63],[40938,53],[40939,49],[40940,56],[40941,34],[40942,47],
[40943,51],[40944,63],[40945,41],[40946,26],[40947,23],[40948,16],[40949,34],[40950,35],[40951,31],[40952,30],[40953,30],[40954,33],
[40955,54],[40956,59],[40957,61],[40958,64],[40959,52],[40960,94],[40961,69],[40962,77],[40963,41],[40964,57],[40965,75],
[40966,74],[40967,78],[40968,58],[40969,68],[40970,69],[40971,63],[40972,90],[40973,68],[40974,93],[40975,69],
[40976,82],[40977,72],[40978,88],[40979,79],[40980,96],[40981,66],[40982,73],[40983,82],[40984,66],[40985,69],
[40986,42],[40987,51],[40988,43],
[40989,41]
];

var myticks = [[40920, "12-01-2012 B-1"],[40925, "12-01-2012 B-5"],[40930, "12-01-2012 B-10"],
            [40935, "12-01-2012 B-15"],[40940, "12-01-2012 B-20"],[40945, "12-01-2012 B-25"],
            [40950, "12-01-2012 B-30"],[40955, "12-01-2012 B-35"],[40960, "12-01-2012 B-40"],
[40965, "12-01-2012 B-45"],
            [40970, "12-01-2012 B-50"],
            [40975, "12-01-2012 B-55"],
            [40980, "12-01-2012 B-60"],
            [40985, "12-01-2012 B-65"],
            [40990, "12-01-2012 B-70"],
            [40995, "12-01-2012 B-75"],
            [41000, "12-01-2012 B-80"],
            [41005, "12-01-2012 B-85"],
            [41010, "12-01-2012 B-90"],
            [41015, "12-01-2012 B-95"],
            [41020, "13-01-2012 B-1"],
            [41025, "13-01-2012 B-5"],
            [41030, "12-01-2012 B-1"],
            [41035, "12-01-2012 B-1"],
            [41040, "13-01-2012 B-5"],
            [41045, "13-01-2012 B-5"],
            [41050, "13-01-2012 B-5"],
            [41055, "13-01-2012 B-5"],
            [41060, "13-01-2012 B-5"],
            [41065, "13-01-2012 B-5"]];

  var datasets ={
    "Load Data" :{
      label : "Load Data",
      data: loadData
    },

    "Power Cut Load" :{
      label : "Power Cut Load",
      data : powercut

    },
    "Difference Data" :{
     label: "Difference Data",
     data : diffData
    },

    "Predicated Load" :{
      label: "Predicated Load",
      data:predicatedLoad
    }

  }

data = null;
var firstTime =true;
function plotByChoice(doAll)
{    

  data = [];
    if (doAll != null)
    {
        $.each(datasets, function(key, val) {
            data.push(val);
        });
    }   
    else
    {
        $('#legend .legendCB').each(
            function(){

                alert("I am called");
                if (this.checked)
                {         
                    alert("I am called inside");
                     data.push(datasets[this.id]);
                }
                else
                {
                     data.push({label: this.id, data: []})
                }        
            }
        );
    }        

    $.plot($("#placeholder"),
           [ { 
                data: $('#Load Data:checked') ? loadData : [], 
                lines:{show : true },

                label: "Load Data"
                },
             { data: $('#Predicated Load:checked') ? predicatedLoad : [], label: "Predicated Load" },
             { data: $('#Difference Data:checked') ? diffData : [], label: "Difference Data", 
                bars:{
                      show:true
                },
                 color:'blue'
             },
             { data: $('#Power Cut Load:checked')?  powercut : [], label: "Power Cut Load", yaxis: 2}

             ],
           { 
               xaxis:  
                        {   min:40920,

                            ticks:myticks

                         },
               yaxes: [ { min: 0 },
                        {
                          // align if we are to the right
                          alignTicksWithAxis: "right",
                          position: "right",
                          min :-25,
                          max:50                          
                        } ],

                                       // legend: { labelBoxBorderColor: "#0200f0", container: $("#legendcontainer"), noColumns: 2},
                 legend: {
            container: legend,
            labelFormatter: function (label, series) {
                var cb = '<input class="legendCB" type="checkbox" ';
                if($('#Load Data:checked')){

                    cb += 'checked="true" ';
                }else if($('#Predicated Load:checked')){
                    cb += 'checked="true" ';
                }else if($('#Difference Data:checked')){

                    cb += 'checked="true" ';
                }else if($('#Power Cut Load:checked')){

                    cb += 'checked="true" ';
                }                

                cb += 'id="'+label+'" /> ';
                cb += label; 

                alert("check boxes: " + cb)     
                return cb;

             }
        }

           });        
              $('#legend').find("input").click(function(){setTimeout(plotByChoice,100);});
             // $('#legend .legendCB').change(function(){setTimeout(plotByChoice,1000);});

}

plotByChoice(this);   
  </script>

</body>
</html> 
```

我可以取消选中/复选框，但它再次重置为选中。我指的是 [http://jsfiddle.net/yijiang/6FLsM/2/](http://jsfiddle.net/yijiang/6FLsM/2/)

和

[http://jsfiddle.net/GVt9V/14/](http://jsfiddle.net/GVt9V/14/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T23:57:32.190

将绘图数据更改为您创建的数据数组 - [http://jsfiddle.net/zxtFc/](http://jsfiddle.net/zxtFc/)

```
here$.plot($("#placeholder"),
      data,
       { 
           xaxis:  
                    {   min:40920,

                        ticks:myticks

                     },
           yaxes: [ { min: 0 },
                    {
                      // align if we are to the right
                      alignTicksWithAxis: "right",
                      position: "right",
                      min :-25,
                      max:50                          
                    } ],

                                   // legend: { labelBoxBorderColor: "#0200f0", container: $("#legendcontainer"), noColumns: 2},
             legend: { 
```

# c# - 在另一个线程中每 0.5 秒旋转一次图像

> ID：14593940
> 
> 赞同：0
> 
> 时间：2013-01-29T23:22:32.663
> 
> 标签：c#, wpf, user-interface

我想制作一个小型命运之轮游戏，但在制作旋转图像的事件时遇到问题

这是我现在拥有的代码，但它似乎只运行 _thread 一次

```
 private readonly Timer _timer;
    private Thread _thread;
    private int _angle;

    public MainWindow()
    {
        InitializeComponent();
        _timer = new Timer(500);
        _timer.Elapsed += RotateWheelEvent;
        _timer.Start();

        _angle = 0;

        SetupRotationThread();
        _thread.Start();
    }

        public void RotateWheelEvent(object sender, EventArgs args)
    {
        _thread.Abort();
        _angle = _angle + 15;
        _thread.Start();
    }

    public void SetupRotationThread()
    {
        var rotatetransform = new RotateTransform(_angle);

        _thread = new Thread(
            delegate()
                {
                    ImageWheel.Dispatcher.Invoke(
                        System.Windows.Threading.DispatcherPriority.SystemIdle,
                        TimeSpan.FromSeconds(1),
                        new Action(
                            delegate()
                                {
                                    ImageWheel.RenderTransformOrigin = new Point(0.5, 0.5);
                                    ImageWheel.RenderTransform = rotatetransform;
                                }
                            ));
                });
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T23:38:44.150

您可以只使用 a`System.Threading.Timer`而不是`System.Timer`每次都生成一个新线程。

```
 private System.Threading.Timer _timer;
        private int _angle;

        public MainWindow()
        {
            InitializeComponent();
              _timer = new System.Threading.Timer((o) => 
              {
                  _angle += 15;
                  Dispatcher.Invoke(DispatcherPriority.Background, (Action)delegate
                  {
                      ImageWheel.RenderTransformOrigin = new Point(0.5, 0.5);
                      ImageWheel.RenderTransform = new RotateTransform(_angle);
                  }); 
              }, null, 500, 500);
        } 
```

然而，不清楚你为什么要线程化这个，你似乎正在启动一个线程，它只是将代码调用回 UI 线程，我看不到这个线程需要做的任何工作。

所以我认为你需要的就是这个

```
private readonly Timer _timer;
private int _angle;

    public MainWindow()
    {
        InitializeComponent();
        _timer = new Timer(500);
        _timer.Elapsed += RotateWheelEvent;
        _timer.Start();
        _angle = 0;
    }

    public void RotateWheelEvent(object sender, EventArgs args)
    {
        Dispatcher.Invoke(DispatcherPriority.Background, (Action)delegate
        {
            _angle += 15;
            ImageWheel.RenderTransformOrigin = new Point(0.5, 0.5);
            ImageWheel.RenderTransform = new RotateTransform(_angle);
        }); 
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T00:17:59.980

在最坏的情况下，您应该只`DispatcherTimer`在代码隐藏中使用 a ：

```
var timer = new DispatcherTimer
{
    Interval = TimeSpan.FromSeconds(0.5)
};

timer.Tick += (s, e) => ((RotateTransform)ImageWheel.RenderTransform).Angle += 15;
timer.IsEnabled = true; 
```

但实际上根本没有必要这样做。`Storyboard`你可以在你的 XAML 中设置一个。就像是：

```
<Image x:Name="image" RenderTransformOrigin="0.5,0.5" ...>
    <Image.RenderTransform>
        <RotateTransform/>
    </Image.RenderTransform>
    <Image.Triggers>
        <EventTrigger RoutedEvent="Loaded">
            <BeginStoryboard>
                <Storyboard Duration="00:00:00.5" RepeatBehavior="Forever">
                    <DoubleAnimation Storyboard.TargetName="image" Storyboard.TargetProperty="(Image.RenderTransform).(RotateTransform.Angle)" By="15"/>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </Image.Triggers>
</Image> 
```

其中一些语法可能不太正确（在 linux 上因此无法检查），但您明白了。你把一些非常简单的事情过于复杂了。

# php - JavaScript 显示/隐藏字段不起作用 - 每次都不会发生 OnChange

> ID：14593942
> 
> 赞同：0
> 
> 时间：2013-01-29T23:22:48.590
> 
> 标签：php, javascript, drop-down-menu

```
I am trying to hide and show fields based of the selection in a dropdown field. I got it do hide but when I select another value it doesn't display again.

<script type="text/javacript">
        function checkEm(){
            if (document.getElementById('JobTypeDDL').selected = "2"){
                document.getElementById('DateTbx').style.visibility = "hidden";
                document.getElementById('DateTbx').style.display = "none";
            } else {
                document.getElementById('DateTbx').style.visibility = "visible";
                document.getElementById('DateTbx').style.display = "block";
        }
    }
</script>

    <div class="InputField">
        <select name="JobTypeDDL" id="JobTypeDDL" onChange="checkEm()">
            <option value="0" <?php if ($_POST['JobTypeDDL'] == "0") {echo "selected='selected'";} ?> >Select Job Type</option>
            <option value="1" <?php if ($_POST['JobTypeDDL'] == "1") {echo "selected='selected'";} ?> >New Mobility</option>
            <option value="2" <?php if ($_POST['JobTypeDDL'] == "2") {echo "selected='selected'";} ?> >Service/Repair/Install</option>
        </select>
    </div>

<input name="DateTbx" id="DateTbx" type="text" <?php if (!$_POST['DateTbx'] == "") {echo "value='". $_POST['DateTbx']."'";} ?> /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:27:37.110

在 if 条件下，您使用单个 =。改为使用 `===`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:24:59.263

用于测试语句`==`中的相等性。`if`您正在使用`=`，这是分配。

# c++ - 如何避免类名和方法名重名？

> ID：14593943
> 
> 赞同：0
> 
> 时间：2013-01-29T23:22:57.237
> 
> 标签：c++, naming

目前我对类名和方法名使用相同的约定。它们有一个没有前缀的前导大写字母。而且我不使用“Get”前缀来获取属性。但是，我在以下代码中遇到名称冲突问题

```
class Material
{};

class Background
{
public:
    Material* Material() const             {return m_material;}  // Name conflict
    void SetMaterial(Material* material)   {m_material = material;}

private:
    Material* m_material;
}; 
```

什么是解决问题的最简单方法，但保持或最小修改我的约定？非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T23:26:39.623

> 什么是解决问题的**最简单方法，但保持或最小修改我的约定？**

最*简单*的方法可能是稍微修改约定，例如以小写开头的方法名称。

顺便说一句，我喜欢你没有在访问器方法中使用“get”这个词。本着同样的精神，你可以在 mutator 方法中去掉“set”这个词（这里，`SetMaterial()`）。签名足以​​区分访问器和修改器。

如果你喜欢他们，你会到达：

```
class Material
{};

class Background
{
public:
    Material* material() const          {return m_material;}
    void material(Material* material)   {m_material = material;}

private:
    Material* m_material;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T23:24:59.153

将方法名称大写是*不常见的。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T23:28:40.967

看看 Qt 库。它使用与您几乎相同的约定，它是我见过的最好的代码。我看到的唯一区别是方法名称开头的大写字母。所以改变你的约定以匹配他们的，你会很高兴的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T23:43:43.607

你被不遵守良好的命名规则所困扰。

要命名函数，请使用强动词后跟对象 具有功能内聚的过程通常对对象执行操作。名称应该反映过程的作用，对对象的操作意味着动词加对象名称。GetMaterial()、SetMaterial、PrintDocument()、CalcMonthlyRevenues()、CheckOrderInfo() 和 RepaginateDocument() 是好的过程名称的示例。

> 什么是解决问题的最简单方法，但保持或最小修改我的约定？

只需在对象前面添加一个动作作为函数名称：

```
Material* GetMaterial() const {return m_material;} 
```

# javascript - Umbraco 网络服务返回 405

> ID：14593945
> 
> 赞同：2
> 
> 时间：2013-01-29T23:23:15.710
> 
> 标签：javascript, web-services, umbraco

这可能是一个愚蠢的问题，但这里有

我有一个需要用户登录的 phonegap 应用程序。用户存在于我的 umbraco 安装中。我正在尝试使用此网络服务 /umbraco/webservices/api/MemberService.asmx?op=UserAuthenticates

这是我 phonegap 应用程序中的 javascript

```
var wsUrl = "http://188.228.44.69/umbraco/webservices/api/MemberService.asmx?op=UserAuthenticates";

var soapRequest = 'POST /umbraco/webservices/api/MemberService.asmx HTTP/1.1 \
    Host: 188.228.44.69 \
    Content-Type: text/xml; charset=utf-8 \
    Content-Length: length \
    SOAPAction: "http://umbraco.org/webservices/UserAuthenticates" \
    <?xml version="1.0" encoding="utf-8"?> \
    <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"> \
    <soap:Body> \
        <UserAuthenticates xmlns="http://umbraco.org/webservices/"> \
            <username>'+user+'</username> \
            <password>'+password+'</password> \
        </UserAuthenticates>\
    </soap:Body>\
</soap:Envelope>';

$.ajax({
    type: "POST",
    url: wsUrl,
    contentType: "text/xml",
    dataType: "xml",
    data: soapRequest,
    success: function (msg) {
        console.log(msg.LoginResult);
    },
    error: function (msg) {
        console.log("nay "+msg);
    }
}); 
```

但是当我运行代码时，我得到“OPTIONS MemberService.asmx?op=UserAuthenticates - 405 Method Not Allowed”

有谁知道如何解决这一问题？

我在带有 iis 7 的 windows server 2008 上运行 umbraco

# sql - 查询以获取每位作者最昂贵的书

> ID：14593948
> 
> 赞同：0
> 
> 时间：2013-01-29T23:23:23.870
> 
> 标签：sql, oracle

如何在 Oracle 中编写 sql 查询以获得以下结果：

表“books”有五列：BOOK_ID、BOOK_TITLE、BOOK_AUTHOR、PRICE、PUBLISH_DATE。过去 300 天内每位作者出版的最昂贵书籍的打印清单？

```
select book_author, 
       publish_date 
  from books 
 where max(price) and publish_date between (sysdate-300) and sysdate; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:26:20.733

有几种方法可以实现您的目标。这是一个自排除连接，应该相当有效。它基本上是说以没有更高价格的价格将行归还给我；对于每个作者。这里有一个经过测试的示例：[http ://sqlfiddle.com/#!4/86b22/1](http://sqlfiddle.com/#!4/86b22/1)

```
select 
    b.book_author, b.publish_date, b.price
from 
    books b
    left join books b2
    on b.book_author = b2.book_author
    and b2.price > b.price
    and b2.publish_date between (sysdate-300) and sysdate
where 
    b.publish_date between (sysdate-300) and sysdate
    and b2.book_id is null; 
```

如果您有兴趣，可以在我的博客上找到更多此类查询的示例：http: [//adam-bernier.appspot.com/post/38001/the-self-exclusion-join](http://adam-bernier.appspot.com/post/38001/the-self-exclusion-join)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T23:35:02.197

您也可以使用[分析](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions004.htm#i81407)来完成此操作：

```
select * 
  from (select book_id,
               book_author,
               price,
               publish_date,
               row_number() over (partition by book_author order by price desc) rn
          from books
         where publish_date >= (sysdate - 300)
       )
 where rn = 1; 
```

# c++ - 从 Visual Studio 2012 使用 GnuTLS 3.1.6 时出现“错误 LNK2001：无法解析的外部符号 _gnutls_free”

> ID：14593949
> 
> 赞同：1
> 
> 时间：2013-01-29T23:23:26.033
> 
> 标签：c++, visual-c++, linker-errors, gnutls

我正在尝试在 Visual Studio 2012 中构建一个使用 GnuTLS 的项目。[我从网站](http://www.gnutls.org/download.html)下载了最新的官方 Windows 版本，并通过`lib /def:libgnutls-28.def`在 bin 目录中运行 Visual Studio 命令提示符创建了一个链接库。

添加 a 后`typedef long ssize_t`，代码编译正常，但链接失败并出现以下错误：

```
source_file.obj : error LNK2001: unresolved external symbol _gnutls_free
C:\Path\to\executable.exe : fatal error LNK1120: 1 unresolved externals 
```

我正在调用`gnutls_free`释放一些由库分配和返回的内存。如果我删除对 的调用`gnutls_free`，则项目链接成功。鉴于这`gnutls_free`只是库导出的全局变量（包含函数指针），我不确定为什么访问它会导致对不同符号的未解析引用。我已经证实这`gnutls_free`不是`#define`任何东西。

作为测试，我尝试这样做`gnutls_free_function test = gnutls_free;`也导致链接错误。在 GnuTLS 源代码上运行`grep -w -r _gnutls_free .`什么也不返回，所以我很茫然。

任何让这项工作的想法将不胜感激。

**编辑：**

添加`__declspec(dllimport)`到`gnutls_free`in的声明`gnutls.h`允许链接成功。有没有办法在不维护头文件的自定义版本的情况下实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:00:52.233

似乎没有办法让链接器或导入库自动取消引用 IAT 指向数据项的指针，就像对函数所做的那样（通过一个静态链接到导入函数的模块的小蹦床函数） . 该`__declspec(dllimport)`属性告诉编译器需要执行此取消引用，以便它可以插入代码以隐式执行 IAT 指针的取消引用。这允许访问导出的数据，并且函数允许编译器通过 IAT 指针的间接调用而不是通过调用 trampoline 函数来调用导入的函数。

请参阅 Raymond Chen 的几篇关于`dllimport`函数调用的文章（不幸的是，他没有讨论导入数据）：

*   [调用一个导入的函数，天真的方式](http://blogs.msdn.com/b/oldnewthing/archive/2006/07/21/673830.aspx)
*   [不那么天真的编译器如何调用导入的函数](http://blogs.msdn.com/b/oldnewthing/archive/2006/07/24/676669.aspx)

MS 链接器或导入库没有帮助编译器以“天真”方式获取导入数据的机制 - 编译器需要`__delcspec(dllimport)`提示需要通过 IAT 进行额外的取消引用。`__declspec(dllimport)`无论如何，这一切的重点是，除了使用属性之外，似乎没有其他方法可以导入数据。

如果您想避免修改`gnutls`分布（我可以理解），这是一个相当不完美的解决方法：

您可以创建一个小目标文件，其中只包含一个简单的包装器`gnutls_free()`；因为`gnutls_free()`有一个没有真正依赖的接口，你可以有必要的声明'硬编码'而不是包括`gnutls.h`：

```
typedef void (*gnutls_free_function) (void *);
__declspec(dllimport) extern gnutls_free_function gnutls_free;

void xgnutls_free(void* p)
{
    gnutls_free(p);
} 
```

让您的代码调用`xgnutls_free()`而不是`gnutls_free()`.

不是一个很好的解决方案 - 它需要您的代码调用包装器（因此，如果您要合并可能依赖的 3rd 方代码，这尤其不是很好`gnutls_free()`），但它可能已经足够好了。

# css - mySQL 数据输出到两列

> ID：14593954
> 
> 赞同：1
> 
> 时间：2013-01-29T23:23:48.467
> 
> 标签：css, overflow

我正在尝试将 mySQL 数据库信息输出到两列

像这样

第一类 | 类别 2
类别 3 | 4
类 5 类 | 6
类 7 类 | 8
类 9 类 | 第 10 类

从左到右然后向下

我已经尝试了 CSS 列中的各种方法，但似乎无法让它工作，真的需要一些帮助

任何帮助，将不胜感激

**感谢回复

我目前拥有的代码只有 1 列，在 mysql 部分我很新，但在这里，它需要保持相同的字母顺序

```
<?php 
```

$sql = mysql_query("SELECT * FROM wss_cats WHERE parent_id = 0 ORDER BY cat_order"); $total_cats = mysql_result(mysql_query("SELECT COUNT(*) as Num FROM wss_cats WHERE parent_id = 0"),0); $total_cats2 = 0;

if ($setting['all_wallpapers'] == 1) { $url = CategoryUrl(0, 'all', 1, 'newest');

```
echo '<a href="'.$url.'">'.ALL_WALLPAPERS.'</a>'.$template['categories_menu_seperator']; 
```

}

而($row = mysql_fetch_array($sql)) {

```
$total_cats2 = ($total_cats2 + 1);
$seo_name = seoname($row['name']);

$url = CategoryUrl($row['id'], $row['seo_url'], 1, 'newest');

echo '<a href="'.$url.'">'.$row['name'].'</a>';

if($total_cats2 != $total_cats) {
    echo $template['categories_menu_seperator'];
} 
```

} ?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:27:27.140

你总是可以使用表格

```
<table>
  <tr><td>Category 1</td><td> Category 2</td> </tr>
  <tr><td>Category 3</td><td> Category 3</td> </tr>
  <tr><td>Category 5</td><td> Category 5</td> </tr>
</table> 
```

# apache-flex - 如何在 Flex AIR 中更好地处理桌面设备和移动设备之间的冗余项渲染器组件？

> ID：14593962
> 
> 赞同：0
> 
> 时间：2013-01-29T23:24:42.270
> 
> 标签：apache-flex, air, flex4, itemrenderer, flex-mobile

我有一个使用 Flex AIR 构建的应用程序，它支持桌面和移动设备。

对 List 组件使用 Item Renderer。有一些非常常见的功能，桌面客户端和移动客户端之间的唯一区别是删除按钮的触发方式不同。

在移动设备上，我正在听`TransformGestureEvent.GESTURE_SWIPE event`

在桌面上，当鼠标悬停在项目上时，我将显示一个删除 X 标记。

其他一切都是一样的，只是它处理这两个动作的方式不同。我不想同时为桌面和移动设备渲染一个项目，这会给移动设备带来不必要的开销。因此，如果每个平台都有项目渲染器，那么这将导致两个项目渲染器中冗余代码的额外开销。

有什么办法可以避免冗余代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:19:54.633

这是未经测试的，但它应该工作。这只是使用三元在使用 Capabilities 类的两个类之间进行选择。

```
<s:List itemRenderer="{ ( Capabilitiles.os.toLowerCase().indexOf( 'ios' ) != -1 || Capabilities.os.toLowerCase().indexOf( 'android' ) != -1 ) ? MOBILECLASS : DESKTOPCLASS }" /> 
```

或者，您可以在 AS3 中设置它。

```
private function creationCompleteHandler( e:Event ):void {
    if ( Capabilitiles.os.toLowerCase().indexOf( 'ios' ) != -1 || Capabilities.os.toLowerCase().indexOf( 'android' ) != -1 ) {
        list.itemRenderer = MobileClass;
    }
    else {
        list.itemRenderer = DesktopClass;
    }
} 
```

同样，这是未经测试的。我知道我在尝试设置 itemRenderer 属性时遇到了一些奇怪的问题，所以它可能不喜欢这样。不过，值得一试。

# c# - 序列化/反序列化部分 XML 文件

> ID：14593963
> 
> 赞同：0
> 
> 时间：2013-01-29T23:24:42.650
> 
> 标签：c#, xml, serialization

我正在处理许多大型描述性 XML 文件，我只需要读取最外层的元素、更改值然后再次将其保存。

举个例子 -

```
<Model Name="someModel">
    <Material Name="someMaterial" Effect="someEffect">
        <Texture Name="tex1" Path="somePath"/>
        <Colour Name="colour1" Value="FFF"/>
        <Layer Index="0"/>
        ... many more elements I don't are about
    </Material>
</Model> 
```

我想反序列化上述内容，更改 Material 属性，然后再次将其保存回来。但由于我不关心材料元素（只是它的属性），我宁愿不必将它们全部添加到我反序列化的类中，.. 但是，当我保存时，我仍然需要将它们写回。

目前，我正在这样做，但我想知道是否有更好的方法。

```
namespace WpfApplication9
{
    public class Material
    {
        [XmlAttribute]
        public string Name
        {
            get;
            set;
        }

        [XmlAttribute]
        public string Effect
        {
            get;
            set;
        }
    }

    public class Item
    {
        [XmlAttribute]
        public string Name
        {
            get;
            set;
        }

        public Material Material
        {
            get;
            set;
        }

        public static Item Load(string _path)
        {
            Item item = new Item();
            item.m_doc = new XmlDocument();
            item.m_doc.Load(_path);

            XmlNode rootNode = item.m_doc.FirstChild;

            item.Name = rootNode.Attributes["Name"].InnerText;

            XmlNode materialNode = rootNode.FirstChild;

            item.Material = new Material();
            item.Material.Name = materialNode.Attributes["Name"].InnerText;
            item.Material.Effect = materialNode.Attributes["Effect"].InnerText;

            return item;
        }

        public void Save(string _path)
        {
            XmlNode rootNode = m_doc.FirstChild;

            rootNode.Attributes["Name"].InnerText = Name;

            XmlNode materialNode = rootNode.FirstChild;

            materialNode.Attributes["Name"].InnerText = Material.Name;
            materialNode.Attributes["Effect"].InnerText = Material.Effect;

            m_doc.Save(XmlWriter.Create(_path, new XmlWriterSettings()
            {
                IndentChars = "\t",
                Indent = true
            }));
        }

        XmlDocument m_doc;
    }

    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            Item item = Item.Load("Data.xml");
            item.Name = "Terry";
            item.Save("Data.xml");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:23:08.623

There is the [`XmlAnyElementAttribute`](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlanyelementattribute.aspx). It instructs the deserializer to store unrecognized elements as is. However, depending on your case you might be better served using an XmlReader-XmlWriter filter, or an XmlDocument with XPath.

# php - Cookie 问题 (PHP)

> ID：14593969
> 
> 赞同：0
> 
> 时间：2013-01-29T23:25:10.453
> 
> 标签：php, cookies

我有一个真正奇怪的问题。好吧，在我的网站上，我有一个反馈和评论系统，两者都使用 cookie 来防止人们发送大量评论（大量垃圾邮件），阻止写评论或反馈帖子，例如 30 秒。如果他们禁用 cookie，他们将无法发表评论或反馈。我使用带有 JQuery 脚本的系统，使用 PHP 中的一个进程来不刷新页面。

第一个问题 - 出于某种原因，在本地主机（托管在我家）上它工作正常，阻止了人们。但是在主机上，如果我上传脚本（例如，如果我想做更新），它会停止工作，我可以随意评论，它不会阻止。但它只是在我的电脑上（正如我测试过的，在我兄弟的笔记本上和我的工作正常）我还在 IE、Firefox 和 Chrome 上进行了测试。但几天后（随机，1-4）它开始正常工作。但是，如果我更新脚本（甚至不更改那个脚本），就会支持这个问题。

第二个问题 - 在投票（反馈）和评论系统中，如果“阻止系统”工作正常，它将阻止用户 30 秒。但是，当我提交评论时，第一秒点击非常快，它会提交两次。就像，做 2/3（有时 4）次相同的评论。但是如果我尝试在 30 秒之前再次发表评论，它将被阻止。我如何防止人们重复提交？

这是给您的一些代码，它应该会有所帮助。

*评论.php*

```
if (isset($_COOKIE["AbleCookie"])) //prevent disabled cookies
{
    if (!isset($_COOKIE["time"])) //verify if the cookie time (to block comment) has been set
    {
        if (strlen($Comentario) != 0)
        {
            if (strlen($Comentario <= 500))
            {
              ob_start(); //need this?
              setcookie("time", "anyvalue", time()+$Segundos);
              ob_end_flush();

                if (isset($Usuario))
                {
                    $acharUsuario = "select query";
                    $resultado = mysql_query($acharUsuario, $conexao) or die (mysql_error());
                    $ExisteUsuario = mysql_num_rows($resultado);

                    if ($ExisteUsuario != 0)
                    {
                        $UsuarioID = mysql_result($resultado, 0, 'id_usuario');

                        $InserirComentario = "insert query";
                        mysql_query($InserirComentario, $conexao) or die (mysql_error());

                        $Mensagem = "Correct";
                    }
                }
                else
                {
                    $InserirComentario = "insert query";
                    mysql_query($InserirComentario, $conexao) or die (mysql_error());

                    $Mensagem = "Correct";
                }
            }
            else
              $Mensagem = "<h3>Your comment must has less than 500 characters.</h3>";
        }
        else
          $Mensagem = "<h3>To comment something, you have to write something, right?</h3>";
    }
    else
      $Mensagem = "<h3>You just can do another comment after $Segundos seconds!</h3>";
}
else
  $Mensagem = "Something went wrong! Please, take a look on our <a href='../faq'><b>FAQ</b></a>!";

echo $Mensagem;
$Mensagem = ""; 
```

*不刷新.js*

```
function InserirComentario(){
var uname = $('#PostComentario').val();
var postid = $('#CommentPostID').val();
var dataString = 'post_comentario='+ uname + '&comment_postid='+ postid;

    $.ajax({
        type: "POST",
        url: "sucess/comments.php",
        data: dataString,
        cache: false,
        success: function(result){
                    if (result=='Correct')
                {
                  document.getElementById("PostComentario").value = "";
                }
                    else
                {
                  $("#ComentariosFullPost").html(result);}
                },
        error: function(xhr, ajaxOptions, thrownError){
          alert("Error Status: " + xhr.status + " Thrown Errors: "+thrownError);
        }
    });} 
```

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:37:32.557

首先，不要使用 cookie 来阻止用户状态。它们可以更改或在这种情况下完全删除，从而绕过应用程序阻止输入的能力。

将其切换到快速 PDO 查找以查明用户何时发布 - 如果您需要使用帖子 IP 地址和用户名添加新列 - 并对此进行验证。

或者使用 JavaScript 查询进行 30 秒倒计时以防止初始请求，然后使用 DB 以防止双击按钮。

尽量远离 cookie，但除非你也有，否则它们太容易被操纵，而且在以后的日子里；被盗。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:37:35.213

cookie 不会阻止垃圾邮件发送者。使用时间戳记录 ipaddress 并检查（例如）。你把它弄得太复杂了，对垃圾邮件发送者来说太容易克服了。

这是一个如何检查一个 ipadress 的帖子数量的示例：

```
//check posts
$ip = ip2long($_SERVER['REMOTE_ADDR']);
$q = $db->prepare("SELECT COUNT(id) as num FROM `posts` 
                   WHERE `ipaddress` = ? && time > ?");
$q->execute( array( $ip, strtotime("-30 seconds") ) );

$numberOfPosts = $q->fetch(2);
$numberOfPosts = $numberOfPosts['num'];

if( $numberOfPosts > 0 ){
 //not allowed
} 
```

# javascript - .change() 处理程序使表单需要单击两次才能提交

> ID：14593971
> 
> 赞同：5
> 
> 时间：2013-01-29T23:25:20.967
> 
> 标签：javascript, ajax, jquery

我有一个绑定到它`text area`的处理程序。`.change()`更改后，它会强制 ajax 调用来保存一些数据。在页面的另一部分，还有一个带有提交按钮的表单。

期望的行为是，如果用户在文本区域中键入，然后将鼠标悬停在提交按钮上并单击，则进行 ajax 调用，然后提交表单。

似乎正在发生的是`click`按钮上的触发`change()`事件，但没有发生点击。

有什么推荐的方法吗？

**更新**：

```
$('#content').click(function(event) {
  console.log("content clicked");
});

$('input#order_is_gift').change(function() {
  console.log("change", event);
  f.cart.set('is_gift', $('input#order_is_gift').prop('checked'));
  f.cart.save();
});

$('textarea#order_gift_text').change(function(event) {
  console.log("change", event);
  f.cart.set('gift_text', $('textarea#order_gift_text').val());
  f.cart.save();
}); 
```

**更多信息**：我认为这个问题基本上是这里解决的问题：[模糊事件停止点击事件工作？](https://stackoverflow.com/questions/9335325/blur-event-stops-click-event-from-working)

在最好的情况下，我会阻塞直到 save() 返回，这可能会解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-06T15:24:57.903

用这个-

```
$('#content').mousedown(function(event) {
  console.log("content clicked");
}); 
```

而不是这个——

```
$('#content').click(function(event) {
  console.log("content clicked");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T07:55:40.590

我不确定我是否完全清楚你的问题。

> 期望的行为是，如果用户在文本区域中键入，然后将鼠标悬停在提交按钮上并单击，则进行 ajax 调用

因此，您只希望在单击按钮时触发 ajax？不是一更改现场数据？如果是这种情况，您的更改处理程序中的代码应该在您的单击处理程序中，您根本不需要绑定更改。

至于点击本身没有发生，你的意思是表单没有提交吗？或者你没有打到下面的线？

```
console.log("content clicked"); 
```

如果是后者，您确定“内容”是按钮的 id 吗？如果是表单没有提交，请确保您的点击处理程序没有返回 false

# php - PDO 登录系统出错

> ID：14593973
> 
> 赞同：1
> 
> 时间：2013-01-29T23:25:38.350
> 
> 标签：php

我将所有代码从 mysql 更改为 PDO，但我遇到了一些麻烦。我在这里阅读了很多信息以及 nettus 的教程，但仍然无法弄清楚为什么我的代码不起作用。

下面是 login.php PHP，当我按下登录时，你应该打开我的用户类并开始登录。

```
<?php

    require_once('../global.php');
    require_once('../assets/header.php');
    if (isLogged())
    {
        header("Location: $website_domain");
        exit;
    }

    if (isset($_POST['submit']))
    {
        $username = $_POST['username'];
        if(empty($_POST['password']))
        {
            $password == "";
        }
        else
        {
            $password = md5($_POST['password'].$_POST['username']);
        }

        $object = new User();
        $object->Login($username,$password);

    }

?> 
```

这是我收到的错误： `Fatal error: Call to a member function prepare() on a non-object in /home/astonish/public_html/labs.site.com/lock/includes/classes/user.class.php on line 32`

如果您需要查看我的用户类，请询问，当你们只需要看到错误时，我不想用代码填充它。

用户类.php

```
<?php

    require_once('connection.php');

    // new data
    $ip    = $_SERVER['REMOTE_ADDR'];
    $hour  = date('h');
    $month = date('m');
    $date  = dateTime();

    class User
    {
        private $db;
        public function _construct() 
        {
            $this->db = new Connection();
            $this->db = $this->db->dbConnect(); 
        }

        public function Login($name, $pass) 
        {
            if(empty($name))
            {
                echo "Please input a username";
            }
            elseif(empty($pass))
            {
                echo "Please input a password";
            }
            elseif(!empty($name) && !empty($pass))
            {
                $st = $this->db->prepare("select * from users where username=? and password=?");
                $st->bindParam(1, $name);
                $st->bindParam(2, $pass);
                $st->execute();

                if($st->rowCount() == "1")
                {

                    // Delete failed attempts
                    $st = $db->prepare('DELETE FROM failedLogins WHERE ip = :ip');
                    $st->bindParam(':ip', $ip); // this time, we'll use the bindParam method
                    $st->execute();

                    // Get status of user
                    $result = $st->fetch(PDO::FETCH_ASSOC);
                    $result->status;

                    if ($fetch['status']==1)
                    {
                        $error = 'Your account is pending email.';
                    }
                    else if ($fetch['status']==2)
                    {
                        $_SESSION['main'] = md5(sha1($_SERVER['REMOTE_ADDR'].$_SERVER['HTTP_USER_AGENT'].$fetch['id']));
                        $_SESSION['uid'] = base64_encode($fetch['id']);

                        header("Location: $website_domain");
                        exit;
                    }
                    else if ($fetch['status']==5)
                    {
                        $error = 'Your account is inactive or was denied.';
                    }
                    else
                    {
                        $error = 'Invalid account status.';
                    }
                }
            }
            else
            {   
                $st = $this->db->prepare("INSERT INTO `failedLogins` (ip,hour,month,date) VALUES (:ip,:hour,:month,:date)");
                $st->execute(array(':ip'=>$ip, ':hour'=>$hour, ':month'=>$month, ':date'=>$date));

                echo  'The username or password entered is invalid.';
            }
        }

    }

?> 
```

连接.php

```
class Connection 
    {
        public function dbConnect() 
        {
            return new PDO("mysql:host=localhost;dbname=astonish_viral", $mysql_user, $mysql_pass);
            /*try 
            {
                $db = new PDO("mysql:host=localhost;dbname=astonish_viral", $mysql_user, $mysql_pass);
                echo 'Connected to database';
            }
            catch(PDOException $e)
            {
                echo 'ERROR: ' . $e->getMessage();
            }*/
        }
    } 
```

新错误：现在收到以下错误

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[HY000] [1045] Access denied for user ''@'localhost' (using password: NO)' in /home/astonish/public_html/labs.site.com/lock/includes/classes/connection.php:12 Stack trace: #0 /home/astonish/public_html/labs.site.com/lock/includes/classes/connection.php(12): PDO->__construct('mysql:host=loca...', NULL, NULL) #1 /home/astonish/public_html/labs.site.com/lock/includes/classes/user.class.php(17): Connection->dbConnect() #2 /home/astonish/public_html/labs.site.com/lock/account/login.php(23): User->__construct() #3 {main} thrown in /home/astonish/public_html/labs.site.com/lock/includes/classes/connection.php on line 12 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:40:08.103

我的猜测是您的`PDO`对象（假设您已经创建了一个）不在您的`User::Login()`方法范围内。

在这里进行一些假设，但假设您在其中创建`PDO`对象`global.php`，例如

```
$pdo = new PDO('mysql:host...');
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

你应该在你的`User`班级注册这个，例如

```
class User {
    private $pdo;

    public function __construct(PDO $pdo) {
        $this->pdo = $pdo;
    }

    // etc 
```

然后你可以在方法中使用这个对象`User`，例如

```
public function Login($username, $password) {
    $stmt = $this->pdo->prepare('SELECT ... ');
    $stmt->execute(array(
        'username' => $username,
        'password' => $password
    ));

    // etc
} 
```

创建`User`类时，通过`PDO`构造函数传递实例

```
$object = new User($pdo); // pass $pdo object created in global.php
$object->Login($username, $password); 
```

## 更新

看来您只是缺少`$this->`此行的前缀

```
// Delete failed attempts
$st = $db->prepare(... 
```

应该

```
$st = $this->db->prepare(... 
```

## 附录

我认为你不应该在每次实例化你的`User`类时都创建一个连接。相反，您应该独立创建连接并通过构造函数注入它。这样，您可以重新使用该`PDO`对象。

此外，您的`Connection`课程似乎是多余的。`PDO`如果您只支持一种类型的数据库，则无需将其包装在抽象层中，这是一个很棒的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T00:09:01.360

那是您拼错构造函数的错字。由于您拼错了方法名称，因此永远不会调用“您的”构造函数，因此 $this->db 永远不会被初始化。

在 PHP 中定义构造函数有两种选择：

```
public function __construct() 
```

请注意，作为构造函数需要**两个下划线。**您可以选择的另一个选择是将构造函数方法命名为类

```
public function User() 
```

*请注意，我建议第一种样式，因为如果您更改类名，则不必更改构造函数名称*

* * *

您的代码中还有另一个语法错误。将 User.php 的第 41 行替换为

```
$st = $this->$db->prepare('DELETE FROM failedLogins WHERE ip = :ip'); 
```

（你错过了`$this`）

* * *

您在问题更新中发布了另一个错误。你在哪里定义`$mysql_user`，`$mysql_pass`在 Connection 类？

# c# - 如何将整数值转换为字符串

> ID：14593975
> 
> 赞同：0
> 
> 时间：2013-01-29T23:25:50.750
> 
> 标签：c#, asp.net

我的页面上有一个状态下拉列表，我正在将 ID 保存到 DB 列中，现在在检索值时，我需要检索相应的状态名称。

例子：

我的州是 NY
保存到 DB 的值是 33

当我将值从 DB 拉到屏幕上时，我需要在屏幕上打印 NY。

请问有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T23:30:12.867

如果您的数据库中没有 33，您可以通过执行以下操作从屏幕上已经存在的下拉列表中获取它：

```
Dropdown.Items.FindByValue(33).text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:31:19.973

听起来您需要一个关联容器，例如`Dictionary`：

```
Dictionary<int, string> dictionary = new Dictionary<int, string>();
dictionary.Add(33, "NY");

string value = dictionary[33]; // "NY" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T01:25:53.027

如果要检索相应的州名，请在旁边的 DropDown 控件（那里有一个小箭头）中创建数据源，连接到数据库，然后在表中选择州名列。（如果你有）。所以当你运行它时，它会在你的下拉列表中显示所有的州名。

# css - CSS 性能：是否应该通过资产域提供 .css 文件？

> ID：14593976
> 
> 赞同：7
> 
> 时间：2013-01-29T23:25:58.733
> 
> 标签：css, performance, optimization, subdomain

我正在阅读 CSS Wizardry 的一篇关于 Web 优化的文章。 [http://csswizardry.com/2013/01/front-end-performance-for-web-designers-and-front-end-developers/](http://csswizardry.com/2013/01/front-end-performance-for-web-designers-and-front-end-developers/)

这是一篇很棒的文章。我建议大家阅读它。

文章建议 CSS 处于关键路径，不应通过资产域提供服务。这是因为通过子域提供服务会导致 DNS 查找需要时间。关键路径 = 请求页面和实际看到某些内容之间的时间。

最佳实践要求您应该将大量资产分片到子域上，而不是 CSS。

但是，当我查看 Facebook 或 Apple 等大型网站的源代码时，他们是从子域提供 CSS 吗？他们为什么这样做？

```
<link rel="stylesheet" href="http://static.ak.fbcdn.net/rsrc.php/v2/yz/r/Hwq5_AIg0hW.css" />
<link rel="stylesheet" href="http://static.ak.fbcdn.net/rsrc.php/v2/y-/r/UgmvVXsZ1MP.css" />
<link rel="stylesheet" href="http://static.ak.fbcdn.net/rsrc.php/v2/yY/r/uHqkbF3y3Er.css" />

<link rel="stylesheet" href="http://images.apple.com/global/styles/base.css" type="text/css" />
<link rel="stylesheet" href="http://images.apple.com/v/home/p/styles/home.css" type="text/css" />
<link rel="stylesheet" href="http://images.apple.com/v/home/p/styles/billboard.css" type="text/css" />
<link rel="stylesheet" href="http://images.apple.com/home/styles/home.css" type="text/css" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:47:46.377

鉴于您的计算机 / 局域网 / ISP 缓存了 DNS 查找，并且在许多情况下缓存了诸如 css 文件之类的资源，再加上 Apple 和 facebook 等网站有大量重复流量的事实，它们使用单​​独的域/子域更有意义这意味着浏览器可以在需要时并行下载更多资源。此外，如果这些域/子域是无 cookie 的，那么还有进一步的性能优势。对于像 facebook 和 apple 那样普遍的域，几乎没有 DNS 查找惩罚。

[雅虎](http://developer.yahoo.com/performance/rules.html#external)和[谷歌](https://developers.google.com/speed/docs/best-practices/rtt)的一些有用信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T23:36:16.277

可能是他们优化了前端性能的其他领域，并且拥有各种专用服务器。对于像我这样的上限，我会在前端尽我所能，因为这只是我调整渲染时间，而不是整个团队。

我无法告诉你为什么 Apple 和 Facebook 选择做出他们所做的决定，但我从 CSS Wizardry 付诸实践的一切都对我有所帮助，所以我不打算争论。

看起来 Facebook 从一个单独的域提供服务，而 Apple 从一个子域提供服务。

# ajax - JSON数据到传单的javascript库

> ID：14593979
> 
> 赞同：0
> 
> 时间：2013-01-29T23:26:20.450
> 
> 标签：ajax, json, leaflet, geojson

我已经阅读了很多关于 geojson 的内容，但我想知道是否有其他方法。以下是我添加当前兴趣点的方法：

```
 var map = L.map('map').setView([39.76, -98.5], 4);
 L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png').addTo(map);

var marker = L.marker([33.1958, -117.3786]).addTo(map);

marker.bindPopup("<b>Trainers</b><br>Oceanside, CA.").openPopup();
var marker = L.marker([38.9125, -75.4283]).addTo(map);
marker.bindPopup("<b>Trainers</b><br>Milford, DE.").openPopup();
var marker = L.marker([41.26129, -95.93262]).addTo(map);
marker.bindPopup("<b>Trainers</b><br>Omaha, NE.").openPopup();
var marker = L.marker([25.77516, -80.2002]).addTo(map);
marker.bindPopup("<b>Trainers</b><br>Miami, FL.").openPopup();

//map.on('moveend', onMapMove);

//On mouse over will display the coordinates
map.on('mousemove', function (e) {
        var latlng = e.latlng;
        document.getElementById('latlong').innerHTML = latlng;}, 
    this); 
```

这是我的ajax：

```
 $(document).ready(function(){ 
    $.ajax({
      type: 'POST',     
      dataType: "json",
      url: '<?php echo matry::base_to('tests/map_it');?>',
      success: function (data) 
      {
         alert($.parseJSON(data[0]).id);
        $('#alerts').html(data);
        data[0].id

      }

      });
    }); 
```

这是我的php：

```
$mapit = sql::results("Select * from event.ACS.trainer where inactive is null or inactive=0");
foreach ($mapit as $row)
{
    $return[] = json_encode($row, JSON_FORCE_OBJECT);
}
echo json_encode($return); 
```

我的 json 对象正在返回我需要的所有正确数据。我现在坚持在他们的 javascript 库中实现我的兴趣点。

这是我的 json 输出：

```
"{"id":19385,"first":"KIRLY","last":"MAELLI","trainer_address1":"19 NE 111TH COT","trainer_address2":null,"CITY":"MIMI","STATE":"FL","trainer_zip":"379","trainer_phone":"(-6490","trainer_fax":null,"trainer_cell":"(-6490","website_trainer_id":115,"trainer_email":"MOBA@YAHOO.COM","trainer_group":"","inactive":null}",
"{"id":19386,"first":"CHY","last":"MEH","trainer_address1":"1014 ROAD","trainer_address2":null,"CITY":"MIORD","STATE":"DE","trainer_zip":"63","trainer_phone":"","trainer_fax":null,"trainer_cell":"(-8811","website_trainer_id":118,"trainer_email":"CAH@AOL.COM","trainer_group":"","inactive":null}", 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:29:54.667

您可以将 sql 查询的结果转换为服务器端的 GeoJSON。这将是一个好主意，因为任何理解 GeoJSON 的客户端都可以使用它，Leaflet 将为您解释数据。

创建 GeoJSON 特征集合并不比创建“普通” JSON 复杂。有关示例，请参阅[规格。](http://www.geojson.org/geojson-spec.html#examples)

```
{
   "type": "FeatureCollection",
   "features": [
       { "type": "Feature", 
         "properties": { "title": "Trainers", "placename": "Oceanside, CA."}, 
          "geometry": { "type": "Point", "coordinates": [ -117.3786, 33.1958 ] } },
       { "type": "Feature", 
         "properties": { "title": "Trainers", "placename": "Milford, DE."}, 
         "geometry": { "type": "Point", "coordinates": [ -75.4283, 38.9125 ] } }
    ]
} 
```

（请注意，与传单相比，纬度/经度对的顺序相反）

在 PHP 中，您需要填充数组和字典以及`json_encode`它们。未经测试的猜测（但我怀疑它还很遥远）：

```
array('type' => 'FeatureCollection', 
      'features' => array(
           array( "type" => "Feature",
                  "properties" => array("title" => "Trainers", 
                                        "placename" => "Oceanside, CA."),
                  "geometry" => array( "type" => "Point", 
                                  "coordinates" => array( -117.3786, 33.1958 ))),
           array( "type" => "Feature",
                  "properties" => array("title" => "Trainers", 
                                        "placename" => "Milford, DE."),
                  "geometry" => array( "type" => "Point", 
                                  "coordinates" => array( -75.4283, 38.9125 )))
       )) 
```

在 Leaflet 中创建 GeoJSON 层时，提供一个`onEachFeature`函数来创建包含特征数据的弹出窗口：

```
function onEachFeature(feature, layer) {
    layer.bindPopup("<b>"+feature.properties.title +
                    "</b><br>"+feature.properties.placename);
} 
```

（但或者，您可以保持服务器代码不变，并在您的 ajax 调用的成功函数中创建标记。）

不确定我是否说得很明显，但是当您想调试它时，在浏览器中使用开发工具栏会有所帮助。

# c++ - 通过字段的键作为字符串从任何结构或元组中获取迭代器

> ID：14593983
> 
> 赞同：0
> 
> 时间：2013-01-29T23:26:38.737
> 
> 标签：c++, boost, struct, iterator, tuples

你知道 boost, poco, ... 中的一个库，它有一个带有签名的函数，例如：

```
template <typename T> auto vectorize(const std::vector<std::string> & mask, T & t) -> T::iterator 
```

可以像这样使用：

```
struct A {double x; double y; double z;};
auto a = A();
auto it = vectorize({"x","z"}, a);
//and here doing perturbations and increments on a; ideally it is for passing it to another function 
```

我正在重新设计执行此类操作的现有代码（使用在结构内部进行序列化的方法），但我不得不承认我们的版本非常混乱：/

您对此有抽象的想法并使用元组吗？我目前正在尝试使用枚举来映射元组的字段。

我很确定有人为这种自反容器迭代问题写了一些聪明的东西。（我希望 boost::fusion 但它只按类型过滤，否则我错过了一个页面）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:01:18.423

C++ 没有任何神奇的方法可以像许多 VM 语言那样很好地做到这一点。

通常你会使用类似[boost serialization](http://www.boost.org/doc/libs/1_52_0/libs/serialization/doc/index.html)的东西。目标是您只需编写一个简单的映射函数，其余的只是配置策略。

```
#include <boost/archive/text_oarchive.hpp>
#include <boost/archive/text_iarchive.hpp>

class gps_position
{
public:
    int degrees;
    int minutes;
    float seconds;
    gps_position(){};
    gps_position(int d, int m, float s) :
        degrees(d), minutes(m), seconds(s)
    {}
};

namespace boost {
namespace serialization {

template<class Archive>
void serialize(Archive & ar, gps_position & g, const unsigned int version)
{
    ar & g.degrees;
    ar & g.minutes;
    ar & g.seconds;
}

} // namespace serialization
} // namespace boost 
```

或者，您可以通过一些简单的东西获得一些牵引力，假设您总是序列化双打或为`std::tuple`或`boost::tuple`不使用 c++11 编写静态访问者。

# c++ - std::function 的问题

> ID：14593995
> 
> 赞同：1
> 
> 时间：2013-01-29T23:27:20.873
> 
> 标签：c++, function, compiler-errors, std

这就是我的代码设置方式：

```
class SomeClass
{
public:
    std::function<void()> someFunction;
} 
```

另一个类.h

```
class AnotherClass
{
public:
    void anotherFunction();
    void yetAnotherFunction();
    SomeClass someClass;
} 
```

另一个类.cpp

```
void AnotherClass::anotherFunction()
{
    std::cout << "triggerd" << std::endl;
}

void AnotherClass::yetAnotherFunction()
{
    someClass.someFunction = &AnotherClass::anotherFunction; //here
} 
```

这导致了编译时错误：`error C2664: 'std::_Func_class<_Ret>::_Set' : cannot convert parameter 1 from '_Myimpl *' to 'std::_Func_base<_Rx> *'`经过一些研究，我发现这是来自 VS2012（[源代码](https://stackoverflow.com/questions/13096162/stdfunction-not-compiling-in-vs2012)）的错误。因此，我将标有“此处”的行更改为`someClass.someFunction = std::mem_fn(&AnotherClass::anotherFunction);`就像链接中的解决方案一样。但是，现在这会导致另一个编译时错误：`error C2562: 'std::_Callable_obj<_Ty>::_ApplyX' : 'void' function returning a value`. 因此，根据我对该错误的研究，这意味着有一个声明为 void 的函数返回一个值。这就是我卡住的地方，因为我 100% 确定我没有任何函数返回不应该加上的值，而且在更改标记为“here”的行之前我没有收到此错误。我不确定这是否是 VS2012 中的另一个错误，但错误确实说：`std::_Callable_obj<_Ty>::_ApplyX`这显然不是我的功能。

有没有人知道为什么会发生这种情况以及我如何解决它？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T23:29:59.787

您正在将一个非静态成员函数分配给一个`function`期望返回`void`并且不接受任何参数的对象。非静态成员函数有一个隐式的第一个参数，在这种情况下它的类型为`AnotherClass*`. 您需要一个`AnotherClass`实例来绑定到成员函数。

在您的情况下，您可以将其绑定到`this`指针：

```
void AnotherClass::yetAnotherFunction()
{
    someClass.someFunction = std::bind(&AnotherClass::anotherFunction, this);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T23:44:47.003

如果你想绑定成员函数调用`this->anotherFunction()`，那么说：

```
somceClass.someFunction = std::bind(&AnotherClass::anotherFunction, this); 
```

# jquery - Coffescript/jQuery 函数仅在原型中可用

> ID：14593997
> 
> 赞同：0
> 
> 时间：2013-01-29T23:27:23.307
> 
> 标签：jquery, coffeescript

我正在尝试创建一个可用于每个对象的动画函数，因此在我的代码中我这样定义它：

```
$.fn.closeCurtain = ->
    $('.curtain').animate
      height: '65%'
      500
      -> $(this).animate
        height: '0%'
        500 
```

然后我想在一个不起作用的点击事件上调用它，但是该函数在对象原型中可用。

```
$ ->
  $('.mainMenu ul li a').on('click', -> $(this).closeCurtain()) 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:30:34.157

虽然使用胖箭头是正确的，但 jQuery 确实有一个解决方案，[`$.proxy`](http://api.jquery.com/jQuery.proxy/)

```
.on('click', $.proxy($(this), 'closeCurtain')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:39:32.323

解决了。

我不得不使用总形式`=>`来引用当前的`this`.

```
.on('click', => $(this).closeCurtain()) 
```