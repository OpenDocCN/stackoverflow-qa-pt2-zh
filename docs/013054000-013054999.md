# StackOverflow 问答 13054000-13054999

# iphone - 调用 setEditing 时自定义 UITableViewCell 调整标签大小

> ID：13054002
> 
> 赞同：0
> 
> 时间：2012-10-24T16:57:26.210
> 
> 标签：iphone, ios, cocoa-touch

好的，这是一张图片：

![在此处输入图像描述](../Images/d950592ad06fd890a964d863492d562d.png)

我有带有 UILabel 的自定义 UITableViewCell。

很明显我应该在 -setEditing 方法中调整我的自定义 UILabel 的大小，但是如何准确计算调整它的大小呢？是否有有效的方法来调整重用单元格的大小？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:03:33.107

`setEditing`如果您有正确的自动调整掩码，则无需在方法中执行任何操作：

```
label.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleRightMargin; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:04:59.623

所以第一个问题是你如何将标签添加到`UITableViewCell`? 如果您将其添加到单元格中`view`，那么这就是您的问题开始的地方。

`UITableViewCell`s`contentView`有财产。这`contentView`负责在单元格进入编辑模式时调整其内容的大小。它知道如何做到这一点。单元格的`view`属性没有。因此，首先您需要将您的`UILabel`作为单元格的子视图添加`contentView`到`initWithStyle:`. 但是，单元格实际上并不知道它有多大`initWithStyle:`，因此您可以将标签的框架设置在`layoutSubviews`.

至于调整单元格的大小，您可以在`tableView:heightForRowAtIndexPath:`

在这种方法中，您可以检查`indexPath`行的高度并适当地配置高度。

# email - 如何自定义 OOTB 工作流电子邮件

> ID：13054009
> 
> 赞同：1
> 
> 时间：2012-10-24T16:57:42.557
> 
> 标签：email, workflow

如何对所有 OOTB 工作流相关的电子邮件进行简单的格式类型自定义？

我发现许多 Sharepoint 2010 之前的帖子表明 OOTB 工作流电子邮件实际上是“警报”，因此可以使用相同的技术自定义 OOTB 工作流电子邮件：制作 alerttemplates.xml 的自定义版本，甚至使用 IAlertNotifyHandler拦截所有警报电子邮件。但是，OOTB 工作流和工作流任务电子邮件似乎不受我的 customalerttemplates.xml 文件更改的影响（我确实遵循 stsadm updatealerttemplates、iisreset 和计时器服务重新启动）。

这是我用作自定义警报的指南：http: [//blogs.msdn.com/b/sharepointdeveloperdocs/archive/2007/12/14/how-to-customizing-alert-emails-using-ialertnotificationhandler.aspx](http://blogs.msdn.com/b/sharepointdeveloperdocs/archive/2007/12/14/how-to-customizing-alert-emails-using-ialertnotificationhandler.aspx)

我错过了什么？工作流电子邮件是否有单独的模板？可以自定义 OOTB 工作流电子邮件吗？

谢谢！

杰夫

# java - 即使满足条件，也会出现不正确的错误

> ID：13054012
> 
> 赞同：0
> 
> 时间：2012-10-24T16:57:53.837
> 
> 标签：java, inputstream, outputstream, if-statement

我正在尝试根据特定操作后网页上显示的文本显示消息。如果网页包含文本**MESSAGE HAS BEEN SUBMITTED SUCCESSFULLY**，我想在屏幕上打印 Message sent successfully 否则 MESSAGE SENDING FAILED。一切都很好，但只有一件事。

```
PrintWriter printWriter = new PrintWriter(new OutputStreamWriter(sendConnection.getOutputStream()), true);
        printWriter.print(sendContent);
        printWriter.flush();
        printWriter.close();
        //Reading the returned web page to analyse whether the operation was sucessfull

        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(sendConnection.getInputStream()));

        StringBuilder SendResult = new StringBuilder();
        String line;

        while ((line = bufferedReader.readLine()) != null) {
            SendResult.append(line);
        }

if (SendResult.toString().contains("MESSAGE HAS BEEN SUBMITTED SUCCESSFULLY")) {
            System.out.println("Message sent to " + phoneNumber + " successfully.");
        } else {
            System.err.println("Message could not send to " + phoneNumber + ". Also check login credentials");
        }
        bufferedReader.close(); 
```

问题是，即使网页包含文本**MESSAGE HAS BEEN SUBMITTED SUCCESSFULLY**，条件总是`ELSE`部分显示 MESSAGE SENDING FAILED 但这不是真的，因为消息已经发送并且我在网页上看到消息已**成功提交**.

谁能告诉我我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:33:34.693

试试这个：

```
if (SendResult.toString().trim().contains("MESSAGEHASBEENSUBMITTEDSUCCESSFULLY")) 
```

# ios - 如何在 iOS 中将字符串复制到剪贴板（粘贴板）？

> ID：13054014
> 
> 赞同：0
> 
> 时间：2012-10-24T16:57:57.513
> 
> 标签：ios, cocoa-touch, copy-paste, uipasteboard

如何将字符串复制到 iOS 的剪贴板上？我在文档中搜索了“剪贴板”，但没有找到任何结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T16:59:31.100

像这样：

```
 [UIPasteboard generalPasteboard].string = @"hello!"; 
```

Apple 不使用“剪贴板”一词；在 iOS 中，它是一个“粘贴板”，您可以拥有多个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-12T11:39:39.353

在`Swift 3.0`下面的代码中将有助于复制文本`PasteBoard`

```
let pasteBoard = UIPasteboard.general
pasteBoard.string = "Lorem Ipsum" 
```

# python - 有没有办法压缩测试用例？

> ID：13054016
> 
> 赞同：1
> 
> 时间：2012-10-24T16:58:14.527
> 
> 标签：python

假设我有这样的代码：

```
if something == 0:
    return something
if something_else = x:
    return something_else 
```

为了不在这里弄乱，假设我还有 10 个这样`if`的 s。我必须这样做还是有更快、更简洁的方法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:10:52.427

字典就是答案

```
conditions = {
      key1: value1,
      key2: value2,
    } 
```

值甚至可能是对函数的引用，您的答案是

```
my_value = conditions[my_key] 
```

# php - 根据txt从Mysql中删除记录

> ID：13054017
> 
> 赞同：0
> 
> 时间：2012-10-24T16:58:14.853
> 
> 标签：php, mysql

我有一个带有电子邮件地址的简单 txt 文件。我想检查这些地址是否在我的数据库中，如果是：删除它们。

txt 文件不是 csv 格式，但每个电子邮件地址都换行。我想知道最好的方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:08:05.160

脚步：

此正则表达式将匹配一个新行 `([^\n]*\n+)+`

在每行后添加一个逗号（或用逗号替换 NEWLINE），以便列表变为 `email1@com.com email2@com.com email3@com.com`

至`email@com.com,email2@com.com,email3@com.com`

在开头和结尾添加括号： `(email@com.com,email2@com.com,email3@com.com)`

添加以下sql：

`DELETE FROM database.schema.table WHERE email_address IN (email@com.com,email2@com.com,email3@com.com);`

执行`SQL`.

您可以从 php 或直接在数据库中执行查询，请保留备份，否则您可能会搞砸……希望这会有所帮助……祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:16:17.143

您正在寻找的功能是[fgets()](http://www.php.net/manual/en/function.fgets.php)。

```
<?php
$emails = array();

if( ! $fh = fopen('file.txt', 'r') ) { die('could not open file'); }
while( $buffer = fgets($fh, 4096) ) {
    $emails[] = $buffer;
}
fclose($fh);

foreach($emails as $email) {
    $query = sprintf("DELETE FROM table WHERE email LIKE '%s'", $email);
    // do the query
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T17:38:46.960

```
<?php
$file = file("emails.txt");
foreach ($file as $email) {

      $query = sprintf("DELETE FROM table WHERE email LIKE '%s'", $email);
      # execute query
}  

?> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-24T16:59:38.563

一次阅读一封电子邮件，然后使用该值运行删除查询。不要使用`mysql_query`（除非您信任来自文本文件的输入，但即便如此，请只使用较新的库）。如果记录在那里，它们将被删除，如果没有什么大不了的，什么也不会发生。完毕。

# c# - 如何在计时器滴答时评估文本块绑定

> ID：13054026
> 
> 赞同：0
> 
> 时间：2012-10-24T16:58:51.177
> 
> 标签：c#, silverlight, windows-phone-7, timer

如何在 xaml 数据透视页面的用户控件上的文本块中绑定计时器滴答计数。我曾经从类中获取绑定值，更改的属性不起作用，它返回空值。

```
public class sample
{
int timercount = 0;
public int Timercount
{
    get
    {
        return timercount;
    }
    set
    { 
        timercount = value;
        base.OnPropertyChanged("Timercount");
    }
 }
}

public class ViewModelBaseEx : INotifyPropertyChanged
{
public event PropertyChangedEventHandler PropertyChanged;
protected void OnPropertyChanged(string name)
{
     PropertyChangedEventHandler handler = PropertyChanged;
     if (handler != null)
     {
        handler(this, new PropertyChangedEventArgs(name));
     }
} 
```

}

xml：

```
<TextBlock Height="34" Name="txtTimer" Width="57" TextAlignment="Left" FontSize="20" TextWrapping="Wrap" Text="{Binding Timercount,Mode=TwoWay}" VerticalAlignment="Top" /> 
```

这是我在 xaml 页面上设置的绑定

```
 TimerPageModel mainPage = new TimerPageModel();

            Binding binding = new Binding("Timercount");
            binding.Source = mainPage;
            binding.Mode = BindingMode.TwoWay;
            TextBlock tblk = qplayer.txtTimer;
            BindingOperations.SetBinding(tblk, TextBlock.TextProperty, binding); 
```

qplayer 是一个用户控件，TimerPageModel 是一个继承 ViewModelBaseEx PropertyChanged 的​​视图模型正在工作，但用户控件文本块中没有任何绑定

绑定适用于计时器滴答声

```
 public class TimerPageModel : ViewModelBaseEx
    {
        private DispatcherTimer timer = new DispatcherTimer();
        private Random random = new Random();
        static int tmrRnd = 30;
        public TimerPageModel()
        {
            timer.Interval = new TimeSpan(0, 0, 5);
            timer.Tick += OnTimer;
            timer.Start();
        }
    }
        int timercount = 0;
        public int Timercount
        {
            get
            {
                return timercount;
            }
            set
            {
                timercount = value;
                base.OnPropertyChanged("Timercount");
            }
        }
        void OnTimer(object sender, EventArgs eventArguments)
        {
            //CurrentValue = random.Next(100);

            Timercount = tmrRnd--;
        } 
```

# php - 在 ZenCart 的地址簿条目上执行连接

> ID：13054030
> 
> 赞同：0
> 
> 时间：2012-10-24T16:58:58.623
> 
> 标签：php, mysql, join, zen-cart

我有以下代码：

```
$referrers_query = 
select c.customers_id, c.customers_firstname, c.customers_lastname, 
c.customers_email_address, c.customers_telephone, a.entry_street_address, 
a.entry_city, a.entry_state, a.entry_country_id, n.countries_name, 
a.entry_zone_id, a.entry_postcode, r.referrer_customers_id, 
r.referrer_key, r.referrer_homepage, r.referrer_approved, 
r.referrer_banned, r.referrer_commission from  customers as c,  
address_book  as a, referrers  as r, countries as n  
where a.entry_country_id = n.countries_id and c.customers_id = r.referrer_customers_id 
and a.address_book_id = c.customers_default_address_id  order by c.customers_lastname; 
```

我想做的不是进行`WHERE`子句连接，而是嵌套连接。

上面提到了五个数据库表。客户、地址簿、推荐人、国家、地区。

但我不知道从哪里开始。这样做的主要问题是使用上述语句，我似乎从选择中丢失了一些记录。这是因为有些记录使用 'zone_id' = 0。对此的解决方法是简单地为 0 创建一个空白记录，但除此之外，我可以使用连接来解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:36:17.840

用显式`JOIN`s 编写的查询：

```
SELECT c.customers_id, c.customers_firstname, c.customers_lastname, 
    c.customers_email_address, c.customers_telephone, a.entry_street_address, 
    a.entry_city, a.entry_state, a.entry_country_id, n.countries_name, 
    a.entry_zone_id, a.entry_postcode, r.referrer_customers_id, 
    r.referrer_key, r.referrer_homepage, r.referrer_approved, 
    r.referrer_banned, r.referrer_commission
FROM customers AS c
    JOIN referrers AS r ON (c.customers_id = r.referrer_customers_id)
    JOIN address_book AS a ON (a.address_book_id = c.customers_default_address_id)
    JOIN countries AS n ON (a.entry_country_id = n.countries_id)
ORDER BY c.customers_lastname 
```

如果您还想从区域表中获取信息（如果存在匹配项），则需要添加`LEFT JOIN`如下内容：

```
SELECT c.customers_id, c.customers_firstname, c.customers_lastname, 
    c.customers_email_address, c.customers_telephone, a.entry_street_address, 
    a.entry_city, a.entry_state, a.entry_country_id, n.countries_name, 
    a.entry_zone_id, a.entry_postcode, r.referrer_customers_id, 
    r.referrer_key, r.referrer_homepage, r.referrer_approved, 
    r.referrer_banned, r.referrer_commission
FROM customers AS c
    JOIN referrers AS r ON (c.customers_id = r.referrer_customers_id)
    JOIN address_book AS a ON (a.address_book_id = c.customers_default_address_id)
    JOIN countries AS n ON (a.entry_country_id = n.countries_id)
    LEFT JOIN {zones table name} AS z ON (z.{zones id column name} = a.entry_zone_id)
ORDER BY c.customers_lastname 
```

并将您要选择的列添加到查询的顶部。A`LEFT JOIN`总是从左表（列出的第一个）返回结果，如果右表中没有匹配项，它会`NULL`为右表的列返回 s。

# python - 放大和缩小时保持文本大小相同

> ID：13054032
> 
> 赞同：1
> 
> 时间：2012-10-24T16:59:09.040
> 
> 标签：python, text, svg, zooming

我创建了带有线元素的 svg 文件，每条线的中点代表线名的坐标（svg 文本元素）。放大和缩小时保持这些文本元素大小的最佳方法是什么，但它们的位置需要始终位于行的中间？

在我的 python GUI 中，我像这样缩放 svg：

```
def wheelEvent(self, event):
    factor = 1 + 0.1 * event.delta() / 120.0
    self.scale(factor, factor)
    event.accept() 
```

我在哪里 画我的 svg 像这样`self`：`QtGui.QGraphicsView`

```
self.setScene(QtGui.QGraphicsScene(self))
self.setTransformationAnchor(QtGui.QGraphicsView.AnchorUnderMouse)
self.scene().addItem(QtSvg.QGraphicsSvgItem(QtCore.QFile(pathToMySVG).fileName())) 
```

# android - 如何在Android中存储长文本？

> ID：13054041
> 
> 赞同：10
> 
> 时间：2012-10-24T16:59:47.000
> 
> 标签：android, string, localization, textview

我通常在`strings.xml`for `TextView`s 和其他小部件中使用短消息。我在哪里可以存储长文本？如果我需要存储大量用户指南并进行本地化怎么办？

```
<string name="instruction_will_be_soon">Lorem Ipsum ist ein einfacher Demo-Text für die Print- und Schriftindustrie. Lorem Ipsum ist in der Industrie bereits der Standard Demo-Text seit 1500, als ein unbekannter Schriftsteller eine Hand voll Wörter nahm und diese durcheinander warf um ein Musterbuch zu erstellen. Es hat nicht nur 5 Jahrhunderte überlebt, sondern auch in Spruch in die elektronische Schriftbearbeitung geschafft (bemerke, nahezu unverändert). Bekannt wurde es 1960, mit dem erscheinen von "Letraset", welches Passagen von Lorem Ipsum enhielt, so wie Desktop Software wie "Aldus PageMaker" - ebenfalls mit Lorem Ipsum. Glauben oder nicht glauben, Lorem Ipsum ist nicht nur ein zufälliger Text. Er hat Wurzeln aus der Lateinischen Literatur von 45 v. Chr, was ihn über 2000 Jahre alt macht. Richar McClintock, ein Lateinprofessor des Hampden-Sydney College in Virgnia untersuche einige undeutliche Worte, "consectetur", einer Lorem Ipsum Passage und fand eine unwiederlegbare Quelle. Lorem Ipsum komm aus der Sektion 1.10.32 und 1.10.33 des "de Finibus Bonorum et Malorum" (Die Extreme von Gut und Böse) von Cicero, geschrieben 45 v. Chr. Dieses Buch ist Abhandlung der Ethiktheorien, sehr bekannt wärend der Renaissance. Die erste Zeile des Lorem Ipsum, "Lorem ipsum dolor sit amet...", kommt aus einer Zeile der Sektion 1.10.32.</string> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T17:12:48.577

我不认为 strings.xml 有限制，所以最好将最长的字符串存储在那里。这确实是 Android 指定的唯一存储字符串的位置，因此如果您想真正使用不同的存储机制，则必须从文件或数据库中加载字符串。

# php - mysql_close(): 5 不是第 4 行 C:\wamp\www\Includes\footer.php 中的有效 MySQL-Link 资源

> ID：13054044
> 
> 赞同：0
> 
> 时间：2012-10-24T17:00:05.343
> 
> 标签：php, mysql, hyperlink

一切正常，它只是决定停止工作，它毁了我的整个项目，我处于停滞状态。

这是错误：

> mysql_close(): 5 不是第 4 行 C:\wamp\www\Includes\footer.php 中的有效 MySQL-Link 资源

这是`footer.php`

```
<?php
//close connection
if (isset($dbh)); {
    mysql_close($dbh);
}
?> 
```

这是`connect.php`

```
//set constants
require("quick.php");

//database connection
$dbh = mysql_connect(DB_SERVER, DB_USER, DB_PASS);
if (!$dbh) {  //check connection
        die("Cannot conect! to database ");
    }   

//selecting database
$db_select = mysql_select_db(DB_NAME, $dbh);
if (!$db_select) { //check connection
        die("Cannot connect to database ");
    }
?> 
```

基本上每当我尝试退出 mysql 时，都会显示此错误。不久前一切都很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:05:46.897

试试这个：

```
if (isset($dbh) && is_resource($dbh)) {
    mysql_close($dbh);
} else {
    mysql_close();
} 
```

从手册：

> mysql_close() 关闭与指定链接标识符关联的 MySQL 服务器的非持久连接。如果未指定 link_identifier，则使用最后打开的链接。

也许他的联系很少..谁知道..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:46:50.637

某处，在您的页面中，有一个分配`$dbh = 5;`覆盖您的数据库连接。这就是错误的原因。在数据库打开和页脚之间搜索对该变量的任何分配，您就发现了问题。

* * *

注意：我不会像这里的其他评论者*那样*担心连接是打开的，因为如果它不是持久连接，它无论如何都会在脚本末尾关闭，所以我不明白那会怎样毁了你的整个项目。您的代码尝试在页脚处关闭它，这与让它自行关闭没有太大区别。从[手册](http://php.net/mysql_close)：

> 通常不需要使用 mysql_close()，因为非持久打开的链接会在脚本执行结束时自动关闭。另请参阅[释放资源](http://www.php.net/manual/en/language.types.resource.php#language.types.resource.self-destruct)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-24T17:04:42.900

`mysql_*`如果您不指定连接，所有功能将假定“您打开的最后一个连接”。这很有用，因为您不必像对其他库那样跟踪它。`$dbh`很可能在这里您正在某处覆盖变量。就我个人而言，我会使用一个变量，就像我完全使用一个变量一样`$_connection`。

所以就`mysql_close()`足以关闭连接。如果您一次处理多个连接，则只需要担心这种事情。

# web-services - 是否可以使用 Spring Security – Kerberos Extension 对受 Kerberos 保护的服务进行肥皂调用？

> ID：13054049
> 
> 赞同：1
> 
> 时间：2012-10-24T17:00:24.793
> 
> 标签：web-services, spring, security, kerberos, spnego

是否可以使用 Spring Security – Kerberos Extension 对受 Kerberos 保护的服务进行肥皂调用？我们有 Spring-ws 的 Wss4jSecurityInterceptor ，但是如果肥皂客户端想要发送 kerberos 令牌，我们没有任何 kerberosSecurityInterceptor 吗？有没有办法使用 Spring Security – Kerberos 扩展来做到这一点？请指教？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:17:47.637

不，该扩展名仅适用于 Web 身份验证。

# php - Codeigniter 表单验证集消息

> ID：13054050
> 
> 赞同：2
> 
> 时间：2012-10-24T17:00:26.663
> 
> 标签：php, codeigniter

一个快速的家伙，我分别对用户名和电子邮件输入字段有相同的（ish）表单验证规则，我需要单独设置规则的消息。我怎么做？

```
**CODE**

$this->form_validation->set_rules('username','Username', 'trim|required|xss_clean|min_length[2]|is_unique[users.username]');
$this->form_validation->set_rules('email','Email', 'trim|required|valid_email|xss_clean|is_unique[users.email]'); 
```

我试图在这里覆盖“is_unique”的消息，

```
$this->form_validation->set_message('is_unique','Username taken'); 
```

我如何设置电子邮件的消息？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T20:37:12.673

```
$this->form_validation->set_message('is_unique', '%s is taken.'); 
```

%s 替换为您在设置规则时应用的“人名”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:07:26.657

抱歉我的错误，我使用 CI 的扩展 Form_validation 并且有 3 个字段:)...正如@Rick Calder 所说的唯一方法是使用 %s 这将等于输入的姓名/电子邮件..

```
$this->form_validation->set_message('is_unique', '%s is taken'); 
```

# less - 观看具有多个导入的 LESS 文件，仅编译单个文件

> ID：13054052
> 
> 赞同：1
> 
> 时间：2012-10-24T17:00:32.153
> 
> 标签：less, watch

我正在尝试找到一个好的解决方案来观看单个 LESS 文件，其中包含大量导入以进行更改（包括导入文件中的更改，但仅编译主文件）。

我已将 LESS 拆分为单独的文件作为“模块”，以使其更易于管理，而主 LESS 文件只是一堆导入。但是，我查找的每个解决方案都是为了观察更改而不必每次都手动编译，要么编译目录中的每个 LESS 文件，要么不识别导入文件中的更改。

所以我正在寻找一种可以观察所有LESS文件更改的解决方案，但如果发生更改，只会编译主LESS文件。如果有人以前做过这样的事情，这将对我有很大帮助，而不必从头开始制作。

**更新：** 我发现了这个[https://github.com/jonycheung/Dead-Simple-LESS-Watch-Compiler](https://github.com/jonycheung/Dead-Simple-LESS-Watch-Compiler)。默认情况下，它会检查并编译目录中的每个 less 文件。修改起来非常简单，可以查看所有较少的文件并在检测到更改时仅编译主文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:06:28.037

LESS 1.3.1 有一个名为`@import-once`. 而不是`@import`，使用`@import-once`.

它没有很好的记录，但这里是[变更日志](https://github.com/cloudhead/less.js/blob/master/CHANGELOG.md)和[问题，讨论，更多](https://github.com/cloudhead/less.js/issues/212)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T17:51:49.773

我不知道你是否在使用 Coffeescript，但由于 Less 依赖于 Node，你已经安装了它。我创建了以下 Cakefile，它应该很容易转换为纯 JavaScript 文件。它也应该很容易修改多个文件。

```
option '-c', '--lessFile [main Less Filename]', 'The single file to be compiled into the stylesheet, it should import any files it needs'

task 'watch-less', 'Compile Less scripts on the fly during Development', (opts) ->
  less = options.less

  watchers = []

  compile = () ->
    w.close() for w in watchers
    exec "lessc #{less} #{less.replace /\.less$/, ".css"}"
    watch()

  watch = () ->
    exec "lessc -M #{less} -", (err, stdout, stderr) ->
      throw new Error err if err
      watchers = (fs.watch(f, compile) for f in stdout.trim().split(' ').splice(1))

  compile() 
```

通知和免责声明：

*   除了 less 没有外部依赖项。
*   当心`fs.watch`，而不是跨平台

# qt - 如何结合自己的消息循环和Qt事件循环？

> ID：13054053
> 
> 赞同：1
> 
> 时间：2012-10-24T17:00:34.907
> 
> 标签：qt, signals-slots, qthread

我有一个派生自`QThread: class MyClass : public QThread`. 在运行方法中，我有“我自己的”消息循环：

```
run() { 
  // exec(); // while not reached    
  while (_runMessageLoop && ...) {
    hr = CallDispatch(.....);
    if (hr== 0) QThread::msleep(100); 
    // QCoreApplication::processEvents(); // Does not work
  }
} 
```

由于`exec()`没有执行，我**没有**Qt 事件循环。这显然会导致信号/插槽[无法正常工作](https://stackoverflow.com/questions/12982489/qt-thread-object-only-sending-signal-as-qtdirectconnection-why)。**有没有机会将 Qt 和我自己的消息循环结合起来？**或者我是否需要一个频繁触发的计时器来完成我在无限循环中完成的工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:05:25.773

“Qt-wise”的正确方法是使用计时器并让 Qt 管理事件循环。

如果您需要依赖外部事物，您可以使用诸如`QAbstractSocket`在数据通过外部套接字进入时发送事件之类的东西，例如。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T22:43:23.623

这并不是正确实现事件循环的真正答案，我相当确定有一种方法，但更多的是一种解决方法：

正常启动线程， exec() 和所有，并将启动信号连接到一个插槽（确保它在正确的线程中被调用），然后将循环放在那里，并在该循环中调用 Qt 的 processEvents()。这可以确保 Qt 事件循环得到正确设置。

# .net - 使用现有上下文中的声明解析 SMT-LIB2 字符串

> ID：13054054
> 
> 赞同：1
> 
> 时间：2012-10-24T17:00:35.507
> 
> 标签：.net, z3, smt

我在 .NET API 中创建了一个现有的 Z3 4.1 上下文，其中包含许多函数声明、排序声明、断言假设等。

在此上下文中使用所有现有声明解析 SMT-LIB2 字符串的最简洁方法是什么？具体来说，有没有办法遍历上下文中的所有声明？我在 Context 中没有看到任何允许我访问声明的方法。

目前，我正在执行以下操作：

```
Context z3 = new Context();

// ... declare sorts, add declarations (parsing other input files), add assertions, to z3 context

List<FuncDecl> decls = new List<FuncDecl>();
List<Symbol> names = new List<Symbol>();
string pstr; // smtlib2 string to be parsed populated elsewhere

// ... populate decls and names by iterating over my internal data structures with references to these declarations

BoolExpr prop = z3.ParseSMTLIB2String(pstr, null, null, names.ToArray(), decls.ToArray()); 
```

有没有办法从 z3 上下文本身获取所有这些声明和符号名称？它们都已经在 z3 对象中声明了。我宁愿这样做，也不愿遍历我的内部数据结构。

我可能错过了它，但我没有看到任何可以让我在 API 中执行此操作的内容。我正在成像类似于可通过 Solver.Assertions 获得的断言公式数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:19:25.330

您的解决方案看起来正确。decl 和名称可以在它们第一次出现时被收集，而不是为每次调用重新构建它们，这将消除每次调用对内部数据结构的迭代。请注意，如果您对 Z3 进行多次调用，则使用 SMT 解析器可能不是最有效的解决方案；如果可能的话，我建议直接构建 Z3 表达式而不是字符串（在这种情况下，可能还需要一个符号表）。

# ruby - ruby exec powershell windows

> ID：13054055
> 
> 赞同：4
> 
> 时间：2012-10-24T17:00:45.177
> 
> 标签：ruby, powershell, cmd, 32bit-64bit

当我在 ruby​​ 中运行以下命令时：

```
`powershell.exe -executionpolicy unrestricted -command get-module -listavailable` 
```

...我得到的结果与我只是运行 cmd 并执行不同：

```
powershell.exe -executionpolicy unrestricted -command get-module -listavailable 
```

我该如何解决这个问题，所以我可以产生相同的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:13:01.380

是的。修复显然是 sysnative 别名。利用：

C:/windows/sysnative/windowspowshell/v1.0/powershell.exe

而不是 syswow64 或 system32 或无。

有关详细信息，请参阅：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa384187 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384187(v=vs.85).aspx)

# c# - 将默认值设置为 c# 上的属性

> ID：13054056
> 
> 赞同：6
> 
> 时间：2012-10-24T17:00:47.180
> 
> 标签：c#

> **可能重复：**
> [在 System.ComponentModel 默认值属性中将 DateTime 属性的默认值设置为 DateTime.Now](https://stackoverflow.com/questions/691035/setting-the-default-value-of-a-datetime-property-to-datetime-now-inside-the-syst)

我创建了一个像日历一样的控件，我希望用户设置他们想要查看的年份。但如果他们不这样做，则 SelectedYear 的属性必须是实际年份。

我尝试像这样设置这个默认值：

```
[DefaultValue(DateTime.Today.Year)]
public int SelectedYear{
    get{
        return _selYear;
    }
    set{
        _selYear = value;
        UpdateCalendar();
    }
} 
```

我收到以下错误

```
An attribute argument must be a constant expression, typeof expression or array creation expression of an attribute parameter type 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T17:03:45.583

的`Year`属性`DateTime`是一个计算值，但您试图将其嵌入到一个属性中，该属性是存储在二进制文件中的不可变值。这两个概念不兼容。

您在这里要做的是有一个标记来注意该值尚未设置，并`Year`在这种情况下返回当前值。这是使用可空值的好地方

```
int? _selYear;
public int SelectedYear {
  get { return _selYear ?? DateTime.Today.Year; }
  set { 
    _selYear = value;
    UpdateCalendar();
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T17:14:58.743

用于[`AmbientValueAttribute`](http://msdn.microsoft.com/en-us/library/system.componentmodel.ambientvalueattribute.aspx)表示当你将属性设置为默认值时，实际上是获取当前日期的意思。

```
int _selYear = 0;

[AmbientValue(0)]
[DefaultValue(0)]
public int SelectedYear{
    get{
        if (_selYear == 0)
            return DateTime.Today.Year;
        return _selYear;
    }
    set{
        _selYear = value;
        UpdateCalendar();
    }
} 
```

如果要使用 0 值，则可以将其设为可空，但绝不返回空，只允许设置空：

```
int _selYear = null;

[AmbientValue(null)]
[DefaultValue(null)]
public int? SelectedYear{
    get{
        return _selYear ?? DateTime.Today.Year;
    }
    set{
        _selYear = value;
        UpdateCalendar();
    }
} 
```

现在，它是表示当前年份的空值。

**AmbientValueAttribute 的意思是：**如果你把这个属性设置为那个值，当你得到这个属性时，会从环境中返回另一个值，并且这种情况下的返回值可能会有所不同，就像当前日期一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T17:06:52.070

您应该显式地初始化属性的值。DefaultValue 属性不会通过值初始化属性，它只是提供默认值的元数据。

您可以在类型的 ctor 中对其进行初始化，也可以编写自定义代码来反映类型并通过类型元数据中的值初始化属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T17:02:48.067

好吧，错误很明显：

> 属性参数必须是常量表达式...

那么，如果这*确实*有效，那么默认值实际上是什么？好吧，这将是*您编译代码*的那一年。可能不是你想要的。

如果您真的想默认返回当前年份，那么只需在构造函数中将其初始化为该年份即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T17:03:20.700

为什么不在构造函数`set`中`backing field`改为这样 -

```
_selYear = DateTime.Today.Year 
```

`default`如果用户没有设置它，它将始终是价值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T17:03:54.520

`DateTime.Today.Year`不是一个常数值，因为它每年都在变化。您可以使用以下方法检查是否`_selYear`已指定：

```
public int SelectedYear{
    get{
        if (_selYear.Equals(0)){
            return  DateTime.Today.Year;
        }
        else{
            return _selYear;
        }
    }
    set{
        _selYear = value;
        UpdateCalendar();
    }
} 
```

这是考虑到您将 _selYear 初始化为 0。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-24T17:04:28.757

这是因为`DefaultValue`仅接受常量值。您可以通过另一种方法来做到这一点，如下所示

```
public int SelectedYear{
    get{
        return _selYear == 0 ? DateTime.Now.Year : _selYear;
    }
    set{
        _selYear = value;
        UpdateCalendar();
    }
} 
```

希望这会有所帮助！

# python - 对 python 列表感到困惑：它们是还是不是迭代器？

> ID：13054057
> 
> 赞同：85
> 
> 时间：2012-10-24T17:00:47.500
> 
> 标签：python, list, iterator

我正在研究[Alex Marteli 的 Python in a Nutshell](https://rads.stackoverflow.com/amzn/click/com/0596100469)，这本书建议任何具有`next()`方法的对象都是（或至少可以用作）**迭代器**。它还表明大多数迭代器是通过隐式或显式调用调用的方法构建的`iter`。

读完这本书后，我有一种尝试的冲动。我启动了一个 python 2.7.3 解释器并这样做了：

```
>>> x = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> for number in range(0, 10):
...     print x.next() 
```

然而结果是这样的：

```
Traceback (most recent call last):
  File "<stdin>", line 2, in <module>
AttributeError: 'list' object has no attribute 'next' 
```

在困惑中，我试图通过研究 x 对象的结构，`dir(x)`我注意到它有一个`__iter__`函数对象。所以我发现它可以用作迭代器，只要它支持那种类型的接口。

因此，当我再次尝试时，这次略有不同，尝试这样做：

```
>>> _temp_iter = next(x) 
```

我收到了这个错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: list object is not an iterator 
```

但是列表怎么可能不是迭代器，因为它似乎支持这个接口，并且在以下上下文中肯定可以用作一个：

```
>>> for number in x:
...     print x 
```

**有人可以帮我澄清一下吗？**

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-10-24T17:03:44.183

它们是*可迭代*的，但它们不是*迭代器*。可以将它们传递`iter()`给以隐式（例如 via ）或显式地为它们获取迭代器`for`，但它们本身并不是迭代器。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-10-24T17:03:23.513

您需要先使用以下方法将列表转换为迭代器`iter()`：

```
In [7]: x = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

In [8]: it=iter(x)

In [9]: for i in range(10):
    it.next()
   ....:     
   ....:     
Out[10]: 0
Out[10]: 1
Out[10]: 2
Out[10]: 3
Out[10]: 4
Out[10]: 5
Out[10]: 6
Out[10]: 7
Out[10]: 8
Out[10]: 9

In [12]: 'next' in dir(it)
Out[12]: True

In [13]: 'next' in dir(x)
Out[13]: False 
```

检查对象是否为迭代器：

```
In [17]: isinstance(x,collections.Iterator)
Out[17]: False

In [18]: isinstance(x,collections.Iterable)
Out[18]: True

In [19]: isinstance(it,collections.Iterable) 
Out[19]: True

In [20]: isinstance(it,collections.Iterator)
Out[20]: True 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-10-24T17:44:34.953

以防万一您对可迭代对象和迭代器之间的区别感到困惑。迭代器是表示数据流的对象。它实现了迭代器协议：

*   `__iter__`方法
*   `next`方法

重复调用迭代器的 next() 方法会返回流中的连续项。当没有更多数据可用时，迭代器对象将被耗尽，并且对其 next() 方法的任何进一步调用只会再次引发 StopIteration。

另一方面，可迭代对象实现了`__iter__`在调用时返回一个迭代器的方法，该迭代器允许对其数据进行多次传递。可迭代对象是可重用的，一旦用尽，它们可以再次迭代。可以使用该`iter`函数将它们转换为迭代器。

因此，如果您有一个列表（可迭代），您可以执行以下操作：

```
>>> l = [1,2,3,4]
>>> for i in l:
...     print i,
1 2 3 4
>>> for i in l:
...     print i,
 1 2 3 4 
```

如果将列表转换为迭代器：

```
>>> il = l.__iter__()  # equivalent to iter(l)
>>> for i in il:
...     print i,
 1 2 3 4
>>> for i in il:
...     print i,
>>> 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-07-23T12:47:00.210

List 不是迭代器，但列表包含一个迭代器对象`__iter__`，因此当您尝试在任何列表上使用 for 循环时，for 循环调用`__iter__`方法并获取迭代器对象，然后它使用列表的 next() 方法。

```
x = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
it = x.__iter__() 
```

现在`it`包含迭代器对象，在抛出 StopIteration 异常之前`x`，您可以使用它`it.next()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-26T08:23:11.610

关于 list 是一个可迭代但不是迭代器的问题已经有了很好的答案。在 python 版本 > 3.0 中，使用以下

```
a = [1, 2, 3]
b = iter(a)
b.__next__() 
```

# python-2.7 - 在 Geany Windows 7 64 位中将 NumPy 导入 Python2.7

> ID：13054058
> 
> 赞同：2
> 
> 时间：2012-10-24T17:00:52.593
> 
> 标签：python-2.7, numpy, windows-7-x64, amd-processor, geany

我正在使用在 AMD 处理器上运行的 64 位 Windows 7。

我已经安装了[python-2.7.3.amd64](http://www.python.org/getit/)。

我已经安装了[NumPy](http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy)的相关（联合国官方）二进制文件。

当我导入 numpy 并开始通过 python 命令行调用它的函数时，一切正常。

但是，当我在 Geany 编辑器中执行相同操作时，一条错误消息告诉 python 现在没有任何名为 numpy 的模块：

> ImportError：没有名为 numpy 的模块

因为我重新安装了 python 和 numpy 两次，但没有任何改变。

我想知道这个问题可能是因为 Geany 与联合国官方版本的 numpy 或 Windows 的 64 位性质或两者都有一些不兼容的事实？

也许我必须对 Geany 做一些进一步的配置才能将 numpy 引入它？为了解决这个困境的任何建议将不胜感激。

# javascript - 如何在javascript中正确实现滑动动画？

> ID：13054060
> 
> 赞同：5
> 
> 时间：2012-10-24T17:00:54.467
> 
> 标签：javascript, jquery, animation, slider, settimeout

在我学习 javascript 的过程中，我正在制作相同的滑块，但使用 javascript 上的动画（使用 css 这对我来说不是问题 - 它是在网站 google 上制作的），如下所示：

原始 Google 滑块（带有 css 的动画）：
[http ://www.google.com/about/datacenters/inside/](http://www.google.com/about/datacenters/inside/)

**到目前为止我的工作：**

[http://jsfiddle.net/TS7Xu/3/](http://jsfiddle.net/TS7Xu/3/)

```
<!-- language-all: lang-html -->
<!DOCTYPE HTML>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<title></title>
<style type="text/css">
    #promo{
    display:block;
    height: 354px;
    width: 790px;
    }
    .promo-item {
        width: 81px;
        height: 354px;
        float: left;
    }
    .promo-item.wide {
        width: 613px;
    }
    .threeP {
        background-color: rgb(206, 203, 203);
    }
    .oneP {
        background-color: rgb(241, 220, 182);
    }
    .twoP {
        background-color: rgb(187, 217, 226);
    }
</style>
</head>
<body>
<div id="promo">
    <div class="promo-item twoP wide" id="twoP">
      <div>
      </div>
    </div>
    <div class="promo-item threeP" id="threeP">
      <div>
      </div>
    </div>
    <div class="promo-item oneP" id="oneP">
      <div>
      </div>
    </div>
</div>

<script type="text/javascript">
var oneP = document.getElementById('oneP');
var twoP = document.getElementById('twoP');
var threeP = document.getElementById('threeP');
step = 1;
            function expandPanel1(){
                var h = oneP.clientWidth + step;
                oneP.style.width = h+"px";
                if (h < 614 || h !=614) {
                    setTimeout("expandPanel1()", 5);
                } else { oneP.style.width = 613+"px"; }
            }               
            function expandPanel2(){
                var h = twoP.clientWidth + step;
                twoP.style.width = h+"px";
                if (h < 614 || h !=614) {
                    setTimeout("expandPanel2()", 5)
                } else { twoP.style.width = 613+"px"; }
            }               
            function expandPanel3(){
                var h = threeP.clientWidth + step;
                threeP.style.width = h+"px";
                if (h < 614 || h !=614) {
                    setTimeout("expandPanel3()", 5)
                } else { threeP.style.width = 613+"px"; }
            }   
            //---------------------------------------------
                function expandPanel1Minus(){
                    var h = oneP.clientWidth - step;
                    oneP.style.width = h+"px";
                    if (h > 80 || h !=80) {
                        setTimeout("expandPanel1Minus()", 5)
                    } else { oneP.style.width = 81+"px"; }
                }               
                function expandPanel2Minus(){
                    var h = twoP.clientWidth - step;
                    twoP.style.width = h+"px";
                    if (h > 80 || h !=80) {
                        setTimeout("expandPanel2Minus()", 5)
                    } else { twoP.style.width = 81+"px"; }
                }               
                function expandPanel3Minus(){
                    var h = threeP.clientWidth - step;
                    threeP.style.width = h+"px";
                    if (h > 80 || h !=80) {
                        setTimeout("expandPanel3Minus()", 5)
                    } else { threeP.style.width = 81+"px"; }
                }
            //---------------------------------------------
    oneP.onmouseover = function () {
        expandPanel1()
            expandPanel3Minus()
            expandPanel2Minus()
    } 
    twoP.onmouseover = function () {
        expandPanel2()
            expandPanel3Minus()
            expandPanel1Minus()
    } 
    threeP.onmouseover = function () {
        expandPanel3()
            expandPanel2Minus()
            expandPanel1Minus()
    }
</script> 
```

我知道这个例子有错误，因为如果用鼠标在滑块上长时间驱动，它开始“猛烈”运行:) 我故意降低动画速度。

有人可以给我一些关于如何正确实施的指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:47:16.560

如果你想节省很多时间，你应该用 jQuery 来做。试试这个[http://jsfiddle.net/QXRVb/](http://jsfiddle.net/QXRVb/)解决方案。在那个例子中，我不喜欢调整 div 的大小。我使用 Z-indexes 和 jQuery animate 来移动它们。这样更容易为他们找到正确的位置。

```
<style>
#promo{
    width:900px;
    height:300px;
    position:absolute;
    top:0px;
    left:0px;
    overflow:hidden;
}
#oneP{
    width:600px;
    height:300px;
    position:absolute;
    top:0px;
    left:0px;
    background:#999;
    z-index:1;
}
#twoP{
    width:600px;
    height:300px;
    position:absolute;
    top:0px;
    left:150px;
    background:#ddd;
    z-index:0;
}
#threeP{
    width:600px;
    height:300px;
    position:absolute;
    top:0px;
    left:750px;
    background:#666;
    z-index:1;
}
</style>

<html>
<div id="promo">
<div id="oneP">    
</div>
<div id="twoP">     
</div>
<div id="threeP">     
</div>
</div>
</html>

<script>
$('#oneP').mouseover(function() {
    $('#oneP').animate({
        left: 0
    },200);
    $('#threeP').animate({
        left: 750
    },200);
    $('#twoP').animate({
        left: 450
    },200);
});

$('#twoP').mouseover(function() {
    $('#oneP').animate({
        left: -450
    },200);    
    $('#threeP').animate({
        left: 750
    },200);
    $('#twoP').animate({
        left: 150
    },200);
});

$('#threeP').mouseover(function() {
    $('#threeP').animate({
        left: 300
    },200);    
    $('#oneP').animate({
        left: -450
    },200);
    $('#twoP').animate({
        left: -150
    },200);
});​
</script>` 
```

使用这种方法，您可以轻松地将图像标签放入 div 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T18:31:46.247

这是一个纯 JS 实现 - [JSFiddle 链接](http://jsfiddle.net/TzPYL/)。如果小提琴没有得到保存，这里只有 JS 位。HTML 的其余部分与 OP 相同。该函数`go`在身体负荷时调用。

```
var f, s, t;
var which;

function go() {
    f = document.getElementById('oneP');
    s = document.getElementById('twoP');
    t = document.getElementById('threeP');

    which = s;

    f.onmouseover = function() {
        foo(this)
    };

    s.onmouseover = function() {
        foo(this)
    };

    t.onmouseover = function() {
        foo(this)
    };
}

function foo(e) {
    if (e.clientWidth < 613) {
        e.style.width = (e.clientWidth) + 10 + "px";
        which.style.width = (which.clientWidth - 10) + "px";

        setTimeout(function() {
            foo(e);
        }, 5);
    }
    else if (e.clientWidth > 613) {
        e.style.width = "613px";
        which.style.width = "81px";

        which = e;
    }
}​ 
```

我认为还有一些工作要做，动画不够快，因此可以在动画运行时将鼠标悬停在另一个部分上。我把那一点留给你:)

# tridion - 在 Content Delivery 中创建关键字列表

> ID：13054062
> 
> 赞同：11
> 
> 时间：2012-10-24T17:01:04.590
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

想象一下，我有一个内容类型，它有两个类型为 category 的字段：一个是分类 Author，另一个是分类 Topics，这两个分类是不相关的，它们可能唯一的共同点是组件本身。

现在我们以访问者的身份访问该网站，然后当访问者单击给定的作者时，我想创建一个列表，其中包含组件中存在的所有主题，这些主题也包含特定的作者。

我知道我可以使用包含来自不同分类法的两个关键字的条件创建一个查询对象，以检查它是否检索任何值，问题是我需要为每个主题（即作者和主题 1、作者和主题 2、作者）执行此操作和主题 3 等，最后可能意味着我显然不想做的几十个查询。

在我看来，分类 API 无济于事，因为分类和它们的关键字完全不相关。有什么选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T18:30:06.467

如果我正确理解您的要求，您可以使用 和 的组合来`CategoryCriteria`实现`KeywordCriteria`。

`CategoryCriteria`在这种情况下指定内容标记到哪个类别`Topics`。 `KeywordCriteria`指定哪个类别键值（例如； Author=Chris ）。

```
 PublicationCriteria pubCriteria = new PublicationCriteria(59); // publication scope
     CategoryCriteria categoryCriteria = new CategoryCriteria("Topics");
     KeywordCriteria taxonomyKeywordCriteria = new KeywordCriteria("Author", "Chris");
     Criteria allCriteria = CriteriaFactory.And(
                          new Criteria[] { pubCriteria, 
                          CriteriaFactory.And(new Criteria[] { categoryCriteria, taxonomyKeywordCriteria }) } 
                          );

     Query allComps = new Query(allCriteria);
     string[] compIDs = allComps.ExecuteQuery();
     Response.Write("<br /> Legth : " + compIDs.Length ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T10:56:25.917

根据 Ram G 的评论，因此以实时内容中的代码示例为起点，我已验证以下解决方案是否有效：

```
using System;
using System.Collections;
using System.Configuration;
using System.Data;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using Tridion.ContentDelivery.Taxonomies;
using Tridion.ContentDelivery.DynamicContent.Query;
using Tridion.ContentDelivery.DynamicContent;

namespace Asier.Web.UI
{
    public class TagCloud : System.Web.UI.WebControls.WebControl
    {
        protected override void Render(HtmlTextWriter writer)
        {
            TaxonomyRelationManager relationManager = new TaxonomyRelationManager();
            TaxonomyFactory taxFactory = new TaxonomyFactory();

            string taxonomyUriWhichIWantTheKeywordsFrom = "tcm:69-265-512";

            String[] componentUris = GetComponentUris();
            String[] contextKeywordUris = GetKeywordUris();
            Keyword[] contextKeywordArray = GetKeywordsFromKeywordUris(taxFactory, contextKeywordUris);
            Keyword[] cloudFacets = relationManager.GetTaxonomyKeywords(taxonomyUriWhichIWantTheKeywordsFrom, componentUris, contextKeywordArray, new CompositeFilter(), 16);

            ProcessKeywords(cloudFacets);
        }

        private static string[] GetComponentUris()
        {
            // This should probably be replaced with a Query object that
            // retrieves the URIs dynamically 
            return new String[] { "tcm:69-3645-16", "tcm:69-3648-16", "tcm:69-3651-16" };
        }

        private static string[] GetKeywordUris()
        {
            // this should probably be passed in as a property of the control
            return new string[] { "tcm:69-3078-1024" };
        }

        private static Keyword[] GetKeywordsFromKeywordUris(TaxonomyFactory taxFactory, String[] contextKeywordUris)
        {
            Keyword[] contextKeywordArray = new Keyword[contextKeywordUris.Length];

            for (int i = 0; i < contextKeywordUris.Length; i++)
            {
                contextKeywordArray[i] = taxFactory.GetTaxonomyKeyword(contextKeywordUris[i]);
            }

            return contextKeywordArray;
        }        

        private static void ProcessKeywords(Keyword[] cloudFacets)
        {
            for (int i = 0; i < cloudFacets.GetLength(0); i++)
            {

                if (cloudFacets[i].ReferencedContentCount > 0)
                {
                    // Do whatever...
                }
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T21:27:07.207

我相信您需要制定 2 个 KeywordCriteria

```
Criteria #1: Author = "Chris"

Criteria #2: Topic = "Topic1" or "Topic2" or "Topic3" 
```

然后创建一个新的 AND 条件以将两者结合起来

希望对您有所帮助，如果您需要一些示例，请说明您使用的是 .NET 还是 Java

克里斯

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-26T13:06:07.263

所以你想找到所有带有特定作者标签的组件，然后找到找到的组件对应的Topic关键字关系？

TaxonomyRelationManager 应该能够在这里为您提供帮助：

```
TaxonomyRelationManager manager = new TaxonomyRelationManager();
string[] contentWithThisAuthor = manager.GetTaxonomyContent(new Keyword(taxonomyUriOfAuthors, authorUri), false);
Keyword[] relatedTopics = manager.GetTaxonomyKeywords(taxonomyUriOfTopics, contentWithThisAuthor, new Keyword[] {}, null, 16); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T07:00:50.570

要创建查询对象，请借助组件。在组件中，将这些类别添加到单独的字段中：主题（列表框，多选）作者（下拉菜单，单选......或根据需要）。

在您的情况下，选择主题的所有列表框选项。假设您有 3 个关键字，即主题 1、主题 2、主题 3。

因此，关键字将形成为：

```
KeywordCriteria topicCriteria1= new KeywordCriteria("Topic","Topic 1");
KeywordCriteria topicCriteria2= new KeywordCriteria("Topic","Topic 2");
KeywordCriteria topicCriteria3= new KeywordCriteria("Topic","Topic 3");

Criteria[] topicCriterias = {topicCriteria1,topicCriteria2,topicCriteria3};
Criteria OrCriteria = CriteriaFactory.Or(topicCriterias);

//Create Author Criteria
KeywordCriteria AuthorCriteria= new KeywordCriteria("Author","Author 1");

//And both results
mainCriteria =CriteriaFactory.And(AuthorCriteria, topicCriterias);

//Query
query.Criteria=mainCriteria; 
```

对于选择所有与主题相关的关键字，您可以编写一个方法而不是单独编写。希望这可以帮助。

# c# - DataGridTextColumn 绑定问题

> ID：13054071
> 
> 赞同：1
> 
> 时间：2012-10-24T17:01:36.290
> 
> 标签：c#, wpf, binding

我无法绑定`IsReadOnly`到`DataGridTextColumn`.

```
 <DataGridTextColumn Binding="{Binding Path=OffsetRelative}" IsReadOnly="{Binding IsReadOnly}">
                                    <DataGridTextColumn.HeaderTemplate>
                                        <DataTemplate>
                                            <CheckBox Content="Relative Offset" IsChecked="{Binding ElementName=ViewReportFileUserControl, Path=DataContext.IsSelectedTcfOffsetRelative}" Margin="0,0,10,0"/>
                                        </DataTemplate>
                                    </DataGridTextColumn.HeaderTemplate>
                                </DataGridTextColumn> 
```

两者`OffsetRelative`和`IsReadOnly`都是同一类中的公共属性。Binding to`OffsetRelative`工作正常，但 Binding to`IsReadOnly`生成以下运行时输出：

> System.Windows.Data 错误：2：找不到目标元素的管理 FrameworkElement 或 FrameworkContentElement。绑定表达式：路径=IsReadOnly；数据项=空；目标元素是“DataGridTextColumn”（HashCode=2149042）；目标属性是“IsReadOnly”（类型“布尔”）

为什么一种绑定有效，而另一种无效？

# git - Wavemaker 6.4.6 的 .gitignore 文件

> ID：13054083
> 
> 赞同：0
> 
> 时间：2012-10-24T17:02:20.267
> 
> 标签：git, push, gitignore, wavemaker

我需要有关 gitignore 文件和在 bitbucket 存储库上拉/推 wavemaker 项目（6.4.6 版本）的帮助。

我发现 gitignore 必须包含这些：

[http://dev.wavemaker.com/wiki/bin/wmdoc_6.5/Software+Configuration+Management#HExamplegitignorefile](http://dev.wavemaker.com/wiki/bin/wmdoc_6.5/Software+Configuration+Management#HExamplegitignorefile)

但这是针对 6.5 版的，这对 6.4.6 版不好。

我将一个项目推送到存储库，当我的同事试图从存储库中提取最新版本时，该项目无法打开，因为它有如下错误：ErrorFailed to open project : SyntaxError: Unexpected token ===

我知道wavemaker生成了一些文件，我们俩都有项目导出，但是当我们中的一个人将新代码推送到存储库时，其他人在拉取后无法打开项目。

非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:46:11.017

语法错误听起来不像是 .gitignore 不正确的结果。

WaveMaker 6.5 .gitignore 包含 WaveMaker 6.4 中不存在的文件的排除项。例如，WM 6.4 没有 phonegap 构建或 timestamp.txt。所以那里没有什么可以排除的。

如果您忽略了所需文件，则似乎更有可能出现丢失文件错误。

我建议找到“===”在项目文件中的位置。无论是什么未能解析包含该语法的文件，都应该告诉您它正在处理哪个文件。

# c++ - Libxml2 xmlSetGenericErrorFunc 跨进程使用

> ID：13054084
> 
> 赞同：0
> 
> 时间：2012-10-24T17:02:25.520
> 
> 标签：c++, linux, libxml2

我正在使用 Libxml2 读取/写入 XML 文件。为了在加载 XML 时捕获 libxml 错误，我正在使用 xmlSetGenericErrorFunc。

```
void Myclass::load(const std::string &filename)
{
    xmlGenericErrorFunc handler = (xmlGenericErrorFunc) catchErrors;
    xmlSetGenericErrorFunc(this, handler); //context pointer, error handler
} 
```

重置上下文和错误处理程序可以如下完成。

```
xmlSetGenericErrorFunc(NULL, NULL); 
```

我的包装库被许多进程使用。Libxml2 是一个 .so 文件。

如果我在错误处理程序中使用上下文指针，如果某个进程在没有重置上下文指针的情况下死亡并且在其他进程中发生解析错误，是否会有崩溃的可能性？libxml 可以使用死指针调用错误回调吗？

任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:59:17.427

看了源码之后：

首先检查 libxml 是否使用 LIBXML_THREAD_ENABLED 编译。你可以检查一下`xmllint -version`，它应该说：`compiled with: Threads ...`

`xmlSetGenericErrorFunc`（来自 error.c）集合`xmlGenericError`（在 globals.h 中定义），它（如果启用线程）被声明为`xmlGlobalState`结构的一部分。

现在[xmlGetGlobalState](http://www.xmlsoft.org/html/libxml-threads.html#xmlGetGlobalState)文档清楚地指出，为每个线程单独维护状态。

所以理论上线程不会相互影响，你应该观察到在一个线程中设置错误处理程序不会改变另一个线程的行为。看来你是安全的。

# entity-framework - 实体框架函数导入从字符串中修剪前导零

> ID：13054088
> 
> 赞同：0
> 
> 时间：2012-10-24T17:02:35.737
> 
> 标签：entity-framework, tsql

我对实体框架函数导入有一个有趣的问题。我正在从 MS SQL Server 2008 R2 导入一个存储过程，它只返回一个字符串。但是，EF 推断此返回类型太复杂了，因此在定义函数导入时，我必须手动指定该函数返回一个标量集合（`ObjectResult<global::System.String>`如生成的那样）。

有时，该过程会返回一个仅包含数字并以零开头的字符串（例如，`01234`）。当我在代码中访问此结果时，结果发现没有起始零 ( `1234`)！

我知道几种解决方法，所以这不是问题。我想了解发生了什么。

我的疯狂猜测是，在我的情况下 - 当 SP 太复杂而无法“预测”其结果时 - EF 首先尝试通过该数据的格式“猜测”返回数据的类型。即，它看到一个数字 ( `01234`)，并将其转换为整数类型 ( `int`, `short`- 不管)。然后它看到我想要一个`string`，并将这个数字转换回`string`，但是在这些转换过程中，从零开始当然会丢失。这是真的吗，还是有更好的解释？

更新：这是函数导入的屏幕截图：

![函数导入](../Images/2771aba1958b656373e462121244fea8.png)

# c# - 如何在每次单击按钮时跟踪双精度并继续添加它？

> ID：13054090
> 
> 赞同：1
> 
> 时间：2012-10-24T17:02:40.737
> 
> 标签：c#

我有这个 Windows 应用程序咖啡馆，它允许用户进行选择，然后它显示所选项目的成本、小计、税款、总计、当天的交易数量，我需要它来显示收取的总销售税为好。我认为计算这与我计算交易数量的方式相似，但我还没有弄清楚。有任何想法吗？

```
public partial class Form1 : Form
{
    int clicks = 0;
    double totalSalesTaxCollected = 0;

    public Form1()
    {
        InitializeComponent();
        InitializeControls();

    }
    private void button1_Click(object sender, EventArgs e)
    {

        clicks++;
        displayBill();

    }

    private void displayBill()
    {

      // int[] listArray = listBox1.getSelectedIndices();
      // SelectedIndexCollection listArray = listBox1.SelectedIndices;
        double localTax = 0.01;
        double stateTax = 0.06;
        double tax;
        double subTotal = 0;
        double total;

        //Set the text area to non-edit mode and start
        //with an empty string.
        textBox1.ReadOnly = true;
        textBox1.Text = "";
        textBox1.AppendText("           C# KIOSK A LA CARTE\n\n");
        textBox1.AppendText("--------------- Welcome ----------------\n\n");

        //Calculate the cost of the items ordered.
        for (int index = 0; index < listBox1.SelectedIndices.Count; index++)
        {
            subTotal = subTotal + yourChoicesPrices[listBox1.SelectedIndices[index]];

        }

              tax = (localTax + stateTax) * subTotal;
              total = subTotal + tax;

                  //Display the costs.
              for (int index = 0; index < listBox1.SelectedIndices.Count; index++)
              {
                 textBox1.AppendText(yourChoicesItems[listBox1.SelectedIndices[index]] +"\n");
              }

            textBox1.AppendText("\n");
            textBox1.AppendText("SUB TOTAL\t\t" + String.Format("{0:C}", subTotal) + "\n");
            textBox1.AppendText("TAX           \t\t"+ String.Format("{0:C}" , tax) + "\n");
            textBox1.AppendText("TOTAL     \t\t"+ String.Format("{0:C}" , total) + "\n\n");
            textBox1.AppendText("\n");
            textBox1.AppendText("Thank you - Have a Nice Day\n\n");
            textBox1.AppendText("\n");
            textBox1.AppendText("Total sales: \t\t" + clicks + "\n" );
            textBox1.AppendText("Total sales tax collected: \t\t" + totalSalesTaxCollected);

                  //Reset list array.
            listBox1.ClearSelected();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:06:42.943

除非我错过了，否则我认为您需要..并且我在这行之后猜测：

```
tax = (localTax + stateTax) * subTotal;
total = subTotal + tax; 
```

添加：

```
 totalSalesTaxCollected+=total; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:08:18.707

后 `tax = (localTax + stateTax) * subTotal; total = subTotal + tax;`

添加`totalSalesTaxCollected += tax;`

# php - Codeigniter 未使用 ActiveRecord 转义 ODBC-mssql 中的单引号

> ID：13054094
> 
> 赞同：0
> 
> 时间：2012-10-24T17:02:48.517
> 
> 标签：php, sql-server, codeigniter, odbc

我有一个包含一堆字段的表单。有时用户提供的信息和描述中带有单引号。

我正在使用 Jquery 和 CI 验证数据，问题是 ActiveRecord 显然没有转义单引号，导致插入/更新数据时出错。

ActiveRecord 不应该自动转义这些字符吗？如果没有，在用户输入中处理单引号的常用方法是什么？

处理插入的模型函数的示例代码：

```
public function setLicense($dataArray, $data_id="")
{
    $iRows  = 0; // Rows found.
    $DB = $this->load->database('some_database',TRUE,TRUE);

    //var_dump($dataArray);
    if(empty($dataArray))
        return(FALSE);

    if(!empty($data_id))
    {
        $DB->where('idx',$data_id);
        $iRows=$DB->count_all_results('some_table');
    }
    else
    {
        if(isset($LicenseData['idx']))
        {
            $license = $LicenseData['idx'];
            $DB->where('idx',$license);
            $iRows=$DB->count_all_results('some_table');
        }
    }
    if(!$iRows)
        $DB->insert('some_table',$dataArray);
    else
    {   
        $DB->where('idx',$data_id);
        $DB->update('some_table',$dataArray);
    }
    return(TRUE);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:08:30.807

您描述的行为似乎是在连接 ODBC 数据库驱动程序时有意为之。[这是此 Ellislab 论坛讨论](http://ellislab.com/forums/viewthread/219401/#1012306)的引述：

> 由于 ODBC 的本质 - 您可以使用几乎任何数据库平台，而 CodeIgniter 没有办法知道它是哪一个。而且不同的数据库有不同的转义字符和规则，所以这种转义真的取决于你。

# magento - 应税/非应税销售的自定义 Magento 报告

> ID：13054097
> 
> 赞同：2
> 
> 时间：2012-10-24T17:03:08.437
> 
> 标签：magento, report, data-collection

让我先说我是 Magento 以及一般数据集合的新手（最近才开始使用 OOP/框架）。

我在[这里](http://wrightcreativelabs.com/create-a-custom-magento-report-product-skus-in-new-orders/)学习了优秀的教程，并且我熟悉 Alan Storm 对该主题的概述。我的目标是创建一个自定义 Magento 报告，给定开始/结束日期，将返回以下总数：

*   应税净额（含税订单的 SUM 小计）
*   非应税净额（不含税订单的 SUM 小计）
*   *总销售额（总计）
*   *总净销售额（小计）
*   *总运费
*   *总税金

*对于这些数字，我知道它们可以在现有的单独报告中获得，或者可以从它们手动计算，但是此报告的目的是为我们的店主提供一个单独的页面来访问和导出以发送给他的会计师进行纳税目的。

我在 Adminhtml 中已经有了基本的报告结构，包括日期范围，我相信如果需要订单状态/等，我可以包含其他过滤器。现在我只需要提取正确的数据集合并弄清楚如何检索相关数据。

我的问题是我无法确定订单数据的存储方式、需要哪些连接（如果有）、一旦获得数据如何操作数据，或者它们如何与我设置的网格交互. 我发现的有关该主题的现有教程都专门处理产品报告，而不是我需要的汇总销售数据。

非常感谢任何人可以为我指明正确的方向，找到可以帮助我了解如何使用 Magento 销售数据或提供任何其他见解的资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:59:07.403

我一直在做一些非常相似的事情，我用那个教程作为我的基础。

## 扩大订单 加入内部

您需要的大部分订单信息都位于`sales_flat_order`与`$this->getTable('sales/order')`

这实际上已经存在于她的代码中，但数组是空的，所以你需要用你想要的字段填充它，例如我的：

```
->joinInner(
    array('order' => $this->getTable('sales/order')),
        implode(' AND ', $orderJoinCondition),
    array(
        'order_id' => 'order.entity_id',
        'store_id' => 'order.store_id',
        'currency_code' => 'order.order_currency_code',
        'state' => 'order.state',
        'status' => 'order.status',
        'shipping_amount' => 'order.shipping_amount',
        'shipping_tax_amount' => 'order.shipping_tax_amount',
        'shipping_incl_tax' => 'base_shipping_incl_tax',
        'subtotal' => 'order.subtotal',
        'subtotal_incl_tax' => 'order.subtotal_incl_tax',
        'total_item_count' => 'order.total_item_count',
        'created_at' => 'order.created_at',
        'updated_at' => 'order.updated_at'
    )) 
```

`desc sales_flat_order`仅在 mysql 中查找字段。

## 添加额外的左连接

好的，如果您想从其他表中获取信息，则需要添加 ->joinLeft() 例如，我需要货运跟踪号：

创建加入条件：

```
$shipmentJoinCondition   = array(
    $orderTableAliasName . '.entity_id = shipment.order_id'
); 
```

执行左连接：

```
->joinLeft(
    array('shipment' => $this->getTable('sales/shipment_track')),
        implode(' AND ', $shipmentJoinCondition),
    array(
        'track_number' => 'shipment.track_number'
    )
) 
```

抱歉，我无法更深入地在这里为您删除代码段。

## 执行计算

要修改返回到网格的数据，您必须更改模型中的 addItem(Varien_Object $item)，基本上从这里返回的任何内容都会放入网格中，而且我不是 100% 确定它是如何工作的，而且看起来有点对我来说很神奇。

好的，首先 $item 是一个对象，无论你对这个对象做什么，都会保留在这个对象上（抱歉，解释很糟糕）：例如，我想在单独的行上返回每个订单，并且每个订单都有 (1/3, 2/ 3, 3/3），我所做的任何更改都会全局发生在订单对象上，因此它们都会显示（3/3）。所以请记住这一点，如果开始发生时髦的事情，请使用[PHP Clone](http://php.net/manual/en/language.oop5.cloning.php)。

```
$item_array = clone $item; 
```

所以现在进入你的逻辑，你可以将任何你想要的键添加到数组中，它可以在 Grid.php 中访问

例如（因为 subtotal_incl_tax 存在所以不好）：

```
$item_array['my_taxable_net_calc'] = $item['sub_total'] + $item['tax']; 
```

然后在最后做：

```
$this->_items[] = $item_array;
return $this->_items; 
```

您还可以通过将更多数据添加到 $this->_items[]; 来基于现有添加更多行。

```
$this->_items[] = $item_array;
$this->_items[] = $item_array;
return $this->_items; 
```

将在两行上返回相同的项目。

对不起，我已经开始失去情节了，如果有什么不明白的地方就问，希望这会有所帮助。

哦，添加到 Block/Adminhtml/namespace/Grid.php

```
$this->addColumn('my_taxable_net_calc', array(
    'header'    => Mage::helper('report')->__('Taxable Net'),
    'sortable'  => false,
    'filter'    => false,
    'index'     => 'my_taxable_net_calc'
)); 
```

# c# - 泛型的协方差/转换问题

> ID：13054098
> 
> 赞同：2
> 
> 时间：2012-10-24T17:03:09.877
> 
> 标签：c#, generics

考虑代码：

```
using System.Collections.Generic;
namespace TestingTypes
{
    class Program
    {
        static void Main(string[] args)
        {
            var strings = new List<string>();               
            INeedToPassThisMethodAListOfObjects(strings as List<object>);
        }

        static void INeedToPassThisMethodAListOfObjects(List<object> objects) { }
    }
}

1>------ Build started: Project: TestingTypes, Configuration: Debug Any CPU ------
1>c:\users\[censored]\TestingTypes\Program.cs(9,41,9,64): error CS0039: Cannot convert 
type 'System.Collections.Generic.List<string>' to 
'System.Collections.Generic.List<object>' via a reference conversion, boxing 
conversion, unboxing conversion, wrapping conversion, or null type conversion 
```

您可能会说 List<string>*是*List<object>，因为字符串是对象，而 C# 4 应该支持泛型类型中的协变。

*   为什么编译器说它不能转换类型？
*   如何将“字符串”传递给方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:04:54.660

您收到错误是因为 a`List<string>`不是`List<object>`.

你可以打电话`list.Add(new TextBox())`，`List<object>`但很明显，同样的电话在`List<string>`.

如果泛型类型是不可变的（这是我从 List 转换为 IEnumerable 的工作），C# 泛型仅允许协变。

如果您需要将列表传递给方法，您可以尝试传递

```
listOfStrings.Cast<object>(); 
```

不利的一面是，如果您使用该解决方案，则在方法调用中对列表所做的任何修改都不会反映在原始列表中（因为调用会`Cast`创建一个新列表）。

如果您可以控制该方法`INeedToPassThisMethodAListOfObjects`并且该方法只需要迭代集合而不是修改它，您可以将参数类型更改为`IEnumerable<object>`在这种情况下您可以简单地传递您的集合而`List<string>`不会出现任何问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T17:08:07.423

接口可以变体；类不能。[有关说明，请参见此处。](https://stackoverflow.com/questions/2733346/why-isnt-there-generic-variance-for-classes-in-c-sharp-4-0)

如果您通过未转换的`strings`集合并将声明更改为，您的代码将起作用

```
static void INeedToPassThisMethodAListOfObjects(IEnumerable<object> objects) { } 
```

但是，这取决于您是否需要`List`在此函数中使用 a。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T17:06:29.003

您必须将字符串转换为对象。有一个很好的 LINQ 方法可以做到这一点。

```
var strings = new List<string>();               
INeedToPassThisMethodAListOfObjects(strings.Cast<object>()); 
```

**编辑**

根据你自己的链接，

> 在 C# 中，在以下情况下支持方差：
> 
> *   数组中的协方差（自 C# 1.0 起）
>     
>     
> *   委托中的协变和逆变，也称为“方法组方差”（自 C# 2.0 起）
>     
>     
> *   **接口和委托中泛型类型参数的变化（自 C# 4.0 起）**

所以 IEnumerable 会接受 List

# sql - SQL Server 事务中的 finally 子句？无论成功或失败都会执行的东西？

> ID：13054101
> 
> 赞同：3
> 
> 时间：2012-10-24T17:03:22.700
> 
> 标签：sql, sql-server, transactions, try-catch-finally, sqltransaction

在 SQL Server 中，是否有类似于c# 块中的`finally`子句的内容？`try..catch...`

我的意思是，我`BEGIN TRAN, END TRAN, COMMIT TRAN, ROLLBACK TRAN`在 SQL Server 事务中使用 etc 并且想要一个部分或一组操作，无论成功、失败或事务如何都需要触发。

有解决方案吗？（类似于 finally 阻止 OOPS 语言的 try/catch）。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:26:44.507

没有*任何东西*会以 100% 的可靠性“不管成功或失败”运行。无论您是在谈论 C# 程序的“finally”子句，还是 SQL Server 上的 BEGIN TRY...END TRY BEGIN CATCH...END CATCH 结构，都没有关系。

问题是像这样的接线端子不能在*所有可能的*故障模式下执行。每种*可能的*故障模式都必须包括软件、硬件和网络故障。如果您的客户是政府，它可能也必须包括导弹攻击。

必须参考[经典的 TheDailyWTF](http://thedailywtf.com/Articles/My-Tales.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T17:05:45.520

事实上，`BEGIN TRY... END TRY...BEGIN CATCH... END CATCH`SQL Server 中有一个结构。我经常使用它。

这是一个概述——当然，关于选择错误信息的部分是可选的——在你的情况下做有意义的事情。

```
BEGIN TRY
        -- do something here.

    /*  Following line can be used to force termination for testing purposes.
        No data changes will be committed.
    */
    --RAISERROR('testing', 99, 1);

    PRINT 'Successful completion; committing transaction.';
    COMMIT TRAN;
END TRY
BEGIN CATCH
    SELECT 
        ERROR_NUMBER() AS ErrorNumber
        ,ERROR_SEVERITY() AS ErrorSeverity
        ,ERROR_STATE() AS ErrorState
        ,ERROR_PROCEDURE() AS ErrorProcedure
        ,ERROR_LINE() AS ErrorLine
        ,ERROR_MESSAGE() AS ErrorMessage;

    IF @@TRANCOUNT > 0
        ROLLBACK TRANSACTION;
    RAISERROR(N'Error occurred; rolling back and terminating.',18,1);
END CATCH; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T12:08:50.700

最后一个每次都会引发错误，不是吗。

如果您想捕获回滚错误 - 您还需要将其放入 try..except 块中。

# maven - Maven 清理忽略单个文件

> ID：13054107
> 
> 赞同：3
> 
> 时间：2012-10-24T17:03:36.380
> 
> 标签：maven, maven-plugin

我有一个 Maven 项目，它是多个子项目的集合。该项目使用 maven javadoc 插件将所有子项目 javadoc 聚合到`target/`文件夹中的单个目录中。`target/`我想保留在 javadoc 页面中的文件夹中有一个附加文件。但是，每次我运行时`clean`，这个文件都会被删除。我想知道是否有办法删除整个目标目录并只留下一个文件。我的插件当前配置如下：

```
<plugin>
  <artifactId>maven-clean-plugin</artifactId>
    <execution>
      <executions>
        <id>default-clean</id>
        <configuration>
          <excludeDefaultDirectories>true</excludeDefaultDirectories>
            <filesets>
              <fileset>
                <directory>target</directory>
                <excludes>
                  <exclude>path/to/myFile.xml</exclude>
                </excludes>
                <followSymlinks>false</followSymlinks>
              <fileset>
           </filesets>
         </configuration>
       <phase>initialize</phase>
       <goals>
         <goal>clean</goal>
       </goals>
     </execution>
   </executions>
</plugin> 
```

[我在这里](https://stackoverflow.com/questions/5801439/maven-clean-plugin-exclude-cvsignore)看到了一个类似的问题，但该解决方案似乎对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-23T07:45:11.857

我也有同样的需求，在使用插件玩了一段时间后，我找到了一个有效的解决方案，可以避免删除目标文件夹中的特定文件。

假设您不想删除文件夹`do_not_delete`中的`target`文件，此配置对我有用：

```
<plugin>
    <artifactId>maven-clean-plugin</artifactId>
    <version>3.0.0</version>
    <configuration>
        <excludeDefaultDirectories>true</excludeDefaultDirectories>
        <filesets>
            <fileset>
                <directory>target</directory>
                <followSymlinks>false</followSymlinks>
                <useDefaultExcludes>false</useDefaultExcludes>
                <excludes>
                    <exclude>do_not_delete</exclude>
                </excludes>
            </fileset>
        </filesets>
    </configuration>
</plugin> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:24:05.443

将该静态文件放在资源文件夹中，然后将其`maven-resources-plugin`复制到特定的目标文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T13:30:58.750

正如您所说，可以从您的项目中明确排除或包含文件。您对您提供的排除路径持肯定态度吗？

```
<filesets>
  <fileset>
    <directory>src/main/generated</directory>
    <followSymlinks>false</followSymlinks>
    <useDefaultExcludes>true</useDefaultExcludes>
    <includes>
      <include>*.java</include>
    </includes>
    <excludes>
      <exclude>MyPathRelativeToDirectoryTag/myFile.xml</exclude>
    </excludes>
  </fileset>
</filesets> 
```

# ios - 通过 ID 数组映射 RestKit 中的关系不起作用

> ID：13054112
> 
> 赞同：4
> 
> 时间：2012-10-24T17:03:51.133
> 
> 标签：ios, restkit

我正在尝试通过 RestKit 将用户和组映射到 CoreData 对象，保持两者之间的关系。

用户的 JSON 类似于

```
{"users":
  [{"fullname": "John Doe", "_id": "1"}
   ...
  ]
} 
```

组的 JSON 类似于

```
{"groups":
  [{"name": "John's group", "_id": "a",
    "members": ["1", "2"]
   ...
  ]
} 
```

我也有相应的 Core Data 对象，`User`并且`Group`，在组和用户之间具有一对多的关系映射。中的关系属性`Group`被调用`members`，一个单独的`NSArray`被调用`memberIDs`保存所有成员用户的字符串 ID 数组。

我想在 RestKit 中完成的是加载这些对象并为我映射关系。加载用户的代码是直接的标准东西，加载组的代码类似于

```
RKObjectManager* objectManager = [RKObjectManager sharedManager];
RKManagedObjectMapping* groupMapping = [RKManagedObjectMapping mappingForClass:[Group class] inManagedObjectStore:objectManager.objectStore];
groupMapping.primaryKeyAttribute = @"identifier";
[groupMapping mapKeyPath:@"_id" toAttribute:@"identifier"];
[groupMapping mapKeyPath:@"name" toAttribute:@"name"];
[groupMapping mapKeyPath:@"members" toAttribute:@"memberIDs"];
[objectManager.mappingProvider setMapping:groupMapping forKeyPath:@"groups"];

// Create an empty user mapping to handle the relationship mapping
RKManagedObjectMapping* userMapping = [RKManagedObjectMapping mappingForClass:[User class] inManagedObjectStore:objectManager.objectStore];

[groupMapping hasMany:@"members" withMapping:userMapping];
[groupMapping connectRelationship:@"members" withObjectForPrimaryKeyAttribute:@"memberIDs"];

RKObjectRouter* router = objectManager.router;

[router routeClass:[Group class] toResourcePath:@"/rest/groups/:identifier"];
[router routeClass:[Group class] toResourcePath:@"/rest/groups/" forMethod:RKRequestMethodPOST];
// Assume url is properly defined to point to the right path...
[[RKObjectManager sharedManager] loadObjectsAtResourcePath:url usingBlock:^(RKObjectLoader *loader) {}]; 
```

当我运行此代码时，我多次收到以下警告（似乎每个关系大约两次）：

```
2012-10-24 08:55:10.170 Test[35023:18503] W restkit.core_data.cache:RKEntityByAttributeCache.m:205 Unable to add object with nil value for attribute 'identifier': <User: 0x86f7fc0> (entity: User; id: 0x8652400 <x-coredata:///User/t01A9EDBD-A523-4806-AFC2-9B06873D764E531> ; data: {
    fullname = nil;
    identifier = nil;
}) 
```

奇怪的是，关系设置正确（甚至查看了 sqlite 数据库，那里的一切看起来都很好）但我对 RestKit 代码中明显出错的地方不满意，它似乎与我在上面的代码中创建的虚假用户映射（它是空的，因为在 ID 数组中没有要映射的内容）。

我尝试了替代方案，例如当我添加键路径映射时：

```
[userMapping mapKeyPath:@"" toAttribute:@"identifier"]; 
```

它抱怨，显然是因为关键路径是空的

```
2012-10-24 09:24:11.735 Test[35399:14003] !! Uncaught exception !!
[<__NSCFString 0xa57f460> valueForUndefinedKey:]: this class is not key value coding-compliant for the key . 
```

如果我尝试使用真实的`User`映射

```
[groupMapping hasMany:@"members" withMapping:[[RKObjectManager sharedManager].mappingProvider objectMappingForKeyPath:@"users"]]; 
```

我收到以下错误

```
2012-10-24 09:52:49.973 Test[35799:18403] !! Uncaught exception !!
[<__NSCFString 0xa56e9a0> valueForUndefinedKey:]: this class is not key value coding-compliant for the key _id.
2012-10-24 09:52:49.973 Test[35799:18403] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<__NSCFString 0xa56e9a0> valueForUndefinedKey:]: this class is not key value coding-compliant for the key _id.' 
```

似乎 RestKit 正在尝试将 memberIDs 数组中的 ID 字符串本身映射到`User`对象，这没有任何意义。我见过一些例子，其中关系数组是一个带有键（例如称为`id`）的字典列表，其中包含另一个对象的引用 ID，例如：

```
{"groups":
  [{"name": "John's group", "_id": "a",
    "members": [
      {"_id": "1"},
      {"_id": "2"}
     ]
   ...
  ]
} 
```

但我不想以这种方式更改我的 JSON（此外，我希望 RestKit 足够灵活以支持另一种方式。）

有谁知道在 RestKit 中进行这种关系映射的正确方法是什么？

**更新**

我最终修改了 REST 接口以发送包含用户对象 ID 的字典列表（就像上面的最后一个示例一样），并让它工作。仍然对设置不完全满意，但代码现在看起来像

```
RKObjectManager* objectManager = [RKObjectManager sharedManager];
RKManagedObjectMapping* groupMapping = [RKManagedObjectMapping mappingForClass:[Group class] inManagedObjectStore:objectManager.objectStore];
groupMapping.primaryKeyAttribute = @"identifier";
[groupMapping mapKeyPath:@"_id" toAttribute:@"identifier"];
[groupMapping mapKeyPath:@"name" toAttribute:@"name"];
[groupMapping mapKeyPath:@"members._id" toAttribute:@"memberIDs"];
[objectManager.mappingProvider setMapping:groupMapping forKeyPath:@"groups"];

// Create an empty user mapping to handle the relationship mapping
RKManagedObjectMapping* userMapping = [RKManagedObjectMapping mappingForClass:[User class] inManagedObjectStore:objectManager.objectStore];
userMapping.primaryKeyAttribute = @"identifier";
[userMapping mapKeyPath:@"_id" toAttribute:@"identifier"];

[groupMapping hasMany:@"members" withMapping:userMapping];
[groupMapping connectRelationship:@"members" withObjectForPrimaryKeyAttribute:@"memberIDs"];

RKObjectRouter* router = objectManager.router;

[router routeClass:[Group class] toResourcePath:@"/rest/groups/:identifier"];
[router routeClass:[Group class] toResourcePath:@"/rest/groups/" forMethod:RKRequestMethodPOST];
// Assume url is properly defined to point to the right path...
[[RKObjectManager sharedManager] loadObjectsAtResourcePath:url usingBlock:^(RKObjectLoader *loader) {}]; 
```

以防万一这对处于类似情况的其他人有所帮助。我采用的方法可能仍然存在一些问题，但到目前为止一切都很好（它甚至可以处理乱序加载，这很好） - 如果我的原始问题有答案，我仍然很乐意听取任何人的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:13:17.010

找到了一种方法来完成这项工作，并且还意识到我的问题中的更新方法只应该用于嵌套对象，而不是引用对象。这个线程让我走上了正确的轨道：[https](https://groups.google.com/forum/#!msg/restkit/swB1Akv2lTE/mnP2OMSqElwJ) : //groups.google.com/forum/#!msg/restkit/swB1Akv2lT​​E/mnP2OMSqElwJ（如果你正在处理 RestKit 中的关系，值得一读）

假设 JSON 组仍然看​​起来像原始 JSON：

```
{"groups":
  [{"name": "John's group", "_id": "a",
    "members": ["1", "2"]
   ...
  ]
} 
```

还假设用户被映射到一个键路径`users`（即类似的东西`[objectManager.mappingProvider setMapping:userMapping forKeyPath:@"users"];`）映射关系的正确方法如下所示：

```
RKObjectManager* objectManager = [RKObjectManager sharedManager];
RKManagedObjectMapping* groupMapping = [RKManagedObjectMapping mappingForClass:[Group class] inManagedObjectStore:objectManager.objectStore];
groupMapping.primaryKeyAttribute = @"identifier";
[groupMapping mapKeyPath:@"_id" toAttribute:@"identifier"];
[groupMapping mapKeyPath:@"name" toAttribute:@"name"];
[groupMapping mapKeyPath:@"members" toAttribute:@"memberIDs"];
[objectManager.mappingProvider setMapping:groupMapping forKeyPath:@"groups"];

[groupMapping mapKeyPath:@"users" toRelationship:@"members" withMapping:[[RKObjectManager sharedManager].mappingProvider objectMappingForKeyPath:@"users"] serialize:NO];
[groupMapping connectRelationship:@"members" withObjectForPrimaryKeyAttribute:@"memberIDs"];

RKObjectRouter* router = objectManager.router;
[router routeClass:[Group class] toResourcePath:@"/rest/groups/:identifier"];
[router routeClass:[Group class] toResourcePath:@"/rest/groups/" forMethod:RKRequestMethodPOST];
// Assume url is properly defined to point to the right path...
[[RKObjectManager sharedManager] loadObjectsAtResourcePath:url usingBlock:^(RKObjectLoader *loader) {}]; 
```

当我之前尝试过这种方法时，让我感到困惑的是这条线

```
[groupMapping mapKeyPath:@"users" toRelationship:@"members" withMapping:[[RKObjectManager sharedManager].mappingProvider objectMappingForKeyPath:@"users"] serialize:NO]; 
```

其中第一个键路径是指被引用对象的键路径映射（`users`在这种情况下），而不是`group`被映射对象内关系的键路径（`members`在这种情况下）。

随着这一变化，所有关系都按预期工作，我很高兴。

# mysql - 将本地 .CSV 文件加载到 MYSQL 表中

> ID：13054116
> 
> 赞同：0
> 
> 时间：2012-10-24T17:03:58.233
> 
> 标签：mysql

我有一个名为 UpdateTable.csv 的本地文件，如下所示：

```
Chromosome  ProbeCount  TranscriptCount

   chr1       84453         2887
   chr10      32012         1087
   chr11      49780         1721
   chr12      39723         1402 
```

...ETC

我刚刚创建了一个名为“SUMMARY”的表，它具有相同的行标题。我需要将文件从我的桌面导入到我的表中..

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:16:26.927

您可以使用`Load data infile`

在这里阅读更多：http: [//dev.mysql.com/doc/refman/5.6/en/load-data.html](http://dev.mysql.com/doc/refman/5.6/en/load-data.html)

在您的情况下，类似于：

```
LOAD DATA INFILE 'c:/users/USER_NAME/Desktop/file.csv'
    INTO TABLE summary
    FIELDS terminated by "\t"
    LINES terminated by "\r\n" 
```

当然，这个 SQL 只是一个例子。请阅读手册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:08:47.597

```
mysqlimport [options] db_name textfile1 [textfile2 ...] 
```

> 对于在命令行命名的每个文本文件，mysqlimport 会从文件名中去除任何扩展名，并使用结果来确定要将文件内容导入到的表的名称。例如，名为 Patient.txt、Patient.text 和 Patient 的文件都将被导入到名为 Patient 的表中。

因此，在您的情况下，您必须将文件名从 UpdateTable.csv 更改为 Summary.csv 并删除该文件的前两行。它会像

`mysqlimport --fields-escaped-by=, db_name SUMMARY.csv`

**每秒编辑一次，您的文件不是 csv（逗号分隔...）。您的文件是制表符分隔的，因此转义字段的参数应该是 '\t'

# ajax - Ajax 使用 Django 获取请求

> ID：13054118
> 
> 赞同：0
> 
> 时间：2012-10-24T17:03:58.660
> 
> 标签：ajax, django, jquery

我尝试在我的 django 应用程序中实现一个 ajax 请求，以获取我在我的应用程序中实现的闪存录像机的观众数量。这个数字在一个 xml 文件中。

这是我在模板中使用的js：

```
 var url = window.location.pathname.split('/');
    var id = url[2];     // The id of my video is www.mysite/video/ID.com

    setInterval(function() {
        $.ajax({
            type: "GET",
            url: "http://myxmlfiles",
            success: parseXml
        });
    }, 2000);

    function parseXml(xml){
        $(xml).find("user").each(function() {

            if($(this).attr("id") === id) {
                $(".DubScore").html($(this).attr("count"))
            }

        });
    } 
```

在我的html中：

```
 <div class="DubScore"> </div> 
```

xml 文件呈现：

```
 <streams>
   <user id="3" count="1"/>
   </streams> 
```

问题是什么都没有出现。我真的不知道我做错了什么。

任何建议都会很棒，

编辑：当我运行我的 js 控制台时，我可以看到我想要的观众数量。所以唯一的问题是它不会在我的 div 中显示这个数字。问题出在js和html之间。如果您对如何修复它有任何想法，那就太好了。谢谢

# javascript - 如何通过 .append() 在 dom 中显示 json 对象数组

> ID：13054119
> 
> 赞同：0
> 
> 时间：2012-10-24T17:04:00.737
> 
> 标签：javascript, jquery, json

所以我有一个从 json 对象中提取的数组，我想在名为#practice 的 div 中显示为图像：

```
["<img src ="http://domain.com/wp-content/uploads/2012/10/random04-128x84.jpg"/>", 

"<img src ="http://domain.com/wp-content/uploads/2012/10/chuck_norris_random_fact_generator_6_3957_2224_image_2578-128x84.jpg"/>"] 
```

这是我到目前为止的方法...

```
$.getJSON('wp-content/themes/invoke-dmd/get-client-logos.php/', function (data) {
    var items = [];
    $.each(data, function(key, val) {
        items.push('<img src ="' + val.url + '"/>');
    });
  console.log(items)
  $('#practice').append(items);
}); 
```

它如上所述注销数组......但无法在 div 中显示它。

如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:06:07.017

您正在尝试将图像 HTML 添加为数组，您需要添加一个字符串：

```
$('#practice').append(items.join(" ")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T17:06:09.503

试试这个，

```
$.getJSON('wp-content/themes/invoke-dmd/get-client-logos.php/', function (data) {

    $.each(data, function(key, val) {
        $('#practice').append('<img src ="' + val.url + '"/>');
    });

}); 
```

# jakarta-ee - Primefaces Push 可以跨档案工作吗？

> ID：13054123
> 
> 赞同：0
> 
> 时间：2012-10-24T17:04:17.440
> 
> 标签：jakarta-ee, primefaces

我正在尝试让 PrimeFaces Push 工作。Web 端封装在 WAR 中，MDB 封装在 JAR 中，这些都在 EAR 中。我正在使用以下组件。

Glassfish 3.1.2
PrimeFaces 3.4.1
Firefox 10.0.7
Linux

我在 JAR 的消息驱动 bean 中有以下代码，每次 MDB 收到消息时，我都希望在 Web 应用程序中显示咆哮消息，但是，这并没有发生。我将 WAR 和 JAR 打包在 EAR 中。难道这不适用于容器或与我的包装方式有关？

```
pushContext = PushContextFactory.getDefault().getPushContext();
pushContext.push("/test", new FacesMessage("Test Summary", "Test Detail")); 
```

这是战争的 web.xml。

```
<servlet>
    <servlet-name>Push Servlet</servlet-name>
    <servlet-class>org.primefaces.push.PushServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>Push Servlet</servlet-name>
    <url-pattern>/primepush/*</url-pattern>
</servlet-mapping>

<context-param>
    <param-name>primefaces.PUSH_SERVER_URL</param-name>
    <param-value>ws://localhost:8080</param-value>
</context-param> 
```

这是 index.xhtml。

```
<script type="text/javascript">
    function handleMessage(msg) {
        msg.severity = 'info';
        growl.show([msg]);
    }
</script>

<p:growl id="growl" widgetVar="growl" showDetail="true"/>

<p:socket channel="/test" onMessage="handleMessage"/> 
```

当我从 MDB 调用 pushContext.push() 时，我得到 println() 输出，它显示了通过 MDB 的 onMessage() 一直执行的所有内容。没有错误，一切看起来都很好。

我只是没有看到 index.xhtml 页面（即 javascript messageHandle）中发生任何事情。

我没有使用 Maven，所以我不确定如何翻译 pom.xml。我的 EAR 如下所示。

```
.
|-- META-INF
|   |-- MANIFEST.MF
|   `-- application.xml
|-- ejb.jar
|-- app1.war
|-- lib
|   |-- atmosphere-cometd-1.0.2.jar
|   |-- atmosphere-compat-jbossweb-1.0.2.jar
|   |-- atmosphere-compat-tomcat-1.0.2.jar
|   |-- atmosphere-compat-tomcat7-1.0.2.jar
|   |-- atmosphere-runtime-1.0.2.jar
|   |-- primefaces-3.4.1.jar
|   |-- redmond-1.0.8.jar
|   `-- slf4j-api-1.6.1.jar
`-- otherapp.war 
```

我的 EJB 中没有 primefaces.jar，但它位于 lib 目录中（如上所示），并且我在 application.xml 中有它。

```
<module>
    <ejb>ejb.jar</ejb>
</module>

<library-directory>lib</library-directory> 
```

# iphone - 调用dismissViewControllerAnimated 时的exc_bad_access

> ID：13054127
> 
> 赞同：0
> 
> 时间：2012-10-24T17:04:30.143
> 
> 标签：iphone, ios, objective-c-blocks, dispatch-async

我有一个向上滑动的 ViewController。当您单击“保存”时，它会向服务器发送请求。当请求完成时，它会关闭 ViewController。我将 NSURLConnection 切换为使用异步和块（https://github.com/rickerbh/NSURLConnection-Blocks）。现在关闭 ViewController 会引发“线程 2：程序接收到的信号：EXC_BAD_ACCESS”。我正在使用 ARC，如果这很重要的话。

```
- (IBAction) savePressed
{
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://api.com/items/create"]];

    //NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    [NSURLConnection asyncRequest:request success:^(NSData *data, NSURLResponse *response) {
        [self close];
    } failure:^(NSData *data, NSError *error) {
        [self close];
    }];
}

- (void) close
{
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

这是日志

```
2012-10-24 10:32:43.780 Prayrbox[22268:1703] bool _WebTryThreadLock(bool), 0x1f21fd90: Tried to obtain the web lock from a thread other than the main thread or the web thread. This may be a result of calling to UIKit from a secondary thread. Crashing now...
1   0x347dc927 WebThreadLock
2   0x36718615 <redacted>
3   0x366d0a85 <redacted>
4   0x3678d789 <redacted>
5   0x366c0637 <redacted>
6   0x366d50e7 <redacted>
7   0x368c1f11 <redacted>
8   0x366d4969 <redacted>
9   0x36744745 <redacted>
10  0x366907ad <redacted>
11  0x7ef71 -[ComposeViewController close]
12  0x7eec5 __36-[ComposeViewController savePressed]_block_invoke_0
13  0x82d8f __56+[NSURLConnection(Blocks) asyncRequest:success:failure:]_block_invoke_0
14  0x37e8811f <redacted>
15  0x37e96259 <redacted>
16  0x37e963b9 <redacted>
17  0x37b30a11 <redacted>
18  0x37b308a4 start_wqthread
[Switching to process 10755 thread 0x2a03]
[Switching to process 10755 thread 0x2a03]
[unknown](gdb) 
```

我花了 2 个小时在这方面寻求帮助。如果有人知道有什么可以帮助的，请说出来！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T17:43:25.553

乍一看，我同意上述评论，即您在驳回该观点时可能走错了路。

UI Stuff 应该在 Main 上完成，因此为了强制执行，您可以执行以下操作：

```
-(void) close {
    if([NSThread isMainThread]) {
        [self dismissViewControllerAnimated:YES completion:nil];
    }
    else {
        [self performSelectorOnMainThread:@selector(close)
                               withObject:nil
                           waitUntilDone:YES];
    }
} 
```

而不是从您的块中执行 performSelectorOnMainThread，这将确保无论何时调用它，您都会在 main 上。

# excel-2010 - Excel 2010 使用 IF AND 公式

> ID：13054129
> 
> 赞同：1
> 
> 时间：2012-10-24T17:04:38.907
> 
> 标签：excel-2010

我正在尝试创建一个公式，说明 iF A1 已完成显示 0。（忽略其他单元格）如果 A1 未完成且未超过截止日期（单元格 B2），则显示 1，

如果未完成并超过截止日期，请显示 3。

然后基于 1,2 或 3 我可以显示我想要的内容（在这种情况下为红色、黄色或绿色的图标）

这是我能想出的壁橱公式，但我不在那里......

=IF(AND(D2="是",B2>今天(),),1,0)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:15:04.800

你可以做：

```
=IF(A1="Yes",0,IF(B1>$F$1,1,3)) 
```

其中 F1 = 今天（）

例子：

```
No  11/11/2012          1   10/24/2012
Yes 10/12/2012          0   
Yes 11/13/2012          0   
No  9/14/2012                    3  
No  11/15/2012          1   
Yes 11/16/2012          0   
Yes 11/17/2012          0   
No  10/18/2012          3 
```

# servlets - 网格内容 JSON 转换

> ID：13054132
> 
> 赞同：0
> 
> 时间：2012-10-24T17:04:43.363
> 
> 标签：servlets, extjs, extjs4, extjs4.1

我有一个网格，用户可以在其中添加任意数量的新行。添加所有行后，他们单击“保存”按钮。单击保存按钮时，我想将用户以 JSON 格式输入的所有数据发送到服务器端代码（在我的例子中是一个 servlet）

以下是模型和商店定义：

```
 Ext.define('Plant', {
    extend: 'Ext.data.Model',
    fields: [
        // the 'name' below matches the tag name to read, except 'availDate'
        // which is mapped to the tag 'availability'
        {name: 'common', type: 'string'},
        {name: 'botanical', type: 'string'},
        {name: 'light'},
        {name: 'price', type: 'float'},
        // dates can be automatically converted by specifying dateFormat
        {name: 'availDate', mapping: 'availability', type: 'date', dateFormat: 'm/d/Y'},
        {name: 'indoor', type: 'bool'}
    ]
});

// create the Data Store
var store = Ext.create('Ext.data.Store', {
    // destroy the store if the grid is destroyed
    autoDestroy: true,
    model: 'Plant'
}); 
```

单击保存按钮后，我可以像这样获得商店：

```
{
        text: 'Save',
        handler : function(){
            //Getting the store
            var records = grid.getStore();
            console.log(records.getCount());
            Ext.Ajax.request({
                url: '/CellEditing/CellEditingGridServlet',
                method: 'POST',
                jsonData: {
                    //How to assign the store here such that 
                    //it is send in a JSON format to the server?
                },
                callback: function (options, success, response) {

                }
            });
        } 
```

但我不知道如何将商店内容转换为 JSON 并将其发送`jsonData`到 ajax 请求中。

我希望服务器端的 JSON 数据是这样的：

```
{"plantDetails":
[
{
    "common": Plant1,
    "light": 'shady',
    "price": 25.00,
    "availDate": '05/05/2013',
    "indoor": 'Yes'
}, 
{
    "common": Plant2,
    "light": 'most shady',
    "price": 15.00,
    "availDate": '12/09/2012',
    "indoor": 'No'
},
]
} 
```

请让我知道如何实现这一目标。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T15:16:26.593

店铺

```
writer :
            {
            type : 'json',
            allowSingle : true
            } 
```

根据您的用例试验 allowSingle

在您的控制器中

```
//if you want to set extra params
  yourStore.getProxy().setExtraParam("anyParam",anyValue);
// sync the store
  yourStore.sync({success : function() {
         yourGrid.setLoading(false); 
    .. },
    scope : this // within the scope of the controller
  }); 
```

您应该使用新的 id 创建模型（您可以在服务器端忽略它并使用自己的密钥生成，但它让 extjs4 出于内部目的知道已创建新记录）。

创建模型实例

```
var r = Ext.create('yourModel', { id: idGen++, propA : valA , ... }); 
```

插入网格

```
store.insert(0,r);
var editPlugin = grid.getPlugin(editPluginId);
editPlugin.startEdit(0,1); 
```

一旦您收到回复，id 就可以更新为它们的真实值。

在商店里

```
reader :
    {
        type : 'json',
        root : 'yourdata',
        successProperty : 'success',
        idProperty : 'id'
    } 
```

如果您要使用相同的网格进行处理和编辑，那么您可以使用 write 事件或适当的事件

在商店中进行更高级的处理

```
listeners :
    {
        write : function(store,operation, eOpts)
        {
            var insertedData = Ext.decode(operation.response.responseText);
                    .. do something
        }
    } 
```

我会推荐使用 Extjs4 的 mvc 架构

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T20:51:29.513

同意 Neil 的观点，正确的做法是通过配备代理和作家的可编辑商店。请参阅此处的示例：[http ://docs.sencha.com/ext-js/4-1/#!/example/grid/cell-editing.html](http://docs.sencha.com/ext-js/4-1/#!/example/grid/cell-editing.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T12:55:36.457

这是我尝试过的，它似乎有效：

```
 var store = Ext.create('Ext.data.Store', {
    // destroy the store if the grid is destroyed
    autoDestroy: true,
    model: 'Plant',
    proxy: {
        type: 'ajax',
        url: '/CellEditing/CellEditingGridServlet',
        writer: {
            type: 'json',
            root: 'plantDetails'
        }
    }

handler : function(){
            grid.getStore().sync(); 
```

但是我在服务器端的 JSON 中获得了一个附加参数：

```
"id": null 
```

我的模型中没有这个`id`设置，那么这是从哪里来的？有没有办法为它设置一些值而不是使用默认的空值？

# entity-framework-5 - MVC EF5 框架初始化数据库错误

> ID：13054138
> 
> 赞同：3
> 
> 时间：2012-10-24T17:04:56.500
> 
> 标签：entity-framework-5

我正在使用 EF 5 和 MVC 4。

在我第一次部署项目（使用 web deploy）并启动网站后，我的数据库会自动创建，我可以看到 simplemembership 表已创建。我所有的其他桌子都没有。simplemembership 表和 my 表合并到一个数据库中。我没有使用两个单独的数据库。这在我的开发环境中运行良好。

当我转到列出另一个表的数据（不是 simplemembership 的一部分）的控制器时，我收到以下错误：

```
 [SqlException (0x80131904): There is already an object named 'UserProfile' in the database.]
   System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction) +388
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose) +688
   System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady) +4403
   System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout) +2755286
   System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite) +527
   System.Data.SqlClient.SqlCommand.ExecuteNonQuery() +290
   System.Data.Entity.Migrations.DbMigrator.ExecuteSql(DbTransaction transaction, MigrationStatement migrationStatement) +247
   System.Data.Entity.Migrations.DbMigrator.ExecuteStatements(IEnumerable`1 migrationStatements) +202
   System.Data.Entity.Migrations.Infrastructure.MigratorBase.ExecuteStatements(IEnumerable`1 migrationStatements) +19
   System.Data.Entity.Migrations.DbMigrator.ApplyMigration(DbMigration migration, DbMigration lastMigration) +472
   System.Data.Entity.Migrations.DbMigrator.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId) +175
   System.Data.Entity.Migrations.Infrastructure.MigratorBase.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId) +19
   System.Data.Entity.MigrateDatabaseToLatestVersion`2.InitializeDatabase(TContext context) +150
   System.Data.Entity.<>c__DisplayClass2`1.<SetInitializerInternal>b__0(DbContext c) +97
   System.Data.Entity.Internal.<>c__DisplayClass8.<PerformDatabaseInitialization>b__6() +23
   System.Data.Entity.Internal.InternalContext.PerformInitializationAction(Action action) +66
   System.Data.Entity.Internal.InternalContext.PerformDatabaseInitialization() +225
   System.Data.Entity.Internal.RetryAction`1.PerformAction(TInput input) +208
   System.Data.Entity.Internal.LazyInternalContext.InitializeDatabaseAction(Action`1 action) +235
   System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType) +36
   System.Data.Entity.Internal.Linq.InternalSet`1.Initialize() +71
   System.Data.Entity.Internal.Linq.InternalSet`1.GetEnumerator() +21
   System.Data.Entity.Infrastructure.DbQuery`1.System.Collections.Generic.IEnumerable<TResult>.GetEnumerator() +62
   System.Collections.Generic.List`1..ctor(IEnumerable`1 collection) +446
   System.Linq.Enumerable.ToList(IEnumerable`1 source) +80
   ProofPixModels.Controllers.SubscriberController.Index() in SubscriberController.cs:21
   lambda_method(Closure , ControllerBase , Object[] ) +43
   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +248
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +39
   System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeSynchronousActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +15
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +15
   System.Web.Mvc.Async.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33() +120
   System.Web.Mvc.Async.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49() +452
   System.Web.Mvc.Async.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult) +15
   System.Web.Mvc.Async.<>c__DisplayClass2a.<BeginInvokeAction>b__20() +32
   System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult) +230
   System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__18(IAsyncResult asyncResult) +28
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +15
   System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +53
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +15
   System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.EndExecute(IAsyncResult asyncResult) +15
   System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__3(IAsyncResult asyncResult) +42
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +15
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +14
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +606
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +288 
```

这里显然有两个 InitializeDatabase 命令，但我无法弄清楚为什么会在这张表上发生冲突。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-14T05:57:00.173

与上面相同，如果您已经运行了一个 asp-net 成员脚本表，则需要通过删除所有这些其他自动生成表来清理它。一旦你这样做了，你可以运行命令 update-database -verbose，你会看到它创建了 UserProfile 表没有问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T19:16:11.063

我发现问题是在迁移文件中引起的。我的一个模型包含一组 UserProfile，因此这使 EF 创建了一个外键，这似乎迫使 EF 编写代码来创建表。它不知道 simplemembership 显然会为此表执行此操作。

无论如何，我通过注释掉迁移文件夹中的 create UserProfile 表块解决了这个问题。我确实确保用 AddForeignKey 方法替换它以保持关系完整。

不确定这是正确的方法，但它有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T13:56:38.103

如果您之前已经创建了 asp-net 成员表，也会发生这种情况，这会试图防止您意外丢失所有用户的凭据。

删除这些表和视图，此错误就会消失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-20T09:23:25.170

有同样的问题，然后手动编辑 Initialmigration 脚本，顶部放置表 UserProfile 并执行 Update-Database -Verbose。失败，因为有 n 个外键约束。去我的本地数据库删除了 UserProfile 表，所有表都有外键。执行迁移并创建表。

# php - 使用 preg_match_all 从文本中选择数字

> ID：13054139
> 
> 赞同：-3
> 
> 时间：2012-10-24T17:04:56.677
> 
> 标签：php, preg-match-all

我找不到做我想做的事的想法

所以我决定在这里问我的问题:)

我想用 preg_match_all 从文本中选择组数

```
(itemgroup (index 24813) (group (200 24813)))
(itemgroup (index 2481) (group (50 2461)(100 2471)(150 2491))) 
```

我希望输出是这样的

```
index 24813 => 24813

index 2481 => 2461 / 2471 / 2491 
```

有什么想法如何使用 preg_match_all

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:20:50.557

试试这个代码：

```
<?php
$string = '
(itemgroup (index 24813) (group (200 24813)))
(itemgroup (index 2481) (group (50 2461)(100 2471)(150 2491)))
';

preg_match_all('#\(itemgroup \(index ([0-9]+)\) \(group ([0-9()\s]+)\)\n*#', $string, $match);
$index = $match[1];
$groups = $match[2];
for ($i = 0; $i < count($index); ++$i) {
    preg_match_all('#\([0-9]+ ([0-9]+)\)#', $groups[$i], $group);
    $group = implode(' / ', $group[1]);
    echo 'index ' . $index[$i] . ' => ' . $group . "\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:06:33.363

如果其中有 3 个数字，我现在正在尝试从中间的 Arcs 中选择数字

arcs 和 arcs 中的最后一个有 2 个数字

例如 (100 24715) 输出应该是：24715

(150 2491 58) 输出应为：2491

我试过

```
<?php

 $string = '((50 24610 0)(100 24715)(150 2491 58))';

         preg_match_all('/\s*\(\s*[0-9]+\s*?([0-9]\d+)+\s*?[0-9]+\s*\)/',
 $string, $matches);

         $matches = implode(' & ', $matches[1]);

         echo $matches . "<br>"; 

?> 
```

输出

```
24610 & 2471 & 2491 
```

输出应该是

```
24610 & 24715 & 2491 
```

我不知道为什么它在中间数字中不显示数字 5

# android - android中多种listview布局行的通用适配器

> ID：13054143
> 
> 赞同：7
> 
> 时间：2012-10-24T17:05:04.460
> 
> 标签：android, design-patterns, listview, android-adapter

对于具有不同行布局模板的每个列表视图，我必须创建每个自定义适配器，它们执行相同的操作：加载 xml 行布局、通过 id 获取控制（TextView、ImageView 等）、显示数据......像这样：

```
public class CommentAdapter extends BaseAdapter {

protected Activity activity;
protected static LayoutInflater layoutInflater = null;  
protected List<Comment> lst;    

public CommentAdapter(Activity activity,  List<Comment> lst){
    this.activity = activity;       
    this.lst = lst;
    layoutInflater = (LayoutInflater)this.activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

public int getCount() {     
    return lst.size();
}

public Object getItem(int position) {   
    return lst.get(position);
}

public long getItemId(int position) {   
    return position;
}

public static class ViewHolder{
    public TextView textName;
    public TextView textComment;
    public ImageView image;
}

public  View getView(int position, View convertView, ViewGroup parent) {
    View v = convertView;
    ViewHolder viewHolder;
    if (v == null) {
        v = layoutInflater.inflate(R.layout.listitem, null);
        viewHolder = new ViewHolder();
        viewHolder.textName = (TextView) v.findViewById(R.id.txtName);
        viewHolder.image = (ImageView) v.findViewById(R.id.icon);
        viewHolder.textComment = (TextView)v.findViewById(R.id.txtComment);
        v.setTag(viewHolder);
    } else {
        viewHolder = (ViewHolder) v.getTag();
    }
    Static.overrideFonts(v);
    viewHolder.image.setBackgroundResource(lst.get(position).Icon);
    viewHolder.textName.setText(lst.get(position).Name);
    viewHolder.textComment.setText(lst.get(position).Comment);

    return v;
}
} 
```

对于多种列表视图（不同的行布局模板），我必须创建许多适配器。
所以，问题是我想创建一个模板适配器，它可以是动态加载行xml，基于其id的地图视图控件（可能使用反射）。行xml布局、控件id、视图控件将在其他地方定义。
有没有`design pattern`，`example`或者`framework`可以做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T19:22:10.297

这样的事情似乎是可行的。我根本没有测试过这个，但理论上你可以摆脱这样的事情：

```
public interface Adaptable {
    //Interface that any object you make that should be put in a listview
    //should implement
    public View buildView(View v, LayoutInflater inflater);
    public int getLayoutId();
}

public class MyObject implements Adaptable
    //Just hardcode your layout for this type of object
    public int getLayoutId() {
        return R.layout.myLayout;
    }

    //getView() will pass the recycled view to this method
    //which will handle building the view per this object
    public View buildView(View v, LayoutInflater inflater) {
        if(v == null) {
            v = inflater.inflate(getLayoutId());
            //Other initialization
        } //other initialization

        return v;
    }
}

//Then make the generic adapter that handles anything that implements
//the Adaptable interface
public GenericAdapter implements ListAdapter {
    private LayoutInflater inflater;
    private List<Adaptable> items;
    public GenericAdapter(List<Adaptable> items, Context c) {
        this.items = items;
        inflater = LayoutInflater.from(c);
    }

    //Now, using polymorphism, it should return a correctly built
    //view for whatever object type you've passed in.
    @Override
    public View getView(int pos, View convertView, ViewGroup parent) {
        return items.get(pos).buildView(convertView, inflater);
    }
}

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    List<MyObject> objects = new ArrayList<MyObject>();
    //Fill your list however.

    //get your ListView, then...
    listView.setAdapter(new GenericAdapter(object, this));
} 
```

有可能我完全忽略了一些不起作用的原因——我在五分钟内输入了这个。不过，理论上我认为它会起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T18:34:49.093

我尝试了**kcoppock**的方式，但我做的有点复杂。
首先，我创建了一个 ViewHolder，它可以通过使用注释与视图 id 进行映射。

```
public class MobileViewHolder {

    @InvokeView(viewId = R.id.label)
    public TextView text;

    @InvokeView(viewId = R.id.logo)
    public ImageView image;
} 
```

然后，我可以使用反射将 ViewHolder 中的字段映射到视图 ID：

```
 Field fs[] = viewHolder.getClass().getFields();
        for (Field f : fs) {
            InvokeView a = (InvokeView)f.getAnnotation(InvokeView.class);
            int id = a.viewId();
            f.set(viewHolder, v.findViewById(id));

    } 
```

之后，我只是将数据从实体绑定到 ViewHolder。

```
 public void mappingData(MobileViewHolder viewHolder, Mobile entity) {
    viewHolder.text.setText(entity.name);
    viewHolder.image.setBackgroundResource(entity.image);
} 
```

结论：这样，对于多种不同的行布局模板的列表视图，我只需要4件事：

*   行xml文件
*   ViewHolder：定义视图控件和视图属性
*   实体
*   项目视图：扩展 ViewHolder 和 Entity 之间的 BaseView 和映射逻辑数据。

这是我测试过的[源代码示例:)](https://www.dropbox.com/s/ib3ujfaiah0f954/MyAndroidApp.zip)

# objective-c - NSLocalizedString 错误

> ID：13054146
> 
> 赞同：1
> 
> 时间：2012-10-24T17:05:14.720
> 
> 标签：objective-c, ios, nslocalizedstring

我创建了 2 个 InfoPlist.strings，一个是葡萄牙语，另一个是英语。我在 .strings 文件中使用我的字符串，如下所示：

```
"BtnTitle" = "Title"; (English)
"BtnTitle" = "Título"; (Portuguese) 
```

当我在模拟器和设备中调试时，只给我： `BtnTitle`作为 NSLog 的结果：

```
NSLog(@"Titulo : %@", NSLocalizedString(@"BtnTitle", @"")); 
```

日志没有给我对象“Title”或“Título”的属性，而是对象名称“BtnTitle”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:45:23.593

`InfoPlist.strings`是本地化的`Info.plist`。UI 字符串应该进入`Localizable.strings`.

# html - 流式传输中从服务器到客户端的 Websocket 通信传输

> ID：13054149
> 
> 赞同：0
> 
> 时间：2012-10-24T17:05:27.343
> 
> 标签：html, websocket

我是新的 websocket 流应用程序。我正在尝试评估 kaazing 和安慰流媒体供应商的产品。我正在尝试在创建套接字连接之前放置 kaazing 发布者的层或接口应用程序信息。客户端会向接口发出socket连接请求，接口在创建socket之前起到认证和授权以及做一些业务变化的作用。该接口与 kazzing 或流应用程序建立安全套接字连接，并将连接对象传输给客户端作为响应。客户端使用来自响应的已建立连接并保留用于将数据从流服务器流式传输到客户端的连接。

目的是隐藏从客户端建立的主题信息和连接以确保安全进程。因此，接口创建安全连接并将连接传输到授权客户端，授权客户端继续从流服务器进行流传输，直到会话到期。请让我设计这样的应用程序是可能的。

客户端接收数据但它没有建立自己的连接，它是从服务器端创建的，并在所有必要的验证后传输到客户端。

指导我进一步进行设计，我需要专家的宝贵建议。在此先感谢并感谢您将我引向设计流应用程序的正确路径。

我的目的不是在网关和客户端之间引入一个新层。Altimate 的目标是为我的产品定制网关，例如用户（客户端）连接到网关并尝试访问主题说股票（有资格订阅）然后他将能够获得数据流。如果他需要共享，他会在某个地方注册，并且只有在批准后他才有资格查看，因此授权将发挥作用并维护会话并加载自定义数据并允许流式传输。通常我试图拥有一个数据流仪表板。因此，用户只允许授权流式传输。此外，他将能够看到所有主题名称。是否可以使用代理名称，例如 1 或 2 可能是他将从客户端使用的值，当它到达网关时，它会验证授权并将值替换为真实的主题名称并建立数据。请让我知道我的问题是否清楚。您的宝贵建议和指导将对我继续研究更有帮助。

谢谢克里什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-05T21:26:01.483

如果您想知道过去五年世界发生了怎样的变化来满足这种需求，现在您可以尝试使用 streamdata.io，这是一个使用[SSE 协议](https://en.wikipedia.org/wiki/Server-sent_events)（单向）的代理，可在几分钟内使用。它完全符合给出的示例中的需要，因为我不确定 WebSocket 是这里的理想答案。虽然它应该可以工作，但基本上就像买一台收割机让你的孩子上学一样。

作为免责声明，我需要说我为 Streamdata 工作，我们每天都看到这种事情。

如果您需要双向数据流，例如在聊天或游戏中，WebSocket 非常棒。大多数时候，当客户端主要期望来自服务器的更新数据时，而不是轮询 AF 或部署 WebSocket，SSE 是最好的选择，因为它更容易部署（http 等）。其余设置（出于安全考虑）可以通过代理接口完成。

Boom：它甚至在您意识到之前就可用，它安全、易于维护并且比以前更高效。你有更多的时间可以在这里回答来自社区的问题；你的团队很开心；你的老板比以前更爱你，甚至可能给你加薪。生活有时候就是这么简单！

# sharepoint - Sharepoint 新手：如何创建时间输入仪表板？

> ID：13054151
> 
> 赞同：2
> 
> 时间：2012-10-24T17:05:39.543
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2007, sharepoint-designer

我的老板让我考虑在我们的服务器上设置一个 sharepoint 的副本，并创建一个仪表板，允许员工查看他们的任务、打卡/打卡等。

在这一点上，我对sharepoint的经验很少。我已经看到了似乎是简单的非编码设置的共享点教程，并且我已经看到了一些涉及从代码创建共享点页面的教程。创建这个时间输入页面的最佳方法是什么？是否已经构建了一些我可以插入和修改的东西，或者最好从头开始编码？只是寻找一些好的起点。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:23:04.693

不要从头开始编写代码，您可以在某个地方找到免费或收费 50 CUR 的网站模板 (.stp)，您可以将其安装在您的 SharePoint 服务器中并根据自己的喜好进一步修改。

例如查看下面的“案例管理”是否满足您（老板）要求的一半以上：[http](http://sp2010teamplates.codeplex.com/) ://sp2010teamplates.codeplex.com/如果没有，请谷歌了解更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T04:48:36.437

我同意@RoManiac。不要从头开始编写代码。

作为替代方案，SharePoint 是一个很好的平台，可以快速创建数据输入/管理数据应用程序，例如您提到的使用“列表”的应用程序。

将每个 SharePoint 列表视为 SQL Server 中的“虚拟表”，并自动生成 CRUD 屏幕。这意味着，如果您创建一个名为“TimeSheetEntry”的列表（表），其中包含名为项目名称（文本）、项目任务（文本）、工作日期（日期时间）、工作时间（整数）的字段（列），SharePoint 将自动生成数据输入屏幕对于这个列表。您可以将此列表公开给最终用户，他们可以开始输入他们的时间表。CreatedBy 字段是一个自动字段，应该跟踪谁输入了数据。

您可以创建允许用户仅查看其时间记录的视图（如 SQL 视图）。

希望回答

干杯VJ

# php - 密码哈希不匹配，我做错了什么？

> ID：13054152
> 
> 赞同：-1
> 
> 时间：2012-10-24T17:05:40.590
> 
> 标签：php, security, hash, mysqli

当我在我的网站上注册用户时，我有这种方法来散列密码。据我所知，它完美地工作，我将 $password_hash 和 $salt 存储在我的数据库中。但是当我尝试对用户进行身份验证以进行登录时会出现问题，我得到的哈希值不匹配。

**注册功能**

```
$salt = createSalt();
$password = createPassword();
$hash = hash('sha256', $password);
$password_hash = hash('sha256', $salt . $hash); 
```

**登录功能**

```
$query = "SELECT Password_Hash,Salt FROM accounts WHERE Email = ' ".$email." ' ";
$result = mysqli_query($mysqli, $query);
$rows = mysqli_fetch_assoc($result);
$hash = hash('sha256', $password);
$password_hash = hash('sha256', $rows['Salt'] . $hash); 
```

**创建密码功能**

```
function createPassword()
{ /*This function is used to create the password for the user */
    $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789";
    for ($i = 0; $i < 8; $i++) 
    {
        $n = rand(0, strlen($alphabet)-1);
        $pass[$i] = $alphabet[$n];
    }
    return implode($pass);
} 
```

两个密码哈希不匹配。有什么我做错了吗？输出下方的图像。第一行是数据库输出 ![在此处输入图像描述](../Images/5595c9d8d52925e8b38c5508a7fbf4a6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:10:07.357

有两种可能：

*   你存储了错误的盐（你不应该在你的数据库中存储任何盐）
*   您正在插入不同的密码...

我强烈建议您从用户数据中创建盐，例如：

```
$salt = $userEmail . $userID . 'yourString'; 
```

并且不要将此盐放入数据库中，只需每次即时计算即可，盐也不需要散列。您可以像这样直接连接它：

```
$hash = hash( $password . $salt ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:19:40.203

散列密码时，这是 3 个常见错误

*   区分大小写
*   白色空间

`trim`在散列和身份验证之前尝试使用密码。

例子

```
 echo hash('sha256', "pass"); //d74ff0ee8da3b9806b18c877dbf29bbde50b5bd8e4dad7a3a725000feb82e8f1 
```

和

```
echo hash('sha256', " pass"); //f2752b292e1333b2d224a1f831e3ce866dbfc7a32da2af4d1092135f5a2c9383
                     ^----- Just this space makes a huge diffrence 
```

**编辑**

从您的`var_dump` [http://pastebin.com/4NtuANzj](http://pastebin.com/4NtuANzj)

注册时

```
$password_hash =   string(64) "f8fe50b60e3c71dbcc805484352b449df06b2a810cf7d93294e644093a6f60ac" ; 
```

`$db_pass_hash = $rows['Password_Hash'];`

```
$db_pass_hash =  string(66) " f8fe50b60e3c71dbcc805484352b449df06b2a810cf7d93294e644093a6f60ac "
                             ^---- empty space 
```

解决方案

```
$db_pass_hash = trim($rows['Password_Hash']);
$db_salt = trim($rows['Salt']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-29T02:39:03.560

这可能是一个逻辑错误，与您的代码无关 - 检查密码列的长度/大小。如果密码在存储时被连接，它们将不匹配 - 您不会收到任何错误。

请注意，根据您使用的哈希，存储的哈希密码比用户输入的密码长得多（研究您使用的哈希长度），即使它是一个字母。

# c# - 出现运行时错误，C# 将数组转换为 Int

> ID：13054155
> 
> 赞同：0
> 
> 时间：2012-10-24T17:05:50.453
> 
> 标签：c#, arrays, runtime-error, valueconverter

出于某种原因，这会编译，但最后会出现错误，我不知道为什么。代码的第一部分是显示文本文件中正常工作的表格，第二部分没有。

我认为它甚至没有到达 Console.WriteLine 位，这是一种检查它是否存在的方法。谁能明白为什么？

谢谢你提供的所有帮助！

```
class Program
{
    static void Main(string[] args)

    {
        List<float> inputList = new List<float>();
        TextReader tr = new StreamReader("c:/users/tom/documents/visual studio 2010/Projects/DistanceCalculator3/DistanceCalculator3/TextFile1.txt");
        String input = Convert.ToString(tr.ReadToEnd());
        String[] items = input.Split(',');
        Console.WriteLine("Point         Latitude        Longtitude       Elevation");

        for (int i = 0; i < items.Length; i++)
        {
            if (i % 3 == 0)
            {
                Console.Write((i / 3) + "\t\t");
            }

            Console.Write(items[i]);
            Console.Write("\t\t");

            if (((i - 2) % 3) == 0)
            {
                Console.WriteLine();
            }

        }

        Console.WriteLine();
        Console.WriteLine();

        // Ask for two bits of data which are then stored in Longtitude, Latitude and Elevation 

        Console.WriteLine("Please enter the two points that you wish to know the distance between:");
        string point = Console.ReadLine();
        string[] pointInput = point.Split(' ');

        int pointNumber = Convert.ToInt16  (pointInput[0]);
        int pointNumber2 = Convert.ToInt16 (pointInput[1]);

        int Latitude = (Convert.ToInt16(items[pointNumber*3]));
        int Longtitude = (Convert.ToInt16(items[(pointNumber*3)+1]));
        int Elevation = (Convert.ToInt16(items[(pointNumber*3)+2]));

        int Latitude2 = (Convert.ToInt16(items[pointNumber2 * 3]));
        int Longtitude2 = (Convert.ToInt16(items[(pointNumber2 * 3) + 1]));
        int Elevation2 = (Convert.ToInt16(items[(pointNumber2 * 3) + 2]));

        Console.WriteLine("Latitude");
        Console.WriteLine("Latitude2"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:18:22.367

You are using decimal values, which cannot be converted into `Int16`. So use `float`.

Also, Outputting "Latitude" will write the variable's name, not its value. I modified your code:

```
float Latitude = (float.Parse(items[pointNumber*3]));
float Longtitude = (float.Parse(items[(pointNumber*3)+1]));
float Elevation = (float.Parse(items[(pointNumber*3)+2]));

float Latitude2 = (float.Parse(items[pointNumber2 * 3]));
float Longtitude2 = (float.Parse(items[(pointNumber2 * 3) + 1]));
float Elevation2 = (float.Parse(items[(pointNumber2 * 3) + 2]));

Console.WriteLine(Latitude);
Console.WriteLine(Latitude2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:18:41.323

Your input strings are of floating values, not integers. You can parse to floats like this:

```
float Latitude = (Convert.ToSingle(items[pointNumber * 3]));
float Longtitude = (Convert.ToSingle(items[(pointNumber * 3) + 1]));
float Elevation = (Convert.ToSingle(items[(pointNumber * 3) + 2]));

float Latitude2 = (Convert.ToSingle(items[pointNumber2 * 3]));
float Longtitude2 = (Convert.ToSingle(items[(pointNumber2 * 3) + 1]));
float Elevation2 = (Convert.ToSingle(items[(pointNumber2 * 3) + 2])); 
```

# jslint - PhpStorm 中的 JSLint 变量声明和 JSDoc

> ID：13054157
> 
> 赞同：3
> 
> 时间：2012-10-24T17:05:58.857
> 
> 标签：jslint, phpstorm, jsdoc

如何让 PhpStorm 理解这样声明的变量的类型：

```
function presentation() {
    "use strict";
    var
        /** @type {Number} */
        a,
        /** @type {jQuery} */
        b,
        /** @type {HTMLAnchorElement} */
        c;
} 
```

PhpStorm 只知道最后一个变量类型并建议它的方法/属性，但它不知道变量“a”和“b”的类型。

是否可以在 PhpStorm 中记录类型并符合 JSLint？如果是这样，怎么做？

# hbase - Enable compression for table

> ID：13054158
> 
> 赞同：0
> 
> 时间：2012-10-24T17:05:59.873
> 
> 标签：hbase, jdo, datanucleus

How can we enable compression for a specific table using jdo and datanucleus in hbase ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:52:23.210

You get the code for [that plugin](http://www.datanucleus.org/plugins/store.hbase.html), look at the class **HBaseUtils** method *createSchemaForClass* and you contribute it back. You can easily annotate a class with @Extension, and then get access to the metadata in that method using cmd.extensions. When you're done you raise an issue in JIRA and attach your patch.

# c++ - std::size 和 std::map 的最大大小？

> ID：13054163
> 
> 赞同：4
> 
> 时间：2012-10-24T17:06:27.350
> 
> 标签：c++, map, set

std::size 和 std::map 的最大大小是多少？有没有办法增加这个数字？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T17:10:25.353

[`Container::max_size()`](http://en.cppreference.com/w/cpp/container/map/max_size)您可以通过调用它来获得每个标准库容器的最大大小。如果您在编译时需要理论上的最大大小值，请使用`std::numeric_limits<Container::size_type>::max()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T17:15:35.303

任何标准容器的最大尺寸由`container<T>::max_size()`方法给出。在一般情况下，此大小可能（并且将）小于 的范围`container<T>::size_type`。

的范围`container::size_type`可以通过 获得`std::numeric_limits`，但是，请再次记住，容器不保证它们的最大尺寸可以达到它们的全部范围`size_type`。

另请注意，它返回容器中*元素**的*`container<T>::max_size()`最大数量，而返回. 这些都是无可比拟的价值。*`std::numeric_limits<container<T>::size_type>::max()`*`size_type`**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T17:16:25.957

理论限制是`size_t`可以包含的最大数量，通常用于返回容器中的元素数量。对于大多数 32 位平台，它是 2^32，对于大多数 64 位平台，它是 2^64，但实际上这是实现定义的，标准中没有严格的限制。

但实际上任何容器的可能最大大小要小得多，因为它受到可用内存地址空间和可用空闲内存的限制。**

# javascript - jQuery 中的 .on() 不适用于委托事件

> ID：13054174
> 
> 赞同：0
> 
> 时间：2012-10-24T17:07:10.540
> 
> 标签：javascript, jquery

`.on()`我一直在尝试找出jQuery 1.7.x 及以后版本提供的相对较新的（至少对我来说，我猜）方法。`live(), bind()`到目前为止，我们一直在代码中使用来处理事件处理程序，并且由于似乎存在[性能问题](http://paulirish.com/2010/on-jquery-live/)，我们正在考虑进行大修。`.live()`所以这是我的问题。这是我的页面中的页面结构：

```
 <div id="header"></div>
    <div id="content"></div>
    <div id="footer">
        <div id="default"></div>
        <div class="close">Close</div>
        <div id="extras">//some random stuff// </div> 
    </div> 
```

我创建了一个对象来存储常用的选择器，例如`$(document), $("#header"), $("#footer")`：

```
 var elements = {
        $doc: $(document),
        $foo: $("#footer"),
        $head: $("#header")
   }; 
```

`.close`点击内部的预期行为`#footer`是`#extras`必须隐藏在视图之外。我试图将 click 事件绑定`.close`到`#footer`（*委托*），如下所示：

```
elements.$foo.on("click","div.close",hideFooter) 
```

**这不起作用**。但是，如果一定要`elements.$doc`这样：

```
elements.$doc.on("click", "div.close", hideFooter); 
```

**它有效**。但这不就是这样`.live()`吗？（如果每次点击都应该转到 DOM 开始并冒泡到`div.close`）

我在这里做错了吗？

**EXTRA INFO** 匿名函数的内容`hideFooter`是：

```
 function hideFooter(event) {
        $(event.currentTarget).next().hide("slow")
                              .closest("#footer").css({ "opacity": "0.8" });
        $("#default").show();
    } 
```

**default.js 中的代码序列**

```
 var elements = {
            $doc: $(document),
            $foo: $("#footer"),
            $head: $("#header")
       };

  elements.$doc
       .ready(function () {
         elements.$foo.on(events.click, "div.close", hideFooter);
       })
      .on(events.click, "#content", HideHeaderFooter)
      .on(events.hover, "#footer", showFooter); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:28:56.890

为了确保在`footer`脚本运行之前加载元素，您可以将脚本放在页面底部。

```
<body>
    <div id="header"></div>
    <div id="content"></div>
    <div id="footer">
        <div id="default"></div>
        <div class="close">Close</div>
        <div id="extras">//some random stuff// </div> 
    </div>

    <script src="/default.js" type="text/javascript"></script>

</body> 
```

* * *

或者，如果您希望您`<script>`在`<head>`页面中，您可以将代码包装在 jQuery`.ready()`处理程序中，以便在页面加载之前它不会运行。

```
$(function() {
       // Code in here will not run until the rest of the page has loaded.
    var elements = {
            $doc: $(document),
            $foo: $("#footer"),
            $head: $("#header")
       };

    elements.$doc
      .on(events.click, "#content", HideHeaderFooter)
      .on(events.hover, "#footer", showFooter);
    elements.$foo.on("click","div.close",hideFooter);
}); 
```

因此，现在您的代码将延迟到页面加载完毕，因此您的`footer`元素将存在并准备好进行 DOM 选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:36:11.697

你为什么不把它放在处理程序中呢？这*应该*有效：

```
elements.$foo.on("click","div.close", function() {
     $(this).next().hide("slow").closest("#footer").css({ "opacity": "0.8" });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T17:10:51.183

你有这个

```
elements.$foo.on("click","div.close",HideFooter) 
```

你是这个意思吗？

```
elements.$foo.on("click","div.close",hideFooter) 
```

注意函数名称中的“H”。

# c# - 使用视频更新 Windows 8 动态磁贴

> ID：13054181
> 
> 赞同：0
> 
> 时间：2012-10-24T17:07:39.893
> 
> 标签：c#, .net, vb.net, xaml, windows-runtime

我知道可以在 Windows 8 中使用图像和文本更新动态磁贴。但是，我想用视频更新磁贴。

是否可以？如果一个视频不能直接发送，我们可以把视频分成很多张图片然后更新吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T17:53:16.347

您不能将视频添加到动态图块，也不能添加 gif 图像（您可以添加 gif，但它们不会按预期工作）。不允许添加视频，因为它会在后台任务中消耗大量系统资源。动态磁贴的目的是显示信息而不是内容本身，以便用户可以浏览它并在需要时采取行动。

# ember.js - 使用路由器的 Ember 应用程序不使用 {{action}} 车把标签

> ID：13054188
> 
> 赞同：2
> 
> 时间：2012-10-24T17:08:11.610
> 
> 标签：ember.js, handlebars.js, ember-old-router

我正在制作一个简单的 Ember 应用程序，它需要一些 Tumblr json，列出帖子，然后让您转到带有返回默认帖子视图的链接的帖子详细信息视图。

现在的问题是，当使用`{{action}}`车把模板标签时，返回“showHome”路由的链接不起作用，“showPost”操作显示 json 中的最后一篇文章，而不是在操作中指定为上下文的文章标签。

这是我的模板：

```
<script type="text/x-handlebars" data-template-name="main-tmpl">
    <h1>
        <a {{action showHome}}>{{view.content.title}}</a>
    </h1> 
    {{&view.content.description}} 
    {{outlet}}
</script>
<script type="text/x-handlebars" data-template-name="post-tmpl">
    {{#if view.content.is_photo }}
        {{#if view.detail }}
            <img {{bindAttr src="view.content.photo-url-500"}}>
        {{else}}
            <a {{action showPost view.content href=true}} class="thumbnail">
                <img {{bindAttr src="view.content.photo-url-75"}}></a>
        {{/if}}
    {{/if}}
</script> 
```

这是我的路线：

```
App.Router = Ember.Router.extend({
    root: Ember.Route.extend({
        showHome:Ember.Route.transitionTo('index'),
        showPost:Ember.Route.transitionTo('postDetail'),
        loading: Em.Route.extend({
            connectOutlets: function(router, context){
                router.get('applicationController').connectOutlet('loading', context)                
            }
        }),
        index: Em.Route.extend({
            route: '/',
            deserialize:function(router, params) {
                var deferred = jQuery.Deferred(),
                    resolve = function() { console.log("resolved"); deferred.resolve() }

                /* Cut for brevity [...] */

                return deferred.promise()
            },
            connectOutlets:function(router) {
                router.get('applicationController').connectOutlet('tumbleLog')
                router.get('tumbleLogController').connectOutlet('posts')
            }
        }),
        postDetail:Em.Route.extend({
            route:'/post/:id',
            connectOutlets:function(router,post) {
                        console.log('my post is', post)
                router.get('tumbleLogController').connectOutlet('postDetail', post)
            }
        })
    })
}) 
```

这是小提琴：http: [//jsfiddle.net/colinkahn/PegYL/](http://jsfiddle.net/colinkahn/PegYL/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:50:11.550

我不知道天气这可以算作*答案*，但就像我在评论中所说，截至今天（2012 年 10 月 25 日），这可以通过用 ember-latest 替换 ember-1.0-pre 来解决，因为 1.0-pre有最新修复的已知错误。此外，就像 Eduard 提到的那样，在开发过程中，最好在路由器中`enableLogging`设置为`true`，这样您就知道发生了什么。和平

# c++ - 如何让好友功能有内部联动

> ID：13054191
> 
> 赞同：4
> 
> 时间：2012-10-24T17:08:37.527
> 
> 标签：c++, linker, friend

我需要确保声明为某个 C++ 类的朋友的 C++ 函数具有内部链接。

我需要该函数成为朋友的原因是因为它需要访问该类的私有成员，该私有成员缓存函数的结果。

函数需要是同一个类的非成员（或至少不是实例成员）的原因是因为其他代码需要能够获取指向它的非成员函数指针。重构这将太昂贵。

我需要它具有内部链接的原因是因为会有很多这些函数，并且在 AIX 上，它们太多会导致链接时 TOC 溢出错误。这可以使用`-bbigtoc`链接器开关来克服，但我暂时试图避免这种情况。

另外，我真的希望能够将类声明保留在头文件中，但将函数本身放在包含实现的 .cxx 文件中。

总结一下，现在我有这样的事情：

```
class Foo
{
    private:
        mutable Qux cachedBarResult;
    // ... more code here ...
    public:
        friend const Qux & Bar(const Foo &);
};

const Qux & Bar(const Foo & foo)
{
    if (foo.cachedBarResult.isEmpty())
    {
        foo.cachedBarResult = _worker_Bar(foo);
    }
    return foo.cachedBarResult;
}

static Qux _worker_Bar(const Foo & foo)
{
    // real Bar work
} 
```

我想建立`Bar`内部联系。可以这样做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T17:27:22.747

是的，在你说它是朋友之前，你只需要声明静态函数的原型。

```
class Foo;
static const Qux & Bar(const Foo & foo);

class Foo
{
    private:
        mutable Qux cachedBarResult;
    // ... more code here ...
    public:
        friend const Qux & Bar(const Foo &);
};

static const Qux & Bar(const Foo & foo)
{
    if (foo.cachedBarResult.isEmpty())
    {
        foo.cachedBarResult = _worker_Bar(foo);
    }
    return foo.cachedBarResult;
} 
```

# javascript - 查询 scrollTo 在 Firefox 中不起作用

> ID：13054194
> 
> 赞同：3
> 
> 时间：2012-10-24T17:08:49.150
> 
> 标签：javascript, jquery, scrollto

我在我正在构建的页面中使用 scrollTo jquery 库，它适用于 Chrome、Safari 和 IE 8/9，但不适用于 firefox。萤火虫告诉我，

TypeError: $("#wrapper").scrollTo 不是函数

这是包含 scrollTo 库的行

```
<script type="text/javascript" src="js/jquery.scrollTo.js"></script> 
```

这是我使用 scrollTo 的功能

```
function scrollPage(currentpage,scrollpage) {
    $(scrollpage).find('.text').fadeOut();
    $(currentpage).find('.text').fadeOut( function(){
        $('#wrapper').scrollTo( scrollpage, 1500, {
            onAfter:function(){
                $(scrollpage).find('.text').fadeIn();
            }
        });
    });
} 
```

为什么火狐不认为 scrollTo 是一个函数，而我尝试过的所有其他浏览器都可以？

编辑：似乎我的文件可以在其他计算机上运行，​​但不能在我当前安装的 Firefox 上运行。我要重新安装，看看有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:30:34.883

解决方案：

好吧，似乎弹出窗口阻止程序引起了冲突！OP 发现卡巴斯基在 Firefox 中安装了一个安全插件，并阻止了 scrollTo。

更多：http: [//github.com/mootools/mootools-core/issues/2202](http://github.com/mootools/mootools-core/issues/2202)

原帖：

当我的 jQuery 代码未包含在`$(document).ready(function() {...your jquery statements here ...});` 块中时，有时会出现该错误。

您的函数不必在文档内部准备好，但调用它的语句应该是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:23:01.200

为我工作（[小提琴](http://jsfiddle.net/g5EwN/)）。您是否在 html 中包含 jQuery？

这就是你可以做到的（当然在你的 ScrollTo 库之前）：

```
<script src="http://code.jquery.com/jquery-latest.min.js" 
        type="text/javascript"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-02T11:59:38.707

我没有使用 scrollTo，而是使用了 scrollIntoView，它在 FireFox、Chrome 和 IE 中工作。

例子 ：

```
var element = document.querySelector('.navbar-brand');
element.scrollIntoView(); 
```

# html - 同一页面上的 GET 表单和 POST 表单

> ID：13054198
> 
> 赞同：0
> 
> 时间：2012-10-24T17:08:55.367
> 
> 标签：html, forms, post, get

我有一个菜鸟问题，我想知道如何才能完成这项工作。

我有一个页面列出了我的数据库中的产品。产品列表上方是一个 GET 表单，其中有两个下拉菜单，用于选择每页有多少产品以及排序顺序。

然后在我的列表左侧，我有一个包含 POST 表单的边框，其中包含特定类别中的所有子类别，并带有复选框，以便用户可以优化他们的搜索。

因为边箱包含很多选项，所以最好将此表单作为 POST ，否则我最终会得到可能包含 10 个 category_id 的 URL，但这意味着当我更新 GET 表单中的任何一个下拉列表时，我需要来自 POST 的信息要一起发送。

我试过只用一个大的 POST 表单来覆盖这两个位，但是因为它们在不同的 s 中，所以这不起作用。

这样做的最佳方法是什么，我无法弄清楚！

编辑：这是我尝试将所有元素放入一个 POST 表单中的一个小技巧，由于 div 不同，它无法验证，我无法将它们包装在一个 DIV 中，因为它会破坏我的布局，即意味着成为侧边框右侧和过滤器栏下的产品列表 - [http://jsfiddle.net/FwQNn/](http://jsfiddle.net/FwQNn/)

```
<div id="prodlistFilterBarWrapper">
        <form name="filter" action="index.php?main_page=index&amp;cPath=45" method="post">
            <input type="hidden" name="main_page" value="index" />
            <div id="filterbarwrapper"><span class="filterBarTextperpage">&nbsp;per-page&nbsp;</span>
                <div id="perpagecontainer">
                    <select name="perpage" id="perpage" onchange="this.form.submit()">
                        <option value="20">20</option>
                        <option value="40">40</option>
                        <option value="60">60</option>
                        <option value="80">80</option>
                        <option value="100">100</option>
                    </select>
                </div>
                <div id="sortordercontainer">
                    <select name="sortorder" id="sortorder" onchange="this.form.submit()">
                        <option value="bestselling">Best Selling</option>
                        <option value="pricelowhigh" selected="selected">Price low-high</option>
                        <option value="pricehighlow">Price high-low</option>
                        <option value="nameaz">Name a-z</option>
                        <option value="nameza">Name z-a</option>
                    </select>
                </div>
            </div>   
        </div>
        <div style="clear:both"></div>
        <div id="sidebox">
        <div id="sideboxheaderbgtop"><span class="yellowText" style="margin-left:15px">Refine</span> <span class="whiteText">search</span></div>
        <div id="sideboxPriceRange"></div>
        <div id="sideboxCatsWithCheckBoxes">
        <div class="sideboxHeading">Irish Gifts &amp; Souvenirs</div>
        <div class="sideboxDotSpacer"></div>
        <div class='sideboxSubCat'><input type="checkbox" name="subcats[]" value="20" checked="checked" />&nbsp;&nbsp;&nbsp;Decorations</div>
        <div class='sideboxSubCat'><input type="checkbox" name="subcats[]" value="48" checked="checked" />&nbsp;&nbsp;&nbsp;Keyrings</div>
        <div class='sideboxSubCat'><input type="checkbox" name="subcats[]" value="25" checked="checked" />&nbsp;&nbsp;&nbsp;Whiskey </div>
        <div class='sideboxSubCat'><input type="checkbox" name="subcats[]" value="15" checked="checked" />&nbsp;&nbsp;&nbsp;Novelties</div>
        <div class='sideboxSubCat'><input type="checkbox" name="subcats[]" value="44" checked="checked" />&nbsp;&nbsp;&nbsp;Titanic</div>
        <div class='sideboxSubCat'><input type="checkbox" name="subcats[]" value="18" checked="checked" />&nbsp;&nbsp;&nbsp;Glassware</div>
        <div class='sideboxSubCat'><input type="checkbox" name="subcats[]" value="43" checked="checked" />&nbsp;&nbsp;&nbsp;football</div>
        <div class='sideboxSubCat'><input type="checkbox" name="subcats[]" value="8" checked="checked" />&nbsp;&nbsp;&nbsp;Dolls</div>
        <input type="image" src="update.png" alt="Update" title=" Update " id="sideboxUpdateButton" />
        </form>
        <div class="sideboxBottomSpace"></div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:14:32.580

我要做的是 1\. 如果您必须传递左侧数据，请更改下拉列表到帖子 2\. 在下拉表单中包含隐藏字段，当您从左侧选择不同类别时填充这些字段..这很容易用一些简单的 javascript 完成

# javascript - 通过预处理运行 javascript

> ID：13054201
> 
> 赞同：1
> 
> 时间：2012-10-24T17:09:12.817
> 
> 标签：javascript, html, ant, preprocessor, google-closure-compiler

从开发平台转移到生产平台时，我正在研究为代码库构建发布脚本。我相信我已经决定运行 ant 以通过 Google 闭包编译器发送 javascript 和 css。

我想最终构建脚本来编译调试语句，如 [在缩小期间排除调试 JavaScript 代码](https://stackoverflow.com/questions/2934509/exclude-debug-javascript-code-during-minification)

缩小并将所有 javascript 连接到一个文件中。只有一部分过程我真的很困惑，我将如何构建我的 .html 文件以分别包含 javascript 文件，然后通过脚本运行它，现在让 .html 包含新的 1 javascript 文件？

我正在考虑有 1 个指向所有其他 javascript 文件的 js 文件，并且只包含那个，然后当它连接时，将所有文件连接到指向其他文件的前一个 js 文件。

对于构建发布脚本以准备 javascript 以供公众使用的任何建议，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:57:26.127

经过大量研究，我们决定使用 google 闭包编译器。 在缩小和简单编译[期间排除调试 JavaScript 代码的](https://stackoverflow.com/questions/2934509/exclude-debug-javascript-code-during-minification)评价最高的答案几乎是一致的 。我们包含了一个间歇性加载文件，它根据预处理之前或之后加载所有其余文件，因此它只会包含已经一起缩小的文件。

# ruby-on-rails - 在 Rails 中不工作的布尔字段的比较

> ID：13054206
> 
> 赞同：0
> 
> 时间：2012-10-24T17:09:38.900
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我有一个`Post`模型，带有一个`posted`布尔字段。

我创建了一个新帖子，没有为`posted`.

```
irb(main):012:0> Post.first.posted
  Post Load (9.0ms)  SELECT "posts".* FROM "posts" LIMIT 1
=> nil 
```

现在，我想选择所有`posted`不等于 的帖子`true`。

我试过这个，但它不起作用：

```
irb(main):016:0> Post.where("posted != ?", true)
  Post Load (2.5ms)  SELECT "posts".* FROM "posts" WHERE (posted != 't')
=> [] 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:12:31.357

这是因为数据库如何处理 NULL。尝试`:default => false`在您的迁移中设置。

根据您的数据库，您可能会看到如下内容：（MySQL 中的示例）

```
SELECT 1 = NULL; # returns NULL
SELECT 1 != NULL; # returns NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:11:47.307

我怀疑您为 Post 创建的表的默认值为`posted`true 而不是 false。

您总是可以只选择整个表来查看它的值`Post`。把它放在控制台中：

```
pp Post.all 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T17:46:26.107

我可以建议您使用 sqlite，所以这就是文档告诉我们的内容：“存储类为 NULL 的值被认为小于任何其他值（包括存储类为 NULL 的另一个值）。”。因此，您只能使用 WHERE x IS NOT NULL 表达式从数据库中获取具有 NULL 值的记录。

您应该避免使用可能为 NULL 值的布尔字段。一种方法是在迁移中将您的字段声明为不为空：

```
t.boolean :f, default: true, null: false 
```

# r - 错误：定义表达式时出现“意外符号”

> ID：13054209
> 
> 赞同：4
> 
> 时间：2012-10-24T17:09:47.060
> 
> 标签：r

我在最近开始使用 R 的统计和数据分析课程中。我收到一条错误消息，到目前为止，我无法准确确定错误是什么或如何修复它。

我们得到了绘制这个函数的说明：

```
y=0.1x^4-0.5x^3-x^2+3x-2 
```

下一条指令要求遵循此编码并输入上述函数：

```
> x<-seq(-5,5,by=2)
> y<- ## enter the function, here
> plot(y~x)
> lines(y~x) 
```

这是我在输入函数时得到的`y`：

```
> x<-seq(-5, 5, by=2)
> y<-0.1x^4-0.5x^3-x^2+3x-2 
```

> 错误：“y<-0.1x”中出现意外符号

意外的符号是`x`？我尝试删除函数中的小数以对其进行测试，但得到相同的错误消息：

```
> y<-x^4-5x^3-x^2+3x-2 
```

> 错误：“y<-x^4-5x”中出现意外符号

所以我认为这`x`就是问题所在，但我该如何解决呢？我运行`x`序列码没有问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T17:35:01.777

在代数中，相邻的两个符号（例如`0.1`和`x`in `0.1x`）意味着它们相乘。在编程中，没有做出这样的假设，并且需要一个显式的乘法运算符：`0.1*x`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T17:15:03.990

尝试 x * 0.5 而不是 x0.5。

虽然，我不使用 RStudio。

# entity-framework - VS 2012 - EF 5.0 - 从数据库更新模型 - 不获取表更改

> ID：13054212
> 
> 赞同：9
> 
> 时间：2012-10-24T17:10:02.697
> 
> 标签：entity-framework, visual-studio-2012

在 Visual Studio 2010 EF 4 中，我可以在数据库表中添加一个新列，然后在我的 .edmx 上单击“从数据库更新模型”，一切都很好。

在 Visual Studio 2012 EF 5 中，我更改了一个表，然后单击“从数据库更新模型”，它不再获取对单个表的更改。

我错过了什么......还是这是VS2012的新“功能”？

**更新** 我可以获得带有添加列以反映在 .EDMX 文件中的表的唯一方法是删除该表，然后“从数据库更新模型”，它将获取添加的列。然而，它把添加的桌子放在离左边很远的地方，我必须把它移回原位。没什么**大不了**的，只是一个烦恼。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T17:17:36.350

是的，这在 VS2012 中仍然有效。您是使用默认代码生成还是有 TT 文件？可能是它被添加到 EDMX 但您的类文件没有更新。

尝试在解决方案资源管理器中右键单击 EDMX 文件或相关的 TT 文件，然后选择“运行自定义工具”以确保它正在重新生成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T10:16:01.987

拥有 EF 模型和它在数据库中的下划线方式是有区别的。当您“从数据库更新模型”时，如果实体/表已导入您的数据模型，那么您将刷新实体。此过程不会自动将您的数据库架构映射到现有数据模型，但是您可以向 EF 模型中的实体添加一个属性，然后将该属性映射到数据库列（这正是 EF 在您自动为您所做的正常删除和更新）。

当您首先删除实体时，更新 EF 会知道该表/实体之前尚未导入，因此会自动为您映射所有数据库列。

总之，您不必删除实体，但对于简单实体，这样做会更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-10T13:01:28.530

我有一个类似/相同的问题，我从模型中删除了表，然后选择了“从数据库更新模型”。这再次不起作用，我无法访问我添加到表中的新列。

但是，一旦我从源代码控制（Vault Professional）中手动检出模型的设计器文件，然后从模型中删除表并再次从数据库中更新模型，它就可以工作了。所以也许 VS 不知道在这个特定的实例中检查模型的设计器文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-29T18:09:40.880

发生这种情况是因为您删除了一个实体，现在又想从数据库中更新它。模型正在缓存这个实体，这就是为什么您没有选择更新表的原因。所以您必须右键单击模型页面并选择模型浏览器选项。您将在右侧找到模型浏览器。从实体类型文件夹中删除您要更新的实体。现在做任何您想做的事情。

# android - Admob 和 placeplay 与 Android 应用程序的集成

> ID：13054216
> 
> 赞同：0
> 
> 时间：2012-10-24T17:10:08.853
> 
> 标签：android, admob

嗨，伙计们，我一直在寻找将 admob 和 placeplay 集成到我的 android 应用程序中的可能性。我已经集成了 admob，并希望将 placeplay 的广告服务也集成到我的应用程序中。但我对此一无所知。之前做过的任何人请让我知道您的想法并考虑一下。希望得到更好的回应。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:04:07.587

他们有一个示例应用程序。检查 /Samples/PlacePlayAdsAdmobMediationSample

# android - LG p990 上的 RingtonePreference NullPointerException

> ID：13054218
> 
> 赞同：2
> 
> 时间：2012-10-24T17:10:10.860
> 
> 标签：android, preferences

我的一位用户在 Google Play 上报告了错误。他说，当他尝试为闹钟选择铃声时，应用程序崩溃了，而他点击了列表中的铃声。此错误仅存在于 LG p990 上，并且目前仅来自一位用户。任何其他设备都可以正常工作。

来自 Google Play 的堆栈：

```
java.lang.NullPointerException
at android.preference.RingtonePreference.onPrepareRingtonePickerIntent(RingtonePreference.java:225)
at android.preference.RingtonePreference.showRingtonePicker(RingtonePreference.java:184)
at android.preference.RingtonePreference.access$000(RingtonePreference.java:56)
at android.preference.RingtonePreference$1.onClick(RingtonePreference.java:174)
at com.android.internal.app.AlertController$AlertParams$3.onItemClick(AlertController.java:873)
at android.widget.AdapterView.performItemClick(AdapterView.java:284)
at android.widget.ListView.performItemClick(ListView.java:3513)
at android.widget.AbsListView$PerformClick.run(AbsListView.java:1814)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3683)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:861)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:619)
at dalvik.system.NativeStart.main(Native Method) 
```

来自preferences.xml 的代码：

```
<RingtonePreference
            android:key="alarm_ringtone"
            android:ringtoneType="alarm"
            android:showDefault="true"
            android:showSilent="true"
            android:title="@string/alarm_ringtone" /> 
```

那个用户说，他已经更新了固件，但结果是一样的。当他为它们选择铃声时，一些应用程序也会崩溃，但其他应用程序不会。

# c# - 给定相邻元素之间的最小差值，过滤 C# 浮点集合

> ID：13054220
> 
> 赞同：1
> 
> 时间：2012-10-24T17:10:23.210
> 
> 标签：c#, collections, filtering, predicate

假设我有一个浮动的有序列表（升序）。

我想从中删除下一个元素与自身之间的差异小于给定阈值的每个元素。

我需要这样的东西：

```
List<float> orderedList;

IEnumerable<float> query = orderedList.Where(currentNum , nextNum => nextNum - currentNum < threshold); 
```

那可能吗？如果是怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:17:51.247

试试这个：

```
var filteredElements = new List<float>();
float ? prev = null;
orderedList.ToList().ForEach((e)=>{ 
              if (prev.HasValue)
              {
                  if (e-prev >= threshold)
                       filteredElements.Add(prev.Value);
              } 
              prev = e
         }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:19:31.280

试试这个：

```
var ls1 = ls.Where((item, index) => 
                   item - ls[ls.Count == index + 1 ? index : index + 1] >= 0); 
```

希望这会有所帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T17:20:31.587

试试这个 -

```
List<float> orderedList = new List<float>() { 12, 14, 34, 45 };
List<float> itemsToRemove = orderedList.Where((item, index) =>
                            index < orderedList.Count - 1 &&
                            orderedList[index + 1] - item < threshhold).ToList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T18:47:38.993

这似乎有效。（尽管您的问题有一些可能被误解的含义。）

```
var input = new List<float>() { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12, 14, 15, 18, 21, 24, 27, 29, 35, 40, 46, 59 };
var output = input.Zip(input.Skip(1).Concat(new[]{float.MaxValue}), (a, b) => new { a, b }).Where(x => x.b - x.a > 2).Select(x => x.a); 
```

这会产生以下输出：

```
15, 18, 21, 24, 29, 35, 40, 46, 59 
```

这具有与任何`IEnumerable`.

# c++ - 组合与继承——抽象类

> ID：13054222
> 
> 赞同：0
> 
> 时间：2012-10-24T17:10:35.420
> 
> 标签：c++, inheritance, abstract-class

假设我有一个超类`WorkStation`和两个子`StationNormal`类`StationAdvanced`。我有另一个类`Robot`，它有一个`WorkStation`以 a 开头的指针，`StationAdvanced`但它可以改变，但我的类`WorkStation`是一个抽象类。我认为类`Robot`应该是这样的：

```
class Robot{
 private: 
       WorkStation * actualStation;
...
} 
```

`WorkStation`我的问题是如果我的类是抽象的，应该如何定义 Robot 类的构造函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:14:58.680

你需要让`StationNormal`和`StationAdvanced`继承`WorkStation` 一个例子是：

```
class StationNormal:public WorkStation
{
  ....
}

public Robot(WorkStation* workStation)
{
  actualStation = workStation;
} 
```

在 main 方法中，例如：

`new Robot(new StationNormal()) ;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:21:23.400

我认为以下内容应该足够了：

```
class Robot{
 private: 
        WorkStation * actualStation;
 public:
        Robot();
        Robot(WorkStation * w);
}

Robot::Robot() // constructor that takes no arguments
{
    actualStation = new StationAdvanced();
}

Robot::Robot(WorkStation * w) // constructor that takes specific WorkStation
{
    actualStation = w;
} 
```

您可以通过以下方式调用它：

```
Robot rob1(),
      rob2(new StationAdvanced()),
      rob3(new StationNormal()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T17:14:11.947

好吧，在您的构造函数中，您将实例化实际的 WorkStation 并告诉指针 ( `WorkStation * actualStation`) 指向它。把它放在你的构造函数中：

```
this->actualStation = new StationAdvanced(...) 
```

# vim - 语法错误和警告符号

> ID：13054224
> 
> 赞同：0
> 
> 时间：2012-10-24T17:10:39.840
> 
> 标签：vim, syntastic

我有合成插件在 vim 中正确运行。我只是想再定制一点，我正在尝试设置属性 'syntastic_warning_symbol' 和 'syntastic_error_symbol' 来区分它们。

在我的 .vimrc 我有：

```
let g:syntastic_warning_symbol = 'WW'
let g:syntastic_error_symbol = 'EE' 
```

但是当我打开 vim 时，即使在警告行中我也会看到“EE”。

我做错什么了吗？这可能是一个错误，如果是这样，我会向开发人员报告。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:22:46.367

这似乎是一个语法问题。我一直在和开发者交谈，我已经在 github 中提出了 pull request。[这是问题和拉取请求](https://github.com/scrooloose/syntastic/issues/391)

# unix - grep ^- 在 UNIX 中是什么意思？

> ID：13054227
> 
> 赞同：2
> 
> 时间：2012-10-24T17:10:49.763
> 
> 标签：unix, metacharacters

正如标题所说， grep ^- 在 UNIX 中是什么意思？我知道 grep 是什么，但不知道元字符 ^- 部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:12:02.057

这意味着搜索以连字符开头的字符串。

^ 字符匹配字符串的开头

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:14:15.420

`^`是此上下文中行首的正则表达式元字符 `-`不是元字符

因此，此表达式匹配行首的任何 - 字符，并且使用 grep 将返回任何以 - 开头的行

将匹配

```
-Hello world 
```

不匹配

```
Hello - world 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T17:16:06.770

它匹配行或字符串的开头。请在此处查看不同 Linux 程序支持的元字符列表 - [http://docstore.mik.ua/orelly/linux/lnut/ch09_02.htm](http://docstore.mik.ua/orelly/linux/lnut/ch09_02.htm)

希望这可以帮助。

# hbase - Hbase 中的多个数据库或命名空间

> ID：13054230
> 
> 赞同：12
> 
> 时间：2012-10-24T17:11:02.870
> 
> 标签：hbase

有没有办法设置 Hbase 以便我们可以在同一个集群中创建多个数据库？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-07-25T08:49:40.333

只是为了刷新主题：[http ://hbase.apache.org/book.html#namespace](http://hbase.apache.org/book.html#namespace)

5.3.1。命名空间管理 可以创建、删除或更改命名空间。命名空间成员资格在表创建期间通过指定格式的完全限定表名来确定：

: 例 5.1。例子

```
#Create a namespace
create_namespace 'my_ns'

#create my_table in my_ns namespace
create 'my_ns:my_table', 'fam'

#drop namespace
drop_namespace 'my_ns'

#alter namespace
alter_namespace 'my_ns', {METHOD => 'set', 'PROPERTY_NAME' => 'PROPERTY_VALUE'} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T19:45:51.020

不，没有。但是，您可以使用表名前缀来将一组表与另一组表分开。

我之前没有测试 ACL，但我认为您可以在最新版本的 hbase > 0.92 中使用它们来允许访问某些表并阻止每个用户访问其他表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-27T19:42:56.597

命名空间支持将在 0.96.0 版本中提供。随着时间的推移，将内置越来越多的功能。

[https://issues.apache.org/jira/browse/HBASE-8015](https://issues.apache.org/jira/browse/HBASE-8015)

# c++ - 在没有循环的情况下设置一个数组等于另一个数组

> ID：13054243
> 
> 赞同：7
> 
> 时间：2012-10-24T17:11:59.163
> 
> 标签：c++, arrays, recursion

在 C++ 中说我们有两个数组：

```
a[5] = {1,2,3,4,5};
b[5] = {5,4,3,2,1}; 
```

例如，如果我们想设置 a 等于 b，我们如何在不使用循环的情况下实现呢？

我的想法是使用递归，但我不确定如何使用。

编辑：对不起，应该明确表示我不想使用标准库函数（包括你们中的一些人提到的 memcpy）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-24T17:14:47.840

```
int a[5] = {1,2,3,4,5};
int b[5] = {5,4,3,2,1};

memcpy(a, b, sizeof(a)); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-24T17:13:39.700

您可以使用标准库中的复制算法。

```
std::copy(std::begin(b), std::end(b), std::begin(a)); 
```

`std::begin`并且`std::end`在 C++ 标准库中是新的，但是对于还不支持它们的编译器来说，它们很容易实现：

```
template <typename T, std::size_t N>
T* begin(T(&a)[N]) {
    return &a[0];
}
template <typename T, std::size_t N>
T* end(T(&a)[N]) {
    return begin(a) + N;
} 
```

或者，您可以使用`std::array`（或旧编译器的 Boost 等效项）和赋值运算符：

```
std::array<int, 5> a = {1,2,3,4,5};
std::array<int, 5> b = {5,4,3,2,1};
a = b; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-24T17:14:57.537

使用递归：

```
void copy(int *a, int *b, int b_size) {
     if(b_size == 0) return;    
     *a = *b;
     copy(++a, ++b, b_size-1);
} 
```

不过，我不明白递归的必要性，使用`memcpy()`代替更好。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-24T17:13:37.580

你可以使用`memcpy()`：

```
memcpy(a, b, sizeof(a)); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-24T17:25:17.537

`memcpy`有效，但[`memmove`](http://en.cppreference.com/w/cpp/string/byte/memmove)如果您有重叠的内存位置（在您的示例中不太可能，但如果您使用“克隆”功能的逻辑，例如它可能发生），您也可以使用它。

```
memmove( a, b, sizeof(a) ); 
```

当然，如果您确定您的来源和目的地不重叠，那么`memcpy`很好。

# excel - 引用公式字符串 SpreadSheetGear 中的另一个工作表

> ID：13054245
> 
> 赞同：0
> 
> 时间：2012-10-24T17:12:08.050
> 
> 标签：excel, c#-4.0, spreadsheetgear

正如问题所述，我试图将一些单元格从一张纸引用到另一张纸。在一张表中，我有数据来填充我的 Principal 表中的其他一些单元格

简而言之：DataSheet > Feeds > PrincipalSheet

我正在尝试类似的东西：

```
"=Data!$A$1" 
```

我什至尝试过类似的东西：

```
 "=[Book1]Data!$A$1" 
```

但是，我仍然找不到正确的代码。

我有 SpreadSheetGeat 2010 并使用 C#

提前感谢您提供的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:42:59.243

找到答案，实际上，公式是可以的，我正在使用一些手动生成单元格范围，而不是顶级代码，而我所需要的只是把

```
MySheet.Cells[add ranges here].Range.ToString(); 
```

使用此代码，SpreadSheet 会以以下格式自动生成您所在的范围：“=[Book1]Data!$A$1”，并基于您放入 .Cells[] 中的范围，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-22T12:18:11.740

出于某种原因，当我尝试以下代码时，电子表格设备会添加“[Book1]”。它似乎在excel中不起作用。

```
MySheet.Cells[add ranges here].Range.ToString(); 
```

所以我手动设置公式像这样：

```
cells[ rowIndex, 2 ].Formula = "=IFERROR('MySheet1'!$E$6,0)"; 
```

# python - Python 对象缓存

> ID：13054250
> 
> 赞同：8
> 
> 时间：2012-10-24T17:12:22.577
> 
> 标签：python, caching, python-2.7, python-2.x

我尝试了一些代码，但似乎会导致问题：

```
class Page:
    cache = []

    """ Return cached object """
    def __getCache(self, title):
        for o in Page.cache:
            if o.__searchTerm == title or o.title == title:
                return o
        return None

    """ Initilize the class and start processing """
    def __init__(self, title, api=None):
        o = self.__getCache(title)
        if o:
            self = o
            return
        Page.cache.append(self)

        # Other init code
        self.__searchTerm = title
        self.title = self.someFunction(title) 
```

然后我尝试：

```
a = Page('test')
b = Page('test')

print a.title # works
print b.title # AttributeError: Page instance has no attribute 'title' 
```

这段代码有什么问题？为什么它不起作用？有没有办法让它工作？如果不是，我如何轻松透明地处理最终用户缓存对象？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T17:31:01.933

如果你想操纵创作，你需要改变`__new__`.

```
>>> class Page(object):
...     cache = []
...     """ Return cached object """
...     @classmethod
...     def __getCache(cls, title):
...         for o in Page.cache:
...             if o.__searchTerm == title or o.title == title:
...                 return o
...         return None
...     """ Initilize the class and start processing """
...     def __new__(cls, title, api=None):
...         o = cls.__getCache(title)
...         if o:
...             return o
...         page = super(Page, cls).__new__(cls)
...         cls.cache.append(page)
...         page.title = title
...         page.api = api
...         page.__searchTerm = title
...         # ...etc
...         return page
... 
>>> a = Page('test')
>>> b = Page('test')
>>> 
>>> print a.title # works
test
>>> print b.title
test
>>> 
>>> assert a is b
>>> 
```

**编辑：**使用`__init__`：

```
>>> class Page(object):
...     cache = []
...     @classmethod
...     def __getCache(cls, title):
...         """ Return cached object """
...         for o in Page.cache:
...             if o.__searchTerm == title or o.title == title:
...                 return o
...         return None
...     def __new__(cls, title, *args, **kwargs):
...         """ Initilize the class and start processing """
...         existing = cls.__getCache(title)
...         if existing:
...             return existing
...         page = super(Page, cls).__new__(cls)
...         return page
...     def __init__(self, title, api=None):
...         if self in self.cache:
...             return
...         self.cache.append(self)
...         self.title = title
...         self.api = api
...         self.__searchTerm = title
...         # ...etc
... 
>>> 
>>> a = Page('test')
>>> b = Page('test')
>>> 
>>> print a.title # works
test
>>> print b.title
test
>>> assert a is b
>>> assert a.cache is Page.cache
>>> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T17:22:59.867

一旦创建对象，您就无法真正更改它的实例。当设置`self`为其他值时，您所做的只是更改变量指向的引用，因此实际对象不受影响。

这也解释了为什么该`title`属性不存在。更改局部`self`变量后立即返回，防止当前实例`title`初始化属性（更不用说`self`此时不会指向正确的实例）。

所以基本上，你不能在它的初始化（in `__init__`）期间更改对象，因为那时它已经被创建并分配给变量。像这样的构造函数调用`a = Page('test')`实际上是一样的：

```
a = Page.__new__('test')
a.__init__('test') 
```

如您所见，`__new__`首先调用了类构造函数，而这实际上是由谁负责创建实例。所以你可以覆盖类的`__new__`方法来操作对象的创建。

然而，通常首选的方法是创建一个简单的工厂方法，如下所示：

```
@classmethod
def create (cls, title, api = None):
    o = cls.__getCache(title)
    if o:
        return o
    return cls(title, api) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T17:15:39.987

`self`是一个普通的局部变量，所以设置`self = ..`只是改变了*该函数*`self`中变量指向的内容。它不会改变实际对象。

 *请参阅：[在方法中用另一个相同类型的对象替换 self 对象是否安全？](https://stackoverflow.com/questions/1216356/is-it-safe-to-replace-a-self-object-by-another-object-of-the-same-type-in-a-meth)

为了做你想做的事，你可以使用一个静态函数作为[工厂](http://en.wikipedia.org/wiki/Factory_%28software_concept%29)：

```
class Page:
    cache = []

    """ Return cached object """
    @staticmethod
    def create(title):
        for o in Page.cache:
            if o.__searchTerm == title or o.title == title:
                return o
        return Page(title)

    """ Initilize the class and start processing """
    def __init__(self, title, api=None):
        Page.cache.append(self)

        # Other init code
        self.__searchTerm = title
        self.title = title

a = Page.create('test')
b = Page.create('test')

print a.title
print b.title 
```*

# delphi - 如何使用 Delphi 和 DBExpress 从存储过程中返回 Oracle 游标作为客户端数据集

> ID：13054254
> 
> 赞同：1
> 
> 时间：2012-10-24T17:12:30.693
> 
> 标签：delphi, cursor, oracle11g, delphi-xe2, dbexpress

第一关我对 Delphi 还有些陌生，所以这可能是一个被忽视的“平凡细节”。[提前抱歉]

我需要从包中包含的 Oracle 11g 游标创建 TSQLDataset 或 TClientDataSet。我正在使用 Delphi XE2 和 DBExpress 连接到 DB 和 DataSnap 将数据发送回客户端。

我在从 Delphi 代码执行存储过程时遇到问题。

**包头**：

```
create or replace
PACKAGE KP_DATASNAPTEST AS 
  procedure GetFaxData(abbr varchar2, Res out SYS_REFCURSOR);
END KP_DATASNAPTEST; 
```

**包体**：

```
create or replace
PACKAGE  body KP_DATASNAPTEST AS 
  procedure GetFaxData(abbr varchar2, Res out SYS_REFCURSOR)is
  Begin
    open Res for 
      SELECT  Name, 
              Address1, 
              City, 
              fax_nbr 
      FROM    name 
      JOIN phone on name.Abrv = phone.abrv 
      WHERE phone.fax_nbr is not null and name.abrv = abbr;
  end;
END KP_DATASNAPTEST; 
```

我在 SQL Developer 中执行此过程没有问题，问题在于 DataSnap 服务器上的此代码：

```
function TKPSnapMethods.getCDS_Data2(): OleVariant;
var
  cds: TClientDataSet;      
  dsp: TDataSetProvider;
  strProc: TSQLStoredProc;      
begin
  strProc := TSQLStoredProc.Create(self);
  try
    strProc.MaxBlobSize := -1;
    strProc.SQLConnection:= SQLCon;//TSQLConnection

    dsp := TDataSetProvider.Create(self);
    try
      dsp.ResolveToDataSet := True;
      dsp.Exported := False;
      dsp.DataSet := strProc;
      cds := TClientDataSet.Create(self);
      try
        cds.DisableStringTrim := True;
        cds.ReadOnly := True;
        cds.SetProvider(dsp);

        strProc.Close;
        strProc.StoredProcName:= 'KP_DATASNAPTEST.GetFaxData';
        strProc.ParamCheck:= true;
        strProc.ParamByName('abbr').AsString:= 'ZZZTOP';
        strProc.Open; //<--Error: Parameter 'Abbr' not found. 

        cds.Open;
        Result := cds.Data;
      finally
        FreeAndNil(cds);
      end;
    finally
      FreeAndNil(dsp);
    end;
  finally
    FreeAndNil(strProc);
    self.SQLCon.Close;
  end;
end; 
```

我也尝试通过 ClientDataSet 分配参数值，但没有任何运气。如果它更容易或产生结果，我不会反对从函数返回 TDataSet。数据用于填充自定义对象属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T01:55:24.423

正如 paulsm4 中提到的[`this answer`](https://stackoverflow.com/a/13059851/960757)，Delphi 并不关心获取存储过程参数描述符，因此您必须自己处理。要从包中获取 Oracle 存储过程的参数，您可以尝试使用该[`GetProcedureParams`](http://docwiki.embarcadero.com/Libraries/XE3/en/Data.SqlExpr.TSQLConnection.GetProcedureParams)方法用参数描述符填充列表，并用[`LoadParamListItems`](http://docwiki.embarcadero.com/Libraries/XE3/en/Data.SqlExpr.LoadParamListItems)该列表[`Params`](http://docwiki.embarcadero.com/Libraries/XE3/en/Data.SqlExpr.TCustomSQLDataSet.Params)集合填充过程。在代码中，它可能如下所示。

请注意，以下代码仅根据文档在浏览器中编写，因此未经测试。是的，关于释放`ProcParams`变量，这是通过以下[`FreeProcParams`](http://docwiki.embarcadero.com/Libraries/XE3/en/Data.SqlExpr.FreeProcParams)过程完成的：

```
var
  ProcParams: TList;
  StoredProc: TSQLStoredProc;
  ...
begin
  ...
  StoredProc.PackageName := 'KP_DATASNAPTEST';
  StoredProc.StoredProcName := 'GetFaxData';
  ProcParams := TList.Create;
  try
    GetProcedureParams('GetFaxData', 'KP_DATASNAPTEST', ProcParams);
    LoadParamListItems(StoredProc.Params, ProcParams);
    StoredProc.ParamByName('abbr').AsString := 'ZZZTOP';
    StoredProc.Open;
  finally
    FreeProcParams(ProcParams);
  end;
  ...
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T00:22:47.973

我认为 Delphi 不会自动识别 Oracle 参数名称并为您填写它们。我认为您需要添加参数。例如：

```
with strProc.Params.Add do
 begin
   Name := 'abbr';
   ParamType := ptInput;
   Value := ZZZTOP';
   ...
 end; 
```

# r - 如何在 R Studio 中将导入的 Stata dta 文件重新保存为 CSV 文件

> ID：13054255
> 
> 赞同：-2
> 
> 时间：2012-10-24T17:12:31.833
> 
> 标签：r, stata

我已通过以下方式将 Stata 数据集导入 R：

```
library(foreign) 
abcdata <- read.dta("abc.dta") 
```

如何将“abcdata”重新保存到 CSV 文件中？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T17:17:51.173

尝试：

```
> write.csv(data, file = "fhsdata.csv") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T17:14:49.537

你必须阅读`?write.table`

```
 write.table(data, "abcdata.csv", sep=',') 
```

或直接使用：

```
write.csv(...) 
```

# sql - 如何读取被错误删除的表的列。

> ID：13054257
> 
> 赞同：2
> 
> 时间：2012-10-24T17:12:38.423
> 
> 标签：sql, nopcommerce

我在使用 WebMatrix - 定义编辑器时删除了 IsGftCard。我用编辑器把 IsGiftCard 放回去，给了它一点数据类型，并尝试将数据值更改为 false，因为它不适用于 Null 字符，但是当我尝试保存文件时 Web 矩阵会出错

无法将值 NULL 插入列“IsGiftCard”、表“incrediblebranding.dbo.ProductVariant”；列不允许空值。更新失败。该语句已终止。

所以我允许 Null 字符允许保存文件，但是当我尝试访问我的 PC 上的站点 (localhost) 时，我在 Internet Explorer 中收到以下错误。

```
 System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'IsGiftCard', table 'incrediblebranding.dbo.ProductVariant'; column does not allow nulls. UPDATE fails.
The statement has been terminated.
   at Microsoft.WebMatrix.DatabaseManager.SqlDatabase.SqlDatabaseProvider.EditTable(String connectionString, String schema, TableInfo tableInfo)
   at Microsoft.WebMatrix.DatabaseManager.IisDbManagerModuleService.EditTable(DatabaseConnection databaseConnection, String schema, Object tableInfoData, String configPathState)
   at Microsoft.WebMatrix.DatabaseManager.Client.ClientConnection.EditTable(String schema, Object tableInfoData)
   at Microsoft.WebMatrix.DatabaseManager.Client.ClientTable.CommitChanges()
   at Microsoft.WebMatrix.DatabaseManager.Client.TableDesignerViewModel.PerformSave(). error
Server Error in '/' Application.
-------------------------------------------------------------------------------- 
```

无法将“ProductVariant”上的“IsGiftCard”属性设置为“null”值。您必须将此属性设置为“布尔”类型的非空值。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Data.ConstraintException：“ProductVariant”上的“IsGiftCard”属性无法设置为“null”值。您必须将此属性设置为“布尔”类型的非空值。

```
Source Error: 

Line 76:         <div class="clear">
Line 77:         </div>
Line 78:         @Html.Action("RecentlyViewedProductsBlock", "Catalog")        
Line 79:         <div class="clear">
Line 80:         </div>        

Source File: c:\Users\USER\Documents\My Web Sites\nopCommerce\Views\Shared\_ColumnsThree.cshtml    Line: 78 

Stack Trace: 

[ConstraintException: The 'IsGiftCard' property on 'ProductVariant' could not be set to a 'null' value. You must set this property to a non-null value of type 'Boolean'. ]
   System.Data.Common.Internal.Materialization.ErrorHandlingValueReader`1.GetValue(DbDataReader reader, Int32 ordinal) +105
   lambda_method(Closure , Shaper ) +1240
   System.Data.Common.Internal.Materialization.Shaper.HandleEntityAppendOnly(Func`2 constructEntityDelegate, EntityKey entityKey, EntitySet entitySet) +218
   lambda_method(Closure , Shaper ) +215
   System.Data.Common.Internal.Materialization.Coordinator`1.ReadNextElement(Shaper shaper) +170
   System.Data.Common.Internal.Materialization.SimpleEnumerator.MoveNext() +84 
```

这个错误还有很多，但我把它缩短了。无论如何编辑product_variant文件以将默认值更改为False并保存.dbo。文件。或者有没有办法完全替换 product_variant 文件。我对此非常陌生，如果你能帮忙，马克

# java - JDBC 无法解析为类型

> ID：13054258
> 
> 赞同：2
> 
> 时间：2012-10-24T17:12:45.543
> 
> 标签：java, eclipse, jakarta-ee, jdbc

我正在尝试`@JDBC`在我的类定义中使用注释，如下所示，但 Eclipse 说`JDBC cannot be resolved to a type`. 为什么呢？

我使用 MySQL 作为数据库引擎，我已经添加了`mysql-connector-java`to`WEB-INF/lib`并将其添加到项目的构建路径中。

当我在同一行代码上单击红色方块上带有 X 的灯泡时，没有任何选项可以导入任何东西 - 只是`Create annotation JDBC`.

```
import java.util.List;

import javax.sql.DataSource;

@JDBC
public class MyClass {
...
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T17:45:42.573

这个注解在[Java EE](http://docs.oracle.com/javaee/6/api/)和[JDBC中根本](http://docs.oracle.com/javase/6/docs/api/java/sql/package-summary.html)**不**存在。

鉴于 MySQL + JDBC + Java EE + Eclipse 的组合，您很可能在不阅读文本的情况下遵循[本教程](http://wiki4.caucho.com/Java_EE_Servlet/JSP_tutorial_%3a_Adding_MySQL_and_JDBC_to_bookstore_example)并复制粘贴代码。它提到以下内容：

> 另请注意，我们定义了一个名为 @JDBC 的新注解。这允许我们将正确的存储库注入到 Servlet 中，如下所示：
> 
> ```
> package com.bookstore;
> 
> import java.lang.annotation.Retention;
> import java.lang.annotation.Target;
> import static java.lang.annotation.ElementType.*;
> import static java.lang.annotation.RetentionPolicy.*;
> 
> import javax.inject.Qualifier;
> 
> @Qualifier @Retention(RUNTIME) @Target({TYPE, METHOD, FIELD, PARAMETER})
> public @interface JDBC {
> } 
> ```

因此，您必须*自己*创建它。

# linux - 在 Linux/Ubuntu 上安装 boost

> ID：13054259
> 
> 赞同：1
> 
> 时间：2012-10-24T17:12:47.097
> 
> 标签：linux, ubuntu, boost, compilation, installation

我需要编译使用来自 boost 库的头文件的程序。所以我找到了两条指令：

```
sudo apt-get install libboost-all-dev 
```

和

```
sudo apt-get install boost-devel 
```

**libboost-all-dev**和**boost-devel**有什么区别？也许我必须与另一个安装它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:05:28.870

我不知道提升相关的细节。

要获取有关 debian/ubuntu 软件包的更多信息，请尝试：

`apt-cache show liboost-all-dev`

# ios - AFNetworking 发生在主线程上

> ID：13054261
> 
> 赞同：3
> 
> 时间：2012-10-24T17:12:47.850
> 
> 标签：ios, afnetworking

我有一个关于 AFNetworking 的问题。我在这里阅读了文档：

[http://afnetworking.github.com/AFNetworking/Classes/AFImageRequestOperation.html](http://afnetworking.github.com/AFNetworking/Classes/AFImageRequestOperation.html)

它说：

**urlRequest**：在操作执行期间要异步加载的请求对象。

问题是当我执行下面的请求时，它发生在主线程上。我可以通过检查它是否在主线程中来确认它：

```
AFImageRequestOperation *operation = [AFImageRequestOperation imageRequestOperationWithRequest:urlrequest success:^(UIImage *image) {
    if ([NSThread mainThread]){
        NSLog(@"this is the main thread");
    }
}];
[operation start]; 
```

有什么我做错了吗？我对文档的解释有误吗？为什么在文档之后它不是异步的？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-16T06:29:46.563

KVISH > 但是，您可以分配不同的 successCallbackQueue ：

```
dispatch_queue_t backgroundQueue = dispatch_queue_create("com.name.bgqueue", NULL);
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
operation.successCallbackQueue = backgroundQueue; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-24T17:23:03.917

图像正在后台加载，然后在主线程上调用您的成功块。

这一点是图像的加载需要一些时间并且会阻塞你的 UI 是在后台完成的，但是一旦图像被加载，你可能想要做一些事情，比如在 UIImageView 上设置它，这需要在主线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T17:22:29.133

哇，不敢相信在问之前我自己没有注意到这一点。在`AFNetworking`类中，它具有以下内容：

```
dispatch_async(requestOperation.successCallbackQueue ?: dispatch_get_main_queue(), ^(void) {
                    success(operation.request, operation.response, processedImage);
                }); 
```

所以在主队列上调用成功。结案。

# cuda - CUDA 运行时 API 错误 38：未检测到支持 CUDA 的设备

> ID：13054262
> 
> 赞同：16
> 
> 时间：2012-10-24T17:12:47.927
> 
> 标签：cuda, nvidia

**情况**

我有一个 2 gpu 服务器（Ubuntu 12.04），在那里我用 GTX 670 切换了 Tesla C1060。比我在 4.2 上安装了 CUDA 5.0。之后，我为 simpleMPI 编译了所有示例 execpt，没有错误。但是当我运行时，`./devicequery`我收到以下错误消息：

```
foo@bar-serv2:~/NVIDIA_CUDA-5.0_Samples/bin/linux/release$ ./deviceQuery
./deviceQuery Starting...

 CUDA Device Query (Runtime API) version (CUDART static linking)

cudaGetDeviceCount returned 38
-> no CUDA-capable device is detected 
```

**我试过的**

[为了解决这个问题，我尝试了支持 CUDA 的设备](https://stackoverflow.com/a/10926016/380038)推荐的所有想法，但无济于事：

*   `/dev/nvidia*`在那里并且权限是666（crw-rw-rw-）和所有者root：root

    ```
     foo@bar-serv2:/dev$ ls -l nvidia*
     crw-rw-rw- 1 root root 195,   0 Oct 24 18:51 nvidia0
     crw-rw-rw- 1 root root 195,   1 Oct 24 18:51 nvidia1
     crw-rw-rw- 1 root root 195, 255 Oct 24 18:50 nvidiactl 
    ```

*   我尝试使用 sudo 执行代码

*   CUDA 5.0同时安装驱动和库

**PS**这里是lspci | grep -i 英伟达：

```
foo@bar-serv2:/dev$ lspci | grep -i nvidia
03:00.0 VGA compatible controller: NVIDIA Corporation GK104 [GeForce GTX 670] (rev a1)
03:00.1 Audio device: NVIDIA Corporation GK104 HDMI Audio Controller (rev a1)
04:00.0 VGA compatible controller: NVIDIA Corporation G94 [Quadro FX 1800] (rev a1) 
```

**[更新]**

```
foo@bar-serv2:~/NVIDIA_CUDA-5.0_Samples/bin/linux/release$  nvidia-smi -a
NVIDIA: API mismatch: the NVIDIA kernel module has version 295.59,
but this NVIDIA driver component has version 304.54\.  Please make
sure that the kernel module and all NVIDIA driver components
have the same version.
Failed to initialize NVML: Unknown Error 
```

如果我使用 CUDA 5.0 安装程序同时安装驱动程序和库，那怎么可能。旧的 4.2 版本会不会乱七八糟？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-06-21T13:20:31.973

我遇到了这个问题，并运行

```
nvidia-smi 
```

通知我 API 不匹配。问题是我的 Linux 发行版安装了需要重新启动系统的更新，因此重新启动解决了这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T06:23:56.197

请参阅此堆栈溢出问题[在 Ubuntu 12.10 中安装 cuda 5 示例](https://stackoverflow.com/questions/12986701/installing-cuda-5-samples-in-ubuntu-12-10)。

1.  Ubuntu 12 还不是受支持的 Linux 发行版。有关参考，请参阅[CUDA 5.0 工具包发行说明和勘误表](http://developer.download.nvidia.com/compute/cuda/5_0/rel/docs/CUDA_Toolkit_Release_Notes_And_Errata.txt)

    ** 当前支持的发行版

    ```
    Distribution       32 64  Kernel                 GCC         GLIBC        
    -----------------  -- --  ---------------------  ----------  -------------
    Fedora 16          X  X   3.1.0-7.fc16           4.6.2       2.14.90      
    ICC Compiler 12.1     X                                                   
    OpenSUSE 12.1         X   3.1.0-1.2-desktop      4.6.2       2.14.1       
    Red Hat RHEL 6.x      X   2.6.32-131.0.15.el6    4.4.5       2.12         
    Red Hat RHEL 5.5+     X   2.6.18-238.el5         4.1.2       2.5          
    SUSE SLES 11 SP2      X   3.0.13-0.27-pae        4.3.4       2.11.3       
    SUSE SLES 11.1     X  X   2.6.32.12-0.7-pae      4.3.4       2.11.1       
    Ubuntu 11.10       X  X   3.0.0-19-generic-pae   4.6.1       2.13         
    Ubuntu 10.04       X  X   2.6.35-23-generic      4.4.5       2.12.1 
    ```

2.  如果您想在 Ubuntu 12 上运行它，请查看[rpardo](https://stackoverflow.com/a/12991614/56875)的答案。看起来这个发行版而不是安装 64 位库来`/usr/lib64`安装它们`/usr/lib/x86_64-linux-gnu/`

我建议搜索系统上的所有`libcuda.so`实例`libnvidia-ml.so`。由于驱动程序不支持此发行版，它可能已将库安装到`LD_LIBRARY_PATH`. 然后移动库和/或更改`LD_LIBRARY_PATH`指向此位置（它应该是左侧的第一条路径）。然后重试`nvidia-smi`或`deviceQuery`

祝你好运

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-22T13:51:23.367

我在带有 GTX980 GPU 的 Windows 机器上的 cudaGetDeviceCount 出现错误 38。在我从 NVIDIA 网站下载 GTX 980 的最新驱动程序后，安装并重新启动，一切都很好。看起来 CUDA 安装程序没有安装最新的驱动程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-15T11:08:52.163

我在 Debian 上遇到了非常相似的问题，事实证明加载的`nvidia`模块的版本与`libcuda1`.

要检查已安装的`nvidia`模块，您应该执行以下操作：

```
 $ sudo modinfo nvidia-current | grep version
  version:        319.82 
```

如果它与此版本不匹配，`libcuda1`则问题的根源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-02T11:03:49.863

尝试使用 sudo 运行示例（或者，您可以执行“sudo su”，将 LD_LIBRARY_PATH 设置为 cuda 库的路径，并以 root 身份运行示例）。显然，由于您可能已经使用 sudo 安装了 CUDA 5.0，因此示例无法使用普通用户运行。但是，如果您使用 root 运行示例，那么您也可以使用普通用户运行示例！我还没有重新启动系统以查看示例是否即使在重新启动后也可以与普通用户一起使用，或者每次您应该使用 root 运行至少一个 CUDA 应用程序。

如果您在不使用 sudo 的情况下安装 CUDA TakeKit，该问题可能会完全消失。

# c# - c#属性来验证方法参数

> ID：13054266
> 
> 赞同：0
> 
> 时间：2012-10-24T17:12:59.440
> 
> 标签：c#, attributes

我有一个 Windows 服务，并且我将一个 userId 传递给每个针对数据库验证的服务调用。现在我必须在内部的每个方法中调用该验证方法。我试图制作 ac# 属性，我可以为每个方法添加前缀并让它为我进行验证，但我不确定如何从属性中读取方法 userId 参数。

这就是我所拥有的：

```
public int GetANumber(Guid userId){

ValidateUserId(userId);

return 1;

} 
```

这就是我要的：

```
[ValidateUserId]
public int GetANumber(Guid userId){

    return 1;

    } 
```

到目前为止，这是我的属性：

```
[AttributeUsage(AttributeTargets.Method)]
    public sealed class ValidateUserId : Attribute
    {
        public ValidateUserId()
        {
            //need to get userId from method here and check against db
        }
    } 
```

有任何想法吗？

# php - 我希望我的 wordpress 帖子在类似于 facebook 的用户滚动页面上一次加载一些

> ID：13054269
> 
> 赞同：-1
> 
> 时间：2012-10-24T17:13:10.567
> 
> 标签：php, javascript, jquery, wordpress

我希望我的 wordpress 帖子在类似于 facebook 的用户滚动页面上一次加载一些，例如我的网页应该自动加载 10 个，当我到达页面底部时，我希望它再加载 10 个，直到所有帖子都加载主页。

我该怎么做呢？我已经进行了一些挖掘，但我对 wordpress 还是很陌生，并且无法找到可以完成任务的脚本或插件。非常感谢所有帮助！

我的网站是[dev.vercitycolab.com](http://dev.vercitycolab.com)（它现在只加载 10 个，因为当我发布所有视频帖子时，加载速度太慢了）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:26:20.963

没有自己编码，这里有一个插件可以满足你的要求：[http ://wordpress.org/extend/plugins/infinite-scroll/](http://wordpress.org/extend/plugins/infinite-scroll/)

# asp.net - 设置文化到 Aspx 网站

> ID：13054270
> 
> 赞同：1
> 
> 时间：2012-10-24T17:13:23.467
> 
> 标签：asp.net, globalization

我的网站有一些问题需要处理。问题之一是加载 5x。

我一直在尝试为页面设置特定语言。我的问题如下：

当页面刷新 n 次时，它会在某处覆盖页面语言设置。我在 Application_Start 方法中测试了修改 global.asax 页面。这个方法只被调用一次。在此页面进入 default.aspx 页面并点击页面 ntimes 后，当页面初始化时，它将文化更改为默认文化 en-GB，而不是我在 Page_Load 事件中设置的文化。

我已经设置了线程。当前的 。UI 和文化到我的特定文化。但这不起作用。

我努力了：

1.  在 global.asax 中设置语言
2.  在 global.asax + onload 页面中为我的 default.aspx 设置语言
3.  使用会话设置语言，并在重新加载页面后显示在正确的页面中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:59:32.517

如果你将它添加到 Global.asax.cs 它应该可以工作。这个对我有用。

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
    Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture("de-ch");
    Thread.CurrentThread.CurrentUICulture = CultureInfo.CreateSpecificCulture("de-ch");
} 
```

但是你对这个问题的描述有点混乱......

# javascript - 将数字更改为数字列表中最接近的数字

> ID：13054277
> 
> 赞同：0
> 
> 时间：2012-10-24T17:13:46.027
> 
> 标签：javascript, jquery, forms, input, numbers

我有一个数字列表。我有一个输入 type='text' 表单，有人可以写任何数字。但我希望他输入的这个号码更改为我列表中最接近的号码。

例如，我的列表包含这些数字：1、5、10、12、19、23、100、400、999。这个序列没有意义，甚至不要试图弄清楚:)。而且我有最简单的形式：

```
<form id="myform">
<input type="text" id="mytext">
</form> 
```

如果某人在我的输入中输入 105，他的数字将变为 100；如果他写 18，他会得到 19，依此类推……

有人有什么想法吗？我认为它可以用javascript（也许是jquery）完成，但我无法编写或找到一个工作......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:24:24.310

尝试这个

```
var theArray = [ 1, 5, 10, 12, 19, 23, 100, 400, 999 ];
var goal = parseInt(("#mytext").val());
var closest = null;

$.each(theArray, function(){
  if (closest == null || Math.abs(this - goal) < Math.abs(closest - goal)) {
    closest = this;
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:28:41.157

我的做法是：

```
var precast = [1, 5, 10, 12, 19, 23, 100, 400, 999];

function recast(el, arr) {
        var val = parseInt(el.value, 10);
    if ((!el || !arr) && val >= arr[0]) {
        return false;
    }
    else {
        for (var i = 0, len = arr.length; i < len; i++) {
            if (arr[i] > val) {
                var d = arr[i] - val;
                return arr[i-1] + d >= val ? arr[i-1] : arr[i];
            }
        }
    }
}

document.getElementById('mytext').onblur = function(){
    this.value = recast(this, precast);
}; 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/nZVHn/1/)。

# ruby-on-rails - 将图像上传到云服务的最简单解决方案

> ID：13054278
> 
> 赞同：6
> 
> 时间：2012-10-24T17:14:02.437
> 
> 标签：ruby-on-rails, ruby-on-rails-3, image, cloud

允许人们将图像上传到云服务器（在 Rails 3 应用程序中）的最简单方法是什么？我想在表单中包含一个“上传图片”按钮，并将地址存储在我的模型中。我还希望能够限制文件大小。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T22:50:33.257

我推荐 attachinary 和 cloudinary 服务：

[https://github.com/assembler/attachinary](https://github.com/assembler/attachinary)

无需使用 imagemagick 可以节省大量时间。Cloudinary 是一项了不起的服务，可以动态调整图像大小。附件也很好地集成了 jquery 上传小部件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T18:21:53.543

将[回形针](https://github.com/thoughtbot/paperclip)宝石用于导轨：

这是一个很好的教程：[Uploading Files to S3 in Ruby with Paperclip](https://devcenter.heroku.com/articles/paperclip-s3)

# akka - 演员创作过多如何处理

> ID：13054280
> 
> 赞同：1
> 
> 时间：2012-10-24T17:14:04.103
> 
> 标签：akka

编辑：我忘了提到一件重要的事情：下面描述的演员创建​​取决于数据 - 有时需要很少的处理演员，有时需要很多。

我正在处理的一个组件需要创建许多参与者（可能是循环路由的参与者），每个参与者都需要处理大量消息。这些参与者中的每一个都属于具有相同初始化参数的“处理批次”。

当我在带有许多消息的生产机器上运行它时，我很快就会得到一些演员创建超时。我直接用创建演员`ActorSystem.actorOf()`。

但令我惊讶的是，我认为总而言之，创建的演员并不多（8 个“处理接收器”和 5 个循环路由演员将是 40 个演员，这似乎并不多）。

一旦不再需要演员，我就会关闭演员，让另一个演员（计算通过“处理”演员获得的成功和失败的数量）发送给他们，`PoisonPill`所以我认为他们都被关闭了正确放下。

我在创建这些演员的方式上可能做错了什么，例如我应该以不同的方式创建它们吗？或者一个合适的策略是在创建新的actor之前等待一些批次完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:46:08.240

由于您没有指定您使用的是哪个版本，我假设您有兴趣阅读以下内容：

[http://doc.akka.io/docs/akka/2.0.3/scala/actors.html#Creating_Actors_with_default_constructor](http://doc.akka.io/docs/akka/2.0.3/scala/actors.html#Creating_Actors_with_default_constructor)（尤其是警告）

除了技术论点之外，在顶层创建您的演员不是一个好的设计，错过了故障处理的好处。

# c# - 列表 .ForEach 带索引

> ID：13054281
> 
> 赞同：24
> 
> 时间：2012-10-24T17:14:08.343
> 
> 标签：c#, linq, generics

我正在尝试找到以下代码的 LINQ 等效项：

```
NameValueCollection nvc = new NameValueCollection();

List<BusinessLogic.Donation> donations = new List<BusinessLogic.Donation>();
donations.Add(new BusinessLogic.Donation(0, "", "", "");
donations.Add(new BusinessLogic.Donation(0, "", "", "");
donations.Add(new BusinessLogic.Donation(0, "", "", "");

for(var i = 0; i < donations.Count(); i++)
{
    // NOTE: item_number_ + i - I need to be able to do this
    nvc.Add("item_number_" + i, donations[i].AccountName);
} 
```

我希望我可以使用类似的东西：

```
NameValueCollection nvc = new NameValueCollection();

List<BusinessLogic.Donation> donations = new List<BusinessLogic.Donation>();
donations.Add(new BusinessLogic.Donation(0, "", "", "");
donations.Add(new BusinessLogic.Donation(0, "", "", "");
donations.Add(new BusinessLogic.Donation(0, "", "", "");

donations.ForEach(x => nvc.Add("item_name_" + ??, x.AccountName); 
```

但是我还没有找到一种方法来确定循环在哪个迭代上。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-24T17:21:45.050

LINQ 没有`ForEach`方法，这是有充分理由的。LINQ 用于执行*查询*。它旨在从某些数据源获取信息。它*不是*为改变数据源而设计的。LINQ 查询不应引起副作用，这正是您在这里所做的。

该类*确实*有一个方法，这就是您正在使用`List`的方法。因为它实际上不在命名空间中，所以在技术上它不是 LINQ 的一部分。*`ForEach``System.Linq`*

 *`for`您的问题中的循环没有任何问题。尝试以您尝试的方式更改它是错误的（从良好实践的角度来看）。

[这](http://blogs.msdn.com/b/ericlippert/archive/2009/05/18/foreach-vs-foreach.aspx)是一个更详细地讨论这个问题的链接。

现在，如果您想忽略该建议并使用一种`ForEach`方法，那么编写一个为操作提供索引的方法并不难：

```
public static void ForEach<T>(this IEnumerable<T> sequence, Action<int, T> action)
{
    // argument null checking omitted
    int i = 0;
    foreach (T item in sequence)
    {
        action(i, item);
        i++;
    }
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-08-05T17:19:33.137

如果你真的想使用 List.ForEach，很简单：

```
//[...]
int i=0;
donations.ForEach(x => nvc.Add("item_name_" + i++, x.AccountName); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-24T17:24:21.597

这有点令人费解并创建了一个中间集合，但是如何：

```
donations.Select((x, i) => new {Name = "item_name_" + i, x.AccountName})
    .ToList()
    .ForEach(x=> nvc.Add(x.Name, x.AccountName)); 
```

这使用了[包含索引](http://msdn.microsoft.com/en-us/library/bb534869.aspx)[的重载`Enumerable.Select`](http://msdn.microsoft.com/en-us/library/bb534869.aspx)。

我不得不说，这样做并没有什么真正的好处。您使用中间集合创建了更多开销，恕我直言，您失去了原始 for 循环的可读性。

如果您愿意使用`foreach`循环而不是`List.ForEach`. 请参阅[@wageoghe 的回答](https://stackoverflow.com/a/13055431/44853)（再次强烈推荐）。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-03-06T10:29:09.590

这是一篇旧文章，但谷歌排名很高，所以我认为更通用的方法会更合适。（另外，我倾向于忘记这是如何完成的，这意味着我每次都必须谷歌......）

假设一个整数列表：

`var values = new List<int>() { 2, 3, 4, 0x100, 74, 0xFFFF, 0x0F0F };`

要迭代列表并拥有索引，请执行以下操作：

```
values.Select((x, i) => new
{
    item = x,
    index = i
})
.ToList()
.ForEach(obj =>
{
    int value = obj.item;
    int valueIndex = obj.index;
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-24T18:28:22.240

捎带@lc的答案。

```
foreach (var x in donations.Select((d, i) => new {ItemName = "item_name_" + i, AccountName = d.AccountName}))
{
  nvc.Add(x.ItemName, x.AccountName);
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-24T17:28:40.450

您是否有任何理由不使用 a`Dictionary<string, string>`因为您的名称/键似乎是唯一的？这会更快，您可以使用`ToDictionary`标准查询运算符。

此外，如果您确实希望使用扩展方法（尽管 Servy 说这里的 for 循环是正确的解决方案），那么您可以编写自己的方法 - 请参见[此处](https://stackoverflow.com/a/521894/248164)。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-01-13T15:04:23.937

这也可以使用聚合来完成。检查以下示例：

```
var data = new[]
{
    "A",
    "B",
    "C",
    "D"
};

var count = data.Aggregate(0, (index, item) =>
{
    Console.WriteLine("[{0}] => '{1}'", index, item);

    return index + 1;
});

Console.WriteLine("Total items: {0}", count); 
```

`Aggregate`这里作为一个`for`声明。唯一的缺点是您需要在每次迭代中将索引的值增加一并返回它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-11-22T10:46:25.183

我喜欢这样做：

```
NameValueCollection nvc = new NameValueCollection();

List<BusinessLogic.Donation> donations = new List<BusinessLogic.Donation>();
donations.Add(new BusinessLogic.Donation(0, "", "", ""));
donations.Add(new BusinessLogic.Donation(0, "", "", ""));
donations.Add(new BusinessLogic.Donation(0, "", "", ""));

Enumerable
    .Range(0, donations.Count())
    .ToList()
    .ForEach(i => nvc.Add("item_number_" + i, donations[i].AccountName)); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2022-02-28T17:32:10.393

一个糟糕的解决方案是简单地使用 select 并返回一个无用的值。

```
items.toList().Select((el, index) =>
{
    el.doStuff();
    return 0;
}); 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2022-03-05T04:18:49.023

我觉得这个解决方案应该已经在这里了，但是...... Linq 有一个`Select`包含索引的，你可以随时将它打包到一个元组中并迭代。例如：

```
foreach ((var item, int n) in TheItems.Select((i,n)=>(i,n))) {
    // item is the current item, n is its index
} 
```

或者，如果您愿意：

```
foreach (var element in TheItems.Select((item,n)=>(item,n))) {
    // element.item is the current item, element.n is its index
} 
```

或者，类似于[这个答案](https://stackoverflow.com/a/55020875/616460)，但稍微不那么冗长，但请注意，这将通过调用杀死惰性评估，这会`ToList()`在调用之前强制枚举整个源`ForEach()`：

```
TheItems.Select((item,n)=>(item,n)).ToList().ForEach(element => { 
    // element.item is the current item, element.n is its index
}); 
```

无论如何，绝对不需要手动计算项目索引。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2012-10-24T17:26:48.560

尝试这个 -

```
donations.ForEach(x =>
         {
             int index = donations.IndexOf(x);
             nvc.Add("item_name_" + index, x.AccountName);
         }); 
```*

# iphone - 推送通知 iPhone 的问题

> ID：13054282
> 
> 赞同：2
> 
> 时间：2012-10-24T17:14:10.380
> 
> 标签：iphone, push-notification

我的应用程序中的推送通知有问题。我刚开始使用推送通知，所以我不知道我的问题是什么原因，我在谷歌中找不到解决方案。因此，我使用本教程[http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)作为推送通知编程的示例。当我在终端上运行“php simplepush.php”时，一切都很好，我在设备上收到了通知。但是当我在服务器上加载该脚本并尝试从那里运行它时，没有执行任何操作。只有 30 秒的等待和消息“连接失败：110 连接超时”

这是我的脚本的代码

```
<?php 
Put your device token here (without spaces):
$deviceToken = '***************';

// Put your private key's passphrase here: 
$passphrase = '**************';

// Put your alert message here:
$message = 'My first push notification!';

////////////////////////////////////////////////////////////////////////////////

$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', 'ck.pem');
stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

// Open a connection to the APNS server
$fp = stream_socket_client(
'ssl://gateway.sandbox.push.apple.com:2195', $err,
$errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);

if (!$fp)
exit("Failed to connect: $err $errstr" . PHP_EOL);

echo 'Connected to APNS' . PHP_EOL;

// Create the payload body
$body['aps'] = array(
'alert' => $message,
'sound' => 'default'
);

// Encode the payload as JSON
$payload = json_encode($body);

// Build the binary notification
$msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) .                 $payload;

// Send it to the server
$result = fwrite($fp, $msg, strlen($msg));

if (!$result)
echo 'Message not delivered' . PHP_EOL;
else
echo 'Message successfully delivered' . PHP_EOL;

// Close the connection to the server
fclose($fp); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T16:28:27.983

是的，正如 NewObjective 所澄清的，2195 和 2196 端口必须打开。要打开这些端口，您可能会询问 Bluehost 技术支持团队（票务/聊天），但在此之前您必须拥有专用 IP 地址。

但还有另一个问题。如果您尝试在设置专用 IP 地址并且两个端口都打开后立即发送推送通知消息，您可能会收到相同的“连接超时”错误。您可以通过 SSH 登录到您的服务器并运行“telnet gateway.sandbox.push.apple.com 2195”命令来测试该问题。如果您收到“连接超时”错误 - 您可以尝试联系 Bluehost 支持团队，但他们无法解决此问题。

如果您尝试使用 2195 开放端口远程登录任何其他服务器，您也会收到该错误。我与 Bluehost 支持团队进行了大约 10 次聊天，打开了 10 张左右的票，但他们真的无法帮助我。但两周后，一切都开始起作用了。我认为这是因为打开专用 IP 需要一些时间，但我不确定。无论如何，很有趣的是，Bluehost 支持团队总是回答问题出在 Apple 方面，即使您告诉他们任何其他打开 2195 端口的服务器也不可用）

# javascript - 如何设置 data-id 属性

> ID：13054286
> 
> 赞同：6
> 
> 时间：2012-10-24T17:14:31.857
> 
> 标签：javascript

我正在尝试在单击事件后从我的 js 文件中设置数据 ID 和/或跨度值。

```
<span id="test"></span> 
```

我的 sudo 代码 js 文件

```
nextLink: function(event) {
    $('#test').val = 3;
    $('#test').data('id') = 'Next';
}, 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-24T17:18:15.377

Try setting it as an attribute..

```
 $('#test').attr('data-id' , 'Next');   // JQuery 
```

You can also try the `setAttribute()` ..

```
var d = document.getElementById("test");  //   Javascript
d.setAttribute('data-id' , 'Next');       // 
```

Using this approach will reflect the new attribute in the DOM

In your code You are trying to set the attribute which is not present .. So you need to add the attribute first to add that ..

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T17:20:24.260

You probably need this:

```
$('#test').data('id', 'Next'); 
```

# javascript - 试图从 tr 标签获取类名 - '未定义'

> ID：13054287
> 
> 赞同：2
> 
> 时间：2012-10-24T17:14:31.167
> 
> 标签：javascript, class, getelementbyid, tablerow

我需要从给定的`<tr>`标签中获取类名，但我无法这样做。

```
<table cellpadding=5 cellspacing=5>
    <tr id='cat_abc123' class='class_a'>
        <td>foo</td>
        <td><input type='checkbox' name='cb1' value='1' onClick="info(this, 'abc123')">
    </tr>
</table>

 <script language='javascript'>
     function info(theElement, id)
     {
         tr_id = 'cat_' + id;
         alert(tr_id + ' ' + document.getElementById(tr_id).class);
     }
 </script> 
```

工作示例：http: [//jsfiddle.net/rQpeu/](http://jsfiddle.net/rQpeu/)

我错过了什么？

**更新**

我使用了错误的描述符 - 应该使用 Classname。感谢大家的及时回复！更新了 jsfiddle：http: [//jsfiddle.net/rQpeu/3/](http://jsfiddle.net/rQpeu/3/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T17:17:16.973

element.class 不正确。

你需要使用元素。**类名**。

[https://developer.mozilla.org/en-US/docs/DOM/element.className](https://developer.mozilla.org/en-US/docs/DOM/element.className)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:16:26.287

使用`className`而不是`class` [jsfiddle](http://jsfiddle.net/rQpeu/2/)

```
 <script language='javascript'>
  function info(theElement, id)
     {
         tr_id = 'cat_' + id;
         alert(tr_id + ' ' + document.getElementById(tr_id).className);
     }
 </script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T17:16:35.460

利用

```
document.getElementById(tr_id).className 
```

或者对于支持的现代浏览器`DOMTokenList`：

```
var d = document.getElementById(tr_id).classList
// d[0] would return class_a 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T17:16:39.093

是类名，不是类。

```
alert(tr_id + ' ' + document.getElementById(tr_id).className); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/rQpeu/1/)**

请参阅：[https ://developer.mozilla.org/en-US/docs/DOM/element.className](https://developer.mozilla.org/en-US/docs/DOM/element.className)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T17:24:09.897

使用`className`代替`class`

```
document.getElementById(tr_id).className 
```

# c# - 通过 C# 应用程序在 SSMS 中打开新的数据库连接和查询窗口？

> ID：13054289
> 
> 赞同：10
> 
> 时间：2012-10-24T17:14:34.483
> 
> 标签：c#, ssms

我有一个 C# 应用程序，当用户单击一个按钮时，它将打开具有指定服务器和数据库连接的 SQL Server Management Studio 查询编辑器。我想要做的是能够拥有相同的功能，但使用已经运行的 SSMS 实例（而不是启动新进程）。

到目前为止我的代码：

```
if (IsProcessOpen("Ssms") == false)
        {
            Process ssms = new Process();
            ssms.StartInfo.FileName = "C:\\Program Files (x86)\\Microsoft SQL Server\\110\\Tools\\Binn\\ManagementStudio\\Ssms.exe";
            ssms.StartInfo.Arguments = "-S " + StaticVariables.Getserver + " -d " + StaticVariables.Getdatabase;
            ssms.Start();
        }
        else
        {
            //In already running SSMS process, open connection to server and database with new query window.
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:09:35.673

就我的研究而言，没有可用于与现有 SSMS 流程交互的 API。（http://stackoverflow.com/questions/2334435/how-do-i-programmatically-open-a-new-tab-in-an-open-instance-of-sql-management-s）

您可以尝试进行涉及 SendKeys 的破解，但这会带来不知道 SSMS 窗口当前状态的缺点（如果它打开了任何活动窗口或任何东西）

如果您可以分享原始要求，我们可能会寻找一些更好的替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-19T14:04:23.233

这个问题快把我逼疯了，我终于发现，当我从“sa”登录改为使用Windows身份验证时，问题就解决了。

# asp.net - 从 IIS 运行 Web 服务

> ID：13054290
> 
> 赞同：1
> 
> 时间：2012-10-24T17:14:41.890
> 
> 标签：asp.net, web-services, iis-6

您好，我对在 .net 中创建 Web 服务非常陌生。我在 .net 中创建了一个 web 服务，它默认有一个 webmethod HelloWorld，另一个是我创建的 add 方法。然后我建立了那个网络服务。现在在第二阶段，我已经安装了 IIS，然后在管理员工具-> IIS 管理器-> 默认网站中，通过右键单击，我创建了一个名为“试用”的虚拟目录，其中包含具有所有权限的 web 服务的路径。我的服务已命名为 service.asmx。

现在的问题是当我右键单击该 service.asmx 并浏览它时。它向我显示错误，例如

```
 You are not authorized to view this page

     You do not have permission to view this directory or page using the credentials you supplied. 
```

我也试过检查“启用匿名访问”，也试过取消检查，但它不起作用。即使我也尝试过检查集成 Windows 身份验证并尝试取消选中它，但它现在也不起作用我有点厌倦了。我不明白为什么它不赋予我从 IIS 运行该 Web 服务的权利，该 Web 服务可以从 Studio 2008 完美运行。请给我运行它的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:17:47.883

首先，您能否包含您的 Web.config 文件？另外，您是否确保为使用 IIS 管理器创建的文件夹设置权限？我会先检查一下

# php - 如何使用 PHP 监听 TCP 端口？

> ID：13054291
> 
> 赞同：13
> 
> 时间：2012-10-24T17:14:41.930
> 
> 标签：php, networking, tcp, gps, ubuntu-server

我有一个 GPS 追踪器，它通过 GPRS 连接连接并将数据发送到定义的公共服务器：端口。

我可以定义 GPS 设备的 ip:port

我的问题是，我可以在我的服务器中打开一个端口并监听/保存使用 PHP 接收到的数据吗？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-24T17:35:07.260

**编辑/更新 2017 年 8 月 16 日：** 用户和库作者 <@Navarr> 评论说他已经发布了一个新的更新版本的库，我的原始答案中的代码是基于该版本的。[他的 github 上新代码](https://github.com/navarr/Sockets)的链接。随意探索新代码并参考此处的原始示例以获得洞察力（我没有亲自探索/使用过新代码）。

* * *

下面的代码将使用此处找到的 SocketServer.class.php 文件。它旨在作为独立进程运行，这意味着在 Linux 下我必须使文件可执行，然后使用“php my_server.php”从命令行运行它。有关从命令行运行 php 脚本的更多信息： [http ://www.funphp.com/?p=33](http://www.funphp.com/?p=33)

首先在这里获取 SocketServer.class.php 文件： [http ://www.phpclasses.org/browse/file/31975.html](http://www.phpclasses.org/browse/file/31975.html)

尝试使用它，然后根据需要调整它以处理接收您自己的传入数据。希望能帮助到你。

```
<?php

require_once("SocketServer.class.php"); // Include the File
$server = new SocketServer("192.168.1.6",31337); // Create a Server binding to the given ip address and listen to port 31337 for connections
$server->max_clients = 10; // Allow no more than 10 people to connect at a time
$server->hook("CONNECT","handle_connect"); // Run handle_connect every time someone connects
$server->hook("INPUT","handle_input"); // Run handle_input whenever text is sent to the server
$server->infinite_loop(); // Run Server Code Until Process is terminated.

function handle_connect(&$server,&$client,$input)
{
    SocketServer::socket_write_smart($client->socket,"String? ","");
}
function handle_input(&$server,&$client,$input)
{
    // You probably want to sanitize your inputs here
    $trim = trim($input); // Trim the input, Remove Line Endings and Extra Whitespace.

    if(strtolower($trim) == "quit") // User Wants to quit the server
    {
        SocketServer::socket_write_smart($client->socket,"Oh... Goodbye..."); // Give the user a sad goodbye message, meany!
        $server->disconnect($client->server_clients_index); // Disconnect this client.
        return; // Ends the function
    }

    $output = strrev($trim); // Reverse the String

    SocketServer::socket_write_smart($client->socket,$output); // Send the Client back the String
    SocketServer::socket_write_smart($client->socket,"String? ",""); // Request Another String
} 
```

* * *

编辑：为了保持这个答案的相关性和功能性，我发现最好不要继续依赖来自外部源的代码，这些代码可能并不总是可用（或在我的链接中提供的给定 URL）。因此，为方便起见，我在与本文顶部链接的 SocketServer.class.php 文件对应的代码下方添加。（对于长度和复制/粘贴时可能缺少缩进/格式表示歉意，我不是下面代码的作者）。

```
 <?php
  /*! @class SocketServer
   @author Navarr Barnier
   @abstract A Framework for creating a multi-client server using the PHP language.
   */
  class SocketServer
  {
    /*! @var config
     @abstract Array - an array of configuration information used by the server.
     */
    protected $config;

    /*! @var hooks
     @abstract Array - a dictionary of hooks and the callbacks attached to them.
     */
    protected $hooks;

    /*! @var master_socket
     @abstract resource - The master socket used by the server.
     */
    protected $master_socket;

    /*! @var max_clients
     @abstract unsigned int - The maximum number of clients allowed to connect.
     */
    public $max_clients = 10;

    /*! @var max_read
     @abstract unsigned int - The maximum number of bytes to read from a socket at a single time.
     */
    public $max_read = 1024;

    /*! @var clients
     @abstract Array - an array of connected clients.
     */
    public $clients;

    /*! @function __construct
     @abstract Creates the socket and starts listening to it.
     @param string - IP Address to bind to, NULL for default.
     @param int - Port to bind to
     @result void
     */
    public function __construct($bind_ip,$port)
  {
    set_time_limit(0);
    $this->hooks = array();

    $this->config["ip"] = $bind_ip;
    $this->config["port"] = $port;

    $this->master_socket = socket_create(AF_INET, SOCK_STREAM, 0);
    socket_bind($this->master_socket,$this->config["ip"],$this->config["port"]) or die("Issue Binding");
    socket_getsockname($this->master_socket,$bind_ip,$port);
    socket_listen($this->master_socket);
    SocketServer::debug("Listenting for connections on {$bind_ip}:{$port}");
  }

    /*! @function hook
     @abstract Adds a function to be called whenever a certain action happens. Can be extended in your implementation.
     @param string - Command
     @param callback- Function to Call.
     @see unhook
     @see trigger_hooks
     @result void
     */
    public function hook($command,$function)
  {
    $command = strtoupper($command);
    if(!isset($this->hooks[$command])) { $this->hooks[$command] = array(); }
    $k = array_search($function,$this->hooks[$command]);
    if($k === FALSE)
  {
    $this->hooks[$command][] = $function;
  }
  }

    /*! @function unhook
     @abstract Deletes a function from the call list for a certain action. Can be extended in your implementation.
     @param string - Command
     @param callback- Function to Delete from Call List
     @see hook
     @see trigger_hooks
     @result void
     */
    public function unhook($command = NULL,$function)
  {
    $command = strtoupper($command);
    if($command !== NULL)
  {
    $k = array_search($function,$this->hooks[$command]);
    if($k !== FALSE)
  {
    unset($this->hooks[$command][$k]);
  }
  } else {
    $k = array_search($this->user_funcs,$function);
    if($k !== FALSE)
  {
    unset($this->user_funcs[$k]);
  }
  }
  }

    /*! @function loop_once
     @abstract Runs the class's actions once.
     @discussion Should only be used if you want to run additional checks during server operation. Otherwise, use infinite_loop()
     @param void
     @see infinite_loop
     @result bool - True
     */
    public function loop_once()
  {
    // Setup Clients Listen Socket For Reading
    $read[0] = $this->master_socket;
    for($i = 0; $i < $this->max_clients; $i++)
  {
    if(isset($this->clients[$i]))
  {
    $read[$i + 1] = $this->clients[$i]->socket;
  }
  }

    // Set up a blocking call to socket_select
    if(socket_select($read,$write = NULL, $except = NULL, $tv_sec = 5) < 1)
  {
    // SocketServer::debug("Problem blocking socket_select?");
    return true;
  }

    // Handle new Connections
    if(in_array($this->master_socket, $read))
  {
    for($i = 0; $i < $this->max_clients; $i++)
  {
    if(empty($this->clients[$i]))
  {
    $temp_sock = $this->master_socket;
    $this->clients[$i] = new SocketServerClient($this->master_socket,$i);
    $this->trigger_hooks("CONNECT",$this->clients[$i],"");
    break;
  }
    elseif($i == ($this->max_clients-1))
  {
    SocketServer::debug("Too many clients... :( ");
  }
  }

  }

    // Handle Input
    for($i = 0; $i < $this->max_clients; $i++) // for each client
  {
    if(isset($this->clients[$i]))
  {
    if(in_array($this->clients[$i]->socket, $read))
  {
    $input = socket_read($this->clients[$i]->socket, $this->max_read);
    if($input == null)
  {
    $this->disconnect($i);
  }
    else
  {
    SocketServer::debug("{$i}@{$this->clients[$i]->ip} --> {$input}");
    $this->trigger_hooks("INPUT",$this->clients[$i],$input);
  }
  }
  }
  }
    return true;
  }

    /*! @function disconnect
     @abstract Disconnects a client from the server.
     @param int - Index of the client to disconnect.
     @param string - Message to send to the hooks
     @result void
     */
    public function disconnect($client_index,$message = "")
  {
    $i = $client_index;
    SocketServer::debug("Client {$i} from {$this->clients[$i]->ip} Disconnecting");
    $this->trigger_hooks("DISCONNECT",$this->clients[$i],$message);
    $this->clients[$i]->destroy();
    unset($this->clients[$i]);
  }

    /*! @function trigger_hooks
     @abstract Triggers Hooks for a certain command.
     @param string - Command who's hooks you want to trigger.
     @param object - The client who activated this command.
     @param string - The input from the client, or a message to be sent to the hooks.
     @result void
     */
    public function trigger_hooks($command,&$client,$input)
  {
    if(isset($this->hooks[$command]))
  {
    foreach($this->hooks[$command] as $function)
  {
    SocketServer::debug("Triggering Hook '{$function}' for '{$command}'");
    $continue = call_user_func($function,$this,$client,$input);
    if($continue === FALSE) { break; }
  }
  }
  }

    /*! @function infinite_loop
     @abstract Runs the server code until the server is shut down.
     @see loop_once
     @param void
     @result void
     */
    public function infinite_loop()
  {
    $test = true;
    do
  {
    $test = $this->loop_once();
  }
    while($test);
  }

    /*! @function debug
     @static
     @abstract Outputs Text directly.
     @discussion Yeah, should probably make a way to turn this off.
     @param string - Text to Output
     @result void
     */
    public static function debug($text)
  {
    echo("{$text}\r\n");
  }

    /*! @function socket_write_smart
     @static
     @abstract Writes data to the socket, including the length of the data, and ends it with a CRLF unless specified.
     @discussion It is perfectly valid for socket_write_smart to return zero which means no bytes have been written. Be sure to use the === operator to check for FALSE in case of an error.
     @param resource- Socket Instance
     @param string - Data to write to the socket.
     @param string - Data to end the line with. Specify a "" if you don't want a line end sent.
     @result mixed - Returns the number of bytes successfully written to the socket or FALSE on failure. The error code can be retrieved with socket_last_error(). This code may be passed to socket_strerror() to get a textual explanation of the error.
     */
    public static function socket_write_smart(&$sock,$string,$crlf = "\r\n")
  {
    SocketServer::debug("<-- {$string}");
    if($crlf) { $string = "{$string}{$crlf}"; }
    return socket_write($sock,$string,strlen($string));
  }

    /*! @function __get
     @abstract Magic Method used for allowing the reading of protected variables.
     @discussion You never need to use this method, simply calling $server->variable works because of this method's existence.
     @param string - Variable to retrieve
     @result mixed - Returns the reference to the variable called.
     */
    function &__get($name)
  {
    return $this->{$name};
  }
  }

  /*! @class SocketServerClient
   @author Navarr Barnier
   @abstract A Client Instance for use with SocketServer
   */
  class SocketServerClient
  {
    /*! @var socket
     @abstract resource - The client's socket resource, for sending and receiving data with.
     */
    protected $socket;

    /*! @var ip
     @abstract string - The client's IP address, as seen by the server.
     */
    protected $ip;

    /*! @var hostname
     @abstract string - The client's hostname, as seen by the server.
     @discussion This variable is only set after calling lookup_hostname, as hostname lookups can take up a decent amount of time.
     @see lookup_hostname
     */
    protected $hostname;

    /*! @var server_clients_index
     @abstract int - The index of this client in the SocketServer's client array.
     */
    protected $server_clients_index;

    /*! @function __construct
     @param resource- The resource of the socket the client is connecting by, generally the master socket.
     @param int - The Index in the Server's client array.
     @result void
     */
    public function __construct(&$socket,$i)
  {
    $this->server_clients_index = $i;
    $this->socket = socket_accept($socket) or die("Failed to Accept");
    SocketServer::debug("New Client Connected");
    socket_getpeername($this->socket,$ip);
    $this->ip = $ip;
  }

    /*! @function lookup_hostname
     @abstract Searches for the user's hostname and stores the result to hostname.
     @see hostname
     @param void
     @result string - The hostname on success or the IP address on failure.
     */
    public function lookup_hostname()
  {
    $this->hostname = gethostbyaddr($this->ip);
    return $this->hostname;
  }

    /*! @function destroy
     @abstract Closes the socket. Thats pretty much it.
     @param void
     @result void
     */
    public function destroy()
  {
    socket_close($this->socket);
  }

    function &__get($name)
  {
    return $this->{$name};
  }

    function __isset($name)
  {
    return isset($this->{$name});
  }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-24T17:18:07.797

是的，使用`socket_create`, `socket_bind`, `socket_listen`, 和`socket_accept`

[http://www.php.net/manual/en/function.socket-create.php](http://www.php.net/manual/en/function.socket-create.php)

[http://www.php.net/manual/en/function.socket-bind.php](http://www.php.net/manual/en/function.socket-bind.php)

[http://www.php.net/manual/en/function.socket-listen.php](http://www.php.net/manual/en/function.socket-listen.php)

[http://www.php.net/manual/en/function.socket-accept.php](http://www.php.net/manual/en/function.socket-accept.php)

这些页面上有很多关于如何使用它们的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T17:19:32.730

Yes, PHP offers a socket_listen() function just for that. [http://php.net/manual/en/function.socket-listen.php](http://php.net/manual/en/function.socket-listen.php).

# regex - 正确消除R中重叠字符串中的重复项？

> ID：13054308
> 
> 赞同：0
> 
> 时间：2012-10-24T17:15:48.413
> 
> 标签：regex, r, edit

[我想问这个问题](https://stackoverflow.com/questions/13009761/proper-use-of-gsub-regular-expressions-in-r)的后续问题，因为出现了另一个问题：我发现了属于多个类别（艺术与人文和社会科学）的科目（例如文化研究），即那里是必须考虑的重叠。

我有很长的类别列表，例如这个机器可读的示例：

```
AB <- c("Science","Arts & Humanities","Arts & Humanities; Social Sciences","Science","Arts & Humanities; Arts & Humanities; Social Sciences","Science","Science; Social Sciences","Social Sciences; Science") 
```

所以它看起来像这样：

```
> AB  
[1] "Science"                                               "Arts & Humanities"  
[3] "Arts & Humanities; Social Sciences"                    "Science"  
[5] "Arts & Humanities; Arts & Humanities; Social Sciences" "Science"  
[7] "Science; Social Sciences"                              "Social Sciences; Science" 
```

我想编辑这些术语并消除重复项以获得此结果：

```
[1] "Science"                                    "Arts & Humanities"  
[3] "Arts & Humanities; Social Sciences"         "Science"  
[5] "Arts & Humanities; Social Sciences"         "Science"  
[7] "Science; Social Sciences"                   "Science; Social Sciences" 
```

所以我正在寻找另一个循环来消除#5 中的重复项。我尝试使用*strsplit()*和*unique()*但这不起作用：

```
> unique(strsplit(AB, "; *"))  
[[1]]  
[1] "Science"  

[[2]]  
[1] "Arts & Humanities"  

[[3]]  
[1] "Arts & Humanities" "Social Sciences"  

[[4]]  
[1] "Arts & Humanities" "Arts & Humanities" "Social Sciences"  

[[5]]  
[1] "Social Sciences" "Science" 
```

所以我想再次问你：我怎样才能实现上面提到的正确输出？非常感谢您的考虑！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:29:48.390

我认为这与尾随或前导空白有关。如果您将此应用于 AB，它将为您处理此问题：

```
fun <- function(text.var){
    x <- unlist(strsplit(text.var, ";"))
    Trim <- function(x) gsub("^\\s+|\\s+$", "", x)
    paste(sort(unique(Trim(x))), collapse="; ")
}

sapply(AB, fun, USE.NAMES = FALSE) 
```

产量：

```
> sapply(AB, fun, USE.NAMES = FALSE)
[1] "Science"                            "Arts & Humanities"                 
[3] "Arts & Humanities; Social Sciences" "Science"                           
[5] "Arts & Humanities; Social Sciences" "Science"                           
[7] "Science; Social Sciences"           "Science; Social Sciences" 
```

# hyperlink - 为链接向导生成的错字链接字段创建 TYPO3 Fluid 链接

> ID：13054310
> 
> 赞同：4
> 
> 时间：2012-10-24T17:16:03.120
> 
> 标签：hyperlink, typo3, fluid

我经常在我的 TCA 中使用链接向导。

找出我必须在 Fluid（页面/电子邮件/外部）中呈现哪种链接的条件是很可怕的。有解决方案还是我必须创建自己的 ViewHelper？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-01T20:03:09.157

它似乎没有记录，但您可以将它传递给它`<f:link.page>`，它会正确呈现，即使它是外部、电子邮件或文件链接。这是因为在内部，`<f:link.page>`使用[UriBuilder](https://typo3.org/api/typo3cms/class_t_y_p_o3_1_1_c_m_s_1_1_extbase_1_1_mvc_1_1_web_1_1_routing_1_1_uri_builder.html)来构建 URL，而 UriBuilder 使用 Typolink。

```
<f:link.page pageUid="{myLinkFieldValue}">My link</f:link.page> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-29T19:03:28.770

这是我为此使用的 ViewHelper（+ 一个助手类）： [https ://gist.github.com/BenjaminBeck/7220623](https://gist.github.com/BenjaminBeck/7220623)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-11T12:06:28.367

我认为**link.typolink** ViewHelper 是您正在寻找的，至少对于 TYPO3 7.0 及更高版本。

```
<f:link.typolink parameter="{link}">
   Linktext
</f:link.typolink> 
```

*   请参阅[变更日志功能 #59396 - TypolinkViewHelper](https://docs.typo3.org/typo3cms/extensions/core/latest/Changelog/7.0/Feature-59396-TypolinkViewHelper.html) (TYPO3 7.0)
*   请参阅[ViewHelper 参考中的 link.typolink](https://docs.typo3.org/other/typo3/view-helper-reference/master/en-us/typo3/fluid/latest/Link/Typolink.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-12-27T20:05:18.283

```
External Link -- 
<f:link.external uri="http://www.typo3.org" target="_blank">external link</f:link.external> 

Email -- 
<f:link.email additionalAttributes="{foo: 'bar'}" email="NULL" class="NULL" dir="NULL" id="NULL" lang="NULL" style="NULL" title="NULL" accesskey="NULL" tabindex="123" onclick="NULL" name="NULL" rel="NULL" rev="NULL" target="NULL">
	<!-- tag content - may be ignored! -->
</f:link.email>

Internal Link -- 
<f:link.page pageUid="1" additionalParams="{extension_key: {foo: 'bar'}}">page link</f:link.page>
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-26T12:19:32.803

在 Fluid 中，有不同的链接视图助手：

```
<f:link.action action="show">action link</f:link.action>
<f:link.email email="foo@bar.tld" />
<f:link.external uri="http://www.typo3.org" target="_blank">external link</f:link.external>
<f:link.page>page link</f:link.page> 
```

代码（和一些示例）可以在以下位置找到：typo3/sysext/fluid/Classes/ViewHelpers/Link

# yahoo - 使用 YQL 从 Yahoo Mail 访问新邮件

> ID：13054315
> 
> 赞同：4
> 
> 时间：2012-10-24T17:16:13.343
> 
> 标签：yahoo, yql, yahoo-mail

我目前正在编写一个 JAVA 应用程序，我需要在其中访问来自用户 Yahoo 电子邮件的以下信息（以显示给他们）。YQL 看起来像是一种“快速简便的方法”，但事实证明它更难。我运行的所有测试都在这里完成：http: [//developer.yahoo.com/yql/console/](http://developer.yahoo.com/yql/console/)我可以使用我的 webapp/oauth 复制相同的结果。

*   至
*   发件人电子邮件
*   来自名字
*   主题
*   信息
*   日期
*   中

我无法将这全部用于 1 个查询调用（甚至 2 个，尽管我没有投入太多时间来研究它作为解决方案）。这是它的缩写，目前我有以下 YQL：

```
SELECT folder.unread, message FROM ymail.msgcontent
    WHERE (fid,mids )
    IN
        (SELECT folder.folderInfo.fid, mid
        FROM ymail.messages
        WHERE numMid=2
        AND startMid=0)
        AND fid='Inbox' 
        AND message.flags.isRead=0; 
```

这是我拥有的所有解决方案中效果最好的，但是有一个严重的严重缺陷。如果我们有 10 封电子邮件，E1 - E10，除了 E2、E3 之外，它们都是未读的，那么在运行该查询后，结果集将显示 E1，而不是 E1、E4。显然这并不好。所以我尝试在子选择中插入“AND message.flags.isRead=0”：

```
SELECT folder.unread, message FROM ymail.msgcontent
    WHERE (fid,mids )
    IN
        (SELECT folder.folderInfo.fid, mid
        FROM ymail.messages
        WHERE numMid=10
        AND startMid=0 
        AND message.flags.isRead=0)
        AND fid='Inbox' 
```

但是，这会导致“null”。为了调试这个我只是运行子选择并想出这个：

```
SELECT folder.folderInfo.fid, mid
FROM ymail.messages
WHERE numMid=10
AND startMid=0 
AND messageInfo.flags.isRead=0 
```

此查询返回 10，不幸的是，经过进一步审查，它没有过滤掉已读 VS 未读。经过一番玩弄之后，我将 select 语句更改为以下查询：

```
SELECT folder.folderInfo.fid, messageInfo.mid
FROM ymail.messages
WHERE numMid=10
AND startMid=0 
AND messageInfo.flags.isRead=0 
```

最后，这行得通！除了返回 47 封电子邮件，而不仅仅是 10 封。为了让事情更有趣，我知道我的收件箱中有 207 封（未读）电子邮件，为什么是 47 封？我已将“numMid”（将其视为要显示的数量）从 0 更改为 300，并将 startMid（要开始的电子邮件数量，如偏移量）从 0 更改为 300，并且都没有更改结果集计数。当然，当我将 select 语句从“messageInfo.mid”更改回“mid”时，numMid / startMid 再次“工作”，但是从他的 isRead 过滤不再起作用。我知道还有其他解决方案，我设置 numMid=50000 或类似的东西，但是 YQL 一开始有点慢，我只能想象这会显着减慢它。

那么问题来了，有人做过吗？YQL 只是坏了/没有维护还是我做错了什么？

谢谢！

**编辑**：显然这个“47”来自我拥有的前 50 封电子邮件，其中 3 封已阅读。我还没有弄清楚如何“欺骗” YQL 以允许我覆盖这 50 个限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T19:15:51.417

有点晚了，但我想我已经回答了你的问题。

`numInfo`除了查询参数之外，您的查询几乎是正确的。尝试将查询更改为

> SELECT * FROM ymail.messages WHERE numMid=75 AND startMid=0 AND numInfo=75 AND messageInfo.flags.isRead=0

注意`numInfo=75`. 这应该会为您提供最后 75 条未读消息。要阅读有关不同查询参数的更多信息，请参阅[此处的官方文档](http://developer.yahoo.com/mail/docs/user_guide/ListMessages.html)

**编辑 1**
默认情况下，表 ymail.messages 应返回未读消息。`GroupBy`如果您想获取未读消息，您应该使用一个参数。[在此处](http://developer.yahoo.com/mail/docs/user_guide/GroupBy.html)查找文档

# django - 使用 render_to_response 传递 URL 参数

> ID：13054321
> 
> 赞同：2
> 
> 时间：2012-10-24T17:16:35.070
> 
> 标签：django, django-forms

我将此代码用于views.py文件

```
@login_required
def login_edit_page(request):
#bla bla
return render_to_response('login_edit_page.html', variables) 
```

问题是当调用 return 时，我还必须从 URL 传递一个参数。例如 URL 是 /edit?id=1 在这个例子中我想传递 id。我怎样才能做到这一点？

这是完整的代码

```
@login_required
def login_edit_page(request):
    if request.method == 'POST':
        form = LoginEditForm(request.POST)
        if form.is_valid():
            login1 = _login_edit(request, form, request.GET['id'])
            return HttpResponseRedirect(
                                        '/user/%s/' % request.user.username
                                        )
    id2 = request.GET['id']
    name=''
    url=''
    Login_username =''
    notes= ''
    password=''
    try:
        login1 = login.objects.get(
                                   id = id2,
                                   username=request.user
                                  )
        name = login1.name
        url = login1.loginUrl
        Login_username = login1.login_username
        notes = login1.notes
        password = login1.password
    except (login.DoesNotExist):
        pass
    form = LoginEditForm({
                          'name': name,
                          'url': url,
                          'Login_username': Login_username,
                          'notes': notes,
                          'password': password
                        })
    variables = RequestContext(request, {
                                        'form': form
                                        })
    login1 = _login_edit(request, form, id2)
    return render_to_response('login_edit_page.html', variables) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:26:13.750

你不能用[`render_to_response`](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render-to-response)你做的方式。试试这个：

```
...
id2 = request.GET.get('id', None)
...
ctx = {
    'form': form,
    'id': id2
}
return render_to_response('login_edit_page.html', ctx,
                          context_instance=RequestContext(request)) 
```

请注意，我添加`id2`到上下文字典中，因此可以在模板中通过`{{ id }}`. 另外，检查我如何从请求中检索 url 参数。

另一种方法是直接从 url 参数`request`（正如 Mark Lavin 注意到的，它会在`django.core.context_processors.request`存在的情况下工作`TEMPLATE_CONTEXT_PROCESSORS`）：

```
{{ request.GET.id }} 
```

但是说实话，你应该让你的视图更干净，它有很多问题。

# list - 具有获取参数列表的 CreateQuery 构造函数

> ID：13054324
> 
> 赞同：0
> 
> 时间：2012-10-24T17:16:51.050
> 
> 标签：list, constructor, createquery

我是新来的，这是我的第二个问题，但作为第一个问题，我已经尝试以不同的方式解决一个问题，但还没有找到解决方案，所以我求助于你，我们开始吧。

我的代码：

```
 string sql = "SELECT NEW Filial(fil.NumSequencial, fil.Numero, fil.Nome, fil.Cnpj, fil.Empresa, fil.LstUsuario)" +
                        " FROM Filial fil" +
                        "   join fetch fil.LstUsuario usrFil";

            IQuery query = session.CreateQuery(sql);

            lstFilial = (List<Filial>)query.List<Filial>(); 
```

我尝试过使用和不使用“join fetch”这一行，但错误总是相同的：

> {“集合附近的非法语法：id [SELECT NEW Filial(fil.NumSequencial, fil.Numero, fil.Nome, fil.Cnpj, fil.Empresa, fil.LstUsuario) FROM Leitor_NFe_XML_Entidade.Filial fil\tjoin fetch fil.LstUsuario usrFil] "}

构造函数：

```
public Filial(long numSequencial, int numero, string nome, string cnpj, Empresa empresa, IList<Usuario> lstUsuario)
    {
        this.numSequencial = numSequencial;
        this.numero = numero;
        this.nome = nome;
        this.cnpj = cnpj;
        this.empresa = empresa;
        this.lstUsuario = lstUsuario;
    } 
```

我很感激，因为已经

# java - 为什么相同的 Python/Java 代码之间会有如此巨大的性能差异？

> ID：13054325
> 
> 赞同：3
> 
> 时间：2012-10-24T10:41:21.630
> 
> 标签：java, python, performance

我目前正在尝试使用 Python 解决 Project Euler 问题（我今天才学到的东西）。我正在处理的问题是问题 5，其中

> 2520 是可以除以 1 到 10 的每个数字而没有任何余数的最小数字。
> 
> 能被 1 到 20 的所有数整除的最小正数是多少？

我以前使用 Java 解决过这些问题，所以使用与以前相同的方法，我只是创建了一个迭代的循环，但是我的代码似乎永远不会结束。

**Python：**

```
i = 1
while 1:
    if i%2 == 0 and i%3==0 and i%4==0 and i%5==0 and i%6==0 and i%7==0 and i%8==0 and i%9==0 and i%10==0 and i%11==0 and i%12==0 and i%13==0 and i%14==0 and i%15==0 and i%16==0 and i%17==0 and i%18==0 and i%19==0:
        print i
        break
    i+=1 
```

**爪哇：**

```
public class p5
{
    public static void main(String[] args)
    {
        for (int i=1;;i++)
        {
            if (i%1==0&&i%2==0&&i%3==0&&i%4==0&&i%5==0&&i%6==0&&i%7==0&&i%8==0&&i%9==0&&i%10==0&&i%11==0&&i%12==0&&i%13==0&&i%14==0&&i%15==0&&i%16==0&&i%17==0&&i%18==0&&i%19==0&&i%20==0)
            {
                System.out.println(i);
                break;
            }
        }
    }
} 
```

Java 在我的计算机上执行了不到 3 秒，而 Python 代码似乎从未结束。有小费吗？

**编辑：**

显然我输入了错误的东西，导致它永远不会结束。但是，即使正确编写了整个内容（与我的 Java 具有相同的输出），它仍然需要**1 分 20 秒**，而对于 Java，它需要大约 1-2 秒。我做错什么了吗？还是 Python 的性能那么差（这不应该是 afaik）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T19:09:14.950

在 Java 中使用原始 s 的算术比使用`int`CPython 中的完整整数对象快得多，即，您看到的 30 倍的性能差异对于您的代码来说并不奇怪。

请注意，该算法效率非常低，并且不适用于稍大的输入，例如，对于从 1 到 50 的数字（它花费的时间太长，并且正确的结果大于 Java 中的 max int/long）。

使用更有效的算法计算我的机器上从 1 到 100 的所有数字的结果需要 ~`100` *微秒：*

```
#!/usr/bin/env python
from functools import reduce

def gcd(a, b):
    """Greatest common divisor (factor)."""
    while b: # Euclid's algorithm
        a, b = b, a % b
    return a

def lcm(*args):
    """Least common multiple."""
    # lcm(a, b, c) == lcm(lcm(a, b), c)
    return reduce(lambda a, b: a * b // gcd(a, b), args)

def f(n):
    """Smallest positive number evenly divisible by all numbers from 1
       to n including.
    """
    return lcm(*range(1, n + 1))

print(f(10)) # -> 2520
print(f(50)) # -> 3099044504245996706400 
```

[估计](http://ideone.com/REEw3I) [性能](http://ideone.com/4rhyGy)：

```
#!/usr/bin/env python
import timeit
from functools import partial

def measure():
    for n in [10, 50, 100]:
        print("%d: %5.2f microseconds" % (n, timeit.timeit(partial(f, n),
                                                           number=1000*1000)))
measure() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T15:17:50.917

我的纯蛮力解决方案使用 pypy 大约需要 250 毫秒：

```
i = 20
while 1:
    if i%20 == 0 and i%19==0 and i%18==0 and i%17==0 and i%16==0 and i%15==0 and i%14==0 and i%13==0 and i%12==0 and i%11==0:
        print i
        break
    i+=20 
```

更优雅的应该使用最大公约数和最小公约数之类的东西。

# java - 更多类java中的一些字符串

> ID：13054328
> 
> 赞同：1
> 
> 时间：2012-10-24T17:16:59.467
> 
> 标签：java, android, string

我有一个问题，我必须将字符串的值从主类调用到辅助类，我如何才能从第二类访问主类上的字符串？我有第一类（LoginActivity）和第二类（DashboardActivity）我必须在仪表板中获取LoginActivity（字符串用户名）的返回值，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:18:01.167

启动 DashboardActivity 时，将字符串值作为 Intent.EXTRA 传递。

启动时：

```
Intent i = new Intent(getBaseContext(), DashboardActivity.class);   
i.putExtra("MyString", username); 
```

并获得价值：

```
Bundle bundle = getIntent().getExtras();
String value = bundle.getString("MyString"); 
```

# c++ - 在 C++ 中的可执行文件中存储配置文件的方法

> ID：13054331
> 
> 赞同：1
> 
> 时间：2012-10-24T17:17:04.743
> 
> 标签：c++, configuration-files, embedded-resource

我需要存储一个配置文件，一旦使用 C++ 在可执行文件中编译了可执行文件，就可以更改该配置文件。我假设配置文件需要存储为资源，以便在编译可执行文件后可对其进行编辑。

我不知道如何将其存储为资源以及如何将其包含在项目的主要部分中，同时仍将其保留在资源部分中。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:51:27.090

Windows "*.ini" 文件是一种方法。

但是，我建议使用 XML 文件进行配置。大多数编译器都有 2 或 3 个库来加载和存储 XML 文件中的数据。

此外，它们允许以分层方式存储信息，并且易于添加或删除配置选项。

编辑：另一种方式是 JSON 文件。

# ios - 旋转后 UIImagePickerController 的状态栏和布局问题

> ID：13054338
> 
> 赞同：5
> 
> 时间：2012-10-24T17:17:35.597
> 
> 标签：ios, uiimagepickercontroller, autorotate, uistatusbar

tl;dr：如果应用程序显示状态栏，则在拍照时旋转 iPad 时用户界面布局会损坏。

我有一个应用程序，它显示一个状态栏，应该通过`UIImagePickerController`.

我在带有 Xcode 4.51 的 iPad 3、iOS 6 上运行它

我注意到的第一个问题是，如果我没有通过隐藏状态栏

```
[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationNone]; 
```

在致电之前

```
[self presentViewController:imagePicker animated:YES completion:nil]; 
```

然后`UIImagePickerController`将无法在屏幕上正确显示。状态栏的空间仍将保留（但未显示时间或电池信息等），结果屏幕下端的控件将部分脱离屏幕。

所以，我添加了这一行

```
[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationNone]; 
```

在提出之前`UIImagePickerController`，第一个问题已经解决。

现在是第二个问题（由第一个问题的解决方案引起）。当我打开 时`UIImagePickerController`，旋转 iPad 并关闭它（通过“取消”或“使用”，没关系），处理程序（`imagePickerControllerDidCancel`或者 `imagePickerController:didFinishPickingMediaWithInfo:`被调用，在其中我再次显示状态栏，通过

```
[[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationNone]; 
```

现在的问题是状态栏实际上已显示，但应用程序的其余部分似乎没有意识到它再次出现在屏幕上。（我在“MainViewController”上的 UIToolbar 部分隐藏在状态栏后面。）有趣的是，如果我将 iPad 旋转到任何其他方向，动画结束后都会再次正确显示。

任何人都可以给我有关如何解决此问题的任何提示吗？（目前我最好的解决方法是在有人第一次拍照后隐藏状态栏，但这不是最理想的）。也许对第一个问题有更好的解决方案，或者解决这两个问题的方法。

更多信息：在 iPad`UIImagePickerController`处于活动状态时将其旋转为横向后，这是我的 MainViewController 视图框架的框架：{{0, 0}, {1024, 768}}（即在出现问题的情况下）。当我一直让iPad处于横向时，这`UIImagePickerController`是关闭后MainViewController的视图框架：{{0, 0}, {1024, 748}}（这是没有问题的情况。）

提前感谢您的关注和努力！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T07:50:29.357

当显示从相机拍摄图像的图像选择器时，我刚刚在 iPhone 上遇到了同样的问题。我找到的解决方案是在弹出图像选择器的视图重新出现时调用以显示状态栏。例如。

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    [[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationSlide];
} 
```

# performance - 提高插值性能（重心公式）

> ID：13054340
> 
> 赞同：3
> 
> 时间：2012-10-24T17:17:36.667
> 
> 标签：performance, matlab, interpolation, vectorization

我被分配了一个任务，我应该在其中编写一个算法，该算法通过重心公式执行多项式插值。公式指出：

p(x) = (SIGMA_(j=0 到 n) w(j)*f(j)/(x - x(j)))/(SIGMA_(j=0 到 n) w(j)/(x - x(j)))

我编写了一个运行良好的算法，并且得到了我想要的多项式输出。然而，这需要使用一些相当长的循环，并且对于大的网格数，将不得不进行许多讨厌的循环操作。因此，如果有人对我如何改进这一点有任何提示，我将不胜感激，这样我就可以避免所有这些循环。

在算法中，`x`代表`f`我们应该插值的给定点。 `w`代表重心权重，在运行算法之前已经计算过。并且`grid`是应该进行插值的 linspace：

```
function p = barycentric_formula(x,f,w,grid)

%Assert x-vectors and f-vectors have same length.
if length(x) ~= length(f)
    sprintf('Not equal amounts of x- and y-values. Function is terminated.')
    return;
end

n = length(x);
m = length(grid);
p = zeros(1,m);

% Loops for finding polynomial values at grid points.  All values are
% calculated by the barycentric formula.
for i = 1:m
    var = 0;
    sum1 = 0;
    sum2 = 0;
    for j = 1:n
        if grid(i) == x(j)
            p(i) = f(j);
            var = 1;
        else
            sum1 = sum1 + (w(j)*f(j))/(grid(i) - x(j));
            sum2 = sum2 + (w(j)/(grid(i) - x(j)));
        end
    end
    if var == 0
        p(i) = sum1/sum2;
    end    
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T18:37:50.980

这是matlab“矢量化”的经典案例。我会说 - 只需删除循环。几乎就是这么简单。首先，看一下这段代码：

```
function p = bf2(x, f, w, grid)

m = length(grid);
p = zeros(1,m);

for i = 1:m
    var = grid(i)==x;
    if any(var)
        p(i) = f(var);
    else
        sum1 = sum((w.*f)./(grid(i) - x));
        sum2 = sum(w./(grid(i) - x));
        p(i) = sum1/sum2;
    end
end
end 
```

我已经删除了内部循环`j`。实际上，我在这里所做的只是删除`(j)`索引并将算术运算符从`/`to`./`和 from `*`to 更改`.*`- 相同，但前面有一个点表示该操作是逐个元素执行的。与普通的矩阵运算符相比，这称为[数组运算符。](http://www.mathworks.se/help/matlab/ref/arithmeticoperators.html)另请注意，处理网格点所在的特殊情况`x`与您在原始实现中的情况非常相似，只使用了`var`这样的向量`x(var)==grid(i)`。

现在，您还可以删除最外层的循环。这有点棘手，在 MATLAB 中有两种主要方法可以做到这一点。我会用更简单的方法来做，它可能效率较低，但阅读起来更清晰 - 使用`repmat`：

```
function p = bf3(x, f, w, grid)

% Find grid points that coincide with x.
% The below compares all grid values with all x values
% and returns a matrix of 0/1\. 1 is in the (row,col)
% for which grid(row)==x(col)

var  = bsxfun(@eq, grid', x);

% find the logical indexes of those x entries
varx = sum(var, 1)~=0;

% and of those grid entries
varp = sum(var, 2)~=0;

% Outer-most loop removal - use repmat to
% replicate the vectors into matrices.
% Thus, instead of having a loop over j
% you have matrices of values that would be
% referenced in the loop

ww = repmat(w, numel(grid), 1);
ff = repmat(f, numel(grid), 1);
xx = repmat(x, numel(grid), 1);
gg = repmat(grid', 1, numel(x));

% perform the calculations element-wise on the matrices
sum1 = sum((ww.*ff)./(gg - xx),2);
sum2 = sum(ww./(gg - xx),2);
p    = sum1./sum2;

% fix the case where grid==x and return
p(varp) = f(varx);

end 
```

完全矢量化的版本可以使用`bsxfun`而不是`repmat`. 这可能会更快一些，因为矩阵不是明确形成的。但是，对于小型系统，速度差异可能不会很大。

此外，第一个带有一个循环的解决方案在性能方面也不算太差。我建议你测试一下，看看哪个更好。也许完全矢量化不值得？第一个代码看起来更具可读性..

# c# - 我的 monodroid UI 元素（按钮、TextView...）中的枚举需要一个 .Net 包

> ID：13054342
> 
> 赞同：3
> 
> 时间：2012-10-24T17:17:38.290
> 
> 标签：c#, xamarin.android, xamarin

我正在尝试在我的 ListView 的自定义 ListItem 中设置按钮的标签，但需要 Java.Lang.Object 吗？在 .Net 对象世界中，此 Tag 属性似乎不合适。

所以，我需要一种方法来获取/设置一个 .Net 包到我的 UI 元素：

```
button.Bag=MYEnumsEnum1; 
```

然后

```
MyEnums myEnum=(MyEnums)button.Bag; 
```

monodroid 可以吗？我怎样才能绕过这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:00:42.600

您只需从 Java.Lang.Object 继承即可创建连接到 .net 的 java 对象

所以你可以例如使用

```
 class Thing : Java.Lang.Object 
 {
       public MyEnum Value { get; set; }
 } 
```

这可以用来存储类似的东西：

```
button.Tag = new Thing() { Value = MyEnum.Running }; 
```

然后稍后再次提取为：

```
var myEnumValue = ((Thing)button.Tag).Value; 
```

* * *

这是我使用的一个包装器：

*   [https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Binding.Droid/MvxJavaContainer.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Binding.Droid/MvxJavaContainer.cs)

这用于：

*   用于包装列表项对象的列表适配器：[https ://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Binding.Droid/Views/MvxBindableListAdapter.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Binding.Droid/Views/MvxBindableListAdapter.cs)
*   [https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Binding.Droid/Binders/MvxBindingLayoutInflatorFactory.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Binding.Droid/Binders/MvxBindingLayoutInflatorFactory.cs)的最后一个方法中绑定属性的标签存储

# java - jocl neural network

> ID：13054356
> 
> 赞同：3
> 
> 时间：2012-10-24T17:18:21.680
> 
> 标签：java, neural-network, gpgpu, jocl

I wrote a neural network in java and it looked like a good idea to take the computation on the gpu for performance issue. The problem I have is that its too slow... I have used jocl to do so. I dont now if its the kernel here is some code:

```
private static String programSource = "__kernel void "
        + "sampleKernel(__constant float *input,"
        + "             __global float *weights,"
        + "             __constant int *length,"
        + "             __global float *dst)" + "               {"
        + "    __private int gid = get_global_id(0);"
        + "    __private int pos = (gid*length[0]);"
        + "    __private float tmp = 0;"
        + "    __private int l = length[0];" + "        dst[gid]  = 0;"
        + "    for(int i = 0; i < l; i++){"
        + "         tmp += gewichte[pos+i]*input[i];"
        + "    }"
        + "   dst[gid] = tanh(tmp);" + "}"; 
```

making the weights __constant made the programm even slower(maybe it has to permanently switch data between global and local memory because the weights array is too big)

it seems like the most time takes this line:

tmp += gewichte[pos+i]*input[i];

one kernel call represents the computation of one Neural Network Layer and for every neuron of the layer one shader should perform( tanh(weightsOnThisNeuron + OutputFromAllNeuronsOfPreviousLayer).

I prepare all the kernels and store them so that if I want to execute them, they dont have to be prepared again and again.

The only IO between GPU and CPU is at the beginning and at the end when I retrieve the Output

Here is the code where I initialize the network and run the kernels:

```
public OpenClNetz(float[][][] gew, cl_context context,
        cl_command_queue commandQueue) throws Exception {
    if (context == null) {
        throw new Exception("context == null, Konstruktor schlug fehl");
    }
    if (commandQueue == null) {
        throw new Exception("commandQueue == null, Konstruktor schlug fehl");
    }
    this.layersize = new int[gew.length + 1];
    for (int i = 0; i < layersize.length - 1; i++) {
        this.layersize[i] = gew[i][0].length;
    }
    this.layersize[this.layersize.length - 1] = gew[gew.length - 1].length;
    this.context = context;
    builded = false;
    this.commandQueue = commandQueue;
    this.output = new float[layersize[layersize.length - 1]];
    gewichte = new cl_mem[layersize.length - 1];
    tmp = new cl_mem[layersize.length - 1];
    lengths = new cl_mem[layersize.length - 1];
    input = new cl_mem();
    float[] tmpG;
    int[][] tmpL = new int[layersize.length - 1][];
    for (int i = 0; i < gewichte.length; i++) {
        tmpG = new float[layersize[i] * layersize[i + 1]];
        tmpL[i] = new int[1];
        tmpL[i][0] = layersize[i];
        int n = 0;
        for (int j = 0; j < layersize[i + 1]; j++) {
            for (int k = 0; k < layersize[i]; k++) {
                tmpG[n] = gew[i][j][k];
                n++;
            }
        }
        gewichte[i] = clCreateBuffer(context, CL_MEM_READ_WRITE | CL_MEM_COPY_HOST_PTR, Sizeof.cl_float * tmpG.length, Pointer.to(tmpG),
                null);
        lengths[i] = clCreateBuffer(context, CL_MEM_READ_WRITE
                | CL_MEM_COPY_HOST_PTR, Sizeof.cl_int,  Pointer.to(tmpL[i]), null);
        tmp[i] = clCreateBuffer(context, CL_MEM_READ_WRITE, Sizeof.cl_float
                * layersize[i + 1], null, null);
    }

}

public void setInput(float[] in) {
    if (in.length != layersize[0]) {
        System.out
                .println("array Länge entspricht nicht der Inputsize, setInput schlug fehl");
        return;
    }
    input = clCreateBuffer(context, CL_MEM_READ_WRITE
            | CL_MEM_COPY_HOST_PTR, Sizeof.cl_float * layersize[0],
            Pointer.to(in), null);
    clSetKernelArg(kernel[0], 0, Sizeof.cl_mem, Pointer.to(input));
}

public void buildProgramm() {
    program = clCreateProgramWithSource(context, 1,
            new String[] { programSource }, null, null);
    clBuildProgram(program, 0, null, null, null, null);
    builded = true;
    kernel = new cl_kernel[gewichte.length];
    kernel[0] = clCreateKernel(program, "sampleKernel", null);
    clSetKernelArg(kernel[0], 0, Sizeof.cl_mem, Pointer.to(input));
    clSetKernelArg(kernel[0], 1, Sizeof.cl_mem, Pointer.to(gewichte[0]));
    clSetKernelArg(kernel[0], 2, Sizeof.cl_mem, Pointer.to(lengths[0]));
    clSetKernelArg(kernel[0], 3, Sizeof.cl_mem, Pointer.to(tmp[0]));
    for (int i = 1; i < gewichte.length; i++) {
        kernel[i] = clCreateKernel(program, "sampleKernel", null);
        clSetKernelArg(kernel[i], 0, Sizeof.cl_mem, Pointer.to(tmp[i - 1]));
        clSetKernelArg(kernel[i], 1, Sizeof.cl_mem, Pointer.to(gewichte[i]));
        clSetKernelArg(kernel[i], 2, Sizeof.cl_mem, Pointer.to(lengths[i]));
        clSetKernelArg(kernel[i], 3, Sizeof.cl_mem, Pointer.to(tmp[i]));
    }
}

public void run() throws Exception {
    if (!builded) {
        throw new Exception(
                "buildProgramm muss zuerst aufgerufen werden, run schlug fehl");
    }
    long global_work_size[] = new long[] { layersize[1] };
    this.local_work_size = new long[] { 8 };
    // Execute the kernel
    clEnqueueNDRangeKernel(commandQueue, kernel[0], 1, null,
            global_work_size, local_work_size, 0, null, null);

    for (int i = 1; i < gewichte.length; i++) {
        global_work_size = new long[] { layersize[i + 1] };

        // Execute the kernel
        clEnqueueNDRangeKernel(commandQueue, kernel[i], 1, null,
                global_work_size, local_work_size, 0, null, null);

    }

} 
```

thats the main:

```
public class TEST{
public static void main(String args[]) throws Exception
{
    // The platform, device type and device number
    // that will be used
    final int platformIndex = 0;
    final long deviceType = CL_DEVICE_TYPE_DEFAULT;
    final int deviceIndex = 0;

    // Enable exceptions and subsequently omit error checks in this sample
    CL.setExceptionsEnabled(true);

    // Obtain the number of platforms
    int numPlatformsArray[] = new int[1];
    clGetPlatformIDs(0, null, numPlatformsArray);
    int numPlatforms = numPlatformsArray[0];

    // Obtain a platform ID
    cl_platform_id platforms[] = new cl_platform_id[numPlatforms];
    clGetPlatformIDs(platforms.length, platforms, null);
    cl_platform_id platform = platforms[platformIndex];

    // Initialize the context properties
    cl_context_properties contextProperties = new cl_context_properties();
    contextProperties.addProperty(CL_CONTEXT_PLATFORM, platform);

    // Obtain the number of devices for the platform
    int numDevicesArray[] = new int[1];
    clGetDeviceIDs(platform, deviceType, 0, null, numDevicesArray);
    int numDevices = numDevicesArray[0];

    // Obtain a device ID 
    cl_device_id devices[] = new cl_device_id[numDevices];
    clGetDeviceIDs(platform, deviceType, numDevices, devices, null);
    cl_device_id device = devices[deviceIndex];

    // Create a context for the selected device
    cl_context context = clCreateContext(
        contextProperties, 1, new cl_device_id[]{device}, 
        null, null, null);
    // Create a command-queue for the selected device
    cl_command_queue commandQueue = 
        clCreateCommandQueue(context, device, 0, null);

    int[] layersize = {512,512,512};
    float[] in = new float[512];
    for(int i = 0; i < 512; i++){
        in[i] = (float) (Math.random()*1.4 -0.7);
    }
    Netz net = new Netz(layersize);
    net.set_Input(in);
    OpenClNetz netz= new OpenClNetz(net.gewichte,context,commandQueue);
    netz.buildProgramm();
    netz.setInput(in);
    double time = System.currentTimeMillis();
    for(int i = 0; i < 10000; i++){
        netz.run();
    }
    System.out.println(Arrays.toString(netz.retrieveOutput()));
    System.out.println("time OpenCl: " + (System.currentTimeMillis()-time));

    time = System.currentTimeMillis();

    for(int i = 0; i < 10000; i++){
        net.start();
    }

    System.out.println("time normal: " + (System.currentTimeMillis()-time));
    System.out.println(Arrays.toString(netz.retrieveOutput()));
    System.out.println(Arrays.toString(net.start()));

    netz.destroy();

    // Release kernel, program, and memory objects
    clReleaseCommandQueue(commandQueue);
    clReleaseContext(context); 
```

has somebody any idea how I can make this faster??

the output is for:

```
normal (running on CPU) : 6475ms

running on GPU (local worksize = 1) : 19110ms
running on GPU (local worksize = 2) : 11778ms
running on GPU (local worksize = 4) : 8985ms
running on GPU (local worksize = 8) : 6880ms
running on GPU (local worksize = 16) : 8237ms              (it becomes slower ?! O.o)
running on GPU (local worksize = 32) : 9298ms              (Im kinda new to Jocl)
running on GPU (local worksize = 64) : 10062ms 
```

# android - @font-face Not Working in Chrome for Android

> ID：13054358
> 
> 赞同：4
> 
> 时间：2012-10-24T17:18:29.887
> 
> 标签：android, css, google-chrome, fonts, font-face

I'm using an `@font-face` declaration to call a font on a website and it displays in *IE, FF, Chrome, even Mobile Safari*. However, the font is not displaying in **Chrome 18.0.1025308** for **Android (4.1.2)**.

The syntax I'm using is [fontspring's](http://www.fontspring.com/) bulletproof syntax, and I'm having a real problem determining what is preventing the font from displaying properly.

CSS:

```
@font-face {
    font-family: 'jump_startregular';
    src: url('wp-content/uploads/fonts/jstart-webfont.eot');
    src: url('wp-content/uploads/fonts/jstart-webfont.eot?#iefix') format('embedded-opentype'),
         url('wp-content/uploads/fonts/jstart-webfont.woff') format('woff'),
         url('wp-content/uploads/fonts/jstart-webfont.ttf') format('truetype'),
         url('wp-content/uploads/fonts/jstart-webfont.svg#jump_startregular') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

Any thoughts?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T21:59:39.073

问题可能与您的`font-family`声明有关（我无法确定，因为您尚未发布该部分）。例如，如果你有这个：

```
font-family: fghjkjh, 'jump_startregular', sans-serif; 
```

...Android 版 Chrome 会简单地假装 fghjkjh 已安装（但实际上使用默认的 Android 字体）并忽略其他所有内容。（不确定这是错误还是功能。）

在这种情况下，解决方案是将“jump_startregular”移到前面 - 并可能将`local`源添加到`@font-face`块中，这可能会导致其他旧浏览器出现问题。

# perl - mod_perl 脚本在“使用”处理期间进入紧密循环

> ID：13054360
> 
> 赞同：1
> 
> 时间：2012-10-24T17:18:36.127
> 
> 标签：perl, apache, cgi, mod-perl

我有一个相当复杂的问题要描述。我正在寻找进一步调试的任何建议。

我正在尝试从常规 cgi 转换为 mod_perl。我向加载页面的脚本发送 http 请求，并且在该页面上有加载图像的链接，这些图像通过进一步的脚本检索（换句话说，图像是通过 cgi 脚本加载的，而不仅仅是普通链接） . 因此，当页面在浏览器中加载时，浏览器会启动另外六个请求，这些请求会运行脚本来加载图像。

第一个脚本（初始页面加载）运行良好，但之后的某个时候，Apache 服务器在处理图像加载脚本时进入了一个紧密的循环（非常高的 cpu 使用率并且必须被杀死）。有时其中一个图像加载脚本运行良好，但另一个循环，有时它是第一个循环的图像加载脚本。strace 在循环期间不显示任何内容。

我已经以单用户模式（使用 -X）启动了 apache 服务器，并运行带有跟踪的交互式 perl 调试器，以查看循环从哪里开始。我已经这样做了好几次，每次它都在完全相同的地方开始，在处理“使用”语句期间。我看到成堆的“使用”和“要求”语句以及其他垃圾，但它总是停在：

```
Params::Classify::CODE(0x7f43b0b46dd8)(/usr/lib/perl5/Params/Classify.pm:97):
97:     eval { local $SIG{__DIE__};
Params::Classify::CODE(0x7f43b0b46dd8)(/usr/lib/perl5/Params/Classify.pm:97):
97:     eval { local $SIG{__DIE__};
Params::Classify::CODE(0x7f43b0b46dd8)(/usr/lib/perl5/Params/Classify.pm:98):
98:             require XSLoader;
Params::Classify::CODE(0x7f43b0b46dd8)(/usr/lib/perl5/Params/Classify.pm:99):
99:             XSLoader::load(__PACKAGE__, $VERSION);
Params::Classify::CODE(0x7f43b0b46dd8)(/usr/lib/perl5/Params/Classify.pm:102):
102:    if($@ eq "") {
Params::Classify::CODE(0x7f43b0b46dd8)(/usr/lib/perl5/Params/Classify.pm:103):
103:            close(DATA);
Params::Classify::CODE(0x7f43b0b46dd8)(/usr/lib/perl5/Params/Classify.pm:130):
130:    1;
Data::Entropy::CODE(0x7f43b0b46dd8)(/usr/share/perl5/Data/Entropy.pm:46):
46:     use Params::Classify 0.000 qw(is_ref);
Data::Entropy::CODE(0x7f43b0b46dd8)(/usr/share/perl5/Data/Entropy.pm:46):
46:     use Params::Classify 0.000 qw(is_ref); 
```

这部分“使用”处理在我的脚本中开始：

```
use Authen::Passphrase::BlowfishCrypt; 
```

我已经对 Data::Entropy 和 Params::Classify 进行了一些搜索，但没有找到任何有用的东西（这是我所期望的——我怀疑它们是否存在错误）。

这有以前脚本运行造成的内存损坏的感觉，但我还不确定如何追踪它。由于我是 mod_perl 的新手，我想我会由一些专家运行它，看看他们是否遇到了类似的问题，或者对如何进一步调试有建议。

运行 apache/2.2.22 mod_perl/2.0.5 perl/5.14.2。

代码非常基本，但这里是：

```
package Wii::Web;

use strict;
use warnings;

use base qw(Wii);

use Data::Dumper;
use Params::Validate qw(:all);
use Log::Log4perl qw(get_logger :easy);
use CGI;
use Carp qw(cluck);
use Email::Valid;
use Authen::Passphrase::BlowfishCrypt;
use Digest::SHA;
use Digest::HMAC;
use Time::HiRes qw(gettimeofday tv_interval);
use Wii::Web::View;
use Wii::Web::Register;
use Wii::Web::Login;
use Wii::Web::Session;
use Wii::Web::User;
use Wii::Web::Found;

$CGI::POST_MAX = 1024 * 5000;

BEGIN {
  $SIG{__DIE__} = \&sigDie;
}

sub sigDie {
  return if $^S; # we are in an eval block

  # assume this is the first print
  my ($error) = @_;
  print "Status: 500\n";
  print "Content-type: text/html\n\n";
  print "<html><body>\n";
  print "<h3>Whoops there was an error!</h3>\n";
  print "<!-- $error  -->\n";
  print "Please try again later<br />\n";
  print "<b>$error</b>\n";
  print "</body></html>\n";

  Wii::sigDie(@_);

  return 1;
}
<snip> 
```

在此之前还涉及其他模块，但这是引发问题的模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:58:15.030

Params::Classify::XS 不是线程安全的。从使用 XS 切换到 perl Perl 版本。

# objective-c - Concatenate strings on Objective C

> ID：13054361
> 
> 赞同：4
> 
> 时间：2012-10-24T17:18:38.273
> 
> 标签：objective-c, cocoa

> **Possible Duplicate:**
> [How do I concatenate strings in Objective-C?](https://stackoverflow.com/questions/510269/how-do-i-concatenate-strings-in-objective-c)

Hello everyone I am new to Objc, I want to concatenate strings of the Integer value with string value. Here is my code:

```
[runtime setText:[NSString stringWithFormat:@"%@",self.movie.runtime]]; 
```

The result will be: 120

The result that I wish to concatenate string is: 120 Minutes.

Please share me about this. Thanks

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T17:19:46.453

I guess, you want this

```
[runtime setText:[NSString stringWithFormat:@"%@ Minutes",self.movie.runtime]]; 
```

while concatenating would be:

```
NSString *newString = [aString stringByAppendingString:anotherString]; 
```

for immutable NSStrings

and

```
[aMuteableString appendString:anotherString]; 
```

for NSMutableStrings

# arrays - Matlab 快速傅里叶变换 / fft 时间和速度

> ID：13054363
> 
> 赞同：0
> 
> 时间：2012-10-24T17:18:41.627
> 
> 标签：arrays, matlab, vector, matrix, fft

我有一个 2 列向量，其中包含数据子集的时间和速度，如下所示：

```
5 40
10 37
15 34
20 39 
```

等等。我想获得速度的傅立叶变换以获得频率。我将如何使用快速傅立叶变换（fft）来做到这一点？

如果我的向量名称是 sampleData，我已经尝试过

```
fft(sampleData); 
```

但这给了我一个实数和虚数的向量。为了能够获得合理的数据来绘制，我将如何去做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:43:09.987

傅立叶变换将产生一个复矢量，当您得到一个频率矢量时，每个频率都有一个频谱相位。这些阶段可能非常重要！（它们包含时域信号的大部分信息，没有它们你不会看到干扰效应等......）。如果要绘制功率谱，可以

```
plot(abs(fft(sampleData))); 
```

要完成这个故事，您可能需要 fftshift，并生成一个频率向量。这是一个更详细的代码：

```
% Assuming 'time' is the 1st col, and 'sampleData' is the 2nd col: 
N=length(sampleData);  
f=window(@hamming,N)';
dt=mean(diff(time)); 
df=1/(N*dt); % the frequency resolution (df=1/max_T)
if mod(N,2)==0
    f_vec= df*((1:N)-1-N/2); % frequency vector for EVEN length vector
    else
    f_vec= df*((1:N)-0.5-N/2); 
end

fft_data= fftshift(fft(fftshift(sampleData.*f))) ;

plot(f_vec,abs(fft_data)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T23:16:43.443

我建议您备份并考虑您要完成的工作，以及 FFT 是否适合您的情况。你说你“想要……得到一个频率”，但你到底是什么意思？你知道这个数据只有一个频率分量，想知道频率是多少吗？您想知道组件的频率和相位吗？您是否只想大致了解存在多少离散频率分量？您对测量中的噪声频谱感兴趣吗？您可以就数据集中的“频率”提出许多问题，而 FFT 和/或功率谱是否是获得答案的最佳方法取决于问题。

在上面的评论中，您问“有没有办法将功率谱与时间值相关联？” 这让我觉得这是一个困惑的问题，但也让我觉得你真正想要回答的问题可能是“我有一个频率随时间变化的信号，我想估计频率与时间的关系”。我敢肯定，在过去的几个月里，我在 SO 上看到过类似的问题，所以我会搜索它。

# java - Eclipse combining multiple classpathentry hierarchically into the same output

> ID：13054364
> 
> 赞同：5
> 
> 时间：2012-10-24T17:18:42.523
> 
> 标签：java, eclipse, classpath

I have the following records in my projects's `.classpath` file:

```
<classpathentry kind="src" path="src/main/webapp"
 output="build/webapp"/>
<classpathentry kind="src" path="src/main/java"
 output="build/webapp/WEB-INF/classes"/>
<classpathentry kind="src" path="src/main/resources"
 output="build/webapp/WEB-INF/classes"/> 
```

My intention is

1.  copy `src/main/webapp` into `build/webapp`
2.  then compile `src/main/java` into `build/webapp/WEB-INF/classes`
3.  then copy `src/main/resources` into `build/webapp/WEB-INF/classes`

However the result is actually,

*   copy `src/main/webapp` into `build/webapp`
*   prevent `build/webapp/WEB-INF/classes` from ever existing, but maintain the exact copy between `src/main/webapp` and `build/webapp`

Which means `build/webapp/WEB-INF/classes` can never be created and steps 2 & 3 never successful.

I even tried modifying step 1 to

```
<classpathentry kind="src" path="src/main/webapp" output="build/webapp"
 excluding="WEB-INF/classes/**"/> 
```

which did not help at all.

The order of the classpathentry records are inconsequential.

**Q1.** Please help advise how I should write my classpathentry records to hierarchically combine them into the same output directory, so that a classpathentry of a higher folder hierarchy would not nullify a classpathentry of a lower folder hierarchy.

**Q2.** BTW, I cannot find any document specification for the xml tags and tag-attributes for eclipse `.classpath` file. I have tried googling "eclipse classpathentry" to no avail. Could someone also point me to a document?

*   Are "exported", "excluding", "kind", "path", "output" the only attributes for the classpathentry tag?
*   What other tags are allowed in the .classpath file, for example?
*   A functional explanation for each of those tags and tag-attributes.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T01:24:11.077

首先，.classpath 不打算手动编辑。该文件是 JDT 的配置文件。名称以“.”开头的文件 旨在对用户隐藏。如果您手动编辑此文件，在某些情况下，与实际配置对象的同步会中断（JDT 可以，因为配置会在 JDT 中自动同​​步）

打开项目的属性对话框，选择“Java Build Path”。然后您可以看到该文件的 GUI 编辑器。该 GUI 将回答您的要求。它允许管理 src 以输出映射、重新排序等。但它不会帮助您按照您要求的方式嵌套输出。

一个输出文件夹不能分层嵌套在另一个其他输出文件夹下。因为有可能会引起冲突。我相信语法不会帮助你。它不会让你做你想做的事。

该文件只是派生存储的数据。如果您的需求很强烈，您应该考虑自定义构建脚本，或者聘请一些 Eclipse 工程师来为您的需求制作构建器扩展。

# python - python可执行文件中的kwargs

> ID：13054369
> 
> 赞同：5
> 
> 时间：2012-10-24T17:19:07.140
> 
> 标签：python, executable, keyword-argument

我正在尝试创建一个可以从命令行调用并在 python 2.6 中使用关键字参数的程序。到目前为止，我已经尝试过：

```
#!/usr/bin/python
def read(foo = 5):
    print foo
    return 0
if __name__ == '__main__'
    read() 
```

当我尝试从命令行运行它时：`./test.py`程序按预期打印 5 。有没有办法使用`./test.py foo=6`？我想保留关键字参数。

这似乎是一个简单的问题，但我还没有找到一个很好的来源。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T17:20:07.940

python 内置库来帮助您实现将命令行参数传递给脚本 [`argparse`](http://docs.python.org/dev/library/argparse.html)。用法与您在问题中描述的有所不同...

在基本级别上，您可以通过 访问所有命令行参数[`sys.argv`](http://docs.python.org/library/sys.html#sys.argv)，这将是一个参数列表

抱歉应该提到python 2.6库被称为[`optparse`](http://docs.python.org/library/optparse.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T18:00:46.887

像这样的东西？

```
if __name__ == '__main__':
    kwargs = dict(x.split('=', 1) for x in sys.argv[1:])
    read(**kwargs) 
```

也就是说，对于习惯于命令行的人来说，argparse 和 optparse 可能会为您提供更强大、更自然的东西。（更不用说，支持字符串以外的类型的参数。）

哦，如果你*真正*想要的只是交互式地使用你的函数，那就使用交互式解释器；要么`python`要么`ipython`。您需要将代码放入以结尾的文件中`.py`并导入它，然后您就可以调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T18:53:07.513

一个不太常见但非常有趣的替代方案是[docopt](http://docopt.org/)：一个从您为程序编写的帮助消息（[在 github 上](https://github.com/docopt/docopt)）生成参数解析器的库。

# winapi - 在 Windows 7 上以编程方式切换音频设备

> ID：13054371
> 
> 赞同：10
> 
> 时间：2012-10-24T17:19:23.210
> 
> 标签：winapi, audio, windows-7

在我的 Windows 7 PC 上，我有一组扬声器、一些无线耳机和一个 USB 网络摄像头。这意味着我有两个可能的音频输出设备和两个可能的音频输入设备。

我发现自己不得不相当频繁地在它们之间切换。目前这是一个手动过程：右键单击扬声器图标，选择“播放设备”或“录音设备”之一，在列表中选择正确的设备（那里也有一些“死”的设备）然后点击“设置默认值”。

我环顾四周，我能找到的只是人们编写脚本`SendKeys`来自动执行此操作。

太糟糕了。

无论如何以编程方式切换音频输入/输出设备，以便我可以编写一个简单的托盘应用程序/热键应用程序来简化此操作？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-11-28T16:07:10.667

据称未记录的 COM 接口[IPolicyConfig](https://code.google.com/p/soundprison/source/browse/trunk/ipolicyconfig.h?r=4)（感谢@author EreTIk）允许这样做。

这是一个示例实现。

```
HRESULT SetDefaultAudioPlaybackDevice(LPCWSTR devID)
{
    IPolicyConfigVista *pPolicyConfig;
    ERole reserved = eConsole;

    HRESULT hr = CoCreateInstance(
                    __uuidof(CPolicyConfigVistaClient),
                    NULL, 
                    CLSCTX_ALL, 
                    __uuidof(IPolicyConfigVista), 
                    (LPVOID *)&pPolicyConfig);

    if (SUCCEEDED(hr))
    {
        hr = pPolicyConfig->SetDefaultEndpoint(devID, reserved);
        pPolicyConfig->Release();
    }

    return hr;
} 
```

需要将一串设备 ID 传递给此函数。设备 ID 示例

```
{0.0.1.00000000}.{d915c7bb-d5d7-4c92-80d9-1a0ee5d954f1} 
```

这个设备id可以通过[音频设备枚举](http://msdn.microsoft.com/en-us/library/windows/desktop/dd316556%28v=vs.85%29.aspx)获得。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T17:49:35.823

如果您正在考虑以编程方式更改默认设备，那么这在设计上是不可能的。

*   [以编程方式设置默认播放设备（和录音设备）](http://social.microsoft.com/Forums/en-US/Offtopic/thread/9ebd7ad6-a460-4a28-9de9-2af63fd4a13e/)
*   [如何以编程方式更改默认声音播放设备？](https://stackoverflow.com/questions/2175318/how-to-change-default-sound-playback-device-programatically)

# java - 无法在 Java swing 中设置连接 4 网格的最大尺寸

> ID：13054377
> 
> 赞同：1
> 
> 时间：2012-10-24T17:19:45.583
> 
> 标签：java, swing

现在我正在尝试使gui上的connect 4网格始终为7x8，无论窗口大小如何。我一直在尝试用 a 设置按钮数组，`setMaximumSize`但它不起作用。

这是设置`JButton`数组的代码

```
void ResetGame()
        {

            JLabel label = new JLabel("Click a column to drop piece");

            for(int r=0;r<gameBoard.length;r++)
            {
                java.util.Arrays.fill(gameBoard[r],0,gameBoard[r].length,'0');

                //loop through board columns
                for(int c=0;c<gameBoard[r].length;c++)
                {
                    gameButtons[r][c]= new JButton(empty);
                    panel.add(gameButtons[r][c]);
                    gameButtons[r][c].setPreferredSize(new Dimension(70,70));
                    //Allows buttons to be arranged as grid.
                    GridLayout grid = new GridLayout(0,8);
                    //Sets into grid.
                    gameButtons[r][c].setLayout(grid);
                    gameButtons[r][c].setMaximumSize(new Dimension(0,10));

                }
                panel.add(label); 

            }
            // loop through array setting char array back to ' ' and buttons array back to empty pic
            // reset currentPlayer and numMoves variables
        } 
```

以防万一我还会在此处包含窗口创建方法。

```
public void CreateWindow()
        {
            //Sets window title and create window object.
            JFrame aWindow = new JFrame("Connect Four");
            //Set window position and size
            aWindow.setBounds(200,100,600,800);
            //What close button does.
            aWindow.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            //Make window visible.
            aWindow.setVisible(true);
            //Sets content area to work with stuff.
            aWindow.setContentPane(panel);
             //Gets content pane.
            Container content = aWindow.getContentPane();

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:02:02.923

不确定您要使用 setMaximumSize 实现什么。没有明确和精确的要求，我们几乎无法为您提供帮助。

因此，我建议您查看以下代码段（这是一个[SSCCE](http://sscce.org)）并尝试找出您做错了什么：

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.GridLayout;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Connect4 {

    public class GameButton extends JPanel {
        private final int row;
        private final int column;
        private Color color;

        public GameButton(final int row, final int column) {
            super();
            this.row = row;
            this.column = column;
            addMouseListener(new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent e) {
                    System.out.println("Game button " + row + " " + column + " has been pressed");
                }
            });
        }

        public void setColor(Color color) {
            this.color = color;
            repaint();
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            int size = Math.min(getWidth(), getHeight());
            int offset = (int) ((double) size / 10);
            size = size - 2 * offset;
            if (color == null) {
                g.setColor(Color.BLACK);
                g.drawOval(offset, offset, size, size);
            } else {
                g.setColor(color);
                g.fillOval(offset, offset, size, size);
            }
        }
    }

    protected void initUI() {
        JPanel gridPanel = new JPanel(new GridLayout(7, 8));
        for (int i = 0; i < 7; i++) {
            for (int j = 0; j < 8; j++) {
                GameButton gameButton = new GameButton(i, j);
                gridPanel.add(gameButton);
            }
        }
        JFrame frame = new JFrame(Connect4.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setContentPane(gridPanel);
        frame.setSize(600, 600);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Connect4().initUI();
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:22:31.030

`setMaximumSize()`限制某物的大小。根据您使用的布局管理器，您需要`setPreferredSize()`或`setSize()`.

# ruby-on-rails - 没有路由匹配 {:controller=>"artifacts", :action=>"edit"}

> ID：13054380
> 
> 赞同：0
> 
> 时间：2012-10-24T17:19:59.307
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我不断收到这些错误，因为“编辑”操作没有路线匹配

控制器：

```
def remove_artifact_from_collection

... do my stuff ..

render(:action=>:show)
end 
```

视图：错误所在的行

```
<p><%= link_to 'Edit Evidence Item', edit_artifact_path, :class => 'edit_button' %></p> 
```

路线：

```
resources :artifacts do
    collection do
    get 'remove_artifact_from_collection'
    end
end 
```

bundle exec rake 路由

```
 remove_artifact_from_collection_artifacts GET    /artifacts/remove_artifact_from_collection(.:format)      {:controller=>"artifacts", :action=>"remove_artifact_from_collection"}
                                 artifacts GET    /artifacts(.:format)                                      {:controller=>"artifacts", :action=>"index"}
                                           POST   /artifacts(.:format)                                      {:controller=>"artifacts", :action=>"create"}
                              new_artifact GET    /artifacts/new(.:format)                                  {:controller=>"artifacts", :action=>"new"}
                             edit_artifact GET    /artifacts/:id/edit(.:format)                             {:controller=>"artifacts", :action=>"edit"}
                                  artifact GET    /artifacts/:id(.:format)                                  {:controller=>"artifacts", :action=>"show"}
                                           PUT    /artifacts/:id(.:format)                                  {:controller=>"artifacts", :action=>"update"}
                                           DELETE /artifacts/:id(.:format)                                  {:controller=>"artifacts", :action=>"destroy"} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T17:24:36.723

那是因为您没有向`edit_artifact_path`. 假设您的工件在`@artifact`实例变量中，您应该使用：

`link_to 'Edit Evidence Item', edit_artifact_path(@artifact), ...`

您还可以使用：

`link_to 'Edit Evidence Item', [:edit, @artifact], ...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:37:50.720

```
link_to "Edit Artifact", edit_artifact_path(@artifact) 
```

你没有传入对象。

```
edit_artifact GET    /artifacts/:id/edit(.:format) 
```

从路径可以看出，需要指定id。所以传入一个包含工件对象的变量。

# cakephp - php 应用程序的 ACL

> ID：13054383
> 
> 赞同：0
> 
> 时间：2012-10-24T17:20:10.440
> 
> 标签：cakephp, acl, user-roles

我有一个关于 ACL 实施的问题。

在 DB 中维护 ACL 规则好不好？或者我们可以在文件级别（在其中一个文件中）创建 ACL 规则并从那里读取它。

当我阅读关于 CakePHP 和其他框架中的 ACL 实现时。他们根据要求使用两者。

我认为在一个文件中维护规则并检查它有更可行和更快的方法来检索和维护系统的复杂性，我们有 200 多个 url 操作要控制。

遵循正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:50:37.887

问题归结为您的系统有多大，您有多少用户，您有多少不同的功能等。我建议您以数据库方式进行操作，这可能很乏味，但它可以让您成长并且有很多使 ACL 更易于管理的插件，即[http://www.alaxos.net/blaxos/pages/view/plugin_acl_2.0](http://www.alaxos.net/blaxos/pages/view/plugin_acl_2.0)

# time - 计算不同长度变量的剩余时间

> ID：13054386
> 
> 赞同：0
> 
> 时间：2012-10-24T17:20:23.370
> 
> 标签：time

我不得不承认这个问题的标题很糟糕......我无法得到最好的描述。让我看看能不能举个例子。

我有大约 2700 名客户一次将我的软件安装在他们的服务器上。1500左右还是可以的。基本上，我所做的是自动诊断，以帮助清除已卸载或对软件有问题的人，供我们协助。目前我们有一个 cURL 为我们的软件获取他们的网站并寻找标题返回。

我们有 8 种不同的状态返回

绿色 - 一切正常（通常很快 0.5 - 2 秒）
红色 - 未找到软件（通常最长 5 - 15 秒）
蓝色 - 找到但未激活的软件（通常为 3 - 9 秒）
黄色 - 服务器 IP 不匹配（通常1 - 3 秒）
橙色 - 服务器 IP 不匹配和错误的软件类型（通常 5 - 10 秒）
紫色 - 激活密钥不正确（通常在 2 秒内）
黑色 - 域返回 404 - 不再存在（通常在一秒内）
UNK -连接失败（通常是由于我们的负载均衡器——非常罕见）（还没有反驳过）

现在基本上发生的事情是 cronJob 将通过拉取域和产品类型来启动该过程。然后它将卷曲域并开始循环显示上面的状态颜色。

在发生这种情况时，我们有一个 ajax 页面正在返回结果，因此我们可以密切关注状态。主要问题是剩余时间非常不稳定，无法很好地估计。这是当前的数学：

```
# Number of accounts between NOW and when started
$completedAccounts = floor($parseData[2]*($parseData[1]/100));

# Number of seconds between NOW and when started
$completedTime = strtotime("now") - strtotime("$hour:$minute:$second"); 

# Avg number of seconds per account
$avgPerCompleted = $completedTime / $completedAccounts; 

# Total number of remaining accounts to be scanned
$remainingAccounts = $parseData[2] - $completedAccounts;

# The total of seconds remaining for all of the remaining accounts
$remainingSeconds = $remainingAccounts * $avgPerCompleted;

$remainingTime = format_time($remainingSeconds, ":"); 
```

我可以对所有的绿色、红色、蓝色等进行计数...并计算每种颜色的平均时间，然后在平均时间内使用它，尽管我不相信这会产生更好的结果.

由于时代差异如此之大，有什么建议将不胜感激？

谢谢，杰夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:33:48.023

好的，我相信我已经想通了。我必须创建一个类，以便可以计算一段时间内的单个回归。

```
 function calc() {
        $n = count($this->mDatas);
        $vSumXX = $vSumXY = $vSumX = $vSumY = 0;

        //var_dump($this->mDatas);
        $vCnt = 0; // for time-series, start at t=0<br />
        foreach ($this->mDatas AS $vOne) {
            if (is_array($vOne)) { // x,y pair<br />
                list($x,$y) = $vOne;
            } else { // time-series<br />
                $x = $vCnt; $y = $vOne;
            } // fi</p>
            $vSumXY += $x*$y;
            $vSumXX += $x*$x;
            $vSumX += $x;
            $vSumY += $y;
            $vCnt++;
        } // rof
        $vTop = ($n*$vSumXY – $vSumX*$vSumY);
        $vBottom = ($n*$vSumXX – $vSumX*$vSumX);
        $a = $vBottom!=0?$vTop/$vBottom:0;
        $b = ($vSumY – $a*$vSumX)/$n;

        //var_dump($a,$b);
        return array($a,$b);
    } 
```

我记下每个帐户并开始构建一个数组，计算每个帐户所需的时间。然后数组运行此计算，因此它将构建 ax 和 y 时间集。最后，我通过预测函数运行数组。

```
 /** given x, return the prediction y */
    function calcpredict($x) {
        list($a,$b) = $this->calc();
        $y = $a*$x+$b;
        return $y;
    } 
```

我把静态值放进去，这样你就可以看到结果：

```
$eachTime = array(7,1,.5,12,11,6,3,.24,.12,.28,2,1,14,8,4,1,.15,1,12,3,8,4,5,8,.3,.2,.4,.6,4,5);
$forecastProcess = new Linear($eachTime);
$forecastTime = $forecastProcess->calcpredict(5); 
```

这个整体系统在 10 个帐户中提供了大约 0.003 的差异，在 2700 个帐户中提供了大约 2.6 的差异。接下来是计算精度。

感谢您尝试男孩和女孩

# iphone - Bezier Curve Movement

> ID：13054389
> 
> 赞同：1
> 
> 时间：2012-10-24T17:20:40.563
> 
> 标签：iphone, cocos2d-iphone, bezier

I want to move a cubic bezier curve from source point to destination point like line draw using touches but in my case not by touches, or u can say just by draw method or update method when a scene called(not a sprite movement along bezier curve).

My Code is-> Here i just take one sprite(one small image line) and with the help of curve points i just make curve path.(when i called scene then direct curved path showing)

but I want proper curve movement animation from source point to destination point.

```
curvePoints=[[NSMutableArray alloc]init];

for (CGFloat t = 0.0; t <= 1.00001; t += 0.005)
        {
        CGPoint point = CGPointMake(
                                    _bezierPoint(t,237, 320,423,609),
                                    _bezierPoint(t, 319, 461,529,534));

        CCSprite*path=[CCSprite spriteWithFile:@"path.png"];

       [self addChild:path];          
        [path setPosition:[[CCDirector sharedDirector]convertToGL:point]];
        [curvePoints addObject:[NSValue valueWithCGPoint:[[CCDirector sharedDirector]convertToGL:point]]];

} 
```

I have also tried using the draw method like this:

```
-(void)draw{
    CGSize s = [[CCDirector sharedDirector] winSize];

    CGPoint point1 = CGPointMake(237, 705);

    CGPoint point2 = CGPointMake(320, 563);

    CGPoint point3 = CGPointMake(423, 495);

    CGPoint point4 = CGPointMake(609, 490);

    [curvePoints addObject:NSStringFromCGPoint(point1)];

    [curvePoints addObject:NSStringFromCGPoint(point2)];

    [curvePoints addObject:NSStringFromCGPoint(point3)];

    [curvePoints addObject:NSStringFromCGPoint(point4)];

    glEnable(GL_LINE_SMOOTH);

    for(int i = 0; i < [curvePoints count]; i+=2)
    {
        CGPoint origin = CGPointFromString([curvePoints objectAtIndex:i]);

        CGPoint control1 = CGPointFromString([curvePoints objectAtIndex:i+1]);

        CGPoint control2 = CGPointFromString([curvePoints objectAtIndex:i+1]);

        CGPoint destination = CGPointFromString([curvePoints objectAtIndex:i+1]);

        ccDrawCubicBezier(origin, control1, control2, destination, 100);

    }

} 
```

but here also same problem,when I called scene,direct cubic curve showing.

Please help me out of this problem,sorry for my bad English, any help will be appreciated Thanks

# c++ - C++ Send arguments to exe file

> ID：13054394
> 
> 赞同：-2
> 
> 时间：2012-10-24T17:20:52.057
> 
> 标签：c++, c

I have a c++ program that I call with the following line:

```
 ./myProgram 
```

However, I'd like to send some external variables to the program (this will eventually be called from PHP via the exec() method). I've searched and read that I should use arguments in the following way:

```
 ./myProgram <arguments> 
```

However I'm not exactly sure how to use that. Do I separate the arguments by comma if I have more than one, do I need to put type before? And in the C++ file, how do I get these variables?

Can somebody point me to a tutorial for that? Or any other info, code example? Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:30:34.460

可执行文件的命令行参数应该用空格分隔。

```
<?php
    echo exec('myProgram arg1 arg2 arg3');
?> 
```

如果您的参数是数字等......那么您将它们转换为字符串并将该字符串传递给 exec 命令。C/C++ 仅在其主要函数中接受字符串参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:33:40.013

您可能需要查看如何使用编译器编译代码

可能这可能会有所帮助： [http ://homepages.gac.edu/~mc38/2001J/documentation/g++.html](http://homepages.gac.edu/~mc38/2001J/documentation/g++.html)

然后你可以通过调用可执行文件和类似的参数来运行它

> ./prog 参数

# c# - c# 比较当前windows用户和AD组

> ID：13054396
> 
> 赞同：0
> 
> 时间：2012-10-24T17:21:03.457
> 
> 标签：c#, winforms

我正在尝试获取当前的 windows 用户并查看该用户是否属于 Active Directory 中的某个组。用户名信息找到“Harper\TSmith”，这看起来不错，但是当我到达

```
UserPrincipal uPrincipal = Psearch.FindOne() as UserPrincipal 
```

行 UPrincipal 为空。想不通为什么。我在底部还有一个验证器类，它作为布尔方法来查看它们是否属于该特定组。

```
PrincipalContext principalCtx = new PrincipalContext(ContextType.Domain);
            UserPrincipal findUser = new UserPrincipal(principalCtx);
            //findUser.Name = Environment.UserName;
            findUser.Name = WindowsIdentity.GetCurrent().Name;
            PrincipalSearcher pSearch = new PrincipalSearcher();
            pSearch.QueryFilter = findUser;
            UserPrincipal uPrincipal = pSearch.FindOne() as UserPrincipal;

            Validator validate = new Validator();
            //validate.IsUserInGroup("VisualOne", uPrincipal);

            if (validate.IsUserInGroup("MyGroup", uPrincipal))
            {
                var MemberShipForm = new Membership();
                MemberShipForm.Show();
            }

public bool IsUserInGroup(string groupName, UserPrincipal user)
    {
        PrincipalContext context = new PrincipalContext(ContextType.Domain, "Harper");
        GroupPrincipal group = GroupPrincipal.FindByIdentity(context, "MyGroup");

        if (user.IsMemberOf(group))
        {
            return true;
        }
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:13:43.330

```
PrincipalContext principalCtx = new PrincipalContext(ContextType.Domain);
UserPrincipal uPrincipal = UserPrincipal.Current;

 if (validate.IsUserInGroup("MyGroup", uPrincipal))
            {
                var MemberShipForm = new Membership();
                MemberShipForm.Show();
            } 
```

# javascript - JQuery 不播放多个声音文件或延迟事件

> ID：13054399
> 
> 赞同：2
> 
> 时间：2012-10-24T17:21:12.350
> 
> 标签：javascript, jquery, html, audio, settimeout

我一直在尝试浏览文本列表并播放等效的字母声音文件。该代码播放字符串中的最后一个文件，但会循环遍历每个元素（尝试使用警告框）。我试图为每个字母播放声音剪辑，我尝试使用 setTimeout 来延迟 for 循环的检测，但没有成功。有人对此有任何见解吗？我也使用带有 html5 网页的 jquery。

```
function playSound(msg) {
                var sound_file_url = "snd/" + msg + ".wav" ;
                $('#sound').html("<embed src='"+sound_file_url+"' hidden=true autostart=true loop=false>");
                alert("Text: " + msg );
}

function startPoint() {
   var input = $("#text").val();
   for (var i = 0, j = input.length; i < j; i++) {
        if(input[i].match(/^[a-zA-Z0-9]+/) ){
                setTimeout(playSound(input[i]), 500);
        }
    }
}; 
```

长期潜伏者，第一次海报。感谢所有偷看的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:22:46.867

您没有保存上下文，因为它将始终是最后一个 i 值。尝试以下代码。你也`playSound`马上打电话。

```
 function playSound(msg) {

                console.log("Text: " + msg );
}

function startPoint() {

   var input = $("#text").val(), i = 0, j = input.length;
    function repeat(){
        if(i == j ) return;
        if(input[i].match(/^[a-zA-Z0-9]+/) ){
             playSound( input[i]);
        }
        setTimeout(repeat, 500);
        i++;
    }
    repeat();
};​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T15:19:20.300

我认为这是因为变量'i'。

您可以尝试使用这种模式来保留变量“i”；

(函数(newI){

```
playSound(newI); 
```

}）（一世）;

还，

另一件事是某些浏览器仅支持 HTML5 音频 API 的一种音频通道。

# ios - 使用 AFNetworking 发布任意文本

> ID：13054400
> 
> 赞同：0
> 
> 时间：2012-10-24T17:21:13.107
> 
> 标签：ios, json, http, http-post, afnetworking

我已经看到如何使用 HttpClient 发布 urlencoded 表单和 json。

但是我如何发布任意文本？

我的用例是我已经创建了 JSON 字符串，所以我想直接发布字符串，而不是构建字典。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:47:47.907

将`HTTPBody`属性设置为 on `NSMutableURLRequest`，并在 AFNetworking 中使用`NSURLRequest`参数的任何位置使用。

# c++ - 条件语句如何与位运算符一起使用？

> ID：13054401
> 
> 赞同：6
> 
> 时间：2012-10-24T17:21:15.713
> 
> 标签：c++, bitwise-operators

我试图了解 if 条件如何与按位运算符一起使用。检查数字是偶数还是奇数的方法可以通过以下方式完成：

```
#include <iostream>
#include <string>
using namespace std;

string test()
{
    int i = 8;  //a number
    if(i & 1)
      return "odd";

    else
      return "even";       
}

int main ()
{
  cout << test();
  return 0;
} 
```

我不明白的部分是 if 条件如何工作。在这种情况下，如果 i = 8，那么它正在执行的 in If 语句`1000 & 1`应该返回等于 8 的 1000。

如果 i = 7，那么在 if 语句中它应该`111 & 1`返回 111，它等于 7

为什么 if(8) 将返回“偶数”而 if(7) 返回“奇数”？我想我想了解在处理按位运算符时 if 语句正在检查什么是 True 以及什么是 False 。

当我写下这个问题时只是一个想法是因为它实际上在做

```
for 8: 1000 & 0001 which gives 0
for 7: 0111 & 0001 which gives 1? 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-24T17:24:08.337

是的，你在最后一部分是对的。二进制`&`和`|`逐位执行。自从

```
1 & 1 == 1
1 & 0 == 0
0 & 1 == 0
0 & 0 == 0 
```

我们可以看到：

```
8 & 1 == 1000 & 0001 == 0000 
```

和

```
7 & 1 == 0111 & 0001 == 0001 
```

不过，您的`test`函数确实可以正确计算一个数字是偶数还是奇数，因为`a & 1`测试 1 的位置是否有 a `1`，只有奇数才有。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T17:29:00.123

实际上，在 C、C++ 和其他主要编程语言中，`&`运算符`AND`在整数类型的每个位上进行操作。`AND`当且仅当两个操作数的第 n 位都等于 1 时，按位中的第 n 位等于 1 。

例如：

```
8 & 1 =
1000 - 8
0001 - 1
----
0000 - 0

7 & 1 =
0111 - 7
0001 - 1
----
0001 - 1

7 & 5 =
0111 - 7
0101 - 5
----
0101 - 5 
```

出于这个原因`AND`，在偶数之间进行按位运算，`1`将始终相等`0`，因为只有奇数的最低有效位等于`1`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-24T17:25:16.773

`if(x)`在 C++ 中转换`x`为布尔值。一个整数被认为`true`是非零的。

因此，`if(i & 1)`所做的只是检查是否设置了最低有效位`i`。如果已设置，则为`i&1`非零；如果未设置，`i&1`则为零。

如果该整数是奇数，则在整数中设置最低有效位，因此如果是奇数，`i&1`则非零`i`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T17:24:55.327

表达式`i & 1`where `i`is an`int`具有类型`int`。它的值为`1`或`0`，取决于 的低位的值`i`。在语句`if(i & 1)`中，该表达式的结果被转换为`bool`，遵循整数类型的通常规则：`0`变为`false`，非零变为`true`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-24T17:25:01.210

您所说的代码实际上是按位运算符应该如何工作。在您的 (8 & 1) 示例中：

```
1000 & 0001 = 0000 
```

因为在第一个值中，最后一位设置为 0，而在第二个值中，最后一位设置为 1\. 0 & 1 = 0。

```
0111 & 0001 = 0001 
```

在这两个值中，最后一位都设置为 1，因此结果为 1，因为 1 & 1 = 1。

# javascript - 有些东西阻止了我的提交按钮功能

> ID：13054403
> 
> 赞同：1
> 
> 时间：2012-10-24T17:21:29.290
> 
> 标签：javascript

我之前发布了关于另一个主题的帖子，并想感谢所有帮助我的人。我已经很好地清理了我的代码（我认为），但是现在当我单击“提交”时，什么也没有发生。我怀疑这个问题与使用 ajax 发送数据有关，但是我编写东西以发送文本和无线电数据的方式存在问题。在发布此之前，我确实进行了彻底的搜索，以查看该问题是否可能已在其他人的帖子中得到回答但没有找到 - 可能是因为我对 javascript 不够精明，无法将其与我自己的代码相关联。无论如何，这是一个示例[http://jsfiddle.net/J2yWQ/78/](http://jsfiddle.net/J2yWQ/78/)如果有人能找到我的问题，我将不胜感激。

```
function emailWarning() {
    var check = document.getElementById("check");
    check.className = 'show';
}

function validateEmail(xem) {
    var re = /\S+@\S+\.\S+/;
    return re.test(xem);
}

function postData() {
        email = 'email'+document.getElementById('email').value;
    var tt = validateEmail(email);
    if (tt == true) {
        xmlhttp.open('POST', 'payment.php', true);
        xmlhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        xmlhttp.send(myProps.join("&"));
    } else {

    emailWarning();

    }

}

    var myProps = [];

function insert() {
    try {
        if (window.XMLHttpRequest) {
            xmlhttp = new XMLHttpRequest();
        } else {
            xmlhttp = new ActiveXObject('Microsoft.XMLHTTP');
        }

        myProps = [];

        function addProp(id) {
            var input = document.getElementById(id);
            if(!input) {
               input = document.forms[0][id];   
            }
            var value = encodeURIComponent(input.value);
            myProps.push(id + "=" + value);
        }

        addProp('child_name');
        addProp('age');
        addProp('hometown');
        addProp('boy_girl');
        addProp('first_name');
        addProp('last_name');
        addProp('email');
        addProp('address1');
        addProp('address2');
        addProp('city');
        addProp('state');
        addProp('zip');
        addProp('country');

        var flagInvalid = false;
        var tempArray = document.getElementsByClassName("required");
        for (var i = 0; i < tempArray.length; i++) {
            if (tempArray[i].value == "") {
                flagInvalid = true;

    break;
        }
    }

    if (flagInvalid == false) {
        postData();

    } else {

        var showValidationError = function(id) {
        var el = document.getElementById(id);
        if (el) {
            el.className = 'show';
        }
        else {
            alert('Missing element #' + id);
        }
    }

    showValidationError('log');
    for (var i = 1; i < 12; i++) {
        showValidationError('log' + i);
    }
}   

    } catch (e) {
        alert('An error occured in inert: ' + e);
    }

} 
```

# apache-karaf - 服务包找不到 oracle.jdbc.OracleDriver

> ID：13054412
> 
> 赞同：1
> 
> 时间：2012-10-24T17:22:14.120
> 
> 标签：apache-karaf

我在保险丝下使用我的 batis，我的项目中有 4 个捆绑包

1.  包含一些 bean 的模型包
2.  通过创建和使用 SqlSessionTemplate bean 连接到数据库的 Dao 包
3.  调用 Dao 包的服务包
4.  调用服务包的 Web 服务包

我收到此错误“org.apache.commons.dbcp.SQLNestedException：无法加载 JDBC 驱动程序类 'oracle.jdbc.OracleDriver'

原因：java.lang.ClassNotFoundException: oracle.jdbc.OracleDriver not found by service bundle"

在服务包中导入 oracle.jdbc 包后，错误消失

为什么服务包会加载 Oracle 驱动程序？我想这是道捆绑的责任。

# php - 使用 PHP 和 Mysql Foreach 循环创建多维数组

> ID：13054417
> 
> 赞同：0
> 
> 时间：2012-10-24T17:22:32.233
> 
> 标签：php, mysql, arrays, multidimensional-array

我需要用 sql 和循环创建一个多维数组。但是只有一个结果被设置到数组中，最后一个结果是覆盖以前的结果。数组结构如下所示：

```
 ->value = Array (4)
   CartID => "1299"
   Date => "2012-09-27 09:17:20"
   Amount => "85.00"
         0 => Array (8)
         CartStatus => "Purchased"
         Date => "2012-09-27 09:17:20"
         CartID => "1299"
         Sequence => "1"
         Amount => "-85.00"
         Comments => " , Refund Status: " 
```

这是我的代码：

```
 $txarray = array();
    foreach ($data as $transaction) {
    $CartVar = $transaction['CartID'];
    $CartStatus = $transaction['Status'];
    $CartDate = $transaction['DateTime'];
    $CartTotal = $transaction['Total'];
    $txarray = array('CartID' => $CartVar, 'Date' => $CartDate, 'Amount' => $CartTotal);
        $sql1 = $db->query("SQL stuff");
        foreach ($sql1 as $refund) {
        $CartID = $refund['CartID'];
        $Sequence = $refund['Sequence'];
        $TrxType = $refund['TrxType'];
        $ParentID = $refund['ParentID'];
        $TotalSum = '-'.$refund['Amount'];
        $Comments = ' '.$refund['Comments'];
        $Comments .= ', Refund Status: '.ucwords($refund['Status']);
        $txarray[] = array('CartStatus' => $CartStatus, 'Date' => $CartDate, 'CartID' => $CartID, 'Sequence' => $Sequence, 'TrxType' => $TrxType, 'ParentID' => $ParentID, 'Amount' => $TotalSum, 'Comments' => $Comments);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:24:08.820

这一行：

```
$txarray = array('CartID' => $CartVar, 'Date' => $CartDate, 'Amount' => $CartTotal); 
```

破坏您在早期迭代中创建的任何先前数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:37:02.833

查看上面的代码片段 $txarray 变量由于代码而被覆盖。

```
$txarray = array('CartID' => $CartVar, 'Date' => $CartDate, 'Amount' => $CartTotal); 
```

它需要替换为

```
$txarray[] = array('CartID' => $CartVar, 'Date' => $CartDate, 'Amount' => $CartTotal); 
```

或者，您可以使用 array_push() 函数来推送数组，从而生成多维数组。例如

```
 array_push($txarray,array('CartID' => $CartVar, 'Date' => $CartDate, 'Amount' =>      $CartTotal)); 
```

有关 array_push 函数的更多文档，请参阅下面提到的 url 中的文档。 [http://php.net/manual/en/function.array-push.php](http://php.net/manual/en/function.array-push.php)

# sql - 选择主键

> ID：13054418
> 
> 赞同：1
> 
> 时间：2012-10-24T17:22:38.287
> 
> 标签：sql

我想创建一个包含“电子邮件地址”和/或“用户名”`unique`字段的“用户”表，我是否还应该添加一个“id”`int usigned auto_increment`作为`primary key`？

我之所以问，是因为我已经看到一些教科书示例在这样的表中使用“id”字段和另一个`unique`字段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T17:24:18.393

是的，这是最佳实践。

1.  您将在其他表中将其用作外键。
2.  您希望密钥保持唯一（您可能需要更改用户名）
3.  您希望键被索引，数字类型的索引将比 varchar 小得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:25:55.113

您应该使用`userId`列，因为使用`VARCHAR`列数据类型对表进行索引会降低性能。

使用`INT`对性能更好。它们占用的空间更少，更重要的是它们的比较速度更快。

`INT`可以在一条 CPU 指令中执行比较。对于`VARCHAR`s 或`CHAR`s，必须依次比较每个字符。这使得每个 PK 查找更快。如果您有连接表，则每个连接选择都将查找 PK。

# java - JPA如何无异常更新现有对象数据？

> ID：13054421
> 
> 赞同：0
> 
> 时间：2012-10-24T17:22:53.463
> 
> 标签：java, jpa, exception-handling, auto-update

我尝试更新数据库中的现有数据行，但出现异常：

```
[EL Warning]: 2012-10-24 20:02:27.798--UnitOfWork(22664464)--Exception [EclipseLink-4002] (Eclipse Persistence Services -
2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry '20-http://www.vilpra.lt/products/Foto/Aremikas/Katilas_zvake_big' for key 'PRIMARY' Error Code: 1062 Call: INSERT INTO x_links_media (image, link_id) VALUES (?, ?)  bind => [2 parameters bound] Query: InsertObjectQuery(database.entity.XLinksMedia[ xLinksMediaPK=database.entity.XLinksMediaPK[ linkId=20, image=http://www.link.lt/products.jpg ] ]) 
```

主要对象类如下面的代码所示。有一些与 OneToMany 关系相关的变量。

```
package database.entity;

import java.io.Serializable;
import java.util.Date;
import java.util.List;
import javax.persistence.Basic;
import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.OneToMany;
import javax.persistence.OneToOne;
import javax.persistence.Table;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;
import javax.xml.bind.annotation.XmlRootElement;

@Entity
@Table(name = "x_parser_links")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "XParserLinks.findAll", query = "SELECT x FROM XParserLinks x"),
    @NamedQuery(name = "XParserLinks.findByLinkId", query = "SELECT x FROM XParserLinks x WHERE x.linkId = :linkId"),
    @NamedQuery(name = "XParserLinks.findByPageId", query = "SELECT x FROM XParserLinks x WHERE x.pageId = :pageId"),
    @NamedQuery(name = "XParserLinks.findByLink", query = "SELECT x FROM XParserLinks x WHERE x.link = :link"),
    @NamedQuery(name = "XParserLinks.findByLevel", query = "SELECT x FROM XParserLinks x WHERE x.level = :level"),
    @NamedQuery(name = "XParserLinks.findByLinkType", query = "SELECT x FROM XParserLinks x WHERE x.linkType = :linkType"),
    @NamedQuery(name = "XParserLinks.findByCreateDate", query = "SELECT x FROM XParserLinks x WHERE x.createDate = :createDate"),
    @NamedQuery(name = "XParserLinks.findByDelDate", query = "SELECT x FROM XParserLinks x WHERE x.delDate = :delDate")})
public class XParserLinks implements Serializable {

    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "link_id")
    private Integer linkId;
    @Column(name = "page_id")
    private Integer pageId;
    @Column(name = "link")
    private String link;
    @Column(name = "level")
    private Integer level;
    @Column(name = "link_type")
    private Short linkType;
    @Column(name = "create_date")
    @Temporal(TemporalType.TIMESTAMP)
    private Date createDate;
    @Column(name = "del_date")
    @Temporal(TemporalType.TIMESTAMP)
    private Date delDate;
    @JoinColumn(name = "tev_link_id")
    @OneToOne(cascade = CascadeType.ALL)
    private XParserLinks tevas;
    @OneToMany(mappedBy = "xParserLink", targetEntity = XLinksMedia.class, cascade = CascadeType.ALL)
    private List<XLinksMedia> fotos;
    @OneToMany(mappedBy = "xParserLink", targetEntity = XLinksVarchar.class, cascade = CascadeType.ALL)
    private List<XLinksVarchar> atributes;    

    public XParserLinks() {
    }

    public XParserLinks(Integer linkId) {
        this.linkId = linkId;
    }

    public Integer getLinkId() {
        return linkId;
    }

    public void setLinkId(Integer linkId) {
        this.linkId = linkId;
    }

    public Integer getPageId() {
        return pageId;
    }

    public void setPageId(Integer pageId) {
        this.pageId = pageId;
    }

    public String getLink() {
        return link;
    }

    public void setLink(String link) {
        this.link = link;
    }

    public Integer getLevel() {
        return level;
    }

    public void setLevel(Integer level) {
        this.level = level;
    }

    public Short getLinkType() {
        return linkType;
    }

    public void setLinkType(Short linkType) {
        this.linkType = linkType;
    }

    public Date getCreateDate() {
        return createDate;
    }

    public void setCreateDate(Date createDate) {
        this.createDate = createDate;
    }

    public Date getDelDate() {
        return delDate;
    }

    public void setDelDate(Date delDate) {
        this.delDate = delDate;
    }

    public XParserLinks getTevas() {
        return tevas;
    }

    public void setTevas(XParserLinks tevas) {
        this.tevas = tevas;
    }

    public List<XLinksMedia> getFotos() {
        return fotos;
    }

    public void setFotos(List<XLinksMedia> fotos) {
        this.fotos = fotos;
    }

    public List<XLinksVarchar> getAtributes() {
        return atributes;
    }

    public void setAtributes(List<XLinksVarchar> atributes) {
        this.atributes = atributes;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (linkId != null ? linkId.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof XParserLinks)) {
            return false;
        }
        XParserLinks other = (XParserLinks) object;
        if ((this.linkId == null && other.linkId != null) || (this.linkId != null && !this.linkId.equals(other.linkId))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "database.entity.XParserLinks[ linkId=" + linkId + " ]";
    }
} 
```

这是我要处理数据的代码。`XParserLinks`object 是 man 对象，如上面的代码。在这个例子中，我检查对象是否没有他的主键 LinkId，然后使用持久化创建新对象，否则只更新对象和他的值，但是当我想更新现有对象时，我得到了我之前的意思的异常。

```
 XParserLinks e = entry.getValue();

        if (e.getLinkId() == null) {
            try {
                TarpineManager.startTransaction();

                TarpineManager.persist(e);

                TarpineManager.commitTransaction();

            } catch (Exception ex) {
                ex.printStackTrace();
                if (TarpineManager.getInstance().getTransaction().isActive()) {
                    TarpineManager.rollbackTransaction();
                }
            }
        } else {

            try {

                TarpineManager.startTransaction();

                TarpineManager.commitTransaction();

            } catch (Exception ex) {
                ex.printStackTrace();
                if (TarpineManager.getInstance().getTransaction().isActive()) {
                    TarpineManager.rollbackTransaction();
                }
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:47:09.117

您是否有任何机会创建您的实体并强制设置其 ID？我看到你的班级有一个`setLinkId(Integer linkId)`方法。

首先，您应该使用`merge`而不是`persist`. 现在，考虑到这一点，该`merge`方法也抛出了异常，因为 JPA 无法定义您要保留的实体是新实体还是先前获取的实体，因为生命周期中的状态不是相同的。

如果您创建一个对象并设置其 id，则该实体具有状态`new`，但如果您在实体之前获取该实体，它应该具有`detached`状态。合并时，将正确更新分离的实体，但会保留新实体，并且由于获取了 id，因此会引发异常。

您拥有实体的 ID，因此您最好先获取它们，然后更新对象，然后再更新`merge`它们。

# javascript - 从 javascript 代码在 DOM 中添加外部脚本

> ID：13054427
> 
> 赞同：0
> 
> 时间：2012-10-24T17:23:04.203
> 
> 标签：javascript, dom, download, sequence

我在正文末尾包含了 3 个外部 js 文件。假设我的文档已经包含一个名为 insertlibs.js 的 js，下面是代码

```
var script1 = document.createElement('script');
script1.src='http://code.jquery.com/jquery-latest.js';
script1.type='text/javascript';
document.getElementsByTagName('Body').item(0).appendChild(script1);

// Similar way to include underscore

var script2 = document.createElement('script');
script2.src='hhttp://documentcloud.github.com/backbone/backbone-min.js';
script2.type='text/javascript';
document.getElementsByTagName('Body').item(0).appendChild(script2); 
```

但是有时会发生什么，它会抛出 $ 未定义的错误，我尝试在 Firefox 中进行调试，并且 jquery 和主干发生并行下载，有时主干库比 jQuery 更早下载，这导致了此错误。

据我所知，如果包含脚本标签，它将阻止进一步的请求所以只要我在 dom 中添加 jquery。我对这里发生的工作流程感到困惑。

所以我找到了解决方案，我合并了两个 js 并进行了一次调用，该调用运行良好，但这并不能解释我在上述情况下发生的流程。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T17:26:59.713

这是因为您试图在没有确保 jquery 已完全加载的情况下包含主干。要更正此问题，您可以使用脚本的 onload 属性附加一个回调，该回调将在加载 jquery 时触发。

例如：

```
var script1 = document.createElement('script');
script1.src='http://code.jquery.com/jquery-latest.js';
script1.type='text/javascript';

// add an onload handler
script1.onload = function() {

   // load the rest of the scripts here

   var script2 = document.createElement('script');
   script2.src='hhttp://documentcloud.github.com/backbone/backbone-min.js';
   script2.type='text/javascript';
   document.getElementsByTagName('Body').item(0).appendChild(script2);
}

document.getElementsByTagName('Body').item(0).appendChild(script1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T11:27:54.523

> 据我所知，如果包含脚本标签，它将阻止进一步的请求

不，阻塞/同步下载仅在标签位于解析的 HTML 中时（或`document.write`在解析期间插入）；动态 DOM 附加脚本异步并行加载。

要做到这一点，但要确保在满足其依赖关系时执行脚本，您需要使用[AMD](https://github.com/amdjs/amdjs-api/wiki/AMD)加载程序。

# php - 下载时缺少 .zip 扩展名

> ID：13054429
> 
> 赞同：0
> 
> 时间：2012-10-24T17:23:10.257
> 
> 标签：php, file, download

我有一个网站，允许客户下载他们购买的文件。

一个链接被发送给客户，该链接将他们引导到一个页面，该页面检查链接是否有效，如果有效，则允许他们下载他们的产品。

以下是链接示例：[http ://www.psptubestop.com/dl/2z129a2.php?reference=6d556bde201a2fe4079874168&password=535864380ee2bc0f57cced3fe&pid=402](http://www.psptubestop.com/dl/2z129a2.php?reference=6d556bde201a2fe4079874168&password=535864380ee2bc0f57cced3fe&pid=402)

很多客户说他们下载的时候，.zip 扩展名丢失了，我找不到问题，它在我的机器上运行良好，除了当我“另存为”时，但即使这样，有些人还是有问题。

有什么方法可以让他们下载文件并保留 .zip 扩展名，即使他们按“另存为”？

这是我用来将它们重定向到下载的代码...

```
header("Cache-Control: public");
header("Content-Description: File Transfer");
header("Content-Disposition: attachment; filename=$originalfilename");
header("Content-Type: application/zip");
header("Content-Transfer-Encoding: binary"); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:31:20.423

我愿意打赌这与文件名中有一个空格有关，因为标题中的文件名是`PSP_Tubes_PSP_Tubes_Lisa_Cree_The Gift_6932.zip`并且文件希望保存为`PSP_Tubes_PSP_Tubes_Lisa_Cree_The`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T17:30:23.480

问题可能是某些文件有空格，在这种情况下，您当前的代码只使用了第一部分，因此丢失了扩展部分，为防止出现此类错误，您必须将文件名括在双引号中，如下所示：

```
header('Content-Disposition: attachment; filename="'.$originalfilename.'"'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T17:25:40.143

添加一个看起来像文件名的虚拟 GET 参数。

```
...&fname=/foo.zip 
```

# sql - UPDATE 查询不使用 WHERE 子句

> ID：13054430
> 
> 赞同：1
> 
> 时间：2012-10-24T17:23:13.397
> 
> 标签：sql, sql-update, where-clause

我正在尝试使用 UPDATE 查询从另一个表中的字段修改表中的字段。

我使用的查询语句是：

```
UPDATE Todays_Deliveries SET Remaining = DLookup("Remaining","Current_Delivery","[MP-Ref] = Form![MP-Ref] And [Cat No] ='" & [Cat No] & "'")
WHERE "[MP-Ref] = Form![MP-Ref] And [Cat No] ='" & [Cat No] & "'"; 
```

MP-Ref 是交货参考。

Cat No 是项目参考。

Todays_Deliveries 是一个表格，其中包含与在给定日期交付的项目相关的总记录。用户使用表单选择交付，然后使用 APPEND 查询根据交付参考填充 Current_Delivery 表。用户完成后，使用 DELETE 查询清除 Current_Delivery 表。

两个表都有一个*Remaining*值，其中包含仍需要预订的特定记录的总数。当用户在 Current_Delivery 表单上修改 Current_Delivery的*Remaining字段时，查询会更新 Todays_Deliveries 表。*一切正常，但是运行查询时不在 Current_Delivery 表中的任何记录都将更新为 NULL。

删除 WHERE 子句似乎对结果没有影响，这让我相信我没有正确使用 WHERE 子句。

任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:29:43.260

你的整个 Where 子句用双引号括起来。即使对于 Access 女士来说，这也有点奇怪。

尝试这个 ：

```
UPDATE Todays_Deliveries 
SET Remaining = DLookup("Remaining","Current_Delivery","[MP-Ref] = Form![MP-Ref] And [Cat No] ='" & [Cat No] & "'")
WHERE [MP-Ref] = Form![MP-Ref] And [Cat No] =  "'" & [Cat No] & "'"; 
```

# sml - 添加自定义数据类型的 ML 函数

> ID：13054432
> 
> 赞同：1
> 
> 时间：2012-10-24T17:23:22.570
> 
> 标签：sml, smlnj, ml

所以我得到了这个：

```
datatype intnest = INT of int
                    | LIST of intnest list; 
```

我被告知要编写一个函数来将 intnest 中的所有整数相加。一个问题是我真的不明白 intnest 可能是什么。你能给我一个有效的内嵌的例子吗？

我需要一些东西来检查我写的方法，我尝试的任何东西都不会被接受。

我尝试过诸如：

```
val in1 = [1,2,3,[1,2,3]];
val in2 = [1,2,3,[1]]; 
```

等等......所以如果你能给我一个例子，它会很有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:31:17.233

这个想法是使用从基本案例开始的构造函数来构建值。例如，我们有这样的构造函数`INT of int`：

*   `INT 1`是类型`intnest`
*   `INT 2`是类型`intnest`
*   `INT 3`是类型`intnest`

将三个值放入一个列表中，您`[INT 1, INT 2, INT 3]`的类型为`intnest list`. 现在看第二个构造函数`LIST of intnest list`，你可以很容易地看到

`LIST [INT 1, INT 2, INT 3]`是一个`intnest`。

重复该过程，您还可以：

*   `[INT 1, INT 2, INT 3, LIST [INT 1, INT 2, INT 3]]`是一个`intnest list`
*   `LIST [INT 1, INT 2, INT 3, LIST [INT 1, INT 2, INT 3]]`是一个`intnest`

# java - 在 EhCache 中，是否可以在所有缓存上默认启用统计信息？

> ID：13054435
> 
> 赞同：4
> 
> 时间：2012-10-24T17:23:35.400
> 
> 标签：java, monitoring, ehcache

我目前正在为一个由许多不同的小模块组成的应用程序编写一些监控代码，其中许多模块都使用了 EhCache。我的目标是从应用程序中的每个缓存中收集有关命中率、缓存内容等的统计信息。但是，我在实现此功能时遇到了一些麻烦，因为启用统计信息是 EhCache 中的一个可选功能。我正在寻找一种以自动方式为所有缓存启用统计信息的方法，以便维护不同模块的开发人员不必总是记住启用它们。

我可以在 JavaDocs 中找到最接近的东西（但这仍然不起作用）：

```
cacheManager.getDefaultCacheConfiguration().setStatisticsEnabled(true); 
```

*该方法调用仅*启用默认缓存的统计信息，而其余缓存不会受到影响。

我的另一个想法是包装 CacheManager 以拦截创建缓存的调用并自动将它们加入统计信息。不幸的是，CacheManager 是一个类而不是一个接口，因此这样的解决方案需要大量代码并且很脆弱——每次随着 EhCache 的发展添加/删除公共方法时，我都必须更新我的子类。

有没有人遇到过类似的问题？如果是这样，您是如何解决的？非常感谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-24T16:11:54.640

在创建缓存后的某个时间点，您可以执行以下操作：

```
for (CacheManager manager : CacheManager.ALL_CACHE_MANAGERS) {
  for (String name : manager.getCacheNames()) {
    manager.getCache(name).getCacheConfiguration().setStatistics(true);
  }
} 
```

当然，您需要添加错误检查。

如果您有动态创建的缓存，则可以使用缓存管理器事件侦听器（请参阅[文档](http://ehcache.org/documentation/apis/cachemanager-event-listeners)）。基本上你必须通过扩展来创建一个工厂`CacheManagerEventListenerFactory`，然后通过实现来创建实际的监听器`CacheManagerEventListener`。侦听器可能如下所示：

```
public class StatisticsEnabledCacheManagerListener implements CacheManagerEventListener {
  public void notifyCacheAdded(String cacheName) {
    CacheManager.getInstance().getCache(cacheName).getCacheConfiguration().setStatistics(true);
  }

  public void notifyCacheRemoved(String cacheName) {}
} 
```

要向 Ehcache 注册工厂，请将其添加到 ehcache.xml：

```
<cacheManagerEventListenerFactory class="com.example.cache.MyListenerFactory" properties=""/> 
```

需要注意的是，如果您将默认缓存设置为启用统计信息，那么您动态创建的任何缓存都将默认启用统计信息，除非创建缓存的任何内容专门将其关闭。

# javascript - 流星路线和自动订阅

> ID：13054436
> 
> 赞同：1
> 
> 时间：2012-10-24T17:23:37.560
> 
> 标签：javascript, meteor, router

查看“故事”时，我希望自动订阅该故事并在更改页面时更改订阅的故事。

这就是我得到的：它似乎有效，但多个自动订阅似乎是错误的？

```
route("stories/:storytitle/:storyID", function(storyTitle, storyID) {
  Session.set('storyID', storyID)
  Meteor.autosubscribe(function() {
    var storyID = Session.get('storyID');
    if (storyID)
      Meteor.subscribe("story", Session.get("storyID"), function() {
        Router.goto('story')
      });
  });
});

Template.story.data = function() {
  var storyID = Session.get('storyID');
  var story = Stories.findOne({
    _id: storyID
  })
  return story;
}; 
```

这似乎更符合我一般寻找的内容，但有大量的样板。将查询放入路由而不是仅将其放在模板助手中似乎也是错误的。

```
route("stories/:storytitle/:storyID", function(storyTitle, storyID) {
  Session.set('storyID', storyID)
  var story = Stories.findOne({
    _id: storyID
  })
  if (story)
    Router.goto('story')
});

Meteor.autosubscribe(function() {
  var storyID = Session.get('storyID');
  if (storyID)
    Meteor.subscribe("story", Session.get("storyID"), function() {
      Router.goto('story')
    });
});

Template.story.data = function() {
  var storyID = Session.get('storyID');
  var story = Stories.findOne({
    _id: storyID
  })
  return story;
}; 
```

这些中的任何一个都是正确的方法吗？如何保持故事的自动订阅，并在我更改页面时自动更改订阅？

直觉上我会试试这个：

```
route("stories/:storytitle/:storyID", function(storyTitle, storyID) {
  Session.set('storyID', storyID)
  Router.goto('story')
});

Meteor.autosubscribe(function() {
  var storyID = Session.get('storyID');
  if (storyID)
    Meteor.subscribe("story", Session.get("storyID"), function() {
      Router.goto('story')
    });
}); 
```

这根本行不通。它会在故事加载并引发白屏/错误之前尝试转到故事路线。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T21:21:52.593

第三种方法是正确的，尽管第二种方法有它的好处，如果你想在没有找到故事的情况下路由到其他地方（例如 404）。一些注意事项：

1.  为了避免第三种方法的错误，只需确保（在您的模板中）处理`findOne`不返回任何内容的情况。您应该期望在数据从服务器完全加载之前看到这一点；数据准备好后，模板将重新渲染。

2.  在第二种情况下，在您的路线中放置查询没有任何问题，但请注意，它最初很可能会返回 null。您需要将代码包装在反应式上下文中，以便在数据准备好时重新执行。您可能想使用我的[反应式路由器](https://github.com/tmeasday/meteor-router)来实现这一点，或者只是复制该技术。

    这样您就不需要`onReady`在订阅中使用回调。（实际上，在任何一种情况下都不需要这样做）。

3.  第一种技术绝对不是正确的方法:)

4.  如果您确实想在故事不存在的情况下路由到 404，则应等到数据加载完毕，请参阅：[https ://github.com/tmeasday/unofficial-meteor-faq#how-do-i-know -当我的订阅准备好但尚未加载时](https://github.com/tmeasday/unofficial-meteor-faq#how-do-i-know-when-my-subscription-is-ready-and-not-still-loading)

# java - 应该如何维护序列化对象？

> ID：13054441
> 
> 赞同：3
> 
> 时间：2012-10-24T17:24:10.283
> 
> 标签：java, serialization, io, version

我正在创建一个可序列化的对象描述符，它将存储非可序列化实体的重要状态数据。如何在应用程序升级期间保持旧描述符有效？我正在考虑打开所有已知的先前状态（升级时）并提示状态自行升级。也许通过：

```
void onUpgrade(int oldVersion, int newVersion, int updateFlags); 
```

但我不知道这是否是可序列化维护的好方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:33:28.843

我会为您的外部代表建议另一种形式。正如您已经指出的，序列化对象很难保持兼容。最简单的做法是使用 jaxb 注释来注释您的对象，然后使用 Jaxb 读取/写入它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T21:40:40.223

对象版本控制的难度通常被夸大了。最棒的是一开始就知道你能做什么和不能做什么。仔细查看 Object Serialization 规范的 Object Versioning 部分中的规则，并认真**遵循它们**：

*   不要改变继承；
*   不要更改任何字段的数据类型；
*   限制自己添加和减去字段；
*   并且*永远不要*更改serialVersionUID。

如果这还不够，请准备好使用 writeReplace()/readResolve() 机制和/或 serializableFields 机制。

# symfony - Symfony2 嵌套表单和多对多关系

> ID：13054442
> 
> 赞同：0
> 
> 时间：2012-10-24T17:24:16.930
> 
> 标签：symfony, many-to-many, nested-forms

我正在尝试处理一个对我来说非常复杂的表格......

我们有收藏，其中包含书籍 (OneToMany)、文章 (OneToMany) 及其作者 (ManyToMany)。

用户可以编辑一本书：他可以添加或删除一篇文章，并为每篇文章添加或删除一些作者。有嵌套形式：书籍>文章>作者。如果作者是集合中的新作者，则会为该集合创建它。

实体描述看起来不错，数据库由控制台生成并且看起来一致。

如果我不必与使用书籍版本表格的作者打交道，这很好用。如果作者存在，我有一个重复的条目错误。如果作者是新人，我有一个“显式持久化新实体或在关系上配置级联持久化操作”的错误。

这是代码：

```
public function onSuccess(Book $book)
{   
    $this->em->persist($book);

    foreach($book->getArticles() as $article)  
    {
        $article->setUrlname($this->mu->generateUrlname($article->getName()));
        $article->setBook($book);

        // Saving (and creating) the authors of the book
        foreach ($this->collectionWithAuthors->getAuthors() as $existAuthor){      
            foreach($article->getAuthors() as $author) {                        
                $authorUrlname=$this->mu->generateUrlname($author->getFirstname().' '.$author->getLastname());
                if ( $existAuthor->getUrlname() ==  $authorUrlname) { // The author is existing
                    $article->addAuthor($existAuthor);
                    $this->em->persist($existAuthor);
                }else{                                                // New Author
                    $newAuthor = new Author();                                
                    $newAuthor->setCollection($this->collectionWithBaseArticles);
                    $newAuthor->setLastname($author->getLastname());
                    $newAuthor->setFirstname($author->getFirstname());
                    $newAuthor->setUrlname($authorUrlname);
                    $this->em->persist($newAuthor);
                    $article->addAuthor($newAuthor);                          
                }
            }
        }
        $this->em->persist($article);

    }
    $this->em->flush();

} 
```

我不知道如何使用级联。但是 $article->addAuthor() 应该调用 $authors->addArticle()：

文章实体摘录

```
/**
* @ORM\ManyToMany(targetEntity="bnd\myBundle\Entity\Author", mappedBy="articles")
*/
private $authors;

/**
 * Add authors
 *
 * @param bnd\myBundle\Entity\Author $authors
 * @return Article
 */

public function addAuthor(\bnd\myBundle\Entity\Author $authors)
{
    $this->authors[] = $authors;
    $authors->addArticle($this);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:19:52.863

foreach 语句中的逻辑是错误的。假设我们有下一位作者：

1.  持续作者（collectionWithAuthors）：
    *   约翰
    *   埃里克
2.  提交的作者
    *   艾达
    *   埃里克

因此，对于每个现有作者（John 和 Eric），脚本会通过新作者循环：

```
foreach ([John, Eric] as $author) {
    foreach([Ada, Eric] as $newAuthor) {
        // John author: the script persist Ada(right) and Eric(wrong) as new authors
        // Eric author: the script persist Ada(wrong), but not Eric(right)
    }
} 
```

解决办法是用现有作者替换文章作者（如果有类似的话）

```
foreach ($article->getAuthors() as $key => $articleAuthor) {
    $authorUrlname=$this->mu->generateUrlname($articleAuthor->getFirstname().' '.$articleAuthor->getLastname());
    $foundAuthor = false;
    // Compare article author with each existing author
    foreach ($this->collectionWithAuthors->getAuthors() as $existAuthor) { 
        if ($existAuthor->getUrlname() ==  $authorUrlname) {
            $foundAuthor = true;
            break; // It has found similar author no need to look further
        }
    }

    // Use $existAuthor as found one, otherwise use $articleAuthor
    if ($foundAuthor) {
        $article->removeAuthor($articleAuthor); // Remove submitted author, so he wont be persisted to database
        $article->addAuthor($existAuthor);
    } else {
        // Here you dont need to create new author                          
        $articleAuthor->setCollection($this->collectionWithBaseArticles);
        $articleAuthor->setUrlname($authorUrlname);
    }

    ...
}

$this->_em->persist($article); 
```

您已经注意到我从循环中删除了任何持久的作者，为了持久保存这些作者，最好在文章实体类的 $authors 注释中设置 cascade={'persist'}

```
/**
 * @ORM\ManyToMany(targetEntity="Author", cascade={"persist"})
 * @ORM\JoinTable(...)
 */
protected $authors; 
```

**升级版：**

我忘了提到关于级联持久性的一件事。要保持文章和作者之间的关系，您还必须添加与作者实体的关系。编辑实体中的`addAuthor()`方法`Article`如下：

```
public function addAuthor(Author $author)
{
    // Only add author relation if the article does not have it already
    if (!$this->authors->contains($author)) {
        $this->authors[] = $author;
        $author->addArticle($this);
    }
} 
```

此外，最好在构造函数中为实体集合定义默认值：

```
use Doctrine\Common\Collections\ArrayCollection;

// ...

public function __construct()
{
    $this->authors = new ArrayCollection();
} 
```

# facebook-graph-api - Windows 8 Metro 应用程序 Facebook 集成

> ID：13054444
> 
> 赞同：0
> 
> 时间：2012-10-24T17:24:19.310
> 
> 标签：facebook-graph-api, windows-8, facebook-c#-sdk

当我在 facebook 开发者网站上注册我的应用程序时，可以选择如何将您的应用程序与 Facebook 集成。我应该为 Windows 8 Metro 风格应用选择哪一款？我只看到“带有 facebook 登录的网站”、“Facebook 上的应用”、“移动网络”、“原生 iOS 应用”、“原生 Android 应用”和“页面标签”。我尝试选择“使用 Facebook 登录的网站”，但在这种情况下，我应该为网站 URL 填写什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T00:34:36.743

仅当您将 设置为`redirect_uri`除`https://www.facebook.com/connect/login_success.html`.

# php - Sphinx：保持索引是最新的。实时索引与实时索引更新

> ID：13054446
> 
> 赞同：0
> 
> 时间：2012-10-24T17:24:22.887
> 
> 标签：php, mysql, sphinx

我真的不知道两者之间有什么区别，所以我不知道每当对数据库进行更改时我需要即时刷新我的索引。这就是我想要的：让我的搜索功能保持最新，直到最后一次更改。任何人都可以帮助我吗？

如果有帮助，我将使用 MySQL 进行持久性，使用 PHP 来使用 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:53:02.213

原则是 main 是父索引，而 delta 是子索引。这两个一起工作。

Main 创建了巨大的索引，而 Delta 只是一个只有新记录的小索引。使用您需要创建的 MySql 表，您需要注意主索引索引的最后一个 id。

增量在该 MySql 表中进行查找，以查看它需要从哪里获取新记录（如果 id 大于上一个，则它是一个新文档）。使用命令行，您可以运行 indexer 来合并 main+delta，delta 将清除他的索引（删除添加到主索引的文档），使其保持快速和小。

主增量模式可以处理（几乎是实时的）INSERT、UPDATE 和 DELETE

# c# - 带有可移植类库的部分类

> ID：13054449
> 
> 赞同：1
> 
> 时间：2012-10-24T17:24:27.577
> 
> 标签：c#, partial-classes, portable-class-library

我已经将一个类库移植到 Portable Class Library，这个 Portable 类库在服务器代码、WPF 应用程序和 Silverlight 之间共享，到目前为止一切顺利

在移植之前，我在 Silverlight 项目中有一个部分类来支持仅与该应用程序相关的自定义属性，但现在我无法创建带有属性的部分类。

如果我这样做，VS 只会获取部分类中定义的属性，而不是可移植类中定义的属性。

所以问题是：是否可以将 Partial 类与 Portable 类库一起使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T17:29:09.453

您不能从不同的程序集中扩展类。*部分类仅适用于正在构建的程序集中*单个类的多个片段。听起来这个类现在在一个单独的 dll 中：你不能通过部分类扩展它。

也许改为封装类。

# gcc - 无法使用 CMake 指定编译器

> ID：13054451
> 
> 赞同：49
> 
> 时间：2012-10-24T17:24:39.120
> 
> 标签：gcc, cmake, mingw

我有这个`CMakeLists.txt`文件的问题：

```
cmake_minimum_required(VERSION 2.6)

SET(CMAKE_C_COMPILER C:/MinGW/bin/gcc)
SET(CMAKE_CXX_COMPILER C:/MinGW/bin/g++)

project(cmake_test)

add_executable(a.exe test.cpp) 
```

用: 调用 cmake`cmake -G "MinGW Makefiles"`失败，输出如下：

```
c:\Users\pietro.mele\projects\tests\buildSystem_test\cmake_test>cmake -G "MinGW Makefiles" .
-- The C compiler identification is GNU 4.6.1
-- The CXX compiler identification is GNU 4.6.1
-- Check for working C compiler: C:/MinGW/bin/gcc
CMake Error: your C compiler: "C:/MinGW/bin/gcc" was not found.   Please set CMAKE_C_COMPILER to a valid compiler path or name.
CMake Error: Internal CMake error, TryCompile configure of cmake failed
-- Check for working C compiler: C:/MinGW/bin/gcc -- broken
CMake Error at C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/CMakeTestCCompiler.cmake:52 (MESSAGE):
  The C compiler "C:/MinGW/bin/gcc" is not able to compile a simple test
  program.

CMake will not be able to correctly generate this project.
Call Stack (most recent call first):
CMakeLists.txt:10 (project)

CMake Error: your C compiler: "C:/MinGW/bin/gcc" was not found.   Please set CMAKE_C_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: "C:/MinGW/bin/g++" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
-- Configuring incomplete, errors occurred! 
```

但是`gcc`编译器在`C:/MinGW/bin/`里面并且可以工作。

任何想法？

平台：

*   Windows 7的
*   MinGW/GCC 4.6

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-10-26T15:17:32.967

切勿尝试在`CMakeLists.txt`文件中设置编译器。

请参阅 CMake 常见问题解答，了解如何使用不同的编译器：

[https://gitlab.kitware.com/cmake/community/wikis/FAQ#how-do-i-use-a-different-compiler](https://gitlab.kitware.com/cmake/community/wikis/FAQ#how-do-i-use-a-different-compiler)

（请注意，您正在尝试方法＃3，并且常见问题解答说“（避免）”......）

我们建议避免使用“in the CMakeLists”技术，因为当第一次配置使用不同的编译器时，它会出现问题，然后 CMakeLists 文件会更改以尝试设置不同的编译器......而且因为 CMakeLists 文件的意图根据运行 CMake 的开发人员的偏好，应该使用多个编译器。

最好的方法是在构建树中第一次调用 CMake 之前设置环境`CC`变量`CXX`。

在 CMake 检测到要使用的编译器后，它将它们保存在`CMakeCache.txt`文件中，以便即使这些变量从环境中消失，它仍然可以生成正确的构建系统......

如果您需要更改编译器，则需要从新的构建树开始。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-08-08T22:56:18.583

我和 Pietro 有类似的问题，

我在 Window 10 上并使用“Git Bash”。我试图执行 >>cmake -G "MinGW Makefiles"，但我得到了与 Pietro 相同的错误。

然后，我尝试了 >>cmake -G "MSYS Makefiles"，但意识到我需要正确设置我的环境。

确保将路径设置为 C:\MinGW\msys\1.0\bin 并检查那里是否有 gcc.exe。如果 gcc.exe 不存在，那么您必须运行 C:/MinGW/bin/mingw-get.exe 并从 MSYS 安装 gcc。

之后它对我来说很好

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-12-31T10:00:52.427

使用 with`FILEPATH`选项可能有效：

```
set(CMAKE_CXX_COMPILER:FILEPATH C:/MinGW/bin/gcc.exe) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-27T22:19:19.787

我遇到过同样的问题。就我而言，修复非常简单。诀窍是简单地将“.exe”添加到您的编译器路径中。所以，而不是：

```
SET(CMAKE_C_COMPILER C:/MinGW/bin/gcc) 
```

它应该是

```
SET(CMAKE_C_COMPILER C:/MinGW/bin/gcc.exe) 
```

这同样适用于 g++。

# eclipse - Eclipse Appengine 项目：“所需项目中存在错误”但调试或运行时没有红色

> ID：13054462
> 
> 赞同：3
> 
> 时间：2012-10-24T17:25:03.497
> 
> 标签：eclipse, google-app-engine

我的顶级项目目录一直有一个红色图标，告诉我有问题。但是，我的文件都没有标记为红色，这表明我没有任何错误。

当我执行运行或调试时，我收到“所需项目中存在错误”的通知。尽管如此，我还是继续进行，并且我的项目按预期工作。在我的错误日志中，我观察到当调试/运行启动时，收到此错误：“！ENTRY com.google.gdt.eclipse.core 4 0 2012-10-24 12:59:50.251 !MESSAGE 无法更改启动配置文件的权限”

我的 appengine-web.xml 和 web.xml 文件位于正确的位置，并且 appengine-web.xml 具有对 logging.properties 的正确引用，但在控制台上我看到“信息：通过 com. google.apphosting.utils.jetty.JettyLogger”被打印出来。

我的 logging.properties 文件只有这个： .level = WARNING 并且我的 WEB-INF/classes 目录中有一个 log4j.properties 文件，其中包含标准的“Google Plugin for Eclipse”-生成的 log4j.properties 文件。

**我很想了解两件事：1）如何将 JettyLogger 更改为实际上不为空，以打印到控制台。2) 为什么我的项目一直告诉我存在错误，而我在项目的执行中看不到这方面的证据？**

还有一些事情：我的项目在 JRE6 上运行，使用 Appengine sdk 1.7.2，并且项目成功部署到 Appspot。

最初，我一直在使用 JRE7。当我发现我需要使用 JRE6 时，我卸载了 JRE7，将 JRE6 添加到我的构建路径中，**并清理了我的项目**。我检查了我的 WEB-INF/classes 目录文件的时间戳，以确保项目正在重建。我怀疑与此 JRE 更改有关的原因是原因，但清理项目并没有解决问题。

这个项目在 Git 源代码控制下，使用 EGit 插件。

感谢您的时间，耐心阅读我的详细帖子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T22:34:02.493

事实证明，我的项目的方面仍然设置为 1.7。

[http://www.coderanch.com/t/465060/vc/Eclipse-Dynamic-Web-Project-Java](http://www.coderanch.com/t/465060/vc/Eclipse-Dynamic-Web-Project-Java)

# spring - Spring MVC @Controller 中的 @Autowired 不适用于私有字段

> ID：13054466
> 
> 赞同：2
> 
> 时间：2012-10-24T17:25:12.933
> 
> 标签：spring, spring-mvc

我在一个非常精简的 XML 应用程序中有一个 Spring MVC 控制器，我们使用了很多注释和尽可能少的配置。控制器正在工作，它还注入了许多资源值。但是我用这个控制器经历了一个非常奇怪的行为；不会注入引用其他组件的带注释的私有字段。这行不通。

```
@Controller
public class EntranceUnitController {

    @Value("${remote.baseUrl}")
    private String baseUrl = "http://localhost";

    @Value("${remote.port}")
    private String pushPort = "8080";

    @Autowired
    private HttpClientFactory httpClientFactory;

    ... 
```

似乎在`httpClientFactory`设置私有字段时还没有，如果我设置一个断点来检查`null`创建控制器时当然设置的值。

但是，如果我为组件创建一个 setter 并注释 set-method 而不是私有字段，则控制器按预期工作。

```
@Controller
public class EntranceUnitController {

    @Value("${remote.baseUrl}")
    private String baseUrl = "http://localhost";

    @Value("${remote.port}")
    private String pushPort = "8080";

    private HttpClientFactory httpClientFactory;

    @Autowired
    public void setHttpClientFactory(HttpClientFactory httpClientFactory) {
        this.httpClientFactory = httpClientFactory;
    }

    ... 
```

对我来说，这真的很烦人。无论注入点，注释值的自动接线注入是否同时发生？即为什么用setter注入对象很重要？我认为私有字段注入直接跟在构造和设置器之后，我开始认为在这种情况下我错了......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T20:47:52.617

似乎您的依赖项实际上已被注入，您只是在错误的时刻（为时过早）放置了一个断点，并且尚未注入依赖*项*，尽管已经创建了类。

请记住，除非您使用构造函数注入，否则可以使用注入依赖项的第一个地方是`@PostConstruct`方法：

```
@Controller
public class EntranceUnitController {

    @Autowired
    private HttpClientFactory httpClientFactory;

    @PostConstruct
    public void init() {
        httpClientFactory  //should not be null
    } 
```

# android - Android RSS 提要，Eclipse。奇怪的例外

> ID：13054472
> 
> 赞同：3
> 
> 时间：2012-10-24T17:25:21.597
> 
> 标签：android, rss-reader

我已经搜索了很多帖子，但找不到我的错误。我正在尝试获取一个示例 RSS 提要阅读器，以了解它是如何工作的。如果有人有更好的例子，请随时链接。感谢您的时间。日志猫：

```
10-24 16:06:47.360: I/ActivityManager(91): Start proccom.example.example.android.Rssfeed for activity com.example.example.android.Rssfeed/.MainActivity: pid=544 uid=10041 gids={3003}        
10-24 16:06:47.390: I/WindowManager(91): createSurface Window{413cf2f8 Starting com.example.example.android.Rssfeed paused=false}: DRAW NOW PENDING
10-24 16:06:47.551: W/NetworkManagementSocketTagger(91): setKernelCountSet(10041, 1) failed with errno -2
10-24 16:06:48.370: I/WindowManager(91): createSurface Window{4163f540 com.example.example.android.Rssfeed/com.example.example.android.Rssfeed.MainActivity paused=false}: DRAW NOW PENDING
10-24 16:06:48.450: D/gralloc_goldfish(544): Emulator without GPU emulation detected.
10-24 16:06:48.520: I/ActivityManager(91): Displayed com.example.example.android.Rssfeed/.MainActivity: +1s257ms
10-24 16:06:48.940: W/InputManagerService(91): Starting input on non-focused client   com.android.internal.view.IInputMethodClient$Stub$Proxy@415c36a8 (uid=10009 pid=352)
10-24 16:06:48.980: D/dalvikvm(186): GC_CONCURRENT freed 64K, 15% free 13713K/16071K, paused 33ms+15ms
10-24 16:06:49.079: W/NetworkManagementSocketTagger(91): setKernelCountSet(10009, 0) failed with errno -2
10-24 16:06:49.929: D/dalvikvm(186): GC_FOR_ALLOC freed 1375K, 16% free 13617K/16071K, paused 54ms
10-24 16:06:50.049: D/dalvikvm(186): GC_CONCURRENT freed 647K, 19% free 13061K/16071K, paused 5ms+11ms
10-24 16:06:50.439: D/AndroidRuntime(544): Shutting down VM
10-24 16:06:50.439: W/dalvikvm(544): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
10-24 16:06:50.459: E/AndroidRuntime(544): FATAL EXCEPTION: main
10-24 16:06:50.459: E/AndroidRuntime(544): java.lang.IllegalStateException: Could not find a method parseRss(View) in the activity class com.example.example.android.Rssfeed.MainActivity for onClick handler on view class android.widget.Button with id 'readRss'
10-24 16:06:50.459: E/AndroidRuntime(544):  at android.view.View$1.onClick(View.java:3026)
10-24 16:06:50.459: E/AndroidRuntime(544):  at android.view.View.performClick(View.java:3480)
10-24 16:06:50.459: E/AndroidRuntime(544):  at android.view.View$PerformClick.run(View.java:13983)
10-24 16:06:50.459: E/AndroidRuntime(544):  at android.os.Handler.handleCallback(Handler.java:605)
10-24 16:06:50.459: E/AndroidRuntime(544):  at android.os.Handler.dispatchMessage(Handler.java:92)
10-24 16:06:50.459: E/AndroidRuntime(544):  at android.os.Looper.loop(Looper.java:137)
10-24 16:06:50.459: E/AndroidRuntime(544):  at android.app.ActivityThread.main(ActivityThread.java:4340)
10-24 16:06:50.459: E/AndroidRuntime(544):  at java.lang.reflect.Method.invokeNative(Native Method)
10-24 16:06:50.459: E/AndroidRuntime(544):  at java.lang.reflect.Method.invoke(Method.java:511)
10-24 16:06:50.459: E/AndroidRuntime(544):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-24 16:06:50.459: E/AndroidRuntime(544):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-24 16:06:50.459: E/AndroidRuntime(544):  at dalvik.system.NativeStart.main(Native Method)
10-24 16:06:50.459: E/AndroidRuntime(544): Caused by: java.lang.NoSuchMethodException: parseRss [class android.view.View]
10-24 16:06:50.459: E/AndroidRuntime(544):  at java.lang.Class.getConstructorOrMethod(Class.java:460)
10-24 16:06:50.459: E/AndroidRuntime(544):  at  java.lang.Class.getMethod(Class.java:915)
10-24 16:06:50.459: E/AndroidRuntime(544):  at android.view.View$1.onClick(View.java:3019)
10-24 16:06:50.459: E/AndroidRuntime(544):  ... 11 more
10-24 16:06:50.501: W/ActivityManager(91):   Force finishing activity com.example.example.android.Rssfeed/.MainActivity
10-24 16:06:50.519: W/WindowManager(91): Failure taking screenshot for (180x300) to layer 21015
10-24 16:06:50.639: I/WindowManager(91): createSurface Window{415c26e8  paused=false}: DRAW NOW PENDING
10-24 16:06:50.889: I/ARMAssembler(36): generated scanline__00000077:03515104_00008001_00000000 [113 ipp] (134 ins) at [0x41c99450:0x41c99668] in 797599 ns
10-24 16:06:51.033: W/ActivityManager(91): Activity pause timeout for ActivityRecord{414aae20 com.example.example.android.Rssfeed/.MainActivity}
10-24 16:06:51.059: W/NetworkManagementSocketTagger(91): setKernelCountSet(10009, 1) failed with errno -2
10-24 16:06:51.129: D/AccountManagerService(91): bind attempt failed for Session: expectLaunch true, connected false, stats (0/0/0), lifetime 0.001, addAccount, accountType com.google, requiredFeatures null
10-24 16:06:51.159: I/WindowManager(91): createSurface Window{414b2ff0 com.android.contacts/com.android.contacts.activities.PeopleActivity paused=false}: DRAW NOW PENDING
10-24 16:06:51.219: E/AccountPromptUtils(352): Account setup error: Authenticator experienced an I/O problem
10-24 16:06:51.879: W/NetworkManagementSocketTagger(91): setKernelCountSet(10041, 0) failed with errno -2
10-24 16:06:51.879: I/dalvikvm(91): Jit: resizing JitTable from 4096 to 8192
10-24 16:06:53.709: I/Process(544): Sending signal. PID: 544 SIG: 9
10-24 16:06:54.029: I/ActivityManager(91): Process com.example.example.android.Rssfeed (pid 544) has died.
10-24 16:06:54.029: I/WindowManager(91): WIN DEATH: Window{4163f540 com.example.example.android.Rssfeed/com.example.example.android.Rssfeed.MainActivity paused=false}
10-24 16:07:01.924: W/ActivityManager(91): Activity destroy timeout for ActivityRecord{414aae20 com.example.example.android.Rssfeed/.MainActivity}
10-24 16:07:18.002: D/ExchangeService(438): Received deviceId from Email app: androidc259148960
10-24 16:07:18.002: D/ExchangeService(438): Reconciling accounts...
10-24 16:07:30.529: W/ThrottleService(91): unable to find stats for iface rmnet0
10-24 16:09:00.190: D/dalvikvm(91): GC_CONCURRENT freed 480K, 9% free 12125K/13319K, paused 6ms+10ms
10-24 16:11:40.999: D/dalvikvm(171): GC_CONCURRENT freed 456K, 6% free 10349K/10951K, paused 5ms+5ms
10-24 16:17:30.540: W/ThrottleService(91): unable to find stats for iface rmnet0: E/(): Device disconnected 
```

实际代码

```
package com.example.example.android.Rssfeed;

import java.util.List;

import android.annotation.SuppressLint;
import android.app.ListActivity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class ReadRssFeed extends ListActivity {
    private ParseTask parseTask;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        // StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()
        // .detectAll().penaltyLog().penaltyDeath().build());
        // StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder().detectAll()
        // .penaltyLog().penaltyDeath().build());

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        parseTask = (ParseTask) getLastNonConfigurationInstance();
        if (parseTask != null) {
            parseTask.setActivity(this);
        }
        ArrayAdapter<RssItem> adapter = new ArrayAdapter<RssItem>(this,
                R.layout.rowlayout, android.R.id.text1, RssAplication.list);
        RssAplication application = (RssAplication) getApplication();
        setListAdapter(adapter);
    }

    public void parseRss(View view) {
        Log.e("DEBUG", "parseRss");
        if (parseTask == null) {
            parseTask = new ParseTask(this);
            parseTask
                    .execute(new String[] { "http://www.beaufortcountynow.com/rss.php" });
        }

    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        Toast.makeText(this, "Clicked", Toast.LENGTH_LONG).show();
    }

    private static class ParseTask extends
            AsyncTask<String, Void, List<RssItem>> {
        private ReadRssFeed activity;

        private ParseTask(ReadRssFeed activity) {
            setActivity(activity);
        }

        public void setActivity(ReadRssFeed activity) {
            this.activity = activity;
            Log.d("DEBUG", "ParseTask's activity: " + activity);
        }

        @Override
        protected List<RssItem> doInBackground(String... params) {
            Log.d("DEBUG", "doInBackground");
            return FeedReader.parse(params[0], activity);
        }

        @Override
        protected void onPostExecute(List<RssItem> list) {
            Log.w("DEBUG", "onPostExecute called");
            finishWithText(list);
        }

        @SuppressLint("NewApi")
        private void finishWithText(List<RssItem> list) {
            String text = String.valueOf(list.size());
            Log.d("DEBUG", "ParseTask done. Updating activity: " + activity
                    + ", message: " + text);
            if (activity != null) {
                activity.parseTask = null;

                TextView textView = (TextView) activity
                        .findViewById(R.id.textViewCount);
                textView.setText(text);
                @SuppressWarnings("unchecked")
                ArrayAdapter<RssItem> adapter = (ArrayAdapter<RssItem>) activity
                        .getListAdapter();
                adapter.clear();
                adapter.addAll(list);
                RssAplication.list = list;
            }
        }
    }

    @Override
    public Object onRetainNonConfigurationInstance() {
        if (parseTask != null) {
            return parseTask;
        }
        return super.onRetainNonConfigurationInstance();
    }

    @Override
    protected void onDestroy() {
        if (parseTask != null) {
            parseTask.setActivity(null);
        }
        super.onDestroy();
    }
} 
```

还有几个 .java 文件，但这是一个引发错误的文件，以及

```
package com.example.example.android.Rssfeed;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

好的，按照建议进行了第 3 次。新错误、发布代码和日志猫。非常感谢您的快速响应！

```
 package com.example.example.android.Rssfeed;

  import java.util.List;

 import android.annotation.SuppressLint;
 import android.app.ListActivity;
 import android.os.AsyncTask;
 import android.os.Bundle;
 import android.util.Log;
 import android.view.View;
 import android.widget.ArrayAdapter;
 import android.widget.ListView;
 import android.widget.TextView;
 import android.widget.Toast;

 public class MainActivity extends ListActivity {

private ParseTask parseTask;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    // StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()
    // .detectAll().penaltyLog().penaltyDeath().build());
    // StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder().detectAll()
    // .penaltyLog().penaltyDeath().build());

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    parseTask = (ParseTask) getLastNonConfigurationInstance();
    if (parseTask != null) {
        parseTask.setActivity(this);
    }
    ArrayAdapter<RssItem> adapter = new ArrayAdapter<RssItem>(this,
            R.layout.rowlayout, android.R.id.text1,              RssAplication.list);
    RssAplication application = (RssAplication) getApplication();
    setListAdapter(adapter);
}

public void parseRss(View view) {
    Log.e("DEBUG", "parseRss");
    if (parseTask == null) {
        parseTask = new ParseTask(this);
        parseTask
                .execute(new String[] { "http://www.beaufortcountynow.com/rss.php" });
    }

}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    Toast.makeText(this, "Clicked", Toast.LENGTH_LONG).show();
}

private static class ParseTask extends
        AsyncTask<String, Void, List<RssItem>> {
    private MainActivity activity;

    private ParseTask(MainActivity activity) {
        setActivity(activity);
    }

    public void setActivity(MainActivity activity) {
        this.activity = activity;
        Log.d("DEBUG", "ParseTask's activity: " + activity);
    }

    @Override
    protected List<RssItem> doInBackground(String... params) {
        Log.d("DEBUG", "doInBackground");
        return FeedReader.parse(params[0], activity);
    }

    @Override
    protected void onPostExecute(List<RssItem> list) {
        Log.w("DEBUG", "onPostExecute called");
        finishWithText(list);
    }

    @SuppressLint("NewApi")
    private void finishWithText(List<RssItem> list) {
        String text = String.valueOf(list.size());
        Log.d("DEBUG", "ParseTask done. Updating activity: " + activity
                + ", message: " + text);
        if (activity != null) {
            activity.parseTask = null;

            TextView textView = (TextView) activity
                    .findViewById(R.id.textViewCount);
            textView.setText(text);
            @SuppressWarnings("unchecked")
            ArrayAdapter<RssItem> adapter = (ArrayAdapter<RssItem>) activity
                    .getListAdapter();
            adapter.clear();
            adapter.addAll(list);
            RssAplication.list = list;
        }
    }
}

@Override
public Object onRetainNonConfigurationInstance() {
    if (parseTask != null) {
        return parseTask;
    }
    return super.onRetainNonConfigurationInstance();
}

@Override
protected void onDestroy() {
    if (parseTask != null) {
        parseTask.setActivity(null);
    }
    super.onDestroy();
}
   } 
```

日志猫：

```
 10-26 12:53:26.224: D/dalvikvm(539): Not late-enabling CheckJNI (already on)
 10-26 12:53:27.254: D/AndroidRuntime(539): Shutting down VM
 10-26 12:53:27.264: W/dalvikvm(539): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
 10-26 12:53:27.274: E/AndroidRuntime(539): FATAL EXCEPTION: main
 10-26 12:53:27.274: E/AndroidRuntime(539): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.example.android.Rssfeed/com.example.example.android.Rssfeed.MainActivity}: java.lang.ClassCastException: android.app.Application cannot be cast to com.example.example.android.Rssfeed.RssAplication
 10-26 12:53:27.274: E/AndroidRuntime(539):     at  android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
  10-26 12:53:27.274: E/AndroidRuntime(539):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
 10-26 12:53:27.274: E/AndroidRuntime(539):     at android.app.ActivityThread.access$600(ActivityThread.java:122)
 10-26 12:53:27.274: E/AndroidRuntime(539):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
 10-26 12:53:27.274: E/AndroidRuntime(539):     at android.os.Handler.dispatchMessage(Handler.java:99)
 10-26 12:53:27.274: E/AndroidRuntime(539):     at android.os.Looper.loop(Looper.java:137)
 10-26 12:53:27.274: E/AndroidRuntime(539):     at android.app.ActivityThread.main(ActivityThread.java:4340)
 10-26 12:53:27.274: E/AndroidRuntime(539):     at java.lang.reflect.Method.invokeNative(Native Method)
 10-26 12:53:27.274: E/AndroidRuntime(539):     at java.lang.reflect.Method.invoke(Method.java:511)
 10-26 12:53:27.274: E/AndroidRuntime(539):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
 10-26 12:53:27.274: E/AndroidRuntime(539):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
 10-26 12:53:27.274: E/AndroidRuntime(539):     at dalvik.system.NativeStart.main(Native Method)
 10-26 12:53:27.274: E/AndroidRuntime(539): Caused by: java.lang.ClassCastException: android.app.Application cannot be cast to com.example.example.android.Rssfeed.RssAplication
 10-26 12:53:27.274: E/AndroidRuntime(539):     at com.example.example.android.Rssfeed.MainActivity.onCreate(MainActivity.java:36)
 10-26 12:53:27.274: E/AndroidRuntime(539):     at  android.app.Activity.performCreate(Activity.java:4465)
 10-26 12:53:27.274: E/AndroidRuntime(539):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
  10-26 12:53:27.274: E/AndroidRuntime(539):    at      android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
 10-26 12:53:27.274: E/AndroidRuntime(539):     ... 11 more
 10-26 12:58:27.543: I/Process(539): Sending signal. PID: 539 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:31:12.013

此 LogCat 的重要信息是：

```
java.lang.IllegalStateException: Could not find a method parseRss(View) 
    in the activity class com.example.example.android.Rssfeed.MainActivity 
    for onClick handler on view class android.widget.Button with id 'readRss' 
```

**解释**

`MainActivity`找不到该方法`parseRss()`，因为它在`ReadRssFeed`类中。

您将相同的布局传递给两个活动，这有点令人困惑......但是在里面`activity_main.xml`你使用了属性`android:onClick="parseRss"`。*要求*提供的名称与 Activity 中显示布局的方法相关。正如我之前所说，没有，因此错误。 [`android:onClick`](http://developer.android.com/reference/android/view/View.html#attr_android%3aonClick) *`MainActivity``parseRss()`*

 ***可能的解决方案**

1.  创建两个布局，一个特定于`MainActivity`（不带`android:onClick="parseRss"`），另一个用于`ReadRssFeed` **Or**
2.  以某种方式添加`parseRss()`到 `MainActivity`，形状或形式**或**
3.  由于`MainActivity`当前什么都不做，您可以将其删除并重命名`ReadRssFeed`为`MainActivity`...

* * *

**读取 LogCat**

而不是为您阅读每个 logcat 并逐步引导您到正在运行的应用程序（这不是本论坛的目的。）我将教您如何阅读大多数 logcat，以便您自己解决许多这些问题。

1.  找到最低的“由...引起”

    ```
    10-26 12:53:27.274: E/AndroidRuntime(539): Caused by: java.lang.ClassCastException: android.app.Application cannot be cast to com.example.example.android.Rssfeed.RssAplication 
    ```

    这大致意味着您正在尝试将一个对象投射到它无法成为的东西中。我们密切关注使用 Application 对象的代码。

2.  逐行处理 logcat，直到遇到来自某个类的代码。（这里是第一行。）

    ```
    10-26 12:53:27.274: E/AndroidRuntime(539):     at com.example.example.android.Rssfeed.MainActivity.onCreate(MainActivity.java:36) 
    ```

    这会告诉您代码失败的包、类和方法。最有用的部分是 end `MainActivity.java:36`，这个数字是发生错误的确切行号。

3.  转到 MainActivity 中的第 36 行（在 Eclipse中使用`Ctrl`+ ）。`L`这条线是罪魁祸首：

    ```
    RssAplication application = (RssAplication) getApplication(); 
    ```

    然而，这就是我的用处停止的地方。你还没有发布你的 RssAplication 课程，所以我看不到发生了什么。我的第一个问题是：RssAplication 是否扩展了应用程序？

* * *

如果此答案解决了您的原始问题，请单击复选标记。此外，在您认为有用的任何答案上单击向上箭头也很不错。

如果您遇到更多无法解决的问题，请提出新问题。祝你好运！*

# php - 事实会话数据存储

> ID：13054473
> 
> 赞同：-2
> 
> 时间：2012-10-24T17:25:22.383
> 
> 标签：php, jquery, mysql, session, cookies

我注意到有很多技术用于存储临时会话数据（不知道它是如何正确调用的。例如：

饼干

jQuery.data()

html5存储

PHP 会话

可能还有很多其他人。

在网站页面之间传输临时用户数据（如购物车信息或某些变量/数组）的最安全且最不依赖浏览器设置（如禁用的 cookie）的方式是什么？

Cookies 看起来很简单，但用户可以禁用它们，如果有的话，我想找到一种更可靠的方法。用户注册是，“登录”目前不是一个选项。

为此目的还有哪些其他技术/方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:39:32.323

服务器端存储。

jquery、cookies 或 html5 存储的问题是用户可以修改数据，并且根据用户运行代码的平台/浏览器/设备组合，它可能会产生意想不到的结果。

# php - Codeigniter - 获取相关数据行作为结构/对象，而不是数组

> ID：13054474
> 
> 赞同：1
> 
> 时间：2012-10-24T17:25:25.293
> 
> 标签：php, codeigniter, codeigniter-datamapper

我是 CodeIgniter 的新手。

我为比萨表和配料表创建了模型。表由附加的 Pizza_Ingredients 表连接（它的多对多关系）。

我的模型：

```
<?php

class Pizza extends DataMapper {

    var $table = 'Pizza';

    var $has_many = 
        array(
        'ingredients' => 
            array(
            'class' => 'ingredients',
            'join_table' => 'pizza_ingredients'
            )
        );
}

class Ingredients extends DataMapper {

    var $table = 'Ingredients';
    var $has_many = 
        array(
            'pizza' => 
                array(
                'class' => 'pizza',
                'join_table' => 'pizza_ingredients'
             )
        );
}

?> 
```

当我使用该代码获取数据时：

```
$pm = new Pizza();
$pm->include_related('ingredients');
$array = $pm->get(); 
```

我正在获取具有重复 Pizza 值的数组（它看起来只是 sql 查询结果）。

```
margherita    | cheese
vegetariana   | vegetable 1
vegetariana   | vegetable 2 
```

我不能像这样在数组的“foreach”中简单地生成 html 表。

我想得到对象，它的结构如下：

```
margherita:
 - cheese

vegetariana:
 - vegetable 1
 - vegetable 2 
```

这使我可以在“披萨循环”内与其他 foreach 循环（带配料）一起制作 foreach 循环（带比萨饼）。

我必须用 PHP 写这个，或者 CodeIgniter/DataMapper 可以为我做更多的事情吗？

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T01:09:22.183

我只是停留在同一个答案...

所以，搜索 CI Datamapper DOC，我发现了一些有用的东西（http://datamapper.wanwizard.eu/pages/getadvanced.html），看看第一个例子！

翻译成你的问题，应该是这样的：

```
 // Create pizza

    $pm = new Pizza();

    // DO NOT USE include_related to Ingredients Here !!!
    //Datamapper will DO THIS for you!
    // Remember to declare your Ingredients class in singular, not plural
    // So your class should be in singular -> Ingredient
    // And your DB Table should be in plural -> Ingredients
    // As CI Datamapper Guide teaches :)

    // Get all pizzas

    $pm->get();

    // Loop through all pizzas

    foreach ($pm as $pizza)
    {

    // Print the actual pizza name

            echo $pizza->name."<br/>";

            // Get the current pizza's Ingredients  <- Here is the magic comes!

            $pizza->ingredient->get();

            // Print all current pizza's Ingredients

            foreach ($pizza->ingredient as $ingredient)
            {
                    echo $ingredient->name."<br/>";
            }
    } 
```

这对我来说效果很好，但它会继续多次访问数据库，实际上，你的数据库包含的每个披萨一次。

如果使用 CI Datamapper 的某些解决方案对 DB 的请求更少，我真的很感激。

找到了请分享！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:18:29.260

为什么不使用中间表来分解多对多关系。似乎更容易管理。喜欢：

```
TABLE pizza_ingredients
   id
   pizza_id
   ingredient_id 
```

然后你可以尝试这样的事情：

```
foreach($pizzas as $pizza)
    $pizza->ingredients = $this->get_ingredients($pizza->id); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-25T05:52:35.117

您可以设置一个变量，即您当前正在吃的披萨，并在下一次迭代中检查它。您的格式和其他内容会有所不同，但这会给您一个想法。

```
foreach ($pizza as $k=>$p) {
    if ($last_pizza === $p->pizza) {
        echo "<tr>
            <td>
            </td>
        </tr>
        <tr>
            <td>
                $p->cheese
            </td>
        </tr>";
        $last_pizza = $p->pizza;
    }else{
        echo "<tr>
            <td>
                $p->pizza
            </td>
        </tr>
        <tr>
            <td>
                $p->cheese
            </td>
        </tr>";
        $last_pizza = $p->pizza;
    }
} 
```

# javascript - 如何将图像排列为具有可变列数的网格？

> ID：13054479
> 
> 赞同：0
> 
> 时间：2012-10-24T17:25:48.653
> 
> 标签：javascript

我目前有一个 HTML 页面，其中包含垂直顺序的图像和一些文本。

```
<div>
 <img src="img/img1.jpg"/>
 Dr. XYZ
</div>

<div>
 <img src="img/img1.jpg"/>
 Dr. XYZ
</div>

<div>
 <img src="img/img1.jpg"/>
 Dr. XYZ
</div> 
```

我想做的是将图像排列成网格。我知道如果我想创建带有两列的网格，我可以使用带有两列的表格。

但是，我不想对此进行硬编码？是否有另一种方法使用 Javascript/CSS 只拥有一堆`div`s 然后将它们排列为具有任意列数的网格，这样我每次想要更改网格数时就不必重新构建整个页面.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:35:26.860

您可以更改以下内容以网格状模式显示它们

```
<div style"display:inline-block; float:left">
    <img src="img/img1.jpg"/>
    Dr. XYZ
</div> 
```

然后，您可以通过更改包含带有图像的 DIV 的 DIV 的宽度来控制行数。

```
<div id="container" style="width:500px">
    <div style"display:inline-block; float:left">
        <img src="img/img1.jpg"/>
        Some text 1
    </div>
    <div style"display:inline-block; float:left">
        <img src="img/img2.jpg"/>
        Some text 2
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:34:29.873

是的你可以; 这是一个例子：

```
<div class="parent">
   <div class="item">
     <img src="img/img1.jpg"/>
     Dr. XYZ
   </div>
   <div class="item">
     <img src="img/img1.jpg"/>
     Dr. XYZ
   </div>
   <div class="item">
     <img src="img/img1.jpg"/>
     Dr. XYZ
   </div>
   ....
   <div class="clear"></div>
</div> 
```

你的CSS：

```
.parent {
   width:900px; /** Just an example **/
}
.clear {
   clear:both;
}

.item {
    float:left;
    width:150px; /** Just an example **/
    margin:3px;
} 
```

现在您的带有图像的 div 将全部位于 150px 宽的列中

# c# - 更新的最佳方法 使用共享函数的两个常用函数

> ID：13054481
> 
> 赞同：2
> 
> 时间：2012-10-24T17:25:58.233
> 
> 标签：c#, .net

如果您需要测试来自另一个项目的非公共属性，Microsoft 单元测试向导会创建 Accessor 对象。在我的单元测试中，我创建了辅助函数，这样我就不会在每个单元测试方法中重复相同的代码。目前我有两个几乎相同的测试，除了一个采用标准公共对象，另一个采用 Accessor 版本。由于访问器基于公共对象，我应该能够拥有一个功能。我曾假设我可以使用泛型来完成一个简单的演员表。但在[发布问题](https://stackoverflow.com/questions/12998916/update-two-common-functions-to-use-generics)后，我发现需要做更多的工作，包括必须更新底层对象。我的问题是另一种方法可以将这些冗余方法减少到只有一个使用强制转换（或另一种）方法的功能？

以下是现有的两个功能：

```
// Common function to create a new test record with standard Account object
internal static void CreateAccount(out Account account, bool saveToDatabase)
{
    DateTime created = DateTime.Now;
    string createdBy = _testUserName;

    account = new Account(created, createdBy);

    account.Notes = Utilities.RandomString(1000);

    if (saveToDatabase)
        account.Create();
}

// Common function to create a new test record with Account_Accessor
internal static void CreateAccount(out Account_Accessor account, bool saveToDatabase)
{
    DateTime created = DateTime.Now;
    string createdBy = _testUserName;

    account = new Account_Accessor(created, createdBy);

    account.Notes = Utilities.RandomString(1000);

    if (saveToDatabase)
        account.Create();
} 
```

我有两打这样的单元测试，真实对象平均有 10 个属性，我在这里简化了示例。

这是单元测试 API 创建的访问器代码（再次，我已将其缩减以简化示例）：

```
using Microsoft.VisualStudio.TestTools.UnitTesting;
using System;
using System.Collections.ObjectModel;
using System.Data;

namespace NameHere.Bll
{
    [Shadowing("NameHere.Bll.Account")]
    public class Account_Accessor : ProjectBase_Accessor<Account>
    {
        protected static PrivateType m_privateType;

        public Account_Accessor(PrivateObject value);
        [Shadowing(".ctor@2")]
        public Account_Accessor(DateTime created, string createdBy);

        [Shadowing("_notes")]
        public string _notes { get; set; }

        public static Account_Accessor AttachShadow(object value);

        [Shadowing("Create@0")]
        public override void Create();
    }
}

using Microsoft.VisualStudio.TestTools.UnitTesting;
using System;
using System.ComponentModel;
using System.Linq.Expressions;

namespace NameHere.Bll
{
    [Shadowing("NameHere.Bll.ProjectBase`1")]
    public class ProjectBase_Accessor<T> : BaseShadow, INotifyPropertyChanged
    {
        protected static PrivateType m_privateType;

        public ProjectBase_Accessor(PrivateObject value);

        [Shadowing("Created")]
        public DateTime Created { get; set; }
        public static PrivateType ShadowedType { get; }

        [Shadowing("add_PropertyChanged@1")]
        public void add_PropertyChanged(PropertyChangedEventHandler value);
        public static ProjectBase_Accessor<T> AttachShadow(object value);

        [Shadowing("Create@0")]
        public virtual void Create();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:48:12.037

问题是即使访问器类公开了与它所隐藏的类相同的方法和属性，但访问器和原始类之间没有公共接口。Account_Accessor 继承自 BaseShadow，Account 继承自其他东西。就编译器而言，它们是完全不相关的类型，不兼容赋值，因此很难将每个类型的实例传递到公共例程中。

如果您可以强制 Account_Accessor 类实现同样由 Account 实现的接口类型，那么您可以将每个实例的实例传递给以接口类型作为参数的函数。像这样：

```
internal static IAccount SetupAccount(IAccount account, bool saveToDatabase)
{
// do account setup here - not construction
}

// to call: construct instance, then pass to common function
var account = new Account(a, b);
SetupAccount(account, true); 
```

如果 Account 实例的构造足够复杂以至于您也希望有一个通用例程，请将特定类型的包装器放在通用函数前面：

```
internal static IAccount CreateAccount(bool saveToDatabase)
{
    var account = new Account(a,b);
    return SetupAccount(account, saveToDatabase);
}

internal static IAccount CreateAccountAccessor(bool saveToDatabase)
{
    var account = new Account_Accessor(a,b);
    return SetupAccount(account, saveToDatabase);
} 
```

你无法逃避的一点是：某个地方的某个人必须承诺要构造哪个实例。即使您将其归结为传递类型和使用`Activator.CreateInstance()`，也必须有人承诺选择要使用的类型。

一旦构造了实例，并且两种类型都实现了一个通用接口，那么所有需要关心的通用功能就是通用接口。

# c - 这个表达式是如何计算的？（另外，它是什么？）

> ID：13054484
> 
> 赞同：2
> 
> 时间：2012-10-24T17:26:01.857
> 
> 标签：c

我在微控制器附带的头文件中找到了这个语句，但不知道如何评估它

```
#define FIO0SET        (*(volatile unsigned long *)(FIO_BASE_ADDR + 0x18)) 
```

我完全不知道这个表达是什么，所以我没有办法开始任何有意义的研究。谁能告诉我这只野兽是什么或如何评估它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T17:28:11.377

```
#define FIO0SET  (*(volatile unsigned long *)(FIO_BASE_ADDR + 0x18)) 
```

转到内存地址`FIO_BASE_ADDR + 0x18`并检索存储在该位置的 32 位（如果`unsigned long`是 32 位）字。`FIO0SET`也是一个可修改的左值，因此您可以为其分配一个值。

请注意，`volatile`限定符用于通知编译器对象的值可以以它未知的方式更改。以输入模式下的 IO 寄存器为例：它的值可能会意外改变，编译器不能假设它的值在读取后没有改变。

例如：

```
unsigned long register_value;

register_value = FIO0SET; // store FIO0SET in register_value object 
```

或者

```
FIO0SET = 0x1122334;      // store 0x1122334 value in FIO0SET register 
```

# vb.net - 如何在不导致异常的情况下测试项目是否存在于 Telerik 网格中

> ID：13054485
> 
> 赞同：0
> 
> 时间：2012-10-24T17:26:03.387
> 
> 标签：vb.net, telerik, telerik-grid

我有一个绑定到自定义对象集合的 rad 网格，有时我会抓取这样的行索引：

```
e.Item.ItemIndexHierarchical 
```

稍后，当我想检索该项目（如果它仍然存在）时，我使用它：

```
gvAgendaItems.Items(HierarchicalIndexKey) 
```

问题是有时该项目不再存在 - 我对此表示满意 - 但我想优雅地跳过正在处理它可以找到的项目的代码部分。就目前而言，使用不再有效的键搜索项目会引发异常，因此我不能只检查结果项目是否为空。

如何在不引发异常的情况下测试 HierarchicalIndexKey 是否仍然有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:07:33.343

我在 Telerik 文档中没有看到任何优雅的方法来做到这一点（不幸的是，只留下了生硬/低效的方法）。

您可以遍历项目并匹配`HierarchicalIndexKey`每个项目的`ItemIndexHierarchical`：

```
int i = 0;
bool bIndexExists = false;
GridDataItem item = null;

for (i = 0; i <= gvAgendaItems.Items.Count - 1; i++) {
    bIndexExists = gvAgendaItems.Items(i).ItemIndexHierarchical == HierarchicalIndexKey;
    if (bIndexExists) {
        item = gvAgendaItems.Items(HierarchicalIndexKey);
        break;
    }
} 
```

您可以将其包装在一个`Try/Catch`块中，然后默默地失败。

```
GridDataItem item = null;

try {
    item = gvAgendaItems.Items(HierarchicalIndexKey);
} catch (Exception ex) {
    //fail silently without throwing an exception.
} 
```

对于较小的数据源，循环将更有效，而对于较大的数据源，包装将更有效（断点是循环遍历集合比引发异常所需的时间更多）。

希望我有一个更好的答案，但我希望这会有所帮助。

# excel - 在 Excel 中复制范围时出现运行时错误 6

> ID：13054486
> 
> 赞同：2
> 
> 时间：2012-10-24T17:26:04.373
> 
> 标签：excel, vba, copy-paste

我正在创建一个宏来将多个工作表连接成一个。由于每个工作表都有不同数量的行，我尝试使用 .end(xlDown) 对其进行动态设置。目前，子遇到很多错误：最初它们是对象错误，当我修复它们时，我得到了堆栈溢出运行时错误 6。将变量从整数更改为 Long 并没有解决问题，现在我只得到一个“ 400" 错误。

这是代码：

```
Sub Concatenate()
    'Declare Variables
    Dim Curwb As Workbook

    'Set Variables
    Set Curwb = ActiveWorkbook

       'Concatenate Data
       'Timestamps
        Dim Stage1Count As Long
        Dim Stage2Count As Long
        Dim Stage3Count As Long
        Dim Stage4Count As Long
        Dim Stage5Count As Long
        Dim TotalCount As Long
            'Stage 1
                Curwb.Sheets("Stage 1").Select
                If Range("A3").End(xlDown).Address = Range("A3").Address Then
                    Range("A3").Copy Destination:=Curwb.Sheets _
("CombinedData").Range("A3")
                Else
                Range("A3", Range("A3").End(xlDown)).Select
                    Stage1Count = Selection.Cells.Count
                    Selection.Copy Destination:=Curwb.Sheets _
("Combined Data").Range("A3")
                End If
            'Stage 2
                Curwb.Sheets("Stage 2").Select
                If Range("A3").End(xlDown).Address = Range("A3").Address Then
                    Range("A3").Copy Destination:=Curwb.Sheets _
("Combined Data").Range("A3").Offset(Stage1Count, 0)
                Else
                Range("A3", Range("A3").End(xlDown)).Select
                    Stage2Count = Selection.Cells.Count
                    Selection.Copy Destination:=Curwb.Sheets _
("Combined Data").Range("A3").Offset(Stage1Count, 0)
                End If
End Sub 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:43:03.423

有几点可以帮助：

1) 避免使用`.Select`,`ActiveWorkbook`等`ActiveSheet`。

2）`.End(xlDown)`如果你去最后一行并使用`.End(xlUp)`它而不是 using ，它将更有效地获得你最后使用的行。

3) 使用已声明为变量的工作表也更容易。

我已经对您的代码进行了调整，这大大缩短了它，应该可以让您完成您所追求的。

```
Sub Concatenate()

'Declare Variables
Dim Curwb As Workbook

'Set Variables
Set Curwb = Workbooks("NameOfWorkbook") 'Avoid ActiveWorkbook at all cost :)

Dim ws As Worksheet, wsCopyTo As Worksheet
Dim rng As Range

With Curwb

    Set ws = .Sheets("Stage 1")
    Set wsCopyTo = .Sheets("Combined Data")

    With ws

        Set rng = .Range(.Range("A3"), .Range("A" & .Rows.Count).End(xlUp))
        rng.Copy wsCopyTo.Range("A" & wsCopyTo.Rows.Count).End(xlUp).Offset(1)

    End With

    Set ws = .Sheets("Stage 2")
    With ws

        Set rng = .Range(.Range("A3"), .Range("A" & .Rows.Count).End(xlUp))
        rng.Copy wsCopyTo.Range("A" & wsCopyTo.Rows.Count).End(xlUp).Offset(1)

    End With

End Sub 
```

# shopify - 我可以将 Shopify 平台用作身份提供者吗？

> ID：13054499
> 
> 赞同：2
> 
> 时间：2012-10-24T17:26:52.683
> 
> 标签：shopify

我很好奇是否有办法使用经过身份验证的 Shopify 用户的 Web 会话将身份验证委托给自定义 Shopify 应用程序？我正在寻找的行为类似于 OpenID，其中 Shopify 充当 OpenID 提供者，而我的自定义应用程序充当依赖方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:25:02.983

不幸的是，您不能将客户帐户用作身份提供者。

您可以做的是让他们使用与您网站上使用的电子邮件相同的电子邮件登录您的应用程序，然后使用电子邮件作为密钥提取他们的所有信息（假设您对所述电子邮件进行了正确的注册激活以确认所有权）

# excel - 范围矩阵 A1:Q38 来自 1400 个文件并在新工作簿行 A1 中列为单列，然后是行 A2 等

> ID：13054500
> 
> 赞同：1
> 
> 时间：2012-10-24T17:26:55.073
> 
> 标签：excel, vba

1400 个单独的 Excel 文件需要从 A1:Q38 范围内逐行获取每个文件中的所有数据。需要按照每个原始行的顺序将这些数据放在单个列列表中。需要读取行 A1:Q1 并写入 A1:A17 然后读取 A2:Q2 并写入 A18:A34 继续直到读取每个文件。需要新工作簿中的数据。如果可能，希望忽略将空单元格写入新列表。以下代码将在一个工作表中完成工作。需要它以编程方式处理 1400 个文件。

```
Sub readvalues()

row2 = 1
For Row = 1 To 38
For col = 1 To 17
READCELL = Worksheets("sheet1").Cells(Row, col).Value
Worksheets("sheet2").Cells(row2, 1) = READCELL
row2 = row2 + 1
Next col
Next Row

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:45:01.803

您需要使用的称为`Transpose`. `PasteSpecial`允许您使用转置单元格进行粘贴。（行变成列，列变成行，就像在矩阵中一样）

```
Dim targetWorkbook As Workbook
Dim rowCount As Integer
rowCount = 1

Set targetWorkbook = Workbooks.Add
Application.DisplayAlerts = False
targetWorkbook.SaveAs Filename:="C:/MyData/TransposedRow" & rowCount

ActiveSheet.UsedRange.Cells.Copy
targetWorkbook.Sheets(1).Cells.PasteSpecial Transpose:=True
Application.CutCopyMode = False

rowCount = rowCount + 1 
```

# jquery - TextArea中的jQuery字符串替换

> ID：13054503
> 
> 赞同：1
> 
> 时间：2012-10-24T17:27:13.930
> 
> 标签：jquery, regex

在用户输入他们的内容后，我试图在 textarea 中进行字符串替换，但我没有尝试过任何工作。任何帮助将不胜感激。这就是我所在的位置：

```
<textarea id="field_id_29"></textarea>

$("#field_id_29").bind("change keyup input",function(){
     var text = $("#field_id_29").val();
     text = text.replace(/source/g,"www")
     $("#field_id_29").val(text);
}); 
```

我需要用 www 替换www **-** **source**。

 **jsFiddle 在这里：http: [//jsfiddle.net/6RNY2/](http://jsfiddle.net/6RNY2/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T17:30:35.440

试试这个，

```
$("#field_id_29").change(function(){
    var text = $(this).val();
    var regexp = /www-source/gi;
    if ( text.match(regexp) ){      
        text = text.replace(/www-source/g,"www");
        return $(this).val(text);
    }
    return false;
}); 
```

当字段更改时，我们获取值，将 if 与正则表达式进行比较，如果匹配，我们替换文本并完成，否则我们就返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T17:29:42.233

[jsfiddle](http://jsfiddle.net/6RNY2/10/)

```
 $("#field_id_29").bind("change keyup input",function(){    
            this.value= this.value.replace(/www-source/g,"www");                 
        });
​ 
```

**注意：**函数内部 this 是 textarea 的引用，因此您可以直接使用 this.value 而不是使用 id 访问 textarea 值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T17:33:24.227

试试这个，

**[现场演示](http://jsfiddle.net/6RNY2/12/)**

```
[$("#field_id_29").bind("keyup", function() {
    var text = $(this).val();
    text = text.replace(/source/g, "www")
    $(this).val(text);
});​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T17:30:37.403

您的代码有效，您只需要在 jsfiddle 中使用 jQuery 而不是 Mootools，可能也只需使用**change**事件，以便它仅在 textarea 更新后替换文本**

# javascript - 当元素在触发器之外时，Javascript 出现问题

> ID：13054509
> 
> 赞同：0
> 
> 时间：2012-10-24T17:27:39.657
> 
> 标签：javascript, jquery

我试图在单击锚点时显示 div，问题是锚点位于元素内部，而需要显示的 div 位于该元素之外。页面上有同一个类的多个 div，所以我只想显示关联的一个。

标记是：

```
<div class="wrapper">
  <div class="trigger">
    <a href="#" class="change">Change</a>
  </div>
  <div class="content">
    <p>Content to be shown when Change is clicked</p>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:30:50.883

那是你想做的吗？（[小提琴](http://jsfiddle.net/FGgDc/)）

```
// dom ready
$(function() {
  $('a.change').on('click', function() {
    // wrapper div
    $(this).parent()
        .next() // .content div
        .show();
    return false; // prevent the link to be followed
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:31:54.000

使用 jQuery，您可以这样做：

```
$('a.change').click(function(e) {
    e.preventDefault();
    $(this).parent().next().toggle();
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/fhmDT/1/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T17:32:21.553

到达父母并获得正确的div，例如

```
$('a.change').click(function(event){
    event.preventDefault();
    $(this).parents('.wrapper').children('.content').show()
} 
```

这样您就不必担心锚点嵌入的深度，或者内容（之前、之后）与锚点相关的位置

添加了一个 jsFiddle，显示具有不同结构的 div，使用相同的代码

[http://jsfiddle.net/NWqcq/11/](http://jsfiddle.net/NWqcq/11/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T17:35:47.733

你是这个意思吗？

```
$(".content").hide();
$("a.change").click(function(){    
      $(".content",$(this).closest(".wrapper")).show();
}); 
```

现场演示：​</p>

[http://jsfiddle.net/dfkge/](http://jsfiddle.net/dfkge/)

# security - Inkscape 的 --vacuum-defs 是否使 SVG 真正安全？

> ID：13054510
> 
> 赞同：3
> 
> 时间：2012-10-24T17:27:49.527
> 
> 标签：security, svg

我们正在考虑允许用户在我们的网络应用程序中上传 SVG。由于我们知道不受信任的 SVG 中存在大量复杂漏洞，我们之前一直犹豫是否要这样做。一位同事发现了 Inkscape 的 --vacuum-defs 选项，并认为它可以使所有不受信任的 SVGS 安全处理。

根据手册页，该选项“从 SVG 文件的部分中删除所有未使用的项目。如果此选项与 --export-plain-svg 一起调用，则只有导出的文件会受到影响。如果单独使用，指定的文件将被原地修改。” 但是，根据我的同事的说法，“脚本被删除，XML 转换被删除，畸形是不能容忍的，编码被删除了，外部导入被删除了。

这是真的？如果是这样，是否足以让我们放心接受不受信任的 SVG？我们还应该做其他预处理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T20:16:33.950

据我了解，提供不受信任的 SVG 的主要问题是 SVG 文件可以包含 Javascript。这对于 SVG 来说是显而易见的，因为嵌入的 javascript 是格式的一部分，但如果浏览器不小心，每种类型的上传文件都会发生这种情况。

因此，即使现代浏览器不执行 <img> 标签中的脚本，以防万一我认为最好在不附加 cookie/auth 的情况下提供来自不同域的图像，这样任何执行的脚本都不会泄露用户数据。这将是我首先关心的问题。

当然，如果用户下载了 SVG，然后从桌面打开它，碰巧用浏览器打开它，它可能会执行潜在的恶意加载。回到最初的问题，--export-plain-svg 确实删除了脚本，但由于我不知道其他 SVG 特定的漏洞，所以我没有检查它们。

# java - 在 hashmap 中存储 String 数据类型时，是否有任何减少内存使用的技巧？

> ID：13054511
> 
> 赞同：1
> 
> 时间：2012-10-24T17:27:52.760
> 
> 标签：java, string, hashmap

我需要在地图中存储值对（单词和数字）。

我正在尝试使用`TObjectIntHashMap`Trove 库`char[]`中的密钥，因为我需要尽量减少内存使用量。但是使用这种方法，我在使用`get()`方法时无法获取值。
我想我不能使用原始字符数组来存储在 Map 因为哈希码问题。

我尝试使用`TCharArrayList`，但这也需要很多内存。
我阅读了另一个与我的目的相似的stackoverflow问题，并建议使用`TLongIntHashMap`，将字符串字的编码值存储为长数据类型。在这种情况下，我的单词可能包含拉丁字符或维基百科集合中出现的各种其他字符，我不知道 Long 是否足以进行编码。

我曾尝试使用 Trie 数据结构来存储它，但我还需要考虑我的性能，并为内存使用和性能选择最佳的。

您对这个问题有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:32:09.200

听起来最紧凑的数据存储方式是使用`byte[]`编码的`UTF-8`或类似的。您可以将其包装在您自己的类中或编写您自己的 HashMap ，它允许 byte[] 作为键。

我会重新考虑花费多少时间来节省一些内存。如果您谈论的是 PC 或服务器，以最低工资计算，您需要为一个小时的工作节省 1 GB，所以如果您只想节省 100 MB，包括测试在内大约需要 6 分钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:00:09.070

编写您自己的实现 的类`CharSequence`，并编写您自己的`equals()`和实现`hashcode()`。该实现还将预先分配大型共享`char[]`存储，并一次使用它的一部分。（您绝对可以将@Peter Lawrey 的出色建议也纳入其中，并使用`byte[]`存储。）

还有机会使用 LRU 缓存执行“软实习生（）”。我已经注意到缓存的去向。

这是我的意思的简单演示。请注意，如果您需要大量并发写入，您可以尝试改进下面的锁定方案...

```
public final class CompactString implements CharSequence {
  private final char[] _data;
  private final int _offset;
  private final int _length;
  private final int _hashCode;

  private static final Object _lock = new Object();
  private static char[] _storage;
  private static int _nextIndex;

  private static final int LENGTH_THRESHOLD = 128;

  private CompactString(char[] data, int offset, int length, int hashCode) {
    _data = data; _offset = offset; _length = length; _hashCode = hashCode;
  }

  private static final CompactString EMPTY = new CompactString(new char[0], 0, 0, "".hashCode());

  private static allocateStorage() {
    synchronized (_lock) {
      _storage = new char[1024];
      _nextIndex = 0;
    }
  }

  private static CompactString storeInShared(String value) {
    synchronized (_lock) {
      if (_nextIndex + value.length() > _storage.length) {
        allocateStorage();
      }
      int start = _nextIndex; 
      // You would need to change this loop and length to do UTF encoding.
      for (int i = 0; i < value.length(); ++i) {
        _storage[_nextIndex++] = value.charAt(i);
      }
      return new CompactString(_storage, start, value.length(), value.hashCode());
    }
  }

  static {
    allocateStorage();
  }

  public static CompactString valueOf(String value) {
    // You can implement a soft .intern-like solution here.
    if (value == null) {
      return null;
    } else if (value.length() == 0) {
      return EMPTY;
    } else if (value.length() > LENGTH_THRESHOLD) {
      // You would need to change .toCharArray() and length to do UTF encoding.
      return new CompactString(value.toCharArray(), 0, value.length(), value.hashCode());
    } else {
      return storeInShared(value);
    }
  }

  // left to reader: implement equals etc.
} 
```

# ios - 在 iOS 上将 CIImage 渲染为 OpenGL ES 2.0 纹理

> ID：13054512
> 
> 赞同：6
> 
> 时间：2012-10-24T17:27:54.227
> 
> 标签：ios, opengl-es, opengl-es-2.0, core-image

有人知道如何通过 iOS 上的 EAGL CIContext 中的 drawImage:inRect:fromRect: 将 CIImage 直接渲染到 OpenGL ES 2.0 纹理中吗？通过 createCGImage:fromRect: 通过普通 CIContext 渲染然后通过 GLKTextureLoader 加载图像对我来说太慢了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T14:14:16.347

有一个 Wwdc 会议恰好涵盖了这一点。2012 年第 511 届会议（接近尾声）。基本上你想要做的是：

- 创建输出纹理

- 使输出纹理成为帧缓冲区的目标

-将纹理帧缓冲区绑定为输出而不是屏幕

- 现在使用 drawImage: inRect: fromRect: 直接写入纹理。

# c++ - MongoDb使用C++驱动创建稀疏索引

> ID：13054515
> 
> 赞同：2
> 
> 时间：2012-10-24T17:27:58.943
> 
> 标签：c++, mongodb, indexing, mongo-cxx-driver

有没有办法使用 MongoDb (2.2) C++ 驱动程序创建[稀疏索引？](http://www.mongodb.org/display/DOCS/Indexes#Indexes-sparse%3atrue)

该`ensureIndex`函数似乎不接受此参数。来自[MongoDb 文档](http://api.mongodb.org/cplusplus/current/classmongo_1_1_d_b_client_with_commands.html#a9ead4325128f007743900cbb416eade7)：

```
bool mongo::DBClientWithCommands::ensureIndex(  
                          const string &    ns,
                          BSONObj   keys,
                          bool  unique = false,
                          const string &    name = "",
                          bool  cache = true,
                          bool  background = false,
                          int   v = -1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:18:36.263

就此而言，[`dropDups`](http://www.mongodb.org/display/DOCS/Indexes#Indexes-dropDups%3Atrue)也不是一个论点......

作为一种解决方法，您可以自己构建服务器命令并附加`sparse`参数。如果您点击[此链接](https://github.com/mongodb/mongo/blob/master/src/mongo/client/dbclient.cpp#L1078)，您会注意到服务器命令由构建 a 组成，`BSONObject`并且各种索引选项作为字段附加。编写自己的`ensureIndex`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T10:13:09.810

我最终修补了 Mongo 源代码（`mongo/cleint/dbclient.cpp`）：

```
bool DBClientWithCommands::ensureIndex( const string &ns , BSONObj keys , bool unique, const string & name , bool cache, bool background, int version, bool sparse ) {
    BSONObjBuilder toSave;
    toSave.append( "ns" , ns );
    toSave.append( "key" , keys );

    string cacheKey(ns);
    cacheKey += "--";

    if ( name != "" ) {
        toSave.append( "name" , name );
        cacheKey += name;
    }
    else {
        string nn = genIndexName( keys );
        toSave.append( "name" , nn );
        cacheKey += nn;
    }

    if( version >= 0 )
        toSave.append("v", version);

    if ( unique )
        toSave.appendBool( "unique", unique );

    if ( sparse )
        toSave.appendBool( "sparse", true );

    if( background )
        toSave.appendBool( "background", true );

    if ( _seenIndexes.count( cacheKey ) )
        return 0;

    if ( cache )
        _seenIndexes.insert( cacheKey );

    insert( Namespace( ns.c_str() ).getSisterNS( "system.indexes"  ).c_str() , toSave.obj() );
    return 1;
} 
```

该问题应在版本 2.3.2中[解决](https://jira.mongodb.org/browse/SERVER-7464)

# actionscript-3 - 如何检测闪存中的硬件加速问题？

> ID：13054516
> 
> 赞同：1
> 
> 时间：2012-10-24T17:27:59.000
> 
> 标签：actionscript-3, flash, fullscreen, hardware-acceleration

当我在 as3 中使用全屏时，应用程序会全屏打开，但它完全空白。在其他计算机上一切正常。我努力搜索，发现有时硬件加速会引发这种情况。我手动关闭了硬件加速（通过右键单击 Flash 应用程序 > 设置上的菜单），应用程序正确地开始全屏工作。

如果客户端打开了硬件加速并且应用程序向他显示白屏，我怎么能检测到？如果有其他方式解决这个问题的可能性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T05:58:52.343

对于视频硬件加速，您应该使用`VideoStage`该类。因此，如果您可以获得`StageVideo`该类的实例，则可以使用硬件加速。如何获取[此处描述](http://help.adobe.com/en_En/as3/dev/WSe9ecd9e6b89aefd2-68d5ef8f12cc8511f6c-7ffe.html)的此实例。

# android - 防止视图中的密度缩放

> ID：13054519
> 
> 赞同：0
> 
> 时间：2012-10-24T17:28:20.110
> 
> 标签：android, view, scaling

我有 480x800 分辨率和 1,5 密度的模拟器。因此，当我在视图中显示任何分辨率为 320x50 的广告（admob、madvertise）时，它会缩放到 480 x 75。

这就是布局的样子 - 广告视图通过代码添加到 LinearLayout（id adsholder）中：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.sbcgames.sbcengine.SBCGLView
        android:id="@+id/sbcglview"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/adsholder"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:orientation="vertical" >
    </LinearLayout>
</FrameLayout> 
```

有什么方法可以防止结垢吗？我想保留原始像素尺寸而不是 idp。我试图将其添加到清单中，但没有帮助：

```
 <supports-screens android:anyDensity="true" /> 
```

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:36:34.000

您必须在真实像素 ( `px`) 中强制执行视图（布局/图像等）大小。所以：

```
<LinearLayout
    android:id="@+id/adsholder"
    android:layout_width="200px"
    android:layout_height="200px"
    android:layout_gravity="center_horizontal"
    android:orientation="vertical" >
</LinearLayout> 
```

无论屏幕密度如何，都将始终为 200x200**像素。**请参阅[有关可用单位的文档](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)。

# javascript - 是否可以选择班级&班级&班级，而不仅仅是班级或班级或班级？

> ID：13054520
> 
> 赞同：1
> 
> 时间：2012-10-24T17:28:21.923
> 
> 标签：javascript, jquery

我正在尝试选择特定的值。但我遇到了一个问题。

我有两个元素，一个有 XY，另一个有 XY Z。

选择 XYZ 时，我也收到了 X Y 的值...有没有办法让它寻找 X AND Y AND Z 而不是 X OR Y OR Z？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T17:29:15.710

只需将它们组合在选择器中：

```
$('.classX.classY.classZ'); 
```

# validation - Nstableview：拖放时验证发送方和接收方

> ID：13054525
> 
> 赞同：2
> 
> 时间：2012-10-24T17:28:47.957
> 
> 标签：validation, drag-and-drop, nstableview

我正在两个`NSTableViews`. 到目前为止，我已经设法让拖放工作正常。但是，我的具体需求是能够验证谁在启动拖动以及谁在接受放置。我的应用程序中不仅有两个 nsTableView，因此我需要确保正确的表正在通信。

事实证明，在 validateDrop 和 acceptDrop 方法中，

```
- (NSDragOperation) tableView: (NSTableView *)view validateDrop:(id)info proposedRow:(NSInteger)row proposedDropOperation:(NSTableViewDropOperation)op

- (BOOL)tableView: (NSTableView *)view acceptDrop: (id)info row: (NSInteger)row dropOperation: (NSTableViewDropOperation)op 
```

在这两种情况下，“视图”都是接受者表。也就是说，它是接收丢弃的表。有什么方法可以知道哪个表启动了拖动？

感谢您的帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:43:41.767

这比看起来简单得多，我希望我找到的答案对其他人有所帮助

在方法中

```
(BOOL)tableView: (NSTableView *)view acceptDrop: (id)info row: (NSInteger)row dropOperation: (NSTableViewDropOperation)op 
```

`(id)info`具有有关拖动源的所有信息。所以像

```
 NSTableView *dragSource = [info draggingSource]; 
```

会给你dragSource。

# css - 居中 CSS 变换（缩放）

> ID：13054529
> 
> 赞同：1
> 
> 时间：2012-10-24T17:28:57.423
> 
> 标签：css, animation, transform, css-transitions

我在这里创建了一个小提琴，只是想知道如何使对象居中 - 使心脏居中，当您将鼠标悬停在它上面时它会向外缩放，而不是在右下方设置动画。

```
@-webkit-keyframes beat {
0% {
-webkit-transform: scale(1);
-webkit-filter: drop-shadow(0 0 8px rgba(213, 9, 60, 0.7));
font-size: 90%;
color: #cc0404;
}

50% {
-webkit-transform: scale(1.1);
-webkit-filter: drop-shadow(0 0 15px rgba(213, 9, 60, 0.2));
font-size: 120%;
color: #e50505;
}

100% {
-webkit-transform: scale(1);
-webkit-filter: drop-shadow(0 0 8px rgba(213, 9, 60, 0.7));
font-size: 90%;
color: #cc0404;
}
}

.heart-box {
margin: 0 auto;
width: 90%;
padding-top: 20px;
cursor: pointer;
font-size: 15em;
-webkit-filter: drop-shadow(0 0 0 white);
-moz-filter: drop-shadow(0 0 0 white);
filter: drop-shadow(0 0 0 white);
}

.heart {
color: #e62020;
-webkit-transition: font-size 0.1s ease;
-moz-transition: font-size 0.1s ease;
transition: font-size 0.1s ease;
-webkit-transition: color 0.3s ease;
-moz-transition: color 0.3s ease;
transition: color 0.3s ease;
}

.heart:hover, .heart:focus {
-webkit-animation: beat 0.7s ease 0s infinite normal;
-moz-animation: beat 0.7s ease 0s infinite normal;
-ms-animation: beat 0.7s ease 0s infinite normal;
-o-animation: beat 0.7s ease 0s infinite normal;
animation: beat 0.7s ease 0s infinite normal;
} 
```

[http://jsfiddle.net/DBirkett/3DbTn/](http://jsfiddle.net/DBirkett/3DbTn/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:23:14.300

不要使用字体转换，只需使用转换比例。为了让它工作，你必须在你的跨度上设置 display:inline-block，因为内联元素还不支持 webkit 中的转换。您可能没有注意到，但原始代码中的这些转换在 webkit 浏览器中没有任何影响。

像这样的东西

```
@-webkit-keyframes beat {
  0% {
    -webkit-transform: scale(1);
    -webkit-filter: drop-shadow(0 0 8px rgba(213, 9, 60, 0.7));
    color: #cc0404;
  }

  50% {
    -webkit-transform: scale(2);
    -webkit-filter: drop-shadow(0 0 15px rgba(213, 9, 60, 0.2));
    color: #e50505;
  }

  100% {
    -webkit-transform: scale(1);
    -webkit-filter: drop-shadow(0 0 8px rgba(213, 9, 60, 0.7));
    color: #cc0404;
  }
}

.heart {
  display: inline-block;
  color: #e62020;
  -webkit-transition: font-size 0.1s ease;
  -moz-transition: font-size 0.1s ease;
  transition: font-size 0.1s ease;
  -webkit-transition: color 0.3s ease;
  -moz-transition: color 0.3s ease;
  transition: color 0.3s ease;
} 
```

此外，可在 /7/ 更新到您的原始小提琴。

# django - 在 django 中定义两个 login_url 和 login_required

> ID：13054531
> 
> 赞同：0
> 
> 时间：2012-10-24T17:29:02.543
> 
> 标签：django

在我的应用程序中，根据需要登录的用户，我有两个不同的登录页面。所以我不能使用`settings.LOGIN_URL`.

我也在使用基于类的视图，所以我必须使用`method_decorator(login_required)`.

目前，我有一个类装饰器（我使用的是 Python 2.7），它几乎可以满足我的所有需求，除了`login_url`. 代码是一个片段并且是手工输入的，所以它可能有错字。

```
login_required_m = method_decorator(login_required)
def requires_role1(view):
  def requires_m(func):
    @wraps(func)
    def wrapper(self, request, *args, **kwargs):
      # I need to process request.user
      if (not ok):
        return redirect(urlresolvers.reverse('some_name'))
      else:
        f = login_required_m(func)
        return f(self, request, *args, **kwargs)
    return wrapper
  view.get = requires_m(view.get)
  view.post = requires_m(view.post)
  return view
```

我真正关心的是：

```
`f = login_required_m(func)` 
```

在基于函数的视图中，我本来可以定义：

```
`f = login_required(func, login_url='some_reverse_path')` 
```

但是有了`method_decorator(login_required)`，我不再能够`login_url`作为参数传递。请记住，我需要能够这样做，因为我有两个不同的登录网址。它们提供完全不同的用户名和密码集（相同的用户名可以设置为不同的密码并与不同的人相关联）。

对于我应该做些什么来实现这一点的任何帮助将不胜感激。

*编辑*

根据接受的答案，这是我采用的解决方案：

```
def login_required_partial(func):
  return partial(login_required, login_url=urlresolvers.reverse('role1_login'))

login_required_m = method_decorator(login_required_partial)
```

并保持其余代码不变。当没有传递任何参数时，这一切似乎都运行良好`ulr(r'path/(?P<param1>.*)', CBV.as_view(), name='path_name')`。

现在有人有解决这个问题的好方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-14T23:22:02.430

那这个呢：

```
class MyView(View):

  @method_decorator(lambda x: login_required(x, login_url=reverse_lazy('role1_login')))
  def post(self, request):
    return HttpResponse(status=200) 
```

看起来这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:59:49.607

您可以装饰 CBV 视图功能：

```
# urls.py

from myproj.myapp import views

myview = login_required(views.MyView.as_view(), login_url=None)

urlpatterns = patterns('',
    url('^$', myview),
) 
```

或者您可以创建某种混合：

```
from django.contrib.auth.decorators import login_required
from functools import partial

class LoginRequiredMixin(object):
    """
    A mixin used for views that can only be accessed by authenticated users.
    """

    login_url = None

    def _login_required(self):
        return partial(login_required, login_url=self.login_url)

    def dispatch(self, request, *args, **kwargs):
        def inner(*args, **kwargs):
            klass = LoginRequiredMixin
            return super(klass, self).dispatch(*args, **kwargs)

        return partial(inner, login_url=self.login_url)(request, *args, **kwargs) 
```

并像这样使用它：

```
 # View class
 class MyView(LoginRequiredMixin, View):
     login_url = lazy_reverse('foo')

     pass

 # Or a view function in urls.py
 myview = views.MyView.as_view(login_url=reverse('foo')) 
```

# wpf - 为什么在 WPF 下反斜杠键被报告为 OemQuote？

> ID：13054534
> 
> 赞同：2
> 
> 时间：2012-10-24T17:29:06.863
> 
> 标签：wpf, keyboard, key, keyboard-shortcuts

在我们的 WPF 应用程序中，我们想知道为什么我们的`CTRL-Backslash`键盘快捷键没有触发。编写了一个快速测试应用程序来记录正在按下的键，并且在`OnKeyDown`覆盖中，`e.Key`被报告为预期的`OemQuote`而不是`OemBackslash`预期的。

更糟糕的是，在其他人的机器上（但也有美式键盘和美式布局，但制造商不同），它们的价值`e.Key`完全不同。

是的，我知道这就是 'Oem' 的含义，但难道不是所有的 OEM 都知道反斜杠到底是什么并始终如一地对待它？！！

如果不是，是这种情况，你应该如何`Backslash`为不同的机器分配键盘快捷键？

现在我知道操作系统知道它是一个反斜杠，因为在两台机器上，正确的值都被输入到一个文本框中，所以显然操作系统（通过我假设的驱动程序）知道将它映射到什么，但我不敢相信我无法基于反斜杠创建快捷方式并期望它能够在不同的机器和配置上可靠地工作。

这对我来说太疯狂了！帮助！！

# command-line - 使用通配符移动目录

> ID：13054537
> 
> 赞同：3
> 
> 时间：2012-10-24T17:29:15.613
> 
> 标签：command-line, move

我有一系列需要移动的文件夹，它们的组织方式如下：

*   家长

    *   ABC1
    *   ABC2
    *   DEF1
    *   防御2
    *   ...
    *   XYZ1
    *   XYZ2

我想将所有以“1”结尾的子目录及其内容移动到一个新文件夹（block1）中，并以“2”结尾。我认为它会涉及某种 for 循环和通配符“???1”，但我无法找到解决方案。

编辑**

另一个问题，只是为了让事情变得更加困难。假设我在每个文件夹中有一组要移动的特定文件：

*   家长

    *   ABC1
        *   ABC_cath1_001
        *   ABC_cath1_002
        *   ABC_cath2_001
        *   ABC_cath2_002

而且我只想将 ABC_cath1* 文件移动到新文件夹中 - 有没有简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:47:01.503

```
 md temp 
 for /f %a in ('dir /b *1') do move %a temp\%a
 ren temp block1

 md temp 
 for /f %a in ('dir /b *2') do move %a temp\%a
 ren temp block2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:47:48.480

假设这里列出的东西是文件夹

```
move C:\parent\???1 C:\block1 

move C:\parent\???2 C:\block2 
```

如果您的工作只是移动这些文件夹，这些命令将起作用，我认为您不需要编写带有循环的批处理脚本

# iphone - Xcode iPhone 4、4s 和 5 模拟器分辨率

> ID：13054539
> 
> 赞同：2
> 
> 时间：2012-10-24T17:29:22.463
> 
> 标签：iphone, xcode, ios-simulator, resolution, xcode4.5

当我在 Xcode 模拟器中运行我的 iPhone 应用程序时，它会自动运行 iPhone 4 或 4s 模拟器。但我想在 iPhone 5 模拟器中测试它，如何将模拟器更改为 640x1136px 分辨率。

在 Xcode 中哪里可以找到“更改设备硬件”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:45:20.633

检查此图像以更改模拟器大小

![在此处输入图像描述](../Images/d5723d81f3b34cdc609b422275397175.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T17:30:19.187

更改设备硬件>设备>iPhone Retina (4 inch)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-06-22T18:43:55.897

此外，如果您想更改屏幕中的比例大小，您可以选择 Window->Scale 并更改可视化的比例。您可以选择 50% - 75% - 100% 。

# dynamics-crm - 从 CRM 工作流程发送电子邮件不起作用

> ID：13054550
> 
> 赞同：0
> 
> 时间：2012-10-24T17:30:14.067
> 
> 标签：dynamics-crm, dynamics-crm-2011, crm, dynamics-crm-4

我构建了一个工作流，当联系人实体中的字段发生更改时发送电子邮件。当我在电子邮件表单的收件人字段中指定用户时，一切都按预期工作。

但是，当我指定位于另一个实体上的用户字段时，工作流会完成，但不会发送电子邮件。

此用户字段位于我已链接到联系人实体的配置实体上 - 我可以在工作流的电子邮件表单中使用表单助手来拉出该字段。它看起来像这样：

> {ConfigurationEmail(ContactToConfig (ConfigurationEntity))}

ContactToConfig 是 Contact 和 ConfigurationEntity 之间的关系。ConfigurationEntity 包含当前填充有用户的用户查找字段。

为了测试这一点，我 CCd 了一个工作用户，并将上述参考放在正文中。电子邮件将发送给 CCd 用户，但不会发送给其他用户（使用上述参考）。电子邮件正文中没有任何内容，这告诉我参考没有解决。

知道为什么这不起作用吗？

更新：我*想*我需要以某种方式指定 ConfigurationEnity 的实例。目前只有一个，但我认为上面的参考是查看实体，而不是带有数据的特定对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:24:01.617

在您的联系人记录中，您需要使用您的一个配置实体填充查找（可能需要先将其添加到表单中）。当工作流查找要使用的记录时，它只查找与工作流正在处理的联系人相关的一个记录。现在我猜这个值是空的，所以电子邮件没有收件人。

使用这种方法，这意味着您需要在每个联系人记录上设置配置实体，以使其适用于任何给定记录。您可以在创建联系人记录时使用另一个工作流来设置此值（或者如果您添加更多配置记录，则执行一些 if/else 逻辑）。您还可以进行批量编辑以设置现有值。

# rest - REST 的非教条式方法——维护会话以进行身份 验证

> ID：13054551
> 
> 赞同：1
> 
> 时间：2012-10-24T17:30:15.020
> 
> 标签：rest, glassfish, jersey

我正在设计我的应用程序，它将具有标准的 Web 和 Android 前端组件，它们都通过 RESTful API 访问数据。我计划使用 Glassfish 和 Jersey 来提供 REST。

从哲学上讲，我被卡住的地方是 REST 规范不维护任何会话数据的方法，这需要每个请求都提交身份验证凭据。我想要做的是将会话的标准 Web 应用程序概念合并到我的 REST 服务中，例如：

1.  用户提交请求
2.  来自他们浏览器的 SessionID 会根据 API 服务器的已验证和打开会话列表进行验证
3.  如果为 TRUE，则提供 REST
4.  如果 FALSE 返回一个失败的代码，用户需要提交摘要格式的身份验证凭据以进行身份​​验证，然后他的会话开始

我只是不想每次都重新验证。

我的问题是：

1.  为什么 REST 如此坚持不维护任何需要重复身份验证的会话数据？
2.  可以轻松修改 Jersey/Glassfish 以适应我对规范的偏差吗？

谢谢

# pattern-matching - sparql 模式匹配

> ID：13054552
> 
> 赞同：5
> 
> 时间：2012-10-24T17:30:18.123
> 
> 标签：pattern-matching, rdf, sparql

我目前正在学习一些 sparql，并且我正在以下网站上使用一些语句进行练习：

[http://data.semanticweb.org/snorql](http://data.semanticweb.org/snorql)

但是，我正在尝试执行以下语句：

```
SELECT DISTINCT ?author WHERE { ?paper swrc:author ?author FILTER(regex(?paper, "2006")) . } . 
```

它说没有结果。当我运行以下查询（没有过滤器）时：

```
SELECT DISTINCT ?paper WHERE { ?paper swrc:author ?author . } 
```

我看到它的字符串中有一些带有 2006 年的论文。我想知道为什么第一个查询没有返回 ?paper 字符串中有 2006 的这些条目。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T19:11:12.790

返回的 RDF 术语`?paper`都是 URI。过滤器`REGEX`功能不适用于 URI；它只适用于字符串。您可以使用该`STR(…)`函数将 URI 转换为字符串。这将起作用：

```
FILTER(regex(STR(?paper), "2006")) 
```

# php - MySQL 数据库中的动态变量

> ID：13054555
> 
> 赞同：0
> 
> 时间：2012-10-24T17:30:30.233
> 
> 标签：php, mysql, variables

我目前的编码遇到了死胡同，我正在重写大量代码，这些代码与更改存储在数据库中的站点范围选项以及对单个用户帐户应用权限相关。

在设置页面上，我将各种设置存储在数据库中，我想从数据库中检索这些设置以形成我的页面，然后我用“启用”或“禁用”为每个单独的设置填充一个选择框，因为大多数设置都是 0 或 1。

我的问题是，从数据库中获取数据并创建动态变量然后在我的设置页面中使用的最佳方法是什么？表的结构是：**id | 设置名称 | 设置值**。我只需要 setting_name 和 value，如果在 while 循环中创建的每个变量如下所示，我希望它；

设置名称 = 设置值；

这样我就可以使用该变量来填充我的选择框。

```
$sql_query = mysql_query( "SELECT * FROM `setting`" );
while( $row = mysql_fetch_assoc( $sql_query ) )
{           
$row['name'] = $row['value'];
} 
```

我认为上面的代码可以工作，但是永远不会创建变量。

谢谢你的帮助，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:33:08.783

再多一美元：`$$row['name'] = $row['value']`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T17:33:34.393

你想这样做：

```
${$row[name]} = $row[value]; 
```

此外，您希望停止使用[已弃用](http://www.deprecatedphp.com/mysql)`mysql_`的函数。你应该使用or函数。`mysqli_``PDO`

# shopify - shopify 的 API shipping_line 选项是什么？

> ID：13054556
> 
> 赞同：1
> 
> 时间：2012-10-24T17:30:32.887
> 
> 标签：shopify

我正在开发 Shopify 和履行公司之间的中间件，我能够获得 Shopify 的 API 中给出的 UPS 运输方式，但我需要其余的方法来建立一个到履行公司运输代码的转换表。

以下是 UPS 代码：

*   `UPS Ground`
*   `UPS Second Day Air`
*   `UPS Three-Day Select`
*   `UPS Saver`
*   `UPS Worldwide Expedited`
*   `UPS Standard`
*   `UPS Next Day Air Saver`
*   `UPS Next Day Air`
*   `UPS Next Day Air Early A.M.`
*   `UPS Express`
*   `UPS Worldwide Express Plus`
*   `UPS Expedited`
*   `UPS Second Day Air A.M.`
*   `UPS Express Early A.M.`
*   `UPS Ground 2`
*   `UPS Standard 2`
*   `UPS Second Day Air 2`
*   `UPS Next Day Air 2`

UPS 生成的线路如下所示：

`“shipping_lines”=>[{"title"=>"UPS Second Day Air", “code”=>"02", “price”=>25.63, “source”=>"ups"}]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:08:44.450

以下是 FedEx 和 USPS 可能的标题：

```
FedEx Ground
FedEx 2 Day
FedEx International First
FedEx International Economy
FedEx Standard Overnight
FedEx International Priority
FedEx Express Saver
FedEx Priority Overnight
FedEx First Overnight
FedEx Priority Overnight Saturday Delivery
FedEx 2 Day Saturday Delivery
FedEx First Overnight Saturday Delivery
FedEx International Priority Saturday Delivery
FedEx International Economy Freight
FedEx Ground Home Delivery
FedEx Europe First International Priority
FedEx International Priority 2

USPS Priority Mail
USPS First Class Mail International Package
USPS First-Class Mail
USPS Priority Mail International
USPS Parcel Post
USPS First-Class Mail Flat
USPS First-Class Mail Parcel
USPS Express Mail
USPS Express Mail International (EMS)
USPS Global Express Guaranteed
USPS First-Class Mail International Package
USPS Express Mail International
USPS Global Express Guaranteed (GXG)
USPS Express Mail 2
USPS Priority Mail 2
USPS First-Class Mail International Package**
USPS First-Class Mail Postcards
USPS First-Class Mail Large Envelope
USPS First-Class Mail Package
USPS First-Class Mail Letter
USPS Global Express Guaranteed (GXG)**
USPS Priority Mail International 2
USPS First-Class Mail International Parcel 
```

# php - 使用 date() 和 strtotime() 为 MySQL 准备日期

> ID：13054557
> 
> 赞同：1
> 
> 时间：2012-10-24T17:30:33.757
> 
> 标签：php, date, strtotime

我有日期作为格式的文本字符串 -

```
16 October 2012
08 October 2012
04 October 2012 
```

我想将它们转换为 MySQL 'date' 友好的格式。

我有以下实现 -

```
$fixed = date("Y-m-d", strtotime($date)); 
```

它将所有日期返回为 -

```
1969-12-31 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:38:28.683

`strtotime`有一个可接受的格式列表，您使用的不是其中之一。

你要[`strptime()`](http://ca2.php.net/manual/en/function.strptime.php)

```
$d = strptime($date, '%d %B %Y');
$fixed = date("Y-m-d", mktime(0,0,0,$d['tm_mon'],$d['tm_mday'],$d['tm_year'])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T18:34:16.110

除了我的其他答案（我使用 PHP 日期函数来获取结果）之外，如果您想避免它们并针对您的特定情况使用更快的方法，您可以使用以下自定义函数：

```
function mysql_date($d) {
    $m = array('jan','feb','mar','apr','may','jun','jul','aug','sep','oct','nov','dec');
    $ex = explode(' ',$d);
    $mon = array_search( strtolower( substr($ex[1],0,3) ) ,$m) + 1;
    return $ex[2] . '-' . $mon . '-' . $ex[0];
}

$date='16 October 2012';
echo mysql_date($date); //echoes '2012-10-16' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T18:13:18.980

这应该适用于 PHP 5.3 及更高版本：

```
$date='16 October 2012';
$a = date_parse_from_format($date, '%d %F %Y');
$atime = mktime(0, 0, 0, $a['month'], $a['day'], $a['year']);
echo date("Y-m-d", $atime); 
```

如果您有较旧的 PHP 版本，请注意您的 PHP 不在 Windows 上，因为没有在 Windows 中`strptime()`实现，推荐的方法是`date_parse_from_format()`按照我上面的建议使用，请参阅从[strptime()](http://ca2.php.net/manual/en/function.strptime.php)页面提取的警告：

> 注意：此功能在 Windows 平台上未实现。
> 
> 注意：在内部，该函数调用系统 C 库提供的 strptime() 函数。此函数可以在不同的操作系统中表现出明显不同的行为。建议在 PHP 5.3.0 及更高版本上使用不受这些问题影响的 date_parse_from_format()。

因此，如果您的 PHP 版本早于 5.3 并且不能在 Windows 上运行，那么您可以使用以下代码：

```
$date='16 October 2012';
$a = strptime($date, '%d %B %Y');
$atime = mktime(0, 0, 0, $a['tm_mon'], $a['tm_mday'], $a['tm_year']);
echo date("Y-m-d", $atime); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T16:07:39.153

为此使用 PHP 的[`DateTime`类](http://www.php.net/manual/en/datetime.createfromformat.php)——它使事情*变得*更容易......

```
function sqlDateFromLongDate($input) {
    $dateObj = DateTime::createFromFormat($input,'d F Y');
    return $dateObj->format('Y-m-d');
}

print sqlDateFromLongDate('08 October 2012'); 
```

希望有帮助。

**注意：此解决方案需要 PHP 5.3 及更高版本。（但还要注意，这是现在支持的最低版本：如果您使用的是较低版本，请注意 php 5.2 在近两年前就停止了支持——是时候升级了）

# c - 由于某种原因， int 没有转换为 char

> ID：13054560
> 
> 赞同：0
> 
> 时间：2012-10-24T17:30:34.947
> 
> 标签：c

```
int myatoi(const char* string) {
int i;
i = 0;
while(*string) {
    i = (i << 3) + (i<<1) + (*string -'0');
    string++;
}
return i;
}

int main() {
int i = myatoi("10101");
printf("%d\n",i);
char a = (char)(((int)'0')+i);
printf("%c\n",a);

return 0;
} 
```

我的输出结果是 10101

�</p>

如何解决这个问题

我应该通过 int 解析 int 以转换为 char 因为我们可以使用任何可以帮助我们转换的 c 内置函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:56:42.187

你期望会发生什么？

您的代码正确地将字符串`"10101"`转换为整数`10101`，并打印出来。看起来不错。然后您计算`10101+(int)'0'`可能是 10149（在 ascii 或 unicode 中`(int)'0'`是 48）。将其转换为 a`char`可能会给您 165（或可能 -91），这可能与您系统上的可打印字符不对应，因此您会得到一个空白/垃圾/缺失字符。

一切如预期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:55:56.187

如果您只需要一个 5 位数字到 char 字符串中，您可以使用以下代码：

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

int myatoi(char* string) {
int i;
i = 0;
while(*string) {
    i = (i << 3) + (i<<1) + (*string -'0');
    string++;
}
return i;
}

char *strrev(char *str) {
    char *p1, *p2;
    if (!str || !*str)
        return str;
    for (p1 = str, p2 = str + strlen(str) - 1; p2 > p1; ++p1, --p2) {
        *p1 ^= *p2;
        *p2 ^= *p1;
        *p1 ^= *p2;
    }
    return str;
}

char *itoa(int n, char *s, int b) {
    static char digits[] = "0123456789abcdefghijklmnopqrstuvwxyz";
    int i=0, sign;

    if ((sign = n) < 0)
        n = -n;
    do {
        s[i++] = digits[n % b];
    } while ((n /= b) > 0);
    if (sign < 0)
        s[i++] = '-';
    s[i] = '\0';
    return strrev(s);
}

int main() {
char buffer[5];
int i = myatoi("10101");

printf("%d\n",i);
itoa(i, buffer, 10);
printf("%s\n",buffer);

return 0;
} 
```

我使用的 2 个函数的来源： itoa 和 strrev
[http://www.daniweb.com/software-development/c/threads/11049/convert-int-to-string#](http://www.daniweb.com/software-development/c/threads/11049/convert-int-to-string#)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T18:30:31.220

有点返工和简化的变体：

```
unsigned int myatoi(const char* string)
{
  unsigned int i = 0;
  while(*string) i = (i << 3) + (i << 1) + *string++ - 0x30;
  return i;
}

int main()
{
  unsigned int i = myatoi("12133");
  printf("%u\n",i);

  return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T18:32:04.920

“把戏”

```
printf("%c", '0'+5); 
```

获取输出`5`仅适用于（十进制）数字，即 0-9。`printf("%c", '0'+10)`给出输出`:`。为什么？

`printf("%c",..)`用于打印单个字符。每个字符都有一个数字代码（参见[ASCII 代码](http://www.asciitable.com/)）。65 是 的 ASCII 码`A`，所以`printf("%c", 65)`给出这个字母。`printf("%c", 48)`给出字符`0`。C 语言允许编写`'0'`而不是`48`，因此您不必记住 ASCII 代码。C 编译器将任何字符转换为相应的 ASCII 代码之间`''`或`""`转换为相应的 ASCII 代码。所以上面的代码行是一样的

```
printf("%c", 48+5); 
```

要将 int 转换为其字符串表示形式，您可以在 C 中这样做：

```
char repr[12]; // a 32-bit int has at most 10 digits; 
               // +1 for possible sign; +1 for closing 0-character ("null termination")
sprintf(repr, "%d", 10101); // prints the number into a string
itoa(10101, repr, 10); // does the same thing
printf("%s", repr); // prints the string representing the number
printf("%d", 10101); // does the same thing directly 
```

# json - JSON解析具有相同字符串名称的对象

> ID：13054563
> 
> 赞同：0
> 
> 时间：2012-10-24T17:30:37.427
> 
> 标签：json, string, arrays

快速的问题，这是我的 Json：

```
{
    "items": [
        {
            "id": "4cd8fe75d",
            "name": "foo"
        },
        {
            "id": "5076c7e30",
            "name": "bar"
        },
        ......
        {
            "id": "6236c7e30",
            "name": "foobar"
        }
    ]
} 
```

我知道我可以像这样访问第一个`"name"`foo ：`items[0].name` 但是另一个（以及其他许多跟随字符串的人呢？

通常：使用 .each() 我可以访问数组上的每个值，但是序列中的每个对象呢（不确定我是否正确表达了我的观点）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:35:12.253

`items[i].name`应该得到数组中第 i 个对象的 name 属性。

```
for(var i=0;i<items.length;i++){
    console.log(items[i].name);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:38:44.737

好吧，这比我想象的更明显：

```
$.each(items, function(i,item){
      alert(items[i].name);
      }); 
```

# java - 在单元测试期间加载 WAR 资源

> ID：13054564
> 
> 赞同：3
> 
> 时间：2012-10-24T17:30:41.540
> 
> 标签：java, unit-testing, maven, war, stringtemplate

（上下文是部署为 WAR 的 Maven JavaEE 项目。）

我的应用程序类从目录中的包加载资源（使用 StringTemplate 3.2.1 库）`src/main/resources`。- 这就像一个魅力，因为应用程序类文件和资源最终都位于`WEB-INF/classes`. 内部`new FileInputStream(path)`StringTemplate 可以使用简单的相对路径找到资源。

当使用 JUnit 测试我的类时，这个简单的设置不起作用：单元测试从`test-classes`目录运行，然后相对路径指向错误的位置（通常由来自的资源填充`src/test/resources`）。

如何将 StringTemplate 传递给在两种环境中都可以使用的相对路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:39:55.337

如果我正确理解了文档，那么您使用绝对路径等而不是可以在类路径中找到的东西做错了。此外，应该使用 Class.getResourceAsStream("xyz.conf") 加载资源，无论它来自 src/main/resources 还是 src/test/resources 都无关紧要，因为类路径才是最重要的。可能是我误解了一些事情。

# linux - 更新 Intranet 站点的自签名安全证书

> ID：13054566
> 
> 赞同：0
> 
> 时间：2012-10-24T17:30:48.673
> 
> 标签：linux, web, debian, security

我们有一个 Intranet 站点，当用户连接到它时，它最近开始显示“此网站的安全证书存在问题”错误。该网站正在运行 Debian 服务器。我将如何使用命令行更新自签名安全证书？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T01:55:23.683

我找到了我们获得之前证书的公司并更新了我们过期的证书。他们有关于如何安装新生成的脚本的说明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T00:13:17.117

> 我将如何使用命令行更新自签名安全证书？

如果这只是一个自签名证书，我会生成另一个。您可以在此处找到说明[。](http://www.madboa.com/geek/openssl/#cert-self)

一个简短的摘录：

> 此示例将生成一个名为 mycert.pem 的文件，该文件将包含私钥和基于它的公共证书。证书有效期为 365 天，并且密钥（感谢 -nodes 选项）未加密。
> 
> openssl req \
> -x509 -nodes -days 365 \
> -newkey rsa:1024 -keyout mycert.pem -out mycert.pem

我建议使用 -days 1826（5 年）而不是 -days 365，因为如果你只使用一年，你最终会在不知不觉中再次经历这个。我也会使用`rsa:2048`而不是`rsa:1024`，以及`-sha512`选项，这应该确保您的证书在整个持续时间内保持加密可行。

此外，为了避免意外将您的私钥混入证书并忘记它，我会使用`-out mycert.crt`，它将证书存储在单独的文件中。

# css - H2下方的边框图片

> ID：13054571
> 
> 赞同：1
> 
> 时间：2012-10-24T17:31:02.857
> 
> 标签：css

我想在我的样式表中的每个 H2 下方添加一个图像。我尝试了背景图片，但它涵盖了措辞。我也尝试了border-image，但它无法正常工作（不确定我是否理解正确。

有可能吗，我怎样才能只用 CSS 来实现它

```
 // Sample CSS
 #content_area h2 {
     color: #107408;
     -moz-border-image:url(h2_background.png) 30 30 round; /* Firefox */
     -webkit-border-image:url(h2_background.png) 30 30 round; /* Safari */
     -o-border-image:url(h2_background.png) 30 30 round; /* Opera */
     border-image:url(h2_background.png) 30 30 round;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:36:06.730

我会回到你原来的 h2 并做这样的事情：

```
h2{
     background:#ffffff url('myimage.png') no-repeat left bottom;
     padding-bottom:4px;
} 
```

填充将增加图像可以放置的额外空间

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:32:27.297

您可以使用`:after`伪元素。

> ":after" 伪元素可用于在元素内容之后插入一些内容。
> 
> 以下示例在每个元素之后插入图像：
> 
> **示例**：
> 
> ```
> h2:after {
>    content:url(smiley.gif);
> } 
> ```

[来自CSS Pseudo-elements 的](http://www.w3schools.com/css/css_pseudo_elements.asp)引用。

# iphone - 尝试使用触摸事件在另一个图像上绘制图像

> ID：13054587
> 
> 赞同：1
> 
> 时间：2012-10-24T17:32:20.683
> 
> 标签：iphone, objective-c, ios, ipad

在我的应用程序中，我有一个名为 mainvie 的视图 - 当应用程序运行时，会加载 mainview，它将背景图像加载到屏幕上（下面的代码） ring_large.jpg 已作为文件添加。

```
- (void)drawRect:(CGRect)rect {
UIImage *image = [UIImage imageNamed:@"rink_large.jpg"];
CGPoint imagepoint = CGPointMake(10,0); 
[image drawAtPoint:imagepoint];
} 
```

这很好用，当我试图在此之上绘制另一个图像时，我遇到了问题。其他地方（名为 mainviewcontroller.m 的文件） - 在触摸时，即使我试图获取触摸的位置，并在该位置绘制图像。下面列出的是我的代码。我不确定为什么我要放置的图像根本没有绘制。我确定它没有在溜冰场图像后面绘制，因为我对此进行了评论，并且单击时图像仍然没有绘制。这是应该绘制图像的触摸开始功能。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
     CGPoint location = [[touches anyObject] locationInView:mainView];
    UIImage *image = [UIImage imageNamed:@"small_cone.png"];
    [image drawAtPoint:location];
} 
```

谁能看到为什么触摸某处时图像不会绘制？touchesBegan 函数在屏幕任意位置被触摸时启动，但图片未显示。感谢您的帮助，我对目标比较陌生-c。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T03:07:20.583

UIImage drawAtPoint 在当前图形上下文中绘制图像。您没有定义图形上下文。在 drawRect （您的原始代码所在的位置）中已经有一个图形上下文。基本上，您是在告诉 UIImage 在什么位置绘制，而不是在什么位置*绘制*。

你需要更多这样的东西：

```
CGPoint location = [[touches anyObject] locationInView:mainView];

UIGraphicsBeginImageContext(mainView.bounds.size);
UIImage *image = [UIImage imageNamed:@"small_cone.png"];
[image drawAtPoint:location];
UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

但是，这不会保留或考虑您的原始图像。如果您希望它们都绘制，一个在另一个，使用 drawAtPoint 两个图像：

```
CGPoint location = [[touches anyObject] locationInView:mainView];

UIGraphicsBeginImageContext(mainView.bounds.size);

UIImage *image = [UIImage imageNamed:@"rink_large.jpg"];
CGPoint imagepoint = CGPointMake(10,0);
[image drawAtPoint:imagepoint];

image = [UIImage imageNamed:@"small_cone.png"];
[image drawAtPoint:location];

UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

现在你可以用 newImage 做一些事情，它包含两个图像的合成。

# c# - 用于列表比较的正则表达式？

> ID：13054591
> 
> 赞同：3
> 
> 时间：2012-10-24T17:32:33.557
> 
> 标签：c#, regex, string, match, comma

我正在尝试根据 C# 中的属性属性过滤掉一些对象。我决定基于比较两个逗号分隔的列表来执行此操作，例如：

*   "a,b,c" ~ "a,b,c", "a,c,b", "c,a,b" 等等。
*   "a,b,*" ~ "a,b,c", "a,d,b", "g,a,b", "a,b" 等等。
*   "a,b,c" !~ "a,c,d", "a,c", "a", 等等..

我认为您应该能够使用简单的正则表达式匹配表达式来做到这一点，但我还无法弄清楚。

有人知道怎么做吗？同时，要用代码暴力破解它。

提前致谢

- 编辑

通过〜我的意思是等效的，很抱歉造成混淆。

“a,b,c”也可以是“abra,barby,candybar”。它不是单个字符，而是一个值列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T18:15:08.073

它不是一个正则表达式，但它比任何一个都简单得​​多。

```
var attributes = input.Split(",");
var testCase = test.Split(",");

return attributes.All(x => testCase.Contains(x)) && testCase.All(x => attributes.Contains(x); 
```

`&&`如果找到 *，请省略表达式的一半。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T18:10:03.690

如果你*想要*一个正则表达式，这是[我对此](http://rubular.com/r/y1aFK2Vv5T)的看法：

```
^                       # match start of string
 (?=.*a(?:,|$))         # assert it matches a followed by a comma or end-of-str
 (?=.*b(?:,|$))         # assert it matches b followed by a comma or end-of-str
 (?=.*c(?:,|$))         # assert it matches c followed by a comma or end-of-str
 (?:(?:a|b|c)(?:,|$))*  # match a, b or c followed by a comma or end-of-str
$                       # match end of string 
```

如果您找到 a `.*`，则保留断言，但更改正则表达式的最后一部分以使其匹配任何内容。[第二个例子](http://rubular.com/r/HpCE1MI1xN)：

```
^                       # match start of string
 (?=.*a(?:,|$))         # assert it matches a followed by a comma or end-of-str
 (?=.*b(?:,|$))         # assert it matches b followed by a comma or end-of-str
 (?:[^,]*(,|$))*        # match anything followed by a comma or end-of-str
$                       # match end of string 
```

* * *

当然，您仍然需要解析字符串以生成正则表达式，在这一点上，坦率地说，我更愿意只使用常规代码（它可能也会更快），例如（伪代码）：

```
setRequired  = Set(csvRequired.Split(','))
setActual    = Set(input.Split(','))

if (setActual.Equals(setRequired)))
{
    // passed
} 
```

如果您找到星号，只需将其删除`setRequired`并使用`.Contains`而不是`Equals`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-24T17:49:32.890

尝试 `((a|b|c)(,|))+`

其中 a、b 和 c 是列表中的每个选项。[这是](http://regexpal.com/?flags=g&regex=%28%28a%7Cb%7Cc%29%28,%7C%29%29%2b&input=a,c,d%0A%0Aa,c,b%0A%0Ac,b,a%0A%0Aa,x,b%0A)我在正则表达式中的快速测试的永久链接。如果您查看最后一个测试“a，x，b”，正则表达式匹配两个单独的部分，但我认为它仍然可以在 C# 中使用 Regex.Match()

# redis - SignalR.Redis 如何在后台工作？

> ID：13054592
> 
> 赞同：22
> 
> 时间：2012-10-24T17:32:36.237
> 
> 标签：redis, signalr

除了阅读 github 中的代码之外，是否有任何关于 SignalR.Redis 包如何工作的白皮书类型的文档？具体来说，我想知道它向 Redis 添加了哪些键、更新/删除策略等。在查看 Redis 内部时，我所看到的只是以下调用中指定的一个键（即“SignalR.Redis.Sample”）：

```
GlobalHost.DependencyResolver.UseRedis(server, Int32.Parse(port), password, "SignalR.Redis.Sample"); 
```

这个键似乎只是 Redis 中的一个计数器。我会假设正在创建并快速删除其他密钥，以促进连接到 Redis 的每个应用服务器之间的消息。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-10-25T07:14:29.977

不，没有白皮书，它就像 200 行代码，所以不能吞下那么多。

在 SignalR 中，每条消息都通过一个称为消息总线的东西。当您想要跨节点（或进程或应用程序域）横向扩展时，此总线的实现需要能够与应用程序的每个实例通信。为此，您可以使用 RedisMessageBus。Redis 具有[pub sub](http://redis.io/topics/pubsub)机制以及存储键值对的能力，我们仅将前者用于 SignalR。

题外话：这很重要！SignalR 不是可靠的消息传递，它是一种连接抽象。我们可能会缓冲消息以进行长轮询，但您**不能*永远依赖这些消息。如果您有需要保留的重要消息，请保留它们。

每个 Web 服务器都连接到一个（或新实现中的多个）redis 事件以在它们之间发送消息。当一条消息传入一个或多个客户端时，它会被发送到背板 (redis) 并到达所有 Web 服务器。每个网络服务器从 redis 获取消息并将其存储在本地缓存中。此本地缓存是 SignalR 客户端（浏览器等）提供服务的地方。

横向扩展设计的一个重要部分是光标。游标表示特定客户端在无限消息流中的位置。当客户端在断开连接后重新连接或长轮询连接在收到消息后返回时，它会要求总线从某个光标值开始获取所有内容。游标是由消息总线实现定义的，我们已经在最新的源代码中对其进行了规范化（在撰写本文时尚未发布，但我不会在这里详细介绍）。当前 redis 实现中的 cursor 只是一个递增的数字，没什么复杂的。

希望这能让您了解它是如何工作的。

# java - XStream 不会从 XML 反序列化返回

> ID：13054594
> 
> 赞同：2
> 
> 时间：2012-10-24T17:32:38.110
> 
> 标签：java, xml, xml-serialization, xstream

我使用`XStream`with`DomDriver`来序列化和反序列化一个`DefaultStyledDocument`对象，所以我在数据库中保存和检索它的状态。序列化部分运行良好，但是当它尝试反序列化时，会抛出异常：

> `[Fatal Error] :92:51: Character reference "&# Exception in thread "AWT-EventQueue-0" com.thoughtworks.xstream.io.StreamException: : Character reference "&#`

我相信 是文档中的空格字符。

我什至尝试使用不同的驱动程序，例如：和`StaxDriver`，但没有运气。`JsonHierarchicalStreamDriver``JettisonMappedXmlDriver`

我在这里做错了什么？

这是我的代码：

```
DefaultStyledDocument doc = new DefaultStyledDocument();
//initialize doc
XStream xmlstream = new XStream(new StaxDriver());
String xml = xmlstream.toXML(doc);
//save 'xml' in database

//select from database
DefaultStyledDocument document = (defaultStyledDocument) xmlstream.fromXML(result.getString(1));
//this is where the exception is thrown. 
```

**编辑** 实际上 不是空格字符，因为现在我看到空格字符由“”表示。 似乎是文档的未编辑（空）部分。序列化它真的很烦人，但没有反序列化它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:00:33.803

*鉴于您在上面的评论中提供的 XML 片段，错误消息是正确的 -即使作为字符引用*，规范也禁止在 XML 1.0 文档中出现某些字符，并且 U+0000 是这些字符之一。因此`&#x0;`不是格式良好的 XML，解析器拒绝它是正确的。序列化程序显然更宽松地允许编写它。

我建议您探索其他非 XML 方式来表示数据库中的这些数据，可能是 BLOB（使用 Java 对象序列化）或类似的方式。

# facebook - iPad/Safari Facebook 登录照片验证

> ID：13054602
> 
> 赞同：0
> 
> 时间：2012-10-24T17:33:06.390
> 
> 标签：facebook, ipad, security, safari

全部，

我在一家社交媒体公司工作，最近在现场活动中经历了一些非常令人烦恼的事情。

我们让访客在 iPad 信息亭上临时登录，以便注册他们的 Facebook 帐户（通过 Safari）。

不幸的是，我目前不在我们的 iPad 附近/访问范围内，并且要等到下一次现场活动。我希望不必为了深入了解这一点而偷偷溜出去购买/借用 iPad。

基本上，当我们使用我公司的 iPad（这是在我加入公司前几个月设置的）时，Facebook 登录工作得很好。用户输入用户名/密码，点击登录，立即提示他们授权我们的应用程序。然而，当我们使用第三方的 iPad 时，几乎每一次，Facebook 都会发起一个未注册的设备问题并强制验证码 + 照片验证/ID 流程以完成登录流程。

我进行了各种测试，确保这与 a) 我们的 ISP/IP 无关；b) 我们的 Facebook 应用程序 c) 输入的凭据不正确；d) 个人账户安全设置。这些测试的重点是在我公司的一台 iPad 上使用同一个帐户，然后是第三方的一台 iPad。我认为，我已将其范围缩小为本地设备设置。但是，我没有时间去浏览 iPad + Safari 的设置，例如隐私浏览等。

作为一名 QA 人员，我完全清楚我的下一步是将我们的功能性 iPad 的设置与他们的设置进行比较，这最终会导致验证问题。话虽如此，在我完成测试之前，所有设备都必须打包并送上路。

因此，如果有人有与此类问题（Facebook 登录验证）相关的特定经验，我将非常感谢您提供的任何提示，以确保不会提示用户进行过多的安全验证，因为它会减慢我们的注册过程不可接受的方式。

好心，戴夫

# python - Python RE：我怎么能忽略标签之间的空白？

> ID：13054610
> 
> 赞同：0
> 
> 时间：2012-10-24T17:33:40.060
> 
> 标签：python, xml-parsing

我有以下文字：

```
<vehicle id="1292442" depart="26060.00">
      <route edges="24449167#2 27659684#1 24686876#1"/> 
```

我想将车辆 ID 和路线边缘中的每个项目放在元组变量中

```
tuples = re.findall(r'<vehicle\sid="(.+?)"\s+(<route\sedges="(.+)"/>', text) 
```

如何忽略标签之间的空格？

```
 \s+ 
```

不这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:35:56.873

那是 XML。您应该使用 XML 解析器，而不是正则表达式。

也就是说，为什么不只是`strip()`之后多余的空白呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:30:58.017

使用像[lxml](http://lxml.de/)这样的 XML 解析器。这将使您可以轻松访问所需的元素及其属性。对于一个属性中不同的路由边，使用`split()`字符串的方法：

```
In [1]: edges="24449167#2 27659684#1 24686876#1"

In [2]: edges.split()
Out[2]: ['24449167#2', '27659684#1', '24686876#1'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T18:25:32.823

以下面向流的 XML 解析 hack 仅使用 Python 标准库。

对不起，回答太长了：因为解析 XML 太让人麻木了，所以我更喜欢找到“创造性地”做它的方法:)

以下代码将结果元组累积到一个列表中。但是由于协程可以以任意方式链接，您可以将其演变为更强大的解决方案，懒惰地抓取车辆元组并逐个或以块或其他方式处理它们。

```
# Remixed from: http://www.dabeaz.com/coroutines/cosax.py
# Don't shy away from reading http://www.dabeaz.com/coroutines/ if the stuff below
# seems weird.

from xml.sax import ContentHandler, parse
from collections import namedtuple

ElementStart = namedtuple('ElementStart', 'name attrs')
ElementEnd = namedtuple('ElementEnd', 'name')

class LazySax(ContentHandler):
    def __init__(self, target):
        self.target = target
    def startElement(self, name, attrs):
        self.target.send(ElementStart(name, attrs._attrs))
    def endElement(self, name):
        self.target.send(ElementEnd(name))

def pull_tuples(tuples):
    while True:
        event = yield
        if isinstance(event, ElementStart) and event.name == 'vehicle':
            vid = event.attrs['id']
            edges = None
            while True:
                event = yield
                if isinstance(event, ElementStart) and event.name == 'route':
                    edges = event.attrs['edges']
                elif isinstance(event, ElementEnd) and event.name == 'vehicle':
                    tuples.append((vid, edges))
                    break 
```

假设你有`vehicles.xml`这个：

```
<root>
 <foo />
 <bar>
  <!-- This block will be skipped. Try that with regex (please DON'T!).
  <vehicle id="1292441" depart="26060.00">
      <route edges="24449167#2 27659684#1 24686876#1"/>
  </vehicle>
  -->
  <vehicle id="1292442" depart="26060.00">
      <route edges="24449167#2 27659684#1 24686876#1"/>
  </vehicle>
 </bar>
 <vehicle id="1292443" depart="26060.00">
      <route edges="34449167#2 37659684#1 34686876#1"/>
 </vehicle>
 <vehicle id="1292444" depart="26060.00">
      <route edges="44449167#2 47659684#1 44686876#1"/>
 </vehicle>
</root> 
```

现在，如果你这样做：

```
results = []
puller = pull_tuples(results); puller.next()
with open('vehicles.xml') as f:
    parse(f, LazySax(puller))
for result in results:
    print result 
```

你会看到的：

```
(u'1292442', u'24449167#2 27659684#1 24686876#1')
(u'1292443', u'34449167#2 37659684#1 34686876#1')
(u'1292444', u'44449167#2 47659684#1 44686876#1') 
```

这或多或少是你想要的。只是普通的旧 XML 解析。

# php - php在javascript对象的jquery ajax发布后返回null

> ID：13054614
> 
> 赞同：0
> 
> 时间：2012-10-24T17:33:49.093
> 
> 标签：php, jquery, ajax

试图将 javascript 对象传递给 php 并收到此错误。我究竟做错了什么？

```
var address = {};

address.whatever = "asdf";

$.ajax({
            type: 'post',
            url: '/resources/scripts/php/whatever.php',
            data: 'address=' + JSON.stringify(address),
            success: function(returnedData){
                console.log(returnedData);
            },
            error: function (xhr, tst, err) {
                console.log(err);
            },          
        }); 
```

php

```
$whatever = json_decode($_POST['address']);
 echo json_decode($address); 
```

安慰： `null`

感谢您的任何见解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:38:16.863

```
$whatever = json_decode($_POST['address']);
echo json_decode($address); 
```

应该：

```
 echo $_POST["whatever"]; 
```

和

```
data: 'address=' + JSON.stringify(address), 
```

应该：

```
 data: JSON.stringify(address), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:35:45.590

```
$.ajax({
            type: 'post',
            url: '/resources/scripts/php/whatever.php',
            data: {address : address},
            success: function(returnedData){
                console.log(returnedData);
            },
            error: function (xhr, tst, err) {
                console.log(err);
            }          
        }); 
```

尝试这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T17:37:04.770

尝试

```
$.ajax({
        type: 'post',
        url: '/resources/scripts/php/whatever.php',
        data: {'address' : JSON.stringify(address)},
        success: function(returnedData){
            console.log(returnedData);
        },
        error: function (xhr, tst, err) {
            console.log(err);
        },          
    }); 
```

PHP：

```
 $address = json_decode($_POST['address']);
 echo $address['whatever']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T17:37:53.537

无需 JSON.stringify。jQuery 会为您处理它。

和：

```
$.ajax({
    type: 'post',
    url: '/resources/scripts/php/whatever.php',
    data: {address: address},
    success: function(returnedData){
        console.log(returnedData);
    },
    error: function (xhr, tst, err) {
        console.log(err);
    },
}); 
```

您可以使用：

```
echo $_POST['address']['whatever'] // output asdf 
```

# jsf - 在 jsf 2.0 中重定向浏览器后退按钮

> ID：13054615
> 
> 赞同：2
> 
> 时间：2012-10-24T17:34:17.800
> 
> 标签：jsf, jakarta-ee, jsf-2, primefaces, navigation

我正在使用 Primefaces 3.4.1、Jboss AS 7.1 和 MyFaces CODI 编写应用程序。我遇到的问题是我正在使用 CODI 提供的对话范围，一旦对话结束，我需要一种方法来处理浏览器的后退按钮。

更准确地说 - 当对话结束并且用户在不同的页面上时（想想它就像一个向导完成并提交到数据库）如果按下后退按钮我收到以下异常：

```
javax.ejb.EJBTransactionRolledbackException 
```

理想情况下，由于对话已完成，我希望将其重定向回其他页面（菜单、仪表板）。

这可以通过 JSF 2.0 导航规则来完成吗？

编辑：

我创建了这样的导航规则：

```
<navigation-rule>
    <from-view-id>/page1.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>outcome1</from-outcome>
            <to-view-id>/page2.xhtml</to-view-id>
            <redirect/>
        </navigation-case>
        <navigation-case>
            <from-outcome>*</from-outcome>
            <to-view-id>/dashboard.xhtml</to-view-id>
            <redirect/>
        </navigation-case>
</navigation-rule> 
```

如果我们按下后退按钮，希望这将重定向到dashboard.xhtml。我假设当您按下它时，后端会触发不同的操作。显然我假设错了。有什么方法可以使用这些案例捕获 bakc 按钮发送的任何内容吗？可能带标签？

**更新 1：**

显然浏览器的后退按钮不会触发 JSF 导航案例。是否清楚它会触发什么？我实现了以下过滤器：[https](https://stackoverflow.com/a/10305799/1611957) : //stackoverflow.com/a/10305799/1611957 它现在会触发什么？这会让捕捉它的工作变得更容易吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T12:51:26.540

我终于设法解决了这个问题，它可能对其他人有帮助：

首先要做的是确保您没有缓存页面。您可以使用此处说明的过滤器来执行此操作：

[https://stackoverflow.com/a/10305799/1611957](https://stackoverflow.com/a/10305799/1611957)

之后，您将知道该页面将被呈现，因此您需要在呈现之前检查您的对话 bean 是否正确实例化。此处解释了如何进行此类检查：

[https://stackoverflow.com/a/7294707/1611957](https://stackoverflow.com/a/7294707/1611957)

我使用的代码类似于 BalusC 在这个问题中发布的代码：

```
<f:metadata>
    <f:event type="preRenderView" listener="#{authenticator.check}" />
</f:metadata> 
```

使用java代码：

```
public void check() {
    if (someCondition) {
        FacesContext facesContext = FacesContext.getCurrentInstance();
        NavigationHandler navigationHandler =
            facesContext.getApplication().getNavigationHandler();
        navigationHandler.handleNavigation(facesContext, null, "outcome");
    }
} 
```

这样，您将为“结果”分派 JSF 导航规则

```
<navigation-rule>
    <from-view-id>*</from-view-id>
    <navigation-case>
        <from-outcome>outcome</from-outcome>
        <to-view-id>/defaultPage.xhtml</to-view-id>
        <redirect/>
    </navigation-case>
</navigation-rule> 
```

这就是您可以使用 JSF2 优雅地处理后退按钮的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T20:09:26.887

我们正在使用@ConversationRequired。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-10-05T09:26:19.707

```
This worked for me.
You can add the below code in between your <head> </head> tag

<script>
    window.location.hash = "no-back-button";
    window.location.hash = "Again-No-back-button";//again because google chrome don't insert first hash into history
    window.onhashchange = function() {
        window.location.hash = "no-back-button";
    }
</script> 
```

# javascript - 从 .js 文件调用 html 文件中声明的 js 函数

> ID：13054616
> 
> 赞同：1
> 
> 时间：2012-10-24T17:34:19.423
> 
> 标签：javascript, html, function, call

我正在处理我的 .js 文件。当我的函数 mainPaginationClicked 被调用时，我希望它也执行另一个函数 rotateMessage。rotateMessage 在我的 html 文档的脚本标签中声明。有没有办法从我的 .js 文件中调用这个函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:35:48.243

是的，您可以像在 .js 文件中那样调用它。JS 中的函数在文件之间共享，变量也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:36:38.047

只要您在 HTML 中声明函数之后加载 JavaScript 文件（或仅在声明函数后调用该函数），那么您声明的函数将在同一个 JavaScript 上下文中可用。实际的文件位置无关紧要，只有内存中的命名空间。

浏览器中的默认行为是在使用`script`标签加载 JavaScript 时阻止，因此您可以安全地按照您希望它们执行的顺序编写 JavaScript 资源，而不必担心需要加载外部文件这一事实（除非另有明确控制它们都汇集在一个全局命名空间中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T17:37:12.093

如果您确保您的 js 文件包含**在**脚本标记之后，则调用应该没有问题`rotateMessage`

# java - 想从 1.6 到 java 1.7 上实现应用

> ID：13054617
> 
> 赞同：1
> 
> 时间：2012-10-24T17:34:20.863
> 
> 标签：java, swing

我正在开发的应用程序是基于医疗保健的桌面应用程序。它已经过全面测试，`java 1.6`现在我们想要在上面实现它，`java 1.7`所以我们需要付出多少努力来测试和实现这个应用程序`java 1.7`。在这个版本上部署有什么特别需要我们牢记的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:36:19.903

Java 7 应该与您的 Java 6 代码完全向后兼容。

第一步是在 JDK 7 下编译源代码。如果成功，您应该可以开始了。

您应该查看[JDK 7 发行说明](http://www.oracle.com/technetwork/java/javase/jdk7-relnotes-429209.html)以了解您将来可能想要利用的新功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:37:09.793

所有 Java 较新版本都支持向后兼容性...因此，如果它适用于 1.6，它也将适用于 1.7，并具有增强的性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T17:38:55.617

1.6 的所有功能也存在于 1.7 中，因此它也将与 1.7 兼容。向后兼容性成为一个问题，但情况并非如此

# magento - Magento Enterprise 高流量期间缓慢的 Nginx + PHP-FPM

> ID：13054623
> 
> 赞同：3
> 
> 时间：2012-10-24T17:34:39.763
> 
> 标签：magento, nginx

我们将 Nginx 与 PHP-FPM 一起用于 Magento Enterprise Edition 1.12

一切正常，但是当我们让访问者超过 150 人时，速度会下降。在此期间，我们注意到 CPU 利用率为 10%，空闲内存超过 40%。

服务器配置：

```
CPU 2 x Intel Xeon E5-2680 2.7 GHz 8 Cores 16 Threads 8 GT/s (w H/T) 
RAM 8GB x 8 = 64 GB Total 
NIC 1G connected to Firewall
NIC 1G connected to DB server running percona MySQL 
```

配置：nginx.conf

```
user nginx;
worker_processes 32;

error_log  /var/log/nginx/error.log;

pid        /var/run/nginx.pid;

events {
worker_connections  1024;
# multi_accept on;
}

http {
include       mime.types;
default_type  application/octet-stream;

log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                  '$status $body_bytes_sent "$http_referer" '
                  '"$http_user_agent" "$http_x_forwarded_for"';
access_log  /var/log/nginx/access.log  main;

sendfile          on;
tcp_nopush        on;
tcp_nodelay       off;
autoindex         off;
keepalive_timeout 10;

## detect https
map $scheme $fastcgi_https {
    default off;
    https on;
}
# Store FastCGI Cached (microcaching) of PHP pages in our tmpfs ramdisk
fastcgi_cache_path /tmpfs/nginx levels=1:2 keys_zone=mage:5m max_size=1g inactive=1h;
open_file_cache max=10000 inactive=30m;
open_file_cache_valid 10m;
open_file_cache_min_uses 2;
open_file_cache_errors on;
proxy_read_timeout 10;

upstream phpfpm {
    server localhost:9000;
}

gzip on;
gzip_http_version 1.0;
gzip_comp_level 2;
gzip_proxied any;
gzip_min_length  1100;
gzip_buffers 16 8k;
gzip_types text/plain text/css application/x-javascript text/xml application/xml
application/xml+rss text/javascript;
# Some version of IE 6 don't handle compression well on some mime-types, so just disable for them
gzip_disable "MSIE [1-6].(?!.*SV1)";
# Set a vary header so downstream proxies don't send cached gzipped content to IE6
gzip_vary on;

# Load config files from the /etc/nginx/conf.d directory
include /etc/nginx/conf.d/*.conf;

# Health-check server
server {
    listen       80;
    server_name  localhost;
    charset      utf-8;
    access_log off;
    location / {
        root   share/nginx/html;
        index  index.html index.htm;

    }

    #error_page  404              /404.html;
    # redirect server error pages to the static page /50x.html
    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   share/nginx/html;
    }

    } 
```

}

配置 PHP-FPM.conf

```
[global]
pid = /var/run/php-fpm/php-fpm.pid
error_log = /var/log/php-fpm/error.log
[www]
listen = 127.0.0.1:9000
listen.backlog = 65536
listen.allowed_clients = 127.0.0.1
user = nginx
group = nginx
request_terminate_timeout = 600
pm = static
pm.max_children = 846
#pm.start_servers = 200
#pm.min_spare_servers = 200
#pm.max_spare_servers = 200
pm.max_requests = 10000
slowlog = /var/log/php-fpm/www-slow.log 
```

配置 fastcgi.conf

```
#fastcgi_set_header "Set-Cookie";
#if ($http_cookie != "X-Store=1" ) {
#  add_header Set-Cookie "X-Store=1; path=/";
#}

## Catch 404s that try_files miss
if (!-e $request_filename) { rewrite / /index.php last; }

## Blacklist media location from fcgi
if ($uri !~ "^/(media|skin|js)/") {
fastcgi_pass phpfpm;
}

## Tell the upstream who is making the request
proxy_set_header Host $host;
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_redirect off;

# Ensure PHP knows when we use HTTPS
fastcgi_param  HTTPS           $fastcgi_https;

## Fcgi Settings
include                        fastcgi_params;
fastcgi_connect_timeout        60;
fastcgi_send_timeout           60;
fastcgi_read_timeout           300;
fastcgi_buffer_size            4k;
fastcgi_buffers 512            4k;
fastcgi_busy_buffers_size      8k;
fastcgi_temp_file_write_size   256k;
fastcgi_intercept_errors       off;
fastcgi_index  index.php;
fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;
fastcgi_param  SCRIPT_NAME     $fastcgi_script_name;
# nginx will buffer objects to disk that are too large for the buffers above
fastcgi_temp_path              /tmpfs/nginx/tmp 1 2;
#fastcgi_keep_conn              on; # NGINX 1.1.14
expires                        off; ## Do not cache dynamic content 
```

最佳

```
top - 13:24:45 up  5:58,  1 user,  load average: 0.88, 0.70, 0.71
Tasks: 1465 total,   3 running, 1462 sleeping,   0 stopped,   0 zombie
Cpu(s):  4.1%us,  0.1%sy,  0.0%ni, 95.8%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Mem:  65942708k total, 38795452k used, 27147256k free,   213844k buffers
Swap:  8388600k total,        0k used,  8388600k free,  1263300k cached

PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
3300 nginx     20   0 1404m 169m 127m S 28.3  0.3   0:30.33 php-fpm
4165 nginx     20   0 1401m 156m 117m S 26.0  0.2   0:30.17 php-fpm
4072 nginx     20   0 1410m 163m 118m S 22.7  0.3   0:27.75 php-fpm
3710 nginx     20   0 1402m 163m 123m R 12.8  0.3   0:32.39 php-fpm
3578 nginx     20   0 1401m 157m 118m S 11.9  0.2   0:27.39 php-fpm 
```

我们正在使用 magento 企业并使用全页缓存。APC 也已安装并处于活动状态。

问题：在高流量期间变得非常缓慢。

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-11T12:34:59.770

我在这里非常彻底地回答了这个问题......

[magento 的 NGINX-FPM 配置设置](https://stackoverflow.com/questions/14359337/nginx-fpm-configuration-settings-for-magento/14360603#14360603)

简而言之，

> 你要问的是我认为每个人都在努力使用 nginx 和 php fpm ......从中获得更多性能。我的意思是，如果我们不试图提高网站性能，我们可以只使用 apache 和 php 吗？有很多答案，意见和案例库解决方案......但是，问题确实是Magento，而不是服务器的配置。Magento 对于任何环境来说都太大太重了。Magento 托管确实是一项乏味且令人不快的任务。

# c# - WPF/C# 中的条件事件处理程序

> ID：13054624
> 
> 赞同：0
> 
> 时间：2012-10-24T17:34:40.303
> 
> 标签：c#, wpf, xaml

我有一个场景，我想根据数据模型中的几个条件在 DockPanel/TextBlock 上为拖放数据添加鼠标和键盘事件。如果该条件不存在，那么我不希望我的代码监听这些事件。

```
<!-- Data Template with all event handlers -->
<DataTemplate DataType="{x:Type ViewModels:EventsViewModel}">   
    <DockPanel Name="dpnMain">
                <Button Name="btnSourceLink" DockPanel.Dock="Right" HorizontalAlignment="Right" Padding="0"
                        ClickMode="Press"
                        Click="Button_OnMouseButtonUp"
                        PreviewMouseDown="Button_DragDataMouseDown"
                        Content="{Binding Value, Converter={StaticResource RegionalDataFormatConverter}}"
                        ToolTip="{Binding Tooltip}"
                        ToolTipService.IsEnabled="{Binding IsTooltipAvailable}" />
                <StackPanel Name="spnWithDragNDrop" DockPanel.Dock="Left">
                    <TextBlock HorizontalAlignment="Left" TextWrapping="NoWrap" ClipToBounds="True" Padding="0"
                               Text="{Binding Label}" MouseEnter="OnMouseEnter" MouseLeave="OnMouseLeave" 
                               MouseLeftButtonUp="OnMouseLeftButtonUp"
                               PreviewMouseDown="DragDataMouseDown"
                               ToolTip="{Binding Label}"
                               Width="{Binding ElementName=spn, Path=ActualWidth, Mode=OneWay,
                                Converter={StaticResource WidthFromParent}, ConverterParameter=10}"/>
                </StackPanel>
    </DockPanel>
<DataTemplate>

<!-- Data Template without event handlers -->
<DataTemplate DataType="{x:Type ViewModels:PlainViewModel}">    
    <DockPanel Name="dpnMain">
                <Button Name="btnSourceLink" DockPanel.Dock="Right" HorizontalAlignment="Right" Padding="0"
                        ClickMode="Press"
                        Click="Button_OnMouseButtonUp"
                        PreviewMouseDown="Button_DragDataMouseDown"
                        Content="{Binding Value, Converter={StaticResource RegionalDataFormatConverter}}"
                        ToolTip="{Binding Tooltip}"
                        ToolTipService.IsEnabled="{Binding IsTooltipAvailable}" />
                <StackPanel Name="spnWithoutDragNDrop" DockPanel.Dock="Left">
                    <TextBlock HorizontalAlignment="Left" TextWrapping="NoWrap" ClipToBounds="True" Padding="0"
                               Text="{Binding Label}"
                               ToolTip="{Binding Label}"
                               Width="{Binding ElementName=spn, Path=ActualWidth, Mode=OneWay,
                                Converter={StaticResource WidthFromParent}, ConverterParameter=10}"/>
                </StackPanel>
    </DockPanel>
<DataTemplate>

<!-- Content Control will select the appropriate data template based on the view model it is bound to -->
<ContentControl Focusable="False" Padding="0" Content="{Binding}"/> 
```

我不想编写两个不同的数据模板，并想根据它的 viewModel 类型进行选择。我需要某种可以绑定到这些事件的 ValueConverters。

无论如何我可以编写一些转换器来避免编写另一个 DataTemplates 和 View Model 并且转换器会在幕后调查这些情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:45:23.657

使用以下代码创建一个类：

```
public class MyTemplateSelector : DataTemplateSelector
{
    private static DataTemplate _eventsViewModel;
    private static DataTemplate EventsViewModel
    {
        get
        {
            if (_eventsViewModel== null)
                _eventsViewModel= Application.Current.FindResource("EventsViewModel") as DataTemplate;
            return _eventsViewModel;
        }
    }

    private static DataTemplate _plainViewModel;
    private static DataTemplate PlainViewModel
    {
        get
        {
            if (_plainViewModel== null)
                _plainViewModel= Application.Current.FindResource("PlainViewModel") as DataTemplate;
            return _plainViewModel;
        }
    }

    public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        if(item is EventsViewModel) return EventsViewModel;
        else if(item is PlainViewModel) return PlainViewModel;

    }
} 
```

在资源标签中的 xaml 中：

```
<core:MyTemplateSelector x:Key="myTemplateSelector"/> 
```

在xml中：

```
<ContentPresenter ContentSource="{Binding}" ContentTemplateSelector="{StaticResource myTemplateSelector}"/> 
```

# android - 谷歌天空地图地心坐标

> ID：13054625
> 
> 赞同：0
> 
> 时间：2012-10-24T17:34:48.353
> 
> 标签：android

由于 Google Sky Map 是[开源的](http://code.google.com/p/stardroid/)，所以我决定尝试一下它并进行一些实验。到目前为止，我已经确定使用 GeocentricCoordinate 类来定位恒星、星系等物体。它基本上只是一个标准化的 Vector3。但是，我无法确切地弄清楚这是哪种坐标系。

例如，作为测试，我尝试用坐标 (0,0,0) 绘制一些东西，但应用程序没有绘制任何东西。所以我尝试使用 (1,0,0)，它出现在空间中的某个任意点，不靠近赤道或任何地方。不同的协调只会给出同样任意的结果。

希望有人知道这是如何工作的。

# asp.net - 异步/等待和异步控制器？

> ID：13054626
> 
> 赞同：4
> 
> 时间：2012-10-24T17:34:50.247
> 
> 标签：asp.net, .net, asp.net-mvc, asp.net-web-api, async-await

当您在控制器中使用 Async/Await 时，您是否必须从 AsyncController 继承，或者如果您使用 Controller，它是否真的不是异步的？Asp.net web api怎么样？我认为没有 AsyncApiController。目前我只是从控制器继承及其工作，但它真的是异步的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T17:37:08.747

`AsyncController`MVC 4中类的 XML 注释说

> 提供与 ASP.NET MVC 3 的向后兼容性。

类本身是空的。

换句话说，你不需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:30:57.203

就 Web API 而言，您不需要 Async 控制器基类。您需要做的就是将返回值包装在一个任务中。

例如，

```
 /// <summary>
    /// Assuming this function start a long run IO task
    /// </summary>
    public Task<string> WorkAsync(int input)
    {
        return Task.Factory.StartNew(() =>
            {
                // heavy duty here ...

                return "result";
            }
        );
    }

    // GET api/values/5
    public Task<string> Get(int id)
    {
        return WorkAsync(id).ContinueWith(
            task =>
            {
                // disclaimer: this is not the perfect way to process incomplete task
                if (task.IsCompleted)
                {
                    return string.Format("{0}-{1}", task.Result, id);
                }
                else
                {
                    throw new InvalidOperationException("not completed");
                }
            });
    } 
```

此外，在 .Net 4.5 中，您可以从 await-async 中受益，编写更简单的代码：

```
 /// <summary>
    /// Assuming this function start a long run IO task
    /// </summary>
    public Task<string> WorkAsync(int input)
    {
        return Task.Factory.StartNew(() =>
            {
                // heavy duty here ...

                return "result";
            }
        );
    }

    // GET api/values/5
    public async Task<string> Get(int id)
    {
        var retval = await WorkAsync(id);

        return string.Format("{0}-{1}", retval, id);
    } 
```

# iphone - 如何在 iPhone 的屏幕顶部放置标签栏

> ID：13054636
> 
> 赞同：1
> 
> 时间：2012-10-24T17:35:39.153
> 
> 标签：iphone, xcode, uitabbarcontroller

我对objective -C很陌生，偶然发现了这个问题..

我必须在屏幕顶部有一个标签栏，上面有一些按钮，如搜索、信息、配置文件。如果按下按钮，则相应地它应该打开自己的视图。但我发现 iPhone 中的标签栏位于底部。如何将标签栏放在屏幕顶部。？如果不可能，那么有什么替代方法可以完成我的任务。

任何帮助都是可观的......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T18:43:47.747

我想你搜索的是这里。 [https://github.com/hollance/MHTabBarController](https://github.com/hollance/MHTabBarController)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-24T17:42:50.857

您的任务的替代方法是将其放在底部。将其放置在其他任何地方都是违反[iOS 用户界面指南的。](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/MobileHIG/UIElementGuidelines/UIElementGuidelines.html#//apple_ref/doc/uid/TP40006556-CH13-SW52 "标签栏指南")

# clearcase - ClearCase：查找包含多个属性之一的元素

> ID：13054640
> 
> 赞同：1
> 
> 时间：2012-10-24T17:35:47.603
> 
> 标签：clearcase

在 ClearCase 上，我使用以下命令来查找具有`foo`value 属性的所有元素`"yes"`：

```
cleartool find . -ver 'foo == "yes"' -print 
```

有没有办法在单个命令中检索具有`foo`属性值为`"yes"` **or** `"maybe"`的元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:46:20.013

`||`此处应支持运算符：

```
cleartool find . -ver 'foo == "yes" || foo="maybe"' -print
# or
cleartool find . -ver {'foo == "yes" || foo="maybe"'} -print
# or
cleartool find . -ver \{'foo == "yes" || foo="maybe"'\} -print 
```

例如，请参阅这个[更详细](http://www.samecs.com/commands/cleartool%20commands/find/find.htm#_Toc193967932)的示例：

> 具有一个属性和状态但没有第二个属性和状态，然后创建第二个属性和状态

```
cleartool find . -version \{CIstate=="Approved"  && !PRCR_controlled=="ClearQuest_Controlled" && version(/main/LATEST)}\ ' -exec \'cleartool mkattr PRCR_controlled \"ClearQuest_Controlled\" \”$CLEARCASE_XPN\”\' 
```

“[逻辑运算符](http://www-01.ibm.com/support/docview.wss?uid=swg21124425#logical-operators)”部分详细说明了它们的使用方式：

> 该`cleartool find`命令可以与 QUERY LANGUAGE 一起使用以利用逻辑运算符。
> 查看有关 query_language ( [`cleartool man query_language`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/query_language.htm)) 主题的 IBM Rational ClearCase 信息中心以获取更多详细信息。
> 
> 例子：
> 
> 使用`cleartool find`带有逻辑非 ( `!`)`&`和 ( `&&`) 运算符的命令来查找在 VOB 中未使​​用两种标签类型中的任何一种标签的元素的所有版本。

```
cleartool find . -version !"lbtype(tested) && !lbtype(release) " -print 
```

# python - 在 Python 中动态导入基类

> ID：13054646
> 
> 赞同：0
> 
> 时间：2012-10-24T17:35:59.850
> 
> 标签：python, inheritance

我有一堂课是`crawl.py`这样的：

```
from myapp.crawl import ScrapyCommand

class Command(ScrapyCommand):

    name = 'someotherapp.crawl' #this should be the dynamic import

    def handle(self, *args, **options):
        super(Command, self).handle(self, *args, **options)
        ...
        ...< custom code >
        ... 
```

一个名为的文件`list.py`包含：

```
from myapp.list import ScrapyCommand

class Command(ScrapyCommand):

    name = 'someotherapp.list' #this should be the dynamic import

    def handle(self, *args, **options):
        super(Command, self).handle(self, *args, **options)
        ...
        ...< some other custom code >
        ... 
```

他们都继承的这个类`ScrapyCommand`从两个单独的文件中调用 -`myapp/crawl.py` 和`myapp/list.py`. `ScrapyCommand`继承的看起来`crawl.py`像这样：

```
from someotherapp.crawl import OtherCommand

class ScrapyCommand(OtherCommand):     

    def __init__(self, *args, **kwargs):
        ...
        ...

    def handle(self, *args, **options):
        return 
```

`ScrapyCommand`继承的看起来`list.py`像这样：

```
from someotherapp.list import OtherCommand

class ScrapyCommand(OtherCommand):

    def __init__(self, *args, **kwargs):
        ...
        ...

    def handle(self, *args, **options):
        return 
```

为简洁起见，我编辑了此代码。中的逻辑`ScrapyCommand`很简单，除了导入语句之外，这两个文件都包含完全相同的代码。看进口。

我希望减少重复代码的数量。有没有办法，我可以让基类动态导入它自己的基类。`crawl.py`和中的代码`list.py`不同，但它们的基类中的代码完全相同。当`list.py`导入它的基类 ie`ScrapyCommand`时，该类应该从我在参数`OtherCommand`中动态指定的文件导入它的基类 ie。`name`

我怎样才能做到这一点？我还没有找到一种更简单的方法来做到这一点，我只是在这个兔子洞里走下去，因为我有很多`Commands`，我可以大大减少重复代码的数量。感谢您阅读本文。

--

至于 w`name`属性。我并不完全倾向于使用类属性。如果您可以建议更好地存储导入语句，我会使用它，但我显然需要在某个地方进行导入。我应该把它放在哪里？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:39:52.993

如果您绝对必须使用类属性来执行此操作，则可以使用元类。但是，至少从您所描述的情况来看，我看不出您不能根据需要静态导入一个或两个基类的原因。通过使用多重继承而不是试图将事物硬塞到单个继承层次结构中，您也可能会得到更好的服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:43:03.727

您可以从函数构造一个类。这能解决你的问题吗？

```
def make_scrapy_command_class(base_class):
    class ScrapyCommand(base_class):
        # your methods here
        pass

    return ScrapyCommand

ScrapyCommand = make_command_class(someotherapp.crawl.OtherCommand) 
```

# json - 如何编码 json 请求以发布到 REST 服务器

> ID：13054648
> 
> 赞同：1
> 
> 时间：2012-10-24T17:36:02.367
> 
> 标签：json

我需要调用 API 方法“newPhoto”REST Web 服务将新照片发布到特定客户端。

“newPhoto”方法定义如下：

```
￼￼￼￼method=newPhoto 
```

￼JSON 中的请求示例：

```
￼￼￼￼{"1":{"method":"newPhoto","arguments":["1192685","\/9j\/4A...” ,"front view"]}} 
```

￼ ￼￼￼￼JSON 中的响应示例：￼</p>

```
{"1":{"status":"success","result":28961285}} 
```

* * *

我有两个问题：

1.  我应该如何`data`对以下内容进行编码：

    `ClientResponse response = webResource.type("application/json").post(ClientResponse.class, data);`

    我是否需要对“数据”进行编码才能调用该`newPhoto`方法？如何？

2.  如果我有一个 data_class 包含所有照片数据，我该如何传递`data_class`to `ClientResponse response = webResource.type("application/json").post(ClientResponse.class, data);`？

我不确定我的问题是否清楚，因为我对如何通过感到困惑。

# ruby-on-rails - Rails 视图正在查看太多数据

> ID：13054655
> 
> 赞同：0
> 
> 时间：2012-10-24T17:36:19.287
> 
> 标签：ruby-on-rails, ruby, view, haml

我有这样的 RoR 观点（关于 haml）：

```
-if @articles.blank?
  %h3
    Увы, нет артикулов в данной категории

-else
  - @constr_num.each do |cc|
    = cc.ARL_SEARCH_NUMBER 
  %table.zebra
    %tr
      %th Производитель
      %th Наименование/описание
      %th    
      %th Цена
      %th Кол-во на складе
      %th Сроки поставки
      %th
    -if @non_original.present?
      %br
      - if @non_original.is_a?(Array)
        =@non_original.each do |no|
          %tr{ :class => cycle("zebra-stripe zebra-green zebra1", "zebra-stripe zebra-green zebra2")}   
            %td
              %h4
                =no.brand
            %td
              %h4
                -if user_signed_in?
                  = no.article_nr
                -else
                  = no.article_nr.first.concat("***").concat(no.article_nr.last)    
              =no.description
            %td
              = #link_to "подробнее/аналоги", "#"
            %td
              =no.price
            %td
              =no.quantity.gsub(/[^0-9]/, '').to_i
            %td
              =no.waittime
            %td
              -if no.quantity.present? && no.quantity.gsub(/[^0-9]/, '').to_i > 0  
                = #button_to 'В корзину', line_items_path(ART_ID: no), :remote => false, :class => "to-cart"    
                = #button_to 'В корзину2', line_items_path(ART: no.brand+" | "+no.article_nr+" | "+no.description, price: 11, distributor_id: no.distributor_id), :remote => false, :class => "to-cart" 
              = form_tag(line_items_path) do |f|
                = hidden_field_tag 'ART', no.brand+" | "+no.article_nr+" | "+no.description
                = #text_field_tag 'price', 11
                = hidden_field_tag 'price', no.price
                = hidden_field_tag 'distributor_id', no.distributor_id
                = submit_tag "Upload", :class => "to-cart"       

    %br
    - @articles.each do |art|
      %tr{ :class => cycle("zebra-stripe zebra-grey zebra1", "zebra-stripe zebra-grey zebra2")}       
        %td
          %h4
            = art.supplier.SUP_BRAND
            =# art.ART_ID
        %td
          = art.art_name
          %h4
            -if user_signed_in?
              = art.ART_ARTICLE_NR
            -else
              = art.ART_ARTICLE_NR.first.concat("***").concat(art.ART_ARTICLE_NR.last)    
        %td 
          = link_to "подробнее/аналоги", art
        %td
          -if art.Quantity.present? && art.Quantity > 0
            = #((art.Price.to_f - art.Price.to_f * @discont) * @eur_cur.currency_value).round(-1)
          %h4
            = #art.find_price(art.ART_ARTICLE_NR.gsub(/[^0-9A-Za-z]/, ''), art.supplier.SUP_BRAND, "price")
          %p{ :nr => art.ART_ARTICLE_NR.gsub(/[^0-9A-Za-z]/, ''), :br => art.supplier.SUP_BRAND, :type => "price", :class => "priceclass", :id => art.ART_ARTICLE_NR.gsub(/[^0-9A-Za-z]/, '')}
        %td
          %p{ :nr => art.ART_ARTICLE_NR.gsub(/[^0-9A-Za-z]/, ''), :br => art.supplier.SUP_BRAND, :type => "quantity", :class => "qntclass", :id => art.ART_ARTICLE_NR.gsub(/[^0-9A-Za-z]/, '').concat("q")}
        .logo

        %td
          %p{ :nr => art.ART_ARTICLE_NR.gsub(/[^0-9A-Za-z]/, ''), :br => art.supplier.SUP_BRAND, :type => "waittime", :class => "waittimeclass", :id => art.ART_ARTICLE_NR.gsub(/[^0-9A-Za-z]/, '').concat("w")}
        %td
          -if art.Quantity.present? && art.Quantity > 0  
            = #button_to 'В корзину', line_items_path(ART: art.supplier.SUP_BRAND+" | "+art.ART_ARTICLE_NR+" | "+art.art_name, price: 11), :remote => false, :class => "to-cart"
          = form_tag(line_items_path) do |f|
            = hidden_field_tag 'ART', art.supplier.SUP_BRAND+" | "+art.ART_ARTICLE_NR+" | "+art.art_name
            = #text_field_tag 'price', 11
            = hidden_field_tag 'price', 0, :id => art.ART_ARTICLE_NR.gsub(/[^0-9A-Za-z]/, '')
            = hidden_field_tag 'distributor_id', 1
            = submit_tag "Upload", :class => "to-cart"
    - if @oem_art.is_a?(Array)
      =@oem_art.each do |oem|
        %tr{ :class => cycle("zebra-stripe zebra-blue zebra1", "zebra-stripe zebra-blue zebra2")}   
          %td
            %h4
              =#oem[oem][:car]

  .pagination_content
    = paginate @articles  
  %h4
    Не нашли необходимую запчасть?
  = link_to "Сделать on-line запрос менеджеру", new_ask_vin_path 
```

我认为我必须看到普通表，但我首先`=@non_original.each do |no|`喜欢

```
[#<PriceList id: 77845, distributor_id: 1, brand: "TECH-AS", article_nr: "110064Q", price: 3.0, quantity: ">8", waittime: 1, description: "110064Q (TO1341D) OX143D 1100696 AUDI/VW TDI", created_at: "2012-10-11 21:21:56", updated_at: "2012-10-11 21:21:56">, #<PriceList id: 7253, distributor_id: 1, brand: "CARGO", article_nr: "B140036", price: 0.0, quantity: "0", waittime: 1, description: "140036A 3471553 Del 12.08x14.08x14.00", created_at: "2012-10-11 09:36:26", updated_at: "2012-10-11 09:36:26">] 
```

但是后来我在表格中看到了这些数据……这太神奇了）我怎样才能只在表格中看到这些数据？

看截图： ![截屏](../Images/bc746d84619a139d0a22f7a446c7b761.png)

我的控制器也是这样的：

```
def get_parts_via_category
    *****(secret))))
    @articles = Kaminari.paginate_array(@pre_articles).page(params[:page]).per(20)

    @asdasd = ArtLookup.get_construction_number(@pre_articles.map(&:ART_ID))
    @constr_num = @asdasd.uniq{|x| x.ARL_SEARCH_NUMBER}
    logger.warn("mE gusta !!!!!!")
    non_original = []
    @pre_articles.each do |a|
      logger.warn("SDFSDFS fsdf sdf sdfSDF SDF SD !!!!!!!!!!! dgfdfg d*fd*g fd-gd f")
      a.logger.warn(a.supplier.SUP_BRAND.gsub(/[^0-9A-Za-z]/, ''))
      norig = get_non_tecdoc(a.ART_ARTICLE_NR.to_s.gsub(/[^0-9A-Za-z]/, ''), 1, a.supplier.SUP_BRAND)
      if norig.present?
        non_original << norig
      end      
    end

    oem_art = []
    @constr_num.each do |o|
      as_oem = get_from_as_oem(o.ARL_SEARCH_NUMBER)
      if as_oem.present?
        oem_art << as_oem
      end
    end    
    @non_original = non_original.uniq
    @oem_art = oem_art.to_a.uniq

    @eur_cur = Currency.find_by_currency_name("EUR")
      @discont = 0
    if user_signed_in?
      @discont = 0.01
      user = User.find(current_user.id)
      @total = 0
      for order in user.orders do
        @total += order.totalcost
        if @total >=0 && @total <= 1000000
          @discont = 0.02
        end
        if @total >=1000000 && @total < 7000000
          @discont = 0.1
        end
        if @total >=7000000 && @total < 10000000
          @discont = 0.15
        end
        if @total >=10000000
          @discont = 0.2
        end
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:44:46.247

您的线路：

```
=@non_original.each do |no| 
```

必须以`-`符号开头：

```
-@non_original.each do |no| 
```

这样你将*隐藏`each`方法*`do ... end`的结果，如果你传递一个块（或） ，它会返回数组本身`{ ... }`：

```
[1,2,3].each{} # => [1, 2, 3] 
```

# database - 查询的近似行数和执行时间

> ID：13054656
> 
> 赞同：1
> 
> 时间：2012-10-24T17:36:32.693
> 
> 标签：database, oracle

我想在执行查询**之前**评估查询的行数和执行时间。是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T17:47:47.923

查询计划可以显示优化器估计将返回（或修改）多少行以及优化器估计查询将运行多长时间。然而，由于这些估计与表格上的统计数据有关，因此它们完全有可能完全不正确。

但是，如果我进行简单的查询

```
SQL> explain plan for select count(*) from emp where deptno = 10;

Explained.

SQL> select *
  2    from table( dbms_xplan.display );

PLAN_TABLE_OUTPUT
--------------------------------------------------------------------------------
Plan hash value: 2083865914

---------------------------------------------------------------------------
| Id  | Operation          | Name | Rows  | Bytes | Cost (%CPU)| Time     |
---------------------------------------------------------------------------
|   0 | SELECT STATEMENT   |      |     1 |     3 |     3   (0)| 00:00:01 |
|   1 |  SORT AGGREGATE    |      |     1 |     3 |            |          |
|*  2 |   TABLE ACCESS FULL| EMP  |     3 |     9 |     3   (0)| 00:00:01 |
---------------------------------------------------------------------------

Predicate Information (identified by operation id):

PLAN_TABLE_OUTPUT
--------------------------------------------------------------------------------

   2 - filter("DEPTNO"=10)

14 rows selected. 
```

Oracle 期望对表进行全表扫描`EMP`，过滤掉`deptno = 10`将返回 3 行并花费 1 秒的行（查询计划中带有 的行的`Rows`和列）。Oracle 期望行上的聚合将其减少到 1 行。因此，在带有 的行上，Oracle 期望语句返回 1 行并运行 1 秒。`Time``id = 2``COUNT(*)``id = 1``id = 0``SELECT`

# rtmp - RTMP 库 .Net 西兰花

> ID：13054670
> 
> 赞同：1
> 
> 时间：2012-10-24T17:37:18.507
> 
> 标签：rtmp

我正在使用 Broccoli Products 的 RTMP .Net 客户端库来保存直播广播。我尝试他们的示例 FileDump.cs[单击此处查看](http://www.broccoliproducts.com/softnotebook/rtmpclient/FileDump.cs)包含这些数据的代码：

```
RtmpServer  77.67.21.79
RtmpPort  RtmpClient.DefaultRtmpPort
RtmpApp   live/
RtmpTcUrl  rtmp://cp154821.live.edgefcs.net/live/
RtmpStreamName  Radio24Audio@69140 
```

我收到此错误：

```
!!! Failed to play stream.  Stream not found.  Server response follows:  OBJECT
Children=5 STRING level="error", STRING code="NetStream.Play.StreamNotFound", ST
RING description="Failed to play Radio24Audio@69140; stream not found.", STRING
details="Radio24Audio@69140", STRING clientid="pAAnAEBA" 
```

但是如果我使用具有相同数据的 RTMPDump 程序就可以了

# objective-c - 当我有对象根时如何使用 RestKit 的对象映射？

> ID：13054672
> 
> 赞同：0
> 
> 时间：2012-10-24T17:37:30.183
> 
> 标签：objective-c, ios, json, restkit

当我的 JSON 看起来像这样时，RestKit 的对象映射效果很好：

```
{
    "users" : [
                  {
                      "first_name": "John",
                      "last_name":  "Doe"
                  },
                  {
                      "first_name": "Bill",
                      "last_name":  "Smith"
                  }
              ]
} 
```

但是，我的 JSON 看起来像这样：

```
{
    "users" : [
                  {
                      "user": {
                                  "first_name": "John",
                                  "last_name":  "Doe"
                               }
                  },
                  {
                      "user": {
                                  "first_name": "Bill",
                                  "last_name":  "Smith"
                               }
                  }
              ]
} 
```

无论如何，我都无法找到让 RestKit 的对象映射工作的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:02:04.567

我想你想映射一个用户对象数组。用户应该具有这两个属性。你是如何映射它的？

# r - 如何使用 R 指定 2000 年每个月的天数？

> ID：13054675
> 
> 赞同：1
> 
> 时间：2012-10-24T17:37:32.490
> 
> 标签：r, binary

我正在尝试计算每月产品（二进制文件）的年度总数[https://echange-fichiers.inra.fr/get?k=Jr3tvgeKnWUiC1B0MMY](https://echange-fichiers.inra.fr/get?k=Jr3tvgeKnWUiC1B0MMY)。所以我有 12 个文件，我必须计算总和。下面给出的代码运行良好，但我需要将每个文件乘以对应于该年该月的天数，然后计算总和。就我而言，这些数据是 2000 年（闰年），所以我想将文件号 1 的结果乘以 31，将文件号 2 的结果乘以 29，依此类推....

```
 files<- list.files("C:\\jung file_2000_img", "*.img", full.names = TRUE)
x<- do.call(rbind,(lapply(files, readBin  , double() , size = 4 , n=360 * 720 , signed =TRUE)))
results <- colSums(x)
fileName <- sprintf("C:\\annual_ET2000_without999_1.img")
writeBin(as.double(results), fileName, size = 4) 
```

根据詹姆斯的回答，这将计算天数：

```
 numDays <- function(month,year){
as.numeric(strftime(as.Date(paste(year+month%/%12,month%%12+1,"01",sep="-"))-1,"%d"))
         } 
```

那么现在如何将它应用到我上面的代码中呢？我的意思是我想获取每个文件的结果并将其乘以天数，例如：

```
 file1*numDays(1,2000)+file2*numDays(2,2000)+file3*numDays(3,2000)
             .............file12*numDays(12,2000) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T17:47:34.647

这是之前在这里使用的一个技巧：计算下个月的第一*天*，然后返回一天以获得当月的最后*一天*：

```
R> seq(as.Date("2000-02-01"), as.Date("2001-01-01"), by="1 month")
[1]  "2000-02-01" "2000-03-01" "2000-04-01" "2000-05-01" "2000-06-01" 
[6]  "2000-07-01" "2000-08-01" "2000-09-01" "2000-10-01" "2000-11-01" 
[11] "2000-12-01" "2001-01-01"
R> seq(as.Date("2000-02-01"), as.Date("2001-01-01"), by="1 month") - 1
[1]  "2000-01-31" "2000-02-29" "2000-03-31" "2000-04-30" "2000-05-31" 
[6]  "2000-06-30" "2000-07-31" "2000-08-31" "2000-09-30" "2000-10-31" 
[11] "2000-11-30" "2000-12-31" 
```

然后使用`POSIXlt`具有“日期”字段的表示：

```
R> as.POSIXlt(seq(as.Date("2000-02-01"), as.Date("2001-01-01"), 
+             by="1 month") - 1)$mday
[1] 31 29 31 30 31 30 31 31 30 31 30 31
R> sum(as.POSIXlt(seq(as.Date("2000-02-01"), as.Date("2001-01-01"), 
+                     by="1 month") - 1)$mday)
[1] 366
R> 
```

# postgresql-9.1 - pg gem 无法在omnibus Chef 安装上安装

> ID：13054676
> 
> 赞同：5
> 
> 时间：2012-10-24T17:37:36.297
> 
> 标签：postgresql-9.1, chef-infra, pg

奥拉所有聪明的人。我正面临一个我试图解决但失败的问题。我正在尝试在安装了 Omnibus Chef 的服务器上安装 pg gem，即[http://www.opscode.com/chef/install/](http://www.opscode.com/chef/install/)

基本上已经报告了这个问题（http://tickets.opscode.com/browse/COOK-1406），但如果有的话，我正在寻找解决方案 - 建议从 Opscode Ubuntu repos 安装包的解决方法 -但是那些带有 ruby​​ 1.8 - 我希望我不必继续，为什么我不愿意这样做:)

我在安装 pg gem 时遇到的错误是：

```
$ sudo /opt/chef/embedded/bin/gem install pg 
Building native extensions.  This could take a while...
ERROR:  Error installing pg:
    ERROR: Failed to build gem native extension.

        /opt/chef/embedded/bin/ruby extconf.rb
checking for pg_config... yes
Using config values from /usr/bin/pg_config
checking for libpq-fe.h... yes
checking for libpq/libpq-fs.h... yes
checking for pg_config_manual.h... yes
checking for PQconnectdb() in -lpq... no
checking for PQconnectdb() in -llibpq... no
checking for PQconnectdb() in -lms/libpq... no
Can't find the PostgreSQL client library (libpq)
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/opt/chef/embedded/bin/ruby
    --with-pg
    --without-pg
    --with-pg-dir
    --without-pg-dir
    --with-pg-include
    --without-pg-include=${pg-dir}/include
    --with-pg-lib
    --without-pg-lib=${pg-dir}/lib
    --with-pg-config
    --without-pg-config
    --with-pg_config
    --without-pg_config
    --with-pqlib
    --without-pqlib
    --with-libpqlib
    --without-libpqlib
    --with-ms/libpqlib
    --without-ms/libpqlib

Gem files will remain installed in /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/pg-0.14.1 for inspection.
Results logged to /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/pg-0.14.1/ext/gem_make.out 
```

mkmf.log 中的故障位如下：

```
have_library: checking for PQconnectdb() in -lpq... -------------------- no

"gcc -o conftest -I/opt/chef/embedded/include/ruby-1.9.1/x86_64-linux -I/opt/chef/embedded/include/ruby-1.9.1/ruby/backward -I/opt/chef/embedded/include/ruby-1.9.1 -I. -I/opt/chef/embedded/include    -I/usr/include/postgresql -I/opt/chef/embedded/include -fPIC conftest.c  -L. -L/opt/chef/embedded/lib -Wl,-R/opt/chef/embedded/lib -L/opt/chef/embedded/lib -Wl,-R/opt/chef/embedded/lib -L. -Wl,-rpath,/opt/chef/embedded/lib -L/opt/chef/embedded/lib -rdynamic -Wl,-export-dynamic -L/usr/lib     -Wl,-R -Wl,/opt/chef/embedded/lib -L/opt/chef/embedded/lib -lruby -lpq  -lpthread -lrt -ldl -lcrypt -lm   -lc"
/usr/lib/libpq.so: undefined reference to `SSL_CTX_use_certificate_chain_file@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `SSL_write@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `SSL_set_fd@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `SSL_use_PrivateKey_file@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `CRYPTO_set_locking_callback@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `X509_NAME_get_text_by_NID@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `SSL_connect@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `ENGINE_init@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `X509_STORE_load_locations@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `SSL_CTX_get_cert_store@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `SSL_free@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `SSL_library_init@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `SSL_CTX_ctrl@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `ERR_get_error@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `SSL_pending@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `ENGINE_free@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `X509_get_subject_name@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `SSL_use_certificate_file@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `SSL_check_private_key@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `SSL_load_error_strings@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `ENGINE_by_id@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `SSL_get_peer_certificate@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `SSL_CTX_new@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `CRYPTO_num_locks@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `ENGINE_load_private_key@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `ENGINE_finish@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `SSL_set_verify@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `X509_free@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `CRYPTO_set_id_callback@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `SSL_get_error@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `SSL_new@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `SSL_shutdown@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `SSL_use_PrivateKey@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `TLSv1_method@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `X509_STORE_set_flags@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `SSL_read@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `OPENSSL_config@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `SSL_CTX_load_verify_locations@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `ERR_reason_error_string@OPENSSL_1.0.0'
/usr/lib/libpq.so: undefined reference to `SSL_set_ex_data@OPENSSL_1.0.0'
collect2: ld returned 1 exit status
checked program was:
/* begin */
1: #include "ruby.h"
2: 
3: #include <libpq-fe.h>
4: 
5: /*top*/
6: int main() {return 0;}
7: int t() { void ((*volatile p)()); p = (void ((*)()))PQconnectdb; return 0; }
/* end */

"gcc -o conftest -I/opt/chef/embedded/include/ruby-1.9.1/x86_64-linux -I/opt/chef/embedded/include/ruby-1.9.1/ruby/backward -I/opt/chef/embedded/include/ruby-1.9.1 -I. -I/opt/chef/embedded/include    -I/usr/include/postgresql -I/opt/chef/embedded/include -fPIC conftest.c  -L. -L/opt/chef/embedded/lib -Wl,-R/opt/chef/embedded/lib -L/opt/chef/embedded/lib -Wl,-R/opt/chef/embedded/lib -L. -Wl,-rpath,/opt/chef/embedded/lib -L/opt/chef/embedded/lib -rdynamic -Wl,-export-dynamic -L/usr/lib     -Wl,-R -Wl,/opt/chef/embedded/lib -L/opt/chef/embedded/lib -lruby -lpq  -lpthread -lrt -ldl -lcrypt -lm   -lc"
conftest.c: In function ‘t’:
conftest.c:7:1: error: too few arguments to function ‘PQconnectdb’
/usr/include/postgresql/libpq-fe.h:243:16: note: declared here
checked program was:
/* begin */
1: #include "ruby.h"
2: 
3: #include <libpq-fe.h>
4: 
5: /*top*/
6: int main() {return 0;}
7: int t() { PQconnectdb(); return 0; }
/* end */

--------------------

have_library: checking for PQconnectdb() in -llibpq... -------------------- no

"gcc -o conftest -I/opt/chef/embedded/include/ruby-1.9.1/x86_64-linux -I/opt/chef/embedded/include/ruby-1.9.1/ruby/backward -I/opt/chef/embedded/include/ruby-1.9.1 -I. -I/opt/chef/embedded/include    -I/usr/include/postgresql -I/opt/chef/embedded/include -fPIC conftest.c  -L. -L/opt/chef/embedded/lib -Wl,-R/opt/chef/embedded/lib -L/opt/chef/embedded/lib -Wl,-R/opt/chef/embedded/lib -L. -Wl,-rpath,/opt/chef/embedded/lib -L/opt/chef/embedded/lib -rdynamic -Wl,-export-dynamic -L/usr/lib     -Wl,-R -Wl,/opt/chef/embedded/lib -L/opt/chef/embedded/lib -lruby -llibpq  -lpthread -lrt -ldl -lcrypt -lm   -lc"
/usr/bin/ld: cannot find -llibpq
collect2: ld returned 1 exit status
checked program was:
/* begin */
1: #include "ruby.h"
2: 
3: #include <libpq-fe.h>
4: 
5: /*top*/
6: int main() {return 0;}
7: int t() { void ((*volatile p)()); p = (void ((*)()))PQconnectdb; return 0; }
/* end */

"gcc -o conftest -I/opt/chef/embedded/include/ruby-1.9.1/x86_64-linux -I/opt/chef/embedded/include/ruby-1.9.1/ruby/backward -I/opt/chef/embedded/include/ruby-1.9.1 -I. -I/opt/chef/embedded/include    -I/usr/include/postgresql -I/opt/chef/embedded/include -fPIC conftest.c  -L. -L/opt/chef/embedded/lib -Wl,-R/opt/chef/embedded/lib -L/opt/chef/embedded/lib -Wl,-R/opt/chef/embedded/lib -L. -Wl,-rpath,/opt/chef/embedded/lib -L/opt/chef/embedded/lib -rdynamic -Wl,-export-dynamic -L/usr/lib     -Wl,-R -Wl,/opt/chef/embedded/lib -L/opt/chef/embedded/lib -lruby -llibpq  -lpthread -lrt -ldl -lcrypt -lm   -lc"
conftest.c: In function ‘t’:
conftest.c:7:1: error: too few arguments to function ‘PQconnectdb’
/usr/include/postgresql/libpq-fe.h:243:16: note: declared here
checked program was:
/* begin */
1: #include "ruby.h"
2: 
3: #include <libpq-fe.h>
4: 
5: /*top*/
6: int main() {return 0;}
7: int t() { PQconnectdb(); return 0; }
/* end */

--------------------

have_library: checking for PQconnectdb() in -lms/libpq... -------------------- no

"gcc -o conftest -I/opt/chef/embedded/include/ruby-1.9.1/x86_64-linux -I/opt/chef/embedded/include/ruby-1.9.1/ruby/backward -I/opt/chef/embedded/include/ruby-1.9.1 -I. -I/opt/chef/embedded/include    -I/usr/include/postgresql -I/opt/chef/embedded/include -fPIC conftest.c  -L. -L/opt/chef/embedded/lib -Wl,-R/opt/chef/embedded/lib -L/opt/chef/embedded/lib -Wl,-R/opt/chef/embedded/lib -L. -Wl,-rpath,/opt/chef/embedded/lib -L/opt/chef/embedded/lib -rdynamic -Wl,-export-dynamic -L/usr/lib     -Wl,-R -Wl,/opt/chef/embedded/lib -L/opt/chef/embedded/lib -lruby -lms/libpq  -lpthread -lrt -ldl -lcrypt -lm   -lc"
/usr/bin/ld: cannot find -lms/libpq
collect2: ld returned 1 exit status
checked program was:
/* begin */
1: #include "ruby.h"
2: 
3: #include <libpq-fe.h>
4: 
5: /*top*/
6: int main() {return 0;}
7: int t() { void ((*volatile p)()); p = (void ((*)()))PQconnectdb; return 0; }
/* end */

"gcc -o conftest -I/opt/chef/embedded/include/ruby-1.9.1/x86_64-linux -I/opt/chef/embedded/include/ruby-1.9.1/ruby/backward -I/opt/chef/embedded/include/ruby-1.9.1 -I. -I/opt/chef/embedded/include    -I/usr/include/postgresql -I/opt/chef/embedded/include -fPIC conftest.c  -L. -L/opt/chef/embedded/lib -Wl,-R/opt/chef/embedded/lib -L/opt/chef/embedded/lib -Wl,-R/opt/chef/embedded/lib -L. -Wl,-rpath,/opt/chef/embedded/lib -L/opt/chef/embedded/lib -rdynamic -Wl,-export-dynamic -L/usr/lib     -Wl,-R -Wl,/opt/chef/embedded/lib -L/opt/chef/embedded/lib -lruby -lms/libpq  -lpthread -lrt -ldl -lcrypt -lm   -lc"
conftest.c: In function ‘t’:
conftest.c:7:1: error: too few arguments to function ‘PQconnectdb’
/usr/include/postgresql/libpq-fe.h:243:16: note: declared here
checked program was:
/* begin */
1: #include "ruby.h"
2: 
3: #include <libpq-fe.h>
4: 
5: /*top*/
6: int main() {return 0;}
7: int t() { PQconnectdb(); return 0; }
/* end */

-------------------- 
```

我认为问题在于 pg gem 链接到的库与构建 postgresql 的库不同，并且编译失败。我只是想知道是否有什么办法可以解决这个问题？任何惊人的聪明头脑？干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:18:54.563

我能够通过下载 postgresql 源代码来安装 pg gem，并通过在 /opt/chef/embedded 中构建 vs 库来编译它。这不是最佳的，但它应该可以工作（警告：我没有在食谱或红宝石程序中尝试过）：

```
apt-get install -y build-essential
apt-get build-dep -y postgresql
wget http://ftp.postgresql.org/pub/source/v9.2.1/postgresql-9.2.1.tar.gz
tar -zxvf postgresql-9.2.1.tar.gz
cd postgresql-9.2.1
export MAJOR_VER=9.2
./configure \
  --prefix=/opt/chef/embedded \
  --mandir=/opt/chef/embedded/share/postgresql/${MAJOR_VER}/man \
  --docdir=/opt/chef/embedded/share/doc/postgresql-doc-${MAJOR_VER} \
  --sysconfdir=/etc/postgresql-common \
  --datarootdir=/opt/chef/embedded/share/ \
  --datadir=/opt/chef/embedded/share/postgresql/${MAJOR_VER} \
  --bindir=/opt/chef/embedded/lib/postgresql/${MAJOR_VER}/bin \
  --libdir=/opt/chef/embedded/lib/ \
  --libexecdir=/opt/chef/embedded/lib/postgresql/ \
  --includedir=/opt/chef/embedded/include/postgresql/ \
  --enable-nls \
  --enable-integer-datetimes \
  --enable-thread-safety \
  --enable-debug \
  --with-gnu-ld \
  --with-pgport=5432 \
  --with-openssl \
  --with-libedit-preferred \
  --with-includes=/opt/chef/embedded/include \
  --with-libs=/opt/chef/embedded/lib
make
sudo make install
sudo /opt/chef/embedded/bin/gem install pg -- --with-pg-config=/opt/chef/embedded/lib/postgresql/9.2/bin/pg_config 
```

[https://gist.github.com/3954641](https://gist.github.com/3954641)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-31T12:47:56.053

尝试在编译时添加“-lssl -lcrypto”。在编译基于 openssl 的应用程序时它对我有用

# c - 存储函数指针时禁止 GCC 警告

> ID：13054677
> 
> 赞同：2
> 
> 时间：2012-10-24T17:37:40.393
> 
> 标签：c, gcc, compiler-warnings

我正在编写一个跨平台的 OpenGL 函数加载库。在 Windows 上，编译器（奇怪的是，VS*和*GCC）似乎很好地将一种函数指针（从`wglGetProcAddress`a的返回类型`void(*)()`）隐式转换为另一种类型的函数指针。

*然而， Linux*上的 GCC不是。`glXGetProcAddress`将返回 a `void(*)()`，但它总是会发出警告。而且由于 OpenGL 确实有成千上万个这样的东西，它加起来是一个完全无关紧要的巨大诊断喷涌。

有没有办法禁用这个特定的警告？通过某种`#pragma`或某种方式重新排列代码以使 GCC 关闭？我尝试了整个`#pragma diagnostic ignore -Wblahblah`，但我找不到与我收到的警告相匹配的“blahblah”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:43:02.353

我很确定您应该使用提供的宏来获取正确的类型。例如，取自[gl3w](https://github.com/skaslev/gl3w) OpenGL 扩展加载程序（您必须运行 python 脚本才能让它生成这样的代码），它的行如下所示：

```
gl3wBindImageTexture = (PFNGLBINDIMAGETEXTUREPROC)get_proc("glBindImageTexture"); 
```

中间那个奇怪`PFNGLBINDIMAGETEXTUREPROC`的是函数的正确函数类型的宏`glBindImageTexture`（你可以看到它的名字实际上是`P`ointer `F`unctio `N` `GLBINDIMAGETEXTURE` `PROC`）。

# c# - 用于自动测试的 Db4o 数据库

> ID：13054680
> 
> 赞同：1
> 
> 时间：2012-10-24T17:37:54.580
> 
> 标签：c#, unit-testing, db4o

我们在项目中使用 Db4o。

我有一些自动测试，测试对象的持久性。问题是，我无法两次打开/创建数据库。我有两种获取对象容器的辅助方法。但是当第二次调用该方法时，“ArgumentException：配置已使用”。被抛出。我当然关闭并处理了以前的对象容器。

我做错了什么？

**代码：**

```
public static IObjectContainer GetEmptyTestingDatabase() {
    var tempDir = Environment.GetFolderPath(Environment.SpecialFolder.InternetCache);
    string dbFilePath = Path.Combine(tempDir, "UNIT-TESTING.db4o");
    if (File.Exists(dbFilePath)) {
        File.Delete(dbFilePath);
    }

    var cfg = Db4oFactory.Configure();
    cfg.Add(new TransparentPersistenceSupport(new DeactivatingRollbackStrategy()));
    cfg.Add(new TransparentActivationSupport());

    var db = Db4oFactory.OpenFile(cfg, dbFilePath);
    return db;
}
public static IObjectContainer GetMemoryDatabase() {
    string dbFileName = Guid.NewGuid().ToString().ToString();

    var cfg = Db4oFactory.Configure();
    cfg.Storage = new Db4objects.Db4o.IO.PagingMemoryStorage();
    cfg.Add(new TransparentPersistenceSupport(new DeactivatingRollbackStrategy()));
    cfg.Add(new TransparentActivationSupport());

    var db = Db4oFactory.OpenFile(cfg, dbFileName);
    return db;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:21:59.320

您正在使用已弃用的 db4o 方法。问题是 Db4oFactory.Configure() 返回一个静态配置对象；这种方法只是为了向后兼容。

如果您使用较新的 db4o 版本，请改用 Db4oEmbedded.NewConfiguration()。否则（如果您真的需要坚持使用较旧的 db4o 版本）使用 Db4oFactory.NewConfiguration() 也应该可以工作。

# c++ - 对象创建中涉及的构造函数和析构函数调用

> ID：13054681
> 
> 赞同：2
> 
> 时间：2012-10-24T17:37:58.420
> 
> 标签：c++, default-constructor

我正在使用以下代码片段来比较在 C++ 中创建对象的两种方法。

```
#include <iostream>

using std::cout;
using std::endl;

class Foo {
    public:
        Foo() : x(0) { cout << "In Foo constructor." << endl; }
        ~Foo() { cout << "In Foo destructor." << endl; }
        Foo(const Foo&) { cout << "In Foo copy constructor." << endl; }

        // Assignment operator.
        Foo& operator=(const Foo&) {
            cout << "In assignment operator." << endl;
            return *this;
        }

    private:
        int x;
};

int main() {

    cout << "Constructing Foo 1" << endl;
    Foo Foo_1;
    cout << "Constructing Foo 2" << endl;
    Foo Foo_2 = Foo();

    return 0;
} 
```

此代码段的输出是：

```
 Constructing Foo 1
  In Foo constructor.
  Constructing Foo 2
  In Foo constructor.
  In Foo destructor.
  In Foo destructor. 
```

我正在使用**Visual C++ 2010**（编译器版本 16.x），我正在使用`cl /EHsc /W4 test.cpp`. 在. `Foo_2`_ `Foo_2`有人可以向我解释为什么不是这样。抱歉，如果我在这里遗漏了一些非常明显的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T17:48:20.663

有两种初始化形式可用于`Foo`：

```
Foo f1;
Foo f2 = Foo(); 
```

第一个`f`直接构造，使用默认构造函数。第二个`Foo`使用默认构造函数构造一个临时类型，并将该临时复制到`f2`. 后者就是您所描述的您所期望的。你是对的，除了一个额外的规则：如果这种形式的初始化是有效的（它在这里；将复制构造函数设为私有，看看会发生什么），编译器可以“省略”复制构造并`f2`直接构造，就像在第一个版本中一样。这就是你所看到的。编译器不需要省略复制构造函数，但我最近使用的每一个都需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:42:42.660

`Foo Foo_2 = Foo();`类似于`Foo Foo_2(Foo());`。编译器足够聪明地做到这一点，没有调用赋值运算符。顺便说一句，您在赋值运算符中有一个错误-您返回对对象的引用而不是复制它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T18:04:06.520

第一个“本周大师”问题只是关于您的问题[http://www.gotw.ca/gotw/001.htm](http://www.gotw.ca/gotw/001.htm) 特别是关于编译器优化的说明。

# javascript - 基于 User-Agent 提供 JavaScript

> ID：13054682
> 
> 赞同：10
> 
> 时间：2012-10-24T17:38:03.670
> 
> 标签：javascript, webserver, user-agent

我很好奇在 Web 服务器中使用用户代理检测来确定将哪个版本的 JavaScript 资源发送到客户端的利弊。

特别是，如果某些 Web 浏览器本身支持某个功能，而其他浏览器需要详细的 JavaScript 解决方法，那么最好将解决方法提供给每个人并仅在客户端需要时才运行它，或者仅将解决方法提供给需要的浏览器它并向其余部分发送一个围绕本机功能的薄包装？

第二种方法可能会出现什么问题，它们是否会超过支持浏览器的较小响应的好处？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:51:36.010

`RequireJS`您可以使用（或类似的）按需加载“可选”内容。

> 1）在页面加载...用小测试测试功能（Modernizr）
> 
> 2）如果测试成功，使用native，如果失败，使用RequireJS加载你的其他资源
> 
> 3) 利润。

这确实假设您不介意额外的 http 请求....这些测试、加载、重复过程中的太多可能会减慢速度，而不仅仅是包含一个大 (r) 文件，因此它取决于大小写，但绝对是合理的中间地带...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T18:00:17.970

通常，向所有客户端发送一份 javascript 副本并让 javascript 本身进行功能检测以确定如何最好地处理每个浏览器是一个更好的解决方案。这具有以下优点：

1.  特征检测比浏览器检测更准确且向前兼容，即使是您从未见过的浏览器也是如此。
2.  您将获得一份适用于所有浏览器的 javascript 副本，这通常更容易测试和部署，并且不需要服务器端分发逻辑。
3.  开发一套适应客户条件的通用 javascript 通常比开发 N 个不同版本的站点 javascript 容易得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T13:00:35.550

这在 Pro 或 Con 中都没有，但从 SEO 的角度来看，您应该考虑 Googlebot 将始终看到“解决方法”版本。（我假设这是默认的，当没有识别到​​用户代理时）

我之所以这么说是因为我看到几个网站在实现基于用户代理/cookie 的自定义 JS 规则时进行了尝试。

回到您最初的问题，我建议使用单一版本方法 - 仅仅是因为它更易于管理并且不需要您跟踪脚本的多个版本。

@BLSully 在这里（+1）也提出了一个很好的观点，即这将导致额外的 HTTP 请求。您的整体网站速度可能会直线下降，或者任何收益都会大大减少。

你可以做很多更好的事情来加速 - 如果这确实是你的目标......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-18T07:01:14.200

另一种可能性（无需额外的 http 请求）是使用用户代理标头来发送不同版本的内容。查看有关此主题的[设备图集文章或查看有关](https://deviceatlas.com/blog/user-agent-parsing-how-it-works-and-how-it-can-be-used)[在野外使用此技术的](https://mobiforge.com/news-comment/adaptive-web-design-dominates-in-the-webs-top-brands)参考文章。

我认为是专业人士：

*   情人发送给客户端的内容量（特别是对于移动设备，这很好）
*   浏览器将使用情人资源而不需要它不需要的代码

缺点：

*   需要维护各种数量的javascript版本
*   用户代理解析正在移动目标

# c - 在c程序中遇到段错误

> ID：13054687
> 
> 赞同：1
> 
> 时间：2012-10-24T17:38:23.820
> 
> 标签：c, arrays, pointers, segmentation-fault, extern

> **可能重复：**
> [指针数组外部问题](https://stackoverflow.com/questions/6385850/pointer-array-extern-question)

我们有两个文件：

文件1.c

```
int myarray[10]; 
```

文件2.c

```
extern int *myarray;

void foo()
{
    myarray[0]=10;
}

void main() 
{
    foo();
} 
```

该程序给出了分段错误。但是，如果我们将 更改`extern int *myarray`为`extern int myarray[]`，则程序可以运行。

请解释。谢谢！

# jquery - jQuery 动画的步骤

> ID：13054690
> 
> 赞同：0
> 
> 时间：2012-10-24T17:38:30.860
> 
> 标签：jquery

我正在使用一个演示代码，其中 div 将移动到右侧以获得特定位置，然后它将移动到底部意味着

```
DIV started moving------------------>     
                                    . Div turn to bottom        
                                    .
                                    .
                                    .
                                    .
                                    .
                                    V
                       Div's place after move and turn 
```

为了制作这种类型的动画，我应该阅读和使用哪些代码。我已经知道了两种代码格式。我正在粘贴两个演示代码。

***如何解决这个问题***：

```
 1\. $( 'span' ).animate({ 
        // Properties of the elements to animate 
        opacity: 0.25, 
        left: '+=50' 
    }, 
    { 
        // step is a callback for each step of the animation 
        step: function( now, fx ) { 
            // do stuff... 
        } 
    }); 

  2\. $.when($('#foo').animate({
            top: 100,
            left: 100
        }, 3000)).pipe(function() {
            return this.animate({
                top: 0,
                left: 0
            }, 3000);
        }).then(function() {
            console.log('done');
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:45:27.143

这里没有必要做任何推迟。我们有在某事完成后执行的回调，因此我们不需要捕获 when/then/pipe 延迟方法。

```
$('span').animate({
    top: 100,
    left: 100
}, 3000, function(){
    $('span').animate({
        top: 0,
        left: 0
    }, 3000, function(){ 
        console.log('done')
    });
}); 
```

[这是jsFiddle](http://jsfiddle.net/BWwBq/)

# javascript - TypeScript / 模块/类的导入和导出 - 运行导入的类时出现运行时错误

> ID：13054693
> 
> 赞同：1
> 
> 时间：2012-10-24T17:38:44.667
> 
> 标签：javascript, typescript

我正在使用打字稿。

我在文件**String.ts**中有以下内容：

```
module Sgc.Sys {
    "use strict";
    export class String {       
        static trim(input: string): string {
            return input.replace(/^\s+|\s+$/g, "");
        };
//-- other methods below ...
    }
} 
```

然后在文件**Number.ts**（位于 String.ts 的同一文件夹中）中，我使用上面定义的方法 Sgc.Sys.String.trim()：

```
module Sgc.Sys {
    "use strict";
    export class Number {

    static someMethod(input : string) : string {
            //-- some code
            var str = Sgc.Sys.String.trim(input);
            return str;

        };
    }
} 
```

问题： Sgc.Sys.String 的方法 trim 必须如上所述定义/调用才能被 TypeScript 无错误地接受；但是，在运行时 Sgc.Sys.String 未定义，因此 Sgs.Sys.String.trim(input) 触发异常。

当 String.ts 和 Number.ts 都在同一个文件夹 ..\Sgc\Sys 中时，我应该能够从 Sgc.Sys.Number 内部调用 Sgc.Sys.String.trim 什么？

谢谢，MG

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:57:32.670

您必须添加对 Number.ts 文件的引用：

```
/// <reference path="String.ts" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:58:52.517

如果您在运行时遇到错误，您需要确保在您的页面上包含两个已编译的 JavaScript 文件。

我假设您没有根据您的代码示例使用模块加载。

```
<script src="/Sgc/Sys/String.js"></script>
<script src="/Sgc/Sys/Number.js"></script> 
```

补充说明...

默认情况下，TypeScript 以 ECMAScript 3 为目标，因此您的“使用严格”语句不会有任何效果 - 您需要针对此功能以 ECMAScript 5 为目标。

# typo3 - RealURL 给了我 http://www.domain.com/4/ 链接

> ID：13054695
> 
> 赞同：3
> 
> 时间：2012-10-24T17:38:50.570
> 
> 标签：typo3, realurl

我设置了一个新的 TYPO3 4.7.5 并安装了 RealURL 1.12.3。如果我激活 RealURL，我的 URL 将不起作用，因为我得到了类似的链接

`http://www.domain.com/4/` `http://www.domain.com/7/`

我做错了什么？好像忘记了什么。

我把它放在我的主模板中

```
config {
        baseURL = http://www.domain.com/
        simulateStaticDocuments = 0
        tx_realurl_enable = 1 
} 
```

此外，我启用了自动配置。

尽管如此，我还是添加了手动配置 ( `typo3conf/realurl_conf.php`)：

```
<?php

/**
 *
 * aeUrlTool default realurl configuration
 * based on realurl-configuration of news.typo3.org
 *  http://news.typo3.org/about/realurl-configuration/
 *
 */

$GLOBALS['TYPO3_CONF_VARS']['EXTCONF']['realurl'] = array ( 
    '_DEFAULT' => array (
        'init' => array (
            'enableCHashCache' => '1',
            'appendMissingSlash' => 'ifNotFile',
            'enableUrlDecodeCache' => '1',
            'enableUrlEncodeCache' => '1',
        ),
        'redirects' => array (
            'sitemap.xml' => 'sitemap-xml',
        ),
        'preVars' => array (
            '0' => array (
                'GETvar' => 'no_cache',
                'valueMap' => array (
                    'nc' => '1',
                ),
                'noMatch' => 'bypass'
            ),
            '1' => array (
                'GETvar' => 'L',
                'valueMap' => array (
                    'de' => '0',
                    'en' => '1',
                    'it' => '2',
                ),
                'noMatch' => 'bypass',
            ),
            '2' => array (
                'GETvar' => 'lang',
                'valueMap' => array (
                    'de' => 'de',
                    'en' => 'en',
                    'it' => 'it',
                ),
                'noMatch' => 'bypass',
            ),
        ),
        'pagePath' => array (
            'type' => 'user',
            'userFunc' => 'EXT:realurl/class.tx_realurl_advanced.php:&tx_realurl_advanced->main',
            'spaceCharacter' => '-',
            'languageGetVar' => 'L',
            'expireDays' => '7',
            'rootpage_id' => '1',
        ),
        'fixedPostVars' => array (
        ),
        'postVarSets' => array (
            '_DEFAULT' => array (
                'archive' => array (
                    '0' => array (
                        'GETvar' => 'tx_ttnews[year]',
                    ),
                    '1' => array (
                        'GETvar' => 'tx_ttnews[month]',
                        'valueMap' => array (
                            'january' => '01',
                            'february' => '02',
                            'march' => '03',
                            'april' => '04',
                            'may' => '05',
                            'june' => '06',
                            'july' => '07',
                            'august' => '08',
                            'september' => '09',
                            'october' => '10',
                            'november' => '11',
                            'december' => '12',
                        ),
                    ),
                ),
                'browse' => array (
                    '0' => array (
                        'GETvar' => 'tx_ttnews[pointer]',
                    ),
                ),
                'select_category' => array (
                    '0' => array (
                        'GETvar' => 'tx_ttnews[cat]',
                    ),
                ),
                'article' => array (
                    '0' => array (
                        'GETvar' => 'tx_ttnews[tt_news]',
                        'lookUpTable' => array (
                            'table' => 'tt_news',
                            'id_field' => 'uid',
                            'alias_field' => 'title',
                            'addWhereClause' => ' AND NOT deleted',
                            'useUniqueCache' => '1',
                            'useUniqueCache_conf' => array (
                                'strtolower' => '1',
                                'spaceCharacter' => '-',
                            ),
                        ),
                    ),
                    '1' => array (
                        'GETvar' => 'tx_ttnews[swords]',
                    ),
                ),
            ),
        ),
        'fileName' => array (
//
// if you don't want .html-URLs set the following to "false" (e.g. 'defaultToHTMLsuffixOnPrev' => false,)
// then you get http://www.yourdomain.com/imprint/ instead of http://www.yourdomain.com/imprint.html
//
            'defaultToHTMLsuffixOnPrev' => true,
            'index' => array (
                'rss.xml' => array (
                    'keyValues' => array (
                        'type' => '100',
                    ),
                ),
                'rss091.xml' => array (
                    'keyValues' => array (
                        'type' => '101',
                    ),
                ),
                'rdf.xml' => array (
                    'keyValues' => array (
                        'type' => '102',
                    ),
                ),
                'atom.xml' => array (
                    'keyValues' => array (
                        'type' => '103',
                    ),
                ),

            ),
        ),
    ),

); 

?> 
```

我的`.htaccess`样子

```
#####
# 
# Example .htaccess file
# 
# This file contains a collection of almost everything you will need
# for optimising TYPO3:
# 
# - mod_rewrite (used for SimulateStaticDocuments, RealUrl, etc.)
# - PHP optimisation
# 
# If you want to use it, you'll need to rename this file to '.htaccess'.
# (To make this work you will need to adjust the 'AllowOverride'
# directive in your Apache configuration file.)
# 
# IMPORTANT: You may need to change this file depending on your TYPO3
# installation!
# 
# You should change every occurance of TYPO3root/ to the location where you
# have your website in. For example:
# If you have your website located at http://mysite.com/
# then your TYPO3root/ is just empty (remove 'TYPO3root/')
# If you have your website located at http://mysite.com/some/path/
# then your TYPO3root/ is some/path/ (search and replace)
# 
# If you have problems with this file, try using the minimal
# mod_rewrite.htaccess which is located in the typo3_src/misc/
# directory of this installation.
# 
# You can also use this configuration in your httpd.conf, but you'll have
# to modify some lines, see the comments (search for 'httpd.conf')
# 
# Using rewriting in your httpd.conf is much faster, btw.
# 
# Questions about this file go to the matching Install mailing list,
# see http://typo3.org/documentation/mailing-lists/
# 
####

### Begin: Rewrite stuff ###

# Enable URL rewriting
RewriteEngine On

# To assist in debugging rewriting, you could use these lines
# DON'T enable it for production!
# This will only work in httpd.conf, not in .htaccess files
#RewriteLog /var/log/apache/rewrite.log
#RewriteLogLevel 9

# If you use the RealUrl extension, then you'll have to enable the next line.
# You will have to change this path if your TYPO3 installation is located
# in a subdirectory of the website root.
# 
# If you place this in httpd.conf, you cannot use this directive in any case!
#RewriteBase /

# Stop rewrite processing if we are in the typo3/ directory
# For httpd.conf, use this line instead of the next one:
# RewriteRule ^/TYPO3root/(typo3/|t3lib/|tslib/|fileadmin/|typo3conf/|typo3temp/|uploads/|showpic\.php|favicon\.ico) - [L]
RewriteRule ^(typo3/|t3lib/|tslib/|fileadmin/|typo3conf/|typo3temp/|uploads/|showpic\.php|favicon\.ico) - [L]

# Redirect http://mysite/typo3 to http://mysite/typo3/index_re.php
# and stop the rewrite processing
# For httpd.conf, use this line instead of the next one:
# RewriteRule ^/TYPO3root/typo3$ /TYPO3root/typo3/index.php [L]
RewriteRule ^typo3$ typo3/index_re.php [L]

# If the file/symlink/directory does not exist => Redirect to index.php
# Important note: If you copy/paste this into httpd.conf instead
# of .htaccess you will need to add '%{DOCUMENT_ROOT}' left to each
# '%{REQUEST_FILENAME}' part.
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l

# Main URL rewriting.

# If you use Windows and SimulateStaticDocuments do not work, try adding a
# slash (/) right before 'index.php' below.

# The example shows how to rewrite only *.html and *.pdf files to index.php
# This may be helpful when using an extension that can generate PDF files
# on the fly.
# Example: RewriteRule .*\.(html|pdf)$ index.php [L]

# For httpd.conf, use this line instead of the next one that has no '#':
# RewriteRule .* /TYPO3root/index.php [L]

# For use with the RealUrl extension, you might need to remove the
# RewriteBase directive somewhere above and use this line instead of the
# next one:
# RewriteRule .* /index.php [L]

RewriteRule .* index.php [L]

### End: Rewrite stuff ###

### Begin: PHP optimisation ###

# All features below are left to the default if you don't change this.
# Simply remove the comment marks if you want to use some/all of these
# settings

# The PHP developers recommend disabling this feature. Do that.
# It's deprecated and is likely to be unsupported in future versions of PHP.
#php_flag allow_call_time_pass_reference off

# TYPO3 works fine with register_globals turned off.
# This is highly recommended!
#php_flag register_globals off

# PHP may not declare the argv & argc variables (that would contain the GET
# information).
# TYPO3 doesn't need this, so just turn it off.
#php_flag register_argc_argv off

# Magic quotes for runtime-generated data (data from SQL, exec(), etc.)
#php_flag magic_quotes_gpc off

# Order in which PHP registers GET, POST, Cookie and Built-in variables
#php_value variables_order GPCS

### End: PHP optimisation ###

### Begin: Miscellaneous ###

# Make sure that directory listings are disabled
#Options -Indexes

# There is a problem with Internet Explorer and mod_gzip on Apache servers.
# For more information, see
# http://typo3.org/documentation/document-library/rtehtmlarea/Tutorial-79/
#mod_gzip_item_exclude file \.css$
#mod_gzip_item_exclude file \.png$
#mod_gzip_item_exclude file \.gif$
#mod_gzip_item_exclude file \.jpg$
#mod_gzip_item_exclude file \.jpeg$
#mod_gzip_item_exclude file \.js$

### End: Miscellaneous ###

# Add your own rules here
# ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:46:36.497

您需要在树的根目录中创建域记录。

然后：

1.  连同自动配置，它应该可以开箱即用。

2.  或者，如果您想手动创建，则需要在该文件末尾添加 realurl conf 以下行（typo3conf/realurl.conf）：

> ```
> $TYPO3_CONF_VARS['EXTCONF']['realurl']['example.com'] = $TYPO3_CONF_VARS['EXTCONF']['realurl']['_DEFAULT'];
> unset($TYPO3_CONF_VARS['EXTCONF']['realurl']['_DEFAULT']); 
> ```

如果您使用手动 realurl 配置，请仔细检查 realurl 扩展管理器是否读取了手动配置的正确文件。看这里： ![在此处输入图像描述](../Images/17ff16bd4003cc52ddf10f2f1b52df1d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:22:34.753

我的情况是我需要进入数据库/phpmyadmin 并删除那里所有缓存的真实 url 条目。删除 realurl 表中的所有条目后，它工作正常。

# html - 响应式设计：元标签加载

> ID：13054698
> 
> 赞同：1
> 
> 时间：2012-10-24T17:38:58.917
> 
> 标签：html, css, responsive-design, media-queries, metatag

我正在寻找这种结构，我知道这是不可能的，但我正在寻找另一种方法。

```
@media all and (min-width: 480px) {
 <meta name="viewport" content="width=device-width, initial-scale=1,
 maximum-scale=1" />
} 
```

所以基本上我需要这个`<meta />`标签只在大于`480px`宽度的屏幕上才有效。

这可以用标准 HTML 完成还是有 jQuery 解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:49:17.950

CSS 将无法插入这样的 META 标记（您可以使用 IE 特定注释来定位 IE，但我怀疑这对您有帮助）。

但是，您可以使用 JavaScript 动态注入此标记：

```
//set a flag so the meta tag doesn't get loaded more than once
var metaLoaded = false;
$(window).on("resize.my-meta", function () {

    //check if the meta tag has already been loaded, if not check the viewport width
    if (!metaLoaded && $(window).width() >= 480) {

        //the viewport width is at or greater than 480, so add the meta tag to the DOM
        $("head").append('<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />');

        //set flag so we don't add the meta tag twice
        metaLoaded = true;
    }
}).trigger("resize.my-meta");//this runs the resize event handler to setup the initial state 
```

这是一个演示：http: [//jsfiddle.net/5GxNH/](http://jsfiddle.net/5GxNH/)

# html - ruby on rails 在浏览器上将 .c 文件代码显示为原始文本

> ID：13054700
> 
> 赞同：0
> 
> 时间：2012-10-24T17:39:01.257
> 
> 标签：html, ruby-on-rails, browser, text

我正在尝试在浏览器本身中显示a的**所有内容...**`.c file`

因此，**用户无需下载**`.c file`...

我创建了一个`public/`名为的文件夹，`c`其中包含`.c files`

但是当我直接查看这些文件中的任何一个时，我会被要求下载它......

我想要的**只是将其显示**为**原始文本**...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:42:36.637

尝试在您的视图中进行最简单的实现。否则，您可以将此功能移动到控制器：

```
<%= File.read(Rails.root.join('public') + "/test.c") 
```

# asp.net - 带有typewatch的jquery自动完成

> ID：13054701
> 
> 赞同：1
> 
> 时间：2012-10-24T17:39:01.647
> 
> 标签：asp.net, jquery

我是一个 jQuery 新手，并试图与 jQuery typewatch 一起实现自动完成功能。也就是说，要在某个时间段后从 Web 服务获取数据，比如 750 毫秒，而不是在 minLength 之后。

```
<script type="text/javascript">
    $(document).ready(function () {
        $('.searchinput').autocomplete({
            source: function (request, response) {
                $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    url: "/Services/SampleWebService.asmx/GetProduct",
                    data: '{"searchString":"' + request.term + '"}',
                    dataType: "json",
                    async: true,
                    success: function (data) {
                        response(data);
                    }
                });
            },
        });
        $('.searchinput').typewatch({
            callback: $.autocomplete,
            wait: 750,
            highlight: false
        });
    }); 
```

我的自动完成功能绝对可以正常工作，但不知何故我无法将 typewatch 包含在内。我确信存在我不知道的严重编码失败。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:55:41.443

jquery 自动完成有这个选项作为参数称为延迟：

[http://api.jqueryui.com/autocomplete/#option-delay](http://api.jqueryui.com/autocomplete/#option-delay)

因此，您要做的就是更改该参数，并将 typewatch 删除为：

```
 $(document).ready(function () {
        $('.searchinput').autocomplete({
            delay:750,
            source: function (request, response) {
                $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    url: "/Services/SampleWebService.asmx/GetProduct",
                    data: '{"searchString":"' + request.term + '"}',
                    dataType: "json",
                    async: true,
                    success: function (data) {
                        response(data);
                    }
                });
            },
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:02:11.757

称为“延迟”的参数是您必须在 keydown 之后等待调用外部服务的时间。这只是为了不要让没有“敏感”搜索数据的服务超载。

我从用户问题中了解到，他想每 750 毫秒调用一次自动完成“更新”功能。

您可以使用以下方法更改 typewatch “段”：

```
$('.searchinput').typewatch({
    callback: function(){
        $(".searchinput").data("autocomplete").search();
    },
    wait: 750,
    highlight: false
}); 
```

这将触发对服务的搜索并每 750 毫秒显示一次弹出响应

# c# - 在大网格中路由路径的最佳方法是什么？

> ID：13054708
> 
> 赞同：9
> 
> 时间：2012-10-24T17:39:31.500
> 
> 标签：c#, .net, performance

我正在研究一种算法，以在网格中为给定的点对找到一组不相交的路径。对于这些对，就像这样：(9,4) 和 (12,13) ![示例网格](../Images/da97c529d1a519ae8a9fa4466a79fbb6.png)

输出应该是这样的：

```
 9,10,11,7,3,4

    13,14,15,16,12 
```

如果无法路由所有路径，则打印“阻塞”

首先，我搜索了一个已经创建的算法来查找图形或网格中 2 个点之间的所有简单路径。[我在这里](https://stackoverflow.com/questions/58306/graph-algorithm-to-find-all-connections-between-two-arbitrary-vertices)通过@Casey Watson 和@svick 找到了这个.. 它工作得非常好，但仅适用于小图。

我将它转换为 C#.NET 并对其进行了一些增强，以便能够找到最大长度 X 的路径。并在此基础上构建我的总算法。

我建立的那个在小图中工作得很好。这是一个 8x8 网格中的 9 对路线。 ![在此处输入图像描述](../Images/5d746594f06789cd330eb7f4190aa941.png)

但是对于像 16x16 这样的大型模型甚至是我打算做的最后一个模型，即 16x16x2 的 3D 模型，这需要很长时间

![8x8x2 网格](../Images/72b0d9384b994c641cc50bc41dbdc655.png)

该算法被开发为深度优先搜索**RECURSIVE**算法，但需要花费大量时间才能将值返回给用户。所以我决定将它转换为循环而不是递归调用，以便我可以从.NET 中的**yield return**功能中受益，但它仍然没有更好的帮助。

该算法的循环版本在不到一秒的时间内为一对点找到了一条路线，但递归版本则花费了 90 多秒。

![在此处输入图像描述](../Images/6269f8e7ecc7de4c41846c12cfa1a5ec.png)

当我尝试使用 2 对时，循环版本大约需要 342 秒，但递归版本大约需要 200 秒。

![在此处输入图像描述](../Images/06082d10268b9ceb246539618f92bd16.png)

所以我不知道哪个更快..！？递归或循环之一..

我真的很想知道最好的方法来做到这一点..

注意：节点编号中的第一个数字确定层（从 1 开始）..

这是代码

```
 using System;
    using System.Collections;
    using System.Collections.Generic;
    using System.Diagnostics;
    using System.IO;
    using System.Linq;

    namespace AlgorithmTest
    {
     struct Connection
    {
    public int FirstNode;
    public int SecondNode;

    public Connection(int N1,int N2)
    {
        FirstNode = N1;
        SecondNode = N2;
    }
}
enum Algorithm
{ Recursion, Loops }

public class Search
{

    private const int MAX = 15;

    private const int Width = 16;
    private const int Length = 16;
    private const int Height = 2;

    private static void Main(string[] args)
    {

        var graph = new Graph();

        var str = new int[Height,Length, Width];
        var level = ((int)Math.Pow(10, (Length * Width).ToString().Length) >= 100) ? (int)Math.Pow(10, (Length * Width).ToString().Length) : 100;              
        for (var i = 0; i < Height; i++)
        {
            int num = 0;
            for (var j = 0; j < Length; j++)
                for (var k = 0; k < Width; k++)
            {
                str[i, j, k] = ++num + level;

            }
            level += level;
        }

        for (var i = 0; i < Height; i++)
        {
            for (var j = 0; j < Length; j++)
            {
                for (var k = 0; k < Width; k++)
                {

                    if (i < Height - 1) graph.addEdge(str[i, j, k], str[i + 1, j, k]);
                    if (i > 0) graph.addEdge(str[i, j, k], str[i - 1, j, k]);

                    if (k < Width - 1) graph.addEdge(str[i, j, k], str[i, j, k + 1]);
                    if (k > 0) graph.addEdge(str[i, j, k], str[i, j, k - 1]);

                    if (j < Length - 1) graph.addEdge(str[i, j, k], str[i, j + 1, k]);
                    if (j > 0) graph.addEdge(str[i, j, k], str[i, j - 1, k]);

                }
            }
        }

        var wt = new Stopwatch();

       wt.Start();
        var connectedNodes = new List<Connection>()
                                 {

                                     new Connection(1030, 1005),
       //                              new Connection(1002, 1044),
    //                                         new Connection(1015, 1064),
    //                                        new Connection(1041, 1038),
    //                                         new Connection(1009, 1027),
    //                                         new Connection(1025, 1018),
    //                                         new Connection(1037, 1054),
    //                                         new Connection(1049, 1060),
    //                                         new Connection(1008, 1031),
    //                                         new Connection(1001, 1035),

                                 };
        wt.Start();
        Console.WriteLine("Using Loops:");
        Console.WriteLine();
        var allPaths = new Search().FindAllPaths(connectedNodes, graph, MAX, Algorithm.Loops);
        wt.Stop();
        foreach (var path in allPaths)
        {
            PrintPath(path);
        }
        Console.WriteLine("Total Seconds: " + wt.Elapsed.TotalSeconds + ", Number of paths: " + allPaths.Count());
        Console.WriteLine("***************************************************************************************************");
        Console.WriteLine("Using Recursion:");
        Console.WriteLine();
        wt.Reset();
        wt.Start();
        allPaths = new Search().FindAllPaths(connectedNodes, graph, MAX, Algorithm.Recursion);
        wt.Stop();
        foreach (var path in allPaths)
        {
            PrintPath(path);
        }
        Console.WriteLine("Total Seconds: " + wt.Elapsed.TotalSeconds + ", Number of paths: " + allPaths.Count());
        Console.WriteLine();

    }

    private IEnumerable<List<int>> FindAllPaths(List<Connection> connectedNodes, Graph graph, int max, Algorithm algorithm)
    {
        var paths=new Stack<List<int>>();
        var blocked=new List<int>();

        for (var i = 0; i < connectedNodes.Count; i++)
        {
            if (!blocked.Contains(connectedNodes[i].FirstNode)) blocked.Add(connectedNodes[i].FirstNode);
            if (!blocked.Contains(connectedNodes[i].SecondNode)) blocked.Add(connectedNodes[i].SecondNode);
        }

        if (algorithm == Algorithm.Recursion)
        {
            if (FindAllPaths(connectedNodes, 0, max, graph, paths, blocked))
            {
                Console.WriteLine("BLOCKED");
                return new List<List<int>>();
            }
        }
        else if(algorithm==Algorithm.Loops)
        {
            if (!FindAllPaths2(connectedNodes, 0, max, graph, paths, blocked))
            {
                Console.WriteLine("BLOCKED");
                return new List<List<int>>();
            }
        }

        return paths;

    }
    private static bool FindAllPaths(List<Connection> connectedNodes,int order,int max, Graph graph, Stack<List<int>> allPaths, List<int> blocked)
    {

        if (order >= connectedNodes.Count) return false;

        var paths = SearchForPaths(graph, connectedNodes[order].FirstNode, connectedNodes[order].SecondNode, max, blocked);
        if (paths.Count == 0) return true;
        int i;
        for (i = 0; i < paths.Count; i++)
        {
            var path = paths[i];
            allPaths.Push(path);
            blocked.AddRange(path);

            if (!FindAllPaths(connectedNodes, order + 1,max, graph, allPaths, blocked)) break;

            allPaths.Pop();
            foreach (var j in path)
            {
                blocked.RemoveAll(num => num==j);
            }

            paths.RemoveAll(list => IsListsSimilar(list,path));

            i--;

        }
        if (i == paths.Count) return true;

        return false;

    }

    private static bool IsListsSimilar(List<int> L1,List<int> L2)
    {
        if (L2.Count > L1.Count) return false;

        for (int i = 0; i < L2.Count - 1; i++)
        {
            if (L1[i] != L2[i]) return false;
        }
        return true;
    }

    private static List<List<int>> SearchForPaths(Graph graph, int start, int end, int max, List<int> blocked)
    {
        blocked.Remove(start);
        blocked.Remove(end);

        var nodePaths = new List<List<int>>();
        var visited = new LinkedList<int>();
        visited.AddLast(start);
        DepthFirstSearch(graph, visited, end, max, blocked, nodePaths);

        nodePaths = nodePaths.OrderBy(list => list.Count).ToList();

        return nodePaths;

    }
    private static void DepthFirstSearch(Graph graph, LinkedList<int> visited, int end, int max, List<int> blocked, List<List<int>> paths)
    {
        var nodes = graph.adjacentNodes(visited.Last.Value);
        // examine adjacent nodes
        var nodeCount = blocked.Count;
        for (int i = 0; i < nodeCount; i++)
        {
            if (visited.Contains(blocked[i])) return;
        }

        if (visited.Count > max) return;

        nodeCount = nodes.Count;
        for (var i = 0; i < nodeCount; i++)
        {
            if (visited.Contains(nodes[i]) || nodes[i] != end) continue;

            visited.AddLast(nodes[i]);

            {
                paths.Add(new List<int>(visited));

            }
            visited.RemoveLast();
            break;
        }

        nodeCount = nodes.Count;
        for (var i = 0; i < nodeCount; i++)
        {
            if (visited.Contains(nodes[i]) || nodes[i] == end) continue;

            visited.AddLast(nodes[i]);
            DepthFirstSearch(graph, visited, end, max, blocked, paths);
            visited.RemoveLast();
        }

    }

    private static bool FindAllPaths2(List<Connection> connectedNodes, int order, int max, Graph graph, Stack<List<int>> allPaths, List<int> blocked)
    {

        if (order >= connectedNodes.Count) return false;

        foreach (var path in SearchForPaths2(graph, connectedNodes[order].FirstNode, connectedNodes[order].SecondNode, max, blocked))
        {

            allPaths.Push(path);
            blocked.AddRange(path);

            if (!FindAllPaths2(connectedNodes, order + 1, max, graph, allPaths, blocked)) break;

            allPaths.Pop();
            foreach (var j in path)
            {
                blocked.RemoveAll(num => num == j);
            }

        }

        return true;

    }
    private static IEnumerable<List<int>> SearchForPaths2(Graph graph, int start, int end, int max, List<int> blocked)
    {
        blocked.Remove(start);
        blocked.Remove(end);

        var visited = new LinkedList<int>();
        visited.AddLast(start);
        foreach (var VARIABLE in DepthFirstSearch(graph, visited, end, max, blocked))
        {
            yield return VARIABLE;
        }

    }
    private static IEnumerable<List<int>> DepthFirstSearch(Graph graph, LinkedList<int> visited, int end, int max, List<int> blocked)
    {

        var nodes = graph.adjacentNodes(visited.Last.Value);

        var nodeCount = blocked.Count;
        for (int i = 0; i < nodeCount; i++)
        {
            if (visited.Contains(blocked[i])) yield break;
        }

        if (visited.Count > max) yield break;

        nodeCount = nodes.Count;
        for (var i = 0; i < nodeCount; i++)
        {
            if (visited.Contains(nodes[i]) || nodes[i] != end) continue;

            visited.AddLast(nodes[i]);

            yield return (new List<int>(visited));
            visited.RemoveLast();
            break;
        }

        nodeCount = nodes.Count;
        for (var i = 0; i < nodeCount; i++)
        {
            if (visited.Contains(nodes[i]) || nodes[i] == end) continue;

            visited.AddLast(nodes[i]);
            foreach (var P in DepthFirstSearch(graph, visited, end, max, blocked))
            {

                yield return P;

            }

            visited.RemoveLast();

        }

    }

    private static void PrintPath(List<int> visited)
    {

        for (int i = 0; i < visited.Count()-1; i++)
        {
            Console.Write(visited[i]);
            Console.Write(" --> ");
        }
        Console.Write(visited[visited.Count() - 1]);

        Console.WriteLine();
        Console.WriteLine();

    }

}
public class Graph
{
    private readonly Dictionary<int, HashSet<int>> map = new Dictionary<int, HashSet<int>>();

    public void addEdge(int node1, int node2)
    {
        HashSet<int> adjacent = null;

        map.TryGetValue(node1, out adjacent);

        if (adjacent == null)
        {
            adjacent = new HashSet<int>();
            map.Add(node1, adjacent);
        }
        adjacent.Add(node2);
    }

    public List<int> adjacentNodes(int last)
    {
        HashSet<int> adjacent = null;

        map.TryGetValue(last, out adjacent);

        if (adjacent == null)
        {
            return new List<int>();
        }
        return new List<int>(adjacent);
    }
}
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T18:04:48.737

我认为答案在于您如何为网格中的节点编号。对于一个简单的二维网格，4 个节点乘以 4，您可以对它们进行编号：00, 01, 02, 03, 10, 11, 12 ... 30, 31, 32, 33。将它们视为复合数字字符串 (不是十进制值）作为基于维度的节点地址。

在 3 维网格中，它们的编号为 000、001、002 等，直到 330、331、332、333。

如果您想找到两点 10 和 22 之间的所有路线，您可以通过添加维度差异来快速计算它们的距离：1y 与 2y 相差 1，x0 与 x2 相差 2。因此节点距离为 3，您需要经过 3 条边（总共连接 4 个节点）才能到达目的地。

解决方案空间（解决方案路径中可能涉及的唯一节点）可以通过创建一组嵌入式 FOR/NEXT 循环来枚举，每个维度一个循环。在这种情况下，10 和 22 的开始和结束值将产生：10、11、12、20、21 和 22。

现在是聪明的一点。您可以预先计算（准备）阵列中节点之间的“转发”连接表。节点 10 连接到 20 和 11（两者相差 1 维）。从中，您可以生成从 10 到 22 的有效路径序列，方法是向您计划移动的任何方向的维度差添加一个（在 2-D 数组中，您只能选择两种方式中的一种。在 3-D你有三个选择）。

每个答案都应该是最短的距离。这种方法的计算时间应该是毫秒。在蒸汽动力 ZX81 上！

# msbuild - 使用多个项目构建 TFS 未采用正确的转换 Web 配置

> ID：13054710
> 
> 赞同：1
> 
> 时间：2012-10-24T17:39:34.787
> 
> 标签：msbuild

我在 VS2010 中有一个解决方案，它有三个项目，其中两个项目有 Web 配置文件，这些项目对每个环境（开发、测试和产品）都有 Web 配置转换。在 TFS 构建选项的过程中，我在 MSBuild Arguments 中有：/p:DeployOnBuild=True

一切看起来都不错，放置文件夹、zip 文件和最终部署的所有结构。我面临的问题是在最终部署后未正确创建测试和产品的 Web 配置，我可以在放置文件夹中看到文件 projectName.SetParameters.xml，它包含当构建为 QUEUE for Test 时的开发值和产品。其中一个项目具有正确的 Web 配置（测试和产品），但另一个项目始终具有开发 Web 配置。它是 MS Build 中的错误吗？我在构建参数中缺少什么？

当我创建构建部署包时，Web 配置转换会创建正确的 Web 配置文件，此过程没有问题，但我不想使用构建部署包来部署我的解决方案。任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-23T13:55:22.793

在您的构建定义中，您可能定义了要使用的配置。其中一部分还定义了类似的东西`Any CPU`or `x86`。事实证明，平台“任何 CPU”的解决方案有一个空间，而在项目文件中平台`Any CPU`没有空间。

我发现解决这个问题的最好方法是将平台留空，只输入配置名称。VS 会弹出一个警告，让你知道有数据丢失，你可以点击“是”来保存它。或者，您可以只输入您的配置，如下所示`|Release,|Debug`。

模式为 [PlatformName]|[ConfigurationName],[PlatformName]|[ConfigurationName],...

# expressionengine - 密码保护 ExpressionEngine 模板组

> ID：13054711
> 
> 赞同：10
> 
> 时间：2012-10-24T17:39:42.520
> 
> 标签：expressionengine

我正在建立一个网站，员工将拥有自己的网站部分：example.com/jones、example.com/smith 等。 jones 和 smith 是模板组，其中包含相同的模板（使用 Stash 和 Low Variables 来保持都干了）。一些用户会有不同的隐私需求。一方面，他们的部分将是公开的。另一方面，一些用户需要管理谁可以访问他们的内容（使用 Solspace 朋友）。

然而，在这个范围的中间，有些人只想防止任何随机的人看到他们的内容。我不想使用成员/成员组来管理它。我不希望访问者需要注册才能看到内容。共享成员帐户是一个选项，但由于其他问题（如果重置密码、评论留在同一帐户下等），我们将其排除在外。

我们想要的是密码保护模板组。工作人员可以让人们知道在哪里可以看到他们的页面，并让用户知道密码是什么。这在服务器级别上都是可能的，但是是否可以允许用户直接管理密码？我们可以做的任何事情来尽量减少我们需要更好地进行管理。允许这种安全性的自定义字段和附加组件？我在 Devot-ee 上没有看到任何东西，论坛上的方法也没有这样做。有点远射，但我想我会问。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T18:13:13.110

既然您说您不想绑定到实际的会员帐户，并且可以使用自定义字段来存储可编辑的密码...

我最近刚刚做了类似的事情，使用自定义字段保护一组条目。它类似于“[密码保护内容变得简单](http://eeinsider.com/articles/password-protected-content-made-simple/)”文章中概述的方法。但我没有在模板中使用 PHP，而是使用了[Mo' Variables](http://devot-ee.com/add-ons/mo-variables)。而不是使用 url_title 我使用了一个自定义字段（下面称为 client_password）。

此外，我使用[Session Variables 插件](http://devot-ee.com/add-ons/session-variables-plugin)来检查用户在后续页面加载时是否已经“登录”，以防止他们不得不一次又一次地输入密码。

```
{!-- PASSWORD REQUIRED --}
{if client_password != ""}

    {!-- if passed show content and set session --}
    {if post:password == client_password}

        {!-- protected content here --}
        {!-- set session --}
        {embed='embeds/_set_session' entry_id="{entry_id}"}

    {!-- if session is valid show content --}
    {if:elseif "{exp:session_variables:get name='logged_in'}" == "{entry_id}"}

        {!-- protected content here --}

    {!-- if failed show login --}   
    {if:elseif post:password != "" AND post:password != client_password}

        <div id="protected">
            <p>Incorrect password. Please try again.</p>
            <br>
            <form action="" method="post">
                <strong>Password</strong><br />
                <div>
                    <input name="password">
                </div>
                <input type="submit" class="submit" value="submit">
            </form>             
        </div>

    {!-- if first attempt show login and prompt --}
    {if:else}

        <div id="protected">
            <p>This page is password protected. Please provide the password.</p>
            <br>
            <form action="" method="post">
                <strong>Password</strong><br />
                <div>
                    <input name="password">
                </div>
                <input type="submit" class="submit" value="submit">
            </form>             
        </div>

    {/if}

{!-- NO PASSWORD REQUIRED --}
{if:else}

    {!-- protected content here --}

{/if} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-26T18:17:05.487

我想用我用来让 htaccess 和 htpasswd 工作以通过模板组保护的代码来更新它。它可以以与 Alex 相同的方式使用，但是是一种全有或全无的方法。它有自己的优点和缺点，但想把它作为一种选择来分享。

首先，我使用的是原生模板行为：example.com/group/template/url_title。我想用密码保护一些模板组，但在 EE 的成员和成员组之外。即单个用户和密码。

我的 htaccess 文件看起来像这样（来自[http://perishablepress.com/enable-file-or-directory-access-to-your-htaccess-password-protected-site/](http://perishablepress.com/enable-file-or-directory-access-to-your-htaccess-password-protected-site/)）：

```
# We set some variables, matching URL's for which we do not wish to active
# the password protection
SetEnvIf Request_URI "^/privategroup.*$" private

# Setup the password protection
AuthName "Password Needed"
AuthGroupFile /dev/null
AuthType Basic
AuthUserFile /Users/user/Sites/example/.htpasswd
Require valid-user

# Add the exceptions for matched URL's
Order Deny,Allow
Deny from env=private
Satisfy any 
```

htpasswd 文件应该在 webroot 之上，但是为了测试我把它留在了 webroot 中。AuthUserFile 行告诉 Apache 在哪里可以找到包含用户名和密码的文件。这必须...必须是绝对路径。我正在使用相对并得到 500 个错误。您需要使用终端或其他工具来制作此文件。[http://developer.apple.com/library/Mac/#documentation/Darwin/Reference/ManPages/man1/htpasswd.1.html](http://developer.apple.com/library/Mac/#documentation/Darwin/Reference/ManPages/man1/htpasswd.1.html)

结果是该目录需要用户名和密码。现在它将接受我的 htpasswd 文件中的任何有效用户。但是，我可以通过指定特定用户（需要用户 john tim lisa）或组来更改它。

你有它。不使用任何本机 EE 功能，让人们远离特定的模板组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T17:51:05.047

老实说，我不确定这是否符合您的需求。虽然它不会点击它，但我以前从未尝试过它，并且需要实际试一试以确定它是否适合。

我将发布它，因为它可能会帮助您或其他人：

[http://koivi.com/ee-entry-auth-dir/](http://koivi.com/ee-entry-auth-dir/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T18:10:49.127

您是否查看过在[Template Access Restrictions](http://expressionengine.com/user_guide/cp/design/templates/template_access.html#http-authentication)下使用 HTTP Authentication 选项？它使用会员密码进行身份验证，但不需要会员实际登录。

你说你“不想使用成员/成员组来管理这个”，但是你想“允许用户直接管理密码”......当然使用内置的成员系统是最简单的方法?

# php - 从 VLC 到网站的多个实时流式传输

> ID：13054712
> 
> 赞同：0
> 
> 时间：2012-10-24T17:39:49.167
> 
> 标签：php, streaming, vlc

看看这篇文章：[http](http://wiki.videolan.org/Stream_VLC_to_Website_with_asf_and_Flash) ://wiki.videolan.org/Stream_VLC_to_Website_with_asf_and_Flash我能够捕捉视频和流，但问题是它作为点对点工作。我需要一个 php 代码，例如，捕获代码，根据 IP 地址保存，站点可以将其流向 SWF。但我不知道该怎么做。这可能是方式吗？如果我只是保存流，观众只能从头开始观看，而不是“红手”。Flash 播放器只吃文件。如何让它活起来？

# sql - 无法将动态查询传递给 sql 函数

> ID：13054714
> 
> 赞同：2
> 
> 时间：2012-10-24T17:39:52.200
> 
> 标签：sql, postgresql, sql-function

我似乎找不到将查询作为参数传递给我的 sql 函数的方法。我的问题是表“my_employees1”可能是动态的。

```
DROP FUNCTION function_test(text);
CREATE OR REPLACE FUNCTION function_test(text) RETURNS bigint AS '
    DECLARE ret bigint;
    BEGIN 
        SELECT count(mt.id) INTO ret
    FROM mytable as mt
    WHERE mt.location_id = 29671
    --and mt.employee_id in (SELECT id from my_employees1);
    --and mt.employee_id in ($1);
    $1;
    RETURN ret;
    END;
' LANGUAGE plpgsql;

select function_test('and mt.employee_id in (SELECT id from my_employees1)');
select function_test('SELECT id from my_employees1'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:46:45.437

它必须是动态构建的：

```
DROP FUNCTION function_test(text);
CREATE OR REPLACE FUNCTION function_test(text) RETURNS bigint AS $$
    DECLARE
        ret bigint;
    BEGIN
    execute(format($q$
        SELECT count(mt.id) INTO ret
        FROM mytable as mt
        WHERE mt.location_id = 29671
        %s; $q$, $1)
    );
    RETURN ret;
    END;
$$ LANGUAGE plpgsql; 
```

和是美元报价`$$`。`$q$`只要内部标识符不同，它们就可以嵌套。除了允许使用不带引号的引号和可嵌套的明显优势之外，它还可以让语法高亮发挥作用。

# ruby-on-rails - 使用带有 Active Admin 的 gmaps4rails，没有地图

> ID：13054718
> 
> 赞同：3
> 
> 时间：2012-10-24T17:40:04.457
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin, gmaps4rails

我正在尝试在 Rails Rails 3.2.8 中使用[Active Admin获取](http://activeadmin.info/)[gmaps4rails 。](https://github.com/apneadiving/Google-Maps-for-Rails)

我一直在尝试遵循[本教程](http://kalapun.com/blog/2012/05/17/rails-maps-and-activeadmin/)，但由于我在堆栈中使用 mysql，因此需要对其进行调整。

我没有收到任何错误（这可能会有所帮助！），但我也没有收到任何地图。

我的模型 ( **location** ) 具有属性*longitude:float, langitude:float*和*gmaps:boolean*

我在位置模型中添加了以下内容，这与教程不同：

```
def location
    [:latitude, :longitude]
end 
```

这对于活动管理位置模型，也与教程不同：

```
f.input :location do |o|
           gmaps("markers" => {data: o.to_gmaps4rails}, "map_options" =>  { auto_zoom: false, zoom: 15 })
     end 
```

据我所知（通过扫描呈现的源文件）CSS 和 JavaScript 似乎正在加载。

整个应用程序可[在此处获得](https://bitbucket.org/mildfuzz/aperture_current)

除了这些变化，我想我已经坚持了教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:25:12.813

我只是在解决同样的问题，似乎已经想出了一个解决方案。如果您创建一个新的部分并在您的活动管理模型中调用它，例如`form :partial = 'partial_name'`

然后在部分使用

```
<%= semantic_form_for [:admin, @model_name] do |f| %>
  <%= f.input #all your other inputs %>

  <%= f.inputs "Location" do %>
    <%= gmaps("markers" => {data: @model_name.to_gmaps4rails}) %>
    <%= yield :scripts %>
    <%= f.input :latitude %>
    <%= f.input :longtude %>
  <% end %>

<% end %>' 
```

您仍然需要在活动的管理 css 和 js 文件中包含 gmaps4rails 链轮。

# windows-8 - Facebook C# sdk Windows 8 不需要密钥

> ID：13054719
> 
> 赞同：1
> 
> 时间：2012-10-24T17:40:05.360
> 
> 标签：windows-8, facebook-c#-sdk

我正在查看 Windows 8 facebook c# 示例代码，用户可以在其中通过 facebook 登录我的应用程序。我在哪里看到示例代码中提到了密钥。我认为获取访问令牌需要密钥？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T00:31:27.773

仅当您从客户端获取代码并将其交换为访问令牌时，您才需要应用程序密钥。

对于网络应用程序，建议使用代码，然后将其交换为需要应用程序密码的访问令牌。这样，当 fb 使用 ?code=... 而不是 #access_token=... 重定向回您的页面时，可以保证访问令牌永远不会到达客户端并保存在浏览器历史记录中。

对于 Windows 应用程序（商店和桌面），您可以直接获取 response_type=access_token，因为它保证不会保存在浏览器历史记录中。并且为了安全起见，切勿在客户端应用程序中包含应用程序机密，以防某些用户对您的应用程序进行逆向工程。

# android - 如何启动android应用程序管理器

> ID：13054721
> 
> 赞同：0
> 
> 时间：2012-10-24T17:40:12.223
> 
> 标签：android, android-intent

有谁知道android上应用程序管理器的包名。我有一种方法，我想让用户直接从我的应用程序转到应用程序管理器：

```
 public void goToApplicationManager(){
        Intent startMain = this.getPackageManager().getLaunchIntentForPackage("com.android.settings.ManageApplications");

        startActivity(startMain);
    } 
```

但这会引发错误.. 我可以做 com.android.settings，它会将用户带到设置，但我想将它们专门带到应用程序管理器。我有错误的包名吗？

我的错误：

```
10-24 13:36:43.748: E/AndroidRuntime(31133): FATAL EXCEPTION: main
10-24 13:36:43.748: E/AndroidRuntime(31133): java.lang.NullPointerException
10-24 13:36:43.748: E/AndroidRuntime(31133):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1382)
10-24 13:36:43.748: E/AndroidRuntime(31133):    at android.app.Activity.startActivityForResult(Activity.java:3190)
10-24 13:36:43.748: E/AndroidRuntime(31133):    at android.app.Activity.startActivity(Activity.java:3297)
10-24 13:36:43.748: E/AndroidRuntime(31133):    at com.eliddell.services_test.ServiceLauncher.goToApplicationManager(ServiceLauncher.java:101)
10-24 13:36:43.748: E/AndroidRuntime(31133):    at com.eliddell.services_test.ServiceLauncher$4.onClick(ServiceLauncher.java:156)
10-24 13:36:43.748: E/AndroidRuntime(31133):    at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:168)
10-24 13:36:43.748: E/AndroidRuntime(31133):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-24 13:36:43.748: E/AndroidRuntime(31133):    at android.os.Looper.loop(Looper.java:137)
10-24 13:36:43.748: E/AndroidRuntime(31133):    at android.app.ActivityThread.main(ActivityThread.java:4514)
10-24 13:36:43.748: E/AndroidRuntime(31133):    at java.lang.reflect.Method.invokeNative(Native Method)
10-24 13:36:43.748: E/AndroidRuntime(31133):    at java.lang.reflect.Method.invoke(Method.java:511)
10-24 13:36:43.748: E/AndroidRuntime(31133):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
10-24 13:36:43.748: E/AndroidRuntime(31133):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
10-24 13:36:43.748: E/AndroidRuntime(31133):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:49:39.687

```
startActivity(
 new Intent(android.provider.Settings.ACTION_APPLICATION_SETTINGS), 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:50:01.367

你看过[ACTION_MANAGE_APPLICATIONS_SETTINGS](http://developer.android.com/reference/android/provider/Settings.html#ACTION_MANAGE_APPLICATIONS_SETTINGS)或[ACTION_MANAGE_ALL_APPLICATIONS_SETTINGS](http://developer.android.com/reference/android/provider/Settings.html#ACTION_MANAGE_ALL_APPLICATIONS_SETTINGS)吗？

# java - 休眠泛型继承

> ID：13054722
> 
> 赞同：2
> 
> 时间：2012-10-24T17:40:17.067
> 
> 标签：java, hibernate, inheritance

我有一个泛型类，它是一些非泛型类的超类，它们只是设置它的泛型参数，如下所示：

```
@ManagedProperty
class A<T>{
    @Id
    getId(){..}
    setID(int id){..}
    int id

    T t;
    T getT(){...}
    setT(T t){...}
} 
```

和

```
@Entity
class B extends A<Integer>{} 
```

但我得到 MappingException 说：

> 它有一个未绑定的类型并且没有明确的目标实体。解决此通用使用问题或设置显式目标属性。

我应该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:18:39.243

你的例子行不通。getT() 被定义为包私有，这意味着它在子类 B 中不可见。当 Hibernate 用反射解析类时，它可以找到方法 getT()，但是由于该方法在子类中不可见，所以反射确实不提供它的类型。

你可以做什么：

1.  将 getT() 定义为 public 或至少定义为 protected。（我不确定这是否能解决您的问题。）
2.  使用 @Type 注释来定义 Hibernate 的具体类型（认为你可能会失去使用泛型类获得的优势）
3.  使用 xml 配置文件而不是 B 类的注释。在那里您将定义 B 类的配置，您甚至可以在其中设置仅在超类中定义为私有或包私有的成员和 getter 的类型。
4.  除了 1\. 你还在 B 中定义了方法 getT()，然后你只需调用 super.getT()。

我总是做解决方案 3 - 反正我不喜欢注释 ;-)

# java - 如何判断整数数组是否是交替数组？

> ID：13054724
> 
> 赞同：2
> 
> 时间：2012-10-24T17:40:25.667
> 
> 标签：java, algorithm, integer, alternating

我想知道一个整数数组是否是交替的。在 JAVA 中。

例如：

```
a[]={1,-1,1,-1,1,-1}  --> true
a[]={-1,1,-1,1,-1}    --> true
a[]={1,-4,1-6,1}      --> true
a[]={1,1,1,14,5,3,2}  --> false 
```

我已经开始编写一些使用标志的代码。例如，如果`current_is_positive=0`and `else = 1`，但我没有得到任何地方。有什么好的方法可以达到这种效果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T17:57:55.990

我认为您的意思是符号交替，即正数，负数，正数等？您可以使用以下策略：

跳过第一个元素。

对于每个其他元素，将其符号与前一个元素的符号进行比较：

*   如果它们不同，则序列到现在仍在交替 - 你应该继续。
*   如果它们是相同的符号，则序列不是交替的。您可以在此时停止处理。

由于这听起来像是一项家庭作业，因此我将由您自己用 Java 编写适当的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T18:04:56.183

这是我的解决方案：

这将检查元素 n+1 是否是元素 n 的倒数。

```
 public static void main(String[] args) {
        int[] ints = {1, -1, 2, -1};
        System.out.println(new Example().isArrayAlternating(ints));
    }

    public boolean isArrayAlternating(int[] ints) {
        if (ints == null || ints.length % 2 != 0) {
            return false;
        }
        for (int i = 0; i < ints.length - 1; i++) {
            if (ints[i] != ints[i + 1]*(-1)) {
                return false;
            }
        }
        return true;
    } 
```

如果您只想检查正数，负数...n次，而不关注值：

```
public static void main(String[] args) {
    int[] ints = {1, -1, 2, -1};
    System.out.println(new Example().isArrayAlternating(ints));
}

public boolean isArrayAlternating(int[] ints) {
    if (ints == null || ints.length % 2 != 0) {
        return false;
    }
    for (int i = 0; i < ints.length - 1; i++) {
        if (ints[i] >= 0 && ints[i + 1] >= 0 || ints[i] <= 0 && ints[i + 1] <= 0) {
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T18:03:55.607

```
private enum SIGN {
    POSITIVE, NEGATIVE
};

public static boolean isAlternating(int... ints) {
    SIGN last = null;
    for (int i : ints) {
        if (i >= 0) {
            if (last == null) {
                last = SIGN.POSITIVE;
            } else {
                if (last == SIGN.POSITIVE) {
                    return false;
                } else {
                    last = SIGN.POSITIVE;
                }
            }
        } else {
            if (last == null) {
                last = SIGN.NEGATIVE;
            } else {
                if (last == SIGN.NEGATIVE) {
                    return false;
                } else {
                    last = SIGN.NEGATIVE;
                }
            }
        }
    }
    return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T17:46:28.790

您可以简单地检查所有项目是否等于后退两步的项目。我不知道您使用的是什么语言，但例如使用 C#，您可以这样做：

```
bool alternating = a.Skip(2).Where((n, i) => a[i] == n).Count() == a.Length - 2; 
```

### 编辑：

所以你想检查值的*符号*是否是交替的，而不是值？

然后只需对照上一项检查标志：

```
bool alternating = a.Skip(1).Where((n,i) => Math.Sign(n) == -Math.Sign(a[i])).Count() == a.Length-1; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T17:58:52.617

```
boolean prevPositive = arr[0] > 0, error = false;
for (int i = 1; i < arr.length; ++i) {
    boolean current = arr[i] > 0;
    if (current != prevPositive) {
        current = prevPositive;
    } else {
        error = true;
        break;
    }
}
if (error)
   System.out.println("No");
else
   System.out.println("Yes"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T17:59:35.327

*   运行一个循环，从第一个索引到可能的最大值，步长为 2，以检查相同的符号。
*   然后再次循环，从第二个索引到可能的最大值，步长为 2，以检查相反的符号，但都相同。
*   所以，从索引循环 - `0, 2, 4, 6, ...`
*   然后从索引循环 -`1, 3, 5, 7, ...`

*   然后检查**两个循环中的每个数字与该迭代中的第一个数字的乘积是否应该是正数。**

    ```
    int a[]={1,-1,1,-1,1,-1};

    boolean alternating = true;

    for (int i = 0; i < a.length; i = i + 2) {
        if (a[i] * a[0] > 0) {
        } else {
            alternating = false;
        }
    }
    for (int i = 1; i < a.length; i = i + 2) {
        if (a[i] * a[1] > 0) {
        } else {
            alternating = false;
        }
    }

    if (alternating) {
        System.out.println("Array is alternating");
    } else 
        System.out.println("Array is not alternating");
    } 
    ```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-24T18:05:17.767

从索引 1 遍历数组直到结束。

在每个索引处，评估`(a[i] > 0) == (a[i-1] > 0)`。如果这是真的，那么你的数组不是交替的。

如果你坚持到最后却没有断定它不是交替的，那么它就是交替的:)

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-10-24T17:54:16.000

```
For i = 2 to n

   check whether A[i-1] && A[i] are with diff sign..
   in C++; return  ((A[i-1] ^  A[i]) < 0). 
```

此处解释相同：[http ://www.youtube.com/watch?v=Z59REm2YKX0](http://www.youtube.com/watch?v=Z59REm2YKX0)

**编辑**

如果一个整数为负数，则高位为 1。否则为 0。您可以通过将两个整数异或在一起来检查它们是否具有不同的符号。如果符号不同，则结果的高位为 1。如果它们相同，则高位为 0。因此，

A XOR B < 0 相当于“A 和 B 有不同的符号”

*彼得·鲁德曼*

# python - 是否可以在 virtualenv 设置后设置 --no-site-packages ？

> ID：13054726
> 
> 赞同：4
> 
> 时间：2012-10-24T17:40:48.003
> 
> 标签：python, virtualenv

> **可能重复：**
> [我可以更改现有的 virtualenv 以忽略全局站点包吗？（就像新的 --no-site-package 一样）](https://stackoverflow.com/questions/3873294/can-i-change-an-an-existing-virtualenv-to-ignore-global-site-packages-like-n)

我设置了一个 virtualenv，安装了很多我不想重新安装的软件包。有没有办法设置这个现有的 virtualenv 以便它不使用全局站点包目录？

仅供参考，这主要是出于收到此警告的动机： `UserWarning: Module X was already imported from` 每次我启动时，例如，mercurial。

相关，但反过来：[使用 virtualenv 恢复 `--no-site-packages` 选项](https://stackoverflow.com/questions/3371136/revert-the-no-site-packages-option-with-virtualenv)。这意味着我只需要一个`lib/no-global-site-packages.txt`文件，但其中一个空文件似乎没有效果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T18:21:15.617

另请参阅相反的内容：[修改 virtualenv](https://stackoverflow.com/questions/12433198/modifying-a-virtualenv)。

为了完整起见，我将在那里发布我的答案的反向说明。最终这个问题可以与另一个问题合并。

由于是*virtualenv最新版本 (* [>= 1.7](http://www.virtualenv.org/en/latest/news.html#id8) )`--no-site-packages`的默认行为，因此您只需要使用以下命令重新创建*virtualenv*：

 **```
$ virtualenv $PATH_TO_VIRTUALENV 
```

或在旧版本中`--system-site-packages`，默认行为是：

```
$ virtualenv --no-site-packages $PATH_TO_VIRTUALENV 
```

替换`$PATH_TO_VIRTUALENV`为现有*virtualenv*的路径。这将重新安装*virtualenv*，重新配置它以防止访问全局包，同时保留已经安装在那里的包。**

# javascript - setInterval() 在 Firefox 和 Chrome 中的行为不同

> ID：13054727
> 
> 赞同：2
> 
> 时间：2012-10-24T17:41:01.497
> 
> 标签：javascript, jquery, firefox, browser, setinterval

我写了一个函数，希望它在一个跨度内每秒显示 1 到 10。在调试程序时，我想将结果记录到控制台并看到 Firefox 和 chrome 的不同结果，Chrome 也会在每次页面刷新时更改结果。

以下是我的功能：

```
function log10()  {
        for(var i =0;i<=10;i++)
        {
            console.log(setInterval(function() {
                $("span").text(i)
            },6000));
        }
} 
```

Firefox 结果日志：2 到 11（通过 firebug）并且在重新加载时保持不变。

CHROME SHOWS: 1 to 11 (via built in debugger) 每次重新加载后显示 22 to 22 / 23 to 33 / 34 to 34 et-al

我通过调用函数`<body onload = log10();>`

有谁知道发生了什么。我更感兴趣的是知道如何根据我的代码在跨度中记录 1 到 10`$("span").text(i)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:42:39.240

您没有保存上下文，而是使用匿名函数来保存上下文。您应该使用`setTimeout`而不是`setInterval`，因为`setInterval`在您停止它之前不会停止（使用`clearInterval`或通过卸载页面）。另一方面`setTimeout`，每个循环只运行一次，延迟为 6000 毫秒。[jsfiddle](http://jsfiddle.net/Uyzes/)

```
function log10()  {
    var i = 0;
    function repeat(){
        if(i > 10 ) return;
        setTimeout(repeat, 600);
        $("span").text(i);
        i++;
    } 
    repeat();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T17:51:57.423

[http://jsfiddle.net/8sdu5/2/](http://jsfiddle.net/8sdu5/2/)

```
function log10()  {
    var counter = 1;
    var evt = setInterval(function() {
        $("span").text(counter++);
        if(counter > 10)
            clearInterval(evt);
    }, 1000);
} 
```

您不需要循环，setInterval 将自行“循环”，您只需要有一个条件来告诉它何时停止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T18:09:59.923

您遇到了变量绑定问题。解决它们的另一种方法是传入要显示的数字以及递归和 setTimeout：

### [工作 jsFidle 示例](http://jsfiddle.net/pajtai/zkDCC/)

```
// recursive function
function log10(theNumber)  {
        if (theNumber <= 10)
        {
            setTimeout(function() {
                $("span").text(theNumber);
                log10(++theNumber);
            },1000);
        }
}

// kick things off
log10(0); 
```

# c++ - QFileDialog 使我的应用程序崩溃

> ID：13054730
> 
> 赞同：1
> 
> 时间：2012-10-24T17:41:12.317
> 
> 标签：c++, qt, qfiledialog

以下简单代码中的 QFileDialog 使我的应用程序崩溃。它在我午餐我的应用程序的前 3 次工作，然后甚至没有更改使用 QFileDialog 的函数，它在运行时崩溃。

```
void Browse::on_browseButton_clicked()
{
    QString direc=QFileDialog::getOpenFileName(this,tr("Open Directory"),"/home",0,0,QFileDialog::DontUseNativeDialog);
    ui->lineEdit->setText(direc);
} 
```

我用

```
QFileDialog::DontUseNativeDialog; 
```

正如[这个网页](http://sarbojitqtexp.blogspot.com/2012/04/getting-crash-on-qfiledialog-static.html)所建议的那样， 它仍然崩溃。

知道为什么吗？我的目标是让用户浏览系统以选择文件或文件夹。如果您有其他工作要执行此任务，请告诉我。

使用 ubuntu 和 Qt。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:44:21.077

再次检查您链接到的页面：您需要将 QFileDialog::DontUseNativeDialog 传递给 getOpenFileName 调用，而不仅仅是作为它自己的语句。

# jsp - bean：消息未显示

> ID：13054733
> 
> 赞同：1
> 
> 时间：2012-10-24T17:41:28.443
> 
> 标签：jsp, struts

我有一个页面 index.jsp，其中包含此代码段

```
<bean:message key="label.username" /> 
```

然后我有一个名为 MessageResource.properties 的文件，其中包含：

```
label.username = Login Details 
```

最后在我的 strusts-config.xml 我有以下行：

```
<message-resources parameter="MessageResource"/> 
```

但是，index.jsp 不显示标签，而是显示以下内容：

？？？标签.用户名？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T23:11:14.067

尝试给出如下所示的全名

# javascript - Google Maps API V3 - KML 层与 JS 创建的多边形

> ID：13054735
> 
> 赞同：1
> 
> 时间：2012-10-24T17:41:42.797
> 
> 标签：javascript, google-maps, google-maps-api-3, kml

我回来做更多关于我一直在研究的 Google 地图的工作。情况如下：

我有一张弗吉尼亚的地图。它里面会有标记，但我需要几个人添加/删除/编辑这些标记。因此，我在“我的地点”中创建了一个 Google 地图，并将生成的 KML 文件导入到我正在加载到 API 中的地图中。

我还试图通过在相邻州上绘制一个多边形并在其上添加一个不透明度为 75% 的白色图层来“白化”相邻州，以使弗吉尼亚州更加突出。

但是，我遇到了一个问题，如果来自 KML 图层的标记“重叠”到覆盖边界状态的多边形上，则不透明的多边形会覆盖图层并且标记变得不可点击。如果放大到足够大，可以单击标记，但我希望人们能够从原始缩放中单击标记。

我尝试先制作标记，然后添加 KML，然后先制作 KML，然后绘制多边形，但这似乎并不重要。我什至在这里尝试了解决方案的变体：[在 google maps api v3 中完成多边形绘制时处理](https://stackoverflow.com/questions/9850444)，我在其中放置触发器以在侦听器事件中添加 KML 层，但仍然没有骰子。

我在谷歌上的搜索也没有让我找到任何看起来有用的东西。我不知道这是否仍然是图层排序的问题，或者多边形是否以某种方式“覆盖”了 KML 图层，无论顺序如何，或者是否有某种方法可以明确告诉 KML 标记保持不变在多边形的顶部。

首先，这是我现在用来绘制图层的主要代码：

```
function initialize() {
  var mapOptions = {
    zoom: 7,
    center: new google.maps.LatLng(38, -79.5),
    disableDefaultUI: true,
    mapTypeId: google.maps.MapTypeId.TERRAIN
  }
  var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

  borderingStates(map);

  var participantsLayer = new google.maps.KmlLayer('https://maps.google.com/maps/ms?msa=0&msid=204048902337864904598.0004cc332e8034251c1db&ie=UTF8&ll=37.668046,-80.289717&spn=1.959603,5.642338&output=kml',{preserveViewport:true});

  google.maps.event.addListener(map,'idle', function() {
  participantsLayer.setMap(map);
 });

}

function loadScript() {
  var script = document.createElement("script");
  script.type = "text/javascript";
  script.src = "https://maps.googleapis.com/maps/api/js?key=abc.def&sensor=false&callback=initialize";
  document.body.appendChild(script);
}

window.onload = loadScript; 
```

接下来，这是我用来绘制多边形的代码示例。当我调用上面的 borderingStates 函数时会发生这种情况：

```
//Delaware
 DEpoints = [

new google.maps.LatLng(39.7188, -75.7919),
new google.maps.LatLng(39.5210, -75.7837),
...
new google.maps.LatLng(39.8296, -75.6477),
new google.maps.LatLng(39.7199, -75.7906)
];

  // Construct the polygon
  var Delaware = new google.maps.Polygon({
    paths: DEpoints,
    fillColor: invisColor,
    strokeOpacity: 0,
    fillOpacity: .75
  });

  Delaware.setMap(map); 
```

然后我重复为每个状态绘制一个多边形 - 我认为有 6 或 7 个。

除了 Google Maps 固有地处理多边形和 KML 图层的方式之外，我不能说有什么特别的代码不会导致它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:35:23.323

我建议您也使用 KmlLayer（或 FusionTablesLayer）制作多边形。您可以通过将图层添加到地图的顺序来控制图层的顺序（第一个在底部）。我相信原生 Google Maps API v3 多边形将始终出现在图层之上。您的另一个选择是使多边形“不可点击”（可点击：false）[不确定这是否可行]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T11:47:38.407

这是我的第一次提交，冒着被贴上牛仔标签的风险，这是我对这个问题的解决方案：

1.  在第一次点击事件上删除多边形
2.  设置计时器以恢复多边形（1 1/2 秒后）
3.  在 1 1/2 秒的机会窗口期间捕获 KML 元素上的点击事件

```
google.maps.event.addListener(polygon, 'click', function () {
            polygon.setMap(null); // hide polygon for a 1 1/2 seconds           
            window.setTimeout(function () {
                polygon.setMap(map_canvas);
            }, 1500);
            // process polygon click now

        }); 
```

此方法确实意味着您将同时处理 Polygon 和 KML 元素单击事件，但在我们的示例中这很好。

# php - 在页面之间传递选定的复选框

> ID：13054739
> 
> 赞同：0
> 
> 时间：2012-10-24T17:42:33.483
> 
> 标签：php, javascript, checkbox

我想在页面之间传递选定复选框的值。我怎样才能做到这一点 ？我认为我必须使用 JavaScript 来获取选择复选框的值，但我不知道如何将值传递到另一个页面。

最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:47:50.117

这取决于您要保留它们的哪一侧。在客户端？如果是这样，请使用会话。在客户端？然后使用任何本地存储，如[jStorage](http://www.jstorage.info/)、[HTML5 Storage](http://www.w3schools.com/html/html5_webstorage.asp)、[DOM Storage](http://www.diveintojavascript.com/javascript-apis/web-storage-dom-storage)等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:51:52.120

最简单的方法是使用 PHP 会话：

```
 <?php
    //start session
    session_start();

    //get the posted values from your form

    $_SESSION['checkbox_value_1'] = $_POST['checkbox_1_name'];
    $_SESSION['checkbox_value_2'] = $_POST['checkbox_2_name'];
    $_SESSION['checkbox_value_3'] = $_POST['checkbox_3_name'];

    ?> 
```

因此，当您需要复选框的值时，您可以从会话中获取：

```
<input type="checkbox" value="<?php echo $_SESSION['checkbox_value_1'] ?>" name="checkbox_1" /> 
```

那应该这样做。

如果添加此位，您还可以将复选框设置为“选中”：

```
<?php
if (isset($_SESSION['checkbox_value_1']) && $_SESSION['checkbox_value_1'] != ''){
    //is selected (has a value)
    $checkbox_selected = 'checked="checked"';
} else $checkbox_selected = ''; //not checked
?> 
```

然后你可以像这样写你的复选框：

```
<input type="checkbox" value="<?php echo $_SESSION['checkbox_value_1'] ?>" name="checkbox_1" <?php echo $checkbox_selected; ?> /> 
```

这会将 checked="checked" 属性添加到复选框。

如果要限制会话值的数量，也可以将它们存储在数组中。如果你想要一个例子，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T18:21:02.050

您可以在发布表单时将 get 参数添加到表单（因此它将 get 参数设置为 url）代表复选框，然后使用 php 根据最后状态打印选中和未选中的框

为此，您必须通过 javascript 捕获表单的提交事件，将表单框的值解析为 get-values（许多 javascript 框架支持此类操作），然后最后将其发布到服务器上的 php然后，服务器在打印框时使用全局 $_GET 变量来测试每个状态。

（这是一个粗略的实现思路，始终认为未经验证的用户参数可能对您的应用程序有害）

# javascript - 如何在 d3 AlbersUSA 投影中移动状态？

> ID：13054741
> 
> 赞同：5
> 
> 时间：2012-10-24T17:42:36.410
> 
> 标签：javascript, position, d3.js

我在 d3 中使用标准的 AlbersUSA 投影。

不过，我遇到的一件事是，由于阿拉斯加和波多黎各位于相邻州绘制的“矩形”之外，因此我无法将缩放系数最大化以适应较小的视口。

理想情况下，我想把波多黎各搬到路易斯安那州以下，并可能与夏威夷和阿拉斯加交换位置，这会给我更好的工作范围。

查看文档，我看到 AlbersUSA 组合是使用以下函数创建的：

```
function albersUsa(coordinates) {
  var lon = coordinates[0],
      lat = coordinates[1];
  return (lat > 50 ? alaska
      : lon < -140 ? hawaii
      : lat < 21 ? puertoRico
      : lower48)(coordinates);
} 
```

我怎样才能修改这个函数（或有效地创建我自己的函数），以便我可以移动状态而不必担心增加 GeoJSON 数据本身？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:26:41.410

（这个我没试过）

1.  从 d3 源代码中复制代码`d3.geo.albersUsa`（代码包含在这篇文章的底部）。

2.  修改名称：`d3.geo.myAlbersUsa = function() { ... }`

3.  查看函数内部`albersUsa.translate`。这就是这三个州被转移到他们的“人工”位置的地方。例如`alaska.translate([dx - 400 * dz, dy + 170 * dz]);`

4.  调整这些数字（400 和 170），直到它移动到您想要的位置（从小的变化开始，例如 +/- 10）。

5.  对于您将数据绘制到的任何路径，您需要将其投影指定为您的自定义投影：`path.projection(d3.geo.myAlbersUsa())`

从 D3 源代码，这是您需要在步骤 1 中复制/粘贴的代码：

```
// A composite projection for the United States, 960x500\. The set of standard
// parallels for each region comes from USGS, which is published here:
// http://egsc.usgs.gov/isb/pubs/MapProjections/projections.html#albers
// TODO allow the composite projection to be rescaled?
d3.geo.albersUsa = function() {
  var lower48 = d3.geo.albers();

  var alaska = d3.geo.albers()
      .origin([-160, 60])
      .parallels([55, 65]);

  var hawaii = d3.geo.albers()
      .origin([-160, 20])
      .parallels([8, 18]);

  var puertoRico = d3.geo.albers()
      .origin([-60, 10])
      .parallels([8, 18]);

  function albersUsa(coordinates) {
    var lon = coordinates[0],
        lat = coordinates[1];
    return (lat > 50 ? alaska
        : lon < -140 ? hawaii
        : lat < 21 ? puertoRico
        : lower48)(coordinates);
  }

  albersUsa.scale = function(x) {
    if (!arguments.length) return lower48.scale();
    lower48.scale(x);
    alaska.scale(x * .6);
    hawaii.scale(x);
    puertoRico.scale(x * 1.5);
    return albersUsa.translate(lower48.translate());
  };

  albersUsa.translate = function(x) {
    if (!arguments.length) return lower48.translate();
    var dz = lower48.scale() / 1000,
        dx = x[0],
        dy = x[1];
    lower48.translate(x);
    alaska.translate([dx - 400 * dz, dy + 170 * dz]);
    hawaii.translate([dx - 190 * dz, dy + 200 * dz]);
    puertoRico.translate([dx + 580 * dz, dy + 430 * dz]);
    return albersUsa;
  };

  return albersUsa.scale(lower48.scale());
}; 
```

# java - Java 字符串类型数组或简单字符串用法

> ID：13054751
> 
> 赞同：0
> 
> 时间：2012-10-24T17:43:16.067
> 
> 标签：java, arrays, string

我是java初学者，想问一个基本问题

在阅读字符串和数组时，我发现有时我们会像这样使用字符串类型 Arras

```
String   Words[]={"first ", "Second"..};
String  words="These are sample words"; 
```

以及更多声明它的方法。我想问一下提到的两个字符串之间的基本区别是什么。我的意思是为什么我们需要声明字符串类型数组而不是 `String obj= ..;`etc 。有人可以解释一下吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:44:11.727

```
Strings  words="These are sample words"; 
```

不编译。java中没有可用的**字符串**类型。

你可能指的是

```
String  words="These are sample words"; 
```

above 和 array 之间的区别是， above 是 single `String`。`String[]`将用于存储多个 * *String* *s

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T17:45:17.883

第一行声明并初始化一个对象数组`String`，而第二行，一旦你修复编译错误（字符串应该是`String`）声明并初始化一个`String`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T17:47:29.527

请用 lowerCamelCase 声明 var。

```
String [] wordsArray = {"first", "Second"..};
String  words = "These are sample words"; 
```

# twitter-bootstrap - 右侧的 Bootstrap 导航堆叠下拉菜单

> ID：13054753
> 
> 赞同：1
> 
> 时间：2012-10-24T17:43:25.437
> 
> 标签：twitter-bootstrap

我正在开发一个带有 twitter-bootstrap 的界面，该界面有一个用于导航的侧边栏，因此是 nav-stacked。我还想使用某些选项卡中的下拉菜单。我发现下拉菜单放在所有其他菜单项的顶部是不雅的。我希望下拉菜单下拉到侧边栏的一侧，这样您仍然可以看到其余的侧边栏项目。我研究了右拉，但我认为这不是我要找的。

无论如何，这是我到目前为止所拥有的：

```
 <ul class="nav nav-tabs nav-stacked"> 
                <li class="{{home}}">
                    <a href="/home/">Home</a></li>

                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="/cars/">Cars<b class="caret"></b></a>

                    <ul class="dropdown-menu">
                        <li class="{{1999s10}}"><a href="/cars/1999s10">1999 Electric S-10</a></li>
                        <li class="{{1965malibu}}"><a href="/cars/1965malibu">1965 Malibu</a></li>
                        <li class="{{1960hearse}}"><a href="/cars/1960hearse">1960 Hearse</a></li>
                        <li class="{{1966gto}}"><a href="/cars/1966gto">1966 GTO</a></li>
                        <li class="{{1971blazer}}"><a href="/cars/1971blazer">1971 Bazer</a></li>
                        <!-- <li class="divider"></li> -->
                    </ul>

                </li>
            </ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T20:22:11.763

所以你想要一个不像下拉菜单的下拉菜单:)这很容易完成，这里是你在“新鲜”推特引导程序上的工作示例

```
<ul class="nav nav-tabs nav-stacked" style="width:200px;">  <!-- <<<< added styling -->
    <li class="{{home}}"><a href="/home/">Home</a></li>
    <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="/cars/">Cars<b class="caret"></b></a>
        <ul class="dropdown-menu" style="margin-left:200px;margin-top:-38px;">  <!-- <<<< added styling -->
            <li class="{{1999s10}}"><a href="/cars/1999s10">1999 Electric S-10</a></li>
            <li class="{{1965malibu}}"><a href="/cars/1965malibu">1965 Malibu</a></li>
            <li class="{{1960hearse}}"><a href="/cars/1960hearse">1960 Hearse</a></li>
            <li class="{{1966gto}}"><a href="/cars/1966gto">1966 GTO</a></li>
            <li class="{{1971blazer}}"><a href="/cars/1971blazer">1971 Bazer</a></li>
        </ul>
    </li>
    <!-- dummy extra links -->
    <li class="{{home}}"><a href="/home/">Home</a></li>
    <li class="{{home}}"><a href="/home/">Home</a></li>
    <li class="{{home}}"><a href="/home/">Home</a></li>
    <li class="{{home}}"><a href="/home/">Home</a></li>
    <li class="{{home}}"><a href="/home/">Home</a></li>
    <li class="{{home}}"><a href="/home/">Home</a></li>
</ul> 
```

只需设置样式`dropdown-menu`，使其垂直定位`nav-tabs`在`dropdown-toggle`元素之外。我不知道您使用的是什么宽度，所以我将其设置`nav-tabs`为 200 像素。

# jquery - jQuery：根据状态切换 href 的标题属性

> ID：13054755
> 
> 赞同：8
> 
> 时间：2012-10-24T17:43:26.607
> 
> 标签：jquery

我需要完成一些非常简单的事情，而到目前为止我所做的只是完成了一半。

我有一个链接`<a href="#" class="favorites">Favorite</a>`，你可以看到它没有*标题*属性。

加载页面时，脚本会添加此*标题*属性：

`<a href="#" class="favorites" title="Add to Favorites">Favorites</a>`

*单击时，将切换选中*的类，然后应更改*标题属性，因此最终结果将如下所示：*

`<a href="#" class="favorites checked" title="Item added to Favorites">Favorites</a>`

我有这段代码，但虽然它改变了新的标题属性，但当再次单击时，标题属性没有交换，这是我需要的：

```
$('.favorites').attr('title','Add to Favorites').click(function(){
  $(this).toggleClass('checked').attr('title','Added to Favorites');
}); 
```

有什么想法可以在点击时“切换”属性吗？

我创建了这个[**DEMO**](http://jsfiddle.net/rzea/DPVZx/1/)来展示这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T17:49:13.850

尝试这个

```
$('.favorites').attr('title', 'Add to Favorites').click(function() {
    $(this).toggleClass('checked');
    var title = 'Add to Favorites' ;

    if( $(this).hasClass('checked')){
       title = 'Added to Favorites';
    }
    $(this).attr('title', title);
});​ 
```

[检查小提琴](http://jsfiddle.net/sushanth009/DPVZx/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T18:23:12.793

我知道我迟到了，但我写了一个小插件来处理*属性的切换*

```
(function($) {
    var methods = {
        init: function(options){
            var defaults = {
                propName: '',
                toggleTo: '',
                toggleFrom: ''
            }

            return this.each(function() {
                var $this = $(this);
                var settings = $.extend({}, defaults, options);

                if($this.data('toggled') == 'false' || !$this.data('toggled')){
                    $this.data('toggled', 'true');
                    $this.prop(settings.propName, settings.toggleTo);
                }else{
                    $this.data('toggled', 'false');
                    $this.prop(settings.propName, settings.toggleFrom);                                              
                }
           });
        }
    } 
    $.fn.toggleProperty = function( method ) {
        if (methods[method]) {
            return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
        } else if (typeof method === 'object' || !method) {
            return methods.init.apply(this, arguments);
        } else {
            $.error( 'Method ' +  method + ' does not exist on jQuery.toggleProperty' );
        }           
    };
})(jQuery); 
```

只需将其放在事件调用中，就可以了。

```
$('element').click(function(){
    $(this).toggleProperty({
        propName: 'title',
        toggleTo: 'Added From Favorites',
        toggleFrom: $(this).prop('title') 
    });
}); 
```

此外，该`toggleFrom`属性允许您传入初始标题，或者您想要来回切换的新标题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T17:49:12.727

您可以在 is/else 内执行或仅使用三元运算符

```
//Toggle attribute
$('.favorites').attr('title', 'Add to Favorites').click(function() {
     $(this)
        .toggleClass('checked')
        .attr('title', $(this).hasClass('checked') ? "Item added to Favorites":'Added to Favorites');
});​ 
```

[http://jsfiddle.net/WwqYC/](http://jsfiddle.net/WwqYC/)

最终与

```
$('.favorites').attr('title', 'Add to Favorites').click(function() {        
    $(this).toggleClass('checked');        
    if($(this).hasClass('checked')){
        $(this).attr('title',"Item added to Favorites");
    }else{
        $(this).attr('title','Added to Favorites');
    } 
});​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T17:49:37.307

使用`data-`属性来存储备用标题，然后在`title`每次单击时将其与属性进行切换。jQuery 将使用该方法自动检索`data-`属性中的任何内容。[`.data()`](http://api.jquery.com/data)这具有非常灵活的优点——任何`.favorites`链接都可以使用这个事件处理程序交换任何标题文本。

```
<a href="#" class="favorites" data-title2="Added to Favorites" title="Add to Favorites">Favorites</a>​ 
```

JS：

```
$('.favorites').click(function() {
    var $this = $(this),
        t1 = $this.attr('title'),
        t2 = $this.data('title2');
 $this.toggleClass('checked').attr('title',t2).data('title2',t1);
});​ 
```

[http://jsfiddle.net/mblase75/Na2pE/](http://jsfiddle.net/mblase75/Na2pE/)

或者，如果你想让它更灵活，添加一些代码来检测`data-title2`first 的存在：

```
$('.favorites').click(function() {
    var $this = $(this),
        t1 = $this.attr('title'),
        t2 = $this.data('title2');
    $this.toggleClass('checked');
    if (t2) {
        $this.attr('title', t2).data('title2', t1);
    };
});​ 
```

# python - Python：找到非线性方程的多个根

> ID：13054758
> 
> 赞同：19
> 
> 时间：2012-10-24T17:43:41.100
> 
> 标签：python, optimization, scipy

假设以下函数：

`f(x) = x * cos(x-4)`

使用此函数在和处`x = [-2.5, 2.5]`交叉。`0``f(0) = 0``f(-0.71238898) = 0`

这是通过以下代码确定的：

```
import math
from scipy.optimize import fsolve
def func(x):
    return x*math.cos(x-4)
x0 = fsolve(func, 0.0)
# returns [0.]
x0 = fsolve(func, -0.75)
# returns [-0.71238898] 
```

使用`fzero`（或任何其他 Python 根查找器）在一次调用中找到两个根的正确方法是什么？是否有不同的`scipy`功能可以做到这一点？

[`fzero`参考](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.fsolve.html#scipy.optimize.fsolve)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-24T18:54:30.193

我曾经为这个任务写过一个模块。它基于[Jaan Kiusalaas 的《Python 工程中的数值方法](http://www.amazon.de/Numerical-Methods-Engineering-Python-Kiusalaas/dp/0521191327/ref=sr_1_1?ie=UTF8&qid=1351104745&sr=8-1)》一书的第 4.3 章：

```
import math

def rootsearch(f,a,b,dx):
    x1 = a; f1 = f(a)
    x2 = a + dx; f2 = f(x2)
    while f1*f2 > 0.0:
        if x1 >= b:
            return None,None
        x1 = x2; f1 = f2
        x2 = x1 + dx; f2 = f(x2)
    return x1,x2

def bisect(f,x1,x2,switch=0,epsilon=1.0e-9):
    f1 = f(x1)
    if f1 == 0.0:
        return x1
    f2 = f(x2)
    if f2 == 0.0:
        return x2
    if f1*f2 > 0.0:
        print('Root is not bracketed')
        return None
    n = int(math.ceil(math.log(abs(x2 - x1)/epsilon)/math.log(2.0)))
    for i in range(n):
        x3 = 0.5*(x1 + x2); f3 = f(x3)
        if (switch == 1) and (abs(f3) >abs(f1)) and (abs(f3) > abs(f2)):
            return None
        if f3 == 0.0:
            return x3
        if f2*f3 < 0.0:
            x1 = x3
            f1 = f3
        else:
            x2 =x3
            f2 = f3
    return (x1 + x2)/2.0

def roots(f, a, b, eps=1e-6):
    print ('The roots on the interval [%f, %f] are:' % (a,b))
    while 1:
        x1,x2 = rootsearch(f,a,b,eps)
        if x1 != None:
            a = x2
            root = bisect(f,x1,x2,1)
            if root != None:
                pass
                print (round(root,-int(math.log(eps, 10))))
        else:
            print ('\nDone')
            break

f=lambda x:x*math.cos(x-4)
roots(f, -3, 3) 
```

`roots``f`在区间 [ `a`, `b`]中找到 的所有根。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-24T18:44:48.023

定义您的函数，以便它可以将标量或 numpy 数组作为参数：

```
>>> import numpy as np
>>> f = lambda x : x * np.cos(x-4) 
```

然后将参数向量传递给`fsolve`.

```
>>> x = np.array([0.0, -0.75])
>>> fsolve(f,x)
array([ 0\.        , -0.71238898]) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-24T18:45:08.273

一般来说（即除非你的函数属于某个特定的类）你不能找到所有的全局解决方案——这些方法通常从给定的起点进行局部优化。

但是，您可以将 math.cos() 与 numpy.cos() 切换，这将使您的函数矢量化，以便它可以一次求解多个值，例如 fsolve(func, np.arange(-10,10,0.5))。

# ruby-on-rails - where子句的Rails效率

> ID：13054759
> 
> 赞同：3
> 
> 时间：2012-10-24T17:43:51.397
> 
> 标签：ruby-on-rails, ruby-on-rails-3, performance, where

我担心这条线在我的 Rails 项目的控制器中的效率

```
posts_list = Post.where(:title => params[:title]) 
```

如果数据库中的“帖子”数量增加，该行执行会变慢吗？有没有可能的优化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T17:50:18.957

它只是触发这个查询，

```
select * from posts where title = params[:title] 
```

您可以索引迁移文件中的标题列

```
add_index(:posts, :title) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T17:48:32.773

在标题字段上添加索引可以是第一种方法：

```
class AddIndexTitleToPost < ActiveRecord::Migration
    def change
      add_index :posts, :title, uniq: false
    end
end 
```

您可以在迭代中使用 find_each 来防止数据库增长

```
Post.where(title: params[:title]).find_each(batch_size: 10) do |post|
    ...
end 
```

这一切都是为了应用性增强

# java - 比较两个 ListNode 值的比较器

> ID：13054761
> 
> 赞同：1
> 
> 时间：2012-10-24T17:43:58.510
> 
> 标签：java

如果 ListNode o1.value > ListNode o2.value，我如何比较两个 ListNode 值以返回 1，如果相等则返回 0，如果小于则返回 -1。

我现在有这个比较器，但是有一个错误说没有实现抽象方法。此外，我不确定他们是否会正确比较以下示例中的值。

添加'd'。添加'b'。添加'e'

b->d->e

```
private Comparator<? super E> priorityComparator = new Comparator<E>(){ 
  public int compare(ListNode<E> o1, ListNode<E> o2) {
     String i1 = o1.value.toString();
     String i2 = o2.value.toString();
        return i1.compareTo(i2);
    }}; 
```

如何正确实现此比较器，以便它获取两个 ListNode 对象并返回它们之间的 int 值比较？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T17:46:44.580

您目前尚未实施`Comparator<E>.compare`- 您已实施`Comparator<ListNode<E>>.compare`. 您*要么*需要更改变量的类型，*要么*需要更改方法的参数。如果你真的想做一些比较节点的东西，那么你想要`Comparator<ListNode<E>>`.

另请注意，您的比较仅适用于`toString()`以与其自然顺序兼容的方式覆盖的类型。例如，它不适用于`ListNode<Integer>`，因为它会声称 10 的值小于 2 的值......

# java - Spring Layout 未正确调整大小

> ID：13054762
> 
> 赞同：2
> 
> 时间：2012-10-24T17:44:01.787
> 
> 标签：java, swing, springlayout

我是 Java GUI 构建中的 spring 布局的新手，但如果我想以我想要的方式布局我的 GUI，似乎使用 spring 布局是唯一的方法。

我遇到的问题是，当我在我的`JFrame`. 但是当我将 resizeable 设置为 true 时，一切都按照我想要的方式完美排列。我知道 1 或 2 个像素并没有相差太多，但这足以让我的 GUI 看起来很奇怪，因为某些文本框比其他文本框大 1 或 2 个像素。这是我的弹簧布局的代码：

```
 pnlTop.setLayout(layout);

    lblClosetLoc.setText("Closet location:");
    lblPhone1.setText("Phone 1:");
    lblJackPaired.setText("Jack paired:");
    lblPhone2.setText("Phone 2:");
    lblCubicle.setText("Cubicle:");
    lblJackType.setText("Jack type:");
    lblName.setText("Name:");
    lblPhoneJack1.setText("Phone jack 1:");
    lblPhoneJack2.setText("Phone jack 2:");
    lblDataJack1.setText("Data jack 1:");
    lblDataJack2.setText("Data jack 2:");
    lblComments.setText("Comments:");

    txtClosetLoc.setEditable(false);
    txtClosetLoc.setText("");
    txtPhone1.setEditable(false);
    txtPhone1.setText("");
    txtJackPaired.setEditable(false);
    txtJackPaired.setText("");
    txtPhone2.setEditable(false);
    txtPhone2.setText("");
    txtCubicle.setEditable(false);
    txtCubicle.setText("");
    txtJackType.setEditable(false);
    txtJackType.setText("");
    txtFname.setEditable(false);
    txtFname.setText("");
    txtLname.setEditable(false);
    txtLname.setText("");
    txtPhoneJack1.setEditable(false);
    txtPhoneJack1.setText("");
    txtPhoneJack2.setEditable(false);
    txtPhoneJack2.setText("");
    txtDataJack1.setEditable(false);
    txtDataJack1.setText("");
    txtDataJack2.setEditable(false);
    txtDataJack2.setText("");
    txtComments.setEditable(false);
    txtComments.setText("");

    pnlTop.add(lblClosetLoc);
    pnlTop.add(txtClosetLoc);
    pnlTop.add(lblPhone1);
    pnlTop.add(txtPhone1);
    pnlTop.add(lblJackPaired);
    pnlTop.add(txtJackPaired);
    pnlTop.add(lblPhone2);
    pnlTop.add(txtPhone2);
    pnlTop.add(lblCubicle);
    pnlTop.add(txtCubicle);
    pnlTop.add(lblJackType);
    pnlTop.add(txtJackType);
    pnlTop.add(lblName);
    pnlTop.add(txtFname);
    pnlTop.add(txtLname);
    pnlTop.add(lblPhoneJack1);
    pnlTop.add(lblPhoneJack2);
    pnlTop.add(lblDataJack1);
    pnlTop.add(lblDataJack2);
    pnlTop.add(lblComments);
    pnlTop.add(txtPhoneJack1);
    pnlTop.add(txtPhoneJack2);
    pnlTop.add(txtDataJack1);
    pnlTop.add(txtDataJack2);
    pnlTop.add(txtComments);

    layout.putConstraint(layout.WEST, lblClosetLoc, 5, layout.WEST, pnlTop);
    layout.putConstraint(layout.NORTH, lblClosetLoc, 1, layout.NORTH, txtClosetLoc);

    layout.putConstraint(layout.WEST, txtClosetLoc, 5, layout.EAST, lblClosetLoc);
    layout.putConstraint(layout.NORTH, txtClosetLoc, 5, layout.NORTH, pnlTop);

    layout.putConstraint(layout.WEST, lblPhone1, 0, layout.WEST, lblPhone2);
    layout.putConstraint(layout.NORTH, lblPhone1, 1, layout.NORTH, txtPhone1);

    layout.putConstraint(layout.WEST, txtPhone1, 0, layout.WEST, txtPhone2);
    layout.putConstraint(layout.NORTH, txtPhone1, 0, layout.NORTH, txtClosetLoc);

    layout.putConstraint(layout.WEST, lblJackPaired, 5, layout.WEST, pnlTop);
    layout.putConstraint(layout.NORTH, lblJackPaired, 1, layout.NORTH, txtJackPaired);

    layout.putConstraint(layout.WEST, txtJackPaired, 22, layout.EAST, lblJackPaired);
    layout.putConstraint(layout.NORTH, txtJackPaired, 5, layout.SOUTH, txtClosetLoc);

    layout.putConstraint(layout.WEST, lblPhone2, 0, layout.WEST, lblJackType);
    layout.putConstraint(layout.NORTH, lblPhone2, 1, layout.NORTH, txtPhone2);

    layout.putConstraint(layout.WEST, txtPhone2, 0, layout.WEST, txtJackType);
    layout.putConstraint(layout.NORTH, txtPhone2, 0, layout.NORTH, txtJackPaired);

    layout.putConstraint(layout.WEST, lblCubicle, 5, layout.WEST, pnlTop);
    layout.putConstraint(layout.NORTH, lblCubicle, 1, layout.NORTH, txtCubicle);

    layout.putConstraint(layout.WEST, txtCubicle, 47, layout.EAST, lblCubicle);
    layout.putConstraint(layout.NORTH, txtCubicle, 5, layout.SOUTH, txtJackPaired);

    layout.putConstraint(layout.WEST, lblJackType, 83, layout.EAST, txtCubicle);
    layout.putConstraint(layout.NORTH, lblJackType, 1, layout.NORTH, txtJackType);

    layout.putConstraint(layout.WEST, txtJackType, 0, layout.WEST, txtDataJack1);
    layout.putConstraint(layout.NORTH, txtJackType, 0, layout.NORTH, txtCubicle);

    layout.putConstraint(layout.WEST, lblName, 5, layout.WEST, pnlTop);
    layout.putConstraint(layout.NORTH, lblName, 1, layout.NORTH, txtFname);

    layout.putConstraint(layout.WEST, txtFname, 56, layout.EAST, lblName);
    layout.putConstraint(layout.NORTH, txtFname, 5, layout.SOUTH, txtCubicle);

    layout.putConstraint(layout.WEST, txtLname, 5, layout.EAST, txtFname);
    layout.putConstraint(layout.NORTH, txtLname, 5, layout.SOUTH, txtCubicle);

    layout.putConstraint(layout.WEST, txtPhoneJack1, 0, layout.WEST, txtFname);
    layout.putConstraint(layout.NORTH, txtPhoneJack1, 5, layout.SOUTH, txtFname);

    layout.putConstraint(layout.WEST, txtPhoneJack2, 0, layout.WEST, txtPhoneJack1);
    layout.putConstraint(layout.NORTH, txtPhoneJack2, 5, layout.SOUTH, txtPhoneJack1);

    layout.putConstraint(layout.WEST, txtComments, 0, layout.WEST, txtPhoneJack2);
    layout.putConstraint(layout.NORTH, txtComments, 5, layout.SOUTH, txtPhoneJack2);

    layout.putConstraint(layout.WEST, txtDataJack1, 0, layout.WEST, txtDataJack2);
    layout.putConstraint(layout.NORTH, txtDataJack1, 5, layout.SOUTH, txtLname);

    layout.putConstraint(layout.WEST, lblPhoneJack1, 5, layout.WEST, pnlTop);
    layout.putConstraint(layout.NORTH, lblPhoneJack1, 1, layout.NORTH, txtPhoneJack1);

    layout.putConstraint(layout.WEST, txtDataJack2, 5, layout.EAST, lblDataJack2);
    layout.putConstraint(layout.NORTH, txtDataJack2, 5, layout.SOUTH, txtDataJack1);

    layout.putConstraint(layout.WEST, lblPhoneJack2, 5, layout.WEST, pnlTop);
    layout.putConstraint(layout.NORTH, lblPhoneJack2, 1, layout.NORTH, txtPhoneJack2);

    layout.putConstraint(layout.WEST, lblDataJack1, 0, layout.WEST, lblJackType);
    layout.putConstraint(layout.NORTH, lblDataJack1, 1, layout.NORTH, txtDataJack1);

    layout.putConstraint(layout.WEST, lblDataJack2, 0, layout.WEST, lblDataJack1);
    layout.putConstraint(layout.NORTH, lblDataJack2, 1, layout.NORTH, txtDataJack2);

    layout.putConstraint(layout.WEST, lblComments, 5, layout.WEST, pnlTop);
    layout.putConstraint(layout.NORTH, lblComments, 1, layout.NORTH, txtComments);

    layout.putConstraint(layout.EAST, pnlTop, 5, layout.EAST, txtDataJack2);
    layout.putConstraint(layout.SOUTH, pnlTop, 5, layout.SOUTH, txtComments); 
```

**SSCCE：**

启动类：

```
public class test1 {

public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                MainFrame mFrame = new MainFrame();

                mFrame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
} 
```

}

主框架：

```
public class MainFrame extends JFrame {

public MainFrame() {
    setupFrame();
}

private void setupFrame() {
    SpringLayout layout = new SpringLayout();

    pnlMainCenter.setLayout(new BoxLayout(pnlMainCenter, BoxLayout.Y_AXIS));

    //Top part of the main panel 
    //Information to be displayed
    pnlTop.setLayout(layout);

    lblClosetLoc.setText("Closet location:");
    lblPhone1.setText("Phone 1:");
    lblJackPaired.setText("Jack paired:");
    lblPhone2.setText("Phone 2:");
    lblCubicle.setText("Cubicle:");
    lblJackType.setText("Jack type:");
    lblName.setText("Name:");
    lblPhoneJack1.setText("Phone jack 1:");
    lblPhoneJack2.setText("Phone jack 2:");
    lblDataJack1.setText("Data jack 1:");
    lblDataJack2.setText("Data jack 2:");
    lblComments.setText("Comments:");

    txtClosetLoc.setEditable(false);
    txtClosetLoc.setText("");
    txtPhone1.setEditable(false);
    txtPhone1.setText("");
    txtJackPaired.setEditable(false);
    txtJackPaired.setText("");
    txtPhone2.setEditable(false);
    txtPhone2.setText("");
    txtCubicle.setEditable(false);
    txtCubicle.setText("");
    txtJackType.setEditable(false);
    txtJackType.setText("");
    txtFname.setEditable(false);
    txtFname.setText("");
    txtLname.setEditable(false);
    txtLname.setText("");
    txtPhoneJack1.setEditable(false);
    txtPhoneJack1.setText("");
    txtPhoneJack2.setEditable(false);
    txtPhoneJack2.setText("");
    txtDataJack1.setEditable(false);
    txtDataJack1.setText("");
    txtDataJack2.setEditable(false);
    txtDataJack2.setText("");
    txtComments.setEditable(false);
    txtComments.setText("");

    pnlTop.add(lblClosetLoc);
    pnlTop.add(txtClosetLoc);
    pnlTop.add(lblPhone1);
    pnlTop.add(txtPhone1);
    pnlTop.add(lblJackPaired);
    pnlTop.add(txtJackPaired);
    pnlTop.add(lblPhone2);
    pnlTop.add(txtPhone2);
    pnlTop.add(lblCubicle);
    pnlTop.add(txtCubicle);
    pnlTop.add(lblJackType);
    pnlTop.add(txtJackType);
    pnlTop.add(lblName);
    pnlTop.add(txtFname);
    pnlTop.add(txtLname);
    pnlTop.add(lblPhoneJack1);
    pnlTop.add(lblPhoneJack2);
    pnlTop.add(lblDataJack1);
    pnlTop.add(lblDataJack2);
    pnlTop.add(lblComments);
    pnlTop.add(txtPhoneJack1);
    pnlTop.add(txtPhoneJack2);
    pnlTop.add(txtDataJack1);
    pnlTop.add(txtDataJack2);
    pnlTop.add(txtComments);

    layout.putConstraint(layout.WEST, lblClosetLoc, 5, layout.WEST, pnlTop);
    layout.putConstraint(layout.NORTH, lblClosetLoc, 1, layout.NORTH, txtClosetLoc);

    layout.putConstraint(layout.WEST, txtClosetLoc, 5, layout.EAST, lblClosetLoc);
    layout.putConstraint(layout.NORTH, txtClosetLoc, 5, layout.NORTH, pnlTop);

    layout.putConstraint(layout.WEST, lblPhone1, 0, layout.WEST, lblPhone2);
    layout.putConstraint(layout.NORTH, lblPhone1, 1, layout.NORTH, txtPhone1);

    layout.putConstraint(layout.WEST, txtPhone1, 0, layout.WEST, txtPhone2);
    layout.putConstraint(layout.NORTH, txtPhone1, 0, layout.NORTH, txtClosetLoc);

    layout.putConstraint(layout.WEST, lblJackPaired, 5, layout.WEST, pnlTop);
    layout.putConstraint(layout.NORTH, lblJackPaired, 1, layout.NORTH, txtJackPaired);

    layout.putConstraint(layout.WEST, txtJackPaired, 22, layout.EAST, lblJackPaired);
    layout.putConstraint(layout.NORTH, txtJackPaired, 5, layout.SOUTH, txtClosetLoc);

    layout.putConstraint(layout.WEST, lblPhone2, 0, layout.WEST, lblJackType);
    layout.putConstraint(layout.NORTH, lblPhone2, 1, layout.NORTH, txtPhone2);

    layout.putConstraint(layout.WEST, txtPhone2, 0, layout.WEST, txtJackType);
    layout.putConstraint(layout.NORTH, txtPhone2, 0, layout.NORTH, txtJackPaired);

    layout.putConstraint(layout.WEST, lblCubicle, 5, layout.WEST, pnlTop);
    layout.putConstraint(layout.NORTH, lblCubicle, 1, layout.NORTH, txtCubicle);

    layout.putConstraint(layout.WEST, txtCubicle, 47, layout.EAST, lblCubicle);
    layout.putConstraint(layout.NORTH, txtCubicle, 5, layout.SOUTH, txtJackPaired);

    layout.putConstraint(layout.WEST, lblJackType, 83, layout.EAST, txtCubicle);
    layout.putConstraint(layout.NORTH, lblJackType, 1, layout.NORTH, txtJackType);

    layout.putConstraint(layout.WEST, txtJackType, 0, layout.WEST, txtDataJack1);
    layout.putConstraint(layout.NORTH, txtJackType, 0, layout.NORTH, txtCubicle);

    layout.putConstraint(layout.WEST, lblName, 5, layout.WEST, pnlTop);
    layout.putConstraint(layout.NORTH, lblName, 1, layout.NORTH, txtFname);

    layout.putConstraint(layout.WEST, txtFname, 56, layout.EAST, lblName);
    layout.putConstraint(layout.NORTH, txtFname, 5, layout.SOUTH, txtCubicle);

    layout.putConstraint(layout.WEST, txtLname, 5, layout.EAST, txtFname);
    layout.putConstraint(layout.NORTH, txtLname, 5, layout.SOUTH, txtCubicle);

    layout.putConstraint(layout.WEST, txtPhoneJack1, 0, layout.WEST, txtFname);
    layout.putConstraint(layout.NORTH, txtPhoneJack1, 5, layout.SOUTH, txtFname);

    layout.putConstraint(layout.WEST, txtPhoneJack2, 0, layout.WEST, txtPhoneJack1);
    layout.putConstraint(layout.NORTH, txtPhoneJack2, 5, layout.SOUTH, txtPhoneJack1);

    layout.putConstraint(layout.WEST, txtComments, 0, layout.WEST, txtPhoneJack2);
    layout.putConstraint(layout.NORTH, txtComments, 5, layout.SOUTH, txtPhoneJack2);

    layout.putConstraint(layout.WEST, txtDataJack1, 0, layout.WEST, txtDataJack2);
    layout.putConstraint(layout.NORTH, txtDataJack1, 5, layout.SOUTH, txtLname);

    layout.putConstraint(layout.WEST, lblPhoneJack1, 5, layout.WEST, pnlTop);
    layout.putConstraint(layout.NORTH, lblPhoneJack1, 1, layout.NORTH, txtPhoneJack1);

    layout.putConstraint(layout.WEST, txtDataJack2, 5, layout.EAST, lblDataJack2);
    layout.putConstraint(layout.NORTH, txtDataJack2, 5, layout.SOUTH, txtDataJack1);

    layout.putConstraint(layout.WEST, lblPhoneJack2, 5, layout.WEST, pnlTop);
    layout.putConstraint(layout.NORTH, lblPhoneJack2, 1, layout.NORTH, txtPhoneJack2);

    layout.putConstraint(layout.WEST, lblDataJack1, 0, layout.WEST, lblJackType);
    layout.putConstraint(layout.NORTH, lblDataJack1, 1, layout.NORTH, txtDataJack1);

    layout.putConstraint(layout.WEST, lblDataJack2, 0, layout.WEST, lblDataJack1);
    layout.putConstraint(layout.NORTH, lblDataJack2, 1, layout.NORTH, txtDataJack2);

    layout.putConstraint(layout.WEST, lblComments, 5, layout.WEST, pnlTop);
    layout.putConstraint(layout.NORTH, lblComments, 1, layout.NORTH, txtComments);

    layout.putConstraint(layout.EAST, pnlTop, 5, layout.EAST, txtDataJack2);
    layout.putConstraint(layout.SOUTH, pnlTop, 5, layout.SOUTH, txtComments);
    //end top part

    //Middle part of the main panel
    //Buttons and options
    pnlMid.setLayout(layout);

    lblRecords.setText("0/MaxRecords");
    lblRecords.setHorizontalAlignment(JLabel.CENTER);
    lblRecords.setPreferredSize(new Dimension(82, 20));

    btnSearch.setText("Search");
    btnSearch.setPreferredSize(new Dimension(75, 22));
    btnSearch.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {

        }
    });
    btnEditSave.setText("Edit");
    btnEditSave.setPreferredSize(new Dimension(75, 22));
    btnEditSave.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {

        }
    });
    btnPrevRecord.setText("<<");
    btnPrevRecord.setPreferredSize(new Dimension(50, 22));
    btnPrevRecord.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {

        }
    });
    btnNextRecord.setText(">>");
    btnNextRecord.setPreferredSize(new Dimension(50, 22));
    btnNextRecord.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {

        }
    });

    pnlMid.add(btnSearch);
    pnlMid.add(btnEditSave);
    pnlMid.add(btnPrevRecord);
    pnlMid.add(btnNextRecord);
    pnlMid.add(lblRecords);

    layout.putConstraint(layout.WEST, lblRecords, 12, layout.WEST, btnPrevRecord);
    layout.putConstraint(layout.NORTH, lblRecords, 0, layout.NORTH, pnlMid);

    layout.putConstraint(layout.WEST, btnSearch, 5, layout.WEST, pnlMid);
    layout.putConstraint(layout.NORTH, btnSearch, 5, layout.SOUTH, lblRecords);

    layout.putConstraint(layout.WEST, btnEditSave, 5, layout.EAST, btnSearch);
    layout.putConstraint(layout.NORTH, btnEditSave, 5, layout.SOUTH, lblRecords);

    layout.putConstraint(layout.EAST, btnNextRecord, -5, layout.EAST, pnlMid);
    layout.putConstraint(layout.NORTH, btnNextRecord, 5, layout.SOUTH, lblRecords);

    layout.putConstraint(layout.EAST, btnPrevRecord, -5, layout.WEST, btnNextRecord);
    layout.putConstraint(layout.NORTH, btnPrevRecord, 5, layout.SOUTH, lblRecords);

    layout.putConstraint(layout.EAST, pnlMid, 0, layout.EAST, pnlTop);
    layout.putConstraint(layout.SOUTH, pnlMid, 5, layout.SOUTH, btnNextRecord);
    //end middle part

    //add the objects to the panels
    pnlMainCenter.add(pnlTop);
    pnlMainCenter.add(pnlMid);
    //add the panels to the frame
    getContentPane().add(pnlMainCenter, BorderLayout.CENTER);

    //set frame properties
    setTitle("Test");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setResizable(false);
    setLocation(300,300);
    pack();
}

private JPanel pnlMainCenter = new JPanel();
private JPanel pnlMid = new JPanel();
private JPanel pnlTop = new JPanel();
private JLabel lblClosetLoc = new JLabel();
private JLabel lblPhone1 = new JLabel();
private JLabel lblJackPaired = new JLabel();
private JLabel lblPhone2 = new JLabel();
private JLabel lblCubicle = new JLabel();
private JLabel lblJackType = new JLabel();
private JLabel lblName = new JLabel();
private JLabel lblPhoneJack1 = new JLabel();
private JLabel lblPhoneJack2 = new JLabel();
private JLabel lblDataJack1 = new JLabel();
private JLabel lblDataJack2 = new JLabel();
private JLabel lblComments = new JLabel();
private JLabel lblRecords = new JLabel();
private JTextField txtClosetLoc = new JTextField(5);
private JTextField txtPhone1 = new JTextField(5);
private JTextField txtJackPaired = new JTextField(5);
private JTextField txtPhone2 = new JTextField(5);
private JTextField txtCubicle = new JTextField(10);
private JTextField txtJackType = new JTextField(5);
private JTextField txtFname = new JTextField(9);
private JTextField txtLname = new JTextField(9);
private JTextField txtPhoneJack1 = new JTextField(6);
private JTextField txtPhoneJack2 = new JTextField(6);
private JTextField txtDataJack1 = new JTextField(6);
private JTextField txtDataJack2 = new JTextField(6);
private JTextField txtComments = new JTextField(15);
private JButton btnSearch = new JButton();
private JButton btnEditSave = new JButton();
private JButton btnPrevRecord = new JButton();
private JButton btnNextRecord = new JButton();
} 
```

# css - div位置 - css

> ID：13054763
> 
> 赞同：2
> 
> 时间：2012-10-24T17:44:03.833
> 
> 标签：css, html

我试图实现，div 的行为就像图片上的一个例子，使用 css： ![页面示例](../Images/7a77989228f1f7e6f6aaa90851b4864e.png)

有什么干净的方法可以做到这一点吗？我使用 javascript 来计算“左”div 高度和“主”div 宽度和高度来实现这一点。但我不喜欢这个解决方案......有没有办法只使用 css 来做到这一点？

编辑：页面不能有滚动条......所以页面的高度总是最大 100%，没有更多......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:25:58.397

如果侧边栏（或任何其他 div）的高度为 100%，并且顶部有一个 30px 的标题，那么这会导致您的容器为 100% + 30px 的高度。

将来您将在 css3 calc() 中使用：http: [//hacks.mozilla.org/2010/06/css3-calc/](http://hacks.mozilla.org/2010/06/css3-calc/) 这将解决您的问题。

但是现在您可以添加`overflow: hidden;`到`html`and`body`部分，但我建议使用 Javascript 计算侧边栏的高度（容器高度 - 标题高度）。

在这里检查[小提琴](http://jsfiddle.net/DmHUX/12/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:49:19.153

如果你的意思是两列布局，你可以像这样使用纯 CSS：

```
.container {
  background-color: #aaaaaa;
}

.left {
    float: left;
    width: 100px;
    clear: left;
}

.right {
    margin-left: 100px;
    background-color: #888888;
} 
```

和 HTML：

```
<div class="container">
  <div class="left">left</div>
  <div class="right">right</div>
</div> 
```

**现场演示：[jsFiddle](http://jsfiddle.net/Xv9xn/)**

无需任何特殊的`div`CSS 即可实现顶部。要在下面放置一些东西（例如页脚），您需要使用`clear: both`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T17:51:19.160

没有任何代码，很难确定你想要什么。这是我相信你想要的一个非常简单的版本。

HTML：

```
<div id="header">

</div>
<div id="side">

</div>
<div id="content">

</div> 
```

CSS：

```
#header {
    width:100%;
    height:50px;
}
#side {
    width:300px;
    height:100%;
    float:left;
}
#content {
    width:660px;
    height:100%;
    float:left;
} 
```

[**jsFiddle**](http://jsfiddle.net/H6a8n/1/)

# c# - 无法在 Gridview 中显示列的总和

> ID：13054765
> 
> 赞同：0
> 
> 时间：2012-10-24T17:44:12.627
> 
> 标签：c#, asp.net

我无法在页脚的标签中显示值。下面是代码

```
Aspx

<asp:GridView ID="gvallAccount" runat="server" AutoGenerateColumns="False" Width="589px"
                        OnRowDataBound="gvallAccount_RowDataBound" OnRowCommand="gvallAccount_RowCommand">
                        <Columns>
                            <asp:TemplateField Visible="False">
                                <ItemTemplate>
                                    <asp:Label ID="lblAccountID" runat="server" Text='<%# Bind("ProductAccountID") %>'></asp:Label>
                                </ItemTemplate>
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Name" Visible="True">
                                <ItemTemplate>
                                    <asp:Label ID="lblProductName" runat="server" Text='<%# Bind("ProductName") %>'></asp:Label>
                                </ItemTemplate>
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Account Number" Visible="True">
                                <ItemTemplate>
                                    <asp:LinkButton ID="lnkAccCode" runat="server" Text='<%# Bind("ProductAccountCode") %>'
                                        OnClick="lnkAccCode_Click" CommandName="gotoLink"></asp:LinkButton>
                                </ItemTemplate>
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Account Value(KES)" Visible="True">
                                <ItemTemplate>
                                    <asp:Label ID="lblBalance" runat="server" Text='<%# Bind("BalanceToDate") %>'></asp:Label>
                                </ItemTemplate>
                                <FooterTemplate>
                                    <asp:Label ID="lblTotal" runat="server"></asp:Label>
                                </FooterTemplate>
                            </asp:TemplateField>
                        </Columns>
                    </asp:GridView>

C# Code 

 protected void gvallAccount_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        try
        {
            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                decimal rowTotal = Convert.ToDecimal
                            (DataBinder.Eval(e.Row.DataItem, "BalanceToDate"));
                grdTotal = grdTotal + rowTotal;
            }
            if (e.Row.RowType == DataControlRowType.Footer)
            {
                Label lblTotal = (Label)e.Row.FindControl("lblTotal");
                lblTotal.Text = grdTotal.ToString();
            }
        }
        catch (Exception Ex)
        {
            logger.Error("gvallAccount_RowDataBound : " + Ex.Message);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:31:10.253

您需要在 GridView 标记中有 ShowFooter="True" 属性。

```
<asp:GridView ID="gvallAccount" runat="server" AutoGenerateColumns="False" Width="589px"
                    OnRowDataBound="gvallAccount_RowDataBound" OnRowCommand="gvallAccount_RowCommand" ShowFooter="True"> 
```

# dependency-injection - 带有自定义注释和 CDI 注入的消息路由/处理

> ID：13054769
> 
> 赞同：0
> 
> 时间：2012-10-24T17:44:29.560
> 
> 标签：dependency-injection, annotations, java-ee-6, cdi

我有一个 Java EE 6 Web 应用程序并使用 WebSocket 协议与浏览器进行通信。浏览器可以发送各种类型的消息，并且在服务器的*onMessage*方法中，我想根据消息类型将消息路由（或分派）到特定的消息处理程序类。我想通过注解配置或注册这些消息处理程序，类似于 servlet 的机制（@WebServlet("/there")）。就像在 servlet 中一样，我希望能够在消息处理程序中使用 CDI 注入。

现在我有一个*MessageType*注释、一个*MessageHandler*接口和 3 个实现。

```
@Documented
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
public @interface MessageType
{
    String value();
}

public interface MessageHandler
{
    public void processMessage(String inputMesssage);
}

@MessageType("first")
public class FirstMessageHandler implements MessageHandler
{
    @Inject
    ResourceBundleProvider resourceBundleProvider;

    @Override
    public void processMessage(String inputMesssage)
    {
        System.out.println("FirstMessageHandler#processMessage: " + inputMesssage);
        System.out.println("InjectionTest: " + resourceBundleProvider.getValue("label.language"));
    }
}

@MessageType("second")
public class SecondMessageHandler implements MessageHandler
{
    @Override
    public void processMessage(String inputMesssage)
    {
        System.out.println("SecondMessageHandler#processMessage: " + inputMesssage);
    }
}

public class DefaultMessageHandler implements MessageHandler
{
    @Override
    public void processMessage(String inputMesssage)
    {
        System.out.println("DefaultMessageHandler#processMessage: " + inputMesssage);
    }
} 
```

我还有一个*MessageDispatcher*类，它使用[反射](http://code.google.com/p/reflections/)扫描类路径以查找带注释的消息处理程序，实例化它们并将它们放入映射中：

```
@ApplicationScoped
public class MessageDispatcher
{
    private Map<String, MessageHandler> messageHandlerMap = new HashMap<String, MessageHandler>();

    @Inject
    DefaultMessageHandler defaultMessageHandler;

    public MessageDispatcher()
    {
        registerAnnotatedHandlers();
    }

    private void registerAnnotatedHandlers()
    {
        Reflections reflections = new Reflections("namespace");

        try
        {
            for (Class<?> annotatedClass : reflections.getTypesAnnotatedWith(MessageType.class))
            {
                String annotationValue = annotatedClass.getAnnotation(MessageType.class).value();

                for (Class<?> interfaceClass : annotatedClass.getInterfaces())
                    if (!annotationValue.isEmpty() && interfaceClass.equals(MessageHandler.class))
                        messageHandlerMap.put(annotationValue, (MessageHandler) annotatedClass.newInstance());
            }
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }       
    }

    public MessageHandler getMessageHandler(String key)
    {
        MessageHandler messageHandler = messageHandlerMap.get(key);

        return messageHandler != null ? messageHandler : defaultMessageHandler;
    }
} 
```

最后，在我的 websocket servlet 的*onMessage*方法中，我从入站消息中提取密钥并将其用于消息路由：

```
public synchronized void onMessage(String data)
{
    String[] message = data.split(":");

    // Choose the message handler from the message
    MessageHandler messageHandler = messageDispatcher.getMessageHandler(message[0]);

    // Process the message by the message handler
    messageHandler.processMessage(message[1]);
} 
```

我的 3 条传入示例消息是：

```
"first:Message to handle with FirstMessageHandler"
"second:Message to handle with SecondMessageHandler"
"third:Message to handle with DefaultMessageHandler" 
```

这很好用，第一条和第二条消息分别由 FirstMessageHandler 和 SecondMessageHandler 处理。第三条消息由默认消息处理程序处理，因为没有注册其他处理程序来处理键“第三”。

**我的问题：**我不能在消息处理程序中使用注入，因为它们是使用 Java 反射创建的。有人知道如何让注释处理和 CDI 注入“结婚”吗？或者是否有人认为这种方法是胡说八道并且有另一种解决方案？

最好的问候
塞巴斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:49:55.670

这是我的最终方法：

我将 PostConstruct 方法用于我的 MessageDispachter，在其中查找所有消息处理程序 bean。对于这些 bean 中的每一个，我都获得了它们的注释值和对 bean 的引用（这也包括 bean 的创建）。然后我将注释值和 bean 引用都存储到我的 messageHandlerMap 中。涉及很多 CDI 委派和拦截，但它有效：

```
public class MessageDispatcher
{
    private Map<String, MessageHandler> messageHandlerMap = new HashMap<String, MessageHandler>();

    @Inject
    DefaultMessageHandler defaultMessageHandler;

    @Inject
    BeanManager beanManager;

    @PostConstruct
    public void registerHandlers()
    {
        Set<Bean<?>> messageHandlerBeans = beanManager.getBeans(MessageHandler.class, new MessageTypeLiteral());
        for (Bean<?> bean : messageHandlerBeans)
        {
            String key = bean.getBeanClass().getAnnotation(MessageType.class).value();

            if (!key.isEmpty())
            {
                CreationalContext<?> creationalContext = beanManager.createCreationalContext(bean);
                MessageHandler messageHandler = (MessageHandler) beanManager.getReference(bean, MessageHandler.class, creationalContext);
                messageHandlerMap.put(key, messageHandler);
            }
        }
    }

    public MessageHandler getMessageHandler(String key)
    {
        MessageHandler messageHandler = (MessageHandler) messageHandlerMap.get(key);
        return messageHandler != null ? messageHandler : defaultMessageHandler;
    }
}

@Documented
@Qualifier
@Retention(RUNTIME)
@Target({TYPE, METHOD, FIELD, PARAMETER})
public @interface MessageType
{
    @Nonbinding
    String value();
}

@SuppressWarnings("all")
public class MessageTypeLiteral extends AnnotationLiteral<MessageType> implements MessageType
{
    private static final long serialVersionUID = 1L;

    @Override
    public String value()
    {
        return "";
    }
}

public class DefaultMessageHandler implements MessageHandler
{
    @Inject
    ResourceBundleProvider resourceBundleProvider;

    @Override
    public void processMessage(String inputMesssage)
    {
...

@MessageType("first")
public class FirstMessageHandler implements MessageHandler
{
    @Inject
    ResourceBundleProvider resourceBundleProvider;

    @Override
    public void processMessage(String inputMesssage)
    {
... 
```

`@NonBinding`注释中的注释`@MessageType`似乎很重要，以查找所有`@MessageType("xxx")`独立于实际注释值（这里：xxx）注释的bean。

我希望这能解释重要的事情。更多详情请咨询我

塞巴斯蒂安

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T04:30:14.700

我认为您最简单的解决方案是保留您所拥有的，去掉扫描，因为您不需要它，将您的注释更改为限定符并使用限定符触发 CDI 事件（您需要创建一个AnnotationLiteral 用于三个不同的限定符中的每一个，因为该值是绑定的）和消息作为有效负载。

如果您需要，我可以解释更多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-07T16:49:24.553

查看和调整[Dynamically fire CDI event with qualifier with members](https://stackoverflow.com/questions/6925010/dynamically-fire-cdi-event-with-qualifier-with-members) 这是一种通过运行时决策动态选择服务的 CDI 方式。TypeEnum 也可以是字符串。

# java - Creating a method that prints a different random entry of an array list each time it is called?

> ID：13054771
> 
> 赞同：2
> 
> 时间：2012-10-24T17:44:37.297
> 
> 标签：java, random, arraylist, indexing, output

I'm making a mock-media player program that allows the user to input,edit,delete and view all tracks. Pretty basic, I know. But I want to add a feature that allows a random entry in the array list to be printed each time "Play Random Song" is selected to simulate the shuffle function of a music player. So my method would be like

```
public void playRandom()

{
System.out.println("Now Playing: " + *insert code here?* ")
} 
```

I have 3 array lists representing track name, track year and track artist however when I'm printing to screen I want it to be displayed in such a way it prints the artist, then a hyphen, then the track name?

My code is below:

My Main Class: package ca1;

```
//imports the Random mechanism
  import java.util.Random;

//imports the scanner
  import java.util.Scanner;

public class MainClass extends UserInput {

        public String nextInt;

        public static void main(String[] args) {

      //Links to the UserInput class to create an object that stores
      //user input    
        UserInput ui = new UserInput();

      //Creates new scanner object
        Scanner input = new Scanner(System.in);

      //Declares the int "opt" so it can be used in the menu  
        int opt;

        //Calls Methods Class so methods can be used below
        Methods methodsFunctions = new Methods();

        //initial prompt only displayed when program is first ran
        System.out.println("Welcome to your music library");

        //Usig a do while loop so that the program keeps running until 
        //a specific condition is met, in this case it's when 0 is selected.
        do 
        {

          //Menu Prompts printed to the screen for the user to select from
            System.out.println("........ \n");
            System.out.println("Press 0 to Exit\n");
            System.out.println("Press 1 to Add a Song\n");
            System.out.println("Press 2 to View All Songs\n");
            System.out.println("Press 3 to Remove a Song\n");
            System.out.println("Press 4 to Edit Song Information\n");
            System.out.println("Press 5 to Play Random Song\n");
            System.out.println("Press 6 to Delete All Songs\n");

          //Monitors the next Int the user types
            opt = input.nextInt();

            //"if" statements
            if (opt == 0) 
            {
            //This corresponds to the condition of the while loop,      
            //The program will exit and print "Goodbye!" for the user.  

             System.out.println("Goodbye!");  
            } 

            else if (opt == 1)                 
            { 
             //This method allows the user to add a song to the library.
             //With the format being Title, Artist, Year.

               methodsFunctions.addEntry();
            }

            else if (opt == 2)
            {
              //This method prints the contents of the Array List to the screen  

                methodsFunctions.viewAll(); 
            } 

            else if (opt == 3)             
            {
              //This method allows the user to remove an indiviual song from
              //their music library  

                methodsFunctions.removeOne(); 
            } 

            else if (opt == 4) 
            {
              //This method allows the user to edit the data of a particular 
              //and then prints the new value on screen

                methodsFunctions.editItem();
            } 

            else if (opt == 5) 
            {    
               //This method will print out "Now playing" followed by a random
               //song to simulate a music player's shuffle effect.

                //methodsFunctions.RandomSong();
                System.out.println("Now Playing ");
            } 

            else if (opt == 6) 
            {
                //This method will clear all contents of the library.
                //It will ask the user to confirm their choice.

                methodsFunctions.clearAll();
             } 

            else 
            {
              //If the user selects an incorrect number, the console will 
              //tell the user to try again and the main menu will print again

                System.out.println("Incorrect Entry, please try again");
            }

        } //do-while loop
        while (opt > 0);

    }
} 
```

My Methods Class:

```
package ca1;

import java.util.ArrayList;
import java.util.List;
import java.util.Random;
import java.util.Scanner;

public class Methods extends UserInput

{
 Scanner input = new Scanner (System.in);

 //Declare array lists  
 List<String> songName = new ArrayList<>();
 List<String> songArtist = new ArrayList<>();
 List<Integer> songYear = new ArrayList<>();

    UserInput ui = new UserInput();

    private Random newRandom;

            public void clearAll(){  
            System.out.println("Are you sure?");
            System.out.print("1: Yes \n2: No" + "\n");
            System.out.print("");

            int confirmDelete=input.nextInt();
            if (confirmDelete == 1){
            songName.clear();
            songYear.clear();
            System.out.println("Your music library has been cleared");
        }   

}

        public void viewAll(){  
        System.out.println("\n");
        for (int i = 0; i < songName.size(); i++){
        int counter=i+1;
        System.out.println(counter+": "+songArtist.get(i)+" - "+ songName.get(i)+ " ("     +songYear.get(i)+") ");
        }
        System.out.println("\n");
}   

    public void addEntry(){
    //System.out.print("Enter Name: ");
    String newName = ui.getString("Enter the name of the track");
    songName.add(newName);
    String newArtist = ui.getString("Who performs this track");
    songArtist.add(newArtist);
    System.out.print("What year was the track released? ");
    int newYear=input.nextInt();
    songYear.add(newYear);

    System.out.println("\n" + "Thank you, " +songName.get(songName.size()-1) + " has been   added to the library.");
    System.out.println("\n" + "Press 2 to view your library." + "\n");

    /*
    System.out.println("\n"+songName.get(songName.size()-1));
    System.out.println("\n"+songArtist.get(songArtist.size()-1));
    System.out.println("\n"+songYear.get(songYear.size()-1));
    */
} 

 public void removeOne(){       

    System.out.println(" Which song would you like to delete? (1 to "+songName.size()+")");
    viewAll();
    int remove=input.nextInt();
    if (remove >songName.size()){
        System.out.println("Invalid ");
    }
    else {
        remove--;
        System.out.println("Are you sure you would like to delete  "+songArtist.get(remove)+" - "+songName.get(remove)+" (" +songYear.get(remove)+ ") from your music library?");
        System.out.print("1: Yes \n2: No" + "\n");
        int confirmDelete=input.nextInt();
        if (confirmDelete == 1){
            songArtist.remove(remove); 
            songName.remove(remove);
            songYear.remove(remove);
            System.out.println(songName.get(remove)+ " has just been removed from your  music library");
            // viewAll();
        }       
    }
} 

   public void playRandom()
   {
      String RandomSong = (SongName.random);

       System.out("Now playing + " RandomSong);

   }            

 public void editItem(){
    viewAll();
    System.out.println("Choose the song you want to edit (1 to "+songName.size()+")");
  //prints out the contents of library with first entry being index 1
  //The library is numbered and goes as far as the index of the last entry  

    int edit=input.nextInt();       
    if (edit >songName.size()){
        System.out.println("Invalid Selection");

      //if user selects a number that corresponds to an index that's not
      //In the array list, they will be shown an error.
    }

        else{
        edit--;
        System.out.println("\n" + "Enter New Track Name: ");
        input.nextLine();
        String editName=input.nextLine();
        songName.set(edit,editName);
      //Edits the songName value of the Song object selected 

        System.out.println("\n" + "Enter New Artist ");
        String editArtist=input.nextLine();
        songArtist.set(edit,editArtist);
      //Edits the songArtist value of the Song object selected 

        System.out.println("\n" + "Enter New Year:");
        int editYear;
        editYear = input.nextInt();
        songYear.set(edit,editYear);
      //Edits the songName value of the Song object selected

        System.out.print("\n" + "Your changes have been saved:" + "\n");
        System.out.print("\n" + "This is your current library");
        viewAll();
    }
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:59:29.320

Well I think you have to do something like that:

Find out how long your array is. For example, 50 songs. Then, generate a random number between 0 and length-1.

```
public void playRandom()
{
  int randomnumber =(int)(Math.random() * (length-1));
  System.out.println("Now Playing: " + arrayOfSongName[randomnumber]);
} 
```

Then you have a random track.

# wpf - WPF 应用程序使用错误的 app.config

> ID：13054772
> 
> 赞同：1
> 
> 时间：2012-10-24T17:44:38.110
> 
> 标签：wpf, app-config

我的应用程序目录中有两个应用程序配置文件。一个名为 Test.config，另一个名为 MyApp.exe.config。

Test.config 与 MyApp.exe.config 类似，稍作修改。

如果我执行 MyApp.exe，它会使用 Test.config 来运行，因为应用程序的某些方面是在这些配置文件中配置的。但是，如果我将 MyApp.exe.config 重命名为 MyApp1.exe.config，应用程序将无法启动。

如果我删除 Test.config，应用程序会使用 MyApp.exe.config 中的设置正确启动。这是一个 .NET 3.5 WPF 应用程序。

任何人都会遇到这种情况。

TIA。

# java - 一个 EAR 文件中的 java 库如何被另一个 EAR 文件访问？

> ID：13054774
> 
> 赞同：5
> 
> 时间：2012-10-24T17:44:43.410
> 
> 标签：java, jakarta-ee, jar, weblogic, ear

我有两个 .Ear 文件，即 A.EAR 和 B.EAR。第一个文件是我的应用程序（大约 1.5 MB），第二个文件包含所有需要的库，例如 Hibernate、log4j 等（大约 70 MB）。我如何将它们部署在 weblogic 上，以使我在 A.EAR 中的代码使用 B.EAR 中的库？

1.  我无法将它们打包到一个 .EAR 文件中，因为我需要每周通过电子邮件发送我的应用程序。在发送电子邮件时，我只发送 A.EAR 文件。
2.  我不能将使用的库放在`lib`weblogic 的文件夹中，因为其他应用程序使用不同的库版本。

**编辑：**

找到正确答案后，似乎[这个关于 SO](https://stackoverflow.com/questions/5664189/how-do-i-create-a-common-component-in-weblogic)的 Q 在某种程度上是相关的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T11:52:03.717

您可以将 B.ear 定义为共享应用程序库并从 A 访问它

[http://docs.oracle.com/cd/E17904_01/web.1111/e13706/libraries.htm#i1065356](http://docs.oracle.com/cd/E17904_01/web.1111/e13706/libraries.htm#i1065356)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:11:37.660

这可能不是您问题的直接答案，但我会根据“每周通过电子邮件发送应用程序”的需要来设计实际可部署应用程序的结构（即，将其拆分为多个 EAR 文件）。

对我来说，一个应用程序有 2 个单独的 EAR 文件似乎很危险。我了解您说 B.EAR 包含不变的库（Hibernate、log4j）。但是，通过在 A.EAR 中使用它们，它们会继承地与您的应用程序密切相关。换句话说，您的应用程序确实是 A+B ... A.EAR 不能没有 B.EAR。

相反，您是否可以设置某种修订/源代码控制存储库（SVN、Git 等）并使用 Ant/Ivy 或 Maven 来管理您的依赖项？

这样，任何需要应用程序副本的人都可以访问存储库、拉取源代码、允许 Ant/Ivy 解决依赖关系并进行构建。

# arrays - Matlab中合并数组元素

> ID：13054776
> 
> 赞同：-1
> 
> 时间：2012-10-24T17:44:46.647
> 
> 标签：arrays, matlab

假设`x`是一个数组`[x1, x2, x3, x4, x5]`，我们想要合并`x2`和`x4`。这是通过将它们的总和放入数组中并从数组中删除`x2`和`x4`来完成的。输出数组应如下所示：`[x1, x2+x4, x3, x5]`.

这是在 Matlab 中执行此操作的一种方法：

```
tmp = x(2) + x(4);
x(2) = tmp;
x(4) = tmp;
[m,n] = unique(x,'first'); 
x(sort(n)) 
```

只要数组中没有重复项，此方法就有效。是否有任何巧妙的 Matlab 方法可以`x`在合并值后不诉诸循环和移动数组元素的情况下执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:53:51.833

如果你想改变这个

```
x = [x(1) x(2) x(3) ... x(i)... x(j)... x(n)] 
```

进入这个

```
x = [x(1) x(2) x(3) ... x(i)+x(j) ... **... x(n)] 
```

其中 ** 是空的，新的 x 是 n-1 个元素长，那么你应该这样做：

```
x(i) = x(i)+x(j);
x(j) = []; 
```

没有 tmp，没有排序，也没有唯一性。

# c - C 中基本 TCP 客户端服务器编程中的连接错误

> ID：13054778
> 
> 赞同：0
> 
> 时间：2012-10-24T17:45:00.200
> 
> 标签：c, linux, client-server

服务器必须在Linux中使用C程序回显客户端发送的消息。我使用的是Ubuntu OS（我不知道这个信息是否有用！）。它第一次起作用。但第二次，它给出了“错误连接”。我尝试更改端口号。但它仍然没有奏效。请指导我。我是初学者。

**服务器.c**

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/socket.h>
#include <string.h>
#include <sys/types.h>
#include <unistd.h>
#include <netinet/in.h>

int main()
{
    int sd, sd1, len, confd, n;
    struct sockaddr_in ser, cli;
    char msg[50];

    if((sd = socket(AF_INET,SOCK_STREAM, 0)) < 0)
        printf("\nSocket creation error\n");

    bzero(&ser, sizeof(ser));
    ser.sin_family = cli.sin_family = PF_INET;
    ser.sin_port = htons(10000);
    ser.sin_addr.s_addr = htonl(INADDR_ANY);
    len = sizeof(ser);

    if ((bind(sd, (struct sockaddr*)&ser, len)) < 0) {
        printf("\nBind Error");
        exit(0);
    }
    if (listen(sd, 2) == 0) {
        if ((sd1 = accept(sd, (struct sockaddr*)&ser, &len)) > 0) {
            do {
                bzero(&msg, 50);
                read(sd1, msg, 50);
                //int m=(int)msg;
                printf("\nMessage from client:%s\n", msg);
                write(sd1, msg, strlen(msg));
                if(strcmp(msg, "exit") == 0)
                    break;
            } while(strcmp(msg, "exit") != 0);
        }
    }
} 
```

**强文本**client.c

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/socket.h>
#include <string.h>
#include <sys/types.h>
#include <unistd.h>
#include <netinet/in.h>

int main()
{
    int sd, n, len;
    struct sockaddr_in ser, cli;
    char text[50];

    if ((sd = socket(AF_INET,SOCK_STREAM, 0)) < 0)
        printf("\nSocket creation error\n");

    bzero(&ser, sizeof(ser));
    ser.sin_family = cli.sin_family = PF_INET;
    ser.sin_port = htons(10000);
    ser.sin_addr.s_addr = htonl(INADDR_ANY);
    len = sizeof(ser);

    if ((connect(sd, (struct sockaddr*)&ser, len)) < 0) {
        printf("\nError connection");
        exit(0);
    }
    while(1) {
        strcpy(text, " ");
        printf("\nEnter data which is to be sent:");
        scanf("%s", text);
        write(sd, text, strlen(text));
        read(sd, text, 50);
        printf("\nEcho msg from server:%s", text);
        if (strcmp(text, "exit") == 0)
            break;
    }
    close(sd);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:51:23.983

您的客户真的可以连接到*任何地址*吗？

```
ser.sin_addr.s_addr=htonl(INADDR_ANY); 
```

您很可能打算连接到特定服务器：

```
ser.sin_addr.s_addr=inet_addr("127.0.0.1"); 
```

# version-control - 版本控制 vs. 自动分发 vs. 依赖管理

> ID：13054780
> 
> 赞同：1
> 
> 时间：2012-10-24T17:45:02.987
> 
> 标签：version-control, dependencies, dvcs, software-distribution, distributed-system

想象一个分布式软件系统，安装在一组几百台计算机（节点）上。节点负责自动运行计划任务。有数百个任务，每个任务计划在大约 5-10 个节点上运行。节点可能会停止数天，并且可能会从系统中删除。每个任务都由一个或多个源文件和特定于节点的配置文件定义。代码直接在节点上开发和测试（使用远程访问），因为只有这些节点配备了特殊的硬件并具有运行任务所需的网络上下文（构建单独的测试系统太昂贵了）。每个任务的源文件引用共享源文件（库），库可能引用其他库。任务和库的依赖树很复杂。

[我对分布式版本控制系统](http://en.wikipedia.org/wiki/Distributed_revision_control)没有任何经验，但我觉得这个系统可以围绕 DVCS 构建。不同的库和不同任务的源文件会有自己的存储库。每个运行给定任务的节点都应该有一个该任务的 repo 实例。每个节点的至少一个任务使用的每个库的存储库也应该存在于该节点上。开发人员将在节点上本地修改和`commit`编码，并使用 DVCS 技术将修改分发到其他节点上的 repos。

**问题 #1** *将代码更改分发到其他节点的最佳方法是什么？*

一些可能的场景：

1.  开发人员`push`对具有相同 repo 实例的每个其他节点进行修改。（但他们可能会忘记/没有时间这样做。）
2.  节点会自动`pull`从每个其他远程存储库和`update`它们自己中进行每次更改。（但可能会有冲突。）
3.  对于每个 repo，其中一个实例用作“参考”。开发人员`push`对这个实例的修改，以及具有实例的每个其他节点自动`pull`从这里和`update`s 本身。（但具有引用实例的节点可能会停止。）

**问题 #2** *处理依赖关系的最佳方法是什么？*

如果多个任务（或库）引用同一个库，并且必须修改引用的库，则一个或多个引用任务（或库）可能会停止工作（[依赖地狱](http://en.wikipedia.org/wiki/Dependency_hell)）。最好还是坚持原来的版本，经过适当的测试升级到新版本。也就是说，同一源文件的多个版本应该存在于同一个 repo 中，这似乎是不可能的。我是否必须为`branch`引用库的新版本创建一个新版本？如果是，我应该如何升级推荐回购？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:03:56.010

> 我对分布式版本控制系统没有任何经验，但我觉得这个系统可以围绕 DVCS 构建。

错误的感觉，共通。VCS（SCM）即版本控制系统（Source Control Management），即-track

*   变化
*   主要在历史方面
*   作为没有复杂依赖的平面数组（仍然考虑到一些依赖）

您必须查看[另一类](http://en.wikipedia.org/wiki/Comparison_of_open_source_configuration_management_software)工具 -**配置管理软件**，它可以本地处理部署、策略、复杂依赖项、条件等

您*可以*使用 DVCS 对 CM 进行一些迭代，但这将是一项艰苦的工作，因此与现有完善的工具相去甚远

# google-maps-api-3 - 使用 setinterval google maps v3 调用函数时出现重复标记

> ID：13054782
> 
> 赞同：0
> 
> 时间：2012-10-24T17:45:06.030
> 
> 标签：google-maps-api-3, markers

我有下一个代码可以从 xml 文件中检索一些数据。问题是当我想刷新标记时，我得到的响应是地图中的重复标记。如何在没有重复标记的情况下更新点？

此致

```
//<![CDATA[
  // this variable will collect the html which will eventually be placed in the       side_bar 
  var side_bar_html = ""; 

  // arrays to hold copies of the markers and html used by the side_bar 
  // because the function closure trick doesnt work there 
  var gmarkers = []; 

 // global "map" variable
  var map = null;
  var markerclusterer = null;

// A function to create the marker and set up the event window function 

function createMarker(latlng, imei, html, estado, alias, speed, timestamp) {
if(estado == 1)
  image = '/artworks/icons/truck_green3.png';
else
  image = '/artworks/icons/truck_red.png';
var textoLabel= "this is the text"
var contentString = html;
var marker = new MarkerWithLabel({
    position: latlng,
    icon: image,
    // map: map,
    labelContent: textoLabel,
   labelAnchor: new google.maps.Point(40, 0),
   labelClass: "labels", // the CSS class for the label
   labelStyle: {opacity: 0.50},
    zIndex: Math.round(latlng.lat()*-100000)<<5
    });

google.maps.event.addListener(marker, 'click', function() {
    infowindow.setContent(contentString); 
    infowindow.open(map,marker);
    });
// save the info we need to use later for the side_bar
gmarkers.push(marker);
// add a line to the side_bar html
side_bar_html += '<a href="javascript:myclick(' + (gmarkers.length-1) + ')">' + imei + '<\/a><br>';
}

    // This function picks up the click and opens the corresponding info window
function myclick(i) {
  google.maps.event.trigger(gmarkers[i], "click");
}

function initialize() {
  // create the map
  var myOptions = {
    zoom: 12,
    center: new google.maps.LatLng(37.169619,-3.756981),
    mapTypeControl: true,
    mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
    navigationControl: true,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  map = new google.maps.Map(document.getElementById("map_canvas"),
                            myOptions);
}
    function getMarkers() {
  google.maps.event.addListener(map, 'click', function() {
    infowindow.close();
    });
  // Read the data from example.xml
  downloadUrl("vehiculos.asp", function(doc) {
    var xmlDoc = xmlParse(doc);
    var markers = xmlDoc.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
      // obtain the attribues of each marker
      var lat = parseFloat(markers[i].getAttribute("lat"));
      var lng = parseFloat(markers[i].getAttribute("lng"));
      var point = new google.maps.LatLng(lat,lng);
      var imei = markers[i].getAttribute("imei");
      var alias = markers[i].getAttribute("alias");
      var speed= markers[i].getAttribute("speed");
      var timestamp= markers[i].getAttribute("timestamp");
      var estado= markers[i].getAttribute("estado");
      var conectado= markers[i].getAttribute("conectado");
var html="<b>"+alias+"</b><br> a una velocidad de "+speed+" km/h <br/>     ultima posicion  a las: "+timestamp;

      // create the marker
      var marker = createMarker(point,alias+" "+imei,html,estado, speed, timestamp );
    }

    markerCluster = new MarkerClusterer(map, gmarkers);
    // put the assembled side_bar_html contents into the side_bar div
    document.getElementById("side_bar").innerHTML = side_bar_html;
  });
}

var infowindow = new google.maps.InfoWindow(
  { 
    size: new google.maps.Size(150,50)
 });

  // Removes the overlays from the map, but keeps them in the array.
  function clearOverlays() {
    getMarkers(null);
  }

  // Deletes all markers in the array by removing references to them.
  function deleteOverlays() {
    clearOverlays();
    getMarkers = [];
  }
setInterval(clearOverlays, 3000);
setInterval(deleteOverlays, 4000);
setInterval(getMarkers, 5000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:48:22.260

为您的标记提供唯一的 ID（也许您现有的属性之一已经是唯一的）。如果唯一 ID 已经存在，则将该标记移动到新位置（或不再添加），如果不存在，则创建一个新标记。

如果它们不移动，您还可以通过检查新标记与所有现有标记之间的距离来避免重复，如果它小于“相同标记”阈值（例如 ~0.1 米），请不要再次添加它。

您的 clearOverlays 方法有问题（getMarkers(null) 只是调用 getMarkers）：

```
// Removes the overlays from the map, but keeps them in the array.
function clearOverlays() {
  for (var i=0; i<gmarkers.length; i++)
  {
     gmarkers[i].setMap(null);
  }
} 
```

# c# - 如何更新 sql server 表中的选择性行？

> ID：13054785
> 
> 赞同：2
> 
> 时间：2012-10-24T17:45:17.347
> 
> 标签：c#, asp.net, sql

我正在一个应用程序中工作，在该应用程序中，用户通过单击与每一行关联的复选框来选择网格视图中的一些行，并且在选定的行中，只有一个值应该在数据库中更新。我正在使用以下查询

```
 update Items
 set bitIsTab = 1
 where ReqID = 3 
```

假设用户从 gridview 中选择了 4 个值，并且我必须将这 4 行 bitIsTab 设置为 1。如何通过调用一次查询来更新这些行，或者我必须调用与所选记录数一样多的相同查询。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T17:46:52.097

如果你知道`ReqID`s 你可以做

```
update Items
set bitIsTab = 1
where ReqID in (1,2,3,4) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T17:51:46.780

好的，查询应该如下所示，以更新项目 1、2、3、4：

```
 UPDATE Items
 SET bitIsTab = 1
 WHERE ReqID IN (1,2,3,4); 
```

然而，它可以使用`Linq`：

```
List<int> selectedIds = { 1, 2, 3, 4 };
var itemsToBeUpdated = (from i in yourContext.Items 
                        where selectedIds.Contains(i.ReqID)
                        select i);
itemsToBeUpdated.ForEach(i=>i.bitIsTab = 1);
yourContext.SubmitChanges(); 
```

或者您可以`VARCHAR`在存储过程中使用 a：

```
CREATE PROCEDURE sp_setTabItems
    @ids varchar(500) AS
 UPDATE Items
 SET bitIsTab = 1
 WHERE charindex(',' + ReqID + ',', ',' + @ids + ',') > 0; 
```

然后使用“1,2,3,4”作为您的存储过程参数。

要执行存储过程：

```
 EXEC sp_setTabItems '1,2,3,4' 
```

也可以以更可重用的方式完成，使用`bitIsTab`作为参数：

```
CREATE PROCEDURE sp_setTabItems
    @isTab bit,
    @ids varchar(500) AS
 UPDATE Items
 SET bitIsTab = @isTab 
 WHERE charindex(',' + ReqID + ',', ',' + @ids + ',') > 0; 
```

并以这种方式执行：

```
EXEC sp_setTabItems '1,2,3,4',1 
```

我更新了存储过程解决方案，因为将 a`INT`与 a进行比较`VARCHAR`不适用于`EXEC`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T18:45:31.143

一个简单的解决方案是

```
 DECLARE @id varchar(30)
 SET @id = '1,3,2'

 UPDATE [Items]
 SET bitIsTab = 0
 WHERE ReqID IN (
                    SELECT s
                    FROM dbo.Split(',', @id)
                ) 
```

在哪里

```
 CREATE FUNCTION dbo.Split (@sep char(1), @s varchar(512))
 RETURNS table
 AS
 RETURN (
 WITH Pieces(pn, start, stop) AS (
 SELECT 1, 1, CHARINDEX(@sep, @s)
 UNION ALL
 SELECT pn + 1, stop + 1, CHARINDEX(@sep, @s, stop + 1)
 FROM Pieces
 WHERE stop > 0
 )
 SELECT pn,
 SUBSTRING(@s, start, CASE WHEN stop > 0 THEN stop-start ELSE 512 END) AS s
 FROM Pieces
 ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T18:01:45.437

如果您必须将数据作为分隔 ID 的列表传递，那么您需要编写一个函数，用于[在单个语句中将 CSV 数据拆分并插入到新表中？](https://stackoverflow.com/questions/3265316/how-to-split-and-insert-csv-data-into-a-new-table-in-single-statement)

```
 CREATE PROCEDURE sp_setTabItems
    @ids varchar(500) -- 1,2,4,6
 AS
 UPDATE Items
 SET bitIsTab = 1
 WHERE ReqID IN (Select Part From dbo.inline_split_me(@ids) 
```

这是功能

```
CREATE FUNCTION inline_split_me (@SplitOn char(1),@String varchar(7998))
RETURNS TABLE AS
    RETURN (WITH SplitSting AS
       (SELECT
            LEFT(@String,CHARINDEX(@SplitOn,@String)-1) AS Part
                ,RIGHT(@String,LEN(@String)-CHARINDEX(@SplitOn,@String)) AS Remainder
            WHERE @String IS NOT NULL AND CHARINDEX(@SplitOn,@String)>0
        UNION ALL
        SELECT
            LEFT(Remainder,CHARINDEX(@SplitOn,Remainder)-1)
                ,RIGHT(Remainder,LEN(Remainder)-CHARINDEX(@SplitOn,Remainder))
            FROM SplitSting
            WHERE Remainder IS NOT NULL AND CHARINDEX(@SplitOn,Remainder)>0
        UNION ALL
        SELECT
            Remainder,null
            FROM SplitSting
            WHERE Remainder IS NOT NULL AND CHARINDEX(@SplitOn,Remainder)=0
       )
       SELECT Part FROM SplitSting
   ) 
```

# photoshop - 在photoshop cs6中形成九个补丁图像的困难

> ID：13054790
> 
> 赞同：2
> 
> 时间：2012-10-24T17:45:31.757
> 
> 标签：photoshop, nine-patch

嘿，我正在尝试为 android 应用程序设计一个界面。由于我是 Android 和 Photoshop 的初学者，我遇到了一些问题。其中最重要的是我尝试在比所需画布更大的画布上绘画（例如，A4 尺寸；因为我不习惯精确绘图），然后将这些高分辨率（300dpi）图层复制到具有高分辨率的较小画布上以创建九个-补丁文件。但我无法复制这些图层；即使我在边框中有图层，画布上也没有任何显示。

我已经尝试过多次但结果相同。请指导我如何正确制作九个补丁图像？

# java - BoneCP 和 Netty 基础知识

> ID：13054791
> 
> 赞同：2
> 
> 时间：2012-10-24T17:45:41.007
> 
> 标签：java, netty, bonecp

为了在编写 Netty 服务器时通过 BoneCP 有效地使用连接池 - 连接池的正确位置在哪里以及从哪里获得该池的新连接？

一目了然-我认为 BoneCP 应该是某种全局/单例，仅在主服务器中初始化一次，然后每个处理程序（即作为“处理程序”传递给管道的类）引用该单例以获取新的连接......但我在网上没有看到任何这样的例子，而且作为 Java 新手，我有点担心直接采用这种方法。听到有经验的声音会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:48:51.660

Yes, a channel handler can very well use the BoneCP connection pool, but you should definitively insert an ExecutionHandler in front of the BoneCP handler. You do not want to issue blocking db calls in a netty IO worker thread.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T17:29:06.580

在bonecp中也定义了这个：

公共 ListenableFuture getAsyncConnection(){

```
 return this.asyncExecutor.submit(new Callable<Connection>() {

        public Connection call() throws Exception {
            return getConnection();
        }});
} 
```

# html - 如何防止 webkit-scrollbar 推送 div 的内容？

> ID：13054797
> 
> 赞同：33
> 
> 时间：2012-10-24T17:46:02.120
> 
> 标签：html, css, webkit

我正在使用 webkit-scrollbar 并且遇到样式问题，因为 webkit 滚动条将 div 的内容向左推，导致内容溢出。

注意

*   第一个框使用默认浏览器滚动条并且不会溢出（好）
*   第二个框使用最终破坏布局的 webkit 滚动条。（坏/问题）

[http://jsfiddle.net/ryeah/1/](http://jsfiddle.net/ryeah/1/)

任何想法我在 webkit 滚动条上做错了什么导致 div 到/溢出。我们如何修复第二个盒子？谢谢

**Webkit 滚动条代码：**

```
.box2::-webkit-scrollbar {
    height: 16px;
    overflow: visible;
    width: 16px;
}
.box2::-webkit-scrollbar-thumb {
    background-color: rgba(0, 0, 0, .2);
    background-clip: padding-box;
    border: solid transparent;
    border-width: 1px 1px 1px 6px;
    min-height: 28px;
    padding: 100px 0 0;
    box-shadow: inset 1px 1px 0 rgba(0, 0, 0, .1),inset 0 -1px 0 rgba(0, 0, 0, .07);
}
.box2::-webkit-scrollbar-button {
    height: 0;
    width: 0;
}
.box2::-webkit-scrollbar-track {
    background-clip: padding-box;
    border: solid transparent;
    border-width: 0 0 0 4px;
}
.box2::-webkit-scrollbar-corner {
    background: transparent;
} 
```

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-11-16T04:38:49.770

您是否尝试放入`overflow-y:overlay`父div？它适用于我的铬。[这个页面](http://help.dottoro.com/lcawqfhe.php)说它也适用于野生动物园。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T09:40:22.873

嗯..我想不出一种让 webkit 滚动条覆盖的方法。停止换行的一种解决方案是隐藏滚动条

```
.box2::-webkit-scrollbar {
  height: 16px;
  overflow: visible;
  width: 16px;
  display: none;
} 
```

其他您可以将 UL 的宽度设置为与框相同，以便它利用溢出功能并显示在滚动条下方

```
.box ul {
  width: 149px;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-12T00:00:51.777

有一种方法可以让滚动条显示在 div 之外。

使用静态宽度并将 div 位置设为绝对位置。为我工作。

```
#divID{
overflow: hidden;
width: calc(1024px + 0);
}

#divID:hover{
overflow-y:scroll;
} 
```

这愚弄了 DOM。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-02-01T17:42:16.680

这就是我如何让它在 Chrome 上运行，而**不是破坏**Firefox：

```
overflow: scroll;
overflow-x: hidden;
overflow-y: overlay; 
```

我的意思是，滚动条在 Firefox 上仍然占用`width`空间，但至少它仍在显示和工作。

通过这样做`overflow-y: overlay;`，我正在修复 Chrome 并破坏了我的 Firefox 滚动。

# java - 使用java时对进程输入流有限制吗？

> ID：13054800
> 
> 赞同：0
> 
> 时间：2012-10-24T17:46:21.590
> 
> 标签：java, process, operating-system, exec

我在 solaris 操作系统上使用 java 运行时创建一个进程。然后我从进程中获取输入流并读取输入流。我希望（我不太确定这个过程，它是第 3 方的事情）这个过程外流会很大，但它似乎被剪裁了。java 端是否存在关于进程在其输出流中可以拥有多少的阈值？

谢谢， 阿卜杜勒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:50:36.560

如果您反复阅读，则可以阅读的数据量没有限制。您一次不能读取超过 2 GB 的数据，并且某些流类型可能一次只能为您提供几 KB。例如，慢速 Socket 通常会给你 1.5 KB 或更少（基于连接的 MTU）

如果您调用`int read(byte[])`它，则只能保证读取 1 个字节。假设您每次都会读取完整的缓冲区是一个常见的错误。如果你需要这个，你可以使用`DataInputStream.readFully(byte[])`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:50:43.083

您不应该遇到限制`InputStream`或`OutputStream`是否正确实施。当从输入或输出分配对象时，最有可能遇到限制的资源是内存——例如，尝试将 100GB 文件读入内存然后写入输出。如果您需要将非常大的对象加载到内存中或从流中加载，请确保使用 64 位 JVM 并为其分配尽可能多的内存，但是测试是确定理想值的唯一方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T17:54:39.370

“处理输出流”是指 STDOUT 吗？标准错误？或者您有一个指向某处的 OutputStream 对象？（一份文件？）

如果您写入文件 - 如果您不关闭输出流，您可能会看到剪辑数据。只要您按书阅读（完成写作后的 outputstream.close() ），您就可以开始了。请注意，存在一些潜在限制，例如存储空间（明显）或文件系统限制（一些限制文件大小）。

如果你写信给 STDOUT/STDERR - 据我所知你很好。再次注意，如果您将输出写入终端，或者通过 Eclipse（例如），那么它们可能有一个缓冲区，因此会限制您的输出（但是，您很可能会丢失数据的第一部分并且不是它的最后一部分）。

# rest - Chrome 的 Rest Console 不允许我输入任何信息

> ID：13054805
> 
> 赞同：1
> 
> 时间：2012-10-24T17:46:38.563
> 
> 标签：rest, google-chrome

我在 Chrome 上安装了[Rest Console 扩展。](https://chrome.google.com/webstore/detail/rest-console/cokgbflfommojglbmbpenpphppikmonn)我不能将此 Rest Console 用于任何事情，因为接受文本的唯一字段是“请求 URL”和“请求方法”。

我在这里问，因为没有资源或社区可访问，甚至没有关于此扩展如何工作的简单说明，并且该社区中可能有使用过此扩展的成员。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T18:18:16.417

使用[Postman - REST 客户端](https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm)，它可以完美运行！

```
your_url_to_post: Fill the URL    
your_json_param: The name of the param that you'll pass you json    
your_json_data: The json content 
```

如果您要发帖，请不要忘记选择 x-www-form-urlencoded

![邮递员图片](../Images/8292ad6a3a7ebce8f62cc47656c481a4.png)

[http://i.stack.imgur.com/TISW1.png](https://i.stack.imgur.com/TISW1.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T18:55:50.920

**如果您首先勾选**与该字段关联的复选框，您应该能够在其他字段中输入文本。

![在此处输入图像描述](../Images/068f7d8b0733c85002b5ac472b837321.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-28T22:51:33.380

我自己开始遇到类似的问题（表单不允许我输入数据，我可以点击它们，但仅此而已）在很多网页上包含我自己的 php 游戏，我知道在此之前表单代码根本没有改变问题开始了。我遇到了一篇其他人的文章，他们自己也遇到了与我类似的问题，有人说他们需要 position: relative 在他们的表格上，在处理谷歌浏览器时没有给出关于定位的具体说明。此后，我自己在 www.immoralattack.com 上进行了此更改，并且该问题已在该站点上停止，但在许多其他站点上仍然存在，因此可以肯定地说这是问题所在。

至少对我来说，它只发生在 chrome 的开发版本上，我希望这不是他们计划在现场实施的事情，否则会弄乱很多网站。

如果它打开，也可以尝试关闭 chrome 的自动填充，当我在寻找这个错误时，我发现了很多类似的错误，但它们随着自动填充的开启而消失。

# css - 向右移动 100% 宽度的固定元素

> ID：13054820
> 
> 赞同：1
> 
> 时间：2012-10-24T17:47:22.303
> 
> 标签：css, width, move, fixed

我有以下代码：

```
<div style="border:4px solid black;width:100%;height:100px;position:fixed;left:250px;">
out of bound :(
</div> 
```

我希望它不要穿过窗户。我需要它的右边框保持可见。

JSFiddle 链接：http: [//jsfiddle.net/9SZAB/](http://jsfiddle.net/9SZAB/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:49:12.973

删除该`width`属性并改为使用`right: 0`：

```
div {
    border:4px solid black;
    height:100px;
    position:fixed;
    left:250px;
    right: 0;
} 
```

更新小提琴：http: [//jsfiddle.net/9SZAB/2/](http://jsfiddle.net/9SZAB/2/)

为什么会这样：`position: fixed`告诉元素相对于视口有一个固定的位置，以便定位属性`left`、`right`、`top`和`bottom`，以及`width`和`height`将根据视口的大小和边界来定位和调整元素的大小。

以前你有`width: 100%`，它与 结合`position: fixed`，意味着元素的宽度应该是视口宽度的 100%。此宽度不受也不应该受到您还设置的任何边距或定位的影响 - 元素仍将具有 100% 的视口宽度，无论它在哪里。

但是如果元素的宽度值为`auto`（默认值），则可以使用定位属性来调整它的大小。就像`left: 250px`意味着元素的左侧应该距离视口的左边界 250px 一样，`right: 0`意味着它的右侧应该是 0 (px, em, parsecs - 单位对于值 0 无关紧要) 远离 vp右边界。调整视口的大小，这个状态仍然是真实的。

更多信息：[http ://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/](http://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/)

# jquery - 禁用/启用 Jquery onClick 函数

> ID：13054821
> 
> 赞同：0
> 
> 时间：2012-10-24T17:47:26.237
> 
> 标签：jquery

有没有办法在不解除绑定的情况下“禁用”或“暂停”jquery .click 函数？我想保留函数绑定，但不希望它触发。然后，稍后，我想重新启用它。

在这种情况下，仅禁用绑定的控件是不够的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:52:56.910

您可以在更高的变量范围内设置一个标志，并且只有在标志打开时才执行处理程序。这是一个简单的例子：

```
$(document).ready(function () {
    var execHandler = false;
    $('input').click(function (e) {
        if (execHandler) {
            //do stuff
        }
        e.preventDefault();
        return false;
    });
    $('button#toggleHandler').click(function (e) {
        execHandler = !execHandler;
        e.preventDefault();
        return false;
    })
}); 
```

这是一个类似的解决方案：[暂时抑制 jQuery 事件处理](https://stackoverflow.com/questions/1809275/suppress-jquery-event-handling-temporarily)

# php - 提取洞察数据的 Facebook 应用程序

> ID：13054822
> 
> 赞同：1
> 
> 时间：2012-10-24T17:47:26.217
> 
> 标签：php, facebook, facebook-graph-api, facebook-insights

我是一名社会学家，正在开发 Facebook 应用程序，这是我正在进行的一项关于非营利组织的帖子如何传播病毒的新研究的一部分。

我的编程技能有限但并不糟糕，并聘请了一个人编写了一个应用程序，该应用程序从每个组织中提取洞察数据（当然是在用户身份验证之后），然后将 csv 邮件发送到电子邮件帐户。该应用程序用于从 Graph API 获取所有可用数据，但截至 3 周前，它开始仅提取最近三天的数据。

这是我在应用程序中使用的电话：

# 获取洞察数据 #insights = myfbfunctions.graph_api_call(access_token, oid, 'insights', {'since': date, 'until': date+datetime.timedelta(1)}) start_date, end_date = self.GetPeriod(access_token, oid) 今天 = datetime.datetime.now().date()

```
# Prepare output
result = ['name,%s,url,%s' % (name, url), 'object_id,metric,end_time,period,value']

insights = myfbfunctions.graph_api_call(access_token, oid, 'insights',\
        {'period': 86400 , 'end_time': start_date})

temp_date = datetime.datetime.strptime(insights['data'][0]['values'][-1]['end_time'], '%Y-%m-%dT%H:%M:%S+0000').date()
first_iteration = True
while first_iteration or temp_date <= today:
  first_iteration = False
  for metric in insights['data']:
    for row in metric['values']:
      date = datetime.datetime.strptime(row['end_time'], '%Y-%m-%dT%H:%M:%S+0000').date() + datetime.timedelta(-1)
      result.append('%s,%s,%s,%s,%s' % (metric['id'].partition('/')[0], metric['name'], date,metric['period'], row['value']))
  insights = json.loads(urllib2.urlopen(insights['paging']['next']).read())
  temp_date = datetime.datetime.strptime(insights['data'][0]['values'][-1]['end_time'], '%Y-%m-%dT%H:%M:%S+0000').date()

buffer = StringIO()
temp_file = gzip.GzipFile(mode='wb', fileobj=buffer)
temp_file.write('\n'.join(result))
temp_file.close()
result = buffer.getvalue()
buffer.close() 
```

我不清楚该应用程序是否由于 Facebook API 的某些更改或服务器上的错误而不再工作。我开始怀疑前者，因为我找不到其他人处理这个问题的证据。

# php - 错误：安装 pdo_mysql 时找不到 php_pdo_driver.h

> ID：13054826
> 
> 赞同：2
> 
> 时间：2012-10-24T17:47:39.623
> 
> 标签：php, mysql, pdo

我想将 pdo_mysql 扩展加载到 php 以便在我的 VPS（运行 CentOS）中安装 Megento。然后我在 PHP.ini 文件中搜索“extension=pdo.so”之类的内容。但我无法在我的 ini 文件中找到这样的行。然后我尝试使用 "pecl install" 安装 pdo_mysql 。但是安装通过显示此错误退出，

```
checking for PDO includes... checking for PDO includes...
configure: error: Cannot find php_pdo_driver.h.
ERROR: `/root/tmp/pear/PDO_MYSQL/configure' failed 
```

我的[phpinfo](http://megatrontech.com/phpinfo.php)。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:17:02.753

您必须构建带有 PDO 支持的 PHP。

[http://pecl.php.net/package/PDO](http://pecl.php.net/package/PDO)

“不要使用这个，因为 PDO 已被移入核心（php 源），所以这个 pecl 扩展已经死了。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-25T12:53:22.053

当前的 PHP 在其核心中带有 PDO 扩展，但**您仍然需要为需要连接到的每个数据库引擎添加支持**。

我对 symfony2 抱怨缺少 pdo_pgsql 驱动程序时遇到了这个问题。我在网上到处查看，基本上得出的结论是我必须做（在 ubuntu 中）

```
sudo apt-get install libpq-dev
sudo pecl install pdo_pgsql 
```

但这会失败，基本上与它失败的原因相同（在我的情况下它说`configure: error: Cannot find php_pdo_driver.h.`）

然后，偶然地，我发现您需要将软件包安装为

```
sudo apt-get install php5-pgsql
sudo apt-get install php5-mysql 
```

这会将 pdo_pgsql 和 pdo_mysql 添加到您的 PDO 驱动程序中。

在centOS中，应该是

```
sudo yum install php-pgsql
sudo yum install php-mysql 
```

# mysql - Mysql 连接多个表

> ID：13054827
> 
> 赞同：1
> 
> 时间：2012-10-24T17:47:40.280
> 
> 标签：mysql

我正在尝试加入 5 个不同的表。他们每个人都有一个

Name 列、Id 列和 Exp 列

除此之外，他们没有什么完全一样的。

```
SELECT name FROM `weapons`,`arrows`,`trees`,`ores`,`bars` ORDER BY exp DESC 
```

是我能想到的，它说名字是模棱两可的。谢谢！

**这就像我试图将 5 个单独的用户表组合成一个大列表**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:48:49.257

如果您有同名的列，则需要将表名添加到列中。您还可以为表使用别名并缩短查询。

如果要选择and表的`name`列，请执行`weapons``arrows`

```
SELECT w.name, a.name
FROM `weapons` as w, `arrows` as a,`trees` as t,`ores` ass o,`bars` as b
ORDER BY exp DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:49:49.260

您可能希望使用一个表前缀来标识要从中检索的表，`name`例如：

```
 SELECT w.name FROM weapons w, arrows a, trees t, ores o, bars b ORDER BY exp DESC 
```

**我认为您也缺少加入条件。**

您的查询应如下所示：

```
SELECT w.name 
FROM weapons w JOIN arrows a
     ON w.id = a.id
     JOIN trees t
     ON a.id = t.id
     JOIN ores o 
     ON t.id = o.id
     JOIN  bars b 
     ON o.id = b.id
ORDER BY exp DESC; 
```

或者，如果你想要一个`union --> combine rows from all tables`then ：

```
 SELECT name 
 FROM weapons 
 UNION ALL
 SELECT name 
 FROM arrows
 UNION ALL
 SELECT name 
 FROM trees
 UNION ALL
 SELECT name 
 FROM ores
 UNION ALL
 SELECT name 
 FROM bars; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T17:53:35.563

如果您正在寻找一个大列表，您希望联合这些表，而不是 JOIN。

```
SELECT * FROM weapons
UNION
SELECT * FROM arrows
UNION 
SELECT * FROM trees
UNION 
SELECT * FROM ores
UNION
SELECT * FROM bars; 
```

如果你只想要名字，`SELECT name`而不是`SELECT *`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T17:54:57.513

如果您想要一个大列表，可以使用以下内容：

```
select name, id, exp, 'weapons' as TableFrom
from weapons
union all
select name, id, exp, 'arrows' as TableFrom
from arrows
union all
select name, id, exp, 'trees' as TableFrom
from trees
union all
select name, id, exp, 'ores' as TableFrom
from ores
union all
select name, id, exp, 'bars' as TableFrom
from bars
order by 3 
```

我添加了最后一列来帮助确定数据来自哪个表。如果你不想这样，那么你可以放弃它。

# ruby - Ruby 中具有特定扩展名的文件名的正则表达式

> ID：13054829
> 
> 赞同：0
> 
> 时间：2012-10-24T17:47:43.647
> 
> 标签：ruby, regex, filenames

我正在尝试使用正则表达式来匹配具有特定扩展名的某些文件名。

我有一个日志文件，我需要在其中找到具有特定扩展名的文件路径。

我啜饮了整个文件，现在想应用正则表达式。

日志文件：

```
/xyz/arb_path/abc.rb /xyz/arb_path/def.xml foo bar /xyz/arb_path/ghi.pl foo bar /xyz/arb_path/jkl.xml /xyz/arb_path/mno.rb
foo bar '/xyz/arb_path/pqr.pl'
富吧'/xyz/arb_path/stu.rb'
```

正则表达式应匹配所有`*.rb`文件或所有`*.pl`文件。

> /xyz/arb_path/ghi.pl
> /xyz/arb_path/pqr.pl

或者

> /xyz/arb_path/abc.rb
> /xyz/arb_path/mno.rb
> /xyz/arb_path/stu.rb

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:56:32.397

这是我的做法：

```
files = %w[/xyz/abc.pl /xyz/def.rb /xyz/ghi.pl /xyz/jkl.rb /xyz/mno.pl foo.rb bar.pl /xyz/foo.java ]
files.grep(%r[/xyz/.+\.(?:rb|pl)$])

=> ["/xyz/abc.pl", "/xyz/def.rb", "/xyz/ghi.pl", "/xyz/jkl.rb", "/xyz/mno.pl"] 
```

如果您不在乎路径是什么，请使用：

```
files.grep(%r[\.(?:rb|pl)$])
=> ["/xyz/abc.pl",
    "/xyz/def.rb",
    "/xyz/ghi.pl",
    "/xyz/jkl.rb",
    "/xyz/mno.pl",
    "foo.rb",
    "bar.pl"] 
```

您说要匹配的文件名在日志文件中，但没有显示文件格式的示例。如果文件名位于行尾，则`$`锚点将选择匹配项。如果文件名嵌入在行中，则删除`$`锚。

* * *

> 这不适用于带有空格的文件路径:(

不修改最后一个示例代码，只添加一些带有嵌入空格的文件名，以及一些带有嵌入空格的路径：

```
files = %w[/xyz/abc.pl /xyz/def.rb /xyz/ghi.pl /xyz/jkl.rb /xyz/mno.pl foo.rb bar.pl /xyz/foo.java ]
files += [
  'ruby file.rb',
  'perl file.pl',
  '/foo bar/ruby.rb',
  '/foo bar/perl.rb'
]

files.grep(%r[\.(?:rb|pl)$]) 
```

在 IRB 中看起来像这样：

```
irb(main):008:0> files = %w[/xyz/abc.pl /xyz/def.rb /xyz/ghi.pl /xyz/jkl.rb /xyz/mno.pl foo.rb bar.pl /xyz/foo.java ]
[
    [0] "/xyz/abc.pl",
    [1] "/xyz/def.rb",
    [2] "/xyz/ghi.pl",
    [3] "/xyz/jkl.rb",
    [4] "/xyz/mno.pl",
    [5] "foo.rb",
    [6] "bar.pl",
    [7] "/xyz/foo.java"
]
irb(main):009:0> files += [
irb(main):010:1*   'ruby file.rb',
irb(main):011:1*   'perl file.pl',
irb(main):012:1*   '/foo bar/ruby.rb',
irb(main):013:1*   '/foo bar/perl.rb'
irb(main):014:1> ]
[
    [ 0] "/xyz/abc.pl",
    [ 1] "/xyz/def.rb",
    [ 2] "/xyz/ghi.pl",
    [ 3] "/xyz/jkl.rb",
    [ 4] "/xyz/mno.pl",
    [ 5] "foo.rb",
    [ 6] "bar.pl",
    [ 7] "/xyz/foo.java",
    [ 8] "ruby file.rb",
    [ 9] "perl file.pl",
    [10] "/foo bar/ruby.rb",
    [11] "/foo bar/perl.rb"
]
irb(main):015:0> 
irb(main):016:0* files.grep(%r[\.(?:rb|pl)$])
[
    [ 0] "/xyz/abc.pl",
    [ 1] "/xyz/def.rb",
    [ 2] "/xyz/ghi.pl",
    [ 3] "/xyz/jkl.rb",
    [ 4] "/xyz/mno.pl",
    [ 5] "foo.rb",
    [ 6] "bar.pl",
    [ 7] "ruby file.rb",
    [ 8] "perl file.pl",
    [ 9] "/foo bar/ruby.rb",
    [10] "/foo bar/perl.rb"
] 
```

所以，是的，嵌入的空白也被处理了。

* * *

```
'/xyz/arb_path/abc.rb /xyz/arb_path/def.xml foo bar /xyz/arb_path/ghi.pl foo bar /xyz/arb_path/jkl.xml   /xyz/arb_path/mno.rb'.split.grep(/\.(?:rb|pl)$/)
=> [
    [0] "/xyz/arb_path/abc.rb",
    [1] "/xyz/arb_path/ghi.pl",
    [2] "/xyz/arb_path/mno.rb"
] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:57:25.503

这应该为你做

```
/\.(?:rb|pl)$/i 
```

[例子](http://rubular.com/r/bA7KYAw7FO)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T17:59:31.243

这只会给你*.rb：

```
(\/xyz\/[\w\.\-_\s]+\.rb\b) 
```

这会给你*.pl：

```
(\/xyz\/[\w\.\-_\s]+\.pl\b) 
```

这会给你两个：

```
(\/xyz\/[\w\.\-_\s]+\.(pl|rb)\b) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T18:14:28.403

尝试这个

```
pattern = /(\/\w+)+.pl/ 
```

这将匹配所有 pl 扩展

将*.pl*更改为*.rb*以匹配 .rb 扩展名

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T17:57:57.863

这应该有效：

```
(\/xyz\/.*\.(?:rb|pl)) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-24T18:07:50.003

这是我在 perl 中遇到的类似问题的解决方案：

```
#!/usr/bin/perl

use strict;
use warnings;

my $string = "/xyz/abc.pl /xyz/def.rb /xyz/ghi.pl /xyz/jkl.rb /xyz/mno.pl /xyz/ab c.pl /xyz/d ef.rb /xyz/g hi.pl /xyz/jk l.rb /xyz/mn o.pl  /xyz/abc.pli /xyz/def.rbexe /xyz/ghi.pli /xyz/jkl.rbexe /xyz/mno.pli";
my @matches = min_match ($string, '/xyz/', '.pl');
for (@matches) {
    print $_ . "\n";
}

sub min_match {
    my ($string, $start, $end) = @_;

    my $reversed_string = reverse $string;
    my $pattern = '\b' . reverse ($end) . '.*?' . reverse ($start);
    my @matches = ();
    my $continue = 1;

    while ($continue) {
        $continue = 0;
        if ($reversed_string =~ /$pattern/) {
            my $match = reverse $&;
            $reversed_string =~ s/$pattern//;
            push @matches, $match;
            $continue = 1;
        }
    }
    return @matches;
} 
```

输出：

> /xyz/mn o.pl
> /xyz/g hi.pl
> /xyz/ab c.pl
> /xyz/mno.pl
> /xyz/ghi.pl
> /xyz/abc.pl

# javascript - JQuery.ajax 不使用 HTTPS

> ID：13054842
> 
> 赞同：8
> 
> 时间：2012-10-24T17:48:24.380
> 
> 标签：javascript, jquery, ajax, https

因此，我使用 .ajax 方法从 jQuery 调用 Web 服务。调用该方法的页面是 HTTPS/SSL 页面，但是当调用时，jQuery 不断发出 HTTP 请求并且失败，因为服务器设置为将所有 HTTP 流量重定向到 HTTPS ......所以 301错误又回来了。

我检查了我的代码一百万次，并尝试了一百万种方法来为 ajax 查询生成 url 参数。（使用 // 相对，现在只是将协议 https 附加到 url 的开头。这是我的 javascript：

```
function add_inbound_record(serial_number, pass_fail_value)
{
   pfv = pass_fail_value.toUpperCase();
   url = location.protocol + "//" + location.hostname + "/inbound/record-                 inspection/" + serial_number + "/" + pfv;
   $.ajax({
   url:url,
   cache:false,
   });
} 
```

因此，当此代码执行时，我检查了 firebug 中的 url 参数，它正确显示为 https 并且 URL 格式正确。但是，当我执行 ajax 函数时，我在 firebug 中看到了这一点：

```
301 MOVED PERMANENTLY

192.168.1.9

20 B

192.168.1.9:443

Response Headersview source
Connection  keep-alive
Content-Encoding    gzip
Content-Length  20
Content-Type    text/html; charset=utf-8
Date    Wed, 24 Oct 2012 17:33:34 GMT
Location    http://192.168.1.9/inbound/record-inspection/011234567890123421000000002995/P/?_=1351100020609
Server  nginx/1.1.19
Vary    Accept-Encoding

Request Headersview source
Accept  */*
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Connection  keep-alive
Cookie  djdt=hide; csrftoken=sF9RUxrlS6IKURxOryH2d2yT05gMighn;         sessionid=9682390da4011e445931643c81be9aae
Host    192.168.1.9
Referer https://192.168.1.9/fingerprint/inspect/
User-Agent  Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:15.0) Gecko/20100101     Firefox/15.0.1
X-Requested-With    XMLHttpRequest 
```

正如您在上面从引用者看到的那样，协议是 HTTPS 但响应标头中的位置是 HTTP？我一生都无法弄清楚为什么请求以 HTTP 而不是 HTTPS 的形式通过网络传输。考虑到 301 响应是作为 HTTP 进行的，因此它是准确的，因为再次将网络服务器配置为仅允许 HTTPS 访问。有任何想法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-24T21:57:08.573

行。我把这个搞砸了 4 个多小时，只要我在 URL 的末尾添加一个斜杠，问题就消失了，一切正常。我不知道为什么。Web 服务器/Web 服务不需要斜杠即可正常运行，但无论出于何种原因，这就是“修复”它的原因。感谢您提供有用的评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T05:48:05.460

对于同样的问题，我也很沮丧。我正在从我的 ssl 页面发送 ajax 请求，如下所示：

```
$protocol = (!empty($_SERVER['HTTPS']) && $_SERVER['HTTPS'] !== 'off' || 

$_SERVER['SERVER_PORT'] == 443) ? "https://" : "http://"; 
```

* * *

```
<script type="text/javascript">
    $.ajax({ 
          url: "<?php echo $protocol.$_SERVER['HTTP_HOST'].$this->url(array("action"=>"autocomplete", "controller"=>"ajax", "module"=>"default"));?>",
                    data: { term: $("#keyword").val()},
                    dataType: "json",
                    type: "POST",
                    success: function(data){
                        response(data);
                    }
                });

</script> 
```

问题是，请求标头显示引用页面是 ssl 页面，但响应标头显示位置为“http”页面，如 Rob 的代码打印屏幕上方所示。

我开始知道，每次当您从 ssl 页面响应发出 ajax 请求时，都会到达同一个页面，即 ssl 页面，而当您通过响应从非 ssl 页面发出 ajax 请求时，也会到达相同的页面，即非ssl页面。这是 ajax 请求和响应的默认规则。

我认为，我的代码方面肯定存在问题，它在从 https 发送时强制从 http 做出响应。没错，我的怀疑是对的。实际上有一个默认代码强制重定向到响应 http 页面而不是 https。我正在分享以前的代码：

```
 class Custom_Customplugins extends Zend_Controller_Plugin_Abstract
    {
        public function preDispatch(Zend_Controller_Request_Abstract $request)
        {
        $action = $request->getActionName();
        $controller = $request->getControllerName();
        $module = $request->getModuleName();

        $protocol = (!empty($_SERVER['HTTPS']) && $_SERVER['HTTPS'] !== 'off' || $_SERVER['SERVER_PORT'] == 443) ? "https://" : "http://";
        $host = $_SERVER['HTTP_HOST'];
        if($host != "www.xyz.com")
        {
            if($protocol == "http://")
            {

            }
        }
        else
        {
            $r = new Zend_Controller_Action_Helper_Redirector();
            $u = new Zend_Controller_Action_Helper_Url();
            if(
            ($action == "index" && $controller == "index" && $module == "default") 
            || ($action == "login" && $controller == "index" && $module == "default")
            || ($action == "businessownerregistration" && $controller == "index" && $module == "default")
            || ($action == "customerregistration" && $controller == "index" && $module == "default")
            || ($action == "index" && $controller == "changepwd" && $module == "admin") 
            || ($action == "index" && $controller == "businessowner" && $module == "businessowner") 
            || ($action == "changepwd" && $controller == "serviceprovider" && $module == "businessowner")
            || ($action == "index" && $controller == "customer" && $module == "default")    
              )
            {
            if($protocol == "http://")
            {
                $r->gotoUrl('https://'.$host.$u->url(array("action"=>$action, "controller"=>$controller, "module"=>$module)))->redirectAndExit();
            }
            }
            else
            {
            if($protocol == "https://")
            {
                $r->gotoUrl('http://'.$host.$u->url(array("action"=>$action, "controller"=>$controller, "module"=>$module)))->redirectAndExit();
            }
            }
        }
        }
    } 
```

改正后代码如下：

```
<?php
    class Custom_Customplugins extends Zend_Controller_Plugin_Abstract
    {
        public function preDispatch(Zend_Controller_Request_Abstract $request)
        {
        $action = $request->getActionName();
        $controller = $request->getControllerName();
        $module = $request->getModuleName();

        $protocol = (!empty($_SERVER['HTTPS']) && $_SERVER['HTTPS'] !== 'off' || $_SERVER['SERVER_PORT'] == 443) ? "https://" : "http://";
        $host = $_SERVER['HTTP_HOST'];
        if($host != "www.xyz.com")
        {
            if($protocol == "http://")
            {

            }
        }
        else
        {
            $r = new Zend_Controller_Action_Helper_Redirector();
            $u = new Zend_Controller_Action_Helper_Url();
            if(
            ($action == "index" && $controller == "index" && $module == "default") 
            || ($action == "login" && $controller == "index" && $module == "default")
            || ($action == "businessownerregistration" && $controller == "index" && $module == "default")
            || ($action == "customerregistration" && $controller == "index" && $module == "default")
            || ($action == "index" && $controller == "changepwd" && $module == "admin") 
            || ($action == "index" && $controller == "businessowner" && $module == "businessowner") 
            || ($action == "changepwd" && $controller == "serviceprovider" && $module == "businessowner")
            || ($action == "index" && $controller == "customer" && $module == "default")    
              )
            {
            if($protocol == "http://")
            {
                $r->gotoUrl('https://'.$host.$u->url(array("action"=>$action, "controller"=>$controller, "module"=>$module)))->redirectAndExit();
            }
            }
            else if(
                ($action == "autocomplete" && $controller == "ajax" && $module == "default")
                || ($action == "refreshcaptcha" && $controller == "index" && $module == "default")
               )
            {

            }
            else
            {
            if($protocol == "https://")
            {
                $r->gotoUrl('http://'.$host.$u->url(array("action"=>$action, "controller"=>$controller, "module"=>$module)))->redirectAndExit();
            }
            }
        }
        }
    }

?> 
```

现在，我的 https 页面工作正常

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-18T20:07:33.830

这是您在谷歌上搜索此问题时出现的问题之一，因此这可能会对未来的读者有所帮助。

我不知道根本原因，但是根据我自己的经验，每当我多次遇到这个问题时，我的 url 都有很多符号（或分隔符）在一起，只要它试图消除它们就会中断。不知道是故意的还是[bug](https://github.com/jquery/jquery/issues/3944)。

发生这种情况的示例：（使用 XMLHttpRequest() 但原理相同）

```
const url_test = `https://foo.bar.faz/api/api_call/${api_parameter}/${api_parameter2}/${params}`;

xhttp.open("GET", url_test, true);
xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

console_log(url_test); // https://foo.bar.faz/api/api_call/1/2/?get=param&get2=param2&
xhttp.send(); // http://foo.bar.faz/api/api_call/1/2?get=param&get2=param2& <-- request sent to this URL, causing a mixed content error 
```

为了解决这个问题，我不得不更改 Laravel（因为它是我目前正在使用的框架）路由以添加`/ajax`到最后，这样在调用时符号`&?`就不会在一起。

```
const url_test = `https://foo.bar.faz/api/api_call/${api_parameter}/${api_parameter2}/ajax${params}`;

xhttp.open("GET", url_test, true);
xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

console_log(url_test); // https://foo.bar.faz/api/api_call/1/2/ajax?get=param&get2=param2&
xhttp.send(); // https://foo.bar.faz/api/api_call/1/2/ajax?get=param&get2=param2 <-- request sent to this URL 
```

就像我说的，我不知道这是一个错误还是只是一个未记录的行为，但这对我有用，我希望它能帮助其他遇到同样问题的人。

# javascript - IE8/9 上的 window.external.AddFavorite

> ID：13054846
> 
> 赞同：1
> 
> 时间：2012-10-24T17:48:33.037
> 
> 标签：javascript, windows-8

我正在使用该功能`window.external.AddFavorite(URL, title)`。这在 IE6 和 IE7 上正常工作，但在 IE8 或 IE9 上不能正常工作？没有显示错误，并且页面没有添加到收藏夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T01:33:06.127

来自微软的[文档](http://msdn.microsoft.com/en-us/library/ms535926%28v=vs.85%29.aspx)：

> Windows Internet Explorer 8 及更高版本。出于安全原因，必须调用 AddFavorite 方法作为对用户发起的操作（例如鼠标单击）的响应。如果从不同的上下文中调用，例如 body 元素的 onload 事件，AddFavorite 方法会静默失败。

因此，如果您通过鼠标单击执行此操作，那么用户应该会收到提示。

# java - 京都内阁/伯克利数据库：哈希表大小限制

> ID：13054852
> 
> 赞同：7
> 
> 时间：2012-10-24T17:48:56.183
> 
> 标签：java, database, nosql, hashmap, berkeley-db

我很难在我的 SSD 上使用哈希数组存储数亿个 16/32 字节的键/值对。

**使用京都内阁**：当它工作正常时，它以 70000 条记录/秒的速度插入。一旦下降，它就会下降到 10-500 条记录/秒。在默认设置下，下降发生在大约一百万条记录之后。查看文档，这是数组中存储桶的默认数量，所以这是有道理的。我将这个数字增加到 2500 万，实际上，它可以正常工作，直到大约 2500 万条记录。问题是，一旦我将存储桶的数量推到 3000 万或更多，插入速率从一开始就下降到 10-500 条记录/秒。京都内阁不是为了在创建数据库后增加桶的数量而设计的，所以我不能插入超过 2500 万条记录。

1/*为什么一旦桶数超过25M，KC的插入率会变得非常低？*

**使用 Berkeley DB**：我得到的最佳速度略低于 KC，接近 50000 条记录/秒，但还可以。使用默认设置，就像 KC 一样，在大约一百万条记录后速度会突然下降。我知道 BDB 旨在逐渐扩展其存储桶的数量。尽管如此，它尝试增加初始数量，使用 HashNumElements 和 FillFactor，但任何这些尝试都使情况变得最糟糕。所以我仍然无法使用 DBD 插入超过 1-2 百万条记录。我尝试激活非同步事务，尝试不同的检查点速率，增加缓存。没有什么能改善下拉菜单。

2/*什么会导致 BDB 的插入率在 1-2 百万次插入后下降？*

**注意：**我正在使用 java，当速度下降时，CPU 使用率会降低到 0-30%，而以正确的速度工作时会达到 100%。
**注意：**停止该过程并恢复插入不会改变任何内容。所以我认为这与内存限制或垃圾收集无关。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T22:48:35.580

***以下是我如何在 KC 遇到写入限制的情况下设法存储数十亿条记录。***

经过一番努力，我仍然没有解决京都内阁和伯克利数据库的问题。然而，我想出了一个有趣的解决方法，使用京都内阁。

我注意到我不能在一个 KC 文件上写入超过 25M 的记录，但读取没有这样的限制——它总是很快，不管数据库的大小。我找到的解决方案是为每 25M 新记录创建一个新的 KC 文件（一个新数据库）。这样，读取发生在许多 KC 文件上并且仍然很快，而写入仅发生在最后创建的文件上并且也很快。唯一剩下的问题是允许更新/删除以前文件上的记录。为此，我**复制了 SSTables 方法**，即：

*   所有0到N-1个文件都是只读的，文件N是读+写的。
*   任何插入/更新/删除都写入文件 N。
*   读取查找文件 N 到 0，并返回第一次看到/最后写入的插入/更新/删除。
*   每个文件都附加了一个布隆过滤器，以避免访问没有所需记录的文件。
*   一旦文件 N 达到 25M 记录，它就变为只读并创建文件 N+1。

备注：

*   就像 SSTables 一样，如果执行了很多更新/删除，我们可能想要执行压缩。然而，与 SSTables 不同的是，这里的压缩不需要重写文件。过时的记录简单地从 KC 文件中删除，如果 KC 文件变得非常小，则可以将其删除 - 重新插入文件 N 中的记录 - 或重新打开以进行新插入 - 前提是下一个文件是紧凑的。
*   删除不会删除记录，但会写入一个特殊值，将记录标识为已删除。在压缩期间，删除的记录会被真正删除。
*   检查记录是否存在通常需要查看数据库。多亏了布隆过滤器，大多数否定答案都可以在没有任何磁盘访问的情况下给出。

# php - 打开失败需要'application/models/proxies/__CG__modelsCountry.php'

> ID：13054853
> 
> 赞同：1
> 
> 时间：2012-10-24T17:49:06.953
> 
> 标签：php, doctrine, pear, proxyfactory

我有实体`Country`和`City`与`OneToMany`from`Country`和`ManyToOne`from的关系`City`，如下所示：

**`Country.php`**

```
<?php
namespace models;

use Doctrine\ORM\Mapping as ORM;
use Gedmo\Mapping\Annotation as Gedmo,
    Doctrine\Common\Collections\ArrayCollection;
/**
 * @ORM\Entity(repositoryClass="models\repository\CountryRepository")
 * @ORM\Table(name="Country")
 *
 */
class Country{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue
     */
    private $id;

    /**
     * @ORM\Column(type="string", length=255, nullable=false)
     */
    private $name;

    /**
     * @var datetime $created
     *
     * @Gedmo\Timestampable(on="create")
     * @ORM\Column(type="datetime")
     */
    private $created;

    /**
     * @ORM\OneToMany(targetEntity="models\City",mappedBy="country")
     */
    private $cities;

    //getters and setters 
} 
```

**`City.php`**

```
class City{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue
     */
    private $id;

   /**
     * @ORM\ManyToOne(targetEntity="models\Country")
     */

    private $country;

    /**
     * @ORM\Column(type="string", length=255, nullable=false)
     */
    private $name;

    //getters and setters
} 
```

当我尝试使用cityId（比如1）获取一个城市时，

```
$city_ = $this->doctrine->em->find('models\City', 1); 
```

我得到的错误是

```
Fatal error: require(): Failed opening required 'application/models/proxies/__CG__modelsCountry.php' (include_path='.:/usr/share/php:/usr/share/pear') in /var/www/MyCIApp/application/third_party/Doctrine/ORM/Proxy/ProxyFactory.php on line 93 
```

第 93 行可以在[学说 2 (github)上查看](https://github.com/iPrayag/doctrine2/blob/master/lib/Doctrine/ORM/Proxy/ProxyFactory.php#L92)

## ****笔记：****

 **1 - 我`/etc/php5/apache2/php.ini`是

```
;;;;;;;;;;;;;;;;;;;;;;;;;
; Paths and Directories ;
;;;;;;;;;;;;;;;;;;;;;;;;;

; UNIX: "/path1:/path2"
;include_path = ".:/usr/share/php"
;
; Windows: "\path1;\path2"
;include_path = ".;c:\php\includes"
;
; PHP's default setting for include_path is ".;/path/to/php/pear"
; http://php.net/include-path
;include_path=".:/usr/share/php/pear"
; The root of the PHP pages, used only if nonempty.
; if PHP was not compiled with FORCE_REDIRECT, you SHOULD set doc_root
; if you are running php as a CGI under any web server (other than IIS)
; see documentation for security issues.  The alternate is to use the
; cgi.force_redirect configuration below
; http://php.net/doc-root 
```

2 - 当我获取与任何其他实体没有关系的实体时，例如

```
class Sector{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue
     */
    private $id;

    /**
     * @ORM\Column(type="string", length=255, nullable=false)
     */
    private $description;
} 
```

它运作良好

```
$sector = $this->doctrine->em->find('models\Sector', 1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:39:10.797

`sudo mkdir application/models/proxies`完美运行。`Doctrine`没有为我创建`proxies`文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-04T15:18:22.690

我遇到了这个问题，因为我试图在运行之前加载固定装置：

```
./vendor/bin/doctrine-module orm:schema-tool:create 
```

当我运行它时，生成了我的代理类并且错误消失了。

教义命令“生成代理”很可能也解决了这个问题：

```
./vendor/bin/doctrine-module orm:generate-proxies 
```**

# objective-c - iOS：有没有办法打开受密码保护的 Microsoft Office 文档？

> ID：13054861
> 
> 赞同：4
> 
> 时间：2012-10-24T17:49:30.473
> 
> 标签：objective-c, ios, cocoa-touch, ios6

在 iOS 6 中，Apple 添加了在 Mail.app 中打开受密码保护的 Microsoft Office 文档的功能。此功能是否以任何方式向第三方开发人员公开？当我们尝试使用 打开这样的文档`UIWebView`时，我们遇到了异常：`CMTopExceptionDocumentIsEncrypted`。堆栈跟踪如下所示：

```
0   MyTestApp                           0x000025a0 start + 0,
1   OfficeImport                        0x125ceb91 +[WMTop fillHTMLArchiveForOfficeData:fileName:xmlFlag:archiver:] + 603,
2   OfficeImport                        0x125e6f3a OIPreviewFillHTMLForDocumentData + 93,
3   OfficeImport                        0x125e6e48 OIPreviewProcessWithDataAndOptions + 154,
4   QuickLook                           0x08a8b7d2 OIGenerateProgressivePreviewForData + 267,
5   QuickLook                           0x08aafb1f -[QLBasePreviewParts computePreview] + 463,
6   QuickLook                           0x08a8fabb -[QLPreviewParts computePreviewInThread] + 315,
7   Foundation                          0x0078b0d5 -[NSThread main] + 76,
8   Foundation                          0x0078b034 __NSThread__main__ + 1304,
9   libsystem_c.dylib                   0x969a8557 _pthread_start + 344,
10  libsystem_c.dylib                   0x96992cee thread_start + 34 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:47:43.243

It appears using `QLPreviewController` to render the content in place of `UIWebView` causes a password prompt to be displayed.

# javascript - 加载窗口后做一些事情

> ID：13054862
> 
> 赞同：1
> 
> 时间：2012-10-24T17:49:32.000
> 
> 标签：javascript, jquery, ajax, load

我正在对窗口加载进行（简单）ajax 调用：

```
$(window).load(function () {

$.ajax({
url: someUrl,
type: "get",
dataType: "",
success: function(data) {

           ........... 
```

我该如何做某事，例如这个 ajax 进程完成后的函数或事件。问题是我必须在 ajax 调用收到的数据上附加一些东西。但我无法附加窗口加载，因为数据仍在处理中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:51:39.493

将其放入 ajax 调用的成功处理程序中：

```
$(window).load(function () {
    $.ajax({
        url: someUrl,
        type: "get",
        dataType: "",
        success: function(data) {
            // do whatever you want with data
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T17:51:48.667

您可以在Ajax 请求的**成功回调函数中调用它**

```
success: function(data) {

    myFunction() ;   // If function

    $('#elementID').click() // If you want to trigger a click event
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T17:54:23.413

这应该在页面刚刚加载时执行您的请求。

```
$(function(){
    $.ajax({
        url: someUrl,
        type: "get",
        dataType: "",
        success: function(data) {
            // do whatever you want with data
        }
    });
}); 
```

或者你可以这样做：

```
$(function(){
        $.ajax({
            url: someUrl,
            type: "get",
            dataType: "",
            complete: function(data) {
                // do whatever you want with data
            }
        });
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T17:54:24.810

您可以使用

```
`$(document).ready` 
```

所以它会类似于这样：

```
$(document).ready(function(){

$.ajax({
url: someUrl,
type: "get",
dataType: "",
success: function(data) {

           //Your code should be here 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T17:54:28.553

后

```
success: function(data) { 
  for (var ii = 0; ii < data.length; ii++){
    building html here 
  }
  your code here
} 
```

您想在 ajax 调用的成功函数中但在调用完成之前输入您的函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T17:54:40.310

你也可以做

```
$.ajax({
 url: someUrl,
 type: "get",
 dataType: "",
 context: document.body
}).done(function() { 
  // do whatever when is done
  onCompleteFunction();
}); 
```

# sql - 如何使用子查询更新多行

> ID：13054864
> 
> 赞同：1
> 
> 时间：2012-10-24T17:49:33.833
> 
> 标签：sql, sql-server

当我执行子查询时，一切正常，现在我使用相同的查询来更新基于子查询结果的列，但它说子查询返回了超过 1 行，这是有道理的。我应该如何解决这个问题..

```
begin transaction
update trn_RatingAuto                                                        
set Rate  = 0 
where rate = (
SELECT ar.Rate
FROM trn_account ta
INNER JOIN trn_risk tr  ON ta.AccountId=tr.AccountId
inner join trn_option ot on tr.riskid = ot.riskid
INNER JOIN trn_Rating ra ON ot.RatingId = ra.RatingId
INNER JOIN trn_RatingAuto ar on ra.RatingId = ar.RatingId
where  ar.Rate is null 
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:53:04.843

您需要使用`IN`而不是`=`.

```
update trn_RatingAuto
set Rate  = 0 
where rate IN (
  SELECT ar.Rate
  FROM trn_account ta
  INNER JOIN trn_risk tr  ON ta.AccountId=tr.AccountId
  inner join trn_option ot on tr.riskid = ot.riskid
  INNER JOIN trn_Rating ra ON ot.RatingId = ra.RatingId
  INNER JOIN trn_RatingAuto ar on ra.RatingId = ar.RatingId
  where  ar.Rate is null 
) 
```

编辑：

您也可以通过以下方式进行更新：

```
update ar
set Rate  = 0 
FROM trn_account ta
INNER JOIN trn_risk tr  ON ta.AccountId=tr.AccountId
inner join trn_option ot on tr.riskid = ot.riskid
INNER JOIN trn_Rating ra ON ot.RatingId = ra.RatingId
INNER JOIN trn_RatingAuto ar on ra.RatingId = ar.RatingId
where  ar.Rate is null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:38:39.193

我在SQLServer2008R2上写了这个脚本，也许对你有帮助

```
UPDATE x
SET x.Rate  = 0 
FROM (
      SELECT ar.Rate
      FROM trn_account ta INNER JOIN trn_risk tr  ON ta.AccountId=tr.AccountId
                          INNER JOIN trn_option ot ON tr.riskid = ot.riskid
                          INNER JOIN trn_Rating ra ON ot.RatingId = ra.RatingId
                          INNER JOIN trn_RatingAuto ar ON ra.RatingId = ar.RatingId
      WHERE  ar.Rate is null
      ) x 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T17:52:29.663

将您的从哪里更改`=`为`in`？

```
begin transaction
update trn_RatingAuto                                                        
set Rate  = 0 
where rate in (
SELECT ar.Rate
FROM trn_account ta
INNER JOIN trn_risk tr  ON ta.AccountId=tr.AccountId
inner join trn_option ot on tr.riskid = ot.riskid
INNER JOIN trn_Rating ra ON ot.RatingId = ra.RatingId
INNER JOIN trn_RatingAuto ar on ra.RatingId = ar.RatingId
where  ar.Rate is null 
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T17:55:44.837

如果要更新多行，则需要将查询更改为“更新自”查询...

[sql server 2005“更新自”查询](https://stackoverflow.com/questions/6029854/sql-server-2005-update-from-query)

喜欢：

```
 update trn_RatingAuto
   set Rate  = 0  
 from trn_RatingAuto
 join (... 
```

# .net - 从 Windows 服务禁用 PrintScreen

> ID：13054868
> 
> 赞同：1
> 
> 时间：2012-10-24T17:49:47.857
> 
> 标签：.net, windows-services, printscreen

有什么方法可以阻止用户登录计算机使用 printscreen 键。我查遍了整个网络，并没有真正找到任何使它起作用的方法。我看到的唯一方法是使用 windows form ，这不是一个真正的选择。

vb 的任何一个 c# 都适合我。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-25T01:44:48.137

好吧，像这样的东西......

来自[http://go4answers.webhost4life.com/Example/monitor-keys-53505.aspx](http://go4answers.webhost4life.com/Example/monitor-keys-53505.aspx)

```
 Module Keyboard
<DllImport("kernel32.dll", CharSet:=CharSet.Auto)> _
Public Function GetModuleHandle(ByVal lpModuleName As String) As IntPtr
End Function
Public Declare Function UnhookWindowsHookEx Lib "user32" _
  (ByVal hHook As Integer) As Integer
Public Declare Function SetWindowsHookEx Lib "user32" _
  Alias "SetWindowsHookExA" (ByVal idHook As Integer, _
  ByVal lpfn As KeyboardHookDelegate, ByVal hmod As IntPtr, _
  ByVal dwThreadId As Integer) As Integer
Private Declare Function GetAsyncKeyState Lib "user32" _
  (ByVal vKey As Integer) As Integer
Private Declare Function CallNextHookEx Lib "user32" _
  (ByVal hHook As Integer, _
  ByVal nCode As Integer, _
  ByVal wParam As Integer, _
  ByVal lParam As KBDLLHOOKSTRUCT) As Integer
Public Structure KBDLLHOOKSTRUCT
    Public vkCode As Integer
    Public scanCode As Integer
    Public flags As Integer
    Public time As Integer
    Public dwExtraInfo As Integer
End Structure
' Low-Level Keyboard Constants
Private Const HC_ACTION As Integer = 0
Private Const LLKHF_EXTENDED As Integer = &H1
Private Const LLKHF_INJECTED As Integer = &H10
Private Const LLKHF_ALTDOWN As Integer = &H20
Private Const LLKHF_UP As Integer = &H80
' Virtual Keys
Public Const VK_TAB As Integer = &H9
Public Const VK_CONTROL As Integer = &H11
Public Const VK_ESCAPE As Integer = &H1B
Public Const VK_DELETE As Integer = &H2E
Private Const WH_KEYBOARD_LL As Integer = 13
Public KeyboardHandle As Integer
' Implement this function to block as many
' key combinations as you'd like
Public Function IsHooked( _
  ByRef Hookstruct As KBDLLHOOKSTRUCT) As Boolean
    Debug.WriteLine("Hookstruct.vkCode: " & Hookstruct.vkCode)
    Debug.WriteLine(Hookstruct.vkCode = VK_ESCAPE)
    Debug.WriteLine(Hookstruct.vkCode = VK_TAB)
    'MessageBox.Show(Hookstruct.vkCode.ToString)
    If (Hookstruct.vkCode = VK_ESCAPE) And _
      CBool(GetAsyncKeyState(VK_CONTROL) _
      And &H8000) Then
        Call HookedState("Ctrl + Esc blocked")
        Return True
    End If
    If (Hookstruct.vkCode = VK_TAB) And _
      CBool(Hookstruct.flags And _
      LLKHF_ALTDOWN) Then
        Call HookedState("Alt + Tab blockd")
        Return True
    End If
    If (Hookstruct.vkCode = VK_ESCAPE) And _
      CBool(Hookstruct.flags And _
        LLKHF_ALTDOWN) Then
        Call HookedState("Alt + Escape blocked")
        Return True
    End If
    '' disable PrintScreen here
    If (Hookstruct.vkCode = 44) Then
        Call HookedState("Print blocked")
        Return True
    End If
    Return False
End Function
Private Sub HookedState(ByVal Text As String)
    Debug.WriteLine(Text)
End Sub
Public Function KeyboardCallback(ByVal Code As Integer, _
  ByVal wParam As Integer, _
  ByRef lParam As KBDLLHOOKSTRUCT) As Integer
    If (Code = HC_ACTION) Then
        Debug.WriteLine("Calling IsHooked")
        If (IsHooked(lParam)) Then
            Return 1
        End If
    End If
    Return CallNextHookEx(KeyboardHandle, _
      Code, wParam, lParam)
End Function
Public Delegate Function KeyboardHookDelegate( _
  ByVal Code As Integer, _
  ByVal wParam As Integer, ByRef lParam As KBDLLHOOKSTRUCT) _
               As Integer
<MarshalAs(UnmanagedType.FunctionPtr)> _
Private callback As KeyboardHookDelegate
Public Sub HookKeyboard(ByRef f As Form)
    callback = New KeyboardHookDelegate(AddressOf KeyboardCallback)
    KeyboardHandle = SetWindowsHookEx(WH_KEYBOARD_LL, callback, GetModuleHandle(Process.GetCurrentProcess().MainModule.ModuleName), 0)
    MessageBox.Show(KeyboardHandle.ToString)
    Call CheckHooked()
End Sub
Public Sub CheckHooked()
    If (Hooked()) Then
        Debug.WriteLine("Keyboard hooked")
    Else
        Debug.WriteLine("Keyboard hook failed: " & Err.LastDllError)
    End If
End Sub
Private Function Hooked() As Boolean
    Hooked = KeyboardHandle <> 0
End Function
Public Sub UnhookKeyboard()
    If (Hooked()) Then
        Call UnhookWindowsHookEx(KeyboardHandle)
    End If
End Sub 
```

端模块

另外，我看了这个和其他一些，似乎是你正在寻找的东西

.NET 中的全局系统挂钩 [http://www.codeproject.com/KB/system/globalsystemhook.aspx](http://www.codeproject.com/KB/system/globalsystemhook.aspx)

# sql-server - 在 SQL Server 上使用正则表达式而不是组合两个 LIKE 语句

> ID：13054871
> 
> 赞同：0
> 
> 时间：2012-10-24T17:50:12.213
> 
> 标签：sql-server, regex, tsql, union, sql-like

有没有办法可以使用正则表达式来避免两个 LIKE 语句的 UNION？例如：我有以下

```
SELECT NAME FROM EMPLOYEE WHERE NAME LIKE 'Adam%'
UNION
SELECT NAME FROM EMPLOYEE WHERE NAME LIKE 'Bob%' 
```

我不想使用 UNION 并使用正则表达式将两个 select 语句合并为一个。请帮助使用正则表达式解决方案或替代解决方案。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:53:34.713

```
 SELECT NAME FROM EMPLOYEE WHERE NAME LIKE 'Bob%' OR NAME LIKE 'Adam%' 
```

应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:34:19.583

好吧，如果您不能使用“OR”，请改用“And”：

条件1 OR 条件 <=> NOT( NOT(Condition1) AND NOT(Condition2) )

# php - 为什么特殊字符在页面中呈现不佳？

> ID：13054872
> 
> 赞同：0
> 
> 时间：2012-10-24T17:50:16.040
> 
> 标签：php, character-encoding

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T09:58:03.733

A good way to achieve this is declaring the encoding of the page, either modifying the HTTP header or using a `<meta>` tag. In this case, the `UTF-8` encoding will fit the requirements.

HTTP header:

```
Content-Type: text/html; charset=utf-8 
```

HTML (*will be overridden by the HTTP header*):

```
<meta charset="UTF-8"> 
```

# knockout.js - knockout.js 如何在处理函数中访问 $index

> ID：13054878
> 
> 赞同：19
> 
> 时间：2012-10-24T17:50:31.787
> 
> 标签：knockout.js

据我了解，在绑定`$index`中可用`foreach:`，给出对象的索引...我有一个`click:`绑定，例如`click:foo`，我需要访问`$index`inside `foo`。

**有办法吗？**

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-25T06:02:59.307

而不是通过绑定中的函数来破解它，您只需要获取绑定上下文。只要您有权访问与绑定关联的 DOM 元素，就可以使用该`ko.contextFor()`函数获取绑定上下文及其所有属性。

您在处理程序中获得的事件对象使您可以通过`target`属性访问节点。使用它来获取上下文。

```
var viewModel = {
    foo: function (data, event) {
        var context = ko.contextFor(event.target);
        // do stuff with context.$index()
    }
}; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-24T17:52:31.453

是的，

```
<input type="button" data-bind="click: function(data, event) { myClickHandler($index, data, event); }"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-06T01:09:40.733

使用 ES6 代码更容易。在我的 html 中，我有一组页面

```
<span data-bind="foreach: pages">
     <a data-bind="click: $parent.gotoPage.bind($parent), text: $index()+1">
     </a>
</span> 
```

在视图控制器类中，我有`gotoPage`方法。第一个参数将是`foreach`. 非常简单。

```
class ViewModel {
    constructor() {
        this.requestedPage = ko.observable(0);
        this.pages = ko.observableArray([0,1,2,3]);
    }

    async run() {
        this.message("Running");
    }

    gotoPage(pageRequested, event) {
        this.requestedPage(pageRequested);
        this.run();
    }
} 
```

# php - 如何根据预定义的顺序显示 MySQL 结果关联数组？

> ID：13054884
> 
> 赞同：0
> 
> 时间：2012-10-24T17:50:40.617
> 
> 标签：php, html, mysql

使用 PHP 我想获取存储在 MySQL 中的类别列表，并根据用户定义的顺序对它们进行排序。以下是代码现在的工作方式：

主文件

```
<?php
    $categoryList    = getCategoryList();
    $categoriesPerRow = 4;
    $numCategory     = count($categoryList);
    $columnWidth    = (int)(100 / $categoriesPerRow);

if ($numCategory > 0) {
    $i = 0;
    $c = 0;
    for ($i; $i < $numCategory; $i++) {

                    //We skip the dragster category.
        if($categoryList[$i]['name'] == "Dragsters"){
            continue;
        }else{

            if ($c % $categoriesPerRow == 0) {
                echo '<tr style=\"vertical-align:top;\">';
            }

            // we have $url, $image, $name, $price
            extract ($categoryList[$i]);

            echo "<td width=\"$columnWidth%\" align=\"center\" style=\"vertical-align:top;\"><a href=\"$url\"><img src=\"$image\" border=\"0\"><br>$name</a><br></td>\r\n";

            if ($c % $categoriesPerRow == $categoriesPerRow - 1) {
                echo '</tr>';
            }
        }
        $c++;

    }

    if ($i % $categoriesPerRow > 0) {
        echo '<td colspan="' . ($categoriesPerRow - ($i % $categoriesPerRow)) . '">&nbsp;</td>';
    }
} else {
?>
    <tr><td width="100%" align="center" valign="center">No categories yet</td></tr>
<?php   
}   
?> 
```

包含函数 getCategoryList() 的文件

```
function getCategoryList()
 {
$sql = "SELECT cat_id, cat_name, cat_image
        FROM tbl_category
        WHERE cat_parent_id = 0
        ORDER BY cat_name";
$result = dbQuery($sql);

$cat = array();
while ($row = dbFetchAssoc($result)) {
    extract($row);

    if ($cat_image) {
        $cat_image = WEB_ROOT . 'images/category/' . $cat_image;
    } else {
        $cat_image = WEB_ROOT . 'images/no-image-small.png';
    }

    $cat[] = array('url'   => $_SERVER['PHP_SELF'] . '?c=' . $cat_id,
                   'image' => $cat_image,
                   'name'  => $cat_name);

}

return $cat;            
} 
```

我考虑过制作一个 JQuery 界面，用户可以在其中拖动和排列，然后保存类别应该显示的顺序。我在想数据库中的信息可能是每个类别都有一个存储订单号的字段。然后可以使用此订单号对类别进行排序。使用 PHP 实现这一目标的最有效方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:33:26.943

愚蠢的我，我想出来了。

```
SELECT cat_id, cat_name, cat_image
    FROM tbl_category
    WHERE cat_parent_id = 0
    ORDER BY cat_order 
```

cat_order 是一个数字，表示其按顺序排列的位置。jquery 设计将允许用户订购它。

# msbuild - 让 msbuild runas admin 调用所有程序

> ID：13054887
> 
> 赞同：0
> 
> 时间：2012-10-24T17:50:51.537
> 
> 标签：msbuild, uac

有没有办法启动 msbuild 以便它以管理员身份调用 devenv.exe？我们需要这个，因为它将 COM 程序集注册为构建的一部分。

谢谢 - 戴夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T08:15:53.690

唯一的方法是以管理员身份启动 MSBuild.exe（例如在提升的命令提示符下运行 msbuild 命令），然后由它初始化的所有进程（例如 devenv.exe）都在管理员上下文下运行。

# sorting - 实施整理和排序的有效方法？

> ID：13054892
> 
> 赞同：1
> 
> 时间：2012-10-24T17:51:09.633
> 
> 标签：sorting, collation, lexicographic

我正在编写词典学软件，理论上可能需要使用任意（特定于词典项目的）排序规则对数万个字符串进行排序。有两种指定自定义排序规则的方法：

1.  将字素映射到 unicode 样式的多级排序规则键。
2.  一个按排序顺序排列的字母字素数组（可能包括二合字母等），可以在内部转换为排序规则的映射。

比较字符串的天真的方法是逐个检查字形，直到找到不匹配，然后查找不匹配字素的排序规则键进行比较，但我希望有一种更有效的方法。

到目前为止，我得到的最好的想法取决于注意到相等长度的字符串可以被视为 little-endian base-n 数字，因此我可以为每个字符串预先计算一个整数键，从而将排序规则转换为廉价的整数比较。但是，这会破坏不同长度的字符串（在对字典进行排序时很重要），并且对可以生成的整数的大小没有限制。为了考虑长度差异，我想我可以计算每个字符串的所有前缀的键列表，然后只比较长度等于被比较的较短字符串的前缀的键。这似乎做得很好，但密钥大小仍然是无限的，存储密钥可能会占用大量内存。

有没有办法改进这种方法？还是我只是完全错误地处理它，并且有一种更好的方法可以使用任意排序规则对字符串进行排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T01:04:44.090

逐字形基数排序怎么样？你得到 Big O n（单词数）* m（最长单词的长度）排序。这个想法应该相当简单，将所有以 A 开头的单词放在 A 存储桶中，Bs 放在 B 存储桶中，依此类推。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T00:10:03.713

我不是专家，但我可能会建议在幼稚方法和您的方法之间进行某种混合。在每个字符串中查看固定数量的字节时，将其视为小端数并使用预先计算的排序规则。然后，如果它们相同，则移动到相同长度的下一组并执行相同操作。棘手的部分是处理可变长度字素（例如 UTF-8 或二合字母）。最简单的解决方案是在字典中使用固定宽度的表示，但可能还有另一种更复杂的解决方案，我现在想不出。

一旦到达较短字符串的末尾，您将零扩展它以满足下一个边界，然后进行比较。

您还可以查看排序规则的开源实现，看看它们是否做了更复杂的事情（例如 strcoll C 函数的 GNU 实现）。

# asp.net - iTextSharp 生成的 PDF 在关闭时会导致保存对话框

> ID：13054893
> 
> 赞同：0
> 
> 时间：2012-10-24T17:51:15.860
> 
> 标签：asp.net, itextsharp

我正在使用 iTextSharp 生成 PDF 文档，并将它们保存到磁盘，如下所示：

```
 Document document = new Document(PageSize.LETTER, 50, 50, 80, 50);
        FileStream fs = new FileStream(Ruta, FileMode.OpenOrCreate, FileAccess.ReadWrite, FileShare.ReadWrite);
        PdfWriter PDFWriter = PdfWriter.GetInstance(document, fs);

        EsquemaFormato PageEventHandler = new EsquemaFormato();
        PageEventHandler.Title = TitleMiddle;
        PageEventHandler.TitleHeaderFont = FontFactory.GetFont(BaseFont.HELVETICA, 12, Font.NORMAL);
        PageEventHandler.TitleRightHeaderFont = FontFactory.GetFont(BaseFont.HELVETICA, 9, Font.NORMAL);
        PageEventHandler.HeaderLeft = "Nombre";
        PageEventHandler.HeaderRight = TitleRight;
        PageEventHandler.RutaImagen = RutaImagen;
        PageEventHandler.Cuerpo = Cuerpo;
        PDFWriter.PageEvent = PageEventHandler;

        document.Open();
        document.Close(); 
```

基于[http://www.mazsoft.com/blog/post/2008/04/30/Code-sample-for-using-iTextSharp-PDF-library.aspx](http://www.mazsoft.com/blog/post/2008/04/30/Code-sample-for-using-iTextSharp-PDF-library.aspx)

我打开了我刚刚创建的任何 PDF 文件，但是当我尝试关闭它时会出现“您要保存吗？” 对话框出现。不是使用 iTextSharp 生成的 PDF 不会发生这种情况。

我错过了什么？我见过使用 Response 的解决方案，但我不使用它。提前致谢。

更新：这是一个示例[http://dl.dropbox.com/u/4582874/test.pdf](http://dl.dropbox.com/u/4582874/test.pdf)

编辑：通过关注布鲁诺的链接，我发现了这篇文章：[iTextSharp + FileStream = Corrupt PDF file](https://stackoverflow.com/questions/2186817/itextsharp-filestream-corrupt-pdf-file)

那成功了！这是我现在的工作代码：

```
 public void CreatePDF(string TitleMiddle, string Ruta, string RutaImagen, string TitleRight, string Cuerpo)
    {
        using (MemoryStream ms = new MemoryStream())
        {
            Document document = new Document(PageSize.LETTER, 50, 50, 80, 50);
            PdfWriter PDFWriter = PdfWriter.GetInstance(document, ms);

            EsquemaFormato PageEventHandler = new EsquemaFormato();
            PageEventHandler.Title = TitleMiddle;
            PageEventHandler.TitleHeaderFont = FontFactory.GetFont(BaseFont.HELVETICA, 12, Font.NORMAL);
            PageEventHandler.TitleRightHeaderFont = FontFactory.GetFont(BaseFont.HELVETICA, 9, Font.NORMAL);
            PageEventHandler.HeaderLeft = "Nombre";
            PageEventHandler.HeaderRight = TitleRight;
            PageEventHandler.RutaImagen = RutaImagen;
            PageEventHandler.Cuerpo = Cuerpo;
            PDFWriter.PageEvent = PageEventHandler;

            document.Open();
            document.Close();
            byte[] content = ms.ToArray();
            using (FileStream fs = File.Create(Ruta))
            {
                fs.Write(content, 0, (int)content.Length);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:00:51.733

你试过没有 FileAccess.ReadWrite、FileShare.ReadWrite 属性吗？

我每天使用 itextSharp 创建 PDF 并且从未遇到过这个问题 - 你的代码和我的代码之间的主要区别是我没有这些。

我怀疑 FileShare 让文档有点打开，等待有人通过保存完成关闭它？

# css - ie8 计算偏移量和 hack 修复中断 ie9

> ID：13054896
> 
> 赞同：2
> 
> 时间：2012-10-24T17:51:22.910
> 
> 标签：css, internet-explorer-8, internet-explorer-9

出于某种原因，IE8 会计算`18px`CSS 元素上的偏移量。

当我添加 a 时`top: -18px`，`left: -8px`它修复了 IE8 中的问题，但在其他所有浏览器中都会破坏它。

我尝试添加类似`\9`and的 hack，`\0/`但这些在 IE9 中不起作用。

添加`\9`后`top`和`left`属性修复IE8。

但是，IE9 似乎没有识别 hack 并使用负值`top`和`left`值和布局中断。

我需要一种方法来解决这个问题，但它必须是我只能在 CSS 中做的事情。

这只是一个小菜单，在一个更大的 Java 项目中到处使用，我无法访问其余代码。仅适用于 CSS。

这是获取偏移量的 CSS 类：

```
#myMenuBar{
        position: relative;
        width:800px;
        height:auto !important;
        height:36px;
        margin:0 auto;
        z-index:3001;
        text-align:left;
        top: 0px;  
        left: 0px;

    } 
```

就像我说的，将 top 和 left 分别更改为 -18px 和 -8px 可以解决 ie8 中的问题，但会在其他任何地方破坏它，因为 ie8 是唯一计算此偏移量的浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:26:51.990

我找到了一种方法

```
#myMenuBar{
    position: relative;
    width:800px;
    height:auto !important;
    height:36px;
    margin:0 auto;
    z-index:3001;
    text-align:left;
    top: -18px;
    left: -8px;
}

:root #myMenuBar { top: 0px; \0/IE9; left: 0px; \0/IE9;}  /* IE9 + IE10pp4 */ 
```

这似乎在 ie8、9 firefox、safari 和 chrome 中正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T17:59:32.020

您可以使用 IE 条件注释，使其仅适用于 IE8 [http://www.quirksmode.org/css/condcom.html](http://www.quirksmode.org/css/condcom.html)

```
<style type="text/css">
#myMenuBar{
    position: relative;
    width:800px;
    height:auto !important;
    height:36px;
    margin:0 auto;
    z-index:3001;
    text-align:left;
    top: 0px;  
    left: 0px;
}
</style>

<!--[if IE 8]>     
<style type="text/css">
/* These will override the values above in IE 8 only */
#myMenuBar {
    top: -18px;  
    left: -8px;
}
</style>
<![endif]--> 
```

如果不能修改 HTML，可以使用 CSS hacks 瞄准 IE8 及以下http://www.gravitationalfx.com/css-hacks-for-ie-targeting-only-ie8-ie7-and-ie6/[即可](http://www.gravitationalfx.com/css-hacks-for-ie-targeting-only-ie8-ie7-and-ie6/)不要告诉任何人我建议你使用它；）

```
#myMenuBar{
    position: relative;
    width:800px;
    height:auto !important;
    height:36px;
    margin:0 auto;
    z-index:3001;
    text-align:left;
    top: 0;  
    left: 0;
    /* That crap at the end makes it work in < IE8 only */
    top: -18px\9;
    left: -18px\9;
} 
```

# sitemap - TYPO3 Extbase：如何从我的模型中呈现页面树？

> ID：13054901
> 
> 赞同：0
> 
> 时间：2012-10-24T17:51:36.150
> 
> 标签：sitemap, typo3, relation, extbase

我想在 extbase/fluid 中创建某种站点地图（基于页面树）。我已将`pages`表格加载到模型中：

```
config.tx_extbase.persistence.classes.Tx_MyExt_Domain_Model_Page.mapping.tableName = pages 
```

我已经创建了一个控制器和存储库，但是卡在了可以将子页面作为关系加载到我的模型中的部分上。

例如：

```
$page = $this->pageRepository->findByPid($rootPid); 
```

返回我的根页面。但是如何扩展我可以使用的`$page->getSubpages()`模型`$page->getNestedPages()`？

我是否必须在我的模型中创建某种查询？或者我是否必须使用现有功能（如对象存储）来解决这个问题，如何解决？

我尝试了很多东西，但可以简单地弄清楚这应该如何工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:00:08.370

您必须覆盖您的 findByPid 存储库方法并添加

```
public function findByPid($pid) {
    $querySettings = $this->objectManager->create('Tx_Extbase_Persistence_Typo3QuerySettings');
    $querySettings->setRespectStoragePage(FALSE);
    $this->setDefaultQuerySettings($querySettings);
    $query = $this->createQuery();
    $query->matching($query->equals('pid', $pid));
    $pages = $query->execute();
    return $pages;
} 
```

获取所有页面。比您可以编写自己的 getSubpages-method 之类的

```
function getSubpages($currentPid) {
    $subpages = $this->pagesRepository->findByPid($currentPid);
    if (count($subpages) > 0) {
        $i = 0;
        foreach($subpages as $subpage) {
            $subpageUid = $subpage->getUid();
            $subpageArray[$i]['page'] = $subpage;
            $subpageArray[$i]['subpages'] = $this->getSubpages($subpageUid);
            $i++;
        }
    } else {
        $subpageArray = Array();
    }
    return $subpageArray;
} 
```

我没有测试这种方法，但它看起来像这样来获取所有子页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-30T07:37:21.640

我想知道我找不到返回完整页面树的typo3方法:(所以我写了一个小函数（你可以在extbase扩展中使用），肯定不是最好或最快的方法，但易于扩展或定制 ;）

首先你需要一个 PageRepository 的实例

```
$this->t3pageRepository = \TYPO3\CMS\Core\Utility\GeneralUtility::makeInstance('TYPO3\\CMS\\Frontend\\Page\\PageRepository'); 
```

this->t3pageRepository->init();

进行初始化，以设置一些基本配置，例如“WHERE deletet = 0 AND hidden = 0 ...”

然后使用此函数，您将获得一个包含页面数据和子页面的数组。我实现了最多三个级别的 yust：

```
 function getPageTree($pid,$deep=2){
    $fields = '*';
    $sortField = 'sorting';
    $pages = $this->t3pageRepository->getMenu($pid,$fields,$sortField);
    if($deep>=1){
        foreach($pages as &$page) {
            $subPages1 = $this->t3pageRepository->getMenu($page['uid'],$fields,$sortField);
            if(count($subPages1)>0){
                if($deep>=2){
                    foreach($subPages1 as &$subPage1){
                        $subPages2 = $this->t3pageRepository->getMenu($subPage1['uid'],$fields,$sortField);
                        if(count($subPages2>0)){
                            $subPage1['subpages'] = $subPages2;
                        }
                    }
                }
                $page['subpages'] = $subPages1;
            }
        }
    }
    return $pages;
} 
```

# javascript - 将淡入效果添加到 div 类

> ID：13054902
> 
> 赞同：2
> 
> 时间：2012-10-24T17:51:37.630
> 
> 标签：javascript, fade

我真的是 JS 的新手。我正在使用这个脚本来创建工具提示：

```
<span class="SimpleTip" onMouseOver="javascript:this.className='SimpleTipHover'."onMouseOut="javascript:this.className='SimpleTip'"> 
```

它工作得很好，但我想在工具提示出现时添加淡入效果。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:59:31.650

这是 jquery 文档[http://api.jquery.com/category/effects/fading/的链接](http://api.jquery.com/category/effects/fading/)

你想做这样的事情：

```
$('.SimpleTip').on('mouseOver', function (){ 
    $('.SimpleTipHover').fadeIn();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:55:04.407

您可以使用带有计时器和更改不透明度的纯 javascript 来执行此操作，但更简单的是仅使用 jQuery 来隐藏/显示提示

或者你可以使用[CSS3 过渡](http://www.w3schools.com/css3/css3_transitions.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T18:27:34.237

此示例使用 CSS 过渡

[http://jsfiddle.net/nickaknudson/mZmuQ/](http://jsfiddle.net/nickaknudson/mZmuQ/)

**JS**

```
<span class="SimpleTip" onMouseOver="javascript:this.className='SimpleTipHover';"onMouseOut="javascript:this.className='SimpleTip';">test</span>​ 
```

**CSS**

```
.SimpleTip {
    background-color:green;
}
.SimpleTipHover {
    background-color:red;
}
span {
    transition-property: background;
    transition-duration: 1s;
    transition-timing-function: linear;
    transition-delay: 1s;
    /* Firefox 4 */
    -moz-transition-property:background;
    -moz-transition-duration:1s;
    -moz-transition-timing-function:linear;
    -moz-transition-delay:1s;
    /* Safari and Chrome */
    -webkit-transition-property:background;
    -webkit-transition-duration:1s;
    -webkit-transition-timing-function:linear;
    -webkit-transition-delay:1s;
    /* Opera */
    -o-transition-property:background;
    -o-transition-duration:1s;
    -o-transition-timing-function:linear;
    -o-transition-delay:1s;
} 
```

**资源**

*   [http://www.w3schools.com/css3/css3_transitions.asp](http://www.w3schools.com/css3/css3_transitions.asp)

# svn - 无法检查 web.config 的类型

> ID：13054906
> 
> 赞同：2
> 
> 时间：2012-10-24T17:51:46.660
> 
> 标签：svn, visual-studio-2012, visualsvn

这曾经适用于 VS2010 和 VisualSVN 3。我更新到 VS2012，现在当我尝试执行 SVN 时`Show Differences for Web.config`，出现以下错误：

`Can't check the type of C:\thepath\web.config`

我可以比较 web.config 的转换，所以我不确定这里发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-27T14:07:33.963

该错误很可能已在 VisualSVN 4.0 及更高版本中修复。[VisualSVN 4.0.1 更新日志](https://www.visualsvn.com/visualsvn/changes/#v4.0.1)：

> *   修复：在 Visual Studio 2013 中打开内置 Diff 窗口时，有时会出现“无法检查类型”错误。

# wpf - BitmapImage 解码速度表现 wpf

> ID：13054909
> 
> 赞同：7
> 
> 时间：2012-10-24T17:51:51.927
> 
> 标签：wpf, performance, image, decode, bitmapimage

我有 5 个像素高度和像素宽度都相同的图像（2481 * 3508 就此而言）。但是，一张是gif，一张jpeg，一张png和一张bmp。现在我将它们渲染成一个 BitmapSource，（1）DecodePixelHeight 的原始像素高度的三分之二和（2）DecodePixelHeight 的原始像素高度。

第一个场景：

```
bitmapImage.BeginInit();
bitmapImage.CreateOptions = BitmapCreateOptions.IgnoreColorProfile;
bitmapImage.CacheOption = BitmapCacheOption.OnLoad;
bitmapImage.DecodePixelHeight = 2/3 * originalHeight;
bitmapImage.StreamSource = streamWithTheFile;
bitmapImage.EndInit();
bitmapImage.Freeze(); 
```

BMP 和 Jpeg 同样慢。Png 和 Gif 只需要不到一半的时间。为什么？

第二种情况：

```
bitmapImage.BeginInit();
bitmapImage.CreateOptions = BitmapCreateOptions.IgnoreColorProfile;
bitmapImage.CacheOption = BitmapCacheOption.OnLoad;
bitmapImage.StreamSource = streamWithTheFile;
bitmapImage.EndInit();
bitmapImage.Freeze(); 
```

png 之前需要一半的时间。Jpeg 和 BMP 所需时间的五分之一。与以前相同的时间。

根据[文档](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.decodepixelheight.aspx)，我会假设 Png 和 Jpeg 的性能在某种程度上比其他格式更独立于实际解码大小。可能是什么原因，它不是？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-23T21:07:29.110

我已经实现了一种最佳的、性能方面的行为。我用它来流式传输来自家庭安全摄像头的实时信息，就像一个具有相当大图像的魅力。

试试这个，让我知道你的想法。用法非常简单，分配依赖属性，将行为附加到图像并完成它。干杯。

注意：像素可能是 IList，但您也可以分配一个数组，因为 C# 数组实现了 IList。

注意2：不要分配图像源，因为这将覆盖行为的分配，只需绑定到行为的*像素*依赖属性。

```
public class VideoBehavior : Behavior<Image>
{

    public static readonly DependencyProperty PixelsProperty = DependencyProperty.Register(
        "Pixels", typeof (IList<byte>), typeof (VideoBehavior), new PropertyMetadata(default(IList<byte>),OnPixelsChanged));

    private static void OnPixelsChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var b = (VideoBehavior) d;
        var pixels = (IList<byte>) e.NewValue;

        b.RenderPixels(pixels);
    }

    public IList<byte> Pixels
    {
        get { return (IList<byte>) GetValue(PixelsProperty); }
        set { SetValue(PixelsProperty, value); }
    }

    public static readonly DependencyProperty PixelFormatProperty = DependencyProperty.Register(
        "PixelFormat", typeof (PixelFormat), typeof (VideoBehavior), new PropertyMetadata(PixelFormats.Default,OnPixelFormatChanged));

    private static void OnPixelFormatChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var b = (VideoBehavior) d;
        var pixelFormat = (PixelFormat) e.NewValue;

        if(pixelFormat==PixelFormats.Default)
            return;

        b._pixelFormat = pixelFormat;

        b.InitializeBufferIfAttached();
    }

    public PixelFormat PixelFormat
    {
        get { return (PixelFormat) GetValue(PixelFormatProperty); }
        set { SetValue(PixelFormatProperty, value); }
    }

    public static readonly DependencyProperty PixelWidthProperty = DependencyProperty.Register(
        "PixelWidth", typeof (int), typeof (VideoBehavior), new PropertyMetadata(default(int),OnPixelWidthChanged));

    private static void OnPixelWidthChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var b = (VideoBehavior)d;
        var value = (int)e.NewValue;

        if(value<=0)
            return;

        b._pixelWidth = value;

        b.InitializeBufferIfAttached();
    }

    public int PixelWidth
    {
        get { return (int) GetValue(PixelWidthProperty); }
        set { SetValue(PixelWidthProperty, value); }
    }

    public static readonly DependencyProperty PixelHeightProperty = DependencyProperty.Register(
        "PixelHeight", typeof (int), typeof (VideoBehavior), new PropertyMetadata(default(int),OnPixelHeightChanged));

    private static void OnPixelHeightChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var b = (VideoBehavior)d;
        var value = (int)e.NewValue;

        if (value <= 0)
            return;

        b._pixelHeight = value;

        b.InitializeBufferIfAttached();
    }

    public int PixelHeight
    {
        get { return (int) GetValue(PixelHeightProperty); }
        set { SetValue(PixelHeightProperty, value); }
    }

    public static readonly DependencyProperty DpiXProperty = DependencyProperty.Register(
        "DpiX", typeof (int), typeof (VideoBehavior), new PropertyMetadata(96,OnDpiXChanged));

    private static void OnDpiXChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var b = (VideoBehavior)d;
        var value = (int)e.NewValue;

        if (value <= 0)
            return;

        b._dpiX = value;

        b.InitializeBufferIfAttached();
    }

    public int DpiX
    {
        get { return (int) GetValue(DpiXProperty); }
        set { SetValue(DpiXProperty, value); }
    }

    public static readonly DependencyProperty DpiYProperty = DependencyProperty.Register(
        "DpiY", typeof (int), typeof (VideoBehavior), new PropertyMetadata(96,OnDpiYChanged));

    private static void OnDpiYChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var b = (VideoBehavior)d;
        var value = (int)e.NewValue;

        if (value <= 0)
            return;

        b._dpiY = value;

        b.InitializeBufferIfAttached();
    }

    public int DpiY
    {
        get { return (int) GetValue(DpiYProperty); }
        set { SetValue(DpiYProperty, value); }
    }

    [DllImport("kernel32.dll", EntryPoint = "RtlMoveMemory")]
    public static extern void CopyMemory(IntPtr destination, IntPtr source, uint length);

    private IntPtr _backBuffer = IntPtr.Zero;
    private int _bytesPerPixel;
    private const int BitsPerByte = 8;
    private int _pixelWidth;
    private int _pixelHeight;
    private int _dpiX;
    private int _dpiY;
    private PixelFormat _pixelFormat;
    private Int32Rect _rect;

    private uint _byteArraySize;
    private WriteableBitmap _bitMap;

    private bool _attached;

    protected override void OnAttached()
    {
        _attached = true;
        InitializeBufferIfAttached();
    }

    private void InitializeBufferIfAttached()
    {
        if(_attached==false)
            return;

        ReevaluateBitsPerPixel();

        RecomputeByteArraySize();

        ReinitializeImageSource();
    }

    private void ReevaluateBitsPerPixel()
    {
        if(_pixelFormat==PixelFormats.Default)
            return;

        _bytesPerPixel = _pixelFormat.BitsPerPixel/BitsPerByte;
    }

    private void ReinitializeImageSource()
    {
        if(_pixelHeight<=0|| _pixelHeight<=0)
            return;

        _bitMap = new WriteableBitmap(_pixelWidth, _pixelHeight, _dpiX, _dpiY, _pixelFormat, null);
        _backBuffer = _bitMap.BackBuffer;
        _rect = new Int32Rect(0, 0, _pixelWidth, _pixelHeight);
        AssociatedObject.Source = _bitMap;
    }

    private async void RenderPixels(IList<byte> pixels)
    {
        if (_backBuffer == IntPtr.Zero)
            return;

        if (pixels == null)
        {
            return;
        }

        await Task.Factory.StartNew(() =>
        {
            var h = new GCHandle();
            var allocated = false;

            try
            {
                h = GCHandle.Alloc(pixels, GCHandleType.Pinned);
                allocated = true;
                var ptr = h.AddrOfPinnedObject();
                CopyMemory(_backBuffer, ptr, _byteArraySize);
            }
            finally
            {
                if (allocated)
                    h.Free();
            }
        });

        _bitMap.Lock();

        _bitMap.AddDirtyRect(_rect);
        _bitMap.Unlock();
    }

    private void RecomputeByteArraySize()
    {
        _byteArraySize = (uint)(_pixelWidth * _pixelHeight * _bytesPerPixel);
    }
} 
```

# r - 在R中的多维数组中查找维度索引

> ID：13054912
> 
> 赞同：6
> 
> 时间：2012-10-24T17:51:58.073
> 
> 标签：r, multidimensional-array

我在看 3 维数组 M：`M<-dim(3,3,3)`

我想找到一种使用以下规则填充 M 的有效方法： *M[i,j,k] = i/10 + j^2 + sqrt(k)*，理想情况下无需编写带有`for`语句的循环。

为澄清起见，如果 M 是二维的，则有一种简单的方法可以完成此操作。如果我想要 *M[i,j] = i/10 + j^2*，那么我可以这样做 `M<-row(M)/10 + col(M)*col(M)`

3维或更高维数组是否有等效的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T18:10:53.910

@James 的答案更好，但我认为你的问题的狭义答案（多维等价于`row()/col()`）是`slice.index`......

```
M<- array(dim=c(3,3,3))
slice.index(M,1)/10+slice.index(M,2)^2+sqrt(slice.index(M,3)) 
```

`r-devel`如果有人（我或其他人）在列表上发布建议以`slice.index`在`?row`/ `?col`...

或者（类似于@flodel 的新答案）：

```
d <- do.call(expand.grid,lapply(dim(M),seq)) ## create data.frame of indices
v <- with(d,Var1/10+Var2^2+sqrt(Var3))       ## default names Var1, ... Varn 
dim(v) <- dim(M)                             ## reshape into array 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T18:07:44.127

使用嵌套`outer`的 s 怎么样？

```
outer(1:3/10,outer((1:3)^2,sqrt(1:3),"+"),"+")
, , 1

     [,1] [,2] [,3]
[1,]  2.1  5.1 10.1
[2,]  2.2  5.2 10.2
[3,]  2.3  5.3 10.3

, , 2

         [,1]     [,2]     [,3]
[1,] 2.514214 5.514214 10.51421
[2,] 2.614214 5.614214 10.61421
[3,] 2.714214 5.714214 10.71421

, , 3

         [,1]     [,2]     [,3]
[1,] 2.832051 5.832051 10.83205
[2,] 2.932051 5.932051 10.93205
[3,] 3.032051 6.032051 11.03205 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T19:50:39.047

您还可以使用`arrayInd`：

```
M   <- array(dim = c(3, 3, 3))
foo <- function(dim1, dim2, dim3) dim1/10 + dim2^2 + sqrt(dim3)
idx <- arrayInd(seq_along(M), dim(M), useNames = TRUE)
M[] <- do.call(foo, as.data.frame(idx)) 
```

我觉得随着维度数量的增加，这种方法有可能减少打字。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T19:45:31.107

可以说是从“零基础”做起。

```
 i <- rep(1:3, times=3*3)
 j <- rep(1:3 , times= 3, each=3)
 k <- rep(1:3 , each= 3*3)
 M <- array( i/10 + j^2 + sqrt(k), c(3, 3, 3))
 M 
```

# iphone - UITableViewCell 在取消选择时选择了阴影颜色

> ID：13054913
> 
> 赞同：5
> 
> 时间：2012-10-24T17:52:03.923
> 
> 标签：iphone, objective-c, ios, ipad, uitableview

我有一个标准的 UITableView。我想将`shadowColor`单元格的设置`textLabel`为`[UIColor whiteColor]`，但仅在触摸单元格时。为此，我使用以下代码。它是一个自定义 UITableViewCell 子类，它覆盖了 setSelected/setHighlighted：

```
@implementation ExampleTableViewCell

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];
    [self setShadowColorSelected:selected];

}

- (void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated {
    [super setHighlighted:highlighted animated:animated];
    [self setShadowColorSelected:highlighted];
}

- (void)setShadowColorSelected:(BOOL)selected {
    if (selected) {
        self.textLabel.shadowColor = [UIColor blackColor];
    }else {
        self.textLabel.shadowColor = [UIColor whiteColor];
    }
}

@end 
```

我对这种方法的问题是，在取消选择时，单元格的时间很短，**标签的文本和阴影都是白色的。**请参阅此屏幕截图，该屏幕截图是在取消选择的确切时刻拍摄的：

![阴影示例](../Images/746d91ad9cea9c0f69b8d678e1ef4d40.png)

这与这两个帖子中的方法基本相同：

[来自自定义单元格选择颜色的 UILabel 阴影](https://stackoverflow.com/questions/3436276/uilabel-shadow-from-custom-cell-selected-color)

[选择 UITableViewCell 时删除文本阴影](https://stackoverflow.com/questions/1184014/removing-text-shadow-in-uitableviewcell-when-its-selected)

我在后一个问题中使用了公认答案的方法。

我创建了一个非常非常简单的代码项目并将**[其上传到 github](https://github.com/avf/SelectedShadowExample)**。它显示了我的问题。它只是一个显示单个单元格的 UITableViewController。

除此之外，没有什么花哨的。UITableView 委托方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (!cell) {
        cell = [[ExampleTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    cell.textLabel.text = @"test";

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self.tableView deselectRowAtIndexPath:indexPath animated:YES]; //setting this to NO doesn't work either!
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T11:37:15.953

如果我理解了这个问题，您需要显示阴影颜色，直到单元格选择动画消失。我不确定您尝试的方式有什么不正确，但更直接的解决方案可以正常工作。

请注意，一旦不需要，您就需要删除观察者。

**ExampleTableViewCell.h**

```
@interface ExampleTableViewCell : UITableViewCell {

}

- (void) setSelectionShadowOfColor:(UIColor *) selColor;
@end 
```

**ExampleTableViewCell.m**

```
@implementation ExampleTableViewCell

- (void) setSelectionShadowOfColor:(UIColor *) selColor {
    self.textLabel
    [self addObserver:self
           forKeyPath:@"textLabel.highlighted" // not isHighlighted as that is a getter name of the highlighted property
              options:NSKeyValueObservingOptionNew
              context:NULL];
}

- (void)observeValueForKeyPath:(NSString *)keyPath
                      ofObject:(id)object
                        change:(NSDictionary *)change
                       context:(void *)context {

    BOOL isHighlighted = [[change objectForKey:NSKeyValueChangeNewKey] boolValue];

    if (isHighlighted) {
        self.textLabel.shadowColor = [UIColor blackColor];
    } else {
        self.textLabel.shadowColor = [UIColor whiteColor];
    }
}

@end 
```

**ExampleTableViewController.m**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    ExampleTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; // note the type ExampleTableViewCell is used here to avoid the interface lookup mess
    if (!cell) {
        cell = [[ExampleTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        [cell setSelectionShadowOfColor:[UIColor blackColor]];
    }
    cell.textLabel.text = @"test";

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T14:00:10.963

将以下内容添加到您的 UITableViewDelegate：

```
NSIndexPath *selectedIndex;

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (!cell) {
        cell = [[ExampleTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    cell.textLabel.text = @"test";
    if(indexpath == selectedIndex)
    {
        cell.textlabel.shadowColor = [UIColor blackColor];
    }
    else
    {
        cell.textlabel.shadowColor = [UIColor whiteColor];
    }
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self.tableView beginUpdates];
    selectedIndex = indexpath;
    [self.tableView endUpdates];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T22:35:29.770

这是我能做到的最好的：

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:NO];

    [self setShadowColorSelected:selected];
}

- (void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated {
    [super setHighlighted:highlighted animated:YES];

    [self setShadowColorSelected:highlighted];
}

- (void)setShadowColorSelected:(BOOL)selected {
    [self.textLabel setBackgroundColor:[UIColor clearColor]];

    if (selected)
    {
        [self.textLabel setTextColor:[UIColor whiteColor]];
        [self.textLabel setShadowColor:[UIColor blackColor]];

        [UIView setAnimationBeginsFromCurrentState:YES];
        [UIView transitionWithView:self.textLabel duration:0.25 options:UIViewAnimationOptionTransitionCrossDissolve animations:^{
            if (selected)
            {
                [self.textLabel setTextColor:[UIColor whiteColor]];
                [self.textLabel setShadowColor:[UIColor blackColor]];
            }
            else
            {
                [self.textLabel setTextColor:[UIColor blackColor]];
                [self.textLabel setShadowColor:[UIColor whiteColor]];
            }
        } completion:nil];
    }
    else
    {
         [self.textLabel setTextColor:[UIColor blackColor]];
         [self.textLabel setShadowColor:[UIColor whiteColor]];
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T07:27:36.747

根据我的理解，您可以通过使用以下代码和所需颜色来更改表格视图的颜色来消除此问题

```
[tableView setBackgroundColor:[UIColor "GrayColor"]]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T15:38:38.333

这是完成您想要的简单方法：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    self.textLabel.shadowColor = [UIColor blackColor];
    [super touchesBegan:touches withEvent:event];
}
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    self.textLabel.shadowColor = [UIColor whiteColor];
    [super touchesEnded:touches withEvent:event];
}
-(void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {

    self.textLabel.shadowColor = [UIColor whiteColor];
    [super touchesCancelled:touches withEvent:event];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T10:45:29.630

我想您应该需要为文本/阴影颜色的变化设置动画，其持续时间与 UITableView 用于动画选择/取消选择的持续时间相同。*在我的理解中，您在 tableView开始*动画选择突出显示的（不）出现的确切时刻更改文本/阴影颜色，所以您得到的是您的颜色会瞬间改变，而选择突出显示需要一些时间来制作动画从一个州到另一个州

尝试这样的事情：

```
__block UIColor *newShadowColor = selected ? [UIColor blackColor] : [UIColor whiteColor];
[UIView animateWithDuration:0.2
                 animations:^{
                        /* change your label/shadow color here. */
                        self.textLabel.shadowColor = newShadowColor;
                 }
                 completion:^(BOOL finished){
                       /* this is where the cell is no longer selected
                          or highlighted. You may do some additional style changes to your
                          label here */ }]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-31T12:14:02.640

我遇到过同样的问题。我查看的所有解决方案都需要子封装/过多的附加代码。

我最终所做的是在主节点`UILabel`下方创建第二个`UILabel`作为阴影。

不要在主标签和阴影标签上设置阴影。对于阴影标签，将“正常颜色”设置为您想要的阴影颜色，并将突出显示的颜色设置为“清除颜色”。

显然，每次更新主标签时都必须更新影子标签。在许多情况下，付出的代价并不大。

希望有帮助！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-05T11:29:22.240

我也面临同样的问题。

您可以使用 UIButton 而不是使用默认标签，您的问题将得到解决。

将自定义按钮放在单元格中。

我的要求得到了解决。它可能会帮助你。

# html - 如何为 iframe 加载标签添加锚点？

> ID：13054914
> 
> 赞同：2
> 
> 时间：2012-10-24T17:52:03.530
> 
> 标签：html

我正在尝试向此 div 添加一个锚点：

```
<div class="mosaic-block bar">
<a href="javascript:loadintoIframe('myframe', 'portfolio/optica.html')"   class="mosaic-overlay"> 
```

我的目标是单击此按钮，加载 iframe，然后转到锚点。

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:54:39.633

你试过`loadintoIframe('myframe','portfolio/optica.html#anchor');`吗？没有看到你的`loadintoIframe`功能是如何工作的，很难说。

如果`iframe`页面上已经存在，则不需要 JavaScript，只需：

```
<a href="portfolio/optica.html#anchor" target="myframe" ...>...</a> 
```

# geolocation - Spotify 应用程序真的支持地理定位吗？我收到一个错误

> ID：13054915
> 
> 赞同：0
> 
> 时间：2012-10-24T17:52:26.733
> 
> 标签：geolocation, spotify

```
if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(callback);
} 
```

我收到此错误：未捕获的错误：TYPE_MISMATCH_ERR：DOM 异常 17

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:58:52.957

`PERMISSION_DENIED`API 在那里，但目前在所有情况下都会出现错误。但是，您遇到的错误似乎很奇怪-该代码在 Chrome 中有效吗？

# mysql - SQL 子选择语句使用 where 子句过滤

> ID：13054918
> 
> 赞同：2
> 
> 时间：2012-10-24T17:52:30.897
> 
> 标签：mysql

我正在构建仪表板，需要从一个有点复杂的模式中提取一些数据。

我有一个用于提取信息的 select 语句（见下文），但需要对部分 select 语句进行一些过滤，我正在努力。

```
select distinct j.id 'Job_Id'
        , js.outcome 'Outcome'
        ,(select string from property where parent_sheet_id = ps.id and name= 'Build_Type') as 'Build_Type' 
    from job j, job_step js, property_sheet ps, property p
    where j.id = js.job_id
    and ps.entity_id=js.id
    and ps.id=p.parent_sheet_id
    and ps.entity_type='step'
    and p.name = 'Id'
    group by j.id
    order by j.id desc; 
```

我确信有更好的方法来执行此查询，我将不胜感激任何其他建议，但我主要是尝试在嵌套选择语句上放置一个过滤器，它的别名为“Build_Type”，但是当我尝试它时似乎不起作用。我读过一些博客说这是不可能的，所以我有点卡住了。

任何帮助将非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:00:08.620

```
select 
ps.id,
Build_Type.string
from 
property_sheet as ps
left join 
property as Build_Type
on ps.id = Build_Type.parent_sheet_id and Build_Type.name = 'Build_Type'

where Build_Type.... 
```

# scala - Play 2 - Scala - 表单验证器和单选按钮

> ID：13054920
> 
> 赞同：4
> 
> 时间：2012-10-24T17:52:37.857
> 
> 标签：scala, playframework, playframework-2.0

我需要为这个模型渲染一个带有验证器的表单：

模型：

```
 case class Service (
        name: String, description: String, unitcost: Long,
            typo: Char, isactive: Char, modifiedby: String) 
```

控制器：

```
 import play.api.data.Form
    import play.api.data._
    import play.api.data.format.Formats._
    import play.api.data.Forms._

    object Services extends Controller {
....
....
    private val servicesForm[Service] = Form(
    mapping(
        "name" -> nonEmptyText.verifying(
            "validation.name.duplicate", Service.findByName(_).isEmpty),
        "description" -> nonEmptyText,
        "unitcost" -> longNumber,
        "typo" -> of[Char],
        "isactive" -> of[Char],
        "modifiedby" -> nonEmptyText
        ) (Service.apply)(Service.unapply)
    ) 
```

此代码在每个*[Char]*上都失败，说它需要 import play.api.data.format.Formats._ 但我是..

我的第二个疑问是如何为每个（错字和 isactive）思维放置一个单选按钮对该错字具有“M”和“A”之类的选项，而 isactive 具有“Y”和“N”。

PD：我认为在...之后使用持久性模型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T20:21:51.657

该错误表明 Form 不知道如何处理该`Char`类型。没有为该`Char`类型定义默认值。

要解决此问题，您有两种选择：

1.  将类型从 更改`Char`为存在`String`默认值`Formatter`
2.  `Formatter`为_`Char`

格式化程序看起来像这样（注意它没有正确的错误处理）

```
implicit val charFormat = new Formatter[Char] {
  def bind(key: String, data: Map[String, String]):Either[Seq[FormError], Char] = 
    data.get(key)
    .filter(_.length == 1)
    .map(_.head)
    .toRight(Seq(FormError(key, "error.required", Nil)))

  def unbind(key: String, value: Char) = Map(key -> value.toString)
} 
```

# types - Typed Racket 的类型推断是如何工作的？

> ID：13054923
> 
> 赞同：14
> 
> 时间：2012-10-24T17:53:00.960
> 
> 标签：types, racket, type-inference, typed-racket

Typed Racket 做了什么样的类型推断？我在 Racket 邮件列表中找到了以下片段：

> Typed Racket 类型系统包含许多超出 Hindley/Milner 类型系统所支持的功能，因此我们不能使用该推理系统。目前，Typed Racket 使用本地类型推断来推断程序中的许多类型，但我们希望推断更多类型——这是一个正在进行的研究领域。

上面的简介使用术语“本地类型推断”，我也听说过很多使用“出现类型”，但我不确定这些术语是什么意思。

在我看来，Typed Racket 目前使用的类型推断系统是不必要的弱。这是我的意思的一个例子。以下不类型检查：

```
(struct: pt ([x : Real] [y : Real]))

(define (midpoint p1 p2)
  (pt (/ (+ (pt-x p1) (pt-x p2)) 2)
      (/ (+ (pt-y p1) (pt-y p2)) 2))) 
```

您必须使用 显式注释`midpoint`，`(: midpoint (pt pt -> pt))`否则会出现错误：`Type Checker: Expected pt, but got Any in: p1`。为什么类型检查器不能由此得出`p1`and `p2` *must* be的类型`pt`？这是 Racket 实现类型的方式的基本限制（即，由于 Racket 的一些更高级的类型特性，这种推理有时实际上是*错误*的），还是将来可能会实现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T20:07:52.797

默认情况下，假定未注释的顶级函数具有输入和输出类型`Any`。我提供了这个模糊的解释：由于 Racket 的类型系统*非常*灵活，它有时可以推断出您不期望的类型，并允许某些程序在您可能希望它们发出类型错误时进行类型检查。

切线：`define:`如果适合您，您也可以使用表格。

```
(define: (midpoint [p1 : pt] [p2 : pt]) : pt
  ...) 
```

# html - 是否有类似黑莓的条件注释来验证网络应用程序中的特定元标记？

> ID：13054927
> 
> 赞同：2
> 
> 时间：2012-10-24T17:53:15.953
> 
> 标签：html, validation, web-applications, blackberry, meta-tags

我正在尝试通过 w3 验证...

因为`mobileIE`我可以使用条件注释来“隐藏”元标记，如下所示：

```
<!--[if IEMobile]>
<meta http-equiv="cleartype" content="on">
<meta http-equiv="imagetoolbar" content="false" />
<![endif]--> 
```

我的问题是黑莓的元数据，例如：

```
<meta http-equiv="x-rim-auto-match" content="none" /> 
```

这会强制数字成为数字并阻止 BB 将它们转换为电话号码。

**问题**：
是否有添加这些元标记的验证器证明方式？现在他们没有通过。有没有办法让他们通过？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T23:45:15.260

在**HTML5**中，您只能使用*a)*在 HTML5 规范中定义或*b)*在 WHATWG wiki 中注册的`name`值`http-equiv`。您可以在 wiki 中注册新值。

 ***   `name`值：[在规范中定义](http://www.w3.org/TR/html5/the-meta-element.html#standard-metadata-names)| [在 WHATWG wiki 中注册](http://wiki.whatwg.org/wiki/MetaExtensions)| [注册信息](http://www.w3.org/TR/html5/the-meta-element.html#other-metadata-names)
*   `http-equiv`值：[在规范中定义](http://www.w3.org/TR/html5/the-meta-element.html#pragma-directives)| [在 WHATWG wiki 中注册](http://wiki.whatwg.org/wiki/PragmaExtensions)| [注册信息](http://www.w3.org/TR/html5/the-meta-element.html#other-pragma-directives)**

# mysql - MySQL 中 DATE 的确切年份

> ID：13054928
> 
> 赞同：0
> 
> 时间：2012-10-24T17:53:24.630
> 
> 标签：mysql, database

我正在尝试获取至少 1950 年生日的人的姓名。

```
 SELECT Person.names...
 ..WHERE SELECT EXTRACT(YEAR FROM Person.dateOfBirth) => 1950; 
```

这个查询有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:54:33.627

该`YEAR()`函数将从`DATETIME`MySQL 中的字段返回年份作为整数。

```
SELECT Person.names FROM Person WHERE YEAR(Person.dateOfBirth) >= 1950; 
```

# javascript - 如何从.Net代码隐藏中获取数据到mixpanel（JavaScript）

> ID：13054930
> 
> 赞同：1
> 
> 时间：2012-10-24T17:53:32.707
> 
> 标签：javascript, .net, mixpanel

我见过的所有例子都是硬编码的。喜欢：

```
mixpanel.people.identify("12148"); 
```

如何用服务器端的值替换 12148？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:51:03.767

为什么不使用基于 .NET 的服务器端集成来进行某些跟踪操作呢？

例如，请参阅 Mixpanel.NET：

*   [NuGet 项目](http://nuget.org/packages/Mixpanel.NET)
*   [Github 项目](https://github.com/lucisferre/Mixpanel.NET)

它与[Mixpanels 的 API](https://mixpanel.com/docs/)集成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:35:22.237

好的。经过大量实验，我开发了自己的答案，并认为我会分享它，以便任何其他有相同问题的“菜鸟”都有资源......

首先 - 从数据库中检索数据（在服务器端）并将其放入隐藏字段（在客户端）。我是这样做的：（在页面加载事件中）（示例在 VB 中）

```
Dim User As New UserViewModel(Utilities.CurrentUserID) 
hdnUserID.Value = User.UserId
hdnEmail.Value = User.Email.ToString()
hdnFirstName.Value = User.FirstName.ToString()
hdnLastName.Value = User.LastName.ToString()
hdnMemberSince.Value = User.CreatedDate.ToString() 
```

客户端的隐藏字段如下所示：（我将它们放在页面的最底部）

```
<asp:HiddenField ID="hdnUserID" runat="server" />
<asp:HiddenField ID="hdnEmail" runat="server" />
<asp:HiddenField ID="hdnFirstName" runat="server" />
<asp:HiddenField ID="hdnLastName" runat="server" />
<asp:HiddenField ID="hdnMemberSince" runat="server" /> 
```

然后在客户端 Javascript（在头部）中，使用 <% * %> 方法引用隐藏字段中的值。

```
<script type="text/javascript">
    mixpanel.track("XXXXXXX.aspx Page Loaded");

    mixpanel.people.identify('<% = mxpUserID.Value %>');

    mixpanel.people.set({
        "UserID": '<% = mxpUserID.Value %>',
        "User Type": "Borrower",
        "$created": new Date(),
        "$last_login": new Date(),
        "$email": '<% = mxpEmail.Value %>',
        "First Name": '<% = mxpFirstName.Value %>',
        "Last Name": '<% = mxpLastName.Value %>',
        "Member Since": '<% = mxpMemberSince.Value %>'
    });
</script> 
```

这对我有用。MixPanels 文档在 dot.net 实施中缺乏（在我看来）任何真正的帮助。所以你有它。希望它可以帮助某人，某处，某个时间。

虽然这个问题和答案被标记为 mixpanel 并且与我尝试使用 mixpanel 相关，但问题的真正基础应该是；“如何在 .Net 中从数据库中获取数据，并使其可用于 JavaScript”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T15:35:49.747

只是想到了一个更好的方法。使用 StringBuilder 和 RegisterStartupScript。

```
Dim User As New UserViewModel(Utilities.CurrentUserID)
Dim strMixCommand As New System.Text.Stringbuilder()

strMixCommand.Append("mixpanel.track('XXXXXX.aspx Page Loaded');")
strMixCommand.Append("mixpanel.people.identify(" & User.UserID & ");"
strMixCommand.Append("mixpanel.people.set({ 'UserID':'" & User.UserID & "',"
strMixCommand.Append("'UserType':'Borrower',"
strMixCommand.Append("'$created':new Date(),"
strMixCommand.Append("'$last_login':new Date(),"
strMixCommand.Append("'$email':'" & User.Email.ToString() & "',"
strMixCommand.Append("'First Name':'" & User.FirstName.ToString() & "',"
strMixCommand.Append("'Last Name':'" & User.LastName.ToString() & "',"
strMixCommand.Append("'Member Since':'" & User.CreatedDate.ToString() & "'})"

Dim strScript As String = "<script type=""text/javascript"" language=""javascript"">" & strMixCommand & "</script>"

Me.ClientScript.RegisterStartupScript(Me.GetType, "Script", strScript) 
```

如果这是在页面加载时运行的，这将在服务器端生成 JavaScript，预先填充来自数据库的所需数据，而无需填充隐藏字段的中间步骤，或者在前端完全没有任何混合面板代码...

# bash - 用于解析 Bash 脚本的 Haskell 库？

> ID：13054933
> 
> 赞同：7
> 
> 时间：2012-10-24T17:54:01.770
> 
> 标签：bash, parsing, haskell

有人知道可以解析任意 Bash 脚本的 Haskell 库吗？

对 Hackage 的粗略搜索表明有一个`bash`需要*编写*脚本的包，但我没有看到任何可以*解析*它们的东西。

基本上，我刚刚收集了大量的 Bash 脚本，我想对其进行一些代码分析。但第一阶段显然是能够解析这些东西。

我个人不太了解 Bash。我想我*可以*坐下来阅读大量的手册页来获得完整的 BNF 语法。（我想它非常复杂，考虑到 shell 的悠久且向后兼容的历史。）我只是想知道是否其他人已经为我完成了这项工作......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T03:29:37.777

也许扩展[language-sh](http://hackage.haskell.org/package/language-sh)。

> Language.Sh 是用于在 shell 语法中解析和操作表达式的模块集合。这是一个更大的项目 shsh 的一部分。请注意，在我们达到 1.0 版之前，API 有点不稳定。

# mysql - 玩 2.0 复杂连接查询如何解析（异常）

> ID：13054935
> 
> 赞同：3
> 
> 时间：2012-10-24T17:54:13.410
> 
> 标签：mysql, database, scala, playframework-2.0, anorm

我正在使用 play 2.0 框架编写网站。解析结果时出现问题。这个对 mysql db 的请求会获取每集添加到数据库中的所有链接（每集可以有几个）以及关于剧集和动漫的所有信息。

```
 def lastReleasedLink(limit:Long=5):List[(((Episode,Anime),Link),Genre)] = {
    DB.withConnection { implicit c =>
      SQL(
        """
          select * from yas_episodes as a
          inner join anime as b on a.ep_anime_id=b.id
          left outer join yas_links as c on a.ep_id=c.ep_id
          LEFT JOIN yas_animes_genres AS d ON a.ep_anime_id = d.ag_anime_id
          INNER JOIN yas_genres AS e ON e.g_id = d.ag_genre_id
          where c.ep_id IS NOT NULL group by c.ep_id order by c.date desc limit {limit}
        """).on('limit ->limit)as(Episode.simple~Anime.simple~Link.simple~Genre.simple map{
        case episode~anime~link~genre => episode -> anime -> link -> Genre
      } *)
    }
  } 
```

返回值是类型，`List[(((Episode,Anime),Link),Genre)]` 但我如何才能将输出形成到让说 `List[episode,anime,Seq[links]]`或`List[episode,anime,Seq[Genres],Seq[links]]`不知道将流派放在哪里的列表中。

您可以想象，当您每集有两个链接时，表格anime 和yas_episodes 的信息将被复制到每一行。所以我需要按情节记录以某种方式将它们堆叠在一起（组）。然后就可以迭代列表并访问所有对象。

如您所见，在请求中，动画与流派之间存在多对多的关系。我不知道如何将所有内容放在一个列表中以便能够在视图中访问它。流派应该是动漫模型的一部分吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T08:22:24.093

似乎实现此目的的首选方法是使用 Scala 集合 API，请参阅Guillaume Bort 的[这篇文章](https://groups.google.com/forum/?fromgroups=#!topic/play-framework/Zfc4imYtpW8)。

在你的情况下，我认为你可以做类似的事情

```
lastReleasedLink groupBy { case (((e, a), l), g) => (e, a) } 
```

按（情节，动漫）分组。一般来说，如果您将函数更改为返回 a ，这些操作可能会更容易一些`List[(Episode, Anime, Link, Genre)]`，即

```
case episode~anime~link~genre => (episode, anime, link, genre) 
```

那么您可以使用以下代码实现相同的目的：

```
lastReleasedLink groupBy ((_._1, _._2)) 
```

# javascript - $location 在使用 d3.js 的 AngularJS 中不起作用

> ID：13054944
> 
> 赞同：10
> 
> 时间：2012-10-24T17:54:33.123
> 
> 标签：javascript, angularjs, d3.js

这是我第一次面对这个问题，不知道为什么。
我正在使用 d3 创建一个[冰柱图](http://msug.vn.ua/content/d3js/examples/partition/partition-icicle.html)。
有一个点击事件正在触发和调用`changePath()`。我看到控制台日志，这意味着我确实可以访问，`$location.path`但是当我尝试设置它时，什么也没有发生：不是新页面，不是错误页面，什么都没有！

如果我不通过角度更改路径，我的路由器将无法保持我正在寻找的范围。
有什么线索吗？

```
var parentCtrl = function($scope,$location){

$scope.makeBSC = 函数（）{

        var changePath = 函数（el）{
          控制台.log($location.path());
          $location.path(el)
        }
        变量宽度 = 405，
            高度 = 420，
            颜色 = d3.scale.category20c();

        var vis = d3.select("#bscChart").append("svg")
            .attr("宽度", 高度)
            .attr("高度", 宽度);

        var partition = d3.layout.partition()
            .size([宽度，高度])
            .value(function(d) { return d.size; });

        var json = 数据；

        vis.data([json]).selectAll("rect")
          .data(partition.nodes)
            .enter().append("矩形")
              .attr("y", function(d) { return dx; })
              .attr("x", function(d) { return dy; })
              .attr("身高", function(d) { return d.dx; })
              .attr("宽度", function(d) { return d.dy; })
              .attr("类",函数(d){
                如果（d.isSel）返回“rectBlue”
                返回“矩形灰色”
              }).on("点击", function(d){
                改变路径（d.goTo）；
         });
     }
}

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:53:18.277

强迫症不会让我把这个问题“开放”。所以，正如 groner 指出的那样......嗨，我想你会在这个问题中找到你问题的答案：[AngularJS $location not changed the path](https://stackoverflow.com/questions/11784656/angularjs-location-not-changing-the-path)

此外，还有一点价值广告。查看这些包装 d3 [http://www.fullscale.co/dangle/的指令](http://www.fullscale.co/dangle/)

# build - CoolReader 的 NDK 构建

> ID：13054946
> 
> 赞同：0
> 
> 时间：2012-10-24T17:54:35.890
> 
> 标签：build, android-ndk

我是 NDK 的新手，安装了 cygwin 并添加到路径文件夹中。从eclipse尝试通过项目上下文菜单>构建配置>构建选择构建时在控制台中出现以下错误。什么是**lvstring.h**。我正在使用 Windows 7、Java 7、日食靛蓝

```
**** Build of configuration Default for project CoolReader ****

E:\exe\android-ndk-r8b\ndk-build.cmd all 
Gdbserver      : [arm-linux-androideabi-4.6] libs/armeabi-v7a/gdbserver

Gdbsetup       : libs/armeabi-v7a/gdb.setup

Gdbserver      : [arm-linux-androideabi-4.6] libs/armeabi/gdbserver

Gdbsetup       : libs/armeabi/gdb.setup

Gdbserver      : [mipsel-linux-android-4.6] libs/mips/gdbserver

Gdbsetup       : libs/mips/gdb.setup

Gdbserver      : [x86-4.6] libs/x86/gdbserver

Gdbsetup       : libs/x86/gdb.setup

"Compile++ thumb : cr3engine-3-1-0 <= cr3engine.cpp

In file included from jni/cr3engine.cpp:15:0:
jni/cr3java.h:18:22: fatal error: lvstring.h: No such file or directory
compilation terminated.
make: *** [obj/local/armeabi-v7a/objs/cr3engine-3-1-0/cr3engine.o] Error 1

**** Build Finished **** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:22:41.257

问题已解决，似乎需要从项目的父文件夹编译本机代码。

实际上，repo 中有一些 lib 文件不在项目文件夹内，而是在项目文件夹外。所以 ndk build 抛出错误，一旦它被改变，它就会通过获取所有依赖项来编译

# deployment - Nexus 或 Artifactory 可以存储简单的 tar.gz 工件吗？

> ID：13054950
> 
> 赞同：31
> 
> 时间：2012-10-24T17:54:51.250
> 
> 标签：deployment, nexus, artifactory, artifacts

我的云服务器位于世界各地不同的数据中心。每个数据中心都与其他数据中心分开。

我正在寻找一种简单的方法将工件部署到每个这些区域中的各个服务器集群（可能运行不同版本的软件，即开发、测试和生产集群），轻松且一致。在我看来，我需要一个工件服务器，因为我可以在云服务器上执行一个安装脚本，它会拉下正确的软件工件。

现在，我在运营方面工作。我不关心进行构建或管理软件构建依赖项。我只是想要一个工件服务器，我可以在其中存储我的包的所有不同版本以供以后访问。更重要的是，我有几种不同类型的工件要存储。

*   外壳脚本
*   Python 脚本
*   木偶显现
*   Debian 文件（通常作为多个 debian 的 tar.gz 文件交付）

Nexus 或 Artifactory 可以管理所有这些类型的包，还是我应该换个方向？我不反对将 make 文件添加到仅生成 tar.gz 文件的 shell 脚本项目中。我只是不想走建立工件存储库的道路，最终，一点脚本、wget 和 apache 服务器就可以正常工作。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-26T07:33:33.667

**Artifactory**和**Nexus**都可以处理任何类型的文件，因为它们都是**“二进制存储库管理器”**。

尽管如此，Nexus 在技术上可以存储任何文件，但缺乏对不符合 Maven 存储库布局的二进制文件的支持。例如，此类文件不会被索引，也无法在搜索中检索到；此外，如果非 Maven 工件在其路径中阻碍了模块信息，那么目前 Artifactory 是唯一可以利用它并允许对工件进行基于版本的操作（例如，下载最新版本查询）的存储库

尽管这两个工具都是从解决[Maven](http://maven.apache.org/)世界中的一个问题开始的，但智能二进制管理的需求已经在许多其他领域得到认可，[*包括操作*](http://wiki.jfrog.org/confluence/display/RTF/YUM+Repositories)。

二进制文件确实需要一个专门的管理器，尽管**网络共享/SCM/文件服务器**在一开始似乎是一个可行的选择；他们只是**不缩放**。

另请参阅[我对类似问题的回答，](https://stackoverflow.com/questions/11513360/is-it-good-idea-to-store-python-package-eggs-in-artifactory/11516508#11516508)了解经理相对于其他临时解决方案的一些好处。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T18:25:22.817

是的，您可以上传非 jar 文件。例如：

```
mvn deploy:deploy-file -DgroupId=org.group.id -DartifactId=artifact-id -Dversion=0.0.0.1-SNAPSHOT -Dpackaging=tar.gz -DrepositoryId=repository-id -Durl=http://url -Dfile=localfile-0.0.0.1-SNAPSHOT.tar.gz 
```

较新版本的 Nexus 将通过验证它们的正确格式来处理某些文件，如 tar、swf 和其他文件。但是，这可能会导致意外或不需要的行为。

这是最好的方法吗...只有您可以根据您的用例说。诸如工件更改频率、网络延迟等因素可以制定或破坏策略。

参考：

[https://stackoverflow.com/a/33311645/32453](https://stackoverflow.com/a/33311645/32453)

[http://betterlogic.com/roger/2012/04/mavennexus-upload-tgztar-gz-file/](http://betterlogic.com/roger/2012/04/mavennexus-upload-tgztar-gz-file/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-23T13:19:19.503

如果你想用 curl 来做，试试这个方法： https: [//support.sonatype.com/entries/22189106-How-can-I-programatically-upload-an-artifact-into-Nexus-](https://support.sonatype.com/entries/22189106-How-can-I-programatically-upload-an-artifact-into-Nexus-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-03T18:58:13.263

您可以（请参阅其他答案）。您也可以像这样引用它们（尽管一个例子会很好）：

您可以像这个插件一样参考/使用它们：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <executions>
      <execution>
        <id>copy</id>
        <phase>package</phase>
        <goals>
          <goal>copy</goal>
        </goals>
        <configuration>
          <artifactItems>
            <artifactItem>
              <groupId>org.apache</groupId>
              <artifactId>activemq-distro</artifactId>
              <version>5.7.0</version>
              <type>gz</type>
              <overWrite>true</overWrite>
              <outputDirectory>${project.build.directory}</outputDirectory>
            </artifactItem>
          </artifactItems>
          <!-- other configurations here -->
        </configuration>
      </execution>
    </executions>
  </plugin> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-15T16:03:38.910

**Nexus 3**的解决方案。

首先在*Nexus*中创建一个**原始**存储库： *[![Nexus 管理控制台](../Images/f8528fd76e3b34a46426ebfdcc6d315e.png)](https://i.stack.imgur.com/beqHL.png)*

 *然后，您可以在**Maven**中或通过**curl**例如使用它。

**通过curl**的示例：

 **```
curl -v --user '$NEXUS_REGISTRY_USER:$NEXUS_REGISTRY_PASSWORD' --upload-file ./my_artifact.tar.gz $NEXUS_GENERAL_REPOSITORY_URL/general-raw/my-project/my_artifact.tar.gz 
```

更多信息[在这里](https://help.sonatype.com/repomanager3/formats/raw-repositories)。***

# mysql - 如何在 mvc4 代码优先应用程序中使用 MySQL 成员资格？

> ID：13054956
> 
> 赞同：2
> 
> 时间：2012-10-24T17:55:06.830
> 
> 标签：mysql, ef-code-first, asp.net-mvc-4, asp.net-membership, membership-provider

我是 MVC 和 MySQL 的新手。我在带有 MySQL 的 MVC 4 中有代码优先应用程序。

```
public class Category
{
    [Key]
    public int ID { get; set; }
    public string Name { get; set; }

    public virtual IEnumerable<Product> Products { get; set; }

}

public class Product
{
    [Key]
    public int ID { get; set; }
    public string Name { get; set; }
    public DateTime CreateDate { get; set; }
    public int CategoryID { get; set; }

    public virtual Category Category { get; set; }
}

public class MyContext : DbContext
{
    public DbSet<Product> Products { get; set; }
    public DbSet<Category> Categories { get; set; }
} 
```

在 web.config 中：

```
 <connectionStrings>
    <add name="MyContext" connectionString="server=localhost;  User Id=root;  Pwd=mypass;  Persist Security Info=True;  database=catalogue" providerName="MySql.Data.MySqlClient " />
  </connectionStrings> 
```

因此，这会在 mysql 中创建**目录数据库。**但我也想使用**mysql 的成员资格**。注册、创建用户和管理他们的角色。例如，**使用 mvc4 的默认 AccountModels**

我将此代码添加到 web.config：

```
<system.web>

    <membership defaultProvider="MySQLMembershipProvider">
          <providers>
            <clear />
            <remove name="MySQLMembershipProvider" />
            <add name="MySQLMembershipProvider" type="MySql.Web.Security.MySQLMembershipProvider, MySql.Web, Version=6.5.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" applicationName="/" description="MySQL default application" connectionStringName="LocalMySqlServer" writeExceptionsToEventLog="True" autogenerateschema="True" enablePasswordRetrieval="True" enablePasswordReset="True" requiresQuestionAndAnswer="False" requiresUniqueEmail="False" passwordFormat="Clear" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="1" passwordAttemptWindow="10" passwordStrengthRegularExpression="" />
          </providers>
        </membership>

        <profile defaultProvider="MySQLProfileProvider">
          <providers>
            <clear />
            <remove name="MySQLProfileProvider" />
            <add name="MySQLProfileProvider" type="MySql.Web.Profile.MySQLProfileProvider, MySql.Web, Version=6.5.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" applicationName="/" description="Profiles" connectionStringName="LocalMySqlServer" writeExceptionsToEventLog="False" autogenerateschema="True" />
          </providers>
        </profile>

        <roleManager enabled="false" defaultProvider="MySQLRoleProvider">
          <providers>
            <clear />
            <remove name="MySQLRoleProvider" />
            <add name="MySQLRoleProvider" type="MySql.Web.Security.MySQLRoleProvider, MySql.Web, Version=6.5.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" applicationName="/" description="Project Roles" connectionStringName="LocalMySqlServer" writeExceptionsToEventLog="True" autogenerateschema="True" />
          </providers>
        </roleManager>

  </system.web> 
```

运行应用程序时出现此错误：

![在此处输入图像描述](../Images/1deb2edc35d6b6bb67ee613ba54db1bc.png)

我忘记了哪一步？我不能使用会员。

（抱歉英语不好）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T03:06:10.000

如果您想要使用 VS2010 或 VS2012 的 MVC4 Internet 模板附带的 Membership Provider，以及 SQL Server 系列以外的数据库，即 SQL Server、SQL Compact 和 Azure，我认为这是不可行的，因为 MVC4 使用SimpleMembership 提供程序，它不是数据库无关的。

话虽如此，但这并不意味着你无法实现你想要的。我建议使用 Microsoft ASP.NET Universal Providers Core Libraries。我建议您阅读这篇出色的[帖子](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)

现在在这篇文章中，作者 Scott Hanselman 提到了以下内容

> 使用这些通用的“默认配置文件提供程序”意味着您所要做的就是设置正确的连接字符串，并且使用这些服务的应用程序将与 SQL Server（加上 Express）、SQL Server Compact 和 SQL Azure 一起使用，而无需您更改代码。

嗯，其他 SQL 标准怎么样？，让我们按照这些步骤，

1) 确保首先更改连接字符串，然后使用 Nuget 包管理器安装 MySQL.Web 和 MySQL.Data。

```
 <connectionStrings>
      <add name="MySQLConn" connectionString="Server=localhost;Database=dbname;Uid=dbuser;Pwd=dbpass;" />
    </connectionStrings> 
```

2) 使用 Nuget 包管理器找到并安装“Microsoft ASP.NET Universal Providers Core Libraries”或在包管理器控制台中运行以下命令，

```
Install-Package system.web.providers
Install-Package Microsoft.AspNet.Providers.Core 
```

3) 转到项目菜单 -> ASP.Net 配置，您将在浏览器中看到您的 Web 项目的 ASP Net 管理工具。

4）然后转到提供商选项卡，转到“为每个功能选择不同的提供商（高级）”

5) 确保选择 MySQL Membership Provider。

6）然后转到安全选项卡，并创建一些您认为对您的项目必要的角色和用户。 **[如果由于某种原因您在此处遇到错误，请尝试更改您的 Web 配置，并将](http://pastebin.com/w7tNCiq2)****Membership、Role 和 Profile 替换为**

7）享受！

我希望这有帮助

PS：我对此也很陌生，所以我愿意接受有关针对其他 SQL 数据库的 MVC4 最佳会员提供程序的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T01:20:25.647

作为旁注，您不能使用与 VS2010 或 VS2012 的 ASP Net MVC3 或 MVC4 的 Internet 模板相同的帐户控制器。尽管您必须自己实现所有这些。

如果您想为登录/注销/角色管理/创建用户等快速添加 MVC 模板，您可以使用例如[安全卫士。](http://www.mvccentral.net/Story/Details/tools/kahanu/securityguard-nuget-package-for-asp-net-membership)

我提出的方法不是补丁，也不是骇客，ASP Net Membership Provider 由微软长期实施和推广，MySQL 将功能添加到网络。连接器，他们甚至发布了关于它的信息。**[这里](http://dev.mysql.com/doc/refman/5.1/en/connector-net-tutorials-asp-roles.html)**

所以不要害怕，你可以安全地使用这个方法，除非有强烈的反对使用 ASP Net Membership Provider 的论据，我不知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-06T00:51:36.513

这取自 GridWizzard - 您只需在 appsettings 下将 enableSimpleMembership 设置为 false，[http ://gridwizard.wordpress.com/2014/03/05/asp-net-mvc4-just-get-it-running-without-having- to-implement-membershiproleprovider/](http://gridwizard.wordpress.com/2014/03/05/asp-net-mvc4-just-get-it-running-without-having-to-implement-membershiproleprovider/)

# ruby-on-rails - Rails：应用程序失败但代码在控制台中运行良好

> ID：13054957
> 
> 赞同：1
> 
> 时间：2012-10-24T17:55:10.663
> 
> 标签：ruby-on-rails, ruby

控制器中的相关代码如下：

```
 logger.info("Dumping params")
    logger.info(params)
    logger.info("Dumping initial cost:")
    logger.info(@cost)
    logger.info("entering if statement")
    if params.has_key?("special_edition") && params["special_edition"] == 'yes'
      @cost = @cost + 50000
    end
    logger.info("If we get to here then the first conditional executed correctly")
    if params.has_key?("number_of_lids") && params["number_of_lids"].to_i > 0
      @cost = @cost + (params["number_of_lids"].to_i * 5000)
    end
    logger.info("If we get to here then the second conditional executed correctly")
    logger.info("printing final cost:")
    logger.info(@cost) 
```

当我运行该应用程序时，我收到 500 错误。签入日志文件（测试日志文件），我看到以下内容：

```
Dumping params
{"utf8"=>"✓", "special_edition"=>"yes", "number_of_lids"=>"3", "action"=>"create"}
Dumping initial cost:
350000
entering if statement
Completed 500 Internal Server Error in 1922ms 
```

如果我进入控制台（rails 控制台），并运行此代码（取自日志文件的值：

```
params = {"utf8"=>"✓", "special_edition"=>"yes", "number_of_lids"=>"3", "action"=>"create"}
@cost = 350000
if params.has_key?("special_edition") && params["special_edition"] == 'yes'
    @cost = @cost + 50000
end
if params.has_key?("number_of_lids") && params["number_of_lids"].to_i > 0
    @cost = @cost + (params["number_of_lids"].to_i * 5000)
end 
```

然后我得到@cost 的正确结果：415000

任何想法为什么我可能会收到 500 错误？

# 澄清：

几个回复提到不同之处在于，不同之处在于我正在初始化@cost，但没有在控制器中进行。不包括初始化 @cost 的代码，因为它已经正确初始化。我包含了将@cost 记录到日志文件的一段代码，并使用我从日志文件中为@cost 获得的值在控制台中对其进行初始化（请参阅我的代码，第 3 行和第 4 行，然后是日志文件第 3 行和第 4 行）

我尝试使用评论功能，但 stackoverlfow 给了我一条错误消息。

# 解析度

事实证明，应用程序中的另一个模块正在读取 interget @cost 并将其转换为字符串。这被应用程序中的另一个错误所掩盖，因此之前的测试失败了。故事的寓意：回归测试是必不可少的。使用 @cost.to_i 解决了问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:00:59.657

显式@cost 初始化的区别。写`@cost = 350000`在你的控制器动作的开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T18:03:09.697

试试看嘛

```
if params.has_key?(:special_edition) && params[:special_edition] == "yes" 
```

如果错误仍然存​​在，只需通过分配值或使用 to_i 方法检查 @cost 是否为整数。

# jquery - jQuery滚动到使用滚轮

> ID：13054958
> 
> 赞同：2
> 
> 时间：2012-10-24T17:55:15.333
> 
> 标签：jquery, parallax, jquery-easing

所以我试图掌握如何让一个函数工作的开始，而不仅仅是看到插件按照我的要求工作。例如[，此](http://speckyboy.com/wp-content/uploads/2012/02/scroll_to_internal_link_with_jquery.html)插件在单击导航中的那些 div 链接时会“跳转到”。我想要的是当你到达 div 的某个部分时，它会跳转到 div 的其余部分。从而完全切掉导航栏，但利用缓动到达文章/照片的其余部分等。

目前我正在使用[Richard Shepard](http://coding.smashingmagazine.com/2011/07/12/behind-the-scenes-of-nike-better-world/)的视差脚本，我想扩展脚本以使用 backgroundPosition: 坐标来触发滚动到事件。

为方便起见，我粘贴了他的代码。

PS所有这些代码都在“应该”工作，它在div之间缺乏缓动，目前我在安装 jquery.easing 。

PPS 然而，我不确定我需要从哪里开始。所以，我想从已经在页面上获取用户位置的功能开始。

```
// On your marks, get set...
$(document).ready(function(){
console.log("loaded parallax");

// Cache the Window object
$window = $(window);

// Cache the Y offset and the speed of each sprite
$('[data-type]').each(function() {
    $(this).data('offsetY', parseInt($(this).attr('data-offsetY')));
    $(this).data('Xposition', $(this).attr('data-Xposition'));
    $(this).data('speed', $(this).attr('data-speed'));
});

// For each element that has a data-type attribute
$('section[data-type="background"]').each(function(){

    // Store some variables based on where we are
    var $self = $(this),
        offsetCoords = $self.offset(),
        topOffset = offsetCoords.top;

    // When the window is scrolled...
    $(window).scroll(function() {

        // If this section is in view
        if ( ($window.scrollTop() + $window.height()) > (topOffset) &&
             ( (topOffset + $self.height()) > $window.scrollTop() ) ) {
            // console.log("scrolling background");

            // Scroll the background at var speed
            // the yPos is a negative value because we're scrolling it UP!
            var yPos = -($window.scrollTop() / $self.data('speed'));

            // If this element has a Y offset then add it on
            if ($self.data('offsetY')) {
                yPos += $self.data('offsetY');
            }

            // Put together our final background position
            var coords = '50% '+ yPos + 'px';

            // Move the background
            $self.css({ backgroundPosition: coords });

            // Check for other sprites in this section
            $('[data-type="sprite"]', $self).each(function() {

                // Cache the sprite
                var $sprite = $(this);

                // Use the same calculation to work out how far to scroll the sprite
                var yPos = -($window.scrollTop() / $sprite.data('speed'));
                var coords = $sprite.data('Xposition') + ' ' + (yPos + $sprite.data('offsetY')) + 'px';

                $sprite.css({ backgroundPosition: coords });

            }); // sprites

        }; // in view

    }); // window scroll

}); // each data-type

}); // document ready 
```

这是我的代码在 // 如果此部分在视图部分中的开头：

```
 var windowheight = jQuery(window).height();
                // console.log(yPos);

                if (Math.abs(yPos) > windowheight/2) {
                    console.log("scrollto");
                    jQuery('#fourth').ScrollTo();
                } 
```

# vba - 跨多个工作表的 VBA 宏

> ID：13054960
> 
> 赞同：11
> 
> 时间：2012-10-24T17:55:26.517
> 
> 标签：vba, excel, excel-2007

我正在尝试运行一个在多个工作表上执行功能的宏。假设我在工作表 4 上分配了宏按钮。我已经列出了我希望它逐步执行的功能：

1) 选择工作表 4 中的某些单元格并复制到工作表 4 中的相邻单元格。
2) 删除工作表 3 中的单元格
范围。 3) 剪切工作表 2 中的单元格范围，然后将此单元格范围粘贴到工作表 3 中。
4) 取范围将单独工作簿中的单元格复制到工作表 2 中。（我知道这是一个完全不同的问题，因为工作簿是自动发布的，我必须找到一种方法来链接两者。）
5）更新位于工作表 4 中的数据透视表和工作表 3。

我很想获得有关前 3 个功能的帮助。我在下面粘贴了我当前的代码。

```
Sub START()

Dim sh1 As Worksheet
Dim sh2 As Worksheet
Dim sh3 As Worksheet
Dim sh4 As Worksheet

Set sh1 = ActiveWorkbook.Sheets("Brand")
Set sh2 = ActiveWorkbook.Sheets("CurrentWeek")
Set sh3 = ActiveWorkbook.Sheets("PriorWeek")
Set sh4 = ActiveWorkbook.Sheets("Pivot")

sh4.Range("B29:B30").Select
Selection.Copy

sh4.Range("C29").Select
ActiveSheet.Paste

sh3.Range("A4:AC1000").Select
Selection.Delete

sh2.Range("A4:AC1000").Select
Selection.Copy

sh3.Range("A4").Select
ActiveSheet.Paste

End Sub 
```

它有效......但它仅在我在正确的工作表中执行特定功能时才有效。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-24T18:01:02.503

通过删除`select`、`selection`和`activesheet`，您将能够使此工作表独立

```
Sub START()

Dim sh1 As Worksheet
Dim sh2 As Worksheet
Dim sh3 As Worksheet
Dim sh4 As Worksheet

Set sh1 = ActiveWorkbook.Sheets("Brand")
Set sh2 = ActiveWorkbook.Sheets("CurrentWeek")
Set sh3 = ActiveWorkbook.Sheets("PriorWeek")
Set sh4 = ActiveWorkbook.Sheets("Pivot")

sh4.Range("B29:B30").Copy sh4.Range("C29")

sh3.Range("A4:AC1000").Delete

sh2.Range("A4:AC1000").Copy sh3.Range("A4")

End Sub 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T18:01:01.420

你有一个很好的开始。再细化一点，你就会拥有它。

`.Select`基本上，至少在这种情况下，不需要您的范围（工作表、工作簿等）。您可以直接使用它们，并使用`Copy`将复制它们的目标提供。

请参见下面的代码：

```
Sub START()

Dim sh1 As Worksheet
Dim sh2 As Worksheet
Dim sh3 As Worksheet
Dim sh4 As Worksheet
Dim wkb As Workbook

Set wkb = Workbooks("wkbName") '-> best to call workbooks by name, as opposed to "ActiveWorkbook", also best to set it to object

With wkb '-> now we can work with this object directly and succinctly

    Set sh1 = .Sheets("Brand")
    Set sh2 = .Sheets("CurrentWeek")
    Set sh3 = .Sheets("PriorWeek")
    Set sh4 = .Sheets("Pivot")

    sh4.Range("B29:B30").Copy sh4.Range("C29")

    'sh3.Range("A4:AC1000").Delete -> you don't need this if you are overwritting it

    sh2.Range("A4:AC1000").Copy sh3.Range("A4")

End With

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-01T18:43:32.933

sheet("name1").range("B29:B30").copy Destination:=sheets("name2").range("C29")

假设工作表名称为 name1 和 name2，将从一个工作表复制到另一个工作表

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-07-20T10:16:30.107

```
Sub START()

Sheet("Pivot").Range("B29:B30").Copy Sheet("Pivot").Range("C29")
Sheet("CurrentWeek").Range("A4:AC1000").Copy Sheet("PriorWeek").Range("A4")

End Sub 
```

# c++ - 骑士巡演。选择容器

> ID：13054964
> 
> 赞同：2
> 
> 时间：2012-10-24T17:55:43.320
> 
> 标签：c++, knights-tour

我最近一直在阅读 C++，尤其是 STL，我决定再做一次骑士巡回赛的问题。我正在考虑实现这一点的最佳方法，我正在寻求帮助。

只是为了好玩和练习，我想我会从一个“Piece”基类开始，“Knight”类可以从中继承。我想这样做，以便稍后我可以尝试添加其他部分（即使大多数部分无法遍历整个电路板并完成问题）。

因此，“棋子类”将需要某种容器来存储棋子在棋盘上的坐标以及它在该特定步骤中所做的移动次数。

我想我需要一个包含 64 (8 * 8) 个位置的链表来最有效地执行此操作，其中包含 x、y 和移动。

查看 STL 容器，除了可以容纳一种以上类型的 map 之外，我找不到任何东西。

我可以做些什么来存储坐标对和一个容器中移动次数的 int？有比使用矢量、列表或地图更有效的方法吗？我需要自定义容器吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:01:33.240

您可以使用

```
struct CellInfo
{
    int x, y, move_count;
} 
```

并将其存储起来以`std::vector`供持续访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:41:19.037

C++ STL 现在也有静态数组。如果要存储给定 x,y 坐标移动到的次数，可以创建一个数组数组，如下所示：

```
using container_type = std::array<std::array<int, 8>, 8>;

// ...

container_type c;
int moves = c[x][y]; // constant-time access. 
```

如果您不需要基于 x,y 查找向上移动，并且只想有效存储数据，请使用大小为 8x8 = 64 的平面数组。

如果您的编译器已过时，请考虑改用 std::vector。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T18:06:23.133

除了 STL 和封装之外，一个非常有效的方法是使用数组：

```
pair<int, int> piece_pos[N];
int piece_move[N]; 
```

这避免了内存泄漏的开销，并且比动态分配更快。

如果你想使用 STL，那么：

```
vector<pair<int, int> > piece_pos(N);
vector<int> piece(N); 
```

# python - 如何在 Python 中打印模块文档

> ID：13054970
> 
> 赞同：39
> 
> 时间：2012-10-24T17:56:08.947
> 
> 标签：python, python-2.7

我知道这个问题很简单，我知道它一定被问了很多次，我在 SO 和 Google 上都进行了搜索，但我找不到答案，可能是因为我缺乏将我所寻求的东西放入的能力一个适当的句子。

我希望能够阅读我导入的文档。

例如，如果我通过“import x”导入 x，我想运行这个命令，并用 Python 或 ipython 打印它的文档。

这个命令功能是什么？

谢谢你。

PS。我不是指 dir()，我指的是实际打印文档以供我查看和阅读此模块 x 具有哪些功能等的函数。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-24T18:00:01.293

您可以使用`.__doc__`功能模块的属性：

```
In [14]: import itertools

In [15]: print itertools.__doc__
Functional tools for creating and using iterators..........

In [18]: print itertools.permutations.__doc__
permutations(iterable[, r]) --> permutations object

Return successive r-length permutations of elements in the iterable.

permutations(range(3), 2) --> (0,1), (0,2), (1,0), (1,2), (2,0), (2,1) 
```

在内置模块和我们自己的模块上都可以正常`help()`工作：`__doc__`

文件：foo.py

```
def myfunc():
    """
    this is some info on myfunc

    """
    foo=2
    bar=3

In [4]: help(so27.myfunc)

In [5]: import foo

In [6]: print foo.myfunc.__doc__

     this is some info on func

In [7]: help(foo.myfunc)

Help on function myfunc in module foo:

myfunc()
    this is some info on func 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-24T17:57:33.207

`pydoc foo.bar`从命令行`help(foo.bar)`或`help('foo.bar')`Python。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-27T18:05:03.040

您可以使用`help()`函数来显示文档。或者您可以选择`method.__doc__`描述符。

例如：`help(input)`将提供有关 input() 方法的文档。

# windows - 在 Windows XP 中从资源管理器打开西里尔文文件路径的问题

> ID：13054971
> 
> 赞同：1
> 
> 时间：2012-10-24T17:56:15.010
> 
> 标签：windows, command-line, windows-xp, cmd, file-type

操作系统：Windows XP SP3

尝试定义命令以从上下文菜单或直接从资源管理器打开某些文件类型并遇到以下问题：

*   如果文件位于包含西里尔文（非 ASCII）字符的目录中，则标准`"C:\Program Files\SQLite ODBC Driver\sqlite3.exe" "%1"`不起作用；
*   命令`"C:\Program Files\SQLite ODBC Driver\sqlite3.exe" "%~s0"`不起作用，因为不幸的是指定的参数模板仅适用于批处理文件；
*   使用先前命令创建批处理文件的变体是丑陋且不实用的。

是否有正确或方便的方法来打开路径中包含非 ASCII 字符的文件？我的意思是没有丑陋的魔法。

**更新：**

我认为这种`"C:\Dir one\0016~1\file.sqlite"`格式会起作用。

`%L`钥匙也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:33:02.533

找到了解决方案。仍然丑陋，但它达成了交易。

> ...使用了如下命令：
> 
> `short.cmd "myapp.exe" "%1"`
> 
> where`short.cmd`包含该行
> 
> `start %~s1 %~s2`
> 
> 然后，这会将应用程序名称和文件名转换为短版本，并根据需要执行 - 但有一个命令窗口会在其中短暂弹出（运行 START 命令）

链接：[上下文菜单外壳命令 %1、%L 参数](http://www.pcreview.co.uk/forums/context-menu-shell-commands-1-l-parameters-t421320.html)

# c# - 更改代码后，不先删除缓存，.Net网站不会出现

> ID：13054972
> 
> 赞同：1
> 
> 时间：2012-10-24T17:56:19.743
> 
> 标签：c#, asp.net, .net

我有一个带有 C# 代码的 .Net 网站。

当我对网站（在我的本地计算机上）进行编码更改，并将文件（.dll 和 .aspx 文件通过 Windows 资源管理器使用 ftp 复制）到服务器（由 GoDaddy 托管）时，如果不清除首先浏览器缓存。它发生在 IE、Firefox 和 Chrome 中。

有谁知道为什么会发生这种情况以及如何解决这个问题？（仅供参考 - 不确定是否重要，但该网站有一个 SQL 数据库，该网站是[http://www.fonyfacts.com/](http://www.fonyfacts.com/)）感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:17:22.183

一旦你上传了一个新的 DLL，你的网站就会被回收，并且可能需要几秒钟到更多的时间才能重新开始——这是正常的。当其他一些文件也被更改时，也会发生这种情况，例如 web.config。就像斯坦尼斯拉夫说的那样；在本地构建，并且仅在您准备好运行它时才上传。

# bash - 着色文本

> ID：13054973
> 
> 赞同：3
> 
> 时间：2012-10-24T17:56:19.930
> 
> 标签：bash

如何使用 Bash 显示彩色文本？

*   `a`：棕色背景上的白色文字
*   `b`: 黄色背景上的黑色文字

 **```
echo -e "bbb aaa bbb" 
```

和

```
echo -e "aaa bbb aaa" 
```

我的结果不好:-(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T18:05:14.537

```
# text
black='\e[0;30m'
white='\e[0;37m'
yellow='\e[0;33m'

# background
white_bg='\e[47m'

echo -e "${black}black test"
echo -e "${white_bg}white bg and black test"
echo -e "${yellow}yellow test" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T18:10:21.087

您可以在您的`~/.bashrc`

```
txtblk='\e[0;30m' # Black - Regular
txtred='\e[0;31m' # Red
txtgrn='\e[0;32m' # Green
txtylw='\e[0;33m' # Yellow
txtblu='\e[0;34m' # Blue
txtpur='\e[0;35m' # Purple
txtcyn='\e[0;36m' # Cyan
txtwht='\e[0;37m' # White 
```

之后您可以使用`echo`：

```
echo -e "${txtred}asd${txtwht}" 
```

[在这里](https://wiki.archlinux.org/index.php/Color_Bash_Prompt#List_of_colors_for_prompt_and_Bash)您可以找到更多颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-14T14:24:10.673

以下是使用 tput 的方法：

```
txtblk=$(tput setf 0) # Black - Regular
txtred=$(tput setf 4) # Red
txtgrn=$(tput setf 2) # Green
txtylw=$(tput setf 6) # Yellow
txtblu=$(tput setf 1) # Blue
txtpur=$(tput setf 5) # Purple
txtcyn=$(tput setf 3) # Cyan
txtwht=$(tput setf 7) # White 
```

但是将其保存到的方法`.bashrc`是不可取的，因为在`-t test`失败时禁用颜色是一种很好的做法。

所以一个更好的方法是有一个像这样的文件：

```
[[ -t 1 ]] || export TERM=dumb
txtblk=$(tput setf 0) # Black - Regular
txtred=$(tput setf 4) # Red
txtgrn=$(tput setf 2) # Green
txtylw=$(tput setf 6) # Yellow
txtblu=$(tput setf 1) # Blue
txtpur=$(tput setf 5) # Purple
txtcyn=$(tput setf 3) # Cyan
txtwht=$(tput setf 7) # White 
```

并在您需要颜色时获取它。`tput`将在哑终端上放置零长度字符串，只要标准输出不是终端。所以：

`./my-script`将打印颜色，但`./my-script | grep foo`不会将颜色代码发送到`grep`.**

# rss - 来自 Google 的 RSS 提要

> ID：13054981
> 
> 赞同：-7
> 
> 时间：2012-10-24T17:56:47.323
> 
> 标签：rss

我正在使用 Telerik 控件，它需要我输入 XmlDataSource。

我喜欢做的是获取与“肺病”相关的新闻的 Google RSS Feed

我该怎么做呢？我如何获得这个的 xml url？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-24T19:26:22.107

这可以通过转到 Google 新闻并输入搜索内容来完成。在底部，有一个`Create Alert`按钮。单击它以获取 RSS 链接。

# git - 共享 git repo 以从上游合并/更新代码

> ID：13054985
> 
> 赞同：0
> 
> 时间：2012-10-24T17:57:10.407
> 
> 标签：git

我有一个 git 项目，它是一个子模块，需要从上游更新。有两个开发人员在这个子模块上工作，我和另一个人。

使用 git pull 的更新需要我们解决合并冲突。我知道代码的一部分，他知道另一部分，所以要解决合并，我们需要坐在一起或找到另一种方法来完成。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:19:31.217

我建议尝试使用

```
git pull --rebase 
```

这将允许您管理较小的块并查看哪些特定的提交导致了麻烦，此外它还将简化您的历史记录。它将代码差异简化为每个单独提交的级别，因此应该足够简单，以便你们中的任何人对哪些行是正确的做出假设。然后我会建议推回 rebase 的结果并让其他开发人员查看生成的代码。最后当然是测试它

# iphone - 在静态 TableView 中的 UITextfield 中禁用编辑 - 仅限 iOS 6.0

> ID：13054986
> 
> 赞同：1
> 
> 时间：2012-10-24T17:57:14.540
> 
> 标签：iphone, ios, uitableview, uitextfield, ios6

我在一个静态 TableView（在 Storyboard 中）中有两个 UITextFields 用于登录。第一次通过模态 segue 进入 tableView，TextFields 应该是可编辑的。当我再次来回查看该视图时，TextField 似乎不可编辑。如果我读出`textField.isEnabled`，它被设置为 YES。更奇怪的是：这种行为仅适​​用于 iOS 6.0。在 iOS 5.0 上一切正常。

我已经在 viewWillAppear TextField.userInteractionEnabled = YES;

我还注释掉了我所有的 viewDidLoad 和 viewWillAppearCode，但仍然无济于事。

欢迎任何想法。

![在此处输入图像描述](../Images/c57e24594586a7784b41fe8a6c21f485.png)

编辑：关闭并重新启动应用程序后，我又一次成功了。一旦我打开和关闭视图，我看起来好像有什么东西被搞砸了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T07:31:19.383

实际上，在与另一个视图进行来回切换后，我的 TextFields 在一个视图中无法编辑，我实际上遇到了一个非常相似的问题。对我来说，这是第一响应者状态的问题，在 prepareForSegue 中添加以下内容后，事情开始正常运行：

```
[self.textFieldName1 resignFirstResponder]; 
```

希望有帮助。

# css - 初学者关于CSS定位的疑问

> ID：13054988
> 
> 赞同：2
> 
> 时间：2012-10-24T17:57:19.920
> 
> 标签：css

我试图通过为`<div>`相对位置属性提供 CSS 选择器以及与左边缘和上边缘的距离来移动框。问题是它不起作用。

选择器显然正在工作，因为如果我取消注释可见性属性，图像就会被隐藏。这里有什么问题？

**HTML**：

```
<body>
  <div id="test_logo">
    <img src="http://uselessproducts.weebly.com/uploads/5/2/5/5/5255421/_6517253_orig.jpg" height="100" width="100"/>
    <span id="test_logo_title">test</span>
  </div>
</body> 
```

**CSS：**

```
* { margin:0px; padding:0px; }

html {
    font-family: Verdana, "Lucida Sans Unicode", Arial;
    font-size: 9px;
}

body {
    margin: 9px 0 0;
    background-color: #f37062;
    font-size: 100%;
}

#test_logo {
    /*visibility: hidden;*/
    position: relative;
    left: 100 px;
    top: 200 px;
} 
```

**[jsFiddle 链接](http://jsfiddle.net/r9x5A/1/)**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T17:59:37.940

您只需要删除之前的空格`px`：

```
#test_logo {
    position: relative;
    left: 100px;
    top: 200px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T17:59:44.833

去掉左边的空格：和顶部：#test_logo 中的规范，你应该像雨一样正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T18:00:18.737

这是修改后的 CSS，我认为这应该可以解决您的问题，您可以调整 #logo 的填充以从顶部和侧面满足您的空间需求。

```
* {margin:0px; padding:0px;}

html{
    font-family: Verdana, "Lucida Sans Unicode", Arial;
    font-size: 9px;
}

body{
    margin: 0 auto;
    background-color: #a37062;
    font-size: 100%;
}

#logo{ 
    padding: 5px;
 }​ 
```

这是我的小提琴[http://jsfiddle.net/r9x5A/3/的链接](http://jsfiddle.net/r9x5A/3/)

但正如其他人所说，你遇到的问题是你的css中的数字和'px'之间的空间。

# facebook - 输入画布 url 时，如何让用户自动重定向到 oauth 对话框？

> ID：13054990
> 
> 赞同：-1
> 
> 时间：2012-10-24T17:57:20.773
> 
> 标签：facebook, codeigniter, authentication

问候，

返回，当“Authenticated Referrals”未折旧时，如果用户通过画布 url 进入我的 facebook 应用程序，则被重定向到对话授权（用于权限）。

现在不存在该选项，我必须手动执行此操作，以便您可以通过画布重定向 url。

我正在为此使用 Codeigniter，据我所见，facebook 取消了我所做的任何重定向。

这是我的代码：

```
try {
            $fb_id = $this->facebook->getUser();
            if ($fb_id) {
                $fb_data = $this->facebook->api('/me');
                return $fb_data;
            } else {
                echo 'You don't give me the permissions';
                $url = $url = $this->facebook->getLoginUrl(array(
                    'scope' => 'email,user_likes,user_about_me,publish_stream,user_birthday',
                    'redirect_uri' => $this->config->item('app_name')
                        ));
                header("location:$url");
                redirect($url, 'refresh');
            }
        } catch (Exception $exc) {
            echo $exc;
        } 
```

有没有更简单的方法来做到这一点？你有什么例子可以给我看吗？提前致谢

注意：我的应用程序是（目前）用户的录音机音频首先是带有个人信息的注册。然后显示录音机音频。

我的目标是当新用户找到我的应用程序（apps.facebook.com/my_app）时，进入我的应用程序并自动显示 oauth 对话框以获得许可（如前所述）。然后进入注册视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T18:19:57.780

这与codeigniter无关，只需确保您`redirect_uri`的画布页面URL“ `apps.facebook.com/app_name`”。

然后使用 Javascript 将用户重定向到 OAuth 对话框，如下所示：

```
echo("<script> top.location.href='" . $url . "'</script>"); 
```

还可以查看[Canvas 教程](https://developers.facebook.com/docs/appsonfacebook/tutorial/)。

# image - 自动上传图片到网站

> ID：13054993
> 
> 赞同：0
> 
> 时间：2012-10-24T17:57:36.710
> 
> 标签：image, flash, upload, web, automation

我正在寻找一种能够将图像上传到网站而无需自己填写表格的解决方案。有问题的网站使用一个 Flash 按钮触发我计算机上的文件选择，然后将我选择的文件上传到网页上。有什么方法可以使这个过程自动化吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:13:30.247

您可以使用代理/网络调试器（例如 fiddler2），查看单个文件上传的 http 事务是什么样的，然后编写一个应用程序来为您的图像列表执行相同的操作。

# ruby - 如何查找字符串数组是否有子字符串？

> ID：13054994
> 
> 赞同：-3
> 
> 时间：2012-10-24T17:57:52.287
> 
> 标签：ruby, arrays

我有一个字符串数组。我需要查找是否有任何字符串具有特定的子字符串

```
array = ["Number", "Subtotal(Kilobytes/sec)", "Total(Kilobytes/sec)", "Usage"] 
```

例如，如果我在我使用的数组的第 2 和第 3 个元素处查找子字符串“千字节”：

```
array[2].inlcude? "kilobytes"
array.include?("kilobytes") 
```

它适用于 irb 但在脚本上运行它的投掷：

```
NoMethodError:
  undefined method `inlcude?' for "Total(Kilobytes/sec)":String 
```

或者

```
NoMethodError:
  undefined method `inlcude?' for #<Array:0x000000049bb780> 
```

为什么它不能在脚本或任何其他更好的方式来查找子字符串是否存在？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T18:00:09.013

看起来像一个简单的错字。使用`include?`代替`inlcude?`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T00:01:54.927

```
array.any?{|s| s =~ "kilobytes"} 
```