# StackOverflow 问答 12749000-12749999

# java - 我如何在没有物理打印机的情况下检查我的 java 打印方法是否正常工作

> ID：12749000
> 
> 赞同：1
> 
> 时间：2012-10-05T15:04:29.813
> 
> 标签：java, printing

我的应用程序中有 html 文档的打印方法。我无法使用物理打印机。因为我没有将计算机连接到物理打印机，所以我得到了代码中指定的“找不到打印机服务”。当我将计算机连接到没有物理打印机的打印机时，我可以检查该功能是否正常工作？

```
 FileInputStream psStream = null;  
        try {  
            psStream = new FileInputStream("c:\\some.html");  
            } catch (FileNotFoundException ffne) {  
              ffne.printStackTrace();  
            }  
            if (psStream == null) {  
                return;  
            }  
        DocFlavor htmlStreamFlavor = new DocFlavor("text/html; charset=utf-16", "java.io.InputStream");  
        Doc myDoc = new SimpleDoc(psStream, htmlStreamFlavor, null);    
        PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();  
        PrintService[] services = PrintServiceLookup.lookupPrintServices(htmlStreamFlavor, aset);  

        // if several printers configured  
        PrintService myPrinter = null;  
        for (int i = 0; i < services.length; i++){ 
            String svcName = services[i].toString(); 
            System.out.println("service found: "+svcName);              
            if (svcName.contains("printer closest to me")){  
                myPrinter = services[i];  
                System.out.println("my printer found: "+svcName);  
                break;  
            }  
        }  

        if (myPrinter != null) {              
            DocPrintJob job = (DocPrintJob) myPrinter.createPrintJob();  
            try {  
            job.print(myDoc, aset);  

            } catch (Exception pe) {pe.printStackTrace();}  
        } else {  
            System.out.println("no printer services found");  
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T15:06:44.843

有一些逻辑打印机可以创建 pdf 而不是打印。对于您的应用程序，它们看起来就像一台普通的打印机。

请参阅这个相当长的选项列表：[https ://www.google.de/search?q=pdf+printer](https://www.google.de/search?q=pdf+printer)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T15:11:46.127

您可以使用虚拟打印机，例如：[PDF Creator](http://sourceforge.net/projects/pdfcreator/)非常易于安装，您可以在程序中使用它，就像它是真正的打印机一样。

# jquery - jQuery下拉菜单闪烁

> ID：12749010
> 
> 赞同：2
> 
> 时间：2012-10-05T15:05:12.737
> 
> 标签：jquery, drop-down-menu

我的下拉菜单使用 jquery slideDown 和 slideUp 功能时遇到问题。

如果您将鼠标悬停在下拉列表 UL 上，如果您在它仍在向上滑动时将其移出并移回内部，它会开始闪烁/闪烁，就好像它正在快速快速射击中触发 mouseenter 和 mouseleave 事件一样。

我已经设置了一个小提琴来说明这个问题：http: [//jsfiddle.net/LxL8Q/3/](http://jsfiddle.net/LxL8Q/3/)

在 Chrome 中，它只会闪烁一秒钟，然后自行修复，但在 Firefox 中，它会无限期地继续闪烁。

我知道这里有很多与闪烁的 jQuery 相关的问题，但我找不到任何可以帮助我的答案。

我确实尝试用一个简单的悬停功能替换整个 .each 循环，但是在这样做之后，我的上滑和下滑动画不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:15:57.543

试试这个：

```
(function($){  

var nav = $("#topNav");  

nav.find("li").each(function() {  
if ($(this).find("ul").length > 0) {  

    //show subnav on hover  
    $(this).mouseover(function() {  
        $(this).find("ul").slideDown(300);  
    });  
    //hide submenus on exit  
    $(this).mouseleave(function() {  
        $(this).removeClass('active').find("ul").stop(true).slideUp(300);  
    });  
 }  
});

})(jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T21:11:44.757

我遇到了这个问题并找到了解决方案：`delay(50)`在`slideUp(300)`. 在此处查看新小提琴：http: [//jsfiddle.net/LxL8Q/42/](http://jsfiddle.net/LxL8Q/42/)

# excel - 使用 microsoft excel 以编程方式导出 csv 格式的文件

> ID：12749018
> 
> 赞同：0
> 
> 时间：2012-10-05T15:05:34.063
> 
> 标签：excel, csv

我需要以编程方式导出 csv 格式的文件。我添加了以下在用户单击按钮时调用的函数：

```
Public Sub CreateCVS()
    ActiveWorkbook.SaveAs Filename:="filename.csv", _
        FileFormat:=xlCSV, CreateBackup:=False
End Sub 
```

问题是我不想保存我的文件，我想以 csv 格式导出它，但电子表格仍然应该是一个 xlsm 文件。

可能吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:21:57.517

只需先导出工作表

```
Public Sub CreateCVS()
    activesheet.copy
    ActiveWorkbook.SaveAs Filename:="filename.csv", _
        FileFormat:=xlCSV, CreateBackup:=False
    activeworkbook.close false
End Sub 
```

# c# - linq 计算值与分组依据

> ID：12749019
> 
> 赞同：0
> 
> 时间：2012-10-05T15:05:34.877
> 
> 标签：c#, linq

构造 linq 语句（C#，查询语法，但我可以处理方法语法）有点麻烦。它需要支持分组以及公开计算的属性。我对每一个都有处理，但无法让它们看起来一起工作。任何帮助，将不胜感激。

**数据**

```
GrpField          Qty      Price
-------------     ---      -----
RED                1        10
RED                2        10
RED                1        50
BLUE               2        30
BLUE               2        50 
```

输出需要是每个组的总价格（数量 * 价格）的总和

**期望的结果**

```
RED    80
BLUE  160 
```

这让我得到了总价线

```
from x in origdata
let linetotal = x.qty * x.price
select new { x.grpfield, x.qty, x.price, linetotal } 
```

但是我无法按新的匿名类型进行分组，因为您无法在匿名类型上运行 sum 之类的聚合。如果我先运行该组，我无法弄清楚如何在总和之前将 linetotal 加入到组合中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T15:16:56.997

作为反对你的证据，*因为你不能在匿名类型*语句上运行 sum 这样的聚合......

```
var data = new[]
    {
        new {GrpField = "RED", Qty = 1, Price = 10},
        new {GrpField = "RED", Qty = 2, Price = 10},
        new {GrpField = "RED", Qty = 1, Price = 50},
        new {GrpField = "BLUE", Qty = 2, Price = 30},
        new {GrpField = "BLUE", Qty = 2, Price = 50},
    };

var grouped =
    from d in data
    group d by d.GrpField
    into g
    select new {Group = g.Key, Sum = g.Sum(x => x.Qty * x.Price)};

foreach(var g in grouped)
    Console.WriteLine("{0} - {1}", g.Group, g.Sum); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T15:10:23.273

先分组，再求和。

```
origdata.GroupBy(m => m.GrpField)
 .Select(group => new {
     GrpField = group.Key,
     CalculatedValue = group.Sum(m => m.qty * m.price)
  }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T15:12:33.440

```
origdata.GroupBy(p=>p.GrpField)
.Select(p=> new()
{
    GrpField=p=>p.Key,
    Sum=p.Sum(q=>q.Qty*q.Price)
}) 
```

# scala - 在发生崩溃时保持 Akka 状态

> ID：12749022
> 
> 赞同：4
> 
> 时间：2012-10-05T15:05:43.020
> 
> 标签：scala, persistence, akka, fault-tolerance

我是 Akka 的初学者，我喜欢它为异步编程提供的许多功能，例如 Actors、Agents 或 Futures。

Akka 的一个强大卖点是，当一个 Actor 崩溃时，Actor 系统会重新创建一个等效的 Actor 并插入旧的位置，从而保证了强大的稳定性。

其他一些系统（我被告知 JMS 就是其中之一）更进一步，并持续保持参与者之间发送的消息。这样，如果机器在物理上崩溃了——比如由于硬件故障——仍然可以恢复到故障前的状态。

这对我现在正在开发的应用程序非常有吸引力。Akka 是否提供任何此类机制？如果没有，是否有某种方法可以将其与外部系统集成以实现这一目标？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T23:05:51.280

是的，您所描述的可以通过使用[持久邮箱](http://doc.akka.io/docs/akka/2.0.3/modules/durable-mailbox.html)来实现，它们可以根据每个参与者的需要进行配置。

对于不同的后端有几种实现，如果你没有为你最喜欢的消息队列找到一个，那么实现你自己的适配器不会很困难。我们将在 Akka 源代码树中维护的唯一实现是`FileBasedMailbox`，用作如何做到这一点的模板。Akka 2.0.x 发行版中的其他邮箱类型由其各自的“所有者”作为社区项目维护。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T23:34:19.573

持久邮箱是一种选择性保存消息的好方法，这样 Akka 可以实现类似 JMS 的东西。除了技术之外，在架构级别上考虑哪些消息与您的系统相关以及在系统故障后应如何恢复状态非常重要。

与演员范式很好地结合在一起的一种方法是事件溯源。在这个概念中，应用程序的状态存储为一系列事件，而不是状态本身。当系统或其一部分发生故障时，可以通过应用来自持久事件存储的所有事件来恢复状态。持久邮箱可以是指向此类事件存储的链接，也可以直接使用专用参与者。

Martin Krasser 在此博客上有一篇非常好的[文章](http://krasserm.blogspot.de/2012/01/building-event-sourced-web-application.html)，描述了使用 Akka 的这种方法。他还是名为[eventsourced](https://github.com/eligosource/eventsourced)的 Akka 事件源扩展的作者。

# hibernate - hibernate父子子更新错误更新顺序

> ID：12749025
> 
> 赞同：0
> 
> 时间：2012-10-05T15:05:53.353
> 
> 标签：hibernate, collections

我有一个使用 @OneToMany 和 @ManyToOne 注释实现的父子关系树。

每个孩子都有@ManyToOne 父字段，每个父母都有@OneToMany。

孩子和父母都是异构的，任何类型的实体都可能属于任何父母类型的父母。

**在这种情况下，Hibernate 使用附加的 parent_child 表**创建和管理关系，就像它为 @ManyToMany 关系所做的那样。

一切都很顺利（我能够创建和删除任何对象），直到我尝试实现更改对象父对象并违反约束。

操作执行如下：

```
oldParent.children.remove(child);
child.parent = newParent;
newParent.children.add(child); 
```

正如预期的那样，Hibernate 生成了 3 个更改请求：一个更新 child.parent 值，两个更新新旧父母的子集合。

问题在于集合更新的错误顺序：它尝试在删除旧关系之前添加新关系，这会导致违反约束，因为不允许有两个父关系。

如何强制更新的正确顺序？或者在这种情况下如何避免使用附加表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:26:32.707

第一次删除后，您应该调用flush。这将删除初始父关系。现在，如果您重新加载父母和孩子，您应该能够将它们相互关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:37:43.980

实际上，除非您需要，否则您不需要在任何阶段调用 flush()。我不能代表 Hibernate 而是 JPA 标准，实现必须以尊重和发挥域所需约束的顺序对语句进行排序。

[请使用Batoo JPA](http://batoo.jp)尝试相同的案例，并让我们知道它是否适合您。否则我们可以帮助您。

# ios - 将用户的 Facebook 凭据导入 iOS6

> ID：12749027
> 
> 赞同：2
> 
> 时间：2012-10-05T15:06:03.687
> 
> 标签：ios, facebook-ios-sdk

新的 Facebook SDK 3.0 的文档告诉我们：

“在某些情况下，对于已经将应用程序连接到其 Facebook 帐户的用户，iOS 设备将没有访问令牌。当用户使用应用程序的网站或在另一台移动设备上使用该应用程序时，可能会发生这种情况。使用iOS 6 原生身份验证对话框，应用程序需要将用户的凭据“导入”到设备中，并且需要显示 iOS 6 原生身份验证对话框。”

（见[http://developers.facebook.com/docs/howtos/ios-6/](http://developers.facebook.com/docs/howtos/ios-6/)，技巧 2）

我想知道*如何*导入这些数据，我找不到代码示例。

谢谢，

蒂姆

PS 对于信息（和测试目的），很容易在应用程序中重现上述情况：

1.  在设置应用程序中，删除 Facebook 帐户
2.  在正在开发的应用程序中通过 SSO 连接到 Facebook，（它应该回退到这个，因为在 iOS6 下没有注册 Facebook 帐户
3.  在设置应用程序中再次设置 Facebook 帐户
4.  再次尝试通过正在开发的应用程序登录。这一次它*仍然*会通过 SSO 访问 Facebook，因为令牌是使用它创建的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:00:01.780

正如 MrNickBarker 建议的那样，解决方案是将用户从 SSO 中注销。但是，如果我绝对确定这样做他们的用户将通过 iOS 6 身份验证系统重新登录，我只想这样做。

我的问题是我不知道如何确保用户通过设置应用程序登录到 Facebook，我不想让用户退出 Facebook 只是让他们发送回 Facebook 应用程序每次 SSO 登录。

ACAccountStore 方法都不会告诉您用户是否已将他们的 Facebook 详细信息输入到设置应用程序中，但我最终发现 [SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook] 正是这样做的。

然后是解决方案：

```
ACAccountStore *accountStore = [[NSClassFromString(@"ACAccountStore") alloc] init];
ACAccountType *accountType;
if (accountStore &&
    (accountType = [accountStore accountTypeWithAccountTypeIdentifier:@"com.apple.facebook"]) &&
    [SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook])
{
    // There's an account store and it knows about Facebook - we must be on iOS 6 or higher.
    //
    // [SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook] also tells us that
    // the user has signed into their Faecbook account via the Settings app.
    //
    // At this point there could be a valid session that's been previously created via SSO prior to the
    // user signing into Facebook from Settings.app. In this case, calling openActiveSessionWithReadPermissions:
    // will continue to log on using SSO rather than the preferred route of using the built in iOS support.
    //
    // [accountStore accountsWithAccountType:accountType] will return an account for this application once
    // it's been used to log into Facebook. Clearly, if there is an account returned then the then we don't want to
    // force a logout.
    //
    // On the other hand, if no accounts are returned then we can safely call closeAndClearTokenInformation
    // in order to clear any SSO tokens, thereby ensuring that the next login will attempt to use the iOS
    // authentication (which we can do since the user has signed into the Settings app).

    if ([[accountStore accountsWithAccountType:accountType] count] == 0)
        [FBSession.activeSession closeAndClearTokenInformation];

    // Try to connect with read permissions only (as required for iOS auth)

    _usingiOSIntegratedLogin = YES;
    [FBSession openActiveSessionWithReadPermissions:nil
                                       allowLoginUI:YES
                                  completionHandler:completionHandler];
}
else
{
    // Either this is < iOS 6, or there's no Facebook account registered - request both
    // read and write permissions in order to avoid two trips to the Facebook app or web view

    _usingiOSIntegratedLogin = NO;

    NSMutableArray *permissions = [NSMutableArray arrayWithArray:[self publishPermissions]];
    [permissions insertObject:@"user_photos" atIndex:0];

    [FBSession openActiveSessionWithPermissions:permissions
                                   allowLoginUI:YES
                              completionHandler:completionHandler];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T15:19:57.233

> 在某些情况下，iOS 设备不会为已将应用程序连接到其 Facebook 帐户的用户提供访问令牌。当用户使用应用程序的网站或在其他移动设备上使用该应用程序时，可能会发生这种情况。要使用 iOS 6 原生身份验证对话框，应用程序需要将用户的凭据“导入”到设备中，并且需要显示 iOS 6 原生身份验证对话框。***一个很好的方法是请求基本的个人资料信息 - 请参阅上面的步骤 1。***

请注意粗体文本，只需使用基本权限请求访问，即 openActiveSessionWithPremissions:... 并且会话将持有访问令牌。

如果它仍然使用 SSO，请首先在活动会话上关闭AndClearTokenInformation。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T02:59:41.903

虽然回旋处接受的答案可能有效，但此功能已内置到 Facebook SDK 中。您正在寻找的是`FBSession openWithBehavior:completionHandler:`方法并指定`FBSessionLoginBehaviorUseSystemAccountIfPresent`. 它需要一些额外的工作，因为您不能使用便捷类方法`FBSession openActiveSessionWithReadPermissions:allowLoginUI:completionHandler:`。但是初始化会话然后设置活动会话的额外工作是微不足道的。

# ruby-on-rails - 如何使用 rails Nexmo gem 从 Nexmo 接收 SMS 消息

> ID：12749028
> 
> 赞同：4
> 
> 时间：2012-10-05T15:06:04.597
> 
> 标签：ruby-on-rails, sms, ruby-on-rails-3.2

我正在使用 Rails 3.2.8 并考虑使用 neximo。neximo gem 似乎没有提供接收 SMS 消息的方法。如何接收短信？我是否创建了一个控制器来响应 GET？我对 Rails 比较陌生，正在寻找有关采用方法的指针。

1.  如何设置我的路线
2.  我假设我收到消息后不需要渲染任何东西，所以我不需要模板，所以我是否绕过渲染？

任何指针或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:14:09.713

好吧，看起来您想使用[为 Nexmo 构建的 Ruby 库](https://github.com/timcraft/nexmo)。

基本上你要做的是把这个示例代码：

```
nexmo = Nexmo::Client.new('...API KEY...', '...API SECRET...')

response = nexmo.send_message({
  from: 'RUBY',
  to: '...NUMBER...',
  text: 'Hello world'
})

if response.success?
  puts "Sent message: #{response.message_id}"
elsif response.failure?
  raise response.error
end 
```

..在你的控制器中的一个动作中。假设它是你的`TextsController`，你把它放在`create`行动之下。因此，在您的 中，输入`config/routes.rb`如下内容：

`match "/sendtext" => "texts#create"`

然后，您只需点击`mydomain.com/sendtext`，命令就会触发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T12:20:19.153

想通了，很简单。首先，生成控制器，假设你调用控制器'foo'

```
rails generate controller foo 
```

在 foo_controller.rb 添加以下内容：

```
class SmsesController < ApplicationController
  def getmessage
    text_from_phone_no = params[:msisdn]
    text_body = params[:text]
    # here you can extract more values from parameters as described in nexmo docs.

    render :nothing => true # this will supply the needed http 200 OK
  end
end 
```

在 routes.rb 添加以下内容：

> 得到“foo/getessage”

然后在 Nexmo 中，将接收消息的 URL 指定为：

> your-domain.com/foo/getmessage.com

那就是你完成了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T16:17:43.810

我不确定 Ruby 库中是否有某种帮助程序来解码响应，但传入的消息只是一个 HTTP GET 或 POST 到您为数字配置的任何 URL（在 Nexmo 仪表板中）。

这是[传入消息的文档](http://nexmo.com/documentation/index.html#mo)。

（*免责声明：我为 Nexmo 做一些开发人员宣传。*）

# wpf - WPF xmlns:local="clr-命名空间:

> ID：12749029
> 
> 赞同：3
> 
> 时间：2012-10-05T15:06:05.937
> 
> 标签：wpf, visual-studio-2010, xaml

我在使用命名空间时遇到问题，我似乎在追查错误，现在我只剩下我不明白的地方了。我所有的文件都有相同的命名空间，我真的不认为我需要一个小程序。

```
Example.xaml
<UserControl x:Class="Example"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
         xmlns:chart="clr-namespace:Telerik.Windows.Controls;assembly=Telerik.Windows.Controls.Chart"
         xmlns:chartView="clr-namespace:Telerik.Windows.Controls.ChartView;assembly=Telerik.Windows.Controls.Chart"
         xmlns:telerikQuickStart="clr-namespace:Telerik.Windows.Controls.QuickStart;assembly=Telerik.Windows.Controls"
         xmlns:local="clr-namespace:Example.ExampleViewModel"
         xmlns:System="clr-namespace:System;assembly=mscorlib">
<telerikQuickStart:QuickStart.ExampleHeader>
    <TextBlock Text="Atlanta Sales Dashboard" Margin="8" />
</telerikQuickStart:QuickStart.ExampleHeader>
<UserControl.DataContext>
    <local:ExampleViewModel />
</UserControl.DataContext> /

ExampleViewModel.cs

using System;
using System.Collections.ObjectModel;
using System.Linq;
using Telerik.Windows.Controls;
using Telerik.Windows.Controls.Map;
using System.Collections.Generic;
using System.Globalization;
using System.Windows;
using System.Windows.Resources;
using System.Xml;

namespace Example.ExampleViewModel
{
public class ExampleViewModel : ViewModelBase 
```

ExampleViewModel 仍然给我以下错误。

```
 Error  1   The name "ExampleViewModel" does not exist in the namespace "clr-namespace:Example.ExampleViewModel".   D:\visual studio 12\Projects\Map1\Map1\Example.xaml 14  9   Map1
    Error   2   The namespace '<global namespace>' already contains a definition for 'Example'  D:\visual studio 12\Projects\Map1\Map1\obj\x86\Debug\Example.g.cs   62  22  Map1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:30:01.220

请检查您的所有命名空间。其中一些似乎是不正确的。确保您打算引用的所有类都定义了正确的命名空间（包括程序集）。

我建议你从几个命名空间开始，确保它们正常工作，然后逐渐添加所有需要的命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:31:28.963

这似乎是 xaml 定义中的错误，请参阅：

控制类是：

```
<UserControl x:Class="Telerik.Windows.Examples.Map.SalesDashboard.Example" 
```

但是您正在使用相同的名称定义“本地”命名空间：

```
xmlns:local="clr-namespace:Telerik.Windows.Examples.Map.SalesDashboard.Example 
```

我认为您的 xaml 或您的类定义中应该有错误，试试这个...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T16:32:39.953

搜索完后，我终于在以下帮助下清除了该错误：http: [//windowsclient.net/learn/video.aspx?v=31429](http://windowsclient.net/learn/video.aspx?v=31429)

但这让我陷入了另一个错误，我将联系 Telerik。似乎他们正在使用另一个名称空间中的控件。

谢谢

# oracle-adf - 如何在 J developer 中打开 JAR 文件

> ID：12749030
> 
> 赞同：0
> 
> 时间：2012-10-05T15:06:08.087
> 
> 标签：oracle-adf

我正在使用 Jdeveloper (11.1.1.6.0) 并且我有一个用于连接到 OIM 的 JAR 文件我需要帮助来设置它。

我需要知道我打了什么样的服务电话，这就是为什么我需要设置所有这些

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:16:36.687

project properties->Libraries and ClassPath -> Add JAR 将 Jar 文件添加到您的项目中-然后您可以在代码中使用其中的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:27:13.357

除了 Shay'a 答案之外，您还可以阅读此博客[https://blogs.oracle.com/sfehrman/entry/programmatically_provisioning_users_via_oracle](https://blogs.oracle.com/sfehrman/entry/programmatically_provisioning_users_via_oracle)来帮助您入门。

# php - 通过抓取或 FB API 显示 facebook 用户页面？

> ID：12749031
> 
> 赞同：0
> 
> 时间：2012-10-05T15:06:11.717
> 
> 标签：php, javascript, facebook

所以我试图找到一种方法来抓取 Facebook 用户页面的 html（希望它实时更新）或使用 Facebook API 显示它。我的最终结果将是用户 Facebook 主页的主题提要。我不想从根本上改变主题，或者从头开始重新编码他们的主题，我只想改变颜色，也许在上面添加一个很酷的背景图片，并将它作为一种简单的方式来获得 Facebook 主题（只需访问我的网站，然后从下拉菜单中选择一个）。

现在，我只对这样做的合法方式感兴趣，因为我不想被起诉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:29:40.720

如果我是你，我应该使用 Facebook API，因为抓取网页的工作量很大。尽管抓取登录页面以显示您自己的界面很有趣。但另一方面，这使得对登录进行恶意操作变得非常容易。

**尽可能使用 Facebook API，如果您想添加 Facebook API 中不可用的功能，请开始考虑抓取。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T15:31:31.890

好吧，如果你想让它“合法”，那么抓取应该是不可能的。

通过他们的 API 做到这一点……好吧，从用户的角度来看，这并没有提供足够的好处来弥补恕我直言的缺点。这将是一个非常“静态”的视图——而在 Facebook 本身上，我可以轻松地与所有内容进行交互，发布、评论等。

复制到 Facebook 的大部分“外观和感觉”可能会让你很快与他们的[品牌指南发生冲突。](https://developers.facebook.com/docs/guides/policy/examples_and_explanations/branding/)

而且，最后但并非最不重要的一点是，如果您将其作为用户 JavaScript 或浏览器扩展来实现，您将与此处的第一个示例“Profile Takeover”发生冲突，[https://developers.facebook.com/docs/guides/政策/examples_and_explanations/Prohibited_Functionality/](https://developers.facebook.com/docs/guides/policy/examples_and_explanations/Prohibited_Functionality/)

我会说：不值得。不值得努力，不值得（潜在的）麻烦。

# .net - 如何使用 MSBuild 扩展的 Zip 任务？

> ID：12749032
> 
> 赞同：24
> 
> 时间：2012-10-05T15:06:12.603
> 
> 标签：.net, msbuild

我决定在每次构建时使用 MSBuild Extension 的 Zip 任务来压缩我的一些源代码。

但是，这不起作用：

```
<UsingTask TaskName="MSBuild.ExtensionPack.Compression.Zip" AssemblyFile="MSBuild.ExtensionPack.dll" />
<Target Name="AfterBuild">
    <CallTarget Targets="ZipSourceFiles" />
</Target>
<Target Name="ZipSourceFiles" Condition="'$(ConfigTransform)'=='ImRunningOnTheServer'">
    <MSBuild.ExtensionPack.Compression.Zip TaskAction="Create" CompressFiles="c:\source.txt" ZipFileName="C:\target.zip"/>
</Target> 
```

我收到以下错误消息：

> 未找到“MSBuild.ExtensionPack.Compression.Zip”任务。检查以下内容： 1.) 项目文件中的任务名称与任务类的名称相同。2.) 任务类是“公共的”并且实现了 Microsoft.Build.Framework.ITask 接口。3.) 在项目文件或位于“c:\Windows\Microsoft.NET\Framework\v4.0.30319”目录的 *.tasks 文件中正确声明了任务。

我不知道是什么导致了这个错误？任何的想法？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-05T15:27:32.973

[MSBuild 社区任务](https://github.com/loresoft/msbuildtasks)示例：

```
<Import Project="lib\MSBuildCommunityTasks\MSBuild.Community.Tasks.Targets" />

<Target Name="Zip">
        <CreateItem Include="YourSourceFolder\*.*" >
                <Output ItemName="ZipFiles" TaskParameter="Include"/>
        </CreateItem>
        <Zip ZipFileName="YourZipFile.zip" WorkingDirectory="YourSourceFolder" Files="@(ZipFiles)" />
</Target> 
```

如果您需要更多示例，[这里是](https://github.com/christianspecht/recordset.net/blob/master/build.proj)我的一个项目中的完整工作 MSBuild 文件。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-06-30T15:49:05.363

[这是MSBuild 社区任务](https://github.com/loresoft/msbuildtasks)的替代方法。如果您使用的是 .net 4.5.1，则可以将[System.IO.Compression](https://msdn.microsoft.com/en-us/library/system.io.compression(v=vs.110).aspx)函数嵌入到[UsingTask](https://msdn.microsoft.com/en-us/library/t41tzex2.aspx)中。此示例使用[ZipFile.CreateFromDirectory](https://msdn.microsoft.com/en-us/library/hh485707(v=vs.110).aspx)。

```
<Target Name="Build">
  <ZipDir
    ZipFileName="MyZipFileName.zip"
    DirectoryName="MyDirectory"
  />
</Target>

<UsingTask TaskName="ZipDir" TaskFactory="CodeTaskFactory" AssemblyFile="$(MSBuildToolsPath)\Microsoft.Build.Tasks.v12.0.dll">
  <ParameterGroup>
    <ZipFileName ParameterType="System.String" Required="true" />
    <DirectoryName ParameterType="System.String" Required="true" />
  </ParameterGroup>
  <Task>
    <Reference Include="System.IO.Compression.FileSystem" />
    <Using Namespace="System.IO.Compression" />
    <Code Type="Fragment" Language="cs"><![CDATA[
      try
      {
        Log.LogMessage(string.Format("Zipping Directory {0} to {1}", DirectoryName, ZipFileName));
        ZipFile.CreateFromDirectory( DirectoryName, ZipFileName );
        return true;
      }
      catch(Exception ex)
      {
        Log.LogErrorFromException(ex);
        return false;
      }
    ]]></Code>
  </Task>
</UsingTask> 
```

# c# - 泛型函数限制为 c# 中的委托类型

> ID：12749033
> 
> 赞同：1
> 
> 时间：2012-10-05T15:06:33.733
> 
> 标签：c#, generics, delegates

在为原生 dll 编写 P/Invoke 包装器时，我发现自己有很多看起来像这样的代码：

```
// Declare delegate types matching some callbacks in the dll
delegate void d1(T1, T1);
delegate void d2(T1,T2,T3);

// Some functions
void f1(T1 a, T2 b)
{
..
}

void f2(T1 a, T2 b, T3 c)
{
} 
```

然后后来，

```
// Marshal some instantiated delegates into IntPtrs to pass to native dll
IntPtr a = Marshal.GetFunctionPointerForDelegate(new d1(f1));
IntPtr b = Marshal.GetFunctionPointerForDelegate(new d2(f2)); 
```

所以我最终得到了很多类似上面的代码。我认为使用通用函数进行一些重构可能会很好，如下所示：

```
static void foo<T>(ref IntPtr ptr, T f)  where T: System.Delegate, new()
{
   ptr = Marshal.GetFunctionPointerForDelegate(new T(f));
} 
```

这将允许我写：

```
foo<d1>(a,f1);
foo<d2>(b,f2); 
```

等等。它不编译！我试图在函数声明中添加一些类型约束，但无法让它工作。在这种情况下，这对我来说并不重要，因为重构几乎不是很重要，但我只是想知道我会如何做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:19:55.017

Sadly, you cannot constraint a type to inherit from System.Delegate. This limitation has frustrated me many times. The only way around this for you is to constrain the delegate to be a reference type and then do a nasty-ish cast:

```
 static void foo<T>(out IntPtr ptr, T f) where T : class
    {
        ptr = Marshal.GetFunctionPointerForDelegate( (Delegate)(object)f );
    } 
```

You are not able to do a `new T(f)` because the `T:new()` constraint only allows a parameterless constructor. The good news is that this is unnecessary as `T` is already a delegate type. You would need to invoke it like:

```
 foo<d1>(out ptr, f1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:26:29.720

没有办法编写一个函数来接受“任何”委托并返回相同类型的委托。可以做的是为零参数的委托、一个按值参数的委托、两个按值参数的委托、三个按值参数的委托等编写一系列泛型函数。一个`ref`参数，两个`ref`参数，一个`ref`第一个参数和一个按值的第二个参数，等等。如果一个人将自己限制为接受按值参数的委托，代码重复的数量可能会很烦人但并不完全可怕（五倍重复如果您想处理最多四个参数的函数，或者如果您想要最多八个函数，则为九倍）。如果你想处理任意组合`ref`和按值参数，扩展变得更糟（最多四个参数的函数为 31，或最多八个函数为 511）。

我的倾向是定义一个程序，其中包含您想要作为文本资源的代码，并带有一些专门的“宏替换”，并且在执行时将为所有所需的参数组合扩展该文本资源并将结果放入文本框并选择它，以便将其复制并粘贴到源文件中。该资源看起来像：

```
public class ActionCombiner$0
{
    $1 _act1,_act2;
    void Invoke($2)
    {
        _act1($3);
        _act2($3);
    }
    ActionCombiner($1 act1, $1 act2)
    {
        _act1 = act1;
        _act2 = act2;
    }
    public $1 Create($1 act1, $1 act2)
    {
        var temp = new ActionCombiner$0(act1, act2);
        return temp.Invoke;
    }
} 
```

该程序将获取字符串资源并将 $0-$3 替换为各种字符串。对于 $0，泛型类型说明符列表（例如`<T1,T2>`）或无参数情况下的空字符串。对于 $1，一个接受相关参数的委托类型。对于 $2，包含类型的参数列表（例如`T1 p1, T2 p2`）。对于 $3，不包括类型的参数列表（例如`p1, p2`）；。使用这种方法，可以很容易地为任何所需的参数模式提供通用函数。

# javascript - 在 AngularJS 表达式中调用全局变量

> ID：12749034
> 
> 赞同：4
> 
> 时间：2012-10-05T15:06:35.613
> 
> 标签：javascript, angularjs

我在 head 的标签中有一些全局变量：

```
<script type="text/javascript">
    var apiRoot = 'http://localhost:8000/api',
        apiUrl = apiRoot,
        apiBadgeUrl = apiRoot + '/badges',
        apiLevelUrl = apiRoot + '/levels',
        apiBehaviorUrl = apiRoot + '/behaviors',
        apiTrophyUrl = apiRoot + '/trophies',
        apiUserUrl = apiRoot + '/users',
        apiWidgetPreferencesUrl = apiRoot + '/widgetPreferences';
</script> 
```

我想在 html 文件中使用角度表达式，但我的尝试失败了：

```
{{ $window.apiRoot }} or {{ apiRoot }} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T15:13:39.140

这些表达式是针对当前范围进行评估的。如果您没有通过控制器将它们设置在您的范围内，它将不会评估。见[http://docs.angularjs.org/guide/expression](http://docs.angularjs.org/guide/expression)

例子：

```
function MyCtrl($scope)
{
   $scope.apiRoot = apiRoot;
} 
```

HTML：

```
<div ng-controller="MyCtrl">
   {{apiRoot}}
</div> 
```

如前所述，虽然上述示例有效，但不推荐使用。更好的方法是在服务中设置这些变量，然后通过服务获取它们。

```
function MyCtrl($scope, apiRootService)
{
   $scope.apiRoot = apiRootService.getApiRoot();
} 
```

服务：

```
angular.module('myServices', []).factory('apiRootService', function() {
    var apiRoot = 'http://localhost:8000/api',
    apiUrl = apiRoot,
    apiBadgeUrl = apiRoot + '/badges',
    apiLevelUrl = apiRoot + '/levels',
    apiBehaviorUrl = apiRoot + '/behaviors',
    apiTrophyUrl = apiRoot + '/trophies',
    apiUserUrl = apiRoot + '/users',
    apiWidgetPreferencesUrl = apiRoot + '/widgetPreferences';
    return {
      getApiRoot: function() {
         return apiRoot
      },
      //all the other getters
   }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T16:33:48.007

最佳实践是将 apiRoot 移至 Service 并将该服务注入您的控制器。见[这里](http://roytruelove.blogspot.com/2012/09/angularjs-dependency-injection-modules.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-15T20:07:23.340

另一种方法是将全局添加到 $rootScope。您可以通过将以下内容添加到您的应用程序模块定义中来做到这一点

```
angular.module('myApp', ['ngRoute'])
    .run(function ($rootScope){
        $rootScope.myAPI = {
             apiRoot: 'http://localhost:8000/api',
             apiUrl: apiRoot,
             apiBadgeUrl: apiRoot + '/badges',
             apiLevelUrl: apiRoot + '/levels',
             apiBehaviorUrl: apiRoot + '/behaviors',
             apiTrophyUrl: apiRoot + '/trophies',
             apiUserUrl: apiRoot + '/users',
             apiWidgetPreferencesUrl: apiRoot + '/widgetPreferences'
        }
    }); 
```

虽然服务确实有效，但角度文档建议不要这样做。[http://docs.angularjs.org/misc/faq](http://docs.angularjs.org/misc/faq)

> 相反，不要创建一个生活中唯一目的是存储和返回数据位的服务。

# xml - 在 VBScript 中解析 XML 错误

> ID：12749035
> 
> 赞同：1
> 
> 时间：2012-10-05T15:06:43.320
> 
> 标签：xml, parsing, vbscript, xml-parsing

我有这个`VBScript`发送`HTTP POST`请求并读取返回`HTML`响应的简单方法。

```
Function httpPOST(url, body, username, password )  
  Set Http = CreateObject("Msxml2.ServerXMLHTTP")   
  Http.Open "POST", url, False, username, password  
  Http.setRequestHeader _  
              "Content-Type", _  
              "application/x-www-form-urlencoded"  
  Http.send body 
  pagestatus = Http.status
  if pagestatus<> "200" then
    httpPOST="Error:"& pagestatus
  else
    'httpPOST = Http.ResponseBody
    'httpPOST = Http.responseText
    Set objXMLDoc = CreateObject("MSXML.DOMDocument")
    objXMLDoc.async = False
    objXMLDoc.validateOnParse = False
    objXMLDoc.load(Http.ResponseBody)
    Set objNode = objXMLDoc.selectSingleNode("/html/body/center/img")
    httpPost = objNode.getAttribute("alt") 
  end if
End Function 
```

`HTML`响应格式如下：

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
        <title>---</title>
    </head>
    <body>
        <center>
            <img alt="You are now connected" src="pages/GEN/connected_gen.png">
        </center>
    </body>
</html> 
```

这个脚本的问题是它总是返回`Error: Object required: 'objNode'`

我尝试了很多`XML`解析器的变体，最后每次遇到与`XML`对象相关的相同错误时都放弃了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:59:07.597

您的第一个问题在[这里](https://stackoverflow.com/a/11167329/603855)得到解决：`.load`需要“包含指定 XML 文件位置的 URL 的字符串”；所以使用 .loadXml 检查是否`Http.ResponseBody` 包含`MSXML?.DOMDocument`可以解析的数据（你的第二个问题）。

**更新：**

“有效”的东西（以及为什么）：

```
 Dim sHTML : sHTML = readAllFromFile("..\data\02.html")
  WScript.Echo sHTML
  Dim oXDoc : Set oXDoc = CreateObject("MSXML2.DOMDocument")
  oXDoc.async = False
  oXDoc.validateOnParse = False
  oXDoc.setProperty "SelectionLanguage", "XPath"
  If oXDoc.loadXML(sHTML) Then
     Dim ndImg : Set ndImg = oXDoc.selectSingleNode("/html/body/center/img")
     Dim httpPost : httpPost = ndImg.getAttribute("alt")
     WScript.Echo "ok", httpPost
  Else
     WScript.Echo "Error: " & trimWS(oXDoc.parseError.reason)
  End If 
```

输出：

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
        <title>---</title>
    </head>
    <body>
        <center>
            <img alt="You are now connected" src="pages/GEN/connected_gen.png"/>
        </center>
    </body>
</html>

ok You are now connected 
```

**MSXML2.DOMDocument**将`.loadXML`（并解析）HTML 代码，前提是它是“XML 有效的”。您的 HTML 不是，因为 img 标记未关闭 - 我为您的原始代码收到的错误消息：

```
Error: End tag 'center' does not match the start tag 'img'. 
```

如何进一步进行取决于您是否能够/愿意更改 HTML。

**更新二：**

虽然您可以在将 .ResponseBody提供给 .loadXML**之前对它做一些讨厌的事情 - 为什么不使用 HTML 工具来解析 HTML：**

```
 Dim sHTML : sHTML = readAllFromFile("..\data\01.html")
  WScript.Echo sHTML
  Dim oHF : Set oHF = CreateObject("HTMLFILE")
  oHF.write sHTML
  Dim httpPost : httpPost = oHF.documentElement.childNodes(1).childNodes(0).childNodes(0).alt
  WScript.Echo "ok", httpPost 
```

输出：

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
        <title>---</title>
    </head>
    <body>
        <center>
            <img alt="You are now connected" src="pages/GEN/connected_gen.png">
        </center>
    </body>
</html>

ok You are now connected 
```

如输出所示，HTMLFILE 接受您的 'not-xml-closed' img; 当然，应该对获得您真正想要的东西的方法进行消毒。

# xcode - CALayer 的阴影在 iOS 5.1 上不可见

> ID：12749042
> 
> 赞同：1
> 
> 时间：2012-10-05T15:07:15.713
> 
> 标签：xcode, calayer, shadow

我有一个 UIView，我使用情节提要将它设置为我的 tableView 的 tableHeaderView。

我在 viewDidLoad 期间使用以下代码给这个 UIView 一个阴影：

```
_viewHeaderInfo.layer.masksToBounds = NO;
_viewHeaderInfo.layer.shadowOffset = CGSizeMake(0, 2);
_viewHeaderInfo.layer.shadowOpacity = 0.5; 
```

当我在 iPhone 6.0 模拟器中运行它时，阴影会显示出来。当我在 iPhone 5.1 模拟器中运行它时，阴影不**显示**。

这不是显示阴影的方式吗？我应该采取不同的做法吗？提前致谢！

附加信息：

我有一些代码可以在某些用户操作上使用动画来隐藏/显示视图。显示视图时（先隐藏它之后），我注意到只要动画运行，阴影就会显示。在动画结束时，阴影再次消失。这是显示视图的动画代码：

```
// Get references //
CGFloat h = _viewHeaderInfo.bounds.size.height;
UITableView *tv = self.tableView;

// Move the frame of the View UP by changing the .y value //
_viewHeaderInfo.frame = CGRectMake(0, -h, tv.frame.size.width, h);

// Start animation: adding the View to .tableHeaderView resets the View.frame.y to 0 //
[UIView animateWithDuration:0.3 animations:^{

    [tv scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] atScrollPosition:UITableViewScrollPositionTop animated:NO];
    tv.tableHeaderView = _viewHeaderInfo;

}]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:27:06.277

UITableView 垂直排列单元格和标题以形成表格。它只是将它们作为子视图添加到自身。添加它们的顺序没有记录（并且可能在操作系统版本之间发生变化）。

图层的阴影直接显示在图层的下方，在之前的兄弟图层之上，但在后面的兄弟图层之下。如果表格首先添加标题，然后添加其下方的（不透明）单元格，则单元格将覆盖阴影。如果它们以相反的顺序添加，阴影将是可见的。

顺序通常取决于滚动方向，仅取决于哪个视图首先出现。但同样，这没有记录在案并且可能会发生变化。

不要依赖表视图中的视图顺序。

# jquery - 是否可以停止主干“读取”请求

> ID：12749043
> 
> 赞同：22
> 
> 时间：2012-10-05T15:07:27.377
> 
> 标签：jquery, backbone.js, backbone-views

我有一个具有多个视图的主干应用程序。在视图之间切换会触发 Ajax 请求以获取不同的集合。如果启动一个新请求，我想停止当前的“读取”ajax 请求。是否可以？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-15T15:49:22.530

好的，这就是我所做的

我将获取请求保存在变量中

```
app.fetchXhr = this.model.fetch(); 
```

在我的路由器中，我有一个负责关闭视图和渲染视图的功能。它还负责触发每个视图更改所需的任何触发器，但这与这个问题无关。

在做任何事情之前，这个路由器函数会执行以下操作

```
//Stop pending fetch
if(app.fetchXhr.readyState > 0 && app.fetchXhr.readyState < 4){
    app.fetchXhr.abort();
} 
```

我希望这有帮助

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-08-02T19:47:54.047

另一个迟到的回复，以防其他人遇到这个问题。

我最终覆盖了 Backbone.sync 以添加一个 XHR 对象池和一个选项来中止在获取时挂起的请求。

```
var sync = Backbone.sync
  , xhrPool = [];

Backbone.sync = function(method, model, options) {
  options = options || {};
  if (method === 'read') {
    if (options.abortPending == true) {      
      for (var i = 0; i < xhrPool.length; i++) {
        if (xhrPool[i]['readyState'] > 0 && xhrPool[i]['readyState'] < 4) {
          xhrPool[i].abort();
          xhrPool.splice(i, 1);
        }
      }
    }

    // cleanup xhrPool
    // todo: make removal from the pool an 'always' jqXHR callback
    // instead of cleanup on every read?
    for (var i = 0; i < xhrPool.length; i++) {
      if (xhrPool[i]['readyState'] === 4) {
        xhrPool.splice(i, 1);
      }
    }

    var xhr = sync(method, model, options);
    xhrPool.push(xhr);
    return xhr;
  } else {
    return sync(method, model, options);
  }
}; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-05T15:43:51.110

我假设您正在使用带有 jQ​​uery 的主干。如果是这样，以下问题似乎为您提供了答案：

[使用 jQuery 中止 Ajax 请求](https://stackoverflow.com/questions/446594/abort-ajax-requests-using-jquery)

Backbone`fetch`返回`xhr`他们正在谈论的 IIRC。

# c# - 仅当 PropertyName 未在 Json.Net 中明确设置时才使用 CamelCase？

> ID：12749046
> 
> 赞同：19
> 
> 时间：2012-10-05T15:07:42.063
> 
> 标签：c#, json.net

我正在为我的网站使用 Json.Net。我希望序列化程序默认以驼峰形式序列化属性名称。我不希望它更改我手动分配的属性名称。我有以下代码：

```
public class TestClass
{
    public string NormalProperty { get; set; }

    [JsonProperty(PropertyName = "CustomName")]
    public string ConfiguredProperty { get; set; }
}

public void Experiment()
{
    var data = new TestClass { NormalProperty = null, 
        ConfiguredProperty = null };

    var result = JsonConvert.SerializeObject(data,
        Formatting.None,
        new JsonSerializerSettings {ContractResolver
            = new CamelCasePropertyNamesContractResolver()}
        );
    Console.Write(result);
} 
```

的输出`Experiment`是：

```
{"normalProperty":null,"customName":null} 
```

但是，我希望输出为：

```
{"normalProperty":null,"CustomName":null} 
```

这有可能实现吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-08T10:54:09.017

您可以像这样覆盖`CamelCasePropertyNamesContractResolver`类：

```
class CamelCase : CamelCasePropertyNamesContractResolver
{
    protected override JsonProperty CreateProperty(MemberInfo member,
        MemberSerialization memberSerialization)
    {
        var res = base.CreateProperty(member, memberSerialization);

        var attrs = member
            .GetCustomAttributes(typeof(JsonPropertyAttribute),true);
        if (attrs.Any())
        {
            var attr = (attrs[0] as JsonPropertyAttribute);
            if (res.PropertyName != null)
                res.PropertyName = attr.PropertyName;
        }

        return res;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-22T12:05:57.573

随着 NamingStrategy 的引入，它变得更容易了。
作为奖励，您可以不修改字典键。

```
class MyContractResolver : CamelCasePropertyNamesContractResolver
{
    public MyContractResolver()
    {
        NamingStrategy.OverrideSpecifiedNames = false;    //Overriden
        NamingStrategy.ProcessDictionaryKeys = false;     //Overriden
        NamingStrategy.ProcessExtensionDataNames = false; //default
    }
} 
```

# iphone - UIImage 对象出人意料地返回 null 但不返回 NSData

> ID：12749047
> 
> 赞同：0
> 
> 时间：2012-10-05T15:07:44.490
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我创建了一个 sqlite 数据库。

我在我的数据库中插入了一些数据..

```
UIImage * imagee=[UIImage imageNamed:@"image.png"];
NSData *mydata=[NSData dataWithData:UIImagePNGRepresentation(imagee)];
const char *dbpath = [databasePath UTF8String];

NSString *insertSQL=[NSString stringWithFormat:@"insert into CONTACTS values(\"%@\",\"%@\")",@"Mathan",mydata];

NSLog(@"mydata %@",mydata);

sqlite3_stmt *addStatement;

const char *insert_stmt=[insertSQL UTF8String];
if (sqlite3_open(dbpath,&contactDB)==SQLITE_OK) {
    sqlite3_prepare_v2(contactDB,insert_stmt,-1,&addStatement,NULL);

    if (sqlite3_step(addStatement)==SQLITE_DONE) {

        sqlite3_bind_blob(addStatement,1, [mydata bytes], [mydata length], SQLITE_TRANSIENT);
        NSLog(@"Data saved");

    }
    else{

        NSLog(@"Some Error occured");
    }

    sqlite3_close(contactDB);
}
else{
    NSLog(@"Failure");
} 
```

已经编写了一些代码来检索数据

```
sqlite3_stmt *statement;
if (sqlite3_open([databasePath UTF8String], &contactDB) == SQLITE_OK) {
    NSString *sql = [NSString stringWithFormat:@"SELECT * FROM contacts"];

    if (sqlite3_prepare_v2( contactDB, [sql UTF8String], -1, &statement, nil) == SQLITE_OK) {
        while (sqlite3_step(statement) == SQLITE_ROW)
        {
            char *field1 = (char *) sqlite3_column_text(statement, 0);
            NSString *field1Str = [[NSString alloc] initWithUTF8String: field1];
            NSLog(@"UserName %@",field1Str);

            NSData *data = [[NSData alloc] initWithBytes:sqlite3_column_blob(statement, 1) length:sqlite3_column_bytes(statement, 1)];

            UIImage *newImage = [[UIImage alloc]initWithData:data];

            NSLog(@"Image OBJ %@",newImage);
            NSLog(@"Image Data  %@",data);
        }
        sqlite3_close(contactDB);
    }
}

sqlite3_finalize(statement); 
```

问题是

在日志中，插入的`NSData`对象和检索`NSData`的对象是不同的（在日志中打印会给出不同的流）

此外，图像 OBJ 在日志中打印为 null ..

在stackoverflow中看到过类似的问题。但似乎没有任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:20:59.417

When you do this:

```
NSData *data = [[NSData alloc] initWithBytes:sqlite3_column_blob(statement, 1) length:sqlite3_column_bytes(statement, 1)];
UIImage *newImage = [[UIImage alloc]initWithData:data]; 
```

You are telling the compiler that the two objects are different, so when you print them, they will always be different. Guaranteed. Since they aren't the same object.

I'm not sure why newImage would display null though since you just allocated the object.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:29:26.057

你应该在`sqlite3_step` *之后* `sqlite3_bind_blob`执行，而不是之前。你在告诉它要插入什么之前插入！

检查和的结果也是`sqlite_prepare_v2`谨慎`sqlite3_bind_blob`的。

我还建议（与您的问题无关）`sqlite3_finalize`在您之前`sqlite3_close`的两个代码片段中。如果你有一个错误，`sqlite3_errmsg`是一个救命稻草，准确地告诉你出了什么问题，而不是猜测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T15:39:18.833

没有重大区别，但您可以尝试使用此方法，也可以在控制台中获取图像长度以检测图像是否从数据库正确响应：

```
const void *ptr = sqlite3_column_blob(stmt, 1);
int size = sqlite3_column_bytes(stmt, 1);
NSLog(@"%d",size);
data = [[NSData alloc] initWithBytes:ptr length:size]; 
```

# c# - NModbus 写文件记录

> ID：12749049
> 
> 赞同：0
> 
> 时间：2012-10-05T15:08:00.450
> 
> 标签：c#, modbus

您是否有机会知道是否可以使用 nmodbus 执行写入文件记录功能（0x15）？我在 nmodbus 文档中找不到任何提及。我可以看到 FtdAdapter 有一个 Write 函数。是不是很相似？为此目的使用 nmodbus 的替代方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T19:52:18.807

最好的方法是使用 ExecuteCustomMessage 方法。

```
public TResponse ExecuteCustomMessage<TResponse>(IModbusMessage request) where TResponse : IModbusMessage, new() 
```

请参阅 IModbusMessage.cs 文档，因为您必须为请求和响应实现此接口。

另外，请参阅[此问题](https://code.google.com/p/nmodbus/issues/detail?id=47)。最新的 NModbus 下载似乎没有包含对 RTU 的自定义消息添加支持的补丁，因此必须获取最新的 NModbus 项目源代码并编译才能获得最新的 nmodbus.dll。

# javascript - 如何更改 g.raphaelJS 中的悬停行为？

> ID：12749060
> 
> 赞同：1
> 
> 时间：2012-10-05T15:08:23.740
> 
> 标签：javascript, raphael

我是 raphael 的新手，正在使用与所示代码相同的代码（特别是“符号、轴和悬停效果”之一）：

[http://g.raphaeljs.com/linechart.html](http://g.raphaeljs.com/linechart.html)

图片在这里：http: [//i.stack.imgur.com/J0U3N.jpg](http://i.stack.imgur.com/J0U3N.jpg)

我想要做的是将鼠标悬停在图表的任何部分上，并且无论我的鼠标光标在哪里，都有一条从图表的顶部到底部的红线。（即使它不在我使用的特定数据点上，并且有一个框表示它在 x 轴上的数字（即使它不是我在图表中使用的数据点（即 1.1、1.2、1.3 , 1.4)). 我该如何做到这一点？任何帮助将不胜感激。

# php - 减去两个变量并将结果添加到mysql数据库

> ID：12749064
> 
> 赞同：0
> 
> 时间：2012-10-05T15:08:42.323
> 
> 标签：php, mysql, variables, substr

我有两个请求的结果，其中包含十进制数字 8,2。

我尝试减去这个 var 并将结果添加到数据库中。

通常我确实喜欢 $var1-$var2

所以我有以下要求：

```
$requete= 'UPDATE `decompte` SET
principal_s         = '.$pay['principal_s']-$donnees2['principal_s'].',
clause_penale_s     = '.$pay['clause_penale_s']-$donnees2['clause_penale_s'].',
domages_interets_s  = '.$pay['domages_interets_s']-$donnees2['domages_interets_s'].',
art700_cpc_s        = '.$pay['art700_cpc_s']-$donnees2['art_700_cpc_s'].',
art475_1_cpp_s      = '.$pay['art475_1_cpp_s']-$donnees2['art475_1_cpp_s'].',
art_441_6_cc_s      = '.$pay['art_441_6_cc_s']-$donnees2['art_441_6_cc_s'].',
frais_ar_s          = '.$pay['frais_ar_s']-$donnees2['frais_ar_s'].',
agios_s             = '.$pay['agios_s']-$donnees2['agios_s'].',
depens_s            = '.$pay['depens_s']-$donnees2['depens_s'].',
frais_execution_s   = '.$pay['frais_execution_s']-$donnees2['frais_execution_s'].',
contrib_aid_juridiq_s   = '.$pay['contrib_aid_juridiq_s']-$donnees2['contrib_aid_juridiq_s'].',
frais_greffe_s          = '.$pay['frais_greffe_s']-$donnees2['frais_greffe_s'].'';

mysql_query($requete) or die(__LINE__.mysql_error().$requete); 
```

问题是它向我显示了一个错误，它说：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1-5000 行的“-5000”附近使用正确的语法。

我有点迷茫，我真的不明白那里发生了什么。

任何帮助或建议将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:11:29.010

把所有的减法放在括号内。例如：

```
principal_s         = '.($pay['principal_s']-$donnees2['principal_s']).',
clause_penale_s     = '.($pay['clause_penale_s']-$donnees2['clause_penale_s']).', 
```

PHP首先执行连接，然后计算算术运算！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T15:10:30.200

这是 PHP 的一个有趣问题。

连接运算符在减法运算符之前进行评估。

如果将行括在括号中，它将起作用：

```
principal_s         = '.($pay['principal_s']-$donnees2['principal_s']).', 
```

在我弄清楚是什么原因之前，这个问题在一个月左右给我带来了几个小时的压力。

# python - Python Regex 从调制解调器 AT 命令中提取响应

> ID：12749065
> 
> 赞同：2
> 
> 时间：2012-10-05T15:08:43.910
> 
> 标签：python, regex

当向调制解调器发送命令时，通常会发送一个命令（例如`AT`），后跟一个`\r`. 然后听调制解调器查看命令的结果，其中重复该命令本身。所以来自调制解调器的典型通信反馈看起来像

```
AT\r\rOK\r\n 
```

如果出现错误，它看起来像

```
AT\r\rERROR\r\n 
```

但一般来说，根据实际的 AT 命令，返回的值可以是除`OK`and之外的任何值`ERROR`。

我想提取这个响应，即返回我的正则表达式，`OK`或者`ERROR`调制解调器回复的任何内容。以下是条件：

*   我想验证字符串中的原始命令，即`ATX\r\rOK\r\n`当命令只是`AT`.
*   我根本不在乎有多少空白字符，我唯一期望的是`\n`最后有一个。所以`AT\rOK\n`and`AT\nOK\r\r\n`也应该匹配，但不是`AT\nOK\r\r`.
*   最后，我不关心左侧的额外内容，只要它们与 AT 命令用空格字符分隔即可。所以`OK\rAT\rOK\n` 应该匹配（即右侧出现的`OK`），但`XAT\rOK\r\n`不应该匹配。

是否可以使用一个正则表达式来提取调制解调器响应，或者我需要进行多个正则表达式搜索？要查看整个内容是否完全匹配，我可能已经找到了一个表达式：

```
r = re.compile("\s+AT\s+\w+\s*\\n$") 
```

但是如何提取其中`\w+`的内容呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:15:23.880

您将`()`要提取的部分放在周围，因此您的正则表达式读取`r"(?<!\S)AT\s+(\w+)\s*\n`. 然后，您可以将一组与比赛放在一起，您可以提取例如`group`：

```
r.search("yourText").group(1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:46:39.157

使用否定的lookbehind 来抑制以非空格字符开头的匹配，并使用括号来捕获响应：（`r"(?<!\S)AT\s+(\w+)\s*\n$"`表示`\S`任何非空格字符）。然后，您可以使用 提取响应`group(1)`，前提是结果`re.search`不是`None`。

```
>>> p = re.compile(r"(?<!\S)AT\s+(\w+)\s*\n$")
>>> p.search('ATX\r\rOK\r\n')
>>> p.search('AT\rOK\n')
<_sre.SRE_Match object at 0x10049df30>
>>> _.group(1)
'OK'
>>> p.search('AT\nOK\r\r\n')
<_sre.SRE_Match object at 0x10049df30>
>>> p.search('AT\nOK\r\r')
>>> p.search('OK\rAT\rOK\n')
<_sre.SRE_Match object at 0x1004a4198>
>>> p.search('XAT\rOK\n') 
```

# objective-c - NSLog 的包装器

> ID：12749066
> 
> 赞同：2
> 
> 时间：2012-10-05T15:08:46.810
> 
> 标签：objective-c, macros, nslog

我已经看到了有关包装 NSLog 的示例，但我不能 100% 确定细节。

例如`#define debugLog(fmt,...) NSLog(@"%@",[NSString stringWithFormat:(fmt), ##__VA_ARGS__]);`

这里的论点究竟是什么？

如果我想在日志中添加一个常量字符串，例如

```
- (void) logMessage:(NSString *) message ofType:(NSString *) type
{

    NSLog(@"%@ - %@", type, message);
} 
```

我将如何在#define 宏中创建它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T15:13:52.163

`debugLog`是一个可变参数宏（一个接受可变数量参数的宏）。特定的宏调用`NSLog`带有 2 个参数，第一个是格式字符串 ( `@"%@"`)，第二个是返回的自动释放字符串，`stringWithFormat`它采用传递的格式字符串加上宏的可变参数。

`__VA_ARGS__`是在宏中引用变量参数列表的方法。它对应`...`于参数列表中的 。

代替您的`logMessage`方法，您可以使用`debugLog`宏来实现相同的结果：

```
debugLog("%@ - %@", type, message); 
```

不过，宏本身似乎有点毫无意义，因为它只是包装`NSLog`而不添加任何其他内容。

如果您想要一个直接对应于 的宏`logMessage`，那么您根本不必处理可变参数列表：

```
#define logMessageAsMacro(message, type) NSLog(@"%@ - %@", message, type) 
```

您必须小心两个参数是否都是`NSString`'，因为宏是类型不安全的。

# regex - 哪种 Xpressive 方法最适合减少堆栈使用

> ID：12749067
> 
> 赞同：1
> 
> 时间：2012-10-05T15:08:49.683
> 
> 标签：regex, optimization, boost-xpressive

我在我当前的嵌入式 C++ 项目中广泛使用 Xpressive。

据我所知，Xpressive 是堆栈的出色用户。但是有没有更高效的 Xpressive 正则表达式方法？

例如，匹配表示 32 位整数的字符串的正则表达式可能需要测试数字 6 是否小于或等于 6。

Xpressive（以及其他正则表达式引擎，我知道）允许多种方法，例如：

```
range('0','6') 
```

或者

```
('0'|'1'|'2'|'3'|'4'|'5'|'6') 
```

或者

```
set['0'|'1'|'2'|'3'|'4'|'5'|'6'] 
```

然后正则表达式可能允许 3 个以下数字，例如：

```
repeat<3>(_d) >> _b 
```

或者

```
_d >> _d >> _d >> _b 
```

但是，考虑到选择，并且不太关心源代码布局，哪种方法最适合：

a) 堆栈；

b) 速度；

C） ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T23:43:21.930

排序和重复会用完堆栈，因为它们需要*回溯*。让我们看看你的例子。

```
range('0','6') 
```

这是为了快速检查字符是否在字符范围内而实现的。它不使用排序或重复，因此不会占用堆栈空间。

```
('0'|'1'|'2'|'3'|'4'|'5'|'6') 
```

一般来说，不要把可以放在集合或范围中的东西替换掉。对于这种事情，它们的效率要高得多。我会注意到，这显然不是一个有效的 xpressive 正则表达式。你可以这样写：

```
(as_xpr('0')|'1'|'2'|'3'|'4'|'5'|'6') 
```

我相信你知道这一点。我将对此进行类似的编辑：

```
set[as_xpr('0')|'1'|'2'|'3'|'4'|'5'|'6'] 
```

套路很快。它们被实现为 ascii 范围的查找表和（对于 Unicode）256 以上字符代码的稀疏向量。由于某些集合的稀疏性，这种方案可以比简单范围占用更多的堆空间。但这不会影响匹配一个时使用的堆栈空间量。我会注意到你也可以把它写成：

```
(set= '1','2','3','4','5','6') 
```

现在重复：

```
repeat<3>(_d) >> _b 
```

正如我之前所说，重复通常是通过递归来实现的，以获得正确的回溯。但在这种情况下，xpressive 识别出`_d`只能吃掉一个字符，并且它被准确地重复了 3 次。所以*在这种有限的情况下*，它是用一个循环来实现的，以节省堆栈空间。这与下一个案例形成对比：

```
_d >> _d >> _d >> _b 
```

Xpressive 不够聪明，无法以`_d >> _d >> _d`与`repeat<3>(_d)`. 因此，这将为每个`_d`.

短版：更喜欢专门的构造，而不是更通用的构造。这为优化提供了更多的上下文。

此外，了解独立的子表达式。如果你可以在 a 中放一些东西`keep()`，那就去做吧。为什么？`keep()`匹配一个子表达式，然后回收该子匹配使用的堆栈空间。这使得通过回溯到该子表达式来尝试不同的事情变得不可能，但有时你不需要它。

希望有帮助。

# c# - 如何使用 EWL 将自定义样式表添加到 Web 应用程序？

> ID：12749068
> 
> 赞同：1
> 
> 时间：2012-10-05T15:08:50.997
> 
> 标签：c#, asp.net, .net, css, enterprise-web-library

我正在尝试使用 Enterprise Web Library 来快速启动一个 Web 应用程序，并且我想添加一个自定义样式表。我不确定如何在应用程序中引用样式表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:08:15.403

假设您的样式表位于 Web 应用程序项目中`Styles/MyStyles.css`。在您的班级中，像这样`Global.asax`覆盖：`EwfApp.GetStyleSheets`

```
protected override List<CssInfo> GetStyleSheets() {
  return new List<CssInfo> { new Styles.MyStyles.Info() };
} 
```

除非您在创建 CSS 文件*后*运行 UpdateDependentLogic，否则此代码不会编译。这就是`Info`为您的样式表创建类的方式。

# android - 每 X 次检查一次服务器，看看是否添加了新内容

> ID：12749071
> 
> 赞同：0
> 
> 时间：2012-10-05T15:08:59.063
> 
> 标签：android, webserver

我需要我的安卓应用

每 X 次检查一次服务器，看看是否添加了新内容 - 然后使用添加的新数据。

我到底是怎么做到的>？

你建议我应该使用什么样的服务器？（数据仅是“字符串”格式）

样品会有帮助！

提前谢谢汤姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:28:43.690

如果您有自己的服务器，只需使用 GCM 并向手机推送一条消息，告诉它有新内容。然后它可以去得到它。这将使用更少的电池和数据流量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:31:12.373

我同意 Shane Hsu 的观点，最好使用 Google 的推送服务 (GCM) ( [http://developer.android.com/guide/google/gcm/index.html](http://developer.android.com/guide/google/gcm/index.html) )。如果这是一个过大的杀伤力，只需执行一个 http-request：

```
private void loadData(String url){
    String result = "";

    try {
        URL url = new URL(url);
        HttpURLConnection conn = (HttpURLConnection) url.openConnection();

        conn.setDoOutput(true);

        OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
        wr.write(data);
        wr.flush();

            BufferedReader inStream = new BufferedReader(new InputStreamReader((conn.getInputStream())));

            String str = "";
            if((str = inStream.readLine()) != null){
                    result = str;
            }

            inStream.close();
    } catch (MalformedURLException e) {
            e.printStackTrace();
    } catch (IOException e) {
            result = "";
    }

    return result;
} 
```

因为这个任务需要很长时间才能执行，你应该把它放在一个线程中。像这样称呼它：

```
new Thread(){
  public void run() {
    loadData("your url"); // save the result in some instance variable
  }
}.start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T15:13:34.877

就个人而言，我认为这不会有效。考虑到您拥有的用户越多，它就会疯狂地查询您的服务器。

如果数据只是字符串，则将其放入 HTML 网页甚至 txt 文件中即可。每次您想查询时，请阅读该 HTML 页面或下载该 txt 文件。

在任何类型的操作系统上，Apache 都非常好。我建议你从那里开始。

无论如何，如果 X 是一个非常小的数字，比如每 5 秒，我会建议你重新考虑你的方法。如果是一两天就好了。

# android - 提交 OG 在移动应用程序中使用的内置操作以供 FB 批准

> ID：12749075
> 
> 赞同：2
> 
> 时间：2012-10-05T15:09:10.167
> 
> 标签：android, ios, facebook, facebook-graph-api

我正在开发移动（Android/iOS）应用程序，该应用程序将与 FB 集成并具有 Like 操作。我没有将动作复制为自定义动作，而是选择使用[内置的 Like](https://developers.facebook.com/docs/opengraph/actions/builtin/likes/)。本机应用程序的正常程序似乎提供屏幕截图。但是，内置显然是特例。单击提交时，我得到带有以下警告的红色框：

> 内置操作类型要求您提供说明，以在正常运行的测试环境中将应用的 Open Graph 集成作为您的 Open Graph 测试用户使用。未能提供有效的测试环境将导致您的操作类型被拒绝。

我应该如何为未发布的移动应用程序提供*“功能测试环境” ？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T02:04:52.830

如果您有一个未发布的移动应用程序，您可以只提供屏幕截图，即使您使用的是内置操作类型。

# mysql - 这个查询有什么问题，多次插入

> ID：12749081
> 
> 赞同：0
> 
> 时间：2012-10-05T15:09:15.630
> 
> 标签：mysql, select, error-handling, insert

这个 MySQL 查询有什么问题，我该如何解决？

```
SELECT f.uniqueidentifier FROM db.engine4_passport_userforms uf
INNER JOIN db.engine4_passport_forms f ON uf.form_id = f.form_id
WHERE uf.user_id = 10
INSERT INTO db.engine4_passport_registrationchildren (parentid, `First Name`, Surname, Relationship) VALUES ( f.uniqueidentifier, '', '', '')
INSERT INTO db.engine4_passport_registrationcontactdetails (Address, Telephone, UID, Postcode) VALUES ('3 street', '',  f.uniqueidentifier, 'aaaaaa')
INSERT INTO db.engine4_passport_registrationcontactprefs (parentid, prefs) VALUES ( f.uniqueidentifier, 'Post Email ')
INSERT INTO db.engine4_passport_registrationfoundus (parentid, medium, `reason for joining`) VALUES ( f.uniqueidentifier, '', '')
INSERT INTO db.engine4_passport_registrationhousehold (parentid, `chief earner occupation`, `number of people`, `number of children`) VALUES ( f.uniqueidentifier, 'build', '1', '0')
INSERT INTO db.engine4_passport_registrationinterests (parentid, interest) VALUES ( f.uniqueidentifier, '')
INSERT INTO db.engine4_passport_registrationpersonaldetails (parentid, ethnicity) VALUES ( f.uniqueidentifier, 'White')
INSERT INTO db.engine4_passport_registrationqanda VALUES ( f.uniqueidentifier, '4', '1', '1', '1', '3', '3', '5', '5', '3', '4', '5', '4')
INSERT INTO db.engine4_passport_registrationteam (parentid, team?, `no of team members`, relationship) VALUES ( f.uniqueidentifier, 'No', '', '')
INSERT INTO db.engine4_passport_registrationuserlink (userid, regformUID) VALUES ('10',  f.uniqueidentifier); 
```

这是我得到的错误：

```
Script line: 1  You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INSERT INTO db.engine4_passport_registrationchildren (parentid, `Fir' at line 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:12:18.840

这些是**多个**查询，而不仅仅是**一个**。在两者之间添加`;`以将它们分开：

```
select ....
inner join ...
where ...;

insert into ...;
values ...

... 
```

## 编辑

如果要使用先前选择的值，则可以使用变量。例子：

```
SELECT @var := f.uniqueidentifier 
FROM db.engine4_passport_userforms uf
INNER JOIN db.engine4_passport_forms f ON uf.form_id = f.form_id
WHERE uf.user_id = 10;

INSERT INTO db.engine4_passport_registrationchildren (parentid, `First Name`, Surname, Relationship) 
VALUES (@var, '', '', ''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:12:38.030

多个查询必须由 simicolon 终止`;`。没有分号的单个查询是可以的，但是如果您向 mysql 服务器发送多个查询，它们必须被终止`;`

# c++ - 为什么我不能访问 openCV 中的矩阵元素？

> ID：12749083
> 
> 赞同：0
> 
> 时间：2012-10-05T15:09:27.087
> 
> 标签：c++, arrays, opencv, for-loop, matrix

我正在尝试访问来自将视频帧转换为灰度的 openCV 矩阵元素。我的代码是这样的：

```
int C = 3; 
cv::Mat grayPrevious;
cv::cvtColor ( previousFrame, grayPrevious, CV_RGB2GRAY  );
double* grayPtr = grayPrevious.ptr <double> ();

double mean [600][800][3];

///... // set some values to mean here

for ( int i = 0; i < 600; i ++ )
{
    for ( int j = 0; j < 800; j ++ )
    {
        for ( int m = 0; m < C; m ++ )
        {
            diff [i][j][m]= abs(grayPtr[ 800* (i-1)+j] - mean[i][j][m]);
        }

    }
} 
```

但它在 for 循环中崩溃。这与数据类型有关吗？我怎样才能改变它？

此外，我的第二个问题是，我尝试使用“grayPrevious.at”在屏幕上查看 grayPrevious 矩阵的元素，但它显示的值如“-5.235125e+30”代表“double”，或“-11242433”代表“诠释”。这也让我感到困惑，我期待看到 0 到 255 之间的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:21:29.337

您应该使用`uchar`代替`int`或`double`因为您正在处理灰度图像。（您可以将其`uchar`转换为打印`cout<<(int)grayPrevious.at<uchar>(i,j);`：）

您是否有任何理由尝试“艰难地”直接访问像素？您可以这样做`grayprevious.at<uchar>(i,j)`（假设您的图像是 800x600）更容易调试，然后使用直接像素访问。

编辑：我认为应该是：

`uchar* grayPtr = grayPrevious.ptr <uchar> ();`进而`grayPtr[grayPrevious.cols*i+j];`

你也可以这样做`grayPrevious.data[grayPrevious.cols*i+j];`（仍然直接访问没有`ptr`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T15:17:06.590

我严重怀疑这条线可能是问题

```
 for ( int m = 0; m < C; m ++ ) 
```

当您的循环正在运行并崩溃时，检查您的 C 值，也许意味着尝试访问数组边界之外的元素。很可能它超过 3。为什么不使用预增量运算符。在此示例中可能不相关，但使用前增量运算符而不是后增量运算符是一种很好的做法。

# objective-c - 无法从目标 C 中的 JSON Web 服务获取值

> ID：12749085
> 
> 赞同：0
> 
> 时间：2012-10-05T15:09:42.290
> 
> 标签：objective-c, ios, json, core-data

我有一个具有以下结构的网络服务。

```
{

    "media": {
        "albums": [
            {
                "name": "FC Bazel - KRC Genk",
                "date": "04.10.2012",
                "pictures": [
                    {
                        "url": "http://www.krcgenk.be/images/gallery/album_198/800X600/8162f172f8e5739c535c97b7bb6ca276.jpg"
                    },
                    {
                        "url": "http://www.krcgenk.be/images/gallery/album_198/800X600/5635d20351aacef78563dee347468227.jpg"
                    }
] 
```

我将我的相册和图片保存在我的核心数据数据库中的单独实体中。我得到以下值。

```
+ (NSArray *)getAlbums
{
    NSString *request = [NSString stringWithFormat:@"http://www.krcgenk.be/mobile/json/request/media/type/ipad"];
    return [[self executeGenkFetch:request] valueForKeyPath:@"media.albums"];
}
+ (NSArray *)getPictures
{
    NSString *request = [NSString stringWithFormat:@"http://www.krcgenk.be/mobile/json/request/media/type/ipad"];
    return [[self executeGenkFetch:request] valueForKeyPath:@"media.albums.pictures"];
} 
```

我定义如下的值。

```
#define ALBUMS_NAME @"name"
#define ALBUMS_DATE @"date"

#define PICTURES_URL @"pictures.url" 
```

所有的东西都适合专辑。但是当它试图获取图片中的 url 时，它会因以下错误而崩溃。

```
__NSArrayI objectForKey:]: unrecognized selector sent to instance 0xa48a460
2012-10-05 17:06:50.201 RacingGenk[97248:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSArrayI objectForKey:]: unrecognized selector sent to instance 0xa48a460 
```

有人可以帮忙吗？

亲切的问候。

- - -编辑 - -

```
+ (Picture *)pictureWithGenkInfo:(NSDictionary *)genkInfo
          inManagedObjectContext:(NSManagedObjectContext *)context
                     withAlbumId:(int)albumId
                   withPictureId:(int)pictureId;
{

    Picture *picture = nil;

    picture = [NSEntityDescription insertNewObjectForEntityForName:@"Picture"
                                          inManagedObjectContext:context];
    NSLog(@"methode komt tot hier");
    picture.url                     = [genkInfo objectForKey:PICTURES_URL];

return picture
} 
```

'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:30:12.170

您可以使用 media.albums 获取专辑，因为专辑是键“媒体”的值，但“图片”不是键专辑的值——该值是字典的数组（因此是您的错误消息）。我不知道这是否可行，但你可以试试这个：

```
NSArray *arr = [[self executeGenkFetch:request] valueForKeyPath:@"media.albums"];
return [[arr objectAtIndex:0] valueForKey:@"pictures"]; 
```

# php - PHP 中的插件架构

> ID：12749087
> 
> 赞同：2
> 
> 时间：2012-10-05T15:09:55.273
> 
> 标签：php, plugins

> **可能重复：**
> [允许 PHP 应用程序插件的最佳方式](https://stackoverflow.com/questions/42/best-way-to-allow-plugins-for-a-php-application)
> [PHP Event-Listener 最佳实践实现](https://stackoverflow.com/questions/4471183/php-event-listener-best-practice-implementation)

我正在用 PHP 构建一个简单的类似 CMS 的应用程序，它应该允许管理员通过插件（从管理区域内）启用附加功能。

目前它基于观察者模式，它的工作方式如下：

*   每个插件都必须扩展一个抽象类
*   除了一个“init”方法外，插件（子类）定义的所有方法都被视为观察者。
*   抽象类的构造函数是最终的，它用于`get_class_methods`将这些观察者映射到事件。
*   从应用程序启动到结束，它会通知这些观察者它的事件，例如`app_start`//等`process_request` ， `app_end`并执行观察者函数，应用程序实例作为第一个参数，因为应用程序也充当插件可以的服务容器用于访问其他组件，例如 db。

这是在 PHP 中实现插件架构的好方法吗？还是有更好的方法？我已经运行了这个，但是当我向抽象类添加新的 API 时，子类可以使用它开始感觉很奇怪:)

# matlab - 分配给超类

> ID：12749091
> 
> 赞同：0
> 
> 时间：2012-10-05T15:10:12.757
> 
> 标签：matlab, matlab-class

如何分配给对象的超类？

例子：

```
classdef foo < bar
...
  methods
    function this = barSet(this,b)
      % Here I want to arrange that bar(this) == b
    end
  end
end 
```

我如何（或可以）实施`barSet`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:11:40.060

当搞乱基类时，你应该使用`@`-syntax（在[这里](http://www.mathworks.nl/help/matlab/matlab_oop/modifying-superclass-methods-and-properties.html)阅读）。例如：

```
classdef foo < bar
...
  methods
    function this = barSet(this,b)
        %# call method in bar
        barSet@bar(this, b);
        ...
    end
  end
end 
```

该方法`barSet`是`foo`和中的一种方法`bar`。

这是 Matlab 扩展重载方法的方式：如果省略 中的`barSet(this,b)`定义`foo`，则调用

```
F = foo;
F.barSet(5); 
```

将使用参数调用`barSet`类中的方法。如果你定义它，该方法可以完全做其他事情，或者*首先*做版本中所做的事情，然后是更专业的东西（上面写为）。`bar``5`*`bar``'...'`*

 *现在这有帮助吗？因为我并不完全清楚你想要什么。我不明白你的意思`bar(this) == b`- 是or`b`的一个实例？你是什​​么意思？复制构造函数？那么我是否正确理解您的意思是您想用实例覆盖实例？`foo``bar``bar(this)``this``b`*

# iphone - 如何在 ccos2d 中显示按钮的动画效果

> ID：12749093
> 
> 赞同：0
> 
> 时间：2012-10-05T15:10:13.507
> 
> 标签：iphone, cocos2d-iphone

我有一个菜单屏幕，在那个屏幕上我有 5 个按钮..在游戏开始时，它显示启动屏幕，然后是这个菜单屏幕，它工作正常，但我需要在这个页面上显示一些动画，我必须先显示背景图像，1 或 2 秒后，这 5 个按钮必须从屏幕两侧弹出 bttom，顶部和左侧，右侧部分。如何做到这一点。

预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:24:08.523

您可以通过操作轻松完成。在`onEnter`您的菜单场景/图层的方法中，在每个按钮上运行所需的操作。您应该将初始位置设置为不在屏幕内的按钮，然后运行例如 CCMoveTo 操作以正确放置它们。

```
// after init button somewhere
[_button setPosition: initialPosition];

- (void) onEnter
{
    [super onEnter];

    id moveAction = [CCMoveTo actionWithDuration:1.f position:newPosition];
    [_button runAction: moveAction];
} 
```

# android - 带有独立视频的应用程序

> ID：12749095
> 
> 赞同：0
> 
> 时间：2012-10-05T15:10:23.070
> 
> 标签：android, ios, video

客户想要一个应用程序，理想情况下视频是独立的，因此没有托管或流媒体问题。将有大约 80 个 1 分钟的视频。这在 Android 和 iOS 上有多实用？我应该鼓励客户使用流媒体或其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-05-05T16:11:31.953

这实际上取决于您希望您的用户能够在离线或不离线时使用该应用程序的天气。如果您需要您的用户能够在离线时观看视频，您必须将它们包含在您的应用中。80 个一分钟的视频，经过适当压缩和编码以尽可能少地占用存储空间 - 应该不会出现问题（它们应该占用少于 100MB 的存储空间）。

祝你好运！

# imagemagick - 将 PDF 转换为 JPG - 两页跨页？

> ID：12749099
> 
> 赞同：4
> 
> 时间：2012-10-05T15:10:38.593
> 
> 标签：imagemagick

我编写了一个脚本来使用 ImageMagick 将每个页面的 PDF 转换为 JPG，以及调整大小/等。

稍微棘手的地方是一些 PDF 将中间的两页展开为“一页” - 所以它特别宽。有没有办法“检测”这个并将左右两侧裁剪为两个单独的页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T16:19:47.573

假设您想为此使用 ImageMagick（并且*只有*ImageMagick）：那是做不到的。ImageMagick 无法单独处理 PDF 输入。无论如何，它必须使用 Ghostscript，因此如果没有本地 Ghostscript 安装，它将无法工作。（当您将 PDF 输入提供给 ImageMagick 时，您不一定会*看到*`-verbose`Ghostscript 在工作，除非您在其命令行中添加 a，因为 ImageMagick 将工作委托给 Ghostscript 是在您背后发生的......）

你的问题有两个部分：

*   *“有没有办法“检测”超宽页面，比如中心展开？”*
*   *“有没有办法将中间跨页的左右部分裁剪为两个单独的页面？”*

## 检测页面大小

您可以使用 ImageMagick`identify`来检测 PDF 的页面大小。

只需运行最简单的命令：

识别多页.pdf

输出将是 s.th。像

```
multipage.pdf[0] PDF 595x792 595x792+0+0 16-bit Bilevel DirectClass 59.5KB 0.000u 0:00.000
multipage.pdf[1] PDF 595x792 595x792+0+0 16-bit Bilevel DirectClass 59.5KB 0.000u 0:00.000
multipage.pdf[2] PDF 595x792 595x792+0+0 16-bit Bilevel DirectClass 59.5KB 0.000u 0:00.000
multipage.pdf[3] PDF 595x792 595x792+0+0 16-bit Bilevel DirectClass 59.5KB 0.000u 0:00.000 
```

输出的页数从 0 开始。so`[0]`表示第一页、`[1]`第二页等。

要更好地自定义输出，您可以这样做：

```
identify -format '%f, page %s + 1: %W x %H\n' multipage.pdf 
```

并得到

```
multipage.pdf, page  0 + 1: 595 x 792
multipage.pdf, page  1 + 1: 595 x 792
multipage.pdf, page  2 + 1: 595 x 792
multipage.pdf, page  3 + 1: 595 x 792 
```

对于双跨页，相应的输出应该是`1190 x 792`或相似的。

**但是，请注意：**使用 ImageMagick 查询 PDF 文件的页面大小非常缓慢。因此，最好为这个子任务使用不同的工具：`pdfinfo`. 这将快几个数量级：

```
pdfinfo -f 1 -l 1000 -box multipage.pdf 
```

将输出

```
Pages:          4
Page    1 size: 595 x 792 pts
Page    1 rot:  0
Page    2 size: 595 x 792 pts
Page    2 rot:  0
Page    3 size: 595 x 792 pts
Page    3 rot:  0
Page    4 size: 595 x 792 pts
Page    4 rot:  0 
```

如果您需要有关页面的 ArtBox、TrimBox、BleedBox 和 CropBox 值的其他信息，只需添加`-box`到命令行。

正如我所说：`pdfinfo`识别 PDF 的页面大小比 ImageMagick 快得多。**为工作使用正确的工具。**

## 裁剪页面的左右部分

现在您已经确定了大的双展开页面，您可以使用以下方法之一（基于 Ghostscript）来拆分中间的页面：

*   [**如何使用 Ghostscript 将 PDF 文件的一部分裁剪为 PNG**](https://stackoverflow.com/a/12485020/359307)
*   [**将一个 PDF 页面一分为二**](https://stackoverflow.com/a/11521648/359307)
*   [**将 PDF 每页 2 面转换为每页 1 面**](https://superuser.com/a/189109/40894)
*   [**如何将 PDF 的页面从中间拆分？**](https://superuser.com/a/235401/40894)

调整上述链接中描述的方法将导致 2 个 PDF 页面仍包含其所有原始矢量和字体信息。

或者，您可以使用 ImageMagick。假设您的“双展开”页面尺寸为 1190x842 pt，基于 A4（595x842 pt），并假设它是`[15]`原始 PDF 中的第 16 页（转换为 ImageMagick），您的`convert`命令可能是 s.th。像：

```
convert  multipage.pdf[15]  -crop 595x842+0+0    page16-left.png
convert  multipage.pdf[15]  -crop 595x842+595+0  page16-right.png 
```

结果为您提供了两个光栅图像。

# ruby - 使用 template.erb 创建文件

> ID：12749101
> 
> 赞同：12
> 
> 时间：2012-10-05T15:10:54.813
> 
> 标签：ruby, erb, chef-infra

我对 ruby​​ 和 chef 还很陌生，我想知道是否有办法使用模板创建文件？我尝试搜索它，但找不到太多东西。我尝试创建一个黑名单文件并通过厨师将一些正则表达式插入其中。所以我想`template.erb`在运行 chef 时添加属性并使用 a 创建文件。任何提示，指针？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-05T16:29:22.123

Chef 具有名为[template](http://wiki.opscode.com/display/chef/Resources#Resources-Template)的特殊资源，用于从模板创建文件。您需要将模板放在模板/默认目录下的食谱中，然后在您的食谱中使用它，并提供变量。

**食谱/my_cookbook/templates/default/template.erb：**

```
# template.erb
A is: <%= @a %>
B is: <%= @b %>
C is: <%= @c %> 
```

**食谱/my_cookbook/recipes/default.rb：**

```
template "/tmp/config.conf" do
  source "template.erb"
  variables( :a => 'Hello', :b => 'World', :c => 'Ololo' )
end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T15:14:01.947

```
require 'erb'
class Foo
  attr_accessor :a, :b, :c
  def template_binding
    binding
  end
end

new_file = File.open("./result.txt", "w+")
template = File.read("./template.erb")
foo = Foo.new
foo.a = "Hello"
foo.b = "World"
foo.c = "Ololo"
new_file << ERB.new(template).result(foo.template_binding)
new_file.close 
```

所以`a`，`b`现在`c`可以作为模板中的变量使用

IE

```
# template.erb
A is: <%= @a %>
B is: <%= @b %>
C is: <%= @c %> 
```

结果 =>

```
# result.txt:
A is Hello
B is World
C is Ololo 
```

# html - 在 HTML 中，我们不必指定图像文件的文件扩展名吗？

> ID：12749107
> 
> 赞同：1
> 
> 时间：2012-10-05T15:11:13.867
> 
> 标签：html

很长一段时间，我一直在使用

> [http://www.w3.org/Icons/valid-html401](http://www.w3.org/Icons/valid-html401)

作为图像，但我只是检查了[http://www.w3.org/Icons](http://www.w3.org/Icons)实际上没有那个文件或文件夹，而是几个名称`valid-html401.___`为 gif 或 png 的图像。

所以很奇怪：好像很久（即使是IE 6），我们都可以指定一个`<img src="http://www.w3.org/Icons/valid-html401">`不带图片文件扩展名的图片？有什么规律？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T15:12:55.067

规则是：URL 不是文件名。

数据类型由 Content-Type HTTP 响应头决定，而不是 URL 的格式。

Web 服务器可以根据自己的喜好决定为给定的 URL 提供什么内容（以及发送什么 Content-Type 标头）。

*将 URI 直接映射到文件系统并从扩展*中确定内容类型只是一种简单而常见的方法。

其他选项包括[Apache Multiviews](http://httpd.apache.org/docs/current/content-negotiation.html)和使用编程语言（通常使用诸如[Dancer](http://perldancer.org/)之类的框架）来决定使用您喜欢的任何自定义逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T15:13:19.747

您正在制作一个 HTTP GET。响应将在标头中包含内容类型（例如 image/jpeg），文件名只是为了方便人类。这就是 /xxxxx.do URL 可以返回 HTML 等的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T15:13:53.537

这是在服务器端完成的，而不是由客户端完成的。您不需要图像的扩展名，除非图像具有扩展名。您没有理由不能编写 404 请求来搜索类似匹配并显示它。

# devexpress - 在运行时动态改变 DevExpress 报告的格式？

> ID：12749108
> 
> 赞同：1
> 
> 时间：2012-10-05T15:11:14.490
> 
> 标签：devexpress, xtrareport

是否可以有一个具有相同或相似数据的报告并在运行时更改报告的格式，例如，一个报告的左上角有客户姓名，而另一个报告的右上角有什么就像一份报告显示客户最近 10 个订单，而另一个报告显示最后 5 个订单，每个订单的标题都不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T15:03:11.763

是的。您可以在报表的构造函数或 before_print 事件中创建和添加 - 或移动 - 控件。实际上，您在设计器中实际所做的是修改报表的 InitializeComponent() 函数，然后在运行时从构造函数调用该函数。

正如之前的海报所提到的，了解如何执行此操作的一个好方法是浏览 .designer 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T21:18:57.513

对于不同的特殊格式，您可以在设计时制作并从 .designer 文件中获取其代码并将其剪切并粘贴到新函数中。

对于特殊高度，您可以在分配文本后获取每个对象的高度，然后计算下一个对象的位置。

```
xrRichText1.LocationFloat = new DevExpress.Utils.PointFloat(25F, hed + 10F); 
```

# static - 为什么 REBOL 布局似乎是持久的？

> ID：12749109
> 
> 赞同：1
> 
> 时间：2012-10-05T15:11:15.977
> 
> 标签：static, foreach, rebol

我有这个代码：

```
REBOL [Title: "Employee list"]

screen1: does [

    emp-list: [
        "Amy" 1
        "Bob" 2
        "Carrie" 3
    ]

    gui-layout: [ text "click your name" ]

    foreach [emp-name emp-id] emp-list [
        append gui-layout compose/deep [
        box (emp-name) [screen2 (emp-id)]
        ]
    ]

    view layout gui-layout
]

screen2: func [emp-id] [

    choice-list: [
        "A" 11
        "B" 22
    ]

    gui-layout: [
        box "<-- back to names" [screen1]
        text reform ["clicked id " emp-id ", now choose below"]
    ]

    foreach [choice-name choice-id] choice-list [
        append gui-layout compose/deep [
        box (choice-name) [print [(emp-id) (choice-id)]]
        ]
    ]

    view layout gui-layout
]

screen1 
```

现在，如果您单击某人然后单击“返回”，菜单就会增长。（如果您单击其他人，第二个菜单也会增长。）我发现的一种解决方法（？）是在修复第一个屏幕`clear emp-list`之前放置`view layout gui-layout`这样做。然而，如果我`print emp-list`在那里，我可以看到它并没有`emp-list`在增长。怎么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T19:03:47.107

您正在使用函数的持久性功能。

看

```
persist: has [ a ] [ a: [] append a random 100 print a ]

no-persist: has [ a ] [ a: copy [] append a random 100 print a ] 
```

做你想做的事，在你要附加的每个系列之前放一个'副本

```
gui-layout: copy [ text "click your name" ] 
```

和

```
gui-layout: copy/deep [
        box "<-- back to names" [screen1]
        text reform ["clicked id " emp-id ", now choose below"]
    ] 
```

# javascript - javascript - chrome扩展：操作js文件同目录下的txt文件

> ID：12749110
> 
> 赞同：1
> 
> 时间：2012-10-05T15:11:20.040
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在编写一个 chrome 扩展来做一些简单的事情。现在，我创建了一个`.txt`包含一些 url 的文件，并将其存储在同一个目录中，该`.js`文件包含逻辑，从他那里读取并写给他（我会在我知道如何创建时创建）。

问题是，我没有找到任何有关使用 javascript 访问文件的信息。

所以我想也许是不可能的？

*   该扩展程序不会上传到 chrome 商店，因此它只能在我的 PC 上运行。

*   如果不可能，你能推荐我用不同的方法来实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T10:08:35.143

`chrome.*`API 不提供任何方法来执行文件 I\O。`chrome.storage`但是，它允许您使用API 或使用更老式的API读取/写入数据`chrome.cookies`。我建议使用它`chrome.storage`来实现您的目标。

# windows-phone-7 - windows phone 上的全屏广告

> ID：12749111
> 
> 赞同：0
> 
> 时间：2012-10-05T15:11:20.620
> 
> 标签：windows-phone-7

我可以在我的 Windows Phone 应用程序中显示全屏广告吗？
关于我将如何实现这一目标有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:29:18.217

因此，您当然可以在屏幕上向用户展示您喜欢的任何内容（当然，在 Marketplace 的限制范围内）。但是，如果您的问题是是否有可用的框架来执行此操作，我相信答案是否定的。目前，支持全屏的谷歌广告框架仅适用于 iOS 和 Android，微软广告网络没有全屏选项。

您当然可以自己销售广告，但这很麻烦。您可能会找到一个广告网络，该广告网络销售的网络广告尺寸大致合适，但请确保您检查他们的条款和条件以允许在设备上使用（这也需要使用 WebBrowserControl 来显示这些广告，这不会很糟糕；只是一些额外的设置）。

# osb - 关于运行 OSB 基础示例

> ID：12749114
> 
> 赞同：2
> 
> 时间：2012-10-05T15:11:28.403
> 
> 标签：osb

当我尝试运行托管在`java.net`.

它要在`Weblogic Server 10.3.x 11gR1 Patchset 2`.

我已经安装了最新版本的`OEPE+Weblogic Server`和`OSB`.

我仍然收到以下错误：

```
Target runtime `Oracle Weblogic Server 11gR1 Patchset2` not defined. 
```

在新的*服务器向导*中，我找不到`WLS 11R1 Pacthset2`。我只知道`Oracle Weblogic Server(10.3.6) 11gR1`哪个是`without a pacthset`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T20:36:04.107

右键单击 OSB-100 基础项目，转到 Properties，那里有 Targeted Runtimes 并检查 Oracle Weblogic Server(10.3.6) 11gR1 而不是 Weblogic Server 10.3.x 11gR1 Patchset 2。它对我有用。阿德里安

# jquery - 一次验证两个表格

> ID：12749115
> 
> 赞同：0
> 
> 时间：2012-10-05T15:11:34.303
> 
> 标签：jquery, validation, jquery-validate

我有这两种形式。一个收集个人资料数据（全是文本），另一个是图片上传表单。我把这两个分开来让事情变得更容易。我正在使用 jQuery 验证插件来验证配置文件数据表单，这很好。

我的问题是第二个。我如何验证两者，所以如果用户填写了他的个人资料数据但没有上传图片，表单将不会提交并会显示一条消息。你能提供什么建议吗？

Profile 数据表：

```
<form id="profileData">
//Form fields go here
<input type="submit" name="submit" value="Submit" />
</form> 
```

图片上传表格：

```
<form id="profileImage" method="post" enctype="multipart/form-data">
<input type="file" name="file" id="file" /> 
<input type="submit" name="submit" value="Submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:14:15.297

如果您同时验证两者，则没有理由不能使两者成为同一表单的一部分。如果您使用两个不同的表单，但两者之间共享验证约束，那么您的逻辑将始终失败，直到您将两者封装在同一个表单中。

改为这样做：

```
<form id="profileImage" method="post" enctype="multipart/form-data">
<input type="submit" name="submit" value="Submit" />
<input type="file" name="file" id="file" /> 
<input type="submit" name="submit" value="Submit" />
</form> 
```

# list - 在 ColdFusion 8 中未正确读取列表

> ID：12749121
> 
> 赞同：0
> 
> 时间：2012-10-05T15:11:57.360
> 
> 标签：list, coldfusion

使用 CFSEARCH，我将键变量包含为逗号分隔列表，以返回比四个自定义字段允许的更多信息。但是，系统抛出一个错误，指出无法找到列表项。

“key”变量的每条记录将具有以下格式：a,b,c

```
<cfsearch
  name="theCourses"
  collection="#arguments.collectionName#"
  type="simple"
  startrow="1"
  maxrows="100"
  criteria="#Lcase(Trim(arguments.searchCriteria))#"
  contexthighlightbegin="<b>"
  contexthighlightend="</b>"
  status="courseListStatus"
/>

<cfset courseList = QueryNew("ID, Score, Course, Subject, Day, Title, Semester, Status", "varchar, varchar, varchar, varchar, varchar, varchar, varchar, varchar") />
<cfloop query="theCourses">
  <cfset temp = QueryAddRow(courseList) />
  <cfset temp = QuerySetCell(courseList, "ID", custom3) />
  <cfset temp = QuerySetCell(courseList, "Score", score) />
  <cfset temp = QuerySetCell(courseList, "Course", ListGetAt(key, 2, ",")) />
  <cfset temp = QuerySetCell(courseList, "Subject", ListFirst(key, ",")) />
  <cfset temp = QuerySetCell(courseList, "Day", custom1) />
  <cfset temp = QuerySetCell(courseList, "Title", custom4) />
  <cfset temp = QuerySetCell(courseList, "Semester", custom2) />
  <cfset temp = QuerySetCell(courseList, "Status", ListLast(key, ",")) />
</cfloop> 
```

我收到以下错误：

> 无效的列表索引 2。
> 
> 在函数 ListGetAt(list, index [, delimiters]) 中，index 的值 2 作为第一个参数无效（此列表有 1 个元素）。有效索引的范围是 1 到列表中的元素数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:46:37.633

恐怕您断言密钥的格式为“a，b，c”在这种特殊情况下显然是错误的。否则你的代码会工作！

所以，就像任何“为什么这没有我期望的价值？” 在这种情况下，当事物出错时，转储导致错误的值，并观察它有什么问题。

在这种情况下：

```
<cftry>
    <cfset temp = QuerySetCell(courseList, "Course", ListGetAt(key, 2, ",")) />
    <cfcatch>
        <cfoutput>#key#</cfoutput>
        <cfdump var="#cfcatch#">
        <cfabort>
    </cfcatch>
</cftry> 
```

另外：如果您不打算使用它，则不需要在该表达式的 LHS 上设置 temp 变量（因为它总是“是”，我怀疑您不需要。这很好：

```
<cfset QuerySetCell(courseList, "Course", ListGetAt(key, 2, ",")) /> 
```

# c# - C#：关于允许在特定时间显示标签的方法的一些问题

> ID：12749124
> 
> 赞同：1
> 
> 时间：2012-10-05T15:12:07.297
> 
> 标签：c#

我在 google 中搜索了一种允许我在特定时间显示标签的方法，我发现了这个：

```
public void InfoLabel(string value)
        {
            if (InvokeRequired)
            {
                this.Invoke(new Action<string>(InfoLabel), new object[] { value });
                return;
            }
            barStaticItem3.Caption = value;

            if (!String.IsNullOrEmpty(value))
            {
                System.Timers.Timer timer = new System.Timers.Timer(6000) { Enabled = true };
                timer.Elapsed += (sender, args) =>
                {
                    this.InfoLabel(string.Empty);
                    timer.Dispose();
                };
            }

        } 
```

我真的无法特别理解这种方法：

- 为什么我们使用：`InvokeRequired`？

-这个方法有什么用：`this.Invoke()`？

-这是为了什么：`new Action<string>(InfoLabel)`？

- 为什么我们使用那个标志：`=>`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T15:22:17.527

所有与调用相关的东西都是因为编写该代码的人使用了错误的代码`Timer`（语言中有很多）。你应该在`System.Windows.Forms.Timer`这里使用。

```
public void InfoLabel(string value)
{
    System.Windows.Forms.Timer timer = new Timer();

    timer.Interval = 1000;//or whatever the time should be.
    timer.Tick += (sender, args) =>
        {
            label1.Text = value;
            timer.Stop();
        };
    timer.Start();
} 
```

表单计时器将在其自己的实现中包含代码，这些代码与您的示例中的代码类似（尽管我发现它是一种特别混乱的方式）。它将确保`Tick`事件在 UI 线程中运行，因此您无需添加所有样板代码。

是`=>`一个 lambda 表达式。这是一种定义新匿名方法的方法，该方法接受两个参数`sender`和`args`.

您也可以使用`Task`s 来解决这个问题，而不是使用计时器：

```
public void InfoLabel2(string value)
{
    Task.Factory.StartNew(() => Thread.Sleep(1000)) //could use Task.Delay if you have 4.5
        .ContinueWith(task => label1.Text = value
            , CancellationToken.None
            , TaskContinuationOptions.None
            , TaskScheduler.FromCurrentSynchronizationContext());
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T15:20:44.717

Many questions!

`InvokeRequired` is due to the multi-threaded nature of applications. A UI based application has a UI thread on which all the updates for the user interface are done. Updating a member of the control from a non-UI thread will throw a cross thread exception, using Invoke will marshal the update to the UI thread - which is legal.

The `Action<string>` is a delegate for a method, it will call the InfoLabel method when the delegate is called with the passed in arguments - e.g. action.Invoke("someString"). The => is a lambda expression which is used to create an anonymous method (e.g. a method with no name) which will be run instead of pointing to a named method

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T15:24:25.427

`InvokeRequired`检查代码当前是否在创建表单的线程上运行。如果不是，则该函数需要在 DID 创建表单的线程上调用自身，因为 WinForms 代码不是线程安全的。

Action 是一个委托类型，它描述了一个接受字符串的函数（参见 InfoLabel 函数？这就是它所指的）。

```
 this.Invoke(new Action<string>(InfoLabel), new object[] { value }); 
```

上面说的。请从函数 InfoLabel 创建一个 Action 类型的新委托，并使用创建它的线程调用它。当您调用它时，将对象“值”传递给它。即在创建表单的线程上调用 InfoLabel(value)。请注意，它之后直接从函数返回，因此函数的“肉”都没有在错误的线程上运行（此时我们在错误的线程上，否则 InvokeRequired 不会为真）。当 Invoke 再次运行该函数时，它将在正确的线程上，并且 InvokeRequired 将为 false，因此这段代码将不会运行。

```
timer.Elapsed += (sender, args) =>
                {
                    this.InfoLabel(string.Empty);
                    timer.Dispose();
                }; 
```

上面的代码为定时器的 Elapsed 事件分配了一个匿名方法。第一个位 (sender, args) 是描述方法的参数，然后`=>`是说“方法来了”，然后是一段代码（括号内的所有内容）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-05T15:16:33.753

`InvokeRequired`用于检查我们是否从控制持续存在`InfoLabel`的 UI 线程中调用该方法。`barStaticItem3`如果线程不同（InvokeRequired），则`this.Invoke(new Action<string>(InfoLabel), new object[] { value });`调用相同的方法 - 这会从 UI 线程中调用相同的方法。

```
timer.Elapsed += (sender, args) =>
            {
                this.InfoLabel(string.Empty);
                timer.Dispose();
            }; 
```

此代码创建一个[匿名方法](http://msdn.microsoft.com/en-us/library/0yw3tz5k%28VS.80%29.aspx)`timer`，然后在's`Elapsed`事件上调用该方法。实际上，这会在 6 秒（构造时的计时器间隔）后清除标签并处理`timer`对象，以便仅调用一次此匿名方法。

# jquery - 如何重构jquery“根据复选框选择只读”

> ID：12749127
> 
> 赞同：0
> 
> 时间：2012-10-05T15:12:11.273
> 
> 标签：jquery, input, refactoring, readonly

整个下午。

给大家一个小小的周五款待。

我有以下一点 jquery 使输入只读基于和另一个输入的选择：

[我真的很喜欢 jsfiddle](http://jsfiddle.net/ricardodeano/95dXh/)

这工作得很好，花花公子，以及我希望它如何工作。

但是，在我的情况下，我有大约 13 个 "checkbox1a" 及其关联的 checkbox1b 和 textbox1。

正如您从脚本中看到的那样，我可以复制此代码，但众所周知，复制和粘贴是不好的（尽管在星期五下午提出上诉）所以我想知道如何着手攻击它以便我可以最小化代码但达到同样的结果，

任何指针都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:16:27.963

您可以为所有这些编写单击事件。

```
var $tr = $(this).closest('tr');

// access checkbox b inside it

  $tr.find('[id*=checkbox][id$="b"]').attr('disabled', 'disabled');

// access textbox  inside it

  $tr.find('input[type="text"]').attr('disabled', 'disabled'); 
```

[检查小提琴](http://jsfiddle.net/sushanth009/95dXh/2/)

您可以编写一个单击事件来以这种方式处理所有复选框单击事件。

更好的方法是为复选框提供类而不是为它们提供 id。

复选框 a - class="checkboxa" 复选框 b - class="checkboxb" 文本框 - class="textbox"

[更新了课程的小提琴](http://jsfiddle.net/sushanth009/95dXh/3/)

这将使您的代码更清晰，更易于处理......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T15:21:11.537

只需添加一些类并做一些 jQuery 巫术。请参阅[jsfiddle](http://jsfiddle.net/nUMK8/2/)。

可以不向禁用/启用的控件添加类，但使用类可以更精细地控制启用/禁用的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T15:21:14.890

您可以将所有内容合并为一个更改事件 - 假设这些是您在页面上拥有的唯一复选框..或者您可以给它们一个类来选择它们

```
$('input[type=checkbox]').change(function(){
   var $this = $(this); 
   var $inputs = $this.closest('tr').find('input'); // get relative inputs
   $inputs.not($this).prop('disabled',$inputs[0].checked);  
   // disable fields if first checkbox is checked
}); 
```

[http://jsfiddle.net/EEuUw/](http://jsfiddle.net/EEuUw/)

[prop](http://api.jquery.com/prop/)也是设置 disabled 属性（jQuery 1.6+）的正确方法。这是来自 jQuery 文档

> 应该使用 .prop() 方法来设置禁用和检查，而不是 .attr() 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T17:52:52.463

我刚刚解决了类似的问题。以下是我的处理方式：

向复选框和文本框添加一个类，然后将 ID 的索引移动到字符串的末尾（使 jquery 更容易），所以它看起来像这样：

这是[小提琴链接](http://jsfiddle.net/hyXCD/3/)

```
<table>
    <tr>
        <td><input  class="checkboxa" type="checkbox" name="input1" id="checkboxa1"/> </td>
        <td><input  class="checkboxb" type="checkbox" id="checkboxb1" /></td>
        <td> <input type="text" id="texbox1" /></td>
    </tr>
    <tr>
        <td><input  class="checkboxa" type="checkbox" name="input2" id="checkboxa2"/> </td>
        <td><input  class="checkboxb" type="checkbox" id="checkboxb2" /></td>
        <td><input type="text" id="texbox2" /></td>
    </tr>
</table> 
```

使用这种方法，JQuery 可以直接定位控件，而不必上下遍历 DOM 试图用“最近”或“查找”找到控件。

```
$(function() {
    $('.checkboxa').click(function() {
        var index = $(this).attr('id').toString().substring(9);
        $('#checkboxb' + index).attr('disabled', $('#checkboxa' + index)[0].checked);
        $('#texbox' + index).prop('disabled', $('#checkboxa' + index)[0].checked);
    });
});​ 
```

# jquery - 使用 jQuery 更改输入数组名称

> ID：12749135
> 
> 赞同：0
> 
> 时间：2012-10-05T15:12:45.580
> 
> 标签：jquery, arrays

我有一些使用数组作为名称的字段，如下所示：

```
<select name="attr[address][#ID]">
<textarea name="address[#ID][cp]" placeholder="CP"></textarea> 
```

我想使用jQuery更改具有unqiue ID的所有字段的therm“#ID”，是否可以使用带有.attr（）函数的正则表达式来更改#ID？

问候， 阿德里安

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T15:23:57.177

您可以将 name 属性中所有出现的 替换`#ID`为单调递增的数字，如下所示：

```
var cntr = 1;
$("[name*='#ID']").each(function() {
    this.name = this.name.replace(/#ID/, cntr++);
}); 
```

# php - 当我的 html 标签来自我的 php 脚本时，为什么我的 javascript 函数不起作用

> ID：12749139
> 
> 赞同：1
> 
> 时间：2012-10-05T15:12:57.000
> 
> 标签：php, jquery, html

我想知道如果我的 html 标签来自 php 脚本，为什么我的 javascript 函数将不起作用？

这是我的jQuery代码：

```
$(function () {

//functions don't work

    $('ul li:gt(4)').hide();

    $('.prev').click(function() {
        var first = $('ul').children('li:visible:first');
        first.prevAll(':lt(5)').show();
        first.prev().nextAll().hide()
    });

    $('.next').click(function() {
        var last = $('ul').children('li:visible:last');
        last.nextAll(':lt(5)').show();
        last.next().prevAll().hide();
    });

//end of functions don't work

    $('.load').click(function() {
        $.ajax({
            url: 'load.php',
            success:function(data){
                $('#paging-container').html(data);
            }
        });
    });

}); 
```

这是我的html代码：

```
<input class="load" type="button" value="Load">
<div id="paging-container">

</div> 
```

这是我的 php 脚本：

```
 <?php  
    echo '<ul>';
    for($i=1;$i<=50;$i++){
        echo '<li>'.$i.'</li>';
    }
echo '</ul>
<a class="prev">prev</a> | <a class="next">next</a>';
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:15:40.290

您的代码隐藏元素并绑定`.prev`并`.next`在文档加载时运行，而不是在 ajax 加载时运行。将该代码粘贴在成功函数的行之后：

```
$('.load').click(function() {
    $('#paging-container').html(data);
    $('ul li:gt(4)').hide();
    $('.prev').click(function() { ... 
```

这样，它们将绑定到现在位于 DOM 中的对象上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T15:16:05.953

对于您使用的 jQuery 类型，HTML 标记必须在您运行初始 jQuery 时已经存在于您的页面中。事实上，它们不存在，因此没有附加事件处理程序。

你有几个选择来纠正这个问题：

1.  您可以使用动态形式的事件处理程序`.on()`
2.  您可以在将对象添加到页面后安装事件处理程序。

使用的动态形式`.on()`如下所示：

```
$("#paging-container").on('click', '.prev', function() {
    var first = $('ul').children('li:visible:first');
    first.prevAll(':lt(5)').show();
    first.prev().nextAll().hide()
});

$("#paging-container").on('click', '.next', function() {
    var last = $('ul').children('li:visible:last');
    last.nextAll(':lt(5)').show();
    last.next().prevAll().hide();
}); 
```

这里实际上附加了事件处理程序`#paging-container`，它使用委托事件处理来捕获发生在子对象上的事件。即使在安装事件处理程序之后添加/删除子对象，只要`#paging-container`自身没有被破坏，这也将起作用。

有关动态风格如何工作的一般描述，请参阅[这篇文章](https://stackoverflow.com/questions/8752321/jquery-live-vs-on-method-for-adding-a-click-event-after-loading-dynamic-ht/8752376#8752376)`.on()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T15:16:49.447

这是因为您在 php 加载到屏幕之前分配了事件处理程序。尝试执行在 jquery 加载语句 ala 的成功事件中不起作用的函数：

```
$.ajax({
            url: 'load.php',
            success:function(data){
                $('#paging-container').html(data);
                $('ul li:gt(4)').hide();

                $('.prev').click(function() {
                var first = $('ul').children('li:visible:first');
                first.prevAll(':lt(5)').show();
                first.prev().nextAll().hide()
                });

                $('.next').click(function() {
               var last = $('ul').children('li:visible:last');
                last.nextAll(':lt(5)').show();
                last.next().prevAll().hide();
                });
            }
        }); 
```

# objective-c - 从沙盒应用程序中“杀死”应用程序？

> ID：12749141
> 
> 赞同：0
> 
> 时间：2012-10-05T15:13:02.413
> 
> 标签：objective-c, cocoa, app-store, kill, appstore-sandbox

好的，听起来很简单：

*   我有一个完整的应用程序
*   根据 App Store 当前的指南，我正在尝试将其“沙盒化”。

事情是 ：

*   该应用程序正在后台（作为`NSTask`）、`/bin/kill`命令执行，当我尝试执行它时（启用沙盒权利），我收到以下错误：

> 杀死：1298：不允许操作

很明显。但是，有什么方法可以在兼容沙盒的应用程序中**绕过它？**

* * *

**提示：**我的目标是能够杀人`app B`，来自`app A`：还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T06:22:49.383

您的应用程序必须经过沙盒处理，因此它可以在自己的隔离环境中运行。它不能杀死任何其他应用程序。

我在应用商店中有使用 kill 命令的应用，但它没有沙盒化，所以我能做的就是修复 6 月 1 日以来的错误。

那时没有针对 kill 命令的指导方针，但现在根本不可能。

# ajax - 以什么顺序将技能升级到：Ajax、Spring MVC 和 JSF 2.0？

> ID：12749143
> 
> 赞同：-2
> 
> 时间：2012-10-05T15:13:08.670
> 
> 标签：ajax, jsf, spring-mvc

我是 Jr. Java MVC 程序员，目前的技能是：

1.  核心Java
2.  MVC
3.  JSP

公司指令是升级到：

1.  春季MVC
2.  AJAX
3.  JSF 2.0

学习这些新技术的最佳顺序是什么？什么建立在什么之上，什么使学习更容易？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:18:20.180

我想说您可以从 Spring（核心，而不是 MVC）或 AJAX 开始，因为它们是两种不同的技术。

假设您选择 Spring，首先学习 Core Spring，例如 IoC 容器、如何连接 bean 等。这将使您学习 Spring MVC，因为概念几乎相同。

使用 AJAX，这取决于您想学习什么。如果是高级概念，一篇好的维基百科文章或几篇博客文章就足够了。如果你想学习如何实现对服务器的异步调用并更新 DOM 的片段，那么你可以学习如何在 jQuery、Prototype 等中做到这一点。

最后，我觉得学完 Spring MVC 之后应该学 JSF 2.0。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:21:44.107

"AJAX" should not be in that list. "JSF 2.0 Ajax", "jQuery AJAX" might be, but the technique itself is at a different abstraction level. IMHO you must master it before working at anything else. It should only take some hours, and you'll get a good background.

Afterwards, Spring Core is a must. You can't get into MVC before understanding the core. Spring MVC and JSF 2.0 should come later.

Also consider a JSF library. I'd suggest RichFaces, since it's JSF 2.0 compilant and provides you a nice set of components.

# video - 无法播放 mp4 转换文件 - JavaFX 2.1

> ID：12749145
> 
> 赞同：1
> 
> 时间：2012-10-05T15:13:10.857
> 
> 标签：video, media-player, javafx-2, converter

我已将`.mov`视频转换为`.mp4`，但是当我在 javafx 应用程序中播放视频时，它不起作用，我可以听到视频文件的音频但没有图片！也许 .mp4 不在正确的编解码器中！任何想法或解决方案？

**更新**

使用相同的代码，我在相同的条件下播放了另一个 mp4 视频（平台，JFX 版本，...），所以我得出的结论是，我对这个 mp4 转换文件有问题，即我使用的软件转换 mov 文件不会生成 JFX 2.1 支持的适当 mp4 格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:48:30.137

以下代码示例演示了在 JavaFX 中播放 h.264 编码的 mp4 视频。

```
import javafx.application.Application;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.Label;
import javafx.scene.layout.*;
import javafx.scene.media.*;
import javafx.scene.paint.Color;
import javafx.stage.Stage;

/** plays an mp4 video in JavaFX 2.1+ */
public class OnlineVideoPlayer extends Application {
  public static void main(String[] args) { launch(args); }
  @Override public void start(Stage stage) {
    final Label status = new Label("Init");
    MediaPlayer mediaPlayer = createMediaPlayer(
      "http://www.html5videoplayer.net/videos/toystory.mp4", 
      status
    );
    VBox layout = new VBox(10);
    layout.setAlignment(Pos.CENTER);
    layout.getChildren().addAll(new MediaView(mediaPlayer), status);
    stage.setScene(new Scene(layout, 500, 300, Color.CORNSILK));
    stage.show();
    if (mediaPlayer != null) {
      mediaPlayer.play();
    }  
  }

  /** 
   * creates a media player using a url to the media
   * and tracks the status of playing the media via the status label 
   */
  private MediaPlayer createMediaPlayer(final String url, final Label status) {
    Media hit = new Media(url);
    MediaPlayer mediaPlayer = new MediaPlayer(hit);
    mediaPlayer.setOnError(new Runnable() {
      @Override public void run() {
        status.setText("Error");
      }
    });
    mediaPlayer.setOnPlaying(new Runnable() {
      @Override public void run() {
        status.setText("Playing: " + url);
      }
    });
    mediaPlayer.setOnEndOfMedia(new Runnable() {
      @Override public void run() {
        status.setText("Done");
      }
    });
    return mediaPlayer;
  }
} 
```

示例程序输出：（JavaFX 8u72，OS X 10.9.5）。 [![芭比](../Images/f5858ab2699999055c89ea0b5feeadde.png)](https://i.stack.imgur.com/BTBWw.png) [![木质的](../Images/49c5aa66bef551fb997bb6a297a5c13e.png)](https://i.stack.imgur.com/QRL57.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-04T19:31:23.967

您需要确保您的 .mp4 文件以 H264 编码。MPEG4 不起作用。

# grails - 集成测试没有被解雇

> ID：12749146
> 
> 赞同：0
> 
> 时间：2012-10-05T15:13:11.340
> 
> 标签：grails

我有以下代码

```
class LoginControllerIntegrationTests extends GroovyTestCase {

  def springSecurityService

    @Test
    void testLogin() {

        def dc = new LoginController()
        def loggedInUser =new SentryUser(username: "test@test.com",password: 'password',
                enabled: true).save(failOnError: true)
        dc.springSecurityService = [
                encodePassword: 'password',
                reauthenticate: { String u -> true},
                loggedIn: true,
                getCurrenUser: { loggedInUser }]
        assertTrue springSecurityService.isLoggedIn()

    }

} 
```

当我运行该命令时，`grails test-app integration:integration`我确实看到正在编译文件并且正在执行引导代码并看到消息 Tests PASSED。当我查看报告时，我看到空的 html 文件。有人知道发生了什么吗？我正在使用 grails 2.1.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:01:57.373

使用 create-integration-test 重新创建测试就可以了。

# python - Dozer 不断触发 django 项目和 wsgi 的 200 服务器错误

> ID：12749149
> 
> 赞同：0
> 
> 时间：2012-10-05T15:13:23.007
> 
> 标签：python, django, memory, memory-leaks

编辑：摆脱 WSGIDaemonProcess 中的“进程”后，它现在可以工作了

我一直有内存使用问题，想通过使用一个名为 dozer 的 wsgi 中间件来监控内存泄漏的可能性：http: [//pypi.python.org/pypi/Dozer](http://pypi.python.org/pypi/Dozer)。

以下是apache错误日志：

AssertionError：Dozer 中间件在多进程环境中不可用

以下是来自 wsgi.py 的代码片段：

```
from django.core.wsgi import get_wsgi_application
from dozer import Dozer
application = get_wsgi_application()
application = Dozer(application) 
```

这段代码都是在 manage.py 的 shell 中运行的，没有任何错误。

这是显示的特定错误：

服务器遇到内部错误或配置错误，无法完成您的请求。请联系服务器管理员，[未提供地址] 并告知他们错误发生的时间，以及您可能所做的任何可能导致错误的事情。服务器错误日志中可能提供有关此错误的更多信息。

安装的推土机蛋是最新的（python 2.7），也许服务器需要专门配置这样的东西？

这是我的wsgi设置：

```
ServerRoot "/path/django/apache2"
LoadModule dir_module        modules/mod_dir.so
LoadModule env_module        modules/mod_env.so
LoadModule log_config_module modules/mod_log_config.so
LoadModule mime_module       modules/mod_mime.so
LoadModule rewrite_module    modules/mod_rewrite.so
LoadModule setenvif_module   modules/mod_setenvif.so
LoadModule wsgi_module       modules/mod_wsgi.so

KeepAlive Off
Listen 28861
MaxSpareThreads 3
MinSpareThreads 1
ServerLimit 1
SetEnvIf X-Forwarded-SSL on HTTPS=1
ThreadsPerChild 5
WSGIDaemonProcess django threads=12 python-path=/path/django:/path/django/DareHut:/path/django/lib/python2.7
WGIProcessGroup django
WSGIRestrictEmbedded On
WSGILazyInitialization On
WSGIScriptAlias / /path/django/DareHut/DareHut/wsgi.py 
```

我该怎么办？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T21:40:02.847

从 Apache 发布 mod_wsgi 配置并阅读：

[http://code.google.com/p/modwsgi/wiki/ProcessesAndThreading](http://code.google.com/p/modwsgi/wiki/ProcessesAndThreading)

要使其正常工作，您不能使用多进程配置。

这意味着您不能在 UNIX 系统上使用 mod_wsgi 嵌入模式。

即使使用守护进程模式，也必须使用守护进程组中只有一个进程的配置。

不过，这样做有一个警告。不要使用 WSGIDaemonProcess 的 'processes=1' 选项来执行此操作。您应该完全省略“进程”选项，让它默认为单个进程。

任何使用 'processes' 选项都会导致 'wsgi.multiprocess' 被标记为 True，这将导致 Dozer 抱怨。任何使用该选项（即使值为“1”）都会触发该标志是设计使然，因此在跨多个 Apache 服务器进行负载平衡时，即使使用单个进程，也可以将服务器标记为多进程安排的一部分。

所以使用：

```
WSGIDaemonProcess mygroup
WSGIProcessGroup mygroup 
```

很可能您使用了“进程”选项，或者忘记了 WSGIProcessGroup 并且实际上并没有在守护程序模式下运行，而是错误地在嵌入式模式下运行。

顺便说一句，如果您在浏览器的选项卡标签中将其视为“200 错误”，则这是 mod_wsgi 3.4 中的一个小错误（如果您正在使用该错误）。返回的 HTTP 状态代码仍然是 500，因为它应该是所有内容都被解释为它应该的，但是 mod_wsgi 没有正确清除状态行，因此 Apache 将用它自己的 500 状态行替换它，因此选项卡中使用的状态行标签是错误的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T17:07:32.550

在本地运行它`manage.py runserver`。

在 Dozer 中（使用 pdb 或您的 IDE）中的某些战略位置放置断点，[例如](http://docs.python.org/library/pdb.html)在. 中定义。 `Dozer.__init__``Dozer.__call__``Dozer``dozer/leak.py`

单步执行，直到看到抛出异常。

这不是一个简单的答案，但你会发现问题所在。

# php - 循环中的PHP数组未清除

> ID：12749159
> 
> 赞同：0
> 
> 时间：2012-10-05T15:13:42.630
> 
> 标签：php, arrays, loops

我正在编写一个实用程序来从文本文件中加载一些数据。我有一个字典文件的集合，我正在处理成定义数据文件结构的数组。是的，我可以使用类或其他方式，但是使用数组，我被难住了。

假设我有 3 个文件可以读取并加载到数组中。当我读取数组时，尽管尝试使用 unset 和其他东西，但第三个实例具有第二个元素。我错过了什么？我在 cygwin 上使用 php 5.3.16

以下是列表的示例，但不是真正的列表。所以，请忽略 substr 语句，因为它们不是真实的

```
fname c 1 16
lname c 17 30

addr c 1 20
city c 21 30
state c 31 40
zip n 41 45

bday d 1 9
ssn c 10 18 
```

当使用下面的代码加载时，第三个数组包含第二个数组的元素，即 bday、ssn、state 和 zip。

```
$cnt = 0;
while ($s = fgets($fp, 1024)) {
    $fldprops = array();
    $fldprops[0] = trim(substr($s,0,8));
    $fldprops[1] = trim(substr($s,9,1));
    $fldprops[2] = trim(substr($s,11,3));
    $fldprops[3] = trim(substr($s,15,3));
    $flds[$cnt] = $fldprops;
    $cnt++;
    unset($fldprops);
} 
```

我曾认为 $fldprops = array(); 之一 或 unset() 将清除数组但它不起作用。

更新：我弄错了故障点。它显然不是在写入外部数组，而是在读取。正如我在评论中提到的，稍后在代码中，我有一个 foreach 循环，这里它失败了：

```
foreach ($flds as $fldprop) {
     var_dump($fldprop);
} 
```

在这里，我得到 bday、ssn、state 和 zip（第二个数组的最后两个条目与第三个数组合并）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:19:06.653

这是我得到的输出：

```
<?php
    $flds = array();
    $cnt = 0;
    $s = "HelloWorldNiceToSeeYou";
    $fldprops = array();
    $fldprops[0] = trim(substr($s,0,8));
    $fldprops[1] = trim(substr($s,9,1));
    $fldprops[2] = trim(substr($s,11,3));
    $fldprops[3] = trim(substr($s,15,3));
    $flds[$cnt] = $fldprops;
    $cnt++;
    unset($fldprops);
    var_dump($flds, $cnt, $fldprops);
?> 
```

### 输出：

```
<br />
<b>Notice</b>:  Undefined variable: fldprops in <b>/code/MQpnac</b> on line <b>13</b><br />
array(1) {
  [0]=>
  array(4) {
    [0]=>
    string(8) "HelloWor"
    [1]=>
    string(1) "d"
    [2]=>
    string(3) "ice"
    [3]=>
    string(3) "oSe"
  }
}
int(1)
NULL

PHP Notice:  Undefined variable: fldprops in /code/MQpnac on line 13 
```

### 所以 PHP 做得对。现场查看：[http ://codepad.viper-7.com/MQpnac](http://codepad.viper-7.com/MQpnac)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:27:40.697

为什么还要打扰临时变量？

```
$cnt = 0;
while ($s = fgets($fp, 1024)) {
    $flds[$cnt] = array(
        trim(substr($s,0,8)), 
        trim(substr($s,9,1)), 
        trim(substr($s,11,3)), 
        trim(substr($s,15,3)), 
    )
    $cnt++;
} 
```

# php - 检测“建议”包是否实际上是通过 composer.phar 安装的推荐方法是什么？

> ID：12749160
> 
> 赞同：2
> 
> 时间：2012-10-05T15:13:42.897
> 
> 标签：php, composer-php

我目前正在构建一个小型控制台（symfony 2.1）应用程序（处理语义版本号），如果 gitlib 可用，它可以选择分析给定的 git 存储库。理想情况下，我更喜欢 composer 提供的一些机制来检测 lib 是否可用（类似于提供的自动加载），但据我所知，我必须检查自己。

我在解析composer.lock（看起来更干净）和尝试从库中实例化一个类（独立于composer，但滥用流控制的异常）之间纠结。后者感觉特别糟糕，因为即使我根本不打算使用实例，我也必须这样做来配置应用程序（特别是：决定是否在应用程序中注册命令）。

有什么建议/建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:26:10.083

PHP 为您提供`class_exists()`了这个目的。检查该类是否已加载 - 默认情况下它将调用自动加载器，因此无需事先使用 try/catch 块对其进行实例化。

如果您尝试通过也可以使用`extension_loaded()`或的方式测试扩展`function_exists()`。

# linux - 在伪分布式模式下运行 Hadoop 时，hadoop.tmp.dir 应该使用什么目录？

> ID：12749163
> 
> 赞同：5
> 
> 时间：2012-10-05T15:13:48.903
> 
> 标签：linux, ubuntu, configuration, hadoop, hbase

默认情况下，Hadoop 将 hadoop.tmp.dir 设置为您的 /tmp 文件夹。这是一个问题，因为 /tmp 会在您重新启动时被 Linux 清除，从而导致 JobTracker 出现这个可爱的错误：

```
2012-10-05 07:41:13,618 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/127.0.0.1:8020\. Already tried 0 time(s).    
...    
2012-10-05 07:41:22,636 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/127.0.0.1:8020\. Already tried 9 time(s).
2012-10-05 07:41:22,643 INFO org.apache.hadoop.mapred.JobTracker: problem cleaning system directory: null
java.net.ConnectException: Call to localhost/127.0.0.1:8020 failed on connection exception: java.net.ConnectException: Connection refused
    at org.apache.hadoop.ipc.Client.wrapException(Client.java:767) 
```

我发现解决此问题的唯一方法是重新格式化您的名称节点，它会重建 /tmp/hadoop-root 文件夹，当您重新启动时，它当然会再次被清除。

所以我继续创建了一个名为 /hadoop_temp 的文件夹，并为所有用户提供了对它的读/写访问权限。然后我在我的 core-site.xml 中设置这个属性：

```
 <property>
          <name>hadoop.tmp.dir</name>
          <value>file:///hadoop_temp</value>
 </property> 
```

当我重新格式化我的 namenode 时，Hadoop 似乎很高兴，给了我这样的信息：

```
12/10/05 07:58:54 INFO common.Storage: Storage directory file:/hadoop_temp/dfs/name has been successfully formatted. 
```

但是，当我查看 /hadoop_temp 时，我注意到该文件夹​​是空的。然后当我重新启动 Hadoop 并检查我的 JobTracker 日志时，我看到了：

```
2012-10-05 08:02:41,988 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/127.0.0.1:8020\. Already tried 0 time(s).
...
2012-10-05 08:02:51,010 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/127.0.0.1:8020\. Already tried 9 time(s).
2012-10-05 08:02:51,011 INFO org.apache.hadoop.mapred.JobTracker: problem cleaning system directory: null
java.net.ConnectException: Call to localhost/127.0.0.1:8020 failed on connection exception: java.net.ConnectException: Connection refused 
```

当我检查我的namenode日志时，我看到了：

```
2012-10-05 08:00:31,206 INFO org.apache.hadoop.hdfs.server.common.Storage: Storage directory /opt/hadoop/hadoop-0.20.2/file:/hadoop_temp/dfs/name does not exist.
2012-10-05 08:00:31,212 ERROR org.apache.hadoop.hdfs.server.namenode.FSNamesystem: FSNamesystem initialization failed.
org.apache.hadoop.hdfs.server.common.InconsistentFSStateException: Directory /opt/hadoop/hadoop-0.20.2/file:/hadoop_temp/dfs/name is in an inconsistent state: storage directory does not exist or is not accessible. 
```

所以，显然我没有配置正确的东西。即使我在 core-site.xml 中将 hadoop.tmp.dir 设置为 /hadoop_temp，Hadoop 仍然希望在 /tmp 文件夹中看到它的文件。我做错了什么？hadoop.tmp.dir 接受的“正确”值是多少？

奖励问题：我应该为 hbase.tmp.dir 使用什么？

系统信息 ：

Ubuntu 12.04、Apache Hadoop .20.2、Apache HBase .92.1

谢谢参观！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T21:27:49.950

感谢 Hadoop 邮件列表上的 Harsh 帮助我解决这个问题。引用他的话：

“在基于 0.20.x 或 1.x 的版本上，不要为 hadoop.tmp.dir 使用 file:/// 前缀。”

我取出了 file:// 前缀，它起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T23:07:34.863

此外，对于 Hbase 0.94*，您必须指定

`<property> <name>hbase.cluster.distributed</name> <value>true</value> </property>`

# r - 使用函数和 sapply 更新数据框

> ID：12749168
> 
> 赞同：0
> 
> 时间：2012-10-05T15:14:05.097
> 
> 标签：r, sapply

我试图在数据框中设置一个等于“美国”或“外国”的列，具体取决于国家/地区。我相信这样做的正确方法是编写一个函数，然后用于`sapply`实际更新数据帧。这是我第一次在 in 中尝试这样的事情`R`，`SQL`我会写一个`UPDATE`查询。

这是我的数据框：

```
str(clients)
'data.frame':   252774 obs. of  4 variables:
 $ ClientID     : Factor w/ 252774 levels "58187855","59210128",..: 19 20 21 22 23 24 25 26 27 28 ...
 $ Country          : Factor w/ 207 levels "Afghanistan",..: 196 60 139 196 196 40 40 196 196 196 ...
 $ CountryType     : chr  "" "" "" "" ...
 $ OrderSize        : num  12.95 21.99 5.00 7.50 44.5 ...

head(clients)
       ClientID  Country       CountryType  OrderSize
1      58187855  United States              12.95
2      59210128  France                     21.99
3      65729284  Pakistan                   5.00
4      25819711  United States              7.50
5      62837458  United States              44.55
6      88379852  China                      99.28 
```

我试图编写的函数是这样的：

```
updateCountry <- function(x) {
  if (clients$Country == "US") {
        clients$CountryType <- "US"
  } else {
    clients$CountryType <- "Foreign"
    }
} 
```

然后我会像这样应用它：

```
sapply(clients, updateCountry) 
```

当我`sapply`在数据框的头部运行时，我得到了这个：

```
"US" "US" "US" "US" "US" "US" 
Warning messages:
1: In if (clients$Country == "United States") { :
  the condition has length > 1 and only the first element will be used
2: In if (clients$Country == "United States") { :
  the condition has length > 1 and only the first element will be used
3: In if (clients$Country == "United States") { :
  the condition has length > 1 and only the first element will be used
4: In if (clients$Country == "United States") { :
  the condition has length > 1 and only the first element will be used
5: In if (clients$Country == "United States") { :
  the condition has length > 1 and only the first element will be used
6: In if (clients$Country == "United States") { :
  the condition has length > 1 and only the first element will be used 
```

该函数似乎正确地对 Country 进行了分类，但没有正确更新 clients$CountryType 列。我究竟做错了什么？另外-这是完成更新数据框的最佳方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T15:18:12.443

`ifelse`看起来就像你在这里真正想要的。它是 if/else 构造的矢量化版本。

```
 clients$CountryType <- ifelse(clients$Country == "US", "US", "Foreign") 
```

# jqgrid - jqGrid工具栏过滤器发送到服务器的请求数据格式是什么

> ID：12749169
> 
> 赞同：0
> 
> 时间：2012-10-05T15:14:05.813
> 
> 标签：jqgrid

我正在使用 jqGrid 的工具栏过滤器。这些过滤器发送到服务器的请求数据的格式是什么？我检查了他们的文档，但没有找到。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:56:02.050

发送数据的格式取决于方法`stringResult`选项的值`filterToolbar`。您可以找到以下[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3atoolbar_searching#calling_convention)：

> `stringResult`确定如何发布我们执行搜索的数据。当此选项为 false 时，发布的数据在 key:value 对中，如果选项为 true，则发布的数据与 searchGrid 方法中的相同。见[这里](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aadvanced_searching#options)。

我个人更喜欢`filterToolbar`与选项`stringResult: true`一起使用，以使参数的格式与`filters`高级搜索的情况相同（使用选项搜索`multipleSearch: true`）。

# php - 在 CENTOS 5.8 上更新到 PHP 5.3 的问题

> ID：12749171
> 
> 赞同：-1
> 
> 时间：2012-10-05T15:14:11.460
> 
> 标签：php, installation, centos

我正在尝试通过一个名为“PuTTY”的程序在 Centos 5.8 上更新 PHP，我按照本教程进行操作：[http](http://www.webtatic.com/packages/php53/) ://www.webtatic.com/packages/php53/但这没有用，所以我尝试了这个：[http://www.andresmontalban.com/update-centos-5-php-5-1-to-php-5-3/](http://www.andresmontalban.com/update-centos-5-php-5-1-to-php-5-3/)和其他一些，我试过的每一个我都得到同样的错误“没有包php 可用”，或者当我尝试添加存储库时，我得到“传输失败 - 未知或意外错误”有人知道出了什么问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:03:11.293

从 CentOS 5.6 开始，PHP 5.3 在以 php53 开头的包中可用。你可以做一个

```
yum search php53 
```

获取软件包列表。但是，在 yum 安装 php53 包之前，您需要卸载所有 PHP 5.1.6 包（即包以 'php' 开头）。此外，您需要自己安装 PEAR（从 pear.php.net 下载 go-pear.phar 并使用 php cli 执行它）。

# javascript - 基于 Javascript 的符号数学

> ID：12749172
> 
> 赞同：3
> 
> 时间：2012-10-05T15:14:12.053
> 
> 标签：javascript, math

我想在基于 javascript 的应用程序中包含一些符号数学计算，例如通常由 Mathematica 完成的计算。例如，用户 (u) 可以输入一个代数方程，并要求它解指定未知数。然后返回输出 (o) 两个简单的例子：

o：输入方程：s：2*x + 3 = 6 o：x=1.5

o：输入一个方程： s：a*x + b = c o：求解？s: x o: x=(cb)/a。

有谁知道是否有一个基于 JS 的库（免费或商业可用）？

# sockets - 如果由于缓冲区已满错误导致发送失败，我可以增加套接字发送缓冲区大小吗

> ID：12749174
> 
> 赞同：2
> 
> 时间：2012-10-05T15:14:15.750
> 
> 标签：sockets

如果 TCP 套接字设置为非阻塞模式并且最初设置了套接字发送缓冲区，则在循环中使用 send 来发送所有数据。如果由于 EAGAIN 错误导致发送失败，是否可以增加发送套接字缓冲区？我正在使用 Linux 操作系统。我想了解是否允许调整发送缓冲区大小。在 tcp 手册[页上](http://linux.die.net/man/7/tcp)，“在单个连接上，必须在 listen(2) 或 connect(2) 调用之前设置套接字缓冲区大小才能使其生效。” 这就是问题出现的原因

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:27:55.720

您可以尝试[调整网络缓冲区](http://www.cyberciti.biz/faq/linux-tcp-tuning/)，但这可能不是一个好主意。无论您拥有多大大小的缓冲区，问题都可能发生，因此您需要编写代码来处理这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T15:43:55.810

那将是内核网络堆栈的实现细节，即您运行的操作系统（您没有说明）。我相信您可以在大多数现代操作系统上执行此操作，因为它只是专用于给定套接字的数量限制内存，但这是解决问题的完全错误的方法，因为：

*   您不能无限期地增加发送缓冲区的大小，操作系统会在某个时候限制它。
*   TCP 为您提供*流量控制*- 慢速接收器减慢快速发送器 - 这是 TCP 与其可靠性相关的*优势*，因此如果接收器没有足够快地消耗数据，则将更多数据推入内核内存不会改善任何情况方法。
*   您只是懒惰并希望内核为您完成所有缓冲。

找出您的流量突发内存要求、预设的套接字发送缓冲区大小、应用程序端的缓冲区。

# python - 永远不会结束运行的正则表达式

> ID：12749175
> 
> 赞同：8
> 
> 时间：2012-10-05T15:14:20.650
> 
> 标签：python, regex

我写了一个小而朴素的正则表达式，它应该在括号内找到文本：

`re.search(r'\((.|\s)*\)', name)`

我知道这不是最好的方法，有几个原因，但它工作得很好。我正在寻找的只是一个解释，为什么对于某些字符串，这个表达式开始以指数方式更长，然后永远不会结束。昨晚，在运行此代码几个月后，我们的一台服务器突然卡住了与以下类似的字符串匹配：

```
x (y)                                            z 
```

我已经对其进行了试验，并确定“y”和“z”之间的每个空格所花费的时间加倍：

```
In [62]: %timeit re.search(r'\((.|\s)*\)', 'x (y)' + (22 * ' ') + 'z')
1 loops, best of 3: 1.23 s per loop

In [63]: %timeit re.search(r'\((.|\s)*\)', 'x (y)' + (23 * ' ') + 'z')
1 loops, best of 3: 2.46 s per loop

In [64]: %timeit re.search(r'\((.|\s)*\)', 'x (y)' + (24 * ' ') + 'z')
1 loops, best of 3: 4.91 s per loop 
```

但空格以外的字符也没有相同的效果：

```
In [65]: %timeit re.search(r'\((.|\s)*\)', 'x (y)' + (24 * 'a') + 'z')
100000 loops, best of 3: 5.23 us per loop 
```

**注意：**我不是在寻找更好的正则表达式或解决此问题的其他方法。我们不再使用它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T16:41:03.223

## 灾难性的回溯

正如 CaffGeek 的回答正确暗示的那样，问题是由于一种形式的[灾难性回溯](http://www.regular-expressions.info/catastrophic.html). 这两种选择都匹配空格（或制表符），并且贪婪地无限次应用。此外，点匹配右括号，所以一旦匹配左括号，这个表达式总是匹配到字符串的最后，然后它必须煞费苦心地回溯以找到右括号。在这个回溯过程中，在每个位置都尝试了另一种选择（对于空格或制表符也是成功的）。因此，在引擎可以回溯一个位置之前，必须尝试所有可能的匹配组合序列。在结束括号后有很多空格，这很快就会增加。可以通过简单地使星量词惰性（即`r'\((.|\s)*?\)'`)，但是对于不匹配的情况，仍然存在失控的正则表达式问题，即在主题字符串中有一个开括号而没有匹配的闭括号。

原来的正则表达式真的*非常非常*糟糕！（当有一对以上时，也不能正确匹配右括号）。

匹配最内层括号的正确表达式（对于匹配和不匹配的情况都非常快），当然是：

```
re_innermostparens = re.compile(r"""
    \(        # Literal open paren.
    [^()]*    # Zero or more non-parens.
    \)        # Literal close paren.
    """, re.VERBOSE) 
```

## 所有正则表达式作者都应该阅读 MRE3！

*Jeffrey Friedl 的正则表达式作者必读*：[掌握正则表达式（第 3 版）](https://rads.stackoverflow.com/amzn/click/com/0596528124 "通过杰弗里弗里德尔。 关于正则表达式的最佳书籍 - 永远！")中详细解释了这一切（带有详尽的示例和推荐的最佳实践） 。老实说，这是我读过的最有用的书。正则表达式是一个非常强大的工具，但就像装载的武器一样，必须非常小心和精确地使用（否则你会在脚上开枪！）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T15:18:19.493

可能是重做问题。

见：[http ://en.wikipedia.org/wiki/ReDoS](http://en.wikipedia.org/wiki/ReDoS)

可以在构造不佳的正则表达式上创建正则表达式拒绝服务。

例如，从这里：[https ://www.owasp.org/index.php/Regular_expression_Denial_of_Service_-_ReDoS](https://www.owasp.org/index.php/Regular_expression_Denial_of_Service_-_ReDoS)

这个正则表达式`^(a+)+$`

![在此处输入图像描述](../Images/924d5aa85f3521aaa1e5756a6c43d491.png)

对于输入 aaaaX，上图中有 16 条可能的路径。但是对于 aaaaaaaaaaaaaaaX，有 65536 条可能的路径，并且每增加一个 a，这个数字就会翻倍。这是朴素算法存在问题的极端情况，因为它必须通过许多路径，然后失败。

我怀疑你的正则表达式的很大一部分问题是这`(.|\s)`有点令人困惑，因为`\s`它已经包含在`.`. 但创造了一个选择点。

编辑：我认为这是对我读过的问题的更好解释之一。

[http://msdn.microsoft.com/en-us/magazine/ff646973.aspx](http://msdn.microsoft.com/en-us/magazine/ff646973.aspx)

# c - 如何访问共享内存中的变量

> ID：12749176
> 
> 赞同：2
> 
> 时间：2012-10-05T15:14:28.030
> 
> 标签：c, memory, shared

我正在尝试创建一个包含三个整数和一个数组的共享内存段。该段已创建并附加了一个指针，但是当我尝试访问变量的值（无论是更改、打印等）时，我遇到了分段错误。

这是我尝试过的代码：

```
#include <stdio.h>
#include <stdbool.h>
#include <stdlib.h>
#include <errno.h>
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/sem.h>
#include <sys/shm.h>

#define SIZE 10

    int* shm_front;
    int* shm_end;
    int* shm_count;
    int* shm_array;
    int shm_size = 3*sizeof(int) + sizeof(int[SIZE]);

int main(int argc, char* argsv[])
{
    int shmid;

    //create shared memory segment
    if((shmid = shmget(IPC_PRIVATE, shm_size, 0644)) == -1)
    {
        printf("error in shmget");
        exit(1);
    }

    //obtain the pointer to the segment
    if((shm_front  = (int*)shmat(shmid, (void *)0, 0)) == (void *)-1)
    {
        printf("error in shmat");
        exit(1);
    }
    //move down the segment to set the other pointers
    shm_end = shm_front + 1;
    shm_count = shm_front + 2;
    shm_array = shm_front + 3;

//tests on shm
*shm_end = 10;                //gives segmentation fault
printf("\n%d", *shm_end);   //gives segmentation fault

           //clean-up
    //get rid of shared memory
    shmdt(shm_front);
    shmctl(shmid, IPC_RMID, NULL);

    printf("\n\n");
    return 0;
} 
```

我尝试通过取消引用指向结构的指针来访问共享内存，但每次都出现分段错误。

谢谢大家，现在没有分段错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:35:57.393

在您的代码中，您没有 include `sys/shm.h`，这应该会导致您的编译器吐出这些：

```
warning: implicit declaration of function ‘shmget’
warning: implicit declaration of function ‘shmat’
warning: implicit declaration of function ‘shmdt’
warning: implicit declaration of function ‘shmctl’ 
```

将返回值`shmat`转换为 an`int *`也会隐藏此警告：

```
warning: assignment makes pointer from integer without a cast 
```

这里可能发生的情况是，由于`shmat`未定义，编译器将隐式让它返回 an`int`而不是 a `void *`。如果它返回的地址不适合有符号整数，则会出现整数溢出，这是未定义的行为，并且很可能会导致访问未分配的内存位置时出现分段错误。

您不应该强制转换专门返回的函数的返回值`void *`来捕获这些错误（并且始终在启用警告的情况下进行编译）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T15:31:20.007

我不知道这是否是您唯一的问题，但这条线

```
int shm_size = 3*sizeof(int) + sizeof(shm_array[SIZE]); 
```

很可能不是你想要的。`sizeof(shm_array[SIZE])`只是一个`int`而不是数组的大小。如果你想要，你应该使用`sizeof(int[SIZE])`.

通常，我发现共享段的现代界面`shm_open`更易于使用。它的工作方式类似于文件打开和映射，并且对段大小的限制较少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T15:26:14.217

这实际上是一个细化问题，但是格式化程序将其炸毁并使其无法阅读，因此我将其移至答案...

也许我只是在看这个问题，但您的指示不会如下：

```
shm_end = shm_front;
shm_count=shm_front+1
shm_array=shm_front+2; 
```

第一个整数将存储在块的头部，就在 shm_front，然后依次类推……除非共享内存块在偏移量 0 处包含一些相关信息，否则我不知道你为什么要偏移这些一个……只是一个观察。

# javascript - Phonegap WatchPosition 停止更新。忙？

> ID：12749182
> 
> 赞同：0
> 
> 时间：2012-10-05T15:14:44.940
> 
> 标签：javascript, ios, xcode, cordova

我有一个在应用程序后台使用 WatchPosition 的 phonegap 项目。它有时会起作用，但有时当应用程序启动时，我会收到位置超时错误 3。

我的 iPhone 的日志显示该位置是 (EBUSY)。

这是一个phonegap错误吗？

代码：

```
 function onDeviceReady() {
                    var watchID = navigator.geolocation.watchPosition(onSuccess, onError, { timeout: 10000, frequency: 3000,enableHighAccuracy: true });
                }
function onSuccess(position) {
            var deviceID = device.uuid;
            $.post("http://server.com/project/savelocation.php", { lat: position.coords.longitude, lng: position.coords.latitude, device: deviceID },
               function(data) {
               console.log("Location updated.");
               });
               } 
```

正如我所说，它有时确实有效，但我得到的错误是：

```
[INFO] code: 3
    message: Geolocation Error: Timeout.

locationd[41] <Notice>: received EBUSY, try kScanTypeChannel, channel, 11, rssi -60, delayed 0.000s 
```

这可能是 iOS 6 错误吗？

我也有 Phonegap 1.2.0，所以我还没有使用最新的 Cordova 项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:23:34.693

原来我需要升级到最新的 Cordova。Phonegap 1.2.0 对 iOS 6 的支持太糟糕了！

# c# - 避免需要进行多次服务调用

> ID：12749187
> 
> 赞同：0
> 
> 时间：2012-10-05T15:15:02.833
> 
> 标签：c#, wcf

我刚开始学习WCF。

似乎每次使用（远程）类都被转换为对服务器的请求（即使只是设置值，在将它们作为参数发送给服务之前）。

这不会导致太多不必要的请求吗？

我能做些什么来避免这种浪费的时间和带宽？我只是想设置一些值。这些属性的`Set`部分，除了设置相应字段的值之外什么都没有。

例如，

```
interface IService 
{
   int GetResult(MyComplexType1 input);
} 
```

要使用此服务，我必须首先初始化一个`MyComplexType1`实例，该实例每次设置任何值时都会向服务器发出请求`MyComplexType1`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:43:39.013

在您的代码中调用 Web 服务通常是一个昂贵的调用，因此您的设计需要考虑这一点。例如，以下服务不会很有效：

```
public interface ICalculatorService
{
  void SetOperandOne(int value);
  void SetOperandTwo(int value);
  void SetMode(CalculationMode mode);
  int GetResult();
} 
```

而以下接口将所需的调用减少到一个：

```
public interface ICalculatorService
{
  int GetResult(int operandOne, int operandTwo, CalculationMode mode);
} 
```

# mysql - MySQL数据库导入成功但不起作用

> ID：12749189
> 
> 赞同：1
> 
> 时间：2012-10-05T15:15:19.837
> 
> 标签：mysql, wordpress, phpmyadmin, localhost, mamp

我正在为客户更新现有的 wordpress 网站，并希望在我的本地服务器上使用它，但似乎无法正确导入数据库。我正在使用 MAMP 和 phpMyAdmin。

在我的计算机上使用新安装的 wordpress 创建一个新文件夹后，我将实时站点中的 .sql.gz 数据库备份导入本地数据库（通过 phpMyAdmin）。我为数据库使用了与实时站点相同的名称。收到消息：“导入已成功完成，已执行 278 个查询。” 当我访问网站或 WP 仪表板时，似乎没有导入任何内容。没有页面、帖子、菜单或任何东西。我检查了 wp-config.php，它指的是正确的数据库。那么我做错了什么？我怎样才能让所有的内容和设置显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T09:26:27.547

您需要更新一些信息...

设置 wp_options 表 id 1, 34 将其更改为您的本地服务器名称...

然后转到您的管理仪表板...停用插件，然后激活它们以在本地服务器上工作。

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T18:37:49.370

导入数据库时​​，您还需要从 wordpress 导入 xml 文件。您真正导入的只是存储在数据库中的标签和图像等，但您需要从本地主机导出文件并导入实际服务器，您将看到所有帖子等。

# javascript - 如何在javascript中按每个元素计算数组元素

> ID：12749200
> 
> 赞同：5
> 
> 时间：2012-10-05T15:15:44.830
> 
> 标签：javascript

> **可能重复：**
> [如何计算 Javascript 数组中的匹配值](https://stackoverflow.com/questions/2228362/how-to-count-matching-values-in-array-of-javascript)

我有元素数组，

array_elements = ["2","1","2","2","3","4","3","3","3","5"];

我想像以下方式计算数组元素，

回答：

2 次 --> 3 次
1 次 --> 1 次
3 次 --> 4 次
4 次 --> 1 次
5 次 --> 1 次

**注意：每个值计数应该只打印一次。**

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-05T15:21:03.017

```
var counts = {};

for (var i = 0; i < array.length; i++)
    counts[array[i]] = (counts[array[i]] + 1) || 1;

console.log(counts); 
```

这假设`toString`Array 中的项目的表示是可以接受的。例如，它将`1`被视为与 相同`"1"`。

鉴于您的示例数组，这将不是问题。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-05T15:27:25.090

您可以对元素进行排序并遍历它们：

```
array_elements = ["2", "1", "2", "2", "3", "4", "3", "3", "3", "5"];

array_elements.sort();

var current = null;
var cnt = 0;
for (var i = 0; i < array_elements.length; i++) {
    if (array_elements[i] != current) {
        if (cnt > 0) {
            document.write(current + ' comes --> ' + cnt + ' times<br>');
        }
        current = array_elements[i];
        cnt = 1;
    } else {
        cnt++;
    }
}
if (cnt > 0) {
    document.write(current + ' comes --> ' + cnt + ' times');
} 
```

演示：http: [//jsfiddle.net/Guffa/aQsuP/](http://jsfiddle.net/Guffa/aQsuP/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-05T15:41:12.700

```
var array_elements = ["2","1","2","2","3","4","3","3","3","5"];

var result = array_elements.reduce(function(p, c){
    if (c in p) {
       p[c]++;
    } else {
       p[c]=1;
    }
    return p;
}, {});

​console.log(result);​ 
```

***[现场演示。](http://jsfiddle.net/ak69f/)***

*注意：减少旧浏览器的 shim 需求。*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-05T15:29:35.977

```
var arr = ["2","1","2","2","3","4","3","3","3","5"];
var k = {};

//push into hashtable
for(i in arr){
 k[arr[i]]=(k[arr[i]]||0)+1; //increments count if element already exists
}

//result
for(var j in k) {
 console.log(j+" comes -> "+k[j]+" times");
} 
```

# python - Distuils：创建启动 wx 应用程序时不会“阻止”控制台的脚本

> ID：12749202
> 
> 赞同：1
> 
> 时间：2012-10-05T15:15:55.750
> 
> 标签：python, wxpython, distutils

在我的`setup.py`我定义了一个这样的入口点：

```
entry_points={
      'console_scripts' : [
            'cofo = cofo:gui_main'
      ]
}, 
```

调用按预期`python setup.py develop`生成`cofo`脚本。但是`gui_main`启动了一个 wxWindows 应用程序，之后我想“释放”控制台。我怎样才能做到这一点？如果我用它`gui_scripts`代替`console_scripts`它并没有什么不同。

**更新：**

使用“免费”控制台，我的意思是我想从命令提示符启动脚本（即将命令行参数传递给它），但希望在 gui 启动后命令提示符可用。像这样的东西：

```
Last login: Mon Oct  8 15:34:28 on ttys002
localhost:~ domma$ cofo some arguments
... gui starts and after that ...
localhost:~ domma$ 
```

目前我没有收到等待提示，因为脚本正在运行并“阻止”命令行。我的主要平台是 OS X，但我会对通用解决方案感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:07:24.027

使用 linux/unix（包括 Mac OS X）shell，您可以运行命令，并通过使用“&”作为后缀来告诉它进入后台。例如：

```
$ cofo some arguments & 
```

这是一个包含一些额外信息的页面：[http ://www.bsdguides.org/guides/netbsd/beginners/job_control/print](http://www.bsdguides.org/guides/netbsd/beginners/job_control/print)

我建议只是手动使用它/教育你的用户使用它（如果他们已经在使用 cli，那么这并不是很多额外的要求。）如果你真的希望你的命令默认进入后台，你可以用使用上述方法的小 bash 脚本包装您的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:49:39.447

以下最小示例适用于我使用 Windows 7 32 位、Python 2.7.1、wx 2.8.12.2 (msw-unicode)。`python setup.py develop`调用时，分别为`cofo.exe`控制台`cofogui.exe`和 GUI 脚本生成 和 。

执行时`cofogui.exe`，不会出现控制台窗口（这就是您所说的“免费”控制台吗？）

此示例使用[setuptools](http://packages.python.org/distribute/setuptools.html)对`distutils`.

```
setup.py:

#!/usr/bin/env python

from setuptools import setup

setup(name='cofo',
      packages=['cofo'],
      entry_points={
          'console_scripts' : [
              'cofo = cofo:gui_main'
              ],
          'gui_scripts' : [
              'cofogui = cofo:gui_main'
              ]
          }
      ) 
```

和

```
cofo/__init__.py:

#!/usr/bin/env python

import wx

def gui_main():
    app = wx.App(False)  # Create a new app, don't redirect stdout/stderr to a window.
    frame = wx.Frame(None, wx.ID_ANY, "Hello World") # A Frame is a top-level window.
    frame.Show(True)     # Show the frame.
    app.MainLoop() 
```

**更新：** 基于 Windows 和 Unix 的平台在启动进程时操作不同。在 Unix 系统上，如果应用程序要继续在后台运行，通常的过程是使用`os.fork()`系统调用。如[另一个](https://stackoverflow.com/a/12784431/302243)答案中所述，这可以通过编写一个为您执行后台处理的包装脚本在您的应用程序之外完成。

如果这必须是完全在 Python 中的通用解决方案，那么类似以下的内容应该可以满足您的需求：

```
cofo/__init__.py:

#!/usr/bin/env python

import os
import wx

def main_app():
    app = wx.App(False)  # Create a new app, don't redirect stdout/stderr to a window.
    frame = wx.Frame(None, wx.ID_ANY, "Hello World") # A Frame is a top-level window.
    frame.Show(True)     # Show the frame.
    app.MainLoop()

def gui_main():
    """Start GUI application.

    When running on Unix based platform, fork and detach so that terminal from
    which app may have been started becomes free for use.
    """
    if not hasattr(os, 'fork'):
        main_app()
    else:
        if os.fork() == 0:
            main_app() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T06:51:01.637

发生这种情况是因为 shell 正在等待进程完成。看来您正在寻找类似于守护进程的东西。为此，您可以使用`os.fork()`创建进程的副本，然后使用`sys.exit()`.

```
if os.fork():
    # Finish the parent process    
    sys.exit()

# Your program starts here (child process) 
```

请注意，此代码与 distutils 无关。您的程序将充当守护程序。

# java - 如何在 CLI 上运行 maven 生成的 jar

> ID：12749206
> 
> 赞同：11
> 
> 时间：2012-10-05T15:15:58.573
> 
> 标签：java, maven, command-line-interface

我正在尝试让一个 Maven 托管项目在命令行上运行。

我在 pom.xml 中有一组依赖项，这些依赖项随后被下载并安装在 ~/.m2/repository/ 中。我在我的 pom 中包含了必要的配置，以将类路径添加到 jar 清单中。

现在的问题是我正在尝试运行 jar：java -jar project-SNAPSHOT.jar。

Java 找不到下载的依赖项（我假设是因为它们在清单中没有列出路径？），但我不确定如何最好地运行它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T15:18:06.747

选项 1：
创建的 jar 没有依赖的 jar 文件。因此，您需要告诉 java 所有依赖 jar 所在的类路径

```
 java -cp /lcoation/of/dependency1.jar:/location/of/dependency2.jar:/location/of/dependency3.jar -jar project-SNAPSHOT.jar 
```

选项 2：
更简单更好的解决方案是使用`AppAssembler`插件。它的作用是将您的 jar 打包在一个目录结构中，该目录结构包含

1.  依赖罐子
2.  创建的罐子
3.  shell/windows 脚本来执行它

看看这里[http://www.mojohaus.org/appassembler/appassembler-maven-plugin/](http://www.mojohaus.org/appassembler/appassembler-maven-plugin/)

选项 3：
如果您不想要所有的包袱，只想拥有一个`jar-with-dependency` 您可能想参考这里[如何使用 Maven 创建具有依赖关系的可执行 JAR？](https://stackoverflow.com/questions/574594/how-can-i-create-an-executable-jar-with-dependencies-using-maven)

这将包含其中的所有依赖 jar。

* * *

**编辑 1：**对于选项 1，[Brad M](https://stackoverflow.com/users/1399659/brad-m)提到您可以使用[依赖插件](http://maven.apache.org/plugins/maven-dependency-plugin/build-classpath-mojo.html)获取所有项目部门的列表。`dependency:build-classpath`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-05T15:27:56.957

```
mvn exec:java -Dexec.mainClass="com.vineetmanohar.module.Main" -Dexec.classpathScope=runtime 
```

您可以在此处找到更多示例：[从 Maven 运行 Java main 的 3 种方法](http://www.vineetmanohar.com/2009/11/3-ways-to-run-java-main-from-maven/ "从 Maven 运行 Java main 的 3 种方法")。

# sql-server - 如何为自定义 SQL Server 扩展存储过程创建简单的 DLL？

> ID：12749210
> 
> 赞同：3
> 
> 时间：2012-10-05T15:16:17.793
> 
> 标签：sql-server, visual-c++, dll

我使用的是旧版本的 SQL Server (2000)。我不希望我的用户有权运行 master.dbo.xp_cmdshell。我正在尝试创建一个自定义 DLL，我可以使用它来创建我自己的扩展存储过程，我授予用户运行权限 - 一个硬编码以执行用户需要能够按需运行的特定批处理文件。

我正在使用 Visual Studio 2010 创建 DLL。这是我的头文件stdafx.h：

```
#define WIN32_LEAN_AND_MEAN 

#include <windows.h>
#include <iostream>

#ifndef INDLL_H
    #define INDLL_H

    #ifdef EXPORTING_DLL
        extern __declspec(dllexport) void HelloWorld() ;
    #else
        extern __declspec(dllimport) void HelloWorld() ;
    #endif
#endif 
```

这是我的主文件 dllmain.cpp：

```
#include "stdafx.h"
#define EXPORTING_DLL

BOOL APIENTRY DllMain( HANDLE hModule, 
                       DWORD  ul_reason_for_call, 
                   LPVOID lpReserved)
{ return TRUE; }

void HelloWorld() {
    system("f:\\bin\\batchfilename.bat");
} 
```

当我尝试调试此项目时，我看到构建成功，但我收到错误“无法启动程序：<path to compiled dll>。” 你认为这个 DLL 会工作吗？如果可以，我该如何测试它以查看它是否工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T22:24:45.220

好的，经过几个小时的谷歌搜索，我成功编译了一个 DLL 以添加为 SQL Server 2000 扩展存储过程。我将在这里分享它，因为它只是我从谷歌搜索中收集的东西的汇编。（我使用了 Visual Studio 2010）。我不会发布所有内容 - 我首先在 Visual Studio 中创建一个新项目并选择 Win32 Console Application，然后选择 Next，然后选择 DLL。它会为您创建一些头文件和其他文件。其中一些我认为没有必要。还有一些你必须手动添加到项目中的头文件。但这是我的主要 .cpp 代码：

```
#include "stdafx.h"         
#include "srv.h"   //Must get from C:\Program Files (x86)\Microsoft SQL Server\80\Tools\DevTools\Include            
#include "shellapi.h"  //need for ShellExecute          
#include "string"   //needed for std:string         
#include <sys/stat.h>  //need for stat in fileExists function below         

#define DLL_FUNC extern "C" __declspec (dllexport)          

__declspec(dllexport) ULONG __GetXpVersion() {          
   return ODS_VERSION;          
}           

bool fileExists(const std::string& filename) {          
    struct stat buf;            
    if (stat(filename.c_str(), &buf) != -1)         
    { return true; }            
    return false;           
}           

DLL_FUNC int __stdcall RunPP() {            
    if (fileExists("C:\\FileOnServer\\execute.bat")) {      
        ShellExecute(NULL,TEXT("open"), TEXT("C:\\FileOnServer\\execute.bat"), NULL, NULL,SW_SHOWNORMAL);       
        return 0;   
    } else {        
        MessageBox(HWND_DESKTOP, TEXT("File not found."), TEXT("Message"), MB_OK);  
        return 1;   
    }       
} 
```

我了解到您可以`rundll32 yourdllname.dll,functionname`在命令行中使用 rundll32（{逗号后无空格}）测试此 DLL，但前提是您在项目中包含 .def 文件。我的def文件是

```
LIBRARY
EXPORTS
RunPP 
```

此外，正如[文档](http://msdn.microsoft.com/en-us/library/aa215790%28v=sql.80%29.aspx)所述，我尝试在 Project > Properties... > Linker > Input > Additional Dependencies 中添加对 Opends60.lib 的引用，但看起来它在某些时候被删除了。

对于像我这样的新手，我必须在项目的属性页面中学习很多东西，比如将 C/C++ > 代码生成 > 运行时库切换到 /MD。还学习如何在 Release 模式下编译，在哪里找到生成的 .dll 文件等。

然后，将编译后的 DLL 移动到我的 SQL Server 机器 (Win2003R2) 时，我必须安装 VC++ 2010 Redistributable 才能运行。然后我将 DLL 复制到我机器上的 C:\Program Files\Microsoft SQL Server\MSSQL\Binn （与 xp_cmdShell 扩展存储过程的 DLL 所在的位置相同），然后根据文档运行 sp_addextendedproc 以将其注册为可用的扩展存储主数据库中的过程。然后授予用户执行它的权限等。

我知道这一切都是一项古老的技术。我应该升级我的 SQL Server 版本。但也许这会帮助别人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:58:43.897

你有两个选择：

1.  而不是“运行” DDL，而是附加到正在运行的进程：sqlservr.exe。设置断点，然后加载 XP。调试器断点将触发，您可以单步执行代码。

2.  将项目启动选项更改为[启动外部程序](http://msdn.microsoft.com/en-us/library/68c8335t%28v=vs.100%29.aspx)并选择 sqlservr.exe 作为外部程序。

这两个选项都要求您知道自己在做什么，尤其是第二个选项（例如，确保服务已停止，在启动​​参数中指定实例名称并有权访问 SQL 数据目录）。

显然，更好的选择是升级到 SQL Server 2005（至少）并改用 SQLCLR。

# wordpress - 仅允许特定数量的置顶帖子

> ID：12749213
> 
> 赞同：0
> 
> 时间：2012-10-05T15:16:28.183
> 
> 标签：wordpress, loops, posts, sticky

我有 2 个循环，一个用于粘性帖子，一个用于所有不粘性的帖子。我只显示最新的 3 个置顶帖子。如果置顶帖超过 3 个，则旧置顶帖不会显示在任何地方。（不在置顶循环中，因为它们不是最新的 3 个置顶，也不在非置顶的默认循环中，因为它们被标记为置顶帖子。）

是否有可能禁止后端用户同时将超过 3 个帖子标记为置顶帖子？或者是否有可能将除了最新 3 个之外的粘性帖子称为“正常”帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:31:26.350

您可以在主题中执行类似[的](http://www.wpbeginner.com/wp-themes/how-to-avoid-duplicate-post-display-with-multiple-loops-in-wordpress/)操作，将第一个循环中显示的粘性帖子添加到第一个循环中的 $do_not_duplicate 中，然后在第二个循环中查询所有帖子，但检查以确保您没有发布这些帖子再次。

# mysql - MySql：比较两个数字字符串？

> ID：12749219
> 
> 赞同：9
> 
> 时间：2012-10-05T15:16:41.807
> 
> 标签：mysql, comparison

我的表中有一个列，它包含诸如 100012345 之类的值。该列是 varchar。现在我想将其与其中的类似值进行比较：

```
... where myColumn > '100012345' 
```

例如。我怎么能那样做？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-05T15:20:27.200

```
select * from your_table
where cast(your_column as signed) = 100012345 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T15:26:19.147

您是否尝试过正常执行此操作，例如：

```
... where myColumn > 100012345 
```

那**应该工作！**, mysql 在数字操作的上下文中自动将字符串转换为数字。以同样的方式，如果它在字符串上下文中使用，它会将数字转换为字符串。[**请参阅类型转换文档**](http://dev.mysql.com/doc/refman/5.0/en/type-conversion.html)中的示例：

要将字符串转换为数字上下文中的数值，您通常无需执行任何操作，只需将字符串值当作数字使用：

```
mysql> SELECT 1+'1';
       -> 2 
```

如果在算术运算中使用字符串，则会在表达式求值期间将其转换为浮点数。

如果您在字符串上下文中使用数字，则该数字会自动转换为字符串：

```
mysql> SELECT CONCAT('hello you ',2);
        -> 'hello you 2' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T15:19:56.213

您可以[将值](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_cast)转换为整数：

`CAST(myColumn AS INTEGER)`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-05T15:26:43.310

您不必将字符串转换为整数进行比较，mysql 会自动进行。

[http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html)

# gradle - 不应该提交的 Gradle 配置（即凭证）应该放在哪里？

> ID：12749225
> 
> 赞同：192
> 
> 时间：2012-10-05T15:16:55.330
> 
> 标签：gradle

我正在尝试将 Gradle 构建的工件部署到 Maven 存储库，我需要为此指定凭据。这目前工作正常：

```
uploadArchives {
    repositories {
        mavenDeployer {
            repository(url: "http://.../nexus/content/repositories/snapshots/") {
                authentication(userName: "admin", password: "admin123")
            }
        }
    }
} 
```

但我不喜欢将凭据存储在源代码管理中。使用 Maven，我将定义一个服务器配置，并在我的`~/.m2/settings.xml`. 我如何用 Gradle 做类似的事情？

* * *

## 回答 #1

> 赞同：264
> 
> 时间：2012-10-05T18:02:26.467

**~/.gradle/gradle.properties**：

```
mavenUser=admin
mavenPassword=admin123 
```

**构建.gradle**：

```
...
authentication(userName: mavenUser, password: mavenPassword) 
```

* * *

## 回答 #2

> 赞同：123
> 
> 时间：2016-02-25T13:00:38.710

第一个答案仍然有效，但 API 在过去发生了变化。由于我的编辑没有被接受，我将其作为单独的答案发布。

该方法`authentication()`仅用于提供身份验证方法（例如基本），但不提供任何凭据。

您也不**应该使用它，**因为它会在失败时打印凭证！

这是他在你身上的样子`build.gradle`

```
 maven {
        credentials {
            username "$mavenUser"
            password "$mavenPassword"
        }
        url 'https://maven.yourcorp.net/'
   } 
```

在`gradle.properties`您的用户主目录中输入：

```
mavenUser=admin
mavenPassword=admin123 
```

还要确保将其`GRADLE_USER_HOME`设置为，`~/.gradle`否则将无法解析那里的属性文件。

也可以看看：

[https://docs.gradle.org/current/userguide/build_environment.html](https://docs.gradle.org/current/userguide/build_environment.html)

和

[https://docs.gradle.org/current/userguide/dependency_management.html](https://docs.gradle.org/current/userguide/dependency_management.html) (23.6.4.1)

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2015-12-29T08:47:21.593

如果您有用户特定的凭据（即每个开发人员可能有不同的用户名/密码），那么我建议您使用[gradle-properties-plugin](https://github.com/stevesaliman/gradle-properties-plugin)。

1.  将默认值放入`gradle.properties`
2.  每个开发人员都用`gradle-local.properties`（这应该被 git 忽略）覆盖。

这比覆盖使用更好，`$USER_HOME/.gradle/gradle.properties`因为不同的项目可能具有相同的属性名称。

请注意，该插件实际上添加`gradle-${environment}.properties`了默认为`${environment}`is 的位置`local`，并具有其他功能。使用前请阅读链接。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2014-12-16T16:25:50.007

您还可以在命令行上使用`-PmavenUser=user -PmavenPassword=password`.

这可能很有用，您由于某种原因不能使用 gradle.properties 文件。例如，在构建服务器上，我们使用带有`-g`选项的 Gradle，以便每个构建计划都有自己的`GRADLE_HOME`.

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-10-05T17:13:37.050

您可以将凭据放在属性文件中并使用以下内容读取它：

```
Properties props = new Properties() 
props.load(new FileInputStream("yourPath/credentials.properties")) 
project.setProperty('props', props) 
```

另一种方法是在操作系统级别定义环境变量并使用以下方法读取它们：

```
System.getenv()['YOUR_ENV_VARIABLE'] 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-06-25T22:16:58.160

对于那些在 MacOS 上构建并且不喜欢在计算机上以明文形式留下密码的人，您可以使用钥匙串工具来存储凭据，然后将其注入构建中。归功于维克多·埃里克森。 [https://pilloxa.gitlab.io/posts/safer-passwords-in-gradle/](https://pilloxa.gitlab.io/posts/safer-passwords-in-gradle/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-17T13:35:00.797

**构建.gradle**

```
apply from: "./build.gradle.local"
... 
authentication(userName: project.ext.mavenUserName, password: project.ext.mavenPassword) 
```

**build.gradle.local**（忽略 git）

```
project.ext.mavenUserName=admin
project.ext.mavenPassword=admin123 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-25T13:20:13.737

根据 7.1.1 gradle 文档，我们有如下语法来设置带有凭据的存储库，下面的代码片段应该在项目的 build.gradle 文件中

```
repositories {
maven {
    url "http://repo.mycompany.com"
    credentials {
        username "user"
        password "password"
    }
} 
```

以上是为了展示 gradle 7.xx 中的语法更改。这可以更改为将密码作为变量，如上面批准的解决方案中所示。

# jquery - InvalidOperationException 尽管 MaxJsonLength = Int32.MaxValue

> ID：12749229
> 
> 赞同：1
> 
> 时间：2012-10-05T15:17:02.707
> 
> 标签：jquery, ajax, dictionary, webmethod, invalidoperationexception

我认为我没有超过 MaxJsonLength，但我仍然收到“使用 JSON JavaScriptSerializer 进行序列化或反序列化时出错。字符串的长度超过了 maxJsonLength 属性上设置的值”。

我检查了结果有多长，它是 25,000 行。我通过输出一个较小的结果来检查每行的平均长度，平均行是 48.5 个字符长。

25,000 * 48.5 个字符 = 1,224,140 个字符。

MS说 maxJsonLength 是在字符方面。Int32.MaxValue 超过 20 亿。是什么赋予了？

注意：我没有使用 MVC，这是用 VB 2010 编写的与 jQuery 对话的 WebMethod。结果使用字典数组进行组织。我得到较小集合的结果就好了。我确认我的序列化程序的 maxJsonLength 设置为最大值。

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:22:35.290

在 ASP.NET 中，反序列化的默认最大值为 1000 个 JSON 成员。它于去年 12 月推出。看看这是否是您的应用程序的问题。[这是一篇文章。](http://msdn.microsoft.com/en-us/library/hh975440.aspx)

# antlr - Antlr4 中语义谓词的语法

> ID：12749230
> 
> 赞同：13
> 
> 时间：2012-10-05T15:17:03.237
> 
> 标签：antlr, antlr4

在[*什么是 ANTLR3 中的“语义谓词”？*](https://stackoverflow.com/questions/3056441/what-is-a-semantic-predicate-in-antlr3)Bart Kiers 很好地概述了 Antlr3 中的不同语义谓词。

太糟糕了，Antlr4 中的语法/语义似乎发生了变化，因此无法编译：

```
end_of_statement
    :   ';'
    |   EOF
    |   {input.LT(1).getType() == RBRACE}? =>
    ;

RBRACE
    : '}'
    ; 
```

有人可以告诉我如何处理*end_of_statement*的第三种情况：如果下一个令牌是 '}' 则接受，但不要使用它。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-05T18:08:35.127

现在只有一种语义谓词，如下所示：

```
{ <<boolean-epxression>> }? 
```

抽象类的`input`属性`Parser`（生成的解析器从中扩展）现在前面有一个下划线。

因此，在您的情况下，以下 ANTLR v3 语法：

```
{input.LT(1).getType() == RBRACE}? => 
```

在 ANTLR v4 中看起来像这样：

```
{_input.LT(1).getType() == RBRACE}? 
```

# sql - 需要 SQL 帮助

> ID：12749233
> 
> 赞同：1
> 
> 时间：2012-10-05T15:17:07.450
> 
> 标签：sql, sql-server, subquery, except

下面是我的表格的简化版本。

```
 FRID, RELFRID, Relationship
    123, 456, Husband/Wife
    456, 123, Wife/Husband
    345, 765, Brother/Sister
    765, 345, Sister/Brother 
```

我只想提取关系的一种表示形式（每组两条记录中的一条）。我已经尝试了很多东西，包括 EXCEPT 和 SUBSELECTS 并且我尝试的一切都没有结果，因为左边的每个数字也代表在右边。知道如何获得我正在寻找的结果吗？我已经尝试了以下查询的每种组合。

```
 select frid, relfrid from frrelmst
    except
    select frid, relfrid from frrelmst
    where frid in (select relfrid from frrelmst)
    order by frid, relfrid

    Select frid, relfrid from frrelmst where 
    relfrid+frid not in (select frid+relfrid from frrelmst) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T15:18:50.787

Easy :

```
select frid, relfrid from frrelmst where  frid < relfrid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:54:55.090

我会使用下面的 SQL。如果表中仅存在一种关系表示，则仍将返回它。

```
SELECT frid, relfrid, relationship
FROM frrelmst f
WHERE frid < relfrid
  OR NOT EXISTS (
    SELECT 1
    FROM frrelmst
    WHERE frid = f.relfrid
      AND relfrid = f.frid
      AND frid <= f.frid
  ) 
```

# sip - 是否有支持 RTP/SAVPF 的 SIP 客户端？

> ID：12749234
> 
> 赞同：0
> 
> 时间：2012-10-05T15:17:11.897
> 
> 标签：sip, voip, rtp, webrtc

我想知道是否有支持 SAVPF 的 SIP 客户端应用程序（最好用于 Linux），以便我可以使其与 WebRTC 互操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T11:49:15.423

是的，看看 Doubango SIP 客户端。

他们在 HTML5 SIP 客户端中使用它。

[http://doubango.org](http://doubango.org)

编辑：他们还提供了一个 webrtc2sip 网关，安装后，可以使用任何其他 SIP 客户端并调用 webrtc 客户端。

# magento - Magento - 含税价格

> ID：12749235
> 
> 赞同：0
> 
> 时间：2012-10-05T15:17:22.630
> 
> 标签：magento

在 Magento 中，我将此设置 System > Config > Tax > Default Tax Destination Calculation > Default County 设置为“None”。

这是因为当用户将某些东西添加到他们的购物车时，我需要最初显示不包括 TAX/VAT 的价格，直到他们选择发货国家/地区。

问题是我需要在产品页面上显示含税的产品价格，但发现这是不可能的，因为我尝试的每种方法都会显示不含税/增值税的价格，即：

```
echo $_coreHelper->currency($_finalPriceInclTax,true,false) 
```

无论配置中的设置如何，任何想法如何显示含税价格？

# java - 无法使用 java.util.zip 创建 KMZ 文件

> ID：12749236
> 
> 赞同：2
> 
> 时间：2012-10-05T15:17:26.637
> 
> 标签：java, zip, kml, google-earth, kmz

因此，我过去制作了一些示例 KML/KMZ 文件，主要是手工制作，并且发现由于这项工作与 Google 地球存在一些[不一致之处。](http://code.google.com/p/kml-samples/issues/detail?id=300&q=kmz&colspec=ID%20Type%20Summary%20Product%20Status%20Stars%20Internal)在大多数情况下，我认为我对特定版本的 GE 需要做的事情有很好的把握。最近，我尝试在我的 KML/KMZ 示例文件中添加一些自动化功能，以便根据给定的 CSV 点和其他元数据为某些客户端自定义它们。

我想联系那些有使用自定义图标或内容从 Java 创建 KMZ 文件的经验的人。这是我坚持的皱纹：

我手动创建了一堆样式和自定义图标，以更好地显示客户数据。最近，我创建了一个 Java 应用程序，它可以通过自动化 KML/KMZ 生产来节省大量时间。这些样式直接从示例中复制到我的 Java 代码中（在其应有的位置使用转义符）。Java 代码最初构建了 KML，然后我将 KML 与示例中的图标文件夹打包，压缩并保存为 KMZ。一切正常。

然后我添加了一个主要基于[此示例](http://www.java-examples.com/create-zip-file-multiple-files-using-zipoutputstream-example)的代码块，并将我的所有图标作为资源添加到 jar 中。然后，我将文件构建为 .zip，并验证 KML 和 Icon 文件（在适当的文件夹中）是否在 zip 中。他们是。所有人都对这个世界感到满意。

然后我将输出文件名更改为 .kmz 而不是 .zip 并尝试在 Google 中运行输出。我的自定义图标都没有加载。KML 工作正常，点和多边形具有正确的样式颜色，但中间有带有 X 的框，好像它无法访问图标。

如果我将输出 KMZ 重命名为 zip、解压缩并在其中运行 KML，一切都会按预期工作。如果我重新压缩并重命名为 KMZ，它会再次损坏。

不过，这才是真正的乐趣。如果我将 KML 从 KMZ 中取出，使用工作区资源中的图标文件夹重新打包，另存为 KMZ 并加载到谷歌地球，它可以正常工作。

我觉得这告诉我，我的 java.util.zip 代码以某种方式破坏了图像，以至于 GE 不知道如何处理它们。但是我完全不明白为什么它们在未包装时工作正常，但在从同一位置重新包装时又坏了。

有人有想法么？提前道歉没有发布代码。如果我们可以稍微缩小问题空间，我会发布我可以发布的内容。

这是我目前可以转录的尽可能多的代码：

```
//Create new file output based on file-name of previously made KML file (fileOut)
//nameToken exists to pop KML extension off the back end of fileOut.getName()

File fileOut2 = new File(fileOut.getParent(), nameToken2[0] + ".kmz");
FileOutputStream foutstream = new FileOutputStream(fileOut2);

ZipOutputStream zout = new ZipOutputStream(foutstream);
byte[] buffer = new byte[1024];

String[] resourceFiles = {null,"/icons/b-lv.png",...}; //many files listed here
for(int i = 0; i < resourceFiles.length; i++){
    //Previously wrote kml file, time to read it in and add to zip
    if (i == 0){
        FileInputStream fin = new FileInoutStream(fileOut);
        zout.putNextEntry(new ZipEntry(fileOut.getName());
        int length;
        while ((length = fin.read(buffer)) > 0){
            zout.write(buffer,0,length);
        }
        zout.closeEntry();
        fin.close();
    }
    //Read in resource icon files and add to zip
    else{
        InputStream inStream = this.getClass().getResourceAsStream(resourceFiles[i]);
        zout.putNextEntry(new ZipEntry(resourceFiles[i]));
        int length;
        while((length = inStream.read(buffer)) > 0){
            zout.write(buffer,0,length);
        }
        zout.closeEntry();
        inStream.close();
    }
}

zout.flush();
zout.close();
foutstream.close();
fileOut.delete();  //Deletes previously made KML file 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T18:57:04.157

*[下面是使用ZipOutputStream](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipOutputStream.html)*和根 KML 文件和图像文件条目创建示例 KMZ 文件的 Java 代码。如果在添加图像条目之前未正确关闭 KML 条目，则 KMZ 文件可能会损坏。

**重要提示：**您必须确保 zip 文件条目与 KML 中的 URL 引用完全匹配。zip 文件条目不应**以**“/”或“../”或“C:/”开头。同样，对 KML 中 KMZ 条目的 URL/href 引用应该是相对于特定 KML 文件的（例如*icons/b-lv.png ）。*

为了减少下面示例中的代码行数，Apache commons [IOUtils](http://commons.apache.org/io/)库用于将输入文件复制到 KMZ 输出流并关闭流。

```
import java.util.zip.ZipEntry;
import java.util.zip.ZipOutputStream;
import org.apache.commons.io.IOUtils;
import java.io.*;

public class TestKmz {

    public static void main(String[] args) throws IOException {     
        createKMZ();
        System.out.println("file out.kmz created");
    }

    public static void createKMZ()  throws IOException  {
        FileOutputStream fos = new FileOutputStream("out.kmz");
        ZipOutputStream zoS = new ZipOutputStream(fos);     
        ZipEntry ze = new ZipEntry("doc.kml");
        zoS.putNextEntry(ze);
        PrintStream ps = new PrintStream(zoS);          
        ps.println("<?xml version='1.0' encoding='UTF-8'?>");
        ps.println("<kml xmlns='http://www.opengis.net/kml/2.2'>");     
        // write out contents of KML file ...
        ps.println("<Placemark>");
        // add reference to image via inline style
        ps.println("  <Style><IconStyle>");
        ps.println("    <Icon><href>image.png</href></Icon>");
        ps.println("  </IconStyle></Style>");
        ps.println("</Placemark>");
        ps.println("</kml>");
        ps.flush();                 
        zoS.closeEntry(); // close KML entry

        // now add image file entry to KMZ
        FileInputStream is = null;
        try {                   
            is = new FileInputStream("image.png");
            ZipEntry zEnt = new ZipEntry("image.png");
            zoS.putNextEntry(zEnt);
            // copy image input to KMZ output
            // write contents to entry within compressed KMZ file
            IOUtils.copy(is, zoS);
        } finally {
            IOUtils.closeQuietly(is);
        }
        zoS.closeEntry();
        zoS.close();
    }   
} 
```

# java - InputStream 缓冲数据

> ID：12749237
> 
> 赞同：0
> 
> 时间：2012-10-05T15:17:30.790
> 
> 标签：java, ssl, inputstream, serversocket

我的程序使用 SSL`ServerSocket`等待传入连接并接收数据。客户端连接到服务器并将一个 10 字节的块序列写入`Socket`'s `OutputStream`。在每个 10 字节块之后`OutputStream`ed `flush()`，因为块应该尽快到达服务器（注意：这里使用 WIFI）。

然后由服务器读取这些块。使用 OpenJDK 7 在 Ubuntu Linux 上运行服务器可以正常工作。

但是使用 Suns Java 7 在 Windows 上运行服务器会导致以下问题：
我测量了服务器上接收到的块之间的时间。我注意到尽管客户端`flush()`在写入块后使用，但有时服务器接收/读取数据为时已晚。

例如：
接收第一个块需要 265 毫秒。接下来的 15 个块有 0ms 到 16ms 的延迟。
之后，下一个块在 172 毫秒后到达。但接下来的 10 个块再次只需要 0ms 到 16ms。

因此，InputStream 似乎首先接收并缓冲了一些字节。然后在某个时间点（例如超过 150 毫秒后）`InputStream`'s `read`- 方法返回一些数据。之后- 方法会`read`立即返回一些字节的数据（0ms 到 16ms）。然后它又需要一些时间。
我知道 an`InputStream`使用缓冲区和`read`-method 阻塞，直到有新字节可用。但似乎`read`- 方法并没有尽可能快地返回数据。

客户端始终是 Android 应用程序。但是由于在 Linux 上运行的服务器不会出现问题（块之间总是平均 20 毫秒），所以问题一定是服务器或 JRE。

关于如何解决问题的任何想法？我真的需要客户端发送的块的“流畅”传输，因为 Android 应用程序上的交互应该在服务器上显示为近乎实时的动画。但是这些动画延迟了 265 毫秒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:27:05.547

为什么您认为问题出在 InputStream 读取方法上？您是否设置了数据包嗅探器来实际*观察*网络流量？Java没有做缓冲，网络堆栈是。您可能会或可能无法通过调整某些套接字设置来影响它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T22:54:01.903

> InputStream 缓冲数据

不，它没有。没有任何 InputStream 缓冲，除非您使用 BufferedInputStream。您的*发送*正在由内核中的 TCP Nagle 算法合并。在发送方调用 Socket.setTcpNoDelay(true)。

您应该知道，通过 SSL 发送 10 字节块的效率极低。SSL 本身有大约 44 个字节的记录开销，而 TCP 还有 20 个字节，因此您的数据爆炸量接近 4 倍。如果可能，请使用纯文本。

# java - 为团队设置 Maven Nexus 服务器以共享内部构建的 jar

> ID：12749239
> 
> 赞同：7
> 
> 时间：2012-10-05T15:17:35.797
> 
> 标签：java, spring, maven, nexus

我的团队刚刚开始在 Java 项目中使用 Maven。我们现在拥有使用 Maven 从 Internet 获取依赖项的所有项目，但我们想使用 Maven 存储库来共享我们制作并打包在 jar 中的公共共享 Java 类。

我设置了一个 Maven Nexus 服务器，看起来它作为代理工作得很好。下一步是获取我们构建的其中一个 jar 并将其部署到本地 nexus 存储库中，因此任何开发人员都可以将其作为依赖项共享。但是我不知道从哪里开始。

如果我进行 mvn 安装，它会将代码放入本地（我的电脑）repo，这不是我想要的。我想将它安装在 nexus repo 上，这样我团队中的每个人都可以访问它。请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:39:31.140

您可能对此有所了解，但[这里是关于设置 Maven 存储库的高级概述（供其他人使用）](http://www.theserverside.com/news/1364121/Setting-Up-a-Maven-Repository)。

一旦你有了一个存储库，你需要返回到每个依赖项目（或者如果它们共享一个主 pom）并定义存储库，以便将其添加到将为构建拉取的源存储库中。

我使用[Apache 的 Archiva](http://archiva.apache.org/)取得了很好的效果，它支持作为 Maven 项目请求的“缓存代理”，这样如果它不能为二进制工件本身提供服务，它将从上游存储库下载和收集二进制工件。也就是说，文档可能会更好一些。

还有其他产品，例如[Artifactory](https://secure.artifactoryonline.com/home/v_artifactory_opensource_overview)，它们的评价很高。您可能希望将其视为评估的候选对象。

您的构建不需要存储库管理系统，任何具有正确目录结构的 ssh 服务器都可以；然而，拥有这样一个系统可以让您的生活更轻松，因为自动缓存与请求代理相结合，提供了一种管理用户访问的方法，构建和管理多个存储库（开发/QA 发布/通用可用性），以及运行可能使管理变得复杂的奇怪报告更容易（如果你使用它们）。

就实际使用这样的服务器而言，您需要修改 pom 的两个“部分”，以及一个（可能）需要添加的附加文件。

1.  您必须重新配置项目的 <repositories> 部分才能从存储库中提取。
2.  您必须重新配置项目的 <distributionManagement> 部分才能部署到新的存储库。
3.  您必须修改或创建“settings.xml”文件来存储访问存储库的凭据。

除此之外，它成为风格问题。我建议通过设置两个存储库将快照与“发布”分开。这使您可以经常从快照存储库中清除旧文件，而不会对长期需要的发布版本造成风险。

然后，您需要决定是否要缓存内部构建所需的所有项目。如果是这样，您需要重新配置项目以不从“外部”存储库中提取，并将“丢失”的工件下载到存储库的正确目录中。许多存储库管理产品的“自动代理缓存”功能正是这样做的。

然后，您需要决定是否要在内部缓存*maven*系统的所有插件。如果是这样，你需要一个*pluginRepository*，如果你想部署一个自定义插件，一个*pluginSnapshotRepository*。是的，这听起来很多，但同时做四个这样的存储库只是做一个多一点的工作。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:22:25.187

您可以使用 DistributionManagement maven 插件执行工件的部署或安装。更多细节在这里。[http://www.stefanolocati.it/blog/?p=1034](http://www.stefanolocati.it/blog/?p=1034)

# ios - 方向无法正常工作

> ID：12749241
> 
> 赞同：0
> 
> 时间：2012-10-05T15:17:58.233
> 
> 标签：ios, orientation, ios6, uiinterfaceorientation

我无法让我的应用程序的方向正常运行。简而言之，我有两个视图控制器，我将在我的应用程序中切换它们。`ViewControllerA`只能纵向或倒置显示。`ViewControllerB`可以在四个方向中的任何一个方向显示。

这似乎应该很简单。我不确定到底该怎么做，但我想如果我只是摆弄`shouldAutorotate`, `shouldAutorotateToInterfaceOrientation:`，`supportedInterfaceOrientations`然后我应该得到我想要的。出于某种原因，界面方向`info.plist`完全覆盖**了**视图控制器中的任何代码。如果我只允许肖像`info.plist`但允许我的视图控制器中的所有内容，它*不会*旋转。唯一被调用的方法是`supportedInterfaceOrientations`（我在其中返回`UIInterfaceOrientationMaskAll`）。同样，如果我允许在 中的每个方向`info.plist`，旋转设备也会旋转 viewController，即使在我的代码中我不允许任何非纵向的方向。

我真的不知道我做错了什么。有人可以帮我看看我的方向代码应该是什么样子的片段`ViewControllerA`，`ViewControllerB`以及应该选择什么方向`info.plist`。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:14:28.747

iOS 6 中不推荐使用 shouldAutorotateToInterfaceOrientation 方法。而是在所有当前的全屏视图控制器中实现 supportedInterfaceOrientations 和 shouldAutorotate 方法。

还要确保您的应用在主窗口上执行 setRootViewController。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T13:54:13.907

在你的 AppDelegate.m 上试试这个

//[window_addSubview:navController_.view];

[window_setRootViewController:navController_];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T15:28:36.557

开启功能

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

您应该对要旋转到的所有界面返回 true，假设您只想要纵向

```
return interfaceOrientation == UIInterfaceOrientationPortrait; 
```

如果你想要除了颠倒之外的一切

```
return !(interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown); 
```

在 plist 本身上，它设置了更多全局值，因此如果此选项不可用，您的代码将不会运行。您必须在 plist 上授予它才能为两个视图执行此操作。

希望这可以帮助。

# python - 如何证明参数评估在 Python 中是“从左到右”的？

> ID：12749246
> 
> 赞同：8
> 
> 时间：2012-10-05T15:18:11.910
> 
> 标签：python, parameter-passing, operator-precedence

例如，在 JavaScript 中，我们可以编写如下程序：

```
var a = 1;
testFunction(++a, ++a, a);
function testFunction(x, y, z){
      document.writeln("<br />x = " + x);
      document.writeln("<br />y = " + y);
      document.writeln("<br />z = " + z);
} 
```

我们会得到一个输出：

```
x = 2
y = 3
z = 3 
```

这意味着在 JavaScript 中参数是真正从左到右计算的。在 C 中我们会得到输出

```
x = 3
y = 3
z = 3 
```

我想知道我们是否可以在 Python 中做同样的事情，或者因为它是按值传递参考语言，所以这是不可能的？

我制作了一个简单的程序，但我认为这并不能证明什么：

```
x = 2
def f(x, y, z):
    print(x, y, z)

f(x*2, x*2, x**2)
print(x) 
```

```
4 4 4
2 
```

当我调用它时，Python 不会让我在函数参数中做任何新的赋值（例如`f(x=4, x, x)`或类似的东西）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-05T15:27:00.287

```
>>> def f(x, y): pass
...
>>> f(print(1), print(2))
1
2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T15:26:38.817

反汇编函数调用。

```
>>> def foo():
...   bar(x+1, x+2, x+3)
... 
>>> dis.dis(foo)
  2           0 LOAD_GLOBAL              0 (bar)
              3 LOAD_GLOBAL              1 (x)
              6 LOAD_CONST               1 (1)
              9 BINARY_ADD          
             10 LOAD_GLOBAL              1 (x)
             13 LOAD_CONST               2 (2)
             16 BINARY_ADD          
             17 LOAD_GLOBAL              1 (x)
             20 LOAD_CONST               3 (3)
             23 BINARY_ADD          
             24 CALL_FUNCTION            3
             27 POP_TOP             
             28 LOAD_CONST               0 (None)
             31 RETURN_VALUE 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-05T15:30:11.037

使用 Python 3：

```
>>> a = []
>>> f = print(
    a.append(1), a[:],
    a.append(2), a[:],
    a.append(3), a[:]
)
None [1] None [1, 2] None [1, 2, 3] 
```

* * *

档案：

```
>>> a = []
>>> f = print(a.append(1), a, a.append(2), a, a.append(3), a) 
```

奇怪的是（起初），这段代码产生了：

```
None [1, 2, 3] None [1, 2, 3] None [1, 2, 3] 
```

但是，`dis(f)`使这一点更清楚：

```
>>> dis(f)

  1           0 LOAD_NAME                0 (print) #Loads the value of 'print' into memory. Precisely, the value is pushed to the TOS (Top of Stack)
    -->       3 LOAD_NAME                1 (a) #Loads the value of object 'a' 
              6 LOAD_ATTR                2 (append) #Loads the append attribute (in this case method)
              9 LOAD_CONST               0 (1) #Loads the constant 1
             12 CALL_FUNCTION            1 #a.append(1) is called
             15 LOAD_NAME                1 (a) #for print(...,a,...)
             18 LOAD_NAME                1 (a) #for the next a.append()
             21 LOAD_ATTR                2 (append) 
             24 LOAD_CONST               1 (2) 
             27 CALL_FUNCTION            1 #a.append(2)
             30 LOAD_NAME                1 (a) 
             33 LOAD_NAME                1 (a) 
             36 LOAD_ATTR                2 (append) 
             39 LOAD_CONST               2 (3) 
             42 CALL_FUNCTION            1 #a.append(3)
             45 LOAD_NAME                1 (a) #loads a to be used thrice by print
             48 CALL_FUNCTION            6 #calls print
             51 PRINT_EXPR                 #prints TOS and clears it
             52 LOAD_CONST               3 (None) #Loads None
             55 RETURN_VALUE             #Returns None 
```

的输出`dis(f)`是我们所期望的——从左到右的评估。本质上，这种“差异”是`print()`最后评估的结果。到那时， 的值`a`已更改为`[1, 2, 3]`并且相同的最终对象被打印三次。

如果我们用 替换`a`，`a[:]`我们会得到预期的结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T15:46:07.670

恕我直言，这也表明了这一点：

```
>>> '{} {} {}'.format(x,x+1,x+2)
'1 2 3' 
```

编辑：

```
>>> def f(t):   return time.time()-t 
...         

>>> t1=time.time(); '{:.4} {:.4} {:.4}'.format(f(t1),f(t1),f(t1))
'5.007e-06 7.868e-06 9.06e-06' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T15:59:38.147

自定义类可以在这里提供帮助：

```
class Tester(object):
    "test object to reveal left to right evaluation"
    def __init__(self, value):
        self.value = value
    def __add__(self, value):
        print("adding ", value)
        return Tester(self.value + value)
    def __repr__(self):
        return repr(self.value) 
```

运行时：

```
--> t = Tester(7)
--> t
7
--> t = t + 7
adding  7
--> t
14
--> def blah(a, b, c):
...   print(a, b, c)
... 
--> blah(t+1, t+2, t+3)
adding  1
adding  2
adding  3
15 16 17 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-19T18:54:49.000

简答：从左到右

示例：由于这是一个在我进行算术运算时总是在我脑海中浮现的问题（我应该转换为浮点数以及哪个数字），因此提供了一个来自该方面的示例：

```
>>> a = 1/2/3/4/5/4/3
>>> a
0 
```

当我们除以整数时，不足为奇的是它会变得更低四舍五入。

```
>>> a = 1/2/3/4/5/4/float(3)
>>> a
0.0 
```

如果我们将最后一个整数类型转换为浮点数，我们仍然会得到零，因为当我们的数字除以浮点数时，由于整数除法，我们已经变成了 0。

```
>>> a = 1/2/3/float(4)/5/4/3
>>> a
0.0 
```

与上面相同的场景，但将浮点类型转换移动到更靠近左侧的位置。

```
>>> a = float(1)/2/3/4/5/4/3
>>> a
0.0006944444444444445 
```

最后，当我们将第一个整数类型转换为浮点数时，结果就是所需的整数，因为从第一个除法开始，即最左边的除法，我们使用浮点数。

额外1：如果您试图回答这个问题以提高算术评估，您应该检查[这个](https://stackoverflow.com/questions/3264345)

额外2：请注意以下情况：

```
>>> a = float(1/2/3/4/5/4/3)
>>> a
0.0 
```

# python - 如何更新 elif 子句中的列表并返回列表

> ID：12749250
> 
> 赞同：-1
> 
> 时间：2012-10-05T15:18:23.923
> 
> 标签：python, list, append

如何编写 python 代码，以便可以在 elif 原因中更新我的数字列表？我从一个空列表开始，然后从那里我必须询问用户他们想要添加多少新分数到列表中，然后将这些数字添加到列表中。然后我必须返回菜单系统并询问如果用户想要列表中这些数字的平均值，请按 3。在这里，我遇到的问题下方的代码是分数正在 elif 子句中更新，但是一旦我退出该子句，列表就会恢复为空。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:24:18.867

将绑定空列表的语句移动到循环之前。

```
scores = []
while 1:
   ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:08:32.677

您的 addScores 方法看起来像是返回一个列表， append 方法适用于单个元素，在您的 elif 语句中使用 extend 而不是 append 。

同样，您的 addScores 方法没有实例化要附加到的本地分数列表，因此它将返回一个空列表，因为从未实例化过。要么将你想要修改的列表传递给它，要么有一个它返回的本地列表，目前你什么都不做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:35:47.710

首先，函数不应该在while循环中定义；在循环外定义它们并传入参数。跟踪分数列表的一种简洁方法是使用全局变量，以便程序中的每个函数都可以访问它。

您修改后的代码可能如下所示：

```
scores = []

def addScores():
    enteredScores = []
    while True:
        numOfScores = input("How many new scores would you like to add: ")
        try:
            if int(numOfScores) > 0:
                for i in range(int(numOfScores)):
                    newInput = input("Please enter a score: ")
                    enteredScores.append(newInput)
                print(enteredScores)
                return enteredScores
            else:
                print("Please enter a positive integer.")
                continue
        except ValueError:
            print("Please enter a positive integer.")

while True:
    print("0 - Clear scores")
    print("1 - Input more scores")
    print("2 - Print scores")
    print("3 - Average scores")
    option = input("Please choose an option: ")

    if option == 0:
        scores = []
    elif option == 1:
        scores += addScores()
    elif option == 2:
        print("Scores:", scores)
    elif option == 3:
        try:
            avgScore = sum(scores)/len(scores)
            print("Average:", avgScore)
        except TypeError:
            print("Invalid score contained in list.")
    else:
        print("Quitting current program.")
        break
    replay = input("Do you wish to continue? (Y/N)")
    replay = replay.lower()
    if replay == "y" or replay == "yes":
        continue
    else:
        break

print("Goodbye!") 
```

我添加了两个 try/except 语句。如果程序中出现错误，并且它符合上述类型之一（ValueError 和 TypeError），它不会关闭程序，而是使用 except 语句处理错误。如果您还没有涵盖这些，您可以删除它们并且程序应该可以正常工作。我还稍微清理了逻辑 - 最初，您的重播变量没有做任何事情，因此通过将其移动到循环中，它现在要么继续要么中断程序。

# struts2 - struts2 i18ninterceptor 返回同一页面或操作

> ID：12749251
> 
> 赞同：3
> 
> 时间：2012-10-05T15:18:32.943
> 
> 标签：struts2, internationalization, actioncontext

我为我的问题搜索了 2 个小时，但仍然找不到任何解决方案。

我想做的事：

我将 struts2 用于国际应用程序，所以我需要多语言支持。因此，我发现 i18n-Interceptor 只需通过一个参数即可更改语言环境（非常酷！）。现在我想在我的应用程序中的任何时候更改语言环境，以便用户可以更改语言并被转发到他来自的同一页面或操作。这似乎并不容易。我已经尝试了以下在谷歌上找到的东西，但对我不起作用：

1.  使用 JSP 上的 acutall URL/URI（如“ShowUser.action”）并使用另一个语言环境调用它 -> 无法找到在 jsp 中使用参数获取完整 URL 或 URI。URL 为我提供了来自磁贴的当前站点（即 /content/site/user.jsp），而 URI 则返回我的磁贴布局（即 /content/layout.jsp）。我试过 request.getRequestUrl() 和 request.getRequestURI()

2.  使用 actionContext 获取 JSP 的完整 URL -> 找不到..

3.  在我的 "ChangeLocale.action" 中使用 "request.getHeader("referal") 并将其动态设置为 struts.xml 中的 redirectAction -> 工作但太多代码来解析带有参数的 URL 等）

第三点是使用以下代码，但我正在寻找更好的解决方案：

struts.xml 中的相关部分

```
 <action name="Locale" class="de.smg.LocaleAction">
     <interceptor-ref name="i18n"/>
     <interceptor-ref name="basicStack"/>
     <result type="redirectAction">${forwardAction}</result>
  </action> 
```

LocaleAction.java：

```
public class LocaleAction extends ActionSupport implements ServletRequestAware {

private static final long serialVersionUID = 1L;
private static final String FALL_BACK_ACTION = "ShowStartPage";

private HttpServletRequest request;
private String forwardAction = null;

@Override
public String execute() throws Exception {
    String referer = request.getHeader("referer");
    String action = FALL_BACK_ACTION;

    if (referer!=null) {        
        // WeberT: first cut off the protocol, server and port...
        referer = referer.substring(referer.lastIndexOf("/") + 1, referer.length());

        // WeberT: then cut of the .action part if available
        int dotPos = referer.indexOf(".");

        if (dotPos>0) {
            int qMarkPos = referer.indexOf("?");
            if (qMarkPos> 0 && dotPos < qMarkPos) {         
                action = referer.substring(0, dotPos) + referer.substring(qMarkPos, referer.length());
            } else {
                action = referer.substring(0, dotPos);                  
            }               
        }
        forwardAction = action;
    }
    return SUCCESS;
}

@Override
public void setServletRequest(HttpServletRequest request) {
    this.request = request;     
}

/**
 * @return the forwardAction
 */
public String getForwardAction() {
    return forwardAction;
}
 } 
```

所以我来自行动：

```
http://server:port/ShowUser.action?id=1 
```

在用户站点上，我切换到另一种语言，我的 LocaleAction 将返回 forwardAction：

```
ShowUser?id=1 
```

所以，这行得通，但在我看来像黑暗的一面？解决这个（如我所想的）“小”问题的正确解决方案是什么？感谢您的回答。

最好的问候托马斯:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T08:28:38.900

使用属性设置为和空属性的`<s:url>`标签。`includeParams``all``value`

```
<s:url var="urlen" includeParams="all" value="">
  <s:param name="request_locale">en</s:param>
</s:url>
<s:a href="%{urlen}">English</s:a> 
```

您不需要任何特殊的操作配置，但`i18n`拦截器必须在拦截器堆栈中（它已经包含在`defaultStack`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T03:41:31.323

我不确定您到底想从 中获得什么`ActionContext`，但您可以从中找到大部分信息`ActionContext`，这里是其中的一些

```
Object action=ActionContext.getContext().getActionInvocation().getAction();
ActionProxy actionProxy=ActionContext.getContext().getActionInvocation().getProxy();
String methodName=actionProxy.getMethod();
String context = actionProxy.getName();
String namespace= actionProxy.getNamespace();
ActionContext.getContext().getParameters() //parameters from the UI 
```

因此，如果您看到您拥有完成工作所需的几乎所有信息`ActionContext`。这是执行操作的上下文。每个上下文基本上都是一个操作执行所需的对象容器，例如会话、参数、语言环境等。

最好的事情 `ActionContext`是线程本地，这意味着存储在`ActionContext`每个线程中的值是唯一的。

或者，您也可以在 javascript 的帮助下获取当前 URL。

# c# - 投票响应的唯一 ID

> ID：12749259
> 
> 赞同：0
> 
> 时间：2012-10-05T15:18:59.663
> 
> 标签：c#, asp.net

在我的系统中，管理员创建一个投票并将其发布到全世界，以便拥有投票链接的用户可以回答它。

有一些问题旨在接收多个答案，因此用户可以在一个响应中选择多个分散注意力。

**DB中的响应表结构**

*   ID
*   ActivityID - 投票 ID
*   价值——地区价值
*   时间响应

在数据库中，我目前正在分别保存每个响应。

我给你举个例子 假设投票中有 4 个区 (a,b,c,d) 用户选择以下区 (a,b,c)

响应表将如下所示：

```
 ID       ActivityID      Value    TimeResponse
    1           234            a        01/01/2012 
    2           234            b        01/01/2012
    3           234            c        01/01/2012 
```

因此，如果我尝试计算 ID，我将得到数字 3，它代表已回答的地区数是给定的民意调查。

但是我需要给定民意调查中每个用户的响应数量，所以我需要以某种方式将这两者结合起来......

到目前为止，我考虑了以下解决方案，但它们都不是很好。

*   第一个解决方案是添加一列用户的IP，但有时我无法获取用户的IP。
*   第二种解决方案是使用 sessionIDManager 添加用户的 sessionID 列，但如果用户回答两次（2 个响应），它将存储相同的会话 ID。

仅供参考，回答民意调查的用户是匿名的。

并且系统要求之一是允许用户多次回答民意调查

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:53:52.253

我可以看到两种方法。

一种是在每次用户回答投票时生成一个 UUID。在数据库中创建一个列，例如*AnswerID*，并在为每个响应创建行时使用相同的 UUID。在 C# 中，您可以使用`Guid.NewGuid()`. 然后，您可以通过查询不同的*AnswerID*值来计算响应数。

*第二种方法是为给定问题的每组*答案使用一行。例如，如果用户回答了 A、B 和 C，您会将响应存储为“A/B/C”。这将使查询某个答案的总数变得更加困难，尽管某些数据库系统可能会使这更容易（例如，[PostgreSQL](http://www.postgresql.org/)具有可索引的数组类型）。

希望这可以帮助！

# php - PHP Fizzbuzz 挑战

> ID：12749261
> 
> 赞同：0
> 
> 时间：2012-10-05T15:19:07.603
> 
> 标签：php, fizzbuzz

工作中的某个人准备挑战创建一个脚本，使用 PHP 以尽可能少的点赞数打印 FizzBu​​zz 游戏

挑战

> 编写一个程序，打印从 1 到 100 的数字。但是对于三的倍数打印“Fizz”而不是数字，对于五的倍数打印“Buzz”。对于同时是三和五的倍数的数字，打印“FizzBu​​zz”。

我的尝试：

```
foreach(range(1,100) as $i) {
  $val = ($i % 3 == 0 ? "Fizz" : "").($i % 5 == 0 ? "Buzz" : "");
  echo (empty($val) ? $i : $val) .  '<br />';
} 
```

某人的蟒蛇尝试

```
[ ("Fizz" if not i % 3 else "") + ("Buzz" if not i % 5 else "") + ("Baz" if not i % 7 else "") if _ else "" for i in range(0, 100) ] 
```

你能看到如何使它更好/改进吗？或者甚至做得更好？

谢谢你的时间

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-05T15:35:37.380

最优化版本：

```
echo "1\n2\nFizz\n4\nBuzz\nFizz\n7\n8\nFizz\nBuzz\n11\nFizz\n13\n14\nFizzBuzz\n16\n17\nFizz\n19\nBuzz\nFizz\n22\n23\nFizz\nBuzz\n26\nFizz\n28\n29\nFizzBuzz\n31\n32\nFizz\n34\nBuzz\nFizz\n37\n38\nFizz\nBuzz\n41\nFizz\n43\n44\nFizzBuzz\n46\n47\nFizz\n49\nBuzz\nFizz\n52\n53\nFizz\nBuzz\n56\nFizz\n58\n59\nFizzBuzz\n61\n62\nFizz\n64\nBuzz\nFizz\n67\n68\nFizz\nBuzz\n71\nFizz\n73\n74\nFizzBuzz\n76\n77\nFizz\n79\nBuzz\nFizz\n82\n83\nFizz\nBuzz\n86\nFizz\n88\n89\nFizzBuzz\n91\n92\nFizz\n94\nBuzz\nFizz\n97\n98\nFizz\nBuzz\n"; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T15:25:50.530

一种尺寸优化：

```
$val = ($i % 3 ? "" : "Fizz").($i % 5 ? "" : "Buzz");
              ^--- remove == 0       ^--- remove  == 0 
```

PHP 会为您轻松地将模数的结果转换为布尔值，而无需进行相等性测试。

同样地

```
echo (!$val ? $i : $val); 
```

不需要 empty() 测试 - 空字符串无论如何都会评估为布尔值 false。

如果您使用的是 PHP 5.3+，您也可以使用快捷方式三元：

```
echo ($val ?: $i) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T15:29:28.717

`foreach(range(1,100)as$i)echo(''==($x=($i%3==0?"Fizz":"").($i%5==0?"Buzz":""))?$i:$x).'<br />';`

# php - prevent file_get_contents from other sites PHP

> ID：12749262
> 
> 赞同：0
> 
> 时间：2012-10-05T15:19:11.147
> 
> 标签：php, file-get-contents

> **Possible Duplicate:**
> [how to prevent PHP's file_get_contents( )](https://stackoverflow.com/questions/392630/how-to-prevent-phps-file-get-contents)

I want to prevent file_get_contents from other sites to protect my contents not be stolen from other sites. I found a topic like this but It seems not very clear to me. [how to prevent PHP's file_get_contents( )](https://stackoverflow.com/questions/392630/how-to-prevent-phps-file-get-contents)

Any helps? Example [http://ddth.com](http://ddth.com). You couldn't `file_get_contents("http://ddth.com");`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:29:42.993

您可以使用 HTTP 身份验证来保护

```
$login = 'root';
$pass = '12345';

if(($_SERVER['PHP_AUTH_PW']!= $pass || $_SERVER['PHP_AUTH_USER'] != $login)|| !$_SERVER['PHP_AUTH_USER'])
{
 header('WWW-Authenticate: Basic realm="Test auth"');
 header('HTTP/1.0 401 Unauthorized');
 echo 'Auth failed';
 exit;
}

else
{
 echo "ok";
 } 
```

并且可以使用 curl 阅读

```
 $username = 'user';
    $password = 'password';
    $ip = $_SERVER["SERVER_ADDR"];      
    $browser_id = "Mozilla/5.0 (Windows; U; Windows NT 5.1; es-ES; rv:1.8.1.3) Gecko/20070309 Firefox/2.0.0.3";
    $curl = curl_init();
    curl_setopt($curl, CURLOPT_URL, $url); 
    curl_setopt($curl, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
    curl_setopt($curl, CURLOPT_USERPWD, "$username:$password");
    curl_setopt($curl, CURLOPT_USERAGENT, $browser_id);
    curl_setopt($curl, CURLOPT_HEADER, 0);
    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, TRUE);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, TRUE);
    curl_setopt($curl, CURLOPT_TIMEOUT, 15);
    curl_setopt($curl, CURLOPT_REFERER, $ip);       
    $retValue = curl_exec($curl);
    $err = curl_error($curl);
    curl_close($curl); 
```

要提取信息，请在[此处输入代码](http://pastebin.com/wm3gjbsD)

# ruby - 如何多次调用 Thor 任务？

> ID：12749268
> 
> 赞同：1
> 
> 时间：2012-10-05T15:19:37.510
> 
> 标签：ruby, rake, thor

Thor 和 Rake（和 Make）一样具有任务管理功能。如果我多次调用一个任务，它只会有效地调用该任务一次。如何多次调用任务？

我尝试修改`@_invocations`哈希，但没有奏效：

```
require 'csv'
require './config/environment'

class MisReport < Thor

  desc "all", "generate mysql and postgres mis"
  def all
    generate("pg_mis_report", "pg")
    generate("mysql_mis_report", "mysql") 
  end

  desc "generate", "generate mis report"
  def generate(file_name = "mis_report_#{Time.now.to_s(:number)}", connection = "postgres") 
    if connection == "pg"
      puts "== postgres database"
      ActiveRecord::Base.establish_connection :development_mysql
    else
      puts "== mysql database"
      ActiveRecord::Base.establish_connection :development
    end

    # generate MIS

    puts
    puts "mis file is at: #{file_path}"
  end

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-22T13:57:02.367

```
class MisReport < Thor

  desc "all", "generate mysql and postgres mis"
  def all
    MisReport.new.invoke "generate", ["pg_mis_report", "pg"]
    MisReport.new.invoke "generate", ["mysql_mis_report", "mysql"]
  end
end 
```

它支持使用选项调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:26:33.790

浏览 Thor 文档，我找不到强制多次调用同一任务的方法。这可能是设计使然。

我创建了一个解决方法，通过将报告生成请求组合成一个任务来满足您的要求，该任务又依赖于 Thor 为非任务方法提供的“no_task”块。您可以灵活地添加要生成的新报告，方法是将它们添加到传递给`generate`.

```
class MisReport < Thor

  desc "all", "generate mysql and postgres mis"
  def all
    generate({:pg_mis_report => "pg", :mysql_mis_report => "mysql"})
  end

  desc "generate", "generate mis report"
  def generate(hash)
    hash.each_pair {|file_name, connection| generate_report(file_name.to_s, connection)}
  end

  no_tasks{
    def generate_report(file_name = "mis_report_#{Time.now.to_s(:number)}", connection = "postgres") 

      if connection == "pg"
        puts "== postgres database"
        #ActiveRecord::Base.establish_connection :development_mysql
      else
        puts "== mysql database"
        #ActiveRecord::Base.establish_connection :development
      end

      # generate MIS

      file_path = "/some/path/to/#{file_name}"
      puts
      puts "mis file is at: #{file_path}"
    end
  }

end 
```

我已经对其进行了测试，输出如下所示：

```
$> thor mis_report:all
== postgres database

mis file is at: /some/path/to/pg_mis_report
== mysql database

mis file is at: /some/path/to/mysql_mis_report 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-10T16:46:07.850

这就是我通过为 Thor 创建一个模仿`Rake["my:task"].execute`工作原理的小型辅助方法来解决问题的方法。

把它放在你的任务类的任何地方。

```
no_commands do 
  def execute(task, args, options)
    (klass, task) = Thor::Util.find_class_and_command_by_namespace(task)
    klass.new.invoke(task, args, options)
  end
end 
```

然后你可以使用`execute`完全一样`invoke`

# windows - Windows 批处理文件 - 对于给定目录和子目录中的所有文件 - 将文件扩展名更改为小写

> ID：12749269
> 
> 赞同：3
> 
> 时间：2012-10-05T15:19:45.193
> 
> 标签：windows, batch-file

我的目标：使用 Windows 批处理脚本确保给定目录和子目录中的所有文件都具有小写的文件扩展名

我已经做到了这一点（我承认不是很远！）..

```
for /R c:\test %%G in (*.*) do (
  echo %%G
) 
```

这会成功打印出所有带有扩展名的文件（inc 完整路径），但是如何检查文件扩展名并确保它是小写的（顺便说一下，我不想将文件名设为小写.. 只是扩展名）。

提前致谢 ！

格雷格

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T16:03:08.750

完成任务需要 2 种（可能是 3 种）技术。

1）您需要解析出文件名和文件扩展名 - 这很简单，如 FOR HELP 中所述。（`HELP FOR`从命令行输入）

*   `%%~nG`= 文件名
*   `%%~xG`= 文件扩展名

2）您需要将每个文件扩展名存储在一个变量中，然后使用如下代码将其转换为小写

```
for %%C in (a b c d e f g h i j k l m n o p q r s t u v w x y z) do set "ext=!ext:%%C=%%C!" 
```

您需要`setlocal enableDelayedExpansion`在脚本顶部启用延迟扩展。

上述工作是因为搜索和替换的搜索部分不区分大小写。

3) 在文件扩展名可能包含 a 的不太可能的情况下`!`，您需要在循环中打开和关闭延迟扩展。但我严重怀疑你会遇到这种情况。

这是一个完成的、功能正常的脚本，它忽略了第 3 点。

```
@echo off
setlocal enableDelayedExpansion
for /r "c:\test" %%F in (*) do if "%%~xF" neq "" (
  set "ext=%%~xF"
  for %%C in (a b c d e f g h i j k l m n o p q r s t u v w x y z) do set "ext=!ext:%%C=%%C!"
  ren "%%F" "%%~nF!ext!"
) 
```

Bali C 在他的回答中提出了一个有趣的想法，但并没有奏效。我设法通过创建一个临时文件来使其工作，该文件的名称仅包含临时文件夹中的文件扩展名。但它比上述解决方案慢。

```
@echo off
setlocal
set "folder=%temp%\ren%random%"
md "%folder%"
for /r "c:\test" %%F in (*) do if "%%~xF" neq "" (
  copy nul "%folder%\%%~xF" >nul
  for /f "delims=" %%X in ('dir /b /l "%folder%"') do ren "%%F" "%%~nF%%X"
  del /q "%folder%"
)
rd "%folder%" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T16:02:47.400

这很匆忙，但可以使用

```
for /r C:\Folder %%a in (*) do (
    for /f %%s in ('dir /b /l %%a') do (
        ren %%a %%~na%%~xs
    )
) 
```

带有开关的`dir`命令`/l`将其转换为小写字母，但从我所做的测试来看，它有时有效，但有时无效。

希望这可以由另一个成员改进，但它应该在理论上起作用。

# c# - Autoscrolling in RichTextBox C# WinForms

> ID：12749274
> 
> 赞同：8
> 
> 时间：2012-10-05T15:20:04.263
> 
> 标签：c#, winforms, scroll, richtextbox

How can I do that if I append some text the RTB will automatically scroll down?

Now I'm using:

```
conversationRtb.Rtf = tab.conversationRtb.Rtf;
conversationRtb.SelectionStart = conversationRtb.Text.Length;
conversationRtb.ScrollToCaret(); 
```

But it isn't working well. Sometimes it doesn't scroll to end but one line before end.

![rtb scroll down bug](../Images/3b1ced207412a1d611b417215199973e.png)

Sometimes it makes a big offset.

![rtb scroll down bug](../Images/f2f4cf9606d5d56c19ba7cb414cc04bb.png)

I cannot find why. Is there any another way how to scroll down? I've found `AutoScrollOffset` but no examples how it works.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T15:28:24.620

您可以调整`HideSelection value to false`，AppendText 将触发正确的滚动。

# javascript - 使用 javascript 准确定位图像

> ID：12749276
> 
> 赞同：0
> 
> 时间：2012-10-05T15:20:09.863
> 
> 标签：javascript

我需要创建几十个小图像，并将它们相对于屏幕的顶部和左侧绝对定位在屏幕上。我有一个页面，上面有一个 div，目前，我正在尝试使用 javascript 创建每个元素。如何精确定位每个元素？

```
var divo = document.getElementById('pagediv');
var objImage = document.createElement('img');
objImage.setAttribute('src', 'images/Red_L.gif');
divo.appendChild(objImage); 
```

那就是创建图像并把它放在屏幕上。但是你怎么能准确地告诉它定位在哪里呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:26:33.180

我想你应该看看[CSS 绝对定位](http://www.w3.org/TR/CSS2/visuren.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:41:52.237

“在特定的 x/y 坐标处”

为它设置 CSS。

```
var divo = document.getElementById('pagediv');
var objImage = document.createElement('img');
objImage.setAttribute('src', 'images/Red_L.gif');
objImage.style.top="100px";
objImage.style.left="100px";
objImage.style.zIndex=2;
objImage.style.position="absolute";
divo.appendChild(objImage); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:04:35.877

如果您正在动态创建图像，我相信您可以通过循环运行它并定位图像。

```
 var divo = document.getElementById('pagediv');
    var leftPos = 0;
    var newSrc = '';
    for(i = 0 ; i < 12 ; i++)
    {
        newSrc = "images/red_"+i+".png";
        var objImage = document.createElement('img');
        objImage.src = newSrc;
        objImage.style.left=leftPos+20+"px";
        objImage.style.zIndex=2;
        objImage.style.position="absolute";
        leftPos = objImage.style.width;
        divo.appendChild(objImage);
    } 
```

如果您的图像被命名`red_1.png,red_2.png`等等，此代码会将图像一个挨一个地放置，彼此之间的间距为 20px。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T16:21:40.720

使用`offsetTop`并且`offsetLeft`可能会解决您的问题[http://www.quirksmode.org/js/findpos.html](http://www.quirksmode.org/js/findpos.html) - 但在某些浏览器中可能存在错误。我建议使用`getBoundingClientRect` [http://ejohn.org/blog/getboundingclientrect-is-awesome/](http://ejohn.org/blog/getboundingclientrect-is-awesome/)来获取和偏移每个图像的 x/y 坐标。

# java - java文件的大小有限制吗？

> ID：12749279
> 
> 赞同：1
> 
> 时间：2012-10-05T15:20:13.110
> 
> 标签：java, file-io, filesize

我正在开发一个需要生成 java 代码的项目。当我在 main 方法上遇到 65535 字节限制的问题时，我正在做一些测试。我生成的文件看起来像这样：

```
public class foo{
    public static void main(String[] args){
        //
        //7000 lines later
        //
    }
} 
```

我认为通过这种方式生成文件我很聪明：

```
public class foo{
    public static void bar(){
        //
        //7000 lines later
        //
    }
    public static void main(String[] args){
        bar();
    }
} 
```

但我发现 65535 字节限制适用于每种方法。

我想知道将指令“缓冲”到多种方法中是否可以解决我的问题。java文件的大小有什么限制吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T15:23:31.223

文件可以是任意大小，但方法不能编译为超过 65535 字节的长度。

解决这个问题的唯一方法是

*   使用较小的方法，这么大的方法是不可读的。
*   如果它生成代码，则创建多个方法。
*   将信息外部化为数据文件或数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T15:26:46.337

*   是的，请参阅[SO 答案](https://stackoverflow.com/a/6570454/488861)
*   [太阳官方网站](http://bugs.sun.com/view_bug.do?bug_id=4262078)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T15:24:40.577

[这是一个已知的错误/功能请求（官方 Java 错误跟踪器）](http://bugs.sun.com/view_bug.do?bug_id=4262078)。

不过，您应该将其拆分为不同的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T15:28:49.813

我想这个限制是存在的，你已经达到了——如此[处](https://stackoverflow.com/questions/2407912/code-too-large-compilation-error-in-java)所述。

另外，看看这个[讨论](https://softwareengineering.stackexchange.com/questions/66523/how-many-lines-per-class-is-too-many-in-java)。

# xna - smoother movement?

> ID：12749284
> 
> 赞同：0
> 
> 时间：2012-10-05T15:20:29.700
> 
> 标签：xna, timing

I've created a cross silverlight/xna application and I observe that movement is not that smooth.

I'm trying to move a cloud across my screen.

The update interval is once each 33 ms. I've ran the application testing `ElapsedTime.Miliseconds != 33` and that one never hits, so it runs every 33 ms.

What I do each 33 ms is that i take x pos and subtract 5.4 (float) to get the speed I want.

But I observe that the movement aint that smooth, feels laggish.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T16:03:09.157

这不是处理这个问题的最好方法。按照您现在的方式，您的云移动将根据计算机规格以不同的速度运行。你应该做的是根据经过的时间移动你的云。这将使您的动画始终表现相同，无论您每秒可以抽出多少帧：

```
xPos -= elapsedTime.Miliseconds * moveSpeed; 
```

将 moveSpeed 变量设置为适合您的值。

# php - How to add Helpers to a PhpRenderer in Zend Framework 2.0?

> ID：12749288
> 
> 赞同：0
> 
> 时间：2012-10-05T15:20:36.090
> 
> 标签：php, zend-framework2, zend-view

I am migrating my old application to the new Zend Framework 2.0\. My app uses it just as a library (no Zend\Application use or anything of the MVC part), and I have problems using the Form Helpers. So, I ended having 2 questions:

1.  How can I add a Helper path to the PhpRenderer?
2.  Searching though the code, I found a class called ViewHelperManagerFactory, which has the default helper paths. How can I use it to change the HelperManager by a new one created by this factory with all the paths setted? (note I dont have a ServiceManager).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T03:01:08.250

您可以通过从 HelperPluginManager 调用 setFactory() 来添加助手。

```
$renderer = new \Zend\View\Renderer\PhpRenderer();
$renderer->getHelperPluginManager()->setFactory('specialPurpose', function () {
    return new SpecialPurpose();
  });

echo $renderer->specialPurpose();
echo $renderer->specialPurpose();
echo $renderer->specialPurpose();

class SpecialPurpose extends \Zend\View\Helper\AbstractHelper {

  protected $count = 0;

  public function __invoke() {
    $this->count++;
    $output = sprintf("Called %d time(s).", $this->count);
    return htmlspecialchars($output, ENT_QUOTES, 'UTF-8');
  }

} 
```

# html - Simple HTML layout engine?

> ID：12749289
> 
> 赞同：1
> 
> 时间：2012-10-05T15:20:37.417
> 
> 标签：html, c

I need a HTML layout engine that supports the following:

*   rfc2070 HTML 2
*   MathML
*   Image formats pulgable using a custom plugin format
*   Drawing and hyper-link clicking independent of windowing system
*   C interface

The purpose is to display program documentation in a nice browsable format. Therefore I do not need any CSS formating support or JavaScript. Does anyone know a good starting point. Gecko seems to be much. Should I try to build a custom one?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:28:41.443

> 我应该尝试构建一个自定义的吗？

不，您绝对不应该尝试构建自定义的！那里有足够多的 HTML 渲染引擎，您不需要重新发明轮子（即使我认为这可能很有趣）。

你有目标操作系统吗？如果您使用的是 Windows，您可以使用 Microsoft 的[Web 浏览器控件](http://msdn.microsoft.com/en-us/library/aa752040%28v=vs.85%29.aspx)来显示您的页面。

如果你在 Linux 下，你有更多的选择。AFAIK Konqueror 可以用于此（不要忘记您可以使用大量的 HTML UI 小部件库之一）。看看[这个列表](http://lzone.de/Linux+HTML+Rendering+Widgets)作为起点。

> 目的是以一种很好的可浏览格式显示程序文档。

附带问题：您不能简单地在用户的默认浏览器中显示您的文档吗？许多程序甚至在浏览器中提供在线文档是很常见的。

# xmpp - ejabberd 管理员登录错误

> ID：12749291
> 
> 赞同：0
> 
> 时间：2012-10-05T15:20:51.313
> 
> 标签：xmpp, ejabberd

在 Windows 7 上成功安装 ejabberd 后，我无法登录到管理界面。我输入了正确的密码，但它仍然给我验证错误。我在网上看到很多帖子报告了同样的问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T15:09:13.440

您可以使用 ejabberdctl 和 ejabberd.cfg 添加管理员用户
注意：登录时，您必须编写您的 jid（如 adminUser@localhost）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T05:58:38.280

您是否添加了您管理的虚拟域的名称：例如。admin@example.com？

您是否使用命令 ejabberdctl 创建了管理员用户？

# ios - Xcode + bitbucket - Uncommitted Changes

> ID：12749300
> 
> 赞同：0
> 
> 时间：2012-10-05T15:21:26.080
> 
> 标签：ios, xcode, push, commit, bitbucket

I have had a project I've been working on for a while and just added my bitbucket remote repository so I can start having a remote source control.

When I go to File -> Source Control -> Push... it always says I have uncommitted changes.

I have selected my project and done File -> Source Control -> Commit

I dont understand why it wont let me push?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:54:17.963

这可能是因为您的项目的用户数据包含您的编辑上下文。这些文件在使用 Xcode 时会发生变化。

停止跟踪项目包中文件夹下面的所有内容

*   yourproject.xcodeproj/project.xcworkspace/xcuserdata
*   yourproject.xcodeproj/xcuserdata

有关信息，yourproject.xcodeproj 是一个包，如果您右键单击它并单击“显示包内容”，您将看到提到的目录。

然后在这些文件夹下面添加所有文件以忽略（如果您使用 git，则为 .gitignore）您的 .gitignore 文件将包含这两行：yourproject.xcodeproj/project.xcworkspace/xcuserdata yourproject.xcodeproj/ **xcuserdata**

希望能帮助到你

# java - trapezoid transform graphics for java

> ID：12749301
> 
> 赞同：1
> 
> 时间：2012-10-05T15:21:26.597
> 
> 标签：java, swing, graphics, graphics2d

> **Possible Duplicate:**
> [square to trapezoid](https://stackoverflow.com/questions/6157886/square-to-trapezoid)

Here is what i want to do. I'm currently drawing with Awt librairy and use the paintComponent method to draw (a grid for example). I draw colors, lines, images, etc. What i want to do is to take the **Graphics g parameter of paintComponent and apply a trapezoid-like transformation** after all my draw methods. My result will simulate a grid in space in 3D:

```
 --------
    - - - -  -
   -  - -  -  -
  -  -  -   -  -
 ---------------- 
```

like this.

Note: I don't want to draw a trapeze, or draw a rectangle into a trapeze. This won't work for me. And i'm open to change librairy (swing or whatever). I'v been searching for quite a while and i haven't found any example about this, clear enough at least for me to understand. Any tips, links? Thanks.

edit: I'm drawing in a JPanel

# php - Mysql选择多个值错误

> ID：12749306
> 
> 赞同：-1
> 
> 时间：2012-10-05T15:21:39.257
> 
> 标签：php, mysql

我正在尝试编写一个 sql 查询以从“状态”列中选择多个状态......我怎么会得到 #1054 - 'where 子句'中的未知列 'Alaska' 当它是一个值而不是一个列时？

```
 SELECT * FROM Sheet1 WHERE State IN  (`Alaska`,  `Arizona`) 
```

谢谢

史蒂夫

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T15:22:58.677

您使用了错误的引号；对于数据，您需要单引号 - 反引号用于列名和表名：

```
SELECT * FROM `Sheet1` WHERE `State` IN  ('Alaska',  'Arizona') 
```

# mysql - Equivalent of SQL's numeric(15,2) on MySQL?

> ID：12749314
> 
> 赞同：0
> 
> 时间：2012-10-05T15:21:57.697
> 
> 标签：mysql, sql, numeric

What would be a accurate equivalent of SQL's numeric(15,2) on MySQL? I've tried decimal(15,2) and it's not working as it should.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:26:25.277

在Mysql中，如果你说`decimal(5,2)`那么你得到的字段可以包含最大值`999.99`（所以小数点后的总数为5和2。）

# html - Html Canvas RequestAnimationFrame：可用于可拖动内容？

> ID：12749315
> 
> 赞同：1
> 
> 时间：2012-10-05T15:22:00.500
> 
> 标签：html, animation, html5-canvas

我正在使用 Html5 2d Canvas 创建各种地图。

主要功能是缩放和拖动。我的问题是拖动地图非常生涩。我不知道是否或如何使用 requestAnimation 框架，因为据我了解它不是动画？

到目前为止，我已经对其进行了优化：1) 缩小时，不会不必要地绘制精细细节 - 2) 放大时，不会绘制视口外的可绘制项目。

（我使用 JQuery 除了画布绘图）。目前，当用户触发onmousedown 时，每个mousemove 事件都会重新绘制画布，因此拖动地图，即改变用户在视口中看到的内容。

所以，简化：

```
$(canvas).mousemove(function(e) {
    if (mousedown){
        dragger.update({x: e.pageX, y: e.pageY});
        drawer.drawMap();
    }
});

function MapDrawer(...){
    this.drawMap = function(){
        this.ctx.clearRect(0,0, this.canvasWidth, this.canvasHeight);
        this.ctx.save(); 
        this.ctx.transform(...); // map position and zoom
        this.selectivelyDrawMapFeatures();
        this.ctx.restore(); 
    }
} 
```

我可以用 requestAnimationFrame 改进它吗？我希望我已经为某人提供了足够的信息，以用一些伪代码来演示如何实现或改进它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:18:20.033

是的，您可以使用 requestAnimationFrame。requestAnimationFrame 真正做的就是执行一个函数，然后重绘屏幕。基本上步骤是

*mousedown: 开始跟踪鼠标的位置，然后像这样通过 requestAnimationFrame 开始重绘你的画布`window.requestAnimationFrame(myRedrawFunction)`

*onmousemove: 跟踪拖动对象的位置

*onmouseup：停止跟踪/重绘

确保重绘功能从您正在跟踪的任何位置获取对象位置（换句话说，不要依赖 DOM，尽管作为一个画布项目我假设您不是无论如何）

# mysql - group_concat creates a issue for fetching more then one record

> ID：12749317
> 
> 赞同：0
> 
> 时间：2012-10-05T15:22:06.587
> 
> 标签：mysql, group-concat

I am facing an issue related to group_concat because when I am using this the total record can't fetch from the table based in the transactionID Here is my stored procedure code. In this I am using a split function called strSplit.

```
BEGIN

DECLARE iCount int;

DECLARE i int;

DECLARE txn VARCHAR(65000);

DECLARE txId VARCHAR(17);

CREATE TEMPORARY TABLE report_transaction (client_id INT NOT NULL AUTO_INCREMENT, productName VARCHAR(200), itxnId VARCHAR(100),PRIMARY KEY(client_id));

select count(distinct(tt.TxnId)) into iCount from tbl_transaction tt;

SELECT group_concat(distinct((tt.TxnId)) separator ', ') product into txn  from tbl_transaction tt;

SET i=1;

WHILE i<iCount+1 DO

select strSplit(txn, ',', i) into txId;

SELECT RTRIM(LTRIM(txId));

 INSERT INTO report_transaction(productName,itxnId) select group_concat((tt.ProductName) separator ',') products,tt.TxnId from tbl_transaction tt where tt.TxnId= txId;

    SET i = i + 1;

END WHILE;

     SELECT * FROM report_transaction;
     drop table report_transaction;

END 
```

I want result like a table record but it shows only first record and then other fields are null.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:40:44.677

我认为你想要的可以通过一个查询来完成：

```
INSERT INTO report_transaction(productName,itxnId)
    select group_concat((tt.ProductName) separator ',') as products, tt.TxnId
    from tbl_transaction tt
    group by tt.TxnId; 
```

您不需要临时表来存储 ID，或者修剪或拆分任何内容。

通常，在适当的时候使用 SQL 查询可以获得更好的性能。

顺便说一句，如果您确实需要遍历表中的行，那么您应该了解游标。

# android - 样式 Android SearchView 下拉弹出窗口

> ID：12749319
> 
> 赞同：11
> 
> 时间：2012-10-05T15:22:08.883
> 
> 标签：android, actionbarsherlock, android-ui, android-theme

我想知道如何设置 Android 4.0 的下拉弹出窗口的样式`SearchView`？

![](../Images/2b89119ef3e16d9e45da144f62980c6c.png)

我正在使用`Theme.Sherlock.Light.DarkActionBar`，但我不知道如何将下拉搜索设置为白色背景和黑色文本？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-24T13:49:37.197

出于某种原因，使用“searchAutoCompleteTextView”的主题也不适合我。所以我在设置我的 SearchView 时使用以下代码解决了它：

注意：这都是通过 android v7 支持/AppCompat 库完成的

```
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.search_menu, menu);

    MenuItem searchItem = menu.findItem(R.id.action_search);
    SearchView searchView = (SearchView) MenuItemCompat.getActionView(searchItem);

    // Theme the SearchView's AutoCompleteTextView drop down. For some reason this wasn't working in styles.xml
    SearchAutoComplete autoCompleteTextView = (SearchAutoComplete) searchView.findViewById(R.id.search_src_text);

    if (autoCompleteTextView != null) { 
        autoCompleteTextView.setDropDownBackgroundResource(R.drawable.abc_search_dropdown_light);
    }
} 
```

兼容性库提供了两个搜索下拉资源，它们是

*   R.drawable.abc_search_dropdown_light（浅色背景）
*   R.drawable.abc_search_dropdown_dark（深色背景）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T18:37:35.530

这样做有多个步骤

首先，您需要创建一个具有四种状态的自定义**drawable**，您可以参考{ABSLibrary}/res/drawable/abs__list_selector_holo_dark.xml。它会是这样的：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:state_window_focused="false" android:drawable="@android:color/transparent" />

<!-- Even though these two point to the same resource, have two states so the drawable will invalidate itself when coming out of pressed state. -->
<item android:state_focused="true"  android:state_enabled="false" android:state_pressed="true" android:drawable="@drawable/abs__list_selector_disabled_holo_dark" />
<item android:state_focused="true"  android:state_enabled="false"                              android:drawable="@drawable/abs__list_selector_disabled_holo_dark" />
<item android:state_focused="true"                                android:state_pressed="true" android:drawable="@drawable/abs__list_selector_background_transition_holo_dark" />
<item android:state_focused="false"                               android:state_pressed="true" android:drawable="@drawable/abs__list_selector_background_transition_holo_dark" />
<item android:state_focused="true"                                                             android:drawable="@drawable/abs__list_focused_holo" /> 
```

将上面的自定义 drawable（.xml 格式）保存到您自己的项目 res/drawable 中。通过参考上面的示例相应地编辑样式。请注意，样式可能嵌套得很深，请耐心向下看。

然后创建（或放入现有的自定义主题）具有以下内容的自定义主题，它应保存为 res/values/styles.xml：

```
<style name="Theme.MyCustomTheme" parent="Theme.Sherlock.Light.DarkActionBar">
<item name="searchAutoCompleteTextView">@style/MySearchAutoCompleteTextView</item></style>

<style name="MySearchAutoCompleteTextView" parent="Sherlock.__Widget.SearchAutoCompleteTextView">
<item name="android:dropDownSelector">@drawable/myCustomDrawable_DropDown</item>
<item name="android:popupBackground">@drawable/myCustomDrawable_popupBackground</item></style> 
```

请注意“myCustomDrawable_DropDown”和“myCustomDrawable_popupBackground”必须是您刚刚创建的自定义drawable的名称。

您只需要知道“android:dropDownSelector”和/或“android:popupBackground”负责自动完成弹出框的主题化。

**最后**，在您的清单中应用主题！

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/Theme.MyCustomTheme" > ... 
```

# scala - 考虑到结果不能作为来自同一消息的响应，如何通过询问 Akka Actor 来获得 Promise（或 Future）

> ID：12749324
> 
> 赞同：4
> 
> 时间：2012-10-05T15:22:21.437
> 
> 标签：scala, concurrency, akka, actor, promise

我遵循了本教程：[http ://doc.akka.io/docs/akka/2.0/intro/getting-started-first-scala.html](http://doc.akka.io/docs/akka/2.0/intro/getting-started-first-scala.html)

基本上有一个主actor响应这两个消息：

```
def receive = {
    case Calculate => {
      //....
    }
    case Result(value) => {
      //....
    }
} 
```

我们发送消息“计算”，经过几次“结果”（来自奴隶演员）我们有正确的计算

现在我在 play2 控制器的一个动作中，我正在使用这个：

```
val promise = (master ? Calculate)(10.seconds).mapTo[String].asPromise 
```

不幸的是（显然）我什么也没得到，因为Calculate消息确实回复了发件人的消息。

我想以某种方式让 Akka Actor 等待......并且当计算完成时将消息发送回发送者。

但是如何？...除非我以错误的方式建模！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T15:46:03.490

您应该`forward`将消息发送给从属设备（保持相同的发件人），或者将发件人包含在发给从属设备的消息中。例如：

```
def receive = {
  case Calculate => slave ! CalculateWithSender(sender)

  case res @ Result(value, originalSender) =>        
    val result = resultMap(originalSender) + res   // assuming results are just added
    resultMap += (originalSender -> result) 
    if (resultsAreFinished(originalSender))    
      originalSender ! result
} 
```

或者

```
def receive = {
  case Calculate => slave.forward(Calculate)

  case res @ Result(value, originalSender) => 
    val result = resultMap(originalSender) + res   // assuming results are just added 
    resultMap += (originalSender -> result) 
    if (resultsAreFinished(originalSender))    
      originalSender ! result
} 
```

或者

```
def receive = {
  case Calculate => slave.tell(Calculate, sender)

  case res @ Result(value, originalSender) => 
    val result = resultMap(originalSender) + res   // assuming results are just added 
    resultMap += (originalSender -> result) 
    if (resultsAreFinished(originalSender))    
      originalSender ! result
} 
```

我不熟悉 Play 承诺，但`?`( `ask`) 返回 Akka `Future`。如果`.asPromise`将 Akka 转换`Future`为 Play `Promise`，那么您就设置好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T15:50:31.040

为每个计算启动一个新参与者。将Calculate消息转发给新的actor。新参与者存储原始发件人。当结果准备好时，结果被发送给原始发送者，并且临时 actor 死亡：

```
class CalculateActor extends Actor {
    var origSender : ActorRef = _
    def receive {
        case Calculate => {
            origSender = sender
            slaveActors ! doStuff
            //....
    }
    case Result(value) => {
        if(results are ready) {
            origSender ! results
            self ! PoisonPill  // I'm done, time to die
        }
    }
}

class MasterActor extends Actor {
    def receive {
        case msg @ Calculate => {
            // forward sends without changing the sender
            context.actorOf(Props(new CalculateActor)).forward(msg)
        }
    }
} 
```

# objective-c - 不使用 coredata 的核心数据功能

> ID：12749327
> 
> 赞同：1
> 
> 时间：2012-10-05T15:22:33.990
> 
> 标签：objective-c, ios, sqlite, core-data

我正在维护一个 iOS 应用程序，该应用程序当前使用 Core Data 从数据库中获取数据并填充表视图。提出了一个新要求，即必须使用 SQLCypher 对整个数据库进行加密，并且根据我的研究，Core Data 拒绝使用密码。因此决定删除 coredata 支持，现在必须手动进行数据库调用。在这种情况下，是否有任何库/项目可以模拟 CoreData 中 NSFetchedResults 的功能来管理数据库交互并与 TableViews 配合得很好？

我正在寻找有关以最少的代码散布 sql 语句来进行数据库交互的方式来构建项目的建议。任何人都可以就如何实现这一点提出建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:51:43.797

也许这个解决方案可以帮助您保留核心数据并为内容提供加密。

假设我们有一个名为 MyObject 的 Core Data 对象，它具有一个属性 MyData。然后在 CoreData 模型中为该属性设置属性**瞬态。****现在定义属性类型为Binary Data**的第二个属性 MySecretData 。这是存储实际数据的地方。

现在在 NSManagedObject 子类上创建一个类别，如下所示：

```
@interface MyObject (Access)

- (NSData*)myData;
- (void)setMyData:(NSData*)value;

@end

@implementation MyObject (Access)

- (NSData*)MyData {
    NSMutableData * tmpValue;

    [self willAccessValueForKey:@"MyData"];
    tmpValue = [self primitiveValueForKey:@"MyData"];
    [self didAccessValueForKey:@"MyData"];

    if(!tmpValue) {
        NSData *encryptedData = [self valueForKey:@"MySecretData"];
        if(encryptedData) {            
            tmpValue = [NSMutableData dataWithData:encryptedData];
            BOOL success = [tmpValue decryptWithKey:nil];
            if (!success) {
                // Error Handling here
            }
            tmpValue = [tmpValue zlibInflate];
            [self setPrimitiveValue:tmpValue forKey:@"MyData"];
        }
        else {
            tmpValue = nil;
            [self setMyData:tmpValue];
        }
    }
    return tmpValue;
}

- (void)setMyData:(NSData *)data {
    NSData* tmpValue;
        [self willAccessValueForKey:@"MyData"];
        tmpValue = [self primitiveValueForKey:@"MyData"];
        [self didAccessValueForKey:@"MyData"];

        if([tmpValue isEqual:data])
        return;

        [self willChangeValueForKey:@"MyData"];
        [self setPrimitiveValue:data forKey:@"MyData"];
        [self didChangeValueForKey:@"MyData"];
        NSMutableData* encryptedData = nil;
        if (data != nil) {
            encryptedData = [NSMutableData dataWithData:data];
            encryptedData = [encryptedData zlibDeflate];
            BOOL success = [encryptedData encryptWithKey:nil];
            if (!success) {
                // Error Handling here
            }

        }
        [self setPrimitiveValue:encryptedData forKey:@"MySecretData"];
}

@end 
```

在这种情况下，数据被加密并被压缩。从您的代码中，您可以照常访问 MyData。在核心数据库中，所有值都将被加密。当然，您必须使用适当的加密功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:08:09.450

我认为没有一个好的、简单的答案。一些可能性：

*   iOS 可以自动加密其文件系统。这对 Core Data 来说是透明的，你只需要在访问任何文件之前确保它是“解锁的”。显然这不会使用 SQLCypher （不管是什么）
*   我不确定 SQLCypher 是如何工作的，但您也许可以编写自己的 NSPersistentStore 与加密数据库对话。同样，这对 Core Data 来说是透明的，尽管这可能是不可能的。这完全取决于 SQLCypher 的工作方式
*   编写您自己的类似 Core Data 的层。据我所知，没有什么能比得上它......我的意思是，当Apple总是可用时，你为什么要自己编写（如果你至少有iOS3以上的东西）

这是很多工作，无论你怎么看。

# jquery - 使用 jquery 缓存 JSON 对象并检索它

> ID：12749329
> 
> 赞同：10
> 
> 时间：2012-10-05T15:22:39.410
> 
> 标签：jquery, caching

我想在页面中缓存以下 JSON 对象，以便可以在另一个页面上检索它。

```
var test = {
        "lists":["list1","list2","list3","list4","list5"],
        "maps": {  
            "key4":"value4","key3":"value3","key5":"value5","key2":"value2","key1":"value1"
        },
        "number1":123456789,
        "numberarray1":[1,2,3,4,5,6,7,8,9],
        "string1":"A",
        "stringarray1":["A1","B1"]
    } 
```

如何缓存它并再次检索它？

这可能吗？如果没有，还有其他方法可以保存我的 JSON 对象，然后在另一个页面上检索它。

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T15:30:55.430

保存那美味的饼干

```
$.cookie("test-data", JSON.stringify(test)); 
```

把那个甜饼干拿回来

```
var test =  JSON.parse($.cookie("test-data")); 
```

[http://www.electrictoolbox.com/jquery-cookies/](http://www.electrictoolbox.com/jquery-cookies/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T15:39:21.227

除了提供的答案之外，在更复杂的场景中，我建议使用[jStorage](http://www.jstorage.info/)插件。

来自网站的描述：

> jStorage 是一个跨浏览器键值存储数据库，用于在浏览器本地存储数据 - **jStorage 支持所有主流浏览器，包括桌面（是的，甚至 Internet Explorer 6）和移动设备**。此外，jStorage 与库无关，它可以很好地与同一网页上的任何其他 JavaScript 库配合使用，无论是 jQuery、Prototype、MooTools 还是其他东西。尽管您仍然需要在页面上拥有第三方库（Prototype、MooTools）或 JSON2 以支持旧 IE 版本。
> 
> jStorage 支持存储字符串、数字、JavaScript 对象、数组甚至原生 XML 节点。jStorage 还支持为自动过期的存储键设置 TTL 值，并且 - 最重要的是 - 当键已更改或发布/订阅来自相同或另一个选项卡/窗口的事件时通知其他选项卡/窗口，这使得 jStorage 也是本地 PubSub Web 应用程序的平台。

如果 jStorage 加载到页面 localStorage 和 sessionStorage polyfills 添加到 IE6 和 IE7 除了常规的 $.jStorage 方法。您可以将常规 setItem/getItem 方法与 polyfill 一起使用，但也可以使用 getter/setter - localStorage.mykey = myval; 对 jStorage 绝对有效。**唯一的缺点是您不能使用 onstorage 事件，您需要退回到 listenKeyChange**。

> jStorage 非常小，压缩后约为 10kB，压缩后约为 4kB。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T15:25:51.707

您是在谈论 HTML 中的缓存吗？您始终可以使用[LocalStorage](http://www.html5rocks.com/en/features/storage)，这将使其可用于同一域中的任何页面。

如果你将它与[Modernizr](http://modernizr.com)和 cookie 结合起来，你最终会得到某种解决方案。

# performance - 移位操作码真的比移动快 3 倍吗？英特尔 x86

> ID：12749331
> 
> 赞同：2
> 
> 时间：2012-10-05T15:22:48.667
> 
> 标签：performance, assembly, x86

在我的 Intel x86 Pentium 手册中，它说像 SAL/SHR 这样的 ADD 和移位需要 1/3 个时钟，而 JMP 和 MOV 需要 1 个时钟。一堆加法和移位会比一堆移动快 3 倍，这真的是真的吗？

我想我很困惑，因为网络上有显示“Pentium M”的“延迟”表，但没有一个时间是 1/3，尽管有一些是 1/2。这是因为我的书很旧而且在较新的 Pentium 上换档的速度与 JMP 相同吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T15:31:24.273

不要将“延迟”与“互惠吞吐量”混淆。

*   **延迟**是执行一个指令实例需要多少个周期。
*   **倒数吞吐量**是处理器可以维持每个周期的指令数。

你`1/3`看到的不是延迟。这是互惠的吞吐量。处理器每个周期可以维持 3 个 ADD。（如果它们都是独立的）但是每个仍然需要至少1个周期才能执行。

如果您的延迟`1`和倒数吞吐量为`1/3`，则意味着处理器可以同时执行多达 3 个 ADD。但是每个仍然需要1个周期。

* * *

从历史上看，大多数 Intel 处理器（从 Pentium 开始？）都有 3 个主要执行单元，它们都可以执行基本操作，例如加法和移位。这就是为什么其中大多数是`1/3`互惠的吞吐量。

寄存器到寄存器的 MOV 也应该是`1/3`. 但是接触内存（即加载和存储）的 MOV 在历史上只有 1 个/周期。（最近在 Sandy Bridge 和后来，这已经增加了。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T20:17:55.233

假设这是关于最初的 Pentium（即，不是 Pentium Pro 或更新版本），`1/3`并不意味着“三分之一”（或类似的东西）。这意味着该指令具有 1 个周期的吞吐量和 3 个周期的延迟（即每个周期可以开始一条指令，每个周期可以完成一条指令，但是该指令需要三个流水线阶段，因此在开始和结束之间存在三个周期的延迟）特定指令）。

最初的 Pentium 只有两个执行单元，没有乱序执行。在给定的时钟周期内，下一条指令将在 U 流水线中执行。如果满足正确的条件，之后的指令可以在 V 流水线中执行。在任何情况下，在任何给定周期内执行的指令都不会超过两条，并且在任何情况下，单个流水线中每个时钟执行的指令都不会超过一条。

后来的处理器（从 Pentium Pro 开始）添加了乱序指令调度，以及在一个周期内执行两个以上指令的能力（可能有更多的“正在运行”，但仅限于每个周期退出三个指令）。Pentium IV 增加了在单个时钟周期内在同一个执行单元中执行 2 个极其简单的指令（寄存器到寄存器 AND、OR、NOT、ADD、SUB、单位移位）的能力（即，它有一个执行单元实际上以两倍于额定时钟速度运行，例如，在 2.8 GHz 处理器上，少量电路实际上以 5.6 GHz 运行）。

# javascript - 在开发过程中处理多个 js 文件

> ID：12749337
> 
> 赞同：0
> 
> 时间：2012-10-05T15:23:05.170
> 
> 标签：javascript, html, backbone.js

我正在编写一个backbone.js 应用程序。我有多个 js、css 和 html 模板文件。我还有一个脚本可以将它们压缩成一个文件，这样下载起来会更快。在开发过程中我应该如何工作：

1.  向文件系统添加一个侦听器，并在每次更改后编译文件，以便我可以在浏览器中看到它。这意味着在我看到我所做的事情之前需要 1-2 秒的开销，这对于 html 微调来说很烦人。

2.  在开发过程中以某种方式使用多个文件进行浏览，并且只在投入生产之前进行处理。这意味着我需要为 dev 和 prod 提供单独的 index.html。

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:29:32.263

使用开发来处理组合和缩小的文件将是一场噩梦。两个并行的索引文件也会很痛苦。

您正在寻找[构建自动化](http://en.wikipedia.org/wiki/Build_automation)。编写一个构建脚本，为您的项目准备部署。在您的情况下，这将是处理所有文件，然后修改您的索引文件以仅引用组合文件。其他任务可以包括更新连接字符串、通过 FTP 上传等。

一个简单的 bash 脚本就可以了，但您也可以使用[Ant](http://ant.apache.org/)、[Phing](http://www.phing.info/)或任何其他构建脚本。关键是可重复性。您应该能够使用一个简单的命令来执行此操作。

编辑：如果您要使用 Ant，请查看`Exec`/ `ReplaceRegexp`tasks。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T16:18:17.700

问题是您正在使用文件观察程序进行更新。“Last Modified”字段使文件系统观察程序变得不必要。

当用户发出请求时，请执行以下操作：

*   缩小所有内容后，保存结果的缓存版本。
*   每次加载时，检查任何文件的“上次修改”字段是否比缓存更新。如果是，则重新缩小所有内容，将其缓存，并返回新缓存的版本。否则，只返回缓存的版本。简单，仅在您需要时运行。

发展很快。生产速度更快。两者都使用相同的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T15:30:27.240

我使用[Minify](http://code.google.com/p/minify/)来合并和缩小我的 JS，在我的主干应用程序的 index.html 中，我只有一个这样的代码块：

```
 if (APP._dev === true) {
        // So on development, we load all the files individually
        $.when(
                // Utilities
                $.getScript(APP._rootDir + 'app/js/util.js'),

                // Models
                $.getScript(APP._rootDir + 'app/js/models/Timer.js'),
                $.getScript(APP._rootDir + 'app/js/models/Section.js'),

                // Collections
                $.getScript(APP._rootDir + 'app/js/collections/Timers.js'),
                $.getScript(APP._rootDir + 'app/js/collections/Sections.js'),

                // Views
                $.getScript(APP._rootDir + 'app/js/views/TitleView.js'),
                $.getScript(APP._rootDir + 'app/js/views/BackgroundAudioView.js'),

                // Router
                $.getScript(APP._rootDir + 'app/js/routers/APPRouter.js'),

                // Load in our templates file and add each template to a
                // proerty visible in our application scope
                $.get(APP._rootDir + 'app/js/templates/all.html',function(result){
                    var tmp = $('<div></div>').html(result);
                    $('script.template', tmp).each(function(){
                        APP._templates[this.id] = $(this).html();
                    });
                },'html'),

                // Here we create a new deferred object which we will bind
                // to JQuery's ready() event.
                $.Deferred(function (deferred) {

                    // DOM Ready. Invokes our APP.init() function.
                    $(deferred.resolve); // init
                })
        ).done(
                APP.init
        ).fail(
                function () { /* fail how you would like */ }
        );
    } else {
        $.when(
                // And on prod, we load a combined & minified JS file instead
                $.getScript(APP._rootDir + 'min/?g=js'),

                // Load in our templates file and add each template to a
                // proerty visible in our application scope
                $.get(APP._rootDir + 'app/js/templates/all.html',function(result){
                    var tmp = $('<div></div>').html(result);
                    $('script.template', tmp).each(function(){
                        APP._templates[this.id] = $(this).html();
                    });
                },'html'),

                // Here we create a new deferred object which we will bind
                // to JQuery's ready() event.
                $.Deferred(function (deferred) {

                    // DOM Ready. Invokes our APP.init() function.
                    $(deferred.resolve); // init
                })
        ).done(
                APP.init
        ).fail(
                function () { /* fail how you would like */ }
        );
    } 
```

然后，在我的 Minify`/min/`目录中的 groupsConfig 中，我定义我的构建数组以匹配 jQuery 的延迟对象加载顺序：

```
return array(
    'js' => array(
        '//' . $rootDir . '/util.js',

        '//' . $rootDir . '/models/Timer.js',
        '//' . $rootDir . '/models/Section.js',

        '//' . $rootDir . '/collections/Timers.js',
        '//' . $rootDir . '/collections/Sections.js',

        '//' . $rootDir . '/views/TitleView.js',
        '//' . $rootDir . '/views/BackgroundAudioView.js',

        '//' . $rootDir . '/routers/APPRouter.js'
    ),
    'css' => array(),
); 
```

它可能不像它可能的那样 DRY，但它可以工作，您可以根据需要对其进行调整。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T15:31:30.547

我通常有一个 html 页面，其中包含与我拥有的文件一样多的标签，以进行开发阶段。

当它必须投入生产时，它可以被碾碎。

对于下一个项目，我建议使用 requireJS，它在开发过程中以正确的顺序加载文件，并且 r.js 可以将每个脚本加入一个文件中以进行生产。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T16:31:00.270

我正在使用 require.js 并尝试使用 r.js 压缩所有文件，但我发现的问题是它们可以压缩 .js .css 文件，但不能压缩 .html 文件。我现在有 50 个模板，第一次加载需要 10 秒。

# javascript - 替换 Javascript 表单提交按钮上的 HTML 超链接文本

> ID：12749340
> 
> 赞同：2
> 
> 时间：2012-10-05T15:23:33.860
> 
> 标签：javascript, html, send

我有一个 HTML 按钮，可以使用 javascript 提交带有表单验证的表单 -

```
<p class="textstyle1"><a href="javascript:document.contact.submit();"><span onClick="MM_validateForm('Name','','R','Email','','RisEmail','Message','','R');return document.MM_returnValue">Send</span></a></p> 
```

提交表单后，我希望按钮文本从“发送”更改为“请稍候...”，同时运行 php 代码向用户发送电子邮件并将表单数据插入 MySQL 数据库。

我做了很多研究并找到了更改实际提交按钮的文本的代码，但我想要代码帮助来更改 HTML 超链接文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:14:43.817

首先，不要使用超链接`<a>`- 使用提交按钮并将其设置为看起来像超链接，[就像这样](http://jsfiddle.net/W9xQU/)。

接下来，为表单的提交事件定义一个 JavaScript 事件处理程序。事件处理程序应使用[XMLHttpRequest (AJAX) 调用](http://ajaxpatterns.org/XMLHttpRequest_Call)来提交表单、更新按钮文本并取消表单数据提交。像这样的东西：

```
var myFormEl = document.getElementById("myForm");
myFormEl.onsubmit = function() {
    var submitButtonEl = myFormEl.childNodes[4];
    var message = myFormEl.childNodes[2].value;

    var xhReq = new XMLHttpRequest();
    xhReq.open("POST", "submit.php", true);
    xhReq.onreadystatechange = function() { // this request is async
        if (xhReq.readyState != 4)  { return; }
        // there should be some error-checking here
        submitButtonEl.textContent = "Send";
        alert("Your message has been submit");
    };

    var reqBody = "message="+encodeURIComponent(message);

    xhReq.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhReq.setRequestHeader("Content-length", reqBody.length);

    if(submitButtonEl.textContent) {
        submitButtonEl.textContent = "Please wait...";
    }
    else {
        submitButtonEl.innerText = "Please wait..."; // for different browsers
    }
    xhReq.send(reqBody);

    return false; // cancel the form submission
}; 
```

重要的一点是，这样做——使用一个按钮和一个取消表单提交的 JavaScript 事件处理程序——将优雅地降级；如果 JavaScript 被禁用——或者如果 JavaScript 以某种方式失败——老式的表单提交仍然可以工作。

你可以在我的网站上[看到它的实际效果。](http://richard.jp.leguen.ca/stack-overflow/12749340/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T17:30:08.727

感谢大家的意见和建议。我做了更多的研究，并设法找到了一个适合我需要的非常简单的解决方案。我使用 CSS 将我的提交按钮设置为看起来像我的其他链接，并删除了超链接标签和 js 提交功能，以支持实际的提交按钮。我添加了一些代码以在提交表单时将文本值更改为“请稍候”，并且效果很好。

```
<input name="Submit" type="submit" value="Send" onClick="this.value = 'Please Wait';"> 
```

唯一需要注意的是，如果用户在表单成功提交后碰巧点击了浏览器的后退按钮，提交按钮仍然显示“请稍候”，但我可以忍受。

顺便说一句，我放弃了 Macromedia 表单验证，转而使用 PHP 验证脚本。它不像 javascript 或 jquery 验证那样“实时”，但它可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T15:53:32.130

但是在这里，您使用普通回发提交表单。因此，当用户单击“发送”时，页面将回发并执行服务器端代码，即发送电子邮件和数据库插入。如果是AJAX页面，用户点击提交链接后，链接的innerHTML属性可以改为“请稍候”，收到服务器响应后，再改回“发送”。

# node.js - 使用 NPM 在 Windows 7 Box 上安装 MongoDB 时出错

> ID：12749341
> 
> 赞同：2
> 
> 时间：2012-10-05T15:23:45.563
> 
> 标签：node.js, mongodb

我正在尝试使用 NPM 在 Windows 7 机器上安装 MongoDB。我已经安装了 Python 和 VC++，但出现以下错误 ---

```
C:\code\digital-marketing\audience-plus-api>npm install mongodb
npm WARN package.json assert@0.4.9 No README.md file found!
npm WARN package.json url@0.7.9 No README.md file found!
npm http GET https://registry.npmjs.org/mongodb
npm http 304 https://registry.npmjs.org/mongodb
npm http GET https://registry.npmjs.org/bson/0.1.5
npm http 304 https://registry.npmjs.org/bson/0.1.5
npm WARN package.json bson@0.1.5 No README.md file found!

> bson@0.1.5 install C:\code\digital-marketing\audience-plus-api\node_modules\mongodb\node_modules
\bson
> node-gyp rebuild || (exit 0)

C:\code\digital-marketing\audience-plus-api\node_modules\mongodb\node_modules\bson>node "C:\Progra
m Files (x86)\nodejs\node_modules\npm\bin\node-gyp-bin\\..\..\node_modules\node-gyp\bin\node-gyp.j
s" rebuild
  bson.cc
..\ext\bson.cc(8): fatal error C1083: Cannot open include file: 'alloca.h': No such file or direc
tory [C:\code\digital-marketing\audience-plus-api\node_modules\mongodb\node_modules\bson\build\bs
on.vcxproj]

gyp ERR! build error
gyp ERR! stack Error: `C:\Windows\Microsoft.NET\Framework\v4.0.30319\msbuild.exe` failed with exit
 code: 1
gyp ERR! stack     at ChildProcess.onExit (C:\Program Files (x86)\nodejs\node_modules\npm\node_mod
ules\node-gyp\lib\build.js:219:23)
gyp ERR! stack     at ChildProcess.EventEmitter.emit (events.js:91:17)
gyp ERR! stack     at Process._handle.onexit (child_process.js:674:10)
gyp ERR! System Windows_NT 6.1.7601
gyp ERR! command "node" "C:\\Program Files (x86)\\nodejs\\node_modules\\npm\\node_modules\\node-gy
p\\bin\\node-gyp.js" "rebuild"
gyp ERR! cwd C:\code\digital-marketing\audience-plus-api\node_modules\mongodb\node_modules\bson
gyp ERR! node -v v0.8.8
gyp ERR! node-gyp -v v0.6.7
gyp ERR! not ok
mongodb@1.1.9 node_modules\mongodb
└── bson@0.1.5 
```

有人有什么想法吗？

干杯马卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:37:28.667

我有这个确切的问题。我打算将 mongoose 与 mongoDB 一起使用，因此安装后因为 mongoose 文档没有明确说明`npm install mongodb`。

npm install mongoose 工作得很好，给了我这个建议

要使用 C++ bson 解析器安装，请执行

```
npm install mongodb --mongodb:native 
```

我决定测试猫鼬是否工作，所以我继续前进。如果您不打算使用猫鼬，那么可以尝试上述方法，或者如果使用猫鼬，请跳过

```
npm install mongodb 
```

# ios - UIScrollView 重复背景

> ID：12749343
> 
> 赞同：1
> 
> 时间：2012-10-05T15:23:48.150
> 
> 标签：ios, uiscrollview

我想要的是一个 UIScrollView，它有一个重复的平铺图像作为背景。

这个问题的明显答案如下：

```
myScrollView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"myRepeatingImage.png"]]; 
```

然而，这个解决方案有很多问题......

1.  性能很糟糕。
2.  它不能正确缩放。

我的下一个想法是向 myScrollView 添加一个 UIView（我们将其称为 backgroundView），并将重复图像作为背景色，并将所有子视图添加到 backgroundView。但是，如果不断调整 backgroundView 的大小，这可能会变得非常混乱，这样当用户缩小时（即使是暂时超出最小缩放级别），您也无法看到 backgroundView 的“周围”。

有什么建议么？

与此问题类似，但问题未得到解答， [UIScrollView 以图案图像为背景](https://stackoverflow.com/questions/10620248/uiscrollview-with-pattern-image-as-background)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:07:12.657

我想这就是你想要做的。

将一些 (z) 的 UIImageView 作为背景。将这些提取到单独的控件中，因此您只需添加一个“背景视图”。假设您要向上、向下、向左和向右滚动。您还希望缩小内容大小。因此，您需要 x 数量的图像来覆盖滚动视图的宽度，并需要 s 图像来缓冲缩放时的宽度。（y 表示覆盖高度，t 表示缓冲高度，因此 z = x + r + y + t）

旁注：当我说缓冲宽度时，我的意思是将图像放在位于内容大小范围之外的原点。这样，当缩小内容范围时，您将看到这些图像，而不是“围绕”背景。

当您向右滚动足够的距离时（基于与滚动视图边界相关的图像大小，或可见框架是什么），然后将现在不可见的图像视图移动到最右侧的图像视图的右侧。对左右滚动执行类似的操作。发生缩放时，您可能需要添加/删除图像视图......或者只使用始终需要的最大图像视图数量。

关键是提高性能，因此理想情况下，您使用的图像视图数量很少。该数字与 sizeof(scrollview.bounds)/sizeof(image) 成比例增加。sizeof 自然表示帧大小，而不是字节。

编辑：为了帮助说明这个概念，我们可以做以下类比。滚动视图是查看部分瓷砖地板的镜头，滚动视图的内容背景是瓷砖地板。但是，我们只使用了基于镜头的足够数量的图块。随着镜头的移动，我们将不可见的瓷砖移动到镜头将移动到的区域。随着镜头的缩小，我们添加了瓷砖（如果在我们放大时移除它们）。我希望这有助于澄清事情，而不是让事情变得更加混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-29T05:57:15.560

这对我有用：

```
scrollView.backgroundColor = UIColor.init(patternImage: UIImage(named: "repeatable paper background" )! ) 
```

希望这能帮助找到这个的人，这些年后！

# delphi - 为什么这段代码不能在 XE3 中编译

> ID：12749344
> 
> 赞同：3
> 
> 时间：2012-10-05T15:23:55.560
> 
> 标签：delphi, generics, delphi-xe2, delphi-xe3

```
type
  TForm72 = class(TForm)
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }    
  end;

  TTestForm = class(TForm)
  public
    constructor CreateTest(AOwner: TComponent); virtual;
  end;

  TTestForm1 = class(TTestForm)    
  public
    constructor CreateTest(AOwner: TComponent); override;
  end;

  TTest<T: TTestForm, constructor> = class(TObject)
  public
    class procedure Test;
  end;

var
  Form72: TForm72;

implementation

{$R *.dfm}

procedure TForm72.FormCreate(Sender: TObject);
begin
  TTest<TTestForm1>.Test;
end;

{ TTest<T> }

class procedure TTest<T>.Test;
var
  F: T;
begin
  F := T.CreateTest(Application);
  Form72.Caption :=  F.Name;
end;

{ TTestForm }

constructor TTestForm.CreateTest(AOwner: TComponent);
begin
  inherited Create(AOwner);
end;

{ TTestForm1 }

constructor TTestForm1.CreateTest(AOwner: TComponent);
begin
  inherited;
  Caption := 'Bang';
end;

end. 
```

此代码在 XE2 中编译，但在 XE3 中出现“[dcc32 Error] Unit71.pas(55): E2010 Incompatible types: 'T' and 'procedure, untyped pointer or untyped parameter'”失败。我做错了什么，或者编译器做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T15:35:22.910

事实上，这段代码突出了 XE2 中的一个编译器错误。在 XE2 中，代码在不应该编译的时候编译。删除`constructor`约束，编译失败

```
E2568 无法在类型中没有 CONSTRUCTOR 约束的情况下创建新实例
参数声明

```

但该`constructor`约束仅表明该类具有无参数构造函数。该[文档](http://docwiki.embarcadero.com/RADStudio/en/Constraints_in_Generics#Constructor_Constraints)指出：

> **构造函数约束**
> 
> 类型参数可能受保留字“构造函数”的零个或一个实例的约束。这意味着实际的参数类型必须是定义默认构造函数（公共无参数构造函数）的类，以便泛型类型中的方法可以使用参数类型的默认构造函数构造参数类型的实例，而无需了解有关参数的任何信息类型本身（没有最低基本类型要求）。

约束的存在与否`constructor`影响此代码的事实表明 XE2 编译器存在错误。

* * *

在 XE3 中，代码正确无法编译。使用语法调用构造函数的唯一方法`T.Create`是使用`constructor`约束并调用无参数构造函数。这不是这里的情况，所以 XE3 正确地报告了一个编译错误。

您需要进行一些转换才能使其编译。

```
F := T(TTestForm(T).CreateTest(Application)); 
```

这是一个[众所周知的技巧](https://stackoverflow.com/questions/7215692/generics-constructor-with-parameter-constraint)，可以绕过 Delphi 泛型实现处理构造函数的一些怪癖。虽然看起来很乱，但我相信这段代码是语言设计者打算让我们使用的。在我看来，行为的变化是由于错误修复和 XE3 的行为设计。

# curl - 将 CURL 命令转换为 PyCurl

> ID：12749346
> 
> 赞同：1
> 
> 时间：2012-10-05T15:23:58.617
> 
> 标签：curl, translation, pycurl

我正在努力翻译这个命令（我可以成功运行）

```
curl -X POST https://www.googleapis.com/upload/drive/v2/files?uploadType=multipart \
-H "Authorization: Bearer ACCESS_TOKEN" \
-H "Content-Type: multipart/related" \
-F "metadata=@metadata.txt;type=application/json;charset=UTF-8" \
-F "file=@upload.jpg;type=image/jpeg" 
```

使用 pycurl 到 python 脚本：

```
import pycurl
url = 'https://www.googleapis.com/upload/drive/v2/files?uploadType=multipart'

c = pycurl.Curl()
c.setopt(c.POST, 1)
c.setopt(c.USERAGENT, 'Curl')
c.setopt(c.VERBOSE, 1)
c.setopt(c.URL, url)
c.setopt(c.HTTPHEADER, [
    'Authorization: Bearer %s' % str(ACCESS_TOKEN),
    'Content-Type: multipart/related',
])

data = [
     ('metadata', (c.FORM_FILE, 'metadata.txt')),
     ('type', 'application/json'),
     ('charset', 'UTF-8'),
     ('file', (c.FORM_FILE, 'upload.jpg')),
     ('type', 'image/jpeg'),
]
c.setopt(c.HTTPPOST, data)
c.perform()
c.close() 
```

但是当我运行脚本时总是出现这个错误

```
* About to connect() to www.googleapis.com port 443 (#0)
*   Trying 74.125.132.95... * connected
* found 153 certificates in /etc/ssl/certs/ca-certificates.crt
*    server certificate verification OK
*    common name: *.googleapis.com (matched)
*    server certificate expiration date OK
*    server certificate activation date OK
*    certificate public key: RSA
*    certificate version: #3
*    subject: C=US,ST=California,L=Mountain View,O=Google Inc,CN=*.googleapis.com
*    start date: Thu, 27 Sep 2012 01:23:09 GMT
*    expire date: Fri, 07 Jun 2013 19:43:27 GMT
*    issuer: C=US,O=Google Inc,CN=Google Internet Authority
*    compression: NULL
*    cipher: ARCFOUR-128
*    MAC: SHA1
> POST /upload/drive/v2/files?uploadType=multipart HTTP/1.1
User-Agent: Curl
Host: www.googleapis.com
Accept: */*
Authorization: Bearer ACCESS_TOKEN
Content-Length: 43373
Expect: 100-continue
Content-Type: multipart/related; boundary=----------------------------b91f88a180be

* Done waiting for 100-continue
< HTTP/1.1 400 Bad Request
< Server: HTTP Upload Server Built on Sep 26 2012 16:51:11 (1348703471)
< Content-Type: application/json
< Date: Fri, 05 Oct 2012 15:20:26 GMT
< Pragma: no-cache
< Expires: Fri, 01 Jan 1990 00:00:00 GMT
< Cache-Control: no-cache, no-store, must-revalidate
< Content-Length: 171
* HTTP error before end of send, stop sending
< 
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "parseError",
    "message": "Parse Error"
   }
  ],
  "code": 400,
  "message": "Parse Error"
 }
}
* Closing connection #0 
```

你知道正确的翻译吗？

出于安全原因，我删除了代码示例的访问令牌

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:43:35.877

刚刚找到解决方案

数据值必须是这样的：

```
data = [
    ('metadata', (
        c.FORM_FILE, 'metadata.txt', 
        c.FORM_CONTENTTYPE, 'application/json')),
    ('file', (
        c.FORM_FILE, 'upload.jpg', 
        c.FORM_CONTENTTYPE, 'image/jpeg'))
] 
```

# android - 在 Android 上与亚马逊应用交互

> ID：12749348
> 
> 赞同：1
> 
> 时间：2012-10-05T15:24:06.927
> 
> 标签：android, broadcastreceiver, amazon

有人知道是否有办法与 Amazon App 交互吗？我想让我的用户能够在亚马逊上购买东西，而不是将他们发送到亚马逊的网络版本，如果安装在设备上，我想使用亚马逊应用程序。它应该是一个广播接收器，我应该在它上面传递亚马逊的 OfferListeningId ...

我在任何地方都没有找到关于这个应用程序的任何类型的文档！

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:18:52.457

我自己回答...

我已经“探索”了这个应用程序，这个应用程序上绝对没有 BroadcastReceiver（在 2.0.2 版上）。太糟糕了。

# iphone - 在 iOS 中使用 MySQL

> ID：12749350
> 
> 赞同：1
> 
> 时间：2012-10-05T15:24:15.600
> 
> 标签：iphone, mysql, ios

首先，这是我已经实现的。

*   员工当前正在使用的工作* Windows 时钟应用程序。
*   Windows 应用程序连接到位于本地服务器上的 MySQL 类型的数据库。

我有一个 iPhone 应用程序的骨架，它将执行与 Windows 时钟应用程序相同的功能。如何从 iPhone 应用程序向 MySQL 服务器发送/接收信息？我已经看到它完成了，所以我知道它是可能的。我会使用 SQLite，但是，MySQL 数据库已经创建，并且这个应用程序不是唯一访问数据的应用程序。任何帮助，将不胜感激。

我在这里搜索了所有的教程，所有的教程似乎都过时了，而且不太容易理解。有人可以指出我如何做到这一点的正确方向吗？我知道可以安装和使用 JSON、XML、SOAP 和其他服务的框架，但是没有关于如何从头到尾执行此操作的清晰教程。似乎这是一个很大的问题，所以如果有人有一个清晰、简洁的答案，那就太棒了。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:11:20.547

我不熟悉，`MySQL C Client Library`但根据我的经验，我通常会设置一个 php（可能是 RoR、Python 等）Web 服务来与 MySQL DB 通信，然后使用[AFNetworking](http://www.afnetworking.com/)轻松地将 REST 请求发送到 Web 服务。这很可能会发送和接收 JSON 格式的数据。这是处理远程数据库的标准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T15:32:09.657

您可以使用 MySQL C 客户端库并将其链接到您的 iOS 应用程序。然后，您的应用程序将能够连接到 MySQL 数据库并直接向其发出 SQL。听起来这基本上就是您的 Windows 应用程序已经在做的事情。

由于任何 C 代码都适用于 Objective-C，因此您可以在 iOS 应用程序中使用几乎任何普通的 C 库。

在这种情况下，您的 Windows 应用程序和您的 iOS 都将直接与数据库通信，没有任何类型的应用程序层来进行验证、身份验证等。如果您希望服务器应用程序负责这些事情，您将拥有创建一个，然后您的应用程序将与它通信，使用 JSON 或 XML 或 SOAP 或任何你喜欢的。

您必须注意确保数据库是安全的；例如，如果 iOS 应用程序以 root 数据库访问权限连接，则错误或恶意用户可能会弄​​清楚如何使用它对数据库进行任意更改。（因为这是一个时间跟踪应用程序，所以你的动机就在那里。） 总之：不要忽视安全性。

这是 C API 上的 MySQL 文档：http: [//dev.mysql.com/doc/refman/5.1/en/c.html](http://dev.mysql.com/doc/refman/5.1/en/c.html)

这是 C API 的教程：http: [//zetcode.com/tutorials/mysqlcapitutorial/](http://zetcode.com/tutorials/mysqlcapitutorial/)

这是在 iOS 上使用过该库的人的代码片段：[http ://blog.iosplace.com/?p=30](http://blog.iosplace.com/?p=30)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-01T11:36:35.870

使用库[OHMySQL](https://github.com/oleghnidets/OHMySQL)。它通过 MySQL C API 处理 MySQL。它是用 Objective-C 编写的，但也可以应用于 Swift 中的项目。它支持 iOS 和 macOS。 [![在此处输入图像描述](../Images/9d91f2b475353a1595208b5049f2ab3a.png)](https://i.stack.imgur.com/ytPIy.png)

# php - 基于 PHP、MySQL 的登录系统的问题

> ID：12749353
> 
> 赞同：1
> 
> 时间：2012-10-05T15:24:20.787
> 
> 标签：php, security, login-script

**重要的**

在遵循以下答案中的建议后，客户能够毫无问题地登录，但并未尝试实际导航受保护的页面。当他稍后尝试这样做时，他又像以前一样重新登录，并出现“请登录”错误。经过一番摸索，我想到了一些非常简单的事情 - 客户端正在使用[http://www.example.com/admin](http://www.example.com/admin)访问该站点，并且登录脚本中的所有内容都重定向到[http://example.com](http://example.com)，因此会话它正在寻找的 cookie 是为另一个域设置的。这也解释了为什么他在第一次登录时遇到问题，但后来却没有——脚本将他重定向到没有 www 的登录表单。

一个快速的解决方法是编写一个 .htaccess 文件来删除 www，问题解决了。当然，这也可以在登录脚本中处理，我将对其进行改进以备将来使用。

**原帖**

我使用自制的 CMS 和登录系统开发基于 PHP 和 MySQL 的站点。我的 CMS 对每个客户来说都是独一无二的，而且很受大众欢迎 - 不幸的是，我的登录系统并非如此。以下是一篇很长的文章，但我需要介绍详细信息以尝试找到解决方案。忍受我..

该系统相当简单，即使不是有点沉重。每个用户在 SALT 旁边都有一个存储在 MySQL 表中的盐渍哈希。当用户登录时，他们的 SALT 被检索并且提交的密码变成了一个加盐哈希。

如果提交的加盐哈希与存储在表中的哈希匹配，则用户通过身份验证。他们的姓名、最后一个 IP 地址和帐户级别（大多数站点上为 3 个级别）等详细信息存储在分配给会话变量的数组中。然后他们被重定向到他们登录的受限站点的登录页面（仅限会员或管理员/CMS）。

安全页面包括一个较小的 auth.php 文件，该文件检查是否存在包含其详细信息的会话变量。如果没有，他们将被重定向到该站点的登录表单，并显示一条错误消息，内容为“请登录”。如果存在，则允许它们继续，并将存储在数组中的详细信息分配给变量。

许多用户反映的问题是，他们经常需要多次登录，以免被弹回登录表单并显示“请登录”错误消息，或者他们导航到安全中的另一个页面网站并随机返回登录并出现相同的错误。因此，会话变量似乎要么没有被设置，要么在正常使用站点期间由于某种原因被清除。

第一个问题从未发生在我身上——在众多设备和网络上——我在客户办公室使用他们的笔记本电脑亲眼目睹了它。我让他们连接到我的移动热点，但没有任何变化。但是，他们能够使用我的笔记本电脑和热点连接毫无问题地登录。不幸的是，我无法使用我的笔记本电脑连接到他们的网络，因此不能排除这个变量。

****注意 - ****我最初忘记提到，在问题客户使用正确的凭据登录两到三次后，系统可以正常工作。在他们的浏览器保持打开状态的情况下进行的后续登录尝试往往会在此后毫无问题地执行。此外，登录页面会破坏会话。

以下是每个阶段的代码，从登录脚本开始：

**登录.php**

```
<?php
putenv("TZ=US/Eastern");

if (array_key_exists('site', $_POST)) {
    $authenticate = new loginUser($_POST['username'], $_POST['password'], $_POST['site'], $_SERVER['REMOTE_ADDR']);
}
//Authenticate and log-in
class loginUser {
    private $memDB, $username, $password, $site, $ip_address;

     //Clean input variables
    private function clean($str) {
        $str = @trim($str);
        if(get_magic_quotes_gpc()) {
            $str = stripslashes($str);
        }
        return $str;
    }
    //Construct variables
    function __construct($username, $password, $site, $ip_address) {
    session_start();
        $this->memDB = new PDO('mysql:host=localhost;dbname=exampleDB', 'exampleUser', 'examplePassword');
        $this->username = $this->clean($username);
        $this->password = $this->clean($password);
        $this->site = $site;
        $this->ip_address = $ip_address;
    $this->authUser();
    }
    //Validate username
    private function validateUsername($username) {

        $checkUsername = $this->memDB->prepare("SELECT COUNT(*) FROM accounts WHERE username = ?");
        $checkUsername->execute(array($username));
        return $checkUsername->fetchColumn();
    }
    //Obtain and set account details
    private function accountDetails() {

        $fetchAccountDetails = $this->memDB->prepare("SELECT id, name_f, name_l, ipAddr, lastLogin, accountLevel, isActive 
        FROM accounts WHERE username = ?");
        $fetchAccountDetails->execute(array($this->username));
        $accountDetails = $fetchAccountDetails->fetch();
        $this->updateLogin();
        return $accountDetails;
    }
    //Update last login details
    private function updateLogin() {

        $updateLogin = $this->memDB->prepare("UPDATE accounts SET ipAddr = ?, lastLogin = DATE_ADD(NOW(), INTERVAL 1 HOUR) WHERE username = ?");
        $updateLogin->execute(array($this->ip_address, $this->username));
    }
    public function authUser() {

        $loginErr = array(); //Array for holding login error message
        $loginErrFlag = false; //Boolean for error
        //Validate submitted $_POST elements
        if (!$this->username) {
            $loginErr[] = "Username missing";
            $loginErrFlag = true;
        }
        if (!$this->password) {
            $loginErr[] = "Password missing";
            $loginErrFlag = true;
        }
        if ($this->username && $this->validateUsername($this->username) == 0) {
            $loginErr[] = "Username invalid";
            $loginErrFlag = true;
        }
        if (!$loginErrFlag) {
            //Fetch the password and SALT to compare to entered password
            $validatePW = $this->memDB->prepare("SELECT password, salt FROM accounts WHERE username = ? LIMIT 1");
            $validatePW->execute(array($this->username));
            $passwordResult = $validatePW->fetch();
            $dbPW = $passwordResult['password'];
            $dbSalt = $passwordResult['salt'];
            //Compare entered password to SALT + hash
            $hashPW = hash('sha512', $dbSalt . $this->password);
            if ($hashPW === $dbPW) {
                //Logged in
                $_SESSION['CVFD-USER-DETAILS'] = $this->accountDetails();
                //Redirect to secure landing page for log-in origin (Members or Admin)
                //Adding SID is a recent attempt to handle log-in problems
                header("Location: http://example.com/$this->site/$this->site-main.php?" . SID);
                //session_write_close() was here but was removed
                exit();
            } else {
                //Password invalid
                $loginErr[] = "Please check your password and try again";
                $_SESSION['CVFD_LOGIN_ERR'] = $loginErr;
                //Redirect to the log-in for the origin
                header("Location: http://example.com/$this->site");
        session_write_close();
                exit();
            }
        } else {
            $_SESSION['CVFD_LOGIN_ERR'] = $loginErr;
            header("Location: http://example.com/$this->site");
            session_write_close();
            exit();
        }

    }
}
?> 
```

**授权文件**

```
<?php
session_start();
if (!isset($_SESSION['CVFD-USER-DETAILS']) || $_SESSION['CVFD-USER-DETAILS'] == '') {
    //Not logged in
    $_SESSION['CVFD_LOGIN_ERR'] = array('Please login');
    header('Location: http://example.com/members');
    session_write_close();
    exit();
} else {
    $userDetails = $_SESSION['CVFD-USER-DETAILS']; //Assign user details array to variable
    //Check to see if account is active
    $accountStatus = $userDetails['isActive'];
    $accountLevel = $userDetails['accountLevel'];
    if ($accountStatus == 0) {
        //Account is not yet active (pending Admin activation)
        $_SESSION['CVFD_LOGIN_ERR'] = array('Your account is suspended or pending activation');
        header('Location: http://example.com/members');
        session_write_close();
        exit();
    } else {
        $CVFDFirstName = $userDetails['name_f'];
        $CVFDLastName = $userDetails['name_l'];
        $CVFDLastLogin = date("m/d/Y H:i:s", strtotime($userDetails['lastLogin']));
        $CVFDAccountLevel = $userDetails['accountLevel'];
        $CVFDIPAddr = $userDetails['ipAddr'];
    }
}
?> 
```

以下是 auth.php 包含在安全文件中的方式 -

```
<?php
if (substr_count($_SERVER['HTTP_ACCEPT_ENCODING'], 'gzip')) ob_start("ob_gzhandler"); else ob_start();
require($_SERVER['DOCUMENT_ROOT'] . '/members/includes/handlers/handler.auth.php'); 
```

任何帮助，将不胜感激。真是个谜。。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:00:46.613

我登录系统的方式是只使用会话 ID，而不是在会话本身中存储任何内容。当用户登录他们的散列用户代理数据时，他们的会话 ID、他们的用户 ID（对应于用户表）和到期时间被放入一个表中，通常称为“active_users”，然后我有一个包含的登录头文件在每个启动会话的管理员受限页面中，检索用户会话 ID 并检查该会话 ID 是否在活动用户表中，以及被检查的用户是否具有相同的用户代理数据，不超过到期时间。如果该查询没有返回任何内容，则他们没有登录并被退回。

这就是我制作的大多数登录系统的工作方式，而且我没有遇到任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:53:16.513

让我跳出来的一件事是：

```
header('Location: http://example.com/members');
session_write_close();
exit(); 
```

我会`session_write_close()`在`header('location ...')`

您的日志中是否显示任何“标头已发送”错误？

想到的另一件事是一些 AJAX 竞争条件。登录页面正在进行任何异步调用吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T17:44:17.660

成功！仍然需要准确缩小导致问题消失的更改范围，但客户报告说他不再有登录问题。

立即想到的最大变化是`session_write_close()`几乎无处不在。它可能被放置在部分代码中的标头重定向之后，或者只是让它存在可能是原因。我将尝试在重定向之前放置它。

感谢大家的建议

# java - 在 EJB 中获取会话信息？

> ID：12749354
> 
> 赞同：1
> 
> 时间：2012-10-05T15:24:21.643
> 
> 标签：java, session, ejb

我有两个问题：

*   在 ejb 中获取 http 会话信息是一种好方法吗？
*   如何在 EJB 层中获取 Http Session 信息？

**语境**

我有一个应用程序，其中我有两种类型的页面，jsp 页面和 jsf 页面，现在我在 jsp 页面中获取会话信息，我想将此会话信息传递给 jsf 支持 bean，因为从支持 bean 调用 ejbs 并且需要设置会话为 ejb 设置所有远程和本地接口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:37:50.053

不，特别是因为 EJB 通常不通过 HTTP 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:59:06.577

HTTP Session 信息不能从 EJB 中轻易获得。但是，Session 是 Session，您应该能够从中检索值，而不管它是 JSP 还是 JSF。

通过执行检索 JSF 中的 Session 属性

```
<h:outputText value="#{sessionScope['id']}" /> 
```

# caching - 如何在 IE8 中监控缓存

> ID：12749357
> 
> 赞同：1
> 
> 时间：2012-10-05T15:24:35.517
> 
> 标签：caching, internet-explorer-8, browser-cache

我试图检查以确保我网站上的所有内容在每个浏览器上都可以正常缓存，但我正在努力寻找一个测试 IE8 缓存的好工具。Firefox 有 Firebug，Google Chrome 有它的 Inspect Element 工具包 IE8 有 F12，但我在 IE8 的工具包中找不到我要找的东西。有没有人对如何检查以确保 css/html/images 在 IE8 上正确缓存有任何建议？

# c# - 将对 SQL SERVER 2005 或 2008 Express 数据库的访问限制为我的 c# 应用程序

> ID：12749360
> 
> 赞同：2
> 
> 时间：2012-10-05T15:24:42.923
> 
> 标签：c#, sql-server-2008, sql-server-2005

我总是在这里找到答案而无需打开线程，但这次我真的需要专家的建议。

我的 Windows 软件在安装时创建了一个 SQL Server Express 数据库，使用脚本和一个 IIS 服务器，通过外联网 web 应用程序向用户提供数据。

数据库引擎可以是 SQL Server 2005 Express 或 2008 Express。

我的问题如下：我想限制对我的 IIS 服务器的数据库访问，但我不能使用特定的 Windows 帐户身份验证。我实际上使用默认的 Windows 配置文件，但这当然不是一个好的解决方案。

由于 2005 年数据库的可能性，我无法使用 TDE。由于索引松散和性能问题，我不想使用 CDE。

我当然不能手动指定数据库参数。

有没有办法从我的 c# 应用程序创建架构或 SQL Server 用户，并使我的代码成为我数据库的唯一访问者（当然计算机的本地管理员除外）？

我的可能性是什么？你会建议我哪一个？

# java - 如何为 JButton 设置自定义渐变？

> ID：12749362
> 
> 赞同：0
> 
> 时间：2012-10-05T15:24:53.743
> 
> 标签：java, swing

我想做完全一样的事情[，](https://stackoverflow.com/a/5845007/1531116)但只为我需要的一两个按钮设置自定义渐变，而不是为所有 JButton 实例。并动态设置/取消设置 - 类似于按钮选择/未选择模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:40:03.097

所以，这就是答案。

```
import java.awt.Color;
import java.awt.GradientPaint;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;

    class JGradientButton extends JButton{
        Color color1 = Color.WHITE;
        Color color2 = Color.PINK;
        JGradientButton(){
            super("Gradient Button");
            setContentAreaFilled(false);
            setFocusPainted(false); // used for demonstration
            addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent evt) {
                    color2 = (color2==Color.PINK) ? Color.GREEN : Color.PINK;
                    //System.out.println(button.isSelected());
                }
            });

        }

        @Override
        protected void paintComponent(Graphics g){
            Graphics2D g2 = (Graphics2D)g.create();
            g2.setPaint(new GradientPaint(
                    new Point(0, 0), 
                    color1, 
                    new Point(0, getHeight()), 
                    color2));
            g2.fillRect(0, 0, getWidth(), getHeight());
            g2.dispose();

            super.paintComponent(g);
        }

    } 
```

和...

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.GradientPaint;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public final class JGradientButtonDemo {
    public static void main(String[] args){
        SwingUtilities.invokeLater(new Runnable(){
            @Override
            public void run() {
                createAndShowGUI();         
            }
        });
    }

    private static void createAndShowGUI(){
        final JFrame frame = new JFrame("Gradient JButton Demo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().setLayout(new FlowLayout());
        frame.add(new JGradientButton());
        frame.setSize(new Dimension(300, 150)); // used for demonstration
        //frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-02T16:48:52.830

我修改了 scythargon 的答案并创建了一个简单而高级的渐变按钮。

[![在此处输入图像描述](../Images/1a2d9ff02bc8abe05cb868bb0124bea1.png)](https://i.stack.imgur.com/5x7vm.png)

```
import java.awt.*;
import javax.swing.*;

public class ButtonGradientTest {
    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName());
                } catch (Exception e) {
                    e.printStackTrace();
                }

                createAndShowGUI();
            }
        });
    }

    protected static void createAndShowGUI() {
        JFrame  frame   = new JFrame("Button Color Test");
        JPanel  panel1  = new JPanel(new FlowLayout());
        JPanel  panel2  = new JPanel(new FlowLayout());
        JButton button1 = new JGradientButtonSimple("Simple", Color.RED, Color.ORANGE);
        JButton button2 = new JGradientButton("Advanced", Color.GREEN, Color.BLUE);

        button1.setPreferredSize(new Dimension(100, 100));
        button1.setForeground(Color.YELLOW);
        button2.setPreferredSize(new Dimension(100, 100));
        button2.setForeground(Color.MAGENTA);

        panel1.add(button1);
        panel2.add(button2);
        frame.add(panel1, BorderLayout.WEST);
        frame.add(panel2, BorderLayout.EAST);

        frame.pack();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

## 简单渐变

```
import java.awt.*;
import javax.swing.*;
import javax.swing.event.*;

public class JGradientButtonSimple extends JButton {
    private static final long serialVersionUID = 1L;
    private Color stopTop;
    private Color stopBottom;
    private Paint colorGradient;
    private Point[] stopPoints = new Point[2];

    public JGradientButtonSimple(Color stopTop, Color stopBottom) {
        this("", stopTop, stopBottom);
    }

    public JGradientButtonSimple(String text, Color stopTop, Color stopBottom) {
        this(text, null, stopTop, stopBottom);
    }

    public JGradientButtonSimple(String text, Icon icon, Color stopTop, Color stopBottom) {
        super(text, icon);

        setContentAreaFilled(false);
        setFocusPainted(false);

        this.stopTop = stopTop;
        this.stopBottom = stopBottom;

        addChangeListener(new ChangeListener() {
            @Override
            public void stateChanged(ChangeEvent e) {
                invalidate();
            }
        });
    }

    public void invalidate() {
        super.invalidate();

        stopPoints[0] = new Point(0, 0);
        stopPoints[1] = new Point(0, getHeight());

        if (getModel().isPressed()) {
            colorGradient = new GradientPaint(stopPoints[0], stopBottom, stopPoints[1], stopTop);
        } else {
            colorGradient = new GradientPaint(stopPoints[0], stopTop, stopPoints[1], stopBottom);
        }
    }

    @Override
    protected void paintComponent(Graphics g) {
        Graphics2D g2 = (Graphics2D) g.create();

        g2.setPaint(colorGradient);
        g2.fillRect(0, 0, getWidth(), getHeight());
        g2.dispose();

        super.paintComponent(g);
    }
} 
```

## 高级渐变

```
import java.awt.*;
import javax.swing.*;
import javax.swing.event.*;

public class JGradientButton extends JButton {
    private static final long serialVersionUID = 1L;
    private Color[] stops = new Color[2];
    private Paint colorGradients[] = new Paint[2];
    private Point[] stopPoints = new Point[3];

    public JGradientButton(Color stopTop, Color stopBottom) {
        this("", stopTop, stopBottom);
    }

    public JGradientButton(String text, Color stopTop, Color stopBottom) {
        this(text, null, stopTop, stopBottom);
    }

    public JGradientButton(String text, Icon icon, Color stopTop, Color stopBottom) {
        super(text, icon);

        setContentAreaFilled(false);
        setFocusPainted(false);

        stops[0] = stopTop;
        stops[1] = stopBottom;

        addChangeListener(new ChangeListener() {
            @Override
            public void stateChanged(ChangeEvent e) {
                invalidate();
            }
        });
    }

    public void invalidate() {
        super.invalidate();

        stopPoints[0] = new Point(0, 0);
        stopPoints[1] = new Point(0, (int) (getHeight() * 0.33));
        stopPoints[2] = new Point(0, (int) (getHeight() * 1.00));

        int stop = getModel().isPressed() ? 1 : 0;
        Color highlight = stop == 0 ? Color.WHITE : Color.BLACK;

        colorGradients[0] = new GradientPaint(stopPoints[0], stops[stop], stopPoints[1], highlight);
        colorGradients[1] = new GradientPaint(stopPoints[1], highlight, stopPoints[2], stops[1 - stop]);
    }

    @Override
    protected void paintComponent(Graphics g) {
        Graphics2D g2 = (Graphics2D) g.create();

        for (int i = 0, offset = getHeight() / stopPoints.length; i < colorGradients.length; i++) {
            g2.setPaint(colorGradients[i]);
            g2.fillRect(0, i * offset, getWidth(), getHeight() - (i * offset));
        }
        g2.dispose();

        super.paintComponent(g);
    }
} 
```

# android - Snapshot's，模拟器和开发

> ID：12749363
> 
> 赞同：0
> 
> 时间：2012-10-05T15:24:55.887
> 
> 标签：android, android-emulator

作为学校作业的一部分，我刚刚开始了 Android 开发。我不确定人们如何有效地重新编译他们的代码以通过模拟器对其进行测试？我已经按照网站上的第一个教程启用了快照功能以获得即时启动时间，但是由于某种原因，在我添加了一个新活动之后，我得到了异常和错误。

错误非常严重，以至于按钮忽略了 onClick 事件。所以我决定擦除数据并在没有快照的情况下运行，应用程序运行良好。

每次我更改代码中的某些内容时，我不想在每次启动时等待 40-50 秒。我听说有些人说你甚至可以让模拟器打开，它会自动获取更改。即使您将活动添加到配置中也是如此吗？

另外，如何正确关闭模拟器？更改后仅退出并重新运行应用程序是否安全？

最后一件事，本教程没有讨论 R 变量是什么，例如：

```
setContentView(R.layout.activity_main); 
```

那么这个R到底是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:36:50.790

对于 R 部分，这已在其他 SO 问题中得到解答。例如：[了解 Android 中的 R 类](https://stackoverflow.com/questions/6804053/understand-the-r-class-in-android)。您还可以查看开发人员文档：[访问资源](http://developer.android.com/guide/topics/resources/accessing-resources.html)

关于模拟器，你可以让它在你开发的时候运行。然后在 Eclipse 中，一旦您对更改感到满意，只需调试应用程序，它就会上传到模拟器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T15:37:44.460

R 是一个自动生成的类。它允许编译器在您的 xml 资源和代码之间建立链接。

R.layout.activity_main 是 res/layout 文件夹中的 activity_main.xml。

如果你有安卓手机/平板电脑，你可以用它来测试你的代码。在我的终端上更新和安装应用程序只需不到 3 秒的时间。或者您可以让您的模拟器在整个编码会话期间运行，然后选择它作为部署目标。

# c# - 检查类型 TA 是否可以在运行时转换为类型 TB？（考虑的不仅仅是继承）

> ID：12749364
> 
> 赞同：4
> 
> 时间：2012-10-05T15:24:55.460
> 
> 标签：c#, .net, cil

所以我知道这有效：

```
class A
{
}
class B : A
{       
}

[Test]
public void CanCast()
{
    Assert.That(typeof(A).IsAssignableFrom(typeof(B)));
    Assert.That(!typeof(B).IsAssignableFrom(typeof(A)));
} 
```

但是，假设这两种类型是 Int32 和 Int64。

在运行时，我可以将 Int32 值转换为 Int64 变量，但反过来不行。如何在运行时检查这种类型的转换兼容性？（IsAssignableFrom 对此不起作用，它总是为 Int32 和 Int64 给出 false）

**编辑：**我不能简单地尝试转换，因为我没有这些类型的任何值，我问的是有两种类型 A 和 B，没有两个值 a 和 b 的假设场景。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T21:25:56.603

对于非原始类型，您可以反映和检查`op_Implicit`任一类型上是否存在支持转换的方法。IL 实际上并不支持真正的运算符重载，因此它纯粹是 C# 识别运算符重载的约定系统。如果该方法是从 C# 中的运算符重载定义创建的，则该方法也将被标记为 IsSpecialName。

对于[原始类型](http://msdn.microsoft.com/en-us/library/system.type.isprimitive.aspx)（如 Int32 和 Int64），最简单的选择是对各种情况进行硬编码，因为转换是通过原始 IL 操作码而不是通过方法进行的。但是，只有少数原始类型，因此创建一个检查每种原始类型的所有可能性的方法并不难。

附带说明，因为您的示例特别提到了原始值类型，请注意隐式“转换”（在 C# 中）的存在并不意味着所有“转换”都可以工作。C# 转换操作`(T)x`也可以表示“将 x 中的值拆箱为类型 T”。如果 x 包含一个装箱的 Int32 并且您尝试 (Int64)x，这将在运行时失败，即使您可以将 Int32 隐式“转换”为 Int64。请参阅[Eric Lippert](http://blogs.msdn.com/b/ericlippert/archive/2009/03/19/representation-and-identity.aspx)以获取有关拆箱为何以这种方式工作的更多信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-05T15:30:19.953

一种（不太优雅的）方法是简单地尝试它 - 将您的尝试包装在 try/catch 中，如果您捕获到异常则断言为 false。

# java - 在网络应用程序中检测用户区域的可靠方法是什么？

> ID：12749365
> 
> 赞同：0
> 
> 时间：2012-10-05T15:24:56.967
> 
> 标签：java, javascript, locale, region

> **可能重复：**
> [如何找到所有用户的 geoip 位置](https://stackoverflow.com/questions/9126959/how-to-find-the-geoip-location-for-all-users)

我以前从来没有遇到过这个问题，所以今天我一直在阅读这个问题，但令人惊讶的是，尽管有人认为这应该是一个相当普遍的问题，但仍然无法找到任何对这个话题真正有用的东西。

**我基本上需要检测标准网络应用程序中的用户区域，并根据这一点将它们重定向到不同的页面。**

什么是执行此操作的标准稳健方式，它是否需要服务器组件或者是否有合理的仅限客户端的解决方案？

任何例子表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:41:05.343

据我所知，您的三个数据来源是：

*   针对 GeoIP 数据库（需要服务器组件）的用户 IP 地址，
*   用户的浏览器语言设置（显然[仍需要服务器组件](https://stackoverflow.com/questions/1043339/javascript-for-detecting-browser-language-preference)），或
*   [用户在智能手机或现代浏览器](http://dev.w3.org/geo/api/spec-source.html)中的纬度和经度。

我听说过地理定位服务，它将抽象出对您自己的服务器组件的需求，其中一些列在[这个 SO answer](https://stackoverflow.com/questions/283016/know-a-good-ip-address-geolocation-service)中。

# google-tv - 可以将 Google tv 中的直播电视流包含在 apk 中吗？

> ID：12749368
> 
> 赞同：2
> 
> 时间：2012-10-05T15:25:13.830
> 
> 标签：google-tv

不希望更改流只需包含完整未更改流的较小窗口，甚至只是允许通过应用程序中的透明度看到流。最好的情况是我们可以将整个流缩小到 1/4 屏幕左右，并使用类似 videoview 的意图将其包含在应用程序中，以便在必要时显示实时视图。我知道我们听说覆盖已经开始工作了，但是像直播电视应用程序那样没有覆盖的包含呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:12:53.610

您无法缩小直播电视视频。您可以使用长时间运行的 Toast 来放置叠加层。有几个应用程序可以做到这一点。

# php - 无法将包含撇号的数据保存到 MySQL 数据库

> ID：12749371
> 
> 赞同：0
> 
> 时间：2012-10-05T15:25:38.697
> 
> 标签：php, mysql, database, escaping

当我尝试使用撇号提交数据时出现问题，不允许我保存到数据库中。

com0 是我的表单域。

```
$ucom0= mysqli_real_escape_string($_POST['com0']);

$AddQuery = "INSERT INTO database(feed1,comp1) VALUES ('".$ucom0."','".$uincrease0."')"; 
```

这是错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 's 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:34:27.620

带有撇号的数据会提前关闭 SQL 语句。这很糟糕，并且可能对 SQL 注入开放。你真的应该使用[准备好的语句](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)。但是，`mysqli_real_escape_string`可以使用。

但这不起作用的原因是因为`mysqli_real_escape_string`当你像你一样在程序上调用它时需要两个参数（不像 deprecated `mysql_real_escape_string())`;

```
$ucom0= mysqli_real_escape_string($link, $_POST['com0']); 
```

`$link`连接到数据库时返回的变量在哪里：

```
$link = mysqli_connect("databasehost", "username", "password", "database"); 
```

如果您使用基于对象的 mysqli 进行连接，情况会有所不同：

```
$mysqli = new mysqli("databasehost", "username", "password", "database");
$ucom0 = $mysqli->real_escape_string($_POST['com0']); 
```

# jquery-ui - JscrollPane 插件在对话框 jquery 中显示不一致

> ID：12749375
> 
> 赞同：2
> 
> 时间：2012-10-05T15:25:57.877
> 
> 标签：jquery-ui, jquery-plugins

我在具有表格显示的对话框 jquery 中遇到 Jscrollpane 插件显示的问题。

```
 $(document).ready(function(){
      handleDialogOpenEvent();

       $("#dialog").dialog({
           resizable: true,          
           height: "300",     
           width: "400",    
           autoOpen: false,         
           modal: true,
           position: "center"

 });

    }

      function handleDialogOpenEvent(){
 $( "#dialog" ).bind( "dialogopen", function(event, ui) {
     $(".scrollpane").jScrollPane({'showArrows': true });

 }); 
```

}

我不知道如何将垂直滚动窗格位置更正到表格的右侧，垂直滚动窗格始终显示在对话框标题旁边的顶部，并且每次对话框弹出对话框的形状更改例如：小高度所以我需要调整大小对话框。

# sql-server-2008 - 设置环境 Sql server 2008 R2, BIDS, 需要样本

> ID：12749380
> 
> 赞同：0
> 
> 时间：2012-10-05T15:26:18.360
> 
> 标签：sql-server-2008, business-intelligence, bids

我已经安装了 64 位 SQL Server 2008 R2 SP3 express edition 和 Advanced Services for BIDS。按照电子书教程，我需要一个 SQL Server AdventureWorksDW 2008 R2 示例数据库作为构建 SSAS 多维数据集的基础”。

我应该在“C:\Program Files\Microsoft SQL Server\100\Tools\”中安装后找到“样本”，但我在这个目录中是“binn”。我需要单独下载这些文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:46:16.730

这些示例现在可以从 Codeplex单独[下载。](http://msftdbprodsamples.codeplex.com/)

# android - ANDROID NDK - android：找不到命令

> ID：12749382
> 
> 赞同：6
> 
> 时间：2012-10-05T15:26:20.133
> 
> 标签：android, path, android-ndk, cygwin

我试图通过 Android NDK 中提供的第一个示例练习。我试图在 cygwin 上运行以下命令

```
android update project –p 
```

但是，我得到了 `android: command not found error`。

我检查了我的 PATH 变量。它已经有`ANDROID_HOME`, `ANDROID_HOME/platforms`, `ANDROID_HOME/tools`,`ANDROID_HOME/platform-tools`

我注意到的一件事是`no application named android`任何文件夹中都有。有只是`an executable JAR file named android`。可以吗，或者，这是我的错误？

我的 PATH 值应要求添加

```
bin:/cygdrive/c/Program Files/Java/jdk1.7.0_03/bin:/cygdrive/c/Program Files/Java/jdk1.7.0_03/include:/cygdrive/c/Ant2/bin:/cygdrive/c/Android/android-sdk/tools:/cygdrive/c/Android/android-sdk/platform-tools:/cygdrive/c/android-ndk/android-ndk-r8b:/cygdrive/c/Program Files/Java/jdk1.7.0_03/lib:/cygdrive/c/Android/android-sdk/platforms:/cygdrive/c/Program Files/Java/jdk1.7.0_03/bin:/usr/lib/lapack 
```

谁能预测我错过了什么？

谢谢 ：）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T19:41:07.013

采用：

```
$ android.bat update project --path . 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T15:52:45.060

您的方法存在错误：

*   你不需要 Cygwin，你不应该将它与最新的 NDK 或 SDK 一起使用（并且可能永远不会，在任何情况下），因为它们是为 Windows 分发的，它们应该在 Windows 环境中工作，而不是在 Cygwin 下工作；这是一种用于真正旧版本的 Android NDK ( Cygwin ) 的方法，但不适用于最新版本。
*   Android SDK 需要 JDK **6**而不是**7**

假设您将修复此错误，您仍然缺少的部分是：

*   下载官方 SDK 后，您必须至少运行一次管理器，下载平台工具和至少 1 个平台，android 可执行文件通常包含在`tools`SDK 根目录下的目录中
*   您的 android 命令不正确，即使正确安装了 android 也无法正常工作，这是所有可能的正确版本`android update project –p . -t android-10`
*   严格来说，Android与jar文件无关，jar文件是开发者用来添加功能的容器，可以看成是库，但是Android并不关心jar文件，apk文件只需要包含`.dex`文件，文件用于达尔维克虚拟机

此`android ...`命令用于将构建设置更新为特定路径和目标，之后如果源代码编写良好且组织良好，您应该至少具有生成 apk 的最低配置。

如果应用程序仅用 Java 编写，此时您只需要构建 apk，您可以使用 Eclipse 之类的 IDE 或`ant`仅执行`ant debug`或`ant release`从项目的根目录执行此操作。

如果一切正常，您将在您的`<project root>/bin`文件夹中找到该 apk。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-01T20:28:02.537

```
C:\Users\Iuliia\AppData\Local\Android\android-sdk\tools\android.bat update project --path . 
```

是相同的

```
android update project –p 
```

如果你还没有`android`在你的 PATH 中。不要忘记提供通往 Android SDK 的路径。

# wpf - 带有图像和文本的 WPF 自定义按钮在文本块上不可点击

> ID：12749383
> 
> 赞同：2
> 
> 时间：2012-10-05T15:26:20.297
> 
> 标签：wpf

我有一个自定义按钮，其中包括一个股票代码和一个图像。当我想单击按钮时，除了 onMouseover 之外，一切都完全按照我的需要工作。如果我将鼠标悬停在不包含文本框的按钮（包括图像）的任何部分上，则整个按钮（光标手）会显示。因此，单击股票代码（十字准线不显示手形光标）不会执行我的命令。我错过了一些愚蠢的东西，我只是不能把手指放在上面。任何帮助将不胜感激。这是来自我的资源字典：

```
<Style x:Key="TickerButtonStyle2" TargetType="{x:Type Controls:DataGridCell}">
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="BorderBrush" Value="Transparent" />
        <Setter Property="Background"  Value="Transparent" />
        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        <Setter Property="VerticalContentAlignment" Value="Stretch"/>
        <Setter Property="ContentTemplate">
            <Setter.Value>
                <DataTemplate>
                    <Button>
                        <Button.Resources>
                            <Style TargetType="Button">
                                <Setter Property="Command" Value="{Binding SwitchViewCommand, 
                                        RelativeSource={RelativeSource FindAncestor,      
                                        AncestorType={x:Type local:MainView}}}" />
                                <Setter Property="CommandParameter" Value="{Binding Ticker}"/>
                                <Setter Property="Cursor" Value="Hand"/>
                                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                <Setter Property="VerticalContentAlignment" Value="Stretch"/>
                                <Setter Property="Background"  Value="Transparent" />
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border Name="bd" BorderBrush="Transparent"
                                                              BorderThickness="0"
                                                              Margin="0"
                                                              Background="Transparent">
                                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Left" Background="Transparent">
                                                    <TextBox Name="txt" IsReadOnly="True" 
                                                         BorderThickness="0"
                                                         BorderBrush="Transparent"
                                                         Background="Transparent"
                                                         TextAlignment="Left"
                                                         Foreground="White"
                                                         FontFamily="Ariel" 
                                                         FontSize="12"
                                                         Text="{Binding Path=Ticker, Converter={StaticResource tickerSymbolDisplay}}"
                                                         />
                                                    <Image Width="16" Height="11" Stretch="Fill" Source="{Binding Path=Ticker, Converter={StaticResource tickerImageDisplay}}" />
                                                </StackPanel>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="true">
                                                    <Setter TargetName="bd" Property="Background" Value="Transparent"/>
                                                    <Setter TargetName="txt" Property="Foreground" Value="#FF7E00"/>
                                                    <Setter Property="ToolTip" Value="View Fundamentals"/>
                                                </Trigger>
                                                <Trigger Property="Button.IsPressed" Value="true">
                                                    <Setter TargetName="bd" Property="Background" Value="Transparent"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Resources>
                    </Button>
                </DataTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:40:50.340

尝试使用 TextBlock 而不是 TextBox：

```
<TextBlock Name="txt"
Background="Transparent" 
TextAlignment="Left"
Foreground="White"
FontFamily="Ariel" 
FontSize="12"
Text="ticker"
Text="{Binding Path=Ticker, Converter={StaticResource tickerSymbolDisplay}}"
/> 
```

# asp.net-mvc - 部署后asp .net mvc应用程序的ajax响应中出现404状态错误

> ID：12749390
> 
> 赞同：1
> 
> 时间：2012-10-05T15:26:37.663
> 
> 标签：asp.net-mvc, jquery, http-status-code-404, web-deployment

部署后asp .net mvc项目中ajax响应出现“找不到页面”错误。当我调试一切正常时，ajax 工作正常 ajax 函数在下面，调试时工作正常。服务器是IIS6；是关于服务器中的一些权限还是其他什么？

在视图中：

```
@Html.Hidden("url_Prefix", Url.Action("SinavSonuc", "Sonuc")) 
```

在 Javascript 中：

```
var veri = { 'tcNo': $('input#tcNo').val(), 'evrakSayi': $('input#evrakSayi').val() };
var _url = $('input#url_Prefix').val();

$.ajax({
    url: _url,
    type: 'POST',
    data: veri,
    success: function (result) {
        ...
    },
    error: function (error, textstatus) {
        var errorAlert = JSON.stringify(error);
        alert(errorAlert);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:44:32.790

我解决了这个问题。原因是在 iis6 部署时，在“C:\WINDOWS\microsoft.net\Framework64\v4.0.30319\aspnet_isapi.dll”的通配符应用程序映射插入中检查了“验证该文件是否存在”选项。我未选中“验证该文件是否存在”选项，并且 ajax 可以完美运行。

# c# - 逐行比较/搜索文本文件 搜索特定单词

> ID：12749394
> 
> 赞同：1
> 
> 时间：2012-10-05T15:26:45.603
> 
> 标签：c#, text, compare

嗨我的朋友们:)

所以我有一个小问题，我有一个包含以下内容的文本文件，我来自电子邮件脚本。

```
Email: usera@hotmail.com
Status: done
Lang: En
Date: 05-10-2012
--------------------------------
Email: userb@hotmail.com
Status: waiting
Lang: En
Date: 05-10-2012 
```

好的，现在我将阅读此文本文件并在 Richtextbox 中仅写入电子邮件和状态。像这样

```
usera@hotmail.com;done
userb@hotmail.com;waiting 
```

只有状态和电子邮件应该在以“;”分隔的 Richtextbox 中 其他文本（ Lang ， Date）可以忽略。

我的想法是阅读流中的文本文件并尝试使用 Foreach fuc 查找“电子邮件”和“状态”，然后在 Richbox 中打印，但我认为这不是一个好方法。所以我问你让这成为可能的最好方法是什么？

我的测试代码

```
string[] filea = File.ReadAllLines("test.txt");
        foreach (var s in filea)
        {
            if (s.Contains("Email"))
            {

              richTextBox1.AppendText(s + Environment.NewLine);
           }

        } 
```

但是我如何也进入“状态”？提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:39:19.673

要获得请求的输出，您需要拆分每一行，然后只抓取您想要的部分：

```
string[] filea = File.ReadAllLines("test.txt");
foreach (var s in filea)
{
    string[] parts = s.Split(':');

    if (parts.Length == 2)
    {
        if (parts[0].Contains("Email"))
            richTextBox1.AppendText(parts[1].Trim());

        if (parts[0].Contains("Status"))
            richTextBox1.AppendText(":" + parts[1].Trim() + Environment.NewLine);
    }
} 
```

# python - 使用比较器函数进行排序

> ID：12749398
> 
> 赞同：50
> 
> 时间：2012-10-05T15:26:51.340
> 
> 标签：python, sorting, comparator

所以我正在使用一些预先存在的比较器来比较两个元组中的某些值，如果第一个大于第二个，则返回 true，否则返回 false。这是其中之一的代码：

```
def cmpValue(subInfo1, subInfo2):
    """
    Returns True if value in (value, work) tuple subInfo1 is GREATER than
    value in (value, work) tuple in subInfo2
    """
    # TODO...
    if subInfo1[0] > subInfo2[0]:
        return True
    else:
        return False 
```

现在，我有一个字典，其中包含许多上面比较类型的元组条目。我想以相反的顺序对它们进行排序，但我真的不明白我将如何做到这一点。我在想类似的事情：

```
sortedDict = sorted(subjects, key=comparator, reverse = True) 
```

但我不知道将什么传递给比较器，因为每个比较器都有两个参数（subInfo1，subInfo2）。*我无法更改比较器功能。*

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-05T15:31:42.157

您将比较器作为`key`函数传递。你应该将它作为`cmp`, 包裹在某种函数中，将它变成一个适当的比较器。

```
def make_comparator(less_than):
    def compare(x, y):
        if less_than(x, y):
            return -1
        elif less_than(y, x):
            return 1
        else:
            return 0
    return compare

sortedDict = sorted(subjects, cmp=make_comparator(cmpValue), reverse=True) 
```

（虽然实际上，您应该使用关键功能：

```
sorted(subjects, operator.itemgetter(0), reverse=True) 
```

另请注意，它`sortedDict`实际上不是 a `dict`，因此名称相当混乱。）

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2020-02-10T21:56:24.950

在 Python 3 中，函数没有`cmp`参数`sorted`（也没有 for `list.sort`）。

[根据文档](https://docs.python.org/3/library/functions.html#sorted)，签名现在是`sorted(iterable, *, key=None, reverse=False)`，所以你必须使用一个`key`函数来进行自定义排序。文档建议：

> 用于`functools.cmp_to_key()`将旧式*cmp*函数转换为*键*函数。

这是一个例子：

```
>>> def compare(x, y):
...     return x[0] - y[0]
... 
>>> data = [(4, None), (3, None), (2, None), (1, None)]
>>> from functools import cmp_to_key
>>> sorted(data, key=cmp_to_key(compare))
[(1, None), (2, None), (3, None), (4, None)] 
```

但是，您的函数也不符合旧的`cmp`函数协议，因为它返回`True`or `False`。对于您的具体情况，您可以执行以下操作：

```
>>> your_key = cmp_to_key(make_comparator(cmpValue))
>>> sorted(data, key=your_key)
[(1, None), (2, None), (3, None), (4, None)] 
```

使用[@Fred Foo 的答案](https://stackoverflow.com/a/12749495/12299000)`make_comparator`中的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-23T00:39:57.070

[@kaya3](https://stackoverflow.com/a/60159044/1028772)的答案是正确的。我只是提出另一种实现，我们可以在其中使用布尔值作为比较器。

```
class YourTupleComparator(tuple):
    def __lt__(self, other):
        return self[0] < other[0]

sorted(subjects, key=YourTupleComparator) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2022-02-20T12:02:24.137

我们现在可以使用它对二维数组进行排序：

```
A.sort(key=lambda a: (a[0], -a[1])) 
```

这将按 A[0] 的升序和 A[1] 的降序对二维数组进行排序。

# asp.net-mvc-4 - jQuery验证全球化MVC 4日期时间

> ID：12749406
> 
> 赞同：4
> 
> 时间：2012-10-05T15:27:25.850
> 
> 标签：asp.net-mvc-4, jquery-validate, datetime-format, jquery-globalization

在我的课堂上，我有财产：

```
public virtual DateTime Date { get; set; } 
```

默认情况下呈现“31/12/2012 12:00:00 AM”，文化设置为“en-CA”，如果文化为“en-US”，则呈现“12/31/2012 12:00:00 AM” .

JQuery 验证在“en-US”中运行良好，但在“en-CA”中抱怨“字段日期必须是日期”。

我认为解决方案是使用 JQuery Globalization 库。我只是不知道如何为这个[“通用日期长时间（“G”）格式说明符”](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx#GeneralDateLongTime) ASP.Net 呈现。有任何想法吗？

![字段日期必须是日期](../Images/ddc5505b0f2387a2c5375cf7a6fc97ca.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:40:45.967

[通用长时间 ("G")](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx#GeneralDateLongTime)格式说明符格式说明符“表示短日期 ("d") 和长时间 ("T") 模式的组合，由空格分隔”。

虽然没有等效的格式说明符（[jQuery Globalize Date Formatting](https://github.com/jquery/globalize#date-formatting)），但可以通过以下方式完成相同的格式（为了清晰起见详细说明）：

```
var shortDate = $.format(@Model.Date, "d");  //Get the short date  ...M/d/yyyy
var longTime = $.format(@Model.Date, "T");  //Get the long time...h:mm:ss tt  
var date = shortDate + " " + longTime;  //concat the two together. 
```

# c# - 在 BeforeClose 事件期间保存 Word 文档时，并不总是触发关闭事件

> ID：12749411
> 
> 赞同：3
> 
> 时间：2012-10-05T15:27:47.147
> 
> 标签：c#, ms-word, vsto, add-in

`VSTO`我有一个使用and的 Microsoft Word 插件`c#`。

对于每个文档，我使用文档 ShutDown 事件来清理我的父对象，并使用 BeforeClose 事件来预先验证我的父对象。我的验证需要保存文档并尝试在 BeforeClose 事件中执行此操作。

如果该文档以前从未保存过，则会出现“另存为”对话框。如果用户单击取消，`COMException`则会抛出一个并且我正确地抓住了它。然后会`Save/Don't Save/Cancel`出现对话框（通常会显示即将关闭但未保存更改的文档）。如果用户从第一个“另存为”对话框保存或从第二个保存对话框保存，`ShutDown`则正确触发事件。**但是，如果用户在第二个对话框中单击“不保存”，则不会触发 ShutDown 事件。**

```
private void WordDocument_BeforeClose(object sender, System.ComponentModel.CancelEventArgs e)
{
  try
  {
    this.WordDocument.Save();
  }
  catch (System.Runtime.InteropServices.COMException a)
  {
    log.Error(a.Message);
  }
}

private void WordDocument_Shutdown(Object sender, EventArgs e)
{
  // Parent cleanup.
} 
```

# javascript - 使用 API-Easy JS 进行递归调用

> ID：12749412
> 
> 赞同：3
> 
> 时间：2012-10-05T15:27:51.393
> 
> 标签：javascript, node.js

我正在尝试使用[API-easy](https://github.com/flatiron/api-easy)设置 API 测试，但我无法测试我需要使用从一个调用中恢复的参数并将它们发送到另一个调用中的情况。有人有这方面的例子吗？我知道这应该很简单，我只是无法弄清楚。

```
var APIeasy = require('api-easy'),
    assert  = require('assert');

var _id_user;

var suite = APIeasy.describe('Test User');
suite.use('localhost', 3000)
     .discuss('Test')
     .setHeader('Content-Type', 'application/x-www-form-urlencoded')
      .post('/user/authenticate', {data: '{"email":"emailuser@email.com","password":"123456"}')
        .expect('should respond with ID user', function (err, res, body) {
            _id_user = body;    //  I need this result to be sent in the next call .post()
        }).next()
      .post('/user/validate',{ data : _id_user}) // this result always comes null 
        .expect('should respond TRUE', function (_err, _res, _body) {
 }).export(module); 
```

如何在 _id_user 中获得此结果并将调用发送到 .post() 谢谢

# javascript - 未调用函数 - 尝试了 JavaScript 和 JQuery

> ID：12749414
> 
> 赞同：0
> 
> 时间：2012-10-05T15:27:54.933
> 
> 标签：javascript, function, jsp, analytics

我正在尝试从 Google Analytics 标记中删除特殊字符。我有以下脚本，但我不知道为什么它不起作用。它是 JSP 和 JavaScript 的混合体，我对此知之甚少！在工作学习...

```
 <script type="text/javascript">
                function removeSplChars(inStr) {
                inStr = inStr.replace(/[^a-zA-Z0-9 ]/g, "");
                return inStr;
                }
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', '<c:out value="${profileId}"/>']);
                <c:choose>
                <c:when test="${(lastCmdName eq 'CategoryDisplay') or (lastCmdName eq 'ProductDisplay')}" >
                _gaq.push(['_setCustomVar',
                2, // This custom var is set to slot #2.
                '<c:choose><c:when test="${WCParam.source eq 'search'}">Search</c:when><c:otherwise><c:out value="${topCat}" /></c:otherwise></c:choose>', // The top-level name for your online content categories.
                '<c:choose><c:when test="${WCParam.source eq 'search'}">Search <c:out value="${WCParam.searchTerm}" /></c:when><c:otherwise><c:out value="${topCat}" />|<c:out value="${subCatA}" />|<c:out value="${subCatB}" />|<c:out value="${subCatC}" /></c:otherwise></c:choose>', // Records value of breadcrumb name
                3 // Sets the scope to page-level.
                ]); 
                </c:when>
                <c:otherwise>
                </c:otherwise>
                </c:choose>
                removeSplChars(<c:out value="${topCat}" />, <c:out value="${subCatA}" />, <c:out value="${subCatB}" />, <c:out value="${subCatC}" />);
                 _gaq.push(['_trackPageview']);
                (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
                </script> 
```

我是否在某处遗漏了一些 () 或某些东西？我得到一个“意外的令牌；” 控制台中的错误消息。我尝试在 $(document).ready(function() {}); 中调用 removeSplChars

无济于事。

我检查了以下帖子，但建议对我没有帮助： [未调用](https://stackoverflow.com/questions/7131514/function-is-not-called) [函数 javascript 函数未被调用](https://stackoverflow.com/questions/8161188/javascript-function-not-getting-called)

我在这里有另一篇文章：[JavaScript Remove special characters string not working](https://stackoverflow.com/questions/12747470/javascript-remove-special-characters-string-not-working)

谢谢你。

通过查看源代码添加代码：

```
 <script type="text/javascript">
                function removeSplChars(inStr) {
                inStr = inStr.replace(/[^a-zA-Z0-9 ]/g, "");
                return inStr;
                }       
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-33021136-1']);

                _gaq.push(['_setCustomVar',
                2, // This custom var is set to slot #2.
                'Dine &amp; Entertain', // The top-level name for your online content categories.
                'Dine &amp; Entertain|Bowls &amp; Platters||', // Records value of breadcrumb name
                3 // Sets the scope to page-level.
                ]); 

                $(document).ready(function() {
                removeSplChars(Dine &amp; Entertain, Bowls &amp; Platters, , );
                });
                _gaq.push(['_trackPageview']);

                (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();

                </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:59:10.957

传递给您的字符串`removeSplChars`未用引号引起来，因此您会收到错误。如果可以的话，在对它们进行 JSON 编码后传递变量会更可靠。或者，你可以把`"`它放在一边并希望最好（如果你已经在输入中编码`"`，`&quot;`它应该可以正常工作）。

此外，这将解决您在使用空参数时遇到的问题：空字符串将作为参数传递。

# sql - Oracle 数据库安装版本对按功能分组执行更严格的 SQL 规则

> ID：12749419
> 
> 赞同：1
> 
> 时间：2012-10-05T15:28:01.950
> 
> 标签：sql, oracle, oracle10g, oracle11g

最近，我将 Oracle 数据库从一台机器复制到另一台机器。

1.  **原文**：Oracle Database 10g Enterprise Edition Release 10.2.0.3.0
2.  **副本**：Oracle 数据库 11g 快捷版 11.2.0.2.0 版 - 生产 由于某种原因，以下查询适用于原始版本，但不适用于副本。

如果 t.tdt_id 被查询工作取代组中的 tdt_id （根据 td_tablespaces t ）

有人可以解释为什么会这样，以及它是否与安装有关。两者的数据完全相同。

```
SELECT
    tdt_name as "name", 
    tdt_contents as "Content",         
    tdt_status as "Status",         
    round(( subsize.SubSize_MB ), 2 ) as "size used",         
    round(( sum( MaxMB ) - subsize.SubSize_MB ), 2 ) as "size free" 
FROM    
    td_tablespaces t 
INNER JOIN        
    (
        SELECT 
            tdt_id,
            CASE 
                 WHEN upper( d.df_autoextend ) = 'YES' THEN  round(( sum( df_maxsize ) / 1024 ), 2 )  
                 WHEN upper( d.df_autoextend ) = 'NO' THEN round(( Sum( df_size ) / 1024 ), 2 )                 
            END as MaxMB
        FROM    
            td_datafiles d         
        GROUP BY 
            tdt_id,                 
            d.df_autoextend,                 
            df_maxsize,                 
            df_size         
    ) sub 
ON      
    t.tdt_id = sub.tdt_id 
INNER JOIN        
    (
        SELECT 
            tdt_id,                 
            sum( df_size / 1024 ) -( df_free / 1024 ) SubSize_MB,                 
        df_free      / 1024 SubSize_Free         
        FROM    
            td_datafiles df         
        GROUP BY 
            tdt_id,                 
            df_free         
    ) subsize 
ON 
    t.tdt_id = subsize.tdt_id 
WHERE 
    ins_id   = 2096 
GROUP BY 
    tdt_id,         
    tdt_name,         
    tdt_contents,        
    tdt_status,         
    subsize.SubSize_MB,         
    SubSize_Free 
ORDER BY tdt_contents 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:33:02.037

我不认为这是“更严格的规则”，我认为这是改进查询优化的副作用。在 oracle 11 中，优化器可能会尝试`group by`在某些连接之前执行操作，以最小化连接的行数。

有关详细信息，请参见此处的第 19-20 页[http://www.oracle.com/technetwork/database/bi-datawarehousing/twp-upgrading-10g-to-11g-what-to-ex-133707.pdf](http://www.oracle.com/technetwork/database/bi-datawarehousing/twp-upgrading-10g-to-11g-what-to-ex-133707.pdf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T15:49:35.763

Oracle 在查询中引用列时强制执行严格的规则，`ORA-00918: column ambiguously defined`如果在两个表中找到列并且在没有表前缀或别名的情况下引用列，则会引发。

由于在和`tdt_id`中都定义了，因此您无法在没有别名或表名的情况下调用：`t``subsize``tdt_id`

*   `SELECT`条款_
*   `WHERE`条款_
*   `ORDER BY`条款_

由于某些原因，在 10g 的某些版本中，当列位于`GROUP BY`子句中时不会引发错误。这与语法解析的其余部分不一致，这可能导致结果不明确，并且必须被归类为错误。这已在 11g 中得到纠正。

# c# - 无法加载文件或程序集 {此处的程序集名称} 或其依赖项之一。访问被拒绝

> ID：12749420
> 
> 赞同：4
> 
> 时间：2012-10-05T15:28:06.670
> 
> 标签：c#, asp.net, iis-7.5, ajaxcontroltoolkit, web-administration

因此，有时我们的 Web 服务器（Windows Server 2008、IIS 7.5）会在我们拥有的非常古老的 .net 2.0ish asp.net/classic asp 网站上随机出现此错误。

通常一个 IIS 重置会解决这个问题，但是这个问题现在开始影响我们的生产服务器（不能真正 IIS 在一天中重置这些），而且它似乎也更频繁地发生在其他任何地方。

所以我一直在寻找可能的解决方案来解决这个问题，但似乎到处都出现的唯一一个问题是，如果我授予 NETWORKSERVICE/IIS_WPG 对临时 asp.net 文件的完全控制权，它应该可以自行修复。最后我检查了一下，这并不是一个好主意，因为您真的不希望您的 Web 应用程序完全控制任何东西（尤其是不在生产 Web 服务器上）。

对此问题的任何指导将不胜感激。

谢谢，亚历克斯

## 示例错误：

“/”应用程序中的服务器错误。

无法加载文件或程序集“Csla.Extension”或其依赖项之一。访问被拒绝。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.IO.FileLoadException：无法加载文件或程序集“Csla.Extension”或其依赖项之一。访问被拒绝。

* * *

无法加载文件或程序集“AjaxControlToolKit”或其依赖项之一。访问被拒绝。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.IO.FileLoadException：无法加载文件或程序集“AjaxControlToolKit”或其依赖项之一。访问被拒绝。

源错误：[没有相关的源行]

源文件：

## c:\Windows\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\root\2794b922\App_Web_search.aspx.cdcab7d2.jqmd63vs.0.cs

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:35:24.727

我认为您的问题在于 IIS，关于它对文件夹（例如项目文件夹）的权限。因此，请检查您的应用程序在哪个应用程序池中。这样您就可以为该池中的帐户授予适当的权限。默认情况下，在 IIS7 中，该帐户是 NETWORK SERVICE。

然后，您基本上会转到相关文件夹并允许读/写访问或任何需要的帐户。

# c# - Linq 的 Intersect 不调用 GetHashCode

> ID：12749430
> 
> 赞同：0
> 
> 时间：2012-10-05T15:28:43.940
> 
> 标签：c#, linq

```
var resultList = list1.Intersect<XElement>(list2, new XElementComparer()); 
```

为什么我的 XElementComparer 的 GetHashCode 方法从未被调用？

当我检查 resultList 的内容时，我看到：

```
System.Exeception object to set to an instance of an object 
```

我的两个列表都有 XElements。我错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:38:30.767

`Intersect`扩展方法返回一个，但在`IEnumerable<>`您开始枚举它之前并不实际执行交集（例如，做一个`foreach`，调用`.ToList()`等）。因此，我不希望根据您提供的代码段调用比较器上的任何方法，因为您没有枚举结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:48:19.073

我敢打赌它正在调用您的实现，`GetHashCode` *并且*该实现（或`Equals`）正在抛出 NullReferenceException。**我们能够真正回答您的问题的唯一方法是让您包含`XElementComparer`.**

我运行了一个快速测试，产生了这个输出：

> 等于计数 = 1；GetHashCode 计数 = 6

```
[Test]
public void X()
{
    var list1 = new List<Alpha> {new Alpha {Bravo = 1}, new Alpha {Bravo = 1}, new Alpha {Bravo = 2}};
    var list2 = new List<Alpha> { new Alpha { Bravo = 1 }, new Alpha { Bravo = 3 }, new Alpha { Bravo = 5 } };

    var alphaComparer = new AlphaComparer();

    Assert.AreEqual(1, list1.Intersect(list2, alphaComparer).Count());
    Console.WriteLine("Equals count = {0}; GetHashCode count = {1}", alphaComparer.EqualsCallCount, alphaComparer.GetHashCodeCallCount);
}

class Alpha
{
    public int Bravo { get; set; }
}

class AlphaComparer : IEqualityComparer<Alpha>
{
    public int EqualsCallCount { get; private set; }
    public int GetHashCodeCallCount { get; private set; }

    public bool Equals(Alpha x, Alpha y)
    {
        EqualsCallCount += 1;
        return x.Bravo.Equals(y.Bravo);
    }

    public int GetHashCode(Alpha obj)
    {
        GetHashCodeCallCount += 1;
        return obj.Bravo.GetHashCode();
    } 
```

# mysql - MySQL：选择具有特定参赛作品数量的用户数量

> ID：12749432
> 
> 赞同：0
> 
> 时间：2012-10-05T15:28:50.303
> 
> 标签：mysql

我有这三个（简化的）表格用于竞赛应用程序：

```
**user**
user_id    

**contest**
contest_id

**contest_entry**
contest_id
user_id 
```

有几个竞赛，每个用户可以参加每个竞赛一次（创建一个竞赛条目记录）。

到目前为止已经有 5 场比赛，所以我想计算有多少用户参加了 0、1、2、3、4 或 5 场比赛。我正在寻找的格式示例如下：

```
num_contests_entered      num_users
0                         102
1                         87
2                         345
3                         254
4                         567
5                         489 
```

我完全不知道实现这一目标所需的 SQL，因此非常感谢任何帮助！

最好的，克里斯

**编辑**：为了澄清，我正在寻找的一个例子是

```
102 users entered 0 contests
87 users entered 1 contest
345 users entered 2 contests 
```

ETC..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:54:24.763

你可以写：

```
SELECT num_contests_entered,
       COUNT(1) num_users
  FROM ( SELECT COUNT(ce.contest_id) num_contests_entered
           FROM user u
           LEFT
          OUTER
           JOIN contest_entry ce
             ON ce.user_id = u.user_id
          GROUP
             BY u.user_id
       ) t
 GROUP
    BY num_contests_entered
 ORDER
    BY num_contests_entered
; 
```

子查询为每个用户找到他们参加了多少场比赛；外部查询按该计数对用户进行分组，从而确定参加这么多比赛的用户数量。

（免责声明：未经测试。）

# regex - 运行groovy时Windows CMD的奇怪行为

> ID：12749433
> 
> 赞同：5
> 
> 时间：2012-10-05T15:28:57.617
> 
> 标签：regex, windows, groovy, cmd

我有一个 groovy 脚本，可以重命名与正则表达式匹配的文件我以这种方式启动它

```
C:\>groovy rename test.* test.txt 
```

它工作正常。

但是当我尝试通过这个正则表达式时：

```
C:\>groovy rename test\.(.*) $1_TEST_$1 
```

命令行返回一条消息：

`The syntax of the command is incorrect`

这不是我的剧本——它 `cmd`是写这个的。我的脚本甚至从未运行过。即使我将参数（正则表达式）用引号括起来，它也会发生。

**问：**为什么？如何将任何正则表达式作为参数传递？

* * *

由于没有人知道发生了什么，我做了一个更简单的例子：

**test.groovy**

```
println args[0] 
```

我运行它：`groovy test Bob`结果不出所料地是`Bob`. 但是当我跑步时，`groovy test .*`我得到了`The syntax of the command is incorrect`。当我运行它时`groovy test *`，会出现一个 pdf 文件的名称（恰好与 位于同一目录中`test.groovy`）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T21:22:42.690

好的，这似乎是`startgroovy.bat`批处理文件中的错误。错误发生在这里：

```
rem remove the leading space we'll add the first time
if "x%_ARG:~0,1%" == "x " set _ARG=%_ARG:~1% 
```

但问题是之前的几行：

```
rem remove quotes around first arg
for %%i in (%1) do set _ARG=%_ARG% %%~i 
```

如果参数包含通配符，这将无法按预期工作。由于通配符成功匹配，某些情况（包括单个星号）在脚本的较早部分和其他类型的工作中得到解决；在这种情况下，您不会收到错误消息，但匹配的文件会传递给 Groovy 脚本而不是通配符。在某些情况下，通配符会匹配但不匹配，因为解决方法已经破坏了它。

据我所知，其目的是不处理通配符，因此修复很简单：

```
rem remove quotes around first arg
for /F %%i in (%1) do set _ARG=%_ARG% %%~i 
```

现在它对我有用：

```
H:\>groovy test .*
.* 
```

我本来打算提交一份错误报告，但看起来我必须先在项目网站上注册才能这样做，所以如果你愿意，可以提交一份。

*边注：*

尽管问题是由其中的错误引起的，`startgroovy.bat`但它也暴露了 Windows 批处理器中的错误（或至少是奇怪的行为）；如果变量不存在，环境变量子字符串扩展的行为会很奇怪。上面显示的`if`行在命令行上按预期工作（没有环境变量替换），但是在批处理文件中它被破坏了，结果如下：

```
if "x~0,1_ARG:~1 
```

因此语法错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:22:53.207

检查 groovy 的编译选项。它可能使用通配符编译，这将导致 stdlib 解析器对正则表达式进行通配符扩展。

# php - 使用 zend 视图助手的下拉菜单

> ID：12749434
> 
> 赞同：1
> 
> 时间：2012-10-05T15:29:00.077
> 
> 标签：php, mysql, zend-framework, drop-down-menu

我有一个下拉菜单，使用 zend 视图助手 formSelect() 函数从数据库表中获取所有标志（或称为标签）值，但这些值以数组格式显示。我只需要标志值名称本身。

这是我的视图 phtml 文件中用于显示下拉菜单的代码：

```
<td><?php echo $this->formSelect('flag_id', null, null, $this->aFlags); ?> </td> 
```

标志方法在此类中：

```
class App_Flags extends App {

public $rows = array(iPropertyID);

public function __construct() {
parent::__construct();
}

public function getPropFlags() {
$flag_tcid = 4;

$oSql = new Db_Table_Flags();
$oSelect = $oSql->select();
$oSelect->from(array('f' => 'flags'),array('value' => 'flag_name'));
$oSelect->where('flag_type_category = ?', $flag_tcid);
$rowCount = count($oSelect);

if ($rowCount > 0) {
    echo "found $rowCount rows";
}  else {
    echo 'no rows matched the query';
}

$result = $oSql->fetchAll($oSelect)->toArray();

return $result;

} 
```

下拉菜单显示的值如下：

```
 0 
    flag name 
   1  
    another flag name 
   2  
    flag name again  
   3 
    flag name here 
```

我不希望在下拉列表中显示数组键。我只需要标志名称。似乎 formSelect() 中的第一个参数被忽略了 b/c 它根据这个拉数组：

string formSelect (string|array $name, [mixed $value = null], [array|string $attribs = null], [array $options = null], [string $listsep = "
\n"]) string|array $ name：如果是字符串，则为元素名称。如果是数组，则忽略所有其他参数，并提取数组元素以代替添加的参数。

或者它可能是在 getPropFlags() 中设置查询的方式。我不确定我做错了什么。我一直在看这个一段时间并且没有想法。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:37:31.340

将其更改为：

```
$result = $oSql->fetchAll($oSelect)

$options = array();
foreach($result as $k => $v) {
    $options[$v['f']] => $v['value'];
}

return $options; 
```

做一些 var_dumps 来比较数组。您需要一个简单的键/值对数组。

# android - 可以使用 android 设备浏览器访问 url，但不能在 android 应用程序中访问

> ID：12749435
> 
> 赞同：0
> 
> 时间：2012-10-05T15:29:05.433
> 
> 标签：android, httpurlconnection

这似乎是一个奇怪的问题。我有从浏览器工作的 url，但我试图使用相同的 url 通过 android 应用程序发布数据，导致“java.net.UnknownHostException”。我能够从虚拟设备连接并发布到 url。我在这个网站上提出了所有建议，但没有任何结果，非常感谢 ant 帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:31:50.563

我想你忘了给你的 App Internet 权限。只需将其添加到您的清单中：

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

# sql - oracle 11g中的编译过程

> ID：12749438
> 
> 赞同：2
> 
> 时间：2012-10-05T15:29:21.100
> 
> 标签：sql, oracle, procedure, squirrel-sql

我用客户端松鼠在 oracle 11g 中创建了一个简单的程序，这是代码

```
create or replace procedure EXAMPLE_P is
begin
    1+2;
end;/ 
```

在执行时我收到了这个警告

```
Warning:   Warning: execution completed with warning
SQLState:  99999
ErrorCode: 17110
Position: 0

Query 1 of 1, Rows read: 0, Elapsed time (seconds) - Total: 0.031, SQL query: 0.031, Building output: 0 
```

这里的问题，我不能调用我的程序。

```
begin
    EXAMPLE_P();
end;/ 
```

执行上面的块时出现此错误。

```
Error: ORA-06550: line 2, column 9:
PLS-00302: component 'EXAMPLE_P' must be declared
ORA-06550: line 2, column 2:
PL/SQL: Statement ignored

SQLState:  65000
ErrorCode: 6550
Position: 37 
```

该过程存在于表 ALL_OBJECTS 中，状态为 INVALID。我试图编译它（验证状态），但我不会使用下面的查询

```
alter procedure EXAMPLE_P COMPILE; 
```

SomeOne 知道我可以做些什么来调用我的过程，（我使用 PL/SQL 开发人员并且从未遇到过这个问题）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:40:54.943

你不能调用你的过程，因为你没有*创建*它。您没有创建它，因为您没有`1 + 2`. 您必须声明一个变量才能将其放入。您也有`/`错误的地方。

比较这两者的区别：

```
SQL> create or replace procedure EXAMPLE_P is
  2  begin
  3      1+2;
  4  end;/
  5  /

Warning: Procedure created with compilation errors.

SQL> create or replace procedure EXAMPLE_P is
  2    i number; -- Declare a variable
  3  begin
  4      i := 1 + 2; -- assign something to the variable.
  5  end;
  6  /

Procedure created. 
```

然后你错误地调用它。如果您没有参数，则不应包含`()`.

```
SQL> begin
  2     example_p;
  3  end;
  4  /

PL/SQL procedure successfully completed.

SQL> 
```

我尝试在 PL/SQL 开发人员中创建您的过程并收到以下错误；所以，我有点惊讶你从来没有遇到过问题。

> PROCEDURE ALERT.EXAMPLE_P 的编译错误
> 
> 错误：PLS-00103：在预期以下情况之一时遇到符号“1”：
> 
> ```
>  ( begin case declare exit for goto if loop mod null pragma
>    raise return select update while with <an identifier>
>    <a double-quoted delimited-identifier> <a bind variable> <<
>    continue close current delete fetch lock insert open rollback
>    savepoint set sql execute commit forall merge pipe purge
> The symbol "return" was substituted for "1" to continue. Line: 3 Text: 1 + 2; 
> ```

# animation - 谷歌动画 - 他们如何创建 png 精灵

> ID：12749439
> 
> 赞同：0
> 
> 时间：2012-10-05T15:29:23.617
> 
> 标签：animation, sprite

我知道除了谷歌在其动画中使用画布之外，他们使用大 png 精灵并使用 JS 移动它来创建动画。

我还可以看到有诸如[http://spriteme.org/](http://spriteme.org/)之类的工具可以从一堆 png 中创建精灵。

我想知道的是，您首先将如何创建这些 png？我可以想象在 Photoshop 中创建每个精灵会很痛苦。例如，您将无法看到动画沿途的感觉。

再加上保存后对其进行编辑会很痛苦，因为您将拥有一堆 png 或原始的 photoshop 文档，并且需要重新导出单个 png，然后重新绘制它。

这是像 adobe edge 动画这样的工具做繁重工作的地方吗？

一如既往 - 非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:17:31.807

我使用 Flash 制作动画，以 png 格式导出动画，并使用 spritegenerator.exe [http://spritegenerator.codeplex.com/releases/view/52139生成精灵](http://spritegenerator.codeplex.com/releases/view/52139)

# wcf - 带有 Mono 的 WCF - 服务客户端在 Windows 中工作，但在 CentOS 中不工作

> ID：12749446
> 
> 赞同：1
> 
> 时间：2012-10-05T15:29:33.550
> 
> 标签：wcf, mono

我创建了一个简单的服务，只是为了在 Cent OS 中尝试 WCF。我在 Windows 中使用 MonoDevelop 创建了服务客户端，它运行良好。当我尝试在 CentO 上运行它（使用相同的配置文件）时，它会在构建客户端时引发错误，我在这里跟踪它：

```
 ExtensionElementCollection extensions = ((ExtensionsSection) EvaluationContext.GetSection ("system.serviceModel/extensions")).BindingExtensions;
                for (int i = 0; i < extensions.Count; i++) {
                    ExtensionElement extension = extensions [i];
                    _properties.Add (new ConfigurationProperty (extension.Name, Type.GetType (extension.Type), null, null, null, ConfigurationPropertyOptions.None));
                } 
```

在 System.ServiceModel.Configuration.BindingsSection

错误是 ConfigurationProperty 构造函数中的 argumentNullException，类型为 null。因此，EvaluationContext.GetSection ("system.serviceModel/extensions") 中的 Type.GetType 失败了。我在配置文件中没有扩展部分，并且这个相同的客户端在 Windows 中完美运行。任何提示。

这是我的配置文件：

```
<configuration>
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_IPairArithmeticService" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                useDefaultWebProxy="true">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <security mode="None">
                    <transport clientCredentialType="None" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="UserName" algorithmSuite="Default" />
                </security>
            </binding>
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://theIp/AlertService/Services/PairArithmeticService.svc"
            binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IPairArithmeticService"
            contract="ServiceReference1.IPairArithmeticService" name="BasicHttpBinding_IPairArithmeticService" />
    </client>
</system.serviceModel> 
```

# sql - Oracle 比较 varchar2 字段与数字

> ID：12749452
> 
> 赞同：0
> 
> 时间：2012-10-05T15:29:42.800
> 
> 标签：sql, oracle

我有一个查询，其中有以下子查询

`(select account from asl_data where alias_accunt = trim(field) )`

其中 alias_account 是 varchar2(20)，而字段值来自另一个子查询的 substr。然而，值为 00123456789

为此，我收到错误为无效号码。我尝试了 to_char，在这两个字段上强制转换函数。但似乎没有任何效果。

我错过了什么？对此有何建议？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:23:37.363

在此查询/过程中的某处，尝试将字符串隐式转换为数字。可能在您的子查询中，或者可能是因为变量声明是您的变量之一的数字。您发布的示例似乎没有任何问题。

识别字段后，您可以使用这样的查询查看导致此问题的行。

```
with t1 as 
(
    select '100' id1, 'first' name1 from dual
    union all
    select '100A' id1, 'second' name1 from dual
    union all
    select '$$1' id1, 'third' name1 from dual
)
select * from t1

100    first
100A   second
$$1    third 
```

如果您尝试将 id 转换为数字，则第一个将起作用（可能您的示例就是这种情况），但其他会引发错误。

```
with t1 as
(
    select '100' id1, 'first' name1 from dual
    union all
    select '100A' id1, 'second' name1 from dual
    union all
    select '$$1' id1, 'third' name1 from dual
)
select id1,
       name1,
       to_number(id1)
   from t1

/

ERROR:
ORA-01722: invalid number 
```

要识别存在此问题的行，请使用...

```
with t1 as 
(
    select '100' id1, 'first' name1 from dual
    union all
    select '100A' id1, 'second' name1 from dual
    union all
    select '$$1' id1, 'third' name1 from dual
)
select id1, 
       name1
       --,replace( translate( id1, '0123456789', '0000000000' ), '0', '' ),
       --length(replace( translate( id1, '0123456789', '0000000000' ), '0', '' ))
   from t1
   where length(replace( translate( id1, '0123456789', '0000000000' ), '0', '' )
               ) <> 0

id1     name1
---------------
100A    second
$$1     second 
```

# android - 从另一个类调用方法

> ID：12749453
> 
> 赞同：1
> 
> 时间：2012-10-05T15:29:46.883
> 
> 标签：android, class, methods

我已经编写了一些代码，但现在它太长了，我想在一个 java 文件中将它分成不同的类。我可以尝试的总是在启动时应用程序崩溃或找不到源。在这种情况下，一个类上有一个方法，我想在主类中调用它以在 textview 中显示，但出现找不到源错误。

```
package com.valchev.avilight;

import android.app.ListActivity;
import android.os.Bundle;
import android.view.Menu;
import android.widget.TextView;

public class MainActivity extends ListActivity {
public DirShow dirShow = new DirShow();
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    String s = "Blah Blah!";
    dirShow.myDirShow(s);
}

//Settings layer
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
}

class DirShow extends MainActivity {
public void myDirShow(String s) {
    s = "blah!";
    TextView text = new TextView(this);
    text = (TextView)findViewById(R.id.path);
    text.setText(s);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:49:54.467

```
public DirShow dirShow = new DirShow(); 
```

你不能**那样**做。您正在尝试`Activity`自己创建对象。如果你想开始新的`Activity`，你应该使用`Context.startActivity`. [以下](http://developer.android.com/guide/components/fundamentals.html#Components)是有关活动如何工作的更多信息。顺便说一句，您不应该尝试同时开始两项活动。一项活动等于（粗略地说）一个用户界面屏幕。如果你想打开新的用户界面，那么你可以开始新的活动。

我真的没有看到`DirShow`扩展的任何理由`Activity`，如果您真的坚持使用不同的类，您可以将`MainActivity`其作为第二个参数`myDirShow`传递给构造函数或将其传递给构造函数并将其作为成员变量保存在 DirShow 中。也许有更好的方法，但我的 Java 并不是那么好。

# java - 如何在 Java 中同时查询两个 XML 文件？

> ID：12749455
> 
> 赞同：0
> 
> 时间：2012-10-05T15:29:48.973
> 
> 标签：java, android, xml-parsing, android-xml

在我的场景中，我有两个 XML 文件，我想同时查询这些文件。

文件 1，publishers.xml

```
<publishers>
    <publisher pubid="1" name="ABC" />
    <publisher pubid="2" name="RST" />
    <publisher pubid="3" name="XYZ" />
</publishers> 
```

文件 2，books.xml

```
<books>
    <book bkid="1" pubid="1" name="introduction to A" />
    <book bkid="2" pubid="3" name="introduction to B" />
    <book bkid="3" pubid="3" name="introduction to C" />
    <book bkid="4" pubid="2" name="introduction to D" />
</books> 
```

问题：

*   Java/Android 中是否有任何可用的 XML 查询（类似于 LINQ）？
*   **在 JAVA**中，我该怎么做？（我想同时从两个 XML 文件中查询）

    `**SELECT** book **FROM** books.xml **JOIN** publishers.xml **ON** publishers.pubid = books.pubid **AND** bkid = "2"`

让我用“简单”的英文解释一下:)，节点`<book>`是从属性中选择的 books.xml 中的`bkid=2`，同时`<publisher>`从属性中的 publishers.xml 文件中选择的`publishers.pubid=books.pubid`。

期望的输出（已处理）：

```
Book ID: 2
Book Name: introduction to B
Publisher: XYZ 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:22:58.153

这很常见吗？不，不是，但有时是必要的。[我将使用此StackOverflow 答案](https://stackoverflow.com/questions/484192/xquery-multiple-xml-files)中描述的 Xquery 。当然，如果您可以合并文件，它将简化您的问题。

- 编辑 -

由于 Xquery 在 Android 上似乎没有非常可靠的支持，我会考虑一个不同的选项：

1.  将文件合并在一起：您可以将两个流拉下来，将它们连接到新的父节点中，`<root> xml files concat here </root>`然后将此字符串转换为 dom 文档并使用 xpath 解析它。

# php - 选民导致 500 错误而不是 403

> ID：12749457
> 
> 赞同：5
> 
> 时间：2012-10-05T15:30:07.477
> 
> 标签：php, security, symfony, response

如果请求不包含有效的身份验证标头，我创建了一个自定义投票者拒绝访问我的 API。它基于两个食谱条目的组合： http: [//symfony.com/doc/current/cookbook/security/voters.html](http://symfony.com/doc/current/cookbook/security/voters.html)和[http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html)

```
<?php

namespace Acme\RestBundle\Security\Authorization\Voter;

use Symfony\Component\DependencyInjection\ContainerInterface;
use Symfony\Component\Security\Core\Authorization\Voter\VoterInterface;
use Symfony\Component\Security\Core\Authentication\Token\TokenInterface;
use Symfony\Component\Security\Core\Exception\AuthenticationException;
use Symfony\Component\Security\Core\Exception\NonceExpiredException;
use Monolog\Logger;

class ApiClientVoter implements VoterInterface
{
    protected $container;
    protected $nonceCacheDir;

    /**
     * We inject the full service container due to scope issues when
     * injecting the request.
     *
     * @param ContainerInterface $container
     * @param string $nonceCacheDir
     */
    public function __construct(ContainerInterface $container, $nonceCacheDir)
    {
        $this->container     = $container;
        $this->nonceCacheDir = $nonceCacheDir;
    }

    public function supportsAttribute($attribute)
    {
        // we won't check against a user attribute, so we return true
        return true;
    }

    public function supportsClass($class)
    {
        // our voter supports all type of token classes, so we return true
        return true;
    }

    public function vote(TokenInterface $token, $object, array $attributes)
    {
        if ($this->authenticate()) {
            return VoterInterface::ACCESS_ABSTAIN;
        }

        return VoterInterface::ACCESS_DENIED;
    }

    /**
     * Checks for an authentication header in the request and confirms
     * the client is valid.
     *
     * @return bool
     */
    protected function authenticate()
    {
        $request = $this->container->get('request');

        if ($request->headers->has('x-acme-auth')) {

            $authRegex = '/ApiKey="([^"]+)", ApiDigest="([^"]+)", Nonce="([^"]+)", Created="([^"]+)"/';

            if (preg_match($authRegex, $request->headers->get('x-acme-auth'), $matches)) {
                $apiClient = $this->container->get('in_memory_user_provider')->loadUserByUsername($matches[1]);

                if ($apiClient && $this->validateDigest($matches[2], $matches[3], $matches[4], $apiClient->getPassword())) {
                    return true;
                }
            }
        } else {
            $this->container->get('logger')->err('no x-acme-auth header present in request');
        }

        return false;
    }

    /**
     * Performs checks to prevent replay attacks and to validate
     * digest against a known client.
     *
     * @param string $digest
     * @param string $nonce
     * @param string $created
     * @param string $secret
     * @return bool
     * @throws AuthenticationException
     * @throws NonceExpiredException
     */
    protected function validateDigest($digest, $nonce, $created, $secret)
    {
        // Expire timestamp after 5 minutes
        if (time() - strtotime($created) > 300) {
            $this->container->get('logger')->err('Timestamp expired');

            return false;
        }

        if (!is_dir($this->nonceCacheDir)) {
            mkdir($this->nonceCacheDir, 0777, true);
        }

        // Validate nonce is unique within 5 minutes
        if (file_exists($this->nonceCacheDir.'/'.$nonce) && file_get_contents($this->nonceCacheDir.'/'.$nonce) + 300 > time()) {
            $this->container->get('logger')->err('Previously used nonce detected');

            return false;
        }

        file_put_contents($this->nonceCacheDir.'/'.$nonce, time());

        // Validate Secret
        $expected = base64_encode(sha1(base64_decode($nonce).$created.$secret, true));

        return $digest === $expected;
    }
} 
```

我遇到的问题是，当我的选民返回 ACCESS_DENIED 时，当防火墙重定向到身份验证入口点时，我收到 500 错误：

```
[2012-10-05 11:09:16] app.ERROR: no x-acme-auth header present in request [] []
[2012-10-05 11:09:16] event.DEBUG: Notified event "kernel.exception" to listener "Symfony\Component\Security\Http\Firewall\ExceptionListener::onKernelException". [] []
[2012-10-05 11:09:16] security.DEBUG: Access is denied (user is not fully authenticated) by "/home/phil/projects/acme/vendor/symfony/symfony/src/Symfony/Component/Security/Http/Firewall/AccessListener.php" at line 70; redirecting to authentication entry point [] []
[2012-10-05 11:09:16] event.DEBUG: Notified event "kernel.exception" to listener "Symfony\Component\HttpKernel\EventListener\ProfilerListener::onKernelException". [] []
[2012-10-05 11:09:16] event.DEBUG: Notified event "kernel.exception" to listener "Symfony\Component\HttpKernel\EventListener\ExceptionListener::onKernelException". [] []
[2012-10-05 11:09:16] request.CRITICAL: Symfony\Component\Security\Core\Exception\InsufficientAuthenticationException: Full authentication is required to access this resource. (uncaught exception) at /home/phil/projects/acme/vendor/symfony/symfony/src/Symfony/Component/Security/Http/Firewall/ExceptionListener.php line 109 
```

我真正想要发生的只是返回一个 403 响应。是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:17:36.633

内核捕获的异常总是返回 HTTP 500。（[代码](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpKernel/EventListener/ExceptionListener.php)）。

如果身份验证无效，您必须返回自己的响应。

```
use Symfony\Component\HttpFoundation\Response;
$response = new Response();

$response->setContent('<html><body><h1>Bad Credentials</h1></body></html>');
$response->setStatusCode(403);
$response->headers->set('Content-Type', 'text/html');

// prints the HTTP headers followed by the content
$response->send(); 
```

# perforce - 如何使用本地安装的第三方插件？

> ID：12749464
> 
> 赞同：0
> 
> 时间：2012-10-05T15:30:17.343
> 
> 标签：perforce, tycho

我已经下载并安装了 P4 Eclipse 插件（特别是 com.perforce.team.core），并编写了我自己的插件来扩展他们的插件。

然而，使用 Tycho 来自动化无头构建被证明是困难的。构建过程下载构建的 Eclipse 插件（好），但无法下载 P4 Eclipse 插件（坏）.. 当它们在本地 Eclipse 安装中时令人沮丧。

> 原因：java.lang.RuntimeException：“找不到解决方案，因为问题无法解决。”：[“无法满足来自 com.pushtechnology.p4tools.openFileSearch 1.0.0.qualifier 的依赖关系到捆绑 com.perforce.team.core 2010.1 .275861.", "找不到解决方案，因为问题无法解决。"]

我怎样才能让 Tycho 去查看本地的 Eclipse 安装，而不是在 Internet 上苦苦挣扎？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:17:09.863

Tycho 需要使用 p2 存储库中的插件和功能。某些版本的 tycho 允许您通过将 -Dtycho.targetPlatform=/path/to/eclipse 传递给 maven 命令行来指向 eclipse 安装。然而，这已被弃用，甚至可能在当前的 tycho 版本中被删除。

相反，您有两个选择。第一个是运行[features 和 bundles publisher](http://wiki.eclipse.org/Equinox/p2/Publisher#Features_and_Bundles_Publisher_Application)以生成 eclipse 安装中所有内容的 p2 存储库。这有点笨拙，不是一个很好的解决方案。

另一种选择是使用 perforce 更新站点。但是看起来，它似乎是一个旧式更新站点，而不是 p2 存储库。要让 tycho 使用它，您首先需要对其进行[镜像](http://wiki.eclipse.org/Equinox_p2_Repository_Mirroring)以在本地复制插件，然后运行 ​​features ans bundles publisher 以将其转换为适当的 p2 存储库。这将是我推荐的方法。

# ruby-on-rails - 我的部分不是 rails 期望的（嵌套部分）

> ID：12749466
> 
> 赞同：1
> 
> 时间：2012-10-05T15:30:19.843
> 
> 标签：ruby-on-rails, partial

我有一个模型提交，其中有很多表演者。我有一个显示个人提交的部分内容（app/views/submissions/_submission.html.erb）：

```
<div>
  Show stuff relating to @submission
  ...
  <%= render @performers %>
</div> 
```

以及用于展示表演者的部分（app/views/performers/_performer.html.erb）：

```
<%= div_for performer do %>
  <%= performer.name %>
<% end %> 
```

这适用于（app/views/submissions/show.html.erb）：

```
<%= render @submission %> 
```

但我也想从不同的命名空间（app/views/curator/submissions/show.html.erb）使用它。但我得到这个错误：

```
Missing partial curator/submissions/submission with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in:
  * "/Users/ircmullaney/RubyCode/cif/app/views"
  * "/Users/ircmullaney/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/devise-2.1.2/app/views" 
```

我可以通过将渲染更改为此来解决此问题：

```
<%= render 'submissions/submission' %> 
```

但是，嵌套部分失败：

```
Missing partial curator/performers/performer with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in:
  * "/Users/ircmullaney/RubyCode/cif/app/views"
  * "/Users/ircmullaney/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/devise-2.1.2/app/views" 
```

这不起作用：

```
<%= render 'performers/performer' %> 
```

因为 div_for：

```
undefined method `model_name' for NilClass:Class 
```

有什么想法我应该怎么做？

更新：除了 iouri 建议的更改之外，我将其添加到我的表演者部分：

```
<% @performers.each do |performer| %>
  <%= div_for performer do %>
    <%= performer.name %>
  <% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:35:40.327

您可以将它们移动到视图下的单独文件夹中，例如称为 partials，然后在这两个地方从那里引用它们，您需要将对象传递给 partial：

```
<%= render 'partials/performer', :locals => {:performer => @performer} %> 
```

# ruby-on-rails - Heroku , ActionView::Template::Error (undefined method `tags' for # ):

> ID：12749472
> 
> 赞同：5
> 
> 时间：2012-10-05T15:30:39.183
> 
> 标签：ruby-on-rails, heroku, error-handling, tags, undefined

所以我不确定它是什么。在本地主机上一切正常。

我在 Heroku 中遇到了这个错误。

```
Started GET "/posts/new" for 79.111.231.233 at 2012-10-05 08:04:17 -0700
app/views/posts/new.html.erb:2:in `_app_views_posts_new_html_erb__735551054742361459_22419140'
app/views/shared/_post_form.html.erb:22:in `block in _app_views_shared__post_form_html_erb__2081576675630015699_18673940'
22:     <%= f.text_field :tags %>
app/views/shared/_post_form.html.erb:5:in `_app_views_shared__post_form_html_erb__2081576675630015699_18673940'
25:   <div class="actions">
21:   <div class="">
cache: [GET /posts/new] miss
ActionView::Template::Error (undefined method `tags' for #<Post:0x000000041424a0>):
app/controllers/posts_controller.rb:19:in `new' 
```

这就是我所拥有的：

**1.查看器**

```
<%= form_for @post  do |f| %> 
```

... <%= f.text_field :tags %> ...

**2.控制器**

```
 def new
    @page_title = 'New post'
    @user = current_user 
    @post = Post.new
      render 'new'
  end 
```

**3\. 型号**

```
attr_accessible :entry, :title, :private, :tags 
```

**4\. 架构**

```
 create_table "posts", :force => true do |t|
   t.string   "title",                          :null => false
   t.text     "entry",                          :null => false
   t.integer  "user_id"
   t.integer  "category_id"
   t.boolean  "private",     :default => false
   t.datetime "created_at",                     :null => false
   t.datetime "updated_at",                     :null => false
   t.string   "tags"
 end 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-05T15:32:06.843

你忘了`heroku run rake db:migrate`吗？

`heroku restart`如果您的应用程序已经在运行并且缓存了旧的数据模型，您可能还需要这样做。

# variables - 如何在批处理文件中使用 START 传递变量中包含空格的参数

> ID：12749475
> 
> 赞同：1
> 
> 时间：2012-10-05T15:30:55.960
> 
> 标签：variables, batch-file, cmd

我正在尝试同时启动特定数量的同一批处理文件，但在传递参数时遇到了麻烦。

这是我使用的命令： `START "Split lossless enc %%G" "%wrkdir%_menc.bat" "%wrkdir%%avs%_%%G.avs" "%wrkdir%%outf%_%%G.avi" "%menc%" "%mencx%"`

%%G 是一个数字（在我的测试中从 1 到 4）
%wrkdir% 是当前工作目录（所以基本上是 %~dp0）
%avs% 和 %outf% 都是没有扩展名的文件名
%menc% 是一个带文件名的完整路径并且扩展名
%mencx% 是带有扩展名的文件名

其中任何一个都可能包含空格，但它们在我所做的测试中没有，因此删除参数的周围引号现在可以完美地工作。

在我完成所有搜索之后，一切都告诉我只需引用参数就可以了，但我不断收到以下错误：`The filename, directory name, or volume label syntax is incorrect.`

我尝试不使用启动的 bat 文件中的参数来确保不是我在那里使用它的方式导致了问题（尽管我非常怀疑它），但即使它只包含它也不起作用`ECHO it works`

编辑：我忘了说 START 在从 1 到 4 的 FOR 循环中，并且我使用 setlocal enableDelayedExpansion 但我使用的所有变量都设置在它之前（显然属于 FOR 的 %%G 除外）并且在循环之外

Edit2：为了更容易，我已经将批处理文件剥离到最低限度（我对其进行了测试以确保我得到相同的错误）所以我可以给你整个事情：

```
@ECHO off

SET wrkdir=%~dp0
SET avs=encode-01
SET menc=D:\_1enc_\_Tools\Mencoder\mencoder_r32198.exe
SET outf=test_mt
SET inst=4

SET mencx=%menc%
:FindMencx
IF NOT "%mencx:*\=%"=="%mencx%" (
  SET "mencx=%mencx:*\=%"
  GOTO FindMencx
)

FOR /L %%G IN (1,1,%inst%) DO (
 START "Split lossless enc %%G" "%wrkdir%_menc.bat" "%wrkdir%%avs%_%%G.avs" "%wrkdir%%outf%_%%G.avi" "%menc%" "%mencx%"
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:49:05.430

如果没有看到带有循环的整个批处理文件，`for`我只能猜测，但尝试添加一个空白标题`start`，如果没有它，当参数有空格时可能会导致问题。

> START "" "分割无损编码 %%G" "%wrkdir% *menc.bat" "%wrkdir%%avs%* %%G.avs" "%wrkdir%%outf%_%%G.avi" "%menc% " "%mencx%"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T02:45:40.230

经过大量的试验和错误，当要启动的 bat 文件也被引用并包含自己的路径时，似乎 START 命令不适用于引用的参数。

为了解决这个问题，我必须使用 /D 选项（我以前从未注意到存在）设置启动目录，如下所示：

```
START "Split lossless enc %%G" /D"%wrkdir%" "_menc.bat" "%wrkdir%%avs%_%%G.avs" "%wrkdir%%outf%_%%G.avi" "%menc%" "%mencx%" 
```

我还发现当我输入错误的路径时会显示相同的错误，因此似乎由于某种原因无法正确看到它。不知道为什么它可以在没有参数的引号或不带引号的引号中使用路径和 bat 文件。

编辑：在我的完整批处理文件中包含修复后，我意识到如果启动的批处理文件与当前批处理文件位于同一目录中，则不能用引号括起来，但如果它位于另一个漂亮的目录中，则可以诡异的。因此，要从同一目录启动它，我需要使用`_menc.bat`而不是`"_menc.bat"`.

至少它在没有引用的情况下在这两种情况下都有效，所以这对我来说已经足够了。

# android - InetAddress.getByName 导致 NetworkOnMainThreadException

> ID：12749477
> 
> 赞同：3
> 
> 时间：2012-10-05T15:30:59.550
> 
> 标签：android, runnable

意识到我不得不担心基于网络的线程会对我的 UI 线程造成严重破坏，我经历了为我的应用程序和远程服务器之间的 TCP/IP 网络 ping pong 命令和响应创建自定义处理程序和自定义线程的整个过程. 工作得很好。（您会在下面的代码中看到它被引用为`mainCommunicationThread(controlCommands);`）

不过，在触发该线程/处理程序之前，我从 SQL 中提取 IP 或主机名（称为 currIPstr），然后将其与一堆其他变量一起发送到线程/处理程序。不过，我需要做的一件事是确保它是 A）有效的 IP 地址，或 B）主机名已解析——否则，即使开始尝试也没有意义。

好的，没问题，我只是这样称呼：

```
currIP = InetAddress.getByName(currIPstr).toString().split("/")[1]; 
```

不过，我刚刚遇到的是，在 Gingerbread 或 StrictMode 运行时，上面的行会触发可怕的 NetworkOnMainThreadException。

是的，对 InetAddress.getByName 的简单调用就足够了。好吧，我一直在努力解决，所以我将整个函数移动到一个可运行文件中：

```
private String currStatIP = null;
private String currentStatIPstr = null;
private Integer currentStatIDstr = -1;
private String currentPort = null;
private String currentLocation = null;
private String currUserName = null;
private String currPassword = null;
private Integer currStatID = -1;
public void StatControl(Cursor c, final String[] commandtosend){

    /*the object will always start off with the first 4 fields being the current login information.
     * [0] = IP Address
     * [1] = port number
     * [2] = username
     * [3] = password
     * [4] = COMMAND -- this will be used in a switchcase inside the pingpong to decide what to do.
     *               -- if the Socket is not open, the first 4 fields will be used to re-initiate the connection
     *               -- otherwise, the command is drawn from this field and sent directly.
     * */

    currentStatIDstr = c.getInt(0);
    currentStatIPstr = c.getString(1);
    currentPort = c.getString(2);
    currentLocation = c.getString(3);
    currUserName = c.getString(4);
    currPassword = c.getString(5);
    currStatID = currentStatIDstr;

    Handler networkLookupHandler = new Handler();
    Runnable networkLookupRunnable = new Runnable() {
         public void run() {
             try {
                    currStatIP = InetAddress.getByName(currentStatIPstr).toString().split("/")[1];
                } catch (UnknownHostException e) {
                    e.printStackTrace();
                }
             int portNumber = 0;
                try {
                    portNumber = Integer.parseInt(currentPort);
                } catch(NumberFormatException nfe) {
                   nfe.printStackTrace();
                }
                String userName = currUserName;
                String passWord = currPassword;
                String[] command = commandtosend;

                Object[] controlCommands = new Object[]{
                        currStatID,
                        currStatIP, //InetAddress of String representing the IP address
                        portNumber,     //int representation of the port number, taken from String
                        currentLocation,
                        userName,
                        passWord,
                        command
                        };
                /*for(int i=0;i<controlCommands.length;i++){
                    Log.d("object work","controlCommands[" + i + "] is " + controlCommands[i]);
                }*/

                mainCommunicationThread(controlCommands);
         }   
    };
    networkLookupHandler.post(networkLookupRunnable);
} 
```

而且，耶！有效！我不再收到 NetworkOnMainThreadException 了。哦……等等……是的，我是。

以上内容不会在 API 10、12、14 上触发异常，甚至 16 在模拟器中也可以正常工作，但是，如果我将其加载到运行 Jellybean 4.1.1 的三星 Google Galaxy Nexus 上，则会出现 NetworkOnMainThreadException 崩溃。即使上面包裹在runnable中。

我完全不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T16:41:20.777

您正在尝试在可运行的网络操作中运行，因此请尝试在 onCreate 方法中添加此代码：

```
 StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
     StrictMode.setThreadPolicy(policy); 
```

或者我建议你使用 asynctask 而不是使用 Runnable 线程

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-25T16:39:12.960

我的解决方案：

```
public static InetAddress getInetAddressByName(String name)
{
    AsyncTask<String, Void, InetAddress> task = new AsyncTask<String, Void, InetAddress>()
            {

                @Override
                protected InetAddress doInBackground(String... params)
                {
                    try
                    {
                        return InetAddress.getByName(params[0]);
                    }
                    catch (UnknownHostException e)
                    {           
                        return null;
                    }                       
                }           
            };
    try
    {
        return task.execute(name).get();
    }
    catch (InterruptedException e)
    {
        return null;
    }
    catch (ExecutionException e)
    {
        return null;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-28T22:33:47.900

我通过在新线程中运行解决了我的 Inet6Address.getLocalHost() NetworkOnMainThreadException 问题。

# nsrangeexception - NSMutableOrderedSet NSRangeException

> ID：12749479
> 
> 赞同：0
> 
> 时间：2012-10-05T15:31:04.313
> 
> 标签：nsrangeexception

我收到一个 NSRangeException 错误，我在这段非常基本的代码中找不到错误。有人可以帮助纠正我的盲点吗？

```
uint32_t offsetVal = 0;
int num = 100;
_offsetVals=[[NSMutableOrderedSet alloc]initWithCapacity:num+1];
for (int i=0; i<=num; i++) // note: there is 1 greater offset record than there is glyphs!
{
    CFDataGetBytes(tableData, CFRangeMake(offset,4),(UInt8*)&offsetVal);
    offsetVal=CFSwapInt32HostToBig(offsetVal);
    [_offsetVals insertObject:[NSNumber numberWithInt:offsetVal] atIndex:i];
    offset+=4;
} 
```

然而应用程序崩溃：'NSRangeException'，原因：' *** -[__NSOrderedSetM setObject:atIndex:]: index 3 beyond bounds [0 .. 1]'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:39:50.217

我相信你的问题是你已经设置了你的条件语句，`i<=num`这反过来会在你的 for 循环结束时提供一个 100 的索引。所有类似数组的结构都从 0 开始计数，因此用替换该条件`i < num`应该可以解决您的问题。

**编辑：** 使用`[_offsetVals addObject:[NSNumber numberWithInt:offsetVal]]`而不是`insertObject:atIndex:`已经解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T17:25:58.933

问题是 NSMutableOrderedSet 将初始容量视为提示而不是指令，因此由于系统没有分配必要的空间，因此插入在几次内失败。从手册（但不在 insertObject 文本中）：

“NSMutableOrderedSet 对象不像 C 数组。也就是说，即使你可以在创建可变有序集合时指定大小，指定的大小也被视为“提示”；集合的实际大小仍然为 0。这意味着您不能在大于集合当前计数的索引处插入对象。例如，如果集合包含两个对象，则其大小为 2，因此您可以在索引 0、1 或 2 处添加对象。索引 3 是非法且超出范围；如果您尝试在索引 3 处添加对象（当数组大小为 2 时），NSMutableOrderedSet 会引发异常。”

# algorithm - 确定两个不同频率和开始时间的正弦波何时同时为零的离散方法

> ID：12749484
> 
> 赞同：2
> 
> 时间：2012-10-05T15:31:23.990
> 
> 标签：algorithm, math, language-agnostic

我知道我可以把它扔进 wolfram alpha 并使用正弦函数得到答案，但假设我的所有数据都是整数，它也应该是可解的。

所以我有两个波，它们总是有整数波长。对于我的示例，它是一个 3 波长波和一个 4 波长波。在最简单的情况下，两者都从 0 秒开始，它们在开始时和之后每 12 秒都为 0。使用 lcm 来确定这些交叉点在我认为的每种情况下都有效，但是如果它们在不同的时间开始，它只能预测它们的频率都为零，但不能预测何时开始。

例如，如果 3 长度的波在时间 1 开始，而 4 长度的波在时间 0 开始，那么它们在时间 4 都为 0，然后每 12 次。但是如果 4 的长度从时间 2 开始，而 3 的长度从时间 1 开始，那么它们在时间 10 和之后的每 12 都为 0。

确定第一次它们都为 0 的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:42:15.077

对于每个波浪，生成波浪为 0 的时间列表；取列表的交集；最早的时间从路口。需要比这更复杂吗？我猜你只想在每个列表中生成有限数量的元素，除非你有一个可以处理无限数据结构的系统。

另一种方法是在您的示例中将每个波的项写为算术级数`(1+3m)`并`(0+4n)`求解方程

`(1+3m)-(0+4n) == 0`

这将有无限的解决方案。但是如果你设置了`m==1`那么`n==1`; 如果您设置`m==2`，则整数没有解决方案`n`。用你最喜欢的语言编写一个小函数来逐个输出整数解决方案是很容易的。

再多一点代数表明，对于给定的示例，`(m,n)`值的序列是`(1,1),(5,4),(9,7), ...,(m,n),(m+4,n+3),...`。

和以前一样，我将作为练习留给感兴趣的一方来概括这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T16:34:34.400

您正在寻找以下形式的方程的解：

```
sin((2π*A)(x-B)) == 0 
```

和

```
sin((2π*C)(x-D)) == 0 
```

通过相乘，还要注意：

```
sin(2πAx - 2πAB) == 0 
```

同样地

```
sin(2πCx - 2πCD) == 0 
```

或者：

```
Ax - AB == 0
Cx - CD == 0 
```

它提供了以下完全不令人震惊的值，其中这些函数为零：

```
x = B + 2π/(2π*A) * k
x = D + 2π/(2π*C) * k 
```

其中 K 是一个整数。

由于您将自己限制为具有波长为整数的值的函数，因此 1/A 和 1/C 的值同样保证为整数。因此，这进一步简化了：

```
x = B mod a
x = D mod c 
```

其中 a 和 c 是这里的频率。

你可以选择你最喜欢的解联立模方程的形式，我将演示其中最简单的一种：

```
x = B + k*a
B+ k*a = D mod c
k * a = D - B mod c
k = (a^-1M) (D-B) mod c
k = (a^-1M) (D-B) + j*c
x = B + a*(a^-1M)*(D-B) + (a*j-c)
x = B + a*(a^-1M)(D-B) mod ac 
```

请注意，a^-1m 是 mod c 的模逆，您必须使用扩展欧几里得算法进行计算。（我将省略它，因为您的示例的值非常小）：

```
x = 1 + 3(3)(0-1) mod ac
x = -8 mod ac 
```

给定这样的一些值，您可以在脚本中取右侧 mod ac 并获得正确的第一个值；但是请注意，像 Javascript 之类的一些清理语言将允许绝对值小于 ac 的负结果。

所以你想要这样的东西：

```
( ( (B + a*(a^-1M)*(D-B) ) % ac) + ac ) % ac) 
```

a^-1M 是 c 中 a 的模数倒数。如果 a%c == 0 或 c%a == 0，您的函数也应该呕吐，因为这些波永远不会相交

# php - PHP imagick将svg转换为图像问题

> ID：12749489
> 
> 赞同：0
> 
> 时间：2012-10-05T15:31:30.937
> 
> 标签：php, imagick, image-size

我无法弄清楚为什么我无法进行从 svg 到图像的转换。

系统：

```
Windows 2008 Server
II7
PHP 5.3.10-      Imagick is installed 
```

代码

```
$command = 'C:\imagemagick\convert.exe d:\path-to-svg-file\sample.svg d:\path-to-output-folder\sample.png 2>&1';

exec($command, $output); 
```

错误

```
array(2) {
    [0]=> string(102) "convert.exe: Must specify image size `C:/Windows/TEMP/magick-PY5hNkFu' @ error/mvg.c/ReadMVGImage/185."
    [1]=> string(126) "convert.exe: no images defined `d:\inetpub\...\output\sample.png' @ error/convert.c/ConvertImageCommand/3044."
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:34:10.907

svg 图像是矢量。它们没有固有的尺寸，只是关于画什么线和在哪里画的方向。imagemagic 希望您告诉您目标图像的大小（以像素为单位），它应该为您生成。它应该制作100x100的图片吗？999,999,999x999,999,999？这些都不包含在 svg 详细信息中，因此您必须提供它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:36:32.853

您必须指定大小：

```
convert -size 568x604 d:\tiger.svg d:\tiger.jpg 
```

SVG 到其他图像格式怎么样？

```
 convert file.svg file.png 
```

**我尝试转换为 PNG，但遇到与 JPG 相同的问题**

# javascript - 从 last.fm 获取上个月播放的曲目数

> ID：12749491
> 
> 赞同：0
> 
> 时间：2012-10-05T15:31:34.307
> 
> 标签：javascript, html, last.fm

我正在寻找通过我的 last.fm 个人资料显示我在上个月乱写的曲目总数。我不需要艺术家姓名、曲目等，只需要播放曲目的数量。任何人都知道如何做到这一点？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T06:33:32.193

Last.fm 公开了一个公共 API，因此您应该首先阅读有关如何获取密钥和使用 API 的文档：[http](http://www.last.fm/api) ://www.last.fm/api最后一个至少有[一个 javascript 库](https://github.com/fxb/javascript-last.fm-api).fm api，很好用，因为它会为你缓存。

在 API 中，您会找到[user.getWeeklyChartList](http://www.last.fm/api/show/user.getWeeklyChartList)方法，该方法可用于提取每周“图表”的 unix 时间戳日期。然后，您可以将四个最近的日期范围传递给 user.getWeeklyArtistChart api 方法，该方法将返回您在该周收听的每位艺术家的列表，以及每位艺术家的总播放次数。每周遍历每位艺术家，将所有四个星期的总数相加，您就有了每月的播放次数！

# java - 删除数字序列中的反斜杠

> ID：12749499
> 
> 赞同：1
> 
> 时间：2012-10-05T15:31:50.973
> 
> 标签：java, regex

什么正则表达式可以从输入字符串中得到一个数字序列，包含反斜杠而不是数字，例如 -

`"12\34a56ss7890"`

我需要 -

```
1234567890 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:38:50.810

如果我们假设你在一个字符串中有这个。您可以执行以下操作：

```
string = string.replaceAll("\\D", ""); 
```

这将替换字符串中的所有非数字字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T15:38:24.053

```
str.replaceAll("[^\d]", ""); 
```

**bootnote：我不是 Java 开发人员，但正则表达式本身应该是正确的**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T15:57:31.237

很抱歉添加另一个答案，但这是必需的，因为这不适合评论。

我认为这是因为\34。如果我打电话`System.out.print("12\34a56ss7890");`，我会得到以下输出`12a56ss7890`。这是因为 \34 将被转义。这是Java中的一个问题。您可以通过首先在 InputStream 上调用此方法来解决此问题：

```
private InputStreamReader replaceBackSlashes() throws Exception {

    FileInputStream fis = new FileInputStream(new File("PATH TO A FILE");
    Scanner in = new Scanner(fis, "UTF-8");
    ByteArrayOutputStream out = new ByteArrayOutputStream();

    while (in.hasNext()) {
        String nextLine = in.nextLine().replace("\", "");
        out.write(nextLine.getBytes());
        out.write("\n".getBytes());
    }

    return new InputStreamReader(new ByteArrayInputStream(out.toByteArray()));
} 
```

顺便说一句：对不起我的编辑，但代码中有一点错误。

调用此方法后，您将 InputStream 转换为字符串并在字符串上调用 this：

```
string = string.replaceAll("\\D", ""); 
```

这应该现在可以工作了:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-07T07:04:01.940

```
 String num;
   String str =" 12\34a56ss7890";
   str= str.replace("\34", "34");
   String regex = "[\\d]+";

   Matcher matcher = Pattern.compile( regex ).matcher( str);
    while (matcher.find( ))
    {
    num = matcher.group(); 
    System.out.print(num);                 
    }
    replace \34 by 34 and match the rest using regular expression. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-03T17:18:23.187

使用正则表达式。

```
String numvber;
String str =" 12\34a56ss7890";
str= str.replace("\34", "34");
String regex = "[\\d]+";//match only digits.

Matcher matcher = Pattern.compile( regex ).matcher( str);
while (matcher.find( ))
{
num = matcher.group(); 
System.out.print(num);                 
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-05T15:56:54.980

该字符`\34`是 string 中的八进制数`12\34a56ss7890`，因此您可以使用：

```
str.replaceAll("\034", "34").replaceAll("\\D", "") 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-05T16:48:50.927

下面的例子：

```
String a ="1\2sas";
String b ="1\\2sas";

System.out.println(a.replaceAll("[a-zA-Z\\\\]",""));
System.out.println(b.replaceAll("[a-zA-Z\\\\]","")); 
```

给出输出：

```
1X
12 
```

其中 X 不是 X 而是一个小矩形 - 当显示控件的文本不知道如何绘制时显示的符号，即所谓的不可打印字符。

这是因为在 String a 中，“\2”部分显然试图被解释为单个转义符号“\u0002”——类似于“\n”“\t”——你可以在调试器中看到这一点（我使用 NetBeans 尝试过） )

由于 replaceAll 方法的第一个参数被传递给 [Pattern.compile](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll(java.lang.String , java.lang.String)) 它需要[转义两次](http://www.regular-expressions.info/java.html)，而不是字符串文字（如 b）。

因此，如果字符串 "12\34a56ss7890" 在屏幕上看起来像这样，您就可以像这样打印出来：

```
System.out.println("12\\34a56ss7890"); 
```

这在第二个例子中得到了解决。

但是，如果文字为“12\34a56ss7890”，那么我*认为*你不能用一个正则表达式来处理它*，*因为如果反斜杠后面跟着一个数字，它会被解释为 \u0000 -\u0009 所以我能做到的最好想想是个很丑的解决方案：

```
str.replaceAll("\u0000","0").replaceAll("\u0001","1") ... .replaceAll("\u0009","9").replaceAll("[^\\d]") 
```

第一个 then 替换 (\u0000-\u0009) 可能会被重写为 for 循环以使其看起来更优雅。

+1 一个优秀的问题:)

编辑：实际上，如果反斜杠后跟多个数字，它们都会被解释为一个符号 - 反斜杠后最多三个数字，第四个数字将被视为一个数字。

因此，我的解决方案通常不正确，但可以扩展为。我会在下面推荐 Robin 的解决方案，因为它的效率要高得多。

# php - 发送消息回调后的 jaxl

> ID：12749500
> 
> 赞同：3
> 
> 时间：2012-10-05T15:31:55.200
> 
> 标签：php, xmpp, xmpphp

我想在 jaxl 中发送消息后执行一些代码。哪种回调适合这种情况？

```
 public function test() {

        require_once 'JAXL/jaxl.php';
        global $client;

        $client = new JAXL(array(
            'jid' => 'user@localhost',
            'pass' => 'password',
            'log_level' => JAXL_INFO
        ));

        $client->add_cb('on_stream_features', function($stanza)  {
            global $client,$thisObj;
            $client->send_chat_msg('otherUser@localhost','Message');  
        });

       $client->add_cb('on_message_send',function(){  //some thing like this
         //some code
       });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T20:29:17.860

Jaxl 库目前不支持此类回调。这是因为当您调用时`$client->send_chat_msg()`，[XMPPStream在底层](https://github.com/abhinavsingh/JAXL/blob/v3.x/xmpp/xmpp_stream.php)[JAXLSocketClient](https://github.com/abhinavsingh/JAXL/blob/v3.x/core/jaxl_socket_client.php)的输出缓冲区中排队[XMPPMsg](https://github.com/abhinavsingh/JAXL/blob/v3.x/xmpp/xmpp_msg.php)对象。当套接字准备好写入时，输出缓冲区被刷新。

在排队之前，所有[XMPPStanza](https://github.com/abhinavsingh/JAXL/blob/v3.x/xmpp/xmpp_stanza.php)都由 序列化（`to_string()`）`XMPPStream`，因此底层`JAXLSocketClient`输出缓冲区不知道哪个节正在通过写就绪套接字刷新。因此，目前不可能进行此类回调。

有一些非权威的方法可以检查您的消息的传递状态，例如输出缓冲区是否为空？但这很棘手，并不是一个完美的解决方案。

实现此类回调的完美方法是在 的上下文中维护输出缓冲区`XMPPStream`，然后应通知底层套接字写入就绪状态，最后在通过套接字刷新节之前，`XMPPStream`可以执行这些回调。不幸的是，这不是图书馆的设计方式。不过，这种回调可能会在库的未来版本中得到支持。

# visual-studio-2010 - Visual Studio 无法启动 Azure 调试环境

> ID：12749501
> 
> 赞同：0
> 
> 时间：2012-10-05T15:31:59.447
> 
> 标签：visual-studio-2010, azure

调试我的 Azure 应用程序几个月来一直运行良好。但是，我找不到任何理由，当我 F5 时我才开始得到这个......

```
---------------------------
Microsoft Visual Studio
---------------------------
Windows Azure Tools for Microsoft Visual Studio

Access is denied
---------------------------
OK   
--------------------------- 
```

我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:27:11.463

[已解决] 重新安装 Microsoft Visual Studio 的 Windows Azure 工具并重新启动。

# serialization - 带有 JPA 和容器管理事务 (CMT) 的检票口

> ID：12749502
> 
> 赞同：0
> 
> 时间：2012-10-05T15:32:00.773
> 
> 标签：serialization, jpa, transactions, ejb, wicket

从 JSF 迁移到 Wicket 我继续我的习惯，即让 EJB 外观中的所有 JPA 操作都使用容器的事务管理。我使用并知道用于注射的 wicket-cdi，效果很好。

不幸的是，如果我在 wicket 页面中注入 EJB，wicket 的序列化检查会抱怨它不可序列化。这对于 EJB 来说是正确的，我想因为它们是代理的。

我的想法在这一点上被阻塞了。如何将 jpa 与带有 wicket 的容器管理事务一起使用？我目睹的所有示例都只是读取数据或正在使用 Spring，这是我不想做的。

谢谢迪特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:37:26.613

我在 wicket-users 邮件列表中重复了这个问题，这是一个有趣的线程，有 3 个解决方案。

其中之一是我将 EJB 封装在 LoadableDetachableModel 中并通过 bean 的 JNDI 查找实现加载的想法。请参阅[http://mail-archives.apache.org/mod_mbox/wicket-users/201210.mbox/%3C5072F013.9040702%40tremel-computer.de%3E](http://mail-archives.apache.org/mod_mbox/wicket-users/201210.mbox/%3C5072F013.9040702%40tremel-computer.de%3E)

[我在我的博客](http://hotchpotch-blog.de/2012/10/09/wrapping-eines-ejb-in-ein-loadabledetachablemodel/)中发布了一个更通用的解决方案，抱歉只用德语。

# html - 水平对齐由浮点数移动的元素

> ID：12749505
> 
> 赞同：0
> 
> 时间：2012-10-05T15:32:07.983
> 
> 标签：html, css, alignment

在下面的测试页面中，有一个视频和一个 iframe 元素，都具有`margin-left: auto; margin-right: auto;`CSS 样式。
视频元素向右移动了一个`float: left;`包含几行文本的元素，因此它与下部 iframe 未对齐。

我希望 iframe 与视频居中对齐，将视频保持在当前位置。

![](../Images/30e42c772f4bb38febba9b9c205b3951.png)

```
<div style="float: left; border-right: thin solid;">
    A few colored entries here.
</div>

<div style="margin-left: auto; margin-right: auto;">
    <video src="..."
    style="display: block; margin-left: auto; margin-right: auto;">
    </video>
</div>

<iframe src="..." style="width: 300px; height: 100px;
display:block; margin-left: auto; margin-right: auto;">
</iframe> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:29:09.580

您需要将整个内容包装在包装器 div 中。然后您可以将两个 div 浮动到左侧，并且内部仍然自动居中。

```
<div id="Wrapper">
    <div class="leftColumn">      
        A few colored entries here.  
    </div>      
    <div class="rightColumn">
        <div style="margin-left: auto; margin-right: auto;">      
            <video src="..."      style="display: block; margin-left: auto; margin-right: auto;">      </video>  
        </div>      

        <iframe src="..." style="width: 300px; height: 100px;  display:block; margin-left: auto; margin-right: auto;">  
        </iframe>  
    </div>
</div>

#Wrapper { overflow: hidden; }
.leftColumn { float: left; border-right: thin solid; width:  200px; }
.rightColumn { float: left; width: 800px; } 
```

我没有测试代码，但它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T15:50:40.367

如何将右侧的两个 div 放在它们自己的 div 中，然后将其浮动到右侧并使用`margin:auto`（就像您目前一样）使它们居中。这样一来，它们不是以页面为中心，而是以同一个 div 为中心，并且不应该将一个比另一个推得更远，而不管另一个浮动。

```
<div style="float: left; border-right: thin solid;">
    A few colored entries here.
</div>

<div style ="float:right;">
<div style="margin-left: auto; margin-right: auto;">
    <video src="..."
    style="display: block; margin-left: auto; margin-right: auto;">
    </video>
</div>

<iframe src="..." style="width: 300px; height: 100px;
display:block; margin-left: auto; margin-right: auto;">
</iframe>
</div> 
```

如果我误解了并且您不想将它们浮动到右侧，请忽略它并改用边距。无论哪种方式，在您希望居中的容器 div 周围添加一个容器 div 都应该处理好它。

# jquery - HoverIntent 和 SuperFish 闪烁

> ID：12749510
> 
> 赞同：0
> 
> 时间：2012-10-05T15:32:13.693
> 
> 标签：jquery, css, delay, superfish, hoverintent

我在这个网站[http://bit.ly/MJ8KT6](http://bit.ly/MJ8KT6)上遇到了一个奇怪的问题，它利用了 HoverIntent 和 Superfish 菜单解决方案。我在网站顶部的主子菜单上运行了 0.2 秒的延迟，以帮助防止用户将鼠标移出子菜单。这非常有效，但我发现在用户第一次访问该网站时，它可能会导致菜单闪烁 0.2 秒延迟。

此外，单击四个主要菜单选项中的任何一个也可以调用相同的闪烁/闪烁。随后的点击不会导致问题，我可以在浏览器中复制问题的唯一方法是删除缓存，然后像第一次访问者一样重新访问该网站。

真的不确定这是 CSS、Javascript 问题还是其他冲突。该网站可以位于这里[http://bit.ly/MJ8KT6](http://bit.ly/MJ8KT6)

非常感谢任何想法或反馈。;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:03:49.433

看起来您正在使用 Javascript 隐藏子菜单 - flash 是由在 Javascript 运行以隐藏它之前加载子菜单引起的。

要解决此问题，请隐藏 CSS 中的子菜单，使其在 Javascript 加载之前不会显示：

```
.sub-menu {
    display: none;
} 
```

这将防止它在页面加载时显示，但不应该影响它的功能（因为它在其他地方控制）。

# android - Google play 应用程序“应用程序版本未配置为通过 Google Play 计费”

> ID：12749511
> 
> 赞同：0
> 
> 时间：2012-10-05T15:32:14.797
> 
> 标签：android, google-play

我在应用商店中更新了应用，在尝试订阅相同版本的测试应用时，我收到了上面的消息。有没有解决的办法？

谢谢。

# javascript - 将元素添加到列表时，触发此事件的最佳方式是什么

> ID：12749512
> 
> 赞同：6
> 
> 时间：2012-10-05T15:32:15.103
> 
> 标签：javascript, events, jquery

> **可能重复：**
> [如何识别 DOM 何时更改？](https://stackoverflow.com/questions/3744706/how-to-identify-when-the-dom-has-been-changed)

假设我可以访问`<ul>`element `$(ul#mylist)`。
将某些项目添加到列表时如何触发事件。

我尝试了以下但实际上它不起作用。

```
$('ul#mylist').change(function () {
    console.log('added an element');
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T15:35:30.443

您可以尝试收听`DOMNodeInserted` 事件

```
$('ul#mylist').on('DOMNodeInserted' ,function () {
    console.log('added an element');
}); 
```

如果您要向 ul 添加 li 并想收听事件..

[检查演示](http://jsfiddle.net/sushanth009/PgAJT/9/)

# html - 子导航移动

> ID：12749513
> 
> 赞同：1
> 
> 时间：2012-10-05T15:32:19.097
> 
> 标签：html, css, drop-down-menu, navigation

我创建了一个具有水平子菜单的导航。出于某种原因，当我翻过子菜单时，顶部导航正在移动。

[http://jsfiddle.net/pgorski/2kBru/](http://jsfiddle.net/pgorski/2kBru/) - 子菜单位于产品链接上。

我搜索了该网站，但找不到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:36:10.053

添加`border: 1px solid transparent;`到您的链接

[**演示**](http://jsfiddle.net/2kBru/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:36:00.983

这是因为您的边框设置为您的 a 标签。请记住，每个边框将比您使用的原始标签多产生 1px。因此，当您将鼠标悬停在上面时，选项卡将比原始选项卡大。尝试删除边框并进行测试。

# eclipse - 如何在 Eclipse 中导入从 netbeans 7.2 创建的 JavaFX 2 项目？

> ID：12749515
> 
> 赞同：1
> 
> 时间：2012-10-05T15:32:27.240
> 
> 标签：eclipse, eclipse-plugin, javafx-2, netbeans-7

我想使用 Eclipse 开发 JavaFX。我正在尝试将在 Netbeans 7.2 中创建的 JavaFX 2 应用程序导入 Eclipse。但是 Javafx 2 使用它自己的 Ant 构建语法。因此，当我尝试将此 Ant 项目导入 Eclipse 时，出现以下错误：

```
Specified build file does not contain a javac task 
```

我该如何解决这个错误？我知道 Eclipse 有 JavaFX 插件，但我找不到任何可以解决我的问题的插件。还是我需要尝试其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:07:15.630

打开[http://efxclipse.org/install.html](http://efxclipse.org/install.html)，向下滚动到“ *In Eclipse 4.2 for the adventurous* ”。

通过从 Window->Preferences 设置 JavaFX SDK 的路径正确配置后，创建一个新的 JavaFX 项目（File->New->Other->JavaFX->JavaFX Project）

右键单击您的项目->导入->文件系统->选择 NetBeans 创建的项目文件夹的顶层-> 选择 src 文件夹、build.xml、manifest.mf 和您希望导入的任何其他 FXML 文件。

有关可分发的独立可执行 JAR，请参阅[http://www.efxclipse.org/tut2.html](http://www.efxclipse.org/tut2.html)。如果您在第 11 步中遇到任何问题 - 单击编辑器的 Build 部分中的“ant build.xml and run”链接，然后转到`Window->Preferences->Ant->Runtime->Global Entries->Add External JAR->(Browse to your JDK lib folder) Add tools.jar`。

如果您的构建仍然失败并显示此错误 ->

> BUILD FAILED C:\Workspace\eclipseFx\AppOne\build\build.xml:82: 问题：无法创建任务或键入 javafx:com.sun.javafx.tools.ant:resources

这意味着 ${java.home} 指向 JRE 并且可以访问 jfxrt.jar 但无法访问 ant-javafx.jar。在 JDK 中找到 ant-javafx.jar 的绝对路径并在 build.xml 中编辑该行，它应该可以正常构建。此错误已在 Nightly Build 中修复。

PS - 您现在也可以创建 JavaFX RCP 应用程序。Eclipse 4 应用程序可以使用 JavaFX 作为呈现技术而不是 SWT。

# c++ - 快速交叉产品。函数调用开销？

> ID：12749516
> 
> 赞同：1
> 
> 时间：2012-10-05T15:32:35.937
> 
> 标签：c++, product, overhead

我是 C++ 编程的新手。我试图看到将我所有的 MatLab 软件迁移到 C++ 的好处。我正在做一些有限元的东西，主要是非线性的，所以我需要大量执行的操作之一是两个向量的叉积。我在 Matlab 和 C++ 中测试了两个实现，C++ 似乎要快得多。在 C++ 中，两种不同的实现给出了不同的时序。我正在使用英特尔 MKL。

这是代码：

```
#include <stdio.h>
#include <time.h>
#include <stdlib.h>
#include <iostream>
#include <mkl.h>

void vprod( double vgr[3], double vg1[3], double vg2[3]);

int main() {

    double v1[3]={1.22, 2.65, 3.65}, v2[3]={6.98, 98.159, 54.65}, vr[3];
    int LC=1000000;
    int i,j,k;
    double tiempo=0.0, tinicial;

    //------------------------------------------------------------------------
    std::cout << "INLINE METHOD: " << std::endl;

    tinicial = dsecnd();
        for (i=0; i<LC; i++){   
        vr[0] = v1[1]*v2[2]-v1[2]*v2[1]; 
        vr[1] =-(v1[0]*v2[2]-v1[2]*v2[0]);
        vr[2] = v1[0]*v2[1]-v1[1]*v2[0];
    };

    tiempo = (dsecnd() - tinicial);
    std::cout << "Tiempo Total: " << tiempo << std::endl;
    std::cout << "Resultado: " << vr[0] << std::endl;
    //------------------------------------------------------------------------

    //------------------------------------------------------------------------
    std::cout << "FUNCTION METHOD: " << std::endl;

    tinicial = dsecnd();
        for (i=0; i<LC; i++){   
        vprod (vr,v1,v2);
    };

    tiempo = (dsecnd() - tinicial);
    std::cout << "Tiempo Total: " << tiempo << std::endl;
    std::cout << "Resultado: " << vr[0] << std::endl;
    //------------------------------------------------------------------------

    std::cin.ignore();
    return 0;

}

inline void vprod( double vgr[3], double vg1[3], double vg2[3]){
    vgr[0] = vg1[1]*vg2[2]-vg1[2]*vg2[1]; 
    vgr[1] =-(vg1[0]*vg2[2]-vg1[2]*vg2[0]);
    vgr[2] = vg1[0]*vg2[1]-vg1[1]*vg2[0];

} 
```

我的问题是：为什么第一个实现比第二个快 3 倍？这是函数调用开销的结果吗？谢谢 ！！！

**编辑**：我已经修改了代码，以避免编译器“猜测”带有常量向量的循环的结果。正如@phonetagger 所示，结果非常不同。不使用 vprod 函数有 28500 微秒，使用该函数有 29000 微秒`vprod`。这个数字是使用 Ox 优化获得的。如果启用了 inline 关键字，则更改优化不会影响比较，尽管数字有所提高。此外，如果不使用 inline 关键字（并且优化已关闭），则不使用 vprod 函数的时间为 32000，使用该函数的时间为 37000。因此函数调用开销可能在 5000 微秒左右。

新代码是：

```
#include <stdio.h>
#include <time.h>
#include <stdlib.h>
#include <iostream>
#include <mkl.h>

//#include <mkl_lapack.h>

void vprod( double *vgr, int ploc, double *vg1, double *vg2);

int main() {

    int nv=1000000;
    int dim=3*nv;
    double *v1, *v2, *vr; // Declare Pointers
    int ploc, i;
    double tiempo=0.0, tinicial;

     v1 = new double [dim];  //Allocate block of memory
     v2 = new double [dim];
     vr = new double [dim];

// Fill vectors with something
    for (i = 0; i < dim; i++) {
        v1[i] =1.25 +  (double)(i+1);
        v2[i] =2.62+ 2*(double)(i+7);
    }

    //------------------------------------------------------------------------
    std::cout << "RUTINA CON CODIGO INLINE: \n" ;

    tinicial = dsecnd();
    ploc = 0; // ploc points to an intermediate location.
    for (i=0; i<nv; i++){   
        vr[ploc] = v1[ploc+1]*v2[ploc+2]-v1[ploc+2]*v2[ploc+1]; 
        vr[ploc+1] =-(v1[ploc]*v2[ploc+2]-v1[ploc+2]*v2[ploc]);
        vr[ploc+2] = v1[ploc]*v2[ploc+1]-v1[ploc+1]*v2[ploc];
        ploc +=3;
    };

    tiempo = (dsecnd() - tinicial);
    std::cout << "Tiempo Total: " << tiempo << ".\n";
    std::cout << "Resultado: " << vr[0] << ".\n";

    delete v1,v2,vr;

v1 = new double [dim];  //Allocate block of memory
v2 = new double [dim];
vr = new double [dim];
    //------------------------------------------------------------------------

    //------------------------------------------------------------------------
    std::cout << "RUTINA LLAMANDO A FUNCION: \n" ;

    ploc=0;
    tinicial = dsecnd();
        for (i=0; i<nv; i++){   
        vprod ( vr, ploc, v1, v2);
        ploc +=3;
    };

    tiempo = (dsecnd() - tinicial);
    std::cout << "Tiempo Total: " << tiempo << ".\n";
    std::cout << "Resultado: " << vr[0] << ".\n";
    //------------------------------------------------------------------------

    std::cin.ignore();
    return 0;

}

inline void vprod( double *vgr, int ploc, double *vg1, double *vg2) {
        vgr[ploc]    =   vg1[ploc+1]*vg2[ploc+2]-vg1[ploc+2]*vg2[ploc+1]; 
        vgr[ploc+1]  = -(vg1[ploc]*vg2[ploc+2]-vg1[ploc+2]*vg2[ploc]);
        vgr[ploc+2]  =   vg1[ploc]*vg2[ploc+1]-vg1[ploc+1]*vg2[ploc];

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T17:57:28.387

我不知道您使用的是什么编译器（“MKL”是编译器套件吗？），但是无论您使用什么编译器，优化级别都会对您的代码性能产生巨大影响，有时甚至是多个订单幅度，取决于您的编码风格以及您是否尝试“玩花样”以使您的代码运行得更快。通常（尽管并非总是如此）最好让编译器为您发挥作用，而您只需专注于编写高效的算法而不是发挥编码技巧。

无论如何，我以各种方式在我的系统上运行您的代码，结果显示在下面的代码注释中......

```
#include <stdio.h>
#include <time.h>
#include <stdlib.h>
#include <iostream>
//#include <mkl.h>

// My standin for dsecnd() since I don't have "mkl.h"...
#include <sys/time.h>
double dsecnd()
{
    struct timeval tv;
    if (gettimeofday(&tv,NULL))
    {
        fprintf(stderr,"\ngettimeofday() error\n\n");
        exit(1);
    }
    return tv.tv_sec*1000000 + tv.tv_usec; // ...returns MICROSECONDS
    //return tv.tv_sec + ((double)tv.tv_usec)/1000000; // ...returns SECONDS
}

//---------------------------------
// Uncomment one or both of these to test variations....
//#define USE_INLINE_KEYWORD
//#define DEFINE_vprod_AT_TOP
//
// Using g++ (GCC) 4.1.2 20080704 (Red Hat 4.1.2-52) on an x86 machine...
//
//                                 microseconds          microseconds
//                               "hardcoded inline"   "via vprod() function"
//                                                     [i]=inlined, [-]=not
//                               ------------------   ----------------------
// inline keyword, at top
//      no optimization                 9501               17797 [-]
//      optimization -O1                   2   (see NOTE)      1 [i]
//      optimization -O2                   1                   1 [i]
//      optimization -O3                   0                   0 [i]
//
// no inline keyword, at top
//      no optimization                 9630               18203 [-]
//      optimization -O1                1257               10681 [-]
//      optimization -O2                1272               10694 [-]
//      optimization -O3                   0                   1 [i]
//
// inline keyword, at bottom
//      no optimization                 9763               18333 [-]
//      optimization -O1                   1                   0 [i]
//      optimization -O2                   2                   1 [i]
//      optimization -O3                   0                   0 [i]
//
// no inline keyword, at bottom
//      no optimization                 9900               18387 [-]
//      optimization -O1                1289               10714 [-]
//      optimization -O2                 795                6740 [-]
//      optimization -O3                   1                   0 [i]
//
// Note that in all cases, both results were reported as -213.458.
//
// NOTE: Especially since I'm using gettimeofday() instead of something
//       that returns process (CPU) time, all results may include some
//       time that the CPU spent processing other stuff, but even if
//       that weren't the case (i.e. even if I used a function that
//       returned only CPU time spent on this particular process), there
//       would still be the quantization error of +/-1 microsecond on
//       each end of the interval, meaning +/-2 microseconds overall.
//
/* My cut & paste "build & test script" to run on the Linux command prompt...

echo ""; echo ""; echo ""; echo ""; echo ""; echo ""; echo ""; echo ""; echo ""
rm -f a.out; g++ so.cpp
echo ""; echo "No optimization:---------------"; objdump -d a.out | grep call | grep vprod; a.out
rm -f a.out; g++ -O1 so.cpp
echo ""; echo "Optimization -O1:---------------"; objdump -d a.out | grep call | grep vprod; a.out
rm -f a.out; g++ -O2 so.cpp
echo ""; echo "Optimization -O2:---------------"; objdump -d a.out | grep call | grep vprod; a.out
rm -f a.out; g++ -O3 so.cpp
echo ""; echo "Optimization -O3:---------------"; objdump -d a.out | grep call | grep vprod; a.out

...if the "objdump -d a.out | grep call | grep vprod" command returns something
like "call   8048754 <_Z5vprodPdS_S_>", then I know that the call to vprod() is
NOT inlined, whereas if it returns nothing, I know the call WAS inlined.  There
is only one caller of vprod(), so the results can't be confusing.

*/
//
//---------------------------------

#ifdef DEFINE_vprod_AT_TOP
    #ifdef USE_INLINE_KEYWORD
        inline
    #endif
        void vprod( double vgr[3], double vg1[3], double vg2[3]){
        //void vprod( double *vgr, double *vg1, double *vg2){
            vgr[0] = vg1[1]*vg2[2]-vg1[2]*vg2[1];
            vgr[1] =-(vg1[0]*vg2[2]-vg1[2]*vg2[0]);
            vgr[2] = vg1[0]*vg2[1]-vg1[1]*vg2[0];
        }
#else
    // Declare (prototype) the function only if NOT defining it at the top...
    void vprod( double vgr[3], double vg1[3], double vg2[3]);
#endif

int main() {

    double v1[3]={1.22, 2.65, 3.65}, v2[3]={6.98, 98.159, 54.65}, vr[3];
    int LC=1000000L;
    int i,j,k;
    double tiempo=0.0, tinicial;

    //------------------------------------------------------------------------
    std::cout << "INLINE METHOD: " << std::endl;
    tinicial = dsecnd();
    for (i=0; i<LC; i++){
        vr[0] = v1[1]*v2[2]-v1[2]*v2[1];
        vr[1] =-(v1[0]*v2[2]-v1[2]*v2[0]);
        vr[2] = v1[0]*v2[1]-v1[1]*v2[0];
    };

    tiempo = (dsecnd() - tinicial);
    std::cout << "Tiempo Total:             " << tiempo << std::endl;
    std::cout << "Resultado: " << vr[0] << std::endl;
    //------------------------------------------------------------------------

    //------------------------------------------------------------------------
    std::cout << "FUNCTION METHOD: " << std::endl;

    tinicial = dsecnd();
    for (i=0; i<LC; i++){
        vprod (vr,v1,v2);
    };

    tiempo = (dsecnd() - tinicial);
    std::cout << "Tiempo Total:             " << tiempo << std::endl;
    std::cout << "Resultado: " << vr[0] << std::endl;
    //------------------------------------------------------------------------

//    std::cin.ignore();
    return 0;

}

#ifndef DEFINE_vprod_AT_TOP
    #ifdef USE_INLINE_KEYWORD
        inline
    #endif
        void vprod( double vgr[3], double vg1[3], double vg2[3]){
        //void vprod( double *vgr, double *vg1, double *vg2){
            vgr[0] = vg1[1]*vg2[2]-vg1[2]*vg2[1];
            vgr[1] =-(vg1[0]*vg2[2]-vg1[2]*vg2[0]);
            vgr[2] = vg1[0]*vg2[1]-vg1[1]*vg2[0];
        }
#endif 
```

现在，编译器使用的编码技巧不会随着优化级别的提高而以线性方式出现。编译器播放的技巧在不同的优化级别上打开，并且可能取决于您是否使用“内联”关键字。除了内联函数之外，编译器可能会采用（我的结果表明存在）不同类型的优化。有趣的是，正如我所读到的，“inline”关键字实际上只是向编译器建议您希望内联函数，并且可能只是调整一些阈值以确定是否内联可能已内联的函数无论如何，如果打开了优化。似乎在关闭优化的情况下，即使使用了“inline”关键字，该函数也根本没有被内联。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T15:13:46.213

马丁，你是绝对正确的（参考马丁的评论......我的 2012 年 10 月 5 日 17:57 回答下的第三条评论）。是的，似乎在更高的优化级别，编译器允许自己意识到它知道数组的传入值，因此它可以在编译时执行整个计算、循环和所有操作，并完全优化循环。

我将测试代码重新编码为三个单独的文件（一个头文件和两个源文件），并将计算和循环分解为一个单独的函数，以防止编译器对其优化过于智能。现在它无法将循环优化为编译时计算。以下是我的新结果。请注意，我在原来的 0 到 1000000 循环周围添加了另一个循环（0 到 50），然后除以 50。我这样做有两个原因：它允许我们将今天的数字与之前的数字进行比较，它还可以平均不规则由于在测试中间交换进程。这对您来说可能无关紧要，因为我认为 dsecnd() 仅报告其特定进程的 CPU 时间？

无论如何，这是我的新结果.......

（是的，“内联关键字，优化 -O1”比 -O2 或 -O3 快的奇怪结果是可重复的，“没有内联关键字，优化 -O1”的奇怪结果也是如此。我没有深入研究程序集看看为什么会这样。）

```
//========================================================================================
// File: so.h

void loop_inline( const int LC, double vgr[3], double vg1[3], double vg2[3]);
void loop_func( const int LC, double vgr[3], double vg1[3], double vg2[3]);

//---------------------------------
// Comment or uncomment to test both ways...
#define USE_INLINE_KEYWORD
//
// Using g++ (GCC) 4.1.2 20080704 (Red Hat 4.1.2-52) on an x86 machine...
//
//                                 microseconds          microseconds
//                               "hardcoded inline"   "via vprod() function"
//                                                     [i]=inlined, [-]=not
//                               ------------------   ----------------------
// inline keyword
//      no optimization                11734               14598 [-]
//      optimization -O1                4617                4616 [i]
//      optimization -O2                7754                7838 [i]
//      optimization -O3                7777                7673 [i]
//
// no inline keyword
//      no optimization                11807               14602 [-]
//      optimization -O1                4651                7691 [-]
//      optimization -O2                7755                7383 [-]
//      optimization -O3                7921                7432 [-]
//
// Note that in all cases, both results were reported as -213.458.
//
/* My cut & paste "build & test script" to run on the Linux command prompt...

echo ""; echo ""; echo ""; echo ""; echo ""; echo ""; echo ""; echo ""; echo ""
rm -f a.out; g++ -c so.cpp so2.cpp; g++ so.o so2.o;
echo ""; echo "No optimization:---------------"; objdump -d a.out | grep call | grep vprod; a.out
rm -f a.out; g++ -O1 -c so.cpp so2.cpp; g++ so.o so2.o;
echo ""; echo "Optimization -O1:---------------"; objdump -d a.out | grep call | grep vprod; a.out
rm -f a.out; g++ -O2 -c so.cpp so2.cpp; g++ so.o so2.o;
echo ""; echo "Optimization -O2:---------------"; objdump -d a.out | grep call | grep vprod; a.out
rm -f a.out; g++ -O3 -c so.cpp so2.cpp; g++ so.o so2.o;
echo ""; echo "Optimization -O3:---------------"; objdump -d a.out | grep call | grep vprod; a.out

...if the "objdump -d a.out | grep call | grep vprod" command returns something
like "call   8048754 <_Z5vprodPdS_S_>", then I know that the call to vprod() is
NOT inlined, whereas if it returns nothing, I know the call WAS inlined.

*/

//========================================================================================
// File: so.cpp

// Sorry so messy, I didn't bother to clean up the #includes.......
#include <stdint.h>
#include <inttypes.h>
#include <stddef.h> // for NULL
#include <stdlib.h> // for exit()
#include <stdio.h>
#include <stdio.h>
#include <time.h>
#include <stdlib.h>
#include <iostream>
//#include <mkl.h>

#include "so.h"

// My standin for dsecnd() since I don't have "mkl.h"...
#include <sys/time.h>
double dsecnd()
{
    struct timeval tv;
    if (gettimeofday(&tv,NULL))
    {
        fprintf(stderr,"\ngettimeofday() error\n\n");
        exit(1);
    }
    return tv.tv_sec*1000000 + tv.tv_usec; // ...returns MICROSECONDS
    //return tv.tv_sec + ((double)tv.tv_usec)/1000000; // ...returns SECONDS
}

//---------------------------------

#ifndef USE_INLINE_KEYWORD
    // We're NOT using the 'inline' keyword, so define vprod() in this
    // file so it can't possibly be inlined where it's called (in the
    // other source file).
    void vprod( double vgr[3], double vg1[3], double vg2[3]){
    //void vprod( double *vgr, double *vg1, double *vg2){
        vgr[0] = vg1[1]*vg2[2]-vg1[2]*vg2[1];
        vgr[1] =-(vg1[0]*vg2[2]-vg1[2]*vg2[0]);
        vgr[2] = vg1[0]*vg2[1]-vg1[1]*vg2[0];
    }
#endif

int main() {

    double v1[3]={1.22, 2.65, 3.65}, v2[3]={6.98, 98.159, 54.65}, vr[3];
    int LC=1000000L;
    int i, N=100;
    double tiempo=0.0, tinicial;

    //------------------------------------------------------------------------
    std::cout << "INLINE METHOD: " << std::endl;

    tinicial = dsecnd();

    for (i=0; i<N; ++i)
        loop_inline(LC,vr,v1,v2);

    tiempo = (dsecnd() - tinicial)/N;
    std::cout << "Tiempo Total:             " << tiempo << std::endl;
    std::cout << "Resultado: " << vr[0] << std::endl;
    //------------------------------------------------------------------------

    //------------------------------------------------------------------------
    std::cout << "FUNCTION METHOD: " << std::endl;
    tinicial = dsecnd();

    for (i=0; i<N; ++i)
        loop_func(LC,vr,v1,v2);

    tiempo = (dsecnd() - tinicial)/N;
    std::cout << "Tiempo Total:             " << tiempo << std::endl;
    std::cout << "Resultado: " << vr[0] << std::endl;
    //------------------------------------------------------------------------

//    std::cin.ignore();
    return 0;
}

//========================================================================================
// File: so2.cpp

#include "so.h"

#ifdef USE_INLINE_KEYWORD
    inline void vprod( double vgr[3], double vg1[3], double vg2[3]){
    //void vprod( double *vgr, double *vg1, double *vg2){
        vgr[0] = vg1[1]*vg2[2]-vg1[2]*vg2[1];
        vgr[1] =-(vg1[0]*vg2[2]-vg1[2]*vg2[0]);
        vgr[2] = vg1[0]*vg2[1]-vg1[1]*vg2[0];
    }
#else
    // Not using 'inline' keyword, so just declare (prototype) the
    // function here and define it in the other source file (so it
    // can't possibly be inlined).
    void vprod( double vgr[3], double vg1[3], double vg2[3]);
#endif

void loop_inline( const int LC, double vgr[3], double vg1[3], double vg2[3]){

    for (int i=0; i<LC; i++) {
        vgr[0] = vg1[1]*vg2[2]-vg1[2]*vg2[1];
        vgr[1] =-(vg1[0]*vg2[2]-vg1[2]*vg2[0]);
        vgr[2] = vg1[0]*vg2[1]-vg1[1]*vg2[0];
    }
}

void loop_func( const int LC, double vgr[3], double vg1[3], double vg2[3]){

    for (int i=0; i<LC; i++) {
        vprod (vgr,vg1,vg2);
    }
} 
```

# java - Types isAssignable and isSubtype misunderstanding

> ID：12749517
> 
> 赞同：11
> 
> 时间：2012-10-05T15:32:40.610
> 
> 标签：java, annotation-processing

In writing an Annotation Processor using the Java 6 API, I came across a need to handle all Maps in a particular fashion, but I'm clearly misunderstanding what the API is intended to do or how to invoke it. Here's the code that's making me unhappy:

```
import javax.lang.model.element.Element;
import javax.lang.model.type.TypeMirror;
import javax.lang.model.util.Elements;
import javax.lang.model.util.Types;
import javax.annotation.processing.ProcessingEnvironment;
...

public String doThing(Element el, ProcessingEnvironment processingEnv) {
    // Utilities from the ProcessingEnvironment
    Types typeUtils = processingEnv.getTypeUtils();
    Elements elementUtils = processingEnv.getElementUtils();

    // The type of the element I'm handling
    TypeMirror elType = el.asType();

    // Compare the element's type to Map
    TypeMirror mapType = elementUtils.getTypeElement("java.util.Map").asType();

    System.out.println(elType + " > " + mapType + " = " + typeUtils.isSubtype(elType, mapType));
    System.out.println(mapType + " > " + elType + " = " + typeUtils.isSubtype(mapType, elType));
    System.out.println(elType + " > " + mapType + " = " + typeUtils.isAssignable(elType, mapType));
    System.out.println(mapType + " > " + elType + " = " + typeUtils.isAssignable(mapType, elType));

    // Compare the element's type to HashMap
    TypeMirror hashmapType = elementUtils.getTypeElement("java.util.HashMap").asType();

    System.out.println(elType + " > " + hashmapType + " = " + typeUtils.isSubtype(elType, hashmapType));
    System.out.println(hashmapType + " > " + elType + " = " + typeUtils.isSubtype(hashmapType, elType));
    System.out.println(elType + " > " + hashmapType + " = " + typeUtils.isAssignable(elType, hashmapType));
    System.out.println(hashmapType + " > " + elType + " = " + typeUtils.isAssignable(hashmapType, elType));

    // Compare the element's type to Object
    TypeMirror objectType = elementUtils.getTypeElement("java.lang.Object").asType();

    System.out.println(elType + " > " + objectType + " = " + typeUtils.isSubtype(elType, objectType));
    System.out.println(objectType + " > " + elType + " = " + typeUtils.isSubtype(objectType, elType));
    System.out.println(elType + " > " + objectType + " = " + typeUtils.isAssignable(elType, objectType));
    System.out.println(objectType + " > " + elType + " = " + typeUtils.isAssignable(objectType, elType));
} 
```

Given that, here's the output of it:

```
java.util.HashMap<K,V> > java.util.Map<K,V> = false
java.util.Map<K,V> > java.util.HashMap<K,V> = false
java.util.HashMap<K,V> > java.util.Map<K,V> = false
java.util.Map<K,V> > java.util.HashMap<K,V> = false

java.util.HashMap<K,V> > java.util.HashMap<K,V> = true
java.util.HashMap<K,V> > java.util.HashMap<K,V> = true
java.util.HashMap<K,V> > java.util.HashMap<K,V> = true
java.util.HashMap<K,V> > java.util.HashMap<K,V> = true

java.util.HashMap<K,V> > java.lang.Object = true
java.lang.Object > java.util.HashMap<K,V> = false
java.util.HashMap<K,V> > java.lang.Object = true
java.lang.Object > java.util.HashMap<K,V> = false 
```

This makes perfect sense to me except for the first block where I'd expect a HashMap element to be assignable to Map, and I'd expect HashMap to be a subtype of Map.

What am I missing here?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T16:18:40.563

I suspect it's because of the type variables. `HashMap<String, String>` is assignable to `Map<String, String>` but without the concrete instantiation of the type variables you can't be sure that an arbitrary `HashMap<A,B>` is assignable to `Map<X,Y>`.

如果您使用通配符实例化变量，那么您应该得到您期望的结果

```
DeclaredType wildcardMap = typeUtils.getDeclaredType(
    elementUtils.getTypeElement("java.util.Map"),
    typeUtils.getWildcardType(null, null),
    typeUtils.getWildcardType(null, null)); 
```

这将为您提供类型 mirror `Map<?,?>`，所有`HashMap`实例化都可以分配给它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T19:16:00.863

**更新（2016 年 3 月）**：根据 @user1643723 的评论，似乎有一个[`types.erasure(TypeMirror)`](https://docs.oracle.com/javase/7/docs/api/javax/lang/model/util/Types.html#erasure(javax.lang.model.type.TypeMirror))我在 2012 年不知道的库函数。

* * *

根据[Ian's Answer](https://stackoverflow.com/a/12750242/1449525)，我现在使用以下方法来匹配我在问题中为 Map 描述的基本类型。

```
TypeElement COLLECTION = elementUtils.getTypeElement("java.util.Collection");
TypeElement MAP = elementUtils.getTypeElement("java.util.Map");
TypeElement VOID = elementUtils.getTypeElement("java.lang.Void");
WildcardType WILDCARD_TYPE_NULL = typeUtils.getWildcardType(null, null);
Map<String,DeclaredType> cachedParentTypes = new HashMap<String, DeclaredType>();

...

public static boolean isA(TypeMirror type, TypeElement typeElement) {

    // Have we used this type before?
    DeclaredType parentType = cachedParentTypes.get(typeElement.getQualifiedName().toString());
    if (parentType == null) {
        // How many generic type parameters does this typeElement require?
        int genericsCount = typeElement.getTypeParameters().size();

        // Fill the right number of types with nulls
        TypeMirror[] types = new TypeMirror[genericsCount];
        for (int i = 0; i < genericsCount; i++) {
            types[i] = WILDCARD_TYPE_NULL;
        }

        // Locate the correct DeclaredType to match with the type
        parentType = typeUtils.getDeclaredType(typeElement, types);

        // Remember this DeclaredType
        cachedParentTypes.put(typeElement.getQualifiedName().toString(), parentType);
    }

    // Is the given type able to be assigned as the typeElement?
    return typeUtils.isAssignable(type, parentType);
} 
```

我像这样调用

```
if (isA(elType, VOID)) {
    isVoid = true;
} else if (isA(elType, COLLECTION) || elType.getKind() == TypeKind.ARRAY) {
    isCollectionOrArray = true;
} else if (isA(elType, MAP)){
    isMap = true;
} 
```

# php - Symfony 2.1 扩展核心类

> ID：12749524
> 
> 赞同：2
> 
> 时间：2012-10-05T15:33:21.047
> 
> 标签：php, symfony, symfony-2.1, composer-php

我正在尝试用我自己的覆盖核心 Symfony 组件。我使用的方法是：

```
"autoload": {
    "psr-0": { 
                "": "src/",
                "Symfony": "src/vendor/symfony/src/"
             }
} 
```

但是，当我运行 composer update 并安装时，它似乎从未考虑到这一点。这不是强制自动加载器在 Symfony 核心之前先查看另一个目录的正确方法吗？

任何指针表示赞赏！

编辑：文件路径

src/vendor/symfony/src/Symfony/Bridge/Twig/Extension/TranslationExtension.php

src/vendor/symfony/src/Symfony/Component/Translation/Translator.php src/vendor/symfony/src/Symfony/Component/Translation/Loader/YamlFileLoader.php

```
<?php

// autoload_namespaces.php generated by Composer

$vendorDir = dirname(__DIR__);
$baseDir = dirname($vendorDir);

return array(
    'Twig_Extensions_' => $vendorDir . '/twig/extensions/lib/',
    'Twig_' => $vendorDir . '/twig/twig/lib/',
    'Symfony\\Bundle\\SwiftmailerBundle' => $vendorDir . '/symfony/swiftmailer-bundle/',
    'Symfony\\Bundle\\MonologBundle' => $vendorDir . '/symfony/monolog-bundle/',
    'Symfony\\Bundle\\AsseticBundle' => $vendorDir . '/symfony/assetic-bundle/',
    'Symfony' => array($vendorDir . '/symfony/symfony/src/', '/src/vendor/symfony/src/'),
    'SessionHandlerInterface' => $vendorDir . '/symfony/symfony/src/Symfony/Component/HttpFoundation/Resources/stubs',
    'Sensio\\Bundle\\GeneratorBundle' => $vendorDir . '/sensio/generator-bundle/',
    'Sensio\\Bundle\\FrameworkExtraBundle' => $vendorDir . '/sensio/framework-extra-bundle/',
    'Sensio\\Bundle\\DistributionBundle' => $vendorDir . '/sensio/distribution-bundle/',
    'Monolog' => $vendorDir . '/monolog/monolog/src/',
    'Metadata\\' => $vendorDir . '/jms/metadata/src/',
    'JMS\\SecurityExtraBundle' => $vendorDir . '/jms/security-extra-bundle/',
    'JMS\\DiExtraBundle' => $vendorDir . '/jms/di-extra-bundle/',
    'JMS\\AopBundle' => $vendorDir . '/jms/aop-bundle/',
    'Doctrine\\ORM' => $vendorDir . '/doctrine/orm/lib/',
    'Doctrine\\DBAL' => $vendorDir . '/doctrine/dbal/lib/',
    'Doctrine\\Common' => $vendorDir . '/doctrine/common/lib/',
    'Doctrine\\Bundle\\DoctrineBundle' => $vendorDir . '/doctrine/doctrine-bundle/',
    'CG\\' => $vendorDir . '/jms/cg/src/',
    'Assetic' => $vendorDir . '/kriswallsmith/assetic/src/',
    '' => $baseDir . '/src/',
); 
```

如果我手动将自动加载行编辑为：

```
'Symfony' => array('/Users/macbook/Sites/Opia/Gaia/src/vendor/symfony/src/', $vendorDir . '/symfony/symfony/src/'), 
```

一切都按预期工作。所以现在它基本上是找到为什么作曲家不能正确作曲的解决方案。

编辑2：

做一些更多的搜索，上面的方法似乎不是一个好的实现：

[https://groups.google.com/forum/#!msg/composer-dev/HprRV_wJZg4/M_zQ8O7lB6IJ](https://groups.google.com/forum/#!msg/composer-dev/HprRV_wJZg4/M_zQ8O7lB6IJ)

相反，我需要扩展给定的类并告诉 Symfony 使用这些类，这应该可以通过参数实现：

```
parameters: 
security.authentication.listener.anonymous.class: Acme\DemoBundle 
\Security\Http\Firewall\AcmeAnonymousAuthenticationListener 
```

但是我不确定我需要设置哪些参数来加载扩展类来代替核心​​。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T15:39:05.933

我终于找到了这个问题的答案。

首先，如果您需要找出要覆盖的类，请转到：

```
symfony/src/Symfony/Bundle/FrameworkBundle/Resources/%Your file to override%.xml 
```

在那里你会找到一个可以扩展/覆盖的可能的 Symfony 类的列表。

然后在您的 config.yml 添加（我选择将我的放在扩展命名空间中）：

```
parameters:
  twig.extension.trans.class: Extend\Symfony\Bridge\Twig\Extension\TranslationExtension
  translation.loader.yml.class: Extend\Symfony\Component\Translation\Loader\YamlFileLoader
  translator.class: Extend\Symfony\Bundle\FrameworkBundle\Translation\Translator 
```

最后在我的composer.json中：

```
"autoload": {
    "psr-0": { 
                "": "src/",
                "Extend\\Symfony": "/path/to/your/symfony/classes"
             }
}, 
```

# view - 在框架集中从一个视图拖动到另一个视图不会执行 PostDragDrop

> ID：12749527
> 
> 赞同：1
> 
> 时间：2012-10-05T15:33:27.513
> 
> 标签：view, lotus-notes, frameset, lotusscript

我在框架集中有两个并排视图，一个大纲视图和一个日历视图。在日历视图中，我可以在日期之间拖动，我的代码可以完美执行。但是，当我尝试从大纲视图拖动到日历视图上的日期时，日历视图上的 Postdragdrop 事件不会执行。

如何在框架集中的视图之间拖放？

谢谢。

# c - 无法使用#include 编译 C 代码 在赛格温

> ID：12749529
> 
> 赞同：4
> 
> 时间：2012-10-05T15:33:36.357
> 
> 标签：c, cygwin

我试图在 Windows 7 中使用 Cygwin 安装/编译 igraph 和 SNAP 等库（也尝试过 MinGW-MSYS），但遇到了一些问题。

我想我已经把问题缩小到了这个错误`./configure`：

```
checking sys/times.h usability... no
checking sys/times.h presence... no
checking for sys/times.h... no 
```

在 Cygwin 中，`/usr/include/sys/times.h`确实存在。我为 MinGW 搜索了这个，似乎 sys/times.h 不适用于 MinGW，因为“ *POSIX/BSD“times”函数不是 ANSI 标准的一部分，并且在 Mingw32 运行时不存在*”。

作为一个实验，我尝试在 Cygwin 中使用 gcc 编译这个 C 代码：

```
#include <stdio.h>
#include <sys/times.h>

int main (void) 
{

      return 0;
} 
```

这不编译，错误`sys/times.h no such file or directory`。即使我将 include 更改为`</usr/include/sys/times.h>`or也会发生这种情况`<usr/include/sys/times.h>`。在 Cygwin 命令中，promot`/usr/include/sys/times.h`工作正常。

**问题**

如何获得 sys/times.h 的可用性和存在性？有我可以安装的包或库吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T16:36:15.073

您的代码在我的 Cygwin 上编译没有问题。实际上`/usr/include`是 gcc 的默认包含搜索路径之一，因此通常 gcc 应该能够找到`sys/times.h`.

也许您使用的是 MinGW 版本的 gcc 而不是 Cygwin gcc？尝试`which gcc`确保它是`/usr/bin/gcc`，并`gcc --version`确保它不显示为`mingw32-gcc.exe (GCC) x.x.x`。

您还可以尝试使用详细输出编译您的 C 文件：

```
gcc -v test.c 
```

它显示了 gcc 如何搜索包含文件。`/usr/include`如果您使用 Cygwin 的 gcc，则应该是搜索路径列表之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T18:05:34.553

正如我发现的那样，这个问题似乎存在一些内在问题，并且 sys/times.h 不应该在 windows 下使用（由于某种原因不支持）。

正如我在[这里](https://stackoverflow.com/questions/15003250/compile-for-jni-in-windows-7/15177658#15177658)提到的，它的使用实际上应该从代码中删除以使其编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-29T23:55:57.640

我有同样的问题。删除文件夹 C:\cygwin64 。重新安装cygwin。选择所有默认值，但是当您进入“选择软件包”时，请确保一一搜索并选择以下内容： binutils ， make ， gcc-g++ 。对于每一个，选择下拉列表并将“跳过”表格更改为最新版本。继续，直到完成安装。从那里开始，一切都对我有用。

# c# - 如何为来自浏览器文本区域的换行符实现拆分？

> ID：12749531
> 
> 赞同：0
> 
> 时间：2012-10-05T15:33:42.333
> 
> 标签：c#

我有一个用户输入的浏览器文本框。我正在尝试以下方法来拆分他们通过换行输入的内容。我尝试了以下但没有工作。我要么得到错误，要么没有分裂：

```
content.Split("\n", StringSplitOptions.None) < gives me an error Error The best overloaded method match for 'string.Split(params char[])' has some invalid arguments    

content.Split('\n', StringSplitOptions.None) < gives an error: The best overloaded method match for 'string.Split(params char[])' has some invalid arguments

content.Split(new[] { Environment.NewLine }, StringSplitOptions.None) < doesn't split as needed. When I look at the source in debugger I just see \n characters. 

content.Split(new[] { "\r\n" }, StringSplitOptions.None) < doesn't split as needed. When I look at the source in debugger I just see \n characters. 
```

谁能建议我能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:35:19.017

正确调用`content.Split`：

```
content.Split(new [] { "\n" }, StringSplitOptions.None);
content.Split(new [] { '\n' }, StringSplitOptions.None); 
```

第三个选项不起作用，因为在 Windows 环境`Environment.NewLine`中是“\n\r”，但您的字符串仅包含“\n”。

在第四个选项中，您再次查找“\n\r”。

或者你可以使用

```
content.Split(new [] { '\r', '\n' }, StringSplitOptions.RemoveEmptyEntries); 
```

这将拆分“\r”和“\n”并删除所有空行。

# c# - 如何获取本地 Windows 用户列表（仅显示在 Windows 登录屏幕中的用户）

> ID：12749537
> 
> 赞同：9
> 
> 时间：2012-10-05T15:34:15.913
> 
> 标签：c#, wmi, user-accounts, userprincipal

如何获取本地 Windows 用户列表（仅显示在 Windows 登录屏幕中的用户）

我尝试了许多使用 Windows Principle 库和 WMI Select 命令的方法。我不断收到管理员、访客和其他一些奇怪的帐户（VUSRNEIL-DELL、$HOMEGROUPUSER、ASPNET...等）

这 3 个用户帐户都不会出现在登录屏幕上。如何区分这些用户类型？

我正在用 C# 编码

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T16:22:37.663

只需`System.Management`在控制台应用程序中添加对的引用并尝试以下代码：

```
using System;
using System.Management;
using System.Linq;

namespace ConsoleApplication5
{
    class Program
    {
        static void Main(string[] args)
        {
            ManagementObjectSearcher usersSearcher = new ManagementObjectSearcher(@"SELECT * FROM Win32_UserAccount");
            ManagementObjectCollection users = usersSearcher.Get();

            var localUsers = users.Cast<ManagementObject>().Where(
                u => (bool)u["LocalAccount"] == true &&
                     (bool)u["Disabled"] == false &&
                     (bool)u["Lockout"] == false &&
                     int.Parse(u["SIDType"].ToString()) == 1 &&
                     u["Name"].ToString() != "HomeGroupUser$");

            foreach (ManagementObject user in localUsers)
            {
                Console.WriteLine("Account Type: " + user["AccountType"].ToString());
                Console.WriteLine("Caption: " + user["Caption"].ToString());
                Console.WriteLine("Description: " + user["Description"].ToString());
                Console.WriteLine("Disabled: " + user["Disabled"].ToString());
                Console.WriteLine("Domain: " + user["Domain"].ToString());
                Console.WriteLine("Full Name: " + user["FullName"].ToString());
                Console.WriteLine("Local Account: " + user["LocalAccount"].ToString());
                Console.WriteLine("Lockout: " + user["Lockout"].ToString());
                Console.WriteLine("Name: " + user["Name"].ToString());
                Console.WriteLine("Password Changeable: " + user["PasswordChangeable"].ToString());
                Console.WriteLine("Password Expires: " + user["PasswordExpires"].ToString());
                Console.WriteLine("Password Required: " + user["PasswordRequired"].ToString());
                Console.WriteLine("SID: " + user["SID"].ToString());
                Console.WriteLine("SID Type: " + user["SIDType"].ToString());
                Console.WriteLine("Status: " + user["Status"].ToString());
            }

            Console.ReadKey();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T15:41:16.060

如果您使用 WMI 进行查询`Win32_UserAccount`，则只能显示满足以下条件的项目：

*   属性`AccountType`有`UF_NORMAL_ACCOUNT`标志。
*   属性`Disabled`是`false`。
*   属性`Lockout`是`false`。
*   属性`LocalAccount`是`true`。
*   属性`SIDType`是`SidTypeUser`。

如果你不能使用 WMI（或者你不想使用它）那么你必须做更多的工作，基本上你必须使用[NetGroupGetUsers](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370430%28v=vs.85%29.aspx)函数来枚举所有用户。有关示例，请参阅[CodeProject 上的这篇文章。](http://www.codeproject.com/Articles/2937/Getting-local-groups-and-member-names-in-C)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-22T18:51:15.510

如果您想使用包装解决方案，NuGet 有“Continuous.Management”包 - 这是一个开源项目：[https ://github.com/jarzynam/continuous](https://github.com/jarzynam/continuous)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-06-01T00:17:47.357

这将为您提供所有用户帐户、其域、全名和 SID 的列表。

```
wmic useraccount get domain,name,sid 
```

# python - 将堆积列表变成可用数据

> ID：12749538
> 
> 赞同：0
> 
> 时间：2012-10-05T15:34:18.007
> 
> 标签：python, excel

在 Excel 中，我有一个在单元格中显示为堆叠的名称列表，并且我希望每个名称都在其自己的列中。我在想 Python 可能是做到这一点的好方法？

例子：

```
Joe Smith
John Hawk
Mike Green
Lauren Smith 
```

一个单元格看起来完全一样，每个名称都在单元格内的行上，但所有名称都包含在单元格中。我有 50 个单元格，每个单元格都有 1-20 个堆叠的名称，我想将每个名称放在给定行的自己的单元格中。因此，在我的示例中，所有这些名称都将占据同一行，但每个名称都有自己的列。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:40:34.470

如果你打算使用 python，你可以将你的 excel 导出到 csv。

然后使用 python，您可以使用`csv`模块（`csv.reader`）打开您的 csv：http: [//docs.python.org/library/csv.html](http://docs.python.org/library/csv.html)

从那里你可以迭代你的csv的每一行。

每行的第一个索引将包含一串堆叠的名称。

您可以使用方法将名称拆分为列表`split`。从那里您可以将这些值作为一行写入输出 csv（使用`csv.writer`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:19:27.437

如果您可以在 excel 中执行此操作，则以下代码应该适合您：

```
Sub SplitCellsAndExtend_Old()
'takes cells with inside line feeds and creates new row for each.

Dim strCell As String, lastRow As Long, i As Long, j As Long
application.ScreenUpdating = False
lastRow = Cells(Rows.Count, 1).End(xlUp).Row

    For i = lastRow To 1 Step -1
        strCell = Cells(i, 1)
        j = 0

        Do While InStr(1, strCell, Chr(10)) > 0
            Rows(i + j + 1).Insert
            strCell = Right(strCell, Len(strCell) - InStr(1, strCell, Chr(10)))
            Cells(i + j, 1) = Left(Cells(i + j, 1).Value, InStr(1, Cells(i + j, 1), Chr(10)) - 1)
            Cells(i + j + 1, 1).Value = strCell
            Cells(i + j + 1, 1).Value = Cells(i, 1)
            j = j + 1
        Loop
    Next
application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T18:31:28.290

好吧，您的问题起初并不清楚，但是由于有人对其进行了编辑，我想我明白您想要什么。

假设您使用的是 Windows，并且您可以访问记事本和写字板（这些应该在您的附件文件夹中 - 与您的计算器相同）

突出显示您的单元格并复制它们 - 然后将它们粘贴到记事本文档中。

![来自Excel](../Images/d5eb810f6a2858417280bbd800bf5a73.png) 它应该如下所示： ![记事本](../Images/0060c62707d04f3c49a5ece5d45e7eb9.png) 然后复制并粘贴记事本中的内容并将其粘贴到 wordpad 中，它应该如下所示： ![到写字板](../Images/20e03fe707c1ded45597ca8c0aa8fb7a.png) 然后在 wordpad 中找到并替换引号： ![查找并替换引号](../Images/3f170d476638e762fef7982a779cea80.png) 然后将其复制并粘贴回 Excel 中，您应该会得到什么你要： ![返回Excel结果](../Images/463910c318b19ca7465836254a1f886d.png)

这是一种奇怪的方式 - 但它应该适合你。我经常发现通过这个管道（或它的变体）运行很多类型的东西可以消除不必要的格式化项目。所以它对很多事情都有好处。祝你好运

# sublimetext2 - Sublime Text 2 上无干扰模式的文件选项卡

> ID：12749540
> 
> 赞同：19
> 
> 时间：2012-10-05T15:34:38.703
> 
> 标签：sublimetext2

如何在 Sublime Text 2 的无干扰模式下显示文件选项卡？我应该在我的`Distraction Free.sublime-settings`?

谢谢！:)

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-05T16:24:10.383

如果您在屏幕上方移动鼠标，您可以访问菜单。

在`View`你可以选择`Show Tabs`

![显示标签](../Images/7207ec61559b49a382dd31e54e9fc16c.png)

下次进入无干扰模式时会记住该设置。

`Distraction Free.sublime-settings`似乎不适用于 UI chrome 设置。

# xml - 独特的价值问题

> ID：12749542
> 
> 赞同：2
> 
> 时间：2012-10-05T15:34:46.090
> 
> 标签：xml

我有2个xml文件如下：

```
staff.xml
<staff>
  <person>
    <PID>1</PID>
    <name>John</name>
  </person>
  <person>
    <PID>2</PID>
    <name>Rain</name>
  </person>
  <person>
    <PID>3</PID>
    <name>Bain</name>
  </person>
</staff>

fruit.xml
<fruit>
  <fruitname PID="1" >Apple<fruitname>
  <fruitname PID="1" >Orange<fruitname>
  <fruitname PID="2" >Orange<fruitname>
</fruit> 
```

我写的代码如下：输出是重复名称列表。现在的问题是我希望只返回一次而不是多次返回吃橙子的人的名字。是否可以执行类似返回不同值（$/name）之类的操作，或者有没有其他方法可以删除重复项？

```
for $s in doc("staff.xml")//person
for $f in doc("fruit.xml")//fruitname
where $s/PID=$f/@PID and $/f[@type="orange"]
return $s/name 
```

我尝试了类似下面的方法，但它将其更改为没有重复的原子值。但问题是我需要将输出作为元素而不是原子值。

```
 distinct-values(
    for $s in doc("staff.xml")//person
    for $f in doc("fruit.xml")//fruitname
    where $s/PID=$f/@PID and $/f[@type="orange"]
    return $s/name) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T04:59:26.287

尝试这个

```
for $i in doc('test')//fruit
   return $i/fruitname[(index-of(doc('test')//fruit/fruitname, .)[position() > 1])[1]]/string() 
```

对于fruits.xml

```
<fruit>
    <fruitname PID="1" >Apple</fruitname>
    <fruitname PID="1" >Orange</fruitname>
    <fruitname PID="2" >Orange</fruitname>
    <fruitname PID="3" >Pears</fruitname>
    <fruitname PID="2" >Mango</fruitname>
    <fruitname PID="1" >Apple</fruitname>
    <fruitname PID="4" >Guava</fruitname>
    <fruitname PID="5" >Orange</fruitname>
</fruit> 
```

Xquery 结果

```
 Orange Apple 
```

在这里试试：http: [//basex.org/products/live-demo/](http://basex.org/products/live-demo/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:05:53.373

**使用**：

```
for $pid in distinct-values(doc("fruit.xml")/*/*[@type eq 'orange']/@PID)
  return
    doc('staff.xml')/*/*[PID eq $pid][1]/name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:13:23.773

你甚至可以使用隐式连接来做到这一点：

```
doc("staff.xml")//person[PID = doc("fruit.xml")//fruitname[@type="orange"]/@PID] 
```

# mysql - PHP/MySQL 中事件日历的最佳方法

> ID：12749546
> 
> 赞同：-2
> 
> 时间：2012-10-05T15:35:10.193
> 
> 标签：mysql, database, datetime, calendar

我正在使用 MySQL 和 PHP 编写活动日历。

我已经设置了一个包含日期和时间的表格，并且日历工作得很好。我必须为多个房间制作一个活动日历，所以我想我必须为每个添加到数据库的新房间创建一个表。

考虑到我的日历是按半小时和一小时的间隔划分的，我的索引列是这样的：`2010-1-1 00:00:00`，`2010-1-1 00:30:00`，`2010-1-1 01:00:00`等等，大约 25 年后的未来。还有另一列带有事件 ID。

我认为每次添加一个房间都会花费太多时间和空间，因为必须创建一个新的 HUGE 表。有没有更简单的方法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:06:52.573

如果您创建包含以下内容的事件表：

```
event_id, room_id, title, start_date(datetime), end_date(datetime) 
```

然后，您可以检查房间 1 是否在上午 11:30 到下午 1:30 之间被占用：

```
select count(event_id) from events where room_id = 1 and ((end_date > '2012-10-02 11:30:00')
AND (start_date < '2012-10-02 13:30:00')); 
```

任何大于 0 的值都表示该日期时间范围内房间 1 中的现有事件。或者您可以返回冲突事件并通过选择`*`而不是向用户显示`count(event_id)`

# c# - 使用“new”关键字使用反射创建对象

> ID：12749549
> 
> 赞同：3
> 
> 时间：2012-10-05T15:35:19.320
> 
> 标签：c#, class, object, reflection, keyword

我对反射完全陌生，我试图从数据库记录中调用一个类名，然后加载该类并运行它，但我正在把我的头发拉到我要去的地方，这可能真的很愚蠢我迷路了。

作为示例，我将我的类放在不同的项目和脚本文件夹中，然后从 db 记录中调用它的名称。

```
className = String.Format("Utilities.Scripts.{0}", script.ScriptClass); 
```

然后在我的主程序中

```
// Get a type from the string 
Type type = Type.GetType(className);

// Create an instance of that type
Object obj = Activator.CreateInstance(type);

// Retrieve the method you are looking for
MethodInfo methodInfo = type.GetMethod("start");

// Invoke the method on the instance we created above
methodInfo.Invoke(obj, null); 
```

但是我得到了错误，因为在调试时我可以看到我的详细信息传递到 GetType(className) 但没有任何东西进入类型，因此进入出错的 obj 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:51:27.150

您需要提供类型的[程序集限定名称（如此](http://msdn.microsoft.com/en-us/library/system.type.assemblyqualifiedname.aspx)[处](http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx)所述），因为该类位于不同的项目中。此外，请确保您尝试从中加载类型的程序集与尝试加载它的程序集位于同一文件夹中，或者位于 GAC 中。

对于定义如下的类：

```
namespace Foo.Bar
{
    public class Class1
    {

    }
} 
```

完整的类名是`Foo.Bar.Class1`. 程序集限定名称还指定程序集的全名，如`Foo.Bar.Class1, Foo.Bar, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35`. 您可以通过以下方式找到您的类型的程序集限定名称：

```
Console.WriteLine(typeof(Foo.Bar.Class1).AssemblyQualifiedName) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:02:25.780

问题出在这一行：

```
Type type = Type.GetType(className); 
```

因为当无法解析类型时，该方法的这种特殊重载不会引发异常。而是使用[这个需要 2 个布尔值的重载](http://msdn.microsoft.com/en-us/library/a87che9d.aspx)，其中一个是`throwOnError`. 为这个参数传递 true ，你会得到一个异常，它应该可以帮助你调试为什么你的类型不能从你传入的字符串中解析出来。

我怀疑你需要一个类名*和*程序集名

```
Utilities.Scripts.SomeClass, SomeAssemblyName 
```

# qt - 如何在 Qt Creators' Projects 列表中消除同名子目录的歧义？

> ID：12749552
> 
> 赞同：3
> 
> 时间：2012-10-05T15:35:32.120
> 
> 标签：qt, qmake

我的 Qt 项目有 2 个同名的子目录/子项目。他们的目录是`myproject/node`和`myproject/compiler/test/node`。

问题（或烦恼）是，在 Qt Creator 的项目列表中，两个子目录都被列为“节点”。因此，您必须打开它们才能确定哪个是哪个。

myproject.pro 是这样的：

```
TEMPLATE = subdirs

SUBDIRS += \
    compiler_test_node \
    node \
        ...

compiler_test_node.subdir = compiler/test/node
node.depends = compiler_vuo_compile
... 
```

如果不重命名`myproject/compiler/test/node`目录，有没有办法让它在项目列表中显示为不同的名称？

# sas - 使用 SAS 计算具有缺失值的平均值

> ID：12749553
> 
> 赞同：3
> 
> 时间：2012-10-05T15:35:36.660
> 
> 标签：sas

假设我们有 20 个科目，每个科目有四个变量：X1、X2、X3 和 X4。我想计算每个主题的平均值，但问题是只要有缺失值，SAS 就不会给出平均值。如何在调整 n 时做到这一点（如果没有缺失值，n=4，如果有一个缺失值，则 n=3，等等）谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T16:10:42.033

使用`mean`功能：

```
average = mean(x1,x2,x3,x4); 
```

或者

```
average = mean(of x1-x4); 
```

# jquery - jQuery .$.ajax 不工作

> ID：12749558
> 
> 赞同：-2
> 
> 时间：2012-10-05T15:35:46.973
> 
> 标签：jquery, ajax, facebook

我正在使用`$.ajax`Facebook Invite 并调用 URL（Yii 框架控制器）。以下代码的`$.ajax`一部分不起作用：

```
function FacebookInviteFriends()
{
    FB.ui
    ( 
    { 
        method : 'apprequests',
        data: '',
        display: 'dialog',
        title  : 'Invite a Friend',
        message: 'I just sent you an invitation to play My Game.',
        filters: ['app_non_users']
    }, function(response)
    {   
        alert("start"); 
        if (response && response.to) 
        {       
            alert("inside if"); 
            $.ajax({
                url: 'http://localhost:83/invitechips/createRecord',
                type: 'POST',                                        
                data: {id : response.to}                    
            }).done(function() {
                alert( "Data Saved: ");
            });                               
        }
        else 
        {
            alert("inside else");                 
        }
    }
    );           
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:39:35.270

在你的 ajax 调用中，你有 url 和 type 之类的东西，你需要添加一些东西来处理错误，比如：

```
 error: function(xhr, status, error) {
              // perform operations on error
              alert(xhr.responseText);
        }, 
```

所以你会有

```
 $.ajax({
                url: 'http://localhost:83/invitechips/createRecord',
                type: 'POST',   
                 error: function(xhr, status, error) {
                        // perform operations on error
                        alert(xhr.responseText);
                 },                                 
                 data: {id : response.to}                    
            }).done(function() {
                alert( "Data Saved: ");
            }); 
```

以便您获得更多详细信息。您是否将此代码托管在某个地方？

# youtube - 使用 Javascript API 在用户墙上嵌入 Youtube 视频

> ID：12749559
> 
> 赞同：1
> 
> 时间：2012-10-05T15:35:49.307
> 
> 标签：youtube, facebook-javascript-sdk, embed, facebook-opengraph, facebook-wall

我正在尝试使用 Javascript API 在用户的墙上嵌入 Youtube 视频。我倾注了一堆不同的教程并想出了这个：

```
var data = {
    method: 'feed',
    link: current_video_url, // Link to the vide on our site
    source: current_video_src, // Link to the Youtube video, http://youtube.com/v/[hash]
    picture: current_picture_url, // Thumbnail from youtube
    title: current_video_title, // Title from our page
    caption: current_video_description // Text from our page
}

FB.ui(data); 
```

运行 Facebook 调试器显示`current_video_url`链接已正确解析为 OG 标签，并可作为嵌入式视频使用。我运行了一个调试器，所有变量都在变量中正确设置`data`。

这工作了大约 2 天，然后我们将网站推送到现场。我们在 Facebook 中设置了一个新的 AppID，但现在所有的视频都只是缩略图，而不是嵌入到用户的墙中。我想这可能是现场网站的问题，但现在开发网站也坏了。

让它始终如一地工作的最佳方法是什么？

# c++ - c++ 的 Poco 库，为自定义元素声明命名空间

> ID：12749569
> 
> 赞同：2
> 
> 时间：2012-10-05T15:36:16.420
> 
> 标签：c++, poco-libraries

我想通过从头开始构建一个 DOM 文档来创建一个 XML 文档，语法如下：

```
AutoPtr<Document> doc = new Document;
AutoPtr<Element> root = doc->createElement("root");
doc->appendChild(root);
AutoPtr<Element> element1 = doc->createElementNS("http://ns1", "ns1:element1");
root->appendChild(element1);
AutoPtr<Element> element2 = doc->createElementNS("http://ns1", "ns1:element2");
root->appendChild(element2);

DOMWriter writer;
writer.setNewLine("\n");
writer.setOptions(XMLWriter::PRETTY_PRINT);
writer.writeNode(std::cout, doc); 
```

但是，当我写它时，我得到下一个结果：

```
<root>
   <ns1:element1 xmlns:ns1="http://ns1"/>
   <ns1:element2 xmlns:ns1="http://ns1"/>
</root> 
```

所以命名空间 ns1 声明了两次，我想在“根”元素中声明它。有没有办法获得下一个表示：

```
<root xmlns:ns1="http://ns1"/>
   <ns1:element1/>
   <ns1:element2/>
</root> 
```

# c# - 如何添加到列表 另一个数组长？

> ID：12749577
> 
> 赞同：0
> 
> 时间：2012-10-05T15:36:52.320
> 
> 标签：c#, arrays, list

我这样做：

```
long[] HistogramValues = Form1.GetHistogram(bitmap);
Form1.Histograms.AddRange(HistogramValues); 
```

但直方图也包含 256 个值，如 HistogramValues。我希望在索引 [0] 的直方图中，将有来自 HistogramValues 的 256 个值，然后在 [1] 中还有 256 个值，然后是 [2]，依此类推。

直方图是一个列表

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T15:39:50.490

你需要的是一个数组列表

```
List<long[]> Histograms = new List<long[]>(); 
```

然后添加数组

```
long[] HistogramValues = Form1.GetHistogram(bitmap);
Form1.Histograms.Add(HistogramValues); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:41:19.020

长数组列表 -`List<long[]>`

```
class Form1
{
    public Form1()
    {
         this.Histograms = new List<long[]>();
    }

    public List<long[]> Histograms { get; private set; }
}

long[] histogramValues = Form1.GetHistogram(bitmap);
Form1.Histograms.Add(histogramValues); 
```

然后您可以这样访问每个直方图：

```
long[] fifthHistogram = Form1.Histograms[4]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T15:43:22.107

听起来你想要一个二维数组或嵌套列表：

```
long[,] longArray = new long[16, 256];
List<List<long>> longList = new List<List<Long>>(); 
```

对于数组，您将有 16 列，每列有 256 个值。对于 List 实现，您可以根据需要添加任意数量的...可能`longList[0] = new List<long>(256)`适合您的情况，但这些列表无论如何都不受约束。

**其他资源：**

[MSDN 多维数组](http://msdn.microsoft.com/en-us/library/2yd9wwz4%28v=vs.100%29.aspx)

# intersystems-cache - Caché Object Script 将参数传递给基本构造函数的方法是什么？

> ID：12749578
> 
> 赞同：1
> 
> 时间：2012-10-05T15:37:06.517
> 
> 标签：intersystems-cache, intersystems, intersystems-ensemble

Caché Object Script 将参数传递给基本构造函数的方法是什么？

例如，在 C# 中，您将执行以下操作：

```
public MyConstructor(string id) : base(id) { } 
```

`id`您希望传递给基本构造函数的值在哪里。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T16:22:28.423

```
Do ##super(id) 
```

super 必须小写。

# c# - 为什么我会收到 .UnauthorizedAccessException？

> ID：12749580
> 
> 赞同：0
> 
> 时间：2012-10-05T15:37:21.847
> 
> 标签：c#, wpf, windows-phone-7, backgroundworker

我正在尝试将媒体库中的图像检索到列表框“lstImageFromMediaLibrary”内的扭曲面板，还尝试在图像加载时使用用户控件显示加载屏幕并将其添加到 popup.child 但我收到此异常“UnauthorizedAccessException” ' 当我删除所有与 backgrougWorker 相关的代码时，不存在此类未经授权的访问......

```
 void backroungWorker_DoWork(object sender, DoWorkEventArgs e)
      {

        foreach (Picture p in mediaLibrary.Pictures)
        {

            bitmapImage.SetSource(p.GetThumbnail());
            lstBitmapImage.Add(bitmapImage);
        }

        this.lstImageFromMediaLibrary.ItemsSource = lstBitmapImage;
    } 
```

任何帮助都会得到帮助，我希望我能说清楚....

编辑：好的，所以现在我这样做

```
 BackgroundWorker backroungWorker = new BackgroundWorker();
    Popup popup = new Popup();
    public PanoramaPage1()
    {

        InitializeComponent();

        showpopup();
        init();
    }

    private void init()
    {
        backroungWorker.WorkerReportsProgress = true;
        backroungWorker.DoWork += new DoWorkEventHandler(backroungWorker_DoWork);
        backroungWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(backroungWorker_RunWorkerCompleted);
        backroungWorker.ProgressChanged+=new ProgressChangedEventHandler(backroungWorker_ProgressChanged);
        backroungWorker.RunWorkerAsync();
    }
     void backroungWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        this.Dispatcher.BeginInvoke(() =>
        {
            popup.IsOpen = false;
        }
        );
    }
     void backroungWorker_DoWork(object sender, DoWorkEventArgs e)
     {
         backroungWorker.ReportProgress(10);

     }
     void backroungWorker_ProgressChanged(object sender, ProgressChangedEventArgs e)
     {
         this.InitializePage();
     }

    private void showpopup()
    {

        popup.Child = new SplashScreenControl();
        popup.Width = 480;
        popup.IsOpen = true;

    }

    private void InitializePage()
    {

        MediaLibrary mediaLibrary = new MediaLibrary();
        List<BitmapImage> lstBitmapImage = new List<BitmapImage>();
        foreach (Picture p in mediaLibrary.Pictures)
        {
            BitmapImage bitmapImage = new BitmapImage();
            bitmapImage.SetSource(p.GetThumbnail());
            lstBitmapImage.Add(bitmapImage);
        }

        this.lstImageFromMediaLibrary.ItemsSource = lstBitmapImage;
    } 
```

但进度条仍然只显示一个点，没有别的.....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:44:33.990

您正在[DoWork](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.dowork.aspx)活动中访问您的用户界面。您应该通过诸如[ProgressChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.progresschanged.aspx)或[RunWorkerCompleted](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.runworkercompleted.aspx)事件之类的后台 Worker 事件与您的应用程序进行通信。

从第一个链接：

> 您必须小心不要在 DoWork 事件处理程序中操作任何用户界面对象。相反，通过 BackgroundWorker 事件与用户界面进行通信。

# javascript - jQuery如果输入为空

> ID：12749584
> 
> 赞同：-1
> 
> 时间：2012-10-05T15:37:41.610
> 
> 标签：javascript, jquery

```
 $("#search_input").autocomplete({
    source: results,
    select: function(e, i) {
  $('#searchresultdata').text(i.item.value);
 }
    }).on("keyup change",function() {
    var search_input = $(this).val();
    if (search_input.length > 0 && search_input != "Begin typing to search...") {
        $('#searchresultdata').text("RAWR");
    }
    $('#searchresultdata').text(search_input);
}
); 
```

这就是我的搜索框代码（search_input）。基本上，我只是想要它，以便如果该框为空或包含“开始输入搜索...”以显示 RAWR，如果没有，则显示输入到 search_input 中的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:39:26.610

`.text(search_input);`无论您的条件是否匹配，您都在打电话。

您需要将其放入`else`语句中：

```
if (search_input.length > 0 && search_input != "Begin typing to search...") {
        $('#searchresultdata').text("RAWR");
    }
    else
    {
        $('#searchresultdata').text(search_input);
    } 
```

# mysql - 在 Ja-sig CAS 中使用 MySQL 数据库进行身份验证

> ID：12749590
> 
> 赞同：3
> 
> 时间：2012-10-05T15:38:05.713
> 
> 标签：mysql, jdbc, cas, apache-commons-dbcp, jasig

我正在尝试将我的 Ja-sig CAS 服务器（在 Tomcat7 上运行的 v3.5）连接到 MySQL 数据库以进行用户身份验证。我基本上在数据库中有一个“用户”表，用于存储我希望 CAS 检查的用户名/密码对。但是，我什至很难部署我当前的配置。

这是 pom.xml 的摘录，因为它与数据库连接有关：

```
<dependency>
   <groupId>org.jasig.cas</groupId>
   <artifactId>cas-server-support-jdbc</artifactId>
   <version>${cas.version}</version>
</dependency>

<dependency>
   <groupId>commons-dbcp</groupId>
   <artifactId>commons-dbcp</artifactId>
   <version>1.4</version>
   <scope>runtime</scope>
</dependency>

<dependency>
   <groupId>mysql</groupId>
   <artifactId>mysql-connector-java</artifactId>
   <version>5.1.22-bin</version>
   <scope>provided</scope>
</dependency> 
```

这里是我尝试在 WEB-INF/deployerConfigContext.xml 中设置数据库连接的地方：

```
<bean
class="org.jasig.cas.adaptors.jdbc.SearchModeSearchDatabaseAuthenticationHandler">
   <property name="tableUsers">
       <value>users</value>
   </property>
   <property name="fieldUser">
       <value>username</value>
   </property>
   <property name="fieldPassword">
       <value>password</value>
   </property>
   <property name="passwordEncoder">
       <bean
             class="org.jasig.cas.authentication.handler.DefaultPasswordEncoder">
        <constructor-arg value="MD5" />
       </bean>
   </property>
   <property name="dataSource" ref="dataSource" />
</bean>

<bean id="datasource"
      class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName">
        <value>com.mysql.jdbc.Driver</value>
    </property>
    <property name="url">
        <value>jdbc:mysql://localhost:3306/cas_db</value>
    </property>
    <property name="username">
        <value>cas_server</value>
    </property>
    <property name="password">
        <value>pass</value>
    </property>
</bean> 
```

它使用 Maven 构建得非常好，但是当我尝试使用 Tomcat 部署它时它不起作用。我无法在任何 tomcat 日志中找到任何特别有用的信息。我想知道“commons-dbcp”是否存在问题，因为当我将其注释掉并在 deployerConfigContext.xml 中使用简单的身份验证处理程序时，我就可以进行部署了。

从我目前的网络研究来看，这方面的文档似乎很少/很差。如果有人有任何好的资源，他们也可以推荐，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T16:32:09.047

终于在tomcat日志localhost.YYYY-MM-DD.log中发现了一丝错误。事实证明，我需要添加 commons-pool：

```
<dependency>
   <groupId>commons-pool</groupId>
   <artifactId>commons-pool</artifactId>
   <version>1.6</version>
   <scope>provided</scope>
</dependency> 
```

commons-dbcp 依赖于哪个。用 Maven 安装它消除了我得到的缺少的类异常。

我的下一个问题是我在 deployerConfigContext.xml 的 authenticationHandlers 列表中错误地定义了我的数据源 bean，这导致了类型转换异常。将 bean 从列表标记中移出就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-15T11:01:37.640

在 CAS + JDBC 身份验证的官方指南之一（[https://wiki.jasig.org/display/CASUM/Using+JDBC+for+Authentication](https://wiki.jasig.org/display/CASUM/Using+JDBC+for+Authentication)）中，他们对此发表了评论：

> 注意：建议将 commons-dbcp 1.2.1 与 MySQL 一起使用，而不是较新的版本。我发现新版本（1.2.2）在你的CAS空闲超过8小时后会导致MySQL中的Socket写入错误，这是MySQL将清理所有空闲连接的时间。

您的问题可能与*commons-dbcp*的版本有关。就我而言，我的配置与您的配置相似，但在 commons-dbcp 版本上有所不同，我使用的是 1.4（没问题）

# android - 单击前景中的某些内容后，背景中的项目将获得焦点

> ID：12749591
> 
> 赞同：0
> 
> 时间：2012-10-05T15:38:13.793
> 
> 标签：android, background, focus, sencha-touch-2, cordova-2.0.0

使用 Sencha Touch 2.0.1.1 和 Cordova 2.0.0，我在元素的焦点上遇到了麻烦。

在多种情况下，背景中的元素会在前景中的元素被点击消失后获得焦点。

*   单击 Ext.Msg.alert() 的 OK 按钮后，焦点立即转移到背景中掩码后面的底层文本字段
*   当单击 WNielson 的 Facebook 菜单上的 slideButton 时，焦点立即转移到位于 slideButton 下方的搜索字段（[https://github.com/wnielson/sencha-SlideNavigation](https://github.com/wnielson/sencha-SlideNavigation)）
*   当单击 WNielson 的 facebook 菜单上的列表项时，我会立即被重定向到菜单“下方”的链接。

**这仅**发生在 Android~~和 iOS~~ 上，但不会发生在 PC 或 iOS 上的 Chrome 中。我尝试禁用背景元素/视图，直到前景元素消失，但这似乎不起作用。

 **有没有人可以解决这个问题？这是煎茶触摸中的错误吗？

编辑：我在[http://www.senchafiddle.com/full/!NxY8s/](http://www.senchafiddle.com/full/!NxY8s/)上上传了一个例子，用安卓设备查看它，看看我的意思。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T00:46:23.023

I've seen this behavior once, the problem was there were elements that were listening to click events instead of just tap events as generated by sencha.**

# ruby-on-rails - Ruby on Rails：接受父记录而不是子记录的嵌套属性？

> ID：12749593
> 
> 赞同：5
> 
> 时间：2012-10-05T15:38:29.333
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在我的 Rails 应用程序`Users`中可以有很多`People`可以（但不必）属于`Organisations`.

简而言之，这是：

```
Users --< People >-- Organisations 
```

现在，如果能够以某种方式从人们的角度创建新组织，那就太好了。它尝试了这个：

```
class Person < ActiveRecord::Base

  attr_accessible :name, :organisation_attributes

  belongs_to :user
  belongs_to :organisation

  accepts_nested_attributes_for :organisation

end 
```

但它不起作用，因为组织不是人的孩子。

有没有另一种方法来实现这一点？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T16:02:06.117

我可以看到它`Person`实际上是一个子`Organisation`模型，它也可以为父模型制作嵌套形式。而且您已经在使用`accepts_nested_attributes_for`.

我假设您要显示`Organisation`已保存的表单`person`。然后

在你的`PeopleController#show`方法中建立组织

```
@person.build_organisation 
```

而在`people/show.html.erb`

```
form_for(@person) do |f|
    f.fields_for(:organisation) do |fo|
        # show the fields of organisation here.
    end
end 
```

它应该工作。

**更新：**

我尝试了类似的东西，它奏效了：）我做了一个包括片段在内的要点。请按照链接**[https://gist.github.com/3841507](https://gist.github.com/3841507)**查看它的工作原理。

# c# - 扩展类时扩展/更改属性的属性值

> ID：12749596
> 
> 赞同：0
> 
> 时间：2012-10-05T15:38:37.053
> 
> 标签：c#, attributes

扩展类时是否可以“更改”属性的值？类似于以下内容：

```
public class Mammal
{
    [Validation(Required=true, HelpMessage="This is the body shape of a mammal")]
    public virtual string BodyShape { get; set; }

}

public class Dog : Mammal
{
    [Validation(HelpMessage = "This is the body shape of a dog")]
    public override string BodyShape
    {
        get
        {
            return base.BodyShape;
        }
        set
        {
            base.BodyShape = value;
        }
    }
} 
```

我希望能够读取 Dog.BodyShape 的属性，并将其设置为 Required=True，并且 HelpMessage =“这是狗的体型”。这可能吗？如果没有，任何可以直接在编译器中将“元数据”信息添加到属性的建议替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:50:37.727

我不认为你可以继承属性；它们附加到特定的方法/类。但是，您可以更改验证的标准实现以检查类似命名的基类属性。

# windows - 我有两个具有不同域名的 java 应用程序。如何通过一次登录对两者进行身份验证

> ID：12749597
> 
> 赞同：0
> 
> 时间：2012-10-05T15:38:38.923
> 
> 标签：windows, jakarta-ee, struts, tomcat6, single-sign-on

我今天被要求做一项特殊的任务。我有两个使用 struts 框架开发的 Java 应用程序。我的老板让我在第一个应用程序中提供第二个应用程序的链接，当用户单击它时，他需要被重定向到第二个应用程序.. 好的，这很容易。但不应要求用户再次在第二个应用程序上进行身份验证。如何实现？

注意：部署我的 2 个应用程序的同一 Tomcat 服务器托管了其他不需要单点登录的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:29:26.297

有许多单点登录 (SSO) 解决方案。这取决于您的环境。许多服务器容器提供自定义 SSO 解决方案。例如，如果您的两个应用程序都在 Tomcat 中运行，请查看易于实现的 SSO：http: [//tomcat.apache.org/tomcat-5.5-doc/config/host.html#Single_Sign_On](http://tomcat.apache.org/tomcat-5.5-doc/config/host.html#Single_Sign_On)

# sql - Oracle SQL *plus EXCEPT ORA-00907：缺少右括号

> ID：12749604
> 
> 赞同：0
> 
> 时间：2012-10-05T15:38:54.377
> 
> 标签：sql, oracle10g

我写了这个查询，但它给了我一个错误：

```
select c.sid
from catalog c
where exists ((select p.color from parts p)
except (select p2.color from parts p2 where p2.color != 'Red')); 
```

ORA-00907: 缺少右括号

你能告诉我哪里不正确吗？

目录：

```
 SID        PID       COST 
```

* * *

```
 1          3         .5
     1          4         .5
     1          8       11.7
     2          3        .55
     2          8       7.95
     2          1       16.5
     3          8       12.5
     3          9          1
     4          5        2.2
     4          6 1247548.23
     4          7 1247548.23 
```

部分：

```
 PID PNAME                               COLOR 
```

* * *

```
 1 Left Handed Bacon Stretcher Cover   Red
     2 Smoke Shifter End                   Black
     3 Acme Widget Washer                  Red
     4 Acme Widget Washer                  Silver
     5 I Brake for Crop Circles Sticker    Translucent
     6 Anti-Gravity Turbine Generator      Cyan
     7 Anti-Gravity Turbine Generator      Magenta
     8 Fire Hydrant Cap                    Red
     9 7 Segment Display                   Green 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:36:45.423

> 我想知道只供应红色零件的供应商的 sid

你可以写：

```
SELECT c.sid
  FROM catalog c
  JOIN parts p
    ON p.pid = c.pid
 WHERE p.color = 'Red'
MINUS
SELECT c.sid
  FROM catalog c
  JOIN parts p
    ON p.pid = c.pid
 WHERE p.color <> 'Red'
; 
```

前面的零件`MINUS`找到所有供应红色零件的供应商；`MINUS`找到所有供应*非*红色零件的供应商之后的零件；*因此，整个查询会找到所有仅*提供红色零件的不同供应商。

# php - mysql_fetch_assoc 使 php 代码崩溃

> ID：12749608
> 
> 赞同：-1
> 
> 时间：2012-10-05T15:39:20.693
> 
> 标签：php, mysql

我需要更改不是我的 PHP 代码并且遇到了一些问题（请注意，我通常使用 Java 编写代码并且已经好几年没有使用 PHP 开发了）。

我有以下代码和平：

```
 $sql = "SELECT id_class FROM  events e join event_to_class ec on e.id = ec.id_event WHERE e.id = ".$r['id']."  and ec.id_evaluator = 8 and (".$stepNumbers.")";
   $mirekClassesForEvent = mysql_query($sql) or trigger_error(mysql_error().$sql); 
   if (!$mirekClassesForEvent) {
      echo "Could not successfully run query from DB: " . mysql_error();
      exit;
   }               
   $mirekClasses = array();        
   if (mysql_num_rows($mirekClassesForEvent) > 0 ) {
      while($row = mysql_fetch_assoc($mirekClassesForEvent) {
           array_push($mirekClasses, $row['id_class'];
      }
   } 
```

选择语句如下所示：

```
SELECT id_class FROM events e join event_to_class ec on e.id = ec.id_event WHERE e.id = 1 and ec.id_evaluator = 8 and (e.id_step=4 OR e.id_step=5 OR e.id_step=6) 
```

当我在 MySQL DB 中运行它以运行良好并返回一行数据时

> id_class=27

.

但是，当我运行上面的代码时，我的 php 脚本崩溃了（它甚至没有显示任何错误消息 - 即使我尝试使用`mysql_error()`函数）

从我的调试来看，问题出在 while 语句中，但我不明白可能是什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T15:41:19.340

您在该行`)`的末尾缺少一个`while`，并且在该行中缺少另一个`array_push`。如果您没有看到任何错误，则您可能关闭了错误报告。使用带有语法高亮的编辑器可以帮助您发现这种错误，因为它们通常包括不匹配括号的高亮。

请注意，您可以使用以下命令稍微简化查询`IN`：

```
... and e.id_step IN (4,5,6) 
```

或者`BETWEEN`：

```
... and e.id_step BETWEEN 4 AND 6 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T15:41:01.703

您的代码中存在语法错误：

```
while($row = mysql_fetch_assoc($mirekClassesForEvent) {
       array_push($mirekClasses, $row['id_class'];
  } 
```

您在 while 循环中缺少右括号：

```
while($row = mysql_fetch_assoc($mirekClassesForEvent)) { 
```

编辑添加：

还有一个在`array_push`同样著名的 Kolink 上

# java - 什么是与 DispatcherPortlet - Spring 相关的处理程序？

> ID：12749610
> 
> 赞同：0
> 
> 时间：2012-10-05T15:39:27.403
> 
> 标签：java, spring, spring-mvc

与以下语句相关的处理程序是什么？

> DispatcherPortlet 为传入的 Portlet 请求确定相应的处理程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:12:08.957

一个处理程序代表一个控制器。它管理或“处理”请求，因此得名。

# javascript - 阻止表单发布，直到满足 javascript 代码

> ID：12749617
> 
> 赞同：-1
> 
> 时间：2012-10-05T15:40:02.603
> 
> 标签：javascript, php, html, validation

每当我单击提交按钮时，它会触发`alert("empty username")`但会引导我`checklogin.php`...我如何避免这种情况并让它保留在页面上，除非该字段不为空？

```
</body>
</html>
<script type="text/javascript"></script>       
function RequiredFields(){
     var username=document.forms["login"]["username"].value;

     if (username==""||username==null){
         alert("empty username")
         document.login.username.focus();
         if(document.all||document.getElementById){
             return false;
         }

     }
}
</script>
<form action="checklogin.php" method="POST" onSubmit="RequiredFields()">
Username<input type="text" name="username"/>
Password<input type="password" name="password"/>
<input type="submit" value="Login"  />
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:42:54.027

在提交输入中，您可以像这样添加 onsubmit 的事件处理程序：

```
<input type="submit" value="submit form" onsubmit="return RequiredFields();"/> 
```

如果不是所有必填字段都已满，RequiredFields 将返回 false 并且提交过程将停止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T15:44:15.187

当您将提交更改为此时，如果 RequiredFields 返回，它将不会提交`false`。

```
<input type="submit" value="Login" onsubmit="return RequiredFields();"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T15:52:55.670

使用此代码

```
<input type="submit" value="Login" onclick="return RequiredFields()" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T13:43:45.143

我认为这可能有效。

```
 function xyz(event)
    {
      event.preventDefault(); // while the function returns false
    } 
```

您也可以使用所需的 HTML5 属性**来**避免 javascript 负担过重。 **<**输入类型="" 必需****>* *

# python - 了解如何在 Python 中创建堆

> ID：12749622
> 
> 赞同：29
> 
> 时间：2012-10-05T15:40:29.253
> 
> 标签：python, heap

例如，Python 中的`collections.Count.most_common`函数使用该`heapq`模块返回文件中最常见单词的计数。

我已经通过`heapq.py`文件进行了跟踪，但是我在理解堆是如何创建/更新相对于单词的让我们说的时候遇到了一些麻烦。

所以，我认为理解它的最好方法是弄清楚如何从头开始创建一个堆。

有人可以提供一个伪代码来创建一个代表字数的堆吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-06T05:19:24.300

在 Python 2.X 和 3.x 中，堆是通过一个可导入的库 heapq 来支持的。它提供了许多函数来处理在 Python 列表中建模的堆数据结构。例子：

```
>>> from heapq import heappush, heappop
>>> heap = []
>>> data = [1, 3, 5, 7, 9, 2, 4, 6, 8, 0]
>>> for item in data:
        heappush(heap, item)

>>> ordered = []
>>> while heap:
        ordered.append(heappop(heap))

>>> ordered
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> data.sort()
>>> data == ordered
True 
```

`heappush, heappop, heappushpop, heapify, heapreplace`您可以在[heap python docs](http://docs.python.org/release/3.0.1/library/heapq.html)中找到有关堆函数的更多信息。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-04-09T00:59:43.233

这是基于[Sedgewick的另一个变体](http://algs4.cs.princeton.edu/24pq/)

堆在内部表示在一个数组中，如果一个节点位于 k，它的子节点位于 2*k 和 2*k + 1。不使用数组的第一个元素，以使数学更方便。

要将新元素添加到堆中，请将其附加到数组的末尾，然后重复调用 Swim 直到新元素在堆中找到它的位置。

要删除根，将它与数组中的最后一个元素交换，删除它，然后调用 sink 直到交换的元素找到它的位置。

```
swim(k):
  while k > 1 and less(k/2, k):
    exch(k, k/2)
    k = k/2

sink(k):
  while 2*k <= N:
    j = 2*k
    if j < N and less(j, j+1):
      j++
    if not less(k, j):
      break
    exch(k, j)
    k = j 
```

这是堆插入的可视化，插入字母表的前 15 个字母：[ao]

![堆插入可视化](../Images/e60348b17f6557b56903c4e879279547.png)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-10-05T16:01:39.427

这是此处代码的略微修改版本：http: [//code.activestate.com/recipes/577086-heap-sort/](http://code.activestate.com/recipes/577086-heap-sort/)

```
def HeapSort(A,T):
    def heapify(A):
        start = (len(A) - 2) / 2
        while start >= 0:
            siftDown(A, start, len(A) - 1)
            start -= 1

    def siftDown(A, start, end):
        root = start
        while root * 2 + 1 <= end:
            child = root * 2 + 1
            if child + 1 <= end and T.count(A[child]) < T.count(A[child + 1]):
                child += 1
            if child <= end and T.count(A[root]) < T.count(A[child]):
                A[root], A[child] = A[child], A[root]
                root = child
            else:
                return

    heapify(A)
    end = len(A) - 1
    while end > 0:
        A[end], A[0] = A[0], A[end]
        siftDown(A, 0, end - 1)
        end -= 1

if __name__ == '__main__':
    text = "the quick brown fox jumped over the the quick brown quick log log"
    heap = list(set(text.split()))
    print heap

    HeapSort(heap,text)
    print heap 
```

输出

```
['brown', 'log', 'jumped', 'over', 'fox', 'quick', 'the']
['jumped', 'fox', 'over', 'brown', 'log', 'the', 'quick'] 
```

你可以在这里可视化程序 [http://goo.gl/2a9Bh](http://goo.gl/2a9Bh)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-04-26T19:07:33.240

您的困惑可能来自 Python 模块[`heapq`](https://docs.python.org/3/library/heapq.html)没有**将**堆定义为具有自己的方法（例如在 a或 a中）的数据**类型**（类）。相反，它提供了可以在 Python 上运行的函数。[`deque`](https://docs.python.org/3/library/collections.html#collections.deque)`list``list`

最好将其`heapq`视为一个提供一组*算法*（方法）的模块，以将列表解释为堆并相应地操作它们。请注意，在内部将[堆表示为](https://en.wikipedia.org/wiki/Binary_heap#Heap_implementation)[数组](https://en.wikipedia.org/wiki/Array_data_structure)`heapq`（作为抽象数据结构）是很常见的，并且 Python 已经有用于该目的的列表，因此仅提供将列表操作为堆的方法是有意义的。

让我们看一个例子。从一个简单的 Python 列表开始：

```
>>> my_list = [2, -1, 4, 10, 0, -20] 
```

`heapq`要使用from创建一个堆，`my_list`我们只需要调用`heapify`它简单地重新排列列表的元素以形成一个最小堆：

```
>>> import heapq
>>> # NOTE: This returns NoneType:
>>> heapq.heapify(my_list) 
```

请注意，您仍然可以访问堆底层的列表，因为`heapify`所做的只是更改[引用的](https://nedbatchelder.com/text/names.html)[**值**`my_list`](https://nedbatchelder.com/text/names.html)：

```
>>> my_list
[-20, -1, 2, 10, 0, 4] 
```

从持有的堆中弹出元素`my_list`：

```
>>> [heapq.heappop(my_list) for x in range(len(my_list))]
[-20, -1, 0, 2, 4, 10] 
```

# ios - iOS - 从视图控制器获取信息以在视图中绘制矩形

> ID：12749624
> 
> 赞同：0
> 
> 时间：2012-10-05T15:40:38.907
> 
> 标签：ios, cocoa-touch, cs193p

我的问题与 CS193p 中的作业 3 有关。

我很难进入`drawRect`我的视图以接收从我的视图控制器传递的信息。基本上，我的目标是将特定于视图的信息（如`self.view.size.width`）传递给控制器​​，让它进行一些修改（如`result = self.view.size.width * 2`），然后传`result`回，`drawRect`以便它可以获取新信息并绘制它。我很确定我的代表团设置正确，并且确实尝试了一系列潜在的解决方法：

*   制作一个公共视图`@property`，我可以`controller.m`通过我的方式访问它

    查看 *newView someResult = newView.variable

然后我会尝试从我的`view.m`via

```
self.variable 
```

*   使用在我的视图中设置的方法`@protocal`，我尝试通过这些方法传递数据`myView.dataSource someMethod:someData`

但到目前为止，这些目前都没有工作（即我的`self.variable`结果总是为0，这表明没有数据传递给它）。非常感谢您的帮助！

更新：

罪魁祸首是，在情节提要中，**我没有控制拖拽 View Controller 到 View**，因此 Controller 从未连接过……但至少现在它可以工作了。^_^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:50:29.150

`View *newView someResult = newView.variable`不是有效的语法。如果`newView.variable`不是类型`View`，那么这是一个问题。

如果`newView`已声明，您将使用`variable`using访问`int myValue = newView.variable`（即假设它是 int 类型）。

一个例子是：

```
// Somewhere in your code, you declare your object
UIView *otherView = [[UIView alloc] init];

// Somewhere else, you set a variable of your object
otherView.backgroundColor = [UIColor blackColor];

// Again, somewhere else you want to access that value
UIColor *thatColor = otherView.backgroundColor; 
```

我希望这能很好地解释它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T01:11:17.663

这是对您想要做什么的正确描述吗？您有一个视图控制器（可能是课程中的计算器类型视图控制器）并且您想在该视图控制器（其视图具有计算器按钮）和它自己的视图之间进行通信？

如果是这样，您应该采取以下步骤：

在您看来，您希望从代表处接收信息：

`@protocol`使用您希望委托实现的方法声明一个。在视图的头文件中声明一个符合上述委托的属性：`@property (nonatomic, weak) delegate<NameOfTheProtocol> delegate;`

在要充当委托的视图控制器中，声明它符合协议：`MyClass: UIViewController <NameOfTheProtocol>`。在该视图控制器的实现文件中，实现协议的方法。无论您在哪里创建要接收信息的视图，都将其`delegate`属性设置为您的视图控制器。

要在它们之间传递信息（我不知道您要传递什么信息），您的协议方法可能类似于：`-(CGPoint)pointToDrawAtGivenPosition:(CGPoint)point`

在具有委托属性的视图中，您可以在 drawRect 中执行以下操作：

`CGPoint pointToDrawAt = [self.delegate pointToDrawAtGivenPosition:CGPointMake(100, 100)];` `//Now draw that point or whatever.`

基本上，视图要求它的代表决定在哪里绘制一些东西。它将一些信息传递给委托，委托以正确的位置进行响应以供视图绘制。

# jquery - jQuery - AJAX - 在成功函数中获取请求的参数

> ID：12749630
> 
> 赞同：4
> 
> 时间：2012-10-05T15:40:56.867
> 
> 标签：jquery, ajax, http-request-parameters

是否可以在成功（回调）函数中获取请求的参数？

例如，

```
function handleSubmitClick(evt) {
  evt.preventDefault();

  var setupOptions = { 
        success: loadSearch,
        type: "POST",
        dataType: "json",            
        url:   "../search.x",
        error: handleError,
        timeout: 10000
  };                
  $("#searchForm").ajaxSubmit(setupOptions);

  return false;   
}

function loadSearch(data, statusText, xhr, $form) {
   // here is where I would like to get the HTTP request
   // parameters
} 
```

当然，我可以在 handleSubmitClick 期间将请求参数存储在全局变量中，并在 loadSearch 中读取该变量。但是，如果用户在从第一个请求执行 loadSearch 之前提交另一个请求，则该变量的值将被覆盖（并且我不想阻止用户在第一个请求完成处理之前发出另一个请求）。

我目前让服务器在响应数据中回显请求参数，但我希望客户端已经可以使用请求参数，而服务器不必回显请求参数。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T15:53:43.330

这可能是您正在寻找的，尽管它使用的 AJAX 函数与您当前的解决方案不同：

```
$.post( your_ajax_request_url, 
    { 
      success: loadSearch,
      type: "POST",
      dataType: "json",            
      url:   "../search.x",
      error: handleError,
      timeout: 10000 
    }, function( response ){

      console.log( $(this).attr('data') );   

    },  "json" ); 
```

$(this).attr('data') 将具有原始请求参数，您可以将其视为对象，所以

```
$(this).attr('data')->dataType 
```

将是“json”。

# javascript - 正则表达式检查具有一系列模式的数字

> ID：12749631
> 
> 赞同：1
> 
> 时间：2012-10-05T15:41:00.270
> 
> 标签：javascript, regex, validation, numbers

我有一个条件，我需要使用 javascript 省略一系列具有以下模式的数字。

### 如果是 4 位数字

1.  只有数字和长度应该是 4
2.  至少 3 个不同的数字（例如：不允许的数字：1113、4443）
3.  在升序和降序的情况下都没有 3 个连续的数字（例如：不允许的数字：1231、4321）

### 如果 5-6 位数字

1.  只有数字和长度应该是 5-6
2.  至少 4 个不同的数字（例如：不允许的数字：11113、44443）
3.  在升序和降序的情况下没有 3 个连续的数字（例如：不允许的数字：12341、43211）

据我所知，你无法检查升序和降序数字，你只能听他们喜欢

如果是 4 位

```
^[0-9]{4}$ AND NOT IN
(?:012|210|123|321|234|432|345|543|456|654|567|765|678|876|789|987|111|222|333|444) 
```

如果 5-6 位

```
^[0-9]{5,6}$ AND NOT IN
(?:0123|3210|1234|4321|2345|5432|3456|6543|4567|7654|5678|8765|6789|9876|1111|2222|3333|4444|5555|6666) 
```

我不知道如何在正则表达式中填写“AND NOT IN”。有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:54:17.213

这种东西对于正则表达式来说似乎太复杂了，因为即使你会写它，你会在没有一堆评论的情况下理解它吗？

相反，请尝试将其分解：

```
// assuming var number as string;
var i, l = number.length, prev = -999, dist, prevdist = 0,
    digits = [0,0,0,0,0,0,0,0,0,0], dcnt = 0;
main:
switch(l) {
case 4:
case 5:
case 6:
    for( i=0; i<l; i++) {
        digits[number[i]]++;
        dist = prev-number[i];
        if( prevdist == dist && Math.abs(dist) == 1) {
            alert("Three consecutive digits ("+number.substr(i-2,3)+")");
            break main;
        }
        prev = number[i];
        prevdist = dist;
    }
    for( i=0; i<10; i++) {
        if( digits[i]) dcnt++;
    }
    if( dcnt < (l == 4 ? 3 : 4)) {
        alert("Need at least "+(l == 4 ? 3 : 4)+" distinct digits");
        break main;
    }
    alert("Valid");
    break main;
default:
    alert("Length must be between 3 and 5");
    break main;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T16:12:32.613

我认为在 javascript 中进行连续数字测试要好得多。这是一个测试任何连续数字向上或向下序列的函数。您通过了要测试的数量：

```
function checkConsecutiveChars(str, limit) {
    var lastDigit = str.charCodeAt(0), num = 1, val, delta;
    for (var i = 1; i < str.length; i++) {
        val = str.charCodeAt(i);
        ++num;
        if (num === 2) {
            // calc delta and remember it
            delta = val - lastDigit;
            // see if we have a two char sequence now
            if (Math.abs(delta) !== 1) {
                // not sequential, start over
                num = 1;
            }
        } else {
            // see if consecutive sequence continues and exceeds limit
            if (val === (lastDigit + delta)) {
                if (num >= limit) {
                    return(false);
                }
            } else {
                // sequence stopped
                num = 1;
            }
        }
        lastDigit = val;
    }
    return(true);
} 
```

工作示例：http: [//jsfiddle.net/jfriend00/Nym8Y/](http://jsfiddle.net/jfriend00/Nym8Y/)

* * *

您可以使用此函数检查有多少个唯一数字：

```
function checkDistinctDigits(str, minDistinct) {
    var digits = new Array(10);
    var uniqueCnt = 0, val;
    for (var i = 0; i < str.length; i++) {
        val = str.charCodeAt(i);
        if (val >= 48 && val <= 57) {
            if (!digits[val - 48]) {
                ++ uniqueCnt;
                digits[val - 48] = true;
            }
        }
    }
    return(uniqueCnt >= minDistinct);
} 
```

工作示例：http: [//jsfiddle.net/jfriend00/cpXnW/](http://jsfiddle.net/jfriend00/cpXnW/)

# nhibernate - NHibernate 映射不保存

> ID：12749637
> 
> 赞同：0
> 
> 时间：2012-10-05T15:41:16.783
> 
> 标签：nhibernate, mapping

我有以下 Nhibernate XML 文件，已编辑为核心位：

```
<?xml version="1.0" encoding="utf-8"?>
   <hibernate-mapping assembly="TTP.DAO" namespace="TTP.DAO" xmlns="urn:nhibernate-mapping-2.2">
<class name="InitialProcessSetup" table="InitialProcessSetup" lazy="true" >
    <id name="SetupID" column="setupID" unsaved-value="0" type="System.Int32">
        <generator class="identity"/>
    </id>
    <property name="DateCreated" column="DateCreated" />
    <many-to-one class="StoredUser" name="CreatedBy" column="CreatedBy" cascade="all-delete-orphan" not-null="true"/>
    <property name="OriginalDeadline" column="Deadline" />
    <property name="Detail" column="Detail" />
    <bag name="Subjects" table="InitialProcessSetupRatingSubject" inverse="true" cascade="all-delete-orphan">
        <key column="SetupId" not-null="true" />
        <many-to-many column="SubjectStoredUserId" class="StoredUser" />
    </bag>
    <bag name="Reviewers" table="InitialProcessSetupReviewer" cascade="all-delete-orphan">
        <key column="SetupId" not-null="true" />
        <many-to-many column="ReviewerStoredUserId" class="StoredUser" />
    </bag>
    <bag name="Invitations" cascade="all-delete-orphan">
        <key column="Setup" not-null="true"/>
        <one-to-many class="ProcessInvitation" />
    </bag>
</class> 
```

我填充了上述映射中指示的类的一个新实例，并通过 GenericDAO().SaveOrUpdate(setup); 保存 它保存主要对象的详细信息，但不存储位。

在 Subjects 类上，它被定义为一个返回 IList-StoredUser 的虚拟属性。类构造函数将此属性设置为新的 List-StoredUser-()。

Subjects bag 元素指示的表是一个纯映射表，它具有SetupID 和StoredUserID 列，仅此而已。

在保存之前，我将使用 StoredUser 添加到派生的 StoredUserDAO() 到主题列表中。在调用 SaveOrUpdate() 之后，我也调用了 Flush()。

在我的数据库（SQL Server 2008R2）中，主要设置数据被保存，我添加到主题列表属性中的存储用户也被保存，只是映射表没有添加 setupID/StoredUserID。

我对 Nhibernate 有点陌生，这是一个现有的项目。任何关于错误的帮助想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:09:46.617

您已为 Subjects 集合设置了 inverse="true"。这意味着 NHibernate 要在关系表中创建记录，它必须是引用 InitialProcessSetup 的 StoredUser。

# c# - 如何使用 C# 将任何音频格式转换为 MP3

> ID：12749641
> 
> 赞同：0
> 
> 时间：2012-10-05T15:41:30.253
> 
> 标签：c#

我想播放用户上传的音频。上传的音频可以是任何格式。有没有办法将任何音频文件转换为 mp3 格式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T15:44:27.280

您可以使用此功能 - 基于`alvas component`

链接：[http ://alvas.net/alvas.audio,tips.aspx#tip24](http://alvas.net/alvas.audio,tips.aspx#tip24)

```
private void ConvertAudio()
    {
        string webFile = @"D:\AudioCS\bin\Debug\_web.mp3";
        string pcmFile = @"D:\AudioCS\bin\Debug\_AudioCS.wav";
        using (WaveReader wr = new WaveReader(File.OpenRead(pcmFile)))
        {
            IntPtr pcmFormat = wr.ReadFormat();
            byte[] pcmData = wr.ReadData();
            IntPtr webFormat = AudioCompressionManager.GetCompatibleFormat(pcmFormat,
            AudioCompressionManager.MpegLayer3FormatTag);
            byte[] webData = AudioCompressionManager.Convert(pcmFormat, webFormat,
            pcmData, false);
            MemoryStream ms = new MemoryStream();

            using (WaveWriter ww = new WaveWriter(ms,
            AudioCompressionManager.FormatBytes(webFormat)))
            {
                ww.WriteData(webData);
                using (WaveReader wr2 = new WaveReader(ms))
                {
                    using (FileStream fs = File.OpenWrite(webFile))
                    {
                        wr2.MakeMP3(fs);
                    }
                }
            }
        }
    } 
```

# xcode - 我不是团队代理，如何使用 Developer ID 签署 mac 应用程序？

> ID：12749642
> 
> 赞同：2
> 
> 时间：2012-10-05T15:41:37.633
> 
> 标签：xcode, macos, cocoa, code-signing

我在尝试使用开发人员 ID 签署 Mac 应用程序时遇到了很多麻烦。我们拥有所有证书和开发人员 ID，但它们根本不会出现在 XCode 上。

这是我在苹果门户网站上看到的 - [https://www.evernote.com/shard/s26/sh/2a598526-77be-41f9-be29-5c9f8282c593/1f0c1ed1c81df05ac9c1f90c00b8c059](https://www.evernote.com/shard/s26/sh/2a598526-77be-41f9-be29-5c9f8282c593/1f0c1ed1c81df05ac9c1f90c00b8c059)

这就是 xcode 组织者向我展示的内容 - [https://www.evernote.com/shard/s26/sh/059c361a-0e60-4197-a64a-b6872207f2c1/b0d3e0f9e231657eb3aa346341f8d807](https://www.evernote.com/shard/s26/sh/059c361a-0e60-4197-a64a-b6872207f2c1/b0d3e0f9e231657eb3aa346341f8d807)

它显然缺少很多证书信息，因为苹果开发者中心的证书比我的机器上的证书多得多。而且 Xcode 根本不显示用于签名的 Developer ID 证书。

知道这里出了什么问题吗？我应该从哪里开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:45:33.973

检查您的钥匙串访问权限以获取名为“私钥”的密钥。如果您缺少开发人员证书的私钥，则必须创建一个新的，以便获得新的私钥和匹配的证书。一旦私钥丢失，除非您制作了副本，否则通常会永远消失。Apple 不提供获取先前制作的证书的私钥。

与您的团队管理员交谈，让他们为您创建一个新的证书/私钥对。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T15:49:41.273

你有所有的证书，那些证书的私钥呢？您需要用于签名的私钥。

检查您的 Keychain Access >> Keys，您应该同时拥有私钥及其相应的证书，否则 XCode 不会让您签署您的应用程序。

# java - 将 .java 文件放入 .war

> ID：12749645
> 
> 赞同：0
> 
> 时间：2012-10-05T15:41:58.910
> 
> 标签：java, netbeans, war

我的教授要求我们在 WAR 文件中提交项目，他说如果 WAR 不包含我的 .JAVA 文件，我的项目将得到 0。

我看到它包含 .CLASS 文件，但他说这还不够，我怎样才能让 .WAR 文件与里面的 .JAVA 一起打包？

编辑：要压缩文件，我使用 Netbeans 中的 clean and build 选项。WAR 文件出现在构建文件夹中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T15:43:00.073

如果这是在 Eclipse 中，您将在导出 WAR 选项下包含源代码。

**更新**

在战争导出面板中，应该有一个“排除的文件类型”确保删除`*.java`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:44:32.623

WAR 文件只是一个存档，任何 ZIP 存档器都可以理解，例如 7-zip。你可以把任何你想要的东西放入WAR。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T15:45:46.173

查找“在 WAR 文件中包含源文件”部分

[http://users.cis.fiu.edu/~downeyt/webdev/netbeans.html](http://users.cis.fiu.edu/~downeyt/webdev/netbeans.html)

引用自链接：

> 从属性屏幕中，选择 Build -> Packaging。编辑从 WAR 文件中排除框并删除 * */* .java,。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T16:05:53.433

您使用什么来创建 WAR 文件？如果您使用[apache ant](http://ant.apache.org)然后向您添加一个`copy`任务`build.xml`，然后在默认目标中引用它，例如使用`<target name="dist" depends="copy-source"/>`

该任务可能类似于：

```
<target name="copy-source">
  <echo>Copying source files...</echo>
  <copy todir="${app.dir}/src">
    <fileset dir="${javasrc.dir}">
      <include name="**/*.java"/>
    </fileset>
  </copy>
</target> 
```

附言。最好在外部`build.properties`文件中定义变量，并且永远不要在`build.xml`. 另外，看看[http://ant.apache.org/manual/Tasks/war.html](http://ant.apache.org/manual/Tasks/war.html)和[http://ant.apache.org/manual/Tasks/copy.html](http://ant.apache.org/manual/Tasks/copy.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-23T11:48:13.343

在 Netbeans 中。右键单击您的项目。选择项目属性。它将打开一个项目属性窗口。从“类别”选项卡中选择“构建”->“打包”。在右侧出现的窗口中，有一个文本字段：从 WAR 文件中排除。在那个文本字段中默认值为：**/ . *java,*** */* .form。在该文本字段中删除 * */* .java 值并单击确定。现在清理并构建项目。现在您将在项目的 dist 目录下找到使用 .java 源导出的 war 文件。

# android - 搜索视图更改搜索菜单项图像

> ID：12749649
> 
> 赞同：3
> 
> 时间：2012-10-05T15:42:29.293
> 
> 标签：android, actionbarsherlock, searchview

使用主题 Theme.Sherlock.Light 时

![奇怪的图标](../Images/c9361df21063e1c0a978d0a39a286da1.png)

并使用 searchable.xml

```
<?xml version="1.0" encoding="utf-8"?>
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
    android:label="@string/app_name"
    android:hint="@string/location_search_hint"
    android:icon="@drawable/action_search"
 >

</searchable> 
```

我希望搜索图标采用我自己的@drawable/action_search，它是白色的，但它忽略了它，它采用了浅色主题中的那个。

我怎么能改变呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:19:40.240

好吧，我想我找到了解决您问题的方法。将此行添加到您的主题.xml

```
<item name="searchViewSearchIcon">@drawable/menu_search</item> 
```

在那里，您可以用自己的可绘制对象“覆盖”放大镜图标等样式。

您也可以使用其他样式，例如

```
<item name="searchViewCloseIcon">@drawable/menu_search_close</item> 
```

等等

希望这会有所帮助，托拜厄斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T10:30:47.810

注意菜单需要有collapseActionView属性

```
android:showAsAction="ifRoom|collapseActionView" 
```

[来源](https://github.com/JakeWharton/ActionBarSherlock/issues/823)

编辑：

实际上我找到了一个更好的解决方案，菜单可以保留以下行：

```
android:showAsAction="ifRoom" 
```

并且用于搜索的图标需要使用与来自 ActionBarSherlock/AppCompat/Native 的图标相同的名称

对于应用程序兼容性，它将是 abc_ic_menu_share_holo_dark.png

# qt - PySide QGraphicsTextItem 问题

> ID：12749651
> 
> 赞同：2
> 
> 时间：2012-10-05T15:42:45.783
> 
> 标签：qt, pyside, qgraphicsview, qgraphicsscene, qgraphicstextitem

我正在尝试在 PySide 中生成类似于 word（分页）的文本编辑器。

我决定解决这个问题的方法是为每个页面设置一个带有 QGraphicsTextItem 的 QGraphicsScene，并通过交互对焦点进行编码。

现在我要做的就是拥有一个代表 A4 页面的框，并使用 QGraphicsTextItem.document().pageCount() 函数处理 textchanged 事件。

我遇到了几个问题：

1.  鉴于 QSizeF 未使用任何单位，我如何正确定义页面的大小？定义这个权利会保证 pageCount() 的返回值是真实的吗？

2.  如果我完全定义了 pageSize，QGraphicsTextItem 将停止扩展。如何设置固定大小，使其看起来像一个页面？

Qt 的文档非常简单，我想不出任何东西。

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-10-28T20:44:59.603

从 Qt 5.3 开始，`QPageSize`您可以找到所需的任何单位的页面大小所需的一切。

# django - 如何在 Django 中进行远程身份验证？

> ID：12749652
> 
> 赞同：0
> 
> 时间：2012-10-05T15:42:48.347
> 
> 标签：django, authentication, remote-access

基本上我正在做的是构建一个桌面应用程序，它需要连接到 Web 服务器，执行一些计算，然后将结果值发送回它。计算会随着时间而变化，并且还需要保持一定的安全性，这就是为什么我不只是将它们编码到桌面应用程序中。

问题是应该只允许经过身份验证的用户访问服务器。所以我正在寻找的是一种从我的桌面应用程序登录到 Django 的方法（即桌面应用程序会弹出一个窗口询问用户名和密码，然后将其发送到 Django 站点，用于进行身份验证用户，如果有效，将返回计算结果。它还需要作为会话工作（用户在开始时输入密码，然后在关闭桌面应用程序之前不需要再次登录，即使执行了多次计算）。

我想我需要为此使用会话密钥，也许还有[这里](https://docs.djangoproject.com/en/dev/howto/auth-remote-user/)描述的 RemoteUserMiddleware但我真的不知道从哪里开始编码。任何正确方向的建议或指示将不胜感激。

谢谢，-莫拉格

PS 如果这很重要，桌面应用程序是用 VB.NET 编写的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:14:26.380

有趣的。我从来没有做过这样的事情，但我认为这是基本思想：

1) 很好地了解 Django 会话；基本思想是：

*   一、使用django auth框架登录服务登录
*   Django 将为您创建一个会话并处理所有困难的事情
*   Django 返回一个带有`sessionid`cookie 的 HttpResponse。您需要将其与以下任何请求一起发回，以表明您的身份并“在会话中操作”。
*   使用 django auth logout 服务注销，会话被 Django 销毁。

2）现在，其余的相对容易。

*   使用适当的 url 设置 django urls.py 用于[登录](https://docs.djangoproject.com/en/dev/topics/auth/#module-django.contrib.auth.views)/[注销](https://docs.djangoproject.com/en/dev/topics/auth/#module-django.contrib.auth.views)+ 计算服务
*   使用适当的参数集执行对登录服务的发布请求
*   捕捉响应，提取 'sessionid' cookie 并将其保存在某处
*   在每个后续请求中，包括`sessionid`

这应该让你开始。祝你好运！

# android - 如何计算文件txt android中的行数

> ID：12749655
> 
> 赞同：1
> 
> 时间：2012-10-05T15:42:58.483
> 
> 标签：android, file, text, count, lines

无法理解如何计算行数。这是我的代码。

```
 void load() throws IOException        
{        
    File sdcard = Environment.getExternalStorageDirectory();
    File file = new File(sdcard,"agenda.file");
    StringBuilder text = new StringBuilder();

    try {
        BufferedReader br = new BufferedReader(new FileReader(file));
        String line;

        while ((line = br.readLine()) != null) {
            text.append(line);
            text.append('\n');

           TextView te=(TextView)findViewById(R.id.textView1);

        }

    }
    catch (IOException e) {
        //You'll need to add proper error handling here
    }
    Button monpopb = (Button) findViewById(R.id.button13);
    monpopb.setText(text); 
```

那么，如何在 TextView 中对文本进行计数和设置呢？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:54:11.380

这是你要找的吗？

```
void load() throws IOException        
{        
File sdcard = Environment.getExternalStorageDirectory();
File file = new File(sdcard,"agenda.file");
StringBuilder text = new StringBuilder();

try {
    BufferedReader br = new BufferedReader(new FileReader(file));
    String line;

    TextView te=(TextView)findViewById(R.id.textView1);
    int lineCount = 0;
    while ((line = br.readLine()) != null) {
        text.append(line);
        text.append('\n');

        lineCount++;
    }
    te.setText(String.valueOf(lineCount));

}
catch (IOException e) {
    //You'll need to add proper error handling here
}
    Button monpopb = (Button) findViewById(R.id.button13);
    monpopb.setText(text);  
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-12-05T19:42:18.323

对于已经存在的文本文件，可以使用[`LineNumberReader`](https://developer.android.com/reference/java/io/LineNumberReader)类[`LineNumberReader.skip()`](https://developer.android.com/reference/java/io/LineNumberReader.html#skip(long))和[`LineNumberReader.getLineNumber()`](https://developer.android.com/reference/java/io/LineNumberReader.html#getLineNumber())方法来获取文件中的总行数。像这样的东西：

```
...
InputStream inputStream = new FileInputStream(new File("<FILE_NAME>"));
BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));
LineNumberReader lineNumberReader = new LineNumberReader(bufferedReader);
try {
    lineNumberReader.skip(Long.MAX_VALUE);
} catch (IOException e) {
    e.printStackTrace();
}
linesInFile = lineNumberReader.getLineNumber() + 1;  // because line numbers starts from 0
... 
```

# c - char指针的长度c ++

> ID：12749657
> 
> 赞同：1
> 
> 时间：2012-10-05T15:43:01.630
> 
> 标签：c

> **可能重复：**
> [如何找到 sizeof（指向数组的指针）](https://stackoverflow.com/questions/492384/how-to-find-the-sizeofa-pointer-pointing-to-an-array)

例如，当使用 malloc 声明 char 指针时。有没有办法确定分配的长度。

例如，如果我定义一个 char 数组，我可以很容易地找到元素的数量

```
char a[10];
a[0]='c';
cout << sizeof(a) / sizeof(a[0]); 
```

这将产生 10\. 另一方面，如果我尝试使用 char 指针

```
char *a;
a = (char*)malloc(10);
a[0] = 'c';
cout << sizeof(a) / sizeof(a[0]); 
```

然后它产生 8，这显然是指针的大小，而不是分配的长度。

是否可以找到 char 指针的分配长度？

我问这个而不使用 std::string 或其他的原因是因为我在破解一些面试问题时遇到了这个问题。所以出于好奇

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T15:56:38.257

SomeRandomGuyOnSO：

> 不，这不对。

我：

> 是的，它是，但它将是非标准的并且依赖于平台。

除此之外，让我不要重复所有关于使用标准 C++ 容器的好建议。让我**真正回答**你的问题。对该主题进行快速的 Google 搜索会找到执行此操作的方法。例子：

```
// OS X
#include <malloc/malloc.h>

char *buf = malloc(1024);
size_t howManyBytes = malloc_size(buf);
printf("Allocated %u bytes\n", (unsigned)howManyBytes);

// Linux
#include <malloc.h>

char *buf = malloc(1024);
size_t howManyBytes = malloc_usable_size(buf);
printf("Allocated %u bytes\n", (unsigned)howManyBytes);

// Windows, using CRT

char *buf = malloc(1024);
size_t howManyBytes = _msize(buf);
printf("Allocated %u bytes\n", (unsigned)howManyBytes); 
```

所有三个片段都应该打印 1024 或更大。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T15:46:17.047

malloc() 并不真正了解数组或其他事物，它只是为您分配一块内存。除非您自己单独跟踪，否则您无法获得该空间的大小。这就是为什么大多数作用于数组的方法都采用两个参数，数组和长度。

# neo4j - Cypher 获得有效旅行

> ID：12749659
> 
> 赞同：0
> 
> 时间：2012-10-05T15:43:05.310
> 
> 标签：neo4j, cypher

假设我有一个图表，将行程作为关系保存在 neo4j 中，每个关系都有一个开始时间和结束时间，我需要找到从 node1 到 node2 的有效路径。我需要找到符合relationship1.arrivetime <relationship2.departtime 约束的这条路径。

有没有办法将此功能包含在 MATCH 子句中，或者我是否必须使用 WHERE 子句来归档我找到的现有路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T23:24:07.280

您使用 where 子句过滤关系属性。如果您需要对遍历进行细粒度控制，还可以使用 Traverser Java API，请参阅[http://docs.neo4j.org/chunked/snapshot/tutorials-java-embedded-traversal.html](http://docs.neo4j.org/chunked/snapshot/tutorials-java-embedded-traversal.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T03:00:24.607

正如彼得所说，为了检查属性，您需要使用 where 子句。匹配模式用于不检查属性的模式匹配。但是，例如，您可以使用索引来查找从适合特定时间范围的节点开始。

我为您构建了一个示例：

```
create 
(_1 {city:"DC"}), 
(_2 {city:"NY"}), 
(_3 {city:"SF"}),
(_4 {city:"LA"}), 
_1-[:flight {leave:1349431200, arrive:1349445600}]->_2,
_1-[:flight {leave:1349427600, arrive:1349442000}]->_2,
_1-[:flight {leave:1349424000, arrive:1349438400}]->_2,
_1-[:flight {leave:1349420400, arrive:1349434800}]->_2,
_1-[:flight {leave:1349416800, arrive:1349431200}]->_2,
_1-[:flight {leave:1349409600, arrive:1349424000}]->_2,
_2-[:flight {leave:1349431200, arrive:1349445600}]->_3,
_2-[:flight {leave:1349427600, arrive:1349442000}]->_3,
_2-[:flight {leave:1349424000, arrive:1349438400}]->_3,
_3-[:flight {leave:1349431200, arrive:1349445600}]->_4,
_3-[:flight {leave:1349427600, arrive:1349442000}]->_4,
_3-[:flight {leave:1349424000, arrive:1349438400}]->_4,
_3-[:flight {leave:1349438400, arrive:1349445600}]->_4,
_3-[:flight {leave:1349442000, arrive:1349449200}]->_4,
_3-[:flight {leave:1349445600, arrive:1349452800}]->_4; 
```

只是为了好玩，这里有一个查询，显示与目的地匹配的所有航班（过滤之前）：[http](http://console.neo4j.org/r/6ropic) ://console.neo4j.org/r/6ropic 需要有负时差才能成为有效的旅行。

这是一个带有`where`子句过滤的查询：

```
start dc=node(1), la=node(4)  
match trip=dc-[dcny]->ny-[nysf]->sf-[sfla]->la  
where dcny.arrive < nysf.leave and nysf.arrive < sfla.leave  
return dcny.arrive - nysf.leave, nysf.arrive - sfla.leave, dcny.arrive, nysf.leave, nysf.arrive, sfla.leave;
+-----------------------------------------------------------------------------------------------------------+
| dcny.arrive - nysf.leave | nysf.arrive - sfla.leave | dcny.arrive | nysf.leave | nysf.arrive | sfla.leave |
+-----------------------------------------------------------------------------------------------------------+
| -3600.0                  | -3600.0                  | 1349424000  | 1349427600 | 1349442000  | 1349445600 |
+-----------------------------------------------------------------------------------------------------------+
1 row
0 ms 
```

[http://console.neo4j.org/r/79qr9s](http://console.neo4j.org/r/79qr9s)

如果您想尝试使用可变长度路径来执行此操作，这会有点棘手，但对于这个用例，最多指定几个中途停留可能不是世界末日。

*更新*：

正在考虑更多 - 您还可以`start`根据到达和离开时间的索引在您的子句中选择一组关系。会极大地限制您的搜索。

# gnuplot - 如何将轴移动到图表中心？

> ID：12749661
> 
> 赞同：13
> 
> 时间：2012-10-05T15:43:11.397
> 
> 标签：gnuplot

我需要在坐标系上绘制一个函数，该坐标系的原点位于屏幕中心（或靠近中心的某个地方，但不一定在中心），我需要绘制轴，以便它们在原点处交叉。轴也应该有标签和抽动，以及箭头。

我不知道如何有效地做到这一点，到目前为止，在我的代码中，我为我的抽动手动设置偏移量，并使用偏移量手动绘制箭头。我还在轴标签上设置了偏​​移量。所有这些都非常脆弱，偏移量会根据终端设置而变化。

有人可以帮助我提供示例代码或解释如何以正确的方式执行此操作吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-10T00:00:14.873

好吧，使用 _zeroaxis 是获取抽动和标签的“正确”方法：设置 _range 可为您提供使 0,0 居中的对称性……一旦您知道 _range，您就可以手动绘制箭头。

```
set xzeroaxis
set xtics axis
set xrange [-10:10]
set arrow 1 from -9,0 to -10,0
set arrow 2 from  9,0 to  10,0

set yzeroaxis
set ytics axis
set yrange [-1:1]
set arrow 3 from 0,-.9 to 0,-1
set arrow 4 from 0,.9  to 0,1

set border 0

plot sin(x) 
```

![在此处输入图像描述](../Images/3fce6c02ca9c9755b8335a84c571073c.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T16:57:09.147

黑客攻击！

```
set term pngcairo truecolor size 300,300 font "Arial,12"
set out 'plot.png'

# x,y min/max and center
xmin = -10 
xc = 0 
xmax = 10
ymin = -2
yc = 0 
ymax = 2 
# default borders
tm = 1 
bm = 1 
rm = 4 
lm = 4 
# arrow scale factor to cover last tic 
af = 1.05
set arrow from xc,yc to xmin*af,yc filled size 0.6,30
set arrow from xc,yc to xmax*af,yc filled size 0.6,30
set arrow from xc,yc to xc,ymax*af filled size 0.6,30
set arrow from xc,yc to xc,ymin*af filled size 0.6,30

set multiplot layout 2,2 
## Plot 1, top left
set key top left
set xr [xmin:xc]
set yr [yc:ymax]
set tmargin tm
set bmargin 0
set rmargin 0
set lmargin lm
set border 9
unset ytics
set xtics nomirror
plot sin(x)
## Plot 2, top right
unset key
set xr [xc:xmax]
set lmargin 0
set rmargin rm
set border 3
set ytics nomirror
replot
## Plot 3, bottom left
set xr [xmin:xc]
set yr [ymin:yc]
set bmargin bm
set tmargin 0
set lmargin lm
set rmargin 0
set border 12
unset tics
replot
## Plot 4, bottom right
set xr [xc:xmax]
set lmargin 0
set rmargin rm
set border 6
set ytics nomirror
replot
unset multiplot 
```

我得到这个输出： ![在此处输入图像描述](../Images/b63b910a013a7468b3ab0d0cf809254c.png)

也就是说，您可能会考虑该`zeroaxis`选项。[这里](http://gnuplot.sourceforge.net/demo/ellipse.html)有一个演示。遗憾的是，此选项不会将轴绘制为零，而只是在该位置放置一条线。

我不会说我的方法是“有效的”，但除了更改正在绘制的函数/数据之外，可能不需要太多努力来修改它，因为大部分工作都是通过`replot`命令完成的。我不知道让 gnuplot 将箭头放在轴的末尾或更改轴的本地绘制位置的选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-08T08:58:58.517

除了 Jim 的回答，如果需要，可以将抽动和轴放在前面

```
# bring the grid over the plot
set grid front

# remove grid if not required
unset grid 
```

# c# - RadGridView 模板选择器

> ID：12749662
> 
> 赞同：3
> 
> 时间：2012-10-05T15:43:14.677
> 
> 标签：c#, xaml, telerik

我正在使用 RadGridView 在网格中显示一堆项目。对于每个项目，我想根据给出的数据在两个不同的模板之间切换。一个是本质上弹出一个文本块的依赖属性，另一个是另一个显示表格的 RadGridView。

当静态放入时，它们都单独工作，但我想动态选择这两个不同的模板。但是，我的选择器没有被调用，因此没有使用模板。

资源：

```
<Window.Resources>
    <DataTemplate x:Key="theBasicView">
        <controls:InfoDetailsControl InfoDetail="{Binding InfoDetails}" />
    </DataTemplate>

    <DataTemplate x:Key="theTableView">
        <telerik:RadGridView ItemsSource="{Binding DetailsTable}" />
    </DataTemplate>

    <analysis:DetailsTemplateSelector 
        BasicView="{StaticResource theBasicView}"
        TableView="{StaticResource theTableView}"
        x:Key="detailsTemplateSelector"
        />
</Window.Resources> 
```

以及有问题的模板选择器：

```
<telerik:RadGridView.RowDetailsTemplate>
    <DataTemplate>
        <ItemsControl
               ItemTemplateSelector="{StaticResource detailsTemplateSelector}"
               />
    </DataTemplate>
</telerik:RadGridView.RowDetailsTemplate> 
```

如果是 BasicView，则 DetailsTable 应为空。否则，它应该是一个 TableView。这是我的 DetailsTemplateSelector：

```
public class DetailsTemplateSelector : DataTemplateSelector
{
    public DataTemplate BasicView { get; set; }
    public DataTemplate TableView { get; set; }

    public override DataTemplate SelectTemplate(object item, DependencyObject container) {
        FrameworkElement element = container as FrameworkElement;
        if (element != null && item != null && item is ViewableRuleResult)
        {
            ViewableRuleResult ruleResult = item as ViewableRuleResult;
            Window window = Application.Current.MainWindow;

            if (ruleResult.DetailsTable == null)
            {
                return BasicView;
            }
            else
            {
                return TableView;
            }             
        }
        return null;
    }
} 
```

在函数中放置断点`SelectTemplate`永远不会被击中。为什么我的 DetailsTemplateSelector 永远不会被调用？我感觉我的 RowDetailsTemplate 中的模板选择器不对。如果您需要更多细节或不清楚的地方，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:17:55.867

解决它。原来 RadGridView 有一个属性`RowDetailsTemplateSelector`。使用以下 XAML：

```
<telerik:RadGridView x:Name="resultsgrid"
                                RowDetailsTemplateSelector="{StaticResource detailsTemplateSelector}"
                                ItemsSource="{Binding ViewableItems}"
                                AutoGenerateColumns="False"
                                Margin="0,0,0,30"
                                IsReadOnly="True"
                                > 
```

并完全删除`RowDetailsTemplate`之前定义的，它现在可以正常工作了。

# windows - 根据结果 窗口批处理脚本分配字母等级

> ID：12749663
> 
> 赞同：-2
> 
> 时间：2012-10-05T15:43:17.220
> 
> 标签：windows, var, batch-file

目前我正在做一个练习，只需要朝着正确的方向推动来解决这个问题。

该项目是一个价值 600 万美元的男子测验，有 10 个问题，练习是提供逻辑并根据我目前尝试的正确或错误数字分配字母等级

```
SET grade = 

IF "%right%"=="10" SET grade=A+
IF "%right%"=="9"  SET grade=B+
IF "%right%"=="7"  SET grade=C+
IF "%right%"=="5"  SET grade=D+
IF "%right%"=="4"  SET grade=F 
```

在程序结束时，它会根据 %right% 回显字母等级

```
Your letter grade based on answers = %grade% 
```

我也试过

```
IF "%right%" == "10" (
     SET grade=A+
) 
```

除非我的问题与设置等级有关，否则无法工作=

```
REM Define and initialize variables that will be used to track the total number 
REM of right and wrong answers
SET /A Right = 0
SET /A Wrong = 0
SET grade = 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:51:48.183

我的经验是，避免空白可以解决一些比较问题。所以试试这个：

```
SET right=[Your logic]
IF %right%==10 SET grade=A+
IF %right%==9 SET grade=B+
...
ECHO Your letter grade based on answers = %grade% 
```

# ruby-on-rails - Rails 仍然为不存在的页面抛出错误？

> ID：12749665
> 
> 赞同：0
> 
> 时间：2012-10-05T15:43:24.720
> 
> 标签：ruby-on-rails

我曾经有一个班级上传，后来我决定删除。我运行迁移以删除表，确保我的架构已更新，手动删除关联的视图和控制器等。我什至在我的目录中运行了一个 grep 来检查“上传”的痕迹或对它的引用。但是，当我尝试访问我的页面时，我在控制台中收到错误 - 500 服务错误。日志说：

```
ActionView::MissingTemplate (Missing template /app\views\upload\uploadfile.rhtml with     {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in:
  * "/Users/claire/Documents/folio/app/views"
  * "/Users/claire/Documents/folio"
  * "/"
):
  app/controllers/upload_controller.rb:3:in `index' 
```

...但是这些文件都不存在了。我尝试清除我的缓存和 cookie，它具有相同的效果。这可能是什么原因造成的？！

我的 routes.rb 文件

```
Folio::Application.routes.draw do
  resources :projects

  #get "home/index"
  root :to => "projects#new"
  match 'project/new',:controller=>"projects",:action=>"create"
  match "project/:id", :controller => "projects", :action=>"download"
  match "projects_controller/filter_list", :controller => "projects", :action => "filter_list"
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:26:52.540

您可以发布您的路线文件吗？我认为问题在于您仍然有指向已删除控制器的路由。

# video - 在我的 YouTube 视频结束时停止推荐视频

> ID：12749668
> 
> 赞同：2
> 
> 时间：2012-10-05T15:43:33.953
> 
> 标签：video, youtube, ads

有没有办法选择退出，甚至“买我的出路”让建议的视频出现在我的视频末尾？

我们有嵌入在我们网站上的私人视频，如果可能的话，我们愿意付费停止推荐的视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T10:43:00.837

只需`?rel=0`在您的 Youtube ID 后添加

例如：

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/9bZkp7q19f0?rel=0" frameborder="0" allowfullscreen></iframe> 
```

资源：

[https://developers.google.com/youtube/player_parameters#rel](https://developers.google.com/youtube/player_parameters#rel)

# sorting - Solr 3.6 中的条件排序

> ID：12749669
> 
> 赞同：2
> 
> 时间：2012-10-05T15:43:34.053
> 
> 标签：sorting, solr

我们正在运行 Solr 3.6 并尝试对结果集应用条件排序。澄清一下，数据是一组出价，我们希望添加按当前用户出价排序的选项，因此它不能用作常规排序（因为运行查询的每个用户的出价都会不同）。

结果集中的文档包括“CurrentUserId”和“CurrentBid”字段，所以我认为我们需要类似以下内容进行排序：

sort=((CurrentUserId = 12345) ? CurrentBid : 0) desc

这只是伪代码，但思路是，如果 Solr 中的 currentUserId 与用户 ID（本例中为 12345）匹配，则按 CurrentBid 排序，否则，只需使用 0。

似乎通过查询进行排序可能是实现这一目标的方法（或至少构成解决方案的一部分），使用类似于以下查询的内容：

`http://localhost:8080/solr/select/?q=*:*&sort=query(CurrentUserId:10330 AND CurrentBid:[1 TO *])+desc`

但这似乎对我不起作用，并导致以下错误：

`sort param could not be parsed as a query, and is not a field that exists in the index: ...`

[Solr 文档](http://wiki.apache.org/solr/FunctionQuery#Sort_By_Function)表明查询函数可以用作从 Solr 1.4 开始的排序参数，所以这看起来应该可以工作。

任何有关如何实现这一目标的建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T16:45:30.350

根据您提供的 Solr 文档链接，

> 通过参数取消引用 $otherparam 或通过“v”直接指定 LocalParams 中的查询字符串，支持任何类型的子查询。

因此，根据示例和您的查询，我认为以下一项或两项应该有效：

`http://localhost:8080/solr/select/?q=:&sort=query($qq)+desc&qq=(CurrentUserId:10330 AND CurrentBid:[1 TO *])`

`http://localhost:8080/solr/select/?q=:&sort=query({v='CurrentUserId:10330 AND CurrentBid:[1 TO *]'})+desc`

# android - 每个日志（猫）消息上的AutoToast？

> ID：12749673
> 
> 赞同：2
> 
> 时间：2012-10-05T15:43:42.587
> 
> 标签：android, logcat, toast

我有一个与配件通信的 Android 应用程序。我需要调试它的通信，这意味着 USB 端口已经被使用。我试过使用无线 ADB，但它对我没有用（它会工作几秒钟，然后几秒钟后脱落并断开连接，）所以我想知道是否有人知道一种方法来做到这一点：

我想显示我发送以自动登录 toast 的消息。我正在从一个没有上下文的类中制作日志消息，因此不能自己制作祝酒词。我希望有一些简单的方法可以做到，所以我的主要活动只是监听 logcat 的消息并将它们放在敬酒中。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:47:49.553

制作一个接口，让你的应用程序实现这个接口。

```
public interface Toaster
{
     public void fireToast(String toast);
}

public void fireToast(final String toast)
{
    runOnUiThread(new Runnable()
    {
        @Override
        public void run()
        {
            Toast.makeText(getApplicationContext(), toast, Toast.LENGTH_SHORT).show();
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:49:08.357

几个选项。

1.  您可以使用类似[aLogCat](https://play.google.com/store/apps/details?id=org.jtb.alogcat)的方式在设备上查看日志。
2.  只需将手机插入 USB 电缆，然后启动 ADB，即可在调试会话*后*查看日志。
3.  您可以`Context`通过记住`Context`应用程序启动（`Application.onCreate()`是一个好地方）并为其提供静态 getter 来从应用程序中的任何类中获取 a。从那里，很容易提供您自己的日志功能，将消息发送到日志和`Toast`s。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T15:51:49.053

在某个类中创建一个静态实用程序方法（我几乎总是在每个项目中都有一个实用程序类）并将一个方法放入其中以用于日志记录。不要直接调用 Log.X，总是使用你的实用方法。该实用程序方法将调用 Log.X（在您想要的任何日志级别），并创建相同消息的 Toast。

# android - 创建自定义视图和 findViewById 返回 null

> ID：12749678
> 
> 赞同：1
> 
> 时间：2012-10-05T15:44:05.717
> 
> 标签：android, adapter

首先，我很抱歉，因为我知道这个问题的变体已经被问了好几次，但我似乎找不到任何与我匹配的东西。

在我的代码中，出于某种原因，调用

TextView tt = (TextView) v.findViewById(R.id.top_text);

返回空值。我知道 R.id.top_text 返回查看调试器的正确值。同样，v 是从充气机创建的视图。我认为，如果定义了单个行的 xml 文件并且其中的特定项目返回了合理的值，则 findView 调用不应返回 null。

下面是自定义适配器和两个 xml 文件的完整代码。

很感谢任何形式的帮助。

谢谢

```
 public class ContactAdapter extends ArrayAdapter<ResultSet>{

        Context _context;
        int _layoutResourceId;
        ArrayList<ResultSet> _results;

        public ContactAdapter(Context context, int layoutResourceId,ArrayList<ResultSet> results) {
            super(context, layoutResourceId,results);
            _context = context;
            _layoutResourceId = layoutResourceId;
            _results = results;
        }
        @Override
        public View getView(int position, View convertView,ViewGroup parent){
            View v = convertView;
            if (v == null) {
                LayoutInflater vi = (LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = vi.inflate(R.layout.list_row, null);
            }
            ResultSet row = _results.get(position);
            if (row != null) {
                    TextView tt = (TextView) v.findViewById(R.id.top_text);
                    if (tt != null) {
                          tt.setText("Name: "+row.getName());                            }

            }
           return v;
        }

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/list_text"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="VOKAL CONTACTS"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="385dp" >
    </ListView>

</LinearLayout>

<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp">

     <ImageView
         android:id="@+id/img_icon"
         android:layout_width="wrap_content"
         android:layout_height="fill_parent"
         android:layout_alignParentBottom="true"
         android:layout_alignParentTop="true"
         android:layout_marginBottom="5dp"
         android:layout_marginRight="15dp"
         android:layout_marginTop="5dp"
         android:gravity="center_vertical" />

     <TextView
         android:id="@+id/top_text"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent"
         android:layout_alignParentBottom="true"
         android:layout_alignParentTop="true"
         android:layout_marginBottom="5dp"
         android:layout_marginTop="5dp"
         android:gravity="center_vertical"
         android:textColor="#000000"
         android:textSize="22dp"
         android:textStyle="bold" />

</RelativeLayout> 
```

# git - 比较同一文件的两个修订版

> ID：12749680
> 
> 赞同：1
> 
> 时间：2012-10-05T15:44:15.940
> 
> 标签：git, aptana

在 Eclipse 4.2 中，带有 aptana 插件 3.2。

我已经看到了几个关于当前文件与另一个修订版本之间比较的答案，但我正在寻找一种方法来比较同一文件的两个先前版本。

所以右键单击 > 比较 > 修订... 不起作用，因为我只能选择一个修订。

“资源历史记录”窗口也无济于事。

我想做的是在相对于文件的“提交树”中选择两个不同的提交，然后比较它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:33:42.110

如果只讨论 GUI 然后将项目签出到修订版 abc456，将文件与修订版 dfg786 进行比较？

如果命令行没问题：

git diff abc456 dfg786 -- 文件名

# php - 使用 simplexml_load_string 解析 XML 文档 STREAM

> ID：12749686
> 
> 赞同：1
> 
> 时间：2012-10-05T15:44:31.020
> 
> 标签：php, xml

我与将 XML 文档作为文档流提供服务的服务器建立了 TLS/TCP 连接。在任何时候，流可能具有：

1.  部分文档（例如`<doc1>one`）
2.  完整的文件（例如`<doc1>one</doc1>`）
3.  完整文档和部分文档（例如`<doc1>one</doc1><doc2>`）
4.  多个文件等（例如`<doc1>one</doc1><doc2>two</doc2>`）

当我从流中读取数据时，我只是将读取数据附加到“未解析”缓冲区，然后尝试使用`simplexml_load_string`. （1）没问题（失败），（2）没问题（工作），我的问题当然是，（3）和（4）因额外数据而失败。我真的没有办法对解析器说“只解析前 X 个字符”（或使用 substr），因为这需要实际解析 XML。当然，这些文档比示例要复杂得多。有没有办法：

1.  使 simplexml_load_string 忽略额外的数据并让它返回一个文档以及它从字符串中消耗的字符数（这样我就可以进行缓冲区操作），或者
2.  使用其他一些解析器/约定

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:37:27.557

回答了我自己的问题。基本上，如果我使用`xml_parser_create`and`xml_parse`并且它失败了，`Invalid document end`它会告诉我它在哪里失败了`xml_get_current_byte_index`. 然后我可以`substr`在那时再试一次。除了缺乏效率之外，它似乎适用于概述的所有情况，除了告诉失败是否会是永久性的......

# entity-framework - RefreshMode.ClientWins 或 StoreWins

> ID：12749693
> 
> 赞同：0
> 
> 时间：2012-10-05T15:44:59.683
> 
> 标签：entity-framework

我有一个使用 Entity Framework 的简单 Windows 窗体应用程序，但我陷入了这种情况：

-用户在 MDIform 中打开一个窗口（SearchForm），显示产品详细信息及其实际库存数量。

-用户在MDIform（与SearchForm一起）中打开第二个windowsform（POSForm），在销售productos后，该产品的库存更新为新数量并保存到DB，此时另一个打开的winform（SearchForm）必须用新数据更新显示的数据，我正在尝试重新加载上下文，重新实例化上下文，刷新表单，但表单仍然显示相同的数据。我在 SearchForm 中有一个事件处理程序，当我调用方法时会触发RefreshData() 来自 POSForm，并尝试刷新数据，但似乎没有任何改变。

刚刚关闭该表单（SearchForm）然后再次打开它，数据就会正确显示。

我不知道如何进行良好的刷新（我正在使用 context.Refresh(RefreshMode.StoreWins,entry)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:13:18.953

我猜你有屏幕刷新/数据源刷新问题而不是 EF 问题。编写调试代码以转储上下文内容以确保。

# .net - 拥有多个 DLL 还是一个大型 DLL 更好？

> ID：12749694
> 
> 赞同：3
> 
> 时间：2012-10-05T15:45:00.230
> 
> 标签：.net, performance, memory, dll, namespaces

拥有多个 DLL 还是一个大型 DLL 更好？还是有关系？

我正在处理的应用程序很大，有很多命名空间。目前，每个命名空间都包含在一个单独的 DLL 中，但是我们一直在考虑将其中的几个组合起来以简化依赖性问题。

当一个命名空间被引用时，所有其他的命名空间也会被加载到内存中吗？我只关心性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T16:07:36.797

命名空间和程序集 (DLL) 都提供了对项目进行*分区*的方法，但它们以不同的方式进行：命名空间提供逻辑分区，而程序集提供物理分区。

通常这些分区的边界完全匹配，但不一定是这样：您可以让来自同一个命名空间的类出现在多个程序集中；您还可以将多个命名空间中的类放入同一个程序集中。

我遵循的创建新程序集的经验法则很简单：如果存在一组类可以独立于另一组类使用的情况，则这两个组应该去单独的程序集。这使您可以更灵活地将程序集混合为其他项目的依赖项。由于依赖项的依赖项是延迟加载的，因此制作更小的 DLL 可以让您更好地管理应用程序的运行时占用空间。

与多个 DLL 相关的最大问题是编译时间的显着增加。幸运的是，它可以通过[管理“复制本地”](https://stackoverflow.com/a/649771/335858)设置来解决。

# ruby-on-rails - ar_sendmail - 安装时“找不到 RubyGem cyu-ar_mailer”

> ID：12749695
> 
> 赞同：0
> 
> 时间：2012-10-05T15:45:00.510
> 
> 标签：ruby-on-rails, ruby, gem

我正在尝试在我们的登台服务器上测试电子邮件。我们使用 ar_sendmail，我确信它过去曾在此服务器上运行过。现在虽然它抱怨实际上存在的丢失的宝石：

```
$ sudo /etc/init.d/ar_sendmail start
Starting ar_sendmail: /usr/lib/ruby/1.8/rubygems.rb:827:in `report_activate_error': Could not find RubyGem cyu-ar_mailer (>= 0) (Gem::LoadError)
    from /usr/lib/ruby/1.8/rubygems.rb:261:in `activate'
    from /usr/lib/ruby/1.8/rubygems.rb:68:in `gem'
    from /usr/local/bin/ar_sendmail:18

$ gem list | grep ar_mailer
cyu-ar_mailer (1.4.8.1, 1.4.7) 
```

什么？有人知道这里可能出了什么问题吗？我尝试重新安装 gem 以防万一并得到相同的错误。这是正在爆炸的文件的内容（/usr/local/bin/ar_sendmail）

```
 1 #!/usr/bin/ruby
  2 #
  3 # This file was generated by RubyGems.
  4 #
  5 # The application 'cyu-ar_mailer' is installed as part of a gem, and
  6 # this file is here to facilitate running it.
  7 #
  8 
  9 require 'rubygems'
 10 
 11 version = ">= 0"
 12 
 13 if ARGV.first =~ /^_(.*)_$/ and Gem::Version.correct? $1 then
 14   version = $1
 15   ARGV.shift
 16 end
 17 
 18 gem 'cyu-ar_mailer', version
 19 load 'ar_sendmail' 
```

感谢任何建议 - 最大

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:05:46.333

我通过像这样启动它来解决这个问题：

```
/opt/ruby-enterprise-1.8.7-2010.02/bin/ruby /usr/local/bin/ar_sendmail -e staging -d --batch-size 100 --delay 150 
```

其中“暂存”是我的暂存环境的名称。我认为它之前没有得到正确的环境，这就是为什么它认为宝石不存在而爆炸的原因。

# c# - 替换 Sitecore 媒体库链接中的空白

> ID：12749698
> 
> 赞同：3
> 
> 时间：2012-10-05T15:45:14.967
> 
> 标签：c#, .net, sitecore, sitecore6

当 W3C 验证我的页面时，我收到以下错误：

```
Bad value /~/media/Image Libraries/Carousel Images/sea.jpg?w=652&h=263&bc=transparent&as=1&thn=1 for attribute src on element img: Whitespace in path component. Use %20 in place of spaces. 
```

管道中是否有某个地方或者我在渲染这些链接之前更改了它们？

**编辑：**

这是一个示例图像标签：

```
<img width="257" height="155" src="/~/media/Image Libraries/Section Pods/headphonewoman.jpg?w=257&h=155&bc=transparent&as=1&thn=1" alt="Administration"> 
```

这是确切的错误：

```
Error Line 565, Column 218: Bad value /~/media/Image Libraries/Carousel Images/office.jpg?w=652&h=263&bc=transparent&as=1&thn=1 for attribute src on element img: Whitespace in path component. Use %20 in place of spaces.

…ages/office.jpg?w=652&amp;h=263&amp;bc=transparent&amp;as=1&amp;thn=1" />

Syntax of IRI reference:
    Any URL. For example: /hello, #canvas, or http://example.org/. Characters should be represented in NFC and spaces should be escaped as %20\. 
```

我们还尝试添加一个覆盖其中的管道，`GetMediaUrl`但这`Sitecore.Resources.Media.MediaProvider`无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T17:31:20.837

您可以**在**以下`<encodeNameReplacements>`节点下执行此操作`web.config`：

```
<encodeNameReplacements>
  // ..
  <replace mode="on" find=" " replaceWith="%20" />
  // ..
</encodeNameReplacements> 
```

# php - 当我从 php 页面下载文件时，PC 被挂起

> ID：12749700
> 
> 赞同：-3
> 
> 时间：2012-10-05T15:45:19.463
> 
> 标签：php, file, download, webpage

当我从 PHP 页面下载文件时，PC 被挂起。这是我的代码`download.php`：

```
<?php
if(isset($_GET['file']))
{
$file='';
switch($_GET['file'])
{
    case 1:
        $file='Firefox  13.0.rar';
        break;
    case 2:
        $file='Chrome 22.0.rar';
        break;
    case 3:
        $file='English Corner Offline Setup.rar';
        break;
    case 4:
        $file='Net framework 2.0.rar';
        break;
    case 5:
        $file='WindowsInstaller 3.1.rar';
        break; 
}
header('Content-disposition: attachment; filename='.$file);
header('Content-type: application/zip');
readfile("download/$file");
}
?> 
```

在另一个页面中：

```
<a href="download.php?file=1">Firefox</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:52:33.890

我只能看到一个问题是您的文件中有空格。我认为这是造成问题

```
$file='Firefox  13.0.rar'; 
```

改用`urlencode`这个

```
header('Content-disposition: attachment; filename='.urlencode($file)); 
```

# python - 将 JSON (dict) 与模型对象传递给 Django 中的模板

> ID：12749702
> 
> 赞同：0
> 
> 时间：2012-10-05T15:45:34.613
> 
> 标签：python, django

# 问题

在 Django 中，当在视图中使用来自 API 的数据（不需要保存到数据库中）时，是否有理由更喜欢以下之一：

1.  将 API 数据 (json) 转换为 json 字典并传递给模板
2.  将 API 数据 (json) 从 models.py 转换为适当的模型对象，然后将其传递给模板

### 到目前为止我所考虑的

*   性能：我对这两种方法都进行了计时，并对它们进行了 25 次迭代的平均。将 API 响应转换为模型对象大约慢了 50 毫秒（0.4117 对 0.4583 秒，+11%）。这不包括定时渲染。
*   不将此数据保存到数据库确实会阻止我与 API 的数据创建多对多关系（必须在添加 M2M 关系之前保存一个对象），但是，我希望 API 充当此数据的存储，而不是我的应用程序
*   DRY：如果我发现自己在多个视图中使用此 API 数据，我可能会发现将我所有的消费/清洁/等都放入其中很方便。模型中适当对象`__init__`中的代码。

首先十分感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:25:29.190

将其转换为模型对象不需要将其存储在数据库中。

此外，如果您确定不想存储它，则可能将其放在 models.py 中并使其成为 Django 模型是错误的想法。可能它应该只是普通的 Python 类，例如在 resources.py 或类似的东西中，不要将它与模型混淆。我更喜欢这种方式，因为可能转换速度较慢（非常小），但它不仅允许添加自定义构造函数，还允许添加其他方法和属性，这非常有帮助。当您使用普通的类和对象时，它也很方便并且可以组织东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:25:13.347

将字典列表直接传递给模板。当您需要将它与模型一起使用时，请[`.values()`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#values)改为从中获取字典列表。

# c++ - C ++ ifstream拆分一个字符

> ID：12749704
> 
> 赞同：-1
> 
> 时间：2012-10-05T15:45:43.770
> 
> 标签：c++, split, char, iostream, ifstream

我想逐行读取 C++ 文件，并将每一行拆分为`"\t"`字符以填充矩阵。我的代码会这样

```
 ifstream data_x;
        double** test_data = new double*[100];
        for(int j = 0 ; j <  ; j++)
             test_data[j] = new double[4]; 

    data_x.open("X.txt");

    int i = 0;
    if (data_x.is_open()) 
    {
        while (!data_x.eof()) 
        {
            char** split = data_x.split("\t") 
            for(int k = 1 ; k < 4 ; k++)
                 test_data[i][k];
            i++;
        }
    }

    data_x.close();

    ifstream data_y;
    data_y.open("Y.txt");

    i = 0;
    if (data_y.is_open()) 
    {
        while (!data_y.eof()) 
        {
            data_y >> test_data[i][0];
            i++;
        }
    }

    data_y.close(); 
```

where 语法

```
 char** split = data_x.split("\t") 
 for(int k = 1 ; k < 4 ; k++)
      test_data[i][k]; 
```

是近似的。如何用 C++ 正确地做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:55:13.423

假设您的文件只包含数字，这是标准的 C++ 习惯用法：

```
#include <vector>
#include <string>
#include <sstream>
#include <fstream>

std::ifstream infile("data.txt");

std::vector<std::vector<double>> matrix;

for (std::string line; std::getline(infile, line); )
{
     std::istringstream iss(line);
     std::vector<double> row;

     for (double d; iss >> d; )
     {
         row.push_back(d);
     }

     matrix.push_back(row);
} 
```

如果您知道矩阵的大小，则可以添加相关`reserve`调用以避免向量重新分配。您还可以添加测试以检查一行上是否有任何无法识别的数据，但现在这应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:34:40.107

用空格分隔的实体创建向量实际上很简单：

```
std::vector<T> fields(
    std::istream_iterator<T>(
        d::istringstream(line) >> std::skipws),
    std:.istream_iterator<T>())); 
```

如果您的单元格类型`T`会考虑其他空格而不是`'\t'`分隔符，则您可能希望使用修改的构面来更改被视为空格的内容`std::ctype<char>`。

显然，上面的逻辑可以打包成一些更容易使用的函数。

# vb.net - 如何只更改一个工具提示？

> ID：12749709
> 
> 赞同：-1
> 
> 时间：2012-10-05T15:45:55.890
> 
> 标签：vb.net, tooltip

我正在使用图片框填充 FlowLayout。当我填充时，我给他们每个人一个工具提示。我有一个单独的功能来改变图片我怎么能改变工具提示呢？

```
dim laytt as tooltip = new tooltip

For i = 1 To count
        Dim newPic As PictureBox = New PictureBox()
        newPic.Image = p.Image
        newPic.Size = p.Size
        newPic.SizeMode = p.SizeMode

        laytt.SetToolTip(newPic, ttstring)

        AddHandler newPic.Click, AddressOf LayoutComponent_Clicked

        sys.Add(a_component)

        LayoutFlowLayout.Controls.Add(newPic)
Next 
```

后来我有一个功能可以更改其中的图片我希望能够更改工具提示

```
Private Sub LayoutComponent_Clicked(ByVal sender As Object, ByVal e As EventArgs)

    Dim i As Integer = LayoutFlowLayout.Controls.IndexOf(sender)

    If deleteModeOn Then
        sys.components.RemoveAt(i)
        LayoutFlowLayout.Controls.RemoveAt(i)
        Exit Sub
    End If

    'get index in sys from layout?

    If (sys.components.Item(i).GetType() = GetType(Transpositor)) Then
        Form2.ShowDialog(Me)
        sys.components.Item(i).divert = tempTranspositorDivert

        'here I want to do something like this
        laytt.RemoveAt(i) <--- THIS DOESN'T EXIST

    End If

End Sub 
```

TL;DR 我只想删除/更改特定索引处的一个工具提示文本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:58:15.997

由于`sender`参数是被单击的图片框控件，您可以使用该变量来指定要更改的控件。例如，这将删除工具提示：

```
laytt.SetToolTip(sender, Nothing) 
```

这将改变它：

```
laytt.SetToolTip(sender, "new value") 
```

# android - 在android中设置布局

> ID：12749717
> 
> 赞同：-2
> 
> 时间：2012-10-05T15:46:13.750
> 
> 标签：android, android-layout

我想在 android 应用程序中设置布局，以便编辑文本占据大部分屏幕，并且按钮位于底部。我如何动态地做到这一点？

[![截屏](../Images/6ee14956395cf77d95cbc278b2f7ee70.png)](https://i.stack.imgur.com/623ce.png)

虽然我希望文本字段与所有剩余空间保持平衡。

提前致谢。

这个问题已经回答了，我得到了解决方案。那么为什么在世界上它被标记为“不具有建设性”？

这设置了一个示例，如何在 android xml 定义中赋予权重。没有冒犯，但我觉得那些投票反对这篇文章的人是吸血鬼，他们四处游荡，通过找任何借口从人们身上吸血，即使它是微不足道的。

如果社区中有人支持开放式交流，请来这里看看如何良好的知识收集被巨魔破坏。

最后，我希望我在最后三段中已经清楚了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:49:06.983

好简单

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:ems="10"
        android:gravity="top|left" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/button1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Button" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:52:27.573

编辑：

```
RelativeLayout layout = new RelativeLayout(this);

layout.setScrollContainer(true);    // Remove this if you would not like the soft keyboard to resize the view
LayoutParams layoutParams = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);

EditText text = new EditText(this);
text.setGravity(Gravity.TOP | Gravity.LEFT);

Button button = new Button(this);
button.setId(1000);     // The ID can be anything really

LayoutParams textParams = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
textParams.addRule(RelativeLayout.ALIGN_PARENT_TOP);
textParams.addRule(RelativeLayout.ABOVE, button.getId());

LayoutParams buttonParams = new LayoutParams(LayoutParams.FILL_PARENT, 100);    // I used a basic height of 100px here
buttonParams.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);

text.setLayoutParams(textParams);
button.setLayoutParams(buttonParams);

layout.setLayoutParams(layoutParams);

layout.addView(text);
layout.addView(button);

setContentView(layout); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T15:53:27.340

尝试这样的事情：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <EditText 
        android:id="@+id/edittext"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:hint="Enter note here"
        android:layout_weight="10"
        android:gravity="center"
        />

    <Button 
        android:id="@+id/button"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Done"
        android:layout_weight="1"
        />

</LinearLayout> 
```

# soap - 更正 SOAP 错误方法未实现的错误

> ID：12749719
> 
> 赞同：1
> 
> 时间：2012-10-05T15:46:14.577
> 
> 标签：soap, curl, paypal, paypal-sandbox, soap-client

好的，不知道这个问题是什么。我正在尝试通过 cURL 向 PayPal 发布 API 请求，我得到以下结果。我的通话中是否缺少某些会导致这种情况的东西？

根据 PayPal 的说法，调用是正确的，当我使用 PHP cURL 包装函数时它工作正常......很奇怪。

感谢您的帮助！

```
curl https://api.sandbox.paypal.com/2.0/ -H "X-PAYPAL-SECURITY-USERID: api1.sitetest.com" -H "X-PAYPAL-SECURITY-PASSWORD: 111222222UH24" -H "X-PAYPAL-DEVICE-IPADDRESS: 170.10.125.52" -H "X-PAYPAL-MESSAGE-PROTOCOL: SOAP11" -H "X-PAYPAL-APPLICATION-ID: APP-80W284485P519543T" -E "/Users/Me/Library/PayPal_Keys/cert_key_pem.txt" -d "<SOAP-ENV:Envelope xmlns:xsi=\"http://www.w3.org/1999/XMLSchema-instance\" xmlns:SOAP-ENC=\"http://schemas.xmlsoap.org/soap/encoding/\" xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsd=\"http://www.w3.org/1999/XMLSchema\" SOAP-ENV:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\"><SOAP-ENV:Header /><SOAP-ENV:Body><CreateAndSendInvoiceRequest><requestEnvelope><errorLanguage>en_US</errorLanguage></requestEnvelope><invoice><merchantEmail>sweet@sweetsounds.com</merchantEmail><payerEmail>me@testsite.com</payerEmail><businessName>Test Business, Inc.</businessName><logoURL></logoURL><itemList><item><name>Test Item</name><quantity>2</quantity><unitPrice>5.79</unitPrice><taxName>sales</taxName><taxRate>6.0</taxRate></item></itemList></invoice></CreateAndSendInvoiceRequest></SOAP-ENV:Body></SOAP-ENV:Envelope>" 
```

退货

```
<SOAP-ENV:Fault><faultcode>SOAP-ENV:Client</faultcode><faultstring>Method not implemented</faultstring></SOAP-ENV:Fault> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:55:17.243

解决了这个问题。PayPal 更改了此特定调用的沙盒 api url，并没有在他们的文档中更新它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-18T06:05:26.087

沙盒的新网址是“ [https://api-3t.sandbox.paypal.com/2.0/](https://api-3t.sandbox.paypal.com/2.0/) ”。你可以在这里测试你的命令

# objective-c - UITextField 没有调用委托方法

> ID：12749721
> 
> 赞同：0
> 
> 时间：2012-10-05T15:46:22.977
> 
> 标签：objective-c, xcode, delegates, uitextfield, storyboard

我有一个`DetailViewController`，它的实现文件包含以下代码：

```
#import <UIKit/UIKit.h>

@interface DetailViewController : UIViewController <UITextFieldDelegate>

{
    __weak IBOutlet UITextField *nameField;
    __weak IBOutlet UITextField *numberField;
}

@end 
```

在我的故事板中，我将`ViewController`'s 设置为`DetailViewController`并将我的两个 s 的代表连接`UITextField`到我的`DetailViewController`. my 的实现文件`DetailViewController`包含此方法，可在点击文本字段以外的其他位置时关闭键盘：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];
    return YES;
} 
```

虽然没有调用此方法，但我已经使用断点对其进行了测试。可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:01:58.507

rdelmar 是正确的，只有当用户点击键盘上的“返回”键时才会触发您的代码，而不是当他们在键盘外单击时触发。

为了获得您正在寻找的行为，我会在您的文本字段后面的视图中添加一个 Tap Gesture Recognizer，然后将`[nameField resignFirstResponder];`and`[numberField resignFirstResponder];`放入点击手势识别器的代码中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:56:43.983

你为什么用`_weak`？去掉它。

在你的`.m`文件中做（在`viewDidLoad`）：

```
[nameField setDelegate:self]; 
```

其他文本字段相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T15:57:25.793

*   我创建了一个示例项目
*   添加到视图控制器
*   添加了一个文本字段并连接了它的委托
*   在视图控制器中编写代码

    ```
     (BOOL)textFieldShouldReturn:(UITextField *)textField
     {
        [textField resignFirstResponder];
        return YES; 
     } 
    ```

它工作得很好。试过弱它也可以作为实例变量和属性

所以检查你是否在任何地方重新分配它，并使用断点检查它的内存是否相同

# c++ - 如何在单击时将矩阵中按钮的坐标传递给插槽？

> ID：12749722
> 
> 赞同：2
> 
> 时间：2012-10-05T15:46:24.630
> 
> 标签：c++, qt, signals-slots

我从 C++ 和 Qt 开始。我有一个 QPushButtons 矩阵，我想为它们处理点击事件。问题是我无法告诉插槽坐标 os 数组中的按钮，以便我可以使用它们。我已经成功地将一个整数传递给我的插槽，但不是两个坐标。我不确定我是否让自己足够清楚......这是我有问题的代码：

```
for (int i = 0; i < mapSize_x; i++) {
    for (int j = 0; j < mapSize_y; j++) {
        buttonsArray[i][j] = new QPushButton();
        ui->mainLayout->addWidget(buttonsArray[i][j], i, j);

        connect(buttonsArray[i][j], SIGNAL(clicked()),
                signalMapper, SLOT(map()));
        signalMapper->setMapping(buttonsArray[i][j], i, j); // here
    }
}
connect(signalMapper, SIGNAL(mapped(int, int)),
        this, SLOT(buttonClick(int, int))); 
```

setMapping 只接受两个参数，我想传三个。有解决方法吗？我用谷歌搜索了很多，但仍然找不到答案。我也尝试传递 QPushButton 对象而不是坐标，但也没有成功。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:12:48.643

考虑使用 a`QHash`来存储您的按钮，由按钮本身键入并指向包含它们的行和列的一对。然后，您应该能够根据小部件指针设置映射，然后在信号映射器发出信号时查找关联的行和列。例如，如下声明一个类数据成员：

```
QHash<QPushButton*, QPair<int, int> > buttonHash; 
```

那么你上面的代码可能会变成

```
for (int i = 0; i < mapSize_x; i++) {
    for (int j = 0; j < mapSize_y; j++) {
        QPair<int, int> gridPair(i, j);
        QPushButton* button = new QPushButton();
        buttonHash.insert(button, gridPair);
        ui->mainLayout->addWidget(button, i, j);

        connect(button, SIGNAL(clicked()),
                signalMapper, SLOT(map()));
        signalMapper->setMapping(button, qobject_cast<QWidget*>(button));
    }
}
connect(signalMapper, SIGNAL(mapped(QWidget*)),
        this, SLOT(buttonClick(QWidget*))); 
```

最后，您的`buttonClick`插槽将变为以下内容：

```
void SomeClass::buttonClick(QWidget* widget) {
   QPair<int, int> pair = buttonHash.value(qobject_cast<QPushButton*>(widget));
   int myRow = pair.first;
   int myColumn = pair.second;

   ...
} 
```

还有至少 2 种其他方法可以解决这个问题：

1.  您可以尝试将行和列组合成一个字符串并使用`QSignalMapper::setMapping(QObject*, const QString&)`. 这将需要一些逻辑来将行和列从`buttonClick`插槽中的字符串中拉出。
2.  您可以尝试通过使用位移和按位或将行和列组合成一个整数。然后，您可以依靠`QSignalMapper::setMapping(QObject*, int)`. 这将需要一些逻辑来将行和列从`buttonClick`插槽中的整数中拉出。

我不会详细介绍这些其他解决方案，因为它们有些难看。我上面提供的解决方案仍然是最直观的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:27:23.417

该类`QSignalMapper`在某些情况下可能非常有用，但对于您当前的用例来说可能有点过分了。

相反，请考虑使用[QButtonGroup](http://doc.qt.digia.com/4.8-snapshot/qbuttongroup.html)，它专为您正在尝试做的事情而设计，并提供更清洁和更简单的 API。

# visual-studio-2012 - 从全局文件夹或项目中的绝对文件夹中引用键入文件

> ID：12749723
> 
> 赞同：4
> 
> 时间：2012-10-05T15:46:33.857
> 
> 标签：visual-studio-2012, typescript

我知道 TypeScript 是新的，但只是在玩弄它。

我尝试转换一些使用 jQuery 的 .js 文件，为了使智能感知正常工作，我需要引用顶部的 jquery.d.ts 文件，例如

```
 /// <reference path="jquery.d.ts" /> 
```

没关系，但是您还需要将文件放在同一目录中。我想要的是全局引用输入文件，而不是相对于文件，所以如果我移动 js 文件，我不必更正输入文件的引用路径。

是否可以使它们与解决方案相关，或者将其放置在自动加载的全局文件夹中。

我使用 Visual Studio 2012 的 Web Essentials，所以我得到了预览和其他不错的功能。

希望有一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:31:59.300

[在此链接](http://msdn.microsoft.com/en-us/library/bb385682.aspx)的“参考指令”部分中，它表示支持以下内容：

```
/// <reference path="~/Scripts/ScriptFile4.js" /> 
```

但是，我无法让它适用于打字稿文件。我猜打字稿不支持它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-29T01:53:25.080

不支持全局或项目相对路径。这里有一个功能请求：

**参考/导入的绝对根路径**

[https://typescript.codeplex.com/workitem/1414](https://typescript.codeplex.com/workitem/1414)

# mingw - Win7平台安装MinGW有问题

> ID：12749730
> 
> 赞同：1
> 
> 时间：2012-10-05T15:47:12.317
> 
> 标签：mingw

我已经安装了最新的 MinGW，但是当我设置 MinGW 环境变量时。

[HowTo:_Install_MSYS_and_MinGW](http://wiki.wxwidgets.org/HowTo%3a_Install_MSYS_and_MinGW_for_use_with_Eclipse_CDT)
他们说：

```
"CPLUS_INCLUDE_PATH"="C:\\MinGW\\include\\c++\\3.4.5;C:\\MinGW\\include\\c++\\3.4.5\\backward;C:\\MinGW\\include\\c++\\3.4.5\\mingw32;C:\\MinGW\\include" . 
```

但是在我的“include”文件夹中，没有c++文件夹？？？？谁能帮帮我？非常感谢！！！</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:22:43.320

欢迎来到堆栈溢出！

如果您有最新的 minGW，则 PATH 应如下所示：

```
C:/mingw/lib/gcc/mingw32/4.7.0/include/c++ 
```

**Eclipse -- 项目 -- 属性**

![在此处输入图像描述](../Images/23134044ba8b6f868bf6598ad7531b95.png)

图像显示`t:/`替换`t:/`为`c:/`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:28:45.650

我推荐使用来自这个站点的安装程序：http: [//nuwen.net/mingw.html](http://nuwen.net/mingw.html) 它包含带有最新 GCC、Boost、SDL、Git 等的 MinGW。它非常容易安装，在安装过程中您实际上无事可做。非常适合我。

问候，

# magento - 如何将子文件夹中的 Magento 安装路径定向到主域名

> ID：12749733
> 
> 赞同：6
> 
> 时间：2012-10-05T15:47:23.363
> 
> 标签：magento, subdirectory, installation-path

我已将 Magento 1.7.0.2 安装到 mydomain.com/mag

（mydomain - 是我的主机帐户的主要注册域）（mag - 是任何子文件夹）

由于我的网站处于测试模式，如果出现任何问题，我只需删除“mag”文件夹，并且它不会覆盖 public_html 下的任何文件。

但是，如果我直接安装到根目录 public_html，那么它可能会覆盖一些文件或文件夹，如果我想随时恢复，那么我无法手动执行此操作。

因为我什至不知道在 magento 安装之前 public_html 下的确切文件夹和文件默认结构。

（我错误地做了一次，发生了）

现在在前端站点 URL 将是 mydomain.com/mag

但我想，如果客户输入[http://www.mydomain.com](http://www.mydomain.com)，他们将能够看到 LIVE 网站，而不是输入[http://www.mydomain.com/mag](http://www.mydomain.com/mag)

我怎么做

此外，这对于 SEO 部分是否可行。

我们是否需要在 Magento 后端执行此操作。或者我们是否需要通过设置子域类型来与托管公司合作，或者通过告诉简单脚本安装将安装文件夹从 mydomain.com/mag 更改为 www.mydomain.com

请建议我该怎么做。

问候

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-05T16:16:51.703

在`System > Config > Web`您的“基本网址”中，您将找到以下设置。要更新它，您必须执行以下 3 个步骤：

**第 1 步：将默认存储设置为正确的基本 url**

![网页配置设置](../Images/c67f6076aecf5b53c41d5cc37a1d9271.png)

请注意，基本 url 定义了子文件夹。

**第 2 步：将您的 STORE VIEW 基本 url 设置为根 url**

使用左侧的下拉菜单，将“当前配置范围”更改为您的商店视图 [NOT DEFAULT]

![商店视图切换器](../Images/c9dc50d8554c79b28352bb64f7f37dc6.png)

要更改基本 url 值，请取消选中“使用网站”并输入新的基本 url：

![新的基本网址](../Images/91973a097be45806e0454ec00c27c6ce.png)

此外，在同一屏幕中仔细检查您的会话文件管理 cookie 路径是否设置为站点的根文件夹并且域是否正确：

![饼干管理](../Images/8c0e247efcbdb3a11efb7c7ed32c4c30.png)

**Step 3【也用于多店管理】**

最后，这很重要，您需要复制 index.php 文件、.htaccess 文件，并将您的 media、skin 和 js 文件夹符号链接到您的根目录，因为它们现在仅可用于您的子文件夹 Magento base install -我们需要让您的主域知道在哪里可以找到 Magento！

从*Magento 安装*目录（在您的情况下为 mag）中的安全 shell 作为 sudoer：

```
sudo cp index.php ../
sudo cp .htaccess ../
sudo ln -s js ../
sudo ln -s skin ../
sudo ln -s media ../ 
```

您的管理员仍可在`yoursite.com/mag/admin`。

在这个主 webroot 中编辑您的 index.php 文件（您刚刚复制的文件）并在第 45 行附近对其进行更新：

`$mageFilename = 'app/Mage.php';`

将此更改为：

`$mageFilename = 'cart/app/Mage.php';`

其中“mag”是子文件夹。在您的情况下，您将使用名为“mag”的文件夹。最后，您*需要清除缓存*以使这些更改生效。

**第 4 步：多商店 [可选]**

如果您有多个商店，它们都可以通过这种方式提供服务，但您需要编辑 index.php 文件以提供正确的商店代码。更多信息可以在这里找到：

[http://www.magentocommerce.com/knowledge-base/entry/overview-how-multiple-websites-stores-work](http://www.magentocommerce.com/knowledge-base/entry/overview-how-multiple-websites-stores-work)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-16T21:31:56.243

我必须说弄清楚如何进行符号链接是一件麻烦事，我仍然无法弄清楚。除了我复制了我的 htaccess 和我的 index.php 并将其粘贴到我的根目录之外，所有其他步骤都运行良好。因此，对于那些遇到麻烦的人，我找到了一个更好的解决方案，而不是“媒体、皮肤和 JS”文件夹的符号链接。在您的 magento 管理员中。一般点击web下的System>config。只需将您的基础皮肤、媒体和 js 更改为您希望它们指向的文件夹...

例如：{{unsecure_base_url}}购物车/皮肤/

为我工作。希望它适用于任何有同样问题的人。哦，我正在使用 magento 1.8.1 再次感谢@philwinkle

# php - 基于 GUI 的 HTML 代码编辑器

> ID：12749735
> 
> 赞同：-3
> 
> 时间：2012-10-05T15:47:29.740
> 
> 标签：php, html, user-interface, ide

我需要知道是否有免费的`HTML`代码编辑器（`IDE`

类似于`GUI`基于`HTML`代码的编辑器。我也将`PHP`用于连接到`MySQL`数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:54:24.313

试试这个[CKEditor - 所见即所得的 Web 文本和 HTML 编辑器](http://ckeditor.com/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T15:55:26.853

看起来像[AlleyCode](http://alleycode.com/features.htm)这样的东西可能是您正在寻找的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T16:03:18.173

我使用 Dreamweaver，它是最好的所见即所得编辑器之一[http://www.adobe.com/products/dreamweaver.html](http://www.adobe.com/products/dreamweaver.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T15:59:50.580

这些链接应该会有所帮助：

[最佳 HTML 编辑器](http://webdesign.about.com/od/windowshtmleditors/tp/best_windows_html_editors.htm)

[所有 HTML 编辑器列表](http://en.wikipedia.org/wiki/List_of_HTML_editors)

我的 HTML 主要使用 Visual Studio 2010，但如果您更倾向于 GUI，则可以使用 Expression Web 或 Adob​​e Dreamweaver。

# email - 使用gmail帐户发送的电子邮件出现在cakePHP中收件人的垃圾邮件文件夹中？

> ID：12749736
> 
> 赞同：3
> 
> 时间：2012-10-05T15:47:31.387
> 
> 标签：email, cakephp

我正在为我的一个项目使用 cakephp。发送电子邮件我使用 cakeEmail。为此，我创建了一个用于发送电子邮件的 gmail 帐户（即用于从该帐户发送邮件的代码）。邮件发送有效，但发送的邮件出现在收件人的垃圾邮件文件夹中。
同样在 gmail 帐户中，邮件不会出现已发送邮件文件夹。

代码如下：

在 /app/Config/email.php 文件中是：

类电子邮件配置 {

```
 public $gmail = array(
        'host' => 'ssl://smtp.gmail.com',
        'port' => 465,
        'username' => 'username@gmail.com',
        'password' => 'password',
        'transport' => 'Smtp'
    ); 
```

}

我的控制器文件中用于密码恢复的代码是：

公共函数 _sendemail($user_data,$temporary_password){

```
 $email = new CakeEmail();
            $email->config('gmail');
            $email->template('welcome', 'password_recovery_email'); //template
            $email->emailFormat('html');
            $email->viewVars(array(
                               'temporary_password'=>$temporary_password,
                               'user_data'=>$user_data
                            ));
            $email->from(array('username@gmail.com' => 'Password Recovery'));
            $email->to($user_data['User']['email_address']);

            $email->subject('password recovery email');

            $result=$email->send();

    } 
```

请告诉我应该怎么做才能让所有已发送的电子邮件出现在收件箱而不是垃圾邮件文件夹中。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T21:21:21.223

有很多原因可以使您的电子邮件被视为垃圾邮件。

*   也许 Gmail 无法将发件人（smtp 源/您的开发机器）检查为受信任的发件人。您是否尝试过将您的 php 脚本上传到另一台服务器（生产）然后从那里发送？

*   您是否尝试将消息内容/主题更改为与“恢复密码”不同的内容？

*   您是否尝试将相同的消息发送给另一个收件人？

Gmail 使用很多规则来检查电子邮件是否为垃圾邮件，请查看此链接：[https ://webapps.stackexchange.com/questions/5773/how-gmail-and-other-mail-services-detects-垃圾邮件](https://webapps.stackexchange.com/questions/5773/how-gmail-and-other-mail-services-detects-a-mail-as-a-spam)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-10T09:24:42.590

尝试使用此代码而不是 cakephp 的方法：

```
 $subject = "Your Email Subject";
     $to = "Recipient's Email Address";
     $from = "Your Email Address";
     $additional_headers = "From: $from\r\n";
     $additional_headers .= "Content-type: text/html; charset=iso-8859-1\r\n";
     $additional_headers .= "MIME-Version: 1.0\r\n";
     $additional_headers .= "Return-Path: $from\r\n";
     $additional_headers .= "X-Priority: 3\r\n";
     $additional_headers .= "X-Mailer: PHP\r\n";
     $message = "Your Email Body";
     mail($to, $subject, $message, $additional_headers, "-f $from") 
```

# apache - 在不修改原始 php.ini 文件或使用 htaccess 的情况下更改 php.ini 设置

> ID：12749737
> 
> 赞同：0
> 
> 时间：2012-10-05T15:47:33.553
> 
> 标签：apache, php

我的服务器上用于文件上传的默认 php.ini 值（upload_max_filesize，post_max_size）是 10M。我想把它增加到40M。我怎么做？

方法一：我不能用。此方法在这种特定情况下不起作用。

```
ini_set("upload_max_filesize", "40M");
ini_set("post_max_size", "40M"); 
```

方法2：我也不能使用htaccess。因为当我这样做时，我的服务器会更改我的 .htaccess 文件并出现以下错误

```
# For security reasons, mod_php is not used on this server. Use a php.ini file for php directives 
```

方法 3：我不想更改默认的 php.ini 文件，因为这会更改整个服务器的设置。

方法4：我听说我可以在我的站点中创建一个php.ini 文件并在那里定义设置，但它也不起作用。我的那个文件的代码。（我有一种感觉，我以错误的方式应用了这个方法）

```
[PHP]

upload_max_filesize =40M
post_max_size =40M 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:34:47.787

好吧，方法 4 对我有用，就像我想的那样。我只需要以正确的方式去做。将此特定行添加到我的 .htaccess 文件中会读取该文件夹中新创建的 php.ini 文件。

```
AddHandler application/x-httpd-php5 .php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T01:34:20.650

在 Bluehost cpanel PHP 配置上，我选择了 PHP 5.2 “所有扩展名为 .php 的文件都将由 PHP 5.2 引擎处理。带有安全更新的旧版 PHP。与大多数环境兼容。”

要消除“#出于安全原因，此服务器上未使用 mod_php。使用 php.ini...”消息。

# java - 如何让 Spring Data Neo4j 和 Spring Data JPA 协同工作？

> ID：12749747
> 
> 赞同：3
> 
> 时间：2012-10-05T15:48:20.570
> 
> 标签：java, spring-data-jpa, spring-data-neo4j

我有一个应用程序使用 MySQL 和通过 REST Neo4j 服务器版本执行一些批处理作业。

我不知道如何让它们正确地协同工作：我可以让它们同时工作，但不能同时工作。我发现的帖子并不特定于 Neo4j 的服务器版本，也许这就是问题所在，因为其他一切对我来说似乎都很好。

我的配置：

**JpaConfig**

```
@Configuration
@EnableTransactionManagement(order=Ordered.HIGHEST_PRECEDENCE)
@PropertySource("META-INF/database.properties")
@ImportResource("classpath*:META-INF/repository.xml")
public class JpaConfig {
@Autowired
Environment env;

@Bean(destroyMethod = "close")
public DataSource dataSource() {
    DataSource dataSource = new DataSource();
    dataSource.setDriverClassName(env.getProperty("database.driverClassName"));
    dataSource.setUrl(env.getProperty("database.url"));
    dataSource.setUsername(env.getProperty("database.username"));
    dataSource.setPassword(env.getProperty("database.password"));
    dataSource.setTestOnBorrow(true);
    dataSource.setTestOnReturn(true);
    dataSource.setTestWhileIdle(true);
    dataSource.setTimeBetweenEvictionRunsMillis(1800000);
    dataSource.setNumTestsPerEvictionRun(3);
    dataSource.setMinEvictableIdleTimeMillis(1800000);
    dataSource.setValidationQuery("SELECT 1");
    return dataSource;
}

@Bean
public LocalContainerEntityManagerFactoryBean entityManagerFactory() {
    LocalContainerEntityManagerFactoryBean entityManagerFactory = new LocalContainerEntityManagerFactoryBean();
    entityManagerFactory.setDataSource(dataSource());
    entityManagerFactory.setPackagesToScan("it.smartblue.mcba.domain");
    entityManagerFactory.setJpaDialect(new HibernateJpaDialect());
    Map<String, String> jpaProperties = new HashMap<>();
    jpaProperties.put("hibernate.connection.charSet", "UTF-8");
    jpaProperties.put("hibernate.ejb.naming_strategy", "org.hibernate.cfg.EJB3NamingStrategy");
    jpaProperties.put("hibernate.bytecode.provider", "javassist");
    jpaProperties.put("hibernate.dialect", "org.hibernate.dialect.MySQL5InnoDBDialect");
    entityManagerFactory.setJpaPropertyMap(jpaProperties);
    entityManagerFactory.setPersistenceProvider(new HibernatePersistence());
    return entityManagerFactory;
}

@Bean
public PlatformTransactionManager transactionManager() {
    JpaTransactionManager transactionManager = new JpaTransactionManager();
    transactionManager.setEntityManagerFactory(entityManagerFactory().getObject());
    return transactionManager;
}

@Bean
public PersistenceExceptionTranslationPostProcessor exceptionTranslation() {
    return new PersistenceExceptionTranslationPostProcessor();
}
} 
```

**Neo4j.xml**

```
<!-- neo4j configuration -->
<neo4j:config graphDatabaseService="graphDatabaseService" entityManagerFactory="entityManagerFactory"/>
<bean id="graphDatabaseService" class="org.springframework.data.neo4j.rest.SpringRestGraphDatabase">
    <constructor-arg index="0" value="http://192.168.11.186:7474/db/data" />
</bean>
<neo4j:repositories base-package="it.smartblue.mcba.neo4j.repository" /> 
```

使用此配置 Mysql 可以完美运行，但 Neo4j 不会将任何属性保存到它创建的节点。

如果我删除属性`entityManagerFactory="entityManagerFactory"`Neo4j 有效，但我无法写入 MySQL。

我的服务方法用`@Transactional`or注释`@Neo4jTransactional`，而不是同时注释。

在我发现`org.springframework.data.neo4j.rest.SpringRestGraphDatabase`的bean类中：`graphDatabaseService`

```
@Override
public Transaction beginTx() {
    // return super.beginTx();
    return new NullTransaction();
}

@Override
public TransactionManager getTxManager() {
    return new NullTransactionManager();
} 
```

也许这是一项正在进行的工作？或者，也许我错过了什么……

我正在使用 Spring 3.1.2，Hibernate 4.1.4。这是我的 pom.xml 的一部分。

```
<dependency>
    <groupId>org.springframework.data</groupId>
    <artifactId>spring-data-jpa</artifactId>
    <version>1.2.0.RC1</version>
</dependency> 
  <!-- Neo4j dependencies -->
    <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-neo4j</artifactId>
        <version>2.1.0.RC4</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-neo4j-rest</artifactId>
        <version>2.1.0.RC4</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-neo4j-cross-store</artifactId>
        <version>2.1.0.RC4</version>
    </dependency> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T16:20:05.160

最后我成功了。

现在我只有一个，而不是两个不同的事务管理器`ChainedTransactionManager`。

我从文件中删除了 transactionManager bean ，`JpaConfig`并`neo4j.xml`添加了以下 Neo4jConfig

```
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.data.neo4j.config.EnableNeo4jRepositories;
import org.springframework.data.neo4j.config.JtaTransactionManagerFactoryBean;
import org.springframework.data.neo4j.config.Neo4jConfiguration;
import org.springframework.data.neo4j.rest.SpringRestGraphDatabase;
import org.springframework.data.neo4j.transaction.ChainedTransactionManager;
import org.springframework.orm.jpa.JpaTransactionManager;
import org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;
import org.springframework.transaction.PlatformTransactionManager;

@EnableNeo4jRepositories(basePackages = { "it.smartblue.mcba.neo4j.repository" })
@Configuration
public class Neo4jConfig extends Neo4jConfiguration {

    @Autowired
    LocalContainerEntityManagerFactoryBean entityManagerFactory;

    @Bean
    public SpringRestGraphDatabase graphDatabaseService() {
        return new SpringRestGraphDatabase("http://192.168.11.186:7474/db/data");
    }

    @Override
    @Bean(name = "transactionManager")
    public PlatformTransactionManager neo4jTransactionManager() throws Exception {
        return new ChainedTransactionManager(new JpaTransactionManager(entityManagerFactory.getObject()),
                new JtaTransactionManagerFactoryBean(graphDatabaseService()).getObject());
    }
} 
```

现在我必须在我的方法上只使用`@Transactional`注释

# oop - 对于 OOP，不可变和不变是同义词吗？

> ID：12749749
> 
> 赞同：4
> 
> 时间：2012-10-05T15:48:30.027
> 
> 标签：oop, immutability, invariants

对于 OOP，不可变和不变是同义词吗？

我有一种模糊的感觉，认为存在差异，但我不确定。

我相信不可变通常应用于对象，而不变通常应用于属性/值。

在这两种情况下，对象或变量都将保持不变且“真实”，因此它们看起来非常相似。

感谢您的任何反馈，因为我正在努力提高我对这些术语的理解的准确性，我认为我忽略了细微的差异。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T15:51:30.820

不确定这些是否是正确的定义，但对我来说，“不可变”意味着数据结构不会改变，而“不变”是不改变并保持真实的设定条件~~（但它与特定实例无关数据）~~。

现在使用不可变数据结构有助于确保不变量保持为真，因为它们不会突变，它们不会突然破坏以前为真的不变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:54:48.600

不可变是指对象在其生命周期内不发生变化。

*   一个不可变的字符串。如果连接，它会创建一个新字符串。原来的不变。

不变量是在指定的持续时间内不会改变的保证。它们不必显式地作为属性或值存在。

*   对象必须始终处于有效状态。
*   对象必须处于状态 X 才能执行操作 Y。
*   如果调用操作-X，则保证对象处于状态-X。
*   实体可以是公司或个人，但不能同时是两者。
*   一个文件不能同时打开和关闭。

# java - Java 环境（Resin+Quercus）中的 Wordpress 没有任何额外的代码调整？

> ID：12749751
> 
> 赞同：0
> 
> 时间：2012-10-05T15:48:39.227
> 
> 标签：java, wordpress, resin, caucho

这里有一些关于 Resin/Quercus 用于 Wordpress 的主题。我只是想确认，一旦安装了 Quercus，Wordpress 将按原样工作，带有 .php 文件扩展名等等？所有常见的 URL 重写等也可以在永久链接中使用吗？还是我们需要做一些手动和额外的调整？(http://caucho.com/resin-4.0/admin/http-rewrite.xtp)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T17:02:59.553

是的，wordpress 无需修改即可为我们在 Resin 4.0.x 上工作。虽然，您可能希望在 WEB-INF/resin-web.xml 中为“漂亮”的 URL 映射提供一些重写规则。

我们的看起来像：

```
<web-app xmlns="http://caucho.com/ns/resin"
         xmlns:resin="urn:java:com.caucho.resin">

  <!-- pass through all actual files to the standard dispatch -->
  <resin:Dispatch regexp="\.">
    <resin:IfFileExists/>
  </resin:Dispatch>

  <!-- pass through all php files to the standard dispatch -->
  <resin:Dispatch regexp="\.php"/>

  <!-- rewrite everything else to be /index.php/foo... -->
  <resin:Forward regexp="^" target="/index.php"/>

</web-app> 
```

# wordpress - get_stylesheet_directory 无法正常工作

> ID：12749753
> 
> 赞同：1
> 
> 时间：2012-10-05T15:48:47.920
> 
> 标签：wordpress, wordpress-theming

我在为我的一个主题创建的子主题中加载一些 javascript 时遇到问题。

基本上我这样做：

```
get_stylesheet_directory() . '/path/to/javascript.js' 
```

这是您应该做的，但是，根据文档，我得到：

```
mysite.com/dev/home/path/to/wordpress/path/to/theme/path/to/js.js 
```

这导致它找不到所需的文件。因为家是网站的根。

关于我能做些什么来解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:53:07.230

get_stylesheet_directory() 返回一个服务器路径。我很确定你想要：

```
get_bloginfo('stylesheet_directory'); 
```

这将返回与您的 Wordpress 安装相关的样式表目录的 URL，以便您可以加载外部资产，例如驻留在主题中的 Javascript 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T13:06:36.983

我认为这可以解决问题：

```
<script type="text/javascript" src="<?php echo get_stylesheet_directory_uri();?>/path/to/javascript.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-09T23:44:12.323

最好以 WordPress 的方式将脚本和样式排入队列。

[https://developer.wordpress.org/reference/functions/wp_enqueue_script/](https://developer.wordpress.org/reference/functions/wp_enqueue_script/) [https://developer.wordpress.org/reference/functions/wp_enqueue_style/](https://developer.wordpress.org/reference/functions/wp_enqueue_style/)

把这个放进去`functions.php`

```
add_action( 'wp_enqueue_scripts', 'enqueue' );
function enqueue() {
    wp_enqueue_style( 'style', get_stylesheet_uri() );
    wp_enqueue_style( 'theme-style', get_stylesheet_directory_uri().'/css/theme.css' );
    wp_enqueue_script( 'theme-scripts', get_stylesheet_directory_uri().'/js/theme.js' );
} 
```

# c# - 如何将列表中的值保存到文本文件 ?

> ID：12749755
> 
> 赞同：-2
> 
> 时间：2012-10-05T15:49:02.427
> 
> 标签：c#

我这样做是为了创建文件并保存到它：

```
w = new StreamWriter(_outputDir + "\\" + averagesListTextFileDirectory + "\\" + averagesListTextFile + ".txt", false, Encoding.ASCII);
w.WriteLine("DANNY VIDEO META DATA\r\nFORMAT VERSION:1.00\r\nSOURCE: " + "<" + averagesListTextFile + ">" + "\r\nDATA: ");

for (int i = 0; i < averages.Count; i++)
{
    w.WriteLine(averages[i]);
}
w.WriteLine("DATA");
w.Close(); 
```

但是现在我想将每个索引中的 List 中的值保存到文件中，该值具有另一个值数组。喜欢：

> [0] 123 33 44 55 66...
> [1] 33 44 565 66...

在每个索引中有 256 个值。

我希望文本文件在 DATA 之后看起来像这样：下一行将类似于：

> 帧号 1：123 33 44 55 66
> 帧号 2：33 44 565 66

所以每行将有 256 个值。

这种格式。

现在文件的格式是这样的：

> DANNY 视频元数据
> 格式版本：1.00
> 来源：
> 数据：
> 15.1199916409607
> 13.7612831147295
> 13.746730806327
> 13.2768227559145

现在我想这样做，当我从列表中读取值时，格式将是这样的：

> DANNY 视频元数据
> 格式版本：1.00
> 来源：
> 数据：
> 
> 帧号 1：123 33 44 55 66
> 帧号 2：33 44 565 66

问题是我如何读取每个索引包含 256 个值的列表以及如何将其写入文本文件？

这就是我尝试这样做的方式：

```
private void WriteHistograms() // For automatic mode only for now
        {
            HistogramsFile = new StreamWriter(_outputDir + "\\" + averagesListTextFileDirectory + "\\"  + "Histograms.txt", false, Encoding.ASCII);
            HistogramsFile.WriteLine("DANNY VIDEO META DATA\r\nFORMAT VERSION:1.00\r\nSOURCE: " + "<" + averagesListTextFile + ">" + "\r\nDATA: ");
            foreach (long[] array in Histograms)
            {
                foreach (long value in array)
                {
                  frameNumber++;
                  HistogramsFile.WriteLine("Frame Number " + frameNumber + " : " + value);                      

                }
            }
            HistogramsFile.WriteLine("DATA");
            HistogramsFile.Close(); 
```

结果是 25MB 的文件大小！这是文本文件格式的示例：

```
DANNY VIDEO META DATA
FORMAT VERSION:1.00
SOURCE: <MVI_2483.AVI_Automatic>
DATA: 
Frame Number 1 : 5977
Frame Number 2 : 40775
Frame Number 3 : 174395
Frame Number 4 : 305855
Frame Number 5 : 265805
Frame Number 6 : 212232
Frame Number 7 : 153333
Frame Number 8 : 99743
Frame Number 9 : 62334
Frame Number 10 : 41018
Frame Number 11 : 27381
Frame Number 12 : 21403
Frame Number 13 : 18324 
```

最后我看到帧号：

```
Frame Number 973822 : 666
Frame Number 973823 : 1118
Frame Number 973824 : 0 
```

现在确定为什么最后一个是 0 以及为什么 973824 帧，而实际上只有大约 3800 帧。

所以文件大小是逻辑25MB？我想要的格式是：

第 1 帧：33 44 55 66 77 88 ......（此行中有 256 个值） 第 2 帧：22 33 12 3 44 55 ......（此行中有 256 个值）

等等。

List Histograms 是一种在每个索引中都有 256 个索引的类型：

[0] 有：[1] 23 [2] 22 [3] 44 等等 [1] 有： [1] 12 [2] 13 [3] 21 等等

那么怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:54:19.897

您将需要在原始循环中嵌套一个 for 循环：

```
foreach(long[] array in averages)
{

     foreach(long value in array)
     {
          w.WriteLine(value);
     }
} 
```

这将允许您遍历您的数组列表。一般来说，对于大多数二维数据结构，您会遵循这种类型的循环。

**编辑：**如果要在单独的行上打印出每个数组，则需要按如下方式修改循环：

```
int frameNumber = 1;
foreach(long[] array in averages)
{
     w.WriteLine("Frame Number " + frameNumber + " : ");
     frameNumber++;

     foreach(long value in array)
     {
          w.Write(value).Write(' ');
     }
} 
```

这将产生以下内容：

```
Frame Number 1 : 10 15235 198 65439 24098...
Frame Number 2 : 10232 135 45619 895649 4598...
...
Frame Number N : 987 651 654 968498 21654... 
```

# vb.net - Slow Response After Clicking Button in VB.NET

> ID：12749758
> 
> 赞同：1
> 
> 时间：2012-10-05T15:49:08.357
> 
> 标签：vb.net, performance, event-handling, windows-mobile

I have created a windows form on a Windows Mobile 6.5 application. This screen has a username and password field and a login menu button. After clicking the button, it takes my click event for the login button 6 or 7 seconds to reach the first line of code (an alert). It takes that long to reach the breakpoint as well.

I've tried:

1.  changing the menu button to a login button
2.  using AddHandler in my formLoad event

...and have still not gotten a fast response. What else could be slowing this down?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:24:44.850

This delay seemed to happen the first time any button was clicked on the application. The only way I could get this delay to not occur was to force a dummy button click of the login button on load of the application. The delay causes the application to load a little bit longer, but at least that delay won't occur when the user clicks the button.

# c# - 为什么传递的对象为空？

> ID：12749759
> 
> 赞同：0
> 
> 时间：2012-10-05T15:49:09.260
> 
> 标签：c#, mvvm, viewmodel

我将对象 OptionSelector 传递给不同的 ViewModel。通过时它不为空。但在接收端它显示为空。有任何想法吗

* * *

我的视图包含在这个类中。

```
 public class CoreView : XboxApplicationPage, IRefAppNavigationItem
 {
/// <summary>
        /// Gets or sets navigation data for nested views.
        /// </summary>
        public object Data
        {
            get { return GetValue(DataProperty) as object; }
            set { SetValue(DataProperty, value); }
        }

        /// <summary>
        /// Identifies the Data dependency property.
       /// </summary>
       public static readonly DependencyProperty DataProperty =
         DependencyProperty.Register("Data",typeof(object),typeof(CoreView),new                    PropertyMetadata(null));

        /// <summary>
        /// Gets or sets the viewModel used in this page.
        /// </summary>   
        public CoreViewModel ViewModel
        {
          get 
          { 
              return (CoreViewModel)GetValue(ViewModelProperty); 
          }
          set { SetValue(ViewModelProperty, value); }
        }

         /// <summary>
        /// Sets the View.DataContext to the View.ViewModel. 
        /// </summary>
        private void SetViewModel()
        {
            if (ViewModel != null)
            {
                try
                {
                    if (this.Data != null)
                    {
                        ViewModel.Data = this.Data;
                    }
                    else
                    {     
                        ViewModel.Data = this.Tag;
                    }

                    SetDataContext();
                }
                catch(Exception e)
                {
                    Logger.Log("SetViewModel() error :" + e.StackTrace);
                }
            }
        }
        /// <summary>
        /// Sets the DataContext to the ViewModel. 
        /// Override when additional actions might be required after setting the DataContext. 
        /// </summary>
        protected virtual void SetDataContext()
        {
            this.DataContext = ViewModel;
        }
        /// <summary>
        /// Handles on NavigateTo events.
        /// </summary>
        /// <param name="e">Event args.</param>
        /// <remarks>This method is used to get the post navigation data and integrate into CoreView.</remarks>
        protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
        {
            if (DesignerProperties.IsInDesignTool)
            {
                return;
            }

            try
            {
                if (this.currentPageCulture != AmebaTV_XBOXApplication.Common.Resources.Localization.CurrentCulture)
                {
                    UpdateLocalizedStrings(this);
                }

                Microsoft.Xbox.Controls.Localization.CultureChanged += Localization_CultureChanged;

                var postNavigationState = IoC.Get<INavigationService>().GetPostNavigationData(NavigationContext);
                if (postNavigationState != null)
                {
                    this.Data = postNavigationState;
                }

                this.ViewModel.OnNavigatedTo();

                if (legendService != null)
                {
                    legendService.IsNavigateBackEnabled = true;
                }
                base.OnNavigatedTo(e);
            }
            catch (Exception ex)
            {
                Logger.Log("OnNavigatedTo : "+ex.Message);
            }

        }

 }

    /// <summary>
    /// Base class for all ViewModels.
    /// </summary>
    public class CoreViewModel : ViewModelBase
    {
         /// <summary>
        /// Field for Data.
        /// </summary>
        private object data;

       /// <summary>
       /// To be used with navigation to populate view models with initial content.
       /// </summary>
       public virtual void OnDataSet()
       {
       }

        /// <summary>
        /// Gets or sets ViewModel data. 
        /// </summary>
        public object Data
        {
            get { return this.data; }
            set
            {
                this.data = value;
                RaisePropertyChanged("Data");
                OnDataSet();
            }
        }
} 
```

* * *

OptionSelectorData 对象

```
 /// <summary>
    /// Contains data for the options selector view.
    /// </summary>
    public class OptionSelectorData
    {
        /// <summary>
        /// Gets or sets the list of options.
        /// </summary>
        public IList<string> Options { get; set; }

        /// <summary>
        /// Gets or sets the option title.
        /// </summary>
        public string Title { get; set; }

        /// <summary>
        /// Gets or sets the callback that will be invoked when an option is selected
        /// </summary>
        public Action<string> NotificationCallback { get; set; }
    }
} 
```

* * *

触发导航的命令

```
 public class MoreOverflowViewModel : CoreViewModel
 {

        /// <summary>
        /// Navigate to Property filter page
        /// </summary>
        public ICommand gotoViewPagebyCriteria
        {
            get
            {
                return new RelayCommand(() =>
                {
                    OptionSelectorData option = new OptionSelectorData 
                    {
                        Options = filterOptions, Title = 
                        Localization.GetByLocalizationKey("OptionTitleFilter"), 
                        NotificationCallback = OnFilterOptionsCallback 
                    };

                    Messenger.Default.Send(new NavigateToMessage(new 
                    Uri(PageListings.ViewPageByCriteria, UriKind.Relative), option)); 
                });
            }
        }
    } 
```

* * *

Viewmodel 接收数据，OnDataSet 检查对象并设置属性

```
public class ViewByCriteriaViewModel : CoreViewModel
    {
          /// <summary>
        /// ondataset
        /// </summary>
        public override void OnDataSet()
        {
            option = this.Data as OptionSelectorData;
            if (option != null)
            {
                OptionTitle = option.Title;
                itemsSource = option.Options;
            }
            else
            {
                Logger.Log("NULL Option Data");
            }
        }

} 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:54:52.643

试试这个。我认为这`this.Data`并没有得到您认为的对象。如果是其他类型，则`as`返回 null。

```
public override void OnDataSet()
{
    Logger.Log("this.Data = " + (this.Data == null ? "null" : this.Data.GetType().Name));

    option = this.Data as OptionSelectorData;
    if (option != null)
    {
        OptionTitle = option.Title;
        itemsSource = option.Options;
    }
    else
    {
        Logger.Log("NULL Option Data");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:23:04.913

似乎我有一个默认的 OnNavigatedTo() 覆盖了基类中的方法。问题解决了。

# c# - 将文本字段分隔为新行

> ID：12749760
> 
> 赞同：0
> 
> 时间：2012-10-05T15:49:10.680
> 
> 标签：c#, mysql

我正在对远程 MySql 服务器运行查询。它基本上包括一个半结构化的字段（文本字段）。每个值都在一个新行上：

```
uVal = 'Marvin'
uConfigPath = .F. 
```

等等等等

我希望能够查询这些值并在我返回的适配器中为每个项目名称添加一个新列，即：`uVal`将作为列添加`uConfigPath`，但我失败得很厉害。查询运行良好，可以选择我想要的行，但我无法弄清楚。

# css - 达到 ui:repeat 的最后一项时如何有条件地设置样式类？

> ID：12749761
> 
> 赞同：9
> 
> 时间：2012-10-05T15:49:15.127
> 
> 标签：css, jsf-2

如果它是我重复的最后一个，我想在一个 div 上上课。

我现在有了：

```
<ui:repeat value="#{myCollection}" var="item"  varStatus="status">
<div class="last">#{item.text}</div>
</ui:repeat> 
```

但我希望在最后一个 div 上最后一堂课......

```
#{status.last} 
```

是真的，如果它是最后一个 div。但是我怎样才能让课程进入 div 呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T15:50:33.627

**解决方案 1 如果您可能无法与 IE8 兼容：**

不要在 JSF 中这样做，这会破坏使用 CSS 将样式与数据隔离开来的目的。

您可以在 CSS 文件中执行此操作：

```
.normalClass:last-child {

} 
```

**解决方案 2：**

```
<ui:repeat value="#{myCollection}" var="item"  varStatus="status">
<div class="#{status.last?'last':''}">#{item.text}</div>
</ui:repeat> 
```

# google-analytics - Google Analytics：如何将事件与单个会话相关联

> ID：12749767
> 
> 赞同：0
> 
> 时间：2012-10-05T15:49:47.077
> 
> 标签：google-analytics, analytics

我有一个变量正在我的页面上加载，然后通过事件跟踪 api 报告回 GA。有没有办法让这个“事件”与单个会话的流程相关联？

例如：如果我有一个报告为“合格”的变量，那么我可以将此事件与会话和页面流相关联吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T21:14:28.557

是的，您可以创建高级细分。这是一种根据特定标准过滤会话（访问）的方法。在这种情况下，您的标准将是“包括：事件标签 = '您的事件标签的名称'”。

请注意，虽然单独报告数据是违反 GA 的使用条款的，即不允许创建允许您识别每个单独会话的事件标签。

# java - Jquery $.get 调用 servlet 不返回任何值

> ID：12749775
> 
> 赞同：0
> 
> 时间：2012-10-05T15:50:22.723
> 
> 标签：java, jquery, http, servlets

我正在尝试使用 jquery 将信息发送到 servlet 并从 servlet 接收响应。我知道我的问题不在于 servlet，因为当我粘贴 url

```
http://localhost:8080/WebPaymentSolution?secureToken=abcd1234569780jfhgutinjhuyikfj746534&user=Conner 
```

我在浏览器中得到了正确的响应。这是我正在使用的完整 jquery 代码。

```
$.get(
"http://localhost:8080/WebPaymentSolution",
{ secureToken : 'abcd1234569780jfhgutinjhuyikfj746534', user : 'Conner' },
function( data ) {
$( '#hss_iframe' ).html( data );
}
); 
```

我目前没有从 servlet 得到响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:09:22.533

我实际上已经解决了这个问题，但它只有在您可以控制 servlet（服务器端解决方案）时才有效。我设置了 servlet 返回的标头响应，以允许来自任何来源的访问控制。它现在工作得很好。这是我添加的使它工作的代码行。

```
response.setHeader("Access-Control-Allow-Origin", "*"); 
```

我知道这并不能回答您如何从 jQuery 中执行此操作的问题，但这对我来说是最好的解决方案，所以我将使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:57:06.197

试试看：

`$.ajax({ url: url, data: data, type: 'get' success: function(data){alert(data)}, dataType: dataType });`

确保您使用的是get而不是post

如果请求发生了什么，请查看萤火虫。如果您在 Firefox 中获得“永久移动”，则您正在尝试从脚本加载的位置向另一个域调用 ajax 请求

如果是这样，谷歌：Cross-Site-Scripting => XSS

# mercurial - 反复无常的存储库损坏

> ID：12749783
> 
> 赞同：-1
> 
> 时间：2012-10-05T15:51:11.677
> 
> 标签：mercurial, repository, corruption, recurring

我的 mercurial 每天都会收到存储库损坏。每次都说：

```
abort: integrity check failed on data/*classified*:16! 
```

我运行了 hg verify，它说：

```
*classified* files, *classified* changesets, *classified* total revisions
16 integrity errors encountered!
(first damaged changeset appears to be 9259) 
```

编辑：上面假定的损坏原来是我在文件中所做的一些更改，但实际上它仍然不时损坏，所以当我拉它时说存储库已损坏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:34:58.373

发现了问题。我正在运行的脚本正在修改 .hg 文件。

# java - 映射一个 java.util.Map 键为 Integer 并排序

> ID：12749784
> 
> 赞同：0
> 
> 时间：2012-10-05T15:51:13.223
> 
> 标签：java, hibernate

继续[这一点](https://stackoverflow.com/questions/12676842/how-to-order-objects-in-hibernate-and-or-distributed-enviroment)，我决定采取一种方法来制作一个不同的实体并建立一个 OneToOne 关系（我希望这没问题）。打赌让我解释一下我一直在做什么：

我有一个具有以下相关字段的 Juez（法官）实体：

```
@Entity
@Table(name = "jueces")
public class Juez implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.TABLE)
    @Column(name = "id")
    private Integer id;

    @Version
    @Column(name = "opt_lock")
    private Integer version;

    @Basic
    @Column(name = "nombres")
    private String nombres;

    // Getters, setters, other properties, etc.

} 
```

我想要另一个名为 RolDeJueces（法官卷）的实体来保存`java.util.Map<Integer, Juez>`我希望对键进行排序（1,2,3...）并映射到法官的一个实体，以便我可以进行一些计算。这是我到目前为止所拥有的：

```
@Entity
@Table(name = "rol_jueces")
public class RolDeJueces {

     @Id
     private Integer id;

     @Version
     @Column(name = "opt_lock")
     Integer version;

     @OneToMany //Is this ok?
     @MapKeyColumn(name = "orden_juez", updatable = true)
     private Map<Integer, Juez> rol;

     // Getters, setters, other properties, etc.

} 
```

如何对地图键进行排序并保留对所有评委的引用，但只有一次（例如@OneToOne）？

此外，我必须能够重新排序我的评委并使更改持久化，例如

```
rolDeJueces.getRol().clear(); // Delete current order
int order = 0;
// Add judges according to new order to the roll
for(Juez juez : getNewOrder()){
    RolDeJueces.getRol().put(++order, juez);
}

// save my new roll and stuff... 
```

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:27:58.403

好的，我认为我不需要用于插入订单的地图，也不需要我想要的东西。

这是实现：

```
 @Id
 @GeneratedValue(strategy = GenerationType.TABLE)
 private Integer id;

 @Version
 @Column(name = "opt_lock")
 private Integer version;

 @OneToMany(orphanRemoval = false)
 @OrderColumn(name = "order_jueces")
 private List<Juez> rol; 
```

@OrderColumn 将在用于关系的表中生成一个额外的列。

# android - 启动活动时出现 NullpointerException

> ID：12749787
> 
> 赞同：0
> 
> 时间：2012-10-05T15:51:28.200
> 
> 标签：android, arraylist, logcat

我有一个执行此操作的数组列表：

```
 ArrayList<Integer> id = new ArrayList<Integer>(); 
     for (int i = 0; i <= 20; i++) {
     id.add(getResources().getIdentifier("q"+i, "raw", getPackageName()));} 
```

这种方法在稍作改动之前效果很好，但现在已经强制关闭了！我得到了这个logcat：

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to start activity ComponentInfo{yaAli.package313.hossein110/yaAli.package313.hossein110.know}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java)at android.app.ActivityThread.access$600(ActivityThread.java)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java)
at android.os.Handler.dispatchMessage(Handler.java)
at android.os.Looper.loop(Looper.java)
at android.app.ActivityThread.main(ActivityThread.java)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at yaAli.package313.hossein110.know.onCreate(know.java:33)
at android.app.Activity.performCreate(Activity.java)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java)
... 12 more 
```

这是我的 OnCreate()：

```
@Override
protected void onCreate(Bundle bundle) {
    super.onCreate(bundle);
    setContentView(R.layout.basetxt);        
    SharedPreferences   settings=PreferenceManager.getDefaultSharedPreferences(getBaseContext());
    ln=settings.getString("LASTREADln", null);
    if(ln.equals("-1")){ln="0";}
    if(ln!=null){
    final ScrollView s1=(ScrollView) findViewById(R.id.sV1);
    s1.post(new Runnable() {@Override
    public void run() {s1.scrollTo(0, Integer.valueOf(ln));} });}

    final MediaPlayer mp1=MediaPlayer.create(getBaseContext(), R.raw.arza);  

    String pos = getIntent().getStringExtra("key");
    String arr = getIntent().getStringExtra("list");

    TextView tvfa = (TextView)findViewById(R.id.TEXT313);

    String fontPath = "fonts/font1.ttf";
    String fontPath1 = "fonts/font2.ttf";

    Typeface tf = Typeface.createFromAsset(getAssets(), fontPath);
    Typeface tf1 = Typeface.createFromAsset(getAssets(), fontPath1);

    SharedPreferences sharedpreferences =    PreferenceManager.getDefaultSharedPreferences(getBaseContext());

    tvfa.getRootView().setKeepScreenOn(sharedpreferences.getBoolean("scrnon", false));
    String sizefa=   sharedpreferences.getString("fontsizefa",null);
    String colorfa=   sharedpreferences.getString("fontcolorfa",null);        
    boolean style=   sharedpreferences.getBoolean("appfont", false);
    boolean music=   sharedpreferences.getBoolean("musictype", false);
    boolean curr=   sharedpreferences.getBoolean("currputfont", false);

String t = read(file(pos,arr,null)); {

if (curr){tvfa.setText(PersianReshape.reshape(t));}else{tvfa.setText(t);} // Txt 
tvfa.setTextSize(1, Float.valueOf(sizefa).floatValue());                    // Size
tvfa.setTextColor(Color.parseColor(colorfa));                               // Color
if (style) { tvfa.setTypeface(tf1); }  else {tvfa.setTypeface(tf);}         // Type
if (music) { mp1.start(); } else { mp1.stop(); }  }}                          // Play
//---------------------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:12:23.653

Java 开发的最佳实践是让文字字符串执行 .equals 调用。所以而不是：

```
var.equals("string") 
```

你做：

```
"string".equals(var) 
```

这保证了在进行字符串比较时永远不会出现空指针异常。

Also, it looks like you are storing numeric values as strings. Any particular reason you aren't storing them as ints?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T16:09:37.987

它可能在这里

`ln=settings.getString("LASTREADln", null);`

这应该是

`ln=settings.getString("LASTREADln", "");`

因为`null`如果该键不存在或不包含任何内容，则设置为您的默认值，因此如果它不包含任何内容，您应该将其设置为“”，并且对于您的字符串比较，您应该查找`!ln.contentsEquals("")`而不是检查它是否为空

从首选项文件中获得的所有字符串也是如此。将默认值设置为`""`而不是`null`

# android - android 4.0 或更高版本的应用程序崩溃

> ID：12749790
> 
> 赞同：5
> 
> 时间：2012-10-05T15:51:36.077
> 
> 标签：android, android-ndk, java-native-interface, native-code

我正在开发一个应用程序，我将在其中使用 android NDK 和 JNI。每当我在任何 android 4.0 或更高版本上运行我的应用程序时...我的应用程序都会崩溃并出现以下错误...

```
A/libc(18556): Fatal signal 11 (SIGSEGV) at 0xdeadbaad (code=1)
D/libEGL(18606): loaded /system/lib/egl/libGLES_android.so
D/libEGL(18606): loaded /system/lib/egl/libEGL_adreno200.so
D/libEGL(18606): loaded /system/lib/egl/libGLESv1_CM_adreno200.so
D/libEGL(18606): loaded /system/lib/egl/libGLESv2_adreno200.so
I/Adreno200-EGLSUB(18606): <ConfigWindowMatch:2078>: Format RGBA_8888.
D/OpenGLRenderer(18606): Enabling debug mode 0 
```

主要问题是`Fatal signal 11 (SIGSEGV) at 0xdeadbaad(code=1)`

如果有人知道这...然后告诉我原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T20:23:34.037

最初，分段错误，特别是 0xdeadbaad，意味着内存损坏或类似情况，但我最近发现，对于 NDK，这也是断言的默认行为：断言失败时它发送 SIGSEGV，而不是 SIGTRAP，并且将内存指针设置为此十六进制字符串。

您应该检查您的代码是否正在调用断言，或者，如果您使用的是第三方软件，请检查您是否将正确的值传递给每个调用。检查这一点的一种快速方法是构建您的库，并将 NDEBUG 设置为 1（默认情况下，如果您在 Application.mk 中设置 APP_OPTIM := release）并检查您是否仍然遇到完全相同的问题。

希望这可以帮助。

# ios - 使用带有部分卷曲的模态转场更改 MKMapType

> ID：12749791
> 
> 赞同：0
> 
> 时间：2012-10-05T15:51:41.830
> 
> 标签：ios, mkmapview, modalviewcontroller, uistoryboardsegue

我正在编写一个显示地图视图的应用程序。现在我想为用户提供将 MKMapType 从标准更改为混合的选项。

为了做到这一点，我创建了一个到另一个视图控制器的 segue，其中包含一个用于设置 Map Type 的开关。过渡是模态的，使用部分卷曲。为了访问开关的值，我在 AppDelegate 中引入了一个称为 fotoMode 的 BOOL。如果此变量设置为 YES（并且如果开关设置为 ON），那么我想重新绘制地图。

```
- (IBAction) FotoModusSwitchChanged:(UISwitch *)sender 
{
 AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];    
if(sender.isOn)
 {
    appDelegate.fotoMode=YES;
 }
 else 
 {
    appDelegate.fotoMode=NO;
 }
} 
```

我在地图视图的视图控制器的 VieWillAppear、ViewDidAppear、ViewDidLoad、ViewWillLayoutSubviews 中包含了以下代码行，但它不起作用：

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];    
if (appDelegate.fotoMode) {
    [self.MapOutlet setMapType:MKMapTypeHybrid];
}
else
{
    [self.MapOutlet setMapType:MKMapTypeStandard];
} 
```

知道我做错了什么吗？谢谢。

PS：手动将 MKMapType 设置为 Hybrid 或 Standard 工作...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:59:03.260

您的代码对我来说似乎是正确的，但我认为您在声明“fotoMode”时遇到了问题。

确保在您的 Appdelegate.h 文件下定义您的 BOOL

@property(nonatomic,assign) BOOL fotoMode;

如果您没有正确声明您的 BOOL，那么您将无法设置并获得正确的值。

希望有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-23T06:46:10.190

关闭部分卷曲时不会调用 ViewWill/DidAppear（因为旧视图从未完全消失）。关闭设置页面时使用委托调用。

# ruby - 在 Curb Gem 上捆绑安装失败 - Mac OS X 10.8.2

> ID：12749793
> 
> 赞同：2
> 
> 时间：2012-10-05T15:51:47.323
> 
> 标签：ruby, gem, bundler, osx-mountain-lion, curb

当我尝试运行时，`bundle install`这是我遇到的问题：

```
Installing curb (0.8.1) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /Users/dennismonsewicz/.rvm/rubies/ruby-1.9.3-p125/bin/ruby extconf.rb 
checking for curl-config... yes
checking for curlinfo_redirect_time... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/dennismonsewicz/.rvm/rubies/ruby-1.9.3-p125/bin/ruby
    --with-curl-dir
    --without-curl-dir
    --with-curl-include
    --without-curl-include=${curl-dir}/include
    --with-curl-lib
    --without-curl-lib=${curl-dir}/lib
/Users/dennismonsewicz/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': The compiler failed to generate an executable file. (RuntimeError)
You have to install development tools first.
    from /Users/dennismonsewicz/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:491:in `block in try_compile'
    from /Users/dennismonsewicz/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:443:in `with_werror'
    from /Users/dennismonsewicz/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:491:in `try_compile'
    from extconf.rb:52:in `block in have_constant'
    from /Users/dennismonsewicz/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:790:in `block in checking_for'
    from /Users/dennismonsewicz/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:284:in `block (2 levels) in postpone'
    from /Users/dennismonsewicz/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /Users/dennismonsewicz/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:284:in `block in postpone'
    from /Users/dennismonsewicz/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /Users/dennismonsewicz/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:280:in `postpone'
    from /Users/dennismonsewicz/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:789:in `checking_for'
    from extconf.rb:44:in `have_constant'
    from extconf.rb:62:in `<main>' 
```

我正在`ruby 1.9.3p125`使用 RVM 运行并已重新安装 curl（本地），但仍然遇到相同的问题...我已经尝试了解决此问题的所有方法，但似乎无法解决问题。还有其他人遇到此问题并已成功解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T16:09:46.123

当您看到此消息时，您需要安装 XCode 命令行工具包：

```
You have to install development tools first. 
```

这些可从[开发人员下载站点](https://developer.apple.com/downloads/index.action)获得。

# delphi - Delphi 2010 如何实现 Hydra WPF 主机应用程序示例？

> ID：12749795
> 
> 赞同：1
> 
> 时间：2012-10-05T15:51:54.407
> 
> 标签：delphi, interop, delphi-2010, remobjects

继续我们的 Delphi 2010 胖客户端到多层迁移[（上一个问题）](https://stackoverflow.com/questions/10312731/consuming-c-sharp-wcf-service-from-delphi-2010-client-databinding-and-entity-fr)，我们正处于需要找到数据绑定解决方案的地步。我遇到了 RemObjects Hydra。问题是我似乎无法按照他们[的主机程序](http://wiki.remobjects.com/wiki/Hosting_a_Silverlight_plugin#Delphi_Host)和 [插件](http://wiki.remobjects.com/wiki/WPF_Visual_Plugins)教程进行操作， 我在 Visual Studio 中创建了一个 Hydra 插件项目，实现了所描述的界面并且构建良好。

```
[Guid("8F1B3EE3-CC69-4685-B141-FAF2F4FB57C4")]
public interface IGridPlugin : IHYCrossPlatformInterface
{
    string UserData { get; set; }
    int ID { get; set; }

} 
```

在插件中：

```
[Plugin(Name = "GridPlugin", Description = "This is the Grid plugin", UserData = "Data"), VisualPlugin]
public partial class GridPlugin : RemObjects.Hydra.WPF.VisualPlugin, IGridPlugin
{ 
```

在 Delphi 中，我创建了一个新的 Hydra 宿主项目，导入了界面，但是在他们提到的创建/加载事件的形式中：

```
procedure TMainForm.FormCreate(Sender: TObject);
begin
  ModuleManager.LoadModule('SilverlightPlugin.xap');
  ModuleManager.CreateVisualPlugin('SilverlightPlugin', fInstance, Panel1);
end; 
```

什么是 fInstance？此外，我的 WPF 插件项目中没有文件以 .xap 结尾，那么我应该将什么作为参数传递？

有没有人实现过 RemObjects Hydra，你是如何实现这一早期步骤的？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:59:37.913

这就是我最终让它工作的方式，您需要声明一个插件实例：

```
Private
  fInstance: IHYVisualPlugin;

// Then Call in the FormCreate event
procedure TMainForm.FormCreate(Sender: TObject);
begin
    ModuleManager.LoadModules('C:\Users\user.Name\Documents\Visual Studio 2010\Projects\DynamicEF4\Product.Delphi.WPF\BIN\RELEASE\Product.Delphi.WPF.dll');
   ModuleManager.CreateVisualPlugin('ViewerPlugin', fInstance, pnl1);
end;
// And then in the FormDestroy event
procedure TMainForm.FormDestroy(Sender: TObject);
begin
    ModuleManager.ReleaseInstance(fInstance);
end; 
```

我想我看错了例子，我看到的 .xap 与 silverlight 相关，而不是 wpf 或 windows 窗体所必需的。

# objective-c - 如何从其子级访问容器视图控制器中的工具栏？

> ID：12749801
> 
> 赞同：3
> 
> 时间：2012-10-05T15:52:33.003
> 
> 标签：objective-c, ios, ios5, uiviewcontroller, uistoryboard

我的应用程序中有以下视图控制器结构：

带有（不是导航栏）的**容器**视图控制器有一个嵌入的，这提供了额外的子视图控制器：`UIToolBar``UIPageViewController``UIPageViewController`

```
container view controller (toolBar) -> PageViewController -> ViewController 1,
                                                             ViewController 2 
```

我想根据呈现的子视图控制器 1 和 2 在容器视图控制器上的工具栏中添加和删除按钮 (BarButtonItems)。

1.  您如何建议子视图控制器 1 和 2 访问容器视图控制器中的工具栏以添加和删除按钮？

2.  容器视图控制器中的属性似乎`toolbarItems`始终为 0，即使其中有按钮。关于为什么会这样的任何想法？属性 <> 0是否`toolbarItems`仅适用于导航栏？

# 编辑

根据用户 DBD 的建议，我已将以下方法添加到`CompanyViewController`具有工具栏的视图控制器中，并且是拆分视图详细信息窗口中我的视图控制器的基类（我的所有详细视图控制器都继承自`CompanyViewController`）。这些详细视图控制器之一用作带有页面视图控制器和上述子视图控制器的内容视图控制器。

**公司视图控制器：**

```
- (void)addToolBarItems:(NSArray *)buttonArray
{
    NSMutableArray *items = [[self.toolbar items] mutableCopy];

    [buttonArray enumerateObjectsUsingBlock:^(UIBarButtonItem *barButtonItem, NSUInteger idx, BOOL *stop) {
        if (! [items containsObject:barButtonItem] ) [items insertObject:barButtonItem atIndex:0];
    }];
    [self.toolbar setItems:items animated:NO];
}

- (void)removeToolBarItems:(NSArray *)buttonArray;
{
    NSMutableArray *items = [[self.toolbar items] mutableCopy];

    [buttonArray enumerateObjectsUsingBlock:^(UIBarButtonItem *barButtonItem, NSUInteger idx, BOOL *stop) {
        if ( [items containsObject:barButtonItem] ) [items removeObjectAtIndex:idx];
    }];
    [self.toolbar setItems:items animated:NO];
} 
```

这就是我尝试`CompanyViewController`从我的**子**控制器访问的方式：

```
- (CompanyViewController*)parentViewControllerWithToolbar
{
    UIViewController *parentPageViewController = self.parentViewController;
    CompanyViewController *parentContentViewController = (CompanyViewController*)parentPageViewController.parentViewController;
    return (CompanyViewController*)parentContentViewController;
} 
```

但是，当尝试`addToolBarItems`从子视图控制器调用该方法时，我无法在 Xcodes 的自动完成中获取该方法：即使我导入了`#import "CompanyViewController.h"`.

关于我可能在这里遗漏的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T16:45:20.683

我建议不要直接访问工具栏。相反，我建议容器类具有公共方法，例如

```
- (void)addToolBarItem:(UIBarButtonItem *)button atIndex:(int)index;
- (void)removeToolBarItemAtIndex:(int)index; 
```

然后你的孩子所要做的就是得到父母，可能做一个类型转换并调用方法。

像这样封装您的 UI 更改无需在子类中使用可能重复的代码来修改工具栏，保护您的大部分代码免受 Apple 可能的 API 更改的影响，并允许您轻松决定将工具栏换成自定义工具栏将来控制而不引起波纹代码更改效果。

**编辑：**

我以为您使用的是容器视图控制器，而不是`UISplitViewController`. 我将重新陈述我的理解，以便您可以告诉我我是否弄错了。

您有一个`UISplitViewController`显示“主”和“详细”视图。您希望详细视图回调主视图并请求更改工具栏。

在详细视图控制器中，您需要主控，但调用“父级”只会为您提供`UISplitViewController`. 所以你必须访问拆分视图控制器并从那里获取主视图控制器。

```
MasterViewController *foo = [self.splitViewController.viewControllers objectAtIndex:0];
[foo removeToolBarItems:bar]; 
```

也就是说，去获取`UISplitViewController`我所属的那个（与调用父级相同），然后访问它拥有的视图控制器数组。获取数组中的第一项并指定为主视图控制器。从文档上`UISplitViewController`

> **viewControllers**
> 由接收者管理的视图控制器数组。
> 
> @property(nonatomic, copy) NSArray *viewControllers
> 
> 讨论
> 此属性中的数组必须恰好包含两个视图控制器。当视图控制器处于横向时，视图控制器在拆分视图界面中从左到右呈现。因此，索引 0 处的视图控制器显示在左侧，索引 1 处的视图控制器显示在界面的右侧

# android - 矩阵缩放如何工作？

> ID：12749802
> 
> 赞同：1
> 
> 时间：2012-10-05T15:52:36.700
> 
> 标签：android, matrix, native, scale

调用`Matrix.postScale( sx, sy, px, py );`矩阵时，矩阵被缩放并被平移（取决于给定的点 x、y）。这注定了这种方法可以用于放大图像，因为我可以很容易地聚焦一个特定的点。

android 文档描述了这样的方法：

> 对具有指定比例的矩阵进行后连接。M' = S(sx, sy, px, py) * M

乍一看这似乎很荒谬，因为 M 应该是一个 3x3 矩阵。挖掘我发现android使用4x4-Matrix进行计算（同时仅在其API上提供3x3）。由于[这段代码](http://androidxref.com/4.1.1/xref/frameworks/base/core/jni/android/graphics/Matrix.cpp)是用 C 编写的，我很难理解实际发生了什么。

我真正想知道的是：如何将这种缩放（带有焦点）应用于我可以在我的 Java 代码中访问的 3x3 矩阵？

# c++ - C++ 预处理器确保全局唯一字符串

> ID：12749809
> 
> 赞同：1
> 
> 时间：2012-10-05T15:53:09.680
> 
> 标签：c++, gcc, macros, c-preprocessor

我有一个宏函数，它带有一个名称，旨在从各种命名空间中调用。我想确保此名称在全球范围内是唯一的。定义看起来像这样：

```
#define DECLARE_NEW_MYVAR( Name ) static MyVar Name( #Name ) 
```

我希望这个静态变量被命名空间（这就是为什么我希望从各种命名空间调用它），但我还需要确保传递给 MyVar 的构造函数的字符串是全局唯一的。这是因为我要序列化这个值并且我需要能够正确地将它关联回来。

我尝试了一些没有成功的事情：

**强制它是唯一的：**根据一些信息在名称上附加一些东西来强制它是唯一的

*   使用`__COUNTER__`宏：我的目标编译器之一没有这个宏。此外，假设调用宏的顺序相同似乎很危险
*   使用`__FILE__`宏：它具有完整的文件路径，可以确保它是唯一的，但是如果从不同的地方或不同的机器编译，反序列化将不再起作用。

**检查它是否是唯一的：**将它留给调用者让它是全局唯一的，如果不是，让编译器抱怨

*   我正在寻找一种方法来从命名空间内声明全局命名空间中的某些内容，这样如果它们不使其唯一，我至少可以导致多重定义的符号。我想不出办法来做到这一点。

基本上我需要想出一个全局唯一的字符串来传递给 MyVar ，我可以相信它不会在不同的编译之间发生变化，最好不会在代码更改之间发生变化（只要特定调用没有改变）。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:32:00.923

您可以像这样删除项目目录的前缀`__FILE__`：

```
#include <cstring>
#include <iostream>

#define COMMON_PATH_PREFIX "/home/user/path/to/project/"

#define UNIQUE_IDENTIFIER() (__FILE__ + std::strlen(COMMON_PATH_PREFIX))

void someFunction(const char *identifier)
{
    std::cout << identifier << std::endl;
}

int main()
{
    someFunction(UNIQUE_IDENTIFIER());
} 
```

`COMMON_PATH_PREFIX`可以由您的`#define`构建系统生成。例如，如果您使用 CMake，您可以简单地使用`CMAKE_SOURCE_DIRECTORY`.

调用`std::strlen()`应该由编译器优化，因为字符串是常量并且在编译时是已知的。

当然，这仅在您只想为每个文件声明一个变量时才有效。您也可以添加`__LINE__`到标识符中，但是如果您更改代码，则标识符更有可能发生变化。

# java - 简单的 Android SUM 和乘法应用程序在 AVD 上崩溃

> ID：12749811
> 
> 赞同：0
> 
> 时间：2012-10-05T15:53:19.400
> 
> 标签：java, android, android-layout

我已经使用 Android 创建了一个简单的应用程序，但是当我单击任何 View 时，该应用程序崩溃。您能否帮助了解 MainActivity.java 的以下代码：

```
public class CalculatorMainActivity extends Activity implements OnClickListener{
int a3 =0, a1=0,a2 =0;
 Button b1,b2;
  EditText t1,t2;
 TextView v1;
 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_calculator_main);

     b1=(Button) findViewById(R.id.mul);
     b2=(Button) findViewById(R.id.sum);
     t1 = (EditText) findViewById(R.id.editText1);
     t2 = (EditText) findViewById(R.id.editText2);
     v1 = (TextView) findViewById(R.id.text1);

     b1.setOnClickListener(this);
     b2.setOnClickListener(this);
     t1.setOnClickListener(this);
     t2.setOnClickListener(this);
     v1.setOnClickListener(this); 
```

}

```
 @Override
 public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_calculator_main, menu);
    return true;
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

    String s1 = t1.getText().toString();

    a1 = Integer.parseInt(s1);

    String s2 = t2.getText().toString();
    a2 = Integer.parseInt(s2);

    if (v == b1)
    a3 = a1 + a2;
    v1.setText(a3.toString());  
    if (v == b2)
    a3 = a1 * a2; 
    v1.setText(a3.toString());

}
 } 
```

如果您可以对此错误提供一些解决方案，那将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:11:01.987

这里有几个问题。

1) nitpick 可能，但处理按钮单击的一种更简洁的方法是在 XML 中定义视图的 andriod:onClick 属性，并将其设置为等于带有签名 public void myClickHandler(View v) 的方法名称。在该方法中，您可以根据视图选择操作，但您不能在视图上使用 == 来执行此操作。相反，您需要像这样比较视图 ID

```
if(v.getId() == v1.getId()) 
```

2）正如 njzk2 指出的那样，在 if 块上使用（或不使用）{} 时要小心。现在，您仅在 if 语句之后有条件地执行该行。这可能不是你想要的。

3）请验证输入，这段代码现在非常脆弱（你试图在没有任何检查或错误处理的情况下将字符串解析为 int。这肯定会很快中断。

4）您不想在 Integer 对象上调用 toString() ，更不用说 int 原语了。正如我在评论中提到的，这甚至不应该编译，因为它没有意义——你不能在原语上调用任何实例方法。而是做 v1.setText(new String(a3)) 或 v1.setText(a3 + "")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:58:19.443

它在这里崩溃：

```
v1.setText(a3.toString()); 
```

因为您的 if 操作周围没有 {}，并且未定义 a3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:43:19.017

我还建议阅读有关将数字转换为字符串的内容。 [http://docs.oracle.com/javase/tutorial/java/data/converting.html](http://docs.oracle.com/javase/tutorial/java/data/converting.html)

# r - 部署 Rapache 和 Rook 的错误

> ID：12749824
> 
> 赞同：2
> 
> 时间：2012-10-05T15:53:45.763
> 
> 标签：r, rapache, r-rook-package

我正在尝试使用 R 和 Rook 创建一个 Web 应用程序。

我看到了这个例子[http://www.road2stat.com/cn/r/rook.html](http://www.road2stat.com/cn/r/rook.html)并且我已经能够在我的命令行中复制它（从 R 内部调用它）。但我希望多个用户能够同时连接到应用程序，所以我想像 Jeff 所说的那样部署它 - [http://jeffreyhorner.tumblr.com](http://jeffreyhorner.tumblr.com)

我已经能够复制 Rook 软件包附带的大多数示例，如 Jeff 在他的博客中所述。其中包括： summary.r rnorm RookTestApp

我现在遇到的问题是我无法使前一个示例工作（即-www.road2stat）每次我尝试将文件上传到它时都会给我一条错误消息。当我使用命令行时不会发生这种情况。

我的错误信息是这样的：

> 内部服务器错误 服务器遇到内部错误或配置错误，无法完成您的请求。

这是我部署应用程序的路径

```
<Location /test/Visbin>
SetHandler r-handler
RFileEval /usr/lib/R/library/Rook/exampleApps/visbin.R:Rook::Server$call(newapp)
</Location> 
```

这是我要复制的应用程序

```
newapp = function(env) {
req = Rook::Request$new(env)
res = Rook::Response$new()
res$write('Choose a Binary file to Train:\n')
res$write('<form method="POST" enctype="multipart/form-data">\n')
res$write('<input type="file" name="data">\n')
res$write('xdim:\n')
res$write('<form method="POST">\n')
res$write('<input type="text" name="xdim" value="12">\n')
res$write('ydim:\n')
res$write('<form method="POST">\n')
res$write('<input type="text" name="ydim" value="25">\n')
res$write('ncolors:\n')
res$write('<form method="POST">\n')
res$write('<input type="text" name="ncolors" value="8">\n')
res$write('<input type="submit" name="Go!">\n</form>\n<br>')

myNormalize = function (target) {
return((target - min(target))/(max(target) - min(target)))
}

if (!is.null(req$POST())) {
data = req$POST()[["data"]]
hash = digest(data$tempfile, algo = "md5", file = TRUE)
destFile = file(data$tempfile, "rb")
k = floor((file.info(data$tempfile)$size/16)) - 2
doneFile = readBin(con = destFile, what = "raw", n = 2 * 8 * k)
close(destFile)
tmpFile0 = rbind(doneFile[seq(1, (2 * 8 * k) - 1, 2)], doneFile[seq(2, (2 * 8 * k), 2)])
tmpFile1 = paste(tmpFile0[1, ], tmpFile0[2, ], sep = "")
initMat = matrix(strtoi(tmpFile1, 16L), ncol = 8, byrow = TRUE)
normMat = myNormalize(initMat)
trainedSOM = kohonen::som(normMat, grid = somgrid(xdim = req$POST()[["xdim"]], ydim = req$POST()[["ydim"]], "hexagonal"))
png(paste("/tmp/", hash, ".png", sep = ""))
plot(trainedSOM, type = "dist.neighbours", palette.name = rainbow, ncolors = as.numeric(req$POST()[["ncolors"]]), main = "")
dev.off()
res$write(paste("<img src='", s$full_url("pic"), "/", hash, ".png'", " />", sep = ""))
}
res$finish() 
```

}

这是我的命令行指令：

```
s = Rhttpd$new()
s$add(app = newapp, name = "visbin")
s$add(app = File$new("/tmp"), name = "pic")
s$start()
s$browse("visbin") 
```

任何人都可以请我指出正确的方向或指导我找到可以帮助我做到这一点的资源。

PS我使用的是fedora 15，并且安装了Rapache-1.2.0。

# charts - Telerik 报告上的图表：日期时间线图中的不稳定行为

> ID：12749835
> 
> 赞同：0
> 
> 时间：2012-10-05T15:54:29.523
> 
> 标签：charts, telerik, telerik-reporting

我正在尝试呈现 Telerik 报告图。该图最多可以有 5 个不同的系列，尽管大多数有 3 个。我有一个奇怪的问题，其中一条（或多条线）没有按预期执行并且行为不规律。当我检查对象时，数据似乎是正确的。

有任何想法吗？

![图表错误](../Images/52393a0a15ac5b2e3c9df7504098cd4f.png) ![图表错误](../Images/f2213eeaff6255cf3becc0927c07e681.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:11:14.653

事实证明，在通过 C# 输入点时需要对这些点进行排序。如果它们输入无序，那么您会得到上述行为。

# android - 我正在用 QCAR、JPCT-AE 制作一些应用程序

> ID：12749840
> 
> 赞同：1
> 
> 时间：2012-10-05T15:54:56.870
> 
> 标签：android, qcar-sdk

嗨，我正在用 QCAR 和 JPCT-AE 制作一些应用程序。有人可以看到我的源代码并给我建议吗？如果可以的话，我会把我的源代码发给你。我的电子邮件地址是 lyhdra99@gmail.com。

请帮帮我^^

* * *

第一的

1.  我将 modelViewMatrix(QCAR::Matrix44F) 从 JNI 发送到 JAVA ex) JNIEXPORT jfloatArray JNICALL Java_jp_may_com_VirtualButtonsRenderer_getNowMatrix(JNIEnv* env, jobject obj)
2.  像下面这样使用这个modelViewMatrix

* * *

```
public class VirtualButtonsRenderer implements GLSurfaceView.Renderer {

    public VirtualButtonsRenderer(Activity act) {
        Config.maxAnimationSubSequences = 999;
        // TODO Auto-generated constructor stub
        this.act = act;
        _Object3D = Loader.loadMD2(act.getResources().openRawResource(R.raw.tris), 1.0f);
        _Object3D.setName("MyTarget");
    }

    public native float[] getNowMatrix();

    public void onSurfaceCreated(GL10 gl, EGLConfig config) {

        initRendering();
        QCAR.onSurfaceCreated();
        world = new World();
        world.setAmbientLight(20, 20, 20);
        TextureManager tm = TextureManager.getInstance();
        com.threed.jpct.Texture Cover = new com.threed.jpct.Texture(BitmapFactory.decodeStream(act.getResources().openRawResource(R.raw.skin)));
        tm.addTexture("Cover", Cover);          
        _Object3D.setTexture("Cover");
        world.addObject(_Object3D);
        world.buildAllObjects();
        sun = new Light(world);
        sun.setIntensity(250, 250, 250);        
        Camera cam = world.getCamera();
        cam.moveCamera(Camera.CAMERA_MOVEOUT, 100);
        cam.lookAt(_Object3D.getTransformedCenter());           
        SimpleVector sv = new SimpleVector();
        sv.set(_Object3D.getTransformedCenter());
        sv.x -= 300;
        sv.z -= 0;
        sun.setPosition(sv);
        MemoryHelper.compact(); 

    }

    public void onDrawFrame(GL10 gl) {
        if (!mIsActive)
            return;
        if (renderFrame()) {
            Matrix NowMatrix = new Matrix();
            NowMatrix.fillDump(getNowMatrix());
            world.getCamera().setBack(NowMatrix);
            world.renderScene(fb);          
            world.draw(fb);     
            fb.display();
            return;
        } else {
            mIsTouch = false;
        }
    }

} 
```

* * *

在这里，我有问题。我认为 Object3D 可以像茶壶（QCAR 示例对象）一样在带有 modelViewMatrix 的 Marker 上移动。但它不能。

这是我的问题^^;;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-06T10:24:45.593

我想为您的应用程序提供帮助，请将您的本机 imagetarget.cpp 代码发送给我，

在此之前，我想你已经看过这个页面，请参考一次

[http://www.jpct.net/wiki/index.php/Integrating_JPCT-AE_with_Vuforia](http://www.jpct.net/wiki/index.php/Integrating_JPCT-AE_with_Vuforia)

其项目源代码 [https://github.com/sidneibjunior/vuforia-jpct](https://github.com/sidneibjunior/vuforia-jpct)

从 renderframe 获取你的 modelViewMatrix 并将其发送到 java ，就像这样

常量 QCAR::TrackableResult* 结果 = state.getTrackableResult(tIdx);

QCAR::Matrix44F modelViewMatrix = QCAR::Tool::convertPose2GLMatrix(result->getPose());

SampleUtils::rotatePoseMatrix(90.0f, 1.0f, 0, 0, &modelViewMatrix.data[0]);

//反转矩阵 QCAR::Matrix44F inverseMV = SampleMath::Matrix44FInverse(modelViewMatrix);

//转置倒置矩阵 QCAR::Matrix44F invTranspMV = SampleMath::Matrix44FTranspose(inverseMV);

将逆转置矩阵发送到 java 代码。它会正常工作......我希望:)

# jquery - 用jquery查找div底部的位置

> ID：12749844
> 
> 赞同：78
> 
> 时间：2012-10-05T15:55:05.543
> 
> 标签：jquery

我有一个 div 并想找到底部位置。我可以像这样找到 Div 的顶部位置，但是如何找到底部位置？

```
var top = $('#bottom').position().top;
return top; 
```

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2012-10-05T15:57:06.963

相对于父元素，将 outerheight 添加到顶部，得到底部：

```
var $el = $('#bottom');  //record the elem so you don't crawl the DOM everytime  
var bottom = $el.position().top + $el.outerHeight(true); // passing "true" will also include the top and bottom margin 
```

对于绝对定位的元素或相对于文档定位时，您将需要使用偏移量进行评估：

```
var bottom = $el.offset().top + $el.outerHeight(true); 
```

[正如trnelson](https://stackoverflow.com/users/638087/trnelson)所指出的，这在 100% 的时间里都不起作用。要将此方法用于定位元素，您还必须考虑偏移量。有关示例，请参见以下代码。

```
var bottom = $el.position().top + $el.offset().top + $el.outerHeight(true); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-05-19T05:23:12.657

编辑：这个解决方案现在也在原始答案中。

接受的答案并不完全正确。您不应该使用 position() 函数，因为它是相对于父级的。如果您正在进行全球定位（在大多数情况下？），您应该只添加偏移顶部和外部高度，如下所示：

```
var actualBottom = $(selector).offset().top + $(selector).outerHeight(true); 
```

文档[http://api.jquery.com/offset/](http://api.jquery.com/offset/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-05T15:57:34.830

```
var bottom = $('#bottom').position().top + $('#bottom').height(); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-05T16:00:09.157

到目前为止的答案将起作用..如果您只想使用没有填充、边框等的高度。

如果您想考虑填充、边框和边距，您应该使用`.outerHeight`.

```
var bottom = $('#bottom').position().top + $('#bottom').outerHeight(true); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T15:58:26.277

底部是[`top`](http://api.jquery.com/position)+ the [`outerHeight`](http://api.jquery.com/outerHeight)，**而不是[`height`](http://api.jquery.com/height)**，因为它不包括边距或填充。

```
var $bot,
    top,
    bottom;
$bot = $('#bottom');
top = $bot.position().top;
bottom = top + $bot.outerHeight(true); //true is necessary to include the margins 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-05T16:01:31.980

```
var top = ($('#bottom').position().top) + ($('#bottom').height()); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-21T17:35:42.047

这是 jquery 实际上使它比 DOM 已经提供的更复杂的实例之一。

```
let { top, bottom, height, width, //etc } = $('#bottom')[0].getBoundingClientRect();
return top; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-27T13:39:37.067

使用此脚本计算 div 的结尾

```
$('#bottom').offset().top +$('#bottom').height() 
```

# java - p:tabMenu 没有表格

> ID：12749850
> 
> 赞同：0
> 
> 时间：2012-10-05T15:55:19.630
> 
> 标签：java, jsf, jsf-2, primefaces

我有这个`p:tabMenu`：

```
<p:tabMenu id="tabs" activeIndex="0" >  
    <p:menuitem value="General" url="/DCProfileTabGeneral.jsf"/>  
    <p:menuitem value="Zones" url="/DCProfileTabZones.jsf"/>  
    <p:menuitem value="UPS" url="/DCProfileTabUPS.jsf"/>  
    <p:menuitem value="Storages" url="/DCProfileTabStorages.xhtml"/>  
    <p:menuitem value="Servers" url="/DCProfileTabServers.xhtml"/>  
    <p:menuitem value="Racks" url="/DCProfileTabRacks.xhtml"/>
    <p:menuitem value="Networks" url="/DCProfileTabNetworks.xhtml"/>  
    <p:menuitem value="ISPs" url="/DCProfileTabISPs.xhtml"/>                            
    <p:menuitem value="Generators" url="/DCProfileTabGenerators.xhtml" />  
    <p:menuitem value="HVACs" url="/DCProfileTabHVACs.xhtml"/>  
    <p:menuitem value="History" url="/DCProfileTabHistory.xhtml"/>

</p:tabMenu> 
```

我注意到在 Primefaces 网站[示例](http://www.primefaces.org/showcase-labs/ui/tabMenu.jsf)中没有`h:form`必须放置代码的地方。但是，当我测试代码时，会收到以下消息：

```
The form component needs to have a UIForm in it's ancestry. 
```

似乎没有`h:form`. 我想在没有表格的情况下运行它。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T03:49:36.217

正如 anon 所说，您可以通过将 JSF 上下文参数更改为`PRODUCTION`. 请注意：如果**不**将任何内容包装在表单中，您将无法向服务器提交任何内容。如果您不将其包含在表单中，任何将或可能最终向服务器生成请求的组件都会向您提供此日志消息。忽视后果自负。

# algorithm - 切一个长方形

> ID：12749852
> 
> 赞同：0
> 
> 时间：2012-10-05T15:55:25.170
> 
> 标签：algorithm, actionscript-3

我需要从接收其他矩形作为参数的函数中获取 AS3 矩形对象。结果与 Photoshop 中的切片工具非常相似。这很难解释，所以这是一张图片：

[![](../Images/b8ee9feacb7ff393393bcb172d342d63.png)](https://i.stack.imgur.com/emGDl.png)
[（来源：[free.fr](http://yvaing.free.fr/flash/squaresCut.png)）]

蓝色方块是作为参数给出的矩形，绿色方块是结果。给定的矩形可以重叠，如图 2 所示，或者超出框架。

我不寻找图形实现，而是寻找一种获得 Rectangle 对象的方法。

你知道有什么库可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:21:50.890

看起来像一个有趣的问题，所以我给了它一个裂缝。我的想法是通过以下方式暴力破解它：

1.  确定生成的矩形的角*可能*在哪些点。
2.  从此点列表中删除所有重复项。
3.  检查理论上可以绘制的所有矩形，其中矩形将在点列表中具有所有 4 个角。
4.  过滤掉所有无效的矩形（它与我们的原始矩形之一等相交）
5.  将所有有效矩形减少到所需的最小数量（如果有效矩形包含另一个有效矩形，则删除“子”。

它似乎有效（尽管我没有进行广泛的测试）。

这是一个[演示](http://strille.net/works/misc/rects/)。对不起调色板。我在挥舞它。

这是源代码（可能会优化很多）：

```
package 
{
    import flash.display.*;
    import flash.events.*;
    import flash.geom.*;
    import flash.text.TextField;
    import flash.text.TextFieldAutoSize;
    import flash.text.TextFormat;
    import flash.utils.getTimer;

    public class Main extends Sprite {

        private var m_colors : Array = [0xffaaaa, 0x77ff77, 0xaaaaff, 0xffff44, 0xff44ff, 0xaaffff, 0x444444, 0xffaa55, 0xaaff55, 0x55aaff, 0x55ffaa];
        private var m_roomRect : Rectangle;
        private var m_sourceRects : Vector.<Rectangle> = new Vector.<Rectangle>();
        private var m_currentDragRect : Rectangle;
        private var m_dragMousePoint : Point = new Point();
        private var m_outputTextField : TextField;

        public function Main() : void {
            m_roomRect = new Rectangle(40, 40, 400, 400);

            m_sourceRects.push(new Rectangle(60, 60, 60, 80));
            m_sourceRects.push(new Rectangle(130, 220, 70, 80));
            m_sourceRects.push(new Rectangle(160, 260, 100, 80));

            this.stage.addEventListener(MouseEvent.MOUSE_DOWN, onMouseEvent);
            this.stage.addEventListener(MouseEvent.MOUSE_MOVE, onMouseEvent);
            this.stage.addEventListener(MouseEvent.MOUSE_UP, onMouseEvent);

            var tf : TextField = new TextField();
            tf.defaultTextFormat = new TextFormat("_sans", 12);
            tf.text = "Click and drag blue rectangles to move them";
            tf.autoSize = TextFieldAutoSize.LEFT;
            tf.x = (m_roomRect.left + m_roomRect.right) / 2 - tf.width / 2;
            tf.y = m_roomRect.top - tf.height;
            this.stage.addChild(tf);

            m_outputTextField = new TextField();
            m_outputTextField.defaultTextFormat = tf.defaultTextFormat;
            m_outputTextField.width = m_roomRect.width;
            m_outputTextField.x = m_roomRect.x;
            m_outputTextField.y = m_roomRect.bottom + 5;
            this.stage.addChild(m_outputTextField);

            redraw();
        }

        private function onMouseEvent(event : MouseEvent):void {
            switch(event.type) {
                case MouseEvent.MOUSE_DOWN:
                    checkMouseDownOnRect();
                    break;
                case MouseEvent.MOUSE_MOVE:
                    checkMouseDrag();
                    break;
                case MouseEvent.MOUSE_UP:
                    m_currentDragRect = null;
                    break;
            }
        }

        private function checkMouseDownOnRect():void {
            m_currentDragRect = null;
            m_dragMousePoint = new Point(this.stage.mouseX, this.stage.mouseY);

            for each(var sourceRect : Rectangle in m_sourceRects) {
                if (sourceRect.containsPoint(m_dragMousePoint)) {
                    m_currentDragRect = sourceRect;
                    break;
                }
            }
        }

        private function checkMouseDrag():void {
            if (m_currentDragRect != null) {
                m_currentDragRect.x += this.stage.mouseX - m_dragMousePoint.x;
                m_currentDragRect.y += this.stage.mouseY - m_dragMousePoint.y;
                m_dragMousePoint.x = this.stage.mouseX;
                m_dragMousePoint.y = this.stage.mouseY;
                redraw();
            }
        }

        private function redraw():void {
            // calculate data
            var time : int = getTimer();
            var data : CalculationData = calculate();
            var calcTime : int = getTimer() - time;

            // draw room bounds
            this.graphics.clear();
            this.graphics.lineStyle(3, 0x0);
            this.graphics.drawRect(m_roomRect.x, m_roomRect.y, m_roomRect.width, m_roomRect.height);

            // draw generated rectangles
            for (var i : int = 0; i < data.outputRects.length; i++) {
                var color : int = m_colors[i % m_colors.length];
                var rect : Rectangle = data.outputRects[i];
                this.graphics.lineStyle(2, color, 0.5);
                this.graphics.beginFill(color, 0.5);
                this.graphics.drawRect(rect.x, rect.y, rect.width, rect.height);
                this.graphics.endFill();
            }

            // draw horisontal lines (a line that crosses each red point) for debug purposes
            for each (var lineY : int in data.lines) {
                this.graphics.lineStyle(1, 0, 0.2);
                this.graphics.moveTo(m_roomRect.x, lineY);
                this.graphics.lineTo(m_roomRect.x + m_roomRect.width, lineY);
                this.graphics.endFill();
            }

            // the original rectangles
            for each (var sourceRect : Rectangle in m_sourceRects) {
                this.graphics.lineStyle(2, 0x0);
                this.graphics.beginFill(0x0000aa, 0.5);
                this.graphics.drawRect(sourceRect.x, sourceRect.y, sourceRect.width, sourceRect.height);
                this.graphics.endFill();
            }

            // draw all points that was used to generate the output rectangles for debug purposes
            for each (var p : Point in data.points) {
                this.graphics.lineStyle(0, 0, 0);
                this.graphics.beginFill(0xff0000, 1);
                this.graphics.drawCircle(p.x, p.y, 3);
                this.graphics.endFill();
            }

            m_outputTextField.text = "Rect count: " + data.outputRects.length + " (calculation time: " + calcTime + "ms)";
        }

        private function calculate(): CalculationData {
            // list of y coords for horisontal lines,
            // which are interesting when determining which rectangles to generate
            var lines : Vector.<int> = new Vector.<int>();

            // list of all points which are interesting
            // when determining where the corners of the generated rect could be
            var points : Vector.<Point> = new Vector.<Point>();

            // add the 4 corners of the room to interesting points
            points.push(new Point(m_roomRect.left, m_roomRect.top));
            points.push(new Point(m_roomRect.right, m_roomRect.top));
            points.push(new Point(m_roomRect.left, m_roomRect.bottom));
            points.push(new Point(m_roomRect.right, m_roomRect.bottom));

            for (var i:int = 0; i < m_sourceRects.length; i++) {
                var sourceRect : Rectangle = m_sourceRects[i];

                // source rect is completely outside of the room, we shoud ignore it
                if (!m_roomRect.containsRect(sourceRect) && !m_roomRect.intersects(sourceRect)) {
                    continue;
                }

                // push the y coord of the rect's top edge to the list of lines if it's not already been added
                if (lines.indexOf(sourceRect.y) == -1) {
                    lines.push(sourceRect.y);
                }

                // push the y coord of the rect's bottom edge to the list of lines if it's not already been added
                if (lines.indexOf(sourceRect.bottom) == -1) {
                    lines.push(sourceRect.bottom);
                }

                // add the 4 corners of the source rect to the list of interesting points
                addCornerPoints(points, sourceRect);

                // find the intersections between source rectangles and add those points
                for (var j:int = 0; j < m_sourceRects.length; j++) {
                    if (j != i) {
                        var intersect : Rectangle = m_sourceRects[i].intersection(m_sourceRects[j]);
                        if (intersect.width != 0 && intersect.height != 0) {
                            addCornerPoints(points, intersect);
                        }
                    }
                }
            }

            for (i = 0; i < lines.length; i++) {
                // add the points where the horisontal lines intersect with the room's left and right edges
                points.push(new Point(m_roomRect.x, lines[i]));
                points.push(new Point(m_roomRect.right, lines[i]));

                var lineRect : Rectangle = new Rectangle(m_roomRect.x, m_roomRect.y, 
                                                         m_roomRect.width, lines[i] - m_roomRect.y);

                // add all points where the horisontal lines intersect with the source rectangles
                for (a = 0; a < m_sourceRects.length;a++) {
                    intersect = m_sourceRects[a].intersection(lineRect);
                    if (intersect.width != 0 && intersect.height != 0) {
                        addCornerPoints(points, intersect);
                    }
                }
            }

            // clamp all points that are outside of the room to the room edges
            for (i = 0; i < points.length; i++) {
                points[i].x = Math.min(Math.max(m_roomRect.left, points[i].x), m_roomRect.right);
                points[i].y = Math.min(Math.max(m_roomRect.top, points[i].y), m_roomRect.bottom);
            }

            removeDuplicatePoints(points);

            var outputRects : Vector.<Rectangle> = new Vector.<Rectangle>();

            var pointsHash : Object = { };
            for (a = 0; a < points.length; a++) {
                pointsHash[points[a].x + "_" + points[a].y] = true;
            }

            for (var a:int = 0; a < points.length; a++) {
                for (var b:int = 0; b < points.length; b++) {
                    if (b != a && points[b].x > points[a].x && points[b].y == points[a].y) {
                        for (var c:int = 0; c < points.length; c++) {
                            // generate a rectangle that has its four corners in our points of interest
                            if (c != b && c != a && points[c].y > points[b].y && points[c].x == points[b].x) {
                                var r : Rectangle = new Rectangle(points[a].x, points[a].y, points[b].x - points[a].x, points[c].y - points[b].y);
                                // make sure the rect has the bottom left corner in one of our points
                                if (pointsHash[r.left+"_"+r.bottom]) {
                                    var containsOrIntersectsWithSource : Boolean = false;
                                    for (i = 0; i < m_sourceRects.length;i++) {
                                        if (r.containsRect(m_sourceRects[i]) || r.intersects(m_sourceRects[i])) {
                                            containsOrIntersectsWithSource = true;
                                            break;
                                        }
                                    }

                                    // we don't add any rectangles that either intersects with a source rect
                                    // or completely contains a source rect
                                    if (!containsOrIntersectsWithSource) {
                                        outputRects.push(r);
                                    }
                                }
                            }
                        }
                    }
                }
            }

            trace("outputRects before cleanup:", outputRects.length);
            combineOutputRects(outputRects)
            trace("outputRects after cleanup", outputRects.length);

            var data : CalculationData = new CalculationData();
            data.outputRects = outputRects;
            data.lines = lines;
            data.points = points;

            return data;
        }

        private function addCornerPoints(points : Vector.<Point>, rect : Rectangle) : void {
            points.push(new Point(rect.left, rect.top));
            points.push(new Point(rect.right, rect.top));
            points.push(new Point(rect.left, rect.bottom));
            points.push(new Point(rect.right, rect.bottom));
        }

        // removes all rectangle that are already contained in another rectangle
        private function combineOutputRects(outputRects : Vector.<Rectangle>):Boolean {
            for (var a : int = 0; a < outputRects.length; a++) {
                for (var b : int = 0; b < outputRects.length; b++) {
                    if (b != a) {
                        if (outputRects[a].containsRect(outputRects[b])) {
                            trace("\tremoved rect " + outputRects[b] + ", it was contained in " + outputRects[a]);
                            outputRects.splice(b, 1);
                            b--;
                            a = 0;
                        }
                    }
                }
            }
            return false;
        }

        private function removeDuplicatePoints(points : Vector.<Point>) : void {
            var usedPoints : Object = {};
            for (var i : int = 0; i < points.length; i++) {
                if (usedPoints[points[i].toString()]) {
                    points.splice(i, 1);
                    i--;
                } else {
                    usedPoints[points[i].toString()] = true;
                }
            }
        }
    }
}

import flash.geom.Point;
import flash.geom.Rectangle;

class CalculationData {
    public var outputRects : Vector.<Rectangle> = new Vector.<Rectangle>;
    public var lines : Vector.<int> = new Vector.<int>;
    public var points : Vector.<Point> = new Vector.<Point>;
} 
```

# sdk - 上传图片和文字到服务器 Lua/Corona SDK

> ID：12749854
> 
> 赞同：-3
> 
> 时间：2012-10-05T15:55:32.300
> 
> 标签：sdk, lua, coronasdk

我有一个关于使用 Corona Sdk 将文本和图像上传到服务器的问题。是否可以在 Corona 中实现这一点，如果可以，是否可以用手机拍照或从相册中选择图片，然后将其上传到服务器，并带有文本描述？请指导我正确的方向:)

先感谢您 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T16:15:02.893

是的，Corona SDK 为您提供了发出 HTTP POST 请求的方法（请参阅[Corona 文档：API > Libraries > network > request](http://docs.coronalabs.com/api/library/network/request.html)），它允许您使用 POST 请求将文本和图像上传到 Web 服务器。

虽然与将图像上传到 Twitter 有关，但 Vellum Interactive 的博客文章[使用 Corona SDK 将图像发布到 Twitter](http://velluminteractive.com/upload-images-to-twitter-from-corona-sdk/)可能会非常方便。即使你把关于 Twitter API 的所有内容都去掉了，它似乎也有大量的知识和代码可以应用到你的案例中。

对于您的后一个问题：使用[Corona SDK API 参考：media.show()](http://developer.coronalabs.com/reference/index/mediashow)您可以访问您正在寻找的特定于平台的实现照片库或相机。虽然没有现成的实现，因此您可能需要为大量黑客攻击做好准备。但是如果你准备好了，Corona SDK 参考是相当不错的。

# spring - Spring事务注解，休眠和持久化

> ID：12749857
> 
> 赞同：3
> 
> 时间：2012-10-05T15:55:38.587
> 
> 标签：spring, hibernate

我对 Spring`@Transactional`注释有误解并坚持下去。我正在使用带有 JPA 和 Hibernate 的 Spring 3.1。我认为持久化意味着将实体添加到持久化上下文中（但在提交或刷新之前不要执行任何查询），并且`@Transactional`注释意味着用事务包装方法。

但是，在这个简短的示例中，当执行指针到达persist 时，它会因异常而失败，因为名称不能为空（db 约束）。

```
import javax.persistence.EntityManager;

@PersistenceContext
private EntityManager entityManager;

@Transactional
public void test() {
    Brand brand = new Brand();
    entityManager.persist(brand);
    brand.setName("test");
} 
```

如果我交换`setName()`and `persist()`，一切正常。但是，我不明白为什么反过来不行，因为我认为任何查询都会在方法结束时构建和执行。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T18:32:32.090

在 JPA 中，一旦将对象传递给 persist()，它就会成为“托管”，作为成为托管 JPA 实现的一部分，必须为持久对象生成一个 id。

如果 id 生成基于自增（GenerationType.IDENTITY），则需要向 db 发出插入语句以获取和分配 key。当 id 生成基于序列/表时，id 由 JPA 实现管理的 id 池管理和分配，在这种情况下，不需要直接插入。

将对象传递给 persist() 并已成为托管对象，对它的任何更改都是持久字段，必须在事务的和处刷新到数据库。在您的情况下，如果 id 生成是 Identity，则必须在插入之后进行更新。如果 id 生成是其他方法，那么单个插入语句就足够了。如果事务回滚，则根本不应该将任何 SQL 发送到数据库。

这是[Batoo JPA](http://batoo.jp)中的实现。

希望这是有道理的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T16:03:26.733

由于事务注释，它在方法结束时**提交。**但是新记录是在持久化时创建的，并且可以抛出任何异常。

在方法结束之前它仍然可以回滚；我通常用回滚来注释异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:04:07.530

持久化执行“插入”查询。事务注释仅用于启动事务，如果发生异常则回滚事务。

# encryption - RSA 公钥格式

> ID：12749858
> 
> 赞同：160
> 
> 时间：2012-10-05T15:55:50.287
> 
> 标签：encryption, rsa, public-key-encryption

我在哪里可以找到有关 RSA 公钥格式的一些文档？

一个 RSA 公钥，格式为`OpenSSH`：

> SSH-RSA AAAAB3NzaC1yc2EAAAABJQAAAQB / nAmOjTmezNUDKYvEeIRf2YnwM9 / uUG1d0BYsc8 / tRtx + RGi7N2lUbp728MXGwdnL9od4cItzky / zVdLZE2cycOa18xBK9cOWmcKS0A8FYBxEQWJ / q9YVUgZbFKfYGaGQxsER + A0w / fX8ALuk78ktP31K69LcQgxIsl7rNzxsoOQKJ / CIxOGMMxczYTiEoLvQhapFQMs3FL96didKr / QbrfB1WT6s3838SEaXfgZvLef1YB2xmfhbT9OXFE3FXvh2UPBfN + ffE7iiayQf / 2XR + 8j4N4bW30DiPtOQLGUrH1y5X / rpNZNlWW2 + jGIxqZtgWg7lTy3mXy5x836Sj / 6L

用于 Secure Shell 的相同公钥格式[（RFC 4716 - The Secure Shell (SSH) Public Key File Format）](https://www.rfc-editor.org/rfc/rfc4716)：

```
---- BEGIN SSH2 PUBLIC KEY ----
AAAAB3NzaC1yc2EAAAABJQAAAQB/nAmOjTmezNUDKYvEeIRf2YnwM9/uUG1d0BYs
c8/tRtx+RGi7N2lUbp728MXGwdnL9od4cItzky/zVdLZE2cycOa18xBK9cOWmcKS
0A8FYBxEQWJ/q9YVUgZbFKfYGaGQxsER+A0w/fX8ALuk78ktP31K69LcQgxIsl7r
NzxsoOQKJ/CIxOGMMxczYTiEoLvQhapFQMs3FL96didKr/QbrfB1WT6s3838SEaX
fgZvLef1YB2xmfhbT9OXFE3FXvh2UPBfN+ffE7iiayQf/2XR+8j4N4bW30DiPtOQ
LGUrH1y5X/rpNZNlWW2+jGIxqZtgWg7lTy3mXy5x836Sj/6L
---- END SSH2 PUBLIC KEY ---- 
```

与 RSA 公钥格式相同的公钥（注意*五个* **`-`**，并且没有空格）：

```
-----BEGIN RSA PUBLIC KEY-----
MIIBCgKCAQEA+xGZ/wcz9ugFpP07Nspo6U17l0YhFiFpxxU4pTk3Lifz9R3zsIsu
ERwta7+fWIfxOo208ett/jhskiVodSEt3QBGh4XBipyWopKwZ93HHaDVZAALi/2A
+xTBtWdEo7XGUujKDvC2/aZKukfjpOiUI8AhLAfjmlcD/UZ1QPh0mHsglRNCmpCw
mwSXA9VNmhz+PiB+Dml4WWnKW/VHo2ujTXxq7+efMU4H2fny3Se3KYOsFPFGZ1TN
QSYlFuShWrHPtiLmUdPoP6CV2mML1tk+l7DIIqXrQhLUKDACeM5roMx0kLhUWB8P
+0uj1CNlNN4JRZlC7xFfqiMbFRU9Z4N6YwIDAQAB
-----END RSA PUBLIC KEY----- 
```

base-64 编码数据的十六进制转储：

```
00 00 00 07 73 73 68 2d 72 73 61 00 00 00 01 25 00 00 01 00 7f 9c 09
8e 8d 39 9e cc d5 03 29 8b c4 78 84 5f d9 89 f0 33 df ee 50 6d 5d d0 
16 2c 73 cf ed 46 dc 7e 44 68 bb 37 69 54 6e 9e f6 f0 c5 c6 c1 d9 cb
f6 87 78 70 8b 73 93 2f f3 55 d2 d9 13 67 32 70 e6 b5 f3 10 4a f5 c3 
96 99 c2 92 d0 0f 05 60 1c 44 41 62 7f ab d6 15 52 06 5b 14 a7 d8 19 
a1 90 c6 c1 11 f8 0d 30 fd f5 fc 00 bb a4 ef c9 2d 3f 7d 4a eb d2 dc 
42 0c 48 b2 5e eb 37 3c 6c a0 e4 0a 27 f0 88 c4 e1 8c 33 17 33 61 38 
84 a0 bb d0 85 aa 45 40 cb 37 14 bf 7a 76 27 4a af f4 1b ad f0 75 59 
3e ac df cd fc 48 46 97 7e 06 6f 2d e7 f5 60 1d b1 99 f8 5b 4f d3 97 
14 4d c5 5e f8 76 50 f0 5f 37 e7 df 13 b8 a2 6b 24 1f ff 65 d1 fb c8 
f8 37 86 d6 df 40 e2 3e d3 90 2c 65 2b 1f 5c b9 5f fa e9 35 93 65 59 
6d be 8c 62 31 a9 9b 60 5a 0e e5 4f 2d e6 5f 2e 71 f3 7e 92 8f fe 8b 
```

我[读过有几种格式](http://www.cryptosys.net/pki/rsakeyformats.html)：

> 关键数据可以以三种一般方式编码：
> 
> *   二进制 DER 编码格式。这有时称为 ASN.1 BER 编码
> *   PEM 或 base64 格式。这是与 DER 编码文件相同的数据，但它以 base64 编码，带有额外的页眉和页脚行
> *   XML 格式。

如果是[ASN.1](http://en.wikipedia.org/wiki/Abstract_Syntax_Notation_One)，则十六进制肯定看起来不像。

RSA 公钥的格式是什么？

* * *

## 也可以看看

*   [RSA 密钥格式](http://www.cryptosys.net/pki/rsakeyformats.html)
*   [抽象语法符号一](http://en.wikipedia.org/wiki/Abstract_Syntax_Notation_One)
*   [将 Base64 公钥转换为 XML 签名](http://tools.ailon.org/tools/XmlKey)
*   [解码 PEM 格式](https://lapo.it/asn1js/)

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-10-05T16:28:59.970

您不能只是将分隔符从`---- BEGIN SSH2 PUBLIC KEY ----`to更改为`-----BEGIN RSA PUBLIC KEY-----`并期望从一种格式转换为另一种格式就足够了（这就是您在示例中所做的）。

[This article](http://blog.oddbit.com/2011/05/08/converting-openssh-public-keys) has a good explanation about both formats.

What you get in an `RSA PUBLIC KEY` is closer to the content of a `PUBLIC KEY`, but you need to offset the start of your ASN.1 structure to reflect the fact that `PUBLIC KEY` also has an indicator saying which type of key it is (see [RFC 3447](https://www.rfc-editor.org/rfc/rfc3447#appendix-A)). You can see this using `openssl asn1parse` and `-strparse 19`, as described in [this answer](https://stackoverflow.com/a/3117100/372643).

*EDIT*: Following your edit, your can get the details of your `RSA PUBLIC KEY` structure using `grep -v -- ----- | tr -d '\n' | base64 -d | openssl asn1parse -inform DER`:

```
 0:d=0  hl=4 l= 266 cons: SEQUENCE          
    4:d=1  hl=4 l= 257 prim: INTEGER           :FB1199FF0733F6E805A4FD3B36CA68E94D7B974621162169C71538A539372E27F3F51DF3B08B2E111C2D6BBF9F5887F13A8DB4F1EB6DFE386C92256875212DDD00468785C18A9C96A292B067DDC71DA0D564000B8BFD80FB14C1B56744A3B5C652E8CA0EF0B6FDA64ABA47E3A4E89423C0212C07E39A5703FD467540F874987B209513429A90B09B049703D54D9A1CFE3E207E0E69785969CA5BF547A36BA34D7C6AEFE79F314E07D9F9F2DD27B72983AC14F1466754CD41262516E4A15AB1CFB622E651D3E83FA095DA630BD6D93E97B0C822A5EB4212D428300278CE6BA0CC7490B854581F0FFB4BA3D4236534DE09459942EF115FAA231B15153D67837A63
  265:d=1  hl=2 l=   3 prim: INTEGER           :010001 
```

To decode the SSH key format, you need to use the data format specification in [RFC 4251](https://www.rfc-editor.org/rfc/rfc4251#section-5) too, in conjunction with RFC 4253:

> ```
>  The "ssh-rsa" key format has the following specific encoding:
> 
>       string    "ssh-rsa"
>       mpint     e
>       mpint     n 
> ```

For example, at the beginning, you get `00 00 00 07 73 73 68 2d 72 73 61`. The first four bytes (`00 00 00 07`) give you the length. The rest is the string itself: 73=s, 68=h, ... -> `73 73 68 2d 72 73 61`=`ssh-rsa`, followed by the exponent of length 1 (`00 00 00 01 25`) and the modulus of length 256 (`00 00 01 00 7f ...`).

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-10-05T17:00:03.323

Starting from the decoded base64 data of an **OpenSSL rsa-ssh Key**, i've been able to *guess* a format:

*   `00 00 00 07`: four byte length prefix (7 bytes)

*   `73 73 68 2d 72 73 61`: *"ssh-rsa"*

*   `00 00 00 01`: four byte length prefix (1 byte)

*   `25`: RSA Exponent (*`e`*): **25**

*   `00 00 01 00`: four byte length prefix (256 bytes)

*   RSA Modulus (*`n`*):

    ```
     7f 9c 09 8e 8d 39 9e cc d5 03 29 8b c4 78 84 5f
      d9 89 f0 33 df ee 50 6d 5d d0 16 2c 73 cf ed 46 
      dc 7e 44 68 bb 37 69 54 6e 9e f6 f0 c5 c6 c1 d9 
      cb f6 87 78 70 8b 73 93 2f f3 55 d2 d9 13 67 32 
      70 e6 b5 f3 10 4a f5 c3 96 99 c2 92 d0 0f 05 60 
      1c 44 41 62 7f ab d6 15 52 06 5b 14 a7 d8 19 a1 
      90 c6 c1 11 f8 0d 30 fd f5 fc 00 bb a4 ef c9 2d 
      3f 7d 4a eb d2 dc 42 0c 48 b2 5e eb 37 3c 6c a0 
      e4 0a 27 f0 88 c4 e1 8c 33 17 33 61 38 84 a0 bb 
      d0 85 aa 45 40 cb 37 14 bf 7a 76 27 4a af f4 1b 
      ad f0 75 59 3e ac df cd fc 48 46 97 7e 06 6f 2d 
      e7 f5 60 1d b1 99 f8 5b 4f d3 97 14 4d c5 5e f8 
      76 50 f0 5f 37 e7 df 13 b8 a2 6b 24 1f ff 65 d1 
      fb c8 f8 37 86 d6 df 40 e2 3e d3 90 2c 65 2b 1f 
      5c b9 5f fa e9 35 93 65 59 6d be 8c 62 31 a9 9b 
      60 5a 0e e5 4f 2d e6 5f 2e 71 f3 7e 92 8f fe 8b 
    ```

The closest validation of my theory i can find it from RFC 4253:

> The "ssh-rsa" key format has the following specific encoding:
> 
> ```
>  string    "ssh-rsa"
>   mpint     e
>   mpint     n 
> ```
> 
> Here the 'e' and 'n' parameters form the signature key blob.

But it doesn't explain the length prefixes.

* * *

Taking the random `RSA PUBLIC KEY` i found (in the question), and decoding the base64 into hex:

```
30 82 01 0a 02 82 01 01 00 fb 11 99 ff 07 33 f6 e8 05 a4 fd 3b 36 ca 68 
e9 4d 7b 97 46 21 16 21 69 c7 15 38 a5 39 37 2e 27 f3 f5 1d f3 b0 8b 2e 
11 1c 2d 6b bf 9f 58 87 f1 3a 8d b4 f1 eb 6d fe 38 6c 92 25 68 75 21 2d 
dd 00 46 87 85 c1 8a 9c 96 a2 92 b0 67 dd c7 1d a0 d5 64 00 0b 8b fd 80 
fb 14 c1 b5 67 44 a3 b5 c6 52 e8 ca 0e f0 b6 fd a6 4a ba 47 e3 a4 e8 94 
23 c0 21 2c 07 e3 9a 57 03 fd 46 75 40 f8 74 98 7b 20 95 13 42 9a 90 b0 
9b 04 97 03 d5 4d 9a 1c fe 3e 20 7e 0e 69 78 59 69 ca 5b f5 47 a3 6b a3 
4d 7c 6a ef e7 9f 31 4e 07 d9 f9 f2 dd 27 b7 29 83 ac 14 f1 46 67 54 cd 
41 26 25 16 e4 a1 5a b1 cf b6 22 e6 51 d3 e8 3f a0 95 da 63 0b d6 d9 3e 
97 b0 c8 22 a5 eb 42 12 d4 28 30 02 78 ce 6b a0 cc 74 90 b8 54 58 1f 0f 
fb 4b a3 d4 23 65 34 de 09 45 99 42 ef 11 5f aa 23 1b 15 15 3d 67 83 7a 
63 02 03 01 00 01 
```

From [RFC3447 - Public-Key Cryptography Standards (PKCS) #1: RSA Cryptography Specifications Version 2.1](https://www.rfc-editor.org/rfc/rfc3447#page-44):

> **A.1.1 RSA public key syntax**
> 
> An RSA public key should be represented with the ASN.1 type `RSAPublicKey`:
> 
> ```
>  RSAPublicKey ::= SEQUENCE {
>      modulus           INTEGER,  -- n
>      publicExponent    INTEGER   -- e
>   } 
> ```
> 
> The fields of type RSAPublicKey have the following meanings:
> 
> *   modulus is the RSA modulus n.
> *   publicExponent is the RSA public exponent e.

[Using Microsoft's excellent (and the only real) ASN.1 documentation](http://msdn.microsoft.com/en-us/library/windows/desktop/bb648645%28v=vs.85%29.aspx):

```
30 82 01 0a       ;SEQUENCE (0x010A bytes: 266 bytes)
|  02 82 01 01    ;INTEGER  (0x0101 bytes: 257 bytes)
|  |  00          ;leading zero because high-bit, but number is positive
|  |  fb 11 99 ff 07 33 f6 e8 05 a4 fd 3b 36 ca 68 
|  |  e9 4d 7b 97 46 21 16 21 69 c7 15 38 a5 39 37 2e 27 f3 f5 1d f3 b0 8b 2e 
|  |  11 1c 2d 6b bf 9f 58 87 f1 3a 8d b4 f1 eb 6d fe 38 6c 92 25 68 75 21 2d 
|  |  dd 00 46 87 85 c1 8a 9c 96 a2 92 b0 67 dd c7 1d a0 d5 64 00 0b 8b fd 80 
|  |  fb 14 c1 b5 67 44 a3 b5 c6 52 e8 ca 0e f0 b6 fd a6 4a ba 47 e3 a4 e8 94 
|  |  23 c0 21 2c 07 e3 9a 57 03 fd 46 75 40 f8 74 98 7b 20 95 13 42 9a 90 b0 
|  |  9b 04 97 03 d5 4d 9a 1c fe 3e 20 7e 0e 69 78 59 69 ca 5b f5 47 a3 6b a3 
|  |  4d 7c 6a ef e7 9f 31 4e 07 d9 f9 f2 dd 27 b7 29 83 ac 14 f1 46 67 54 cd 
|  |  41 26 25 16 e4 a1 5a b1 cf b6 22 e6 51 d3 e8 3f a0 95 da 63 0b d6 d9 3e 
|  |  97 b0 c8 22 a5 eb 42 12 d4 28 30 02 78 ce 6b a0 cc 74 90 b8 54 58 1f 0f 
|  |  fb 4b a3 d4 23 65 34 de 09 45 99 42 ef 11 5f aa 23 1b 15 15 3d 67 83 7a 
|  |  63 
|  02 03          ;INTEGER (3 bytes)
|     01 00 01 
```

giving the public key modulus and exponent:

*   **modulus** = `0xfb1199ff0733f6e805a4fd3b36ca68...837a63`
*   **exponent** = 65,537

* * *

**Update**: My [expanded form of this answer in another question](https://stackoverflow.com/a/13104466/12597)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-01-11T13:49:44.933

Reference Decoder of [CRL,CRT,CSR,NEW CSR,PRIVATE KEY, PUBLIC KEY,RSA,RSA Public Key Parser](https://8gwifi.org/PemParserFunctions.jsp)

RSA Public Key

```
-----BEGIN RSA PUBLIC KEY-----
-----END RSA PUBLIC KEY----- 
```

Encrypted Private Key

```
-----BEGIN RSA PRIVATE KEY-----
Proc-Type: 4,ENCRYPTED
-----END RSA PRIVATE KEY----- 
```

CRL

```
-----BEGIN X509 CRL-----
-----END X509 CRL----- 
```

CRT

```
-----BEGIN CERTIFICATE-----
-----END CERTIFICATE----- 
```

CSR

```
-----BEGIN CERTIFICATE REQUEST-----
-----END CERTIFICATE REQUEST----- 
```

NEW CSR

```
-----BEGIN NEW CERTIFICATE REQUEST-----
-----END NEW CERTIFICATE REQUEST----- 
```

PEM

```
-----BEGIN RSA PRIVATE KEY-----
-----END RSA PRIVATE KEY----- 
```

PKCS7

```
-----BEGIN PKCS7-----
-----END PKCS7----- 
```

PRIVATE KEY

```
-----BEGIN PRIVATE KEY-----
-----END PRIVATE KEY----- 
```

DSA KEY

```
-----BEGIN DSA PRIVATE KEY-----
-----END DSA PRIVATE KEY----- 
```

Elliptic Curve

```
-----BEGIN EC PRIVATE KEY-----
-----END EC PRIVATE KEY----- 
```

PGP Private Key

```
-----BEGIN PGP PRIVATE KEY BLOCK-----
-----END PGP PRIVATE KEY BLOCK----- 
```

PGP Public Key

```
-----BEGIN PGP PUBLIC KEY BLOCK-----
-----END PGP PUBLIC KEY BLOCK----- 
```

# javascript - 在页面加载时加载 Twitter Bootstrap 弹出框

> ID：12749859
> 
> 赞同：5
> 
> 时间：2012-10-05T15:56:00.533
> 
> 标签：javascript, jquery, twitter-bootstrap

我有以下 BootStrap 弹出窗口：

```
<a href='#' id='example' rel='popover' data-placement='left' data-content='Its so simple to create a tooltop for my website!' data-original-title='Twitter Bootstrap Popover'>HEY</a> 
```

我想在页面加载时显示它，所以我添加了

```
$('#example').popover('show') 
```

文档末尾的函数如下：

```
<script>
$(function ()
{ $("#example").popover(show);
});
</script> 
```

但什么也没发生。

在页面加载时，我什么也没得到。但是，当我`$('#example').popover('show')`在控制台中运行时，我得到了弹出框工作。如何在页面加载后显示弹出框？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-02-18T22:21:20.587

我发现这种方式很方便：

您可以一举触发“显示”并设置选项：

```
$('#elementToPointAt').popover({
   'placement':'bottom',
   'content':'Look at me!'
}).popover('show'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T16:11:42.033

您忘记了`show`. 这有效：

```
$(function () { 
  $("#example").popover('show');
}); 
```

完整的例子是：

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <link href="css/bootstrap.min.css" rel="stylesheet">
  </head>

  <body>
    <a href='#' id='example' rel='popover' data-placement='right' data-content='Its so simple to create a tooltop for my website!' data-original-title='Twitter Bootstrap Popover'>HEY</a>
    <script src="js/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/script.js"></script>
    <script>
      $(function() { 
        $("#example").popover('show');
      });
    </script>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T18:14:19.340

加载窗口后运行它，如下所示：

```
$(window).load(function(){
  $("#example").popover('show');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-12T04:15:14.820

```
$("#example").popover({'placement':'bottom'}).popover('show'); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-08-30T07:49:51.837

使用 jQuery 触发该锚标记的单击事件，例如

```
$('[id$='example' ]').trigger("click"); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-08T06:16:56.427

```
$(document).ready(function(){

window.setTimeout("$('#example').popover('show')",1000);

} 
```

这个对我有用。试试看。

# java - 新的、业余爱好者、开发人员可以从哪里获得反馈？

> ID：12749863
> 
> 赞同：0
> 
> 时间：2012-10-05T15:56:24.250
> 
> 标签：java, feedback

我用Java写了一个小游戏，我觉得很聪明，但是我没有任何懂编程的朋友，也不知道如何让更多人看到它。

作为一个爱好开发者，我没有人看着我告诉我我做得好不好，没有老板让我印象深刻，也没有老师给我评分。所以我发现自己在想：我走在正确的轨道上吗？

我想存在一个在线的地方，一个社区网站，或者一个像 stack 这样的问答式网站，它可以处理这个问题。在某个地方，知道一两件事的人非常乐意看看你正在做什么，并告诉你它是如何工作的。

似乎是任何新手程序员都需要的东西，因此他们可以及早停止不良做法，或者在自己的代码上下文中学习新的做事方式。但不仅仅是代码，整个应用程序，无论是游戏还是文字处理器。代码、用户界面、图标和其他图形，一切都很重要，但我找不到可以做那种事情的地方。

代码审查堆栈交换很好： [https ://codereview.stackexchange.com/](https://codereview.stackexchange.com/)

但是从名称可以推断，这个站点是关于代码的，因此程序的其他非常重要的部分将不在该站点的范围内。

我（而且我不能是唯一一个）正在寻找某人来查看整个项目及其各个部分，并给我一个评估。基本上类似于我会收到的成绩是一个班级，但事实并非如此。以及一些有用的指示/建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:00:32.563

[代码审查](http://codereview.stackexchange.com)是你想要的。

从[常见问题解答](https://codereview.stackexchange.com/faq#im-confused-what-questions-are-on-topic-for-this-site)：

> 只需问自己以下问题。要成为话题，所有问题的答案都必须是肯定的：
> 
> 1.  我的问题是否包含代码？（请在问题中包含代码，而不是指向它的链接）
> 2.  那个代码是我写的吗？
> 3.  它是来自项目的实际代码而不是伪代码或示例代码吗？
> 4.  据我所知，代码是否有效？
> 5.  我需要关于代码的任何或所有方面的反馈吗？
> 
> 如果您对上述所有问题的回答都是肯定的，那么您的问题就是代码审查的主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T16:01:19.967

对于问题和反馈，论坛可能是您最好的选择。像[gamedev.net](http://www.gamedev.net)这样的网站可能是一个不错的起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T15:57:56.010

[http://sourceforge.net/](http://sourceforge.net/)如果它是开源的并且是一个有用的应用程序，那么它是一个好地方。

# joomla - joomla sef 仅在某些页面上中断 url

> ID：12749867
> 
> 赞同：0
> 
> 时间：2012-10-05T15:56:39.413
> 
> 标签：joomla, joomla-extensions, sef, joomla-sef-urls

Joomla 2.5.7 和组件 K2 2.5.7 中的 SEF URL 有问题。关闭 SEF 的链接如下所示：

```
index.php?option=com_content&view=article&id=1&Itemid=262 
```

加上 SEF，它看起来像：

```
index.php/stavebnici 
```

这是完美的！

但是这个网站上的另一个页面：

```
index.php?option=com_k2&view=itemlist&task=user&id=2424:adamajana 
```

SEF 看起来像：

```
index.php/component/k2/itemlist/user/2424-adamajana 
```

我的问题是：为什么第一个剥夺了那么多的观点和选择，而另一个是这样的？你有没有见过这些问题，你知道如何解决它们吗？非常感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:53:10.903

> 为什么 ？

见乔治威尔逊的评论。

> 如何修复它（拥有漂亮的 SEF 网址）？

在我看来，您可以：

*   为该特定文章创建一个菜单项。
*   使用 sh404SEF 之类的扩展名。

# c - 传递给 C 中 puts 函数的参数

> ID：12749872
> 
> 赞同：2
> 
> 时间：2012-10-05T15:57:00.627
> 
> 标签：c, puts

我最近才开始学习 C。我正在研究数组和指针的概念，当我在理解它时遇到了一个绊脚石。

考虑这段代码 -

```
#include<stdio.h>

int main()

 {

 char string[]="Hello";
 char *ptr;

 ptr=string;

 puts(*ptr);

 return(0);

 } 
```

它可以编译，但在执行时遇到分段错误。

我得到的警告是：

> 在“puts”的参数 1 中输入错误；发现 'char' 预期 'pointer to char'

现在 *ptr 确实返回一个字符“H”，我最初的印象是它只接受一个字符作为输入。

后来，我开始明白 puts() 需要一个指向字符数组的指针作为输入，但我的问题是当我传递这样的东西时 - puts("H") 与 puts(* ptr)，假设 *ptr 确实包含字符“H”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T16:00:01.580

`"H"`是一个字符串文字，由 2 个字节`'H'`和`'\0'`. 每当您的代码中有“H”时，就意味着指向具有 2 个字节的内存区域的指针。`*ptr`只返回一个`char`变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T15:59:37.387

通过这样做`puts(*str)`，您将取消引用该`str`变量。然后，这将尝试使用“H”字符作为内存地址（因为那是`str`）指向的内存地址，然后是段错误，因为它将是一个无效的指针（因为它可能会落在您的进程内存之外）。这是因为该`puts`函数接受一个指针作为参数。

你真正想要的是`puts(str)`。

顺便说一句，后一个示例`puts("h")`在编译时用“h”填充字符串表，并用隐式指针替换那里的定义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T16:00:18.097

puts() 函数接受一个指向字符串的指针，而您正在做的是指定单个字符。

看看这个[第 9 课：C 字符串](http://www.cprogramming.com/tutorial/lesson9.html)。

所以与其做

```
#include<stdio.h>

int main()

 {

 char string[]="Hello";
 char *ptr;

 ptr=string;    // store address of first character of the char array into char pointer variable ptr
                // ptr=string is same as ptr=&string[0] since string is an array and an
                // array variable name is treated like a constant pointer to the first
                // element of the array in C.
 puts(*ptr);    // get character pointed to by pointer ptr and pass to function puts
                // *ptr is the same as ptr[0] or string[0] since ptr = &string[0].
 return(0);

 } 
```

你应该改为

```
#include<stdio.h>

int main()

 {

 char string[]="Hello";
 char *ptr;

 ptr=string;  // store address of first character of the char array into char pointer variable ptr

 puts(ptr);  // pass pointer to the string rather than first character of string.

 return(0);

 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T17:39:44.067

当您在gets 中输入字符串或想要使用 puts 显示它时，您必须实际传递指针或字符串的位置

例如

```
char name[] = "Something"; 
```

如果你想打印那个

你必须写`printf("%s",name); --> name actually stores the address of the string "something"`

如果要显示，请使用 puts

```
puts(name) ----> same as here address is put in the arguments 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T15:59:18.630

不。

'H' 是字符文字。

“H”实际上是一个包含两个元素的字符数组，它们是 'H' 和终止的 '\0' 空字节。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-05T16:03:43.510

`puts`正在等待作为输入字符串指针，因此它正在等待内存地址。但是在您的示例中，您提供了内存的内容，即`*ptr`. 这`*ptr`是内存的内容，地址`ptr`是`h`

`ptr`是内存地址

`*ptr`是这段记忆的内容

puts 的输入参数是地址类型，但您提供了`char`类型（地址的内容）

从`puts`您给它作为输入的地址开始逐个字符开始打印，直到包含的内存`0`然后它停止打印

# java - SQLException：值的数量不相同

> ID：12749876
> 
> 赞同：4
> 
> 时间：2012-10-05T15:57:11.423
> 
> 标签：java, sql, jdbc, derby

我使用 Apache Derby 作为嵌入式数据库。

**数据库检查.java**

此类用于创建表。

```
package normal;

//This class if s for checking the database. If the database doesn't exists, this class will create one

import java.sql.*;

public class DatabaseCheck
{
    private Connection con;

    public DatabaseCheck()
    {
        createConnection();
        try
        {
            Statement st = con.createStatement();
            st.executeQuery("select * from PhoneData");

            new MainForm();
        }
        catch(Exception e)
        {
            System.out.println(e.getLocalizedMessage());

            if(e.getLocalizedMessage().equals("Schema 'SA' does not exist"))
            {
                try
                {
                PreparedStatement ps = con.prepareStatement("create table PhoneData(ids integer generated always as identity constraint pkId primary key,names varchar(20),mobileNumber1 varchar(20),mobileNumber2 varchar(20),landNumber1 varchar(20),landNumber2 varchar(20),address varchar(100),category varchar(20),nickName varchar(20),email varchar(20),middleName varchar(20),lastName varchar(20),city varchar(20),country varchar(20))");
                ps.execute();

                PreparedStatement ps2 = con.prepareStatement("create table Emails(accountType varchar(10) constraint pk_user primary key,userName varchar(50) ,passwords varchar(50))");
                ps2.execute();

                new MainForm();

                }
                catch(Exception e2)
                {
                    e2.printStackTrace();
                }
            }
        }
        finally
        {
            closeConnection();
        }
    }

     public void createConnection()
    {
        try
        {
            Class.forName("org.apache.derby.jdbc.EmbeddedDriver");

            con = DriverManager.getConnection("jdbc:derby:PhoneBook;create=true","sa","sasasa");
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }

      public void closeConnection()
    {
        try
        {
            con.close();
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }
} 
```

创建表后，我使用另一个类中的方法插入数据。

```
 public void createConnection()
    {
        try
        {
            Class.forName("org.apache.derby.jdbc.EmbeddedDriver");

            con = DriverManager.getConnection("jdbc:derby:PhoneBook","sa","sasasa");
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }

    @Override
    public void closeConnection()
    {
        try
        {
            con.close();
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }

    @Override
    public String insertData(String firstName, String mobileNumber1, String mobileNumber2, String landNumber1, String landNumber2, String streetAddress, String category, String nickName, String email, String middleName, String lastName, String city, String country)
    {
        String resultString="";
        try
        {
            createConnection();

            con.setAutoCommit(false);
            PreparedStatement ps = con.prepareStatement("insert into PhoneData values(?,?,?,?,?,?,?,?,?,?,?,?,?)");
            ps.setString(1, firstName);
            ps.setString(2, mobileNumber1);
            ps.setString(3, mobileNumber2);
            ps.setString(4, landNumber1);
            ps.setString(5,landNumber2);
            ps.setString(6,streetAddress);
            ps.setString(7,category);
            ps.setString(8,nickName);
            ps.setString(9,email);
            ps.setString(10,middleName);
            ps.setString(11,lastName);
            ps.setString(12,city);
            ps.setString(13,country);

            int result = ps.executeUpdate();

            if(result>0)
            {
                resultString =  "Data Entered Successfully";
            }
            else
            {
                resultString =  "Data Enter Failed";
            }
            con.commit();
        }
        catch(SQLException se)
        {
            try
            {
                con.rollback();
                resultString = "Data rollbacked because of an error";
                se.printStackTrace();
            }
            catch(Exception e)
            {
                resultString = "Data insertion failed and rollback failed because of an error";
                e.printStackTrace();
            }
        }
        finally
        {
            closeConnection();
        }

        return resultString;
    } 
```

由于以下错误，我从未设法插入任何内容

```
java.sql.SQLSyntaxErrorException: The number of values assigned is not the same as the number of specified or implied columns.
    at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedConnection.handleException(Unknown Source)
    at org.apache.derby.impl.jdbc.ConnectionChild.handleException(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedPreparedStatement.<init>(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedPreparedStatement20.<init>(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedPreparedStatement30.<init>(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedPreparedStatement40.<init>(Unknown Source)
    at org.apache.derby.jdbc.Driver40.newEmbedPreparedStatement(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedConnection.prepareStatement(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedConnection.prepareStatement(Unknown Source)
    at normal.DatabaseHandler.insertData(DatabaseHandler.java:56)
    at normal.InsertForm$InsertDataAction.actionPerformed(InsertForm.java:385)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6504)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6269)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4860)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2713)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:680)
    at java.awt.EventQueue$4.run(EventQueue.java:678)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
Caused by: java.sql.SQLException: The number of values assigned is not the same as the number of specified or implied columns.
    at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(Unknown Source)
    ... 51 more
Caused by: ERROR 42802: The number of values assigned is not the same as the number of specified or implied columns.
    at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
    at org.apache.derby.impl.sql.compile.InsertNode.bindStatement(Unknown Source)
    at org.apache.derby.impl.sql.GenericStatement.prepMinion(Unknown Source)
    at org.apache.derby.impl.sql.GenericStatement.prepare(Unknown Source)
    at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(Unknown Source)
    ... 45 more
BUILD SUCCESSFUL (total time: 10 seconds) 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T16:00:27.773

您的`INSERT`查询不正确，当您使用该类型的语法时，假定所有字段都必须具有值，并且由于您有一个 auto_incremented 列，因此您没有包含它，这使其无效。

因此，要更正您的语法，您必须显式声明所有列，例如

```
INSERT INTO tableName(col1, col2) VALUES (?,?) 
```

如果我没记错的话，您的表中有 14 列，`PhoneData`并且您只为 13 列提供了 13 个值，不包括 auto_increment `ID`。您准备好的语句的正确查询应该如下所示，

```
INSERT INTO PhoneData( Names, mobileNumber1,..., country) VALUES (?,?,...,?) 
```

# erlang - 在许多牛仔示例中，一对一主管的目的是什么

> ID：12749877
> 
> 赞同：5
> 
> 时间：2012-10-05T15:57:12.610
> 
> 标签：erlang, cowboy

在 Cowboy github 上提供的示例中，以及我在网上找到的其他一些示例中，有一个一对一的主管似乎什么都不做。我什至相信我看到了一个带有以下评论的示例，“就像真正的主管什么都不做一样”。

这么多牛仔示例中的主管模块的目的是什么？

从 echo_get 示例：

```
%% Feel free to use, reuse and abuse the code in this file.

%% @private-module(echo_get_sup).
-behaviour(supervisor).

%% API.
-export([start_link/0]).

%% supervisor.
-export([init/1]).

%% API.
-spec start_link() -> {ok, pid()}.
 start_link() ->    
     supervisor:start_link({local, ?MODULE}, ?MODULE, []).

%% supervisor.
init([]) ->
    Procs = [], 
    {ok, {{one_for_one, 10, 10}, Procs}}. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T19:41:26.333

来自 erlang[应用程序行为文档](http://www.erlang.org/doc/design_principles/applications.html)：

> `start`在启动应用程序时调用，并且应该通过启动顶级主管来创建监督树。预计会返回最高主管的 pid 和一个可选的 term `State`，默认为`[]`. 该术语按原样传递以停止。

[他有这个虚拟主管，所以他可以在此处](https://github.com/extend/cowboy/blob/master/examples/echo_get/src/echo_get_app.erl)的 start 函数结束时调用它。我认为它除了满足这个条件之外没有任何实际目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T00:44:18.187

您不需要指定主管在启动时管理的所有子项。您可以使用,和动态添加/启动它们`supervisor:start_child/2`并管理它们。这意味着即使主管从一开始就没有孩子，但这并不意味着它只是一个假人。`supevisor:restart_child/2``supervisor:terminate_child/2``supervisor:delete_child/2`

真正的主管“什么都不做”的评论很可能与这样一个事实有关，即主管只能监督进程而不能像工作进程那样做任何工作。或者至少应该是这个意思！

# c# - C# 中的 Active Directory 查询性能

> ID：12749881
> 
> 赞同：2
> 
> 时间：2012-10-05T15:57:19.723
> 
> 标签：c#, performance, active-directory

我正在编写一些代码来使用 Active Directory。此代码包括根据帐户名称拉回用户，然后获取直接报告和获取组成员资格的功能（这些可以递归或非递归运行，具体取决于是否需要完整的层次结构）。我已经看到了一些关于如何做到这一点的答案。然而，所有答案似乎都依赖于专有名称。

专有名称是用于在活动目录中关联这些对象的外键（在数据库术语中）吗？我的直觉表明 objectGuid 将是用于将项目相互关联的关键，因为它永远不会改变。因此，我假设如果我重写查询以在 DN 上使用 objectGuid，性能会更好。

*   是否可以通过 objectGuid 查询包含用户/组的组？
*   是否可以查询给定经理 (objectGuid) 的直接下属的 objectGuids。
*   objectGuid 查询是否优于其他属性，或者 DN、sAMAccountName 或其他关键属性之一是从性能角度来看最好使用的关键吗？
*   大多数（全部？）LDAP实现的上述答案是否正确，或者它们是否特定于MS AD？

提前致谢，

JB

附言。与我的大多数问题一样，性能差异可能可以忽略不计；这更多是为了学术兴趣/满足我的好奇心。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T16:36:54.697

如果应用程序存储或缓存标识符或对存储在 Active Directory 域服务中的对象的引用，则**对象 GUID**是使用的最佳标识符，原因如下：

*   即使重命名或移动对象，on object 的 objectGUID 属性也不会更改。
*   使用对象 GUID 很容易绑定到对象。
*   如果对象被重命名或移动，objectGUID 属性提供了一个标识符，可用于快速查找和识别对象，而不必编写具有所有属性条件的查询，以识别该对象。

另一方面，如果对象被重命名或移动，对象的**专有名称**会改变，因此专有名称不是可靠的对象标识符。
因此，这与性能无关，而是与可靠性有关，您应该使用**objectGUID**搜索目录。

来到你的下一个问题：

> 是否可以通过 objectGuid 查询包含用户/组的组？

当然是的。检查此[链接](http://www.codeproject.com/Articles/18102/Howto-Almost-Everything-In-Active-Directory-via-C#30)。
希望能帮助到你 ！！

# java - 使用 Eclipse 中的按钮关闭 JFrame

> ID：12749884
> 
> 赞同：1
> 
> 时间：2012-10-05T15:57:30.257
> 
> 标签：java, swing, jframe, jbutton, actionlistener

在编程方面，我是个菜鸟。我们有这个关于登录配置文件帐户的项目。我刚开始做；我遇到了一个具体的问题。我想使用按钮关闭框架。

```
buttonenter.setText("Enter");
     buttonenter.addActionListener(new ActionListener (){
       public void actionPerformed (ActionEvent ae){

           }
    }); 
```

我尝试放置我的 frame.dispose();、set.Visible(false) 等，但我得到了一个错误。我不太明白。我真的很感激帮助！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T16:32:37.243

这是您尝试执行的操作的简单示例。你收到什么错误？

```
private void initialize() {
    frame = new JFrame();
    frame.setBounds(100, 100, 450, 300);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JButton btnClose = new JButton("CLOSE");
    btnClose.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            frame.setVisible(false);
        }
    });
    frame.getContentPane().add(btnClose, BorderLayout.NORTH);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T16:35:47.583

从[JButtons](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html) [ActionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)你可以调用

*   `JFrame#dispose();`（终止当前 JVM）

*   `JFrame#setVisible(false);`（隐藏 JFrame）

*   `System.exit(0);`（终止当前 JVM）

和/或与（另一种标准方式是）

*   [`setDefaultCloseOperation();`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFrame.html#setDefaultCloseOperation%28int%29)

*   添加[`WindowListener`](http://docs.oracle.com/javase/6/docs/api/java/awt/event/WindowListener.html)并覆盖正确的事件[windowClosing();](http://docs.oracle.com/javase/6/docs/api/java/awt/event/WindowListener.html#windowClosing%28java.awt.event.WindowEvent%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-03T14:39:14.687

当您通过假可见关闭任何对象时，实际上您只是隐藏了该对象，而该对象仍保留在内存中。

你最好使用 ***frame.dispatchEvent(new windowEvent(frame,windowEvent.window_closeing));*** 方法

# cordova - 使用 Phonegap 在 iF rame 中加载外部 URL（ChildBrowser 插件？）

> ID：12749887
> 
> 赞同：4
> 
> 时间：2012-10-05T15:57:36.903
> 
> 标签：cordova, iframe, webview, external, childbrowser

我一直在尝试在 iFrame 中加载外部 URL（不同 Web 服务器上的 HTML 文件），以便它包含在我的应用程序标题和底部标签栏之间。

我曾尝试使用 iFrame HTML5 元素和属性，但在不同的 Android 版本 (2.2/2.3) 和 iOS 版本之间看到了不同的行为。有时 iFrame 元素中的内容会脱离 iFrame 并且我的页眉/标签栏消失。即使 URL 被列入白名单，其他版本仍会打开本机 Web 浏览器。此外，我无法设置 PhonGap.plist 设置以在 web 视图中显示所有外部 URL，因为该应用程序还具有来自同一域的一些链接，需要打开本机浏览器。

我在这里看到一篇文章，有人修改了 ChildBrowser 插件来完成此操作（[在 HTML5 应用程序中使用 IFRAME](https://stackoverflow.com/questions/8620577/using-iframe-in-html5-applications)），但没有参考代码或如何完成此操作的步骤。我不能使用默认的 ChildBrowser 行为，因为我还需要显示我的标题和标签栏。

有谁知道我如何在 iFrame 中显示所有版本的外部 URL？或者有谁知道需要采取哪些步骤来修改 ChildBrowser 插件来完成此操作？

任何帮助将不胜感激，因为我在这方面花了很多时间。

# java - 如何在 onDraw 方法之外使用画布？

> ID：12749888
> 
> 赞同：1
> 
> 时间：2012-10-05T15:57:43.470
> 
> 标签：java, android, parameters, android-canvas, ondraw

我需要在 onDraw() 可以访问的同一画布上绘制一些东西。

只要我在 OnDraw() 中，这工作就很好，但是当我在外面时，我不知道如何获取该画布。

感谢您的任何建议。

```
@Override
protected void onDraw(Canvas canvas) {
    canvas.doSomething  // works fine
}

//new method to draw omething on the same canvas
mydraw(how to get canvas in here?){} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:07:57.193

onDraw 被系统调用，你应该在那里调用你的绘图你总是可以将他的 Canvas 作为参数传递给你的 myDraw 方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T04:28:03.127

您可以尝试将画布发送到您自己的方法：

```
@Override
protected void onDraw(Canvas canvas) {
    yourMethod(canvas);
}

void yourMethod(Canvas canvas){
    //TODO
    //your code goes here
} 
```

# jquery-mobile - jqm 1.2.0 iOS设备中单选按钮的页面宽度拉伸

> ID：12749889
> 
> 赞同：0
> 
> 时间：2012-10-05T15:57:44.543
> 
> 标签：jquery-mobile

我想将水平单选按钮设置为屏幕的全宽，我指的是[http://jquerymobile.com/demos/1.2.0/docs/forms/radiobuttons/](http://jquerymobile.com/demos/1.2.0/docs/forms/radiobuttons/)，我的代码如下：

```
 <div> 
 <fieldset data-role="controlgroup" data-type="horizontal"> 
 <input type="radio" name="radio-choice-1" id="spent_money_1" value="choice-1" checked="checked" /> <label for="spent_money_1">Spent Some $</label>
 <input type="radio" name="radio-choice-1" id="made_money_1" value="choice-2"/>
 <label for="made_money_1">Made Some $</label> 
 </fieldset>
 </div> 
```

我试图将 style="width:100%" 放在 div、fieldset 和 input 中，但也无济于事。请欣赏任何建议。谢谢 ！

干杯，马克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T22:40:03.867

我一直有同样的问题。添加以下 CSS 对我有用。

这种情况适用于 4 个单选按钮，因此我为 ui-radio 使用 25% 的宽度。

```
.ui-controlgroup-controls
{
    width:100%;
}
.ui-radio {
    width:25%;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T05:14:00.340

在您不想指定宽度的一般情况下（适用于 1.3.0）

```
.ui-controlgroup-controls
{
    display: table;
    width: 100%;
}

.ui-controlgroup-controls .ui-radio
{
    display: table-cell;
    float: none;
} 
```

# encoding - 关于欧洲字符的 Solr 查询 (Beklædning)

> ID：12749890
> 
> 赞同：0
> 
> 时间：2012-10-05T15:57:45.230
> 
> 标签：encoding, solr

在 solr 查询搜索中，搜索

```
q=*%3A*&fq=grand_cat_str%3ABeklædning 
```

Solr 将 fq 读取为：`<str name="fq">grand_cat_str:BeklÃ¦dning</str>`

并且不返回任何结果。对 Bekl*dning 进行疯狂搜索将返回正确的结果。

[编辑] 我添加了

```
 <fieldType name="string" class="solr.StrField" sortMissingLast="true" >
 <analyzer type="index">
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.ASCIIFoldingFilterFactory"/>
 </analyzer>

</fieldType> 
```

但出现错误：

```
<org.apache.solr.common.SolrException: FieldType: StrField (string) does not support specifying an analyzer 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:21:03.990

这确实是一个逃生问题。使用 org.apache.solr.client.solrj.util.ClientUtils.escapeQueryChars(String) 能够使字符串可读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T09:51:04.633

如果他的语料库中的大多数文档都使用相同的语言（丹麦语？），那么应用 ASCIIFoldingFilterFactory 很可能是一个不好的选择，这取决于用户期望如何输入他们的查询。

您是否尝试过仅对查询进行编码？

```
q=*%3A*&fq=grand_cat_str%3ABekl%C3%A6dning 
```

应该可以正常工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:54:13.520

这与 Solr 如何处理不在前 127 个 ASCII 字符集中的字符有关。最好的建议是将[ASCIIFoldingFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.ASCIIFoldingFilterFactory)分析器添加到`grand_cat_str`架构中的字段。

如果您需要有关添加分析器的指导，请参考[在架构中指定分析器。](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#Specifying_an_Analyzer_in_the_schema)

# spring-security - 是否可以使用 Spring Security (3.1.X) 来获取用户的 LDAP 信息，而不是经过身份验证的用户？

> ID：12749896
> 
> 赞同：6
> 
> 时间：2012-10-05T15:58:17.493
> 
> 标签：spring-security, ldap

我使用 Spring Security 针对 Active Directory 服务器对用户进行身份验证。CustomUserContext 也被注入到 ldapAuthenticationProvider bean 中，以提供对其他 LDAP 属性的访问。一切都很好。从经过身份验证的用户那里提取我想要的任何东西都没有问题。

我遇到的问题是，我想从登录用户以外的用户上的 Active Directory 服务器检索一些属性，尤其是电子邮件地址。是否可以通过利用我已经拥有的东西来实现这一点，或者使用完全独立的方法从不同用户访问 LDAP 属性是我唯一的选择吗？

*[编辑]* **配置如下**

安全配置.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:sec="http://www.springframework.org/schema/security"
       xmlns:security="http://www.springframework.org/schema/security"
       xsi:schemaLocation="http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">

<bean id="contextSource" class="org.springframework.ldap.core.support.LdapContextSource">
    <property name="url" value="ldap://xxxx.xxxx.xxx:389" />
    <property name="base" value="dc=corp,dc=global,dc=xxxxx,dc=com" />
    <property name="userDn" value="CN=lna.authquery,OU=LDAPGroups,OU=NorthAmerica,DC=corp,DC=global,DC=xxxxx,DC=com" />
    <property name="password" value="xxxxxxx" />
    <property name="pooled" value="true" />
    <!-- AD Specific Setting for avoiding the partial exception error -->
    <property name="referral" value="follow" />
</bean>

<bean id="ldapAuthenticationProvider" class="org.springframework.security.ldap.authentication.LdapAuthenticationProvider" >
    <constructor-arg>
        <bean class="org.springframework.security.ldap.authentication.BindAuthenticator">
            <constructor-arg ref="contextSource" />
            <property name="userSearch">
                <bean id="userSearch" class="org.springframework.security.ldap.search.FilterBasedLdapUserSearch">
                    <constructor-arg index="0" value="" />
                    <constructor-arg index="1" value="(sAMAccountName={0})" />
                    <constructor-arg index="2" ref="contextSource" />
                </bean>
            </property>
        </bean>
    </constructor-arg>
    <constructor-arg>
        <bean class="org.springframework.security.ldap.userdetails.DefaultLdapAuthoritiesPopulator">
            <constructor-arg ref="contextSource" />
            <constructor-arg value="" />
            <property name="groupSearchFilter" value="(member={0})" />
            <property name="searchSubtree" value="true" />
            <!-- Settings below convert the adds the prefix ROLE_ to roles returned from AD -->
        </bean>
    </constructor-arg>
    <property name="userDetailsContextMapper">
       <bean class="net.xxxx.xxxxx.utilities.CustomUserDetailsContextMapper" />
    </property>
</bean>

<bean id="authenticationManager" class="org.springframework.security.authentication.ProviderManager">
    <constructor-arg>
        <list>
            <ref local="ldapAuthenticationProvider" />
        </list>
    </constructor-arg>
</bean>

<sec:http pattern="/css/**" security="none"/>
<sec:http pattern="/images/**" security="none"/>
<sec:http auto-config="true" authentication-manager-ref="authenticationManager" >
    <sec:intercept-url pattern="/login.jsp*" requires-channel="https" access="IS_AUTHENTICATED_ANONYMOUSLY"/>
    <sec:intercept-url pattern="/**" requires-channel="https" access="IS_AUTHENTICATED_FULLY"/>
    <sec:form-login login-page='/login.jsp' 
                    default-target-url="/home.html" 
                    authentication-failure-url="/login.jsp" />
</sec:http> 
```

CustomeUserDetails.java

```
package net.xxxx.xxxx.utilities;

import java.util.Collection;

import org.springframework.security.core.GrantedAuthority;
import org.springframework.security.core.userdetails.User;

public class CustomUserDetails extends User {

    private static final long serialVersionUID = 1416132138315457558L;

     // extra instance variables
       final String fullname;
       final String email;
       final String title;

       public CustomUserDetails(String username, String password, boolean enabled, boolean accountNonExpired,
             boolean credentialsNonExpired, boolean accountNonLocked,
             Collection<? extends GrantedAuthority> authorities, String fullname,
             String email, String title) {

           super(username, password, enabled, accountNonExpired, credentialsNonExpired,
                accountNonLocked, authorities);

           this.fullname = fullname;
           this.email = email;
           this.title = title;
       }

       public String getFullname() {
           return this.fullname;
       }

       public String getEmail() {
           return this.email;
       }

       public String getTitle() {
           return this.title;
       }
} 
```

CustomUserDetailsContextMapper.java

```
package net.xxxx.xxxxx.utilities;

import java.util.Collection;

public class CustomUserDetailsContextMapper implements UserDetailsContextMapper {

    public UserDetails mapUserFromContext(DirContextOperations ctx,
            String username, Collection<? extends GrantedAuthority> authorities) {

        String fullname = "";
        String email = "";
        String title = "";

        Attributes attributes = ctx.getAttributes();
        try {
            fullname = (String) attributes.get("displayName").get(); 
            email = (String) attributes.get("mail").get(); 
            title = (String) attributes.get("title").get(); 
        } catch (NamingException e) {
            e.printStackTrace();
        }

        CustomUserDetails details = new CustomUserDetails(username, "", true, true, true, true, authorities, fullname, email, title);
        return details;
    }

    public void mapUserToContext(UserDetails user, DirContextAdapter ctx) {

    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T17:05:07.680

我终于最终弄清楚了如何做到这一点。我正在回答这个问题，以防它帮助需要这样做的其他人。如果我是唯一的一个，我会感到惊讶。

首先，我必须将我的`security-config.xml`文件移出 WEB-INF 结构并将其放在 spring 资源目录下。`contextSource`我能够重复使用的bean。但是我不能重用`CustomUserDetailsContextMapper.java`nor`CustomUserDetails.java`类，因为它们太特定于 Spring 安全性，而不是仅仅从未经身份验证的用户检索 LDAP 数据。

我最终为 LDAP 访问编写了一个单独的类，该类具有通用的`contextSource`自动装配。该类在下面。

**ldapDao.java**

```
package net.xxxxx.xxx.dao;

import java.util.HashMap;
import java.util.LinkedList;
import java.util.Map;

import javax.naming.directory.Attributes;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.ldap.core.AttributesMapper;
import org.springframework.ldap.core.LdapTemplate;
import org.springframework.ldap.core.support.LdapContextSource;
import org.springframework.stereotype.Component;

@Component
public class LdapDao {

    LdapTemplate template;

    @Autowired
    public LdapDao(LdapContextSource contextSource) {
        template = new LdapTemplate(contextSource);
    }

    @SuppressWarnings("unchecked")
    public Map<String, String> getUserAttributes(String username) {
        Map<String, String> results = new HashMap<String, String>();

        String objectClass = "samAccountName=" + username;
        LinkedList<Map<String, String>> list = (LinkedList<Map<String, String>>) template.search("", objectClass, new UserAttributesMapper());
        if (!list.isEmpty()) {
            // Should only return one item
            results = list.get(0);
        }
        return results;
    }

    private class UserAttributesMapper implements AttributesMapper {

        @Override
        public Map<String, String> mapFromAttributes(Attributes attributes) throws javax.naming.NamingException {
            Map<String, String> map = new HashMap<String, String>();

            String fullname = (String) attributes.get("displayName").get(); 
            String email = (String) attributes.get("mail").get(); 
            String title = (String) attributes.get("title").get();

            map.put("fullname", fullname);
            map.put("email", email);
            map.put("title", title);
            return map;
        }
    }   
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-17T06:47:23.600

@Bill 你所做的很棒，尽管实际上有一种更简单的方法。而不是诉诸`LdapTemplate`，只需使用您已经注册的 bean`DefaultLdapAuthoritiesPopulator`和`FilterBasedLdapUserSearch`. 这样，您可以获得相同的`UserDetails`对象，该对象也填充了权限，并为您的`net.xxxx.xxxxx.utilities.CustomUserDetailsContextMapper`.

这是您需要做的：

1.  将需要注入的 bes 拆分为命名 bean，并使用`ref`属性和`constructor-arg`s ( `DefaultLdapAuthoritiesPopulator`, `FilterBasedLdapUserSearch`, `net.xxxx.xxxxx.utilities.CustomUserDetailsContextMapper`) 的属性。
2.  在您的`LdapDao`注入引用中：
    *   `FilterBasedLdapUserSearch`-`userSearch`
    *   `DefaultLdapAuthoritiesPopulator`-`authPop`
    *   `net.xxxx.xxxxx.utilities.CustomUserDetailsContextMapper`-`userMapper`
3.  将以下方法添加到您的`LdapDao`：

.

```
public UserDetails getUserDetails(final String username) {
    try {
        DirContextOperations ctx = userSearch.searchForUser(username);
        return userMapper.mapUserFromContext(ctx, username,
                authPop.getGrantedAuthorities(ctx, username));
    } catch (UsernameNotFoundException ex) {
        return null;
    }
} 
```

现在您可以调用`getUserDetails(String)`来获取与检索当前登录的上下文时相同的对象，并且可以使用相同的代码等。

# c++ - 是它！=container.end() 设计错误/功能还是仅仅是必要性？

> ID：12749899
> 
> 赞同：1
> 
> 时间：2012-10-05T15:58:24.233
> 
> 标签：c++, iterator

最近我在考虑如果迭代器隐式转换为 bool 会很好，这样你就可以做到

```
auto it = find(begin(x),end(x), 42);
if (it)  //not it!=x.end();
{
} 
```

但考虑到它，我意识到这意味着要么`it`必须设置为“NULL”，所以如果你想用它做某事你不能直接使用它（你必须使用`x.end()`）或者你可以使用它但是迭代器的大小必须更大（如果它指向的是存储，则存储它 `.end()`）。所以我的问题是：

1.  我的示例中的语法是否可以在不破坏当前代码且不增加迭代器大小的情况下实现？
2.  隐式转换为 bool 会导致一些问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T16:10:07.010

您正在假设迭代器是访问容器的一种方式。它们允许您这样做，但它们也允许更多显然不适合您预期操作的事情：

```
auto it = std::find(std::begin(x), std::next(std::begin(x),10), 42 );
    // Is 42 among the first 10 elements of 'x'?

auto it = std::find(std::istream_iterator<int>(std::cout),
                    std::istream_iterator<int>(), 42 );
    // Is 42 one of the numbers from standard input? 
```

在第一种情况下，迭代器确实引用了一个容器，但是您找到的*范围*并未包含整个容器，因此`it`无法针对`end(x)`. 在第二种情况下，根本没有容器。

请注意，许多容器的迭代器的有效实现只包含一个指针，因此任何其他状态都会增加迭代器的大小。

关于到*任何类型的*转换or `bool`，它们确实会引起很多问题，但是在 C++11 中可以通过`explicit`转换来规避它们，或者在 C++03 中使用*安全布尔*成语。

您可能对不同的概念更感兴趣：范围。范围有多种方法，因此尚不清楚确切的语义应该是什么。想到的前两个是 Boost.Iterator 和我最近阅读的 Alexandrescu 的一篇文章[On Iteration](http://www.informit.com/articles/article.aspx?p=1407357)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T16:16:39.140

使用单个迭代器可以完成的工作很少。一**对**迭代器定义了一个由元素组成的序列；第一个迭代器指向第一个元素，第二个迭代器指向最后一个元素的末尾。一般来说，第一个迭代器无法知道它何时被递增以匹配第二个迭代器。算法会这样做，因为它们有两个迭代器，并且可以判断工作何时完成。例如：

```
std::vector<int> vec;
vec.push_back(1);
vec.push_back(2);
vec.push_back(3);

// copy the contents of the vector:
std::copy(somewhere, vec.begin(), vec.end());
// copy the first two elements of the vector:
std::copy(somewhere, vec.begin(), vec.begin() + 2); 
```

在两个复制调用中，`vec.begin()`是相同的迭代器；该算法做了不同的事情，因为它有第二个迭代器告诉它何时停止。

当然，可以设计一种不同类型的迭代器，它同时包含序列的开头和结尾（就像 Java 所做的那样），但这不是 C++ 迭代器的设计方式。有关于标准化包含两个迭代器的“范围”概念的讨论（新的基于范围的 for 循环是朝着这一目标迈出的第一步）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T17:04:39.967

好吧，您可能不想要隐式转换，但是需要两个单独的对象来确定迭代何时完成显然是一个设计错误。这不是因为`if`or `for`（尽管使用单个迭代器也会使这些更清晰）；这真的是因为它使功能分解和过滤迭代器变得非常困难，如果不是不可能的话。

从根本上说，与迭代器相比，STL 迭代器更接近智能指针。有时这样的指针是合适的，但它们并不是迭代器的良好替代品。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-05T16:13:41.247

这不起作用的两个原因：

首先，可以使用原始指针作为迭代器（通常是数组）：

```
int data[] = { 50, 42, 37, 5 };
auto it = find(begin(data), end(data), 42); 
```

其次，您不必将容器的实际末端传递给`find`; 例如在句点之前找到第一个空格字符：

```
auto sentence = "Hello, world.";
auto it1 = find(begin(sentence), end(sentence), '.');
auto it2 = find(begin(sentence), it1, ' '); 
```

# mongodb - MongoDB 高级计数查询，取决于文档的内容

> ID：12749900
> 
> 赞同：2
> 
> 时间：2012-10-05T15:58:24.950
> 
> 标签：mongodb, count, mapreduce, nosql

我在使用 MongoDB 进行高级计数查询时遇到问题。

我正在尝试计算文档字段中的对象***，***但前提是存在与查询匹配的先前元素并且在数组 ***中较旧。***

让我解释....

我有一个**容器文件**，看起来像：

```
{
 "_id" : ...,
 [...]
 "objects" : [ ]
} 
```

在对象字段内：
我的**对象文档**看起来像：

```
[
  {
    "_id" : ...,
    "name" : "foo",
    "properties" = [ ],
    "time" = 000000042
  }

  {
    "_id" : ...,
    "name" : "bar",
    "properties" = [ ],
    "time" = 000000424
  }

  {
    "_id" : ...,
    "name" : "baz",
    "properties" = [ ],
    "time" = 000004242
  } 
```

现在我计算有多少**容器文档**包含：带有对象 1 (foo)的容器
***计数***，带有对象 1 和 2（foo 和 bar）的容器
***计数***，带有对象 1、2 和 3 的容器计数（foo、bar、
***baz*** )

但是现在我只想在bar 比*foo*旧时*才***计算**foo 和 bar （使用时间字段）...带有对象 1 的容器***计数***（foo），带有对象 1 和 2 的容器***计数*****（foo和**bar），以及foo.time < bar.time***包含***对象 1、2 和 3 (foo, bar, baz) **AND** foo.time < bar.time < baz.time 的容器计数

 *******问题是每个容器的时间字段都需要更改。换句话说：我如何使用每个文档的动态查询

这里有一个代码示例：

```
foreach ($COUNTER[ARRAY_FIELDS_NAME_TO_COUNT] as $key => $value)
{
// Build the query (Name & properties)
$match[$key] = array('$elemMatch' => array('name' => $value['name']));
foreach ($value['properties'] as $propertyName => $propertyValue)
  $match[$key]['$elemMatch']["properties.$propertyName"] = $propertyValue;

// Time checking
if ($key > 0)
{
  //FIXME with a... dynamics query searching inside current doc??
  //           or   a special var set to the previous object matched...  or MapReduce..
}

// Make the query
$query = array('objects' => array('$all' => $match));

$result[$key]['count'] = $db->person->count($query);
} 
```

我是 MongoDB 的新手，我真的不知道什么是有效地做到这一点的最佳实践！

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T19:33:23.547

以下是在 shell (javascript) 中使用聚合框架的方法。

请注意，为了便于阅读，我已将其分成多行，实际查询是最后一行。我用过 foo bar 和 baz 但你当然想适应更合适的东西。

```
match = { "$match" : { "objects.name" : "foo" } };
unwind = { "$unwind" : "$objects" };
projectDates = {"$project" : {
        "_id" : 1,
        "objects" : 1,
        "fooDate" : {
            "$cond" : [
                {
                    "$eq" : [
                        "$objects.name",
                        "foo"
                    ]
                },
                "$objects.time",
                0
            ]
        },
        "barDate" : {
            "$cond" : [
                {
                    "$eq" : [
                        "$objects.name",
                        "bar"
                    ]
                },
                "$objects.time",
                0
            ]
        },
        "bazDate" : {
            "$cond" : [
                {
                    "$eq" : [
                        "$objects.name",
                        "baz"
                    ]
                },
                "$objects.time",
                0
            ]
        }
    }
};
group = {"$group" : {
        "_id" : "$_id",
        "objects" : {
            "$push" : "$objects"
        },
        "maxFooDate" : {
            "$max" : "$fooDate"
        },
        "maxBarDate" : {
            "$max" : "$barDate"
        },
        "maxBazDate" : {
            "$max" : "$bazDate"
        }
    }
};
projectCount = {"$project" : {
        "_id" : 1,
        "foos" : {
            "$add" : [
                1,
                0
            ]
        },
        "foosAndBars" : {
            "$cond" : [
                {
                    "$lt" : [
                        "$maxFooDate",
                        "$maxBarDate"
                    ]
                },
                1,
                0
            ]
        },
        "foosBarsAndBazs" : {
            "$cond" : [
                {
                    "$and" : [
                        {
                            "$lt" : [
                                "$maxBarDate",
                                "$maxBazDate"
                            ]
                        },
                        {
                            "$lt" : [
                                "$maxFooDate",
                                "$maxBarDate"
                            ]
                        }
                    ]
                },
                1,
                0
            ]
        }
    }
};
countFoos = {"$group" : {
        "_id" : "FoosBarsBazs",
        "Foos" : {
            "$sum" : "$foos"
        },
        "FBs" : {
            "$sum" : "$foosAndBars"
        },
        "FBBs" : {
            "$sum" : "$foosBarsAndBazs"
        }
    }
};

db.collection.aggregate([match, unwind, projectDates, projectCount, countFoos]).result 
```*******

# oracle - Oracle select multiple rows filter by uniqeness of one row

> ID：12749906
> 
> 赞同：0
> 
> 时间：2012-10-05T15:58:48.603
> 
> 标签：oracle, plsql, group-by, having

Hi I have a query in Oracle and im not sure if i can do what im looking to do.

I have a query something like below

```
select tableA.Value, tableB.Value, tableC.Value, tableD.Value

from tableA

join tableB
on ######

join tableC
on #####

join tableD 
on ##### 
```

I need to limit this result set to only records that have a unique tableA.Value

Can I do a multiple row select and join on multiple tables then some how add something like

GROUP BY tableA.Value

HAVING Count(tableA.Value) = 1)

to the end to limit the rows selected to those with a unique value in one of those rows

#########################EDIT

Some data to maybe explain better

1234 ABC TEST

2345 BCD TEST

2345 GGG TEST

3456 CDE TEST

4567 DEF TEST

4567 FFF TEST

5678 EFG TEST

desired result set;

1234 ABC TEST

3456 CDE TEST

5678 EFG TEST

I want to limit records to ones that have a unique column 1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T16:08:17.477

```
select tableA.Value, tableB.Value, tableC.Value, tableD.Value
  from tableA 
join tableB on ######
join tableC on #####
join tableD on #####
where 1 = (select count(*) from tableA tableA2 where tableA2.value = tableA.value) 
```

I didn't work in Oracle for years, so I'm not sure the syntax is correct, but the idea is to rename tableA from the subquery to tableA2 to not have ambiguity when comparing tableA.value to tableA2.value.

# matlab - MATLAB ind2sub 不是 sub2ind 的倒数

> ID：12749907
> 
> 赞同：3
> 
> 时间：2012-10-05T15:58:55.650
> 
> 标签：matlab

我实现了一个图像处理算法，需要用一条线扫描图像。我将线的有效点生成为两个向量：`lx_valid`和`ly_valid`。然后我用 生成线性索引`sub2ind`，并绘制结果。如您所见，我的线显然与对象相交，但`locmax == 0`在运行代码之后。坐标都是有效的（在图像内）；但我得到了一个更奇怪的结果：如果我生成坐标，因为`ind2sub(size(Im), c)`我什至没有取回我的坐标。我敢肯定它是小东西，但我无法得到它。

```
valid = lx >= 1 & size(Im, 2) >= lx & ly >= 1 & size(Im, 1) >= ly;
lx_valid = lx(valid);
ly_valid = ly(valid);
c = sub2ind(size(Im), ly_valid, lx_valid);
locmax = max(Im(c));
imshow(Im);plot(lx_valid,ly_valid,'go'); 
```

![imshow(Im);情节(lx_valid,ly_valid,'go');  按预期工作](../Images/58cac3eb76a55db78f0393f3ca944b8b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:36:56.807

我解决了这个问题：由 sub2ind 生成的索引已饱和，并以 uint16 静默返回。如果我将参数转换为双精度，sub2ind 会返回一个对于索引来说足够大的双精度值。

```
valid = lx >= 1 & size(Im, 2) >= lx & ly >= 1 & size(Im, 1) >= ly; 
lx_valid = double(lx(valid)); 
ly_valid = double(ly(valid)); 
c = sub2ind(size(Im), ly_valid, lx_valid); 
locmax = max(Im(c)); 
imshow(Im);plot(lx_valid,ly_valid,'go'); 
```

# qt - 如何将 qt4_wrap_cpp 输出移动到文件夹？

> ID：12749910
> 
> 赞同：0
> 
> 时间：2012-10-05T15:59:10.517
> 
> 标签：qt, cmake

我已经调用了`qt4_wrap_cpp(moc_outfiles ${moc_header})`并且我希望将该调用 ( `moc_outfiles`) 的结果放在一个名为`GeneratedFiles/Debug`.

到目前为止，我尝试制作自己的自定义方法，但由于解析错误而失败`Parse error. Expected "(", got quoted argument with text "${it}".`

```
FOREACH (it ${moc_headers})
    QT_MOC_EXECUTABLE ${it} -o ./GeneratedFiles/Debug/moc_"${it}"
ENDFOREACH(it) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:12:59.557

看起来你需要这个[`execute_process`](http://www.cmake.org/cmake/help/v2.8.9/cmake.html#command%3aexecute_process)命令。此外，您可能不希望`${it}`在输出文件名中包含引号：

```
FOREACH(it ${moc_headers})
    EXECUTE_PROCESS(COMMAND ${QT_MOC_EXECUTABLE} ${it} -o ./GeneratedFiles/Debug/moc_${it})
ENDFOREACH(it) 
```

您可能还需要添加`WORKING_DIRECTORY`参数 - 我不熟悉 Qt 的 moc exe。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-15T16:21:42.410

`qt4_wrap_cpp`您可以使用宏来代替使用`qt4_generate_moc`，它需要一个要移动的文件和一个输出路径。使用此宏，您可以构建类似于所做的事情`qt4_wrap_cpp`。

```
#qt4_wrap_cpp( moc_outfiles ${moc_headers} )
foreach(moc_hdr ${moc_headers})
  GET_FILENAME_COMPONENT(moc_name ${moc_hdr} NAME_WE)
  SET (moc_out ${PROJECT_SOURCE_DIR}/GeneratedFiles/moc_${moc_name}.cxx)
  QT4_GENERATE_MOC( ${moc_in} ${moc_out} )
  LIST (APPEND MOC_SOURCES ${moc_out})
endforeach(moc_hdr) 
```

# ios - facebook登录完成后更改视图

> ID：12749915
> 
> 赞同：3
> 
> 时间：2012-10-05T15:59:17.710
> 
> 标签：ios, facebook

我正在使用 Facebook SDK 在我的 iOs 应用程序中集成 Facebook 登录。有没有办法改变用户登录后facebook登录按钮将我带回的视图？现在它带我回到点击 FBLoginView 的视图。

模式化：

现在我有： View1 -> FacebookView -> View1

我想要什么： View1 -> FacebookView -> View2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:23:38.657

当然，当您在 FBSession 上调用 openActiveSession... 时，请在 completionHandler 块中调用 h 处理程序方法。像这样的东西：

```
[FBSession openActiveSessionWithReadPermissions:permissions
                                          allowLoginUI:YES
                                     completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
                                         [self sessionStateChanged:session state:state error:error]];
                                     }]; 
```

在这个处理程序中，您可以在 facebook 返回后根据状态执行操作。像这样的东西：

```
- (void)sessionStateChanged:(FBSession *)session
                        state:(FBSessionState)state
                        error:(NSError *)error
{
    switch (state) {
        case FBSessionStateOpen:
            // login successful
            // do something - like push to another view controller
            break;
        case FBSessionStateClosed:
        case FBSessionStateClosedLoginFailed:
            // show an error prompt or something
            break;
        default:
            break;
    }
} 
```

查看 facebook 文档以及示例。其中很多都是直接从他们的例子中提取的。

# c# - 使用 c# 运行带有 activex 对象的 dll

> ID：12749921
> 
> 赞同：2
> 
> 时间：2012-10-05T15:59:31.663
> 
> 标签：c#, javascript, .net, com, activex

嗨，我有以下用于将活动 x 组件配置为的 c# 代码

```
using System;
using System.Reflection;
using System.Runtime.InteropServices;
using System.Text;
using System.Threading;
using System.Windows.Forms;
using Microsoft.Win32;

namespace Kosmala.Michal.ActiveXTest
{
    /// <summary>
    /// Summary description for Class1.
    /// </summary>
    [ProgId("Dendrite.WebForce.MMP.Web.OurActiveX")]
    [ClassInterface(ClassInterfaceType.AutoDual), ComSourceInterfaces(typeof(ControlEvents))] //Implementing interface that will be visible from JS
    [Guid("121C3E0E-DC6E-45dc-952B-A6617F0FAA32")]
    [ComVisible(true)]
    public class ActiveXObject
    {
        private string myParam = "Empty"; 

        public ActiveXObject()
        {

        }

        public event ControlEventHandler OnClose;

        /// <summary>
        /// Opens application. Called from JS
        /// </summary>
        [ComVisible(true)]
        public void Open()
        {
            //TODO: Replace the try catch in aspx with try catch below. The problem is that js OnClose does not register.
            try
            {

                MessageBox.Show(myParam); //Show param that was passed from JS
                Thread.Sleep(2000); //Wait a little before closing. This is just to show the gap between calling OnClose event.
                Close(); //Close application

            }
            catch (Exception e)
            {
                //ExceptionHandling.AppException(e);
                throw e;
            }
        }

        /// <summary>
        /// Parameter visible from JS
        /// </summary>
        [ComVisible(true)]
        public string MyParam
        {
            get
            {
                return myParam;
            }
            set
            {
                myParam = value;
            }
        }

        [ComVisible(true)]
        public void Close()
        {
            if(OnClose != null)
            {
                OnClose("http://otherwebsite.com"); //Calling event that will be catched in JS
            }
            else
            {
                MessageBox.Show("No Event Attached"); //If no events are attached send message.
            }
        }

        /// <summary>
        /// Register the class as a control and set it's CodeBase entry
        /// </summary>
        /// <param name="key">The registry key of the control</param>
        [ComRegisterFunction()]
        public static void RegisterClass ( string key )
        {
            // Strip off HKEY_CLASSES_ROOT\ from the passed key as I don't need it
            StringBuilder   sb = new StringBuilder ( key ) ;

            sb.Replace(@"HKEY_CLASSES_ROOT\","") ;
            // Open the CLSID\{guid} key for write access
            RegistryKey k   = Registry.ClassesRoot.OpenSubKey(sb.ToString(),true);

            // And create   the 'Control' key - this allows it to show up in
            // the ActiveX control container
            RegistryKey ctrl = k.CreateSubKey   ( "Control" ) ;
            ctrl.Close ( ) ;

            // Next create the CodeBase entry   - needed if not string named and GACced.
            RegistryKey inprocServer32 = k.OpenSubKey   ( "InprocServer32" , true ) ;
            inprocServer32.SetValue (   "CodeBase" , Assembly.GetExecutingAssembly().CodeBase ) ;
            inprocServer32.Close ( ) ;
                // Finally close the main   key
            k.Close (   ) ;
            MessageBox.Show("Registered");
        }

        /// <summary>
        /// Called to unregister the control
        /// </summary>
        /// <param name="key">Tke registry key</param>
        [ComUnregisterFunction()]
        public static void UnregisterClass ( string key )
        {
            StringBuilder   sb = new StringBuilder ( key ) ;
            sb.Replace(@"HKEY_CLASSES_ROOT\","") ;

            // Open HKCR\CLSID\{guid} for write access
            RegistryKey k = Registry.ClassesRoot.OpenSubKey(sb.ToString(),true);

            // Delete the 'Control' key, but don't throw an exception if it does not exist
            k.DeleteSubKey ( "Control" , false ) ;

            // Next open up InprocServer32
            //RegistryKey   inprocServer32 = 
            k.OpenSubKey (  "InprocServer32" , true ) ;

            // And delete the CodeBase key, again not throwing if missing
            k.DeleteSubKey ( "CodeBase" , false ) ;

            // Finally close the main key
            k.Close ( ) ;
            MessageBox.Show("UnRegistered");
        }

    }

    /// <summary>
    /// Event handler for events that will be visible from JavaScript
    /// </summary>
    public delegate void ControlEventHandler(string redirectUrl); 

    /// <summary>
    /// This interface shows events to javascript
    /// </summary>
    [Guid("68BD4E0D-D7BC-4cf6-BEB7-CAB950161E79")]
    [InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
    public interface ControlEvents
    {
        //Add a DispIdAttribute to any members in the source interface to specify the COM DispId.
        [DispId(0x60020001)]
        void OnClose(string redirectUrl); //This method will be visible from JS
    }
} 
```

我已经创建了 testpage .html 作为

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" > 

<html>
  <head>
    <title>WebForm1</title>
    <meta name="GENERATOR" Content="Microsoft Visual Studio .NET 7.1">
    <meta name="CODE_LANGUAGE" Content="C#">
    <meta name=vs_defaultClientScript content="JavaScript">
    <meta name=vs_targetSchema content="http://schemas.microsoft.com/intellisense/ie5">
  </head>
  <body onload="OpenActiveX()">

  <!-- Our activeX object -->
  <OBJECT id="OurActiveX" name=”OurActiveX" classid="clsid:121C3E0E-DC6E-45dc-952B-A6617F0FAA32" VIEWASTEXT codebase="OurActiveX.cab"></OBJECT> 

  <!-- Attaching to an ActiveX event-->
<script language="javascript">
           function OurActiveX::OnClose(redirectionUrl)
       {
        alert(redirectionUrl);   <!-- http://otherwebsite.com should be returned-->
                    //window.location = redirectionUrl;
           }
</script>

<script language="javascript">
    //Passing parameters to ActiveX object and starting application
function OpenActiveX()
{
    try
    {
        document.OurActiveX.MyParam = "Hi I am here." //Passing parameter to the ActiveX
        document.OurActiveX.Open(); //Running method from activeX
    }
    catch(Err)
    {
        alert(Err.description);
    }
}   

</script>

  </body>
</html> 
```

现在，当我在 Internet Explorer 浏览器中运行 html 页面时，出现以下错误

对象不支持属性或方法打开

你能帮我解决这些问题吗

等待您的宝贵意见和回复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T08:18:39.233

您必须使用 Microsoft .Net Framework *regasm.exe*工具注册您的 ActiveX 控件。

要注册您的 ActiveX 控件，请使用以下步骤：

1.  打开命令提示符。
2.  导航您要定位的 .Net 框架的安装目录（例如 c:\windows\Microsoft.NET\Framework）
3.  键入以下命令

    **regasm.exe /tlb /codebase "你的 ActiveX.dll 的路径"**

4.  请注意，如果您在 x64 位操作系统上运行，您必须为 x86 和 x64 Internet Explorer 注册 ActiveX 控件。对于 x64 Internet Explorer，您必须导航到您所针对的 .Net Framework 的 x64 目录并执行以下命令：

    **regasm.exe /tlb /codebase “x64 ActiveX.dll 的路径”**

在注册 ActiveX dll 期间，您应该会看到一个消息框，其中显示“已注册”消息。请不要，如果您使用平台目标“任何 CPU”编译您的 dll，您可以使用相同的 dll 进行注册。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T18:38:10.943

在 IE 中打开测试页面后，从工具栏上的工具按钮打开 Internet 选项（在 IE9 中），选择**安全**页面，单击**自定义**按钮并向下滚动到“ActiveX 控件和插件”部分。您可以在此处启用 ActiveX 控件的提示/启用及其脚本。

默认情况下，未签名的 ActiveX 控件在 IE 中被阻止，已签名的 ActiveX 控件将引发提示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T18:49:12.440

我会尝试取消注册 DLL、更改 GUID 并重新注册您的课程。由于设置`MyParam` *似乎*有效，可能是`Open()`稍后添加的，并且接口定义没有重新注册。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-05T17:35:12.343

从方法名称中删除静态，你会没事的！

# gwt - 硒和 GWT 问题

> ID：12749922
> 
> 赞同：1
> 
> 时间：2012-10-05T15:59:34.620
> 
> 标签：gwt, selenium, webdriver

我成功地创建了一个页面上的 Selenium 测试并检查 2/3 的东西。

“运行为 JUnit 测试”运行良好，显示页面并测试一些 GUI 元素（在 URL 处连接到 GWT 托管模式`http://127.0.0.1:8888/index.html?gwt.codesvr=127.0.0.1:9997`：）

但是，如果我尝试使用 maven 测试任务“mvn test”，IE 窗口会显示“开发模式需要 Google Web Toolkit Developer Plugin”...

我已经看到 FF 可能有解决方法，您可以直接使用 Webdriver 代码添加插件。但我找不到 IE(7)。

任何帮助表示感谢！

# javascript - 移动 Safari 不接受绑定到此的 setTimeout 函数

> ID：12749925
> 
> 赞同：1
> 
> 时间：2012-10-05T15:59:45.897
> 
> 标签：javascript, mobile-safari, bind, settimeout

`setTimeout`我有一个包含函数的 javascript 对象（被实例化多次） 。功能与此类似：

```
setTimeout(function() {
    this.function();
}.bind(this), this.interval); 
```

这适用于除 Mobile Safari 之外的所有浏览器。在我对发生的事情进行测试期间，错误是添加`.bind(this)`到`setTimeout`. 虽然当我`.bind(this)`在 Safari 中删除它时它可以工作，但它在其他浏览器上停止工作......有谁可以解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T01:05:12.597

显然[没有移动版 Safari 支持 function.bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind#Browser_compatibility)。MDN 确实为它提供了一个[polyfill](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind#Compatibility)。

# scala - 使用 Salat/Casbah 对 Scala 案例类进行持久性验证

> ID：12749927
> 
> 赞同：1
> 
> 时间：2012-10-05T15:59:51.533
> 
> 标签：scala, mongodb, casbah, salat

假设我有一个使用 Salat/Casbah/Mongo 堆栈持久化的 Scala 案例类，我想设置预持久性验证逻辑，就像我可以在 Rails 中使用 ActiveRecord 挂钩或在 Java 中使用 JSR 303 bean 验证一样轻松地做到这一点。

也许有一种更好的方法可以在功能范式中考虑这一点，但我想完成类似以下的事情：

```
case class SomeItem(
  id: ObjectId = new ObjectId,
  someProperty: String) {

  @PrePersistence
  def validate() = {
     //perform some logic
     //fail document save in certain conditions
  }
} 
```

我无法找到有关如何在 Salat 中执行此类操作的任何文档。我确实看到了一个 @Persist 注释，但它似乎专注于序列化特定值而不是创建钩子。

似乎一种选择是为我的案例类覆盖 SalatDAO 中的保存方法。有没有人有这方面的例子或知道更好的内置方法来处理与预持久性事件相关的验证？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:25:02.693

萨拉特开发商在这里。

是的，`@Persist`只是为了确保不在构造函数中的字段被序列化——这对于在 MongoDB 中操作数据特别有用。一个示例是，您希望确保所有字段都填充了一个值，以便您可以进行合理排序，但该值`Option`可能不存在。

不幸的是，Java 驱动程序不像 Ruby 驱动程序那样提供生命周期回调:(

但是你想要的应该很容易做到。[请在https://github.com/novus/salat/issues](https://github.com/novus/salat/issues)提交问题并描述您希望验证的行为方式 - 我们可以开始讨论，我可以尝试在 1.9.2 版本中为您提供一些信息.

# sql - SQLite NOT IN 查询很慢

> ID：12749930
> 
> 赞同：6
> 
> 时间：2012-10-05T16:00:14.720
> 
> 标签：sql, performance, sqlite

我有两张桌子 -`Keys`和`KeysTemp`. `KeysTemp`包含应`Keys`使用该`Hash`字段合并的临时数据。这是查询：

```
SELECT
    r.[Id]
FROM
    [KeysTemp] AS k
WHERE
    r.[Hash] NOT IN (SELECT [Hash] FROM [Keys] WHERE [SourceId] = 10) 
```

我在两个表`SourceId`和`Hash`字段上都有索引：

```
CREATE INDEX [IdxKeysTempSourceIdHash] ON [KeysTemp]
(
    [SourceId],
    [Hash]
); 
```

表的索引相同`Keys`，但查询仍然很慢。临时表中有 5 行，主表中有大约 60000 行。通过哈希查询大约需要 27 毫秒，但是查询这 5 行大约需要 3 秒。

我也尝试过拆分索引，即为`SourceId`and创建不同的索引`Hash`，但它的工作方式相同。`OUTER JOIN`在这里工作得更糟。如何解决这个问题？

**更新** 如果我`WHERE [SourceId] = 10`从查询中删除它会在 30 毫秒内完成，那很好，但我需要这个条件 :)

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T16:05:51.007

也许

```
select k.id
from keytemp as k left outer join keys as kk on (k.hash=kk.hash and kk.sourceid=10)
where kk.hash is null; 
```

? 假设，`r`即`k`。你也试过`not exists`吗？我不知道它是否以不同的方式工作......</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:08:47.487

我会做 ：

```
SELECT
    r.[Id]
FROM 
    [KeysTemp] AS k
WHERE
    r.[Id] NOT IN (SELECT A.[Id] FROM [KeysTemp] AS A, [Keys] AS B WHERE B.[SourceId] = 10 AND A.[Hash] == B.[Hash]) 
```

您列出 KeysTemp 中存在的所有元素（很少），然后在 KeysTemp 中取不这些元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:02:10.830

如果只有几个新键，你可以试试这个：

```
SELECT
    r.[Id]
FROM
    [KeysTemp] AS k
WHERE
    r.[Id] NOT IN (SELECT kt.[Id] FROM [Keys] AS k1
                   INNER JOIN [KeysTemp] AS kt ON kt.Hash = k1.Hash
                   WHERE k1.[SourceId] = 10) 
```

`KeysTemp`应该在`Hash`列和列`Keys`上都有一个索引`SourceId`。

# jquery - jQuery 和主题选项

> ID：12749935
> 
> 赞同：0
> 
> 时间：2012-10-04T18:45:04.773
> 
> 标签：jquery

实际上，我的元框文本字段上有两个复选框，该文本字段上方还有两个元框文本字段。在我的主题选项中还有两个文本字段，我必须在其中放置一些 html 和 javascript 代码。所以这是我的代码：

元框文本字段和复选框：

```
<input type="textarea" id="c" value="Your Name" />
<input type="textarea" id="d" value="My Name" />
<input type="checkbox" id="a" />
<input type="checkbox" id="b" />
<input type="textarea" id="e" /> 
```

主题选项文本字段：

```
<input type="textarea" id="f"  />
<input type="textarea" id="g"  /> 
```

我必须将 javascript 放在主题选项文本字段中，有点像这样：

```
<div>
<script type=text/javascript> name: 'My Name is/', name2: 'Your name is/', </script> 
</div> 
```

现在真正的担心来了。我希望当我单击带有 id 'a' 的复选框时，带有 id 'f' 的主题选项文本字段中的代码将被放入带有 id 'e' 但几乎没有修改的元框文本字段中。我需要的修改是，来自具有 id 'c' 和 'd' 的元框文本字段的数据将首先添加到从具有 id 'f' 的主题选项文本字段中获取的代码中，这样的方式是id为'c'的元框文本字段的值被添加到“名称：我的名字是/（这里将是id为'c'的文本字段的值）”和id为'd的元框文本字段的值' 被添加到“name2：你的名字是/（这里将是带有 id 'd' 的文本字段的值）”。

我还在为这些复选框行为使用 jquery 代码。这是我的 jQuery 代码。

```
$(function () {
$('#a, #b').change(function () {
    var $a = $('#a'), $b = $('#b'), $c = $('#c');
    if (this.id == 'a' && this.checked) {
       $c.val('Hello World!');
       $b.prop('checked', false);
    } else if (this.id == 'b' && this.checked) {
       $c.val('Not hello World!'); 
       $a.prop('checked', false);
    } else {
       $c.val('');
    }
});
}); 
```

​ 显然，这个 jQuery 代码存在缺陷，因为我不希望我的元框文本字段具有 id 'c' 的 Hello world 或 Not Hello World 之类的值。如前所述，我想要该字段的值。请在这方面帮助我。我非常沮丧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:59:20.033

首先，使用`jQuery`代替`$`. 在 WordPress 环境中，jQuery 以“noconflict”模式运行，因此该`$`变量不可用。

其次，我会稍微重写您的事件处理程序：

```
jQuery('#a, #b').change(function () {
    var $this = jQuery(this), // Get a handle on the checkbox we just clicked.
        $c = jQuery('#c'),    // Get a handle on the textbox.
        $d = jQuery('#d'),    // Get a handle on the textbox.
        $e = jQuery('#e'),    // Get a handle on the textbox.
        $f = jQuery('#f'),    // Get a handle on one of our default values.
        $g = jQuery('#g');    // Get a handle on one of our default values.

    if ($this.attr('id') == 'a' && $this.is(':checked')) {
       // Clicking checkbox a will add the content of c and f and place it in e
       // It will also uncheck checkbox b.

       $e.val( $c.val() + ' ' + $f.val() );
       $b.removeAttr('checked');
    } else if ($this.attr('id') == 'b' && $this.is(':checked')) {
       // Clicking checkbox b will add the content of d and g and place it in e
       // It will also uncheck checkbox a.

       $e.val( $d.val() + ' ' + $g.val() );
       $a.removeAttr('checked');
    } else {
       $e.val('');
    }
}); 
```

这似乎可以处理您描述的场景。如果没有，请编辑您的问题以逐步解释每个复选框更改时应该发生的情况，以便我们可以相应地编写脚本。

# jquery - jquery自动选择下拉值

> ID：12749937
> 
> 赞同：0
> 
> 时间：2012-10-05T16:00:43.987
> 
> 标签：jquery

我在 miva 系统中工作，所以只能说这是一场噩梦。我有以下必须使用的代码

```
<select name="ShippingMethod">
<option value="mvfedexsoap:FEDEX_2_DAY">FedEx 2Day® ($15.91)</option>
<option value="mvfedexsoap:GROUND_HOME_DELIVERY">FedEx Home Delivery® ($13.36)</option>
<option value="mvfedexsoap:PRIORITY_OVERNIGHT">FedEx Priority Overnight® ($20.15)</option>
<option value="mvfedexsoap:STANDARD_OVERNIGHT">FedEx Standard Overnight® ($18.41)</option>
</select> 
```

我在这家商店中唯一的选择是使用 jquery。我对 jquery 还很陌生，所以我很感激你愿意给我的任何帮助。

在页面加载时，我希望它选择最便宜的选项。我想到的方法是以某种方式收集选项中的文本，解析出价格，然后比较并选择最低值。如果你有什么可以帮助我提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:09:21.820

试试这个**[jsFiddle 示例](http://jsfiddle.net/j08691/JeVV6/)**。

```
var idx = 0;
var lowest = 9999;
$('select[name=ShippingMethod] option').each(function(i) {
    val = parseFloat($(this).text().split('$')[1]);
    if ( val < lowest) {
        idx = i;
        lowest = val;
    }
});
$('select[name=ShippingMethod] option:eq('+idx+')').prop('selected', true); 
```

​基本上这会遍历选项文本值，将它们拆分并解析为浮点数，然后找到最小值并选择它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:30:26.653

```
$("option").each(function(index) { 
 // alert(index + ': ' + $(this).text()); 
 var text = $(this).text();//get text for each option

  var price = text.split("$");//split text at the $ symbol

  var final_price = price[1].replace(/[()]/g,'');//remove all remaining parenthesis from string

  alert(final_price);

}); 
```

我很快把它放在一起，从每个文本中单独获取价格，这样你就可以对其进行排序。希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:49:15.663

而不是使用 using`.each`和那些凌乱的解决方法，您可以在 3 行中实现您所需要的**;-)**

**现场演示：http:** [//jsfiddle.net/oscarj24/ZgEbH/](http://jsfiddle.net/oscarj24/ZgEbH/)

```
 prices = $("select[name=ShippingMethod] option").map(function(){ return parseFloat($(this).text().split('$')[1]); }).get();
 lowPrice = Math.min.apply(Math, prices);
 $("select[name=ShippingMethod] option:contains('" + lowPrice + "')").prop("selected", true); 
```

# jquery - jQuery dataTables CSV 服务器数据

> ID：12749946
> 
> 赞同：2
> 
> 时间：2012-10-05T16:01:25.000
> 
> 标签：jquery, csv, xmlhttprequest, datatables

我遇到了一个困难的问题，我有一个系统将 CSV 文件生成到我的 Web 服务器上的目录中，但我需要使用 dataTables /jquery 显示该数据。我无法将 CSV 数据更改为 JSON，因为其他系统现在正在使用该数据。

在将转换后的数据提供给 dataTables 之前，我尝试使用 XMLHttpRequest 获取我的 csv 文件并通过回调转换函数触发它。我发现的问题是，在 DOM 准备好之前，CSV 的 GET 总是不完整的，所以我得到一个空的 dataTable。我还没有看到告诉 dataTables 重新加载数据的方法 - 也许我错过了？

我已经查看了在 dataTable 中使用 fnServerData 来替换 XMLHTTPRequest。但在这种情况下，我似乎无法掌握原始数据——它似乎一直试图将其解释为 JSON。

*   有没有人成功处理过服务器端 CSV 数据进入 dataTables？
*   关于继续使用的最佳方法的任何观点 - XMLHttpRequest 以及可能对 dataTables 的某种刷新调用？
*   如果我使用 fnServerData，如何获取原始 CSV 数据？我还应该提到我的 CSV 包含一个标题行，所以无论如何我都必须删除它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T00:21:35.710

在[dataTables 论坛中，一些人发布了一条消息](http://datatables.net/forums/discussion/comment/12756#Comment_12756)，说明他们如何能够使用 csv2table 插件将 CSV 文件加载到 dataTables 中。

# ssrs-2008 - 在代码中应用报告过滤器

> ID：12749948
> 
> 赞同：2
> 
> 时间：2012-10-05T16:01:31.317
> 
> 标签：ssrs-2008, reporting-services

*我的具体问题可能过于本地化，但我要问的一般问题是我确信其他人会问并想知道的问题：*

一般问题：在 Sql Server Reporting Services 中，是否可以在代码中对报表应用过滤器？如果没有，是否可以根据变量的值在报告过滤器中使用分支，您能否指出我的文档或解释如何执行此操作。

* * *

*下面是我的具体示例，以扩展我上面的意思，以防我措辞不好：*

我正在学习 SSRS，而文档和谷歌都快来不及了。

期望的效果是我们有一个基于事件跟踪系统的报告。在这个系统中，我们有不同的团队可以跟踪事件：IT Ops、开发、安全等。每个团队都有分配的团队成员。

*   我们有一个显示所有事件的基本报告。
*   我们添加了一个名为“LimitByTeam”的布尔参数，如您所料，它会在报告上生成一个 CheckBox。
*   我们添加了一个接受多个值的字符串参数。允许的值来自列出团队的数据集。这在报告中添加了预期的下拉列表，允许用户选择一个或多个团队。
*   我们添加了一个包含团队和团队成员的数据集。

如果未选中 CheckBox，我们希望显示所有事件。（默认）

如果选择它，我们希望根据创建事件单的人的登录 ID 过滤报告。

如果我在 SQL 中这样做，我会这样做

```
Select 
   (ticket fields) 
From 
   Table 
WHERE TicketCreator IN (
             Select LoginId FROM TeamMembersTable 
             WHERE TeamName in ('IT Ops', 'Developers')) 
```

在 SQL 或 VB 等中，这很简单。

在 SSRS 中，我并没有弄清楚如何做到这一点。我已经弄清楚我可以使用自定义代码使用 VB 执行更复杂的逻辑（它似乎是 VB.NET。万岁！熟悉的领域）

所以我添加了自定义代码并验证我可以读取报告参数的值，但是如果参数值为 True，我终生无法弄清楚如何应用过滤器。这就是我所拥有的。

```
Public Sub ApplyTeamFilter() 

    ' Report.Parameters("LimitByTeam") is a 
    ' boolean report parameter that I'm able to access
    ' so I've got the IF statement worked out

    If Report.Parameters("LimitByTeam").Value = True Then
                 ' Pseudo-code - I'm looking for something like Report.Filters.Add(filterstatement)
                 ' Alternatively a way to change this to a function to return a list of items from 
                 ' the Team MembersTable table and use it in a custom expression.
     End If
End Sub 
```

问题是我似乎无法在 Report 对象上找到 Filters 属性，或者任何可以让我找到它的方法。因为我在那里找不到它，所以我将搜索扩展到[MSDN 库的这一部分中的](http://msdn.microsoft.com/en-us/library/bb522713.aspx)所有内容，但找不到它，或者任何与我正在尝试的方法相似的东西。

我也在尝试做这样的事情，因为我想我看到了一种使用这个功能的方法：

```
Public Function IsLoginIdInTeam(ByVal LoginId as String, byVal Team As String) As Boolean

    '  Report.Parameters("LimitByTeam") is a 
    ' boolean report parameter that I'm able to access
    ' so I've got the IF statement worked out

    If Report.Parameters("LimitByTeam").Value = False Then
        Return True ' Default
    Else
        ' Access the TeamMembers table and look for a match
                ' Something like 
                ' Convert.ToBoolean(Report.DataSets!TeamMembers.Compute(Count, "TeamName = '" & Team & "' AND LoginId = '" & LoginId & "'")

     End If
End Function 
```

但我也不知道如何访问报告中的数据集，更不用说与它们交互的语法了。伪代码适用于 System.Data.DataTable，但我怀疑 SSRS 数据集是另一种野兽。

我错过了一些非常明显的东西吗？我是否应该放弃在报告中以这种方式进行过滤，并尝试另一个轨道，例如更改 DataSet 中的原始查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:46:40.487

我不是 SSRS（或 SQL 中的布尔参数）的忠实粉丝`BIT`。你不能写像这样的东西

```
WHERE @MyBool OR @MyOtherBool 
```

它需要是

```
WHERE @MyBool = 1 or @MyOtherBool = 1 
```

因此，如果我有一个 SSRS 报告，其中包含一个名为的布尔值`MyBoolParam`和一个名为的多值文本参数`MyMultiSelectTextParam`，则这样的 SQL 查询将起作用：

```
SELECT 
   MyField,
   MyOtherField
FROM
   MyTable t
WHERE
   @MyBoolParam = 1
   OR
   t.MyField IN ( @MyMultiSelectTextParam) 
```

（我首选的布尔参数替代方案实际上是一个带有可能值的字符串，但它会在查询中以相同的方式处理。）

如果您不能轻松更改您的 SQL 查询（例如使用第三方 SP），那么您也可以通过向 SSRS 数据集添加过滤器来完成同样的事情。右键单击“报告数据”窗格中的数据集，然后查看“数据集属性”。Filters 窗格将允许您添加为每一行评估的条件。我没有将这些与多值参数一起使用，但 IN 运算符应该适用于此。

# asp.net-mvc - 在 ASP.NET MVC 中更新多个模型

> ID：12749958
> 
> 赞同：2
> 
> 时间：2012-10-05T16:02:11.623
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first

我需要从首次在 MVC 3 应用程序中注册的新用户（首先使用 EF 代码）捕获三种不同类型的信息。理想情况下在一页上（将有三个标签）

1.  用户信息
2.  扩展用户信息
3.  用户选择的好处

帐户控制器的注册方法应在触发时填充用户表。我需要一些关于如何最好地捕获其他数据的建议。我是否为附加数据创建了一个 UserDetails 模型？如果是这样，是否可以从同一页面更新？（这将是 Account/Register 页面。我是否需要在帐户控制器中执行某些操作，或者模型之间的关系是否足够？

有什么好的例子可以解释这一点吗？我尝试了 MVC Contoso University 之一，但看不到我是否能做到这一点。

非常欢迎任何建议:)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:46:35.647

您可以创建一个视图模型，该模型将您需要的其他模型的所有字段组合在一起，并强烈键入您的视图。一旦用户将信息提交回控制器，您将适当地处理每个属性。

```
public class RegisterViewModel()
{
  //Userinfo
  public string UserName {get; set;}
  ...
  //Extended user info
  public string FirstName {get; set;}
  public string LastName{get; set;}
  ...
  //Benefits
  public string BenefitName {get; set;}
  ...
} 
```

进而

```
[HttpPost]
public ActionResult Register (RegisterViewModel viewModel)
{
  //grab the user info from the view model and process it
  viewModel.UserName...

  //grab the extended info and process it
  viewModel.FirstName...
  //grab the benefit info and process it
  viewModel.BenefitName...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:05:33.390

一个视图只能有一个模型。你可以把你需要的所有信息放在那里。这是最简单的解决方案。您的视图模型不必映射到您在其他地方使用的类，因此您可以在一个模型中拥有用户信息、扩展用户信息和用户选择的好处。

或者，您可以将其设置为两步或三步的过程，但您说您不希望这样做。

# maven - 我应该如何在 STS 中设置 Maven/Groovy 项目？

> ID：12749959
> 
> 赞同：1
> 
> 时间：2012-10-05T16:02:12.170
> 
> 标签：maven, groovy, sts-springsourcetoolsuite

我有一个使用一些 Java 和一些 Groovy 的项目，而且它都是用 Maven 构建的。我们使用 GMaven 插件来编译 Groovy。我一直在使用 Eclipse，并且已经厌倦了“生命周期未涵盖的插件执行”消息，这表明 Eclipse 无法执行我的命令行所做的事情（我尝试添加忽略/执行配置来修复它，但它永远无法正常工作），所以我切换到 Spring Tool Suite，它声称拥有完整的 Groovy 支持。我应该如何设置这一切？到目前为止，我的体验与使用常规 Eclipse 完全相同，但鉴于 SpringSource 负责 Groovy，我认为一定有办法做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:08:53.227

你读过这个线程吗？

[http://forum.springsource.org/showthread.php?130130-Working-with-Mavenized-Grails-projects-in-GGTS-3-1-0-](http://forum.springsource.org/showthread.php?130130-Working-with-Mavenized-Grails-projects-in-GGTS-3-1-0-) *Updated-for-3-1-0-release* /page2

对于 grails 项目，您不需要使用 gmaven 或 groovy-eclipse-compiler。您必须使用 3.1.0 STS（实际上尚未发布，但您可以得到这个

您还必须使用 Grails 2.1.1。

您可以通过访问此下载页面秘密获得 3.1.0 版本：

[http://www.springsource.org/downloads/sts-ggts](http://www.springsource.org/downloads/sts-ggts)

不要单击链接，而是复制它们并将 3.1.0 替换为 3.0.0。

# javascript - 用于简单数据库访问的慢速 ajax

> ID：12749962
> 
> 赞同：0
> 
> 时间：2012-10-05T16:02:20.207
> 
> 标签：javascript, asp.net, ajax

在测试 setInterval() 时，我的 ajax 请求加载时间很慢。它非常简单，其他具有更复杂请求的页面在不到一秒的时间内终止，而这个非常简单的页面在 10-12 之后终止。如果不使用 setInterval()，它仍然需要很长时间，并且它使用与其他页面相同的布局。

脚本示例：

```
 document.getElementById("test").innerHTML = "Starting";
    if(window.XMLHttpRequest)
    {
        xmlhttp = new XMLHttpRequest();
    }

    else
    {
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange = function()
    {
        if(xmlhttp.readyState == 4 && xmlhttp.status == 200)
        {
            document.getElementById("test").innerHTML = xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET", "/TestLive.cshtml", true);
    xmlhttp.send(); 
```

* * *

慢速服务器页面 (ASP.NET)：

```
Response.Expires = -1;

var db = Database.Open("mydb");
string query = "select Name from Game where ID='97';";

Response.Write(db.QuerySingle(query).Name); 
```

快速示例：

```
 Response.Expires = -1;

string query = "select * from Season where Season.Game = 'Football' and Season.End > '" + DateTime.Now.Add(new TimeSpan(-8,0,0)).ToString("yyyy-MM-dd") + "';";

var db = Database.Open("mydb");
var result = db.Query(query);

Response.Write("<select id=\"chosenSeason\" onchange=\"setDraftSeason()\">");
Response.Write("<option selected=\"selected\">Choose a Season</option>");
foreach (var season in result)
{
    Response.Write("<option value=\"" + season.ID + "\">");
    Response.Write(season.Name);
    Response.Write(" (" + season.Start.ToString("dd-MM-yyyy") + " - " + season.End.ToString("dd-MM-yyyy") + ")");
    Response.Write("</option\">");
}
Response.Write("</select>"); 
```

编辑：这似乎与使用布局页面访问脚本有关。不过，所有快速页面都使用相同的设置。

# grails - 为什么 Class.forName 不适用于 grails 域类

> ID：12749963
> 
> 赞同：1
> 
> 时间：2012-10-05T16:02:25.337
> 
> 标签：grails, reflection, groovy

我知道使用`Class.forName`加载 grails 域类不起作用，但我不确定为什么会这样。我猜有某种 grails 魔法正在发生，但很高兴了解它是什么。

我最终使用

```
GrailsDomainClass dc = grailsApplication.getDomainClass('mypack.myclass' )
def newDomainObject = dc.clazz.newInstance() 
```

但我不确定为什么只是做`Class.forName('mypack.myclass')`不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T16:16:59.047

Grails 使用自定义类加载器，因此您需要将 3-arg 变体与 Grails 使用并注册为上下文类加载器的类加载器一起使用：

```
Class clazz = Class.forName('mypack.myclass', true, Thread.currentThread().contextClassLoader)
def newDomainObject = clazz.newInstance() 
```

# c# - 生成唯一的随机数

> ID：12749964
> 
> 赞同：2
> 
> 时间：2012-10-05T16:02:28.987
> 
> 标签：c#, asp.net

我正在将学生 ID 作为随机数输入数据库

```
 int num = r.Next(1000);
  Session["number"] = "SN" + (" ") + num.ToString(); 
```

但是有没有机会得到重复的号码？我怎样才能避免这种情况？

编辑 :: 我有一个身份列，学生 ID 与 ID 是分开的，我将从 UI 将随机学生 ID 输入数据库。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T16:06:23.417

在数据库中拥有一个仅是整数唯一 ID 的列是一项**非常常见的任务。**以至于我曾经使用过的每个数据库都有一个特定的列类型、函数等来处理它。它会根据您使用的任何特定数据库而有所不同，但您应该弄清楚它是什么并使用它。

*   *您需要一个唯一*的值，而不是*random*。两者是不同的。随机数重复，它们不是唯一的。唯一的数字也不是随机的。例如，如果您只是从 0 开始递增数字，它将是唯一的，但这绝不是随机的。
*   您可以使用唯一的 GUID，但它是 128 位。这是相当大的。大多数数据库只会有一个计数器，每次添加项目时它们都会递增，因此 32 位通常就足够了。这将为您节省大量空间。增加计数器也比计算 GUID 的新值更快。对于往往涉及添加大量项目的数据库操作，这可能很重要。
*   正如 Jodrell 在评论中提到的，如果您使用 GUID 或其他大字段，还应该考虑索引的大小。对于需要更多位的列，存储和维护该索引将更加昂贵（在时间和空间上）。
*   如果您尝试自己做某事，那么您很有可能会做错。要么你的算法不是完全唯一的，它会由于不正确的同步而产生竞争条件，它会因为过度同步而降低性能，它会显着更大，因为这是降低冲突风险的方法，等等。在最终，数据库将可以访问您无法访问的工具；让它照顾它，这样你就不必担心你会搞砸什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T16:08:27.223

当然，您很有可能会得到一个重复的号码。Next 只是给你一个 0 到 1000 之间的数字，但不能保证这个数字不会是 Next 过去返回的某个数字。

如果您尝试使用唯一值，请考虑使用 Guids 而不是整数，或者使用不断增加的整数值而不是任何随机数。[这里是关于 Guid http://msdn.microsoft.com/en-us/library/system.guid.aspx](http://msdn.microsoft.com/en-us/library/system.guid.aspx)的参考页面

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T16:05:03.537

您可以使用 Guid 而不是随机 int ，它们将始终是唯一的

没有办法保证一个 int 是唯一的，除非你检查已经存在的每一个，即使那样 - 就像评论说的那样，当你传递 1000 个 id 时，你保证重复

编辑：

我提到我认为 Guid 在这里是最好的，因为这个问题，首先索引表不会花费很长时间 - 由于 int 的大小，假设会有少于 1000 名学生，128 位是在少于 1000 行的表中很好。

Guid 是学习的好东西——尽管它们并不总是最有效的方法

在 c# 中创建一个唯一的 Guid 有一个好处，您可以继续使用并在问题中显示该 ID，而无需再次访问 Db 来确定分配给学生的唯一 ID

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-05T16:05:25.540

是的，你会得到重复的。如果您想要一个真正独特的项目，您将需要使用 Guid。如果您仍然想使用数字，那么您将需要跟踪您已经使用过的数字，类似于数据库中的标识列。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-05T16:06:40.483

是的，你肯定会得到重复的。您可以使用 a[`GUID`](http://msdn.microsoft.com/en-us/library/system.guid.aspx)代替：

```
Guid g = Guid.NewGuid(); 
```

GUID 在理论上是“全球唯一的”。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-05T16:07:25.180

您可以尝试使用以下方法生成 id `Guid`：

```
Session["number"] = "SN" + (" ") + Guid.NewGuid().ToString(); 
```

它将大大减少获得重复 ID 的机会。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-05T16:07:08.637

如果您使用的是随机数，那么没有没有办法避免它。总会有发生碰撞的可能。

我认为您可能正在寻找的是一个[身份](http://msdn.microsoft.com/en-us/library/ms186775.aspx)列，或者您的数据库服务器的任何等价物。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-05T16:14:21.160

在 LINQ to SQL 中，可以像这样设置行：

```
 [Column ( IsPrimaryKey = true, IsDbGenerated = true )] 
    public int ID { get; set; } 
```

我不知道它是否对你有帮助，但也许这是一个很好的提示......

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-10-05T16:04:24.167

是的，当然有机会。

快速解决方法：
先检查是否是重复号码，然后重试，直到不再是重复号码。

# perl - 在哪些情况下编码/解码 utf8 会发牢骚？

> ID：12749971
> 
> 赞同：3
> 
> 时间：2012-10-05T16:02:43.657
> 
> 标签：perl, encoding, decoding

这个脚本给了我两倍相同的输出。两者之间是否存在无法生存的`utf8` `encode`编码？`decode``say`

```
#!/usr/bin/env perl
use warnings;
use 5.16.1;
use Encode qw/encode decode/;

my $my_encoding = 'ISO-8859-7';
binmode STDOUT, ":encoding($my_encoding)";

my $var = "\N{GREEK SMALL LETTER TAU}";
$var .= "\N{GREEK SMALL LETTER OMEGA WITH TONOS}";
$var .= "\N{GREEK CAPITAL LETTER UPSILON WITH DIALYTIKA}";

$var = encode( 'utf8', $var );
$var = decode( $my_encoding, $var );

say $var;

my $test = encode( 'utf8', $var, Encode::FB_CROAK );
$var = decode( 'utf8', $test, Encode::FB_CROAK  );

say $var; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T16:36:46.460

如果您尝试对超出目标编码字符集的内容进行编码，它就会发出嘶哑的声音。

`utf8`是 Perl 用于存储 72 位字符的 Perl 特定编码。它与 UTF-8 类似，但又有所不同。它支持 Perl 支持的每一个字符，所以它永远不会呱呱叫。

另一方面，如果您要使用，如果您尝试对非 Unicode 字符（例如）`UTF-8`进行编码，它会发出嘶哑的声音。`chr(0x200000)`

参见：[`:encoding(UTF-8)`vs `:encoding(utf8)`vs`:utf8`](https://stackoverflow.com/a/49040165/589924)

# java - 生成整数并丢弃最小值

> ID：12749975
> 
> 赞同：2
> 
> 时间：2012-10-05T16:02:58.887
> 
> 标签：java, random

我正在编写一个程序，它应该生成四个随机整数（从 1 到 6），然后丢弃最小值并将剩余的三个加在一起。我创建了四个变量

```
int var1 = rand.nextInt(6)+1;
int var2 = rand.nextInt(6)+1;
int var3 = rand.nextInt(6)+1;
int var4 = rand.nextInt(6)+1; 
```

我将如何让程序检测最小变量？（或与最小相关的变量）我想我可能有一个方法，但是写起来会很长而且很乏味，而且我敢肯定有一种更简单的方法，我只是没有意识到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:06:25.357

在添加之前不要打扰检测。

```
return var1 + var2 + var3 + var4 - min(var1, min(var2, min(var3, var4))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T16:06:52.150

将整数放入数组中。创建一个表示最小数字的 int，将其设置为数组中的第一个值。然后循环遍历数组以查找任何较小的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:12:40.877

就我个人而言，我可能会选择 Kleric 的答案，但如果你想要一个选项，它可能更具可读性；将数字添加到 a `List`，然后使用`Collections.sort(list)`以升序对它们进行排序，然后简单地从索引 1 求和：

```
List<Integer> ints = new ArrayList<Integer>();
for (int i = 0; i < 4; i++) {
    ints.add(rand.nextInt(6) + 1);
}
Collections.sort(ints);
int sum = 0;
for (int i = 1; i < ints.size(); i++) {
    sum += ints.get(i);
} 
```

这显然是一种不必要的排序，因此不是实现这一目标的最佳性能方式，但我相信它的可读性和可维护性足以值得一提，以防这不是性能关键代码。

# xml - QDomDocument 和 QCryptographicHash 问题

> ID：12749976
> 
> 赞同：1
> 
> 时间：2012-10-05T16:02:59.437
> 
> 标签：xml, qt, hash

正在使用`QCryptographicHash`哈希传递并将其保存在 XML 文件中，我的问题是当我使用`QDomDocument`读取和更新 xml 文件中的其他元素时，元素密码会更改，我不知道如何更改。

请有任何帮助！

这是我的带有正确数据的 xml 文件

```
<?xml version='1.0' encoding='UTF-8'?>
<Folders>
 <folder DriveL="" Mounted="false" PassW="!Å?L,-;©Óñn?Ãs?N·¦ø" Path="C:\MyProjects\DiskCrypt\testFolder\TestFolder"/> 
```

当我需要更新`QDomDocument`用于读取数据和修改数据的驱动器号时，一切正常。如果用户退出 ant 重新运行后解密，我的应用程序会加密我的 xml 文件，但在解密后我得到以下信息：

```
<?xml version='1.0' encoding='UTF-8'?>
<Folders>
 <folder DriveL="" Mounted="false" PassW="!??L,-;???n??s?N???" Path="C:\MyProjects\DiskCrypt\testFolder\TestFolder"/>
</Folders> 
```

`PassW`应该是这样，`"!Å?L,-;©Óñn?Ãs?N·¦ø"`但在加密之后`"!??L,-;???n??s?N???"`，我使用简单的算法进行加密和解密（AES 128）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T10:48:20.460

为避免文本编码问题并使您的 XML 文件易于阅读，切勿将二进制数据直接放入 XML 文档中。请改用 base64 或十六进制编码。

由于`QCryptographicHash`以二进制形式生成哈希，因此您必须调用`.toHex()`从中获得的字节数组。（Base64 也可以，甚至更小，但哈希的十六进制编码是使它们可读的“默认”方式。）

# javascript - Google Maps JS API v3 - 带有地理位置的简单多标记

> ID：12749977
> 
> 赞同：1
> 
> 时间：2012-10-05T16:03:01.530
> 
> 标签：javascript, jquery-mobile, google-maps-api-3

Google Maps JS API v3 - 带有地理位置的简单多标记
谢谢，但我使用下面的代码进行管理。自由地改进它！
**第 1 部分**- 清除变量

```
var LocationCenter = null;
var map = null;
var approxCircle = null;
var pinCircle = null;
var marker = null; 
```

**2 部分**- 在变量中定义位置

```
var locations = [ 
  ['Bondi Beach', -33.890542, 151.274856, 4], 
  ['Coogee Beach', -33.923036, 151.259052, 5], 
  ['Cronulla Beach', -34.028249, 151.157507, 3], 
  ['Manly Beach', -33.80010128657071, 151.28747820854187, 2], 
  ['Maroubra Beach', -33.950198, 151.259302, 1] 
]; 
```

**3 部分**- 初始化函数

```
function Newinitialize(lat,lng) {
    LocationCenter = new google.maps.LatLng(lat,lng);
    var myOptions = {
        zoom: 14,
        center: LocationCenter,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }
map = new google.maps.Map(document.getElementById("map_canvasRoast"), myOptions);

marker = new google.maps.Marker({
    position: LocationCenter,
    map: map,
    animation: google.maps.Animation.DROP
    });

approxCircle = {
  strokeColor: "#008595",
  strokeOpacity: 0.8,
  strokeWeight: 2,
  fillColor: "#008595",
  fillOpacity: 0.25,
  map: map,
  center: LocationCenter,
  radius: 50,
  clickable : false 
};

pinCircle = new google.maps.Circle(approxCircle);
var infowindow = new google.maps.InfoWindow();
var marker, i; 
```

**4 零件**集位置

```
for (i = 0; i < locations.length; i++) {   
  marker = new google.maps.Marker({ 
    position: new google.maps.LatLng(locations[i][1], locations[i][2]), 
    map: map 
  }); 

  google.maps.event.addListener(marker, 'click', (function(marker, i) { 
    return function() { 
      infowindow.setContent(locations[i][0]); 
      infowindow.open(map, marker); 
    } 
  })(marker, i)); 
}   

};

$('.goMap').live('click', function() {
    if(navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position){
        Newinitialize(position.coords.latitude,position.coords.longitude);
    });
    }else{
        Newinitialize(52.636161,-1.133065);
    }
}); 
```

完成，现在我加载页面并且地理位置工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T02:23:06.453

以下是您将地图重新​​居中到用户当前位置的方法：

```
function showPosition(position)
{
  map.setCenter(new google.maps.LatLng(positions.coords.latitude,
      position.coords.longitude));
} 
```

这将允许您在接收用户位置之前创建地图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:13:25.280

在函数内设置谷歌地图`showPosition`，例如：

```
var map;
function showPosition(position) {
  var latlon=position.coords.latitude+","+position.coords.longitude;

  x.innerHTML="Latitude: " + position.coords.latitude + "<br>Longitude: " + position.coords.longitude;    

  map = new google.maps.Map(document.getElementById('map'), { 
    zoom: 10, 
    center: new google.maps.LatLng(position.coords.latitude, position.coords.longitude), 
    mapTypeId: google.maps.MapTypeId.ROADMAP 
  });
} 
```

这样，在您初始化 Google 地图之前，坐标就可用了。否则，您可以在`showPosition`函数中更新地图坐标（我不确定执行此操作的确切代码）。

# javascript - Webkit 和 Firefox 之间的“scrollWidth”行为不一致

> ID：12749978
> 
> 赞同：1
> 
> 时间：2012-10-05T16:03:05.237
> 
> 标签：javascript, html, firefox, webkit

我有一组标题 div 需要匹配它们下面的内容 div 的宽度。通常，内容 div 比标题 div 更薄，并且它们的大小可以变化。

所以，我所做的就是设置标题 div 的宽度以匹配内容 div 的宽度。然后，因为我希望标题和内容足够宽，不会切断任何单词，所以我检查每个标题的“scrollWidth”属性以查看它是否大于其“offsetWidth”属性，然后设置标题的内容和标题宽度滚动宽度。

```
header.style.width = tableCell.offsetWidth + "px";
if (header.scrollWidth > header.offsetWidth) {
    content.style.width = header.scrollWidth + "px";
    header.style.width = header.scrollWidth + "px";
} 
```

这适用于 Safari 和 Chrome，但在 FireFox 中根本不起作用。在 Firefox 中，“scrollWidth”返回与标题设置宽度相同的值。

你说“听起来是使用表格的好时机”，但我不能。标题需要在页面顶部保持静态。

那么，在这些条件下，如何让 Firefox 返回与 scrollWidth 等效的值呢？我尝试将标题 div 的溢出设置为“隐藏”和“滚动”，但这没有任何影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:05:05.717

Firefox 似乎包含边框宽度，Chrome 没有。当我在 Firefox 中时，我不得不减去边框宽度。哈基，但它奏效了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:40:33.957

我在 stackoverflow 上回答了一个类似的问题：[为什么在这种情况下，滚动宽度在 Firefox 中不起作用？](https://stackoverflow.com/questions/14666931/why-scrollwidth-doesnt-work-in-this-case-in-firefox)

问题是，当溢出可见时，Firefox 会为 scrollWidth 返回 clientWidth 值。

我为 Firefox 找到的解决方法是将溢出设置为隐藏，获取正确的滚动宽度并将溢出恢复为可见。链接中的更多详细信息和代码。

# jquery - 垂直导航栏必须从顶部移动一点然后保持固定

> ID：12749982
> 
> 赞同：1
> 
> 时间：2012-10-05T16:03:16.460
> 
> 标签：jquery, css, twitter-bootstrap

我正在尝试像[www.callofduty.com/elite](http://www.callofduty.com/elite)那样有一个垂直导航栏。正如您在此页面中看到的，右侧有 3 个导航链接（连接、竞争、改进）。当您向下滚动时，导航栏会向下移动一点，然后保持固定。

我有点得到滚动间谍，固定导航工作。但是导航栏不会向下移动一点并且保持固定。它只是固定在我放置的位置。如何达到那种效果？任何见解都会有所帮助。

这是我工作的链接[http://jsfiddle.net/RJJ2J/](http://jsfiddle.net/RJJ2J/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:37:09.487

看[演示](http://jsbin.com/anorip/6/)

**jQuery**

```
$(function(){    // this is the shorthand for document.ready
  $(document).scroll(function(){    // this is the scroll event for the document

    scrolltop = $(document).scrollTop(); // by this we get the value of the scrolltop ie how much scroll has been don by user
    if(parseInt(scrolltop) >= 80)    // check if the scroll value is equal to the top of navigation
      { 
        $("#navbar").css({"position":"fixed","top":"0"});   // is yes then make the position fixed to top 0
      }
    else
    {
      $("#navbar").css({"position":"absolute","top":"80px"}); // if no then make the position to absolute and set it to 80
    }
  })

}); 
```

**CSS**

```
#navbar{
    position: absolute;   // Initially set to absolute so it is movable with the page
    top: 80px; right: 100px;
    /*display: block;*/
    padding-right: 7px;
    background: #fff;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:35:36.487

使用这个[waypoints 插件](http://imakewebthings.com/jquery-waypoints/#examples)，它正是为了做你想做的事情

# java - 实现单例 SqliteDatabaseHelper 类的正确方法

> ID：12749986
> 
> 赞同：0
> 
> 时间：2012-10-05T16:03:26.220
> 
> 标签：java, database, concurrency, android-sqlite

我目前正在实现一个 databasehalper 类，该类将从各种线程中访问，因此它基本上是单例的，并且可以像这样访问：

```
 public class HistoryDatabaseHelper extends SQLiteOpenHelper{
                private static HistoryDatabaseHelper mInstance=null;
                public static HistoryDatabaseHelper getInstance(Context context){
            if(mInstance==null)
              mInstance=new HistoryDatabaseHelper(context.getApplicationContext());
            return mInstance;
                } 
```

所以没有公共构造函数，这是访问 helper 的唯一方法。

现在我的问题是每次我尝试执行任何操作时是否应该打开数据库。例如，考虑帮助类的以下 menmber 函数：

```
 public void deleteContact(String staticUrl) {
           SQLiteDatabase db = this.getWritableDatabase();  // does this open a new connection each time?
                                                            //  and invade the whole purpose of 
                                                             //creating singleton helper
           db.delete(TABLE_DOWNLOAD_HISTORY, KEY_STATIC_URL + " = ?",
           new String[] { staticUrl });
           db.close();
                 } 
```

那么这是正确的方法还是我应该像这样打开数据库一次：

```
 public static HistoryDatabaseHelper getInstance(Context context){
          if(mInstance==null){
               mInstance=new HistoryDatabaseHelper(context.getApplicationContext());
               mInstance.open();  // here
                           }
               return mInstance;
                   } 
```

如果是这样，那么我们应该在哪里关闭数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:34:49.850

停止！等待！冻结！

“我目前正在实现一个 databasehalper 类，该类将从各种线程中访问，因此它基本上是单例的，并且可以像这样访问：”

你说你的 HistoryDatabaseHelper 将被不同的线程访问而你忘记同步 getInstance 方法？你的线会在他们离开家之前穿上他们的跑鞋，因为他们肯定会参加比赛。如果您希望您的线程表现得像成年人一样，您需要同步您的 getInstance 方法。或者，您可以在声明过程中实例化 mInstance 实例变量，避免同步 getInstance 或检查 mInstance 是否已经在 getInstance 中初始化。

接下来是 HistoryDatabasrHelper 构造函数。您需要显式声明私有 HistoryDatabaseHelper 构造函数，否则编译器将在您的类中放置一个公共构造函数。不这样做就像让你的邻居偷你的东西而不把它们交给警察。

最后但并非最不重要的是 getInstance 方法的 Context 参数。删除此参数。假设 Context 不会从一个实例更改为另一个实例，让您的 HistoryDatabasrHelper 有一个 Context 实例变量并在您的私有构造函数中对其进行初始化。

So should you have a singleton database connection? I personally think it would be a better idea if you had a singleton database connection pool instead of a singleton database connection. A Google search will give you a lot of good libraries for connection pooling out there.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:11:29.820

如果 HistoryDatabaseHelper 是线程安全的，这应该只是一个单例。调用者必须传入一个参数来获取单例的事实应该是一个很大的危险信号，因为这意味着单例的状态与这个参数有关。

从线程的角度来看，最安全的事情是让类不是单例，只需根据需要创建一个新的。如果事实证明这会减慢您的应用程序的速度，请对其进行基准测试并制定解决方案，可能使用 c3p0 等连接池等。

如果您确定 HistoryDatabaseHelper 是线程安全的，则在类中初始化单例，并且不需要任何参数来获取单例。

# sinatra - Sinatra 上的 Sprocketsasset_path 错误

> ID：12749988
> 
> 赞同：1
> 
> 时间：2012-10-05T16:03:28.040
> 
> 标签：sinatra, sprockets

我正在开发一个使用 Sprockets 的 Sinatra 项目。当我在资产文件夹中添加新样式表时，我收到此错误：

> 编译 CSS 资源时出错
> 
> Sprockets::NotImplementedError: 自定义asset_path 帮助器未实现
> 
> 使用自定义方法扩展您的环境上下文。
> 
> ```
> environment.context_class.class_eval do
>   def asset_path(path, options = {})
>   end
> end 
> ```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:03:28.040

我遵循了错误消息的建议：我在以下位置定义了`asset_path`方法`config.ru`：

```
environment.context_class.class_eval do
  def asset_path(path, options = {})
    "/assets/#{path}"
  end
end 
```

我仍然不确定为什么需要这样做，但它使错误消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-17T11:57:11.173

为了修复**Padrino**中的相同错误，我在 my 中定义了此方法`app.rb`并更改`environment`为`assets`：

```
assets.context_class.class_eval do
  def asset_path(path, options = {})
    "/assets/#{path}"
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-20T09:43:05.963

已经提出，你需要`asset_path`为你的环境定义方法。

此方法由[诸如 image_url 之类的助手使用，...](https://github.com/sstephenson/sprockets/blob/master/lib/sprockets/context.rb#L156) CSS 文件中常用。根据当时的情况，您可能希望使其有所不同`options[:type]`。

例子：

```
environment.context_class.class_eval do
  def asset_path(path, options = {})
    if type = options[:type]
      "/assets/#{type.to_s.pluralize}/#{path}"
    else
      "/assets/#{path}"
    end
  end
end 
```

这样做磨坊使`asset_url`返回`/assets/path/to/your/file`，而`image_url`助手将返回`/assets/images/path/to/your/file`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-03T05:08:09.260

我们不需要 sprockets 调用的实例吗？对于我正在使用的 Rails 应用程序，我在 config.ru 中使用了它来消除错误。

```
map '/assets' do
  environment = Sprockets::Environment.new
  environment.context_class.class_eval do
    def asset_path(path, options = {})
      "app/assets/#{path}"
    end
  end

  environment.append_path 'app/assets/javascripts'
  environment.append_path 'app/assets/stylesheets'
  run environment
end 
```

# c# - 以编程方式关闭 win8 应用程序

> ID：12749990
> 
> 赞同：7
> 
> 时间：2012-10-05T16:03:31.997
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我已经开始修补制作 Windows 8 应用程序并且我想制作一个退出按钮。

问题是我在winforms中使用的不在此处的范围内 `Environment.Exit()`。`this.Close()`

有人知道如何以编程方式关闭应用程序吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T16:18:16.883

```
Application.Current.Exit(); 
```

但不建议关闭 Metro 应用程序。它通常被暂停。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T16:16:33.803

```
Application.Exit 
```

不过要小心。您可以通过强制关闭应用程序的代码来失败认证。如果您计划发布到商店，请务必阅读[认证指南：](http://msdn.microsoft.com/en-us/library/windows/apps/hh694083.aspx)

> 您的应用程序既不能以编程方式关闭，也不能提供 UI 功能来关闭它。Windows 8 Process Lifetime Management 会自动关闭 Windows 应用商店应用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-30T19:18:37.973

```
Application.Current.Exit(); 
```

这**是**不允许的，但过去不允许这样做的要求 3.6 似乎已被删除：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh694083.aspx#acr_changelog](http://msdn.microsoft.com/en-us/library/windows/apps/hh694083.aspx#acr_changelog)

# php - 另一个 PHP if/else 没有按预期工作

> ID：12749992
> 
> 赞同：0
> 
> 时间：2012-10-05T16:03:35.523
> 
> 标签：php

我一直无法找到解决此问题的方法，并希望另一双眼睛可能会发现一些东西。当第一个“if”不正确并且我不知道为什么时，不会执行 else $confirm = 行。

```
if($_POST['zip'] && $_POST['country']=='USA' && !empty($fax)){
    $plus4 = substr($_POST["zip"],6,4);
    if (empty($plus4)) {
        $link = '<a href="http://zip4.usps.com/zip4/welcome.jsp?city='.$city.'&address2='.$address.'&state='.$state.'&zip5='.$zip.'" class="greybox" onclick="window.scrollTo(0,0)">Zip + 4</a>';
        $msg = "Your Zip + 4 was not provided! We cannot fax your Representative without your Zip+4.<br/>Click here to find your ".$link ;
        print "<p style=\"color: red;\"><b>$msg<br/><br/></b></p>";
    }
    if (empty($_POST['state']) || empty($_POST['zip'])) $statezip = false ; // Check for State & Zip Required
    else $statezip = true ;
    //if (empty($state) || empty($zip) || empty($plus4)) $statezip = false ; // Check for State & Zip Required
    $confirm = !empty($_POST['name']) && !empty($_POST['from']) && !empty($_POST['address']) && !empty($_POST['city']) && !empty($_POST['country']) && $statezip == true ; // Verify required fields
}
else $confirm = !empty($_POST['name']) && !empty($_POST['from']) && !empty($address) && !empty($city) && !empty($country) && $statezip == true ; // Verify required fields 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:09:43.843

由于最后一个条件，您的`else`语句将始终返回：`false``$confirm`

```
&& $statezip == true 
```

您正在语句中设置该值`if`，因此它在`else`语句中未定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:10:15.057

使用 isset 检查变量是否存在，
即使包含 ，函数也为空返回 true `0`，
当您使用 else 时也使用`{`括号
`else{do something}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:07:11.717

将大括号添加到 ELSE 语句中。由于您在定义 IF 中使用它们，因此解析器期待它们。

```
else {
$confirm = !empty($_POST['name']) && !empty($_POST['from']) && !empty($address) && !empty($city) && !empty($country) && $statezip == true ; // Verify required fields
} 
```

# java - 编译器错误：“需要类、接口或枚举”

> ID：12749994
> 
> 赞同：17
> 
> 时间：2012-10-05T16:03:45.667
> 
> 标签：java, compiler-errors

我已经对这个程序进行了几个小时的故障排除，尝试了几种配置，但都没有运气。它是用java编写的，有33个错误（从之前的50个降低）

源代码：

```
/*This program is named derivativeQuiz.java, stored on a network drive I have permission to edit
The actual code starts below this line (with the first import statement) */
import java.util.Random;
import java.Math.*;
import javax.swing.JOptionPane;
public static void derivativeQuiz(String args[])
{
    // a bunch of code
} 
```

错误日志（在 JCreator 中编译）：

```
--------------------Configuration: <Default>--------------------
H:\Derivative quiz\derivativeQuiz.java:4: class, interface, or enum expected
public static void derivativeQuiz(String args[])
              ^
H:\Derivative quiz\derivativeQuiz.java:9: class, interface, or enum expected
    int maxCoef = 15;
    ^
H:\Derivative quiz\derivativeQuiz.java:10: class, interface, or enum expected
    int question = Integer.parseInt(JOptionPane.showInputDialog(null, "Please enter the number of questions you wish to test on: "));
    ^
H:\Derivative quiz\derivativeQuiz.java:11: class, interface, or enum expected
    int numExp = Integer.parseInt(JOptionPane.showInputDialog(null, "Please enter the maximum exponent allowed (up to 5 supported):" ));
    ^
H:\Derivative quiz\derivativeQuiz.java:12: class, interface, or enum expected
    Random random = new Random();
    ^
H:\Derivative quiz\derivativeQuiz.java:13: class, interface, or enum expected
    int coeff;
    ^
H:\Derivative quiz\derivativeQuiz.java:14: class, interface, or enum expected
    String equation = "";
    ^
H:\Derivative quiz\derivativeQuiz.java:15: class, interface, or enum expected
    String deriv = "";
    ^
H:\Derivative quiz\derivativeQuiz.java:16: class, interface, or enum expected
    for(int z = 0; z <= question; z++)
    ^
H:\Derivative quiz\derivativeQuiz.java:16: class, interface, or enum expected
    for(int z = 0; z <= question; z++)
                   ^
H:\Derivative quiz\derivativeQuiz.java:16: class, interface, or enum expected
    for(int z = 0; z <= question; z++)
                                  ^
H:\Derivative quiz\derivativeQuiz.java:19: class, interface, or enum expected
        deriv = "";
        ^
H:\Derivative quiz\derivativeQuiz.java:20: class, interface, or enum expected
        if(numExp >= 5)
        ^
H:\Derivative quiz\derivativeQuiz.java:23: class, interface, or enum expected
            equation = coeff + "X^5 + ";
            ^
H:\Derivative quiz\derivativeQuiz.java:24: class, interface, or enum expected
            deriv = coeff*5 + "X^4 + ";
            ^
H:\Derivative quiz\derivativeQuiz.java:25: class, interface, or enum expected
        }
        ^
H:\Derivative quiz\derivativeQuiz.java:29: class, interface, or enum expected
            equation = equation + coeff + "X^4 + ";
            ^
H:\Derivative quiz\derivativeQuiz.java:30: class, interface, or enum expected
            deriv = deriv + coeff*4 + "X^3 + ";
            ^
H:\Derivative quiz\derivativeQuiz.java:31: class, interface, or enum expected
        }
        ^
H:\Derivative quiz\derivativeQuiz.java:35: class, interface, or enum expected
            equation = equation + coeff + "X^3 + ";
            ^
H:\Derivative quiz\derivativeQuiz.java:36: class, interface, or enum expected
            deriv = deriv + coeff*3 + "X^2 + ";
            ^
H:\Derivative quiz\derivativeQuiz.java:37: class, interface, or enum expected
        }
        ^
H:\Derivative quiz\derivativeQuiz.java:41: class, interface, or enum expected
            equation = equation + coeff + "X^2 + ";
            ^
H:\Derivative quiz\derivativeQuiz.java:42: class, interface, or enum expected
            deriv = deriv + coeff*2 + "X + ";
            ^
H:\Derivative quiz\derivativeQuiz.java:43: class, interface, or enum expected
        }
        ^
H:\Derivative quiz\derivativeQuiz.java:47: class, interface, or enum expected
            equation = equation + coeff + "X + ";
            ^
H:\Derivative quiz\derivativeQuiz.java:48: class, interface, or enum expected
            deriv = deriv + coeff;
            ^
H:\Derivative quiz\derivativeQuiz.java:49: class, interface, or enum expected
        }
        ^
H:\Derivative quiz\derivativeQuiz.java:53: class, interface, or enum expected
            equation = equation + coeff;
            ^
H:\Derivative quiz\derivativeQuiz.java:54: class, interface, or enum expected

            if(deriv == "")
            ^
H:\Derivative quiz\derivativeQuiz.java:57: class, interface, or enum expected
            }
            ^
H:\Derivative quiz\derivativeQuiz.java:114: class, interface, or enum expected
    JOptionPane.showMessageDialog(null, "Question " + z + "\\" + question + "\nDerivative: " + deriv);
    ^
H:\Derivative quiz\derivativeQuiz.java:115: class, interface, or enum expected
    }
    ^
33 errors

Process completed. 
```

我觉得这是一个基本错误，但我似乎找不到它。如果它有所作为，我正在使用 JCreator 进行编译，并且所有内容都已正确安装。

更新：我已经修复了所涉及的错误（类声明和不正确的导入语句（有人回去删除了几个分号））

工作代码：

```
import java.util.Random;
import javax.swing.JOptionPane;
import java.lang.String;
public class derivativeQuiz_source{
public static void main(String args[])
{
    //a bunch more code
}
} 
```

感谢所有的帮助

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-05T16:08:05.757

你错过了类声明。

```
public class DerivativeQuiz{
   public static void derivativeQuiz(String args[]){ ... }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-05T16:07:48.207

每个方法都应该在一个类中。您的方法`derivativeQuiz`在类之外。

```
public class ClassName {

 ///your methods
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-05T16:07:52.523

你忘记了你的班级声明：

```
public class MyClass {
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-28T19:08:56.903

查看您的函数定义。如果你忘记在某处函数声明后使用“()”，你会得到很多相同格式的错误：

```
 ... ??: class, interface, or enum expected ... 
```

而且您在类或函数定义结束后忘记了右括号。但请注意，这些缺少的括号，并不是此类错误的唯一原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-28T11:06:47.350

需要类、接口或枚举

当 import 语句拼写错误时，甚至可能出现上述错误。正确的说法是“import com.company.HelloWorld;”

如果在编写/编辑代码时出错，它会像“t com.company.HelloWorld;”这样写错。

编译器将显示“预期的类、接口或枚举”

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-10-18T11:21:21.843

main 方法应该像这样在你的类中声明：

```
public class derivativeQuiz_source{
    // bunch of methods .....

    public static void main(String args[])
    {
        // code 
    }
} 
```

# c# - 使用更多参数订阅 a 方法和事件处理程序

> ID：12749999
> 
> 赞同：0
> 
> 时间：2012-10-05T16:03:59.390
> 
> 标签：c#, .net, visual-studio-2010

我找不到类似于我期望发生的解决方案。如何向要订阅的方法添加附加参数？

假设下面这一行是订阅 mouseover 的代码：

```
Panel cagePanel = new Panel();
cagePanel.MouseHover += new EventHandler(frmMain_MouseHover);

void frmMain_MouseHover(object sender, EventArgs e){ 
    // I wanna add some 'int index' parameter after 'e' variable) 
} 
```

我真正想要的是这样的：

```
void frmMain_MouseHover(object sender, EventArgs e, int index){ 
    strings[index] = "bla bla bla";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:07:59.463

> 我找不到类似于我期望发生的解决方案。如何向要订阅的方法添加附加参数？

你不能。*引发*事件（或其他）的代码如何`Panel.OnMouseHover`知道要提供什么价值？

如果您在*订阅*事件时知道，则可以使用 lambda 表达式基本上委托调用，提供额外信息：

```
// 10 is just an example here - use whatever value you want for index
cagePanel.MouseHover += (sender, args) => frmMain_MouseHover(sender, args, 10); 
```

编辑：要遍历数组中的每个控件并为每个控件订阅适当的处理程序，您可以使用如下内容：

```
for (int i = 0; i < array.Length; i++)
{
    // See http://tinyurl.com/3b2hoft for reasons behind the copy
    int index = i;
    array[i].MouseHover += (s, args) => frmMain_MouseHover(s, args, index);
} 
```

但是，我个人会尽量避免需要这个 - 你不能通过`sender`部件检测索引，可能使用`Array.IndexOf`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T16:12:29.280

您不能，但如果您需要的额外数据与发送事件的内容有关，您可以使用该`sender`值。例如，如果您想知道引发事件的项目的控件列表中的索引，您可以执行以下操作：

```
int i = controlList.IndexOf(sender); 
```