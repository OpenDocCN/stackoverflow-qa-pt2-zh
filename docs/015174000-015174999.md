# StackOverflow 问答 15174000-15174999

# iphone - 如何使用 .png 图像而不是 .gif 图像在 iphone 中显示带有动画的图像？

> ID：15174003
> 
> 赞同：0
> 
> 时间：2013-03-02T11:37:04.043
> 
> 标签：iphone, objective-c

我的应用程序是一个聊天应用程序，我需要在其中显示动画表情符号（就像新 Skype 版本中的（笑）一样），有没有办法在应用程序中实现一些代码以利用 .png 文件使它们在聊天中显示动画窗户 ？

在此处附加示例 .png 文件，我搜索了 Skype 包内容，发现“Skype 软件正在使用 .png 文件制作动画”，任何帮助将不胜感激。

谢谢

![在此处输入图像描述](../Images/d98781435db7a5878cce852cc69f9b06.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T11:53:00.870

像这样尝试可能对你有帮助但不确定，

```
NSMutableArray *array = [NSMutableArray arrayWithCapacity:54]
for (int i = 0; i < 54; ++i) {
   UIImage *image = [UIImage imageNamed:@"image%d.png",i];
  [array addObject:image];
}
imageview.animationImages = array;
imageview.animationDuration = 1.00;
imageview.animationRepeatCount = 1;
[imageview startAnimating]; 
```

# apache - .htaccess 初学者教程

> ID：15174007
> 
> 赞同：0
> 
> 时间：2013-03-02T11:37:27.973
> 
> 标签：apache, .htaccess

我正在尝试将 .htaccess 用于我的网站，但我无法使用它。我不知道如何使用它。我已经创建了 .htaccess 文件。

我正在尝试使用我的自定义 404 错误消息（现在）

从[这个](http://www.besthostratings.com/articles/change-error-documents.html)链接我使用

```
ErrorDocument 404 /notfound.html 
```

但它没有用

同样从[这里](https://stackoverflow.com/a/4629543/604079)我尝试了一些事情，但不能。

任何人都可以带我过去吗？

可以为文件提供什么权限
什么是文件的所有者。
在任何 apache/php 配置文件中是否有任何设置？

我正在使用 Mac OS X。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T00:16:11.237

阅读这篇文章，了解您必须在 httpd.conf 中进行哪些配置，该文件位于：

/etc/apache2/

文章链接：[http ://chibimagic.wordpress.com/2009/02/27/apache-htaccess-mac-os-x/](http://chibimagic.wordpress.com/2009/02/27/apache-htaccess-mac-os-x/)

然后，您可以跳转到 .htaccess 的官方 apache 文档：[http ://httpd.apache.org/docs/current/howto/htaccess.html](http://httpd.apache.org/docs/current/howto/htaccess.html)

# objective-c - 设置视图透明但保持按钮等不透明

> ID：15174008
> 
> 赞同：0
> 
> 时间：2013-03-02T11:37:29.123
> 
> 标签：objective-c, cocoa-touch, quartz-2d

我有两个视图，一个`UIImageView`在后面作为背景。`ImageView`然后我在包含标签、按钮和路径（如圆圈和矩形）的前面有另一个视图。我希望第二个视图（带有按钮等的视图）是透明的，以便`ImageView`完全可见，但保持按钮、标签和路径不透明。我已将第二个视图（带有按钮等的视图）设置为 alpha 0.5，并将 IB 中的按钮和标签设置为 1。在我的代码中，我也将路径设置为 alpha 1。但是当我运行它时，按钮、标签和路径也像视图一样是半透明的。如何仅将视图的透明度设置为 alpha 0 并保持其他所有内容为 alpha 1？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:42:26.593

> 我希望第二个视图（带有按钮等的视图）是透明的，以便图像视图完全可见

您需要的是清除该视图的`backgroundColor`：

```
view.backgroundColor = [UIColor clearColor]; 
```

视图的 alpha 设置也适用于它的子视图，没有办法摆脱它。

顺便说一句，如果您的第一个视图只包含一个图像，您也可以删除它并将该背景图像设置`backgroundColor`为您的第二个视图：

```
view.backgroundColor = [UIColor colorWithPatternImage:backgroundImage]; 
```

# teamcity - 检测 TeamCity 中的特定文件更改

> ID：15174013
> 
> 赞同：3
> 
> 时间：2013-03-02T11:38:29.370
> 
> 标签：teamcity

我们的解决方案中有某些文件，我想检测对这些特定文件的更改。

如果发现对特定文件的更改，我希望收到一封电子邮件。

这是否可以通过 teamcity 或 mercurial（我们的 VCS）实现

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T09:38:49.657

要使用 TeamCity 实现此目的，您可以执行以下操作：

1.  设置构建配置，将您的 VCS 附加到它。
2.  设置[结帐规则](http://confluence.jetbrains.com/display/TCD7/VCS+Checkout+Rules)以仅匹配您感兴趣的文件。
3.  添加构建步骤（也许，做一些测试？）
4.  添加 VCS 触发器。
5.  在“我的设置和工具”中订阅此构建配置的“构建开始”事件

# javascript - 在 Javascript 中将 XMLHttpRequest 转换为字符串

> ID：15174016
> 
> 赞同：0
> 
> 时间：2013-03-02T11:38:59.833
> 
> 标签：javascript, xml, text

我正在尝试在 javascript 中读取本地文件，我没有在线发布此文件，因此我只需要它与我的浏览器（Firefox）一起使用，我目前正在尝试使用 XML Http 请求解析它：

```
var txtFile = new XMLHttpRequest();
        txtFile.open("GET", "file://Users/spe_eddy_gonzalez/Dropbox/Me/Hon Proj/Wikipedia/simplewikitext.txt", true);
        txtFile.onreadystatechange = function() {
    if (txtFile.readyState === 4) {  // Makes sure the document is ready to parse.
            if (txtFile.status === 200) {  // Makes sure it's found the file.
            allText = txtFile.responseText;
            lines = txtFile.responseText.split("\r\n"); // Will separate each line into an array
        } //"\r\n" 
    }
}
console.log($(txtFile).val());

var stringT = (new XMLSerializer()).serializeToString(txtFile); 
```

但得到以下错误：

```
[11:22:43.970] NS_ERROR_XPC_BAD_CONVERT_JS: Could not convert JavaScript argument arg 0 [nsIDOMSerializer.serializeToString] @ http://127.0.0.1:8020/CharCount2/character_counter2.js:26\ 
```

任何帮助都会非常受欢迎。我正在考虑用 Python 重写我的整个系统，因为我正在努力解决 Javascript 有限的 I/O 功能，而且我在 Python 方面有更多的经验

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T11:43:17.997

Ajax 不适用于 file:// 协议。你应该在你的机器上使用一个简单的网络服务器，比如 Apache 或 Nginx。

# jquery - 详细信息按钮无法在ajax分页中发送数据

> ID：15174018
> 
> 赞同：1
> 
> 时间：2013-03-02T11:39:04.883
> 
> 标签：jquery

我有一个用于 ajax 分页的脚本

脚本也运行良好，

让我与大家分享脚本

```
function show_tour_type(v,t)
{
    $(".cl_tour_type").html('<div align="center"><img src="<?php echo base_url(); ?>assets/front_assets/images/ajax-loader-large.gif" align="center" style="max-height: 300px; max-width: 300px; min-height: 300px;" alt="image" /></div>');
    var p=v;
    var showresult='';
    var showpagi='';
    $.ajax({
        url:"<?php echo base_url().'ajax/ajax_tour_type_pagination';?>",
        data:{'start':p,'perpage':t},
        type:'POST',
        dataType:'JSON',
        async:true,
        success:function(result){
            pagi = result.pagi;
            uname = result.uname;
            console.log(pagi.cont.perpage);
            result= result.content;
            console.log(result);

            for(i=0;i<result.length;i++)
            {
                showresult+='<div class="tour_type_ajax"><h1>'+result[i].tour_type+'</h1><br/><img src="<?php echo base_url(); ?>'+result[i].type_image+'" style="max-height: 100px; max-width: 180px; min-height: 100px;" alt="image" /><br/><br/><br/><div class="detail_button"><input type="text" id="tour_type'+i+'" value="tour_type'+i+'"/><a href="#!/page_tour_specification" onclick="show_tour_spec('+result[i].tour_type+')">Detail</a></div></div>';
            }
            //showresult+='<div class="cleaner_with_width">&nbsp;</div><div class="cleaner_with_height">&nbsp;</div><div class="cleaner">&nbsp;</div><div class="cleaner_with_height">&nbsp;</div>';
            showpagi+='<table width="20%" height="100%" border="0"><tr>';
            for(i=0;i<pagi.cont.pages;i++)
            {
                if(i==0)
                    showpagi+='<td onclick="show_tour_type('+parseInt(i)+','+pagi.cont.perpage+')"><a href="javascript:void(0);">First</a></td>';
                else if(i==pagi.cont.pages-1)
                    showpagi+='<td onclick="show_tour_type('+parseInt(i)+','+pagi.cont.perpage+')"><a href="javascript:void(0);">Last</a></td>';
                else
                    showpagi+='<td onclick="show_tour_type('+parseInt(i+1)+','+pagi.cont.perpage+')"><a href="javascript:void(0);">'+parseInt(i+1)+'</a></td>';
            }

            showpagi+='</tr></table>';
            $(".cl_tour_type").html(showresult);
            $(".pagenav").html(showpagi);
        }
    });
}

function hii(val)
{
    alert(val);
} 
```

现在我面临一个非常奇怪的问题，

在行中

```
 showresult+='<div class="tour_type_ajax"><h1>'+result[i].tour_type+'</h1><br/><img src="<?php echo base_url(); ?>'+result[i].type_image+'" style="max-height: 100px; max-width: 180px; min-height: 100px;" alt="image" /><br/><br/><br/><div class="detail_button"><input type="text" id="tour_type'+i+'" value="tour_type'+i+'"/><a href="#!/page_tour_specification" onclick="hii('+result[i].tour_type+')">Detail</a></div></div>'; 
```

你可以找到代码`onclick="hii('+result[i].tour_type+')"`

应该调用该函数`hii(val)`

现在的问题是调用了函数 hii 但它没有发出任何警报；

但是如果我简单地写`+2+`代替`+result[i].tour_type+`

然后它的警报 2

所以这意味着函数是正确的，

问题是什么，可能`+result[i].tour_type+`有一些问题。

但后来我想知道，如果这没有任何价值，那么它不会显示在 ajax 响应中..所以它返回一个值......那它为什么不在`hii`函数中发送值

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-02T11:43:29.227

这是因为您正在传递文字字符串。像这样在它周围加上引号。

```
'...onclick="hii(\''+ result[i].tour_type +'\')"...' 
```

如果没有引号，它将像这样进行评估`hi(somevalue)`。`somevalue`不是变量，因此不起作用。

有效的原因`'hi('+ 2 +')'`是因为`2`被评估为整数而不是字符串。

# c - 错误：尝试使用中毒的“SIG_OUTPUT_COMPARE0A”

> ID：15174021
> 
> 赞同：1
> 
> 时间：2013-03-02T11:39:46.803
> 
> 标签：c, gcc, avr, atmel, atmega

我正在为 atmega168a 编写 C 代码。编译下面的代码时出现`attempt to use poisoned "SIG_OUTPUT_COMPARE0A`错误。[但是我在http://www.protostack.com/blog/2010/09/timer-interrupts-on-an-atmega168/](http://www.protostack.com/blog/2010/09/timer-interrupts-on-an-atmega168/)`attempt to use poisoned "SIG_OUTPUT_COMPARE0B`上看到了类似的`ISR`函数用法，如果有人能告诉我我做错了什么，我将不胜感激？我正在使用 atmel studio 6.0 及其 gcc 在 Windows 7 pc 上编译代码。

```
#include <avr/io.h>
#include <avr/interrupt.h> 
#include <avr/iomx8.h>

volatile int new_msg;
volatile int new_msg_available = 0;
volatile int message = 0xFFFF;
int main(void)
{
    DDRB = 0xFF;
    TIMSK0 = _BV(OCIE0A) | _BV(OCIE0B);  // Enable Interrupt TimerCounter0 Compare Match A & B   // #define OCIE0A  1... (1<<1);
    TCCR0A = _BV(WGM01);  // Mode = CTC ... #define WGM01   1 ... mode 2
    TCCR0B = _BV(CS01);   // Clock/8, 0.000008 seconds per tick
    OCR0A = 104;          // 0.000008*104 = 0.000832 SIG_OUTPUT_COMPARE0A will be triggered.
    OCR0B = 52;           // 416 usec

    message = 0xFFFE;

    volatile int i; 
    sei(); //interrupts are globally switched on

    while(1)
    {   
         if (OCR0A >= 104){
                for (i=0; i<18; i++) {
                    if (i <2){
                        PORTB = 0xFF;
                    }
                    else if ((i<15) && (message & 0x1)) {
                        PORTB = 0x00;
                    }
                    else if (i>15){
                        PORTB = 0xFF;
                    }
                    else{
                        PORTB = 0x00;
                    }
                    message >>= 1;
                }    
         }
    }
    return 0;
}

ISR(SIG_OUTPUT_COMPARE0A)
{
    if(new_msg_available == 1){
        message = new_msg;
        new_msg_available = 0;
    }else{
        message = 0xFFFF;
    }   
}

ISR(SIG_OUTPUT_COMPARE0B)
{
    PORTB ^= 0xFF;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T12:26:53.563

Yu 使用了一个过时的中断名称。

请参阅：[avr-libc 文档，“中断向量名称”](http://www.nongnu.org/avr-libc/user-manual/group__avr__interrupts.html)

要使用的新名称是`ISR( TIMER0_COMPA_vect )`

# iphone - 如何每周从我的应用程序中通过警报声通知用户？

> ID：15174024
> 
> 赞同：0
> 
> 时间：2013-03-02T11:39:56.383
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

```
UILocalNotification *localNotification = [[UILocalNotification alloc] init];
[localNotification setFireDate:[NSDate dateWithTimeIntervalSinceNow:3600]];
[localNotification setAlertAction:@"Launch"];
[localNotification setAlertBody:[alertBodyField text]];
[localNotification setHasAction: YES];
[localNotification setApplicationIconBadgeNumber:[[UIApplication sharedApplication] applicationIconBadgeNumber]+1];
[[UIApplication sharedApplication] scheduleLocalNotification:localNotification];
[alertNotification setHidden:NO]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:13:44.760

```
UILocalNotification *localNotification = [[UILocalNotification alloc] init];
[localNotification setFireDate:[NSDate dateWithTimeIntervalSinceNow:3600]];
[localNotification setAlertAction:@"Launch"];
[localNotification setAlertBody:[alertBodyField text]];
[localNotification setHasAction: YES];

// change
localNotification.repeatInterval = NSWeekCalendarUnit;    // set the repeat interval
localNotification.soundName = UILocalNotificationDefaultSoundName; // set alert sound

[localNotification setApplicationIconBadgeNumber:[[UIApplication sharedApplication] applicationIconBadgeNumber]+1];
[[UIApplication sharedApplication] scheduleLocalNotification:localNotification];
[alertNotification setHidden:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T12:08:35.557

**这里重复时间间隔列表：**

指定日历单位，例如日和月。

```
enum {
   NSEraCalendarUnit = kCFCalendarUnitEra,
   NSYearCalendarUnit = kCFCalendarUnitYear,
   NSMonthCalendarUnit = kCFCalendarUnitMonth,
   NSDayCalendarUnit = kCFCalendarUnitDay,
   NSHourCalendarUnit = kCFCalendarUnitHour,
   NSMinuteCalendarUnit = kCFCalendarUnitMinute,
   NSSecondCalendarUnit = kCFCalendarUnitSecond,
   NSWeekCalendarUnit = kCFCalendarUnitWeek,
   NSWeekdayCalendarUnit = kCFCalendarUnitWeekday,
   NSWeekdayOrdinalCalendarUnit = kCFCalendarUnitWeekdayOrdinal,
   NSQuarterCalendarUnit = kCFCalendarUnitQuarter,
   NSWeekOfMonthCalendarUnit = kCFCalendarUnitWeekOfMonth,
   NSWeekOfYearCalendarUnit = kCFCalendarUnitWeekOfYear,
   NSYearForWeekOfYearCalendarUnit = kCFCalendarUnitYearForWeekOfYear
   NSCalendarCalendarUnit = (1 << 20),
   NSTimeZoneCalendarUnit = (1 << 21),
};
typedef NSUInteger NSCalendarUnit; 
```

**在您的情况下：**

将重复间隔设置为`'NSWeekCalendarUnit'`应该可以解决问题。它每周在与原始通知相同的日期和时间重复。

对于设置通知声音：

```
localNotification.soundName = UILocalNotificationDefaultSoundName; // Here you can also use custom sound . 
```

对于自定义声音

```
localNotification.soundName = @"alarm_sound.wav";// put name of sound file 
```

# xamarin.ios - MonoTouch - 如何覆盖静态 UICollectionViewLayout.layoutAttributesClass

> ID：15174025
> 
> 赞同：2
> 
> 时间：2013-03-02T11:39:56.173
> 
> 标签：xamarin.ios, uicollectionview, xamarin, uicollectionviewlayout

我对这个问题有相反的[问题](https://stackoverflow.com/questions/13487271/monotouch-how-to-override-static-uiview-layerclass)

与 UIView 不同，monotouch 省略了静态方法 layerClass 的定义，大概是为了允许您在子类中定义它，layoutAttributesClass 是在 UICollectionViewLayout 中定义的，我不知道如何在我的子类中覆盖它。

我试过了...

```
 [Export ("layoutAttributesClass")]
    public static Class LayoutAttributesClass {
        get { return new Class(typeof(MyClass)); }
    } 
```

...但这从未被调用过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:51:39.560

这实际上有效，不要让隐藏继承的成员警告让你失望（就像我一样） - 你可以使用 new 运算符来摆脱它，它仍然有效。

如果您沿着这条路线走，真正的问题是在您的 UICollectionViewLayoutAttributes 子类上实现 copyWithZone，因为 Xamarin 相当缺乏对此的支持

# django - 注册表单唯一邮箱

> ID：15174028
> 
> 赞同：3
> 
> 时间：2013-03-02T11:40:21.733
> 
> 标签：django, django-registration

我用`django-inspectional-registration`的是官方的`django-registration`。

我想确保用户电子邮件字段的唯一性，但我在使用时：

```
url(r'^register/$', RegistrationView.as_view(), {'form_class' : RegistrationFormUniqueEmail},
    name='registration_register'), 
```

如建议的那样，使用相同电子邮件的新注册始终通过验证。

有什么建议么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-02T16:55:18.857

尝试将表单类作为参数传递给 as_view

```
url(r'^register/$', RegistrationView.as_view(form_class=RegistrationFormUniqueEmail),
name='registration_register') 
```

# android - Android：保持与应用程序相关的本地文件的最新记录

> ID：15174029
> 
> 赞同：1
> 
> 时间：2013-03-02T11:40:25.403
> 
> 标签：android, provider, local-files

我一直在阅读有关内容提供程序和媒体商店的信息，但我仍然不确定解决这个常见问题的最佳方法是什么。

为了简化，假设我想创建一个应用程序来阅读电子书。用户将以某种方式将他们的电子书复制到设备存储中（即：使用 USB 和他们的计算机，从保管箱、电子邮件......）。电子书可能有多种格式（mobi、epub、...）。由于这些文件不是媒体文件，因此我不能为此目的使用媒体商店。同样重要的是要注意，我不希望为某些类型的文件（例如我的示例中的电子书）提供具体的解决方案。我想要一个适用于所有类型文件的解决方案，即使是最奇特的文件。

我想对设备存储进行扫描，以显示设备中保存的电子书列表。我想这应该在第一次启动应用程序时完成，然后如果用户想要更新列表。

我看到的问题是用户可能会删除我的应用程序之外的一些电子书文件，因此它可能会显示一些不再存在的旧条目。当然，如果用户选择删除的条目，我可以显示错误消息，但也许有更好的解决方案。

我的问题基本上是使文件列表保持最新的最佳策略是什么。我所说的“最佳策略”是指避免潜在的严重错误并使一切对用户尽可能透明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:11:15.433

我认为当用户选择已删除的条目时向用户显示错误消息是目前最好的方法。您还可以在用户启动您的应用程序后启动后台服务以检查文件列表。在大多数情况下，代码会比用户的反应更快。我认为应用程序可以在用户与数据交互之前自行更新。或者您可以在更新数据时仅显示进度条，并在完成后显示数据（书籍）。

或者，有[`FileObserver`](http://developer.android.com/reference/android/os/FileObserver.html). 但这是不可能的，我认为。您需要后台服务来监视文件。这对电池寿命和设备性能不利。

# wordpress - 设计多语言网站

> ID：15174030
> 
> 赞同：2
> 
> 时间：2013-03-02T11:40:55.360
> 
> 标签：wordpress, web, multilingual

我目前正在使用 wordpress 开发一个三语网站，但目前对如何完成设计感到困惑。由于应该通过单个管理页面编辑整个站点，我应该如何创建新文章并仅包含语言 A 而不是语言 B？或者我应该为每种语言开发 3 个不同的 wordpress 网站，从而也有 3 个不同的主题？

关于如何实现这一点的任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:41:53.473

查看像[http://wpml.org](http://wpml.org)这样的插件，它们应该可以解决问题。奇迹般有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:30:25.487

我还在 Wordpress 中开发多语言网站，并且正在使用免费插件[qTranslate](http://wordpress.org/extend/plugins/qtranslate/)。

**您可以在“管理”>“设置”>“语言”**下添加所需的语言和其他设置，然后在编辑帖子/页面时在语言之间切换，就像使用选项卡在 HTML 和 Visual 之间切换一样。

# .net - 有符号的 4 字节大端整数是什么意思以及如何在 vb.net 中形成一个？

> ID：15174031
> 
> 赞同：1
> 
> 时间：2013-03-02T11:41:01.627
> 
> 标签：.net, vb.net

我正在尝试创建一个 gamespy v4 游戏服务器查询工具。在第一个响应中，我得到以字节为单位的 ASCII 表示的数字。我将其转换为整数。现在我需要将其转换为 4 字节大端整数并将其发送到服务器。4字节大端整数实际上是什么意思，我如何形成一个？我正在使用 VB.NET。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T12:09:45.797

一个 4 字节的大端整数是一个整数，它是我们的字节长，最高有效位在前。

生成 4 字节 Big-endian 整数的一种方法是使用`IPAddress.HostToNetworkOrder(int32)`. 为此：

```
IntegerAsBytes = IPAddress.HostoNetworkOrder(DirectCast(Integer,Int32)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T13:34:31.723

这是一个解释

[Big Endian 和 Little Endian 架构的解释](http://support.microsoft.com/kb/102025)

```
 Dim test1 As Int32 = &H12345678

    Dim test2 As Integer

    test2 = Net.IPAddress.NetworkToHostOrder(test1)

    Debug.WriteLine(String.Format("{0:x}  {1:x}", test1, test2)) 
```

# android - 如何为 NDK 转换 C++ 代码？

> ID：15174033
> 
> 赞同：3
> 
> 时间：2013-03-02T11:41:02.333
> 
> 标签：android, c++, android-ndk, java-native-interface, native

此代码使用 C++ 代码调用 Linux 命令，但如何将其转换为通过 NDK 将其用作 lib？我看到仅使用 .C 文件的示例，以及 Jni 使用的变量与 C++ 变量不同。

这个 c++ 代码我需要将其转换为使用它，然后与 NDK 一起使用

```
#include <string>
#include <iostream>
#include <stdio.h>

std::string exec(char* cmd) {
FILE* pipe = popen(cmd, "r");
if (!pipe) return "ERROR";
char buffer[128];
std::string result = "";
while(!feof(pipe)) {
    if(fgets(buffer, 128, pipe) != NULL)
        result += buffer;
}
pclose(pipe);
return result;
} 
```

这适合做吗？

在**Android.mk中**

```
LOCAL_PATH := $(call my-dir)

 include $(CLEAR_VARS)

 # Here we give our module name and source file(s)
 LOCAL_MODULE    := NDK1
 LOCAL_SRC_FILES := NDK1.cpp
include $(BUILD_SHARED_LIBRARY) 
```

假设我的本机方法是 exec(char* cmd)，对于**NDK1.cpp**

```
#include <string>
#include <iostream>
#include <stdio.h>
#include <jni.h>

  jstring Java_com_mindtherobot_samples_ndkfoo_MainActivity_exec(JNIEnv*     env, jobject javaThis , Jchar* cmd) {

......... same code above
 return result;

  } 
```

如何安排这些文件以获得正确的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T12:25:27.280

您仍然需要带有本机方法声明的 MainActivity java 代码。我不知道您是没有发布它还是忘记实施它。它应该是这样的：

```
public class MainActivity extends Activity
{

    /*Don't forget to load the library!!*/
    static {
        System.loadLibrary("NDK1");
    }

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        // your initialization here...
    }

    public native String exec(String cmd);
} 
```

此外，正如 g-makulik 在评论中指出的那样，您在本机代码中返回了一个 c++ 字符串，但您应该返回一个 Java 字符串。NDK1.cpp 文件应该类似于以下内容：

```
#include <string>
#include <iostream>
#include <stdio.h>
#include <jni.h>

std::string exec(char* cmd) {
    FILE* pipe = popen(cmd, "r");
    if (!pipe) return "ERROR";
    char buffer[128];
    std::string result = "";
    while(!feof(pipe)) {
        if(fgets(buffer, 128, pipe) != NULL)
        result += buffer;
    }
    pclose(pipe);
    return result;
}

jstring Java_com_mindtherobot_samples_ndkfoo_MainActivity_exec(JNIEnv* env, jobject javaThis , Jchar* cmd) {
    std::string result = exec(cmd); 
    return (*env)->NewStringUTF(env, result);
} 
```

最后，您应该运行 ndk-build 脚本来为您的代码生成共享库。请务必将 NDK1.cpp 文件与 Android.mk 文件放在 jni 文件夹中的同一目录中（假设您不想更改 Android.mk 文件以在其他地方查找源）。假设您使用的是 linux（我不知道它在 Windows 上是如何工作的），您应该打开一个终端，其中有您的 Android.mk。在那里你必须运行命令'ndk-build'。如果一切正常，您将不会收到任何错误，并且 .so 文件将被复制到项目的 libs 文件中。

更新：也许您需要添加 stl 库才能使用字符串类。您可以尝试在与 Android.mk 相同的目录中添加一个 Application.mk 文件，其中包含以下内容：

```
APP_ABI := armeabi armeabi-v7a
APP_STL := gnustl_static 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-04T22:03:51.067

Android 不允许直接从内部或外部存储读取文件。这就是为什么所有人都使用 Android 操作系统的原因，因为它可以阻止安全漏洞。如果您想使用 C++ 本地代码读取文件，则必须使用来自 C++ 的 Java Api 调用。

```
AAssetManager* mgr = AAssetManager_fromJava(env,assetManager);
AAsset* asset = AAssetManager_open(mgr,"textfile.txt", AASSET_MODE_UNKNOWN);

if (NULL == asset) {

    return; //exit with error not loaded
}
long size = AAsset_getLength(asset);
char* buffer = (char*) malloc (sizeof(char)*size);
AAsset_read (asset,buffer,size);
AAsset_close(asset);
free(buffer); 
```

这就对了。您还必须从 java 传递assetManager

```
public native void readTxtFile(AssetManager assetManager); 
```

并使用此功能获取资源

```
AssetManager  assetMgr; //define this as global variable

protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
assetMgr = getResources().getAssets(); //very important dont forget!
readTxtFile(assetMgr);
} 
```

并且您还必须在 Eclipse 的 Android.mk 或 android{} 标签内的 Build.gradle(Android Studio) 中添加链接器“log”和“android”库

```
ndk {
        moduleName "your_module_name"
        ldLibs "android","log"
        //ldLibs.add("android")
    } 
```

如果您在 Android Studio 中使用外部 CMakeList.txt

```
find_library( # Sets the name of the path variable.
          android-lib

          # Specifies the name of the NDK library that
          # you want CMake to locate.
          android )
find_library( # Sets the name of the path variable.
          log-lib

          # Specifies the name of the NDK library that
          # you want CMake to locate.
          log )

target_link_libraries( native-lib 
                   ${log-lib}
                    ${android-lib}) 
```

而且你还必须像这样声明 Jni c++ 函数

```
void Java_com_example_lenovo_firstopencv_MainActivity_salt(JNIEnv *env,
jobject instance,jobject assetManager) { /*copy above c++ code to here*/} 
```

不要忘记在主文件夹中创建资产文件夹，因为您的文件（textfile.txt）位于资产文件夹中，并且资产管理器对象从那里读取。这就对了。我花了 2 天时间来编写这段代码。享受并支持开源；）

# vb.net - 写入文件时保留现有文本

> ID：15174034
> 
> 赞同：2
> 
> 时间：2013-03-02T11:41:03.633
> 
> 标签：vb.net

`Tester.txt`它只是说“你好” 。

我现在运行这个：

```
Sub Main()
    Dim fileName As String
    Dim aFileStream As FileStream
    Dim aWriter As StreamWriter
    fileName = "...\Tester.txt"
    Try
        aFileStream = New FileStream(fileName, FileMode.OpenOrCreate)
        aWriter = New StreamWriter(aFileStream)
        aWriter.WriteLine("World")
    Catch ex As Exception
        MessageBox.Show("found this {0}", ex.Message)
    Finally
        If aWriter IsNot Nothing Then
            aWriter.Close()
        End If
        If aFileStream IsNot Nothing Then
            aFileStream.Close()
        End If
    End Try

End Sub 
```

现在“Hello”已经被“World”覆盖了。

我想保留文件中的现有文本，所以我想我可以先将该文本读入一个变量，然后再编写新内容：

```
Sub Main()
    Dim fileName As String
    Dim aFileStream As FileStream
    Dim aWriter As StreamWriter
    Dim aReader As StreamReader
    fileName = "...\Tester.txt"
    Try
        aFileStream = New FileStream(fileName, FileMode.OpenOrCreate)

        aReader = New StreamReader(aFileStream)
        Dim myContent As String = aReader.ReadToEnd()

        aWriter = New StreamWriter(aFileStream)
        aWriter.WriteLine("World")

    Catch ex As Exception
        MessageBox.Show("found this {0}", ex.Message)
    Finally
        If aWriter IsNot Nothing Then
            aWriter.Close()
        End If
        If aReader IsNot Nothing Then
            aReader.Close()
        End If
        If aFileStream IsNot Nothing Then
            aFileStream.Close()
        End If
    End Try

End Sub 
```

这是保留文件中已有文本的标准方法吗？
我可以在不使用实例的情况下保留现有信息`StreamReader` 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T13:59:50.723

当然 - 你正在寻找的是所谓的`Append`。例如，如果您更喜欢共享调用（不创建任何类的实例） ，您可以使用[AppendAllText 。](http://msdn.microsoft.com/en-us/library/system.io.file.appendalltext.aspx)或者通过[StreamWriter](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx)，通过[这个构造函数](http://msdn.microsoft.com/en-us/library/36b035cb.aspx)。对于您的情况，您可以更换这块：

```
Dim fileName As String
Dim aFileStream As FileStream
Dim aWriter As StreamWriter
fileName = "...\Tester.txt"
Try
    aFileStream = New FileStream(fileName, FileMode.OpenOrCreate)
    aWriter = New StreamWriter(aFileStream)
    aWriter.WriteLine("World") 
```

有了这个（请注意，我还将您的代码压缩成更少的行，结果相同）：

```
Dim aWriter As StreamWriter
Try
    aWriter = New StreamWriter("...\Tester.txt", True)
    aWriter.WriteLine("World") 
```

并将`World`附加到文件的末尾。如果文件不存在，它将被创建，所以它已经`FileMode.OpenOrCreate`在幕后包含了。

使用`AppendAllText`，它变得更短：

```
IO.File.AppendAllText("...\Tester.txt", "World") 
```

作为旁注，您可以避免在您的`Finally`块中调用它：

```
If aReader IsNot Nothing Then
  aReader.Close()
End If 
```

如果您使用[Using 子句](http://msdn.microsoft.com/en-us/library/htd05whh.aspx)：

```
Using aWriter As New StreamWriter("...\Tester.txt", True)
  aWriter.WriteLine("World")
End Using 
```

您仍然可以保留该`Try/Catch`子句，但最好更改它以捕获特定于文件的异常。例如，您可以使用[IOException](http://msdn.microsoft.com/en-us/library/system.io.ioexception.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T11:53:58.723

到达终点的正常方法是使用搜索。

```
aFileStream.Seek(0,SeekOrigin.End) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T14:21:52.450

为什么需要使用流？你不能使用 Io.File 函数吗？它们真的很容易使用。一些例子：

示例 1：

```
IO.File.WriteAllText("Text.txt", "Hello") 'This overwrite file content 
```

示例 2：

```
IO.File.AppendAllText("Text.txt", " World") 'This append file content 
```

示例 3：

```
Dim FileContent As String = IO.File.ReadAllText("Test.txt")
FileContent &= vbNewLine & "Hi!"
Io.File.WriteAllText("Text2.txt", FileContent) 
```

您可以使用等效的 WriteAllBytes、ReadAllBytes.. 事件读取/写入字节。

所有功能都可以在这里找到： [文件方法](http://msdn.microsoft.com/en-en/library/3z2ck8eh.aspx)

# asp.net - 在来自 linq 数据源的转发器控件中显示图像

> ID：15174036
> 
> 赞同：2
> 
> 时间：2013-03-02T11:41:05.677
> 
> 标签：asp.net, mysql, linq, repeater

我`linq datasource`在 asp.net 中有一个中继器控件。
我想显示存储在数据库表中的图像。

当我使用此代码时，我在其他表中有一个类别表和产品表

```
<% Eval("CategoryImage")%> . 
```

它显示`System.byte[]`在浏览器中，当我使用 asp 图像控件时，`Eval();`它会给我一个通常损坏的图像图标。

有人可以建议我一种直接从`mysql database`自身插入图像的方法吗？`linq datasource..`
我怎么能在堆栈溢出和asp标签中格式化html标签..

提前感谢帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T11:51:45.637

你可以使用这个功能

```
 public Image byteArrayToImage(byte[] byteArrayIn)
 {
    MemoryStream ms = new MemoryStream(byteArrayIn);
    Image returnImage = Image.FromStream(ms);
    return returnImage;
 } 
```

将字节数组转换为图像。

如果你有`byte array`，`Eval("CategoryImage")`那么你也可以调用这个函数`Eval`。
作为

```
<%# byteArrayToImage(Eval("CategoryImage"))%> 
```

未经测试，但它应该可以工作。

## 编辑 1

这是一个很好的链接
[argumentException was unhandled error when](https://stackoverflow.com/questions/7106179/argumentexception-was-unhandled-error-when-converting-byte-of-array-to-image)
[convert byte of array to image 如何将字节数组转换为图像并在数据网格中显示？](https://stackoverflow.com/questions/5186354/how-to-convert-byte-array-to-image-and-display-in-datagrid)

# php - 删除服务器上的文件后清除浏览器缓存

> ID：15174037
> 
> 赞同：3
> 
> 时间：2013-03-02T11:41:08.010
> 
> 标签：php, browser-cache

我在用户的浏览器上缓存图像以避免重复的网络请求。但是，有时这些图像会从服务器中删除，新的图像会以相同的名称取代它们。

我想将这些新图像提供给用户，但不知道如何告诉浏览器这样做。它没有发送任何请求（显然，这就是缓存的用途）。

谷歌结果显示无法完成。是这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T11:47:18.580

如果文件缓存在浏览器中，则不会被请求。所以你不能发送任何指令来刷新它。但是你可以：

*   更改文件名
*   添加版本号`imag.jpg?v=5`
*   如果您的图像要经常更改，请使用较短的到期时间

我个人使用第二个选项。在应用程序配置文件中定义版本号。然后可以在更改设计时更改版本号，所有图像/css/js 都会刷新。

```
define('VERSION_NUMBER', '2.1') 
```

然后在您的视图中使用定义：

```
<img src="image.jpg?v=<?php echo VERSION_NUMBER;?>" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:01:46.030

有很多复杂的方法可以使用 HTTP 控制缓存。一般机制是您告诉浏览器在指定的到期日期后重新检查图像。浏览器不会请求整个图像，而是发送诸如 之类的标头`If-Modified-Since`，服务器可以响应`304 Not Modified`或发送新图像。

具体如何执行此操作将取决于您提供图像的方式。如果您只是使用 Apache 从文件系统为它们提供服务，请查看该`mod_expires`模块。

如果您搜索“HTTP 缓存”，您应该会发现许多不同的技术。*您不能*做的一件事是主动告诉浏览器在服务器上修改某些内容时取消缓存，因为您只能响应浏览器发出的请求。

# hibernate - 使用休眠状态持久化 Joda Minutes 对象

> ID：15174039
> 
> 赞同：0
> 
> 时间：2013-03-02T11:41:13.547
> 
> 标签：hibernate, jodatime

我正在使用 jadira 罐子将我的 joda 对象与休眠状态保持一致。这适用于所有复杂的 Joda 对象，但我找不到任何类来持久化 Joda `Minutes`。我是否需要手动保留 Minutes 对象所代表的毫秒数？没有 jadira 课程可以为我做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T20:30:12.887

将其存储为`int`表示`Minutes`对象中的分钟数。这种对象没有 jadira 映射。如果您想`Minutes`直接从数据库中检索对象而不`int -> Minutes`进行`Minutes -> int`转换，请考虑创建**自定义 Hibernate 类型**- 您只需要实现 hibernate`UserType`接口 - 例如，如何创建自定义用户类型的示例可以在[此博客](http://blog.xebia.com/2009/11/09/understanding-and-writing-hibernate-user-types/)上找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-15T16:24:20.413

我向 Jadira Usertype 添加了一个 org.jadira.usertype.dateandtime.joda.PersistentMinutes 类 - 请参阅[http://jadira.sourceforge.net/apidocs/org/jadira/usertype/dateandtime/joda/PersistentMinutes.html](http://jadira.sourceforge.net/apidocs/org/jadira/usertype/dateandtime/joda/PersistentMinutes.html)

# android - 无法使用适用于 Android 的 aSmack 库创建多用户聊天 (MUC) 房间：“packet.DefaultPacketExtension 无法转换为 packet.MUCUser”

> ID：15174040
> 
> 赞同：12
> 
> 时间：2013-03-02T11:41:20.617
> 
> 标签：android, xmpp, asmack

对于一个应用程序，我需要能够创建一个多用户聊天室并加入它。聊天服务器是一个 openfire 服务器。

我曾经有：

```
MultiUserChat chat = new MultiUserChat(connection, roomName + "@conference.localhost");
chat.join(nickname); 
```

当房间不存在时，它会创建房间并加入。但是下一个用户不能加入。他得到一个 404，收件人不可用（404）。这表明聊天室被锁定或什么的。

然后我在文档中找到了代码并尝试了以下方法：

```
chat.create(nickname);

// Send an empty room configuration form which indicates that we want
// an instant room
chat.sendConfigurationForm(new Form(Form.TYPE_SUBMIT)); 
```

但是，当我尝试执行此操作时，它说它崩溃并在 logcat 中出现以下错误：

```
03-02 12:04:12.890: E/AndroidRuntime(20872): FATAL EXCEPTION:

 AsyncTask #3 03-02 12:04:12.890: E/AndroidRuntime(20872):

 java.lang.RuntimeException: An error occured while executing
 doInBackground() 
03-02 12:04:12.890: E/AndroidRuntime(20872): Caused
 by: java.lang.ClassCastException:

 org.jivesoftware.smack.packet.DefaultPacketExtension cannot be cast to
 org.jivesoftware.smackx.packet.MUCUser 03-02 12:04:12.890:
 E/AndroidRuntime(20872):   at
 org.jivesoftware.smackx.muc.MultiUserChat.getMUCUserExtension(MultiUserChat.java:2002)
 03-02 12:04:12.890: E/AndroidRuntime(20872):   at
 org.jivesoftware.smackx.muc.MultiUserChat.create(MultiUserChat.java:364)
 03-02 12:04:12.890: E/AndroidRuntime(20872):   at
 be.xios.crs.pivi.managers.XmppManager.createOrJoinChatGroup(XmppManager.java:116) 
```

希望有人可以帮助我并提供一些建议。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-02T13:59:08.533

编辑 04/2015：`SmackAndroid.init(Context)`Smack 4.1（或更高版本）不再需要调用。事实上`SmackAndroid`已经不存在了。

`org.jivesoftware.smack.packet.DefaultPacketExtension cannot be cast to org.jivesoftware.smackx.packet.MUCUser`通常表明您没有初始化 aSmack 的静态代码，该代码负责为 Smack 的各种数据包（和数据包扩展）类注册 Smack 提供程序。

对于大多数 aSmack 版本，只需调用

```
SmackAndroid.init(Context ctx) 
```

会成功的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-27T13:29:19.920

使用此代码..

```
MultiUserChat muc = new MultiUserChat(connection, "roomname@<server>");
muc.create("nickname1");

Form form = muc.getConfigurationForm();
Form submitForm = form.createAnswerForm();
for (Iterator fields = form.getFields();fields.hasNext();){
  FormField field = (FormField) fields.next();
    if(!FormField.TYPE_HIDDEN.equals(field.getType()) && field.getVariable()!= null){
        submitForm.setDefaultAnswer(field.getVariable());
    }
}               
submitForm.setAnswer("muc#roomconfig_publicroom", true);
muc.sendConfigurationForm(submitForm);
muc.join("nickname1");
}catch (Exception e) {
   e.printStackTrace();
} 
```

还可以在使用此方法登录之前手动配置提供程序管理器

```
public void configure(ProviderManager pm) {

    //  Private Data Storage
    pm.addIQProvider("query","jabber:iq:private", new PrivateDataManager.PrivateDataIQProvider());

    //  Time
    try {
        pm.addIQProvider("query","jabber:iq:time", Class.forName("org.jivesoftware.smackx.packet.Time"));
    } catch (ClassNotFoundException e) {
        Log.w("TestClient", "Can't load class for org.jivesoftware.smackx.packet.Time");
    }

    //  Roster Exchange
    pm.addExtensionProvider("x","jabber:x:roster", new RosterExchangeProvider());

    //  Message Events
    pm.addExtensionProvider("x","jabber:x:event", new MessageEventProvider());

    //  Chat State
    pm.addExtensionProvider("active","http://jabber.org/protocol/chatstates", new ChatStateExtension.Provider());
    pm.addExtensionProvider("composing","http://jabber.org/protocol/chatstates", new ChatStateExtension.Provider()); 
    pm.addExtensionProvider("paused","http://jabber.org/protocol/chatstates", new ChatStateExtension.Provider());
    pm.addExtensionProvider("inactive","http://jabber.org/protocol/chatstates", new ChatStateExtension.Provider());
    pm.addExtensionProvider("gone","http://jabber.org/protocol/chatstates", new ChatStateExtension.Provider());

    //  XHTML
    pm.addExtensionProvider("html","http://jabber.org/protocol/xhtml-im", new XHTMLExtensionProvider());

    //  Group Chat Invitations
    pm.addExtensionProvider("x","jabber:x:conference", new GroupChatInvitation.Provider());

    //  Service Discovery # Items    
    pm.addIQProvider("query","http://jabber.org/protocol/disco#items", new DiscoverItemsProvider());

    //  Service Discovery # Info
    pm.addIQProvider("query","http://jabber.org/protocol/disco#info", new DiscoverInfoProvider());

    //  Data Forms
    pm.addExtensionProvider("x","jabber:x:data", new DataFormProvider());

    //  MUC User
    pm.addExtensionProvider("x","http://jabber.org/protocol/muc#user", new MUCUserProvider());

    //  MUC Admin    
    pm.addIQProvider("query","http://jabber.org/protocol/muc#admin", new MUCAdminProvider());

    //  MUC Owner    
    pm.addIQProvider("query","http://jabber.org/protocol/muc#owner", new MUCOwnerProvider());

    //  Delayed Delivery
    pm.addExtensionProvider("x","jabber:x:delay", new DelayInformationProvider());

    //  Version
    try {
        pm.addIQProvider("query","jabber:iq:version", Class.forName("org.jivesoftware.smackx.packet.Version"));
    } catch (ClassNotFoundException e) {
        //  Not sure what's happening here.
    }

    //  VCard
    pm.addIQProvider("vCard","vcard-temp", new VCardProvider());

    //  Offline Message Requests
    pm.addIQProvider("offline","http://jabber.org/protocol/offline", new OfflineMessageRequest.Provider());

    //  Offline Message Indicator
    pm.addExtensionProvider("offline","http://jabber.org/protocol/offline", new OfflineMessageInfo.Provider());

    //  Last Activity
    pm.addIQProvider("query","jabber:iq:last", new LastActivity.Provider());

    //  User Search
    pm.addIQProvider("query","jabber:iq:search", new UserSearch.Provider());

    //  SharedGroupsInfo
    pm.addIQProvider("sharedgroup","http://www.jivesoftware.org/protocol/sharedgroup", new SharedGroupsInfo.Provider());

    //  JEP-33: Extended Stanza Addressing
    pm.addExtensionProvider("addresses","http://jabber.org/protocol/address", new MultipleAddressesProvider());

    //   FileTransfer
    pm.addIQProvider("si","http://jabber.org/protocol/si", new StreamInitiationProvider());

    pm.addIQProvider("query","http://jabber.org/protocol/bytestreams", new BytestreamsProvider());

    //  Privacy
    pm.addIQProvider("query","jabber:iq:privacy", new PrivacyProvider());
    pm.addIQProvider("command", "http://jabber.org/protocol/commands", new AdHocCommandDataProvider());
    pm.addExtensionProvider("malformed-action", "http://jabber.org/protocol/commands", new AdHocCommandDataProvider.MalformedActionError());
    pm.addExtensionProvider("bad-locale", "http://jabber.org/protocol/commands", new AdHocCommandDataProvider.BadLocaleError());
    pm.addExtensionProvider("bad-payload", "http://jabber.org/protocol/commands", new AdHocCommandDataProvider.BadPayloadError());
    pm.addExtensionProvider("bad-sessionid", "http://jabber.org/protocol/commands", new AdHocCommandDataProvider.BadSessionIDError());
    pm.addExtensionProvider("session-expired", "http://jabber.org/protocol/commands", new AdHocCommandDataProvider.SessionExpiredError());
} 
```

只需使用-configure(ProviderManager.getInstance()) 调用此方法；

# fabricjs - 在 FabricJS 中添加到画布的图像的来源是什么？

> ID：15174041
> 
> 赞同：1
> 
> 时间：2013-03-02T11:41:22.363
> 
> 标签：fabricjs

为什么向画布添加图像时，它不以 0x0 开头，而是从 -this.width / 2,-this.height / 2 开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T12:34:38.637

默认原点是中心。您可以更改此行为设置[`object.originX`](http://fabricjs.com/docs/symbols/fabric.Object.html#originX)和[`object.originY`](http://fabricjs.com/docs/symbols/fabric.Object.html#originY).

# dbus - 在互联网上为多台机器使用 D-Bus

> ID：15174043
> 
> 赞同：1
> 
> 时间：2013-03-02T11:41:52.240
> 
> 标签：dbus

我正在编写一个服务于不同机器的服务器（用 C 语言）。我想用D-Bus通过Internet进行远程过程调用，但听说D-Bus不能多机使用，只能一台机器使用。是对的吗？我可以在这种情况下使用 D-Bus 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-29T18:50:32.133

简短的回答是肯定的，这是可能的；dbus 可以在不同的机器上使用（但请参阅下面的安全警告）。

在您的服务器上，dbus-daemon 配置文件（您可能只想为您的服务设置一个完整的其他总线，而不是重用系统或会话总线）将需要配置为通过 TCP 接受连接，而不仅仅是通过本地套接字`/tmp`. 有一些技巧可以[在 dbus-daemon](https://stackoverflow.com/a/13275973/2167797)中设置适当的侦听命令，这些技巧有据可查。

此外，如果您无法修改本地 dbus-daemon（或者您被迫使用随 RHEL 分发的旧的、损坏的 dbus-daemon 版本，它不会侦听远程套接字），您可以运行一个名为[dbus-daemon的应用程序-proxy](https://github.com/alban/dbus-daemon-proxy)将侦听套接字并将连接转发到本地 dbus-daemon。

无论哪种方式，在您的客户端计算机上，您都需要设置**DBUS_SESSION_BUS_ADDRESS**变量以获取 dbus-daemon 或代理服务器正在侦听的 IP 地址和端口。

**安全警告**：线路上的数据没有加密，dbus 访问机制仅适用于本地连接，不适用于 TCP 连接。要正确保护使用 TCP 传输机制的 dbus 连接，您需要做一些工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-05T10:43:29.850

即使您最终没有使用完整的 D-Bus 总线（`dbus-daemon`如仲裁器和拓扑。

这意味着您不必重新发明有线协议（包含所有潜在的解析器错误和漏洞利用），但可以在高级系统拓扑和传输上保留一些灵活性；例如，可能与单独的现有身份验证系统集成。

最简单的方法是使用GLib 中的[`GDBusMessage`](https://developer.gnome.org/gio/stable/GDBusMessage.html)or API，使用or进行序列化。不要*使用*libdbus，因为它级别太低，并且使用过时的 API 设计，这些设计比 GLib 等更现代的 API 更难从 C 中正确使用。同样，不要使用 dbus-glib，因为它的设计也很笨拙和过时。[`GVariant`](https://developer.gnome.org/glib/stable/glib-GVariant.html)[`g_dbus_message_to_blob()`](https://developer.gnome.org/gio/stable/GDBusMessage.html#g-dbus-message-to-blob)[`g_variant_get_data()`](https://developer.gnome.org/glib/stable/glib-GVariant.html#g-variant-get-data)

 ** * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-04T05:55:31.250

我无法确定 dbus-daemon 的实现，但从有线协议的角度来看，可能有以下场景：

1）您希望机器 A 和 B 交换消息，并且它们都可以通过 tcp 连接到服务器 C 上的 dbus 总线守护进程。对于 C，它们只是由连接名称标识的“连接” - 作为结果`org.freedesktop.DBus.Hello`或`org.freedesktop.DBus.RequestName`- 参见“[消息总线名称](http://dbus.freedesktop.org/doc/dbus-specification.html#message-bus-names)” '

2）机器A连接机器B，使用点对点（无消息总线）方式交换消息。*

# php - 设置函数参数，该参数本身包含其他参数

> ID：15174045
> 
> 赞同：1
> 
> 时间：2013-03-02T11:42:15.393
> 
> 标签：php, function, parameters

```
 function some ($html, $name) {
        return $html;
    }

    $outer_html = "<div>".$name."</div>";

    echo some($outer_html, "Jon"); 
```

我明白我得到`Notice: Undefined variable: name in`

但是如何设置函数参数，它本身包含其他参数？

我想做这个是因为，我需要生成`$outer_html`函数，然后设置这个准备好的 html 代码来运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T12:06:43.563

为什么不使用[sprintf()](http://php.net/manual/en/function.sprintf.php)？

```
function some ($html, $name) {
    return sprintf($html, $name); 
}

echo some("<div>%s</div>", "Jon"); 
```

输出

```
<div>Jon</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T11:47:29.327

您需要使用 global 关键字。文档[在这里](http://php.net/manual/en/language.variables.scope.php)。

您将拥有：

```
function yourFunction() {
    global $yourVar;

    // ...
}

// $yourVar keep its value from yourFunction 
```

# jquery - jquery .map() 返回地图内的对象

> ID：15174049
> 
> 赞同：4
> 
> 时间：2013-03-02T11:42:54.080
> 
> 标签：jquery, json, map, return

嘿嘿，

我只是在构建某种地理编码器，我需要将 json-map 发送到 groovy 后端，

试图映射这个 ul 结构**：http:** [//jsfiddle.net/PJFVN/1/](http://jsfiddle.net/PJFVN/1/)

```
<ul id="hiddenmap">
<li  class="hidden" id="street">Westerwarft 2</li>
<li  class="hidden" id="plz">25859</li>
<li  class="hidden" id="city">Hallig Hooge</li>
<li  class="hidden" id="country" value="" >DE</li>
<li  class="hidden" id="lon" > 8.516472</li>
<li  class="hidden" id="lat" >54.577993</li>
</ul> 
```

到一张看起来像的地图

```
[{"street":"Westerwarft 2","plz":"25859","location":{"lat":"54.577993","lon":" 8.516472"},"country":"DE"}] 
```

使用以下 js：

```
var map =  $('#hiddenmap').map(function() {
var $item = $(this);
var loc =   '{"lat":"'+$item.find('li#lat').text()+'","lon":"'+$item.find('li#lon').text()+'"},';
return {  
street: $item.find('li#street').text(),
plz: $item.find('li#plz').text(),
location:loc ,
country: $item.find('li#country').text()
};
}).get();
var v = JSON.stringify(map); 
alert(v); 
```

但正如你在小提琴中看到的那样，我的肮脏尝试抛出了

```
[{"street":"Westerwarft 2","plz":"25859","location":"{\"lat\":\"54.577993\",\"lon\":\" 8.516472\"},","country":"DE"}] 
```

所以我需要一种本地方式来获取地图内的位置对象，并且从角度来看，我需要将更多地址加入地图

有没有办法这样做？

因为目前我正在重蹈覆辙，为每个看起来很糟糕的不同情况手动构建地图，例如：

```
 var String = '['+'{'+'"fax":'+'"'+fax1+'"'+','+'"genau":'+genau1+','+'"land":'+'"'+land1+'"'+','+'"location": {'+'"lon":'+lon1+','+'"lat":'+lat1+'},'+'"notruf":'+'"'+notruf1+'"'+','+'"ort":'+'"'+ort1+'"'+','+'"plz":'+'"'+plz1+'"'+','+'"strasse":'+'"'+strasse1+'"'+','+'"telefon":'+'"'+telefon1+'"},{'+'"fax":'+'"'+fax2+'"'+','+'"genau":'+genau2+','+'"land":'+'"'+land2+'"'+','+'"location": {'+'"lon":'+lon2+','+'"lat":'+lat2+'},'+'"notruf":'+'"'+notruf2+'"'+','+'"ort":'+'"'+ort2+'"'+','+'"plz":'+'"'+plz2+'"'+','+'"strasse":'+'"'+strasse2+'"'+','+'"telefon":'+'"'+telefon2+'"}]'; 
```

我需要摆脱这个

提前感谢您的任何提示

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-02T12:00:07.217

也许我没有正确理解您的问题，但我不确定您是否为该位置手动构建了一个字符串。你为什么不把它变成一个原生对象，让 JSON.stringify() 处理转换。

像这样：

```
var map = $('#hiddenmap').map(function () {
    var $item = $(this);
    var loc = {
        lat: $item.find('li#lat').text(),
        lon: $item.find('li#lon').text()
    };
    return {
        street: $item.find('li#street').text(),
        plz: $item.find('li#plz').text(),
        location: loc,
        country: $item.find('li#country').text()
    };
}).get();
var v = JSON.stringify(map);
console.log(v);
alert(v); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T11:49:34.827

只需将`loc`变量定义为真正的 JSON 映射，而不是表示 JSON 映射的字符串：http: [//jsfiddle.net/PJFVN/2/](http://jsfiddle.net/PJFVN/2/)

```
jQuery(document).ready(function ($) {
    $('#action').click(function () {
        var map = $('#hiddenmap').map(function () {
            var $item = $(this);
            var loc = {lat : $item.find('li#lat').text(), 
                       lon : $item.find('li#lon').text()};
            return {
                street: $item.find('li#street').text(),
                plz: $item.find('li#plz').text(),
                location: loc,
                country: $item.find('li#country').text()
            };
        }).get();
        var v = JSON.stringify(map);
        alert(v);
    });
}); 
```

# python - videomixing decodebin 流

> ID：15174050
> 
> 赞同：0
> 
> 时间：2013-03-02T11:42:56.040
> 
> 标签：python, gstreamer

几天来，我一直在努力将视频流与 python 中的 gstreamer 混合。

我首先尝试使用 playbin2，但似乎无法将 playbin2 与 videomixer 一起使用。然后我尝试用 decodebin 做同样的事情。我已经设法使用 gstreamer 管道来做到这一点，但没有办法让它在 python 中工作。有人知道如何将其翻译成 python 代码吗？

```
gst-launch filesrc location=test01.mpg ! decodebin ! \
videoscale ! ffmpegcolorspace ! video/x-raw-yuv, width=640, height=480 ! videobox alpha=0.5 left=-640 ! \
videomixer name=mix ! ffmpegcolorspace ! \
xvimagesink filesrc location=test02.mpg ! decodebin ! videoscale ! ffmpegcolorspace ! video/x-raw-yuv, width=640, height=480 ! videobox left=-600 ! \
mix. 
```

任何帮助将非常感激！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:07:33.740

我设法找到了一个有用的链接：

[http://wiki.pitivi.org/wiki/PyGST_Tutorial](http://wiki.pitivi.org/wiki/PyGST_Tutorial)

本教程的第 5 章说明了如何实现这一点......

给任何从 gstreamer 项目开始的人的小提示：如果你有选择，我建议你用 C 而不是 python 编写你的应用程序，因为 python API 非常不完整......

# yii - 如何将一个 ZF2 模块用作第三方库？

> ID：15174063
> 
> 赞同：1
> 
> 时间：2013-03-02T11:44:36.537
> 
> 标签：yii, zend-framework2, autoload

主要问题是关于 ZF2，但主要任务是如何将 ZF2 集成到 Yii。

如果是 ZF1，我只需要包含我需要的文件。ZF2 的结构稍微复杂一些。

特别是我需要加载 ServiceManager 模块。

我试过了：

```
$loader = new Zend\Loader\ClassMapAutoloader();
$loader->registerAutoloadMap(realpath(dirname(__FILE__) . '/lib/Zend/ServiceManager'));
$loader->register(); 
```

并得到一个错误：

```
Warning: include(/Project/lib/Zend/ServiceManager): failed to open stream: Invalid argument in /Project/lib/Zend/Loader/ClassMapAutoloader.php on line 186

Warning: include(): Failed opening '/Project/lib/Zend/ServiceManager' for inclusion (include_path='/Project/lib:.:/usr/local/zend/share/ZendFramework/library:/usr/local/zend/share/pear') in /Project/lib/Zend/Loader/ClassMapAutoloader.php on line 186

Fatal error: Uncaught exception 'Zend\Loader\Exception\InvalidArgumentException' with message 'Map file provided does not return a map. Map file: "/Project/lib/Zend/ServiceManager"' in /Project/lib/Zend/Loader/ClassMapAutoloader.php:88
Stack trace:
#0 /Project/index.php(14): Zend\Loader\ClassMapAutoloader->registerAutoloadMap('/Project/...')
#1 {main}
  thrown in /Project/lib/Zend/Loader/ClassMapAutoloader.php on line 88 
```

根据[文档](http://framework.zend.com/manual/2.1/en/modules/zend.loader.standard-autoloader.html)，我之前需要在配置数组中设置命名空间描述吗？

有人可以举个例子请如何只包含一个模块吗？

**更新 1：**

我也试过这个：

```
require_once 'Zend/Loader/StandardAutoloader.php';

$l = new Zend\Loader\StandardAutoloader();
$l->registerPrefix('Zend', realpath(dirname(__FILE__) . '/lib/Zend/') );
$l->register(); 
```

有用。之后我打电话给：

```
use Zend\Debug;
Zend\Debug::dump($l); 
```

这会再次出现错误：

```
Fatal error: Class 'Zend\Debug' not found in ... 
```

**更新 2：**

这段代码对我有用：

```
require_once 'Zend/Loader/StandardAutoloader.php';

$l = new Zend\Loader\StandardAutoloader();
$l->registerNamespace('Zend', realpath(dirname(__FILE__) . '/lib/Zend'));
$l->registerPrefix('Zend', realpath(dirname(__FILE__) . '/lib/Zend') );
$l->register(); 
```

现在我可以在项目的任何地方包含 Zend 库。无论如何，我很高兴看到其他解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:52:23.913

我有几个脚本位于 ZF2 正常区域之外，我需要使用框架的随机函数。我发现的简单解决方案是：

```
chdir(dirname(__DIR__));

require_once 'init_autoloader.php';

\Zend\Mvc\Application::init(require_once 'config/application.config.php'); 
```

这些文件没有什么特别之处，因为它们是 ZF2 Skeleton App 的标准配置。

现在我可以使用任何 ZF2 功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T15:22:52.430

我建议您反对您提出的解决方案，因为它有点像黑客。ZF2 的优点之一是它让您明确定义依赖项，以便您的应用程序可以轻松地与它们通信。因此，您可以通过 composer 将 Yii 安装为依赖项：

```
"yiisoft/yii": "dev-master" 
```

如果您通过 Composer 安装它，您的类自动加载器将使用对您的 Yii 框架的引用进行更新。因此，它将允许您通过 FQCN 访问这些文件，即：

```
use Yii\Path\To\Class as YiiClass;

...

$yii = new YiiClass(); 
```

或者：

```
$yii = new \Yii\Path\To\Class(); 
```

使用 Composer 还可以让您及时了解最新版本（您只需重新运行您的 composer 脚本，它就会为您安装所有内容）。

# ruby-on-rails - 从 ruby 类调用 jar 文件

> ID：15174068
> 
> 赞同：1
> 
> 时间：2013-03-02T11:45:53.257
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, jar

如何`jar`从类中调用文件（java 归档文件）`ruby`。并从中访问函数/方法。

我指的是以下[链接](http://kgilmersden.wordpress.com/2010/09/30/call-your-java-method-from-your-ruby-class/)

但我收到以下错误：

`'require': cannot load such file -- /tmp/Test.jar (LoadError)`

我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-09T23:38:27.087

您可以使用系统调用。如果您有很多用户，您可能会遇到性能问题，但对于大多数人来说，这应该可行：

```
# Create a directory (in this sample called "jars") inside public directory and move your jar file inside the newly created directory.

def externaljar

 argsA = ""
 argsB = ""

    Dir.chdir("#{RAILS_ROOT}/public/jars/") do

        # Use your path to the java according to the java directory installed in your machine.

        retResult  = system("/home/user/java/jdk1.7.0/bin/java -jar JSpell.jar #{argsA} #{argsB}")

    end #chdir
 end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T11:59:30.727

您不能从 Ruby 调用 Java 代码。您可能想看看[JRuby](http://jruby.org)。JRuby 是您链接中的人使用的，您可以在他`jruby Main.rb`在控制台中键入时看到它。

# regular-language - 是 L = {a^nb^m | n>m} 是规则的还是不规则的语言？

> ID：15174070
> 
> 赞同：12
> 
> 时间：2013-03-02T11:46:06.740
> 
> 标签：regular-language, dfa, formal-languages

我在解决/证明这个问题时遇到了麻烦。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-03T10:33:53.660

> L = {a ^n b ^m | n > m}**不是** 常规语言。

是的，这个问题在最初的几次尝试**中很棘手，值得投票。**

抽取引理是常规语言的必要属性，是正式证明语言不是常规语言的工具。

正式定义：[**为常规语言抽取引理**](http://en.wikipedia.org/wiki/Pumping_lemma_for_regular_languages#Formal_statement)

> 令*L*为常规语言。那么存在一个整数*p* ≥ 1 仅取决于*L*使得*L*中长度至少为*p的***每个字符串** *w*（*p*称为“泵送长度”）可以写成*w* = *xyz*（即*w*可以分为三个子字符串），满足以下条件：
> 
>  ***1.  | *是*| ≥1
> 2.  | *xy* | ≤ *p*
> 3.  对于**所有 *i*** ≥ 0，*xy ^i z* ∈ *L****

 **假设，如果你选择字符串*W* = a ^n b ^m where `(n + m) ≥ p`and `n > m + 1`。*W*的选择是有效的，但是这个选择**你不能**证明语言**不是**常规语言。因为有了这个`W`，你总是*至少有*一个选择，`y=a`通过重复 (for i =0 and i > 1) 的所有值来抽取*`a`*新*的****语言****字符串**`i`*** 。

 *在我写我的解决方案来证明语言不规则之前。请理解以下几点和注意：我在上面对泵引理做了粗体`every string w`和`all i`正式的定义。

*   尽管在语言中使用 Some [**Sufficiently large *W***](https://stackoverflow.com/questions/14705091/pumping-lemma-for-regular-language)时，您可以在 Language 中生成新字符串，但**不可能使用 ALL**！*W*有很多可能的选择（在我的证明中），您找不到***任何选择******y来为******所有 i >=0****生成语言中的***新字符串。因此，因为每个[**足够大的**](https://stackoverflow.com/questions/14705091/pumping-lemma-for-regular-language)[***W***](https://stackoverflow.com/questions/14705091/pumping-lemma-for-regular-language)都无法在语言中生成新字符串，因此语言**不是**常规的。*[](https://stackoverflow.com/questions/14705091/pumping-lemma-for-regular-language)***

 ******阅读：[*什么泵引理正式定义说*](https://stackoverflow.com/questions/14705091/pumping-lemma-for-regular-language?answertab=votes#tab-top)

*证明：使用抽水引理*

**步骤（1）：**选择字符串*W* = a ^n b ^m where `(n + m) ≥ p`and `n = m + 1`。

`Is this choice of` *`W`* `is valid according to pumping lemma?`

是的，这样的*W*在语言中是因为 number of *`a`*= n **>** number of *`b`*=m 。*W*在语言中并且足够大 >= *`p`*。

**步骤（2）：**现在选择 a`y`为**all** `i >= 0`生成新字符串。

而这一次是**没有**选择的余地`y`！为什么？

*首先*，要理解我们不能在*y**`b`*中包含符号，因为它会生成不符合模式的新字符串，*或者*生成的字符串总数将超过符号总数。 ***`b`**`a`***

 ***其次*，我们不能选择*y = some **a** 's*因为`i=0`你会得到一个新字符串，其中*`a`*s 的数量将小于数字*`b`*s，这在语言中是不可能的。（*记住`a`W 中的数量只是多一个`b`因此删除结果字符串 N(a)=N(b) 中不可接受的任何 a 手段，因为 n>m* )

因此，我们可以找到一些足够大的 W，但是使用它我们无法生成与常规语言的泵引理属性相矛盾的语言中的新字符串，因此语言 {a ^n b ^m | n > m} 确实**不是**常规语言。***********

# php - 打印多维数组并设置样式

> ID：15174074
> 
> 赞同：0
> 
> 时间：2013-03-02T11:46:26.453
> 
> 标签：php, codeigniter, multidimensional-array, nested

我有一个这样构建的数组

```
大批
(
    [6] => 数组
        (
            [id] => 6
            [parent_id] =>
            [文本] => 顶级评论
            [等级] => 1
        )

    [1] => 数组
        (
            [id] => 1
            [parent_id] =>
            [文本] => 顶级评论
            [等级] => 1
            [孩子] => 数组
                (
                    [2] => 数组
                        (
                            [id] => 2
                            [parent_id] => 1
                            [文本] => 对#1 的回应
                        )

                    [3] => 数组
                        (
                            [id] => 3
                            [parent_id] => 1
                            [文本] => 对#1 的回应
                            [孩子] => 数组
                                (
                                    [4] => 数组
                                        (
                                            [id] => 4
                                            [parent_id] => 3
                                            [文本] => 对#3 的回应
                                        )

                                )

                        )

                    [10] => 数组
                        (
                            [id] => 10
                            [parent_id] => 1
                            [文本] => 对 #2 的回应
                            [孩子] => 数组
                                (
                                    [11] => 数组
                                        (
                                            [id] => 11
                                            [parent_id] => 10
                                            [文本] => 对#10 的回应
                                            [孩子] => 数组
                                                (
                                                    [13] => 数组
                                                        (
                                                            [id] => 13
                                                            [parent_id] => 11
                                                            [文本] => 回复 #11
                                                            [孩子] => 数组
                                                                (
                                                                    [14] => 数组
                                                                        (
                                                                            [id] => 14
                                                                            [parent_id] => 13
                                                                            [文本] => 回复 #13
                                                                        )

                                                                )

                                                        )

                                                )

                                        )

                                    [12] => 数组
                                        (
                                            [id] => 12
                                            [parent_id] => 10
                                            [文本] => 对#10 的回应
                                        )

                                )

                        )

                )

        )

    [5] => 数组
        (
            [id] => 5
            [parent_id] =>
            [文本] => 顶级评论
            [等级] => 1
        )

    [9] => 数组
        (
            [id] => 9
            [parent_id] =>
            [文本] => 顶级评论
            [等级] => 1
        )

)

```

JSON

```
{"6":{"id":6,"parent_id":null,"text":"顶级评论","level":1},"1":{"id":1,"parent_id": null,"text":"顶级评论","level":1,"children":{"2":{"id":2,"parent_id":1,"text":"对#1的回应" },"3":{"id":3,"parent_id":1,"text":"响应 #1","children":{"4":{"id":4,"parent_id": 3,"text":"对#3的响应"}}},"10":{"id":10,"parent_id":1,"text":"对#2的响应","children":{" 11":{"id":11,"parent_id":10,"text":"响应 #10","children":{"13":{"id":13,"parent_id":11,"text":"响应 #11","children":{"14":{"id":14,"parent_id":13," text":"对#13的响应"}}}}},"12":{"id":12,"parent_id":10,"text":"对#10的响应"}}}}},"5 ":{"id":5,"parent_id":null,"text":"顶级评论","level":1},"9":{"id":9,"parent_id":null," text":"顶级评论","level":1}}parent_id":10,"text":"响应 #10"}}}}},"5":{"id":5,"parent_id":null,"text":"顶级评论","level ":1},"9":{"id":9,"parent_id":null,"text":"顶级评论","level":1}}parent_id":10,"text":"响应 #10"}}}}},"5":{"id":5,"parent_id":null,"text":"顶级评论","level ":1},"9":{"id":9,"parent_id":null,"text":"顶级评论","level":1}}
```

什么是最简单的呼应和风格的方法？像reddit一样说。我想在视图文件中进行样式设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:51:23.383

您可以尝试使用[http://ellislab.com/codeigniter/user-guide/helpers/html_helper.html#ol_and_ul](http://ellislab.com/codeigniter/user-guide/helpers/html_helper.html#ol_and_ul)，但我宁愿使用循环数组并生成 HTML 的自定义函数。

编辑：

```
function draw_comments($comments, $level = 0)
{
    echo  '<ul class="level' . $level . '">';
    foreach($comments as $comment)
    {
        draw_comment($comment);

        if(!empty($comment['children']))
            draw_comments($comment['children'], $level+1);
    }
    echo '</ul>';
}

function draw_comment($comment)
{
    echo '<li>';
    echo $comment['text'];
    echo '</li>';
}

draw_comments($comments_array); 
```

# javascript - 如何检测在 JavaScript 中按下了哪个表单输入类型=图像？

> ID：15174077
> 
> 赞同：0
> 
> 时间：2013-03-02T11:46:52.027
> 
> 标签：javascript, html

这是我的第一篇文章，所以要温柔。（我现在可能是在自找麻烦！）

我有一个 HTML 页面，其表单包含多个“图像”类型的输入以供提交。我发现了如何在表单声明中使用“提交时”运行 JavaScript 验证函数。但是一旦在 java 函数中，我找不到引用我单击的图像的方法，因此我可以检测到它是两者中的哪一个。

任何帮助将不胜感激。

马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T11:54:40.137

**如果您需要在服务器端执行此操作**：我想这与 type=submit 按钮的情况相同。还有一个关于[几个提交按钮](https://stackoverflow.com/questions/547821/two-submit-buttons-in-one-form)的问题。

**如果您需要在客户端执行此操作**：您可以绑定事件处理程序（在 event 上`onclick`），而不是在表单上，​​而是在按钮本身上。然后您可以将处理程序内的单击按钮称为`this`. 或者（我不确定它是否有效），您可以尝试处理[`event.target`](https://developer.mozilla.org/en-US/docs/DOM/event.target)财产。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T21:20:01.633

感谢您的帮助 B。结合您的提示并查看相关帖子，我发现以下代码很有效。

```
<script type="text/javascript">
var clicked;
function mysubmit() {
    alert(clicked);
}
</script>
<form action="" onsubmit="mysubmit();return false">
    <input type="submit" onclick="clicked='Save'" value="Save" />
    <input type="submit" onclick="clicked='Add'" value="Add" />
</form> 
```

然后我花了很长时间想知道为什么我的 if..then..else 不起作用。原来是因为我在'else'中使用了大写E！！！！这可能是因为我使用的是 Textpad 而不是适当的调试器。几十年来我一直在用 VB 编程，从来没有遇到过这么多语法问题！

# php - .htaccess 条件基于子目录

> ID：15174078
> 
> 赞同：0
> 
> 时间：2013-03-02T11:46:55.843
> 
> 标签：php, apache, .htaccess, url-rewriting

我想根据条件进行 301 重定向。

如果 url 在我的域之后有一个关键字**市场**，那么它应该被重定向为我的域和包含关键字的查询字符串。

例如

**[http://mydomain.com/marketplace/query](http://mydomain.com/marketplace/query)**

那么它应该被重定向如下

[http://mydomain.com/index.php?dir1=marketplace&dir2=query](http://mydomain.com/index.php?dir1=marketplace&dir2=query)

查询字符串参数名称 dir1,dir2。

请帮我 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:22:48.133

您可以在根目录的一个 .htaccess 文件中尝试此操作：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI}  !index\.php               [NC]
RewriteCond %{REQUEST_URI}  ^/marketplace/([^/]+)/?   [NC]
RewriteRule .*  index.php?dir1=marketplace&dir2=%1    [L] 
```

对于永久重定向，替换`[L]`为`[R=301,L]`

# event-handling - 没有 CQRS 的领域事件和版本控制

> ID：15174082
> 
> 赞同：5
> 
> 时间：2013-03-02T11:47:25.923
> 
> 标签：event-handling, domain-driven-design, optimistic-locking, eventual-consistency, domain-events

嗨，我有以下 senario，我不明白如何获得最终的一致性：

1.  用户 1 使用基于任务的 ui 更改客户名称
2.  应用服务调用聚合上的操作
3.  客户名称上的聚合触发事件已更改
4.  总线使用 nservicebus 发送消息
5.  NServicebus 服务终止
6.  用户 2 获得聚合并调用更改地址
7.  聚合操作称为
8.  触发域事件
9.  信息放在公共汽车上
10.  巴士重新启动
11.  消息 2 最先收到
12.  消息 2 已处理，其他有界上下文已更新为新地址
13.  现在收到消息 1，这是错误的顺序
14.  现在会发生什么

在 13 中如果我们在事件中传递聚合的版本会不会出现乐观并发错误？

如果是这样，消息 1 new 将应用于其他上下文中的对象。我们如何保持一致性？

这是阻止我在我的域中应用事件的问题。欢迎大家帮忙。

基本思想是在另一个上下文中更新另一个聚合。我只是停留在这个并发技术上。

我们没有在命令处理程序和总线上推送命令的意义上使用事件源或 CQRS。这只是我们希望异步发生的事件处理，因为我们有一个我们不希望更改的现有设计。

布莱尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T12:08:12.297

通常你会排队的消息。如果他们要排队，您将获得正确的排序。如果您想使用不支持通过您的服务总线排序的东西，请为您的事件添加一个序列号，以便另一方可以正确地重新排序它们。TCP 自 1981 年以来一直在这样做[http://www.ietf.org/rfc/rfc793.txt](http://www.ietf.org/rfc/rfc793.txt) :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T18:10:18.110

[这里](http://tech.dir.groups.yahoo.com/group/nservicebus/message/8798)讨论了与 NServiceBus 类似的问题。OP 建议使用 IBus.HandleCurrentMessageLater() 旋转直到另一条消息到达。这可以工作，但可能会出现问题，因为您永远不知道要等待多长时间。

一个更复杂的选择是使用[saga](http://support.nservicebus.com/customer/portal/articles/860458-sagas-in-nservicebus)这将等到导致特定版本的所有消息都到达。在这种情况下，排序是基于版本完成的，并且只有在聚合版本中的所有更改都发布到另一个 BC 时才有可能。假设消息 1 在聚合的版本 2 上运行。然后它增加聚合的版本并发布一个事件，说明它已在版本 2 上运行。消息 2 在聚合的版本 3 上运行并发布一个事件，说明它已在版本 3 上运行。当另一个 BC 中的 NServiceBus 端点在消息 1 之前收到消息 2，它知道最后收到的消息是在聚合的版本 1 上操作的，所以它需要一个在版本 2 上操作过的消息。它将启动一个等待下一条消息的 saga。一旦它收到消息 1，saga 将应用消息 1，然后应用消息 2 并释放 saga 状态。如果使用版本进行测序是不可接受的，则可以使用另一种测序策略。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T17:45:57.943

***糟糕**：我刚刚注意到您在示例中实际上使用了 2 个不同的任务（客户名称，然后是客户地址）。当然，这不是问题，因为顺序真的不重要。但我会留下我的答案，以防万一您的意图是进行两个相同类型的更改。*

与往常一样，我会想到几个问题/问题：

一方面，您的示例不需要端点失败，因为 2 个用户可以同时更新地址，并且处理的顺序可以是随机的。所以问题变成了哪一个是正确的地址。所以解决*这个*问题需要更多的分析。一方面，我想我们可以假设一个客户不会如此频繁地移动，以至于 2 个用户同时更新地址（甚至在它附近）--- :)

即便如此，也许第一个地址是正确的。

我认为对于这种情况，您想确定并发性，甚至是其他一些容忍度是否是一个问题。因此，也许一个地址每天只能更改一次，而任何其他更改都需要其他一些交互。因此，一些异常处理将是一种选择。

您真的不应该将其降低到技术级别来尝试解决它，而是查看流程/业务影响。

对于一个简单的解决方案，我会将消息发送日期与特定类型的最后操作日期匹配。因此，`ChangeAddressCommand`在处理消息时，您可以与当前消息进行比较`LastAddressChange`，如果消息是在上次更改日期之前发送的，则拒绝它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-24T10:13:25.580

据此，[您](http://codebetter.com/gregyoung/2010/08/12/eventual-consistency-and-set-validation/)应该问自己：

> 失败对业务的影响是什么？

在您当前的情况下，一百万个请求您会遇到此问题。如果您接受这两个请求为有效，我认为这不会对业务产生巨大影响。

# entity-framework - 先获取 ObjectContext EF 代码的引用

> ID：15174087
> 
> 赞同：0
> 
> 时间：2013-03-02T11:47:57.010
> 
> 标签：entity-framework, ef-code-first

我需要加载实体的导航属性。我一直在阅读一篇关于如何使用 Entity Framework (6.0) 加载导航属性的不同方法的[精彩文章。](http://msdn.microsoft.com/en-us/magazine/hh205756.aspx)

> 第二种显式加载的方法是来自 ObjectContext，而不是来自 EntityCollection 或 EntityReference。如果您依赖 Entity Framework 中的 POCO 支持，您的导航属性将不是 EntityCollections 或 EntityReferences，因此不会有 Load 方法。相反，您可以使用 ObjectContext.LoadProperty 方法。LoadProperty 使用泛型来标识要从中加载的类型，然后使用 lambda 表达式来指定要加载的导航属性。下面是使用 LoadProperty 检索特定人员实例的 Pets 的示例：
> 
> ```
> context.LoadProperty<Family>(familyInstance, f => f.Pets) 
> ```

现在我唯一需要知道的是：

*如何获得对 ObjectContext 的引用？*

`DbContext`似乎不是从它派生的，也没有对它的引用。`LoadProperty<T>`不是静态的，所以我确实需要一个对象引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:08:08.367

我知道有 2 种方法可以使用 DbContext 加载相关集合。

一个是您询问的选项，但是我已经使用了一段时间的另一种方法，不需要引用 ObjectContext。此方法适用于 DbEntityEntry 集合。这是一个例子：

```
public void Load<TEntity, TElement>(
        TEntity entity, 
        Expression<Func<TEntity, ICollection<TElement>>> relation)
    where TEntity : AbstractEntity, new()
    where TElement : AbstractEntity, new()
{
    var x = _context.Entry(entity);
    if (!x.State.Is(EntityState.Detached) && !x.State.Is(EntityState.Added))
        x.Collection(relation).Load();
} 
```

或者

```
public void Load<TEntity, TElement>(
        TEntity entity, 
        Expression<Func<TEntity, TElement>> relation)
    where TEntity : AbstractEntity, new()
    where TElement : AbstractEntity, new()
{
    var x = _context.Entry(entity);
    if (!x.State.Is(EntityState.Detached) && !x.State.Is(EntityState.Added))
        x.Reference(relation).Load();
} 
```

# asp.net - 添加图像时找不到文件异常

> ID：15174093
> 
> 赞同：2
> 
> 时间：2013-03-02T11:48:24.083
> 
> 标签：asp.net, vb.net, filenotfoundexception

在这里需要小帮助

m 试图插入员工的图像（在 EmployeeTable 中）

```
 Protected Sub ImageAddButton_Click(ByVal sender As Object, ByVal e As EventArgs) Handles ImageAddButton.Click
 Dim con As New SqlConnection(System.Configuration.ConfigurationManager.AppSettings("ConnectionString").ToString)
    con.Open()
    If EmployeeIDTextBox.Text = "" Then
        MsgBox("Please Enter EmployeeID to Add Photo")
    Else
        Dim com As New SqlCommand("UPDATE EmployeeTable SET IMAGE = (@IM) where EmployeeID='" & EmployeeIDTextBox.Text & "'", con)
        **Dim imageData As Byte() = File.ReadAllBytes(FileUpload1.FileName)**
        com.Parameters.AddWithValue("@IM", imageData)
        com.ExecuteNonQuery() 
```

在 ** 中的行出现错误......感谢帮助......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:07:41.990

将您的代码修改为如下所示：

```
Protected Sub ImageAddButton_Click(ByVal sender As Object, ByVal e As EventArgs) Handles     ImageAddButton.Click

Dim imageData as Byte() = New Byte(FileUpload1.FileContent.Length){}
FileUpload1.FileContent.Read(imageData, 0, Convert.ToInt32(FileUpload1.FileContent.Length))

 Dim con As New SqlConnection(System.Configuration.ConfigurationManager.AppSettings("ConnectionString").ToString)
con.Open()
If EmployeeIDTextBox.Text = "" Then
    MsgBox("Please Enter EmployeeID to Add Photo")

Else
    Dim com As New SqlCommand("UPDATE EmployeeTable SET IMAGE = (@IM) where EmployeeID='" & EmployeeIDTextBox.Text & "'", con)
    com.Parameters.AddWithValue("@IM", imageData)
    com.ExecuteNonQuery() 
```

# java - 如何在android中“搜索按钮”的Onclick内添加用于“搜索栏”的搜索功能代码

> ID：15174095
> 
> 赞同：0
> 
> 时间：2013-03-02T11:48:33.443
> 
> 标签：java, android, search, button, filter

我有 2 个活动，在第一个活动中有一个“关键字”和“搜索”按钮，根据给定的关键字，相关项目应该以列表视图形式显示在第二个活动中，但只是为了测试我将搜索栏放在顶部列表视图并为其编码，这工作正常，现在问题我想在“搜索”按钮的 onclick 内的第二个活动中移动“搜索功能代码”。

这是我的代码

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

    StrictMode.setThreadPolicy(policy); 

    final EditText searchBox=(EditText) findViewById(R.id.search);
    final ListView  list=(ListView)findViewById(android.R.id.list);

    //get the LayoutInflater for inflating the customomView
     //this will be used in the custom adapter
     inflater=(LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

  final  ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();
        // Creating JSON Parser instance
                final JSONParser jParser = new JSONParser();

                // getting JSON string from URL
                JSONObject json = jParser.getJSONFromUrl(URL);
                try {
                     posts = json.getJSONArray(KEY_POSTS);

        // looping through all song nodes <song>
                for(int i = 0; i < posts.length(); i++){
                    JSONObject c = posts.getJSONObject(i);
                    // Storing each json item in variable
                    String id = c.getString(KEY_ID);
                    String title = c.getString(KEY_TITLE);
                    String date = c.getString(KEY_DATE);
                    String content = c.getString(KEY_CONTENT);
                    // to remove all <P> </p> and <br /> and replace with ""
                     content = content.replace("<br />", "");
                     content = content.replace("<p>", "");
                     content = content.replace("</p>", "");

                    //authornumber is agin  JSON Object
                    JSONObject author = c.getJSONObject(KEY_AUTHOR);
                    String name = author.getString(KEY_NAME);

                    String url = null;
                    String slug = null;
                    try {
                    JSONArray atta = c.getJSONArray("attachments");
                    for(int j = 0; j < atta.length(); j++){
                        JSONObject d = atta.getJSONObject(j);

                        slug = d.getString(KEY_SLUG);

                        JSONObject images = d.getJSONObject(KEY_IMAGES);

                        JSONObject thumbnail = images.getJSONObject(KEY_THUMB_URL);
                        url = thumbnail.getString(KEY_URL);

                    }
                    } catch (Exception e) {
                        e.printStackTrace();

                    }

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(KEY_ID, id);
            map.put(KEY_TITLE, title);
            map.put(KEY_DATE, date);
            map.put(KEY_NAME, name);
            map.put(KEY_CONTENT, content);
            map.put(KEY_SLUG, slug);
            map.put(KEY_URL, url);
  //                System.out.println("the map is title "+map.get("title"));
         //title2.add(map.get("title"));
            // adding HashList to ArrayList
            songsList.add(map);
                }   

                }catch (JSONException e) {
                    e.printStackTrace();

                    }

              //searchResults=OriginalValues initially
                searchResults=new ArrayList<HashMap<String, String>>(songsList);

         // Getting adapter by passing json data ArrayList
            adapter=new LazyAdapter(this, songsList);   

             list.setAdapter(adapter);

             searchBox.addTextChangedListener(new TextWatcher() {

                 public void onTextChanged(CharSequence s, int start, int before, int count) {
                   //get the text in the EditText
                    searchString=searchBox.getText().toString();
                    textLength=searchString.length();
                   searchResults.clear();

                   for(int i=0;i<songsList.size();i++)
                   {
                   playerName=songsList.get(i).get("title").toString();
                  System.out.println("player name "+playerName);
                  if(textLength<=playerName.length()){
                  //compare the String in EditText with Names in the    ArrayList
                         if(searchString.equalsIgnoreCase(playerName.substring(0,textLength))){
                    searchResults.add(songsList.get(i));
                    System.out.println("the array list is "+songsList.get(i));
                    adapter=new LazyAdapter(Home.this, searchResults);   

                     list.setAdapter(adapter);
                    }

                      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:09:50.443

让我们这样说吧。您现在正在做的是-> 您正在从`webservice`一个活动中获取数据并在`listview`. 您只在呈现的列表视图本身上添加了一个搜索功能。

您的要求是 --> 您应该在`first activity`. 单击它时，您应该在 中显示相关结果`second activity`。为此，您只需借助 .将用户输入的关键字传递给下一个活动`putExtras() through intents`。然后，您根据搜索关键字进行调用，`webservice`而不是带来通用结果。如果这不是您想要的，只需编辑您的问题并进行更多说明，以便有机会编辑我的答案。

# performance - FPU与软件仿真的性能比较

> ID：15174105
> 
> 赞同：6
> 
> 时间：2013-03-02T11:50:00.077
> 
> 标签：performance, floating-point, scientific-computing, fpu

虽然我知道（有人告诉我）浮点协处理器的工作速度比任何浮点运算的软件实现都要快，但我完全没有直觉这种差异有多大，在数量级上。

答案可能取决于微处理器和超级计算机之间的应用程序和工作地点。我对计算机模拟特别感兴趣。

你能指出这个问题的文章或论文吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T10:00:20.773

一般的答案显然会很模糊，因为性能取决于很多因素。

但是，根据我的理解，在没有在硬件中实现浮点 (FP) 运算的处理器中，软件实现通常比整数运算**慢 10 到 100 倍**（或者更糟，如果实现不好），整数运算是总是在 CPU 上的硬件中实现。

确切的性能将取决于许多因素，例如整数硬件的特性——一些 CPU 缺少 FPU，但在整数运算中具有有助于实现 FP 计算的快速软件仿真的特性。

njuffa、[Cristina Iordache 和 Ping Tak Peter Tang 提到的论文 An Overview of Floating-Point Support and Math Library on the Intel XScale Architecture](http://www.acsel-lab.com/arithmetic/papers/ARITH16/ARITH16_Iordache.pdf)支持这一点。对于英特尔[XScale](http://en.wikipedia.org/wiki/XScale)处理器，延迟列表（摘录）：

```
integer addition or subtraction:  1 cycle
integer multiplication:           2-6 cycles
fp addition (emulated):           34 cycles
fp multiplication (emulated):     35 cycles 
```

因此，这将导致整数和 FP 算术之间的因子约为 10-30。该论文还提到 GNU 实现（GNU 编译器默认使用的那个）慢了大约 10 倍，总因子为 100-300。

最后，请注意，以上是针对 FP 仿真被编译器**编译到程序**中的情况。一些操作系统（例如 Linux 和 WindowsCE）**在操作系统内核中**也有一个 FP 仿真。优点是即使没有 FP 仿真（即使用 FPU 指令）编译的代码也可以在没有 FPU 的进程上运行——内核将透明地在软件中仿真不受支持的 FPU 指令。但是，由于额外的开销，这种仿真甚至比编译到程序中的软件仿真还要慢（大约是另一个因素 10）。显然，这种情况只适用于一些处理器有 FPU 而一些没有（例如 x86 和 ARM）的处理器架构。

*Note:* This answer compares the performance of (emulated) FP operations with integer operations on the same processor. Your question might also be read to be about the performance of (emulated) FP operations compared to hardware FP operations (not sure what you meant). However, the result would be about the same, because if FP is implemented in hardware, it is typically (almost) as fast as integer operations.

# ruby - Cucumber - 多语言网站的功能

> ID：15174106
> 
> 赞同：2
> 
> 时间：2013-03-02T11:50:04.013
> 
> 标签：ruby, testing, cucumber

我是黄瓜的新手，我正在尝试找到定义功能的最佳方法。

我需要以多种语言测试网站，因此我要测试的功能始终相同，但语言不同，我需要在页面中查找的文本可能会有所不同。这大致是我想要做的：

```
Scenario Outline: Browse through category from the home page
    Given I am on the <country> home page
    When I browse categories
    Then I should get the browse category page

Examples:
     | country |
     | UK      |
     | IT      |
     | US      | 
```

我没有在功能描述本身​​中指定**类别**值，因为：

1.  我希望能够从我的数据库中读取**类别**，所以每当我添加/删除一个我不需要修改测试本身
2.  想象一下，在同一个特征文件中有 10 个国家和 20 个类别......这将是一团糟
3.  为了避免 2 我可以为每个国家/地区创建一个功能文件...但是我必须复制并粘贴 N 次相同的功能描述

我考虑过从另一个步骤调用一个步骤作为解决方案。类似于以下伪代码：

```
When /^I browse categories$/ do
  on CURRENT_HOME_PAGE do |page|
     page.categories_list.each do |category|
        ....visit category page....
        ....call "Then I should get the browse category page" step...
        ....go back to CURRENT_HOME_PAGE....
     end
  end
end 
```

我不确定这是最好的解决方案。大多数人也不赞成从步骤中调用步骤。我个人也不喜欢它，因为我不喜欢混淆步骤和特征定义的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:48:12.437

调用 ruby​​ 方法而不是步骤定义并使用 Cucumber 实例变量怎么样？

我的意思是这样的：

```
Given /^I am on the (\w+) home page$/ do |country|
  @country = country # use Cucumber instance variable (it will be available in next steps of this scenario)
end

When /^I browse categories$/ do
  # read expected categories from DB for @country
  # visit Browse Categories page for @country
  # check that correct categories are shown
  expected_categories.each do |category|
    # visit category page
    # check that correct category page for @country is shown
  end
end 
```

# mysql - Mysql存储过程参数排序

> ID：15174108
> 
> 赞同：0
> 
> 时间：2013-03-02T11:50:10.257
> 
> 标签：mysql, stored-procedures

大家好，我有一个存储过程，我也在传递参数。

由于我以与 sql 中的顺序不同的顺序传递参数，因此它不起作用。我收到一个一般错误。我按照以下行以正确的顺序传递参数：

```
$stored_procedure_to_execute_with_parameters= 'Call '.$stored_procedure->name.'('.$parameter_argument_keys.')'; 
```

这转化为

```
Call save_user(':in_user_name', :in_user_password, :in_user_first_name') and so on. 
```

我在参数列表中的 sql 过程是 in_user_password，然后是 in_user_first_name，然后是 in_user_name。

参数是否需要以存储过程本身的正确顺序传递。这是因为我正在从匹配所有参数的对象创建插入

```
 $results=array();

        if(!is_null($stored_procedure->getParameter()) && count($stored_procedure->getParameter()>0))
        {  
            $parameter_argument_keys= $this->parameterNamesOnly($stored_procedure->getParameter());
            $stored_procedure_to_execute_with_parameters= 'Call '.$stored_procedure->name.'('.$parameter_argument_keys.')';                     

            try{
               $connection = Yii::app()->db; 
               $command = $connection->createCommand($stored_procedure_to_execute_with_parameters);                  
               foreach ($stored_procedure->getParameter() as $parameter)
               {
                   $command->bindValue(':'.$parameter->getName(),$parameter->getValue(),$parameter->getType());
               } 
               $dataReader = $command->query();
               $dataReader->setFetchMode(PDO::FETCH_ASSOC);
               $results = $dataReader->readAll();   
             }
             catch(Exception $e){
                 Yii::log('', CLogger::LEVEL_ERROR, $e->getMessage());
             } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:57:01.563

您确实需要以正确的顺序传递存储过程的参数。sproc 无法知道除了排序之外哪个参数是哪个参数。

# ruby-on-rails - 如何在 Rails 中获取页面的数据/视图统计信息？

> ID：15174109
> 
> 赞同：0
> 
> 时间：2013-03-02T11:50:29.810
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想知道，我怎样才能在 Rails 中获得这样的统计数据？

1.  像 /page/1、/page/2 这样的页面有多少独特的浏览量
2.  他们来自哪些国家？

因为我想在这些页面下显示此信息，所以我不想使用任何外部库，我希望我们可以拥有一些可以做到这一点的 ruby​​ gem

谢谢

编辑 1 - 我可以看到像[https://github.com/jkrall/analytical](https://github.com/jkrall/analytical)这样的 1-2 个宝石，但仍然想问问 SO 社区

编辑 2 - 我不认为上面的 gem 是我正在寻找的它看起来只是将 3rd 方分析插入现有应用程序

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T12:28:00.180

将[Geocoder](http://www.rubygeocoder.com/) gem 添加到您的 Gemfile 和`bundle install`.

创建`Visit`具有属性`page`和`ip_address`的模型`location`。

对于有问题的页面，在相关控制器中放置一个前置过滤器，或者如果您想记录对每个页面的访问，请将其放置在您的 ApplicationController 中：

```
def record_visit
  Visit.create(page: request.fullpath, ip_address: request.ip, location: request.location.country_code)
end 
```

Geocoder gem 将该`location`方法添加到请求对象中，因此如果您需要的不仅仅是国家/地区代码，请阅读文档。

然后，您可以通过将以下内容插入控制器来显示特定页面上的视图数量，再次在 before_filter 中，但这必须在前一个过滤器之后运行：

```
def count_views
  @views = Visit.where(page: request.fullpath).count
end 
```

由于您将经常运行此查询，因此您可能希望在创建访问模型时在页面属性上放置一个索引。

```
add_index :visits, :page 
```

唯一视图很棘手，因为您当然可以有来自同一 IP 地址的多个访问者。您可以将 cookie 设置为`record_visit`方法的一部分，然后如果 cookie 存在，则不创建新访问。

```
def record_visit
  if cookies['app-name-visited']
    return
  else
    cookies['app-name-visited'] = true
    Visit.create(page: request.fullpath, ip_address: request.ip, location: request.location.country_code)
  end
end 
```

# c# - 将表单1中的列表视图中的数据加载到表单2中的文本框C#

> ID：15174119
> 
> 赞同：0
> 
> 时间：2013-03-02T11:51:25.910
> 
> 标签：c#, .net, winforms, listview, windows-forms-designer

说 form1 中的 listview 具有以下列名称和电子邮件以及以下数据，例如

```
NAME     EMAIL
adam     adam@gmail.com
james    james@gmail.com
kris     kris@gmail.com 
```

此列表视图在 form1 中。

listview 有一个带有更新项的上下文菜单，比如我从 form1 中选择 james 行，右键单击并选择更新，现在 form2 将被加载，其中有两个文本框&我希望 listview 的选定行中的名称和电子邮件出现在那个文本框中，比如

```
textbox1 = james
textbox2 = james@gmail.com 
```

我实际上在做什么。

在带有项目更新的 form1 ive 上下文菜单上。单击 updatecontextmenu 将使用文本框名称和电子邮件加载 form2。listview 包含姓名和电子邮件，如上所示。我想将列表视图中 form1 中选定行的名称分别放置在名称文本框和电子邮件中。

我试过这个。

表格1：

```
updateToolStripMenuItem_Click(...)
{

    Form3 update = new Form3();
    update.ShowDialog();            
} 
```

表格3：

```
Form3_Load(...)
{
    Form1 f1 = new Form1();
    string oldName = f1.listView1.SelectedItems[0].SubItems[0].Text;
    string oldEmail = f1.listView1.SelectedItems[0].SubItems[0].Text;
    textBox1.Text = oldName.ToString();
    textBox2.Text = oldEmail.ToString();
} 
```

但出现错误 InvalidArgument=Value of '0' is not valid for 'index'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:00:41.383

您可以将第二种形式的构造函数更改为：

```
public Form2(string name, string email)
{ ... } 
```

然后在 Form1 中：

```
Form2 update = new Form2(name, email); 
```

# java - 通过java中的getter获取0值

> ID：15174120
> 
> 赞同：-1
> 
> 时间：2013-03-02T11:51:38.420
> 
> 标签：java, jakarta-ee

我在一个包中有我的 getter 和 setter 我正在将值设置在不同包中的类中，并且我试图从再次位于单独包中的类中获取值。但我得到零值请帮助我解决这个问题。

```
 package com.company.pojo;

    public class ExamplePojo {

private int x;
private int y;
private int z;

private String a;
private String b;
private String c;

public int getX() {
    return x;
}
public void setX(int x) {
    this.x = x;
}
public int getY() {
    return y;
}
public void setY(int y) {
    this.y = y;
}
public int getZ() {
    return z;
}
public void setZ(int z) {
    this.z = z;
}
public String getA() {
    return a;
}
public void setA(String a) {
    this.a = a;
}
public String getB() {
    return b;
}
public void setB(String b) {
    this.b = b;
}
public String getC() {
    return c;
}
public void setC(String c) {
    this.c = c;
} 
```

}

我设置值的另一个包是

```
 package com.company.function;

    import com.company.pojo.ExamplePojo;

    public class SetValue {

ExamplePojo EP = null;

public void setValue(){

     EP = new ExamplePojo();

    EP.setX(10);
    EP.setY(20);
    EP.setZ(30);
    EP.setC("Saurabh");
    EP.setA("mahaesh");
    EP.setB("Kanni");
}

} 
```

在第三个包中，我试图通过它返回 0 的 getter 获取值。

```
 package com.company.Execute;

    import com.company.function.SetValue;
    import com.company.pojo.ExamplePojo;

    public class Main {

public static void main(String[] args) {

    SetValue St = new SetValue();
    St.setValue();
    ExamplePojo EP = new ExamplePojo();

    System.out.println(EP.getX());
    System.out.println(EP.getY());
    System.out.println(EP.getZ());
    System.out.println(EP.getA());
    System.out.println(EP.getB());
    System.out.println(EP.getC());
} 
```

}

输出是

```
 0
          0
          0
          null
          null
          null 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T11:52:49.710

问题是您有两个单独的对象，`St.EP`并且`EP`. 您更改一个，然后检查另一个：

```
SetValue St = new SetValue();       //
St.setValue();                      // this changes St.EP
ExamplePojo EP = new ExamplePojo(); //
System.out.println(EP.getX());      // this examines EP 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T11:58:02.960

参考@NPE 所说的，您的问题是您正在管理两个不同的对象。

这是一种可能的方式来做你正在寻找的......

调整：

```
package com.company.function;

import com.company.pojo.ExamplePojo;

public class SetValue {

  public ExamplePojo setValue(){

    ExamplePojo EP = new ExamplePojo();

    EP.setX(10);
    EP.setY(20);
    EP.setZ(30);
    EP.setC("Saurabh");
    EP.setA("mahaesh");
    EP.setB("Kanni");

    return EP;
  }

} 
```

改变：

```
SetValue St = new SetValue();
ExamplePojo EP = St.setValue(); 
```

# bash - 如何在 zsh 脚本中提示是/否样式确认？

> ID：15174121
> 
> 赞同：23
> 
> 时间：2013-03-02T11:51:41.690
> 
> 标签：bash, scripting, zsh, prompt

使用 zsh，我试图在`~/.zprofile`我以交互方式询问是/否风格问题的地方迈出一步。起初我尝试[了这种 bash 风格的方法](https://stackoverflow.com/a/1885534)，但我看到了这种形式的错误：

`read: -p: no coprocess`

（我知道 zsh 语法通常与 bash 不同——我尝试在它前面加上一个 sh 仿真命令`emulate -LR sh`——但它没有区别）。

这个页面暗示语法可能不同，所以在[这个页面](http://www.molecularbear.com/blog/?p=442)和 zsh 手册页的指导下，我尝试了这个：

`read -q REPLY?"This is the question I want to ask?"`

相反，这会失败并出现以下形式的错误：

`/home/user/.zprofile:5: no matches found: REPLY?"This is the question I want to ask?"`

如何用 zsh 问一个简单的是/否问题？理想情况下，该命令只会吞下一个字符，无需按 Enter/Return，并且是“安全的”——即后续测试默认为 no/false，除非输入了“Y”或“y”。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-02T12:46:36.320

从[zsh - 读取](http://zsh.sourceforge.net/Doc/Release/Shell-Builtin-Commands.html#index-read)

> 如果第一个参数包含“？”，则该单词的其余部分将在 shell 交互时用作标准错误提示。

你必须引用整个论点

```
read -q "REPLY?This is the question I want to ask?" 
```

这将提示您`This is the question I want to ask?`并返回按下的字符`REPLY`。

如果您不引用问号，`zsh`则尝试将参数匹配为文件名。如果它没有找到任何匹配的文件名，它会抱怨`no matches found`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2020-04-21T21:26:30.443

我添加这个答案是因为每次你想要求用户确认时，你也想对它采取行动。这是一个提示`read -q`（谢谢，其他答案！）的函数，并在结果上进行分支以执行您想要的操作（在本例中为 git 的东西）：

```
git_commit_and_pull() {
    # http://zsh.sourceforge.net/Doc/Release/Shell-Builtin-Commands.html#index-read
    if read -q "choice?Press Y/y to continue with commit and pull: "; then
        git add . && git commit -m 'haha git goes brrr' && git pull
    else
        echo
        echo "'$choice' not 'Y' or 'y'. Exiting..."
    fi
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-02T13:48:34.550

有关 ZSH 读取的文档，请参阅[ZSH 手册](http://www.cs.elte.hu/zsh-manual/zsh_17.html)。尝试：

```
read REPLY\?"This is the question I want to ask?" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-22T23:21:13.650

我为此创建了两个实用程序脚本：

*   `read-string.sh`从输入中读取字符串（需要用户按回车键）
*   `read-char.sh`从输入中读取单个字符（不需要按回车键）

无论用户使用的是**bash**还是**zsh** ，这两个脚本都可以正常工作。

```
#!/bin/bash
# read-string.sh
# eg: my_string=$(./read-string.sh); echo "my_string: $my_string"

# bash `read` manual - https://ss64.com/bash/read.html
# 
# read [-ers] [-a aname]  [-d delim] [-i text] [-n nchars]
#    [-N nchars] [-p prompt] [-r] [-s] [-t timeout] [-u fd]
#       [name...]
# 
#  -r        Do not treat a Backslash as an escape character.  The backslash is considered to be part
#            of the line. In particular, a backslash-newline pair can not be used as a line continuation.
#            Without this option, any backslashes in the input will be discarded.
#            You should almost always use the -r option with read.

# zsh `read` manual - http://zsh.sourceforge.net/Doc/Release/Shell-Builtin-Commands.html#index-read
# 
# read [ -rszpqAclneE ] [ -t [ num ] ] [ -k [ num ] ] [ -d delim ]
#     [ -u n ] [ name[?prompt] ] [ name ... ]
# 
# -r         Raw mode: a ‘\’ at the end of a line does not signify line continuation and backslashes in the line
#            don’t quote the following character and are not removed.

if [ -n "$ZSH_VERSION" ]; then
  read -r "answer?"
else
  read -r answer
fi
echo "$answer" 
```

```
#!/bin/bash
# eg: my_char=$(read-char.sh); echo "my_char: $my_char"

# bash `read` manual - https://ss64.com/bash/read.html
# 
# read [-ers] [-a aname]  [-d delim] [-i text] [-n nchars]
#    [-N nchars] [-p prompt] [-r] [-s] [-t timeout] [-u fd]
#       [name...]
# 
#  -r        Do not treat a Backslash as an escape character.  The backslash is considered to be part
#            of the line. In particular, a backslash-newline pair can not be used as a line continuation.
#            Without this option, any backslashes in the input will be discarded.
#            You should almost always use the -r option with read.
#  -n nchars read returns after reading nchars characters rather than waiting for a complete line of input.

# zsh `read` manual - http://zsh.sourceforge.net/Doc/Release/Shell-Builtin-Commands.html#index-read
# 
# read [ -rszpqAclneE ] [ -t [ num ] ] [ -k [ num ] ] [ -d delim ]
#     [ -u n ] [ name[?prompt] ] [ name ... ]
# 
# -q         Read only one character from the terminal and set name to ‘y’ if this character was ‘y’ or ‘Y’
#            and to ‘n’ otherwise. With this flag set the return status is zero only if the character was ‘y’ or ‘Y’.
#            This option may be used with a timeout (see -t); if the read times out, or encounters end of file,
#            status 2 is returned. Input is read from the terminal unless one of -u or -p is present.
#            This option may also be used within zle widgets.
# -r         Raw mode: a ‘\’ at the end of a line does not signify line continuation and backslashes in the line
#            don’t quote the following character and are not removed.

if [ -n "$ZSH_VERSION" ]; then
  read -r -q "answer?"
else
  read -r -n 1 answer
fi
echo "$answer" 
```

感[谢奥拉夫](https://stackoverflow.com/users/1741542/olaf-dietsche)的[原始回答](https://stackoverflow.com/a/15174634/14966)。

# angularjs - Laravel 3 和 AngularJs 从数据库中获取结果并将其传递给视图

> ID：15174124
> 
> 赞同：0
> 
> 时间：2013-03-02T11:52:03.657
> 
> 标签：angularjs, laravel

在我开始之前，我想告诉我我是一个初学者，我想了解更多。我正在阅读很多教程，但我从未找到并回答我的问题。

在我们开始之前，我知道什么是休息以及它是如何工作的。

我不知道如何用 angularjs 和 laravel 创建它。

我想的是，我有一个带有手机的数据库，以及关于它们的信息（这只是我心中的一个例子）

Laravel 控制器

```
<?php

class Phones_Controller extends Base_Controller {

    public $restful = true;    

    public function get_index()
    {

    }    

    public function post_index()
    {

    }    

    public function get_show()
    {

    }    

    public function get_edit()
    {

    }    

    public function get_new()
    {

    }    

    public function put_update()
    {

    }    

    public function delete_destroy()
    {

    }

} 
```

这是我一无所知的部分。

所以get/how函数retunrs通过json中的id查看的电话

功能

```
public function get_show($id)
    {
        $phones = Phone::find($id);
        return Response::eloquent($phones);
    } 
```

所以当我在浏览器中浏览时，`http://mysite.com/phones/show/1`我看到了 json 对象

好的，这就是我主要不明白的，当我在这里` [http://mysite.com/phones/show/1](http://mysite.com/phones/show/1)时，我如何将结果传递给视图？

我知道如何`http request`在角度中使用，我不明白我需要调用两次显示函数吗？

**例子**

```
$http({method: 'GET', url: '/phones/show/:id'}).
success(function(data, status, headers, config) {
$scope.phones = data;
}). 
```

并创建另一个 laravel 控制器函数来显示实际视图和结果？

如果有人能指出这一点，我会很高兴

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T13:20:35.413

> 并创建另一个 laravel 控制器函数来显示实际视图和结果？

Angular JS 是你的“视图”——Laravel 只是发送 Angular 抓取的 JSON 结果——然后 Angular 决定如何处理它。

如果你希望 Laravel 成为你的“视图”——那么你不需要/不需要 Angular——你重复你的工作/努力。

所以换句话说——Angular 是你的“前端”——它处理所有的用户体验、UI、请求等。当 Angular 需要一些数据时，比如用户配置文件——它会转到“后端”（Laravel）并说“嘿——你能给我用户 X 的个人资料吗”。Laravel 以 JSON 响应“不用担心 - 就在这里”。

然后 Angular 获取该 JSON 数据 - 并根据需要显示它。

# html - 停止在空格上有下划线的链接？

> ID：15174132
> 
> 赞同：14
> 
> 时间：2013-03-02T11:52:44.500
> 
> 标签：html, css

在 html 和 css 中是否有任何方法可以停止在有空格的地方有下划线的链接？假设我想要一个带空格的小图标，然后将文本全部作为链接，但它们之间没有链接，这可能吗？

我不想让图标卡在文本旁边:(

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-02T11:57:10.730

为图像添加边距 -[**演示**](http://jsfiddle.net/sCS4y/)

```
img {
    margin-right: 15px
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T11:58:10.883

你可以这样做：http: [//jsfiddle.net/mH6vG/](http://jsfiddle.net/mH6vG/)

HTML：

```
<a><i class="icon-file"></i> <span>My link text</span></a> 
```

CSS：

```
a > span {
    text-decoration: underline;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T12:40:14.640

[Zoltan Toth](https://stackoverflow.com/users/1499781/zoltan-toth)的解决方案非常简单。为此+1。但让我也投入我的 0.02 美元。如果您不想在链接中为图标添加额外的图像标签，也可以使用以下方法：

**HTML**

```
<a href="">Some lorem ipsum text</a> 
```

**CSS**

```
a {
    vertical-align: top;
}

a:before {
    content: '';
    display: inline-block;
    width: 20px;
    height: 20px;
    margin: 0 10px 0 0;
    background: transparent url(http://lorempixel.com/20/20) no-repeat 0 0;
} 
```

**演示**

[http://jsfiddle.net/xQAzy/](http://jsfiddle.net/xQAzy/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T11:54:30.670

您可以将图标和文本添加为​​指向同一位置的两个单独链接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T11:54:57.210

您可以有两个单独的链接（一个用于图标，一个用于链接），也可以同时设置`text-decoration: none;`。

# linux - 如何克隆root用户

> ID：15174135
> 
> 赞同：0
> 
> 时间：2013-03-02T11:52:50.480
> 
> 标签：linux, unix, root

如何在linux中创建**root用户的克隆。**
方法。
考虑我是**root**并且我想添加**new_user**并授予**new_user**拥有所有 root 访问/权限，
我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T11:54:15.083

实际上，您通常只需添加一个具有*任何*UID 的新用户，然后`/etc/passwd`将其 UID 设置为 0 即可。

这实际上并没有克隆所有用户信息和文件，它只是为您提供了另一个等效于 root 的用户。根据您的需要，这可能就足够了。

如果您想要一个完全不同于但能够做所有 root-y 事情的*真实*`root`用户，您最好的选择是简单地设置一个具有适当`sudo`权力的用户。

# url - WebLogic Server - SSL - 多个证书

> ID：15174136
> 
> 赞同：1
> 
> 时间：2013-03-02T11:52:57.313
> 
> 标签：url, ssl, certificate, weblogic

是否可以配置 WebLogic Server (11g)，使其使用不同的证书与不同的 URL：s 进行 SSL 通信？

就我而言，我想将一个证书用于内部 SSL 服务器通信，另一个用于外部通信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:38:45.560

我假设您正在谈论服务器 SSL 身份证书。由于逻辑服务器只能有 1 个 SSL 端口，并且每个逻辑服务器只能使用一个别名，所以不，您不能通过服务器配置来做到这一点。但是，您可以将此行为硬编码到您的应用程序中，这样当它连接到不同的 url 时，它将使用不同的身份证书。你没有具体说明你使用什么，但也许这会有所帮助：[http ://docs.oracle.com/cd/E15051_01/wls/docs103/security/SSL_client.html](http://docs.oracle.com/cd/E15051_01/wls/docs103/security/SSL_client.html)

# asp.net - 构建基于互联网的 p2p 文本、音频、视频聊天应用程序

> ID：15174150
> 
> 赞同：1
> 
> 时间：2013-03-02T11:55:45.500
> 
> 标签：asp.net, sockets, tcp, udp, p2p

我想使用 c# asp.net 套接字编程实现基于互联网的 P2P 文本、音频和视频聊天应用程序。我将使用 tcp 套接字进行文本聊天，使用 udp 套接字进行视频和音频聊天应用程序。

我想使用 wpf，请建议我 wpf 是否支持我的任务，或者任何其他更适合我要求的 asp.net 框架工作

谢谢你，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:19:40.297

您应该考虑使用 SIP 协议。没有用于 SIP 的开源 .net 库。但是许多流行的 SIP 库都有 .net 包装器，pjsip 例如（[https://sites.google.com/site/sipekvoip/](https://sites.google.com/site/sipekvoip/)）另请参阅基于 MS UCCAPI 的开放 WPF SIP 软电话。 [http://sourceforge.net/projects/officesip/](http://sourceforge.net/projects/officesip/)

# mysql - 使 MySQL 索引特定于 2 个字段中的尝试输入值

> ID：15174151
> 
> 赞同：0
> 
> 时间：2013-03-02T11:55:56.960
> 
> 标签：mysql, indexing

假设我有一个包含字段的表：

```
id|name|value 
```

例如，我想创建一个索引，以防止在 name == 'Bob' 时 value > 0 的记录条目。MySQL 是否有任何这样的本机功能，还是需要将其编程到我的应用程序逻辑中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:00:25.017

您需要对其进行编程，主要也是更好的方法，因为您不希望数据库验证您的查询。只是为了运行您的查询。

# android - Eclipse中的卡住屏幕

> ID：15174153
> 
> 赞同：0
> 
> 时间：2013-03-02T11:56:10.137
> 
> 标签：android, eclipse, package, explorer

在 Eclipse 中，当我去：

（包资源管理器）然后到（资源）-布局-右键单击-新建-Android XML文件

屏幕要求您输入新的 Android XML 文件。一旦我完成并按下下一步，就会出现一个名为（选择配置文件夹）的屏幕，但无论我在该屏幕上做什么，无论是按下下一步还是完成，都没有任何反应！屏幕还在！谁能告诉我这样做的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:02:35.247

实际上，您通常需要在 res 文件夹中添加一个新的 xml 文件，因此请确保您这样做，并在为所需的 xml 文件命名后，您应该选择线性布局、列表视图等下面的选项之一，然后点击完成。您应该能够使用所需的 xml 文件获得主屏幕

# c++ - 通过内联降低抽象层的成本

> ID：15174158
> 
> 赞同：2
> 
> 时间：2013-03-02T11:56:39.353
> 
> 标签：c++, interface, abstraction

在我的项目中，我有一些像这样的抽象层：

```
 Vector3 normalizeVector(Vector3 v);

 Vector3 vectorMultiplyMatrix(Vector3 v, Matrix3 m); 
```

这只是平台特定数学库（如 DirectXMath）的“代理”函数。

我的问题是如何降低这些层的成本？通过使所有这些函数内联，是否会完全消除调用它们而不是直接调用特定于平台的函数的成本？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T12:01:55.243

添加一个新的抽象级别（代理、外观等）的成本可以忽略不计。您将数据传递给它们的方式可能会给您带来麻烦，尤其是在使用复杂的对象、容器等时。

```
Vector3 normalizeVector(Vector3 v); 
```

`Vector3`在每次调用时创建传递对象的副本。如果您遇到性能问题，请避免通过将按值传递更改为按`const`引用传递来创建副本：

```
Vector3 normalizeVector(const Vector3& v); 
```

这个函数的这个新原型表示：*“我需要一个对我将使用但不会更改的现有有效`Vector3`对象的引用”*。

除非您真的遇到性能问题，否则不要优化您的代码。*过早的优化*一直是邪恶的，而且永远都是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T12:25:01.760

暴露函数体将使编译器有*机会*通过内联消除函数调用。

它是否真的接受它取决于它的内部启发式：内联可能会扩大生成代码的整体大小，使其对缓存不太友好，并最终否定消除调用的好处。

有一些特殊的关键字（例如VC++ 下的[__forceinline](http://msdn.microsoft.com/en-us/library/z8y1yy88(v=vs.110).aspx)）可以用来覆盖编译器的成本/收益分析，但编译器通常比程序员更正确地做出这些决定！

使用[profile-guided optimization](https://stackoverflow.com/a/57553/533120)可以帮助编译器根据程序的实际使用模式做出更好的优化决策，包括哪些函数“热”到足以内联，哪些函数“冷”并且应该不理会。

* * *

要记住的一种特别强大的技术是[模板元编程](http://www.codeproject.com/Articles/3743/A-gentle-introduction-to-Template-Metaprogramming)。这个想法是将尽可能多的计算推到编译时。

# python - python中event.wait()函数的返回值是多少

> ID：15174162
> 
> 赞同：1
> 
> 时间：2013-03-02T11:56:49.613
> 
> 标签：python, multithreading

假设我有这个代码

```
def wait_for_event(e):
    """Wait for the event to be set before doing anything"""
    logging.debug('wait_for_event starting')
    event_is_set = e.wait()
    logging.debug('event set: %s', event_is_set) 
```

返回的值是多少`e.wait()`

我不明白

我也不清楚的一件事是事件如何发送到线程。

假设我有线程可以下载每个页面上都有管理员名称的网页。

现在这个名字被我的人编辑了。

现在我`thread 10`第一次得到了那个 chnage，现在我想向我的所有线程发送带有那个新的通知`name`，以便他们可以在他们的代码中更改它

我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:03:51.260

由于没有超时`e.wait()`，该方法总是返回`True`。这在[文档](http://docs.python.org/2/library/threading.html#event-objects)中有详细说明：

> `wait([timeout])`
> 
> 阻塞直到内部标志为真。如果进入时内部标志为真，则立即返回。否则，阻塞直到另一个线程调用 set() 将标志设置为 true，或者直到发生可选超时。
> 
> 当 timeout 参数存在而不是 None 时，它​​应该是一个浮点数，以秒（或其分数）指定操作的超时。
> 
> **此方法在退出时返回内部标志，因此它将始终返回 True，除非给出超时并且操作超时。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T12:03:33.823

[**等待（[超时]）**](http://docs.python.org/2/library/threading.html#threading.Event.wait)

阻塞直到内部标志为真。如果进入时内部标志为真，则立即返回。否则，阻塞直到另一个线程调用 set() 将标志设置为 true，或者直到发生可选超时。

当 timeout 参数存在而不是 None 时，它​​应该是一个浮点数，以秒（或其分数）指定操作的超时。

此方法在退出时返回内部标志，因此**它将始终返回 True ，除非给出超时并且操作超时**。

*在 2.7 版更改: 以前，该方法总是返回 None。*

# ios - iOS - backgroundTimeRemaining 值未显示预期值

> ID：15174165
> 
> 赞同：6
> 
> 时间：2013-03-02T11:57:01.460
> 
> 标签：ios, time, background, multitasking

我正在尝试检查 的值`backgroundTimeRemaining`，但我得到了一个非常大的数字。该属性的值应该对应于大约 10 分钟，我在 Apple 文档中读到，当应用程序处于前台时[，](https://developer.apple.com/documentation/uikit/uiapplication)这个值很大。但是，即使在后台，我也能获得很大的价值：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
   bgTask = [application beginBackgroundTaskWithExpirationHandler:^{
      [application endBackgroundTask:bgTask];
      bgTask = UIBackgroundTaskInvalid;
   }];

   // Background task
   NSTimeInterval timeRemaining = [UIApplication sharedApplication].backgroundTimeRemaining;
   NSLog(@"Background time remaining: %f seconds (%d mins)", timeRemaining, (int)(timeRemaining / 60));

   dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
      NSTimeInterval timeRemaining = [UIApplication sharedApplication].backgroundTimeRemaining;
      NSLog(@"Background time remaining: %f seconds (%d mins)", timeRemaining, (int)(timeRemaining / 60));

      // Perform task

      // Finished
      if (bgTask != UIBackgroundTaskInvalid) {
         [application endBackgroundTask:bgTask];
         bgTask = UIBackgroundTaskInvalid;
      }
  });

  // Start location manager
  if ([CLLocationManager locationServicesEnabled]) {          
     [locationManager startUpdatingLocation];
  }
} 
```

我能错过什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-15T15:29:25.107

从 Xcode 运行时，看门狗定时器被禁用。

在未连接的情况下，我主要得到合理的值（即 600），但我仍然偶尔会得到奇怪的值。

# ios - 添加第二个 segue 搞砸了放置？

> ID：15174172
> 
> 赞同：1
> 
> 时间：2013-03-02T11:57:45.890
> 
> 标签：ios, xcode, uistoryboard, uistoryboardsegue

希望图片能很容易地解释这一点。我有两条路径可以让用户到达同一个视图控制器。当我尝试将第二条路径连接到目标视图控制器时，该视图控制器的所有内容都会四处移动。“撤消”菜单选项为我提供了有关继承指标的线索，但它们似乎没有改变，我不确定在这里做什么。我应该如何连接第二个？

所有三个视图控制器都可见——“1”和“2”将连接到同一个目标。

[所有三个风投 http://tmdesign.com/ss1.png](http://tmdesigned.com/ss1.png)

在第二个 segue 连接之后

[第二个segue连接http://tmdesign.com/ss2.png](http://tmdesigned.com/ss2.png)

线索？

[关于刚刚发生的事情的线索 http://tmdesign.com/ss3.png](http://tmdesigned.com/ss3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:45:22.900

好吧，显然问题在于模拟指标。在我为用户提供的两条“路径”之一中，有时，我不小心选择了底部工具栏而不是推断出来的。它没有影响该视图控制器的布局。但是现在有问题的目标是从那个故事板推断出来的。然后，当我在上面放置元素时，它以某种方式使用该设置来计算它们的位置。所以当我连接第二条路径时，它不再“推断”它会有那个工具栏，它把事情搞砸了。

无论如何，长话短说是，将那些从“推断”更改为有影响的方式，在这种情况下，解决方案是重做所有的放置，没有任何非推断的地方单独通往它的线。

# xml - XML + 架构 + 命名空间。没有可用于验证根的匹配全局声明

> ID：15174174
> 
> 赞同：4
> 
> 时间：2013-03-02T11:57:55.630
> 
> 标签：xml, namespaces, schema

使用命名空间时引用模式的正确语法是什么？

**问题**

使用给定模式创建 XML 文档。

**错误**

```
 .xml:9.20: Element '{http://example/buildings/1.0}old_buildings': No matching global declaration available for the validation root.
    oldbuildings.xml - invalid
    Problem 
```

**XML 文档**

```
 ```
<?xml version="1.0" encoding="UTF-8"?>

<buildings:old_buildings xmlns:buildings="http://example/buildings/1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://example/buildings/1.0 oldbuildings_schema.xsd">
    <building>
        <name>Name</name>
        <year_built era="BC">2000</year_built>
        <story>...<story>
    </building>
</buildings:old_buildings> 
``` **XSD 文件**

```
    <?xml 版本="1.0" 编码="UTF-8"?>

    <xs:schema targetNamespace="http://example/buildings/1.0/" 
xmlns:xs="http://www.w3.org/2001/XMLSchema" 
xmlns="http://example/buildings/1.0/ ">
        <xs:element name="old_buildings">
            <xs:complexType>
                <xs:序列>
                    <xs:element ref="建筑"/>
                </xs:sequence>
            </xs:complexType>
        </xs:元素>

        <xs:element name="building" type="buildingType"></xs:element>

        <xs:complexType name="buildingType">
            <xs:序列>
                <xs:element name="name" type="xs:string"/>
                <xs:element name="year_built" type="yearType"/>
                <xs:element name="story" type="xs:string"/>
            </xs:sequence>
        </xs:complexType>
        <xs:complexType name="yearType">
            <xs:简单内容>
                <xs:extension base="xs:positiveInteger">
                    <xs:attribute name="era" type="xs:string"/>
                </xs:extension>
            </xs:simpleContent>
        </xs:complexType>
    </xs:schema>

```

            回答 #1

赞同：6

时间：2013-03-02T20:54:34.397

在您的 xml 文件中，尝试使用

xmlns:buildings="http://example/buildings/1.0/"

使用 / final，如您的 xsd 声明中所示：`xs:schema targetNamespace="http://example/buildings/1.0/"`

            回答 #2

赞同：1

时间：2022-02-20T16:28:23.097

来自 xml 文档缺少结束标记

```
 <story>...<story> 
```

到

```
<story>...</story> 
```

```

# java - jasper 报告子报告不起作用（不显示数据库中的数据）

> ID：15174175
> 
> 赞同：0
> 
> 时间：2013-03-02T11:57:58.307
> 
> 标签：java, jasper-reports, ireport

我有主报告，其中包含摘要部分的子报告。我想要的是我在数据库中有名为bill no 的列，我想显示与bill no 匹配的行。（即在查询的where 子句中它应该在哪里billno='something'）。

目前我正在将参数从主报告传递到子报告。但它仍然无法正常工作。

主要报告：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="SwastikReport" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
    <property name="ireport.zoom" value="1.5"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="411"/>
    <parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
        <defaultValueExpression><![CDATA["E:\\reports\\"]]></defaultValueExpression>
    </parameter>
<subreport>
                <reportElement x="438" y="56" width="109" height="100"/>
                <subreportParameter name="billoflading">
                    <subreportParameterExpression><![CDATA[$F{billofladingno}]]></subreportParameterExpression>
                </subreportParameter>
                <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
                <subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "SwastikReport_subreport.jasper"]]></subreportExpression>
            </subreport>
</jasperReport> 
```

子报告：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="SwastikReport_subreport" language="groovy" pageWidth="555" pageHeight="802" whenNoDataType="AllSectionsNoDetail" columnWidth="555" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" whenResourceMissingType="Error">
    <property name="ireport.zoom" value="1.5"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
<parameter name="billoflading" class="java.lang.String">
    <defaultValueExpression><![CDATA[]]></defaultValueExpression>
</parameter>
    <queryString>
        <![CDATA[select * from declaredvaluedetails d where d.billofladingno='$P{billoflading}']]>
    </queryString>
    <field name="billofladingno" class="java.lang.String"/>
    <field name="bookingno" class="java.lang.String"/>
    <field name="freightcharges" class="java.math.BigDecimal"/>
    <field name="ratedas" class="java.lang.String"/>
    <field name="per" class="java.math.BigDecimal"/>
    <field name="rate" class="java.math.BigDecimal"/>
    <field name="prepaid" class="java.math.BigDecimal"/>
    <field name="collect" class="java.math.BigDecimal"/>
    <field name="currencyrateofexchange" class="java.math.BigDecimal"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <detail>
        <band height="37" splitType="Stretch">
            <textField>
                <reportElement x="33" y="14" width="82" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{freightcharges}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="120" y="14" width="72" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{ratedas}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="196" y="14" width="32" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{per}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="230" y="14" width="68" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{rate}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="299" y="14" width="82" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{prepaid}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="383" y="14" width="82" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{collect}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="468" y="14" width="81" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{currencyrateofexchange}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
</jasperReport> 
```

它在主报告上显示空值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:41:37.457

我得到了解决方案...解决方案是我必须将子报告参数映射到从主报告传递的参数。

子报告

```
**

<parameter name="billoflading" class="java.lang.String">
        <defaultValueExpression><![CDATA[$P{billoflading}]]></defaultValueExpression>
    </parameter> 
```

**

# html - Flash 横幅链接在 Chrome 中不起作用

> ID：15174180
> 
> 赞同：0
> 
> 时间：2013-03-02T11:58:29.167
> 
> 标签：html, flash

在 Firefox 中一切正常，但在 Ie 和 Chrome 中不起作用，单击横幅但链接不起作用：此处示例：

[http://jsfiddle.net/V7fwt/](http://jsfiddle.net/V7fwt/)

代码：

```
<a href="google.lt" target="_blank" ">
<object>
<param name="movie" value="http://new.sa.lt/wp-content/uploads/bannernow.swf">
<param name="wmode" value="transparent" />
<embed wmode=transparent allowfullscreen="true" allowscriptaccess="always" src="http://new.sa.lt/wp-content/uploads/bannernow.swf"></embed>
</object>
</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:04:53.687

我不认为它真的被设计成那样工作，你很幸运，一些浏览器让你:)

如果您查看这个问题，您会发现有几种方法可以做到这一点： [如何使用 flash 对象作为链接？](https://stackoverflow.com/questions/33459/how-do-you-use-a-flash-object-as-a-link)

一是让Flash本身充当链接。另一种是为对象添加一个 javascript 处理程序。即 onClick="window.location=' [http://www.google.com](http://www.google.com) ';" 或将其放入方法中。

# java - 如何在 jsp 页面中访问我在 servlet 类中声明的自定义对象

> ID：15174185
> 
> 赞同：0
> 
> 时间：2013-03-02T11:58:48.377
> 
> 标签：java, jsp, servlets

我在 servlet 类中有一个对象实例（具有 ArrayList 的模型），我如何使用 EL 在“jsp”页面中访问它？

这就是我正在尝试的方式

```
<c:forEach var="module" items="${model}">
    <option name="" value="">${module}</option>
</c:forEach> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T12:10:00.743

而不是将数据放入会话中，如果它是按视图数据，请将其作为请求属性传递给 servlet 的方法：

```
request.setAttribute("model", yourModelObject); 
```

这样它就可以在jsp中访问为：

```
${model.yourList} 
```

您的迭代将变为：

```
<c:forEach var="module" items="${model.yourList}">
    ${module}
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T12:10:26.307

我假设您想遍历您的 arrayList ？你可以用 c:forEach 标签做到这一点

```
 <c:forEach var="box" items="${**REFERENCE_TO_YOUR_VARIABLE**}"
  varStatus="status">
 </c:forEach> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T12:14:02.780

如果您使用 RequestDispatcher.forward(request, response) 从 servlet 进行调度，您可能希望将其添加为请求属性而不是会话属性，以防止对象的陈旧实例，并防止对象停留更长时间比需要的。至于你问题的第二部分。如果 ArrayList 是模型对象的变量，则在 el 中引用它的方式如下：

```
${model.list} 
```

因此，例如，如果对象存储为名为“model”的请求属性，并且对象具有 getList() 方法，则要迭代该列表，请执行以下操作：

```
<c:forEach items="${model.list}" var="listItem" > 
```

# javascript - Javascript 函数对象的属性

> ID：15174187
> 
> 赞同：28
> 
> 时间：2013-03-02T11:59:08.197
> 
> 标签：javascript, oop, prototype, prototypal-inheritance

我有一个 JavaScript 函数对象；

```
var addNum = function(num1, num2) {
        return num1 + num2;
} 
```

现在，如果我尝试访问

```
addNum.divide() 
```

我想了解上述代码的原型链。我读到在上面的例子中，addNum 会被搜索到 divide()，然后是 Function.prototype，最后是 Object.prototype。

但我的问题是在上面的例子中，如何在 addNum 中搜索 divide()

它是否指的是类似的东西；

```
var addNum = function(num1, num2) {

this.divide = function(){}

            return num1 + num2;
    } 
```

我无法理解它说 addNum 将被搜索到 divide() 的那一行

请帮助我理解相同。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-02T12:18:51.403

我不确定这会回答你的问题，但可能会给你一些见解。考虑以下示例：

```
var Person = (function () {
    var Person = function (name) {
        this.name = name;
    }

    Person.greet = function () {
        console.log("Hello!");
    }

    Person.prototype = {
        greet: function () {
            console.log('Hello, my name is ' + this.name);
        }
    };
    return Person;
})();

var bob = new Person("Bob");

Person.greet(); // logs "Hello!"
bob.greet(); // logs "Hello, my name is Bob 
```

函数对象“Person”有一个直接的“greet”属性，它是一个函数。OOP 方面，您几乎可以将其视为可以直接从 Person 函数 (Person.greet()) 调用的静态方法。一旦您从 Person 构造函数“实例化”了一个人对象，该新对象“bob”现在从 Person.prototype 对象引用它的方法。现在当你调用 bob.greet() 时，它会使用原型对象中的 greet 函数。

希望有帮助。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-03-02T12:31:51.907

正如您自己所说：*您有一个函数**object***。函数是 JS 中的对象，就像对象字面量、数组或其他任何东西一样：可以随意为函数分配属性和方法：

```
var someAnonFunction = function(foo)
{
    console.log(this);
    console.log(this === someAnonFunction);//will be false most of the time
};
someAnonFunction.x = 123;//assign property
someAnonFunction.y = 312;
someAnonFunction.divide = function()
{
    console.log(this === someAnonFunction);//will be true most of the time
    return this.x/this.y;//divide properties x & y
};
someAnonFunction.divide(); 
```

在这种情况下，被引用的函数对象`someAnonFunction`被分配了对匿名函数的引用，被称为`divide`（好吧，对匿名函数的引用无论如何都被称为除法）。所以这里根本没有原型参与。请注意，正如您自己所说：所有对象都可以追溯到`Object.prototype`，试试这个：

```
console.log(someAnonFunction.toString === Function.prototype.toString);//functions are stringified differently than object literals
console.log(someAnonFunction.hasOwnProperty === Object.prototype.hasOwnProperty);//true 
```

或者，也许这更清楚：如何将方法/属性调用解析为 JS 中的值的简单方案：

```
[      F.divide      ]<=========================================================\ \
F[divide] ===> JS checks instance for property divide                           | |
 /\ ||                                                                          | |
 || || --> property found @instance, return value-------------------------------| |
 || ||                                                                          | |
 || ===========> Function.prototype.divide could not be found, check prototype  | |
 ||      ||                                                                     | |
 ||      ||--> property found @Function.prototype, return-----------------------| |
 ||      ||                                                                     | |
 ||      ==========> Object.prototype.divide: not found check prototype?        | |
 ||          ||                                                                 | |
 ||          ||--> property found @Object.prototype, return---------------------|_|
 ||          ||                                                                 |=|
 ||          =======>prototype is null, return "undefined.divide"~~~~~~~~~~~~~~~|X|
 ||                                                                             \ /
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~< TypeError can't read property 'x' of undefined 
```

因此，如果您希望上面的代码使用原型工作，您将不得不增加各种原型（在本例中为`Function.prototype`）。确实不建议这样做，实际上更改*“本机”*原型通常是不受欢迎的。仍然：

```
Function.prototype.divide = function (a, b)
{
    a = +(a || 0);//coerce to number, use default value
    b = +(b || 1) || 1;//division by zeroe is not allowed, default to 1
    return a/b;
};
function someFunction ()
{
    return 'someString';
};
var another = function(a, b)
{
    return a + b;
};
someFunction.divide(12, 6);//will return 2
another.divide(12, 4);//3 
```

`someFunction`在这两种情况下，将扫描由名称 (或)引用的函数对象以查找未找到`another`的名为 的属性。`divide`然后，它会扫描`Function.prototype`找到此类属性的 .
如果不是这样，JS 也会检查`Object.prototype`，如果失败，它最终会抛出一个错误。

不久前，我在这个主题上发布了相当长的答案：

[是什么让 my.class.js 如此之快？](https://stackoverflow.com/questions/14213074/what-makes-my-class-js-so-fast/14336037#14336037)（处理原型链）
[javascript 中的对象和函数](https://stackoverflow.com/questions/13500101/objects-and-functions-in-javascript/13500475#13500475)（函数 <=> 对象 <=> 构造函数的回顾） JavaScript
[中这三种“类”定义模式之间有什么区别？](https://stackoverflow.com/questions/13789559/what-are-the-differences-between-these-three-patterns-of-class-definitions-in/13790503#13790503)（还有更多信息）
[Javascript - 动态更改函数的内容](https://stackoverflow.com/questions/14701661/javascript-dynamically-change-the-contents-of-a-function/14701820#14701820)（模糊地涉及匿名函数，分配给变量和属性并更改它们的上下文）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-02T12:34:54.960

您可以创建`divide`为 [sort of a]`static`方法：

```
var addNum = function(num1, num2) {
  addNum.divide = function(){return num1/num2;};
  return num1 + num2;
}
// now you first have to run addNum
var onethirds = addNum(1,3); //=> 4
addNum.divide(); //=> 0.333333... 
```

但这是不可取的。更好地创建一个[构造](http://www.javascriptkit.com/javatutors/oopjs2.shtml)函数：

```
function Pair(n1,n2){
   n1 = n1 || 1;
   n2 = n2 || 1;
   // create instance methods
   this.add      = function(){return n1+n2;};
   this.divide   = function(){return n1/n2;};
   this.multiply = function(){return n1*n2;}
}
var pair1 = new Pair(2,6)
   ,pair2 = new Pair(1,2);
pair1.add();    //=> 8
pair2.divide(); //=> 0.5
//etc. 
```

或者更原型的方法（方法被添加到构造函数原型，而不是每个实例）：

```
function Pair(n1,n2){
   this.n1 = n1 || 1;
   this.n2 = n2 || 1;
   // create prototype methods (once)
   if (!Pair.prototype.add){
    var proto      = Pair.prototype;
    proto.add      = function(){return this.n1+this.n2;};
    proto.divide   = function(){return this.n1/this.n2;};
    proto.multiply = function(){return this.n1*this.n2;}
   }
} 
```

[读东西](http://blog.vjeux.com/2011/javascript/how-prototypal-inheritance-really-works.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-02T12:24:42.553

`addNum`不，您的最后一个代码仅在您用作构造函数时才有意义：

```
var instance = new addNum();
instance.divide(); 
```

但是，因为函数是对象，所以以下内容是有效的：

```
var addNum = function(num1, num2) {
        return num1 + num2;
}
addNum.divide = function() {} 
```

在这种情况下`divide`，将是其`addNum`自身的属性，而不是其原型之一。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T12:25:53.803

起初理解原型继承有些晦涩，但顾名思义，JavaScript 中有一些原型，Function 就是其中之一。

每当您创建一个新函数时，您都可以使用命令检查其类型`typeof`。在你的情况下：

```
var a = function(a,b) { return a + b; } 
```

它将返回`"function"`，因此有两种方法可以向您的`a`变量添加更多方法。正如@Keith Morris 建议的那样，一种方法是创建一个新的构造函数并将其方法放入其中并返回它。这也是首选方式，因为这样您就不会使用原型方法污染基本对象，这些原型方法扩展到它们所代表的每个对象。

意思是，如果我改为这样做：

```
Function.prototype.divide = function(a, b) { return a / b; } 
```

我现在可以做`a.divide(2, 1);`，它会返回`2`。但是例如，如果我使用`jQuery`and do`jQuery.divide(2,1)`我也会得到`2`，因为它试图在函数的直接范围内找到它。如果没有，它将转到它的原型。

希望这能更好地向您解释。

# facebook - FBWebDilaog 共享 URL 重定向到应用程序

> ID：15174188
> 
> 赞同：0
> 
> 时间：2013-03-02T11:59:22.547
> 
> 标签：facebook

我正在使用 FBWebDialog（在新的 facebook 3.2 SDK 中支持）从我的 ios 应用程序中在 facebook 上共享。我正在为 FBWebDialog 的参数中传递的链接参数设置一个 youtube 链接。它共享该链接，但在点击从 iOS 设备上的 facebook 应用程序登录的 facebook 帐户的链接时，如果设备中存在该应用程序，我会将我重定向到该应用程序。如果在设备上找不到该应用程序，它会将我定向到我的应用程序的 iTunes 页面。这是一种异常行为，因为它应该将我重定向到 youtube 链接。但是，如果我在 PC 上登录 Facebook 帐户并单击共享链接，它会将我重定向到 youtube 链接。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T23:01:58.783

转到您的 App Dashboard 设置：Basic > Native iOS App，然后将 Deep Linking 设置为 Disabled。

您想关闭指向您应用的深层链接。但是，这将关闭应用程序中所有链接的深层链接。

# r - 无法使用 Date 类型索引 xts 类

> ID：15174189
> 
> 赞同：1
> 
> 时间：2013-03-02T11:59:24.230
> 
> 标签：r, xts, quantmod

我正在手动加载一些数据（与通过 quantmod 相比）并尝试创建一个 xts 类（似乎一切正常），但我似乎无法使用 Date 类型索引。

我试图找到与另一个时间序列（NDX，通过 quantmod）的交集，如果我可以使用日期索引，这应该很容易。

我假设我在创建 xts 对象时遗漏了一些东西，但不知道是什么。## 标题 ##

```
VXN.tmp <- read.csv('VXNDailyPrices.csv', na.strings=c('n/a'), stringsAsFactors=F, header=F)
VXN <- xts(as.matrix(VXN.tmp[,-1]), as.Date(VXN.tmp[,1], tz="", format='%m/%d/%y'), tzone="")
colnames(VXN) <- c('Open', 'High', 'Low', 'Close')
VXN <- VXN[!is.na(Cl(VXN))]

> head(VXN)
          Open High Low Close
2001-02-02   NA   NA  NA 54.89
2001-02-05   NA   NA  NA 55.85
2001-02-06   NA   NA  NA 53.68
2001-02-07   NA   NA  NA 54.41
2001-02-08   NA   NA  NA 54.66
2001-02-09   NA   NA  NA 55.85
> VXN['2001-02-02']
           Open High Low Close
2001-02-02   NA   NA  NA 54.89
> VXN[as.Date('2001-02-02')]
     Open High Low Close
> 
```

其他一些信息

```
> str(VXN)
An ‘xts’ object from 2001-02-02 to 2013-03-01 containing:
  Data: num [1:3040, 1:4] NA NA NA NA NA NA NA NA NA NA ...
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr [1:4] "Open" "High" "Low" "Close"
  Indexed by objects of class: [Date] TZ: 
  xts Attributes:  
List of 2
 $ tclass: chr "Date"
 $ tzone : chr ""
> 
> vxnidx <- head(index(VXN), 20)
> dput(vxnidx)
structure(c(11355, 11358, 11359, 11360, 11361, 11362, 11365, 
11366, 11367, 11368, 11369, 11373, 11374, 11375, 11376, 11379, 
11380, 11381, 11382, 11383), class = "Date")
> 
> vxnidx[1]
[1] "2001-02-02"
> VXN[vxnidx[1]]
     Open High Low Close
> VXN["2001-02-02"]
           Open High Low Close
2001-02-02   NA   NA  NA 54.89
> 
```

数据来自此处的 CBOE：http: [//www.cboe.com/micro/vxn/#historical](http://www.cboe.com/micro/vxn/#historical)

```
2/2/2001,n/a,n/a,n/a,54.89
2/5/2001,n/a,n/a,n/a,55.85
2/6/2001,n/a,n/a,n/a,53.68
2/7/2001,n/a,n/a,n/a,54.41
2/8/2001,n/a,n/a,n/a,54.66
2/9/2001,n/a,n/a,n/a,55.85
2/12/2001,n/a,n/a,n/a,57.05
2/13/2001,n/a,n/a,n/a,58.42
2/14/2001,n/a,n/a,n/a,57.49
2/15/2001,n/a,n/a,n/a,55.19
2/16/2001,n/a,n/a,n/a,55.34
2/20/2001,n/a,n/a,n/a,57.93
2/21/2001,n/a,n/a,n/a,59.57
2/22/2001,n/a,n/a,n/a,60.99
2/23/2001,n/a,n/a,n/a,62.03
2/26/2001,n/a,n/a,n/a,61.77
2/27/2001,n/a,n/a,n/a,63.27
2/28/2001,n/a,n/a,n/a,63.65
3/1/2001,n/a,n/a,n/a,64.32 
```

编辑：会话信息

```
> sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: i386-apple-darwin9.8.0/i386 (32-bit)

locale:
[1] en_AU.UTF-8/en_AU.UTF-8/en_AU.UTF-8/C/en_AU.UTF-8/en_AU.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] PerformanceAnalytics_1.0.4.4 quantmod_0.3-17              TTR_0.21-1                  
[4] xts_0.8-6                    zoo_1.7-7                    Defaults_1.1-1              

loaded via a namespace (and not attached):
[1] grid_2.15.2     lattice_0.20-10
> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T14:23:26.330

这将对较新版本的 xts 发出警告。您的软件包有些过时，因此您可以尝试升级。

```
library(quantmod)
URL <- paste("http://www.cboe.com/publish/ScheduledTask",
  "/MktData/datahouse/vxncurrent.csv", sep="")
VXN.tmp <- read.csv(URL, na.strings='n/a', skip=2)
VXN.tmp[,1] <- as.Date(VXN.tmp[,1], tz="", format="%m/%d/%Y")
VXN <- xts(as.matrix(VXN.tmp[,-1]), VXN.tmp[,1], tzone="")
# Warning message:
# In xts(as.matrix(VXN.tmp[, -1]), VXN.tmp[, 1], tzone = "") :
#   ‘tzone’ setting ignored for Date indexes
VXN <- VXN[!is.na(Cl(VXN))]
VXN['2001-02-02']
#            Open High Low Close
# 2001-02-02   NA   NA  NA 54.89
VXN[as.Date('2001-02-02')]
#            Open High Low Close
# 2001-02-02   NA   NA  NA 54.89 
```

这是我的`sessionInfo`：

```
R> sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] quantmod_0.4-0 TTR_0.21-1     xts_0.9-3.2    zoo_1.7-10     Defaults_1.1-1

loaded via a namespace (and not attached):
[1] grid_2.15.2     lattice_0.20-13 
```

问题的原因是所有 xts 索引值都存储为`POSIXct`，因此即使您通过`as.Date(VXN.tmp[,1], ...)`xts 将第一列转换为 Date ，也会将其转换为`POSIXct`. 此外，由于您没有指定时区，这将由您的操作系统确定（并且可能特别成问题）。

您可以尝试设置`tzone="UTC"`（因为这基本上是较新版本的 xts 所做的），但我无法告诉您这是否可行。最好升级一下。

# blackberry - 如何在黑莓中证明 LabelField 的合理性

> ID：15174190
> 
> 赞同：1
> 
> 时间：2013-03-02T11:59:24.890
> 
> 标签：blackberry

我有很长的文本内容，我想在屏幕上显示它，并使用或其他[方式对齐对齐。](http://en.wikipedia.org/wiki/Justification_%28typesetting%29)`LabelField`目前，我可以做右/左/中心对齐，但不能*证明*对齐。

是否有任何自定义控件可以帮助我做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T06:52:49.930

这只是一个原型，所以可能有些事情它无法处理。但是，它应该是一个开始，你可以用它来做你想做的事。大多数重要的逻辑都在`paint()`方法中。

*我不知道有任何内置（RIM 库）方法可以做到这一点。*

```
public class JustifiedLabelField extends LabelField {

   /** a cache of the label's words, to avoid having to recalculate every
       time paint() is called */
   private String[] _words;
   /** the dynamic field height */
   private int _height = 0;

   public JustifiedLabelField(Object text, long style){
      super(text, style);
      setText(text);
   }

   public void setText(Object text) {
      // update the words cache when text changes
      _words = split((String)text, " ");  // NOTE: this only supports String type!
      super.setText(text);
   }

   public int getPreferredHeight() {
      // I believe overriding this method is necessary because the 
      //  justification might produce a different total number of lines, 
      //  depending on the algorithm used
      return (_height > 0) ? _height : super.getPreferredHeight();
   }

   protected void paint(Graphics g) {
      Font font = g.getFont();
      int space = font.getAdvance(' ');
      int fontHeight = font.getHeight();
      int fieldWidth = getWidth();         
      int word = 0;
      int y = 0;
      while (word < _words.length) {
         // each iteration of this loop handles one line
         int wordsInLine = 0;
         int lineWordWidths = 0;
         // first loop over all words that fit on this line, to measure
         while (word < _words.length) {
            int wordWidth = font.getAdvance(_words[word]);
            if (lineWordWidths + wordWidth <= fieldWidth) {
               lineWordWidths += (wordWidth + space);
               word++;
               wordsInLine++;
            } else {
               break;
            }
         }

         // how much total space (gap) should be placed between every two words?
         int gapSpacing = 0;
         if (word == _words.length) {
            // don't justify at all on last line
            gapSpacing = space;
         } else if (wordsInLine != 1) {
            gapSpacing = (fieldWidth - (lineWordWidths - wordsInLine * space)) / (wordsInLine - 1);
         }

         int x = 0;
         // now actually draw the words, with added spacing
         for (int j = word - wordsInLine; j < word; j++) {
            int span = g.drawText(_words[j], x, y);
            x += span + gapSpacing;            
         }

         y += fontHeight;
      }
      _height = y;
   }
} 
```

上面的代码使用了一个`String` `split()`方法。您可以在此处找到[一种可能的实现方式](http://supportforums.blackberry.com/t5/Java-Development/String-Manipulation-split-replace-replaceAll/ta-p/620038)。

然后，像这样使用类：

```
 public LabelScreen() {
      super(MainScreen.VERTICAL_SCROLL | MainScreen.VERTICAL_SCROLLBAR);

      String loremIpsum = "Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Nam cursus. Morbi ut mi. Nullam enim leo, egestas id, condimentum at, laoreet mattis, massa. Sed eleifend nonummy diam. Praesent mauris ante, elementum et, bibendum at, posuere sit amet, nibh. Duis tincidunt lectus quis dui viverra vestibulum. Suspendisse vulputate aliquam dui. Nulla elementum dui ut augue. Aliquam vehicula mi at mauris. Maecenas placerat, nisl at consequat rhoncus, sem nunc gravida justo, quis eleifend arcu velit quis lacus. Morbi magna magna, tincidunt a, mattis non, imperdiet vitae, tellus. Sed odio est, auctor ac, sollicitudin in, consequat vitae, orci. Fusce id felis. Vivamus sollicitudin metus eget eros.";
      JustifiedLabelField label = new JustifiedLabelField(loremIpsum, Field.NON_FOCUSABLE);
      add(label);
   } 
```

产生这个：

![在此处输入图像描述](../Images/6088da0b7e769c975dce5c8e64b4d180.png)

## 限制

*   我没有做任何事情来解释这个领域中的填充之类的事情
*   `LabelField`允许您使用其他类型调用`setText()`或构造函数，而不仅仅是`String`. 我的班级只支持`String`，但您可以轻松扩展它。
*   `' '`我的班级仅在空格 ( )上拆分字符串。您可能希望支持拆分其他字符，甚至插入破折号来打断非常长的单词。我会把它留给你。
*   我没有测试任何*边缘情况*，比如长度超过字段宽度的单词。我只用全屏宽度字段测试了这个，用中小字。
*   [请参阅 Eugen 在我链接到的页面](http://supportforums.blackberry.com/t5/Java-Development/String-Manipulation-split-replace-replaceAll/ta-p/620038)上的评论以了解所使用的`split()`方法

## 跟进

我对上面发布的代码进行了一些改进，并在[此处在线](http://www.enscand.com/roller/enscand/entry/can_this_really_be_this)发布。较新的版本应该处理填充，而这个版本没有。`LabelField`如果您选择一个字符串拆分算法来更改超类认为该字段应该有多少行，它还应该处理垂直大小问题。更多评论，也是。

# jenkins - Jenkins 主机密钥验证失败

> ID：15174194
> 
> 赞同：183
> 
> 时间：2013-03-02T11:59:42.050
> 
> 标签：jenkins

**我对jenkins**有问题，设置“git”，显示以下错误：

```
Failed to connect to repository : Command "git ls-remote -h https://person@bitbucket.org/person/projectmarket.git HEAD" returned status code 128:
stdout:
stderr: fatal: Authentication failed 
```

我用**ssh**测试过：

```
git@bitbucket.org:person/projectmarket.git 
```

这是错误：

```
Failed to connect to repository : Command "git ls-remote -h git@bitbucket.org:person/projectmarket.git HEAD" returned status code 128:
stdout:
stderr: Host key verification failed.
fatal: The remote end hung up unexpectedly 
```

我还使用“SSH 密钥”完成了这些步骤。

在 Jenkins 下登录

```
sudo su jenkins 
```

将您的 github 密钥复制到 Jenkins .ssh 文件夹

```
cp ~/.ssh/id_rsa_github* /var/lib/jenkins/.ssh/ 
```

重命名键

```
mv id_rsa_github id_rsa
mv id_rsa_github.pub id_rsa.pub 
```

但仍然无法在**jenkins中工作****git**存储库。

 **感谢帮助！

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2013-03-04T06:54:23.287

更改为`jenkins`用户并手动运行命令：

```
git ls-remote -h git@bitbucket.org:person/projectmarket.git HEAD 
```

首次通过 SSH 连接到新主机时，您将收到标准 SSH 警告：

```
The authenticity of host 'bitbucket.org (207.223.240.181)' can't be established.
RSA key fingerprint is 97:8c:1b:f2:6f:14:6b:5c:3b:ec:aa:46:46:74:7c:40.
Are you sure you want to continue connecting (yes/no)? 
```

键入`yes`并按 Enter。主机密钥`bitbucket.org`现在将添加到`~/.ssh/known_hosts`文件中，您将不会再在 Jenkins 中收到此错误。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2014-11-17T13:12:53.597

Jenkins 是一个服务帐户，它没有设计外壳。人们普遍接受服务帐户。应该不能交互式登录。

要解决“Jenkins 主机密钥验证失败”，请执行以下步骤。我用 mercurial 和詹金斯。

1）在终端上执行以下命令

```
 $ sudo su -s /bin/bash jenkins 
```

提供密码

2）使用以下命令生成公钥私钥：

```
 ssh-keygen 
```

你可以看到输出为::

```
Generating public/private rsa key pair. 
Enter file in which to save the key (/var/lib/jenkins/.ssh/id_rsa): 
Enter passphrase (empty for no passphrase): 
Enter same passphrase again: 
```

3）按回车->不提供任何密码->按回车

```
 Key has been generated 
```

4) 转到 --> cat /var/lib/jenkins/.ssh/id_rsa.pub

5) 从 id_rsa.pub 复制密钥

6）退出bash

7)`ssh@yourrepository`

8)`vi .ssh/authorized_keys`

9) 粘贴密钥

10) 退出

11)手动登录mercurial服务器

注意：请手动登录，否则詹金斯会再次给出错误“主机验证失败”

12）一旦手动完成，现在去 Jenkins 并进行构建

享受！！！

祝你好运

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2015-12-02T14:17:20.453

或者您可以使用：

`ssh -oStrictHostKeyChecking=no host`

这将是不安全的（中间人攻击），但最简单的解决方案。

更好的方法是在主机和 IP 地址之间生成正确的映射，所以`ssh`不会抱怨：

```
#!/bin/bash

for domain in "github.com" "bitbucket.org"; do
    sed -i "/$domain/d" ~/.ssh/known_hosts
    line=$(ssh-keyscan $domain,`nslookup $domain | awk '/^Address: / { print $2 ; exit }'`)
    echo $line >> ~/.ssh/known_hosts
done 
```

摘自[要点](https://gist.github.com/FelikZ/94e67967b3b22e61d94ee68b184702d4)。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-04-03T08:06:34.617

有同样的问题，我这样解决：

重置 id_rsa* 权限仅适用于当前用户 无组 无其他

```
chmod o-rwx ~/.ssh/id*
chmod G-rwx ~/.ssh/id*

ls -lart ~/.ssh/

-rw-------  1 jenkins nogroup  398 avril  3 09:34 id_rsa.pub
-rw-------  1 jenkins nogroup 1675 avril  3 09:34 id_rsa 
```

并清除 ~/.ssh/know_hosts

现在以詹金斯的身份连接

```
sudo su jenkins 
```

试试 jenkins 命令

```
git ls-remote -h git@bitbucket.org:user/project.git HEAD 
```

如果没有出现问题，现在詹金斯将能够连接回购（至少对我来说^^）

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-09-04T15:16:52.210

至于解决方法（例如 Windows slave），在全局属性中定义以下环境变量：

```
GIT_SSH_COMMAND="ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no" 
```

[![詹金斯，全局属性，环境变量，GIT_SSH_COMMAND](../Images/8a798ab15411d3e47b52f7f04fc3e0fc.png)](https://i.stack.imgur.com/3St38.png)

注意：如果您没有看到该选项，您可能需要[*EnvInject*插件](https://plugins.jenkins.io/envinject)。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-05-11T05:46:34.967

使用[https://bitbucket.org/YYYY/XX.git](https://bitbucket.org/YYYY/XX.git)

你应该删除用户名@

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-02-28T18:46:15.230

我遇到了这个问题，结果发现问题是 jenkins 服务没有以 jenkins 用户身份运行。因此，以 jenkins 用户身份运行命令就可以了。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-11-28T19:14:25.570

1.  使用 jenkins 登录：“sudo su -s /bin/bash jenkins”
2.  git clone 导致关键错误的所需仓库
3.  它会要求您通过显示是/否来添加密钥（输入是或y）

*而已！*

您现在可以重新运行 jenkins 作业。

我希望你这能解决你的问题。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-10-02T16:36:08.253

*   确保我们没有编辑任何默认 sshd_config 属性以跳过错误

*   `known_hosts`主机验证失败 -文件中肯定缺少主机名条目

*   登录到进程失败的服务器并执行以下操作：

    1.  对运行进程的用户执行 Sudo

    2.  `ssh-copy-id destinationuser@destinationhostname`

    3.  第一次会这样提示，说yes，也会第一次询问密码：

        ```
        The authenticity of host 'sample.org (205.214.640.91)' can't be established.
        RSA key fingerprint is 97:8c:1b:f2:6f:14:6b:5c:3b:ec:aa:46:46:74:7c:40.
        Are you sure you want to continue connecting (yes/no)? *yes* 
        ```

        密码提示？*给密码*

    4.  现在从运行进程的服务器上，执行`ssh destinationuser@destinationhostname`. 它应该在没有密码的情况下登录。

        **注意：**不要更改用户*.ssh*目录中文件的默认权限，您最终会遇到不同的问题

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-02-28T22:57:47.067

从 bitbucket 和 github 复制主机密钥：

```
ssh root@deployserver 'echo "$(ssh-keyscan -t rsa,dsa bitbucket.org)" >> /root/.ssh/known_hosts'
ssh root@deployserver 'echo "$(ssh-keyscan -t rsa,dsa github.com)" >> /root/.ssh/known_hosts' 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-08-02T06:29:34.920

**SSH**

如果您使用 SSH 进行尝试，则**主机密钥验证**错误可能有多种原因。请按照以下步骤克服所有原因。

1.  将环境变量设置为**HOME**并提供地址作为**.ssh**文件夹的根目录。例如：- 如果您的 .ssh 保存在**Name**文件夹中。C：/用户/名称。
2.  现在确保在存储库链接中也提供了公共 SSH 密钥。它是 github 或 bitbucket 或任何其他。
3.  打开 git bash。并尝试从存储库中克隆项目。这将有助于在 known_host 文件中添加您的存储库 URL，该文件是在 .ssh 文件夹中自动创建的。
4.  现在打开 jenkins 并创建一个新工作。然后点击配置。
5.  在 Git 下的源代码管理中提供克隆 URL。URL 应该以 git@github.com/....... 或 ssh://proje........ 开头
6.  在凭据下，您需要添加要克隆项目的存储库表单的用户名和密码。选择该凭据。
7.  现在应用并保存配置。
8.  答对了！开始构建项目。我希望现在您不会收到任何主机密钥验证错误！

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-05-11T10:01:11.067

您可以在 Jenkinsfile 或任何您想要的任何地方以“https”URL 格式使用“git url”的最佳方式。

`git url: 'https://github.com/jglick/simple-maven-project-with-tests.git'`

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-01-02T11:55:30.470

尝试

ssh-keygen -R 主机名

-R hostname 从 known_hosts 文件中删除属于 hostname 的所有键。此选项对于删除散列主机很有用

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-10-05T02:48:23.887

问题在于 /var/lib/jenkins/.ssh/known_hosts。它存在于第一种情况，但不存在于第二种情况。这意味着您在不同的系统上运行，或者第二种情况以某种方式在 chroot 中被监禁，或者通过其他方式与文件系统的其余部分分开（这是从 jenkins 运行随机代码的好主意）。

接下来的步骤是找出这个用户的 chroot 是如何创建的，并修改这个 chroot 中的已知主机。或者只是去忽略已知主机的其他方式，例如 ssh-keyscan，StrictHostKeyChecking=no 左右。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-09-20T14:55:21.293

在 ssh-keygen 之后，可能只需要将公钥复制到远程主机：

```
ssh-copy-id -i ~/.ssh/mykey user@host 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2022-03-02T08:01:54.773

使用 ssh-keyscan 应该更容易：

```
ssh-keyscan bitbucket.org >> ~/.ssh/known_hosts 
```

此命令会将所有必需的主机放到`~/.ssh/known_hosts`. 您需要在 Jenkins 机器中运行此命令。您还可以创建一个作业并将该命令放入该作业配置的“执行外壳”部分，然后执行该作业。**

# node.js - mongodb节点认证说未授权尚未登录

> ID：15174196
> 
> 赞同：0
> 
> 时间：2013-03-02T11:59:51.927
> 
> 标签：node.js, mongodb, node-mongodb-native

我有以下内容，并且我使用它来登录并进行查询，所以我通过了`db.authenticate`，但是当我进行查询时，我被抛出：

```
MongoError: unauthorized data ns:data.data lock type:0 client:127.0.0.1] name: 'MongoError' } 
```

就像下面的代码块在所有嵌套中看起来一样荒谬，我想那是 javascript 的唯一缺陷。

```
Db.open(function(err, db) {     
    if(!err) {
    db.authenticate("admin", "1234", function(authdb, err) {

            if(!err) { //YAY I LOG IN!!!

              db.collection('data', function(err, collection) {
                collection.findOne({'id':'1'}, function(err, item) {
                    if(err) { //What?!? I AM logged in
                         db.close();
                         console.log(err);

                }
              }  );
            }  );
          }
        }  ); //Sad face
    }
}); 
```

为什么我可以进行身份​​验证但无法运行`findOne`查询？如果我在 mongo shell 中对同一个用户尝试相同的操作，它会通过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T12:54:32.763

尝试交换`authdb`和`err`：

```
// WRONG
db.authenticate("admin", "1234", function(authdb, err) { ... });
// RIGHT
db.authenticate("admin", "1234", function(err, authdb) { ... }); 
```

# jquery - 如何使用 Jquery 显示/隐藏选定的 Li

> ID：15174205
> 
> 赞同：2
> 
> 时间：2013-03-02T12:00:25.913
> 
> 标签：jquery, html-lists, show-hide

我有很多包含**Li的****UL**标签， 我想要那些 Li并**隐藏**其他人。**`classnames`
`show``classname are same`**

 ****这里是 **[JSFiddle 演示](http://jsfiddle.net/satinder_singh1/m4VyA/)**

例如这里如果我点击class1然后“John，Michle，Alex”将可见其余都必须隐藏

**已编辑：** 在隐藏列表时也对 Li 进行排序

**回答：**

通过更改 `$(this).show();` 来 `$(this).parent('Li').show();`解决我的空白问题:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:06:29.833

您在 jsfiddle 中犯了一个简单的错误。这是一个[修复](http://jsfiddle.net/m4VyA/1/)。

我改变了这一行：

```
if ($('#emplistName Ul Li Span').hasClass(className) === true) { 
```

至：

```
if ($(this).hasClass(className) === true) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T12:06:57.683

1.  请勿使用`.live()`，已弃用
2.  不要用`.each()`，没必要

```
$("ul.tagingUL li").on("click", function () {
    var className = $(this).attr('class');
    $('#emplistName ul li span.'+className).show();
    $('#emplistName ul li span:not(.'+className+')').hide();
}); 
```

`[**JSFIDDLE**](http://jsfiddle.net/DJDavid98/m4VyA/2/)`****

# c# - 使用 servicestack API 和旧的现有 API 进行重定向的选项

> ID：15174206
> 
> 赞同：1
> 
> 时间：2013-03-02T12:00:26.910
> 
> 标签：c#, iis, servicestack, httphandler

我们刚刚使用令人惊叹的 servicestack Web API 实现了新的 API，到目前为止它是一个简单的过渡。

然而，正如我们今天发现的所有缺失的要求一样，有一个无法更改的第三方模块使用旧的 API。

举个例子：

新 API 的格式为

```
"http://localhost/api/v1/customer/update" 
```

（这是一个 POST）并且旧的 api 是格式

```
"http://localhost/services/LL_API/API_Customer.asmx/UpdateCustomer?
                                                       name="xxx"&address="yyy" 
```

（这是一个 GET）。事实上，来自旧 API 的所有调用都是 GET。还有大约 30 个旧 API 调用，它们看起来与新的 API REST 基本格式完全不同。

服务堆栈将如何处理这个问题？我可以放置一个接收 *.asmx 请求的 httphandler 并创建新的服务堆栈 Web 服务来处理这些请求，或者我可以重用新创建的 Web 服务吗？

我遇到的问题是返回的数据在新旧 API 之间会有所不同，所以这就是为什么我正在考虑创建一组新的 Web 服务。

# java - 多个按键事件？

> ID：15174207
> 
> 赞同：1
> 
> 时间：2013-03-02T12:00:30.460
> 
> 标签：java, android, eclipse, overriding, keyevent

嗨，我的 Android 应用程序有问题。我使用布尔方法来更改后退按钮的功能以进行布局更改。如代码所示，如​​果我使用 if- 语句并且这些情况为真，则布局会更改。问题是我有不止一点不同的情况我想修改按钮的功能。但是如果我复制函数并更改名称 eclipse 想要删除 @ 覆盖，然后该方法不再有效。

所以现在的问题是：如何创建多个 KeyEvent？

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK && lengthisopen == true){

        lengthisopen = false;
        setContentView(R.layout.length);
        return true;
    } 
    return super.onKeyDown(keyCode, event);

}

public boolean onKeyDown2(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK && lengthisopen == true){

        lengthisopen = false;
        setContentView(R.layout.length);
        return true;
    } 
    return super.onKeyDown(keyCode, event);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:15:38.663

`onKeyDown(int keyCode, KeyEvent event)`is 一个可用的方法 is `Activity`，所以你可以覆盖它。但`onKeyDown2()`不是超类的方法。所以你不能从任何超类中覆盖它。这就是为什么它说你删除`@override`.

如果你想创建多个关键事件，那么你应该只去

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK && lengthisopen == true){

        lengthisopen = false;
        setContentView(R.layout.length);
        return true;
    } 
    else if(condition){
         // next code
    }
    return super.onKeyDown(keyCode, event);

} 
```

# ruby-on-rails - 如何不在rails中的某些网址上显示application.html.erb中包含的菜单？

> ID：15174210
> 
> 赞同：3
> 
> 时间：2013-03-02T12:00:45.743
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我已经包含了一个 html 菜单，`application.html.erb`其中在所有视图模板上显示它，我想知道我怎么不能在某些页面上显示？

像`if path == HOME || "/page/1"`

然后，

不要显示菜单，否则显示它。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T12:04:25.383

例如，在您不希望菜单出现的操作中创建一个实例变量`@hide_menu`

然后，您可以在视图中对其进行过滤：

```
<% unless @hide_menu %>
...
<% end %> 
```

如果您有很多变量来执行此操作，对于大量代码，您可以使用哈希，`@config`例如，并在您的应用程序控制器中初始化它：

### 应用控制器

```
before_filter :init_config

def init_config
  @config = {...}
end 
```

### 看法

```
<% unless @config[:hide_menu] %>
  ...
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T12:09:34.147

您可以使用 request.fullpath 检查当前的 url，因此您可以使用 if request.fullpath == HOME 来检查您是否在家或任何地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T12:58:26.173

首先在as-中使用**菜单代码**`application_controller``before_filter`

**应用控制器：**

```
before_filter :show_menus

 def show_menus

      # the menu stuff you want to show
  end 
```

然后，您可以在`before_filter`不应该执行或不想显示菜单的任何控制器中使用以下内容-

**其他控制器：**

```
skip_before_filter :show_menus 
```

您甚至可以忽略`before_filter`任何您想要的操作。例如-

```
skip_before_filter :show_menus, :only => [:logout] 
```

上面的行不会显示您在其中提到此行的控制器的**注销操作**菜单（此处为其他控制器）。

**注意：**此过程将避免**丑陋的重复 if else 语句**为每个操作显示/隐藏菜单，如 -

```
if action_name

#show menu

else

#hide menu

end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T15:45:02.097

如果您需要基于某些逻辑隐藏菜单，您可以使用Intrepidd[的](https://stackoverflow.com/users/624551/intrepidd)[答案](https://stackoverflow.com/questions/15174210/how-to-not-show-menu-included-in-application-html-erb-on-some-urls-in-rails/15174242#15174242)。 如果您只需要在几个地方隐藏菜单或显示其他内容而不是您可以使用的菜单
`content_for`

**/app/views/layouts/application.html.erb**

```
<!DOCTYPE html>
<html>
  <head>
    <title>my title</title>
  </head>
  <body>
    <%= content_for?(:menu) ? yield(:menu) : (render 'layouts/menu') %>
    <%= yield %>
  </body>
</html> 
```

**/app/views/layouts/_menu.html.erb**

```
<%= link_to "Home", root_path %> | <%= link_to "Pages", pages_path %> 
```

**/app/views/pages/index.html.erb**

```
<% content_for :menu do %>
  this can be whatever you want, even a blank string
<% end %>

here the content for pages/index 
```

# javascript - 单击 jQuery 按钮内的 span

> ID：15174213
> 
> 赞同：0
> 
> 时间：2013-03-02T12:01:05.553
> 
> 标签：javascript, jquery, jquery-ui

作为一个更大的解决方案的一部分，我有手风琴式的 jQuery 控件，它将标题实现为 jQuery 切换按钮。每个标题还必须有一个帮助气球。简而言之，设置类似于[此 jsFiddle](http://jsfiddle.net/kxntf/3/)上发布的设置。

```
<div id="button1">Go to main action <span id="span1" style="color:blue">Help</span>     </div>
<div id="out"/>
$('#button1').button().click(function(){
    $('#out').text('Button clicked');
});

$('#span1').click(function(){
    $('#out').text('Span clicked');
}); 
```

是否可以这样做，以便我可以单击位于按钮 div 内的帮助范围？或者，按钮是否总是会获取其所有内容的事件，以防止内部元素获取点击事件？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T12:03:45.460

您的事件首先触发`span`，然后也触发`button`。您可以通过方法阻止在父级上触发事件`stopPropagation()`。另外，`return false`做同样的事情。

`[**Fiddle for demonstration**](http://jsfiddle.net/kxntf/4/)`

```
$('#span1').click(function(e){
    $('#out').text('Span clicked');
    e.stopPropagation();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T12:05:08.187

或者：

```
$('#span1').click(function(){
    $('#out').text('Span clicked');
    return false;
}); 
```

jSfiddle [http://jsfiddle.net/kxntf/5/](http://jsfiddle.net/kxntf/5/)

# codeigniter - Codeigniter - MPDF 不导出数据

> ID：15174216
> 
> 赞同：2
> 
> 时间：2013-03-02T12:01:47.167
> 
> 标签：codeigniter, mpdf

我是 Codeigniter 的新手，想使用 MPDF 将 MYSQL 数据库中的数据导出到 PDF 文件中。代码如下：

看法：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Export PDF</title>
    </head>
    <body>
        <div id="container">
            <h4>Member Data</h4>
            <table border="1">
                <tr>
                    <th>group_id</th>
                    <th>group_name</th>
                    <th>Archieved</th>
                </tr>
                <?php
                foreach ($member as $rows) {
                    echo $rows['group_id'];
                    ?>
                    <tr>
                        <td><?php echo $rows['group_id'] ?></td>
                        <td><?php echo $rows['group_name']?></td>
                        <td><?php echo $rows['archieved'] ?></td>
                        </tr>
                        <?php
                        $i++;
                    }
                    ?>
            </table>
            <br> <br>
            <a href='<?php echo base_url(); ?>index.php/member_con/topdf'><span style='color:green;'>Export to Pdf</span></a>
        </div>
        <?php
        ?>
    </body>
</html> 
```

控制器：

```
<?php

class Member_con extends CI_Controller {
    public function __construct() {
        parent::__construct();
        $this->load->model('member_model');
        $this->load->helper('url');
        $this->load->library('mpdf');
    }
    public function index() {
        $data['member'] = $this->member_model->alldata();
        $this->load->view('member_view', $data);
    }
    function topdf() {
        $this->mpdf->useOnlyCoreFonts = true;
        $filename = "VISH";
        $data['member'] = $this->member_model->alldata();
        $html = $this->load->view('member_view', $data['member'], true);
        $this->mpdf->setTitle('Posts');
        $this->mpdf->writeHTML($html);
        $this->mpdf->output($filename, 'D');
    }
}
?> 
```

模型：

```
<?php
  class Member_model extends CI_Model {
      function __construct() {
        parent::__construct();
                $this->load->database();

    }
    function Member_Model() {
        parent::Model();
    }
    function alldata()
    {
        $this->db->select('*');
        $this->db->from('groups');
        $this->db->order_by('group_id','ASC');
        $getData = $this->db->get();
        if($getData->num_rows() > 0)
        return $getData->result_array();
        else return null;
    }
}
?> 
```

使用此代码，它给了我一个空白的 PDF 文件，只有文本为“成员数据”和“导出为 pdf”。我检查了它是否正在将数据传递给查看，是的，它正在这样做。但不知道'foreach'循环是怎么回事。我正在打印“foreach”循环之外的所有内容，但对数据成员进行了机器人操作。谁能让我知道我该怎么办？

提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:21:12.843

得到了答案。在控制器中，而不是

```
 $html = $this->load->view('member_view', $data['member'], true); 
```

我使用了以下内容：

```
 $html = $this->load->view('member_view', $data, true); 
```

# socialengine - 无法将文件移动到包目录-socialengine 插件核心插件

> ID：15174219
> 
> 赞同：1
> 
> 时间：2013-03-02T12:02:05.540
> 
> 标签：socialengine

通过包管理器上传socialengine插件的核心插件（module-seaocore-4.2.9p1.tar）时，出现错误

```
 Unable to move file to packages directory. 
Please set chmod 0777 on the temporary/package/archives directory. 
```

但是，如果我们尝试上传任何其他插件，它将以正常方式被提取。

我检查了文件权限，它已经是 777。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-21T13:53:37.970

将 tar 上传到temporary/package/packages 并将其解压缩到一个文件夹中（最终路径：temporary/package/packages/module-seaocore-4.2.9p1）并不总是适合我。

但是，如果您在temporary/package/packages 和temporary/packages/archives 目录上都设置了chmod 777 权限，则以下步骤似乎确实有效：

1.  尝试安装并让它失败并显示上述错误消息

2.  将 tar 上传到临时/包/存档

3.  返回 SE 管理面板中的 Manage Packages & Plugins 屏幕，然后单击 Install New Packages

4.  它会在temporary/package/archives中找到tar，处理解压到temporary/package/packages，然后让你安装

我现在已经复制了很多次，它似乎有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T12:17:27.377

我通过将 tar 文件升级到临时/包/包并将其解压缩到名为 module-seaocore-4.2.9p1 的文件夹来解决此问题。然后删除 tar 文件并转到包管理器并安装插件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-22T06:25:12.610

我得到了解决方案，

解压“.tar 文件”，然后打开“应用程序”文件夹，您将找到 3 个文件夹“语言、模块、包”，将您在这些文件夹中找到的所有文件和文件夹复制并粘贴到相应的“应用程序”文件夹中你的工作目录，

**记住**

再次复制它们后，将 chmod - R 0777 权限授予您工作文件夹的包目录。

sudo chmod -R 0777 包/

现在，您可以在管理面板的“管理插件”部分找到安装插件的选项。

# symfony - Symfony ManyToMany 双向关系 只在一个方向上存在

> ID：15174220
> 
> 赞同：1
> 
> 时间：2013-03-02T12:02:07.110
> 
> 标签：symfony, doctrine, many-to-many, bidirectional, formbuilder

在网上搜索了很长时间后，我决定自己写我的第一篇文章。我希望我以正确的方式去做。

这是我的问题。我在我的项目中使用 symfony 2.1。而且我必须处理两个对象之间的双向多对多关系。
我已经创建了 2 个实体，完成了映射，完成了控制器、模板和 formBuilder。我设法坚持两个实体。对于一个实体，我可以保留该实体以及与另一个实体的关系。但对于另一个实体，我只能坚持实体。与其他实体的关系不会持续存在。

以下是 2 个实体的摘录：

```
class EntrainementCategorie{
{...}

/**  @ORM\ManyToMany(targetEntity="EntrainementType", mappedBy="categories", cascade="persist") */
protected $types;

} 
```

这是第二个实体：

```
class EntrainementType{

{...}

/** 
 * @ORM\ManyToMany(targetEntity="EntrainementCategorie",inversedBy="types", cascade="persist") 
 * @ORM\JoinTable(name="mottet_entrainement_types_categories",
 *                  joinColumns={@ORM\JoinColumn(name="idType", referencedColumnName="id")},
 *                  inverseJoinColumns={@ORM\JoinColumn(name="idCategorie", referencedColumnName="id")})
 */
protected $categories;

} 
```

所以你可以看到，类别和类型之间存在双向多对多关系。

这是控制器：

```
class EntrainementCategorieController extends GenericController{

{...}

public function creerAction(Request $request){
    return $this->creerActionGeneric($request,new Categorie(),new CategorieType());
}

} 
```

第二个 ：

```
class EntrainementTypeController extends GenericController{

{...}   

public function creerAction(Request $request){
    return $this->creerActionGeneric($request,new Type(),new TypeType());
}

} 
```

这是 GenericController ：

```
class GenericController extends Controller{

{...}

protected function creerActionGeneric(Request $request,$object,$objectType){
    $form = $this->createForm($objectType,$object);
    $isThereProblem = false;
    if ($request->isMethod('POST')) {
        $isThereProblem = true;
        $form->bind($request);
        if ($form->isValid()) {
            $this->getEntityManager()->persist($object);
            $this->getEntityManager()->flush();
            $this->get('session')->getFlashBag()->add('information', $this->FORM_SUCCESS_MESSAGE);
            $isThereProblem = false;
        }
    }
    if ($isThereProblem){
        $this->get('session')->getFlashBag()->add('error', $this->FORM_ERROR_MESSAGE);
    }
    return $this->render($this->BUNDLE.':'.$this->ENTITY.':'.$this->CREATE_TEMPLATE, array('form' => $form->createView()));
}

} 
```

这是 formBuilder ：

```
class EntrainementCategorieType extends AbstractType{

{...}

public function buildForm(FormBuilderInterface $builder, array $options){
    $builder->add('label','text')
            ->add('types','entity',array(
                                    'class' => 'KarateEntrainementBundle:EntrainementType',
                                    'property' => 'label',
                                    'multiple' => true,
                                    'expanded' => true));
}

} 
```

第二个：

```
class EntrainementTypeType extends AbstractType{

{...}

public function buildForm(FormBuilderInterface $builder, array $options){
    $builder->add('label','text')
            ->add('categories','entity',array(
                                            'class' => 'KarateEntrainementBundle:EntrainementCategorie',
                                            'property' => 'label',
                                            'multiple' => true,
                                            'expanded' => true));
}

} 
```

因此，当我填写 EntrainementType 表单时，类型及其与类别的关系都将保持不变。但是当我填写 EntrainementCategory 表单时，只有类别被保留，而不是它与类型的关系。

有谁知道我做错了什么？

希望我已经很清楚了。谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T21:43:55.377

我终于设法做到了。我不能在那个上使用 creerActionGeneric。我必须明确设置类别和每种类型之间的关联：

```
$form->bind($request);
if ($form->isValid()) {
   $this->getEntityManager()->persist($categorie);
   foreach($categorie->getTypes() as $type){
      $type->addCategorie($categorie);
      $this->getEntityManager()->persist($type);
   }
   $this->getEntityManager()->flush();
} 
```

这工作得很好。但是我不知道为什么当我坚持类型时，我不必那样做？？？oO

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-12T02:57:24.000

有一种更好的方法可以通过关系的教义配置来进行。Doctrine 将允许您指定引用关系的连接表和列。

实际上，在决定阅读更多内容之前，我偶然发现了这个答案，因为这似乎不合适......这是建立这样一种关系的*正确方法*（并且在 yml 中，因为这是我更喜欢的），并且我的显然实体（提要可以拥有/属于许多列表，列表可以拥有/属于许多提要）

饲料配置：

```
manyToMany:
    providerLists:
        targetEntity: ProviderList
        joinTable:
            name: providerlist_feed
            joinColumns:
                feed_id:
                    referencedColumnName: id
            inverseJoinColumns:
                providerlist_id:
                    referencedColumnName: id 
```

列表配置

```
manyToMany:
    feeds:
        targetEntity: Feed
        joinTable:
            name: providerlist_feed
            joinColumns:
                providerlist_id:
                    referencedColumnName: id
            inverseJoinColumns:
                feed_id:
                    referencedColumnName: id 
```

因此，这两个实体现在都拥有彼此，并且两者都将以相同的方式存在:)

# ajax - ajax mysql查找未返回多字字符串的正确结果

> ID：15174225
> 
> 赞同：0
> 
> 时间：2013-03-02T12:02:28.327
> 
> 标签：ajax, string, codeigniter, space

我遵循了有关 ajax 查找的[教程](http://vortexdev.netii.net/article_17/Check_the_user_name_availability_with___Codeigniter_jQuery)，该教程会通知用户用户名是否已被使用。

所以控制器语法是：

```
<?php
    class Login extends CI_Controller
    {
        function index()
        {
            $this->load->view('loginView');
        }
        function getResultfromdb($username){

            $this->db->where('username',$username);
            $query = $this->db->get('users')->num_rows();
            if($query == 0 ) echo 'userOk';
            else echo 'userNo';
        }
    } 
```

观点是：

```
<html>
    <head>
        <title>Check User Name</title>
        <link type="text/css" rel="stylesheet" href="<?=base_url()?>css/style.css"/>
    </head>

    <body>
        <form method="post" action="">

            <label for="username">Enter Your Name</label>
            <input type="text" id="username"/>
            <span class="checkUser" ></span>
            <input type="hidden" class="hiddenUrl"/>
        </form>

        <script type="text/javascript" src="<?=base_url()?>js/jquery-1.6.2.min.js"></script>
        <script type="text/javascript" src="<?=base_url()?>js/check.js"></script>

    </body>
</html> 
```

check.js 是：

```
$(document).ready(function(){

    $('#username').blur(function(){

        if( $('#username').val().length >= 3 )
            {
              var username = $('#username').val();
              getResult(username); 
            }
        return false;
    })
    function getResult(name){
        var baseurl = $('.hiddenUrl').val();
        $('.checkUser').addClass('preloader');
        $.ajax({
            url : baseurl + 'index.php/login/getResultfromdb/' + name,
            cache : false,
            success : function(response){
                $('.checkUser').removeClass('preloader');
                if(response == 'userOk') $('.checkUser').removeClass('userNo').addClass('userOk');
                else $('.checkUser').removeClass('userOk').addClass('userNo');;
            }
        })
    }
}) 
```

如前所述，这很好用。所以它将验证`bob`和`andy`完美。但是它在`bob smith`and上失败了`andy jones`。如何修改代码以验证带空格的字符串？

一如既往地感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:23:24.830

它失败了，因为您试图在 URL 中传递用户名，浏览器在传递时可能会将空间编码为 %20。因此，您的 CI 功能正在寻找 bob%20smith 而不是 bob smith。

首先，我认为甚至允许用户名中的空格而是每个人自己的空格都不是很好的做法。您需要先解码 URL

```
 function getResultfromdb($username){

            $this->db->where('username',urldecode($username));
            $query = $this->db->get('users')->num_rows();
            if($query == 0 ) echo 'userOk';
            else echo 'userNo';
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T12:20:26.920

使用`encodeURIComponent(string)`，例如：

```
var name = encodeURIComponent(name); 
```

你的js看起来像这样

```
$(document).ready(function(){

$('#username').blur(function(){

    if( $('#username').val().length >= 3 )
        {
          var username = $('#username').val();
          getResult(username); 
        }
    return false;
})
function getResult(name){
    var name = encodeURIComponent(name); // Replace name before send it
    var baseurl = $('.hiddenUrl').val();
    $('.checkUser').addClass('preloader');
    $.ajax({
        url : baseurl + 'index.php/login/getResultfromdb/' + name,
        cache : false,
        success : function(response){
            $('.checkUser').removeClass('preloader');
            if(response == 'userOk') $('.checkUser').removeClass('userNo').addClass('userOk');
            else $('.checkUser').removeClass('userOk').addClass('userNo');;
        }
    })
}
}) 
```

和 php ：

```
<?php
$url = urldecode($_GET['name']); // Replace with your parameter 
?> 
```

好的 祝你好运

# scala - 强制 TypeParameters 的重写 equals/hashCode。classTag[T].runtimeClass 解析为 Nothing / No ClassTag available

> ID：15174226
> 
> 赞同：0
> 
> 时间：2013-03-02T12:02:30.793
> 
> 标签：scala, reflection, equals, hashcode

在混合 Java/Scala 环境中，我有一个参数化类，它需要其类型参数才能正确覆盖 equals 和 hashCode。感谢[这个博客](http://blog.kennardconsulting.com/2009/10/java-puzzler-enforcing-whether-class.html)，我编写了这个方法来检查是否是这种情况，使用 ClassTag：

```
 class SomeClass[KeyType, ValueType] (arg1: Converter[KeyType], arg2:Converter[ValueType]) {
 // concrete values of KeyType/ValueType not available at construction time

 enforceEqualsHashImpl
 // enforceEqualsHashImpl[KeyType, ValueType] : "error: No ClassTag available for KeyType "

 def enforceEqualsHashImpl[KeyType : ClassTag, ValueType : ClassTag]= {

  def checkEqualsEqualsHash[T](c:Class[T]): Boolean = {

    def checkequals[T](c:Class[T]):Class[_] ={
      val equalsDeclaringClass = c.getMethod( "equals", classOf[Object]).getDeclaringClass();
      if ( classOf[Object].equals( equalsDeclaringClass ) )
        throw new Exception( "HazelIndex7 parametrized by key class" + c + " which does not override equals")
      equalsDeclaringClass
    }

    def checkHash[T](c:Class[T]):Class[_] ={
      val hashCodeDeclaringClass = c.getMethod( "hashCode").getDeclaringClass();
      if ( classOf[Object].equals( hashCodeDeclaringClass ) )
        throw new Exception( "HazelIndex7 parametrized by key class" + c + " which does not override hashCode")
      hashCodeDeclaringClass
    }

    val equalsDeclaringClass = checkequals(c)
    val hashDeclaringClass = checkHash(c)
    val equals = equalsDeclaringClass.equals(hashDeclaringClass)
    if (!equals)
      throw new Exception("Equals in class " + c + " is implemented by "+ equalsDeclaringClass + " but hashCode is implemented by: " + hashDeclaringClass );
    equals
  }

  checkEqualsEqualsHash(classTag[KeyType].runtimeClass)
  checkEqualsEqualsHash(classTag[ValueType].runtimeClass)
} 
```

但是，我得到了这个例外：

```
 java.lang.NoSuchMethodException:     scala.runtime.Nothing$.equals(scala.runtime.Nothing$)
at java.lang.Class.getMethod(Class.java:1624) 
```

在我看来，由于某种原因，ClassTag.runtimeClass 无法解析类型参数？这段代码有问题吗？什么可能导致此异常？

还尝试过这样的事情：

```
enforceEqualsHashImpl[KeyType, ValueType](classTag[KeyType], classTag[ValueType])
def enforceEqualsHashImpl[KeyType , ValueType ](implicit kc:ClassTag[KeyType],vc:ClassTag[ValueType])= ... 
```

这导致：

```
error: No ClassTag available for KeyType
enforceEqualsHashImpl[KeyType, ValueType](classTag[KeyType], classTag[ValueType])    

error: No ClassTag available for ValueType .... 
```

可能相关：请注意，类型参数必须由构造函数参数 (arg1/arg2) 间接推断，这些参数不是类型参数的具体值。

有没有更好的方法来检查equals/hashCode？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:20:42.950

**编辑：**首先，您不应该在 method 中声明类型参数`enforceEqualsHashImpl`，因为它们会影响您的类中声明`KeyType`的`ValueType`参数，我想这不是您的意图。所以你的方法的声明应该是：

```
def enforceEqualsHashImpl {
  ...
} 
```

此外，您的内部方法中的类型参数`T`对我来说似乎也有点多余。

现在关于`ClassTag`s：

如果您希望 Scala 编译器`ClassTag`为类型参数提供 s，则*必须*在某些时候指定具体的类型参数。这是因为有关类型参数的信息仅在编译时可用（类型擦除）。

如果您希望您的示例起作用，则需要将`ClassTag`s 传递给您的班级：

```
class SomeClass[KeyType : ClassTag, ValueType : ClassTag] 
```

否则，您的方法 ,`enforceEqualsHashImpl`不可能知道隐藏在`KeyType`and后面的实际类型`ValueType`。

当然，在此更改之后，由于您的类需要`ClassTag`s 作为其类型参数，因此您必须以两种方式之一构造它：

*   通过传递具体类型参数（例如`new SomeClass[String,Integer](keyConv, valueConv)`）
*   `ClassTag`在s 已经可用的地方做它，例如在这样的方法中：

    ```
    def constructSomeClass[KeyType: ClassTag, ValueType: ClassTag] = 
      new SomeClass[KeyType,ValueType](keyConv, valueConv) 
    ```

    当然，在这种情况下`constructSomeClass`也必须使用具体的类型参数或某处`ClassTags`已经可用的地方调用，等等......

因此，总结一下 -如果您希望s 自动用于您的类型，则*必须*在某个级别指定具体的类型参数。`ClassTag`

当然你也可以`ClassTag`从像这样的对象手动创建 s `Class`：

```
val classTag = ClassTag(classOf[String]) 
```

所以我想如果你有运行时类`KeyType`并且`ValueType`在构建时可用`SomeClass`，你可以做这样的事情：

```
def constructSomeClass[KeyType,ValueType](keyClass: Class[KeyType], valueClass: Class[ValueType]) = 
  new SomeClass[KeyType,ValueType](keyConv, valueConv)(ClassTag(keyClass), ClassTag(valueClass)) 
```

这当然大致相当于传递`Class`对象本身而不是`ClassTag`s。

# button - TKinter 如何一次配置所有标签和按钮

> ID：15174228
> 
> 赞同：-1
> 
> 时间：2013-03-02T12:02:53.340
> 
> 标签：button, tkinter, label, configure

现在，我正在编写一个代码来在按下按钮时更改所有按钮和标签的颜色。但我每次都会遇到不同的错误。

```
windows = []
global windows
buttons = []
global buttons
labels = []
global labels 
```

# 一堆代码……然后……

```
 def flavor(c):
    if c != 0:
        c = 0
        for w in windows:
            w.config(bg = 'black')
        for l in labels:
            l.config(bg = 'black', fg = 'white')
        for b in buttons:
            b.config(bg = 'black', fg = 'white')
    elif c != 1:
        c = 1
        for w in windows:
            w.config(bg = 'dark green')
        for l in labels:
            l.config(bg = 'dark green', fg = 'light green')
        for b in buttons:
            b.config(bg = 'dark green', fg = 'light green') 
```

我几乎一直和大部分时间都遇到的错误是：

```
Traceback (most recent call last):
File "C:\Users\Ahmet\Desktop\An interesting experiment\FOBBY.py", line 153, in <module>
main()
File "C:\Users\Ahmet\Desktop\An interesting experiment\FOBBY.py", line 118, in main
thememenu.add_command(label="Plain",command = flavor(0))
File "C:\Users\Ahmet\Desktop\An interesting experiment\FOBBY.py", line 79, in flavor
l.config(bg = 'dark green', fg = 'light green')
AttributeError: 'NoneType' object has no attribute 'config' 
```

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T13:55:32.713

我敢打赌您正在创建这样的小部件：

```
l = Label(,,,).pack(...)
labels.append(l) 
```

当您执行类似`foo().bar()`的操作时，结果是最后一个函数返回的任何内容。在您的情况下，包（或者可能是网格）是最后一个被调用的函数，它总是返回`None`. 因此，您的列表只包含`None`s。

# azure - 暂存 Azure 网站

> ID：15174230
> 
> 赞同：3
> 
> 时间：2013-03-02T12:03:12.533
> 
> 标签：azure, testing, web, azure-web-app-service, staging

我是 Azure 的新手，我正在开发一个使用新网站模型而不是云服务的项目。我想建立一个像这样的持续交付流程：http: [//www.windowsazure.com/en-us/develop/net/common-tasks/publishing-with-tfs/](http://www.windowsazure.com/en-us/develop/net/common-tasks/publishing-with-tfs/)

但是，我不希望我的网站在每次持续部署后都可以公开访问。相反，我希望我的持续部署只能由我的团队访问以进行测试。怎样才能最好地做到这一点？

思念至今：

*   将整个站点包装在表单身份验证中 - 但我不喜欢这样的事实，即这意味着我将部署不同版本的站点到生产环境，而不是部署到测试的站点。
*   IP 地址限制 - 但我不知道这是否可以通过 Azure 网站完成，以及这是否是一个好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:16:52.773

You can add IP restrictions using the URL Rewrite Module, which Azure web sites seem to have enabled by default.

Your web.config:

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <rule name="SayNoToZombies" stopProcessing="true">
                    <match url=".*" />
                    <conditions>
                        <add input="{REMOTE_ADDR}" pattern="::1" negate="true" />
                    </conditions>
                    <action type="CustomResponse" statusCode="403" statusReason="Forbidden: Access is denied." statusDescription="Sorry, you're not allowed" />
                </rule>
            </rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

You can replace `pattern="::1"` (localhost in IPv6) with a suitable regex to match your permitted IP, e.g., `pattern="87.236.134.47"` or if more than one:

```
pattern="(62\.231\.142\.233)|(87\.236\.134\.47)|(::1)|(127\.0\.0\.1)" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-24T01:39:22.463

Azure 网站身份验证/授权功能旨在支持这种确切的方案。基本上，您创建一个站点槽，单击几下将 AAD 身份验证添加到其中，从那时起，您的登台槽将始终需要有效登录，即使在您执行交换操作之后也是如此。

博客文章：[http ://azure.microsoft.com/blog/2014/11/13/azure-websites-authentication-authorization/](http://azure.microsoft.com/blog/2014/11/13/azure-websites-authentication-authorization/)

演示视频：[http ://azure.microsoft.com/en-us/documentation/videos/azure-websites-easy-authentication-and-authorization-with-chris-gillum/](http://azure.microsoft.com/en-us/documentation/videos/azure-websites-easy-authentication-and-authorization-with-chris-gillum/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T13:16:38.337

我必须为客户做类似的事情，但找不到限制从 Azure 门户本身访问该站点的方法。我选择了 IP 地址限制选项，但通过应用程序本身的代码来实现。我的应用程序已经在使用表单身份验证，因此我可以在登录操作中执行 IP 地址检查。

在您的情况下，我建议使用[自定义操作过滤器](http://msdn.microsoft.com/en-us/library/dd381609%28v=vs.100%29.aspx)。在过滤器中执行检查，如果 IP 地址不允许，则返回 http 401（未经授权）状态码。

创建一个名为`AllowedIpAddresses`或类似的应用程序设置，您可以在其中添加一个逗号分隔的允许 IP 地址列表。执行检查时，您可以将站点设置为允许所有流量（如果`AllowedIpAddresses`为空或不存在）。这样，您可以在生产中忽略此设置，默认情况下将允许所有流量。你可以为 Azure 门户中的每个站点设置自定义应用设置。

这是自定义过滤器的外观。我没有测试过这个！

```
public class AccessRestrictionFilterAttribute : ActionFilterAttribute
{
    // simple wrapper around ConfigurationManager.AppSettings for testability
    private readonly IAppSettingsHandler appSettingsHandler;

    public AccessRestrictionFilterAttribute(IAppSettingsHandler appSettingsHandler)
    {
        this.appSettingsHandler = appSettingsHandler;
    }

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        var isAllowed = false;
        var userIpAddress = filterContext.HttpContext.Request.UserHostAddress;
        if (appSettingsHandler.AllowedIpAddresses.Split(new[] { ',' }).Any(x => x == userIpAddress))
        {
            isAllowed = true;
        }

        if (!isAllowed)
        {
            filterContext.Result = new HttpUnauthorizedResult();
        }

        base.OnActionExecuting(filterContext);
    }
} 
```

# android - 如何在android中保存活动的onStop / onPause对象列表

> ID：15174235
> 
> 赞同：0
> 
> 时间：2013-03-02T12:03:43.230
> 
> 标签：android

最近写了一些应用程序，我被一个问题阻止了。

在这个应用程序中，我有两个活动：A 和 B。在活动中，每次 GPS 坐标发生变化时，AI 都会从网上下载对象列表。对于这项活动，有与 GPS 和 Internet 连接呼叫连接的绑定服务。然后将这些对象放入根据它们的名称创建的列表中，按下其中任何一个后，我可以打开传递该对象的 B 活动，并在活动 B 中从该对象获取更多信息。

Activity B 没有任何绑定服务，它只获取对象内部的内容并显示它。

因为活动 A 中的绑定服务在 onStop 中未绑定，所以当我使用后退箭头返回它时，需要一段时间才能再次下载所有内容。更有趣的是，列表仍然被填满，但那些只是名称，实际的对象列表不存在，并且在返回任何名称后按下任何名称都会导致 OutOfBoundException。

所以，我的问题是，在下载新的（或相同的）列表之前，你会建议在我进行活动 A 时保存这些对象并在回来时检索它们。

我试过了：

*   `onRestoreInstanceState()`with `onSaveInstanceState()`, 因为在那里你可以保存 parcelable 列表，但是活动 A 没有这么快被破坏，所以没有调用`onRestoreInstanceState()`;
*   `Shared preferences`，但这是一个不好的选择，因为你不能在那里保存列表；
*   `ContentValues`而且`content resolvers`，糟糕的选择，因为你不能保存列表。

你还有什么想法，怎么做？

哦，我忘了提，**我假设列表中最多可以有 100 个对象，每个对象有 5 个字段。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:13:54.087

创建一个 Singleton 类，并将对象存储在 HashMap 或 ArrayList（任何适合您的）中，并在其他活动中访问该列表。

```
import java.util.ArrayList;

public class DataHandler {
    private static DataHandler handler;
    private ArrayList<Object> list;

    private DataHandler() {
    }

    public static DataHandler getInstance() {
        if (handler == null)
            handler = new DataHandler();
        return handler;
    }

    public ArrayList<Object> getList() {
        return list;
    }

    public void setList(ArrayList<Object> list) {
        this.list = list;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T12:09:35.420

如果不使用 SharedPreferences 和 ContentValues 的原因是因为它无法处理列表，那么您可能会考虑将列表序列化为 JSON 之类的东西，将其保存为字符串，然后在将映射加载回对象时。例如，转换对象 <-> JSON 通常需要 2 行代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T12:09:36.733

您需要将下载的数据缓存在像这里这样的单例类中

类数据控制器 {

公共静态 ArrayList aa;

}

下载数据时填写此数组列表，并在您的活动中检查此列表是否不为空，然后仅使用此数组列表而不是下载它。对单例类概念做更多的研究，我相信你会学到一些对你很有帮助的东西。

# xml - 使用保存在变量中的节点名称访问 ActionScript 3 XML

> ID：15174238
> 
> 赞同：1
> 
> 时间：2013-03-02T12:03:52.567
> 
> 标签：xml, actionscript-3

在这里对 ActionScript 中的 XML 有点困惑：

我有一个 XML 变量声明为：

```
public static var thisXML:XML; 
```

我正在使用包含以下内容的函数初始化我的 XML：

```
thisXML.white.john = false;
thisXML.black.john = false;
thisXML.white.bill = false;
thisXML.black.bill = false;
thisXML.white.pete = false;
thisXML.black.pete = false; 
```

然后我有以下字符串变量：

```
public static var blackWhite:String;
public static var thisName:String; 
```

我想在类似这样的“if”语句中访问我的 XML（我知道这是不对的）：

```
if (!thisXML.(blackWhite).(thisName)) {
    //do something
    thisXML.(blackWhite).(thisName) = true;
} 
```

所以，我尝试了很多方法，包括：

```
thisXML.[blackWhite].[thisName];
thisXML.node[blackWhite].node[thisName];
thisXML.descendant[blackWhite].descendant[thisName]; 
```

...但我知道这是不对的。我也意识到 XML 不支持布尔值，所以我可能需要使用字符串“true”和“false”，但这不是我的问题。问题是使用变量访问特定节点。

这应该怎么做？

谢谢阅读。

编辑： - 我的 XML 现在看起来像这样......

```
 <root>
     <Documents documentName = {thisDocument}>
         <White>
             <John>false</John>
             <Pete>false</Pete>
             <James>false</James>
         </White>
         <Black>
             <John>false</John>
             <Pete>false</Pete>
             <James>false</James>
         </Black>
      </Documents>
 </root> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T12:53:59.027

通过变量名访问xml childs的例子：

```
 var xml:XML = 
            <root>
                <white>
                    <john>john white</john>
                    <bill>bill white</bill>
                    <pete>pete white</pete>
                </white>
                <black>
                    <john>john black</john>
                    <bill>bill black</bill>
                    <pete>pete black</pete>
                </black>
            </root>

        var colorName:String = "white";
        var menName:String = "bill";

        //example using []
        var nodeTextVar:String = xml[colorName][menName][0];
        trace(nodeTextVar);

        //example using XMLList.child(name)
        nodeTextVar = xml.child(colorName).child(menName)[0];
        trace(nodeTextVar); 
```

输出：

```
bill white
bill white 
```

# matlab - matlab生成固定度无向图

> ID：15174241
> 
> 赞同：0
> 
> 时间：2013-03-02T12:04:14.697
> 
> 标签：matlab, graph

我想生成具有 N 个节点的无向​​图的邻接矩阵。特别是，这个图应该有一个固定的度数（每个节点都连接到固定数量的节点 d）。

如果集合 d = N-1，则解决方案很简单：

```
A = ones(N) - eye(N); 
```

我如何将它概括为任何 d？

添加：

这是一个解决方案（感谢 Oli Charlesworth）：

```
function A = fixedDegreeGraph(N, d)

A = zeros(N);

for i=1:N

    b = i;
    f = i;

    for k=1:floor(d/2)

        f = f + 1;
        if (f == N + 1)
            f = 1;
        end
        A(i, f) = 1;
        A(f, i) = 1;

        b = b - 1;
        if (b == 0)
            b = N;
        end
        A(i, b) = 1;
        A(b, i) = 1;

    end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:26:19.060

对于 even `d`，这是一种可视化方法的方法。

*   画出排列成圆形的顶点。
*   每个顶点都连接到它`(d/2)`的左手邻居，以及它`(d/2)`的右手邻居。

如何将其转换为邻接矩阵应该是相当明显的（提示：它将是一个[*循环矩阵*](http://en.wikipedia.org/wiki/Circulant_matrix)，因此您可能会发现该[`toeplitz`](http://www.mathworks.co.uk/help/matlab/ref/toeplitz.html)函数很有用）。

将其扩展到奇数`d`并不难......（尽管请注意，如果两者[都是奇数](http://en.wikipedia.org/wiki/Handshaking_lemma)[，](http://en.wikipedia.org/wiki/Handshaking_lemma)[则没有解决方案`N``d`](http://en.wikipedia.org/wiki/Handshaking_lemma)）

# python - 确保查询被执行

> ID：15174244
> 
> 赞同：0
> 
> 时间：2013-03-02T12:04:38.593
> 
> 标签：python, mysql, mysql-python

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:15:57.970

为您的连接方法添加超时：

```
db = MySQLdb.connect (host = HOST, user = USER, passwd = PASS, db = DB,
                      connect_timeout = TIMEOUT) 
```

在您的`except`块中执行此操作，以便您重新连接。

为了让您的生活更轻松，请将您的连接代码放在一个单独的函数中，以便您可以重复使用它。像这样的东西（未经测试）：

```
def get_cursor()
    try:
    db = MySQLdb.connect (host = HOST, user = USER, passwd = PASS, db = DB,
                          connect_timeout = TIMEOUT)
    except MySQLdb.Error, e:
        print("Error %d: %s" %(e.args[0], e.args[1]))
        sys.exit(1);
    return db.cursor()

def mysql_handling(cursor, string):
    while True:
        try:
            cursor.execute(string)
            if 'SELECT' not in string:
                db.commit()    
            break
        except MySQLdb.MySQLError:
            cursor.close()
            mysql_error_tracking(string)
            cursor = get_cursor()

def main():
    mysql_handling(get_cursor(), string) 
```

# c# - 将 Web 解决方案实现为 Winform

> ID：15174245
> 
> 赞同：2
> 
> 时间：2013-03-02T12:04:43.790
> 
> 标签：c#, asp.net, reflection

前段时间，我开发了一个基于主启动应用程序的 win 应用程序，这意味着它是一个能够加载用户配置文件和其他内容的应用程序，例如用户名、姓氏、邮件地址、授权操作、启用打印、启用保存和很快）。然后，我的同事可以自由地将任何其他应用程序开发为 DLL，这些应用程序由我的主应用程序通过反射加载，它能够将任何表单加载为 mdi 子项。就这样。最后，每个主要的应用程序命令都在实现某些接口的子窗体上实现，因此一切都可以完美运行。

好吧，现在我需要在新的网站解决方案上转换上述逻辑。想想我的主要启动应用程序可能被“认为”为母版页。在这里，我可以加载信息用户（用户配置文件）和其他内容，例如启用应用程序、启用打印页面、启用数据存储等。顺便说一句，我的同事应该能够开发我的主要初创公司（母版页）访问的其他“子网站”。此外，它们都应该进行通信以执行某些命令，例如：用户单击母版页保存按钮，然后存储 db 操作将中继到内容页面（就像 win 表单解决方案一样）。

我不知道哪个可以更好地解决这个目的，我希望能清楚地解释我的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:04:33.613

就像问题中的要求一样模糊......我认为你应该考虑在层（层）中开发你的应用程序。如果您的业务和持久性逻辑不与任何图形界面耦合，那么将 Windows 应用程序转换为 asp.net 应用程序要容易得多。

# objective-c - sqlite3_open 数据库路径

> ID：15174246
> 
> 赞同：-1
> 
> 时间：2013-03-02T12:04:46.477
> 
> 标签：objective-c, sqlite

我是新来的，在这里提问，但我一直在这里寻找几个问题。谢谢你的帮助。现在我正在使用 sqlite 开发一个应用程序，当我在 AddViewController.m 中使用此代码行时：

```
#import <UIKit/UIKit.h>
#import "ViewController.h"
#import "AppDelegate.h"
#import "Tutorial.h"

.
.
.
if(sqlite3_open([databasePath NSUTF8StringEncoding], &database) == SQLITE_OK)
.
.
. 
```

该程序说：使用未声明的标识符'databasePath：'我尝试了几种方法，但它只是说'databasePath'未声明或@interface。但是“数据库”在 AppDelegate.h 中以相同的方式声明，并且没有给出相同的错误。

这是声明的位置：AppDelegate.h

```
@interface AppDelegate : UIResponder <UIApplicationDelegate>
{
    NSString *databaseName;
    NSString *databasePath;
}
@property (nonatomic, retain) NSString *databaseName;
@property (nonatomic, retain) NSString *databasePath; 
```

我一直在寻找很多来解决它，但我还没有找到如何声明'databasePath'

希望您能够帮助我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:52:51.837

问题是它`databasePath`是一个实例变量`AppDelegate`而不是`AddViewController`.

在 sqlite3_open 语句之前插入这些行：

```
AppDelegate* appDelegate = (AppDelegate*)[UIApplication sharedApplication].delegate;
NSString* databasePath = [appDelegate databasePath]; 
```

我还鼓励您使用[FMDB](https://github.com/ccgus/fmdb/)，这是一个围绕 SQLite 的 Objective-C 包装器。

# python - Python：发送电子邮件期间格式更改

> ID：15174249
> 
> 赞同：1
> 
> 时间：2013-03-02T12:05:00.433
> 
> 标签：python

我是python新手。我正在通过 python 发送一些大文本邮件。我正在做的是将大文本邮件存储在一个字符串中并发送。当我在我身边打印那个字符串时，我的格式已经按照我的意愿进行了很好的格式化，但是在接收方的消息格式发生了变化。我怎样才能确保我的消息的表格格式不会被改变。当我打印消息时，我得到这样的总结：

```
Click Count for all 24 hrs:
===================
      Citrus_click      Hadoop_click              Diff
          10224172                 0          10224172

Billed Count for all 24 hrs:
===================
       Citrus Leaf            Hadoop              Diff
           8055239                 0           8055239

Beacon Count for all 24 hrs:
================
       Citrus Leaf            Hadoop              Diff
            900476                 0            900476

Beacon unique Count for all 24 hrs:
===================
       Citrus Leaf            Hadoop              Diff
             43516                 0             43516 
```

但是接收方的格式发生了变化，他们得到了这样的总结：

```
Click Count for all 24 hrs:
===================
      Citrus_click      Hadoop_click              Diff
             10224172         0              10224172

Billed Count for all 24 hrs:
===================
       Citrus Leaf            Hadoop              Diff
           8055239              0            8055239

Beacon Count for all 24 hrs:
================
       Citrus Leaf            Hadoop              Diff
         900476                 0                   900476

Beacon unique Count for all 24 hrs:
===================
       Citrus Leaf            Hadoop              Diff
          43516                 0                   43516 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:43:02.257

这是一个评论，但现在它是一个答案！

接收方是否使用可变宽度字体？如果是这样，请尝试在邮件中明确设置字体，或更改邮件程序的设置以对纯文本消息使用等宽字体。

如果您想强制使用等宽格式，请尝试将您的消息正文设置为 HTML，如下所示：

```
<html><body><pre>
your stuff goes here
</pre></body></html> 
```

标签是重要的`pre`一点：它告诉客户端程序文本已经被格式化为等宽，所以它应该像那样显示。

# image - 电晕放大和放大回到正常状态

> ID：15174251
> 
> 赞同：1
> 
> 时间：2013-03-02T12:05:09.413
> 
> 标签：image, zooming, coronasdk

在 Cocos2d 中，我能够缩小/缩小我的场景，即 0.2，当我希望它恢复时，我可以更改为 1。

在 Corona 中，如果我缩放到 0.2，并尝试重新缩放到 1，它将保持为 0.2，所以本质上它需要 arg 并将当前图像/显示组缩放到那个值。

所以要确定正常比例，我需要计算比例因子？

本质上我也想双击缩小，然后双击返回正常状态。但是没有办法保持我以前的状态并恢复我可以弄清楚的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T17:39:20.480

只需执行以下操作。这将起作用。

1：创建比例因子：

```
 local scale_factor = 0.2; 
```

2：当你想缩小，做：

```
 Your_object:scale(scale_factor,scale_factor) 
```

3：当你想放大，做：

```
 Your_object:scale(1/scale_factor,1/scale_factor) 
```

继续编码... :)

# jquery - 带有 rails 3.2 的 github 预览功能

> ID：15174252
> 
> 赞同：2
> 
> 时间：2013-03-02T12:05:20.017
> 
> 标签：jquery, ruby-on-rails, preview

我正在使用 twitter bootstrap tabbable：

[http://twitter.github.com/bootstrap/components.html#tab3](http://twitter.github.com/bootstrap/components.html#tab3)

我想知道，当用户在 github 上打开一个新问题并按下预览选项卡时，如何复制**预览效果。**我想在发布此项目之前预览实际项目。

例如，您可以看到：

[https://github.com/samwillis/pagedown-bootstrap/issues/new](https://github.com/samwillis/pagedown-bootstrap/issues/new)

您可以单击预览并预览您的问题。

我想是否存在一些插件或库来使用 jquery 制作此功能，或者为此目的存在一些 gem，因为 github 是用 ruby​​ on rails 制作的。

非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T13:35:15.740

给预览标签链接一个ID，并使用`show`标签的事件来更新内容。您如何访问数据以提供给选项卡内容将取决于您使用的所见即所得

```
$('#preview_tab').on('show',function(){
    var preview=$('#comment').val();
    preview= preview.length ? preview : 'No Comment provided'
    $('#preview_pane').html(preview)
}); 
```

演示：http: [//jsfiddle.net/hrXCC/](http://jsfiddle.net/hrXCC/)

API 参考（请参阅选项卡**事件**）：http: [//twitter.github.com/bootstrap/javascript.html#tabs](http://twitter.github.com/bootstrap/javascript.html#tabs)

# macos - 如何在我的 Mac 上正确设置我的 git $PATH（我做过，但需要了解它的实际工作原理）？

> ID：15174255
> 
> 赞同：0
> 
> 时间：2013-03-02T12:05:55.190
> 
> 标签：macos, git, unix, path, installation

我从我的 mac 上的站点安装了 GIT，但是 git --version 给了我旧的安装（我猜是 xcode 安装）。所以我解决了这样做：

*   创建一个 ~/.bash_profile 文件
*   写：

    导出 PATH=/usr/local/bin:$PATH

*   重启终端

不过，我认为我的配置中有一些东西可以更好地设置。

我当前的回声 $PATH

/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/git/bin

所以它可以工作，但它很乱，因为我有 2 /usr/local/bin 和 /usr/local/git/bin

另外，我不明白为什么它现在可以工作，因为 /usr/local/bin 只包含 bbedit 命令：

*   bbdiff
*   编辑
*   bbfind

* * *

我不太清楚所有路径配置文件以及它们被读取的真实顺序。我只知道一些 unix 命令。我在 ~/ 中的当前文件是：

〜/ .profile：

```
if [ -f ~/.bashrc ];
then
    source ~/.bashrc
fi 
```

〜/ bashrc：

```
. ~/bin/dotfiles/bashrc 
```

然后在 . ~/bin/dotfiles/bashrc

```
. ~/bin/dotfiles/bash/env
. ~/bin/dotfiles/bash/config
. ~/bin/dotfiles/bash/aliases 
```

并且在 . ~/bin/dotfiles/bash/env：

```
export PATH=/usr/local/bin:/opt/local/bin:/opt/local/sbin:$PATH 
```

. ~/bin/dotfiles/bash/config 只是空的

和 。~/bin/dotfiles/bash/aliases 包含一些别名逗号。

无论如何，它应该已经读取了 ~/bin/dotfiles/bash/env，但它没有。或者它只在 /etc/paths 之后读取它

~/.bash_profile 首先被读取。

我当前的 /etc/paths 内容：

```
/usr/bin
/bin
/usr/sbin
/sbin
/usr/local/bin 
```

* * *

谁能解释一下这些机制？:P 或者也许我应该将这个问题发布到某个 Unix 组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T12:18:41.063

当您在 *NIX shell 上键入任何命令时，shell 会尝试使用`$PATH`. 假设您的路径是`/usr/bin:/usr/local/bin`，那么会发生这种情况：

```
$ foo
- Does /usr/bin/foo exist? No.
- Does /usr/local/bin/foo exist? No.
- Does foo exist in the current working directory? 
```

换句话说，它`$PATH`依次查看每个元素并尝试在那里找到您要求的可执行文件。这就是典型的 -- 过程以 , 开头的原因`configure`，`make`以`make install`明确`./configure`表明您要*在当前目录*`configure`中运行可执行文件，而不是某些系统范围的命令。

 *要弄清楚它`foo`最终实际选择的是哪个，请运行：

```
$ which foo 
```

您可以通过提供其完整路径来显式运行任何命令：

```
$ /usr/local/bin/foo  # overrides /usr/bin/foo, should it exist 
```

初始化脚本中的`export PATH=...:$PATH`指令只是将某些路径添加到您的路径之前，允许您覆盖解析命令命令的优先级。在那里两次并不理想`/usr/local/bin`，但这也不是一个真正的问题。你*应该*注意不要让你的路径变得太长，因为这可能会导致对每个命令进行大量查找，并且也可能会搞砸你的脑袋。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T12:27:54.830

有关bash 配置文件加载顺序的全面演练，请参阅[此内容。](http://shreevatsa.wordpress.com/2008/03/30/zshbash-startup-files-loading-order-bashrc-zshrc-etc/)*

# html - 在 Wicket 中创建表

> ID：15174257
> 
> 赞同：1
> 
> 时间：2013-03-02T12:06:07.337
> 
> 标签：html, apache, wicket, html-table

我正在尝试使用 Wicket 显示表格。我正在使用`Panel`创建表和`PropertyColumns`添加列。

如何将几列分组为一列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T00:01:24.680

看来您正在使用 a[`DataTable`](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/extensions/markup/html/repeater/data/table/DataTable.html)或后代。对于您的情况，我将使用[`ListView`](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/markup/html/list/ListView.html)您可以更轻松地控制输出 HTML 的地方。

在 HTML 中：

```
<table>
  <thead>
    <tr>
      <th rowspan="2">Product</th>
      <th colspan="2">Unit tests</th>
    </tr>
    <tr>
      <th>Passed</th>
      <th>Failed</th>
    </tr>
  </thead>
  <tbody>
    <tr wicket:id="listView">
      <td wicket:id="productComponent">Product</td>
      <td wicket:id="passedComponent">PassedColumn</td>
      <td wicket:id="failedComponent">FailedColumn</td>
    </tr>
  </tbody> 
```

在 Java 中：

```
 add(new ListView<SomeDetails>("listView", listData)
 {
        public void populateItem(final ListItem<SomeDetails> item)
        {
                final SomeDetails data= item.getModelObject();
                item.add(new Label("productComponent", data.getProduct()));
                item.add(new Label("passedComponent", data.getPassed()));
                item.add(new Label("failedComponent", !data.getPassed()));
        }
 }); 
```

# ios - 如何在没有任何动画的情况下直接将模态视图呈现为表单

> ID：15174258
> 
> 赞同：1
> 
> 时间：2013-03-02T12:06:14.500
> 
> 标签：ios, objective-c, ipad

如何在没有任何动画的情况下直接将模态视图呈现为表单？当我呈现模态视图时，如果是纵向，它总是从左上角向下，如果是横向，它总是以纵向出现并旋转到横向模式（大约需要0.2秒，快但不漂亮） .

有人知道这是什么问题吗？这让我很烦。（我在一个新项目中尝试过，效果很好，直接出来了（不是从左上角，横向模式下没有旋转）

帮助！！

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T12:19:10.540

尝试这个

```
viewController.modalTransitionStyle = nil;
[self presentViewController:viewController animated:NO completion:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T12:12:32.063

我们可以看到您的代码调用模态视图吗？我假设您已经添加了动画标签

... presentModalViewController: YOURCONTROLLER 动画: NO];

# perl - 使用 perlipq 软件时的符号查找错误

> ID：15174263
> 
> 赞同：0
> 
> 时间：2013-03-02T12:06:33.907
> 
> 标签：perl

我在我的 Debian 6.0.6 虚拟机上安装了 perlipq 软件。尝试运行依赖于`perlipq`或`IPTables::IPv4::IPQueue`模块的软件时，出现以下错误。知道如何解决这个问题吗？

```
/usr/bin/perl: symbol lookup error: 
/usr/lib/perl5/auto/IPTables/IPv4/IPQueue/IPQueue.so: undefined symbol: Perl_xs_apiversion_bootcheck 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2018-07-31T16:20:55.077

什么帮助了我
rm -r /home/username/perl5/* # 谨慎使用这个命令 apt-get install libc6-dev

# linux - Unix命令在文件中搜索一行并替换它

> ID：15174264
> 
> 赞同：0
> 
> 时间：2013-03-02T12:06:36.063
> 
> 标签：linux, shell, unix, ubuntu

我正在尝试用 UnixCommandline 替换配置文件，而不使用 vi 或 nano 之类的编辑器。

一个例子可能是：

```
ServerAdmin mail@example.com 
```

我想找到开头的第一行或所有行`ServerAdmin`并将其替换为：

```
ServerAdmin secret@secret.com 
```

有什么命令可以做这样的事情吗？应该可以使用 CygWin 中也提供的标准 UNIX 工具。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T12:10:20.957

```
sed -i 's/^ServerAdmin .*$/ServerAdmin secret@secret.com/' in-filename 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T20:17:40.803

以前的所有答案都是正确的，但您也可以使用 perl one liner 来做到这一点

```
perl -p -i -e 's/ServerAdmin/ServerAdmin secret@secret.com/g' your_file_name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T12:10:12.150

您可以使用`awk`执行此操作，根据以下成绩单：

```
pax> echo 'xyzzy plugh
ServerAdmin mail@example.com
twisty passages' | awk '
    /^ServerAdmin /{$0 = "ServerAdmin secret@secret.com"}{print}'

xyzzy plugh
ServerAdmin secret@secret.com
twisty passages 
```

换句话说，通过该`awk`命令管道文件。`"ServerAdmin<space>"`它会在打印之前找到以这些行开头的行并对其进行修改。*所有与模式不*匹配的行都将按原样打印。

显然，这是针对您指定的简单案例。如果事实证明您的输入格式更复杂，您可能需要对其进行调整，但`awk`仍应能胜任。

请记住，如果要将输出捕获到*新*文件而不是标准输出，请使用：

```
awk 'above awk command goes here' currentFile >newFile 
```

# android - 常规 Flurry 设置和初始化

> ID：15174266
> 
> 赞同：0
> 
> 时间：2013-03-02T12:06:41.913
> 
> 标签：android, flurry

我正在构建一个使用 flurry sdk 的 android 应用程序。

我在我的活动中有以下代码：

```
protected void onStart() {
    super.onStart();

    FlurryAgent.setVersionName("1.0");
    FlurryAgent.onStartSession(this, "XXXXXXXX");
    FlurryAgent.setLogEnabled(true);
    FlurryAgent.setLogEvents(true);
    FlurryAgent.setLogLevel(Log.VERBOSE);
    FlurryAgent.initializeAds(this);

    FrameLayout fViewGroup = (FrameLayout) findViewById(R.id.flurry);
        FlurryAgent.getAd(this, "BANNERNAME", fViewGroup, FlurryAdSize.BANNER_TOP,0);

}
public void onStop()
{
   super.onStop();

       FlurryAgent.onEndSession(this);

} 
```

所以这是我的两个问题：

1.  当尝试在 Gingerbread flurry 下面的 android 中运行时会抛出异常，因为它使用了不可用的 String.isEmpty。有没有办法克服这个异常？
2.  在 Gingerbread 上方的 android 中运行时，代码运行“正常”但不显示广告。Flurry 仅在 LogCat 中打印“广告服务器已响应但未发送广告单元”。在 Flurry 面板中，我创建了项目，以及与上述代码同名的 adSpace。

**注意**：我已经[在 android 的 Flurry 中完成了这篇文章“广告服务器已响应但未发送广告单元”中](https://stackoverflow.com/questions/14179744/ad-server-responded-but-sent-no-ad-units-in-flurry-in-android)所说的内容，但仍然没有出现任何测试广告。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:18:38.477

关于您的第一个问题，Android 2.3 或更高版本不应引发此异常。Flurry 正在针对这个问题进行修复，应该很快就会发布它。关于第二个问题，您能否尝试删除对 FlurryAgent.initializeAds(FlurrytestActivity.this); 的调用？只有在广告空间设置中启用了广告预缓存时，才需要此调用。

（全面披露：我在 Flurry 的支持团队工作）

# mysql - 关于在mysql中存储会话的问题

> ID：15174267
> 
> 赞同：3
> 
> 时间：2013-03-02T12:06:43.387
> 
> 标签：mysql, session, cookies

使用本教程[http://www.wikihow.com/Create-a-Secure-Session-Managment-System-in-PHP-and-MySQL](http://www.wikihow.com/Create-a-Secure-Session-Managment-System-in-PHP-and-MySQL)将会话存储在 mysql 中。一切正常。如果会话存储在文件中和会话存储在 mysql 中，则比较 cookie。

如果按照我在 cookie 中的理解存储在 mysql 中的会话不应存储任何值。

删除所有cookie，重新加载页面。

但是，当打开 cookie 时，我看到一个 cookie Name _s。

问题。为什么某些东西会存储在 cookie 中以及它的含义 (_s) 是什么？cookie 做什么（什么工作）？从 _s 的 cookie 值中复制过来，看到这个值和 mysql 中的值（id）是一样的。php代码有问题吗？在这种情况下，将会话存储在 mysql 中是没有用的（如果值在 cookie 中可用）......但是请参阅在每个页面上重新加载 cookie 更改中的会话值。它也在 mysql 中发生变化，旧值从 mysql 中删除。那么，这是否意味着在任何情况下会话值都会在短时间内存储在 cookie 中？

如果会话存储在文件中。这是否意味着有人从文件中复制会话值，打开 cookie，将值粘贴到 cookie 中，并且在不知道用户名和密码的情况下可以在具有特定用户凭据的网站上工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:25:24.193

从用户的角度来看，将会话存储在 mysql 或文件中没有任何区别。但是有两个反对文件会话的论点：

*   它不可扩展。如果您有多个 Web 服务器，文件将在其中一个上创建，但在其他服务器上不可用。因此，如果您拥有 2 台服务器，用户将只能在一半的时间内访问他的会话。
*   在共享主机中，如果所有网站都共享相同的 tmp，则其他网站所有者可能会访问您的会话 ID。通常情况并非如此，但这可能是一个问题

# c++ - Libcurl - 使用真实名称下载和保存文件

> ID：15174268
> 
> 赞同：1
> 
> 时间：2013-03-02T12:06:43.053
> 
> 标签：c++, libcurl

我开发 C++ 应用程序。它下载文件。典型的 url 看起来像 *[https://mysite.com/download.php?fileid=xxx](https://mysite.com/download.php?fileid=xxx)* 所以第一个问题 - 我需要获取真实的文件名。我这样做：

```
curl_easy_setopt(pCurl, CURLOPT_HEADERFUNCTION, readHeader); 
```

和一个回调

```
size_t NetworkHelper::readHeader(void *ptr, size_t size, size_t nmemb, void *data)
{
        std::string header;
        header.assign((char*)ptr, nmemb);
    size_t delimPos = header.find_first_of(':');
    std::string headerName;
    std::string headerContent;
    if (delimPos != std::string::npos)
    {
        headerName = header.substr(0, delimPos);
        headerContent = header.substr(delimPos + 1, header.length());
        m_headers[headerName] = headerContent;
    }
    return size*nmemb;
} 
```

在这里，我将标头及其值插入到 map 中，此回调为每个 http 标头调用多次。我真正需要的标题是“位置：url/realfilename.yyy”。

并编写回调：

```
size_t NetworkHelper::writeFileCallback(void* ptr, size_t size, size_t nmemb, void* data)
{
    size_t count;
    Fetchdata* fetchdata;
    fetchdata = (Fetchdata*)data;
    std::string fileName = NetworkHelper::m_headers["Location"].c_str();
    fileName = "C:/" + fileName.substr(fileName.find_last_of('/') + 1, fileName.length());
    fetchdata->stream = fopen( fileName.c_str(),"w+b");
    if (fetchdata->stream!=NULL)
    {
        count = fwrite(ptr, size, nmemb, fetchdata->stream);
        if (count > 0) 
        {
            fetchdata->size += (count * size);
        }
    }
    return nmemb*size;
} 
```

这里 fopen 失败（返回 NULL）。我如何处理文件以及如何以更好的方式处理文件是错误的吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:03:31.497

首先检查 fileName 实际包含的内容。在 Windows 上使用 error() 或 GetLastError 来检查问题所在。我可能是错的，但根据你的代码 fileName 实际上包含这样的内容： C:/ [http://somesimet.somedomain/file.extension](http://somesimet.somedomain/file.extension) upd: 对不起，文件名真的错了

# c - SW-Serial.exe 中 0x012219c4 处未处理的异常

> ID：15174270
> 
> 赞同：0
> 
> 时间：2013-03-02T12:06:49.030
> 
> 标签：c

我声明二维动态数组。运行程序时显示此错误：SW-Serial.exe 中 0x012219c4 处的未处理异常：0xC0000005：访问冲突写入位置 0xabababab。

我的程序中发生错误的部分：

```
 double** SWArray;  
SWArray = (double**) malloc(lenA*sizeof(double*));  
for (int i = 0; i <= lenA; i++)  
    SWArray[i] = (double*) malloc(lenB*sizeof(double));  

for(int i=0;i<=lenA;i++){
    SWArray[0][i]=0;
}
for(int j=0;j<=lenB;j++){
    SWArray[j][0]=0;
} 
```

这个问题的[图片](http://i1353.photobucket.com/albums/q671/mahdimb/ad2_zps953af9f7.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T12:07:58.030

数组从 C 中的 0 开始。无论你说它`i <= lenA`应该在哪里`i < lenA`。`j`和 也是如此`lenB`。此外，第二个循环并没有真正的意义。你的意思是`lenB`代替`lenA`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T12:14:42.437

你混淆了 lenA 和 lenB 。它应该是：

SWArray[i][0] 和 SWArray[0][j] 在你的循环中。

你的循环应该使用 < 而不是 <=

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T12:10:05.090

这两个循环都在错误的维度上建立索引，并且访问的元素超出了分配内存的大小。您应该在两个循环中都更改`i<=`为`i<`

正确的方法应该是：

```
for(int i=0;i<lenA;i++){
    SWArray[i][0]=0;
}
for(int j=0;j<lenB;j++){
    SWArray[0][j]=0;
} 
```

# java - apache.commons.net.ftp.FTPClient 未将文件上传到所需文件夹

> ID：15174271
> 
> 赞同：0
> 
> 时间：2013-03-02T12:06:54.363
> 
> 标签：java, linux, ftp, apache-commons-net

我正在使用以下代码将 xml 文件上传到服务器中的目录 /home/domainname/public_html/guest 。但是，该文件仅上传到位置 /home/domainname。它没有上传到子目录。请指教。

FTPClient 客户端 = new FTPClient(); FileInputStream fis = null;

```
 try {
        client.connect(Util.getProductsXMLFTPServer());
        client.login(Util.getProductsXMLFTPUser(), Util.getProductsXMLFTPPassword());

        //
        // Create an InputStream of the file to be uploaded
        //

        fis = new FileInputStream(new File(Util.getProductsXMLFTPInputFilePath(), Util.getProductsXMLFTPOutputFileName()));
        client.changeWorkingDirectory(Util.getProductsXMLFTPUploadPath());

        client.storeFile(Util.getProductsXMLFTPOutputFileName(), fis);
        client.logout();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            if (fis != null) {
                fis.close();
            }
            client.disconnect();
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T21:05:09.160

我检查了你的代码，它有效。我只是将文件类型声明更改为二进制，XML 文件可能不需要。这是我的完整代码供参考：

```
package apachenet.ftp;

import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;

import org.apache.commons.net.ftp.FTP;
import org.apache.commons.net.ftp.FTPClient;

public class App {
    public static void main( String[] args ) {
        FTPClient client = new FTPClient(); 
        FileInputStream fis = null;
        try {
            client.connect(/*Util.getProductsXMLFTPServer()*/"127.0.0.1");
            client.login(/*Util.getProductsXMLFTPUser()*/"pwyrwinski", 
                    /*Util.getProductsXMLFTPPassword()*/"secret");
            client.setFileType(FTP.BINARY_FILE_TYPE); // optional
            fis = new FileInputStream(
                    new File(/* Util.getProductsXMLFTPInputFilePath() */"/home/pwyrwinski", 
                            /* Util.getProductsXMLFTPOutputFileName() */"img.png"));
            client.changeWorkingDirectory(/*Util.getProductsXMLFTPUploadPath()*/ "someDir");

            client.storeFile(/*Util.getProductsXMLFTPOutputFileName()*/"img_bis.png", fis);
            client.logout();
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                if (fis != null) {
                    fis.close();
                }
                client.disconnect();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

如您所见，它与您的大致相同。 `Util`类调用被原始数据替换。

当我运行它时，文件`/home/pwyrwinski/img.png`被上传到`{FTP_USER_ROOT}/someDir`ftp 服务器上的目录，名称更改为`img_bis.png`. 我认为这正是您想要实现的目标。

让我们回到你的问题。

1.  尝试检查 `Util.getProductsXMLFTPUploadPath()`调用返回的内容。我的猜测是这不是你所期望的 - 所以在你的 IDE 中调试它或将它打印到控制台。
2.  检查调用返回的路径是否`Util.getProductsXMLFTPUploadPath()` 以斜杠开头，它不应该。

**更新 1.**服务器上 是否`/home/domainname/public_html/guest`存在目录？

将以下方法添加到您的课程中：

```
private static void showServerReply(FTPClient ftpClient) {
    String[] replies = ftpClient.getReplyStrings();
    if (replies != null && replies.length > 0) {
        for (String aReply : replies) {
            System.out.println("SERVER: " + aReply);
        }
    }
} 
```

并在**每个**ftp 客户端的方法调用之后调用它。这将为您提供每个命令结果的代码和描述。我怀疑`client.changeWorkingDirectory(...)`以错误结尾，可能：`550 Permission Denied (or No such file or folder)`.

下一个修改将是：

```
client.login(Util.getProductsXMLFTPUser(), Util.getProductsXMLFTPPassword());
System.out.println(client.printWorkingDirectory()); // added this line! 
```

这将告诉我们登录后当前的工作目录是什么。

请发布您的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-17T07:13:33.090

```
FTPClient ftpClient = new FTPClient();
        try {
              System.out.println("before server connection");
            ftpClient.connect(server, port);
            System.out.println("before user name and passwod");
            ftpClient.login(user, pass);
            ftpClient.enterLocalActiveMode();

            ftpClient.setFileType(FTP.BINARY_FILE_TYPE);

            System.out.println("connection sucess");

            // windows working fine
            File secondLocalFile = new File("/home/aims/archived_reports/tes_S_000000123/test.pdf");
//            String secondRemoteFile = "/archived_reports/PermanentRecord.pdf";

//linux
          //  File secondLocalFile = new File("/archived_reports/tes_S_000009123/test.pdf");

            String secondRemoteFile = "remotefilename.pdf";
            InputStream  inputStream = new FileInputStream(secondLocalFile);

            System.out.println("Start uploading second file");

                    ftpClient.changeWorkingDirectory("/reports");// home/ftp.test/reports folder

          System.out.println("Prasent Working Directory :"+ftpClient.printWorkingDirectory());

            OutputStream outputStream = ftpClient.storeFileStream(secondRemoteFile);
                 int returnCode = ftpClient.getReplyCode();
                 System.out.println(returnCode);
            byte[] bytesIn = new byte[4096];
            int read = 1;

            while ((read = inputStream.read(bytesIn)) != -1) {
                outputStream.write(bytesIn, 0, read);
            }

System.out.println();           
            inputStream.close();
            outputStream.close();
                     boolean completed = ftpClient.completePendingCommand();
            if (completed) {
                System.out.println("The second file is uploaded successfully.");
            } 
```

# python - 如何将 numpy.ndarray 初始化为基类

> ID：15174273
> 
> 赞同：1
> 
> 时间：2013-03-02T12:06:56.310
> 
> 标签：python, numpy

我想继承 numpy.ndarray 来自定义一些行为。作为第一步，我尝试创建自己的类，如下所示。但我从来没有得到正确的初始化。下面我用 [1.,2.] 初始化我的课程，并期望 "print a" 行将返回我 [1.,2.]。但它总是返回我 [[some_random_number, some_random_number]]。所以尺寸是错误的，初始值的分配失败。请帮忙。我想不通。

```
import numpy as np

class imarray(np.ndarray):
  def __init__(self, d):
      data = np.asarray(d)
      super(imarray, self).__init__((data.size,), dtype=data.dtype, buffer=data)

if __name__ == "__main__":
  a = imarray([1.,2.])
  print a 
```

# android - android 动画在活动之间切换 - windows 顺序

> ID：15174276
> 
> 赞同：0
> 
> 时间：2013-03-02T12:07:22.117
> 
> 标签：android, animation, window

我正在关注如何[DevBytes: Window Animations](http://youtu.be/Ho8vk61lVIU)在活动之间切换时将翻译实现为动画。

当用户从 SUBACTIVITY 按下后退按钮转到 MAIN ACTIVITY 时，除了动画之外，一切正常。当 MAIN ACTIVITY 滑入时，它位于SUBACTIVITY**之下**，我希望它位于它**之上**。

`overridePendingTransition()`当用户返回主要活动时，我用来创建动画。

```
overridePendingTransition(R.anim.slide_in_right, R.anim.slide_out_right); 
```

slide_in_right.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromXDelta="-100%p" android:toXDelta="0"
    android:duration="3500" /> 
</set> 
```

slide_out_right.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate xmlns:android="http://schemas.android.com/apk/res/android"
        android:fromXDelta="0" android:toXDelta="50%p"
        android:duration="3500" />
</set> 
```

如何在动画期间重新排序窗口，以便 MAIN ACTIVITY 位于顶部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:01:03.260

我有同样的问题。`overridePendingTransition()`使用子活动中的以下动画，我能够使我的动画顺利运行并且看起来不错`finish()`：

slide_in_right.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromXDelta="-50%p" android:toXDelta="0"
    android:duration="300" /> 
```

slide_out_right.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromXDelta="0" android:toXDelta="100%p"
    android:duration="300" /> 
```

# c# - 我们可以在最初使用 C# 安装的 Visual Studio Express 中运行 VB.Net 吗？

> ID：15174279
> 
> 赞同：2
> 
> 时间：2013-03-02T12:07:49.083
> 
> 标签：c#, vb.net, installation, visual-studio-express

我已经为 C# 安装了 Visual Studio Express 版本。现在我需要使用 VB.Net。但是我没有看到 VB.Net*文件*。我试图搜索安装两者，但似乎两者都是分开的......

如何安装 Visual Studio Express，使其同时支持 C# 和 VB.Net？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T12:13:59.860

对于 Visual Studio 2010，您需要从此处下载“Visual Basic 2010 Express”版本：

[http://www.microsoft.com/visualstudio/eng/downloads#d-2010-express](http://www.microsoft.com/visualstudio/eng/downloads#d-2010-express)

安装链接 - [http://go.microsoft.com/?linkid=9709929](http://go.microsoft.com/?linkid=9709929)

出于某种原因，他们决定将桌面版分为三个，一个用于 C#，一个用于 VB.NET，一个用于 C++。您可以并排安装所有三个（或四个，如果包括 Web Application Developer 版本），没有任何问题。它们被设计成这样工作。

Visual Studio 2012 版本（Visual Studio 2012 for Windows Desktop）在一个应用程序中包含 C#、VB.NET 和 C++。

[http://www.microsoft.com/visualstudio/eng/downloads#d-express-windows-desktop](http://www.microsoft.com/visualstudio/eng/downloads#d-express-windows-desktop)

如有必要，您可以将其与 2010 版本一起安装。

# ios - 为什么 LLDB 调试器总是无法附加？

> ID：15174282
> 
> 赞同：20
> 
> 时间：2013-03-02T12:07:58.900
> 
> 标签：ios, xcode, debugging, ios-simulator, lldb

对于这个问题，我看到了很多答案：

> 错误：无法附加到进程 ID

作为**`switch to GDB`**. 但是没有人解决它发生的原因**吗**？

附加在 GDB 调试器上工作正常，但默认和推荐的项目设置是 LLDB。

谁能解释为什么 LLDB 失败？这是一个常见的错误还是我做错了什么？

或者，如何在创建新项目时将 GDB 设置为我的默认调试器而不手动更改它？

系统信息：

```
OS: Lion
RAM: 5GB
XCode: Version 4.6 (4H127)
Device: Mac mini 
```

我的本地主机设置： ![在此处输入图像描述](../Images/0502f45d4d6dab6ccc20333575db52a3.png)

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-13T16:22:56.777

确保您已在文件中`localhost`映射到：`127.0.0.1``/etc/hosts`

```
$ grep 本地主机 /etc/hosts

```

如果`grep`不显示`127.0.0.1`，则添加它：

```
$须藤-i
# echo "127.0.0.1 localhost" >> /etc/hosts

```

[^ '#' 是 root 的命令提示符；不要键入它，否则您将注释掉该语句并且什么都不会发生]

**注意** 使用`>>`而不是`>`！（更好的是使用`vi`或`mate`或其他方式编辑它）。

我的`/etc/hosts`文件显示（忽略评论）：

```
127.0.0.1       localhost
255.255.255.255 broadcasthost
::1             localhost
fe80::1%lo0     localhost 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T17:28:29.863

苹果喜欢向前迈进。因此，将 gdb 设置为所有新项目的调试器不是一种选择。

有时，您必须重置[iOS 模拟器](http://developer.apple.com/library/ios/#documentation/Xcode/Conceptual/ios_development_workflow/25-Using_iOS_Simulator/ios_simulator_application.html)以清理调试器。

# python - Python日志记录：仅记录到处理程序而不是根

> ID：15174287
> 
> 赞同：0
> 
> 时间：2013-03-02T12:08:13.950
> 
> 标签：python, python-2.7

我有以下课程：

```
class Log(object):

# class new
#new is used instead of init because __new__ is able to return (where __init__ can't)
def __new__(self, name, consolelevel, filelevel):

    formatter = logging.Formatter('%(asctime)s %(levelname)s: %(name)s: %(message)s')

    #Create consolehandler and set formatting (level is set in the ROOT)
    consolehandler = StreamHandler()
    consolehandler.setFormatter(formatter)

    #Create filehandler, set level and set formatting
    filehandler = FileHandler(name + '.log')
    filehandler.setLevel(filelevel)
    filehandler.setFormatter(formatter)

    #Create the root logger, add console and file logger. Set the rootlevel == consolelevel.
    self.root = logging.getLogger(name)

    #causing me problems....
    self.root.setLevel(consolelevel)

    self.root.addHandler(consolehandler)
    self.root.addHandler(filehandler)
    self.root.propagate = True

    return self.root

# Close the logger object
def close():
    # to be implemented
    pass 
```

我使用此类记录到控制台和文件（取决于设置的级别）。问题是根级别似乎领先于 addhandler。有没有办法禁用它？现在我将 rootlevel 设置为与 consolelevel 相同的级别，但这不起作用......

有什么建议吗？

在此先感谢并致以最诚挚的问候，

JR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:17:32.070

我在您的代码中看到的一个问题是，每当您实例化`Log`该类时，它都会添加更多处理程序。你可能不想要这个。

请记住，`getLogger`使用相同的参数调用时总是返回相同的实例，并且基本上它实现了单例模式。因此，当您稍后调用`addHandler`它时，它每次都会添加一个新的处理程序。

*处理*的*`logging`方法是在模块级别创建一个记录器并使用它。*

 *另外我会避免使用`__new__`. 在您的情况下，您可以使用一个简单的功能。请注意，您的`Log.close`方法**不起作用**，因为您的`__new__`方法不返回`Log`实例，因此返回的记录器没有该方法。

关于记录器的级别，我不明白您为什么不在`consolehandler`整个记录器上设置级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T20:20:54.127

这是我正在制作的模块的简化版本。该模块包含一些都需要日志记录功能的类。每个类记录到不同的文件，并且还应该可以更改类之间的文件处理程序级别（例如游戏手柄类：console.debug 和 filehandler.info 和 MQTT 类：控制台信息和 filehandler.debug）。

因此，我认为设置日志类将是最简单的方法。请记住，我通常做电子产品，但现在与 python 结合使用。所以我的技能很基础......

```
#!/bin/env python2.7 
```

from **future** import Division from operator import * import logging from logging import FileHandler from logging import StreamHandler import pygame import threading from pygame.locals import * import mosquitto import time from time import sleep import sys

类 ConsoleFileLogger（对象）：

```
# class constructor
def __init__(self, filename, loggername, rootlevel, consolelevel, filelevel):

    # logger levels: DEBUG, INFO, WARNING, ERROR, CRITICAL

    # define a root logger and set its ROOT logging level
    logger = logging.getLogger(loggername)
    logger.setLevel(rootlevel)

    # define a Handler which writes messages or higher to the sys.stderr (Console)
    self.console = logging.StreamHandler()
    # set the logging level
    self.console.setLevel(consolelevel)

    # define a Handler which writes messages to a logfile
    self.logfile = logging.FileHandler(filename + '.log')
    # set the logging level
    self.logfile.setLevel(filelevel)

    # create formatter and add it to the handlers
    formatter = logging.Formatter('%(asctime)s %(levelname)s: %(name)s: %(message)s')
    self.console.setFormatter(formatter)
    self.logfile.setFormatter(formatter)

    # add the handlers to the root logger
    logger.addHandler(self.console)
    logger.addHandler(self.logfile)

    self._logger = logger

# set a net instance of the logger
def set(self):
    return self._logger

# Stop and remove the ConsoleFileLogger object
def remove(self):
    self._logger.removeHandler(self.console)
    self._logger.removeHandler(self.logfile)
    self._logfile.FileHandler().close() 
```

类游戏手柄（）：

```
# class constructor
def __init__(self, mqttgamepad):
    self.logger = ConsoleFileLogger('BaseLogFiles/Gamepad', 'Gamepad', logging.INFO, logging.INFO, logging.INFO).set()

    if joystickcount == 0:
        self.logger.error('No gamepad connected')
    elif joystickcount == 1:
        self.gamepad = pygame.joystick.Joystick(0)
        self.gamepad.init()
        self.logger.debug('Joystick name %s', self.gamepad.get_name())
        self.logger.debug('nb of axes = %s', self.gamepad.get_numaxes())
        self.logger.debug('nb of balls = %s', self.gamepad.get_numballs())
        self.logger.debug('nb of buttons = %s', self.gamepad.get_numbuttons())
        self.logger.debug('nb of mini joysticks = %s', self.gamepad.get_numhats())
    elif joystickcount > 1:
        self.logger.error('only one gamepad is allowed')

def run(self):
    self.logger.debug('gamepad running') 
```

MQTTClient() 类：

```
def __init__(self, clientname):
    self.logger = ConsoleFileLogger('BaseLogFiles/MQTT/Pub', clientname, logging.DEBUG, logging.DEBUG, logging.DEBUG).set()
    self.logger.debug('test')

def run(self):
       self.logger.info('Connection MQTT Sub OK') 
```

def main(): logger = ConsoleFileLogger('BaseLogFiles/logControlCenterMain', 'ControlCenterMain', logging.DEBUG, logging.DEBUG, logging.DEBUG).set()

```
mqttclient = MQTTClient("MQTTClient")
mqttclient.connect()

gamepad = Gamepad(mqttclient)

if gamepad.initialized():
    gamepadthread = threading.Thread(target=gamepad.run)
    gamepadthread.start()

    mqtttpubhread = threading.Thread(target=mqttclient.run)
    mqtttpubhread.start()

logger.info('BaseMain started')

# Monitor the running program for a KeyboardInterrupt exception
# If this is the case all threads and other methods can be closed the correct way :)
while 1:
    try:
        sleep(1)
    except KeyboardInterrupt:
        logger.info('Ctrl-C pressed')
        gamepad.stop()
        mqttclient.stop()
        logger.info('BaseMain stopped')
        sys.exit(0) 
```

如果**名称**== '**主要**': main()*

# php - PayPal Pro : « OrderTotal (Amt) : 缺少必需参数 »

> ID：15174289
> 
> 赞同：-3
> 
> 时间：2013-03-02T12:08:19.090
> 
> 标签：php, paypal

我在 DoDirectPayment 代码的响应中得到 « [L_LONGMESSAGE0] => OrderTotal (Amt) : Required parameter missing »，尽管该字段确实有值。

PayPal 也是如此，但使用与 PayPal Sandbox 完全相同的代码也能很好地工作。这是我的 PayPal 课程：

[贝宝类](http://codepad.org/3USFbQ46)

这是我的 DoDirectPayment 代码：

[DoDirectPayment 代码](http://codepad.org/fhBFcjU6)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T17:45:47.047

代码看起来不错，假设`$_SESSION['total_price']`已设置。但似乎肯定有某种东西阻止了 AMT 值到达 PayPal。除了数组，您可以对原始 $request 和 $response 字符串进行背靠背打印吗？第 21 和 34 行。

# oracle - 连接到托管在不同机器上的 oracle

> ID：15174290
> 
> 赞同：0
> 
> 时间：2013-03-02T12:08:25.477
> 
> 标签：oracle, shell, unix

嗨，我正在开展一个项目，其中我们拥有托管在一台机器上的 oracle DB 和另一台机器上的 java 应用程序。两台机器都有 UNIX 操作系统。我想开发一个 shell 脚本，它将使用数据库查询并生成报告，但我没有在两台机器上安装任何客户端（SQLplus）。所以让我知道如何连接到 DB 以及我在哪里开发 scirpt，比如在 DB unix 机器或应用程序机器上。

sqlplus -s "/as sysdba 这是使用 sql plus 我在任何机器上都没有..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T15:29:09.290

如果您在两台机器上都具有 ssh 访问权限，则几乎可以在机器本身上运行任何命令（通过 ssh）：

`ssh user@server1 "ls ~/"`

例如，上面将为您提供 server1 上“用户”主目录中的文件列表。

# android - 我可以为 CountDownTimer 使用 Toast

> ID：15174293
> 
> 赞同：0
> 
> 时间：2013-03-02T12:08:52.023
> 
> 标签：android, android-intent, countdown, toast, alarm

我想在 CountdownTimer 中使用 Toast，但问题是 Toast 计数太慢，当新的 Activity 启动时，Toast 没有完成计数。我知道使用 TextView 更容易，但我只是想知道它是否是可能的。有什么想法吗？

```
@Override
public void onClick(View arg0) {
    // TODO Auto-generated method stub
    if(Edt.getText().toString().length() == 0){
        Toast.makeText(MainActivity.this,"What, bro?",Toast.LENGTH_LONG).show();
    }else if(sec.getText().toString().length() == 0){
        Toast.makeText(MainActivity.this,"When, bro?",Toast.LENGTH_LONG).show();

    }else{
    Event=new String(Edt.getText().toString());
    final int time = Integer.parseInt(sec.getText().toString());

    Intent myInt = new Intent(MainActivity.this,Receiver.class);

    myInt.putExtra("key",Event);
    PendingIntent pendingIntent = PendingIntent.getActivity(MainActivity.this,2,myInt,PendingIntent.FLAG_CANCEL_CURRENT);
    AlarmManager am = (AlarmManager)getSystemService(ALARM_SERVICE);
    am.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis()+(time*1000),pendingIntent);

    new CountDownTimer(time*1000, 1000) {

         public void onTick(long millisUntilFinished) {

            Toast.makeText(MainActivity.this,"Alarm starts in"+ +millisUntilFinished/1000 + "seconds",Toast.LENGTH_SHORT).show();

         }

         public void onFinish() {

         }
      }.start();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:16:24.587

如果您的意思是它们堆积导致延迟，那么您应该在展示新的之前取消之前的祝酒词。

如果你想要更花哨的东西，你可以尝试使用 PopupWindow 来显示倒计时，这样你就有更多的布局自由度等。

[http://developer.android.com/reference/android/widget/PopupWindow.html](http://developer.android.com/reference/android/widget/PopupWindow.html)

# .net - 如何返回 ICollection 使用 .net neo4j 客户端

> ID：15174294
> 
> 赞同：0
> 
> 时间：2013-03-02T12:09:01.270
> 
> 标签：.net, neo4j, neo4jclient

我正在尝试使用 .net neo4j 客户端从我的密码查询中返回结果列表，并收到“不包含 ToList() 的定义”错误。我做错了吗？

```
public async ICollection<App> getWishList(string uname)
{

    var query = client.Cypher.StartWithNodeIndexLookup("root", AUTOINDEX, PRIMARYINDEX, uname)
        .Match("root-[:WishList]-apps")
        .Return<ICollection<App>>("apps");

    var results = await query.ResultsAsync;
    return results.ToList<App>();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T14:03:09.783

好的，这是一个简单的答案。

我需要将返回类型设置为“App”而不是“ICollection”，因为查询已经返回了一个集合。

```
var query = client.Cypher.StartWithNodeIndexLookup("root", AUTOINDEX, PrimaryIndexKey, uname)
            .Match("root-[:WishList]-apps")
            .Return<App>("apps");

        var results = await query.ResultsAsync;
        return results.ToList(); 
```

# c++ - FLENS 的自定义存储

> ID：15174298
> 
> 赞同：1
> 
> 时间：2013-03-02T12:09:08.770
> 
> 标签：c++, matrix

在[FLENS 中](http://apfel.mathematik.uni-ulm.de/~lehn/FLENS/index.html)，我想实现“自定义”存储（也就是说，能够提供指向实际数据的指针并负责存储的内存管理）。

管理其缓冲区的矩阵定义如下，例如：

```
typedef flens::GeMatrix<flens::FullStorage<double, flens::ColMajor> >  M; 
```

稍后，可以使用这样的矩阵：

```
M m1;
M m2;
M m3;
/* initialise the matrices */
m3 = m1 * m2; 
```

要对允许访问内部缓冲区的矩阵类型做同样的事情，可以实现，比如说，`GhostStorage`就像实现[FullStorage](http://www.mathematik.uni-ulm.de/~lehn/FLENS/flens/storage/fullstorage/fullstorage.html)的方式一样，添加一个`init()`允许设置内部指针的方法（完整实现太长，无法粘贴到这里） ：

```
void
init(IndexType numRows, IndexType numCols,
      IndexType firstRow = I::defaultIndexBase,
      IndexType firstCol = I::defaultIndexBase,
      ElementType *p_data = NULL )
{
  _data = p_data;
  _numRows = numRows;
  _numCols = numCols;
  _firstRow = firstRow;
  _firstCol = firstCol;
  ASSERT(_numRows>=0);
  ASSERT(_numCols>=0);
} 
```

像这样定义类型后：

```
typedef flens::GhostStorage<double, flens::ColMajor> GhostEng;
class MGhost : public flens::GeMatrix<GhostEng>
{
    public:
    void
    init(IndexType numRows, IndexType numCols,
    IndexType firstRow,
    IndexType firstCol,
    ElementType *p_data = NULL )
  {
    engine().init(numRows,numCols,firstRow,firstCol,p_data);
  }

}; 
```

我希望与上述相同的操作应该是可能的：

```
MGhost mg1;
MGhost mg2;
MGhost mg3;
/* initialise the matrices using the init() method */
mg3 = mg1 * mg2; 
```

但是在这种情况下编译器会抱怨：

> 没有已知的参数 1 从 'const flens::MatrixClosure >, flens::GeMatrix >' 到 'const MGhost&' 的转换

FLENS 作者提供了有关[实现自定义矩阵类型的](http://apfel.mathematik.uni-ulm.de/~lehn/FLENS/flens/examples/my-symatrix.html)指导，但我在这里使用了已经定义的矩阵类型 - [flens::GeMatrix](http://www.mathematik.uni-ulm.de/~lehn/FLENS/flens/matrixtypes/general/impl/gematrix.html)。

归根结底，问题是：如何在 FLENS 中实现一个矩阵，以允许操纵内部缓冲区和高级交互，例如`m3 = m1 * m2`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-16T11:19:03.003

无需编写自己的类，FLENS 已经提供了以下功能：

```
typedef FullStorageView<double, ColMajor>  FSView;
typedef GeMatrix<FSView>                   GeMatrixView;
GeMatrixView  A = FSView(numRows, numCols, data, ldA); 
```

在这里，数据是指向您分配的内存的指针。教程中对此进行了详细说明。此外，还有一个邮件列表，可以快速回答问题。

# c# - 匿名方法的源代码

> ID：15174314
> 
> 赞同：3
> 
> 时间：2013-03-02T12:10:30.683
> 
> 标签：c#, .net, reflection, anonymous-methods

如何获取匿名方法的源代码？

例如：

```
Func<Boolean> func = (() => DateTime.Now.Seconds % 2 == 0);

Console.WriteLine(GetSourceCode(func)); // must: DateTime.Now.Seconds % 2 == 0

String GetSourceCode<T>(Func<T> f) - ??? 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T13:12:43.653

您可以将其包装在 Expression 中并在其上调用 ToString() ，这将为您提供源代码。

像这样：

```
Expression<Func<Boolean>> func = (() => DateTime.Now.Seconds % 2 == 0);
var str = func.ToString(); 
```

输出 str 变为 `() => DateTime.Now.Seconds % 2 == 0`

# ruby-on-rails - 使用 ruby 查找模型中调用当前方法的方法

> ID：15174315
> 
> 赞同：0
> 
> 时间：2013-03-02T12:10:30.443
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我需要找到哪个方法叫做“abc”，在此基础上我可以做一些操作。

```
Class A
  def method1
   abc
  end

  def method2
   abc
  end

  def abc
   puts "abc" if calling_method == :method1
   puts "xyz" 
  end
end 
```

这在红宝石中可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T12:12:38.740

您可以使用该`caller()`方法。

[http://www.ruby-doc.org/core-2.0/Kernel.html#method-i-caller](http://www.ruby-doc.org/core-2.0/Kernel.html#method-i-caller)

# jquery - 用ajax调用页面内容

> ID：15174317
> 
> 赞同：0
> 
> 时间：2013-03-02T12:11:08.460
> 
> 标签：jquery, load

我有一些代码在工作，所以当你点击导航时，它会将 href 文本加载到滑动内容框中。

但是，我想将页面 #content 加载到我们使用 AJAX 的页面上的 #content 中。

这是HTML：

```
<ul>
<li><a href="about.php">about</a></li>
<li><a href="gallery.php">gallery</a></li>
<li><a href="suppliers.php">suppliers</a></li>
<li><a href="contact.php">contact</a></li>
</ul> 
```

这是jQuery：

```
var lastData;
$(function () {
    $("ul li a").click(function(event) {
        loadData($(this).attr("href") +' #content');
        event.preventDefault();
    });
});

function loadData(data) {
    if(lastData == data) {
        $("#content-container").slideUp();
    } else {
        //$('#content').load(toLoad)
        $('#content').html(data);
        $("#content-container").slideDown();
         $('#close').click(function(){
              $('#content-container').slideUp('5000');
          })
    }
    lastData = data;
} 
```

任何帮助都会很棒。到目前为止，我是如此接近...... jquery 不是我最强的技能。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:26:12.977

```
var lastData;
$(function () {
    $("ul li a").click(function(event) {
        loadData($(this).attr("href"));
        event.preventDefault();
    });
    /* I'm assuming #close is added dynamically */
    $('document').on("click", "#close", function(){
        $('#content-container').slideUp('5000');
    });
});

function loadData(data) {
    if(lastData == data) {
        $("#content-container").slideUp();
    } else {
        $('#content').load(data);
        $("#content-container").slideDown();             
    }
    lastData = data;
} 
```

# c++ - 模板类的标准流输出

> ID：15174319
> 
> 赞同：1
> 
> 时间：2013-03-02T12:11:16.200
> 
> 标签：c++, templates, generics, operator-overloading

要将对象写入命令行（或其他输出流），可以重载`<<`运算符。但是有没有可能为模板实现这一点？假设我有以下内容：

```
template <typename identifier>
class SomeTemplate {
public:
  SomeTemplate();
  ~SomeTemplate();
  void addElement(identifier id, unsigned int elem);
  unsigend int getElement(identifier id);
private:
  std::map<identifier, unsigned int> data_map_;
}; 
```

当我现在使用例如类型标识符对类进行专门化时，`std::tuple<unsigned int, unsigned int, unsigned int>`函数`getElement(identifier id)`应该执行一致性检查并写入警告`std::cout`，以防请求的元素不存在于`data_map_`. 简单地将 id 传递给 cout 是行不通的，因为`<<`用于特化的类型可能没有重载运算符。还有其他可能实现这一目标吗？也许标识符必须实现一个纯虚拟类，该类强制所有标识符重载`<<`运算符。但这可能吗？

谢谢你的帮助。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T12:14:27.960

通常要做的事情是简单地声明具有流输出运算符是该`identifier`类型的先决条件。与使用纯虚拟方法打印的基类相比，这肯定更符合使用模板进行通用 C++ 编程的精神。

如果必须，如果没有特定类型的流输出运算符，也许您可​​以使用 SFINAE 打印简单的“不可用”消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T12:16:04.773

您的第一个问题“是否有可能 [overload operator<<] for templates”？当然...

```
template <typename identifier>
std::ostream& operator<<(std::ostream& out, SomeTemplate<identifier> const& rhs); 
```

该声明的定义可以正常工作。

但是，您真正要问的是，我可以流式传输`std::tuple`吗？答案似乎是否定的。当然，你可以`operator<<`为它写一个本地的，但不要太广泛地暴露它。

# html - a:hover 和 css 类重叠

> ID：15174323
> 
> 赞同：0
> 
> 时间：2013-03-02T12:11:27.603
> 
> 标签：html, css, html-lists, wordpress-theming

我正在尝试在 wordpress 中制作一个侧面菜单，效果很好，但由于某种原因，css 很痛苦，我似乎无法理解它。

导航如下所示：

```
<nav>
  <ul id="sidebar-menu">
    <li class="page_item page-item-8 current_page_item"><a href="http://www.consana.nl/diensten/">Diensten</a></li>
    <li class="page_item page-item-32"><a href="http://www.consana.nl/diensten/dienst-1/">Dienst 1</a></li>
    <li class="page_item page-item-33"><a href="http://www.consana.nl/diensten/dienst-2/">Dienst 2</a></li>
    <li class="page_item page-item-36"><a href="http://www.consana.nl/diensten/dienst-3/">Dienst 3</a></li>
 </ul>
</nav> 
```

用于此的 css 如下所示：

```
#left-side nav a:hover, #left-side nav .current_page_item{
   border-left:10px #b8d276 solid;
   border-right:none;
   padding-left:10px;
   font-style: italic;
} 
```

现在，当其中一个项目被“选中”（具有 .current_page_item-tag）时，再次应用悬停，不应该发生什么，它应该保持不变。

在以下页面上，您可以看到它的实际效果：http: [//www.consana.nl/en/diensten/](http://www.consana.nl/en/diensten/)

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T12:14:00.860

因为`<li>`具有默认值`border-left`，并且您正在为锚元素设置样式。

```
#left-side nav li:hover, #left-side nav .current_page_item{
   border-left:10px #b8d276 solid;
   border-right:none;
   padding-left:10px;
   font-style: italic;
} 
```

# asp.net-mvc-3 - 通过商家名称在 Google 地图上获取标记

> ID：15174326
> 
> 赞同：1
> 
> 时间：2013-03-02T12:12:12.390
> 
> 标签：asp.net-mvc-3, web-services, google-maps-api-3, google-maps-markers

我正在建立一个网站，上面有一个谷歌地图。我还有一份企业名称列表，例如 WH Smith, Manchester。

假设曼彻斯特只有一个，我怎样才能在我的地图上显示 WH Smith 分店的位置的标记？

我尝试搜索，但没有找到关于该主题的任何内容！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:23:36.953

我这样做的方法是设置一个位置数组，每个位置都是一个必要信息的数组，按 html 的顺序分别表示工具提示、纬度、经度、标题。我从这个网站得到纬度和经度：http: [//universimmedia.pagesperso-orange.fr/geo/loc.htm](http://universimmedia.pagesperso-orange.fr/geo/loc.htm)所以你只需输入市中心。

```
function initialize() {         
                geocoder = new google.maps.Geocoder();

                var businesslocations = [

                        ['HTML TO DISPLAY ON TOOLTIP', LATITUDE, LONGITUDE,'LOCATION NAME'], 
                        ['HTML TO DISPLAY ON TOOLTIP', LATITUDE, LONGITUDE,'LOCATION NAME'], 
```

完成该阵列，然后进行其他地图设置。然后设置地图。然后使用该数组以编程方式设置其标记。for循环遍历不同的位置，然后拉出数组的4个元素。

```
 var bounds = new google.maps.LatLngBounds();

            var infowindow = new google.maps.InfoWindow();

            var marker, x;

            for (x = 0; x < businesslocations.length; x++) {  
              var latllong = new google.maps.LatLng(businesslocations[x][1], businesslocations[x][2]);
              marker = new google.maps.Marker({
                position: latlong,
                map: map,
                title: businesslocations[i][3]
              });
              bounds.extend(latlong);

              google.maps.event.addListener(marker, 'click', (function(marker, x) {
                return function() {
                  infowindow.setContent(businesslocations[x][0]);
                  infowindow.open(map, marker);
                }
              })(marker, x));
            }

            map.fitBounds(bounds); 
```

# c# - 如何在两个 c# 项目之间共享变量

> ID：15174330
> 
> 赞同：-3
> 
> 时间：2013-03-02T12:12:44.903
> 
> 标签：c#

我想在两个不同的项目之间使用共享变量，并且每次都想在 c# 中更新该变量？我使用 dll 文件来共享一个变量，但在更新变量时它没有工作。请帮忙。

```
public static class Signals
{
public static bool Admin_Logged_In;
public static bool get_Admin_Flag()
{
    return Admin_Logged_In;
}
public static bool get_Busy_Flag()
{
    return Back_End_Busy;
}
} 
```

我在 DLL 文件中附加了上面的类并在两个不同的项目中引用，然后尝试在一个项目中更新值并期望在第二个项目中获得更新的值。但它不提供更新的价值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T12:45:42.393

如果您有两个需要通信的进程（如两个 .exe 文件），则称为[进程间通信](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365574%28v=vs.85%29.aspx)。真的没有简单的方法来解释，因为有上百万种不同的方法来处理这个问题。

*   您可以写入文件并读取它们。
*   您可以通过网络连接进程。
*   您可以写入和读取通用数据库。
*   您可以使用消息队列。
*   您可以使用命名管道。
*   可能还有十几种我错过的方式......

您需要重新研究它们并找到最适合您的问题的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T12:25:59.807

MS 文档说明了 DLL：“默认情况下，每个使用 DLL 的进程都有自己的所有 DLL 全局和静态变量的实例。”。

看看这个给出一些解决方法：http: [//msdn.microsoft.com/en-us/library/h90dkhs0 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/h90dkhs0(v=vs.80).aspx)

顺便说一句，我会使用网络通信来分享这个价值观。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T12:25:43.583

您正试图通过同一程序中的两个项目访问静态成员，对吗？不是两个单独的程序。

如果是这样，我认为您在值类型和引用类型之间存在误解。您可以从两个项目中更新共享变量，但这些值不会传播。我将使用一个类来演示，而不是您正在使用的两个。

```
static class Test
{
    public static bool logged_in;
}

Test.logged_in = true;
var t = Test.logged_in;
Console.WriteLine(l); // prints true
Test.logged_in = false;
var f = Test.logged_in;
Console.WriteLine(f); // prints false
Console.WriteLine(t); // prints true 
```

`t`请注意，当您更改静态成员时，值是如何没有更新的？那是因为`bool`是值类型，而不是引用类型。因此，当您请求该值时，您会收到该值的副本，而不是对变量的引用。

如果静态成员是引用类型，您可以观察到不同的行为：

```
static class Test
{
    public static string logged_in;
}

Test.logged_in = "true";
var t = Test.logged_in;
Console.WriteLine(l); // prints "true"
Test.logged_in = "false";
var f = Test.logged_in;
Console.WriteLine(f); // prints "false"
Console.WriteLine(t); // prints "false" 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-02T12:18:51.323

链接文件怎么样（点击项目->添加->现有项目->（选择you.cs）->添加为链接）？

# content-management-system - Silverstripe 循环遍历站点树的所有子节点

> ID：15174332
> 
> 赞同：1
> 
> 时间：2013-03-02T12:12:51.303
> 
> 标签：content-management-system, silverstripe

我正在尝试为站点树的所有子项创建站点地图。对于某些页面 ShowInMenus 设置为 false。但是这些页面仍然应该在sitemao中显示。我知道您可以像这样遍历页面的所有子项（忽略 ShowInMenus）：

```
<% loop AllChildren %>
    $Title
<% end_loop %> 
```

我可以在站点树的顶层做类似的事情吗？

谢谢，弗洛里安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T00:40:09.640

我不知道您可以为此使用任何内置循环，但您可以在 php 中执行

```
public function AllPagesWithParentIDZero() {
    return SiteTree::get()->filter('ParentID', 0);
} 
```

并在模板中使用

```
<% loop $AllPagesWithParentIDZero %>
    <a href="$Link">$Title</a>
<% end_loop %> 
```

# jquery - $ajax 总是调用错误处理程序

> ID：15174333
> 
> 赞同：-1
> 
> 时间：2013-03-02T12:12:52.733
> 
> 标签：jquery

我想创建一个简单的“是一个有效的 url”验证。

这是我到目前为止所拥有的：

```
function checkUrl(url) {
    var ok = false;
    $.ajax(
        {
            url: 'http://www.google.com',
            success: function(result) {
                ok = true;
            },
            error: function(result) {
                ok = false;
            },
            async: false
        }
    );
    return ok;
} 
```

但它总是返回假。请注意，“www.google.com”网址仅用于测试目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:42:46.407

这是因为所谓的[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，它是一种由浏览器实现的安全策略，可以防止跨域 ajax 调用。

对此的解决方案是使用[JSONP](http://en.wikipedia.org/wiki/JSONP)，但您要连接的服务器必须支持此策略。

[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)支持 jsonp。

前任：

```
$.getJSON('<resource-url?callback=?>').done(function(data){
    //Your callback logic
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T12:37:11.223

尝试这个 ：-

```
function buildQuery() {
            return "select * from json where url = 'google.com'";
        }

        $.ajax({
           url: 'http://query.yahooapis.com/v1/public/yql',
           data: {
               q: buildQuery(),
               format: "json"
           },
           dataType: "jsonp",
           success: function (result) {
               alert("Success :" +JSON.stringify(result));
           },
           error: function (result) {
               alert("error: " + JSON.stringify(result));
           },
       }
   ); 
```

# android - Android读/写几个字符串

> ID：15174351
> 
> 赞同：0
> 
> 时间：2013-03-02T12:14:34.263
> 
> 标签：android

我想将一些字符串读/写到android文件中

所以我从树 EditTexts 写信息

```
public void save(Person p) {

    try {
        FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
        fos.write(p.getName().getBytes());
        fos.write(p.getSurname().getBytes());
        fos.write(p.getAge().getBytes());
        fos.close();
        Toast toast = Toast.makeText(getApplicationContext(), 
                    "Info was saved!", Toast.LENGTH_SHORT); 
        toast.show();
    } catch (FileNotFoundException e){
        e.printStackTrace();
        Toast toast = Toast.makeText(getApplicationContext(), 
                "File not found exeption!", Toast.LENGTH_SHORT); 
        toast.show();
    } catch (IOException e) {
        e.printStackTrace();
        Toast toast = Toast.makeText(getApplicationContext(), 
                    "Input/Output Exeption!", Toast.LENGTH_SHORT); 
        toast.show();
    }
} 
```

我尝试用方法加载回信息

```
private void load(){
    String value = "";
    FileInputStream fis;

    try {
        fis = openFileInput(FILENAME);
        byte[] input = new byte[fis.available()];
        while(fis.read(input) != -1 ) {
            value += new String(input);
        }
        edName.setText(value);
        while(fis.read(input) != -1 ) {
            value += new String(input);
        }
        edSurname.setText(value);
        while(fis.read(input) != -1 ) {
            value += new String(input);
        }
        edAge.setText(value);
        fis.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
        Toast toast = Toast.makeText(getApplicationContext(), 
                "Input/Output Exeption!", Toast.LENGTH_SHORT); 
        toast.show();
    }

} 
```

它加载信息，但所有数据都合并在一行中。我怎样才能逐行读取一些数据行？

或者我可以用它的字段来写/读一些类吗？（在我的例子中，有一个类 Person 有字段 Name、Surname、Age、Male）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T15:43:42.430

好吧，您可以轻松地让您的类实现`Serializable`和使用并`ObjectOutputStream`对其进行序列化和`ObjectInputStream`反序列化。

# android - Android RadioButtons 控制文本视图的颜色

> ID：15174352
> 
> 赞同：0
> 
> 时间：2013-03-02T12:14:37.840
> 
> 标签：android

我是 android 编程新手，我正在制作一个程序，当您按下三个单选按钮之一时，它会更改 textview 项目的颜色。每个单选按钮对应于某种特定颜色。代码编译并且没有给出任何错误，但它没有执行。这是代码

```
package org.example.project2;
import android.os.Bundle;
import android.view.View;
import android.app.Activity;
import android.view.Menu;
import android.widget.RadioButton;
import android.widget.EditText;
//import android.view.View.OnClickListener;
import android.graphics.Color;
public class MainActivity extends Activity {

    View mColorArea;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    public void ChangeState(View clickedbutton)
    {
        mColorArea=findViewById(R.id.color_place);
        RadioButton RB=(RadioButton)clickedbutton;
        CharSequence choice = RB.getText();
        //String Choice1=choice.toString(); this is right too
        String ChoiceString=getString(R.string.choice_string);
           String Choice1 =
                    String.format(ChoiceString, choice);
            if (Choice1=="Red")
            {
            mColorArea.setBackgroundColor(Color.RED);
            //mColorArea.setText("red");
            }
            else if (Choice1=="Yellow")
            {
            mColorArea.setBackgroundColor(Color.YELLOW);
            //mColorArea.setText("yellow");
            }
            else
            {
            mColorArea.setBackgroundColor(Color.BLUE);
            //mColorArea.setText("blue");
            }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

这是xml部分

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
     >
     <LinearLayout
         android:layout_width="match_parent"
         android:layout_height="match_parent"
         android:orientation="horizontal" 
         >
         <RadioButton
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:text="@string/red_button" 
             android:onClick="ChangeState"
             />
         <RadioButton 
                       android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:text="@string/blue_button" 
             android:onClick="ChangeState"
             />
         <RadioButton 
                       android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:text="@string/yellow_button" 
             android:onClick="ChangeState"
             />
     </LinearLayout>
     <TextView
         android:id="@+id/color_place"
         android:layout_width="match_parent" 
         android:layout_height="match_parent"
         />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:20:45.687

你需要这样的东西

```
Red=(RadioButton)findViewById(R.id.radiobutton5);
        Blue=(RadioButton)findViewById(R.id.radiobutton6);
        Green=(RadioButton)findViewById(R.id.radiobutton7);

Red.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                // TODO Auto-generated method stub

                if(isChecked)
                {
                    TextView t;
                    t.setTextColor(Color.RED);
                }
            }
        });

Green.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                // TODO Auto-generated method stub

                if(isChecked)
                {
                    TextView t;
                    t.setTextColor(Color.Green);
                }
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T12:30:09.600

嗨，请检查以下代码以根据选中的单选按钮设置背景颜色

```
 color.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            // TODO Auto-generated method stub

            if(isChecked)
            {
               RelativeLayout yourlayout=(RelativeLayout)findViewById(R.id.your_layout_id);
               yourlayout=.setBackgroundColor(Color.RED);

            }
        }
    }); 
```

# activerecord - 从 fieldTable 向 ActiveRecord 添加属性

> ID：15174355
> 
> 赞同：0
> 
> 时间：2013-03-02T12:15:07.493
> 
> 标签：activerecord, yii

我有一个 Yii 项目，我想在个人资料页面上添加字段，这些字段在另一个模型中进行了描述。

所以表格可能如下所示：

```
创建表`object_field`（
  `id` INT NOT NULL AUTO_INCREMENT ,
  `varname` VARCHAR(255) NULL ,
  `title` VARCHAR(255) NULL ,
  `field_type` VARCHAR(255) NOT NULL ,
  `match` VARCHAR(255) NULL ,
  `范围` VARCHAR(255) NULL ,
  `default` VARCHAR(255) NULL ,
  `required` INT(1) NOT NULL DEFAULT 0 ,
  `position` INT(3) NOT NULL DEFAULT 0 ,
  `visible` INT(1) NOT NULL DEFAULT 0 ,
  主键 (`id`) )
引擎 = InnoDB

```

所以在`UserProfile`-model 中，我已将字段添加到`rules()`and`attributesLabels()`但`__get()`and确实在我添加例如模型`__set()`之前找不到属性。`public $this->fieldName`

用户的值存储在另一个表中，该表`User`将`UserData`

我应该覆盖模型中的`__get()`and `__set()`，还是如何使用动态定义的字段使表单中的字段接受？

**更新：**

我查看了 Yii-user 扩展，[http:](http://www.yiiframework.com/extension/yii-user/) //www.yiiframework.com/extension/yii-user/，但它只是更改了 UserProfile-schema 以添加新字段。我可以有 20 种不同类型的用户，他们每个人都共享一些字段，并且可能有一些仅针对一种类型的特殊字段。

一个解决方案可能是将 mongoDB 添加为关系。但我从未使用过这种技术。

# c# - 将数据从 C# 程序发送到 Arduino

> ID：15174361
> 
> 赞同：3
> 
> 时间：2013-03-02T12:15:46.703
> 
> 标签：c#, arduino

我在将数字从 C# prog 发送到 Arduino 时遇到问题（当时一个值）。我注意到，如果我发送的值低于 128 就可以了，问题从更高的值开始。

**C# 行：**

```
shinput = Convert.ToInt16(line2); // shinput = short.
byte[] bytes = BitConverter.GetBytes(shinput);
arduino.Write(bytes, 0, 2); 
```

**Arduino线：**

```
Serial.readBytes(reciver,2);
inByte[counter]= reciver[0]+(reciver[1]*256); 
```

我将非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:14:06.713

您可以尝试使用已知值进行测试，以确保以已知顺序进行正确通信；

```
arduino.Write(new byte[]{ 145}, 0, 1);
arduino.Write(new byte[]{ 240}, 0, 1); 
```

然后

```
Serial.readBytes(reciver,1); //check reciver == 145
Serial.readBytes(reciver,1); //check reciver == 240 
```

假设这是正确的，现在测试字节顺序

```
arduino.Write(new byte[]{ 145, 240}, 0, 2); 
```

然后

```
Serial.readBytes(reciver,1); //check reciver == 145
Serial.readBytes(reciver,1); //check reciver == 240 
```

最后很可能你有一个字节接收器[1] * 256，你需要将它转换为一个可以存储更大值的值：

```
((int) reciver[1] * 256) 
```

所以试试这个：

```
Serial.readBytes(reciver,2); 
inShort[counter] = (short) reciver[0] | ((short) reciver[1]) << 8; 
```

# php - Gii 模块视图

> ID：15174363
> 
> 赞同：0
> 
> 时间：2013-03-02T12:15:51.643
> 
> 标签：php, yii, gii

当我使用 Gii 工具在模块上下文中为模型生成 CRUD 时，我希望在模块目录下创建视图和控制器，但它们是在应用程序控制器和视图方向下创建的。为什么以及如何解决？

这是我的模型路径别名

```
application.modules.admin.models.SysMessage 
```

澄清：

控制器和视图在这里创建：

```
/controller
/views 
```

但它应该在这里创建：

```
/modules/admin/controller
/modules/admin/views 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:31:28.867

我忘记设置正确的控制器 ID admin/sysMessage

# android - 在安卓应用中获取位置

> ID：15174367
> 
> 赞同：0
> 
> 时间：2013-03-02T12:16:21.163
> 
> 标签：android

我制作了一个简单的程序来检索位置，首先它意外关闭了我更改了代码，现在它没有关闭，但是在我必须获取纬度和经度的两个编辑文本中它保持空白我的代码如下...有两个类 1)mainactivity.java 和 2)GPSTracker.java

mainactiviy.java

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    final Button gpsButton = (Button) findViewById(R.id.getloc);

    gpsButton.setOnClickListener(new Button.OnClickListener() {
    public void onClick(View v){
        LoadCoords();
    }});

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void LoadCoords(){
    EditText locn = (EditText)findViewById(R.id.text1);
    EditText locn1 = (EditText)findViewById(R.id.text2);
    GPSTracker gps = new GPSTracker(this);
    if(gps.canGetLocation){
    Double latPoint=gps.getLatitude(); 
    Double lngPoint =gps.getLongitude();   

    locn.setText(latPoint.toString());
    locn1.setText(lngPoint.toString());
}
}
} 
```

GPSTracker.java

```
public class GPSTracker extends Service implements LocationListener{
private final Context mContext;

// flag for GPS status
boolean isGPSEnabled = false;

// flag for network status
boolean isNetworkEnabled = false;

boolean canGetLocation = false;

Location location; // location
double latitude; // latitude
double longitude; // longitude

// The minimum distance to change Updates in meters
private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 10; // 10 meters

// The minimum time between updates in milliseconds
private static final long MIN_TIME_BW_UPDATES = 1000 * 60 * 1; // 1 minute

// Declaring a Location Manager
protected LocationManager locationManager;

public GPSTracker(Context context) {
    this.mContext = context;
    getLocation();
}
public Location getLocation() {
    try {
        locationManager = (LocationManager) mContext
                .getSystemService(LOCATION_SERVICE);

        // getting GPS status
        isGPSEnabled = locationManager
                .isProviderEnabled(LocationManager.GPS_PROVIDER);

        // getting network status
        isNetworkEnabled = locationManager
                .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

        if (!isGPSEnabled && !isNetworkEnabled) {
            // no network provider is enabled
        } else {
            this.canGetLocation = true;
            // First get location from Network Provider
            if (isNetworkEnabled) {
                locationManager.requestLocationUpdates(
                        LocationManager.NETWORK_PROVIDER,
                        MIN_TIME_BW_UPDATES,
                        MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                Log.d("Network", "Network");
                if (locationManager != null) {
                    location = locationManager
                            .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                    if (location != null) {
                        latitude = location.getLatitude();
                        longitude = location.getLongitude();
                    }
                }
            }
            // if GPS Enabled get lat/long using GPS Services
            if (isGPSEnabled) {
                if (location == null) {
                    locationManager.requestLocationUpdates(
                            LocationManager.GPS_PROVIDER,
                            MIN_TIME_BW_UPDATES,
                            MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    Log.d("GPS Enabled", "GPS Enabled");
                    if (locationManager != null) {
                        location = locationManager
                                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                        if (location != null) {
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
                        }
                    }
                }
            }
        }

    } catch (Exception e) {
        e.printStackTrace();
    }

    return location;
}
public double getLatitude(){
    if(location != null){
        latitude = location.getLatitude();
    }

    // return latitude
    return latitude;
}

/**
 * Function to get longitude
 * */
public double getLongitude(){
    if(location != null){
        longitude = location.getLongitude();
    }

    // return longitude
    return longitude;
}
@Override
public void onLocationChanged(Location location) {
}

@Override
public void onProviderDisabled(String provider) {
}

@Override
public void onProviderEnabled(String provider) {
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
}

@Override
public IBinder onBind(Intent arg0) {
    return null;
} 
} 
```

我的 main.xml 如下

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TableRow android:layout_width="fill_parent" >
<EditText
android:id="@+id/text1"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_alignParentLeft="true"
android:layout_alignParentRight="true"
android:layout_alignParentTop="true"
android:ems="10" >

<requestFocus />
</EditText>
</TableRow>
<TableRow >
<EditText
android:id="@+id/text2"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_alignParentLeft="true"
android:layout_alignParentRight="true"
android:layout_alignParentTop="true"
android:ems="10" >
</EditText>
</TableRow>
<TableRow
android:id="@+id/tableRow1"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >
<Button
android:id="@+id/getloc"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="Get Location" />
</TableRow>
</TableLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:31:52.943

您应该使用 android 设备进行定位应用程序，它对模拟器有点复杂，也请尝试此代码，它可以为您提供来自 GPS 或网络提供商的位置，无论哪个可用。

```
public Location getLocation() {
        try {
            locationManager = (LocationManager) mContext
                    .getSystemService(LOCATION_SERVICE);

            // getting GPS status
            isGPSEnabled = locationManager
                    .isProviderEnabled(LocationManager.GPS_PROVIDER);

            // getting network status
            isNetworkEnabled = locationManager
                    .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

            if (!isGPSEnabled && !isNetworkEnabled) {
                // no network provider is enabled
            } else {
                this.canGetLocation = true;
                if (isNetworkEnabled) {
                    locationManager.requestLocationUpdates(
                            LocationManager.NETWORK_PROVIDER,
                            MIN_TIME_BW_UPDATES,
                            MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    Log.d("Network", "Network Enabled");
                    if (locationManager != null) {
                        location = locationManager
                                .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                        if (location != null) {
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
                        }
                    }
                }
                // if GPS Enabled get lat/long using GPS Services
                if (isGPSEnabled) {
                    if (location == null) {
                        locationManager.requestLocationUpdates(
                                LocationManager.GPS_PROVIDER,
                                MIN_TIME_BW_UPDATES,
                                MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                        Log.d("GPS", "GPS Enabled");
                        if (locationManager != null) {
                            location = locationManager
                                    .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                            if (location != null) {
                                latitude = location.getLatitude();
                                longitude = location.getLongitude();
                            }
                        }
                    }
                }
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

        return location;
    } 
```

# css - joomla中5 col页脚菜单的CSS选择器？

> ID：15174371
> 
> 赞同：0
> 
> 时间：2013-03-02T12:16:30.217
> 
> 标签：css, css-selectors

我正在尝试排列页脚菜单并仅选择第一个列表元素作为单个选择

```
<ul class="someclass">
    <li><!--this is what I am trying to capture-->

        <a>something arbitrary here</a>
        <ul>
            <li>list elemnts here</li>
            <li>list elemnts here</li>
            <li>list elemnts here</li>
            <li>list elemnts here</li>
        </ul>
    </li>
    <li>
        <a>something arbitrary here</a>
        <ul>
            <li>list elemnts here</li>
            <li>list elemnts here</li>
            <li>list elemnts here</li>
            <li>list elemnts here</li>
        </ul>
    </li>
    <li>
        <a>something arbitrary here</a>
        <ul>
            <li>list elemnts here</li>
            <li>list elemnts here</li>
            <li>list elemnts here</li>
            <li>list elemnts here</li>
        </ul>
    </li>
</ul> 
```

我希望能够选择**所有**顶部`<li>`元素，而无需直接选择所有其他内部`<li>`元素。我应该使用哪些 CSS 选择器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:25:28.827

```
.someclass > li:first-child {
} 
```

示例：http: [//jsfiddle.net/yUMwD/](http://jsfiddle.net/yUMwD/)

或者选择`li`该级别的所有 s：

```
.someclass > li {
} 
```

`>`意思是“子元素”，所以它会`li`直接在下面`.comeclass`

# c# - 如何将行写入文本文件线程安全 - 多线程

> ID：15174373
> 
> 赞同：4
> 
> 时间：2013-03-02T12:17:09.687
> 
> 标签：c#, multithreading, file-io, thread-safety, streamwriter

我刚试过这个，但失败了

```
public MainWindow()
{
    InitializeComponent();
}

private void Button_Click_1(object sender, RoutedEventArgs e)
{

    Task.Factory.StartNew(() =>
    {
        writeFile();
    });

}

TextWriter myWriter = new StreamWriter("deneme.txt");

void writeFile()
{
    for (int k = 0; k < 10000; k++)
    {
        int irTempPara = k;
        Task.Factory.StartNew(() =>
        {
            writeFileForReal(irTempPara);
        });
        System.Threading.Thread.Sleep(10);
    }
}

void writeFileForReal(int srParameter)
{
    for (int k = 0; k < 999999999; k++)
    {
        myWriter.WriteLineAsync(srParameter + "_" + k);
    }
} 
```

它是 c# 4.5 WPF 应用程序

那么你会建议什么方法最有效地和多线程将行写入文本文件

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-02T12:25:03.663

这个怎么样？

```
TextWriter.Synchronized(myWriter).WriteLine("Hello World!!!"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T12:40:06.110

你可以像你一样使用简单的 TPL 方式，但你可以设置：

```
 void writeFile()
    {
        for (int k = 0; k < 10000; k++)
        {
            int irTempPara = k;
            Task.Factory.StartNew(() =>
            {
                writeFileForReal(irTempPara);
            }, TaskCreationOptions.LongRunning); // this way you do not need sleep
            // System.Threading.Thread.Sleep(10);
        }
    } 
```

[http://coderkarl.wordpress.com/2012/12/13/long-running-tasks-and-threads/](http://coderkarl.wordpress.com/2012/12/13/long-running-tasks-and-threads/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T12:21:31.620

在多线程中，您绝不能依赖 Sleep 进行同步。相反，请考虑使用同步机制，例如[信号量](http://msdn.microsoft.com/en-us/library/system.threading.semaphore.aspx)或[互斥](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)量。

# xcode - Xcode 地图标注：5 星评级小部件

> ID：15174383
> 
> 赞同：0
> 
> 时间：2013-03-02T12:18:19.150
> 
> 标签：xcode

对于地图图钉注释上的标注，我一直想添加“5 星评级”小部件，该小部件可以实时更新，而无需我挖掘代码并添加人们添加的数据。我知道如果您使用特定的插件，您可以将 php 与 Xcode 一起使用。这可能是 5 星小部件吗？

如果是，除了在每次调用时输入小部件的代码外，我还需要做其他任何事情吗？我必须管理一个 php 数据库吗？

多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T09:34:53.693

我也遇到过'5 Star Rating Widget'，我所做的是：

1) 创建了 10 个图像。- 第一张有 5 颗白星，表示评分为 0。第二张图片左半边的第一颗星为红色，其余为白色，表示评分为 0.5。第三张图片左侧的第一颗星全为红色，其余为白色，表示评分为 1.0（满分 5），依此类推。

2) 将这 10 张图片保存到 Xcode 中。如 star20.png 为 2.0 的评级，star15.png 为 1.5 的评级，依此类推。稍后你会看到我为什么以这种方式命名它们。

3) 使用诸如 device=ios&locationID=123456 之类的查询或该地图引脚的任何 locationID 来创建从 Xcode 到 PHP 的调用。（参考：[Objective-C 中的简单 http post 示例？](https://stackoverflow.com/questions/3566516/simple-http-post-example-in-objective-c)）

4) php 处理位置 ID 并通过 MySQL 数据库收集该地点的评分，并将其分析为离散值，例如 00,05,10,15,20,25,30,35,40,45 或 50。所以如果评分是 4.21，那么它在 3.75 和 4.25 之间，所以我要显示的评分是 4.0，我将它乘以 10，因为它更容易看。这是通过 PHP 完成的。

5）Xcode通过NSURLConnection获取PHP输出并输出图片。PHP 获得例如 35 的评级。将 35 附加到 @“star”，然后附加“.png”以创建该位置的图像名称。然后使用 UIImageView 将评分图像输出为 5 星。

这是一个简短的概述，但我希望这会有所帮助。

# java-native-interface - 如何在 JNI 中删除 Eigen 中的 Matrixxd def

> ID：15174384
> 
> 赞同：0
> 
> 时间：2013-03-02T12:18:20.837
> 
> 标签：java-native-interface, eigen

存在方式如何删除声明的 Matrixxd？因为当我想使用时：

```
 delete 
```

这说明编译错误

```
 Eigen::Matrix4d' argument given to 'delete', expected pointer
    make.exe: *** 
```

当我想使用时：

```
 JNIEXPORT void JNICALL Java_com_jp_algi_CoreC_vector
     (JNIEnv *env, jobject clazz, jfloatArray input){
jfloat* flt1 ;
jsize size = env->GetArrayLength(input);
jint i;
jint j=0;
jfloat* out ;
Matrix4d C(400,400);

 //compute part

  delete C; 
```

Jdouble 和 C+ Double 有什么区别？我认为没有。那么我只能将 J Datatypes 用于代码中的顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T21:04:50.363

首先，`Matrix4d C(400,400);`没有意义：Matrix4d 是一个 4x4 矩阵，因此无法将其大小调整为 400x400 矩阵。

其次，操作符`delete`用于释放操作符分配的内存`new`。在您的情况下，矩阵 C 是在堆栈上创建的，而 C 负责分配/释放底层内存。

因此，假设您实际上想要动态大小的矩阵（即 MatrixXd），那么您可以简单地将其大小调整为 0x0 以释放分配的内存：

```
MatrixXd C(400,400);
// ...
C.resize(0,0);
// reuse C later 
```

如果以后不需要 C，也可以使用块：

```
{
  MatrixXd C(400,400);
  // ...
}
// At this stage C has been automatically deleted. 
```

# android - 应用内计费 - 生成的 IInAppBillingService.java 中的错误

> ID：15174385
> 
> 赞同：2
> 
> 时间：2013-03-02T12:18:23.707
> 
> 标签：android, in-app-billing

首次尝试使用应用内计费 V3，针对 Android 2.2（API 级别 8），使用 Eclipse。

创建了一个名为 com.android.vending.billing 的包（在 /src 中），将 IInAppBillingService.aidl 放入其中。但是 /gen 现在包含构建错误，例如

```
@Override public int isBillingSupported(int apiVersion, java.lang.String packageName, java.lang.String type) throws android.os.RemoteException 
```

它说“IInAppBillingService.Stub.Proxy 类型的方法 isBillingSupported(int, String, String) 必须覆盖超类方法......”。

它建议我删除 @override 但这是 google 提供的文件，我不想更改它。出了什么问题？

清洁和重建无济于事。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-02T12:22:40.510

如果您使用的是 Java 5，您将收到此错误。Java 5 的`@Override`注解存在一些问题。

您需要确保已安装 Java 6，然后您可以通过转到`Project -> Properties -> Java Compiler`并选中该`Enable project specific settings`框并将`Compiler compliance level:`值更改为来更改用于构建的版本`1.6`

Android 工具不能很好地与 Java 7 配合使用，所以不要使用`1.7`.

# php - 表单提交不发布 Safari

> ID：15174386
> 
> 赞同：1
> 
> 时间：2013-03-02T12:18:26.437
> 
> 标签：php, forms

我有一个注册表设置，可以在所有浏览器上正常工作......除了 Safari。我认为这应该是处理 Javascript 的问题，因为它主要是。但是在我关闭 Safari 中的 Javascript 后，仍然没有发布任何数据。

该表格在： [http ://tpgrf.nl/testserver/alpha/account/registreer/](http://tpgrf.nl/testserver/alpha/account/registreer/)

我已在页面顶部添加了此文本，用于测试，以确保数据是否已发布。

```
if($_SERVER['REQUEST_METHOD'] == 'POST'){
            echo 'post';
        }else{
            echo 'niets gepost';
        } 
```

任何想法在哪里寻找答案？

编辑：这是表单（输出 HTML）

```
<form name="registerform" id="registerform" action="http://tpgrf.nl/testserver/alpha/account/registreer/" method="post">
    <script type="text/javascript">
        jQuery(document).ready(function($) {

            //Since we want users to login with there email; there's no need to also register a username. Therefore the username field = email field
            $("#user_login").live('change', function(){
                $('#user_email').val($("#user_login").val());
            });

            //Display fields, depending on the selected role
            $('#role').live('change', function(){
                if($('#role').val() === 'docent'){
                    $('#messageRegisterDocent').show();
                    $('#pKlas').hide();
                }else{
                    $('#messageRegisterDocent').hide();
                    $('#pKlas').show();
                }
            });

            //The json call to automcplete School
            var ajaxurl = 'http://tpgrf.nl/testserver/alpha/wp-admin/admin-ajax.php';
            $("#school").autocomplete({
                delay: 0,
                minLength: 1,
                source: function(req, response){  
                    $.getJSON('http://tpgrf.nl/testserver/alpha/wp-admin/admin-ajax.php?callback=?&action=school_autocomplete', req, response);  
                },
                select: function(event, ui){
                    $('#school').val(ui.item.label);
                    $('#school_id').val(ui.item.school_id);
                }
            });

        });
    </script>

        <p>
            <input type="hidden" name="user_email" id="user_email" class="input" value="" size="20" />
        <p>
            <label for="user_login">E-mail</label>
            <input type="email" name="user_login" id="user_login" class="input" value="" size="20" />
        </p>
    <p>
        <label>Voornaam</label>
        <input id="first_name" type="text" size="25" value="" name="first_name" />
    </p>
    <p>
        <label>Achternaam</label>
        <input id="last_name" type="text" size="25" value="" name="last_name" />
    </p>
    <p>
        <label>Ik ben...</label>
        <select name="role" id="role">
            <option value="">...selecteer</option>
            <option value="leerling" >Leerling</option>
            <option value="docent" >Docent</option>
        </select>
        <p class="message" id="messageRegisterDocent" style="display:none;"><strong>Let op:</strong> registreer met uw e-mailadres van de school waar u werkzaam bent. <br />Voor een aantal functies vindt namelijk handmatige autorisatie plaats; dit is niet mogelijk met een privé e-mailadres.</p>
    </p>
    <p>
        <label>Mijn school</label>
        <input type="text" id="school" class="autoComplete" size="25" value="" name="school" />
        <input type="hidden" id="school_id" name="school_id" value="">
    </p>
    <p id="pKlas"style="display:none;">
        <label>Mijn klas</label>
        <input type="text" id="klas" size="25" value="" name="klas" />
    </p>
        <p id="reg_passmail">U zult een wachtwoord per e-mail ontvangen.</p>
        <p class="submit">
            <a href=""><input type="submit" name="wp-submit" id="wp-submit" value="Registratie" /></a>
             of <a href="/account/login">Ik heb al een account...</a>
            <input type="hidden" name="redirect_to" value="/testserver/alpha/account/login/?checkemail=registered" />
            <input type="hidden" name="instance" value="" />
        </p>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:34:35.227

您的问题可能是由以下代码行引起的：

```
<a href=""><input type="submit" name="wp-submit" id="wp-submit" value="Registratie" /></a> 
```

您将提交按钮标签包装在一个“a”标签内，该标签指向一个空 URL，并导致仅指向当前页面的链接。可能是 Safari 没有很好地解析这个包裹的按钮，而是更喜欢 A 链接而不是提交按钮。

打开“输入”标签并将代码更改为：

```
<input type="submit" name="wp-submit" id="wp-submit" value="Registratie" /> 
```

可能会奏效。

# iphone - iphone ipad 中的 iOS 6 定位

> ID：15174392
> 
> 赞同：0
> 
> 时间：2013-03-02T12:18:57.223
> 
> 标签：iphone, ipad, ios6

如何在 ios6 中为 iphone 和 ipad 设置方向，我尝试了以下编码，它没有显示任何响应。

//以下由于已弃用的问题而无法正常工作

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
if (toInterfaceOrientation==UIInterfaceOrientationMaskLandscapeRight)
  {
   self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"lhomescreen.png"]];
  }
if (toInterfaceOrientation==UIInterfaceOrientationMaskLandscapeLeft)
 {
  self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage     imageNamed:@"lhomescreen.png"]];
 }

 return YES;

} 
```

// ipad 和 iphone 的 ios6 编码

```
- (BOOL)shouldAutorotate
{
 return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{
return UIInterfaceOrientationMaskLandscape;
 self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"lhomescreen.png"]];
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
return UIInterfaceOrientationLandscapeLeft;
self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"lhomescreen.png"]];
} 
```

它没有显示任何变化。我只想在改变方向的同时改变背景？有人可以帮我解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:22:51.990

您必须将“return”作为最后一个语句。编辑：但是那里的颜色变化也是错误的，看看[UIViewController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)和 didRotateFromInterfaceOrientation：

# progress-bar - 从线程更新进度条和多个标签

> ID：15174395
> 
> 赞同：3
> 
> 时间：2013-03-02T12:19:27.517
> 
> 标签：progress-bar, javafx-2, javafx, worker

我正在开发一个 JavaFX 应用程序，让用户选择一个文件夹，然后解析它的内容以查找 MP3 文件并读取它们的元数据。

尽管我发现很难使用户界面看起来不错，但我还是使用 Swing 进行了这项工作。因此，我试图在 JavaFX 中做同样的事情。

在原始的 Swing 应用程序中，我创建了一个线程，它开始解析用户选择的文件夹中的文件。它是这样工作的：

1.  找出要解析的文件总数 - 文件数和文件夹数连续呈现在 UI 中的两个单独标签中
2.  解析所有文件以查找哪些是 MP3 文件并存储元数据 - 找到的 MP3 文件的数量连续显示在 UI 中的标签中

同时更新了一个标签，显示正在发生的事情的状态，以及一个反映上述两个步骤进度的进度条。第一步的进度占总进度的 30%，而第二步的进度占其余的 70%。

我找到了一个如何将任务绑定到进度条的示例，但我还需要更新四个标签：状态、文件数、文件夹数和 MP3 数。

我相信我可以使用 处理其中一个标签`updateMessage`，尽管我不知道如何管理其他三个标签。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-02T19:43:41.073

使用多个任务将问题分解为位。使用控制任务来监控子任务的状态和整体进度。使用[java.util.concurrent](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html)类来管理[任务](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html)执行、排序和数据结构，例如[LinkedBlockingDeque](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingDeque.html)。

这个推荐的解决方案不是解决您的问题的最简单的解决方案，但如果做得好应该可以提供良好的用户体验。

* * *

有关应用于不同问题的分而治之方法的示例，请参见以下代码示例：

1.  [将复杂的流程拆分为多个托管子任务](https://gist.github.com/jewelsea/5072743)。
2.  [演示了对多个工作人员按顺序或并行执行的管理](https://gist.github.com/jewelsea/4947946)。

* * *

一种潜在的简单替代方法是在整个过程中使用一个，并通过根据需要从您的任务代码`Task`调用将您的多个反馈值报告回您的 JavaFX UI 。`Platform.runLater`

有关此方法的示例，请参阅[任务文档部分“修改场景图的任务” 。](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html)

这是在一次`Platform.runLater`调用中一次更新多个标签的东西。

```
Platform.runLater(new Runnable() {
  @Override public void run() {
    status.setText("");
    folderCount.setText("");
    fileCount.setText("");
    mp3Count.setText("");
  }
}); 
```

还有一些类似于您的示例的代码：

```
import java.util.Arrays;
import java.util.List;
import static javafx.application.Application.launch;
import javafx.application.*;
import javafx.beans.value.*;
import javafx.concurrent.Task;
import javafx.event.*;
import javafx.scene.*;
import javafx.scene.control.*;
import javafx.scene.layout.*;
import javafx.stage.Stage;

public class Mp3Finder extends Application {
  final Label status = new Label();
  final Label folderCount = new Label();
  final Label fileCount = new Label();
  final Label mp3Count = new Label();

  @Override public void start(Stage stage) {
    final GridPane finderResults = new GridPane();
    finderResults.setPrefWidth(400);
    finderResults.setVgap(10);
    finderResults.setHgap(10);
    finderResults.addRow(0, new Label("Status: "),    status);
    finderResults.addRow(1, new Label("# Folders: "), folderCount);
    finderResults.addRow(2, new Label("# Files: "),   fileCount);
    finderResults.addRow(3, new Label("# mp3s: "),    mp3Count);

    final Button finderStarter = new Button("Find mp3s");
    finderStarter.setOnAction(new EventHandler<ActionEvent>() {
      @Override public void handle(ActionEvent t) {
        startMp3Finder(finderStarter);
      }
    });

    VBox layout = new VBox(10);
    layout.setStyle("-fx-background-color: cornsilk; -fx-padding: 10; -fx-font-size: 16;");
    layout.getChildren().setAll(finderStarter, finderResults);
    stage.setScene(new Scene(layout));
    stage.show();
  }

  private void startMp3Finder(final Node starterNode) {
    starterNode.setDisable(true);

    Mp3FinderTask task = new Mp3FinderTask(status, folderCount, mp3Count);
    task.runningProperty().addListener(new ChangeListener<Boolean>() {
      @Override public void changed(ObservableValue<? extends Boolean> ov, Boolean wasRunning, Boolean isRunning) {
        if (!isRunning) {
          starterNode.setDisable(false);
        }
      }
    });

    final Thread thread = new Thread(task , "mp3-finder");
    thread.setDaemon(true);
    thread.start();
  }

  private class Mp3FinderTask extends Task<List<String>> {
    private final Label status;
    private final Label folderCount;
    private final Label mp3Count;

    public Mp3FinderTask(Label status, Label folderCount, Label mp3Count) {
      this.status = status;
      this.folderCount = folderCount;
      this.mp3Count = mp3Count;
    }

    @Override protected List<String> call() throws Exception {
      initFinderResults();

      updateLabelLater(status, "Finding Folders");
      setProgressIndicator(folderCount);
      List folders = findFolders();
      updateLabelLater(folderCount, folders.size() + "");

      updateLabelLater(status, "Finding Files");
      setProgressIndicator(fileCount);
      List files = findFiles(folders);
      updateLabelLater(fileCount, files.size() + "");

      updateLabelLater(status, "Find mp3s");
      setProgressIndicator(mp3Count);
      List mp3s = findMp3s(files);
      updateLabelLater(mp3Count, mp3s.size() + "");

      updateLabelLater(status, "All mp3s Found");

      return mp3s;
    }

    void updateLabelLater(final Label label, final String text) {
      Platform.runLater(new Runnable() {
        @Override public void run() {
          label.setGraphic(null);
          label.setText(text);
        }
      });
    }

    private List<String> findFolders() throws InterruptedException { 
      // dummy implementation
      Thread.currentThread().sleep(1000);
      return Arrays.asList("folder1", "folder2", "folder3");
    }

    private List<String> findFiles(List<String> folders) throws InterruptedException {
      // dummy implementation
      Thread.currentThread().sleep(1000);
      return Arrays.asList("file1", "file2", "file3", "file4", "file5");
    }

    private List<String> findMp3s(List<String> files) throws InterruptedException {
      // dummy implementation
      Thread.currentThread().sleep(1000);
      return Arrays.asList("music1", "music2");
    }

    private void initFinderResults() {
      Platform.runLater(new Runnable() {
        @Override public void run() {
          status.setText("");
          folderCount.setText("");
          fileCount.setText("");
          mp3Count.setText("");
        }
      });
    }

    private void setProgressIndicator(final Label label) {
      Platform.runLater(new Runnable() {
        @Override public void run() {
          label.setGraphic(new ProgressIndicator());
        }
      });
    }
  }

  public static void main(String[] args) { launch(args); }
} 
```

![mp3finder](../Images/d536a2f46d2c4c29bbc63c216fc300bd.png)

* * *

[有关更多信息，请参阅有关使用 Platform.runLater 和从不同线程访问 UI](https://stackoverflow.com/a/15160824/1155209)的 StackOverflow 问题，以及指向有关 JavaFX 中的并发性的更多资源的链接。

# silverlight - 如何将两个不同的属性绑定到文本块文本和前景？

> ID：15174397
> 
> 赞同：0
> 
> 时间：2013-03-02T12:20:15.257
> 
> 标签：silverlight, xaml, data-binding, windows-phone

我为多个列表框项和里面的一些文本块创建了一个模板。在设置中，用户可以将应用程序的背景更改为黑色或白色（然后文本块的前景色应相应更改为相反的颜色）。如何将文本块文本**绑定****到一个属性**（项目列表（observablecollection））和**前景到另一个属性**（带有颜色转换器），它不在同一个数据上下文中（但在设置数据上下文中）？

我正在尝试做的事情：

```
<DataTemplate x:Key="ArticleItemTemplateClassic">
        <Grid>
            <!-- ... --->
             <TextBlock Text="{Binding Description}"
                        Foreground="{Binding SettingsFile.BlackBackgroundEnabled,
                        Converter={StaticResource InverseBackgroundColorConverter}}"/>
            <!-- The Context of the Foreground (SettingsFile.BlackBackgroundEnabled) -->
            <!-- should be not the same as where I bind Description -->
            </StackPanel>
            <!-- ... --->
        </Grid>
    </DataTemplate> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T17:25:45.763

`DataContext`如果您被迫这样做，您可以为每个项目显式指定不同的。虽然我不确定为什么会有两个与外观一致的属性`DataTemplate`位于不同的容器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T18:53:15.640

为此，您需要为 Foreground 属性指定绑定的来源。这可以通过多种方式完成，但一个示例是将 Settings 类公开为资源。

例如：

```
<Grid x:Name="LayoutRoot">
    <Grid.Resources>
        <!-- If you want to use SettingsFile as a static, you might want to expose an accessor/wrapper class for it here instead. -->
        <settings:SettingsFile x:Name="SettingsFileResource" />
    </Grid.Resources>
    <ListBox ItemsSource="{Binding MyItems}">
        <ListBox.ItemTemplate>
            <DataTemplate x:Key="ArticleItemTemplateClassic">
                <Grid>
                    <!-- ... -->
                    <TextBlock Text="{Binding Description}"
                               <!-- Now change your Binding Path to the target property, and set the source to the resource defined above. -->
                    Foreground="{Binding BlackBackgroundEnabled, Source={StaticResource SettingsFileResource}, Converter={StaticResource InverseBackgroundColorConverter}}"/>

                    <StackPanel />
                    <!-- ... -->
                </Grid>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid> 
```

或者，为此使用 AttachedProperty 可能会更干净。例如：

```
public static bool GetBlackBackgroundEnabled(DependencyObject obj)
{
    return (bool)obj.GetValue(BlackBackgroundEnabledProperty);
}

public static void SetBlackBackgroundEnabled(DependencyObject obj, bool value)
{
    obj.SetValue(BlackBackgroundEnabledProperty, value);
}

// Using a DependencyProperty as the backing store for BlackBackgroundEnabled.  This enables animation, styling, binding, etc...
public static readonly DependencyProperty BlackBackgroundEnabledProperty =
    DependencyProperty.RegisterAttached("BlackBackgroundEnabled", typeof(bool), typeof(Control), new PropertyMetadata(false, (s, e) =>
        {
            Control target = s as Control;
            SolidColorBrush brush = new SolidColorBrush();

            // Logic to determine the color goes here
            if (GetBlackBackgroundEnabled(target))
            {
                brush.Color = something;
            }
            else
            {
                brush.Color = somethingElse;
            }

            target.Foreground = brush;
        })); 
```

然后你会像这样使用它：

```
<TextBlock settings:SettingsFile.BlackBackgroundEnabled="True" /> 
```

# java - 错误 tomcat-jdbc.jar 在 tomcat6 中启动应用程序

> ID：15174403
> 
> 赞同：1
> 
> 时间：2013-03-02T12:21:20.697
> 
> 标签：java, mysql, tomcat6

我试图通过 Mysql 连接在 tomcat6 中部署 web 应用程序，我手动将 tomcat-jdbc 文件 v1.1.0.1 上传到`tomcat/lib/`但应用程序无法启动，

在此处复制了日志文件的最后几行：

```
Mar 2, 2013 11:10:06 AM org.apache.catalina.core.StandardContext start
SEVERE: Context [] startup failed due to previous errors
Mar 2, 2013 11:15:36 AM org.apache.naming.NamingContext lookup
WARNING: Unexpected exception resolving reference
java.sql.SQLException: com.mysql.jdbc.Driver
        at org.apache.tomcat.jdbc.pool.PooledConnection.connectUsingDriver(PooledConnection.java:243)
        at org.apache.tomcat.jdbc.pool.PooledConnection.connect(PooledConnection.java:176)
        at org.apache.tomcat.jdbc.pool.ConnectionPool.createConnection(ConnectionPool.java:653)
        at org.apache.tomcat.jdbc.pool.ConnectionPool.borrowConnection(ConnectionPool.java:595)
        at org.apache.tomcat.jdbc.pool.ConnectionPool.init(ConnectionPool.java:458)
        at org.apache.tomcat.jdbc.pool.ConnectionPool.<init>(ConnectionPool.java:130)
        at org.apache.tomcat.jdbc.pool.DataSourceProxy.createPool(DataSourceProxy.java:99)
        at org.apache.tomcat.jdbc.pool.DataSourceFactory.createDataSource(DataSourceFactory.java:499)
        at org.apache.tomcat.jdbc.pool.DataSourceFactory.getObjectInstance(DataSourceFactory.java:222)
        at org.apache.naming.factory.ResourceFactory.getObjectInstance(ResourceFactory.java:140)
        at javax.naming.spi.NamingManager.getObjectInstance(NamingManager.java:304)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:793)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:140)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:781)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:153)
        at org.apache.catalina.core.NamingContextListener.addResource(NamingContextListener.java:1028)
        at org.apache.catalina.core.NamingContextListener.createNamingContext(NamingContextListener.java:637)
        at org.apache.catalina.core.NamingContextListener.lifecycleEvent(NamingContextListener.java:238)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4612)
        at org.apache.catalina.manager.ManagerServlet.start(ManagerServlet.java:1276)
        at org.apache.catalina.manager.HTMLManagerServlet.start(HTMLManagerServlet.java:625)
        at org.apache.catalina.manager.HTMLManagerServlet.doGet(HTMLManagerServlet.java:136)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.filters.CsrfPreventionFilter.doFilter(CsrfPreventionFilter.java:194)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:563)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:861)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:247)
        at org.apache.tomcat.jdbc.pool.PooledConnection.connectUsingDriver(PooledConnection.java:236)
        ... 40 more
Mar 2, 2013 11:15:36 AM org.apache.catalina.core.NamingContextListener
addResource
WARNING: Failed to register in JMX: javax.naming.NamingException:
com.mysql.jdbc.Driver
Mar 2, 2013 11:15:36 AM org.apache.catalina.core.StandardContext start
SEVERE: Error listenerStart
Mar 2, 2013 11:15:36 AM org.apache.catalina.core.StandardContext start
SEVERE: Context [] startup failed due to previous errors 
```

====

这是我的 contex.xml 文件

```
<Resource name="jdbc/AmbraDS"
    auth="Container"
    type="javax.sql.DataSource"
    factory="org.apache.tomcat.jdbc.pool.DataSourceFactory"
    validationQuery="SELECT 1"
    testOnBorrow="true"
    driverClassName="com.mysql.jdbc.Driver"
    username="test"
    password="test"
    url="jdbc:mysql://localhost:3306/test"/> 
```

使用的jar文件是：

```
 apache-tomcat-jdbc-1.1.0.1-src 
```

似乎与 MySQL 连接有问题，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:26:50.167

[从http://dev.mysql.com/downloads/connector/j/](http://dev.mysql.com/downloads/connector/j/)下载 jdbc 驱动程序

它需要在 catalinahome/lib

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T12:24:01.977

我认为存在一些冲突。例如，如果您有 2 个位置，一个有 JDBC 驱动程序，而另一个没有，那么如果您的类加载器从第一个位置加载并且第一个位置的某个类想要使用驱动程序 - 驱动程序不存在。因此，请查找使用您的驱动程序的重复 JAR

# java - 从java中的网页获取信息

> ID：15174406
> 
> 赞同：0
> 
> 时间：2013-03-02T12:21:40.210
> 
> 标签：java, html, extract

抱歉，如果这是一个大问题，但我只是想找人告诉我要在哪个方向学习更多，因为我不知道，我对 HTML 和 Java 有非常基本的了解。

我家里有人必须将供应商的每件产品复制到他自己的网上商店。问题是他需要手动把所有的文章都一个一个的放进去，我正在想办法用一个程序来代替他。

我已经开始计算价格了，我现在需要的只是产品信息。

[http://pastebin.com/WVCy55Dj](http://pastebin.com/WVCy55Dj)

从第 1009 行到 1030 左右。我需要三个跨度的 3 个单独的字符串，其类为“CatalogusListDetailTest” 从第 987 行到 1000 左右。我需要一种获取所有这些图像的方法，它位于网站 www.flamingo.be/ Images/Products/Large/"productID"(our first string).jpg 有时会有一个 _A ， _B 正如你在这个例子中看到的那样，所以我正在寻找一种方法来检查是否存在并获取这些图像。

如果我能走到这一步，我将非常感激！我会自己解决剩下的问题，很抱歉这篇文章很长，想提供尽可能多的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:29:01.410

您可以查看 HTML parser lib [Jsoup](http://jsoup.org/)，文档参考：http: [//jsoup.org/cookbook/](http://jsoup.org/cookbook/)

编辑：获取产品代码的代码：

```
 Elements classElements = document.getElementsByClass("CatalogusListDetailTextTitel");
            for (Element classElement : classElements) {
                if (classElement.text().contains("Productcode :")) {
                System.out.println(classElement.parent().ownText());
                }
            } 
```

上面的代码将打印所有产品代码，而不是`document`您可能必须使用元素来获得一致的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T15:07:55.553

您可以根据需要使用[JTidy](http://jtidy.sourceforge.net)。

代码示例：

```
public void downloadSinglePage(String pageLink, String targetDir) throws XPathExpressionException, IOException {
                URL url = new URL(pageLink);
                BufferedInputStream page = new BufferedInputStream(url.openStream());

                Tidy tidy = new Tidy();
                tidy.setQuiet(true);
                tidy.setShowWarnings(false);
                Document response = tidy.parseDOM(page, null);

                XPathFactory factory = XPathFactory.newInstance();
                XPath xPath=factory.newXPath();
                NodeList nodes = (NodeList)xPath.evaluate(IMAGE_PATTERN, response, XPathConstants.NODESET);

                String imageURL = (String) nodes.item(0).getNodeValue();
                saveImageNIO(imageURL, targetDir);

        } 
```

在哪里

```
IMAGE_PATTERN = "///a/img/@src"; 
```

但模式取决于图像如何嵌入到页面 HTML 代码中。

[使用NIO](http://en.wikipedia.org/wiki/New_I/O)保存图像的方法：

```
public void saveImageNIO(String imageURL, String targetDir, String imageName) throws IOException {
            URL url = new URL(imageURL);
            ReadableByteChannel rbc = Channels.newChannel(url.openStream());
            FileOutputStream fos = new FileOutputStream(targetDir + "/" + imageName + ".jpg");
            fos.getChannel().transferFrom(rbc, 0, 1 << 24);
        } 
```

# php - gzinflate：最大。避免内存不足的空间？

> ID：15174408
> 
> 赞同：4
> 
> 时间：2013-03-02T12:22:02.873
> 
> 标签：php, gzip, out-of-memory

使用 解压缩时`gzinflate`，我发现 - 在某些情况下 - 以下代码会导致内存不足错误。[在 32 位 Linux（ EC2上的](http://en.wikipedia.org/wiki/Amazon_ec2)[Amazon Linux AMI](http://aws.amazon.com/amazon-linux-ami/) ）上使用 PHP 5.3.20 进行了测试。

```
$memoryLimit = Misc::bytesFromShorthand(ini_get('memory_limit')); // 256MB
$memoryUsage = memory_get_usage(); // 2MB in actual test case
$remaining = $memoryLimit - $memoryUsage;
$factor = 0.9;
$maxUncompressedSize = max(1, floor($factor * $remaining) - 1000);
$uncompressedData = gzinflate($compressedData, $maxUncompressedSize); 
```

虽然，我保守地计算了大小`$maxUncompressedSize`，希望给`gzinflate`足够的内存，我仍然得到：

> 致命错误：第 123 行的 foo.php 中允许的内存大小为 268435456 字节已用尽（尝试分配 266143484 字节）

`$factor`在这种情况下，将from的值更改为 时`0.9`，`0.4`错误就会消失。在其他情况下`0.9`是可以的。

我想知道：

**错误的原因真的是`gzinflate`需要两倍以上的未压缩数据空间吗？可能还有其他原因吗？`$remaining`剩余的内存真的可以供应用程序使用吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:01:54.603

这确实是可能的。恕我直言，问题在于`memory_get_usage(true)`.

using`true`应该给出更高的内存使用值，因为应该考虑到一切。

# c# - 如何在 Mac OS 中注册服务？

> ID：15174409
> 
> 赞同：4
> 
> 时间：2013-03-02T12:22:04.690
> 
> 标签：c#, macos, monomac

我正在试验 Mono、MonoMac 和 C#。我尝试编写一个基于 Mac OS 服务的简单应用程序。我遵循了 Apple 关于服务提供商实施的[开发人员文档](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/SysServices/Articles/providing.html)。

我的问题是：如何注册服务。在 Objective-C 中，我会调用 NSApplication 的 setServicesProvider 方法。但是在MonoMac中好像没有这样的方法。这是正确的吗？在单声道文档中，我发现 NSApplication 应该有一个带有相应设置器的服务提供者。但调用 SetServicesProvider 如下：

```
MyClass myClass = new MyClass(); 
NSApplication.SetServicesProvider(myClass); 
```

导致以下错误：

```
Error CS0117: `MonoMac.AppKit.NSApplication' does not contain a definition for `SetServicesProvider' (CS0117) 
```

这里有什么问题？ServicesProvider 属性是目前尚未实现的 10% 的 AppKit 的一部分吗（MonoMac 项目页面上的状态部分在“AppKit（大约 10% 有待完成）下显示”）？

或者，我尝试按照苹果开发人员的示例中的建议找到一个类 NSRegisterServicesProvider 。但是我找不到这样的课程。

有人知道如何使用 MonoMac 注册服务吗？你能指点我一个解决方案，一个例子吗？

我正在使用 MonoDevelop 3.1.1 和`Xamarin.Mac`开发插件（版本 3.1.1）。后者至少是加载项管理器中所述的内容。“关于 MonoDevelop”中的版本信息选项卡显示“Xamarin.Mac：未安装”。但我认为后者是不对的，因为例如我可以`NSApplication`使用`MonoMac.AppKit`.

我在 Mono - OSX 邮件列表上问了这个问题，但不幸的是，到目前为止我没有得到任何回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-02T15:03:08.083

这由`Xamarin.Mac`. 尝试;

`NSApplication.SharedApplication.ServicesProvider = new myClass()`

我在这些服务中发现的最困难的事情是让`info.plist`声明正确。

# c# - 将视图模型重塑为模型

> ID：15174411
> 
> 赞同：0
> 
> 时间：2013-03-02T12:22:14.130
> 
> 标签：c#, asp.net-mvc, viewmodel

在客户端，我以针对视图需求定制的方式显示数据。

当用户保存数据并将其发送到服务器时，我不想重塑数据

客户端以适应我的域的要求。

要将我的 ViewModel 重塑为我的模型，我可以这样做：

```
var periods = periodListViewModel.CellViewModels
                                 .SelectMany(c => c.Rows)
                                 .Select(
                                     p => 
                                        new Period { LessonNumber = p.LessonNumber }); 
```

此代码必须放在正确职责的地方。

这些是我的课：

```
 public class SavePeriodListViewModel
    {
        public int SchoolyearId { get; set; }
        public IEnumerable<CellViewModel> CellViewModels { get; set; }
    }

public class CellViewModel
    {
        public CellViewModel()
        {
            Rows = new List<RowViewModel>();
        }
        public List<RowViewModel> Rows { get; set; }
    }

public class RowViewModel
{
        public string DayName { get; set; }
        public string SchoolclassCode { get; set; }
        public string Content { get; set; }
        public int LessonNumber { get; set; }
}

public class LessonplannerResponse
{
        public int SchoolyearId { get; set; }
        public IEnumerable<Period> Periods { get; set; }
} 
```

我的模型 Period 所需的所有数据都在 RowViewModel 中。

我需要将我的 SavePeriodListViewModel 重塑为 LessonplannerResponse

当然 AutMapper 可以处理 RowViewModel 到 Period 的映射，但我的问题不在那个领域。

AutoMapper 是映射而不是重塑集合。

我应该把 linq 重塑代码放在哪里？或者更一般地问我应该在哪里把这样的代码放在 asp.net mvc 中？

*   客户端？
*   控制器动作？

service 不是选项，因为它不应该知道视图模型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T18:39:45.660

看起来映射需要在控制器内部进行。我希望控制器动作被定义为：

```
public ActionResult SomeAction(SavePeriodListViewModel model)
{
    // transform from model to LessonplannerResponse

    // validate model

    // do something with the model and return a view
} 
```

从我们对您的流程的了解来看，进行转换似乎不是服务的责任，也不是客户端的责任——尤其是因为您已经排除了客户端在你的问题中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T12:36:52.900

这是我如何对 ViewModel 执行此操作的示例，您也可以通过签证来实现它。

```
 Mapper.CreateMap<Faq, FaqViewModel>()
                  .ForMember(x => x.Answer, opt => opt.MapFrom(src => src.Answer))
                  .ForMember(x => x.Question, opt => opt.MapFrom(src => src.Question));

  var sourceOfModels = _repository.GetFaqListByAppId(id);
  var resultOfViewModels = Mapper.Map<List<Faq>, List<FaqViewModel>>(list.ToList()); 
```

这对我来说很完美。

# pascal - 如何将功能分配给操作员？

> ID：15174412
> 
> 赞同：0
> 
> 时间：2013-03-02T12:22:16.003
> 
> 标签：pascal, operator-keyword

所以我的单位有一个非常简单的功能：

```
Function AzonosE(Const n1,n2:TNap):Boolean;
Begin
    AzonosE:=n1=n2;
End; 
```

我想将 ('=') 运算符分配给这个函数，这样我就可以在我的主程序中以这种方式使用这个函数：`if n1=n2`(n1,n2:TNap;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:18:05.553

这不是标准的 Pascal 功能。OTOH，afaik 也不是“CONST”。您需要更好地指定您的方言/编译器。

对于 Free Pascal，Niculare 对相关手册页的引用是正确的。虽然它是 afaik FPC 特定的。对于更实际的应用程序，最好查看定义复杂类型的 RTL 中的 ucomplex 单元。

Delphi afaik 只允许它作为结构化类型的一部分：

[http://docwiki.embarcadero.com/RADStudio/XE3/en/Operator_Overloading_%28Delphi%29](http://docwiki.embarcadero.com/RADStudio/XE3/en/Operator_Overloading_%28Delphi%29)

# ios - 在 NSArray 中获取重复项

> ID：15174420
> 
> 赞同：4
> 
> 时间：2013-03-02T12:23:04.660
> 
> 标签：ios, objective-c, cocoa-touch, nsarray

我有一个 NSArray ，其中包含一些重复的对象。我想打印哪些对象被重复，例如：

```
NSArray * array = [NSArray arrayWithObjects: A, B, C, A, B]; 
```

现在我想在我的控制台中打印，`A`因为`B`这些是重复的。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-02T12:29:46.903

你可以用`NSCountedSet`这个。您可以将所有对象添加到计数集中，然后使用`countForObject`: 方法找出每个对象出现的频率。阅读有关[NSCountedSet](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSCountedSet_Class/Reference/Reference.html)以供进一步参考

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-02T12:29:31.883

使用 NSCountedSet 并且只打印返回数字>1 的`countForObject:`元素

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-02T12:30:48.523

它可能远非完美，但它有效

```
NSArray *array = [NSArray arrayWithObjects:@"a", @"b", @"b", @"v", @"f", @"f", nil];

NSMutableArray *un_array = [NSMutableArray array];
NSMutableArray *dupArray = [NSMutableArray array];

for (id obj in array)
{
    if (![un_array containsObject:obj])
        [un_array addObject:obj];
    else
        [dupArray addObject:obj];
}

NSLog(@"DUPLICATES:");
for (id obj in dupArray)
    NSLog(@"%@", [obj description]); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-02T13:45:04.370

另一种方法是对数组进行排序并查找相邻的重复项。可能比使用散列集方法慢一点，但相同的基本“大 O”。

# c# - 扩展 HttpWebRequest

> ID：15174421
> 
> 赞同：5
> 
> 时间：2013-03-02T12:23:08.573
> 
> 标签：c#, .net, httpwebrequest

```
class AdvancedWebRequest : HttpWebRequest {
    private static readonly ILog log = log4net.LogManager.GetLogger(typeof(AdvancedWebRequest));

    public AdvancedWebRequest(string url, CookieContainer cookies = null) {
        Create(url);
        UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.97 Safari/537.22";
        Referer = Address.AbsoluteUri;

        if (cookies == null) {
            CookieContainer = Program.request.CookieContainer;
        } else {
            CookieContainer = cookies;
        }
    }
} 
```

这是我想做的事情，所以基本上得到已经设置了一些变量的 HttpWebRequest，所以我不能总是自己设置它们。

得到错误：

```
'System.Net.HttpWebRequest.HttpWebRequest()' is obsolete: 'This API supports the .NET Framework infrastructure and is not intended to be used directly from your code.' \Extensions\AdvancedWebRequest.cs   14  10 
```

有什么建议，不能`HttpWebRequest`真正扩展吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T09:47:13.143

您可以使用这样的扩展方法：

```
public static DoRequest(this HttpWebRequest req){
//do something
} 
```

然后你可以像这样调用这个方法：

```
webrequest.DoRequest(); 
```

有关更多信息，请查看 MSDN 页面：http: [//msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T12:38:34.820

你不能继承，`HttpWebRequest`但你可以继承`WebRequest`

[在此处](https://stackoverflow.com/questions/400565/is-there-any-way-to-inherit-a-class-without-constructors-in-net)查看类似问题的答案。

# ios - 使用 NSPredicate 过滤文件路径

> ID：15174426
> 
> 赞同：1
> 
> 时间：2013-03-02T12:23:52.563
> 
> 标签：ios, regex, filtering, nspredicate

我正在尝试过滤格式为 [number]_[number].png 的文件路径数组，并仅获取以特定数字开头的文件路径，例如 1。

这是我尝试过的：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:
                            @"self MATCHES '%@/1_[0-9]+.png'",
                            [[[NSBundle mainBundle] resourcePath]
                                stringByAppendingPathComponent:@"Images"]];

NSArray *files = [[[NSBundle mainBundle] pathsForResourcesOfType:@"png"
                                         inDirectory:@"Images"] 
                     filteredArrayUsingPredicate:predicate]; 
```

我得到一个空数组。我尝试使用 LIKE 而不是 MATCHES。我尝试使用 [cd] 标志，但它应该没关系。不过我总是得到一个空数组。它与正则表达式有关吗？

* * *

编辑：

似乎问题出在 predicateWithFormat 上。

我认为它得到一个格式字符串，后跟要替换为格式字符串的参数。它不是那样工作的。它忽略参数，并且在格式字符串中没有任何内容被替换。

所以解决方法如下：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:
                          [NSString stringWithFormat:
                           @"self MATCHES '%@/1_[0-9]+.png'",
                           [[[NSBundle mainBundle] resourcePath]
                              stringByAppendingPathComponent:@"Images"]]];

NSArray *files = [[[NSBundle mainBundle] pathsForResourcesOfType:@"png"
                                         inDirectory:@"Images"] 
                    filteredArrayUsingPredicate:predicate]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:44:38.857

看起来问题是您的第一行和第二行代码之间存在冲突。第一行设置你的`NSPredicate`，所以它的格式如下：

```
Images/1_#.png 
```

在您的第二行中，您告诉 iOS 在`Images`目录中查找您的谓词。通过这样做，您的最终谓词/路径如下所示：

```
Images/Images/1_#.png 
```

删除将目录`NSPredicate`附加`Images/`到谓词开头的部分。

我上面描述的问题可能不是问题。代码的另一个可能问题是您的谓词格式不正确。在原始代码中，您忘记在NSPredicate`+`之后添加`1``[0-9]``1`

您的代码应如下所示：

```
NSString *filter = @"1+_[0-9]+.png";
NSPredicate *predicate = [NSPredicate predicateWithFormat: @"self MATCHES %@", filter];
NSArray *files = [[[NSBundle mainBundle] pathsForResourcesOfType:@"png" inDirectory:@"Images"] filteredArrayUsingPredicate:predicate]; 
```

当我在我的应用程序中测试上面的代码时，NSPredicate 成功过滤了一个 NSString。

您可能还想看看这个链接：[http ://useyourloaf.com/blog/2010/07/27/filtering-arrays-with-nspredicate.html](http://useyourloaf.com/blog/2010/07/27/filtering-arrays-with-nspredicate.html)

# html - Twitter bootstrap 崩溃但无法在移动视图中正确显示

> ID：15174432
> 
> 赞同：0
> 
> 时间：2013-03-02T12:24:25.653
> 
> 标签：html, css, twitter-bootstrap

我正在设计一个网站，但是当我在移动视图上查看它时，轮播不会以 100% 的宽度显示，而且导航偏移也会设置一些。

这是一张图片。

[http://oi45.tinypic.com/30dbh91.jpg](http://oi45.tinypic.com/30dbh91.jpg)

我的代码几乎是基本的 Bootstrap CSS，我不知道如何修复移动视图，以便它可以正确显示`.collapse`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:45:00.850

问题不在于轮播，而在于导航栏，它太宽了。

在看到左下角的网站 URL 之前，我无法弄清楚这一点。您确实应该在您的问题中附加一些相关的 CSS，并且可能是指向该站点的链接。在大多数情况下，提供图像作为参考是不够的。

在您的 CSS 中添加：（*在第 45 行，您将其留空）*

```
.navbar-wrapper .navbar {
    width: 100%;
} 
```

# c++ - 从文件中获取特定模式并读取文件

> ID：15174434
> 
> 赞同：1
> 
> 时间：2013-03-02T12:24:45.473
> 
> 标签：c++

我有包含一些模式的文本文件（首先我想使用 awk 命令将文本文件转换为 C++）。下面的解决方案适用于我们一个单独的文件。

[https://stackoverflow.com/questions/15151055/truncate-file-in-linux](https://stackoverflow.com/questions/15151055/truncate-file-in-linux)

但是我们得到了多个文件，这些文件也包含不同的模式。所以我们需要为每个文件编写 awk 命令，这不是通用的解决方案。

比我在 c++（linux 环境）中找到用于模式匹配的词法分析器（Flex）之后但我遇到了一些问题并且可以编写词法分析器文件。所以我想我们在 linux 平台上是否有任何开源库用于文本文件中的模式匹配并转换为 xml 文件。（谷歌正在进行的工作，但没有任何具体的解决方案）。

简而言之，1）将模式搜索到文本文件（目前，我们在 C++ 中使用 awk 命令（以防万一） 2）将表格格式文件读入 C++。

我希望我能够传达我的信息。

# java - 渲染和编辑一个 JButton 以在 Jtable 中携带一个链接

> ID：15174437
> 
> 赞同：0
> 
> 时间：2013-03-02T12:25:04.170
> 
> 标签：java, swing, jtable, jbutton

我想在我的 Jtable 中添加一个列，允许用户在桌面上保存文件 pdf 我在谷歌上搜索，我发现我可以使用“自定义 CellRenderer java”和“自定义 CellEditor java”并使用 JButton 进行渲染和编辑携带一个链接。但我找不到开始的方式，我该怎么做

我有这个方法可以成功显示我的 jTbale

```
public void ListeAlll(){

    DefaultTableModel tabla = new DefaultTableModel();
    Activiter ac = new Activiter();
    ArrayList<Activiter> lista2 = new ArrayList();
    lista2 = ac.ListeAll();
    tabla.addColumn("Nom");
    tabla.addColumn("Prenom");
    ....
    ....
    tabla.setRowCount(lista2.size());

    int i=0;
    for (Activiter x : lista2){

        tabla.setValueAt(x.getnom(), i, 0);
        tabla.setValueAt(x.getprenom(), i, 1);
        ...

        i++;
      // 
}
    this.jTable2.setModel(tabla);

} 
```

请帮忙，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:27:21.163

我推荐使用[`ButtonColumn`](http://www.camick.com/java/source/ButtonColumn.java)Rob Camick 的类：http: [//tips4java.wordpress.com/2009/07/12/table-button-column/](http://tips4java.wordpress.com/2009/07/12/table-button-column/)

基本思想确实是让该列的渲染器和编辑器成为`JButton`

它工作得非常好，并且非常易于使用。它不依赖于外部库。

# google-app-engine - Google App Engine 日志记录级别如何工作？

> ID：15174438
> 
> 赞同：0
> 
> 时间：2013-03-02T12:25:19.827
> 
> 标签：google-app-engine

这对我来说零意义：

**代码**

```
Logger l = Logger.getLogger("SomeClassName");
l.log(Level.SEVERE, "-------start------");      
l.log(Level.INFO, "INFO Two... Two...");
l.log(Level.WARNING, "WARNING Two... Two...");
l.log(Level.SEVERE, "SEVERE Two... Two...");
l.log(Level.CONFIG, "CONFIG Two... Two...");
l.log(Level.FINEST, "FINEST Two... Two...");
l.log(Level.OFF, "OFF Two... Two...");
System.out.println("CONSOLE Two... Two...");
l.log(Level.SEVERE, "-------end------"); 
```

**结果**

![AppEngine 日志截图](../Images/363acebf8664c4a0ba9844a51704f99f.png)

“OFF”导致“ERROR”和“INFO”根本没有记录是怎么回事？此外，[文档](https://developers.google.com/appengine/docs/java/runtime#Logging)指出控制台输出也应记录为 INFO。没有发生。

# php - 转发到新的 php 页面

> ID：15174445
> 
> 赞同：0
> 
> 时间：2013-03-02T12:25:50.800
> 
> 标签：php

我有以下代码将某人登录到我的页面 - 我想弄清楚的是如何调整它，以便一旦它验证他们是一个好的登录名，它将他们转发到不同的页面。

```
session_name('wpLogin');
// Starting the session

session_set_cookie_params(2*7*24*60*60);
// Making the cookie live for 2 weeks

session_start();

if($_SESSION['id'] && !isset($_COOKIE['wpRemember']) && !$_SESSION['rememberMe'])
{
    // If you are logged in, but you don't have the wpRemember cookie (browser restart)
    // and you have not checked the rememberMe checkbox:

    $_SESSION = array();
    session_destroy();

    // Destroy the session
}

if(isset($_GET['logoff']))
{
    $_SESSION = array();
    session_destroy();

    header("Location: index.php");
    exit;
}

if($_POST['submit']=='Login')
{
    // Checking whether the Login form has been submitted

    $err = array();
    // Will hold our errors

    if(!$_POST['username'] || !$_POST['password'])
        $err[] = 'All the fields must be filled in!';

    if(!count($err))
    {
        $_POST['username'] = mysql_real_escape_string($_POST['username']);
        $_POST['password'] = mysql_real_escape_string($_POST['password']);
        $_POST['rememberMe'] = (int)$_POST['rememberMe'];

        // Escaping all input data

        $row = mysql_fetch_assoc(mysql_query("SELECT id,usr FROM tz_members WHERE usr='{$_POST['username']}' AND pass='".md5($_POST['password'])."'"));

        if($row['usr'])
        {
            // If everything is OK login

            $_SESSION['usr']=$row['usr'];
            $_SESSION['id'] = $row['id'];
            $_SESSION['rememberMe'] = $_POST['rememberMe'];

            // Store some data in the session

            setcookie('wpRemember',$_POST['rememberMe']);
        }
        else $err[]='Wrong username and/or password!';
    }

    if($err)
    $_SESSION['msg']['login-err'] = implode('<br />',$err);
    // Save the error messages in the session

    header("Location: index.php");
    exit; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:29:52.920

您需要使用该`header`功能。文档可以在这里找到：http: [//php.net/manual/de/function.header.php](http://php.net/manual/de/function.header.php)

简而言之，使用这个：

```
if($row['usr']) {
    // If everything is OK login

    $_SESSION['usr']=$row['usr'];
    $_SESSION['id'] = $row['id'];
    $_SESSION['rememberMe'] = $_POST['rememberMe'];

    // Store some data in the session

    setcookie('wpRemember',$_POST['rememberMe']);
    header("Location: index.php");
} 
```

请记住，`header`只有在向浏览器输出单点符号之前调用任何函数才能工作。

这包括`echo`PHP 标记之外的任何内容。另外，请注意，您的源文件的格式中没有 BOM，因为这也会导致`header`失败。

# c# - 使用正则表达式从 c# 中的单词中删除 #

> ID：15174449
> 
> 赞同：1
> 
> 时间：2013-03-02T12:26:07.040
> 
> 标签：c#, regex, c#-4.0

我想读取带有“#”附加到单词的文件我想从单词
**输入文件中删除它**

```
a, 00001740, 0.125, 0,     able#1
a, 00001740, 0.125, 0,     play#2
a, 00002098, 0,     0.75,  unable#1 
```

我想要以下没有**#**
**输出的格式应该是这个**

```
a, 00001740, 0.125,  0,      able
a, 00001740, 0 .125, 0,      play
a, 00002098, 0,      0.75,   unable 
```

我写下面的代码

```
TextWriter tw = new StreamWriter("D:\\output.txt");
private void button1_Click(object sender, EventArgs e)
        {
            if (textBox1.Text != "")
            {

                StreamReader reader = new StreamReader("D:\\input.txt"); 
                string line;
                while ((line = reader.ReadLine()) != null)
                {
                    Regex expression = new Regex(@"\b\w+(?=#\d*\b)");
                    var results = expression.Matches(reader.ToString())
                    foreach (Match match in results)
                    {

                        tw.Write(match);

                    }
                    tw.Write("\r\n");
                }
                tw.Close();
                reader.Close();
            }
            textBox1.Text = "";                    
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:29:19.167

利用`Regex.Replace()`

```
string result = Regex.Replace(input, "#.*", ""); 
```

*   [正则表达式替换（）](http://msdn.microsoft.com/en-us/library/e7f5w83z.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T12:44:14.777

您的整个代码可以替换为 3 行：

```
string txt = File.ReadAllText("D:\\input.txt");
txt = Regex.Replace(txt, "#.*?(\r\n|\n|$)", "$1");
File.WriteAllText("D:\\output.txt", txt); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T12:37:29.997

您可能希望将其写入其他文件，因为您在读取原始文件的内容时正在重写文件，如果您不想读取和缓存文件的全部内容。

另外，考虑这个例子：

```
int index = line.IndexOf("#");
if (index != -1)
{
    line = line.Substring(0, index - 1);
} 
```

在这里，您不必处理正则表达式，因此运行速度会更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T12:48:47.237

正则表达式替换可能是这里最好的选择。

```
 File.WriteAllLines("c:\\output.txt", File.ReadAllLines("c:\\input.txt").Select(line => Regex.Replace(line, "#.*",""))); 
```

或者可能`TakeWhile`

```
File.WriteAllLines("c:\\test24.txt", File.ReadAllLines("c:\\test.txt").Select(line => new string(line.TakeWhile(c => c != '#').ToArray()))); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T12:50:01.947

根据我的评论试试这个：

```
 string s = "a, 00001740, 0.125, 0,     able#1";
        string m = Regex.Replace(s, @"#\d$", ""); 
        //for more than one digit  @"#\d+$"
        Console.WriteLine(m);
        Console.ReadLine(); 
```

# c# - 通过 C# 和 SQL 更新日期数据类型时出错

> ID：15174460
> 
> 赞同：0
> 
> 时间：2013-03-02T12:27:26.920
> 
> 标签：c#, sql, database, datepicker

**（抱歉英语不好）**

嘿，我在尝试更新 Date 数据类型时遇到了问题。

这是我的 SQL 查询

```
UPDATE       Employees
SET                BirthDateEmp = '04/11/2012'
WHERE        (IdEmp = 1) 
```

所以我设置 day = 4 ，month = 11 和 year 2012

但是当我检查我的表时，它会在日期和月份之间切换，所以现在是第 11 天和第 4 个月。

我如果尝试设置这个日期'13/10/2012'（天 - 13 个月 - 10 年 -2012 年）我得到了错误，因为它试图输入：day-10 month-13，并且没有第 13 个月所以我得到错误

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:29:59.207

看起来您的 SQL 服务器需要美国格式的日期 (mm/dd/yyyy)。您需要让我们知道您使用的是什么数据库和操作系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T12:30:04.467

您的应用程序和数据库上的本地化设置彼此不兼容。

您的应用程序中似乎有（并且想要）英国日期格式（DD/MM/YYYY），但您的数据库中有美国日期格式（MM/DD/YYYY）。

您可以将数据库更改为以中性格式存储日期，然后更新您的应用程序以获取本地日期并将它们转换为这种中性格式，然后再存储到数据库中并在显示它们时从中转换。

您还应该将日期存储在日期（或日期时间）列中，而不是作为字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T12:31:55.247

问题是您使用的日期格式不明确，并且服务器上的文化不是您所期望的。

理想情况下，您希望使用类型化参数，并且永远不要将日期作为字符串处理。

如果您必须使用字符串，我发现以下格式最成功：yyyy-MM-dd

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-02T12:31:52.853

您可以通过代码更改日期数据类型的格式并检查查询

```
UPDATE       Employees
SET                BirthDateEmp = '11/04/2012'
WHERE        (IdEmp = 1) 
```

这将更新您的表，因为日期数据类型的默认格式是 SQL 中的 (MM/dd/yyyy)，因此请遵循此操作。

# java - ConcurrentHashMap 实现是否在删除操作中使用克隆？

> ID：15174461
> 
> 赞同：2
> 
> 时间：2013-03-02T12:27:46.000
> 
> 标签：java, list, collections, hashmap, java.util.concurrent

我正在阅读一篇[IBM DeveloperWorks 文章](http://www.ibm.com/developerworks/java/library/j-jtp08223/)以了解如何实现 ConcurrentHashMap。“删除操作”部分建议删除操作是一个两步过程：

1.  找到 Entry 元素并将其设为 null
2.  从头部到移除元素的链部分被克隆并连接到移除元素之后的链的其余部分。

不过我在这里有一个问题，因为我在[Docjar](http://www.docjar.com/html/api/java/util/concurrent/ConcurrentHashMap.java.html)中检查了相应的代码，但在`remove(Object key, int hash, Object value)`.

我不确定我是否遗漏了什么，或者实现与文章不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T12:59:51.833

线

```
head = new Entry(p.hash, p.key, p.value, head); 
```

进行克隆，它不是“Object.clone()”克隆，而是“复制构造函数”——这仍然是更一般意义上的克隆。

请注意，这行是在 10 年前的文章中，在当前的实现中找不到，这里的实现`remove(Object key, Object value)`完全不同。

# mysql - 从mysql的echo中剪切文本

> ID：15174465
> 
> 赞同：0
> 
> 时间：2013-03-02T12:27:57.843
> 
> 标签：mysql, bash

我有个问题。

这是我的 bash 脚本：

```
while read fieldA
do
  echo "$fieldA"
done < <(mysql --user root -proot test -Bse "SELECT description From Object LIMIT 1 
```

回声：

```
"Kościół z 1938 roku. Powstał ku czci żołnierzy niemieckich poległych w czasie I Wojny Światowej. Szczyt frontonu zdobiły trzy postacie: św. Brunona, krzyżaka i ninPo wojnie postacie te zatynkowano. W latach 70-tych w tym miejscu umieszczono mozaikę przedstawiającą Św. Brunona w otoczeniu atakujących go wojowników pruskich." 
```

但是在mysql中这个文本是：

```
'Kościół z 1938 roku. Powstał ku czci żołnierzy niemieckich poległych w czasie I Wojny Światowej. Szczyt frontonu zdobiły trzy postacie: św. Brunona, krzyżaka i niemieckiego żołnierza z karabinem w ręku.\r\n\r\nPo wojnie postacie te zatynkowano. W latach 70-tych w tym miejscu umieszczono mozaikę przedstawiającą Św. Brunona w otoczeniu atakujących go wojowników pruskich.' 
```

我认为问题在于“\r\n\r\n”

我想在 ECHO 中拥有与 mysql 相同的文本（所有 \r\n\r\n.

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:33:32.433

在 echo 中使用单引号，否则 \n\r 将是断行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T13:06:23.173

这取决于您在 mysql 列中的内容。

如果是回车换行对，则终端已经正确解释了这些字符。如果您想将它们显示为转义序列，您可以分别用字符`\`或`r`和`\`替换它们`n`。

如果您的字符串中有文字`\r\n`，即四个字符`\`,和`r`,那么您可以尝试禁用解释`\``n``-E`

```
echo -E "$fieldA" 
```

# c# - C#字符串的GetHashCode()是如何实现的？

> ID：15174477
> 
> 赞同：68
> 
> 时间：2013-03-02T12:29:04.190
> 
> 标签：c#, .net, string, hash, gethashcode

我只是好奇，因为我猜它会对性能产生影响。它是否考虑完整的字符串？如果是，那么长字符串会很慢。如果它只考虑字符串的一部分，它的性能会很差（例如，如果它只考虑字符串的开头，如果一个 HashSet 包含大部分相同的字符串，它的性能就会很差。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-03-02T16:10:19.217

当您有此类问题时，请务必获取[参考源代码。](http://referencesource.microsoft.com/#mscorlib/system/string.cs)它比您从反编译器中看到的要多得多。选择与您首选的 .NET 目标匹配的那个，该方法在版本之间发生了很大变化。我将在这里重现它的 .NET 4.5 版本，从 Source.NET 4.5\4.6.0.0\net\clr\src\BCL\System\String.cs\604718\String.cs 检索

```
 public override int GetHashCode() { 

#if FEATURE_RANDOMIZED_STRING_HASHING
            if(HashHelpers.s_UseRandomizedStringHashing)
            { 
                return InternalMarvin32HashString(this, this.Length, 0);
            } 
#endif // FEATURE_RANDOMIZED_STRING_HASHING 

            unsafe { 
                fixed (char *src = this) {
                    Contract.Assert(src[this.Length] == '\0', "src[this.Length] == '\\0'");
                    Contract.Assert( ((int)src)%4 == 0, "Managed string should start at 4 bytes boundary");

#if WIN32
                    int hash1 = (5381<<16) + 5381; 
#else 
                    int hash1 = 5381;
#endif 
                    int hash2 = hash1;

#if WIN32
                    // 32 bit machines. 
                    int* pint = (int *)src;
                    int len = this.Length; 
                    while (len > 2) 
                    {
                        hash1 = ((hash1 << 5) + hash1 + (hash1 >> 27)) ^ pint[0]; 
                        hash2 = ((hash2 << 5) + hash2 + (hash2 >> 27)) ^ pint[1];
                        pint += 2;
                        len  -= 4;
                    } 

                    if (len > 0) 
                    { 
                        hash1 = ((hash1 << 5) + hash1 + (hash1 >> 27)) ^ pint[0];
                    } 
#else
                    int     c;
                    char *s = src;
                    while ((c = s[0]) != 0) { 
                        hash1 = ((hash1 << 5) + hash1) ^ c;
                        c = s[1]; 
                        if (c == 0) 
                            break;
                        hash2 = ((hash2 << 5) + hash2) ^ c; 
                        s += 2;
                    }
#endif
#if DEBUG 
                    // We want to ensure we can change our hash function daily.
                    // This is perfectly fine as long as you don't persist the 
                    // value from GetHashCode to disk or count on String A 
                    // hashing before string B.  Those are bugs in your code.
                    hash1 ^= ThisAssembly.DailyBuildNumber; 
#endif
                    return hash1 + (hash2 * 1566083941);
                }
            } 
        } 
```

这可能超出了您的预期，我将对代码进行一些注释：

*   #if 条件编译指令使该代码适应不同的 .NET 目标。FEATURE_XX 标识符在其他地方定义，并在整个 .NET 源代码中关闭功能。当目标是32位版本的框架时定义WIN32，64位版本的mscorlib.dll是单独构建的，存放在GAC的不同子目录中。
*   s_UseRandomizedStringHashing 变量启用了散列算法的安全版本，旨在让程序员避免做一些不明智的事情，例如使用 GetHashCode() 为密码或加密等内容生成散列。它由app.exe.config 文件中[的条目启用](http://msdn.microsoft.com/en-us/library/jj152924.aspx)
*   *固定*语句保持索引字符串便宜，避免了常规索引器完成的边界检查
*   第一个 Assert 确保字符串按照应有的方式以零结尾，这是允许循环中优化所必需的
*   第二个 Assert 确保字符串与应为 4 的倍数的地址对齐，这是保持循环性能所必需的
*   循环是手动展开的，对于 32 位版本，每个循环消耗 4 个字符。转换为 int* 是将 2 个字符（2 x 16 位）存储在 int（32 位）中的技巧。循环之后的额外语句处理长度不是 4 的倍数的字符串。请注意，零终止符可能包含在散列中，也可能不包含，如果长度是偶数则不会。它查看字符串中的*所有*字符，回答您的问题
*   The 64-bit version of the loop is done differently, hand-unrolled by 2\. Note that it terminates early on an embedded zero, so doesn't look at all the characters. Otherwise very uncommon. That's pretty odd, I can only guess that this has something to do with strings potentially being very large. But can't think of a practical example
*   The debug code at the end ensures that no code in the framework ever takes a dependency on the hash code being reproducible between runs.
*   The hash algorithm is pretty standard. The value 1566083941 is a magic number, a prime that is common in a [Mersenne twister](http://en.wikipedia.org/wiki/Mersenne_twister).

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-02T12:34:07.660

检查源代码（由[ILSpy](http://ilspy.net/)提供），我们可以看到它确实迭代了字符串的长度。

```
// string
[ReliabilityContract(Consistency.WillNotCorruptState, Cer.MayFail), SecuritySafeCritical]
public unsafe override int GetHashCode()
{
    IntPtr arg_0F_0;
    IntPtr expr_06 = arg_0F_0 = this;
    if (expr_06 != 0)
    {
        arg_0F_0 = (IntPtr)((int)expr_06 + RuntimeHelpers.OffsetToStringData);
    }
    char* ptr = arg_0F_0;
    int num = 352654597;
    int num2 = num;
    int* ptr2 = (int*)ptr;
    for (int i = this.Length; i > 0; i -= 4)
    {
        num = ((num << 5) + num + (num >> 27) ^ *ptr2);
        if (i <= 2)
        {
            break;
        }
        num2 = ((num2 << 5) + num2 + (num2 >> 27) ^ ptr2[(IntPtr)4 / 4]);
        ptr2 += (IntPtr)8 / 4;
    }
    return num + num2 * 1566083941;
} 
```

# android - 如何在服务器端的手机应用程序中使用 json？

> ID：15174482
> 
> 赞同：0
> 
> 时间：2013-03-02T12:29:22.317
> 
> 标签：android, ios, json, https

我本月正在为 android 和 ios 开发一个新的应用程序。我需要构建与应用程序通信的服务器端。我读过最流行的交流方式是使用 json。我的问题是如何？用https发送它？你能给我一个真实的例子吗？它是如何工作的？它是安全的和安全的吗？谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:52:49.477

那里有多种选择。

**iOS**

1.  [NSJSON序列化](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)
2.  [SBJson](https://github.com/stig/json-framework/)
3.  如果您使用的是基于 REST 的API，请使用[RestKit](https://github.com/RestKit/RestKit)

**安卓**

[检查这个答案](https://stackoverflow.com/questions/2818697/sending-and-parsing-json-in-android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T12:34:43.707

[NSJSONSerialization](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)是你的方式，以防万一`iOS`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T12:36:34.843

您必须创建 Web 服务以从服务器获取数据并在 iphone 中使用该 Web 服务，为此您可以使用此代码。它将从 json 格式的 Web 服务 url 获取数据。您需要安装 sbjson 库来解析 json 数据你的项目。

```
#import "SBJson.h"

- (void)viewDidLoad
{       

idArray = [[NSMutableArray alloc] init];

 NSString *post =@"";

                NSURL *url=[NSURL URLWithString:@"http://blog.bigwavemedia.co.uk/?json=get_recent_posts"];

                NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

                NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

                NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
                [request setURL:url];
                [request setHTTPMethod:@"POST"];
                [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
                //[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
                // [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
                [request setHTTPBody:postData];

                //[NSURLRequest setAllowsAnyHTTPSCertificate:YES forHost:[url host]];

                NSError *error = [[NSError alloc] init];
                NSHTTPURLResponse *response = nil;
                NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

                //NSLog(@"Response code: %d", [response statusCode]);
                if ([response statusCode] >=200 && [response statusCode] <300)
                {
                    NSString *responseData = [[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];
                    // NSLog(@"Response ==> %@", responseData);                    

                    SBJsonParser *jsonParser = [SBJsonParser new];
                    NSDictionary *jsonData = (NSDictionary *) [jsonParser objectWithString:responseData error:nil];

                    //NSLog(@"json data is : %@",jsonData);

                    NSArray *allDataArray = [[NSArray alloc]init];
                    allDataArray= [jsonData objectForKey:@"posts"];

                    for(int i=0;i<[allDataArray count];i++)
                    {
                        NSDictionary *tempDictionary = [allDataArray objectAtIndex:i];

                        if([tempDictionary objectForKey:@"id"]!=nil)
                        {

                            [idArray addObject:[tempDictionary objectForKey:@"id"]];
                        }

                    }

                } else {
                    if (error) NSLog(@"Error: %@", error);
                    [self alertStatus:@"Connection Failed" :@"Does not find any data!"];
                }

            }
            @catch (NSException * e) {
                NSLog(@"Exception: %@", e);
                [self alertStatus:@"Data not found." :@"Does not find any data!"];
            }
[super viewDidLoad];
} 
```

这里 post 变量用于在您的 url 中发送参数。并且 NSMutableURLRequest 用于调用 url 并以 json 格式获取数据，而不是在这里我们使用 sbjson 库中的 SBJsonParser 并在字典或数组中解析该数据。

# ios - AVPlayer 播放单声道音频立体声->单声道

> ID：15174485
> 
> 赞同：4
> 
> 时间：2013-03-02T12:29:48.917
> 
> 标签：ios, cocoa-touch, core-audio, avplayer

在我的 iPad/iPhone 应用程序中，我正在使用 AVPlayer 播放视频。视频文件有一个立体声音频轨道，但我只需要以单声道播放该轨道的一个通道。部署目标是 iOS 6。我该如何实现呢？非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:18:26.930

我现在终于找到了这个问题的答案——至少在 iOS 6 上部署。您可以轻松地将**MTAudioProcessingTap**添加到现有的 AVPlayer 项目中，并在进程回调函数期间将选定的通道样本复制到另一个通道。这是一个很好的教程，解释了基础知识：[http ://chritto.wordpress.com/2013/01/07/processing-avplayers-audio-with-mtaudioprocessingtap/](http://chritto.wordpress.com/2013/01/07/processing-avplayers-audio-with-mtaudioprocessingtap/)

到目前为止，这是我的代码，主要是从上面的链接中复制的。

在 AVPlayer 设置期间，我为音频处理分配回调函数：

```
MTAudioProcessingTapCallbacks callbacks;
callbacks.version = kMTAudioProcessingTapCallbacksVersion_0;
callbacks.clientInfo = ( void *)(self);
callbacks.init = init;
callbacks.prepare = prepare;
callbacks.process = process;
callbacks.unprepare = unprepare;
callbacks.finalize = finalize;

MTAudioProcessingTapRef tap;
// The create function makes a copy of our callbacks struct
OSStatus err = MTAudioProcessingTapCreate(kCFAllocatorDefault, &callbacks,
                                          kMTAudioProcessingTapCreationFlag_PostEffects, &tap);
if (err || !tap) {
    NSLog(@"Unable to create the Audio Processing Tap");
    return;
}
assert(tap);

// Assign the tap to the input parameters
audioInputParam.audioTapProcessor = tap;

// Create a new AVAudioMix and assign it to our AVPlayerItem
AVMutableAudioMix *audioMix = [AVMutableAudioMix audioMix];
audioMix.inputParameters = @[audioInputParam];
playerItem.audioMix = audioMix; 
```

以下是音频处理功能（实际上只需要处理）：

```
#pragma mark Audio Processing

void init(MTAudioProcessingTapRef tap, void *clientInfo, void **tapStorageOut) {
    NSLog(@"Initialising the Audio Tap Processor");
    *tapStorageOut = clientInfo;
}

void finalize(MTAudioProcessingTapRef tap) {
    NSLog(@"Finalizing the Audio Tap Processor");
}

void prepare(MTAudioProcessingTapRef tap, CMItemCount maxFrames, const AudioStreamBasicDescription *processingFormat) {
    NSLog(@"Preparing the Audio Tap Processor");
}

void unprepare(MTAudioProcessingTapRef tap) {
    NSLog(@"Unpreparing the Audio Tap Processor");
}

void process(MTAudioProcessingTapRef tap, CMItemCount numberFrames,
         MTAudioProcessingTapFlags flags, AudioBufferList *bufferListInOut,
         CMItemCount *numberFramesOut, MTAudioProcessingTapFlags *flagsOut) {
    OSStatus err = MTAudioProcessingTapGetSourceAudio(tap, numberFrames, bufferListInOut, flagsOut, NULL, numberFramesOut);
    if (err) NSLog(@"Error from GetSourceAudio: %ld", err);

    SIVSViewController* self = (SIVSViewController*) MTAudioProcessingTapGetStorage(tap);

    if (self.selectedChannel) {

        int channel = self.selectedChannel;

        if (channel == 0) {
            bufferListInOut->mBuffers[1].mData = bufferListInOut->mBuffers[0].mData;
        } else {
            bufferListInOut->mBuffers[0].mData = bufferListInOut->mBuffers[1].mData;
        }
    }
} 
```

# java - 在服务器端 Java 代码中链接的字符串

> ID：15174492
> 
> 赞同：0
> 
> 时间：2013-03-02T12:30:12.380
> 
> 标签：java, html, string

我有一个字符串，我想转换为链接，但我不能这样做，我的代码如下：

```
Content.append("<a href=\""+System.getProperty("application.middleware.webapplication.host")).append(":")"/"/">); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T12:35:10.097

像这样的简单解决方案怎么样？

```
String host = System.getProperty("application.middleware.webapplication.host");
String url = "http://" + host;
String linkText = "please click here";
Content.append("<a href='"+ url + "'>" + linkText + "</a>" ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T12:40:28.973

以上不编译。如果您不尝试将所有内容放在一条线上，您会更容易理解为什么

首先为`System.getProperty("...")`. 然后每行放一条指令。然后不要混合`append()`和`+`连接运算符。代码变为：

```
String host = System.getProperty("application.middleware.webapplication.host");
content.append("<a href=\"");
content.append(host);
content.append(":")"/"/">); 
```

最后一条指令无效。要变得有效并使其成为链接，您需要类似的东西

```
String host = System.getProperty("application.middleware.webapplication.host");
content.append("<a href=\"");
content.append(host);
content.append("\">Click here</a>"); 
```

遵守 Java 命名约定（变量以小写字母开头）对于使代码具有可读性和可理解性也至关重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T12:37:25.873

```
Content.append("<a href=\"")
       .append(System.getProperty("application.middleware.webapplication.host"))
       .append("\">My Link</a>"); 
```

# jquery - 优化 IF 语句的更好方法

> ID：15174493
> 
> 赞同：2
> 
> 时间：2013-03-02T12:30:16.673
> 
> 标签：jquery

有没有更好的方法来优化 jQuery 中的以下 IF 语句？

我不得不多次编辑以下代码，如果我可以将必要的值插入一个不错的数组或其他东西中，那就太好了......

```
 $("#pmselect").change(function () {
        if ($("#pmselect option:selected").attr("class") == "null") {
            $('.avatar').hide();
            $('.pmpass').hide();
            $('.pmlogin').hide();
            $('#nullavatar').show();
        }
        if ($("#pmselect option:selected").attr("id") == "pm") {
            $('.avatar').hide();
            $('.pmpass').show();
            $('.pmlogin').show();
            $('#pmavatar').show();
        }
        if ($("#pmselect option:selected").attr("id") == "as") {
            $('.avatar').hide();
            $('.pmpass').show();
            $('.pmlogin').show();
            $('#asavatar').show();
        }
        if ($("#pmselect option:selected").attr("id") == "pn") {
            $('.avatar').hide();
            $('.pmpass').show();
            $('.pmlogin').show();
            $('#pnavatar').show();
        }
        if ($("#pmselect option:selected").attr("id") == "jm") {
            $('.avatar').hide();
            $('.pmpass').show();
            $('.pmlogin').show();
            $('#jmavatar').show();
        }
        if ($("#pmselect option:selected").attr("id") == "mh") {
            $('.avatar').hide();
            $('.pmpass').show();
            $('.pmlogin').show();
            $('#mhavatar').show();
        }
        if ($("#pmselect option:selected").attr("id") == "rh") {
            $('.avatar').hide();
            $('.pmpass').show();
            $('.pmlogin').show();
            $('#rhavatar').show();
        }
        if ($("#rmselect option:selected").attr("id") == "rm") {
            $('.avatar').hide();
            $('.pmpass').show();
            $('.pmlogin').show();
            $('#rmavatar').show();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T12:33:04.720

您可以使用开关/案例，这样您就可以合并在多种情况下完成的某些事情......

```
switch( $("#pmselect option:selected").attr("id") ){
  case 'pm':
    //do stuff
    break;
  case 'xyz':
  case 'rh':
   //do stuff for xyz and rh
  case 'mh': 
   // do stuff for mh only
   break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T12:38:47.220

试试这个：

```
$("#pmselect").change(function () {
        $('.avatar').hide();
        if ($("#pmselect option:selected").attr("class") == "null") {
            $('.pmpass, .pmlogin').hide();
            $('#nullavatar').show();
        } else {
            var id = $("#pmselect option:selected").attr("id");
            $('.pmpass, .pmlogin').show();
            $('.pmlogin').show();
            $('#' + id + 'avatar').show();
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T13:19:16.173

假设`$("#rmselect option:selected")`最后一个 if 表达式是一个错字（归功于鹰眼@RaymondChen），我想你会发现代码简化为：

```
$("#pmselect").change(function () {
    var opt = this[this.selectedIndex],
        isNull = $(opt).hasClass('null'),
        id = isNull ? 'null' : opt.id;
    $('.avatar').hide();
    $('.pmpass, .pmlogin')[isNull ? 'hide' : 'show']();
    $('#' + id + 'avatar').show();
}); 
```

看不见`if`:)

如果`$("#rmselect option:selected")`不是拼写错误，则需要单独处理#rmselect 条件。

# ruby-on-rails-3 - rails rspec integration_tests 和 http 身份验证

> ID：15174495
> 
> 赞同：4
> 
> 时间：2013-03-02T12:30:30.620
> 
> 标签：ruby-on-rails-3, rspec, basic-authentication

我正在使用 Rspec 2 和 capybara 并定义了基本的集成测试，即

```
describe "EeRequisitions" do
  describe "GET /ee_requisitions" do
    it "works! (now write some real specs)" do
      get ee_requisitions_path
      response.status.should be(200)
    end
  end
end 
```

由于该应用程序使用 HTTP 基本身份验证，并且由于 capybara 说它包含 Rack::Test，我希望添加以下行：

```
authorize 'user', 'password' 
```

会处理它（我已经丢失了告诉我的stackoverflow帖子）。不幸的是，它没有——它一直抛出“未找到方法”错误。我终于在这篇文章的评论中找到了解决方案：[Rails/Rspec Make tests pass with http basic authentication](https://stackoverflow.com/questions/3768718/rails-rspec-make-tests-to-pass-with-http-basic-authentication)其中Matt Connelly 向我指出了这个要点：[https](https://gist.github.com/mattconnolly/4158961) ://gist.github.com/mattconnolly/4158961最终解决了我的问题。

但是，我仍然想知道为什么 Rack::Test 方法失败了，因为它似乎对其他人有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T15:57:34.260

是否包括线路

```
include Rack::Test::Methods 
```

在测试的顶部有什么不同？

# php - joomla meadowmart 添加新的类别代码位置

> ID：15174498
> 
> 赞同：0
> 
> 时间：2013-03-02T12:31:01.510
> 
> 标签：php, joomla2.5, virtuemart

这是关于 ddermart 2.0 的。添加新类别时，会将新行插入到 prefix_virtuemart_categories 表中。该查询在哪里执行？即，在哪个文件中（模型/控制器...）。添加新类别后我想做点什么。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:40:21.170

您可以通过转到您的`com_virtuemart`组件来检查它。这是您的类别将其保存到数据库的导航。

> Joomla 站点 -> 管理员 -> 组件 -> com_virtuemart -> 控制器 ->category.php

打开这个文件，你可以看到有一个函数叫做`save()`，这就是你想要的。你可以在这里做你想做的。祝你好运。

# slimdx - SlimDX NuGet 包去哪儿了？

> ID：15174502
> 
> 赞同：0
> 
> 时间：2013-03-02T12:31:47.123
> 
> 标签：slimdx

最近我一直在用几台不同的机器做一个 SlimDX 项目。今天我从SVN拉下我的代码，经历了重新安装项目中引用的所有nuget包的舞蹈，我在Nuget中搜索slimDX，没有任何结果。

包裹去哪儿了，为什么被拿下来？安装SDK倒是没那么粗，但是NuGet更方便。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:43:55.363

你总是可以只安装 slimdx 的可再发行组件，你不需要整个 sdk。

# python - 从两个差异模型将数据添加到数据库中

> ID：15174504
> 
> 赞同：0
> 
> 时间：2013-03-02T12:31:51.400
> 
> 标签：python, mysql, django

我的models.py是

```
class Book(models.Model):
    book_name=models.CharField(max_length=30)
    author_name=models.CharField(max_length=30)
    publisher_name=models.CharField(max_length=40)
    author=models.ForeignKey(Author)

    def __unicode__(self):
        ..........

class Author(models.Model):
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=40)
    email = models.EmailField()
    age=models.IntegerField()

    def __unicode__(self):
        ........

    def books(self):
        return Book.objects.filter(author=self) 
```

我需要从两个不同的模型将数据插入数据库。我需要views.py 示例，因为我使用的代码不能正常工作。请帮我解决一下这个。我正在使用 Django。我使用作者作为 fireign 键，因此应该自动设置，这也不会发生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:13:31.910

```
def add_author(request):
    if request.method == 'POST':
        fname = request.POST.get('fname')
        lname = request.POST.get('lname')
        email = request.POST.get('email')
        age = request.POST.get('age')

        author = Author(
            first_name = fname,
            last_name = lname,
            email=email,
            age=age
            )
        new_author = author.save()

        book = request.POST.get('book')
        publisher = request.POST.get('publisher')

        fullname = "{0} {1}".format(new_author.first_name, 
                                    new_author.last_name)

        Book.objects.create(
            book_name=book, 
            author_name=fullname, 
            publisher_name=publisher
            author = new_author
            )

    return render(request, 'add_author.html') 
```

**add_author.html**

```
<form method="post">
    {% csrf_token %}
    <h5>Author Info: </h5>
    First name: <input type="text" name="fname"><br/>
    Last name: <input type="text" name="lname"><br/>
    Email: <input type="text" name="email"><br/>
    Age: <input type="text" name="age"><br/>

    <h5>Book Info: </h5>
    Name: <input type="text" name="book"><br/>
    Publisher: <input type="text" name="publisher"><br/>

    <input type="submit" value="Save">
</form> 
```

# c# - 如何在 wpf 中将滚动查看器大小设置为父级的网格大小

> ID：15174508
> 
> 赞同：3
> 
> 时间：2013-03-02T12:31:53.877
> 
> 标签：c#, wpf, xaml

我在网格中有一个弹出控件，我希望它调整为父网格大小。如您所见，父网格区域为绿色，弹出窗口为 LightCyan 颜色。LightCyan 中的区域应覆盖整个绿色区域。而且我认为我必须将 Scrollviewer 的宽度和高度设置为父级的宽度和高度，但这不起作用。请回复。谢谢

我正在使用代码在 LinePopGrid 中添加不同的东西。

```
<Grid Background="Green">
<Popup x:Name="LinePopUp" IsOpen="True" Placement="Relative" >
        <ScrollViewer  CanContentScroll="True" VerticalScrollBarVisibility="Auto">
            <Grid Background="LightCyan" x:Name="LinePopUpGrid" />
        </ScrollViewer>
    </Popup>
</Grid> 
```

![附图](../Images/7bc1f1a13b7af858012d9b7e72998516.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T12:37:07.543

您需要将 PopUp`width`和`height`Grid`ActualWidth`分别绑定到`ActualHeight`-

```
<Grid Background="Green">
        <Popup x:Name="LinePopUp" IsOpen="True" Placement="Relative"
               Width="{Binding ActualWidth,RelativeSource={RelativeSource 
                               Mode=FindAncestor, AncestorType=Grid}}"                   
               Height="{Binding ActualHeight,RelativeSource={RelativeSource
                                Mode=FindAncestor, AncestorType=Grid}}">
            <ScrollViewer CanContentScroll="True"
                          VerticalScrollBarVisibility="Auto">
                <Grid Background="LightCyan" x:Name="LinePopUpGrid" />
            </ScrollViewer>
        </Popup>
 </Grid> 
```

# python - 尝试使用 beautifulsoup 分析 HTML 时出现的一个奇怪问题

> ID：15174510
> 
> 赞同：0
> 
> 时间：2013-03-02T12:32:16.867
> 
> 标签：python, python-2.7, beautifulsoup, urllib2

我正在尝试编写一些python代码来从官方网站收集音乐排行榜数据，但是在收集广告牌数据时遇到了麻烦。我选择beautifulsoup 来处理HTML

我的环境：python-2.7 beautifulsoup-3.2.0

首先我分析HTML

```
>>> import BeautifulSoup, urllib2, re
>>> html = urllib2.urlopen('http://www.billboard.com/charts/hot-100?page=1').read()
>>> soup = BeautifulSoup.BeautifulSoup(html) 
```

然后我尝试收集我想要的数据，例如艺术家姓名

HTML：

```
<div class="listing chart_listing">

<article id="node-1491420" class="song_review no_category chart_albumTrack_detail no_divider">
  <header>
    <span class="chart_position position-down">11</span>
            <h1>Ho Hey</h1>
        <p class="chart_info">
      <a href="/artist/418560/lumineers">The Lumineers</a>            <br>
      The Lumineers          </p> 
```

艺术家名字是 The Lumineers

```
>>> print str(soup.find("div", {"class" : re.compile(r'\bchart_listing')})\
... .find("p", {"class":"chart_info"}).a.string)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'NoneType' object has no attribute 'find' 
```

无类型！似乎它无法 grep 我想要的数据，也许我的规则是错误的，所以我尝试 grep 一些基本标签。

```
>>> print str(soup.find("div"))
None
>>> print str(soup.find("a"))
None
>>> print str(soup.find("title"))
<title>The Hot 100 : Page 2  | Billboard</title>
>>> print str(soup)
......entire HTML..... 
```

我很困惑，为什么它不能像 div 一样 grep 基本标签，a？他们确实在那里。我的代码有什么问题？当我尝试用这些来分析其他图表时没有任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T08:35:09.417

这似乎是 Beautifulsoup 3 问题。如果你 prettify() 输出：

```
from BeautifulSoup import BeautifulSoup as soup3
import urllib2, re

html = urllib2.urlopen('http://www.billboard.com/charts/hot-100?page=1').read()
soup = soup3(html)
print soup.prettify() 
```

您可以在输出的末尾看到：

```
 <script type="text/javascript" src="//assets.pinterest.com/js/pinit.js"></script>
</body>
</html>
  </script>
 </head>
</html> 
```

使用两个 html 结束标签，BeautifulSoup3 似乎被此数据中的 Javascript 内容混淆了。

如果您使用：

```
from bs4 import BeautifulSoup as soup4
import urllib2, re

html = urllib2.urlopen('http://www.billboard.com/charts/hot-100?page=1').read()
soup = soup4(html)
print str(soup.find("div", {"class" : re.compile(r'\bchart_listing')}).find("p", {"class":"chart_info"}).a.string) 
```

你得到`'The Lumineers'`作为输出。

如果你不能切换到bs4，我建议你将html变量写到一个文件`out.txt`中，然后更改脚本以读取`in.txt`并将输出复制到输入并切掉块。

```
from BeautifulSoup import BeautifulSoup as soup3
import re

html = open('in.txt').read()
soup = soup3(html)
print str(soup.find("div", {"class" : re.compile(r'\bchart_listing')}).find("p", {"class":"chart_info"}).a.string) 
```

我的第一个猜测是删除`<head> ... </head>`并且效果很好。

之后，您可以以编程方式解决该问题：

```
from BeautifulSoup import BeautifulSoup as soup3
import urllib2, re

htmlorg = urllib2.urlopen('http://www.billboard.com/charts/hot-100?page=1').read()
head_start = htmlorg.index('<head')
head_end = htmlorg.rindex('</head>')
head_end = htmlorg.index('>', head_end)
html = htmlorg[:head_start] + htmlorg[head_end+1:]
soup = soup3(html)
print str(soup.find("div", {"class" : re.compile(r'\bchart_listing')}).find("p", {"class":"chart_info"}).a.string) 
```

# android - 同时滚动 TabHost 的 ListView 和 ListFragment

> ID：15174511
> 
> 赞同：2
> 
> 时间：2013-03-02T12:32:23.413
> 
> 标签：android, listview, scroll, android-tabhost, android-listfragment

正如长得可笑的标题所暗示的那样，这是一个解释起来很复杂的问题，所以这里有一个例子：

![画不好的布局](../Images/92913500347755892f8306a92f165191.png)

**一般：**我设计的是一个包含 ListView 和 TabHost 的 FragmentActivity。TabHost 包含 3 个 ListFragment 形式的选项卡。

**RED 列：**这是我的 ListView，位于 FragmentActivity 布局和类中。

**GREEN 列：** TabHost 与 ListView 位于相同的 FragmentActivity 和布局中，包含 3 个 ListFragment 类，每个类都有自己的布局。

**我想要完成的事情：**当我触摸并滚动（翻动）其中一个列表（红色或绿色列）时，我希望所有其他列表同时移动。因此，当我滚动 RED 列时，**当前**的GREEN 将在触摸 RED 时同时滚动，而且其他选项卡将与它位于同一位置。我希望它在更改选项卡时感觉像一个统一的列表，左列固定（绿色列上的水平滚动）。

**班级总结：**

*   MainFragmentActivity ：包含 ListView 和 TabHost
*   列表片段1
*   ListFragment2 ：它们是单独的类，作为选项卡包含在 TabHost 中
*   ListFragment3

**布局总结：**

*   main_fragment_activity
*   tab1_fragment
*   tab2_fragment
*   tab3_fragment

对不起，很长的帖子和标题。我只是想澄清我的问题。

# azure-sql-database - 通过 Management Studio 连接到 SQL Azure

> ID：15174514
> 
> 赞同：2
> 
> 时间：2013-03-02T12:32:48.723
> 
> 标签：azure-sql-database, ssms

我有一个 SQL Azure 数据库。我可以通过 Azure 管理门户成功连接到数据库。此外，我可以使用实体框架从我的应用程序成功连接到数据库。不幸的是，我无法通过 SQL Server Management Studio 连接到数据库。

我的想法是 SQL Server Management Studio 无法连接到“主”数据库。因此，它会失败。因此，我尝试通过“连接属性”选项卡上的“连接到数据库”字段添加数据库名称。然而，我得到了同样的错误。错误如下所示：

```
TITLE: Connect to Server
------------------------------

Cannot connect to tcp:{serverName}.database.windows.net,1433.

------------------------------
ADDITIONAL INFORMATION:

Login failed for user '{username}'.
This session has been assigned a tracing ID of '{id}'.  Provide this tracing ID to customer support when you need assistance. (Microsoft SQL Server, Error: 18456)

For help, click: http://go.microsoft.com/fwlink?ProdName=Microsoft+SQL+Server&EvtSrc=MSSQLServer&EvtID=18456&LinkId=20476 
```

我在这里做错了什么？这个“服务器”上有 2 个我想通过管理工作室访问的 SQL Azure 数据库。如何添加用户以便我可以登录并管理这两个数据库？有没有办法甚至管理 SQL Azure 数据库上的用户？我似乎无法弄清楚。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T15:35:04.060

您使用的是什么版本的 SQL Enterprise Management Studio？您至少需要 SQL Enterprise Management Studio 2008 R2 或更高版本。（不妨获取最新的：http: [//www.microsoft.com/en-us/download/details.aspx?id=29062](http://www.microsoft.com/en-us/download/details.aspx?id=29062)）

假设你已经知道了，你会在“连接到服务器”对话框中输入它：

```
Server type:  Database Engine
Server name:  tcp:servername.database.windows.net
Authentication:  SQL Server
Login: username@servername
Password: password 
```

应该这样做——要检查的另一件事是防火墙限制。您会看到一个不同的错误（“不允许访问客户端 IP 地址”），但无论如何最好验证一下。

# asp.net - ModalPopup 发布时运行缓慢。网

> ID：15174515
> 
> 赞同：1
> 
> 时间：2013-03-02T12:32:59.270
> 
> 标签：asp.net, modalpopupextender

当我单击列表视图中的图像时，我有一个 modalpopup 会打开，它运行平稳并且在本地调试模式下可以正常打开。但是当我发布它时，大约需要 20 秒才能打开。任何人都可以帮助我吗？

弹出代码：

[http://codepad.org/bId1cy7c](http://codepad.org/bId1cy7c)

单击图像时的c#运行：

[http://codepad.org/lWOSKBJJ](http://codepad.org/lWOSKBJJ)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:25:34.790

在按钮单击中，页面可能会重新加载以进行回发，因为您在按钮单击事件中编写了 popup.show()。您可以为此按钮使用另一个更新面板，以避免重新加载完整的页面。请试一试。

# java - 如何在一个程序中发送多条短信？

> ID：15174517
> 
> 赞同：0
> 
> 时间：2013-03-02T12:33:25.820
> 
> 标签：java, smslib

我想通过使用 smslib 发送多条短信。我制作了一个 Java 类来循环发送 SMS。但它只工作一次。然后它返回以下异常：

```
org.smslib.GatewayException: Comm library exception:
   java.lang.RuntimeException: javax.comm.PortInUseException:
      Port currently owned by org.smslib
at org.smslib.modem.SerialModemDriver.connectPort(SerialModemDriver.java:102)
at org.smslib.modem.AModemDriver.connect(AModemDriver.java:114)
at org.smslib.modem.ModemGateway.startGateway(ModemGateway.java:189)
at org.smslib.Service$1Starter.run(Service.java:276) 
```

这是我的课：

```
import javax.swing.JOptionPane;
import org.smslib.AGateway;
import org.smslib.IOutboundMessageNotification;
import org.smslib.OutboundMessage;
import org.smslib.Service;
import org.smslib.modem.SerialModemGateway;

public class SendSMS1 {

private static String id;
private static String port;
private static int bitRate;
private static String modemName;
private static String modemPin;
private static String SMSC;

public static void doIt(String number, String text) {
    try {
        OutboundMessage msg;
        OutboundNotification outboundNotification = new OutboundNotification();
        SerialModemGateway gateway = new SerialModemGateway(id, port, bitRate,     modemName, "E17u-1");
        gateway.setInbound(true);
        gateway.setOutbound(true);
        gateway.setSimPin(modemPin);
        Service.getInstance().setOutboundMessageNotification(outboundNotification);
        Service.getInstance().addGateway(gateway);
        Service.getInstance().startService();
        msg = new OutboundMessage(number, text);
        Service.getInstance().sendMessage(msg);
        System.out.println(msg);
        Service.getInstance().stopService();
    } catch (Exception ex) {
        if (ex.getStackTrace()[2].getLineNumber() == 189) {
            JOptionPane.showMessageDialog(null,
                    "Port currently owned by usb Modem's application. \n Please close it & run the programm again.",
                    "Port Exception",
                    JOptionPane.ERROR_MESSAGE);
            ex.printStackTrace();
        } else {
            JOptionPane.showMessageDialog(null,
                    ex.getMessage(),
                    "Sending faile",
                    JOptionPane.ERROR_MESSAGE);
            ex.printStackTrace();
        }
    }
}

public static class OutboundNotification implements IOutboundMessageNotification {
    public void process(AGateway gateway, OutboundMessage msg) {
        System.out.println("Outbound handler called from Gateway: " + gateway.getGatewayId());
        System.out.println(msg);
    }
}

public static void main(String[] args) throws Exception {
    String number = "+94772347634", text = "Hello world";
    modemName = "Huwawi";
    port = "COM4";
    bitRate = 115200;
    modemPin = "0000";
    SMSC = "+947500010";
    for (int i = 0; i < 5; i++) {
    SendSMS1 app = new SendSMS1();
    app.doIt(number, text);
    }
  }
} 
```

请给我建议，我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-05T11:24:46.423

您必须删除网关。可以使用这个 *-Service.getInstance().removeGateway(gateway);* 你应该将它插入到 doIt 方法中，之后 - *Service.getInstance().stopService();*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T13:21:06.453

我不知道 smslib，但我想直到`startService`应该只发生一次，而不是每次你想发送消息时，如下所示：

```
class SendSMS1
{
    public SendSMS1(String modemName, String port, int bitRate,
                    String modemPin, String SMSC)
    {
        OutboundNotification outboundNotification = new OutboundNotification();
        SerialModemGateway gateway = new SerialModemGateway(id, port, bitRate,     modemName, "E17u-1");
        gateway.setInbound(true);
        gateway.setOutbound(true);
        gateway.setSimPin(modemPin);
        Service.getInstance().setOutboundMessageNotification(outboundNotification);
        Service.getInstance().addGateway(gateway);
        Service.getInstance().startService();
    }

    public static void doIt(String number, String text) {
        try {
            OutboundMessage msg = new OutboundMessage(number, text);
            Service.getInstance().sendMessage(msg);
            System.out.println(msg);
            Service.getInstance().stopService();
        } catch (Exception ex) {
            if (ex.getStackTrace()[2].getLineNumber() == 189) {
                JOptionPane.showMessageDialog(null,
                        "Port currently owned by usb Modem's application. \n Please close it & run the programm again.",
                        "Port Exception",
                        JOptionPane.ERROR_MESSAGE);
                ex.printStackTrace();
            } else {
                JOptionPane.showMessageDialog(null,
                        ex.getMessage(),
                        "Sending faile",
                        JOptionPane.ERROR_MESSAGE);
                ex.printStackTrace();
            }
        }
    }

    public static void main(String[] args) throws Exception {
        String number = "+94772347634", text = "Hello world";
        SendSMS1 app = new SendSMS1("Huwawi", "COM4", 115200, "0000", "+947500010");
        for (int i = 0; i < 5; i++) {
            app.doIt(number, text);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-10T08:56:06.353

改变这个。它正在工作

```
public static void main(String[] args) throws Exception {
        Calendar now = Calendar.getInstance();
            String ar=(dateFormat.format(now.getTime()));
        String text = "We are the Future of Science "+" "+ar;

        SendSMS app = new SendSMS("Huawei", "COM20", 115200, "0000", "+9477000003");
        for (int i = 0; i < 1; i++) {

            String[] numbers = {"+num","+num","+num","+num","+num","+num","+num","+num"};
      for (String item : numbers) {

            Service.getInstance().startService();
            app.doIt(item, text);

            Service.getInstance().stopService();
        }}
    } 
```

# c++ - 增量运算符更多目的？

> ID：15174519
> 
> 赞同：-4
> 
> 时间：2013-03-02T12:33:48.783
> 
> 标签：c++, syntax, increment, decrement

我想知道递增和递减运算符（ ++ -- ）是否比它的简单用途更有目的，以使代码更简单

也许：

```
i++; 
```

比：

```
i = i + 1; 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T12:56:24.407

在许多方面，运算符的*主要*目的是向后兼容。在设计 C++ 时，一般规则是做 C 做的事情，至少对于非类类型；如果 C 没有`++`and `--`，我怀疑 C++ 会有它们。

当然，这引出了问题。无法想象它们会在现代编译器中生成不同的代码，而且委员会会出于优化原因引入它们是相当不可思议的（尽管您永远不知道——引入移动语义主要是出于优化原因）。但回到 1970 年代中期，在 C? 当时普遍认为，引入它们是因为它们对应于 PDP-11 上的机器指令。另一方面，它们已经存在于B中。C从B那里获得它们。而B是一种解释性语言，因此它们不存在对应于机器指令的问题。我自己的怀疑，这适用于许多运算符 ( `&`，而不是`and`等）是因为当时的开发主要是在电传打字机（tty's）上进行的，并且您输出到电传打字机的每个字符都会产生很多令人不快的噪音。所以你需要的字符越少越好。

至于`++ i;`,`i += 1;`和`i = i + 1;`: 之间的选择，不必重复`i` （当然，这可能是一个或多或少复杂的表达式）有一个明显的优势，所以你至少想要`i += 1;`. Python 停在那里，如果没有其他原因，它将赋值视为语句，而不是任意表达式的副作用。在我使用 C 和 C++ 编程超过 30 年之后，我仍然觉得使用`++ i`Python 编程时缺少这一点，尽管我在 C++ 中几乎将自己限制为将赋值视为语句（并且不要嵌入`++ i`更复杂的表达式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T12:42:57.023

您提供的两个示例几乎肯定会编译为完全相同的机器代码。编译器非常聪明。了解编译器很少执行您实际编写的代码。它会扭曲并塑造它以提高性能。任何现代编译器都会知道这一点`i++;`并且`i = i + 1;`是相同的（对于算术类型）并生成相同的输出。

但是，除了代码可读性之外，两者都有很好的理由。从概念上讲，多次增加一个值和增加一个值是不同的操作 - 它们在这里只是相同的，因为您要加 1。加法，例如`x + 3`，是单个操作，而 do`++++++x`表示具有相同效果的三个单独的操作。当然，聪明的编译器也会知道，对于算术类型的对象`x`，它可以`N`通过做 来在常数时间内做增量`x + N`。

`x`但是，如果是具有重载`operator+`and的类类型，则编译器无法做出此假设`operator++`。这两个运算符可能会做完全不同的事情。此外，将 an 实现`operator+`为非常量时间操作会产生错误的印象。

当我们处理迭代器时，两者的重要性变得很明显。只有随机访问迭代器支持加法和减法。例如，标准原始指针是随机访问迭代器，因为您可以执行`ptr + 5`并获取指向第 5 个对象的指针。但是，所有其他类型的迭代器（双向、前向、输入）不支持这一点 - 您只能增加它们（并减少双向迭代器）。要使用双向迭代器到达第 5 个元素，您需要执行`++`5 次。那是因为加法表示一个恒定时间的操作，但许多迭代器根本无法在恒定时间内遍历。强制多个增量表明它不是一个恒定时间操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T12:51:36.443

性能取决于`i`.

如果它是内置类型，那么优化器将“注意到”您的两个语句是相同的，并为两者发出相同的代码。

由于您使用了后增量（并忽略了分号），因此即使`i`是内置类型，这两个表达式也具有不同的值。的值`i++`是旧值，的值`i = i + 1`是新值。所以，如果你写：

```
j = i++;
k = (i = i + 1); 
```

那么两者现在是不同的，并且两者都不会发出相同的代码。

由于后增量的后置条件与前增量相同，您可以说后增量运算符的*主要*目的是计算不同的值。无论性能如何，它都使语言更具表现力。

如果`i`具有带有重载运算符的类类型，那么它可能不会那么简单。从理论上讲，这两者甚至可能没有相同的结果，但假设“明智的”运算符`i + 1`返回该类的一个新实例，然后对其进行移动分配（在 C++11 中，如果该类型具有移动赋值运算符）或复制- （在 C++03 中）分配给`i`. 无法保证优化器可以使此操作与实际操作一样高效`operator++`，尤其是当运算符重载定义在另一个翻译单元中关闭时。

有些类型有`operator++`但没有`operator+`，例如`std::list<T>::iterator`。但是，这不是存在的原因`++`，因为它存在于 C 中，并且 C 没有类型 with `++`but not `+`。这是 C++ 利用它现有的一种方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T12:42:30.010

1.  `++`or运算符允许将`--`其组合到其他语句中，而不是`i=i+1`. 例如`while (i++ < 10)`，允许进行 while 循环检查并在其后进行增量。用 是不可能的`i=i+1`。

2.  `++`or`--`运算符可以在其他类中重载以具有其他含义或通过其他操作进行增量和减量。请参阅[此页面](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Fcplr330.htm)了解更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T12:43:57.047

它们都不完全相同，尽管在功能上它们是相同的，但优先级`i++`有所不同`i=i+1`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-02T12:47:26.113

尝试在一些更复杂的表达式中替换 ++i 或 i++。您将在使用前增量/后增量功能时遇到困难。您将需要将表达式拆分为多个。这就像三元运算符。它是等效的，无论您输入代码的方式如何，编译器都可能会执行一些优化，但是三元运算符和前增量/后增量语法只是为您节省空间和代码的可读性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-02T12:35:19.950

两者都将通过体面的编译器在优化代码中生成相同的机器指令。

如果编译器认为`i++`效率更高，那么它将转换`i=i+1`为`i++`，反之亦然。不管你写什么结果都是一样的。

我更喜欢`++i`. 我*从不*写`i=i+1`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-02T12:36:33.043

不，它只是让打字变得简单，让语法看起来更简单。

当它们都被编译时，它们被简化为相同的编译代码，并以相同的速度运行。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-02T13:18:11.220

`i++`和之间的区别在于`i = i + 1`，第一个表达式只计算`i`一次，而第二个表达式计算两次。考虑：

```
int& f() {
    static int value = 0;
    std::cout << "f() called\n";
    return value;

}

f()++;         // writes the message once
f() = f() + 1; // writes the message twice 
```

如果`f()`在不同的调用中返回不同的引用，这两个表达式会产生截然不同的效果。并不是说这是好的设计，当然……

# mysql - mongodb（或其他 nosql dbs）是以下场景的最佳解决方案吗？

> ID：15174520
> 
> 赞同：-1
> 
> 时间：2013-03-02T12:33:58.733
> 
> 标签：mysql, mongodb, metadata, rdbms, nosql

考虑以下数据结构，一旦存储在数据库系统（rdbms 或 nosql）中，查询数据会更好吗？元数据字段中的字段是用户定义的，并且会因用户而异。可能的值是字符串、数字、“日期”甚至数组。

```
var file1 = {
    id: 123, name: "mypicture", owner: 1
    metadata: {
        people: ["Ben", "Tom"],
        created: 2013/01/01,
        license: "free",
        rating: 4
        ...
    },
    tags: ["tag1", "tag2", "tag3", "tag4"]
}

var file2 = {
    id: 155, name: "otherpicture", owner: 1
    metadata: {
        people: ["Tom", "Carla"],
        created: 2013/02/02,
        license: "free",
        rating: 4
        ...
    },
    tags: ["tag4", "tag5"]
}

var file1OtherUser = {
    id: 345, name: "mydocument", owner: 2
    metadata: {
        autors: ["Mike"],
        published: 2013/02/02,
        …       
    },
    tags: ["othertag"]
} 
```

我们的用户应该能够搜索/过滤他们的文件：

*   用户 1：显示“人”数组中“汤姆”所在的所有文件
*   用户 1：显示 2013/01/01 和 2013/02/01 之间“创建”的所有文件
*   用户 1：显示所有“许可”“免费”和“评级”大于 2 的文件
*   用户 2：显示“2012”中“已发布”并标记为“重要”的所有文件
*   ...

应该像在 OS X 中使用智能文件夹一样过滤结果。在上传/存储文件之前定义各个元数据字段。但之后它们也可能发生变化，例如，用户 1 可以将元数据字段“people”重命名为“cast”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:31:57.520

正如@WiredPrairie 所说，字段中的`metadata`字段看起来是可变的，可能取决于用户输入的内容，受以下支持：

> 用户 1 可以将元数据字段“people”重命名为“cast”。

MongoDB 无法创建变量索引，因此您只需将其中的每个新字段`metadata`都添加到复合索引中，但是您可以执行如下键值类型结构：

```
var file1 = {
    id: 123, name: "mypicture", owner: 1
    metadata: [
        {k: people, v:["Ben", "Tom"]},
        {k: created, v:2013/01/01},
    ],
    tags: ["tag1", "tag2", "tag3", "tag4"]
} 
```

这是执行此操作的一种方法，允许您在字段`k`内`v`动态索引两者。`metadata`然后你会这样查询：

```
db.col.find({metadata:{$elemMatch:{k:people,v:["Ben"]}}}) 
```

然而，这确实引入了另一个问题。`$elemMatch`适用于顶层，而不是嵌套元素。想象一下，您想查找“Ben”是其中之一的所有文件`people`，您不能`$elemMatch`在这里使用，所以您必须这样做：

```
db.col.find({metadata.k:people,metadata.v:"Ben"}) 
```

此查询的直接问题在于 MongoDB 查询的方式。当它查询该`metadata`字段时，它会说：*“k”的一个字段等于“people”，“v”的一个字段等于“Ben”*。

由于这是一个多值字段，您可能会遇到即使“Ben”不在人员列表中的问题，因为他存在于`metadata`您实际上选择错误文档的另一个字段中；即这个查询会拿起：

```
var file1 = {
    id: 123, name: "mypicture", owner: 1
    metadata: [
        {k: people, v:["Tom"]},
        {k: created, v:2013/01/01},
        {k: person, v: "Ben"}
    ],
    tags: ["tag1", "tag2", "tag3", "tag4"]
} 
```

解决此问题的唯一真正方法是将动态字段分解到另一个不存在此问题的集合中。

但是，这会产生一个新问题，您不能再通过一次往返获得完整文件，也不能一次性聚合文件行及其用户定义的字段。所以总而言之，你通过这个失去了很多能力。

话虽如此，您仍然可以执行很多查询，即：

*   用户 1：显示“人”数组中“汤姆”所在的所有文件
*   用户 1：显示 2013/01/01 和 2013/02/01 之间“创建”的所有文件
*   用户 1：显示所有“许可”“免费”和“评级”大于 2 的文件
*   用户 2：显示“2012”中“已发布”并标记为“重要”的所有文件

使用此模式，所有这些仍然是可能的。

至于哪个更好——RDBMS还是NoSQL；在这里很难说，我想说如果做得好，在查询这个结构时两者都可以很好。

# python - 嵌套循环的双重中断

> ID：15174524
> 
> 赞同：3
> 
> 时间：2013-03-02T12:34:18.763
> 
> 标签：python, python-3.x, primes

我见过很多不同的方法来一次跳出两个嵌套循环，但是对于我的代码来说最快和最简单的方法是什么？

```
primes = [2]
for a in range(3, 500, 2):
    for b in range(2, int(a ** 0.5 + 0.5)):
        if a % b != 0:
            primes.append(a)
        if a % b == 0:
            [x for x in primes if x != a]
            # double break 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T12:36:05.300

将循环放在一个函数中并使用`return`关键字：

```
def func(primes):
    for a in range(3, 500, 2):
        for b in range(2, int(a ** 0.5 + 0.5)):
            if a % b != 0:
                primes.append(a)
            if a % b == 0:
                [x for x in primes if x != a]
                return

primes = [2]
func(primes) 
```

当它使程序员编写模块化代码时，这往往是一件好事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T12:36:26.067

将双循环重构为函数并用于`return`中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T12:54:59.357

如果您不想使用函数，则可以使用变量。这里是`flag`

```
 primes = [2]
    flag = 0
    for a in range(3, 500, 2):
        for b in range(2, int(a ** 0.5 + 0.5)):
            if a % b != 0:
                primes.append(a)
            if a % b == 0:
                [x for x in primes if x != a]
                flag = 1
                break
        if flag:
            break 
```

# android - 如何禁用textview onClick的闪烁

> ID：15174533
> 
> 赞同：5
> 
> 时间：2013-03-02T12:35:48.763
> 
> 标签：android

我有`TextView`一个`onClickListener()`. 当我点击`TextView`它时它会闪烁。如何禁用此效果？

这是XML

```
<TextView
                android:id="@+id/descriptionText"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="@color/background"
                android:ellipsize="end"
                android:paddingTop="4dp"
                android:paddingLeft="8dp"
                android:maxLines="3"
                /> 
```

我试图删除`android:ellipsize`和`android:maxLines`标签 - 没有效果。

这是代码：

```
accountDescriptionTextView = (TextView) v.findViewById(R.id.descriptionText);

        accountDescriptionTextView.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            if (descriptionOpened)
            {
            //  accountDescriptionTextView.setEllipsize(TextUtils.TruncateAt.END);
            //  accountDescriptionTextView.setMaxLines(3);
                descriptionOpened = false;
            }
            else
            {
            //  accountDescriptionTextView.setEllipsize(null);
            //  accountDescriptionTextView.setMaxLines(100);
                descriptionOpened = true;
            }
        }
    }); 
```

我需要具有注释功能，但即使注释了这些行，我仍然可以看到 textview 是如何闪烁的。

当我将手指放在屏幕上时，文字就会消失，而当我将手指移开时，文字就会消失。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T12:52:06.713

Android 使用选择器为小部件的按下状态赋予不同的颜色。

`android:textColor`如果您不想要这种行为，您可以为和使用纯色`android:textColorHighlight`。

检查[TextView 文档](http://developer.android.com/reference/android/widget/TextView.html)。

# javascript - 如何在点击时动态添加 JSP 页面

> ID：15174537
> 
> 赞同：1
> 
> 时间：2013-03-02T12:36:30.513
> 
> 标签：javascript, jquery, html

我有一个如下链接：

```
 <font size="2"><a class="pull-right" id="pageAdd" href=""  title="add new page"><i
 class="icon-plus-sign"></i></a></font> 
```

和一个jQuery脚本如下

```
 <script type="text/javascript">
         $(document).ready(function(){
          $("#pageAdd").click(function() {       .................(1)
                $.get('WEB-INF/views/diary/createPage.jsp', function(data) {
         $("#newPage").html(data);
                });
         });
        }); 
```

我正在尝试将 createPage.jsp 添加到以下 div

```
 <div id="newPage">
         </div> 
```

我已经使用萤火虫进行了调试。执行在 jquery 内部进行，但在第 1 行之后跳出。知道问题出在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:39:46.490

您的 WEB-INF 文件夹对 HTTP 调用不可见，请尝试使用 $.get()`/views/diary/createPage.jsp`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T12:43:45.210

你的 JavaScript 似乎没问题。在标记 (1) 处，您将一个函数添加到 onClick 事件。当你在 Firebug 中调试时，你可能只看到你的函数被添加，而不是被调用。

链接`WEB-INF/views/diary/createPage.jsp`对我来说看起来很奇怪。您的 war 文件不会从 WEB-INF 目录中向浏览器提供任何内容。

如果可以手动浏览到`http://localhost:8080/YOUR_CONTEXT/views/diary/createPage.jsp`

打开 Firebugs 网络视图：您能看到对 的请求`views/diary/createPage.jsp`吗？由于相对路径的计算方式，您的 JavaScript 可能会将请求发送到错误的路径

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T12:46:25.580

我认为您还应该将href从“”更改为“#”或在onclik中返回false，否则浏览器可能会重新加载页面并中断脚本执行。

# windows-runtime - WinRT：解析 XML 时找不到“位置”

> ID：15174548
> 
> 赞同：0
> 
> 时间：2013-03-02T12:37:37.150
> 
> 标签：windows-runtime, linq-to-xml, windows-store-apps, windows-store

我正在尝试解析一些简单的 XML，如下所示：

```
XElement thisLevel = from l in xmlElements.Descendants("Level")
                        where l.Element("LevelNum") == thisLevel
                        select l; 
```

但是我在“级别”上收到错误消息：

> 找不到源类型“System.Collections.Generic.IEnumerable”的查询模式的实现。'哪里' 没有找到。您是否缺少“System.Linq”的引用或使用指令？

奇怪的是我可以抓住后代：

```
var levels = xmlElements.Descendants("Level"); 
```

那行得通，但我似乎不知道它在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T12:51:32.293

正如 ChrisF 提到的，这些 using 语句都是必需的：

```
using System.Xml.Linq;
using System.Linq; // this one was missing 
```

我原以为 System.Xml.Linq 会涵盖所有与 linq 相关的内容。

谢谢，克里斯F！

# c# - Dispatcher.Invoke 中的代码何时执行？

> ID：15174549
> 
> 赞同：0
> 
> 时间：2013-03-02T12:37:47.440
> 
> 标签：c#, wpf, multithreading, dispatcher

在 C# WPF 项目中，我有一个需要刷新一些用户控件的后台线程。为此，我使用了 Dispatcher.Invoke：

```
 Dispatcher.Invoke(DispatcherPriority.Normal, (MethodInvoker)delegate()
    {
        // Code
    } 
```

但我想知道：

*   什么时候委托里面的代码会在主线程上执行？
*   要执行它，可以停止通常在主线程上运行的方法吗？
*   使用 Dispatcher.Invoke 会导致竞争条件吗？

非常感谢，伊曼纽尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T12:47:04.440

> 什么时候委托里面的代码会在主线程上执行？

如果所有`operations with priority greater than Normal got a chance to execute`.

> 要执行它，可以停止通常在主线程上运行的方法吗？

Invoke 方法使委托在主线程上同步执行，但如果要异步执行，则需要使用 BeginInvoke。如果某个委托在主线程上运行，您的`delegate will get queued and will run once executing operation gets completed`. 但是，除非委托被执行，否则您的后台线程将不会前进。

> 使用 Dispatcher.Invoke 会导致竞争条件吗？

`No`，它不会因为委托在调度程序队列中排队。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T12:44:53.217

1.  正是当 UI 线程能够在`SynchronizationContext.Send`调用时切换其执行。
2.  执行时，通常在主线程上运行的方法将完成运行（包括其他伪非完成条件，如`yield`or `await`），然后运行您的函数。
3.  不。

# javascript - 如何用javascript模拟文件选择？

> ID：15174550
> 
> 赞同：2
> 
> 时间：2013-03-02T12:37:50.793
> 
> 标签：javascript

我尝试以编程方式模拟用户单击 html 元素类型 input:file 以在 Firefox 浏览器上使用 javascript 将文件上传到网站。我的 javascript 文件中的以下 javascript 代码模拟并打开文件对话框：

```
var target_element; 
var dispatchMouseEvent = function(target, var_args) { 
    var e = document.createEvent("MouseEvents");
    e.initEvent.apply(e, Array.prototype.slice.call(arguments, 1));
    target.dispatchEvent(e); 
};

target_element = window.content.document.getElementById("DivElement");
dispatchMouseEvent(target_element, 'mouseover', true, true);
dispatchMouseEvent(target_element, 'mousedown', true, true); 
dispatchMouseEvent(target_element, 'mouseup', true, true); 
dispatchMouseEvent(target_element, 'click', true, true); 
```

但我找不到一种方法来以编程方式模拟文件对话框上文件的选择，就像用户选择文件并单击文件对话框的打开按钮一样。用javascript可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T12:39:54.450

这将是不可能的，而且有充分的理由。如果您可以在客户端自动选择文件，您将为大规模破坏安全和隐私打开大门。

# ios - iOS 应用程序进入后台状态时启动线程

> ID：15174555
> 
> 赞同：0
> 
> 时间：2013-03-02T12:38:50.200
> 
> 标签：nsthread, ios, objective-c, nsthread, application-state

我有一个要求，当应用程序进入后台状态时，我需要创建和启动一个线程。Created Thread 的功能是从本地数据库中获取数据并上传到服务器，我不需要对 UI 进行任何更新。我的问题是：

1.  我应该在哪里创建线程 - 在`applicationWillResignActive`方法中还是在`applicationDidEnterBackground`？
2.  哪种是创建线程的最佳方式 - [nsthread](/questions/tagged/nsthread "显示标记为“nsthread”的问题")方式或 GCD 或 Posix 方式？

我尝试过的事情

1.  我已经在 Android 上工作过，所以我知道如何实现这种情况，但我是 iOS 新手，所以我开始有点困惑。
2.  我刚刚尝试了 with NSThread 概念，但它不起作用。以下是我尽我所知编写的代码：

    ```
    - (void)applicationWillResignActive:(UIApplication *)application {
         [NSThread detachNewThreadSelector:@selector(FetchReportFromDBAndUpload) toTarget:self withObject:nil];
    }

    - (void)FetchReportFromDBAndUpload {
         NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
         //Check for internet connection and fetch data from DB and upload to server
         [pool release];
    } 
    ```

这是创建线程的正确方法，还是我需要做一些更改？如果没有，请指导我如何实现这一目标。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:08:17.277

您必须从 AppDelegate 的方法`beginBackgroundTaskWithExpirationHandler:`中调用该类的方法。此方法将您的任务标记为后台任务，因此当应用程序进入后台状态时系统不会终止它。（请注意，与 VoiceIP、播放音乐、GPS 跟踪无关的后台任务仍然限制在大约 10 分钟的后台执行时间，即它们不会永远运行。）`UIApplication``applicationDidEnterBackground:`

以下是更详细的信息和代码示例：http: [//developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

# php - 在自定义登录和注册页面上重定向用户，默认情况下只允许管理员登录 wp-login.php

> ID：15174557
> 
> 赞同：0
> 
> 时间：2013-03-02T12:39:00.723
> 
> 标签：php, wordpress, wordpress-theming

我希望用户只能通过自定义页面而不是默认页面注册和登录，而是只有管理员可以通过默认 wp-login.php 登录

我找到了这个..但它在同一页面上重定向登录和注册。google.com 在这种情况下。

```
add_action('init','possibly_redirect');

function possibly_redirect(){
 global $pagenow;
 if( 'wp-login.php' == $pagenow ) {
  wp_redirect('http://google.com/');
  exit();
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T15:42:27.900

我讨厌发布“你不能做那个答案”，因为它很容易出错，但一般来说你不能这样做。在有人登录之前，WordPress 不知道该人是否是管理员。您将如何根据不可用的信息进行切换？

我能想到的只有几个不太好的解决方案：

1.  如果您的管理员有一个静态 IP 或静态 IP，您可以根据它进行切换。当然，如果管理员尝试从妈妈家或咖啡店登录，这将不起作用。
2.  您可以设置一些非常长期的 cookie（不是 WordPress 使用的任何 cookie），将用户标记为管理员并打开它。当然，这仅适用于使用设置了 cookie 的计算机上的用户。
3.  您可以创建两个自定义登录页面-`user-login.php`和`admin-login.php`- 并且永远不要公开发布后者。然后，您将所有登录重定向到`user-login.php`除了尝试访问之外`admin-login.php`，这大概只有您的管理员知道。这实际上只是混淆，但也许这对你有用。

任何一种解决方案都会不稳定，有时会起作用，但有时会不起作用。

*登录后将*用户重定向到某个特定页面非常容易。困难的部分是在用户登录*之前*为用户使用不同的登录页面。

# c# - 如何使用报表查看器 vs 2010 添加报表数据源

> ID：15174558
> 
> 赞同：1
> 
> 时间：2013-03-02T12:39:15.833
> 
> 标签：c#, visual-studio-2010, reportviewer

当我单击“选择数据源”时

然后它弹出并“选择报告中使用的数据源的实例”，它有 2 行

```
report data source | data source instance
-----------------------------------------
dataset1           |configblindingsource 
dataset2           |userblidingsource
----------------------------------------- 
```

图片：[http ://www.thaicreate.com/upload/stock/20130302152411.jpg](http://www.thaicreate.com/upload/stock/20130302152411.jpg)

我想添加数据集3

如何将 dataset3 添加到我的报表数据源？

我现在使用 1 个报告和 2 个表格 我想使用 1 个报告 3 个表格

但我找不到将 dataset3 添加到报告中的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:22:36.620

为了添加数据集，在查看 rdlc 文件时，打开“报告数据”窗口（如果您还没有打开它，请打开它的视图->报告数据）。在该窗口的左上角，单击 New->DataSet。

# javascript - 如何将多个数据放在一个数据表列中？

> ID：15174560
> 
> 赞同：14
> 
> 时间：2013-03-02T12:39:21.923
> 
> 标签：javascript, json, jquery-datatables

我正在使用[数据表](http://www.datatables.net/)来表示来自 JSON 的数据。我的 JSON 如下：

```
[{"name": "John Doe", "email": "john@gmail.com", "address" : "blah"}] 
```

在 Datatables 中，我可以使用以下内容轻松地在 3 个差异列中显示这 3 个信息：

```
columnDefs = [ 
                { "mData": "name", "aTargets":[0] },
                { "mData": "email", "aTargets":[1] },
                { "mData": "address", "aTargets":[2] }
             ]; 
```

但问题是我想在第一列显示“姓名”和“电子邮件”，然后在第二列显示“地址”。我怎样才能做到这一点？请指导。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2017-02-13T06:47:51.950

为了让它更短，你可以这样写

```
"aoColumns": [
    { "mData": "i_id" },
    { "mData": "i_name" },
    { "mData": function (data, type, dataToSet) {
        return data.i_id + "<br/>" + data.i_name;
    }}
], 
```

和结果

[![在此处输入图像描述](../Images/d071458fc08b7bd5fdc4217aea06f91e.png)](https://i.stack.imgur.com/c0bvq.jpg)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-02-19T12:50:04.360

您可以使用函数来获取和打印您想要的任何数据，而不是将姓名或电子邮件放在列定义的第一列中。有关更多详细信息，请参阅此页面上的 mData 部分：[https](https://datatables.net/usage/columns) ://datatables.net/usage/columns 。在下面的示例中，我使用了 aoColumns，因为我以这种方式测试了我的答案；但在引用的链接中，他们使用了 aoColumnDefs 并详细说明了 type 和 dataToSet 字段。无论您使用 aoColumns 还是 aoColumnDefs，这种方法都有望帮助任何阅读此答案的人。

例如，使用 aoColumns 而不是 aoColumnDefs：

```
aoColumns = [ 
    { "mData": getNameAndEmail },
    { "mData": "address" }
]; 
```

然后在 JavaScript 范围内定义 getNameAndEmail 函数，该函数接受三个参数：传回的数据，对数据的操作类型，如果类型为“设置”，则设置数据。

```
function getNameAndEmail(data, type, dataToSet) {
    return data.name + "<br>" + data.email;
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2018-04-24T14:32:52.587

```
columnDefs = [ 
            { 
             data: {name : "name", email : "email", address : "address"},
             mRender : function(data, type, full) {
                return data.name+' '+data.email+' '+data.address; 
              } 
            }
         ]; 
```

**上面的代码可以在一个数据表的一列中渲染多个数据。**

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-04-02T21:54:39.627

[你可以使用这样的语法：
它对我有用。]
`"columnDefs":[{ "targets":0,//column index "data":"first_name", "render":function(data,type,row){ return data+' '+row['last_name']; } }]`

[谢谢]

# mongodb - mongodb更新字段异步驱动程序

> ID：15174561
> 
> 赞同：0
> 
> 时间：2013-03-02T12:39:22.367
> 
> 标签：mongodb, asynchronous, driver

如何使用 mongodb allanbank 异步驱动程序更新集合中的字段？

当我说

```
db.getCollection("coll_name").update( //$NON-NLS-1$
                 BuilderFactory.start().add("_id", docObjectId),
                 BuilderFactory.start().add("field", value)); //$NON-NLS-1$ 
```

我将必要的字段更新为新值，但文档中的所有其他字段都消失了。换句话说，`$set`在 mongo shell 中的类比是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T03:55:41.637

您需要将 $set 运算符直接用于子文档。例如，

```
DocumentBuilder update = BuilderFactory.start();
update.push("$set").add("field", value); //$NON-NLS-1$

db.getCollection("coll_name").update( //$NON-NLS-1$
             BuilderFactory.start().add("_id", docObjectId),
             update); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T13:10:53.863

我非常感谢 Rob Moore 的回答，他的帮助非常宝贵。但是有一点不准确：我必须添加才能`pop()`使一切正常。所以：

```
DocumentBuilder update = BuilderFactory.start();
update = (DocumentBuilder)update.push("$set").add("field", value).pop(); //$NON-NLS-1$ //$NON-NLS-2$

db.getCollection("coll").update( //$NON-NLS-1$
    BuilderFactory.start().add("_id", docObjectId), //$NON-NLS-1$
    update); 
```

# java - Key Listener 未检测到空格键

> ID：15174571
> 
> 赞同：1
> 
> 时间：2013-03-02T12:40:31.540
> 
> 标签：java

我有 JTextPane 并为其添加了关键侦听器。代码如下：

```
class MainPanel extends JPanel {
    JTextPane codePane = new JTextPane(); 

    MainPanel() {
        add(new JScrollPane(codePane));
        codePane.addKeyListener(new KeyHandler());
    }

    private class KeyHandler extends KeyAdapter {
        @Override
        public void keyTyped(KeyEvent ev) {
            if (ev.getKeyCode() == KeyEvent.VK_SPACE) {
                System.out.println("space");
            } else {
                System.out.println("char");
            }
        }
    }
} 
```

当我输入“sp”时，我得到 3 次：char。它甚至没有检测到按空格键。如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T13:00:06.763

你*可以*检查一下`KeyEvent#getKeyChar`，但是....

`KeyListeners`在与来自 Swing 组件的交互时有一个主要限制`KeyEvents`，因为它们需要来自组件的焦点。永远不要使用这些。[键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)不需要焦点，可用于映射`KeyStrokes`。

`JTextComponents`话虽如此，诸如此类的首选方法`JTextPane`是使用`DocumentListener`.

请参阅：[DocumentListener 指南](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T12:54:48.110

而不是覆盖`keyTyped()`方法，覆盖`keyReleased()`或`keyPressed()`方法。它可能会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T00:54:19.550

你可以试试这个：

```
if (Character.isSpaceChar(ev.getKeyChar()) {
            System.out.println("space");
        } 
```

这个对我有用

# php - PHP $_POST 不更新

> ID：15174572
> 
> 赞同：-1
> 
> 时间：2013-03-02T12:40:40.177
> 
> 标签：php, mysql

这是我的代码（整页：cust_edit.php）：

```
<?
session_start(); 
ob_start();
include "../sql.php";
if (!$_SESSION['username']) {
    @include "login.php";
} else {
@include "top.php";
?>

<?
if (isset($_POST['submit'])) {
    $id = $_POST['id'];
    $name = $_POST['name'];
    $date = $_POST['date'];
    $text = $_POST['text'];

    mysql_query("UPDATE custs SET name='$name', date='$date', text='$text' WHERE id='$id'");
    echo '<p align="center"><b>Updated</b></p>';
}

$gid = $id;

if (!isset($gid)) { 
    $gid = addslashes($_GET['id']); 
}

$query = mysql_query("SELECT * FROM custs WHERE id='$gid'");
$x = mysql_fetch_array($query);
echo '
    <br />
    <form name="f" action="cust_edit.php?id='.$x['id'].'" method="post">
        <table border="0" cellspacing="1" width="100%">
            <tr>
                <td width="70%" id="submitright">
                    <input value="'.$x['name'].'" type="text" name="name" size="30" maxlength="50">
                </td>
            </tr>
            <tr>
                <td width="70%" id="submitright">
                    <input value="'.$x['date'].'" type="text" name="date" size="30" maxlength="50">
                </td>
            </tr>
            <tr>
                <td id="submitright">
                    <textarea class="ckeditor" name="text" dir="rtl" cols="80" style="width: 70%">'.$x['text'].'</textarea>
                </td>
            </tr>
            <tr>
                <td align="left" width="70%" id="submitright">
                    <input type="submit" value="Update">
                </td>
            </tr>
        </table>
        <input type="hidden" name="id" value="'.$gid.'">
    </form>';
}
?>
<?
@include "bottom.php";
?> 
```

我的问题是，当我运行此脚本并更新页面时，页面正常显示，并且输入中显示了详细信息，但是当我单击“更新”按钮时，什么也没有发生-页面正在刷新，但是行：

```
mysql_query("UPDATE custs SET name='$name', date='$date', text='$text' WHERE id='$id'");
echo '<p align="center"><b>Updated</b></p>'; 
```

由于某种原因没有运行，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T12:43:43.930

```
<input type="submit" value="Update"> 
```

用。。。来代替

```
<input type="submit" name="submit" value="Update"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T13:27:56.547

[请不要](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)在新代码中使用 mysql_* 函数。它们不再被维护[并被正式弃用。](https://wiki.php.net/rfc/mysql_deprecation)看到[红框](http://uk.php.net/manual/en/function.mysql-connect.php)了吗？改为了解*[准备好的语句](http://en.wikipedia.org/wiki/Prepared_statement)*，并使用**[PDO](http://php.net/pdo)**或**[MySQLi](http://php.net/mysqli)** -[本文](http://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择**[PDO](http://php.net/pdo)**，[这里有一个很好的教程](http://www.brightmeup.info/article.php?a_id=2)。

并且正如其他人提到的那样，不要使用[php short open tag](http://www.php.net/manual/en/ini.core.php#ini.short-open-tag)。自 PHP 5.4 起不支持。大部分时间它也在这里讨论过，[php short_open_tag 问题](https://stackoverflow.com/questions/3561423/php-short-open-tag-problem)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T12:50:07.963

1.  一些网络服务器将不接受`<?`. 改为使用`<?php`。
2.  使用 mysqli ( [MySQL 改进扩展](http://php.net/manual/en/book.mysqli.php)) 而不是 mysql
3.  您的提交没有`name`属性`<input type="submit" name="submit" value="Update">`。或者....

您可以替换此行：

```
if (isset($_POST['submit'])) { 
```

在这

```
if (isset($_POST['id'])) { 
```

# sip - kamailio imsdroid 一种方式音频清晰，另一种方式只是风和抖动的声音

> ID：15174574
> 
> 赞同：1
> 
> 时间：2013-03-02T12:40:48.997
> 
> 标签：sip, voip, sip-server, kamailio, openser

我已将 Kamailio 安装为 sip 服务器/注册器并使用默认配置。我有这种情况：使用 IMSdroid（扩展 100）的移动客户端使用 Linphone（扩展 300）的 windows 客户端

注册状态：两个客户端都注册成功

两个客户端都使用我的无线 WIFI 调制解调器连接到 kamailio。

我拨打（从 IMSdroid）到 linphone：两者都响铃 OK。

在 IMSdroid 中听到的音频正常。在 windows linphone 中听到的音频只是风声和抖动（或火车声，当我大声说话时它会变得更大声）

双方视频都可以（双方客户都可以清楚地显示视频）

两个客户端都连接到 kamailio（公共互联网 IP）

问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T16:16:06.537

您说软电话和 Kamailio 都使用公共 IP 地址，如果您不强制使用 rtpproxy（或其他类似应用程序）进行 RTP 中继，那么 RTP 流将直接在软电话之间发送。

这可能是软件电话的错误、网络或声卡的问题、配置错误的本地防火墙或运营商阻止了 VoIP。

尝试使用其他软件电话，例如 Jitsi 或 X-Lite，看看您是否遇到同样的问题。

# php - 如何在 Sublime Text 2 上集成 Codeigniter 自动完成功能？

> ID：15174581
> 
> 赞同：5
> 
> 时间：2013-03-02T12:41:36.370
> 
> 标签：php, codeigniter, sublimetext2

Sublime Text 是我见过的最好的编辑器之一。我想将它用于我的 codeigniter 项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T12:46:29.867

[https://github.com/MikeCase/SublimeText-2-Snippets](https://github.com/MikeCase/SublimeText-2-Snippets)

您还可以在 Sublime、Notepad++ 中创建自己的代码片段……现在很多文本编辑器都具有此功能。

# objective-c - 以编程方式禁用列的“创建排序描述符”

> ID：15174584
> 
> 赞同：1
> 
> 时间：2013-03-02T12:41:44.697
> 
> 标签：objective-c, cocoa, data-binding, nstableview, nssortdescriptor

我有一个使用可可绑定的 NSTableview。我需要禁用表格中的排序，为此我在stackoverflow上找到了以下文本：

> 如果使用 Cocoa 绑定来管理数据，排序描述符由表列生成并设置为 NSArrayController。要停止它，只需打开表列绑定的检查器，选择值，然后取消选中“创建排序描述符”。

这很好用，但是在运行时添加了一些列，我需要在运行时以编程方式做同样的事情。有人可以指出我正确的方向吗？一个示例或教程或任何可以帮助我在运行时做到这一点的东西。基本上我需要做的就是禁用在运行时创建的列的排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:19:47.277

如果您以编程方式在数组控制器上设置绑定，您应该能够像这样传递额外的绑定选项。

```
 NSMutableDictionary *bindingOptions = [NSMutableDictionary dictionary];
    [bindingOptions setObject:[NSNumber numberWithBool:NO]
                       forKey:NSCreatesSortDescriptorBindingOption];
        [column bind:@"value" toObject:self.arrayController withKeyPath:[NSString stringWithFormat:@"arrangedObjects.%@",c.key] options:bindingOptions]; 
```

# php - php nl2br 反之亦然问题

> ID：15174593
> 
> 赞同：1
> 
> 时间：2013-03-02T12:42:45.597
> 
> 标签：php, nl2br

我目前正在使用文本区域，用户可以在其中提交他们的输入。我正在使用 php`nl2br`将任何新行转换`<br>`为如下：

```
$review_desc = nl2br($this->_getParam('comment')); 
```

但是现在当用户编辑他们的文本时我遇到了问题，因为我得到的内容如下：

```
test1<br />
test2<br />
test3<br />
test4<br /> 
```

当用户在 textarea 中编辑其内容时，它会在最后在线添加新`<br/>`内容。我该如何防止这种情况？另外建议是否有其他可以检测超链接等形式的 textarea 替代品？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:47:20.280

您可以将用户提供的文本区域的内容存储在数据库中；所以无需调用 nl2br。

然后只调用 nl2br，一旦您从数据库中检索到相同的文本并想要打印到网页。

当您希望用户在 textarea 中再次对其进行编辑时，请从数据库中检索当前内容，并且这次不要调用 nl2br。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:05:22.367

如果您使用“\n”保留文本，您可以简单地在 textarea 中插入文本，但如果您使用 保留文本`<br />`，在将文本插入 textarea 之前，您应该替换`<br />`“\n”，例如，`$text = str_replace("<br />","\n",$text);`或者尝试从这个页面[http： //php.net/manual/en/function.nl2br.php](http://php.net/manual/en/function.nl2br.php)，注释中有很多函数可以替换`<br />`\n

# java - 类#isAnnotationPresent 不工作

> ID：15174599
> 
> 赞同：0
> 
> 时间：2013-03-02T12:43:15.993
> 
> 标签：java, reflection, annotations

我正在搜索类列表以检查类是否具有 Annonation。这是代码：

```
 if (clazz.getAnnotations().length > 0){
                            System.out.println(clazz.getAnnotations()[0]);
                        }
                        if (clazz.isAnnotationPresent(Manifest.class)){
                            System.out.println(clazz.getName());
                        } 
```

第一个 if 语句仅用于调试。一类打印：

```
@bot.script.Manifest(description=test, version=1.0, name=test) 
```

这和 Manifest.class 完全一样，但是为什么 clazz.isAnnotationPresent 不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:27:28.150

从评论看来，您有几个类加载器。带注释的类及其 Manifest 注释由第一个类加载器加载，包含`if`问题中测试的类由第二个类加载器加载，并使用第二个类加载器重新加载 Manifest 类。

因此，您测试 if`Manifest.class`是否与 相同`clazz.getAnnotations()[0]`，但它们不是，因为尽管它们具有相同的名称，但它们是两个不同的类，因为它们由两个不同的类加载器加载。

很难告诉你如何解决这个问题，因为我们不知道你的应用程序做了什么，它是如何做的以及在什么环境中做的。但是您应该确保只有一个类加载器可以加载该类。

例如，如果在 webapp 中运行，该类应该在容器的 claspath 中，或者在 webapp 的类路径中（WEB-INF/classes 和 WEB-INF/lib/xxx.jar），但不能同时在两者中。

# c# - 在 c# 全局连接中用于所有类

> ID：15174601
> 
> 赞同：2
> 
> 时间：2013-03-02T12:43:33.600
> 
> 标签：c#, sqlconnection

我有一个连接字符串保存到`Properties.Settings.Default`，我需要在所有类中使用一个sql连接，而不必每次都声明它，那么它应该如何声明呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T12:50:14.397

可以借助任何类中的 STATIC 变量来完成

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T12:51:55.993

你实际上不需要在`SqlConnection`任何地方都使用一个。更好的方法是创建一个类来管理您的数据访问。通常这是您的数据访问层 (DAL) 的职责。DAL 是一组处理所有与数据库相关的东西的类。

为此目的，一个非常简单的类可能是这样的：

```
public class DatabaseManager
{
    private static DatabaseManager _instance;
    private DatabaseManager()
    {
    }

    static DatabaseManager()
    {
        _instance = new DatabaseManager();
    }

    public DatabaseManager Instance
    {
        get { return _instance; }
    }

    private string GetConnectionString()
    {
        return Properties.Settings.Default.MyConnectionString;
    }

    public SqlConnection CreateConnection()
    {
        return new SqlConnection(GetConnectionString());
    }
} 
```

您可以扩展此类以包含其他方法来执行您的查询。

我强烈建议您使用像[Entity Framework这样的](http://msdn.microsoft.com/en-us/data/ef.aspx)[ORM（对象关系映射器）](http://en.wikipedia.org/wiki/Object-relational_mapping)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T12:49:55.467

每当您实例化一个新对象时，都会向其构造函数传递对该连接的引用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T12:50:55.333

我在这样的旧项目中设置了类似的东西。值得注意的是`SqlConnection`，由于[连接池](http://msdn.microsoft.com/en-gb/library/8xx3tyca.aspx)，您应该始终对所有操作使用 new 。

```
public static class SqlConnectionUtil
{
    public static string DefaultConnectionString { get; private set; }

    static SqlConnectionUtil()
    {
        SqlConnectionUril.DefaultConnectionString = 
                Properties.Settings.Default.TheConnectionString;
    }

    public static SqlConnection Create()
    {
        return new SqlConnection(SqlConnectionUtil.DefaultConnectionString);
    }
} 
```

然后你会像这样使用它。

```
using (var connection = SqlConnectionUtil.Create())
{
    using (var command = connection.CreateCommand())
    {
        // do things.
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T12:50:45.180

您可以使用此代码获取连接字符串

```
 var      defaultConn= new SqlConnection(ConfigurationManager.AppSettings["defaultConn"].ToString()); 
```

# android - XML UI 未在 android 上正确显示 - 按钮和文本输入未显示

> ID：15174603
> 
> 赞同：0
> 
> 时间：2013-03-02T12:43:39.510
> 
> 标签：android, xml, user-interface

我刚刚开始阅读 android 开发，所以我敢打赌有一个非常简单的解决方案。

我按照 Android 开发者网站上的指南构建了示例 UI。图形布局显示按钮和文本输入框没有问题，因此代码似乎没有问题。由于某种原因，它不会显示在 AVT 上，或者当我在手机上安装 APK 时……我正在使用 Galaxy Nexus，并将 AVT 也设置为 Galaxy Nexus。

我已经更新了 ADT 并尝试了几件事，但我假设我可能忘记配置一些东西？有人可以帮忙吗？

我是新手，所以很好;）

这是xml代码：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal">

<EditText android:id="@+id/edit_message"
    android:layout_weight="1"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:hint="@string/edit_message" />
<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/button_send" 
    android:onClick="sendMessage" />

</LinearLayout> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:08:29.687

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal">

<EditText android:id="@+id/edit_message"    
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:hint="@string/edit_message" />
<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/button_send" 
    android:onClick="sendMessage" />

</LinearLayout> 
```

还请检查您是否在传递此 xml 布局的活动中调用了 setcontentview 函数

# android - 从 EditText 禁用软键盘但仍允许复制/粘贴？

> ID：15174606
> 
> 赞同：33
> 
> 时间：2013-03-02T12:43:46.440
> 
> 标签：android, android-edittext

嗨，我正在制作**自定义拨号器**，所以我创建了自己的输入板。

问题是如何禁用 EditText**但仍允许剪切/复制/粘贴？**股票拨号器可以做到这一点。

我已经尝试过`android:focusable="false"`，但它禁用了剪切/复制（尽管仍然可以粘贴）。

我还尝试以`inputType`编程方式禁用禁用所有三个命令的程序：

```
myEditText.setInputType(InputType.TYPE_NULL); //Can't cut/copy/paste 
```

从清单中禁用它也不起作用：

```
android:configChanges="orientation|keyboardHidden" //Keyboard still popped up 
```

有什么解决办法吗？谢谢

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-11-24T09:28:12.073

经过数小时的研究，我终于找到了适用于所有 API 版本的解决方案。希望这可以节省某人的时间。

如果您正在为 API >= 11 进行开发，则解决方案很简单，或者：

1）在EditText的xml文件中添加以下两个属性

```
android:inputType="none"
android:textIsSelectable="true" 
```

或者

2）以编程方式执行以下操作

```
myEditText.setInputType(InputType.TYPE_NULL);
myEditText.setTextIsSelectable(true); 
```

你完成了。

如果您还想满足 API < 11 的要求，我发现如果您想选择文本进行复制粘贴，则无法禁用键盘弹出。将 focusable 设置为 false 将禁用键盘，但它无济于事，因为它也会禁用您选择文本的能力。我在 stackoverflow 中找到的任何其他解决方案要么不起作用，要么同时禁用文本选择。

解决这个问题的一种丑陋方法就是这样..

首先在EditText的xml文件中添加这个属性

```
android:editable="false" 
```

是的，这已被弃用，但对于在 API 版本 < 11 中使 EditText 不可编辑是必需的。

接下来，我们需要在键盘出现时立即隐藏它，这样我们就可以继续选择文本而不会被键盘挡住。

使用下面的代码来检测键盘出现（从[https://stackoverflow.com/a/9108219/1241783](https://stackoverflow.com/a/9108219/1241783)获得的解决方案），并立即隐藏它。

```
if (android.os.Build.VERSION.SDK_INT < android.os.Build.VERSION_CODES.HONEYCOMB)
{
    final View activityRootView = findViewById(R.id.activityRoot);
    activityRootView.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
    @Override
        public void onGlobalLayout() {
            Rect r = new Rect();
            //r will be populated with the coordinates of your view that area still visible.
            activityRootView.getWindowVisibleDisplayFrame(r);

            int heightDiff = activityRootView.getRootView().getHeight() - (r.bottom - r.top);
            if (heightDiff > 100) { // if more than 100 pixels, its probably a keyboard...

            //Hide the keyboard instantly!
            if (getCurrentFocus() != null) 
            {
                InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(), 0);
            }
            }
         }
        });
} 
```

它适用于我的情况。尽管您可以在一瞬间看到键盘出现（这是丑陋的部分），但在撰写本文时我想不出任何其他方法可以使其正常工作。如果您有更好的解决方案，请发表评论！

如果这可以节省某人的时间，请告诉我:)

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-07-18T12:38:04.227

要禁用软键盘显示，保留复制/粘贴和光标功能，只需在您的活动中添加以下行：

```
getWindow().setFlags(WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM,
    WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-06-05T01:21:32.047

由于当前的最佳答案使用了已弃用的方法并且没有适合我的粘贴方法，因此这是另一种不使用旧方法的方法。但是，它确实尝试通过带有后备的反射来使用隐藏的方法。=)

我已经细分`EditText`为一个名为的新小部件`KeyboardlessEditText`，它仍然保留了所有很酷的编辑功能，而没有显示键盘。只需将文件放入并继续。

这篇文章的完整代码有点长，但只要 GitHub 不宕机，那么这将起作用：[https ://github.com/danialgoodwin/android-widget-keyboardless-edittext/blob/master/KeyboardlessEditText2 .java](https://github.com/danialgoodwin/android-widget-keyboardless-edittext/blob/master/KeyboardlessEditText2.java)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-02-16T06:07:33.150

要禁用系统键盘自动弹出`EditText`或`TextView`执行以下操作：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
    editTextView.setShowSoftInputOnFocus(false);
} else {
    editTextView.setTextIsSelectable(true);
    //N.B. Accepting the case when non editable text will be selectable
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-02T15:03:14.053

尝试这个

```
 EditText et = ... // your EditText

et.setKeyListener(null) //makes the EditText non-editable so, it acts like a TextView. 
```

无需子类。这与使您的 EditText 不可聚焦之间的主要区别在于 EditText 仍然有自己的光标 - 您可以选择文本等。它所做的只是抑制 IME 弹出自己的软键盘。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-03-25T21:53:24.197

我遇到了同样的问题，但后来我也想在双击后允许打字。经过数小时的搜索后，我找到了可行的解决方案（至少对我而言）。在你的 onCreate 方法中使用它：

```
editText.setCursorVisible(false);
editText.setTextIsSelectable(true);
editText.setShowSoftInputOnFocus(false);
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN);  // This just hide keyboard when activity starts 
```

这些行绝对可以解决问题..如果您想恢复它，请使用：

```
editText.setCursorVisible(true);
editText.setShowSoftInputOnFocus(true); 
```

要再次显示键盘，请使用：

```
private void showSoftKeyboard(View view) {
    InputMethodManager inputMethodManager = (InputMethodManager) getSystemService(INPUT_METHOD_SERVICE);
    view.requestFocus();
    inputMethodManager.showSoftInput(view, 0);
} 
```

要允许下次复制/粘贴，只需使用以下三行：

```
editText.setCursorVisible(false);
editText.setTextIsSelectable(true);
editText.setShowSoftInputOnFocus(false); 
```

对于进一步的键盘隐藏使用：

```
private void hideSoftKeyboard() {
    if(getCurrentFocus() != null) {
        InputMethodManager inputMethodManager = (InputMethodManager) getSystemService(INPUT_METHOD_SERVICE);
        inputMethodManager.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(), 0);
    }
} 
```

此代码适用于 API >= 21

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-11-13T17:18:28.743

由于我的自定义内联“假”输入仍然可见，因为在焦点移动到编辑文本后出现了 os 软键盘，因此有类似的需求。解决方案是让编辑文本隐藏软输入，直到之前的自定义输入小部件完成其编辑生命周期。

使用[@Bruce 的答案](https://stackoverflow.com/a/20173020/5401098)来获得灵感，还看到了一些相关的帖子，我将在最后附上。我发现有效的解决方案是：

```
fun setInputType(inputType: Int) {
        getEditText().setRawInputType(inputType)
        if (inputType == InputType.TYPE_NULL) {
            getEditText().setTextIsSelectable(true)
            getEditText().isCursorVisible = true
        }
    } 
```

必须`setRawInputType()`改用，因为从`InputType.TYPE_NULL`back 设置为`InputType.TYPE_TEXT_FLAG_MULTI_LINE`.

似乎有用户报告与呼叫有关的问题`setInputType(InputType.TYPE_NULL)`。见： [https ://issuetracker.google.com/issues/36907992](https://issuetracker.google.com/issues/36907992)

其他有用的相关帖子：

[如何在 Android 中通过 XML 使 EditText 不可编辑？](https://stackoverflow.com/questions/3928711/how-to-make-edittext-not-editable-through-xml-in-android/6174440#6174440)

[EditText 不可编辑](https://stackoverflow.com/questions/9470171/edittext-non-editable)

# c++ - 我可以强制 Visual Studio 使用 mingw 编译器吗

> ID：15174607
> 
> 赞同：15
> 
> 时间：2013-03-02T12:43:53.400
> 
> 标签：c++, visual-studio-2010, qt, mingw

我不喜欢 qt creator 作为 IDE 并且喜欢 VS，但我必须完全使用 mingw 编译器。悲剧 ：'（

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T01:58:11.423

只需设置一个 makefile 项目 - 这样您就可以告诉 VC 运行什么命令来编译您的文件。

除了 Visual Studio 项目之外，您还必须维护一个 makefile，但这并不是什么大问题，因为在这种情况下，VS 项目只是您希望 Visual Studio 了解的文件的列表。

不幸的是，VS 调试器在这种情况下没有用，但是 IDE 的所有代码导航都可以正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T12:51:04.993

您无法轻松替换 Visual Studio 中的 C++ 编译器。

但有一次（在 1990 年代），我将 Visual Studio 用作 Java 的简单编辑器。并且由于有例如 D 编程语言的扩展（嗯，这是我唯一使用过的），您当然可以通过大量工作使完整的 Visual Studio 与 g++ 或任何其他编译器一起用于任何语言，作为额外的“语言”。如果语言实现适合，它甚至可以与调试器一起使用。

只是现在使用支持您想要使用的工具的 IDE 要容易得多。例如，对于 g++，您有 Eclipse、Code::Blocks，甚至是旧的 DevC++ 等。哦，是的，还有 QT 的东西。

# java - java中的以下增量代码线程安全吗？

> ID：15174611
> 
> 赞同：8
> 
> 时间：2013-03-02T12:44:33.523
> 
> 标签：java, thread-safety

Java 代码：

```
public class IncreaseTest {
    public static int value = 0;

    public synchronized int increment() {
        return value++;
    }
} 
```

方法`increment()`线程安全吗？是不是一定要加修饰符关键字 `volatile`如下：</p>

```
 public static volatile int value = 0; 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-02T12:58:38.887

此代码不是线程安全的。实例方法将在一个实例上同步，如果您有多个实例，它们将不会使用同一个监视器，因此更新可以交错。

您需要从`value`字段中删除静态或将静态添加到`increment()`方法中。

此外，正如您`value`公开的那样，还有一个额外的问题是，可以在此方法之外更改或读取值，而无需使用同步，这可能导致读取旧值。

因此，将您的代码更改为以下代码将使其成为线程安全的：

```
public class IncreaseTest {
    private int value = 0;

    public synchronized int increment() {
        return value++;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-10T07:41:19.407

您可能应该使用[atomicvars](http://docs.oracle.com/javase/tutorial/essential/concurrency/atomicvars.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T12:48:39.897

如果您在两个线程中使用此方法，那么您确实需要 volatile 关键字。没有它，另一个线程可能无法获得最新的值。（C＃）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T13:00:28.763

我不认为这是线程安全的，因为静态变量是公共的，并且可以被其他线程以非线程安全的方式访问。为了线程安全，您必须按如下方式声明变量：

```
public static volatile int value; 
```

现在`value`是易失性的，将在同步块中访问。

# windows-8 - 图像旋转动画

> ID：15174612
> 
> 赞同：1
> 
> 时间：2013-03-02T12:44:35.457
> 
> 标签：windows-8, visual-studio-2012

我正在 Visual Studio 2012 C# 中制作一个 Windows 8 应用程序。我有一个图像'1.png'，我想以任何角度旋转它作为沿其中心点的动画。但我想在 c# 代码而不是 XAML 代码的帮助下做到这一点。

先感谢您。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T15:08:55.153

在您的 XAML 中，具有以下图像：

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <Image Source="/Assets/Logo.png" Width="300" RenderTransformOrigin="0.5, 0.5">
        <Image.RenderTransform>
            <RotateTransform x:Name="rotateTransform"/>
        </Image.RenderTransform>
    </Image>
</Grid> 
```

然后，在代码中，当您想要动画时编写以下内容（您以`Storyboard`编程方式创建，然后添加相关的`Timeline`. 请注意，您也可以根据`RotateTransform`需要创建 in 代码。

```
 async void MainPage_Loaded(object sender, RoutedEventArgs e)
    {
        await Task.Delay(500);

        Storyboard board = new Storyboard();
        var timeline = new DoubleAnimationUsingKeyFrames();
        Storyboard.SetTarget(timeline, rotateTransform);
        Storyboard.SetTargetProperty(timeline, "Angle");
        var frame = new EasingDoubleKeyFrame() { KeyTime = TimeSpan.FromSeconds(1), Value = 360, EasingFunction = new QuadraticEase() { EasingMode = EasingMode.EaseOut } };
        timeline.KeyFrames.Add(frame);
        board.Children.Add(timeline);

        board.Begin();
    } 
```

这会将对象旋转 360 度。

顺便说一句：我正在写一组帖子，展示一种更好的动画方式。它还没有完成，但它会让你大致了解如何为某些类型的动画获取框架。

[该系列的第一部分](http://socialeboladev.wordpress.com/2013/03/01/different-approach-for-animation-in-xaml-using-net-4-5-new-async-functionality-part-1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-03T07:54:54.867

谢谢沙哈尔！我以你的例子做了一个自定义控件。它实际上是一个环形图像的无限旋转。

微调器.xaml：

```
<UserControl x:Class="MyControls.Spinner"
...

    <Grid >
      <Image Source="/Assets/Images/spinner.png" Width="194" RenderTransformOrigin="0.5, 0.5">
        <Image.RenderTransform>
            <RotateTransform x:Name="rotateTransform"/>
        </Image.RenderTransform>
      </Image>
    </Grid>
</UserControl> 
```

微调器.cs：

```
namespace MyControls
{
public partial class Spinner: UserControl
{
    public Spinner()
    {
        InitializeComponent();
        this.Loaded += Spinner_Loaded;
    }

    private void PlayRotation()
    {
        Storyboard board = new Storyboard();
        var timeline = new DoubleAnimationUsingKeyFrames();
        Storyboard.SetTarget(timeline, rotateTransform);
        Storyboard.SetTargetProperty(timeline, new PropertyPath("(Angle)"));

        var frame = new EasingDoubleKeyFrame() { KeyTime = TimeSpan.FromSeconds(5), Value = 360, EasingFunction = new QuadraticEase() { EasingMode = EasingMode.EaseOut } };
        timeline.KeyFrames.Add(frame);
        board.Children.Add(timeline);

        board.RepeatBehavior = RepeatBehavior.Forever;
        board.Begin();
    }

    private async void Spinner_Loaded(object sender, RoutedEventArgs e)
    {
        PlayRotation();
    }
} 
```

}

然后，当您想在另一个 xaml 中使用 Spinner 时，这非常简单：只需在任何 Grid 等中为其添加一行：

```
<include:Spinner/> 
```

（当然，您需要将*include*定义为：

```
xmlns:include="MyControls" 
```

在您的 xaml 之上）

# c# - 将字典绑定到 DataGridComboBoxColumn WPF

> ID：15174618
> 
> 赞同：4
> 
> 时间：2013-03-02T12:44:54.417
> 
> 标签：c#, wpfdatagrid, wpf-4.0

嘿伙计们..

我的想法是使用 DataGrid 作为映射器模板，首先网格将从“表 A”加载数据，其中一个列将显示来自“表 B”的数据

我有一个像这样的“表 B”：

```
fieldtype_id | fieldtype_name
     1             int
     2             varchar
     3             date 
```

我想使用 DataGridComboBoxColumn 在 wpf Datagrid 中显示此表。

所以，我在其中创建了一个 wpf 窗口和数据网格，下面是 XAML

```
<DataGrid AutoGenerateColumns="False" HorizontalAlignment="Left" Margin="12,123,0,176" Name="dataGrid1" Width="1000" 
              ItemsSource="{Binding}" SelectionUnit="CellOrRowHeader" CanUserAddRows="False" 
              CellEditEnding="dataGrid1_CellEditEnding" CurrentCellChanged="dataGrid1_CurrentCellChanged">

        <DataGrid.Columns>

            <DataGridComboBoxColumn
                             Header="Field Type" Width="200" 
                             DisplayMemberPath="Value"
                             SelectedValueBinding="{Binding fieldtypeSS, Mode=TwoWay}"
                             SelectedValuePath="{Binding fieldtype_id}">

                <DataGridComboBoxColumn.ElementStyle>
                    <Style TargetType="ComboBox">
                        <Setter Property="IsSynchronizedWithCurrentItem" Value="False" />
                        <Setter Property="ItemsSource" Value="{Binding Path=fieldtype_id}" />
                    </Style>
                </DataGridComboBoxColumn.ElementStyle>

                <DataGridComboBoxColumn.EditingElementStyle>
                    <Style TargetType="ComboBox">
                        <Setter Property="ItemsSource" Value="{Binding Path=fieldtype_id}" />
                        <Setter Property="IsDropDownOpen" Value="True" />
                    </Style>
                </DataGridComboBoxColumn.EditingElementStyle>
            </DataGridComboBoxColumn>

        </DataGrid.Columns>

</DataGrid> 
```

然后，我创建一个类：

```
public class cMapHeader
{
    public int fieldtypeSS { get; set; }
    public Dictionary<string, string> fieldtype_id { get; set; }
} 
```

然后，使用我之前创建的方法填充表格

```
//## Get MysqlFieldType
//## dboperation.dtQueries is my method to populate data, and return as DataTable
Dictionary<string, string> mysqlFieldType = new Dictionary<string, string>();

foreach (DataRow row in dboperation.dtQueries("SELECT fieldtype_id, fieldtype_name FROM mysql_Fieldtype ").Rows)
{
    mysqlFieldType.Add(row["fieldtype_id"].ToString(), row["fieldtype_name"] as string);
} 
```

接下来，填充网格

```
gridMapHeader = new ObservableCollection<cMapHeader>()
        {
           new cMapHeader(){fieldtypeSS="1",fieldtype_id=mysqlFieldType},
           new cMapHeader(){fieldtypeSS="2",fieldtype_id=mysqlFieldType}

        };
dataGrid1.BeginInit();

dataGrid1.SetBinding(ItemsControl.ItemsSourceProperty, new Binding
      {
         Source = gridMapHeader
      }); 
```

问题是，应该包含 fieldtypeSS 的单元格不显示，但是在编辑模式下，DataGridComboBoxColumn 显示我想要正确的值（仅显示“表 B”的 fieldtype_name）。

那么第二个问题是，当单元格失去焦点时，从 DataGridComboBoxColumn 中选择的值会丢失..

谁能帮我？

非常感谢任何帮助：D

谢谢b4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-25T14:40:44.597

为了解决您的两个问题，您的：

> SelectedValuePath="{绑定 fieldtype_id}"

应该：

> SelectedValuePath="fieldtype_id"

# c# - 停止允许滑动的 PivotControl

> ID：15174623
> 
> 赞同：2
> 
> 时间：2013-03-02T12:45:31.500
> 
> 标签：c#, windows-phone-8, pivot

所以我正在尝试为 Windows Phone 8 制作一个“标签式 Web 浏览器”。我似乎无法完全弄清楚我将如何做这件事。我已经使用 PivotControl 制作了所有选项卡控件（我相信它取代了 Windows 8 中的 TabControl）。我可以动态添加和删除标签，我认为该系统非常好。不幸的是，我不知道如何阻止滑动手势更改标签。我希望用户只需要在 Pivot Controls 标题上滑动，而不是在内容上......我将网站本身放在内容中，因此它不允许用户在放大网站时滚动，因为手势被手机想要切换 Pivot 项目覆盖...

当用户在 WebBrowser 控件内部滑动时，我将如何防止枢轴切换？

# php - 动态生成的标题标签中的磅符号

> ID：15174625
> 
> 赞同：0
> 
> 时间：2013-03-02T12:46:01.013
> 
> 标签：php, encoding, character-encoding, content-type, symbols

我无法让 £ 符号在标题标签中正确呈现。

我试过使用 £ 出来的？在钻石中。我也试过：

```
&pound; 
```

但这就是原样。

我也尝试过设置：

```
header('Content-Type: text/html; charset=utf-8'); 
```

在输出回显之前。

这是我为标题标签生成内容的方式：

```
public function marginAttribution($enquiryId)
  {

    $data = $this->model->marginAttribution($enquiryId) ;

    $output = '';
    $output .= 'Sales value (parts): '.$data['sellingCurrency'].number_format($data['sellingValueNative'], 2, '.', ',')."\n";
    $output .= 'Sales value (fees): '.$data['sellingCurrency'].number_format($data['sellingFees'], 2, '.', ',')."\n";
    $output .= 'Sales value total ('.$data['sellingCurrency'].'): '.$data['sellingCurrency'].number_format($data['sellingFees']+$data['sellingValueNative'], 2, '.', ',')."\n";
    $output .= "Sales value total (&pound;): £".number_format(($data['sellingFees']+$data['sellingValueNative'])/$data['sellingCurrencyRate'], 2, '.', ',')."\n";
    header('Content-Type: text/html; charset=utf-8');
    echo $output;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:11:36.967

我需要编辑 Netbeans 配置文件，如本文答案中所述：

[如何更改 NetBeans 中的文件编码？](https://stackoverflow.com/questions/4133195/how-to-change-file-encoding-in-netbeans)

这解决了我的问题。

# php - 正则表达式匹配 自定义html标签

> ID：15174626
> 
> 赞同：0
> 
> 时间：2013-03-02T12:46:08.017
> 
> 标签：php, regex

我正在开发自己的 CMS，需要用适当的 php 函数替换自定义标签。
我的自定义标签就像`<cms:zone id="header" anotherAttr="attrValue" />`这`<cms:xxx />`部分对我很重要。
到目前为止，我写了这个正则表达式，但它不能正常工作。`<cms:?([\S|\s]*)\/>`

```
<body>
        <cms:content id="footer" />

        <cms:zone id="header" />

</body> 
```

**它会匹配**

```
<cms:content id="footer" />

            <cms:zone id="header" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T12:51:52.390

使量词不贪心：

```
<cms:?([\S\s]*?)\/>
       here __^ 
```

并且不需要`|`在字符类内部

# asp.net - 使用两个 .NET 1.1 Web 服务使服务器应用程序不可用，另一个工作

> ID：15174627
> 
> 赞同：1
> 
> 时间：2013-03-02T12:46:10.220
> 
> 标签：asp.net, web-services, asmx, .net-1.1

我有一个 .NET 框架 1.1 应用程序，它使用两个 Web 服务，一个处理安全性，另一个处理业务功能。两者都工作正常。我对负责业务功能的服务以及主应用程序进行了更改，并重新安装了 Web 服务和主应用程序。我之前至少这样做过两次，但这一次，在登录后（这表明安全 Web 服务正在运行），对 biz Web 服务的任何访问都会失败，并显示“服务器应用程序不可用。您尝试访问的 Web 应用程序此 Web 服务器上当前不可用。”

事件应用程序日志中没有记录错误。

它在我的开发笔记本电脑上运行良好（在 Visual Studio .NET 2003 开发环境中），仅当我将它安装在服务器上时才会出现此错误（Windows Server 2003 Standard）。

我真的很难过，因为我所做的只是一些影响功能的代码，而我构建的应用程序与上次完全相同。

# html - jquery mobile上的聊天页面

> ID：15174628
> 
> 赞同：1
> 
> 时间：2013-03-02T12:46:13.703
> 
> 标签：html, css, jquery-mobile

我正在尝试在 jquery mobile 上创建一个非常简单的聊天页面，其页面架构如下：

```
<div data-role="header" data-position="fixed">
    <h1>Chat with...</h1>
</div><!-- /header -->

<div data-role="content">
    <div id="chatcontents"></div><input type="text" />
</div><!-- /content -->

<div data-role="footer" data-position="fixed">
    Footer
</div><!-- /footer --> 
```

div“chatcontents”包含所有消息，输入文本位于底部。

问题是 jquery mobile 覆盖了我的 css 设置，所以它不能成为底部的文本框（考虑到页脚）和“聊天内容”来占据屏幕的其余部分，文本从底部开始。

有人已经试过了吗？

提前致谢。

# image - 如何更改按钮的图像

> ID：15174629
> 
> 赞同：1
> 
> 时间：2013-03-02T12:46:15.723
> 
> 标签：image, class, button, android-intent

我的问题是如何在单击按钮后显示新图像，但条件来自其他类。我是这里的新手，我想知道如何将班级与其他班级联系起来。我尝试了意图...

这是我的代码

这是我们问题的课程......

```
@Override
// TODO Auto-generated method stub
public void onClick(View v) {
    String answer = "Marianas Trench";
    String answer2 = "marianas trench";
    String answer3 = "MARIANAS TRENCH";

    String check = input.getText().toString();
    if (check.contentEquals(answer)){
        tvresult.setText("Correct");
        Intent myIntent= new Intent("com.turtleexploration.LEVEL1");
        startActivity(myIntent);
    }else if (check.contentEquals(answer2)){
        tvresult.setText("Correct");
        Intent myIntent= new Intent("com.turtleexploration.LEVEL1");
        startActivity(myIntent);
    }else if (check.contentEquals(answer3)){
        tvresult.setText("Correct");
        Intent myIntent = new Intent("com.turtleexploration.LEVEL1");
        startActivity(myIntent);
    }else{
        tvresult.setText("Wrong");
    }

    Intent intObj = new Intent(Question.this, Level1.class);
    intObj.putExtra("ANSWER", answer);
    startActivity(intObj);          
} 
```

这是问题选择类..

```
ImageButton l1 = (ImageButton) findViewById(R.id.l1);
    TextView t1 = (TextView) findViewById(R.id.t1);
    Intent intename = getIntent();
    String mainans = "Marianas Trench";
    String ans = (String) intename.getSerializableExtra("ANSWER");
    if (ans == mainans){
        l1.getBackground().equals(getResources().getDrawable(R.drawable.m1));
        t1.setText("Correct");
    }else{

    } 
```

该按钮位于问题选择菜单中...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T15:05:41.270

看来您没有使用承载数据的 Bundle。Intent 只要求下一个活动。必须包含捆绑包。

喜欢：

```
Bundle b = new Bundle();
b.putString("ANSWER", answer);

Intent intObj = new Intent(Question.this, Level1.class);
b.putExtras(b);
startActivity(intObj); 
```

并在下一堂课。使用它来获取传递的数据：

```
 Bundle b = new Bundle();

    b = getIntent().getExtras();
   String Gotanswer = b.getString("ANSWER"); 
```

并使用字符串`Gotanswer`来使用它。

但是还有一件事，如果您想将字符串 ANSWER 传递给下一个类，则在此代码中是不可能的，因为在您的每个条件中，都有一行开始下一个类，例如：

```
Intent myIntent = new Intent("com.turtleexploration.LEVEL1");
        startActivity(myIntent); 
```

这样做将在不通过`intObj`下面的代码的情况下开始下一个课程。如果我没记错的话。:)

另外，对于这种类型来说，使用`If-Else-If`,而不是`switch`更好。

当您看到此答案时，请进一步解释您的问题。

```
Kaya yan pre! haha 
```

# android - 我尝试使用动画使线性布局翻译，左 <-> 右这样。但我遇到了一些错误

> ID：15174630
> 
> 赞同：1
> 
> 时间：2013-03-02T12:46:21.263
> 
> 标签：android, android-linearlayout, translate

这是我的第一个应用程序，我尝试从右到左或从左到右进行翻译。

这是代码

Res > 动画 > translate_left

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
Android: interpolator="@Android: anim/accelerate_decelerate_interpolator"
>
<translate 
    android:fromXDelta="100%p" 
    android:toXDelta="0%p" 
    android:duration="500"
    android:repeatCount="0"
    android:fillAfter="true"
    />

</LinearLayout> 
```

Res > 动画 > translate_right

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:interpolator="@android:anim/accelerate_decelerate_interpolator"
    >

    <translate 
        android:fromXDelta="0%p" 
        android:toXDelta="100%p" 
        android:duration="500"
        android:repeatCount="0"
        android:fillAfter="false"
        />

</LinearLayout> 
```

和

```
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.animation.Animation;
import android.view.animation.Animation.AnimationListener;
import android.view.animation.AnimationUtils;
import android.widget.Button;
import android.widget.LinearLayout;

public class MatchingActivity extends Activity {
boolean isPageOpen = false;

Animation translateLeftAnim;
Animation translateRightAnim;

LinearLayout slidingPage01;
Button openBtn01;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.matching);

    // Sliding Page
    slidingPage01 = (LinearLayout)findViewById(R.id.slidingPage01);

    translateLeftAnim = AnimationUtils.loadAnimation(this, R.anim.translate_left);
    translateRightAnim = AnimationUtils.loadAnimation(this, R.anim.translate_right);

    SlidingPageAnimationListener animListener = new SlidingPageAnimationListener();
    translateLeftAnim.setAnimationListener(animListener);
    translateRightAnim.setAnimationListener(animListener);

    // Open Button
    openBtn01 = (Button) findViewById(R.id.openBtn01);
    openBtn01.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {

            // start animation
            if (isPageOpen) {
                slidingPage01.startAnimation(translateRightAnim);
            } else {
                slidingPage01.setVisibility(View.VISIBLE);
                slidingPage01.startAnimation(translateLeftAnim);
            }

        }
    });

}

private class SlidingPageAnimationListener implements AnimationListener {

    public void onAnimationEnd(Animation animation){
        if (isPageOpen) {
            slidingPage01.setVisibility(View.INVISIBLE); 
            openBtn01.setText("Open");
            isPageOpen = false;
        } else {
            openBtn01.setText("Close");
            isPageOpen = true;
        }
    }

    public void onAnimationRepeat(Animation animation){}

    public void onAnimationStart(Animation animation){}

}

} 
```

启动此代码后，会出现一些错误！

错误是

```
03-02 12:19:31.828: E/AndroidRuntime(1981): FATAL EXCEPTION: main
03-02 12:19:31.828: E/AndroidRuntime(1981): java.lang.RuntimeException: Unable to start   activity   ComponentInfo{com.example.projectcupido/com.example.projectcupido.MatchingActivity}:   java.lang.RuntimeException: Unknown animation name: LinearLayout
03-02 12:19:31.828: E/AndroidRuntime(1981):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-02 12:19:31.828: E/AndroidRuntime(1981):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-02 12:19:31.828: E/AndroidRuntime(1981):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-02 12:19:31.828: E/AndroidRuntime(1981):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-02 12:19:31.828: E/AndroidRuntime(1981):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-02 12:19:31.828: E/AndroidRuntime(1981):     at android.os.Looper.loop(Looper.java:137)
03-02 12:19:31.828: E/AndroidRuntime(1981):     at android.app.ActivityThread.main(ActivityThread.java:5039)
03-02 12:19:31.828: E/AndroidRuntime(1981):     at java.lang.reflect.Method.invokeNative(Native Method)
03-02 12:19:31.828: E/AndroidRuntime(1981):     at java.lang.reflect.Method.invoke(Method.java:511)
03-02 12:19:31.828: E/AndroidRuntime(1981):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-02 12:19:31.828: E/AndroidRuntime(1981):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-02 12:19:31.828: E/AndroidRuntime(1981):     at dalvik.system.NativeStart.main(Native Method)
03-02 12:19:31.828: E/AndroidRuntime(1981): Caused by: java.lang.RuntimeException: Unknown animation name: LinearLayout
03-02 12:19:31.828: E/AndroidRuntime(1981):     at android.view.animation.AnimationUtils.createAnimationFromXml(AnimationUtils.java:124)
03-02 12:19:31.828: E/AndroidRuntime(1981):     at android.view.animation.AnimationUtils.createAnimationFromXml(AnimationUtils.java:91)
03-02 12:19:31.828: E/AndroidRuntime(1981):     at android.view.animation.AnimationUtils.loadAnimation(AnimationUtils.java:72)
03-02 12:19:31.828: E/AndroidRuntime(1981):     at com.example.projectcupido.MatchingActivity.onCreate(MatchingActivity.java:36)
03-02 12:19:31.828: E/AndroidRuntime(1981):     at android.app.Activity.performCreate(Activity.java:5104)
03-02 12:19:31.828: E/AndroidRuntime(1981):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-02 12:19:31.828: E/AndroidRuntime(1981):     at        android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-02 12:19:31.828: E/AndroidRuntime(1981):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-24T09:39:30.610

我也陷入了类似的情况，我必须向各个方向滑动布局，但我已经在下面完成了，我的代码可能对你有帮助。

```
Animation Left slide
    <translate xmlns:android="http://schemas.android.com/apk/res/android"
        android:duration="500"
        android:fromXDelta="100%"
        android:toXDelta="0%" >
    </translate>

    Animation Right slide
    <translate xmlns:android="http://schemas.android.com/apk/res/android"
        android:duration="500"
        android:fromXDelta="-100%"
        android:toXDelta="0%" >
    </translate>

    RightSwipe = AnimationUtils.loadAnimation(Screen.this, R.anim.right_swipe);
    ScreenAnimation.startAnimation(RightSwipe); 
```

# javascript - 使用远程数据正确使用 jQuery select2 的 initSelection 回调

> ID：15174635
> 
> 赞同：11
> 
> 时间：2013-03-02T12:46:41.737
> 
> 标签：javascript, jquery, jquery-select2

我使用 jQuery select2 插件来使用提供的 ajax 回调函数检索邮政编码，如下所示：

```
$(document).ready(function() {
    $("#postcodes").select2({
        placeholder : "Search for a postcode",
        multiple : true,
        minimumInputLength : 3,
        ajax : {
            url : "/bignibou/utils/findGeolocationPostcodeByPostcodeStartingWith.json",
            dataType : 'json',
            data : function(term) {
                return {
                    postcode : term
                };
            },
            results : function(data) {
                console.log(data);
                return {
                    results : $.map(data, function(item) {
                        return {
                            id : item.id,
                            text : item.postcode
                        };
                    })
                };
            }
        }
    });
}); 
```

一旦选择了两个邮政编码，我就会`hidden input`在 DOM 中得到结果：

```
<input type="hidden" class="bigdrop select2-offscreen" id="postcodes" style="width:600px" name="familyAdvertisement.postcodes" value="4797,4798" tabindex="-1"> 
```

我遇到的问题是，一旦重新显示表单（例如，在某些其他控件出错的情况下），选择（即两个邮政编码，尤其是`text`）不会显示在表单中，尽管`hidden input`确实有两个值（即 4797 和 4798，它们是`id`邮政编码的 s）。

我不确定在重新显示表单时是否必须进行另一次 ajax 往返，或者是否有更好的方法。

有人可以请教吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-02T13:12:10.313

initSelection 方法必须传递必须存在于`select2`

前任：

```
$("#postcodes").select2({
    placeholder : "Search for a postcode",
    multiple : true,
    minimumInputLength : 1,
    data:[],
    initSelection : function (element, callback) {
        var data = [{id:1,text:'bug'},{id:2,text:'duplicate'}];
        callback(data);
    }
}).select2('val', ['1', '2']); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/VpnCe/3/)

# c++ - 使用派生类时出现 Qt 运行时错误

> ID：15174636
> 
> 赞同：0
> 
> 时间：2013-03-02T12:46:43.630
> 
> 标签：c++, qt

我只想在 Qt 中制作一个程序，您可以在其中按下两个按钮之一，然后 QLabel 的文本会根据您更改的按钮而改变。运行脚本时出现运行时错误。我为这个程序制作了一个“自定义”窗口类：

这是头文件：

```
#ifndef MW_H
#define MW_H
#include <QString>
#include <QPushButton>
#include <QLabel>
#include <QGridLayout>
#include <QDialog>

class MW: public QDialog
{
 Q_OBJECT
    private:
    QPushButton* one;
    QPushButton* two;
    QLabel* three;
    QGridLayout* mainL;
public:
    MW();
    private slots:
    void click_1();
    void click_2();

};

#endif // MW_H 
```

这是标头的 .cpp：

```
#include "MW.h"

MW :: MW()
{

    //create needed variables
    QGridLayout* mainL = new QGridLayout;
    QPushButton* one = new QPushButton("Set1");
    QPushButton* two = new QPushButton("Set2");
    QLabel* three = new QLabel("This text will be changed");

    //connect signals and slots

    connect(one, SIGNAL(clicked()), this, SLOT(click_1()));
    connect(two, SIGNAL(clicked()), this, SLOT(click_2()));

    // create layout
    mainL->addWidget(one, 1, 0);
    mainL->addWidget(two, 1, 1);
    mainL->addWidget(three, 0, 1);
    setLayout(mainL);
}

void MW :: click_1()
{
    three->setText("One Clicked me!");
}

void MW :: click_2()
{
    three->setText("Two Clicked me!");
} 
```

最后这是主要功能：

```
#include <QApplication>
#include "MW.h"

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MW w;
    w.setAttribute(Qt::WA_QuitOnClose);
    w.show();

    return a.exec();
} 
```

这是我正在做的第三个左右的小型学习计划，我遇到了同样的问题。它开始变得有点烦人。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T12:52:58.780

错误存在于您的构造函数中。

```
QLabel* three = new QLabel("This text will be changed"); 
```

这一行将新的 QLabel 存储到局部变量而不是类变量。因此，您的类变量`three`保持为空。（与其他三个变量一样，但这不是这里的问题，因为您不能在构造函数之外访问它们）

为了缩短长篇大论，请像这样修改您的代码：

```
MW :: MW()
{

    //create needed variables
    mainL = new QGridLayout;
    one = new QPushButton("Set1");
    two = new QPushButton("Set2");
    three = new QLabel("This text will be changed"); //This line, actually.

    //connect signals and slots

    connect(one, SIGNAL(clicked()), this, SLOT(click_1()));
    connect(two, SIGNAL(clicked()), this, SLOT(click_2()));

    // create layout
    mainL->addWidget(one, 1, 0);
    mainL->addWidget(two, 1, 1);
    mainL->addWidget(three, 0, 1);
    setLayout(mainL);
} 
```

像这样，类中的变量将被填充，您的代码应该按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T12:53:06.130

你的问题是这样的：

```
QGridLayout* mainL = new QGridLayout;
QPushButton* one = new QPushButton("Set1");
QPushButton* two = new QPushButton("Set2");
QLabel* three = new QLabel("This text will be changed"); 
```

您正在创建四个与您的类成员同名的新变量。这些新变量*隐藏*了类成员。因此，使用上面的代码，您永远不会特别初始化`MW::three`。当你的插槽被调用时，`three->setText(...)`取消引用一个未初始化的指针和东西会中断。

将该代码替换为：

```
mainL = new QGridLayout;
one = new QPushButton("Set1");
two = new QPushButton("Set2");
three = new QLabel("This text will be changed"); 
```

# f# - 如何在 F# 类型提供程序中生成枚举

> ID：15174637
> 
> 赞同：5
> 
> 时间：2013-03-02T12:46:50.653
> 
> 标签：f#, type-providers, f#-3.0

[F# 3.0 示例包的这个变更集](http://fsharp3sample.codeplex.com/SourceControl/changeset/20278)似乎表明它是可能的，但在 ProvidedTypes.fs 中没有提供的枚举

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T20:45:06.343

使用`ProvidedTypeDefinition`并仅使用真正的枚举类型作为基本类型。此功能没有经过特别好的测试，因此如果遇到问题，请提出后续问题。

# windows-7 - 拉/推/克隆时 TortoiseHG '找不到文件'

> ID：15174639
> 
> 赞同：0
> 
> 时间：2013-03-02T12:47:03.527
> 
> 标签：windows-7, mercurial, push, tortoisehg, pull

我已经安装`TortoiseHG 64bit`在我的`Windows 7`笔记本电脑上，并在过去几周使用它，没有任何问题。

但是今天我尝试检查新的传入更改，工作台返回错误`Incoming from ssh://hg-project@mercurial.local.domain.nl:2224/project aborted, ret 255`并且没有显示 SSH 密码提示。

日志消息：

```
project% % hg --repository C:\Development\project incoming --quiet --bundle c:\users\admin\appdata\local\temp\thg.moqvtf\ssh__hg-project@mercurial.local.domain.nl2224_project_f4j7ry.hg ssh://hg-project@mercurial.local.domain.nl:2224/project
abort: Het systeem kan het opgegeven bestand niet vinden <-- Dutch for 'Can't find the file'
[command returned code 255 Sat Mar 02 13:35:22 2013]
project% 
```

我查看了目录`c:\users\admin\appdata\local\temp\thg.moqvtf\`，没有文件。我不知道该`bundle`参数的作用，也许它会创建文件或其他东西..

所以我尝试再次克隆回购，但同样的错误，同样适用于推送。还尝试重新安装 TortoiseHG，但返回相同的错误。

有没有人向我解释这是如何发生的以及如何解决它？加上一些关于`bundle`参数的信息会很好。

## 更新

我认为这与 SSH 有关，因为所有远程命令都失败并出现文件未找到错误（即`hg pull`）。我已经在配置文件中添加了额外的`ssh`属性，但仍然没有成功:(:

```
[ui]
ssh="C:\Program Files\TortoiseHg\TortoisePlink.exe" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:51:38.350

尝试

```
ssh="C:\Program Files\TortoiseHg\TortoisePlink.exe" -ssh -2 -C -i (path_to_your_private_key) 
```

或者

```
ssh="C:\Program Files\TortoiseHg\TortoisePlink.exe" -ssh -2 -C -batch 
```

如果您正在使用 Pageant。

# javascript - 如何使用引导导航列表自动显示/隐藏元素

> ID：15174642
> 
> 赞同：1
> 
> 时间：2013-03-02T12:47:13.013
> 
> 标签：javascript, jquery-ui, jquery-mobile, twitter-bootstrap

我有一个用于移动网站的带有引导程序的导航列表，如果我单击图标两次，我可以折叠和展开部分，但是当我单击一个按钮时，正确的部分会折叠，但是当我单击第二个按钮时，两个部分都保持打开状态。当我单击第二个按钮时，我希望第一个关闭。

这是一个示例[http://jsfiddle.net/MgcDU/2219/](http://jsfiddle.net/MgcDU/2219/)。

```
<div class="navbar navbar-fixed-top visible-phone" style="margin-bottom: 0px;">
        <div class="navbar-inner">
                   <div >
                         <ul class="nav ">                          
                              <li class="">
                              <a href="#" data-toggle="collapse" data-target=".nav-collapse-filter"><i class="icon-filter"></i></a>
                           </li>
                     <li class="">
                        <a href="#" data-toggle="collapse" data-target=".nav-collapse-post"><i class="icon-plus"></i></a>
                            </li>

                      </ul>
        </div>

          <div class="nav-collapse nav-collapse-filter collapse">
                <ul class="nav">
                     <li class="divider"></li>  
                     <li class="nav-header">Filter By</li>                     
                       <li class=""><a href="Filter1">Filter1</a></li>                          
                       <li class=""><a href="Filter1">Filter2</a></li>                            
                       <li class=""><a href="Filter1">Filter3</a></li>                                
                       <li class=""><a href="Filter1">Filter4</a></li>                 
                       <li class=""><a href="Filter1">Filter5</a></li>   
                       <li class=""><a href="Filter1">Filter6</a></li>                                

                </ul>                       
            </div>                                  
            <div class="nav-collapse nav-collapse-post collapse">                        
              <ul class="nav">
                   <li class="divider"></li>
                   <li class="nav-header">Post something</li>
                   <li class=""><a href="Post">Post1</a></li>
                   <li class=""><a href="Post">Post2</a></li>
                   <li class=""><a href="Post">Post3</a></li>                         
                   <li class=""><a href="Post">Post4</a></li>
                   <li class=""><a href="Post">Post5</a></li>                              
                </ul>
            </div> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T13:11:25.290

我认为你必须做一些手工工作才能实现这种行为。

```
$("a[data-target='.nav-collapse-post']").click(function () {
    $(".nav-collapse-filter").collapse("hide");
    $(".nav-collapse-post").collapse('toggle');
});

$("a[data-target='.nav-collapse-filter']").click(function () {
    $(".nav-collapse-post").collapse('hide');
    $(".nav-collapse-filter").collapse("toggle");
}); 
```

如果您不希望在第一次单击时出现奇怪的行为，还可以删除该类`collapse`。`nav-collapse-post``nav-collapse-filter`

结果：http: [//jsfiddle.net/ngHnh/](http://jsfiddle.net/ngHnh/)

# java - 如何持久化实体，如何从没有“主类”的实体创建表？

> ID：15174644
> 
> 赞同：0
> 
> 时间：2013-03-02T12:47:15.657
> 
> 标签：java, jakarta-ee, jpa, persistence, jpa-2.0

我正在开发一个应用程序，并开始创建我的 JPA 实体（annotation + persistence.xml）。然后在我的 persistence.xml 文件中，我为 MySql 数据库创建了一个连接（连接很好）。

问题是我只是不知道如何在不创建“主类”的情况下保留我的实体。

我是否必须为要创建的每个实体运行我的主类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:20:18.163

要持久化一个实体，你需要一个 entityManager 的实例。由于您有一个 Java EE 容器，因此您可以使用*某个 bean*`@PersistenceContext`中的注释获取 entityManager 的实例

 *我说的*一些豆子*是什么意思？它是一个由 Java EE 容器管理的 bean。因此，例如，您必须像这样定义一个 bean：

```
@Stateless
public class MyController{
    @PersistenceContext
    private EntityManager em;

    public void persistIt(Object anEntity){
        em.persist(anEntity);
    }
} 
```

注释`@Stateless`向容器指示它必须管理此类并在需要时负责提供 entityManager 的实例。

因此，要准确回答您的问题：只要您找到访问 entityManager 实例的方法，就不必让另一个类来持久化实体。

**但是**：

*   这绝对不是最佳实践。
*   要利用 entityManager 注入：您必须使用另一个托管 bean，以便容器可以注入 entityManager。

此外，控制器是您可以正确处理交易的地方。*

# magento - Magento 重新索引产品

> ID：15174649
> 
> 赞同：1
> 
> 时间：2013-03-02T12:47:27.683
> 
> 标签：magento, reindex

最近我在 Magento 中遇到了一个关于重新索引的问题。

我的商店有大约 40,000 种产品，如果我更改单个产品的状态，更改不会反映在前端，因为它需要重新索引所有索引。

此外，重新索引需要花费大量时间（大约一个小时），而且我正在考虑一个永久性问题。

Reindex 中的“更新时保存”模式指定了什么？它是否有助于在保存产品的同时重新编制索引？

手动更新和保存更新有什么区别？

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T14:16:14.187

**当您说更新时保存**时，我假设您的意思是“保存时更新”，也称为“**实时**”模式，**`triggers the re-indexing of product data`**每次产品已保存/更新时。

基本上在 Magento 中只有两种重新索引模式“**保存时更新**”（实时）和“**手动**”。他们的名字非常清楚地说明了他们的行为方式。

在您的情况下，由于您的商店中有大量产品，请通过如下所示的 Magento SHELL 命令重新建立索引，从而节省大量时间。

SSH到您的商店并转到magento根目录中的shell文件夹并一一或全部重新索引

```
 php indexer.php --reindex  catalog_product_flat
    php indexer.php reindexall 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T09:14:44.333

使用“**保存时更新**”重新索引模式，它将为您保存的单个产品即时重新索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-21T18:01:26.810

magento 手册（[http://docs.magento.com/m2/ce/user_guide/system/index-management-manual.html](http://docs.magento.com/m2/ce/user_guide/system/index-management-manual.html)）

状态：

将操作设置为“重新索引数据”。</p>

太糟糕了，选项不可用！您在管理页面中看到这些选项吗？如果没有，是否有原因导致它可能不显示？

我想在保存时进行更新，但这并不实用。我从 CSV 导入了大量产品。

我尝试从命令行运行重新索引器，但缺少 shell 目录。

[magento 缺少 shell 目录](https://stackoverflow.com/questions/26794663/magento-missing-shell-directory)

好吧，看来我的想法很新鲜！也许我应该付钱让 Varien 为我运行 Magento Enterprise。毕竟，重新索引有点复杂，不是吗？

# c# - TableAdapter 配置向导无法识别 sql 语句“DATE()”

> ID：15174650
> 
> 赞同：2
> 
> 时间：2013-03-02T12:47:29.907
> 
> 标签：c#, sql, winforms, ms-access, report

我需要在我的程序中进行报告。然后，我使用此 sql 代码过滤将在报表查看器中显示的数据：

```
SELECT * 
FROM Order 
WHERE OrDate=DATE() OR OrDate>=DATE() - 7; 
```

当我单击下一步时，出现此错误

> 生成的 SELECT 语句。')' 附近的 WHERE 子句出错。无法解析查询文本。

请帮我解决这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:07:54.333

您是否希望 Date 返回今天的日期？我以为那是 GETDATE() [http://msdn.microsoft.com/en-gb/library/ms188383.aspx](http://msdn.microsoft.com/en-gb/library/ms188383.aspx)

如果您使用的是 SQL Server 2008

选择 SELECT * FROM [Order] WHERE OrDate >= CONVERT(date, DATEADD(DAY, -7, GETDATE()))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T12:49:21.880

问题不是因为，`DATE()`而是因为 tablename `ORDER`。

在大多数 RDBMS 中，`ORDER`是一个保留关键字。使用保留关键字时，请使用供应商特定的分隔符对其进行转义。在`SQL Server`中，您可以使用括号。

```
SELECT  * 
FROM   [Order] 
WHERE  OrDate = DATE() OR 
       OrDate >= DATE() - 7; 
```

*   [访问保留关键字](http://office.microsoft.com/en-001/access-help/access-2007-reserved-words-and-symbols-HA010030643.aspx)

从访问文档，

> 如果保留字已在使用中，您可以通过用方括号 ([ ]) 将每个出现的字括起来来避免错误消息。但是，最好的解决方案是将名称更改为非保留字。

# sql - 临时表

> ID：15174651
> 
> 赞同：0
> 
> 时间：2013-03-02T12:47:47.587
> 
> 标签：sql, temporary

我可以在 case 语句中创建临时表吗？

如果是，请举例说明。

其实我想做这样的事情..

```
declare @a int = 1

select case when @a = 1 then
'yes'
else
'no'
end 
```

如果第一个案例执行，那么我想创建具有操作某些业务数据所需的条件的临时表。

在其他情况下，我想创建另一个具有其他条件的表来操作业务数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:06:01.397

听起来您应该使用`IF`而不是`CASE`：

```
declare @a int = 1

IF @a = 1
BEGIN
    'yes'
END
ELSE
BEGIN
    'no'
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T13:07:10.100

我相信你的意思有两种解释：

**有不同数据的列：**

```
SELECT CASE WHEN @a = 1 THEN
         'yes'
       ELSE
         'no'
       END AS answer
INTO tempTable 
```

**创建具有不同查询的表：**

```
IF @a = 1
  SELECT 'yes' AS answer
  INTO tempTable2
ELSE
  SELECT 'no' AS answer, 'other field' as other
  INTO tempTable2 
```

[SQLFiddle](http://www.sqlfiddle.com/#!6/7227e/1)。

# c# - 缺少 using 指令或程序集引用 OperationContext

> ID：15174652
> 
> 赞同：0
> 
> 时间：2013-03-02T12:47:58.557
> 
> 标签：c#, directive

在我的 c# windows 窗体中它有一个错误

> 找不到类型或命名空间名称“OperationContext”（您是否缺少 using 指令或程序集引用？）

谁能解释一下原因？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:50:45.493

[OperationContext](http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontext.aspx)`System.ServiceModel`是库文件中包含的程序集中定义的类`System.ServiceModel.dll`

如果您尝试使用此类，则需要通过[Project References](http://msdn.microsoft.com/en-us/library/7314433t%28v=vs.90%29.aspx)添加对库的引用，然后添加

```
using System.ServiceModel; 
```

在使用 OperationContext 的文件中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T12:51:26.650

因为您没有添加用于访问此类的 dll

阅读[http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontext.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontext.aspx)

你必须添加 System.ServiceModel dll

# c# - 使用 Mono 在 Ubuntu 中获取 proc 信息

> ID：15174653
> 
> 赞同：0
> 
> 时间：2013-03-02T12:48:01.543
> 
> 标签：c#, ubuntu, mono

我正在尝试使用 Mono C# 和 MonoDevelop 从 Ubuntu 中的 /proc/stat 读取系统信息。但是当我使用 FileInfo 时，我得到 0 作为长度，并且我使用 StreamReader 我得到了空字符串（编辑：哎呀，关于 StreamReader 不起作用的那一点结果是不真实的）。如何打开文件并读取数据？

顺便说一句，当我使用终端时，运行“cat /proc/stat”我可以获得数据。我是否需要配置 MonoDevelop 才能正确访问？

我试图搜索一整天，但我无法弄清楚。

我使用 strace 获取以下诊断信息：

```
Process 2430 attached - interrupt to quit
read(0, "\n", 1024)                     = 1
gettimeofday({1362231405, 892525}, NULL) = 0
gettimeofday({1362231405, 893679}, NULL) = 0
gettimeofday({1362231405, 893917}, NULL) = 0
gettimeofday({1362231405, 894218}, NULL) = 0
gettimeofday({1362231405, 894372}, NULL) = 0
gettimeofday({1362231405, 894598}, NULL) = 0
gettimeofday({1362231405, 894722}, NULL) = 0
gettimeofday({1362231405, 895283}, NULL) = 0
gettimeofday({1362231405, 895466}, NULL) = 0
gettimeofday({1362231405, 895670}, NULL) = 0
gettimeofday({1362231405, 895801}, NULL) = 0
gettimeofday({1362231405, 896040}, NULL) = 0
gettimeofday({1362231405, 896242}, NULL) = 0
gettimeofday({1362231405, 897729}, NULL) = 0
gettimeofday({1362231405, 897898}, NULL) = 0
gettimeofday({1362231405, 898337}, NULL) = 0
gettimeofday({1362231405, 898481}, NULL) = 0
gettimeofday({1362231405, 898941}, NULL) = 0
gettimeofday({1362231405, 899116}, NULL) = 0
gettimeofday({1362231405, 900025}, NULL) = 0
gettimeofday({1362231405, 900163}, NULL) = 0
gettimeofday({1362231405, 900562}, NULL) = 0
gettimeofday({1362231405, 900721}, NULL) = 0
gettimeofday({1362231405, 900952}, NULL) = 0
gettimeofday({1362231405, 901109}, NULL) = 0
gettimeofday({1362231405, 901409}, NULL) = 0
gettimeofday({1362231405, 901534}, NULL) = 0
gettimeofday({1362231405, 902604}, NULL) = 0
write(1, "\n", 1)                       = 1
gettimeofday({1362231405, 902943}, NULL) = 0
gettimeofday({1362231405, 903281}, NULL) = 0
gettimeofday({1362231405, 903473}, NULL) = 0
gettimeofday({1362231405, 903724}, NULL) = 0
gettimeofday({1362231405, 903849}, NULL) = 0
gettimeofday({1362231405, 904343}, NULL) = 0
gettimeofday({1362231405, 904488}, NULL) = 0
gettimeofday({1362231405, 905391}, NULL) = 0
gettimeofday({1362231405, 905751}, NULL) = 0
gettimeofday({1362231405, 906501}, NULL) = 0
mprotect(0xb7216000, 4096, PROT_NONE)   = 0
tgkill(2430, 2432, SIGRT_3)             = 0
send(3, "\0\0\0\35\0\0\0e\0@d\2\0\0\0\1\f\0\0\0\10\0\0\0\1\0\0\0\216", 29, 0) = 29
futex(0x832fde4, FUTEX_WAIT_PRIVATE, 123, NULL) = 0
futex(0x832fdbc, FUTEX_WAKE_PRIVATE, 1) = 0
gettimeofday({1362231405, 909583}, NULL) = 0
gettimeofday({1362231405, 909900}, NULL) = 0
gettimeofday({1362231405, 910150}, NULL) = 0
gettimeofday({1362231405, 910444}, NULL) = 0
gettimeofday({1362231405, 910665}, NULL) = 0
gettimeofday({1362231405, 910957}, NULL) = 0
gettimeofday({1362231405, 911207}, NULL) = 0
gettimeofday({1362231405, 911632}, NULL) = 0
gettimeofday({1362231405, 911769}, NULL) = 0
gettimeofday({1362231405, 914613}, NULL) = 0
gettimeofday({1362231405, 914716}, NULL) = 0
gettimeofday({1362231405, 914840}, NULL) = 0
gettimeofday({1362231405, 915021}, NULL) = 0
gettimeofday({1362231405, 915133}, NULL) = 0
gettimeofday({1362231405, 915199}, NULL) = 0
gettimeofday({1362231405, 915397}, NULL) = 0
gettimeofday({1362231405, 915474}, NULL) = 0
gettimeofday({1362231405, 915606}, NULL) = 0
gettimeofday({1362231405, 915671}, NULL) = 0
gettimeofday({1362231405, 916001}, NULL) = 0
gettimeofday({1362231405, 916076}, NULL) = 0
gettimeofday({1362231405, 916232}, NULL) = 0
mprotect(0xb7216000, 4096, PROT_NONE)   = 0
tgkill(2430, 2432, SIGRT_3)             = 0
send(3, "\0\0\0\35\0\0\0f\0@d\2\0\0\0\1\f\0\0\0\10\0\0\0\1\0\0\0\217", 29, 0) = 29
futex(0x832fde4, FUTEX_WAIT_PRIVATE, 125, NULL) = 0
futex(0x832fdbc, FUTEX_WAKE_PRIVATE, 1) = 0
gettimeofday({1362231405, 918417}, NULL) = 0
gettimeofday({1362231405, 918589}, NULL) = 0
gettimeofday({1362231405, 918656}, NULL) = 0
gettimeofday({1362231405, 918780}, NULL) = 0
gettimeofday({1362231405, 918845}, NULL) = 0
gettimeofday({1362231405, 919729}, NULL) = 0
gettimeofday({1362231405, 919810}, NULL) = 0
gettimeofday({1362231405, 920057}, NULL) = 0
mprotect(0xb7216000, 4096, PROT_NONE)   = 0
tgkill(2430, 2432, SIGRT_3)             = 0
send(3, "\0\0\0\35\0\0\0g\0@d\2\0\0\0\1\f\0\0\0\10\0\0\0\1\0\0\0\221", 29, 0) = 29
futex(0x832fde4, FUTEX_WAIT_PRIVATE, 127, NULL) = 0
futex(0x832fdbc, FUTEX_WAKE_PRIVATE, 1) = 0
gettimeofday({1362231405, 921916}, NULL) = 0
gettimeofday({1362231405, 923160}, NULL) = 0
gettimeofday({1362231405, 923235}, NULL) = 0
gettimeofday({1362231405, 923442}, NULL) = 0
gettimeofday({1362231405, 923511}, NULL) = 0
gettimeofday({1362231405, 923631}, NULL) = 0
stat64("/proc/stat", {st_mode=S_IFREG|0444, st_size=0, ...}) = 0
lstat64("/proc/stat", {st_mode=S_IFREG|0444, st_size=0, ...}) = 0
gettimeofday({1362231405, 924059}, NULL) = 0
gettimeofday({1362231405, 925596}, NULL) = 0
gettimeofday({1362231405, 925692}, NULL) = 0
gettimeofday({1362231405, 926101}, NULL) = 0
gettimeofday({1362231405, 926169}, NULL) = 0
gettimeofday({1362231405, 926331}, NULL) = 0
gettimeofday({1362231405, 926397}, NULL) = 0
gettimeofday({1362231405, 926567}, NULL) = 0
gettimeofday({1362231405, 926634}, NULL) = 0
gettimeofday({1362231405, 926812}, NULL) = 0
gettimeofday({1362231405, 926881}, NULL) = 0
gettimeofday({1362231405, 927064}, NULL) = 0
gettimeofday({1362231405, 927133}, NULL) = 0
gettimeofday({1362231405, 929830}, NULL) = 0
gettimeofday({1362231405, 929928}, NULL) = 0
gettimeofday({1362231405, 930219}, NULL) = 0
gettimeofday({1362231405, 930288}, NULL) = 0
gettimeofday({1362231405, 930468}, NULL) = 0
gettimeofday({1362231405, 930535}, NULL) = 0
gettimeofday({1362231405, 930685}, NULL) = 0
gettimeofday({1362231405, 930758}, NULL) = 0
gettimeofday({1362231405, 931120}, NULL) = 0
gettimeofday({1362231405, 931189}, NULL) = 0
gettimeofday({1362231405, 931454}, NULL) = 0
gettimeofday({1362231405, 931522}, NULL) = 0
gettimeofday({1362231405, 931919}, NULL) = 0
gettimeofday({1362231405, 932012}, NULL) = 0
gettimeofday({1362231405, 935736}, NULL) = 0
gettimeofday({1362231405, 935883}, NULL) = 0
gettimeofday({1362231405, 936099}, NULL) = 0
gettimeofday({1362231405, 936164}, NULL) = 0
gettimeofday({1362231405, 936392}, NULL) = 0
gettimeofday({1362231405, 936459}, NULL) = 0
gettimeofday({1362231405, 936590}, NULL) = 0
gettimeofday({1362231405, 936672}, NULL) = 0
gettimeofday({1362231405, 936858}, NULL) = 0
gettimeofday({1362231405, 936976}, NULL) = 0
gettimeofday({1362231405, 944184}, NULL) = 0
stat64("/proc", {st_mode=S_IFDIR|0555, st_size=0, ...}) = 0
lstat64("/proc", {st_mode=S_IFDIR|0555, st_size=0, ...}) = 0
gettimeofday({1362231405, 944471}, NULL) = 0
gettimeofday({1362231405, 944635}, NULL) = 0
gettimeofday({1362231405, 944701}, NULL) = 0
gettimeofday({1362231405, 944850}, NULL) = 0
gettimeofday({1362231405, 944917}, NULL) = 0
gettimeofday({1362231405, 945178}, NULL) = 0
gettimeofday({1362231405, 945252}, NULL) = 0
gettimeofday({1362231405, 945670}, NULL) = 0
stat64("/proc/stat", {st_mode=S_IFREG|0444, st_size=0, ...}) = 0
lstat64("/proc/stat", {st_mode=S_IFREG|0444, st_size=0, ...}) = 0
gettimeofday({1362231405, 945984}, NULL) = 0
gettimeofday({1362231405, 946121}, NULL) = 0
stat64("/proc/stat", {st_mode=S_IFREG|0444, st_size=0, ...}) = 0
lstat64("/proc/stat", {st_mode=S_IFREG|0444, st_size=0, ...}) = 0
open("/proc/stat", O_RDONLY|O_LARGEFILE) = 4
fstat64(4, {st_mode=S_IFREG|0444, st_size=0, ...}) = 0
time(NULL)                              = 1362231405
gettimeofday({1362231405, 946703}, NULL) = 0
gettimeofday({1362231405, 947180}, NULL) = 0
gettimeofday({1362231405, 947347}, NULL) = 0
gettimeofday({1362231405, 947577}, NULL) = 0
gettimeofday({1362231405, 947739}, NULL) = 0
gettimeofday({1362231405, 948003}, NULL) = 0
fstat64(4, {st_mode=S_IFREG|0444, st_size=0, ...}) = 0
gettimeofday({1362231405, 948364}, NULL) = 0
gettimeofday({1362231405, 948855}, NULL) = 0
read(4, "cpu  11250 88 9225 32838 60 0 31"..., 4096) = 1729
gettimeofday({1362231405, 954504}, NULL) = 0
gettimeofday({1362231405, 954819}, NULL) = 0
gettimeofday({1362231405, 955084}, NULL) = 0
gettimeofday({1362231405, 955308}, NULL) = 0
gettimeofday({1362231405, 955494}, NULL) = 0
gettimeofday({1362231405, 955813}, NULL) = 0
gettimeofday({1362231405, 956022}, NULL) = 0
gettimeofday({1362231405, 956228}, NULL) = 0
gettimeofday({1362231405, 956389}, NULL) = 0
gettimeofday({1362231405, 956757}, NULL) = 0
gettimeofday({1362231405, 956985}, NULL) = 0
gettimeofday({1362231405, 957218}, NULL) = 0
close(4)                                = 0
gettimeofday({1362231405, 957587}, NULL) = 0
gettimeofday({1362231405, 957748}, NULL) = 0
gettimeofday({1362231405, 957964}, NULL) = 0
gettimeofday({1362231405, 958174}, NULL) = 0
select(1, [0], NULL, NULL, {0, 0})      = 0 (Timeout)
write(1, "\33[6n", 4)                   = 4
select(1, [0], NULL, NULL, {1, 0})      = 1 (in [0], left {0, 990314})
ioctl(0, FIONREAD, [6])                 = 0
read(0, "\33[4;1R", 1024)               = 6
select(1, [0], NULL, NULL, {0, 150})    = 0 (Timeout)
read(0, "\n", 1024)                     = 1
write(1, "\n", 1)                       = 1
gettimeofday({1362231418, 517172}, NULL) = 0
gettimeofday({1362231418, 517684}, NULL) = 0
gettimeofday({1362231418, 517833}, NULL) = 0
gettimeofday({1362231418, 518094}, NULL) = 0
gettimeofday({1362231418, 518231}, NULL) = 0
gettimeofday({1362231418, 518500}, NULL) = 0
gettimeofday({1362231418, 518675}, NULL) = 0
gettimeofday({1362231418, 518999}, NULL) = 0
select(1, [0], NULL, NULL, {0, 150})    = 0 (Timeout) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:58:30.250

我终于弄明白了。因为像`/proc/stat`proc虚拟文件系统中的文件并不是真正的文件。长度为零是正常的。

我需要做的就是使用`StreamReader`逐行（`ReadLine`）或整个（`ReadToEnd`）读取文件内容

# emacs - CEDET 语义太慢，无法找到库头文件的候选者

> ID：15174655
> 
> 赞同：2
> 
> 时间：2013-03-02T12:48:04.127
> 
> 标签：emacs, autocomplete, tags, global, cedet

我正在使用[glew](http://glew.sourceforge.net/)和[freeglut](http://freeglut.sourceforge.net/)库（两者都包含大量函数和常量声明）在 Emacs 下编写 opengl 程序。一开始我使用`CEDET`'s default`semanticdb`作为后端`auto-complete`。`auto-complete`然而，Emacs 冻结了，并且在我键入时弹出候选者大约需要 20 秒`gl`（因为和的头文件中有许多`GL_XXX`常量和函数）。候选人的弹出速度太慢，有没有办法加快它仍然使用？还是有其他方法可以绕过它？通过使用 gtags？如何？`glxxx``glew``glut``CEDET`

由于头文件中有很多函数和常量声明，我非常依赖自动完成。我用的是`CEDET`1.1，新版本的`CEDET`问题解决了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:08:00.073

使用 gtags 可能会加速替代方案的计算。缓慢完成总是发生，还是仅在第一次使用时发生？这可能是由解析头文件等引起的，稍后这应该是语义数据库中的缓存（如果您已启用它）

# jquery - 使用表单编辑文本区域

> ID：15174656
> 
> 赞同：3
> 
> 时间：2013-03-02T12:48:05.107
> 
> 标签：jquery, forms

我正在开发一个小型 Web 应用程序，作为其中的一部分，我需要通过用 Jeremy 和 Interface Designer 等实际值覆盖 %name% 和 %slogan% 等标识符来获得一个表单来编辑文本区域中的一些代码。

这是我目前得到的代码。它只是将加载时的所有值更改为指定的文本，但我希望它在用户提交表单并将文本输入到输入字段后更改它。

```
$(document).ready(function() {
    $('textarea').each(function(index, element) {
       var textarea = $(element);
       textarea.val(textarea.val().replace(/%name%/, 'Victor Erixon'));
    });
}); 
```

它**必须**用 jQuery 来完成。

让我知道你是否可以编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:54:23.097

使用表单[提交](http://api.jquery.com/submit/)事件而不是 document.ready

```
$(document).ready(function() {
    $('#formId').submit(function() {
        $('textarea').each(function(index, element) {
           var textarea = $(element);
           textarea.val(textarea.val().replace(/%name%/, 'Victor Erixon'));
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T13:01:33.783

根据您在评论中提供的网站，我使脚本适合您的需求和元素：

*我建议`disabled="disabled"`在最终代码 textarea 上设置，以便用户可以选择，但不能编辑内容*

```
<form method="get">
    <label for="name">Name: <input type="text" id="name" placeholder="Victor Erixon"/></label><br/>
    <label for="slogan">Slogan: <input type="text" id="slogan" placeholder="Interface Designer"/></label><br/>
    <label for="bio">Bio: </label><br>
    <textarea id="bio" placeholder="Write something about yourself"></textarea><br/>
    <label for="favicon">Favicon: <input type="text" id="favicon" placeholder="http://www.gravatar.com/avatar/b20f810469b0.png"/></label><br/>
    <label for="dribble">Dribble: <input type="text" id="dribble" placeholder="victorerixon"/></label><br/>
    <textarea class="code" disabled="disabled"></textarea><br/>
    <input type="submit" value="Submit"/>
</form> 
```

```
var basicHtml = '<html>\n   <head>\n        <title>%name%</title>\n     <meta name="description" content="%bio%">\n     <link rel="icon" href="%favicon%">\n    </head>\n   <body>\n        <h1>%name%</h1>\n       <h2>%slogan%</h2>\n     <ul id="portfolio">%dribbble%</ul>\n        <p class="about">%bio%</p>\n    </body>\n</html>';

$(document).ready(function(){
    $('.code').val(basicHtml);

    $('form').on('submit',function() {
        var content = basicHtml;
        content = content.replace(/%name%/g, ($('#name').val()||$('#name').attr('placeholder')));
        content = content.replace(/%slogan%/g, ($('#slogan').val()||$('#slogan').attr('placeholder')));
        content = content.replace(/%bio%/g, ($('#bio').val()||$('#bio').attr('placeholder')));
        content = content.replace(/%favicon%/g, ($('#favicon').val()||$('#favicon').attr('placeholder')));
        var final = content.replace(/%dribble%/g, ($('#dribble').val()||$('#dribble').attr('placeholder')));
        $('.code').val(final);

        return false;
    }).on('reset',function(){
        $('form textarea:not(.code),form input').val();
        $('.code').val(basicHtml);
    });
}); 
```

`[**JSFIDDLE**](http://jsfiddle.net/DJDavid98/2fMKu/10/)`

* * *

## 无需定义`basicHtml`：

您将始终必须像这样编写 textarea 的代码：（*在开始/结束`<html>`和`<textarea>`标签之间没有空格或制表符）*

```
<textarea class="code" disabled="disabled"><html>
    <!-- rest of the code -->
</html></textarea> 
```

并将代码更改为：

```
$(document).ready(function(){
    var basicHtml = ($('.code').html()).replace(/&lt;/g,'<').replace(/&gt;/g,'>');

    //rest of code
}); 
```

`[**JSFIDDLE**](http://jsfiddle.net/DJDavid98/2fMKu/11/)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T12:53:52.857

1.  不要使用表单提交，而是将提交按钮的 onclick 指向您的 javascript 函数
2.  使用刚刚调用的函数验证输入字段
3.  使用被调用的函数进行替换，如您的代码所示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T12:55:32.213

尝试执行 form.submit 事件中的代码；

```
$(document).ready(function() {
   $('form').on('submit', function() {
        $('textarea').each(function(index, element) {
            var textarea = $(element);
            textarea.val(textarea.val().replace(/%name%/, 'Victor Erixon'));
        });
   }); 
}); 
```

# asp.net - Crystal Report 未生成正确的输出

> ID：15174659
> 
> 赞同：1
> 
> 时间：2013-03-02T12:48:27.573
> 
> 标签：asp.net, crystal-reports-2010

我设计了这样的水晶报表

[http://i.imgur.com/0e86C5G.png](http://i.imgur.com/0e86C5G.png)

但我得到了这个输出

[http://i.imgur.com/RCxQ0Ya.png](http://i.imgur.com/RCxQ0Ya.png)

有人可以建议我为什么没有生成正确的输出

我正在使用 Visual Studio 2010 和 CrystalDecisions.ReportSource，版本=13.0.2000.0

谢谢

# php - 表中的 JSON ENCODE 输出

> ID：15174664
> 
> 赞同：0
> 
> 时间：2013-03-02T12:48:50.847
> 
> 标签：php, javascript, html

我想将json_encode数组打印成html中的表格格式。我尝试了以下方法：

```
<table align="center">
   <tr>
        <td style="min-width: 400px; height: 400px; margin: 0 auto;margin-top:50px">
            <div id="container2" style="min-width: 400px; height: 400px; margin: 0 auto;margin-top:50px"></div>       
        </td>
        <td><?php echo json_encode($names1,JSON_NUMERIC_CHECK); ?></td>
    </tr>
</table> 
```

但遗憾的是它只是以正常的 json_encode 输出。如何将 json_encode 输出打印为表格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:54:26.597

我不清楚，但听起来你只想以 HTML 表格格式显示一个数组，所以我不确定 json_encode 与它有什么关系。

但是，之前已经回答过：

[如何从 PHP 数组创建 HTML 表？](https://stackoverflow.com/questions/4746079/how-to-create-a-html-table-from-a-php-array)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T12:53:23.103

如果您希望每个值都包含在它自己的 td 元素中，那么您将需要遍历数组并自己输出 td 元素。您可以通过 $names 数组在 php 中执行此操作，或者在客户端上使用 json 数组在 JavaScript 中执行此操作。我会在 php 中完成。

在自己的行中输出每一对

```
foreach ($names1 as &$value) {
Echo "<tr>"
Echo "<td>"
Echo  $value[0]
Echo "</td>
Echo "<td>"
Echo  $value[1]
Echo "</td>
Echo "<tr>
} 
```

# android - 定义存储在 SD 卡上的视频文件的路径时出错

> ID：15174666
> 
> 赞同：0
> 
> 时间：2013-03-02T12:48:54.810
> 
> 标签：android, video, android-videoview, filepath

我在正确声明视频文件的路径时遇到问题。我查看了很多不同的资源，他们都说几乎相同的东西，那就是......

```
import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.widget.MediaController;
import android.widget.VideoView;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    VideoView infinnittiVid = (VideoView)findViewById(R.id.videoView1);
    infinnittiVid.setVideoPath("/SdCard/infinnitti.mp4");

    MediaController infinnittiController = new MediaController(this);
    infinnittiVid.setMediaController(infinnittiController);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}
} 
```

无论我做什么，我都会在设备上收到错误“无法播放此视频”我知道我不应该对字符串进行硬编码......问题似乎与地址有关。我尝试了多种格式，它们在图库应用程序中播放，但这段代码永远不会起作用。我弄乱了路径以确认我怀疑这是问题所在，并且我总是遇到相同的错误，并且对路径的逻辑更改不会给我一个工作的 VideoView。

谁能告诉我哪里出错了？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:24:57.877

他们有两种方式

第一的

```
String path= Environment.getExternalStorageDirectory().getPath();
infinnittiVid.setVideoPath(path+"/infinnitti.mp4"); 
```

第二

```
VideoView infinnittiVid = (VideoView)findViewById(R.id.videoView1);
infinnittiVid.setVideoPath("/mnt/sdcard/infinnitti.mp4"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T13:03:46.650

这就是问题

infinnittiVid.setVideoPath("/SdCard/infinnitti.mp4");

应该是这样的

```
 String path= Environment.getExternalStorageDirectory().getAbsolutePath();
    path=path+"/infinnitti.mp4";

Uri mUri = Uri.fromFile(new File(path));
infinnittiVid.setVideoURI(mUri); 
```

# asp.net - 在 webform 项目中使用 TagBuilder？

> ID：15174667
> 
> 赞同：2
> 
> 时间：2013-03-02T12:49:00.130
> 
> 标签：asp.net, asp.net-mvc, reference, webforms

我有一个旧的 webform 项目，现在已设置为 .net 4.0。我添加了 System.Web.MVC ref 4.0 但 TabBuilder 仍然没有显示为已知类型？

编辑：我也尝试添加 System.Web.WebPages 2.0 但这并不能解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:55:55.987

请测试此代码并查看此代码，[也许](http://www.asp.net/mvc/tutorials/older-versions/views/using-the-tagbuilder-class-to-build-html-helpers-cs)您忘记使用

```
using System.Web.Mvc;
using System.Web.Routing;

namespace MvcApplication1.Helpers
{
    public static class ImageHelper
    {
        public static string Image(this HtmlHelper helper, string id, string url, string alternateText)
        {
            return Image(helper, id, url, alternateText, null);
        }

        public static string Image(this HtmlHelper helper, string id, string url, string alternateText, object htmlAttributes)
        {
            // Create tag builder
            var builder = new TagBuilder("img");

            // Create valid id
            builder.GenerateId(id);

            // Add attributes
            builder.MergeAttribute("src", url);
            builder.MergeAttribute("alt", alternateText);
            builder.MergeAttributes(new RouteValueDictionary(htmlAttributes));

            // Render tag
            return builder.ToString(TagRenderMode.SelfClosing);
        }

    }
} 
```

# ruby-on-rails - Ruby on Rails：用黄瓜测试最佳现场

> ID：15174670
> 
> 赞同：1
> 
> 时间：2013-03-02T12:49:21.160
> 
> 标签：ruby-on-rails, cucumber, best-in-place

我想模拟编辑 best_in_place 表单用黄瓜测试它

```
When /^I fill in change first name to "([^\"]*)"$/ do |value|
  bip_text(User, :first_name, value)
end

undefined method `bip_text' for #<Cucumber::Rails::World:0x00000005665850> (NoMethodError) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T03:55:21.407

在 features/support 中创建一个名为 的文件`best_in_place_helpers.rb`，或者您喜欢的任何名称。

内容应该是：

```
include BestInPlace::TestHelpers 
```

# web-services - 在没有任何专用 IP 地址的 EC2 服务器上安装 SSL 证书

> ID：15174672
> 
> 赞同：7
> 
> 时间：2013-03-02T12:49:32.340
> 
> 标签：web-services, rest, amazon-ec2, ssl-certificate, ip-address

**场景：** 我有一个 EC2 服务器，其中包含当前设置为接受来自多个 iPad 的连接的 api。我不希望网络嗅探器看到服务器和设备之间正在交换的 JSON 请求。这个想法是建立一个安全的协议，以便确保通信安全。

有人告诉我购买 SSL 证书是前进的方向。我正在运行的 Amazon 服务器实例具有以下格式的地址：

```
ec2-xx-xxx-xx-xxx.ap-southeast-1.compute.amazonaws.com/ 
```

这是我的 Web 根目录与所有适当的 Web 服务文件所在的位置。我的网络服务 url 看起来类似于这样：

```
ec2-xx-xxx-xx-xxx.ap-southeast-1.compute.amazonaws.com/Agent/Create 
```

依此类推。没有任何托管计划（在需要信息的情况下）。有人建议我从[http://www.Godaddy.com](http://www.Godaddy.com)购买 SSL 证书，并考虑获得最多 5 个多域 SSL 证书包。

**问题： 1** 我需要注意哪些事项才能确保没有任何问题？我最近读到我可能需要为我的实例关联一个弹性 IP 地址，否则我的实例的 IP 会在重启时发生变化？如果是这种情况，这意味着用于此的 SSL 证书：ec2-xx-xxx-xx-xxx.ap-southeast-1.compute.amazonaws.com 域将不再有效，因为 IP 地址将重新启动后发生了变化，因此我失去了我的安全域？

**问题：2** 如果我在问题 1 中的想法成立，那么我的问题将是什么是最用户友好的方式，或者说，初学者为我的服务器实例创建专用 url 的方式（以便 1）域名在服务器重新启动时不会随机更改（不确定我什么时候会重新启动）和 2）这是否意味着我可以拥有更容易记住的 web 服务 url？比如....`www.pk.com/Agent/Create`而不是长长的 ec2 丑陋的 url？！

任何易于遵循的教程都会非常有帮助。我看过一些关于弹性 IP 地址、SSL 证书和其他关于重命名 ec2 url 的文章，但我处于一个我实际上不知道哪一个适用于我的位置。哈哈

希望有人可以提供帮助。谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-02T15:16:59.677

您要做的是获得一个***弹性 IP 地址***。这使您可以在启动实例时将其绑定到*特定*的IP 地址。然后，您可以在 DNS 中注册一个主机名（亚马逊不会在这部分为您提供帮助）并声明该主机名的 IP 地址是您注册的弹性 IP 地址。

最后一步是获取在其专有名称的 CN 字段中具有主机名的服务器证书（严格来说，一个密钥对，其中公共部分是服务器证书），并在实例上安装该服务器密钥对。（这是亚马逊无法帮助您的另一部分，实际上与您自己托管硬件的过程相同。）就像这样，客户端

1.  查找主机名并获取弹性 IP 地址，
2.  连接并获取服务器证书，以及
3.  检查服务器证书并看到它的主机名是他们期望的主机名。（还有其他一些检查，例如证书是否由受信任的证书颁发机构签名以及证书是否在其有效期内。）

这允许客户端相信他们安全连接的人就是他们*希望*安全连接的人，这是建立信任的关键部分。

您**不做**的是在您申请的证书中使用 AWS 机器名称（内部或外部）。这些变化，你真的不想相信其他人的虚拟机。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-02T17:46:26.620

多纳尔的答案是要走的路。您需要显式注册一个域并生成包含 CN 作为该域的 SSL 证书。在这个问题上，弹性 IP 地址绝对是您的朋友。你*会*需要它们。

我添加了另一个答案以提供另一种观点：如果您想扩展后端解决方案，那么这样做会更加困难。如果您曾经考虑过添加更多服务器来托管您的 Web 服务，那么您绝对应该设置一个[Elastic Load Balancer](http://aws.amazon.com/elasticloadbalancing/)，将您的实例添加到其中，并将您刚刚注册的域指向*您的 Elastic Load Balancer*。然后，您可以购买 SSL 证书并将其直接安装在 ELB 上，在 ELB 上配置 SSL 终止。您还将配置 ELB，以便到达端口 443 的连接将映射到服务器上的端口 80（或任何端口）。别担心，这很容易设置。

每当您想向 Web 服务添加更多服务器时，只需设置另一个 EC2 实例（该过程可以而且应该自动化）并将其添加到 ELB。

通过此设置，您无需使用弹性 IP 地址。所有连接都通过 ELB。

# spotify - 如何清除 Spotify App 的网络缓存

> ID：15174673
> 
> 赞同：2
> 
> 时间：2013-03-02T12:49:35.780
> 
> 标签：spotify

我正在为 Spotify 开发一个应用程序。我注意到当我重新加载我的应用程序时，Javascript 并不总是更新。所以我猜内部网络引擎的缓存没有被清除。

有谁知道我怎么能强迫它？Chrome 开发者工具有一个禁用缓存的选项。Spotify 开发者工具似乎没有提供这样的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:58:43.200

`Cmd-R`尝试使用键盘命令（在 Mac 上）重新加载时，我也遇到了这个问题。尝试“右键单击->重新加载”。这对我来说很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-23T11:34:57.747

这是[有关清除 Spotify 缓存的详细视频指南](https://www.mrhack.io/blog/how-to-clear-spotify-cache-video-2/)。

简而言之，在 Spotify 移动应用程序上：转到主屏幕 -> 设置 -> 存储 -> 删除缓存。

# ios - 具有相同键的 NSDictionary 对象

> ID：15174685
> 
> 赞同：1
> 
> 时间：2013-03-02T12:50:40.157
> 
> 标签：ios, xcode

我正在解析一个`JSON`文件并将文件中的每个对象添加到`NSDictionary`. 有时可能会发生文件中的元素相等的情况。这意味着我的多个对象`NSDictionary`将具有相同的 bey 和对象。如果它们具有相同的对象，则没有问题，但是如果它们具有相同的键，则会发生非常奇怪的事情。他们被重复了很多次，这只是混乱。

这就是我将对象添加到字典中的方式：

```
NSArray *messagearray = [data objectForKey:@"message"];
NSArray *namearray    = [data objectForKey:@"name"];

CHOrderedDictionary* Dictionary = [CHOrderedDictionary dictionaryWithObjects:namearray forKeys:messagearray]; 
```

相反，如果所有键都不同，则一切正常。现在，因为这可能会发生......例如

> { “键”：[ “VFG SJ45FFGJJ76v = 1357429260”， “V SJ45FFGJJ76v = 1640600269”， “GH SJ45FFGJJ76v = 330786894”， “GH SJ45FFGJJ76v = -2045929990”， “V SJ45FFGJJ76v = -1145652524”， “d SJ45FFGJJ76v = 1255089702”， "",""],"对象":["G","T","G","G","G","R","",""]}
> 
> ... 702","",""...

有没有办法防止这个错误？例如删除重复的关键对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:03:00.147

NSDictionary（或子类）**必须**具有唯一键，其中不能有重复项。

话虽如此，在使用数组创建字典之前，您应该查看这个[SO question](https://stackoverflow.com/questions/3882515/remove-duplicates-nsmutablearray)以删除重复项。

# css - Opera浏览器显示菜单（css）不同的在线和本地

> ID：15174688
> 
> 赞同：0
> 
> 时间：2013-03-02T12:50:50.317
> 
> 标签：css, menu, opera

在阅读了这方面的许多有用提示后，我充满希望我能在这里找到我的问题的答案。我正在处理的网页包含一个带有按钮背景图像的水平菜单。验证后在浏览器上测试它在 FF、Chrome 和 Opera 上看起来不错。上传后发现**网上**的Opera不显示部分按钮，而其他浏览器没有区别。？？？提前感谢您对此问题的任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:04:24.210

除了我上面的邮件......尝试，测试，咬我的指甲我发现菜单的奇怪呈现只发生在 5 个链接中的 2 个上......一个名为“commonmail.html”，另一个链接回“索引.html”。当我选择幻想名称或仅键入 href="#" 时，css 会正确呈现。我将链接添加到 2 个屏幕截图以显示问题：

[带有幻想链接名称的菜单](http://www.nikiti-houses.com/opera_fantasy_link_names.jpg)

[具有正常链接名称的菜单](http://www.nikiti-houses.com/opera_normal_link_names.jpg)

标记是这个：

```
 <ul>
    <li><a class="direkt" href="#">home</a></li>
    </ul>

    <ul>
    <li class="firstlevel">our houses

        <ul>
        <li><a href="nikiti_location.html">in nikiti</a></li>

        <li><a href="#">in kastri</a></li>

        <li><a href="#">new projects</a></li>
        </ul>

    </li>
    </ul>

    <ul>
    <li><a class="direkt" href="nikiti_info.html" title="Informations about Nikiti and the peninsula of Sithonia">nikiti</a></li>
    </ul>

    <ul>
    <li class="firstlevel">informations

        <ul>
        <li><a href="#" title="Read about our family business and our business philosophy">company</a></li>

        <li><a href="#" title="">buying property in greece</a></li>
        </ul>

    </li>
    </ul>

    <ul>
    <li><a class="direkt" href="commonmail.html" title="Informations about Nikiti and the peninsula of Sithonia">contact</a></li>
    </ul>       

</nav> 
```

而css就是这个：

```
nav {
width: 704px;
padding: 0 0 0 16px;
float: left;
}
nav ul {
float: left;
width: 138px;
list-style-type: none; 
}
nav li.firstlevel {
font-size: 93%;
    font-weight:bold;
text-align: center;
padding-top: 17px;
padding-bottom: 17px;
color: #fff;
border: 1px solid transparent; /*--erforderlich für IE 7--*/
background: url(../pic/button110.png) 50% 50% no-repeat;
} 
nav a {
text-decoration: none;
display: block;
font-size: 90%;
text-align: left;
padding-left: 6px;
padding-top: 6px;
padding-bottom: 6px;
background: url(../pic/sublistbg.png) 0 0 repeat-x;
color: #fff;
} 
nav a:hover {
color: #454545;
background: url(../pic/sublisthoverbg.png) 0 0 repeat-x;
} 
nav li {
position: relative;
} 
nav ul ul {
position: absolute; top:50px; left: 30px;
width: 170px;
z-index: 2;
display: none;
} 
nav ul li:hover ul {
display: block;
} 
nav ul  a.direkt:link {
font-size: 93%;
font-weight: bold;
padding-top: 17px;
padding-bottom: 17px;
padding-left: 0;
text-align: center;
color: #fff;
border: 1px solid transparent;
background: url(../pic/button110.png) 50% 50% no-repeat;
} 

nav ul a.direkt:hover {
color: #454545;
background: url(../pic/button110active.png) 50% 50% no-repeat;
border: 1px solid transparent;
} 
```

# ios - iOS 关闭 ViewController 回调问题

> ID：15174689
> 
> 赞同：1
> 
> 时间：2013-03-02T12:50:51.140
> 
> 标签：ios

我有两个 UIViewControllers A 和 B。

```
[self presentViewController:B animated:YES completion:nil]; 
```

在我调用之后，`dismissViewController:`我需要能够调用已经呈现 B ViewController 的父 ViewController 中的某些方法。我认为`-viewWillAppear`方法会被调用，但解雇后它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:59:32.337

当您创建对象时，`B ViewController`然后实现一个自定义`init`方法，如下所示：

把这个方法放在`B ViewController`

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil withParentView:(UIViewController *)parentViewController
 {
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    self.pViewController = parentViewController;
   // Custom code
}
return self; 
```

}

当您创建 B View Controller 的对象时，然后使用上述方法，您的**parentViewController**将是**self**。

而在解雇你的时候，你会打电话

```
[self.pViewController viewWillAppear:NO]; 
```

希望这会帮助你。

祝一切顺利！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T13:06:42.780

解决方案是要求“A” ViewController 关闭“B” ViewController（通过指向 A ViewController 的指针），然后在完成代码中执行您想要的操作。

iOS6 为视图控制器引入了“倒带”功能，当您有 A 然后 B 然后是 C ViewController 时，您可以在出现 C 时倒退到 A。

看看这个[链接](https://stackoverflow.com/questions/14581538/how-do-i-present-a-view-controller-and-dismiss-all-others)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T16:17:08.670

在控制器 B 子类中，为控制器 A 创建一个属性。

`@property (nonatomic, strong) ControllerA *controllerA;`

在呈现控制器 B 之前，请设置属性：

`[controllerB setControllerA:self];`

当您关闭控制器 B 时，使用完成块调用您要执行的控制器 A 的方法：

```
 [self dismissViewControllerAnimated:YES completion:^{
        [self.controllerA doSomething];
    }]; 
```

（一个可能的问题是，如果在控制器 B 之前释放了控制器 A，那么您最终会得到一个保留周期。如果是这种情况，最好将控制器 A 设置为控制器 B 的代表并使用非正式协议）

# gridview - IOS网格使用UITableviewcell

> ID：15174693
> 
> 赞同：0
> 
> 时间：2013-03-02T12:51:14.947
> 
> 标签：gridview, uitableview, ios6, grid

我想使用`UITableView`和`UITableViewCell`自定义创建一个网格视图，因为对于每一行我想为该行显示一个背景图像。

请帮我找到集合视图以外的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-24T07:41:33.343

根据您的要求，您需要显示一个**GridView**

因此，为了支持早期版本并获得其他很酷的功能，您可以使用其他库，这里有一些选项：

1) [KKGridView](https://github.com/kolinkrewinkel/KKGridView)

2) [UIGridView](https://github.com/tanin47/UIGridView)

3) [AQGridView](https://github.com/AlanQuatermain/AQGridView)

4) [NRGridView](https://github.com/ldesroziers/NRGridView)

5) [MMGridView](https://github.com/provideal/MMGridView)

6) [WCGridView](https://github.com/wess/WCGridView)

我目前正在使用**`AQGridView`**，所以我推荐它，因为它是最少的错误，它的功能与`UITableView`.

此外，如果您尝试在没有**XIB**的情况下执行此操作，您将很难处理它，但您可以使用 Xib 文件创建视图控制器来创建您选择的界面。[这是有关如何以最佳方式完成此操作的](http://vimeo.com/46408155)视频 `Evadne Wu`。这是示例[项目](https://github.com/evadne/gridViewNibTest)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:22:45.303

这是一个非常复杂的问题，有多种解决方案。你有几个选择：

*   创建一个表格视图单元格，其中有多个水平排列的视图以模拟“列”体验。如果您有固定数量的列，这是最好的
*   实现一个 tableview 单元格，其中包含一个水平 tableview（一个 uitableview 在其一侧翻转），您可以在其中将单个单元格旋转到水平 table view 的相反方向。如果每行有可变数量的列，这很好，但是除非您采取措施避免这种情况，否则所有行都将独立滚动。
*   最后实现你自己的网格体验，模拟可重用单元的 uitableview 体验。（但这不在问题参数范围内）

如果这些选项之一对您有吸引力，我可以详细说明。

# mysql - 使用 MySQLi 构建的数据库能否成功迁移到 MySQL 数据库？向后兼容可能吗？

> ID：15174699
> 
> 赞同：1
> 
> 时间：2013-03-02T12:51:51.177
> 
> 标签：mysql, mysqli, compatibility

我将使用 CloudAccess.net 构建一个 Joomla 3 网站，我必须选择数据库类型。在这里，我得到了 MySQLi 和 MySQL 两个选项。

稍后我可能想将我的 Joomla 站点移动到 go4hosting Linux 共享主机。他们的软件包提供 MySQL（没有提到 MySQLi）。

如果我现在使用 CloudAccess.net 选择 MySQLi，然后使用 go4hosting 迁移到 MySQL，它会起作用吗？

或者，我应该使用 CloudAccess.net 一开始就选择 MySQL 吗？

我的局限是我不是程序员。我是一名计算机爱好者，我已经使用 Microsoft Expression Web 建立了我的网站，并计划使用 Joomla。

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:57:24.190

Mysqli（Mysql 改进版）只是 PHP 用来访问 MySQL 数据库的一个接口。数据库本身仍然是 MySQL 数据库。这意味着，您可以通过 Mysql 接口或通过 Mysqli 接口（或通过其他编程语言的其他接口）访问同一个数据库。

[维基 MySQLi 条目](https://en.wikipedia.org/wiki/MySQLi)

# ios - Urban Airship 添加通知服务不起作用

> ID：15174704
> 
> 赞同：0
> 
> 时间：2013-03-02T12:52:07.630
> 
> 标签：ios, apple-push-notifications, urbanairship.com

我正在尝试为 iOS 添加通知服务。

上传 .p12 文件和密码时，我没有收到任何错误（我收到绿色消息：“应用程序服务已保存！”），但 iOS 服务保持灰显状态。

任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T01:19:17.853

我遇到了同样的问题。我注意到的错误消息之一是当我去写测试消息时，它告诉我我的证书格式不正确，我应该重新导出并再次上传。我实际上完全从 UrbanAirship 中删除了该应用程序，从我的钥匙串中重新导出了 .p12，现在一切正常。

# java - 找不到空指针异常的源

> ID：15174706
> 
> 赞同：0
> 
> 时间：2013-03-02T12:52:37.000
> 
> 标签：java, nullpointerexception

我在我的 Java 代码中遇到了一些非常奇怪的行为。我的 Eclipse 日志控制台上显示了一个异常，说`Exception:java.lang.NullPointerException`没有引用它发生的代码。

在调试时，我发现了发生这种情况的一行，所以把它放在`try-catch`希望我能抓住它的地方。但是它没有在 catch 块中返回。

奇怪的部分是即使在执行后立即在该行抛出异常并且执行正常继续。

有人可以告诉我可能的原因吗？我本可以附上源代码，但我检查了参数，一切看起来都很好。

我写这篇文章的主要原因是，如果你们中的任何一个程序员遇到过这种行为，我就会了解这种行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T21:16:51.030

如果您看到异常的消息但没有堆栈跟踪，那是由如下代码引起的：

```
try
    {
    // something which causes the exception
    }
catch (final Exception err)
    {
    System.out.println(err);
    } 
```

这段代码的问题是它只打印异常`.toString()`方法的结果。对于大多数异常，这只是异常类和消息。此代码省略了堆栈跟踪，从而使调试问题变得更加困难。

如果要捕获异常，则将代码更改为如下所示，以便将堆栈跟踪包含在输出中：

```
try
    {
    // something which causes the exception
    }
catch (final Exception err)
    {
    err.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T12:54:37.630

可能是 Eclipse 的问题。我以前见过这种行为，重新启动 Eclipse 解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T13:12:10.147

请检查您的构建器是否已激活并且更改的源代码是否自动构建。否则，您的代码更改将永远不会进入您的运行时应用程序。

我很确定，执行的源代码与编辑器中显示的源代码不同。

# android - 如何从android中的图片获取天气预报

> ID：15174715
> 
> 赞同：0
> 
> 时间：2013-03-02T12:53:16.487
> 
> 标签：android, weather

当我的应用程序启动时它应该在相机上并且当用户捕获图片时我的应用程序应该能够借助该图片说出天气信息。即用户拍摄的图片应该是获取特定天气详细信息的来源地区。如果可以，有可能吗？你能帮我么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:15:58.193

[如果设备有gps或可以从网络获取坐标并且相机将坐标作为exif数据](http://en.wikipedia.org/wiki/Exchangeable_image_file_format#Geolocation)嵌入到图像中，您可以读取这些坐标和拍摄照片的时间，并将信息发送到具有api的气象服务以检索当时该位置的当前天气。

然而，并非所有设备都支持这些功能，用户可以选择禁用作为其图片一部分的位置信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T15:02:48.630

这是一堆天气 API，一旦您获得了照片拍摄位置的 GPS 坐标，您就可以与之交谈：[https ://live.temboo.com/library/keyword/weather/](https://live.temboo.com/library/keyword/weather/)

# wso2 - Stratos 1.6.0 - 存储服务器和数据服务服务之间的消息传递

> ID：15174718
> 
> 赞同：0
> 
> 时间：2013-03-02T12:53:23.790
> 
> 标签：wso2

我正在配置 Stratos 1.6.0 并尝试使以下方案正常工作。

1.  在 Storage Server 中创建数据库
2.  在存储服务器中创建用户
3.  将用户分配给数据库
4.  为存储服务器中的用户/数据库组合生成数据源
5.  在Data Service Server中创建DataService，使用上面的数据源

从我在代码中可以看到...当在 Carbon 应用程序中创建数据源时，org.wso2.carbon.ndatasource.core.DataSourceRepository 将通知集群中的成员新数据源。然后，这些成员将使注册表缓存无效。

问题来了，在 Stratos 1.6.0 的默认集群配置中，Storage Server 和 Data Service Server 位于不同的 Tribe 域中，因此无法在两种类型的应用程序之间使用 Tribe 进行消息传递。

在存储服务器中创建数据源时，如何让数据服务服务器更新其数据源配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T07:24:41.547

您在查询本身中提到的正是提供通过 WSO2 存储服务器创建数据源的选项所期望的。但是，在不同 Carbon 产品的节点/集群之间共享数据源存在一定的技术复杂性（除了创建数据源的 Carbon 产品类型），我们目前正在处理这些问题。因此，综合考虑，将 SS 与 DSS 集成的更好方法是，首先在 WSO2 SS 中创建您的数据库/数据库用户，然后在 WSO2 DSS 中使用该信息（连接字符串、用户凭据等）创建数据源并使用它们。

问候， 普拉巴斯

PS您可以参考[http://sparkletechthoughts.blogspot.in/2013/04/relational-storage-solution-using-wso2.html](http://sparkletechthoughts.blogspot.in/2013/04/relational-storage-solution-using-wso2.html)，它为您提供了创建数据库/数据库用户/权限模板的综合指南。

# asp.net - 数据绑定列表视图中的事件在已发布站点 asp.net 上运行非常缓慢

> ID：15174719
> 
> 赞同：1
> 
> 时间：2013-03-02T12:53:29.733
> 
> 标签：asp.net, performance, listview

我有一个数据绑定列表视图，其中包含一些控件。它们只是图像按钮。当我在本地调试模式下运行时，你运行顺利，代码不会永远运行。

然而。当我发布网站时，由于我在列表视图中按下图像按钮而运行的代码；运行非常缓慢。并且有一段时间没有完全执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:59:54.563

我认为页面重新加载是您的问题。如果是这样，将列表视图和要更新的内容添加到 Ajax 更新面板中可能会解决问题。试一试。还要记住将控件放在 ContentTemplate 中并添加脚本管理器

# android - Eclipse 中未列出的设备

> ID：15174724
> 
> 赞同：0
> 
> 时间：2013-03-02T12:54:04.417
> 
> 标签：android, eclipse, device, adb

我知道有很多关于这个主题的帖子，但到目前为止没有一个对我有帮助。最近我对我的电脑进行了全新安装，现在我的索尼爱立信 Xperia Arc 没有出现在我的 Eclipse 设备列表中（在我重新安装电脑之前它确实出现了）。现在，要修复它，我尝试了以下方法：

1.  从 Google SDK/Sony Ericsson 开发者网站安装最新的驱动程序（windows 告诉我我的驱动程序已经是最新的了）。
2.  打开 USB 调试（我 100% 确定它已打开。我尝试将其关闭再打开，但没有帮助）。
3.  安装所有可用的 SDK 更新（此时我正在尝试任何方法，但这也无济于事）。
4.  运行 adb devices（它显示“连接的设备列表”但列表为空白）
5.  在 adb_usb 文件中手动添加供应商 ID
6.  杀死 adb-server 并重新启动它

以上都没有任何结果。我的设备仍未在 adb devices 中列出，因此也没有出现在 Eclipse 的设备列表中。有谁知道我可以尝试解决这个问题的任何其他事情？我真的很想继续开发应用程序。

**编辑：**

我忘了提，我确实在我的电脑中看到了我的安卓手机。我可以将文件移动到上面等等。

**编辑2：**

我认为这个问题是由冲突的驱动程序引起的。当我查看我的驱动程序文件详细信息时，我看到：

WpdMtpDr.dll

winusb.sys

WUDFRd.sys

WpdMtp.dll

WpdMtpUS.dll

应该有五个条目吗？我对此知之甚少，但经过一番研究后，我想如果我删除 WpdMtpDr.dll 可能会解决问题。但是，它位于 system32 中，除非我确定自己在做什么，否则我不喜欢在那里删除东西。有谁知道这是否确实可能是原因？

**编辑 3：**

在永远被困在这个问题上之后，我**终于**修复了它，所以我会发布我的解决方案，以防有人遇到同样的问题。我所做的其实很简单。只需转到设备管理器并右键单击“Xperia Arc S”，它对我来说列在“便携式设备”下。单击“更新驱动程序软件”，然后单击“浏览我的计算机以查找驱动程序软件”，然后单击“让我从计算机上的设备驱动程序列表中选择”。现在双击“USB 复合设备”。在此之后打开 adb devices 并重新启动 adb 服务器（或者只是重新启动您的电脑，这应该也可以）。这为我解决了这个问题，所以如果你有同样的问题，我希望这会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T20:39:17.037

编辑 3 中的答案：为我工作。

> 只需转到设备管理器并右键单击“Xperia Arc S”，它对我来说列在“便携式设备”下。单击“更新驱动程序软件”，然后单击“浏览我的计算机以查找驱动程序软件”，然后单击“让我从计算机上的设备驱动程序列表中选择”。现在双击“USB 复合设备”。

我在使用 Asus Memo Pad 和 Windows 7 时遇到了问题。现在 adb 终于可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:02:36.000

首先，当设备连接到您的电脑时，您可以使用设备进行其他操作吗？喜欢将照片/音乐从设备移动到它？

如果不是，那么我认为这要么是驱动器问题，要么是如上所述的电缆故障，我肯定会更换电缆并设置您可以从这里获得的最新 Sony 驱动程序：

[http://www.sonymobile.com/gb/tools/pc-companion/](http://www.sonymobile.com/gb/tools/pc-companion/)

如果这个包没有帮助，那么我会更进一步并安装你可以从这里获得的弧光驱动器：

[http://developer.sonymobile.com/downloads/drivers/sony-ericsson-xperia-arc-xperia-neo-xperia-play-xperia-acro/](http://developer.sonymobile.com/downloads/drivers/sony-ericsson-xperia-arc-xperia-neo-xperia-play-xperia-acro/)

您是否在模拟器上成功运行了您的应用程序？

# android - 如何使用 flightstatus api 它在 android 上返回 null

> ID：15174725
> 
> 赞同：1
> 
> 时间：2013-03-02T12:54:04.627
> 
> 标签：android, api

我试图使用来自 flightstatus.com 的 api 获取航班状态

从`httpEntity.getContent();`url 获取 null

它给出了错误

```
status: 405
code: METHOD_NOT_ALLOWED
message: Method not allowed. 
```

日志给出：

```
org.json.JSONException: Value status of type java.lang.String cannot be converted to JSONObject 
```

请帮忙

[我正在使用以下网址](https://api.flightstats.com/flex/flightstatus/rest/v2/json/airport/status/OKBK/dep/2013/2/27/13?appId=16decbe1&appKey=2ed0ada41c7ef6c31253ce11c93b8692&utc=false&numHours=6&maxFlights=10)

和下面的代码

**主要的java类**

```
package com.airportkwt;

import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.ListActivity;
import android.app.ProgressDialog;
import android.os.Bundle;
import android.os.StrictMode;
import android.util.Log;
import android.view.KeyEvent;
import android.view.Window;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;

public class FlightStatus extends ListActivity {

    // url to make request
    private static String url = "https://api.flightstats.com/flex/flightstatus/rest/v2/json/airport/status/OKBK/dep/2013/2/27/13?appId=16decbe1&appKey=2ed0ada41c7ef6c31253ce11c93b8692&utc=false&numHours=6&maxFlights=10";

    // JSON Node names
    private static final String TAG_Array = "flightStatuses";
    private static final String TAG_ID = "flightId";
    private static final String TAG_DepAIrportCode = "departureAirportFsCode";
    private static final String TAG_ArrAIrportCode = "arrivalAirportFsCode";
    private static final String TAG_FlightNum = "flightNumber";

    // contacts JSONArray
    JSONArray contacts = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.flightstatus);

        if (android.os.Build.VERSION.SDK_INT > 9) {
              StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
              StrictMode.setThreadPolicy(policy);
            }

        // Hashmap for ListView
        ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

        // Creating JSON Parser instance
        jsonParser jParser = new jsonParser();

        // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(url);

        try {
            // Getting Array of Contacts
            contacts = json.getJSONArray(TAG_Array);

            // looping through All Contacts
            for(int i = 0; i < contacts.length(); i++){
                JSONObject c = contacts.getJSONObject(i);

                // Storing each json item in variable
                String id = c.getString(TAG_ID);
                String name = c.getString(TAG_DepAIrportCode);
                String email = c.getString(TAG_ArrAIrportCode);
                String address = c.getString(TAG_FlightNum);

             // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                // adding each child node to HashMap key => value
                map.put(TAG_ID, id);
                map.put(TAG_DepAIrportCode, name);
                map.put(TAG_ArrAIrportCode, email);

                // adding HashList to ArrayList
                contactList.add(map);
            }

        } catch (JSONException e) {
            e.printStackTrace();
        }

        /**
         * Updating parsed JSON data into ListView
         * */
        ListAdapter adapter = new SimpleAdapter(this, contactList,
                R.layout.list_departures,
                new String[] { TAG_DepAIrportCode, TAG_ArrAIrportCode }, new int[] {
                        R.id.name, R.id.email, R.id.mobile });

        setListAdapter(adapter); 
```

**jsonParser Java 类**

```
package com.airportkwt;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.os.AsyncTask;
import android.util.Log;

public class jsonParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public jsonParser() {

    }

    public JSONObject getJSONFromUrl(String url) {

        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();          

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
} 
```

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:07:05.983

我找到了解决方案

API返回休息和需要的休息请求不是json

```
public static JSONObject queryRESTurl(String url) {
        HttpClient httpclient = new DefaultHttpClient();
        HttpGet httpget = new HttpGet(url);
        HttpResponse response;

        try {
                response = httpclient.execute(httpget);
                Log.i("TAG", "Status:[" + response.getStatusLine().toString() + "]");
                HttpEntity entity = null;
                try{
                    entity = response.getEntity();
                }catch(Exception e){
                    Log.e("log_tag", "Error in http connection "+e.toString());
                }
                if (entity != null) {

                    InputStream instream = entity.getContent();

                        String result = RestClient.convertStreamToString(instream);
                        Log.i("TAG", "Result of converstion: [" + result + "]");

                        instream.close();
                        //return result;

                        try {
                            jObj = new JSONObject(result);
                        } catch (JSONException e) {
                            Log.e("JSON Parser", "Error parsing data " + e.toString());
                        }
                        return jObj;

                }
        } catch (ClientProtocolException e) {
                Log.e("REST", "There was a protocol based error", e);
        } catch (IOException e) {
                Log.e("REST", "There was an IO Stream related error", e);
        }

        return null;
    } 
```

# css - 我如何为 IE 编写 CSS。我的代码不能在 IE10 和 9、7、8 中工作？

> ID：15174726
> 
> 赞同：-1
> 
> 时间：2013-03-02T12:54:06.647
> 
> 标签：css, internet-explorer-10

我已经看到我的代码在 IE 中被破坏了。我在 IE9 和 8 上尝试过，在我的页面上写了一些额外的 CSS 后它就可以工作了。

不幸的是，我发现我的 IE hack 不适用于最近推出的版本 10。我选择[http://www.impressivewebs.com/ie10-css-hacks/](http://www.impressivewebs.com/ie10-css-hacks/)但它现在不起作用。我正在 Windows 7 IE10 上对其进行测试。

对于旧的 IE，我写了这样的代码

```
<!--[if IE]>
    <link rel="stylesheet" href="assets/ie.css">
<![endif]--> 
```

有人对IE10有什么技巧吗？如果我将它添加到我的样式表中，我已经看到 IE10 可以正常工作。现在想知道如何在IE10浏览器中添加Ie.css。

请记住，IE10 不再支持 IE 评论。使用 Ie.css 我的代码可以在除版本 10 之外的所有浏览器中使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T13:14:14.170

在 CSS 中，这种情况适用于我：

```
@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {  
   /* IE10-specific styles go here */  
} 
```

在 JS 中，同样，它适用于我：

```
<!--[if !IE]><!--<script>  
if (/*@cc_on!@*/false) {  
    document.documentElement.className+=' ie10';  
}  
</script><!--<![endif]-->

.ie10 .example {  
   /* IE10-only styles go here */  
} 
```

来源：[http ://www.impressivewebs.com/ie10-css-hacks/](http://www.impressivewebs.com/ie10-css-hacks/)

# python - Python：为整个包导入一次模块

> ID：15174730
> 
> 赞同：3
> 
> 时间：2013-03-02T12:54:24.150
> 
> 标签：python, import, module, package

我目前正在编写一个基本上以这种方式构建的应用程序：

main.py
+ Package1
+--- Class1.py
+--- Apps
+ Package2 +
--- Class1.py
+--- Apps

所以我有两个问题：首先，在两个包中，都有所有应用程序需要的模块，例如：re. 有没有一种方法可以一次为整个包导入一个模块，而不是在每个需要它的文件中导入它？

而且，如您所见，两个包中都使用了 Class1。有没有在两个包之间共享它以避免代码重复的好方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T13:13:28.040

我强烈建议不要这样做：通过将导入与使用该功能的模块分开，您会更难以跟踪模块之间的依赖关系。

但是，如果您真的想这样做，一种选择是创建一个名为`common_imports`（例如）的新模块并让它执行您所追求的导入。

然后在您的其他模块中，添加以下内容：

```
from common_imports import * 
```

这应该为您提供该模块的所有公共名称（包括所有导入）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T21:36:03.860

要回答您的第二个问题，如果您命名的两个模块`Class1.py`实际上是相同的，那么您不应该将它复制到两个包中。将它放在一个包中，该包只包含两者共有的代码，然后导入它。绝对*没有*必要复制文件并尝试在两个副本中维护每个更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-27T01:13:20.797

Q1：
您**必须**找到一种方法来导入您的包，因此您有两个选择：（
如果我错了或不彻底，请纠正我）

1.看詹姆斯的解决方案，您需要定义一个类，将所有模块内部，最后将它们导入您的子类

2\. 基本上什么都不导入到您的主类中，而是只导入一次到您的子类

例如：（在 A_1 子类中） 然后在 您 的主类中，只需执行 完全避免多次导入模块 Q2：将您的 class1.py 与主类放在同一目录中，或将其移动到 Package1(&2).Apps 中的另一个文件夹 `import re
def functionThatUseRe(input): pass`
`try: from YourPackage import A_1 #windows except: import A_1 #MAC OSX
A_1.functionThatUseRe("")`

```
import Class1 
```

从那里开始使用代码

# javascript - 从动态添加的脚本向父 chrome 扩展发送消息

> ID：15174738
> 
> 赞同：0
> 
> 时间：2013-03-02T12:55:07.363
> 
> 标签：javascript, google-chrome-extension

我有通过此代码动态添加到 youtube 页面的 Script.js 文件：

```
 var s = document.createElement('script');
    s.src = chrome.extension.getURL('Script.js');
    (document.head || document.documentElement).appendChild(s);
    s.onload = function () {
        s.parentNode.removeChild(s);
    }; 
```

我有两个问题：
1-如何将消息从插入的文件发送到父 chrome 扩展。
2-我如何从插入的文件中发出跨域请求..它在控制台中显示错误消息

```
Origin http://www.youtube.com is not allowed by Access-Control-Allow-Origin. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:30:03.933

1.  使用[`postMessage`](http://developer.chrome.com/extensions/content_scripts.html#host-page-communication)或自定义事件（[示例 1](https://stackoverflow.com/a/13779769/938089?call-background-function-of-chrome-extension-from-a-site)、[参考 2](https://stackoverflow.com/a/7597826/938089?invoking-a-google-chrome-extension-from-javascript)、[示例 3](https://stackoverflow.com/a/9636008/938089?chrome-extension-retrieving-gmails-original-message)）。
2.  将[权限](http://developer.chrome.com/extensions/declare_permissions.html)添加到清单后，您可以从内容脚本发起跨站点请求。使用步骤 1 中的一种方法从网页调用 Content 脚本。确保您只请求必要的权限（例如`*://*/*`，如果您不需要访问所有 URL，则不需要）并验证所有输入（这样恶意页面就不会滥用您的扩展程序）。

# c++ - 与 C++ 相关的文件

> ID：15174739
> 
> 赞同：0
> 
> 时间：2013-03-02T12:55:20.873
> 
> 标签：c++

我用 C++ 编程。当我看到保存 .cpp 文件的文件夹时，我发现了一些文件，如 cpp、o 和 exe。

程序运行时是否还有其他相关文件，如bak、tds？它们之间有什么区别以及它们是何时制造的。我的意思是我的印象是我们保存时形成cpp，编译时形成目标文件。bak 和 exe 文件是什么时候制作的？或者纠正我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T13:02:08.547

现在，除非您自己创建文件，否则它很可能与您的工具集有某种关联。

*.cpp, *.h => 源文件。这些是您将编辑以进行编程的那些。

*.o, *.obj => 对象文件。这些是源文件的翻译版本（更准确地说是 *.cpp 文件）并且是链接器的原材料。

*.exe => 可执行文件。在链接器处理完您的目标文件后，它将所有这些文件链接在一起以创建可以由您的操作系统运行的实际可执行文件。

*.bak => 通常是一个“备份”文件，如果正在进行有风险的操作，通常会使用该文件，因此很容易恢复损坏。

*.tds => 我知道这个是 Turbo Debugger-File。IDE 要求允许单步执行已编译的代码、保留符号等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T13:00:52.327

.cpp 文件用于源代码

.h 文件用于标题

可能还有其他具有各种扩展名的文件，其中包含资源、项目定义、构建定义、make-files - 这取决于开发环境/编译器。

.o 文件是从源代码生成的二进制文件

.exe 文件是 Windows 可执行文件 - 这可能是您要运行程序的单个文件。并且此文件是在构建期间从所有库和 .o 文件创建的。

.bak 文件只是一些以前版本的 .cpp 或 .h 文件的备份。创建取决于开发环境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T13:01:20.793

`bak`倾向于指示某种类型的备份文件，可能是在您编辑文件时由编辑器制作的。我最初对`tds`文件一无所知，但[粗略的网络搜索](http://www.fileinfo.com/extension/tds)发现它们很可能是为 Borland Turbo Debugger（`tds`代表 Turbo Debugger Symbols）生成的文件。

您可能需要考虑升级到在过去 15 年中某个时候更新过的编译器。当有更好（和免费）的替代品可用时，很少有使用过时的技术的借口。

通常，*您*编写`cpp`文件，编译器编译它们。`o`文件通常是已编译为对象的文件，然后将它们组合成`exe`可执行文件。

请注意，这当然取决于您的环境。例如，UNIX 编译器很少生成`exe`文件，因为那是 DOS/Windows 主义。

# matlab - 将 .csv 文件读入 MATLAB

> ID：15174749
> 
> 赞同：0
> 
> 时间：2013-03-02T12:56:21.763
> 
> 标签：matlab, csv

作为我作业的一部分，我必须阅读一个 .csv 文件。该文件包含以下列下的文本、数字数据和缺失数据的混合：数字、标题、描述（>100 个单词，可变长度）、位置、时间、术语、公司、类别、来源。

有超过 50 万行。

建议我一个命令将此文件读入 MATLAB。

我已经尝试过以下方法：

```
uiopen('filename.csv',1) 
```

它给出错误：使用 textscan 读取更复杂的格式。然后我尝试了：

```
data =textscan('filename.csv','%f %s %s %s %s %s %s %s %s %f','HeaderLines', 1, 'Delimiter', ','); 
```

这个命令运行完成，但它只给出一个单元格数组（1X10）（它们是空的）。因此，我没有得到我想要的。

我也尝试了 textread 命令，但它给出了错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T05:42:49.830

textscan 是您想要使用的，但根据[textscan](http://www.mathworks.com/help/matlab/ref/textscan.html#btg0kes)的 matlab 文档页面，第一个参数应该是文件 ID。现在你正在传递一个字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-27T15:19:38.390

您可能想尝试使用[readtable](http://www.mathworks.com/help/matlab/ref/readtable.html)：

```
t = readtable('filename.csv'); 
```

这将在 Matlab 中创建一个表，其中可以包含字符串和数字数据。

或者，您可以使用 Import Tool（可从 Matlab UI 上的 Import Data 按钮访问），或者您可以使用 uiimport 打开它：

```
uiimport('filename.csv') 
```

这将显示您的数据的图形表示，并且可以为您生成代码以进行导入。

使用 textscan 您可能面临的困难是您需要正确获取格式（%f、%s 等），并且其中的任何变化都可能导致失败。例如，如果由于某些缺失/错误数据而在数字字段中有字符串，则它可能会失败。如果您选择使用 textscan 并且没有得到您期望的结果，您可能需要尝试使用所有 '%s' 格式规范。

```
textscan(f,'%s %s %s %s %s %s %s %s %s %s','HeaderLines', 1, 'Delimiter', ','); 
```

# python - Tkinter 不能将标签附加到列表中？

> ID：15174751
> 
> 赞同：2
> 
> 时间：2013-03-02T12:56:51.560
> 
> 标签：python, tkinter, label, configure

```
labels = []
global labels
#blablbalabla code
welcome = Tkinter.Label(root,text= "Welcome to Fobby").place(x=250,y=250)
labels.append(welcome)
print labels
>>> [None] 
```

怎么了？标签是与列表不兼容的类吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T13:01:01.490

这是因为`place()`返回 None：

```
labels = []
welcome = Tkinter.Label(root,text= "Welcome to Fobby")
welcome.place(x=250,y=250)
labels.append(welcome)
print labels 
```

# java - 无法从 AS3 Flash CS6 调用 red5 服务器中的方法

> ID：15174752
> 
> 赞同：1
> 
> 时间：2013-03-02T12:56:57.803
> 
> 标签：java, actionscript-3, flash, remoting, red5

好吧，这让我很生气。我已经在 Internet 上学习了近 8 个教程，最后，我的 Red5 服务器实例正常工作。对我好！但是当我从我的 AS3 应用程序中调用我的 Red5 应用程序中的 Java 方法时，在 Eclipse 的“控制台”窗口中，我收到了这个错误：

```
[ERROR] [NioProcessor-1] org.red5.server.service.ServiceInvoker - Method getTheName with parameters [] not found in org.red5.core.Application@17e5fde 
```

这是我的 Application.java 文件。

```
package org.red5.core;

import org.red5.server.adapter.ApplicationAdapter;
import org.red5.server.api.IConnection;
import org.red5.server.api.IScope;
import org.red5.server.api.service.ServiceUtils;

/**
 * Sample application that uses the client manager.
 * 
 * @author The Red5 Project (red5@osflash.org)
 */
public class Application extends ApplicationAdapter {

    /** {@inheritDoc} */
    @Override
    public boolean connect(IConnection conn, IScope scope, Object[] params) {
        return true;
    }

    /** {@inheritDoc} */
    @Override
    public void disconnect(IConnection conn, IScope scope) {
        super.disconnect(conn, scope);
    }

    public String getTheName() { return "MyName!"; }
} 
```

这是我的 AS3 代码。我只是把它放在时间轴上。

```
var nc:NetConnection = new NetConnection();
nc.connect("http://localhost/Mintium/RoomHere", "SomeUsernameHere");
nc.addEventListener(NetStatusEvent.NET_STATUS, onNetStatus);
nc.objectEncoding = ObjectEncoding.AMF0;

function onNetStatus(e:NetStatusEvent):void
{
    switch (e.info.code)
    {
        case "NetConnection.Connect.Success" :
            trace("connected");
                              nc.call("getTheName", new Responder(getName_result, getName_error));  
            break;
    }
}

function getName_result(res:Object):void { append("Name : " + res.toString()); }
function getName_error(res:Object):void { append(res.toString()); } 
```

一个星期以来，我一直在试图弄清楚，我的日期是下个月。如果这件事不解决，我的评估将失败。请帮我解决我的问题。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T15:03:39.010

抱歉，我在 2 个月前没有看到这个，我本可以帮助您通过评估的。不过，我想我可以回答这个问题，因为在调用 Red5 服务时遇到了类似的问题。

解决这个问题的关键在于 Red5 中使用 Spring 框架的那些部分。在您的项目中，应该有一个名为 red5-web.xml 的文件位于服务器项目的 WEB-INF 文件夹中。该文件包含 Red5 的 Spring 组件使用的一些 Bean 依赖项。在我阅读的教程中，甚至在大多数（相当稀疏和分布式的）red5 编程文档中都没有提到这一点。

您需要做的是在该文件中为您的方法添加一个 bean 条目。在您的情况下，条目应如下所示：

```
<bean id="getTheName.service" class="org.red5.core.Application" /> 
```

请注意我使用了您的函数名称，并附加了“.service”。我不明白为什么，但是您需要附加“.service”才能让 Red5 找到您的功能。您需要为要用作服务的每个类添加一个类似的条目。

当然，我上面所说的一切都是基于您将服务放入 Application 类这一事实——这是我从未做过的事情。如果您阅读 red5-web.xml 文件，您将看到该类已经有一个条目，因为它已经通过 Spring 作为类注入，充当处理 Web 上的请求的“端点”。我不知道使用 Application 类作为端点和服务提供者是否是一个好主意（它违反了 OOP 中的“关注点分离”，可能会导致 Spring 出现问题）。

我通常做的是在 org.red5.core 包（或您可能想要的任何其他包）中添加一个单独的类来提供所需的服务，然后在 red5-web.xml 中添加一个条目来注入该类及其方法。因此，对于您的项目，假设您在 org.red5.core 包中有一个名为 NameProvider 的类：

```
public class NameProvider
{
   public NameProvider() {}
   public String getTheName() { return("MyName!"); }
} 
```

然后将以下条目添加到 red5-web.xml 文件中：

```
<bean id="getTheName.service" class="org.red5.core.NameProvider" /> 
```

这应该使一切正常。

我希望这对您将来或遇到此问题的其他人有所帮助。我只是希望我能早点看到这个问题。

# xcode - 在 XCode 中链接 glib

> ID：15174753
> 
> 赞同：0
> 
> 时间：2013-03-02T12:57:05.750
> 
> 标签：xcode, linker, shared-libraries, glib, quartz-composer

我有一个奇怪的问题，这可能很明显，但目前对我来说真的不清楚：

我正在制作一个 Quartz Composer 插件。我有一个基于 XCode 的工作区，其中包括一个自定义库。该库正在编译 poly2tri-c delaunay 三角剖分库，该库**与 glib 链接**。我编译我的库没有问题，但插件本身不想编译并抛出这些错误：

> 架构 i386 的未定义符号：“p2t_cdt_new(_GPtrArray*)”，引用自：-[hOzPolygon2D triangulationWithRefineSteps:holes:steinerPoints:] in libhOzVector.a(hOzPolygons.o) “p2t_cdt_free(CDT_ *)”，引用自：-[hOzPolygon2D triangulationWithRefineSteps :holes:steinerPoints:] 在 libhOzVector.a(hOzPolygons.o) "p2t_point_new_dd(double, double)"，引用自：-[hOzPolygon2D triangulationWithRefineSteps:holes:steinerPoints:] in libhOzVector.a(hOzPolygons.o) "p2t_cdt_triangulate(CDT_* )"，引用自：-[hOzPolygon2D triangulationWithRefineSteps:holes:steinerPoints:] in libhOzVector.a(hOzPolygons.o) "p2t_cdt_get_triangles(CDT_*)"，引用自：-[hOzPolygon2D triangulationWithRefineSteps:holes:steinerPoints:] in libhOzVector.a(hOzPolygons.o) "p2t_triangle_get_point(_P2tTriangle* , int)"，引用自：-[hOzPolygon2D triangulationWithRefineSteps:holes:steinerPoints:] in libhOzVector。 a(hOzPolygons.o) "_g_ptr_array_add"，引用自：-[hOzPolygon2D triangulationWithRefineSteps:holes:steinerPoints:] in libhOzVector.a(hOzPolygons.o) "_g_ptr_array_new"，引用自：-[hOzPolygon2D triangulationWithRefineSteps:holes:steinerPoints:] in libhOzVector.a(hOzPolygons.o) ld：未找到架构 i386 的符号 collect2：ld 返回 1 个退出状态

这是编译器消息的图片：

![编译器消息](../Images/dae9b97eca244f9b054910e4954404ff.png)

还有我的链接：

![链接](../Images/6b014f1525d8949654fd5d019813d6af.png)

当我忘记链接到一个库时，我通常会收到这些消息，但这里我是在库本身和插件项目中链接到 glib。

关于有什么问题的任何想法？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:37:55.393

好吧，经过一些“深奥”的研究，我终于发现了问题所在：XCode 只是**没有自动将 c 文件包含在目标成员**中......

# c# - Parent 不包含采用 0 个参数的构造函数

> ID：15174755
> 
> 赞同：0
> 
> 时间：2013-03-02T12:57:11.553
> 
> 标签：c#

如果我在 C# 中有这段代码：

```
public abstract class Parent
{
    private int x;
    public Parent(int x)
    {
        this.x = x;
    }
    public abstract void foo;
}  
public class Child
{
    public override void foo()
    {  
        x = x + 10;
    }
} 
```

我收到以下错误：

> Parent 不包含采用 0 个参数的构造函数。

如何在不创建非参数构造函数的情况下修复它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T12:58:35.513

您可以在中创建构造函数`Child`，例如

```
public Child(int x) : base(x)
{
} 
```

构造函数*不是*继承的——但如果您根本不提供任何构造函数，C# 编译器会尝试创建一个与此等效的构造函数：

```
public Child() : base()
{
} 
```

这就是这里失败的原因，因为没有可以调用的无参数基础构造函数。

当然，您的派生类构造函数不必具有与基类构造函数相同的参数 - 只要它将适当的参数传递给基构造函数，就可以了。例如，您可以编写：

```
public Child() : base(0) // Default to x = 0
{
} 
```

有关更多详细信息，请参阅我[关于构造函数的文章。](http://www.yoda.arachsys.com/csharp/constructors.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T12:59:09.547

通过手动调用 Parent 的构造函数：

```
public class Child: Parent {
    public Child( ) 
        : base(0) { }

    public override void foo( ) {  
        x = x + 10;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T13:01:06.013

那是因为有一个对零参数的构造函数的隐式调用。

所以你需要添加一个显式调用：

```
public Child(int x) : base(x)
{
} 
```

或者，您可以在父级本身中添加零参数构造函数：

```
public parent() { } 
```

# php - PHP从包含文件发送电子邮件

> ID：15174756
> 
> 赞同：-1
> 
> 时间：2013-03-02T12:57:17.643
> 
> 标签：php

我想创建一个包含文件，该文件在用户登录时向用户发送电子邮件。这就是我的用户获得身份验证的方式：1-我的身份验证包含文件根据 login.php 传递的用户电子邮件在数据库中选择用户密码. 2-如果用户通过身份验证，我只需创建 2 个会话变量 user_id 和 user_name

所以我想做的是，一旦用户通过身份验证，我想在我的 email_function 包含文件中调用我的 send_login_email 函数。我还计划创建更多电子邮件功能，借此向用户发送电子邮件以获取其他通知，因此将 user_email 保存在会话变量中很重要。这是我发送的电子邮件目前包含的文件的样子：

```
<?php
require_once('../includes/authenticate.inc.php');
function login_mail($_SESSION['uemail'])
{
$to = $_SESSION['uemail'];
$subject = "login";
$message = <?php $user_name ?>, You have logged in.";
$from = "example@email.com";
$headers = "From:" . $from;
mail($to,$subject,$message,$headers);
}
?> 
```

在我的身份验证文件中，我选择用户详细信息，如下所示：

```
 $sql = 'SELECT salt, user_password, user_role, user_name, person_id FROM users WHERE user_email = ?';
$stmt = $conn->stmt_init();
$stmt->prepare($sql);
// bind the input parameter
$stmt->bind_param('s', $user_email);
// bind the result, using a new variable for the password
$stmt->bind_result($salt, $storedPwd, $user_role, $user_name, $person_id);
$stmt->execute();
$stmt->fetch(); 
```

在检查密码是否正确的 if 语句中，我有以下代码-**我也在此处调用电子邮件函数**：

```
$_SESSION['start'] = time();
  session_regenerate_id();
  header("Location: $redirect");
  // get the user's name and id
  $_SESSION['name'] = $user_name;
  $_SESSION['id'] = $person_id;
  $_SESSION['uemail'] = $user_email;
  require_once('../includes/email_func.inc.php'); //new stuff
  login_mail($_SESSION['uemail']); 
```

当我成功登录时，我没有收到电子邮件。我是在 php 中使用函数和电子邮件的新手，我非常感谢一些帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:01:59.043

更改功能如下：

```
function login_mail($to, $user_name)
{
$subject = "login";
$message = "$user_name, You have logged in.";
$from = "example@email.com";
$headers = "From:" . $from;
mail($to,$subject,$message,$headers);
} 
```

然后将其称为：

```
login_mail($_SESSION['uemail'], $user_name); 
```

函数的参数必须是普通变量，而不是数组元素。您试图引用`$user_name`函数中不存在的 . 并且`<?php ...?>`不用于普通作业，在从 HTML 输出切换到 PHP 代码时使用。

确保您启用了错误报告，您应该从这些错误中得到错误。

# apache - 重定向在apache中不起作用

> ID：15174772
> 
> 赞同：1
> 
> 时间：2013-03-02T12:59:11.553
> 
> 标签：apache, redirect

我配置了以下重定向：

```
<VirtualHost ...>
  <Directory ...>

    RewriteEngine On
    RewriteCond %{HTTPS} !=on
    RewriteRule ^(myapp/login) https://%{HTTP_HOST}:443/$1 [NC,R=301,L] 
```

但它不是重定向。我该如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:56:52.007

一般调试：如果您有权访问 apache 配置本身，则可以启用[`RewriteLog`](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritelog)哪个，取决于您设置的级别，可以为您提供匹配、当前值和更改的逐步细分。

这里发生的情况是整个`host`上下文中的 url 匹配存在差异（仅在 apache 的配置文件中可用）或`.htaccess`上下文的每个目录：

> 什么是匹配的？
> 在**VirtualHost**上下文中，Pattern 最初将与*URL 的主机名*和端口之后以及查询字符串之前的部分进行匹配（例如“/app1/index.html”）。
> 在**Directory 和 htaccess context 中**，模式最初将与*文件系统路径匹配，在删除*引导服务器到当前 RewriteRule 的前缀之后（例如“app1/index.html”或“index.html”，具体取决于指令的位置定义）。

两者之间的区别在于，在`VirtualHost`上下文中你有一个领先的`/`，在`.htcaccess`上下文中（网络上的大多数例子都假设因为它更容易获得）你没有那个领先`/`。

简而言之，这里可行，但不适用于`.htaccess`：

```
^/(myapp/login) 
```

如果你想让它在两种情况下都匹配，请将前导设为`/`可选：

```
^/?(myapp/login) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T02:28:10.087

对我来说，以下代码有效（我认为这与 != （如@jason 所说）和端口的组合有关。

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule ^(myapp/login) https://%{HTTP_HOST}/$1 [R=301,L,NC] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T02:37:02.157

我认为否定字典相等运算符可能存在一些问题。我在 mod_rewrite 文档或其他地方找不到任何禁止这样做的内容，但我也没有看到使用`!=`. 事实上，文档表明它应该可以工作，但您可以尝试只匹配“off”而不是“not on”，如下所示：

```
RewriteCond %{HTTPS} off 
```

如果是这种情况，使用通常的方法（例如，使用 ）来排除故障将非常困难`RewriteLog`。

# cakephp - CakePHP 2.3 - 如何同时添加和更新两个不同的表

> ID：15174773
> 
> 赞同：1
> 
> 时间：2013-03-02T12:59:14.000
> 
> 标签：cakephp, saving-data, cakephp-2.3

我有两张与此事相关的表格，posts 和 postratings。模型有以下关系：

`Post hasmany Postrating`
`Postrating belongsto Post`

表模式是：

桌柱
`id | user_id | post | rating_post | ratings`

表评级
`id | user_id | post_id | rating_post`

这个想法是，如果帖子存在，用户可以对其进行评分。通过对表进行评级，该表`ratings`将获得一个**新条目**，并且该表`posts`将获得 ID 为 post_id 的帖子条目的**更新**。

我的问题是，我只能在两个表中保存新条目。我用 . 试过了`saveAssociated()`，但结果和我用`saveAll()`.

如果有人可以帮助我，我将不胜感激。当然，如有必要，我会提供更多信息。

提前致谢

编辑： //

这是 PostratingsController 的方法 add

```
public function add($id = null) {

$this->loadModel('Post');

if (!$this->Post->exists($id)) {
    throw new NotFoundException(__('Invalid post'));
    }
if ($this->request->is('post')) {
    $this->Postrating->create();
    if ($this->Postrating->save($this->request->data)) {
        if ($this->Postrating->save($this->request->data)) {
            $this->Postrating->Post->id = $id;
            $this->Postrating->Post->save($this->request->data);
            $this->Session->setFlash(__('The postrating has been saved'));
            $this->redirect(array('action' => 'index'));
        }
    } else {
        $this->Session->setFlash(__('The postrating could not be saved.'));
    }
} else {
    $options = array('conditions' => array('Post.' . $this->Post->primaryKey => $id));
    $this->request->data = $this->Post->find('first', $options);
}

$post = $this->Postrating->Post->find('list');
$users = $this->Postrating->User->find('list');
$this->set(compact('posts', 'users'));

$options = array('conditions' => array('Post.' . $this->Post->primaryKey => $id));
$this->set('posts', $this->Post->find('first', $options)); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:11:43.113

你确定是同时的吗？假设您`rating`是一个数字（例如，介于 1 和 5 之间）并且您希望将“总”评分存储在您的帖子表中。我会做类似的事情（伪代码）

```
if($this->Rating->saveRating($user_id, $post_id, $rating)) {
    $this->Rating->Post->id = $post_id; // update instead of insert
    $this->Rating->Post->updateRating($rating);
} 
```

例如：

*   用户评分 评分为 5 的帖子
*   检查用户是否已经评价了这篇文章
*   保存评分
*   使用新评级 ( `existing_rating + new_rating`)更新 Post 表

# eclipse - spring-web maven 依赖项未随 Eclipse 发布

> ID：15174774
> 
> 赞同：8
> 
> 时间：2013-03-02T12:59:23.427
> 
> 标签：eclipse, spring, google-app-engine, maven, spring-mvc

我的**gae + spring + maven**项目完美运行。但我无法使用**eclipse**使其工作。

当我使用 Eclipse 中的 GAE 运行我的项目时（使用 Google Plugin，*Run As > Web Application*） ，似乎*pom.xml中声明的***spring-web**依赖项正在从*WEB-INF/lib***中消失。**所以没有**spring-web**这是一个例外：

 *******```
Could not instantiate listener org.springframework.web.context.ContextLoaderListener
java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener 
```

[（此处](http://pastebin.com/RyupC7ru)为完整的 GAE 堆栈跟踪）

从控制台运行`mvn clean package gae:run`，该应用程序就像一个魅力一样工作，并且**spring-web**按预期放置在*WEB-INF/lib 目录下。*

刚刚在 BitBucket 上发布了我的测试项目：[https ://bitbucket.org/jelies/gae-spring-maven](https://bitbucket.org/jelies/gae-spring-maven)

*知道为什么从 Eclipse 启动 webapp 时**spring-web**没有发布到**WEB-INF/lib吗？***

* * *

使用：

*   SpringSource ToolSuite 3.1.0（基于eclipse 3.8）
*   爪哇 6
*   春天 3.2.1
*   Maven 3.0.4
*   谷歌应用引擎 1.7.5
*   maven-gae-插件 0.9.6

* * *

**更新：** 使用 spring 版本**3.1.4.RELEASE时，** *spring-web*依赖项正在发布到*WEB-INF/lib*。任何 3.2.X 版本都不会发生这种情况。

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T06:47:18.820

为我的配置（Eclipse 4.2、WAS 7.0、mvn 3）添加了一个 Jira 问题：[https ://jira.springsource.org/browse/SPR-10494](https://jira.springsource.org/browse/SPR-10494)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-02T16:35:34.500

如果您的 .classpath 文件有条目`<classpathentry kind="output" path="target/classes"/>`，请尝试将其更改为您的 WEB-INF/classes 目录。我的设置是 maven 标准，所以我把这条线改成了`<classpathentry kind="output" path="src/main/webapp/WEB-INF/classes"/>`. 这刚刚解决了我的问题（Eclipse Juno，WAS 7，没有安装 m2e）。

此外，如果它适用于其他人，我应该提到，对于我的服务器（Websphere），我选择“使用工作区中的资源运行服务器”发布设置。

这个问题表明我真的不了解 Eclipse 的发布，但在此之前，当我选择“工作区中”设置时，它实际上将我的资源发布到 \workspace.metadata.plugins\org.eclipse.wst.server.core \tmp0 和 WEB-INF\lib 不包含 spring-web。但是，通过上述更改，我不再看到我的代码发布到该目录。我现在不确定我的服务器如何获取它需要的二进制文件，但它似乎正在工作。

作为旁注/额外的好处（可能完全不相关），当我对 JSP 进行更改时，我不再需要发布来查看对 JSP 的更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-09T16:50:36.247

这为我修复了它：

1.  找到包含在您的 Web 应用程序中的 spring-web.jar 的位置。在我的情况下，它在 user.m2\repository\org\springframework\spring-web\4.1.6.RELEASE\spring-web-4.1.6.RELEASE.jar
2.  打开 spring-web-4.1.6.RELEASE.jar en 例如。7zip
3.  从 jar 中删除此文件：META-INF\web-fragment.xml（在 7zip 中右键单击文件 -> 删除）
4.  关闭 7zip 并在 Eclipse 中的服务器上运行“发布”

更多信息：[https ://jira.spring.io/browse/SPR-10494?focusedCommentId=94572&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-94572](https://jira.spring.io/browse/SPR-10494?focusedCommentId=94572&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-94572)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T12:34:29.700

毫无疑问，带有 eclipse 和 maven 的 spring 3.2.x 不起作用；从 Google Eclipse 插件启动应用程序时，`spring-web`未将其发布到*WEB-INF/lib 。*

尝试使用 Spring 3.2.1 和 3.2.2。它只适用于使用较低版本的我（现在我使用的是 3.1.4）。*********

# c - 为什么会跳到“else”部分？

> ID：15174785
> 
> 赞同：-2
> 
> 时间：2013-03-02T13:00:56.243
> 
> 标签：c

我只是尝试这样做`linear search`，结果证明它显示了该`else`部分。而且我不明白我做错了什么。逻辑...

```
#include<stdio.h>
#include<conio.h>
main()
{
      int a[10], i, x, size;
      printf("Enter the size of the array: \n");
      scanf("%d",&size);
      printf("Enter the elements into the array: \n");
      for(i=0; i<size; i++)
      {
               scanf("%d",&a[i]);
      }
      printf("Enter the element to be searched for: \n");
      scanf("%d",&x);
      for(i=0; i<size; i++)
      {
               if(x==a[i])
               {
                   printf("The element is at: %d",i);
                   break;
               }
               else
               {
                   printf("The element is not in the array.");
                   break;
               }
      }
getch();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T13:03:20.227

因为当它检查第*一个元素*并发现它不是您要查找的元素时，它会退出循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T13:02:07.263

您`break`在 the`if`和`else`语句中都有，这意味着您不是遍历数组，而是总是`for`在第一个元素之后退出循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T13:05:19.287

1.  您只需通过数组，并且对于每个元素，您告诉它是否是该元素，并且在每种情况下您决定它是否被全局找到。这是不正确的。让我们声明一个布尔变量，在开始时将其设置为 false，如果找到元素，则将变量设置为 true；最后，如果此变量为假，您将在搜索中写下您未成功的消息，而不是在每个元素之后。只有在成功后才应留下休息。

2.  您必须检查，该大小小于数组 a 的大小；

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T13:05:41.480

从部分中删除`break`语句`else`-
您的代码仅检查第一个数组元素是否是要搜索的元素

更好地修改你的循环如下：

```
 int flag = 0;
    for(i=0; i<size; i++)
    {
        if(x==a[i])
        {
            printf("The element is at: %d",i);
            break;
        }
        else
        {           
            flag = 1;  
        }
    }

    //will print if number is not present in the array
    if(flag !=0 ){
        printf("The element is not in the array.");
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-02T13:12:05.290

将您的搜索循环更改为：

```
 int found = 0;

  i=0;
  while(found == 0 && i < size){
    if(x == a[i]){
        found = 1;
        printf("The element is at: %d",i);
        break;  
    }
    i++;
  }
  if(found == 0)
    printf("The element is not in the array."); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-02T13:35:46.127

这是一种无需标志也可以做到的方法！

您需要在循环完成后执行不在数组中的检查，而不是在它仍在其中时执行检查。

```
 for(i=0; i<size; i++)
      {
               if(x==a[i])
               {
                   printf("The element is at: %d",i);
                   i = size + 2;
               }
      }

      if (i <= size)
      {
          printf("The element is not in the array.");
      } 
```

# javascript - 在没有警告的情况下通过 SSL 实现 StockTwits 小部件

> ID：15174794
> 
> 赞同：1
> 
> 时间：2013-03-02T13:02:06.577
> 
> 标签：javascript, stocktwits

尝试在通过 SSL 提供（并且必须保留）的网页中 使用[StockTwits 小部件。](http://stocktwits.com/developers/docs/widget)

由于 widget-loader.min.js 脚本链接是通过 http 调用的，因此我将代码复制到我们的域中，以便通过我们的 SSL 提供服务。问题仍然没有解决。Chrome 25 说我的页面“运行不安全的内容”并且完全拒绝运行甚至显示小部件。

所以我深入研究了 .js 文件，发现了一点：

```
m=b.ssl?"https://":"http://" 
```

确定警告来自小部件 CALL 到服务，我破解了这一行，如下所示：

```
// add one character    ↓
m=b.ssl?"https://":"https://" 
```

最初我以为我成功了，因为 Chrome 25 加载了小部件！但是，当我看到地址栏中漂亮的绿色 https:// 变成了黄色警告标志时，我的喜悦是短暂的。单击它获取信息会显示一条警告：“...显示来自[http://assets1.stocktwits.net](http://assets1.stocktwits.net)的不安全内容....”。{该死}

由于 .js 是安全的，并且由于黑客攻击，对 stocktwits 的调用是使用 https 进行的，因此我不得不得出结论，stocktwits 要么无法或无法配置为通过 HTTPS 回复。

您对这个小部件有任何经验，或者看到我做的不对吗？TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T21:25:34.453

目前，该小部件不完全兼容 SSL。我们将研究在小部件中使用 SSL 选项会涉及什么。似乎可以在影响最小的情况下完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T21:05:18.767

我们现在已修复小部件以使用无协议 URL。让我们知道这是否为您解决了这个问题。

# ruby-on-rails - 点击时渲染部分

> ID：15174798
> 
> 赞同：8
> 
> 时间：2013-03-02T13:02:10.953
> 
> 标签：ruby-on-rails, jquery, renderpartial

我想在一些标准操作上调用部分。我正在使用这种方法来调用部分：

```
 %li= link_to 'Delete Event', 'javascript:void(0);', :class => 'alert tiny button', :data => {'reveal-id' => :RevealDelete}
= render 'layouts/reveal_delete', :item => event_display(@event.event), :resource => @event 
```

然后在我的部分，

```
#RevealDelete.reveal-modal

 %a.close-reveal-modal ×
  %h3= "Delete #{item}"
  %p Are you sure you want to delete this?
  =link_to "Delete #{item}", resource, :method => :delete, :remote => :true, :confirm => resource, :class => 'button close-reveal-modal'
  %a.button.alert.close-reveal-modal Cancel 
```

我怎么能有这样的东西：

```
link_to 'Delete', '#', :partial => 'layouts/delete', :remote => :true? 
```

这样我只在单击而不是在页面加载时呈现该部分？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-02T13:15:57.843

您可以使用 javascript 来做到这一点，例如：

```
<%= link_to "Delete", delete_content_path, :remote => true %> 
```

然后，您相应控制器中的操作将是这样的：

**我的控制器：**

```
def delete_content
  respond_to do |format|               
    format.js
  end        
end 
```

然后，您可以`delete_content.js.erb`在链接的正确目录内创建，并在其中放置以下代码：

**delete_content.js.erb**

```
$('#div_id').html("<%= render :partial => 'my_partial' %>"); 
```

那么在你看来：

**delete_content.html.erb**

```
<div id = "div_id">
#this div is html div that will render your partial

</div> 
```

不要忘记将您的部分**_my_partial.html.erb**放在同一个文件夹中。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-11-16T06:57:52.223

要添加到接受的答案，我只有在将 js 部分更改为以下内容后才能使用它：

```
$('#div_id').html("<%= escape_javascript(render :partial => 'my_partial') %>"); 
```

没有`escape_javascript`它，它只是在后台渲染部分而不是更新视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T13:14:03.840

在视图上这样做：

```
link_to "Delete #{item}", '/model/confirm_deletion', :method => :delete, :remote => true #add the class and extra attributes if neeeded 
```

在您的控制器上

```
def confirm_deletion
end 
```

并在js中为confirm_deletion操作添加一个视图

```
#RevealDelete.reveal-modal
  %a.close-reveal-modal ×
  %h3= "Delete #{item}"
  %p Are you sure you want to delete this?
  =link_to "Delete #{item}", resource, :method => :delete, :remote => :true, :confirm => resource, :class => 'button close-reveal-modal'
  %a.button.alert.close-reveal-modal Cancel

:javascript
  $(body).append($('#RevealDelete')); 
```

这将发出一个 ajax 请求来加载该自定义确认对话框，也许您想添加一些包装器来插入对话框而不是使用 body.append

# php - 在高图表中创建饼图

> ID：15174799
> 
> 赞同：-2
> 
> 时间：2013-03-02T13:02:15.190
> 
> 标签：php, mysql, highcharts

我在 MySQL 中有一个包含以下数据的表

```
Buy_client    Amount

ABC            6597
XYZ            4479
PQR            2075
qqq            1706
ttt            1030
Other          450 
```

我想在高图表的饼图中显示以下数据。有人请帮我解决这个问题。我是 PHP 和 HighCharts 的新手

问题 1：我需要根据这些数据创建一个饼图

问题 2：我为此使用了 HighCharts。有人请帮我在 HighCharts 中做到这一点

* * *

我已经使用以下代码来执行此操作，但它不会在饼图中显示信息，而只是在 Web 浏览器中显示数据

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Highcharts Example</title>

<?php
$con = mysql_connect("localhost","root","");

if (!$con) {
die('Could not connect: ' . mysql_error());
}

mysql_select_db("offlinesurv", $con);

$my_data = mysql_query("SELECT * FROM top_buy_clients");

while($row = mysql_fetch_array($my_data)) {
echo $row['buy_client'] . "\t" . $row['qty']. "\n";
}

?> 

<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript"> 
    $(function () {
     var chart;
     $(document).ready(function() {
     chart = new Highcharts.Chart({
        chart: {
          renderTo: 'container',
          plotBackgroundColor: null,
          plotBorderWidth: null,
          plotShadow: false
     },
     title: {
          text: 'Browser market shares at a specific website, 2010'
            },
     tooltip: {
          pointFormat: '{series.name}: <b>{point.percentage}%</b>',
        percentageDecimals: 1
            },
     plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    color: '#000000',
                    connectorColor: 'green',
                    formatter: function() {
                        return '<b>'+ this.point.name +'</b>: '+ this.percentage +' %';
                    }
                }
            }
        },
        series: [{
            type: 'pie',
            name: 'Browser share',
            data: [ <?php echo $row; ?>]
        }]
    });
});

});
    </script>
</head>
<body>
<script src="js/highcharts.js"></script>
<script src="js/exporting.js"></script>

<div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>

</body>
 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:21:19.213

在您的 php 中...您对数据库进行查询...在 while 循环中，您需要构造字符串，并且在循环结束时字符串应如下所示：

```
 $my_data = "['ABC',   6597],
                ['XYZ',   4479],
                ['PQR',   2075],
                ['qqq',   1706],
                ['ttt',   1030],
                ['Others', 450] "; 
```

然后在你的javascript文件中，你应该有这样一行

```
series: [{
            type: 'pie',
            name: 'Pie Data',
            data: [
                <?php echo $my_data; ?>
            ]
        }] 
```

这很简单。

萨卢多斯。

# java - 对可扩展前端设计方法（Spring Framework）的任何建议

> ID：15174802
> 
> 赞同：2
> 
> 时间：2013-03-02T13:02:37.737
> 
> 标签：java, spring, user-interface, frontend, user-experience

我有一些来自 UI 人员@java 技术的问题

我最近从 php 切换到 java 域。尽管我在使用 php 驱动的 CMS 应用程序进行前端主题化工作方面有很好的经验。

因为，知道我对 Spring 框架非常陌生，并且已经对 UI 方面的 jsp 文件有所了解。

如果您可以推荐、帮助我或提供建议……可以遵循哪些最佳设计 ui 实践以使设计在企业级应用程序中作为外观一致的有机体而存在。

现在，bootstrap 是首选的 css 框架......并且在应用程序中得到了很好的采用。

分享一些细节，虽然我发现教 Java 开发人员非常具有挑战性，UI 设计方面......除了他们的主要任务是编码，根据产品所有者要求构建逻辑和来自线框屏幕的 UI 输入......

因为它们在视觉上并不倾向于基于“像素”的美学……我发现界面在某些地方效果不佳……而且看起来也不是很精致

并且由于有优秀的 UI / UX foks 资源紧缩，他们可以解决他们的问题，除了在应用程序中编写最佳交互，新功能......等等等等。

尽管如此，已经开始缓慢、重复和稳定地训练他们……教他们如何重用你的 css 代码，编写高效的样式，并在屏幕/视口上达到良好对齐和精心布置的像素水平。

我可以带什么最好的或任何培训模块，以便他们变得自给自足......例如也已经完成

[http://slid.es/gauravmishr/introduction-to-css-for-jsp-developers](http://slid.es/gauravmishr/introduction-to-css-for-jsp-developers)

想知道您的建议和想法，以便可以实现设计的可扩展性。交给 java ui/ux 大师 :-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:41:01.183

也许你应该试试[Asual's Summer](http://www.asual.com/summer/)。它是 Spring MVC 的表示层库。它允许您从 jar 中引用资源，从而使模块化变得非常容易。对我来说最重要的是，您使用一些自定义标签和 el 表达式而不是 JSP 编写简单的 html5。它还支持资源缓存和压缩。最后，您可以准备 html 模板以包含在您的视图中，从而增加核心的可重用性。我已经在 twitter 引导程序中广泛使用它，并且效果很好。

# sql - 如何在sql server 2008r2中杀死当前正在执行的作业查询

> ID：15174803
> 
> 赞同：1
> 
> 时间：2013-03-02T13:02:48.043
> 
> 标签：sql, sql-server-2008-r2, jobs

我是一个 SQL Server 新手，我被分配了一个小任务，我无法解决这个问题。我必须验证，如果我终止 sql server 作业当前正在执行的查询，该作业将无限期地继续运行，否则它将失败。创建一个运行长时间运行的 sql 查询的小作业很容易完成，但我不知道如何识别当前正在运行的任务并终止它。我使用这个参考 [http://blog.sqlauthority.com/2009/01/07/sql-server-find-currently-running-query-t-sql/](http://blog.sqlauthority.com/2009/01/07/sql-server-find-currently-running-query-t-sql/) 但它没有显示当前正在执行的查询。

对不起，如果这是一个非常愚蠢的问题，但任何帮助表示赞赏！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:18:05.233

右键单击服务器名称并选择 Activity Montior。

或者，您可以使用以下命令查询进程列表：

```
select * from sys.dm_exec_requests 
```

Adam Machanic提供了一个更好的解决方案[`sp_WhoIsActive`](http://whoisactive.com)，但对于您的情况来说，这可能有点过头了。

# android - 难以使用 Android Eclipse 下载文件？

> ID：15174806
> 
> 赞同：0
> 
> 时间：2013-03-02T13:03:07.097
> 
> 标签：android, eclipse, download

我正在努力制作一个简单的应用程序来下载互联网文件这是我的代码我已经从另一个问题中编辑了一些但是每当我运行我的应用程序时我仍然没有响应错误任何人都可以向我显示更正甚至不同的方式?

```
 package com.example.downloading;

import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;
import org.apache.http.util.ByteArrayBuffer;

import android.net.Uri;
import android.os.AsyncTask;
import android.os.Build;
import android.os.Bundle;
import android.os.Environment;
import android.os.Handler;
import android.os.Message;
import android.os.ResultReceiver;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.app.Activity;
import android.app.DownloadManager;
import android.app.IntentService;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;

public class MainActivity extends Activity {

    Button startBtn;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        startBtn = (Button)findViewById(R.id.download_button);
        startBtn.setOnClickListener(new OnClickListener(){
            public void onClick(View v) {

                String url = "my stuff";
                DownloadManager.Request request = new DownloadManager.Request(Uri.parse(url));
                request.setDescription("descrition");
                request.setTitle("title");

                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
                    request.allowScanningByMediaScanner();
                    request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);
                }
                request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, "etc.mp3");

                DownloadManager manager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);
                manager.enqueue(request);

            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:16:05.323

```
public void DownLoadTheMusic(){
        try {
            URL url = new URL("http://www.tagsinfosoft.com/android/shelf/Shelf_Cam.mp3");
            HttpURLConnection c = (HttpURLConnection) url.openConnection();
            c.setRequestMethod("GET");
            c.setDoOutput(true);
            c.connect();

            String PATH = Environment.getExternalStorageDirectory() + "/download/";
            File file = new File(PATH);
            file.mkdirs();
            File outputFile = new File(file, "Shelf_Cam.mp3");
            FileOutputStream fos = new FileOutputStream(outputFile);

            InputStream is = c.getInputStream();

            byte[] buffer = new byte[1024];
            int len1 = 0;
            while ((len1 = is.read(buffer)) != -1) {
                fos.write(buffer, 0, len1);
            }
            fos.close();
            is.close();

        } catch (IOException e) {
            Toast.makeText(getApplicationContext(), "Update error!", Toast.LENGTH_LONG).show();
        }
    }  

call this in a Asynctask

    public class downloadMusic extends AsyncTask<Integer, Integer, Integer>
        {

            @Override
            protected Integer doInBackground(Integer... params) {
                // TODO Auto-generated method stub

                try {

                    DownLoadTheMusic();

                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                return null;

            }

            @Override
            protected void onPostExecute(Integer result) {
                // TODO Auto-generated method stub
                super.onPostExecute(result);
                Context context=shelf.this;
                pd.dismiss();
                Intent intent = new Intent(Intent.ACTION_VIEW);
                intent.setDataAndType(Uri.fromFile(new File(Environment.getExternalStorageDirectory() + "/download/" + "Shelf_Cam.mp3")), "application/vnd.android.package-archive");
                startActivity(intent);  

            }

            @Override
            protected void onPreExecute() {
                // TODO Auto-generated method stub
                super.onPreExecute();
                pd=ProgressDialog.show(shelf.this,"Updating","Please wait....." );
            }

        } 
```

如果您从 Internet 下载小型音乐文件，请在按钮上执行此任务单击使用此任务。

# c# - 如何取消定义符号 CONTRACTS_FULL？

> ID：15174808
> 
> 赞同：2
> 
> 时间：2013-03-02T13:03:21.973
> 
> 标签：c#, c-preprocessor, code-contracts, preprocessor-directive

> 如果您在项目属性页面的代码合同选项卡中启用合同检查，Visual Studio 会自动定义**CONTRACTS_FULL符号。**
> 
> - C# 5.0 简而言之（第 518 页）

我想禁用/取消定义该符号，但它没有出现在项目设置`Conditional compilation symbols`的选项卡字段中。`Build`

（我对完全禁用代码合同不感兴趣！我只是说将合同检查设置`None`为不是解决方案）。

如果这很重要，我想这样做的原因是因为在我的发布版本中我只想抛出`Contract.Requires<TException>`，而我根本不想抛出`ContractException`。

我发现的一个“解决方案”是放在`#undef CONTRACTS_FULL`每个文件的第一行，它修复了它，但实际上这样做会很糟糕。

*（顺便说一句，到目前为止 VS 没有定义`CONTRACTS_FULL`，我必须自己定义它，但我猜有些设置不小心改变了）*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T00:27:28.387

您不能运行合约工具并取消定义 CONTRACTS_FULL 符号。这些工具取决于所定义的。如果你试图强迫它，什么都不会起作用。这就是我们在 msbuild 脚本中自动定义符号的原因。

Code Contract 工具的用户不应手动尝试定义或取消定义 CONTRACTS_FULL 符号，因为它是工具控制的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:22:49.730

我读过那本书，并且有一个只使用 Contract.Requires 的合同级别。这是之前没有的选项，但它肯定在书中那个部分的某个地方。但是，我无法帮助您对 CONTRACTS_FULL 进行全局取消定义。对不起。我认为尽管在那个合同检查级别它是自动取消定义的。

编辑：是的，你需要把它放在第一级（ReleaseRequired）。

# c# - 当软件以正常关闭 (X) 结束或抛出意外错误时如何执行函数

> ID：15174811
> 
> 赞同：-1
> 
> 时间：2013-03-02T13:03:35.983
> 
> 标签：c#, wpf, terminate-handler

当正在运行的应用程序通过正常关闭方式（右上角 X）终止或发生意外错误并且软件终止时，我想执行一个函数。

我如何在 c# 4.5 WPF 应用程序中做到这一点

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:18:53.310

在你的`App.xaml.cs`-

*   覆盖的`OnStartUp`方法和钩子`UnhandledException`事件 `Current AppDomain`，每当应用程序由于一些未处理的异常而即将关闭时，它将被调用。
*   正常关闭应用程序的覆盖`OnExit`方法。
*   创建`CleanUp`方法并从上述两种方法中调用方法。

    ```
    protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);
        AppDomain.CurrentDomain.UnhandledException += new
           UnhandledExceptionEventHandler(CurrentDomain_UnhandledException);
    }

    private void CleanUp()
    {
        // Your CleanUp code goes here.
    }

    protected override void OnExit(ExitEventArgs e)
    {
        CleanUp();
        base.OnExit(e);
    }

    void CurrentDomain_UnhandledException(object sender,
                                          UnhandledExceptionEventArgs e)
    {
        CleanUp();
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T13:16:47.267

您可以像这样处理`Exit`应用程序的`Application`子类主实例的`UnhandledException`事件和当前`AppDomain`实例的事件：

```
public partial class App : Application {

    public App() {
        this.Exit += App_Exit;
        AppDomain.CurrentDomain.UnhandledException += CurrentDomain_UnhandledException;
    }

    void CurrentDomain_UnhandledException(object sender, UnhandledExceptionEventArgs e) {
        MessageBox.Show("Exception " + e.ExceptionObject.GetType().Name);
    }

    void App_Exit(object sender, ExitEventArgs e) {
        MessageBox.Show("Bye bye");
    }   

} 
```

请注意，给定以下（通过单击某些按钮来模拟）未处理异常的场景：

![在此处输入图像描述](../Images/9620249e3c1a319808e63bb173aa4860.png)

它处理各自的点击事件，如下所示：

```
 private void buttonThrowNice_Click(object sender, RoutedEventArgs e) {
        throw new Exception("test");
    }

    private void buttonStackOverflow_Click(object sender, RoutedEventArgs e) {
        this.buttonStackOverflow_Click(sender, e);
    }

    private void buttonFailFast_Click(object sender, RoutedEventArgs e) {
        Environment.FailFast("my fail fast");
    }

    private void buttonOutOfMemory_Click(object sender, RoutedEventArgs e) {
        decimal[,,,,,] gargantuan = new decimal[int.MaxValue,int.MaxValue,int.MaxValue,int.MaxValue, int.MaxValue, int.MaxValue];
        Debug.WriteLine("Making sure the compiler doesn't optimize anything: " + gargantuan.ToString());
    } 
```

类的`UnhandledException`事件`AppDomain`只处理：

*   *常规*异常
*   这`OutOfMemoryException`

而：

*   *故障快速*
*   和`StackOverflow`例外

没有被抓住。

# objective-c - 检测双击 NSTableview 标题

> ID：15174814
> 
> 赞同：4
> 
> 时间：2013-03-02T13:03:48.117
> 
> 标签：objective-c, cocoa, header, nstableview

我需要检测对 a`NSTableView`的标题的双击。

我发现以下在双击时触发，但我无法检测到点击了哪一列：

```
[table setTarget:self];
[table setDoubleAction:@selector(myDoubleClickInList:)]; 
```

在 myDoubleClickInList: 里面我使用的方法

```
[table clickedRow] == -1 
```

获取标题。

但我无法从`[table clickedColumn]` 它甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T08:43:43.993

假设您可以访问调用的实例变量或属性，`table`那么以下将让您获得列标识符，

```
NSInteger column = [table clickedColumn];
NSRange columnRange = NSMakeRange(0, [table numberOfColumns]);
if (NSLocationInRange(column, columnRange){
    NSTableColumn *tableColumn = [[table tableColumns] objectAtIndex:column];
    NSString *identifier = [tableColumn identifier];
    // Now do something with the column identifier...

} else {
    // The click was not in a column, do something else...
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-02T14:22:42.460

如果我必须这样做，我会创建一个`UIview`子类`UITapGestureRecognizer`，并在视图顶部添加（双击 -> 选择器），并`- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section`返回该自定义视图。不过，我现在无法为您提供任何代码，但我仍然希望这会有所帮助。

# c++ - 如何将基于通用迭代器的算法与基于实现的算法结合起来？

> ID：15174815
> 
> 赞同：0
> 
> 时间：2013-03-02T13:04:18.880
> 
> 标签：c++, templates

我正在使用策略模式和抽象工厂模式在运行时在计算器类中生成不同的算法。

计算将取决于所涉及类型之间的关系。这就是为什么我将“*Algorithm::calculate”作为一个成员函数模板，对于关系而言是通用的。

但是，我已经有一个在现有代码中完全基于实现的算法，它既不是通用的也不是基于迭代器的，我想将它添加到算法层次结构中，以便我也可以使用 AbstractFactory 生成它看看它的行为。

基于实现的算法使用计算中涉及的类型的成员函数来完成计算。在这个例子中，它将使用RelationshipWithA::target_type 成员函数来访问Type& 的数据，以及使用“A”成员函数来访问RelationshipWithA::a_ 的数据。

这是我到目前为止想出的（这只是一个模型，没有抽象工厂和计算器类）：

```
#include <iostream>

class Result{}; 

class A {};  

class B {
    public: 
        void specific() const 
        { 
            std::cout << "B::specific()" << std::endl;
        };
};

class C : public B {};

class D {};

template<class Type>
class RelationshipWithA
{
    const A& a_; 

    const Type& t_;

    public: 
        typedef Type target_type; 

        RelationshipWithA (const A& a, const Type& t)
            :
                a_(a), 
                t_(t)

        {
            std::cout << "RelationshipWithA::ctor" << std::endl;
        }; 

        const A& a() const 
        {
            return a_; 
        }

        const Type& type() const
        {
            return t_;
        }
};

class DefaultAlgorithm 
{
    public:
        template <class Relationship>
        void calculate (Result& res, const Relationship& r)
        {
            std::cout << "DefaultAlgorithm::calculate" << std::endl;
            const A& a = r.a(); 
            const typename Relationship::target_type& t = r.type(); 
            // Default iterator based calculation on a, target_type and r
        };
};

class AlternativeAlgorithm 
: 
    public DefaultAlgorithm 
{
    public:
        template <class Relationship>
        void calculate (Result& res, const Relationship& r)
        {
            std::cout << "AlternativeAlgorithm::calculate" << std::endl;
            // Optimized iterator based calculation on a, target_type and r
        }
};

class ImplementationBasedAlgorithm 
:
    public DefaultAlgorithm 
{
    public:
        // No specialization: Relationships store
        // a const reference to any class that inherits from B
        template <class Relationship>
        void calculate (Result& res, const Relationship& r)
        {
            // Use B implementation and the Relationship With  A to compute the result
            std::cout << "ImplementationBasedAlgorithm::calculate" << std::endl;
            const A& a = r.a(); 
            const B& b = r.type();
            b.specific();
            // Implementation based on B implementation
        }
};

int main(int argc, const char *argv[])
{
    Result res; 

    A a; 
    C c; 

    RelationshipWithA<C> relationshipAC (a, c);

    DefaultAlgorithm defaultAlg; 
    AlternativeAlgorithm alternativeAlg;
    ImplementationBasedAlgorithm implementationAlg;

    defaultAlg.calculate(res, relationshipAC);
    alternativeAlg.calculate(res, relationshipAC);
    implementationAlg.calculate(res,relationshipAC);

    D d; 
    RelationshipWithA<D> relationshipAD (a, d);

    defaultAlg.calculate(res, relationshipAD);
    alternativeAlg.calculate(res, relationshipAD);
    // This fails, as expected
    //implementationAlg.calculate(res,relationshipAD);

    return 0;
} 
```

我喜欢这种设计，因为算法不是通用类，这使得通用抽象工厂在运行时很容易生成它们。

然而，在 Effective C++ 中有一个 Item 36 说：“永远不要重新定义继承的非虚拟函数”。我的意思是，非虚拟函数是实现不变的，它们通常不应该被覆盖，但是：

1.  C++ 中没有可用的虚拟成员函数模板。
2.  如果我在RelationshipWithA 和“*Algorithm::calculate”上将Algorithm 类设为通用成员函数，则工厂需要了解Realtionship 才能生成算法，并且代码会变得很臭（至少对我而言）。

即使我覆盖了继承的非虚拟函数（函数模板），这是否是该问题的正确解决方案？

对客户来说，行为上没有任何区别：结果就在那里，唯一的区别在于计算的方式。这意味着仍然维持 Is-A 关系：“*Algorithm::calculate”对于客户端仍然是实现不变的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:35:47.810

这不是真正的**Is-A**关系...

具体实现并不是真正**的 DefaultAlgorithm** ...它们是特定算法...

您可以有一个可以使用工厂创建的空`BaseAlgorithm`类。但是，在使用模板函数之前，无论如何您都需要将其转换为正确的类型。无论如何，这有点击败工厂模式，因为您没有使用接口。

在您的情况下，如果工厂创建派生类之一但返回基类，如果您使用该变量，它将调用基类方法：

```
DefaultAlgorithm algo = Factory.CreateImplementationBasedAlgorithm();
RelationshipWithA<D> relationshipAD (a, d);
algo.calculate(res, relationshipAD); //won't fail because the base class methods are used (because it isn't virtual) 
```

要解决这个问题，您可以创建一个基`Relationship`类，并将**calculate()**方法设为虚拟。**calculate()**
方法 将获得然后您可以将关系静态转换为具有该算法所需的接口的某个 base_relationship 接口，因此您可以因没有正确**的 a()**或**type()**方法而导致编译失败。

# ruby-on-rails - 未初始化的常量 Mongoid::Spacial::Document::ClassMethods::Mongo

> ID：15174819
> 
> 赞同：0
> 
> 时间：2013-03-02T13:05:10.940
> 
> 标签：ruby-on-rails, ruby, mongoid

我正在尝试使用`mongoid_spacial`gem，这是我的模型的外观：

```
上课地点
    包括 Mongoid::Document
    包括 Mongoid::Spacial::Document

        字段：名称，：类型=>字符串

        字段：来源，类型：数组，空间：true
        字段：嘴，类型：数组，空间：{lat: :latitude, lng: :longitude, return_array: true }

       空间索引：来源

      结尾

```

错误是

```
   未初始化的常量 Mongoid::Spacial::Document::ClassMethods::Mongo
   MONGOID：尝试使属性恒定化，尝试不使用命名空间。
   MONGOID：无法从 app/models/property.rb 确定模型：
   NameError：未初始化的常量 Mongoid::Spacial::Document::ClassMethods::Mongo`

```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T22:20:50.710

升级到`mongoid_spacial`0.2.17，它修复[了您看到的命名空间错误](https://github.com/ryanong/mongoid_spacial/issues/31)。

# asp.net - 创建帐户后显示消息

> ID：15174823
> 
> 赞同：2
> 
> 时间：2013-03-02T13:06:06.577
> 
> 标签：asp.net, vb.net, label, code-behind, createuserwizard

我在更新面板中有创建用户向导，这是我的做法：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
<ContentTemplate>
<asp:CreateUserWizard ID="CreateUserWizard1" runat="server"
                    DisableCreatedUser="True"
                    ContinueDestinationPageUrl="~/Login.aspx" MailDefinition-BodyFileName="~/EmailTemplates/NewAccountTemplate.htm" LoginCreatedUser="False">
<ContinueButtonStyle BorderStyle="None" CssClass="bar g-button g-button-submit" Font-Size="12px" />
<CreateUserButtonStyle CssClass="foo g-button g-button-red" Height="30px"
                        Width="125px" BorderStyle="None" Font-Size="12px" />

<MailDefinition BodyFileName="~/EmailTemplates/NewAccountTemplate.htm" From="no-reply@mihirauniverse.org" IsBodyHtml="True" Priority="High">
</MailDefinition>

<WizardSteps>
<asp:CreateUserWizardStep ID="CreateUserWizardStep1" runat="server">
<ContentTemplate>
<table>
========//Some code here
<tr>
<td>
<asp:Label ID="confirmmsg" runat="server" Text=""></asp:Label>
</td>
</table>
<asp:UpdateProgress ID="UpdateProgressUserDetails" runat="server" DisplayAfter="0">
<ProgressTemplate>
<div style="position: absolute; top: 384px; left: 169px;">
<img src="Main/images/Loader.gif" alt="loading" /><br />
<span style="font-weight: normal; font-size: small; color: #000000;">Please wait...</span>
</div>
</ProgressTemplate>
</asp:UpdateProgress>

</ContentTemplate>
</asp:CreateUserWizardStep>
<asp:CompleteWizardStep ID="CompleteWizardStep1" runat="server">
</asp:CompleteWizardStep>
</WizardSteps>
</asp:CreateUserWizard>
</ContentTemplate>
</asp:UpdatePanel> 
```

**`label "confirmmsg"`**现在我想知道从代码隐藏创建用户帐户后在哪个事件中以及如何显示 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:00:08.377

使用`OnCreatedUser`“在成员资格提供商创建新的网站用户帐户后发生。”

**代码示例**

```
<asp:CreateUserWizard runat="server" OnCreatedUser="CreateUserWizard1_CreatedUser">

  protected void CreateUserWizard1_CreatedUser(object sender, EventArgs e)
      {
         // Display the confirm msg

      } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T14:20:30.137

我找到了答案：

这是我需要在 CreatedUser 事件中做的事情：

```
Dim lbl As Label
lbl = CreateUserWizard1.CompleteStep.ContentTemplateContainer.FindControl("confirmmsg")
lbl.Text = "Some text" 
```

# python - 调试 Python 程序

> ID：15174824
> 
> 赞同：-1
> 
> 时间：2013-03-02T13:06:16.333
> 
> 标签：python, debugging, primes

实在看不懂这个程序是怎么回事，它返回

```
[2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 16, 17, 19, 20, 22, 23, 25, 26, 28, 29, 31, 32, 34, 37, 38, 41, 43, 44, 46, 47, 49] 
```

帮助？

```
def primeTest(n):
     if n < 2:
        return False
     if n == 2:
        return True
     for x in range(3, int(n ** 0.5 + 0.5), 2):
        if n % x == 0:
            return False
     return True
def primeList(largestValue):
    primes = []
        for a in range(2, largestValue):
            if primeTest(a) == True:
                primes.append(a)
    return primes     
print(primeList(101)) 
```

我已经意识到这是第一个函数`primeTest`，因为如果我输入`print(primeTest(10))`它就会返回`True`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:32:47.203

以下是一些跳出来的问题：

1) 你从不检查可除性`2`。

2）`primeList()`应该返回`primes`而不是`primeList`。

3) in 的上界减`range(3, int(n ** 0.5 + 0.5), 2)`一。例如，对于`n==9`整除性`3`永远不会检查。

一旦我修复了这些，代码就会按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T13:40:48.783

首先，您应该切换内部和外部函数，然后正确地进行主要测试，最后返回列表，而不是函数：

```
def primeList(largestValue):
    def isPrime(n):
        if n < 2: return False
        if n == 2: return True
        if n & 1 == 0: return False
        for x in range(3, int(n ** 0.5)+1, 2):
            if n % x == 0:
                return False
        return True

    primes = []
    for a in range(2, largestValue):
        if isPrime(a):
            primes.append(a)
    return primes

print(primeList(101)) 
```

# html - Chrome 和 Opera 中的 Kinetic JS 性能问题

> ID：15174826
> 
> 赞同：2
> 
> 时间：2013-03-02T13:06:35.333
> 
> 标签：html, performance, browser, canvas, kineticjs

当我使用 Chrome 或 Opera 浏览器时，我的动态 JS 应用程序出现了一些严重的性能问题。当我使用 IE 或 Firefox 时，性能很好。您可以在此处查看应用程序[http://kinlibtst.elitno.net/](http://kinlibtst.elitno.net/)此处的 js 代码：http: [//kinlibtst.elitno.net/new.js](http://kinlibtst.elitno.net/new.js)

我现在正在使用免费托管，这可能是原因吗？也许糟​​糕的主机解析器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T22:59:00.030

这是一个小问题，你有很多这样的事情：

```
 cont_venes_sel.on('mouseout', function() {
      document.body.style.cursor = "default";
      this.transitionTo({  // <--- this is a small problem, not a big one
        opacity: 0,
        duration: 0.3
      })
      stage.draw();   //  <---- this is the big problem
    }); 
```

问题是，你为什么要重绘整个舞台？
尝试这个：

```
 cont_venes_sel.on('mouseout', function() {
      document.body.style.cursor = "default";
      this.setOpacity(0);  // <--- much less memory required, less intense
      this.getParent().draw();   //  <---- this way you only redraw the layer
    }); 
```

# python - Python：DIY将此“all_subsets”函数推广到任何大小的子集

> ID：15174827
> 
> 赞同：1
> 
> 时间：2013-03-02T13:06:39.710
> 
> 标签：python, algorithm, data-mining, nested-loops, apriori

为*小*数据关联规则矿实现一个玩具[Apriori 算法](http://en.wikipedia.org/wiki/Apriori_algorithm)，我需要一个函数来返回所有子集。

 *[子集](http://en.wikipedia.org/wiki/Subset)的长度由参数给出`i`。**我需要为任何`i`.** 1 或 2的情况`i`是微不足道的，可以看到一般模式：一个长度的元组列表，`i`其中强加了顺序以防止重复。

```
def all_subsets(di,i):
        if i == 1:
                return di
        elif i == 2:
                return [(d1,d2) for d1 in di for d2 in di if d1 < d2]
        else:
                return [ ... ] 
```

如何`i`以简洁的方式概括这种嵌套循环模式，比如使用列表推导、生成器或一些“函数式编程”概念？

我在考虑某种函数列表，但我真的不知道如何概括`i`嵌套循环。任何提示或完整答案都将被视为真棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T13:09:11.517

您可以使用[`itertools.combinations()`](http://docs.python.org/2/library/itertools.html#itertools.combinations).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T14:59:50.223

**那么你不是在做 Apriori**。

在 Apriori 中，您*永远不会*枚举大小为 k 的所有子集，除了 k=1。

在任何更大的尺寸中，您都可以根据*构建*`Apriori-Gen`组合。

这样效率更高，实际上至少与手动构建所有组合一样简单。

这是一个例子。假设以下项集被发现频繁：

```
 ABCD
 ABCF
 ABEF
 ABDF
 ACDF
 BCDF 
```

然后 apriori 将只构造*一个*候选者（通过前缀规则！）：

```
 ABC + D   - ABC + D + F
 ABC + F   / 
```

然后它会接下来检查其他子集是否也发现频繁，即

```
 BCDF
 ACDF
 ABDF 
```

由于所有这些都在上一轮中，因此该候选者幸存下来，并将在数据集的下一次*线性扫描中进行测试。*

Apriori 就是***不必*****检查所有大小为 k 的子集****，***而只检查那些有机会频繁出现的子集，给定*先前的知识*。*

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T15:00:10.497

您在评论中提到[这里](http://docs.python.org/2/library/itertools.html#itertools.combinations)的代码对您来说是不透明的。但这可能是实现`combinations`您所针对的功能的最佳方式，并且值得理解，因此我将尝试详细解释它。

基本思想是给定一个序列和许多可供选择的项目，我们可以将每个组合表示为给定序列的索引序列。例如，假设我们有一个 list `['a', 'b', 'c', 'd', 'e']`，我们想从该列表中生成两个值的所有组合。

我们的第一个组合看起来像这样......

```
['a', 'b', 'c', 'd', 'e']
  ^    ^ 
```

...并由索引列表表示`[0, 1]`。我们的下一个组合如下所示：

```
['a', 'b', 'c', 'd', 'e']
  ^         ^ 
```

并由索引列表表示`[0, 2]`。

我们继续向前移动第二个插入符号，将第一个插入符号保持在原位，直到第二个插入符号到达末尾。然后我们将第一个插入符号移回 index`1`并通过将第二个插入符号移回 index 来“重置”该过程`2`。

```
['a', 'b', 'c', 'd', 'e']
       ^    ^ 
```

然后我们重复这个过程，将第二个插入符号向前移动直到它到达末尾，然后将第一个插入符号向前移动一个并重置第二个。

现在我们必须弄清楚如何通过操纵索引列表来做到这一点。事实证明，这很简单。最终组合将如下所示：

```
['a', 'b', 'c', 'd', 'e']
                 ^    ^ 
```

并且它的索引表示将是`[3, 4]`。这些是索引的最大可能值，等于`i + n - r`，其中`i`是列表中的位置，`n`是值的数量（`5`在这种情况下），并且`r`是选择的数量（`2`在这种情况下）。因此，一旦特定索引达到此值，它就不能再高了，需要“重置”。

因此，考虑到这一点，下面是对代码的逐步分析：

```
def combinations(iterable, r):
    pool = tuple(iterable)
    n = len(pool) 
```

首先，给定基于上述示例的输入，`pool`将是我们上面转换为元组的字符列表，并且`n`只是池中的项目数。

```
if r > n:
    return 
```

我们不能在不替换的情况下`n`从项目列表中选择多个项目，因此在这种情况下我们只需返回。`n`

```
indices = range(r) 
```

现在我们有了索引，初始化为第一个组合 ( `[0, 1]`)。所以我们产生它：

```
yield tuple(pool[i] for i in indices) 
```

然后我们使用无限循环生成剩余的组合。

```
while True: 
```

在循环内部，我们首先在索引列表中向后退一步，搜索尚未达到最大值的索引。我们使用上述公式 ( `i + n - r`) 来确定给定索引的最大值。如果我们发现一个索引没有达到它的最大值，那么我们就跳出循环。

```
 for i in reversed(range(r)):
        if indices[i] != i + n - r:
            break 
```

如果我们没有找到一个，那么这意味着所有的索引都在它们的最大值，所以我们完成了迭代。（这使用了鲜为人知的`for-else`结构；仅当循环正常终止`else`时才执行该块。）`for`

```
 else:
        return 
```

所以现在我们知道索引`i`需要增加：

```
 indices[i] += 1 
```

另外，后面的索引`i`都是最大值，所以需要重新设置。

```
 for j in range(i+1, r):
        indices[j] = indices[j-1] + 1 
```

现在我们有了下一组索引，所以我们产生了另一个组合。

```
 yield tuple(pool[i] for i in indices) 
```

这种方法有几种变体；在另一种情况下，您不是在索引中倒退，而是向前迈进，增加第一个与下一个索引之间有“间隙”的索引，并重置较低的索引。

最后，您*也*可以递归地定义它，尽管从实用上讲，递归定义可能不会那么有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T14:44:06.083

好的，这是我自己推出的版本：

```
def all_subsets(source,size):
        index = len(source)
        index_sets = [()]
        for sz in xrange(size):
                next_list = []
                for s in index_sets:
                        si = s[len(s)-1] if len(s) > 0 else -1
                        next_list += [s+(i,) for i in xrange(si+1,index)]
                index_sets = next_list
        subsets = []
        for index_set in index_sets:
                rev = [source[i] for i in index_set]
                subsets.append(rev)
        return subsets 
```

产量：

```
>>> Apriori.all_subsets(['c','r','i','s'],2)
[['c', 'r'], ['c', 'i'], ['c', 's'], ['r', 'i'], ['r', 's'], ['i', 's']] 
```**

# android - OCR 无法识别相机图片的内容？

> ID：15174833
> 
> 赞同：0
> 
> 时间：2013-03-02T13:07:37.897
> 
> 标签：android, ocr

我正在尝试开发一个 OCR 应用程序，它将识别 Camera pic 的内容，但得到一个响应“这个图像太大”，我试图调整图像的大小，但仍然没有发生。我的 OCR 代码是这样的

```
public class weocr {

String response;

@SuppressWarnings("unused")
private String selectedpath;

weocr(String selectedpath) throws UnsupportedEncodingException, ParseException,     ClientProtocolException, IOException
{
   String url="http://appsv.ocrgrid.org/cgi-bin/weocr/submit_tesseract.cgi";
   response="";
   this.selectedpath=selectedpath;
   HttpClient client = new DefaultHttpClient();
   client.getParams().setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);
   HttpPost post=new HttpPost(url);
   MultipartEntity entity = new MultipartEntity( HttpMultipartMode.BROWSER_COMPATIBLE );

   //test start
   try {
       File imgFile = new  File(selectedpath);
       int h = 200; // height in pixels
       int w = 200; // width in pixels    

    Bitmap bm = BitmapFactory.decodeFile(imgFile.getAbsolutePath());
 Bitmap bm1 = Bitmap.createScaledBitmap(bm, h, w, true);     
    ByteArrayOutputStream bos = new ByteArrayOutputStream(); 
    bm.compress(CompressFormat.JPEG, 50, bos);
    byte[] data = bos.toByteArray();
    ByteArrayBody bab = new ByteArrayBody(data, "testbin.png");

  //test end
      entity.addPart( "userfile", bab);

    // For usual String parameters
    entity.addPart( "outputencoding", new StringBody("utf-8"));
    entity.addPart( "outputformat", new StringBody("txt"));
    post.setEntity( entity );
    HttpResponse response = client.execute(post);
    BufferedReader reader = new BufferedReader(new InputStreamReader(
            response.getEntity().getContent(), "UTF-8"));
    String sResponse;
    StringBuilder s = new StringBuilder();

    while ((sResponse = reader.readLine()) != null) {
        s = s.append(sResponse);
    }

    this.response=new String(s.toString());

    //System.out.println("Response: " + s);

   // Here we go!
   //String response = EntityUtils.toString( client.execute( post ).getEntity(), "UTF-8" );
   //client.getConnectionManager().shutdown();
   //System.out.println(response);
   //Toast toast=Toast.makeText(getApplicationContext(), response, Toast.LENGTH_LONG);
    //toast.show();

   }

   catch (Exception e) {
       Log.e(e.getClass().getName(), e.getMessage());
   }

 }

} 
```

# c# - 如何在 c# 应用程序中找出用户的“共享”和“安全”访问权限

> ID：15174834
> 
> 赞同：1
> 
> 时间：2013-03-02T13:07:48.183
> 
> 标签：c#, windows, permissions, directory

我已将网络文件夹的读取权限`shared`授予其他域用户。现在我想特别使用 c# 代码进行测试`Sharing access rights`。

**如何在 c# 应用程序中找出用户`sharing`和`security`访问权限？**

**.net 如何理解权限与共享或安全相关？**

![在此处输入图像描述](../Images/d976f9cb08fd3d241125599e5dd82244.png)

# javascript - jquery ajax 不工作

> ID：15174837
> 
> 赞同：-4
> 
> 时间：2013-03-02T13:08:14.310
> 
> 标签：javascript, jquery

我正在尝试使用 twitter api 获取用户信息。jquery代码如下：

```
 <script type="text/javascript">
        function GetUser() {

            $.ajax({
                type: "GET",
                url: "http://api.twitter.com/1/users/show.json?user_id=id&include_entities=true&callback=?",
                contentType: "application/json; charset=utf-8",
                dataType: "jsonp",
                cache:true,
                timeout:8000,
                success: function (json) {
                    alert("Successfull");
                },
               error: function (xhr, ajaxOptions, thrownError) {
                alert(xhr.responseText);
                alert(thrownError);
            }               
            });
    }
    </script> 
```

xhr.responseText:undefined throwedError:[object Error] 和 html 代码：

```
<input type="submit" value="Submit" onclick="GetUser();" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:13:43.393

首先你的网址不正确。代替

```
user_id=id 
```

在您的 URL 中，您必须使用 id 的实际值（在您的情况下，id 只是占位符）。例如：

```
user_id=82193320 
```

这会给你我的 twitter 用户 (uwe_guenther) 的数据。

您可以在此处轻松查找 Twitter ID：

[http://mytwitterid.com/](http://mytwitterid.com/)

如果您只想按屏幕名称查找用户数据，您可以使用：

```
screen_name=uwe_guenther 
```

反而。

您可以在此处找到 Twitter API 描述：

[https://dev.twitter.com/docs/api/1/get/users/show](https://dev.twitter.com/docs/api/1/get/users/show)

我附上了一个工作示例，用于在此处通过 user_id 查找 screen_name 和通过 screen_name 查找 user_id：

可以在此处找到带有以下示例的[jsFiddle ：http:](http://jsfiddle.net/uwe_guenther/EvJBu/) [//jsfiddle.net/uwe_guenther/EvJBu/](http://jsfiddle.net/uwe_guenther/EvJBu/)

*索引.html*

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
    <input id='userIdTextField' type='text' placeholder='user_id'/>
    <input id='userIdSubmitButton' type="submit" value="Submit"/>
    <div id='screenNameResultView'></div>
    <br>
    <input id='screenNameTextField' type='text' placeholder='screen_name'/>
    <input id='screenNameSubmitButton' type="submit" value="Submit"/>
    <div id='userIdResultView'></div>
    <br>

    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src='main.js'></script>
</body>
</html> 
```

*main.js*

```
$(document).ready(function (){

    $('#userIdSubmitButton').click(function (){
        var userId = $('#userIdTextField').val();
        $.ajax({
            type: "GET",
            url: "http://api.twitter.com/1/users/show.json?user_id=" + userId + "&include_entities=true&callback=?",
            contentType: "application/json; charset=utf-8",
            dataType: "jsonp",
            cache:true,
            timeout:1000,
            success: function (json) {
                alert("Successfull: screen_name=" + json.screen_name);
                $('#screenNameResultView').text("screen_name=" + json.screen_name);
                console.log(json);
            },
            error: function () {
                alert("No Result");
            }
        });
    });

    $('#screenNameSubmitButton').click(function (){
        var screenName = $('#screenNameTextField').val();
        $.ajax({
            type: "GET",
            url: "http://api.twitter.com/1/users/show.json?screen_name=" + screenName + "&include_entities=true&callback=?",
            contentType: "application/json; charset=utf-8",
            dataType: "jsonp",
            cache:true,
            timeout:1000,
            success: function (json) {
                alert("Successfull: user_id=" + json.id);
                $('#userIdResultView').text("user_id=" + json.id);
                console.log(json);
            },
            error: function () {
                alert("No Result");
            }
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T13:11:58.257

你的网址有误

```
 <script type="text/javascript">
            function GetUser() {

                $.ajax({
                    type: "GET",
                    url: "http://api.twitter.com/1/users/show.json?user_id=id&include_entities=true&callback=?",//this is wrong
                    contentType: "application/json; charset=utf-8",
                    dataType: "jsonp",
                    cache:true,
                    timeout:8000,
                    success: function (json) {
                        alert("Successfull");
                    },
                    error: function () {
                        alert("cant search");
                    }                 
                });
        }
        </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T13:29:05.027

这是一个工作示例[http://jsfiddle.net/kMgES/](http://jsfiddle.net/kMgES/)

```
$.ajax({
    url: 'http://api.twitter.com/1/users/lookup.json?screen_name=noradio&callback=?',
    type: 'GET',
    dataType: 'json',
    timeout: 8000,
    success: function (data) {
        alert(data[0].name);
    },
    error: function () {
        alert("cant search");
    }    
}); 
```

在此示例中，搜索是按屏幕名称完成的。查看[https://dev.twitter.com/docs/api/1/get/users/show](https://dev.twitter.com/docs/api/1/get/users/show)以了解所有可能的选项。

考虑将其用于错误处理

```
error: function(XMLHttpRequest, textStatus, errorThrown){
           // error handling  
        } 
```

# git - git push到远程不接受

> ID：15174844
> 
> 赞同：2
> 
> 时间：2013-03-02T13:08:52.190
> 
> 标签：git

我的遥控器配置为不接受非快进提交。

远程版本与我的本地版本完全不同。我想覆盖它。我不想合并或变基任何东西。此外，我的本地存储库从一个干净的 git init 开始，而不是从服务器中提取。

我做到了`git push origin master --f`，但我得到了

```
remote: error: denying non-fast-forward refs/heads/master (you should pull first) 
```

我不想拉，因为它会与我的版本合并，我不想要。

要遵循的正确程序是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T13:10:17.333

它要么是要么`git push -f origin master`但`git push --force origin master`不会`git push --f`工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T13:11:42.653

由于您正在与要从中推送的同一仓库中工作，因此您需要先拉取。

您可以尝试存储您的更改：

```
git stash 
```

当我开始使用 git 时，我多次遇到此错误。我的解决方案是在不同的目录中工作，然后我从中提取，确保它永远不会冲突

# c# - 检查空属性

> ID：15174850
> 
> 赞同：1
> 
> 时间：2013-03-02T13:09:42.587
> 
> 标签：c#

我想检查本身是子对象的数组上的属性是否不为空。

所以我有

```
if (Parent.Child != null && Parent.Child[0] != null && Parent.Child[0].name != null)
var myName = Parent.Child[0].name 
```

这似乎是一种非常冗长的方式来获取 child[0].name 同时避免空引用异常。我也得到索引超出范围的错误。有没有更好的办法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T13:14:22.830

如果您遇到`IndexOutOfRangeException`错误，则表明它`Parent.Child`可能是空的。所以你真的想要：

```
if (Parent.Child != null && Parent.Child.Count > 0 && Parent.Child[0] != null &&
    Parent.Child[0].name != null)
{
    ...
} 
```

没有什么可以大大简化这一点*，*尽管您可以编写一个版本的 LINQ`FirstOrDefault`方法，它甚至可以处理源为空的情况：

```
public static T NullSafeFirstOrDefault(this IEnumerable<T> source)
{
    return source == null ? default(T) : source.FirstOrDefault();
} 
```

然后：

```
var firstChild = Parent.Child.NullSafeFirstOrDefault();
if (firstChild != null && firstChild.name != null)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T13:15:04.380

除了缺少对空数组的测试之外，您的代码看起来还不错，并且是正确的防御性编程。您应该将其提取到一种方法中，以使其意图更清晰，并使您的代码更清晰：

```
if (Parent.HasChild())
{
    var myName = Parent.Child[0].name;
}

public bool HasChild()
{
    return this.Child != null && this.Child.Count > 0 &&
           this.Child[0] != null && this.Child[0].name != null;
} 
```

唯一的另一种方法是将代码包装在 try/catch 块中：

```
try
{
    var myName = Parent.Child[0].name;
    ...
}
catch
{
} 
```

但是，这是不好的编程习惯，因为：

1.  您正在使用异常来控制程序流程。
2.  您正在隐藏其他潜在的严重错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T13:13:49.950

尝试

```
 var Names = new List<string>();

 if(Parent.Child != null && Parent.Child.Count() > 0){

 foreach(var item in Parent.Child) Names.Add(item.name)

 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T13:14:21.940

```
var ParentChild= Parent.Child[0] ;
if (Parent.Child != null && ParentChild != null &&ParentChild.name != null)
var myName = ParentChild.name 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-03-02T13:12:18.633

也许简单的 try/catch 会有所帮助？

```
var myName;
try
{
    myName = Parent.Child[0].name;
}
catch (NullReferenceException)  
{ myName = null; } 
```

# r - 正确地将 for 循环与 R 并行化

> ID：15174852
> 
> 赞同：0
> 
> 时间：2013-03-02T13:10:02.727
> 
> 标签：r, loops, foreach, parallel-processing

我一直在为我的主管研究一个简单的函数集合，这些函数将执行一些简单的初始基因组规模统计，这很容易让我的团队快速了解可能需要更多时间的未来分析——例如 RDP4 或BioC（只是为了解释为什么我没有直接去 BioConductor）。我想加快一些速度以允许更大的 contig 大小，所以我决定使用 doParallel 和 foreach 来编辑一些 for 循环以允许这样做。下面是一个简单的函数，它识别某些序列（存储为矩阵）中相同的碱基并将它们删除。

```
strip.invar <- function(x) {
  cat("
          Now removing invariant sites from DNA data matrix, this may take some time...
      ")
  prog <- txtProgressBar(min=0, max=ncol(x), style=3)
  removals<-c()
  for(i in 1:ncol(x)){
    setTxtProgressBar(prog, i)
    if(length(unique(x[,i])) == 1) { 
      removals <- append(removals, i)
    }
  }
  newDnaMatrix <- x[,-removals]
  return(newDnaMatrix)
} 
```

在阅读了 doParallel 和 foreach 的介绍之后，我尝试制作一个版本以容纳更多内核 - 在我的 Mac 上，这是 8 个 - 每个内核有两个线程的四核 - 8 个虚拟内核：

```
strip.invar <- function(x, coresnum=detectCores()){
  cat("
          Now removing invariant sites from DNA data matrix, this may take some time...
          ")
  prog <- txtProgressBar(min=0, max=ncol(x), style=3)
  removals<-c()
  if(coresnum > 1) {
    cl <- makeCluster(coresnum)
    registerDoParallel(cl)
    foreach(i=1:ncol(x)) %dopar% {
      setTxtProgressBar(prog, i)
      if(all(x[,i] == x[[1,i]])){
        removals <- append(removals, i)
      }
    }
  } else {
    for(i in 1:ncol(x)){
      setTxtProgressBar(prog, i)
      if(length(unique(x[,i])) == 1) { 
        removals <- append(removals, i)
      }
    }
  }
  newDnaMatrix <- x[,-removals]
  return(newDnaMatrix)
} 
```

但是，如果我运行它并将核心数设置为 8，我不完全确定它是否有效 - 我看不到进度条做任何事情，但我听说打印到屏幕和涉及图形设备的东西很棘手在 R 中使用并行计算。但它似乎仍然需要一些时间，而且我的笔记本电脑变得“非常”热，所以我不确定我是否正确地做到了这一点，我在看到几个例子后尝试过（我成功运行了小插图中很好的引导示例），但我一定会遇到学习障碍。顺便说一句，我想我也会问人们的意见，对于涉及循环或应用的 R 代码瓶颈的最佳加速是什么 - 并行化它，还是 Rcpp？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:32:20.563

首先，尝试运行`cl <- makeCluster( coresnum-1 )`. 主 R 进程已经在使用您的一个核心，并用于分派和接收从属作业的结果，因此您有 7 个空闲核心用于从属作业。我**认为**您将有效地排队您的 foreach 循环之一，以等待之前的循环之一完成，因此这项工作将需要更长的时间才能完成。

其次，您通常会在非并行环境中运行此功能的控制台上看到的内容仍会打印到控制台，只是每个作业输出都会打印到从属进程控制台，因此您不会看到它。但是，您可以将不同 foreach 循环的输出保存到文本文件中以检查它们。这是如何保存控制台输出[的示例。](https://stackoverflow.com/a/7097127/1478381)将代码粘贴在您的`foreach`语句中。

您的笔记本电脑会变得非常热，因为在您运行此作业时，您的所有内核都以 100% 的容量工作。

我发现该`foreach`包提供了一组出色的功能来提供简单的并行处理。`Rcpp`可能（会？！）给您带来更好的性能，但是您在编写 C++ 代码方面的表现如何？这个函数的运行时间是多少？它的使用频率如何？我总是首先考虑这些事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T15:10:50.023

我的另一个答案不正确，因为 colmean 等于第一个值不足以作为唯一值数量的测试。所以这是另一个答案：

您可以使用 优化循环`apply`。

```
set.seed(42)
dat <- matrix(sample(1:5,1e5,replace=TRUE),nrow=2)
res1 <- strip.invar(dat)

strip.invar2 <- function(dat) {
  ix <- apply(dat,2,function(x) length(unique(x))>1)
  dat[,ix]}

res2 <- strip.invar2(dat)

all.equal(res1,res2)
#TRUE
library(microbenchmark)
microbenchmark(strip.invar(dat),strip.invar2(dat),times=10)
#Unit: milliseconds
#             expr       min        lq    median       uq      max neval
#strip.invar(dat)  2514.7995 2529.2827 2547.6751 2678.464 2792.405    10
#strip.invar2(dat)  933.3701  945.5689  974.7564 1008.589 1018.400    10 
```

这大大提高了性能，尽管如果矢量化是可能的，那么你可以达到的效果并不多。

并行化在这里不会提供更好的性能，因为每次迭代本身不需要太多性能，因此并行化开销实际上会增加所需的时间。但是，您可以并行拆分数据和处理块。

# twitter-bootstrap - 如何让导航将 att 预定义大小折叠成移动设备的小图标？

> ID：15174853
> 
> 赞同：-2
> 
> 时间：2013-03-02T13:10:08.983
> 
> 标签：twitter-bootstrap

基于[如何让导航折叠成移动设备的小图标？](https://stackoverflow.com/questions/9150423/how-do-i-get-the-navigation-to-collapse-into-the-small-icon-for-mobile-devices) 我想让导航折叠，但不是以 970 像素大小，而是以预定义的大小 - 比如说 300 像素。是否可以在引导程序中进行，还是我必须自己进行调整？

我当前的代码：

```
<div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <button type="button" class="btn btn-navbar" data-toggle="collapse"
                    data-target=".nav-collapse">
                    <span class="icon-bar"></span> <span class="icon-bar"></span> <span
                        class="icon-bar"></span>
                </button>
                <a class="brand" href="/">name</a>
                <div class="nav-collapse collapse">
                    <ul class="nav">
                        <li><a href="#about">About</a></li>
                        <li><a href="#price">Price</a></li>
                    </ul>
                </div>
                <!--/.nav-collapse -->
            </div>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:24:29.337

您可以在[http://twitter.github.com/bootstrap/customize.html上自定义引导程序，然后从](http://twitter.github.com/bootstrap/customize.html)**响应**部分取消选择您不需要的响应功能。

如果有必要，可以编写媒体查询来安排内容。此外，您可以将 min-width 设置为元素以阻止其调整大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T13:15:46.960

调整 CSS 中的媒体查询。找到强制折叠的媒体查询，将其剪切并创建您自己的 300 像素查询。喜欢：

```
@media (max-width: 300px) {
.nav-collapse {
-webkit-transform: translate3d(0, 0, 0);
} 
```

# javascript - 从文本字段中动态收集文本

> ID：15174854
> 
> 赞同：0
> 
> 时间：2013-03-02T13:10:15.633
> 
> 标签：javascript, jquery

这是html代码

```
<div id="domTxtEntry">
    <strong>Your Name:</strong>
    <input type="text" name="txtdisplay" id="txtdisplay" value="" class="input" />
    <br />
    <br />

    <div id="domPrv"></div>
</div> 
```

这个jQuery代码

```
$(document).ready(function () {
    var nameNode = $('#domPrv'),
        name = $('#txtdisplay');
    //comment...easy
    $('#domTxtEntry input').bind('blur keyup', function () {
        //name
        if ($('#txtdisplay').val()) {
            nameNode.text(name.val() + ' modifies this');
        }
    });
}); 
```

这是在这个小提琴中。 [http://jsfiddle.net/qSq37/1/](http://jsfiddle.net/qSq37/1/)

两个问题

1.  从文本字段中删除值时，输出窗口不会更新它或留在最后一个单词。
2.  我尝试了很多方法来将输出添加到文本字段的右侧，但它显示在文本字段的底部。

需要帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T13:15:55.180

第一个问题是当输入为空时，调用`.val()`返回false，所以in的值`#txtdisplay`没有更新。尝试这个：

```
$('#domTxtEntry input').bind('blur keyup', function () {
  if ($('#txtdisplay').val()) {
    nameNode.text(name.val() + ' modifies this');
  } else {
    nameNode.text("Default value");
  }
}); 
```

您可以像这样解决第二个问题（删除`<br />`标签）：

```
<div id="domTxtEntry">
    <strong>Your Name:</strong>
        <input type="text" name="txtdisplay" id="txtdisplay" value="" class="input" />

    <div id="domPrv">Default value</div>
</div> 
```

在 CSS 中：

```
#domPrv {
  display: inline-block;
} 
```

# performance - EC2 上的 Hadoop：增加从属设备数量时没有性能提升

> ID：15174856
> 
> 赞同：1
> 
> 时间：2013-03-02T13:10:29.833
> 
> 标签：performance, hadoop, amazon-ec2

我正在 Amazon EC2 m1.small 实例上测试 MapReduce wordcount 示例，我遵循了 Amazon 命令行入门指南。

**bin/ec2hadoop 启动集群测试 2**

使用这个命令我有 2 个从节点。（总共运行了 3 个实例）然后我可以登录到主节点运行 hadoop 程序（这是一个捆绑到 jar 文件中的程序）花了 35 分钟。

对于可扩展性实验，然后我使用 4 个实例运行相同的程序

**bin/ec2hadoop 启动集群测试 4**

令我惊讶的是，我没有看到任何性能提升。MapReduce 应用程序花费了几乎相同的时间（33 分钟）

问题出在哪里？这是可以接受的行为吗？

```
In mapred-site.xml
mapred.tasktracker.map.tasks.maximum is set to 1
mapred.tasktracker.reduce.tasks.maximum is set to 1 
```

欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T17:38:52.883

首先，如果配置得当，并且随着集群的增长，reducer 的数量也在增加，Hadoop 应该显示出线性可扩展性
，我认为你得到结果的根本原因是单个 reducer。当所有映射器的结果都传递给单个减速器时，它会限制集群大小的任何性能提升。如果您将减速器的数量设置为 4（按集群中的节点数），您应该会看到增益。
另外 - 我对小型实例上的 hadoop 高效操作有些怀疑。内存接近极限，交换可以启动和终止任何性能。此外 - 这样的实例将获得 1GB 以太网的一小部分，它也可能是限制因素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:06:58.177

根据您的配置，每个节点最多分别有 1 个 map 和 1 个 reduce 任务。根据您正在运行的作业类型，将这些参数设置为节点上的核心数可能会很有用。尤其是当 map/reduce 任务的计算量很大时。

如果正如您在评论中所说，reduce 阶段主导了工作的整体性能，您应该关注这部分。在 Hadoop 中，可以在作业的配置中指定作业的 reduce 任务数量，因为它直接影响生成的输出文件的数量。

拥有一个 reduce 任务将为您提供一个输出文件。拥有 N 个 reduce 任务将导致 N 个输出文件。每个文件都包含按键排序的数据。此外，reduce 任务确保从映射任务中获取给定键的所有数据。

简而言之：增加reduce任务的数量会提高工作的整体性能，但会产生多个输出文件。根据您的需要，这些文件必须在第二个 map reduce 作业（或在 Hadoop 外部）中按键合并和排序，以确保您获得相同的单个输出文件，就像使用单个 reduce 任务一样。

# php - Composer > 通过 composer.json 文件将类添加到类映射？

> ID：15174859
> 
> 赞同：1
> 
> 时间：2013-03-02T13:10:39.240
> 
> 标签：php, composer-php

在 PHP 项目中使用 Composer，带有 Twig 和我自己的框架。

我想用我自己的类“覆盖”来自 Twig 的 Twig_Node_Expression_GetAttr 类。

一切正常，但我必须手动添加 composer autoload_classmap.php 文件：

```
'Twig_Node_Expression_GetAttr' => 'ebuildy/ebuildy/src/eBuildy/Templating/Twig_Node_Expression_GetAttr.php', 
```

如何在我的 composer.json 描述文件中声明它？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:43:53.687

您可以在项目的 composer.json 中定义类映射条目，也可以使用 PSR-0 映射。有关详细信息，请参阅有关自动加载的作曲家[文档](http://getcomposer.org/doc/04-schema.md#autoload)。如果你用比 Twig 更严格的命名空间定义 PSR-0 命名空间，那么你确定你的命名空间会接管，例如：

```
{
    "autoload": {
        "psr-0": {
            "Twig_Node_": "path/to/src/"
        }
    }
} 
```

但是，这仅在此 src/ 目录中您有一个名为的文件时才有效：`src/Twig/Node/Expression/GetAttr.php`.

# java - 如何更改 JTextPane 中每个单词的颜色？

> ID：15174861
> 
> 赞同：0
> 
> 时间：2013-03-02T13:11:07.510
> 
> 标签：java, jtextpane

每次键入密钥时，我都会得到 jpane 的字符，使用空格分割它们，并用其他（随机）颜色为每个单词着色。这段代码完成了这项工作：

```
private class KeyHandler extends KeyAdapter {

        @Override
        public void keyPressed(KeyEvent ev) {
            String[] codeWords = codePane.getText().split("\\s");
            StyledDocument doc = codePane.getStyledDocument();
            SimpleAttributeSet set = new SimpleAttributeSet();
            int lastIndex = 0;
            for (int a = 0; a < codeWords.length; a++) {
                Random random = new Random();
                StyleConstants.setForeground(set, new Color(random.nextInt(256), random.nextInt(256), random.nextInt(256)));
                doc.setCharacterAttributes(lastIndex, codeWords[a].length(), set, true);
                lastIndex += codeWords[a].length();
            }
        }
    } 
```

问题是它改变了 jpane 文本的每个字符，而不是每个 WORD。如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:28:24.713

您可以在 JTextPane 中使用 HTML。阅读它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:53:38.207

您忘记了单词之间的空格：

```
//lastIndex += codeWords[a].length();
lastIndex += codeWords[a].length() +1; 
```

当然，这假设只有一个空格。

# javascript - r.js 优化器只是将 javascript 文件复制到构建目录

> ID：15174863
> 
> 赞同：1
> 
> 时间：2013-03-02T13:11:23.540
> 
> 标签：javascript, requirejs, minify, r.js

我正在尝试使用 r.js 来缩小和丑化整个项目。但是当我运行命令 r.js -o app.build.js 它只是优化 CSS 文件并将所有 javascript 文件复制到构建目录。Javascript 文件不会被缩小或丑化。这是我的 app.build.js 文件

```
({
appDir: "../",
baseUrl: "js",
dir: "../../release",
paths: {
    "dojo": "empty: ",
    "esri": "empty: ",
    "text": "empty:"
},
optimize: "uglify",
removeCombined: true,
inlineText: true,
modules: [{
    name: "app"
}],
optimizeCss: "standard",
}) 
```

项目结构

```
MyApp
 src
   js
     assets
     core_library
     helpers
     libs
     nls
     theme
     widgets
     app.build.js
     app.js
     main.js
  index.html 
```

我正在寻找一些方向来解决这个问题。

任何帮助是极大的赞赏。

# php - 子类覆盖父静态属性

> ID：15174870
> 
> 赞同：3
> 
> 时间：2013-03-02T13:12:04.780
> 
> 标签：php, static

如果我错了，请告诉我，但我很确定这是 PHP 中的一个错误。

```
<?php

class One {

    public static $var = 'hi';
}

class Two extends One {

    public static function set($var) {
        static::$var = $var;
    }
}

Two::set('bye');

var_dump(One::$var);
// bye 
```

该脚本输出“再见”，当我很确定它应该输出“嗨”时。你怎么看？

我**不想**在子类中重新声明它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:18:21.057

*OP编辑的问题，这是他提到他不想重新声明属性之前的答案*

这是因为`Two`与`$var`.`One`

如果你会这样写，那么你会得到想要的输出

```
class One {

    public static $var = 'hi';
}

class Two extends One {

    public static $var = 'hi';

    public static function set($var) {
        static::$var = $var;
    }
}

Two::set('bye');

// you get hi
var_dump(One::$var);
// you get bye
var_dump(Two::$var); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:27:28.467

我认为这是不可能的，但如果你不想在构造函数中重新声明简单的定义它..

```
class One {

    public static $var = 'hi';
}

class Two extends One {

    public static $var;

    public function __construct(){
        self::$var = parent::$var;
    }

    public static function set($var) {
        self::$var = $var;
    }
}

Two::set('bye');

var_dump(One::$var);
var_dump(Two::$var); 
```

# c++ - winsock recv() 重复/丢失数据

> ID：15174875
> 
> 赞同：1
> 
> 时间：2013-03-02T13:12:30.283
> 
> 标签：c++, sockets, winsock, recv

我正在编写一个简单的服务器/客户端程序来将文件从客户端发送到服务器。我正在使用winsock2。我将每次发送数据的容量限制为 5000。

**客户端（发送）：**

```
int iResult = 0;
int totalBytesSent = 0;

while (length > 0){
    iResult = send( _connectSocket, data, MAX_TRANSIT_SIZE, 0 ); // MAX_TRANSIT_SIZE is 5000
    if (iResult == SOCKET_ERROR) {
        printf("send failed with error: %d\n", WSAGetLastError());
        return closeSocket();
    }
    totalBytesSent += iResult;
    length -= iResult;
    //cout << "Data sent (" << iResult << " Bytes)" << endl;
}
cout << "Total Bytes Sent: (" << totalBytesSent << ")" << endl;

return 0; 
```

**在服务器端（recv）：**

```
 // Receive and send data
char recvbuf[MAX_DATA_SIZE];

int iResult = 0;
int totalBytesRead = 0;

// Receive until the peer shuts down the connection

do {
    totalBytesRead += iResult;
    iResult = recv(_clientSocket, recvbuf, MAX_DATA_SIZE, 0);

    if (iResult > 0) {
        //printf("RECEIVED DATA\n");
        //printf("Bytes received: %d\n", iResult);

    } else if (iResult == 0)
        printf("Connection closing...\n");
    else {
        printf("recv failed: %d\n", WSAGetLastError());
        closesocket(_clientSocket);
        WSACleanup();
        return 1;
    }

} while (iResult > 0);

cout << "Total Bytes Received: (" << totalBytesRead << ")" << endl; 
```

**问题：**

运行客户端和服务器并发送文件后，它确实显示发送/接收的正确数据大小（当然是以字节为单位的文件大小），但是输出文件不同，当我用一些文本编辑器（记事本++ ) 我可以清楚地看到输出文件包含较少的数据（但 File->Properties 显示相同的文件大小）并且一些数据是重复的。

**我的问题：**

revc() 是如何工作的？如果它在许多调用中接收数据，它会在缓冲区中累积数据吗？（在我的情况下：recvbuf）还是重写缓冲区？据我所知，它确实会累积，所以我的代码是正确的？？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T13:20:05.867

我看不到您在 recvbuf 中的写入位置。每次调用 recv 时，它都会覆盖 recvbuf 中已有的内容。因此，如果您有注释掉的“接收数据”打印，您应该复制要保留在缓冲区之外的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T13:27:49.740

您的代码中有几个问题。

**客户端：**

```
send( _connectSocket, data, MAX_TRANSIT_SIZE, 0 ); 
```

*   在这里，您永远不会更新`data`已发送的字节数，因此每次调用`send`它时都会一次又一次地发送相同的数据（缓冲区的第一个`MAX_TRANSIT_SIZE`字节）。`data`一个快速修复，假设`data`是指向任何字节类型（uint8_t，char，...）的指针将是：

    `send( _connectSocket, data + totalBytesSent, MAX_TRANSIT_SIZE, 0 );`

*   您还应该限制您发送的数据大小，因为除非`length`最初是倍数，否则`MAX_TRANSIT_SIZE`当您到达数据末尾时会出现缓冲区溢出：

    `send( _connectSocket, data + totalBytesSent, std::min(length, MAX_TRANSIT_SIZE), 0 );`

* * *

**服务器端：**

```
recv(_clientSocket, recvbuf, MAX_DATA_SIZE, 0); 
```

*   就像`send`,`recv`没有“我在那个缓冲区中已经收到了什么”的概念。因此，每次调用`recv`它时，只需将它接收到的新数据放在缓冲区的开头，覆盖旧数据。这可能是也可能不是您想要的，这很难说，因为您没有向我们展示您如何使用该缓冲区。您可能希望使用与我刚刚为您的发送缓冲区解释的方法相同的方法来管理您的接收缓冲区。

# android - Android 应用内结算退款程序如何运作？

> ID：15174876
> 
> 赞同：-1
> 
> 时间：2013-03-02T13:12:41.410
> 
> 标签：android, google-checkout

根据我在开发者页面上阅读的内容，Android In-app Billing 不支持退款程序。您必须使用 Google Checkout 帐户才能退款。

我遵循以下步骤：

1.  我在开发者控制台中创建了一个产品，价格为 0.50 欧元。
2.  我使用测试账户购买商品 2.1 我测试我的逻辑
3.  我使用 Google Checkout 退款

我的问题是：这样做是否涉及任何成本？或者，最终我的开发者账户和我的测试账户都会有初始金额？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:34:41.530

这由谷歌管理得很好，您的客户帐户和您的开发者帐户都将有初始金额是的。

[在这里](http://support.google.com/googleplay/android-developer/answer/138001?hl=en)查看官方文档。

它在“要记住的事情”注释中最后说；）

# css - CSS html 100 % 宽度高度布局

> ID：15174879
> 
> 赞同：0
> 
> 时间：2013-03-02T13:13:26.523
> 
> 标签：css, html

我正在尝试构建一个消耗浏览器中所有可见空间的布局。我`html, body height 100%`按照不同 SO 帖子中的建议进行设置。以下是我正在尝试的标记

```
<div>
  <div class="header">
  </div>
  <div class="main">
    <div class="container">
        <div class="content"></div>
    </div>
  </div>
</div> 
```

CSS：

```
html, body {
  height: 100%;
  max-height: 100%;
}
.header {
  height: 30px;
  background-color: #000;
}
.main {
  height: auto;
  padding-right: 0px;
  max-height: 100%;
  width: 100%;
  display: block;
  clear: both;
  background-color: #eee;
}

.container {
  width: 90%;
  overflow-y: scroll; 
  background-color: #ccc;
}
.content {    
  height: 2000px;
  width: 80%;
  background-color: #fff;
} 
```

内容 div 的高度会导致整个主体变大，因此会显示浏览器的默认滚动条。尽管我已将容器 div 设置为滚动以显示内容 div 的内容，但容器 div 的滚动条仍然不显示。我怎样才能解决这个问题。

这是[jsfiddle](http://jsfiddle.net/ZedBee/eXn8L/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T13:38:57.867

**编辑：**

默认情况下`height`div 元素的 取决于它的内容（不像`width`它占用父元素的 100% 宽度）。这就是为什么当您将内部元素的高度指定为百分比时，如果您的父标签没有明确定义的高度（这意味着必须将高度定义到 DOM 的最顶部，因为高度不可继承），那么它将不准确.

在您的情况下，您需要向 您的,和包装器添加`height: 100%;`或任何其他高度`.container``.main``div`

[修改过的小提琴](http://jsfiddle.net/LKceP/)

# c# - 如何在 C# 中动态加载父程序集中的引用

> ID：15174884
> 
> 赞同：3
> 
> 时间：2013-03-02T13:13:54.887
> 
> 标签：c#, .net-4.0

如何在 C# 中获取父程序集中的引用列表。我正在考虑加载到另一个程序中的 DLL，驱动程序需要在反射和序列化中使用一些父程序集引用。到目前为止，我还没有尝试过任何事情，因为我不确定从哪里开始。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T15:00:25.577

这是非常经典的反射问题，当您需要加载程序集并且程序集包含引用时，这些引用未引用到调用程序集。

基本上，您应该在单独的应用程序域中加载程序集。

例如，您有一个项目 ProxyDomain，其类 ProxyType：

```
public class ProxyType : MarshalByRefObject
{
    public void DoSomeStuff(string assemblyPath)
    {
        var someStuffAssembly = Assembly.LoadFrom(assemblyPath);

        //Do whatever you need with the loaded assembly, e.g.:
        var someStuffType = assembly.GetExportedTypes()
            .First(t => t.Name == "SomeStuffType");
        var someStuffObject = Activator.CreateInstance(someStuffType);

        someStuffType.GetMethod("SomeStuffMethod").Invoke(someStuffObject, null);
    }
} 
```

在包含对 ProxyDomain 的引用的调用项目中，您需要加载程序集、执行 DoSomeStuff 并卸载程序集资源：

```
public class SomeStuffCaller
{
    public void CallDoSomeStuff(string assemblyPath)
    {
        AppDomainSetup setup = AppDomain.CurrentDomain.SetupInformation;
        //Path to the directory, containing the assembly
        setup.ApplicationBase = "...";
        //List of directories where your private references are located
        setup.PrivateBinPath = "...";
        setup.ShadowCopyFiles = "true";

        var reflectionDomain = AppDomain.CreateDomain("ProxyDomain", null, setup);

        //You should specify the ProxyDomain assembly full name
        //You can also utilize CreateInstanceFromAndUnwrap here:
        var proxyType = (ProxyType)reflectionDomain.CreateInstanceAndUnwrap(
            "ProxyDomain", 
            "ProxyType");

        proxyType.DoSomeStuff(assemblyPath);

        AppDomain.Unload(reflectionDomain);
    }
} 
```

# regex - 从 varnish 中获取 url 值

> ID：15174886
> 
> 赞同：1
> 
> 时间：2013-03-02T13:14:10.687
> 
> 标签：regex, url, rest, varnish, legacy

我想从清漆中的 url 中去除值，因此我可以根据 url 采取不同的操作，例如：

网址：/product/123/price/available。

我想将其转换为 /products?id=123&sort=price&available=true

我还希望能够（如果可能的话）在请求标头上设置值，因此我可以执行以下操作，而不是传递 URL 上的所有参数：

/products?id=123&sort=price

*   带有标题：**x-show-available-only: true**

我很欣赏第二个例子看起来有点奇怪，但这样我们可以将新参数传回我们的旧应用程序，并确保没有新参数干扰当前参数 - 我们只需通过标题读取新参数，直到我们迁移所有我们的新平台的功能。

我确定这是正则表达式的事情，但不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T20:54:34.747

这未经测试，但应该足够接近，您可以对其进行调整以使其正确。

根据您的网址：

```
/product/123/price/available 
```

您需要指定两个后端（更改您自己的 IP）：

```
backend old_app {
    .host = "127.0.0.1";
    .port = "80";
}

backend new_app {
    .host = "127.0.0.2";
    .port = "80";
} 
```

以及您的 vcl_recv 中的代码：

```
if (req.url ~ "^/product/") {
    set req.url = regsub(req.url, "/product/([0-9]/)/([a-zA-Z])", "/products?id=\1&sort=\2");
    set req.backend = old_app;
} else {
    set req.backend = new_app.
}

if (req.url ~ "/available") {
    set req.http.x-show-available-only = "true";
} 
```

您可以添加更多正则表达式规则作为 if/else 块。

祝你好运！

# php - 如何通过 Post-HTTP（服务器端 PHP）获取图像

> ID：15174896
> 
> 赞同：0
> 
> 时间：2013-03-02T13:15:05.917
> 
> 标签：php, android, http, post, server-side

我正在开发一个 android 应用程序，我想通过 HTTP-Post 将捕获的图像从 android 设备发送到 PHP 服务器，该服务器会将图像发送到电子邮件。

这是我的客户端代码（在应用程序中）：

```
public class MainActivity extends Activity {

protected static final int TAKE_PHOTO_CODE = 0;
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button capture = (Button) findViewById(R.id.capture_button);
    capture.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {

            // We use the stock camera app to take a photo
            Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            intent.putExtra(MediaStore.EXTRA_OUTPUT, getImageUri());
            startActivityForResult(intent, TAKE_PHOTO_CODE);
        }
    });
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == TAKE_PHOTO_CODE && resultCode == RESULT_OK) {
        Uri imagePath = getImageUri();

       // doSomething();
    }
}

/**
 * Get the uri of the captured file
 * @return A Uri which path is the path of an image file, stored on the dcim folder
 */
private Uri getImageUri() {
    // Store image in dcim
    File file = new File(Environment.getExternalStorageDirectory() + "/DCIM", "Photo");
    Uri imgUri = Uri.fromFile(file);
         PostData();
    return imgUri;
}

public void PostData(){

    String url = "http://doda.hostei.com";
    File file2 = new File(Environment.getExternalStorageDirectory()+"/DCIM",
            "Photo");
    try {
        HttpClient httpclient = new DefaultHttpClient();

        HttpPost httppost = new HttpPost(url);

        InputStreamEntity reqEntity = new InputStreamEntity(
                new FileInputStream(file2), -1);
        reqEntity.setContentType("binary/octet-stream");
        reqEntity.setChunked(true); // Send in multiple parts if needed
        httppost.setEntity(reqEntity);
        HttpResponse response = httpclient.execute(httppost);
        //Do something with response...

    } catch (Exception e) {
        // show error
    }

}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

 } 
```

PHP-server 代码应该是什么样子的？

谢谢，

波阿斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:51:34.280

> 我们可以通过以下方式获取服务器中的图像：

```
$imageStoreFolder = DESTINATION_OF_IMAGE_UPLOAD_FOLDER // change this where image is uploaded
if(isset($_FILES) && count($_FILES)){
    foreach($_FILES as $file){
        $source = $file['tmp_name'];
        $destination = $imageStoreFolder.$file['name'];
        move_uploaded_file($source, $destination);
    }
} 
```

# java - Vaadin 中的着色表

> ID：15174901
> 
> 赞同：1
> 
> 时间：2013-03-02T13:15:50.900
> 
> 标签：java, css, vaadin

我在我的 Vaadin 应用程序中的某个布局上附加了 3 个表格组件。我想为我的 3 张桌子设置不同的背景颜色。我的意思是说table1有蓝色，table2有黄色，table3有红色。我怎样才能在 vaadin 中实现这样的目标。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T13:50:03.210

我通过以下方式完成了它：

将以下 CSS 添加到您的 styles.css 文件中

```
.classname .v-table-body{
yourstyle goes here
} 
```

设置表格的样式如下：

table1.setStyleName("类名");

它将仅应用 table1 的样式

# php - 如何将多个字符串转换为一个数组的值？

> ID：15174903
> 
> 赞同：0
> 
> 时间：2013-03-02T13:15:54.340
> 
> 标签：php, arrays, string

我有多个带有名称的字符串：

```
$string[0], $string[1], ..., $string[$i] 
```

我想将它们转换为一个数组，例如：

```
array($string[0], $string[1], ..., $string[$i]) 
```

例如，如果有 4 个字符串，则数组为：

```
array($string[0], $string[1], $string[2], $string[3]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:34:11.010

> 数组($string[0], $string[1], $string[2], $string[3])

这样做完全是什么都不做。$sting 本身就是一个数组，其值为 $string[0], $string[1],.....$string[$i]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:12:42.547

说如果你的输入是：

```
 $input = "test1, test2, test3, test4"; 
```

你可以这样做，

```
 $to_array = implode(",", $input); 
```

[http://php.net/manual/en/function.implode.php](http://php.net/manual/en/function.implode.php)

这是你要找的吗？

# javascript - 处理相对图像路径ajax

> ID：15174905
> 
> 赞同：2
> 
> 时间：2013-03-02T13:15:54.910
> 
> 标签：javascript, jquery, google-chrome-extension

我正在开发一个小的谷歌浏览器扩展，它可以抓取某个网站。问题是，因为该网站使用相对路径，所以链接会断开，并且我会遇到很多这样的错误：

```
GET chrome-extension://higopdenpioddpmobbehnbcadeenihic/html/images/ico_aAO.gif
GET chrome-extension://higopdenpioddpmobbehnbcadeenihic/html/images/ico_dAO.gif 
```

有什么办法可以避免这些错误？

我用于进行 GET 调用的代码是：

```
 $.ajax({
        url: searchUrl,
        type: "GET",
        data: {
            'pal': query
        },
        success: function() {
        },
        error: function() {
        }
    }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T20:19:26.143

解决方案是不使用 jQuery 来解析文档。您可以根据需要使用`jQuery.ajax`，但不要`$`用于解析结果。

阅读[控制台显示有关内容安全策略的错误和许多失败的 GET 请求](https://stackoverflow.com/a/12100954/938089?console-shows-error-about-content-security-policy-and-lots-of-failed-get-request)的答案，以了解和解决您的问题。

答案强烈建议使用 vanilla JavaScript。如果您仍然想使用 jQuery，请使用以下 DOM 解析方法：

```
// responseText is a string, for example from calling jQuery.ajax
var doc = document.implementation.createHTMLDocument('');
doc.documentElement.innerHTML = responseText;
var $doc = $(doc);
// Enjoy the parsed document without errors! 
```

# android - Android : 按下按钮时更改图片连续

> ID：15174909
> 
> 赞同：1
> 
> 时间：2013-03-02T13:16:03.280
> 
> 标签：android

我想在 android 4.2 上按下按钮时连续更改图片此代码仅更改一次

代码：

```
public void addListenerOnButton() {

    b1 = (Button) findViewById(R.id.b1);

    i = (ImageView) findViewById(R.id.iv);

    b1.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

        while (event.getAction() == MotionEvent.ACTION_DOWN){
                 ii++;
                    if (ii%2==1) i.setImageResource(R.drawable.pic1); else i.setImageResource(R.drawable.pic2);

                    return true;

        }

                return false;

        }

    });

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T14:01:54.460

检查下面的代码。它应该产生你想要的结果

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final Button button = (Button) findViewById(R.id.button);
    final ImageView image = (ImageView) findViewById(R.id.image);
    final AnimationDrawable animation = new AnimationDrawable();

    animation.addFrame(getResources().getDrawable(R.drawable.pic1), 200);
    animation.addFrame(getResources().getDrawable(R.drawable.pic2), 200);
    animation.setOneShot(false);

    image.setImageDrawable(animation);
    button.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View view, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_DOWN) {
                animation.start();
                button.setPressed(true);
            } else if (event.getAction() == MotionEvent.ACTION_UP) {
                animation.stop();
                button.setPressed(false);
            }

            return true;
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T13:23:26.420

像这样将图像存储在一个 int 数组中

```
int imgarr[]={R.drawable.img1,R.drawable.img2,R.drawable.img1,R.drawable.img3};
take an int to maintain count
int mCount=0;

now onClick()
{

img.setImageResource(imgarr[mCount]);

if(mCount<imgarr.length)
mCount++;

else
mCount=0;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T13:27:58.367

你可以试试这个

```
while (true){

    if(event.getAction() != MotionEvent.ACTION_DOWN){
        break
    }
    ii++;
       if (ii%2==1) i.setImageResource(R.drawable.pic1); else i.setImageResource(R.drawable.pic2);

       return true;

} 
```

# javascript - 使用 Ajax Jquery 发布请求的 Json 劫持

> ID：15174911
> 
> 赞同：5
> 
> 时间：2013-03-02T13:16:20.777
> 
> 标签：javascript, jquery, json, asp.net-mvc

昨天，我阅读了一些关于如何[使用 Asp.Net MVC 防止 Json 劫持的](http://haacked.com/archive/2009/06/24/json-hijacking.aspx)好文章。规则是：永远不要通过 get 请求以 json 格式发送敏感数据。通过在 google 上进行简单的搜索，您可以轻松地了解如何定义一个脚本，该脚本将用于在他的 auth cookie 的帮助下从另一个用途中提取数据。

但是在阅读了所有这些文章之后，我不知道为什么无法使用 Ajax Jquery post request 进行 Json Hijacking。我读到 Ajax 请求受制于相同的源策略，但 JQuery 具有能够执行跨域请求的属性。

在这种情况下，是否可以在文档就绪事件上使用 $.postJSON 的脚本进行 Json 劫持？如果是或否，你能解释一下我的确切原因吗？

这是一组简单的代码来做我在想的事情：

```
$.postJSON = function (url, data, callback) {
   $.post(url, data, callback, "json");
};

<script>
    $(function(){
       $.postJSON("/VulnerableSite/ControllerName/ActionName", 
         { some data parameters }, function() {
         // Code here to send to the bad guy the data of the hacked user. 
         }
    });
</script> 
```

非常感谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-02T13:25:07.580

> 但是 JQuery 有一个属性可以进行跨域请求。

是的，但它只适用于 GET 请求。您不能使用 POST 请求进行跨域 AJAX 调用。大多数现代浏览器也已经修复了覆盖该`__defineSetter__`方法的可能性。这种攻击的想法依赖于包含一个`<script>`从恶意站点指向您的网站的标签。但是浏览器发送一个 GET 请求是为了检索这个脚本而不是 POST。这就是为什么使用 POST 通过 JSON 传输敏感信息更安全的原因。

# c# - 空捕获块

> ID：15174914
> 
> 赞同：3
> 
> 时间：2013-03-02T13:16:42.933
> 
> 标签：c#, try-catch

有一个库（我无法控制）包含一个名为**Inner**的函数，该函数引发**StupidException**类型的异常。我正在编写一个名为**Outer**的函数，它调用**Inner**。我无法提前知道何时会引发**StupidException ，也无法以任何合理的方式处理它。**我不希望我的函数**Outer**的调用者看到**StupidException** - 我将通过从**Outer**返回 null 来与他们交流情况（出于多种原因）。所以，在我看来，最合理的代码是：

```
public thing Outer()
{
  thing result = null;
  try
  {
     result = Inner();
  }
  catch(StupidException ex)
  {
     // do nothing
  }
  return result;
} 
```

我读过关于空的 catch 块是多么邪恶的严厉警告，因为它“吞下了”异常。吞下异常正是我想要做的，在这里，实际上，但是空的 catch 块对我来说仍然感觉不对。有没有更好的办法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-02T13:18:34.590

如果这会让你感觉更舒服，你可以从 catch 块返回，这样它就不会看起来是空的：

```
public thing Outer()
{
    try
    {
        return Inner();
    }
    catch
    {
        return null;
    }
} 
```

如果意图是吞下异常，那没关系。您可能只想验证此内部函数可能抛出的异常类型，以便仅捕获它们而不是捕获所有异常。例如，您可以联系此代码的作者，询问他们的代码可能抛出的异常类型，然后仅针对这些异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T13:24:19.697

您需要所有预期异常的列表，您可以从 Inner 获取并仅捕获这些异常。那是正确的解决方案。

# php - actionscript 3 php 变量没有改变

> ID：15174918
> 
> 赞同：2
> 
> 时间：2013-03-02T13:16:54.410
> 
> 标签：php, variables, actionscript

我正在用 PHP 开发一个随机数生成器，我想将结果发送到 AS3（这很复杂，但这是主要目的）

**PHP：**

```
<?php
    function random() {
      calculating it...sql query ...blabla
      return $randomNumber;
    }
    print "randomNumber=".random();
?> 
```

**AS3：**

```
var loader:URLLoader = new URLLoader();
var myRequest:URLRequest=new URLRequest("mylink");  
function randomPhp():void {     
    loader.dataFormat = URLLoaderDataFormat.VARIABLES;
    loader.addEventListener(Event.COMPLETE, completeRandom);
    loader.load( myRequest );
}
function completeRandom(e:Event):void {
   winner=e.target.data.randomNumber;
   loader.removeEventListener( Event.COMPLETE, completeRandom );
} 
```

它第一次生成一个随机数，但之后如果我多次调用它，它就不会改变。就像它在缓存中创建一个实例一样。我不知道如何修复或重置它。如果我运行我的项目并且在我删除整个 PHP 的时候，AS3 就像什么都没发生一样运行。请帮忙！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T13:59:57.063

有趣的是，您必须添加一个 RandomNumber 来获取您的 RandomNumber ;) 或者更好地为 URLRequest 添加一个时间戳！否则你会得到缓存的请求！为什么你需要来自 php 的随机数？而不仅仅是在 as3 中制作它？

```
URLRequest("mylink"+"?"+new Date().getTime()); 
```

或者像我说的`...+"?"+Math.random()*1000);`

# iphone - 基于方向的 UIView 背景图片

> ID：15174919
> 
> 赞同：0
> 
> 时间：2013-03-02T13:16:59.440
> 
> 标签：iphone, ipad, ios6, uiinterfaceorientation

如何在 ios6 中为 iphone 和 ipad 设置不同方向的不同背景图像？现在我将图像 bg 设置为垂直如下，

```
- (void)viewDidLoad
{
self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"ihome.png"]];
[super viewDidLoad];
} 
```

我厌倦了以下编码，它甚至没有进入代码

```
 -(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
if (toInterfaceOrientation==UIInterfaceOrientationMaskLandscapeRight)
{
    self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"lhomescreen.png"]];
}
if (toInterfaceOrientation==UIInterfaceOrientationMaskLandscapeLeft)
{
    self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"lhomescreen.png"]];
}
if (toInterfaceOrientation==UIInterfaceOrientationMaskPortrait)
{
    self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"ihome.png"]];
}

return YES;

} 
```

请帮我解决

# 编辑

```
- (BOOL)shouldAutorotate
{
return YES;
}

 - (NSUInteger)supportedInterfaceOrientations
  {
// return (UIInterfaceOrientationMaskAllButUpsideDown);
 return (UIInterfaceOrientationMaskAll);
 }

 - (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{

if (toInterfaceOrientation==UIInterfaceOrientationMaskLandscapeRight)

          self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"lhomescreen.png"]];

if (toInterfaceOrientation==UIInterfaceOrientationMaskLandscapeLeft)

         self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"lhomescreen.png"]];

if (toInterfaceOrientation==UIInterfaceOrientationMaskPortrait)

       self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"ihome.png"]];

  // return YES;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:44:52.017

来自苹果文档：

“`shouldAutorotateToInterfaceOrientation:` 返回一个布尔值，指示视图控制器是否支持指定的方向。（**在 iOS 6.0 中已弃用**。覆盖`supportedInterfaceOrientations`and`preferredInterfaceOrientationForPresentation`方法。）”

```
- (BOOL)shouldAutorotate
{
if (toInterfaceOrientation==UIInterfaceOrientationMaskLandscapeRight)

      self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"lhomescreen.png"]];

if (toInterfaceOrientation==UIInterfaceOrientationMaskLandscapeLeft)

     self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"lhomescreen.png"]];

if (toInterfaceOrientation==UIInterfaceOrientationMaskPortrait)

   self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"ihome.png"]];

return YES;
} 
```

# windows-8 - 如何添加提醒/提醒类通知，提醒用户在 c#/xaml Metro 应用程序中设置一次？

> ID：15174921
> 
> 赞同：0
> 
> 时间：2013-03-02T13:17:12.347
> 
> 标签：windows-8, microsoft-metro, winrt-xaml

嗨，我正在开发 ac#/xaml Metro 应用程序，我想在我的应用程序中设置提醒。

1）如何在c#/xaml Metro 应用程序中设置提醒？

2）提醒类通知会在特定时间提醒用户？

3) 向 c#/xaml Metro 应用程序添加提醒的替代方法？？

我想让它特定于用户，如果用户设置了提醒，即使我的应用程序正在运行或未运行，他也应该收到通知。

请让我知道我该怎么做，帮帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:57:59.843

听起来[计划通知](http://msdn.microsoft.com/en-us/library/windows/apps/hh465454.aspx)在这里对您有用。

查看[有关预定通知的官方 Windows SDK 示例](http://code.msdn.microsoft.com/windowsapps/scheduled-notifications-da477093)，我也有[一篇博](http://blogs.msdn.com/b/jimoneil/archive/2012/08/08/windows-8-notifications-scheduled-notifications.aspx)文可能会有所帮助。

# jsf - 在 primefaces 数据表中排序

> ID：15174924
> 
> 赞同：7
> 
> 时间：2013-03-02T13:17:34.877
> 
> 标签：jsf, jsf-2, primefaces, datatable

我正在使用 primefaces 数据表在 UI 中显示我的数据。众所周知，我们可以在数据表本身中进行排序和过滤。但是当我在数据表排序字段中键入单个字符时它开始搜索数据，我不想要它。只有当用户在字段中输入至少 3 个字符时，我才需要搜索数据。有没有可能这样做..？如果真是这样，那么是以哪种方式？请就此发表您的意见。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T09:39:28.577

我对 Primefaces 的数据表做了一个小调查，这是我的发现。

实际上，不需要重新编译，源 javascript 替换也是如此。

您需要为过滤事件注册一个新的处理程序，而不是 Primefaces 提供的处理程序。

在这种情况下，将像这样使用数据表：

```
<h:outputScript name="js/customprimefacestable.js" target="body"/>

<p:dataTable var="data" value="#{filterBean.data}" filteredValue="#{filterBean.filteredData}" widgetVar="tableWidget">
    <p:column filterBy="#{data.name}" headerText="Name" filterMatchMode="contains">
        <h:outputText value="#{data.name}" />
    </p:column>
    <p:column filterBy="#{data.value}" headerText="Value" filterMatchMode="contains">
        <h:outputText value="#{data.value}" />
    </p:column>
    ...
</p:dataTable> 
```

javascript将是这样的：

```
$(document).ready(function() {
    tableWidget.thead.find('> tr > th.ui-filter-column > .ui-column-filter').each(function() {
        var filter = $(this);
        if(filter.is('input:text')) {
            if(tableWidget.cfg.filterEvent!="enter"){
                //unbind current handler
                filter.unbind(tableWidget.cfg.filterEvent);
                //bind new handler that accounts for conditional filtering
                filter.bind(tableWidget.cfg.filterEvent, function(c) {
                    if(filter.val().length > 3) {
                        //Primefaces 3.5 implementation
                        if(tableWidget.filterTimeout){
                            clearTimeout(tableWidget.filterTimeout);
                        }
                        tableWidget.filterTimeout=setTimeout(function(){
                            tableWidget.filter();
                            tableWidget.filterTimeout=null},
                        tableWidget.cfg.filterDelay);
                    }
                });
            }
        }
    });
}); 
```

**注意事项**：

*   `target="body"`: javascript 不能在 中执行`<head>`，因为 Primefaces 会在 中初始化它的小部件变量`$(document).ready()`，所以不能保证在 Primefaces 初始化*完成后你的函数会执行；*
*   由于过滤从在列的搜索框中输入的至少 4 个字符开始（完成），当用户自己删除文本到 4 个字符以下时，您应该恢复未过滤的视图（未完成）；
*   上面的解决方案是针对 Primefaces 3.5 的`<p:dataTable>`。Primefaces 的实现因版本而异，因此请务必查看您正在使用的版本的实现，或者升级到 3.5 版；
*   未涵盖将输入字段呈现为下拉框的过滤事件的实现；
*   该表将侦听默认 ( `keyup`) 事件。

# asp.net-mvc - 使用 EF 在 MVC4 中实现公司、部门、部门用户访问控制

> ID：15174925
> 
> 赞同：4
> 
> 时间：2013-03-02T13:17:39.650
> 
> 标签：asp.net-mvc, entity-framework, multi-tenant, access-control

这是我关于stackoverflow的第一个问题，所以请温柔一点。我正在使用 MVC4、Entity Framework 和 SimpleMembership 编写一个仓库应用程序的客户门户。仓库托管多家公司的内容。每个公司都有部门和部门。用户将对其公司、部门和部门的信息具有不同的访问权限。我正在寻找一种优雅的访问控制解决方案。到目前为止，我的模型如下所示：

```
public class UserProfile
{
    UserProfile()
    {
        this.AccessControl = new HashSet<AccessControl>();
    }

    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    public Nullable<int> CompanyId { get; set; }
    public virtual ICollection<AccessControl> { get; set; }
    public virtual Company Company { get; set; }
}

public class AccessControl
{
    public int AccessControlId { get; set; }
    public int UserId { get; set; }
    public int CompanyId { get; set; }
    public Nullable<int> DivisionId { get; set; }
    public Nullable<int> DepartmentId { get; set; }
    public Boolean ReadAccess { get; set; }
    public Boolean WriteAccess { get; set; }

    // other properties for access control

    public virtual UserProfile UserProfile { get; set; }
    public virtual Company Company { get; set; }
    public virtual Division Division { get; set; }
    public virtual Department Department { get; set; }
}

public class Content
{
    public int ContentId { get; set; }
    public int CompanyId { get; set; }
    public int DivisionId { get; set; }
    public int DepartmentId { get; set; }

    // Various other properties

    public virtual Company Company { get; set; }
    public virtual Division Division { get; set; }
    public virtual Department { get; set; }
} 
```

我的想法是，NULL Division 表示所有部门，NULL Department 表示所有部门。我的问题是：

1.  编写存储库方法以根据用户的访问控制列表以及在 CRUD 视图中填充部门和部门选择列表来检索用户的内容对象列表的优雅方法是什么？
2.  有没有更好的方法来模拟这个访问控制列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T18:17:30.703

我认为这还没有解决你所有的问题，但我认为一个看起来像这样的存储库：

```
public class accessRepository
{
    accessContext context = new accessContext();

    public IQueryable<Content> GetAccessibleContentFor(int userId)
    {
        var up = context.UserProfiles.Single(u => u.UserId == userId);
        var companyId = up.CompanyId;

        return from c in context.Content 
               where c.CompanyId == companyId 
               && (up.AccessControl.Any(
                    a=> 
                        a.CompanyId == c.CompanyId && 
                        a.DivisionId == c.DivisionId && 
                        a.DepartmentId == c.DepartmentId) 
               || up.AccessControl.Any(
                    a=>a.CompanyId == c.CompanyId && 
                        a.DivisionId == c.DivisionId && 
                        a.DepartmentId == null)
               || up.AccessControl.Any(
                    a=>
                        a.CompanyId == c.CompanyId && 
                        a.DivisionId == null)
               select c;
    }
} 
```

如果满足以下条件，将允许您取回可访问的内容：

1.  内容属于用户的公司。
2.  用户可以访问公司、部门和部门的内容
3.  或者用户可以访问公司和部门（所有部门）的内容
4.  或者用户可以访问公司（所有部门）的内容[在这种情况下假定所有部门。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T04:08:24.490

您应该研究一个独立于您的应用程序的基于策略和属性的解决方案，您可以在其中编写授权策略，例如

如果 content.department==user.department && content.company==user.company，则用户可以访问仓库中的内容。

XACML 听起来像是完美的模型。我写了这个演示，我根据采购员、数量、位置和采购订单的状态对采购订单进行访问控制。我不需要更改应用程序代码，因为我在外部使用 XACML。

# java - 是否可以将 SVGPath 转换为 Lines 或访问内部数据？

> ID：15174926
> 
> 赞同：1
> 
> 时间：2013-03-02T13:17:43.150
> 
> 标签：java, javafx-2

我正在使用 SVGPath 加载一个简单形状的 svg（人类牙齿的轮廓）。但是现在我需要在轮廓的一部分上画一条切线。我没有关于组成 SVGPath 以确定曲率的线条的任何信息。有没有办法检索此信息，或将我的 SVGPath 轮廓转换为折线/列表？

# c# - Page_Init() 中的 IDisposable 错误

> ID：15174927
> 
> 赞同：0
> 
> 时间：2013-03-02T13:17:47.930
> 
> 标签：c#, entity-framework-4, idisposable

[嗯，这真的很令人沮丧：我之前曾在 EF 中使用 IDisposable 的](https://stackoverflow.com/questions/15160200/how-to-implement-idisposable-in-entity-framework)实体框架的参考中发布了这个问题， 现在该错误消失了，但我无法弄清楚这一点：

```
protected void Page_Init(object sender, EventArgs e)
    {
        try
        {
            String testCondition = Request.QueryString["Type"];
                switch (testCondition)
                {
                    case "A":
                        using (var rpt = new Report())
                        {
                         List<Class> lst= new ActionDBOClass.ActionMethod();    
                         // other code for crstal report view
                         //setting datasource of the same report
                        }
                        break;
                }
         }
    } 
```

但随后我也收到警告说我必须在 ActionMethod 上实现 dispose（事实上我已经在同一个类中完成了 Idisposable 实现，例如：

```
 public class ActionDBOClass:IDisposable
{
    private bool _disposed = true;
    public void Dispose()
    {
        Dispose(_disposed);
        GC.SuppressFinalize(this);
    }
    protected virtual void Dispose(bool disposing)
    {
        if (!_disposed)
        {
            if (disposing)
            {
                context.Dispose();
                // Dispose other managed resources.
            }
            //release unmanaged resources.
        }
        _disposed = true;
    } 
```

我还需要做什么？我有类似的开关盒，这是我展示的第一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:39:20.370

如果您不在 Page_Init 方法之外使用 lst，请在返回之前调用 lst.Dispose()。就像是：

```
case "A":
    using (var rpt = new Report())
    {
    List<Class> lst= new ActionDBOClass.ActionMethod();    
    // other code for crstal report view
    //setting datasource of the same report
    lst.Dispose();
    }
    break; 
```

更安全的方法是使用类似 using(List lst= new ActionDBOClass.ActionMethod()){... 因为这将确保在抛出异常时调用 Dispose，或者在 try 块之外声明 lst 并调用 Dispose如果 lst != null 在 finally 块中。

# java - 用于图算法演示的 java 库是什么？

> ID：15174928
> 
> 赞同：0
> 
> 时间：2013-03-02T13:17:58.187
> 
> 标签：java, algorithm, graph

我想问一下您是否知道任何可用于演示图形算法如何工作的库？我的工作是制作一个应用程序，逐步展示某些图形算法是如何工作的。我从 JUNG 开始，但是在为算法的步骤设置动画时存在严重问题。在每一步我想显示正在分析哪个节点或边缘。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:22:33.107

[jgraph](http://www.jgraph.com/jgraph.html)是一个用于绘制图形（由节点和边组成的图形）的开源库。听起来像你在找什么。 ![在此处输入图像描述](../Images/db8247ee680f5d7e5cb054069b0f3870.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T13:41:33.960

查看[gremlin](https://github.com/tinkerpop/gremlin/wiki)以及如何将其与 JAVA 一起使用：[https ://github.com/tinkerpop/gremlin/wiki/Using-Gremlin-through-Java](https://github.com/tinkerpop/gremlin/wiki/Using-Gremlin-through-Java)

# html - Mailchimp 模板中的圆角 - 基于 CSS 或图像

> ID：15174932
> 
> 赞同：8
> 
> 时间：2013-03-02T13:18:14.873
> 
> 标签：html, email, html-email, newsletter, mailchimp

我正在为 Mailchimp 创建一个电子邮件模板。我已经下载了一个模板，现在按照要求放置我的内容（我知道使用 Mailchimp 模板语言）。我的问题是我必须使用圆角并且正在使用基于图像的圆角。

当我在 Mailchimp 可视化编辑器中编辑表格时，基于图像的圆角会损坏并且不再起作用。

我应该使用 CSS 还是基于图像的圆角？请有任何建议。

**编辑：*始终使用图像这是我得到的最佳解决方案..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-03T07:36:37.347

[Mailchimp 在其电子邮件蓝图模板](https://github.com/mailchimp/Email-Blueprints)中使用基于 CSS 的圆角。这是[来自 CampaignMonitor 的图表，](http://www.campaignmonitor.com/blog/post/3107/css3-support-in-email-clients/)显示了一些电子邮件客户端`border-radius`（以及`-moz`和`-webkit`前缀）将/不会工作。

基于 CSS 的圆角不适用于*每个*电子邮件客户端，但会在不支持border-radius 属性的客户端中正常失败。当阅读器未启用图像时，将不会显示基于图像的圆角，并且根据您的经验，根据模板的设置方式，在 MailChimp 可视化编辑器中维护基于图像的圆角可能会很困难。

我的建议是基于 CSS 的圆角，使用前缀覆盖最广泛的电子邮件客户端：

```
border-radius: 4px;
-moz-border-radius: 4px;
-webkit-border-radius: 4px; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T23:01:50.623

使用图像，它们是 100% 支持的。[此处示例](https://stackoverflow.com/a/14984717/1435513)如何正确执行此操作。

您需要上传由 Mailchimp 或您自己的 URL 托管的角落图像。如果是，Mailchimp 可能正在重新格式化您的代码。不确定它是否是所见即所得，因为我不是 Mailchimp 用户，但如果是这种情况，您始终可以编辑输出代码以将图像 URL 放回原处。

# iphone - 由于未捕获的异常'NSInvalidArgumentException'而终止应用程序，原因：'keypath parent not found in entity NSSQLEntity CategoryDe tail id=2

> ID：15174933
> 
> 赞同：1
> 
> 时间：2013-03-02T13:18:17.337
> 
> 标签：iphone, ios, objective-c, core-data

我在两个实体之间有一对多的关系，当用户选择父实体时，我使用 NSFetchedResultsController 显示子类别。下面给出了我的获取代码。通过看到错误，问题似乎是在输入数据时。所以我也附上了虚拟插入代码。

**当我尝试使用 NSFetchResultController 的父实体的子实体时，它给出了以下错误**

**由于未捕获的异常'NSInvalidArgumentException'，**错误消息终止应用程序，原因：'keypath parent not found in entity NSSQLEntity CategoryDe​​tail id=2'****

 **```
- (void)addData:(NSArray *)array forCategory:(NSArray *)a{
    //  if(target_iphon)

    MouseWaitAppDelegate *delegate=(MouseWaitAppDelegate *)[[UIApplication sharedApplication]delegate];
    NSManagedObjectContext *context = [delegate managedObjectContext];
    Categories *category1 = [NSEntityDescription
                                       insertNewObjectForEntityForName:@"Categories"
                                       inManagedObjectContext:context];

    category1.serverId=[NSNumber numberWithInteger:[[a objectAtIndex:0]integerValue]];
    category1.name=[a objectAtIndex:1];
    category1.textWidth=[NSNumber numberWithFloat:35.0f];

    for (NSDictionary *dic in array)
    {
        CategoryDetail *cDetail = [NSEntityDescription
                                   insertNewObjectForEntityForName:@"CategoryDetail"
                                   inManagedObjectContext:context];

        if ([[dic objectForKey:@"type"] isEqualToString:@"Tabs"])
        {

            cDetail.serverId=[dic objectForKey:@"ID"];
            cDetail.name=[dic objectForKey:@"name"];
            cDetail.desc=[dic objectForKey:@"desc"];
            cDetail.type=[dic objectForKey:@"type"];
            cDetail.orderNo=[NSNumber numberWithInteger:[[dic objectForKey:@"order_no"]integerValue]];

        }
        else if ([[dic objectForKey:@"type"] isEqualToString:@"events"])
        {
            cDetail.serverId=[dic objectForKey:@"ID"];
            cDetail.name=[dic objectForKey:@"name"];
            cDetail.latitude=[dic objectForKey:@"lat"];
            cDetail.longitude=[dic objectForKey:@"long"];
            cDetail.subCatId=[dic objectForKey:@"subcatid"];
            cDetail.desc=[dic objectForKey:@"desc"];
           // cDetail.event_inst_date=[NSData da]
            cDetail.type=[dic objectForKey:@"type"];
            cDetail.orderNo=[NSNumber numberWithInteger:[[dic objectForKey:@"order_no"]integerValue]];
        }

        cDetail.category=category1;
        [category1 addCategoryDetailObject:cDetail];

    }

    NSError *error;
    if (![context save:&error]) {
        NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
    }
}

#pragma mark - Getter Setter OverRide
- (NSFetchedResultsController *)fetchedResultsController {

    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription
                                   entityForName:@"CategoryDetail" inManagedObjectContext:managedObjectContext];
    [fetchRequest setEntity:entity];

    //NSSortDescriptor *sort = [[NSSortDescriptor alloc] initWithKey:@"details.closeDate" ascending:NO];

    if (self.parentCategory!=nil)
    {
        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"parent == %@", self.parentCategory];
        [fetchRequest setPredicate:predicate];
    }

    NSSortDescriptor *sort = [[NSSortDescriptor alloc] initWithKey:@"orderNo" ascending:YES];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:sort]];

    [fetchRequest setFetchBatchSize:20];

    NSFetchedResultsController *theFetchedResultsController =
    [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                        managedObjectContext:managedObjectContext sectionNameKeyPath:nil
                                                   cacheName:@"Root"];
    self.fetchedResultsController = theFetchedResultsController;
    _fetchedResultsController.delegate = self;

    return _fetchedResultsController;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T14:56:37.477

如果我正确理解您的代码，则从*CategoryDe​​tail*到*Category*的关系被称为`category`而不是`parent`。因此谓词

```
[NSPredicate predicateWithFormat:@"parent == %@", self.parentCategory]; 
```

应该

```
[NSPredicate predicateWithFormat:@"category == %@", self.parentCategory]; 
```**

# c# - 如何呈现 epub html？

> ID：15174935
> 
> 赞同：1
> 
> 时间：2013-03-02T13:18:21.463
> 
> 标签：c#, html, browser, rendering, epub

我想查看 epub 文件的 html 内容。我在读取和处理 epub 文件时没有任何问题。我的问题是如何查看结果 HTML？我知道我可以在 c# 中使用 WebBrowser 控件。但问题是可以从外部应用程序中读取网络浏览器内容。我使用自己的 DRM 加密和解密 epub 文件。但我想防止从视图中复制书籍内容。

我有这段代码（用delphi编写）从任何应用程序的即控制中获取html文档和内容：

```
function GetIEDocumentFromHWND(WHandle: HWND;
  var doc: IHTMLDocument2): HRESULT;
var
  hInst: HWND;
  lRes: Cardinal;
  MSG: Integer;
  pDoc: IHTMLDocument2;
  ObjectFromLresult: TObjectFromLresult;
  IE: IWebbrowser2;

begin
  hInst := LoadLibrary('Oleacc.dll');
  @ObjectFromLresult := GetProcAddress(hInst, 'ObjectFromLresult');
  if @ObjectFromLresult <> nil then begin
    try
      MSG := RegisterWindowMessage('WM_HTML_GETOBJECT');
      SendMessageTimeOut(WHandle, MSG, 0, 0, SMTO_ABORTIFHUNG, 1000, lRes);
      Result := ObjectFromLresult(lRes, IHTMLDocument2, 0, pDoc);
      doc:=pDoc;
      if Result = S_OK then
        (pDoc.parentWindow as IServiceprovider).QueryService(IWebbrowserApp,
IWebbrowser2, IE);
    finally
      FreeLibrary(hInst);
    end;
  end;
end; 
```

这段代码证明使用webbrowser控件不是一个好的解决方案。那我该怎么办？

1.  有什么办法可以防止其他应用程序控制我的浏览器控件？
2.  是否有任何替代方法可以让 webbrowser 控件具有相同的查看 html 的能力？

# java - Eclipse“以安卓方式运行”什么都不做

> ID：15174940
> 
> 赞同：5
> 
> 时间：2013-03-02T13:18:47.257
> 
> 标签：java, android, eclipse, galaxy

我已经把互联网颠倒过来，查看谷歌的官方教程寻找答案，但找不到任何能真正解决我问题的东西。

安装完所有东西并将我的 Galaxy S2 连接到 PC 后，单击“运行为 -> Android 应用程序”就没有任何反应。

我被[困在这里](http://developer.android.com/training/basics/firstapp/running-app.html)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-02T13:22:16.733

因此，您首先必须从 AVD 管理器创建一个 AVD。然后去项目属性——android——设置版本。运行项目 - 选择作为 android 应用程序运行。您还可以更改运行配置并设置要使用的默认 AVD。

要在设备上运行，请转到运行配置，从左侧窗格中选择您的项目 - 在右侧窗格中转到目标 - 仅选择设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T02:19:56.627

对于那些超级新手（比如我），AVD 管理器（Android 虚拟设备管理器）位于“窗口”选项卡下。

# php - 在 PHP 中查找和删除异常值

> ID：15174952
> 
> 赞同：13
> 
> 时间：2013-03-02T13:20:36.693
> 
> 标签：php, algorithm

假设我对一组返回以下数字的数据库记录进行抽样：

```
20.50, 80.30, 70.95, 15.25, 99.97, 85.56, 69.77 
```

是否有一种算法可以在 PHP 中有效地实现，以根据它们偏离平均值的距离从浮点数组中找到异常值（如果有的话）？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-02T14:02:56.720

好的，假设您将数据点放在一个数组中，如下所示：

```
<?php $dataset = array(20.50, 80.30, 70.95, 15.25, 99.97, 85.56, 69.77); ?> 
```

然后，您可以使用以下函数（有关发生的情况，请参阅注释）删除所有超出平均值 +/- 标准偏差乘以您设置的幅度的数字（默认为 1）：

```
<?php

function remove_outliers($dataset, $magnitude = 1) {

  $count = count($dataset);
  $mean = array_sum($dataset) / $count; // Calculate the mean
  $deviation = sqrt(array_sum(array_map("sd_square", $dataset, array_fill(0, $count, $mean))) / $count) * $magnitude; // Calculate standard deviation and times by magnitude

  return array_filter($dataset, function($x) use ($mean, $deviation) { return ($x <= $mean + $deviation && $x >= $mean - $deviation); }); // Return filtered array of values that lie within $mean +- $deviation.
}

function sd_square($x, $mean) {
  return pow($x - $mean, 2);
} 

?> 
```

对于您的示例，此函数返回以下值为 1 的值：

```
Array
(
    [1] => 80.3
    [2] => 70.95
    [5] => 85.56
    [6] => 69.77
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T13:46:09.833

对于一组正态分布的数据，从平均值中删除超过 3 个标准差的值。

```
<?php
function remove_outliers($array) {
    if(count($array) == 0) {
      return $array;
    }
    $ret = array();
    $mean = array_sum($array)/count($array);
    $stddev = stats_standard_deviation($array);
    $outlier = 3 * $stddev;
    foreach($array as $a) {
        if(!abs($a - $mean) > $outlier) {
            $ret[] = $a;
        }
    }
    return $ret;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-24T08:56:22.680

主题：通过在数组中遍历一个小窗口并计算某个值范围的标准偏差，检测无序数组中的局部、加性异常值。

各位早上好

这是我的解决方案很晚了，但是由于我正在寻找通过 PHP 检测异常值并且找不到任何基本的东西，我决定通过简单地连续移动一系列 5 个项目来以某种方式在 24 小时的时间线上平滑给定的数据集通过无序数组并计算局部标准偏差以检测加性异常值。

第一个函数将简单地计算给定数组的平均值和偏差，其中 $col 表示具有值的列（对于 freegrades 抱歉，这意味着在 5 个值的不完整数据集中你只有 4 个 freegrades - 我没有知道 Freiheitsgrade 的确切英文单词）：

```
function analytics_stat ($arr,$col,$freegrades = 0) {

// calculate average called mu
$mu = 0;
foreach ($arr as $row) {
    $mu += $row[$col];
}
$mu = $mu / count($arr);

// calculate empiric standard deviation called sigma
$sigma = 0;
foreach ($arr as $row) {
    $sigma += pow(($mu - $row[$col]),2);
}
$sigma = sqrt($sigma / (count($arr) - $freegrades));

return [$mu,$sigma];
} 
```

现在是核心函数的时候了，它将遍历给定的数组并使用结果创建一个新数组。边距是指与偏差相乘的因子，因为只有一个 Sigma 检测到许多异常值，而超过 1.7 似乎很高：

```
function analytics_detect_local_outliers ($arr,$col,$range,$margin = 1.0) {

$count = count($arr);
if ($count < $range) return false;

// the initial state of each value is NOT OUTLIER
$arr_result = [];
for ($i = 0;$i < $count;$i++) {
    $arr_result[$i] = false;
}

$max = $count - $range + 1;
for ($i = 0;$i < $max;$i++) {

    // calculate mu and sigma for current interval
    // remember that 5 values will determine the divisor 4 for sigma
    // since we only look at a part of the hole data set
    $stat = analytics_stat(array_slice($arr,$i,$range),$col,1);

    // a value in this interval counts, if it's found outside our defined sigma interval
    $range_max = $i + $range;
    for ($j = $i;$j < $range_max;$j++) {
        if (abs($arr[$j][$col] - $stat[0]) > $margin * $stat[1]) {
            $arr_result[$j] = true;

            // this would  be the place to add a counter to isolate
            // real outliers from sudden steps in our data set
        }
    }
}

return $arr_result;
} 
```

最后是长度为 24 的数组中带有随机值的测试函数。至于边距，我很好奇并选择 Golden Cut PHI = 1.618 ... 因为我真的很喜欢这个数字，并且一些 Excel 测试结果使我得到了边距1.7，在此之上很少检测到异常值。5 的范围是可变的，但对我来说这已经足够了。因此，对于一行中的每 5 个值，将进行一次计算：

```
function test_outliers () {

// create 2 dimensional data array with items [hour,value]
$arr = [];
for ($i = 0;$i < 24;$i++) {
    $arr[$i] = [$i,rand(0,500)];
}

// set parameter for detection algorithm
$result = [];
$col = 1;
$range = 5;
$margin = 1.618;
$result = analytics_detect_local_outliers ($arr,$col,$range,$margin);

// display results
echo "<p style='font-size:8pt;'>";
for ($i = 0;$i < 24;$i++) {
    if ($result[$i]) echo "&diams;".$arr[$i][1]."&diams; "; else echo $arr[$i][1]." ";
}
echo "</p>";
} 
```

在调用了 20 次测试函数后，我得到了以下结果：

> 417 140 372 131 449 26 192 222 320 349 94 147 201 ♦342♦ 123 16 15 ♦490♦ 78 190 ♦434♦ 27 3 276
> 
> 379 440 198 135 22 461 208 376 286 ♦73♦ 331 358 341 14 112 190 110 266 350 232 265 ♦63♦ 90 94
> 
> 228 ♦392♦ 130 134 170 ♦485♦ 17 463 13 326 47 439 430 151 268 172 342 445 477 ♦21♦ 421 440 219 95
> 
> 88 121 292 255 ♦16♦ 223 244 109 127 231 370 16 93 379 218 87 ♦335♦ 150 84 181 25 280 15 406
> 
> 85 252 310 122 188 302 ♦13♦ 439 254 414 423 216 456 321 85 61 215 7 297 337 204 210 106 149
> 
> 345 411 308 360 308 346 ♦451♦ ♦77♦ 16 498 331 160 142 102 ♦496♦ 220 107 143 ♦241♦ 113 82 355 114 452
> 
> 490 222 412 94 2 ♦480♦ 181 149 41 110 220 ♦477♦ 278 349 73 186 135 181 ♦39♦ 136 284 340 165 438
> 
> 147 311 246 449 396 328 330 280 453 374 214 289 489 185 445 86 426 246 319 ♦30♦ 436 290 384 232
> 
> 442 302 ♦436♦ 50 114 15 21 93 ♦376♦ 416 439 ♦222♦ 398 237 234 44 102 464 204 421 161 330 396 461
> 
> 498 320 105 22 281 168 381 216 435 360 19 ♦402♦ 131 128 66 187 291 459 319 433 86 84 325 247
> 
> 440 491 381 491 ♦22♦ 412 33 273 256 331 79 452 314 485 66 138 116 356 290 190 336 178 298 218
> 
> 394 439 387 ♦80♦ 463 369 ♦104♦ 388 465 455 ♦246♦ 499 70 431 360 ♦22♦ 203 280 241 319 ♦34♦ 238 439 497
> 
> 485 289 249 ♦416♦ 228 166 217 186 184 ♦356♦ 142 166 26 91 70 ♦466♦ 177 357 298 443 307 387 373 209
> 
> 338 166 90 122 442 429 499 293 ♦41♦ 159 395 79 307 91 325 91 162 211 85 189 278 251 224 481
> 
> 77 196 37 326 230 281 ♦73♦ 334 159 490 127 365 37 57 246 26 285 468 228 181 74 ♦455♦ 119 435
> 
> 328 3 216 149 217 348 65 433 164 473 465 145 341 112 462 396 168 251 351 43 320 123 181 198
> 
> 216 213 249 219 ♦29♦ 255 100 216 181 233 33 47 344 383 ♦94♦ 323 440 187 79 403 139 382 37 395
> 
> 366 450 263 160 290 ♦126♦ 304 307 335 396 458 195 171 493 270 434 222 401 38 383 158 355 311 150
> 
> 402 339 382 97 125 88 300 332 250 ♦86♦ 362 214 448 67 114 ♦354♦ 140 16 ♦354♦ 109 0 168 127 89
> 
> 450 5 232 155 159 264 214 ♦416♦ 51 429 372 230 298 232 251 207 ♦322♦ 160 148 206 293 446 111 338

我希望，这将有助于现在或将来的任何人。问候

PS 为了进一步改进此算法，您可以添加一个计数器，以确保某个值必须例如至少找到 2 次，这意味着在 2 个不同的间隔或窗口中，在它被标记为异常值之前。因此，以下值的突然跳跃不会使第一个值成为反派。让我给你举个例子：

在 3,6,5,9,37,40,42,51,98,39,33,45 中有一个从 9 到 37 的明显步长和一个孤立值 98。我想检测 98，但不是 9 或37\. 第一个区间 3,6,5,9,37 会检测到 37，第二个区间 6,5,9,37,40 不会。所以我们不会检测到 37，因为只有一个有问题的间隔或一个匹配。现在应该清楚了，98 在 5 个间隔中计数，因此是一个异常值。因此，让我们将一个值声明为异常值，如果它“计数”至少 2 次。像往常一样，我们必须仔细观察边界，因为它们只有一个间隔，并且将这些值设为例外。

# c++ - 32 位、64 位和 80 位浮点 IEEE-754 的可表示值范围？

> ID：15174953
> 
> 赞同：1
> 
> 时间：2013-03-02T13:20:37.467
> 
> 标签：c++, c++11, floating-point, x86-64, ieee-754

在 C++ 标准中，它提到了浮动文字：

> 如果缩放值不在其类型的可表示值范围内，则程序格式错误。

缩放值是有效部分乘以 10 ^ 指数部分。

在 x86-64 下：

*   `float`是单精度 IEEE-754
*   `double`是双精度 IEEE-754
*   `long double`是 80 位扩展精度 IEEE-754

在这种情况下，这三种类型的可代表值的范围是多少？这是在哪里记录的？或者它是如何计算的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T13:23:53.313

如果您知道指数位数和尾数位数，那么根据[IEEE-754 格式](http://en.wikipedia.org/wiki/Single-precision#IEEE_754_single-precision_binary_floating-point_format%3a_binary32)，可以确定最大绝对可表示值为：

```
2^(2^(E-1)-1)) * (1 + (2^M-1)/2^M) 
```

最小绝对值（不包括零或非[正规](http://en.wikipedia.org/wiki/Denormal)）是：

```
2^(2-2^(E-1)) 
```

*   对于单精度，`E`是 8，`M`是 23。
*   对于双精度，`E`是 11，`M`是 52。
*   对于扩展精度，我不确定。如果您指的是 x87 FPU 的 80 位精度，那么据我所知，它[不符合 IEEE-754](http://en.wikipedia.org/wiki/Extended_precision#x86_Extended_Precision_Format) ...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T13:40:10.563

答案（如果您使用的是具有 IEEE 浮点的机器）在`float.h`. `FLT_MAX`,`DBL_MAX`和`LDBL_MAX`. 在完全支持 IEEE 的系统上，大约是 3.4e+38、1.8E+308 和 1.2E4932。（确切的值可能会有所不同，并且可能会以不同的方式表达，具体取决于编译器如何进行输入和舍入。例如，g++ 将它们定义为编译器内置函数。）

编辑：

WRT 你的问题（因为我和其他响应者都没有真正回答它）：可表示值的范围是 ，其中 之一是、或。`[-*type*_MAX...*type*]``*type*``FLT``DBL``LDBL`

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2015-09-08T18:57:02.403

我一直在寻找最大的 64 位可表示数字，并最终制作了我自己的 500 位浮点计算器。如果所有 64 位都打开，这就是我想出的

18,446,744,073,709,551,615

18 千亿 446 千亿 744 万亿 730 亿 7.09 亿 55.1 万 615

# javascript - 隐藏地址栏不起作用 - 需要防弹方法

> ID：15174962
> 
> 赞同：4
> 
> 时间：2013-03-02T13:22:19.933
> 
> 标签：javascript, android, ios, mobile-safari, address-bar

目前我正在编写某种网络应用程序，我想隐藏 iOS 设备上的地址栏，最好也隐藏在 Android 设备上。
通常我这样做

```
window.addEventListener( 'load', function () {
  setTimeout( function () {
    window.scrollTo( 0, 1 );
  }, 0 );
}); 
```

但这现在不起作用，因为页面没有足够的内容来滚动。
现在我知道这是一个常见问题，并且我知道有多种解决方案，但我更喜欢一个小型、防弹的解决方案。
实际上，当我发现这个问题时，我很高兴：[http ://stackoverflow.com/questions/9678194/cross-platform-method-for-removing-the-address-bar-in-a-mobile-web-app](https://gist.github.com/nateps/1172490)

此代码的发布位置：

```
function hideAddressBar()
{
  if(!window.location.hash)
  {
      if(document.height < window.outerHeight)
      {
          document.body.style.height = (window.outerHeight + 50) + 'px';
      }

      setTimeout( function(){ window.scrollTo(0, 1); }, 50 );
  }
}

window.addEventListener("load", function(){ if(!window.pageYOffset){ hideAddressBar(); } } );
window.addEventListener("orientationchange", hideAddressBar ); 
```

不幸的是，这对我不起作用。我看到发生了一些事情，因为某些`padding-top`以百分比设置的元素向下移动，但地址栏仍然存在。

当然，我也进行了谷歌搜索并尝试了我找到的许多片段。有些什么也没做，有些只是将元素`padding-top`向下移动了一点。
我发现的唯一工作代码是：

```
var page = document.getElementById('page'),
    ua = navigator.userAgent,
    iphone = ~ua.indexOf('iPhone') || ~ua.indexOf('iPod'),
    ipad = ~ua.indexOf('iPad'),
    ios = iphone || ipad,
    // Detect if this is running as a fullscreen app from the homescreen
    fullscreen = window.navigator.standalone,
    android = ~ua.indexOf('Android'),
    lastWidth = 0;

if (android) {
  // Android's browser adds the scroll position to the innerHeight, just to
  // make this really difficult. Thus, once we are scrolled, the
  // page height value needs to be corrected in case the page is loaded
  // when already scrolled down. The pageYOffset is of no use, since it always
  // returns 0 while the address bar is displayed.
  window.onscroll = function() {
    page.style.height = window.innerHeight + 'px'
  } 
}
var setupScroll = window.onload = function() {
  // Start out by adding the height of the location bar to the width, so that
  // we can scroll past it
  if (ios) {
    // iOS reliably returns the innerWindow size for documentElement.clientHeight
    // but window.innerHeight is sometimes the wrong value after rotating
    // the orientation
    var height = document.documentElement.clientHeight;
    // Only add extra padding to the height on iphone / ipod, since the ipad
    // browser doesn't scroll off the location bar.
    if (iphone && !fullscreen) height += 60;
    page.style.height = height + 'px';
  } else if (android) {
    // The stock Android browser has a location bar height of 56 pixels, but
    // this very likely could be broken in other Android browsers.
    page.style.height = (window.innerHeight + 56) + 'px'
  }
  // Scroll after a timeout, since iOS will scroll to the top of the page
  // after it fires the onload event
  setTimeout(scrollTo, 0, 0, 1);
};
(window.onresize = function() {
  var pageWidth = page.offsetWidth;
  // Android doesn't support orientation change, so check for when the width
  // changes to figure out when the orientation changes
  if (lastWidth == pageWidth) return;
  lastWidth = pageWidth;
  setupScroll();
})(); 
```

[资源](https://gist.github.com/nateps/1172490)

但我对这个解决方案并不满意，因为我不是 UA 嗅探的朋友。

你有什么建议我可以在没有 UA 嗅探的情况下让它工作吗？可能是我的 HTML 导致我发布的一些脚本出现问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T17:58:06.923

不知道它是否防弹，但它适用于一堆设备。如果您发现警告，请告诉我。

```
if (((/iphone/gi).test(navigator.userAgent) || (/ipod/gi).test(navigator.userAgent)) &&
    (!("standalone" in window.navigator) && !window.navigator.standalone)) {
    offset = 60;
    $('body').css('min-height', (window.innerHeight + offset) + 'px');
    setTimeout( function(){ window.scrollTo(0, 1); }, 1 );
}

if ((/android/gi).test(navigator.userAgent)) {
    offset = 56;
    $('html').css('min-height', (window.innerHeight + offset) + 'px');
    setTimeout( function(){ window.scrollTo(0, 1); }, 0 );
} 
```

# c# - “System.ServiceModel.OperationContext”不包含采用“0”参数的构造函数

> ID：15174963
> 
> 赞同：0
> 
> 时间：2013-03-02T13:22:26.203
> 
> 标签：c#, arguments

以我的形式

```
 private OperationContext operationContext;

operationContext = new OperationContext(); 
```

当我调试代码时，它显示错误

> “System.ServiceModel.OperationContext”不包含采用“0”参数的构造函数

但是在我的朋友形式中，它可以在没有任何参数的情况下正常工作 operationContext = new OperationContext();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:26:18.010

也许朋友使用不同版本的 .net 框架。你应该看到：

[http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontext.operationcontext%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontext.operationcontext%28v=vs.110%29.aspx)

# wpf - TabControl 中的“System.InvalidOperationException”

> ID：15174964
> 
> 赞同：0
> 
> 时间：2013-03-02T13:22:28.800
> 
> 标签：wpf, tabcontrol

```
<Window x:Class="AutoMerge2013.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="AutoMerge2013" Height="350" Width="525"
    Style="{StaticResource VS2012WindowStyle}">
    <TabControl x:Name="tbControl">
    <TabItem Header="Main">
        <Canvas>
            <Button Name="btnOpen" Content="Open files" Canvas.Left="40" Canvas.Top="20" Width="98" Click="btnOpen_Click_1"/>
            <Button Name="btnUpload" Content="Upload files" Canvas.Left="181" Canvas.Top="20" Width="98" Visibility="Hidden" Click="btnUpload_Click_1"/>
            <Button Name="btnMerge" Content="AutoMerge" Canvas.Left="338" Canvas.Top="20" Width="98" Visibility="Hidden" Click="btnMerge_Click_1"/>

            <StatusBar Canvas.Top="247" Width="499">
                <TextBlock x:Name="txtInfo"></TextBlock>
                <StatusBarItem HorizontalAlignment="Right">
                    <ResizeGrip />
                </StatusBarItem>
            </StatusBar>
    </TabItem>
    <TabItem Header="Original">

    </TabItem>
</TabControl> 
```

当我单击“原始”选项卡时，它会引发异常：

> PresentationCore.dll 中出现“System.InvalidOperationException”类型的未处理异常

附加信息：指定的 Visual 不是此 Visual 的后代。

我在我的应用程序中使用`Style="{StaticResource VS2012WindowStyle}"` 也许这是一个问题......你能给一些建议如何避免这个异常并保存我的风格吗？

# c# - 如何说某些行为默认附加到某种类型的所有 ui 元素？

> ID：15174965
> 
> 赞同：0
> 
> 时间：2013-03-02T13:22:29.147
> 
> 标签：c#, .net, xaml

例如，我希望我的应用程序中的所有 MediaElements 在鼠标单击 mediaelement 后会导致播放/暂停/播放/暂停...可以说这种行为附加到应用程序中的所有关联元素吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:53:20.113

直接遍历网格的所有子节点并适当地附加事件。

在您的 XAML 中，请务必为您的网格命名：

```
 <Grid x:Name="gr01"... 
```

您可以编写一个附加事件的函数并在事件中调用它`Window_Loaded`。

```
namespace AttachEventDemo {
   public partial class MainWindow : Window {
      // ... usual initialization code goes here
      private void Window_Loaded( object sender, RoutedEventArgs e ) {
         AttachEvent( );
      }

      private void AttachEvent( ) {
         foreach ( var item in gr01.Children ) {
            switch ( item.GetType( ).ToString( ) ) {
               case "System.Windows.Controls.Button":
                  Button b = item as Button;
                  b.Click += b_Click;
                  txtLog.Text = "Added click event for button " + b.Name + Environment.NewLine + txtLog.Text;
                  break;

               case "System.Windows.Controls.CheckBox":
                  CheckBox cb = item as CheckBox;
                  cb.Checked += cb_Checked;
                  txtLog.Text = "Added click event for checkkbox " + cb.Name + Environment.NewLine + txtLog.Text;
                  break;

               default:
                  break;
            }
         }
      }

      void cb_Checked( object sender, RoutedEventArgs e ) {
         CheckBox cb = sender as CheckBox;
         txtLog.Text = "CheckBox " + cb.Name + " checked changed!" + Environment.NewLine + txtLog.Text;
      }

      private void b_Click( object sender, RoutedEventArgs e ) {
         Button b = sender as Button;

         txtLog.Text = "Button " + b.Name + " was clicked!" + Environment.NewLine + txtLog.Text;
      }
   }
} 
```

# time - 以下的时间复杂度

> ID：15174969
> 
> 赞同：0
> 
> 时间：2013-03-02T13:23:07.657
> 
> 标签：time, time-complexity, asymptotic-complexity

```
int i=1,s=1;
while(s<=n)
{
i++;
s=s+i;
} 
```

时间复杂度为 O(root(n))。我不明白它是怎么回事。因为这个系列就像 1+2+...+k 。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T13:29:27.500

让循环执行`x`次数。现在，只要`s`小于，循环就会执行`n`。

我们有 ：

第 1 次迭代
`s = s + 1`
后： 第 2 次迭代后：
`s = s + 1 + 2`

随着它进行 x 次迭代，最后我们将有

`1 + 2 ... + x <= n`

=>`(x * (x + 1)) / 2 <= n`

=> `O(x^2)`<= n

=> `x= O (root(n))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T13:33:16.893

`s(k) = 1 + 2 + 3 + ... k = (k + 1) * k / 2`

因为`s(k) >= n`你至少需要 k 步。`n = (k + 1) * k / 2`，因此`k = -1/2 +- sqrt(1 + 4 * n)/2`；

你忽略了常数和系数`O(-1/2 + sqrt(1+4n)/2) = O(sqrt(n))`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T13:28:22.170

这计算总和`s(k)=1+2+...+k`并在 时停止`s(k) > n`。

因为，需要超过`s(k)=k*(k+1)/2`的迭代次数是。`s(k)``n``O(sqrt(n))`

# sql - sql server 参数大小重载

> ID：15174979
> 
> 赞同：1
> 
> 时间：2013-03-02T13:24:24.267
> 
> 标签：sql, sql-server

我正在从我的 ASP.NET 应用程序调用存储过程。存储过程采用一个参数。我从我的 WEB 表单提供的值太大，以至于它没有完全加载到 sql server 的变量中。我的 sql 服务器参数的数据类型是 nvarchar(max)，我的 ASP.NET 应用程序中的数据类型是字符串。存储过程如下

```
Create procedure p_getProducts
@nm_emp nvarchar(max)
AS
BEGIN

  select * from tblProduct where nm_user in(convert(nvarchar(max),@nm_emp));

END 
```

请告诉我应该使用哪种 sql server 数据类型来解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:48:08.507

对于我从您的代码中可以假设的内容，您应该使用[dynamic-sql](http://www.sqlteam.com/article/using-dynamic-sql-in-stored-procedures)而不是直接使用参数作为 IN 子句的值。试试这个过程。

```
Create procedure p_getProducts
      @nm_emp nvarchar(max)
AS
    BEGIN
    DECLARE @SQL NVARCHAR(MAX); 
    SELECT @SQL = N'select * from tblProduct where nm_user in(' + 
                  @nm_emp + N')'

    EXEC sp_executeSQL @SQL 
```

# c++ - 由 std::shared_ptr 包裹的 calloc / malloc

> ID：15174982
> 
> 赞同：0
> 
> 时间：2013-03-02T13:24:32.267
> 
> 标签：c++, malloc, smart-pointers, calloc

我有一些代码包含使用 calloc 和 malloc 进行内存分配的自制哈希表。我想使用带有自定义删除器的 shared_ptr 修改这些部分，该删除器会自动释放分配的内存。该代码是 mmseg 中文分段器算法的一部分，它运行良好，但由于它留下内存泄漏而变得如此混乱。我正在考虑使用 unordered_map 等重写该代码，但现在我想做这些更改。

我阅读了类似问题的答案，例如[shared_ptr with malloc and free](https://stackoverflow.com/questions/12264701/shared-ptr-with-malloc-and-free)或[Accessing calloc'd data through a shared_ptr](https://stackoverflow.com/questions/11777119/accessing-callocd-data-through-a-shared-ptr)，但我在下面的代码中使用它时遇到问题。

我有这些行，我无法用智​​能指针包装调用。所以也许有人可以帮我解决这个问题：

```
struct Word {
    unsigned char nbytes;   /* number of bytes */
    char length;   /* number of characters */
    unsigned short freq;
    char text[word_embed_len];
};

struct Entry {
    Word *word;
    Entry *next;
};

static Entry **new_bins = static_cast<Entry **>(std::calloc(init_size, 
    sizeof(Entry *)));
Entry *entry, ...;
...
new_bins[hash_val] = entry;
....
free(new_bins); 
```

上面的 calloc 调用我会用 calloc 的结果提供共享指针，例如

```
std::shared_ptr<Entry *> binsPtr(new_bins, freePtr()); 
```

我不确定这是否正确。

mmseg 使用 malloc() 的池分配例程，如下所示：

```
inline void *pool_alloc(int len) {
    void *mem = _pool_base;

    if (len <= _pool_size) {
        _pool_size -= len;
        _pool_base += len;
        return mem;
    }

    _pool_base = static_cast<char *>(std::malloc(REALLOC_SIZE));
    mem = _pool_base;
    _pool_base += len;
    _pool_size = REALLOC_SIZE - len;
    return mem;
} 
```

然后分配器是这样调用的：

```
Entry *entry = bins[h];
...
entry = static_cast<Entry *>(pool_alloc(sizeof(Entry)));
entry->word = word;
entry->next = NULL;
bins[h] = entry; 
```

是否可以修改 pool_alloc 例程，例如我可以用共享指针包装 malloc() 并定义自定义删除器（甚至可以跳过完整的 pool_alloc fct 并仅使用 shared_ptr），例如

```
std::shared_ptr<Entry> entry((Entry *)malloc(sizeof(Entry)), freePtr());

struct freePtr {
    void operator()(void* x) {
        free(x); 
    }
}; 
```

如果有人可以帮助我解决这个问题，那就太好了。提前致谢！

**更新：**

我为我的问题编写了一个简单的内存池类，因此所有指针都会自动销毁。shared_ptr 中的包装 calloc() 似乎工作正常并且按预期工作。Valgrind 不再报告内存泄漏和错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-31T00:13:42.917

OP写道：

> 我为我的问题编写了一个简单的内存池类，因此所有指针都会自动销毁。shared_ptr 中的包装 calloc() 似乎工作正常并且按预期工作。Valgrind 不再报告内存泄漏和错误。

换句话说，更改代码修复了错误。:) 此时可以安全地删除这个问题。

# html - 我无法推断这背后的功能，需要专家帮助

> ID：15174984
> 
> 赞同：0
> 
> 时间：2013-03-02T13:24:45.393
> 
> 标签：html, css, layout, menu

我从一个解释如何创建纯 CSS 水平菜单的教程网站上复制的这段小代码，就在我以为我终于明白它是如何工作的时候，我发现了这个东西，基本上现在我正试图反思所有我在 CSS 中学到的东西，我被困住了。

所以基本上代码是这样的，CSS。

```
#nav, .nav, #nav .nav li { margin:0px; padding:0px; }
#nav li {float:left; display:inline; cursor:pointer; list-style:none; padding:0px 10px 0px 10px; border:1px #000 solid; 
position:relative;}
#nav li ul.first {left:-1px; top:100%;}

li, li a {color:#000; text-decoration:none;}
#nav .nav li { width:100%; text-indent:10px; line-height:30px; margin-right:10px; border-top:1px #000 solid; 
border-bottom:1px #000 solid; border-left:none; border-right:none; background:#fff;}
#nav li a {display:block; width:inherit; height:inherit;}

ul.nav { display:none; }
#nav li:hover > a, #nav li:hover { color:#fff; background:#000; }
li:hover > .nav { display:block; position:absolute; width:200px; top:-2px; left:50%; z-index:1000; border:1px #000 solid; }
li:hover { position:relative; z-index:2000; } 
```

和html，

```
<ul id="nav">
    <li>Menu 1
        <ul class="nav first">
            <li><a href="#">Menu 1</a></li>
            <li>Menu 2</li>
            <li>Menu 3</li>
            <li>Menu 4</li>
        </ul>
    </li>
    <li>Menu 2</li>
    <li>Menu 3</li>
    <li>Menu 4</li>
</ul> 
```

现在这是问题开始的地方，在 CSS 中，在第 9 行，是的，在该 `li:hover > .nav`部分，当我将其更改为 时`#nav li:hover > .nav`，下拉菜单就会乱七八糟，它不会表现得像应有的那样，而且我我试图揭示一个简单的布局是如何`#nav`弄乱布局的，我提出了一些理论，但我似乎无法证明它们，因为它们与我学到的一些东西相矛盾，我真的需要某种方式给我解释一下，我要疯了！

如果有人请，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:47:12.373

你有：

```
#nav li ul.first {left:-1px; top:100%;} 
```

和

```
li:hover > .nav { display:block; position:absolute; width:200px; top:-2px; left:50%; z-index:1000; border:1px #f00 solid; } 
```

由于第一行更具体，它的`left`和`top`值将优先于后一行的值。一旦将后一行更改为：

```
#nav li:hover > .nav { display:block; position:absolute; width:200px; top:-2px; left:50%; z-index:1000; border:1px #f00 solid; } 
```

它变得比第一个更具体，并且优先于第一个。这就是定位发生变化的原因。

您可以通过谷歌搜索“css 优先级”来阅读这些内容，例如：[http ://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/](http://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/)

# ios - 需要正确的 Sql Stmt

> ID：15174987
> 
> 赞同：0
> 
> 时间：2013-03-02T13:25:25.613
> 
> 标签：ios, objective-c, sql

我有 Sql 数据库，一切正常

```
 NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO CONTACTS where (modifiedAdress) VALUES (\"%@\")", hemaInsert]; 
```

我用它来插入，但我是怎么做的

只有我需要插入到联系人列中的 Sql 语句修改地址值 hemainsert`(condition hemaInsert = ID )`

```
NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO CONTACTS where (modifiedAdress) VALUES (\"%@\")", hemaInsert]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:50:01.203

```
- (void) InserRecorinTable:(NSString*) hemaInsert
{

        int ret;
        const char *sql =   "insert into CONTACTS (modifiedAdress) values (?);";

        sqlite3_stmt *insStmt = NULL;
        if ( !insStmt )
            if ( (ret = sqlite3_prepare_v2(_database, sql, -1, &insStmt, NULL)) != SQLITE_OK ) {}

        // bind values
        sqlite3_bind_text(insStmt, 1, hemaInsert, -1, SQLITE_TRANSIENT);                

        if ((ret = sqlite3_step(insStmt)) != SQLITE_DONE) {NSLog(@"error while inserting marker");}
        sqlite3_reset(insStmt);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T13:28:47.617

如果要插入整行/元组/记录。

```
NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO CONTACTS where modifiedAdress is '%@'", hemaInsert];//you can go for " or ' as per oracle or other sqls.

NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO CONTACTS where modifiedAdress = \"%@\"", hemaInsert];//you can go for " or ' as per oracle or other sqls. 
```

编辑：

INSERT 用于添加元组（行）。如果您只想在特定列中插入，则需要使用**UPDATE**。

语法是：

```
UPDATE tableName
SET column1=value, column2=value2,...
WHERE some_column=some_value 
```

采用：

```
NSString *insertSQL = [NSString stringWithFormat: @"UPDATE CONTACTS SET modifiedAdress  = \"%@\"", hemaInsert]; 
```

# android - ImageView 上的随机图像

> ID：15174991
> 
> 赞同：2
> 
> 时间：2013-03-02T13:26:13.403
> 
> 标签：android, image, random

我对 Eclipse 非常陌生，到目前为止只使用了一天，并且以前也没有使用 Java 的经验，虽然我不太了解，但我仍然了解它是怎么回事。

有人可以帮我用代码从我的图纸文件夹中随机生成一张图片吗？我让我的 android 应用程序空白并在全屏模式下，我添加了一张图片`imageView1`，`fitCenter`编辑它，它真的很好用，我也清除了沿途发生的所有错误。

这是我的`ImageView`代码到目前为止的样子：

```
<ImageView
        android:id="@+id/imageView1"
        android:contentDescription="@string/desc"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:scaleType="fitCenter"
        android:src="@drawable/img1" /> 
```

现在我真正需要的是我的应用程序只显示一个随机图像，每次我运行应用程序时它都会显示一个不同的图像，而且一旦在应用程序中，我可以`On Click`在图像上显示一个不同的随机图像。

我想我必须添加一些字符串或其他东西，我对此真的很陌生，还不太了解。

如果你能在这里帮助我，真的很感激:)。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-02T13:34:12.023

试试这个

```
int[] photos={R.drawable.image1, R.drawable.image2,R.drawable.image3,R.drawable.image4};

ImageView image = (ImageView) findViewById(R.id.imageview1);

Random ran=new Random();
int i=ran.nextInt(photos.length);
image.setImageResource(photos[i]);
image.setOnClickListener(new View.onClickListener()
{
    public void onClick(View v)
    {
      int k=ran.nextInt(photos.length);
      image.setImageResource(photos[k]);
    }
}
); 
```

注意：我没有在 Eclipse 或任何 java 编辑器中输入此内容，如果您发现任何语法错误，请自行更正。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T13:38:46.590

那不是“代码”，它只是布局。

在您的活动中，您需要执行以下操作：

1）解决您的Imageview，以便您可以更改drawable。

2) 绑定一个点击监听器。

3a）将所有图像引用放在一个数组/列表/东西中，以便您可以轻松使用它们。

3b）或在随机化后根据名称动态解析它们，pic1，pic2等。

4) 创建一个随机图像方法，在 0 和图片数量之间随机化一个数字。

5）设置图片。

6) 利润

# javascript - 如何使用对象名称值访问数组？

> ID：15174993
> 
> 赞同：2
> 
> 时间：2013-03-02T13:26:39.187
> 
> 标签：javascript, arrays, string

## 我想要做什么

我试图通过将参数传递给基本上控制幻灯片的函数来访问多个数组。我传递给函数的参数是`name`a 的`<a href=#" name="rebounding" onclick="nextPlayer(this.name)"></a>`。这是我要访问的数组之一。 `var reboundingImgs = ['tyson_chandler.png', 'dwight_howard.png', 'zach_randolph.png', 'omer_asik.png', 'nikola_vucevic.png', 'joakim_noah.png'];`

## 问题

当我将参数传递给更改图像的函数并且我使用`[index]`而不是在调用的数组中获取索引时，`reboundingImgs[]`我在`string parameter`. 例如`parameter + "Imgs"[index]`，如果 index 为 2 并且我传入的参数是“rebo​​unding”，则为“b”。我需要使用传入的参数访问数组以显示来自正确数组的正确图像（我有几个包含图像的数组，例如scoringImgs[]、reboundingImgs[]、assistsImgs[] 等）

## 这是我的代码

```
function nextPlayer(typeStatStr) {
    var numImgs = 6;
    var img = document.getElementById("slideImage");
    var imageName = img.name.split("_"); 
    var index = imageName[1];
    if (index == numImgs -1) {
        return;
    } 
    else {
        index++;
    }
    img.src = "..\\nbaart\\" + typeStatStr + "Imgs"[index];
    img.name = "image_" + index;
}

function prevPlayer(typeStatStr) {
    var img = document.getElementById("slideImage");
    var imageName = img.name.split("_");
    var index = imageName[1];
    if (index == 0) {
        return;
    }
    else {
            index--;
    }
    img.src = "..\\nbaart\\" + typeStatStr + "Imgs"[index];
    img.name = "image_" + index;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T14:02:11.457

为什么不将正确的数组作为参数传递给函数？

```
nextPlayer(reboundingImgs); 
```

然后只是：

```
typeStatStr[index]; 
```

无论如何，如果数组是某种全局变量（窗口范围？），那么你可以这样做：

```
window[typeStatStr + "Imgs"][index]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T14:05:33.547

创建一个对象，该对象具有可以在给定数组名称的情况下访问的属性：

```
var imgs = {};

imgs.rebounding = ['tyson_chandler.png', 'dwight_howard.png', 
                   'zach_randolph.png', 'omer_asik.png', 
                   'nikola_vucevic.png', 'joakim_noah.png'];

alert(imgs["rebounding"][0]); // tyson_chandler.png 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T14:02:05.907

String 只是类型字符数组，因此：`"Imgs"[index];`您正在访问“Imgs”数组的第索引元素。例如`"Imgs"[2] == 'g'`.

如果你想访问数组的第 index 个元素，`Imgs`那么你应该这样做：

```
Imgs[index]; //Without the quotes 
```

# .htaccess - 没有附加字符的 RewriteRule

> ID：15174996
> 
> 赞同：0
> 
> 时间：2013-03-02T13:26:49.420
> 
> 标签：.htaccess, url, mod-rewrite, url-rewriting

我将以下 url rewriteRule 添加到我的 htaccess 文件中：

```
RewriteEngine On

RewriteRule ^(.*)$ index.php?url=$1 [L] 
```

如您所见，我想更改以下网址：

```
 http://www.example.com/?url=signup 
```

类似于

```
 http://www.example.com/signup 
```

问题是它对我不起作用，直到向我的 rewriteRule 添加一个字符

例如，我在 url 的末尾添加了一个斜杠：

```
RewriteRule ^(.*)/$ index.php?url=$1 [L] 
```

它以一个好的但不需要的结果结束：

```
http://www.example.com/signup/ 
```

那么，是否有任何想法只使用变量而不使用任何其他字符来制作网址？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T13:57:53.917

如果我理解正确，试试这个：

**更新**以包括基本指令：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI}  !index\.php [NC]
RewriteRule ^([^/]+)/? index.php?url=$1 [R,L] 
```

# nlp - 语法检查

> ID：15174997
> 
> 赞同：0
> 
> 时间：2013-03-02T13:26:53.033
> 
> 标签：nlp, nltk, stanford-nlp

我们有一段文本要检查语法正确性。我们正在使用 NLTK，在 POS 标记之前一切都很好，但是当我们开始解析时，我们意识到 nltk 仍然没有像[Stanford Parser](http://nlp.stanford.edu/software/lex-parser.shtml)那样的统计解析。NLTK 允许我们制作不灵活的玩具语法。

所以在一个类似的[问题](https://stackoverflow.com/questions/6115677/english-grammar-for-parsing-in-nltk)中，用户 larsmans 提到使用斯坦福解析器，然后根据概率检查块。但斯坦福不[推荐](http://nlp.stanford.edu/software/parser-faq.shtml#j)。

你能推荐我们工具、算法、指针、建议，这些工具可以帮助我们在正确的道路上建立，检查语法（比如平均 20 个单词长度的句子，最好是 python）。我们找到[了这个。](https://github.com/wavii/pfp)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T05:30:14.437

您可以考虑使用 AbiWord（文字处理器）检查语法的[Link Grammar Parser 。](http://www.link.cs.cmu.edu/link/index.html)根据他们的[页面](http://www.abisource.com/projects/link-grammar/)：

> AbiWord 团队有一个具体的需求——将语法检查功能集成到 AbiWord 中。他们认为，最好的选择是建立在 Temperley 等人的基础上。al. 的成功链接语法项目。

# c# - 定时器麻烦。.

> ID：15174998
> 
> 赞同：1
> 
> 时间：2013-03-02T13:27:06.433
> 
> 标签：c#, wpf, visual-studio-2010, kinect

我正在尝试在 wpf vs 2010 中创建一个按钮，单击该按钮时会定期执行一个操作，我在这个网站和其他网站上查看了大量不同的类似问题，但问题是我正在尝试调用一个函数从 kinect 截取屏幕截图，可以让计时器工作，但它会一直冻结，而不是 10 个不同的屏幕截图，间隔为 2.5 秒，我一次又一次地获取相同的屏幕截图，非常感谢任何帮助。根据我在此处找到的一些提示，目前我正在使用复选框而不是按钮。

```
 private void checkBox1_Checked_1(object sender, RoutedEventArgs e)
    {

        Stopwatch stopwatch = new Stopwatch();

        // Begin timing
        stopwatch.Start();

        // Do something
        for (int i = 0; i < 60000; i++)
        {
            Thread.Sleep(3);
        }

        // Stop timing
        stopwatch.Stop();

        take_motions();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:29:48.643

使用此代码，您将阻塞主应用程序线程。这可以解释为什么您一遍又一遍地获得相同的屏幕截图。

您需要做的是在后台线程中启动计时器，然后形成**该线程**将事件发送到主应用程序以截取屏幕截图。这将允许应用程序继续工作。

为此，您应该使用可用的`Timer`类之一。它们的工作方式略有不同，但都应允许您指定在计时器的每个滴答声上调用的方法。

您需要将事件发送回 UI 以避免跨线程问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T13:36:29.650

您应该使用计时器并`take_motions();`在单独的线程中运行：

```
aTimer = new System.Timers.Timer(10000);

// Hook up the Elapsed event for the timer.
aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);

// Set the Interval to 2 seconds (2000 milliseconds).
aTimer.Interval = 2000;
aTimer.Enabled = true;

private void checkBox1_Checked_1(object sender, RoutedEventArgs e)
{
  //here call timer start or stop
}

private static void OnTimedEvent(object source, ElapsedEventArgs e)
{
    ThreadPool.QueueUserWorkItem(delegate
   {
     take_motions();
   });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T15:31:31.597

WPF 中有一个专门的计时器类，当它在 UI 线程中运行时，它可以避免任何 UI 跨线程问题。这是[DispatcherTimer](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx)类：

```
private DispatcherTimer timer;

public MainWindow()
{
    InitializeComponent();

    timer = new DispatcherTimer { Interval = TimeSpan.FromSeconds(2.5) };
    timer.Tick += timer_Tick;
}

private void timer_Tick(object sender, EventArgs e)
{
    // take screenshot here
}

private void checkBox_Checked(object sender, RoutedEventArgs e)
{
    timer.Start();
}

private void checkBox_Unchecked(object sender, RoutedEventArgs e)
{
    timer.Stop();
} 
```