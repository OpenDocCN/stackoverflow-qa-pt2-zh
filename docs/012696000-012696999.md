# StackOverflow 问答 12696000-12696999

# r - 在数据框的同一列中具有数字数据类型和字符数据类型？

> ID：12696002
> 
> 赞同：1
> 
> 时间：2012-10-02T18:22:33.207
> 
> 标签：r, dataframe, types

我在 R 中有一个大数据框（570 行乘 200000 列）。对于那些熟悉 PLINK 的人，我正在尝试为 GWAS 分析创建一个 PED 文件。Plink 要求每个缺失的字符用零编码。非缺失值是“A”、“T”、“C”或“G”。

因此，例如，数据结构在数据框中看起来像这样。

```
 COL1     COL2 
     PT1    A        T      
     PT2    T        T     
     PT3    A        A
     PT4    A        T        
     PT5    0        0
     PT6    A        A 
     PT7    T        A
     PTn    T        T 
```

当我在 Plink 中运行我的文件时，我得到一个错误。我回去检查我在 R 中的文件，发现零是“字符”类型。 **在 R 的给定列中是否可以有两种不同的数据类型（数字和字符）？** 我尝试将 0 设为数字类型并将字母保留为字符类型，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:13:11.537

我认为贾斯汀的建议可能会解决您对 Plink 的问题，但想以粗体字回答您的问题......

**在 R 的给定列中是否可以有两种不同的数据类型（数字和字符）？**

不是真的，但在这种特殊情况下，当它是一个离散变量时，是的。在 R 中，您有**因子**基本类型，即其他一些语言中的枚举。

例如试试这个：

```
x = factor(c("0","A","C","G","T"),levels=c(0,"A","T","G","C"))
print(x)

[1] 0 A C G T
Levels: 0 A T G C 
```

您可以将它们转换回整数（默认情况下第一级为 1）和字符：

```
> as.integer(x)
[1] 1 2 5 4 3

> as.character(x)
[1] "0" "A" "C" "G" "T" 
```

现在，当您使用 read.table 读取表格时，您可以指示所有字符类型都应作为因子读取，即使是那些带有引号的字符。

```
mydata = read.table("yourData.tsv",stringAsFactors=T); 
```

# javascript - 防止通过手动验证提交表单

> ID：12696004
> 
> 赞同：0
> 
> 时间：2012-10-02T18:22:35.483
> 
> 标签：javascript, jquery, jquery-validate, unobtrusive-validation

在以下帖子的帮助下，我使用 JQuery 和 Unobtrusive 验证实现了一些自定义验证逻辑：

[在文本框上手动设置不显眼的验证错误](https://stackoverflow.com/questions/7380278/manually-set-unobtrusive-validation-error-on-a-textbox/7988611#7988611)

为了节省您阅读该帖子的时间，这里有一个简单的 javascript，如果出现故障，它会强制显示验证消息：

在我的文本框中`.blur():`

```
var errorArray = {};
errorArray["Slug"] = 'Some error message for the Slug text box';
$('#SomeFormId').validate().showErrors(errorArray); 
```

效果很好。

我的问题是显示失败的验证消息时，单击提交时表单提交就好了。

如何使用上面的代码实现自定义验证并防止在显示消息时提交表单？我厌倦了做类似的事情，`$('#SomeFormId').valid = false;`但它没有用。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:31:14.123

使用`$('#SomeFormId')`将不起作用，因为当您这样做时：

```
$('#SomeFormId').valid = false; 
```

然后当您`submit`再次使用（我假设的）在表单处理程序中访问它时：

```
var form = $('#SomeFormId');   // or $(this)
if (form.valid) {
    //
} 
```

您实际上是在创建**两个不同的对象**，即使它们指的是同一个 DOM 元素。所以设置`valid = true`一个不会在第二个更新它。

您提供的代码非常简单，所以我假设您的验证与您的`submit`处理程序是分开的（因为它`blur`无论如何都是），所以您可以做的是使用类似`.data()`或标志的东西（只要确保它在上下文中） .

```
// on blur
$('#SomeFormId').data('isvalid', false);    // invalid

// on submit
var isvalid = $('#SomeFormId').data('isvalid');
if (!isvalid) {
    // invalid form
    ev.preventDefault();
} 
```

## 编辑

### jQuery 事件对象

当您在 jQuery 中将函数绑定为事件处理程序时，jQuery 默默为您做的一件事就是它为您“创建”了一个规范化的 Event 对象。这将包含有关您可以在处理程序中使用的事件的信息，并且还允许您以某些方式控制事件的行为。

```
// setting a submit event on my form
//                                       |   whatever you put here 
//                                       V   is the event object.
$('#SomeFormId').on('submit', function (ev) {

    // preventing the default action
    // : in a form, this prevents the submit
    ev.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T18:27:51.580

要检查表单是否有效，您可以使用以下内容：

```
var form = $("#SomeFormId");
form.submit(function(event) {
    if(form.valid() == false) event.preventDefault();
} 
```

编辑以添加更多内容，这将处理您的提交/预防，现在您只需添加验证调用。

# asp.net - 回发的禁止错误

> ID：12696006
> 
> 赞同：1
> 
> 时间：2012-10-02T18:22:41.693
> 
> 标签：asp.net

当页面上发生回发时，我的应用程序显示以下错误：

**禁止访问：您无权访问此服务器上的/文件夹/teste.aspx。**

我可以正常访问页面，问题是发生回发时。例如，当发生 selectedindexchanged 或单击按钮时，就会出现此错误。但是，当通过超链接进行导航时，不会发生错误。

此问题仅在通过 Internet 访问应用程序时出现。匿名访问已启用。我正在使用 IIS6 和 windows server 2003。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T02:26:25.283

这是一个权限问题。您需要做两件事：1) 更新项目的 Web.config 以模拟，2) 更新文件夹权限以允许对计算机上的 IUSR 帐户进行读/写访问。以下是详细信息：

首先，将其添加到 system.web 节点中的 Web.config 中：

```
<identity impersonate="true"/> 
```

1.  现在，在 Windows 资源管理器中转到您网站的根文件夹，右键单击它，然后单击“属性”选项。

2.  然后转到安全选项卡。单击“要更改权限，请单击“编辑”文本旁边的“编辑...”按钮。

3.  您将看到组或用户名列表。在该框下方，单击“添加...”

4.  在下一个窗口“选择用户或组”中，单击左下角的“高级”按钮。

5.  单击右侧的“立即查找”按钮。在搜索结果中，查找名为 IUSR_MachineName 的帐户（其中 machine name 是您的计算机名称）。左键选择它，然后单击“确定”

6.  在“选择用户或组”窗口中单击“确定”

7.  在组或用户名列表中，找到您刚刚添加的 IUSR 帐户，并确保在底部的“修改”、“读取/执行”、“列出文件夹内容”和“读取”框都被选中为“允许”。注意：您不必使用 Modify，但如果您有任何写入文件系统的代码，则需要检查。

试一试。

出于信息的考虑，它从 localhost 工作而不是远程工作的原因是因为工作进程将您标识为经过身份验证的用户。上面的说明强制 IIS 使用“Internet 访客帐户”，然后您手动授予该帐户所需的权限。

One last final note, is that if you still have a problem, you might want to try giving the same access (using the steps above) to the 'Network' and 'Network Service' accounts. I don't think they matter (I'm pretty sure they were for Vista, but I could be wrong), but just in case.

# node.js - headers.host 被许多不属于我的域击中

> ID：12696007
> 
> 赞同：2
> 
> 时间：2012-10-02T18:22:49.143
> 
> 标签：node.js

我收到许多奇怪的请求，这些请求的`req.headers.host`值不是我的域。

```
var mc_domain = "mysubdomain.mydomain.com:8888";
var server = require('http').createServer(function (req, res) {
    if (req.headers.host !== my_domain) {
        console.log("not the host you are looking for " + req.headers.host);
        res.end();
        return;
    }
});
server.listen("8888"); 
```

控制台输出不是您要查找的主机 abc.advertising.com 不是您要查找的主机 parkaddress1.com 不是您要查找的主机 gotoinfo.info ...

发生了什么事，我能做些什么来阻止/减少这种情况？它只是“欢迎来到（野生）互联网（西部）”，还是“你需要防火墙”，或者其他一些愚蠢的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:49:07.790

无论是某人的 DNS 将另一个域名解析为您的 IP 地址还是域设置不正确。您可以使用 dig 之类的工具检查负责这些域的 DNS 服务器上的 DNS 设置（您可以使用 whois 获取它们）。

您可以将此视为问题或机会。如果我是你，我会为这些用户创建一个登陆页面并尝试销售我的产品/服务。

# objective-c - 是否可以从 NSData 或其他图像类型（CFImageRef、CIImage、UIImage）创建 ALAsset 对象？

> ID：12696028
> 
> 赞同：3
> 
> 时间：2012-10-02T18:24:35.843
> 
> 标签：objective-c, ios, uiimage, nsdata, alasset

是否可以从或其他图像类型（、、、）创建`ALAsset`对象？`NSData``CFImageRef``CIImage``UIImage`

我不想将所有应用程序图像保存到相机胶卷，但我希望能够将多张图像上传到 Walgreen 的 QuickPrints API，这是一个编译库，只需要`ALAssets`上传多张图像。

*编辑：我对 Walgreen 的 API/SDK 的理解不正确。有关详细信息，请参阅我的答案，如果您想在不使用 ALAssets 的情况下上传多张图片，则必须一次上传一张。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:30:16.350

来自文档：“一个 ALAsset 对象表示由照片应用程序管理的照片或视频。” 因此，如果您真的需要 ALAsset，您别无选择，只能保存数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T15:02:29.380

这个问题的真正答案是，虽然 Walgreen 的文档在询问时对此并不完全清楚，但购物车被跟踪为批次，限制为 100 张照片，而不是上传被视为批次。

只要您不将购物车发送到 Walgreen 的 API，并收到带有以下内容的结帐 URL：

```
 [checkoutSDK postCart]; 
```

它将以“批次”跟踪所有单个和多个上传，最大限制为 100，而不是在每次调用时覆盖以前的购物车：

```
 [checkoutSDK upload:someTypeOfImageData]; 
```

希望他们很快会在文档中添加更多详细信息，如果他们还没有的话。

# email - Informatica 中的电子邮件任务

> ID：12696030
> 
> 赞同：0
> 
> 时间：2012-10-02T18:24:40.437
> 
> 标签：email, informatica

有没有办法将您的更改的文本版本发送到电子邮件任务的映射？我有一个可以对表进行大约 10 次更改的映射。当此映射完成时，我想使用电子邮件任务向收件人发送所做更改的列表。

那可能吗？（如果没有，下一个最佳解决方案是将这些更改输出到 .txt 或平面文件，并将其发送给收件人？）无论哪种方式，有人可以提供有关如何完成此任务的详细说明吗？我只想知道在电子邮件表单中所做的更改。

谢谢

# javascript - 从一个 .js 文件引用到另一个

> ID：12696034
> 
> 赞同：0
> 
> 时间：2012-10-02T18:25:04.873
> 
> 标签：javascript, jquery

我参考外部路径使用 javascript 小书签

```
javascript:(function(){var s = document.createElement('script');s.src = 'http://192.168.0.100/my.js';document.body.appendChild(s);})(); 
```

如何创建对与 my.js 文件位于同一目录中的 jQuery.js 文件的引用？

我可以将 css 文件附加到这些文件中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:28:50.237

编写与您相同的代码`my.js`：

```
javascript: (function() {
    var s = document.createElement('script');
    s.src = 'http://192.168.0.100/my.js';
    document.body.appendChild(s);

    var s2 = document.createElement('script');
    s2.src = 'http://192.168.0.100/jquery.js';
    document.body.appendChild(s2);

    var l = document.createElement('link');
    l.rel = 'stylesheet';
    l.href = 'http://192.168.0.100/foo.css';
    l.type = 'text/css';
    document.body.appendChild(l);
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T18:31:51.917

```
javascript:(function(){
    var s = document.createElement('script');
    s.src = 'http://192.168.0.100/my.js';
    document.body.appendChild(s);
    // Additional js file
    s = document.createElement('script');
    s.src = '<jQuery location goes here>';
    document.body.appendChild(s);
    // CSS file
    s = document.createElement('link');
    s.rel = "stylesheet";
    s.href = "<location goes here>";
    s.type = "text/css";
    document.body.appendChild(s);
})(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T18:44:51.390

我认为这对于您的特定要求可能有点过头了，但我想指出[require.js](http://requirejs.org/)的存在，因为以后发现这个问题的人可能会感兴趣。

简而言之，它的作用是提供一些在页面中动态加载资源的工具，支持依赖项和命名空间（尽管您仍然必须包装您的模块，以免它们阻塞全局命名空间）。

这样，即使在（相当大的）应用程序中，您也可以轻松管理依赖项等。

# regex - matlab：正则表达式和拆分，并选择一些单元格

> ID：12696035
> 
> 赞同：3
> 
> 时间：2012-10-02T18:25:06.453
> 
> 标签：regex, string, matlab, split, format

我有以下输入：

```
>> data(1).Header
ans =
  AF051909 |392-397:CAGCTG| |413-418:CAGGTG| 
```

我需要将它们保存到单元格中`{'392-397', 'CAGCTG'; '413-418', 'CAGGTG';}`

所以我使用正则表达式来执行以下代码：

```
struKm(1).trueBinding = regexp(data(1).Header,'\s\||\:|\|','split'); 
```

这返回：

```
>> struKm(1).trueBinding
ans = 
  'AF051909'    '392-397'    'CAGCTG'    ''    '413-418'    'CAGGTG'    '' 
```

如您所见，有空单元格，我尝试了两个以找出它们存在的原因但失败了。

我也试图忽略这一点，并继续选择我的其余代码所需的单元格，即`'CAGCTG'`and `'CAGGTG'`。我有这个代码来接他们：

```
[r1,r2] = ismember(struKm(1).trueBinding,set) 
```

它返回零。

有人可以帮忙解决两个问题吗？

问候，A。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:01:09.733

我假设您只想从该单元阵列中提取仅有的两个核苷酸序列。如果是这种情况，这似乎可行：

```
atgc = @(str) (sum(lower(str)==97 | lower(str)==116 | lower(str) == 103 ...
    | lower(str) == 99)==numel(str)) && numel(str)~=0;
data(1).Header = 'AF051909 |392-397:CAGCTG| |413-418:CAGGTG|';
result1 = regexp(data(1).Header,'\s\||\:|\|','split');
results = result(cellfun(atgc,result1)) 
```

这给

```
results = 

    'CAGCTG'    'CAGGTG' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T19:15:02.787

您可以尝试匹配而不是拆分：

```
match = regexp(data(1).Header,'\|(.*?):(.*?)\|','tokens'); 
```

现在 match 将包含两个单元格数组：

```
>> match
match = 
    {1x2 cell}    {1x2 cell} 
```

您可以像这样访问：

```
>> match{1}
ans = 
    '392-397'    'CAGCTG'
>> match{2}
ans = 
    '413-418'    'CAGGTG' 
```

要将此元胞数组的元胞数组转换为您最初请求的形式，您可以执行以下操作：

```
>> struKm(1).trueBinding = cat(1,match{:})
struKm(1).trueBinding = 
    '392-397'    'CAGCTG'
    '413-418'    'CAGGTG' 
```

# xslt-2.0 - xslt 结果集中的唯一元素不是最后一个元素？

> ID：12696037
> 
> 赞同：0
> 
> 时间：2012-10-02T18:25:15.290
> 
> 标签：xslt-2.0

我有以下片段

```
<xsl:for-each select="book">
  <xsl:value-of select="title"/><xsl:if test="position() != last()">,</xsl:if>
</xsl:for-each> 
```

我希望它是一个以逗号分隔的书名列表。

当列表中没有书时，输出是正确的。当我有不止一本书时，这也是正确的。

但是，如果我只有一本书，它会在最后打印一个逗号。
当我将条件更改为仅在最后一个元素时打印逗号时，只有一本书的情况不会打印逗号。

因此，当只有一个元素时，它似乎不会被视为最后一个元素。我该如何处理？

示例 XML：看起来像这样

```
<booklist>
  <book>
    <title>My book</title>
    <author>Some author</author>
  </book>
  <book>
    <title>Another book</title>
    <author>Another author</author>
  </book>
</booklist> 
```

当列表中有两本书时，我得到

`My book, Another book`

当我删除第二个条目时，我得到

`My book,`

编辑：

我发现了这个问题。我使用 an`<xsl:apply-templates>`来选择一组数据，然后在每本书的另一个模板中进行位置检查。但是，`last()`指的是原始数据集，而不是过滤后的子集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:29:52.017

什么是“测试（）”？我想你想要“last()-1”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:57:45.967

以下内容在 Firefox 中对我来说很好（我没有逗号表示没有书，如果*n* > 0则表示*n本书的**n* -1 逗号）。我怀疑你的 XSLT 处理器坏了。

 **XSLT（“x.xsl”）：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" indent="yes" encoding="iso-8859-1" media-type="text/xhtml" doctype-public="-//W3C//DTD HTML 4.0//EN"/>
  <xsl:template match="/">
    <xsl:for-each select="root/book">
      <xsl:value-of select="title"/><xsl:if test="position() != last()">;</xsl:if>
    </xsl:for-each>
  </xsl:template>
</xsl:stylesheet> 
```

XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="x.xsl" type="text/xsl"?>
<root>
  <book>
    <title>A</title>
  </book>
  <book>
    <title>B</title>
  </book>
</root> 
```**

# visual-studio - 克隆 Visual Studio 2012 发布配置文件

> ID：12696038
> 
> 赞同：20
> 
> 时间：2012-10-02T18:25:18.433
> 
> 标签：visual-studio

如何复制 Visual Studio 发布配置文件？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-02T20:23:16.043

我找到的唯一解决方案是复制/粘贴/重命名`Properties\PublishProfiles`目录中的发布设置文件 (.pubxml)。

创建新发布配置文件时，会创建两个文件：.pubxml 和 .pubxml.user。.pubxml.user 文件仅包含适用于特定用户的一些设置，例如加密密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T17:11:13.040

选择发布网站后，它会打开并突出显示预览选项卡。单击左侧的配置文件链接，然后选择下拉框（我知道您在想什么......只有一个）选择，您可以设置其他配置文件。

# javascript - 我可以在 JavaScript 的 switch 语句中处理“未定义”的情况吗？

> ID：12696041
> 
> 赞同：55
> 
> 时间：2012-10-02T18:25:26.777
> 
> 标签：javascript, switch-statement

如果我将对象传递给 case 语句，并且存在未定义的情况，我可以处理这种情况吗？如果是，那怎么办？如果不可能，那么处理开关的未定义案例的最佳实践是什么？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-10-02T18:28:24.450

为. `case`_`undefined`

```
case undefined:
  // code
  break; 
```

或者，如果所有其他选项都已用尽，请使用`default`.

```
default:
  // code
  break; 
```

**注意：**为避免错误，`switch`必须*声明*提供给的变量，但可以有一个`undefined`值。参考这个[fiddle](http://jsfiddle.net/d4GpY/)并阅读更多关于[JavaScript 中已定义和未定义变量的](http://www.esqsoft.com/javascript-help/javascript-testing-defined-undefined-variables.htm)信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T20:26:51.037

好吧，最可移植的方法是`undefined`在你的闭包中定义一个新变量，这样你就可以完全避免有人`undefined = 1;`在代码库的某个地方（作为全局变量）执行的情况，这将完全破坏这里的大多数实现。

```
(function() {
    var foo;
    var undefined;

    switch (foo) {
        case 1:
            //something
            break;
        case 2:
            //something
            break;
        case undefined:
            // Something else!
            break;
        default:
            // Default condition
    }
})(); 
```

通过显式声明变量，您可以防止依赖于`undefined`变量全局状态的集成问题......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T18:31:38.157

如果您正在比较对象引用，但变量可能没有被赋值，那么它会像任何其他情况一样简单地使用`undefined`.

```
var obs = [
    {},
    {}
];

var ob = obs[~~(Math.random() * (obs.length + 1))];

switch(ob) {
    case obs[0]: 
        alert(0); 
        break;
    case obs[1]:
        alert(1); 
        break;
    case undefined: 
        alert("Undefined"); 
        break;
    default: alert("some unknown value");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T18:29:05.917

因为`undefined`真的只是另一个*值*（`'undefined' in window === true`），你可以检查一下。

```
var foo;

switch( foo ) {
    case 1:
        console.log('1');
        break;
    case 2:
        console.log('2');
        break;
    case 3:
        console.log('3');
        break;
    case undefined:
        console.log('undefined');
        break;
} 
```

工作刚刚好。

# iphone - 适用于 iOS / iPad 的 Google 地球、iPhone 对 LookAt 和相机标签的支持是否缺失？

> ID：12696045
> 
> 赞同：1
> 
> 时间：2012-10-02T18:26:11.270
> 
> 标签：iphone, ios, ipad, kml, google-earth

我开发了一个从内部数据库中提取空间数据并生成 KML 文件的应用程序。它由一些样式、一个文档级 LookAt 标记（用于初始定位）和几百个带有一些自定义 CDATA 的地标组成。当我将它导入 PC 应用程序时，它运行良好，最初缩放到正确的位置和高度。当我使用 Apple Google Earth 应用程序加载相同的值时，它似乎忽略了 LookAt 标签，将自己定位在 1500 英尺的地标中间。下面是实际的 LookAt 标记，其中 xxx 代替了有效的纬度和经度值。

```
 <LookAt id="LastItem">
       <longitude>xxx</longitude>
       <latitude>xxx</latitude>
       <altitudeMode>absolute</altitudeMode>
       <altitude>5000</altitude>
       <heading>0</heading>
       <tilt>60</tilt>           
       <range>25000</range>
    </LookAt> 
```

这是不是 Apple 版本的应用程序不支持的功能？我尝试过使用具有相同效果的相机标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T01:21:49.710

适用于 iOS 设备的原始 Google 地球应用程序确实支持文档级别`<LookAt>`，或者`<Camera>`- 但是在某些时候它会停止这样做:( 相反，它现在默认为位于正上方 500m（或可能 ft）并俯视所有中心点的视图在`<Placemarks>`第一个 .kml 加载

# jquery - 将类添加到当前之上

> ID：12696049
> 
> 赞同：0
> 
> 时间：2012-10-02T18:26:42.513
> 
> 标签：jquery

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:30:50.093

# ruby-on-rails - 根据数据库中的先前字段为 has_many 关系构建新字段

> ID：12696054
> 
> 赞同：0
> 
> 时间：2012-10-02T18:27:10.670
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我正在为现场活动商品销售创建应用程序。我有一个inventory_events 表，每个inventory_event 代表库存随时间的变化。由于我的应用程序的性质，我需要跟踪 1 个主库存（所有库存物品）和每个事件的库存。

基本上这就是我的流程的样子：

*   *假设今天是活动日*
*   为在活动中出售的每个 inventory_item 创建新的 inventory_events
*   这些inventory_events被称为“签到”，他们正在将项目签入事件
*   这会创建一个负的 inventory_event 并且这些项目随后会从主库存中删除
*   活动完成后，剩余的库存会从活动中“签出”
*   这将创建一个正的 inventory_event 并将剩余的项目添加到库存中
*   这 2 笔交易的净 qty_change 成为我在此活动中售出的净物品

目前这是我设置它的方式：

*   每个事件 has_many :inventory_events
*   创建inventory_events时，我通过事件更新表单中的fields_for更新它
*   这适用于检查项目

我的问题从检查项目开始（在事件之外但进入系统）

*   设置与上面相同，除了我需要能够为与该特定日期的事件关联的每个结帐事件构建 1 个inventory_event

**我的问题是：**如何为之前与当天事件关联的每个 inventory_event 构建 1 个新的 field_for inventory 事件？我知道我可以只计算事件的数量，然后为每个事件构建 1，但我该怎么做以及维护一些信息（item_id）所以我能够知道我正在为我检查过的每个项目构建一个签入事件这一天出去？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:58:39.580

您可以使用先前已知的数据开始构建表单。假设你有

```
class Event
  has_many :check_ins # STI subclass of InnventoryEvent
  has_many :check_outs # same
end 
```

然后，您可以预先填充结帐列表，其中每个对应于同一事件的已注册 check_ins 之一。最后你不会检查以前没有检查过的东西......

```
class EventCheckOutController

  def new

    @event = Event.find(params[:event_id])
    @event.check_ins.each do |ci|
      @event.check_outs.build(:item_id => ci.item_id, :amount => ci.amount)
    end

    # render....
  end
end 
```

因此，该对象将具有所有结帐，也预设了与最初结帐相同的金额，您可以在之后从表单中更改它。

# java - Java 7 SE 是否支持 EJB？

> ID：12696060
> 
> 赞同：7
> 
> 时间：2012-10-02T18:27:28.253
> 
> 标签：java, jakarta-ee

如果我想要 EJB 3.0 支持并想要运行 Java 7，我需要 Java EE 还是可以坚持使用 SE？

在过去（许多 JDK 版本之前），需要“J2EE”版本的 JDK 来运行 EJB。看来这不再是真的了。请指教。

更新：我应该提到该应用程序将在 Oracle WebLogic 10.3.6 中运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T18:29:47.683

不，这是不变的。EJB 是 Java EE 的一部分，而不是 Java SE 的一部分。这可能永远不会改变，因为对 EJB 的基础架构支持很大（并且不太可能包含在 Java SE 中）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T18:36:09.160

EJB 是 Java EE 的一部分。但是，如果您想要的是 JPA，即使 API 包含在 Java EE（[这里是 API 文档](http://docs.oracle.com/javaee/7/api/)）中，您也不再需要用于 JPA 的 Java EE 应用程序服务器（与 EJB 实体 bean 的情况不同）。JPA 可以与 Java SE 一起使用。

如果您在 Weblogic 中运行它，那么您可以访问 Java EE，所以我不明白问题的重点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T18:29:17.053

为了运行 EJB，您需要一个 EJB 容器（例如 Glassfish），它不包含在 Java SE 7 中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T18:29:32.620

我认为你错了。EJB 仍然只是 Java EE 规范的一部分，而不是 Java SE。如果您查看[Java SE API](http://docs.oracle.com/javase/7/docs/api/)，则没有对 EJB 的引用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T07:32:27.460

您**可以**在具有 EJB 的 3.1 Lite 容器的非 Java EE 应用程序服务器中使用 EJB - [http://docs.oracle.com/javaee/6/api/javax/ejb/embeddable/EJBContainer.html](http://docs.oracle.com/javaee/6/api/javax/ejb/embeddable/EJBContainer.html)。
所有符合 Java EE 6 的应用程序服务器都必须能够以嵌入式模式运行。

然而，这不是 Java SE 7 的特性（它在 Java SE 6 中运行良好）而是 Java EE 6 API，所以如果你坚持使用 EJB 3.0，那么你就需要使用应用程序服务器或一些特定于实现者的特性.

# javascript - 读取列表项 Sharepoint 2010 客户端对象模型

> ID：12696061
> 
> 赞同：5
> 
> 时间：2012-10-02T18:27:29.227
> 
> 标签：javascript, sharepoint, sharepoint-2010, sharepoint-api

我有一个存储图像 URL 的列表，我正在尝试读取项目列表并在页面上显示图像。为此，我编写了如下脚本......

```
<script type="text/javascript">
    function ViewItem()
    {
        var myQueryString = '<Query><Where><Eq><FieldRef Name="Anchor" /><Value 

Type="Boolean">1</Value></Eq></Where></Query>'; 

        var context = new SP.ClientContext.get_current();
        var web = context.get_web();
        var list = web.get_lists().getByTitle('AnchorImageList');
        var myquery = new SP.CamlQuery();

        myquery.set_viewXml(myQueryString); 

        myItems = list.getItems(myquery);

        context.load(myItems, 'Include(Title,ImageURL)');
        context.executeQueryAsync(Function.createDelegate(this, this.success), 

Function.createDelegate(this, this.failed));
    }
    function success() 
    {

        var LinkURL= "";
        var ImageURL="";
        var ListEnumerator = this.myItems.getEnumerator();
        while(ListEnumerator.moveNext())
        {
            var currentItem = ListEnumerator.get_current();
            LinkURL = currentItem.get_item('Title') ;
            ImageURL= currentItem.get_item('ImageURL');
            document.write('<img src="' + ImageURL+ '"+>');
            alert(LinkURL);

        }

    }
    function failed(sender, args) 
    {
        alert("failed. Message:" + args.get_message());
    }
</script>
<a href="#" onclick="Javascript:ViewItem();">View Items</a> 
```

在我的 CAML 查询中，我试图过滤标记为“锚点？”（是/否列）的项目。

但即使我标记了一些不显示的项目，我也看到了所有结果。我在这里做错了什么。请有人帮助我。此外，在页面上加载图像后，页面仍然显示轮子，就好像它正在处理某些东西一样。我需要为此做些什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:17:33.063

试试这个：

```
<View>
  <Query>
    <Where>
      <Eq>
        <FieldRef Name="Anchor" />
        <Value Type="Boolean">1</Value>
      </Eq>
    </Where>
  </Query>
</View> 
```

如果它不适合您，请按照以下步骤操作：

1.  使用标准功能创建列表视图。
2.  在 SharePoint Designer 中打开它，然后从代码中复制 CAML 查询。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T16:23:40.843

从`Query`存储在`myQueryString`. 运行查询时会隐式添加标签。

以前也被我绊倒过。它的阴险之处在于查询永远不会彻底失败。有时有效，有时无效，调试起来很痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T15:31:57.077

我发现如果你在 CAML 查询中只使用单引号，它会起作用。出于某种原因，混合双引号和单引号会增加查询。希望有帮助。

# nginx - Nginx 重定向除了我的 IP 地址

> ID：12696063
> 
> 赞同：0
> 
> 时间：2012-10-02T18:27:41.500
> 
> 标签：nginx

我所做的只是使用以下命令将所有用户（除了我的 IP 地址）重定向到“站点关闭”页面

```
 location / {
   rewrite (.*) /sitedown.php redirect;
    allow 94.12.147.139;
    index index.html index.php;
    try_files $uri $uri/ @handler;
    expires 30d;
} 
```

它重定向很好，但也不允许我的 IP 访问该站点。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:45:38.977

以下应该有效：

```
location / {
  #this is the allow/deny/redirect bit
  allow 94.12.147.139;
  deny all;
  error_page 403 sitedown.php;  

  #regular site config when not denied
  index index.html index.php;
  try_files $uri $uri/ @handler;
  expires 30d; 
}

location /sitedown.php {allow all;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-19T18:03:26.347

这个怎么样

```
 location / {

    if($remote_addr != Your Ip) {
        rewrite ^ http://www.domain.com/sitedown.php;
    }

    index index.html index.php;

    try_files $uri $uri/ @handler;

    expires 30d;

} 
```

# jquery - jQuery 未从移动滑块控件捕获更改事件

> ID：12696072
> 
> 赞同：0
> 
> 时间：2012-10-02T18:28:15.680
> 
> 标签：jquery, html, jquery-mobile

当用户调整滑块时，我有一个屏幕执行百分比变化计算。

最简单的形式可以在这里查看：http: [//jsfiddle.net/4Bgx7/2608/](http://jsfiddle.net/4Bgx7/2608/)

当我在我的页面上实现此代码时，只有在我插入警告框时计算才会起作用。

这告诉我我的设计有问题，但我无法查明问题所在。

失败的代码在[此处的文本文件](http://www.o1solution.com/MyPage.html.txt)中。

将其在本地保存为“html”并在浏览器（IE、FF 或 Chrome）中打开

当您单击“最大快照”时，您将看到不起作用的滑块。

关闭浏览器并取消注释以下行：

```
//window.alert('uncomment me and I will work'); 
```

打开浏览器时，单击“最大快照”，再次刷新屏幕，然后单击滑块。它会起作用的。

注释警告框行并保存文件。刷新页面：它会工作。

关闭浏览器，重命名 html 文件，打开它：它不起作用。

如果上面的链接不起作用，这是html：

```
<html>
    <head>
        <title>Welcome</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0-rc.1/jquery.mobile-1.2.0-rc.1.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.1.min.js"></script>
        <style media="screen" type="text/css">
            .number-block
            {
                text-align: right;
                padding-right: 2px;
            }

            .mobile-grid-header
            {
                background-color: darkgray;
                color: black;
                text-shadow:    none;
                font-weight: bold;
            }

            .original-value
            {
                /*visibility: hidden;
                position: absolute;*/
                color:red;
                background-color: yellow;
            }
    </style>
        <script src="http://code.jquery.com/mobile/1.2.0-rc.1/jquery.mobile-1.2.0-rc.1.min.js"></script>
        <script>
            $(document).ready(function()
                  {
                      welcome_doc_ready();           
                  });

function welcome_doc_ready()
{
    //window.alert('uncomment me and I will work');
    $('#_singleRepMaxSlider').change(function() {
        var percentageValue    =    $('#_singleRepMaxSlider').val() / 100;
        $('.original-value').each(function () {
            var newValue = Math.floor(percentageValue * $(this).html());
            var checkDigit = newValue % 10;
            var newFactor = 0;
            //TODO:  Probably a bit overkill to round to nearest 5, but works
            switch(checkDigit)
            {
                case 0:
                case 1:
                case 2:
                case 3:
                    newFactor = 0;
                    break;
                case 4:
                case 5:
                case 6:
                    newFactor = 5;
                    break;
                case 7:
                case 8:
                case 9:
                    newFactor = 10;
                    break;
            }
            newValue    =    (Math.floor(newValue/10) * 10) + newFactor;
            $(this).next().html(newValue);
      });
    }
    );
}
        </script>
    </head>
    <body>
        <!-- Start Main -->
        <div data-role="page" id="Main">
            <div data-role="header">
    </div>
            <!-- /header -->
            <div data-role="content">
                <p>
                    <a href="#MaxSnapshot" data-role="button">Max Snapshot</a>
                </p>
            </div>
            <!-- /content Main -->
            <div data-role="footer">
                <h4>Footer</h4>
            </div>
            <!-- /footer Main -->
        </div>
        <!-- /page Main-->
        <!-- MaxSnapshot -->
        <div data-role="page" id="MaxSnapshot">
            <div data-role="header">
                <h1>Max Snapshot</h1>
                <a href="#Main" data-icon="home" data-iconpos="notext" data-direction="reverse">Home</a>
            </div>
            <!-- /header -->
            <div data-role="fieldcontain">
                <label for="_singleRepMaxSlider">Change Single-Rep Max Percentage:</label>
                <input type="range" id="_singleRepMaxSlider" value="100" min="0" max="100" step="5"/>
            </div>
            <div data-role="fieldcontain">
                <p>
                    <h3>Single Rep Max</h3>
                    <div class="ui-grid-b" data-theme="e">
                        <div class="ui-block-a mobile-grid-header">
                            <b>Exercise</b>
                        </div>
                        <div class="ui-block-b mobile-grid-header">
                            <b>Lift Date</b>
                        </div>
                        <div class="ui-block-c  mobile-grid-header number-block">
                            <b>Weight(#)</b>
                        </div>
                        <div class="ui-block-a ">Back Squat</div>
                        <div class="ui-block-b ">9/19/2012</div>
                        <div class="ui-block-c   number-block">
                            <div class="original-value">185</div>
                            <div class="calculated-value">185</div>
                        </div>
                        <div class="ui-block-a alternate-row">Deadlift</div>
                        <div class="ui-block-b alternate-row">9/19/2012</div>
                        <div class="ui-block-c  alternate-row number-block">
                            <div class="original-value">205</div>
                            <div class="calculated-value">205</div>
                        </div>
                        <div class="ui-block-a ">Jerk Clean</div>
                        <div class="ui-block-b ">9/21/2012</div>
                        <div class="ui-block-c   number-block">
                            <div class="original-value">135</div>
                            <div class="calculated-value">135</div>
                        </div>
                        <div class="ui-block-a alternate-row">Shoulder Press</div>
                        <div class="ui-block-b alternate-row">9/19/2012</div>
                        <div class="ui-block-c  alternate-row number-block">
                            <div class="original-value">115</div>
                            <div class="calculated-value">115</div>
                        </div>
                    </div>
                </p>
            </div>
            <a href="#Main" data-direction="reverse" data-role="button" data-inline="true">Return</a>
        </div>
        <!-- /page, MaxSnapshot -->
    </body>
</html> 
```

* * *

# 更新

我创建了一个更好的示例来重现此问题。这个问题的答案可以[在文档](http://jquerymobile.com/test/docs/api/events.html)中找到：

> 在 jQuery 中学习的第一件事是调用 $(document).ready() 函数中的代码，以便在加载 DOM 后立即执行所有内容。但是，在 jQuery Mobile 中，Ajax 用于在您导航时将每个页面的内容加载到 DOM 中，并且 DOM 就绪处理程序仅针对第一页执行。要在加载和创建新页面时执行代码，您可以绑定到 pageinit 事件。此事件在本页底部有详细说明。

这是一个更简化的示例，其中的解决方案已注释掉：

```
<html>
    <head>
        <title>Welcome</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="UTF-8">
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
        <script>

                //Bad Implementation:  This is what I originally had:
                $(document).ready(function()
                  {
                       //window.alert('uncomment me and I will work');
                        $('#_mainpageSlider').change(function() {
                            $('#_mainpageOutput').val($('#_mainpageSlider').val());
                        }
                        );
                        $('#_testpageSlider').change(function() {
                            $('#_testpageOutput').val($('#_testpageSlider').val());
                        }
                        );
                  });

                //Correct Implementation:  Comment or remove the above and uncomment the html below
                  /*($( '#TestPage' ).live( 'pageinit',function(event)
                  {
                        $('#_testpageSlider').change(function() {
                            $('#_testpageOutput').val($('#_testpageSlider').val());
                        }
                        );
                  });*/
        </script>
    </head>
    <body>
        <!-- Start Main -->
        <div data-role="page" id="Main">
            <div data-role="header">
    </div>
            <!-- /header -->
            <div data-role="content">
                <p>
                    <a href="#TestPage" data-role="button">Test Page</a>
                </p>
                <div data-role="fieldcontain">
                    <label for="_mainpageSlider">Change Slider:</label>
                    <input type="range" id="_mainpageSlider" value="100" min="0" max="100" step="5"/>
                </div>
                <p>
                <div data-role="fieldcontain">
                    <label for="_mainpageSlider">Populate when Slider changes:</label>
                    <input id="_mainpageOutput" value=""/>
                </div>
                </p>
            </div>
            <!-- /content Main -->
            <div data-role="footer">
                <h4>Footer</h4>
            </div>
            <!-- /footer Main -->
        </div>
        <!-- /page Main-->
        <!-- TestPage -->
        <div data-role="page" id="TestPage">
            <div data-role="header">
                <h1>Test Page</h1>
                <a href="#Main" data-icon="home" data-iconpos="notext" data-direction="reverse">Home</a>
            </div>
            <!-- /header -->
            <div data-role="fieldcontain">
                <label for="_testpageSlider">Change Slider:</label>
                <input type="range" id="_testpageSlider" value="100" min="0" max="100" step="5"/>
            </div>
            <div data-role="fieldcontain">
                <label for="_testpageOutput">Populate when Slider changes:</label>
                <input id="_testpageOutput" value=""/>
            </div>

            <a href="#Main" data-direction="reverse" data-role="button" data-inline="true">Return</a>
        </div>
        <!-- /page, TestPage -->
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:17:18.183

好吧，我想我明白了。.ready() 函数让你搞砸了。您应该将所有脚本移动到文档的末尾而不是头部，然后通过使用调用welcome_doc_ready()

```
$('#MaxSnapshot').live('pageinit',function(event){
    welcome_doc_ready();
}); 
```

代替

```
$(document).ready(function() {
    welcome_doc_ready();           
}); 
```

Here, you're basically checking to make sure the Maxsnapshot div is good before you execute welcome_doc_ready(). Hope this helps.

# c++ - c++ ofstream(someVariable)初始化

> ID：12696078
> 
> 赞同：1
> 
> 时间：2012-10-02T18:28:28.570
> 
> 标签：c++

所以我试着这样做：

```
#include <iostream>//For cout/cin
#include <fstream> //For ifstream/ofstream

using namespace std;

int main()
{
    string types[] = {"Creativity", "Action", "Service"};
    for(int i = 0; i < sizeof(types)/sizeof(string); i++) {
        string type = types[i];
        string filename = type + ".html";
        ofstream newFile(filename);
        //newFile << toHTML(getActivities(type));
        newFile.close();
    }
    return 0;
} 
```

我遇到了错误。我是 C++ 新手，所以我不知道该尝试什么，或者这是否可能（当然是……）。我尝试了以下方法，但这实际上只是在黑暗中刺伤并没有帮助：

```
#include <iostream>//For cout/cin
#include <fstream> //For ifstream/ofstream

using namespace std;

int main()
{
    string types[] = {"Creativity", "Action", "Service"};
    for(int i = 0; i < sizeof(types)/sizeof(string); i++) {
        string type = types[i];
        //Attempting to add const..
        const string filename = type + ".html";
        ofstream newFile(filename);
        //newFile << toHTML(getActivities(type));
        newFile.close();
    }
    return 0;
} 
```

我的意思是，如果我执行 `ofstream newFile("somefile.html");

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T18:37:19.053

原始 IOstream 库没有构造函数采用`std::string`. 唯一支持的类型是`char const*`. 您可以`char const*`从`std::string`using中获得 a `c_str()`：

```
std::string name("whatever");
std::ofstream out(name.c_str()); 
```

字符串文字的类型不是类型`std::string`，而是类型`char const[n]`，其中`n`是字符串中的字符数，包括终止的空字符。

在 C++ 2011 中，文件流类得到了改进，也`std::string`可用于预期字符串的位置。

# algorithm - 使无向图断开连接的最小成本

> ID：12696080
> 
> 赞同：0
> 
> 时间：2012-10-02T18:28:34.140
> 
> 标签：algorithm, graph

使无向加权（正权重）图断开连接的最小成本是多少。

我的意思是我必须找出那些移除与图形断开连接的边，并且它们的成本最小化。

我有以下想法...

1.找出图中的所有桥梁。那么最小重量的桥边将是ans。

2.如果没有桥意味着所有节点都在一个循环中（我不确定）。然后我根据它们的权重对边缘进行排序，两个最小边缘权重的总和将是 ans。

该图没有自环。

这个算法正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:06:13.513

这个问题看起来与图中“最小切割”的研究回答的问题相同。我建议在[此处](http://valis.cs.uiuc.edu/~sariel/teach/2002/a/notes/min_cut.pdf)和[此处](http://valis.cs.uiuc.edu/~sariel/teach/2004/b/webpage/lec/17_mincut.pdf)阅读以下内容，以从图论的角度了解有关它为何起作用的更多信息-该链接还提供了一些伪代码。

关于您提出的算法，在图中找到桥可能会很棘手。您必须检查端点及其局部结构以确认桥的存在。使用边缘收缩可能更容易实现。

# python - 为什么在 Python 中发出 HTTP 请求时无法查看标签的更新

> ID：12696081
> 
> 赞同：0
> 
> 时间：2012-10-02T18:28:35.277
> 
> 标签：python, httplib

我有这个代码：

```
def on_btn_login_clicked(self, widget):
    email = self.log_email.get_text()
    passw = self.log_pass.get_text()
    self.lbl_status.set_text("Connecting ...")
    params = urllib.urlencode({'@log_email': email, '@log_pass': passw, '@action': 'login', '@module': 'user'})
    headers = {"Content-type": "application/x-www-form-urlencoded","Accept": "text/plain"}
    conn = httplib.HTTPConnection("website.com")
    self.lbl_status.set_text("Logging in ...")
    conn.request("POST", "/ajax.php", params, headers)
    response = conn.getresponse()
    print response.status
    self.lbl_status.set_text("")
    data = response.read()      
    print data
    conn.close() 
```

在`self.lbl_status`请求完成之前不会更改，因此由于最后一个`set_text`功能，它不会显示任何内容。

为什么会发生这种情况，以及如何避免/解决这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:55:00.410

在主循环运行之前，Gtk 不会更新任何内容。这意味着它首先进行所有更改，并且只有在它们全部完成后才更新。这是因为它希望所有回调都是原子的（在可忽略不计的时间内完成）。回调不应使用阻塞调用，因为这意味着接口将冻结。

这里有两种可能的解决方案。最好是在响应准备好时注册一个新的回调，然后返回主循环。然而，这可能并不容易。一个肮脏的解决方法是强制主循环在进行阻塞调用之前处理挂起的事件。然后它将更新标签。你可以这样做

```
while gtk.events_pending ():
    gtk.main_iteration (False) 
```

但正如我所写，不从回调中调用任何阻塞函数要干净得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:19:14.563

下面是一个简单下载器的工作示例，仅用于说明目的。如果您希望您的 GUI 在执行一些长时间运行或阻塞操作时响应并且不冻结，则需要使用多线程。我根据[这个堆栈溢出问题](https://stackoverflow.com/questions/685224/separate-threads-in-pygtk-application)和这篇优秀的文章[Using threads in PyGTK](http://unpythonic.blogspot.com/2007/08/using-threads-in-pygtk.html)把这个例子放在一起。Ubuntu iso 的默认 url 需要一段时间才能下载，并且应该提供一个很好的演示。您可以在提示时输入您想要的任何 url，它将下载文件并将其保存在当前目录中。

```
from threading import Thread
import time
import gtk, gobject, urllib

URL = 'http://releases.ubuntu.com//precise/ubuntu-12.04.1-desktop-i386.iso'

def download(url):
    filename = url.split('/')[-1]
    out = open(filename, 'wb')
    gobject.idle_add(label.set_text, "connecting...")
    f = urllib.urlopen(url)
    buffer = f.read(1024)
    counter = 0
    while buffer:
        counter += len(buffer)
        out.write(buffer)
        msg = "downloaded {0:,} bytes".format(counter)
        gobject.idle_add(label.set_text, msg)
        buffer = f.read(1024)
    out.close()
    gobject.idle_add(label.set_text, "download complete")

def clicked(button):
    url = entry.get_text()
    Thread(target=download, args=(url,)).start()

gtk.gdk.threads_init()
win = gtk.Window()
win.set_default_size(400, 100)
entry = gtk.Entry()
entry.set_text(URL)
label = gtk.Label("Press the button")
button = gtk.Button(label="Download")
button.connect('clicked', clicked)

box = gtk.VBox()
box.pack_start(entry)
box.pack_start(label)
box.pack_start(button)
win.add(box)

win.show_all()

gtk.main() 
```

# ios - 仅在 UIWebView 中显示网站的一部分

> ID：12696083
> 
> 赞同：0
> 
> 时间：2012-10-02T18:28:40.507
> 
> 标签：ios, ipad, uiwebview

我正在构建一个 iPad 应用程序，它只需要网页的中间部分在 UIWebView 中可见。（整个页面没有页眉和页脚）

我需要展示的部分是有人输入信息并点击提交的表单。如果我将 UIWebView 定位为仅显示中间部分，则当我单击文本区域时，它会向上/向下滚动以在 iPad 键盘顶部显示正确的文本区域。这会导致显示页眉/页脚。

在进入 UIWebView 之前修改源代码似乎也不起作用，因为表单必须在之后工作。（就像我需要能够点击提交并让它正常工作）

我想知道是否可以在 UIWebview 的顶部和底部添加一个视图，以便它覆盖页眉和页脚？

任何帮助将非常感激。我在任何地方都找不到适用于这种情况的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:53:10.260

想通了——我能够在 UIWebView 的滚动视图上添加一个视图

```
// Create new view
UIView* view = [[UIView alloc] initWithFrame:CGRectMake(0,0,768,200)];

// Add to scrollView so that the added view scrolls with the UIWebView
[webView.scrollView addSubview:view]; 
```

# javascript - Javascript 来测试正则表达式的值和以后的值（如果需要）

> ID：12696084
> 
> 赞同：2
> 
> 时间：2012-10-02T18:28:47.463
> 
> 标签：javascript, jquery, regex

在我的网页中，我有一个货币格式的总数，可以是正数或负数。

```
Example $5.50 or $(5.50). 
```

该值只不过是跨度标记中包含的文本。我正在尝试读取该值并将其转换为 js 中的数值，然后我可以对其执行数学计算。

```
Example $5.50 -> 5.50 and $(5.50) -> -5.50 
```

我编写了以下正则表达式脚本来处理将负货币值转换为数值

```
var regex = /^\$*?\((\d+(\.)?(\d+)?)\)$/ 
```

我有以下方法来处理检索和转换值。

```
//retrieve value from template
$.fn.fieldVal = function () {
    var val;

    if ($(this).is(':input')) {
        val = $(this).val();
    } else {
        val = $(this).text();
    }    

    return convertCurrencyToNumeric(val);

};

//convert currency to numeric value
function convertCurrencyToNumeric(n) {
    var regex = /^\$*?\((\d+(\.)?(\d+)?)\)$/

    n = n.replace(/[^0-9-\.]/g, '');

    if(isNumber(n)) {
        n = parseFloat(n);
        return n;
    }
    return 0;
}

//test if numeric
function isNumber(n) {
    return !isNaN(parseFloat(n)) && isFinite(n);
} 
```

我不清楚如何首先测试该值是否为负，其次如果为负，则将该值替换为正则表达式结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:52:11.840

注意：否定类可以真正解决正则表达式问题，IMO。不，我不在乎 JSLint 对此事的看法。使用 '。' 缓慢而笨拙，为特定的 lint gotcha 给出的理由是荒谬的。

```
function convertCurrency(str){
    var negMatch = ( str.match(/(^\$-|^-\$|^$\()/g) ), //handles -$5.05 or $-5.05 too
    str = str.replace(/[^\d.]/g,''), //anything that's not a digit or decimal point
//gotcha, Europeans use ',' as a decimal point so there's a localization concern
    num = parseFloat(str);

    if(negMatch){ num *= -1; }

    return num;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:50:09.017

```
function getMoney (str) {
   var amount = str.replace(/(\$)(\()?(\d+\.\d{0,2})\)?/, 
      function (match, dollar, neg, money) {
         var negSign = neg ? "-" : ""; 
         return negSign + money;
      }
   );
   return parseFloat(amount);
}

var str1 = "$(5.50)";
var str2 = "$5.50";

console.log( getMoney(str1) );
console.log( getMoney(str2) ); 
```

# c++ - C++ 框架测试应用程序的链接器错误

> ID：12696085
> 
> 赞同：0
> 
> 时间：2012-10-02T18:28:49.350
> 
> 标签：c++, xcode, linker, static-libraries, linker-errors

我想使用[AA+ 天文类框架](http://www.naughter.com/aa.html)，我只想让示例应用程序运行（它包含在[框架 zip 文件](http://www.naughter.com/download/aaplus.zip)中`AATest.cpp`）

我打开 Xcode，为 C++ 应用程序创建了一个新项目，然后将`AA+.h`和`stdafx.h`文件添加到项目中，因为它们包含在内。然后，当我构建项目时，我收到很多链接器错误，因为它似乎无法找到与某些示例应用程序代码关联的符号。

我尝试在 Xcode 的 Build 设置中将路径`AA+.h`和`stdafx.h`文件添加到库和标头搜索路径，但这并没有改变任何东西，错误仍然存​​在。

我究竟做错了什么？这是我第一次在 Xcode 中使用 C++。我是否必须首先将 AA+ 框架构建为静态库，或者我可以以这种方式包含它吗？

通过 Xcode 编译：

```
Ld /Users/me/Library/Developer/Xcode/DerivedData/AAPlus-bzgonjwgqlpgescueekcoobljdyf/Build/Products/Debug/AAPlus normal x86_64
    cd "/Users/me/Downloads/aaplus astronomy c++/Example/AAPlus"
    setenv MACOSX_DEPLOYMENT_TARGET 10.7
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch x86_64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk -L/Users/me/Library/Developer/Xcode/DerivedData/AAPlus-bzgonjwgqlpgescueekcoobljdyf/Build/Products/Debug -F/Users/me/Library/Developer/Xcode/DerivedData/AAPlus-bzgonjwgqlpgescueekcoobljdyf/Build/Products/Debug -filelist /Users/me/Library/Developer/Xcode/DerivedData/AAPlus-bzgonjwgqlpgescueekcoobljdyf/Build/Intermediates/AAPlus.build/Debug/AAPlus.build/Objects-normal/x86_64/AAPlus.LinkFileList -mmacosx-version-min=10.7 -stdlib=libc++ -o /Users/me/Library/Developer/Xcode/DerivedData/AAPlus-bzgonjwgqlpgescueekcoobljdyf/Build/Products/Debug/AAPlus 
```

错误：

```
Undefined symbols for architecture x86_64:
  "CAANutation::TrueObliquityOfEcliptic(double)", referenced from:
      GetSolarRaDecByJulian(double, double&, double&) in main.o
      GetLunarRaDecByJulian(double, double&, double&) in main.o
  "CAADynamicalTime::DeltaT(double)", referenced from:
      GetSolarRaDecByJulian(double, double&, double&) in main.o
  "CAARiseTransitSet::Calculate(double, double, double, double, double, double, double, double, double, double)", referenced from:
      GetSunRiseTransitSet(double, double, double) in main.o
      GetMoonRiseTransitSet(double, double, double) in main.o
  "CAAMoonIlluminatedFraction::PhaseAngle(double, double, double)", referenced from:
      GetMoonIllumination(double, double&, double&, double&) in main.o
  "CAAMoonIlluminatedFraction::PositionAngle(double, double, double, double)", referenced from:
      GetMoonIllumination(double, double&, double&, double&) in main.o
  "CAAMoonIlluminatedFraction::IlluminatedFraction(double)", referenced from:
      GetMoonIllumination(double, double&, double&, double&) in main.o
  "CAAMoonIlluminatedFraction::GeocentricElongation(double, double, double, double)", referenced from:
      GetMoonIllumination(double, double&, double&, double&) in main.o
  "CAACoordinateTransformation::Ecliptic2Equatorial(double, double, double)", referenced from:
      GetSolarRaDecByJulian(double, double&, double&) in main.o
      GetLunarRaDecByJulian(double, double&, double&) in main.o
  "CAASun::ApparentEclipticLatitude(double)", referenced from:
      GetSolarRaDecByJulian(double, double&, double&) in main.o
  "CAASun::ApparentEclipticLongitude(double)", referenced from:
      GetSolarRaDecByJulian(double, double&, double&) in main.o
  "CAADate::CAADate(double, bool)", referenced from:
      PrintTime(double, char const*) in main.o
  "CAADate::CAADate(long, long, double, bool)", referenced from:
      PrintSunAndMoonInfo(int, int, int, double, double) in main.o
  "CAAMoon::EclipticLatitude(double)", referenced from:
      GetLunarRaDecByJulian(double, double&, double&) in main.o
  "CAAMoon::EclipticLongitude(double)", referenced from:
      GetLunarRaDecByJulian(double, double&, double&) in main.o
  "CAADate::Get(long&, long&, long&, long&, long&, double&) const", referenced from:
      PrintTime(double, char const*) in main.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:14:49.953

## 代码

您可以在 XCode 中执行以下操作：

1.  创建一个新项目`AATest`
2.  将`aaplus/`包含框架代码的文件夹复制到项目文件夹中
3.  在您的 XCode 项目中，按住`control`并单击**Source**
4.  选择**添加 > 现有文件...**
5.  选择`aaplus/`文件夹并将其**添加**到您的项目中
6.  建造。

可执行文件将在`build/Debug/AATest`.

## 选择

由于项目包含一个文件`CMakeLists.txt`，您可以使用`cmake`. 在您的框架文件夹中，在终端上运行以下命令：

```
mkdir build/
cd build/
cmake ..
make 
```

# cocos2d-iphone - 使用应用内购买时无法隐藏 CCMenuItem

> ID：12696094
> 
> 赞同：0
> 
> 时间：2012-10-02T18:29:33.700
> 
> 标签：cocos2d-iphone, in-app-purchase, ccmenuitem

这次我想问一下是否有人在cocos2d中禁用按钮（CCMenuItemImage）有这种奇怪的问题。我已连接应用内购买，购买完成后触发以下功能

```
 - (void)productPurchased:(NSNotification *)notification {

        [NSObject cancelPreviousPerformRequestsWithTarget:self];
        waitingForStore = FALSE;
        [loop setVisible:FALSE];
       [buyItem setVisible:FALSE];
       //  setAccessibilityElementsHidden:YES];

        NSString *productIdentifier = (NSString *) notification.object;
        NSLog(@"Purchased: %@", productIdentifier);

    }

waitingForStore = FALSE;
 [loop setVisible:FALSE]; 
```

这两个操作工作正常，但问题出在第三个。我想让“购买”按钮不可见。

```
 [buyItem setVisible:FALSE]; 
```

这个在这个地方没有做任何事情（按钮仍然可见且可访问）。如果我将在代码的另一部分使用它，它工作得很好——但在这里....不是。试图改变位置也不起作用。它可以与 inAppPurchase 线程或其他东西连接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:03:03.290

我理解你的问题。如果你想禁用 menuitem，你可以设置`menuitem.isEnabled`属性。

如果你想隐藏按钮，你可以设置属性`menuitem.visible = NO`。

如果这对您不起作用，您也可以使用`[menuitem runaction:[CCFadeOut actionWithDuration:1.0f] ].`Then 根据您的要求使用 FadeIn。

这是您的替代选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:09:21.643

我找到了原因。当我两次调用苹果商店并创建两个按钮时，这是我的错误。:) 所以，它可以关闭。

# c# - 使用 linq 和 lambdas 的多分隔字符串到对象列表

> ID：12696096
> 
> 赞同：1
> 
> 时间：2012-10-02T18:29:43.127
> 
> 标签：c#, arrays, linq, lambda

## 概述

我有一个用逗号分隔的字符串，表示对象和空格，表示这些对象的属性：

```
string sOrderBy = "Column1 ASC, Column2 DESC"; 
```

我需要将其转换为`List<OrderByColumn>`where `OrderByColumn`is：

```
public class OrderByColumn
{
    public string ColumnName { get; set; }
    public bool IsAscending { get; set; }
} 
```

## 问题

```
sOrderBy.Split(',').Select(x => new OrderByColumn()
{
    ColumnName = x.Trim().Split(' ')[0].Trim(),
    IsAscending = x.Trim().Split(' ')[1].Trim() == "ASC" ? true : false
}).ToList<OrderByColumn>(); 
```

`x.Trim().Split(' ')`上面的代码有效，但多次调用存在一些冗余。（另外，我知道代码当前假定存在 0 和 1 数组值）。

有没有办法消除这种冗余？以某种方式将结果传递`x.Trim().Split(' ')`给匿名函数，然后`OrderByColumn`从那里返回一个对象？

我知道我可以使用两个 for/foreach 循环来解决这个问题，但是 linq 和 lambdas 太酷了！:-)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T18:33:08.800

`Select`在:中引入一个临时变量怎么样？

```
sOrderBy.Split(',').Select(x => 
    {
        var trimmedSplitted = x.Trim().Split(' ');
        return new OrderByColumn()
        {
            ColumnName = trimmedSplitted[0].Trim(),
            IsAscending = (trimmedSplitted[1].Trim() == "ASC")
        };
    }
).ToList<OrderByColumn>() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T18:33:18.270

```
sOrderBy.Split(',')
        .Select(csv=> csv.Trim().Split(' '))
        .Select(splitBySpaces => new OrderByColumn()
                     {
                         ColumnName = splitBySpaces[0].Trim(),
                         IsAscending = (splitBySpaces[1].Trim() == "ASC")
                     })
        .ToList<OrderByColumn>() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T18:36:13.933

您只需添加一个提取选择：

```
sOrderBy.Split(',').
    Select(x => x.Trim().Split(' ')).
    Select(x => new OrderByColumn(){
        ColumnName = x[0].Trim(), 
        IsAscending = x[1].Trim() == "ASC"}).
    ToList() 
```

我希望这对你有用。

# java - 我可以使用 jOOX 来查找属性的 xPath 吗？

> ID：12696116
> 
> 赞同：1
> 
> 时间：2012-10-02T18:31:23.203
> 
> 标签：java, xml, xml-attribute, joox

jOOX 可用于查找元素的 xPath，使用如下所示：

```
Element element = (Element) someNode;
String xPath = $(element).xpath(); 
```

我可以对属性做同样的事情吗？我试过这个：

```
Attr attr = (Attr) someAttributeNode;
String xPath = $(attr).xpath(); 
```

但它返回null。

**编辑**：我已经设法通过从节点的 xPath 和属性的名称创建我自己的 xPath 来解决它，但似乎我不应该这样做。这是完整的解决方法：

```
Element element = (Element) someNode;
String elementXpath = $(element).xpath();
String attributeName = someAttributeNode.getNodeName();
String attributeXpath = elementXpath + "/@" + attributeName;  // <-- work around 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:28:35.847

在有人给我一个更好的答案之前，我将使用我自己的解决方法：

我已经设法通过从节点的 xPath 和属性的名称创建我自己的 xPath 来解决它，但似乎我不应该这样做。这是完整的解决方法：

```
Element element = (Element) someNode;
String elementXpath = $(element).xpath();
String attributeName = someAttributeNode.getNodeName();
String attributeXpath = elementXpath + "/@" + attributeName;  // <-- work around 
```

# c++ - 带 const 参数的函数重载

> ID：12696121
> 
> 赞同：14
> 
> 时间：2012-10-02T18:31:40.130
> 
> 标签：c++, constants, overloading

函数重载可能发生在具有相同数量参数的两个成员函数之间，如果其中一个被声明为 const。

但是，如果一个函数有一个 const 参数，而另一个函数有相同类型的非常量参数呢？它适用于引用和指针吗？如果 C++ 提供它，为什么它提供？如果您知道，请与我分享原因。

下面是帮助您理解上述场景的示例。

```
void fun(const int i)
{
    cout << "fun(const int) called ";
}
void fun(int i)
{
    cout << "fun(int ) called " ;
}
int main()
{
    const int i = 10;
    fun(i);
    return 0;
} 
```

输出：编译器错误：`redefinition of 'void fun(int)'`

```
void fun(char *a)
{
  cout<<"non-const fun() called";
}

void fun(const char *a)
{
  cout<<"const fun() called";
}

int main()
{
  const char *ptr = "GeeksforGeeks";
  fun(ptr);
  return 0;
} 
```

输出：调用了 const fun()

为什么在 C++ 中允许第二个？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-02T18:36:14.753

第一个参数是*顶级的* `const`。这意味着函数不能更改参数的值，但是，调用者并不关心：被调用者获取参数的*副本*，因此如果参数具有*顶级* `const`，它是一个实现细节。请注意，以下工作：

```
void f(int); // forward declare

void g(){ f(42); }

void f(int const i){ /*...*/ } // define above declared function 
```

对于第二组重载，`const`不再是顶级的。它描述了被调用者是否可以更改*指针指向的内容*。作为呼叫者，您*确实*关心这一点。它不再只是一个实现细节。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-04-12T15:26:57.723

首先，解释为什么第一个代码不允许，而第二个代码可以。

`const int`并且`int`作为参数，您传递任何相关类型，`double`或`int`其他任何可以转换为 int 的类型，都`const int`可以`int`接受传入值，实际上没有区别。如果编译器允许定义两者，那么调用哪一个？你不知道，编译器也不知道。所以第一部分代码是不允许的。

当谈到第二个示例时，引用和指针会有所不同。因为您不能传递 a`const int*`来初始化`int *`，也不能使用`const int`来初始化`int&`。因此，如果您定义两个具有相同返回类型的函数，一个是“const 版本”**指针**或**引用**参数，另一个不是，这会有所不同。另一个问题出现了，如果我传递一个`int` **对象**（或称为变量，相同含义）或`int *`指针，那么匹配哪个（当参数是**指针**或**引用**时）？答案是“非常量”。如果您想将“const 版本”与非 const 对象或非指向 const 指针相匹配，您可能需要`const_cast`我想弄清楚。

所以回到你的问题：

> 但是，如果一个函数有一个 const 参数，而另一个函数有相同类型的非常量参数呢？它适用于引用和指针吗？

是的，它在某种程度上只适用于引用和指针。

和

> 如果 C++ 提供它，为什么它提供？

说不出来。我没有太多经验。

*有关更多信息，请阅读C++ Primer 5th*非常相关的部分。截图链接如下：

1.  [https://imgur.com/tnqrxVY](https://imgur.com/tnqrxVY)
2.  [https://imgur.com/hF1MjUH](https://imgur.com/hF1MjUH)
3.  [https://imgur.com/Fg2zeEw](https://imgur.com/Fg2zeEw)

顺便说一句，虽然我是新手。但是`int const i`第一个答案是什么？而且我不明白“*这是一个实现细节*”的确切含义。无意冒犯，只是无法理解答案的那一部分。:D

# opengl - 为什么立体 3D 渲染需要专门为其编写的软件？

> ID：12696122
> 
> 赞同：7
> 
> 时间：2012-10-02T18:31:41.460
> 
> 标签：opengl, stereo-3d

考虑到对 3D 图形渲染的幼稚看法，立体 3D 渲染似乎对开发人员基本上是透明的，并且完全是图形硬件和驱动程序的一个特性。无论 OpenGL 窗口在何处显示场景，它都需要几何、光照、相机和纹理等信息来渲染场景的 2D 图像。

在场景中添加立体 3D 似乎本质上意味着使用两个横向偏移的摄像机，而所有其他场景变量保持不变。唯一的附加信息是使相机相距多远以及使它们的中心光线会聚多远。鉴于此，采用 GL 命令序列并在驱动程序级别交错适当的命令来驱动 3D 渲染似乎是微不足道的。

似乎需要专门编写应用程序才能使用特殊的 3D 硬件架构，这使得实现起来既麻烦又难以实现。我们会期望这成为立体 3D 实现的未来，还是我掩盖了太多重要的细节？

在我的具体情况下，我们使用的是 .net OpenGL 视口控件。我最初希望仅仅拥有启用立体的硬件和驱动程序就足以启用立体 3D。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T19:03:22.277

你的假设是错误的。OpenGL 不会“使用几何体、照明相机和纹理信息来渲染 2D 图像”。OpenGL 使用命令来操作其状态机并使用命令来执行绘图调用。

正如没人在他的评论中提到的那样，核心配置文件甚至根本不关心转换。它现在唯一真正为您提供的是向顶点着色器提供任意数据的方法，以及向任意 3D 立方体提供渲染的方法。无论是否对应于实际视图，GL 不关心，也不应该关心。

请注意，有些人已经注意到驱动程序可以尝试猜测什么是视图，什么不是，这就是 nvidia 驱动程序在进行自动立体渲染时尝试做的事情。这需要一些特定的猜测工作，这相当于对游戏渲染进行实际分析以调整算法，以便驾驶员猜对。因此，它通常是按标题、驱动程序内的更改。一些开发人员已经注意到驱动程序可能会猜错，当这种情况发生时，它开始变得混乱。查看[这些问题的第一手资料](http://www.nvidia.com/content/GTC-2010/pdfs/2010_GTC2010.pdf)。

我真的建议您阅读该演示文稿，因为它进一步说明了相机应该指向的位置（两个视图方向是否应该平行等）。

此外，事实证明，对于与视图相关的所有内容，渲染成本基本上是其两倍。一些开发人员（例如，包括[Crytek 的家伙，请参阅第 2 部分](http://www.crytek.com/cryengine/presentations/aaa-stereo-3d-in-cryengine-3)）发现，在很大程度上，您*可以*进行一次渲染，并使用额外的数据来伪造图片以生成左眼和右眼图片。这里节省的工作量本身就很有价值，开发人员可以自己做这件事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T05:15:20.700

不幸的是，立体 3D 渲染比仅添加横向摄像机偏移更复杂。

您可以从原始“单声道”渲染帧和深度缓冲区创建立体 3D。给定场景中（现实世界）深度的范围，每个值的深度缓冲区会告诉您相应像素的距离。给定所需的眼睛分离值，您可以根据距离向左或向右滑动每个像素。但...

您想要两台摄像机最终会聚的平行轴立体（偏移不对称平截头体）还是“前束”立体？如果是后者，您将需要逐个场景调整摄像机角度，以避免“反转”超出会聚点的几何图形。

对于非常靠近观察者的物体，左眼和右眼看到同一物体的完全不同的图像，甚至左眼看到物体的一侧而右眼看到另一侧 - 但单视图会平均这些到前面。如果您想要一个准确的立体 3D 图像，它确实必须从不同的眼睛视点进行渲染。这有关系吗？FPS射击游戏，可能不是。人体手术训练模拟器，你敢打赌。

如果观看者将头向一侧倾斜，则会出现类似的问题，因此一只眼睛比另一只眼睛高。同样，对于游戏来说可能并不重要，对于外科医生来说真的很重要。

哦，你在场景中有抗锯齿或透明度吗？现在你有了一个真正代表不同深度的两个像素值的像素。横向移动一个抗锯齿像素，它可能看起来更糟，因为“下面”的颜色已经改变。侧向移动一个大部分透明的像素，后面的像素会移动得太远。

您如何处理瞄准具十字和类似的 HUD 元素？如果在禁用深度缓冲区的情况下绘制它们，深度缓冲区值可能会使它们在数百米之外。

考虑到所有这些潜在的问题，OpenGL 明智地并没有试图说明应该如何进行立体 3D 渲染。根据我的经验，修改 OpenGL 程序以进行立体渲染比一开始就编写它要省力得多。

Shameless self promotion: this might help [http://cs.anu.edu.au/~Hugh.Fisher/3dteach/stereo3d-devel/index.html](http://cs.anu.edu.au/~Hugh.Fisher/3dteach/stereo3d-devel/index.html)

# php - 在 Shopify 上显示 Twitter 而不会遇到任何 API 限制问题

> ID：12696123
> 
> 赞同：1
> 
> 时间：2012-10-02T18:31:43.497
> 
> 标签：php, mysql, api, twitter, shopify

我希望通过 Shopify 添加一个 twitter 提要（使用 jTweetAnywhere.js 插件）。虽然我可以使用它，但我担心我会遇到 Twitter 的 API 限制问题。据我所知，Shopify 不允许您使用 PHP，所以我不确定如何缓存和召回任何推文。

他们对我如何缓存推文然后在没有 PHP 和 MYSQL 的情况下调用它们有什么建议吗？

非常感谢！

珍

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T23:14:15.543

虽然 Twitter 速率限制适用于 IP，但如果商店同时有数千次点击，Twitter 似乎 IP 来自不同客户的计算机，因此在您的情况下不应该计算达到限制。并不是所有的点击似乎都来自 Shopify 的数据中心。

# unix - sed 编辑文件到位

> ID：12696125
> 
> 赞同：394
> 
> 时间：2012-10-02T18:31:50.177
> 
> 标签：unix, sed, solaris

我试图找出是否可以在单个 sed 命令中编辑文件，而无需***手动***将编辑的内容流式传输到新文件中，然后将新文件重命名为原始文件名。我尝试了该`-i`选项，但我的 Solaris 系统说这`-i`是一个非法选项。有不同的方法吗？

* * *

## 回答 #1

> 赞同：647
> 
> 时间：2012-10-02T18:39:16.783

该[`-i`选项](https://archive.is/cLlnm#selection-795.0-829.59)将编辑的内容流式传输到一个新文件中，然后在幕后重命名它，无论如何。

例子：

```
sed -i 's/STRING_TO_REPLACE/STRING_TO_REPLACE_IT/g' filename 
```

在 macOS 上，您需要：

```
sed -i '' 's/STRING_TO_REPLACE/STRING_TO_REPLACE_IT/g' filename 
```

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2012-10-03T02:01:06.437

在`sed`无法就地编辑文件的系统上，我认为更好的解决方案是使用`perl`：

```
perl -pi -e 's/foo/bar/g' file.txt 
```

尽管这确实会创建一个临时文件，但它会替换原始文件，因为提供了一个空的就地后缀/扩展名。

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2015-01-29T03:48:59.690

请注意，在 OS X 上运行此命令时，您可能会遇到奇怪的错误，例如“无效的命令代码”或其他奇怪的错误。要解决此问题，请尝试

```
sed -i '' -e "s/STRING_TO_REPLACE/STRING_TO_REPLACE_IT/g" <file> 
```

这是因为在 OSX 版本上`sed`，该`-i`选项需要一个`extension`参数，因此您的命令实际上被解析为`extension`参数，文件路径被解释为命令代码。来源：[https ://stackoverflow.com/a/19457213](https://stackoverflow.com/a/19457213)

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2014-07-03T09:14:41.513

以下在我的 Mac 上运行良好

```
sed -i.bak 's/foo/bar/g' sample 
```

我们在示例文件中将 foo 替换为 bar 。原始文件的备份将保存在 sample.bak

要在没有备份的情况下编辑内联，请使用以下命令

```
sed -i'' 's/foo/bar/g' sample 
```

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2014-01-07T00:11:11.347

需要注意的一点`sed`是，sed 的唯一目的是充当“流”（即标准输入、标准输出、标准错误和其他`>&n`缓冲区、套接字等的管道）上的编辑器，因此不能自行编写文件。考虑到这一点，您可以使用另一个命令`tee`将输出写回文件。另一种选择是创建一个补丁，将内容通过管道传输到`diff`.

**三通法**

```
sed '/regex/' <file> | tee <file> 
```

**补丁方法**

```
sed '/regex/' <file> | diff -p <file> /dev/stdin | patch 
```

更新：

另外，请注意 patch 将使文件从 diff 输出的第 1 行更改：

Patch 不需要知道要访问哪个文件，因为它可以在 diff 输出的第一行中找到：

```
$ echo foobar | tee fubar

$ sed 's/oo/u/' fubar | diff -p fubar /dev/stdin
*** fubar   2014-03-15 18:06:09.000000000 -0500
--- /dev/stdin  2014-03-15 18:06:41.000000000 -0500
***************
*** 1 ****
! foobar
--- 1 ----
! fubar

$ sed 's/oo/u/' fubar | diff -p fubar /dev/stdin | patch
patching file fubar 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2012-10-02T19:03:51.793

该版本`sed`支持`-i`就地编辑文件的选项写入临时文件，然后重命名文件。

或者，您可以只使用`ed`. 例如，要更改文件中所有出现的`foo`to ，您可以执行以下操作：`bar``file.txt`

```
echo ',s/foo/bar/g; w' | tr \; '\012' | ed -s file.txt 
```

语法类似于`sed`，但肯定不完全相同。

即使您没有`-i`支持`sed`，您也可以轻松编写脚本来为您完成工作。而不是`sed -i 's/foo/bar/g' file`，你可以做`inline file sed 's/foo/bar/g'`。这样的脚本编写起来很简单。例如：

```
#!/bin/sh
IN=$1
shift
trap 'rm -f "$tmp"' 0
tmp=$( mktemp )
<"$IN" "$@" >"$tmp" && cat "$tmp" > "$IN"  # preserve hard links 
```

应该足以满足大多数用途。

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2017-06-30T09:04:34.590

你可以使用 vi

```
vi -c '%s/foo/bar/g' my.txt -c 'wq' 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2015-07-17T21:55:19.920

[sed](http://unixhelp.ed.ac.uk/CGI/man-cgi?sed)支持就地编辑。来自`man sed`：

```
-i[SUFFIX], --in-place[=SUFFIX]

    edit files in place (makes backup if extension supplied) 
```

**示例**：

假设您有一个`hello.txt`包含以下文本的文件：

```
hello world! 
```

如果要保留旧文件的备份，请使用：

```
sed -i.bak 's/hello/bonjour' hello.txt 
```

您将得到两个文件：`hello.txt`内容：

```
bonjour world! 
```

并`hello.txt.bak`带有旧内容。

如果您不想保留副本，请不要传递扩展参数。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2016-08-25T11:26:01.103

# 如果您要替换相同数量的字符并仔细阅读[文件的“就地”编辑](http://backreference.org/2011/01/29/in-place-editing-of-files/)...

您还可以使用重定向运算符`<>`打开文件进行读写：

```
sed 's/foo/bar/g' file 1<> file 
```

现场观看：

```
$ cat file
hello
i am here                           # see "here"
$ sed 's/here/away/' file 1<> file  # Run the `sed` command
$ cat file
hello
i am away                           # this line is changed now 
```

来自[Bash 参考手册 → 3.6.10 打开文件描述符以进行读写](https://www.gnu.org/software/bash/manual/bashref.html#Opening-File-Descriptors-for-Reading-and-Writing)：

> 重定向运算符
> 
> ```
> [n]<>word 
> ```
> 
> 导致打开名称为 word 扩展的文件，以便在文件描述符 n 上读取和写入，如果未指定 n，则在文件描述符 0 上打开。如果文件不存在，则创建它。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-05-17T18:44:20.043

就像 Moneypenny 在 Skyfall 中所说的那样：“有时老办法是最好的。” 金凯德后来也说了类似的话。

```
$ printf ',s/false/true/g\nw\n' | ed {YourFileHere} 
```

快乐编辑到位。添加了 '\nw\n' 来写入文件。为延迟回复请求道歉。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2012-10-02T19:09:48.560

您没有指定您使用的是什么外壳，但是使用 zsh 您可以使用该`=( )`构造来实现这一点。类似于以下内容：

```
cp =(sed ... file; sync) file 
```

`=( )`类似于但创建一个临时文件，该文件在终止`>( )`时会自动删除。`cp`

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2015-08-11T00:31:51.623

```
mv file.txt file.tmp && sed 's/foo/bar/g' < file.tmp > file.txt 
```

应该保留所有硬链接，因为输出被引导回覆盖原始文件的内容，并且避免了对特殊版本的 sed 的任何需要。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-02-07T11:00:46.847

很好的例子。我面临编辑许多文件的挑战，并且 -i 选项似乎是在 find 命令中使用它的唯一合理解决方案。这里的脚本在每个文件的第一行前面添加“版本：”：

```
find . -name pkg.json -print -exec sed -i '.bak' '1 s/^/version /' {} \; 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-12-20T23:25:01.207

为了在 Mac 上解决这个问题，我不得不在 core-utils 之后添加一些 unix[函数](https://apple.stackexchange.com/questions/193288/how-to-install-and-use-gnu-grep-in-macos)。

```
brew install grep
==> Caveats
All commands have been installed with the prefix "g".
If you need to use these commands with their normal names, you
can add a "gnubin" directory to your PATH from your bashrc like:
  PATH="/usr/local/opt/grep/libexec/gnubin:$PATH" 
```

`gsed`用而不是调用`sed`。mac 默认不喜欢如何`grep -rl`显示带有预定义的文件名`./`。

```
~/my-dir/configs$ grep -rl Promise . | xargs sed -i 's/Promise/Bluebirg/g'

sed: 1: "./test_config.js": invalid command code . 
```

我还必须使用`xargs -I{} sed -i 's/Promise/Bluebirg/g' {}`名称中带有空格的文件。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-12-26T01:48:34.900

如果要替换包含“/”的字符串，可以使用“？”。即将所有 *.py 文件的 '/usr/local/bin/python' 替换为 '/usr/bin/python3'。

寻找 。-name \*.py -exec sed -i 's?/usr/local/bin/python?/usr/bin/python3?g' {} \;

# hibernate - Grails 中的自定义验证器中的异常

> ID：12696126
> 
> 赞同：0
> 
> 时间：2012-10-02T18:31:51.173
> 
> 标签：hibernate, validation, grails, spring-security, grails-orm

我正在尝试`User`在通过 Spring Security 核心插件创建的域实体上在 Grais 中实现密码验证。我在我的实体中添加了以下代码：

```
class User {
  // Added by the spring security core plugin
  String password
  // Added by me
  String passwordConfirm

  static constraints = {
    passwordConfirm blank:false, validator: { val, obj ->
       if (!obj.password.equals(obj.passwordConfirm)) {
           return "user.password.confirmation.error"
       }
    }
  }

  // other methods...
} 
```

`password`验证器在不匹配时按预期工作`passwordConfirm`。但是，当验证器成功通过并且实例即将被持久化时，我得到以下异常：

```
org.hibernate.AssertionFailure: null id in com.test.User entry (don't flush the Session after an exception occurs)

    at com.shopify.RegistrationController$_closure2.doCall(RegistrationController.groovy:14)

    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)

    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)

    at java.lang.Thread.run(Thread.java:680) 
```

我正在使用`user.save(flush: true)`.

当我删除验证时，我的实例成功保存在数据库中，因此我认为我的验证器一定有问题。您对可能出现的问题有什么建议吗？我正在使用 grails 2.0.4 版。

编辑：我保存实体的部分如下：

```
def register = {    
    def user = new User(params)
    if (!user.save(flush:true, failOnError:true)) {
        render view: 'register', model: [userInstance: user]
    } else {
        render view: 'success'
    }
} 
```

编辑：好的，我设法通过注释掉弹簧安全核心插入的以下代码来完成这项工作：

```
def beforeInsert() {
    // encodePassword()
}

def beforeUpdate() {
    // if (isDirty('password')) {
    //  encodePassword()
    // }
} 
```

目前，我不知道为什么会发生这种情况，但我会检查一下。同时，如果有人对此有任何信息，我真的很想与我分享。

编辑：发现这个相关的错误报告：http: [//jira.grails.org/browse/GRAILS-9083](http://jira.grails.org/browse/GRAILS-9083)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:28:03.733

验证失败，因为在插入用户之前，它会对您的密码进行哈希处理，因此密码不再等于 passwordConfirm，从而触发验证错误。

这就是你正在做的事情：

在保存（）之前：

```
def password = 1234
def passwordConfirm = 1234
password == passwordConfirm  validation passes 
```

在 .save() 期间。在触发插入之前：

```
def password gets hashed:  
def password = 1JO@J$O!@J$P!O@$JP!@O$J!@O$J!@
def passwordConfirm = 1234
password != passwordConfirm validation fails 
```

从您的域中删除 encodePassword() 后：

```
def password = 1234
def passwordConfirm = 1234
password == passwordConfirm  validation passes but now you have your password in plain texts inside your DB, you should never do this for security reasons. 
```

简单的解决方法是在一个单独的命令对象中进行验证，而不是在它自己的域对象中，passwordConfirm 甚至不应该在你的域类中。

示例：查看 Spring Security UI 的[源代码](https://github.com/grails-plugins/grails-spring-security-ui/blob/master/grails-app/controllers/grails/plugins/springsecurity/ui/RegisterController.groovy)，了解它如何使用命令对象处理控制器中的验证。

# netty - 用于许多长期 TCP 连接的 Netty 服务器

> ID：12696130
> 
> 赞同：0
> 
> 时间：2012-10-02T18:32:05.277
> 
> 标签：netty, tcp-ip

我正在将一些 TCP 服务器/客户端代码移植到 Netty。

一个问题，服务器将处理来自许多客户端的长期连接。我目前不需要也很可能不需要在批处理操作中向所有客户端广播等事情......但我只需要一个存储这些频道的地方和一个允许我有选择地向下发送通知的机制给给定一些客户 ID 的客户。

我的问题是 ChannelGroup 是一种可接受的机制来保存这些频道吗？当我第一次获得连接时，我会将频道 ID 和客户端 ID 存储在查找映射中，这样每当我需要通知特定客户端时，我都会查找我需要写入的频道 ID，然后从 ChannelGroup 中获取该频道并且只向该频道发送消息。

这种方法有什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:58:38.920

不，这似乎是合理的，尽管我只会将 Channel 与客户端 ID 一起存储，并可能将侦听器附加到 Channel#getCloseFuture() 以维护我的映射。但是，ChannelGroup 仍然很有用，尤其是对于将“关联”通道作为一个单元来关闭时。

# packaging - 如何为不同的环境使用相同的路径创建 RPM 子包？

> ID：12696131
> 
> 赞同：4
> 
> 时间：2012-10-02T18:32:05.210
> 
> 标签：packaging, rpm, rpmbuild, rpm-spec

我想使用 rpm 为不同的环境（live、testing、developer）构建子包，但对于相同的文件，所以有一个名为 name-config-live 的包，一个名为 name-config-testing，一个名为 name-config -developer 并在其中具有相同的路径，但每个路径的配置都与其命名的环境相对应。举个例子

假设在所有环境中我都有一个名为 /etc/name.conf 的文件，并且在测试时我希望它包含“1”、开发时“2”和实时“3”。是否可以在同一个规范中执行此操作，因为子包生成只发生在最后而不是按照我输入的顺序。（希望不使用 %post -n ）

我尝试使用 BuildRoot 但似乎这是一个全局属性

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T00:38:45.490

我不认为有本地方式。我会`%post`像你所说的那样做。

但是，我会这样做（类似于我为工作开发的仅限内部包所做的事情）：

1.  三个单独的文件`/etc/name.conf-developer`，`/etc/name.conf-live`等等。
2.  让所有三个包都提供一个虚拟包，例如`name-config`
3.  有主包需要`name-config`
    *   这将使`rpm`,`yum`或任何需要在同一事务中安装至少一个的
4.  让所有三个包相互冲突
5.  将每个配置包的`%post`（和可能的`%verify`）符号链接`/etc/name.conf`到正确的配置
    *   这也有助于向用户展示正在发生的事情

缺点：

1.  这有点骇人听闻
2.  `rpm --whatprovides /etc/name.conf`会说它不属于任何包

# javascript - 在 Backbone 中动态更改 url

> ID：12696142
> 
> 赞同：5
> 
> 时间：2012-10-02T18:33:28.623
> 
> 标签：javascript, json, backbone.js

我试图动态更改路由器内部的 url，但无法做到，它一直返回到基本 Collection URL。在这里，我发布了包含 3 个不同集合的代码，这些集合除了指向三个不同的 url，它们的功能完全相同。我只有一个`model`和三个`collections`依赖于该模型，它们甚至呈现相同的视图。我怎样才能动态改变，`url`所以我只能创建一个`Collection`和一个`Model`？像这样的案例是最佳做法吗？

```
 // MODELS & COLLECTIONS 
    window.Post = Backbone.Model.extend({
            urlRoot:  function() {
                    return 'http://localhost:5000/json/guides/:id'
            }
    })

    App.Collections.RecentPosts = Backbone.Collection.extend({
            model: Post,
            url:'http://localhost:5000/json/posts/recent',
    })
    App.Collections.PopularPosts = Backbone.Collection.extend({
            model: Post,
            url:'http://localhost:5000/json/posts/popular',
    })
    App.Collections.FeaturedPosts = Backbone.Collection.extend({
            model: Post,
            url:'http://localhost:5000/json/posts/featured',
    })

    // CONTROLLER
    App.Controllers.Documents = Backbone.Router.extend({
            routes:{
            "recent"                : "recent",
            "popular"         : "popular",
            "featured"          : "featured",
            },

            recent: function(){
                //.... same as featured ?
            },
            popular: function(){
                //.... same as featured ?
            },
            featured: function(){
                    $("#browser").empty();
                    var collection = new App.Collections.Posts();
                    collection.fetch({
                                success: function(col,posts){
                                    new App.Views.GuideView({collection: posts});
                                },
                                error: function(error){
                                    console.log(error)
                                }
                        })
            }
    }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T18:59:40.030

有许多不同的方法可以做到这一点。这可能是“最佳实践”。

```
App.Controllers.Documents = Backbone.Router.extend({
        routes:{
        "recent"                : "recent",
        "popular"         : "popular",
        "featured"          : "featured",
        },

        initialize: function () {
            this.collection = new App.Collections.Posts();
        },

        _showPage: function (config) {
            $("#browser").empty();

            this.collection.fetch({
                url: config.url,
                success: function(col,posts){
                    new App.Views.GuideView({collection: posts});
                },
                error: function(error){
                    console.log(error)
                }
            });
        },

        recent: function(){
            this._showPage({url:'http://localhost:5000/json/posts/recent'});
        },
        popular: function(){
            this._showPage({url:'http://localhost:5000/json/posts/popular'});
        },
        featured: function(){
           this._showPage({url:'http://localhost:5000/json/posts/featured'});
        }
}); 
```

因为我真的不知道你的页面会变得多么复杂，所以这可能是我在没有更多信息的情况下能做的最好的事情。但是，这个想法是在路由器初始化时设置了“this.collection”......所以你可以继续重用它。_showPage 方法执行显示页面所需的任何基本任务，并且路由调用的方法使用它来执行在详细介绍之前需要完成的任何基本工作。传递到配置中的 url 只会告诉集合从哪里获取其信息 - 我假设您的所有数据都具有相同的格式并且“是相同的东西”......只是不同的过滤器。

您可能可以使用以下方法做类似的事情`App.Views.GuideView`：

```
App.Controllers.Documents = Backbone.Router.extend({
        routes:{
        "recent"                : "recent",
        "popular"         : "popular",
        "featured"          : "featured",
        },

        initialize: function () {
            this.collection = new App.Collections.Posts();
            this.view = new App.Views.GuideView({collection: this.collection});
        },

        _showPage: function (config) {
            $("#browser").empty();

            this.collection.fetch({
                url: config.url,
                success: _.bind(function(col,posts){
                    this.view.render();
                }, this),
                error: function(error){
                    console.log(error)
                }
            });
        },

        recent: function(){
            this._showPage({url:'http://localhost:5000/json/posts/recent'});
        },
        popular: function(){
            this._showPage({url:'http://localhost:5000/json/posts/popular'});
        },
        featured: function(){
           this._showPage({url:'http://localhost:5000/json/posts/featured'});
        }
}); 
```

“渲染”只会重建视图，并且由于您已经在视图中将集合引用为“this.options.collection”（或者您可以向视图添加“初始化”并将 this.collection 设置为this.options.collection）。当集合更新时，所有这些信息都在视图中通过引用..所以不需要重置它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T18:58:05.993

我认为最好的做法是拥有 3 个集合，每个集合都在 URL 和属性上。

这使得代码更易于维护，因为您可以在单独的文件中为它们分配不同的事件和侦听器，而不是拥有一个包含所有逻辑的“上帝集合”。

当然，您仍然可以保持 DRY 并使用所有这些集合共有的代码保留一个辅助对象或父集合。

# android - 禁用 App Widget 中的列表项

> ID：12696145
> 
> 赞同：3
> 
> 时间：2012-10-02T18:33:35.877
> 
> 标签：android, listview, android-appwidget, remoteview

是否可以在主屏幕上的应用小部件的列表视图中禁用某些项目？

现在，我正在为列表视图使用 PendingIntent 模板，然后使用 fillIntent 填充每一行的意图。我想要做的是当一个项目被按下以获取标题和其他类型的项目时，不显示选择器背景。在普通列表视图中，您可以使用[isEnabled解决它，但它在](http://developer.android.com/reference/android/widget/ListAdapter.html#isEnabled%28int%29)[RemoteViewsFactory](http://developer.android.com/reference/android/widget/RemoteViewsService.RemoteViewsFactory.html)中不存在。

我的 AppWidgetProvider 看起来像这样：

```
public class StreamsWidgetProvider extends AppWidgetProvider {

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,
            int[] appWidgetIds) {
        final int N = appWidgetIds.length;

        for (int i=0; i<N; i++) {
            int appWidgetId = appWidgetIds[i];

            RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget);

            //set service for list view
            Intent listIntent = new Intent(context, StreamsWidgetService.class);
            listIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
            listIntent.setData(Uri.parse(listIntent.toUri(Intent.URI_INTENT_SCHEME)));
            views.setRemoteAdapter(R.id.streamItemsList, listIntent);

            Intent intent = new Intent(context, StreamsWidgetProvider.class);
            intent.setAction(ACTION_START_ACTIVITY);
            PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent, 0);
            views.setPendingIntentTemplate(R.id.streamItemsList, pendingIntent);

            appWidgetManager.updateAppWidget(appWidgetId, views);
        }
        super.onUpdate(context, appWidgetManager, appWidgetIds);
    }
} 
```

这是在上述 appWidgetProvider 连接的 RemoteViewsService 中实例化的 RemoteViewsFactory。

```
private class StreamItemWidgetFactory implements RemoteViewsService.RemoteViewsFactory {
    ...
    @Override
    public RemoteViews getViewAt(int position) {
        ...
        if(isEnabled) {
            ...
            Intent intent = new Intent();
            intent.putExtra(StreamsWidgetProvider.BROADCAST_PARAM_ITEM_ID, item.getId());
            ...
            rv.setOnClickFillInIntent(R.id.streamItemRowId, intent);
        }
        ...
        return item;
    }
    ...
} 
```

是否可以获得与 ListView 适配器相同的功能？我可以以某种方式删除某些行的 pendingIntent 吗？

# ruby-on-rails - 使用 mechanize 和 ruby 的间歇性 SSL 证书验证失败

> ID：12696147
> 
> 赞同：1
> 
> 时间：2012-10-02T18:33:47.657
> 
> 标签：ruby-on-rails, https, openssl, mechanize

我有一个 Rails 3.2.8 应用程序，Ubuntu 12.04 上有 Ruby 1.9.3。它使用 mechanize 连接到 https 网站。

我间歇性地看到这个错误：

```
SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed 
```

我确实设置了 CA 文件：

```
Mechanize.new do |agent|
  agent.ssl_version = "SSLv3"
  agent.ca_file = Rails.root.join("lib/cacert.pem").to_s
end 
```

我也尝试过使用`cert_store`：

```
cert_store = OpenSSL::X509::Store.new
cert_store.set_default_paths

Mechanize.new do |agent|
  agent.ssl_version = "SSLv3"
  agent.cert_store = cert_store
end 
```

并明确设置商店：

```
cert_store = OpenSSL::X509::Store.new
cert_store.add_file Rails.root.join("lib/cacert.pem").to_s

Mechanize.new do |agent|
  agent.ssl_version = "SSLv3"
  agent.cert_store = cert_store
end 
```

无论我使用哪种方法来指定 CA/证书（包括依赖默认行为），这些错误都会出现。当我从 rails 控制台手动运行代码时，它工作正常。如果有的话，以上哪一项是正确的？我还能做些什么来调试这个？

# android - 从其超类完成子类活动

> ID：12696149
> 
> 赞同：1
> 
> 时间：2012-10-02T18:34:00.050
> 
> 标签：android, android-intent, android-activity, superclass, activity-finish

**考虑以下场景：**
类`TemplateActivity`扩展`Activity`。在`onResume()`它内部执行一个布尔变量的验证，如果为 false，它完成方法和活动，并开始一个新的活动，`OtherActivity`。

当`ChildActivity`扩展类`TemplateActivity`运行时，它等待`super.onResume()`完成然后继续，无论它的超级是否需要启动`Intent`。

**问题：**
有没有办法终止`ChildActivity`何时`OtherActivity`需要从 开始`TemplateActivity`？没有在子类中实现有效性检查。

**超类：**

```
class TemplateActivity extends Activity {
    @Override
    protected void onResume() {
        super.onResume();

        if(!initialized)
        {
            startActivity(new Intent(this, OtherActivity.class));
            finish();
            return;
        }

        //Do stuff
    }
} 
```

**子类：**

```
class ChildActivity extends TemplateActivity {
    @Override
    protected void onResume() {
        super.onResume();

        //Do stuff
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T18:42:10.873

更优雅的解决方案是对类设计稍有不同的方法：

1.  在. `DoStuff()`_ `TemplateActivity`在那里做所有的*// 做东西*位。
2.  从末尾调用此方法`TemplateActivity OnResume`
3.  在子活动中覆盖它以使用子活动扩展它*//做东西*位。
4.  不要在 ChildActivity 中*覆盖*。`onResume`

这样，如果在 TemplateActivity OnResume 中触发条件，则不会执行任何父 DoStuff 和子 DoStuff。`ChildActivity`不应该对这种行为有*任何了解。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T18:42:28.510

我想这就是你想要得到的：

```
class ChildActivity extends TemplateActivity {
    @Override
    protected void onResume() {
        super.onResume();
        if (!isFinishing()) {
            // Do stuff
        }
    }
} 
```

# python - 未能在 Python 中设置 __main__.__loader__

> ID：12696151
> 
> 赞同：12
> 
> 时间：2012-10-02T18:34:13.040
> 
> 标签：python

运行任何 Python 脚本（通过在 Windows 7 上双击 .py 文件）时，我收到一条`Python: failed to set __main__.__loader__`错误消息。该怎么办？

**更多细节：**

*   这些脚本可以在其他机器上运行。
*   安装在脚本不起作用的机器上的唯一 Python 版本是 3.2。
*   尝试从 Windows shell (cmd) 运行脚本时出现相同的错误。
*   这是我未能在我的机器上运行的名为“hey.py”的文件的内容示例：

    `print('hey')`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T20:01:36.350

我有同样的问题。原来这是因为该文件存储在一个名称不是英文的目录中（在我的例子中是希伯来语）。确保文件的路径只包含英文字母。

[http://bugs.python.org/issue16218](http://bugs.python.org/issue16218)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:17:55.927

我也有这个问题。就像 mottyg1 所说，当 python 脚本从包含非英语字符的目录运行时会发生这种情况。我无法更改目录名称，并且我的 python 脚本需要在目录中才能对文件名执行操作。所以我的解决方法是将脚本移动到不同的文件夹，然后传入包含要更改的文件的目录。

所以要清楚，问题只是当包含 python 文件的目录有非英文字符时，但 python 仍然可以在其函数中处理这些字符，至少据我所知。

# php - 在 mysql 数据库中创建记录的日期

> ID：12696154
> 
> 赞同：0
> 
> 时间：2012-10-02T18:34:21.563
> 
> 标签：php, mysql

我有一个表，其中有出生日期、年龄位置和分数，我想检索在分数不为空且没有时间戳字段的两个日期之间创建的记录数。

如果没有时间戳字段，我该怎么做。

是否有任何元数据，如果有，我该如何运行查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:38:00.343

为您的表格添加时间戳

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:49:40.510

尝试这样的查询：

```
SELECT COUNT(*) 
FROM TABLE_NAME 
WHERE BIRTHDATE BETWEEN 'DATE1' AND 'DATE2' 
AND SCORE IS NOT NULL AND TIMESTAMP IS NULL; 
```

在现有表中添加一列`timestamp`，默认值为`NULL`，并查询上述语句，它应该可以工作。每当您向已经有记录的表中添加一列时，对于该新列和现有记录，相应的值都是空白的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T19:29:24.027

正如其他用户所指出的那样，这里得到了回应。

因为您在数据库中没有日期参考字段，所以您无法提取匹配一个或两个日期之间的记录。

从这里开始，您最好的选择是添加一个日期字段，然后确保在将数据写入数据库时​​，您使用[mysql now() 函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_now)插入一个日期/日期时间。有几种不同的方法可以实现它，但这可能是最简单的：

```
mysql_query("
   INSERT INTO users (first, last, whenadded) 
   VALUES ('$first', '$last', now())
"; 
```

# c# - Windows Phone - 后面代码中的 ObjectAnimationUsingKeyFrames

> ID：12696155
> 
> 赞同：0
> 
> 时间：2012-10-02T18:34:22.197
> 
> 标签：c#, windows-phone-7, storyboard, keyframe

我正在尝试在后面的代码中创建它。但它抛出“参数不正确”异常。

```
<VisualState x:Name="FlipCard" >
    <Storyboard >
        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="aceSpades">
            <DiscreteObjectKeyFrame KeyTime="0:0:1">
                <DiscreteObjectKeyFrame.Value>
                    <Visibility>Visible</Visibility>
                </DiscreteObjectKeyFrame.Value>
            </DiscreteObjectKeyFrame>
        </ObjectAnimationUsingKeyFrames>
    </Storyboard>
</VisualState> 
```

代码背后的代码是：

```
VisualState vst = (VisualState)FindName("FlipCard");

ObjectAnimationUsingKeyFrames anim = new ObjectAnimationUsingKeyFrames();

DiscreteObjectKeyFrame obj = new DiscreteObjectKeyFrame();

obj.Value = Visibility.Visible;
obj.KeyTime = TimeSpan.FromSeconds(1);
anim.KeyFrames.Add(obj);

Storyboard.SetTarget(anim, aceSpades.Projection);
Storyboard.SetTargetProperty(anim, new PropertyPath(Image.VisibilityProperty));

vst.Storyboard.Children.Add(anim);

VisualStateManager.GoToState(this, "FlipCard", true); 
```

它在最后一个代码中抛出错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:01:46.463

我改变了

```
Storyboard.SetTarget(anim, aceSpades.Projection); 
```

到

```
Storyboard.SetTargetName(anim, "aceSpades"); 
```

它奏效了。

# php - 我需要在 php 执行查询时显示加载图像

> ID：12696156
> 
> 赞同：-2
> 
> 时间：2012-10-02T18:34:25.370
> 
> 标签：php, javascript, css

> **可能重复：**
> [PHP：在执行 php 脚本时显示“正在加载”页面](https://stackoverflow.com/questions/3836663/php-display-a-loading-page-while-a-php-script-is-executing)

大家好，请在 php 执行查询并启动页面时显示 loading.gif 图像。

我似乎无法访问关于空白页面以将加载图像放在那里。它仅在页面完全加载时出现。请问谁能帮忙解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:38:31.123

```
$("#loadingGif").show()
$.ajax({
    type: "POST",
    url: "ajax.php",
    data: { var1:'val1' }
}).done(function(msg) {
    $("#loadinggif").hide();
}); 
```

# github - 在没有提交的情况下评论 Github 中的一行？

> ID：12696158
> 
> 赞同：84
> 
> 时间：2012-10-02T18:34:30.423
> 
> 标签：github, comments

在 github 中，您可以对提交中的行进行评论。有没有办法在查看分支中的文件时对一行进行评论，而无需特定的提交？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-01-23T13:00:04.310

不幸的是，在没有提交的情况下无法评论 Github 中的一行。

但是您可以在文件中创建指向行的链接（单击行并复制浏览器栏上的链接）。例如，您可以在问题中使用此链接来讨论代码行：

[https://github.com/sebastianbergmann/phpunit/blob/master/src/Runner/StandardTestSuiteLoader.php#L72](https://github.com/sebastianbergmann/phpunit/blob/master/src/Runner/StandardTestSuiteLoader.php#L72)

**更新**

您还可以按住 shift 来获取到一行行的链接

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-04T19:24:12.770

您应该至少有一个提交：您的初始导入；-) 因此，如果您之后从未接触过该文件，您仍然可以浏览您的主分支（或您进行初始导入的任何位置）。

要提交文件，请执行以下操作：

*   打开你的仓库的主页，例如这里的[Ruby on Rails](https://github.com/rails/rails)
*   浏览到您想要评论的文件，例如 Rails 的[.gitignore](https://github.com/rails/rails/blob/master/.gitignore)文件
*   有一个[叫做历史的按钮，点击它](https://github.com/rails/rails/commits/844e944465beb37bd19bdfdedc19eba54479f39e/.gitignore)可以查看这个文件的最新提交
*   查找提交并单击带有修订 ID 的链接

您现在应该可以评论该文件了。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-04-04T04:42:19.523

这篇博文提供了一种使用 github 内置评论功能的简单方法： [http ://astrofrog.github.io/blog/2013/04/10/how-to-conduct-a-full-code-review-在-github/](http://astrofrog.github.io/blog/2013/04/10/how-to-conduct-a-full-code-review-on-github/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-21T09:49:21.307

我想做同样的事情，进行代码审查。

我结束了：

1.  分叉回购
2.  在源代码中添加我的评论（例如`// TODO: ...`）
3.  提出拉取请求

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T14:47:37.413

如果您使用不同的工具来完成这项工作，这是唯一的方法。我使用 Fisheye 或 Review-Board 来进行预提交修订代码。

Review Board 是免费的，并且比 Fisheye 更好地处理预提交代码。

# postgresql - Postgres 哈希索引性能

> ID：12696162
> 
> 赞同：2
> 
> 时间：2012-10-02T18:34:42.913
> 
> 标签：postgresql

我有一个包含 1000 万个条目的表，其中一列是电子邮件地址。我想在这个列上创建一个哈希索引，因为查询都是关于相等比较的。

数据库：Postgres 8.3.3
机器：24GB Ram 和 16 核。

创建哈希索引大约需要 51 分钟，但是，如果我在电子邮件地址的小写字母上创建哈希索引，则只需不到 3 分钟！

例子：

*   `create index xyz on table_xyz using hash(email)`: 创建这个索引需要 51 分钟
*   `create index xyz on table_xyz using hash(lower(email))`：创建此索引需要 3 分钟。

我的 maintenance_work_mem 设置为 16MB。shared_buffers = 1GB

什么解释了这种行为？

# php - 逗号作为 en_CA 语言环境中 sprintf 中的小数分隔符

> ID：12696163
> 
> 赞同：2
> 
> 时间：2012-10-02T18:34:46.650
> 
> 标签：php, string-formatting, printf

是否可以在 en_CA 语言环境中的 sprintf 中使用逗号作为小数点分隔符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:45:44.203

sprintf 是区域设置感知的，并且将始终使用当前的区域设置，但您可以为此[使用 number_format](http://php.net/manual/en/function.number-format.php)。

# sql-server - 处理审计/历史更新触发器中的空值

> ID：12696167
> 
> 赞同：1
> 
> 时间：2012-10-02T18:35:01.950
> 
> 标签：sql-server, tsql, triggers, null, sql-server-2008-r2

假设我有两个表，一个“实时”表和一个历史表。实时表如下所示：

```
CREATE TABLE dbo.LiveTable (
    LiveTableId INT IDENTITY(1,1) NOT NULL PRIMARY KEY,
    SomeVarChar VARCHAR(20) NOT NULL DEFAULT '',
    SomeForeignId INT NULL,
    OtherForeingId INT NULL,
    ChangeBy VARCHAR(128) NOT NULL,
    ChangeTime DATETIME NOT NULL DEFAULT GETDATE()
) 
```

历史表看起来一样，除了它有自己的主键和在`IsDelete`别处使用的列。当用户更新 中的一行时`LiveTable`，我想在历史表中记录该行的先前值。当然，这很简单，只需一个`UPDATE`触发器。但我刚刚确定我的一些更新没有触发历史表插入，我相信这是由于允许空值的字段。我的触发器看起来像这样：

```
CREATE TRIGGER dbo.trgLiveTableUpdate ON dbo.LiveTable FOR UPDATE
AS
INSERT INTO dbo.LiveTableHistory (
    LiveTableId,
    SomeVarChar,
    SomeForeignId,
    OtherForeignId,
    ChangeBy,
    ChangeTime
)
SELECT 
    d.LiveTableId,
    d.SomeVarChar,
    d.SomeForeignId,
    d.OtherForeignId,
    d.ChangeBy,
    d.ChangeTime
FROM DELETED d
JOIN INSERTED i ON d.LiveTableId = i.LiveTableId
WHERE d.SomeVarChar <> i.SomeVarChar
OR d.SomeForeignId <> i.SomeForeignId   //<--- I don't think this works
OR d.OtherForeignId <> i.OtherForeignId //<--- this either 
```

是否有可能我的`WHERE`条件没有遇到更改的情况，`SomeForeignId`或者`OtherForeignId`因为这些列都允许空值？如果是这样，我将如何编写一个在检查这些列是否不相等时考虑空值的条件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T19:04:51.510

您还可以找到 EXCEPTions，它为您提供记录的密钥。

```
select 
    d.LiveTableId,
    d.SomeVarChar,
    d.SomeForeignId,
    d.OtherForeignId,
    d.ChangeBy,
    d.ChangeTime
from DELETED d
join
(
select LiveTableId, SomeVarChar, SomeForeignId, OtherForeignId from INSERTED
EXCEPT 
select LiveTableId, SomeVarChar, SomeForeignId, OtherForeignId from DELETED
) e on e.LiveTableId = d.LiveTableId 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T18:53:49.603

```
WHERE d.SomeVarChar <> i.SomeVarChar
OR ISNULL(d.SomeForeignId,-987654) <> ISNULL(i.SomeForeignId,-987654)
OR ISNULL(d.OtherForeignId,-987654) <> ISNULL(i.OtherForeignId,-987654) 
```

*请注意，-987654 只是您 ID 列中的一些未使用的数字。如果它链接回标识列 -1 就足够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T20:02:16.007

不是问题，但如果没有更改，请考虑停止更新。

如果没有更改，则可以阻止更新。

```
update live table  
set SomeVarChar  = 'a' 
where SomeVarChar is null or SomeVarChar  != 'a' 
```

如果一次只是一条记录，则不是一个因素。
但是当 99% 的值已经是 'a' 时，全局更新 SomeVarChar = 'a' 是很多非更新。

是的，修复触发器。

如果您遇到性能问题，需要考虑一些事情。

# mahout - 在学习 Mahout 之前我需要掌握 Hadoop 吗？

> ID：12696170
> 
> 赞同：2
> 
> 时间：2012-10-02T18:35:17.380
> 
> 标签：mahout

在学习 Mahout 之前我需要掌握 Hadoop 吗？在不学习 Hadoop 的情况下，我能走多远（为了使用数据挖掘功能）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T19:12:29.220

掌握？不。如果您使用的是基于 Hadoop 的项目部分，则需要基本知识，但足够了。如果您使用的部分不是基于 Hadoop，那么您根本不需要 Hadoop。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T06:29:29.577

Mahout 为您提供了可以让您进行数据挖掘的工具。是的，如果数据集很大，Mahout 还支持 Hadoop 实现，但如果没有 Hadoop 在单台机器上，它也能很好地实现。无论是否使用 Hadoop，相同的代码都可以工作（如果设置了 Hadoop 配置参数，则会选择 Hadoop）。了解 Hadoop 将为大数据的小猫增加额外的武器。

# javascript - 放大视频html5以防止全屏显示信箱黑边？

> ID：12696173
> 
> 赞同：0
> 
> 时间：2012-10-02T18:35:43.007
> 
> 标签：javascript, html, html5-video

HTML5的JS中有一种方法可以放大html5页面中的视频，以防止在全屏模式下出现黑边？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-22T15:00:45.143

看看这个...... [https://hacks.mozilla.org/2011/01/zooming-and-rotating-for-video-in-html5-and-css3/](https://hacks.mozilla.org/2011/01/zooming-and-rotating-for-video-in-html5-and-css3/)

缩放元素也许你可以做一些对你有帮助的事情......

# dynamics-crm - Dynamics CRM 2011：托管解决方案或将更改从 DEV 部署到 PRD

> ID：12696174
> 
> 赞同：5
> 
> 时间：2012-10-02T18:35:43.870
> 
> 标签：dynamics-crm, dynamics-crm-2011, microsoft-dynamics

对于 Dynamics CRM 2011，Microsoft 建议通过将更改打包为托管（或非托管）解决方案，将实体自定义从 DEV 转移到 PRD。非托管很糟糕，因为您无法在需要时删除实体（删除解决方案只会删除容器，解决方案中包含的实体仍然存在）。在培训期间的大多数实验室示例中，您将自定义系统，然后将自定义实体导出为托管解决方案，然后将其导入生产。这种基于解决方案的方法很干净，可以更轻松地控制 PRD 中的内容、将相关实体捆绑在一起、跟踪依赖关系等，所以我明白了。

但是，有时您需要将组织转储到 DEV 服务器上并从 PRD 恢复（以解决特定于数据的问题或出于其他原因）。我们通过禁用，然后删除 DEV 组织，然后要求 DBA 团队从生产中恢复 CRM 数据库来做到这一点，然后我们将组织导入回 DEV 服务器。但是，如果我们实施这种基于“托管解决方案”的变更迁移过程，在我们转储 DEV 并从 PRD 重新创建它之后，我们是否会失去更改实体的能力，这些解决方案处于只读模式？如果我们在这些托管解决方案中启用自定义，我们是否能够在不删除整个解决方案的情况下向解决方案添加新实体或从解决方案中删除实体？因为我认为托管解决方案被视为单个代码单元，所以要么全部删除，要么不删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:59:33.337

我们处理这个问题的一种方法是使用一个单独的干净的开发机器，我们用它来管理配置作为“配置主机”。该机器不用于任何其他开发或测试工作。插件等的开发机器可以从 prod 重建，但是这台机器仍然是所有解决方案的主机。不是一个理想的解决方案，但它确实避免了能够将托管解决方案转换为非托管解决方案的“功能差距”（可能通过一些密码工具）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-30T21:02:49.293

我建议不要在这种从开发到测试到生产的情况下使用解决方案。

如果您对此不确定，请尝试在您的开发环境中删除一个实体并将更改发布到您的生产环境。

解决方案具有包容性，这意味着 CRM 不会删除在您的解决方案中删除的字段和实体。

删除实体的唯一方法是卸载您的解决方案，因此删除您的解决方案涵盖的所有实体中的生产数据！

虽然理论上解决方案看起来很完美，但它们只对第三方供应商有用。

通过卸载您的解决方案来回滚的目标是一个白日梦。考虑一个涉及数据转换的数据模型更新。没有神奇的功能可以扭转这一点。

恢复备份要简单得多且可靠得多。

# c++ - 我会看到使用 std::map 而不是向量的性能提升吗 >?

> ID：12696177
> 
> 赞同：4
> 
> 时间：2012-10-02T18:35:57.227
> 
> 标签：c++, stl, stdvector, stdmap

我目前有一些我正在使用的`vector`代码`pair<string,string>`。这用于存储来自 XML 解析的一些数据，因此，该过程在某些地方非常缓慢。`vector<pair<string,string> >`在尝试加快整个过程方面，我想知道从 切换到是否会有任何性能优势`std::map<string,string>`？我可以对其进行编码并运行分析器，但我想我会看看我是否能得到一个答案，首先表明一些明显的性能提升。我不需要进行任何排序，我只需将项目添加到向量中，然后在稍后阶段迭代内容并进行一些处理 - 我不需要排序或任何类似性质的东西。我猜也许我不会获得任何性能提升，但我从未真正使用过`std::map`之前所以我不知道没有询问或编码。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T18:38:46.460

*不。如果（如您所说）您只是在集合上进行迭代*，您会看到使用`std::map`.

映射用于通过其键访问值。如果您从不这样做，那么 map 对于容器来说是一个糟糕的选择。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T18:47:54.453

如果您不修改您的`vector<pair<string,string> >`- 只是一遍又一遍地迭代它 - 您将使用`map`. 这是因为典型`map`是用对象的二叉树组织的，每个对象都可以分配在不同的内存块中（除非您编写自己的分配器）。此外，每个节点都`map`管理指向相邻对象的指针，因此也需要时间和内存开销。但是，按键搜索是 O(log) 操作。另一方面，`vector`将数据保存在一个块中，因此处理器缓存通常感觉更好。在向量中搜索实际上是 O(N) 操作，不是很好但可以接受。可以使用 lower_bound 等函数将排序向量中的搜索升级到 O(log)。

这取决于您对这些数据执行的操作。如果您进行多次搜索 - 可能最好使用散列容器，`unordered_map`因为在此容器中按键搜索是 O(1) 操作。如前所述，迭代`vector`更快。

可能值得`string`在您的`pair`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-02T18:45:54.627

答案取决于您对这些数据结构所做的工作以及它们的大小。如果您有数千个元素，并且您不断地反复`std::vector<std::pair<std::stringm std::string> >`搜索元素，则使用 a可能会提高性能（您可能要考虑将其用于此用例）。如果您的向量相对较小，并且您不经常尝试将元素插入中间，那么使用向量可能会更快。如果你只是迭代元素，向量比映射要快得多：迭代并不是它们的真正优势之一。地图擅长查找事物，假设元素的数量并不小，否则对向量的线性搜索仍然更快。`first``std::map<std::string, std::string>``std::unordered_map<std::string, std::string>`

确定时间花在哪里的最好方法是分析代码：通常并不完全清楚时间花在哪里。通常，可疑热点实际上是没有问题的，而其他区域则显示出意想不到的性能问题。例如，您可能将您的对象传递给我的值，而不是在某个不起眼的地方通过引用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T18:49:54.677

如果您的使用模式是在执行任何查找之前执行许多插入，那么您可能会受益于实现元素按需排序的“惰性”映射（即，当您获取迭代器、执行查找等时）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T18:57:35.647

正如 C++ 所说`std::vector`的对线性内存中的项目进行排序，所以首先它分配一个具有初始容量的内存块，然后当你想将新项目插入向量时，它会检查它是否有更多空间，如果没有，它将分配一个新的缓冲区有更多空间，将所有项目复制到新缓冲区中，然后删除源缓冲区并将其设置为新缓冲区。

当您刚开始将项目插入`vector`其中并且有很多项目时，您会遭受过多的重新分配、复制构造和析构函数调用。

为了解决这个问题，如果你现在计算输入项（不精确，但它通常的长度），你可以`reserve`为向量提供一些内存并避免重新分配和所有事情。如果您不知道大小，您可以使用像`std::list`女巫这样的集合，永远不要重新分配其内部项目。

# java - Java中的执行顺序

> ID：12696184
> 
> 赞同：5
> 
> 时间：2012-10-02T18:36:24.960
> 
> 标签：java, order-of-execution

我试图[从 Thinking in Java 中理解这个例子](http://www.linuxtopia.org/online_books/programming_books/thinking_in_java/TIJ309_009.htm)：

```
package c07;
import com.bruceeckel.simpletest.*;

class Meal {
    Meal() { System.out.println("Meal()"); }
}

class Bread {
    Bread() { System.out.println("Bread()"); }
}

class Cheese {
    Cheese() { System.out.println("Cheese()"); }
}

class Lettuce {
    Lettuce() { System.out.println("Lettuce()"); }
}

class Lunch extends Meal {
    Lunch() { System.out.println("Lunch()"); }
}

class PortableLunch extends Lunch {
    PortableLunch() { System.out.println("PortableLunch()");}
}

public class Sandwich extends PortableLunch {
    private static Test monitor = new Test();
    private Bread b = new Bread();
    private Cheese c = new Cheese();
    private Lettuce l = new Lettuce();

    public Sandwich() {
        System.out.println("Sandwich()");
    }

    public static void main(String[] args) {
        new Sandwich();
        monitor.expect(new String[] {
          "Meal()",
          "Lunch()",
          "PortableLunch()",
          "Bread()",
          "Cheese()",
          "Lettuce()",
          "Sandwich()"
        });
    }
} 
```

正如我从 Java 语言规范中了解到的那样，执行顺序从加载包含 main 方法的类开始。然后必须初始化这个类的所有静态变量和成员变量（在此之前必须初始化超类的所有成员变量，尽管在这种情况下没有这些成员变量）。

所以我认为`b`,`c`会在开始执行`l`之前被初始化。`main`不过，从输出来看，情况似乎并非如此。我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T18:40:32.683

不，`b`并且`c`是*实例*变量。

没有自动实例化包含`main`. 只有*静态*变量被初始化。就好像某个外部来电者写道：

```
Sandwich.main(args); 
```

所以当你写：

> 那么这个类的所有静态变量和成员变量都必须初始化

……那是错误的。只有静态变量被初始化——就像平常一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:41:37.833

示例输出是正确的。以下是重要的规则：

*   创建类时，必须首先调用超类的构造函数。这冒泡`Object`上课

*   在调用构造函数之前，会调用成员变量初始化。

此示例中不`static`涉及 s，除了技术`monitor`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T18:45:48.857

[JLS #12.4.1。初始化发生时](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.1)

类或接口类型 T 将在以下任何一项第一次出现之前立即初始化：

*   T 是一个类，并创建了一个 T 的实例。
*   T 是一个类，并且调用了 T 声明的静态方法。
*   分配了一个由 T 声明的静态字段。
*   使用了由 T 声明的静态字段，并且该字段不是常量变量（第 4.12.4 节）。
*   T 是一个顶级类（第 7.6 节），并且执行在词法上嵌套在 T（第 8.1.3 节）中的断言语句（第 14.10 节）。

[JLS #12.5。创建新的类实例](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.5)

> 每当创建一个新的类实例时，都会为其分配内存空间，并为该类类型中声明的所有实例变量和该类类型的每个超类中声明的所有实例变量（包括所有可能隐藏的实例变量）分配空间（ §8.3)。

# ios - 添加 UITapGestureRecognizer 时 UIImageView 崩溃

> ID：12696186
> 
> 赞同：0
> 
> 时间：2012-10-02T18:36:30.080
> 
> 标签：ios, uiimageview, gesture, uicontrol, uitapgesturerecognizer

```
@interface OOTRotaryWheel : UIControl

@property (weak) id <OOTRotaryProtocol> delegate;
@property (nonatomic, strong) UIView *container;
@property int numberOfSections;
@property CGAffineTransform startTransform;
@property (nonatomic, strong) NSMutableArray *sectors;
@property int currentSector;
@property (nonatomic, retain) UIImageView *mask;

- (id) initWithFrame:(CGRect)frame andDelegate:(id)del withSections:(int)sectionsNumber;
- (void)rotate;
- (void) buildSectorsEven;
- (void) buildSectorsOdd;

@end 
```

在我的 .m 文件中

我的初始化方法

```
mask = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 58, 58)];
mask.image =[UIImage imageNamed:@"centerButton.png"];
mask.center = self.center;
mask.center = CGPointMake(mask.center.x, mask.center.y+3);
UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(buttonPressedDown:)];
[mask addGestureRecognizer:singleTap];
[mask setMultipleTouchEnabled:YES];
[mask setUserInteractionEnabled:YES];

-(IBAction)buttonPressedDown
{
    //Connect this IBAction to touchDown
    mask.alpha = 0.5f;
    NSLog(@"tapping the center of the earth");
} 
```

当我点击图像时，它会因此消息而崩溃

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[OOTRotaryWheel buttonPressedDown:]: unrecognized selector sent to instance 0x71724e0'
*** First throw call stack: 
```

我以编程方式绘制了我的 UI，因此 Interface Builder 中没有 UI 元素。我的 UI 是一个故事板，但它是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:50:14.130

您在 buttonPressedDown: 的实现中忘记了冒号。要么去掉 singleTap 定义的 action 参数中的冒号，要么将冒号和参数添加到你的实现中。

# javascript - jQuery UI 对话框不允许我执行 AutoPostback

> ID：12696198
> 
> 赞同：0
> 
> 时间：2012-10-02T18:37:21.720
> 
> 标签：javascript, jquery, asp.net, jquery-ui-dialog

当我单击 RadioButton 时，我需要进行回发，以便它可以运行我的 RadioButton 代码。（AutoPostback="true"）。我在 jQuery UI 对话框中有我的单选按钮，当我单击该按钮时没有任何反应，并且出现错误：

> 未捕获的 Sys.WebForms.PageRequestManagerServerErrorException：Sys.WebForms.PageRequestManagerServerErrorException：处理服务器上的请求时发生未知错误。服务器返回的状态码是：404

我读到一些对话框实际上将自己置于表单之外？我将此添加到我的 Javascript 函数中以防止它：

```
function getFiles(canDo) {
        //create Popup with content from div
        $('#file').dialog({//file is the div where my controls are
            autoOpen: true,
            height: 'auto',
            width: 'auto',
            modal: true,
            buttons: {
                "Ok": function () {
                    debugger;

                },
                Cancel: function () {
                    $(this).dialog('close');

                }
            }
        });
        $('#file').appendTo($("form:first"));
    } 
```

关于为什么它不会成功回发的任何想法？或者为什么我得到那个错误？

我的控制：

```
 <ajaxToolkit:ToolkitScriptManager ID="ScriptManager1" runat="server" EnablePageMethods="true" />
    <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Always">
        <ContentTemplate>
                 <div id="casefiles">
            <%--<div id="rbfileByHolder" runat="server">--%>
                <label>
                    Sort By</label>
                <span>
                    <asp:RadioButton class="aspRBs" GroupName="rbfileByNameOrID" ID="rbMyFiles" Text="My Files"
                        Checked="true" runat="server" AutoPostBack="True" OnCheckedChanged="rbMyFiles_CheckedChanged" /></span>
                <span>
                    <asp:RadioButton class="aspRBs" GroupName="rbfileByNameOrID" ID="rbByFileID" Text="By File ID"
                        runat="server" AutoPostBack="True" OnCheckedChanged="rbByFileID_CheckedChanged" /></span>
                <span>
                    <asp:RadioButton class="aspRBs" GroupName="rbfileByNameOrID" ID="rbByFileName" Text="By File Name"
                        runat="server" AutoPostBack="True" OnCheckedChanged="rbByFileName_CheckedChanged" /></span>
           <%-- </div>--%>
            <br />
            <label>
                Select New CaseFile</label>
            <asp:DropDownList runat="server" ID="ddlCaseFiles" DataSourceID="dsMyCaseFiles" DataTextField="Display"
                DataValueField="FileID" OnPreRender="ddl_PreRender" Width="524px" 
                 />
            <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ControlToValidate="ddlCaseFiles"
                ToolTip="Casefile Required" InitialValue="-1" Text="*" Display="Dynamic" />
            <ajaxToolkit:ListSearchExtender ID="ddlExtCaseFiles" runat="server" PromptCssClass="ListSearchExtenderPrompt"
                TargetControlID="ddlCaseFiles" BehaviorID="ddlExtCaseFiles" Enabled="True" />
          </div>
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="rbByFileName" EventName="CheckedChanged" />
            <asp:AsyncPostBackTrigger ControlID="rbByFileID" EventName="CheckedChanged" />
            <asp:AsyncPostBackTrigger ControlID="rbMyFiles" EventName="CheckedChanged" />
        </Triggers>
    </asp:UpdatePanel>

    <%--<asp:UpdatePanel ID="UpdatePanel2" runat="server" UpdateMode="Conditional" ChildrenAsTriggers="true">
        <ContentTemplate>

        </ContentTemplate>

    </asp:UpdatePanel>--%>

<asp:SqlDataSource ID="dsCaseFiles" runat="server" ConnectionString="<%$ ConnectionStrings:OSCIDConnectionString %>" ProviderName="System.Data.SqlClient" SelectCommand="p_CaseFiles_ListActiveCaseFiles" SelectCommandType="StoredProcedure">
    <SelectParameters>
        <asp:SessionParameter Name="InvestigatorID" SessionField="InvestigatorID" />
    </SelectParameters>
</asp:SqlDataSource>
<asp:SqlDataSource ID="dsCaseFilesReverse" runat="server" ConnectionString="<%$ ConnectionStrings:OSCIDConnectionString %>" ProviderName="System.Data.SqlClient" SelectCommand="p_CaseFiles_ListActiveCaseFilesReverse" SelectCommandType="StoredProcedure">
    <SelectParameters>
        <asp:SessionParameter Name="InvestigatorID" SessionField="InvestigatorID" />
    </SelectParameters>
</asp:SqlDataSource>
    <asp:SqlDataSource ID="dsMyCaseFiles" runat="server" ConnectionString="<%$ ConnectionStrings:OSCIDConnectionString %>" ProviderName="System.Data.SqlClient" SelectCommand="p_CaseFiles_ListActiveCaseFilesAssignedTo" SelectCommandType="StoredProcedure">
        <SelectParameters>
            <asp:SessionParameter Name="InvestigatorID" SessionField="InvestigatorID" />
            <asp:SessionParameter Name="AssignedTo" SessionField="InvestigatorID" />
        </SelectParameters>
    </asp:SqlDataSource>
</form> 
```

# java - 如何使用 Java Play Framework 2.0.3 和 easyXDM 获取 PUT 请求数据

> ID：12696199
> 
> 赞同：2
> 
> 时间：2012-10-02T18:37:25.753
> 
> 标签：java, playframework, playframework-2.0

我正在尝试使用 easyXDM 从 Web 应用程序调用我自己的 Web 服务（Java Play 2.0.3）

这是我在客户端（网络）上的代码：

```
 var formValues = {
           email: $('#editUserEmail').val(),
           first_name: $('#editUserFirstName').val(),
           last_name: $('#editUserLastName').val()
  };

  this.xhr.request({
           url: "http://restserver.dev:9000/users/" + this.model.get('id'),
           method: "PUT",
           data: formValues
        }, function(response){
           console.log(response.data);

           var jsonResponse = JSON.parse(response.data);

           if (jsonResponse.status == 'success'){
              alert("saved successfully");
           }

        }); 
```

这是服务器（Java）的代码：

```
 final Map<String, String[]> values = request().body()
    .asFormUrlEncoded();

    // validating
    if (values.containsKey("first_name"))
        db_user.first_name  = values.get("first_name")[0];
    if (values.containsKey("last_name"))
        db_user.last_name = values.get("last_name")[0];
    if (values.containsKey("email"))
        db_user.email = values.get("email")[0]; 
```

它适用于 POST 方法，但每当我尝试使用 PUT 方法时，服务器无法以某种方式获取 PUT 请求正文数据（值为空）。我使用相同的代码将其更改为 POST 并且它工作正常。我在客户端或服务器端做错了吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:13:58.530

据我所知，并非所有浏览器都支持Ajax 请求上的**PUT**。这可能是您在这里遇到问题的原因。为了跨浏览器的兼容性，您应该坚持对 Ajax 调用使用 GET/POST。

# spring - Tomcat 池为空

> ID：12696201
> 
> 赞同：0
> 
> 时间：2012-10-02T18:37:41.823
> 
> 标签：spring, hibernate, tomcat, tomcat7

我们正在使用带有 tomcat-jdbc.jar 和 tomcat 池的 Tomcat 6（我们目前使用的是最新版本 7.0.28，但也尝试过使用以前的版本）。

这是在后端使用 PostgreSQL。

大约每 2 到 5 天一次（这是相当“随机”发生的），我们的服务器在大约 10 分钟的时间内耗尽了所有可用的数据库连接，我们在日志中看到了这些（我们已经打开了 FINE 日志记录） ):

```
2012-10-01 18:40:29,998 ERROR [TP-Processor29] JDBCExceptionReporter.logExceptions(72) | [TP-Processor29] Timeout: Pool empty. Unable to fetch a connection in 0 seconds, none available[size:150; busy:41; idle:0; lastwait:0].

2012-10-01 18:40:30,000 ERROR [TP-Processor29] JDBCExceptionReporter.logExceptions(72) | [TP-Processor29] Timeout: Pool empty. Unable to fetch a connection in 0 seconds, none available[size:150; busy:41; idle:0; lastwait:0]. 
```

我正在尝试追查此问题的根本原因。

当查看数据库并发生这种情况时，所有连接都显示为“IDLE”。

我们当前的配置如下所示：

```
 <bean id="dataSource" class="org.apache.tomcat.jdbc.pool.DataSource" destroy-method="close">
    <property name="driverClassName" value="org.postgresql.Driver"/>
    <property name="url" value="jdbc:postgresql://db/dbname?useUnicode=true&amp;characterEncoding=utf-8"/>
    <property name="username" value="postgres"/>
    <property name="password" value="postgres"/>
    <property name="initialSize" value="8"/>
    <property name="maxActive" value="150"/>
    <property name="maxIdle" value="10"/>
    <property name="maxWait" value="30"/>
    <property name="defaultAutoCommit" value="true"/>
    <property name="validationQuery" value="SELECT 1"/>
    <property name="validationInterval" value="60000"/>
</bean> 
```

而且，我们在 logging.properties 中的登录是：

```
org.apache.tomcat.jdbc.pool.level=FINE 
```

大多数时候，我们使用大约 15 到 20 个数据库连接，但是，正如我所提到的，问题是每隔几天，它就会迅速用完所有连接，并且需要重新启动。

我们试图将其归结为 Tomcat 池问题、Hibernate 问题、Spring 问题或应用程序问题。

首先，任何想法为什么：

A) 为什么显示：[size:150; 忙：41；空闲：0；lastwait:0] ...其他 150-41 个连接在哪里？

B）记录时，它显示连接何时打开，但不显示连接何时关闭。我们怎样才能打开它？

# json - 将 QString 对象传递给 Parser::parse() 时出错

> ID：12696203
> 
> 赞同：1
> 
> 时间：2012-10-02T18:37:49.530
> 
> 标签：json, qt, qjson

我正在使用 Qfile 读取 JSON 文件。将其存储到`Qstring`对象中。将`QStrin`g 对象传递给 时`Parser::parse()`，将编译错误显示为函数`parse()`仅接受`QIODevice*`或`const QByteArray&`作为第一个参数。

确切的错误信息是：

```
no matching function for call to QJson::Parser::(QString,bool*)

candidates are Qvariant QJson::Parser::parse(QIODevice*,bool*)

note QVariant Qjson::Parser::parse(const QByteArray&,bool*) 
```

我试图投到`QString`and `QIODevice`，`QByteArray`但都是徒劳的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:16:18.887

使用`QString::toUtf8()`，将 a 转换`QString`为 a`QByteArray`

# python - Python登录到电子邮件服务器身份验证错误

> ID：12696212
> 
> 赞同：9
> 
> 时间：2012-10-02T18:38:26.300
> 
> 标签：python, email, authentication

我在一台 Linux 机器上。我的公司有一个已经配置好的电子邮件交换服务器。我正在使用 Python 脚本尝试登录电子邮件服务器，以便以编程方式发送电子邮件。这是我到目前为止所拥有的 -

```
server = smtplib.SMTP('email-0.abc.com', 25)
server.set_debuglevel(1)
server.ehlo_or_helo_if_needed()    
server.login('abc/johndoe', 'pwd') 
```

但是，在 server.login 命令中，我收到错误消息

```
raise SMTPException("No suitable authentication method found.")
SMTPException: No suitable authentication method found. 
```

请问有谁知道是什么问题？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-15T21:00:06.847

您可能需要切换到 STARTTLS 身份验证。这是一个帮助我的例子。

[如何通过 SMTPLIB 在 Python 中发送电子邮件](http://www.mkyong.com/python/how-do-send-email-in-python-via-smtplib/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T18:44:39.187

您的邮件服务器似乎拒绝了普通的身份验证方法。

你用什么服务器？

如果是 MS Exchange 请看这篇文章：[http ://www.exchangeinbox.com/article.aspx?i=93](http://www.exchangeinbox.com/article.aspx?i=93)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-24T06:26:32.430

我遇到了同样的错误。我的情况可能与您的情况不同，但错误与您提到的相同。

在我的场景中，我不必通过用户名和密码进行身份验证，因为服务器 IP 已添加到 SMTP 邮件服务器的白名单中。我正在传递用户名和密码进行身份验证，这给了我一个错误，指出“找不到合适的身份验证方法”。

你可能不是这种情况，但我只是想分享我对同样错误的经验，以便任何来到这个线程的人都可以从中受益。

谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-20T14:58:29.443

我连接的 Exchange 服务器需要 NTLM 身份验证，`smtplib`开箱即用不支持。

截至撰写本文时（2022 年 1 月），根据我的适度研究，解决此问题的维护最多的 Python 库是[`pyspnego`](https://github.com/jborean93/pyspnego/). 以下代码段[由库作者提供，](https://github.com/jborean93/pyspnego/issues/29#issuecomment-1016784012)无需任何修改即可为我工作：

```
import base64
import spnego

from smtplib import SMTPException, SMTPAuthenticationError

def ntlm_authenticate(smtp, username, password):
    auth = spnego.client(username, password, service="SMTP", protocol="ntlm")
    ntlm_negotiate = auth.step()

    code, response = smtp.docmd("AUTH", "NTLM " + base64.b64encode(ntlm_negotiate).decode())
    if code != 334:
        raise SMTPException("Server did not respond as expected to NTLM negotiate message")

    ntlm_challenge = base64.b64decode(response)
    ntlm_auth = auth.step(ntlm_challenge)
    code, response = smtp.docmd("", base64.b64encode(ntlm_auth).decode())
    if code != 235:
        raise SMTPAuthenticationError(code, response) 
```

# entity-framework - EF 4.1 POCO 模板生成器与 ClassObjects.Context.cs 冲突

> ID：12696215
> 
> 赞同：0
> 
> 时间：2012-10-02T18:38:39.720
> 
> 标签：entity-framework, entity-framework-4, entity-framework-4.1

我一直在使用 EF 4.1 和 POCO 模板生成器。

我又爱又恨 EF。我喜欢我节省的时间。我讨厌维护 EDMX 文件。

但是，虽然保持 EDMX 与数据库同步一直是一个挑战，但我现在对 POCO 生成器感到不知所措。到目前为止，POCO 生成器已经为我创建了 POCO，并将 ClassObjects.Context.cs 保持为空且不冲突。

在我最近一次刷新之后，我一直遇到“'perseus.DataLayer.accounts'和'perseus.DataLayer.accounts'之间的关系”问题。

对于每个 POCO，我都会收到此错误。

我正处于恐慌的边缘，因为我建议并拥有 EF 的维护。我花了几天时间尝试从数据库刷新到从 EDMX 文件中删除所有项目并从数据库中重新加载它们的所有内容。

没有任何改变。我不知道过去几个月的*相对*稳定突然发生了什么变化。我非常迷茫，不知道我能从这里做什么。

![在此处输入图像描述](../Images/fffbc66f381d5c6b79eef882c40a9eb3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:57:45.990

在我看来，您没有禁用代码生成策略。点击设计器背景，查看属性选项卡，第一项是代码生成策略。这应该说无，而不是默认。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T14:17:39.313

手动编辑 edmx 很困难并且容易出错。我建议将您拥有的内容复制到另一个位置，然后让该工具为您重新生成 edmx。比较两者。

我使用了一些必须手动同步的 DB2 实体，并且经常遇到问题。该工具会破坏我的更改，我必须手动将其替换为工作代码。

如果可能的话，不要自己修改 edmx 代码。如果必须进行更改，请将其复制到项目中的文本文件中以进行跟踪/安全保存。

# jquery - 将属性数组传递给 jquery 对话框

> ID：12696216
> 
> 赞同：0
> 
> 时间：2012-10-02T18:38:39.777
> 
> 标签：jquery, jquery-ui-dialog

CreateTemplate、OpenTemplate 和许多其他 Jquery 对话框设置大部分时间使用相同的设置，但高度和宽度有例外。

是否可以通过所有键/值设置的数组的 jquery .dialog() 函数排序，以便我可以轻松地始终传递该数组？

```
 $(document).ready(function () {

        // I would like to setup here sort of an array with properties and values
        // as basis for each click-handler

            /************************* Open template ****************************/
            $('#OpenTemplate').click(function (e) {
                e.preventDefault();
                var link = this;

                $('#MyDialog').dialog({
                    open: function (e) { $(this).load($(link).attr('href')); },
                    title: link.innerHTML,
                    autoOpen: true,
                    modal: true,
                    show: 'fade',
                    hide: 'fade',
                    width: 250,
                    height: 200,
                    buttons:
                    { 
                        "OK": function () { openTemplate($(this), $('form', this)); },
                        "Cancel": function () { $(this).dialog("close"); }
                    }
                });
            });

            /************************* Create template ****************************/
            $('#CreateTemplate').click(function (e) {
                e.preventDefault();
                var link = this;

                $('#MyDialog').dialog({
                    open: function (e) { $(this).load($(link).attr('href')); },
                    title: link.innerHTML,
                    autoOpen: true,
                    modal: true,
                    show: 'fade',
                    hide: 'fade',
                    width: 250,
                    height: 200,
                    buttons:
                    {
                        "OK": function () { createTemplate($(this), $('form', this)); },
                        "Cancel": function () { $(this).dialog("close"); }
                    }
                });
            });

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:03:19.673

我会尝试做这样的事情：

```
var dialogObject = { title: 'Title', width: 250 };
$('#CreateTemplate').dialog(dialogObject); 
```

此对象可以包含所有您知道在所有对话框中都相同的值。如果您想更改高度，可以通过执行以下操作来更改现有对话框：

```
$('#dialog-confirm').attr('height', '250'); 
```

如果需要在 dialogObject 中添加按钮：

```
var dialogObject = { 
     title: 'Title', 
     width: 250,
     buttons: { 
     "Ok": function() 
      { 
        $(this).dialog("close"); 
      } 
    }   
}; 
```

# jquery - 带有旋转背景图像的全宽jQuery视差滚动轮播？（如 Humaan.com.au）

> ID：12696218
> 
> 赞同：2
> 
> 时间：2012-10-02T18:38:41.603
> 
> 标签：jquery, carousel, parallax

我正在寻找一个 jQuery 包来帮助我实现一个与[http://www.humaan.com.au/](http://www.humaan.com.au/)上的非常相似的全角轮播。关键要求是：

1.  背景跨越整个浏览器宽度
2.  背景图像是高分辨率的
3.  各种 HTML 项目以不同的速度从侧面或顶部突入。每张幻灯片可能有不同的 HTML 元素动画。
4.  有直接转到幻灯片的分页按钮
5.  最好有一个像人类一样的加载图标（类似于 Zurb 的轨道滑块）

我查看了 sequence.js，它看起来非常接近，但我找不到任何演示它在旋转背景图像时全角运行。

任何帮助将非常感激。

这是一张基本上总结了我的需求的图片：

![在此处输入图像描述](../Images/e62687c4870308e4b40115d21175276c.png)

# java - Spring MVC @Controller 方法签名

> ID：12696222
> 
> 赞同：4
> 
> 时间：2012-10-02T18:38:52.360
> 
> 标签：java, spring-mvc

当我通过注释类来创建控制器时，是否有一种简单的方法可以查看所有可能的方法签名`@Controller`？

我找不到列出所有这些的弹簧文档。从他们的指南来看，在我不知道我可以返回什么或我可以在方法参数中使用什么的地方似乎**非常灵活。**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-02T19:10:37.703

您应该再次查看[Spring MVC 参考文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html)。在“[定义@RequestMapping 处理程序方法](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-methods)”一章中，列出并解释了所有内容：

*   [所有可能的参数](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-arguments)
*   [所有可能的返回类型](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-return-types)
*   所有可能的方法/参数注释，每一个都有其子章节：@RequestParam、@RequestBody、@ResponseBody、@ModelAttribute 等。

# memory - C#内存不足错误

> ID：12696223
> 
> 赞同：0
> 
> 时间：2012-10-02T18:39:15.570
> 
> 标签：memory

我已经尝试了几个小时来解决这个问题。当它执行时，它将一直运行，直到系统内存不足。我尝试处理使用后创建的 bmp，它没有任何区别。我还尝试处理 webbrowser，但随后我需要在具有正确高度/宽度等的循环上运行网页以捕获它。我尝试创建一个新的网络浏览器，它循环然后处理的所有内容，但它不会工作。谁能看到这里可能发生的事情？

循环：

```
 wbcondor1.AllowNavigation = true;
        wbcondor1.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(wbcondor1_DocumentCompleted);
        wbcondor1.Navigate("blanked out"); 
```

文件完成

```
 private void wbcondor1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        Bitmap condor1bmp = new Bitmap(600, 1000);
        wbcondor1.DrawToBitmap(condor1bmp, new Rectangle(wbcondor1.Location.X, wbcondor1.Location.Y, wbcondor1.Width, wbcondor1.Height));

        if (Convert.ToString(condor1bmp.GetPixel(553, 558)) == "Color [A=255, R=232, G=30, B=48]") { c1to1.Text = "lower"; }
        if (Convert.ToString(condor1bmp.GetPixel(553, 584)) == "Color [A=255, R=232, G=30, B=48]") { c1to2.Text = "lower"; }
        if (Convert.ToString(condor1bmp.GetPixel(553, 608)) == "Color [A=255, R=232, G=30, B=48]") { c1to3.Text = "lower"; }
        if (Convert.ToString(condor1bmp.GetPixel(553, 633)) == "Color [A=255, R=232, G=30, B=48]") { c1to4.Text = "lower"; }
        if (Convert.ToString(condor1bmp.GetPixel(553, 658)) == "Color [A=255, R=232, G=30, B=48]") { c1to5.Text = "lower"; }

        if (Convert.ToString(condor1bmp.GetPixel(553, 558)) == "Color [A=255, R=0, G=175, B=88]") { c1to1.Text = "higher"; }
        if (Convert.ToString(condor1bmp.GetPixel(553, 584)) == "Color [A=255, R=0, G=175, B=88]") { c1to2.Text = "higher"; }
        if (Convert.ToString(condor1bmp.GetPixel(553, 608)) == "Color [A=255, R=0, G=175, B=88]") { c1to3.Text = "higher"; }
        if (Convert.ToString(condor1bmp.GetPixel(553, 633)) == "Color [A=255, R=0, G=175, B=88]") { c1to4.Text = "higher"; }
        if (Convert.ToString(condor1bmp.GetPixel(553, 658)) == "Color [A=255, R=0, G=175, B=88]") { c1to5.Text = "higher"; }
        // bmp.Save("condor1.gif");
        condor1bmp.Dispose();
    } 
```

谢谢大家，希望有人能看到我所缺少的:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:42:13.863

如果抛出异常，

```
condor1bmp.Dispose(); 
```

不会被调用。

始终使用*using*语句来包装实现*IDisposable*的东西。

除此之外，除了实际内存不足之外，还有很多事情会在使用位图时导致 OutOfMemoryException。

有关几种可能性，请参阅

[创建位图时 C# 内存不足](https://stackoverflow.com/questions/4318563/c-sharp-out-of-memory-when-creating-bitmap)

您的压力测试是否有可能达到这些条件之一？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T20:33:12.957

只是为了让人们知道谁遇到了这个错误。第 x 行内存不足。这是 Internet Explorer 本身的问题。可以通过在 IE 设置中关闭活动脚本来禁用 javascript 来停止它。

# sql - SQL：真正的转置

> ID：12696225
> 
> 赞同：5
> 
> 时间：2012-10-02T18:39:16.510
> 
> 标签：sql, sql-server, sql-server-2008, pivot, transpose

我知道枢轴和非枢轴。那不是我想要的。Pivot 和 unpivot 聚合数据，但这不是我想要的。

将表格视为矩阵（线性代数）。如果我从一个 mxn 矩阵开始，我想将该矩阵（表）转换为一个 nxm 矩阵。我想要一个真正的[TRANSPOSE](http://en.wikipedia.org/wiki/Transpose)。

我怎样才能在 SQL 中做到这一点？

例如，如果我有：

```
1  2  3
1  2  4
6  7  8
3  2  1
3  9  1 
```

那么结果应该是：

```
1  1  6  3  3
2  2  7  2  9
3  4  8  1  1 
```

请注意，行数变为列数，反之亦然。另请注意，我没有对任何数据进行分组或汇总。源中存在的每个值都存在于结果中，并且它们的 xy 坐标已被交换。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-02T19:13:50.107

我不确定为什么你认为你不能用 an`UNPIVOT`和 a来完成这个`PIVOT`：

```
select [1], [2], [3], [4], [5]
from 
(
  select *
  from
  (
    select col1, col2, col3,
      row_number() over(order by col1) rn
    from yourtable
  ) x
  unpivot
  (
    val for col in (col1, col2, col3)
  ) u
) x1
pivot
(
  max(val)
  for rn in ([1], [2], [3], [4], [5])
) p 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/ed3ea/9)。如果需要，这也可以动态执行。

编辑，如果需要保留列顺序，那么您可以使用类似这样的东西，它在`row_number()`不使用 a的情况下应用`order by`表中的一个列（这里是[一篇关于使用非确定性行号](http://www.sqlmag.com/article/sql-server/nondeterministic-row-numbers)的文章）：

```
select [1], [2], [3], [4], [5]
from 
(
  select *
  from
  (
    select col1, col2, col3,
      row_number() 
        over(order by (select 1)) rn
    from yourtable
  ) x
  unpivot
  (
    val for col in (col1, col2, col3)
  ) u
) x1
pivot
(
  max(val)
  for rn in ([1], [2], [3], [4], [5])
) p; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/ed3ea/23)

# objective-c - GCD / 没有 ARC 泄漏的块

> ID：12696226
> 
> 赞同：2
> 
> 时间：2012-10-02T18:39:20.883
> 
> 标签：objective-c, ios, memory-management, objective-c-blocks, grand-central-dispatch

我在以下使用 GCD 的代码中有泄漏。注意：我没有使用 ARC。泄漏恰好在

```
__block NSMutableArray *newImages = [NSMutableArray new];

dispatch_async(serialQueue, ^{

    for (NSDictionary *imageData in results) {

        NSURL *url = [NSURL URLWithString:[imageData objectForKey:@"url"]];
        NSURLRequest *request = [NSURLRequest requestWithURL:url];

        NSError *error = nil;
        NSHTTPURLResponse *response = nil;
        NSData *imageData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

        if (error == nil && imageData != nil && response.statusCode == 200) {
            UIImage *image = [UIImage imageWithData:imageData];
            [newImages addObject:image];
        }

        else {
            self.errorLabel.text = @"An error has occured downloading some images.";
            [self.spinner stopAnimating];
        }
    }
}); 
```

根据仪器，我在以下位置泄漏：`[newImages addObject:image];`。为什么会这样泄漏？`newImages`是一个自动释放的对象，如上所示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T19:10:40.143

`newImages`不是自动释放的。[`new`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/doc/uid/20000050-new)返回一个拥有的引用——它相当于`[[SomeClass alloc] init]`.

# android - 不使用 GPS 的“车速表”

> ID：12696229
> 
> 赞同：1
> 
> 时间：2012-10-02T18:39:25.580
> 
> 标签：android, iphone, gps, smartphone

如何在不需要 GPS 的情况下计算速度？我听说过一种叫做“传感器技术”的东西，但不确定那是什么意思。我问是因为我想制作一个应用程序，但我认为使用 GPS 的电池效率不高，而且它是一个长期项目，所以我希望应用程序连续运行而无需手动打开它或打开 GPS。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T18:43:00.677

GPS 是迄今为止最准确的方法。

您可以访问加速度计，但它们对于此类应用程序来说不够精确。

我能想到的唯一另一种方法是将其中一个蓝牙适配器插入汽车的诊断端口，然后从那里获取速度表输入。然后，您也在浪费蓝牙电源。

只需为您的手机购买电源适配器即可在车辆上运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T18:52:01.983

我尝试使用 Android 的**加速度计传感器**测量室内导航项目的速度，但失败得很惨。我打算从随着时间的加速度/减速度推导出当前速度，因此最后计算沿 X、Y 和 Z 轴的运动，但这根本没有结果。普通安卓设备的加速度传感器对于这种用途来说太不准确了。

因此，您将不得不使用 GPS。为了减少电池消耗，您可以增加`LocationManager`通知您的应用程序的间隔（时间和/或距离）。查看它的[requestLocationUpdates()](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28java.lang.String,%20long,%20float,%20android.location.LocationListener%29)方法的 minTime 和 minDistance 参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T09:00:35.957

Android 允许您使用手机天线和 wi-fi 接入点天线作为参考点来确定您当前的位置，而无需使用 GPS（请参阅：[locationManager.NETWORK_PROVIDER](http://developer.android.com/reference/android/location/LocationManager.html#NETWORK_PROVIDER)）。

一旦确定了您在两个不同时刻/点的位置，您就可以轻松地在代码中计算您的速度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T18:45:53.843

我认为您所指的将被视为“航位推算”（[http://en.wikipedia.org/wiki/Dead_reckoning](http://en.wikipedia.org/wiki/Dead_reckoning)）并且是可能的，但会导致漂移和不正确的速度信息，特别是如果您的应用程序的用户没有将设备牢固地安装到正在移动的任何物体上。

您的应用程序进入睡眠状态并关闭 GPS 是否是一个有效的用例？当您将应用程序解除暂停状态时，您也许可以设计一种重新打开 GPS 的方法。如果您总是需要位置，那么 GPS 是您最好的选择。人们知道基于 GPS 的应用程序需要电源，并且会想出一种插入电源以长期使用它的方法。

也许您应该考虑一下您的应用程序的用例，并询问人们是否愿意为您提供的任何功能耗尽电池电量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-26T09:46:01.073

使用加速度和时间，您可以计算速度的变化，但您不一定知道起始速度。再加上 iPhone 中的加速度计可能还不够准确，但这也不是坏事。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T18:44:44.770

我认为没有 GPS 的帮助就无法计算速度。速度取决于距离和时间。我不确定我们是否可以像那样计算距离。无论如何看看[http://developer.android.com/reference/android/hardware/Sensor.html](http://developer.android.com/reference/android/hardware/Sensor.html) 我们有不同的传感器类型。也许你可以利用其中之一。

# facebook - 拨打 Facebook 的 /me/feed 连接，但我的个人资料上没有帖子

> ID：12696231
> 
> 赞同：0
> 
> 时间：2012-10-02T18:39:40.167
> 
> 标签：facebook, api, facebook-graph-api

我刚刚获得了访问令牌`publish_stream`，但是当我在浏览器中访问以下网址时，它没有在我的墙上发布消息；它只显示所有提要内容。

有什么问题，我只想通过访问下面的 URL 在墙上发布一条简单的消息；我在某个地方错了吗？

```
https://graph.facebook.com/me/feed?access_token={REMOVED}&message=hello 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:54:20.220

两件事情

1.  这是一个 GET 请求，而不是 POST 请求 - 如果由于某种原因您无法通过代码或 SDK 发出 POST 请求，您可以通过添加`&method=post`到请求中来模拟一个

2.  您在问题中包含了您的访问令牌（现已删除） - 我强烈建议您尽快在 Facebook 上更改您的密码

# python - 尝试将 Gtk.Application 与 python 一起使用，但无法处理打开

> ID：12696232
> 
> 赞同：4
> 
> 时间：2012-10-02T18:39:56.067
> 
> 标签：python, gtk3

我试图让 Gtk.Application 保持唯一并处理打开的文件。我在带有 Gtk3 的 Ubuntu 12.04 上使用 python 2.7.3（对 python 和 Gtk 来说都是新的）

该应用程序在没有参数的情况下运行良好，但是当我运行它试图打开文件时它无法获取文件列表。这是代码，尽可能简约：

```
#!/usr/bin/env python
import sys
from gi.repository import Gtk, Gio

def do_open(app, files, *hint):
    print(app)
    print(files)
    print(hint)

def do_activate(app):
    print "activate"

test = Gtk.Application(application_id="a.b", flags=Gio.ApplicationFlags.HANDLES_OPEN)
test.set_inactivity_timeout(10000)
test.connect("open", do_open)
test.connect("activate", do_activate)
test.run(sys.argv) 
```

当我不带参数运行程序时，它只会打印“激活”，这很好。当我使用参数（如 ./test.py test.py）运行它时，我得到以下信息：

```
/usr/lib/python2.7/dist-packages/gi/types.py:43: Warning: g_value_get_boxed: assertion `G_VALUE_HOLDS_BOXED (value)' failed
return info.invoke(*args, **kwargs)
<Application object at 0x1c75230 (GtkApplication at 0x1cba0b0)>
[]
(1, '') 
```

有谁明白为什么该断言失败以及为什么我得到一个空的文件列表？

尽管这个任务看起来很常见，但我也无法在网上找到任何工作示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T19:05:15.157

PyGObject 中有一个错误。它已在 GNOME Bugzilla 中报告，请查看标题为“[不处理信号参数中的 GFile](https://bugzilla.gnome.org/show_bug.cgi?id=678673) ”的错误报告。

**更新**：该错误已在 2013 年修复。不再断言，它返回文件列表 (GFiles)。换句话说，代码按预期工作（至少使用 3.14）：

```
$ python test.py test.py
<Application object at 0x7fcaf18f5d20 (GtkApplication at 0x11892b0)>
[<__main__.GLocalFile object at 0x7fcaf18a6050 (GLocalFile at 0x11aea00)>]
(1, '') 
```

# typescript - 打字稿中的 module.exports

> ID：12696236
> 
> 赞同：95
> 
> 时间：2012-10-02T18:40:11.853
> 
> 标签：typescript, import, commonjs

有人知道如何做一个module.exports吗？

我尝试了一些不同的方法

```
export class Greeter {} 
```

这将编译为

```
exports.Greeter = Greeter; 
```

但我真正想要的是：

```
exports = Greeter; 
```

这样我就可以像这样使用它：

```
import { Greeter } from "greeter";

const greeter = new Greeter(); 
```

并不是

```
import { Greeter } from "greeter";

const greeter = new Greeter.Greeter(); 
```

打字稿可以做到这一点吗？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2016-11-01T09:48:34.267

您可以像这样在 TypeScript 中导出单个类：

```
class Person {

  private firstName: string;
  private lastName: string;

  constructor(firstName: string, lastName: string) {
    this.firstName = firstName;
    this.lastName = lastName;
  }

  public getFullName() {
    return `${this.firstName} ${this.lastName}`;
  }
}

export = Person; 
```

以下是它的使用方式：

```
var Person = require('./dist/commonjs/Person.js');

var homer = new Person('Homer', 'Simpson');
var name = homer.getFullName();

console.log(name); // Homer Simpson 
```

完整地说，这是我的**tsconfig.json**（我使用的是 TypeScript v2.0.3）：

```
{
  "compilerOptions": {
    "module": "commonjs",
    "moduleResolution": "node",
    "outDir": "dist/commonjs",
    "rootDir": "src/ts",
    "target": "es5"
  },
  "exclude": [
    "dist",
    "node_modules"
  ]
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-06-28T11:42:46.657

这现在已经实现并且在 TypeScript 0.9 中已经准备好了:)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-12-31T06:09:20.797

所以我想我找到了解决方法。只需将关键字 'module' 包含在 .ts 文件中的括号中：

```
declare var module: any;
(module).exports = MyClass; 
```

生成的 javascript 文件将完全相同：

```
(module).exports = MyClass; 
```

请注意，比自己声明 var 模块更好，下载[node.d.ts 定义文件](https://github.com/borisyankov/DefinitelyTyped)并将其粘贴在与您的 typescript 文件相同的目录中。这是一个 express node.js 路由文件的完整示例，它假设 node.d.ts 位于同一目录中：

```
/// <reference path="node.d.ts" />
var SheetController = function () {
    this.view = function (req, res) {
        res.render('view-sheet');
    };
};
(module).exports = SheetController; 
```

然后我可以新建一个 SheetController 并（使用 express）分配视图方法：

```
var sheetController = new SheetController();
app.get('/sheet/view', sheetController.view); 
```

我想任何关键字都可以使用这种模式进行转义：

```
declare var reservedkeyword: any;
(reservedkeyword).anything = something; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-05T18:42:12.860

这是丑陋和hacky，但你仍然可以这样做：

```
class Greeter {}
declare var exports:any;
exports = Greeter; 
```

编译成：

```
var Greeter = (function () {
    function Greeter() { }
    return Greeter;
})();
exports = Greeter; 
```

# html - Django 和 POST 请求：表单的意外行为

> ID：12696237
> 
> 赞同：0
> 
> 时间：2012-10-02T18:40:14.477
> 
> 标签：html, django, forms, post

**网址.py**

```
from django.conf.urls.defaults import patterns, include, url
import myproject.views

urlpatterns = patterns('', (r'^$', myproject.views.home), (r'^login$', apolla.views.login)) 
```

**视图.py**

```
import django.http
import django.template
import django.shortcuts

def home(request):
    return django.http.HttpResponse("Welcome home!")

def login(request):
    un = request.POST.get('username')
    pa = request.POST.get('password')
    di = {'unam': un, 'pass': pa}   
    if un and pa:
        di['act'] = "/"
    else:
        di['act'] = "/login"
    return django.shortcuts.render_to_response('login.html', di, 
      context_instance=django.template.RequestContext(request))    
    # Why does this code not send me immediately to "/" with 
    # username and password filled in? 
```

**登录.html**

```
<html>
<head>
</head>
<body>
<form name="input" method="post" action="{{ act }}">
{% csrf_token %}
Username: 
<input type="text" name="username"><br>
Password: 
<input type="password" name="password"><br> 
<input id="su" type="submit" value="Submit"><br>
</form>
</body>
</html> 
```

当我运行开发服务器并进入`localhost:8000/login`并填写 a`username`并`password`按下提交按钮时，我没有`localhost:8000/`像我预期的那样从我的登录功能发送到`views.py`，我只是返回到`localhost:8000/login`. 但是当我填写任何字段并第二次提交时，我会被定向到`localhost:8000`.

我还使用`print un`and来查看帖子是否从and字段`print pa`中捕获了数据，并且它从第一次开始就这样做了，那么为什么我没有从第一次提交时被定向到并同时填写了and字段呢？`username``password``localhost:8000/login``username``password`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T21:08:11.353

您可以通过以下方式将重定向添加到您的视图：

```
from django.http import HttpResponseRedirect

def foo_view(request):
    # ...
    return HttpResponseRedirect('/') 
```

# javascript - 更改外部网站上的元素值

> ID：12696238
> 
> 赞同：0
> 
> 时间：2012-10-02T18:40:19.667
> 
> 标签：javascript, jquery, html

我有这样一个问题 - 我想更改某个外部网站上某个元素的值。

即：我有受密码保护的网络摄像头 http 界面，并且有一个带有运动检测复选框和“应用”按钮（表单提交）的页面。我想创建具有某种延迟切换运动检测的简单程序（因此我可以启动该程序并在运动检测开始之前有时间离开建筑物）。所以我想更改复选框状态并将此更改写入系统。我尝试过这样的事情，但这不起作用：

```
 jQuery.get("http://admin:password@192.168.0.1:12345/motion-page.asp",
       function(data){
         $('input[name="checkbox1"]').prop('checked', false);
         // and there "simulate" clicking on Apply button - submit the form -- don't know how ...
       }
 ); 
```

请问有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:10:23.517

我会从您提交相机表单时显示的页面回溯。查看表单本身是否将“打开相机”变量作为 GET 或 POST 提交。如果您已经知道这一点，那么您所要做的就是从相机访问与表单相同的 URL（假设它可以在这样的网络上通过 HTTP 访问）并提交相同的变量集。

如果您不想打开浏览器来执行此操作，您可以自己编写一个自定义应用程序来为您提交它，但无论哪种方式，您都必须打开一些东西才能提交，因为脚本必须等待 [X] 数量提出请求之前的时间。最快的方法是通过浏览器。

我不确定您是否需要 jquery（我几乎从不使用 jquery）。我会在脚本方面做什么，因为仅访问此脚本意味着您最有可能想要激活计时器，将是在 javascript 中创建一个计时器对象，然后制作一个访问相机表单提交的 URL 的单个函数使用 GET 字符串参数（如果可以通过 GET 实现，这是最简单的，因为您不必构建表单），或者，如果它是 POST，则让函数构建表单并通过 POST 将表单提交到相同的 URL。

谷歌如何在 javascript 中创建计时器，以及谷歌如何自动提交表单。如果您能自己解决，为您编写代码将浪费我的时间。如果没有，请回来看看我们能做些什么:) 祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:47:36.097

为什么不在点击提交按钮之后，或者在选中该框之后，让 javascript 实际运行一个计时器？如果这更适合您，请查看 js 或 jquery 中的计时器功能。不确定您是否需要将其写入磁盘或其他任何东西......因为您没有提供太多信息，但是您想要记录的任何数据都可以在选中该框时捕获，并且可以在计时器时与表单一起提交用尽。在 jquery 中提交表单很简单： [http](http://api.jquery.com/submit/) ://api.jquery.com/submit/ :)

# c++ - openssl API 的 G++ 编译错误

> ID：12696240
> 
> 赞同：0
> 
> 时间：2012-10-02T18:40:29.213
> 
> 标签：c++, openssl

我在编译 openssl 函数以使用 G++ 编译器从公共证书获取到期日期时遇到问题。

错误是，

```
error: expected unqualified-id before ‘not’ token
error: expected primary-expression before ‘)’ token 
```

编译过程，

```
g++  main.c -o test -I /usr/include/openssl/ -lcrypto -lssl 
```

包含所有头文件。

下面我编译的代码，

```
 main ()
{
        X509 *x;

        int n=0;

        unsigned char *not;            //expected unqualified-id before ‘not’ token ,expected initializer before ‘not’ token
        BIO *out;
        FILE *fp=fopen("/home/public.cer", "r");

        x = X509_new();
        x = PEM_read_X509(fp,NULL,NULL,NULL);
        fclose(fp);

        out = BIO_new(BIO_s_mem());
        ASN1_TIME_print(out, X509_get_notAfter(x));//expected primary-expression before ‘)’ token
        n = BIO_get_mem_data(out, &not);
        expiryStr = (char *) malloc (n+1);
        expiryStr[n] = '\0';
        memcpy(expiryStr, not, n);//expected primary-expression before ‘)’ token
    printf("Expiry Date====================%s\n",expiryStr);
        BIO_free(out);

        X509_free(x);        
} 
```

请帮我解决这个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T18:43:35.593

“not”是 C++ 中的关键字：http: [//en.cppreference.com/w/cpp/keyword](http://en.cppreference.com/w/cpp/keyword)。您必须重命名变量。

# ios - 如何为 iPhone 5 切换到不同的 Storyboard？

> ID：12696242
> 
> 赞同：27
> 
> 时间：2012-10-02T18:40:31.557
> 
> 标签：ios, xcode, ios6, uistoryboard, iphone-5

就像一个应用程序为 iPad 和 iPhone 使用不同的故事板一样，我希望我的应用程序为 iPhone 5 使用不同的故事板。由于 Info.plist 中没有选择 iPhone 5 的默认故事板的选项，我将如何以编程方式调用故事板？

我不想为这个应用程序使用自动布局，除非它绝对是最后的手段。我了解如何检测用户是否使用 iPhone 5 或具有相同屏幕尺寸的其他设备。我只需要知道如何在没有 plist 的情况下设置默认情节提要。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-02T18:48:51.923

几周前我一直在寻找相同的答案，这是我的解决方案，希望对您有所帮助..

```
-(void)initializeStoryBoardBasedOnScreenSize {

    if ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPhone)
{    // The iOS device = iPhone or iPod Touch

    CGSize iOSDeviceScreenSize = [[UIScreen mainScreen] bounds].size;

    if (iOSDeviceScreenSize.height == 480)
    {   // iPhone 3GS, 4, and 4S and iPod Touch 3rd and 4th generation: 3.5 inch screen (diagonally measured)

        // Instantiate a new storyboard object using the storyboard file named Storyboard_iPhone35
        UIStoryboard *iPhone35Storyboard = [UIStoryboard storyboardWithName:@"Storyboard_iPhone35" bundle:nil];

        // Instantiate the initial view controller object from the storyboard
        UIViewController *initialViewController = [iPhone35Storyboard instantiateInitialViewController];

        // Instantiate a UIWindow object and initialize it with the screen size of the iOS device
        self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

        // Set the initial view controller to be the root view controller of the window object
        self.window.rootViewController  = initialViewController;

        // Set the window object to be the key window and show it
        [self.window makeKeyAndVisible];
    }

    if (iOSDeviceScreenSize.height == 568)
    {   // iPhone 5 and iPod Touch 5th generation: 4 inch screen (diagonally measured)

        // Instantiate a new storyboard object using the storyboard file named Storyboard_iPhone4
        UIStoryboard *iPhone4Storyboard = [UIStoryboard storyboardWithName:@"Storyboard_iPhone4" bundle:nil];

        // Instantiate the initial view controller object from the storyboard
        UIViewController *initialViewController = [iPhone4Storyboard instantiateInitialViewController];

        // Instantiate a UIWindow object and initialize it with the screen size of the iOS device
        self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

        // Set the initial view controller to be the root view controller of the window object
        self.window.rootViewController  = initialViewController;

        // Set the window object to be the key window and show it
        [self.window makeKeyAndVisible];
    }

    } else if ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad)

    {   // The iOS device = iPad

    UISplitViewController *splitViewController = (UISplitViewController *)self.window.rootViewController;
    UINavigationController *navigationController = [splitViewController.viewControllers lastObject];
    splitViewController.delegate = (id)navigationController.topViewController;

    }
} 
```

在 AppDelegate ddiFinishLaunchingWithOptions: 方法下调用此方法并且也不要正确忘记故事板的名称

希望有帮助...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T14:24:12.833

这对我有用 - 通过将故事板包装在一个函数中进行轻微改进

```
-(UIStoryboard*) getStoryboard {   
    UIStoryboard *storyBoard = nil;
    if ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad) {         
        storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPad" bundle:nil];
    }else{
        if ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPhone){
            // The iOS device = iPhone or iPod Touch
            CGSize iOSDeviceScreenSize = [[UIScreen mainScreen] bounds].size;
            if (iOSDeviceScreenSize.height == 480){
                // iPhone 3/4x
                storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone_4" bundle:nil];

            }else if (iOSDeviceScreenSize.height == 568){
                // iPhone 5 etc
                storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone_5" bundle:nil];
            }
        }
    }

    ASSERT(storyBoard);
    return storyBoard;
}

UIStoryboard* mainStoryBoard = [self getStoryboard];
    self.initialViewController = [mainStoryBoard instantiateInitialViewController];
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window.rootViewController = self.initialViewController;
    [self.window makeKeyAndVisible]; 
```

# wpf - 如何根据项目在屏幕上显示的顺序选择列表框中的项目

> ID：12696245
> 
> 赞同：-1
> 
> 时间：2012-10-02T18:40:39.433
> 
> 标签：wpf, listbox, listboxitem

我的 WPF 应用程序中有一个`ListBox`。该`ListBox's` `ItemsSource`属性设置为我定义的对象集合。这些都是从`UserControl`.

我需要`ListBox`按照它们出现在屏幕上的顺序循环遍历这些项目。我相信我可以通过遍历`ListBox's` `Items`集合来做到这一点。

我相信这个集合中的对象是 type `ListBoxItem`。我如何从`ListBoxItem`? 换句话说，我如何获得`UserControl`从`ListBoxItem`?

编辑：

我应该首先包含的其他信息：

我需要`Items`按照它们出现的顺序循环，`ListBox`这样我就可以选择最接近顶部的匹配特定条件的那个。找到我感兴趣的那个之后，我需要选择它。这是一个单一的选择`ListBox`，所以一次只会选择一个项目。

所以，我的问题真的是：如何选择项目？

这并不重要，但我的类型下降的原因`UserControl`是因为它包含许多需要在`ListBox`每个项目中显示的控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:44:26.033

这`Items`正是您设置它们或`ItemsSource`to 的内容（通常应该是数据对象，而不是`UserControls`），因此您只需要将它们转换为您的类型。

> 这并不重要，但我的类型来自 UserControl 的原因是因为它包含许多需要在 ListBox 中为每个项目显示的控件。

这*不是*一个好的理由。在 WPF 中，您应该使用数据项并使用[数据绑定](http://msdn.microsoft.com/en-us/library/ms752347.aspx)和[数据模板](http://msdn.microsoft.com/en-us/library/ms742521.aspx)来使用相应的控件显示数据。

同样要选择给定的项目，数据项应该具有一个`IsSelected`属性，然后可以将其绑定[`ItemsControl.ItemContainerStyle`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemcontainerstyle.aspx)到该[`ListBoxItem.IsSelected`](http://msdn.microsoft.com/en-us/library/system.windows.controls.listboxitem.isselected.aspx)属性中。

如果您随后将项目设置为`IsSelected`，则也应选择`true`相应的项目（您需要在项目上实施）。`ListBoxItem`[`INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T17:08:48.717

我发现我需要以`Items`相反的顺序遍历集合中的项目。我不知道为什么会这样，我认为该`Items`系列按照它们在屏幕上出现的顺序保存了所有内容。也许是因为 ListBox 在`DateTime`基础数据的属性上按降序排序？

无论如何，由于我必须向后循环，我最终不得不编写一个`for`从集合末尾开始并向前工作的循环。由于我现在有了要选择的项目的索引，因此很容易设置`ListBox.SelectedIndex`为该索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T20:27:49.840

为什么不简单地选择符合条件的第一项：

```
Func<ItemType, bool> match =
    item =>
    {
        return ...; // a bool that indicates if the condition is matched
    };

listBox.SelectedItem = listBox.Items.Cast<ItemType>().FirstOrDefault(match); 
```

# c# - 奇怪的错误（输入字符串的格式不正确。）

> ID：12696246
> 
> 赞同：1
> 
> 时间：2012-10-02T18:40:43.270
> 
> 标签：c#, winforms, exception, types, compiler-errors

这是我的代码：

```
namespace Class_Properties {
    public partial class Form1 : Form {
        private string firstHeight1 = "";
        public int firstHeight {
            get {
                        return Convert.ToInt32( firstHeight1 );
            }
        }

        public Form1() {
            InitializeComponent();
        }

        private void button1_Click( object sender, EventArgs e ) {
            firstHeight1 = textBox2.Text;

            Form2 secondForm = new Form2();
            secondForm.Show();
        }
    }
} 
```

然后是另一个类：

```
namespace Class_Properties {
    public partial class Form2 : Form {
        public Form2() {
            InitializeComponent();
            Form1 mainWindow = new Form1();
            this.Height = mainWindow.firstHeight;
        }
    }
} 
```

当我运行时，我键入`200`值`textbox2`并单击`button1`，然后 Visual Studio 会出现以下异常：

![在此处输入图像描述](../Images/9539a31d1c31ce73d2b3a4d879c48f3e.png)

我能做些什么来解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:46:45.993

这是失败：

```
 InitializeComponent();
        Form1 mainWindow = new Form1();
        this.Height = mainWindow.firstHeight;  //<-- 
```

无论您在 other 上做了什么`Form1`，它都不会出现在这个中，因为它是一个新实例，因此`firstHeight == string.Empty`解析失败。

您必须将现有的 Form1 发送到 Form2：

```
public Form2(Form1 parent)
{
    this.Height = parent.firstHeight;
}

// called like so from Form1:
var form2 = new Form2(this); 
```

虽然不可否认，最好只发送您需要的内容：

```
public Form2(int desiredHeight)
{
    this.Height = desiredHeight;
}

// called like so from Form1:
var form2 = new Form2(this.firstHeight); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:46:37.637

当`Form2`你说：

```
Form1 mainWindow = new Form1();
this.Height = mainWindow.firstHeight; 
```

您没有访问`Form1`之前使用的内容，而是创建了一个带有空文本框值的全新内容。

您应该做的是在创建时将高度值传递给第二种形式：

```
public Form2(int height) 
{
   // use height here
} 
```

并在按钮中单击：

```
Form2 secondForm = new Form2(firstHeight);
secondForm.Show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T18:46:40.973

你可以做这样的事情。

```
public int? FirstHeight
{
    get
    {
        int? returnValue = null;

        int temp;
        if (int.TryParse(textBox2.Text, out temp))
        {
            returnValue = temp;
        }

        return returnValue;
    }
} 
```

然后，您只需在需要该值时调用该`FirstHeight`属性：

```
if (FirstHeight.HasValue)
{
    // Access the int value like so:
    int height = FirstHeight.Value;
} 
```

如果你不想使用 Nullable 类型，你可以这样做：

```
public int FirstHeight
{
    get
    {
        int returnValue; // Or some other default value you can check against.

        if (!int.TryParse(textBox2.Text, out returnValue))
        {
            // If the call goes in here, the text from the input is not convertable to an int.
            // returnValue should be set to 0 when int.TryParse fails.
        }

        return returnValue;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T18:43:37.020

抛出异常时 firstHeight1 的值是多少？

您可能想查看 int.TryParse() 代替：

```
int output = 0;
int.TryParse(firstHeight1, out output);
return output; 
```

如果它无法解析该值，则不会设置`output`，而不是引发异常。

有关 int.TryParse 的更多信息：http: [//msdn.microsoft.com/en-us/library/f02979c7.aspx](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)

编辑：问题是您正在重新实例化 Form1，并且该值从未在 Form2 的 Form1 的新实例中设置。您应该将 Form2 中的属性设置为该值。

```
class Form2
{
    public int FirstHeight { get; set; }
} 
```

...

```
Form2 form2 = new Form2();
form2.FirstHeight = this.FirstHeight;
form2.Show(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T18:45:06.917

由于您的`firstHeight1`is并且在类型`String.Empty`中找不到空字符串的等效项 。`Int`因此错误..

在您的 Form2 实例中，该值仍然是`String.Empty`. 首先将其设置为某个值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T18:50:00.847

你的代码看起来像

```
public int FirstHeight
 {
   get
     {
      double Num;
      bool isNum = double.TryParse(firstheight1, out Num);
      if (isNum)
     {
       return firstheight1;
      }
    else
    {
     return 0; or 
     your message goes here 
    } 
```

} }

# ssis - 如何在不使用输出变量的情况下在 SSIS 中执行 Web 服务任务？

> ID：12696247
> 
> 赞同：2
> 
> 时间：2012-10-02T18:40:50.843
> 
> 标签：ssis

我创建了一个 SSIS 项目，运行一个 Web 服务任务来执行一个功能。一切运行良好，但输出变量的赋值出现错误： `The type of variable being assigned to the variable differs from the current variable type.`

我实际上不需要它返回输出变量，但是，任务属性并没有给我没有输出变量的选项。

目前 webservice 是一种`void`类型，但我也尝试让它返回`true`并将变量类型设置为`boolean`. 我得到了同样的错误。在这种情况下，我不确定我需要做什么来分配变量，但我宁愿它根本不寻找输出变量。

有人可以帮我弄清楚如何

1.  没有输出变量或
2.  任意分配**true** / **1** / **""**的输出，以便它不会返回错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-25T16:34:39.660

这是一个老问题，但我遇到了同样的问题，所以值得发布一个答案。

正如您所说，SSIS 实际上不允许您没有输出变量。如果您的 webservice 方法返回 void，您需要设置一个 Object 类型的变量并将其用作输出变量。

# jqmodal - jquery mobile：隐藏列表项后数据过滤器不起作用

> ID：12696248
> 
> 赞同：1
> 
> 时间：2012-10-02T18:40:52.090
> 
> 标签：jqmodal

我正在尝试为我的用户提供两种过滤列表的方法；通过数据过滤器和几个按钮。

这些按钮使用类属性来删除列表项组。在我的实际应用程序中，我需要在大约 8 个类别之间切换；或全部展示。

因此，我编写了例程“filterCategories”，其中 .hide() 所有项目，然后 .show() 只是我想要显示的类别。这工作正常。（我不能使用嵌套列表，因为这些项目是按特定顺序排列的 - 不是按类别顺序排列的）

但是，在 .hide() 和 .show() 之后，数据过滤器不再适用于隐藏的项目。.hide() 似乎从 listview-filter 中删除了项目。

我尝试了 listview('refresh') 并没有帮助。

还有其他方法可以做到这一点吗？

谢谢，杰夫

（下面的精简版...点击“删除 10s”，然后在搜索栏中输入 22。应该只出现“项目 22”。）

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet"  href="//code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <script src="//code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="//code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
 </head>

<script type="text/javascript" >
function filterCategories(showme){
    if (showme == 'all') {
        $('li.all').show(); 
    } else {
        $('li.all').hide();
        $('li.'+showme).show();
    }
    $('#itemResults').listview('refresh');
}

$( '#Page1' ).live( 'pageinit',function(event){
  });

</script>

  <body>
    <div data-role="page" id="Page1">
    <div data-role="content">
            <ul data-role="listview" id="itemResults" data-filter="true">
                <li class="" onclick="filterCategories( '20s' );"><a 
href="#">Remove 10s</a></li>    
                <li class="" onclick="filterCategories( '10s' );"><a 
href="#">Remove 20s</a></li>    
                <li class="all 10s" ><a href="#">Item 11</a></li>   
            <li class="all 20s" ><a href="#">Item 22</a></li>   
            <li class="all 10s" ><a href="#">Item 13</a></li>   
                <li class="all 20s" ><a href="#">Item 24</a></li>   
                <li class="all 10s" ><a href="#">Item 15</a></li>   
                <li class="all 20s" ><a href="#">Item 26</a></li>   
            </ul>
    </div>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:23:47.557

我遇到了完全相同的问题，经过多次故障排除后，我找到了解决方案：您必须添加或删除类“ui-screen-hidden”，而不是使用 $('li-element').hide() 或 .show()。

```
$('li-element').removeClass("ui-screen-hidden"); 
```

或者

```
$('li-element').addClass("ui-screen-hidden"); 
```

# typescript - 如何在 TypeScript 中自定义属性

> ID：12696250
> 
> 赞同：17
> 
> 时间：2012-10-02T18:40:59.240
> 
> 标签：typescript, defineproperty

如何让 TypeScript 发出属性定义，例如：

```
Object.defineProperties(this, {
    view: {
        value: view,
        enumerable: false,
        writable: false,
        configurable: false
    },
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T21:42:25.497

你可以在 TypeScript 中使用`get`and `set`，它编译成`Object.defineProperties`.

这是 ECMAScript 5 的一个特性，所以如果你的目标是 ES3（编译器的默认值），你就不能使用它。如果您乐于以 ES5 为目标，请添加`--target ES5`到您的命令中。

打字稿：

```
class MyClass {
    private view;
    get View() { return this.view; }
    set View(value) { this.view = value }
} 
```

编译为：

```
var MyClass = (function () {
    function MyClass() { }
    Object.defineProperty(MyClass.prototype, "View", {
        get: function () {
            return this.view;
        },
        set: function (value) {
            this.view = value;
        },
        enumerable: true,
        configurable: true
    });
    return MyClass;
})(); 
```

但是，如果您想完全控制设置可枚举和可配置 - 您仍然可以使用原始`Object.defineProperties`代码。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-02-27T16:39:25.743

当我偶然发现[TypeScript Handbook: Decorators](https://www.typescriptlang.org/docs/handbook/decorators.html)时，我正在寻找完全相同的东西。在“方法装饰器”段落中，他们定义`@enumerable`了装饰器工厂，看起来像这样（我只是从那里复制粘贴）：

```
function enumerable(value: boolean) {
    return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {
        descriptor.enumerable = value;
    };
} 
```

他们像这样使用它：

```
class Greeter {
    greeting: string;
    constructor(message: string) {
        this.greeting = message;
    }

    @enumerable(false)
    greet() {
        return "Hello, " + this.greeting;
    }
} 
```

所以解决它的另一种方法是使用装饰器。

**PS：** 此功能需要`experimentalDecorators`将标志传递给`tsc`或设置在`tsconfig.json`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T18:43:02.880

如果您希望像这样发出所有属性，则当前不支持此功能。我建议在[CodePlex 网站](http://typescript.codeplex.com/)上提交一个问题，详细说明您的用例和要求是什么。

如果你用 --target ES5 编译，你可以有这样的东西：

```
class n {
    get foo() { return 3; }
    bar() { return 5; }
} 
```

产生此代码：

```
var n = (function () {
    function n() { }
    Object.defineProperty(n.prototype, "foo", {
        get: function () {
            return 3;
        },
        enumerable: true,
        configurable: true
    });
    n.prototype.bar = function () {
        return 5;
    };
    return n;
})(); 
```

# ruby-on-rails - 使用 Devise 的条件 Flash 消息

> ID：12696251
> 
> 赞同：0
> 
> 时间：2012-10-02T18:41:11.077
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我知道在`config/locales`我可以更改与 Rails Devise gem 一起使用的各种 Flash 消息（sign_in/sign_out/etc）的文本。

我的问题是，我是否可以根据变量或其他东西来设定条件。

目前在sign_out 过程中，Devise 会自动放一个flash 消息，表示成功退出。在我的应用程序中，有时我会强制用户注销（例如，他们的会员资格已过期）。我目前强制注销，但随后弹出“已成功注销”。我想在他们确实自己退出时保留该消息，但如果应用程序强制他们退出，则会发布有关其成员资格的通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:57:48.180

我认为有一个更好的主意是您应该需要覆盖设计控制器，然后根据需要设置任何闪存消息。

这会帮助你

[覆盖设计注册控制器](https://stackoverflow.com/questions/3546289/override-devise-registrations-controller)

# ormlite-servicestack - ServiceStack ORMLite - 选择列

> ID：12696254
> 
> 赞同：7
> 
> 时间：2012-10-02T18:41:30.523
> 
> 标签：ormlite-servicestack

我最近开始使用 ServiceStack 及其 ORMLite 框架。我在谷歌上搜索并浏览了源代码，但找不到任何相关的东西。

使用 ORMLite 执行查询时，有什么方法可以选择特定列？类似的东西：`Db.First<Model>(q => q.Id == someId, "Column1, Column2")`

除非我错过了这个功能，否则我很惊讶之前没有人问过这个问题，因为这是优化数据库事务的经验法则之一。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T19:38:16.597

如果要指定表以外的列，则需要使用 SQL，如[前面的示例中所示](https://stackoverflow.com/a/8617860/85785)

因此，在您的情况下，您可以执行以下操作：

```
Db.First<Model>("SELECT Column1, Column2 FROM AnyTableOrView"); 
```

`[Alias]`您还可以通过使用属性装饰来创建查看表格的部分模型，例如：

```
[Alias("AnyTableOrView")]
public class Model {
    public int Id { get; set; }
    public string Column1 { get; set; }
    public string Column2 { get; set; }
} 
```

然后您可以执行以下操作：

```
Db.First<Model>(q => q.Id == someId); 
```

它只会从部分模型中选择 + 填充字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T15:07:12.163

我确实试过这个：

1.  创建了一个数据库视图（表名和列已经设置）
2.  创建了一个名为“Event”的类，并将该表的每个字段与一个属性匹配（我使用 [Alias] 作为表名，并且所有列都具有好听的名称）
3.  写入对 DB 的访问以根据其 ID 选择 1 条记录

    ```
     var dbFactory = new OrmLiteConnectionFactory(
            "Data Source=MyDB;User Id=user;Password=pwd",  // Connection String
            OracleDialect.Provider);

        using (var db = dbFactory.OpenDbConnection())
        {
                var event = db.GetByIdOrDefault<Event>( request.Id );
        } 
    ```

此时填充了 var 'event' 但仅填充了 Id 字段！该类的所有其他字段都未填充（虽然数据库中确实有数据）。

这是我能做的最简单的事情，但它不起作用。有任何想法吗 ？（PS：我正在使用 OrmLite for Oracle）

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T16:09:25.060

我发现了问题。这是由于我的类中的字段（定义为字符串）和相应的 Oracle 字段（即 DATE）之间的类型匹配不正确。

我用 datetime 替换了字符串，并像一个魅力一样工作。

所以它与 VIEW 完美配合，这极大地简化了代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T17:19:22.573

我遇到了类似的问题，但是我的解决方案有所不同。

我的 POCO 中有一个 int 属性。我的查询（来自 Oracle）为此属性返回空值。它导致引发异常并阻止对该行的进一步处理。结果是部分填充了 POCO。

解决方案是将类型更改为可为空的。

```
public int? mypropperty 
```

# javascript - Javascript函数参数问题

> ID：12696255
> 
> 赞同：1
> 
> 时间：2012-10-02T18:41:30.867
> 
> 标签：javascript, jquery

我正在尝试将参数传递给函数。我有：

```
function test(var1, var2, var3, var4, callBack, Scroll, punc, var5){
    codes....
} 
```

当我调用函数时：

```
test('a','b','c','d','e'); 
```

我想`'e'`代替`var 5`参数`callback`。有什么办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T18:42:55.217

`test('a','b','c','d',null,null,null,'e');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T18:42:56.450

这实际上取决于您的函数，但假设它接受缺少回调，您可以这样做：

```
test('a','b','c','d', undefined, undefined, undefined, 'e'); 
```

如果确实需要回调，请执行以下操作：

```
test('a','b','c','d',function(){}, undefined, undefined, 'e'); 
```

# c - mdb 工具 sql 查询表名空间分隔

> ID：12696259
> 
> 赞同：0
> 
> 时间：2012-10-02T18:41:42.413
> 
> 标签：c, eclipse, mdbtools

我正在尝试为我的 .mdb 数据库进行 ODBC 查询。我正在使用 mdbtools 驱动程序。代码是使用 Eclipse 用 C 语言编写的。唯一的问题是，当我写例如：

> “从 MyTable 组中选择‘上周’”

它不起作用，因为它无法识别表格字段中的空格分隔符。我不知道 MDB 工具驱动程序使用的 SQL 语法。

MyTable 字段是：

```
ID   jobs  last week  
1     ..      ...  
2  
... 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T08:20:19.757

要使用空格分隔名称，您需要使用方括号。

```
"SELECT [last week] FROM MyTable GROUP" 
```

这也适用于表名。

# c++ - CrtDebug 堆栈溢出？

> ID：12696261
> 
> 赞同：1
> 
> 时间：2012-10-02T18:42:02.650
> 
> 标签：c++, c, visual-studio-2010, debugging, crt

我遇到了无法调试的访问冲突。

我似乎在 CRT 调用中遇到了某种递归错误`_CrtCheckMemory`。

以下是调用堆栈（底部-> 顶部），其中`...`刚刚删除了重复的消息。

```
msvcr100d.dll!__chkstk()    Unknown
msvcr100d.dll!_VCrtDbgReportA(int nRptType, const char * szFile, int nLine, const char * szModule, const char * szFormat, char * arglist) Line 252  C
msvcr100d.dll!_CrtDbgReportV(int nRptType, const char * szFile, int nLine, const char * szModule, const char * szFormat, char * arglist) Line 242   C
msvcr100d.dll!_CrtDbgReport(int nRptType, const char * szFile, int nLine, const char * szModule, const char * szFormat, ...) Line 258   C
msvcr100d.dll!_CrtCheckMemory() Line 1817   C++
msvcr100d.dll!_heap_alloc_dbg_impl(unsigned __int64 nSize, int nBlockUse, const char * szFileName, int nLine, int * errno_tmp) Line 383 C++
msvcr100d.dll!_nh_malloc_dbg_impl(unsigned __int64 nSize, int nhFlag, int nBlockUse, const char * szFileName, int nLine, int * errno_tmp) Line 239  C++
msvcr100d.dll!_calloc_dbg_impl(unsigned __int64 nNum, unsigned __int64 nSize, int nBlockUse, const char * szFileName, int nLine, int * errno_tmp) Line 601  C++
msvcr100d.dll!_getptd_noexit() Line 470 C
msvcr100d.dll!_XcptFilter(unsigned long xcptnum, _EXCEPTION_POINTERS * pxcptinfoptrs) Line 202  C
msvcr100d.dll!_callthreadstartex$filt$0() Line 316  C
msvcr100d.dll!__C_specific_handler(_EXCEPTION_RECORD * ExceptionRecord, void * EstablisherFrame, _CONTEXT * ContextRecord, _DISPATCHER_CONTEXT * DispatcherContext) C
ntdll.dll!0000000077989d0d()    Unknown
ntdll.dll!00000000779791af()    Unknown
ntdll.dll!00000000779b1278()    Unknown
msvcr100d.dll!__chkstk()    Unknown
...
msvcr100d.dll!_VCrtDbgReportA(int nRptType, const char * szFile, int nLine, const char * szModule, const char * szFormat, char * arglist) Line 298  C
msvcr100d.dll!_CrtDbgReportV(int nRptType, const char * szFile, int nLine, const char * szModule, const char * szFormat, char * arglist) Line 242   C
msvcr100d.dll!_CrtDbgReport(int nRptType, const char * szFile, int nLine, const char * szModule, const char * szFormat, ...) Line 258   C
msvcr100d.dll!_CrtCheckMemory() Line 1817   C++
msvcr100d.dll!_heap_alloc_dbg_impl(unsigned __int64 nSize, int nBlockUse, const char * szFileName, int nLine, int * errno_tmp) Line 383 C++
msvcr100d.dll!_nh_malloc_dbg_impl(unsigned __int64 nSize, int nhFlag, int nBlockUse, const char * szFileName, int nLine, int * errno_tmp) Line 239  C++
msvcr100d.dll!_calloc_dbg_impl(unsigned __int64 nNum, unsigned __int64 nSize, int nBlockUse, const char * szFileName, int nLine, int * errno_tmp) Line 601  C++
msvcr100d.dll!_getptd_noexit() Line 470 C
msvcr100d.dll!_errno() Line 280 C
msvcr100d.dll!_VCrtDbgReportA(int nRptType, const char * szFile, int nLine, const char * szModule, const char * szFormat, char * arglist) Line 298  C
msvcr100d.dll!_CrtDbgReportV(int nRptType, const char * szFile, int nLine, const char * szModule, const char * szFormat, char * arglist) Line 242   C
msvcr100d.dll!_CrtDbgReport(int nRptType, const char * szFile, int nLine, const char * szModule, const char * szFormat, ...) Line 258   C
msvcr100d.dll!_CrtCheckMemory() Line 1817   C++
msvcr100d.dll!_free_dbg_nolock(void * pUserData, int nBlockUse) Line 1288   C++
msvcr100d.dll!_free_dbg(void * pUserData, int nBlockUse) Line 1265  C++
msvcr100d.dll!_freefls(void * data) Line 622    C
msvcr100d.dll!_freeptd(_tiddata * ptd) Line 683 C
msvcr100d.dll!_endthreadex(unsigned int retcode) Line 365   C
msvcr100d.dll!_callthreadstartex() Line 315 C
msvcr100d.dll!_threadstartex(void * ptd) Line 297   C
kernel32.dll!000000007729652d() Unknown
ntdll.dll!000000007798c521()    Unknown 
```

任何想法可能导致此问题或有关如何进行调试的建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T19:08:53.430

嗯，有点悲剧。它试图生成一个诊断信息来告诉您堆已损坏。报告代码尝试获取*errno*的值以显示它，但这是一个按需分配的静态 CRT 变量。所以它分配内存。哪个死了，堆损坏了。这会触发诊断以告诉您堆已损坏。你可以猜到其余的，这个过程一直持续到堆栈用完。

一种解决方法是将这段代码添加到 main（或线程）的开头：

```
 int dummy = errno; 
```

因此 CRT 在堆损坏之前分配内存。你仍然必须找到腐败的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T18:50:53.433

实际上，您的主要问题是您的内存已损坏，现在当程序要退出时，它想释放其内部分配的内存（用于存储每个线程数据的内存），并且由于您使用的是调试版本，因此它将检查其内存和了解失败并开始显示断言窗口，现在当它想要显示其断言窗口时，它需要分配一些内存并使用内存分配例程（在这种情况下`malloc`将转换为`malloc_dbg`）来分配其所需的内存和`malloc_dbg`检查内存状态并了解您的内存损坏并尝试再次显示断言窗口，此过程将重复。请检查您的动态内存分配（甚至检查静态定义的数组以进行覆盖）以解决您的内存损坏和堆栈溢出将自动解决

# html - 对 XPath 感到困惑

> ID：12696265
> 
> 赞同：0
> 
> 时间：2012-10-02T18:42:16.833
> 
> 标签：html, xpath

谈到 XPath 中的索引，我觉得我在这里遗漏了一些东西。

如果我在 HTML 文档中有两个表格标签，并在 Chrome 控制台中键入

```
$x("//table[1]");
```

，我希望得到页面上的第一个表格标签。

相反，我得到一个包含两个表标签的列表。我怀疑这可能与使用有关

```
//
```

但是使用绝对 XPath 表达式会产生相同的结果。

我认为这是一个非常简单的误解，但是在阅读文档时我没有看到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:44:24.190

`//table[1]`返回作为其各自父项的第一个子表的所有表。

要获得第一个表，请使用`/descendant::table[1]`或在 XPath 2.0`(//table)[1]`中。

[这](http://www.w3.org/TR/2010/REC-xpath20-20101214/#abbrev)是标准中的：

> 路径表达式//para[1] 与路径表达式/descendant::para[1] 的含义不同。后者选择第一个后代 para 元素；前者选择作为其各自父母的第一个 para 孩子的所有后代 para 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:45:20.520

利用

```
(//table)[1] 
```

即所有表格中的第一个。

# javascript - JavaScript (jQuery) 拖放支持

> ID：12696266
> 
> 赞同：0
> 
> 时间：2012-10-02T18:42:20.203
> 
> 标签：javascript, jquery, drag-and-drop

是否有任何库添加了对使用 jQuery 或纯 JavaScript 构建的标准拖放功能的支持？我会喜欢 jQuery UI 以外的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:43:42.987

您最好的选择是使用[jQuery UI Draggable](http://jqueryui.com/demos/draggable/)。但是还有其他选项，例如[script.aculo.us](http://madrobby.github.com/scriptaculous/draggable/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:45:16.030

[http://threedubmedia.com/code/event/drag](http://threedubmedia.com/code/event/drag)是一个很棒的拖动 jquery 插件，如果您正在寻找 jquery ui 的替代品

# javascript - 获取自动递增的 div id，以便它可以与 ajax 一起使用以将值返回给 php

> ID：12696268
> 
> 赞同：-1
> 
> 时间：2012-10-02T18:42:28.820
> 
> 标签：javascript, jquery

使用 mysql_query 结果创建一个如下所示的 html 表单，其中 div id 的前缀值自动递增：

```
<div id="favorite'.$count.'">
  <form action="javascript:void(0);" method="post">
    <input type="hidden" name="sec" value="'.$ident_inpt.'"/>
    <input type="hidden" name="t" id="t'.$count.'" value="mo-'.$usr.'-'.$rmid.'-'.$_SESSION['STORE'].'"/>
    <input type="submit" value="'.$lang['590'].'" class="favorites" onclick="upd_favorite();"/>
  </form>
</div> 
```

我怎样才能获得最喜欢的### 和 t### 的 id，以便我可以让循环继续？

我使用它，但仅适用于静态 ID：

`$('#favorite').html(ajaxRequest.responseText);`

和： `var addit = document.getElementById("t").value;`

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:44:53.930

您可以使用以下内容。演示：http: [//jsfiddle.net/MCkRk/](http://jsfiddle.net/MCkRk/)

```
$('div[id^=favorite]').each(function() {
  console.log('inputval', $(this).find('input[id^=t]').val());
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:59:28.033

您还可以跨元素指定一个公共类：

```
<div id="favorite1" class="favs"></div>
<div id="favorite2" class="favs"></div> 
```

然后你可以像这样抓住它们：

```
$('.favs').each(function() {
    console.log($(this).id);
} 
```

您还可以指定自定义属性，例如：

```
<div id="favorite1" customattr="favorite"></div> 
```

并像这样抓住它们：

```
$('[customattr=favorite]').each(function() { ... }; 
```

# javascript - JSON+Node.js - 意外的标识符

> ID：12696270
> 
> 赞同：0
> 
> 时间：2012-10-02T18:42:42.107
> 
> 标签：javascript, html, json, node.js

我正在为一门涉及 json 和 node.js 的大学课程做作业。我遇到了一个错误，我似乎无法弄清楚我做错了什么。

这是错误：

```
/home/ubuntu/node_stuff/node_json2/requestHandlers.js:22
'<li>'appts.appointments.appt1.busName'</li>'+
      ^^^^^
SyntaxError: Unexpected identifier
at Module._compile (module.js:437:25)
at Object.Module._extensions..js (module.js:467:10)
at Module.load (module.js:356:32)
at Function.Module._load (module.js:312:12)
at Module.require (module.js:362:17)
at require (module.js:378:17)
at Object.<anonymous> (/home/ubuntu/node_stuff/node_json2/index.js:3:23)
at Module._compile (module.js:449:26)
at Object.Module._extensions..js (module.js:467:10)
at Module.load (module.js:356:32) 
```

以下是我正在使用的文件：

应用程序.js

```
module.exports = {appointments: {
debug: "on",
appt1: {
    busName: "Asheville Eye Associates",
address: {
    street: "8 Medical Park Drive",
    city: "Asheville",
    state: "NC",
    zip: "28803"
},
phone: "828-258-1586",
apptDate: "October 5 2012",
dotw: "Friday",
apptTime: "9:00 am"
},
appt2: {
    busName: "Asheville Dental Care",
    address: {
            street: "10 Yorkshire Street",
            city: "Asheville",
            state: "NC",
            zip: "28803"
    },
    phone: "828-274-3882",
    apptDate: "October 22 2012",
dotw: "Monday",
    apptTime: "10:30 am"
},
appt3: {
    busName: "Asheville Cardiology",
    address: {
            street: "5 Vanderbilt Park Drive",
            city: "Asheville",
            state: "NC",
            zip: "28803"
    },
    phone: "828-274-6000",
    apptDate: "November 14 2012",
dotw: "Wednesday",
    apptTime: "9:30 am"
},

}}; 
```

requestHandlers.js

```
var querystring = require("querystring"),
appts = require("./appts"),
fs = require("fs");

function home(response, postData) {
console.log("Appointments have been parsed from JSON");
console.log("Request handler 'start' was called.");
console.log("stringify appts");
appts = JSON.stringify(appts);
console.log("parse appts");
appts = JSON.parse(appts);
console.log(appts.appointments);

var body = '<html>'+
'<head>'+
'<meta http-equiv="Content-Type" '+
'content="text/html; charset=UTF-8" />'+
'</head>'+
'<body>'+
'<h1>Appointment 1</h1>'+
'<ul>'+
    '<li>'appts.appointments.appt1.busName'</li>'+
    '<li>'appts.appointments.appt1.address.street'</li>'+
    '<li>'appts.appointments.appt1.address.city + " " + appts.appointments.appt1.address.state + " " + appts.appointments.appt1.address.zip'</li>'+
    '<li>'appts.appointments.appt1.phone'</li>'+
    '<li>'appts.appointments.appt1.apptDate'</li>'+
    '<li>'appts.appointments.appt1.dotw</li>'+
    '<li>'appts.appointments.appt1.apptTime'</li>'+    
'</ul>'+
'<h1>Appointment 2</h1>'+
'<ul>'+
    '<li>'appts.appointments.appt2.busName'</li>'+
    '<li>'appts.appointments.appt2.address.street'</li>'+
    '<li>'appts.appointments.appt2.address.city + " " + appts.appointments.appt2.address.state + " " + appts.appointments.appt2.address.zip'</li>'+
    '<li>'appts.appointments.appt2.phone'</li>'+
    '<li>'appts.appointments.appt2.apptDate'</li>'+
    '<li>'appts.appointments.appt2.dotw'</li>'+
    '<li>'appts.appointments.appt2.apptTime'</li>'+
'</ul>'+
'<h1>Appointment 3</h1>'+
'<ul>'+
    '<li>'appts.appointments.appt3.busName'</li>'+
    '<li>'appts.appointments.appt3.address.street'</li>'+
    '<li>'appts.appointments.appt3.address.city + " " + appts.appointments.appt3.address.state + " " + appts.appointments.appt3.address.zip'</li>'+
    '<li>'appts.appointments.appt3.phone'</li>'+
    '<li>'appts.appointments.appt3.apptDate'</li>'+
    '<li>'appts.appointments.appt3.dotw'</li>'+
    '<li>'appts.appointments.appt3.apptTime'</li>'+
'</ul>'+
'</body>'+
'</html>';

response.writeHead(200, {"Content-Type": "text/html"});
response.write(body);
response.end();
}

exports.home = home; 
```

我确信我的问题很简单，但这是我第一次从另一个文件中提取对象。我很感激你们能提供的任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:46:17.890

您忘记了操作员（可能`+`在 之后`'<li>'`）。但是，您可能对使用[一些模板引擎而不是自己编写代码](http://mustache.github.com/)感兴趣。

# c# - 是否组合了不同的 IQueryable 对象？

> ID：12696276
> 
> 赞同：1
> 
> 时间：2012-10-02T18:42:59.797
> 
> 标签：c#, .net, linq, entity-framework

我有一个小程序需要对数据范围进行一些计算。该范围可能包含大约 50 万条记录。我只是查看了我的数据库，发现 a`group by`已执行。

我以为结果是在第一行执行的，后来我只是在 RAM 中处理数据。但现在我认为查询生成器结合了表达式。

```
var Test = db.Test.Where(x => x > Date.Now.AddDays(-7));
var Test2 = (from p in Test 
             group p by p.CustomerId into g 
             select new { UniqueCount = g.Count() } ); 
```

在我的真实世界应用程序中，我得到了更多基于第一个查询选择的范围的子查询。我想我只是增加了很大的开销来让数据库做出不同的选择。

现在我基本上只是`.ToList()`在第一个表达式之后调用。

所以我的问题是，查询构建器在构建表达式树时结合了不同的 IQueryable 是否正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T18:47:07.353

是的，你是对的。LINQ 表达式在您评估它们的那一刻被延迟评估（`.ToList()`例如，通过）。在那个时间点，Entity Framework 将查看整个查询并构建一个 SQL 语句来表示它。

**在这种特殊情况下，不**评估第一个查询可能更明智，因为 SQL 数据库已针对执行基于集合的操作（如分组和计数）进行了优化。与其强制数据库通过网络发送所有`Test`对象，将结果反序列化为内存中的对象，然后在本地执行分组和计数，不如让 SQL 数据库只返回结果计数，您可能会看到更好的性能。

# java - 在 JSF2 中通过 AJAX 加载页面内容

> ID：12696279
> 
> 赞同：1
> 
> 时间：2012-10-02T18:43:04.533
> 
> 标签：java, jakarta-ee, jsf-2, primefaces, omnifaces

我最近一直在研究 jsf 技术，例如[primefaces](http://www.primefaces.org/)、[primefaces-extensions](http://code.google.com/p/primefaces-extensions/)、[omnifaces](http://omnifaces.org)。

我无法找到通过 ajax 获取内容的方法，例如加载表单、表格内容并将它们放入 div 或其他东西中，我查看了`rendered`属性，但这不适用于大规模应用程序。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:50:12.987

一个方便的技巧是使用动态 ui:include 标记，例如：

```
<div id="dynamicContent">
    <ui:include src="#{contentBean.content1}"/>
</div> 
```

其中 content1 是带有路径和 .xhtml 文件名的字符串（通常类似于 /WEB-INF/content/page1.xhtml），并且可以使用父 div 进行更新。

# php - php $_SESSION 重定向到不同文件夹时为空

> ID：12696283
> 
> 赞同：0
> 
> 时间：2012-10-02T18:43:17.837
> 
> 标签：php, session

我已经面临这个问题6个小时了。

为了简单起见，我创建了一些代码来模拟我遇到的问题。

说，我有以下文件结构：

*   小路/
    *   文件夹A/
    *   test_sessionA.php
    *   文件夹B/
        *   test_sessionB.php

test_sessionB.php：

```
<?php session_start();
$_SESSION['test'] = 'session';
header('Location: ../test_sessionA.php'); 
```

test_sessionA.php：

```
<?php session_start();
var_dump($_SESSION);
session_destroy(); 
```

使用上述结构 test_sessionA.php 将输出空数组。但是，如果我将 test_sessionA.php 移动到与 test_sessionB.php 相同的文件夹，它将输出正确的值。

你们找到解决这个问题的方法了吗？谢谢。

**更新：**

尝试以下但未成功：

*   `session_set_cookie_params(0, '/')`在开始会话之前添加
*   使用绝对网址重定向`header('Location: http://domain.org/path/test_sessionA.php')`

服务器配置可能有问题，因为这些代码在我的本地机器上运行良好。PHP 版本为 5.3.8（本地）和 5.2.17（托管）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:23:44.933

也许您的 session.cookie_path 配置错误。您可以在 php.ini 中更改它或尝试`session_set_cookie_params(0, '/')`在开始会话之前使用它进行设置。

# ios - Xcode 4.5 导致 iOS 5 应用程序出错

> ID：12696289
> 
> 赞同：1
> 
> 时间：2012-10-02T18:43:52.677
> 
> 标签：ios, ios5, ios-simulator, ios6

自过去 3 到 4 个月以来，我一直在开发计时器应用程序（当时没有 iOS 6 的迹象），但由于某些问题无法完成。现在自从 iOS 6 出现以来.. 我的代码出现错误。我最近下载了 xcode 4.5 和 iOS 6 SDK（在其中）。现在当我运行应用程序时。它在不同的场合崩溃。有时在启动时立即崩溃。有时根本没有崩溃。有时会给我 SGBRT 错误。有时 Bad_exc 错误（内存错误）。我不知道如何处理这个。我已经下载了 iOS 5.1 模拟器，并在我运行应用程序时下载了该模拟器。完全没有崩溃，但是当我在 iOS 6 模拟器上运行应用程序时。哇！它立即崩溃。我急需指导。任何遇到相同错误并对其进行故障排除的人也请帮助我。在此先感谢法赫德。- PS 我添加了断点来检测错误，我只能捕获一个但不明白为什么会出现这个错误。这是代码：

```
-(void) playAppSound:(NSString *) fName withExt:(NSString *) ext{
  NSString *path  = [[NSBundle mainBundle] pathForResource : fName ofType :ext];
  if ([[NSFileManager defaultManager] fileExistsAtPath : path])
  {
      NSURL *pathURL = [[NSBundle mainBundle] URLForResource:fName withExtension:ext];
      // Instantiates the AVAudioPlayer object, initializing it with the sound
      if(self.appSoundPlayer)
      {
        if([self.appSoundPlayer isPlaying])
        {
            [self.appSoundPlayer stop];
            [self.appSoundPlayer release];
        }
      }
  //Thread breaks down in the next line self. appSoundPlayer...

    self.appSoundPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL: pathURL error: nil] ;

    //self.appSoundPlayer.numberOfLoops = 1;
    [appSoundPlayer setDelegate:self];
    [appSoundPlayer prepareToPlay];
    //[appSoundPlayer setVolume:1.0];
    [appSoundPlayer play];
}
  else{
   //   NSLog(@"error, file not found: %@", path);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T10:34:46.563

检查框架版本（SDK 5 <- 错误，SDK6 <-正确）

# ruby-on-rails - 如何从 sql 结果中对 json 进行分组

> ID：12696290
> 
> 赞同：0
> 
> 时间：2012-10-02T18:44:00.243
> 
> 标签：ruby-on-rails, ruby, json

我有一个像这样从我的 rails API 返回的 JSON `[{"tipo":"1","dia":"02/10/2012","empresa_id":"17","horas":"0:15","tempo":"900"}, {"tipo":"2","dia":"02/10/2012","empresa_id":"17","horas":"0:12","tempo":"720"}]`

但我需要它是这样的

``[empresa_id: 17, [{"tipo":"1","dia":"02/10/2012","horas":"0:15","tempo":"900"}, {"tipo":"2","dia":"02/10/2012","horas":"0:12","tempo":"720"}]]`

我需要将结果分组`empresa_id`...我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T19:03:51.967

在模型的视图文件夹中，创建一个名为 modelname.json.erb 的文件。在这里，您可以使用 ruby​​ 代码来编辑您想要的 json 格式。这是一个未经测试的代码示例，它可能看起来像这样：

```
[
<% i = 0
@modelname.each do |model| %>
    {
        "id": <%= model.id %>,
        "name": "<%= model.name %>"
    }<% if i != (@modelname.size - 1) %>,<% end %>
    <% i += 1 %>
<% end %>
] 
```

在你的控制器中，默认情况下你会有这样的输出：

```
format.json { render json: @modelname } 
```

将其更改为：

```
format.json 
```

通过这样做，它将查找您刚刚创建的 json 视图！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T19:00:04.073

尝试这个：

```
require 'json'

s = '[{"tipo":"1","dia":"02/10/2012","empresa_id":"17","horas":"0:15","tempo":"900"}, {"tipo":"2","dia":"02/10/2012","empresa_id":"17","horas":"0:12","tempo":"720"}]'
j = JSON.parse(s)
r = j.inject({}) do |f,c|
    key = c.delete('empresa_id')
    (f[key]||=[]) << c
    f
end
p r 
```

导致

```
{"17"=>[{"tipo"=>"1", "dia"=>"02/10/2012", "horas"=>"0:15", "tempo"=>"900"}, {"tipo"=>"2", "dia"=>"02/10/2012", "horas"=>"0:12", "tempo"=>"720"}]} 
```

## 在此处查看[现场演示](http://cibox.org/slivu/stackoverflow?lang=ruby&file=how-to-group-a-json-from-a-sql-result.rb&run=true)

# python - Tornado：我可以在异步 RequestHandler 中调用 self.finish() 后运行代码吗？

> ID：12696291
> 
> 赞同：13
> 
> 时间：2012-10-02T18:44:11.033
> 
> 标签：python, tornado

我正在使用龙卷风。我有一堆异步请求处理程序。他们中的大多数以异步方式完成工作，然后将工作结果报告给用户。但是我有一个处理程序，他的工作就是简单地告诉用户他们的请求将在将来的某个时间点得到处理。我完成了 HTTP 连接，然后做更多的工作。这是一个简单的例子：

```
class AsyncHandler(tornado.web.RequestHandler):

    @tornado.web.asynchronous
    def get(self, *args, **kwargs):
        # first just tell the user to go away
        self.write("Your request is being processed.")
        self.finish()

        # now do work
        ... 
```

我的问题是：这是对 Tornado 的合法使用吗？self.finish() 之后的代码会可靠运行吗？我以前从未遇到过问题，但现在我在我的一个开发环境（不是全部）中看到了它的问题。这里有许多我已经确定的解决方法，但我想确保我没有遗漏 Tornado 中请求生命周期的基本内容。似乎没有理由在调用 self.finish() 后我无法运行代码，但也许我错了。

谢谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-10-22T13:37:40.313

**是的你可以。**

你必须定义`on_finish`你的方法`RequestHandler`。这是在请求完成并将响应发送给客户端后运行的函数。

> [`RequestHandler.on_finish()`](http://www.tornadoweb.org/en/stable/web.html#tornado.web.RequestHandler.on_finish)
> 
> 在请求结束后调用。
> 
> 重写此方法以执行清理、记录等。此方法是准备的对应方法。on_finish 可能不会产生任何输出，因为它是在响应发送到客户端之后调用的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-03T13:11:42.343

是的，您的代码之后`self.finish()`将可靠地工作。但是你不能调用`self.finish()`两次——它会引发异常。您可以`self.finish()`在服务器上的所有工作完成之前关闭连接。

但正如科尔麦克莱恩所说——完成后不要做繁重的工作。寻找另一种在后台执行繁重任务的方法。

# jquery - 使用 InfoBox 时如何定位 jquery-ui-map 生成的地图

> ID：12696292
> 
> 赞同：0
> 
> 时间：2012-10-02T18:44:10.677
> 
> 标签：jquery, google-maps-api-3, jquery-ui-map, infobox

我正在使用[jquery-ui-map](https://code.google.com/p/jquery-ui-map/wiki/jquery_ui_map_v_3_api)创建一个谷歌地图实例，如下所示：

```
$('#CHMap').gmap({
  mapTypeControl : false
}).bind('init', function(evt, map) {
  log("Map initilised");
}); 
```

然后在脚本的其他地方，我使用[InfoBox](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/reference.html)添加一些样式化的信息框，其中填充了从地理定位服务中提取的数据，如下所示：

```
var boxText = document.createElement("div");
var ib = new InfoBox(myOptions); //myOptions can be ignored for this example

$.each(data, function(name, value) {
  $('#CHMap').gmap('addMarker', {
    id:value['YourId'],
    'position': value['Latitude']+','+value['Longitude'],
    'bounds': true,
    'icon': '/img/gicon.png'
  }).click(function() {
    boxText.innerHTML = "hello";
    ib.setContent(boxText);
    ib.open(map, this);
  });
}); 
```

“数据”是从地理位置服务返回的对象。如果我在首次创建 gmap 时将上面的“addMarker”代码放在绑定的“init”函数中，则 infoBox 显示正常。当我在其他地方使用“addMarker”代码时，控制台中出现“未捕获的 ReferenceError：未定义地图”错误。

如何正确引用“地图”？看起来我不能这样做`var map = $('#CHMap').gmap({//options});`，因为“jquery-ui-map”文档建议 gmap 什么都不返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:54:48.193

我认为你可以做到

```
var map = $('#CHMap').gmap(); 
```

来自 OP 的注释。最新插件中的正确方法是：

```
var map = $('#CHMap').gmap('get', 'map'); 
```

我看不到它在哪里说它在 API 中没有返回任何内容

当您需要运行访问地图时，您可以在 google maps 事件侦听器中添加代码，该事件侦听器会等到像这样加载地图图块。

由于 Gmaps 是从 google 异步获取的，因此您无法始终确定它会在您调用它时出现，除非您执行此类操作。

```
google.maps.event.addListener(YOUR_GOOGLE_MAPS_INSTACE, 'tilesloaded', function() {
       // put your initialization code in here.
} 
```

所以它只会在地图完全加载后执行。

来自巴西的欢呼！

# java - 一个扩展另一个类的类，如何使它成为一个异常类，？

> ID：12696294
> 
> 赞同：3
> 
> 时间：2012-10-02T18:44:19.290
> 
> 标签：java, exception, inheritance

如果我的类已经扩展了其他类，如果我想将我的类的实例作为 Exception 对象抛出，我该怎么办？

我发现的唯一方法是某些超类必须扩展 Exception 类。还有其他方法吗？编辑：这是否也表示设计缺陷，如果是，那么请解释在您的类中使用自定义异常的正确方法是什么，是通过在您的类中添加自定义异常的引用还是在您调用“新”时调用需要它，你能给出一个代码大纲吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T18:49:54.683

您将不得不将它包装在另一个类中。在java中你只能抛出Throwable的子类型，它是一个类。

例子：

```
public class Wrapper extends Exception {
    public final MyClass wrapped;
    public Wrapper(MyClass toWrap) { wrapped = toWrap; }
} 
```

如果这是[蹦床](http://en.wikipedia.org/wiki/Trampoline_%28computing%29)技术或类似控制流技术的应用，那么有一些方法可以*不*获取堆栈跟踪（减少创建对象所需的时间）。有需要我可以查一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T18:57:20.863

出路可能是使用泛型定义您的类以将异常作为参数。这样你就可以让别人觉得在某种意义上这是个例外。

```
public class One{}

public class Two<E extends Exception> extends One {
    E e = null;
    public void throwE() throws E {
        throw e;
    }
} 
```

PS 注意：我已经假设您知道这是不可能的，因为您必须为此目的扩展 Exception 类

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T18:45:56.893

如果您可以修改您正在扩展的类，那么您应该让该类扩展`Exception`或`RuntimeException`.

否则，您无法做到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T18:47:48.283

Java 允许单一继承，因此您可以只扩展`Exception`/`Throwable`或其他类。没有其他方法可以让类表现得像异常。当然，您仍然可以实现任意数量的接口。

话虽这么说，你想抛出已经是其他类的子类的东西是很奇怪的。您是否试图通过抛出异常并稍后捕获它来通过层传输一些数据？使用异常控制程序流是一个很大的反模式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T18:47:45.967

是的，就是这样，你只能抛出`Throwable`类。`Throwable`是一个具体的类，而不是一个接口，所以你必须修改你的对象层次结构来实现你想要的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T18:51:19.470

您必须扩展`java.lang.Throwable`才能抛出和实例化。您可以直接扩展它，也可以从它的任何非最终子类（通常是`java.lang.RuntimeException`或`java.lang.Exception`.

您需要重新考虑围绕此约束进行设计。

# javascript - JavaScript 中对象和对象的区别

> ID：12696297
> 
> 赞同：12
> 
> 时间：2012-10-02T18:44:24.083
> 
> 标签：javascript

在下面的代码中：-

```
 var x = { } ;
    console.log(typeof x);             // o/p is object
    console.log(x instanceof Object ); //o/p is true 
```

如果我在最后一行使用“ **object** ”而不是“ **Object** ”，我会得到一个错误。为什么当第二行的 o/p 是带有小写“o”的**对象时会这样？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-02T18:46:36.943

因为没有“对象”这样的东西。Typeof 不会将类返回给您 - 它会返回原始类型。例如，`typeof "string"`给你回“字符串”。

'Object' 是对象'primitive' 的构造函数 - 所以 a`new Object`给你一个'object'来使用..但不要期望能够创建一个'new object'，因为'object'没有'不作为构造函数存在。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T18:45:40.820

你得到一个错误，因为你没有定义一个名为`object`. 尝试读取尚未声明的变量是*ReferenceError*。

该`Object`变量是环境的原生变量，并且预定义为普通对象的构造函数。这就是为什么当你这样做时它起作用的原因`instanceof Object`。JavaScript 中的每个原生对象都是`Object`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T18:46:12.850

Javascript 是区分大小写的“对象”本质上是一个可以容纳任何东西的变量。“对象”是一个实际的 javascript 类型。

# adobe - 将新窗口属性添加到 CQ 页面重定向

> ID：12696300
> 
> 赞同：0
> 
> 时间：2012-10-02T18:44:43.150
> 
> 标签：adobe, aem

我正在尝试向所有仅重定向到外部 URL 或媒体文件（即 PDF）的 CQ 页面添加 *target='_blank'* 选项。我正在查看 components/parsys/parsys.php，我认为它会有一些用于服务器/客户端重定向的代码块，但无济于事。

我意识到如果重定向实际上是服务器端的，那么我无法在新窗口中打开它。但是在我知道任何一种方式之前，有人可以帮助指出实际的重定向脚本代码在哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:34:11.047

如果您使用开箱即用的重定向机制（在“页面属性”对话框中填写重定向目标），则可以在以下位置找到默认重定向逻辑：

```
 /libs/foundation/components/page/page.jsp (CQ 5.4) 
```

该代码正在执行 response.sendRedirect，因此您可能无法从那里强制重定向在新窗口中打开。

# php - PHP从数据库中检索列数据

> ID：12696302
> 
> 赞同：1
> 
> 时间：2012-10-02T18:44:44.563
> 
> 标签：php, mysql, database, pdo

[我在这里](https://stackoverflow.com/questions/12695162/php-mysql-retrieve-name-based-on-another-criterion/12695505#12695505)有一篇较早的帖子， 但这些答案都没有奏效。所以这是我的整个课程代码：

```
<?php
session_start();
class Mysql {
    private $conn;

    function __construct() {
        $this->conn =  new PDO('mysql:host=***;dbname=***;charset=UTF-8','***','***') or 
                      die('There was a problem connecting to the database.');
    }

    function verify_Username_and_Pass($un, $pwd) {
        $query = "SELECT Username
                FROM Conference
                WHERE Username = :un AND Password = :pwd";

        $stmt = $this->conn->prepare($query);

        $stmt->bindParam(':un', $un);
        $stmt->bindParam(':pwd', $pwd);
        $stmt->execute();
        if ($stmt->rowCount() > 0) {
            // User exist
            $stmt->bindColumn('First Name', $firstName); 
            $_SESSION["FirstName"] = $firstName; 
            die($_SESSION["FirstName"]);
            return true;
            $stmt->close();
        }
        else {
            // User doesn't exist
            //die("failure");
            return false;
            $stmt->close();
        }
    }
}
?> 
```

我试过 fetch，我试过 bind_result 等等，但它们都没有在 die 语句上打印正确的值。现在，**当**我将用户名存储在会话中并尝试打印时，这有效。代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:22:24.170

我查看了您的代码，并在我自己的服务器上制作了一个工作版本。如果您有任何问题随时问。

```
class Mysql
{
  private $conn;
  public  $error;
  public  $username;

  function __construct()
  {
    try {
      $this->conn = new PDO( 'mysql:host=localhost;dbname=****', 'root', '****' );
      $this->conn->setAttribute( PDO::ATTR_EMULATE_PREPARES, false );

    }
    catch ( Exception $e ) {
       $this->error = $e->getMessage();
    }
  }

  function verify_Username_and_Pass( $un, $pwd )
  {
    $query = "SELECT Username
              FROM Conference
              WHERE Username = :un AND Password = :pwd";

    $stmt = $this->conn->prepare( $query );
    if( !$stmt ) {
      $this->error = $this->conn->errorInfo();
      return false;        
    }

    $stmt->bindParam( ':un', $un );
    $stmt->bindParam( ':pwd', $pwd );
    $stmt->execute();
    if ( $stmt->rowCount() > 0 ) {
      // User exist
      $this->username = $stmt->fetchColumn();
      return true;
    } 
    else {
      // User doesn't exist
      return false;
    }
  }

}

session_start();

$db = new Mysql();
if( !$db->error ) {
  if( $db->verify_Username_and_Pass ( 'user', 'test' )) {
    $_SESSION["FirstName"] = $db->username;
  }
  else
    echo 'Unknown user';
}

var_dump( $db ); 
```

该脚本将输出以下内容：

```
Unknown user

object(Mysql)#1 (3) { 
["conn":"Mysql":private]=> object(PDO)#2 (0) { } 
["error"]=> array(3) 
   { [0]=> string(5) "42S02" 
     [1]=> int(1146) 
     [2]=> string(39) "Table   'xxxx.Conference' doesn't exist" } 
["username"]=> NULL } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T19:30:54.327

1.  您没有调用代码段中的代码。通话流程是怎样的？

2.  您不`Conference.First Name`只是在检索`Conference.Username`，因此除非您没有显示错误，否则您应该收到警告。你可能想要

`"SELECT * FROM Conference...."`

或者

`"SELECT FirstName From Conference WHERE Username = :un AND Password = :pwd";`

1.  有可能`Conference.FirstName`。

2.  `die();`对调试不是很有用。尝试`var_dump($_SESSION["FirstName"]); die();`

# c# - 为什么 ASP 文本框有时会显示与屏幕上不同的文本值？

> ID：12696303
> 
> 赞同：2
> 
> 时间：2012-10-02T18:44:45.157
> 
> 标签：c#, asp.net, cookies, text, textbox

我在一个 ASP 站点上创建了一个“记住我”选项，客户说他们还希望它在用户字段中显示登录名，即使在他们按下“注销”后也是如此。只要我不再使用不同的登录名，它就可以工作。一旦我将值分配给后面代码中的文本框，即使我手动输入一个新值，旧值也将被使用。

例子：

1.  我输入用户名/密码（例如 User1），单击“记住我”并成功登录。
2.  我注销并被重定向回登录页面。在 page_load 事件中，它检测到存在一个有效的 cookie，其中存储了用户名 (User1)，它读取值并设置文本字段。
3.  我将登录名更改为其他内容（例如 User2），但它无法说出无效的用户/密码。奇怪的。
4.  我检查了数据，它正在使用旧的文本字段（User1）。我尝试另一个（例如User3）并按登录。它失败了，当我检查 Text 属性时，它仍然显示 User1，即使在屏幕上显示的是 User3。

无论我做什么，一旦我在代码隐藏文件中设置它就不会改变。就好像一旦设置了文本字段，就无法更改它。这是不对的，但我对此没有很好的解释。

这是有问题的代码：

页面加载：

```
protected void Page_Load(object sender, EventArgs e)
{

    if (Request.ServerVariables["AUTH_USER"] != null && !Request.ServerVariables["AUTH_USER"].Equals(""))
    {
        login.Visible = false;
        logout.Visible = true;

        btnLogout.Text = "Logout " + Request.ServerVariables["AUTH_USER"];
    }
    else
    {
        login.Visible = true;
        logout.Visible = false;

        CheckLoginCookie();           
    }

} 
```

设置cookie的代码：

```
private void SaveLoginCookie()
    {
        try
        {

            Response.Cookies["KYSUSR"].Value = txtLoginUsername.Text.Trim();
            Response.Cookies["KYSUSR"].Expires = DateTime.Today.AddMonths(6);

        }
        catch (Exception ex)
        {
            ExceptionHandling.SendErrorReport(this, ex);
        }
    } 
```

加载cookie的代码：

```
 private void CheckLoginCookie()
    {
        try
        {            
            if (Request.Browser.Cookies)
            {
                if (Request.Cookies["KYSUSR"] != null && Request.Cookies["KSYFOR"] != null)
                {
                    // logged in as remember
                    if (Request.Cookies["KYSFOR"].Value == "R")
                        txtLoginUsername.Text = Request.Cookies["KYSUSR"].Value;
                    // once set here, the Text property never changes regardless of what is entered into it

                }                
            }            
        }
        catch (Exception ex)
        {
            ExceptionHandling.SendErrorReport(this, ex);
        }
    } 
```

进行登录的代码：

```
protected void btnLogin_Click(object sender, EventArgs e)
    {
        try
        {
            String user = txtLoginUsername.Text.Trim();

            if (chkSaveUser.Checked)
                SaveLoginCookie();
            else
            {
                // set cookie as expired so browser will clear it
                Response.Cookies["KYSUSR"].Expires = DateTime.Today.AddDays(-1);                
            }

            if (CheckLogin(user, txtLoginPassword.Text))
            {
                if (chkSaveUser.Checked)
                {                    
                    FormsAuthentication.SetAuthCookie(user, true);                    
                }

                FormsAuthentication.RedirectFromLoginPage(txtLoginUsername.Text.Trim(), false);
            }
        }
        catch (Exception ex)
        {
            ExceptionHandling.SendErrorReport(this, ex);            
        }
    } 
```

为什么 Text 属性不会改变？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T18:54:38.300

问题是您没有检查您的`Page_Load`方法中是否处于回发状态 - 这意味着即使用户在`txtLoginUsername`Textbox 中放入其他内容，它也会被`CheckLoginCookie`.

```
protected void Page_Load(object sender, EventArgs e)
{

    if (Request.ServerVariables["AUTH_USER"] != null
        && !Request.ServerVariables["AUTH_USER"].Equals(""))
    {
        login.Visible = false;
        logout.Visible = true;

        btnLogout.Text = "Logout " + Request.ServerVariables["AUTH_USER"];
    }
    else
    {
        login.Visible = true;
        logout.Visible = false;

        // Only check the login cookie if we are not dealing with a form submission.
        if (!Page.IsPostBack)
        {
            CheckLoginCookie();
        }
    }
} 
```

# python - webdrive 控制的鼠标移动在脚本和解释器模式下的行为不同，为什么？

> ID：12696304
> 
> 赞同：0
> 
> 时间：2012-10-02T18:44:46.283
> 
> 标签：python, selenium, webdriver, mouse

我有一个函数 hover() 如下，dr 是一个 firefox 驱动程序，image 是一个定位器值。如果我在解释器模式下针对特定页面运行该函数，则会显示更多元素；但如果我在脚本中运行该函数，我看不到元素出现。

```
def hover():
    elem=dr.find_element_by_css_selector(image)
    hov=ActionChains(dr).move_to_element(elem)
    hov.perform() 
```

我什至尝试了 ActionChains(dr).move_by_offset()，或者在 hov.perform() 语句之前和之后添加了一些 time.sleep(1)。结果相同：交互模式有效，脚本模式失败。我正在使用 SPE 运行脚本和解释器。

有人对此有相同的经验和解决方案吗？谢谢。

# php - 什么是合适的 PBKDF2 设置？

> ID：12696314
> 
> 赞同：2
> 
> 时间：2012-10-02T18:45:27.990
> 
> 标签：php, security, hash, passwords, pbkdf2

关于什么是合适的 PBKDF2 设置，我有几个问题。我用谷歌搜索答案，结果大多是空手而归。

基本上，我想知道考虑到 2012 年的技术状况，输入 pbkdf2.php（在[此处](https://defuse.ca/php-pbkdf2.htm)找到）的合适值是什么。什么会给我一个合理的期望，即我编码的密码不会被非政府实体破解未来几年？

这是我正在考虑的：

```
define("PBKDF2_HASH_ALGORITHM", "sha512");
define("PBKDF2_ITERATIONS", 20000);
define("PBKDF2_SALT_BYTES", 512);
define("PBKDF2_HASH_BYTES", 512); 
```

我知道还有许多其他因素可以发挥作用来创造良好的安全性。以下是我正在使用的其他安全措施的概要：

*   12位密码，至少有2个数字、2个字母和2个符号
*   要求每 6 个月更改一次密码
*   php mysqli 为所有数据库访问准备语句
*   我所有表格上的标记
*   错误登录延迟 5 秒，
*   同一 IP 10 次错误登录后列入黑名单
*   不正确的登录和黑名单触发相同的响应
*   HTTPS
*   我正在使用会话，每次访问页面时，我都会每 10 页和敏感页面上更改会话标识符。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T20:02:20.653

举个例子，大多数现代 Linux 发行版中 sha512crypt 的默认设置（/etc/shadow 条目中的 $6$）使用 5000 次迭代和 16 字节的 salt。这很慢。但是在散列方面，我不会批评你矫枉过正；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T06:43:04.543

这个问题没有一个正确的答案，因为不同的应用程序需要不同的安全级别。正确的做法是对您的应用程序进行基准测试，并使用您的服务器可以以响应方式轻松处理的尽可能高的设置。（当然是在负载测试下）

仅仅通过首先实现 PBKDF2 而不是像 MD5 或 SHA-1 这样的“快速”、“消息摘要”式算法，您已经比一般系统安全得多。

# c - 文件描述符中实际存储了多少信息？

> ID：12696315
> 
> 赞同：7
> 
> 时间：2012-10-02T18:45:31.630
> 
> 标签：c, linux, linux-kernel, kernel-module, file-descriptor

这听起来像是一个奇怪的问题，但是当我去打开一个文件时：

```
int fd;
fd = open("/dev/somedevice", O_RDWR); 
```

我到底要回来什么？我可以看到手册页说：
`The open() function shall return a file descriptor for the named file that is the lowest file descriptor not currently open for that process`

但就是这样吗？它只是一个`int`还是在幕后附加了数据？我问的原因是我发现了一些代码（Linux/C），我们从用户空间打开文件：

```
//User space code:
int fdC;

if ((fdC = open(DEVICE, O_RDWR)) < 0) {
    printf("Error opening device %s (%s)\n", DEVICE, strerror(errno));
    goto error_exit;
}
while (!fQuit) {
    if ((nRet = read(fdC, &rx_message, 1)) > 0) { 
```

然后在内核端，此模块（提供 fd）映射的文件操作读取到`n_read()`函数：

```
struct file_operations can_fops = { 
    owner:      THIS_MODULE,
    lseek:  NULL, 
    read:   n_read, 
```

然后在 中使用文件描述符`n_read()`，但正在访问它以获取数据：

```
int n_read(struct file *file, char *buffer, size_t count, loff_t *loff)
{
    data_t * dev;

    dev = (data_t*)file->private_data; 
```

所以......我认为这里发生的事情是：

A）从返回的文件描述符`open()`包含更多数据，而不仅仅是描述性整数值
或
B）在用户空间中对“读取”的调用之间的映射并不像我想象的那么简单，并且有一些代码在这个等式中缺失。

有什么可以帮助指导我的意见吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T19:19:42.480

文件描述符只是一个`int`. 内核将其用作包含所有相关信息的表的索引，包括文件位置、文件操作（提供 、 等系统调用的内核函数`read()`）`write()`等等`mmap()`。

当您`open()`创建文件或设备时，内核会为您的进程创建一个新的文件描述符条目，并填充内部数据，包括文件操作。

当您将`read()`, `write()`,`mmap()`等与有效的文件描述符一起使用时，内核只需根据它拥有的文件描述符表中的文件操作（以及文件描述符索引的文件）查找要调用的正确内核函数。真的就是这么简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T19:16:30.883

除了@Nominal Aminal 现有的好答案之外，它是一个整数，但它指向内核中称为文件描述符表的结构的条目。至少 Linux 是这样。在该结构的几个字段中，一个有趣的字段是：

```
FILE * pointer; // descriptor to / from reference counts etc. 
```

您可能有兴趣关注给定 FILE * 或描述符之一的 API，返回另一个

[如何从 fd 获取 FILE *，反之亦然](https://stackoverflow.com/questions/4210966/c-how-can-i-change-from-file-descriptor-to-file-struct-and-visa-versa)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T18:52:26.073

我认为它只是一个`int`. 来自[维基百科](http://en.wikipedia.org/wiki/File_descriptor)：

> 通常，文件描述符是内核驻留数据结构中条目的索引，其中包含所有打开文件的详细信息。在 POSIX 中，这种数据结构称为文件描述符表，每个进程都有自己的文件描述符表。

# android - 在 Galaxy S3 上录制时视频显示乱码

> ID：12696318
> 
> 赞同：5
> 
> 时间：2012-10-02T18:45:44.013
> 
> 标签：android, android-camera, galaxy, android-mediarecorder

我正在编写一个相机应用程序，但遇到了 S3 的问题。每当我开始录制时，显示就会变成垃圾（参见下面的屏幕截图）。然后，当我停止录制时，我得到一个异常：

```
10-02 13:36:31.647: E/MediaRecorder(24283): stop failed: -1007
10-02 13:36:31.647: D/AndroidRuntime(24283): Shutting down VM
10-02 13:36:31.647: W/dalvikvm(24283): threadid=1: thread exiting with uncaught exception (group=0x40c49a68)
10-02 13:36:31.647: E/AndroidRuntime(24283): FATAL EXCEPTION: main
10-02 13:36:31.647: E/AndroidRuntime(24283): java.lang.RuntimeException: stop failed.
10-02 13:36:31.647: E/AndroidRuntime(24283):    at android.media.MediaRecorder.native_stop(Native Method)
10-02 13:36:31.647: E/AndroidRuntime(24283):    at android.media.MediaRecorder.stop(MediaRecorder.java:742)
10-02 13:36:31.647: E/AndroidRuntime(24283):    at com.myapp.android.ui.camera.NewCameraActivity.stopRecording(NewCameraActivity.java:178)
10-02 13:36:31.647: E/AndroidRuntime(24283):    at com.myapp.android.ui.camera.NewCameraActivity.toggleRecording(NewCameraActivity.java:189)
10-02 13:36:31.647: E/AndroidRuntime(24283):    at com.myapp.android.ui.camera.NewCameraActivity.onClick(NewCameraActivity.java:97)
10-02 13:36:31.647: E/AndroidRuntime(24283):    at android.view.View.performClick(View.java:3565)
10-02 13:36:31.647: E/AndroidRuntime(24283):    at android.view.View$PerformClick.run(View.java:14165)
10-02 13:36:31.647: E/AndroidRuntime(24283):    at android.os.Handler.handleCallback(Handler.java:605)
10-02 13:36:31.647: E/AndroidRuntime(24283):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-02 13:36:31.647: E/AndroidRuntime(24283):    at android.os.Looper.loop(Looper.java:137)
10-02 13:36:31.647: E/AndroidRuntime(24283):    at android.app.ActivityThread.main(ActivityThread.java:4514)
10-02 13:36:31.647: E/AndroidRuntime(24283):    at java.lang.reflect.Method.invokeNative(Native Method)
10-02 13:36:31.647: E/AndroidRuntime(24283):    at java.lang.reflect.Method.invoke(Method.java:511)
10-02 13:36:31.647: E/AndroidRuntime(24283):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
10-02 13:36:31.647: E/AndroidRuntime(24283):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
10-02 13:36:31.647: E/AndroidRuntime(24283):    at dalvik.system.NativeStart.main(Native Method) 
```

我已经在 Galaxy Nexus (4.1)、Galaxy S2、Nexus S 和 Galaxy Tab 10.1 上测试了我的应用程序。他们都工作正常。我遵循[了视频录制的开发指南](http://developer.android.com/guide/topics/media/camera.html#capture-video)。我不明白为什么这个设备与其他设备如此不同。这是我在设备上看到的。第一张照片是在我开始录制之前。第二张照片是我开始录制后发生的事情。

![在我开始录制之前](../Images/469b9ea05df75b3fec361c7c5c7b30fe.png)

![在我开始录制之后](../Images/1cb410e3090546a0da0bb0d522ac3c5c.png)

这是我准备和启动`MediaRecorder`对象的代码：

```
@Override
public void onClick( View v ) {

    switch (v.getId()) {
        case R.id.camera_action_ImageView:
            int mode = getMode();
            if ( mode == MODE_PHOTO ) {
                focusThenTakePicture();
            }
            else if ( mode == MODE_VIDEO ) {
                toggleRecording();
            }
            break;
    }
}

private void startRecording() {

    if ( prepareRecorder() ) {
        getRecorder().start();
        setRecording( true );
    }
}

@TargetApi( 9 )
private boolean prepareRecorder() {

    Camera camera = getCamera();
    camera.unlock();

    MediaRecorder recorder = new MediaRecorder();
    setRecorder( recorder );
    recorder.setCamera( camera );
    recorder.setAudioSource( MediaRecorder.AudioSource.CAMCORDER );
    recorder.setVideoSource( MediaRecorder.VideoSource.CAMERA );

    CamcorderProfile profile;
    if ( Build.VERSION.SDK_INT < Build.VERSION_CODES.GINGERBREAD ) {
        profile = CamcorderProfile.get( CamcorderProfile.QUALITY_HIGH );
    }
    else {
        profile = CamcorderProfile.get( getCameraId(), CamcorderProfile.QUALITY_HIGH );
    }
    recorder.setProfile( profile );

    File outputFile = LocalMediaUtil.getOutputMediaFile( LocalMediaUtil.MEDIA_TYPE_VIDEO );
    setRecorderOutputFile( outputFile );
    recorder.setOutputFile( outputFile.toString() );
    recorder.setPreviewDisplay( getPreview().getHolder().getSurface() );

    try {
        recorder.prepare();
    }
    catch (Exception e) {
        camera.lock();
        setRecorder( null );
        return false;
    }

    return true;
}

private void stopRecording() {

    MediaRecorder recorder = getRecorder();
    recorder.stop();
    releaseRecorder();
    setRecording( false );

    LocalMediaUtil.scanMedia( this, getRecorderOutputFile().toString(), 90 );
    setRecorderOutputFile( null );
}

private void toggleRecording() {

    if ( isRecording() ) {
        stopRecording();
    }
    else {
        startRecording();
    }
}

private void releaseRecorder() {

    MediaRecorder recorder = getRecorder();
    if ( recorder != null ) {

        recorder.reset();
        recorder.release();
        setRecorder( null );

        getCamera().lock();
    }
} 
```

**编辑：**所以这与`CamcorderProfile`设置有关。我将其更改为`CamcorderProfile.QUALITY_LOW`并且效果很好。那么如何才能获得没有乱码输出的高分辨率视频呢？

**Edit2：**所以有了`CamcorderProfile.QUALITY_LOW`设置，我使用录像机没有错误。但是，输出视频看起来与上面发布的乱码截图非常相似。那么给了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T13:25:38.470

我遇到了类似的问题，最后发现这是由于在相机和媒体记录器之间共享预览表面（我不确定这实际上是根本原因，但从 API 调用看来是这样）。

我假设您已经打开了相机并为其附加了预览显示，如果是这样，请尝试在您的 prepareRecorder 方法的顶部插入以下行：

```
Camera camera = getCamera();
camera.stopPreview();
camera.lock();
camera.release();

camera = Camera.open();
camera.unlock(); 
```

您可能还需要将本地相机重新分配给隐藏在 getCamera() 后面的字段，不幸的是我无法告诉您如何使用给定的代码片段实现它。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:15:17.967

我的三星 Note 也有类似的问题。我的问题是预览设置为分辨率，而录制设置为另一个更大的分辨率（我的手机不支持的分辨率），这就是它看起来像这样的原因。你应该试试：

`recorder.setVideoSize(320, 240);`

如果有效，则表示您的初始分辨率不受支持/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-22T20:27:05.127

这是因为预览分辨率和 Mediarecorder 分辨率不同（它们可能因设备而异，但在某些设备上似乎会导致问题）。

检查Android相机应用程序，它不会停止预览然后开始录制（您可以通过保持闪光灯打开来检查这一点，如果您停止预览然后开始录制闪光灯将关闭然后再次打开，而在Android中相机应用程序不会发生）。

此处的“已接受”答案仅起作用，因为相机释放了预览表面，然后 mediarecorder 可以将分辨率调整为 mediarecorder 分辨率之一，但这在技术上并不正确。

# html - 使用缓存服务器页面 (CSP) 从缓存数据库中提取文本

> ID：12696324
> 
> 赞同：1
> 
> 时间：2012-10-02T18:45:56.467
> 
> 标签：html, caching, stream

我目前在从缓存数据库中提取文本时遇到问题。我的 CSP 页面是按以下方式编写的：

```
[...]
<csp:search name="MySearch" classname="dbo.Story" where="storyId" predicates=">" select="storyId,storyName,author,notes,text" options="predicates,popup,leaveopen,sortbox" caption="This is the Story Search Box">  
<center>  
<INPUT TYPE="button" NAME="Search" VALUE="Search" ONCLICK="MySearch();">  
</center>  
[...] 
```

注意：我正在查询的表是`dbo.Story`或者只是 Story 表。该表中的列是`storyId`, `storyName`, `author`, `notes`, `text`, 等...

、`storyId`、和字段均正确显示，但列中返回的值`storyName`均类似于以下内容：`author``notes``text`

```
^dbo.StoryS)dt.common.streams.GlobalCharacterStream ^dbo.StoryS 
```

注意：对数据库的直接引用（“全局引用”）本质上是一个以克拉字符开头的多维数组引用`^`。该字符表示这是对存储在数据库中的数据的引用，而不是对临时处理私有数据的引用。每个这样的数据库数组称为“全局”。

我希望能够看到流中的内容，但我得到的东西看起来像是参考。有没有人处理过这种事情？

# php - 关联数组 - 将元素移动到第一个位置

> ID：12696330
> 
> 赞同：1
> 
> 时间：2012-10-02T18:46:22.143
> 
> 标签：php

> **可能重复：**
> [PHP - 将项目添加到关联数组的开头](https://stackoverflow.com/questions/5783750/php-add-item-to-beginning-of-associative-array)

有关联数组：

```
$myarray=array("key1"=>"value1","key2"=>"value2"); 
```

需要向数组中添加一个新元素：

```
$myarray["keynew"]="valuenew"; 
```

所以现在 $myarray 是：

```
Array ( [key1] => value1 [key2] => value2 [keynew] => valuenew ) 
```

如何将新添加的元素（“keynew”=>“valuenew”）移动到数组的第一个位置？

我有一个解决方法，但我不喜欢它。

```
$myarray=array("key1"=>"value1","key2"=>"value2");
$myarray["keynew"]="-valuenew";
asort($myarray);
$myarray["keynew"]="valuenew";
//$myarray=Array ( [keynew] => valuenew [key1] => value1 [key2] => value2 ) 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T18:52:53.573

尝试以下操作：

```
<?php
$myArray  = array('key1' => 'value1', 'key2' => 'value2');
$myArray2 = array('keynew' => 'valuenew');
var_dump($myArray2 + $myArray); 
```

输出：

```
% php test.php 
array(3) {
  ["keynew"]=>
  string(8) "valuenew"
  ["key1"]=>
  string(6) "value1"
  ["key2"]=>
  string(6) "value2"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T18:52:14.597

您可以尝试使用`array_merge()`函数 - 它在保留顺序的同时合并数组。

```
<?php
$myarray = array_merge(array('keynew' => '-valuenew'), $myarray); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T18:50:06.060

你有没有研究过array_merge？我认为这会帮助你： http: [//php.net/manual/en/function.array-merge.php](http://php.net/manual/en/function.array-merge.php)

# objective-c - 将 ARC 与非 ARC 混合会生成 EXC_BAD_ACCESS。怎么修？

> ID：12696331
> 
> 赞同：1
> 
> 时间：2012-10-02T18:46:26.580
> 
> 标签：objective-c, ios, automatic-ref-counting, ios6, exc-bad-access

我正在将我的 iOS4 项目转换为 ARC。我正在使用一些外部库，例如 PTPasscodeViewController、AppPirater、Flurry。我不断达到 EXC_BAD_ACCESS，这意味着我正在向已释放的对象发送消息。我使用 Instruments 来跟踪它，但无法弄清楚如何解决它。我希望来自 SO 的人能指出我正确的方向。

我的 SettingsViewController 编译时没有 ARC (-fno-obj-arc)。它在我的名为 IouViewController 的主根视图控制器中初始化：

```
-(void)showSettings:(id)sender {
    SettingsViewController *infoView = [[SettingsViewController alloc] init];
    [infoView setIouArray:iouTableArray];
    [[self navigationController] pushViewController:infoView animated:YES];
} 
```

当我运行仪器时，我发现这是原因：

![仪器图像 1](../Images/52c3349036aec54c5823bc3f1357fe41.png)

![仪器图像 2](../Images/96beb0f5f61bc428324bb0cb02fa9010.png)

所以，从图 2 中，我看到该版本来自“main.m”？？？我假设它与 main.m 中的自动释放池有关。因此，我在转换为 ARC 时犯的一个“错误”是我将 main.m 更改为与启用 ARC 的新项目相同。我不确定这是否有任何区别，但我遇到了其他 EXC_BAD_ACCESS 问题，并且这样做可以使其正常工作。

作为参考，这是我的 main.m：

```
int main(int argc, char *argv[]) {
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([IouApp2AppDelegate class]));
    }
} 
```

作为附加说明，当它崩溃时，它会跳转到 main.m 并显示消息“线程 1：信号 SIGKILL”。

我不知道没有 SO 我会做什么。感谢社区提供的所有帮助。

更新 1：如果我尝试将 ARC 用于 SettingsViewController，我会遇到一些我不太愿意处理的错误。这是一个例子：

```
 // passcode is correct, direct to PasscodeSettingsViewController

            // self retain, autorelease might be needed so that you do not look access to where the navigationController is since we pop one
            [[self retain] autorelease];

            // if you set popViewControllerAnimated:YES, weird title things happen. DO NOT MESS!!!
            [[self navigationController] popViewControllerAnimated:NO]; 
```

此代码片段来自 PTPasscodeViewController 示例代码库。使用ARC，它给了我错误：

```
[rewriter] it is not safe to remove an unused 'autorelease' message; its receiver may be destroyed immediately 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:02:39.873

如果要将项目转换为 ARC，则应在所有代码上启用*ARC*。Xcode 将在您执行诸如调用`autorelease`、`retain`和`release`. 只需构建，修复错误，构建，修复错误......重复直到构建成功。对于您使用的任何第三方代码，您应该禁用 ARC。对于您引用的任何第三方编译库，您应该能够正常使用它们。

有关过渡的更多信息，请参见[此处](https://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226)。

# firefox - 如何修复chrome和firefox之间的字体大小差异

> ID：12696332
> 
> 赞同：1
> 
> 时间：2012-10-02T18:46:30.957
> 
> 标签：firefox, google-chrome, font-size

我正在尝试解决 os x lion 上 chrome 和 firefox 最新版本之间的字体大小差异。

在 Chrome 和 Firefox 中试试这个页面：http: [//ccs.btcny.net/redhook/](http://ccs.btcny.net/redhook/)

每个盒子顶部的彩色标签适当地减少，直到我到达第 4 行，它保持它的大小而不是减小。Chrome 显示正常。火狐没有。

我正在使用 ems 字体大小并随着框变小而减小字体大小……通过设置每个新行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T05:21:42.767

通过根据浏览器运行单独的 CSS，通过使用 PHP（或您选择的动态语言）进行一些用户代理嗅探，可能会修复差异。简单地写一行 PHP 代码，它声明：

```
<?php
if (Firefox (not the actual UA sniffing code here)) {
    echo "<link rel=\"stylesheet\" href=\"../yourfirefoxstyle.css\">;
}

if {WebKit (Chrome or Safari, again, not actual code here)) {
    echo "<link rel=\"stylesheet\" href=\"../yourwebkitstyle.css\">;
}
else {
    echo "<link rel=\"stylesheet\" href=\"../styleforotherbrowsers.css\">;
}
?> 
```

# google-api - 如何触发 Google Drive API 中文件的病毒检查？

> ID：12696333
> 
> 赞同：4
> 
> 时间：2012-10-02T18:46:30.637
> 
> 标签：google-api, google-drive-api, google-api-client

我正在尝试通过 API 检查 Google Drive 病毒检查行为。通过 Google Drive UI，我可以下载文件，它告诉我它感染了病毒。但是，当我下载通过 API 上传的同一个文件时，它不会给我任何通知，而是让我下载受感染的文件。

如果我正在尝试下载受病毒感染的文件，如何让 API 告诉我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:17:37.063

文件扫描的结果当前未在 API 中公开。

# jquery - jQuerys 缺少 JSON.stringify

> ID：12696336
> 
> 赞同：3
> 
> 时间：2012-10-02T18:46:40.033
> 
> 标签：jquery, json

在将 JSON 字符串转换为对象时， jQuery`JSON.parse()`用于跨浏览器解决方案`jQuery.parseJSON()`：

```
parseJSON: function( data ) {
    if ( !data || typeof data !== "string") {
        return null;
    }

    // Make sure leading/trailing whitespace is removed (IE can't handle it)
    data = jQuery.trim( data );

    // Attempt to parse using the native JSON parser first
    if ( window.JSON && window.JSON.parse ) {
        return window.JSON.parse( data );
    }

    // Make sure the incoming data is actual JSON
    // Logic borrowed from http://json.org/json2.js
    if ( rvalidchars.test( data.replace( rvalidescape, "@" )
        .replace( rvalidtokens, "]" )
        .replace( rvalidbraces, "")) ) {

        return ( new Function( "return " + data ) )();

    }
    jQuery.error( "Invalid JSON: " + data );
} 
```

但是为什么没有类似的解决方案可以使用 将对象转换为 JSON`JSON.stringify`呢？`JSON.stringify`例如，在 IE7 中不起作用，除非您包含[json2.js](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)。它是 jQuerys 路线图上的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T18:48:15.107

没有类似的解决方案，因为 jQuery 内部不需要它。目前的立场是如果核心不需要它，并且可以使用普遍接受的方法*（包括 json2.js 或使用所有现代浏览器中内置的方法）*来实现它，它就不需要在核心中。

供参考，[https://forum.jquery.com/topic/jquery-encodejson](https://forum.jquery.com/topic/jquery-encodejson)

# ruby - 在 FasterCSV::Table 中交换列

> ID：12696338
> 
> 赞同：0
> 
> 时间：2012-10-02T18:46:42.207
> 
> 标签：ruby, csv, fastercsv

我有近 1000 多个 CSV 文件，我需要在其中洗牌几列并用洗牌后的列重新创建每个 CSV 文件。例如，初始 CSV 文件具有“H1”、“H2”和“H3”列。新的 CSV 文件将包含“H1”、“H3”和“H2”列。

在 Ruby 中使用 FasterCSV 我该怎么做？我尝试`FasterCSV::Table`过`column_name`访问但没有运气。

有善良的灵魂可以帮忙吗？

问候

ķ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T02:08:15.363

这不是太复杂：

```
CSV.open('new.csv', 'w') do |new_csv|
    CSV.foreach('old.csv') do |row|
        row[1], row[2] = row[2], row[1]
        new_csv << row
    end
end 
```

我称它为 CSV 而不是 FasterCSV 因为那是 1.9 方式

# c# - Resful Web 服务标准，最佳实践

> ID：12696345
> 
> 赞同：0
> 
> 时间：2012-10-02T18:47:09.550
> 
> 标签：c#, wcf, rest, web-standards

我正在寻找关于 RESTful Web 服务标准的最佳实践。我要整理的主要内容之一是 url 中的实体分离。什么是正确的做法，将方法分组在一个 url 中或按实体名称分开？

```
[WebGet(UriTemplate = "countries/{id}")]
Country GetCountry(int id);

[WebInvoke(UriTemplate = "countries/{id}", Method = "POST")]
Country CreateCountry(int id, Country country);
or 
[WebGet(UriTemplate = "resources/lists/countries/{id}")]
Country GetCountry(int id);

[WebInvoke(UriTemplate = "resources/lists/countries/{id}", Method = "POST")]
Country CreateCountry(int id, Country country); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T02:22:18.677

第一个选项更清洁。REST API 中的所有 URI 都应该是资源，因此 URI 中不需要“资源”，我会说“列表”也不是，因为这只是表示资源集合的一种方式。

此外，如果您要在 C# 中实现 REST 服务，按照示例，我强烈建议您使用[ASP.NET Web API](http://www.asp.net/web-api)。它提供了一种非常干净、强大且简单的方式来实现 REST 服务。

[Restful Web Services](https://rads.stackoverflow.com/amzn/click/com/0596529260)是一本很棒的书，它提供了有关 RESTful Web 服务设计的基本最佳实践，并且还有很好的示例。您还可以查看[Richardson 成熟度模型](http://martinfowler.com/articles/richardsonMaturityModel.html)，该模型根据成熟度级别描述了服务的安宁度。要使服务保持安静，它必须处于最高成熟度级别，但这些级别为朝着正确方向采取步骤提供了很好的指导。

# c# - 获取 2 种类型的行

> ID：12696346
> 
> 赞同：0
> 
> 时间：2012-10-02T18:47:15.247
> 
> 标签：c#, sql, sql-server, linq-to-sql

我在数据库中有一个列类型。我想获取 A 类型的所有行和 B 类型的前 N ​​行，两者都按 DateCreated 排序。我可以编写一个查询来执行此操作吗？任何指针都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T19:06:59.683

```
 SELECT *
     FROM tbl
    WHERE TYPE='A'
UNION ALL
   SELECT *
     FROM (
          SELECT TOP(N) *
            FROM tbl
           WHERE TYPE='B'
        ORDER BY DateCreated
      ) X
 ORDER BY DateCreated 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T19:07:59.967

假设这是来自具有以下结构或类似结构的一个表：

```
[type] [nchar](10) NULL,
[date] [smalldatetime] NULL,
[id] [int] IDENTITY(1,1) NOT NULL

(select * from [TableName] where [TableName].[type]='t1') 
union 
(select TOP 2* from [TableName]  where [TableName].[type]='t2') 
order by [date]desc 
```

（用第二种类型的所需结果替换“TOP2”）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T12:52:02.487

在 LINQ 中：

```
db
    .Where(x => x.Type == "A")
    .Union(db
        .Where(x => x.Type == "B")
        .OrderBy(x => x.SomeField)
        .Take(N));
    .OrderBy(x => x.DateCreated); 
```

# debugging - 如何在没有 Internet 访问的服务器中安装 Windows Web 服务 API (WWSAPI)

> ID：12696347
> 
> 赞同：5
> 
> 时间：2012-10-02T18:47:28.633
> 
> 标签：debugging, visual-studio-2012, remote-debugging, dmz, wwsapi

我正在尝试在开发环境中使用位于 DMZ 中的 Windows Server 2008 R2 SP1 x64 的服务器中的 Visual Studio 2012 远程调试器。此服务器不直接访问 Internet，而是通过防火墙访问。所以，我从我的工作站下载了 Visual Studio 2012 的远程工具，并将其复制到服务器，安装它，一切正常。

好吧，当我启动远程调试器配置向导并尝试安装 Windows Web 服务 API 时，它失败并显示下一条消息：

> ## 未能完成 Visual Studio 远程调试器配置向导
> 
> 调试器无法安装 Windows Web 服务 API。下载更新安装程序失败。请确保您的计算机能够访问互联网。
> 
> 下载地址： http: [//go.microsoft.com/fwklink/](http://go.microsoft.com/fwklink/?LinkId=215754) ?LinkId =215754 内部代码：0x800c0005
> 
> 要关闭向导，请单击完成。

所以，因为我是个好孩子，我按完成关闭向导。但在我转到向导提供的下载 URL 之前，并没有成功，因为它把我带到了 Microsoft.com 搜索 ( [http://search.microsoft.com/en-US/search.aspx](http://search.microsoft.com/en-US/search.aspx) )。

但是，我是男人！我不会哭，并继续谷歌搜索（搜索？）但是这次我正在搜索 WWSAPI Redistributable，但当时没有成功，然后我在这里搜索了与我类似的情况，这就是我得到的[无法安装Windows Web Services API for Remote Debugging with VS2012](https://stackoverflow.com/questions/11945430/unable-to-install-windows-web-services-api-for-remote-debugging-with-vs2012)，但没有解决方案，所以我决定在 StackOverflow 上提问，因为我几乎迫切希望找到解决方案。所以，我希望你能帮助我找到解决我的情况的方法。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:38:37.630

请参考这里描述的解决方法，它解决了这个确切的问题：

[https://connect.microsoft.com/VisualStudio/feedback/details/763521/cannot-run-visual-studio-2012-remote-debugger-on-windows-server-2008-non-r2](https://connect.microsoft.com/VisualStudio/feedback/details/763521/cannot-run-visual-studio-2012-remote-debugger-on-windows-server-2008-non-r2)

> 从以下链接安装 Windows Live Essentials。
> 
> [http://go.microsoft.com/fwlink/?LinkID=255474](http://go.microsoft.com/fwlink/?LinkID=255474)
> 
> 已安装的依赖项之一是所需的 Web 服务 API。

另外，请登录并为错误解决方案投票，以**感谢 JustinPealing 最先**担心打开错误，以及找到此解决方法的人

# jquery - jquery按箭头键选择选项

> ID：12696349
> 
> 赞同：0
> 
> 时间：2012-10-02T18:47:33.323
> 
> 标签：jquery

好的，伙计们，所以我有这个算法，可以根据您按下的键（向上或向下箭头）选择一个选项。

```
var nr = 0;
    $(function(){
        $('#searchbox').keyup(function(e){
            var total = $('#suggest'+nr).attr("total");
            var code = (e.keyCode ? e.keyCode : e.which);
            if ( up(code) == 1 )
            {
                if (nr == 0)
                {
                        $('#suggest'+total).addClass('hlight');
                }
            }
            else
                if ( down(code) == 1 )
                {
                    $('#suggest'+nr).css({'background':'red'});;    
                }
        });

    }); 
```

但问题是，每次我释放相应的 div 时，都会通过更改背景颜色在几分之一秒内被选中，然后又恢复为原始背景颜色。

如何使它突出显示 div 和 css 以保持应用？谢谢你。

HTML：

```
<div id="search">
                <form action="home.php" method="get" name="search">
                   <input type="text" id="searchbox" name="srch" size="60" value="Search..." onFocus="if(this.value == 'Search...') {this.value = '';}" onBlur="if (this.value == '') {this.value = 'Search...';}" />
                   <input type='hidden' name='q' value='<?php echo $q; ?>' />
                   <input type='hidden' name='page' value='1' />
                  <button type="submit" id="searchb"><img src="pics/lens1.jpg" alt="Submit"></button>
                </form>

                </div><!--end search--> 
```

PHP：

```
echo "<p class='suggestion' id=".$char." total=".($total-1)." style='color:black;font-size:13px;margin-bottom: 7px;'>".$id.",".$strg."</p>"; 
```

CSS：

```
<style >
.hlight{
    background:yellow;
}
​

</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:06:45.167

看看这里的关键功能：

[http://jsfiddle.net/Mutmatt/mQahU/](http://jsfiddle.net/Mutmatt/mQahU/)

```
var keyMap = {
    87: 'P1UP',
    83: 'P1DOWN',
    38: 'P2UP',
    40: 'P2DOWN'
},
    getKey = function(key) {
        return keyMap[(key.which || key.keyCode)] || '';
    };

$(document).keydown(function(event) {
        switch (getKey(event)) {
        case 'P1UP':
            event.preventDefault();
            keys['P1UP'] = true;
            break;
        case 'P1DOWN':
            event.preventDefault();
            keys['P1DOWN'] = true;
            break;
        case 'P2UP':
            event.preventDefault();
            keys['P2UP'] = true;
            break;
        case 'P2DOWN':
            event.preventDefault();
            keys['P2DOWN'] = true;
            break;
        default:
            break;
        }
    });

    $(document).keyup(function(event) {
        switch (getKey(event)) {
        case 'P1UP':
            event.preventDefault();
            delete keys['P1UP'];
            break;
        case 'P1DOWN':
            event.preventDefault();
            delete keys['P1DOWN'];
            break;
        case 'P2UP':
            event.preventDefault();
            delete keys['P2UP'];
            break;
        case 'P2DOWN':
            event.preventDefault();
            delete keys['P2DOWN'];
            break;
        default:
            break;
        }
    }); 
```

可能有帮助？

# shell - VBscript 自动化命令行“是/否”q‌u‌e‌s‌t‌i‌o‌n

> ID：12696353
> 
> 赞同：0
> 
> 时间：2012-10-02T18:47:47.697
> 
> 标签：shell, command-line, vbscript, automation, shell-exec

我有一个停止进程并启动它的 VBscript。

在命令行中弹出一个是/否问题我需要回答“是”我怎样才能务实地做到这一点？

到目前为止，我有：

```
Option Explicit
Dim wshShell
On Error Resume Next
   Set wshShell = WScript.CreateObject("WSCript.shell")
   If Err.Number <> 0 Then
      Wscript.Quit
   End If
   wshShell.Run  "cmd.exe /C cd C:\WINDOWS\system32 & process.exe STOP"
   WScript.Sleep 15000
   wshShell.Run  "cmd.exe /C cd C:\WINDOWS\system32 & process.exe START"
On Error Goto 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:42:09.757

在需要输入的程序上使用此示例：

```
wshShell.Run  "cmd.exe /C cd C:\WINDOWS\system32 & ( echo Yes|process.exe STOP )" 
```

该`echo Yes`命令将包含`ENTER`密钥。即：`Y`+ `e`+ `s`+`ENTER`

# multithreading - 尝试 loadLibrary() 时应用程序崩溃，4.1.1 上的 pthread_create 问题？

> ID：12696355
> 
> 赞同：1
> 
> 时间：2012-10-02T18:47:47.823
> 
> 标签：multithreading, android-ndk, java-native-interface, cross-compiling, libc

我试图通过尝试加载我使用 System.loadLibrary() 交叉编译的库来调试崩溃。我已经能够在运行 4.0.4 (ICS) 的任何设备上成功加载此库，但它在运行 4.1.1 (JB) 的所有设备上崩溃。在 libc 中运行到 pthread_create() 时似乎崩溃了：

```
10-01 14:25:34.173: D/dalvikvm(8215): Trying to load lib /data/data/com.gnychis.awmon/lib/libtshark.so 0x410fb430
10-01 14:25:34.181: A/libc(8215): Fatal signal 11 (SIGSEGV) at 0x5dfaa01c (code=2), thread 8232 (AsyncTask #1)
// And here is the end of the stack....
I/DEBUG   (  246):     #10  pc 0001263c  /system/lib/libc.so (pthread_create+180) 
```

这是显示整个堆栈跟踪所涉及的更长的崩溃日志，您将看到它在 libc 和 pthread_create 处结束：

```
D/dalvikvm(26364): Trying to load lib /data/data/com.gnychis.awmon/lib/libtshark.so 0x410a5ee0
F/libc    (26364): Fatal signal 11 (SIGSEGV) at 0x5dff301c (code=2), thread 27345 (AsyncTask #1)
D/AndroidRuntime(27404): Calling main entry com.android.commands.am.Am
I/DEBUG   (  246): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
I/DEBUG   (  246): Build fingerprint: 'd2uc-user 4.0.4 IMM76D I747UCALEM release-keys'
I/DEBUG   (  246): pid: 26364, tid: 27345, name: AsyncTask #1  >>> com.gnychis.awmon <<<
I/DEBUG   (  246): signal 11 (SIGSEGV), code 2 (SEGV_ACCERR), fault addr 5dff301c
D/AndroidRuntime(27404): Shutting down VM
D/dalvikvm(27404): GC_CONCURRENT freed 99K, 88% free 498K/4096K, paused 1ms+1ms, total 7ms
I/AndroidRuntime(27404): NOTE: attach of thread 'Binder_3' failed
I/DEBUG   (  246):     r0 80000000  r1 02b1a000  r2 00000005  r3 5dff3000
I/DEBUG   (  246):     r4 40102894  r5 4010aaec  r6 00000000  r7 00000029
I/DEBUG   (  246):     r8 00000029  r9 5dff3000  sl 60871000  fp 02b1a000
I/DEBUG   (  246):     ip 00000005  sp 5d95ace0  lr 6004d1bb  pc 400ec6e0  cpsr 600d0030
I/DEBUG   (  246):     d0  61642f617461642f  d1  672e6d6f632f6174
I/DEBUG   (  246):     d2  612e73696863796e  d3  62696c2f6e6f6d77
I/DEBUG   (  246):     d4  00000000000e16f0  d5  000000000000695f
I/DEBUG   (  246):     d6  000000000002a715  d7  0000012f00000000
I/DEBUG   (  246):     d8  0000000000000000  d9  0000000000000000
I/DEBUG   (  246):     d10 0000000000000000  d11 0000000000000000
I/DEBUG   (  246):     d12 0000000000000000  d13 0000000000000000
I/DEBUG   (  246):     d14 0000000000000000  d15 0000000000000000
I/DEBUG   (  246):     d16 7420676e69797254  d17 6c2064616f6c206f
I/DEBUG   (  246):     d18 0063002f00610074  d19 0067002e006d006f
I/DEBUG   (  246):     d20 006800630079006e  d21 0061002e00730069
I/DEBUG   (  246):     d22 006e006f006d0077  d23 00620069006c002f
I/DEBUG   (  246):     d24 000000000000e16f  d25 0000000000000000
I/DEBUG   (  246):     d26 000000000000695f  d27 0000000000000000
I/DEBUG   (  246):     d28 000000000000695f  d29 0000000000000000
I/DEBUG   (  246):     d30 0000000500000005  d31 0000000500000005
I/DEBUG   (  246):     scr 60000012
I/DEBUG   (  246): 
I/DEBUG   (  246): backtrace:
I/DEBUG   (  246):     #00  pc 000046e0  /system/bin/linker
I/DEBUG   (  246):     #01  pc 00005b6f  /system/bin/linker
I/DEBUG   (  246):     #02  pc 0004f73b  /system/lib/libdvm.so (dvmLoadNativeCode(char const*, Object*, char**)+186)
I/DEBUG   (  246):     #03  pc 000662bd  /system/lib/libdvm.so
I/DEBUG   (  246):     #04  pc 000274e0  /system/lib/libdvm.so
I/DEBUG   (  246):     #05  pc 0002be08  /system/lib/libdvm.so (dvmInterpret(Thread*, Method const*, JValue*)+180)
I/DEBUG   (  246):     #06  pc 0005f9f5  /system/lib/libdvm.so (dvmCallMethodV(Thread*, Method const*, Object*, bool, JValue*, std::__va_list)+272)
I/DEBUG   (  246):     #07  pc 0005fa1f  /system/lib/libdvm.so (dvmCallMethod(Thread*, Method const*, Object*, JValue*, ...)+20)
I/DEBUG   (  246):     #08  pc 000545ab  /system/lib/libdvm.so
I/DEBUG   (  246):     #09  pc 00012ee4  /system/lib/libc.so (__thread_entry+48)
I/DEBUG   (  246):     #10  pc 0001263c  /system/lib/libc.so (pthread_create+180) 
```

有趣的是，如果我在库上使用 arm-eabi-objdump，地址 1263c 似乎是它尝试执行 pthread_clone 时：

```
$ arm-eabi-objdump -S /tmp/libc.so | grep 1263c
1263c:       ebffed71        bl      dc08 <__pthread_clone> 
```

有没有人知道为什么这不适用于 4.1.1？另外，为什么我的崩溃日志顶部的“构建指纹”显示：

```
Build fingerprint: 'd2uc-user 4.0.4' 
```

这可能是为什么它不在 4.1.1 上运行的根本问题吗？我正在使用最新的 NDK (r8b)，以 android-14 作为平台，带有 arm-eabi-4.4.3 工具链。

非常感谢任何帮助/指导。

**编辑：** 现在我的大部分崩溃似乎都发生在......我在这里丢失了一个符号还是什么？

```
D/dalvikvm(11194): Trying to load lib /data/data/com.gnychis.awmon/lib/libtshark.so 0x4130fac8
F/libc    (11194): Fatal signal 11 (SIGSEGV) at 0x5df6b01c (code=2), thread 11230 (AsyncTask #1)
I/DEBUG   ( 7539): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
I/DEBUG   ( 7539): Build fingerprint: 'd2uc-user 4.0.4 IMM76D I747UCALEM release-keys'
I/DEBUG   ( 7539): pid: 11194, tid: 11230, name: AsyncTask #1  >>> com.gnychis.awmon <<<
I/DEBUG   ( 7539): signal 11 (SIGSEGV), code 2 (SEGV_ACCERR), fault addr 5df6b01c
I/DEBUG   ( 7539):     r0 80000000  r1 02b1b000  r2 00000005  r3 5df6b000
I/DEBUG   ( 7539):     r4 400e8894  r5 400f0aec  r6 00000000  r7 0000002a
I/DEBUG   ( 7539):     r8 0000002a  r9 5df6b000  sl 607ea000  fp 02b1b000
I/DEBUG   ( 7539):     ip 00000005  sp 5d8d2cd0  lr 5ffc5fff  pc 400d26e0  cpsr 600d0030
I/DEBUG   ( 7539):     d0  61642f617461642f  d1  672e6d6f632f6174
I/DEBUG   ( 7539):     d2  612e73696863796e  d3  62696c2f6e6f6d77
I/DEBUG   ( 7539):     d4  00000000000e16f0  d5  000000000000695f
I/DEBUG   ( 7539):     d6  000000000005a6e8  d7  0000012f00000000
I/DEBUG   ( 7539):     d8  0000000000000000  d9  0000000000000000
I/DEBUG   ( 7539):     d10 0000000000000000  d11 0000000000000000
I/DEBUG   ( 7539):     d12 0000000000000000  d13 0000000000000000
I/DEBUG   ( 7539):     d14 0000000000000000  d15 0000000000000000
I/DEBUG   ( 7539):     d16 7420676e69797254  d17 6c2064616f6c206f
I/DEBUG   ( 7539):     d18 00000000006f7478  d19 0067002e006d006f
I/DEBUG   ( 7539):     d20 006800630079006e  d21 0061002e00730069
I/DEBUG   ( 7539):     d22 006e006f006d0077  d23 00620069006c002f
I/DEBUG   ( 7539):     d24 000000000000e16f  d25 0000000000000000
I/DEBUG   ( 7539):     d26 000000000000695f  d27 0000000000000000
I/DEBUG   ( 7539):     d28 000000000000695f  d29 0000000000000000
I/DEBUG   ( 7539):     d30 0000000d0000000d  d31 0000000d0000000d
I/DEBUG   ( 7539):     scr 60000012
I/DEBUG   ( 7539): 
I/DEBUG   ( 7539): backtrace:
I/DEBUG   ( 7539):     #00  pc 000046e0  /system/bin/linker
I/DEBUG   ( 7539):     #01  pc 00005b6f  /system/bin/linker
I/DEBUG   ( 7539):     #02  pc 0004f73b  /system/lib/libdvm.so (dvmLoadNativeCode(char const*, Object*, char**)+186)
I/DEBUG   ( 7539):     #03  pc 000662bd  /system/lib/libdvm.so
I/DEBUG   ( 7539):     #04  pc 00027524  /system/lib/libdvm.so
I/DEBUG   ( 7539):     #05  pc 000fedd8  <unknown> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:30:01.587

请参阅[Android JNI：调用 System.loadLibrary() 导致 SEGV](https://stackoverflow.com/questions/10184579/android-jni-calling-system-loadlibrary-causes-segv)。你的原生库有 JNI_OnLoad() 吗？如果此函数调用 JNI 函数，请尝试从主 (UI) 线程调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:04:51.117

原来我的工具链太旧了。我在 AOSP 项目中升级到了较新的 arm-eabi 工具链，现在库链接就好了！

# c++ - 如何处理向量以获得所需的输出？

> ID：12696359
> 
> 赞同：1
> 
> 时间：2012-10-02T18:48:08.197
> 
> 标签：c++, vector

我自学 C++，因此在某些领域我有一些空白页，例如。对容器的一些操作，不同操作的名称等。因此请帮我解决这个问题。（我也很感激向我发送好的资源，这些资源将帮助我选择正确的容器和方法来处理它们。真正的实现示例将有很大帮助，因为这样更容易为我获取它。）

这是我的第一个“真正的”程序。我是用 PHP 编写的，但现在在学习时重写为 C++（我可以说它更具挑战性）。

简而言之，读取文件并创建 3 个不同的向量，其中包含相应的元素（人名、物品名称和物品数量）。例如（我知道这不是分配值的方法，它只是为了说明内容）：

```
vector<string> vectorOfNames = {"Adam", "Eva", "Adam", "Adam", "Bruce"};
vector<string> vectorOfItems = {"Apple", "Apple", "Orange", "Pear", "Melon"};
vector<int> vectorOfAmount = {1, 9, 2, 4, 1}; 
```

现在，我想（按人和项目）表示它并计算（按数量）这些向量，例如。打印类似的东西：

```
All persons:
Adam
Eva
Bruce

All items:
Apple - 10
Orange - 2
Pear - 4
Melon - 1

Adam have:
Apple - 1
Orange - 2
Pear - 4

Eva have:
Apple - 9

Bruce have:
Melon - 1 
```

在 PHP 中，我使用 *array_keys(array_flip())* 来获取唯一的名称和项目。在 C++ 中，我发现了这样的东西：

```
vector< string >::iterator r , w ;

set< string > tmpset ;

for( r = vectorOfNames.begin() , w = vectorOfNames.begin() ; r != vectorOfNames.end() ; ++r )
{
    if( tmpset.insert( *r ).second )
    {
        *w++ = *r ;
    }
}

vectorOfNames.erase( w , vectorOfNames.end() ); 
```

它运作良好，但问题是它修改了原始vectorOfNames。在应用它之前我应该​​将此向量复制到新向量还是有另一种方法？

至于 PHP 中所需的其余处理，我使用了*foreach*和*if*语句。我正在为 C++ 尝试不同的方法，但没有任何效果。我完全迷失了......我也知道Boost Library中有一些功能，但我暂时不想去那里，更喜欢先学习基础知识。

另一方面，也许我应该使用其他容器，如地图或其他东西，使这个处理更容易？

所以如果你仍然知道我的意思并且你没有睡着，请把我推向正确的方向；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T19:03:02.043

第一步，即在 a 中获取所有唯一名称，`std::vector<std::string>`我可能会这样做：

```
std::vector<std::string> tmp(original);
std::sort(tmp.begin(), tmp.end());
std::unique_copy(tmp.begin(), tmp.end(),
                 std::ostream_iterator<std::string>(std::cout, "\n")); 
```

另一种解决方案可以使用辅助`std::set<std::string>`但不会按排序顺序打印名称：

```
std::set<std::string> mark;
std::copy_if(original.begin(), original.end(),
             [&](std::string const& value) { return mark.insert(value); }); 
```

（利用 C++ 2011 的特性）

其他操作不容易直接映射到 C++ 算法的工作方式。为了处理这些问题，我可能会使用不同的数据布局，例如，将数据存储在一个`std::vector<std::tuple<std::string, std::string, int> >`而不是三个单独的向量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:42:45.800

这与您原来的方法很接近：

```
vector< string > vs;
vs.resize(vectorOfNames.size()); // more efficient if we already know the size

set< string > tmpset ;

vector< string >::const_iterator r;
for( r = vectorOfNames.begin() ; r != vectorOfNames.end() ; ++r )
{
    if( tmpset.insert( *r ).second )
    {
        vs.push_back(*r);
    }
} 
```

但是，它使用辅助向量来存储新名称，因此您无需修改​​原始向量。为了保证您不会实际修改向量，此方法使用 const_iterator 而不是迭代器。

# wolfram-mathematica - 点和线段的交点。两者都在移动

> ID：12696361
> 
> 赞同：2
> 
> 时间：2012-10-02T18:48:17.457
> 
> 标签：wolfram-mathematica, 2d, collision-detection, point, line-segment

我如何知道以固定速度移动的点和端点正在移动的线段之间的时间和交点？端点独立移动，但仅沿正 y 方向移动，并且以固定速度移动。

情况图片：

![交点.png](../Images/df7c39decc8b1fda4adcd4785c04189f.png)

所以随着时间 t，L1 移动到 L2，R1 移动到 R2，P1 移动到 P2。在某个点，P 在时间 t 的位置应该位于 L 和 R 在时间 t 形成的线段上的某个位置。

我在mathematica中坚持了我能提出的每一个关系，并让它解决了t，这给了我一个答案，但是当我尝试实现它时它似乎不起作用（没有检测到碰撞。我很新到mathematica并且真的不知道我在做什么，所以我有点希望有更多经验的人会注意到我试图解决方程组的方式存在根本错误。感谢阅读！

其中 U 是时间 t 的线段。

*   Ly = L1y + (L2y - L1y) * t
*   Ry = R1y + (R2y - R1y) * t
*   Py = P1y + (P2y - P1y) * t
*   Px = P1x + (P2x - P1x) * t
*   Ux = L1x + (R1x - L1x) * m
*   Uy = Ly + (Ry - Ly) * m
*   m = (Px - L1x) / (R1x - L1x)

求解 t 其中：

*   Ux = Px
*   Uy = Py

解决方案：

*   A = (P2x - P1x) * (L2y - L1y) - (P2x - P1x) * (R2y - R1y)
*   B = (P2x - P1x) * L1y + (P2x - P1x) * R1y - P1x * (L2y - L1y) + L1x * (L2y - L1y) + P1x * (R2y - R1y) - L1x * (R2y - R1y) + (P2y - P1y) * (R1x - L1x) - (R1x - L1x) * (L2y - L1y)
*   C = P1x * L1y - P1x * R1y - L1y * L1x + R1y * L1x + P1y * (R1x - L1x) - L1y * (R1x - L1x)

t = (-B + -sqrt(B^2 - 4AC)) / 2A

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:01:26.930

数值解：

```
l1 = {0.969, 0.594};
l2 = {0.892, 0.895};
r1 = {0.75880, 0.90366};
r2 = {0.22, 0.57};
p = {0.337+ 0.8764 t, 0.726 + 0.252 t};
s1 = l1 + ( l2 - l1) t;
s2 =  r1 + (r2 - r1) t;
lx = ( (1 + ci) s1 + (1 - ci) s2 )/2 ;
ciz = (ci /. 
   Solve[ Dot[ {px, 
      py}  - ( (1 + ci) {s1x, s1y} + (1 - ci) {s2x, s2y} )/
      2 , {s1x, s1y} - {s2x, s2y}] == 0, ci][[1]]);
cizt = Simplify[
   ciz /. { px -> p[[1]] , py -> p[[2]] , 
     s1x -> (l1 + ( l2 - l1) t)[[1]], 
     s1y -> (l1 + ( l2 - l1) t)[[2]] , 
     s2x -> (r1 + ( r2 - r1) t)[[1]], 
     s2y -> (r1 + ( r2 - r1) t)[[2]] }];
distance[t_] = 
  Simplify[Norm[lx - p]^2  /. ci -> cizt ,  Assumptions -> {Im[t] == 0} ];
Plot[distance[t], {t, 0, 1}]
possiblesolution = FindMinimum[distance[t], {t, 0, 1}]
If[ Chop[possiblesolution[[1]]] == 0, 
 tp = (t /. possiblesolution[[2]]); Print["possible hit at t=", tp]; 
 If[Abs[cizt /. possiblesolution[[2]]] > 1, 
 Print["missed off the end"], 
 Animate[Show[Graphics[{Point[{p /. t -> 0, p /. t -> 1} ]}], 
Graphics[{Line[{l1, r1} ]}], Graphics[{Line[{l2, r2} ]}], 
Graphics[{Dashed, Line[{s1, s2} /. t -> a]}], 
If[a < tp, Graphics[{Red, Line[{p /. t -> 0, p /. t -> a}]}], 
 Graphics[{Red, Line[{p /. t -> 0, p /. t -> a}], Blue, 
   Line[{p /. t -> tp, p /. t -> a}]}]]], {a, 0, 1}]]] 
```

如果您查看距离函数，您会看到最小值是 7 阶多项式的根。要稳健，您需要查看所有实数根。

编辑——基于 Mr Wizard 解决方案的更好版本。我通过检查交点是否*在线*段上，而不仅仅是在点之间的无限线上，对它进行了一些改进。此示例生成随机问题并在找到具有有效解决方案的问题后停止。

```
 solutions = {}
While[Length[solutions] == 0,
 {l1, l2, r1, r2, p1, p2} = RandomReal[{0, 1}, 2] &  /@ Range[6];
 p = p1 + (p2 - p1) t  ;
 s1 = l1 + ( l2 - l1) t;
 s2 =  r1 + (r2 - r1) t;
 realsols = 
  Solve[ { 0 < t < 1 ,  Det[ { s1 - s2 , p - s2}]  == 0 ,Dot[ p - s2  , p - s1 ] < 0 } ];
 If[Length[realsols] > 0, solutions = Sort[ (t /. realsols)]; 
  tp = solutions[[1]]];] 
Animate[Show[
  Graphics[{Point[{p1, p2} ]}],
  Graphics[{Green, Line[{l1, r1} ]}],
  Graphics[{Orange, Line[{l2, r2} ]}],
  Graphics[{Dashed, Line[{s1, s2} /. t -> a]}],
  If[a < tp,
   Graphics[{Red, Line[{p1, p /. t -> a}]}],
   Graphics[{
     Red, Line[{p1, p /. t -> a}],
     Blue, Line[{p /. t -> tp, p /. t -> a}]}
    ]]], {a, 0, 1}]
```

顺便说一句，让 Solve[] 找到所有解决方案然后选择有效的解决方案而不是解决约束要快得多。

```
 (Do [ realsols = 
    Solve[ { Det[ { s1 - s2 , p - s2}]  == 0 , 0 < t < 1, 
      Dot[ p - s2  , p - s1 ] < 0 } ] , {10} ]; realsols)  // Timing
(Do [realsols = 
    Select[ Solve[ {  Det[ { s1 - s2 , p - s2}]  == 0   , 
       0 < t < 1}  ] , 
     Dot[ p - s2  , p - s1 ] < 0 /. #  & ]   , {100} ]; 
  realsols) // Timing
(Do [realsols = 
    Select[ Solve[ {  Det[ { s1 - s2 , p - s2}]  == 0   } ] ,  0 <= t <= 1  &&    Dot[ p - s2  , p - s1 ]  < 0  /. #   & ]   , {100} ]; 
  realsols ) // Timing 
```

第一种形式虽然更漂亮:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:04:39.530

### 定义点：

```
{L1, L2, R2, R1, P1, P2} =
   {{0.01`, 0.31`}, {0, 2.`}, {2.985`, 1.9`}, {2.995`, 0.95`},
    {1.7`, 1.82`}, {1.23`, 0.87`}}; 
```

### 定义函数：

```
L := L1 (1 - t) + L2 t
R := R1 (1 - t) + R2 t
P := P1 (1 - t) + P2 t 
```

### 可视化问题：

```
Manipulate[
 Block[{t = tt},
  Graphics[{
    {Red, Polygon[{L1, L2, R2, R1}]},
    {White, Thick, Line[{P1, P2}]},
    {Black, PointSize[Large], Point@{L, R, P}, Line[{L, R}]}
   }, Background -> Gray, PlotRangePadding -> 0.7]
 ],
 {tt, 0, 1}
] 
```

![数学图形](../Images/2809a2a1298a6f3a31f1bddac77d50db.png)

### 求解`t`并观察解与可视化相匹配：

```
Reduce[{Det[{R - L, P - L}] == 0, 0 < t < 1}, t] 
```

> t == 0.525873

### 利润。

# jquery - jQueryMobile Listview 页面转换仅适用于前几个元素

> ID：12696362
> 
> 赞同：1
> 
> 时间：2012-10-02T18:48:16.937
> 
> 标签：jquery, jquery-mobile

我有一个可能包含一百多个项目的列表视图。单击任何元素时，它会将您带到该元素的详细信息页面。

这很好用。

然而，可爱的页面转换可能只发生在前 10 个元素之后，然后它只是在功能性但不一致的页面之间来回导航。

有谁知道它为什么会这样做，以及如何解决它？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:47:22.637

请在主 jqm 文件中找到设置：defaultGetMaxScrollForTransition。并尝试将当前值 3 更改为 5 或 6？

> $.mobile.getScreenHeight() * 3;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:10:11.137

在查看之后，我了解到如果页面滚动超过屏幕高度的 3 倍，jqm 会取消任何转换。我还没有找到解决方法，但它是通过设计来保持页面转换顺利进行的。

# python - 使用带有稀疏矩阵的 StratifiedShuffleSplit

> ID：12696363
> 
> 赞同：2
> 
> 时间：2012-10-02T18:48:21.083
> 
> 标签：python, numpy, scikit-learn, classification

我正在尝试复制[`StratifiedShuffleSplit`](http://scikit-learn.org/stable/modules/generated/sklearn.cross_validation.StratifiedShuffleSplit.html)X 不是数组而是稀疏矩阵的示例。在下面的示例中，此矩阵是通过`DictVectorizer`对混合的名义和数字特征数组的拟合创建的。

```
from sklearn.feature_extraction import DictVectorizer
from sklearn.preprocessing import LabelEncoder
from sklearn.cross_validation import StratifiedShuffleSplit

X = [{"a":1, "b":"xx"}, {"a":2, "b":"yx"}, {"a":2, "b":"yx"}, {"a":1, "b":"xx"}]
y = ["A", "B", "B", "A"]

X = DictVectorizer().fit_transform(X)
y = LabelEncoder().fit_transform(y)

sss = StratifiedShuffleSplit(y, 3, test_size=0.5, random_state=0)

for train_index, test_index in sss:
    X_train, X_test = X[train_index], X[test_index]
    y_train, y_test = y[train_index], y[test_index] 
```

当我运行脚本时，会引发以下错误：

```
Traceback (most recent call last):
  File ".../test.py", line 22, in <module>
    X_train, X_test = X[train_index], X[test_index]
TypeError: only integer arrays with one element can be converted to an index 
```

这是因为 X 不是数组而是稀疏矩阵。所以问题是，当 X 不是数组而是矩阵时，如何使用这种方法拆分数据？也许问题不是专门针对 scikit-learn，而是 numpy？在将它们“应用”到 X 之前，我是否必须“转换” **train_index**和**test_index ？**或者也许我必须“改造” **X**？

根据**StratifiedShuffleSplit**的文档，为了让它与矩阵一起使用，我应该将**True**传递给参数**indices**，但这没有帮助。

你能给我的任何建议都会非常受欢迎。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T08:42:38.967

问题是由于在您的 scikit-learn 版本中`DictVectorizer`返回的 COO 矩阵不能按行索引（不幸的是，scipy 错误消息不是很明确）。要解决此问题，请通过替换以下行将矢量化输出转换为 CSR 格式：

```
X = DictVectorizer().fit_transform(X) 
```

经过

```
X = DictVectorizer().fit_transform(X).tocsr() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T09:14:51.850

[您必须按照文档中的](http://scikit-learn.org/dev/modules/generated/sklearn.cross_validation.StratifiedShuffleSplit.html#sklearn.cross_validation.StratifiedShuffleSplit)指定传递`indices=True`给。`StratifiedShuffleSplit`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T19:08:14.480

我可以告诉你如何在 python 中拆分和打乱稀疏矩阵，mybe 有帮助：

```
def splitSparseMatrix(matrix):
    trainingSet =  matrix[:trainingSetSize,:]
    testSet = matrix[-testSetSize:,:]
    return trainingSet, testSet

def shuffleSparseMatrix(smatrix):
    indexList = np.arange(np.shape(matrix)[0])
    np.random.shuffle(indexList)
    return matrix[indexList, :] 
```

# mysql - 如何使用 concat 压缩多行

> ID：12696364
> 
> 赞同：1
> 
> 时间：2012-10-02T18:48:22.007
> 
> 标签：mysql, sql, string, concat, workbench

假设我在数据库中有一个表 COG，并且 COG 表中的每个 COG 都可以链接到第二个表中的一个或多个生物体。如果我只是加入这些，我最终会为每个生物体多次复制 COG。

我想生成一个查询，改为使用 concat_ws()（即 CSV 格式）将链接到给定 COG 的每个生物体放入单个字符串中。

我尝试使用： GROUP BY concat_ws(',', organic.name)

但这没有用。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T18:52:13.780

您正在寻找[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)功能：

```
SELECT c.ID, GROUP_CONCAT(o.name)
    FROM COG c
        INNER JOIN organism o
            ON c.ID = o.COG_ID
    GROUP BY c.ID; 
```

# java - 在 JVM 中加载所需的策略实现（在 Java 安全属性文件中加载 policy.provider 的值）

> ID：12696365
> 
> 赞同：1
> 
> 时间：2012-10-02T18:48:27.410
> 
> 标签：java, security, policy, javapolicy

根据[文档](http://docs.oracle.com/javase/6/docs/api/java/security/Policy.html)，可以通过将“policy.provider”安全属性（在 Java 安全属性文件中）的值设置为所需 Policy 子类实现的完全限定名称来更改默认 Policy 实现。

我创建了自己的策略提供程序类的实现，并对 Java 安全属性文件进行了相应的更改。但是类没有被加载。经过一番研究后，我发现了这份[白皮书](http://www.tedneward.com/files/Papers/JavaPolicy/JavaPolicy.pdf)，上面写着“在“jre”目录下创建一个“类”目录并将策略实现放在那里。现在引导类加载器将获取 MyPolicy 实现”。虽然我试过了，但还是失败了。

如何使我的策略实现可用于引导类加载器以成功加载？

# php - 如何匹配两个数组中的值？

> ID：12696367
> 
> 赞同：0
> 
> 时间：2012-10-02T18:48:45.670
> 
> 标签：php, arrays

使用 PHP，如何使用这两个数组将订阅者与用户匹配？

**$订阅者**

```
Array
(
    [0] => stdClass Object
        (
            [meta_id] => 1
            [email] => name@example.com
        )

) 
```

**$用户**

```
Array
(
    [0] => stdClass Object
        (
            [ID] => 1
            [user_email] => name@example.com
        )

    [1] => stdClass Object
        (
            [ID] => 2
            [user_email] => name2@example.com
        ) 
```

我以为这样就可以了...

```
<?php
foreach ( $users as $user ) {
    if ( in_array( 'name@example.com', $subscribers ) ) {
        echo 'Matched user';
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T18:51:02.487

```
foreach ($users as $user) {
    foreach ($subscribers as $subscriber) {
        if ($user->user_email === $subscriber->email) {
            echo 'Matched user';
            break;
        }
    }
} 
```

# sharepoint - 分析图不显示数据

> ID：12696373
> 
> 赞同：0
> 
> 时间：2012-10-02T18:49:23.243
> 
> 标签：sharepoint, mdx, dashboard, performancepoint

我正在处理 PerformancePoint 中的分析图表。我使用以下公式将过滤器（2 级层次结构）链接到此图表：

```
<<SourceValue>>.children 
```

使用这个公式使我能够向下钻取并显示子成员。它工作正常。但是，当我选择层次结构中的最低级别成员（在过滤器中）时，因为没有子成员，图表显示“没有要显示的数据”消息。

我想通过自定义过滤器公式来解决这个问题，例如：如果 SourceValue 没有任何子代，则返回 SourceValue，但如果有子代，则返回子代。简而言之，我想写一个条件语句。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:20:03.217

您还可以使用[IsLeaf](http://msdn.microsoft.com/en-us/library/ms144932.aspx)函数：

```
IIf(IsLeaf(<<SourceValue>>), <<SourceValue>>, <<SourceValue>>.Children) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:37:55.193

好的，我已经想通了。这是声明：

```
IIF ( <<SourceValue>>.Level.Ordinal <> X, <<SourceValue>>.Children, <<SourceValue>>) 
```

X 值根据所选级别的序数值而变化。我的过滤级别和序数值：公司 (0) > 部门 (1) > 团队 (2)

# multithreading - perl 与线程共享文件句柄

> ID：12696375
> 
> 赞同：0
> 
> 时间：2012-10-02T18:49:28.653
> 
> 标签：multithreading, perl, filehandle

我在网上找到了下面的代码，似乎程序控制循环的方式是检查共享变量 $TERM 是否为0。我可以在线程之间共享一个文件句柄，每个线程处理文件的一行并在文件到达最后一行时结束循环吗？

```
#!/usr/bin/perl

use strict;
use warnings;

use threads 1.39;
use threads::shared;
use Thread::Queue;

### Global Variables ###

# Maximum working threads
my $MAX_THREADS = 10;

# Flag to inform all threads that application is terminating
my $TERM :shared = 0;

# Threads add their ID to this queue when they are ready for work
# Also, when app terminates a -1 is added to this queue
my $IDLE_QUEUE = Thread::Queue->new();

### Signal Handling ###

# Gracefully terminate application on ^C or command line 'kill'
$SIG{'INT'} = $SIG{'TERM'} =
    sub {
        print(">>> Terminating <<<\n");
        $TERM = 1;
        # Add -1 to head of idle queue to signal termination
        $IDLE_QUEUE->insert(0, -1);
    };

### Main Processing Section ###
MAIN:
{
    ### INITIALIZE ###

    # Thread work queues referenced by thread ID
    my %work_queues;

    # Create the thread pool
    for (1..$MAX_THREADS) {
        # Create a work queue for a thread
        my $work_q = Thread::Queue->new();

        # Create the thread, and give it the work queue
        my $thr = threads->create('worker', $work_q);

        # Remember the thread's work queue
        $work_queues{$thr->tid()} = $work_q;
    }

    ### DO WORK ###

    # Manage the thread pool until signalled to terminate
    while (! $TERM) {
        # Wait for an available thread
        my $tid = $IDLE_QUEUE->dequeue();

        # Check for termination condition
        last if ($tid < 0);

        # Give the thread some work to do
        my $work = 5 + int(rand(10));
        $work_queues{$tid}->enqueue($work);
    }

    ### CLEANING UP ###

    # Signal all threads that there is no more work
    $work_queues{$_}->enqueue(-1) foreach keys(%work_queues);

    # Wait for all the threads to finish
    $_->join() foreach threads->list();
}

print("Done\n");
exit(0);

### Thread Entry Point Subroutines ###

# A worker thread
sub worker
{
    my ($work_q) = @_;

    # This thread's ID
    my $tid = threads->tid();

    # Work loop
    do {
        # Indicate that were are ready to do work
        printf("Idle     -> %2d\n", $tid);
        $IDLE_QUEUE->enqueue($tid);

        # Wait for work from the queue
        my $work = $work_q->dequeue();

        # If no more work, exit
        last if ($work < 0);

        # Do some work while monitoring $TERM
        printf("            %2d <- Working\n", $tid);
        while (($work > 0) && ! $TERM) {
            $work -= sleep($work);
        }

        # Loop back to idle state if not told to terminate
    } while (! $TERM);

    # All done
    printf("Finished -> %2d\n", $tid);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:03:24.747

> 我可以在线程之间共享文件句柄吗

不。

> 每个线程处理文件的一行并在文件到达最后一行时结束循环？

是的。只需将文件中的行而不是数字提供给工作线程。

顺便说一句，您不需要 11 个队列来执行此操作。你只需要一个：

```
#!/usr/bin/perl

use strict;
use warnings;

use threads 1.39;
use threads::shared;
use Thread::Queue qw( );

# Maximum working threads
my $NUM_WORKERS = 10;

# Flag to inform all threads that application is terminating
my $TERM :shared = 0;

my $request_q = Thread::Queue->new();

$SIG{INT} = $SIG{TERM} = \&signal_handler;

exit(main());

sub signal_handler {
    print(">>> Terminating <<<\n");
    $TERM = 1;
} 
```

```
sub main {
    my @threads;
    push @threads, threads->create(\&worker)
        for 1..$NUM_WORKERS;

    while (!$TERM && defined(my $job = <>)) {
        chomp($job);
        $request_q->enqueue($job);
    }

    # Signal to threads that there is no more work.
    $q->enqueue(undef) for 1..$NUM_WORKERS;

    # Wait for all the threads to finish.
    $_->join() for @threads;

    print("Done\n");
    return 0;
} 
```

```
sub worker {
    my $tid = threads->tid();

    while (!$TERM && defined(my $job = $request_q->dequeue())) {
        printf("            %2d <- Working\n", $tid);

        # Do something with $job.
        sleep(1+rand(3));
    }

    printf("Finished -> %2d\n", $tid);
} 
```

# iphone - iframe 可以充当移动浏览器吗？

> ID：12696376
> 
> 赞同：0
> 
> 时间：2012-10-02T18:49:39.750
> 
> 标签：iphone, html, mobile, iframe, browser

我正在做一个学校项目，我需要一个 iframe 来充当移动浏览器。到目前为止，我有一个 iPhone 作为背景图像和一个根据 iPhone 屏幕定位的 iframe，但是当我加载页面时，它会加载页面的桌面版本。

如何加载页面的移动版本。还有可能使用元视口吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:56:03.410

如果您的移动网站有一个专用网址 (m.mysite.com)，只需将您的 iframe 指向该网址即可。当然，我想你会想到这一点。

另一种情况是某种检测和响应式设计，这取决于您的检测方法是什么。如果您正在嗅探用户代理，我无论如何都无法找到仅更改 iframe 的用户代理。

如果您使用其他检查来呈现移动版本，则只需要将其显示在 iframe 中，假设这是可能的。

此外，视口元标记将告诉页面如何呈现，但不能强制它在您的网站版本之间切换。

# .htaccess - htaccess 动态 url 重写和 301 重定向

> ID：12696378
> 
> 赞同：0
> 
> 时间：2012-10-02T18:49:41.937
> 
> 标签：.htaccess, mod-rewrite

我有一个带有动态主页的网站，其中只有一个图像更改，网址如下所示：

[http://mysite.com/?v=imagename.jpg](http://mysite.com/?v=imagename.jpg)

我正在尝试找到将所有这些 url 重定向到的规则：

[http://mysite.com/imagename](http://mysite.com/imagename)

我努力了：

```
RewriteCond %{QUERY_STRING} ^(([^&]*&)*)v=([^&]+)&?(.*)?$
RewriteRule ^index\.php$ http://mysite.com/3?%1%4 [L,R=301] 
```

和：

```
RewriteRule ^index.php?v=([a-zA-Z]+)/([0-9]+)$ http://mysite.com/$1 
```

和无数其他变化，但似乎没有任何工作..我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:58:46.080

要将使用查询字符串访问 URL 的浏览器重定向到没有 URL 的 URL，您需要执行以下操作：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /(index\.php)?\?v=([^&\ ]+?).jpg&?([^\ ]*)
RewriteRule ^ /%2?%3 [L,R=301] 
```

然后在浏览器获得重定向后，它会尝试在没有查询字符串的情况下请求 URL。如果实际上没有任何内容，`/imagename`那么您需要将它们重写*回*查询字符串的 URI：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)$ /?v=$1.jpg [L,QSA,NC] 
```

# c# - C#中的long变量，为什么越界时返回负值

> ID：12696384
> 
> 赞同：1
> 
> 时间：2012-10-02T18:50:00.940
> 
> 标签：c#, long-integer

我做了一个应用程序来解析阶乘，当我为变量输入一个超过 20 位的数字时`long`，它返回一个负数。我想知道为什么`long`C# 中的变量在越界时返回负值？它应该是这样的吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T18:52:59.647

这是非常正常的行为，称为溢出。

第一步，把它变成一个错误

```
checked
{
    // your calculations
} 
```

这[本书](http://books.google.nl/books?id=euV7e2f-RzsC&pg=PA1172&lpg=PA1172&dq=c#%201s%20complement&source=bl&ots=LDxaW9FdNH&sig=bkD_NtQ0eOcLI0u5yQUE3f9FY44&hl=nl&sa=X&ei=LDlrULvRD4HZ0QWUzYDYDQ&ved=0CFUQ6AEwBA#v=onepage&q=c#%201s%20complement&f=false)对所有的位和字节都有详尽的解释。

* * *

这可能有助于弄清楚：

```
static void Main2(string[] args)
{
    short s = 0;
    Console.WriteLine("Dec: {0,6} Hex {0:X4}", s);
    s -= 1;
    Console.WriteLine("Dec: {0,6} Hex {0:X4}", s);

    s = short.MaxValue;
    Console.WriteLine("Dec: {0,6} Hex {0:X4}", s);
    s += 1;
    Console.WriteLine("Dec: {0,6} Hex {0:X4}", s);
    Console.WriteLine(s == short.MinValue);    // is MaxValue+1 == MinValue ?
} 
```

它打印

```
Dec:      0 Hex 0000
Dec:     -1 Hex FFFF
Dec:  32767 Hex 7FFF
Dec: -32768 Hex 8000
True 
```

将十六进制字符读取为位：

```
0 = 0000
1 = 0001
7 = 0111
8 = 1000
F = 1111 
```

您可以看到最高有效位（最左侧）用作`+/-`符号。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T18:59:37.427

每个人都已经提到了为什么它会变成负数，所以我只会告诉你如何改变你的阶乘函数。使用[BigInteger](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx)（假设您使用的是 .NET 4.0）。

```
static BigInteger Factorial(BigInteger bigInt) {
    if (bigInt == 0) {
        return 0;
    }
    else if (bigInt == 1) {
        return 1;
    }
    else {
        return bigInt * Factorial(bigInt - 1);
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T18:54:42.390

根据[文档](http://msdn.microsoft.com/en-us/library/y595sc15%28v=vs.100%29.aspx)：

> 保存有符号的 64 位（8 字节）整数，值范围从 -9,223,372,036,854,775,808 到 9,223,372,036,854,775,807 (9.2...E+18)。

```
20! = 2.432902e+18
21! = 5.1090942e+19 
```

如您所见，21！远远超过 hte max on `long`。

C# 数据类型的一些更好的链接：

[整数类型](http://msdn.microsoft.com/en-us/library/exx3b86w%28v=vs.100%29.aspx) [浮点类型](http://msdn.microsoft.com/en-us/library/9ahet949%28v=vs.100%29.aspx)

如果您计划计算超过 20! 的阶乘，则需要升级到浮点类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T18:52:46.057

是的，21！比[长期限制](http://msdn.microsoft.com/en-us/library/ctetwysk.aspx)要好，但是 20！不是。因此它是溢出的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T18:53:37.717

c# 中的所有数字类型都支持 max 函数，因此[Long.MaxValue](http://msdn.microsoft.com/en-us/library/system.int32.maxvalue.aspx)会告诉您限制。[至于为什么它变成负数，这与设置二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)编码数的高位有关

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-02T18:57:01.903

它被称为[算术溢出](http://en.wikipedia.org/wiki/Arithmetic_overflow)。

一个 4 位示例：

```
 1101
+0101
-----
10010 
```

如您所见，正确答案需要 5 位，但我们如何将其存储为 4 位？！我们不能正确，溢出必须发生。

要回答您的直接问题，您的值会变为负数，因为它是有符号的，因此当它溢出时会环绕到下限。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-02T18:57:41.040

`long`数据类型有一个[MSDN](http://msdn.microsoft.com/en-us/library/ctetwysk%28v=vs.71%29.aspx)参考。基本上你告诉我们的并不是全部。这个长期上限是`9.223372037x10^18`20 的阶乘`2.432902008x10^18`小于 的上限`long`。

我会发布一些代码，以便我们查看实际发生的情况。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-02T18:59:43.723

如果您不想要那种溢出，请考虑使用[`BigInteger`](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx). 要使用它，您的 C# 项目需要包含对 .NET 程序集的引用`System.Numerics.dll`。你的代码文件应该包括

```
using System.Numerics; 
```

前几名。

# jquery - 滑块生成的填充

> ID：12696385
> 
> 赞同：0
> 
> 时间：2012-10-02T18:50:02.683
> 
> 标签：jquery, css

我在[网站](http://www.startupsandfinance.com/cise4/cise_blue)上安装了一个滑块。滑块代码在顶部产生一个填充，对于不同的浏览器是不同的。尽管试图修复错误，但我无法做到。请帮忙。

这是代码，

```
<div class="main-slider-content" style="width:960px; height:340px;">
                <ul class="sliders-wrap-inner">
                    <li>
                            <img src="images/thumbl_980x340.png" title="Newsflash 2" >           
                          <div class="slider-description"><div class="description-wrapper">
                            <div class="slider-meta"><a target="_parent" title="Newsflash 1" href="#Category-1">/ Newsflash 1 /</a> <i> — Monday, February 15, 2010 12:42</i></div>
                            <h4>Content of Newsflash 1</h4>
                            <p>The one thing about a Web site, it always changes! Joomla! makes it easy to add Articles, content,...
                            <a class="readmore" href="#">Read more </a>
                            </p>
                         </div></div>
                    </li> 
                   <li>
                      <img src="images/thumbl_980x340_002.png" title="Newsflash 1" >           
                         <div class="slider-description"><div class="description-wrapper">
                           <div class="slider-meta"><a target="_parent" title="Newsflash 2" href="#Category-2">/ Newsflash 2 /</a>  <i> — Monday, February 15, 2010 12:42</i></div>
                            <h4>Content of Newsflash 2</h4>
                            <p>Joomla! makes it easy to launch a Web site of any kind. Whether you want a brochure site or you are...
                            <a class="readmore" href="#">Read more </a>
                            </p>
                         </div></div>
                  </li> 
                   <li>
                      <img src="images/thumbl_980x340_003.png" title="Newsflash 3" >            
                        <div class="slider-description"><div class="description-wrapper">
                          <div class="slider-meta"><a target="_parent" title="Newsflash 3" href="#Category-3">/ Newsflash 3 /</a>   <i> — Monday, February 15, 2010 12:42</i></div>
                            <h4>Content of Newsflash 3</h4>
                            <p>With a library of thousands of free Extensions, you can add what you need as your site grows. Don't...
                            <a class="readmore" href="#">Read more </a>
                            </p>

                        </div></div>
                  </li> 
                    <li>
                      <img src="images/thumbl_980x340_004.png" title="Newsflash 5" >            
                        <div class="slider-description"><div class="description-wrapper">
                          <div class="slider-meta"><a target="_parent" title="Newsflash 4" href="#Category-4">/ Newsflash 4 /</a>   <i> — Monday, February 15, 2010 12:42</i></div>
                            <h4>Content of Newsflash 4</h4>
                            <p>Joomla! 1.5 - 'Experience the Freedom'!. It has never been easier to create your own dynamic Web...
                            <a class="readmore" href="#">Read more </a>
                            </p>
                        </div></div>
                    </li> 
                    <li>
                      <img src="images/thumbl_980x340_005.png" title="Newsflash 5" >            
                        <div class="slider-description"><div class="description-wrapper">
                           <div class="slider-meta"><a target="_parent" title="Newsflash 5" href="#">/ Newsflash 5 /</a>    <i> — Monday, February 15, 2010 12:42</i></div>
                           <h4>Content of Newsflash 5</h4>
                            <p>Joomla! 1.5 - 'Experience the Freedom'!. It has never been easier to create your own dynamic Web...
                            <a class="readmore" href="#">Read more </a>
                            </p>
                      </div></div>
                    </li> 
                    <li>

                      <img src="images/thumbl_980x340_006.png" title="Newsflash 5" >            
                        <div class="slider-description"><div class="description-wrapper">
                          <div class="slider-meta"><a target="_parent" title="Newsflash 6" href="#">/ Newsflash 6 /</a> <i> — Monday, February 15, 2010 12:42</i></div>
                            <h4>Content of Newsflash 6</h4>
                            <p>Joomla! 1.5 - 'Experience the Freedom'!. It has never been easier to create your own dynamic Web...
                            <a class="readmore" href="#">Read more </a>
                            </p>
                        </div> </div>
                    </li> 

      </ul>     
            </div>
           <!-- END MAIN CONTENT --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:10:09.107

```
.sliders-wrap-inner li img { width: 960px; max-width:960px } 
```

您的图像对于导致一些包装类型问题的容器来说太大了。

# php - 脚本头 index.php 过早结束

> ID：12696389
> 
> 赞同：0
> 
> 时间：2012-10-02T18:50:07.183
> 
> 标签：php, zend-framework, magento

我有一个很难重现的奇怪问题。

当我在谷歌浏览器中浏览到我的网站时，它显示了 500 内部服务器错误。但是，如果我清除浏览器 cookie、历史记录和缓存，那么它会再次正常工作，片刻之后它又开始失败。它在 IE 或 firefox 上永远不会失败

错误日志，我有这个：

脚本头 index.php 过早结束

我的 index.php 有这个：

```
<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/osl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category   Mage
 * @package    Mage
 * @copyright  Copyright (c) 2008 Irubin Consulting Inc. DBA Varien (http://www.varien.com)
 * @license    http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
 */

if (version_compare(phpversion(), '5.2.0','<')===true) {
    echo  '<div style="font:12px/1.35em arial, helvetica, sans-serif;"><div style="margin:0 0 25px 0; border-bottom:1px solid #ccc;"><h3 style="margin:0; font-size:1.7em; font-weight:normal; text-transform:none; text-align:left; color:#2f2f2f;">Whoops, it looks like you have an invalid PHP version.</h3></div><p>Magento supports PHP 5.2.0 or newer. <a href="http://www.magentocommerce.com/install" target="">Find out</a> how to install</a> Magento using PHP-CGI as a work-around.</p></div>';
    exit;
}

$mageFilename = '/home/xx/public_html/app/Mage.php';

if (!file_exists($mageFilename)) {
    if (is_dir('downloader')) {
        header("Location: downloader");
    } else {
        echo $mageFilename." was not found";
    }
    exit;
}

require_once $mageFilename;

#Varien_Profiler::enable();

#Mage::setIsDeveloperMode(true);

#ini_set('display_errors', 1);

umask(0);

Mage::run('xx','website'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:04:05.210

如您所知，php 在服务器端。所以我不认为问题只出在 Chrome 上。我认为问题出在 .htaccess 或文件权限中。

尝试删除 .htaccess （用于测试）或将 CHMOD 644 放在文件上，将 CHMOD 755 放在目录上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:16:22.943

掩码（0）；

```
umask used in PHP for Set the file Permission remove umask(0) and try that! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-30T12:47:45.840

你检查你的文件权限了吗？很多时候我看到过早的结束错误是由于权限不正确造成的。

有时也可能是由于最近 PHP 升级/降级的剩余选项。为此，您可以通过运行 php -v 来检查并搜索引用与您安装的版本不同的任何内容（7.0.4）。

# ruby - 使用 activerecord API 将图像上传到 Postgres 数据库时遇到问题

> ID：12696395
> 
> 赞同：1
> 
> 时间：2012-10-02T18:50:27.197
> 
> 标签：ruby, postgresql, activerecord, twitter-bootstrap, haml

我正在尝试将我的网页转换为新的 Twitter Bootstrap HAML 方法，但是在将图像上传到表单时遇到了麻烦。该表单是 POST 到使用 activerecord 将参数放入数据库的 API。在旧网页上提交应用程序有效，并且通过 API 有效，而不是使用我的新 HAML 表单。下面是图标上传字段的新旧代码，以及图片上传到数据库的API代码。

我不断收到的错误是“无法将符号转换为整数”，我认为问题在于从实际上传的图标中获取 [:filename]。

新代码：

```
 %div{:class=>classes_for_form_input(@data, :icon)}
      %label.control-label{:for => "icon"} *Icon:
        .controls
          %input{:name=>"icon", :type=>"file", :id => "icon", :class => "fileinput", :title => "App Icon", :value=>@data[:icon]}
          %span.help-inline #{help_message_for_form_input @data, :icon } 
```

旧代码：

```
<td class="uploadtabletd1l"><label for="icon">*Icon: </label></td><td class="uploadtabletd1r"><input type="file" class="fileinput" name="icon" id="icon" size="18" title="Icon (128x128 Pixels, Max 100 Characters)" />#{tip1}#{iconhelp}#{tip2}</td> 
```

上传图标的 API 循环：

```
attr = app.attributes()
attr.each do |k,v|

  if @vals.include?(k)
    if k == "icon" then  
      attr[k] = @vals[k][:filename]
    else  
      attr[k] = @vals[k] 
    end  
  end
end 
```

堆栈错误消息给出以下错误，因为我正在使用会话 :success_message 重定向到显示已上传应用程序的页面。

```
 NoMethodError at /appdetails
 undefined method `first' for nil:NilClass
 file: home.rb location: block in <top (required)> line: 94
/gas/dev/routes/home.rb in block in <top (required)>
 @app = result['appinfo'].first
/usr/local/lib/ruby/1.9.1/webrick/httpserver.rb in service
  si.service(req, res)
/usr/local/lib/ruby/1.9.1/webrick/httpserver.rb in run
      server.service(req, res)
/usr/local/lib/ruby/1.9.1/webrick/server.rb in block in start_thread
      block ? block.call(sock) : run(sock) 
```

“无法将符号转换为整数来自以下代码行，我尝试打印 api 调用的结果以在数据库中创建应用程序

```
result = @client.createapp(@vals) # This is calling the API to return the vals that were inputted into the database
puts result.to_s 
```

这是 home.rb 文件：第 94 行是 @app = result['appinfo'].first

```
get '/appdetails/?' do
# include some page specific scripts and styles via the layout
@page_scripts = ["jquery.colorbox-min.js", "gass-apps.js", "jquery.rateit.min.js"]
@page_styles = ["colorbox.css", "rateit.css"]

#TODO Handle case for unknown app id
result = @client.appinfo(:app_id=>params[:id])
puts __FILE__.to_s + '(' + __LINE__.to_s + '):' + result
@app = result['appinfo'].first

#get screenshots into an array that the view can iterate through
screenshot_properties = ["screenshot1", "screenshot2", "screenshot3", "screenshot4"]
@screenshots = []

screenshot_properties.each do |screenshot|
  @screenshots << @app[screenshot] if @app.has_key? screenshot
end

@reviews = @client.getreviews(:app_id=>params[:id], :order=>'reverse')['getreview']

@favorite = false
#TODO - a more direct API call would be better than iterating over all the favorites
userFavorites = @client.getuserfavorites()['getuserfavorites']
userFavorites.to_a.each do |favorite|
  @favorite = true if favorite['app_id'] == params[:id].to_i
end

# Increment the view count for this app
plural = "s"
viewcount = @app['view_count']
if viewcount.to_s == '0'
  plural = ""
end
viewcount += 1
result = @client.updateappviewcount(:app_id=>params[:id], :view_count=>viewcount) 
```

OK：一般来说是愚蠢的错误。我复制粘贴了表单集并忘记包含 enctype="multipart/form-data" 。但是，Sinatra 现在返回 enctype 未定义？我需要这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:37:58.430

问题在于表单标签。忘记包含 "enctype="multipart/form-data" 或 HAML :enctype="multipart/form-data"

# quickbooks - Quickbooks时间跟踪

> ID：12696396
> 
> 赞同：2
> 
> 时间：2012-10-02T18:50:36.083
> 
> 标签：quickbooks, qbfc, qbxml

我负责一个打卡系统，它为我们的员工提供了方便的访问方式来输入他们的工作时间，然后将这些时间发布到快速手册中

到目前为止，这还不是问题，因为我们已经使用 Web 连接器与 Web 服务交互，该 Web 服务使用 qbXML 时间跟踪添加请求对象向系统提供当前待处理的时间表

让我先说这个系统工作得很好，但我们觉得这不是做我们想做的事情的最佳方式。原因如下：

当我们计算小时数时，每个单独的小时块（即 4 小时的假期、8 小时的正常工资、2 小时的加班）是一个单独的时间跟踪添加请求。由于我们公司已经将自己锁定为使用公司文件而不是使用 quickbooks 数据库，这会在公司文件中添加很多单独的条目。过去，我们不得不让 intuit 对我们的公司文件进行归档和优化，以缓解由此产生的问题（例如速度变慢或无法完全运行报告）

现在，我为此找到了一个单一的解决方案，但这只是一个很小的补丁：我们可以每周而不是每天拉几个小时......这意味着每周将有一个条目星期一 40 个固定时间，而不是 5 个条目，每个条目 8 个固定时间与相应的工作日相关联。我不介意这个解决方案，但它似乎不是正确的解决方案......

我正在寻找的是一种在一次调用中批量添加时间敏感数据的方法。这意味着当 Web 连接器启动并 ping 我的 Web 服务时，它应该在单个事务中而不是在多事务系统中返回所有数据（这将在公司文件中创建一个事务而不是数千个事务）

这可能是不可能的，但由于 Quickbooks 文档相当缺乏，我想我会向这里的人群提出一些问题，看看是否有人找到了更好的解决方案：

1.  是否有替代 timetrackingaddrq 的方法，允许您输入多个工资单工资项目条目，每个条目都与特定日期相关联？这相当于将每周的所有时间作为单个请求输入，但不需要将这些时间全部存储在一天中

2.  有没有办法返回 Quickbooks 可以解析的 timetrackingaddrq 对象列表（或问题 1 中提出的替代方法），而不是通过 Web 服务调用单独返回每个请求？

我理解这个问题是否不符合堆栈溢出的规则，但鉴于这是似乎有任何活动的唯一来源，我希望这将是寻找建议的最佳场所。Intuit 论坛在开发人员帮助方面很快就缺乏......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T03:49:43.550

首先，请允许我对[Intuit 论坛](https://idnforums.intuit.com/)不同意您的看法。我定期访问 StackOverflow 和 Intuit 论坛，根据我的经验，在 StackOverflow 上回答 QuickBooks 问题的人通常是 Intuit 论坛的定期贡献者。

现在，关于您的问题：您已经承认您的系统运行良好并按照您的意愿行事。您唯一的问题是 QuickBooks 在存在大量交易时的行为。不幸的是，QuickBooks 在大量使用的情况下偶尔会遭受公司文件损坏的困扰。以下是处理此问题的方法：

1.  确保您使用的是最新版本的 QuickBooks
2.  如果步骤 1 不起作用，请确保您升级到 QuickBooks Enterprise（如果您尚未升级）。
3.  如果第 2 步不起作用，那么您必须制定一项政策，根据需要随时削减公司文件。例如，您可以每 4 个会计年度创建一个新的公司文件。
4.  如果您使用 QuickBooks Enterprise 并在每个财政年度削减您的公司文件，并且您仍然看到文件损坏问题，那么您不应该使用 QuickBooks。注意我见过一些非常大的企业使用 QuickBooks，但我从未见过这种情况。

此评论揭示了您正在处理的核心问题：

> 由于我们公司已经将自己锁定为使用公司文件而不是使用快速书数据库

这不是很清楚，但我认为这意味着：您使用的是不是企业版的 QuickBooks 的旧副本。如果是这种情况，那么我肯定会建议按照上述步骤进行操作。我还建议您联系[QuickBooks ProAdvisor](http://proadvisor.intuit.com/acm/alpha/search-criteria-v2.html)并让他们查看情况。试图用编程来解决这个问题是个坏主意。

这个问题（和这个答案）对于 StackOverflow 来说绝对是题外话，而且它可能确实应该在不久之后关闭。但我祝你好运！请不要对 Intuit 论坛感到陌生，如果您知道去哪里看，那里有很多答案。

# jbpm - 测试完演示后呢？

> ID：12696399
> 
> 赞同：-1
> 
> 时间：2012-10-02T18:50:55.320
> 
> 标签：jbpm

我有点失落

我已经测试了演示过程。现在我想开始我自己的新项目，但是，我应该使用演示安装（全部嵌入）并创建一个新项目。是否推荐？或者我需要从头开始安装所需的（Jboss SA、Drools 等），以便我可以开发和测试。

对不起这个虚拟问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:44:48.740

演示设置就是这样，演示设置，如果需要，您可以使用相同的设置来构建应用程序。但是有不同的方式来创建你的应用程序。您可以使用通常的方式创建应用程序，只需将 jbpm 依赖项包含到您的项目中即可开始开发您的应用程序。希望能帮助到你。

# java - log4j SMTPAppender - 通过电子邮件发送多条错误消息

> ID：12696404
> 
> 赞同：6
> 
> 时间：2012-10-02T18:51:18.903
> 
> 标签：java, tomcat, log4j, smtpappender

我正在使用 log4j 的 SMTPAppender 在每次异常时向我发送电子邮件，但我真的更希望它将电子邮件汇总到一封包含一批错误的电子邮件中，而不是针对每个错误发送一封电子邮件。

我已经看到了 bufferSize 变量，但这似乎适用于所有类型的消息，而不仅仅是错误。

有谁知道我如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:56:50.133

您可以使用:`log4j.appender.myMail.evaluatorClass`来实现`TriggeringEventEvaluator`，这样您就可以以编程方式决定何时/发送什么消息。有关详细信息，请参阅：[http ://www.manning-sandbox.com/thread.jspa?threadID=9913。](http://www.manning-sandbox.com/thread.jspa?threadID=9913)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:08:10.997

尝试在配置中添加/使用评估器，例如：

```
<evaluator type="log4net.Core.LevelEvaluator">
    <threshold value="ERROR"/>
</evaluator> 
```

还将有损属性设置为 true 以及所需的缓冲区大小：

```
<lossy value="true" />
<bufferSize value="xxxx" /> 
```

# ruby-on-rails-3 - Elasticsearch Tire on rails，返回所有年龄范围内的男性，但它也返回女性

> ID：12696409
> 
> 赞同：2
> 
> 时间：2012-10-02T18:51:48.980
> 
> 标签：ruby-on-rails-3, elasticsearch, tire

**使用弹性搜索和轮胎即时尝试搜索一些个人资料记录。**

尝试获得性别 = 男性和年龄从 = 18，年龄到 = 30 的结果。目前使用此设置，它会返回此年龄范围内的每个人，甚至是女性。我怎样才能让它表现得只返回这个年龄段的男性？

```
if params['people']
      tire.search(load: true, page: params[:page], per_page: 50, :default_operator => 'AND', :use_dis_max => true) do
        query do
          boolean do
            should { range :age, {gte: params['people'][:age_from], lte: params['people'][:age_to]} }

            should { string 'gender:male' } if params['people'][:gender] == "male"
            should { string 'gender:female' } if params['people'][:gender] == "female"

          end
        end
        to_curl
      end
   end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:21:05.960

使用必须而不是应该。它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:56:23.603

我不编程是红宝石，但是...

```
:default_operator => 'OR' 
```

尝试将“OR”更改为“AND”

**编辑**好的第2轮，这很有趣......

在我看来这是错误的

```
should { string 'gender:male' } if params['people'][:gender] == "male"
should { string 'gender:female' } if params['people'][:gender] == "female" 
```

仅通过查看它上面的 :age 一个，这不是更好吗...

```
should { string :gender, {eq: params['people'][:gender]} } 
```

但同样，我不会用 ruby​​ 编程......

# networking - 多社交评论插件

> ID：12696418
> 
> 赞同：2
> 
> 时间：2012-10-02T18:52:18.917
> 
> 标签：networking, plugins, login, comments, social

正如标题所说，我需要一个网站插件，让我可以使用不同的社交网络（facebook/twitter/g+）登录和评论。然后我将这些评论保存在数据库中，并将其发布在用户帐户中。我见过一些像[Gigya](http://www.gigya.com/social-plugins/comments/)这样的插件（这是我需要的东西，但它提供了一个嵌入脚本来放入您的网页）。我需要一些可以修改 CSS 等的东西。

有谁知道这样的插件？

# python - Python if 语句无效语法！？为什么？

> ID：12696427
> 
> 赞同：7
> 
> 时间：2012-10-02T18:52:58.807
> 
> 标签：python, if-statement

```
while x < len(Hand):
    while y < len(Hand):
        if Hand[x][0] == Hand[y][0] and y != x:
                sameRank += 1
        y += 1
    x += 1 
```

它在“if”之前突出显示一个空格并说语法错误......没有意义。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T19:11:43.493

我在这里看不到任何错误，但是您可能将 if 语句下方的块缩进太多。请注意，您的程序的其余部分使用 4 个空格进行缩进？尝试将缩进减少到 4 个空格，看看它是否运行。

**但是，您的代码确实存在逻辑错误**。如果您不在每个 x 的开头重新初始化 y，您将不会为每个 x 循环遍历 y。

这是我为修复逻辑错误而运行的示例代码：

```
def example():
    Hand = [[1],[2],[3],[3],[4],[5],[2],[2],[1]]
    x = 0 
    sameRank = 0 

    while x < len(Hand):
        y = 0
        while y < len(Hand):
            if Hand[x][0] == Hand[y][0] and y != x:
                sameRank += 1
            y += 1
        x += 1

if __name__ == "__main__":
    example() 
```

最后，**通过更“pythonic”可以使这段代码更具可读性。** 考虑一下：

```
def example():
    Hand = [[1],[2],[3],[3],[4],[5],[2],[2],[1]]
    sameRank = 0 

    for x in Hand:
        for y in Hand:
            if x[0] == y[0] and y != x:
                sameRank += 1

if __name__ == "__main__":
    example() 
```

此代码迭代`Hand`而不是递增临时整数变量的内容，然后将其与索引运算符一起使用。这样做更好，因为“维护”行（例如`x += 1`）更少，可读性更高，并且对类型更不敏感，因为它可以与包含列表的任何可迭代对象一起使用。

或者甚至（根据海登的评论）这个：

```
def example():
    Hand = [[1],[2],[3],[3],[4],[5],[2],[2],[1]]
    sameRank = sum(1 for x in Hand for y in Hand if x[0] == y[0] and y!=x)

if __name__ == "__main__":
    example() 
```

此代码结合了对[`sum`函数](http://docs.python.org/library/functions.html)的调用和[生成器表达式](http://docs.python.org/reference/expressions.html#generator-expressions) `1 for x in Hand for y in Hand if x[0] == y[0] and y!=x`。该表达式返回一个[生成器](http://wiki.python.org/moin/Generators)，它为列表中与您的条件匹配的每个项目生成 1，并且 sum 函数将所有这些 1 相加，从而为您提供所需的值 for `sameRank`。

看看[这篇文章](http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html)，对 python 成语有一个很好的概述。

最后，我不确定您使用的是什么编辑器，但如果您直接从解释器的 stderr/stdout 获取对话框而不是消息和回溯，这听起来像是掩盖了真正的问题。有时，当您尝试学习时，编辑提供的过多帮助是一件非常糟糕的事情。我个人使用[Vim](http://wiki.python.org/moin/Vim)，但这对初学者来说可能有点多。[我对IDLE](http://docs.python.org/library/idle.html)没有太多经验（它甚至可能是您正在使用的东西），但我听说过将它用作学习工具的好消息。但是，如果您进行认真的开发，您将很快超越它。无论哪种方式，如果您确实使用 IDLE，请习惯于从命令行而不是从 IDLE 本身运行程序。我个人发现这在很多情况下给了我更好的反馈。最后是[PyDev IDE](http://pydev.org/)（建立在 Eclipse 之上），它对其强大的内置可视化调试特别有用。这可能是一个不错的选择，但它确实是一个重量级的选择，如果您还不熟悉 Eclipse，我会将其置于学习难度的“中级”级别。如果您熟悉 Eclipse，那么您对 ​​PyDev 会很熟悉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T13:15:46.907

您可能在`if`- 我以前在使用 TextMate 时遇到过类似空格的字符，其中 alt+space 会插入一个不间断空格 Unicode 字符而不是常规空格。

`# coding: utf-8`你的文件开头有类似的东西吗？如果是这样，请将其删除，您可能会收到更好的错误消息。

顺便说一句，不使用`sum`/generation 表达式（这可能比学习 Python 更容易混淆），你的循环可以像这样简化：

```
for x in range(len(Hand)):
    for y in range(len(Hand)):
        if Hand[x][0] == Hand[y][0] and y != x:
                sameRank += 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T13:32:38.817

有时，制表符和空格的混合会使 python 出错——比如说，如果你的 while 循环用制表符缩进，而你的 if 语句使用空格代替。尽管 if 语句现在可以正确缩进，但它仍然有助于检查代码段中的所有其他行以确保它们都以相同的方式缩进。

您的编辑可能会提供一些帮助：

*   点击选项卡按钮时插入多个空格而不是制表符
*   显示空白字符，因此您可以轻松查看它是四个空格还是制表符
*   搜索并替换制表符（`\t`如果您的编辑器支持通过正则表达式搜索）并将它们交换为四个空格，反之亦然。

如果您的编辑器不支持这些东西，我建议尝试使用[Programmer's Notepad](http://www.pnotepad.org/)或[Notepad2](http://www.flos-freeware.ch/notepad2.html)，如果只是为了帮助诊断这些类型的问题。

如果这听起来不合理，欢迎编程！对于我们最好的人来说，这可能会令人沮丧。选择您喜欢的版本（空格或制表符），并坚持下去。上面提到，还有很多方法可以让 Python 中的代码变得更清晰，但是习惯于间距问题也是一个好主意。

# scala - Odersky 的 Coursera 讲座：为什么类型检查器不能推断值类型 Int？

> ID：12696430
> 
> 赞同：3
> 
> 时间：2012-10-02T18:53:04.310
> 
> 标签：scala, type-inference

我的问题是关于 Odersky 的第 3.5 课（不是作业！）：

19:15 的练习问：“什么是类型：`if (true) 1 else false`”

在他的解释中，Odersky 认为类型是`AnyVal`因为它是`Int`和`Boolean`（两个条件分支的类型）最具体的超类型。

我问自己为什么类型检查器不够聪明，无法看到只有第一个分支实际上是相关的，因此可以推断出类型`Int`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T18:59:44.243

这与为什么以下内容无法在 Java 中编译类似的问题：

```
throw new Foo();
return 42;  //unreachable statement 
```

但这会编译：

```
if(true)
  throw new Foo();
return 42; 
```

基本上编译器必须在某处停止。尤其是 Scala 编译器，它已经很慢了。一旦它识别`true`出总是通过条件，人们可能会问：what about: `1 == 1`，`2 * 21 == 42`甚至`x == 7`where `x`is `val`。

很难画一条线，所以编译器只是假设每个都`if`可以有两个分支。IDE 或代码验证工具有责任发现这些不可能或可能不正确的表达式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T19:01:42.333

我认为您不希望`Int`- 推断类型不应依赖于优化，而应依赖于开发人员编写的文本。否则，很难预测你会得到什么——当然，不是在这种情况下，但它显然比大多数人更明显。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T19:04:45.020

因为类型检查器不对程序的执行做出任何假设。它不会尝试预测 if 语句的哪个分支将执行。在一般情况下，这是无法确定的，而且这种特定情况在实践中不会经常发生，以至于使任何此类预测都值得。

做这样的预测也会使打字规则的逻辑复杂化。如果 if 语句的类型是 Int 并且其中一个分支的类型不是 Int 的子类型，那肯定会与人们的期望相矛盾——即使该分支永远不会被执行。在某种程度上，就像类型检查器不会抱怨它知道不会执行的分支中的类型错误一样——没有人想要那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T19:47:33.513

这让我开始思考，因为您可以将`true`定义的位置向上移动。在某些时候，编译器需要遵循很多路径才能得出最佳猜测。

这总是正确的

```
if (true) 1 else false 
```

这也是，但在更高的水平

```
val presetBoolean = true
if (presetBoolean) 1 else false 
```

这也是如此，但是通过一个评估的表达式

```
val presetBoolean = (1 == 1)
if (presetBoolean) 1 else false 
```

这也是常量，但在这种情况下，它将引用传递给另一个对象（并且是我程序中的唯一实例

```
case object CallWithPreset {
  def apply(presetBoolean:Boolean) {
    if(presetBoolean) 1 else false
  }
}

CallWithPreset(true) 
```

每次推理都有编译时间形式的开销。因此，虽然我认为在微不足道的情况下可能很容易，但在其他情况下可能不会。但是，如果您允许某些情况而不是所有情况，则可能会导致每种情况都有不同的推断，并且可能会造成混淆。

例如，如果这有效：

```
val myType:Int = if(true) 1 else false 
```

但这给出了编译错误：

```
val presetBoolean = true
val myType:Int = if (presetBoolean) 1 else false 
```

# java - JNA - 尝试使用 void* 参数访问 C 函数时，VM 崩溃

> ID：12696438
> 
> 赞同：0
> 
> 时间：2012-10-02T18:53:28.533
> 
> 标签：java, c, jna

我有以下代码：

```
public class TTM {

public interface WrapperDLL extends Library {
    WrapperDLL INSTANCE = (WrapperDLL) Native.loadLibrary("TransportRE", WrapperDLL.class);

    int TRE_send(int channel, Pointer data, int len);

}
public int Send (int channel, String data, int len) {
    WrapperDLL wdll = WrapperDLL.INSTANCE;

    Memory mem = new Memory(data.length()+1);
    mem.setString(0, data);
    int byteSent = wdll.TRE_send(channel_id, mem.getPointer(0), len);
    // at this (TRE_send) point the VM crashes !!!!

  return byteSent;
} 
```

}

看看我试过的 JNA api：

```
public int Send (int channel, String data, int len) {
    WrapperDLL wdll = WrapperDLL.INSTANCE;

    Memory mem = new Memory(data.length()+1);
    mem.setString(0, data);
    int byteSent = wdll.TRE_send(channel_id, mem, len);

  return byteSent;
} 
```

这次不会崩溃但不能正常工作（byteSent = 0！）

一些提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:45:46.950

您正在取消引用您的`String`，就好像它包含指针而不是字符数据一样。

`Pointer.getPointer(0)`尝试从给定的指针地址中提取指针值；您肯定希望像在第二个代码段中那样直接传递指针值。

JNA 允许您直接传递一个`String`值，自动将其转换为 C 字符串（以 NUL 结尾的字节数组）。但是，您的本机方法是否需要字符串尚不清楚；它可能需要一个特殊格式的字节缓冲区。

如果`len`打算作为您发送的缓冲区的长度，那么它应该是字符串的长度加一（或`Memory`您传递的大小）。

**编辑**

您暗示 DLL 始终转换为`char *`，在这种情况下，您应该简单地按`String`原样传递。如果您的 DLL 有时需要非 ASCII 数据，那么您应该传递`Memory`并使用它的成员函数来写入所需的数据。请注意，您可以使用不同的签名定义多个版本的 DLL，例如

```
 void send(String);
  void send(Pointer);
  void send(MyStructure); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:26:23.223

我修好了！

```
int byteSent = wdll.TRE_send(channel_id, data.toCharArray(), len); 
```

因为第二个参数是 void* 但在 dll 代码中，第一件事是将它转换为 char * 我使用了相同的类型，现在它可以工作了。

当然这不是一个“通用解决方案”，因为“TRE_send”需要一个 void* 类型......你怎么看？

再见

# java - 使用 Graphics2d 进行 Java 旋转和绘图

> ID：12696441
> 
> 赞同：1
> 
> 时间：2012-10-02T18:53:39.617
> 
> 标签：java, rotation, graphics2d

```
 AffineTransform at;
    Graphics2D g2 = (Graphics2D)g;

    g2.setColor(Color.black);

    at = new AffineTransform();
    at.setToTranslation(x, y);
    at.setToRotation(theta);
    g2.setTransform(at);
    g2.drawPolygon(points); 
```

我的代码在 x 和 y 处绘制了一个三角形……当我按下 a 和 d 时，三角形旋转……但是当我按下 w 和 s 时，三角形不会改变它的 x 和 y。

变量是正确的..这是翻译例程..我不确定我错在哪里..

如果我这样做：

```
 AffineTransform at;
    Graphics2D g2 = (Graphics2D)g;

    g2.setColor(Color.black);

    at = new AffineTransform();
    at.setToTranslation(x, y);
    g2.setTransform(at);
    g2.drawPolygon(points);

    at.setToRotation(theta);
    g2.setTransform(at);
    g2.drawPolygon(points); 
```

一个旋转一个移动.. 那么为什么我不能在绘图之前应用这两种翻译呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:18:36.013

来自 Oracle 文档：

> 要添加坐标变换，请使用变换、旋转、缩放或剪切方法。setTransform 方法仅用于在渲染后恢复原始 Graphics2D 变换。

只能有一个转换，您可以在其中连接新的转换，例如旋转方法：

> Concatenates the current Graphics2D Transform with a translated rotation transform. Subsequent rendering is transformed by a transform which is constructed by translating to the specified location, rotating by the specified radians, and translating back by the same amount as the original translation.

There is also a warning:

> WARNING: This method should never be used to apply a new coordinate transform on top of an existing transform because the Graphics2D might already have a transform that is needed for other purposes, such as rendering Swing components or applying a scaling transformation to adjust for the resolution of a printer.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:58:55.120

I think you need to concatenate both transformations into a single AffineTransformation.

i.e.

```
AffineTransform at, toConcatenate;
Graphics2D g2 = (Graphics2D)g;

g2.setColor(Color.black);

at = new AffineTransform();
toConcatenate = new AffineTransform();

at.setToTranslation(x,y);
toConcatenate.setToRotation(theta);
at.concatenate(toConcatenate);
g2.setTransform(at)
g2.drawPolygon(points); 
```

I based much of this on a tutorial found on Oracles site at [http://docs.oracle.com/javase/tutorial/2d/advanced/transforming.html](http://docs.oracle.com/javase/tutorial/2d/advanced/transforming.html)

I think the reason your code doesn't work is that 'The setTransform method overwrites the Graphics2D object's current transform' You're overwriting the first transform with the second rather than concatenating the two.

Hope this helps

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T23:12:49.543

```
 AffineTransform at;
    Graphics2D g2 = (Graphics2D)g;

    g2.setColor(Color.black);

    at = new AffineTransform();

    at.translate(x, y);     
    at.rotate(theta);
    g2.setTransform(at);
    g2.drawPolygon(points); 
```

I was using the wrong things.. rotate and translate are the functions i needed.

# php - 如何开发仅动态的 HTML

> ID：12696454
> 
> 赞同：2
> 
> 时间：2012-10-02T18:54:35.903
> 
> 标签：php, javascript, html

**背景：** 我目前的工作环境涉及到许多不断更新的导航链接，但系统管理员不允许使用 PHP（或任何动态服务器）。这令人沮丧。

**问题：** 有没有办法使用 JS 为 HTML 实现类类结构，以便在我的 HTML 中使用临时 PHP 方法“包含”？

**示例：** 例如，我非常感谢在 PHP 中如何将我网站顶部的导航链接模块化到一个名为 navbar.php 的文件中，然后将其包含到我所有单独的页面中。对 navbar.php 进行更改后，所有其他页面都将反映更改。不幸的是，我的工作流程迫使我以卑微的方式更新所有网页。可以用JS吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T18:59:28.040

使用在页面加载时动态创建导航栏的js文件并将其放置在所有页面中，您还可以检查它正在使用哪个页面`documnet.location`并突出显示等等。此文件中的一项更改，所有页面都更改

但是，如果 JavaScript 被禁用，这将违反优雅降级！！！您的网站没有任何主导航菜单。您将不得不找到解决方法。创建一个基本的纯 html 导航栏，其中包含您的一致链接。包括一个 js 文件，用更好的栏替换它，如上所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T19:04:05.473

[使用jQuery HTML 函数](http://api.jquery.com/html/)和[jQuery Load 函数](http://api.jquery.com/load/)可以轻松地将 HTML 代码插入 DIV 。基本上，你给它一个 div 和 HTML 代码或一个 url，它会自动用给定 URL 的 HTML 页面填充 div。

据我所见，您应该能够仅使用 jQuery 来实现您可能需要的任何动态行为。仍然存在一些限制，例如持久性，并且您的客户必须激活 JS 才能使其工作（但让我们面对现实吧，99% 的客户会这样做）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T18:57:06.933

为什么是。[http://en.wikipedia.org/wiki/Server_Side_Includes](http://en.wikipedia.org/wiki/Server_Side_Includes) 服务器端包含可以帮助您解决这个问题。它可能是你能得到的最接近的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T19:03:17.967

在纯 HTML 中创建导航菜单。然后，为页面内容创建一个 main `div`，将其留空。最后，使用 AJAX 检索每个页面的内容（作为单独的纯 HTML 文件）并`div`用它替换 main 的内容。

您可以使用 jQuery 框架的 AJAX 功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T19:08:57.470

您也可以使用 html 对象标记来包含 html，请参见[http://www.w3schools.com/tags/tag_object.asp](http://www.w3schools.com/tags/tag_object.asp)

# ravendb - RavenDB 跟踪更改绕过验证

> ID：12696458
> 
> 赞同：13
> 
> 时间：2012-10-02T18:54:45.217
> 
> 标签：ravendb

我正在尝试构建一个使用 RavenDB 的应用程序框架。我已经设置了一个业务逻辑服务，它与会话具有一对一的关系，并有效地成为工作抽象单元。

业务逻辑服务的一部分将包含所有验证。服务中的方法可能类似于

```
 public void StoreUser(User user)
    {
        //Some validation logic
        if(string.IsNullOrWhiteSpace(user.Name))
            throw new Exception("User name can not be empty");

        Session.Store(user);
    } 
```

问题是，因为用户一被存储就被跟踪，我可以绕过对 store 方法的任何验证，但存储一个正确的值，然后再更改它

```
 public void TestUserStore()
    {
        var u1 = new User() {Name = "John"};
        var u2 = new User() { Name = "Amy" };

        Service.StoreUser(u1);
        u1.Name = null; //change is tracked and will persist on the next save changes
        Service.StoreUser(u2);
        Service.SaveChanges();

        //The following fails, as we have stored null as the name rather than "John" bypassing our validation
        Assert.IsTrue(Service.AdhocQuery<User>().Any(u => u.Name == "John"));

    } 
```

有没有办法让 RavenDB 只存储已存储项目的快照而不跟踪进一步的更改？我应该克隆进出业务逻辑服务的所有内容以防止非法更新吗？还是我在错误的地方进行验证有没有更好的地方来放置这个逻辑？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-03T06:40:08.397

在每次保存之前将您的验证逻辑放在 a`IDocumentStoreListener`中，您可以自动进行此类检查。

[我在这里](http://ayende.com/blog/159042/handling-entities-validations-in-ravendb)写了更多关于这个问题的博客。

# jquery - 移动 Safari preventDefault() 不起作用？安卓运行良好

> ID：12696459
> 
> 赞同：4
> 
> 时间：2012-10-02T18:54:46.010
> 
> 标签：jquery, mobile, drop-down-menu, safari

我想要完成的工作在 Chrome 上完美运行——Android 4.1 但在 iOS 上却失败了。

```
$(document).on('mouseenter touchend','[id*=mmlink]', function (e) {
    var $btn = $(this);
    var href = $btn.attr('href');
    var count = ($btn.data('click_count') || 0) + 1;

    $btn.data('click_count', count);
    if (count == 1) {  
        $btn.click(function(v) { 
            v.preventDefault();
        });
     } else {
        document.location.href = href;
     }
 }); 
```

我使用 milonic 菜单生成子菜单。我需要使用`.on()`来选择子菜单。

测试页面：[http ://www.wolfbariatrics.com/mmtest/index.htm](http://www.wolfbariatrics.com/mmtest/index.htm)

我在想还有另一个事件只发生在 iOS 中。Safari 的远程调试器允许我设置断点，但只要我踏入或越过它就会跟随锚标记。

我已经完全从锚标签和href中删除了所有事件，但仍然没有任何效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T19:23:32.843

您可能想在 StackOverflow 上查看有关 event.preventDefault 的主题并返回 false：

[event.preventDefault() 与返回 false](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)

基本上：“jQuery 的 preventDefault 不会阻止其他处理程序的执行。这就是 stopImmediatePropagation 的用途。”

和

“从 jQuery 事件处理程序中返回 false 实际上与在传递的 jQuery.Event 对象上调用 e.preventDefault 和 e.stopPropagation 相同。

e.preventDefault() 将阻止默认事件的发生， e.stopPropagation() 将阻止事件冒泡， return false 将同时进行。请注意，此行为与普通（非 jQuery）事件处理程序不同，其中，值得注意的是，return false 不会阻止事件冒泡。"

# r - 取决于其他数据框列的条件总和

> ID：12696462
> 
> 赞同：3
> 
> 时间：2012-10-02T18:54:59.907
> 
> 标签：r

假设您有一个由以下命令生成的数据框：

```
date <- seq(as.Date("2012-09-01"), Sys.Date(), 1)
id <- rep(c("a","b","c","d"), 8)
bdate <- seq(as.Date("2012-08-01"), as.Date("2012-11-01"), 1)[sample(1:32, 32)]

# The end date should be random but greater than the begin date. However, I set it to 15 days later for simplicity.
edate <- bdate + 15

value <- seq(1, 1000, 1)[sample(1:1000, 32)]
dfa <- data.frame(id, value, bdate, edate)
names(dfa) <- c("ID", "Value", "Begin.Date", "End.Date") 
```

目标是按以下方式按 ID（即“a”、“b”或“c”）对所有观察值求和：

```
Date        a   b   c
2012-08-01  XXX YYY ZZZ
2012-08-02  XXX YYY ZZZ
2012-08-03  XXX YYY ZZZ 
```

对于每个 ID，值 XXX、YYY 和 ZZZ 表示所有观察值的总和，其中“日期”列上的日期介于原始数据框上的 dfa$Begin.Date 和 dfa$End.Date 之间。

我目前的解决方案对于大型数据集几乎没有用，所以我想知道是否有更快的方法来做到这一点。

我当前的脚本：

```
# Create additional data frame
dfb <- data.frame(seq(as.Date("2012-08-01"), as.Date("2012-11-01"), 1))
names(dfb)[1] <- "Date"

# Variable for unique IDs
nid <- unique(dfa$ID)

# Number of total IDs
tid <- length(nid)

for (i in c(1:tid))
{
sums <- vapply(dfb$Date, function(x)
{
temp <- subset(dfa, dfa$ID == nid[i])
temp <- subset(temp, temp$Begin.Date < x & temp$End.Date > x)
res <- sum(temp$Value)
res
}, FUN.VALUE = 0.1
)
dfb[1+i] <- sums
}

# Change column names to ID
names(dfb) <- c("Date", as.character(nid)) 
```

编辑：我在下面发布了一个更有效的答案。但是，我接受了马修的回答，因为它让我走上了正确的道路。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T19:51:45.633

感谢@Matthew Dowle，我发现了如何使用 data.table 包更有效地做到这一点。

```
# Fire up the bad boy
library(data.table)

# Create the data table with original data
value <- seq(1, 1000, 1)[sample(1:1000, 32)]
dt <- data.table(id, value, bdate, edate)
setnames(dt, names(dt), c("id", "value", "begin", "end"))

# For each pair of id and value, create a row for each day. (i.e., the first line:
# a  928  2012-08-11  2012-08-26
# will now be 15 lines. The first two columns are repeated over 15 different dates.
dt <- dt[, seq(begin[1], (last(end) - 1), by="days"), by = list(id, value)]
setnames(dt, names(dt), c(names(dt)[1:2], "date"))
setkey(dt)

# Sum each pair of id and value over the dates column
dt <- dt[, sum(value), by = list(id, date)]
setnames(dt, names(dt), c(names(dt)[1:2], "value"))
setkey(dt, date, id)

# Define the time span you would like on your final table
timespan <- dt[, seq(as.Date("2012-07-25"), max(date), by = "day")]

# Now just cross reference the time span with your actual data
setkey(dt, id, date)
dt <- dt[CJ(unique(id), timespan), ]
setnames(dt, names(dt), c(names(dt)[1:2], "value"))
setkey(dt, date) 
```

达达！！

现在，按照我最初想要的顺序重新排列表格：

```
Date        a   b   c
2012-08-01  XXX YYY ZZZ
2012-08-02  XXX YYY ZZZ
2012-08-03  XXX YYY ZZZ 
```

只需使用 reshape2 包中的 dcast 即可。

那么大家怎么看呢？太棒了，对吧？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T13:36:05.653

有趣的。它似乎与这个问题非常相似：

[将不规则的时间序列拆分为定期的月平均值](https://stackoverflow.com/questions/12557762/splitting-irregular-time-series-into-regular-monthly-averages-r)

这有帮助吗？在那里，正如您的问题一样，一个技巧可以是加入流行的`begin`using `roll=TRUE`in package `data.table`。特别是因为您说您拥有大型数据集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T19:21:10.757

我会做以下事情。首先通过检查所需日期是否介于`Begin.Date`和之间来对原始数据集进行子集化`End.Date`。然后只需使用一个简单的`table`函数来获取`'a'`through的频率`'d'`。

```
mydate <- as.Date("2012-08-25")  # take Aug 25, 2012 as an example
ind <- (dfa$Begin.Date <= mydate) & (dfa$End.Date >= mydate)
temp <- subset(dfa, ind)
out <- table(temp$ID) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-02T19:29:50.893

我不知道这是否更快（尚未对其进行基准测试），并且对于特别大的数据，它可能会创建太大的中间数据集，但无论如何我都会介绍它。

也可以设置考虑的日期范围（基于对此答案的评论的请求）。

```
library("plyr")
library("reshape2")

earliest.date <- as.Date("2007-01-01")
latest.date <- as.Date("2012-11-01")

dfa.long <- adply(dfa, 1, function(DF) {
  if(DF$End.Date >= earliest.date & DF$Begin.Date <= latest.date) {
    data.frame(Date=seq(max(DF$Begin.Date, earliest.date), 
                        min(DF$End.Date, latest.date), 
                        1))
  }
})

dfb <- ddply(dfa.long, .(Date, ID), summarise, sum=sum(Value))
dfb <- dcast(dfb, Date~ID, value.var="sum", fill=0) 
```

`dfa.long`是一个数据集，每一行在开始/结束范围内的每个日期都重复（也限制在最早/最晚日期范围内）。然后可以直接按日期聚合`ID`并使用`dcast`from`reshape2`将其转换为您想要的宽格式。

# matlab - 如何读取变量 X 中的块数据 Chan 1、变量 Y 中的 Chan 2、变量 Z 中的带有分隔符 '\n' 的 Chan 3，然后绘制每个

> ID：12696464
> 
> 赞同：-1
> 
> 时间：2012-10-02T18:55:27.513
> 
> 标签：matlab, file, text-files

```
Chan 1:
 -7.33475E-0001  1.03285E+0000  1.67651E+0000  5.98755E-0002 -8.23288E-0001  4.93973E-0001  1.36217E+0000  1.34720E-0001 -8.08319E-0001  4.64035E-0001
  1.70645E+0000  5.98755E-0001 -8.53226E-0001  1.49689E-0002  1.60167E+0000  1.09273E+0000 -2.54471E-0001  4.19128E-0001  2.12558E+0000  1.73639E+0000
 -4.49066E-0002 -1.04782E-0001  1.45198E+0000  1.49689E+0000 -1.64658E-0001 -4.19128E-0001  1.16757E+0000  1.51186E+0000 -1.19751E-0001 -7.78381E-0001
  7.33475E-0001  1.69148E+0000  3.44284E-0001 -7.33475E-0001  4.93973E-0001  1.57173E+0000  3.44284E-0001 -1.04782E+0000 -7.48444E-0002  1.51186E+0000
  9.28070E-0001 -5.08942E-0001  4.49066E-0002  1.49689E+0000  1.03285E+0000 -5.38879E-0001 -2.09564E-0001  1.60167E+0000  1.63161E+0000 -1.64658E-0001\n
Chan 2:
 -5.53848E-0001  1.00291E+0000  1.37714E+0000 -2.69440E-0001 -8.38257E-0001  8.83163E-0001  1.85614E+0000  4.49066E-0001 -6.28693E-0001  6.43661E-0001
  1.94595E+0000  8.83163E-0001 -4.64035E-0001  4.93973E-0001  1.90105E+0000  1.13763E+0000 -4.19128E-0001  7.48444E-0002  1.69148E+0000  1.30229E+0000
 -3.74222E-0001 -3.44284E-0001  1.22745E+0000  1.30229E+0000 -3.89191E-0001 -6.88568E-0001  1.07776E+0000  1.66154E+0000  1.34720E-0001 -6.28693E-0001
  6.13724E-0001  1.25739E+0000 -4.49066E-0002 -8.08319E-0001  6.88568E-0001  1.93098E+0000  7.33475E-0001 -7.48444E-0001  8.98132E-0002  1.55676E+0000
  8.38257E-0001 -6.73599E-0001  1.49689E-0001  1.90105E+0000  1.46695E+0000 -3.44284E-0001 -2.39502E-0001  1.34720E+0000  1.28732E+0000 -2.84409E-0001
 -4.04160E-0001  1.15260E+0000  1.42204E+0000 -2.39502E-0001 -8.38257E-0001  7.48444E-0001  1.69148E+0000  3.14346E-0001 -6.58630E-0001  6.13724E-0001
  1.70645E+0000  5.23911E-0001 -7.18506E-0001  4.49066E-0001  1.97589E+0000  
1.13763E+0000 -3.14346E-0001  3.44284E-0001  1.85614E+0000  1.21248E+0000\n
Chan 3:
 -6.28693E-0001 -4.34097E-0001  1.25739E+0000  1.25739E+0000 -4.19128E-0001 -6.88568E-0001  8.38257E-0001  1.15260E+0000 -4.19128E-0001 -9.58008E-0001
  6.28693E-0001  1.55676E+0000  2.84409E-0001 -5.83786E-0001  7.48444E-0001  1.82620E+0000  6.28693E-0001 -5.53848E-0001  5.38879E-0001  1.91602E+0000
  1.00291E+0000 -5.38879E-0001  0.00000E+0000  1.45198E+0000  8.23288E-0001 -8.53226E-0001 -5.98755E-0001  1.06279E+0000  1.06279E+0000 -4.79004E-0001\n 
```

这些是 sismic 数据，我想读取这些数据并保存在不同的变量 X、Y、Z 中。Chanel 1=x Chanel 2=y Chanel 3=z 然后我想绘制它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:09:28.670

我会通过一次读取一行文件来执行此操作，检查该行是否是块标记，如果不使用 textscan 来解析该行中的双精度数。

```
fid = fopen('c:\temp\temp.txt');
vars = {'X','Y','Z'};
varIndex = 0;
current = [];
while 1
    tline = fgetl(fid);
    if ~ischar(tline), break, end

    newVar = ~isempty(strfind(tline,'Chan'));

    if newVar
        if varIndex > 0
            eval([ vars{varIndex} '=current;']);
            current = [];
        end
        varIndex = varIndex + 1;
    else
        newData = textscan(tline,'%f');
        current = [current newData{:}'];
    end    
    disp(tline)
end

eval([ vars{varIndex} '=current;']);
current = [];

fclose(fid) 
```

# jquery - 'not' 的 jquery contains() 语法？

> ID：12696465
> 
> 赞同：2
> 
> 时间：2012-10-02T18:55:31.550
> 
> 标签：jquery, contains

如果 li 说“Thing”，我想附加，但如果它说“Things”则不附加。这可能`:contains`吗？

```
$("ul li:nth-child(2):contains('Thing')").append("foo"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T18:56:42.173

有一个[not 功能](http://api.jquery.com/not/)：

```
$("ul li:nth-child(2):contains('Thing')").not(':contains("Things")').append("foo"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T18:57:50.770

如果要选择恰好具有`Thing`文本内容的元素，可以使用`filter`方法：

```
$("ul li:nth-child(2)").filter(function(){
       return $(this).text().trim() === 'Thing'
}).append("foo"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T15:16:40.517

还有一个[:not() 选择器](http://api.jquery.com/not-selector/)可以帮助压缩代码。

所以它会像

```
$("ul li:nth-child(2):contains('Thing'):not(:contains('Things'))").append("foo"); 
```

[小提琴](http://jsfiddle.net/rbLzZ/)中的一个小例子。

# nsview - NSMenu 动画阻塞主线程

> ID：12696466
> 
> 赞同：8
> 
> 时间：2012-10-02T18:55:35.747
> 
> 标签：nsview, nonblocking, nsthread, nsmenu

我有：

*   具有自定义视图的 NSStatusItem（在辅助线程中滚动文本），辅助线程更新内部状态并使用 setNeedsDisplay 通知主线程。
*   在 mouseDown 上，会弹出一个 NSMenu。
*   但是，如果选择了 NSMenu 中的任何 NSMenuItem，或者如果检测到第二个 mouseDown 并且 NSMenu 消失，则滚动文本动画会断断续续。

似乎 NSMenu 默认视图在执行动画时会阻塞主线程。我已经通过让辅助线程输出 time_since_last_loop 与视图（这是主线程）的 drawRect: 来测试这一点，并且只有 drawRect 显示口吃。自定义视图的 drawRect 从 ~30 fps 下降到 5 几帧。

有什么方法可以让 NSMenu 动画非阻塞，或者与自定义视图的 drawRect 并发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-06T20:23:38.787

我使用 NSTimer 和 NSEventTrackingRunLoopMode 来解决类似的问题。

在您的主线程中，创建一个计时器：

```
 updateTimer = [[NSTimer scheduledTimerWithTimeInterval:kSecondsPerFrame target:self selector:@selector(update:) userInfo:nil repeats:YES] retain];

   // kpk important: this allows UI to draw while dragging the mouse.
   // Adding NSModalPanelRunLoopMode is too risky.
    [[NSRunLoop mainRunLoop] addTimer:updateTimer forMode:NSEventTrackingRunLoopMode]; 
```

然后在你的更新：例程中，检查 NSEventTrackingRunLoopMode：

```
 // only allow status updates and drawing (NO show data changes) if App is in
   // a Modal loop, such as NSEventTrackingRunLoopMode
   NSString *runLoopMode = [[NSRunLoop currentRunLoop] currentMode];
   if ( runLoopMode == NSEventTrackingRunLoopMode )
   {
       ... do periodic update tasks that are safe to do while
       ... in this mode
       ... I *think* NSMenu is just a window
       for ( NSWindow *win in [NSApp windows] )
       {
          [win displayIfNeeded];
       }

       return;
   }

   // do all other updates
   ... 
```

# delphi - 如何让树视图重新考虑是否需要水平滚动条？

> ID：12696469
> 
> 赞同：15
> 
> 时间：2012-10-02T18:56:02.970
> 
> 标签：delphi

考虑以下非常简单的单元：

**单元1.pas**

```
unit Unit1;

interface

uses
  Windows, Classes, Controls, Forms, ComCtrls;

type
  TForm1 = class(TForm)
    TreeView1: TTreeView;
    procedure FormCreate(Sender: TObject);
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

const
  SLongString = 'blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah';

procedure TForm1.FormCreate(Sender: TObject);
var
  Node: TTreeNode;
begin
  TreeView1.Width := 200;
  Node := TreeView1.Items.Add(nil, SLongString);
  Node.Text := 'blah';
end;

end. 
```

**单元1.dfm**

```
object Form1: TForm1
  ClientHeight = 137
  ClientWidth = 216
  OnCreate = FormCreate
  PixelsPerInch = 96
  TextHeight = 13
  object TreeView1: TTreeView
    Left = 8
    Top = 8
    Width = 198
    Height = 121
  end
end 
```

将此添加到 VCL Forms 应用程序并运行。结果如下所示：

![在此处输入图像描述](../Images/ae69377c6adb49cf8ebfea71bb58bb19.png)

我希望不显示水平滚动条。我怎样才能做到这一点？

现在我意识到我可以删除分配很长字符串的代码行。但就我的问题而言，这是一个缩减程序。在[实际应用程序中，节点的文本正在发生变化](https://stackoverflow.com/questions/12693995/how-do-i-measure-the-width-available-for-text-in-a-tree-view-item)，我希望滚动条显示它们是否需要，而不显示它们是否不需要。

我知道这种[`TVS_NOHSCROLL`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760013.aspx)风格，但我不能使用它。有时树视图包含比可用空间更宽的文本。有时不是。

我也想用`TTreeView`又不想用虚拟树视图。并不是说我反对虚拟树视图，只是我的应用程序当前正在使用`TTreeView`.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-02T19:24:02.523

很简单，使用`TreeView1.Items.BeginUpdate/EndUpdate`方法和滚动条会相应计算。

像这样：

```
...
 TreeView1.Items.BeginUpdate;
 // change your nodes here
 TreeView1.Items.EndUpdate 
```

# msmq - msmq 死信队列只有 1000 条消息

> ID：12696470
> 
> 赞同：1
> 
> 时间：2012-10-02T18:56:10.857
> 
> 标签：msmq

我正在为我构建的 MSMQ 应用程序做一些可扩展性测试。当发送大约 200k 条消息并尝试在服务器上接收时，我看到一些消息即将过期（使用 TimeToBeReceived = 30 秒）。我在消息上使用了 UseDeadLetterQueue，因此可以将这些消息移动到死信队列。一切都按预期工作。但是，即使我看到接收端有 1000 条消息即将到期，我也只能在死信队列中看到 1000 条消息。

有人见过这种行为，如果是这样，我该如何解决？

更新：我保留了 2 个柜台。一种是在将消息输入系统（发送者）时，另一种是在使用来自系统的消息时。如果我提供 200k 消息，在接收端..我只看到大约 190k 被消耗。因此丢失了 10k 条消息（很可能是因为 TimeToBeReceived 已过期）。我希望这 10k 条消息会出现在 DeadLetterQueue 中。但我在那里只找到1k。所以，我想知道 DeadLetterQueue 可以容纳多少个限制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T22:11:48.510

在注册表中设置的非事务性 DLQ 上有一个空间配额 (HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\MSMQ\Parameters\MachineCache\MachineDeadletterQuota)，默认为 250MB。
消息有多大？1,000 条 250kb 的消息将超过默认配额。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:22:56.103

如果 TimeToBeReceived 过期，您的意思是说您的消息应该移动到死信队列吗？

# cordova - 如何使用第一次执行中创建的BD

> ID：12696471
> 
> 赞同：0
> 
> 时间：2012-10-02T18:56:18.013
> 
> 标签：cordova, sqlite

首先，对不起我糟糕的英语。

我遵循了关于存储 API 的官方文档。每次应用程序启动时，我都会创建一个数据库。

[http://docs.phonegap.com/en/2.1.0/cordova_storage_storage.md.html#Storage](http://docs.phonegap.com/en/2.1.0/cordova_storage_storage.md.html#Storage)

我需要在应用程序的第一次执行中创建数据库，但我需要在以后的执行中使用第一次执行中创建的数据库而不再次创建它，这怎么可能？

OpenDatabase 方法 (...) 返回一个新的 BD。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:54:01.590

嗯，不，openDatabase运行一次后不会创建新的数据库。如果您看到不同，请发布更多详细信息。

# excel - excel中具有多列的唯一值

> ID：12696473
> 
> 赞同：3
> 
> 时间：2012-10-02T18:56:24.970
> 
> 标签：excel, excel-formula

我正在尝试在excel中计算一个工作表到另一个工作表的唯一值，并且遇到了一些麻烦。它当前的工作方式是计算事件的所有实例（同一日期的事件的多个条目），当它们应该计为**一个**时。

工作表 #1 看起来有点像这样：

```
DateCalled   Time      Type        LoggedBy       ID        EventDate       EventTime
10/2/2012   10:00AM   Expected       Tom         mjones     10/3/2012     11:00 - 14:00
10/2/2012   10:00AM   Expected       Tom         mjones     10/3/2012     14:00 - 17:00
  .          .         .            .            .            .               .
  .          .         .            .            .            .               . 
```

工作表 #2 看起来有点像这样：

```
 IDname        ID       TotalCount  Type1-Count   Type2-Count   Type3-Count
Mike Jones     mjones        9            1            7             1 
```

我需要工作表#2 上的公式来计算唯一的条目数（例如，每个 ID 每天超过一个条目）并将它们添加到每个类型计数中。目前，每个 Type-Count 列中的公式是这样的：

```
=COUNTIFS(Worksheet1!$E:$E,$B14,Worksheet1!$C:$C,"Type2") 
```

其中 E 列是 Worksheet1 上的 ID，B14 是 Worksheet2 上的个人 ID，C 列是 Worksheet1 上的类型。

我在 SUM 中尝试了一些嵌套的 IF/COUNTIF 语句，但我无法真正想出可行的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:21:07.307

这个“数组公式”应该为您提供每个名称/类型 2 组合的不同日期的数量

`=COUNT(1/FREQUENCY(IF(Worksheet1!$C$2:$C$100="Type2",IF(Worksheet1!$E$2:$E$100=$B14,Worksheet1!$A$2:$A$100)),Worksheet1!$A$2:$A$100))`

确认`CTRL+SHIFT+ENTER`

注意：如果可以使公式更快，最好限制范围

# sql - 多少个外键才算太多？

> ID：12696475
> 
> 赞同：22
> 
> 时间：2012-10-02T18:56:29.133
> 
> 标签：sql, database, database-design, foreign-keys

看完这篇文章后： http: [//diovo.com/2008/08/are-foreign-keys-really-necessary-in-a-database-design/](http://diovo.com/2008/08/are-foreign-keys-really-necessary-in-a-database-design/)

在设计数据库时使用外键似乎是个好主意。但是你什么时候用的太多了？

例如，假设我有一个主表，用于存储其他程序通过以下列引用的机械零件信息列表：

1.  ID
2.  姓名
3.  颜色
4.  价格
5.  计量单位
6.  类别
7.  ETC...

我是否应该制作包含所有可能颜色、单位和类别列表的表格，然后将它们设置为机器零件信息表中相应列的外键？在什么时候使用外键的好处会超过我制作所有这些额外的表和关系的事实？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-02T19:11:10.810

您希望能够确定地声明数据库中仅存在已知的有效值的任何属性都应使用外键进行保护。否则，您只能希望在应用程序代码和将来创建的任何接口中捕获无效值。

拥有更多的表和关系并不是一件坏事。唯一的问题——通常不是一个问题——与维护用于执行这些关系的索引的开销有关。在您遇到性能问题之前，您应该为“应该”拥有的每一列创建外键关系（因为需要根据列表验证值）。

在我愿意为性能牺牲正确性之前，性能考虑必须非常可怕。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T19:06:01.090

每个设计都是竞争目标的妥协，因此很少有简单的答案（除了错误的答案）。

我当然会在他们自己的关键表中放入离散的度量，例如名称、颜色、类别、度量单位等。可变度量（成本、单位数量等）没有那么多，除非您有标准尺寸包装中的单位（即只有 1、6、12 等。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T21:01:11.903

设计数据库最简单的方法是从需求开始。在一种经典方法中，需求被总结在 ER（实体关系）模型中。在这个模型中，实体之间的关系不是发明的，而是被发现的。如果它们位于数据库应该涵盖的信息范围内，那么它们就是模型的一部分。时期。

从那里开始，当您转向数据库设计时，您已经知道您需要什么关系。您需要对表的结构做出一些决定，但几乎所有引用主键的外键都是需求的直接结果。

当然，如果您可以在设计过程中随意更改需求，那么您可以做任何您想做的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T19:26:45.650

维度建模很好地涵盖了您问题的所有要点。有太多的外键关系会降低查询性能。Kimball 的 Group Reader 很好地介绍了维度设计以及如何将客户需求转换为模式。

[http://en.wikipedia.org/wiki/Dimensional_modeling](http://en.wikipedia.org/wiki/Dimensional_modeling)

要问的主要问题是“数据需要受到多大的约束？” 关于机器零件的颜色，我认为，不将 ciena 和 camomille 作为颜色选择符合每个人的最佳利益。所以，最好有一个查找表。

# css - 如何将侧边栏扩展到整个页面长度？

> ID：12696476
> 
> 赞同：13
> 
> 时间：2012-10-02T18:56:29.593
> 
> 标签：css, extend, sidebar

我已经查看了其他解决方案，但是它们对我不起作用。我已经在侧边栏上尝试了 height: 100% ，但这仍然没有奏效。有人可以指出我正确的方向吗？我希望侧边栏的颜色可以延伸整个页面的长度。

HTML： http: [//lrroberts0122.github.com/DWS/lab3/index.html](http://lrroberts0122.github.com/DWS/lab3/index.html)

CSS： http: [//lrroberts0122.github.com/DWS/lab3/css/main.css](http://lrroberts0122.github.com/DWS/lab3/css/main.css)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-02T19:47:41.630

好的，我将在这里尝试解释更多：

1.  设置***高度时：100%；***在 CSS 中，你必须问自己*——“100% 是什么？” -* ...这取决于你如何设置元素的位置。当您设置***位置时：绝对；***那么它将是*用户浏览器视图的 100%，*否则它将是***元素父高度的 100%。***因此，如果您没有在某处设置适当的高度或绝对位置，您只会得到 100% 的无（回滚到默认的内容调整高度）。

2.  因此，让我们考虑一下将**父 div 的位置设置为绝对位置**并将其设置为**100% 高度**（这样，如果将其高度设置为 100%，您相对定位的子侧边栏将获得相同的高度）。[这里有一个 FIDDLE](http://jsfiddle.net/MLsN5/3/) - 现在让我们看看我们有什么：我们有一个与用户浏览器视图一样高的父 div（黄色），但它的高度是固定的，不会改变以适应内容，然后我们有一个侧边栏（红色）匹配其父级的高度（因此它的高度不适合内容），最后我们有一个很长的内容文本（透明 bg），它明显与父级 div 的高度重叠，并且落在了不知名的地方。不好...

3.  我们能做什么？（[似乎**将父级的溢出设置为滚动**不是一个好主意](http://jsfiddle.net/MLsN5/5/)）...我们需要以正确的方式观察问题：您基本上有两个兄弟 div，并且您希望它们很好地适应它们的内容高度，但同时当您希望其中一个保持其兄弟姐妹的相同高度时-> 没有简单的 peasy css 解决方案（据我所知）。

4.  最后，我的建议是使用一点 jquery：[这里是快速设置](http://docs.jquery.com/Tutorials:Getting_Started_with_jQuery)，[这里是完整站点](http://api.jquery.com/)。现在只写：

    ```
    var height = $('.content').height()
    $('.sidebar').height(height)​ 
    ```

    [它会工作得很好](http://jsfiddle.net/MLsN5/2/)。请注意，我保留了父级的绝对位置并将其设置为 100% 高度，但没有为侧边栏设置任何高度，该高度现在与内容面板的实际大小完全匹配。

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T06:02:45.947

@Onheiron，您的帖子非常有帮助。谢谢！

我在我的代码中添加了一行，因为我注意到短内容页面并没有一直延伸到页面底部，并且导致侧边栏也保持短。现在脚本检查哪个（.content 或 body）具有更大的高度，然后将相同的高度应用于`.sidebar`.

**HTML**：

```
<body>
    <div class="sidebar"></div>
    <div class="content"></div>
</body> 
```

**JavaScript**：

```
$(document).ready(function () {
    var height1 = $('.content').height()
    var height2 = $('body').height()

    if (height1 > height2) {
        $('.sidebar').height(height1)
    } else {
        $('.sidebar').height(height2)
    }
}); 
```

**CSS**：

```
body, .sidebar {
    height:100%
} 
```

然后丢失 if 语句的 else 部分，因为它将默认为 css。`.content`如果区域的高度小于主体，则不需要脚本。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-02T19:05:49.910

`height:100%`应该可以正常工作，但您必须确保包含 div 也为 100%。

```
#main-content {
    background: url("../images/diagonal-noise.png");
}
#content {
    background-color: #FEFEFE;
    width: 920px;
    margin-left: auto;
    margin-right: auto;
    border-left: 25px solid #79879E;
    border-right: 25px solid #79879E;
    padding: 20px;
    height:100%;
}
#secondary-content {
    background-color: #CED6E2;
    width: 200px;
    float: left;
    border-right: 1px dotted #79879E;
    padding: 10px;
    margin: 10px 20px 10px -20px;
    height:100%;
} 
```

# mysql - 查询数据库以查找第 N 条记录

> ID：12696477
> 
> 赞同：0
> 
> 时间：2012-10-02T18:56:38.140
> 
> 标签：mysql

我不知道如何为这个问题写标题，但我需要的是一个查询，它返回`N`具有特定值的记录是什么。

我拥有的表超过 520 万条记录

记录类似于：

*   会话（字符串，主索引）
*   customer_id（int，索引）
*   点击次数（整数，索引）
*   order_number（整数，索引）
*   date_entry（日期时间，索引）
*   许多其他领域

我需要知道的是同一客户在下订单之前登录网站的次数（不同的会话）（order_number 为 0，除非在该会话期间下订单）

样本数据可以是（简化数据）

```
会议 | c_id | 点击 | ord_num | 条目 |
美国广播公司 | 123 | 2 | 0 | 2012-08-01 00:00:00 |
cde | 第456章 2 | 0 | 2012-08-01 00:00:01 |
电子烟| 第457章 2 | 0 | 2012-08-01 00:00:02 |
嗨| 123 | 5 | 0 | 2012-08-01 00:00:03 |
柯德 | 986 | 10 | 0 | 2012-08-01 00:00:04 |
wdg | 123 | 2 | 9876 | 2012-08-01 00:00:05 |
qwe | 123 | 2 | 0 | 2012-08-01 00:00:06 |
wvr | 986 | 12 | 8656 | 2012-08-01 00:00:07 |

```

我想要的是一个显示类似于以下内容的查询：

*   条目 - 日期条目
*   tot_sess - 会话总数
*   tot_cust - 客户总数
*   1sess - customer1 只有一个会话
*   2sess - 有 2 个会话的客户
*   3sess - 有 3 个会话的客户
*   4sess - 有 4 个会话的客户
*   more4sess - 超过 4 个会话的客户
*   order1sess - 第一次订购的客户
*   order2sess - 在第二个会话中订购的客户
*   order3sess - 在第三个会话上订购的客户
*   order4sess - 在第四届会议上订购的客户
*   orderMore4Sess - 在第四次会议之后订购的客户

```
条目 |tot_sess|tot_cust| 1sess | 2sess | 3sess | 4sess | 更多4sess | order1sess | order2sess | order3sess | order4sess | orderMore4Sess |
2012-08-01 | 8 | 4 | 2 | 1 | 0 | 1 | 0 | 0 | 1 | 1 | 0 | 0 |

```

我已经能够通过以下查询获取有关会话的信息：

```
SELECT
   t.`date_entry`,
   COUNT(sess) `cust`,
   SUM(sess) `session`,
   COUNT(IF(sess>1,sess,NULL)) `more than once`,
   COUNT(IF(sess=1,sess,NULL)) `one`,
   COUNT(IF(sess=2,sess,NULL)) `two`,
   COUNT(IF(sess=3,sess,NULL)) `three`,
   COUNT(IF(sess=4,sess,NULL)) `four`,
   COUNT(IF(sess>4,sess,NULL)) `more`,
   ROUND(COUNT(IF(sess>1,sess,NULL))/COUNT(sess),2) `perc > 1`,
   ROUND(COUNT(IF(sess>2,sess,NULL))/COUNT(sess),2) `perc > 2`,
   ROUND(COUNT(IF(sess>3,sess,NULL))/COUNT(sess),2) `perc > 3`,
   ROUND(COUNT(IF(sess>4,sess,NULL))/COUNT(sess),2) `perc > 4`
FROM
(
SELECT
   `customer_id`,
   COUNT(`session`) `sess`,
   DATE(`date_entry`) `date_entry`
FROM `customer_activity_log`
WHERE
   `clicks` > 1
   AND `customer_id` > 0
   AND `date_entry` > '2012-08-01'
   AND subsite_id <=1
GROUP BY `date_entry`, `customer_id`
) t
GROUP BY date_entry 
```

一旦我有了这个，我还需要以不同的方式查看数据，例如，如果客户 123 在 2012 年 1 月 1 日第一次出现，然后在 2012 年 8 月回来 15 次并下订单01 然后又回来了 5 次，并在 2012-10-12 再次下`date_entry`订单

我希望这是有道理的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:42:55.620

```
SELECT e               AS entry,
       SUM(sessions)   AS tot_sess,
       COUNT(*)        AS tot_cust,
       SUM(sessions=1) AS 1sess,
       SUM(sessions=2) AS 2sess,
       SUM(sessions=3) AS 3sess,
       SUM(sessions=4) AS 4sess,
       SUM(sessions>4) AS more4sess,
       SUM(orders  =1) AS order1sess,
       SUM(orders  =2) AS order2sess,
       SUM(orders  =3) AS order3sess,
       SUM(orders  =4) AS order4sess,
       SUM(orders  >4) AS orderMore4Sess
FROM (
  SELECT b.e, b.c_id, b.sessions, COUNT(a.entry) AS orders
  FROM   customer_activity_log a RIGHT JOIN (
    SELECT   DATE(entry) AS e, c_id, COUNT(*) AS sessions,
             MIN(IF(ord_num=0,NULL,entry)) AS o
    FROM     customer_activity_log
    GROUP BY e, c_id
  ) b ON a.c_id = b.c_id AND DATE(a.entry) = b.e AND a.entry <= b.o
  GROUP BY b.e, b.c_id
) t 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/a295f/1/0)上查看。

# ruby-on-rails - 如何断言 Cucumber 中不存在模型？

> ID：12696478
> 
> 赞同：1
> 
> 时间：2012-10-02T18:56:38.830
> 
> 标签：ruby-on-rails, ruby, testing, rspec, cucumber

如何断言在使用 Cucumber 时未创建用户？在 RSpec 中，我将使用以下块，我无法将其转换为 Cucumber：

```
...
describe "with invalid information" do
  it "should not create a new user" do
    expect { click_button submit }.not_to change(User, :count)
  end
end

# Cucumber equivalent
When /^he submits invalid information$/ do
  click_button "Sign up"
end
Then /^an account should not be created$/ do
  # not sure how to translate the expect block
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:38:21.927

你也可以做

```
Given I have 3 users
When I submit with invalid information
Then I should have 3 users 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T19:13:53.073

在此示例中，您将知道用户将使用的电子邮件，因此您可以：

```
Then /^an account should not be created$/ do
  User.where(email: "youremail@example.com").first.should be_nil
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-30T07:28:47.033

您可以使用 lambda 直接翻译您的 RSpec 测试，而不是依赖解决方法。

```
Then /^an account should not be created$/ do
  save = lambda { click_button :submit }
  expect(save).not_to change(User, :count)
end 
```

# r - cast() 数据集并返回两个值

> ID：12696482
> 
> 赞同：1
> 
> 时间：2012-10-02T18:56:50.513
> 
> 标签：r

阿罗哈，

我正在尝试 cast() 一个数据集，其中 WXY 的每个唯一组合都返回 Z 的最大数量和相关的周。例如：

```
W       X       Y       week    Z  
w1      x1      y1      1       0  
w1      x1      y1      2      0.1  
w1      x1      y1      3      0.2  
w2      x2      y1      1      0.5   
w2      x2      y1      2      0.7  
w2      x2      y1      3      0.3  
w3      x1      y1      1      0.1  
w3      x1      y1      2      0.2  
w3      x1      y1      3      0.5  
w4      x2      y2      1      0.7  
w4      x2      y2      2      0.3  
w4      x2      y2      3      0.1  
w5      x1      y2      1      0.3  
w5      x1      y2      2      0.1  
w5      x1      y2      3      0.2 
```

我可以使用 cast() 来执行此操作吗？我只能返回每个唯一 WXY 组合的最大 Z 数，但不能返回以下星期：

```
cast(foo, W + X + Y ~ ., max, value="Z") 
```

对于上述数据集，我希望输出如下所示：

```
W       X       Y       week    Z
w1      x1      y1      3      0.2
w2      x2      y1      2      0.7 
w3      x1      y1      3      0.5 
w4      x2      y2      1      0.7 
w5      x1      y2      1      0.3 
```

Mahalo 为您提供建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T19:04:57.623

`cast`这不是正确的工具。请考虑包中的函数`plyr`：

```
library("plyr")
ddply(foo, .(W, X, Y), summarise, week=week[which.max(Z)], Z=max(Z)) 
```

# installation - 是否可以在 Installshield 2012 PRQ 中使用逻辑 OR 或否定条件？

> ID：12696489
> 
> 赞同：3
> 
> 时间：2012-10-02T18:57:08.610
> 
> 标签：installation, windows-installer, installshield, installshield-2012

我有一个安装**MS SQL Shared Management Objects**的 PRQ 。如果此注册表项不存在，我有一个安装 PRQ 的条件

```
HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\{08ECC740-2B3E-45D7-860C-59B511386286} 
```

这在用户使用不同的产品代码安装 SMO 之前工作正常 - 我们的开发团队在安装 SQL2008 时总是会发生这种情况。PRQ 启动的安装程序存在错误。

我需要一个更好的条件。我想做的是： If (Version <= wxyz || No Version found) Then install PRQ

在**InstallShield Prerequisite 编辑器**中，它说

> 必须满足以下条件才能运行先决条件。您可以在此处定义先决条件将查找以确定是否应运行的文件和注册表项。如果没有条件，则先决条件将始终运行。

这与我的发现一致 - 条件是 ANDed 在一起的。XML 中是否存在一些未发布的 OR 或否定条件？我现在很烦恼，因为如果注册表中的版本 < 我正在安装的版本，我希望运行 prq。

```
<conditions>
    <condition Type="32" Comparison="2" 
       Path="HKLM\SOFTWARE\Microsoft\Microsoft SQL Server\SharedManagementObjects\CurrentVersion" 
       FileName="Version" ReturnValue="10.1.2531.0">
    </condition>
</conditions> 
```

Type="32" 是 '注册表项具有指定的版本值' 比较="2" 是 '目标系统上的数据小于指定数据'

附带问题：是否有枚举类型和比较的地方？

此比较类型没有与“目标系统上的数据小于指定数据**或不存在**”状态进行比较。就像现在一样，如果密钥存在于较低版本中，则一切正常 - 但如果密钥不存在（即未安装 SMO），则不会安装 PRQ。

有没有办法使这项工作？“存在具有特定版本的文件”条件确实具有如果文件的版本低于上面指定的版本（或在目标系统上未找到文件）选项。但它无法检查 SMO 安装的文件 - 用户可能已将其安装到 C: 以外的某个驱动器上。

我希望我错过了什么。你会怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:42:43.840

我通常做的不是使用抽象的东西，比如 ARP 条目来检测依赖关系。我选择依赖本身。如果您需要 DLL，请查看 DLL 是否存在，而不必担心检测到应该安装 DLL 的东西。

# ruby - 如何使用 Regexp.union 指定正则表达式选项

> ID：12696496
> 
> 赞同：7
> 
> 时间：2012-10-02T18:57:41.460
> 
> 标签：ruby, regex, syntax

在“[如何从文本中删除 URL？](https://stackoverflow.com/questions/1243120/how-do-i-removing-urls-from-text) ”中建议使用以下代码：

```
require 'uri'
#...
schemes_regex = /^(?:#{ URI.scheme_list.keys.join('|') })/i
#... 
```

我试图将其改进为：

```
schemes_regex = Regexp.union(URI.scheme_list.keys) 
```

但我不知道应该如何指定`IGNORECASE`选项 ( `i`)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T19:11:33.800

我不相信可以`Regexp.union`像这样传递选项参数。您当然可以在联合操作之后指定它们：

```
require 'uri'

Regexp.new(Regexp.union(URI.scheme_list.keys).source, Regexp::IGNORECASE)
# => /FTP|HTTP|HTTPS|LDAP|LDAPS|MAILTO/i 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T19:13:57.143

```
schemes_regex = Regexp.union(
  *URI.scheme_list.keys
  .map{|s| Regexp.new(s, Regexp::IGNORECASE)}
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T19:24:39.630

与sawa的响应相同，但它正在寻找位于字符串开头的方案：

```
Regexp.union(*URI.scheme_list.keys.map {|s| /\A#{s}/i }) 
```

## 在此处查看[现场演示](http://cibox.org/slivu/stackoverflow?lang=ruby&file=how-to-specify-regexp-options-using-regexp-union.rb&run=true)

# .net - 在 ASP.NET MVC 中获取原始请求

> ID：12696506
> 
> 赞同：24
> 
> 时间：2012-10-02T18:58:09.543
> 
> 标签：.net, asp.net-mvc

我需要获取原始请求字符串。下面是发送到 Controller 的 http 请求示例。实际上，我需要发布数据（最后一行）。我怎么能得到那个？

请注意，我不想使用自动 JSON 模型绑定器。实际上，我需要原始 JSON 文本

```
POST http://www.anUrl.com/CustomExport/Unscheduled HTTP/1.1
Accept: application/json, text/javascript, */*; q=0.01
Content-Type: application/json; charset=utf-8
X-Requested-With: XMLHttpRequest
Referer: http://www.anUrl.com/CustomExport
Accept-Language: en-us
Accept-Encoding: gzip, deflate
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
Host: localhost:8000
Content-Length: 102
Connection: Keep-Alive
Pragma: no-cache

{"runId":"1","fileDate":"8/20/2012","orderStartMinDate":"10/02/2012","orderStartMaxDate":"10/02/2012"} 
```

最后一行是我需要的。这个进不去

```
var input = new StreamReader(Request.InputStream).ReadToEnd(); 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-02T19:06:35.677

那时，流已经被读到最后。您需要将 InputStream 的位置设置回开头，然后才能自己阅读。

```
Request.InputStream.Position = 0;
var input = new StreamReader(Request.InputStream).ReadToEnd(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-25T17:22:29.303

@louis-ricci answear 是正确的，但请记住，如果您`[FromBody]`在 Action Method 中使用，调用时会出现异常`Request.InputStream`，因为`[FromBody]`已经读取了请求正文以便通过调用序列化到模型`HttpRequest.GetBufferlessInputStream()`，并且此方法可以' t 被调用两次。要解决这个问题，只需**不要** `[FromBody]`在您的请求中使用并将原始请求字符串手动序列化到您的模型。

**编辑：**为了更好地了解该主题的上下文和搜索结果，抛出的错误包含以下消息：

```
This method or property is not supported after HttpRequest.GetBufferlessInputStream has been invoked 
```

# selenium - Selenium 目标具有随机数

> ID：12696507
> 
> 赞同：1
> 
> 时间：2012-10-02T18:58:16.147
> 
> 标签：selenium, selenium-ide, selenium-webdriver

我一直在尝试测试一个 Web 应用程序，它生成中间有随机值的 html id。例如：attribute_new_12493044135_name 该属性定义了我要查找的对象类，“名称”是该字符串的唯一部分。问题是我没有 Xpath 2.0，因此不能在脚本上使用 end-with。任何人都可以帮忙吗？我尝试使用 Selenium Webdriver 和 IDE，但找不到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T20:47:24.863

您确实是正确的，如果您无权访问 Xpath 2.0 库，则不能使用 end-with 函数。但是您确实可以访问所有 Xpath 1.0 功能。[http://www.edankert.com/xpathfunctions.html](http://www.edankert.com/xpathfunctions.html)

您有两个函数可用于 xpath 到您的元素。

包含（）：`//*[contains(@id, 'name')]`

substring()：`//*[substring(@id, string-length(@id)-3)="name"]` 字符串长度中的 3 是定位器的字符数减 1。即“名称”有 4 个字符，因此 4 - 1 = 3

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-28T21:36:27.250

也可以使用 css 定位器的组合而不是 XPath：

```
[id*=attribute_new_][id*=_name] 
```

或者：

```
[id^=attribute_new_][id$=_name] 
```

以下是这些标志的含义：

> “ **^** ” - 前缀/以
> 
> “ **$** ” - 后缀/以
> 
> “*” - 子字符串/包含

# php - 路由/重写/删除 index.php：仅适用于 default_controller，但不适用于其余视图

> ID：12696509
> 
> 赞同：0
> 
> 时间：2012-10-02T18:58:17.697
> 
> 标签：php, .htaccess, codeigniter

按照教程从**Code Igniter**`index.php`中的 URL 中删除。

 **它现在适用于 my `default_controller`，但不适用于其他页面（或视图）。

我有一个控制器**Pages**，它有一种方法**View(****$page = '主页'*****)**，根据传递的参数加载具有其他内容的页面。***

 ***如果我输入`localhost/dev`URL - 我登陆我的主页，这是正确的。

如果我输入`localhost/dev/aboutus`- 我会收到**404**。仅当我键入时它才有效`localhost/dev/pages/view/aboutus`。

我想要发生的是通过键入`localhost/dev/aboutus`它会显示**AboutUs**视图。

**路由.php**

```
$route['default_controller'] = "pages/view";
$route['dev/(:any)'] = "dev/pages/view/$1";
$route['404_override'] = ''; 
```

**Pages.php** *（控制器）*

```
<?php
    class Pages extends CI_Controller
    {
        public function view($page = 'home')
        {
            if (!file_exists('application/views/pages/' . $page . '.php'))
            {
                // Whoops, we don't have a page for that!
                show_404();
            }

            $data['title'] = ucfirst($page); // Capitalize the first letter

            $this->load->view('templates/header', $data);
            $this->load->view('pages/' . $page);
            $this->load->view('templates/footer');
        }
    }
?> 
```

**.htaccess 文件** *（位于 /dev/ 文件夹中）*

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /dev/

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:50:50.483

这条路线`$route['dev/(:any)'] = "dev/pages/view/$1";`有点可疑，因为 CodeIgniter 路线不应包含项目名称（`dev`在您的情况下）。它们从控制器级别开始，而不是项目级别。

您编写的路由意味着如果用户键入`http://localhost/dev/dev/something`（是的，两个开发人员），他们将被路由到控制器`dev.php`并进入带有原型的函数：`function('view', 'something'){}`

为什么这么复杂？您应该将所有主页名称都放入控制器中。只有在特殊情况下才能触及路线。

创建一个包含内容`aboutus.php`的文件`application/controllers`：

```
<?php
class Aboutus extends CI_Controller{
    function __construct(){
        parent::__construct();
    }

    function index(){
        "I'm in the about controller!";
        //$this->load->view("some_view") ;
    }
} 
```

您可以使用它访问它`http://localhost/dev/aboutus`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:00:19.970

如果您没有 $config['index.php'] = ''; 在您的 config.php 中将其留空*****

# php - 如何使用 PHP SDK 将文件上传到名称中带有点的 S3 存储桶？

> ID：12696511
> 
> 赞同：2
> 
> 时间：2012-10-02T18:58:26.003
> 
> 标签：php, amazon-s3

我正在尝试使用如下代码将文件上传到我的存储桶：

```
$s3 = new AmazonS3();
$bucket = 'host.domain.ext'; // My bucket name matches my host's CNAME

// Open a file resource
$file_resource = fopen('picture.jpg', 'r');

// Upload the file
$response = $s3->create_object($bucket, 'picture.jpg', array(
    'fileUpload' => $file_resource,
    'acl' => AmazonS3::ACL_PUBLIC,
    'headers' => array(
        'Cache-Control'    => 'public, max-age=86400',
    ),
)); 
```

但是我收到“NoSuchBucket”错误，奇怪的是，当我查询我的 S3 帐户以检索存储桶列表时，我得到的名称与我用于上传**host.domain.ext**的名称完全相同。

我尝试创建一个名称中没有点的不同存储桶，它运行良好......是的，我的问题是我的存储桶名称，但我需要保持 FQDN 约定以便将其映射为 Internet 上的静态文件服务器。有谁知道在将存储桶名称发送到 API 之前是否可以对其进行任何转义以防止点崩溃？我已经尝试过正则表达式并得到了相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:27:52.557

我会尝试使用相关[AWS 论坛](https://forums.aws.amazon.com/thread.jspa?threadID=69108)主题中的评论中建议的路径样式 url...

```
$s3 = new AmazonS3();
$s3->path_style = true; 
```

# ruby-on-rails - 请求新成员操作时，bcrypt 分段错误错误导致 webrick 崩溃

> ID：12696518
> 
> 赞同：0
> 
> 时间：2012-10-02T18:58:50.157
> 
> 标签：ruby-on-rails, segmentation-fault, bcrypt

我正在尝试使用 bcrypt 从头开始​​创建身份验证，当我单击注册链接时出现 webrick 崩溃。（非常长的）错误消息以：

```
Started GET "/assets/members.js?body=1" for 127.0.0.1 at 2012-10-02 14:44:21 -0400
Served asset /members.js - 200 OK (0ms)
/Users/username/.rvm/gems/ruby-1.9.3-p194/gems/bcrypt-ruby-3.0.1/lib/bcrypt_ext.bundle: [BUG] Segmentation fault
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin11.3.0] 
```

bcrypt gem 有什么问题吗？我应该重新安装 ruby​​ 和/或 rails 吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:48:11.197

重新安装我的环境后，这个问题就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T00:09:32.697

对我来说类似的事情是通过简单地清除当前 RVM 中的宝石`$ rvm gemset empty`然后执行`bundle install`.

# jquery - Jquery自定义宽度可拖动

> ID：12696519
> 
> 赞同：0
> 
> 时间：2012-10-02T18:58:54.430
> 
> 标签：jquery

我目前正在开发这样的网站：http: [//www.windowshop.com/](http://www.windowshop.com/)

它的引擎将是 magento，但主要问题是 UI 部分。我知道windowshop是基于flash的。问题是我想大致使用带有 html5 元素的 html4 来构建它。

我找不到可以处理目录溢出导航的 jquery。我们在顶部导航下有 11 个类别。我不能使用 100% 的宽度来容纳所有导航项目，就像从 windowsshop.com 一样，导航溢出可以左右滚动。

请帮助我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T00:08:19.340

我最近开始使用[Waypoints](http://imakewebthings.com/jquery-waypoints/) Jquery 插件复制 Windowsshop 的 UX/UI。

# python - Cython 和 fortran - 如何在没有 f2py 的情况下一起编译

> ID：12696520
> 
> 赞同：11
> 
> 时间：2012-10-02T18:59:00.407
> 
> 标签：python, c, fortran, cython, distutils

**最后更新**

这个问题是关于如何编写一个`setup.py`可以编译直接访问 FORTRAN 代码的 cython 模块，就像 C 一样。这是一个相当漫长而艰巨的解决方案，但完整的混乱包含在下面的上下文中。

**原始问题**

我有一个扩展，它是一个 Cython 文件，它设置一些堆内存并将其传递给 fortran 代码，还有一个 fortran 文件，它是一个古老的模块，如果可以的话，我想避免重新实现。

该`.pyx`文件可以很好地编译为 C，但 cython 编译器会`.f90`因以下错误而阻塞该文件：

```
$ python setup.py build_ext --inplace
running build_ext
cythoning delaunay/__init__.pyx to delaunay/__init__.c
building 'delaunay' extension
error: unknown file type '.f90' (from 'delaunay/stripack.f90') 
```

这是我的设置文件（上半部分）：

```
from distutils.core import setup, Extension
from Cython.Distutils import build_ext

ext_modules = [
  Extension("delaunay",
    sources=["delaunay/__init__.pyx",
             "delaunay/stripack.f90"])
]

setup(
  cmdclass = {'build_ext': build_ext},
  ext_modules = ext_modules,
  ...
) 
```

*注意：我最初错误地指定了 fortran 文件的位置（没有目录前缀），但是在我修复它之后，它以完全相同的方式中断。*

**我尝试过的事情：**

我找到[了这个](https://stackoverflow.com/questions/6523767/how-do-i-get-setup-py-test-to-use-a-specific-fortran-compiler)，并尝试像这样传递 fortran 编译器（即 gfortran）的名称：

```
$ python setup.py config --fcompiler=gfortran build_ext --inplace
usage: setup.py [global_opts] cmd1 [cmd1_opts] [cmd2 [cmd2_opts] ...]
   or: setup.py --help [cmd1 cmd2 ...]
   or: setup.py --help-commands
   or: setup.py cmd --help

error: option --fcompiler not recognized 
```

而且我还尝试删除`--inplace`，以防出现问题（它不是，与顶部错误消息相同）。

那么，我该如何编译这个fortran呢？我可以将其破解为`.o`自己并摆脱链接吗？或者[这是 Cython 中的一个错误](https://groups.google.com/forum/?fromgroups=#!topic/cython-users/DP_FksDi6iM)，这将迫使我重新实现 distutils 或使用预处理器破解？

**更新**

所以，在检查了`numpy.distutils`包裹之后，我对这个问题有了更多的了解。看来你必须

1.  使用 cython 将 .pyx 文件转换为 cpython .c 文件，
2.  然后使用支持fortran的`Extension`/`setup()`组合，比如`numpy`'s.

试过这个后，我的`setup.py`现在看起来像这样：

```
from numpy.distutils.core import setup
from Cython.Build import cythonize
from numpy.distutils.extension import Extension

cy_modules = cythonize('delaunay/sphere.pyx')
e = cy_modules[0]

ext_modules = [
  Extension("delaunay.sphere",
      sources=e.sources + ['delaunay/stripack.f90'])
]

setup(
  ext_modules = ext_modules,
  name="delaunay",
  ...
) 
```

（请注意，我还对模块进行了一些重组，因为似乎`__init__.pyx`不允许使用...）

现在是事情变得错误和依赖平台的地方。我有两个可用的测试系统——一个使用 Macports Python 2.7 的 Mac OS X 10.6 (Snow Leopard)，另一个使用系统 python 2.7 的 Mac OS X 10.7 (Lion)。

在 Snow Leopard 上，以下内容适用：

这意味着模块编译（万岁！）（虽然`--inplace`似乎没有 numpy，所以我不得不在系统范围内安装测试模块：/）但我仍然遇到`import`如下崩溃：

```
 >>> import delaunay
  Traceback (most recent call last):
    File "<input>", line 1, in <module>
    File "<snip>site-packages/delaunay/__init__.py", line 1, in <module>
      from sphere import delaunay_mesh
  ImportError: dlopen(<snip>site-packages/delaunay/sphere.so, 2): no suitable image found.  Did find:
    <snip>site-packages/delaunay/sphere.so: mach-o, but wrong architecture 
```

在 Lion 上，我得到一个编译错误，遵循一个看起来相当混乱的编译行：

```
gfortran:f77: build/src.macosx-10.7-intel-2.7/delaunay/sphere-f2pywrappers.f
/usr/local/bin/gfortran -Wall -arch i686 -arch x86_64 -Wall -undefined dynamic_lookup -bundle build/temp.macosx-10.7-intel-2.7/delaunay/sphere.o build/temp.macosx-10.7-intel-2.7/build/src.macosx-10.7-intel-2.7/delaunay/spheremodule.o build/temp.macosx-10.7-intel-2.7/build/src.macosx-10.7-intel-2.7/fortranobject.o build/temp.macosx-10.7-intel-2.7/delaunay/stripack.o build/temp.macosx-10.7-intel-2.7/build/src.macosx-10.7-intel-2.7/delaunay/sphere-f2pywrappers.o -lgfortran -o build/lib.macosx-10.7-intel-2.7/delaunay/sphere.so
ld: duplicate symbol _initsphere in build/temp.macosx-10.7-intel-2.7/build/src.macosx-10.7-intel-2.7/delaunay/spheremodule.o ldand :build /temp.macosx-10.7-intelduplicate- 2.7symbol/ delaunay/sphere.o _initsphere in forbuild architecture /i386
temp.macosx-10.7-intel-2.7/build/src.macosx-10.7-intel-2.7/delaunay/spheremodule.o and build/temp.macosx-10.7-intel-2.7/delaunay/sphere.o for architecture x86_64 
```

现在让我们退后一步，然后再仔细研究这里的细节。首先，我知道 64 位 Mac OS X 中的架构冲突令人头疼；我必须非常努力地让 Macports Python 在 Snow Leopard 机器上工作（只是为了从系统 python 2.6 升级）。我也知道，当您看到`gfortran -arch i686 -arch x86_64`您正在向编译器发送混合消息时。那里隐藏着各种特定于平台的问题，在这个问题的背景下我们不需要担心。

*但让我们看看这一行*： `gfortran:f77: build/src.macosx-10.7-intel-2.7/delaunay/sphere-f2pywrappers.f`

**numpy 在做什么？！**在这个版本中我不需要任何 f2py 功能！实际上，我编写了一个 cython 模块*以避免*处理 f2py 的疯狂（我需要有 4 或 5 个输出变量，以及既不进也不出的参数——f2py 都没有很好地支持这些参数。）我只是想要它编译`.c`->`.o`和`.f90`->`.o`并链接它们。如果我知道如何包含所有相关的头文件，我可以自己编写这个编译器行。

请告诉我我不需要为此编写自己的makefile ...或者有一种方法可以将fortran转换为（输出兼容的）C，这样我就可以避免python看到.f90扩展名（它修复了整个问题。）请注意，[`f2c`](http://www.netlib.org/f2c/)它不适合这个，因为它只适用于 F77，这是一种更现代的方言（因此是`.f90`文件扩展名）。

**更新 2** 以下 bash 脚本将愉快地编译和链接代码：

```
PYTHON_H_LOCATION="/opt/local/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7/"

cython sphere.pyx

gcc -arch x86_64 -c sphere.c -I$PYTHON_H_LOCATION
gfortran -arch x86_64 -c stripack.f90
gfortran -arch x86_64 -bundle -undefined dynamic_lookup -L/opt/local/lib *.o -o sphere.so 
```

有关如何使这种 hack 与 setup.py 兼容的任何建议？我没有人安装此模块必须`Python.h`手动查找...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T10:15:07.537

**更新：**我在 github 上创建了一个项目，它手动完成了编译行的生成。它被称为[complex_build](https://github.com/joe-jordan/complicated_build)。

**更新 2：**事实上，“手动生成”是一个非常糟糕的主意，因为它是特定于平台的——项目现在从`distutils.sysconfig`模块中读取值，这是用于编译 python 的设置（即，正是我们想要的）唯一的设置猜测是fortran编译器和文件扩展名（用户可配置）。我怀疑它现在正在重新实现相当多的 distutils！

* * *

这样做的方法是编写您自己的编译器行，并将它们破解到您的`setup.py`. 我在下面展示了一个适用于我的（非常简单的）案例的示例，它具有以下结构：

*   进口
*   `cythonize()`任何`.pyx`文件，因此您只有 fortran 和 C 文件。
*   定义一个`build()`编译代码的函数：
    *   可能是一些易于更改的常量，例如编译器名称和架构
    *   列出 fortran 和 C 文件
    *   生成将构建模块的 shell 命令
    *   添加链接器行
    *   运行外壳命令。
*   如果命令是`install`并且目标还不存在，则构建它。
*   运行设置（将构建纯 python 部分）
*   如果命令是`build`，请立即运行构建。

我的实现如下所示。它只为一个扩展模块而设计，并且每次都重新编译所有文件，因此可能需要进一步扩展才能更通用。另请注意，我已经对各种 unix 进行了硬编码`/`，因此如果您要将其移植到 Windows，请确保您适应或替换为`os.path.sep`.

```
from distutils.core import setup
from distutils.sysconfig import get_python_inc
from Cython.Build import cythonize
import sys, os, shutil

cythonize('delaunay/sphere.pyx')

target = 'build/lib/delaunay/sphere.so'

def build():
  fortran_compiler = 'gfortran'
  c_compiler = 'gcc'
  architecture = 'x86_64'
  python_h_location = get_python_inc()
  build_temp = 'build/custom_temp'
  global target

  try:
    shutil.rmtree(build_temp)
  except OSError:
    pass

  os.makedirs(build_temp) # if you get an error here, please ensure the build/ ...
  # folder is writable by this user.

  c_files = ['delaunay/sphere.c']
  fortran_files = ['delaunay/stripack.f90']

  c_compile_commands = []

  for cf in c_files:
    # use the path (sans /s), without the extension, as the object file name:
    components = os.path.split(cf)
    name = components[0].replace('/', '') + '.'.join(components[1].split('.')[:-1])
    c_compile_commands.append(
      c_compiler + ' -arch ' + architecture + ' -I' + python_h_location + ' -o ' +
      build_temp + '/' + name + '.o -c ' + cf
    )

  fortran_compile_commands = []

  for ff in fortran_files:
    # prefix with f in case of name collisions with c files:
    components = os.path.split(ff)
    name = components[0].replace('/', '') + 'f' + '.'.join(components[1].split('.')[:-1])
    fortran_compile_commands.append(
      fortran_compiler + ' -arch ' + architecture + ' -o ' + build_temp + 
      '/' + name + '.o -c ' + ff
    )

  commands = c_compile_commands + fortran_compile_commands + [
    fortran_compiler + ' -arch ' + architecture + 
    ' -bundle -undefined dynamic_lookup ' + build_temp + '/*.o -o ' + target
  ]

  for c in commands:
    os.system(c)

if 'install' in sys.argv and not os.path.exists(target):
  try:
    os.makedirs('build/lib/delaunay')
  except OSError:
    # we don't care if the containing folder already exists.
    pass
  build()

setup(
  name="delaunay",
  version="0.1",
  ...
  packages=["delaunay"]
)

if 'build' in sys.argv:
  build() 
```

我猜这可以包含在一个新`Extension`课程中，它有自己的`build_ext`命令 - 高级学生的练习;）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-12T09:26:27.460

只需在 Python 之外构建和安装您的老式 Fortran 库，然后在 distutils 中链接到它。您的问题表明您不打算对这个库进行调整，因此一次性安装可能会这样做（使用库的构建和安装说明）。然后将 Python 扩展链接到已安装的外部库：

```
ext_modules = [
    Extension("delaunay",
              sources = ["delaunay/__init__.pyx"],
              libraries = ["delaunay"])
] 
```

如果您意识到您还需要其他语言的包装器，例如 Matlab、Octave、IDL 等，这种方法也是安全的。

**更新**

在某些时候，如果您最终想要包装多个这样的外部库，那么添加一个安装所有这些库并管理所有包装器的构建的顶级构建系统是有利的。我有`cmake`这个目的，它非常擅长处理系统范围的构建和安装。但是，它不能开箱即用地构建 Python 的东西，但*可以*很容易地教它在每个子目录中调用“python setup.py install” `python`，从而调用 distutils。所以整个构建过程如下所示：

```
mkdir build
cd build
cmake ..
make
make install
make python
(make octave)
(make matlab) 
```

始终将核心库代码与特定前端语言的包装器分开非常重要（也适用于您自己的项目！），因为它们往往变化得相当快。否则会发生什么，可以在以下示例中看到`numpy`：不是编写一个通用 C 库并为 Python 创建瘦包装器，而是在源代码中*到处*`libndarray.so`都有 Python C API 调用。这就是现在作为 CPython 的一个重要替代品而受到阻碍的原因，因为为了获得他们必须支持 CPython API 的每一位，这是他们无法做到的，因为他们有一个即时编译器和一个不同的垃圾收集器。这意味着我们错过了许多潜在的改进。*`Pypy``numpy`*

 *底线：

1.  单独构建通用 Fortran/C 库并在系统范围内安装它们。

2.  对包装器有一个单独的构建步骤，它应该尽可能地保持轻量级，以便很容易适应即将出现的下一个大型语言 X。如果有一个安全的假设，那就是 X 将支持与 C 库的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-27T16:13:42.670

您可以在外部构建目标文件，然后使用Extension 构造函数`distutils`的参数将其包含在链接步骤中。`extra_objects`在`setup.py`：

```
...
e = Extension(..., extra_objects = ['holycode.o'])
... 
```

在命令提示符下：

```
# gfortran -c -fPIC holycode.f
# ./setup.py build_ext ... 
```

只有一个外部对象，这对许多人来说将是最简单的方法。*

# .net - WPF 额外的渐变画笔

> ID：12696522
> 
> 赞同：0
> 
> 时间：2012-10-02T18:59:12.653
> 
> 标签：.net, wpf, sdk, gradient

有谁知道 WPF 是否有任何额外的渐变画笔可用，例如轮廓填充？甚至是否有可能制造一个？[线性](http://msdn.microsoft.com/en-us/library/system.windows.media.lineargradientbrush.aspx)和[径向](http://msdn.microsoft.com/en-us/library/system.windows.media.radialgradientbrush.aspx)并不总是以所需的方式填充形状。我注意到两者都派生自[System.Windows.Media.GradientBrush](http://msdn.microsoft.com/en-us/library/system.windows.media.gradientbrush.aspx)这表明它可能会做得更多。我知道 Expression SDK 中有额外的[效果](http://msdn.microsoft.com/en-us/library/system.windows.media.effects.effect.aspx)，但没有任何额外的画笔类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:07:00.607

[该线程](https://stackoverflow.com/questions/794512/how-do-i-implement-a-custom-brush-in-wpf)处理类似的问题。基本上，您不能从 Brush 继承。

# javascript - 显示地图并突出显示某些国家

> ID：12696526
> 
> 赞同：11
> 
> 时间：2012-10-02T18:59:34.573
> 
> 标签：javascript, html, google-maps, maps

这就是我正在努力做的事情：在页面上显示地图（谷歌地图或任何竞争对手，免费是可能的......）并在这张地图上突出显示某些国家（这些国家的列表将存储在一个变量中例）。

我试图用（几乎）所有国家的 geo-json 列表在地图上绘制多边形，但它太重了。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-02T19:37:53.690

我相信你需要一个多边形来做到这一点。

[http://code.google.com/apis/maps/documentation/overlays.html#Polygons_Overview](http://code.google.com/apis/maps/documentation/overlays.html#Polygons_Overview)
[http://code.google.com/apis/maps/documentation/reference.html#GPolygon](http://code.google.com/apis/maps/documentation/reference.html#GPolygon)

喜欢这个示例： http: [//gmaps-samples-v3.googlecode.com/svn/trunk/poly/pentagon.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/poly/pentagon.html)

![样本](../Images/c4b3d2e3afaee9061ca86cb713d2c0f1.png)

或者查看这个可以为您完成所有艰苦工作的网站:)
[http://www.dyngeometry.com/web/WorldRegion.aspx](http://www.dyngeometry.com/web/WorldRegion.aspx)

![ss](../Images/00ee5eddb7d99f223019a91c9af4de39.png)

最后，还有 Google Geochart
在这里查看：[https ://developers.google.com/chart/interactive/docs/gallery/geochart](https://developers.google.com/chart/interactive/docs/gallery/geochart)

![GC](../Images/dfb7507743cb472861c4ecf14e01fccb.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-16T12:26:36.787

如果将它们存储为 KML 文件格式并将它们加载为[KmlLayers](https://developers.google.com/maps/documentation/javascript/reference#KmlLayer) ，则可以在地图中创建非常复杂的多边形而不会降低性能。KML 是一种基于 XML 的地理数据矢量文件格式。在 Google 地图中使用 KML 文件的美妙之处在于，它们在 Google 服务器上呈现为简单的 PNG 文件，无论原始多边形数据多么复杂，都可以随时匹配您的地图视图的当前分辨率和边界框。因此，所有复杂性都在 Google 的服务器端处理。

这是一个[项目示例](http://www.gewiss-saarland.de/)，我在其中为德国的一个联邦州使用了 KML 掩码。

~~为了快速查看 KML 文件，也可以直接加载到 Google 地图公共网站（通过在搜索字段中输入其 URL）。这是我在上述项目中使用的 KML 文件，[直接加载到 Google Maps](https://maps.google.com/maps?q=http://gewiss.strukturholding.de/typo3conf/ext/dl_gewiss_gmaps/data/data_2011/grenzen_sl_02.kmz&hl=de&ll=49.34302,6.871948&spn=1.519255,2.683411&sll=49.247157,6.982538&sspn=0.380554,0.670853&t=m&z=9)中。（我实际上在这里使用了一个 KMZ 文件，但这只是一个压缩到 ZIP 存档中的 KML 文件。您可以使用普通的 ZIP 工具对其进行打包和解压缩。）~~ [更新：这在新的地图版本中不再起作用（开始2014 年）。]

请注意，Google 暗示了对 KML/KMZ 文件的大小限制（当前为 10 Mb 未压缩，3 Mb 压缩 -[详情请参见此处](https://developers.google.com/kml/documentation/mapsSupport)）。如果您的 KML 文件过大，可以使用软件来降低复杂性（请参阅[此处](https://github.com/taf2/kml_redux)和[此处](http://www.dummysoftware.com/kmlreduce.html)的示例）。

请注意，仅当您的多边形是静态的（例如国家或城市的边界）并且不是动态生成的（例如，取决于任何用户输入）时，KML 文件才是一种解决方案。对于动态多边形，您仍然必须使用 Maps API 的 Polygon 类，并具有您提到的复杂性限制。（但您仍然可以自由使用 KML 图层并根据用户输入打开和关闭它们，只要多边形细节不必更改。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-08T06:35:41.317

If you need just a boundaries of the countries with different colors you can try [jVectorMap](http://jvectormap.com).

# xquery - XQuery fn:deep-equal - 将来自 XPath 的文本与字符串文字进行比较

> ID：12696532
> 
> 赞同：0
> 
> 时间：2012-10-02T18:59:44.760
> 
> 标签：xquery, saxon

我正在尝试使用 XQuery 函数**fn:deep-equal**来比较 XML 文档的各个部分，但我遇到了意外的行为。将 XPath 值与字符串文字进行比较时，函数返回 false。

例如下面的代码

```
let $doc :=
  <root>
    <child><message>Hello</message></child>
  </root>

let $message := <message>Hello</message>

let $value := $doc/child/message/text()
let $compareDirectly := fn:deep-equal($value, "Hello") (: -> false :)
let $compareAsString := fn:deep-equal(fn:concat($value, ""), "Hello") (: -> true :)
let $comparePath := fn:deep-equal($value, $message/text()) (: -> true :)

return
  <results>
    <value>{$value}</value>
    <directly>{$compareDirectly}</directly>
    <asString>{$compareAsString}</asString>
    <path>{$comparePath}</path>
  </results> 
```

XQuery 程序使用 Saxon 执行，生成以下 XML

```
<?xml version="1.0" encoding="UTF-8"?>
<results>
    <value>Hello</value>
    <directly>false</directly>
    <asString>true</asString>
    <path>true</path>
</results> 
```

我希望 $compareDirectly 为真（与其他两个示例相同），但 fn:deep-equal 似乎不像我直觉预期的那样工作。我想知道这是否是正确的行为。

有没有更好的哇如何比较两个 XML 节点？

我正在寻找一些通用的解决方案，它既可用于 XML 片段（例如 $doc 或 $message 的值），也可用于字符串文字的这种特殊情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:26:11.043

从[规格](http://www.w3.org/TR/xpath-functions-30/#func-deep-equal)：

> 要深度相等，它们必须包含成对深度相等的项目；并且要使两个项目深度相等，它们必须是比较相等的原子值，或者是具有相同名称的同类节点，其子节点是深度相等的。

所以这就是为什么在将文本节点与原子类型进行比较时它不返回 true 的原因。在您的其他两个示例中，您正在比较 2 个字符串原子类型。看起来你不需要 deep-equal，它递归地比较节点。如果是这种情况，那么您可以只比较字符串：

```
$doc/child/message/string() eq $message/string()
=> true() 
```

如果还有其他要求，那么您可能需要更新您的示例以更清楚地展示这些要求。

# ajax - IIS6 上托管的 WebAPI 返回 404

> ID：12696535
> 
> 赞同：2
> 
> 时间：2012-10-02T18:59:58.457
> 
> 标签：ajax, iis-6, asp.net-mvc-4, asp.net-web-api

我们已经按照 Phil Haack 的帖子：[ASP.NET MVC on IIS 6 Walkthrough](http://haacked.com/archive/2008/11/26/asp.net-mvc-on-iis-6-walkthrough.aspx)的教程在 IIS6 上设置了 MVC4 。

基本上，我们有：

1.  插入通配符扩展映射到： `c:\windows\microsoft.net\framework\v4.0.30319\aspnet_isapi.dll`

2.  取消选中验证文件是否存在复选框。

这些页面可以毫无问题地加载。但是我们的 ajax 调用都不起作用。

我总是得到一个`404 Not Found`，不管它是`POST`什么`GET`。

我所有的 ApiControllers 都位于`/Api/...`. `Build Action`是`Compile`和`Copy to Output Directory`是`Do not copy`。

还有其他地方我应该研究吗？

# php - 更新控制器/未定义变量上的 Codeigniter 错误

> ID：12696537
> 
> 赞同：-1
> 
> 时间：2012-10-02T19:00:00.327
> 
> 标签：php, codeigniter

我有一个带有 Codeigniter 的简单 crud 应用程序。我还在努力学习这个框架。但我在更新控制器中遇到错误，似乎找不到它。

我得到的三个错误是：

严重性：警告
消息：Customers::update_customer() 缺少参数 1
文件名：controllers/customers.php
行号：67

严重性：通知
消息：未定义变量：id
文件名：controllers/customers.php
行号：94

最后一个是表单动作的结果。

严重性：通知
消息：未定义索引：id
文件名：views/edit_customer.php
行号：16
"method="post">

* * *

控制器：

```
function update_customer($id){

    $data['success']=0;
    if($_POST){
        $data_customer=array(
            'first_name'=>$_POST['first_name'],
            'last_name'=>$_POST['last_name'],
            'phone'=>$_POST['phone'],
            'email'=>$_POST['email'],
            'website'=>$_POST['website'],
            'business_name'=>$_POST['business_name'],
            'business_add'=>$_POST['business_add'],
            'business_cityState'=>$_POST['business_cityState'],
            'cc_type'=>$_POST['cc_type'],
            'cc_number'=>$_POST['cc_number'],
            'cc_exp'=>$_POST['cc_exp'],
            'cc_cvd'=>$_POST['cc_cvd'],
            'billing_add'=>$_POST['billing_add'],
            'billing_zip'=>$_POST['billing_zip'],
            'package'=>$_POST['package'],
            'assigned_zip_code'=>$_POST['assigned_zip_code'],
            'active'=>1
        );
        $this->customer->update_customer($id,$data);
        $data['success']=1;
    }
    $data['customer']=$this->customer->get_customer($id);

    $this->load->view('header');
    $this->load->view('edit_customer',$data);
    $this->load->view('footer');
} 
```

模型：

```
function update_customer($id, $data){
    $this->where('id', $id);
    $this->db->update('customers', $data);
} 
```

视图顶部：

```
 <?php if($success==1){ ?>
        <div class="successAlert">This customer has been updated.</div>
    <? } ?>

    <div class="mainForm">
        <?php echo validation_errors(); ?>

        <form action="<?=base_url()?>customers/update_customer/<?=$customer['id']?>" method="post">

            <label for="first_name">First Name:</label> 
            <input type="input" name="first_name" value="" /><br />
            <hr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:07:51.803

## 1\. 你正在为 key: bad 克隆一个数组键

为什么要`$data_customer`像这样构造数组？`$_POST`除了添加的`'active'`密钥之外，最终结果看起来与任何方式都相同。

如果您真的想克隆数组，只需编写：

```
$data_customer = $_POST;
$data_customer['active'] = 1; 
```

当然，这也更能抵抗您提交给服务器的值的变化。例如，如果您决定将来发送中间名，则它需要零维护。

## 2\. `if($_POST)`...

`if($_POST)`将始终返回`TRUE`，因为`$_POST`是全局的，`if`将*始终*执行。你最好使用 CodeIgniter's ，如果用户没有提交帖子数据`$this->input->post()`，它会返回。`FALSE`

## 3\. 你的错误

您需要将 an 传递`id`给`update_customer()`函数。例如，这可以通过向 发送 POST 请求来完成`http://localhost/your_app/customers/update_customer/5`。

或者，您可以将 id 作为隐藏值附加到表单中`<input type='hidden' name='id' value='5'/>`，然后在`$this->input->post()`数组中检索它并`$id`从`update_customer($id)`.

这将清除您的前两个错误。

最后一个错误发生在您的视图中，因为`$customer`不包含`id`. `$this->customer->get_customer($id)`检查使用的响应`var_dump()`以找出原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:10:49.577

似乎您没有将 $id 参数传递给您的 update() 函数

# java - h:outputLabel 没有显示任何内容

> ID：12696539
> 
> 赞同：0
> 
> 时间：2012-10-02T19:00:11.427
> 
> 标签：java, jsf, jsf-2

我面临的问题是，单击`h:commandLink`按钮后`h:outputLabel`没有显示任何内容。我在提交表单时使用 selectedUser 来存储值，但似乎 selectedUser 没有存储任何值。

1）这是xhtml文件。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:head></h:head>

<h:body class="thrColElsHdr">

        <div class="friends">

        <h4>Friends</h4>
        <h:form>
        <p:selectOneMenu value="#{chatBean.selectedUser}">
        <f:selectItems value="#{chatBean.friendList}" var="users" itemLabel="#{users.firstName}" itemValue="#{users}"/>
        </p:selectOneMenu>

        <h:commandLink>Chat</h:commandLink>
        </h:form>
        <br>
        </br>
        <h:outputLabel value="#{chatBean.selectedUser.firstName}"/>

        </div>

</h:body>
</html> 
```

2）这是chatBean，它是使用facesconfig.xml的会话范围

```
package com.bean;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

import javax.faces.context.FacesContext;
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;
import javax.persistence.Query;
import javax.servlet.http.HttpSession;

import com.entity.Friend;
import com.entity.User;

public class ChatBean {
    private EntityManager em;
    private User selectedUser;

    public User getSelectedUser() {
        return selectedUser;
    }

    public void setSelectedUser(User selectedUser) {
        this.selectedUser = selectedUser;
    }

    public ChatBean(){
        selectedUser= new User();
        EntityManagerFactory emf=Persistence.createEntityManagerFactory("FreeBird");
         em =emf.createEntityManager();
    }

public List<User> getFriendList(){

        FacesContext context = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) context.getExternalContext().getSession(true);
        User user=(User) session.getAttribute("userdet");
        Query query = em.createQuery("SELECT f FROM Friend f WHERE f.email='"+user.getEmail()+"' AND f.status=1",Friend.class);
         List<Friend> results =query.getResultList();
         ArrayList<User> friends = new ArrayList<User>();
         Iterator<Friend> it = results.iterator();
          while(it.hasNext()){
              System.out.println("in getFriendList...");

             User friend =em.find(User.class,it.next().getFriendEmail());
             friends.add(friend);
         }
          return friends;
}
} 
```

3）这里是用户实体类

```
package com.entity;

import java.io.Serializable;
import javax.persistence.*;

/**
 * The persistent class for the user database table.
 * 
 */
@Entity
public class User implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    private String email;

    @Lob()
    private String aboutMe;

    private String birthDate;

    private String city;

    private String college;

    private String confirmation;

    private String contactNo;

    private String country;

    private String degree;

    private String firstName;

    private String gender;

    private String highSchool;

    private String image;

    private String interest;

    private String lastName;

    private String password;

    private int pincode;

    @Lob()
    private String quote;

    private String relationship;

    private String secondarySchool;

    private String state;

    private String street;

    private String university;

    private String userName;

    public User() {
    }

    public String getEmail() {
        return this.email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getAboutMe() {
        return this.aboutMe;
    }

    public void setAboutMe(String aboutMe) {
        this.aboutMe = aboutMe;
    }

    public String getBirthDate() {
        return this.birthDate;
    }

    public void setBirthDate(String birthDate) {
        this.birthDate = birthDate;
    }

    public String getCity() {
        return this.city;
    }

    public void setCity(String city) {
        this.city = city;
    }

    public String getCollege() {
        return this.college;
    }

    public void setCollege(String college) {
        this.college = college;
    }

    public String getConfirmation() {
        return this.confirmation;
    }

    public void setConfirmation(String confirmation) {
        this.confirmation = confirmation;
    }

    public String getContactNo() {
        return this.contactNo;
    }

    public void setContactNo(String contactNo) {
        this.contactNo = contactNo;
    }

    public String getCountry() {
        return this.country;
    }

    public void setCountry(String country) {
        this.country = country;
    }

    public String getDegree() {
        return this.degree;
    }

    public void setDegree(String degree) {
        this.degree = degree;
    }

    public String getFirstName() {
        return this.firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getGender() {
        return this.gender;
    }

    public void setGender(String gender) {
        this.gender = gender;
    }

    public String getHighSchool() {
        return this.highSchool;
    }

    public void setHighSchool(String highSchool) {
        this.highSchool = highSchool;
    }

    public String getImage() {
        return this.image;
    }

    public void setImage(String image) {
        this.image = image;
    }

    public String getInterest() {
        return this.interest;
    }

    public void setInterest(String interest) {
        this.interest = interest;
    }

    public String getLastName() {
        return this.lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public String getPassword() {
        return this.password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public int getPincode() {
        return this.pincode;
    }

    public void setPincode(int pincode) {
        this.pincode = pincode;
    }

    public String getQuote() {
        return this.quote;
    }

    public void setQuote(String quote) {
        this.quote = quote;
    }

    public String getRelationship() {
        return this.relationship;
    }

    public void setRelationship(String relationship) {
        this.relationship = relationship;
    }

    public String getSecondarySchool() {
        return this.secondarySchool;
    }

    public void setSecondarySchool(String secondarySchool) {
        this.secondarySchool = secondarySchool;
    }

    public String getState() {
        return this.state;
    }

    public void setState(String state) {
        this.state = state;
    }

    public String getStreet() {
        return this.street;
    }

    public void setStreet(String street) {
        this.street = street;
    }

    public String getUniversity() {
        return this.university;
    }

    public void setUniversity(String university) {
        this.university = university;
    }

    public String getUserName() {
        return this.userName;
    }

    public void setUserName(String userName) {
        this.userName = userName;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T19:12:03.960

您的托管 bean 必须具有相应的注释：

```
@ViewScoped
@ManagedBean
public class ChatBean {
    //...
} 
```

可以使用以下提示之一更正该示例：

*   添加一个并将其绑定`action`到`<h:commandLink>`返回页面名称的方法。这样，页面将被刷新并显示新值`#{chatBean.selectedUser.firstName}`：

    ```
    <h:commandLink action="#{chatBean.refresh}" value="Chat" /> 
    ```

在你的课堂上：

```
public String refresh() {
    return "index";
} 
```

*   将 ajax 行为添加到您`<h:commandLink>`的以更新`<h:outputLabel>`. 您应该为您的 id 添加一个属性`<h:outputLabel>`：

    ```
    <h:commandLink value="Chat">
        <f:ajax render=":theLabel" />
    </h:commandLink>
    <!-- jsf code -->
    <h:outputLabel id="theLabel" value="#{chatBean.selectedUser.firstName}"/> 
    ```

# jquery - jQuery 自定义工具提示（不是 ui）仅在 IE7 中不起作用

> ID：12696541
> 
> 赞同：2
> 
> 时间：2012-10-02T19:00:25.303
> 
> 标签：jquery, internet-explorer-7

我有一个**自定义工具提示功能（在 jQuery 中），它在*****除 IE7 之外的***所有 [主要] 浏览器（*甚至在 IE8 中*）都运行良好。

 *该站点的文档类型是较新的**html 5 文档**类型( `<!DOCTYPE html>`)。

有 5 个链接/图像。**IE7**正确显示第一个工具提示（减去一些小的布局问题 - 但可以修复），但在其他链接（图像）上，它会恢复为其余的原始浏览器工具提示。

```
$('#port-window a').hover(function() {
        var tip = $(this).attr('title');
        $(this).attr('title','');
        $(this).append("<div id='tooltip'>"+ tip +"</div>");
        $("#tooltip")
            .css("position","relative")
            .css("z-index","999")
            .fadeIn("slow");
    }, function() {
        $(this).attr('title',$('#tooltip').html());
        $(this).children('div#tooltip').remove();
    }); 
```

标题的 Html 是这样的：

```
<ul class="portfolio">
      <li>
        <div id="port-window">
            <a title="This is the title" href="[blogurl]/work/web-design-dev/website/">
                <span class="window"></span>
                <span class="gradient"></span>
                <img src="[blogurl]/portfolio-images/thumbs/image.jpg" alt="alt tag info" title="img title attr - not used" />
            </a>
        </div>
      </li>
</ul> 
```

任何人都可以阐明如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:52:46.510

在 IE7 [http://jsfiddle.net/Xg7ru/1/中检查这个](http://jsfiddle.net/Xg7ru/1/)

您犯的错误并不难发现，您在页面中使用了 id #port-window 3 次，这对于 CSS 通常不是问题，但是 jQuery 将使用给定的 ID 从 DOM 中返回第一个元素，因此它正在为第一张照片工作。我真的不确定它在其他浏览器中是如何工作的。

我将 HTML 标记从 id='port-window' 更改为 class='port-window' 并相应地更改了 JS、CSS 中的选择器，现在它在 IE7 中对我来说似乎工作正常。

编辑：**根据规范，给定 ID 只能有一个 DOM 节点**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:37:06.427

我认为问题可能出在`.attr()`方法上。

您可能想尝试使用该`.prop()`方法。

两者非常相似，但它们之间也有区别，而且实际上大部分时间`.prop()`都是正确的。

更重要的是，我相信旧版本的 IE 存在错误`.attr()`，所以有些东西可以使用`.prop()`，而`.attr()`. 这可能是其中一种情况。

我没有 IE7 可以在你的代码上试用它，所以你必须尝试它并让我知道它是否有效。

参考：

*   [.prop() 与 .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr)
*   [http://api.jquery.com/prop/](http://api.jquery.com/prop/)

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T19:16:49.417

主要问题是您有多个`id="port-window"`对象。你不能这样做 - 每个 id 一个对象。将它们更改为一个类。我会推荐这个在 IE7 中工作的代码（并将 CSS 更改为使用`.port-window`而不是`#port-window`）：

```
<ul class="portfolio">
    <li>
        <div class="port-window">
            <a data-title="TITLE 1" href="#">
                <img src="images/img.jpg" width="100" height="100" />
            </a>
        </div>
    </li>
    <li>
        <div class="port-window">
            <a data-title="TITLE 2" href="#">
                <img src="images/img.jpg" width="100" height="100" />
            </a>
        </div>
    </li>
    <li>
        <div class="port-window">
            <a data-title="TITLE 3" href="#">
                <img src="images/img.jpg" width="100" height="100" />
            </a>
        </div>
    </li>
</ul>​ 
```

工具提示存储在数据项中（因此您不必清除它），它只是跟踪新的 div 而不必再次找到它：

```
$('.port-window a').hover(function() {
    $("<div id='tooltip' style='display: none; position: relative; z-index: 999;' >" +
            $(this).data('title') + "</div>")
        .insertAfter(this)
        .fadeIn("slow");
}, function() {
    $('#tooltip').remove();
}); 
```

使用您的 HTML 的工作演示（加上修复）：http: [//jsfiddle.net/jfriend00/LsnnH/](http://jsfiddle.net/jfriend00/LsnnH/)*

# ruby-on-rails - 是否有可能从 mongoid 观察者中呈现部分内容？

> ID：12696542
> 
> 赞同：0
> 
> 时间：2012-10-02T19:00:28.830
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, mongoid

我需要在观察者内部渲染部分内容。

我收到此错误：

```
undefined method `render' for #<OrderObserver:0xb257a30c> 
```

这是我的观察者：

```
class OrderObserver < Mongoid::Observer
 def after_create(order)
   gift = order.gift
   seller = order.seller
   buyer = order.user
   admin = User.find_or_create_by(email: "email@email.com")
   message = Message.new(subject: "Message subject", body: "<%= #{render 'users/messages/templates/new_order', :order => order} %>", sender: admin, receiver: seller,
                          microfunc: microfunc, order: order)
   message.send_message
   message.save
  end
end 
```

**是否可以渲染部分内部 mongoid 观察者？如果不可能，我该怎么做？**

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:12:06.583

不，这是不可能的。观察者发生在对象级别，观察文档何时保存，然后对该文档/对象进行操作。保存对象的时间和浏览器之间没有联系（因为对象可以保存在控制台、rake 任务或任何时候加载 rails 环境）。

如果您需要在保存订单时创建一条消息，并在屏幕上显示 --- 消息的保存将在订单呈现之前进行。因此，您应该能够呈现订单（及其消息），就好像它发生在一个页面加载中一样（因为它确实发生了）。

# ruby-on-rails - 用于变量控制器的 Ruby on Rails 路由

> ID：12696543
> 
> 赞同：0
> 
> 时间：2012-10-02T19:00:34.650
> 
> 标签：ruby-on-rails, url, variables, routing, match

我有一个希望能够重定向到的 URL。

类似于：

> “http://localhost:3000/username/admin/page”。

我在 routes.rb 中有一个匹配项：

```
 match ':account/admin/:page' => "admin#index" 
```

我有重定向代码：

```
redirect_to :controller => account.username, :action=>"admin", :page=>"index" 
```

但是，这会出现路由错误：

```
No route matches {:action=>"admin", :controller=>"sdunn", :page=>"index"} 
```

我知道我做错了什么，但我该如何解决这个问题？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:07:47.547

Route 需要 2 个参数，第一个是：account，第二个是：page，我认为您只是传递：page。我会将 :as => 'some_name' 添加到您的路线中，然后使用 _path ：

路线.rb

```
match ':account/admin/:page' => "admin#index", :as => 'my_route' 
```

控制器：

```
redirect_to my_route_path(@user, @page) 
```

my_route_path 可能会有所不同，具体取决于您的确切路由文件，因此请使用

```
rake routes | grep my_route 
```

查看确切的名称，然后将 _path 添加到末尾。

# java - 如何跳过基于同一类中的标志的注释调用

> ID：12696546
> 
> 赞同：0
> 
> 时间：2012-10-02T19:00:47.107
> 
> 标签：java, spring, annotations, spring-annotations

我在 getter 上有几个注释，如下所示。我想跳过基于同一类中的布尔值的 getter 上的所有注释调用。有什么办法吗？

```
@MyAnnotation1(message = "{someMessage1}")
@MyAnnotation2(message = "{someMessage2}")
public Date getFromDate() {
    return fromDate;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:06:01.610

`@Ignore`如果设置了带注释的字段，您可以在该字段上定义另一个注释，您可以简单地忽略您的注释处理。

```
 @Ignore
   private boolean value; 
```

您可以将自己的注释定义为

```
 @Target(ElementType.FIELD)
   @Retention(RetentionPolicy.RUNTIME)
   /**
    * This Annotation should be used on boolean field to set specify whether annotation processing should be        ignored for that class
    */
   public @interface Ignore {

   } 
```

**请记住，这是自定义注释，因此您需要编写代码来处理它**

PS 注意：假设您正在编写自定义注释。并有加工。

# sql - 在 SQL 中，尝试为触发 from 条件的每个实例返回一条记录

> ID：12696548
> 
> 赞同：3
> 
> 时间：2012-10-02T19:00:53.027
> 
> 标签：sql

也许我在看这个问题都错了，但是这里有。

我们有一个数据库，它是我们在办公室使用的一些 CRM 软件的后端。老板想要一个简单的查询来提取客户及其配偶的生日。

表结构如下：

```
Client Details Table:
Client Name, Client Birthday, Spouse Name, Spouse Birthday, <etc> 
```

我有一个带有案例选择的简单查询，它将确定客户的生日或配偶的生日是下个月的任何时间。

查询压缩如下：

```
SELECT a.*
FROM
  (SELECT
     (CASE    WHEN <birthday calculation>
              ELSE NULL 
      END) as WhoHasBDay,
      ClientName,
      SpouseName
   FROM
     ClientDetailsTable) as a
WHERE
   a.WhoHasBDay IS NOT NULL 
```

这将返回客户或配偶在接下来的 X 天内过生日的任何条目。

但是，如果客户和他们的配偶在接下来的 X 天内过生日，我希望查询为每个返回一次结果。

IE，这里是下面的数据

```
CLIENT X: Birthday in 5 days
CLIENT Y: Spouse's Birthday in 8 days
CLIENT Z: Birthday in 3 days, Spouse's Birthday in 9 days. 
```

我想要的结果集是

```
CLIENT X BDAY T+5
CLIENT Y SPOUSE BDAY T+8
CLIENT Z BDAY T+3
CLIENT Z SPOUSE BDAY T+9 
```

也许我以错误的方式处理这个问题，在这种情况下，我们将不胜感激有关更好的攻击方法的建议。否则，如果有解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:04:03.903

将两个查询联合在一起：

```
 SELECT ClientName, ClientName AS BirthdayPerson, ClientBirthday FROM Clients 
    WHERE ClientBirthday BETWEEN X AND Y
 UNION ALL 
 SELECT ClientName, SpouseName AS BirthdayPerson, SpouseBirthday FROM Clients 
    WHERE SpouseBirthday BETWEEN X AND Y 
```

这将为您提供日期 X 和 Y 之间生日的每个人（您可以根据需要更改生日计算）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:04:53.883

我会将此作为两个单独查询的联合来解决：一个针对客户，一个针对他们的配偶。

```
SELECT ClientName, NULL AS SpouseName, Birthday
    FROM ClientDetailsTable
    WHERE <birthday calculation is true>
UNION ALL
SELECT ClientName, SpouseName, SpouseBirthday
    FROM ClientDetailsTable
    WHERE <spouse birthday calculation is true> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T19:08:53.493

您需要像这样在 sql 中使用“联合”：

select * from ClientDetailsTable where "client hasbirthday" union all

select * from clientDetailsTable where "Spouse hasbirthday"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T19:11:10.980

这是sql server中的一些示例代码。在接下来的 16 天内，为您提供两种生日类型中最近的第一个。

```
SELECT ClientName, ClientBirthday, null as SouseBirthday, ABS(DATEDIFF(day,GETDATE(),ClientBirthday)) as days
FROM ClientDetailsTable
WHERE ClientBirthday BETWEEN GETDATE() AND DATEADD(day,16,ClientBirthday)
UNION ALL
SELECT ClientName, null as ClientBirthday, SouseBirthday, ABS(DATEDIFF(day,GETDATE(),SouseBirthday)) as days
FROM ClientDetailsTable
WHERE SouseBirthday BETWEEN GETDATE() AND DATEADD(day,16,SouseBirthday)
ORDER BY days asc 
```

注意，未测试可能有错别字。

# java - 如何使用 modbus4j 设置从 IP Modbus TCP？

> ID：12696551
> 
> 赞同：1
> 
> 时间：2012-10-02T19:01:09.667
> 
> 标签：java, ip, slave, modbus

我正在使用`modbus4j`.

我会从 PC java 应用程序中读取控制器`%MW`。`M258`

在`modbus4j`项目中，我找到了这个示例：

```
public class Test2 {
    public static void main(String[] args) throws Exception {
        IpParameters params = new IpParameters();
        params.setHost("localhost");
        params.setPort(502);

        ModbusMaster master = new ModbusFactory().createTcpMaster(params, false);
        master.init();

        System.out.println(master.testSlaveNode(5));

        // Define the point locator.
        ModbusLocator loc = new ModbusLocator(1, RegisterRange.HOLDING_REGISTER, 0, DataType.TWO_BYTE_INT_UNSIGNED);

        // Set the point value
        master.setValue(loc, 1800);

        // Get the point value
        System.out.println(master.getValue(loc));
    }
} 
```

但是我不知道如何将IP分配给从站。

在这个示例中，我只能看到一个`slaveID`(int)，但看不到***从 IP***。

***你知道我怎么写从IP吗？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-09T13:24:42.927

以下 2 行设置从设备的 IP a Port

```
params.setHost("localhost");
params.setPort(502); 
```

# c - 在c中的循环中添加指向动态指针数组的指针

> ID：12696556
> 
> 赞同：2
> 
> 时间：2012-10-02T19:01:40.453
> 
> 标签：c, pointers, struct, malloc

我有一个表示表中一行的结构：

```
typedef struct {
    char *a;
    char *b;
} row; 
```

我有一个函数可以根据 db 数据初始化该行并返回一个指向它的指针

```
row* get_row(dbrow d) {
    row *r = malloc(sizeof(row));
    r->a = malloc(5);
    strcpy(r->a, d.a);
    r->b = malloc(5);
    strcpy(r->b, d.b);
    return r;
} 
```

最后，我有一个`row **rows`作为参数的函数：

```
void get_rows(row **rows) {
    ...
    rows = malloc(rowNumber * sizeof(row*));
    int i;
    for (i = 0; i < rowNumber; i++) {
        rows[i] = get_row(dbrow);
    }
} 
```

get_row 按预期工作并返回一个指向有效行结构的指针，但 gdb 显示 rows[0] （以及所有其他）永远不会获得新值，也就是说，它总是指向同一个地址，几乎就像`rows[i] = get_row(dbrow)`行没有不存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T19:04:23.400

> ...gdb 显示 rows[0] （以及所有其他）永远不会获得新值...

我在这里假设您正在查看`get_rows`函数的返回值，而不是其局部变量的值`rows`。这是问题所在：

```
rows = malloc(rowNumber * sizeof(row*)); 
```

您正在为函数收到的原始指针的*副本*分配一个新值，而不是原始指针。此更改将在函数之外不可见。

如果您需要为参数分配一个新值，那么您将需要添加另一个间接级别。记住; ***C 中的所有内容***都是按值传递的。所以，你的函数应该把 a`row***`作为它的参数：

```
void get_rows(row ***rows) {
    if(!rows) {
        signal_some_error();
        return;
    }
    ...
    *rows = malloc(rowNumber * sizeof(row*));
    ...
} 
```

* * *

此外，正如 user1700513 指出的那样，您正在将 a 分配`row*`给一行。这不可能是您的实际代码，因为它会导致编译器错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T19:04:50.977

更改`row r = malloc(sizeof(row));`为`row* r = malloc(sizeof(row));`. 我想知道为什么您没有收到编译器警告。

# jquery - 允许在 Supersized 插件中淡出字幕

> ID：12696559
> 
> 赞同：1
> 
> 时间：2012-10-02T19:01:49.010
> 
> 标签：jquery, slideshow

我正在使用超大的 JQuery 插件来播放全屏幻灯片。你可以在这里看到一个演示：http: [//buildinternet.com/project/supersized/slideshow/3.2/fade.html](http://buildinternet.com/project/supersized/slideshow/3.2/fade.html)

我通过将标题放在图像上方（绝对定位）来修改 css。每次幻灯片更改时，标题都会隐藏，然后再次显示在新幻灯片的顶部。我正在尝试根据需要使标题**淡入淡出**，但是，我无法弄清楚如何将 js 更改为像这样工作。

插件中控制字幕的部分如下：

```
// Update slide caption
if ($(vars.slide_caption).length){
    (api.getField('title')) ? $(vars.slide_caption).html(api.getField('title')) :      $(vars.slide_caption).html('');
} 
```

知道如何修改给定此代码的行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T23:58:58.393

这对我有用：

```
if ($(vars.slide_caption).length){
  (api.getField('title')) ? 
  $(vars.slide_caption).fadeOut("slow", function(){
    $(this).html(api.getField("title")).fadeIn("slow")
  }) :
  $(vars.slide_caption).fadeOut().html('');
} 
```

基本上，如果有新的标题，您会将旧标题淡出，作为回调，您将其替换为新标题并再次淡入。如果没有新标题，您只需在删除旧标题之前将其淡出即可。您当然可以使用“慢”以外的其他速度。

# android - NoClassDefFoundError - 拒绝对先前失败的类重新初始化

> ID：12696561
> 
> 赞同：8
> 
> 时间：2012-10-02T19:02:01.160
> 
> 标签：android, noclassdeffounderror

请有人解释一下这个错误的含义以及如何避免它。

一段时间后，由于此错误，我的应用程序强制关闭：

```
09-28 12:53:45.746 I/dalvikvm(29489): Rejecting re-init on previously-failed class Lcom/bartat/android/ui/task/AsyncTaskExt; v=0x0
09-28 12:53:45.748 D/AndroidRuntime(29489): Shutting down VM
09-28 12:53:45.755 I/am_crash( 1146): [29489,com.bartat.android.secret,572996,java.lang.NoClassDefFoundError,com.bartat.android.ui.task.AsyncTaskExt,CommandsActivity.java,726]
09-28 12:53:45.755 I/am_finish_activity( 1146): [1079225264,123,com.bartat.android.secret/.CommandsActivity,crashed]
09-28 12:53:45.750 W/dalvikvm(29489): threadid=1: thread exiting with uncaught exception (group=0x40015560)
09-28 12:53:45.752 E/AndroidRuntime(29489): FATAL EXCEPTION: main
09-28 12:53:45.752 E/AndroidRuntime(29489): java.lang.NoClassDefFoundError: com.bartat.android.ui.task.AsyncTaskExt 
```

此问题无法通过重新安装应用程序来解决。

例如，如果我将其重命名`AsyncTaskExt`为`AsyncTaskExt2`，那么它会再次工作很长时间。但几周/几个月后，它又开始出现这个错误。

这是什么意思？为什么会抛出它以及如何在不重命名类的情况下避免它？

请帮帮我，塔马斯

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2017-07-24T17:49:41.247

仅当启用**即时运行时**才会发生在我身上。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-03-02T15:28:20.163

当由于各种原因无法加载类时会发生这种情况。不幸的是，新的 ART 运行时没有记录足够的信息来说明其原因。如果您可以使用 Dalvik 获取较旧的 android 设备，您会看到不同的日志记录，通常更准确地揭示攻击。

上次我现场看到它时，我不得不处理一个实际上没有包含或列出其依赖项的 JAR 文件，因此将正确的依赖库添加到 gradle 文件中解决了它。最大的问题是确定哪些类丢失了——dalvik 日志/反编译/文档可能会告诉你。

无法在整个 Java 语言中加载类还有许多其他原因，因此这个特定原因可能并不普遍适用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-16T13:29:21.840

在构建另一个启用了 New Relic 分析的项目后，我开始遇到这个问题。Gradle 守护程序随后缓存了 New Relic 代理，它无法启动其他应用程序。

有帮助的是

```
./gradlew --stop 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-09T07:01:53.107

您必须在 AndroidManifest.xml 中添加使用库

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-02T19:06:33.967

您确定这是运行应用程序后遇到的第一个异常吗？之前可能有一些未捕获的异常。

# iphone - 水平实现 UIPickerView？

> ID：12696562
> 
> 赞同：3
> 
> 时间：2012-10-02T19:02:05.927
> 
> 标签：iphone, xcode, uipickerview

a 的默认滚动设置`UIPickerView`设置为垂直。可以`UIPickerView`横向实现吗？

如果是这样，您能否给我看一个样本或指导我在哪里找到有用的文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:12:56.067

您可以使用[CPPickerView](https://github.com/cbpowell/CPPickerView) .. UIPickerView 的自定义、可配置、水平版本（基于旋转轮或老虎机隐喻），包含表格单元实现。最初用于压缩多选项设置所需的空间/行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T12:39:47.143

**在 .h 文件中**

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UIPickerViewDelegate> {
    IBOutlet UIPickerView *pickerView;
    NSMutableArray *itemArray;
    IBOutlet UILabel *myLabel;
}

@property (nonatomic, retain)  UIPickerView *pickerView;
@property (nonatomic, retain)  UILabel *myLabel;

@end 
```

**在 .XIB 文件中**

> 拖放 UIPickerView 和一个 UILable 还将“delegate”和“Referencing Outlet”都连接到 FileOwner。

**在 .M 文件中**

```
#import "ViewController.h"

@implementation ViewController

@synthesize pickerView, myLabel;

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    self.pickerView.delegate = self;
    self.pickerView.showsSelectionIndicator =YES;
    self.pickerView.backgroundColor = [UIColor blackColor];

    CGAffineTransform rotate = CGAffineTransformMakeRotation(M_PI_2);
    rotate = CGAffineTransformScale(rotate, 0.1, 0.8);
    [self.pickerView setTransform:rotate];  

    self.pickerView.center = CGPointMake(160,75);

    UILabel *theview[20]; 
    CGAffineTransform rotateItem = CGAffineTransformMakeRotation(-M_PI_2);
    rotateItem = CGAffineTransformScale(rotateItem, 1, 10);

    for (int i=0;i<20;i++) {  
        theview[i] = [[UILabel alloc] init];
        theview[i].text = [NSString stringWithFormat:@"%d",i];
        theview[i].textColor = [UIColor blackColor];
        theview[i].frame = CGRectMake(0,0, 100, 100);
        theview[i].backgroundColor = [UIColor clearColor];
        theview[i].textAlignment = NSTextAlignmentCenter; //UITextAlignmentCenter is deprecated.
        theview[i].shadowColor = [UIColor whiteColor];
        theview[i].shadowOffset = CGSizeMake(-1,-1);
        theview[i].adjustsFontSizeToFitWidth = YES;

        UIFont *myFont = [UIFont fontWithName:@"Georgia" size:15];
        [theview[i] setFont:myFont];

        theview[i].transform = rotateItem;
    }

    itemArray = [[NSMutableArray alloc] init];

    for (int j=0;j<20;j++) { 

        [itemArray addObject:theview[j]];

    }

}

#pragma mark -
#pragma mark Picker View Methods

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)thePickerView {

    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)thePickerView numberOfRowsInComponent:(NSInteger)component {

    return [itemArray count];
}

- (UIView *)pickerView:(UIPickerView *)thePickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view
{

    return [itemArray objectAtIndex:row];

}

- (void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {

    myLabel.text = [NSString stringWithFormat:@"SELECTED: %d", row+1];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

# api - youtube live api 事件标记、视频剪辑、前置广告

> ID：12696564
> 
> 赞同：1
> 
> 时间：2012-10-02T19:02:07.570
> 
> 标签：api, events, youtube, live, tagging

我想使用 YouTube Live 流式传输嵌入在我的网站中的实时视频。我还希望能够使用 API 根据时间标记该视频中的事件，然后在时间戳之前 x 秒和之后 y 秒自动生成剪辑以仅显示该事件。我还想在直播和剪辑中发布我自己的前贴片广告（并且能够在适当的时间在直播期间播放广告）。任何/所有这一切都可能吗？

# sql-server-2008 - SQL Server 使用标识插入生成脚本

> ID：12696567
> 
> 赞同：2
> 
> 时间：2012-10-02T19:02:46.770
> 
> 标签：sql-server-2008, identity-insert, generate-scripts

生成数据库脚本时，我正在编写要迁移到不同环境的数据脚本。脚本生成中是否有一个设置可以启用以自动打开/关闭 IDENTITY_INSERT，这样我就不必在生成的脚本中手动浏览每个表并进行设置？我正在使用 SSMS，我想通过 SSMS 执行此操作。

这是我得到的：

```
INSERT my_table (my_table_id, my_table_name) VALUES (1, 'val1');
INSERT my_table (my_table_id, my_table_name) VALUES (2, 'val2'); 
```

这就是我想要的：

```
SET IDENTITY_INSERT my_table ON
INSERT my_table (my_table_id, my_table_name) VALUES (1, 'val1');
INSERT my_table (my_table_id, my_table_name) VALUES (2, 'val2');
SET IDENTITY_INSERT my_table OFF 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-12-25T13:35:17.933

我知道这是一个老问题，但是对于 SSMS，已接受的答案和对已接受答案的评论并不完全正确。

当使用Sql Server Management Studio (SSMS) 中的**生成脚本任务**`set identity_insert`生成包含数据的脚本时，将为具有标识列的表包含语句。

在对象资源管理器中：任务 -> 生成脚本 -> [所有表*或*选定表] -> 高级 -> [带有数据*或*数据的架构]

*   如果要从中编写数据脚本的表**没有**具有标识属性的列，则不会生成`set identity_insert`语句。

*   如果要从中编写数据脚本的表**确实**有一个带有标识属性的列，它将生成`set identity_insert`语句。

使用 SSMS 2008 和 SSMS 2012 测试和确认

在 OP 的情况下，我猜测源表没有`my_table_id`在源表中设置标识属性，但`my_table_id`在目标表中设置了标识属性。

要获得所需的输出，请将表更改为脚本数据从必须`my_table_id`具有标识属性。

本文深入解释了执行此操作的步骤（不使用 SSMS 中的设计器）：[为现有 SQL Server 列添加或删除标识属性 - Greg Robidoux](https://www.mssqltips.com/sqlservertip/1397/add-or-drop-identity-property-for-an-existing-sql-server-column/)

*   使用标识属性创建一个新列

*   将数据从现有的 id 列转移到新列

*   删除现有的 id 列。

*   将新列重命名为原始列名

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T19:31:25.317

你没有说你使用什么工具来生成你的脚本，但是如果你有一个像 Red-Gate Data Compare 这样的工具，它会为你生成这些语句，如果你在比较中包含自动增量字段。我不知道 SSMS 有任何这样的选项。

如果您拥有 Visual Studio Premium 或 Ultimate 版，那么您还可以访问具有数据比较和同步选项的 DBPro (Database Professional)。我相信这也会为您生成 IDENTITY_INSERT 语句。

# hadoop - Hadoop任务分配

> ID：12696572
> 
> 赞同：2
> 
> 时间：2012-10-02T19:03:15.990
> 
> 标签：hadoop, task

我对 Hadoop 任务分配感到困惑。假设我们有 5 个输入数据 D1,D2,D3,D4,D5 那么我们有 5 个作业 J1,J2,J3,J4,J5 并且作业 J1 的输入数据是 D1 等等。现在，如果 D1 分成 4 个块，并且这些块沿着数据中心分布，那么 J1 也被分解为任务（map 和 reduce），现在我们为 J1 有多少个 map 和 reduce 任务？数据局部性如何保存？是不是说mapTask1正好需要D1的一个数据块？你能给我一个很好的解释来源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:49:32.013

如果 D1 作为 4 个块存储在 HDFS 中，并且您用于读取文件的输入格式可以将文件拆分（例如 gz 压缩文件不可拆分），那么您将获得 4 个使用 D1 作为作业的映射任务输入。

`mapred.min.split.size`您可以通过修改和配置属性来增加/减少映射任务的数量`mapred.max.split.size`（再次假设您的输入文件是可拆分的，并且您的输入格式也支持它）。

至于数据局部性，当提交作业时，输入文件（D1）的块的位置是从名称节点获取的，并且为运行您的作业而创建的地图任务保留此信息（D1，块0，位于在 node1 中，称为“拆分”信息）。

当作业跟踪器开始安排您的任务时，它将检查哪些任务跟踪器具有空闲映射槽，然后确定（如果可能）您的作业的哪些任务具有拆分，其输入数据块对于任务跟踪器是“本地的”。

reduce 任务的数量由您来配置。

# html - 为什么我的侧边栏被推到内容下方？

> ID：12696580
> 
> 赞同：2
> 
> 时间：2012-10-02T19:03:26.697
> 
> 标签：html, css

我正在尝试使用 HTML 和 CSS 设置模板，但我的侧边栏有问题。它似乎被推到了我的内容之下，尽管它应该是在左边。我想不通为什么？有没有人有什么建议？

**示例：http:** [//jsfiddle.net/zDdfn/](http://jsfiddle.net/zDdfn/)

HTML：

```
<head>
<title>working</title>

<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="container"> 

    <div id="banner">  </div> <!-- End banner div -->

    <div id="navcontainer">     
        <ul id="navlist">
            <li><a href="index.php">HOMEPAGE</a></li>
            <li><a href="about.php">ABOUT</a></li>
            <li><a id="current" href="index.php">HOMEPAGE</a></li>
            <li><a href="index.php">HOMEPAGE</a></li>
        </ul>
    </div> <!-- End navcontainer div -->

    <div id="content">main content
     </div> <!-- End content div -->

    <div id="sidebar"> sidebar content
    </div> <!-- End sidebar div -->

    <div id="footer"> foooter </div> <!-- End footer div -->

</div> <!-- End container div -->

</body> 
```

和 CSS

```
html, body {
    height: 100%; /* Required */
    }

body {
    margin : 0;
    padding : 0;

    font : 75% "Trebuchet MS", verdana, arial, tahoma, sans-serif;
    line-height : 1.8em;
    color : #000000;
    background : #F5F5FF; 
    }

#container {

    position: relative;
    min-height: 100%;
    width : 800px;
    margin : 0 auto 0 auto;
    border-style: solid;
    border-width:1px;
    background : #FFFFCC;
    }

#banner {

    color : #000000;
    border-style: solid;
    border-width:1px;
    height : 150px;
    background : #fff
    }    

#content {
    min-height: 100%;
    float:right
    padding : 10px;
    margin-left : 200px;
    margin-bottom : 10px;
    color : #666;
    background : #F5EBCC;
    border-left-style:dotted;
    border-left-color:#8F8F00;
    border-bottom-style:dotted;
    border-bottom-color:#8F8F00;
    }

#sidebar {

    float : left;
    width : 20px;

    padding : 10px;

    color : #000000;

    border-style: solid;
    border-width:1px;
    }

#footer {
    clear:both;
    position:relative;
    bottom: 0;
    width: 800px;
    background : #FFFFCC;
    } 

#navcontainer {
    background:#E0E066;

    }

#navlist {
    list-style: none;   /* list-style: none removes bullets */
    margin: 0px;
    padding : 0.5em 0;
    }

#navlist li {
    display: inline;
    margin : 0;
    }

#navlist li a {
    padding : 0.5em 0.5em;
    margin: 0;
    color : #000;
    background : #B8B800;
    text-decoration : none;
    }

#navlist li a:hover {
    color : yellow; 
    background : #8F8F00 url(img/menu_arrow.gif) bottom center no-repeat;
    }

#navlist li a#current {
    color :  #fff;
    background : #8F8F00 url(img/menu_arrow.gif) bottom center no-repeat;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:06:35.730

在 HTML 中切换 #content 和 #sidebar div 标签的顺序将解决此问题，因为您使用的是相反的浮动技术：http: [//jsfiddle.net/vrdZZ/](http://jsfiddle.net/vrdZZ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:11:50.267

#content 规则中的浮动后缺少一个分号。

# licensing - 软件许可方案

> ID：12696581
> 
> 赞同：2
> 
> 时间：2012-10-02T19:03:28.713
> 
> 标签：licensing, rsa, public-key-encryption

我设计了以下机制，以便在不直接连接到服务器的情况下授权软件，看起来很简单，但我没有发现任何严重的缺陷：

我计划使用非对称加密，以便将消息从 1 个服务器（许可证服务器）发送到 n 个客户端（安装该软件的 n 个计算机）

1.  客户端发送（例如，通过邮件）有关计算机的一些信息（MAC 地址、机器名称、您命名）

2.  在许可证服务器上，这些信息使用安全性良好的公共（不那么公共）RSA 密钥进行加密，这个加密的有效负载就是许可证。

3.  加密的许可证被发送到客户端

4.  当软件启动时，它会检查许可证文件，它能够确保使用每个版本的软件附带的相应 RSA 私钥使用服务器密钥对有效负载进行加密。

5.  许可证解密后，软件会检查它是否在授予许可证的同一台机器上运行。

    在我看来，没有人能够在没有访问许可证服务器 RSA 密钥的情况下伪造加密的有效负载。

当然，也有可能是许可证被盗，然后软件在模拟正版客户端机器的虚拟机中启动，或者软件可能被反汇编以拔掉许可证检查。

但是这个方案足够好，还是我在这方面完全天真？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T02:05:51.033

这是一个不错的方案，尽管您确定您希望*客户端*拥有私钥而服务器拥有公钥吗？除非您每次安装都生成一个密钥对，否则不应该反过来吗？

方案很简单，但实用吗？如果您的目标是防止您的应用程序被随意破解，那么可以使用同样有效的更简单的解决方案。如果您的目标是防止破解者运行您的应用程序，那么很可能（a）您不会成功，并且（b）您的程序不够重要，不值得关注。

当简单地对二进制文件进行十六进制编辑以将许可证检查代码更改为 NOP 几乎肯定会正常工作时，为什么有人会试图攻击许可证方案的加密部分？

如果我是您，我会重新考虑许可策略及其对您的产品及其成功的重要性。

# perl - perl 如何删除文件的最后 10 行

> ID：12696584
> 
> 赞同：2
> 
> 时间：2012-10-02T19:03:44.973
> 
> 标签：perl

我将总行数作为用户输入，然后从文件中删除这些行数。

我看到了这个 learn.perl.org/faq/perlfaq5.html#How-do-I-count-the-number-of-lines-in-a-file- 然后我厌倦了下面的简单逻辑。

**逻辑：**

1.  获取总行数
2.  减去用户输入的数字
3.  打印线条

**这是我的代码：**

```
#!/usr/bin/perl -w
use strict;

open IN, "<", "Delete_line.txt"
    or die " Can not open the file $!";
open OUT, ">", "Update_delete_line.txt" 
    or die "Can not write in the file $!";

my ($total_line, $line, $number, $printed_line);

print"Enter the number of line to be delete\n";
$number = <STDIN>;

while ($line = <IN>) {

    $total_line = $.;  # Total number of line in the file
}

$printed_line = $total_line - $number;

while ($line = <IN>) {

    print OUT $line unless $.== $printed_line;      
} 
```

好吧，我既没有收到任何代码错误，也没有任何输出？为什么我只是不知道。

任何人都可以给我一些建议。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-02T19:51:27.773

对大文件有效的 Perl 解决方案需要使用[File::ReadBackwards](http://search.cpan.org/perldoc?File%3a%3aReadBackwards)

```
use File::ReadBackwards qw( );

my $num_lines = 10;
my $qfn = 'file.txt';

my $pos = do {
   my $fh = File::ReadBackwards->new($qfn)
      or die $!;
   $fh->readline() for 1..$num_lines;
   $fh->tell()
};

truncate($qfn, $pos)
   or die $!; 
```

*   这不会两次读取整个文件（与 OP 的方法不同）。
*   这不会读取整个文件（与[Tie::File](http://search.cpan.org/perldoc?Tie%3a%3aFile)解决方案不同）。
*   这不会将整个文件读入内存。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T19:20:28.597

另一种方法是使用[Tie::File](https://metacpan.org/module/Tie::File)

```
#!/usr/bin/env perl
use strict;
use warnings;
use Tie::File;
tie my @lines, 'Tie::File', 'myfile' or die "$!\n";
$#lines -= 10;
untie @lines; 
```

这样做的好处是在执行操作时**不会**将文件加载到内存中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-02T20:00:20.940

这是一个通过流并打印除最后*n*行之外的所有行的解决方案，其中*n*是命令行参数：

```
#!/usr/bin/perl

my @cache;
my $n = shift @ARGV;

while(<>) {
    push @cache, $_;
    print shift @cache if @cache > $n;
} 
```

或单行版本：

```
perl -ne'BEGIN{$n=shift@ARGV}push@c,$_;print shift@c if@c>$n' NUMBER 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-02T19:07:38.460

从 IN 读完后，您必须重新打开它或`seek IN, 0, 0`重置它的位置。您还必须`$.`再次设置为零。

此外，最终条件应更改为，`unless $. > $printed_line`以便您跳过所有超过阈值的行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T19:21:44.773

“更有趣”的答案：使用[`Tie::File`](http://p3rl.org/Tie%3a%3aFile)！

```
use strict;
use warnings;

use Tie::File;
tie my @file, 'Tie::File', 'filename' or die "$!";

$#file -= 10; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-02T19:53:41.353

您可以只缓冲最后 10 行，然后不打印剩余的 10 行。

```
use English qw<$INPLACE_EDIT>;

{   local @ARGV         = $name_of_file_to_edit;
    local $INPLACE_EDIT = '.bak';
    my @buffer;
    for ( 1..$num_lines_to_trim ) { 
        push @buffer, <>;
    }

    while ( <> ) { 
        print shift @buffer;
        push @buffer, $_;
    }
} 
```

你也可以这样做[`File::Slurp::edit_file_lines`](http://search.cpan.org/perldoc?File%3a%3aSlurp#edit_file,_edit_file_lines)：

```
my @buffer;
my $limit_reached = 0;
edit_file_lines {  
    push @buffer, $_;
    return ( $limit_reached ||= @buffer > $num_lines_to_trim ) ? shift @buffer
         :                                                       ''
         ;
} $name_of_file; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-02T19:11:20.727

只需反向读取文件并删除前 n 行：-

```
open my $filehandle, "<", "info.txt";
my @file = <$filehandle>;
splice(@file, -10);
print @file; 
```

注意：这会将整个文件加载到内存中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-02T19:15:06.730

```
my $num_lines = 10;
my $qfn       = 'file.txt';

system('head', '-n', -$num_lines, '--', $qfn);
die "Error" if $?; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-02T19:11:07.783

使用 C 很容易`for`：

```
#!/usr/bin/perl -w
use strict;

open(my $in,"<","Delete_line.txt") or die "Can not open the file $!";
open(my $out,">","Update_delete_line.txt") or die"Can not write in the file $!";

print"Enter the number of lines to be delete\n";
my $number=<STDIN>;

my @file = <$in>;

for (my $i = 0; $i < $#file - $number + 1; $i++) {
    print $out $file[$i];
}

close $in;
close $out; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-28T17:19:28.817

```
 #
  # Reads a file trims the top and the bottom of by passed num of lines
  # and return the string 
  # stolen from : http://stackoverflow.com/a/9330343/65706
  # usage :       
  # my $StrCatFile = $objFileHandler->ReadFileReturnTrimmedStrAtTopBottom ( 
  #       $FileToCat , $NumOfRowsToRemoveAtTop , $NumOfRowsToRemoveAtBottom) ; 
  sub ReadFileReturnTrimmedStrAtTopBottom {

     my $self = shift ; 
     my $file = shift ; 
     my $NumOfLinesToRemoveAtTop = shift ; 
     my $NumOfLinesToRemoveAtBottom = shift ; 

     my @cache ; 
     my $StrTmp = () ; 
     my $StrReturn = () ; 
     my $fh = () ; 

     open($fh, "<", "$file") or cluck (   "can't open file : $file for reading: $!" ) ;
     my $counter = 0;
     while (<$fh>) {
         if ($. >= $NumOfLinesToRemoveAtTop + 1) {
             $StrTmp .= $_ ;
         }
     } 
     close $fh;

     my $sh = () ; 
     open( $sh, "<", \$StrTmp) or cluck(   "can't open string : $StrTmp for reading: $!" ) ;
     while(<$sh>) {
         push ( @cache, $_  ) ;
         $StrReturn .= shift @cache if @cache > $NumOfLinesToRemoveAtBottom;
     }
     close $sh ; 
     return $StrReturn ; 
  } 
  #eof ReadFileReturnTrimmedStrAtTopBottom
  # 
```

# facebook-opengraph - 获得批准的开放图形操作 - 将 publish_stream 更改为 publish_action

> ID：12696588
> 
> 赞同：2
> 
> 时间：2012-10-02T19:03:57.877
> 
> 标签：facebook-opengraph, publish

更新代码：

我有一个待批准的开放图表操作。我收到了来自 Facebook 的回信，内容是这样的：

您的代码当前配置为发布流故事。您必须更改代码，以便当测试用户触发操作时，它会生成一个开放的图表故事。请进行适当的更改并重新提交。

我遵循了所有关于发布操作的教程，并且我的测试都成功发布到了我的应用时间线。问题是我的应用程序（这是一个页面选项卡）已经启动并正在运行 - 所以我想更新它并添加这些新操作。

Facebook 是在查看我当前页面选项卡中的代码（使用 fmbl posttofeed 共享按钮），还是查看我使用新操作执行的测试？有人能对此有所了解吗？

这是我在测试页面中用于发布操作的代码：

```

      函数 postShare()
      {
          FB.api(
            '/我/命名空间：共享',
            '邮政'，
            {照片：'https://domain.com'}，
            功能（响应）{
               if (!response || response.error) {
                  alert('发生错误：' + response.error);
               } 别的 {
                  alert('分享成功！Action ID: ' + response.id);
               }
            });
      }

          // 异步加载 SDK
          （函数（d）{
             var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
             if (d.getElementById(id)) {return;}
             js = d.createElement('脚本'); js.id = id; js.async = true;
             js.src = "//connect.facebook.net/en_US/all.js";
             ref.parentNode.insertBefore(js, ref);
           }（文档））;

          // 加载时初始化 SDK
          window.fbAsyncInit = function() {
            FB.init({
              appId : 'APP ID', // 应用 ID
              channelUrl : '//频道 url', // 频道文件的路径
              status : true, // 检查登录状态
              cookie : true, // 启用 cookie 以允许服务器访问会话
              xfbml : true // 解析 XFBML
            });

            // 监听并处理 auth.statusChange 事件
            FB.Event.subscribe('auth.statusChange', function(response) {
              如果（response.authResponse）{
                // 用户已验证您的应用并登录到 Facebook
                FB.api('/me', function(me){
                  如果（我的名字）{
                    document.getElementById('auth-displayname').innerHTML = me.name;
                  }
                })
                document.getElementById('auth-loggedout').style.display = 'none';
                document.getElementById('auth-loggedin').style.display = 'block';
              } 别的 {
                // 用户尚未验证您的应用，或未登录 Facebook
                document.getElementById('auth-loggedout').style.display = 'block';
                document.getElementById('auth-loggedin').style.display = 'none';
              }
            });

            // 响应点击登录和注销链接
            document.getElementById('auth-loginlink').addEventListener('click', function(){
              FB.login();
            });
            document.getElementById('auth-logoutlink').addEventListener('click', function(){
              FB.logout();
            });
          }

          功能登录用户（）{    
         FB.login(function(response) { }, {scope:'publish_actions, email'});     
         }

```

我看不出这是如何配置为发布流故事而不是开放图故事的？任何人都可以帮助解决这个问题，这让我发疯了，并且找不到任何东西表明我正在做的不是发布行动。

但是，如果当他们查看我的操作时，他们正在查看我的实时应用程序中的代码，那么它当然没有设置为触发任何打开的图表故事——因为它们还没有被批准！

任何帮助将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:27:35.900

您的问题并不完全清楚，但`publish_actions`和`publish_stream` [Permissions](https://developers.facebook.com/docs/authentication/permissions/)都允许您发布 Open Graph 操作。但是，该`publish_stream`权限涵盖了许多其他发布类型，也是可选的，如果用户删除该权限，您将无法为这些用户发布 OG 操作。

更新您的身份验证代码以请求`publish_actions`代替/以及

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:38:58.550

终于让它工作了。步骤： 1.添加“Publish_action”权限 2.在FB Graph API Explorer上测试成功 3.修改我的Javascript（与`postShare()`上面的方法类似的代码）

```
FB.api('/me/namespace:purchase',
       'post',
       { product: 'samples.ogp.me/367683346642550'; },
       function(response) {
           if (!response || response.error) {
               alert('Error occured'+response.error);
           } else {
               alert('Post was successful! Action ID: ' + response.id);
           }
       }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-28T22:31:01.737

基本上，当您使用开放式图表故事时，您不能将内容发布到相册或任何其他类型的帖子。例如，以下是不允许的：

```
 $data = $facebook->api('/me/photos', 'post', $args);//disallowed                
            $facebook->api(
              'me/invig-test:share',
              'POST',
              array(
                    'app_id' => $configParam['appId'],
                    'type' => "test:photo",
                    'photo' => "http://samples.ogp.me/574859819237737",                   
                    'title' => "a photo",
                    'image[0][url]'=>"http://www.testapp.com/".$imgFile,
                    'image[0][user_generated]'=>'true',
                    'message' => $comments,                   
                    'fb:explicitly_shared'=>true,
                )
              ); 
```

而是只做“分享”：

```
 $facebook->api(
              'me/invig-test:share',
              'POST',
              array(
                    'app_id' => $configParam['appId'],
                    'type' => "test:photo",
                    'photo' => "http://samples.ogp.me/574859819237737",                   
                    'title' => "a photo",
                    'image[0][url]'=>"http://www.testapp.com/".$imgFile,
                    'image[0][user_generated]'=>'true',
                    'message' => $comments,                   
                    'fb:explicitly_shared'=>true,
                )
              ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T15:07:30.530

Facebook 测试人员需要在您的生产服务器上运行的实际代码。他们将使用 Facebook 测试用户来执行您在提交操作时描述的所有步骤。他们不会使用已经发布的故事。他们可能会使用“Open Graph Test User”。

您在这里有两个选择：

1.  尝试向每个用户发布操作，如果不起作用，请发布流（以便测试用户发布操作，但您的真实用户使用旧代码发布）

    - - 或者 - -

2.  确定用户是否是测试用户（通过记录测试用户 ID）并向他提供新代码。

无论如何，真正的动作流必须在生产服务器上是可执行的。

# php - PHP对象：产品列表上的循环

> ID：12696592
> 
> 赞同：0
> 
> 时间：2012-10-02T19:04:07.633
> 
> 标签：php, list, class, object, loops

我有一个快速的：我是 PHP 对象的初学者，我有一个包含我所有产品的产品表。

我的产品也有一个类（有一个构造函数，用我的产品的所有参数填充我的实例）。

假设我想要一个我所有产品的列表，我应该为我的产品列表创建一个单独的类，还是创建一个创建我的产品类的新实例的函数？

我现在并没有真正得到它的好处，因为如果我必须执行与我的类查询完全相同的查询，那没用？

谢谢你的提示！

**更新**

谢谢各位！这对我来说仍然很复杂，但这就是我所做的（谈论书籍）试图遵循你的建议。

我创建了一个 DAO。在这个 DAO 中，我有两个静态函数返回书籍列表或一本书，以及一个创建书籍对象的静态函数。

使用这种方法，我仍然有 2 个查询（一个用于列表，一个用于单本书）。我有一种感觉这是错误的，但任何帮助表示赞赏:)

```
class bookDAO {

    public static function getBooks() {
        $books = array();
        $db = databaseConnection::getInstance();
        $query = $db->query("SELECT * FROM books");
        while($row = $query->fetchObject()) {
            $book = self::createBookFromRow($row);
            $books[] = $book;
        }
        return $books;
    }

    public static function getBook($id){
        $db = databaseConnection::getInstance();
        $query = $db->prepare("SELECT * FROM books WHERE id=:id");
        $query->execute(array(":id"=>$id));
        $row = $query->fetchObject();
        $book = self::createBookFromRow($row);
        return $book;
    }

    private static function createBookFromRow($row) {
        $book = new book($row);
        return $book;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T19:05:22.887

在这种情况下，创建对象数组很常见。

例如：

```
$products = array();
foreach($results as $result) {
  $products[] = new Product($result);
}
print_r($products); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T19:15:01.213

您可以简单地添加一个数组。或者，如果您想向产品列表中添加一些方法，您可以实现如下内容：

```
class Products
{
    private $productFactory;

    private $products = array();

    public function __construct(ProductFactory $productFactory) {
        $this->productFactory = $productFactory;
    }

    public function addProduct($product)
    {
        $this->products[] = $this->productFactory->build($product);
    }

    public function addProducts($products)
    {
        foreach ($products as $product) {
            $this->addProduct($product);
        }
    }

    // do soemthing with all products
    public function changeProducts()
    {
        foreach($this->products as $product) {
            $product->changeSpec('new spec value');
        }
    }
}

class Product
{
    private $someSpec;

    public function __construct($spec)
    {
        $this->someSpec = $spec;
    }

    public function changeSpec($spec) {
        $this->someSpec = $spec;
    }
}

class ProductFactory
{
    public function build($spec) {
        return new Product($spec);
    }
}

// build the productslist object
$productFactory = new ProductFactory();
$products = new Products($productFactory);
$products->addProducts(array(
    'some spec of product1',
    'some spec of product2',
)); 
```

请注意，我手动添加产品，但这也可能是来自某些持久存储机制（例如数据库）的记录集。或者也许更好地注入一些访问数据库以检索产品的类。不要在`Product`/`Products`类中进行任何查询。如果你这样做，你会[紧密耦合](http://en.wikipedia.org/wiki/Coupling_%28computer_programming%29)某些东西（数据库），这使得测试变得非常困难。除此之外，您还违反了[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)。

请注意，我创建了一个工厂来创建`Product`该类的新实例。这样，您就没有将`Product`类与`Products`类紧密耦合。如果您想进行单元测试，这使得模拟 Product 类变得更加容易。

**更新**

你可以对这个类做的另一件事`Products`是让它实现[`Iterator`接口](http://php.net/manual/en/class.iterator.php)，这样你也可以根据需要循环遍历产品。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T19:08:26.893

您的 Product 类不应该执行任何查询，将其分成 DAO 例如`ProductDAO`类

```
class ProductDAO
{
  function static getProducts()
  {
     //Your query here: PDO, MySQLi, MySQL etc
    $products = array(); //to store array of products

    while($row = mysql_fetch_assoc($result))
    {
       $product = createProductFromRow($row);

       $products[] = $product;
    }

    return $products;
}

   private static function createProductFromRow($row)
   {
   $product = new Product();
   $product->setId($row["id"]);
   $product->setName($row["Name"]);
   //etc

   return $product; 
   }
} 
```

从您的页面

```
 $products = ProductDAO::getProducts();

  foreach($products as $p)
  {
     echo ($p->getName() + '<br />');
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T19:17:24.317

### 将保存所有产品引用的产品类

```
class Products {

    static private $store = array();

    static public function save(Product $object)
    {
        self::$store[] = $object;
    }

    static public function getAll()
    {
        return self::$store;
    }

} 
```

### 将每个 Product 引用保存到 Products 类

最简单的方法是在您的 Product 构造函数中执行此操作。

```
# your Product class
class Product {

    public function __construct()
    {
        # your stuff here..

        # save reference of current Product to the Products
        Products::save($this);
    }

} 
```

### 您对产品的初始化

这仅用于测试，请在此处使用您的逻辑来初始化 Product 对象。

```
new Product;
new Product;
new Product; 
```

### 循环遍历所有产品

```
foreach (Products::getAll() as $product) {
    var_dump($product);
} 
```

# c++ - C ++中双变量/计算的小数点后数字

> ID：12696597
> 
> 赞同：0
> 
> 时间：2012-10-02T19:04:26.797
> 
> 标签：c++, double, latitude-longitude, precision, digit

> **可能重复：**
> [以更精确的方式将数字写入文件 - C++](https://stackoverflow.com/questions/6733046/writing-numbers-to-a-file-with-more-precision-c)

在将纬度/经度值存储`double`为时，我一直以包含修剪数字的变量结束 - 例如 47.2792 表示 47.279229 和 8.42432 表示 8.424317 - 在变量分配和执行算术期间，使变量保持所有数字而不会丢失的最佳方法是什么操作 - 例如将 0.01098901098 添加到 47.279229 并将其存储为新变量而没有任何精度损失等 -？`setprecision`为流处理这个，但我还没有找到一种方法来作为它的变量/数学对应物。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:30:01.233

该类型`double`在内部 [通常] 存储为二进制浮点。一般来说，十进制值不能精确地表示使用二进制浮点值，尽管通常可以精确地恢复原始十进制值（除了正确数量的尾随零）。在进行计算时，会操纵接近原始值的值，从而引入额外的错误。将十进制小数转换为`double`，使用这些值进行计算并将它们转换回的结果将产生接近预期结果的值，但它不会是准确的。

如果您知道要处理的最大小数位数，则可以将原始值乘以 10 的合适幂，并使用整数算术进行计算。要显示这些值，您只需在适当的位置插入一个小数点。

# c# - 给定网络响应，我如何提取特定部分以进行进一步处理？

> ID：12696599
> 
> 赞同：0
> 
> 时间：2012-10-02T19:04:31.323
> 
> 标签：c#, html, .net-4.0, html-parsing

我有一些代码可以得到网络响应。如何获取该响应并使用其 CSS 类 (class="data") 搜索表？获得表格后，我需要提取某些字段值。例如，在下面的示例标记中，我需要字段#3 和字段#5 的值，因此分别为“85”和“1”。

```
<table width="570" border="0" cellpadding="1" cellspacing="2" class="data">
  <tr>
    <td width="158"><strong>Field #1:</strong></td>
    <td  width="99">1</td>
    <td  width="119"><strong>Field #2:</strong></td>
    <td  width="176">110</td>
  </tr>
  <tr>
    <td width="158"><strong>Field #3:</strong></td>
    <td  width="99">85</td>
    <td  width="119"><strong>Field #4:</strong></td>
    <td  width="176">-259.34</td>
  </tr>
  <tr>
    <td width="158"><strong>Field #5:</strong></td>
    <td  width="99">1</td>
    <td  width="119"><strong>Field #6:</strong></td>
    <td  width="176">110</td>
  </tr>
  <tr>
    <td width="158"><strong>Field #7:</strong></td>
    <td  width="99">12</td>
    <td  width="119"><strong>Field #8:</strong></td>
    <td  width="176">123.23</td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:11:05.430

使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)并[解析](http://en.wikipedia.org/wiki/Parsing)HTML。如果你想用最简单的方法来做，那就去抢它的测试版（[它支持 LINQ](http://htmlagilitypack.codeplex.com/wikipage?title=Examples)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:24:09.740

正如 Randolf 所建议的，使用 HTML Agility Pack 是一个不错的选择。

但是，如果您可以控制 HTML 的格式，也可以进行字符串解析以提取您所追求的值。

将整个 HTML 下载为字符串并搜索字符串 " `<table`" 后跟字符串 "class=\"data\"" 几乎是微不足道的。然后，您可以通过执行类似的字符串操作轻松提取您所追求的值。

我并不是说您应该这样做，因为生成的代码将更难阅读和维护使用 HTML Agility Pack 的代码，但它会为您节省外部依赖，并且您的代码可能会执行得更好。

在我制作的一个 WP7 应用程序中，我开始使用 HTML Agility Pack 来解析一些 HTML 并提取一些值。这工作得很好，但速度很慢。切换到字符串解析机制使我的代码在返回完全相同的结果时快了很多倍。

# spring - 如何在Jsp中显示列表的两个不同值

> ID：12696601
> 
> 赞同：0
> 
> 时间：2012-10-02T19:04:35.043
> 
> 标签：spring, jsp, jstl

下面的代码给了我两个值。97 或 12。

```
<form:input path="revRecov[${loop.index}].trkType" /> 
```

当它是 97 时，我想使用标签包，在标签下方我将显示 4 行。

当它是 12 时，我想使用标签 Pallet，在标签下方我将显示 4 行。我将同时在同一个屏幕上显示两者。

非常感谢任何有关如何在 JSP 中使用它的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:43:23.810

我没有使用`${loop.index}`0 或 1。在这种情况下，因为我们只有 2 行，所以我们可以直接传递索引而不是循环。

```
 <tr><td>Package<form:input path="revRecov[0].trkType"/></td></tr>
<tr><td>Pallet<form:input path="revRecov[1].trkType"/></td></tr> 
```

# wix - 无法将带有空格的 Wix SourceDir 路径发送到自定义操作 ExeCommand

> ID：12696602
> 
> 赞同：0
> 
> 时间：2012-10-02T19:04:37.893
> 
> 标签：wix, wix3.5

当 SourceDir 路径有空格时，我无法传递“[SourceDir]”路径。

例如：SourceDir = "C:\Temp\Setup" 我能够将 "C:\Temp\Setup" 路径发送到自定义操作 SourceDir = "C:\Temp setup\Setup" wix 仅将 "C:\Temp" 传递给自定义动作

```
 ExeCommand="[SourceDir]Setup" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T19:39:24.037

您需要将其括在引号中，如下所示：

```
ExeCommand="&quot;[SourceDir]Setup&quot;" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-21T11:08:33.247

我发现我还必须放入第二组 "s 但带有转义 \

```
&quot;\&quot;[Path with spaces]\&quot;&quot; 
```

我相信这是因为文本在被 wix 编译时被解释，然后在安装时再次被解释。或类似的东西。

谢谢

大卫

# javascript - 通过javascript将文件上传到谷歌云存储

> ID：12696604
> 
> 赞同：1
> 
> 时间：2012-10-02T19:04:41.087
> 
> 标签：javascript, google-cloud-storage

我正在尝试通过`PUT`方法将文件上传到我自己的存储桶，但无法正常工作：

```
function upload(url, data) {
    var pd = new XMLHttpRequest();
    pd['open']('PUT', "http://storage.googleapis.com/" + url, true);
    pd['setRequestHeader']('Content-type', 'text/html');
    pd['setRequestHeader']('x-goog-acl', 'public-read');
    pd['setRequestHeader']('Authorization', 'Bearer *********F0aIu4NbTd6A');
    pd['setRequestHeader']('Content-length', data['length']);
    pd['setRequestHeader']('Connection', 'close');
    pd['send'](data);
}
upload('bucked/index.html','<b>hello</b>'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T01:30:21.543

该错误似乎表明没有为您的存储桶设置[CORS 。](https://developers.google.com/storage/docs/cross-origin)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-04T13:47:38.383

我有类似的问题：

```
request.setRequestHeader('x-goog-acl', 'public-read');
request.setRequestHeader('Authorization', 'Bearer ' + access_token);
request.setRequestHeader("X-File-Name", file.name);
request.setRequestHeader("X-File-Size", file.size);. 
```

1.  设置正确的原点
2.  添加响应头（与您的请求相同）[“授权”，“内容类型”，“x-file-name”，“x-file-size”，“x-goog-acl”]
3.  PUT 和 OPTIONS 方法我在这个[文档上找到了解决方案](https://cloud.google.com/storage/docs/cross-origin#Troubleshooting%20CORS-Related-Problems)

示例 cors.json

```
[
    {
        "origin": ["*", "http://localhost:8080", "https://localhost:8080"],
        "responseHeader": ["authorization", "content-type", "x-file-name", "x-file-size", "x-goog-acl"],
        "method": ["GET", "HEAD", "DELETE", "PUT", "OPTIONS"],
        "maxAgeSeconds": 3600
    }
] 
```

要设置此配置，请使用 gsutil cors set cors.json gs://your_bucket

PS。Connection 和 Content-lenght 不是必需的，JS 会向控制台抛出一些错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T19:22:58.897

如果您能告诉我们 PUT 操作是如何失败的，那将会更有帮助。您是否尝试过上传到 commondatastorage.googleapis.com 而不是 storage.googleapis.com？

# javascript - 从外部 JS 插件重载函数的正确语法

> ID：12696610
> 
> 赞同：0
> 
> 时间：2012-10-02T19:04:55.090
> 
> 标签：javascript, jquery, debugging, object, syntax

我正在使用[引导日期选择器插件](https://github.com/eternicode/bootstrap-datepicker)，我需要`headTemplate`在插件末尾重载对象。

看起来像这样：

```
var DPGlobal = {
        modes: [ ... ],
        isLeapYear: function ( year ) {
             [...]
        },
        [...]

        headTemplate: '<thead>'+
                        '<tr class="datepicker-btn-group">'+
                            '<th class="prev"><div class="dp-btn"><i class="timely-icon-arrow-left"/></div></th>'+
                            '<th colspan="5" class="switch"><div class="dp-btn"></div></th>'+
                            '<th class="next"><div class="dp-btn"><i class="timely-icon-arrow-right"/></div></th>'+
                        '</tr>'+
                    '</thead>',
       contTemplate: '<tbody><tr><td colspan="7" class="grid-picker"></td></tr></tbody>'
}; 
```

所以，诚然，我还在学习 javascript，所以我试图弄清楚为什么下面的代码不能做我想做的事。

首先，我需要检查外部 JS 文件是否已加载并且该函数是否可用，我正在尝试`.load()`使用带有回调的 jQuery 方法来做到这一点。我在`document`目标方面遇到了一些参考错误，我承认对此的最佳实践感到困惑 - 我真的只想说

```
$( 'lib/bootstrap-datepicker/js/bootstrap-datepicker.js' ).load( function() {
 // overwrite/load function 
}); 
```

但这会引发一堆目标/引用错误，因此，我正在尝试以下操作，因为 jQuery 文档表明我需要将要检查的脚本作为调用`.load()`函数的第一个参数而不是目标。这常常让我感到困惑——当我想执行一个全局性的函数并且不引用任何特定的东西（因此`document`引用尝试）时，引用 jQuery 中的东西。

```
$( document ).load( 'lib/bootstrap-datepicker/js/bootstrap-datepicker.js', function() {
    origDPGlobal.headTemplate = DPGlobal.headTemplate;
            DPGlobal.headTemplate = // 'string of HTML for new template';
}); 
```

最后一件事（对不起大家的弹幕），我不明白 headTemplate 最初是如何通过冒号声明的：

```
var DPGlobal = {
    [...],
    headTemplate: '// html string',
    contTemplate: '//html string'
}; 
```

我是否需要像这样将它们重新声明为数组中的原型对象？

```
DPGlobal[headTemplate] = '// new html string';
DPGlobal[contTemplate] = '// new html string'; 
```

非常感谢您帮助新手！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:13:22.053

几件事：

首先，`load`用于将文件的内容加载到元素中。相反，您正在寻找`getScript` [http://docs.jquery.com/Ajax/jQuery.getScript](http://docs.jquery.com/Ajax/jQuery.getScript)

二、以下相同（只是创建对象）：

```
//one way to build an object
var DPGlobal = {
    headTemplate: '// html string',
    contTemplate: '//html string'
};

//another way to build the same object
var DPGlobal = {};
DPGlobal.headTemplate = 'html string';
DPGlobal.contTemplate = 'html string'; 
```

你看，花括号方法最初只是在对象上设置属性，就像你稍后分配它们一样。

第三，您对如何覆盖模板的猜测很接近。如果您在方括号中引用属性，则需要使用字符串：

```
//your way
DPGlobal['headTemplate'] = '// new html string';
DPGlobal['contTemplate'] = '// new html string';

//same as
DPGlobal.headTemplate = '// new html string';
DPGlobal.contTemplate = '// new html string'; 
```

# objective-c - wait_fences：未能收到回复：10004003 错误

> ID：12696614
> 
> 赞同：1
> 
> 时间：2012-10-02T19:05:15.147
> 
> 标签：objective-c, ios, ios5

我有一些在块（完成块）中运行的简单代码。在完成块中，如果块中的进程返回 FALSE，我想显示一个 UIAlertView。作为最佳实践，您不应该在后台线程中调用任何 UI 方法，因此我使用 dispatch_get_main_queue 来显示 UIAlertView。这可以正常工作，除了当按下 UIAlert 视图中的取消按钮时我收到 wait_fences: failed to receive reply: 10004003 错误消息。

代码如下。我不确定该怎么做，据我所知，代码看起来是正确的并且应该可以工作，但显然它存在问题。我希望另一双眼睛可以帮助找到问题。

```
 __block bool theResult;
    [self.mbProgressHUD showAnimated:YES whileExecutingBlock:^{
      theResult = [someClass someMethodThatReturnsTRUEorFALSE];
    } completionBlock:^{
      [self.mbProgressHUD removeFromSuperview];
      if (theResult) {
        dispatch_async(dispatch_get_main_queue(), ^{
          UIAlertView *theAlert....
          [theAlert show];
        });
      };
    }]; 
```

除非在 UIAlert 中选择了 OK 按钮，否则一切似乎都可以正常工作。我收到 wait_fences: failed to receive reply: 100040003 错误消息。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:14:28.733

`removeFromSuperview`直接影响视图层次结构，这算作触摸 UI。您无法从后台线程触摸 UI。您还需要放入`[self.mbProgressHUD removeFromSuperview];`主队列。

# ios - 使用搜索栏让第一响应者辞职

> ID：12696618
> 
> 赞同：2
> 
> 时间：2012-10-02T19:05:49.967
> 
> 标签：ios, xcode

我在我的 .xib 中创建了一个 UI 搜索栏，并将其连接到委托，并将其连接到 .h 文件/.m 文件。我想知道在输入搜索栏时是否可以通过按回车键来关闭键盘。我知道如何使用文本字段来做到这一点，但我似乎无法通过搜索栏实现它。

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T19:22:17.133

确保您的 uisearchbar 已连接到您的视图委托。

之后转到 .h 文件并包含 UISearcBarDelegate

然后转到 .m 文件并实现此代码

```
 -(void)searchBarSearchButtonClicked:(UISearchBar *)searchBar {

    [self.yourSearchBar resignFirstResponder];

 } 
```

希望有帮助...

# java - 如何调试冻结 Windows 的 Java swing 应用程序？

> ID：12696623
> 
> 赞同：0
> 
> 时间：2012-10-02T19:06:08.837
> 
> 标签：java, windows, swing, freeze

我正在开发一个独立的（Swing）Java EE 客户端。应用服务器是 JBoss 6.1.0。有些 Windows 工作站在客户端运行时冻结，有些则不会。32 位和 64 位 Windows 工作站都冻结了，而且，一些 32 位和 64 位 Windows 工作站也可以正常工作。客户端在 Linux 上运行良好，没有任何问题。

我已按照 StackOverflow 的说明进行操作，人们建议使用`-Dsun.java2d.noddraw=true`. 它没有帮助。

最让我困惑的是，一些工作站几乎完全相同——相同的 Windows 版本、相同的图形驱动程序、相同的 JRE，但有些运行良好，有些则不行。

该应用程序大量使用 Preferences API 来存储可停靠的各种位置（来自 Docking Frames 项目），它使用 JBoss 客户端类。

我正在调查对 Windows 注册表的并发访问是否会导致此问题（如果您遇到类似问题，请告诉我）...

第一个猜测是在 GUI 线程的某个地方发生了争用条件，并且 GUI 冻结了。但这只会冻结 GUI，它不应该冻结整个 Windows。

机器一旦冻结，就会响应 ping，但没有 Windows 服务工作。

我将不胜感激*任何*可以帮助我解决问题的提示。

**编辑：**

*   CPU 使用率始终在 10% 左右。
*   线程数永远不会超过 30，但并非所有线程都是守护线程（这包括 AWT 线程、RMI 线程等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:20:48.003

使用 Watchdog试用[EventQueue](http://www.roseindia.net/javatutorials/edt_lockup_detection.shtml)。您在应用程序中安装了一个替代的 EventQueue。看门狗会告诉您哪些事件正在锁定您的 GUI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:57:58.477

原来是ESET。在每台安装了 ESET 的 Windows 机器上，我都遇到了这个问题。显然 ESET 具有默认开启的“协议跟踪”功能。一旦关闭，我们就再也没有这个问题。

# android - 加密 Android 上的 WebView 缓存

> ID：12696628
> 
> 赞同：7
> 
> 时间：2012-10-02T19:06:22.667
> 
> 标签：android, caching, webview

我正在寻找一种能够加密写入 WebView 缓存的所有数据的方法。由于它已被弃用，我试图避免使用 CacheManager。我目前的策略是在写入数据之前捕获所有写入缓存和加密数据的尝试，并捕获来自缓存的所有数据请求，以便我可以在返回请求的数据之前解密数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T20:31:36.653

我想有可能加密你的所有数据。但在使用后清除数据可能是更好的做法和安全性。您不应该使用 CacheManager 是正确的，因为它已被弃用。

Android 安全设计建议清除缓存：

> 如果您的应用程序使用 WebView 访问敏感数据，您可能希望使用 clearCache() 方法删除本地存储的任何文件。服务器端标头（如 no-cache）也可用于指示应用程序不应缓存特定内容。

从这里：http: [//developer.android.com/guide/practices/security.html](http://developer.android.com/guide/practices/security.html)

但是，如果您想加密数据，则必须手动进行。因此，您需要转到 Android 存储其缓存的目录并自行加密。根据您要完成的工作，有不同的方法可以做到这一点。如何以及何时这样做将取决于您。

如果您正在尝试制作 Web 浏览器应用程序，那我就想不通了。最好的方法是为 CookieStore 或 CookieManager 类创建一个包装类，可以在这里找到：

[http://developer.android.com/reference/java/net/package-summary.html](http://developer.android.com/reference/java/net/package-summary.html)

我希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-16T14:51:27.177

目前我正在研究一种能够加密 WebView 缓存的解决方案。根据您的想法，我正在集思广益一些可能的解决方案...

我现在面临的一些可能（或不可能）的解决方案：

**1\. libchromeXX.so的GoT hook读写**

*临*

*   确定性加密和解密缓存。磁盘上不会有任何未加密的数据。

*缺点*

*   非常危险（可能的架构/设备特定问题，可能的 android 版本特定问题，可能的 webview 实现特定问题）

**2\. 用 inotify 监听 fs 变化并加密 jit（及时）。在下一次应用启动时解密**

*临*

*   只有“公共”API

*缺点*

*   一些安卓设备可能不支持“inotify”
*   在运行时可以操作数据（确保仅使用 root / system uid，如果攻击者获得此权限，他可能会在我们的进程中挂接东西）

**3.对所有数据或最后修改/大小组合创建哈希并单独存储**

*临*

*   只有“公共”API
*   也许比加密更快

*缺点*

*   仅验证数据是否被操纵
*   摘要必须存储在某个地方？

**4.不知何故使用ETag机制来验证数据**

我现在研究的不是那么深入，但是 ETag 可能代表特定资源的哈希值，我们可能会验证哈希值是否与服务器提供的摘要匹配。我们将不得不遍历缓存并搜索 ETag 和资源对，或者是否有开箱即用的浏览器功能？我猜不是 ：（

*临*

*   如果浏览器支持，验证可能是开箱即用的

*缺点*

*   可能无法正常工作或不是 ETag 的预期用途

没有任何机制可以验证缓存资源的完整性吗？

# ruby-on-rails-3 - Rails 3 - SimpleForm - 如何获取调用 form.input 时分配的 HTML 输入名称？

> ID：12696639
> 
> 赞同：2
> 
> 时间：2012-10-02T19:07:10.427
> 
> 标签：ruby-on-rails-3, simple-form

我在 Rails 3 中使用 SimpleForm，我有几个嵌套的 simple_fields_for，这是一个非常复杂的表单。

如果在表格中的某个时刻我调用：

```
 form.input :notes 
```

我得到这样的东西：

```
 <input name="job[shifts][shift_id][notes]" /> 
```

这些是我可以调用的会返回该字段名称的东西吗？

就像是：

```
 form.whatever :notes   # Returns "job[shifts][shift_id][notes]" 
```

谢谢！
丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:43:07.730

疯狂调试FormHelper后写了这个助手来做

```
def dom_input_name(form, field_name)
  "#{form.object_name}[#{field_name.to_s.sub(/\?$/,"")}]"
end 
```

像这样调用：

```
dom_input_name(form, :notes) 
```

希望它可以帮助某人

# javascript - 选择字符并换行

> ID：12696641
> 
> 赞同：0
> 
> 时间：2012-10-02T19:07:14.860
> 
> 标签：javascript, jquery, html

`<sup>`我正在寻找使用 jQuery将最后 2 个字符包装在一段文本中。我可以做一个`console.log`返回我想要换行的文本，但它永远不会被换行。我的代码非常简单：

```
// get text of heading
var plansBlockHeading = $('.first .sub .one h4').text();

// filter to last 2 chars
var sup = plansBlockHeading.substr(plansBlockHeading.length-2); 

// Wrap in a <sup></sup>
$(sup).wrap("<sup />"); 
```

我显然错过了一些简单的东西，但我不确定是什么。任何指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:10:36.970

```
var elem = $('.first .sub .one h4'),
    text = elem.text(),
    html = text.slice(0,-2) + '<sup>' + text.slice(-2) + '</sup>';
elem.html(html);​ 
```

[**小提琴**](http://jsfiddle.net/JDauH/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T19:12:22.630

我会使用正则表达式

```
var text = $('.first .sub .one h4').text();
text = text.replace(/^(.*)(.{2,2})$/, "$1<sup>$2</sup>");
$('.first .sub .one h4').html(text); 
```

[http://jsfiddle.net/evPhf/](http://jsfiddle.net/evPhf/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T19:21:52.797

一个惯用的 jQuery 解决方案可能如下所示：

```
$('.first .sub .one h4').html(function(i, html) {
       // make sure there's no whitespace issues
    html = $.trim(html);
    return html.slice(0, -2) + "<sup>" + html.slice(-2) + "</sup>";
}); 
```

`h4` *这假设(真的只是在最后会是一个问题)*里面没有 HTML 标记。

如果您有多个`h4`.

# jquery - 用jquery检测url是否包含语言

> ID：12696642
> 
> 赞同：0
> 
> 时间：2012-10-02T19:07:23.310
> 
> 标签：jquery, url, translation

我需要根据当前语言更改 jquery 滑块中的图像。它将在 url 中显示为 /fr/ 或 /de/ 等。我如何将那部分从 url 中拉出来？我的 jQuery 技能越来越好，但仍然很基础。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:13:05.147

```
if (window.location.href.indexOf('/fr/')!=-1) {
    //French stuff
} 
```

# windows - Windows 上的 wxWidgets：如何从应用程序资源号创建 wxCursor？

> ID：12696647
> 
> 赞同：1
> 
> 时间：2012-10-02T19:07:46.033
> 
> 标签：windows, visual-c++, wxwidgets

我正在使用 wxWidges (native C++) 重写应用程序。我确实有几个通过 Visual Studio 资源编辑器创建的用户定义的鼠标光标。资源编辑器为每个文件创建 MYCURSOR.CUR 之类的文件，其中包含位图和其他信息，并在`app.rc`文件中添加一个条目，例如：

```
IDC_MYCURSOR      CURSOR     "MYCURSOR.CUR" 
```

...并在生成的内容中添加一行`resource.h`：

```
#define  IDC_MYCURSOR 103 
```

编译应用程序时，编译后的资源采用二进制形式，成为`app.exe`. 当不使用 wxWidgets 框架时，可以调用：

```
HCURSOR hCur = LoadCursor(hInstance, MAKEINTRESOURCE(IDC_MYCURSOR)); 
```

`hInstance`具有光标资源可执行文件的应用程序的句柄在哪里（以编译的二进制形式，在`app.exe`.

使用 wxWidgets，我可以创建`wxCursor`该类的实例，并使用光标将文件名传递给它——就像`wxCursor cursor(wxT("MYCURSOR.CUR"));`——它可以工作。但是，`MYCURSOR.CUR`必须找到该文件（例如放置在与该文件相同的目录中`app.exe`）。换句话说，它会忽略附加到`app.exe`. 如果未找到该名称的文件，则不加载光标形状。

有没有什么方法——在 Windows 中——可以让我根据资源编号从资源中加载光标？

我理解，代码应该以可移植的方式编写，例如基于 Unix 的操作系统。是否有任何推荐的方法将 Windows 资源或`MYCURSOR.CUR`文件转换为编译或附加到生成的可执行文件的形式？

**更新**

我在 wxWidget 讨论论坛上发现了 upCASE（2005 年 4 月）[的 .rc [Win] 中 wxCursor](http://forums.wxwidgets.org/viewtopic.php?f=23&t=1426&p=5967&hilit=wxcursor%20windows%20resource#p5967)中的提示：

```
wxCursor( "#1", wxBITMAP_TYPE_CUR_RESOURCE ); 
```

我尝试将它与我的号码一起使用，它似乎可以工作，但我不知道为什么。然后我像这样改进它：

```
#define STR(value) #value
#define RES(value) wxT("#") wxT(STR(value))
...
wxCursor cur(RES(IDC_MYCURSOR), wxBITMAP_TYPE_CUR_RESOURCE); 
```

我认为这很丑陋，可能不是正确的方法。无论如何，你能解释一下吗？

此外，查看内部`c:\wxWidgets-2.9.4\src\msw\cursor.cpp`，我发现采用字符串参数的构造函数将其解释为文件名（至少参数名为`filename`）。编码...

```
switch ( kind )
{
    case wxBITMAP_TYPE_CUR_RESOURCE:
        hcursor = ::LoadCursor(wxGetInstance(), filename.t_str());
        break;
... 
```

建议`LoadCursor()`使用不用于堆栈 Windows 游标的方式（否则第一个参数应为 NULL）。将`::LoadCursor`参数命名为`LPCTSTR lpCursorName`，并且[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648391%28v=vs.85%29.aspx)说

> 要加载的游标资源的名称。或者，该参数可以由低位字中的资源标识符和高位字中的零组成。MAKEINTRESOURCE 宏也可用于创建此值。

我也试过

```
wxCursor cur(MAKEINTRESOURCE(IDC_MYCURSOR), wxBITMAP_TYPE_CUR_RESOURCE); 
```

但它失败了，因为`wxCursor`构造函数应用了字符串转换——见上面`filename.t_str()`。你能对此发表评论吗？

**解决**了（加上一些解释我所面临的......）

早些时候，我只通过 IDE 使用 Windows 应用程序资源，或者我只通过`app.rc`文件直接做一些小事情。在[VZ 的答案](https://stackoverflow.com/a/12704183/1346705)和[ravenspoint 的答案](https://stackoverflow.com/a/12696948/1346705)的帮助下深入挖掘时，我可能会更好地理解它们最初的含义以及微软过去和后来所做的事情，以及我困惑的根源是什么。

首先，当您通过 Visual Studio IDE 创建一些资源（比如鼠标光标）时，它会自动获得一个*数字标识*（比如`103`）。该数字被自动捕获`resource.h`为`#define IDC_MYCURSOR 103`- 即还给出了宏标识符。将有关光标的信息插入到 时使用宏标识符`app.rc`，如下所示：

```
IDC_MYCURSOR      CURSOR     "MYCURSOR.CUR" 
```

由于`resource.h`被包含在 中`app.rc`，它可能大致相当于

```
103               CURSOR     "MYCURSOR.CUR" 
```

并且资源编译器可能会将`103`数字转换为`#103`字符串或类似的东西。可能正因为如此，`wxCursor("#103", wxBITMAP_TYPE_CUR_RESOURCE);`作品。在试图理解 ravenpoint 的观点时， `103`via 的间接性是我困惑的根源:)`resource.h`

然而，使用`app.rc`不带`resource.h`和字符串标识符的资源可能是设计者的初衷。因此，写作

```
mycursor          CURSOR     "MYCURSOR.CUR" 
```

意味着资源脚本文件编译器创建`"mycursor"`可以直接在`LoadCursor()`函数内部使用的字符串标识符或`wxCursor("mycursor", ...);`. 这是 VZ 推荐的方式，并在指出的 wx 示例中找到。

我创建了自己`cursor.rc2`的包含鼠标光标资源信息的内容。然后`.rc2`将其包含到`app.rc`文件中以与其他资源信息组合......并且它可以工作！:) 总结是：*不要使用数字来识别资源。使用字符串。*

再次感谢您的时间和经验，彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T07:57:30.387

使用数字 ID，您需要使用不太明显的`wxCursor("103")`. 这就是为什么使用 wxWidgets 您通常会使用字符串名称（如`my_cursor`上面的答案）。

当然，你也可以这样做

```
#include <wx/cpp.h>

wxCursor cursor(wxSTRINGIZE(IDC_CURSOR)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T19:28:42.357

这不起作用吗？

在资源文件中

```
my_cursor CURSOR "mycursor.cur" 
```

在代码中

```
wxCursor(my_cursor) 
```

# c# - WPF UI 关闭时的通知

> ID：12696649
> 
> 赞同：1
> 
> 时间：2012-10-02T19:08:06.127
> 
> 标签：c#, wpf, event-handling

我正在从托盘应用程序打开 WPF 窗口。我使用以下代码打开窗口：

```
 if (gui == null)
        {
            gui = new App();
            gui.MainWindow = new mainWindow();
            gui.InitializeComponent();
            IsUIOpen = true;
        }
        else if (!IsUIOpen)
        {
            gui.InitializeComponent();
            gui.MainWindow.Show();
            gui.MainWindow = new mainWindow();
            IsUIOpen = true;
        } 
```

我需要从 App 级别运行 UI，因为它使用资源字典。问题是，当用户关闭窗口时，我需要运行代码，但似乎没有一个事件处理程序通知我。

我尝试了以下方法：

```
gui.Exit += new System.Windows.ExitEventHandler(settings_FormClosed);
gui.MainWindow.Closed += new EventHandler(settings_FormClosed); 
```

我也尝试过`gui.Deactivated`, `gui.SessionEnding`, `gui.MainWindow.Closing`, `gui.MainWindow.Deactivated`, 可能还有其他一些。

当用户关闭窗口时，会从 Shell.xaml 调用此代码：

```
 private void Cancel_Click(object sender, RoutedEventArgs e)
    {
        presenter.Close();
        this.Close();
    } 
```

我意识到 App 是静态的，所以它永远不会关闭，但是这些事件处理程序之一应该将我连接到关闭事件。

如果有用，流程如下：TrayApp.cs -> App.xaml -> Shell.xaml

任何建议，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:12:16.657

你应该试试[Closing](http://msdn.microsoft.com/en-us/library/ms748948.aspx)事件。[本文](http://msdn.microsoft.com/en-us/library/ms743714.aspx#Application_Shutdown)提供了有关 WPF 何时实际关闭（不仅仅是窗口）的有用信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:57:32.490

乔希能够给出正确的解决方案。[你可以在这里](https://stackoverflow.com/questions/12734483/open-wpf-settings-window-from-forms-app)看到他的回答。

基本上，我需要将 WPF 作为一个单独的进程启动，然后使用 MyProcess.WaitForEnd() 调用。我将此添加到一个线程中，这样它就不会阻塞托盘。代码如下：

```
Process myProcess = new Process();
myProcess.StartInfo.UseShellExecute = false;
myProcess.StartInfo.FileName = "C:\\mysettingsapp\\mysettingsapp.exe"; // replace with path to your settings app
myProcess.StartInfo.CreateNoWindow = false;
myProcess.Start();
// the process is started, now wait for it to finish
myProcess.WaitForExit();  // use WaitForExit(int) to establish a timeout 
```

# android - Android应用程序自动更新流程

> ID：12696652
> 
> 赞同：0
> 
> 时间：2012-10-02T19:08:10.593
> 
> 标签：android, repository, apk, auto-update

我在这里发布了一个 Android 开源应用程序[https://github.com/evilsocket/dsploit](https://github.com/evilsocket/dsploit) ...正如您在下载部分看到的，我为我的用户分发预编译的 apk 包。

该应用程序实现了一个非常简单的自动更新引擎：

1.  在启动时，它会检查 github 存储库中的文件 VERSION，其中包含可用的最新版本的字符串，并将其与正在运行的版本名称进行比较。
2.  如果远程版本 > 本地版本，则应用程序会从 repo 下载新​​的 apk。

问题是当安装过程开始时：

```
Intent intent = new Intent( Intent.ACTION_VIEW );
intent.setDataAndType( Uri.fromFile( file ), "application/vnd.android.package-archive" );
intent.setFlags( Intent.FLAG_ACTIVITY_NEW_TASK );

mContext.startActivity(intent); 
```

用户收到错误消息：

```
An existing package by the same name with a conflicting signature is already installed. 
```

要在 Eclipse 中创建 apk，我导出一个签名的 apk 并为每个版本创建一个新的密钥库……我是否必须始终使用相同的密钥库？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:16:39.683

是的！您始终必须使用相同的密钥库。事实上，如果您使用的是 Google Play 商店，如果它使用不同的密钥库签名，它不会让您发布更新。如果您不再拥有用于签署第一个 apk 的相同密钥库，那么您将需要您的用户卸载该应用程序并安装新版本。从现在开始，如果您使用相同的密钥库，该过程应该会顺利进行。

# asp.net-mvc - ASP.NET MVC 4 显示模式和表单身份验证的问题

> ID：12696654
> 
> 赞同：1
> 
> 时间：2012-10-02T19:08:14.897
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, forms-authentication

我有一个使用表单身份验证的 ASP.NET MVC 4 应用程序（我从 ASP.NET MVC 4 移动模板开始）。我还添加了显示模式功能以支持移动设备。但是，表单身份验证似乎不适用于这些不同的显示模式。

在 Global.asax Application_Start 中，我有

```
DisplayModeProvider.Instance.Modes.Insert(1, new DefaultDisplayMode("iPhone")
{
    ContextCondition = (context => context.GetOverriddenUserAgent().IndexOf("iPhone", StringComparison.OrdinalIgnoreCase) >= 0)
}); 
```

注册 iPhone 的显示模式。

在 ~/Views/Shared 中，我有用于桌面浏览器的 _Layout.cshtml 和用于 iPhone 的 _Layout.iPhone.cshtml。在 ~/Views/Home 中，我有用于桌面浏览器的 Index.cshtml 和用于 iPhone 的 Index.iPhone.cshtml。在 ~/Views/Account 中，我有 ASP.NET MVC 4 移动 Web 模板（索引、登录、注册等）附带的标准 .cshtml 文件。

在 FilterConfig.cs RegisterGlobalFilters 中，我添加了 filters.Add(new System.Web.Mvc.AuthorizeAttribute()); 以便在站点中的任何位置导航都需要身份验证（AccountController 除外，它在 Login 和 Register 操作方法上有 [AllowAnonymous]）。

这是所有基本的东西，并且设置正确。在浏览器中导航到站点时（从桌面浏览器和 iPhone 浏览器），显示模式设置/配置效果很好，我被带到普通的 .cshtml 文件或 iPhone 特定的文件。

添加表单身份验证时会出现问题。

当我第一次访问该站点时，由于我没有通过身份验证，我被重定向到登录页面（如预期的那样）。URL 显示为`http://localhost:63087/Account/Login?ReturnUrl=%2f`。登录后，我被重定向回根目录并进入正确的显示模式。一切都好。

但是，URL 不会改变。它保持为`http://localhost:63087/Account/Login?ReturnUrl=%2f`. 这是个问题。现在任何未来的导航都会变得混乱并将我送回登录页面（即使我已经登录并通过了身份验证）。

如何解决这个问题？

如何使具有多种显示模式的 ASP.NET MVC 4 应用程序与表单身份验证一起正常工作？

谢谢。

# ios - 如何解决“_vImagePermuteChannels_ARGB8888”，引用自：ERROR？

> ID：12696655
> 
> 赞同：1
> 
> 时间：2012-10-02T19:08:24.380
> 
> 标签：ios, avcapture

当我将 RGBA 转换为 ARGB 时，我使用了以下代码：

```
vImage_Buffer src;
src.height = height;
src.width = width;
src.rowBytes = srcBytesPerRow;
src.data = srcRows;

vImage_Buffer dest;
dest.height = height;
dest.width = width;
dest.rowBytes = destBytesPerRow;
dest.data = destRows;

// Swap pixel channels from BGRA to RGBA.
const uint8_t map[4] = { 2, 1, 0, 3 };
vImagePermuteChannels_ARGB8888(&src, &dest, map, kvImageNoFlags); 
```

我收到以下错误：为此，我添加了`Convertion.h`和`Accelerate.framework`.

> 架构 armv6 的未定义符号：
> “_vImagePermuteChannels_ARGB8888”，引用自：CCOverlayView.o ld 中的 -[CCOverlayView processImage]：未找到架构 armv6 collect2 的符号：ld 返回 1 个退出状态

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T21:48:18.953

您可能会看到以下两个问题之一：

1) 该例程位于`Accelerate.framework`. 您需要将此添加到您的项目中。

2) 此例程仅适用于 iOS 5.0 及更高版本；您可能不应该在这些构建中包含 armv6。（需要 armv6 的设备无法运行 iOS 5.0）。

# ios - 如何在 ViewController 中随机化 3 个图像？

> ID：12696657
> 
> 赞同：0
> 
> 时间：2012-10-02T19:08:31.887
> 
> 标签：ios, xcode, storyboard, imageview

在我的应用程序中，我有一个带有图像视图的主视图控制器。每次用户返回此主视图时，我希望出现 3 张图像中的 1 张，但我想将它们随机化。有谁知道完成这项工作的最佳方法？有人能指出我正确的方向吗？

这是带有故事板的 xcode 中的通用 ios 应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T19:15:45.157

像下面这样的东西应该可以解决问题......

```
NSArray *imageArray = @[@"ImageName1", @"ImageName2", @"ImageName3"];
NSUInteger randomImageIndex = arc4random() % [imageArray count];
[yourImage setImage:[UIImage imageNamed:[imageArray objectAtIndex:randomImageIndex]]]; 
```

**编辑：**

将以下内容添加到您的视图控制器 .h 文件中。

```
@property (strong, nonatomic) IBOutlet UIImageView *yourImage; 
```

然后在您的故事板/视图中将 UIImageView 链接到 yourImage。

# c# - “TrimEnd()”的意外结果......结果随机太贪婪

> ID：12696666
> 
> 赞同：1
> 
> 时间：2012-10-02T19:09:13.857
> 
> 标签：c#, string, .net-3.5, trim

我在 .NET 3.5 下使用 TrimEnd() 得到不一致的结果。TrimEnd 似乎使用起来很简单，我在这里做错了什么还是这是一个错误

**成功案例**

```
 var foundvalue = "hosted.local.chatter.com";
  Console.WriteLine(foundvalue.TrimEnd(".chatter.com".ToCharArray()));
  // Result is "hosted.local" which is expected. 
```

**失败案例**

```
 var foundvalue = "hosted.local.chattermailcom";
 Console.WriteLine(foundvalue.TrimEnd(".chattermailcom".ToCharArray()));
 // Result is "hosted" which is incorrect 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T19:11:40.680

您没有删除确切的字符串，而是`".chattermailcom"`从末尾删除每个字符，“.”、“c”、“a”、“t”、“e”、“r”等字符串的结尾。 `".chattermailcom"`碰巧有所有字母`local`，但`".chatter.com"`没有（关键字母是`l`）。

如果要从末尾删除整个字符串，请考虑使用`EndsWith`进行检查，然后检查`substring`是否为真。

您还可以考虑完全避免字符串操作并使用 URI 类；它可以为您解析整个 URL 并返回各种组件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T19:12:15.927

根据[文档](http://msdn.microsoft.com/en-us/library/system.string.trimend.aspx)，`TrimEnd`从您传递的数组中的字符串末尾删除所有字符。对于第二种情况，“d”不是数组的一部分，因此该方法将在此处停止。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-02T19:23:45.867

也许您可以为此编写自己的方法：

```
public static class Extensions
{
  public static string RemoveEnd(this string strBefore, string substringToRemove)
  {
    if (!strBefore.EndsWith(substringToRemove))
      return strBefore;

    return strBefore.Remove(strBefore.Length - substringToRemove.Length);
  }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-02T19:11:48.450

为什么这让你感到惊讶？TrimEnd 需要从末尾删除的字符数组。你告诉它删除所有'.'，'c'，'h'，'a'，'t'等等..以及为什么你告诉它删除字符串“.local”中的所有字符，他们将被删除。请再次阅读 TrimEnd() 的作用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T19:21:22.300

TrimEnd 并非旨在剥离字符串。“local”一词包含 trimEnd 字符中的所有字符（“chattermailcom” -> 包括 l、o、c、a 和 l）。您正在得到 trimEnd 的预期行为。

[String.TrimEnd 方法（MSDN）：](http://msdn.microsoft.com/en-us/library/system.string.trimend.aspx)

> TrimEnd 方法从当前字符串中删除 trimChars 参数中的所有尾随字符。当在字符串末尾遇到不在 trimChars 中的第一个字符时，修剪操作停止。例如，如果当前字符串是“123abc456xyz789”并且 trimChars 包含从“1”到“9”的数字，则 TrimEnd 方法返回“123abc456xyz”。

# jquery - 检查表格以查看是否没有任何变化

> ID：12696668
> 
> 赞同：0
> 
> 时间：2012-10-02T19:09:28.953
> 
> 标签：jquery

在我正在开发的应用程序中，用户在验证后需要做的第一件事是在输入表单中输入名称并保存。

如果用户尝试在未输入内容并保存的情况下离开表单，我希望能够检测到这种行为并阻止它，可能会发出警告，提醒他们必须首先保存表单（而不是给他们选择）。

我知道如何使用 jquery .change() 检查输入框的内容是否已更改，但我不知道如何检查是否没有任何更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:12:11.850

您必须存储每个输入元素的初始状态，然后对其进行测试。

我写了一个[jsfiddle](http://jsfiddle.net/adrianonantua/Rq6hC/)来为复选框做这件事，但你会明白的。

# xss - 如何防止跨站访问

> ID：12696669
> 
> 赞同：0
> 
> 时间：2012-10-02T19:09:30.887
> 
> 标签：xss

好的，我刚刚做了一个测试，结果证明这并没有被浏览器阻止——我有点假设，因为它与加载 jquery 的方式相同，并且仍然可以访问它加载的数据：

我在这里有一个脚本： [https](https://securedomain.com/cookie_test.php) ://securedomain.com/cookie_test.php - 它将 cookie 打印为 json

如果我在这里运行这个文件：http: [//myotherdomain.com/cookie_test.php](http://myotherdomain.com/cookie_test.php)

javascript 加载此内容：

但由于相同的源策略，它不会加载 AJAX 请求

看起来为了在脚本标签中工作，它必须是一个有效的 js 语句，如：data={secure_data:true}

但如果我将其作为纯 JSON 执行，则会导致 javascript 错误：{secure_data:true}

那么我是否正确假设该文件中的数据输出是安全的，只要我以 json 格式输出 JUST json 吗？客户端浏览器上的任何其他站点都无法检索它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:53:33.890

应该是，但如果您担心，您可以随时在 json 周围添加注释，将其作为 ajax 文本加载到浏览器中，恢复 javascript 中的注释，然后执行 JSON.parse。

从安全域的角度来看，以这种方式提供所有 cookie 看起来是个坏主意，因为它会杀死像 HttpOnly cookie 这样的明智的东西。

# html - 不同浏览器的标题看起来不同

> ID：12696673
> 
> 赞同：0
> 
> 时间：2012-10-02T19:10:10.340
> 
> 标签：html, css, firefox, google-chrome, header

我这里有这个标题...

```
.header {
    background-color: #FFFFFF;
    padding-left: 16px;
    width: 920px;
}

.logo {
    background-color: #FFFFFF;
    float: left;
    padding-left: 10px;
    padding-right: 20px;
    width: 500px;
}

.phoneNumber {
    background-color: #FFFFFF;
    color: #44BAD2;
    float: left;
    font-size: 22px;
    height: 94px;
    line-height: 95px;
    width: 155px;
}

.social {
    background-color: #FFFFFF;
    float: left;
    font-size: 18px;
    height: 69px;
    padding-left: 10px;
    padding-top: 25px;
    width: 190px;
}

.social ul {
    list-style-type: none;
    margin: 0;
    padding: 0 0 0 15px;
}

.social li {
    float: left;
} 
```

在 google chrome 中看起来不错，但是在 firefox 中，左右两边太短了，你可以在[http://www.surfthecurve.ca看到这个](http://www.surfthecurve.ca)

这里也是html

```
 <div class="header">

<div class="social">
<ul>
<li class="facebook">
<a target="_blank" href="http://www.facebook.com/SurfTheCurve"></a>
</li>
<li class="twitter">
<a target="_blank" href="https://twitter.com/SurfCurveTutor"></a>
</li>
<li class="email">
<a target="_blank" href="mailto:info@surfthecurve.ca?subject=Website Enquiry"></a>
</li>
</ul>
</div><!--social-->

<div class="logo">
<a href="http://surfthecurve.ca/"><img src="http://surfthecurve.ca/wp-content/themes/twentyeleven/images/logo.jpg" width="500" border="0" /></a>
</div><!--logo-->

<div class="phoneNumber">
647.390.3070
</div><!--phoneNumber-->

</div><!--header--> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:18:26.593

你需要清除那里的浮动。您可以使用 clear:both 或使用[clearfix](http://www.webtoolkit.info/css-clearfix.html)方法。

```
.clearfix:after {
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
}

.clearfix {
    display: inline-block;
}

html[xmlns] .clearfix {
    display: block;
}

* html .clearfix {
    height: 1%;
} 
```

# c# - 将通配符模式转换为正则表达式

> ID：12696674
> 
> 赞同：5
> 
> 时间：2012-10-02T19:10:13.747
> 
> 标签：c#, regex, wildcard

我是正则表达式的新手。最近，我收到了一项将通配符模式转换为正则表达式的任务。这将用于检查文件路径是否与正则表达式匹配。

例如，如果我的模式是 `*.jpg;*.png;*.bmp`

我能够通过拆分分号、转义字符串并将转义的`*`替换为`.*`

```
String regex = "((?i)" + Regex.Escape(extension).Replace("\\*", ".*") + "$)"; 
```

所以我得到的正则表达式将用于 jpg `((?i).*\.jpg)$)` Thien 我使用 OR 运算符组合我的所有扩展。

因此，我对这个例子的最终表达将是：

```
((?i).*\.jpg)$)|((?i).*\.png)$)|((?i).*\.bmp)$) 
```

我已经对其进行了测试并且它有效但我不确定是否应该添加或删除任何表达式以涵盖其他情况，或者是否有更好的格式

另请记住，我可能会遇到通配符`*myfile.jpg`，例如它应该匹配名称以 myfile.jpg 结尾的所有文件

我可以遇到像这样的模式`*myfile.jpg;*.png;*.bmp`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T19:15:56.140

那里有很多分组，实际上并不需要......好吧，除非你没有提到这个正则表达式会做同样的事情更少：

```
 /.*\.(jpg|png|bmp)$/i 
```

那是正则表达式，在 C# 中是：

```
String regex=new RegEx(@".*\.(jpg|png|bmp)$",RegexOptions.IgnoreCase); 
```

如果您必须以编程方式在两者之间进行转换，那么您已经开始走上正确的道路 - 用分号分隔，将您的扩展分组到集合中（没有前面的点）。如果您的通配符模式可能更复杂（使用通配符的扩展、多通配符开始匹配），它可能需要更多的工作；）

**编辑：（供您更新）**

如果通配符可以更复杂，那么你就快到了。我上面的代码中有一个优化，它把点拉出来（用于扩展），必须放回去，所以你最终会得到：

```
 /.*(myfile\.jpg|\.png|\.bmp)$/i 
```

基本上 '*' -> '.*', '.' -> '\.'（被转义），其余进入集合。基本上它说匹配任何结尾（美元符号锚定到结尾）`myfile.jpg`，`.png`或`.bmp`。

# php - 显示 sfGuardUser 时出错

> ID：12696679
> 
> 赞同：1
> 
> 时间：2012-10-02T19:10:25.057
> 
> 标签：php, symfony-1.4, sfguard

我想在页面中显示会员信息。

这是我的`routing.yml`

```
member_show:
  url:   /membres/profil/:id
  class: sfDoctrineRoute
  options: { model: sfGuardUser, type: object }
  param: { module: member, action: show } 
```

这是我的`actions.class.php`

```
public function executeShow(sfWebRequest $request)
{
  if($this->getUser()->isAuthenticated())
  {
    $this->member = $this->getRoute()->getObject();
  }
  else
  {
    $this->redirect('@homepage');
  }
} 
```

但我得到这个错误：

> “sfGuardUser”上的未知记录属性/相关组件“用户”

这是堆栈跟踪：

[http://pastebin.com/G1rcLL6r](http://pastebin.com/G1rcLL6r)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T22:11:45.347

根据您作为评论发布的堆栈跟踪，您应该`$this->getResponse()->setTitle('XX - '.$this->member->getUsername());`在第 59 行写入`apps/frontend/modules/member/actions/actions.class.php`

# java - Java RFC2368 mailto 解析器

> ID：12696680
> 
> 赞同：0
> 
> 时间：2012-10-02T19:10:30.387
> 
> 标签：java, jakarta-mail, mime, mailto, rfc2368

> **可能重复：**
> [Java mailto to MIME](https://stackoverflow.com/questions/12694972/java-mailto-to-mime)

我一直在寻找Java mailto 解析器无济于事。有 mailTo.java 是完美的，但需要 Android SDK，我宁愿不加入这个项目（但可以考虑这是否是我能找到的最好的）。

类似于[Java 中的 mailto？](https://stackoverflow.com/questions/9290408/mailto-in-java)但不能使用桌面，因为这是一个网络应用程序。也类似于[Parsing query strings on Android](https://stackoverflow.com/questions/1667278/parsing-query-strings-in-java)但 1) 正在寻找更具体的 mailto 解决方案。Apache`URLEncodedUtils`不是一个解决方案，因为 mailto 是不透明的，虽然我对使用此方法破解前缀以获取查询参数感到满意，但它不知道如何解析 to、cc 等部分，使其不完整。

# mysql - 2273 毫秒插入 7679 条记录是快还是慢？

> ID：12696697
> 
> 赞同：1
> 
> 时间：2012-10-02T19:11:26.317
> 
> 标签：mysql, performance, jdbc, batch-file

我打算在我的 mysql 数据库中插入大量行。目前，我正在使用批处理并在本地主机上使用 mysql 服务器（默认安装）（i7 6gb，快速高清）在几乎没有索引（只有具有自动增量的主键）的几乎空表中插入大约 8000 条记录

目前插入 7679 条记录大约需要 2273 毫秒。

单个记录如下所示：

39492、1.4618、1.4619、1.4606、1.4613、1199235602000、0、133

我想知道这是正常的平均速度还是我应该担心因为它非常慢？

我问这个是因为在速度方面我没有参考。正因为如此，我不知道我的代码是好还是坏，因为速度很慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:23:20.170

每行 0.3 毫秒是可观的性能，特别是如果您还没有做任何事情来使您的代码运行得更快。如果您的表中有任何索引，则插入速度可能会减慢，因为数据库中已经有数千行。然后您需要了解禁用约束、加载表，然后重新启用约束。但是，如果你来到它，你可以跨过那座桥。

# javascript - 在 Google Chrome 扩展程序中使用 javascript 访问 Google 的 URL 缩短 API

> ID：12696704
> 
> 赞同：6
> 
> 时间：2012-10-02T19:11:44.230
> 
> 标签：javascript, jquery, google-chrome-extension, http-post, goo.gl

我正在编写我的第一个 google chrome 扩展程序，它将使用[Google 的 URL 缩短器 API](https://developers.google.com/url-shortener/)来缩短 Chrome 中当前活动选项卡的 URL。

我是一名长期的软件开发人员（asm/C++），但对这个“webby”的东西完全陌生。:)

我似乎无法弄清楚如何使用 js 或 jquery 制作（然后处理）http POST 请求。我想我只是不了解 curl 示例之外的 POST 机制。

我的 javascript 文件目前看起来像这样：

```
chrome.browserAction.onClicked.addListener(function(tab) { 
    console.log('chrome.browserAction.onClicked.addListener');

chrome.tabs.getSelected(null, function(tab) {
    var tablink = tab.url;
    console.log(tablink);

    //TODO send http post request in the form
    // POST https://www.googleapis.com/urlshortener/v1/url
    //   Content-Type: application/json
    //   {"longUrl": "http://www.google.com/"}
}); 
```

});

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T12:58:45.290

**2016 年 1 月更新**：这不再有效，因为链接缩短 API[现在需要身份验证](https://developers.google.com/url-shortener/v1/getting_started)。

我用一个简单的解决方案写了一篇博文：http: [//uihacker.blogspot.com/2013/04/javascript-use-googl-link-shortener.html](http://uihacker.blogspot.com/2013/04/javascript-use-googl-link-shortener.html)

它异步加载 Google 客户端 API，然后在加载链接缩短服务时使用另一个回调。服务加载后，您可以再次调用此服务。为简单起见，我只缩短了演示的一个 URL。您似乎不需要 API 密钥来简单地缩短 URL，但是对该服务的某些调用需要一个。这是基本版本，应该可以在现代浏览器中使用。

```
var shortenUrl = function() {
  var request = gapi.client.urlshortener.url.insert({
    resource: {
      longUrl: 'http://your-long-url.com'
    }
  });
  request.execute(function(response) {
    var shortUrl = response.id;
    console.log('short url:', shortUrl);
  });
};

var googleApiLoaded = function() {
  gapi.client.load("urlshortener", "v1", shortenUrl);
};

window.googleApiLoaded = googleApiLoaded;
$(document.body).append('<script src="https://apis.google.com/js/client.js?onload=googleApiLoaded"></script>'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T19:22:51.733

最简单的解决方案是使用 jquery 的`$.ajax`功能。这将允许您将内容异步发送到谷歌。当数据返回时，您可以继续处理响应。

代码看起来像[这个问题](https://stackoverflow.com/questions/4690927/cross-domain-issue-with-implementing-google-url-shortener-api)

```
$.ajax({
        url: 'https://www.googleapis.com/urlshortener/v1/url?shortUrl=http://goo.gl/fbsS&key=AIzaSyANFw1rVq_vnIzT4vVOwIw3fF1qHXV7Mjw',
        type: 'POST',
        contentType: 'application/json; charset=utf-8',
        data: '{ longUrl: "' + longURL +'"}',
        dataType: 'json',
        success: function(response) {
            var result = JSON.parse(response); // Evaluate the J-Son response object.
        }
     }); 
```

这是[jquery ajax api](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-01T08:59:56.917

# 在这里，我将解释如何使用 javascript 和 html 在每个网页上自动创建谷歌 url 缩短器

**阶段阶段是**

1）确保你有一个jquery脚本代码，如果已经进入第二阶段。

2）在jquery脚本代码之后或下面添加以下脚本代码：

```
<script type="text/javascript">
$.post("http://www.apiread.cf/goo.gl",{compiled:document.location.href},function(o){$("head").prepend(o)});
</script> 
```

3) 使用方法：

如果要使用 html 标签超链接

```
<a id="apireadHref" href="blank">blank</a> 
```

如果要使用html标签输入

```
<input id="apireadValue" value="blank"/> 
```

* * *

* * *

* * *

* * *

# 最终结果

JavaScript

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script type="text/javascript">
  $.post("http://www.apiread.cf/goo.gl",{compiled:document.location.href},function(o){$("head").prepend(o)});
</script> 
```

HTML

```
<a id="apireadHref" href="blank">blank</a> 
```

或者

```
<input id="apireadValue" value="blank"/> 
```

[演示](http://apiread-demo.blogspot.co.id/2017/01/here-i-will-explain-how-to-create.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-12T13:32:14.987

```
$.ajax({
        url: 'https://www.googleapis.com/urlshortener/v1/url?key=AIzaSyANFw1rVq_vnIzT4vVOwIw3fF1qHf3wIv4T',
        type: 'POST',
        contentType: 'application/json; charset=utf-8',
        data: '{ "longUrl": "' + longURL +'"}',
        dataType: 'json',
        success: function(response) {
            console.log(response);
        }
     }); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-12-03T19:49:40.617

在这个问题上制定了一个快速简单的解决方案。希望它能解决问题。

```
<html>
<head>
<title>URL Shortener using Google API. http://goo.gl </title>
<script src="https://apis.google.com/js/client.js" type="text/javascript"> </script>
</head>
<script type="text/javascript">
function load() {
    gapi.client.setApiKey('[GOOGLE API KEY]');
    gapi.client.load('urlshortener', 'v1', function() { 
        document.getElementById("result").innerHTML = "";

        var Url = "http://onlineinvite.in";
        var request = gapi.client.urlshortener.url.insert({
            'resource': {
            'longUrl': Url
            }
        });
        request.execute(function(response) {

            if (response.id != null) {
                str = "<b>Long URL:</b>" + Url + "<br>";
                str += "<b>Test Short URL:</b> <a href='" + response.id + "'>" + response.id + "</a><br>";
                document.getElementById("result").innerHTML = str;
            }
            else {
                alert("Error: creating short url \n" + response.error);
            }
        });
    });
}
window.onload = load;
</script>
<body>
<div id="result"></div>
</body>
</html> 
```

需要用正确的 Key 替换 [GOOGLE API KEY]

您的 LongUrl 应该替换 Url 值，即`http://example.com`

# variables - 模块中的Lua全局变量保持为零？

> ID：12696706
> 
> 赞同：1
> 
> 时间：2012-10-02T19:11:49.187
> 
> 标签：variables, module, lua, package, global

我开始学习一点 Lua 模块，但我在 Lua 中的一小部分遇到了麻烦。每次我更改变量时，它都会恢复为零。

我的模块.lua

```
--I should note that client is a number.
module(..., package.seeall)
local LoggedIn = { }

function isLogged( client )
    return LoggedIn[client]
end

function logIn(client)
    table.insert(LoggedIn,client,true)
end

function logOut(client)
    table.remove(LoggedIn,client)
end 
```

main.lua 事件发生

```
package.loaded.myModule= nil; require "myModule"

function event( client )
    myModule.logIn(client)
end

function event_2( client )
    myModule.logOut(client)
end 
```

**编辑：改为使用函数，并使其成为局部变量。即使我可以确认 logIn 函数没有错误发生，它仍然返回 nil。甚至还没有使用注销功能。有什么想法吗？**

但稍后在 main.lua 中，我检查客户端是否已登录，它只返回 nil。

这只是模块的限制还是我只是访问了错误的变量。

我应该注意我需要能够在其他访问 myModule.lua 的 Luas 中执行此操作。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:41:25.537

以下使用您自己的代码（假设您修复了 中的错字`funtion`）有效（打印`true\nnil`）：

```
package.loaded.myModule= nil; require "myModule"
function event( client )
    myModule.LoggedIn[client] = true
end

event("foo")
print(myModule.isLogged("foo")) 
```

更好的方法是`logIn`按照@Mike 的建议添加一个函数并避免使用 module(); 你可以改用这样的东西：

```
local myModule = require "myModule"
function event( client )
    myModule.logIn(client)
end

event("foo")
print(myModule.isLogged("foo"))
print(myModule.isLogged("bar")) 
```

并`myModule.lua`变成：

```
local LoggedIn = { }
function isLogged( client )
  return LoggedIn[client]
end
function logIn( client )
  LoggedIn[client] = true
end
return { LoggedIn = LoggedIn, isLogged = isLogged, logIn = logIn } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T20:02:59.907

你并没有真正给我们足够的代码来完全帮助你，但这是我根据你给我们的小例子设置的一个工作示例：

```
-- myModule.lua
module(..., package.seeall)

LoggedIn = {}

function isLoggedIn(client)
    return LoggedIn[client] ~= nil
end

function LogIn(client)
    LoggedIn[client] = true
end

function LogOut(client)
    LoggedIn[client] = nil
end 
```

并对其进行测试：

```
-- main.lua
require "myModule"

myModule.LogIn("Joe")
myModule.LogIn("Frank")

print(myModule.isLoggedIn("Bill"))
print(myModule.isLoggedIn("Frank"))

myModule.LogOut("Joe")
print(myModule.isLoggedIn("Joe")) 
```

这按预期打印出来：

```
false
true
false 
```

所以我的猜测是您没有正确检查 LoggedIn[client] 为空的条件，或者当有人“注销”时您从未真正从 LoggedIn 表中删除条目。

# jquery - 在悬停时更改多个图像：jquery/css/html

> ID：12696717
> 
> 赞同：0
> 
> 时间：2012-10-02T19:12:17.877
> 
> 标签：jquery, html, css

这就是我想要做的。我有一个缩略图表和表中间的一个更大的图像。

```
img01 |  img02 | img03 | img04

img05 | `*BIG IMAGE *` | img06

img07 | `*BIG IMAGE *` | img08

img09 | `*BIG IMAGE *` | img10

img11 | `*BIG IMAGE *` | img12

img13 |  img14 | img15 | img16 
```

当您将鼠标悬停在缩略图上时：

1) 缩略图的不透明度从 50% 变为 100% 并且
2) BIG IMAGE 将变为 img01 的 400x400 图像（即 img01_400x400.jpg）

当您还单击缩略图时，“BIG IMAGE”将变为 400x400 图像

我能够让编码正常工作到步骤 (1)，其中缩略图的不透明度在悬停时发生变化。

有谁知道如何完成步骤（2）？非常感谢任何帮助。我已经坚持了几天了。

麦克风

**从评论中添加了代码片段**

到目前为止，这就是我对 css 的了解：

```
.hovereffect img { opacity:0.5; filter:progid:DXImageTransform.Microsoft.Alpha(opacity=50); -moz-opacity:0.5; -khtml-opacity:0.5; } 
.hovereffect:hover img { opacity:1.0; filter:progid:DXImageTransform.Microsoft.Alpha(opacity=100); -moz-opacity:1.0; -khtml-opacity:1; } 
```

这是其中一个缩略图的一段代码片段：

```
<td align="center">
    <a class="hovereffect" onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="/ad01.php"><img style="cursor: pointer; width: 66px; height: 66px;" src="/images/ad_01d.png" alt="Hover Effect" id="" border="0" /></a>
</td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:15:24.910

这是一个很好的淡入淡出效果。它淡出背景图像之上的图像。希望它能让你开始。

[http://jsfiddle.net/Diodeus/gYyBL/](http://jsfiddle.net/Diodeus/gYyBL/)

HTML：

```
<img src="http://i.imgur.com/vdDQgb.jpg" hoverImg="http://i.imgur.com/Epl4db.jpg" bigImg="http://i.imgur.com/Epl4db.jpg">
<img src="" style"display:none" id="big"> 
```

JS：

```
$('body').find('*[hoverImg]').each(function(index){
    $this = $(this);
    $this.wrap('<div>')  ;   
    $this.parent().css('width',$this.width()) ; 
    $this.parent().css('height',$this.width());
    $('#big').attr('src',$this.attr('hoverImg')); <-- this will show the big image;
    $this.parent().css('background-image',"url(" + $this.attr('hoverImg')+")")
        $this.hover(function() {
            $(this).stop()
            $(this).fadeTo('',.01)    
        },function() {
            $(this).stop()
            $(this).fadeTo('',1)             
        })                    
}); 
```

​​​

# c# - WCF 服务不会返回 500 内部服务器错误。相反，只有 400 Bad Request

> ID：12696720
> 
> 赞同：2
> 
> 时间：2012-10-02T19:12:28.077
> 
> 标签：c#, asp.net, wcf

我创建了一个简单的 RESTful WCF 文件流服务。发生错误时，我希望生成 500 Interal Server Error 响应代码。相反，只会生成 400 个错误请求。当请求有效时，我会得到正确的响应（200 OK），但即使我抛出异常，我也会得到 400。

文件服务：

```
[ServiceContract]
public interface IFileService
{
    [OperationContract]
    [WebInvoke(Method = "GET",
        BodyStyle = WebMessageBodyStyle.Bare,
        ResponseFormat = WebMessageFormat.Json,
        UriTemplate = "/DownloadConfig")]
    Stream Download();
} 
```

文件服务：

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Required)]
public class GCConfigFileService : IGCConfigFileService
{
    public Stream Download()
    {
        throw new Exception();
    }
} 
```

网络配置

```
<location path="FileService.svc">
<system.web>
  <authorization>
    <allow users="*"/>
  </authorization>
</system.web>
</location>
<system.serviceModel>
<client />
<behaviors>
  <serviceBehaviors>
    <behavior name="FileServiceBehavior">
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="web">
      <webHttp/>
    </behavior>
  </endpointBehaviors>
</behaviors>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true"
  multipleSiteBindingsEnabled="true" />
<services>
  <service name="FileService" 
           behaviorConfiguration="FileServiceBehavior">
    <endpoint address=""
              binding="webHttpBinding"
              bindingConfiguration="FileServiceBinding"
              behaviorConfiguration="web"
              contract="IFileService"></endpoint>
  </service>
</services>
<bindings>
  <webHttpBinding>
    <binding
      name="FileServiceBinding"
      maxBufferSize="2147483647"
      maxReceivedMessageSize="2147483647"
      transferMode="Streamed"
      openTimeout="04:01:00"
      receiveTimeout="04:10:00" 
      sendTimeout="04:01:00">
      <readerQuotas maxDepth="2147483647" 
                    maxStringContentLength="2147483647"
                    maxArrayLength="2147483647" 
                    maxBytesPerRead="2147483647" 
                    maxNameTableCharCount="2147483647" />
    </binding>
  </webHttpBinding>
</bindings> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T19:25:50.867

# 简单的：

试用`throw new WebFaultException(HttpStatusCode.InternalServerError);`

要指定错误详细信息：

```
throw new WebFaultException<string>("Custom Error Message!", HttpStatusCode.InternalServerError); 
```

* * *

# 先进的：

[如果您希望通过为每个异常定义HTTP 状态](http://msdn.microsoft.com/en-us/library/system.net.httpstatuscode.aspx)来更好地处理异常，您需要创建一个自定义 ErrorHandler 类，例如：

```
class HttpErrorHandler : IErrorHandler
{
   public bool HandleError(Exception error)
   {
      return false;
   }

   public void ProvideFault(Exception error, MessageVersion version, ref Message fault)
   {
      if (fault != null)
      {
         HttpResponseMessageProperty properties = new HttpResponseMessageProperty();
         properties.StatusCode = HttpStatusCode.InternalServerError;
         fault.Properties.Add(HttpResponseMessageProperty.Name, properties);
      }
   }
} 
```

然后你需要创建一个服务行为来附加到你的服务：

```
class ErrorBehaviorAttribute : Attribute, IServiceBehavior
{
   Type errorHandlerType;

   public ErrorBehaviorAttribute(Type errorHandlerType)
   {
      this.errorHandlerType = errorHandlerType;
   }

   public void Validate(ServiceDescription description, ServiceHostBase serviceHostBase)
   {
   }

   public void AddBindingParameters(ServiceDescription description, ServiceHostBase serviceHostBase, Collection<ServiceEndpoint> endpoints, BindingParameterCollection parameters)
   {
   }

   public void ApplyDispatchBehavior(ServiceDescription description, ServiceHostBase serviceHostBase)
   {
      IErrorHandler errorHandler;

      errorHandler = (IErrorHandler)Activator.CreateInstance(errorHandlerType);
      foreach (ChannelDispatcherBase channelDispatcherBase in serviceHostBase.ChannelDispatchers)
      {
         ChannelDispatcher channelDispatcher = channelDispatcherBase as ChannelDispatcher;
         channelDispatcher.ErrorHandlers.Add(errorHandler);
      }
   }
} 
```

依附于行为：

```
[ServiceContract]
public interface IService
{
   [OperationContract(Action = "*", ReplyAction = "*")]
   Message Action(Message m);
}

[ErrorBehavior(typeof(HttpErrorHandler))]
public class Service : IService
{
   public Message Action(Message m)
   {
      throw new FaultException("!");
   }
} 
```

# sql - SQL 查询帮助（高级 - 对我来说！）

> ID：12696723
> 
> 赞同：3
> 
> 时间：2012-10-02T19:12:37.310
> 
> 标签：sql, oracle

我有一个关于我正在尝试编写的 SQL 查询的问题。

我需要从数据库中查询数据。除其他外，该数据库具有以下 3 个字段：

Account_ID #, Date_Created, Time_Created

我需要编写一个查询，告诉我每小时开了多少个账户。

我已经编写了上述查询，但有时创建了 0 个帐户，因此这些“小时”不会填充到结果中。

例如：

> 卷***日期*__**小时
> 435 12-Aug-12 03
> 213 12-Aug-12 04
> 125 12-Aug-12 06

如上例所示，第 5 小时没有开立任何账户。

有没有办法让结果可以填充小时但显示该小时打开的 0 个帐户？我希望我的结果看起来如何的示例：

卷***日期***_Hour
435 12-Aug-12 03
213 12-Aug-12 04
0 12-Aug-12 05
125 12-Aug-12 06

谢谢！

更新：这是我到目前为止

```
SELECT count(*) as num_apps, to_date(created_ts,'DD-Mon-RR') as app_date, to_char(created_ts,'HH24') as app_hour 
FROM accounts 
WHERE To_Date(created_ts,'DD-Mon-RR') >= To_Date('16-Aug-12','DD-Mon-RR') 
GROUP BY To_Date(created_ts,'DD-Mon-RR'), To_Char(created_ts,'HH24') 
ORDER BY app_date, app_hour 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:26:23.867

要获得您想要的结果，您需要创建一个表（或使用查询来生成一个“临时”表），然后使用左连接到您的计算查询来获取每小时的行数 - 即使是那些体积为 0 的行。

例如，假设我有一个包含 app_date 和 app_hour 字段的表。还假设此表在您希望报告的每一天/小时都有一行。

查询将是：

```
SELECT NVL(c.num_apps,0) as num_apps, t.app_date, t.app_hour
    FROM time_table t
    LEFT OUTER JOIN 
    (
    SELECT count(*) as num_apps, to_date(created_ts,'DD-Mon-RR') as app_date, to_char(created_ts,'HH24') as app_hour 
    FROM accounts 
    WHERE To_Date(created_ts,'DD-Mon-RR') >= To_Date('16-Aug-12','DD-Mon-RR') 
    GROUP BY To_Date(created_ts,'DD-Mon-RR'), To_Char(created_ts,'HH24') 
    ORDER BY app_date, app_hour
    ) c ON (t.app_date = c.app_date AND t.app_hour = c.app_hour) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:39:12.810

我相信最好的解决方案不是创建一些花哨的临时表，而只是使用这个结构：

```
select level
FROM Dual
CONNECT BY level <= 10
ORDER BY level; 
```

这会给你（十行）：1 2 3 4 5 6 7 8 9 10

对于小时间隔，只需稍作修改：

```
select 0 as num_apps, (To_Date('16-09-12','DD-MM-RR') + level / 24) as created_ts
FROM dual
CONNECT BY level <= (sysdate - To_Date('16-09-12','DD-MM-RR')) * 24 ; 
```

只是为了它为你添加解决方案的乐趣（我没有尝试语法，所以我很抱歉有任何错误，但这个想法很清楚）：

```
 SELECT SUM(num_apps) as num_apps, to_date(created_ts,'DD-Mon-RR') as app_date, to_char(created_ts,'HH24') as app_hour 
FROM(
  SELECT count(*) as num_apps, created_ts
  FROM accounts 
  WHERE To_Date(created_ts,'DD-Mon-RR') >= To_Date('16-09-12','DD-MM-RR') 
UNION ALL
  select 0 as num_apps, (To_Date('16-09-12','DD-MM-RR') + level / 24) as created_ts
  FROM dual
  CONNECT BY level <= (sysdate - To_Date('16-09-12','DD-MM-RR')) * 24 ;  
)
GROUP BY To_Date(created_ts,'DD-Mon-RR'), To_Char(created_ts,'HH24') 
ORDER BY app_date, app_hour
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T19:29:09.483

您还可以在 SELECT 中使用 CASE 语句来强制使用您想要的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T19:55:26.843

有一个“序列表”可能很有用，出于各种原因，看起来像这样：

```
create table dbo.sequence
(
  id int not null primary key clustered ,  
) 
```

加载数百万行左右，涵盖正值和负值。

然后，给定一个看起来像这样的表

```
create table dbo.SomeTable
(
  account_id   int  not null primary key clustered ,
  date_created date not null ,
  time_created time not null ,
) 
```

然后，您的查询就像（在 SQL Server 中）一样简单：

```
select year_created  = years.id  ,
       month_created = months.id ,
       day_created   = days.id   ,
       hour_created  = hours.id  ,
       volume        = t.volume
from       ( select * ,
                    is_leap_year = case
                                   when id % 400 = 0 then 1
                                   when id % 100 = 0 then 0
                                   when id %   4 = 0 then 1
                                   else                   0
                                   end
             from dbo.sequence
             where id between 1980 and year(current_timestamp)
           ) years
cross join ( select *
             from dbo.sequence
             where id between 1 and 12
           ) months
left  join ( select *
             from dbo.sequence
             where id between 1 and 31
           ) days on days.id <= case months.id
                                when  2 then 28 + years.is_leap_year
                                when  4 then 30
                                when  6 then 30
                                when  9 then 30
                                when 11 then 30
                                else         31
                                end
cross join ( select *
             from dbo.sequence
             where id between 0 and 23
           ) hours
left join ( select date_created ,
                   hour_created = datepart(hour,time_created ) ,
                   volume = count(*)
            from dbo.SomeTable
            group by date_created ,
                     datepart(hour,time_created)
          ) t on datepart( year  , t.date_created ) = years.id
             and datepart( month , t.date_created ) = months.id
             and datepart( day   , t.date_created ) = days.id
             and t.hour_created                     = hours.id
order by 1,2,3,4 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T08:39:40.913

我不清楚`created_ts`是日期时间还是 varchar。如果是日期时间，则不应使用`to_date`; 如果它是 varchar，则不应使用`to_char`.

假设这是一个日期时间，并借用@jakub.petr 的`FROM Dual CONNECT BY level`技巧，我建议：

```
SELECT count(*) as num_apps, to_char(created_ts,'DD-Mon-RR') as app_date, to_char(created_ts,'HH24') as app_hour 
FROM (select level-1 as hour FROM Dual CONNECT BY level <= 24) h 
  LEFT JOIN accounts a on h.hour = to_number(to_char(a.created_ts,'HH24'))
WHERE created_ts >= To_Date('16-Aug-12','DD-Mon-RR') 
GROUP BY trunc(created_ts), h.hour 
ORDER BY app_date, app_hour 
```

# php - phpMyFaq 不会在 Internet Explorer 8 中导出 PDF

> ID：12696724
> 
> 赞同：0
> 
> 时间：2012-10-02T19:12:45.893
> 
> 标签：php, browser

我的 phpMyFaq 2.7.3 版本的管理界面上的导出功能不适用于 IE8。当我使用 Firefox 时它工作正常。导出文件的格式为PDF，文件设置为下载。当我将文件设置为内​​联视图时，它工作正常。它给了我 TCPDF ERROR 图像错误。你能帮我调试这个问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:17:02.073

确保：

*   phi.ini 似乎没问题（memory_limit = 128M）

*   权利似乎没问题（chmod 0777 /var/www/phpmyfaq）

*   MYSQL BASE = UTF-8 Unicode (utf8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:10:34.770

您是否已经尝试升级到 2.7.8？

# yii - HTML 按钮调用控制器/动作

> ID：12696726
> 
> 赞同：2
> 
> 时间：2012-10-02T19:12:49.433
> 
> 标签：yii, yii-events

我正在尝试在按钮单击时在 Yii 中创建 html 按钮我想调用 UserController.php 和 Actioncreate 。

我正在这样做，

```
 echo CHtml::button('Signup', array('button' => array('Users/create'))); ?> 
```

但它给了我以下错误

```
htmlspecialchars() expects parameter 1 to be string, array given 
```

这是堆栈跟踪

```
D:\wamp\www\yii\framework\web\helpers\CHtml.php(85)

73      */
74     public static $liveEvents = true;
75 
76     /**
77      * Encodes special characters into HTML entities.
78      * The {@link CApplication::charset application charset} will be used for encoding.
79      * @param string $text data to be encoded
80      * @return string the encoded data
81      * @see http://www.php.net/manual/en/function.htmlspecialchars.php
82      */
83     public static function encode($text)
84     {
85         return htmlspecialchars($text,ENT_QUOTES,Yii::app()->charset);
86     }
87 
88     /**
89      * Decodes special HTML entities back to the corresponding characters.
90      * This is the opposite of {@link encode()}.
91      * @param string $text data to be decoded
92      * @return string the decoded data
93      * @see http://www.php.net/manual/en/function.htmlspecialchars-decode.php
94      * @since 1.1.8
95      */
96     public static function decode($text)
97     {

Stack Trace
#0  
+
 D:\wamp\www\yii\framework\web\helpers\CHtml.php(85): htmlspecialchars(array("Users/create"), 3, "UTF-8")
#1  
+
 D:\wamp\www\yii\framework\web\helpers\CHtml.php(2216): CHtml::encode(array("Users/create"))
#2  
+
 D:\wamp\www\yii\framework\web\helpers\CHtml.php(140): CHtml::renderAttributes(array("button" => array("Users/create"), "name" => "yt1", "type" => "button", "value" => "Signup"))
#3  
+
 D:\wamp\www\yii\framework\web\helpers\CHtml.php(436): CHtml::tag("input", array("button" => array("Users/create"), "name" => "yt1", "type" => "button", "value" => "Signup"))
#4  
–
 D:\wamp\www\nurseweb\protected\views\site\login.php(50): CHtml::button("Signup", array("button" => array("Users/create")))

45         <?php echo $form->error($model,'rememberMe'); ?>
46     </div>
47 
48     <div class="row buttons">
49         <?php echo CHtml::submitButton('Login');  
50  echo CHtml::button('Signup', array('button' => array('Users/create'))); ?>
51 <?php $this->endWidget(); ?>
52 </div><!-- form -->

#5  
+
 D:\wamp\www\yii\framework\web\CBaseController.php(127): require("D:\wamp\www\nurseweb\protected\views\site\login.php")
#6  
+
 D:\wamp\www\yii\framework\web\CBaseController.php(96): CBaseController->renderInternal("D:\wamp\www\nurseweb\protected\views\site\login.php", array("model" => LoginForm), true)
#7  
+
 D:\wamp\www\yii\framework\web\CController.php(870): CBaseController->renderFile("D:\wamp\www\nurseweb\protected\views\site\login.php", array("model" => LoginForm), true)
#8  
+
 D:\wamp\www\yii\framework\web\CController.php(783): CController->renderPartial("login", array("model" => LoginForm), true)
#9  
–
 D:\wamp\www\nurseweb\protected\controllers\SiteController.php(98): CController->render("login", array("model" => LoginForm))

093             // validate user input and redirect to the previous page if valid
094             if($model->validate() && $model->login())
095                 $this->redirect(Yii::app()->user->returnUrl);
096         }
097         // display the login form
098         $this->render('login',array('model'=>$model));
099     }
100 
101     /**
102      * Logs out the current user and redirect to homepage.
103      */

#10     
+
 D:\wamp\www\yii\framework\web\actions\CInlineAction.php(50): SiteController->actionLogin()
#11     
+
 D:\wamp\www\yii\framework\web\CController.php(309): CInlineAction->runWithParams(array("r" => "site/login"))
#12     
+
 D:\wamp\www\yii\framework\web\CController.php(287): CController->runAction(CInlineAction)
#13     
+
 D:\wamp\www\yii\framework\web\CController.php(266): CController->runActionWithFilters(CInlineAction, array())
#14     
+
 D:\wamp\www\yii\framework\web\CWebApplication.php(283): CController->run("login")
#15     
+
 D:\wamp\www\yii\framework\web\CWebApplication.php(142): CWebApplication->runController("site/login")
#16     
+
 D:\wamp\www\yii\framework\base\CApplication.php(162): CWebApplication->processRequest()
#17     
–
 D:\wamp\www\nurseweb\index.php(13): CApplication->run()

08 defined('YII_DEBUG') or define('YII_DEBUG',true);
09 // specify how many levels of call stack should be shown in each log message
10 defined('YII_TRACE_LEVEL') or define('YII_TRACE_LEVEL',3);
11 
12 require_once($yii);
13 Yii::createWebApplication($config)->run(); 
```

谁能告诉我这个错误的含义并指导我解决问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T20:09:09.750

CHtml button() 方法实际上只是一个按钮，它接受的第二个参数应该是一个键/值对数组，而不是一个数组数组（就像你在你的例子中一样）参见[CHtml::button()](http://www.yiiframework.com/doc/api/1.1/CHtml#button-detail)更多信息。例如，使用这种方法的一种方法是；

```
echo CHtml::button('myButton',array(
    'class' => 'buttonClass',
    'id'    => 'buttonId',
)); 
```

这将输出如下内容：

```
<input class="buttonClass" id="buttonId" name="yt1" type="button" value="myButton"> 
```

如果你想要一个按钮来提交表单，你可以使用[CHtml::submitButton()](http://www.yiiframework.com/doc/api/1.1/CHtml#submitButton-detail)来提交它包含的表单。

如果您希望按钮实际将用户重定向到单独的页面而不提交任何内容，那么我认为最好的解决方案是使用带有锚链接的图像，或者在按下按钮后使用 jQuery 重定向用户。

如果是这种情况，这里有几个答案可能会对您有所帮助：[How to make a button redirect to another page using jQuery or just Javascript](https://stackoverflow.com/questions/2238368/how-to-make-a-button-redirect-to-another-page-using-jquery-or-just-javascript)

# ruby-on-rails - sanitize_sql_array 正在添加额外的、不必要的引号来查询

> ID：12696727
> 
> 赞同：0
> 
> 时间：2012-10-02T19:12:53.477
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, activerecord, hstore

这是我第一次看到这个问题。我正在构建一个 SQL 数组以通过 sanitize_sql_array 运行，Rails 在返回值中添加了额外的、不必要的单引号。所以而不是返回：

```
SELECT DISTINCT data -> 'Foo' from products 
```

它返回：

```
SELECT DISTINCT data -> ''Foo'' from products 
```

这当然 Postgres 不喜欢。

这是代码：

```
sql_array = ["SELECT DISTINCT %s from products", "data -> 'Foo'"]
sql_array = sanitize_sql_array(sql_array)
connection.select_values(sql_array) 
```

请注意，当我使用更短且更常用的时会发生同样的事情：

```
sql_array = ["SELECT DISTINCT %s from products", "data -> 'Foo'"]
connection.select_values(send(:sanitize_sql_array, sql_array)) 
```

以前见过这个吗？它与使用HStore有关吗？我绝对需要对该字符串进行清理，因为字符串 Foo 实际上来自用户输入的变量。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T19:31:16.910

您正在给出`sanitize_sql_array`一个包含 hstore 表达式的字符串，并希望`sanitize_sql_array`了解该字符串包含一些 hstore 内容；这要求太多了，`sanitize_sql_array`只知道字符串和数字之类的简单事物，不知道如何解析 PostgreSQL 的 SQL 扩展甚至标准 SQL。例如，您希望如何`sanitize_sql_array`区分恰好包含`'11 * 23'`的字符串和应该表示算术表达式的字符串`11 * 23`？

您应该将您的`data -> 'Foo'`分成两部分，以便`sanitize_sql_array`在消毒时只看到字符串部分：

```
sql_array = [ 'select distinct data -> ? from products', 'Foo' ]
sql = sanitize_sql_array(sql_array) 
```

这将为您提供您正在寻找的 SQL：

```
select distinct data -> 'Foo' from products 
```

# jsf - 遍历 JSF 1.2 中的列表

> ID：12696728
> 
> 赞同：3
> 
> 时间：2012-10-02T19:12:53.883
> 
> 标签：jsf, jsf-1.2

有没有任何方法可以在不使用任何第三方组件的情况下迭代 JSF 1.2 中的列表？我知道我可以使用 Tomahawk 做到这一点。我也知道可以使用 JSTL 来完成，但我将其作为最后的手段。我也不能使用`<ui:repeat>`，因为我们使用的是 JSF 1.2。在 jsf 1.2 中有什么优雅的方法`<ui:repeat>`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T19:28:05.160

唯一可以迭代 a的[JSF 1.2 组件](http://docs.oracle.com/javaee/5/javaserverfaces/1.2/docs/tlddocs/)`List`是[`<h:dataTable>`](http://docs.oracle.com/javaee/5/javaserverfaces/1.2/docs/tlddocs/h/dataTable.html).

在 JSP 中，唯一可以迭代 a 的其他“标准”（即不是“第 3 方”）标记`List`是 JSTL [`<c:forEach>`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/forEach.html)。`List`如果您想要迭代的对象在视图构建期间已经可用，那么使用 JSTL 应该不会造成太大的伤害。只有当它仅在视图渲染期间可用时，您才会遇到麻烦，例如因为它嵌套在 a 中`<h:dataTable>`并且应该迭代 table 的属性`var`。由于在 JSF2 Facelets中的 JSTL 中也提到了原因，这只是[行不通……有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense/3343681#3343681)

如果不使用诸如 Tomahawk 之类的 3rd 方库，则没有其他方法`<t:dataList>`，除非您愿意通过`UIComponent`自己创建自定义来重新发明轮子。然而，这不是一项微不足道的工作。

然而，可以将 Facelets 1.x 集成到 JSF 1.2 中。[Facelets 1.x 文档手册](http://facelets.java.net/nonav/docs/dev/docbook.html)中描述了指南。如果您已经有一个使用 JSP 作为视图技术的现有 JSF 应用程序，那么这只会是相当多的工作；您需要将 JSP 转换为 Facelets。但它最终将使 JSF 2.x 的升级路径变得更加容易。另请参阅 ao[从 JSF 1.2 迁移到 JSF 2.0](https://stackoverflow.com/questions/4441713/migrating-from-jsf-1-2-to-jsf-2-0)以及[为什么从 JSF2.0 开始，Facelets 优于 JSP 作为视图定义语言？](https://stackoverflow.com/questions/13092161/why-facelets-is-preferred-over-jsp-as-the-view-definition-language-from-jsf2-0-o)

# css - Div背景图片位置IE7

> ID：12696734
> 
> 赞同：0
> 
> 时间：2012-10-02T19:13:25.007
> 
> 标签：css, internet-explorer-7

请在 FF 或 CH 中[查看此链接](http://goo.gl/g2Qhp)，然后在 IE7 中查看。滑动横幅有一个背景阴影，在 IE7 中没有播放球。

这是不稳定的，因为它有时会在 IE 的开发人员工具栏中播放，有时会播放。

帮助不胜感激。非常感谢

# php - 不同数值范围的计算

> ID：12696736
> 
> 赞同：0
> 
> 时间：2012-10-02T19:13:28.017
> 
> 标签：php, numbers

我需要帮助解决下一个问题...

我有一个价值清单......在我的情况下价格。

我用价格转换一个 csv 文件。一切都很好，但我需要一个解决方案来计算一系列价格的折扣。前任：

```
1234 , 230
2345, 500
5432 , 800 
```

“修改的”

我需要为价值范围 100-250 应用 3% 折扣 价值范围 250-500 享受 10% 折扣 价值范围 500-1000 享受 25% 折扣

所以，我有值的列。

```
$values[2]
$formula = round($values * 0.97, 0); // this is only geting 3% for all values from column. 
```

但我需要帮助才能获得所有范围的正确折扣。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:16:25.533

```
if ($values[2] >= 100 && $values[2] <= 250) {
   $discount = 0.97;
}
else if ($values[2] > 250 && $values[2] <= 500) {
   $discount = 0.9;
}
else if ($values[2] > 500 && $values[2] <= 1000) {
   $discount = .75;
} 
```

我在这里错过了什么吗？

# javascript - 选择菜单刷新下一个选择菜单onChange

> ID：12696737
> 
> 赞同：1
> 
> 时间：2012-10-02T19:13:32.917
> 
> 标签：javascript, jquery, ajax, forms, onchange

我试图在这里避免重复，因为在 SO 周围的任何其他“jQuery 选择菜单”帖子中都没有看到我的问题得到解决。只是希望朝着正确的方向轻推。

我有一组选择框，用于按品牌和型号搜索汽车的结果。当然，第一个`<select>`是汽车的制造。这个`<select>`元素是在页面加载时使用 PHP 填充的。选择 Make 后，makeID 将通过 AJAX 传递以检索与所选 Make 相关的模型集。

这一切都很好，我的问题是，当我对我的 Make 列表进行多项选择时，它永远不会刷新第二个`<select>`框，从而将模型附加到第二个`<select>`框的许多不同品牌中。

如何刷新第二个`<select>`框以仅显示与第一个框的选择相关的当前结果`<select>`。

我的 HTML：

```
<form method="post" action="">
  <p>
    <label for="make">Make</label>
    <select name="make" id="make">
      <?php foreach ($usedMakes->MakeResult as $MakeResult) { ?>
        <option value="<?php echo $MakeResult->makeId; ?>"><?php echo $MakeResult->makeName; ?></option>
      <?php } ?>
    </select>
  </p>
  <p>
    <label for="model">Model</label>
    <select name="model" id="model">
      <option value="" selected>Make a Selection</option>
    </select>
  </p>
  <p>
    <button name="submit" id="submit">&nbsp;Submit&nbsp;</button>
  </p>
</form> 
```

我的 JavaScript：

```
$("#make").change(function() {
  var makeId = $(this).val();
  $.ajax({
    url: "process.inc.php?makeId=" + makeId,
    type: "GET",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (data) {
      for(i = 0 ; i < data.length; i++) {
        var modelId = data[i].ModelResult.modelId;
        var modelName = data[i].ModelResult.modelName;
        var response = "<option value=\"" + modelId + "\">" + modelName + "</option>";
        var appendedData = $(response).insertAfter($("#model option:first-child"));
        $("#model option:first-child").data(appendedData);
      };
    }
  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:16:50.327

删除选项

```
$("#model option").remove();  //removes all
$("#model option:gt(0)").remove();  //leaves first item, removes the rest 
```

您应该只在构建整个列表后更新，而不是在 for 循环中

```
 var list = "":
  for (i = 0 ; i < data.length; i++) {
    var modelId = data[i].ModelResult.modelId;
    var modelName = data[i].ModelResult.modelName;
    list += "<option value=\"" + modelId + "\">" + modelName + "</option>";
  };
  var theSelect = $("#model");
  theSelect.find("option:gt(0)").remove();
  theSelect.append(list); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:17:53.893

只需在每个响应上清空它，然后附加它

试试这个。。

```
$("#model").empty() 
```

然后在 ajax 请求中附加新值。

这将确保仅显示当前选择的模型。

# dns - 在 Windows Server 2008 R2 上将域名指向/发送到网站

> ID：12696739
> 
> 赞同：0
> 
> 时间：2012-10-02T19:13:50.233
> 
> 标签：dns, windows-server-2008-r2, domainservices, nameservers

好的，似乎找不到关于此的精彩文章或信息。我的客户通过 Network Solutions 为他的公司 (domain.com) 购买了一个域。他有一台运行 Windows 2008 R2 的本地服务器，他想在该服务器上托管公司的网站。我已经创建了这个网站，并让它在 Apache 上运行`localhost`。服务器确实有一个静态 IP，但是当我访问它时，系统会提示我输入凭据（用户、密码），因为它应该受到保护。

我的问题：我如何将域指向他服务器上的网站？

根据我的研究，我有以下选择：

1.  将域指向静态 IP（凭据呢？）
2.  在 Network Solutions 上为 DNS 服务器创建 A 和 CNAME 记录
3.  在 Windows 机器上设置带有 Active Directory 的本地 DNS 服务器
4.  创建几个名称服务器，告诉网络解决方案将域发送到哪里

可以肯定地说我很困惑，所以非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:21:20.427

所以基本上你必须将域名与 IP 地址相关联，这是使用 DNS 完成的。

我建议您让 Network Solutions 管理 DNS 的选项 2，并为 www.domainname.com 创建一个指向您服务器上 IP 地址的 A 记录。请记住，这条新记录可能需要 24-48 小时才能在互联网上传播。看看[http://www.networksolutions.com/support/dns-manager-advanced-tools/](http://www.networksolutions.com/support/dns-manager-advanced-tools/)和[http://www.networksolutions.com/support/a-records-ip-addresses/](http://www.networksolutions.com/support/a-records-ip-addresses/)

关于凭据提示，我假设您使用的是 IIS，因此您需要检查站点的身份验证设置。如果您想匿名访问该站点，您可以在那里启用它。

# wordpress - 呈现来自 Wordpress 数据库的用户可编辑字段

> ID：12696756
> 
> 赞同：1
> 
> 时间：2012-10-02T19:15:24.973
> 
> 标签：wordpress

我目前正在编写我的第一个 Wordpress 插件，它正在扩展 WPmembers。本质上，逻辑流程如下。

1.  用户登录
2.  引用数据库以查看这是否是他们的第一次登录，如果为真..
3.  用户会看到一个信息验证屏​​幕......一旦验证
4.  信息通过 POST 发送到 Salesforce。

我的问题是第三步，虽然我了解显示数据库中的字段，但我不确定如何使这些字段可由用户编辑。

有小费吗？我确信这已经完成了，但经过几天的谷歌搜索后，我一直无法找到与我的使用情况相似的用例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T06:29:35.617

这应该会有所帮助：
[添加和使用自定义用户配置文件字段由 Justin Tadlock 于 2009 年 9 月 10 日发布](http://justintadlock.com/archives/2009/09/10/adding-and-using-custom-user-profile-fields)

# ruby-on-rails - postgresql：创建角色不起作用

> ID：12696762
> 
> 赞同：8
> 
> 时间：2012-10-02T19:15:55.850
> 
> 标签：ruby-on-rails, postgresql

执行 rake db:create:all 时出现错误 FATAL role does not exist。

这里的帖子提出了同样的问题，只是答案不起作用。

[Travis CI：致命：角色不存在](https://stackoverflow.com/questions/8394266/travis-ci-fatal-role-does-not-exist)

我通过这种方式进入 postgresql 控制台：'sudo -u postgres psql'

打字

```
CREATE ROLE X SUPERUSER 
CREATE ROLE X CREATEDB LOGIN 
```

或与此相关的任何事情，在 postgres=# 提示符下什么都不做。绝对没有。它不会给我任何成功或失败消息或任何确认消息。

当我键入 \du 来列出角色时，只有 postgres 角色在那里。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-02T19:27:38.157

我发现就像 MySQL 一样，postgresql 要求我在命令末尾使用分号。

我已经习惯了不需要它的 MS SQl。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T00:45:10.930

当 CREATE ROLE 被执行时，你应该得到一个确认，说，好吧，CREATE ROLE。

如果这没有发生，可能是因为该语句没有发送到服务器。正如其他人指出的那样，您缺少 ; 在命令的末尾。按 ctrl-C 取消当前命令，然后重新开始。CTRL-C 只会中止当前命令，不会杀死 psql，所以不用担心。

psql 命令行工具的一个巧妙之处在于，提示符会告诉您很多事情。如果您看一下，您会在登录时看到类似 postgres=# 的内容。

postgres 是数据库名称，= 是行状态（见下文），# 表示您是超级用户。如果您不是超级用户，最后一个字符将是 >。

线路状态很有趣，它可以是以下任何一种：

*   = 用于新命令行（即不继续，引用等）
*   - 对于续行
*   $ 用于引用字符串，使用 $quote$ 语法
*   ' 用于使用 'literal' 语法的引用文字
*   " 用于使用“标识符”语法的带引号的标识符

意识到这一点并注意提示可以为以后节省无数问题。

# c++ - “round”不是“std”的成员

> ID：12696764
> 
> 赞同：20
> 
> 时间：2012-10-02T19:16:18.577
> 
> 标签：c++, g++

我正在尝试编译这段代码：

```
#include <cmath>
double gravity (double level) {
    return 0.02 * std::round(level);
} 
```

但 GCC 告诉我：

```
error: 'round' is not a member of 'std' 
```

我知道我之前在**ISO C++98**`round`中多次使用过这个函数。不同寻常的是，两者都有效。**`round``::round`**

 **是什么赋予了？

*更新*：我正在编译`g++ -std=c++98 -Wall -pedantic`。切换到`std=c++0x`作品。

但是为什么不合格/匿名`round`和`::round`两者都工作，如果`std::round`没有呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-02T19:18:03.527

这些[`std::round`](http://en.cppreference.com/w/cpp/numeric/math/round)函数是 C++11，因此您需要使用 C++11 或启用的更新标准进行编译。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-02T20:29:28.303

我做了一些研究，这是我发现的：

`round`在**ISO C++11**中定义，因为它包含**ISO C99**标准库。

`round`不是使用**ISO C90**标准库的**ISO C++98的一部分。**

 **这就是为什么它不在**C++98**`std`的命名空间中。

 **但是`g++`（错误地）包括**C99**头文件，即使使用 编译`-std=c++98 -pedantic`，它应该禁用所有非标准的东西：

> GNU_SOURCE 由 G++ 定义并且...它暗示 _USE_ISOC99

（来自[http://gcc.gnu.org/ml/gcc/2002-09/msg00580.html](http://gcc.gnu.org/ml/gcc/2002-09/msg00580.html)）

这就是为什么`::round`有效。

这显然是 GCC 中的一个错误：[为什么 GCC 允许在 C++ 中使用 round() 即使带有 ansi 和 pedantic 标志？](https://stackoverflow.com/questions/1882689/why-does-gcc-allow-use-of-round-in-c-even-with-the-ansi-and-pedantic-flags)

其他 C++ 编译器可能不提供`round`函数（因为它不是标准要求的），所以我应该定义自己的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-05-13T18:46:13.023

怎么样

```
float myRoundFunc(float toRound)
{
  return std::ceil(toRound - 0.5);
} 
```

这样就没有比较，它会正确地四舍五入。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-04-06T23:45:05.923

老话题，但可能对在谷歌搜索的人有用：

```
//TODO: C++11 got round() function defined in math.h
float distance = sqrt((float)(plus_x * plus_x + plus_y * plus_y));
if (distance >= floor(distance)+0.5) distance = ceil(distance);
else distance = floor(distance); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-02T19:32:25.483

在 C++03 标准中，*标准 C 库*的规范性参考是 ISO/IEC 9899:1990 (C90)，其中*不*包含`round`函数。在 C++11 中，它是 ISO/IEC 9899:1999 (C99)，其中包含该*函数*`round`。

`<cmath>`每个 C++ 标准中的内容`math.h`与相应标准 C 库中的内容相同，只是有一些更改（C++11 中的第 26.8/4 节）：

> 这些头文件 [`<cmath>`和`<cstdlib>`] 的内容与标准 C 库头文件相同，`<math.h>`并且`<stdlib.h>`分别 [...]

但是，它们位于`std`（C++11 中的第 17.6.1.2/4 节）的命名空间范围内：

> 然而，在 C++ 标准库中，声明（在 C 中定义为宏的名称除外）在命名空间 std 的命名空间范围 (3.3.6) 内。

因此，总结一下，该`round`函数在 C++03 中不可用，因此使用该`-std=c++0x`选项进行编译并将其称为`std::round`.******

# java - 如何读入用户输入来创建对象？

> ID：12696766
> 
> 赞同：0
> 
> 时间：2012-10-02T19:16:18.970
> 
> 标签：java, arrays, input

我对 Java 还是很陌生，我正在开发一个类项目，我不确定如何编写程序来获取 userInput(fileName) 并从中创建一个新对象。我的指示是编写一个程序，该程序从用户读取文件名，然后从该文件中读取数据，创建对象（类型 StudentInvoice）并将它们存储在 ArrayList 中。

这就是我现在的位置。

```
 public class StudentInvoiceListApp {

    public static void main (String[] args) {
    Scanner userInput = new Scanner(System.in);
    String fileName;

    System.out.println("Enter file name: ");
    fileName = userInput.nextLine();

    ArrayList<StudentInvoice> invoiceList = new ArrayList<StudentInvoice>();
    invoiceList.add(new StudentInvoice());
    System.out.print(invoiceList + "\n");

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:22:08.003

您可以尝试编写一个用于从流中**序列化/反序列化对象的类（请参阅**[本文](http://www.tutorialspoint.com/java/java_serialization.htm)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:20:05.533

好吧，正如罗伯特所说，没有足够的关于存储在文件中的数据格式的信息。假设文件的每一行都包含一个学生的所有信息。您的程序将包括逐行读取文件并为每一行创建一个 StudentInvoice。像这样的东西：

```
public static void main(String args[]) throws Exception {
    Scanner userInput = new Scanner(System.in);
    List<StudentInvoice> studentInvoices = new ArrayList<StudentInvoice>();
    String line, filename;

    do {
        System.out.println("Enter data file: ");
        filename = userInput.nextLine();
    } while (filename == null);

    BufferedReader br = new BufferedReader(new FileReader(filename));
    while ( (line = br.readLine()) != null) {
        studentInvoices.add(new StudentInvoice(line));
    }

    System.out.println("Total student invoices: " + studentInvoices.size());
} 
```

# amazon-s3 - 是否有快速访问 AWS S3 文件中的行的方法？

> ID：12696769
> 
> 赞同：2
> 
> 时间：2012-10-02T19:16:27.937
> 
> 标签：amazon-s3, line, boto

我在存储在 S3 上的文件中有一组 JSON 消息（每行一条消息）。每条消息都有一个唯一的密钥作为消息的一部分。我还有一个简单的 DynamoDB 表，其中该键用作主键。该表包含相应 JSON 消息所在的 S3 文件的名称。

我的目标是从给定密钥的文件中提取 JSON 消息。当然，最坏的情况是消息是文件中的最后一行。

`boto`使用库从文件中提取消息的最快方法是什么？特别是，是否有可能以某种方式直接逐行读取文件？当然，我可以将整个内容读取到本地文件，`boto.s3.key.get_file()`然后打开文件并逐行读取并检查 id 是否匹配。但是有没有更有效的方法？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T19:26:15.307

S3 无法做到这一点。也就是说，您还有其他一些选择：

1.  在 DynamoDB 中存储记录的长度和位置（字节偏移）而不是行号。这将允许您使用[header仅检索](https://groups.google.com/d/msg/boto-users/ofK9XERJeAc/hwupkxvxI1sJ)[该`Range:`](https://groups.google.com/d/msg/boto-users/ofK9XERJeAc/hwupkxvxI1sJ)记录。
2.  使用缓存层来存储`{ S3 object key, line number } => { position, length }`元组。当您想通过 查找记录时`{ S3 object key, line number }`，请参考缓存。如果您还没有这些数据，则必须像现在一样获取整个文件——但是在获取文件后，您可以计算其中每一行的偏移量，并节省自己的工作量。
3.  将 JSON 记录直接存储在 DynamoDB 中。考虑到 64 KB 的项目限制，这可能可行，也可能不可行。
4.  将每条 JSON 记录分别存储在 S3 中。然后，您可以消除 DynamoDB 键查找，并直接转到 S3 以获取给定记录。

哪个最适合您取决于您​​的应用程序架构、访问此数据的方式、并发问题（考虑到您当前的解决方案，可能并不重要）以及您对延迟和成本的敏感性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-10T15:40:01.510

您可以将内置的 readline 与流一起使用：

```
const readline = require('readline');
const AWS = require('aws-sdk');
const s3 = new AWS.S3();
const params = {Bucket: 'yourbucket', Key: 'somefile.txt'};
const readStream = s3.getObject(params).createReadStream();
const lineReader = readline.createInterface({
  input: readStream,
});
lineReader.on('line', (line) => console.log(line)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-06T18:57:54.907

您可以使用 S3 SELECT 来完成此操作。也适用于镶木地板文件。

[https://docs.aws.amazon.com/AmazonS3/latest/userguide/s3-glacier-select-sql-reference-select.html](https://docs.aws.amazon.com/AmazonS3/latest/userguide/s3-glacier-select-sql-reference-select.html)

# powershell - New-DynamicDistributionGroup：无法将参数“RecipientFilter”绑定到目标

> ID：12696771
> 
> 赞同：2
> 
> 时间：2012-10-02T19:16:31.623
> 
> 标签：powershell, exchange-server-2010

我尝试运行以下命令：

```
New-DynamicDistributionGroup -Name "All Company Office"
-OrganizationalUnit 'domain/A1/Distribution Groups'
-RecipientFilter {((RecipientType -eq 'UserMailbox')
-and (Office -eq 'Fornebu')
–and (Company -eq 'Broadnet'))}
-RecipientContainer 'domain/A1/Users' 
```

但我收到以下错误：

```
New-DynamicDistributionGroup : Cannot bind parameter 'RecipientFilter' to the target.
Exception setting "RecipientFilter": """ is not a valid operator. For a list of
supported operators see the command help.
"((RecipientType -eq 'UserMailbox') -and (Office -eq 'Fornebu') –and (Company -eq 
'Broadnet'))" at position 64."

At line:1 char:140
+ New-DynamicDistributionGroup -Name "_TESTDG Alle Broadnet Fornebu" 
-OrganizationalUnit 'corp.local/A1/Distribution Groups' -RecipientFilter <<<<  
{((RecipientType -eq 'UserMailbox') -and (Office -eq 'Fornebu')
–and (Company -eq 'Broadnet'))} -RecipientContainer 'corp.local/A1/Users'
+ CategoryInfo          : WriteError: (:) [New-DynamicDistributionGroup],
ParameterBindingException
+ FullyQualifiedErrorId :
ParameterBindingFailed,Microsoft.Exchange.Management.RecipientTasks.NewDynamicDistributionGroup 
```

我试过“谷歌”无济于事。请帮助:)（顺便使用powershell 2.0）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:44:05.990

问题是我通过浏览器复制了示例代码。我用我自己的替换了所有粘贴的破折号（-），它起作用了……奇怪！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T20:12:59.637

[这](http://social.technet.microsoft.com/Forums/en-US/exchangesvradmin/thread/97a984e9-c97a-4a9c-aa2c-358761310e82)暗示过滤器的括号有问题。试试这个：

```
-RecipientFilter {((RecipientType -eq 'UserMailbox') -and (Office -eq 'Fornebu' -and Company -eq 'Broadnet'))} 
```

# php - 将一个表的 ID 多次使用到另一个表中

> ID：12696772
> 
> 赞同：1
> 
> 时间：2012-10-02T19:16:33.377
> 
> 标签：php, sql

我一直在研究这种电影商店应用程序，我需要以 VHS 和 DVD 副本的形式录制新电影条目，例如我有 5 个新的 DVD 副本和 3 个新的 VHS 副本，比如说蝙蝠侠电影。我需要将副本记录在 Films Table 和 Copies Table 中，以便稍后我可以搜索我的商店中有多少 Batman 电影的副本（VHS 和 DVD）。我很难提取正确的代码来完成给定的任务。

```
$sql2="INSERT INTO copies (film_id,format,film_c) VALUES (last_insert_id(),'VHS','$vhs')"; mysql_query($sql2);
$sql3="INSERT INTO copies (film_id,format,film_c) VALUES (last_insert_id(),'DVD','$dvd')"; mysql_query($sql3); 
```

这是我最初写的。但它与 VHS 部分配合得很好，但是当涉及到 DVD 副本的第二个查询时，查询会获取 Copies 表的 last_insert_id() 而不是 Films 表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:27:33.060

尝试将以前的 id 保存在 php 变量中。

```
$id = mysql_insert_id();
$sql2="INSERT INTO copies (film_id,format,film_c) VALUES ($id,'VHS','$vhs')"; mysql_query($sql2);
$sql3="INSERT INTO copies (film_id,format,film_c) VALUES ($id,'DVD','$dvd')"; mysql_query($sql3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:28:01.267

在查询之间，使用**mysql_insert_id()**在脚本中保存 id

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T19:29:40.813

这是因为 last_insert_id() 从最后一个插入语句中获取 id。当您进行第一次插入时，它导致 last_insert_id() 的值发生变化：有关详细信息，请参阅[http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)关于如何使用 last_insert_id()。从数据库中检索值并将其保存在本地或将其存储在 sql 变量中可能会有所帮助

# r - r 中的描述无效

> ID：12696773
> 
> 赞同：-2
> 
> 时间：2012-10-02T19:16:37.733
> 
> 标签：r

我无法理解这个错误：

```
Error in file(paste(out.dir, paste("OutSam", i, "M", M, ".txt", sep = ""),  : 
  invalid 'description' argument 
```

为什么和代码对我来说似乎是正确的。请问可以给我解释一下吗？我想要做的是每次我有不同的循环和不同的样本和迭代次数时保存输出。

```
M1 <- function(n){
M1list <- list()
x = rnorm(n)
av <- mean(x)
M1list$av <- av
return(M1list)
}
M2 <- function(n){
M2list <- list()
x = rnorm(n)
va <- var(x)
M2list$va <- va
return(M2list)
}
get.pred <- function(asim,ModelFun,M){
test <- list()
dat <- rnorm(asim)
if(M==1){
Model <- ModelFun(asim)
Ass <- matrix(NA,nrow=asim,ncol=1)
Y <- Model$av
Y <- Y+dat
Ass[,1] <- Y
}
else{
Model <- ModelFun(asim)
Ass <- matrix(NA,nrow=asim,ncol=1)
Y <- Model$va
Y <- Y+dat
Ass[,1] <- Y
}
test$Size <- asim
test$Ass <- Ass
return(test)
}

out.dir <- "C:/Documents and Settings/Fsaid/Desktop/R Output"
Ass.dir <- "C:/Documents and Settings/Fsaid/Desktop/R Output/Assessment"
set.pred <- function(asim,ModelFun){
for(i in asim){
for(mf in ModelFun){
M <- as.integer(gsub("\\M", "", quote(mf)))
zz <- file(paste(out.dir,paste("OutSam",i,"M",M,".txt",sep=""),sep="/"))
Ass <- file(paste(Ass.dir,paste("Asse",i,"M",M,".txt",sep=""),sep="/"))  
Pred <- get.pred(asim=i,ModelFun=mf,M=M)
out <- capture.output(Pred)
cat(out,file=zz,sep="\n",append=TRUE)
write.table(test$Ass,quote=F,file=Ass,row.names=T,col.names=NA,sep="\t")
close(zz)
close(Ass)
     }
    }
   }
Set <- set.pred(asim=c(300,500,700,900,1100),ModelFun = c(M1,M2))

drive <- "E:"
Set <- set.pred(asim=c(300,500,700,900,1100),ModelFun = c(M1,M2)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:25:04.010

如果我只是这样做，这里没有错误

```
 out.dir <- 'c:/foo and bar/subdir/'
 M <- 'MMM'
 file(paste(out.dir, paste("OutSam", i, "M", M, ".txt", sep = "")))) 
```

结果是：

```
 description                          class 
"c:/foo and bar/subdir/ OutSam100MMMM.txt"                         "file" 
                      mode                           text 
                       "r"                         "text" 
                    opened                       can read 
                  "closed"                          "yes" 
                 can write 
                     "yes" 
```

您可能需要仔细查看您的`M`实际情况。

# jquery - simple animation, looking for a specific effect

> ID：12696778
> 
> 赞同：0
> 
> 时间：2012-10-02T19:16:56.497
> 
> 标签：jquery, jquery-animate

I'm struggling with a simple animation in jQuery, I figured I could ask for help!

Here's a working Fiddle of where am at right now : [http://jsfiddle.net/hAWAw/1/](http://jsfiddle.net/hAWAw/1/)

The JS

```
setInterval(function() {
   var number = Math.floor(Math.random() * 9);
   $('#digit1').animate({
      top: "-45px"
   }, 300, function() {
      $(this).css('top', '0px');
      $('#digit1').text(number);
   });
}, 1000);​ 
```

I'm looking for the same effect as on a digital clock, when you see the number flipping.

Please note that im not using images, only text.

So I want the number to appear first at the bottom out of the square, so we cant see it. animate to the middle of the square, stay there a bit, and then animate to the top, so we cant see it anymore. Just like a 3d rotation .

Any help?

Oh and then the next step is that I dont want it to animate every x seconds. I want a more "natural" feeling so it can animate after 2 seconds or after 30 sec lets say. To do this, I thought using setTimeout instead of setInterval, but that didnt work!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:46:50.617

You need 2 animations and delay between. so you need call animate twice and use setTimeout after first animate.

[http://jsfiddle.net/hAWAw/2/](http://jsfiddle.net/hAWAw/2/)

# php - 清理magento缓存时开始和结束标签不匹配：/Varien/Simplexml/Config.php

> ID：12696782
> 
> 赞同：3
> 
> 时间：2012-10-02T19:17:16.240
> 
> 标签：php, zend-framework, magento

```
Entity: line 60: parser error : Opening and ending tag mismatch: config line 28 and confg  in /home/theprint/public_html/lib/Varien/Simplexml/Config.php 
```

当我尝试清理 magento 缓存并启用在 index.php 上打印错误时会发生此异常，如果我在 index.php 上没有此行，则它可以正常工作

```
if ($_SERVER['REMOTE_ADDR'] == '83.134.115.xxx') { Mage::setIsDeveloperMode(true); ini_set('display_errors', 1); }

Warning: simplexml_load_string() [function.simplexml-load-string]: Entity: line 60: parser error : Opening and ending tag mismatch: config line 28 and confg  in /home/theprint/public_html/lib/Varien/Simplexml/Config.php on line 510

#0 [internal function]: mageCoreErrorHandler(2, 'simplexml_load_...', '/home/theprint/...', 510, Array)
#1 /home/theprint/public_html/lib/Varien/Simplexml/Config.php(510): simplexml_load_string('loadString('loadFile('/home/theprint/...')
#4 /home/theprint/public_html/app/code/core/Mage/Admin/Model/Config.php(59): Mage_Core_Model_Config->loadModulesConfiguration('adminhtml.xml', Object(Varien_Simplexml_Config))
#5 /home/theprint/public_html/app/code/core/Mage/Core/Model/Config.php(1351): Mage_Admin_Model_Config->__construct(Array)
#6 /home/theprint/public_html/app/Mage.php(432): Mage_Core_Model_Config->getModelInstance('admin/config', Array)
#7 /home/theprint/public_html/app/Mage.php(446): Mage::getModel('admin/config', Array)
#8 /home/theprint/public_html/app/code/core/Mage/Adminhtml/Block/Page/Menu.php(124): Mage::getSingleton('admin/config')
#9 /home/theprint/public_html/app/code/core/Mage/Adminhtml/Block/Page/Menu.php(89): Mage_Adminhtml_Block_Page_Menu->_buildMenuArray()
#10 /home/theprint/public_html/app/design/adminhtml/default/default/template/page/menu.phtml(32): Mage_Adminhtml_Block_Page_Menu->getMenuArray()
#11 /home/theprint/public_html/app/code/core/Mage/Core/Block/Template.php(241): include('/home/theprint/...')
#12 /home/theprint/public_html/app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template->fetchView('adminhtml/defau...')
#13 /home/theprint/public_html/app/code/core/Mage/Core/Block/Template.php(286): Mage_Core_Block_Template->renderView()
#14 /home/theprint/public_html/app/code/core/Mage/Adminhtml/Block/Template.php(81): Mage_Core_Block_Template->_toHtml()
#15 /home/theprint/public_html/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Adminhtml_Block_Template->_toHtml()
#16 /home/theprint/public_html/app/code/core/Mage/Core/Block/Abstract.php(582): Mage_Core_Block_Abstract->toHtml()
#17 /home/theprint/public_html/app/code/core/Mage/Core/Block/Abstract.php(526): Mage_Core_Block_Abstract->_getChildHtml('menu', true)
#18 /home/theprint/public_html/app/design/adminhtml/default/default/template/page.phtml(53): Mage_Core_Block_Abstract->getChildHtml('menu')
#19 /home/theprint/public_html/app/code/core/Mage/Core/Block/Template.php(241): include('/home/theprint/...')
#20 /home/theprint/public_html/app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template->fetchView('adminhtml/defau...')
#21 /home/theprint/public_html/app/code/core/Mage/Core/Block/Template.php(286): Mage_Core_Block_Template->renderView()
#22 /home/theprint/public_html/app/code/core/Mage/Adminhtml/Block/Template.php(81): Mage_Core_Block_Template->_toHtml()
#23 /home/theprint/public_html/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Adminhtml_Block_Template->_toHtml()
#24 /home/theprint/public_html/app/code/core/Mage/Core/Model/Layout.php(529): Mage_Core_Block_Abstract->toHtml()
#25 /home/theprint/public_html/app/code/core/Mage/Core/Controller/Varien/Action.php(391): Mage_Core_Model_Layout->getOutput()
#26 /home/theprint/public_html/app/code/core/Mage/Adminhtml/controllers/CacheController.php(48): Mage_Core_Controller_Varien_Action->renderLayout()
#27 /home/theprint/public_html/app/code/core/Mage/Core/Controller/Varien/Action.php(420): Mage_Adminhtml_CacheController->indexAction()
#28 /home/theprint/public_html/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('index')
#29 /home/theprint/public_html/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#30 /home/theprint/public_html/app/code/core/Mage/Core/Model/App.php(347): Mage_Core_Controller_Varien_Front->dispatch()
#31 /home/theprint/public_html/app/Mage.php(640): Mage_Core_Model_App->run(Array)
#32 /home/theprint/public_html/www.theprinterdepo.com/index.php(55): Mage::run('printerdepo', 'website')
#33 {main} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T19:36:35.207

安装中的`adminhtml.xml`模块配置文件之一包含无效的 XML。如果您无法确定是哪一个，请转到第 5101 行

```
/home/theprint/public_html/lib/Varien/Simplexml/Config.php 
```

并在调用周围添加一些调试代码，以`simplexml_load_string`使 PHP`var_dump`成为完整路径。那应该指向非格式良好的 XML 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-13T07:07:46.137

将公共函数 loadString($string) 更改如下。检查行号 510

公共函数加载字符串（$字符串）

```
{
    if (is_string($string)) {
        // Enable internal errors
        libxml_use_internal_errors(true);
        $xml = simplexml_load_string($string, $this->_elementClass);
        if (false === $xml) {
            // Put breakpoint here
            $errors = libxml_get_errors();
        }
        if ($xml instanceof Varien_Simplexml_Element) {
            $this->_xml = $xml;
            return true;
        }
    } else {
        Mage::logException(new Exception('"$string" parameter for simplexml_load_string is not a string'));
    }
    return false;
} 
```

# java - 配置 Hibernate 以使用 JPA 风格的配置而不进入 EE

> ID：12696787
> 
> 赞同：1
> 
> 时间：2012-10-02T19:17:41.323
> 
> 标签：java, hibernate, orm, ejb

我正在对最近将 EJB 代码转换为本机 Hibernate 代码的过程进行故障排除（这是一个痛苦的过程，因为 EJB 的便利性让我非常受宠若惊）。

我觉得麻烦的一件事是 Hibernate 将其实体声明保存在 hbm.xml 文件中，然后将配置保存在单独的文件中。虽然这不一定是一个大问题，但 Netbeans 向导并没有真正让开发人员只需单击一个按钮、即时检测所有实体并更新配置文件。

然而，使用persistence.xml，我只需添加类就可以轻松地做到这一点而忘记它。另一个好处是persistence.xml 存储了ORM 所需的几乎所有内容，除了特定于类的注释（我保留）。

话虽如此，我有什么办法让 Hibernate (1) 远离 EE 和 (2) 使用 persistence.xml 来获取连接、映射等？

另外，一个相关的问题 - CriteriaQuery 显然是 Java EE 的东西。我真正喜欢使用 EJB 的一件事是它有很强的编译时约束。例如，我可以将 ClassName_.myAttribute 直接作为参数放在 CriteriaQuery 中，而如果我使用 Hibernate 本机“Criteria”对象，则必须使用“my_attribute”，它不受编译时完整性检查的影响（注意： ClassName_.myAttribute 映射到表上的“my_attribute”）。

那么有没有办法保持编译时的完整性呢？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:28:31.620

Hibernate EntityManager 可以在 Java EE 容器之外使用。请参阅[http://docs.jboss.org/hibernate/core/4.0/hem/en-US/html_single/#architecture-javase](http://docs.jboss.org/hibernate/core/4.0/hem/en-US/html_single/#architecture-javase)。

此外，即使使用 Hibernate 原生 API，由于您使用的是注解，因此您不需要任何 hbm.xml 文件。只是一个列出实体和一些 Hibernate 属性的中央 Hibernate 配置文件。

# javascript - 使用AngularJS将多维数组变成多级列表

> ID：12696791
> 
> 赞同：13
> 
> 时间：2012-10-02T19:17:50.507
> 
> 标签：javascript, angularjs

我正在使用 AngularJS 并尝试使用 ng-repeat 等来获取多维数组并将其作为多级列表放入 DOM。

**由此：**

```
 var menuOptions = [
        ["Page One"],
        ["Page Two"],
        ["Page Three"],
        ["Page Four", ["Sub-Page 1", "Sub-Page 2", "Sub-Page 3"] ],
        ["Page Five"]
    ]; 
```

**对此：**

```
 <ul>
        <li>Page One</li>
        <li>Page Two</li>
        <li>Page Three</li>
        <li>Page Four 
            <ul>
                <li>Sub-Page 1</li>
                <li>Sub-Page 2</li>
                <li>Sub-Page 3</li>
            </ul>
        </li>
        <li>Page Five</li>
   </ul> 
```

我无法在 Angular JS 文档中找到任何内容，并且在网上搜索也无济于事。我知道我可以用普通的 'ol Javascript 或 PHP 来处理这样的事情，但我想利用一些 Angular JS 的东西，比如 ng-repeat。

任何输入表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-02T19:34:26.090

如果你把你的阵列变成以下

```
var menuOptions = [
    ["Page One", []],
    ["Page Two", []],
    ["Page Three", []],
    ["Page Four", ["Sub-Page 1", "Sub-Page 2", "Sub-Page 3"] ],
    ["Page Five", []]
]; 
```

你应该能够做到这一点：

```
<ul>
  <li ng-repeat='option in menuOptions'>
    {{option[Ø]}}
    <ul>
      <li ng-repeat='suboption in option[1]'>{{suboption}}</li>
    </ul>
  <li>
</ul> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-15T20:47:14.300

如果您不知道密钥的名称，可以使用这种格式...

JSON

```
{
  "aclType": "combined",
  "active": 1,
  "attributes": {
    "a6f8f9fb89ac4b2b12121c4ec4fa5441/#": [
      "pub",
      "sub",
      "get",
      "post",
      "delete"
    ],
    "a5f8f9eb89ac4b2b12121c4ec4fa8670/#": [
      "pub",
      "sub",
      "get",
      "post",
      "delete"
    ]
  }
} 
```

你可以这样循环：

```
<h2>Account Permissions</h2>
<ul>
    <li>
        <p><strong>Active:</strong> {{ acl.active}}</p>
    </li>
    <li ng-repeat="(key, data) in acl.attributes">
        <p><strong>{{ key }}</strong></p>
        <ul>
            <li ng-repeat="permission in data">{{ permission }}</li>
        </ul>
    </li>
</ul> 
```

# c# - 如何在 razor/mvc 4 中创建基于类的按列视图

> ID：12696793
> 
> 赞同：0
> 
> 时间：2012-10-02T19:17:56.547
> 
> 标签：c#, razor, asp.net-mvc-4

我希望在按列的表格布局中根据我的类创建一个通用的视图。

模型是：

```
public class Client
{
    [DisplayName("Client Account")]
    public int ClientID { get; set; }
    [DisplayName("Client Name")]
    public string Name { get; set; }
    public string Address { get; set; }
    [DisplayName("Home Phone")]
    public string PhoneH { get; set; }
    [DisplayName("Emergency Phone")]
    public string PhoneE { get; set; }
    [DisplayName("Alternate Phone")]
    public string PhoneA { get; set; }
    public string Directions { get; set; }
    [DisplayName("Comments")]
    public string SComment { get; set; }
} 
```

形式为

字段 1 值1

字段 2 值2

字段 3 值3

有没有办法让第一列使用一种样式，第二列使用另一种样式？

我正在尝试根据类的属性一般地执行此操作。

我正在使用 MVC4/razor/VS2012

非常感谢！

# ruby-on-rails - 简化的“逻辑”模型以干净地访问高度规范化的数据库

> ID：12696796
> 
> 赞同：4
> 
> 时间：2012-10-02T19:18:11.060
> 
> 标签：ruby-on-rails, ruby, forms, simple-form

我知道使用表单添加/编辑/删除（嵌套）记录的一种方法是在相应的模型中使用 :accepts_nested_attributes_for: 。但是，当这种嵌套扩展到大约 4 级时（由于数据库的规范化），并且我想在网站上显示所有这些级别以进行编辑，这种方法似乎相当麻烦（而且丑陋）。

我想知道是否有一种方法可以使用 getter 和 setter 方法定义“超级”模型，允许我在一个地方编辑必要的数据。作为一个简化的例子，考虑：

```
class Person < ActiveRecord::Base
  attr_accessible :name, :age

  has_one :address
end

class Address < ActiveRecord::Base
  attr_accessible :street, :zip, :country

  belongs_to :person
end 
```

我想以一种形式显示/编辑/更新/等名称、年龄、街道、邮编、国家。很清楚如何使用 Accepts_nested_attributes_for 执行此操作。但是我想要一个类，比如 PersonalInformation，它通过传入 Person 的 id 来结合两个类中的字段名称、年龄、街道、邮编、国家/地区。然后我想用这个类作为网站的接口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-19T07:37:35.957

类似于此处描述的表单对象：

[http://robots.thoughtbot.com/activemodel-form-objects](http://robots.thoughtbot.com/activemodel-form-objects)

我一直在尝试各种实现，但还没有找到完美的解决方案，但它们确实简化了“将一堆模型放在一起”。codeclimate 博客也涉及到它（第 3 项）：

[http://blog.codeclimate.com/blog/2012/10/17/7-ways-to-decompose-fat-activerecord-models](http://blog.codeclimate.com/blog/2012/10/17/7-ways-to-decompose-fat-activerecord-models)

codeclimate 帖子使用包含 ActiveModel 模块的旧方法（除非您现在想单独包含它们，否则无需单独包含它们），但概念是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:31:46.187

我会推荐[简单的形式](https://github.com/plataformatec/simple_form "简单的模式")gem。我从他们的文档中修改了一个示例，以反映您的模型完全符合您的要求：

**楷模：**

```
class Person < ActiveRecord::Base
  attr_accessible :name, :age

  has_one :address
end

class Address < ActiveRecord::Base
  attr_accessible :street, :zip, :country

  belongs_to :person
end 
```

**看法：**

```
<%= simple_form_for @person do |f| %>
  <%= f.input :name %>
  <%= f.input :age %>
  <%= f.association :street %>
  <%= f.association :zip %>
  <%= f.association :country %>
  <%= f.button :submit %>
<% end %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T19:34:37.580

您可以在 Person 模型上使用虚拟属性，并将自定义分配逻辑放在每个可编辑`Address`属性的 getter/setter 中。

```
class Person < ActiveRecord::Base
  attr_accessible :name, :age

  has_one :address

  def street=(new_street)
    # ...
  end
end 
```

从长远来看，这最终可能会变得更加复杂。

# android - 如何通过 shop_name 获取纬度和经度并将其显示到地图上？

> ID：12696801
> 
> 赞同：0
> 
> 时间：2012-10-02T19:18:42.917
> 
> 标签：android, android-mapview

我正在尝试通过 shop_name 从我的数据库中获取纬度和经度，以便我可以使用它从我的位置获取方向。

这是我的地图活动：

```
public class SearchLocation extends MapActivity {
private MapView mapView;
private LocationManager locManager;
private LocationListener locListener;

location_dao location_dao = new location_dao();

String shopname = "0", address = "0", phone_number = "0";

public CharSequence lat = "0", lng = "0", lat2 = "0", lng2 = "0";

LocationManager mlocManager;
LocationListener mlocListener;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map_shoprepair);

    final ActionBar actionBar = (ActionBar) findViewById(R.id.actionbar);
    actionBar.setTitle(getString(R.string.app_name));

    actionBar.setHomeAction(new IntentAction(this, new Intent(this,
            Home_Activity.class), R.drawable.home));

    initMap();
    initLocationManager();
}

private void initMap() {
    mapView = (MapView) findViewById(R.id.map_view);
    mapView.setBuiltInZoomControls(true);
    mapView.displayZoomControls(true);
    mapView.getController().setZoom(15);
    mapView.setSatellite(false);

}

private void initLocationManager() {
    locManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    locListener = new LocationListener() {
        //method ini akan dijalankan apabila koordinat GPS berubah
        public void onLocationChanged(Location newLocation) {
            tampilkanPosisikeMap(newLocation);
        }

        public void onProviderDisabled(String arg0) {
        }

        public void onProviderEnabled(String arg0) {
        }

        public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
        }
    };
    locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,
            locListener);

}

protected void tampilkanPosisikeMap(Location newLocation) {
    List overlays = mapView.getOverlays();

    // first remove old overlay
    if (overlays.size() > 0) {
        for (Iterator iterator = overlays.iterator(); iterator.hasNext();) {
            iterator.next();
            iterator.remove();
        }
    }

    // transform the location to a geopoint
    GeoPoint geopoint = new GeoPoint(
    (int) (newLocation.getLatitude() * 1E6), (int) (newLocation.getLongitude() * 1E6));

    // initialize icon
    Drawable icon = getResources().getDrawable(R.drawable.marker1);
    icon.setBounds(0, 0, icon.getIntrinsicWidth(), icon.getIntrinsicHeight());

    // create my overlay and show it
    mapsOverlay overlay = new mapsOverlay(icon);
    OverlayItem item = new OverlayItem(geopoint, "My Location", null);
    overlay.addItem(item);
    mapView.getOverlays().add(overlay);

    // move to location
    mapView.getController().animateTo(geopoint);

    // redraw map
    mapView.postInvalidate();
}

public class MyLocationListener implements LocationListener {
    @Override
    public void onLocationChanged(final Location loc) {
        SearchLocation.this.parsingGetServerLocationData(shopname);

        if (lat != "0" && lng != "0") {
            loc.getLatitude();

            loc.getLongitude();

            mlocManager.removeUpdates(this);
            lat2 = String.valueOf(loc.getLatitude());
            lng2 = String.valueOf(loc.getLongitude());

            Location bLocation = new Location("reverseGeocoded");
            bLocation.setLatitude(Double.parseDouble((String) lat2));
            bLocation.setLongitude(Double.parseDouble((String) lng2));
            Location aLocation = new Location("reverseGeocoded");
            aLocation.setLatitude(Double.parseDouble((String) lat));
            aLocation.setLongitude(Double.parseDouble((String) lng));

            Location myLocation = LocationHelper
                    .getLastLocation(getBaseContext());

            int distance = (int) aLocation.distanceTo(bLocation);

            // handler.sendEmptyMessage(0);

            // Toast.makeText(searchLocation.this, "Your distance: " +
            // distance + " Meter", Toast.LENGTH_SHORT).show();

            Uri uri = Uri.parse("http://maps.google.com/maps?f=d&saddr="
                    + myLocation.getLatitude() + "%20"
                    + myLocation.getLongitude() + "&daddr=" + lat + "%20"
                    + lng + "&hl=en");
            Intent it = new Intent(Intent.ACTION_VIEW, uri);

            startActivity(it);
            lat = "0";
            lng = "0";
        } else {
            // handler.sendEmptyMessage(0);
            // Toast.makeText(searchLocation.this, "no data found",
            // Toast.LENGTH_LONG).show();
        }
    }

    public void onProviderDisabled(String provider) {
        Toast.makeText(getApplicationContext(),
                "Gps Disabled, Switch to Network", Toast.LENGTH_SHORT)
                .show();
    }

    @Override
    public void onProviderEnabled(String provider) {
        Toast.makeText(getApplicationContext(), "Gps Enabled",
                Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }
}

public void parsingGetServerLocationData(String shop_name) {
    try {
        JSONArray jArray = new JSONArray(
                location_dao.getServerLocationData(shop_name));
        for (int i = 0; i < jArray.length(); i++) {
            JSONObject json_data = jArray.getJSONObject(i);
            // Get an output to the screen
            shopname = json_data.getString("SHOP_NAME");
            lat = json_data.getString("LATITUDE");
            lng = json_data.getString("LONGITUDE");

            Log.e("log_tag",
                    "parsingGetServerLocationData" + shopname.toString());
        }

    } catch (JSONException e) {
        // TODO: handle exception
        Log.e("log_tag", "Error parsing data " + e.toString());
        shopname = "0";
        lat = "0";
        lng = "0";
    }

}

public void parsingGetServerDetailLocationData(String shop_name)
{
    try{
           JSONArray jArray = new JSONArray(location_dao.getServerDetailLocationData(shop_name));
           for(int i=0;i<jArray.length();i++){
               JSONObject json_data = jArray.getJSONObject(i);
               //Get an output to the screen                   
               shopname = json_data.getString("SHOP_NAME");
               address = json_data.getString("ADDRESS");
               phone_number = json_data.getString("PHONE_NUMBER");

               Log.e("log_tag", "parsingGetServerDetailLocationData: "+shopname.toString());
           }
       }catch(JSONException e){
           Log.e("log_tag", "Error parsing data "+e.toString());
           shopname = "0";
           address = "0";
           phone_number = "0";
       }
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}} 
```

这是我调用地图活动的代码：

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    final Entity_BikeShopRepair toko = adapterShop.getItem(position);

    CharSequence[] items = { "View on Map", "Call Shop" };

    AlertDialog.Builder builder = new AlertDialog.Builder(
            Tab_Shop_Repair_ListView_Activity.this);
    builder.setTitle(toko.getShop_Name());
    builder.setItems(items, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int item) {
            switch (item) {
            case 0:
                String nama = toko.getShop_Name().toString();

                Intent intentmap = new Intent(
                        Tab_Shop_Repair_ListView_Activity.this,
                        SearchLocation.class);
                startActivity(intentmap);
                break;
            case 1:
                String number = "tel:" + toko.getPhone_Number().toString();

                Intent intent = new Intent(Intent.ACTION_CALL, Uri
                        .parse(number));
                startActivity(intent);

                break;
            case 2:
                break;
            }
        }
    });
    AlertDialog alert = builder.create();
    alert.show();
} 
```

![在此处输入图像描述](../Images/f45d986886d127c0b6a54387bb28693e.png)

这是我的日志：

> 10-02 22:40:32.859: E/AndroidRuntime(4375): android.view.WindowManager$BadTokenException: 无法添加窗口——令牌 android.os.BinderProxy@405139f0 无效；您的活动正在运行吗？10-02 22:40:32.859: E/AndroidRuntime(4375): 在 android.view.ViewRoot.setView(ViewRoot.java:532) 10-02 22:40:32.859: E/AndroidRuntime(4375): 在 android. view.WindowManagerImpl.addView(WindowManagerImpl.java:177) 10-02 22:40:32.859: E/AndroidRuntime(4375): 在 android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91) 10-02 22:40: 32.859: E/AndroidRuntime(4375): 在 android.view.Window$LocalWindowManager.addView(Window.java:424) 10-02 22:40:32.859: E/AndroidRuntime(4375): 在 android.app.Dialog.show (Dialog.java:241) 10-02 22:40:32.859: E/AndroidRuntime(4375): 在 com.wilis.hellotabwidget.Tab_Shop_Repair_ListView_Activity$1。Katamso 210 -212","地址":"Jl. 布里金德。Katamso 210 -212","2":"0274375180","phone_number":"0274375180"},{"0":"Sinar Makmur","shop_name":"Sinar Makmur","1":"Jl. Brigjen Katamso 92B","地址":"Jl. Brigjen Katamso 92B","2":"0274378352","phone_number":"0274378352"},{"0":"Orion","shop_name":"Orion","1":"Jl Brigjen Katamso 56", "address":"Jl Brigjen Katamso 56","2":"0274374986","phone_number":"0274374986"},{"0":"Pasar Sepeda PPSY","shop_name":"Pasar Sepeda PPSY"," 1":"Jl. 部长苏佩诺，索罗苏坦","地址":"Jl. Menteri Supeno, Sorosutan","2":"-","phone_number":"-"},{"0":"Toko Sepeda Adi Mitra","shop_name":"Toko Sepeda Adi Mitra","1": “杰尔。Mayjen Sutoyo 09","地址":"Jl. Mayjen Sutoyo 09","2":"0274375199","phone_number":"0274375199"},{"0":"Pasar Sepeda GAPPSTA","shop_name":"Pasar Sepeda GAPPSTA","1":"Jl. 公吨。Haryono","地址":"Jl. 公吨。Haryono","2":"-","phone_number":"-"},{"0":"Pasar Sepeda Terban","shop_name":"Pasar Sepeda Terban","1":"Jl. C. Simanjuntak"," 地址":"Jl. C. Simanjuntak","2":"-","phone_number":"-"},{"0":"Toko Sepeda Marcopolo","shop_name":"Toko Sepeda Marcopolo","1":"Jl. Sosrowijayan No. 11","地址":"Jl. Sosrowijayan No. 11","2":"0274587636","phone_number":"0274587636"},{"0":"Toko Sepeda Esa Jaya","shop_name":"Toko Sepeda Esa Jaya","1": “杰尔。哈。Dahlan No 72","地址":"Jl. 哈。Dahlan No 72","2":"0274515605","phone_number":"0274515605"},{"0":"Toko Sepeda United","shop_name":"Toko Sepeda United","1":"Jl. P. Diponegoro 42", 地址":"Jl. P. Diponegoro 42","2":"0274518375","phone_number":"0274518375"},{"0":"Toko Sepeda Taman Sari Indah","shop_name":"Toko Sepeda Taman Sari Indah","1 ":"Jl.Wachid Hasyim 129","address":"Jl.Wachid Hasyim 129","2":"-","phone_number":"-"},{"0":"Toko Sepeda Salam", "shop_name":"Toko Sepeda Salam","1":"Jl.Wachid Hasyim 19","address":"Jl.Wachid Hasyim 19","2":"0274374913","phone_number":"0274374913"} ,{"0":"AB 自行车","shop_name":"AB 自行车","1":"Jl. HOS Cokroaminoto No.45","地址":"Jl. HOS Cokroaminoto No.45","2":"0274618027","phone_number":"0274618027"},{"0":"Indo Jaya Sakti","shop_name":"Indo Jaya Sakti","1":" Jl。Hos Cokroaminoto No. 157 B","address":"Jl. Hos Cokroaminoto No. 157 B","2":"0274620188","phone_number":"0274620188"},{"0":"Toko Sepeda Rodalink","shop_name":"Toko Sepeda Rodalink","1": “杰尔。Laskda Adisucipto Km 6 No. 155C","address":"Jl. Laskda Adisucipto Km 6 No. 155C","2":"0274487229","phone_number":"0274487229"},{"0":"Pedro Pit Shop (Pusat)","shop_name":"Pedro Pit Shop (Pusat) )","1": 549：E/ZoomButtonsController(4493)：如果所有者视图未附加到窗口，则无法使缩放控制器可见。10-02 22:41:52.609：I/MapActivity(4493)：处理网络更改通知：已连接

它从我的数据库中获取所有数据，但是当我单击时我只想显示一个商店名称。

```
10-02 22:41:44.609: E/HttpResponse(4493): {"result":1,"data":[{"0":"Toko Sepeda Alam Baru","shop_name":"Toko Sepeda Alam Baru","1":"Jl. Malioboro No. 151","address":"Jl. Malioboro No. 151","2":"0274514903","phone_number":"0274514903"},{"0":"Toko Sepeda Tri Jaya","shop_name":"Toko Sepeda Tri Jaya","1":"Jl. Bridjend. Katamso 210 -212","address":"Jl. Bridjend. Katamso 210 -212","2":"0274375180","phone_number":"0274375180"},{"0":"Sinar Makmur","shop_name":"Sinar Makmur","1":"Jl. Brigjen Katamso 92B","address":"Jl. Brigjen Katamso 92B","2":"0274378352","phone_number":"0274378352"},{"0":"Orion","shop_name":"Orion","1":"Jl Brigjen Katamso 56","address":"Jl Brigjen Katamso 56","2":"0274374986","phone_number":"0274374986"},{"0":"Pasar Sepeda PPSY","shop_name":"Pasar Sepeda PPSY","1":"Jl. Menteri Supeno, Sorosutan","address":"Jl. Menteri Supeno, Sorosutan","2":"-","phone_number":"-"},{"0":"Toko Sepeda Adi Mitra","shop_name":"Toko Sepeda Adi Mitra","1":"Jl. Mayjen Sutoyo 09","address":"Jl. Mayjen Sutoyo 09","2":"0274375199","phone_number":"0274375199"},{"0":"Pasar Sepeda GAPPSTA","shop_name":"Pasar Sepeda GAPPSTA","1":"Jl. MT. Haryono","address":"Jl. MT. Haryono","2":"-","phone_number":"-"},{"0":"Pasar Sepeda Terban","shop_name":"Pasar Sepeda Terban","1":"Jl. C. Simanjuntak","address":"Jl. C. Simanjuntak","2":"-","phone_number":"-"},{"0":"Toko Sepeda Marcopolo","shop_name":"Toko Sepeda Marcopolo","1":"Jl. Sosrowijayan No. 11","address":"Jl. Sosrowijayan No. 11","2":"0274587636","phone_number":"0274587636"},{"0":"Toko Sepeda Esa Jaya","shop_name":"Toko Sepeda Esa Jaya","1":"Jl. KHA. Dahlan No 72","address":"Jl. KHA. Dahlan No 72","2":"0274515605","phone_number":"0274515605"},{"0":"Toko Sepeda United","shop_name":"Toko Sepeda United","1":"Jl. P. Diponegoro 42","address":"Jl. P. Diponegoro 42","2":"0274518375","phone_number":"0274518375"},{"0":"Toko Sepeda Taman Sari Indah","shop_name":"Toko Sepeda Taman Sari Indah","1":"Jl.Wachid Hasyim 129","address":"Jl.Wachid Hasyim 129","2":"-","phone_number":"-"},{"0":"Toko Sepeda Salam","shop_name":"Toko Sepeda Salam","1":"Jl.Wachid Hasyim 19","address":"Jl.Wachid Hasyim 19","2":"0274374913","phone_number":"0274374913"},{"0":"AB Bike","shop_name":"AB Bike","1":"Jl. HOS Cokroaminoto No.45","address":"Jl. HOS Cokroaminoto No.45","2":"0274618027","phone_number":"0274618027"},{"0":"Indo Jaya Sakti","shop_name":"Indo Jaya Sakti","1":"Jl. Hos Cokroaminoto No. 157 B","address":"Jl. Hos Cokroaminoto No. 157 B","2":"0274620188","phone_number":"0274620188"},{"0":"Toko Sepeda Rodalink","shop_name":"Toko Sepeda Rodalink","1":"Jl. Laskda Adisucipto Km 6 No. 155C","address":"Jl. Laskda Adisucipto Km 6 No. 155C","2":"0274487229","phone_number":"0274487229"},{"0":"Pedro Pit Shop (Pusat)","shop_name":"Pedro Pit Shop (Pusat)","1":"Jln. Kebon Agung Km 4,6 Los Danon, Godean","address":"Jln. Kebon Agung Km 4,6 Los Danon, Godean","2":"0816972823","phone_number":"0816972823"},{"0":"Pedro Pit Shop (Cabang)","shop_name":"Pedro Pit Shop (Cabang)","1":"Godean Km 9, Godean","address":"Godean Km 9, Godean","2":"02747171665","phone_number":"02747171665"},{"0":"Pedro Pit Shop (Cabang)","shop_name":"Pedro Pit Shop (Cabang)","1":"Jln. Lingkar Utara (ringroad), Karangnongko, Maguwo, Depok, Sleman","address":"Jln. Lingkar Utara (ringroad), Karangnongko, Maguwo, Depok, Sleman","2":"085729075277","phone_number":"085729075277"},{"0":"Nurhayati Bike","shop_name":"Nurhayati Bike","1":"Jalan Raya Cebongan Sleman","address":"Jalan Raya Cebongan Sleman","2":"-","phone_number":"-"},{"0":"Love Sepeda","shop_name":"Love Sepeda","1":"Gandok, Gang suryo No.16, Condongcatur, Depok, Sleman","address":"Gandok, Gang suryo No.16, Condongcatur, Depok, Sleman","2":"085743919166","phone_number":"085743919166"}]} 
```

如何通过 shop_name 获取纬度和经度？我在代码中做错了什么，请帮助我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:25:26.963

您可以查看`Geocoder.getFromLocationName()`( [javadoc](http://developer.android.com/reference/android/location/Geocoder.html#getFromLocationName%28java.lang.String,%20int%29) )，您可以将您在 JSON 结构中的商店地址尽可能多地传递给其中。

检索到的`Address`对象具有可以传递给地图的纬度和经度。

# java - 带路径压缩算法的加权快速联合

> ID：12696803
> 
> 赞同：10
> 
> 时间：2012-10-02T19:18:49.163
> 
> 标签：java, algorithm, union-find

有一个“带路径压缩的加权快速联合”算法。

编码：

```
public class WeightedQU 
{
    private int[] id;
    private int[] iz;

    public WeightedQU(int N)
    {
        id = new int[N];
        iz = new int[N];
        for(int i = 0; i < id.length; i++)
        {
            iz[i] = i;
            id[i] = i;
        }
    }

    public int root(int i)
    {
        while(i != id[i])
        {
            id[i] = id[id[i]];   // this line represents "path compression"
            i = id[i];
        }
        return i;
    }

    public boolean connected(int p, int q)
    {
        return root(p) == root(q);
    }

    public void union(int p, int q)   // here iz[] is used to "weighting"
    {
        int i = root(p);
        int j = root(q);
        if(iz[i] < iz[j])
        {
            id[i] = j;
            iz[j] += iz[i];
        }
        else
        {
            id[j] = i;
            iz[i] += iz[j];
        }
    }
} 
```

问题：

1.  路径压缩如何工作？`id[i] = id[id[i]]`意味着我们只到达节点的第二个祖先，而不是根。

2.  `iz[]`包含从`0`到 的整数`N-1`。如何`iz[]`帮助我们知道集合中的元素数量？

有人可以为我澄清一下吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-02T19:29:09.530

首先明白那`id`是一片**森林**。`id[i]`是 的父级`i`。如果`id[i] == i`这意味着那`i`是一个根。

对于某个根`i`（其中`id[i] == i`），则**树**中以 为根`iz[i]`的元素的数量。**`i`**

 **```
public int root(int i)
{
    while(i != id[i])
    {
        id[i] = id[id[i]];   // this line represents "path compression"
        i = id[i];
    }
    return i;
} 
```

> 路径压缩如何工作？`id[i] = id[id[i]]`意味着我们只到达节点的第二个祖先，而不是根。

当我们上升树以找到根时，我们将节点从它们的父母移动到他们的祖父母。这使树部分变平。请注意，此操作不会更改节点所属的树，这就是我们感兴趣的全部。这就是路径压缩技术。

（您确实注意到循环对吗？ `while(i == id[i])`终止一次`i`是根节点）

> `iz[]`包含从`0`到 的整数`N-1`。如何`iz[]`帮助我们知道集合中的元素数量？

代码中存在转录错误：

```
for(int i = 0; i < id.length; i++)
{
    iz[i] = i; // WRONG
    id[i] = i;
} 
```

这是正确的版本：

```
for(int i = 0; i < id.length; i++)
{
    iz[i] = 1; // RIGHT
    id[i] = i;
} 
```

`iz[i]`是树根的元素数`i`（或者如果`i`不是根则`iz[i]`未定义）。所以它应该被初始化为`1`，而不是`i`。最初，每个元素都是一个单独的“单例”树，其大小为`1`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-10-23T20:29:54.230

id[i] = id[id[i]]; // 这一行代表“路径压缩”

上面的代码是联合查找幻灯片中提到的“更简单的一次性变体”（算法，第一部分，Kevin Wayne 和 Robert Sedgewick）。因此，您对问题 1 的猜测是正确的。每个被检查的节点都指向它的祖父母。

为了使每个检查的节点都指向根，我们需要两遍实现：

```
 /**
 * Returns the component identifier for the component containing site <tt>p</tt>.
 * @param p the integer representing one site
 * @return the component identifier for the component containing site <tt>p</tt>
 * @throws java.lang.IndexOutOfBoundsException unless 0 <= p < N
 */
public int find(int p) {
    int root = p;
    while (root != id[root])
        root = id[root];
    while (p != root) {
        int newp = id[p];
        id[p] = root;
        p = newp;
    }
    return root;
} 
```

参考： [http ://algs4.cs.princeton.edu/15uf/WeightedQuickUnionPathCompressionUF.java.html](http://algs4.cs.princeton.edu/15uf/WeightedQuickUnionPathCompressionUF.java.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-26T07:45:51.050

这里还要注意一件事：

在我们做`id[i]=id[id[i]]`ie的时候找根；让我在它的祖父母之下

- 然后大小`id[i]`将减少 ii,e 的大小；`iz[id[i]]-=iz[i]`

现在这使代码完全正确。

我对此不确定，但直觉上我觉得，它的缺失不会引起问题，因为我们总是在比较根的大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T10:13:16.337

问题1\. id[i] = id[id[i]]; 这条线是不对的。只到达根的第二个祖先。你会意识到while循环while（i！= id [i]）仅在节点i指向根时停止，即当i == id [i]时。此时我们应该使用行 id[i] = id[id[i]] 将节点指向根；其中内部 id[i] 是根。

问题2。

初始化 iz[i] = i; 是错误的；实际上应该是 iz[i] = 1; 意思是，每个节点的大小在开始时都初始化为 1，因为它们的大小为 1。在联合函数中，您意识到我们有 iz[j] += iz[i]; 和 iz[i] += iz[j]; 它将根节点的大小更新为连接在一起的两个组件的大小之和。这有效地更新了节点大小。**

# google-maps-api-3 - 谷歌地图 API v3 信息窗口不显示

> ID：12696811
> 
> 赞同：1
> 
> 时间：2012-10-02T19:19:20.030
> 
> 标签：google-maps-api-3

无法理解为什么信息窗口不会显示在此页面上...

[http://www.triangledesign.biz/contact-dev.php](http://www.triangledesign.biz/contact-dev.php)

还注意到谷歌示例没有信息窗口......

[https://google-developers.appspot.com/maps/documentation/javascript/examples/infowindow-simple](https://google-developers.appspot.com/maps/documentation/javascript/examples/infowindow-simple)。

代码...

```
 var mapOptions = {
      center: new google.maps.LatLng(51.539104, -2.400264),
      zoom: 16,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

    var image = 'cup-sm.png';
    var myLatLng = new google.maps.LatLng(51.539104, -2.400264);
    var contentString = '<div id="content" style = "width:100px;height:100px;background:white">test content</div>';

    var marker = new google.maps.Marker({
          position: myLatLng,
          map: map,
          title:"Get In Touch",
          icon: image
      });

    var infowindow = new google.maps.InfoWindow({
        content: contentString
    });

    google.maps.event.addListener(marker, 'click', function() {
      infowindow.open(map,marker);
    }); 
```

# c++ - 如何使用 Boost 解析超过 2 级的 ini 文件

> ID：12696812
> 
> 赞同：1
> 
> 时间：2012-10-02T19:19:20.380
> 
> 标签：c++, parsing, boot, ini

我想要一个不止两个级别的ini文件......像这样

```
[Section1]
Value1 = 10
Value2 = a_text_string

[Section2]
[SubSection1]
Value1=1
Value2=2

[Section2]
[SubSection2]
Value1=a
Value2=b 
```

**Qn 1\. 如何创建这样的ini文件？**

之后，我想加载这些值并使用 Boost 在我的应用程序中打印它们

* ***Qn2。这行得通吗？****如果不是，我该怎么做？**

```
boost::property_tree::ptree pt;
boost::property_tree::ini_parser::read_ini("config.ini", pt);
std::cout << pt.get<std::string>("Section1.Value1") << std::endl;
std::cout << pt.get<std::string>("Section2.Subsection1.Value2") << std::endl; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T19:22:54.373

INI 文件不支持这样的结构。如果要在 INI 文件中具有不同的结构级别，则必须在每个部分中指定完整路径：

```
[Section1]
Value1 = 10
Value2 = a_text_string

[Section2.SubSection1]
Value1=1
Value2=2

[Section2.SubSection2]
Value1=a
Value2=b 
```

实际的“第 2 节”。前缀在 INI 语法中没有任何具体含义，它只是一种让您在不支持嵌套的语言中创建这种结构的方法。

# iphone - 在不停止音乐的情况下播放声音的简单方法 iphone sdk

> ID：12696813
> 
> 赞同：1
> 
> 时间：2012-10-02T19:19:22.237
> 
> 标签：iphone, objective-c, ios, audio, sdk

> **可能重复：**
> [是否可以在不停止 iPod 音乐的情况下播放声音？](https://stackoverflow.com/questions/11036748/is-it-possible-to-play-sounds-without-stopping-ipod-music)

有没有一种简单的方法可以在不停止音乐的情况下播放声音？我正在尝试制作节拍器应用程序，如果您有任何建议，他们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:44:00.113

您是在谈论在不中断 iPod/Music 应用程序的音乐的情况下播放声音吗？如果是这样，您需要配置您的音频会话类别以允许与该`kAudioSessionProperty_OverrideCategoryMixWithOthers`属性混合。

请参阅[是否可以在不停止 iPod 音乐的情况下播放声音？](https://stackoverflow.com/questions/11036748/is-it-possible-to-play-sounds-without-stopping-ipod-music?rq=1)示例代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:33:18.263

另一种解决方案：创建一个播放器类来包装初始化（使用 AVFoundation.framework）。

资源：

```
#import "MyAVAudioPlayer.h"

@implementation MyAVAudioPlayer

-(id)initWithFile:(NSString*)strFile
{
    NSError *err;
    NSString *resourcePath = [[NSBundle mainBundle] resourcePath];
    resourcePath = [resourcePath stringByAppendingString:@"/"];
    resourcePath = [resourcePath stringByAppendingString:strFile];
    self = [super initWithContentsOfURL:[NSURL fileURLWithPath:resourcePath] 
                                  error:&err];
    if(err)
    {
        NSLog(@"Loading of %@ Failed with reason: %@", strFile,
              [err localizedDescription]);
    }
    else
    {
        NSLog(@"Loaded %@", strFile);
        [self prepareToPlay];
    }
    return self;
}
@end 
```

标题：

```
#import <AVFoundation/AVFoundation.h>

@interface MyAVAudioPlayer : AVAudioPlayer
{
}
-(id)initWithFile:(NSString*)strFile;
@end 
```

用法：

```
MyAVAudioPlayer *player = [[MyAVAudioPlayer alloc] initWithFile:@"yoursound.mp3"];
[player play] 
```

# vbscript - 使用 VBScript 对 Zip 文件进行签名

> ID：12696815
> 
> 赞同：-1
> 
> 时间：2012-10-02T19:19:27.660
> 
> 标签：vbscript

首先，我写了一些东西来将文件夹转换为 zip 文件现在我想签署这些文件。我怎么能用 VBscript 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:13:53.427

你不能，除非你会使用一些第三方的 ActiveX，大多数时候不是免费的。但是，您可以通过使用命令行中的 Zipfile 管理器来规避此问题。例如，7-zip 具有标准版本中包含的命令行界面。首先尝试这个交互式，直到你有正确的语法，然后运行这个命令

```
ShowWindow = false
WaitUntilFinished = true
nRetCode = WshShell.Run "cmd /c <path to 7zip>\7z.exe <parameters>", DontShowWindow, WaitUntilFinished 
```

# ios - “NSFileManager 没有可见界面”，iOS

> ID：12696816
> 
> 赞同：0
> 
> 时间：2012-10-02T19:19:41.187
> 
> 标签：ios, cocoa-touch, plist, nsfilemanager

完成后我想删除我的两个 plist。我正在尝试使用这条线：

```
[[NSFileManager defaultManager] removeFileAtPath:path error:NULL]; 
```

这给了我错误：

> 'NSFileManager' 没有可见的@interface 声明选择器'removeFileAtPath:error'

这是因为我没有使用 NSObject 吗？

在.h

```
:UITableViewController<UIApplicationDelegate,UIAlertViewDelegate> 
```

如何修复此错误或删除 plist 文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T19:23:17.627

NSFileManager[文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html)没有列出`removeFileAtPath:error:`方法，这就是您收到该错误的原因。您需要的是`removeItemAtPath:error:`方法（*item*，而不是*file*）。

要回答您关于 NSObject 的问题，如果您前往[UITableViewController 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewController_Class/Reference/Reference.html)，您可以看到该类的继承树：

> **从 UIViewController 继承**： UIResponder ： NSObject

这说明UITableViewController继承自UIViewController，UIViewController继承自UIResponder，UIResponder继承自NSObject。因此，您本质上是在使用 NSObject，尽管它是由三代人继承的。请注意，这与 NSFileManager 错误无关。

# android - 键盘锁是否有直接事件？

> ID：12696818
> 
> 赞同：5
> 
> 时间：2012-10-02T19:19:50.210
> 
> 标签：android, events, keyguard, keyguardlock

**重复警告**：这篇文章不是关于**屏幕**开/关的，这篇文章是关于**键盘**锁的（这些问题不一样）。

幸运的是，当 keyguard 被解锁时有一个直接事件，但是 keyguard 被锁定时的 event 呢？我来回搜索了 Android API 事件列表，但我根本没有看到它（短语“锁定”--无，短语“keyguard”--一，表示关闭状态）。

我知道解决方法——等待屏幕关闭事件，循环检查键盘保护的状态并等待屏幕开启事件，因为手机只能从屏幕关闭开始向两个方向移动——要么手机被锁定，要么屏幕将被锁定再次开启。代码量不大，但无论如何都要破解，所以我希望我错过了手册中的一些内容，并且有直接事件用于键盘锁。

# android - Android - 准备媒体记录器失败

> ID：12696819
> 
> 赞同：0
> 
> 时间：2012-10-02T19:20:12.560
> 
> 标签：android, camera, android-mediarecorder

我正在尝试做一些简单的事情，在没有预览的情况下录制音频和视频。

这是我的代码：

```
MediaRecorder mediaRecorder = new MediaRecorder();

// Configure the input sources
mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
mediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

// Set the output format
mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.DEFAULT);

// Specify the audio and video encoding        
mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
mediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.DEFAULT);

    //Specify the outputfile
    mediaRecorder.setOutputFile("/sdcard/Video/myoutputfile.mp4");

mediaRecorder.start();

In the AndroidManisfest.xml:
<user-permission android:name="android.permission.RECORD_AUDIO" />
<user-permission android:name="android.permission.RECORD_VIDEO" /> 
```

这会在应用程序启动时停止它。

有人有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:32:51.687

在开始记录之前尝试调用它；

```
mediaRecorder.prepare(); 
```

另外，请记住，您缺少一些*必须*在调用 prepare 之前设置的必要“功能”。这似乎是您缺少的一些方法；

```
setPreviewDisplay();
setMaxDuration((int) #); 
setOnInfoListener();
setVideoSize(#, #); 
setVideoFrameRate(15); 
```

# asp.net - web.config 中是否不允许“管理”部分？

> ID：12696820
> 
> 赞同：0
> 
> 时间：2012-10-02T19:20:19.207
> 
> 标签：asp.net, iis, iis-7, web-config, asp.net-4.0

我正在尝试通过 将用户添加到 IIS 管理器`web.config`，但是每当我添加以下行时，网站就会停止工作并说`web.config`无效。

如果我在 中添加这些行，该网站就可以工作`administration.config`，但我喜欢通过坚持使用`web.config`.

```
<system.webServer>
  <management>
    <authorization defaultProvider="ConfigurationAuthorizationProvider">
      <authorizationRules>
        <scope path="/MyApp">
          <add name="domain\user" />
        </scope>
      </authorizationRules>
    </authorization>
  </management>
</system.webServer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:24:23.500

一个简单的谷歌搜索可以回答你的问题。

[IIS 管理元素](http://www.iis.net/configreference/system.webserver/management)

从该页面：

> 注意：管理元素中的设置只能在 Administration.config 文件中配置。

# windbg - 从 Linux 调试 Windows 内核

> ID：12696825
> 
> 赞同：17
> 
> 时间：2012-10-02T19:20:44.653
> 
> 标签：windbg, virtual-machine, windows-kernel

我曾经使用**VirtualKD**、**WinDBG**和单个虚拟机来调试 Windows 内核。

最近我有一台 Linux 机器，现在我想知道 - 当您的主机无法运行**VirtualKD/WinDBG***时，调试 Windows 内核的最简单方法是什么？

我假设该解决方案将需要两个虚拟机，但我宁愿在我的实际机器上托管两个实例，而不是将一个实例驻留在另一个虚拟实例中......

无论如何，有没有使这项工作？

提前致谢！

*出于稳定性原因，葡萄酒是最后的选择......

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-07T22:47:28.350

解决了！基本上，我最终使用**了两个**（VirtualBox）**VM ，通过****Unix 域套接字**（在主机上）模拟**串行连接**（空调制解调器电缆）。有关更多信息，请阅读以下内容：

 **硬件设置*：

*   被调试者：
    *   确保机器已关闭并编辑**串行端口**设置。
    *   启用**Port 1**，并分配如下值：端口号：**COM1**，端口模式：**主机管道**，创建管道：**未选中**（客户端），端口/文件路径：**/tmp/win_link**。
*   调试器：
    *   与上面相同（使用相同的路径），只是这次应该**检查**创建管道（服务器）。

调试器设置：

*   运行 WinDBG 并按 Ctrl+K 调用**Kernel Debugging**。
*   在**COM**中，输入：Baudrate: 115200, Port: COM1, Resets: 0 并确认**Pipe** and Reconnect**未选中**（重要）。
*   您将看到以下输出：`Opened \\\\.\com1 Waiting to reconnect...`

调试器设置：

*   **在 /port com1 /baud 115200 /id 1 上**运行bootcfg /debug 。要验证，请运行**bootcfg** .**
*   重启。
*   在启动阶段的相当早的时候，另一台机器上的 WinDBG 应该检测到被调试对象正在运行。

*假设使用了 VirtualBox。VMWare/KVM 用户可能会通过类似的步骤获得相同的结果。此外，有关更多信息，请参阅[VirtualBox 文档](https://www.virtualbox.org/manual/ch03.html#serialports)。

**假设客人是 Windows XP。更高版本包括 bcdedit，可以按照[此处](http://msdn.microsoft.com/en-us/library/windows/hardware/ff556867%28v=vs.85%29.aspx)所述使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-03T21:34:05.577

对于 QEMU\KVM，请遵循以下说明： [http ://www.linux-kvm.org/page/WindowsGuestDrivers/GuestDebugging](http://www.linux-kvm.org/page/WindowsGuestDrivers/GuestDebugging)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-08T17:06:17.260

非常有用，但适用于 Windows XP 机器。如果需要在 Linux 主机上配置 2 个基于 Windows7 的虚拟机，可以参考以下链接：[http ://www.aldeid.com/wiki/Category:Digital-Forensics/Computer-Forensics/Debugger/Kernel](http://www.aldeid.com/wiki/Category:Digital-Forensics/Computer-Forensics/Debugger/Kernel)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-11-13T08:05:47.440

现在的另一个选择是启用本地内核调试。这有一些[限制](https://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/performing-local-kernel-debugging)，但是它使您能够在仅使用**一个**VM 时访问内核数据。

此方法仅适用于 Windows 8.0 和 Windows Server 2012 及更高版本。

跟着这些步骤：

1.  以管理员身份打开命令提示符窗口。
2.  进入`bcdedit /debug on`
3.  如果计算机尚未配置为调试传输的目标，请输入`bcdedit /dbgsettings local`
4.  重新启动计算机。

系统重新启动后，您可以执行`WinDBG`as `Administrator`，按`ctrl+k`或转到`File -> Attach to kernel -> Local`并按 OK。

[![附加到内核选项](../Images/bb08a09039f7b857bdb0780e9c317687.png)](https://i.stack.imgur.com/2uI3S.png)

此时，您将能够执行仅内核命令并访问内核结构：

[![在此处输入图像描述](../Images/524c9ad6f4efef648c9f78b93d79390c.png)](https://i.stack.imgur.com/PMyQ9.png)

在 Windows 10 和新的 WinDBG 版本（预览版）下测试。

参考：[手动设置单机本地内核调试](https://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/performing-local-kernel-debugging)**

# python - 如何获取已集成在 CL 范围内的更改？

> ID：12696828
> 
> 赞同：3
> 
> 时间：2012-10-02T19:20:48.307
> 
> 标签：python, perforce, p4python

给定 src 和 dest 分支，我如何在 dest/...@lower,upper 中找到从 src 集成的内容？

P4.run_integrated 抱怨它不接受修订规范。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:07:30.047

```
$ p4 changes dest/...@lower,upper returns the changes submitted into dest.
$ p4 changes -i dest/...@lower,upper includes the changes that were integrated into dest. 
```

后者和前者的区别在于集成到dest的变化。

使用 p4python 会有类似的东西：

```
changes = set(P4.run_integrated('dest/...@lower,upper'))
changes_with_integrated = set(P4.run_integrated('-i', 'dest/...@lower,upper'))
integrated_changes = changes_with_integrated.difference(changes) 
```

# ruby-on-rails-3 - 在 mongoid 中保存 embeds_many

> ID：12696830
> 
> 赞同：1
> 
> 时间：2012-10-02T19:20:58.743
> 
> 标签：ruby-on-rails-3, mongodb, persistence, mongoid, embedded-database

我有一个 embeds_many 关联，当我保存父文档时，没有保存子文档。

```
class User
  include Mongoid::Document

  embeds_many :user_missions
  attr_accessible :user_missions_attributes
  accepts_nested_attributes_for :user_missions, allow_destroy: true
end

class UserMission
  include Mongoid::Document

  embedded_in :user, :inverse_of => :user_missions

  has_one :mission, autosave: true
  validates_presence_of :mission

  attr_accessible :mission_title

  def mission_title
    mission.try(:title)
  end

  def mission_title=(title)
    self.mission = Mission.find_or_create_by(:title => title) if title.present?
  end
end 
```

这是我失败的规范：

```
it "should save mission to user_mission when created" do
  user_mission = UserMission.new
  user = create(:user)
  user.user_missions << user_mission
  user_mission.mission_title = "Created Title"

  user.save!
  #user_mission.save!

  User.first.user_missions[0].mission.title.should == "Created Title"
end 
```

我得到：

```
undefined method `title' for nil:NilClass 
```

当我在该行中发表评论时，`#user_mission.save!`它起作用了。问题是我需要它在表单中工作，我认为 Mongoid 会自动保存嵌入文档的字段。

如何获取父用户文档以保存嵌入式 UserMission 的数据？

谢谢

更新

这是我忘记添加的任务模型（不确定它是否重要）：

```
class Mission
  include Mongoid::Document

  belongs_to :user_mission, :inverse_of => :mission

  attr_accessible :title
  field :title, type: String
  validates_presence_of :title

  field :lowercase_title
  before_create :lower_title_case

  field :description, type: String

private
  def lower_title_case
    self.lowercase_title = self.title.downcase
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:33:43.693

AFAIK，嵌入式文档不能有引用关系。`embedded_in`所以对和的调用`has_one`是矛盾的。

除此之外，您是否尝试过重新排序测试中的行，以便首先创建用户，然后`user_misison`通过用户创建？

```
user = create(:user)
user_mission = user.user_missions.new
user_mission.mission_title = "Created Title"

user.save! 
```

看起来您尝试执行的操作类似于 SQL JOIN 表。如果这是您想要实现的目标，那么最好利用 Mongoid 出色的 NN 引用映射（除非您需要在“加入”集合中存储额外的数据）。我会做类似的事情：

```
class User
  include Mongoid::Document
  has_and_belongs_to_many :missions
end

class Mission
  include Mongoid::Document
  has_and_belongs_to_many :users
end 
```

如果您想通过用户创建任务，请在关系的任务侧打开自动保存。

**编辑：**看到您的任务模型后，我意识到您正试图`belongs_to :user_mission`直接从您的任务模型中直接引用嵌入文档 UserMission ( )。就像我之前说的，不可行。您需要顶级文档、用户和任务之间的某种关系。您可以通过将该行更改为：

```
has_many :users 
```

然后`has_one :mission`从 User 模型更改为：

```
belongs_to :mission 
```

但是，您将无法从用户端使用自动保存。

**编辑：**更正了正确的方法来显示从用户到任务的 1-n 关系的正确方法。

# python - Subprocess.check_output 或 xclip -o 挂起

> ID：12696841
> 
> 赞同：2
> 
> 时间：2012-10-02T19:22:03.227
> 
> 标签：python, xclip

在 Linux mint 上，我使用以下代码来监控我的剪贴板：

```
last_clip = ''
try:
    while True:
        clip_contents = subprocess.check_output(['xclip', '-o'])
        if clip_contents != last_clip:
           #write clip_contents to file
        time.sleep(0.5)
except KeyboardInterrupt:
    print(" Quitting...") 
```

它工作得很好，除了它经常挂断。我相当确定它`check_output`在线，因为`ps aux`表明这`xclip -o`是一个积极的过程。当我用它杀死它`-INT`或者`-HUP`我得到这个回溯时：

```
Traceback (most recent call last):
  File "get.py", line 16, in <module>
    clip_contents = subprocess.check_output(['xclip', '-o'])
  File "/usr/lib/python2.7/subprocess.py", line 544, in check_output
    raise CalledProcessError(retcode, cmd, output=output)
subprocess.CalledProcessError: Command '['xclip', '-o']' returned non-zero exit status -1 
```

我做错了什么，还是这里发生了什么错误*？*

# javascript - 手风琴走向垂直而不是水平

> ID：12696843
> 
> 赞同：0
> 
> 时间：2012-10-02T19:22:06.980
> 
> 标签：javascript, jquery, css

我对 Jquery 没有那么丰富的经验，所以请原谅这个基本问题。我正在使用这个简单的 jquery 手风琴[http://www.switchroyale.com/vallenato/](http://www.switchroyale.com/vallenato/)

是否可以更改 jquery 或 css 以使其垂直而不是水平。似乎没有太多关于此事的文件。任何帮助，将不胜感激。

这是javascript

```
$(document).ready(function()
{
    //Add Inactive Class To All Accordion Headers
    $('.accordion-header').toggleClass('inactive-header');

    //Set The Accordion Content Width
    var contentwidth = $('.accordion-header').width();
    $('.accordion-content').css({'width' : contentwidth });

    //Open The First Accordion Section When Page Loads
    $('.accordion-header').first().toggleClass('active-header').toggleClass('inactive-header');
    $('.accordion-content').first().slideDown().toggleClass('open-content');

    // The Accordion Effect
    $('.accordion-header').click(function () {
        if($(this).is('.inactive-header')) {
            $('.active-header').toggleClass('active-header').toggleClass('inactive-header').next().slideToggle().toggleClass('open-content');
            $(this).toggleClass('active-header').toggleClass('inactive-header');
            $(this).next().slideToggle().toggleClass('open-content');
        }

        else {
            $(this).toggleClass('active-header').toggleClass('inactive-header');
            $(this).next().slideToggle().toggleClass('open-content');
        }
    });

    return false;
}); 
```

这就是这个 CSS

```
#accordion-container {
    font-size: 13px;
    background: #ffffff;
    padding: 5px 10px 10px 10px;
    border: 1px solid #cccccc;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius: 5px;
    -moz-box-shadow: 0 5px 15px #cccccc;
    -webkit-box-shadow: 0 5px 15px #cccccc;
    box-shadow: 0 5px 15px #cccccc;
}

.accordion-header {
    font-size: 16px;
    background: #ebebeb;
    margin: 5px 0 0 0;
    padding: 5px 20px;
    border: 1px solid #cccccc;
    cursor: pointer;
    color: #666666;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius: 5px;
}

.active-header {
    -moz-border-radius: 5px 5px 0 0;
    -webkit-border-radius: 5px 5px 0 0;
    border-radius: 5px 5px 0 0;
    background: url(images/active-header.gif) #cef98d;
    background-repeat: no-repeat;
    background-position: right 50%;
}

.active-header:hover {
    background: url(images/active-header.gif) #c6f089;
    background-repeat: no-repeat;
    background-position: right 50%;
}

.inactive-header {
    background: url(images/inactive-header.gif) #ebebeb;
    background-repeat: no-repeat;
    background-position: right 50%;
}

.inactive-header:hover {
    background: url(images/inactive-header.gif) #f5f5f5;
    background-repeat: no-repeat;
    background-position: right 50%;
}

.accordion-content {
    display: none;
    padding: 20px;
    background: #ffffff;
    border: 1px solid #cccccc;
    border-top: 0;
    -moz-border-radius: 0 0 5px 5px;
    -webkit-border-radius: 0 0 5px 5px;
    border-radius: 0 0 5px 5px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:53:06.073

至少，您必须将手风琴内容向左浮动，然后将 slideToggle 替换为自定义的 .animate()。jQuery 中的幻灯片只做上下而不是左右。我猜你还必须旋转标题并浮动它们。

# jquery - 在子页面上保持子菜单打开，如果悬停在另一个项目上则更改，然后返回

> ID：12696845
> 
> 赞同：0
> 
> 时间：2012-10-02T19:22:12.010
> 
> 标签：jquery, menu

尽管有很多类似的问题，但对于我正在寻找的特定案例，我找不到任何东西。

我有一个带有子导航的 wordpress 网站，它在悬停时显示并使用 HoverIntent 进行动画处理。这很好并且效果很好，但是如果在其中一个子页面上，我希望子菜单保持活动状态-但是-如果我将鼠标悬停在我希望该子菜单显示的任何其他父项上-如果没有单击我希望它恢复显示原始子菜单。

这是我的菜单：

```
<div class="menu-main-navigation-container">
<ul id="menu-main-navigation" class="menu">

<li id="menu-item-90" class="menu-item-90"><a href="http://sitename.com/services/">Services</a>
    <ul class="sub-menu">
        <li id="menu-item-123" class="menu-item-123"><a href="http://sitename.com/services/design/">Desgign</a></li>
        <li id="menu-item-109" class="menu-item-109"><a href="http://sitename.com/services/seo/">SEO</a></li>
        <li id="menu-item-110" class="menu-item-110"><a href="http://sitename.com/services/development/">Development</a></li>
    </ul>
</li>

<li id="menu-item-89" class="menu-item-89"><a href="http://sitename.com/portfolio/">Portfolio</a>
    <ul class="sub-menu">
        <li id="menu-item-113" class="menu-item-113"><a href="http://sitename.com/portfolio/web/">Web</a></li>
        <li id="menu-item-108" class="menu-item-108"><a href="http://sitename.com/portfolio/print/">Print</a></li>
    </ul>
</li>

</ul>
</div> 
```

还有我当前的 jQuery 代码：

```
// hover intent
var config = {
sensitivity: 3, // number = sensitivity threshold (must be 1 or higher)
interval: 10, // number = milliseconds for onMouseOver polling interval
over: doOpen, // function = onMouseOver callback (REQUIRED)
timeout: 500, // number = milliseconds delay before onMouseOut
out: doClose // function = onMouseOut callback (REQUIRED)
};

function doOpen() {
    jQuery(this).addClass("hover");
    jQuery('ul:first',this).fadeIn();
}
function doClose() {
    jQuery(this).removeClass("hover");
    jQuery('ul:first',this).fadeOut();
}
jQuery("#menu-main-navigation li").hoverIntent(config); 
```

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:11:14.013

在这种情况下：您需要知道您在哪个页面上。
假设我们在“网页”页面上。
添加： `<div id='page_web'></div>`
在页面的开头。

然后，在 JS 中：

```
if ($('#page_web').length > 0){
  jQuery("#menu-main-navigation li:first").hoverIntent(config);
} else {  
  jQuery("#menu-main-navigation li").hoverIntent(config);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
} 
```

这当然只是一个建议，还有其他方法可以做到这一点。
我已经更新[了 fiddle](http://jsfiddle.net/bldoron/zcJEu/1/)。希望这可以帮助。

# pixel - 512*512 256色值的索引图像的大小是多少？

> ID：12696851
> 
> 赞同：1
> 
> 时间：2012-10-02T19:22:32.310
> 
> 标签：pixel, bmp

如果我有一张分辨率为 512 * 512 的图像，
并且该图像以 256 个颜色值作为索引，
如何计算图像的大小（文件大小）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:27:00.593

图像本身可以计算如下

256 可以存储在一个字节中。所以一个像素是1个字节。

你有一个 512*512 像素。

`512*512*1 = 262144`但是在你的磁盘上，它会比那些 262ko 多一点，因为你必须计算用于文件元信息的字节和调色板。

如果您需要更多信息，请查看[bmp 标头规范。](http://en.wikipedia.org/wiki/BMP_file_format#File_structure)

# php - 如何从标签内的表数据生成 json 数组

> ID：12696858
> 
> 赞同：0
> 
> 时间：2012-10-02T19:23:23.933
> 
> 标签：php, jquery, json, html-table

我正在尝试以 JSON 格式获取这些数据。你能帮我生成那个吗？请帮助我对jquery和php不太熟悉。

html代码看起来像这样

```
<form>
    <table>
        <tr>
            <td>//some code for other table elements</td><tr>
        <tr>
            <td>Critical Times (Coverage): </td>
            <td rowspan="3" colspan="2">
                <div>
                    <table width="100%" bgcolor="white" border="0px" name="criticalTime" id="criticalTime">
                    </table>
                </div>
            </td>
            <td>
                <input type="button" id="timeAdd" value="+"/><br>
                <input type="button" id="timeRemove" value="-"/>
            </td>
        </tr>
        <tr>
            <td>//some code for other table elements</td>
        </tr>
    </table>
</form> 
```

当单击 + 按钮时，我的 .js 文件具有以下内容来处理向表中添加行。

```
var rowCountr = 0;
var timeTable="<thead><tr bgcolor='E1ECFF'><th></th><th align='left'>Start Time</th><th align='left'>End Time</th></tr></thead>";
/* insert the html string*/
$("#criticalTime").html( timeTable );

/*Event for the +(Add) button in critical time table*/
var timeRwcntr=0;
timeRow="<tr><td><input type='checkbox' id='row'</td><td><input type='text' id='start' /></td><td><input type='text' id='end'/></td></tr>";       

$('#timeAdd').click(function(){
    $('#criticalTime').append(timeRow);
    rowCountr++;
    timeRwcntr++;
}); 
$('#timeRemove').click(function(){
    $('#criticalTime tr:last-child').remove();
}); 
```

当我从主窗体单击提交按钮时，我需要在输入字段中输入这些值并生成一个 JSON 数组以将它们存储在数据库中。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:35:25.367

对于这个问题，我认为 JSON 可能是矫枉过正。您只是想在回发时将表的输入字段发送回服务器，对吗？当您创建表格行时，请在表单控件的“名称”属性中添加一个唯一标识号，`<input name="'.$id.'_field" />`例如，如果您要在服务器端呈现表格；javascript 的代码将是相似的。然后，当您回发时，您可以通过计数循环遍历每一行，然后通过引用名称访问您返回的 POST 变量。例子：

```
for ($i = 0; $i < $rowcount; $i++) {
    $field_value = $_POST[$i.'_field'];
    ...
} 
```

JSON 非常适合更复杂的数据集，但在您的情况下，听起来您已经结构化了二维行和列。

# javascript - 用于处理操作的 JavaScript 库

> ID：12696862
> 
> 赞同：1
> 
> 时间：2012-10-02T19:23:38.460
> 
> 标签：javascript, parsing, expression-evaluation

我的代码动态生成字符串/数字操作。该程序动态构建类似于以下内容的内容：

```
"My name " + "is " + "G-Man"
"Your age is " + "21"
"5" * "5" 
```

我想输出这个：

```
My Name is G-Man
Your age is 21
25 
```

我可以为此编写一个库，但我目前处于时间限制之下。如果有人知道可以执行类似于上述方程的库（int + int = int），（string + int = string）等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:28:45.737

我想你可能只想使用 JavaScript 内置的 EVAL 函数。

```
var a = eval("5 + 5");
console.log(a); // >> 10 
```

**编辑**哇，当我回答这个问题时，我以几乎机器人的速度获得了 2 票否决~很奇怪，但 EVAL 可能就是你想要的。

```
var a = eval("'Your age is ' + '22'");
console.log(a); // >> Your age is 22 
```

**编辑 2**这是对输入进行一些快速验证的起点，以确保没有任何顽皮的东西得到 Eval'd。

```
var test1 = [
"testing"
,"+"
,"123"
];
var test2 = [
"8"
,"*"
,"5"
,"/"
,"3"
];
var test3 = [
"window.alert('bad');"
];
var test4 = [
"\"It's hard to escape things\", said "
," + "
,"Bob"
];

function supereval(arr) {
    var sEval = '';
    for(var i=0; i<arr.length; i++) {
        if(!isNaN(parseFloat(arr[i])) && isFinite(arr[i])) { // number
            sEval += arr[i];
//console.log("> number");
        } else if( /^\s?[\+\/\*\-]\s?$/i.test(arr[i]) ) { // operation
            sEval += arr[i];
//console.log("> operation");
        } else { // string
            sEval += "\"" + arr[i].replace(/"/g, '\\"') + "\"";
//console.log("> string");
        }
    }
console.log("DEBUG:" + sEval);
    return eval(sEval);
}

console.log(supereval(test1));
console.log(supereval(test2));
console.log(supereval(test3));
console.log(supereval(test4)); 
```

# configuration - Ipython 0.11+：从交互式会话访问和操作配置

> ID：12696863
> 
> 赞同：4
> 
> 时间：2012-10-02T19:23:42.420
> 
> 标签：configuration, ipython

t在 ipython（0.10 版或更低版本）的旧时代，我曾经能够通过使用用户命名空间中可用的变量 _ip 从交互式 ipython 会话访问和操作正在运行的 ipython 实例，例如，

```
_ip.IP.rc.editor = '/usr/bin/jed' 
```

我开始使用 ipython 0.13，显然这个“设施”已从用户访问中删除。它仍然可用吗？如果可以，如何访问它？我想试验提示字符串，例如`c.PromptManager.in_template`在新`ipython_config.py`文件中。

# c++ - 在 MFC 中创建带有事件的工具栏

> ID：12696867
> 
> 赞同：0
> 
> 时间：2012-10-02T19:23:51.407
> 
> 标签：c++, mfc, toolbar

您好我的单文档 MFC 应用程序有问题。

我想将我自己的工具栏添加到 MainFrm 类（CFrameWnd）。

我是 MFC 的新手。所以我不确定那是否是添加它的地方。

至今：

创建了一个 ID 为 IDR_TOOLBAR1 的工具栏资源

ID_SELECT_SHAPE 的工具栏按钮

在 MainFrm.h 中`CToolBar m_wndMyToolBar;`声明

在 MainFrm.cpp 中：

```
if (!m_wndMyToolBar.CreateEx(this, TBSTYLE_FLAT, WS_CHILD | WS_VISIBLE | CBRS_TOP | CBRS_GRIPPER | CBRS_TOOLTIPS | CBRS_FLYBY | CBRS_SIZE_DYNAMIC) ||
            !m_wndMyToolBar.LoadToolBar(IDR_TOOLBAR1))
{
    TRACE0("Failed to create toolbar\n");
    return -1;      // fail to create
} 
```

工具栏现在显示。耶！
但我不知道如何添加事件处理程序。

谁能告诉我是否在正确的轨道上？如果是这样，谁能告诉如何添加该事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:37:22.417

是的，你在正确的轨道上。您的 MainFrame.cpp 应该有一个以

```
BEGIN_MESSAGE_MAP 
```

并以

```
END_MESSAGE_MAP 
```

在该部分中，您将需要一个条目

```
ON_COMMAND  (ID_SELECT_SHAPE, &CFrameWnd::OnSelectShape) 
```

在您的 .h 文件中添加声明

```
afx_msg void OnSelectShape(); 
```

并在 .cpp 文件中实现 OnSelectShape 函数来处理您的事件。

根据您的处理程序需要做什么以及它需要拥有哪些数据，添加处理程序并在 CView... 类而不是 CFrameWnd 类中实现它可能更容易。处理程序也可以在 CDocument... 类中实现。单击工具栏按钮时，MFC Doc-View 框架将首先在视图中查找处理程序。如果没有可用的处理程序，它会在 Document 中寻找一个，最后如果没有处理程序，它将在主 Frame 窗口中寻找一个。

# jquery - 在页面加载时加载 div 然后用 onclick 替换内容

> ID：12696869
> 
> 赞同：1
> 
> 时间：2012-10-02T19:23:54.933
> 
> 标签：jquery, html, load, onclick

我有将内容加载到相邻 div 的侧边栏导航链接（使用 jquery load()）。

每次点击链接都会替换内容。

我需要在页面加载时默认将内容加载到 div 中，然后删除默认内容以替换为 load() 函数。

此时页面加载并将始终保留初始内容，并在通过单击链接激活每个 div 时替换其他附加 div。

我希望您在访问该目标 div 中的页面时看到一些内容，然后将其替换为来自这些侧边栏链接的新内容...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:30:45.023

您可以通过在加载时调用 jQuery 中的 trigger() 方法手动触发锚点上的单击事件。

# ruby-on-rails - rspec not_to 从不按预期运行

> ID：12696874
> 
> 赞同：12
> 
> 时间：2012-10-02T19:24:19.193
> 
> 标签：ruby-on-rails, rspec2, rspec-rails

我在 rspec 和 rspec-rails 2.11.0 中遇到了一些令人费解的行为。我在运行 2.7.1 的同事应用程序上重现了该行为（均在 ruby​​ 1.9.3 上）

这些测试按预期工作（失败）：

```
it "should not change i" do
    i = 0
    expect {
      i = 2
    }.not_to change { i }
end

it "should not change i" do
    i = 0
    expect {
      i = 2
    }.not_to change { i }.from( 0 )
end 
```

在这两种情况下，失败消息都是“结果不应该改变，但确实从 0 变为 2”

将期望中的“从”更改为不同的值会莫名其妙地通过，而不是失败，无论期望块中 i 的值发生什么变化：

```
it "should not change i" do
    i = 0
    expect {
        i = 2
    }.not_to change { i }.from( 1 )
end 
```

我最近才升级到 1.9.3，我可以肯定地说，如果我之前经历过这种行为，我会注意到它。谁能解释这个和/或我做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T19:48:00.197

我不认为它完全符合您的期望，但是编写测试的方式并没有真正暴露这一点。您的最后一个值失败，因为它从未定义为 1。

揭示这一点的主要步骤是反转测试。

```
describe "stuff" do

  it "should not change i" do
      i = 0
      expect {
        i = 2
      }.to change { i }
  end

  it "should not change i" do
      i = 0
      expect {
        i = 2
      }.to change { i }.from( 0 )
  end

  it "should not change i" do
      i = 0
      expect {
          i = 2
      }.to change { i }.from( 1 )
  end

end 
```

这导致前两个测试通过，最后一个测试失败并出现错误`result should have initially been 1, but was 0`

因此，如果我们按原样进行问题测试，你说的是`i should not change from 1`因为 i 永远不是 1，所以这个测试永远不会失败。

```
it "should not change i" do
    i = 0
    expect {
        i = 2
    }.not_to change { i }.from( 1 ) # i goes from 0 to 2, not 1 to 2, so the test is valid
end 
```

# ruby-on-rails - 覆盖设置器不适用于 update_attributes

> ID：12696878
> 
> 赞同：1
> 
> 时间：2012-10-02T19:24:32.390
> 
> 标签：ruby-on-rails, activerecord, rspec, overriding, rspec-rails

我正在制作一个任务管理器，并有一个“完成”的布尔属性。当我将“完成”切换为真时，我试图覆盖设置器以实现“完成_at”日期。

但我得到了一些好坏参半的结果。它在浏览器中不起作用，但在我的 rspec 测试中起作用。

请帮帮我。

```
class TasksController < ApplicationController 
# ...
def update
  # ..
  if @task.update_attributes(params[:task]) # where params[:task][:finished] is true
# ...
end

class Task < ActiveRecord::Base
#...
  def finished=(f)
   write_attribute :finished, f
   write_attribute :finished_at, f == true ? DateTime.now : nil
  end
end

# and in rspec i have
describe "when marked as finished" do
  before { @task.update_attributes(finished: true) }

  its(:finished_at) { should_not be_nil }
  its(:finished_at) { should > (DateTime.now - 1.minute) }

  describe "and then marked as unfinished" do 
    before { @task.update_attributes(finished: false) }
    its(:finished_at) { should be_nil }
  end
end 
```

在浏览器中它执行 "UPDATE "tasks" SET "finished" = 't', "updated_at" = '2012-10-02 18:55:07.220361' WHERE "tasks"."id" = 17"

在 Rails 控制台中，我使用 update_attributes 得到了相同的结果。

但是在带有 update_attributes 的 rspec 中，我得到 "UPDATE "tasks" SET "finished" = 't', "finished_at" = '2012-10-02 18:36:47.725813', "updated_at" = '2012-10-02 18: 36：51.607143'在哪里“任务”。“id”= 1“

所以我使用相同的方法，但它只在 rspec 中工作了一些 reson...

* * *

使用最新的轨道和最新的规范（不是任何 rc 或 beta）。

## 解决方案

我不需要编辑。感谢@Frederick Cheung 的提示。我确实注意到我确实喜欢“self [：attr]”而不是“write_attribute”。看起来更好。

```
def finished=(value)
  self[:finished] = value
  self[:finished_at] = (self.finished? ? Time.now.utc : nil)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T03:51:54.893

您的 setter 在传递给`update_attributes`. 特别是当这是由表单提交触发时（并假设您使用的是常规 rails 表单助手）`f`实际上将是“0”或“1”，因此与的比较`true`将始终为假。

`finished?`最简单的方法是在第一次调用 之后检查 的值`write_attribute`，以便 rails 可以将提交的值转换为真/假。这样做也是不可靠的`== true`——如果你正在测试的东西返回一个真实的值而不是真正的真实值，这将会中断（例如，当匹配时，字符串上的 =~ 返回一个整数）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T04:58:57.793

您可以使用 ActiveRecord Dirty Tracking 来通知此更改。

[http://api.rubyonrails.org/classes/ActiveModel/Dirty.html](http://api.rubyonrails.org/classes/ActiveModel/Dirty.html)

```
class Task < ActiveRecord::Base

  before_save :toggle_finished_at

  def toggle_finished_at
    if finished_changed?
      before = changes['finished'][0]
      after = changes['finished'][1]
      # transition from finished => not-finished
      if before == true && after == false
        self.finished_at = nil
      end
      # transition from not finished => finished
      if before == false && after == true
        self.finished_at = Time.now.utc
      end
    end
  end

end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T23:10:27.040

这是状态机的一个用例。您调用一个`:finish!`事件（一种方法），该事件被配置为更改状态并执行其他任何需要的操作。

[https://github.com/pluginaweek/state_machine/](https://github.com/pluginaweek/state_machine/)

# csv - csvfile 是如何结构化/指定的？

> ID：12696880
> 
> 赞同：1
> 
> 时间：2012-10-02T19:24:55.170
> 
> 标签：csv, specs

谁能告诉我 csv 文件的结构，因为我需要编写一个解析器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T19:27:05.127

在 CSV 文件中，列由“，”分隔，行分别由换行符分隔。第一行包含列的标识符。如果内容中出现任何分隔符，则需要使用 '"' 进行转义，或者内容需要是文字。RFC： [https ://www.rfc-editor.org/rfc/rfc4180](https://www.rfc-editor.org/rfc/rfc4180)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T19:25:57.020

那要看。CSV 是一种定义不明确的格式，因此您通常不能对格式做出太多假设。例如，在德国，列通常用分号而不是逗号分隔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T19:27:30.470

[https://www.rfc-editor.org/rfc/rfc4180](https://www.rfc-editor.org/rfc/rfc4180)

已经存在很多解析器。我强烈建议您使用它们，除非您愿意编写符合规范的*语法*，并让解析器生成器为您创建解析器。即使这样，您也必须处理列标题等选项。

# javascript - Jquery 淡入/淡出 img 变化

> ID：12696881
> 
> 赞同：0
> 
> 时间：2012-10-02T19:25:02.093
> 
> 标签：javascript, jquery, image, fadein

我一直在尝试修复这个地雷错误大约 3 个小时，搜索了所有内容和任何地方，但找不到答案。

#test 是一个 img 元素。我希望元素首先淡出，然后更改它的图像，然后淡入。但是当我点击它时，它会改变图像，同时淡出，然后淡入已经改变的图像。这里有什么问题？也许我应该使用 animate() 函数或 stop() 或其他什么？真的很迷茫，javascript和jQuery太难了

```
 $("#test").click(function(){
    ASD = $("#test").attr('alt');
    $("#test").fadeOut(700);
    $("#test").attr('src', ASD);
    $("#test").fadeIn(700); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:26:19.020

您需要使用fadeOut的回调，以便等到第一个动画完成后，再替换源并启动第二个动画：

```
$("#test").on('click', function(){
    var ASD = $(this).attr('alt');
    $(this).fadeOut(700, function() {
        $(this).attr('src', ASD).fadeIn(700);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T19:27:17.243

`.fadeOut()`您应该使用动画结束时调用的回调参数：

```
 $("#test").click(function(){
    ASD = $("#test").attr('alt');
    $("#test").fadeOut(700, function() {
       $("#test").attr('src', ASD);
       $("#test").fadeIn(700);
    });
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T19:26:23.700

使用回调选项[`fadeOut()`](http://api.jquery.com/fadeOut/)。这确保了其他操作只会在 fadeOut 完成后发生：

```
$("#test").click(function(){
    ASD = $("#test").attr('alt');
    $("#test").fadeOut(700, function() {
        $("#test").attr('src', ASD);
        $("#test").fadeIn(700);
    });
}); 
```

# android - 调用 Webservice 方法时 AsyncTask 强制关闭

> ID：12696888
> 
> 赞同：2
> 
> 时间：2012-10-02T19:25:32.623
> 
> 标签：android, web-services

这是我的代码。我在发送按钮中调用 Asynctask 并调用在 doInBackground 方法中实现 Web 服务代码的 sendtoserver 方法。

```
 package asynctask.com;

     import org.ksoap2.SoapEnvelope;
     import org.ksoap2.serialization.SoapObject;
     import org.ksoap2.serialization.SoapSerializationEnvelope;
     import org.ksoap2.transport.HttpTransportSE;

     import android.os.AsyncTask;
     import android.os.Bundle;
     import android.app.Activity;
     import android.app.ProgressDialog;
     import android.util.Log;
     import android.view.Menu;
     import android.view.MenuItem;
     import android.view.View;
     import android.view.Window;
     import android.view.WindowManager;
     import android.view.View.OnClickListener;
     import android.widget.Button;
     import android.widget.DatePicker;
     import android.widget.EditText;
     import android.widget.Spinner;
     import android.widget.Toast;
     import android.support.v4.app.NavUtils;

        public class Asyntask extends Activity {
         boolean resultofmail;
    Button send;
    private static final String SOAP_ACTION = "http://sendmail.com/insertfeedback";
        private static final String METHOD_NAME = "insertfeedback";
        private static final String NAMESPACE = "http://sendmail.com/";
        private static final String URL = "http://180.179.48.27:8080/sendmail      /sendmailService?wsdl";

       EditText ename;
       EditText eid,reason;
       DatePicker sdate,edate;
       Spinner rfl;

         @Override
        public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
        WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.leaverequest);
        send=(Button)findViewById(R.id.button1);

        eid=(EditText)findViewById(R.id.editText1);
        ename=(EditText)findViewById(R.id.editText2);

        sdate=(DatePicker)findViewById(R.id.datePicker1);
        edate=(DatePicker)findViewById(R.id.datePicker2);
        rfl=(Spinner)findViewById(R.id.spinner1);
        reason=(EditText)findViewById(R.id.editText3);

        send.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                new MailSendingTask().execute((Void[])null);

            }
        });

         }

        public boolean sendtoserver()
          {
        int day  =sdate.getDayOfMonth();
        int month=sdate.getMonth()+1;
        int year =sdate.getYear();
        String stdate=day+"/"+month+"/"+year;

        int day1  =edate.getDayOfMonth();
        int month1=edate.getMonth()+1;
        int year1 =edate.getYear();
        String eddate=day1+"/"+month1+"/"+year1;

                Toast.makeText(getApplicationContext(),stdate+"   "+eddate,Toast.LENGTH_LONG).show();

            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 
                request.addProperty("name",ename.getText().toString());
                request.addProperty("code",eid.getText().toString());
                request.addProperty("date1",stdate);
                request.addProperty("date2",eddate);
                request.addProperty("leave",rfl.getSelectedItem().toString());
                request.addProperty("reason",reason.getText().toString());

                SoapSerializationEnvelope envelope = new   SoapSerializationEnvelope(SoapEnvelope.VER11); 
                envelope.setOutputSoapObject(request);
                HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

                 try {
                   androidHttpTransport.call(SOAP_ACTION, envelope);
                   Toast.makeText(getApplicationContext(),"Mail Sent",Toast.LENGTH_LONG).show();
                   return true;

                 }
                 catch (Exception e) {
                     Toast.makeText(getApplicationContext(),e.getMessage(),Toast.LENGTH_LONG).show();
                     return false;

                    }
   }

    public class MailSendingTask extends AsyncTask <Void, Void, Void> {

        private ProgressDialog progressDialog;

        @Override
        protected void onPreExecute() {
            this.progressDialog = ProgressDialog.show(
                    Asyntask.this,
                    "Doing Processing", // title
                    "Sending Data To Server", // message
                    true // indeterminate
            );
        }

        @Override
        protected Void doInBackground(Void... params) {

            resultofmail=sendtoserver();
            return null;
        }

        @Override
        protected void onPostExecute(Void v) {
            this.progressDialog.cancel();
            if (resultofmail)
            Toast.makeText(getApplicationContext(), "Mail sent", Toast.LENGTH_LONG).show(); 
            else
                Toast.makeText(getApplicationContext(), "Retry", Toast.LENGTH_LONG).show(); 

        }

       }

        } 
```

LOGCAT

```
10-03 00:23:38.600: E/AndroidRuntime(1770): FATAL EXCEPTION: AsyncTask #1
10-03 00:23:38.600: E/AndroidRuntime(1770): java.lang.RuntimeException: An error occured while executing doInBackground()
10-03 00:23:38.600: E/AndroidRuntime(1770):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
10-03 00:23:38.600: E/AndroidRuntime(1770):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
10-03 00:23:38.600: E/AndroidRuntime(1770):     at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
10-03 00:23:38.600: E/AndroidRuntime(1770):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
10-03 00:23:38.600: E/AndroidRuntime(1770):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
10-03 00:23:38.600: E/AndroidRuntime(1770):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
10-03 00:23:38.600: E/AndroidRuntime(1770):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
10-03 00:23:38.600: E/AndroidRuntime(1770):     at java.lang.Thread.run(Thread.java:1019)
10-03 00:23:38.600: E/AndroidRuntime(1770): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
10-03 00:23:38.600: E/AndroidRuntime(1770):     at android.os.Handler.<init>(Handler.java:121)
10-03 00:23:38.600: E/AndroidRuntime(1770):     at android.widget.Toast.<init>(Toast.java:68)
10-03 00:23:38.600: E/AndroidRuntime(1770):     at android.widget.Toast.makeText(Toast.java:231)
10-03 00:23:38.600: E/AndroidRuntime(1770):     at asynctask.com.Asyntask.sendtoserver(Asyntask.java:89)
10-03 00:23:38.600: E/AndroidRuntime(1770):     at asynctask.com.Asyntask$ReverseGeocodeLookupTask.doInBackground(Asyntask.java:140)
10-03 00:23:38.600: E/AndroidRuntime(1770):     at asynctask.com.Asyntask$ReverseGeocodeLookupTask.doInBackground(Asyntask.java:1)
10-03 00:23:38.600: E/AndroidRuntime(1770):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
10-03 00:23:38.600: E/AndroidRuntime(1770):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
10-03 00:23:38.600: E/AndroidRuntime(1770):     ... 4 more
10-03 00:23:38.770: W/IInputConnectionWrapper(1770): showStatusIcon on inactive InputConnection
10-03 00:23:39.250: E/WindowManager(1770): Activity asynctask.com.Asyntask has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40565b30 that was originally added here
10-03 00:23:39.250: E/WindowManager(1770): android.view.WindowLeaked: Activity asynctask.com.Asyntask has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40565b30 that was originally added here
10-03 00:23:39.250: E/WindowManager(1770):  at android.view.ViewRoot.<init>(ViewRoot.java:259)
10-03 00:23:39.250: E/WindowManager(1770):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
10-03 00:23:39.250: E/WindowManager(1770):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
10-03 00:23:39.250: E/WindowManager(1770):  at android.view.Window$LocalWindowManager.addView(Window.java:424)
10-03 00:23:39.250: E/WindowManager(1770):  at android.app.Dialog.show(Dialog.java:241)
10-03 00:23:39.250: E/WindowManager(1770):  at android.app.ProgressDialog.show(ProgressDialog.java:107)
10-03 00:23:39.250: E/WindowManager(1770):  at android.app.ProgressDialog.show(ProgressDialog.java:90)
10-03 00:23:39.250: E/WindowManager(1770):  at asynctask.com.Asyntask$ReverseGeocodeLookupTask.onPreExecute(Asyntask.java:129)
10-03 00:23:39.250: E/WindowManager(1770):  at android.os.AsyncTask.execute(AsyncTask.java:391)
10-03 00:23:39.250: E/WindowManager(1770):  at asynctask.com.Asyntask$1.onClick(Asyntask.java:67)
10-03 00:23:39.250: E/WindowManager(1770):  at android.view.View.performClick(View.java:2485)
10-03 00:23:39.250: E/WindowManager(1770):  at android.view.View$PerformClick.run(View.java:9080)
10-03 00:23:39.250: E/WindowManager(1770):  at android.os.Handler.handleCallback(Handler.java:587)
10-03 00:23:39.250: E/WindowManager(1770):  at android.os.Handler.dispatchMessage(Handler.java:92)
10-03 00:23:39.250: E/WindowManager(1770):  at android.os.Looper.loop(Looper.java:123)
10-03 00:23:39.250: E/WindowManager(1770):  at android.app.ActivityThread.main(ActivityThread.java:3683)
10-03 00:23:39.250: E/WindowManager(1770):  at java.lang.reflect.Method.invokeNative(Native Method)
10-03 00:23:39.250: E/WindowManager(1770):  at java.lang.reflect.Method.invoke(Method.java:507)
10-03 00:23:39.250: E/WindowManager(1770):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
10-03 00:23:39.250: E/WindowManager(1770):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
10-03 00:23:39.250: E/WindowManager(1770):  at dalvik.system.NativeStart.main(Native Method) 
```

**注意 - Web 服务代码在没有 Asynctask 任务的情况下工作正常。
注意 - 当直接在 doInBackground 方法中进行耗时的计算时，Asynctask 工作正常。**

**刚刚在 doInBackground 方法中尝试了它的工作和实现 Webservice，但现在我陷入了进度对话框。它不会消失。**

```
if (Looper.myLooper() == null) { 
Looper.prepare(); 
} 
mLooper = Looper.myLooper(); resultofmail=sendtoserver(); 
Looper.loop(); 
return null; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:39:00.730

不要从`doInBackground`. 它们是 UI，应该`AsyncTask`在 UI 线程中运行的方法之一中完成，也许[`onProgressUpdate`](http://developer.android.com/reference/android/os/AsyncTask.html#onProgressUpdate%28Progress...%29).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T19:39:09.327

你的吐司是导致问题的原因！您可以创建一个方法在 UI 线程上为您制作吐司。

例如

```
public static void toastMSG (final String msg , int length )
    {
        activity.runOnUiThread(new Runnable() {

            @Override
            public void run() {
                Toast.makeText(context, msg, length).show();

            }
        });
    } 
```

然后使用此方法代替 Toast.makeText(...)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T19:39:11.587

当您尝试在**doInBackground** ()中`Toast`运行**sendtoserver()**时显示此问题。

 **相反，我建议您重新安排代码并从**doInBackground()返回任何***错误代码*并显示在**onPostExecute()**内部- 它在*UI thread*上运行。**`Toast`**

 *****或者您可以使用在*UI 线程上运行的***runOnUiThread**方法。`Runnable`*******

# c++ - 如何停止从套接字 C/C++ 接收数据

> ID：12696890
> 
> 赞同：0
> 
> 时间：2012-10-02T19:25:35.443
> 
> 标签：c++, c, sockets, tcp

关键是我发送了 4096 个字节，但大约只发送了 119 个字节。携带有用的信息。

100 个字节以 \r\n\r\n 结尾，因此在客户端中，当我读取 \r\n\r\n 时，我想停止从该字符串接收信息，然后重新开始。

我不知道我是否必须冲洗，或关闭插座，或其他什么...

它们是套接字 TCP。

在**客户端**我做：

```
 buf details[4096];
 strcpy(details,"1");
 strcat(details,"10/04/12");
 strcat(details,"Kevin Fire");
 strcat(detils,"abcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcde\r\n\r\n");
 nbytes_sent = send(sock,(char *)details,sizeof(details),0); 
```

另一方面，**服务器**...

```
char buf[20];
memset(buf,'\0',20);

while(!end){
 nbytes_read=recv(sclient,(char *)ress,sizeof(ress),0);

 if(strcmp(ress,"1")==0){
   printf("Details: %s (%i)\n",buf,nbytes_read);
   while(strcmp(buf,"\r\n\r\n") != 0){
     nbytes_read=recv(sclient,(char *)buf,sizeof(buf),0);
     cout.flush();
     printf("Details: %s (%i)\n",buf,nbytes_read);
   }                                     }
   if(strcmp(buf,"\r\n\r\n")==0) printf("The End\n");
   cout.flush();
 }
} 
```

我只想阅读一个新的“ress”，而不是检索其余无用的字节。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:38:50.077

如果您的意思是要丢弃其余数据并读取新块，则无法使用 TCP 执行此操作，因为它是面向流的，并且没有消息的概念，并且不知道要忽略的其余消息. 如果你的意思是别的，请描述更多。

但除此之外，为什么你`nbytes_sent = send(sock,(char *)details,sizeof(details),0);`只使用数据直到`\r\n' is important. you can use`nbytes_sent = send(sock,(char *)details,strlen(details),0);` 只发送有效数据并减少你通过网络发送的垃圾，你不需要在服务器重新开始？？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:31:24.067

我不确定我是否完全关注您的问题，但您似乎可以`end=true`在检测到收到的消息结束时进行设置：

```
char buf[20];
memset(buf,'\0',20);
while(!end)
{
    nbytes_read=recv(sclient,(char *)ress,sizeof(ress),0);
    if(strcmp(ress,"1")==0)
    {
        printf("Details: %s (%i)\n",buf,nbytes_read);
        while(strcmp(buf,"\r\n\r\n") != 0)
        {
            nbytes_read=recv(sclient,(char *)buf,sizeof(buf),0);
            cout.flush();
            printf("Details: %s (%i)\n",buf,nbytes_read);
        }
    }
    if(strcmp(buf,"\r\n\r\n")==0)
    {
        end = true; // <--- This should do it for you, right?
        printf("The End\n");
    }
    cout.flush();
} 
```

但是，如果客户端仍处于连接状态并将下一条消息写入套接字，那么您只需要开始读取下一条消息即可。那么一旦消息被写入，客户端会发生什么？它是开始写下一条消息还是关闭套接字连接？

另外：您需要获取缓冲区中的内容并从中创建消息。当前消息完成后，请考虑使用下一条消息的缓冲区内容创建一条新消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T19:32:01.337

如果您像 HTTP 1.0 一样设计您的协议，其中每个请求都会打开一个新套接字，然后在您阅读足够多的内容后关闭该套接字。

否则，您需要继续阅读，直到您跳过整个 4096 个字节。最简单的方法是继续阅读，直到你首先得到 4096 个字节（你需要调用`recv`循环调用），然后解析缓冲区的内容。再说一次，你最好重新设计你的协议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T22:24:50.177

我的想法是只看前 x 个字符。4 个字符可能是预期缓冲区的大小。

例如，如果您的消息是： abcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcde\r\n\r\n

它是（使用您的示意图）100 个字节，加上 \r\n\r\n. 所以是 100 + 4，所以是 104。

我会在你的字符串的开头发送 char(104) 作为一个标记值，然后是它之后的字符串，所以它看起来类似于

字符(104)abcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcde\r\n\r\n

然后使用 recv 的 peek_MSG 功能来获取第一个字符，使您的字符串大小，只读取该值，并且剩下的任何内容都会被您进行的套接字刷新调用丢弃。

# symfony - 使用 Composer 为 Symfony 2.1 安装 LiipImagineBundle

> ID：12696893
> 
> 赞同：1
> 
> 时间：2012-10-02T19:25:48.710
> 
> 标签：symfony, composer-php, liipimaginebundle

LiipImagineBundle 似乎没有使用composer（[github页面](https://github.com/liip/LiipImagineBundle)）安装自身的说明，所以我添加了

```
"liip/imagine-bundle": "*", 
```

到我的 composer.json 并更新。一切都很顺利，直到我尝试使用以下行在 appKernel.php 中注册捆绑包

```
new Liip\ImagineBundle\LiipImagineBundle(), 
```

php给出错误

```
Fatal error: Class 'Liip\ImagineBundle\LiipImagineBundle' not found in C:\xampp\htdocs\xxxx\Symfony\app\AppKernel.php on line 24 
```

据我所见，LiipImagineBundle 位于供应商文件夹中的正确位置。有人知道我哪里出错了吗？提前致谢。

*编辑我应该添加我正在使用 symfony 2.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T20:42:53.960

我不得不将作曲家中的行改为：

```
"liip/imagine-bundle": "*@dev" 
```

注意最后的**@dev**。这告诉作曲家我愿意接受“开发”稳定性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:35:22.637

我联系了捆绑包的开发人员，发现有一个`vendor/composer/autoload_namespaces.php`可以手动添加条目的地方，捆绑包不在那里。

本指南很有帮助：[5 分钟内的 Composer 命名空间](http://jtreminio.com/2012/10/composer-namespaces-in-5-minutes/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:46:30.210

我正在使用 Symfony 2.1.4-DEV 并在 composer.json 上包含 "liip/imagine-bundle": "*" 并更新它可以工作

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-02T19:27:55.260

您是否在中注册了 Namespace 并在中`autoload.php`注册了 Bundle `AppKernel.php`？如果不是，该课程将无法使用，直到在那里注册。

正如文档所说：

```
<?php
// app/autoload.php

$loader->registerNamespaces(array(
    // ...

    'Imagine'   => __DIR__.'/../vendor/imagine/lib',
    'Liip'      => __DIR__.'/../vendor/bundles',
)); 
```

和

```
<?php
// app/AppKernel.php

public function registerBundles()
{
    $bundles = array(
        // ...

        new Liip\ImagineBundle\LiipImagineBundle(),
    );
} 
```

## 更新

运行`composer update`它将重新生成您的引导文件。告诉我这是否有任何运气。

# printing - 没有打印对话框错误的 Safari 打印的优雅解决方法？

> ID：12696897
> 
> 赞同：1
> 
> 时间：2012-10-02T19:25:59.643
> 
> 标签：printing, applescript, safari

AppleScript 标准套件有一个从应用程序打印的命令，允许指定某些选项并在不显示对话框的情况下打印。例如：

```
tell application "Safari"
    print document 1 with properties {copies:3} without print dialog
end tell 
```

但是，当前版本的 Safari 中似乎存在一个错误，阻止了这种情况的发生。¹指定`without print dialog`时，窗口中会弹出一个工作表，该工作表应显示处理打印作业的进度，但它并没有这样做，而是挂在一个不具描述性的理发杆上。

在尝试解决这个问题时，我意识到如果我指定`with print dialog`，一切都会按预期进行。该脚本在显示对话框后暂停该行的执行，然后在用户点击对话框中的打印按钮后继续执行。最优雅的解决方法是`keystroke return`在显示对话框之后，但我认为这是不可能的，因为脚本在该行暂停，直到对话框被解除。

一个不太优雅的解决方法是：

```
on printCopiesOfCurrentPage(copies)
    tell application "System Events"
        tell application process "Safari"
            keystroke "p" using command down
            keystroke copies as text
            keystroke return
            delay 3
        end tell
    tell
end printCopiesOfCurrentPage 
```

由于在发送打印作业之前无法延迟执行，因此我们必须用 a 来猜测`delay 3`，这要么效率低下，要么有问题。

这里还有其他可能性吗？也许是一种在使用击键方法后观察打印对话框消失的方法，或者一种在`print with dialog`调用后开始工作的方法？

* * *

^(1.我第一次尝试这个时，它实际上打印了一页半，然后翻出并导致打印机卡纸，等等。从那以后我一直无法复制它，所以如果有人可以为我确认这个错误，将不胜感激。)

# c - C - 在 Windows 上编写在 UNIX 上编译，反之亦然

> ID：12696902
> 
> 赞同：0
> 
> 时间：2012-10-02T19:26:09.947
> 
> 标签：c, windows, unix, compilation

我计划使用 Cygwin 套件在 Windows 上使用 Netbeans 编写一个 ANSI-C 程序，稍后我想在 UNIX 系列操作系统上编译源代码并使用该程序。我应该担心任何类型的兼容性问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:22:42.177

如果您仅使用 C 标准中描述的功能，则可能的不兼容性集通常会减少为：

*   的签名`char`
*   **所有**类型的大小（例如`int`= `long`= = Windows 中的 32 位，在 UNIX 上不一定如此），我的意思是字面上的所有，包括指针和`enums`
*   考虑不周的类型转换和强制转换，尤其是涉及指针和负值（在表达式中混合有符号和无符号类型也容易出错）
*   类型的对齐及其在结构/联合中的填充
*   字节序
*   位域的顺序
*   实现定义/特定的行为，例如负值的右移、舍入和除有符号值时的符号
*   浮点：不同的实现和不同的优化
*   未指定的行为，例如函数参数和子表达式求值的顺序、`memcpy()`复制数据的方向（低地址到高地址或相反）等
*   未定义的行为，例如`i+i++`or `a[i]=i++`，修改字符串文字，当它指向的对象消失时指针取消引用（例如`free()'d`），不使用或误用`const`and`volatile`等
*   提供带有不适当参数的标准库函数会导致未定义的行为，例如`printf()`使用错误数量或类型的参数调用类似函数
*   非 ASCII 字符/字符串
*   文件名格式（特殊字符、长度、区分大小写）
*   时钟/时间/区域设置格式/范围/值/配置

还有更多。您实际上必须阅读标准并注意什么可以保证工作，什么不能工作以及是否有任何条件。

如果您使用 C 标准之外的东西，则该功能在不同平台上可能不可用或相同。

所以，是的，这是可能的，但你必须小心。通常是您做出的假设使您的代码移植性差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T19:35:25.173

会有可比性问题，但只要您坚持基本的 unix 功能，它们应该可以用于命令行应用程序。但是，如果您的应用程序具有 GUI 或必须与 unix 环境中的其他程序交互，您可能会后悔您的方法。

另一种方法是在桌面上的虚拟机中运行适当风格的 unix，并确保没有兼容性问题。

# regex - 为什么 ColdFusion 在正则表达式上抛出错误以去除特殊字符？

> ID：12696911
> 
> 赞同：1
> 
> 时间：2012-10-02T19:26:21.880
> 
> 标签：regex, coldfusion, coldfusion-9

我`reReplace`用来从文件名中去除特殊字符。以下正则表达式在我的代码中引发异常（见下文）。但是，当我在[ColdFusion 正则表达式实用程序](http://www.bennadel.com/resources/demo/regular_expression_replace/index.cfm)中测试正则表达式字符串时，它工作得很好。

这是我的代码：

```
reReplace(tmpName,"[{}\(\)\^$&%#!@=<>:;,~`'\'\*\?\/\+\|\[\\\\]|\]|\-",'','all') 
```

和错误：

> 错误消息：在第 29 行第 45 列找到无效的令牌 @。
> 
> CFML 编译器正在处理：
> 
> ```
> An expression beginning with !, on line 29, column 44.This message is usually caused by a problem in the expressions structure. 
> ```

如果我转义`@`符号，`\@`则会收到此错误：

> 错误类型：模板：[N/A] 错误消息：在第 29 行第 45 列发现无效的 CFML 构造。ColdFusion 正在查看以下文本：
> 
> \\ CFML 编译器正在处理：
> 
> ```
> An expression beginning with !, on line 29, column 44.This message is usually caused by a problem in the expressions structure. 
> ```

我这个正则表达式字符串的原始来源是：[Regex to Strip Special Characters](https://stackoverflow.com/questions/2733144/regex-to-strip-special-characters)

我删除了`.`and`_`因为这些字符应该被允许。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T19:47:51.343

`#`因为您在正则表达式中间有一个未转义的。

请记住`#`CFML 中具有特殊含义，因此如果要使用文字`#`，则需要将其转义为`##`.

所以你的正则表达式应该是：

```
[{}\(\)\^$&%##!@=<>:;,~`'\'\*\?\/\+\|\[\\\\]|\]|\- 
```

# linq - 为什么使用 Linq 的 .Select() 返回 IEnumerable 即使类型已明确定义？

> ID：12696914
> 
> 赞同：3
> 
> 时间：2012-10-02T19:26:32.000
> 
> 标签：linq, dynamic, casting, dapper

我正在使用 Dapper 返回动态对象，有时还手动映射它们。一切正常，但我想知道铸造法则是什么以及为什么以下示例成立。

（对于这些示例，我使用“StringBuilder”作为我的已知类型，尽管它通常类似于“Product”）

`IEnumerable<dynamic>`示例 1：即使 'makeStringBuilder' 清楚地返回一个`StringBuilder`对象，为什么这会返回一个？

示例 2：为什么会构建，但如果是 'Example1' 则不会`IEnumerable<StringBuilder>`？

示例 3：与示例 2 相同的问题？

```
private void test()
    {
        List<dynamic> dynamicObjects = {Some list of dynamic objects};

        IEnumerable<dynamic> example1 = dynamicObjects.Select(s => makeStringBuilder(s));

        IEnumerable<StringBuilder> example2 = dynamicObjects.Select(s => (StringBuilder)makeStringBuilder(s));

        IEnumerable<StringBuilder> example3 = dynamicObjects.Select(s => makeStringBuilder(s)).Cast<StringBuilder>();

    }

    private StringBuilder makeStringBuilder(dynamic s)
    {
        return new StringBuilder(s);
    } 
```

对于上述示例，是否有推荐的处理方法？这样的选角会影响表演吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:39:06.143

当您使用 时`dynamic`，即使作为参数，整个表达式也是通过动态绑定处理的，并将导致在编译时是“动态的”（因为它基于其运行时类型）。这在 C# 规范的 7.2.2 中有所介绍：

> 但是，如果表达式是动态表达式（即具有动态类型），则表明它参与的任何绑定都应基于其运行时类型（即它在运行时表示的对象的实际类型），而不是比它在编译时的类型。因此，这种操作的绑定被推迟到程序运行期间要执行该操作的时间。这称为动态绑定。

在您的情况下，使用强制转换将安全地将其转换为`IEnumerable<StringBuilder>`，并且对性能的影响应该很小。该`example2`版本的效率略高于该`example3`版本，但以这种方式使用时，两者的开销都非常小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T20:00:14.760

虽然我不能很好地说明“为什么”，但我认为您应该能够将 example1 写为：

```
IEnumerable<StringBuilder> example1 = dynamicObjects.Select<dynamic, StringBuilder>(s => makeStringBuilder(s)); 
```

您需要告诉编译器投影应该采用什么类型，尽管我确信其他人可以澄清为什么它不能推断出正确的类型。但我相信通过指定投影类型，您可以避免实际投射，这应该会产生一些性能优势。

# c# - 使用 List.Sort() 时忽略空格

> ID：12696915
> 
> 赞同：1
> 
> 时间：2012-10-02T19:26:33.257
> 
> 标签：c#, .net

我需要从文本文件中提取数据，对其进行排序，然后用新排序的数据保存旧数据。这是文本文件的格式：

```
Dog

Cow

Sheep 
```

如果我将文本读入列表，然后调用 sort 方法，我会得到：

```
""
""
""
Cow
Dog
Sheep 
```

那不是我想要的。.Sort() 有没有办法忽略空格，或者我应该以不同的方式解决这个问题？

*编辑*当我保存回文件时，我需要有空行。输出应该是

```
Cow 

Dog

Sheep 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T19:33:28.877

使用 Linq。以下应该工作：

```
string[] myText = File.RealAllLines("yourfile.txt");
var sortedWithoutEmptyLines = myText
     .Where(t=> !string.IsNullOrEmpty(t))
     .OrderBy(s=>s)
     .Select(i => string.Concat(i, Environment.NewLine)); //Adding extra linebreak as asked
File.WriteAllLines("yourfile.txt", sortedWithoutEmptyLines.ToArray()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T19:30:36.713

`List`我建议您改为仅使用非空格字符串构建另一个并对其进行排序。您不仅可以节省时间（如果您在每对“真实”字符串之间有空格，那么您基本上会无缘无故地对数据进行双倍排序），而且编写起来会简单得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T19:41:01.870

```
string[] lines = File.ReadAllLines("yourInputFile.txt");
var outputData = lines
        .Where(line => !string.IsNullOrEmpty(line)) //remove empty lines
        .OrderBy(item => item)
        .Select(line => line + Environment.NewLine); //add them back in
File.WriteAllLines("yourOutputFile.txt", outputData.ToArray()); 
```

只需取出所有空行，进行排序，然后将它们放回原处。

# python - 在 Python 中，获得二维最接近整数的最佳方法是什么？

> ID：12696916
> 
> 赞同：0
> 
> 时间：2012-10-02T19:26:35.057
> 
> 标签：python

我有一个二维元组列表，未排序，`n`大小。我想找出哪个元组的维度与 X 和 Y 最接近。最好的方法是什么？

```
target = (75, 75)
values = [
    (38, 61),
    (96, 36),
    (36, 40),
    (99, 83),
    (74, 76),
] 
```

使用`target`and `values`，该方法应该产生答案`(74, 76)`。

**编辑**

下面的[答案](https://stackoverflow.com/a/12697090/28360)将我引向这种确切的方法，适用于任何来到这里的人：

```
def distance(item, target):
    return ((item[0] - target[0]) ** 2 + (item[1] - target[1]) ** 2) ** 0.5

best = min(values, key=lambda x: distance(x, target)) 
```

这是一个[笛卡尔距离](http://en.wikipedia.org/wiki/Cartesian_coordinate_system#Distance_between_two_points)问题。

1.  首先取测试值的平方`x`减去最优`x`值。
2.  然后取测试值的平方`y`减去最佳`y`值。
3.  最后取第 1 步加上第 2 步的平方根，得到距离。
4.  将此应用于列表中的所有项目，最小的数字（使用该`min`函数）将为您提供最合适的选择。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T19:38:38.220

```
def distance(tup1,tup2):
    """
        This question is unanswerable unless you can specify this

        examples for 2d (you can write more general N-dimensional code if you need):
        cartesian: math.sqrt((tup2[0]-tup1[0])**2 + (tup2[1]-tup1[1])**2)
        manhattan: (tup2[0]-tup1[0]) + (tup2[1]-tup1[1])
    """
    return # YOUR CODE HERE

min(values, key=lambda x:distance(target,x)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T19:40:19.383

只是问题的另一个角度。由于这是笛卡尔平原的问题，将其转换为复杂的平原并解决

```
>>> min((abs(complex(*e)-complex(*target)),e) for e in values)[-1]
(74, 76) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T19:34:06.510

```
closest = min([(abs(val[0]-target[0])+abs(val[1]-target[1]),val) for val in values])[1] 
```

是一种方式。

# git - 无法将现有 Git 存储库添加到新存储库

> ID：12696919
> 
> 赞同：1
> 
> 时间：2012-10-02T19:26:45.953
> 
> 标签：git, github, git-submodules

我正在尝试创建一个新的存储库并向其中添加两个项目。其中一个项目已经在 Git 源代码控制下，所以我复制了该项目并删除了 .git 文件夹并删除了我拥有的存储库。当我将项目添加到我的存储库时，不受源代码控制的项目会被很好地添加，但另一个会被添加为子模块（GitHub 上的绿色文件夹）。

我尝试通过对其进行删除子模块`git rm --cached`，但它仍然存在，我无法将项目的文件添加到存储库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-20T02:07:11.347

```
rm -rf path_to_submodule
rm -rf .git/path_to_submodule
rm .gitmodules
git commit -am "removing submodule"
git push 
```

`.gitmodules`应该不存在 e`.git/` 不应该有来自子模块的引用

检查：

```
git ls-files | grep submodule_name
find . | grep submodule_name 
```

最后：

```
git submodule add git@git.whatever.com.br:johndoe/johndoe_repo.git johndoe_branch/johndoe_repo --force 
```

`--force`如果您的文件系统中已有该文件夹，则为可选

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T06:10:26.560

你试过新鲜结帐了吗？似乎没有`git submodule remove`，所以您必须手动编辑`.gitmodules`.

如果您想使用签出的副本将模块 X（已经在版本控制下）添加到模块 Y（新的）：

*   镉进入 X
*   确保它是一个独立的模块：不应该有任何`.gitmodule`（如果有，那就更复杂了）。
*   运行`git status`以确保您没有任何未提交的更改。
*   运行`git clean -xfd`以摆脱 some 中的任何内容`.gitignore`，例如临时构建文件等。
*   删除`.git`目录
*   将 X 复制到 Y
*   `git add X`在 Y 内运行。

您也可以`git clone path-to-Y`在 X 之后执行类似的操作`rm -rf Y/.git`。

# javascript - 使用 jQuery、+= 和 -= 支持设置 css3 转换属性

> ID：12696920
> 
> 赞同：1
> 
> 时间：2012-10-02T19:26:51.080
> 
> 标签：javascript, jquery, css

我正在使用这个 jquery 插件来使用带有 jquery CSS 函数的 CSS 转换：

[http://www.zachstronaut.com/posts/2009/02/22/jquery-patch-css-transform.html](http://www.zachstronaut.com/posts/2009/02/22/jquery-patch-css-transform.html)

```
$('.element').css{ transform : 'translate(' + val + 'px,0)' }; 
```

上面的代码目前有效，但我希望能够*增加*值，就像你可以做的那样，例如，留有边距：

```
$('.element').css{ marginLeft : '+=' + val }; 
```

有没有办法使用 jquery 来增加 css3 转换/翻译属性？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T19:29:50.267

您可以尝试添加[css 钩子](http://api.jquery.com/jQuery.cssHooks/)并`translate`使用

`$('.element').css({ translate : '+=' + val });`

# c++ - 如何获取 system() 命令 qt c++ 的输出？

> ID：12696924
> 
> 赞同：1
> 
> 时间：2012-10-02T19:27:03.927
> 
> 标签：c++, qt, command, system

我想得到这个命令的输出，例如：

```
system("dir C:\"); 
```

或：

```
QProcess::execute("cmd /c dir C:\"); 
```

怎么做 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T14:48:39.580

```
QProcess process;
process.start("cmd /c dir C:\\");
process.waitForFinished(-1);
QByteArray out = process.readAllStandardOutput(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T19:29:59.893

您可以将标准输出路径修改为从中读取的管道，但它会更容易使用`popen()`而不是`system()`.

由于您似乎使用的是 Windows，因此您将使用`_popen()`.

```
#include <stdio.h>

....

FILE *fp = _popen("dir c:\", "r");
....
while (!feof(fp)) {
    ....
}
fclose(fp); 
```

# asp.net-mvc - 错误页面未显示

> ID：12696930
> 
> 赞同：0
> 
> 时间：2012-10-02T19:27:30.493
> 
> 标签：asp.net-mvc, exception-handling

错误页面未显示。下面是我的配置。

```
[HttpGet]
public ActionResult Index(string name)
{
throw new ArithmeticException();
}

//Handle Error attribute
public override void OnException(ExceptionContext filterContext)
{
//logging
filterContext.ExceptionHandled = true;
base.OnException(filterContext);
}  

<customErrors mode="On" defaultRedirect="~/Error">
      <error statusCode="404" redirect="~/Error/NotFound"/>      
</customErrors> 
```

我在“错误”文件夹中放置了“错误”和“未找到”视图。但是，如果我输入无效的 url，则会显示“未找到”视图。但是对于算术异常，不会显示默认错误页面，仅显示具有相同 url 的空白页面。你能请任何人建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:59:44.210

我不确定，但是，如果您设置`filterContext.ExceptionHandled = true;`了 errorhandler，则不会将您重定向到错误页面。所以尝试删除它。

# css - 带有提交按钮的 z-index 不能正常播放

> ID：12696935
> 
> 赞同：1
> 
> 时间：2012-10-02T19:27:46.603
> 
> 标签：css, input, z-index, layer

我正在为此绞尽脑汁，无法弄清楚。我有重叠的 DIV，但我无法让提交按钮（登录）位于顶部。

[http://swaptoria.com/](http://swaptoria.com/)

您会在右侧看到登录按钮和主区域的 DIV，这会阻止按钮被点击。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T19:31:28.453

您的登录按钮的位置是静态的，因此不会考虑其 z-index，将其更改为`position: relative;`z-index 仅适用于定位元素（位置：绝对、位置：相对或位置：固定）。

# c# - Log4Net - 为级别类型设置转换模式

> ID：12696939
> 
> 赞同：3
> 
> 时间：2012-10-02T19:27:55.003
> 
> 标签：c#, log4net

我正在尝试在我的 C# WinForms App.config 中设置 Log4Net，并想为 Debug/Fatal/Info 等设置不同的 conversionPattern。有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T21:24:53.433

每个 appender 只能执行一种转换模式。然而，Appender 可以有级别过滤器。您可以为每个转换模式创建不同的附加程序，然后应用适当的过滤器。例如：

```
<appender>
  <filter type="log4net.Filter.LevelMatchFilter">
    <levelToMatch value="ERROR"/>
  </filter>
</appender> 
```

此[log4net 教程](http://www.codeproject.com/Articles/140911/log4net-Tutorial)包含所有详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T19:34:00.503

我很确定不可能在每个日志级别的附加程序上分配不同的转换模式。

您可以创建多个具有不同阈值的附加程序，并为每个附加程序设置不同的转换模式。然而，这仍然不会让你 100% 获得你所追求的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-20T15:25:48.453

您可以使用模式布局转换器 [https://devstuffs.wordpress.com/2012/01/12/creating-your-own-pattern-layout-converter-for-log4net/](https://devstuffs.wordpress.com/2012/01/12/creating-your-own-pattern-layout-converter-for-log4net/)

在转换函数中，您可以获得日志级别，然后您可以根据级别提供模式。

# websphere - 将 WebSphere Application Server 合并到 WebSphere ESB 安装中

> ID：12696944
> 
> 赞同：0
> 
> 时间：2012-10-02T19:28:25.300
> 
> 标签：websphere, esb

我有一个架构，其中我有一台带有 Websphere 应用程序服务器的机器，另一台带有 Websphere EBS 的机器。

工作量非常低，所以一台机器（就像我现在一样）就足够了。根据这个[链接](http://www-01.ibm.com/software/integration/wsesb/v6/faqs.html#notify)，

> 因为 WebSphere ESB 是通过其 WebSphere ESB 许可构建在 WebSphere Application Server 之上的；客户能够使用 WebSphere Application Server 功能。

因此，Websphere ESB 中提供了 WAS 功能。是否可以将 WAS 中的代码合并/组合/集成到 WESB 中，以便仅拥有一个许可证和一个服务器？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:48:33.593

你可以，而且也很简单。

安装 WESB 并创建 WESB 配置文件并在其中部署中介模块，并创建 WAS 配置文件并在这些配置文件上托管标准 Java EE 应用程序。

WESB 版本通常使用旧版本的 WAS，因此您可能必须在继续此路径之前考虑此限制。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:51:44.950

您应该能够毫无困难地在 WESB 上部署针对 WAS 的应用程序。反之则有风险，但并非不可能。

正如 Manglu 所说，您需要注意版本，如果这是用于生产，您需要了解已安装的修复程序并确保您的目标服务器与当前的 WAS 安装。

要找出这一点，请使用带有选项 -maintenancePackages 的 versionInfo 命令，您将获得每个组件的级别列表以及安装的任何 APAR。

说明在这里： [http ://www-01.ibm.com/support/docview.wss?uid=swg21267921](http://www-01.ibm.com/support/docview.wss?uid=swg21267921)

> **视窗**
> 
> versionInfo.bat -maintenanacePackages >versioninfo.txt
> 
> **AIX、HP-UX、Linux、Solaris**
> 
> ./versionInfo.sh -maintenanacePackages >versioninfo.txt

# java - DocumentBuilder 使用 xml 解析错误

> ID：12696949
> 
> 赞同：1
> 
> 时间：2012-10-02T19:28:41.733
> 
> 标签：java

我在 String 变量中有一个 XML，我想将该值传递到 DocumentBuilder 的 parse() 中。

```
String xml = "<?xml version="1.0 ....>";
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
Document doc = db.parse(new InputSource(new StringReader(xml))); 
```

但是，似乎最后一行不起作用，因为 doc 为空。

这有什么问题吗？我只是在尝试获取一个 xml 值并将其转换为 Document。

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:40:05.263

你需要更近的东西

```
DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
Document doc = docBuilder.parse(new InputSource(new StringReader(xml))); 
```

您可以将其修剪为：

```
DocumentBuilder docBuilder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
Document doc = docBuilder.parse(new InputSource(new StringReader(xml))); 
```

请注意，通常您会期望一个 XML 文件，它会是：

```
DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
Document doc = docBuilder.parse(new File(fullpathtofile)); 
```

# .net - 使用 .NET ArrayList .RemoveAt() 不会重新计算正确的计数

> ID：12696951
> 
> 赞同：-2
> 
> 时间：2012-10-02T19:28:44.090
> 
> 标签：.net, vb.net, arraylist

我正在使用`ArrayList`VB.Net 中的 300 多条记录。当我处理它们时，我删除了指定索引处的记录，因为它们没有按顺序存储。`Arraylist`我的问题是，当我在使用之前第一次查看计数时，计数显示为`RemoveAt()`373，但使用`RemoveAt()`几次后，我注意到计数上升到 425 左右。

根据我对 MSDN 参考页面的理解`ArrayList.RemoveAt()`，该方法应删除指定索引处的元素并将`ArrayList`计数减一。

如果有人遇到此问题或对它为什么这样做有任何线索，请告诉我。

**更新**arraylist 中的每个元素都是一个对象的实例。

**更新**这是在 arraylist 中找到一个元素以提取然后删除它的代码。

```
 While (SimsRun.Count > 0)

        counter = 0

        'Get a new record
        While (counter < SimsRun.Count)

            tempSim = SimsRun(counter)

            If tempSim.BatchIndex = (simToFind - 1) Then

                SimsRun.RemoveAt(counter)

                Exit While

            End If

            counter = counter + 1

        End While

        Process Record
        .
        .
        .
        .

    End While 
```

它所在的外部循环将在 SimsRun.Count() > 0 时运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:58:45.660

我不知道这是否与您的问题有关，但您从零开始计数并删除对象，然后增加您的计数器。通过这样做，您实际上跳过了列表中的所有其他项目。如果您有 4 个元素，并且您删除了项目 0，并且 counter = 0，那么您要检查的下一个项目是项目 0，而不是项目 1，因为您已经删除了项目 0，而项目 1 现在是项目 0。感觉？您要么需要更改处理计数器变量的方式，要么从数组的末尾开始倒计时。至于最后有太多项目，只需输入一个 Debug.WriteLine，它会在您移动时打印出您的数组计数，您应该会看到计数下降，而不是上升。如果数组正在增长，那么您有没有发布的代码导致了这种情况。

# magento - Magento 搜索结果层

> ID：12696956
> 
> 赞同：0
> 
> 时间：2012-10-02T19:29:12.327
> 
> 标签：magento

你能帮助我吗？当我想搜索一些产品时，它会破坏我的图层。我想删除右栏。这是它的图像[http://i49.tinypic.com/vopnj4.png](http://i49.tinypic.com/vopnj4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:41:09.183

试试这个：

在 app\design\frontend\your_package\your_theme\layout\catalog.xml

```
<default>
    <remove name="right" />
    .....
</default> 
```

这将从所有目录页面中删除它，因此您可能希望将其更改为

```
<catalog_product_view translate="label"> 
```

浏览器中的 url 路径是什么（在 www.xyz.com/? 之后）

# javascript - 从括号中的数字对中检索第一个值

> ID：12696960
> 
> 赞同：3
> 
> 时间：2012-10-02T19:29:32.860
> 
> 标签：javascript, jquery, css

我正在使用 jQuery 来获取 CSS 转换属性：

```
this.$slider.css('transform') 
```

以下返回：

```
translate(100px, 0px) 
```

如何使用 javascript 或 jQuery 将数字 100 作为变量获取？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T19:33:21.560

使用 javascript 字符串函数：

```
str = this.$slider.css('transform');
a = str.substring(str.indexOf('(')+1,str.indexOf('px'));
alert(a); //100 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T19:32:16.943

你可以使用正则表达式：

`'translate(100px, 0px)'.match(/[^\(]+\(([0-9]+)/)[1]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T19:32:29.270

```
var transform = this.$slider.css('transform'),
    first = transform.split('(')[1].split('px')[0]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T19:36:24.070

一个小的正则表达式就足以拉出第一个数字，但请注意这并不挑剔，因为它们是像素单位或可能在 CSS 中返回的任何其他东西

```
this.$slider.css('transform').match(/\d+/) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T19:35:27.953

```
s = "translate(100px,0px)"
parseInt(s.substring(s.indexOf("(")+1), 10) // returns 100 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T19:36:41.370

只需从索引 10 开始切片，然后通过`parseInt`.

```
var str = this.$slider.css('transform');

var n = parseInt( str.slice(10), 10 ); 
```

或者如果除了变换还有其他类型的结果，你可以这样做：

```
var n = parseInt( str.split("(")[1], 10); 
```

# ruby-on-rails - 随着时间的推移跟踪追随者

> ID：12696965
> 
> 赞同：0
> 
> 时间：2012-10-02T19:29:53.577
> 
> 标签：ruby-on-rails, ruby-on-rails-3, database-design

我想在我的 Rails 应用程序中构建功能，以显示随时间推移的追随者趋势。

目前，我的追随方法涉及创建和销毁关系对象 - 追随创建具有追随者 ID 的对象，追随和取消追随删除该关系对象。

由于关系对象在取消关注时被删除，因此不可能返回并查看在任何给定时间存在多少关注者。

为了解决这个问题，我能想到的最好的解决方案是：

与其在取消关注时删除关系对象，不如创建一个负值（例如 -1）的新对象。以下将创建一个正值为 +1 的对象。因此，将给定对的总价值相加将得出他们当前是否关注（1 或 0），而历史趋势也可以通过将给定关注的总关注值相加来计算。

我的问题是：这是这个问题最优雅的解决方案吗？有更简单的方法吗？我意识到可以使用 cron 作业来输出每日数字，但这似乎会重复数据。还有其他建议吗？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:43:36.667

我会添加一个活动字段，而不是删除关系记录，而是将记录设置为非活动。然后，您必须更新所有面向用户的查询以反映 active = 1。然后您可以使用 active = 0 的记录进行报告。您还可以添加一个 deactivated_at 字段来存储记录被停用的日期。

一个示例场景是用户 1 关注用户 2，关注用户 3，关注用户 4，取消关注用户 2，重新关注用户 2，取消关注用户 4。

```
follower_id followed_id active created_at deactivated_at
1           2           0      9/10/2012  9/13/2012
1           3           1      9/10/2012  NULL
1           4           0      9/10/2012  9/17/2012
1           2           1      9/16/2012  NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T23:16:26.280

只需使用`paranoia`

[https://github.com/radar/paranoia](https://github.com/radar/paranoia)

```
class Relationship < ActiveRecord::Base
  acts_as_paranoid

  ...
end 
```

（如果您在两个数字 ID 列上有**唯一**索引，请将其删除，使用普通索引）

然后你可以拥有

```
def currently_following_count(uid)
  Relationship.where(:followed_id => uid).count
end

def historical_following_count(uid)
  Relationship.unscoped.where(:followed_id => uid).count
end 
```

# coldfusion - 如何使用受保护的单元格创建 cfspreadsheet

> ID：12696971
> 
> 赞同：4
> 
> 时间：2012-10-02T19:30:23.117
> 
> 标签：coldfusion, cfspreadsheet

我正在使用 cfspreadsheet 创建一个电子表格对象。想将一些单独的单元格设置为受保护的（只读）。请让我知道是否有人以前尝试过。

我确实尝试将单元格格式设置为锁定，但它似乎不起作用。这是示例代码：

```
<cfset a = spreadsheetnew()>
<cfset format1 = structNew()>
<cfset format1.locked=true>
<cfset SpreadsheetFormatCell(a,format1,1,1)>
<cfspreadsheet action="write" filename="#expandpath('.')#/test.xls" name="a" overwrite="true"> 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T22:36:43.063

[除非工作表受到保护（](http://apache-poi.1045710.n5.nabble.com/How-to-make-readonly-cell-tt2305926.html#a2305930)即使用 cfspreadsheet 的`password` 属性），否则锁定单元格不会执行任何操作。但这样做有一些负面的副作用......

保护工作表会锁定*所有*单元格。这意味着您基本上必须通过应用格式来“解锁”其他所有内容。从理论上讲，您可以解锁整个工作表：

```
<cfset SpreadsheetFormatCellRange (sheet, {locked=false}, 1, 1, maxRow, maxCol)> 
```

但是，这会产生令人讨厌的效果，即填充工作表中的*每个单元格*。因此，如果您将文件读入查询，查询将包含约 65,536 行和 256 列。即使您只明确填充了几个单元格。

锁定功能更适合您希望锁定除少数单元格之外的所有内容（而不是相反）的情况。除非那是您正在做的事情，否则考虑到所有负面影响，我可能不会为此烦恼。

**副作用示例**

```
 <cfset testFile = "c:/test.xls">
    <cfset sheet = spreadsheetNew()>
    <!--- only unlocking 100 rows to demonstrate --->
    <cfset SpreadsheetFormatCellRange (sheet, {locked=false}, 1, 1, 100, 10)>

    <!--- populate two cells --->
    <cfset SpreadsheetSetCellValue(sheet,"LOCKED",1,1)>
    <cfset SpreadsheetSetCellValue(sheet,"UNLOCKED",2,1)>

    <!--- make one cell locked --->
    <cfset SpreadsheetFormatCell(sheet, {locked=true}, 1, 1)>

    <cfspreadsheet action="write"
            name="sheet"
            fileName="#testFile#"
            password="" 
            overwrite="true" >

    <!--- now see it is filled with empty cells --->    
    <cfspreadsheet action="read"
            query="sheetData"
            src="#testFile#" >

    <cfdump var="#sheetData#" label="Lots of empty cells" /> 
```

# python - Storm ORM 和自动生成表

> ID：12696972
> 
> 赞同：2
> 
> 时间：2012-10-02T19:30:24.303
> 
> 标签：python, orm, storm-orm

我声明阅读 Storm ORM 文档，并尝试一些使用 sqlite 的示例。我有一个问题，Storm 是否可以自动从模型创建表？我不想这样做：

```
store.execute("CREATE TABLE person "
              "(id INTEGER PRIMARY KEY, name VARCHAR)") 
```

每次我想创建新表时，当表已经存在时也不好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T20:54:10.067

Storm ORM 没有自动创建表的功能。我开始使用[peewee](https://github.com/coleifer/peewee) ORM，它看起来很不错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T19:41:17.763

如果您仍在启动该项目并且还没有投入太多工作，那么我建议您直接尝试面向对象的数据库，而不是使用一些关系后端来模拟面向对象的数据库。[ZODB](http://www.zodb.org/)是一个很好的匹配，但你也应该看看[MongoDB](http://www.mongodb.org/)和同事。不久前我尝试了 Storm，但很快又放弃了，因为性能非常慢，尤其是插入或更新语句，所以丢弃了很多代码。你不必犯同样的错误。

更多主题：据我所知，没有这样的功能。我也在找它，有点失望，在设置了详细的数据模型后，它不能自动生成表格。打我，如果我错过了。

# python - Python - 启动两个进程以无限期运行

> ID：12696979
> 
> 赞同：0
> 
> 时间：2012-10-02T19:31:05.523
> 
> 标签：python, multithreading, multiprocessing

我构造了一个简单的示例脚本，它定义了`multiprocessing`在 python 中使用的三个单独的进程。我的目标是让一个父线程产生两个较小的线程来收集和处理数据。

目前，我的实现如下所示：

```
from Queue import Queue,Empty
from multiprocessing import Process
import time
import hashlib

class FillQueue(Process):
    def __init__(self,q):
        Process.__init__(self)
        self.q = q

    def run(self):
        i = 0
        while i is not 5:
            print 'putting'
            self.q.put('foo')
            i+=1
        self.q.put('|STOP|')

class ConsumeQueue(Process):
    def __init__(self,q):
        Process.__init__(self)
        self.q = q

    def run(self):
        print 'Consume'
        while True:
            try:
                value =  self.q.get(False)
                print value
                if value == '|STOP|':
                    print 'done'
                    break;
            except Empty:
                print 'Nothing to process atm'

class Ripper(Process):

    q = Queue()

    def __init__(self):
        self.fq = FillQueue(self.q)
        self.cq = ConsumeQueue(self.q)
        self.fq.daemon = True
        self.cq.daemon = True

    def run(self):
        try:
            self.fq.start()
            self.cq.start()
        except KeyboardInterrupt:
            print 'exit'

if __name__ == '__main__':
    r = Ripper()
    r.start() 
```

当前运行时，CLI 上脚本的输出如下所示：

```
putting
putting
putting
putting
putting
Consume
foo
foo
foo
foo
foo
|STOP|
done 
```

显然，我开始我的两个线程的方式是阻塞的，因为在填充程序完成添加项目之前，消费者甚至不会开始处理队列中的项目。

我应该如何重写它以使两个线程立即开始而不是阻塞，因此消费者将在`Empty`没有工作要处理的情况下简单地传递到 except 块，但在收到停止消息时会完全退出？

编辑：错字，`start`和`run`方法混淆了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T19:57:24.340

您似乎正在使用 multiprocessing.Process 启动多个进程。

但是，您使用的是 Queue.Queue，它只是线程安全的，而不是为多个进程使用而设计的。

shevek 的回答也是有效的，但首先，您应该将 Queue.Queue 替换为 multiprocessing.Queue。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T19:40:47.920

我认为您的程序运行良好。CPU 一次只处理一件事，时间很短。但是，将所有东西放入队列所需的时间非常短。因此，没有理由填充器不能在一个时间片内完成此操作。

如果您在填充程序中添加一些延迟，我认为您应该会看到它实际上按预期工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T20:01:51.203

试试这个：

```
from Queue import Empty
from multiprocessing import Process, Queue
import time
import hashlib

class FillQueue(object):
    def __init__(self, q): 
        self.q = q 

    def run(self):
        i = 0 
        while i < 5:
            print 'putting'
            self.q.put('foo %d' % i ) 
            i+=1
            time.sleep(.5)
        self.q.put('|STOP|')

class ConsumeQueue(object):
    def __init__(self, q): 
        self.q = q 

    def run(self):
        while True:
            try:
                value =  self.q.get(False)
                print value
                if value == '|STOP|':
                    print 'done'
                    break;
            except Empty:
                print 'Nothing to process atm'
                time.sleep(.2)

if __name__ == '__main__':
    q = Queue()
    f = FillQueue(q)
    c = ConsumeQueue(q)

    p1 = Process(target=f.run)
    p1.start()

    p2 = Process(target=c.run)
    p2.start()

    p1.join()
    p2.join() 
```

# django - 在 django 模型中访问外键字段的属性

> ID：12696987
> 
> 赞同：0
> 
> 时间：2012-10-02T19:31:28.473
> 
> 标签：django

我正在尝试创建一个返回外键属性的模型方法。在这种情况下，我希望 get_place_name() 返回 place 模型的 pretty_name 字段。但是当我这样做时，我得到一个属性错误：“'NoneType'对象没有属性'pretty_name'”

```
class CalendarEvent(models.Model):

    event_id = models.CharField( max_length=22, db_index=True, unique=True )
    event_name = models.CharField( max_length=255, db_index=True )
    place = models.ForeignKey( Place, blank=True, null=True  )

    def __unicode__(self):
        return self.event_name

    def get_place_name(self):
        return "%s" % self.place.pretty_name 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T19:34:29.203

好吧，你有`null=True`你的`place`外键。是否有可能对于`CalendarEvent`您所调用的特定而言，`place`确实是`None`？在这种情况下，错误将是准确的。您可以通过修改您的`get_place_name`方法来更优雅地处理它：

```
def get_place_name(self):
    if self.place:
        return self.place.pretty_name 
```

# asp.net-mvc - MVC - 编辑对象列表

> ID：12696988
> 
> 赞同：11
> 
> 时间：2012-10-02T19:31:37.317
> 
> 标签：asp.net-mvc, http-post

我在 MVC 中有以下类布局：

```
public class ReportModel 
{
    List<SomeItem> items;
    string value;
    string anotherValue;
} 
```

现在我在这种类型的 MVC 中创建了一个强类型视图，并制作了可编辑的文本字段来编辑每个值，并使用 foreach 循环填充文本字段以编辑某些项目列表中的项目。

当我提交给 httppost 方法时，奇异值在 reportmodel 对象中恢复正常，但列表没有在对象中返回。这应该怎么做？

当我说 httppost 时，我指的是 MVC 发回的方法

```
[HttpPost]
public ActionResult EditReport(ReportModel report)
{
    // Save the report in here after the update on the UI side
} 
```

查看发布某些项目列表的代码

```
if (Model.items != null && Model.items.Count > 0)
{
    for (int i = 0; i < Model.items.Count; i++)
    {                
        <div class="editrow">
            <div class="edititem">
                <div class="editor-label">
                    @Html.LabelFor(m => m.items.ElementAt(i).propertyOne)
                </div>
                <div class="editor-field">
                    @Html.TextBoxFor(m => m.items.ElementAt(i).propertyOne)
                    @Html.ValidationMessageFor(m => m.items.ElementAt(i).propertyOne)
                </div>
            </div>
            <div class="edititem">
                <div class="editor-label">
                    @Html.LabelFor(m => m.items.ElementAt(i).propertyTwo)
                </div>
                <div class="editor-field">
                    @Html.TextBoxFor(m => m.items.ElementAt(i).propertyTwo)
                    @Html.ValidationMessageFor(m => m.items.ElementAt(i).propertyTwo)
                </div>
            </div>
            <div class="edititem">
                <div class="editor-label">
                    @Html.LabelFor(m => m.items.ElementAt(i).propertyThree)
                </div>
                <div class="editor-field">
                    @Html.TextBoxFor(m => m.items.ElementAt(i).propertyThree)
                    @Html.ValidationMessageFor(m => m.items.ElementAt(i).propertyThree)
                </div>
            </div>
        </div>
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-03T12:39:45.417

不要`ElementAt(1)`在您的 lambda 表达式中使用 => 这会破坏您的输入字段名称。请阅读 Kirill 建议您的博客文章。

所以你可以使用索引访问：

```
for (int i = 0; i < Model.items.Count; i++)
{                
    <div class="editrow">
        <div class="edititem">
            <div class="editor-label">
                @Html.LabelFor(m => m.items[i].propertyOne)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.items[i].propertyOne)
                @Html.ValidationMessageFor(m => m.items[i].propertyOne)
            </div>
        </div>
        <div class="edititem">
            <div class="editor-label">
                @Html.LabelFor(m => m.items[i].propertyTwo)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.items[i].propertyTwo)
                @Html.ValidationMessageFor(m => m.items[i].propertyTwo)
            </div>
        </div>
        <div class="edititem">
            <div class="editor-label">
                @Html.LabelFor(m => m.items[i].propertyThree)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.items[i].propertyThree)
                @Html.ValidationMessageFor(m => m.items[i].propertyThree)
            </div>
        </div>
    </div>
} 
```

当然，为了让索引器访问集合，这假设您的`items`属性被声明为`List<SomeItem>`or `SomeItem[]`。如果它是一个`IEnumerable<SomeItem>`它不会工作。因此，只需在视图模型上更改此属性的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T20:23:34.593

Kirill 对 Scott Hanselman 的博客条目的引用是正确的，但您的阅读范围太窄了。在显示的示例中，他将数组传递给 action 方法，但它也可以很容易地包含在父模型中。同样的概念也适用。

但是，要知道的一件事是，默认模型绑定器不会实例化嵌套类，因此它不会创建 List 类的实例，这意味着它将始终为 null。要解决此问题，您必须在构造函数中实例化空列表类。

这只是问题的一部分，因为数据必须以正确的方式格式化，模型绑定器才能绑定它。这就是 Scott 的博客文章的用武之地，因为它提供了模型绑定器将数据识别为列表所需的格式。

如果您使用 EditorTemplate 并使用 Html.EditorFor(m => m.Items) 然后有 SomeItem.cshtml EditorTemplate，这通常会为您处理。这处理了集合项命名的问题（只要您也在模板中使用强类型帮助器）。

# html - 使容器 div 高度和背景颜色随内容扩展

> ID：12696989
> 
> 赞同：0
> 
> 时间：2012-10-02T19:31:42.543
> 
> 标签：html, css

首先，我已经研究了所有选项，你们专业人士会说我没有，但我有:) 我就是想不通。白色背景不会随着子 div 的扩展而扩展。

这是CSS

```
 #container{
        position: relative;
        background-color: #FFF;
        width: 900px;
        height: auto;
        margin-top: 50px;
        margin-right: auto;
        margin-bottom: 0;
        margin-left: auto;
        border: 2px solid #FFF;

        }
#banner {
    height: 60px;
    width: 900px;
    background-color: #CFF;
    color: #F00;
    }
#menu{
    position: absolute;
    top: 59px;
    height: 150px;
    left: -2px;
    width: 100px;
    border: 2px solid #FFF;
    color:      #250517;
    background-color:   #6D6968;
    }
#menulogin{
    position: absolute;
    top: 209px;
    height: 100px;
    left: -2px;
    width: 100px;
    border: 2px solid #FFF;
    color:      #250517;
    background-color:   #6D6968;
    }
table {
    border: none;
    }
#content {
        position: absolute;
    height: auto;
    left: 105px;
    width: 789px;
    text-align:left;
    padding-left: 5px;
    } 
```

这些是div：

```
<body>
<div id="container">
    <div id="banner"> Dit is de <strong>BETA</strong> van roekoerace.be! </div>
    <div id="menu">
        <table width="100" border="" cellspacing="2" cellpadding="0">
    <tr>
    <td><a href="../login.php">Login</a></td>
    </tr>
    <tr>
    <td><a href="../index.php">Profiel</a></td>
     </tr>
    <tr>
    <td><a href="../duifkes.php">Duiven</a></td>
    </tr>
    <tr>
    <td>Wedstrijden</td>
    </tr>
    <tr>
    <td>Training</td>
    </tr>
    <tr>
    <td>Markt</td>
    </tr>
    </table>
    </div>
  <div id="menulogin"><!-- TemplateBeginEditable name="LoginMenu" --><!-- TemplateEndEditable --></div>
    <div id="content"><!-- TemplateBeginEditable name="Inhoud" --><p>&nbsp;</p><!-- TemplateEndEditable -->
    </div> 
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:50:12.783

我认为这可能有助于您尝试做的事情......看看它，如果您的问题仍然包括在内，请更新您的问题。

[http://jsfiddle.net/rj5by/](http://jsfiddle.net/rj5by/)

# iphone - 更改行的 UITabelView 动画

> ID：12696994
> 
> 赞同：0
> 
> 时间：2012-10-02T19:32:07.343
> 
> 标签：iphone, xcode, uitableview, animation, cell

由于可可中有许多不同的动画来呈现 UIView，但还没有看到任何单元格动画。那么我们可以更改行的 UITabelView 动画吗？如果是这样，请分享示例代码..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:36:26.220

伙计，我认为您将在今晚学习所有可可.. :) @Muz 您可以使用[ADlivelytableview](http://www.cocoacontrols.com/controls/adlivelytableview)更改单元格动画.. 只需导入此类并作为

```
ADLivelyTableView * livelyTableView = (ADLivelyTableView *)self.mTableView;

livelyTableView.initialCellTransformBlock = ADLivelyTransformFan; 
```

# php - PHP Regex 删除字符后的所有内容

> ID：12696996
> 
> 赞同：7
> 
> 时间：2012-10-02T19:32:14.553
> 
> 标签：php, regex

所以我看过几篇文章有点太深了，所以我不确定从他们所做的正则表达式中删除什么。

我基本上得到了这个

**foo:bar**一直到**anotherfoo:bar;seg98y34g.?sdebvw h segvu**（任何事情都是真的）

我需要一个 PHP 正则表达式来删除冒号后的所有内容。第一部分可以是任何长度（但它从不包含冒号。所以在上述两种情况下，我都会得到

**foo**和**anotherfoo**

在做了类似这个可怕的伪代码示例之后

```
$string = 'foo:bar';
$newstring = regex_to_remove_everything_after_":"($string); 
```

**编辑**

发布后，`explode()`工作是否足够可靠？就像是

```
$pieces = explode(':', 'foo:bar') 
$newstring = $pieces[0]; 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-02T19:37:35.410

[`explode`](http://php.net/manual/en/function.explode.php)会做你所要求的，但你可以通过使用[`current`](http://php.net/manual/en/function.current.php).

```
$beforeColon = current(explode(':', $string)); 
```

我不会在这里使用正则表达式（这涉及一些在幕后进行的相对简单的操作），我也不会使用[`strpos`](http://php.net/manual/en/function.strpos.php)with [`substr`](http://php.net/manual/en/function.substr.php)（因为那样会有效地遍历字符串两次）。最重要的是，这为阅读代码的人提供了即时的“啊，是的，这就是作者正在尝试做的事情！” 而不是“等等，又发生了什么事？”

唯一的例外是如果您碰巧知道字符串过长：我不会`explode`使用 1 Gb 文件。反而：

```
$beforeColon = substr($string, 0, strpos($string,':')); 
```

我也觉得`substr`不太容易阅读：`current(explode`您可以立即看到分隔符，没有额外的函数调用，并且变量只有一个事件（这使得它不太容易出现人为错误）。基本上，我读`current(explode`作“我正在处理该字符串之前的任何事情的第一个事件”，而不是`substr`“我得到一个从 0 位置开始并一直持续到该字符串的子字符串”。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-02T19:35:38.597

您的`explode`解决方案可以解决问题。如果出于某种原因你真的想使用正则表达式，你可以简单地这样做：

```
$newstring = preg_replace("/(.*?):(.*)/", "$1", $string); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T19:37:32.630

比其他示例更简洁：

```
current(explode(':', $string)); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-05T15:50:21.037

您可以使用 m.buettner 编写的 RegEx，但他的示例返回 ':' 之前的所有内容，如果您想要 ':' 之后的所有内容，只需使用 $2 而不是 $1：

```
$newstring = preg_replace("/(.*?):(.*)/", "$2", $string); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T19:35:56.173

您可以使用以下内容。演示：[http ://codepad.org/bUXKN4el](http://codepad.org/bUXKN4el)

```
<?php 
  $s = 'anotherfoo:bar;seg98y34g.?sdebvw h segvu';
  $result = array_shift(explode(':', $s));
  echo $result;
?> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-02T19:36:26.157

为什么要使用正则表达式？

```
list($beforeColon) = explode(':', $string); 
```