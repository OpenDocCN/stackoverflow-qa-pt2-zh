# StackOverflow 问答 14164000-14164999

# java - 杰克逊反序列化多态类型

> ID：14164002
> 
> 赞同：3
> 
> 时间：2013-01-04T19:55:43.417
> 
> 标签：java, json, generics, polymorphism, jackson

我有以下示例类：

```
class Zoo {
    public Collection<? extends Animal> animals;
} 
```

序列化时，我试图通过以下方式尽可能多地序列化类型信息：

```
 mapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL); 
```

我得到以下 JSON：

```
[
    "com.bp.samples.json.generics.Zoo",
    {
        "animals": [
            "java.util.ArrayList",
            [
                [
                    "com.bp.samples.json.generics.Bird",
                    {
                        "name": "bird-1",
                        "wingSpan": "6 feets",
                        "preferredFood": "food-1"
                    }
                ],
                [
                    "com.bp.samples.json.generics.Cat",
                    {
                        "name": "cat-1",
                        "favoriteToy": "toy-1"
                    }
                ],
                [
                    "com.bp.samples.json.generics.Dog",
                    {
                        "name": "dog-1",
                        "breed": "bread-1",
                        "leashColor": "black"
                    }
                ]
            ]
        ]
    }
] 
```

当涉及到反序列化时，尝试做：

```
mapper.readValue(new File("./DataFiles/Zoo-2.json"), Zoo.class); 
```

导致以下异常：

```
Exception in thread "main" com.fasterxml.jackson.databind.JsonMappingException: 
Can not deserialize instance of com.bp.samples.json.generics.Zoo out of START_ARRAY toke 
```

并尝试做：

```
mapper.readValue(new File("./DataFiles/Zoo-2.json"), 
   new TypeReference<Collection<? extends Animal>>() {}); 
```

结果是：

```
Can not construct instance of com.bp.samples.json.generics.Animal, 
problem: abstract types either need to be mapped to concrete types, have custom 
deserializer, or be instantiated with additional type information
at [Source: ./DataFiles/Zoo-2.json; line: 2, column: 5] 
```

当然，编写自定义反序列化程序可以解决问题，但是如果没有自定义反序列化程序，是否可以进行反序列化？

谢谢，贝扎德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T22:56:30.443

据我所知，您的第一次尝试应该有效。我能想到的唯一解释是您尝试使用不同`ObjectMapper`的反序列化配置：两者都必须以相同的方式启用默认类型（因为这是控制是否包含类型信息的原因）。

如果您使用相同的映射器实例（或相同的配置），您可能需要提交错误报告，以便诊断和修复问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T20:41:35.143

确保您为用于反序列化的 ObjectMapper 实例启用了类型信息。你想反序列化到 Zoo 而不是 Collection of Animals，所以第一个代码片段是正确的。

您可能还想尝试[Genson lib](http://code.google.com/p/genson/)。我刚刚用它检查了你的例子，一切似乎都很好。要在 Genson 中启用多态类型支持，您需要配置您的 genson 实例：

```
Genson genson = new Genson.Builder().setWithClassMetadata(true).create(); 
```

# javascript - 如何设置html5画布shadowBlur的宽度？

> ID：14164003
> 
> 赞同：2
> 
> 时间：2013-01-04T19:55:43.060
> 
> 标签：javascript, html, canvas

html5 画布的上下文具有以下与设置阴影相关的属性：

```
shadowOffsetX = float
shadowOffsetY = float
shadowBlur = float
shadowColor = color 
```

其中没有设置阴影的宽度。是否可以使用画布设置宽度？

shadowBlur 似乎确实增加了宽度，但模糊变得更加不透明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:21:45.033

较高的 shadowBlur 值**确实会**增加阴影的宽度，但不幸的是它也会降低强度，因此非常高的值会产生几乎不可见的模糊。

增加阴影强度的唯一方法是多次绘制对象。然而，当对象本身是 alpha 透明时，这可能会导致不希望的结果，并且也可能是一个性能挂钩，因为已经非常昂贵的模糊效果必须在每次通过时重新计算。通过将具有模糊效果的对象绘制到单独的、不可见的画布上，然后将该画布多次绘制到真实画布上，可以稍微降低性能成本。不幸的是，这仍然是一个肮脏的黑客。

当您想要创建真正精美的图形效果时，您应该考虑使用 WebGL。学习曲线非常陡峭，但是当您掌握了窍门时，您就可以使用 OpenGL 着色语言的全部功能（好吧，不是*全部*功能 - 只有 1.00 版 - 但这已经足够了直接在用户 GPU 上计算的图形效果）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-24T10:28:25.227

尝试这个：

将对象绘制到画布上，增加线宽，将对象重新绘制到下面的不同画布上，在下面的画布上设置 CSS3 模糊效果。

当我用路径绘图时为我工作。

# c++ - 选择和移动事件在 QGraphicsScene 中不起作用

> ID：14164005
> 
> 赞同：0
> 
> 时间：2013-01-04T19:55:53.043
> 
> 标签：c++, qt, events

我有一个继承自的类`QGraphicItems`和另一个继承自的类`QGraphicsScene`。我创建了一个自定义项目并将它们放置在我的自定义场景中。这是我的事件处理函数：

```
void Panel::mousePressEvent(QGraphicsSceneMouseEvent *mouseEvent)
{
    if (mouseEvent->button() != Qt::LeftButton)
        return;
    //my code 

    QGraphicsScene::mousePressEvent(mouseEvent);
}

void Panel::mouseMoveEvent(QGraphicsSceneMouseEvent *mouseEvent)
{
    //my code 

    QGraphicsScene::mouseMoveEvent(mouseEvent);
}

void Panel::mouseReleaseEvent(QGraphicsSceneMouseEvent *mouseEvent)
{
    //my code

    QGraphicsScene::mouseReleaseEvent(mouseEvent);
} 
```

但是，这些事件似乎没有被调用。我的代码基于`DiagramScene`Qt 中的示例，主要区别在于我的项目继承自`QGraphicsItem`而不是`QGraphicsPolygonItem`.

我怎样才能正确处理这些事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:15:00.947

在您的实现中`Panel::mousePressEvent()`，您最终会`QGraphicsScene::mousePressEvent()`在您自己的代码处理完事件后调用。的默认实现`QGraphicsScene::mousePressEvent()`可能会撤消您在自己的代码中所做的事情。例如，默认实现`QGraphicsScene::mousePressEvent()`会将事件转发到接受鼠标事件的最顶层项目，*该*项目将成为鼠标抓取器。如果您的代码期望发生其他一些事情，例如另一个对象应该是抓取器（无法从您发布的有限代码中看出），那么对基类的调用将撤消您所做的事情。

如果您希望自己以自定义方式处理事件，则不应调用基类的事件处理程序。

# sql - VB datagrid绑定源过滤器

> ID：14164007
> 
> 赞同：0
> 
> 时间：2013-01-04T19:55:56.723
> 
> 标签：sql, vb.net, datagridview

我已经对我的 datagridview 连接进行了编程，而不是使用内置的向导功能。我现在遇到的唯一问题是我似乎无法在我键入时通过 SQL 过滤器搜索绑定源。我的意思是，当我在文本框中键入时，我想过滤我的数据库的“SkuNo”列的数据，如数据网格上所示。这非常简单，并且与向导一起工作得很好，但我正在努力通过代码做到这一点。这是我的代码：

```
 Private Sub txtSearchOnSku_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles txtSearchOnSku.TextChanged
    Dim source1 As New BindingSource()

    DataGridView1.DataSource = source1

    source1.Filter = "skuNo LIKE'" & txtSearchOnSku.Text & "*'"
End Sub
End Class 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:15:53.913

好的，伙计们

继承人的代码：

```
Dim sql As String = "SELECT * FROM duragadget"
Dim connection As New OleDbConnection(duraGadgetDB)
Dim dataadapter As New OleDbDataAdapter(sql, connection)
Dim ds As New DataSet()
Dim dsView As New DataView
Dim bs As New BindingSource()
connection.Open()
dataadapter.Fill(ds, "dura")
connection.Close()
dsView = ds.Tables(0).DefaultView
bs.DataSource = dsView
bs.Filter = "skuNo LIKE'" & txtSearchOnSku.Text & "*'"
DataGridView1.DataSource = bs 
```

# css - 更少的嵌套样式来模仿 html 布局？

> ID：14164012
> 
> 赞同：1
> 
> 时间：2013-01-04T19:56:14.303
> 
> 标签：css, less

这个嵌套的混乱就是我的较少样式表的布局（减去任何实际样式）：

```
#branding {
    h1 {

    }
    #tagline {

    }
    .ticker {

    }
    nav {
        ul {
            li {
                a {

                }
            }
        }
    }
    #search-form {
        input {

        }
        button {

        }
    }
}
#masthead {
    #store-locator {

    }
    #slider {
        ul {
            li {

            }
        }
    }
    #events {
        article {
            img {

            }
            h4 {

            }
            p {

            }
        }
    }
}
#main {
    #buckets {
        ul {
            li {
                img {

                }
                h3 {

                }
                .description {
                    .author {
                        a {

                        }
                    }
                    p {

                    }
                    blockquote {

                    }
                }
                .more {

                }
            }
        }
    }
    #social-feed {
        hgroup {

        }
        #filters {
            ul {
                li {

                }
            }
        }
        #feeds {
            .feed-column {
                > div {
                    img {

                    }
                    h3 {
                        span {

                        }
                    }
                    .description {
                        p {

                        }
                        .author {
                            a {

                            }
                        }
                    }
                }
            }
        }
        #feed-amount {
            a {
                &:before {

                }
                &:after {

                }
            }
        }
    }
}
#summary {
    nav {
        ul {
            li {
                a {

                }
            }
        }
    }
    #newsletter-form {
        h4 {

        }
        input {

        }
        button {

        }
    }
    #stay-connected {
        h4 {
            a {

            }
        }
    }
    #donation {

    }
    #contact-info {
        #contact-number {
            span {
                strong {

                }
            }
        }
        #contact-details {
            address {
                strong {
                    a {

                    }
                }
            }
            p {

            }
        }
    }
} 
```

这在某些方面对我来说很有意义，因为它模仿了标记的布局，但它有一些严重的缺点，例如过于具体的选择器，IE：

```
#main #social-feed #feeds .feed-column > div .description p {} 
```

我的问题是，有什么更好的方式来布置这份文件？

我在这里滥用 LESS 吗？我搜索了“LESS 样式表示例”和类似的东西，但我找不到一个完整的 less 样式表的示例——谁能给我提供一个精心制作的 less 文档的示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:14:30.983

如果 LESS*允许*嵌套选择器，那么这并不意味着您必须*这样*做。只需做与使用常规 CSS 相同的事情即可。

如果您的目的只是视觉层次结构，那么您可以在没有真正嵌套的情况下执行此操作：

```
#social-feed {
    /**/
}
    #feeds {
        /**/
    } 
```

嵌套 id 选择器（如 ）通常没有意义`#foo #bar`（只要您的元素层次结构在不同页面中是持久的）。

此外，在适用时使用子组合器是有意义的：

```
nav {
    & > ul {
        & > li {
            & > a {

            }
        }
    }
} 
```

这样生成的选择器 ( `NAV > UL > LI > A`) 可能比上下文选择器 (`NAV UL LI A`或`NAV A`) 工作得更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T21:22:40.723

像您这样说明的选择器膨胀是“严重的缺点”之一，这就是为什么我会谨慎使用选择器的嵌套。对我来说，让 CSS与标记的布局*完全匹配并不是那么重要。*我可以使用一些稀疏的注释来帮助我了解我在 CSS 中的“部分”。所以让我来谈谈我如何改变事情的一些想法。

## 保持靠近，不必嵌套

**例子**

```
/* branding */

#branding {
    h1 { }

    .ticker { }

    nav {
        ul { }
        li { }
        a { }
    }
}

#tagline { }

#search-form {
    input { }
    button { }
} 
```

**讨论**

首先，请注意如何将评论作为我的部分标题，而不是仅使用 对`#branding`所有内容进行分组。这是我保留的一些“结构”，如 html，我按主要的“包装”标题分组，并使它们彼此靠近。

其次，任何`id`标签都应该有自己的顶级嵌套组，假设您*正确地构建了 html*以保持 id 对页面是唯一的。我认为唯一的例外是，如果您在`body`元素上使用某个类来切换页面上的外观，并且该外观更改的一部分包括对所选元素的样式进行更改`id`（但即使这样也可以通过仍然将`id`as顶层；请参阅`&`下面的“利用力量”）。所以我已经把你的`#tagline`和`#search-form`从下面的窝里拉出来了`#branding`。

第三，考虑您的设计和代码以尽量减少臃肿。例如，如果您`nav`在页面上有其他元素（侧栏中的子导航等），那么嵌套`nav`in`#branding`是值得的。同样，如果您在该包装器之外有其他用途`h1`或用途。`.ticker`然而，我鄙视的一个常见的巢是`ul li a`巢。如果里面唯一的列表`nav`是`ul`，那么没有理由将它嵌套在`li`里面并最终出现`ul li`在你的选择器字符串中，因为它是一个给定的，所有的`li`都位于那里。同样，如果 中的唯一`a`标签在`nav`列表内，则无需嵌套。有这个CSS...

```
#branding nav ul { }
#branding nav li { }
#branding nav a { } 
```

...与完整的嵌套版本相比，它的选择器字符串同样干净且不那么臃肿。

## 利用 & 的力量

[我喜欢](https://stackoverflow.com/questions/11537260/less-css-abusing-the-operator-when-nesting/11544805#11544805)使用`&`将关键父级添加到代码中的想法。回想一下上面关于在`body`元素上添加一个类以控制跨页面的主题（或外观）的异常。你可以将它嵌套在主题类中，或者你可以这样做：

**例子**

```
#branding {
    .theme1 & { }
    .theme2 & { }

    h1 { }

    .ticker { }

    nav {
        ul { }
        li { }
        a { }
    }
} 
```

**讨论**

然后会产生一个选择器，比如通过主题类`.theme1 #branding`改变外观。`#branding`如果您需要它来更改嵌套在其中的项目的属性，有多种方法可以做到（这在很大程度上取决于您希望最终输出看起来像什么结构）。一种方法是仅将其添加到需要的内容中：

**例子**

```
#branding {
    .theme1 & { }
    .theme2 & { }

    h1 { 
      .theme2 & { //special code only for theme2 here }
    }

    .ticker { }

    nav {
        ul { 
          //main code here
          .theme1 & { //special code here }
          .theme2 & { }
        }
        li { }
        a { }
    }
} 
```

**讨论**

*缺点*是代码中的`.theme`类有一些额外的重复，而这样做的*好处*是它将*端点*目标分组，所以例如`ul`上面会产生这样的代码......

```
#branding nav ul {}
.theme1 #branding nav ul {}
.theme2 #branding nav ul {} 
#branding nav li {}
#branding nav a {} 
```

...这使所有各种`ul`代码彼此相邻。现在，如果`li`和`a`元素也需要在主题上进行更改，您必须决定是否要将主题上移一个级别，以便特定主题的`ul`,`li`和按*主题*`a`彼此相邻分组，或者是否保留它在像上面一样的最低级别，以便每个,和保持按实际设置样式*的端点标记分组。**`ul``li``a`*

 **当然，使用`&`to append 通常在嵌套中仍然有用，所以...

```
a {
  &:hover {}
} 
```

`a:hover {}`...无论嵌套多深，生成信息`a`都是嵌套和`&`组合的一个很好的用途。

## 结论

关于这个问题，当然还有更多可以说的。关键是在需要的地方利用预处理器的功能，而不仅仅是因为它可用。对我来说，mixin 是预处理器中比嵌套更有用的部分。**

# reporting-services - 处理 SSRS 中缺少数据的 #Error

> ID：14164014
> 
> 赞同：1
> 
> 时间：2013-01-04T19:56:17.687
> 
> 标签：reporting-services

我正在 SSRS 2008 R2 中编写报告，并且我有一个有时不包含任何值的字段，即。空值。我只想显示值，对于填充的条目，这很好。问题是，如果报告中的#Error 是空条目，我将无法摆脱它！

我尝试使用多个表达式处理该字段，但它们都不起作用。

我试过了

```
=Fields!Example.IsMissing 
```

但它返回 false，这意味着 SSRS 不认为该字段丢失。价值本身

```
=Fields!Example.Value 
```

给出#Error。我试过了

```
=iif(IsError(Fields!Example.Value), 0, Fields!Example.Value)
=iif(Fields!Example.Value is nothing, 0, Fields!Example.Value) 
```

所有这些仍然给我#Error！另外，如果我这样做：

```
=IsNothing(Fields!Example.Value) 
```

它返回false，所以它不认为它什么都不是。令人沮丧！关于我还应该尝试什么的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:22:00.033

如果`=Fields!Example.Value`给您一个错误，那么您将遇到更深层次的问题。

通常，SSRS 会将 true 视为`null`类似于空字符串，并会生成一个空白单元格。听起来你有某种公式处理这个实际上正在生成`#error`/异常。

# php - 将 URL 参数传递给 PHP 变量

> ID：14164017
> 
> 赞同：0
> 
> 时间：2013-01-04T19:56:21.060
> 
> 标签：php, variables, get

我有下面的代码，我试图使用 URL 中的参数从我的数据库中获取匹配项。我不断收到错误消息“失败”。网址如下：

```
http://www.examplesite.com/template.php?eventname=3506 
```

编码：

```
<?php
require_once("./source/include/membersite_config.php");

if(!$fgmembersite->CheckLogin())
{
    $fgmembersite->RedirectToURL("login.php");
    exit;
}

// Make a MySQL Connection
...

// Retrieve the variable from the url
if(!empty($_GET['eventname'])) {
    $eventname = $_GET['eventname'];
} else {
    //set default value for $eventname or maybe output an error because eventname isn't set
    echo '<p>', 'something failed', '</p>';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:34:20.760

旁注：不要让您通过不逃避您在查询中输入的内容来破坏数据库。

```
$result = mysql_query("SELECT * FROM events WHERE event_id = '$eventname'") 
```

改用[mysql_real_esape_string](http://php.net/manual/en/function.mysql-real-escape-string.php) ($eventname)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:04:07.210

您的代码*应该可以*工作，除非有东西干扰了查询字符串。

**第一的**

替换这一行：

```
echo '<p>', 'something failed', '</p>'; 
```

和：

```
printf("<pre>Something Failed:\n%s\n</pre>", var_export($_GET, true));
exit; 
```

这将在错误消息中包含一些*有意义的*数据，然后退出，这样您就不会在脚本的其余部分继续处理错误/丢失的数据。[ [printf](http://ca1.php.net/manual/en/function.printf.php)也是一个非常方便学习的函数]

**第二**

如果上述内容没有向您透露任何内容，请`.htaccess`在您的站点中查找一个文件，该文件可能具有与查询字符串混淆的 RewriteRule。

# ruby-on-rails - 使用 RackBaseURI 的 Suburi 部署神秘地停止工作

> ID：14164021
> 
> 赞同：0
> 
> 时间：2013-01-04T19:56:57.147
> 
> 标签：ruby-on-rails, passenger

我按照这些说明将我的 rails 应用程序部署到 suburi：

[http://www.modrails.com/documentation/Users%20guide%20Apache.html#deploying_rails_to_sub_uri](http://www.modrails.com/documentation/Users%20guide%20Apache.html#deploying_rails_to_sub_uri)

12 月 23 日，我的应用程序部署在 suburi 下并且运行良好。当我在 12 月尝试时。26 我注意到像 stylesheet_link_tag 这样的 url 助手不再使用 RackBaseURI。因此，我的浏览器没有请求 //myapp.com/suburi/app/assets/application.css，而是请求 //myapp.com/assets/application.css 当然这是 404。我查看了两个应用程序的所有日志和阿帕奇，并没有看到任何可疑的东西。

重新启动 apache 使 suburi 突然重新开始工作。

这是我的 vhost.conf [https://gist.github.com/4382822](https://gist.github.com/4382822)

有人知道我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:01:22.183

所以我终于想通了。[问题是，如果您有一个乘客应用程序设置为使用类似http://local-webservice.localhost/sub/uri/route](http://local-webservice.localhost/sub/uri/route)的子 uri ，但重启后的第一个请求会通过根目录（如[http:// /local-webservice.localhost/route](http://local-webservice.localhost/route)然后乘客基本上会丢弃您的 sub-uri 配置，直到您重新启动应用程序。

[这个问题的解决方案是在乘客谷歌小组中](https://groups.google.com/forum/?fromgroups=#!topic/phusion-passenger/OztSsKQGHXs)给我的，但我把它包括在这里，希望它可以帮助其他人。这是我得到的答案：

> 这是由于 Phusion Passenger 目前唯一识别应用程序的方式。它目前仅通过应用程序根来执行此操作。假设您在 foo.com、bar.com 和 baz.com/suburi 上部署了 /webapps/foo。Phusion Passenger 会将它们都识别为同一个应用程序，只是在不同的域和子 URI 下。
> 
> 这是我们希望在未来版本中修复的问题。但是现在，要使其按预期工作，请为您的子 URI 部署设置不同的 PassengerAppGroupName。例如：

```
<Location /suburi/app> 
  PassengerAppGroupName suburi_app 
</Location> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T00:36:14.813

从您提供的内容中，我看不出您做错了什么。也许这是Passenger中的一个错误。

我想不出任何可以使 RackBaseURI 开始工作，然后在没有重新启动 apache 的情况下停止工作，然后在没有其他更改的情况下重新启动 apache 后重新开始工作的事情——除了乘客中的错误。希望它不会再发生。我自己经常使用 RackBaseURI，但没有看到这个问题。

也有可能（也许更有可能）发生了一些奇怪的事情，这不是乘客的错误，但我们没有足够的信息来知道。你确定 apache 没有在 12 月 23 日到 26 日之间重启？您确定您在任何时候都没有更改任何配置文件（apache 或 rails）吗？或预编译您的资产或在 ./tmp/cache 中创建或删除文件或其他任何内容？（后者显然不会以任何方式破坏事物，但它们至少可以想象是相关的。这是作品 - 不作品 - 没有对任何文件进行任何更改，这有点不可思议（无论如何对我来说！）但是对于乘客中的错误。

# actionscript-3 - 围绕其中心旋转精灵会导致大小发生变化

> ID：14164026
> 
> 赞同：0
> 
> 时间：2013-01-04T19:57:09.437
> 
> 标签：actionscript-3, flash, actionscript

我创建了一个继承自的类，`Sprite`并添加了以下从中心旋转的函数：

```
private function rotate(angle:Number):void
        {
            trace(width);

            var tmpWidth:Number = width;
            var rect:Rectangle = getBounds(parent); 
            var matrix:Matrix = transform.matrix;
            matrix.translate(-(rect.left + rect.width/2), -(rect.top + rect.height/2) );
            matrix.rotate((angle/180)*Math.PI); 
            matrix.translate((rect.left + rect.width/2), (rect.top + rect.height/2) );
            transform.matrix = matrix;

            trace(width);
        } 
```

我的问题是对象的大小在旋转后发生了变化。例如，变换前的宽度值小于变换后的宽度。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:14:49.433

我没有看到任何意外的行为。

由于您正在应用旋转，因此旋转后宽度和高度可能会有所不同。

例如，如果您对 50x100 的精灵应用 90 度旋转，它现在将是 100x50 的精灵。

但是，如果您在一个完全正方形的对象上执行旋转，并应用 90 度旋转，那么之前和之后的宽度应该是相同的。

请记住，宽度和高度是根据对象的边界计算的。通过旋转对象，您可能会更改对象的边界，从而更改宽度和高度。

# git - 一个track github可以拉吗？

> ID：14164031
> 
> 赞同：2
> 
> 时间：2013-01-04T19:57:18.363
> 
> 标签：git, github

有没有办法查看是否有人从 GitHub 上的存储库执行 git pull？或者这不是在任何地方记录的吗？我很感兴趣，因为“应该”不从事该项目的开发人员对此了解很多。

是的，我们可以删除它们。但我很想知道他们是否滥用了他们签署的信任和 NDA 协议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T20:03:38.600

您可以通过多种方式从 GitHub 获取源代码。

1.  拉过 HTTPS。

2.  拉过 SSH。

3.  拉过 Git 协议。

4.  下载快照。

5.  浏览网页界面。

据推测，您有一个私人存储库，否则这整件事都是无稽之谈。因此，您必须向 GitHub 支付费用，因此您应该向支持人员发送电子邮件（或开票，或其他方式）。我不知道 GitHub 保留什么样的日志。

**然而，**

您使用“滥用信任和 NDA 协议”这个短语非常*可疑*。

1.  NDA 不会阻止某人阅读专有源代码。这不是 NDA 的功能。NDA 的目的是防止某人泄露有关它的信息。因此，术语，“保密协议”。因此，NDA 应该是无关紧要的。

2.  关于“滥用信任”这句话。是否禁止开发人员将源代码读取到此存储库？

    *   您是如何与开发人员沟通的？您是否亲自或以书面形式告知开发人员禁止他们访问此源代码？

    *   你和开发商谈过吗？开发人员是否承认/拒绝访问源代码？

    *   开发者有没有可能在饮水机旁与其他开发者聊天，学到了一切？

    “信任”是一个非常模糊的术语。我不知道您是否“信任”开发人员遵守员工手册中的规则，或者您是否“信任”开发人员只是“做正确的事”。您可能试图通过技术解决方案解决人员问题（不要那样做），或者您可能只是试图获得开发人员违反规则的证据（这很好）。

# php - 带有预制图像的验证码

> ID：14164036
> 
> 赞同：1
> 
> 时间：2013-01-04T19:57:43.697
> 
> 标签：php, captcha

我从之前在 Photoshop 中制作的一系列 20 张图像构建了自己的自定义验证码系统，然后将它们在名为“验证码”的数据库表中链接到它们的代码。我不确定这种方法是否安全，只要垃圾邮件机器人难以读取图像，我认为它们是，而不是动态生成验证码图像，这会消耗更多处理时间，但也许这是唯一推荐的方法。

你怎么看待这件事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T20:12:01.963

我也这样做了。

但仅仅因为该网站不是垃圾邮件发送者的**强目标**。

我能够切断所有机器人生成的垃圾邮件。

唯一一点，20张图片太少了。

我设置了一个applescript，它生成了从0000到9999的10000张图像。

该脚本正在创建文档，绘制数字，随机旋转和平移，然后应用我在 PS 中的 Action 上设置的一些过滤器。

此外，每个图像都被赋予了一个伪随机文件名（例如`876376.jpg`数字`1234`图像），并且生成了一个表格映射，以在每个数字和相应的文件名之间建立关系。

* * *

  **为什么要选择这种方法并重新发明轮子而不是使用 reCAPTCHA？**

两个原因：

1.  reCAPTCHA 是防弹的，但有时会让用户感到恼火。

2.  reCAPTCHA 将 Google 的 cookie 存储在用户的设备上。为了遵守 UE 的法规和 GDPR，您可能需要设置或扩展有关 cookie 和隐私政策页面的信息横幅。

# java - 画一个像这样的图

> ID：14164038
> 
> 赞同：-3
> 
> 时间：2013-01-04T19:57:45.113
> 
> 标签：java, javascript, spring

有谁知道可以使用哪些工具来绘制如下图？

![在此处输入图像描述](../Images/f3cdc8d55fad6070813ca2918165cae0.png)

扇区对应于一些参数 - 扇区 1 对应参数 1 等。如您所见，每个扇区都分为“级别”，并且有“颜色”来指定可接受的级别。参数值不一定是“离散的” - 参见参数 20。

项目详情：使用 spring-mvc、javascript 和一些 jquery 魔法。

我需要什么：大概，一些工具（框架、库等）将根据我的价值观生成图表。图表应以图形格式（jpeg，...）保存以供进一步使用（导出为文档，显示在网页上）

PS。即使您可以提出一种不会生成完全相同的图表的方法，我也会非常感谢您..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T20:02:26.920

这可能与[D3.js 库](http://d3js.org/)有关。

查看[这个博客](http://kreese.net/blog/2012/08/26/d3-js-creating-a-polar-area-diagram-radial-bar-chart/)，作者在其中创建了与 D3.js 类似的东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T20:00:30.570

一个很好的方法是使用 SVG 对象。SVG 是一种矢量图形格式，可以嵌入到 HTML 文档中，并且可以使用 Javascript 进行操作（添加/删除/更改形状，更改形状的颜色）。

当您有任何**具体**问题时，请随时写一个新问题。

# jquery - jQuery：当 margin-top < 0 时停止滚动文本

> ID：14164040
> 
> 赞同：2
> 
> 时间：2013-01-04T19:57:48.420
> 
> 标签：jquery, if-statement, scroll, jquery-animate, margin

我得到了带有 2 个按钮的滚动文本工作正常，但我似乎无法让它停止。如果margin < 0 with and if语句，我正在尝试禁用该按钮。

请在此处查看演示：

[http://jsbin.com/udumos/2/edit](http://jsbin.com/udumos/2/edit)

代码：

```
$(function() {

    var margin = parseInt(jQuery('#content').css('margin-top'), 10);

    $('#scroll-down').click(function() {

        $('#content').animate({
            'margin-top': '+=50'
        }, 1000);

        return margin;

    });

    if (margin > 0) {
        $('#scroll-up').click(function() {

            $('#content').animate({
                'margin-top': '-=50'
            }, 1000);

        });
    }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:10:11.970

您需要在每次点击事件时更新边距。

```
$(function () {
    $('#scroll-down').click(function () {
        $('#content').animate({
            'margin-top': '+=50'
        }, 1000);
        return margin;
    });

    $('#scroll-up').click(function () {
        var margin = parseInt(jQuery('#content').css('margin-top'), 10);
        if (margin >= 0) {
            $('#content').animate({
                'margin-top': '-=50'
            }, 1000);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T20:16:45.340

您需要在单击中移动该 if 语句。您还需要在每次单击时更新边距。我还想在向下单击周围放置 if 语句，以确保如果您在顶部，它不能向下移动。

[更新了 jsbin](http://jsbin.com/udumos/7/)

### jQuery

```
$(function(){

   var margin = parseInt(jQuery('#content').css('margin-top'), 10);

   $('#scroll-down').click(function(){
       if( margin > 0 ) {
           // Update margin
           margin -= 50;
           $('#content').animate({
              'margin-top': '+=50'
           }, 1000);
       }
   });

   $('#scroll-up').click(function(){
       // Update margin
       margin += 50;
       $('#content').animate({
          'margin-top': '-=50'
       }, 1000);
   });
}); 
```

# c# - 选择语句抛出空异常

> ID：14164043
> 
> 赞同：2
> 
> 时间：2013-01-04T19:57:54.303
> 
> 标签：c#, servicestack, ormlite-servicestack

`null exception`在第二个 Select 语句中得到一个神秘的东西。

```
public static string GetSNFromDeviceMacAddress(string macAddress)
{
    string commzSerialNumber = null;
    var dbFactory = EndpointHost.AppHost.TryResolve<IDbConnectionFactory>();
    try
    {
        OrmDataLib.Device device;
        OrmDataLib.Commz commz;
        using (var db = dbFactory.OpenDbConnection())
        {
            // first select works fine
            device = db
                .Select<OrmDataLib.Device>(q => q.MacAddress == macAddress)
                .FirstOrDefault();
            if (null != device)
            {
                // mysterious null exception
                commz = db
                    .Select<OrmDataLib.Commz>(c => c.Id == device.Commz_Id)
                    .FirstOrDefault();
                if (null != commz)
                    commzSerialNumber = commz.SerialNumber;
            }
        }
    }
    catch { }
    return commzSerialNumber;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:59:16.580

原来接收 DTO 应该允许一个空值，但不是。

该物业，

`Commz.Site_id`被宣布：

```
public int Site_id { get; set; } 
```

并且应该被声明为：

```
public int? Site_id { get; set; } 
```

# system-verilog - 移植 SystemVerilog 风格的时钟分频并驱动到 SystemC

> ID：14164045
> 
> 赞同：3
> 
> 时间：2013-01-04T19:57:56.067
> 
> 标签：system-verilog, systemc

我正在将 System Verilog 模型移植到 SystemC，但我不确定对这种锁相环时钟驱动方案进行建模的最佳方法。在我看来，在 SV 中驱动时钟是一个手动过程，其中 SystemC 为内核提供了一种方法来为你做这件事。但我不知道 SystemC 如何支持在我正在查看的 SV 模型中手动完成的那种时钟划分。

考虑这个简化的 System Verilog 模型。

```
module device(
    input REFCLKP, // Reference clock, Positive.
    input REFCLKN, // Reference Clock, Negative.
    ...
);
...
    reg  ck;
    reg  ck_x2;
    reg  ck_x3;
    wire refclk = REFCLKP & ~REFCLKN;
    int unsigned ck_ratio = 10; // divide the reference clock by 10
...
    always @(posedge refclk) begin
        tm_refclk_period = $time - tm_refclk;
        tm_refclk <= $time;
        if (tm_refclk_period) begin
            for (int i=0; i<ck_ratio; i++) begin
                ck <= #(i*tm_refclk_period/ck_ratio) refclk;
                ck <= #((i+0.5)*tm_refclk_period/ck_ratio) !refclk;
            end
            for (int i=0; i<ck_ratio/2; i++) begin
                ck_x2 <= #(i*tm_refclk_period/(ck_ratio/2)) refclk;
                ck_x2 <= #((i+0.5)*tm_refclk_period/(ck_ratio/2)) !refclk;
            end
            for (int i=0; i<ck_ratio/3; i++) begin
                ck_x3 <= #(i*tm_refclk_period/(ck_ratio/3)) refclk;
                ck_x3 <= #((i+0.5)*tm_refclk_period/(ck_ratio/3)) !refclk;
            end
        end
    end
...
endmodule 
```

然后，在测试台中：

```
initial begin
    ...
    // start the clock
    refclk <= #(1e6/rl_ck_mhz) 1'b1;
    forever begin
        @(posedge refclk) begin
            refclk <= #(0.5e6/rl_ck_mhz) 1'b0;
            refclk <= #(1e6/rl_ck_mhz) 1'b1;
        end
    end
end

device dut(
    .REFCLKP(refclk),
    .REFCLKN(!refclk),
    ...); 
```

所以我的 SystemC 相当于测试台基本上看起来像

```
int sc_main(int argc, char* argv[])
{
    sc_clock refclk;
    ...
    device dut;
    dut.refclk(refclk);
    ...
} 
```

但是现在我有点坚持如何正确地模拟从参考时钟驱动的内部时钟。我想我可以尝试像 SV 代码这样的手动方法，但这似乎不像 SystemC 方式。我的另一个想法是尝试直接从 驱动所有时钟`sc_main`，而不是示例中的 PLL 样式，但我没有经验可以确定它是否会工作。在 SystemC 中做这样的事情有什么约定吗？

# html - 删除 iPad 的 HTML5 视频“控件”

> ID：14164046
> 
> 赞同：2
> 
> 时间：2013-01-04T19:58:01.090
> 
> 标签：html, ipad, video

我发现在 HTML5 视频属性中不包含“控件”时。

iPad 不会播放视频。

如何删除 HTML5 视频控件；同时仍然允许视频正常运行；在 iPad iOS 上。

注意：//我可以用脚本以某种方式删除“控件”吗？同时在 HTML5 视频标记中保持完整；这可能是一个可行的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:36:40.633

用户需要控件才能与视频进行交互，否则他们如何播放、暂停等？

您可以使用 JavaScript 删除控件，但效果相同，即用户无法控制视频。

因此，您需要保留控件，或者隐藏它们并使用媒体 API 构建您自己的集合（请参阅[使用 HTML5 多媒体组件 - 第 3 部分：自定义控件](http://www.adobe.com/devnet/html5/articles/html5-multimedia-pt3.html)）。例如，您可以通过这种方式限制控件。

如果您只想让用户在“点击”视频时播放视频，您可以尝试以下操作：

```
var video = document.getElementById('myVideoId');
video.addEventListener('click', function() { video.play(); }, false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-30T20:02:10.423

按照设计，您不能自动播放视频，但在播放开始后删除控件很简单，这可能就是您想要的：

```
<video id="video" src="video.mp4" poster="image.jpg" preload="auto" onplaying="this.controls=false"/></video> 
```

（不确定 iPad 是否会尊重该`preload="auto"`属性，但在任何情况下都包含它并没有什么坏处）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-29T13:25:34.173

在我的情况下，当事件来自视频本身时它不想工作，所以最后我不得不拉伸一个不可见的 div 完美地覆盖视频的表面

它也与必须发生的点击事件有某种关系，我围绕它创建了一个相当深的 JS 逻辑，它可以与其他所有设备完美配合，但在 IPAD 上，“第一次播放”只有在单击单独的项目时才有效（我们'在这里谈论内置控件关闭时的场景）很奇怪，但没有其他任何东西对我有用，希望这会有所帮助

# database - 从 SQL 查询中的同一行返回不同的列

> ID：14164050
> 
> 赞同：-1
> 
> 时间：2013-01-04T19:58:23.053
> 
> 标签：database, vb.net, ado.net

我正在做一个与远程 MySQL 数据库交互的项目。一切正常，我准备继续前进。我已经成功执行了几个查询，其中一个是如果数据库中存在特定记录，则返回（真或假）。那部分效果很好。现在我想要做的不是执行布尔搜索，而是返回布尔搜索返回 true 的同一行中另一个单元格的实际值（我希望这是有道理的）。换句话说，如果第 100 行的第 0 列中存在一个字符串，我想返回第 100 行中第 3 列的值。

这是当前代码：

```
 Private Function LicenseExists(argKey As String) As Boolean
    Dim strQuery As String
    Dim connection As MySqlConnection
    connection = New MySqlConnection()
    connection.ConnectionString = "Server=domain.com; Uid=username; Pwd=password; Database=db_name;"
    strQuery = "SELECT column_name FROM table_name WHERE column_name=?somevalue"
    Using SQLcmd = New MySqlCommand(strQuery, connection)
        SQLcmd.Parameters.AddWithValue("?somevalue", argKey)
        connection.Open()
        Using reader = SQLcmd.ExecuteReader()
            Return reader.Read()
        End Using
    End Using
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:03:02.133

简单地...

```
strQuery = "SELECT column_name, other_column_name FROM table_name WHERE column_name=?somevalue" 
```

`other_column_name`您感兴趣的另一列在哪里。

然后获得价值...

```
While reader.Read
    cboMessage.Items.Add(New clsMessage(reader.GetValue(reader.GetOrdinal("other_column_name"))))
End While 
```

# flash - How can I split questions taken from xml into certain number of groups

> ID：14164051
> 
> 赞同：1
> 
> 时间：2013-01-04T19:58:23.433
> 
> 标签：flash, actionscript

I am writing a quiz application. All questions and answer options are taken from xml ans shown on the screen with this code of action script

```
 for (i=0; i < numberOfQuestions; i++) {

                    var questionTextField = new TextField();
                    addChild(questionTextField);
                    questionTextField.text=i + "  " +  myXML.QNODE[i].QUESTION.text();
                    questionTextField.name="q"+i;

                    questionTextField.width=400;
                    questionTextField.x= 0;
                    questionTextField.y=i * 100;

                    generateAnswers(i);

                } 
```

But, I would like to show first 5 questions and then next 5 and so on. How can we do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T01:19:38.613

You could parse the XML up-front so that you have all the questions in an `Array`. You could then abstract the loop which creates the questions into a `function` which takes parameters for the question index (which you would increment as each set of questions is completed) and the pagination limit (the number of questions to display each time). You'll also need a routine to clear up the question fields each time (you might consider storing the fields on an Array for management). Something like the following:

```
var questions:Array = parseXML();
showQuestions(0, 5);

    function parseXML():Array
    {
        var arr:Array = [];

        for (i=0; i < numberOfQuestions; i++) {
            arr.push(myXML.QNODE[i].QUESTION.text());
        }

        return arr;
    }

    function showQuestions(index:int, limit:int):void
    {
        for (var i:int = index; i <= (index + limit); i ++) 
        {
            var questionTextField = new TextField();
            addChild(questionTextField);
            questionTextField.text=i + "  " +  questions[i];
            questionTextField.name="q"+i;

            questionTextField.width=400;
            questionTextField.x= 0;
            questionTextField.y=i * 100;

            generateAnswers(i);     
        }
    }

    function clearQuestions():void 
    {
        // Routine to clear old questions
    } 
```

# sql - Crystal Reports 中的 whileprintingrecords 如何转换为 SQL

> ID：14164052
> 
> 赞同：1
> 
> 时间：2013-01-04T19:58:29.857
> 
> 标签：sql, crystal-reports

我正在水晶报表中寻找 Group1total 的值。我的背景更集中在 SQL 上，我试图确定以下背后的逻辑：

```
//{@Group1total}
whileprintingrecords;
numbervar group1cost

//{@Group1cost}
whileprintingrecords;
numbervar group1cost := group1cost + {@group2total}

//{@Group2total}
whileprintingrecords;
numbervar group2cost

//{@Group2cost}
whileprintingrecords;
numbervar group2cost := group2cost + {@group3total}

//{@Group3total}
whileprintingrecords;
numbervar group3cost

//{@Group3cost}
whileprintingrecords;
numbervar group3cost := group3cost + {@group4total}

//{@Group4total}
whileprintingrecords;
numbervar group4cost

//{@Group4cost}
whileprintingrecords;
numbervar group4cost := group4cost + {XVR_projectcostbudget.cost_budget} 
```

我注意到在 SQL 中简单地对 XVR_projectcostbudget.cost_budget 求和并不会产生与 Crystal Report 相同的结果。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T20:55:07.603

WhilePrintingRecords 不会被翻译成 SQL。它只影响给定公式的计算——本质上是将其分配给报告的“通过”之一。请参阅[Crystal Reports 9+ - 评估时间和多遍报告模型](http://www.sdn.sap.com/irj/boc/go/portal/prtroot/docs/library/uuid/204c3492-ab1e-2b10-b683-b5e8fe390d70?QuickLink=index&overridelayout=true&29665339124315)。

在你的情况下，我建议：

*   在所有四个组的页脚中插入公式或数据库字段的摘要；这将创建您可以在公式字段中使用的字段（您可以手动创建它们，但这更容易）
*   创建一个根据需要对组摘要进行统计的公式字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T01:09:22.323

像贾斯汀一样，我可以感受到他对水晶报表的挫败感，并将其放在这里也可以帮助其他人。

试图用通常的 sum(decode( sql 结构。在水晶中试图使用运行总字段和评估公式来模拟这个。评估列是一个代码(所有值是数字，但表列声明为字符串类型:)。如果字段类型为数字，则评估公式仅提供“求和”功能。因此创建了一个公式字段来将此列生成为数字。很好，求和函数现在可用于运行总计与 IFF ( , 1, 0)。但不会产生结果！（即空白）

切换到 Whileprintingrecords 结构并开始工作。下面的文章简要介绍了它的工作原理。 [http://crystalreportsblog.com/crystal-reports-running-totals/#comments](http://crystalreportsblog.com/crystal-reports-running-totals/#comments)

显然，将此计算放入主 sql 查询将是直截了当的，但带有 gui 表链接设置的旧报告。

# android - Eclipse 找不到 Android 设备 - 摩托罗拉 RAZR HD

> ID：14164053
> 
> 赞同：2
> 
> 时间：2013-01-04T19:58:34.417
> 
> 标签：android, macos, adb, motorola

堆栈处女，请温柔。

最近安装的带有 ADT 包和 adb 的 Eclipse 找不到我的 USB 设备（摩托罗拉 RAZR HD）。到目前为止，我已经完成了以下操作：

1.  adb kill-server -> adb start-server -> adb 设备
2.  取消选中/选中设备上的 USB 调试
3.  重启设备（拔出/插入）
4.  重启 Eclipse
5.  从 IDE -> DDMS -> 重新启动 adb

这里的大多数帖子都涉及上述内容。其他与 Windows/Linux 相关。

我正在运行 OS X 10.7.5 和 Android 开发者工具版本：v21.0.1-543035。在这里找到的文档：

[http://developer.android.com/tools/device.html](http://developer.android.com/tools/device.html)

... 方便地说“如果你在 Mac OS X 上开发，它就可以工作。跳过这一步。” 指设置硬件设备时。我通常同意这种说法，但在这种情况下，它没有帮助。

我也在通过设备运行 EasyTether Pro，并怀疑此应用程序的驱动程序是罪魁祸首，但可能是大错特错。我在这里通常是完全错误的ergo问题。

Anywho - 如果有人看到这个特定设备的问题或有任何魔法可以帮助，那将是 rad。

我宁愿不重新安装 Eclipse/ADT，但如果这样可以完成工作，那就这样吧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:17:24.300

首先从命令行开始，一旦一切正常，就涉及到 Eclipse 和其他东西。

您必须将设备**USB 供应商 ID**添加到`~/.android/adb_usb.ini`：

```
$ echo '0x1234' >> ~/.android/adb_usb.ini 
```

替换`0x1234`为真实身份。如果您不知道**USB 供应商 ID**，您可以使用***系统信息***来获取它。添加后，继续执行您正在执行的步骤（终止、重新启动等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-22T11:32:17.083

运行命令序列可能会有所帮助

```
 adb kill-server
    adb start-server
    adb devices sequence 
```

使用“sudo”命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T01:36:25.250

EasyTetherPro 是罪魁祸首。我现在在网上找到了几篇关于此的文章。

[http://qtcstation.com/2011/04/warning-easytether-will-break-adb/](http://qtcstation.com/2011/04/warning-easytether-will-break-adb/) http://intohand.com/archive?tag=android

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-23T03:01:30.540

这可能是有史以来最愚蠢的答案，但是.. 因为我的笔记本电脑背面有一个 USB 端口，除了它还有网络端口，我将电话连接到网络端口而不是 USB。请仔细检查一下，因为这个，我几乎要安装 Windows。呃！

# events - 如何通过powershell向Visual Studio 2012内的命令栏添加弹出菜单

> ID：14164055
> 
> 赞同：0
> 
> 时间：2013-01-04T19:58:40.043
> 
> 标签：events, powershell, menu, visual-studio-2012, customization

现在我发誓我已经完成了这项工作，但是在关闭我长期运行的 Visual Studio 会话并重新打开时，我无法让它工作，我不知道与我之前的会话有什么不同。

我正在尝试完成添加自定义菜单和按钮单击事件以触发命令。我试图让它启动更多的 powershell，但是我已将其更改为我知道 dte 可以轻松执行的命令，即示例命令。

任何人都看到任何错误或我忽略的东西（我确实让它工作，它现在不在新的 VS 会话中。没有引发错误，但点击事件没有触发，或者在我看来。

这个powershell在VS 2012里面执行

```
$menubar = $dte.CommandBars["MenuBar"]
$cmenu = $menubar.Controls.Add([Microsoft.VisualStudio.CommandBars.MsoControlType]::msoControlPopup, 1, "", 36, $true)
$cmenu.Caption = "CUSTOM"
$cmenu.Enabled = $true
$item = $cmenu.Controls.Add([Microsoft.VisualStudio.CommandBars.MsoControlType]::msoControlButton, 1, "", 1, $true)
$item.Caption = "Item"
$itemHandler = $dte.Events.CommandBarEvents($item)
$itemEvents = Get-Interface $itemHandler ([EnvDTE._dispCommandBarControlEvents_Event])
$itemClickEvent = [EnvDTE._dispCommandBarControlEvents_ClickEventHandler]{ $dte.ExecuteCommand("Help.Samples") }
$itemEvents.add_Click($itemClickEvent) 
```

# javascript - 根据共同值组合/合并数组中的对象

> ID：14164060
> 
> 赞同：3
> 
> 时间：2013-01-04T19:59:38.550
> 
> 标签：javascript, object, underscore.js, reduce

我有一个如下所示的数组。

```
[ { sku: 'TEA-BLCK', price: '10', quantity: '1' },
  { sku: 'TEA-ELGY', price: '10', quantity: '1' },
  { sku: 'TEA-CHAI', price: '10', quantity: '1' },
  { sku: 'TEA-GREN', price: '10', quantity: '1' },
  { sku: 'TEA-ELGY', price: '10', quantity: '1' },
  { sku: 'TEA-MINT', price: '10', quantity: '1' } ] 
```

我需要让它看起来像这样

```
[ { sku: 'TEA-BLCK', price: '10', quantity: '1' },
  { sku: 'TEA-ELGY', price: '10', quantity: '2' },
  { sku: 'TEA-CHAI', price: '10', quantity: '1' },
  { sku: 'TEA-GREN', price: '10', quantity: '1' },
  { sku: 'TEA-MINT', price: '10', quantity: '1' } ] 
```

到目前为止，我已经`reduce`使用`underscore.js`.

```
var reduce = function(){
    return _.reduce(line_items, function(quant, item) {
        quant[item.sku] = (typeof(quant[item.sku]) !== "undefined") ? quant[item.sku] : 0 ;
        quant[item.sku] = parseFloat(item.quantity) + quant[item.sku];
        return quant;
    }, {});
} 
```

其中吐出以下内容。

```
{ 'TEA-BLCK': 1,
  'TEA-ELGY': 1,
  'TEA-CHAI': 2,
  'TEA-GREN': 1,
  'TEA-MINT': 1 } 
```

这是减少的好工作吗？我怎样才能以我想要的方式得到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T20:21:22.267

尝试这样的事情：

```
var line_items = [
    { sku: 'TEA-BLCK', price: '10', quantity: 2 },
    { sku: 'TEA-ELGY', price: '10', quantity: 3 },
    { sku: 'TEA-CHAI', price: '10', quantity: 1 },
    { sku: 'TEA-GREN', price: '10', quantity: 1 },
    { sku: 'TEA-ELGY', price: '10', quantity: 1 },
    { sku: 'TEA-MINT', price: '10', quantity: 1 }
];

// Group items by sku.
var line_items_by_sku = _(line_items).groupBy(function (item) { return item.sku; });

// Get the new line_items array based on the grouped data.
line_items = _(line_items_by_sku).map(function (items) {
    var item = items[0];
    item.quantity = _.reduce(items, function(memo, item){ return memo + item.quantity; }, 0);
    return item;
}); 
```

看到[这个 jsfiddle](http://jsfiddle.net/xjUDY/5/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T20:21:26.207

像这样的简单解决方案怎么样：

```
function reduce(array) {
    var out = [];
    var indexBySku = {};
    for (var i = array.length; i--;) {
        if (!indexBySku[array[i].sku]) {
            indexBySku[array[i].sku] = out.length;
            out.push(array[i]);
        } else {
            out[indexBySku[array[i].sku]].quantity -= -array[i].quantity;
        }
    }
    return out;
} 
```

[http://jsfiddle.net/waV6H/1](http://jsfiddle.net/waV6H/1)

可能这里唯一需要解释的是我们减去负数而不是加法的那一行。这只是为了避免字符串连接，因为“数量”中的值是字符串。

* * *

超级精简版，去掉不需要的大括号和分号……只是为了好玩。将订单和数量保留为字符串，使用数量！= 1。

```
function reduce(array) {
    var out = [], indexBySku = {}, len = array.length, i, j
    for (i = 0; i < len; i++)
        (j = indexBySku[array[i].sku]) ?  
            out[j].quantity = out[j].quantity - -array[i].quantity + '' :
            indexBySku[array[i].sku] = out.push(array[i]) - 1
    return out
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T20:39:30.383

*我参加聚会有点晚了，但听起来很有趣，所以..*

```
JSON.stringify(
[ { sku: 'TEA-BLCK', price: '10', quantity: '1' },
  { sku: 'TEA-ELGY', price: '10', quantity: '1' },
  { sku: 'TEA-CHAI', price: '10', quantity: '1' },
  { sku: 'TEA-GREN', price: '10', quantity: '1' },
  { sku: 'TEA-ELGY', price: '10', quantity: '1' },
  { sku: 'TEA-MINT', price: '10', quantity: '1' } ].sort( function (a, b) {
   return a.sku < b.sku;
} ).reduce( function (a,v) {
   if ( !a[0] || a[0].sku !== v.sku  ) {
      a.unshift(v);
   } else {
      // notice the very inefficient str -> number -> str conversion
      a[0].quantity = 1*a[0].quantity + 1*v.quantity + '';
   }

   return a;
 }, []) ); 
```

这里我们对数组进行预排序，然后将元素添加到累加器的开头。GGG 已经谈到了字符串。

[http://jsfiddle.net/EqGUe/](http://jsfiddle.net/EqGUe/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T21:24:52.267

也有点晚了，但锻炼起来很有趣 [http://jsbin.com/amazat/2/](http://jsbin.com/amazat/2/)

```
line_items_reduced = _.map(reduce(), function(value, key) {
  var line_item = _.find(line_items, function(line_i){
    return (key === line_i.sku);
  });
  line_item.quantity = value;
  return line_item;
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-04T22:01:31.193

这会更新 benekastah 的答案并处理超过 1 的数量...但我确实冒昧地将数量更改为整数

[http://jsfiddle.net/xjUDY/3/](http://jsfiddle.net/xjUDY/3/)

```
var line_items = [
    { sku: 'TEA-BLCK', price: '10', quantity: 2 },
    { sku: 'TEA-ELGY', price: '10', quantity: 3 },
    { sku: 'TEA-CHAI', price: '10', quantity: 1 },
    { sku: 'TEA-GREN', price: '10', quantity: 1 },
    { sku: 'TEA-ELGY', price: '10', quantity: 1 },
    { sku: 'TEA-MINT', price: '10', quantity: 1 }
];

// Group items by sku.
var line_items_by_sku = _(line_items).groupBy(function (item) { return item.sku; });

// Get the new line_items array based on the grouped data.
line_items = _(line_items_by_sku).map(function (items) {
    var item = items[0];
    item.quantity = _.reduce(items, function(memo, item){ return memo + item.quantity; }, 0);
    return item;
});

document.write("<pre>"+JSON.stringify(line_items, null, " ")+"</pre>");
​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-04T22:19:37.853

从技术上讲，这是完整的答案。从字符串到字符串。对不起大家。

```
var line_items = [
    { sku: 'TEA-BLCK', price: '10', quantity: "2" },
    { sku: 'TEA-ELGY', price: '10', quantity: "3" },
    { sku: 'TEA-CHAI', price: '10', quantity: "1" },
    { sku: 'TEA-GREN', price: '10', quantity: "1" },
    { sku: 'TEA-ELGY', price: '10', quantity: "1" },
    { sku: 'TEA-MINT', price: '10', quantity: "1" }
];

// Group items by sku.
var line_items_by_sku = _(line_items).groupBy(function (item) { return item.sku; });

// Get the new line_items array based on the grouped data.
line_items = _(line_items_by_sku).map(function (items) {
    var item = items[0];
    item.quantity = _.reduce(items, function(memo, item){ return memo + parseFloat(item.quantity); }, 0);
    item.quantity = item.quantity.toString();
    return item;
});

document.write("<pre>"+JSON.stringify(line_items, null, " ")+"</pre>"); 
```

# php - 在不使用“foreach”的情况下遍历对象的子对象

> ID：14164061
> 
> 赞同：-1
> 
> 时间：2013-01-04T19:59:45.550
> 
> 标签：php, oop, web, iterator

> **可能重复：**
> [遍历包含在父 stdClass Obj 中的 stdClass obj。（又名：遍历子对象）](https://stackoverflow.com/questions/14161209/iterating-through-stdclass-objs-that-are-contained-within-a-parent-stdclass-obj)

...因为如果父对象为空，则会`foreach`显示错误。`for()`将是我首选的循环逻辑，但我不知道如何访问子对象属性。

工作代码：

```
foreach ($main_object as $object) {
    $object->value = $object->value * 3.14;
} 
```

**但是**当`$main_object`为空或空时，会`foreach`转储出错误。

我正在寻找更像这样的东西：

（伪）代码：

```
for ($p = 0; $p < counter($main_object); $p++) {
    //$p being the index'd id of the child object. That is where I'm having issues, how do I refer to child X within a parent object.
    $main_object->$p->value = $main_object->$p->value * 3.14;
} 
```

现在，如果'$main_object' 为空/null，则不会引发错误，逻辑会继续运行。

`$x->properties`当对象是父对象内的一组子对象之一时，如何访问子对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:08:33.173

在迭代之前首先检查对象是否包含至少一个项目：

```
if($a && count($a)){
    // iterate using foreach
} 
```

我也觉得这很烦人，但`foreach`使用起来非常容易，所以需要权衡取舍。我仍然宁愿做上面的事情而不是使用类似的东西`for`（这也可以工作）。

[PHP 计数文档](http://php.net/manual/en/function.count.php)

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:07:10.057

您可以使用`get_class_vars`which 在数组中返回类的所有属性。然后用for循环遍历。您可以使用数组键和对象访问它们：

```
$aryAttr = get_class_vars($main_object);
for ($p = 0; $p < count($aryAttr); $p++) {
    $key=key($aryAttr);
    $main_object->$key>value = $main_object->$key->value *3.14;
    next($aryAttr);
} 
```

这可能会有所帮助，但没有测试它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T20:10:21.913

为什么不在执行 foreach 循环之前检查 main_object 是否为空

```
if($main_object->child != null)
{
  foreach ($main_object->child as $object)
 {
    $object->value = $object->value * 3.14;
 }
} 
```

# winapi - 打印后台处理程序作业取消消息或需要回调

> ID：14164064
> 
> 赞同：1
> 
> 时间：2013-01-04T20:00:13.107
> 
> 标签：winapi, printing, print-spooler-api

**背景：**
我现在正在尝试通过[GDI Print API](http://msdn.microsoft.com/en-us/library/windows/desktop/ff686799%28v=vs.85%29.aspx)进行打印，它看起来像这样：

```
StartDoc(hDC,&docinfo)
foreach page in page_buf
    StartPage(hDC)
    /* write the page to printer DC */
    EndPage(hDC)
EndDoc(hDC) 
```

**问题：**
在打印过程中会有一个通知区域图标，单击它会出现一个小窗口，显示指定打印机上的当前打印作业。
通过右键单击打印作业并选择`Cancel`，将取消打印作业。但是我的应用程序会继续向打印机 DC 发送数据，直到处理完所有页面，并且状态`Deleting - Spooling`在完成之前一直显示。
我想要的是在选择取消后立即停止打印过程。

**我试过的：**
1.首先我认为取消作业后设备内容会变得无效（这当然不是真的），并尝试检查 and 的返回[`StartPage`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145116%28v=vs.85%29.aspx)值[`EndPage`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162596%28v=vs.85%29.aspx)。然后我发现他们在取消打印作业后都没有失败。
2\. 我也试过[`SetAbortProc`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162960%28v=vs.85%29.aspx)and [`DocumentEvent`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183575%28v=vs.85%29.aspx)，发现它们不是我想要的。

* * *

但是我想当打印作业被取消时应该有一些机制来指示我的应用程序。如果有人试图提供帮助，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:05:36.033

做你想做的事情的唯一方法是使用[GetJob 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144894%28v=vs.85%29.aspx)查询打印作业并终止你的循环。您想要的逻辑如下所示：

```
JOB_INFO_1 ji;
GetJob(...);
if (ji.Status & (JOB_STATUS_DELETED | JOB_STATUS_DELETING))
   break; 
```

# java - 在一个应用程序中捆绑其他应用程序（我自己构建）？

> ID：14164068
> 
> 赞同：1
> 
> 时间：2013-01-04T20:00:33.313
> 
> 标签：java, android

我为视力不好的人构建了一个启动器，我还有 3 个专门为通用访问而设计的应用程序：一个计算器、一个天气应用程序和一个音乐播放器。

要将它们包含在我的启动器中，我可以简单地将它们的代码复制到我的启动器包中并使用意图打开它们（它们基本上是同一个应用程序的不同活动）但问题是我的启动器已经构建为启动常规应用程序（就像每个启动器一样）并且我不想弄乱添加具有不同行为的图标的代码。

有几次我在 android 中下载了一个应用程序，最后得到了更多我想要的应用程序，这些应用程序大部分时间都包含某种垃圾邮件。因此，虽然这是一个令人讨厌的功能使用，但它表明这是可能的。但是我已经有一段时间没有遇到这种情况了，所以我想知道它是否仍然可能。

如何将我的应用程序捆绑在同一个应用程序下载中？还有可能吗？这个案例场景目前是如何处理的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:32:34.533

所以基本上你需要在你的清单中有多个启动器类别，用于你需要在启动器上看到的活动。

例如

```
 <activity android:name=".activities.A" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".activities.B" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

# php - àèìòù in Android->PHP->Oracle

> ID：14164069
> 
> 赞同：0
> 
> 时间：2013-01-04T20:00:48.240
> 
> 标签：php, android, oracle, character-encoding

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T11:41:59.693

You should specify the encoding in the android code:

```
httpPost.setEntity(new UrlEncodedFormEntity(params, "UTF-8")); 
```

Otherwise it will be [ISO-8859-1](http://developer.android.com/reference/org/apache/http/protocol/HTTP.html#DEFAULT_CONTENT_CHARSET).

On the PHP side, **do not** do any conversion such as `utf8_decode/encode`, these will always just make it worse.

Also fix your http header:

```
<?php
header('Content-Type: application/json; charset=utf-8');
print_r($_POST); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:20:47.637

Why don't you try to transform it into html sign? Like `$#numbers;`. If not than state encoding like `utf-8 general_ci` or `ANSI`. it helped me once.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T19:30:13.457

Just for your curiosity... i finally fix the problem. I miss to add th charset the db have to use so i put:
`$conn = oci_new_connect($userDb, $pswDB, $urlDb, 'AL32UTF8');`
instead
`$conn = oci_new_connect($userDb, $pswDB, $urlDb);`

So Android have:
`httpPost.setEntity(new UrlEncodedFormEntity(params, "utf-8"));`
In Php i have:
`header('Content-Type: application/json; charset=utf-8');` (don't know if this is important)

This is all..ty all for help

# java - Intro to Java Programming book page 276\. 选择排序数组示例

> ID：14164077
> 
> 赞同：-1
> 
> 时间：2013-01-04T20:01:53.723
> 
> 标签：java

我是 Java 初学者，目前正在阅读一本名为 Introduction to Java Programming 的书。在第 276 页上，有一个对数组进行选择排序的示例。我坐在这里试图解决几个小时，但我就是不明白。我知道这段代码是按升序对数组进行排序，但如果有人能更详细地解释代码的不同部分是什么，我将不胜感激做的正是。

```
 double[] list = { 1, 9, 4.5, 6.6, 5.7, -4.5 };
    SelectionSort.selectionSort(list);

    public class SelectionSort {

        public static void selectionSort(double[] list) {
            for (int i = 0; i < list.length - 1; i++) {

                double currentMin = list[i];
                int currentMinIndex = i;

                for (int j = i + 1; j < list.length; j++) {
                    if (currentMin > list[j]) {
                        currentMin = list[j];
                        currentMinIndex = j;

                    }
                }

                if (currentMinIndex != i) {
                    list[currentMinIndex] = list[i];
                    list[i] = currentMin;

                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T20:04:55.040

[选择排序](http://en.wikipedia.org/wiki/Selection_sort)的Wikipedia 条目可能就是您要查找的内容。该代码有解释该过程的注释。本质上，选择排序遍历数组并跟踪最小值。如果找到的新值小于之前找到的最小值，则交换这两个值。

```
/* a[0] to a[n-1] is the array to sort */
int i,j;
int iMin;

/* advance the position through the entire array */
/*   (could do j < n-1 because single element is also min element) */
for (j = 0; j < n-1; j++) {
    /* find the min element in the unsorted a[j .. n-1] */

    /* assume the min is the first element */
    iMin = j;
    /* test against elements after j to find the smallest */
    for ( i = j+1; i < n; i++) {
        /* if this element is less, then it is the new minimum */  
        if (a[i] < a[iMin]) {
            /* found new minimum; remember its index */
            iMin = i;
        }
    }

    /* iMin is the index of the minimum element. Swap it with the current position */
    if ( iMin != j ) {
        swap(a[j], a[iMin]);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T20:05:07.923

这是选择排序算法。它找到最小数字并将其放在顶部，如果找到较小的数字，则将其放在顶部，它会一直这样做，直到整个列表从最小到最大排序。阅读更多：[http ://en.wikipedia.org/wiki/Selection_sort](http://en.wikipedia.org/wiki/Selection_sort)

# ios - CocoaTouch 是否保证触摸事件的顺序？

> ID：14164081
> 
> 赞同：0
> 
> 时间：2013-01-04T20:02:11.820
> 
> 标签：ios, cocoa-touch, uikit

我怀疑某些触摸事件有时会无序触发。例如我期望：

```
touchBegan, touchMoved, touchMoved, ...touchMoved, touchEnded 
```

但是我想我得到了：

```
touchBegan, touchMoved, touchMoved, ...touchMoved, touchEnded, touchMoved 
```

**CocoaTouch 是否保证触发触摸事件的顺序？**

编辑 - 我看到的行为是：在 touchEnded 中发生的事情似乎偶尔会被 touchMoved 中发生的事情“取消”。我知道 touchEnded 正在触发，因为某些其他事情正在发生。

说 touchMoved 为方形红色着色。并且 touchEnded 将相同的方形蓝色着色并更新标签中的文本。大多数时候，我在滑动时只看到一个红色方块，然后在我停止滑动时看到一个蓝色方块+标签更新。但是，当我完成滑动时，偶尔会看到红色方块 + 标签更新。

# flexicious - 灵活的 MultiSelectComboBox 弹出文本颜色

> ID：14164082
> 
> 赞同：0
> 
> 时间：2013-01-04T20:02:14.540
> 
> 标签：flexicious

我有一个`MultiSelectComboBox`过滤`ExtendedAdvancedDataGrid`列，当我点击它时，弹出框中的文本（复选框列表）在白色背景上是浅灰色的。我尝试使用 更改样式`popUpStyleName`，但没有任何变化。

知道什么可以覆盖这种风格吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:02:25.260

MSCB 在内部封装了一个 Checkboxlist。尝试类似（Flex 3）：

复选框列表 {

```
 backgroundAlpha: 0.9;
             backgroundColor: #EFEFEF;
             color: #444444;

} 
```

或者

控件|复选框列表 {

```
 backgroundAlpha: 0.9;
        backgroundColor: #EFEFEF;
        color: #444444; 
```

}

# android - Android 应用内结算版本 2“用户不符合此购买条件”

> ID：14164086
> 
> 赞同：-1
> 
> 时间：2013-01-04T20:03:01.063
> 
> 标签：android, in-app-billing

我知道这个问题是早先提出的，但没有正确的答案。几个月前，我集成了 v2 应用内计费，并发布了带有工作 IAB 的应用程序，但现在我正尝试在我的新应用程序中复制完全相同的功能，并使用与我的库项目中完全相同的计费代码。

我已完成测试计费的所有要求

1.  将应用上传为草稿

2.  创建价格点并将其设置为已发布

3.  在设置中添加了一个测试帐户

4.  使用新的公钥，因为它现在是基于每个应用程序而不是基于每个帐户。

5.  现在等了超过24小时

但我仍然收到此错误消息“用户不符合此购买条件”

这是我在日志中得到的

```
CheckoutPurchase.setError: type=PURCHASE_FAILED, code=-1, permissionCode=16, message=User is not eligible for this purchase. 
```

有谁知道 code=-1 和 permissionCode=16 是什么意思？

“用户不符合条件......”消息非常笼统，并没有为开发人员解决问题提供太多帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:26:35.587

解决了。开发者控制台的“新设计”存在一些问题。我删除了 apk 并从“旧设计”创建了一个新应用程序，它工作正常。价格点（应用内产品）再次自动添加，因为应用程序包名称与我删除的旧名称完全相同。

还要确保使用现在特定于应用程序的新公钥。

# multi-select - jqueryui 可通过嵌套列表选择 - 选择/取消选择父级应该选择/取消选择它的所有子级

> ID：14164090
> 
> 赞同：4
> 
> 时间：2013-01-04T20:03:25.563
> 
> 标签：multi-select, jquery-ui-selectable

我正在尝试使用嵌套的 UL 和可选的 jqueryUI 构建一个两级多选控件。

目前，我将选择限制在子级别，但我真正想要的是能够选择父 LI 并选择它的所有子 LI。更进一步，我希望能够选择所有子 LI 并选择其父级。少于所有选定子 LI 的任何内容都将导致未选定父级。

基本标记：

```
<ul id="theParentList">
    <li>Parent 1
        <ul>
            <li>Child 1.1</li>
            <li>Child 1.2</li>
        </ul>
    </li>
    <li>Parent 2
        <ul>
            <li>Child 2.1</li>
            <li>Child 2.2</li>
        </ul>
    </li>
</ul> 
```

和当前的javascript：

```
$('#theParentList').selectable({filter: 'li li'}); 
```

我将如何完成第一部分：选择父母会选择所有孩子？

谢谢！

**更新：**
我现在已经掌握了这个概念的大部分内容：
选择父母会选择所有孩子；
取消选择孩子将取消选择它的父母

**什么仍然不起作用：选择所有父母的孩子应该选择父母**

在这一点上，这就是我所拥有的：

标记：

```
<ul id="theParentList">
    <li class="level-1">
        <div>Parent 1</div>
        <ul class="level-2">
            <li><div>Child 1.1</div></li>
            <li><div>Child 1.2</div></li>
        </ul>
    </li>
    <li class="level-1"><div>Parent 2</div>
        <ul class="level-2">
            <li><div>Child 2.1</div></li>
            <li><div>Child 2.2</div></li>
        </ul>
    </li>
</ul> 
```

和js：

```
 function SelectSelectableElement (selectableContainer, elementsToSelect){
        $(elementsToSelect).not(".ui-selected").addClass("ui-selecting");
    }

    function handleSelected (){};

    function handleSelection (El){
        if( $(El).parent().hasClass('level-1')){
            var ch = $(El).parent().find('.level-2 .ui-selectee');
            SelectSelectableElement('#theParentList', ch);
        }else{
            //this is a level-2 item 
            //if El and all of it's level-2 siblings are selected, then also select their level-1 parent
        }
    };

    function handleUnselected (El){
        if( $(El).parent().hasClass('level-1') ){
            //unselect all of it's children
            $(El).parent().children().each( function(){
                $(this).find('.ui-selectee').removeClass('ui-selected').addClass('ui-unselected');
            });
        }else{
            //this is a level-2 item, so we need to deselect its level-1 parent
            $(El).parents('li.level-1').find(">:first-child").removeClass('ui-selected');
        }
    };

    $('#theParentList').selectable({
        filter: 'li div',
        selecting: function(event, ui){
            handleSelection(ui.selecting);
        },
        selected: function(event, ui) {
            handleSelected(ui.selected);
        },
        unselected: function(event, ui) {
            handleUnselected(ui.unselected);
        }           
    }); 
```

这是一个小提琴：http: [//jsfiddle.net/JUvTD/](http://jsfiddle.net/JUvTD/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:57:44.500

发布我自己问题的答案，以防其他人需要相同的帮助

选择父级将选择其所有子级 选择所有子级将选择其父级 取消选择父级将取消选择其所有子级 取消选择子级也会取消选择其父级

这是一个工作小提琴：http: [//jsfiddle.net/QvqCE/1/](http://jsfiddle.net/QvqCE/1/)

和 javascript

```
 $('#theParentList').selectable({
        filter: 'li div',
        selecting: function (event, ui) {
            if ($(ui.selecting).parent().hasClass('level-1')) {
                //this is a level-1 item, so select all of it's children
                var ch = $(ui.selecting).parent().find('.level-2 .ui-selectee');
                $(ch).not(".ui-selected").addClass("ui-selecting");
            } else {
                //this is a level-2 item, so check to see if all of it's siblings are also selected
                var sibs = $(ui.selecting).parent().siblings().find('.ui-selectee');
                var notSelected = 0;
                for (var i = 0; i < sibs.length; i++) {
                    if ($(sibs[i]).hasClass('ui-selected') || $(sibs[i]).hasClass('ui-selecting')) {
                        notSelected = notSelected
                    } else {
                        notSelected = notSelected + 1;
                    }
                }
                if (notSelected === 0) { //all siblings are selected, so select their level-1 parent as well
                    $(ui.selecting).parent().parent().parent().find('>:first-child').not(".ui-selected").addClass("ui-selecting");
                }
                //otherwise, just select as usual
            }
        },
        unselected: function (event, ui) {
            if ($(ui.unselected).parent().hasClass('level-1')) {
                //unselect all of it's children
                $(ui.unselected).parent().children().each(function () {
                    $(this).find('.ui-selectee').removeClass('ui-selected').addClass('ui-unselected');
                });
            } else {
                //this is a level-2 item, so we need to deselect its level-1 parent
                $(ui.unselected).parents('li.level-1').find(">:first-child").removeClass('ui-selected');
            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T18:20:16.513

除了 rolfsf 的回答，如果您想要将父母和孩子绑定在一起的稍微不同的行为：

1.  如果所有子代仍被选中，则父代仍被选中。和

2.  如果取消选择子项，请同时取消选择父项，

您可以将此回调函数添加到可选小部件的初始化中：

```
unselecting: function (event, ui) {
            if ($(ui.unselecting).parent().hasClass('level-1')) {
                //if all children still selected, don't deselect this
                var sibs = $(ui.unselecting).next().find('.ui-selectee');
                if (sibs.length > 0) {
                    var notSelected = 0;
                    for (var i = 0; i < sibs.length; i++) {
                        if ($(sibs[i]).hasClass('ui-selected') || $(sibs[i]).hasClass('ui-selecting')) {
                            notSelected = notSelected;
                        } else {
                            notSelected = notSelected + 1;
                        }
                    }
                    if (notSelected === 0) { //all children still selected, so keep their level-1 parent selected as well
                        $(ui.unselecting).addClass("ui-selecting");
                    }
                }

            } else {
                //if unselecting a child, unselect parent as well
                $(ui.unselecting).parent().parent().prev().removeClass('ui-selected').removeClass("ui-selecting");
            }

        } 
```

在此处查看 jsfiddle：http: [//jsfiddle.net/gav9q/](http://jsfiddle.net/gav9q/)

# sql - 如何在 PostgreSQL 9.1 DB 中删除多个触发器

> ID：14164093
> 
> 赞同：9
> 
> 时间：2013-01-04T20:03:38.207
> 
> 标签：sql, postgresql, postgresql-9.1

我正在尝试删除多个触发器，但收到 SQL 错误：

```
PG::Error: ERROR:  syntax error at or near ";"
LINE 1:     DROP TRIGGER rr_admin_reports; 
```

这是我在rails中执行的sql：

```
sql = <<-SQL
  DROP TRIGGER rr_admin_reports;
  DROP TRIGGER rr_apps;
  DROP TRIGGER rr_attachments;
SQL 
```

有没有办法轻松删除一长串触发器？谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-04T20:08:07.497

```
DROP TRIGGER rr_admin_reports ON yourTable; 
```

引用 PostgreSQL 文档：

> *PostgreSQL 中的 DROP TRIGGER 语句与 SQL 标准不兼容。在 SQL 标准中，触发器名称不是表的本地名称，因此该命令只是 DROP TRIGGER name。*

[http://www.postgresql.org/docs/7.4/static/sql-droptrigger.html](http://www.postgresql.org/docs/7.4/static/sql-droptrigger.html)

# c++ - 如何初始化正则表达式向量？

> ID：14164096
> 
> 赞同：3
> 
> 时间：2013-01-04T20:03:49.870
> 
> 标签：c++, regex, vector, c++11, mingw

我所做的 ：

```
#include <vector>
#include <regex>
using namespace std;
int main() {
  vector<regex> regexes = { "[a-z]+", "[0-5]+" };
} 
```

它给了我一堆错误：

```
In file included from c:\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/vector:63:0,
                 from c:\cpp\test.cpp:1:
c:\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/bits/stl_construct.h: In instantiation of 'void std::_Construct(_T1*, _Args&& ...) [with _T1 = std::basic_regex<char>; _Args = {const char&}]':
c:\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/bits/stl_uninitialized.h:77:3:   required from 'static _ForwardIterator std::__uninitialized_copy<_TrivialValueTypes>::__uninit_copy(_InputIterator, _InputIterator, _ForwardIterator) [with _InputIterator = const char*; _ForwardIterator = std::basic_regex<char>*; bool _TrivialValueTypes = false]'
c:\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/bits/stl_uninitialized.h:119:41:   required from '_ForwardIterator std::uninitialized_copy(_InputIterator, _InputIterator, _ForwardIterator) [with _InputIterator = const char*; _ForwardIterator = std::basic_regex<char>*]'
c:\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/bits/stl_uninitialized.h:260:63:   required from '_ForwardIterator std::__uninitialized_copy_a(_InputIterator, _InputIterator, _ForwardIterator, std::allocator<_Tp>&) [with _InputIterator = const char*; _ForwardIterator = std::basic_regex<char>*; _Tp = std::basic_regex<char>]'
c:\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/bits/stl_vector.h:1170:4:   required from 'void std::vector<_Tp, _Alloc>::_M_range_initialize(_ForwardIterator, _ForwardIterator, std::forward_iterator_tag) [with _ForwardIterator = const char*; _Tp = std::basic_regex<char>; _Alloc = std::allocator<std::basic_regex<char> >]'
c:\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/bits/stl_vector.h:1148:4:   required from 'void std::vector<_Tp, _Alloc>::_M_initialize_dispatch(_InputIterator, _InputIterator, std::__false_type) [with _InputIterator = const char*; _Tp = std::basic_regex<char>; _Alloc = std::allocator<std::basic_regex<char> >]'
c:\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/bits/stl_vector.h:393:4:   required from 'std::vector<_Tp, _Alloc>::vector(_InputIterator, _InputIterator, const allocator_type&) [with _InputIterator = const char*; _Tp = std::basic_regex<char>; _Alloc = std::allocator<std::basic_regex<char> >; std::vector<_Tp, _Alloc>::allocator_type = std::allocator<std::basic_regex<char> >]'
c:\cpp\test.cpp:5:48:   required from here
c:\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/bits/stl_construct.h:77:7: error: invalid conversion from 'char' to 'const char*' [-fpermissive]
In file included from c:\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/regex:62:0,
                 from c:\cpp\test.cpp:2:
c:\mingw\bin\../lib/gcc/i686-w64-mingw32/4.7.2/include/c++/bits/regex.h:402:7: error:   initializing argument 1 of 'std::basic_regex<_Ch_type, _Rx_traits>::basic_regex(const _Ch_type*, std::basic_regex<_Ch_type, _Rx_traits>::flag_type) [with _Ch_type = char; _Rx_traits = std::regex_traits<char>; std::basic_regex<_Ch_type, _Rx_traits>::flag_type = unsigned int]' [-fpermissive] 
```

但是以上述方式用字符串初始化一个向量是可以的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T20:17:30.307

正则表达式构造函数是显式的（参见[http://en.cppreference.com/w/cpp/regex/basic_regex/basic_regex](http://en.cppreference.com/w/cpp/regex/basic_regex/basic_regex)），因此拒绝从字符串静默构造正则表达式。我不熟悉正则表达式对象，但是

`vector<regex> regexes = { regex("[a-z]+"), regex("[0-5]+") }`

应该做的伎俩。

# css - Tridion 2011 CMS：资源解释为样式表，但使用 MIME 类型 text/html 传输

> ID：14164097
> 
> 赞同：2
> 
> 时间：2013-01-04T20:03:51.960
> 
> 标签：css, content-management-system, tridion-2011, mode

我在 Tridion 2011 CMS 上安装了一个自定义 msi，它更新了许多 Tridion 配置，但不了解哪些配置发生了变化。现在所有 css' 都被解释为 text/html 而不是 text/css 并且 CMS 没有正确加载。Chrome 中的错误是：资源解释为样式表，但使用 MIME 类型 text/html 传输：“http://sf1-dv9-iub-cm.wellsfargo.com:12300/WebUI/Editors/CME/Views/Dashboard/Dashboard_v6。 1.0.55920.15_.aspx?mode=css”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:54:03.287

您很可能遇到了服务器端错误——可能是由于您的配置错误或未能加载某些程序集。

您可以通过直接访问提到的 URL 来检查。这可能是一个错误页面，其中包含有关该问题的详细信息。或者，您可以在事件查看器中检查应用程序日志，以了解 ASP.NET 从请求时发出的任何警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T21:23:51.887

呼——问题似乎与 System.config 文件有关。从正常工作环境复制它，混乱的环境恢复正常！谢谢大家检查。

# transactions - MarkLogic dls 库 - 冲突更新

> ID：14164099
> 
> 赞同：0
> 
> 时间：2013-01-04T20:04:03.483
> 
> 标签：transactions, xquery, marklogic

好吧，我们有一个非常简单的场景。

我们利用 Marklogic dls 库来管理文档，下面是代码

传入的变量如下所示：

```
 $doc: =<root>
            <node1>
              <subnode/></node1>
            <node2>
            <status/>
            </node2>
     <root> 
```

该函数替换/更新文档中的几个不同节点。签入，然后返回 id-version 对的映射。

```
declare function process-and-version($doc) {

  for $sb in $doc/node1/subnode
  return if ($sb/node3) then
       xdmp:node-replace($sb/node3,  <node3>foo</node>)
     else
       xdmp:node-insert-after($sb, <node3>foo</node>),

  xdmp:node-replace($doc/status, <status>{$status}</status>),
  dls:document-checkout-update-checkin("fn:base-uri($doc), $doc, "", fn:true()),

  let $updated-version:=
   <entry>{
    let $version := c:get-latest-version($uri)
    (:another function in our lib that uses cts:search:)
    return  ($doc/node1, <version>{$version}</version>)
   }
   </entry>
 return $updated-version
 }; 
```

我们正在使用 XRAY 对此进行测试并收到以下错误：

```
<error:error xsi:schemaLocation="http://marklogic.com/xdmp/error error.xsd" xmlns:error="http://marklogic.com/xdmp/error" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <error:code>XDMP-CONFLICTINGUPDATES</error:code>
      <error:name></error:name>
      <error:xquery-version>1.0-ml</error:xquery-version>
      <error:message>Conflicting updates</error:message> 
```

非常感谢您的帮助，

我是

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T20:43:47.287

问题在于 xdmp:node-* 函数对存储在数据库中的文档进行操作。您无需调用更新来保存这些更改。很可能 dls update 函数替换了整个文档，导致与那些节点更新发生冲突。

您正在寻找内存中的更新。dls 库本身包含一些执行此操作的函数，但这些函数是私有的。我建议查看下面提到的帮助程序库，或者如果更改相对简单，您可以重建文档。这是经常进行的，并且不会影响性能。

内存更新：[https ://github.com/marklogic/commons/tree/master/memupdate](https://github.com/marklogic/commons/tree/master/memupdate)

！

# mysql - SQL 获取每个 PlayerID 的行总和

> ID：14164103
> 
> 赞同：8
> 
> 时间：2013-01-04T20:04:08.637
> 
> 标签：mysql, sql, sum

我有一个看起来像这样的布局：

```
Player:
PlayerID - PlayerName

Exp
ExpID - PlayerID - ExpChange 
```

我要做的是获取每个玩家名称的 ExpChange 总和，并按 expchange 的总和对其进行排序。（以 SUM(ExpChange) 为分数的高分列表。

这是我到目前为止所拥有的：

```
SELECT Player.PlayerName, Exp.ExpChange
FROM Player
INNER JOIN Exp
ON Player.PlayerID=Exp.PlayerID
ORDER BY Exp.ExpChange; 
```

但是现在我需要以某种方式通过该玩家的兑换总和对每个玩家进行排序。这可能吗？我试着搜索了一吨，但找不到任何东西。谢谢

PS我也尝试过这样的事情：

```
SELECT Player.PlayerName, SUM(Exp.ExpChange) AS exp
FROM Player
INNER JOIN Exp
ON Player.PlayerID=Exp.PlayerID
ORDER BY exp; 
```

但它只输出每个人的总 ExpChange，而不是每个单独的玩家。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-04T20:06:09.917

您需要添加一个`GROUP BY`子句来获取`sum()`for each `player`：

```
SELECT Player.PlayerName, SUM(COALESCE(Exp.ExpChange, 0)) AS exp
FROM Player
LEFT JOIN Exp
   ON Player.PlayerID=Exp.PlayerID
GROUP BY Player.PlayerName
ORDER BY exp; 
```

如果您只想要在`exp`表中匹配的记录，那么您可以使用`INNER JOIN`：

```
SELECT Player.PlayerName, SUM(Exp.ExpChange) AS exp
FROM Player
INNER JOIN Exp
   ON Player.PlayerID=Exp.PlayerID
GROUP BY Player.PlayerName
ORDER BY exp; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:08:11.403

尝试这个

```
 SELECT P.PlayerName, SUM(Exp.ExpChange) AS exp
  FROM Player p
  INNER JOIN Exp
  ON p.PlayerID=Exp.PlayerID
  GROUP BY p.PlayerName
  ORDER BY exp; 
```

# c# - 使用 Linq 优化 WMI 查询

> ID：14164105
> 
> 赞同：2
> 
> 时间：2013-01-04T20:04:19.157
> 
> 标签：c#, linq, optimization, query-optimization, wmi

首先，我应该首先承认我对使用 WMI 或 LINQ 真的不太了解。所以我相信任何人都不会感到惊讶，因为我遇到了这样的困难！

问题是我试图从同一个 WMI 对象中查询或返回多个值。通常这不会太糟糕，但我发现很难解决这个问题，因为只需要返回与特定数据集匹配的元素。问题是，我必须首先查询 WMI 以获取特定元素或值，然后重新启动查询，按所述元素或值过滤以返回所需的数据集。

我确信我可以遍历 WMI 对象中的所有元素并将它们附加到集合中。然后遍历集合，直到我得到我正在寻找的东西，但我仍然有过滤掉所有额外不必要元素的问题。

所以我想我的问题是，对 WMI 对象进行高级搜索的最佳方法是什么？如何优化该过程，以便不需要很长时间来检索我正在寻找的信息？

在我的多次搜索中，我发现了一些关于使用 LINQ 的人的参考资料，但我对 LINQ 的有限接触意味着我不确定如何在这种情况下使用它，因此非常感谢任何帮助或见解。

到目前为止，这是我想出的：

```
 ManagementObjectSearcher searcher = new ManagementObjectSearcher
            ("SELECT * FROM Win32_NetworkAdapterConfiguration where IPEnabled=true");
        IEnumerable<ManagementObject> objects = searcher.Get().Cast<ManagementObject>();
        string description = (from o in objects orderby o["IPConnectionMetric"] 
                              select o["Description"].ToString()).FirstOrDefault();

        _NICINDEX = (from o in objects orderby o["IPConnectionMetric"]
                     select o["Index"].ToString()).FirstOrDefault();

        _MACADDRESS = (from o in objects orderby o["IPConnectionMetric"]
                       select o["MACAddress"].ToString()).FirstOrDefault();

        _IPADDRESS = (from o in objects orderby o["IPConnectionMetric"]
                      select o["IPAddress"].ToString()).FirstOrDefault();

        _IPV6ADDRESS = (from o in objects orderby o["IPConnectionMetric"]
                        select o["IPAddress"].ToString()).FirstOrDefault();

        _SUBNETMASK = (from o in objects orderby o["IPConnectionMetric"]
                       select o["IPSubnet"].ToString()).FirstOrDefault();

        _GATEWAY = (from o in objects orderby o["IPConnectionMetric"]
                    select o["DefaultIPGateway"].ToString()).FirstOrDefault();

        _DNSSERVER = (from o in objects orderby o["IPConnectionMetric"]
                      select o["DNSServerSearchOrder"].ToString()).FirstOrDefault();

        _DNSSECSVR = (from o in objects orderby o["IPConnectionMetric"]
                      select o["DNSServerSearchOrder"].ToString()).FirstOrDefault();

        return description; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:21:31.527

所以我不熟悉您的特定数据库提供商，但您的主要问题是您要迭代`IEnumerable`10 次，这意味着对数据库有 10 个不同的查询。你当然不需要这样做，这真的会影响你的表现。您还对返回的数据进行了 10 次不同的排序；你应该只做一次。

这是您的代码的重构，以获取项目一次，然后从中获取 10 个不同的值：

```
ManagementObjectSearcher searcher = new ManagementObjectSearcher
            ("SELECT * FROM Win32_NetworkAdapterConfiguration where IPEnabled=true");
ManagementObject managementObject = searcher.Get()
    .Cast<ManagementObject>()
    .OrderBy(obj => obj["IPConnectionMetric"])
    .FirstOrDefault();

string description = managementObject["Description"];
_NICINDEX  = managementObject["Index"];
//repeat for the other 8 values following the above pattern
return description; 
```

请注意，如果可能的话，您应该在 DB 端进行排序，并在 DB 端将输出限制为仅 1 个值。在不知道您正在使用的查询提供程序的细节的情况下，我无法说出最好的方法是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T20:54:01.707

创建 WMI 查询以获取所需数据，将其转换为 LINQ to Objects 查询，然后遍历结果，获取所需的数据位会更容易。

```
var queryStr =
    "SELECT * " +
    "FROM Win32_NetworkAdapterConfiguration " +
    "WHERE IPEnabled = true";
using (var searcher = new ManagementObjectSearcher(queryStr))
using (var managementQuery = searcher.Get())
{
    // convert to LINQ to Objects query
    var query =
        from ManagementObject mo in managementQuery
        orderby Convert.ToUInt32(mo["IPConnectionMetric"])
        select new
        {
            Description          = Convert.ToString(mo["Description"]),
            Index                = Convert.ToString(mo["Index"]),
            MACAddress           = Convert.ToString(mo["MACAddress"]),
            IPAddress            = String.Join(", ", (string[])mo["IPAddress"] ?? new string[0]),
            IPSubnet             = String.Join(", ", (string[])mo["IPSubnet"] ?? new string[0]),
            DefaultIPGateway     = String.Join(", ", (string[])mo["DefaultIPGateway"] ?? new string[0]),
            DNSServerSearchOrder = String.Join(", ", (string[])mo["DNSServerSearchOrder"] ?? new string[0]),
        };

    // grab the fields
    String description = null;
    foreach (var item in query)
    {
        description  = description  ?? item.Description;
        _NICINDEX    = _NICINDEX    ?? item.Index;
        _MACADDRESS  = _MACADDRESS  ?? item.MACAddress;
        _IPADDRESS   = _IPADDRESS   ?? item.IPAddress;
        _IPV6ADDRESS = _IPV6ADDRESS ?? item.IPAddress;
        _SUBNETMASK  = _SUBNETMASK  ?? item.IPSubnet;
        _GATEWAY     = _GATEWAY     ?? item.DefaultIPGateway;
        _DNSSERVER   = _DNSSERVER   ?? item.DNSServerSearchOrder;
        _DNSSECSVR   = _DNSSECSVR   ?? item.DNSServerSearchOrder;
        // check if all fields are set so we can stop
        if (new[] { description, _NICINDEX, _MACADDRESS, _IPADDRESS, _IPV6ADDRESS, _SUBNETMASK, _GATEWAY, _DNSSERVER, _DNSSECSVR }.All(x => x != null))
            break;
    }
} 
```

尽管我不清楚为什么要单独获取每个字段中的第一个。我希望您会希望将第一个适配器的字段作为一个整体。所以最后，我认为最终应该是：

```
var first = query.FirstOrDefault();
if (first != null)
{
    description  = first.Description;
    _NICINDEX    = first.Index;
    _MACADDRESS  = first.MACAddress;
    _IPADDRESS   = first.IPAddress;
    _IPV6ADDRESS = first.IPAddress;
    _SUBNETMASK  = first.IPSubnet;
    _GATEWAY     = first.DefaultIPGateway;
    _DNSSERVER   = first.DNSServerSearchOrder;
    _DNSSECSVR   = first.DNSServerSearchOrder;
} 
```

# c# - 通过 GitHub 将 MVC4 C# 应用程序部署到 Azure。我的 .gitignore 中应该有什么？

> ID：14164108
> 
> 赞同：6
> 
> 时间：2013-01-04T20:04:26.893
> 
> 标签：c#, git, azure, github, asp.net-mvc-4

我有一个在 Visual Studio 2012 中开发的 ASP.NET、MVC4、C# 应用程序。到目前为止，我已经使用 VS Publish 工具成功地部署到了 Azure 网站。

我现在已经在 Azure 网站上成功设置了 Git 发布，并将其与 GitHub 存储库链接。我已经在本地机器上初始化了一个存储库，并将全部内容推送到 GitHub 存储库。Azure 立即将这一切都拉了回来。

现在，我期待在没有 .gitignore 文件的情况下，这将无法完美运行，我是对的。

所以我的问题是：**从我的本地 Visual Studio 工作目录中，我应该从存储库中省略什么？即我的.gitignore 中应该有什么？**

此外，在尝试让应用程序在 Azure 网站上运行时，我还应该考虑其他任何因素吗？

注释：
1\. 我仔细查看了[https://gist.github.com/2589150](https://gist.github.com/2589150)，但它似乎与我在 VS 工作目录中看到的不符。
2\. [https://github.com/github/gitignore/blob/master/CSharp.gitignore](https://github.com/github/gitignore/blob/master/CSharp.gitignore)似乎更近了，我目前正在努力了解它的哪些部分适用于我的情况。例如，如果我排除 bin/*，则应用程序无法在 Azure 上部署。

**更新：**
1）我按照@levelnis的建议修改了我的web.config文件来关闭自定义错误：

```
<configuration>
    <system.web>
        <customErrors mode="Off"/>
    </system.web>
</configuration> 
```

我发现我的问题是数据库连接字符串不再由 VS Publish 工具转换为 Azure。我不得不直接修改它并提交到 repo。

**重要提示：**我通过简单地查看 VS Publish 工具在 Azure 上发布的内容找到了正确的字符串，方法是使用不同的发布配置文件发布到临时 Azure 网站。

这解决了问题，部署非常顺利。

2）此时我的 .gitignore 文件有以下内容：

```
    # 建立文件夹
    对象/

    # 用户特定文件
    *。用户

    # SQL Server 文件  
    App_Data/*.mdf
    App_Data/*.ldf

```

为了整洁，我似乎可以剪掉更多，但这并没有影响通过 GitHub 部署的正确操作，现在实际上工作非常顺利。

最后，方便的 git 命令用于从 repo 中删除文件而不删除它们。几个例子：

```
    git rm -r --cached obj/*
    git rm -r --cached */*.user

```

然后显然在添加、提交和推送之前将这些添加到 .gitignore 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:58:40.143

您的问题可能与没有 .gitignore 文件无关。在最坏的情况下，您会将已编译的 dll 包含在存储库中的 bin 文件夹中——从一般维护的角度来看，这是一个非常糟糕的主意，但从发布到 Azure 的角度来看却不是。

错误是黄屏死机还是只是显示该消息的空白屏幕？如果是后者，听起来好像部署失败了。您可以通过 FTP 访问网站并检查网站文件是否在应有的位置。您还可以在那里找到一个 Logs 目录 - 它可能包含有助于诊断错误的内容。这是我项目中的 .gitignore （您的项目可能需要添加更多内容/删除一些位，但至少它可以让 dll 不碍事）：

```
# git ignore file
_ReSharper.*
[B|b]in/
obj/
*.suo
*.user 
```

这不是 Azure 特定的，而是 ASP.NET 特定的。顺便说一句，如果您需要删除 dll 并且它们已被提交，您需要将 bin 路径添加到 .gitignore 并删除所有 dll

编辑：添加`<customErrors mode="Off"/>`- 至少它会告诉你错误是什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:14:03.167

Visual Studio 的 gitignore 文件的一个很好的示例位于以下位置：

[https://gist.github.com/2589150](https://gist.github.com/2589150)

至于在 Azure 上发布，我对此并不精通，但我想您会在这里找到所需的一切：

[http://msdn.microsoft.com/en-us/library/windowsazure/hh420322.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh420322.aspx)

更棒的是，微软的一篇关于使用 Git 发布到 Azure 的教程：

[http://www.windowsazure.com/en-us/develop/net/common-tasks/publishing-with-git/](http://www.windowsazure.com/en-us/develop/net/common-tasks/publishing-with-git/)

# xslt - XSLT 版本 - Oracle 服务总线

> ID：14164110
> 
> 赞同：0
> 
> 时间：2013-01-04T20:04:37.123
> 
> 标签：xslt, oracle11g, osb

Oracle Service Bus 11.1.1.6 提供哪个版本的 XSLT？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:38:27.043

Oracle Service Bus 11.1.1.6 支持 XSLT 1.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T21:19:45.247

作为 SOA 套件的一部分，请参阅此链接： [http ://docs.oracle.com/cd/E28271_01/dev.1111/e10224/bp_xslt_mpr.htm#SOASE188](http://docs.oracle.com/cd/E28271_01/dev.1111/e10224/bp_xslt_mpr.htm#SOASE188)

> 支持 XSLT 1.0 版。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-07T11:54:20.877

它支持 XSLT 1.0，但最好在 Oracle Service Bus 中使用 XQuery。

# php - 淡入和淡出不适用于无限滚动后加载的内容

> ID：14164111
> 
> 赞同：1
> 
> 时间：2013-01-04T20:04:40.297
> 
> 标签：php, jquery, infinite-scroll

我使用 Paul Irish 的 masonry 和无限滚动在我的页面上加载额外的内容。此内容具有以下标记：

```
 <div class="wrdLatest" id="<?=$row['item_id']?>">
                <div class="item_300_wrapper">
                    <div class="item_300_image">
                        <a class="<? if($_SESSION['login'] && $_SESSION['active'] == 1) { ?>item_popup<? }elseif($_SESSION['login'] && $_SESSION['active'] == 0){?>activate_popup<? } else { ?>signup_popup<? }?>" href="popup.php?id=<?=$row['item_id']?>"><img src="http://www.itemmized.com/<?=$row['item_pic']?>" class="img_300" alt="<?=$row['item_title']?>" /></a>
                        <div class="item_300_description">
                            <p class="title"><?=$row['item_title']?></p><p class="poster">by <?=$row['user_name']?></p>
                            <div class="item_poster<? if($length > 26) {?>_big<? } ?>"><a href="profile.php?id=<?=$row['user_id']?>" <? if(empty($_SESSION['login'])) { ?>class="signup_popup1"<? } ?>><img src="<?=$row['user_pic']?>" class="img_poster" alt="<?=$row['user_name']?>" /></a></div>
                        </div>
                    <div class="ribbon r_<?=$row['item_category']?>"></div>
                    </div>
                </div>
                </div> 
```

如您所见，有一个类`item_300_description`。这个类包含一个在`mouseover`类上淡入淡出的描述`item_300_image`。这是通过以下 js 脚本完成的：

```
$(document).ready(function() {

    $(".item_300_image").on({
    mouseenter: function(){
        $(this).children('.item_300_description').stop().fadeTo(500, 1);
},
    mouseleave: function(){
        $(this).children('.item_300_description').stop().fadeTo(500, 0);
}

});
}); 
```

但是无限滚动后加载的额外内容，我无法执行`mouseover`. 如何设置 javascript，以便它也加载到无限滚动后显示的内容上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:07:55.233

```
$("#SomeParentID").on('mouseenter mouseleave', '.item_300_image', function( e ) {
    var opacity = e.type=='mouseenter' ? 1 : 0 ;
    $(this).find('.item_300_description').stop().fadeTo(500, opacity );
}); 
```

[http://api.jquery.com/on/#direct-and-delegated-events](http://api.jquery.com/on/#direct-and-delegated-events)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:29:13.207

solved it:

```
 $(document).on("mouseenter", ".item_300_image" , function() {
        $(this).children('.item_300_description').stop().fadeTo(500, 1);
    });

    $(document).on("mouseleave", ".item_300_image" , function() {
        $(this).children('.item_300_description').stop().fadeTo(500, 0);
    }); 
```

# objective-c - 替换 UITableView 编辑模式中的“删除”和“添加”按钮或图像

> ID：14164113
> 
> 赞同：0
> 
> 时间：2013-01-04T20:04:45.757
> 
> 标签：objective-c, cocoa-touch, uitableview

是的，我知道...不应该（想要）替换 UITableView 中使用的默认按钮，因为用户可以识别这些按钮并知道如何处理它们。

然而，红色减号和绿色加号按钮在我定制的漂亮设计中看起来很糟糕，我真的很想找到一种方法将设计师图像添加到这些按钮（仍然非常容易识别）。

所以问题是如何替换这些图像？

一种方法是不使用标准的 UITableView 编辑模式并自己构建所有内容（正如关于 stackoverflow 的其他问题所建议的那样），但我希望我不必一路走下去。

另一种方法是建立一个全新的状态，`willTransitionToState`但我宁愿找到一种更简单的方法。

如果有人有任何建议，请告诉我！

我不是在寻找`editingAccessoryView`将附件视图放在右侧的那个..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T20:09:42.187

我自己找到了这个问题的答案！

我在视图层次结构中使用调试器和`po [self recursiveDescription] 进行搜索，直到找到负责图标的视图并将其替换为我自己的图像

我以 github repo 为例，但这是隐藏旧图像的代码：

```
- (void) removeOriginalEditControl{
    for (UIView *subview in self.subviews) {
        if ([NSStringFromClass([subview class]) isEqualToString:@"UITableViewCellEditControl"]) {
            for (UIView *subsubview in subview.subviews) {
                if ([NSStringFromClass([subsubview class]) isEqualToString:@"UIImageView"]) {
                    [subsubview removeFromSuperview];
                    break;
                }
            }
        }
    }
} 
```

后来我添加了一个新的 UIImageView 来显示我的新图标！

查看完整示例：[https ://github.com/tiemevanveen/TableViewCustomEditControls](https://github.com/tiemevanveen/TableViewCustomEditControls)

# installation - 自动将新文件添加到安装程序

> ID：14164122
> 
> 赞同：1
> 
> 时间：2013-01-04T20:05:26.490
> 
> 标签：installation, installshield

我维护了几个 InstallShield 项目，并且我经常需要向我的安装程序添加新文件，打开一个项目 + 手动添加/删除一个文件 + 每次签入更新的项目有点乏味。我想简化此过程，以便我可以将新文件放在特定文件夹中，该文件夹将由安装程序项目的（自动）构建处理，**而无需**打开（修改）项目本身。

假设新文件不是必须在目标系统上注册的 .DLL（因为 InstallShield 可能必须执行 COM 提取，这使得添加此类文件的过程无法（或非常困难）自动化）

一种可能的解决方案是编写一个预构建脚本，它将特定文件夹中的所有文件放入 foo.zip，安装程序将部署包含任意数量文件的 foo.zip，这可以通过自定义来完成使用适当的命令行选项调用 7zip 的操作。

这个问题有更优雅的解决方案吗？（无需压缩文件夹并调用 7zip）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T06:44:54.973

动态文件链接或自动化接口。

# intellij-idea - 如何使用 IntelliJ 查找未使用的方法？

> ID：14164123
> 
> 赞同：9
> 
> 时间：2013-01-04T20:05:27.903
> 
> 标签：intellij-idea

经过分析，`IntelliJ`发现未使用的方法，但我需要在相关课程中。此外，我找到的唯一方法是滚动代码以查找名称为灰色的方法。

有没有一种方法可以跨项目进行搜索以查找未使用的方法？

此外，如果`A`调用`B`并且`A`未使用，是否可以将其标记`B`为未使用，作为单个搜索的一部分？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-04T20:11:19.810

您可以通过“检查代码”来做到这一点。

转到Analyze -> Inspect Code，选择默认项目，并允许它运行。您将获得与此类似的结果集。

![结果集的左侧。](../Images/e44ef2a818eb9725ef849c428bc6b3df.png) ![结果集的右侧。](../Images/da04f85185035ea55c421d2da7bfa4ea.png)

这是一个虚拟项目，我用于格式化代码并尝试在 SO 上提出的问题。我完全*忘记*了我在这里有`StackOverflow`课，但检查发现它毕竟没有使用。

# ms-access - 访问数据验证事件

> ID：14164124
> 
> 赞同：1
> 
> 时间：2013-01-04T20:05:29.450
> 
> 标签：ms-access, vba

我有一个带有一些具有验证规则的输入字段的表单。在字段旁边，我有复选标记或 x 标记以显示数据是否正确。我想捕捉数据验证事件，以便我可以更改这些标记。无论如何要参加数据验证活动吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:18:28.590

Access 不会公开验证事件。您可以创建一个更新前过程来检查条目是否有效，并从那里驱动复选标记。

但是最好使用每个控件的 After Update 事件。此时，您可以假设该值是有效的。还要考虑如果 Null 被允许会发生什么......您是否想要 Null 值的复选标记。

# jquery-ui - 激活基于 jquery 选择器的手风琴部分

> ID：14164126
> 
> 赞同：0
> 
> 时间：2013-01-04T20:05:49.407
> 
> 标签：jquery-ui, jquery-ui-accordion

我从阅读文档中知道手风琴中的活动选项采用布尔值或整数。有没有办法根据选择器来做到这一点？

我想要完成的是，如果一个元素具有活动类，则通过手风琴使父部分活动。我的目标是 h3 元素。在我包含的代码中，第一部分应该是活动的，因为 li 上的类活动值为 1。

jQuery

```
var t = $('.ui-accordion-content a.active');
if (t.length){
   //select the h3 element
   var parent = $(t).parents('h3.ui-accordion-header');
   //close all sections 
   $( ".accordion" ).accordion( "option", "active", false );
   //open section 
   $( ".accordion" ).accordion( "option", "active", parent );
} 
```

html

```
<div>
<ul>
    <li>0</li>
</ul>
<ul class="accordion">
        <li>
            <h3><a href="#">First</a></h3>
            <div>
                <ul>
                    <li class="active">1</li>
                    <li>2</li>
                </ul>
            </div>
        </li>
        <li>
            <h3><a href="#">Second</a></h3>
            <div>
                <ul>
                    <li>3</li>
                    <li>4</li>
                </ul>
            </div>
        </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:37:35.493

我向 h3s 添加了一个属性

```
<h3 accordian-index="0"><a href="#">First</a></h3> 
```

然后我选择 attr 并使用整数设置活动

```
var headerIndex = parseInt($(t).parents('.ui-accordion-content').siblings('h3').attr('accordian-index'));
$( ".accordion" ).accordion( "option", "active", headerIndex); 
```

它不是我应得的解决方案，但它是我现在需要的解决方案。

# android - 无法在 AsyncTask 中访问“findViewById”

> ID：14164128
> 
> 赞同：12
> 
> 时间：2013-01-04T20:05:56.877
> 
> 标签：android, android-asynctask

我正在使用 AsyncTask 类从 php 文件中下载数据。下载后，我想把这些数据，放到不同的TextView中，但是我不能使用findViewById的方法。

问题是我是通过单独的类来做这件事的，而且这一切都在一个片段中。

这是我的代码：

```
public class RecuperarComentarisFoto extends AsyncTask<String, String, String>{
private Context mContext;
[...]
public RecuperarComentarisFoto(Context context){
    this.mContext=context;
}
@Override
protected void onPreExecute() {
    [...]
}

@Override
protected String doInBackground(String... arg0) { 
    params.add(new BasicNameValuePair("pid", "1"));
    JSONObject json = jsonParser.makeHttpRequest(url_get_comentaris, "GET", params);
    JSONArray productObj;
    //HERE I RETRIEVE DATA FROM JSON. ITS WORKING OK.

    return null;
} 
```

我有问题的地方：

```
@Override
protected void onPostExecute(String result) {
    super.onPostExecute(result);
    this.pDialog.dismiss();
    TextView comentariEditText = (TextView) findViewById(R.id.commentsMostrar);
} 
```

我试过这个：

```
 TextView comentariEditText = (TextView) mContext.findViewById(R.id.commentsMostrar); 
```

但也不起作用。

请注意，我是从 Fragment 调用此 AsyncTask。如您所见，我必须将 getActivity() 检索到的上下文传递给 AsyncTask：

```
public class MyFragmentA extends Fragment {
Context cont;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    View myFragmentView = inflater.inflate(R.layout.fragment_a, container, false);

    cont=getActivity();
    new RecuperarComentarisFoto(cont).execute();
    return myFragmentView;
}

} 
```

我应该怎么办？

谢谢你。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-04T20:19:21.350

像这样将您的膨胀视图传递给 AsyncTask：

```
public class RecuperarComentarisFoto extends AsyncTask<String, String, String>{
private Context mContext;
private View rootView;
[...]
public RecuperarComentarisFoto(Context context, View rootView){
    this.mContext=context;
    this.rootView=rootView;
}
@Override
protected void onPreExecute() {
    [...]
}

@Override
protected String doInBackground(String... arg0) { 
    params.add(new BasicNameValuePair("pid", "1"));
    JSONObject json = jsonParser.makeHttpRequest(url_get_comentaris, "GET", params);
    JSONArray productObj;
    //HERE I RETRIEVE DATA FROM JSON. ITS WORKING OK.

    return null;
}
@Override
protected void onPostExecute(String result) {
    //super.onPostExecute(result);  <--GET RID OF THIS (it will screw up on 2.1 devices)
    this.pDialog.dismiss();
    // use rootview to findViewById
    TextView comentariEditText = (TextView) rootView.findViewById(R.id.commentsMostrar);
} 
```

然后像这样调用，

```
View myFragmentView = inflater.inflate(R.layout.fragment_a, container, false);

cont=getActivity();
new RecuperarComentarisFoto(cont, myFragmentView).execute(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-01-25T07:40:04.813

# 使您的 AsyncTask 独立于 Activity

***如果***

*   您`AsyncTask`是一个单独的 Java 类**（在 Activity 之外）** ，您仍然希望访问任何`Activity`from 的 View 元素`AsyncTask`。
*   您想在`AsyncTask`不更改任何代码的情况下将您的其他活动与其他活动一起使用`AsyncTask`

***答案是***。使用接口

> **优势？**
> 接口使事物独立（松散耦合）

### 您可以按照以下步骤操作：

**1) 创建接口**

```
public interface AsyncTaskListener{

   public void giveProgress(int progress);

} 
```

**2) 在你的 AsyncTask 中使用监听器**

```
 DownloadSongTask extends AsyncTask<String,Integer,Void>{

    private AsyncTaskListener listener;

    public DownloadSongTask(Context context)
    {
        listener= (AsyncTaskListener)context;    // Typecast 
    }

    @Override
    public void doInbackGround(String... params)
    {
         // Download code
         int downloadPerc = // calculate that
         publish(downloadPerc);   
    }

    @Override
    public void onProgressUpdate(Integer... params)
    {
         listener.giveProgress(params[0]);  // Use it 
    }

} 
```

**3）在Activity和Override方法中实现接口**

```
 public class YourActivity extends AppcompatActivity implements AsyncTaskListener{

    private TextView textView;

    // Activity code //
    new  DownloadSongTask(this).execute("Paradise.mp3");  // this is how you start Task

    @Override 
    public void giveProgress(int progress){
       textView.setText(progress+"");      
    }

} 
```

## 未来

除非您必须在其他活动中使用 Your AsyncTask，否则您不会意识到代码的美妙之处。
假设将来您想`AsyncTask`在其他显示 Spinner 进度的活动中使用它。
你将如何使用它？ **简单的！实现接口并覆盖方法。**

```
public class YourActivity extends AppcompatActivity implements AsyncTaskListener{

     private Spinner spinner;

     // Activity code //
     new  DownloadSongTask(this).execute("Paradise.mp3");  // this is how you start Task

    @Override 
    public void giveProgress(int progress){
       // Your Spinner code       
    }

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-05-19T15:05:31.260

试试这个`((Activity)context)`它对我有用......

```
TextView comentariEditText = 
(TextView) ((Activity)context).findViewById(R.id.commentsMostrar); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-04T20:16:34.530

尝试传递`MyFragmentA`上下文而不是`getActivity()`：

```
 cont=this;
 new RecuperarComentarisFoto(cont).execute(); 
```

并更改`RecuperarComentarisFoto`为

```
public class RecuperarComentarisFoto extends AsyncTask<String, String, String>{
public Fragment mContext;
[...]
public RecuperarComentarisFoto(Fragment context){
    this.mContext=context;
}
@Override
protected void onPostExecute(String result) {
    super.onPostExecute(result);
    this.pDialog.dismiss();
    TextView comentariEditText = 
                    (TextView)mContext.findViewById(R.id.commentsMostrar);
}
//...your code.. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-04T20:19:05.390

只需使用视图 myFragmentView 向您的 AsyncTask 添加一个额外的参数，然后在其上找到您的文本视图。

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    View myFragmentView = inflater.inflate(R.layout.fragment_a, container, false);

    cont=getActivity();
    new RecuperarComentarisFoto(cont, myFragmentView).execute();
    return myFragmentView;
} 
```

然后就使用那个视图..

```
TextView comentariEditText = (TextView) mView.findViewById(R.id.commentsMostrar); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-24T07:48:33.013

您可以使您的`myFragmentView`全局化，这样您就可以从任何地方访问您的视图，甚至可以从您的片段方法（如`onStart()`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-19T08:29:46.610

使用的接受的答案`RecuperarComentarisFoto(Context context, View rootView)`给了我信息：

```
java\MyFragmentA.java:64: error: constructor RecuperarComentarisFoto in class RecuperarComentarisFoto cannot be applied to given types;
                new RecuperarComentarisFoto(cont, myFragmentView).execute();
                ^
  required: no arguments
  found: MyFragmentA,View
  reason: actual and formal argument lists differ in length 
```

我不知道为什么结果与上面的建议不同。我使用了 API 版本 24。

`initialize()`因此我在里面使用了一个额外的方法`AsyncTask`：

```
public class RecuperarComentarisFoto extends AsyncTask<String, String, String>{
    private Context mContext;
    private View rootView;
    ...
    public initialize(Context context, View rootView){
        this.mContext=context;
        this.rootView=rootView;
    }
    ...
} 
```

在调用 MyFragmentA 类内部：

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        ...
        View myFragmentView = inflater.inflate(R.layout.fragment_a, container, false);
        cont=getActivity();

        RecuperarComentarisFoto rcf = new RecuperarComentarisFoto();
        rcf.initialize(cont, myFragmentViewt);
        rcf.execute(this);
        ...
    } 
```

# entity-framework - 面向 .NET 4.5 后，EF 数据注释无法“工作”

> ID：14164136
> 
> 赞同：10
> 
> 时间：2013-01-04T20:06:51.710
> 
> 标签：entity-framework, data-annotations, .net-4.5, entity-framework-5

我有一个以 .NET 4.0 为目标并使用 EF 5.0 的项目。将目标框架更改为 4.5（并更新 EF 5.0 引用以使用 .NET 4.5 程序集）后，数据注释似乎不再起作用。例如：

```
[Table("ApplicationSession", Schema = "Application")]
public class ApplicationSessionEntity
{
    [Key, ForeignKey("GenericSession")]
    public int GenericSessionID { get; set; }
... 
```

以前可以正常工作，但现在在运行时，`DbContext`抛出一个`InvalidOperationException`: `Unable to determine the principal end of an association...`。

我可以添加 Fluent api 调用来解决这个问题（确实如此），但是它无法识别该表不在“dbo”模式中。再说一次，我知道 Fluent api 可以用来解决这个问题，但是为什么数据注释突然被忽略了呢？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T21:25:02.630

在 .NET Framework 4.5 中，EF 注释已从 EF.dll 移至 System.ComponentModel.Annotations 程序集。似乎即使您以 .NET Framework 4.5 为目标，您仍然在某处引用了 EntityFramework.dll v4.4.0.0。因此，您的类是使用 4.4.0.0 程序集的属性编译的。在运行时，正在使用较新的 EntityFramework.dll (5.0.0.0)，它会从 System.ComponentModel.DataAnnotations 程序集中查找属性。找不到这些，因为您拥有 EF.dll 4.4.0.0 中的那些，因此看起来属性被忽略了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T13:52:15.640

如果您使用 .NET 4.5 及更高版本，它确实被移到了 EF 之外。但是如果你在 .NET 4.0 中编译，你会发现`DataAnnotations`as use 是。查看代码内部，您会发现：

```
#if NET40

namespace System.ComponentModel.DataAnnotations
{
...
}
#endif 
```

所以......是的，与其他答案相同，但我想指出这一点！

快乐编码！

# ruby-on-rails - 使用 FQL/Chat API 实时更新用户朋友的 online_presence

> ID：14164143
> 
> 赞同：2
> 
> 时间：2013-01-04T20:07:26.217
> 
> 标签：ruby-on-rails, facebook, xmpp, facebook-fql, facebook-chat

我目前正在 facebook 中开发一个应用程序，其中包含登录用户的朋友列表并显示他们的在线状态。为此，我使用了以下 FQL 查询：

`SELECT name,uid, online_presence FROM user WHERE online_presence IN ('active', 'idle') AND uid IN ( SELECT uid2 FROM friend WHERE uid1 = me())`

`friends_online_presence`是一个扩展权限并返回 Facebook 聊天状态（一个字符串，活动、空闲、离线或错误之一）。

我的问题是如何获得朋友在线状态变化的实时更新？

***选项 1：*** *在后台进程中定期查询 Facebook API*
***选项 2：*** *连接 XMPP 以获取实时更新（下面重复问题的答案）*。

人们在此之前也问过这个问题，这里有一些重复（未解决）：
[facebook-api-real-time-friends-online-presence-update](https://stackoverflow.com/questions/5295829/facebook-api-real-time-friends-online-presence-update) &
[Is-it-possible-to-subscribe-to-real-time-updates -for-user-online-presence](https://stackoverflow.com/questions/11697243/is-it-possible-to-subscribe-to-real-time-updates-for-user-online-presence?rq=1)。

我想知道是否有人解决了这个问题，如果是，你是如何解决的。

如果您能详细说明一下*选项 2*（使用 XMPP/Jabber），那就太好了，因为当用户数量较少时，我觉得定期查询只够了一段时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:53:03.617

最好的方法是使用 XMPP。

对于通过 XMPP 集成 facebook 聊天，我认为 Rails 中最好的方法是

1.  Rails + [StropheJS](http://strophe.im/strophejs/)
2.  除此之外，您可以包含类似[ember.js](http://emberjs.com/)的内容（但这不是必需的）

总的来说，系统看起来像

> [StropheJS](http://strophe.im/strophejs/)（客户端 JS）----> [XMPP BOSH 管理器](http://metajack.im/2008/09/08/which-bosh-server-do-you-need/)（[eJabberd](http://www.ejabberd.im/) / [Punjab](https://github.com/twonds/punjab)）----> Facebook 服务器

除此之外，如果你是 XMPP 的新手，那么[《Professional XMPP Programming with JavaScript and jQuery》](https://rads.stackoverflow.com/amzn/click/com/0470540710)这本书值得一读，其中有很多关于 strophejs 的示例

# android - android：带有位置管理器的简单服务

> ID：14164158
> 
> 赞同：0
> 
> 时间：2013-01-04T20:08:16.500
> 
> 标签：android, service

我想要一个没有 Binder 的简单服务。只需在启动时启动服务，不会破坏服务。我已经用位置经理建立了一个服务。但是服务没有启动。有什么问题？

```
public class WayService extends Service implements LocationListener {

blabla
...

    public WayService(Context context) {
        this.mContext = context;
        getLocation();
    }

    public Location getLocation() {
        try {
            locationManager = (LocationManager) mContext
                    .getSystemService(LOCATION_SERVICE);

            // getting GPS status
            isGPSEnabled = locationManager
                    .isProviderEnabled(LocationManager.GPS_PROVIDER);

            // getting network status
            isNetworkEnabled = locationManager
                    .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

            if (!isGPSEnabled && !isNetworkEnabled) {
                // no network provider is enabled
            } else {
                this.canGetLocation = true;
                // First get location from Network Provider
                if (isNetworkEnabled) { //! hinzugefuegt
                    locationManager.requestLocationUpdates(
                            LocationManager.NETWORK_PROVIDER,
                            MIN_TIME_BW_UPDATES,
                            MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    Log.d("Network", "Network");
                    if (locationManager != null) {
                        location = locationManager
                                .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                        if (location != null) {
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
                        }
                    }
                }
                // if GPS Enabled get lat/long using GPS Services
                if (isGPSEnabled) {
                    if (location == null) {
                        locationManager.requestLocationUpdates(
                                LocationManager.GPS_PROVIDER,
                                MIN_TIME_BW_UPDATES,
                                MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                        Log.d("GPS Enabled", "GPS Enabled");
                        if (locationManager != null) {
                            location = locationManager
                                    .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                            if (location != null) {
                                latitude = location.getLatitude();
                                longitude = location.getLongitude();
                                time = location.getTime();
                                speed = location.getSpeed();
                            }
                        }
                    }
                }
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

        return location;
    }

blabla
...

@Override
    public void onLocationChanged(Location location) {
        double latitude = getLatitude();
        double longitude = getLongitude();
        String mlat = String.valueOf(latitude);
        String mlon = String.valueOf(longitude);
        new PostData().execute(mlat, mlon, mtime);
    } 
```

清单看起来像这样：

```
 <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <service
            android:name=".WayService"
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name" >
        </service>

        <receiver android:name="WayStartServiceReceiver" >
        </receiver>

    </application> 
```

和：

```
public class WayStartServiceReceiver extends BroadcastReceiver {

      @Override
      public void onReceive(Context context, Intent intent) {
        Intent service = new Intent(context, WayService.class);
        context.startService(service);
      }
    } 
```

这是我的日志文件：

```
01-09 13:35:29.317: D/dalvikvm(452): newInstance failed: no <init>()
01-09 13:35:29.337: D/AndroidRuntime(452): Shutting down VM
01-09 13:35:29.337: W/dalvikvm(452): threadid=1: thread exiting with uncaught exception (group=0x40015560)
01-09 13:35:29.367: E/AndroidRuntime(452): FATAL EXCEPTION: main
01-09 13:35:29.367: E/AndroidRuntime(452): java.lang.RuntimeException: Unable to instantiate service de.app.trackmyway.WayService: java.lang.InstantiationException: de.app.trackmyway.WayService
01-09 13:35:29.367: E/AndroidRuntime(452):  at android.app.ActivityThread.handleCreateService(ActivityThread.java:1929)
01-09 13:35:29.367: E/AndroidRuntime(452):  at android.app.ActivityThread.access$2500(ActivityThread.java:117)
01-09 13:35:29.367: E/AndroidRuntime(452):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:985)
01-09 13:35:29.367: E/AndroidRuntime(452):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-09 13:35:29.367: E/AndroidRuntime(452):  at android.os.Looper.loop(Looper.java:123)
01-09 13:35:29.367: E/AndroidRuntime(452):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-09 13:35:29.367: E/AndroidRuntime(452):  at java.lang.reflect.Method.invokeNative(Native Method)
01-09 13:35:29.367: E/AndroidRuntime(452):  at java.lang.reflect.Method.invoke(Method.java:507)
01-09 13:35:29.367: E/AndroidRuntime(452):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-09 13:35:29.367: E/AndroidRuntime(452):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-09 13:35:29.367: E/AndroidRuntime(452):  at dalvik.system.NativeStart.main(Native Method)
01-09 13:35:29.367: E/AndroidRuntime(452): Caused by: java.lang.InstantiationException: de.app.trackmyway.WayService
01-09 13:35:29.367: E/AndroidRuntime(452):  at java.lang.Class.newInstanceImpl(Native Method)
01-09 13:35:29.367: E/AndroidRuntime(452):  at java.lang.Class.newInstance(Class.java:1409)
01-09 13:35:29.367: E/AndroidRuntime(452):  at android.app.ActivityThread.handleCreateService(ActivityThread.java:1926)
01-09 13:35:29.367: E/AndroidRuntime(452):  ... 10 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:24:44.587

您需要注册意图过滤器，它更像是告诉接收器它需要收听哪个广播

```
 <receiver android:name="WayStartServiceReceiver" >

           <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
</receiver> 
```

此外，应用程序应安装在内部存储器上。

编辑：

[https://groups.google.com/forum/?fromgroups=#!topic/android-beginners/B_lTmXcfo6A](https://groups.google.com/forum/?fromgroups=#!topic/android-beginners/B_lTmXcfo6A)

而不是使用构造函数，你应该做一些这样的事情

```
@Override
public void onCreate() {
    // Task to be done on first service start
    super.onCreate();
}

@Override
public void onStart(Intent intent, int startId) {
    // Task to be done on each intent received.
    super.onStart(intent, startId);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:03:36.400

我希望我们不能在 Android 服务中创建构造函数。就像我们不能在 Activity 中创建构造函数一样。我们将有我们的默认覆盖方法如下。

```
@Override
    public IBinder onBind(Intent intent) {
        return null;
    } 
```

否则尝试在服务类中使用**oncreate 。**在**on-create**调用方法**getLocation();** 如果您尝试使用 oncreate 方法，它肯定会起作用。你不会有任何问题。

# c++ - C 和 C++ 的 __func__ 值差异

> ID：14164161
> 
> 赞同：8
> 
> 时间：2013-01-04T20:08:26.157
> 
> 标签：c++, c, c++11, c99, c11

我真的正确吗，C 标准保证 _ func _ _ value 始终是封闭函数的名称，而在 C++（我的意思是 C++11，当然）它可以是任何实现定义的字符串（例如，如果我们有没有参数的函数 foo，我们可以得到类似“一些字符串 fdgdg asdfs fsdf sd”）？

**ISO/IEC 9899:2011**

6.4.2.2 预定义标识符

> 语义
> 
> 1 标识符 _ _ func _ _ 应由翻译器隐式声明，就好像紧跟在每个函数定义的左大括号之后，声明 static const char _ *func* _ [] = "function-name"; 出现，其中**function-name 是词法封闭函数的名称**。

**ISO/IEC 14882:2011**

8.4.1 一般 [dcl.fct.def.general]

> 8 函数局部预定义变量 _ _ func _ 被定义为形式的定义 static const char _ _ func _ _ [] = "function-name"; 已提供，其中**function-name 是实现定义的 string**。未指定此类变量是否具有与程序中任何其他对象不同的地址。

这是什么原因？如果我们无法接收当前函数名，返回类似“未知”的内容？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-04T20:14:12.250

C++ 中函数的“名称”是什么？

*   它是否由其命名空间限定？
*   重载函数是否按其参数类型命名？
*   不用于重载的返回类型呢？
*   函数模板中会发生什么？
*   调用约定是名称的一部分吗？
*   'const' 和 'volatile' 应该写在类型名称之前还是之后？

“实现定义的字符串”在如何将所有这些信息填充到字符串中时为编译器提供了一些灵活性。它会向您（程序员）发送一条消息，如果您想要可移植性，您不应该尝试执行字符串比较或解析，或者实际上除了记录值之外的任何事情。

（您甚至不能将这些值相互比较，因为不能保证它们是唯一的。似乎所有重载都可能产生相同的字符串。因此不建议使用它来编译探查器统计信息。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T20:14:28.577

我怀疑这是为了允许 C++ 编译器在`__func__`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-04T20:18:35.963

因为 C++ 允许基于函数参数的类型重载函数，并且因为函数可以放置在非全局范围内（这两者在标准 C 中都是不允许的），所以词法封闭函数的简单名称是不够的来识别它。

例如，考虑：

```
class A {
public:
    A() {
        std::cout << __func__ << std::endl;
    }
    void funca() {
        std::cout << __func__ << std::endl;
    }
};

int main() {
    A a;
    a.funca();
} 
```

它应该打印什么？

GCC 将生成一个打印“A”和“funca”的程序，但标准允许它打印“A::A”和“a::funca”，这是 C 标准不允许的。

# forms - 相当于zend 2中的addError？

> ID：14164164
> 
> 赞同：1
> 
> 时间：2013-01-04T20:08:33.953
> 
> 标签：forms, validation, unique, zend-framework2

我查看了 API，但似乎找不到：`Zend\Form\Element->addError($message)`Zend 2 中的等价物是什么？或者，我将如何完成同样的事情？

我有一个注册字段，其中用户名必须是唯一的，所以我正在等待数据库抛出异常，然后标记用户名字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T04:29:25.757

我这样做是为了检查电子邮件是否存在于控制器中。

```
 $postedarray  = $form->getData();
 $usersnameexist = $this->getUsersTable()->ISuseravailable($postedarray['email']);
 if($usersnameexist)
 {
    return array(
       'form' => $form,
       'errorMsg'=> 'Username already available please use other Username');
 } 
```

然后在视图文件中

```
<?php echo $this->formRow($form->get('email'));?>
<?php  if($this->errorMsg) { ?> 
     <ul>
          <li><?php echo $this->errorMsg; ?></li>
     </ul>
<?php 
} 
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T20:24:29.520

```
$formElement->setMessges(array(
    'errorMessageKey' => 'Something strange happened, slap the admin!'
)); 
```

# windows-phone-8 - 如何在 windows phone 8 中将 MediaPlayerLauncher 与 ScheduledAgent 任务一起使用

> ID：14164166
> 
> 赞同：1
> 
> 时间：2013-01-04T20:08:35.440
> 
> 标签：windows-phone-8, windows-phone-8-emulator

我尝试在 ScheduledTask 中使用 MediaPlayerLauncher 的 show 方法，但播放器从不显示。有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T01:09:07.497

无法从后台代理调用 MediaPlayerLauncher 和 Microsoft.Phone.Tasks 命名空间的其他成员。有关后台代理中列入黑名单的 API 的完整列表，请参阅 MSDN @ [http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202962(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202962(v=vs.105).aspx)

> **Microsoft.Phone.Tasks**
> 
> 不支持此命名空间中的所有 API。

与其调用 Launcher/Chooser，不如考虑更新应用的动态磁贴和/或显示 ShellToast。这些确实是后台代理可以与用户交谈的两种主要的以 UI 为中心的方式。

# azure - 查看来自多个客户端的队列/服务总线消息

> ID：14164167
> 
> 赞同：2
> 
> 时间：2013-01-04T20:08:40.947
> 
> 标签：azure, azure-storage, azureservicebus

我正在学习如何在 Azure 云应用程序和客户端应用程序之间进行通信，并完成了[本](http://www.windowsazure.com/en-us/develop/net/tutorials/compute-intensive-task-on-a-virtual-machine/)教程。

我目前有一个 .exe 工作进程的单个实例，它通过服务总线发送消息。我还有一个客户端角色，我在本地机器上运行以读取消息。但是，当我运行客户端的多个实例时，每个客户端都会获取一些消息，但没有一个得到完整的读数。是否可以使用队列或服务总线，以便客户端的**每个**实例都可以看到工作人员生成的**所有**消息？

例如，3 台不同计算机上的 3 个人可能希望独立监控同一计算任务的状态。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T20:18:41.813

在这种情况下，您不应该使用服务总线队列，而是使用服务总线主题/订阅。

> 与服务总线队列相比，每条消息都由单个消费者处理，主题和订阅使用发布/订阅模式提供一对多的通信形式。可以为一个主题注册多个订阅。当一条消息被发送到一个主题时，它就可供每个订阅独立处理/处理。

**对于您的示例，您将需要 1 个服务总线主题，并为每个客户端应用程序**在该主题上订阅。

更多信息：[如何使用服务总线主题/订阅](http://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-topics/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-05-23T18:21:28.050

因为我相信您使用“Peek”作为消息接收模式，它将在您运行的实例之间共享（不相等）总消息。

希望有帮助。

# css - CSS菜单下拉消失

> ID：14164172
> 
> 赞同：0
> 
> 时间：2013-01-04T20:09:03.757
> 
> 标签：css, wordpress, drop-down-menu, z-index

[http://ableworkforcetraining.com/](http://ableworkforcetraining.com/)

我有一个带有 Woo 主题的 Wordpress 3.5：白光

我的下拉 CSS 菜单似乎与 vslider 插件有问题。当您点击课程菜单的底部时，菜单会消失。

我认为这可能是 z-index 问题。看了很多帖子，感觉自己有z-index:9999；几乎所有与菜单相关的东西。

任何帮助将不胜感激，因为我没有想法。

提前致谢！

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:12:54.803

它是一个 z-index，但不知道具体原因。

你有这个：

```
#navigation .nav li ul { z-index: 999; } 
```

使z-index：9999；然后问题就消失了...为什么它不适用于 999？可能是因为您或其他人对 z-index =(

编辑：检查您的 CSS 代码。您最终会找到一些具有高 z-index 的东西（可能与滑块有关），例如 999 或 1000，因为如果您将 #navigation .nav li ul z-index 更改为 1001，它已经可以工作了。

此外，该选择器看起来“可能”太符合我的口味。您可能可以使用 .nav li ul 或 #navigation li ul。

Edit2：再次阅读您的问题，您说您有 9999 的 z-index 用于与菜单相关的任何内容。为什么？相信我，你真的不需要那个。实际上，如果您没有在您的网站中使用 z-index，那么 100 的 z-index 已经太多了。将某些东西设为 9999 z-index 可能只会在将来给您带来问题。

答应我你会在你的 .css 文件中搜索所有 z-index 条目并纠正它？

# html - 如何更改进度条的颜色

> ID：14164174
> 
> 赞同：1
> 
> 时间：2013-01-04T20:09:05.083
> 
> 标签：html, css, fonts, progress-bar

我想更改**上次更新文本**的颜色，默认为黑色，有没有办法引入一些代码来更改我为条形文本制作的文本颜色？帮我介绍一下缺少的代码。

```
<div id="progress">
    <span id="percent">2%</span>
    <div id="bar"></div>
    </div>
Last updated: 7/01/2013
#progress{
 width: 500px;   
 border: 1px solid orange;
 position: relative;
 padding: 1px;
}

#percent {
 position: absolute;   
 left: 50%;
 color:#C3B004; 
}

#bar {
 height: 20px;
 background-color:#2CB032;
 width: 2%;
} 
```

这是酒吧的链接：[link](http://jsfiddle.net/WawPr/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T21:00:47.120

我假设您可以包装`Last updated: 7/01/2013`in`<span>`标签，并给它一个类，然后您可以根据需要设置它的样式。

```
<span class="updated">Last updated: 7/01/2013</span> 
```

CSS：

```
.updated {
    font-size: 12px;    //size
    color: green;       //colour
    font-family:"Arial" //font 
} 
```

# clojure - 如何替换clojure中嵌套列表中的所有匹配项

> ID：14164175
> 
> 赞同：4
> 
> 时间：2013-01-04T20:09:15.143
> 
> 标签：clojure

给定以下顺序：

```
seq = ( (a b) ( (c d) a ) a )
(replace a z seq) => ( (z b) ( (c d) z ) z ) 
```

如何使用惰性序列和尾递归来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T20:51:07.920

看起来您想要遍历数据结构。

```
user=> (def s '((:a :b)((:c :d) :a) :a))
#'user/s
user=> (use 'clojure.walk)
nil
user=> (prewalk #(if (= :a %1) :z %1) s)
((:z :b) ((:c :d) :z) :z) 
```

**编辑：**或者，如果您确实只需要更换，更简单

```
user=> (prewalk-replace '{a z} '((a b) ((c d) a)))
((z b) ((c d) z)) 
```

# python - Http 代理适用于 urllib.urlopen，但不适用于 requests.get

> ID：14164177
> 
> 赞同：0
> 
> 时间：2013-01-04T20:09:24.003
> 
> 标签：python, proxy, python-2.7, urllib, python-requests

> **可能重复：**
> [无法让 python 请求与代理一起工作](https://stackoverflow.com/questions/14146787/cant-get-python-requests-to-work-with-proxies)

以下代码完美运行：

```
f=urllib.urlopen("http://httpbin.org/headers", proxies={'http':"http://username:pass@ip:port"})
print f.read()
f.close() 
```

但是，当我尝试对请求执行相同操作时，它会失败：

```
from requests.auth import HTTPProxyAuth
auth=HTTPProxyAuth("username","pass")
test=requests.get("http://httpbin.org/headers",proxies={"http":"ip:port"}, auth=auth)
print test.text 
```

这将返回（显然来自代理服务器）以下响应：

> 503服务不可用
> 
> ## 503服务不可用
> 
> ### 检测到递归

为什么？

# jquery - JSP Scriptlet：您可以将它插入到 html 页面中的任何位置，并且在 jquery 文档准备好之前调用它吗？

> ID：14164178
> 
> 赞同：1
> 
> 时间：2013-01-04T20:09:28.263
> 
> 标签：jquery, jsp

关于 JSP 的初学者问题。假设我有一些 java 语句

```
<% ..... %> 
```

我有一个 html 页面”

```
<html>
<head>...</head>
<script>...</script>
<body>...</body>
</html> 
```

我可以把这个java语句放在`<html>`标签之前吗？`</html>`标签后？`<body>`标签之前？`</body>`标签后？

如果我还有一个 jquery 文档就绪语句

`$(document).ready(function() {alert("ok"); });`

在`<script>...</script>`标签内，谁先被执行？我的Java代码或警报？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:10:52.967

您可以将 Java JSP 标签放在页面的任何位置，JSP 在 javascript 之前执行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:51:56.380

JSP 是 servlet。那是服务器端组件。JSP 只是 servlet 的高级抽象。您的 JSP 在运行时被翻译成 servlet。这个 servlet 将在服务器上生成 html 页面将发送给客户端并在他的浏览器中执行。因此，当然，您的 JSP 中的 Java 代码将首先执行。

# .htaccess - 301 重定向不适用于 url 中的 %20

> ID：14164179
> 
> 赞同：6
> 
> 时间：2013-01-04T20:09:45.160
> 
> 标签：.htaccess, http-status-code-301

我正在尝试创建此重定向：

```
Redirect /commercial%20work.html http://nataliearriolaphotography.com/fine-art-photography-prints.html 
```

问题是当我第一次创建这个页面时，我在文件名中留下了一个空格。换句话说，它是“ `/commercial work.html`”。在 chrome 和 safari 中，url 的内容与上面一样，用`%20`空格代替，但是当我创建此重定向时，它不起作用。我还尝试了以下方法：

```
Redirect /commercial work.html http://nataliearriolaphotography.com/fine-art-photography-prints.html 
```

这也不起作用。它会导致出现服务器错误页面。有没有人有什么建议？谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-04T20:11:25.143

尝试添加引号。所以

```
Redirect "/commercial work.html" http://nataliearriolaphotography.com/fine-art-photography-prints.html 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T20:14:09.157

将页面名称放在引号中应该这样做，例如：

```
Redirect 301 "/commercial work.html" http://nataliearriolaphotography.com/fine-art-photography-prints.html 
```

# layout - JavaFX 2 在运行时动态更改布局？

> ID：14164180
> 
> 赞同：1
> 
> 时间：2013-01-04T20:09:56.153
> 
> 标签：layout, javafx-2

Swing 将 LayoutManager 与容器分开。据我所知，JavaFX 没有这样做。

我有一个复杂的节点结构，我希望用户能够在几种不同的布局方法之间切换。相当于用户指定流的东西，所有容器都转换为相当于 FlowPanes。然后他们可以选择垂直，一切都垂直布局。

除了换出节点/重新创建整个结构之外，还有其他方法吗？

我应该注意：层次结构在运行时会发生变化，并且嵌套很深。

我提到 Swing 是因为这在 Swing 中很简单，只需维护整个层次结构中所有容器的列表，并通过一个简单的循环（或没有列表的树遍历）在它们上设置一个新的 LayoutManager。JavaFX 似乎没有这种可能性，因为布局行为似乎是节点内部的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T19:02:02.913

这在 Swing 中并不容易做到。您仍然需要再次在各个组件上设置所有布局约束，除非您的布局非常简单。

我看不出swing和javaFX之间有什么区别。在 JavaFX 中，您需要将相同的控件添加到不同的容器（VBox、HBox 等），但您仍然不需要每次都重新创建控件。在节点层次结构中间找到容器有点尴尬，但我确信有某种优雅的递归解决方案:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:18:01.360

这样的事情不工作吗？

```
AnchorPane main=new AnchorPane();
AnchorPane sub1=new AnchorPane();
sub1.getChildren().add(btn);
main.getChildren().add(sub1); 
```

当你想切换布局时

```
AnchorPane sub2=new AnchorPane();
main.getChildren().remove(sub1);
main.getChildren().add(sub2); 
```

**编辑** 我想我错过了你是如何做布局的。这就是我的设想。

```
Definitions to Various Components
MainLayout

-> CustomLayout 1
     -> References to various components.  ( Essentially you are not creating all the components for every layout, rather you are referring to them in each layout )
-> CustomLayout 2
     -> References to various components. ( More or less a different arrangement of the same components, adds some component references and removes some )
-> CustomLayout 3
     -> References to various components. 
```

做一个大胆的声明，但如果 JavaFX 中有一个工具，它会如何自动执行此操作？每个模板都需要知道它应该在哪里呈现特定组件，并且可以说最简单的方法就是创建一个新模板，将组件安排在不同的布局中，并在用户想要查看不同的布局时交换模板。

# mysql - Python 3 和 mysql 通过 SQLAlchemy

> ID：14164183
> 
> 赞同：9
> 
> 时间：2013-01-04T20:10:09.723
> 
> 标签：mysql, python-3.x, sqlalchemy

目前：

*   SQLAlchemy 安装并工作（或至少导入 v0.8.0b2）
*   mysql (v5.5.16)
*   分发 (0.6.34)
*   Oracle mysql-python 连接器
*   蟒蛇 3.2
*   Windows 7 32/64（注意我安装了 Python 32bits）

问题是 MySQLdb 或 Oursql 是必需的，我没有设法让它们中的任何一个工作。

找到[了这个](https://github.com/davispuh/MySQL-for-Python-3)，但也没有设法让它工作。

编辑：如果您知道其他适用于 Python3 的 orm，我很感兴趣。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-19T19:10:43.763

我成功地让 Oracle 的 MySQL 连接器在 Python 3.3 上与 SQLAlchemy 一起工作。您的连接字符串需要以“mysql+mysqlconnector://...”开头。在我更改了我的连接字符串之后，一切（嗯，简单的事情）都开始工作了。

MySQL 连接器文档可以在这里找到：[https ://dev.mysql.com/doc/connector-python/en/](https://dev.mysql.com/doc/connector-python/en/)

包在 PyPi 上：[https ://pypi.org/project/mysql-connector-python/](https://pypi.org/project/mysql-connector-python/)

以下是有关使用 Python 连接器的 SQLAlchemy 文档：http: [//docs.sqlalchemy.org/en/latest/dialects/mysql.html#module-sqlalchemy.dialects.mysql.mysqlconnector](http://docs.sqlalchemy.org/en/latest/dialects/mysql.html#module-sqlalchemy.dialects.mysql.mysqlconnector)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-08-02T20:57:24.550

对于到达这里的其他人，应该这样做：

*   pip install mysql-connector==2.1.4 #版本避免Protobuf错误
*   URI = 'mysql+mysqlconnector://$USER:$PASS@$HOST/$DB'

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-15T02:13:49.707

我按照@Brad Campbell 的建议尝试了 Oracle 的连接，但不幸的是它*非常*慢，比我在 Python 2 上`MySQL-Python`使用的“真实”连接慢得多。`SQLAlchemy`

在自己检查了 SQLAlchemy 之后，

[http://docs.sqlalchemy.org/en/latest/dialects/mysql.html#module-sqlalchemy.dialects.mysql.mysqldb](http://docs.sqlalchemy.org/en/latest/dialects/mysql.html#module-sqlalchemy.dialects.mysql.mysqldb)

要`MySQL-Python`在 Python 3 上使用，他们推荐它的一个分支`mysqlclient`，

[https://github.com/PyMySQL/mysqlclient-python](https://github.com/PyMySQL/mysqlclient-python)

它可以通过 pip with 获得`pip install mysqlclient`，但几乎可以肯定，您最初需要执行其他步骤来设置它。不过，在那之后，我看到性能又回到了我以前的水平，这比使用 Oracle 的连接器快了大约 5 倍。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-09T04:50:25.937

我已经让 oursql + SQLAlchemy 0.8.1 + Python 3.3 工作了。在 LukeCarrier 的端口的基础上，我修改了 oursql.c 以使用正确的导入级别，并且成功了！试试这个，并确保遵循自述文件：

[https://github.com/clintron/py3k-oursql](https://github.com/clintron/py3k-oursql)

您可能还需要拥有最新版本的 Cython。

# matlab - 如何避免 Matlab 中的嵌套 for 循环？

> ID：14164185
> 
> 赞同：2
> 
> 时间：2013-01-04T20:10:13.623
> 
> 标签：matlab, loops, for-loop, vectorization

如果我有 ：

```
for i=1:n
    for j=1:m
        if outputImg(i,j) < thresholdLow
            outputImg(i,j) = 0;
        elseif outputImg(i,j)> thresholdHigh
            outputImg(i,j) = 1;
        end
    end
end 
```

甚至更糟：

```
for i=1:n
    for j=1:m
        for k=1:q
                % do something  
        end
    end
end 
```

如果没有 ，我怎样才能以不同的方式实现这一目标`for`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T20:25:27.397

您可以使用逻辑条件代替第一个循环，例如：

```
 outputImg(outputImg<thresholdLow)=0;
 outputImg(outputImg>thresholdHigh)=1; 
```

当然，还有许多其他等效的方法可以使用逻辑运算符来实现...

对于第二个循环，您需要更具体，但我认为您掌握了逻辑条件技巧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T20:31:58.823

如果使用二进制矩阵：

```
index_matrix = (outputImg < thresholdLow); 
```

以下持有：

```
index_matrix(i,j) == 0 iff outputImg(i,j) < thresholdLow
index_matrix(i,j) == 1 iff outputImg(i,j) > thresholdLow 
```

[也可以看看](http://www.mathworks.in/matlabcentral/answers/12022)

对于第二个循环，您始终可以在 for 循环上使用 matirx

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T20:33:39.910

对于一般解决方案，请查看`ndgrid`在第二种情况下您可以像这样使用哪种：

```
[i j k] = ndgrid(1:n, 1:m, 1:q);
ijk = [i(:) j(:) k(:)]; 
```

然后，您可以遍历、 和的组合列表`i`，即现在参数化您的阈值语句。`j``k``ijk`

# java - 使用 FOP 1.1 和 Java 时，图像不会显示在 PDF 中

> ID：14164186
> 
> 赞同：1
> 
> 时间：2013-01-04T20:10:16.330
> 
> 标签：java, apache-fop

我已经通过谷歌搜索了一遍又一遍，似乎无法找到解决我问题的方法......

我正在使用 Apache FOP 1.1 和 Java 从 Java 类生成 PDF 文件。这个 Java 项目从一个 JAR 文件运行。我正在使用 JAR 本身外部的图像。用于生成 PDF 的 XSL 文件包含以下内容：

```
<fo:external-graphic src="file:///C:/images/image.jpg" width="7.5in" /> 
```

基于大量搜索/阅读，我尝试了 src 属性的许多不同变体：

```
src="file:///C:/images/image.jpg"
src="C:/images/image.jpg"
src="url('file:///C:/images/image.jpg')"
src="url('C:/images/image.jpg')" 
```

都没有成功...

现在，这是令人困惑的部分。我正在从 Eclipse IDE 进行开发，并且在使用 src 属性的变体时：

```
src="C:/images/image.jpg"
src="url('C:/images/image.jpg')" 
```

PDF 已正确创建并嵌入了图像。

从 JAR 文件运行时，我无法弄清楚是什么阻止了图像的显示...

提前致谢！（希望）

德文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T18:20:56.690

我知道这是一个旧线程，但我遇到了类似的问题，最终找到了部分修复。这是两件事的组合：

1.  开发环境和已部署环境中的 JVM 之间的区别（对我来说，原始 sun ... err oracle vs. ibm websphere bundled java）
2.  **IBM JVM 不喜欢索引的 PNG 文件**。一旦我将它转换为 RGB，它就可以工作了。

这是我使用 websphere jvm 手动运行 fop.bat 文件时收到的错误消息：

```
SEVERE: Image not available. URI: /tmp/image.png. Reason: org.apache.xmlgraphics.image.loader.ImageException: I/O error while extracting image metadata: Error reading PNG metadata (See position 30:182) 
```

顺便说一句，我使用的是 fop 1.0 + java 1.6 + WAS 7.0 (java 1.6)

希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T08:10:29.957

语法

```
<fo:external-graphic src="url('C:/images/image.jpg')" content-height="100%" content-width="100%"/> 
```

无论是来自 Eclipse 还是来自 JAR，对我来说都非常适合。找出问题所在了吗？

# vb.net - 带有文本和复选框的 Winform 绑定到具有数据导航器的绑定源添加记录问题

> ID：14164187
> 
> 赞同：0
> 
> 时间：2013-01-04T20:10:18.157
> 
> 标签：vb.net, winforms, checkbox, bindingsource

我对使用 BindingSources 和 DataNavigators（以及 VB .NET）进行编程有点陌生，所以这是我的问题/问题。

我正在用 VB 2010 编写一个应用程序，用户将在其中更新后端 SQL 2008 R2 服务器中的数据。设计模式下的表单在表单底部有一个 BindingSource、DataSet 以及用于数据和复选框的各种文本框和一个 DataNavigator。

当表单加载时，会加载 DataAdapter，然后加载数据集。（省略连接代码，“text_table”是SQL server中的一个测试表。

```
frmDataAdapter = New SqlClient.SqlDataAdapter(SQL_Query, frmConnection)
frmConnection.Open()
frmDataAdapter.FillSchema(frmDataSet, SchemaType.Source, "test_table")
frmDataAdapter.Fill(frmDataSet, "test_table") 
```

我将 BindingSource 绑定到 DataSet 和 DataNavigator ...

```
With frmBindingSource
   .DataMember = "test_table"
   .DataSource = frmDataSet
End With
frmBindingNavigator.BindingSource = frmBindingSource 
```

我将文本框和复选框绑定到 BindingSource ...

```
With Me
    .Date_Logged.DataBindings.Add("Text",frmBindingSource, "DateLogged", True, DataSourceUpdateMode.OnValidation, vbNullString, "MM/dd/yyyy")
    .Prepared_By.DataBindings.Add("Text", frmBindingSource, "PreparedBy", False, DataSourceUpdateMode.OnValidation, vbNullString)
    .Issue_Placement.DataBindings.Add("Text", frmBindingSource, "IssuePlacement", False, DataSourceUpdateMode.OnValidation, vbNullString)
    .Completed.DataBindings.Add("Checked", frmBindingSource, "Completed", False, DataSourceUpdateMode.OnValidation, False)
End With 
```

问题是，虽然“已完成”复选框绑定到“frmBindingSource”，但如果我按下 BindingNavigator 上的添加记录按钮，所有其他控件（文本框）都不会清除，因此用户可以输入新数据，但是随着 DataNavigator 中的计数增加，确实会创建一条新记录。（那时我通常会阻止程序实际将任何内容保存到表中。）

如果我删除“已完成”复选框的绑定，然后再试一次，当我按下添加记录按钮时，其他文本框会按应有的方式清除。将“已完成”复选框绑定放回原处，它就会停止工作。

SQL 服务器中的“已完成”字段是“位”，默认值为“0”，因此所有数据都有有效条目，“已完成”字段中没有任何内容为 NULL。我试过以各种方式绑定“已完成”复选框，但总是遇到同样的问题。

目前没有验证代码或任何其他真实事件，因为这是在项目开始时，但这有点烦人，因为我需要使用复选框。

有人知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:27:18.707

在整个周末都在研究这个之后，我有了解决方案。

我在测试期间能够确定的是，如果您使用带有 BindingNavigator 的复选框的表单，BindingNavigator 想要查看复选框的“CheckState”，而不仅仅是“Check”状态。

这里的问题是，如果您绑定到“CheckState”并且您的字段是布尔值，您将收到一个错误，因此您必须将格式标志翻转为“True”并将“nullValue”设置为“CheckState.Unchecked”。

所以我的复选框绑定现在..

```
Me.Completed.DataBindings.Add("CheckState", frmBindingSource, "Completed", True, DataSourceUpdateMode.OnValidation, CheckState.Unchecked) 
```

使用上述解决问题。

# iphone - 故事板+模态搜索+记忆

> ID：14164190
> 
> 赞同：2
> 
> 时间：2013-01-04T20:10:35.713
> 
> 标签：iphone, objective-c, ios, xcode, ios6

我有一个带有 6 个视图控制器及其各自视图的故事板。我**没有**与这 6 个视图控制器关联的任何导航控制器。

从一个视图控制器到另一个视图控制器，滑动手势识别器与模态segue一起使用。所有视图控制器都有 aleast 1，有时甚至有两个基于滑动手势的模态 segues 到其他视图控制器。

我的问题是，我需要担心内存吗？当我滑动这些视图控制器时，这些视图控制器是否会无限地添加到内存中，最终导致应用程序崩溃？

一个例子可以是：假设我在第一个 VC 中，我向右滑动到第二个 VC，然后再次向右滑动到第三个 VC，然后向左滑动两次以返回到第一个 VC 内存中是否包含以下内容：

内存：第一个 VC，第二个 VC，第三个 VC，第二个 VC 的另一个副本，第一个 VC 的另一个副本？

我知道这似乎是一个愚蠢的问题，但由于我几天前才开始编程，我非常担心我会遇到内存问题。

我会很感激你的想法和任何可能有用的链接到讨论这个问题的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:43:45.017

您有一个很好的问题，这取决于您如何创建和关闭视图控制器。通常，您提到的设计将使用 UINavigationController 或 UIPageViewController 等内置控制器构建，或者可能使用滚动视图。

如果您正在“呈现”新的视图控制器，那么您需要关闭以删除它们。如果您不解雇，那么您的视图控制器将继续存在。

如果您使用 segue，请记住每个 segue 创建一个新实例。

如果您的逻辑通常说-向右滑动：新的模态转场，向左滑动：关闭，那么您将在进行时进行清理。如果每次向右滑动都可以创建一个新实例，则此方法有效。

如果您需要六个视图控制器一直保留在内存中，您可能需要考虑使用 pageViewController 或滚动您自己的解决方案。我已经看到了一些不错的解决方案，例如您使用滚动视图描述的。

如果你想使用滚动视图，基本上你会创建一个数组，用视图控制器的六个实例加载数组，然后加载滚动视图以进行水平滚动。为左/右滑动添加手势识别器和逻辑，您就有了一个不错的水平页面滚动条。

这是一个非常好的参考和教程，似乎可以解决您所描述的解决方案。[http://www.wannabegeek.com/?p=168](http://www.wannabegeek.com/?p=168)

祝你好运，新年快乐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:15:21.477

只要您不保留对视图（或其子视图，如按钮...）的强引用，它们就会在需要时被释放。

# drupal - 使用 Drupal 7 提要模块从 RSS 提要中提取图像 URL

> ID：14164194
> 
> 赞同：0
> 
> 时间：2013-01-04T20:11:11.420
> 
> 标签：drupal

我正在使用[Drupal 7 提要](http://drupal.org/project/feeds)模块提取 RSS 提要，并包含在描述字段中，提要的内容是图像。我想在导入 RSS 提要期间即时提取这些内容，以便我可以使用 Drupal 中的原生图像。是否有可以执行此操作的 Feed 子模块？

我认为[Feeds Tamper](http://drupal.org/node/1246578)可能具有执行此操作的功能，但我看不到任何相关内容。

我可以在 Yahoo Pipes 中执行此操作，但我宁愿直接通过 Drupal 执行此操作，或者另一种选择可能是在导入后批处理节点以获取图像 URL 并将其保存到 Image 字段。

谢谢

李

# string - 我的 strcat 没有返回值？

> ID：14164197
> 
> 赞同：-2
> 
> 时间：2013-01-04T20:11:19.550
> 
> 标签：string, function, char, strcat

我编写了一个 strcat 函数。但是我的函数没有以这种方式运行 -----> char * mystrcat(char *s,char *t)。我想返回一个指针。你能帮助我吗？

```
#include <stdio.h>

void mystrcat(char *s,char *t)
{
    while(*s!='\0')
        s++;
        s--;
    while((*(s+1)=*t)!='\0')
    {   s++;
        t++;
    }
}

int main()
{

    char str[30], str1[30];
   gets(str);
   gets(str1);
   mystrcat(str, str1);
    printf("%s\n",str);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:14:39.340

您的函数没有**返回**值。如果你想从它返回一个指针，那么只需返回它。而且**void**也不正确

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:41:19.060

当您写作时，`void mystrcat(char *s,char *t)`您是在使用 void 说“我不会有返回值”。如果你想返回一个指针，这不能是`void`.

要返回指向字符串的指针，请使用`char**`.

您的字符串（一系列字符）表示为`char*`.

这是使用您的代码的示例。

```
#include <stdio.h>

char** mystrcat(char *s,char *t)
{
    char *sOrig = s;
    while(*s!='\0'){
        s++;
    }
    s--;

    while( ( *(s+1) = *t) != '\0')
    {
        s++;
        t++;
    }
    return &sOrig;
}

int main()
{
   char str[30], str1[30];
   gets(str);
   gets(str1);
   char** concatValuePointer = mystrcat(str, str1);
   printf("Pointer is %p\n",concatValuePointer);
   return 0;
} 
```

# matlab - 半圆柱线相交，matlab

> ID：14164199
> 
> 赞同：0
> 
> 时间：2013-01-04T20:11:25.300
> 
> 标签：matlab, geometry

我有以下几点制作半圆柱。

```
p1 = [7.9463,-1.0200,-9.7586];  % start points(boundary)
pS = [9.1163,-1.0200,-9.5886];  % start points (middle)
p2 = [10.2863,-1.0200,-9.7586]; % start points(boundary)

p3 = [7.9463,-1.78,-9.7586]; % End points(boundary)
pE = [9.1163,-1.78,-9.5886]; % End points (middle)
p4 = [10.2863,-1.78,-9.7586]; % End points (boundary)

r=1.17

and line 
line_=[8,-1,-8,9,-8,-10]; %[P0,P1]; 
```

%%%%%%% 部分采用的代码来自

[在此处输入链接描述](http://www.mathworks.de/matlabcentral/fileexchange/24484-geom3d/content/geom3d/geom3d/intersectLineCylinder.m)

```
% Starting point of the line
l0 = line_(1:3)';

% Direction vector of the line
dl = line_(4:6)'-line_(1:3)'; 
```

% 气缸起始位置

```
c0 = pS; 
```

% 圆柱体的方向矢量

直流 = pE - PS;

% 圆柱半径

r =1.17；

% 计算判别式

增量 = B^2 - 4*A*C；

% 检查解决方案是否存在

如果 delta<0 点 = zeros(0, 3); 返回; 结尾

![在此处输入图像描述](../Images/fd50262d5fe6fdbb4fdebd52f739b6cc.png)

我怎样才能得到线和半圆柱的交点。

我正在寻找我的问题的 matlab 代码。或链接

应该是什么

> % 二阶方程的系数
> 
> A = ?????????? B = ????????? C = ??????????

请提供任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:32:34.853

从matlab中抽象出来，看起来很容易找到任何半圆柱与任何线段的交点......

线段可以参数化为

x_L = x_L0+(x_L1-x_L0)*t，其中 t 在 0 和 1 之间变化，x_L0 和 x_L1 - 端点（y、z 相同）。

半圆柱体可以用两个参数进行参数化：

z=z0+(z1-z0)*u, u 在 0 和 1 之间变化 (x-x0)^2+(y-y0)^2 = r^2, y>0 (x0,y0 - 半圆的中心, z0,z1 - 范围，假设圆位于 x,y 平面）

将 x 和 y 代入半圆方程得到 t 的平方方程： (x_L0+(x_L1-x_L0)*t-x0)^2+(y_L0+(y_L1-y_L0)*t-y0)^2 = r^2 因此：

```
 A = (x_L1-x_L0)^2+(y_L1-y_L0)^2;
    B = 2*(x_L0-x0)*(x_L1-x_L0)+2(y_L0-y0)*(y_L1-y_L0);
    C = (x_L0-x0)^2+(y_L1-y_L0)^2-r^2;
    D = B^2-4*A*C;
    if D <0
    %no solution
    else
    t(1) = (-B+sqrt(D))/2/A;
    t(2) = (-B-sqrt(D))/2/A;
    sol=nan(3,2);
    for i=1:2
    if t(i)>0 &&... 
t(i)<1 &&... 
y_L0+(y_L1-y_L0)*t(i)>0 &&... 
z_L0+(z_L1-z_L0)*t(i)>z0 &&... 
z_L0+(z_L1-z_L0)*t(i)<z1  
%solution is within interval of parametrization and y > 0, and z_intersectio nis between z0 and z1
    sol(1,i)=x_L0+(x_L1-x_L0)*t(i);
    sol(2,i)=y_L0+(y_L1-y_L0)*t(i);
    sol(3,i)=z_L0+(z_L1-z_L0)*t(i);
    end;
    end; 
```

# node.js - 如何将 nodejs 模块安装到 appfog

> ID：14164205
> 
> 赞同：4
> 
> 时间：2013-01-04T20:11:38.787
> 
> 标签：node.js, module, appfog

通常在本地，我使用cmd，命令行使用“npm install testing or connect or etc.”安装任何nodejs模块。但我决定使用appfog作为服务器，我将nodejs添加到appfg上的项目中，但可能我需要一些nodejs模块，如测试、连接、请求等。

问题是我在 appfog 上找不到像 cmd 这样的工具或任何添加 nodejs 模块的方法。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T20:33:13.107

基本上，您只需要在本地环境中安装依赖项，一切都应该没问题。只需在文件中指定所有依赖项`package.json`，运行一个典型的`npm install`.，如果模块正确安装在您的本地环境中，那么它们将在您运行时被推送到 AppFog `af update`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-17T11:15:41.433

您只需在本地机器上开发您的应用程序，并在**json 包**和**Node.JS中的****模块**中包含所有必需的**依赖**项。如果您的应用程序当时在本地机器上正常工作，那么您可以使用命令行界面将所有应用程序数据推送到 AppFog。只需使用命令然后启动应用程序，您将看到一切正常。******`af update <your app name>`******

# php - 如何让 MY_Controller 中的 __construct() 运行？

> ID：14164209
> 
> 赞同：1
> 
> 时间：2013-01-04T20:11:56.640
> 
> 标签：php, codeigniter, constructor, extend

> **可能重复：**
> [Codeigniter 扩展扩展的 MY_Controller](https://stackoverflow.com/questions/4609127/codeigniter-extending-extended-my-controller)

我一直在摆弄这个问题一段时间，现在正处于沮丧之中。我正在使用 MY_Controller 扩展控制器类。

**以下是详细信息：**

*   `__construct()`似乎没有被调用。
*   该文件应位于 application/core 中
*   该文件名为 MY_Controller.php
*   我已`MY_`设置为扩展的前缀（我有其他可以正常工作的扩展）

**这是我的代码：**

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class MY_Controller extends CI_Controller {

    function __construct()
    {
        parent::__construct();
        echo 'TESTING!!!'; // This should print, followed by an ob_start() error
    }

} 
```

我应该得到一个页面，上面写着`TESTING!!!`ob_start() 错误，但页面正常呈现。

**我曾尝试**拆分构造函数类并仅在 MY_Controller 中调用私有函数，但这不起作用。我知道正在调用该文件，因为如果我故意在 MY_Controller.php 中创建一个 php 错误，该页面将出错。在我看来，`__construct()`只是没有运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T20:23:30.047

你能在应用程序/控制器下展示一个你的控制器的例子吗？请注意，应用程序/控制器下的控制器应该扩展 MY_Controller 而不是 CI_Controller - 我认为这是你错过的。

例如，在您的控制器 application/controller/test.php 下。它应该是这样的：

```
class Test extends MY_Controller {        
    public function index()
    {
         echo 'test';
    }
} 
```

# jquery - jQuery setInterval if 语句循环不起作用

> ID：14164214
> 
> 赞同：1
> 
> 时间：2013-01-04T20:12:36.763
> 
> 标签：jquery, if-statement, setinterval

我有一个不起作用的 jquery setInterval 函数。我是 jQuery 的新手，但这似乎应该可以工作，我检查了我的代码以确保它们没有问题。无论如何，如果语句在 jQuery 中不起作用？

```
$(document).ready(function() {
    $varadd = "0";

    var interval = setInterval(timecode, 8000);

    function timecode() {
        $varadd = $varadd + 1;

        if ($varadd == "1"){
            // function 1
        }
        elseif ($varadd == "2"){
            // function 2
        }
        elseif ($varadd == "3"){
            // function 3
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:15:40.173

在 jsfiddle 中快速运行您的代码会发现问题。它`else if`不在`elseif`javascript中。没有任何其他上下文，我至少可以告诉你，事实上，你的代码确实有错误。学习使用（并且喜欢！）javascript 控制台。

# android - Android 在线 API 文档不完整？

> ID：14164216
> 
> 赞同：0
> 
> 时间：2013-01-04T20:12:45.220
> 
> 标签：android, api, documentation

在 Android 在线 API 文档中，许多方法似乎没有记录，例如，

[http://developer.android.com/reference/android/app/ProgressDialog.html#setProgress(int](http://developer.android.com/reference/android/app/ProgressDialog.html#setProgress(int) )

我不认为这是继承方法的问题。

显然情况并非如此，我相信数百万的开发人员会在其他情况下站起来，所以有人可以解释为什么文档不在这里吗？

迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:24:56.477

> 有人可以解释为什么文档不在这里吗？

因为没人写。

欢迎您检查[相关类的源代码，](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/app/ProgressDialog.java)并使用合适的 JavaDocs 为[AOSP 提供补丁以弥补任何差距。](http://source.android.com/source/life-of-a-patch.html)

或者，欢迎您为任何缺少文档的方法提出[问题](http://b.android.com)，特别是那些用法不直观的方法。有一个“开发人员文档”问题模板，可帮助将问题发送给适当的人。

# javascript - 原始 javascript 是否应该在 .js 文件中 - 如何包含？

> ID：14164218
> 
> 赞同：0
> 
> 时间：2013-01-04T20:12:48.657
> 
> 标签：javascript, jquery, include, external

假设我有一个如下页面

```
<html><head></head><body><!--STUFF-->
   <script>
       if(SomeBooleanVariable) {
           $.getScript('js/file.js');
       }
    </script>
 </body></html> 
```

我的 file.js 文件只包含没有包装的原始 jQuery 事件。如下：

```
 $(document).on("eventHere", "classHere", function(e) {
   //Stuff
 });

 $(document).on("eventHere", "classHere", function(e) {
   //Stuff
 }); 
```

这根本行不通。当我将 file.js 的内容直接包含到 HTML 中时，它可以正常工作，但是 JS 似乎没有正确包含。我试过把“alert(3);” 在 file.js 的顶部，但它不会触发。我尝试了以下方法：

```
 $("head").append("<script src=\"js/file.js\" />");
 $(document).append("<script src=\"js/file.js\" />");
 -and-
 document.write("<script src=\"js/file.js\" />"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:21:54.587

如果要动态加载该 .js 文件，请将代码更改为：

```
if(SomeBooleanVariable) {
    $.getScript("ajax/test.js")
    .done(function(script, textStatus) {
        console.log(textStatus);
    })
    .fail(function(jqxhr, settings, exception) {
        console.log("Triggered ajaxError handler.");
    }); 
```

并查看您是否在控制台中收到任何错误

例如，您可能正在使用 mod_rewrite 并且 jQuery 尝试加载相对于您的子页面所在的“文件夹”的脚本。示例：您是 @ [http://www.example.com/link-to-subpage /](http://www.example.com/link-to-subpage/)。在这种情况下，jQuery 将尝试加载[http://www.example.com/link-to-subpage/js/file.js](http://www.example.com/link-to-subpage/js/file.js)，而它驻留在 @ [http://www.example.com/js/file.js](http://www.example.com/js/file.js) . 在这种情况下，请使用绝对路径。所以，而不是：

```
js/file.js 
```

写：

```
/js/file.js 
```

# eclipse - 将方法添加到来自引用库 (JUNG) 的类

> ID：14164220
> 
> 赞同：0
> 
> 时间：2013-01-04T20:13:09.510
> 
> 标签：eclipse, jung, java

我想使用 Eclipse 向 JUNG 库的 Graph 类添加一个方法。我该怎么做？

按照这个答案，我让 JUNG 作为参考库正常工作：[https ://stackoverflow.com/a/5618076/1949665](https://stackoverflow.com/a/5618076/1949665)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:22:32.710

1）您可以访问源：只需添加您的方法

2）您可以扩展类并在我们的扩展类中添加方法

3) 使用实现您的方法的静态方法编写一个 Util 类，而不是简单地使用原始类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T05:14:31.397

您上面的评论暗示您希望能够在图表中找到派系。（在您编辑之前我没有看到原始问题。）

如果是这样，它不需要是 Graph 本身的方法，它只需要接受 Graph 作为参数。Graph 是一种类似于 List 或 Map 的类型，它不应该为您可能想在图上使用的每种算法提供方法。

# java - 基于“纯 Spring”的 servlet 是否具有像基于 CXF 的 WSDL 那样的端点 URL？

> ID：14164222
> 
> 赞同：4
> 
> 时间：2013-01-04T20:13:12.447
> 
> 标签：java, web-services, spring

我有一个使用 Spring 的完美运行的演示服务器/客户端应用程序对（仅！）——不涉及 CXF 或 WSDL。它在 Apache Tomcat 7.0.34 的帮助下运行。

我很想知道是否可以在浏览器上看到它存在的任何痕迹`http://localhost:8080/`（

然后我找到[了这个线程](http://www.java.net/node/701934)，它提供了一种获取端点 URL 的方法：

```
TransportContext tc = TransportContextHolder.getTransportContext();
WebServiceConnection wc = tc.getConnection();
URI uri = wc.getUri(); 
```

我将此添加到我的演示/教程*客户端的*代码中，虽然第一个语句 ( `getTransportContext()`) 没有引发任何异常，但它**返回 null**，因此第二个语句 ( `getConnection()`) 引发 NullPointerException。

为什么？

“纯”基于 Spring 的 servlet 是否缺少端点 URL？

如果没有，我错过了什么？检索服务 URL 的方法是什么？

我知道客户端通过*上下文路径*和*bean id*（在共享*beans.xml*中定义）了解服务器：

```
ClassPathXmlApplicationContext appContext = 
      new ClassPathXmlApplicationContext( new String[] {"/sample/spring/beans.xml" } ); 
```

但是没有与此等效的URL吗？像 WSDL 一样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T06:54:20.460

我同意@GreyBeardedGeek 的评论，Spring web-app（一般是java servlet web-app）上没有端点URL 的概念。

如果您确实需要运行时查找用户用于访问您的应用程序的 URL，您可以使用 ServletRequest / HttpServletRequest 方法，例如 getRemoteAddr()、getRemoteHost()、getURL()、getContextPath() 等。例如：

```
@RequestMapping("/home")
public String home(HttpServletRequest req) {
  String host =  req.getRemoteHost();
  // ...
} 
```

但是请记住，多个 URL 可以指向同一个 tomcat 服务器，例如，如果设置了反向代理/DNS CName。这可能（或不会）为您产生不同的 URL。

# c++ - 为什么存储在地图中时需要默认构造函数？

> ID：14164223
> 
> 赞同：6
> 
> 时间：2013-01-04T20:13:19.810
> 
> 标签：c++, constructor

我收到错误：

```
error: no matching function for call to 'A::A()'
note: candidates are: A::A(const A&)
note:                 A::A(const std::string&, size_t) 
```

由此：

```
#include <map>
#include <string>

using std::map;
using std::string;

class A {
public:
    string path;
    size_t size;
    A (const string& p, size_t s) : path(p), size(s) { }
    A (const A& f) : path(f.path), size(f.size) { }
    A& operator=(const A& rhs) {
        path = rhs.path;
        size = rhs.size;
        return *this;
    }
};

int main(int argc, char **argv)
{
    map<string, A> mymap;

    A a("world", 1);
    mymap["hello"] = a;      // <----- here
    A b(mymap["hello"]);     // <----- and here
} 
```

请告诉我为什么代码需要一个没有参数的构造函数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T20:16:00.467

因为`map`需要*DefaultConstructible*值，因为当使用下标运算符并且找不到键时，它会将其添加到默认构造值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T20:15:51.290

`mymap["hello"]`可以尝试创建 value-initialized `A`，因此需要默认构造函数。

如果您使用类型`T`作为`map`值（并计划通过 访问值`operator[]`），则它必须是可默认构造的 - 即**您需要无参数（默认）构造函数**。`operator[]`如果未找到带有提供的键的值，则在地图上将值初始化映射的值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-02T01:10:41.093

通常，项目值**不需要**默认构造函数。`map`

它在 C++03 中是必需的，但在 C++11 中删除了该要求，它通常不是提出容器范围的要求，而是使用更细粒度的要求方案，要求使用特定的成员函数。

这`map::operator[]`是一个这样的成员函数，因为如果具有键的项目不存在，它将使用给定的键和默认构造的值创建一个项目。

这也是没有: 它可能会修改地图的`const`版本的原因。`map::operator[]`

在 C++11 及更高版本中，您可以使用`at`访问器访问地图中具有给定键的项目`const`，而无需`find`.

由于`map::at`不尝试创建项目，因此它不需要项目类型是默认可构造的。

因此，针对您的问题的一种实用解决方案是使用`map::at`而不是`map::operator[]`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T20:17:09.947

很长时间没有使用 C++，但是如果我没记错的话，如果你没有为类定义构造函数，编译器将为你创建一个无参数的构造函数。一旦您定义了一个带参数的构造函数，编译器就不会为您创建一个无参数的构造函数，因此，您需要创建一个。这增加了 K-ballo 暴露的内容导致您的错误。

# authentication - 使用 ServiceStack 身份验证插件对 SignalR Hub 进行身份验证

> ID：14164224
> 
> 赞同：5
> 
> 时间：2013-01-04T20:13:25.117
> 
> 标签：authentication, signalr, servicestack

我在 Asp.Net 之上创建了一个实现基本身份验证的 ServiceStack 服务。服务路线上一切正常。我能够登录并获得会话 cookie，这些 cookie 在后续调用中得到验证。我正在为这些请求使用 HttpClient 。

我还有一个在同一个 Asp.Net 服务上运行的 SignalR 集线器，但主体未在我的集线器方法上进行身份验证。

基本上我需要的是 ServiceStack 拦截对我的集线器的调用并验证会话 cookie 并填充 Context.User.Identity 并将其标记为已验证。如果我可以进行设置，我的集线器上的一个简单的 [Authorize] 属性将完成剩下的工作。

这是我的代码示例：

```
// set up a HttpClient with a cookie container to hold the session cookie
var cookieJar = new CookieContainer();
var handler = new HttpClientHandler { CookieContainer = cookieJar, UseCookies = true,  UseDefaultCredentials = false };

var client = new HttpClient(handler) { BaseAddress = _baseUri };

client.DefaultRequestHeaders.Authorization =
new AuthenticationHeaderValue("Basic",
    Convert.ToBase64String(Encoding.ASCII.GetBytes(string.Format("{0}:{1}", userName, password))));

// do client login and get response with session cookie...
var response = client.PostAsync(...);

// add the cookies to the SignalR hub connection
var responseCookies = cookieJar.GetCookies(_baseUri);
var cookieContainer = new CookieContainer();
foreach (Cookie cookie in responseCookies)
{
   cookieContainer.Add(cookie);
}
_hubConnection = new HubConnection(_baseUri.ToString()) { CookieContainer = cookieContainer }; 
```

完成此设置后，我的会话 cookie 会在每次调用时发送到集线器。不知何故，我需要 ServiceStack 拦截这些请求并设置经过身份验证的用户。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T08:01:01.553

让 ServiceStack 进行身份验证并保持用户会话。然后在需要身份验证的 SignalR 集线器端点中放置以下代码：

```
var cache = AppHostBase.Resolve<ICacheClient>();
var sess = cache.SessionAs<AuthUserSession>();
if (!sess.IsAuthenticated)
    throw new AuthenticationException(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-23T08:38:40.617

Johan 的回答有效，但将这段代码放在每个方法中并不是很方便，如果你把它放在集线器构造函数中，它将在网页刷新中失败，并出现“仅支持通过单例访问的 ASP.NET 请求”异常。

相反，我选择创建一个自定义属性，让您可以更好地控制集线器和方法调用授权。

最简单的属性如下所示：

```
[AttributeUsage(AttributeTargets.Class, Inherited = false)]
public class AuthorizeServiceStack : AuthorizeAttribute
{
    public override bool AuthorizeHubConnection(HubDescriptor hubDescriptor, IRequest request)
    {
        return CheckAuthorization();
    }

    public override bool AuthorizeHubMethodInvocation(IHubIncomingInvokerContext hubIncomingInvokerContext, bool appliesToMethod)
    {
        return CheckAuthorization();
    }

    private static bool CheckAuthorization()
    {
        var cache = AppHostBase.Resolve<ICacheClient>();
        var sess = cache.SessionAs<AuthUserSession>();
        return sess.IsAuthenticated;
    }

} 
```

如您所见，代码与 Johan 的答案相同，但它也可以在 Web 中工作，确保在调用 cache.SessionAs 时 HttpContext.Current 不为空

# amazon-web-services - 访问密钥 ID 和秘密访问密钥是否以已知方式相关？

> ID：14164237
> 
> 赞同：1
> 
> 时间：2013-01-04T20:14:10.090
> 
> 标签：amazon-web-services, cryptography, credentials

如果可能，我希望能够验证密钥是否与给定的“访问密钥 ID”匹配。我想也许密钥 ID 是某种密钥的散列，但我没有找到这方面的文档。

**编辑**：经过仔细检查，我想知道访问密钥 ID 是否来自时间戳......

# jquery - jquery动态除法创建

> ID：14164239
> 
> 赞同：2
> 
> 时间：2013-01-04T20:14:20.480
> 
> 标签：jquery

我有以下功能，我的页面中有一个结果 div，我想动态添加新的 div，其中包含一些文本，第一个 .append 有效，div 被创建，但第二个 append 不起作用，没有文本附加到它。谁能告诉我为什么？

```
$.getJSON(docTypeQueryURL + "id=" + doctype, function (data) {
  var div = data.TYPE_ID;
  var resultsDiv='#results';
  var divid = "'#" + div + "'";
  $(resultsDiv).append("<div id='" + div + "'><strong>" + div + "</strong></div>");
  $(divid).append("<p>" + xyzz + "</p>");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:16:11.977

假设`xyzz`和`data.TYPE_ID`已定义且正确，则必须替换

```
var divid = "'#" + div + "'"; 
```

和

```
var divid = "#" + div; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:21:32.573

你`divid`有一个额外的`single quote`。去掉它

```
var divid = "#" + div; 
```

此外，您不必将# 与您的除数一起使用。就像我们在 jQuery 中看到的那样，您似乎正在使用它。请参阅更新的代码。仅在编写选择器时才需要

```
$.getJSON(docTypeQueryURL + "id=" + doctype, function (data) {
  var div = data.TYPE_ID;
  var resultsDiv='#results';
  var divid = div;
  $(resultsDiv).append("<div id='" + div + "'><strong>" + div + "</strong></div>");
  $(divid).append("<p>" + xyzz + "</p>");
}); 
```

# ruby-on-rails - Find_or_initialize_by 问题

> ID：14164247
> 
> 赞同：0
> 
> 时间：2013-01-04T20:14:50.993
> 
> 标签：ruby-on-rails, postgresql, activerecord

我有一个名为 TradeDailyAverage 的模型的数据库表。它有一个`date`(DateTime) & `averageprice`(decimal) 列

当我运行它时，我无法更新 averageprice 属性：

```
 newaverage = TradeDailyAverage.find_or_initialize_by_date(date)
      newaverage.update_attributes :averageprice => dailyaverage 
```

此外，当我运行它时，日期会显示出来，但平均价格不会显示在 rails 控制台中。它只显示为空白：

```
newaverage = TradeDailyAverage.find_or_initialize_by_date(date)
          puts newaverage.averageprice
          puts newaverage.date 
```

在保存之前，我需要对平均价格做些什么特别的事情吗？

**以下是整个 Rake 任务供您参考：**

```
averages = Trade.where('date >= ?', 7.days.ago).average(:price, :group => "DATE_TRUNC('day', date - INTERVAL '1 hour')")

    # Loops through each daily average produced above 
    averages.each do |date, avg|

    # Converts the BigDecimal to Floating Point(?)
    averagefloat = avg.to_f

    # Rounds the Daily Average to only two decimal points
    dailyaverage = number_with_precision(averagefloat, :precision => 2)

      newaverage = TradeDailyAverage.find_or_initialize_by_date(date)
      newaverage.update_attributes :averageprice => dailyaverage 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T10:56:54.280

如果你想使用`find_or_initialize_by`你需要仔细考虑它的含义。让我们举第一个例子：

```
 newaverage = TradeDailyAverage.find_or_initialize_by_date(date)
  newaverage.update_attributes :averageprice => dailyaverage 
```

`TradeDailyAverage`当给定`date`的已经在数据库中时，这应该可以工作。但是，当您获得新记录时，它不应该起作用。原因很简单，因为新记录没有持久化到数据库中。无法`update_attributes`更新非持久记录。您在这里有两个选择：

1.）不要使用`update_attributes`但分配值并调用`save`。这适用于新的和创建的记录：

```
 newaverage = TradeDailyAverage.find_or_initialize_by_date(date)
  newaverage.averageprice = dailyaverage
  newaverage.save 
```

2.) 不要使用`find_or_initialize_by`but `find_or_create_by`。这样，如果记录不存在，则直接将新记录写入数据库。现在`update_attributes`应该可以工作了，因为您总是可以取回持久记录。请注意，这种方法的缺点是您在没有`averageprice`数据库的情况下保存记录。我不建议这样做。

上面的解释也应该解释你的第二个例子：

```
newaverage = TradeDailyAverage.find_or_initialize_by_date(date)
puts newaverage.averageprice
puts newaverage.date 
```

这应该输出`averageprice`持久记录的和日期。如果你得到一个新初始化的记录，它只会显示日期。由于您仅使用日期对象初始化记录，因此无法`averageprice`设置 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T18:36:31.797

我的问题很简单，在保存到我的数据库后，PostgreSQL 正在更改每小时时间，可能是由于时区问题。因此，我上面的所有实例都是新的，我无法更新现有模型的属性。因此，我将 datetime 数据转换为日期，将 date db 列更改为 date 而不是 datetime，现在一切正常。Yves 在上面提供了一些很棒的信息，但后来对我有所帮助。

# jquery - JQuery-UI 滑块 - 将数值存储到 MySQL 但向用户显示字符串值

> ID：14164250
> 
> 赞同：1
> 
> 时间：2013-01-04T20:15:02.020
> 
> 标签：jquery, mysql, jquery-ui, slider, jquery-ui-slider

我正在使用 jquery-ui 滑块创建从强烈不同意到强烈同意的连续比例（示例 - [http://enscholar.com/slider/](http://enscholar.com/slider/)）。我创建了一个对象来保存我想要显示的不同字符串值，但我想将数值存储到数据库中 - 而不是字符串。

这是我到目前为止所拥有的：

```
var p = {
            0: "Strongly Disagree",
    5: "Strongly Disagree",
    10: "Strongly Disagree",
    15: "Strongly Disagree",
    20: "Strongly Disagree",
            25: "Disagree",
    30: "Disagree",
    35: "Disagree",
    40: "Disagree",
    45: "Neutral",
            50: "Neutral",
    55: "Neutral",
    60: "Neutral",
            65: "Agree",
    70: "Agree",
    75: "Agree",
    80: "Agree",
            85: "Strongly Agree",
    90: "Strongly Agree",
    95: "Strongly Agree",
    100: "Strongly Agree"
         };

        $( ".slider" ).slider({
            animate:true,
            range: "min",
            value:50,
            min: 0,
            max: 100,
            step: 5,
            slide: function( event, ui ) {
                $( "#slider-result" ).val(p[ui.value]);
            }
        });
        $("#slider-result").val(p[$(".slider").slider("value")]);

        $( ".slider-2" ).slider({
            animate:true,
            range: "min",
            value:50,
            min: 0,
            max: 100,
            step: 5,
            slide: function( event, ui ) {
                $( "#slider-result-2" ).val(p[ui.value]);
            }
        });
        $("#slider-result-2").val(p[$(".slider-2").slider("value")]);
    }); 
```

从那里我只是收集输入中的值 - 我觉得这是问题所在，但我不知道从哪里开始。

```
<input type="text" id="slider-result" name="career" readonly/> 
```

关于如何向用户显示字符串但将数值存储到数据库的任何想法？

很感谢任何形式的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:25:00.903

根据输入到滑块中的值，我使用 if 语句将范围链接到特定的#message：

```
$(function() {
            $( ".slider" ).slider({
                animate:true,
                range: "min",
                value:0,
                min: 0,
                max: 100,
                step: 1,
                slide: function( event, ui ) {
                $( "#slider-result" ).val(ui.value);
                    if (ui.value >= 0 && ui.value < 20) {
                        $("#message").text("I could care less.");
                    } else if (ui.value >= 20 && ui.value < 40) {
                        $("#message").text("Loving what you do is overrated...");
                    } else if (ui.value >= 40 && ui.value < 60) {
                        $("#message").text("I guess it might be...");
                    } else if (ui.value >= 60 && ui.value < 80) {
                        $("#message").text("I want to love what I do.");
                    } else {
                        $("#message").text("I NEED to love my career!");
                    }
                }
            }); 
```

然后在显示滑块时，您可以调用 id="message" 来显示字符串：

```
<div id="sliders">
      <form method="post" action="results.php">
          How important is it that you find a career that you love and are good at?
          <input type="hidden" id="slider-result" name="career" readonly/>
          <div class="slider"></div>
          <p id="message"><img src="images/slide.png" /></p>
       </form>
 </div> 
```

# sublimetext2 - 如何在 sublime2 中禁用多个游标？

> ID：14164259
> 
> 赞同：10
> 
> 时间：2013-01-04T20:15:25.470
> 
> 标签：sublimetext2

如何禁用 Sublime text 2 中的多光标功能？我用谷歌搜索，但只找到有关如何使用它的视频，而不是如何不使用它的视频。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T08:32:46.277

如果您有多个光标，只需按 ESC 即可返回单个光标。

* * *

@starwed - 你是怎么不小心启用它的？

*   打开您的首选项/键盘映射和
*   搜索`split_selection_into_lines`,`find_under_expand`和`find_under_expand_skip`（这些是启用多个游标的主要方法）
*   然后分配一个您不太可能意外按下的组合键。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T20:39:22.103

在你的配置`Preferences -> Settings - User`添加行`"multi_select": false`
最后你的配置应该看起来像这样：

```
{
    "color_scheme": "Packages/Color Scheme - Default/railscasts.tmTheme",
    "detect_indentation": false,
    "font_face": "Droid Sans Mono",
    "font_size": 14,
    "ignored_packages":
    [
        "Vintage"
    ],
    "scroll_past_end": false,
    "tab_size": 2,
  "run_on_save": true,
  "save_on_focus_lost": true,
    "translate_tabs_to_spaces": true,
    "trim_trailing_white_space_on_save": true,
  "word_wrap": true,
    "multi_select": false
} 
```

我正在寻找如何自己禁用该功能......什么也没找到，只是想玩弄配置......在linux上它有效！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-05T13:45:33.857

根据 [崇高论坛上的这个链接](http://www.sublimetext.com/forum/viewtopic.php?f=3&t=13518)，你不能直接但你可以禁用触发它的键。

ctrl-shift-l（即 el）和 ctrl-左键单击

要禁用 ctrl-shift-l 我不知道是否可以在用户文件中（用户目录中的 keymap/bindings 文件），但您可以在默认绑定文件中（默认目录中的 keymap/bindings 文件） .. 删除该行或重写它，例如添加 +u 首选项..packages

`C:\Users\user\AppData\Roaming\Sublime Text 2\Packages\Default\Default (Windows).sublime-keymap`

更改此行添加一个 +u，使其由 ctrl+shift+l+u 而不是 ctrl+shift+l 触发。我怀疑你会不小心做 ctrl+shift+l+u ，或者至少不会像你不小心做 ctrl+shift+l 那样频繁！

```
{ "keys": ["ctrl+shift+l+u"], "command": "split_selection_into_lines" }, 
```

另外，要禁用 ctrl-left 单击，该链接建议这样做，我尝试了它并且它有效。（虽然我喜欢这个功能和绑定！）

首选项..浏览包..用户 `C:\Users\user\AppData\Roaming\Sublime Text 2\Packages\user`

在那里创建这个文件，格式为`Default (<your OS>).sublime-mousemap` Default (Windows).sublime-mousemap

它对应于默认目录下的同名文件。但在用户目录中并优先，覆盖默认目录一中的设置。

（用户目录中的设置优先并覆盖默认目录中的设置 `C:\Users\user\AppData\Roaming\Sublime Text 2\Packages\Default (Windows).sublime-mousemap`）

所以，在 `C:\Users\user\AppData\Roaming\Sublime Text 2\Packages\user\Default (Windows).sublime-mousemap`

粘贴

```
[
    {
        "button": "button1", "count": 1, "modifiers": ["ctrl"],
        "press_command": "drag_select"
    }
] 
```

禁用多选的 ctrl-左键单击触发器。

注意-我使用 ctrl 和左键单击，不记得我是否意外触发了它，但是当您按 ctrl 时，您的拇指有时会触摸触摸板（左键单击）。

# html - 粘性页脚边距问题

> ID：14164267
> 
> 赞同：1
> 
> 时间：2013-01-04T20:15:43.410
> 
> 标签：html, css

我正在玩[CSS Sticky Footer](http://ryanfait.com/sticky-footer/) ，但我遇到了一个问题......

```
* { margin: 0; } 
```

虽然它旨在重置所有 DIV 边距，但这不是我想要做的。每页上的文字都被压扁了，现在没有边距了。

我已经尝试在我想要的每个元素上定义它，但没有成功，即..

```
div.wrapper, div.push, div.footer { margin: 0; } 
```

我怎样才能绕过它，所以只有粘性页脚的必要元素的边距为 0，其余的保持不变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:22:40.837

删除 * CSS 并将 HTML 更改为：

```
html, body {
    height: 100%;
    margin: 0;
}

.footer * {
    margin: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T20:40:40.520

我不明白.. 为什么要使用粘性页脚。尝试创建一个像这样的 css 表结构。人们低估了 CSS 表格！他们在创造流体设计方面可能很棒..

```
#wrapper { display: table; height: 100%; width: 1000px; }
#wrapper > header, #wrapper > footer { display: table-row; min-height: 100px; }
#main { height: 100%; } 

<div id="wrapper">
  <header>
    <h1>I'm a header!</h1>
  </header>
  <div id="main">

  </div>
  <footer>
    <p>I'm a footer!</p>
  </footer>
</div> 
```

在这个 CSS 示例中，其他元素都不会受到影响，页脚和页眉都保持它们的高度，而中间部分是流体填充剩余空间。

还可以看看 table-cell .. 它允许水平结构，例如带有流体主要部分的实心左侧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T20:27:08.190

此外，要更正字体中的文本，您可以编辑此 CSS：

```
font: 0.8em helvetica,arial,sans-serif; 
```

style.css 的第 50 行

```
.footer p {
position: absolute;
left: 0;
bottom: 4px;
width: 700px;
padding: 0;
color: white;
font: 0.8em helvetica,arial,sans-serif;
text-align: center;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T20:34:52.327

如果它很容易创建，为什么要使用预制的粘性页脚？尝试：

```
<footer><span>Footer Content</span></footer> 
```

使用以下 CSS：

```
footer{    
    position:fixed;
    bottom:0px;
    height:30px;
    width: 100%;
    z-index: 9999;
    color: #595959;
    font-size: 9pt;
    text-align: center;
} 
```

# jquery - 使用异步 ajax 时从不同模型中剔除传递信息

> ID：14164270
> 
> 赞同：0
> 
> 时间：2013-01-04T20:15:50.180
> 
> 标签：jquery, ajax, knockout.js, knockout-2.0

```
function UserInformation(data) {
    var self = this;
    this.AddressDetails = ko.observable(data.AddressDetails)
    // Client Details is array of ClientDetailInfo
    this.ClientDetails = ko.observableArray(data.ClientDetails);
    this.UserID = ko.observable(data.UserID);
}
function ClientDetailInfo(data) {
  this.Name = ko.observable(data.Name);
  this.Value = ko.observable(data.Value);
}
function InputFieldInfo(data) {
  this.DatabaseName = ko.observable(data.DatabaseName);
  this.Value = ko.observable(data.Value);
  // collab list gets filled when a user adds collaborators from the ui
  this.DatabaseName.CollabList = ko.observableArray([]);
}
function ViewModel() {
  var self = this;
  this.Name = ko.observable("");
  this.InputFields = ko.observable([]);

  //ajax request that maps data to InputFields

  //ajax request that maps data to User

} 
```

我想从名为 ClientDetails 的 observableArray 中的索引中获取信息，其中名称为“Perm_Collabs”，并将该值传递给 InputFields 中名为 CollabList 的 ObservableArray，其中 DatabaseName 为“Collaberators”。现在我有这个在 chrome 中工作，其他浏览器的运行速度和看起来一样快我可能在尝试将数据放在不存在的字段中时遇到问题，因为信息来自 ajax，因此当前是异步的。因此，我尝试通过订阅来做到这一点，该订阅在 chrome 中运行良好，在其他任何地方都没有。什么是最好的方法。一如既往，如果您需要更多信息，请询问！谢谢卡尔文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:41:46.430

好的，有几件事可以帮助您解决跨浏览器问题。

首先，这条线。

```
this.DatabaseName.CollabList = ko.observableArray([]); 
```

您是否在检查 DatabaseName 是否为`undefined`？其次，您没有得到 DatabaseName 的可观察值，而只是函数。你可能想要这个：

```
this.DatabaseName().CollabList = ko.observableArray([]); 
```

二是手动订阅。有时，特别是在异步加载数据时，您不希望在 Y 完成更新之前更新 X 变量。例如

```
this.myObservableArray = ko.observableArray([]);
this.myObservableArray.subscribe(function(newValueOfMyObservableArray) {
      $.ajax({..., success: function(data) {
         this.mySecondObservableArray(data);
      }})
}, this); 
```

关于从 ClientDetails 获取信息，您只需要执行一个`foreach`，假设您正确连接了所有变量。

```
function transferData(clientDetails, inputFields) {
var localClient = {};
ko.utils.arrayForEach(clientDetails(), function(client) {
    if (client.name === "Perm_Collabs") localClient = client;
});

ko.utils.arrayForEach(inputFields(), function(field) {
    if (field.databaseName === "Collaberators") {
        //Do whatever with localClient
    }
});

// Or if you need to replace in the same index you can skip the second loop
var index = clientDetails.indexOf(localClient); // Or do a forloop and save this step;
inputfields()[index].client = client;
} 
```

# mysql - 如何将texarea中的输入文本格式化为mysql并以相同的方式显示

> ID：14164272
> 
> 赞同：0
> 
> 时间：2013-01-04T20:16:00.600
> 
> 标签：mysql, text, input

您好我正在使用以下代码将数据插入到 mysql 表中：

```
 $sql="INSERT INTO DB (spanish, english)
VALUES
('$_POST[spanish]','$_POST[english]')"; 
```

比这里的输入形式：

```
 <form action="insert.php" method="post">
  <p>bulgarian text:</p>
  <p>
  <textarea type="textarea" cols="45" rows="5" name="bulgarian"></textarea>
  </p>
  <p>
  english text:</p>
  <p>
    <textarea type="textarea" cols="45" rows="5" name="english"></textarea>
</p>
  <p>
    <input type="submit">
  </p>
</form> 
```

这是显示过程：

```
 while($row = mysql_fetch_array($result))
  {

  echo "<td>" . $row['english'] . "</td>";
} 
```

我现在的问题是，一旦我将文本放入数据库中，而一旦我显示它，它就会在没有任何格式的情况下显示。我想知道如何让它以在文本区域中输入的方式显示，包括所有格式和新行

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:20:19.763

放入 a 的任何数据`<textarea>`都是纯文本格式。当您将该数据放入 HTML 格式的页面时，浏览器将[“折叠”](http://www.maproom.co.uk/invis1.htm)空白。

有两种选择：

1.  `<pre>`用and包围你的日期`</pre>`，这样格式就保持不变。
2.  使用[`nl2br`](http://php.net/manual/en/function.nl2br.php)创建（基本）HTML 之类的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:20:36.987

这是一个示例： [http ://www.kavoir.com/2009/06/mysql-php-store-form-textarea-value-to-mysql-database-table.html](http://www.kavoir.com/2009/06/mysql-php-store-form-textarea-value-to-mysql-database-table.html)

只需使用 mysql_real_escape_string

# c++ - 打印一个很长的二进制表示的整数值

> ID：14164274
> 
> 赞同：-1
> 
> 时间：2013-01-04T20:16:08.873
> 
> 标签：c++, visual-c++, c++11

假设您有一个很长的二进制字（>64 位），它表示一个无符号整数值，并且您想打印实际数字。我们说的是 C++，所以假设您从**bool[ ]**或**std::vector<bool>**或**std::bitset**开始，并以**std::string**或某种**std::ostream**结束-无论您喜欢什么解决方案。但请只使用核心语言和 STL。

现在，我怀疑，您必须逐块评估它，以获得一些中间结果，这些结果足够小以存储 - 最好以 10 为底，如 x·10 ^k。我可以想办法从那一刻开始收集这个数字。但由于没有对应以 10 为底的块宽度，我不知道该怎么做。当然，你可以从任何其他块宽度开始，比如 3，得到 x·(2 ³ ) ^k形式的中间体，然后将其转换为以 10 为底，但这会导致 x·10 ^(3· k·lg2)显然有一个浮点指数，这没有任何帮助。

无论如何，我已经厌倦了这种数学废话，我会很感激一个深思熟虑的建议。

此致，
阿明

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:46:18.753

我将假设您已经有某种 bignum 除法/模函数可以使用，因为实现这样的事情是一场彻头彻尾的噩梦。

```
class bignum {
public:
   bignum(unsigned value=0);
   bignum(const bignum& rhs);
   bignum(bignum&& rhs);
   void divide(const bignum& denominator, bignum& out_modulo);
   explicit operator bool();
   explicit operator unsigned();
};

std::ostream& operator<<(std::ostream& out, bignum value) {
   std::string backwards;
   bignum remainder;
   do {
       value.divide(10, remainder);
       backwards.push_back(unsigned(remainder)+'0');
   }while(value);
   std::copy(backwards.rbegin(), backwards.rend(), std::ostream_iterator(out));
   return out; 
} 
```

如果舍入是一种选择，那么将大多数 bignums 转换`double`为也应该是相当简单的，这会快*很多。*即，将 64 个最高有效位复制`unsigned long`到 a ，将其转换为 a `double`，然后乘以 2.0 的有效位数减去 64 的幂。（我说有效位，因为您必须跳过任何前导零）
所以如果您有 150 个有效位，将前 64 位复制到 a 中`unsigned long`，将其转换为 a `double`，然后将其乘以`std::pow(2.0, 150-64)`~ 7.73e+25 以获得结果。如果你只有 40 个有效位，在右边用零填充它仍然有效。将 40 位复制到 a 的 MSB `unsigned long`，将其转换为 a `double`，然后将其乘以`std::pow(2.0, 40-64)`~ 5.96e-8 得到结果！

# 编辑

[Oli Charlesworth 在Double Dabble](http://en.wikipedia.org/wiki/Double_dabble)上发布了一个指向维基百科页面的链接，这将我展示的第一个算法从水中吹了出来。我不觉得很傻吗。

# twitter - Twitter API 1.1 获取 URL 被提及的次数？v. 1 工作正常，找不到 1.1 的等价物

> ID：14164277
> 
> 赞同：1
> 
> 时间：2013-01-04T20:16:18.620
> 
> 标签：twitter

使用 Twitter 的 API v 1，如果我想检索一个 URL 被推文的次数，我只需获取以下内容，它以 JSON 格式返回信息......

[http://urls.api.twitter.com/1/urls/count.json?callback=?&url=google.com](http://urls.api.twitter.com/1/urls/count.json?callback=?&url=google.com)

我正在搜索 1.1 的文档，但似乎找不到等效的文档……是否存在？谢谢！

# unit-testing - 单元测试 - 困惑

> ID：14164281
> 
> 赞同：1
> 
> 时间：2013-01-04T20:16:47.880
> 
> 标签：unit-testing, testing, junit, tdd, phpunit

我正在学习单元测试，并且对测试是什么以及使用它们的边界感到困惑。

所以这个问题的答案很清楚 - [https://stackoverflow.com/a/1257583/445330](https://stackoverflow.com/a/1257583/445330)

对我来说突出的一点是“它与数据库对话”之类的。

在我正在学习的特定系统中，我需要测试 xml 树中的特定节点 - 表示为一个对象。

除了加载这个对象，我如何测试这个值的存在——或者我混淆了单元测试和功能测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:46:51.257

您链接到的答案的要点是

> *单元测试不应依赖于外部资源。*

因此，只要您的 XML 树是以编程方式创建并仅存储在内存中，而不是从文件系统（或任何其他外部资源）加载，那么您就做对了。

以编程方式创建 XML 树可能很麻烦，因此您可以将树作为 XML 文件存储在与测试相同的包中，然后使用

```
this.getClass().getClassLoader().getResourcesAsStream(name); 
```

这不算作外部资源，因为它是从测试套件的类路径加载的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:30:19.770

In my test I made not only one but more and more tests on a particula function, so Unit Test is a part of the possibilities. I select specific case for example in a division i use 0 for both operand, single operand etc, limit of the specific numerical interval, but also normal situation. All test are predictable, so when i change the code the execution of case assure the stability of change made.

In your case i think you are doing a single unit testing.

I accept the wikipedia definition of unit testing and functional testing.

Functional testing is wide and is program oriented. Unit testing is oriented to the minimal part of testable code and should be as much generic as possible.

In your specific case "In my particular system i am learning with, i need to test for particular nodes in a xml tree - represented as an object" if the result of function is the object you should have a well known input string, file , object static defined, and an assertion that the output for specific input is an object that has the particular node, or better extract the return object, extract the particular node and assert that the particular node should be equal to a particular value /object

I hope to be useful

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T20:22:38.053

如果这只是一个单元测试，那么您正在测试读取 xml 树的代码并检查该树是否符合您的期望。您可以通过多种方式加载测试对象。一种方法是让单元测试将对象构造为测试设置的一部分。另一种方法是将 xml 树的测试版本存储在一个平面文件中（与测试类一起），并让测试在测试时解析文件。

关键是测试的输入需要是一个控件，而不是依赖于某些外部资源（如数据库）的状态的东西。

# c++ - id3lib 链接器错误

> ID：14164282
> 
> 赞同：1
> 
> 时间：2013-01-04T20:16:49.770
> 
> 标签：c++

我正在尝试编写一个可以编辑 mp3 标签的程序。而现在，我有一个问题。也就是说，当我编译时，总是有错误。并且错误是链接器错误。以下是错误描述：

```
error LNK2019: unresolved external symbol "__declspec(dllimport) public: __thiscall ID3_Tag::ID3_Tag(char const *)" (__imp_??0ID3_Tag@@QAE@PBD@Z) referenced in function _wmain 

error LNK2019: unresolved external symbol "__declspec(dllimport) public: virtual __thiscall ID3_Tag::~ID3_Tag(void)" (__imp_??1ID3_Tag@@UAE@XZ) referenced in function _wmain 
```

有谁知道怎么做或怎么做？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:20:08.420

您可能没有链接到适当的库，链接器抱怨的符号被导出。

[以下是链接](https://stackoverflow.com/a/12574400/673730)可能在[此存档](http://sourceforge.net/projects/id3lib/files/windows%20binaries/3.8.3/)中找到的库的方法（版本号可能会更改）。

# emacs - 我的 emacs 删除了尾随空格。如何禁用此行为？

> ID：14164292
> 
> 赞同：12
> 
> 时间：2013-01-04T20:17:32.550
> 
> 标签：emacs, whitespace

保存后（我认为），我的 emacs 正在删除尾随空格。我不想提交这些更改，只提交我手动修改的部分。有没有办法禁用这种行为？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-04T20:32:22.190

这种行为不是标准的。然而，这是您可能在某处借用的非常常见的定制。在您的 init 文件中查找类似以下内容并注释掉这些行以摆脱这种行为（并让 Emacs 将文件按原样保存，而不会完全删除空格）：

```
(add-to-list 'write-file-functions 'delete-trailing-whitespace) 
```

或者

```
(add-hook 'before-save-hook 'delete-trailing-whitespace) 
```

* * *

这个[emacswiki 页面](http://www.emacswiki.org/emacs/DeletingWhitespace)提供了大量关于处理尾随空格的建议。

如果您只想在您修改的行上删除尾随空格，您可以尝试使用[ws-trim](ftp://ftp.lysator.liu.se/pub/emacs/ws-trim.el)包

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-26T05:54:24.543

就像在[这个](https://stackoverflow.com/a/14164500/1309352)答案中建议的那样，`deleting-trailing-whitespace`钩子可能已被添加到`before-save-hook`钩子中。

禁用此评估`(remove-hook 'before-save-hook 'delete-trailing-whitespace)`（类型`M-:`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T13:06:16.747

看看[ethan-wspace](https://github.com/glasserc/ethan-wspace)。它会清理你自己弄脏的任何空白。但是，当您打开文件时存在的任何不正确的空格都会保持不变。这样你就可以避免那些充满空白变化的混乱差异

# ios - 未修改的 AppDelegate.m 中的编译错误

> ID：14164293
> 
> 赞同：0
> 
> 时间：2013-01-04T20:17:37.600
> 
> 标签：ios, xcode, parsing, appdelegate

我一直在创建一个简单的示例应用程序来演示在 IOS 中播放声音文件。

为此，我用一个视图控制器创建了一个非常简单的 XCode 项目。但是，尽管我的 AppDelegate.h 和 .m 文件仍未编辑，但我在 AppDelegate.m 中遇到了奇怪的解析问题。

在**@Implimentation**行上，编译器告诉我它缺少'@end'。

在线**-(BOOL) application: (UIApplication *) application didFinishLaunchingWithOptions: (NSDictionary* ) 启动选项**它告诉我 Expected ';' 在方法原型之后。

这些问题似乎源于 AppDelegate.m 文件中的#import "ViewController.h" 引用。当我删除这两个错误时，这两个错误就消失了，并被 Receiver 'ViewController' 取代，因为类消息是一个前向声明，这是我在缺少导入时所期望的。

这是一个奇怪的问题。我之前构建了几个 IOS 应用程序，但从未遇到过这个问题。有关背景信息，该项目是在 XCode 4 中作为单视图应用程序创建的。我已将 ViewController.h 的 IBOutlets 和属性正确排列到界面构建器中的 XIB 中。我还通过**构建阶段 > Link Library with Libraries**功能添加了 AudioToolbox 框架。

这是委托和视图控制器文件文件

**AppDelegate.m**

```
#import "AppDelegate.h"
#import "ViewController.h"

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
    // Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
    // Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    // Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
}

- (void)applicationWillTerminate:(UIApplication *)application
{
    // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
}

@end 
```

**AppDelegate.h**

```
#import <UIKit/UIKit.h>

@class ViewController;

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) ViewController *viewController;

@end 
```

**ViewContoller.m**

```
#import "ViewController.h"
#import <AudioToolbox/AudioToolbox.h>

@interface ViewController ()

SystemSoundID pig;
SystemSoundID cow;
SystemSoundID sheep;
SystemSoundID chicken;
@end

@implementation ViewController

@Synthesize but_cow, but_pig, but_sheep, but_chicken;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    NSString * cowSoundURL= [[NSBundle mainBundle] pathForResource:@"cow" ofType: @"mp3"];
    NSString * pigSoundURL= [[NSBundle mainBundle] pathForResource:@"pig" ofType: @"mp3"];
    NSString * sheepSoundURL= [[NSBundle mainBundle] pathForResource:@"sheep" ofType: @"mp3"];
    NSString * chiickenSoundURL= [[NSBundle mainBundle] pathForResource:@"chicken" ofType: @"mp3"];

    AudioServicesCreateSystemSoundID(cowSoundURL, &cow);
    AudioServicesCreateSystemSoundID(pigSoundURL, &pig);
    AudioServicesCreateSystemSoundID( sheepSoundURL, &sheep);
    AudioServicesCreateSystemSoundID(chickenSoundURL, &chicken);
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

//====================================================
/**
 Called when a button is pressed
 **/
//====================================================
-(IBAction)buttonPressed:(id)sender
{
    if (sender == but_cow)
    {
        AudioServicesPlaySystem(cow);
    }
    else if (sender == but_sheep)
    {
        AudioServicesPlaySystem(sheep);
    }
    else if (sender ==  but_pig)
    {
        AudioServicesPlaySystem(pig);
    }
    else if (sender == but_chicken)
    {
        AudioServicesPlaySystem(chicken);
    }

}//===================================================
@end 
```

**视图控制器.h**

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

@property (nonatomic, retain) IBOutlet UIButton * but_cow;
@property (nonatomic, retain) IBOutlet UIButton * but_pig;
@property (nonatomic, retain) IBOutlet UIButton * but_sheep;
@property (nonatomic, retain) IBOutlet UIButton * but_chicken;

-(IBAction)buttonPressed:(id)sender; 
```

非常感谢您花时间阅读本文。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:18:56.860

ViewController.h 似乎缺少一个`@end`

该行：

```
#import "ViewController.h" 
```

基本上会复制整个文件，所以如果 ViewController.h 中有错误，它也会显示在导入该文件的任何地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T20:22:15.257

你没有`@end`加入`viewcontroller.h`

# javascript - 为什么 jquery 事件委托不起作用？

> ID：14164296
> 
> 赞同：6
> 
> 时间：2013-01-04T20:17:53.187
> 
> 标签：javascript, jquery

我有以下html：

```
 <ul id="contain">
         <li class="active_one"></li>
         <li class="two"></li>
        </ul> 
```

和下面的jQuery：

```
$contain = $('#contain'); //going to use a lot

$contain.on('click','li.two', function(){
                console.log('working');
                //plus do other stuff
                }); 
```

以上不起作用，但是当我将其更改为：

```
$('body').on('click','li.two', function(){
                    console.log('working');
                    //plus do other stuff
                    }); 
```

然后它起作用了，但我知道最好的做法是尽可能靠近我尝试使用的父元素进行钻取，但每次我尝试这样做时，我显然做错了什么，因为我的父级选择器不工作。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-04T20:19:41.437

这意味着它`#contain`本身不是静态元素，你应该选择元素的最近的*静态*父元素。否则 jQuery 不会选择元素并且委托失败。

> 事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上。

但是，如果该元素是静态的，那么您选择元素的时间过早，您应该等待 DOM 准备好。

```
$(document).ready(function(){
   var $contain = $('#contain'); //going to use a lot
   $contain.on('click','li.two', function(){
       console.log('working');
       //plus do other stuff
   });
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-03T08:56:45.810

因此，我将尝试解释 jquery on(change) 的工作原理，

如果你有

`$(document).on('parameter 1','parameter 2', function(){} )`

本质上，jquery 将检查是否执行了中提到的事件`parameter 1`。然后它会检查是否`parameter 2`存在，

如果是，那么它将检查 中提到的事件是否在 中提到`parameter 1`的元素中触发`parameter 2`。因此，您可以在文档更改时阻止 on(change) 事件。

这将通过确保加载的 elem 具有 id 然后将事件单独绑定到该 id 来帮助您绑定动态加载的元素。并且无论何时发生文档事件，都会执行动态事件。

# java - Java并发：与结果不一致

> ID：14164297
> 
> 赞同：-1
> 
> 时间：2013-01-04T20:17:54.683
> 
> 标签：java, multithreading, concurrency, thread-safety

我创建了一个尝试模拟多线程应用程序的测试包。假设有 N 个线程访问共享资源，在这种情况下，该方法将对整数进行增量并检查整数是奇数还是偶数。我想要实现的是当方法结果等于 50 时，正在监视该值的线程应该能够停止所有线程并关闭进程。我希望这能给每个人一个清晰的画面。现在我遇到的问题是结果不时不同，它们不一致。下面是我写的代码。我已经使用了尽可能多的线程安全措施，所以我相信。

```
public class ThreadTestOne {

private static final java.util.concurrent.atomic.AtomicInteger number= new java.util.concurrent.atomic.AtomicInteger(0);
private static boolean stop=false; 
private static String orginaltime=gettime("hh:mm:ss");

static {
    try{

        java.util.concurrent.ExecutorService executor = java.util.concurrent.Executors.newFixedThreadPool(6);
        executor.execute(new MasterThread(executor));
        executor.execute(new Thread(new child1(),"Thread1"));
        executor.execute(new Thread(new child2(),"Thread2"));
        executor.execute(new Thread(new child3(),"Thread3"));
        executor.execute(new Thread(new child4(),"Thread4"));
        executor.execute(new Thread(new child5(),"Thread5"));

    }catch(Exception e){
        e.printStackTrace();
    }
}

private static final class child1 implements java.lang.Runnable{
    public void run(){
        while(stop!=true){
            try{
                getCount(this.getClass().getSimpleName());
                Thread.sleep(0000);
            }catch(java.lang.InterruptedException e){
            }catch(Exception e){
                e.printStackTrace();
            }
        }
    }
}

private static final class child2 implements java.lang.Runnable{
    public void run(){
        while(stop!=true){
            try{
                getCount(this.getClass().getSimpleName());
                Thread.sleep(0000);
            }catch(java.lang.InterruptedException e){
            }catch(Exception e){
                e.printStackTrace();
            }
        }
    }
}

private static final class child3 implements java.lang.Runnable{
    public void run(){
        while(stop!=true){
            try{
                getCount(this.getClass().getSimpleName());
                Thread.sleep(0000);
            }catch(java.lang.InterruptedException e){
            }catch(Exception e){
                e.printStackTrace();
            }
        }
    }
}

private static final class child4 implements java.lang.Runnable{
    public void run(){
        while(stop!=true){
            try{
                getCount(this.getClass().getSimpleName());
                Thread.sleep(0000);
            }catch(java.lang.InterruptedException e){
            }catch(Exception e){
                e.printStackTrace();
            }
        }
    }
}

private static final class child5 implements java.lang.Runnable{
    public void run(){
        while(stop!=true){
            try{
                getCount(this.getClass().getSimpleName());
                Thread.sleep(0000);
            }catch(java.lang.InterruptedException e){
            }catch(Exception e){
                e.printStackTrace();
            }
        }
    }
}

private static final class MasterThread implements java.lang.Runnable{
    private java.util.concurrent.ExecutorService MasterExecutor=null;
    private MasterThread(java.util.concurrent.ExecutorService executor){
        this.MasterExecutor=executor;
    }
    public void run(){
         while(stop!=true){
             if(ThreadTestOne.getCurrNumber()==50){
                 stop=true;
                 MasterExecutor.shutdown();
                 System.out.println("Amount of time taken to execute is " +ThreadTestOne.elapsedTime(orginaltime)+ " seconds");
                 System.exit(0);
             }
         }
    }
}

private static synchronized void getCount(String ThreadName){

    System.out.println(ThreadName+" value is "+incrementgetNumber()+getKind());
}

private static final int incrementgetNumber(){

    return number.incrementAndGet();
}

private static final int getCurrNumber(){

    return number.get();
}

private static final String getKind(){

    return ((getCurrNumber()% 2) == 0) ? " and is an even number." : " and is an odd number.";
}

/*private static final void StartThreads(Thread ... threads){
    for (Thread thread : threads) {
        String ThreadName=thread.getName();
        long ThreadID=thread.getId();
        thread.start();
        System.out.println(ThreadName+" of ThreadID: "+ThreadID+" has been Started");
    }
}

private static final void StopThreads(Thread ... threads){
    for (Thread thread : threads) {
        if(thread!=null){
            String ThreadName=thread.getName();
            long ThreadID=thread.getId();
            System.out.println(ThreadName+" of ThreadID: "+ThreadID+" attempting to stop");
            thread.interrupt();
            System.out.println(ThreadName+" of ThreadID: "+ThreadID+" stopped");
        }
    }
}*/

private static long elapsedTime(String OriginalTime){
    java.text.SimpleDateFormat format = new java.text.SimpleDateFormat("hh:mm:ss");
    long difference = 0;

    try {
         java.util.Date origTime = format.parse(OriginalTime);
         java.util.Date currTime = format.parse(gettime("hh:mm:ss"));
          difference = (currTime.getTime() - origTime.getTime())/1000; 
    } catch (Exception e) {
         e.printStackTrace();
    }
    return difference;
}

private static String gettime(String pattern){
    String timeString="";
    try{
     java.text.SimpleDateFormat format = new java.text.SimpleDateFormat(pattern);
     java.util.Date currentTime = new java.util.Date();
     timeString = format.format(currentTime);
    }
    catch(Exception e){
        e.printStackTrace();
    }
    return timeString;
}

public static void main (String []args){
    new ThreadTestOne();
} 
```

}

我得到的结果如下

**第一次试运行**

```
 child5 value is 1 and is an odd number.
child1 value is 2 and is an even number.
child1 value is 3 and is an odd number.
child1 value is 4 and is an even number.
child5 value is 5 and is an odd number.
child5 value is 6 and is an even number.
child5 value is 7 and is an odd number.
child5 value is 8 and is an even number.
child5 value is 9 and is an odd number.
child5 value is 10 and is an even number.
child5 value is 11 and is an odd number.
child5 value is 12 and is an even number.
child5 value is 13 and is an odd number.
child5 value is 14 and is an even number.
child5 value is 15 and is an odd number.
child5 value is 16 and is an even number.
child5 value is 17 and is an odd number.
child5 value is 18 and is an even number.
child5 value is 19 and is an odd number.
child5 value is 20 and is an even number.
child5 value is 21 and is an odd number.
child5 value is 22 and is an even number.
child5 value is 23 and is an odd number.
child5 value is 24 and is an even number.
child5 value is 25 and is an odd number.
child5 value is 26 and is an even number.
child5 value is 27 and is an odd number.
child5 value is 28 and is an even number.
child5 value is 29 and is an odd number.
child5 value is 30 and is an even number.
child5 value is 31 and is an odd number.
child5 value is 32 and is an even number.
child5 value is 33 and is an odd number.
child5 value is 34 and is an even number.
child5 value is 35 and is an odd number.
child5 value is 36 and is an even number.
child5 value is 37 and is an odd number.
child5 value is 38 and is an even number.
child5 value is 39 and is an odd number.
child5 value is 40 and is an even number.
child5 value is 41 and is an odd number.
child5 value is 42 and is an even number.
child5 value is 43 and is an odd number.
child5 value is 44 and is an even number.
child5 value is 45 and is an odd number.
child5 value is 46 and is an even number.
child5 value is 47 and is an odd number.
child5 value is 48 and is an even number.
child5 value is 49 and is an odd number.
child5 value is 50 and is an even number.
child4 value is 51 and is an odd number.
child2 value is 52 and is an even number.
child3 value is 53 and is an odd number.
child1 value is 54 and is an even number.
Amount of time taken to execute is 0 seconds 
```

**第二次试运行**

```
 child2 value is 112549 and is an odd number.
child2 value is 112550 and is an even number.
child2 value is 112551 and is an odd number.
child2 value is 112552 and is an even number.
child2 value is 112553 and is an odd number.
child2 value is 112554 and is an even number.
child2 value is 112555 and is an odd number.
child2 value is 112556 and is an even number.
child2 value is 112557 and is an odd number.
child2 value is 112558 and is an even number.
child2 value is 112559 and is an odd number.
child2 value is 112560 and is an even number.
child2 value is 112561 and is an odd number.
child2 value is 112562 and is an even number.
child2 value is 112563 and is an odd number.
child2 value is 112564 and is an even number.
child2 value is 112565 and is an odd number.
child2 value is 112566 and is an even number.
child2 value is 112567 and is an odd number.
child2 value is 112568 and is an even number.
child2 value is 112569 and is an odd number.
child2 value is 112570 and is an even number.
child2 value is 112571 and is an odd number.
child2 value is 112572 and is an even number.
child2 value is 112573 and is an odd number.
child2 value is 112574 and is an even number.
child2 value is 112575 and is an odd number.
child2 value is 112576 and is an even number.
child2 value is 112577 and is an odd number.
child2 value is 112578 and is an even number.
child2 value is 112579 and is an odd number.
child2 value is 112580 and is an even number.
child2 value is 112581 and is an odd number.
child2 value is 112582 and is an even number.
child2 value is 112583 and is an odd number.
child2 value is 112584 and is an even number.
child2 value is 112585 and is an odd number.
child2 value is 112586 and is an even number.
child2 value is 112587 and is an odd number.
child2 value is 112588 and is an even number.
child2 value is 112589 and is an odd number.
child2 value is 112590 and is an even number.
child2 value is 112591 and is an odd number.
child2 value is 112592 and is an even number.
child2 value is 112593 and is an odd number.
child2 value is 112594 and is an even number.
child2 value is 112595 and is an odd number.
child2 value is 112596 and is an even number.
child2 value is 112597 and is an odd number.
child2 value is 112598 and is an even number.
child2 value is 112599 and is an odd number.
child2 value is 112600 and is an even number.
child2 value is 112601 and is an odd number.
child2 value is 112602 and is an even number.
child2 value is 112603 and is an odd number.
child2 value is 112604 and is an even number.
child2 value is 112605 and is an odd number.
child2 value is 112606 and is an even number.
child2 value is 112607 and is an odd number.
child2 value is 112608 and is an even number.
child2 value is 112609 and is an odd number.
child2 value is 112610 and is an even number.
child2 value is 112611 and is an odd number.
child2 value is 112612 and is an even number.
child2 value is 112613 and is an odd number.
child2 value is 112614 and is an even number.
child2 value is 112615 and is an odd number.
child2 value is 112616 and is an even number.
child2 value is 112617 and is an odd number.
child2 value is 112618 and is an even number.
child2 value is 112619 and is an odd number.
child2 value is 112620 and is an even number.
child2 value is 112621 and is an odd number.
child2 value is 112622 and is an even number.
child2 value is 112623 and is an odd number.
child2 value is 112624 and is an even number.
child2 value is 112625 and is an odd number.
child2 value is 112626 and is an even number.
child2 value is 112627 and is an odd number.
child2 value is 112628 and is an even number.
child2 value is 112629 and is an odd number.
child2 value is 112630 and is an even number.
child2 value is 112631 and is an odd number.
child2 value is 112632 and is an even number.
child2 value is 112633 and is an odd number.
child2 value is 112634 and is an even number.
child2 value is 112635 and is an odd number.
child2 value is 112636 and is an even number.
child2 value is 112637 and is an odd number.
child2 value is 112638 and is an even number.
child2 value is 112639 and is an odd number.
child2 value is 112640 and is an even number.
child2 value is 112641 and is an odd number.
child2 value is 112642 and is an even number.
child2 value is 112643 and is an odd number.
child2 value is 112644 and is an even number. 
```

**第三次试运行**

```
 child4 value is 1 and is an odd number.
child1 value is 2 and is an even number.
child3 value is 3 and is an odd number.
child3 value is 4 and is an even number.
child3 value is 5 and is an odd number.
child3 value is 6 and is an even number.
child3 value is 7 and is an odd number.
child3 value is 8 and is an even number.
child3 value is 9 and is an odd number.
child3 value is 10 and is an even number.
child3 value is 11 and is an odd number.
child3 value is 12 and is an even number.
child3 value is 13 and is an odd number.
child3 value is 14 and is an even number.
child3 value is 15 and is an odd number.
child3 value is 16 and is an even number.
child3 value is 17 and is an odd number.
child3 value is 18 and is an even number.
child3 value is 19 and is an odd number.
child3 value is 20 and is an even number.
child3 value is 21 and is an odd number.
child3 value is 22 and is an even number.
child3 value is 23 and is an odd number.
child3 value is 24 and is an even number.
child3 value is 25 and is an odd number.
child3 value is 26 and is an even number.
child3 value is 27 and is an odd number.
child3 value is 28 and is an even number.
child3 value is 29 and is an odd number.
child3 value is 30 and is an even number.
child3 value is 31 and is an odd number.
child3 value is 32 and is an even number.
child3 value is 33 and is an odd number.
child3 value is 34 and is an even number.
child3 value is 35 and is an odd number.
child3 value is 36 and is an even number.
child3 value is 37 and is an odd number.
child3 value is 38 and is an even number.
child3 value is 39 and is an odd number.
child3 value is 40 and is an even number.
child3 value is 41 and is an odd number.
child3 value is 42 and is an even number.
child3 value is 43 and is an odd number.
child3 value is 44 and is an even number.
child3 value is 45 and is an odd number.
child3 value is 46 and is an even number.
child3 value is 47 and is an odd number.
child3 value is 48 and is an even number.
child3 value is 49 and is an odd number.
child3 value is 50 and is an even number.
Amount of time taken to execute is 0 seconds
child2 value is 51 and is an odd number. 
```

如果您查看第 1 次和第 3 次测试运行，您将看到即使在达到 50 标记后线程仍继续执行。第二次试运行令人困惑。请提出问题可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:24:12.387

`stop`必须是 volatile 才能保证对它的修改在线程间可见。

请注意，由于主线程检查和停止操作不是原子操作，因此每次运行仍然不会正好有 50 个结果。此外，主线程完全有可能永远不会看到恰好等于 50 的值，在这种情况下它将永远运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T08:37:34.363

所以我确实接受了@jtahlborn 和@Clockwork-Muse 的建议，并提出了以下建议。

```
public class ThreadTestOne {

private static final java.util.concurrent.atomic.AtomicInteger number= new java.util.concurrent.atomic.AtomicInteger(1);
private static final java.util.concurrent.atomic.AtomicBoolean stop= new java.util.concurrent.atomic.AtomicBoolean(false);
private static final int max=50;
private static final long sleepTime=0000;
private static String orginaltime=gettime("hh:mm:ss");

static {
    try{

        java.util.concurrent.ExecutorService executor = java.util.concurrent.Executors.newFixedThreadPool(6);
        executor.execute(new MasterThread(executor));
        executor.execute(new Thread(new child1("Thread1")));
        executor.execute(new Thread(new child2("Thread2")));
        executor.execute(new Thread(new child3("Thread3")));
        executor.execute(new Thread(new child4("Thread4")));
        executor.execute(new Thread(new child5("Thread5")));

    }catch(Exception e){
        e.printStackTrace();
    }
}

private static final class child1 implements java.lang.Runnable{
    private String threadName=""; 
    private child1(String threadName){
        this.threadName=threadName;
    }
    public void run(){
        Thread.currentThread().setName(threadName);
        while(true){
            try{
                getNumber(Thread.currentThread().getName());
                Thread.sleep(sleepTime);
            }catch(java.lang.InterruptedException e){
            }catch(Exception e){
                e.printStackTrace();
            }
        }
    }
}

private static final class child2 implements java.lang.Runnable{
    private String threadName=""; 
    private child2(String threadName){
        this.threadName=threadName;
    }

    public void run(){
        Thread.currentThread().setName(threadName);
        while(true){
            try{
                getNumber(Thread.currentThread().getName());
                Thread.sleep(sleepTime);
            }catch(java.lang.InterruptedException e){
            }catch(Exception e){
                e.printStackTrace();
            }
        }
    }
}

private static final class child3 implements java.lang.Runnable{
    private String threadName=""; 
    private child3(String threadName){
        this.threadName=threadName;
    }

    public void run(){
        Thread.currentThread().setName(threadName);
        while(true){
            try{
                getNumber(Thread.currentThread().getName());
                Thread.sleep(sleepTime);
            }catch(java.lang.InterruptedException e){
            }catch(Exception e){
                e.printStackTrace();
            }
        }
    }
}

private static final class child4 implements java.lang.Runnable{
    private String threadName=""; 
    private child4(String threadName){
        this.threadName=threadName;
    }

    public void run(){
        Thread.currentThread().setName(threadName);
        while(true){
            try{
                getNumber(Thread.currentThread().getName());
                Thread.sleep(sleepTime);
            }catch(java.lang.InterruptedException e){
            }catch(Exception e){
                e.printStackTrace();
            }
        }
    }
}

private static final class child5 implements java.lang.Runnable{
    private String threadName=""; 
    private child5(String threadName){
        this.threadName=threadName;
    }

    public void run(){
        Thread.currentThread().setName(threadName);
        while(true){
            try{
                getNumber(Thread.currentThread().getName());
                Thread.sleep(sleepTime);
            }catch(java.lang.InterruptedException e){
            }catch(Exception e){
                e.printStackTrace();
            }
        }
    }
}

private static final class MasterThread implements java.lang.Runnable{
    private java.util.concurrent.ExecutorService MasterExecutor=null;
    private MasterThread(java.util.concurrent.ExecutorService executor){
        this.MasterExecutor=executor;
    }
    public void run(){
         while(true){
             if(stop.get()!=false){
                 MasterExecutor.shutdown();
                 System.out.println("Amount of time taken to execute is " +ThreadTestOne.elapsedTime(orginaltime)+ " seconds");
                 System.exit(0);
             }
         }
    }
}

public static synchronized void getNumber(String ThreadName){
    String result="";
    if(number.get()!=max){
        result=((number.get()%2)==0)?" and is an even number.":" and is an odd number.";
        System.out.println(ThreadName+" value is "+number.get()+result);
        number.incrementAndGet();
    }else{
        stop.set(true);
    }
}

private static long elapsedTime(String OriginalTime){
    java.text.SimpleDateFormat format = new java.text.SimpleDateFormat("hh:mm:ss");
    long difference = 0;
    try {
         java.util.Date origTime = format.parse(OriginalTime);
         java.util.Date currTime = format.parse(gettime("hh:mm:ss"));
          difference = (currTime.getTime() - origTime.getTime())/1000; 
    } catch (Exception e) {
         e.printStackTrace();
    }
    return difference;
}

private static String gettime(String pattern){
    String timeString="";
    try{
     java.text.SimpleDateFormat format = new java.text.SimpleDateFormat(pattern);
     java.util.Date currentTime = new java.util.Date();
     timeString = format.format(currentTime);
    }
    catch(Exception e){
        e.printStackTrace();
    }
    return timeString;
}

public static void main (String []args){
    new ThreadTestOne();
} 
```

}

现在解决方案的结果是一致的，因为操作得到了保证。谢谢大家，我希望这对其他学习java并发的人有所帮助。

# data-structures - 任何哈希表（内存中，非分布式）是否使用一致的哈希？

> ID：14164298
> 
> 赞同：5
> 
> 时间：2013-01-04T20:17:57.013
> 
> 标签：data-structures, hashtable, consistent-hashing

我不是在谈论分布式键/值系统，例如通常与 memcached 一起使用的，它使用一致的散列来使添加/删除节点成为一个相对便宜的过程。

我说的是你的标准内存哈希表，比如 python 的 dict 或 perl 的哈希。

通过降低调整哈希表大小的成本，使用一致散列的好处似乎也适用于这些标准数据结构。实时系统（和其他对延迟敏感的系统）将受益于/需要针对低成本增长优化的哈希表，即使整体吞吐量略有下降。

维基百科提到“增量调整大小”，但基本上是在谈论调整大小的热/冷替换方法；有一篇关于“可扩展散列”的单独文章使用 trie 进行存储桶查找来完成廉价的重新散列。

只是好奇是否有人听说过使用一致哈希来降低增长成本的核心单节点哈希表。还是使用其他方法（上面列出的两个维基百科位）更好地满足此要求？

或者......我的整个问题是否被误导了？内存分页考虑是否使复杂性不值得？也就是说，一致性哈希的额外间接性让您只重新哈希总键的一小部分，但这可能并不重要，因为您可能必须从每个现有页面中读取，因此内存延迟是您的主要因素，以及是否与内存访问的成本相比，您重新散列部分或全部键并不重要......但另一方面，通过一致的散列，您的所有键重映射都有相同的目标页面，所以会有与您的键重新映射到任何现有页面相比，内存抖动更少。

编辑：添加“数据结构”标签，澄清最后一句说“页面”而不是“桶”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-05-11T05:27:32.557

我还没有听说过这个，但如果你选择正确的一致性哈希实现**可能是个好主意。**具体来说， Google 等人的[Jump Consistent Hashing](http://arxiv.org/abs/1406.2294)。首先，我将介绍为什么要 Jump，然后我将介绍它如何在本地数据结构中发挥作用。

### 跳转一致哈希

Jump Consistent Hashing（我将简称为 Jump）非常适合这个空间，原因有几个。Jump 假设节点不会失败，这对于本地数据结构来说非常有用，因为它们不会失败！这使得 Jump 仅是对一系列数字的映射`[0, numBuckets)`，只需要 2-4 个字节的空间。

此外，实施简单且快速。如果我们删除参考实现的浮点除法并用一半的整数除法替换它们，速度会更快。（顺便说一句，我们可以。）

所有这些都可以用于...

### 并发哈希映射

但首先，Java 的[Concurrent Hash Map](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html#ConcurrentHashMap-int-float-int-)是高级别的。

Java 的 ConcurrentHashMap 由多个*buckets*参数化。这个分片因子在地图的整个生命周期中都是不变的。这些桶中的每一个本身都是一个带有自己锁的哈希映射。

将键值对插入映射时，键被散列到其中一个桶中。获取该键的锁，并在释放锁之前将该项目插入到存储桶的哈希映射中。在插入存储桶时，`x`另一个线程可以同时插入存储桶`y`，但如果插入存储桶，它将等待锁`x`。因此**Java 的 ConcurrentHashMap 具有 n-way concurrency**，其中*n*是构造函数的*桶*参数。

就像任何哈希映射一样，ConcurrentHashMap 中的存储桶可能会被填满并需要增长。就像常规的哈希映射一样，它通过将其大小加倍并将桶中的所有内容重新哈希回更大的自身来实现这一点。除了“它更大的自我”只是桶的“自我”。如果一个桶是热点并且获得的密钥超过其公平份额，那么与其他桶相比，该桶将不成比例地增长。并且每次存储桶增长时，重新散列到自身所需的时间就会越来越长。最后一点不仅是热点问题，而且当哈希表普通旧获取更多键时。

想象一下，如果我们可以随着键数量的增加而增加桶的数量。有了这个，我们可以抑制每个桶的增长量。

**输入一致的哈希**，这允许我们添加更多的桶！

### ConcurrentHashMap 采取 2：一致的哈希样式

我们可以通过两个简单的步骤让 ConcurrentHashMap 增加它的桶数。

首先将映射到每个桶的函数替换为跳转一致哈希函数。到目前为止，一切都应该是一样的。

第二个当一个桶装满时拆分一个新的桶；也长满了桶。实际上，只有当装满的桶成为容量最大的桶时，才拆分出一个新的桶。这可以在不迭代桶的情况下计算出来。

通过一致的散列，拆分只会将键定向到新存储桶中，而不是向后进入任何旧存储桶。

### 尾注

我相信这个方案可以改进。也就是说，拆分存储桶需要进行全表扫描才能将键移动到新存储桶中。这肯定不比普通哈希映射差，而且可能更好，但它对可能不需要进行完整扫描的 ConcurrentHashMap 实现不利。

# python - 如何使用嵌套的 Python 字典和 D3.js？

> ID：14164302
> 
> 赞同：2
> 
> 时间：2013-01-04T20:18:11.000
> 
> 标签：python, json, d3.js, flask

我有一个 Python/Flask 应用程序，它从第三方 API 收集数据并将它们存储在类似 JSON 的结构中（嵌套的 Python 字典称为“结果”）。

我正在使用以下方法将其发送到我的模板：

```
def format_results():
   item_data = {'name':name, 'age':age, 'address':address}
   results = {'title':item_title, 'item_data':item_data}    
   return jsonify(results)

@app.route('/')
def display_results():
    data = format_results()
    return render_template('index.html', data = data) 
```

我想在我的模板中使用 d3.js 在图表上绘制结果。这样做的推荐方法是什么？（免责声明：这是我第一次使用 D3.js）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:19:02.717

想出了一个方法来完成这项工作！

```
def format_results():
   item_data = {'name':name, 'age':age, 'address':address}
   results = {'title':item_title, 'item_data':item_data}    
   return results

@app.route('/')
def display_results():
    data = format_results()
    return render_template('index.html', data = data) 
```

*   删除了“jsonify”并禁用了 {{data}} 的转义

    de = {% autoescape false %} {{data}} {% endautoescape %}

# textmate - 自动完成 TextMate 中已定义的变量

> ID：14164305
> 
> 赞同：1
> 
> 时间：2013-01-04T20:18:30.577
> 
> 标签：textmate

学习基础编程教程。我正在使用 TextMate 作为文本编辑器，并且在稍后在文件中使用它们时似乎无法让它拉入先前定义的变量。

例如，如果我写：

var str = "你好" + "世界";

然后写：

警报（ST

我注意到在教程中，教师编辑用 str 完成了它。我一直在寻找 TextMate 是否支持此功能，但似乎找不到。这是可能的还是我需要另一个编辑器？

这个答案似乎暗示如果使用同一文件中使用的术语，它应该完成：

[textmate中的自动完成类方法？](https://stackoverflow.com/questions/4609679/autocomplete-class-methods-in-textmate)

但当我写作时，情况并非如此。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-23T00:20:26.190

您可以使用转义键自动完成。

# database - 如何在实体关系图中表示联结表？

> ID：14164310
> 
> 赞同：1
> 
> 时间：2013-01-04T20:18:52.127
> 
> 标签：database, entity-relationship-model

我有一个访问数据库，表 Skills 和 Students 之间存在多对多关系，我正在使用联结表 Student-Skills 来实现多对多关系。

我必须在实体关系图中表示这一点，我会包括联结表还是只是在两个主表之间建立多对多关系来表示这一点？

另一种方法是在联结表的两侧显示具有两个关系的 ER 图，但这似乎是多余的。

执行此操作的标准方法是什么？我倾向于不在 ER 图中显示连接表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:02:38.733

这真的取决于，人们做这件事的方式不同。在大多数情况下，在制作技术关系图时，我实际上是在定义关系时列出了外键，这需要包含链接表。

在制作更简单的 ER 图时，它实际上只取决于您的受众是谁。如果您试图在技术层面上就如何定义数据库进行沟通，那么将其保留在其中是有意义的，因为它清楚地定义了关系。

如果您的听众只需要从高层次上理解关系，那么简化可能更有意义。这两种方式都没有对错，我还没有看到一致的标准。

# web-services - 为什么 Mule 将 WSDL soapAction 作为双引号字符串返回

> ID：14164312
> 
> 赞同：0
> 
> 时间：2013-01-04T20:18:56.080
> 
> 标签：web-services, soap, mule

我的任务是根据soapAction 将消息路由到不同的jms 队列。我正在使用`<cxf:proxy-service>`，所以除了在 WSDL 中填充属性之外，基本上没有其他方法可以找到调用了哪些操作`soapAction`（除非有人告诉我其他情况）。所以这就是我想要实现的目标：

```
<choice>
  <when expression="message.inboundProperties['SOAPAction'] == 'submitOrderStatus'">
    <jms:outbound-endpoint queue="mviq.1122.result" />
  </when>
 ....
</choice> 
```

但是即使我使用记录器打印下面显示的表达式，上面的代码也不会评估为真，我得到`"submitOrderStatus"`

```
<logger message="SoapAction is #[message.inboundProperties['SOAPAction']]" level="INFO" /> 
```

在对日志文件进行了太长时间和数小时的分析之后，我意识到除了`SOAPAction`. 所以把我的流程改成这个救了我：

```
<when expression="message.inboundProperties['SOAPAction'] == '&quot;submitOrderStatus&quot;'">
    <logger message="Can evaluate this message.inboundProperties['SOAPAction'] == '&quot;submitOrderStatus&quot;'" level="INFO" />
    <jms:outbound-endpoint queue="mviq.1122.result" />
</when> 
```

我很想知道为什么 Mule 将 SoapAction 作为双引号字符串返回

**编辑：** SoapUI 通过网络发送这个。我不确定为什么`SOAPAction`被引用。

```
POST http://localhost:61005/mvi/service HTTP/1.1
Accept-Encoding: gzip,deflate
Content-Type: text/xml;charset=UTF-8
SOAPAction: "submitOrderStatus"
Content-Length: 5355
Host: localhost:61005
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)` 
```

以下是我的 wsdl 的一部分：

```
<wsdl:operation name="submitOrderStatus">
     <soap:operation soapAction="submitOrderStatus" style="document"/>
     <wsdl:input name="submitOrderStatusRequest">
        <soap:body use="literal"/>
     </wsdl:input>
     <wsdl:output name="submitOrderStatusResponse">
        <soap:body use="literal"/>
     </wsdl:output>
  </wsdl:operation> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:26:32.503

> 除了在 WSDL 中填充soapAction 属性外，没有其他方法可以找到调用了什么操作

`cxf_operation`这是不正确的：在我的答案[https://stackoverflow.com/a/14163660/387927](https://stackoverflow.com/a/14163660/387927)中查看我如何从流变量中获取操作

> 我很想知道为什么 Mule 将 SoapAction 作为双引号字符串返回

SOAPAction 标头根据规范引用：[http ://www.w3.org/TR/soap11/#_Toc478383528](http://www.w3.org/TR/soap11/#_Toc478383528)

所以你的表达应该是：

```
<when expression="#[message.inboundProperties['SOAPAction'] == '&quote;submitOrderStatus&quote;']"> 
```

# r - 在 2 个向量中找到共同的“子链”

> ID：14164313
> 
> 赞同：3
> 
> 时间：2013-01-04T20:19:00.127
> 
> 标签：r, permutation, combinations, combinatorics

我想在 R 中解决一个奇怪的问题：
假设我们有 2 个向量，x 和 y，其中每个向量中的每个元素都是唯一的，向量具有相同的长度，向量 2 是向量的排列1：

```
x <- LETTERS[c(1,2,3,4,5,6,7,8,9,10)]
y <- LETTERS[c(5,8,7,9,6,10,1,3,2,4)] 
```

让我们将“链”定义为一种特殊类型的排列，具有定义的第一个和最后一个元素。
例如，可能是的排列，而`"A" "B" "C" "D"`可能`"C" "B" "D" "A"`
的“链”`"A" "B" "C" "D"`是`"A" "C" "B" "D"`

我的目标是找出 x 和 y 共有的所有“链”。例如，x 和 y 有一个共同的长度为 4 的链：

```
> x[1:4]
[1] "A" "B" "C" "D"
> y[7:10]
[1] "A" "C" "B" "D" 
```

（链为A、B、C、D，顺序不限，以A开头，以D结尾）

和一个长度为 6 的公共链：

```
> x[5:10]
[1] "E" "F" "G" "H" "I" "J"
> y[1:6]
[1] "E" "H" "G" "I" "F" "J" 
```

（链为E、F、G、H、I、J任意顺序，以E开头，以J结尾）

我编写了以下函数来识别特定长度的子链：

```
subChains <- function(x, y, Len){
    start.x <- rep(NA, length(x))
    start.y <- rep(NA, length(y))
    for (i in 1:(length(x) - Len + 1)) {
        for (j in 1:(length(y) - Len + 1)) {
            canidate.x <- x[i:(i+Len-1)]
            canidate.y <- y[j:(j+Len-1)]
            if (
                    canidate.x[1]==canidate.y[1] & 
                    canidate.x[Len]==canidate.y[Len] &
                    all(canidate.x %in% canidate.y) & 
                    all(canidate.y %in% canidate.x)
                    ){
                start.x[i] <- i
                start.y[i] <- j
            }
        }
    }
    return(na.omit(data.frame(start.x, start.y, Len)))
} 
```

使用如下：

```
> subChains(x, y, 4)
  start.x start.y Len
1       1       7   4 
```

以下函数可用于查找 2 个向量共有的所有链：

```
allSubchains <- function(x, y, Lens){
    do.call(rbind, lapply(Lens, function(l) subChains(x, y, l)))
} 
```

使用如下：

```
allSubchains(x, y, Lens=1:10)
   start.x start.y Len
1        1       7   1
2        2       9   1
3        3       8   1
4        4      10   1
5        5       1   1
6        6       5   1
7        7       3   1
8        8       2   1
9        9       4   1
10      10       6   1
11       1       7   4
51       5       1   6 
```

当然，这两个功能都非常缓慢。我是否可以改进它们，以便它们可以在合理的时间内解决更大的问题？例如

```
n <- 100000
a <- 1:n
b <- sample(a, n)
allSubchains(a, b, Lens=50:100) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T02:05:14.787

你的 100,000 箱不到一秒钟会让你开心吗？试试这个：

```
allSubChains <- function(x, y, Lens) {

   N <- length(x)
   x.starts <- 1:N
   y.starts <- match(x, y)   # <-- That's where the money is

   subChains <- function(Len) {
      x.ends <- x.starts + Len - 1L
      y.ends <- y.starts + Len - 1L
      keep   <- which(x.ends <= N & y.ends <= N)
      good   <- keep[x[x.ends[keep]] == y[y.ends[keep]]]
      is.perm <- function(i) all(x[x.starts[i]:x.ends[i]] %in%
                                 y[y.starts[i]:y.ends[i]])
      good    <- Filter(is.perm, good) 
      if (length(good) > 0) data.frame(x.starts[good], y.starts[good], Len)
      else NULL
   }

   do.call(rbind, lapply(Lens, subChains))
} 
```

* * *

在这里测试：

```
n <- 100000
a <- 1:n
b <- sample(a, n)
system.time(z <- allSubChains(a, b, Lens=50:100))
#   user  system elapsed 
#  0.800   0.053   0.848 
```

# c - Unix/C：将文件放入共享内存

> ID：14164316
> 
> 赞同：2
> 
> 时间：2013-01-04T20:19:12.693
> 
> 标签：c, file, memory, posix, shared

有一个问题。我有一个文件，其内容看起来像**number:error_description**。现在我需要把这个文件**放到共享内存（POSIX）**中。如果修改了任何内容，则应将其**保存到 base-file**。需要在共享内存中搜索内容（结果将通过消息队列发送到客户端）。我如何实现这一切？首先我认为我必须打开**(fopen("my_file", "r"))**然后我必须创建共享内存并映射文件。有人能帮我吗？

编辑：

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/shm.h>
#include <sys/mman.h>
#include <fcntl.h>
#include <unistd.h>
#include <semaphore.h>
/*
 * \ /tmp/errors -> Error File
 */
#define MSGQ_HANDLER    "/error_handler"
#define PATH_TO_FILE    "/tmp/errors"
#define FILE_MODE (S_IRUSR | S_IWUSR | S_IRGRP | S_IROTH)

int main(void) {

    int fd = open(PATH_TO_FILE, O_RDWR);
    struct stat file_stat;
    fstat(fd, &file_stat);
    printf("File size: %zd\n", file_stat.st_size);
    char *byte_ptr = mmap(NULL, file_stat.st_size, PROT_READ | PROT_WRITE,
                              MAP_SHARED, fd, 0);
    if(byte_ptr == MAP_FAILED){
        perror("error:");
    }

    while(1){
        printf("%s\n", byte_ptr);
        if(byte_ptr)
            exit(1);
    }

    return EXIT_SUCCESS;
} 
```

到目前为止，这就是我现在所拥有的。读一行作品。如何更改内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:37:51.940

不要使用`fopen`和忘记共享内存（`sh*`我的意思是 API）。`mmap`这就是我们所需要的。

`open`使用正确的选项（读/写）打开您的文件。然后`mmap`与选项一起使用`MAP_SHARED`。文件中的所有更改都将直接反映并且对映射同一文件的所有进程可见。在 Linux 和 Solaris 上（在我不知道的其他系统上，但 POSIX 或任何标准都不能保证）你甚至可以使用`read`/同时访问该文件`write`。不过这是个坏主意。当然，来自不同进程的并发内存访问需要同步（互斥锁、信号量等）。

# django - 将错误插入 InlineFormSet 自定义验证器

> ID：14164321
> 
> 赞同：1
> 
> 时间：2013-01-04T20:19:51.913
> 
> 标签：django, error-handling, django-forms, inline-formset

我正在使用以下自定义表单验证器来确保`correct`通过 InlineFormSet 提交给我的应用程序的条目不超过一个。

```
class BaseAnswerFormSet(forms.models.BaseInlineFormSet):
    def clean(self):
        if any(self.errors):
            return
        if len([d['correct'] for d in self.forms if d['correct'].value()]) !=1:
            raise forms.ValidationError("There must be one and only one correct answer")
        return 
```

这是有效的，因为呈现的表单对象将`False`在评估为时返回，`.is_clean()`但没有返回错误。这是我`pdb`在处理 的视图中使用时显示的内容`POST`：

```
(Pdb) answerformset.is_valid()
False
(Pdb) answerformset.errors
[{}, {}, {}] 
```

不应该`raise forms.ValidationError("There must be one...`创建一个错误条目吗？我知道`answerformset.errors`列表中的每个空字典都是针对每个答案形式的，但我认为会有一个`non_field_error`或类似的东西？

如何让这个干净的函数返回可以在模板中显示的错误？如何向其中添加 non_field_error？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:11:45.667

请阅读[自定义表单集验证](https://docs.djangoproject.com/en/dev/topics/forms/formsets/#custom-formset-validation)。`Formset`可以使用以下方式访问自定义错误`non_form_errors`：

```
answerformset.non_form_errors() 
```

# javascript - 以 HTML 格式显示 SQL 查询结果

> ID：14164324
> 
> 赞同：0
> 
> 时间：2013-01-04T20:20:08.540
> 
> 标签：javascript, html, sqlite

我需要使用 javascript 和 HTML5 在我的 html 页面中显示以下 SQL 查询的结果。SQL 查询在 SQLite 浏览器中工作，但我不确定如何编写函数和相应的 HTML5 代码来调用函数以显示我的查询结果。SQL查询如下：

```
SELECT SUM(Orders.productQty * Products.productPrice) AS grandTotal FROM Orders JOIN Products ON Products.productID = Orders.productID 
```

这会从我已经创建的 SQLite 数据库返回一个数字结果，但我不知道如何在我的网页上显示选择查询的结果。

我尝试使用以下函数来执行 sql 语句，但我不知道如何使用 HTML 显示它。

```
function calculateTotalDue() {
db.transaction(function (tx) {
    tx.executeSql('SELECT SUM(Orders.productQty * Products.productPrice) AS grandTotal FROM Orders JOIN Products ON Products.productID = Orders.productID', [], []);
}); 
```

}

有人可以告诉我如何在我的 html 页面中显示查询结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:40:05.930

你需要的是executeSql调用的第三个参数中的一个函数。像这样（如果您有多个结果，这是一个示例，但也适用于您的查询）：

### Javascript

```
function calculateTotalDue() {
  db.transaction(function (tx) {
      tx.executeSql('SELECT SUM(Orders.productQty * Products.productPrice) AS grandTotal FROM Orders JOIN Products ON Products.productID = Orders.productID', [], 
      function(){
        // Get return rows
        var data = result.rows;

        // Initialize variable to store your html
        var html = '';

        // loop thru results
        for (var i = 0; i < dataset.length; i++) {
          var row = data.item(i);

          // Add to html variable
          html += row.grandTotal;

          // Append that html somewhere
          // How todo this will vary depening on if you are using framworks or not
          // If just javascript use:
          // document.getElementById('results').innerHTML += html;

        }

      }
    );
  });
} 
```

# ant - 在 Google Closure Compiler Ant 构建中使用通配符

> ID：14164325
> 
> 赞同：1
> 
> 时间：2013-01-04T20:20:12.180
> 
> 标签：ant, google-closure-compiler

是否可以使用通配符来选择多个文件，而不是为每个文件指定一个`<file>`标签？

目前我正在这样做：

```
<jscomp compilationLevel="simple" debug="false" output="build.js">
    <sources dir="${basedir}/source">
        <file name="foo.js" />
        <file name="bar.js" />
    </sources>
</jscomp> 
```

我尝试使用`<fileset>`但`<sources>`不支持它：

```
<jscomp compilationLevel="simple" debug="false" output="build.js">
    <sources dir="${basedir}">
        <fileset dir="source">
            <include name="**/*.js" />
        </fileset>
    </sources>
</jscomp> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T07:34:48.113

查看[编译器的源代码，](http://code.google.com/p/closure-compiler/source/browse/trunk/src/com/google/javascript/jscomp/ant/CompileTask.java)我相信（*未经测试*）它支持 Ant`path`作为`filelist`它最初支持的替代方案。制作了一个[补丁](http://code.google.com/p/closure-compiler/issues/detail?id=535)来添加它。已经尝试从文件列表更改为文件集，但问题是文件集没有排序。

根据补丁提交，你会做这样的事情。这个例子显示了一个文件列表和一个正在使用的文件集的混合：

```
<path id="ui.js.fileset">
    <fileset dir="source">
        <include name="**/*.js" />
    </fileset>
</path>

<path id="app.js.fileset">
    <filelist dir="${js.dir}/app/">
        <file name="app.core.js"/>
        <file name="app.foo.js"/>
    </filelist>
    <path refid="ui.js.fileset" />
</path>

<jscomp compilationLevel="simple" debug="false" output="build.js">
    <path refid="app.js.fileset" />
</jscomp> 
```

[文档](http://code.google.com/p/closure-compiler/wiki/BuildingWithAnt)似乎没有更新以反映此选项的可用性，但它确实说*“偶尔会添加新功能，任务的来源可能是最好的文档。”*

# sql - Microsoft Access - SQL 生成的字段评估为文本而不是单一数据类型

> ID：14164331
> 
> 赞同：1
> 
> 时间：2013-01-04T20:20:29.700
> 
> 标签：sql, ms-access, types, latitude-longitude

我有一个 SQL 语句（在 Access 中保存为“LocationSearch”）计算两点之间的距离并将“距离”作为生成的字段返回。

```
SELECT Int((3963*(Atn(-(Sin(LATITUDE/57.2958)*
    Sin([@lat]/57.2958)+Cos(LATITUDE/57.2958)*Cos([@lat]/57.2958)*
    Cos([@lng]/57.2958-LONGITUDE/57.2958))/Sqr(-(Sin(LATITUDE/57.2958)*
    Sin([@lat]/57.2958)+Cos(LATITUDE/57.2958)*Cos([@lat]/57.2958)*
    Cos([@lng]/57.2958-LONGITUDE/57.2958))*(Sin(LATITUDE/57.2958)*
    Sin([@lat]/57.2958)+Cos(LATITUDE/57.2958)*Cos([@lat]/57.2958)*
    Cos([@lng]/57.2958-LONGITUDE/57.2958))+1))+2*Atn(1)))*10)/10 AS Distance, *
FROM Locations
ORDER BY (3963*(Atn(-(Sin(LATITUDE/57.2958)*
    Sin([@lat]/57.2958)+Cos(LATITUDE/57.2958)*Cos([@lat]/57.2958)*
    Cos([@lng]/57.2958-LONGITUDE/57.2958))/Sqr(-(Sin(LATITUDE/57.2958)*
    Sin([@lat]/57.2958)+Cos(LATITUDE/57.2958)*Cos([@lat]/57.2958)*
    Cos([@lng]/57.2958-LONGITUDE/57.2958))*(Sin(LATITUDE/57.2958)*
    Sin([@lat]/57.2958)+Cos(LATITUDE/57.2958)*Cos([@lat]/57.2958)*
    Cos([@lng]/57.2958-LONGITUDE/57.2958))+1))+2*Atn(1))); 
```

您看到的所有讨厌的数学代码都是在 SQL 语句中使用纬度和经度坐标计算距离（以英里为单位）。

但是，问题在于 SQL 语句生成的距离字段似乎是作为字符串返回的。如果我随后添加 SQL 代码来询问 0 到 45 英里之间的位置，它会返回从“0”到“45”之间的任何距离值。这包括距离“1017”英里的位置。显然，距离字段是文本字段，而不是数字字段。所以我不能使用“BETWEEN”语句。我也无法使用“<”和“>”进行评估，因为它有同样的问题。

我将上面的 SQL 查询保存为名为“LocationSearch”的已保存查询。这样我就可以对它运行辅助查询，如下所示：

```
SELECT * FROM LocationSearch WHERE Distance < @MaxDistance 
```

Access 将询问@lat、@long 和@MaxDistance 参数，然后位置将在记录集中返回，按距离排序。但是，出现的问题是当我输入 45 的 MaxDistance 时。使用包含美国西海岸位置的表，以及 47 的 @lat 和 -122 的 @long（西雅图附近），Access 返回以下：

![在此处输入图像描述](../Images/397be85fbe597d34b40d51206df7c43d.png)

另请注意，“距离”字段的格式是正确的，因此它看起来是一个数字字段，但由于某种原因，查询返回了圣地亚哥的一个位置，该位置距离 1,017 英里。我的猜测是它将距离字段评估为文本字段，并且在 ASCII 比较中，我相信“1017”位于“0”和“45”之间。

另一件事：我正在使用 ASP 3.0（经典）使用 JET OLEDB 4.0 访问此查询。

有人知道如何将距离字段定义为数字吗？

谢谢！

**- - 编辑 - -**

使用 HansUp 在下面的回答中的想法，我尝试了此查询以强制 Access 将距离字段视为单精度数：

```
SELECT * FROM LocationSearch WHERE CSng(Distance) < @MaxDistance 
```

即使这样也返回了与以前完全相同的结果，其中包括 1017 英里外的圣地亚哥的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:41:47.920

如果您找不到从该`Duration`字段表达式返回数值而不是文本的方法，请将您的查询用作子查询，然后强制转换`Duration`为包含查询。

```
SELECT CSng(sub.Duration) AS Duration_as_single
FROM
    (
        -- your existing query --
    ) AS sub
WHERE CSng(sub.Duration) BETWEEN 0 AND 45
ORDER BY 1; 
```

这种方法也可以带来更好的`ORDER BY`……如果这很重要的话。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T20:31:27.120

`select *`我在没有, 和`FROM`and`ORDER BY`子句的情况下尝试了您的查询。我在 中添加了一个额外的列，`SELECT`以证明字符串在访问网格中以左对齐形式返回。

```
SELECT Int((3963*(Atn(-(
Sin(LATITUDE/57.2958)*Sin([@lat]/57.2958)+Cos(LATITUDE/57.2958)*
Cos([@lat]/57.2958)*Cos([@lng]/57.2958-LONGITUDE/57.2958))/Sqr(-(Sin(LATITUDE/57.2958)*
Sin([@lat]/57.2958)+Cos(LATITUDE/57.2958)*Cos([@lat]/57.2958)*
Cos([@lng]/57.2958-LONGITUDE/57.2958))*(Sin(LATITUDE/57.2958)*
Sin([@lat]/57.2958)+Cos(LATITUDE/57.2958)*Cos([@lat]/57.2958)*
Cos([@lng]/57.2958-LONGITUDE/57.2958))+1))+2*Atn(1)))*10)/10 AS Distance, 
'test' as test 
```

我被提示输入四个参数，但最后，我得到了一个包含两列的表格：

![在此处输入图像描述](../Images/a449e11163f95e9af25f81d9b3d38590.png)

由于第一列是右对齐的，而第二列（显然是一个字符串）是左对齐的，看来访问确实将它作为数字返回给我。这是在 Access 2010 中。

--**编辑**--

我刚刚创建了一个名为`Locations`. 它有一个字段`id`（自动编号）和一个字段`Field1`（文本）。我运行了 OP 提供的原始查询，它工作正常（距离以数字形式返回）。

这导致了怀疑...... OP 的`Locations`表是否有它自己的距离字段，即字符串？否则，问题一定出在调用 SQL 语句的代码中，而不是语句或喷气发动机本身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T22:30:41.733

好的，解决了！

HansUp，你的想法原来是解决方案。我尝试在 SQL 查询中`CSng()`的参数上添加函数，`@MaxDistance`这就是修复它的原因。

这是修改后的辅助 SQL 查询：

```
SELECT * FROM LocationSearch WHERE CSng(Distance) < CSng(@MaxDistance) 
```

谢谢大家的帮助！你们都摇滚。

新年快乐。

# jquery - 排序ajax表客户端

> ID：14164335
> 
> 赞同：1
> 
> 时间：2013-01-04T20:20:36.333
> 
> 标签：jquery, ajax, html-table, asmx, flexigrid

我已经尝试了一些 jQuery 库，到目前为止我最喜欢 Flexigrid。但是，看来我需要重写提供表数据的 Web 服务。如果可能的话，我想避免这种情况。我的代码如下。结果看起来不错，但排序不起作用。

我可以在不重写 Web 服务的情况下修复它吗？

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Pending Server Requests</title>
    <script src="scripts/jquery-1.7.1.min.js"></script>
    <link href="css/site.css" rel="stylesheet" />
    <link href="css/flexigrid.css" rel="stylesheet" />
    <link href="css/flexigrid.pack.css" rel="stylesheet" />
    <script src="Scripts/flexigrid.pack.js"></script>
    <script src="Scripts/flexigrid.js"></script>
    <script src="scripts/functions.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#status').html("Loading Report...");
            $.ajax({
                url: 'reportdata.asmx/rptPendingServerRequests',
                type: 'POST',
                dataType: 'xml',
                success: function (data) {
                    $('#status').html("");
                    $(data).find("Table").each(function () {
                        request_id = $(this).find("request_id").text().toString();
                        status = $(this).find("status").text().toString();
                        req_by_user_id = $(this).find("req_by_user_id").text().toString();
                        $('#report tr:last').after('<tr id="' + request_id + '"><td class="id cell">' + request_id + '</td><td class="status cell">' + getStatus(status) + '</td><td class="user cell">' + req_by_user_id + '</td><td class="link cell"><a href="urlredacted' + request_id + '" target="_blank">View Request</a></span></td></tr>');
                    });
                    $('#report').flexigrid({
                        colModel: [
                            { display: 'ID', name: 'id', width: 40, sortable: true, align: 'center' },
                            { display: 'Status', name: 'status', width: 180, sortable: true, align: 'left' },
                            { display: 'Requested By', name: 'requested_by', width: 120, sortable: true, align: 'left' },
                            { display: 'Link', name: 'link', width: 120, sortable: false, align: 'left' }
                        ],
                        sortname: "id",
                        sortorder: "asc",
                        usepager: false,
                        title: 'Server Requests',
                        useRp: true,
                        rp: 15,
                        showTableToggleBtn: true,
                        width: 700,
                        height: 200
                    });
                },
                error: function (a, b, c) {
                    $('#status').html("Error: " + a.toString() + " " + b.toString() + " " + c.toString());
                }
            });
        });
    </script>
</head>
<body>
    <h1>Pending Server Requests</h1>
    <div id="content">
        <table id="report">
<!--            <thead>
                <tr>
                    <td class="id header">ID</td>
                    <td class="status header">Status</td>
                    <td class="user header">Requested By</td>
                    <td class="header">Link</td>
                </tr>
            </thead>-->
            <tbody>
                <tr style="display:none;"><td>test</td><td>test2</td><td>test3</td><td>test4</td></tr>
            </tbody>
        </table>

    </div>
    <div id="status">NULL</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:53:08.647

你可能想看看这个[http://pixelnix.com/flexigrid-jquery-plugin-extending-to-allow-sorting-of-static-grids/](http://pixelnix.com/flexigrid-jquery-plugin-extending-to-allow-sorting-of-static-grids/)

这可能会解决您的排序问题，但 flexigrid 广泛使用 AJAX。例如，用于分页、更改分页大小等。我已经走这条路，强烈建议重新编写您的 web 服务以在服务器端处理这些调用。

也看看这个线程[Flexigrid not paging](https://stackoverflow.com/questions/11873509/flexigrid-not-paging/11943660#11943660)

希望这可以帮助。

# python - 如何用 python 中的列表替换一组单词？

> ID：14164337
> 
> 赞同：0
> 
> 时间：2013-01-04T20:20:41.637
> 
> 标签：python, list, python-3.x

我是一名 GCSE Computing 学生，对 python 比较陌生。我正在进行我的第三个编程任务，其中涉及制作一个简单的刽子手游戏。我已经设法让游戏正常运行，但成功标准的一部分是用户可以更改单词集。此时程序正在使用预设单词列表。我设法编写了允许用户输入新单词集的代码，然后将它们存储为列表。但是，当我尝试用用户输入的新列表替换旧的单词集时遇到了问题。我被困住了，因为我还在度假，所以无法向我的老师寻求帮助。任何帮助或建议将不胜感激，因为我的时间不多了（我们将在 2013 年 6 月参加 GCSE）谢谢。在此处输入代码`

```
def newwords():
        newgamewords.append(input('Enter new word: '))
        print('Do you want to add any more words? yes or no?')
        answer=input()
        if answer == 'yes':
            newwords()
        else:
            while len(guessedletters) > 0 : guessedletters.pop()
            while len(displayletters) > 0 : displayletters.pop()
            while len(hangmanpics) > 0 : hangmanpics.pop()
            gamewords[:]=newgamewords
            hangmangame() 
```

这是一些代码...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:23:05.407

您可以使用切片分配替换列表中的元素（就地）：

```
word_list = [ 'foo','bar','baz' ]
new_list = [ 'qux','tux','lux', 'holy cow!  python is awesome' ]

word_list[:] = new_list
print(word_list)  #[ 'qux','tux','lux', 'holy cow!  python is awesome' ] 
```

`new_list`甚至`old_list`不需要相同的长度。

* * *

如果您愿意，您也可以仅将列表的一部分替换为另一个列表的一部分：

```
word_list = [ 'foo','bar','baz' ]
new_list = [ 'qux','tux','lux', 'holy cow!  python is awesome' ]

word_list[1:-2] = new_list[:-1]
print word_list #['foo', 'qux', 'tux', 'lux', 'bar', 'baz'] 
```

# knockout.js - 按钮上的淘汰赛自定义绑定

> ID：14164338
> 
> 赞同：0
> 
> 时间：2013-01-04T20:20:46.233
> 
> 标签：knockout.js, ko-custom-binding

我在创建自定义绑定时遇到了一些问题。据我了解，绑定的更新回调应该在每次视图模型更改时触发。

我创建了一个小例子。

[http://jsfiddle.net/alexmaie/pbEmS/](http://jsfiddle.net/alexmaie/pbEmS/)

```
 ko.bindingHandlers.testBinding = {

     update: function(element, valueAccessor, allBindingsAccessor, viewModel,       bindingContext) {
//just for testing purposes
     alert("update");
  }
};

$(document).ready(function() {
function AppViewModel() {
    var self = this;
    self.firstName = ko.observable("Bert");

}
ko.applyBindings(new AppViewModel());
});​ 
```

在那里我将绑定附加到一个按钮。绑定的更新执行一次，然后再也不执行，即使我更改了 observable 的数据。

我想使用这种方法来实现 canExecute 绑定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:56:10.393

绑定在 a 内部实现`computed observable`，因此它们根据实际访问的 observables/computeds 跟踪依赖关系。

因此，这意味着在您的`update`函数中，您可能希望访问传递给它的 observable 的值，如下所示：

```
 ko.bindingHandlers.testBinding = {   
      update: function(element, valueAccessor) {
         //dependency is created here
         var value = ko.utils.unwrapObservable(valueAccessor());
         alert("update " + value);
      }
   } 
```

更新小提琴：http: [//jsfiddle.net/rniemeyer/pbEmS/2/](http://jsfiddle.net/rniemeyer/pbEmS/2/)

# c - 读取二进制文件到链表

> ID：14164342
> 
> 赞同：1
> 
> 时间：2013-01-04T20:20:48.327
> 
> 标签：c, list, binary

我一直在尝试在二进制文件和链表之间进行读写。有人可以解释我做错了什么吗？

节省：

```
currentContact = firstContact;

while( currentContact != NULL )
{
fwrite (currentContact->firstName, sizeof currentContact->firstName, 1, myFile);
fwrite (currentContact->surname, sizeof currentContact->surname, 1, myFile);
fwrite (&currentContact->age, sizeof (int), 1, myFile);
fwrite (currentContact->telephone, sizeof currentContact->telephone, 1, myFile);
currentContact = currentContact->next;
} 
```

加载：

```
 fread( &numContacts, sizeof( int ), 1, myFile );            
  newContact = realloc( newContact, sizeof( struct Contact ) * 1 );
  countFile = 1;
  while (fread(newContact, sizeof( struct Contact ), 1, myFile))
  {
     fread(newContact->firstName, sizeof newContact->firstName, 1, myFile);
     fread(newContact->surname, sizeof newContact->surname, 1, myFile);
     fread((&newContact->age), sizeof (int), 1, myFile);
     fread(newContact->telephone, sizeof newContact->telephone, 1, myFile);

     if (countFile == 1)
     {
        firstContact = newContact;
        newContact = NULL;
     }
     else
     {
        currentContact = firstContact;
        count = 0;
        while( count != countFile )
        {
           if( strcmp( newContact->surname, currentContact->surname ) < 0 )
           {
              newContact->next = currentContact->next;
              currentContact->next = newContact;
           }
           currentContact = currentContact->next;
        }

     newContact = NULL;
     }

     countFile++;               
  }
  fclose( myFile ); 
```

编辑：

应用一些更改后，通过循环再次解析文件的第二次解析仍然存在错误......

```
 newContact = realloc( newContact, sizeof( struct Contact ) * numContacts );
            countFile = 1;
            while (countFile != numContacts + 1)
            {
                fread(newContact, sizeof (struct Contact), 1, myFile);

                if (countFile == 1)
                {
                    firstContact = newContact;
                    newContact = NULL;
                }
                else
                {
                    currentContact = firstContact;
                    count = 0;
                    while( count != countFile )
                    {
                        if( strcmp( newContact->surname, currentContact->surname ) < 0 )
                        {
                            newContact->next = currentContact->next;
                            currentContact->next = newContact;
                        }
                        currentContact = currentContact->next;
                    }

                newContact = NULL;
                }

                countFile++;                    
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:27:33.887

It looks like one problem is the following statement:

```
while (fread(newContact, sizeof( struct Contact ), 1, myFile)) 
```

The above statement is attempting to read something into the memory pointed to by `newContact`. Based on the way the data is written, this *might* not be correct. And based on the fact that the next statements inside the loop read the individual members, then it is not correct. So that `fread` inside the while loop should probably be eliminated.

Some other potential issues:

*   The code should probably be allocating memory for each new contact (since what appears to be the first allocation is only for a single element).
*   The `next` pointer should be initialized to NULL at some point (realloc does not zero out memory).
*   The linking in of new elements appears to have some issues. For example, if the new element is the new first element, then the head pointer `firstContact` should be updated. Also, if the new element is greater than all existing ones, it will not be added to the list.
*   The code should check the result of fread (for error conditions).

**After OP Edits** The allocation for the entire list in one piece is a reasonable idea. However, it is necessary to update newContact to point to the correct piece of memory at each iteration in the loop. You could keep a separate pointer variable for maintaining that information. In addition, the change to read the entire contact in one piece needs to be reflected in the writing code too. As is, the amount of data written and read is unlikely to be the same (e.g., the structure has a next member variable that takes up space and is not reflected in the written data.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:35:14.820

我认为你的问题已经在

```
fwrite (currentContact->firstName 
```

您需要做的是编写整个结构而不是编写每个成员

`fwrite (currentContact, sizeof(type of currentContact),..`// 或任何你的结构体被调用。

# c# - 如何将我的 Gridview 函数链接到 GridView 对象

> ID：14164343
> 
> 赞同：1
> 
> 时间：2013-01-04T20:20:52.103
> 
> 标签：c#, asp.net, visual-studio-2010

我是创建 ASP.Net 页面的新手。我有一个带有`GridView`对象的基本 asp.net 页面，并且我编写了一个`RowDataBound`事件来根据条件更改行颜色。我需要一些关于如何将我的函数/事件链接到实际`GridView`对象的帮助。函数/事件应该放在客户端还是服务器端？

附言。我正在使用 Visual Studio 2010，如果有一种方法可以使用工具栏选项将函数添加到对象中，那就太棒了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:31:32.707

RowDataBound 事件在服务器端处理。您可以在“代码隐藏”文件中包含事件代码/逻辑，也可以在 HTML 文件中添加内联脚本。

```
<%@ Page Language="C#" %>  

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  

<script runat="server">  
    protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e) 
    {   
       // logic here
    }  
</script>  

<html xmlns="http://www.w3.org/1999/xhtml">  
<head id="Head1" runat="server">  
    <title>GridView RowDataBound Event</title>  
</head>  
<body>  
    <form id="form1" runat="server">  
    <div>  
        <h2 style="color:Navy">GridView OnRowDataBound</h2>  
        <asp:SqlDataSource   
            ID="SqlDataSource1"  
            runat="server"  
            ConnectionString="<%$ ConnectionStrings:NorthwindConnectionString %>"  
            SelectCommand="SELECT ProductID, ProductName, UnitPrice FROM Products"  
            >  
        </asp:SqlDataSource>  
        <asp:GridView   
            ID="GridView1"  
            runat="server"  
            DataSourceID="SqlDataSource1"  
            ForeColor="AliceBlue"  
            BackColor="DarkSalmon"  
            BorderColor="Salmon"  
            HeaderStyle-BackColor="Crimson"  
            AllowPaging="true"  
            AutoGenerateColumns="true"  
            DataKeyNames="ProductID"  
            OnRowDataBound="GridView1_RowDataBound"  
            >  
        </asp:GridView>          
    </div>  
    </form>  
</body> 
```

重要的是要注意 OnRowDataBound 属性必须与您的 even 方法同名。例如`OnRowDataBound="GridView1_RowDataBound"`具有与事件处理程序签名相同的名称`GridView1_RowDataBound(object sender, GridViewRowEventArgs e)`。

有关更多信息，请参见[此处](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)。

# semantic-web - OWL 中的唯一名称假设

> ID：14164344
> 
> 赞同：2
> 
> 时间：2013-01-04T20:20:54.180
> 
> 标签：semantic-web, owl

为什么在 OWL 中，我们不使用唯一名称假设？这不是更复杂的事情吗，因为如果两个东西有不同的名字，它不可以不同吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-05T10:03:30.640

OWL 不假定名称是唯一的。原因应该很明显。如果居住在阿根廷的 Esperanza 和居住在法国的 Théophile 都想描述巴拉克·奥巴马，他们将需要他的标识符。Esperanza 认为现任美国总统的明显标识符是`http://dbpedia.org/resource/Barack_Obama`，而 Théophile 认为来自政府数据的标识符更合适，例如`http://data-gov.tw.rpi.edu/vocab/Barack_Obama`. 如果假定名称是唯一的，那么这两个标识符将必然标识两个不同的事物。

宇宙中有很多事物以许多名字而闻名。这就是为什么存在“aka”这个短语的原因。这就是`owl:sameAs`存在的原因。UNA 对数据的消费者有好处，但对出版商有很大的弊端。万维网，因此也就是语义万维网，是基于您无需协调即可发布内容的原则。你永远不必就特定的标识符达成一致来谈论这个世界。

# python - 通过 BeautifulSoup 或其他基于 python 的提取器识别大量文本

> ID：14164350
> 
> 赞同：8
> 
> 时间：2013-01-04T20:21:32.103
> 
> 标签：python, beautifulsoup, web-crawler

给定[一些随机的新闻文章](http://www.cnn.com/2013/01/04/justice/ohio-rape-online-video/index.html?hpt=hp_c2)，我想写一个网络爬虫来找到最大的文本体，然后提取它。目的是提取页面上的物理新闻文章。

最初的计划是使用 a~~`BeautifulSoup findAll(True)`~~并按每个标签的值对其进行排序`.getText()`。**编辑：不要将它用于 html 工作，使用 lxml 库，它基于 python 并且比 BeautifulSoup 快得多。**命令（这意味着提取所有 html 标签）

但这不适用于大多数页面，比如我作为示例列出的页面，因为大量文本被分成许多较小的标签，例如段落分隔符。

有人对这个有经验么？像这样的任何帮助都会很棒。

目前我正在使用 BeautifulSoup 和 python，但愿意探索其他可能性。

* * *

**编辑：几个月后回到这个问题（哇，我听起来像个白痴^），并结合库和自己的代码解决了这个问题。**

以下是一些对这项任务非常有用的 Python 库，按对我的帮助程度排序：

#1 [goose 库](https://github.com/grangier/python-goose)快速、强大、一致 #2[可读性库](https://github.com/gfxmonk/python-readability)内容尚可，平均比 goose 慢，但比锅炉管快 #3 [python-boilerpipe](https://github.com/misja/python-boilerpipe)安装缓慢且难以安装，boilerpipe 库没有故障（最初在 java 中），但是事实上，这个库是建立在 java 中的另一个库之上的，它归因于 IO 时间和错误等。

如果有兴趣，我可能会发布基准。

* * *

**间接相关的库，您可能应该安装它们并阅读它们的文档：**

*   [NLTK 文本处理库](http://nltk.org/)**这个太好了不安装。他们提供文本分析工具以及 html 工具（如清理等）。**
*   [lxml html/xml 解析器](http://lxml.de/)**上面提到过。除了可用性之外，这在各个方面都击败了 BeautifulSoup。这有点难学，但结果是值得的。HTML解析花费的时间要少得多，非常明显。**
*   [python webscraper 库](https://code.google.com/p/webscraping/source/browse/) **我认为这段代码的价值不是lib本身，而是使用lib作为参考手册来构建你自己的爬虫/提取器。它的编码/记录非常好！**

使用 python 这种相当慢的语言的许多价值和力量都来自它的开源库。它们组合在一起使用时特别棒，每个人都应该利用它们来解决他们可能遇到的任何问题！

Goose 库得到了很多可靠的维护，他们刚刚添加了阿拉伯语支持，太棒了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T22:07:21.257

您可能会查看[python-readability](https://github.com/buriy/python-readability)包，它为您完成了这项工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T20:46:02.637

我想说，你真的没有以正确的方式去做，正如上面所有的评论所证明的那样。

也就是说，这可以满足您的需求。

```
from bs4 import BeautifulSoup as BS
import requests
html = requests.get('http://www.cnn.com/2013/01/04/justice/ohio-rape-online-video/index.html?hpt=hp_c2').text
soup = BS(html)
print '\n\n'.join([k.text for k in soup.find(class_='cnn_strycntntlft').find_all('p')]) 
```

它只提取文本，首先通过查找所有`<p>`标签的主容器，然后仅选择`<p>`标签本身来获取文本；忽略`<script>`和其他不相关的。

正如评论中提到的，这仅适用于 CNN——并且可能仅适用于此页面。您可能需要为每个新网页采用不同的策略。

# windows-phone-7 - Windows Phone Toast 通知未在指定时间触发

> ID：14164358
> 
> 赞同：1
> 
> 时间：2013-01-04T20:21:57.063
> 
> 标签：windows-phone-7, windows-phone, windows-phone-8

我正在创建一个带有计时器的应用程序。如果此人离开应用程序，我想显示一个 toast 通知（或某种通知），以便他们知道计时器已结束。我使用“.FromSeconds”使用“PeriodicTask”，但它似乎没有在指定时间触发它。

```
 PeriodicTask periodicTask = new PeriodicTask("TaskTest");
     periodicTask.Description = "Task";
     try
     {
         IsolatedStorageSettings.ApplicationSettings["TimerForSchedule"] = TimeNum;
         ScheduledActionService.Add(periodicTask);
         ScheduledActionService.LaunchForTest("TaskTest", TimeSpan.FromSeconds(((TimeNum*60)))); 
     } 
```

在计划代理项目的“OnInvoke”方法中，我有以下内容：

```
protected override void OnInvoke(ScheduledTask task)
    {
        if (task.Name == "TaskTest")
        {

            int time = Convert.ToInt32(IsolatedStorageSettings.ApplicationSettings["TimerForSchedule"]);
            bool periodic = (bool)(task is PeriodicTask);
            ShellToast toast = new ShellToast();
            toast.Title = "Done";
            toast.Content = "Timer is over";
            toast.Show();
        }
        NotifyComplete();
        ScheduledActionService.Remove("TaskTest");
    } 
```

一切似乎都能正常触发，因为我确实收到了通知，但我没有在预期的时间收到通知。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T00:56:37.890

您的应用程序是否在前台运行？如果是这样，ShellToast 将不会出现。您的应用必须在后台才能显示。在我的另一个[@How can I create a shelltoast?](https://stackoverflow.com/questions/13980864/how-can-i-create-a-shelltoast/13981508#13981508)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T23:15:45.683

我认为您设置运行 PeriodicTask 的时间只是对操作系统的提示，并不意味着它会在那个时候准确地触发它。

# model - 从 2D 阵列创建 3D 模型

> ID：14164360
> 
> 赞同：0
> 
> 时间：2013-01-04T20:22:03.930
> 
> 标签：model, 3d, file-type, mayavi

我目前正在使用 mayavi 来处理 3D 模型。我的点的坐标分为 3 个不同的二维数组，即 x、y 和 z。像这样设置它使我可以轻松地使用网格等功能，并将颜色应用于模型上的每个单独的点。

我有兴趣通过使用诸如搅拌机或草图应用程序之类的程序来制作新模型。这些程序能够以各种格式导出模型，但我不知道有什么可以为我提供 3 个二维数组中的点坐标。有没有人对我如何能够做到这一点有任何想法？

# php - PHP中的套接字连接错误

> ID：14164361
> 
> 赞同：1
> 
> 时间：2013-01-04T20:22:10.247
> 
> 标签：php, sockets, minecraft

我为我的世界服务器编写了一个网站，但我遇到了问题。我的网站是： [Serv-Craft](http://serv-craft.com)

我的主机是 iPage，在服务器部分我检查服务器是离线还是在线。
问题是我检查的所有服务器都在线并且网站输出
它们在线。
我试图将我的网站放在另一台主机上并且我的代码工作
了另一个网站：[Serv-Craft Temp Host](http://servcraft.000space.com)

该怎么办？？
我的代码是：

```
<?php

function GetServerStatus($site, $port)
{
    $status = array("<img src='images/icons/off.png' title='Offline'><br>Offline", "<img       src='images/icons/online.png' title='Online!'><br>Online");
    $fp = fsockopen($site, $port, $errno, $errstr, 0.35);

    if (!$fp) {
        return $status[0];
    } else { 
        return $status[1];
    }
}

print_r(GetServerStatus($server_ip, $server_port)); 

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:24:33.207

如果[允许 url fopen](http://php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)被激活，请检查[phpinfo 。](http://php.net/manual/en/function.phpinfo.php)

# angularjs - angular.js 中的内联条件

> ID：14164371
> 
> 赞同：202
> 
> 时间：2013-01-04T20:22:48.423
> 
> 标签：angularjs, if-statement, ternary-operator

我想知道除了使用 ng-show 等之外，是否有一种方法可以有条件地显示内容。例如，在backbone.js中，我可以在模板中对内联内容做一些事情，例如：

```
<% if (myVar === "two") { %> show this<% } %> 
```

但是在角度上，我似乎仅限于显示和隐藏包含在 html 标签中的东西

```
<p ng-hide="true">I'm hidden</p>
<p ng-show="true">I'm shown</p> 
```

Angular 中推荐的方法是仅使用 {{}} 有条件地显示和隐藏 Angular 中的内联内容，而不是将内容包装在 html 标记中？

* * *

## 回答 #1

> 赞同：756
> 
> 时间：2014-02-22T00:40:19.477

[Angular 1.1.5](https://github.com/angular/angular.js/blob/master/CHANGELOG.md#115-triangle-squarification-2013-05-22)增加了对三元运算符的支持：

```
{{myVar === "two" ? "it's true" : "it's false"}} 
```

* * *

## 回答 #2

> 赞同：140
> 
> 时间：2013-01-04T21:43:56.570

## 编辑：[下面 2Toad 的答案](https://stackoverflow.com/a/21948006/135786)就是您要找的！点赞那个东西

### 如果您使用的是 Angular <= 1.1.4，那么这个答案就可以了：

对此还有一个答案。我发布了一个单独的答案，因为它更像是对解决方案的“精确”尝试，而不是可能的解决方案列表：

这是一个将执行“立即 if”（又名 iif）的过滤器：

```
app.filter('iif', function () {
   return function(input, trueValue, falseValue) {
        return input ? trueValue : falseValue;
   };
}); 
```

并且可以像这样使用：

```
{{foo == "bar" | iif : "it's true" : "no, it's not"}} 
```

* * *

## 回答 #3

> 赞同：61
> 
> 时间：2013-01-04T21:33:21.047

成千上万种剥这只猫的方法。我知道您在 {{}} 之间特别询问，但对于来到这里的其他人，我认为值得展示其他一些选项。

在您的 $scope 上运行**（IMO，这是您在大多数情况下的最佳选择）：**

```
 app.controller('MyCtrl', function($scope) {
      $scope.foo = 1;

      $scope.showSomething = function(input) {
           return input == 1 ? 'Foo' : 'Bar';
      };
   });

 <span>{{showSomething(foo)}}</span> 
```

* * *

ng-show 和 ng-hide 当然：

```
 <span ng-show="foo == 1">Foo</span><span ng-hide="foo == 1">Bar</span> 
```

* * *

[开关](http://docs.angularjs.org/api/ng.directive:ngSwitch)

```
 <div ng-switch on="foo">
   <span ng-switch-when="1">Foo</span>
   <span ng-switch-when="2">Bar</span>
   <span ng-switch-default>What?</span>
 </div> 
```

* * *

Bertrand 建议的自定义过滤器。**（如果您必须一遍又一遍地做同样的事情，这是您的最佳选择）**

```
app.filter('myFilter', function() {
   return function(input) {
     return input == 1 ? 'Foo' : 'Bar';
   }
}

{{foo | myFilter}} 
```

* * *

或自定义指令：

```
app.directive('myDirective', function() {
   return {
     restrict: 'E',
     replace: true,
     link: function(scope, elem, attrs) {
       scope.$watch(attrs.value, function(v) {
          elem.text(v == 1 ? 'Foo': 'Bar');
       });
     }
   };
});

<my-directive value="foo"></my-directive> 
```

就个人而言，在大多数情况下，我会在我的范围内使用一个函数，它可以保持标记非常干净，并且实现起来又快又容易。除非，也就是说，你将一遍又一遍地做同样的事情，在这种情况下，我会按照 Bertrand 的建议，根据具体情况创建一个过滤器或可能的指令。

与往常一样，**最重要的是您的解决方案易于维护**，并且希望是可测试的。这将完全取决于您的具体情况。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-05-21T12:13:32.020

当无法使用 ng-class 时（例如在设置 SVG 样式时），我使用以下有条件地设置类 attr：

```
ng-attr-class="{{someBoolean && 'class-when-true' || 'class-when-false' }}" 
```

相同的方法应该适用于其他属性类型。

（我认为您需要使用最新的不稳定 Angular 才能使用 ng-attr-，我目前使用的是 1.1.4）

我发表了一篇关于使用 AngularJS+SVG 的文章，讨论了这个问题和相关问题。[http://www.codeproject.com/Articles/709340/Implementing-a-Flowchart-with-SVG-and-AngularJS](http://www.codeproject.com/Articles/709340/Implementing-a-Flowchart-with-SVG-and-AngularJS)

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2014-11-03T10:58:16.030

要检查变量内容并具有默认文本，您可以使用：

```
<span>{{myVar || 'Text'}}</span> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-04T21:03:09.503

如果我很好理解你，我认为你有两种方法可以做到这一点。

首先，您可以尝试[ngSwitch](http://docs.angularjs.org/api/ng.directive%3angSwitch)，第二种可能的方法是创建您自己的[filter](http://docs.angularjs.org/guide/dev_guide.templates.filters)。可能 ngSwitch 是正确的方法，但如果您想隐藏或显示内联内容，只需使用 {{}} 过滤器即可。

这是一个以简单过滤器为例的[小提琴。](http://jsfiddle.net/3s8MD/1/)

```
<div ng-app="exapleOfFilter">
  <div ng-controller="Ctrl">
    <input ng-model="greeting" type="greeting">
      <br><br>
      <h1>{{greeting|isHello}}</h1>
  </div>
</div>

angular.module('exapleOfFilter', []).
  filter('isHello', function() {
    return function(input) {
      // conditional you want to apply
      if (input === 'hello') {
        return input;
      }
      return '';
    }
  });

function Ctrl($scope) {
  $scope.greeting = 'hello';
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-06-04T10:51:26.110

Angular UI 库具有内置指令 ui-if，用于模板/视图中的条件，最高 Angular ui 1.1.4

示例：支持 Angular UI 直到 ui 1.1.4

```
<div ui-if="array.length>0"></div> 
```

ng-if 在 1.1.4 之后的所有 Angular 版本中都可用

```
<div ng-if="array.length>0"></div> 
```

如果数组变量中有任何数据，则只会出现 div

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-05-11T21:11:19.107

**所以对于 Angular 1.5.1** （现有的应用程序依赖于其他一些 MEAN 堆栈依赖项是我目前不使用 1.6.4 的原因）

这对我有用，就像 OP 说的一样`{{myVar === "two" ? "it's true" : "it's false"}}`

```
{{vm.StateName === "AA" ? "ALL" : vm.StateName}} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-02-08T17:06:05.617

如果您想在值为“0”时显示“None”，您可以用作：

```
<span> {{ $scope.amount === "0" ?  $scope.amount : "None" }} </span> 
```

或角度js中的真假

```
<span> {{ $scope.amount === "0" ?  "False" : "True" }} </span> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-04-16T10:21:51.080

即使在异国情调的情况下也能工作：

```
<br ng-show="myCondition == true" /> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-10-12T09:54:19.520

我会把我的混在一起：

[https://gist.github.com/btm1/6802312](https://gist.github.com/btm1/6802312)

这将评估 if 语句一次并且不添加监视侦听器但是您可以向具有 set-if 的元素添加一个附加属性，称为 wait-for="somedata.prop" 并且它将等待该数据或属性在之前设置评估 if 语句一次。如果您正在等待来自 XHR 请求的数据，那么该附加属性会非常方便。

```
angular.module('setIf',[]).directive('setIf',function () {
    return {
      transclude: 'element',
      priority: 1000,
      terminal: true,
      restrict: 'A',
      compile: function (element, attr, linker) {
        return function (scope, iterStartElement, attr) {
          if(attr.waitFor) {
            var wait = scope.$watch(attr.waitFor,function(nv,ov){
              if(nv) {
                build();
                wait();
              }
            });
          } else {
            build();
          }

          function build() {
            iterStartElement[0].doNotMove = true;
            var expression = attr.setIf;
            var value = scope.$eval(expression);
            if (value) {
              linker(scope, function (clone) {
                iterStartElement.after(clone);
                clone.removeAttr('set-if');
                clone.removeAttr('wait-for');
              });
            }
          }
        };
      }
    };
  }); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-10-14T11:16:22.387

我认为最近的角度，6+。您有带有 else 条件的 ng-template 连接到标签标识符：

```
<div *ngIf="myVar else myVarNo">Yes</div>
<ng-template #myVarNo><div>No</div></ng-template> 
```

# javascript - javascript 相等返回 false

> ID：14164372
> 
> 赞同：3
> 
> 时间：2013-01-04T20:22:51.837
> 
> 标签：javascript, equality

> **可能重复：**
> [为什么 `null >= 0 && null <= 0` 而不是 `null == 0`？](https://stackoverflow.com/questions/2910495/why-null-0-null-0-but-not-null-0)

所有假设都是真的：

```
alert( "null==undefined:  " + (null == undefined) )
alert( "null==0:          " + (null == 0) )       // why false??
alert( "false=='':        " + (false == '') )
alert( "true==1:          " + (true == 1) )
alert( "true=='1':        " + (true == '1') )
alert( "'1'==1:           " + ('1' == 1) ) 
```

所有假设都是错误的：

```
alert( "null===undefined:  " + (null === undefined) )
alert( "null===0:          " + (null === 0) )  
alert( "false==='':        " + (false === '') )
alert( "true===1:          " + (true === 1) )
alert( "true==='1':        " + (true === '1') )
alert( "'1'===1:           " + ('1' === 1) ) 
```

为什么 (null == 0) 为假

我使用最后一个 chrome 来测试它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T20:27:58.037

类型与`null`类型并不能真正进行比较`number`，因此[比较算法](http://es5.github.com/#x11.9.3)返回`false`. 从规范（省略关联案例）：

1.  如果类型相等，则使用特定于类型的比较。
2.  `null == undefined`是`true`
3.  数字和字符串作为数字比较，字符串被转换
4.  如果比较布尔值，则将其转换为数字并再次比较
5.  如果将数字或字符串与对象进行比较，则将对象转换为基元并再次进行比较 - 不，[`Type(null)`](http://es5.github.com/#Type)是`Null`，不是对象（如在[`typeof`operator](http://es5.github.com/#x11.4.3)中）。
6.  对于其他一切，**`return false`**.

# asp.net - 在gridview价格栏中显示$

> ID：14164375
> 
> 赞同：0
> 
> 时间：2013-01-04T20:23:09.517
> 
> 标签：asp.net, gridview

```
<asp:BoundField DataField="ProductPrice" HeaderText="Price" /> 
```

如何在每一行的上列中的每条记录之前显示一个dolor符号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T20:26:39.100

您可以通过使用将数据值格式化为货币`DataFormatString`

```
<asp:BoundField DataField="ProductPrice" HeaderText="Price" DataFormatString="{0:C}" /> 
```

如果将文化设置为拥有美元货币的国家/地区，则可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:27:18.253

使用 TemplateField 而不是 BoundField，你可以随意格式化它

```
<asp:TemplateField HeaderText="Price">
       <ItemTemplate>
             $<%# Eval("ProductPrice")%>
       </ItemTemplate>
</asp:TemplateField> 
```

# mysql - CONVERT_TZ 是否考虑夏令时？

> ID：14164376
> 
> 赞同：0
> 
> 时间：2013-01-04T20:23:12.683
> 
> 标签：mysql, date, time, convert-tz

> **可能重复：**
> [MySQL CONVERT_TZ()](https://stackoverflow.com/questions/2523286/mysql-convert-tz)

CONVERT_TZ 是否考虑夏令时？

例如：

`CONVERT_TZ('2013-1-1 12:00:00', 'US/Pacific', 'UTC');`

我得到了正确的结果，但我不确定如何测试 DST 场景。

# php - 数据表 - Json 输出 - PostgreSQL - 返回未找到匹配记录

> ID：14164377
> 
> 赞同：1
> 
> 时间：2013-01-04T20:23:15.593
> 
> 标签：php, json, datatables, jquery-datatables

下载并安装[Datatables](http://www.datatables.net/)后，我下载了 [可用于连接到 postgresql 数据库](http://www.datatables.net/development/server-side/php_postgres)的文件，并正确更改了以下几行：

```
$aColumns = array( "ab", "cd");

/* Indexed column (used for fast and accurate table cardinality) */
$sIndexColumn = "id";

/* DB table to use */
$sTable = "bacon";

/* Database connection information */
$gaSql['user']       = "user";
$gaSql['password']   = "pass";
$gaSql['db']         = "db";
$gaSql['server']     = "host"; 
```

配置数据库链接后，我注意到 json 有以下值：

```
{
  "sEcho": 0,
  "iTotalRecords": 2,
  "iTotalDisplayRecords": 2,
  "aaData": [
      ["bacon", "salad"],
      ["1", "2"]
  ]
} 
```

我相信它可以（因为它返回数据）

但是当我打开主页（[代码可以在这里打开](http://justpaste.it/datatablehtml)）时，结果是**没有找到匹配的记录**

我试图找到有关[此处](https://stackoverflow.com/questions/5859540/datatables-json-output-postgresql-returns-null/5860211#5860211)应用的解决方案的一些指导，但它没有给我成功。

我会错过什么？

提前致谢。

# linux - 检查文件修改日期和电子邮件是否已更改

> ID：14164383
> 
> 赞同：7
> 
> 时间：2013-01-04T20:23:27.620
> 
> 标签：linux, solaris

我正在寻找一个 bash 脚本，该脚本将检查文件是否在过去一小时内被修改，如果文件被修改，则通过电子邮件发送警报。该脚本将用于 Solaris 和 Ubuntu。我相信这并不难，但我不是 Linux 管理员。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-04T21:05:02.157

这个怎么样？

```
#!/bin/bash

[[ -z `find /home/spatel/ -mmin -60` ]]

if [ $? -eq 0 ]
then
    echo -e "nothing has changed"
else
    mail -s "file has been changed" spatel@example.com
fi 
```

将此脚本放在每小时 cron 作业中

```
01 * * * * /path/to/myscript 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T03:26:31.787

linux支持该`inotify`命令。您可以使用它来监控文件活动——文件更改、文件创建，无论何时何地。

上面给出的 find 命令不适用于开箱即用的 solaris。对linux来说很好。在 Solaris 上有两种选择：

1.  去 www.sunfreeware.com 下载 gnu coreutils，它将安装 gnu find（find 的上述版本）在`/usr/local/bin`

2.  `touch -t [time string]`编写一个使用 touch 命令的脚本，等待 60 多分钟然后测试文件，唯一的问题是这个脚本永远在后台运行，如果你知道一些 perl 来生成适合创建文件的时间字符串，你可以避免这种情况过去一小时的时间这是永远运行的版本：

    虽然是真的

    ```
    do
       touch dummy

       sleep 3615 # 1 hour 15 seconds 
    ```

    [ file_i_want_to_test -nt dummy ] && echo 'file blah changed' | mailx -s '文件已更改' me@myco.com

    ```
    done 
    ```

# java - 通过删除某些对象来压缩java中的数组

> ID：14164385
> 
> 赞同：0
> 
> 时间：2013-01-04T20:23:38.707
> 
> 标签：java, arrays, null

对于我的计算机科学课，我们应该采用对象数组 {A,C,D,C,C,F,C,G} 并将某个对象的所有元素设置为 null。Object is C: {A,null,D,null,null,F,null,G} 那么我们应该将所有剩余的对象移到数组 {A,D,F,G,null,null, null,null}... 到目前为止，我尝试了这个，但我找不到我的方法的问题：

```
public  static  void  compact  (Object[] vec, Object item) {

    int a=0;
    for(int i=0; i < vec.length; i++)
    {
        if(vec[i]==item)
        {
            vec[i] = null;
        }
        else
        {
            vec[i]=vec[a];
            a++;
        }
    }
    for(int  b=a; b < vec.length-(a-1); b++)
    {
        vec[b]=null;
    }
} 
```

请帮忙？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T20:25:22.767

```
if(vec[i]==item) 
```

永远不要`==`用于比较对象，使用`equals()`（并且，当您定义一个新类时，请注意实现`equals()`并`hashCode()`以实用的方式）

当然可能还有其他问题，但是由于您甚至没有告诉它失败的原因，所以我不会太在意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:26:05.697

我认为你想要 equals() 而不是 == 除非测试 null。您正在使用一个对象。

# java - maven“找不到符号”消息无用

> ID：14164386
> 
> 赞同：87
> 
> 时间：2013-01-04T20:23:47.003
> 
> 标签：java, maven, compiler-errors, settings

这是一个非常简单的问题，它可能是我不知道的某个地方的设置，但谷歌对这个问题特别没有帮助，给出关于编译错误的结果，而不是如何更改编译错误消息。

当我用 maven 构建我的项目时，它会给我错误消息，格式大致如下：

[错误] /path/to/source/Main.java:[13,8] 错误：找不到符号

当我使用 ant 或 javac 构建时，它实际上会告诉我它在错误消息中找不到的符号。maven 给了我一个行号和字符位置，但显示实际符号会更有帮助。上面的行是每个“找不到符号”错误的唯一行。上面或下面没有给出符号的线。我想必须有某种方法让 maven 告诉我这些信息，但我不知道它是什么。我尝试了 -e 选项，因为 mvn 告诉我尝试使用它，但它为错误提供了 maven 回溯，而不是实际符号。

有什么帮助吗？

这是 mvn --version 的输出

```
Apache Maven 3.0.4 (rNON-CANONICAL_2012-10-24_11-25_mockbuild; 2012-10-24 07:25:04-0400)
Maven home: /usr/share/maven
Java version: 1.7.0_09-icedtea, vendor: Oracle Corporation
Java home: /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9.x86_64/jre
Default locale: en_US, platform encoding: UTF-8
OS name: "linux", version: "3.6.6-1.fc17.x86_64", arch: "amd64", family: "unix" 
```

这是一个示例（无用）错误消息，与 maven 的输出完全相同（只是缩短了目录）：

```
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] /path/to/source/SoundEngineFilePanel.java:[33,8] error: cannot find symbol
[ERROR]  class SoundEngineFilePanel
/path/to/source/SoundEngineFilePanel.java:[36,8] error: cannot find symbol
[INFO] 2 errors 
[INFO] ------------------------------------------------------------- 
```

它找不到的符号是“fakeThing”和“fakeThing2”，而不是 SoundEngineFilePanel。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-04T21:51:35.897

这是Maven编译器插件中的一个[错误，我认为与JDK7有关。](https://issues.apache.org/jira/browse/MCOMPILER-158)在 JDK6 上运行良好。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-09-01T15:58:06.300

更新到 3.1：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>3.1</version>
    <configuration>
        <source>1.7</source>
        <target>1.7</target>
    </configuration>
</plugin> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-09-21T15:26:32.063

在我的情况下，问题出在一个未重建的子 jar 中，因为我添加了一个新类，该子 jar 的 pom.xml 与我失败的 pom.xml 作为子父关系（使用`<parent>`标签）无关。所以我重建了错误消失的子罐子。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-07-31T15:38:45.043

我有同样的问题。原因是我有两个JAR文件没有通过Maven依赖添加，所以当我运行时`mvn compile`，控制台显示错误错误：

> 找不到符号，类...”。

要解决这个问题：

1.  从构建路径中删除 JAR 文件
2.  添加到构建路径
3.  跑`mvn compile`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-08-14T23:02:59.770

就我而言，我使用的是范围为`<scope>test</scope>`. 这使得该类在开发时可用，但是在编译时，我收到了这条消息。

转动班级范围以`<scope>provided</scope>`解决问题。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-04-20T12:40:27.387

发生这种情况也是因为此问题，即您在 POM 文件中定义的重新打包。

从 maven 插件下的 pom 文件中删除它。它会工作

```
<executions>
    <execution>
        <goals>
             <goal>repackage</goal>
        </goals>
    </execution>
</executions> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-09-23T10:39:27.107

即使我使用的是 Java 7、maven 2.2.1 并且遇到了同样的错误，我`<scope>tests</scope>`从我的 pom 中删除并使用了

`mvn clean -DskipTests=true install`成功构建我的项目，而无需升级我的 Maven 版本。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-09-15T11:13:06.887

如果您在工作空间中依赖于其他一些项目并且这些项目没有正确构建，则可能会出现此类错误。尝试先构建这样的依赖项目，它可能会有所帮助

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-01-19T06:07:09.333

如果您使用 Intellij 并且上述解决方案不起作用，请尝试：文件 > 使缓存无效/重新启动

这对我有用。有时，当您通过多个分支工作时，IDE 会使用其缓存并且在缓存中找不到文件，因此在编译期间会显示错误。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-04T20:26:25.603

这不是 Maven 的功能；它是编译器的功能。仔细看；您要查找的信息很可能在以下行中。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-08-10T11:10:13.413

解决方案：@在构建组件之前（使用 mvn clean install）。构建整个项目并再次构建您的组件

为什么：
我多次收到此错误。大多数时候我会尝试单独构建我的组件（因为我没有在其他地方进行更改）。

是的，但是最近下载的那个额外的 jar 可能会受到第三方（在他们的组件内部）所做的更改的影响。在整个项目上进行完整的 mvn clean install 为我节省了很多次

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-08-14T15:14:30.133

我得到了这个错误。要解决此问题，在项目 -> BuildPath -> TestNG 上，我必须取消选中“使用项目 TestNG jar”应用并关闭。在下一次运行“mvn compile”时，构建成功。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2013-01-04T20:49:57.363

我猜编译器正在抱怨无效的注释。我注意到 Eclipse 不会显示所有错误，例如注释中数组末尾的逗号。但标准`javac`确实如此。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2016-12-29T18:58:46.420

尝试在项目上运行 Maven 安装时，我在 Eclipse STS 中遇到了类似的问题。我已经更改了该项目的 pom.xml 文件的依赖项中的一些版本以及这些依赖项指向的项目。我通过在我更改的所有项目上运行 Maven 安装然后再次在原始项目上运行安装来解决它。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2017-07-11T02:33:14.697

我对maven有同样的问题。碰巧我的问题是，maven 正在生成具有不同案例名称的文件夹。我期待一个 .service.MyFile 但在目标文件夹中它是 Service/MyFile 并且 java 是区分大小写的。我花了几个小时才找到，建议你检查一下。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2018-07-03T05:08:35.887

通常，当您的编译代码版本与您编写的代码版本不同时，就会出现此错误。比如写一个依赖xxx-1.0.0.jar的代码，其中一个类有方法A，但是xxx-1.1.0.jar中的方法改成了B。如果你用 xxx-1.1.0.jar 编译代码，你会看到错误。

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2018-10-12T17:25:36.037

也许您应该检查 IDE 区分大小写的属性。我遇到了同样的问题，并通过使 Idea 区分大小写（因为我的文件系统区分大小写）来解决它： [https://confluence.jetbrains.com/display/IDEADEV/Filesystem+Case-Sensitivity+Mismatch](https://confluence.jetbrains.com/display/IDEADEV/Filesystem+Case-Sensitivity+Mismatch)

# actionscript-3 - url 请求无法正常工作 - 视频不会停止 as3

> ID：14164389
> 
> 赞同：0
> 
> 时间：2013-01-04T20:24:07.070
> 
> 标签：actionscript-3, flash, youtube, urlrequest

我在 Flash 上创建了一个信息亭，但在外部加载我的内容时遇到了一个非常烦人的问题。我已经导出了我所有的 swf 文件并创建了一个独特的 swf 来加载它上面的所有内容，主菜单位于顶部。主要问题是从 youtube 流式传输视频。它加载完美，但是当我导航到另一个页面时，页面会发生变化，但如果播放过一次，视频不会停止。（声音继续播放）。这是我的代码：

loader1.fla：

```
// Container
var pageLoader:Loader = new Loader();

// Url Requests
var loadRequest1:URLRequest = new URLRequest("basics1.swf");
var loadRequest2:URLRequest = new URLRequest("climatechange.swf");  

// Initial Page Loaded
pageLoader.load(loadRequest1)
addChild(pageLoader)

// Button Functions
function goHome (e:MouseEvent):void{
pageLoader.load(loadRequest1)
addChild(pageLoader)
}
hpage.addEventListener(MouseEvent.CLICK, goHome);

//go to climate change page
function climatePage (e:MouseEvent):void{
pageLoader.load(loadRequest2);
addChild(pageLoader);
}
climatep.addEventListener(MouseEvent.CLICK, climatePage); 
```

气候变化.fla：

```
Security.allowDomain("http://www.youtube.com")

// load video
var pageLoader:Loader = new Loader();

// Url Requests
var loadRequest1:URLRequest = new URLRequest("overviewvideo.swf");

// Intial Page Loaded
pageLoader.load(loadRequest1)
addChild(pageLoader) 
```

概述视频.fla：

```
/*youtube video*/

var player:Object;

var loader:Loader = new Loader();

var context:LoaderContext = new LoaderContext();
context.checkPolicyFile = true;
context.securityDomain = SecurityDomain.currentDomain;
context.applicationDomain = ApplicationDomain.currentDomain;

loader.contentLoaderInfo.addEventListener(Event.INIT, onLoaderInit);
Security.allowDomain("http://www.youtube.com")
loader.load(new URLRequest("http://www.youtube.com/v/6s8iiIFgPMU&list=PL9C6D9D2AF8999F85&index=12"));

function onLoaderInit(event:Event):void {
    addChild(loader);
    loader.x= 40;
    loader.y=130;
    loader.content.addEventListener("onReady", onPlayerReady);
    loader.content.addEventListener("onError", onPlayerError);
    loader.content.addEventListener("onStateChange", onPlayerStateChange);
    loader.content.addEventListener("onPlaybackQualityChange", onVideoPlaybackQualityChange);
}

function onPlayerReady(event:Event):void {
    // Event.data contains the event parameter, which is the Player API ID 
    trace("player ready:", Object(event).data);

    // Once this event has been dispatched by the player, we can use
    // cueVideoById, loadVideoById, cueVideoByUrl and loadVideoByUrl
    // to load a particular YouTube video.
    player = loader.content;
    // Set appropriate player dimensions for your application
    player.setSize(480, 260);
}

function onPlayerError(event:Event):void {
    // Event.data contains the event parameter, which is the error code
    trace("player error:", Object(event).data);
}

function onPlayerStateChange(event:Event):void {
    // Event.data contains the event parameter, which is the new player state
    trace("player state:", Object(event).data);
}

function onVideoPlaybackQualityChange(event:Event):void {
    // Event.data contains the event parameter, which is the new video quality
    trace("video quality:", Object(event).data);
} 
```

任何人都可以帮忙吗？如果有人可以帮助我，我会很高兴。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:47:13.113

在将新的 swf 加载到加载器之前，您需要先调用：

```
pageLoader.unloadAndStop(); 
```

尝试卸载子 SWF 文件内容并停止执行来自已加载 SWF 文件的命令。此方法尝试通过删除对子 SWF 文件的 EventDispatcher、NetConnection、Timer、Sound 或 Video 对象的引用来卸载使用 Loader.load() 或 Loader.loadBytes() 加载的 SWF 文件。因此，子 SWF 文件和子 SWF 文件的显示列表会发生以下情况：

声音停止。舞台事件监听器被移除。删除了 enterFrame、frameConstructed、exitFrame、activate 和 deactivate 的事件侦听器。计时器停止。相机和麦克风实例分离 电影剪辑停止。

[Adobe 文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html#unloadAndStop%28%29)

# java - 在jpanel上画线

> ID：14164392
> 
> 赞同：2
> 
> 时间：2013-01-04T20:24:22.237
> 
> 标签：java, swing, jpanel, draw, graphics2d

我想让它像在 jframe 上而是在 jpanel 上[绘制一个尺子（带有 90 度角刻度线的线） 。](https://stackoverflow.com/questions/3488419/java-draw-a-ruler-line-with-tick-marks-at-90-degree-angle)

所以我尝试了：

```
JFrame f = new JFrame();
JPanel ff = new JPanel();

ff.add(new JComponent() {
...
});

f.add(ff);
... 
```

但我失败了。：（ 如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T20:29:22.420

您可以简单地覆盖`paintComponent(Graphics g){}`ff 并在该方法中绘制您的。

IE

```
JPanel ff = new JPanel(){ 
    public void paintComponent(Graphics g){
        // Draw what you want to appear on your JPanel here.
        // g.drawLine(blah blah blah), etc.
    }
}; 
```

在这种情况下，你不需要这个......

```
ff.add(new JComponent() {
    ...
}); 
```

除非您想按照您提供的链接中的建议实现自定义组件，否则您不需要此通用组件。如果您确实想创建这样的自定义组件，则不需要`ff`，因为 JFrame 已经是可以容纳您的组件的容器。

# bash - 检查后台脚本的返回状态

> ID：14164396
> 
> 赞同：0
> 
> 时间：2013-01-04T20:24:52.393
> 
> 标签：bash

> **可能重复：**
> [shell - 获取后台进程的退出代码](https://stackoverflow.com/questions/1570262/shell-get-exit-code-of-background-process)

我有一个 bash 脚本，它`bash -i -c "blah &"`首先在后台运行另一个 bash 脚本（），然后继续自己的业务！

问题是我如何在最后检查其他脚本是否失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:31:08.807

在后台启动脚本后，记住它的 PID：

```
do_your_job &
your_job_pid=$! 
```

最后，等待这个 PID。等待的结果代码将是后台脚本的结果代码。

```
wait $your_job_pid
echo "Returned $?" 
```

# teamcity - 如何使用 TeamCity Rest API 以 zip 格式获取所有工件？

> ID：14164398
> 
> 赞同：7
> 
> 时间：2013-01-04T20:24:56.963
> 
> 标签：teamcity, teamcity-7.0

[文档](http://confluence.jetbrains.net/display/TCD7/Patterns+For+Accessing+Build+Artifacts)显示了这一点

```
/repository/downloadAll/BUILD_TYPE_ID/BUILD_SPECIFICATION 
```

用于将所有工件作为 zip 文件获取，但这不使用 REST API。REST API 中有没有办法做同样的事情？文档似乎表明存储库链接仅用于向后兼容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-07-15T08:14:16.823

你可以使用这个 URL，它对我有用：

```
http://<TeamcityUrl>/httpAuth/app/rest/builds/id:<BuildId>/artifacts/archived 
```

我使用 TeamCity 9。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T09:55:39.237

从文档：[http ://confluence.jetbrains.net/display/TW/REST+API+Plugin#RESTAPIPlugin-buildartifacts](http://confluence.jetbrains.net/display/TW/REST+API+Plugin#RESTAPIPlugin-buildartifacts)

```
Artifacts:
GET <TeamcityUrl>/httpAuth/app/rest/builds/<buildLocator>/artifacts/files/<artifact relative name> 
```

> 如果您从 TeamCity 构建中下载工件，请考虑使用 teamcity.auth.userId/teamcity.auth.password 系统属性作为下载工件请求的凭据：这样 TeamCity 将有办法记录一个构建使用了另一个构建并将在构建的依赖项选项卡上显示。

你试过这个吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-20T20:29:23.280

我不确定它是否记录在案，但它有效。

```
http://teamcity-url/downloadArtifacts.html?buildId=216886 
```

如果您从 .NET 使用它，则可以使用以下代码：

```
List<string> downloadedFiles = new RemoteTc()
     .Connect(a => a.ToHost("tc").AsGuest())
     .DownloadArtifacts(123, @"C:\DownloadedArtifacts"); 
```

上面的代码使用[了 FluentTc](https://www.nuget.org/packages/fluenttc)库

# javascript - Rangy功能亮点选型表现

> ID：14164400
> 
> 赞同：1
> 
> 时间：2013-01-04T20:24:58.523
> 
> 标签：javascript, rangy

为什么用函数`highlighter.highlightSelection`（marktype）做的注解数量越来越多时，rangy会变得更加迟钝？一开始性能非常好，但随着注释的增加而降低。

那么，我该怎么做才能提高功能的性能`highlighter.highlightSelection()`呢？因为当我选择了我的 html 的许多不同部分时，性能会呈指数级下降。如果您选择很长的 html 片段，则性能将最差。我试图解决这个问题，但我不知道如何解决。

有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T23:39:26.590

性能下降是因为 Rangy 必须在创建新高光时删除并重新创建所有现有高光。这种低效率是荧光笔模块从未作为官方 Rangy 模块包含在内的原因之一。

我正在研究一种不同的、基于字符偏移的方法，可以提高性能，所以有希望。

# wordpress - 使用 wordpress 徽标

> ID：14164401
> 
> 赞同：2
> 
> 时间：2013-01-04T20:25:00.940
> 
> 标签：wordpress

我使用 wordpress 创建了一个博客，它是在我的本地主机上开发的，主题是 LUGADA Theme [found here](http://demo.illuminatheme.com/lugada/)。

我想添加一个大于设计师指定为 300 x 70 的主题中指定尺寸的徽标。当我尝试使用他们提供的工具上传新徽标时，它会强制我将图像裁剪为所需的大小，我该如何解决这个问题？

我查看了 header.php 并发现了这个：

```
<img src="<?php header_image(); ?>" width="<?php echo HEADER_IMAGE_WIDTH; ?>" height="<?php echo HEADER_IMAGE_HEIGHT; ?>" alt="" /> 
```

我尝试将 HEADER_IMAGE_WIDTH 和 HEADER_IMAGE_HEIGHT 取出，但上传工具迫使我裁剪图像

我考虑过硬编码徽标，但希望在更改主题时它仍然可用。我也尝试过追踪 header_image()，我在 wp-includes/theme.php 中找到了它，但无法从那里弄清楚该怎么做。

有人可以建议我如何将符合我要求的徽标放入其中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:16:56.467

我建议对这个主题进行一些调整，它们应该可以达到您正在寻找的结果。

首先，该主题目前正在使用一种已弃用的方法 ( `add_custom_image_header`)，以便您上传您的徽标。让我们暂时停止它，使用更新的函数，如果您对结果满意，可以按照我的说明清理代码。

1.  打开`functions.php`并找到第 135、136 和 176 行并将它们注释掉：

    ```
    //define('HEADER_IMAGE_WIDTH', 300); // use width and height appropriate for your theme
    //define('HEADER_IMAGE_HEIGHT', 300);

    //add_custom_image_header('lugada_header_style', 'lugada_admin_header_style'); 
    ```

2.  在第 176 行之后添加以下代码：

    ```
    $header_defaults = array(
        'width'=>300,
        'height'=>200,
        'flex-height'=>true,
        'flex-width'=>true
    );
    add_theme_support( 'custom-header', $header_defaults ); 
    ```

3.  在您的`header.php`文件中，继续并用以下代码替换第 68 行（删除宽度和高度属性）：

    ```
    <img src="<?php header_image(); ?>" alt="" /> 
    ```

关于此代码的一些注释...

*   您现在正在为自定义标题徽标使用更新的方法。这意味着您将来升级 WordPress 时遇到的问题会更少
*   您现在使用灵活的高度和宽度，因此您可以随意裁剪
*   您可以将这些高度和宽度值更改为您想要的任何值（默认值）
*   您可以找到有关`add_theme_support` [此处](http://codex.wordpress.org/Function_Reference/add_theme_support#Custom_Header)使用的更多信息，并且您可能会找到更多有用的选项。

如果您对结果感到满意并想要清理代码，您可以删除第 135、136 和 176 行并删除名为`lugada_header_style`和的两个函数`lugada_admin_header_style`。

玩得开心！

# ios - 添加多个/连续行 - 在 Coredata 中填充数据库

> ID：14164403
> 
> 赞同：3
> 
> 时间：2013-01-04T20:25:14.810
> 
> 标签：ios, core-data, nsmanagedobjectcontext

如何在 coredata 和 xcode 中插入多个/连续的新行？

```
-(void)LoadDB{
    CoreDataAppDelegate *appdelegate = [[UIApplication sharedApplication]delegate];
    context = [appdelegate  managedObjectContext];

    NSManagedObject *newPref;        
    newPref = [NSEntityDescription
           insertNewObjectForEntityForName:NSStringFromClass([Preference class])
           inManagedObjectContext:context];
    NSError *error;

    [newPref setValue: @"0" forKey:@"pid"];      
    [context save:&error];

    [newPref setValue: @"1" forKey:@"pid"];    
    [context save:&error];
} 
```

上面的代码只是重写了前一个条目。插入下一行的正确程序是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T20:29:04.047

You need a new insert statement for each core data managed object. Otherwise you are only editing the existing MO. Also, you only need to save once at the end.

```
-(void)LoadDB{
    CoreDataAppDelegate *appdelegate = [[UIApplication sharedApplication]delegate];
    context = [appdelegate  managedObjectContext];

    NSManagedObject *newPref;
    NSError *error;

    newPref = [NSEntityDescription
               insertNewObjectForEntityForName:NSStringFromClass([Preference class])
               inManagedObjectContext:context];
    [newPref setValue: @"0" forKey:@"pid"];    

    newPref = [NSEntityDescription
               insertNewObjectForEntityForName:NSStringFromClass([Preference class])
               inManagedObjectContext:context];
    [newPref setValue: @"1" forKey:@"pid"];    

    // only save once at the end.
    [context save:&error];
} 
```

# backbone.js - 在不去服务器的情况下在路由之间保留数据？

> ID：14164406
> 
> 赞同：5
> 
> 时间：2013-01-04T20:25:22.423
> 
> 标签：backbone.js

我正在为我的主干应用程序登录并遇到一个问题，如果不调用服务器，我不知道如何解决。这在我的团队中引发了一场关于其他人如何处理这种事情的讨论，因为我们认为我们将在未来遇到类似的事情。

今天是星期五，我可能只是脑死亡，但这里...

我们有一个用户模型。View 的 login 方法创建一个新的用户模型并调用它的 login 方法，传入用户的凭据和一个回调函数，该函数具有一个包含用户信息的对象。

*这是我们视图的登录方法：*

```
login: function(event){
    event.preventDefault();

    var user = new App.User;
    user.login($('#username').val(), $('#password').val(), 
        (function(msg) {
            // success callback
            if (msg.loggedIn) {
                console.log("Authenticate successful: " + JSON.stringify(msg));
                var data = { user : msg, bob : "bob", trigger:true };
                console.log("Prepared data: " + JSON.stringify(data));
                App.router.navigate('home',data);
            } else {
                console.log("Authenticate unsuccessful: " + JSON.stringify(msg));
            }
        }).bind(this), 
        function(msg) { 
            // failure callback
            console.log("Authenticate communication failure: " + JSON.stringify(msg));
            alert("Communication fail!"); 
            App.router.navigate('login',{trigger:true}); 
        });
} 
```

我们试图弄清楚的是如何最好地使这个模型数据可用于另一条路线（家），以便我们可以在视图中使用它。

所以我有这个路由器：

```
routes: {
'': 'home',
'home': 'home',
'login': 'login'
},
home: function(data){
   console.log(data);
} 
```

一旦我们登录了用户，我们需要更新路由并访问该用户的数据，但不希望返回服务器来获取它。

我很担心，因为我们正在构建一种“向导”，用户可能需要通过一些步骤向前和向后移动，我不想每次浏览应用程序时都必须点击服务器，但它看起来像我们要么需要将内容保存到全局变量（不想这样做），要么每次都返回服务器。我相信其他人也不得不处理类似的问题。只是寻找一些见解。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T21:43:21.780

> “看起来我们要么需要将东西保存到全局变量中（不想这样做）”

显而易见：您将需要保留状态。您的选择是将状态传输到服务器并返回，或者在客户端保持状态。由于您已经确定不想通过服务器传递状态，因此您需要在客户端上的不同页面（路由）之间保留状态。

这就是全局变量的用途。我知道这听起来很*恶心*，但这也是单页应用程序带来的主要好处之一。状态。并且该状态将始终由某个全局对象持有。

管理状态的方式有好有坏。拥有一个`data`你不断分配和重新分配的全局变量显然是最糟糕的方式。您应该找出对您的要求有意义的模式。

如果我正确理解了您的代码示例，那么您要存储的是有关当前用户的信息。看来您已经有了一个全局变量`App`。在我看来，保留某种`session`信息是个好主意：

```
login: function(data){
    doLogin({
        success: function(userData) {
            App.session.currentUser = userData;
            App.router.navigate('home', { trigger:true });
        }
    });
},

home: function(data){
    if(!App.session || !App.session.currentUser) {
        App.router.navigate('login', { trigger:true });
        return;
    }

    var user = App.session.currentUser;
    //do something with user
} 
```

国家不一定是邪恶的。什么是邪恶取决于整个应用程序的全局状态，这很容易导致无法测试的意大利面条代码。但是，如果您在链中尽可能将状态依赖解决为“高位”（例如在路由器中），并使用构造函数和方法参数向下传递值，您仍然可以在其余部分中保持可测试性和无副作用代码库。

对不起，我没有灵丹妙药给你。有一些库，其中有[Backbone.StateManager](https://github.com/crashlytics/backbone.statemanager)，它们可以帮助管理状态、转换等，但本质上它们不会做任何你不能为自己做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T20:31:33.827

使用本地存储！

修改您的代码以执行以下操作：

```
 // success callback
        if (msg.loggedIn) {
            console.log("Authenticate successful: " + JSON.stringify(msg));
            var data = { user : msg, bob : "bob", trigger:true };
            var dataString = JSON.stringify(data);
            console.log("Prepared data: " + dataString;
            window.localStorage.setItem("userdata",dataString);
            App.router.navigate('home',data); 
```

现在，每当您需要检查用户是否已登录时，请执行以下操作：

```
try {
    var userData = window.localStorage.getItem ("userdata");
} catch (e) {
    // Do something
} 
```

如果身份验证从未成功，try-catch 是必要的，以确保您的代码不会出错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-13T19:04:21.763

现在回复为时已晚，但是根据您使用的路由器引擎并且没有局部变量，还有另一种更好的方法可以做到这一点。我将尝试使用适用于所有人的骨干给出一个通用示例。

通常，您的路由器将在一个处理事情的地方。假设它的主干让路由定义如下。

```
var router = Backbone.Router.extend({
routingData: {}, // this will have the routing data
routes: {
    '': 'home',
    'home': 'home',
    'login': 'login'
},
navigate: function(url, data) {
    this.routingData["data"] = data; // whenever navigation is done, this will be reset
    //This is the routing code whichever the f/w may be.
    Backbone.Router.prototype.navigate(route, { trigger: true });
},
home: function(data) {
    var params = this.routingData["data"]; //retreiving the routing params
    console.log(params);
}
}) 
```

现在如果你想传递数据，你可以做

```
router.navigate(<URL>,<SOME DATA>) 
```

# html - 当 DIV 应该拉伸到其内部内容的高度时，它会在视口底部切断

> ID：14164416
> 
> 赞同：1
> 
> 时间：2013-01-04T20:26:07.163
> 
> 标签：html, css

看看这个 jsfiddle 示例：http: [//jsfiddle.net/2YbpZ/5/](http://jsfiddle.net/2YbpZ/5/)

在这里，我将`content`div 拉伸到 100% 的高度，它工作正常。但是，当我在`content`div 中有一些非常高的内容时，就会发生这种情况：http: [//jsfiddle.net/2YbpZ/2/](http://jsfiddle.net/2YbpZ/2/)

如您所见，`content`当我希望 div 继续处理其中的内容时，div 会在视口底部截断。

我知道为什么会发生这种情况，因为它的父元素（html 和 body）被设置为 100% 的高度，而且不能超过这个高度。为了解决这个问题，我添加了一个包装器 div，现在它可以工作了：http: [//jsfiddle.net/2YbpZ/4/](http://jsfiddle.net/2YbpZ/4/)

但是现在还有另一个问题，当`content`div 内的内容不够长而无法伸展到视口之外时，`content`div 不会伸展到页面的高度，如下所示：http: [//jsfiddle.net/2YbpZ/4 /](http://jsfiddle.net/2YbpZ/4/)

所以，问题是，我怎样才能调整它以使`content`div 始终**保持至少**100% 的高度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T20:32:13.200

不要使用包装器，而是在您的#content div 上使用`min-height:100%`而不是。`height:100%`

**注意：** IE6 不支持最小高度。

# android - 具有root权限的Android服务

> ID：14164419
> 
> 赞同：0
> 
> 时间：2013-01-04T20:26:27.743
> 
> 标签：android, android-service, ipc, root, android-binder

我的目标是在 Android 设备上创建一个具有 root 权限的服务，以便我可以从常规应用程序与该服务进行通信。假设我可以访问平台构建，但希望对其进行最少的更改。该服务可以具有进行本机系统调用或使用受限 API 的功能，并且常规应用程序将能够使用 IPC 和该服务来执行需要 root 权限的工作。

在研究了这个之后，似乎一个选项是创建一个本机系统服务，将其注册到 SystemServer.java，然后在 init.rc 中启动该服务。或者，我可以在不使用系统服务器的情况下将服务添加到 init.rc，并使用其他形式的 IPC，如 unix 域套接字。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:50:18.107

将您的服务作为系统服务（在 SystemServer.java 中注册）应该可以达到您的目的。如果您一直需要您的服务，请在启动完成后开始。

# c++ - Better method to increase the size of an array in C++ dynamically

> ID：14164428
> 
> 赞同：0
> 
> 时间：2013-01-04T20:27:31.723
> 
> 标签：c++, arrays, realloc

Suppose I have a character array allocated with new.Now, if I want to modify the size of the array then which of the following two is the best method ? 1\. using realloc function **OR** 2.Allocate a new array, copy the data from old array to the new array and then delete the old array.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:32:34.047

使用 malloc（不是新的）分配块，然后使用 realloc。realloc 知道在扩展块之后有多少可用空间。

```
s2 = realloc(s,<size>);
if (s2) {
   s = s2;
}
else {
   free up s and handle the error
} 
```

我见过的大多数代码都不能正确处理 realloc 的失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T20:33:14.153

您不能将 realloc 可移植地应用于使用 new 分配的缓冲区。因此，只有您的第二种选择是可行的。

考虑切换到 std::vector 和 std::string。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T20:38:16.953

我认为您是从 C 的角度考虑整个问题。

如果您正在处理数组使用 a `vector`，它是动态的并且避免了您在问题中陈述的问题

例如

```
vector v(10); // allocates an array of 10 initialized to 0
v.push_back(42); // added another, so now array is 11 long 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T20:38:57.090

如果`realloc`发现块后没有足够的可用空间，第一个选项也意味着复制。（即使您用于`malloc`分配数组，这也是唯一正确的选择`realloc`。）

但是，如果在每次重新分配时将数组的大小加倍（或将其大小乘以 > 1 的常数），则“将数组加一”操作平均使用*常数*时间。搜索[恒定摊销时间](https://stackoverflow.com/questions/200384/constant-amortized-time)。

假设一个初始大小为 n 的数组。重新分配到新的大小 2n 和复制成本 2n 步骤，但下一个 n“增加”操作是免费的。

顺便说一句，这就是`std::vector`内部实现的方式以及许多其他数组容器。

# objective-c - How to set UIDatePicker to an initial date other than "Today"

> ID：14164430
> 
> 赞同：8
> 
> 时间：2013-01-04T20:27:39.737
> 
> 标签：objective-c, ios6, uidatepicker

I need to set the initial date to something other than "Today" so the user is forced to make a selection. I have found that if the user does NOT make a selection, the date/time is set to "nil"; I can send an UIAlertView, but that is after the fact.

I have looked at SO and Google, but found nothing. How can I do this?

UPDATE: actually, I didn't state it, but the year is not shown, only month, day and am/pm. Without the year, they might not see a future date. T

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T20:40:51.700

一个问题，你怎么知道用户不会选择你设置的特定日期？

我会用

```
[datePicker setDate:[NSDate date]]; 
```

在日期选择器上显示今天的日期。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-04T20:29:13.783

By doing this

```
[datePicker setDate:yourDate]; 
```

in `viewDidLoad` method.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T20:42:38.390

您可以设置未来的日期，然后还设置最小日期，以便用户只能选择未来的日期（如果这是您要查找的日期）。

**以编程方式**

如果您以编程方式执行所有这些操作，则应使用以下属性：

```
@property(nonatomic, retain) NSDate *maximumDate;
@property(nonatomic, retain) NSDate *minimumDate;
@property(nonatomic, retain) NSDate *date; 
```

**使用界面生成器**

如果您通过 xib（或情节提要）文件进行操作，则在属性检查器中您可以设置所有属性：日期，还有最小和最大日期，因此如果您希望用户不能将今天设置为日期，但只有未来的日期，使用最小日期：

![在此处输入图像描述](../Images/8c6dbc848a826e200f3503f04a1a2d75.png)

**PS：**如果您只想显示部分日期，请更改格式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-24T12:52:45.793

```
NSDate *todayDate = [NSDate date];

NSDate *aGo = [todayDate dateByAddingTimeInterval:-6*24*60*60]; 
```

1.  它将为日期选择器设置最小日期

    `[_datePickerView setMinimumDate:aGo];`

2.  当我们打开 datepickerview 时，这里设置了默认的日期位置

    `[_datePickerView setDate:[NSDate date]];`

# msbuild - msbuild failing with "cannot find a a part of the path"

> ID：14164431
> 
> 赞同：0
> 
> 时间：2013-01-04T20:27:42.733
> 
> 标签：msbuild

I'm running msbuild on my .sln file and I'm suddenly getting

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(2291,5):
error SB3554: Cannot write to the output file "C:\Work\product\src\component\
obj\Debug\product.resources". Could not find a part of the path 'C:\Work\
product\src\component\obj\Debug\component.Resources.resources'. [C:\Work\
product\src\component\component.vbproj] 
```

No amount of deleting binaries and retrying helps

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T00:13:07.340

错误状态**product.resources**失败，因为找不到**component.Resources.resources 。**

1.  确保您的项目构建顺序正确，因为资源文件是在编译时构建的，并且找不到继续所需的资源文件。
2.  您可能会尝试的另一个解决方案是删除并重新添加项目中的任何 .resx 文件。

此外，我将创建一个包含资源的共享项目，以便更轻松地管理您的资源。这是一个例子，虽然有点过时。

[如何在一个解决方案中的项目之间使用共享资源文件？](https://stackoverflow.com/questions/3995315/how-to-use-shared-resource-file-between-projects-in-one-solution)

[MSDOCS-在 .NET 应用程序中打包和部署资源](https://docs.microsoft.com/en-us/dotnet/framework/resources/packaging-and-deploying-resources-in-desktop-apps)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-03T16:33:06.837

有类似的间歇性问题，将这些选项添加到复制命令

重试=“10”重试延迟毫秒=“5000”

它似乎成功了

# android - android项目中/res中的文件夹

> ID：14164435
> 
> 赞同：1
> 
> 时间：2013-01-04T20:27:57.630
> 
> 标签：android, eclipse

> **可能重复：**
> [Android 可绘制目录可以包含子目录吗？](https://stackoverflow.com/questions/1077357/can-the-android-drawable-directory-contain-subdirectories)

如何在eclipse中的android项目的文件夹中组织graphics/java/xml文件？我的意思是 - 我应该（存储图形）在我的“drawable-mdpi”中创建文件夹还是作为一个单独的文件夹？

我尝试在drawable中创建文件夹并通过以下方式调用文件：

```
@drawable/photo/fileName 
```

还尝试在 /res 中创建单独的文件夹，并通过以下方式调用：

```
@photo/fileName 
```

但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:30:35.607

您不需要/不能使用单独的文件夹。只需放入每个可绘制文件夹并`@drawable/filename`无需扩展即可访问

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T20:37:39.713

> 我应该（存储图形）在我的“drawable-mdpi”中创建文件夹还是作为一个单独的文件夹？

可悲的是，您无法在`/res`文件夹中创建自己的文件结构...您必须使用[现有的文件夹结构](http://developer.android.com/training/multiscreen/screendensities.html)，例如`/res/drawable-mdpi`并使用`R.drawable.xxx`.

您可以在此处阅读有关此“错误”的信息：[Android 布局文件夹组织](https://stackoverflow.com/q/4905143/1267661)或直接从主要 Android 程序员那里阅读*简要说明：* [Android 可绘制目录可以包含子目录吗？](https://stackoverflow.com/q/1077357/1267661).

# java - 我做了一个小初学者java“数学”但不知道错误在哪里

> ID：14164442
> 
> 赞同：0
> 
> 时间：2013-01-04T20:28:21.537
> 
> 标签：java, math

我制作这些代码只是为了好玩，因为我是一个 15 岁的 Java 初学者，但不知道问题出在哪里，以及在“lol”方法之后要放什么谢谢你的帮助

```
public class mathClass {

    static int a = 10;
    static int b = 15;
    static int c = 22;
    static int result = 0;
    static double counter = 0.25;

    public static void main(String[] args) {
        double resultone;
        double resulttwo;
        double resultthree;
        double resultfour;
        double resultfive;

        resultone = a + b;
        resulttwo = a + c;
        resultthree = a * c;
        resultfour = b / c;
        resultfive = b % a;

        lala(resultone);
        lala(resulttwo);
        lala(resultthree);
        lala(resultfour);
        lala(resultfive);
    }

    public static void lala(double output) {
        result++;
        System.out.println("result " + result + " is " + output);
    }

    public static void  lol() {
        while(counter < 10){
            counter++;
            int number = 0;
            number++;
            System.out.println("Counter "+ number + " is " + counter);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:32:13.690

我认为问题在于除法没有按预期给出结果

代替

```
static int a = 10;
static int b = 15;
static int c = 22;
static int result = 0; 
```

采用

```
static double a = 10.0;
static double b = 15.0;
static double c = 22.0;
static double result = 0.0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T20:32:40.027

`}`您必须在方法之后添加一个右大括号`lol()`。最后少了一个。该括号将关闭类并解决编译错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T20:39:52.533

除了缺少大括号外，您永远不会调用`lol()`main 方法。如果它没有被调用，它将如何运行？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-04T20:41:59.193

> 我也想得到lol方法文本

如果你想让它输出 10 行

```
public static void  lol() {
    for (int i = 0; i < 10; i++) {
       counter++;
       System.out.println("Counter "+ i + " is " + counter);
    }
} 
```

接下来添加：

```
public static void main(String[] args) {
     lol(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-04T20:39:51.950

`resultfour = b / c;`

结果，将一个 int 除以一个 int 会得到一个 int。在这种情况下，15 / 22 = 0，因为 0 是小于或等于 15.0 / 22.0 的最大 int 值。

要么使 a,b,c,d 加倍，要么在进行除法时转换其中一个值...

`resultfour = (double)b / c;`

# vb.net - Ninject dynamic multiple constructor arguments

> ID：14164443
> 
> 赞同：1
> 
> 时间：2013-01-04T20:28:22.860
> 
> 标签：vb.net, winforms, ninject

I have been implementing Dependency Injection into an existing Winforms project and it has been going well so far, however I want to generalise the calling of the Forms, specifically the varying quantity of constructor parameters.

My code is as follows:

```
Public Shared Function GetForm(formObject As BaseObject, _
    parameters As Dictionary(Of String, Object)) As Form

        Select Case formObject.GetType()
            Case GetType(Production.Task)
                Return SMKernel.Kernel.Get(Of Forms.Production.Domain.ManageTask) _
                    (New Parameters.ConstructorArgument() _
                    {New Parameters.ConstructorArgument("task", _
                        CType(formObject, Production.RequiredTask))})
        End Select

    End Function 
```

This works fine, the interface(s) are injected correctly, the constructor parameter "task" is populated and the Form works as expected.

As you can see I have a Dictionary that can contain several parameters which I need to add to the `ConstructorArgument` part of the `Get` method. Looking at the IntelliSense, I should be able to pass in an array of `ConstructorArgument` objects, however no matter what I have tried, it doesn't seem to work for one reason or another.

How do you accomplish this in Ninject if it is at all possible. If this way isn't possible, how can you pass multiple parameters into a Form's constructor via Ninject?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T19:04:54.983

使用已经提供的 ResolutionExtensions

```
 public static T Get<T>(this IResolutionRoot root, params IParameter[] parameters) 
```

然后将它与 LINQ 结合起来

```
Kernel.Get(parameters.Select(kvp => new ConstructorArgument(kvp.Key, kvp.Value)).ToArray()) 
```

提供更多细节，我们可能会为您提供更优雅的方法。

# php - How do I pass one PHP url as a php variable in another URL without that syntax messing up the variables?

> ID：14164446
> 
> 赞同：0
> 
> 时间：2013-01-04T20:28:46.273
> 
> 标签：php

I have a download page that take arguments like the download URL, the download-counter data file url, and the page to return to after downloading. It is arranged like so:

```
start.php?url=...&page=...&file=...
(Download url, redirect page, counter file) 
```

The problem is, when the redirect page contains PHP arguments with ? and & symbols, the URL becomes a confusing mess for PHP to work with.

Example:

```
start.php?url=URLTEXT&page=page?test1=x&test2=xx&file=FILETEXT 
```

What should happen:

```
url=URLTEXT
page=page?test1=x&test2=xx
file=FILETEXT 
```

what happens:

```
url=URLTEXT
page=page?test1=x
test2=xx
file=FILETEXT 
```

How could I substitute characters or somehow make these arguments pass correctly in php?

Thanks for any help you can give.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:35:04.470

好吧，我不确定您的“混乱”网址是什么样的。但是“？”之后的字符串 称为查询字符串，您可以使用

```
urlencode($normalString); //will be encoded for use in URL
urldeocde($queryString); //will be decoded for "normal" use 
```

**编辑：**

这是一些简短的示例：

```
echo "Encode for use in URL: ";
echo urlencode("this is a string & üäöllasdlk<bbb2");
echo "<br />";

echo "Decode to use it in your script: ";
echo urldecode($_SERVER['QUERY_STRING']); 
```

输出：

> 用于 URL 的编码：this+is+a+string+%26+%C3%BC%C3%A4%C3%B6llasdlk%3Cbbb2 解码以在您的脚本中使用它：test=12

（假设您有一个包含变量的查询字符串`test=12`）

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-04T20:30:40.180

只需在您的 URL 字符串上使用 htmlspecialchars 函数：http: [//php.net/manual/en/function.htmlspecialchars.php](http://php.net/manual/en/function.htmlspecialchars.php)

# asp.net - How to embed ASPX page directives in XSLT?

> ID：14164447
> 
> 赞同：1
> 
> 时间：2013-01-04T20:28:55.257
> 
> 标签：asp.net, xslt

I need to use XSLT to output an aspx file that includes special ASP directives like,

```
<%@ Page Title="Squire" Language="C#" MasterPageFile="~/Site1.Master"  %> 
```

and

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server"> 
```

How is this accomplished using XSLT?

The following style sheet excerpt does embed the Page and command does not execute?

```
<?xml version="1.0" encoding="iso-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >
  <xsl:output method="text" cdata-section-elements="aspx" />
  <xsl:template match="/">
    <aspx>
      <![CDATA[<%@ Page="" Title="Top New York City (Manhattan) Plastic Surgeons" Language="C#" MasterPageFile="~/Site1.Master" %>
      <asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">]]>
    </aspx>
    <xsl:apply-templates/>
    <aspx><![CDATA[</asp:Content>]]></aspx>
  </xsl:template>

  <xsl:template match="PlaceDetailsResponse">
    <div class="page">
      <div style="float:left; width:100%;">
        <img src="{//icon}" alt="type" style="float:left" ></img>
        <h1 style="float:left;">
          <xsl:value-of select="@ReportHeading"/>
        </h1>
        <img src="images/info-icon.jpg" alt="information" style="float:right;margin-right:2px; height: 32px;"></img>
        <div id="info"></div>
      </div>
      <![CDATA[
        <script type="text/javascript">
            <!--
                google_ad_client = "ca-pub-3982825388677642";
                /* MobileBottom */
                google_ad_slot = "3380596110";
                google_ad_width = 468;
                google_ad_height = 60;
                //-->
        </script>
        <script type="text/javascript"
          src  ="http://pagead2.googlesyndication.com/pagead/show_ads.js">
        </script>
      ]]>
    </div>

    <div style="font-size:smaller; clear:both; border-bottom:double silver; padding:5px;">
        Sort by: <a href="*" >Places Ranking</a><a href="*" style="margin-left:5px;" >Yelp Ranking</a>
    </div>
  </xsl:template>

<xsl:template match="PlaceDetailsResponse/result">

    ... a couple more templates follow
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:08:16.230

我认为您需要使用 disable-output-escaping - 像这样：

```
<xsl:text disable-output-escaping="yes">&lt;%@ Page="" Title="Top New York City (Manhattan) Plastic Surgeons" Language="C#" MasterPageFile="~/Site1.Master" %&gt;</xsl:text> 
```

# c# - dataset wont update database

> ID：14164448
> 
> 赞同：0
> 
> 时间：2013-01-04T20:29:00.377
> 
> 标签：c#, dataset

I'am trying to update database after row has been deleted from dataset like this:

```
SqlCommand mySelectCommand = new SqlCommand("select * from NameDB", c);
                SqlDataAdapter mySqlDataAdapter = new SqlDataAdapter(mySelectCommand);
                TheNewDataSet ds = new TheNewDataSet();
mySqlDataAdapter.Fill(ds, "NameDB");
DataRow[] FilteredRow = ds.Tables["NameDB"].Select("PName like '" + listBox2.SelectedValue.ToString() + "'");
                foreach (DataRow drr in FilteredRow)
                {
                    ds.Tables["NameDB"].Rows.Remove(drr);
                }
                mySqlDataAdapter.Update(ds, "NameDB");
                c.Close(); 
```

And nothing happened to database, rows not deleted. According to debugger rows filtered correctly and deleted from DataSet normally. Where is mistake?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T01:39:19.297

今天在工作中遇到了类似的问题，所以我想回答一下我所理解的，以便将来对他人和我自己都有一些帮助。

根据我今天的理解， .Remove 将从网格中直观地获取行，但不会在您执行 AcceptChanges 以将更改保存到数据库时将它们标记为要删除的行。正如 TomTom 所提到的，您应该使用 .Delete 代替，它将这些行标记为在持久化时需要删除的行。如果您调试程序并在可视化工具（？）中查看数据集，您会看到差异。如果我是正确的，.Delete 将用感叹号标记行，而.Remove，我认为只是删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:39:39.477

看起来您缺少 sqldataadapter 上的插入/更新/删除命令？

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.updatecommand.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.updatecommand.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T20:42:36.890

好的，首先 - 不是数据集进行更新。永远不能。它是适配器。DataSet 不与数据库通信。

但是：你不删除行，你 - 杀死它们（rows.remove）。

[http://msdn.microsoft.com/en-us/library/feh3ed13(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/feh3ed13(v=vs.80).aspx)

您不应该使用 REMOVE 而是使用 DELETE，这会使该行保持删除状态。你这样做的方式是删除它，所以适配器永远不会看到它。使用“.Delete”，adpater 将该行视为已删除，因此可以对其进行操作。

# python - Trouble using the same image for multiple objects

> ID：14164450
> 
> 赞同：2
> 
> 时间：2013-01-04T20:29:05.903
> 
> 标签：python, animation, python-3.x, pygame, glob

I'm making a game with Pygame and I'm trying to animate asteroids that get hit with a bullet. The animation works fine if there's just one asteroid type on the screen. I run into trouble when there's two identical asteroids on the screen. It seems that the first one on is the only one that uses my animation.

For example, say the game spawns two small asteroids, these are the exact same and I'm using glob.glob to get the 4 animation images, then I'll just use those images to create a little animation by looping over them. This works with one of the asteroids, the other will not play the animation. I'm thinking it must be because only one object can use specific images at any one time?

I'm sorry for the terrible explaination.

Here's the asteroid class I have and the call to create the animation:

```
class Asteroid(pygame.sprite.Sprite):
    def __init__(self, screen, size):
        pygame.sprite.Sprite.__init__(self)
        self.screen = screen
        self.size = size
        self.pos_x = random.randint(100,900)
        pos_y= random.randint(100, 700)
        self.pos_y = -pos_y
        self.vel_y = 3
        self.update_main = True
        self.animation_path = ""

        #load the image then put it above the screen, ready to drop
        if self.size == "small":
            self.asteroid_image = pygame.image.load("asteroid_small.tga")
            self.animation_path = "C:/Programming/Stupid Games/Alien Invasion/animations/asteroid_small/*.tga"
        elif self.size == "medium":
            self.asteroid_image = pygame.image.load("asteroid_medium.tga")
            self.animation_path = "C:/Programming/Stupid Games/Alien Invasion/animations/asteroid_medium/*.tga"
        elif self.size == "med_large":
            self.asteroid_image = pygame.image.load("asteroid_med_large.tga")
            self.animation_path = "C:/Programming/Stupid Games/Alien Invasion/animations/asteroid_med_large/*.tga"
        elif self.size == "small_med":
            self.asteroid_image = pygame.image.load("asteroid_small_med.png")
        elif self.size == "small_1":
            self.asteroid_image = pygame.image.load("small1.tga")
            self.animation_path = "C:/Programming/Stupid Games/Alien Invasion/animations/small/*.tga"
        else:
            self.asteroid_image = pygame.image.load("asteroid_large.tga")
            self.animation_path = "C:/Programming/Stupid Games/Alien Invasion/animations/asteroid_large/*.tga"

        #make the asteroid transparent
        corner = self.asteroid_image.get_at((0,0))
        self.asteroid_image.set_colorkey(corner, RLEACCEL)

        #randomly rotate the image
        self.new_asteroid_image = pygame.transform.rotate(self.asteroid_image, random.randint(0,340))

        self.rect = self.new_asteroid_image.get_rect()
        self.rect.x, self.rect.y = ((self.pos_x, self.pos_y))
        self.start_animate = False
        self.times = 0

        #load the asteroid animation
        self.animation = glob.glob(self.animation_path)
        self.animation.sort()
        self.animation_pos = 0
        self.animation_max = len(self.animation)-1
        self.animation_speed_init = 50
        self.animation_speed = self.animation_speed_init

    def update(self):
        #if asteroid has left the screen, place it back to the top
        if self.rect.y > 900:
            pos_y = random.randint(100,500)
            self.rect.y = -pos_y
            self.rect.x = random.randint(100,900)

        self.rect.y += self.vel_y
        self.position = self.rect.x, self.rect.y
        self.screen.blit(self.new_asteroid_image.convert(), self.position)

        if self.start_animate == True:
            self.animation_speed += 25
            if self.animation_speed > 60:
                self.update_main = False
                self.new_asteroid = pygame.image.load(self.animation[self.times])
                corner = self.new_asteroid.get_at((0,0))
                self.new_asteroid.set_colorkey(corner, RLEACCEL)
                self.new_asteroid_image = self.new_asteroid
                self.animation_speed = 0
                self.animation_pos += 1
                self.times += 1

            if self.times > self.animation_max:
                self.kill()

    def start_animation(self):
        self.start_animate = True

#create asteroids at the start of the game
if keys[K_SPACE]:
    game_over = False
    player = Space_Ship("space_ship.tga", screen)
    asteroid_small = Asteroid(screen, "small")
    asteroid_large = Asteroid(screen, "large")
    asteroid_medium = Asteroid(screen, "medium")
    asteroid_med_large = Asteroid(screen, "med_large")
    asteroid_group.add(asteroid_small, asteroid_large, asteroid_medium, asteroid_med_large)
    player_group.add(player)
    score = 0

#add asteroids after the game has started
if len(asteroid_group) < difficulty:
    random_asteroid_number = random.randint(0,5)
    if random_asteroid_number == 0:
        #large asteroid
        asteroid_large = Asteroid(screen, "large")
        asteroid_group.add(asteroid_large)
    elif random_asteroid_number == 1:
        #medium asteroid
        asteroid_medium = Asteroid(screen, "medium")
        asteroid_group.add(asteroid_medium)
    elif random_asteroid_number == 2:
        #medium large asteroid
        asteroid_med_large = Asteroid(screen, "med_large")
        asteroid_group.add(asteroid_med_large)
    elif random_asteroid_number == 3:
        #small medium asteroid
        asteroid_small_med = Asteroid(screen, "small_med")
        asteroid_group.add(asteroid_small_med)
    elif random_asteroid_number == 4:
        #small_1 asteroid
        asteroid_small_1 = Asteroid(screen, "small_1")
        asteroid_group.add(asteroid_small_1)
    else:
        #small asteroid
        asteroid_small = Asteroid(screen, "small")
        asteroid_group.add(asteroid_small)

#bullet - asteroid collision
collisions = pygame.sprite.groupcollide(bullet_group, asteroid_group, True, False)
if collisions != None:
    for i in collisions.values():
            for sprite in i:
                channel2.play(asteroid_audio)
                if sprite == asteroid_large:
                    score += 3
                    sprite.start_animation()
                elif sprite == asteroid_small_1 or sprite == asteroid_med_large or sprite == asteroid_medium or sprite == asteroid_small:
                    score += 1
                    sprite.start_animation()
                else:
                    score += 1
                    sprite.kill() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-24T03:31:41.947

尽管我不能确定，因为您调用 update 的位置没有显示，但我对它为什么会这样做有一些想法。似乎没有调用第二颗小行星的更新。这可能有几个原因。第一个原因是如果您不实施群组来更新您的小行星。基本上，如果您只调用小行星的单个实例，第二个将不会做任何事情，甚至会出现在屏幕上。如果是这种情况，您将需要创建一个组，也许是一个渲染更新组，但即使是一个列表也可以。这意味着您可以执行以下操作：

```
asteroids.update() 
```

或者

```
for asteroid in asteroids:
    asteroid.update() 
```

上面的两个代码假设你有某种小行星分组，称为小行星。

如果您正在实施组，另一个可能的问题是，如果第二颗小行星没有被添加到该组中。**如果您在init**函数中告诉它将自己添加到组中，则不会出现此问题，但是，如果您在此函数之外调用它，则在创建第二个小行星时可能不会这样做。要解决这个问题，只需将添加小行星的部分移动到一个组中，该组将更新为小行星的**init**函数。

# javascript - Firefox 中奇怪的 JavaScript

> ID：14164455
> 
> 赞同：1
> 
> 时间：2013-01-04T20:29:22.970
> 
> 标签：javascript, jquery, object, coding-style

有人可以向我解释为什么 undefined 仅在 firefox 中为 document.write 在最后一行打印。当第一个 document.write 被删除时，它工作得很好，而且它似乎只在 Firefox 中是这样的。

```
document.write("Hello <br />");
myVar = 55;
document.write(window.myVar); 
```

[http://jsfiddle.net/43pbj/1/](http://jsfiddle.net/43pbj/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T20:52:28.447

这是因为 jsfiddle。您将脚本包装在一个匿名函数中，该函数使用 mootools 的`addEvent()`函数绑定到页面的 onload 事件。由于某种原因，在 onload 事件中运行代码会导致范围不在`window`Firefox 中。

如果您查看页面源代码，则代码如下所示：

```
<script type='text/javascript'>//<![CDATA[ 
window.addEvent('load', function() {
document.write("Hello <br />");
myVar = 55;
document.write(window.myVar);

});//]]> 
</script> 
```

如果您在没有任何库的情况下运行相同的脚本并且无论如何它都不能正常工作：http: [//jsfiddle.net/43pbj/4/](http://jsfiddle.net/43pbj/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:32:24.700

您正在`myVar`从`window`对象调用，但没有将其设置为这样。

执行以下任一操作：

```
window.myVar = 55;
document.write(window.myVar); 
```

或者：

```
var myVar = 55;
document.write(myVar); 
```

**编辑：**

`window`请注意，除非您绝对需要附加到对象的变量，否则我会选择第二个选项。

# javascript - Donut Slices Not Visible On Load

> ID：14164459
> 
> 赞同：0
> 
> 时间：2013-01-04T20:30:05.983
> 
> 标签：javascript, highcharts, graphing

Here is a jsFiddle for an issue i have been trying to solve:

[http://jsfiddle.net/kSSYg/](http://jsfiddle.net/kSSYg/)

When the donut chart loads, the slices are not visible, but the legends are. When you hover over, they appear.

Has anyone else encountered this?

**code**

```
$(function () {
    var chart;
    $(document).ready(function() {

        var colors = Highcharts.getOptions().colors,
                        categories = ['Security', 'Interfaces', 'SNMP', 'Management', 'General'],
                        name = 'Rule Categories',
                        data = [{"y":23.53,"drilldown":{"name":"Security","categories":["Pass","Fail"],"data":[11.77,11.77]}},{"y":23.53,"drilldown":{"name":"Interfaces","categories":["Pass","Fail"],"data":[23.53,0]}},{"y":23.53,"drilldown":{"name":"SNMP","categories":["Pass","Fail"],"data":[11.77,11.77]}},{"y":5.88,"drilldown":{"name":"Management","categories":["Pass","Fail"],"data":[5.88,0]}},{"y":23.53,"drilldown":{"name":"General","categories":["Pass","Fail"],"data":[23.53,0]}}];

        // Build the data arrays
        var browserData = [];
        var versionsData = [];
        for (var i = 0; i < data.length; i++) {

            // add browser data
            browserData.push({
                name: categories[i],
                y: data[i].y,
                color: data[i].color
            });

            // add version data
            for (var j = 0; j < data[i].drilldown.data.length; j++) {
                var brightness = 0.2 - (j / data[i].drilldown.data.length) / 5 ;
                versionsData.push({
                    name: data[i].drilldown.categories[j],
                    y: data[i].drilldown.data[j],
                    color: Highcharts.Color(data[i].color).brighten(brightness).get()
                });
            }
        }

        // Create the chart
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'pie'
            },
            title: {
                text: 'Browser market share, April, 2011'
            },
            yAxis: {
                title: {
                    text: 'Total percent market share'
                }
            },
            plotOptions: {
                pie: {
                    shadow: false
                }
            },
            tooltip: {
                valueSuffix: '%'
            },
            series: [{
                name: 'Browsers',
                data: browserData,
                size: '60%',
                dataLabels: {
                    formatter: function() {
                        return this.y > 5 ? this.point.name : null;
                    },
                    color: 'white',
                    distance: -30
                }
            }, {
                name: 'Versions',
                data: versionsData,
                innerSize: '60%',
                dataLabels: {
                    formatter: function() {
                        // display only if larger than 1
                        return this.y > 1 ? '<b>'+ this.point.name +':</b> '+ this.y +'%'  : null;
                    }
                }
            }]
        });
    });

});​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T20:54:40.613

你必须定义自己的颜色吗？如果删除设置颜色的两条线，它会起作用。见[http://jsfiddle.net/kSSYg/2/](http://jsfiddle.net/kSSYg/2/)

消除：

```
color: data[i].color 
```

和

```
color: Highcharts.Color(data[i].color).brighten(brightness).get() 
```

这些行不起作用的原因是您的数据数组对象未定义属性“颜色”

# jquery - Pause scrollTop on hover

> ID：14164462
> 
> 赞同：0
> 
> 时间：2013-01-04T20:30:34.107
> 
> 标签：jquery

Still somewhat new at jQuery, I am using the following to automatically scroll a div with the class name of .scroller when the page loads.

```
$(".scroller").delay(2000).animate({ scrollTop: $('.scroller')[0].scrollHeight}, 50000); 
```

However I would like to stop any scrolling upon hover over that div and start it back when hovering out.

Any thoughts on how to achieve this or should I be using something other than scrollTop for this?

Thanks, Chris

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T20:33:53.550

要在条件下停止动画，您可以使用：`$(".scroller").stop()`

然后，像你一样重新开始滚动，没有延迟。

[http://api.jquery.com/stop/](http://api.jquery.com/stop/)

```
$("#myDiv").hover(
    function(){
        $(".scroller").stop();
    },
    function(){
        $(".scroller").animate({ scrollTop: $('.scroller')[0].scrollHeight}, 50000);
    }
); 
```

# c# - 为什么我的循环从我正在调用的方法返回相同的值？

> ID：14164463
> 
> 赞同：1
> 
> 时间：2013-01-04T20:30:34.483
> 
> 标签：c#, random

> **可能重复：**
> [随机数生成器仅生成一个随机数](https://stackoverflow.com/questions/767999/random-number-generator-only-generating-one-random-number)

我下面的代码正在这样做，我不知道为什么：

如果我的 toEmailAddresses 数组包含 2 个电子邮件地址，`uniqueID[0]`并且`uniqueID[1]`将返回从`Util.CreateRandomPassword(16)`方法调用生成的相同值。

如果我单步执行代码，那么两者都`uniqueID[0]`将`uniqueID[1]`包含应有的不同值。但是如果我像往常一样运行代码，出于某种原因，相同的值会分配给我的`uniqueID`数组： `uniqueID[0]`并且`uniqueID[1]`将包含相同的值。

我什至放入`string tempRandomPassword = null`然后将其分配给从`CreateRandomPassword`方法返回的值，但这也不起作用。

我究竟做错了什么？

```
//toEmailAddresses.Count array will have two e-mail addresses in it.

string[] uniqueID = new string[2];

for (int i = 0; i < toEmailAddresses.Count(); i++)
{
   string tempRandomPassword = null;
   tempRandomPassword = Util.CreateRandomPassword(16);

   uniqueID[i] = tempRandomPassword;
}

        public static string CreateRandomPassword(int passwordLength)
        {
            //http://madskristensen.net/post/Generate-random-password-in-C.aspx

            string allowedChars = "abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNOPQRSTUVWXYZ0123456789";
            char[] chars = new char[passwordLength];
            Random rd = new Random();

            for (int i = 0; i < passwordLength; i++)
            {
                chars[i] = allowedChars[rd.Next(0, allowedChars.Length)];
            }

            return new string(chars);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:32:09.067

这是因为你的方法使用

```
 Random rd = new Random(); 
```

这个 Random 的本地实例将使用时钟自动初始化，但是当两个实例创建得太近（及时）时，它们将使用相同的种子并产生相同的随机序列。

只要您不从多个线程调用它，您就可以使用静态字段作为简单的修复：

```
 private static Random _rd = new Random();

    public static string CreateRandomPassword(int passwordLength)
    {
        string allowedChars = "abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNOPQRSTUVWXYZ0123456789";
        char[] chars = new char[passwordLength];
        // Random rd = new Random();

        ...
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T20:32:25.263

您每次都创建一个新的 Random 对象，并且由于它使用时间作为默认种子，因此您将获得相同的种子，从而获得相同的数字。

使其成为类的一个字段，并且只创建一次。

这就是为什么当你顺便通过它时它起作用的原因。额外的时间允许种子改变并返回不同的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T20:32:42.447

您将`Random`在每次调用时使用默认种子创建一个新实例。如果种子相同，它将产生相同的数字序列。存储实例并将其用于所有调用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-04T20:48:53.547

在循环中使用线程睡眠

```
private void button3_Click(object sender, EventArgs e)
        {
            string[] uniqueID = new string[2];
            string[] toEmailAddresses = new string[2];
            toEmailAddresses[0] = "a@1.com";
            toEmailAddresses[1] = "b@1.com";

            for (int i = 0; i < toEmailAddresses.Count(); i++)
            {
                uniqueID[i] = CreateRandomPassword(16);
                System.Threading.Thread.Sleep(10);               
            }

            for (int i = 0; i < uniqueID.Count(); i++)
                MessageBox.Show(i.ToString() + " : " + uniqueID[i]);
        } 
```

# java - 在 onCreate 方法中使用 performClick 在代码中出现 NullPointerException

> ID：14164468
> 
> 赞同：1
> 
> 时间：2013-01-04T20:30:48.960
> 
> 标签：java, android, exception

**任务：**我试图让我的应用程序读取用户从首选项中选择的国家/地区，然后在应用程序再次使用 setCountry() 重新启动时使用与用户选择的国家/地区相对应的单选按钮上的 performClick() 方法。

**问题：**使用 performClick() 获取 NullPointerException。

**日志猫：**

> E/AndroidRuntime(23373): 引起: java.lang.NullPointerException 01-04 15:20:27.025: E/AndroidRuntime(23373): 在geminide.software.mpg.Main.setcountry(Main.java:256) 01- 04

* * *

**[setcountry() 方法]**（这就是问题发生的地方）

*在首选项设置为的执行单击方法上捕获异常。如果首选项设置为 UK，然后重新打开应用程序，则会在 radiouk.performclick() 上捕获。*

```
public void setcountry() {
    SharedPreferences pref = PreferenceManager
            .getDefaultSharedPreferences(this);
    String value = pref.getString("updates_country", "United States");

    if (value.equals("Europe")) {
        radioeu.performClick(); 
    } else if (value.equals("United States")) {
        radious.performClick();
    } else if (value.equals("United Kingdom")) {
        radiouk.performClick(); ... this is line 256, exception is caught because preferences is set to UK. 
    }
}; 
```

* * *

**[performClick() 应该在 onCreate 方法中调用的单选按钮]**

```
radioeu.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            distancelabel.setText("Number of Kilometers:");
            gastanklabel.setText("  Number of Liters: ");
            unitlabel.setText("L/100km:");
        }
    }); 
```

* * *

**[偏好类]**

```
public class Settings extends PreferenceActivity {

@SuppressWarnings("deprecation")
@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.settings);

    // get the specified preferences using the key declared in
    // preferences.xml
    final ListPreference dataPref = (ListPreference) findPreference("updates_country");

    // get the description from the selected item
    dataPref.setSummary(dataPref.getEntry());

    dataPref.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {

        @Override
        public boolean onPreferenceChange(Preference preference, Object o) {
            // TODO Auto-generated method stub
            preference.setSummary(o.toString());

            return true;
        }
    });
}

} 
```

* * *

**[设置.xml]**

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

<PreferenceCategory
    android:key="first_category"
    android:title="Preferences" >

    <ListPreference
        android:defaultValue="2"
        android:entries="@array/country"
        android:entryValues="@array/countryValues"
        android:key="updates_country"
        android:summary=""
        android:title="Default Country" />
</PreferenceCategory>

</PreferenceScreen> 
```

* * *

**解决方案：**已在全局和本地定义了单选按钮的变量。我删除了本地声明，异常消失了。

*例外：*

```
 RadioButton radioeu, radious, radiouk;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    setcountry();

    RadioButton  radioeu = (RadioButton) findViewById(R.id.euradio);
    RadioButton  radious = (RadioButton) findViewById(R.id.usradio);
    RadioButton  radiouk = (RadioButton) findViewById(R.id.ukradio); 
```

*固定的：*

```
RadioButton radioeu, radious, radiouk;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    setcountry();

    radioeu = (RadioButton) findViewById(R.id.euradio);
    radious = (RadioButton) findViewById(R.id.usradio);
    radiouk = (RadioButton) findViewById(R.id.ukradio); 
```

# c++ - 错误 C2011：“XX”：“类”类型重新定义

> ID：14164472
> 
> 赞同：7
> 
> 时间：2013-01-04T20:31:00.627
> 
> 标签：c++, class

这段代码有这个编译器错误（C2011）。我不知道它有什么问题。

命名空间（Ogre）没有定义`PlaneMovement`. 我也尝试了不同的名称，但仍然出现相同的错误。

```
#include <Ogre.h>

using namespace Ogre;

class PlaneMovement
{
public:
    PlaneMovement(Degree startingAngle, Real velocity = 2, Real gravity = 2);
    Vector2 updateMovement(const FrameEvent& evt);
private:
    Degree currentAngle;
    Real currentVelocityX;
    Real currentVelocityY;
    Real gravity;
    bool top;
}; 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-04T20:31:49.293

包括警卫：

```
#ifndef FILE_H
#define FILE_H

//file contents here

#endif 
```

出于这个确切原因，头文件应该包含保护 - 同一翻译单元中的多个包含可能导致多重定义。

另一种方法是使用

```
#pragma once 
```

但这不是所有编译器都支持的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T12:23:11.373

如果其他人面临这种​​情况，则可能是库包含在项目的属性中，并且该库中的头文件包含在项目文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-21T00:12:12.727

## 不正确的前向声明

Another possible cause, if you're a goof like me, could be that you used `enum` instead of `class` when forward declaring a `class`.

File1.h

```
namespace MyNamespace { enum NotActuallyAnEnum; } 
```

File2.h

```
class NotActuallyAnEnum

{
...
} 
```

This will produce something like the following error:

```
error C2011: 'enum' type redefinition 
```

Obviously the fix is to correct the forward declaration:

```
namespace MyNamespace { class NotActuallyAnEnum; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-24T13:41:10.247

You might also get this error if you have multiple branches of your project on your development station and use a symlink to point to one of them.

Let's suppose you have two different branches of your solution called `Project1` and `Project2` and you let a symlink called `Project` point to either `Project1` or `Project2`.

The idea is that you could switch between branches and the project would always appear to be `Project` to your application and possibly some other tools that expect it there.

**Disclaimer**: yes, version control can switch between branches, but this way you will not have to rebuild the whole application every single time you switch branches. Besides both branches can still be under version control.

Okay, so opening `Project` would open either `Project1` or `Project2` depending on the symlink. The symlink could be removed/created by some simple `mklink_1` and `mklink_2` like script files.

Here comes the pitfall:

If you don't pay attention and directly open the solution at location 1 or 2 directly (instead of following the directory symlink with Visual Studio), the pre-processor might be tricked into mixing `Project1\MyHeader.h` (or `MyProject2\MyHeader.h`) with `MyProject\MyHeader.h`!

Even those are technically the same file, the preprocessor doesn't know about the symlink. So here the `#pragma once` would not save you!

# android - imageView 没有拉伸以适应屏幕

> ID：14164473
> 
> 赞同：5
> 
> 时间：2013-01-04T20:31:04.110
> 
> 标签：android

我有一个drawable，它需要作为背景。它需要拉伸以填充屏幕（忽略纵横比）。

我为 ldpi、mdpi、hdpi 和 xhdpi 提供了合适的尺寸。（我知道它们通过相应的宽度和高度的比例是合适的，够了吗？）

我试图这样做如下：

***在 imageView 上使用 scaleType:fitXY***

> 这确实会在 imageView 周围（内部？）留下白边。

![fitXY 图像](../Images/6ffae23c091cbae85623a7a6cd3447ba.png)

***我不满意的一个解决方法是使用 center 作为 scaleType ，如下所示：***

我不满意，因为平板电脑屏幕上仍然存在问题。 ![在此处输入图像描述](../Images/5339634110b11c3641c7821b2799a7ad.png)

***笔记：***

*   正如您可能已经注意到的那样，我已经在 SO 的其他地方尝试了建议的修复，例如将 Adjust View Boundaries 设置为 true。他们在这里没有帮助。:(
*   我想要一个非编程的答案/修复，就像在 XML 本身中那样。我真的不想编写代码来设置背景图像。生活应该比这简单得多。(:P)

***更新1：***

这是 XML 布局

```
<merge xmlns:android="http://schemas.android.com/apk/res/android" >

    <!-- <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android" -->
    <!-- xmlns:tools="http://schemas.android.com/tools" -->
    <!-- android:id="@+id/FrameLayout1" -->
    <!-- android:layout_width="fill_parent" -->
    <!-- android:layout_height="fill_parent" -->
    <!-- tools:context=".SplashScreen" > -->

    <!--
         This FrameLayout insets its children based on system windows using
         android:fitsSystemWindows
    -->

    <View
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:onClick="onClickTapToContinue"
         >
    </View>

    <ImageView
        android:id="@+id/bg_gradient"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="fill"
        android:adjustViewBounds="true"
        android:contentDescription="@string/this_is_the_background_image"
        android:scaleType="center"
        android:src="@drawable/bg_gradient" />

    <ImageView
        android:id="@+id/bg_artwork"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:adjustViewBounds="true"
        android:contentDescription="@string/artwork_man"
        android:src="@drawable/bg_artwork" />

    <!-- </FrameLayout> -->

    <ImageView
        android:id="@+id/branding"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center|top"
        android:adjustViewBounds="true"
        android:contentDescription="@string/branding_text"
        android:maxHeight="95dp"
        android:paddingTop="5dp"
        android:src="@drawable/title_wlcm" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom|center"
        android:paddingBottom="5dp"
        android:text="@string/tap_continue"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="@android:color/white" />

</merge> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-01T11:30:47.880

不要使用 android:src="..."，而是使用 android:background="..." 属性。希望它有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T20:12:57.893

我现在要使用的技巧是将这些图像集用于手机，也许将另一组图像（和布局？）用于 WVGA（平板电脑）。

> 虽然还没有尝试过。我会尽快发布截图。

编辑：它与图像本身有关的数字。有透明填充物。会要求设计师修复它。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T11:23:01.543

在eclipse中activity的图形化布局中，可以右键activity，然后选择“edit background”。这将允许您将图片设置为背景，覆盖屏幕的所有边缘。希望这会有所帮助，吉姆欢呼

# regex - 使用丰富的字符串魔术从字符串中提取数字

> ID：14164478
> 
> 赞同：4
> 
> 时间：2013-01-04T20:31:13.503
> 
> 标签：regex, scala, pattern-matching

我想提取以下字符串模式的 ID 列表：{(2),(4),(5),(100)}

注意：没有前导或尾随空格。

该列表最多可以有 1000 个 ID。

我想使用丰富的字符串模式匹配来做到这一点。但我沮丧地尝试了20分钟。

谁能帮我想出正确的模式？非常感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T20:44:34.150

这是蛮力字符串操作。

```
scala> "{(2),(4),(5),(100)}".replaceAll("\\(", "").replaceAll("\\)", "").replaceAll("\\{","").replaceAll("\\}","").split(",")

res0: Array[java.lang.String] = Array(2, 4, 5, 100) 
```

这是@pst 在评论中指出的正则表达式。如果您不希望括号将正则表达式更改为`"""\d+""".r`.

```
val num = """\(\d+\)""".r
"{(2),(4),(5),(100)}" findAllIn res0
res33: scala.util.matching.Regex.MatchIterator = non-empty iterator

scala> res33.toList
res34: List[String] = List((2), (4), (5), (100)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T03:29:00.687

```
"{(2),(4),(5),(100)}".split ("[^0-9]").filter(_.length > 0).map (_.toInt) 
```

拆分，其中 char 不是数字的一部分，并且只转换非空结果。

可以修改为包括点或减号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T21:35:17.027

使用提取器对象：

```
object MyList {
  def apply(l: List[String]): String =
    if (l != Nil) "{(" + l.mkString("),(") + ")}"
    else "{}"
  def unapply(str: String): Some[List[String]] = 
    Some(
      if (str.indexOf("(") > 0) 
        str.substring(str.indexOf("(") + 1, str.lastIndexOf(")")) split 
          "\\p{Space}*\\)\\p{Space}*,\\p{Space}*\\(\\p{Space}*" toList
      else Nil
    )
}

// test
"{(1),(2)}" match { case MyList(l) => l }
// res23: List[String] = List(1, 2) 
```

# php - 将变量从 HTML 传递到 PHP 而不使用表单

> ID：14164491
> 
> 赞同：1
> 
> 时间：2013-01-04T20:32:04.783
> 
> 标签：php, html, variables

这可能是不可能的，这就是为什么我找不到答案，但是是否可以在没有表单的情况下将变量从 HTML 传递到 PHP？

我正在尝试创建一个模板，该模板将使用我导入到 Wordpress 页面的 HTML。我希望能够将某些 div 放在模板的不同部分。想想一张桌子，我把 div 放在不同的单元格中。

您能给我的任何帮助将不胜感激。谢谢！

编辑：我还没有创建模板代码，因为我不知道如果没有我的问题的答案。但这是我从中提取的代码示例：

<div id="文本列">

<div class="scarlet_underline"> <p class="toc_dept"><a href="XXX"><img src="XXX" width="112" height="36" alt="Forum" border="0 "/></a></p> <p class="toc_item"><a href="XXX">大学未来；科学的影响；地球工程可以是绿色的吗？矿产储量；改造保护；智能交通；个人健康记录。</a></p> </div>

<div class="scarlet_underline"> <p class="toc_dept"><a href="XXX"><img src="XXX" width="112" height="36" alt="From the Hill" border= "0"/></a></p> <p class="toc_item"><a href="XXX">众议院通过改革海上石油钻探法案；参议院委员会批准竞争力法案；GAO调查基因检测公司；众议院、参议院委员会为 NASA 的未来制定计划；联邦科学技术简介。</a></p> </div>

所以理想情况下，这两个“scarlet_underline” div 将分别被拉出，也许​​通过使用 alt 属性？模板代码将类似于：

<div class="forum"><?php*拉取该 div 的代码*?></div>

<其他代码其他代码>

<div class="hill"><?php*拉取该 div 的代码*?></div>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:34:57.323

> 是否可以在没有表单的情况下将变量从 HTML 传递到 PHP？

是的，这是可能的。PHP 会在请求 URI 的查询部分自动为 Cookie 和参数创建变量。两者都可以从浏览器发送而无需任何 HTML 表单。

```
http://example.com/path/to/index.php?type=animal&name=narwhal#nose
\__/   \_________/ \_______________/ \_____________________/ \___/
 |          |             |                    |               |
scheme   authority       path                query          fragment
                                             ^^^^^ 
```

此请求 URI 将使 PHP 在 [`$_GET`superglobal](http://php.net/reserved.variables.get)中创建两个条目：

```
$_GET['type'];    # animal
$_GET['name'];    # narwhal 
```

另请参阅[来自外部源^(*文档*)](http://php.net/language.variables.external)的变量。

# ruby-on-rails-3 - Rails 身份验证 - *不*使用 Devise 时的潜在陷阱？

> ID：14164492
> 
> 赞同：2
> 
> 时间：2013-01-04T20:32:06.040
> 
> 标签：ruby-on-rails-3, devise

我正在权衡是否推出我自己的身份验证系统（如优秀的[Railscast](http://railscasts.com/episodes/250-authentication-from-scratch-revised)）或使用 Devise。

我的问题是，如果不使用 Devise 而是按照 Railscast 进行某些事情，可能会遇到哪些陷阱？我需要考虑的他们的安全问题是否尚未包含在演员表中？你还能想到其他的陷阱吗？

编辑：为什么我考虑不使用设计？我回避 Devise 的部分原因是我不喜欢它的登录失败保护。Devise 的做法意味着只要知道自己的电子邮件地址，任何人都可以锁定其他人的帐户。在我看来，总的来说，我最好自己动手，而不是彻底了解 Devise 来做出这些改变，特别是如果我在未来的某个时候也需要以自己的方式做其他事情（这似乎很可能）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T04:00:04.017

对于基本身份验证（这意味着只有用户名和密码），推出自己的身份验证不会有任何严重的缺陷。

现在，如果您还想要：

*   用于记住登录用户的 Cookie
*   通过发送包含重置说明的电子邮件来恢复忘记的密码
*   需要电子邮件确认才能注册
*   超时用户会话在特定时间段内没有活动

现在这些将很难实现。

因此，如果您只想要一个基本的身份验证系统，您可以愉快地使用自己的身份验证系统。但是，如果您担心应用程序的未来，那么也许您应该选择 Devise。这并不难理解，它提供了大量的功能，以后当你真正决定使用 Devise 时，你就不必迁移数据了。

编辑：所以，重申我所说的。如果这是一个宠物项目，并且您只想拥有一个基本的身份验证系统和授权系统，您将只允许某些用户查看某些页面，那么您可以自由地实现自己的并随着您的发展而学习。

但是，如果这是更严重的事情，那么我看不出您有任何理由不选择 Devise。它让我想起了人们创建自己的哈希和加密方案时，他们可以（而且应该！）只使用像 bcrypt 这样强大且安全的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T11:22:52.267

不久前我也在问同样的问题。如果您想真正深入研究并花一些时间进行身份验证，请自己制作。但是，如果您想快速获得一些相当标准的东西，以便您可以专注于您的应用程序的功能，我建议您设计。

默认情况下，Lockable 模块似乎也没有打开，但无论哪种方式都可以轻松完成。

```
class User < ActiveRecord::Base
    # Include default devise modules. Others available are:
    # :token_authenticatable, :confirmable,
    # :lockable, :timeoutable and :omniauthable
    devise :database_authenticatable, :registerable,
           :recoverable, :rememberable, :trackable, :validatable
    ...
end 
```

此外，如果您确实使用了 Lockable 模块，因为锁定是基于多次失败的身份验证尝试，您可以在触发锁定之前更改最大尝试次数**`config/initializers/devise.rb`**

```
Devise.setup do |config|
    ...
    # Number of authentication tries before locking an account if lock_strategy
    # is failed attempts.
    config.maximum_attempts = 20
    ...
end 
```

只需快速阅读[https://github.com/plataformatec/devise#devise](https://github.com/plataformatec/devise#devise)

# javascript - 如何获取叶子被丢弃在树中的节点的值

> ID：14164494
> 
> 赞同：2
> 
> 时间：2013-01-04T20:32:08.853
> 
> 标签：javascript, tree, drag-and-drop, extjs4, treenode

我有一个树面板，可以将叶子放到一个节点上。我想获取叶子被丢弃的那个节点的值。

这样做会得到第一个节点，而不是我丢弃叶子的节点

```
Ext.StoreMgr.lookup('myStore').tree.root.childNodes[0].get('nodeName') 
```

我也试过

```
overModel.get('nodeName') 
```

但这在节点展开时不起作用..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T23:08:55.937

```
listeners: {
    drop: function(node, data, overModel, dropPosition,  dropFunction,  eOpts ){
         console.log(data.records[0].parentNode.data);//old parent 
         console.log( overModel.parentNode.data);//new parent
     } 
} 
```

# android - 触摸滑动抽屉（片段）外部时关闭打开的滑动抽屉

> ID：14164499
> 
> 赞同：-1
> 
> 时间：2013-01-04T20:32:15.947
> 
> 标签：android, android-fragments, slidingdrawer

我有一个扩展片段的类。我有一个滑动抽屉，我想做的是，如果滑动抽屉打开，那么当用户触摸滑动抽屉外部时，它应该自动关闭。我的手动打开和关闭代码如下：

```
 final Button slideButton;
        final SlidingDrawer slidingDrawer;
        slideButton = (Button) view.findViewById(R.id.slideButton);
        slidingDrawer = (SlidingDrawer) view.findViewById(R.id.SlidingDrawer);

        slideButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                if(slidingDrawer.isOpened())
                    slidingDrawer.animateClose();
                else
                    slidingDrawer.animateOpen();
            }
        });

        slidingDrawer.setOnDrawerOpenListener(new OnDrawerOpenListener() {

            @Override
            public void onDrawerOpened() {
                slideButton.setBackgroundResource(R.drawable.openarrow);

            }
        });

        slidingDrawer.setOnDrawerCloseListener(new OnDrawerCloseListener() {
            @Override
            public void onDrawerClosed() {
                slideButton.setBackgroundResource(R.drawable.closearrow);
            }
        }); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T02:27:02.330

我不确定你是如何实现滑动抽屉的，但你可以这样做，类似于通过外部触摸关闭键盘，如下所示：

[https://stackoverflow.com/a/11656129/901309](https://stackoverflow.com/a/11656129/901309)

但不要关闭键盘，而是关闭滑动抽屉。您需要将包含除滑动抽屉之外的所有内容的视图（LinearLayout、RelativeLayout 等）传递给 setupUI() 方法。

此外，删除“if(!(view instanceof EditText))”检查。

# java - Java ArrayList 的？扩展接口

> ID：14164501
> 
> 赞同：3
> 
> 时间：2013-01-04T20:32:23.860
> 
> 标签：java, generics, collections, interface, arraylist

我有一组类都实现了具有方法的验证接口`isValid()`。我想将一组对象（所有不同的类）放入一个 ArrayList 中，循环遍历它们并调用`isValid()`每个对象。

这是我的代码

```
Email email = new email();
Address address = new Address();

ArrayList<? extends Validation> myValidationObjects = new ArrayList(); 
```

但是当我尝试这样做时：

```
myValidationObjects.add(email); 
```

我得到：

> ArrayList 类型中的方法 add(capture#2-of ? extends Validation) 不适用于参数（电子邮件）

两者`Email`并`Address`实施验证。

根据[this document](http://docs.oracle.com/javase/tutorial/java/generics/bounded.html)，我应该能够同时使用`extends`接口和子类。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T20:38:04.123

`List<? extends Validation> myValidationObjects`

### 不正确的阅读

“`myValidationObjects`是扩展的对象列表`Validation`。”

### 正确阅读

"`myValidationObjects`可以是扩展 的任何类型的列表`Validation`。例如，它可以是 a`List<RangeValidation>`或 a `List<RegexValidation>`。"

由于没有对象可以合法地添加到 a`List<RangeValidation>`和 a`List<RegexValidation>`中，Java 会阻止您调用`add`这种类型的变量。

您的情况实际上更简单：您需要确定的类型`List<Validation>`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-04T20:35:16.247

您可以使用：

```
List<Validation> myValidationObjects = new ArrayList<>();           // Java 7
List<Validation> myValidationObjects = new ArrayList<Validation>(); // pre Java 7 
```

现在，您可以将实现的类的任何实例添加`Validation`到该列表中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T20:37:12.843

声明`ArrayList<? extends Validation>`意味着一个未知类的列表，该类扩展`Validation`。`Email`与这个未知类不兼容。

您可以使用`ArrayList<Validation>`您的列表。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-04T20:37:57.947

如果泛型类的`T`is `<? extends Foo>`，那么您可以传递给采用的方法的唯一东西`T`是`null`-*不是*任何扩展的子类`Foo`。

原因是这`List<? extends Validation>`并不意味着“扩展验证的事物列表”。您只需`List<Validation>`. 相反，它的意思是“某种类型的列表，使得该类型扩展了 Validation”。

这是一个微妙的区别，但基本上想法是它`List<? extends T>`是 的子类型`List<T>`，因此您*不*希望能够在其中插入任何东西。想想这个案例：

```
List<FooValidation> foos = new ArrayList<>();
List<? extends Validation> validations = foos; // this is allowed
validations.add(new BarValidation()); // not allowed! this is your question
FooValidation foo = foos.get(0); 
```

如果允许第三行，那么最后一行将抛出 ClassCastException。

# html-parsing - 为什么我不能在 windows phone 8 中使用 htmlagilitypack？我还能用什么来解析 WP8 中的 HTML？

> ID：14164504
> 
> 赞同：11
> 
> 时间：2013-01-04T20:32:24.167
> 
> 标签：html-parsing, html-agility-pack, windows-phone-8

为什么我不能在 windows phone 8 中使用 htmlagilitypack？我似乎在所有平台上都受支持，包括 Win8 Win8RT 和 WP7/WP7.5 以及 Silverlight 5。是否有其中一种 DLLS 可以工作？

我还能用什么来解析 WP8 中的 HTML？所有建议都针对 htmlagilitypack。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-09T08:30:02.203

问题似乎是 NuGet 包引用了 WP8 的错误程序集。

默认情况下，它似乎引用了 sl4-windowsphone71 中的二进制文件，手动删除对 HtmlAgilityPack DLL 的引用并引用 sl3-wp 文件夹中的二进制文件消除了依赖问题。

反正我就是这样解决的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T07:22:39.887

正如安东尼所说，只需将 sl4-windowsphone71 的引用替换为 sl3-wp 即可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T12:48:42.050

Windows Phone 8 似乎不喜欢 Silverlight SDK 中的 System.Xml.XPath.dll。我的应用程序在 Windows Phone 7.5 上运行良好，但在 WP 8 上无法运行。我目前正在研究 HTML Agility Pack 的另一种替代方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T01:05:40.163

您可能会[忘记取消阻止 Web 下载的 DLL](https://stackoverflow.com/questions/13698094/referencing-zxing-net-library/13698737#13698737)或忘记更新[NuGet 包管理器](https://stackoverflow.com/questions/13342630/adding-nuget-ndef-library-to-windows-phone-8-project/13353550#13353550)。如果不是这样，请告诉我。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-28T15:45:06.687

htmlagilitypack 的可移植类库版本：

[https://github.com/Deathspike/HtmlAgilityPack-PCL](https://github.com/Deathspike/HtmlAgilityPack-PCL)

它在[nuget](http://www.nuget.org/packages/HtmlAgilityPack-PCL)上！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-08T12:28:04.073

在我的 lib 文件夹中，sl3-wp 文件夹是空的。

我通过从 NuGet Manager 下载 HtmlAgilityPack-PCL 进行了修复

# javascript - Javascript：未定义“窗口”

> ID：14164505
> 
> 赞同：13
> 
> 时间：2013-01-04T20:32:26.747
> 
> 标签：javascript, dom

我正在尝试学习 JavaScript，但是下面的代码给我带来了很多麻烦：

```
window.onload = function () {
    for ( var i = 0; i < seats.length; i++) {
        for ( var j = 0; j < seats.length; j++) {
            document.getElementById(getSeatId(i, j)).onclick = function(evt) {
                getSeatStatus(getSeatId(i, j));
            };
        }
    }
    document.getElementById("search").onclick = findSeat;
    document.getElementById("male_search").onclick = findMaleSeats;
    initSeats();
}; 
```

它来自外部 JS 文件，是唯一链接到页面的文件。`findSeat`, `findMaleSeats`, `getSeatId`, 和`initSeats`都在文件的稍后部分定义。当我双击此文件时，我收到以下错误：

> ```
> Windows Script Host
> Error: 'window' is not defined
> Code: 800A1391 
> ```

`window.onload`我已经尝试将代码移动到文件中的其他位置，为其他许多事情分配不同的函数（甚至是空函数） 。看来我的电脑不知道是什么`window`。如果我尝试在浏览器中打开 HTML，则不会加载任何内容（正如人们所期望的那样）。

有人知道这有什么问题吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-04T20:36:49.040

window 对象表示浏览器中打开的窗口。由于您不是在浏览器中运行代码，而是通过 Windows 脚本主机，解释器将无法找到窗口对象，因为它不存在，因为您不在 Web 浏览器中。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-04T20:39:28.207

> 它来自外部 js 文件，是唯一链接到页面的文件。

好的。

> 当我双击此文件时，出现以下错误

听起来您正在双击/运行一个 .js 文件，该文件将尝试在浏览器之外运行脚本，就像命令行脚本一样。这可以解释这个错误：

`Windows Script Host Error: 'window' is not defined Code: 800A1391`

...不是您在浏览器中看到的错误。当然，浏览器是提供`window`对象的东西。

**附录**：作为一个行动方案，我建议打开相关的**HTML 文件**并查看控制台。如果您在那里看不到任何内容，则很可能您的`window.onload`定义只是在浏览器触发事件*​​后被击中。*`window.onload`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2020-08-07T06:47:44.637

试图访问一个未定义的变量会给你一个`ReferenceError`.

一个解决方案是使用`typeof`：

```
if (typeof window === "undefined") {
  console.log("Oops, `window` is not defined")
} 
```

或尝试捕获：

```
try { window } catch (err) {
  console.log("Oops, `window` is not defined")
} 
```

虽然`typeof window`可能是两者中最干净的，但 try catch 在某些情况下仍然有用。

# r - 使用“gmm”（GMM 估计）时出现“系统在计算上是奇异的”错误

> ID：14164514
> 
> 赞同：7
> 
> 时间：2013-01-04T20:32:43.020
> 
> 标签：r

尝试使用 R 中的 GMM 包来估计线性模型的参数 (af)：

```
LEV1 = a*Macro + b*Firm + c*Sector + d*qtr + e*fqtr + f*tax 
```

宏、公司和部门是具有 n 行数的矩阵。qtr、fqtr 和 tax 是具有 n 个成员的向量。

我有一个名为 unconstrd 的大型数据框，其中包含所有数据。首先，我将这些数据分解为单独的矩阵：

```
v_LEV1 <- as.matrix(unconstrd$LEV1)
Macro <- as.matrix(cbind(unconstrd$Agg_Corp_Prof,unconstrd$R1000_TR, unconstrd$CP_Spread))
Firm <- as.matrix(cbind(unconstrd$ppe_ratio, unconstrd$op_inc_ratio_avg, unconstrd$selling_exp_avg,
                  unconstrd$tax_avg, unconstrd$Mark_to_Bk, unconstrd$mc_ratio))
Sector <- as.matrix(cbind(unconstrd$Sect_Flag03,
                  unconstrd$Sect_Flag04, unconstrd$Sect_Flag05, unconstrd$Sect_Flag06,
                  unconstrd$Sect_Flag07, unconstrd$Sect_Flag08, unconstrd$Sect_Flag12,
                  unconstrd$Sect_Flag13, unconstrd$Sect_Flag14, unconstrd$Sect_Flag15,
                  unconstrd$Sect_Flag17))
v_qtr <- as.matrix(unconstrd$qtr)
v_fqtr <- as.matrix(unconstrd$fqtr)
v_tax <- as.matrix(unconstrd$tax_dummy) 
```

然后，我将 gmm 调用的 x 变量的数据绑定在一起：

```
h=cbind(Macro,Firm,Sector,v_qtr, v_fqtr, v_tax) 
```

然后，我调用 gmm：

```
gmm1 <- gmm(v_LEV1 ~ Macro + Firm + Sector + v_qtr + v_fqtr + v_tax, x=h) 
```

我收到消息：

```
Error in solve.default(crossprod(hm, xm), crossprod(hm, ym)) : 
  system is computationally singular: reciprocal condition number = 1.10214e-18 
```

我提前道歉并承认我是 R 的新手，我以前从未使用过 GMM。GMM 函数非常通用，我查看了网络上可用的示例，但似乎没有什么具体足以帮助我的情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T20:38:49.180

您正在尝试拟合没有满秩的矩阵——尝试排除一些变量和/或查找错误。如果没有您的数据，或者至少是样本，我们不能说更多。

这更像是[Crossvalidated.com](http://crossvalidated.com)的建模问题，而不是 StackOverflow 的编程问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T17:09:49.330

我很确定我的变量之间没有线性依赖关系，但我通过一次添加一个变量的练习来查看导致错误的原因。最后，我请一位同事在 SAS 上运行 GMM，它运行完美，没有错误消息。我不确定 R 版本的问题是什么，但此时我有一个解决方案，并在 R 上的 GMM 上给你。

感谢所有试图提供帮助的人。

# python - 无法在 windows7 中安装 pip 和 selenium

> ID：14164515
> 
> 赞同：-1
> 
> 时间：2013-01-04T20:33:03.197
> 
> 标签：python, python-2.7, pip

我正在使用python 2.7。我已经下载了文件`selenium-2.28.0`并解压到`C:\Python27`. 然后运行命令`python setup.py install`但收到错误。我正在使用 32 位 Windows 7 电脑

```
C:\Users>cd..

C:\>cd C:\Python27\selenium-2.28.0

C:\Python27\selenium-2.28.0>python setup.py install
'python' is not recognized as an internal or external command,
operable program or batch file.

C:\Python27\selenium-2.28.0>setup.py install
Traceback (most recent call last):
  File "C:\Python27\selenium-2.28.0\setup.py", line 17, in <module>
    from setuptools import setup
ImportError: No module named setuptools

C:\Python27\selenium-2.28.0> 
```

可能是什么原因？将解压缩文件与正在发生`pip-1.2.1`的文件夹相同。`selenium`

你能在这里指导我吗？

**编辑**

```
Microsoft Windows [Version 6.1.7600]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Users\Arup Rakshit>cd..

C:\Users>cd..

C:\>cd C:\Python27\selenium-2.28.0>
The syntax of the command is incorrect.

C:\>C:\Python27\selenium-2.28.0
'C:\Python27\selenium-2.28.0' is not recognized as an internal or external comma
nd,
operable program or batch file.

C:\>cd C:\Python27\selenium-2.28.0

C:\Python27\selenium-2.28.0>c:\python27\python.exe setup.py install
Traceback (most recent call last):
  File "setup.py", line 17, in <module>
    from setuptools import setup
ImportError: No module named setuptools

C:\Python27\selenium-2.28.0> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:58:10.440

最后我通过easy_installer解决了我的问题。我已经用 python2.7 安装了所有需要的包。

这是 Youtube 链接[easy_installer](http://www.youtube.com/watch?v=ssQAFIQ4oBU)

希望这对其他人也有帮助！

# javascript - javascript附加点击事件问题

> ID：14164516
> 
> 赞同：0
> 
> 时间：2013-01-04T20:33:07.793
> 
> 标签：javascript

我正在尝试为 a中的标签设置一个`click`事件`<a>``TD`

我有

```
test.prototype.buildData = function() {
 cell = createElement('td', {innerHTML: "<a class='link' onclick='"+this.edit(this)+"'>"+ value + "</a>"});
 this.table.appendChild(cell);

 //many cells..all need to attached the click event

}

test.prototype.edit=function(this){
  this.style.backgroundColor='red'  
} 
```

我想修改点击的`cell` `background color`. 我还需要将`click`事件仅注册到`<a>`标签。我知道我`this.edit(this)`的没有意义。

有没有办法做到这一点？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:40:24.533

`<a>`您可以在创建它们时自动为 -s分配 id

```
var newCellId = 0;
test.prototype.buildData = function() {
  cell = createElement('td',
   {innerHTML: "<a class='link' id='dynamicCellId_"+String(newCellId)+"'"+     value + "</a>"});
  this.table.appendChild(cell);
  newCellId +=1;
} 
```

然后你可以使用`document.getElementById('dynamicCellId_X')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T20:44:36.920

尝试沿着这些方向做一些事情......

```
test.prototype.buildData = function (value) {
    var cell = document.createElement("td"),
        anchor = document.createElement("a");

    anchor.className = "link";
    anchor.addEventListener("click", (function (self) {
        return function () {
            self.edit(this);
        };
    })(this), false);
    anchor.innerHTML = value;

    cell.appendChild(anchor);

    this.table.appendChild(cell);
};

test.prototype.edit = function (el) {
    el.style.backgroundColor = "red";
}; 
```

笔记：

1.  `addEventListener`当您通过方法将函数分配为事件处理程序时，`this`函数内的值是触发事件的 DOM 元素。
2.  for 的第二个参数`addEventListener`是一个函数，它只是一个对象，就像 JavaScript 中的其他所有东西一样。因此，您可以使用一个立即调用的函数表达式，该表达式返回一个包含实际事件处理代码的函数。
3.  `this`如果您是 JavaScript 新手，那么的值可能会很棘手。如果您查看我的 IIFE，它是在该`addEventListener`方法的“click”参数之后的括号内定义的函数，您会注意到我`this`在最后（就在参数之前）作为参数传入`false`。我在这里所做的是`this`从`buildData`等同于`test.prototype`. 但是，IIFE 将其视为`self`参数，因此在返回的函数中，它使用参数调用`self`'s (ie `test.prototype`)`edit`方法，`this`在这种情况下，参数是触发事件的元素。
4.  `test.prototype.edit`将元素作为其单个参数并更改背景颜色。

# java - 无法停止使用 while (true) 循环运行 Web 应用程序的 tomcat 服务器

> ID：14164517
> 
> 赞同：1
> 
> 时间：2013-01-04T20:33:10.073
> 
> 标签：java, tomcat, web-applications

我正在开发一个要部署到 Tomcat 上的 Web 应用程序。当 Tomcat 启动时，我使用一个 servlet（在 web.xml 中）来调用一个 Java 类：

```
<web-app>
    <display-name>Consumer</display-name>
    <servlet>
        <servlet-name>start</servlet-name>
        <servlet-class>com.test.sample.Consumer</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
</web-app> 
```

我的 Consumer.java 订阅了 AMQP 服务器上的队列。我通过使用`while (true)`循环来实现这一点，该循环在独立的 Java 程序中运行良好。Itt 也适用于 Web 应用程序的上下文，但我永远无法停止我的 Tomcat 服务器（在我的 NetBeans IDE 中），我相信 while 循环是罪魁祸首。这是一些代码：

```
public class Consumer {
    public Consumer()
        consume();
    }

    private void consume()

        ...

        while (true) {
            // Await incoming messages from queue
            // Process message
        }

    }

} 
```

有没有更好的方法来处理这个？还是发出停止信号以跳出循环？

谢谢！

* * *

更新为使用 ServletContextListener：

```
public final class ApplicationListener implements ServletContextListener {

    private ScheduledExecutorService scheduler;

    public ApplicationListener() {
    }

    @Override
    public void contextDestroyed(ServletContextEvent event) {
        System.out.println("***** Stopping Consumer *****");
        scheduler.shutdownNow();
    }

    @Override
    public void contextInitialized(ServletContextEvent event) {

        System.out.println("***** Starting Consumer *****");

        scheduler = Executors.newSingleThreadScheduledExecutor();
        scheduler.scheduleAtFixedRate(new ScheduledConsumer(), 0, 15000, TimeUnit.MILLISECONDS);

    }

    public class ScheduledConsumer implements Runnable {
        @Override
        public void run() {
            Consumer k = new Consumer();
            k.consumeOnce();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T14:45:16.540

我有一些建议，但它们要求您稍微修改您的架构，以便更好地使用您的容器环境。

Servlet 容器支持可以获取各种事件通知的“侦听器”。具体来说，其中之一是`ServletContextListener`当上下文（又名 webapp）被启用（通过`contextInitialized`方法）和停止服务（通过`contextDestroyed`方法）时得到通知。

我的建议是执行以下操作：

1.  更改`Consumer`类的构造函数，使其不会自动调用`consume()`; 相反，添加一个公共方法，`consumeOnce`并且根本不使用该级别的循环
2.  写一个`ServletContextListener`有一个`Consumer`和一个`Thread`引用作为成员以及一个`volatile boolean stop`标志的a；在`contextInitialized`它应该创建一个新`Consumer`对象，然后启动一个新的（守护进程）线程：
    *   来电`Consumer.consumeOnce`
    *   要求`Thread.sleep`适当的时间
    *   循环前两个步骤，直到停止标志为真
3.  让您`ServletContextListener`的`contextDestroyed`方法将停止标志设置为`true`并调用`Thread.interrupt`正在运行的线程。

我确定我遗漏了一些确切的细节，但这是一般的想法。当 Tomcat 关闭时，您的代码将收到关闭通知，您可以干净地终止自己的循环线程。如果它在收到信号时没有中止，您可能需要提供一种方法`Consumer`来中止尝试使用它所消耗的任何东西（例如，停止等待从空队列中拉出对象） 。`Thread.interrupt`（例如，如果您使用 an`Object.wait()`来等待监视器通知，那么您需要更改它，以便它使用带有超时的等待，这样您就不会永远阻塞）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-04T20:42:05.480

您必须将带有循环的代码放在不同的线程中，并从您的使用者启动线程。

```
private void consume() {
  Thread x = new Thread(new Runnable() {
    @Override
    public void run() {
      while(true) {
      ....
      }
   });
   x.start();
} 
```

# r - 将大数据帧拆分成更小的段

> ID：14164525
> 
> 赞同：31
> 
> 时间：2013-01-04T20:33:32.973
> 
> 标签：r, split, dataframe

我有以下数据框，我想将其分解为 10 个不同的数据框。我想将最初的 100 行数据框分成 10 行的 10 个数据框。我可以执行以下操作并获得所需的结果。

```
df = data.frame(one=c(rnorm(100)), two=c(rnorm(100)), three=c(rnorm(100)))

df1 = df[1:10,]
df2 = df[11:20,]
df3 = df[21:30,]
df4 = df[31:40,]
df5 = df[41:50,]
... 
```

当然，当初始数据帧较大或无法轻松分解成多个段时，这不是执行此任务的优雅方式。

因此，鉴于上述情况，假设我们有以下数据框。

```
df = data.frame(one=c(rnorm(1123)), two=c(rnorm(1123)), three=c(rnorm(1123))) 
```

现在我想将其拆分为由 200 行组成的新数据帧，以及包含剩余行的最终数据帧。执行此任务的更优雅（又名“快速”）的方式是什么。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-04T20:49:30.613

```
 > str(split(df, (as.numeric(rownames(df))-1) %/% 200))
List of 6
 $ 0:'data.frame':  200 obs. of  3 variables:
  ..$ one  : num [1:200] -1.592 1.664 -1.231 0.269 0.912 ...
  ..$ two  : num [1:200] 0.639 -0.525 0.642 1.347 1.142 ...
  ..$ three: num [1:200] -0.45 -0.877 0.588 1.188 -1.977 ...
 $ 1:'data.frame':  200 obs. of  3 variables:
  ..$ one  : num [1:200] -0.0017 1.9534 0.0155 -0.7732 -1.1752 ...
  ..$ two  : num [1:200] -0.422 0.869 0.45 -0.111 0.073 ...
  ..$ three: num [1:200] -0.2809 1.31908 0.26695 0.00594 -0.25583 ...
 $ 2:'data.frame':  200 obs. of  3 variables:
  ..$ one  : num [1:200] -1.578 0.433 0.277 1.297 0.838 ...
  ..$ two  : num [1:200] 0.913 0.378 0.35 -0.241 0.783 ...
  ..$ three: num [1:200] -0.8402 -0.2708 -0.0124 -0.4537 0.4651 ...
 $ 3:'data.frame':  200 obs. of  3 variables:
  ..$ one  : num [1:200] 1.432 1.657 -0.72 -1.691 0.596 ...
  ..$ two  : num [1:200] 0.243 -0.159 -2.163 -1.183 0.632 ...
  ..$ three: num [1:200] 0.359 0.476 1.485 0.39 -1.412 ...
 $ 4:'data.frame':  200 obs. of  3 variables:
  ..$ one  : num [1:200] -1.43 -0.345 -1.206 -0.925 -0.551 ...
  ..$ two  : num [1:200] -1.343 1.322 0.208 0.444 -0.861 ...
  ..$ three: num [1:200] 0.00807 -0.20209 -0.56865 1.06983 -0.29673 ...
 $ 5:'data.frame':  123 obs. of  3 variables:
  ..$ one  : num [1:123] -1.269 1.555 -0.19 1.434 -0.889 ...
  ..$ two  : num [1:123] 0.558 0.0445 -0.0639 -1.934 -0.8152 ...
  ..$ three: num [1:123] -0.0821 0.6745 0.6095 1.387 -0.382 ... 
```

如果某些代码可能更改了行名，则使用起来会更安全：

```
 split(df, (seq(nrow(df))-1) %/% 200) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-04T21:22:30.230

```
require(ff)
df <- data.frame(one=c(rnorm(1123)), two=c(rnorm(1123)), three=c(rnorm(1123)))
for(i in chunk(from = 1, to = nrow(df), by = 200)){
  print(df[min(i):max(i), ])
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-04T20:40:54.667

如果您可以生成定义组的向量，则可以`split`：

```
f <- rep(seq_len(ceiling(1123 / 200)),each = 200,length.out = 1123)
> df1 <- split(df,f = f)
> lapply(df1,dim)
$`1`
[1] 200   3

$`2`
[1] 200   3

$`3`
[1] 200   3

$`4`
[1] 200   3

$`5`
[1] 200   3

$`6`
[1] 123   3 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-04T20:48:21.363

像这样的东西……？

```
b <- seq(10, 100, 10)
lapply(seq_along(b), function(i) df[(b-9)[i]:b[i], ])

[[1]]
          one        two      three
1  -2.4157992 -0.6232517  1.0531358
2   0.6769020  0.3908089 -1.9543895
3   0.9804026 -2.5167334  0.7120919
4  -1.2200089  0.5108479  0.5599177
5   0.4448290 -1.2885275 -0.7665413
6   0.8431848 -0.9359947  0.1068137
7  -1.8168134 -0.2418887  1.1176077
8   1.4475904 -0.8010347  2.3716663
9   0.7264027 -0.3573623 -1.1956806
10  0.2736119 -1.5553148  0.2691115

[[2]]
          one         two       three
11 -0.3273536 -1.92475496 -0.08031696
12  1.5558892 -1.20158371  0.09104958
13  1.9202047 -0.13418754  0.32571632
14 -0.0515136 -2.15669216  0.23099397
15  0.1909732 -0.30802742 -1.28651457
16  0.8545580 -0.18238266  1.57093844
17  0.4903039  0.02895376 -0.47678196
18  0.5125400  0.97052082 -0.70541908
19 -1.9324370  0.22093545 -0.34436105
20 -0.5763433  0.10442551 -2.05597985

[[3]]
          one         two       three
21  0.7168771 -1.22902943 -0.18728871
22  1.2785641  0.14686576 -1.74738091
23 -1.1856173  0.43829361  0.41269975
24  0.0220843  1.57428924 -0.80163986
25 -1.0012255  0.05520813  0.50871603
26 -0.1842323 -1.61195239  0.04843504
27  0.2328831 -0.38432225  0.95650710
28  0.8821687 -1.32456215 -1.33367967
29 -0.8902177  0.86414661 -1.39629358
30 -0.6586293 -2.27325919  0.27367902

[[4]]
          one        two       three
31  1.3810437 -1.0178835  0.07779591
32  0.6102753  0.3538498  1.92316801
33 -1.5034439  0.7926925  2.21706284
34  0.8251638  0.3992922  0.56781321
35 -1.0832114  0.9878058 -0.16820827
36 -0.4132375 -0.9214491  1.06681472
37 -0.6787631  1.3497766  2.18327887
38 -3.0082585 -1.3047024 -0.04913214
39 -0.3433300  1.1008951 -2.02065141
40  0.6009334  1.2334421  0.15623298

[[5]]
          one         two       three
41 -1.8608051 -0.08589437  0.02370983
42 -0.1829953  0.91139017 -0.01356590
43  1.1146731  0.42384993 -0.68717391
44  1.9039900 -1.70218225  0.06100297
45 -0.4851939  1.38712015 -1.30613414
46 -0.4661664  0.23504099 -0.29335162
47  0.5807227 -0.87821946 -0.14816121
48 -2.0168910 -0.47657382  0.90503226
49  2.5056404  0.27574224  0.10326333
50  0.2238735  0.34441325 -0.17186115

[[6]]
           one        two      three
51  1.51613140 -2.5630782 -0.6720399
52  0.03859537 -2.6688365  0.3395574
53 -0.08695292 -0.5114117 -0.1378789
54 -0.51878363 -0.5401962  0.3946324
55 -2.20482710  0.1716744  0.1786546
56 -0.28133749 -0.4497112  0.5936497
57 -2.38269088 -0.4625695  1.0048914
58  0.37865952  0.5055141  0.3337986
59  0.09329172  0.1560469  0.2835735
60 -1.10818863 -0.2618910  0.3650042

[[7]]
          one        two       three
61 -1.2507208 -1.5050083 -0.63871084
62  0.1379394  0.7996674 -1.80196762
63  0.1582008 -0.3208973  0.40863693
64 -0.6224605  0.1416938 -0.47174711
65  1.1556149 -1.4083576 -1.12619693
66 -0.6956604  0.7994991  1.16073748
67  0.6576676  1.4391007  0.04134445
68  1.4610598 -1.0066840 -1.82981058
69  1.1951788 -0.4005535  1.57256648
70 -0.1994519  0.2711574 -1.04364396

[[8]]
           one        two       three
71  1.23897065  0.4473611 -0.35452535
72  0.89015916  2.3747385  0.87840852
73 -1.17339703  0.7433220  0.40232381
74 -0.24568490 -0.4776862  1.24082294
75 -0.47187443 -0.3271824  0.38542703
76 -2.20899136 -1.1131712 -0.33663075
77 -0.05968035 -0.6023045 -0.23747388
78  1.19687199 -1.3390960 -1.37884241
79 -1.29310506  0.3554548 -0.05936756
80 -0.17470891  1.6198307  0.69170207

[[9]]
           one         two       three
81 -1.06792315  0.04801998  0.08166394
82  0.84152560 -0.45793907  0.27867619
83  0.07619456 -1.21633682 -2.51290495
84  0.55895466 -1.01844178 -0.41887672
85  0.33825508 -1.15061381  0.66206732
86 -0.36041720  0.32808609 -1.83390913
87 -0.31595401 -0.87081019  0.45369366
88  0.92331087  1.22055348 -1.91048757
89  1.30491142  1.22582353 -1.32244004
90 -0.32906839  1.76467263  1.84479228

[[10]]
            one        two       three
91   2.80656707 -0.9708417  0.25467304
92   0.35770119 -0.6132523 -1.11467041
93   0.09598908 -0.5710063 -0.96412216
94  -1.08728715  0.3019572 -0.04422049
95   0.14317455  0.1452287 -0.46133199
96  -1.00218917 -0.1360570  0.88864256
97  -0.25316855  0.6341925 -1.37571664
98   0.36375921  1.2244921  0.12718650
99   0.13345555  0.5330221 -0.29444683
100  2.28548261 -2.0413222 -0.53209956 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-05-16T15:09:34.910

# 将 df 切成 100 万行组，并在 SQL 中一次将 100 万行推送和追加到 df

```
batchsize = 1000000 # vary to your liking

# cycles through data by batchsize
for (i in 1:ceiling(nrow(df)/batchsize)) 
 {
print(i) # just to show the progress

# below shows how to cycle through data 
batch <- df[(((i-1)*batchsize)+1(batchsize*i),,drop=FALSE] # drop = FALSE keeps it from being converted to a vector 

# if below not done then the last batch has Nulls above the number of rows of actual data
batch <- batch[!is.na(batch$ID),] # ID is a variable I presume is in every row

#in this case the table already existed, if new table overwrite = TRUE
(dbWriteTable(con, "df", batch, append = TRUE,row.names = FALSE)) 
} 
```

# android - 按照 android tab 教程，无法在设备或模拟器上找到或启动已安装的应用程序

> ID：14164529
> 
> 赞同：0
> 
> 时间：2013-01-04T20:34:10.463
> 
> 标签：android, android-intent, android-manifest, android-tabhost, android-install-apk

试图关注这个项目 [http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)

当我运行它时，它说一切都安装好了，但什么也没有出现，并且它没有在应用程序下列出。我在应用程序管理器下找到它。什么会导致应用程序安装但无法启动？

编辑：这是我的清单。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.tabs"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="17" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

        <activity android:name="TabsFragmentActivity" >
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:38:01.163

你有启动器活动吗？

```
 <activity
            android:name=".MainActivity" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" /> // this
            </intent-filter>
 </activity> 
```

编辑：你没有用 Activity 标签包围它，所以基本上你没有启动器 Activity，像这样修复它：

```
 [...]
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity android:name="TabsFragmentActivity" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
 [...] 
```

# python - Pika 和 RabbitMQ - 在特定节点上创建队列

> ID：14164534
> 
> 赞同：0
> 
> 时间：2013-01-04T20:34:25.273
> 
> 标签：python, rabbitmq, amqp, pika

我有一个带有两个节点的 rabbitmq 集群。我想创建一些要托管在 node1 上的队列，以及托管在 node2 上的其他队列。

即使我将 ConnectionParameters 中的主机设置为 node2，队列仍将最终在 node1 上创建。

以编程方式，我不确定如何使用 pika 指定要在其上创建队列的节点。中没有这样的参数`queue_declare`，并且像这样传递参数似乎不起作用：

```
channel.queue_declare(queue="whereami", durable=True, exclusive=False, auto_delete=False, callback=on_queue_declared, arguments= {'node':'rabbit@node1'}) 
```

有没有指定托管节点的接口？有没有其他方法可以处理这种情况？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:58:53.710

我找不到任何参数来指定将在集群队列中的哪个节点上创建，但我对此有所了解。假设您在集群 rabbit@node1 和 rabbit@node2 中有两个节点，您可以简单地指定：

```
arguments["x-ha-policy"] = "nodes"
arguments["x-ha-policy-params"] = 'rabbit@node1' 
```

这将创建仅保留在 node1 上的队列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:47:23.190

集群通常在不同的主机上定义，或者在同一主机上具有不同的端口（[有关更多信息，请参阅文档](http://www.rabbitmq.com/clustering.html)）。

可以将主机和端口号定义为`pika.connection.ConnectionParameters`.

# c++ - C++ GMP 库 ostream operator<< 编译但不链接？

> ID：14164535
> 
> 赞同：4
> 
> 时间：2013-01-04T20:34:27.590
> 
> 标签：c++, linux, gmp

```
$ apt-cache show libgmp10
Package: libgmp10
...
Version: 2:5.0.2+dfsg-2ubuntu2 
```

**测试.cpp**：

```
#include <gmpxx.h>
#include <iostream>

using namespace std;

int main()
{
    mpz_class x = 42;

    cout << x;
} 
```

**编译：**

```
$ g++ -c test.cpp -o test.o
$ 
```

好的

**关联：**

```
$ g++ test.o -lgmp
test.o: In function `std::ostream& operator<<
    <__mpz_struct [1]>(std::ostream&,
         __gmp_expr<__mpz_struct [1],
              __mpz_struct [1]> const&)':

test.cpp:(.text._ZlsIA1_12__mpz_structERSoS2_RK10__gmp_exprIT_S4_E[_ZlsIA1_12__mpz_structERSoS2_RK10__gmp_exprIT_S4_E]+0x2a):

undefined reference to `operator<<(std::ostream&, __mpz_struct const*)'
collect2: error: ld returned 1 exit status 
```

它在链接时找不到`operator<<(ostream&, mpz_class)`。是什么赋予了？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-04T20:35:47.447

您需要链接 C++ 库以及 C 库：

```
g++ -c test.cpp -o test.o -lgmpxx -lgmp
#                         ^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T21:24:29.933

除了[Kerrek SB](https://stackoverflow.com/a/14164556/1824407)的回答之外，我还可以从我的实验中确认两件事：

1.  两者的夹杂物是相同的`-lgmp`，`-lgmpxx`因为 的输出`g++ -M main.cpp -lgmp`是相同的`g++ -M main.cpp -lgmpxx`
2.  g++/gcc 对这 2 个标志使用不同的库，因为`g++ main.cpp -Wl,-t -lgmp`不同于`g++ main.cpp -Wl,-t -lgmpxx`并且只有最后一个有效

我没有使用 GMP 的经验，但由于这个目录在 gcc 配置中是硬编码的，至少在这个 Ubuntu 版本中，你需要让 gcc 输出更详细，并耐心地解析所有输出，也许你会找到这个的真正原因。

# c# - 注册不同的实现

> ID：14164538
> 
> 赞同：2
> 
> 时间：2013-01-04T20:34:50.130
> 
> 标签：c#, .net, castle-windsor

在业务层，我有 3 个服务接口 `IUserService` `IRoleService`和`IGroupService`

一个验证器接口 IValidator IValidator 有 3 个实现 - `UserValidator`, `RoleValidator`, `GroupValidator`.

```
IUserService is implemented by UserService(IValidator userValidator)
IRoleService is implemented by RoleService(IValidator userValidator)
IGroupServiceis implemented by GroupService(IValidator userValidator) 
```

这三个服务都将 IValidator 作为构造函数参数。

在 web 层，我有 3 个控制器作为构造函数参数，`UserController`作为构造函数参数，组控制器作为构造函数参数`IUserService``RoleController``IRoleService``IGroupServiceas`

**我的问题：** 我如何强制 roleService 获取`RoleValidator`对象并`GroupService`获取`GroupValidator`对象。

我正在使用城堡温莎 3.1

```
 windsorContainer.Register(Component.For<IValidator>()
         .ImplementedBy<UserValidator>()
         .Named("userValidator")
          .LifestyleTransient());

          windsorContainer.Register(Component.For<IValidator>()
         .ImplementedBy<RoleValidator>()
         .Named("roleValidator")
          .LifestyleTransient());

          windsorContainer.Register(Component.For<IValidator>()
         .ImplementedBy<GroupValidator>()
         .Named("groupValidator")
          .LifestyleTransient()); 
```

我`IsFallback()`在注册 userValidator 时使用，但所有 3 个服务都获得了 roleValidator 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:07:57.937

Windsor 允许您使用[Service Overrides](http://docs.castleproject.org/Windsor.Registering-components-one-by-one.ashx#Supplying_the_component_for_a_dependency_to_use_Service_override_9)来做到这一点。

**更新**

鉴于以下设置：

```
public interface IMyService
{
}

public class Concrete1 : IMyService
{
}

public class Concrete2 : IMyService
{
}

public class ClassA
{
    private IMyService service;

    public ClassA(IMyService service)
    {
        this.service = service;
    }
}

public class ClassB
{
    private IMyService service;

    public ClassB(IMyService service)
    {
        this.service = service;
    }
} 
```

以下是如何使用`DependsOn`来选择`IMyService`“服务”参数`ClassA`和`ClassB`构造函数使用的实现：

```
var container = new WindsorContainer();
container.Register(
    Component.For<IMyService>().ImplementedBy<Concrete1>().Named("C1"),
    Component.For<IMyService>().ImplementedBy<Concrete2>().Named("C2"),
    Component.For<ClassA>().DependsOn(Dependency.OnComponent("service", "C1")),
    Component.For<ClassB>().DependsOn(Dependency.OnComponent("service", "C2"))
    ); 
```

# c++ - 来自初学者的 Project Euler #8 c++

> ID：14164551
> 
> 赞同：0
> 
> 时间：2013-01-04T20:35:22.350
> 
> 标签：c++, visual-c++, visual-studio-2008

## 我不明白为什么我没有得到这个问题的正确答案

我刚开始使用 c++，我的朋友告诉我有关 projecteuler 的信息，所以我开始做它的问题。

**问题 8 是：**

找出 1000 位数字中连续五位数字的最大乘积。

73167176531330624919225119674426574742355349194934 96983520312774506326239578318016984801869478851843 85861560789112949495459501737958331952853208805511 12540698747158523863050715693290963295227443043557 66896648950445244523161731856403098711121722383113 62229893423380308135336276614282806444486645238749 30358907296290491560440772390713810515859307960866 70172427121883998797908792274921901699720888093776 65727333001053367881220235421809751254540594752243 52584907711670556013604839586446706324415722155397 53697817977846174064955149290862569321978468622482 83972241375657056057490261407972968652414535100474 82166370484403199890008895243450658541227588666881 16427171479924442928230863465674813919123162824586 17866458359124566529476545682848912883142607690042 24219022671055626321111109370544217506941658960408 07198403850962455444362981230987879927244284（式）

**这是我的代码：**

```
#include <iostream>
int main()
{
char num[]  ="7316717653133062491922511967442657474235534919493496983520312774506326239578318016984801869478851843858615607891129494954595017379583319528532088055111254069874715852386305071569329096329522744304355766896648950445244523161731856403098711121722383113622298934233803081353362766142828064444866452387493035890729629049156044077239071381051585930796086670172427121883998797908792274921901699720888093776657273330010533678812202354218097512545405947522435258490771167055601360483958644670632441572215539753697817977846174064955149290862569321978468622482839722413756570560574902614079729686524145351004748216637048440319989000889524345065854122758866688116427171479924442928230863465674813919123162824586178664583591245665294765456828489128831426076900422421902267105562632111110937054421750694165896040807198403850962455444362981230987879927244284909188845801561660979191338754992005240636899125607176060588611646710940507754100225698315520005593572972571636269561882670428252483600823257530420752963450";
int a, b, c, d = 0;
for (a = 0; a<=995; a++)
{
    c = 1;
    for (b = 0; b<=4; b++)
    {
        c *= num[a+b];
    }

    if (c > d) d = c;
}

std::cout<<d<<std::endl;
system ("pause");
return 0;
} 
```

不幸的是，它吐出了 570394440。这不仅不正确，而且太大了。我无法在我的代码中找到问题以及问题的解决方案。

*任何帮助表示赞赏！*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:38:53.300

除了

```
c*= num[a+b] - '0'; 
```

if 条件下的 strlen(num) 怎么样。

当然 num[x] 是 ascii 值，减去 '0'，十进制 48，会给你正确的数值。

例如

```
c = '2' * '2'; 
```

等于 50 乘以 50。如果减去 '0' (48) 的值，它将成为正确的数值运算。

所以

```
c = ('2' - '0')*('2' - '0'); 
```

是操作

```
c = 2 * 2 
```

对于特定的数值，请参阅 ascii 上的维基百科条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T12:54:20.187

我的 Python 代码....

```
digits ="7316717653.....0752963450"
max = 0
for i in range(0, len(digits)-5):
    prod = 1
    for j in range(0, 5):
        prod *= int(digits[i+j])
    if (prod > max):
        max = prod
print max 
```

此代码可以使用地图进行优化。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-20T19:02:37.620

如果有人仍然需要帮助。检查最佳答案。（在发布时它是由“Doorknob of Snow”发布的）

[欧拉计划#8](https://stackoverflow.com/questions/20710051/project-euler-8/20710143?noredirect=1#20710143)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2019-06-07T12:52:57.097

c*= 数字[a+b] - '0'; //将此修复为@Captain Giraffe 答案并将 for (b = 0; b<=4; b++) 替换为 for (b = 0; b<4; b++)

声明 c 和 d 变量的值 long long d=0,c;

# centos5 - keyctl 命令抛出“未定义符号：dlopen”错误

> ID：14164552
> 
> 赞同：0
> 
> 时间：2013-01-04T20:35:27.287
> 
> 标签：centos5

我在生产服务器上运行 Centos 5.8。我有一个需要使用 keyctl 命令的应用程序，但是每次应用程序调用（或我调用）该命令时，我都会遇到一些错误。

第一个错误是这样的：

```
root@server [~] keyctl show
segmentation fault 
```

然后，我使用 yum 重新安装了 keyutils 二进制文件。这些是我在服务器上的 keyutils 包：

```
root@server [~]# rpm -qa | grep keyutils 
keyutils-libs-1.2-1.el5 
keyutils-libs-1.2-1.el5 
keyutils-1.2-1.el5 
keyutils-libs-devel-1.2-1.el5 
```

现在，我有另一个不同的错误：

```
root@server [~]# keyctl show
keyctl: symbol lookup error: /lib64/libkeyutils.so.1: undefined symbol: dlopen 
```

我检查了keyctl的库，没有libdl。

```
root@server [~]# ldd /bin/keyctl  
linux-vdso.so.1 => (0x00007fffcc5fd000) 
libkeyutils.so.1 => /lib64/libkeyutils.so.1 (0x00000033df000000) 
libc.so.6 => /lib64/libc.so.6 (0x0000003d7ae00000) 
/lib64/ld-linux-x86-64.so.2 (0x0000003d7aa00000) 
```

所有使用的库都很好。

```
root@server [~]# ls -al /lib64/libkeyutils* 
-rwxr-xr-x 1 root root 9472 Jan 6 2007 /lib64/libkeyutils-1.2.so* 
lrwxrwxrwx 1 root root 18 Nov 21 07:56 /lib64/libkeyutils.so.1 -> libkeyutils.so.1.9* 
-rwxr-xr-x 1 root root 34584 Jan 6 2007 /lib64/libkeyutils.so.1.9*

root@server [~]# ls -al /lib64/libdl* 
-rwxr-xr-x 1 root root 23360 Aug 27 08:59 /lib64/libdl-2.5.so* 
lrwxrwxrwx 1 root root 12 Nov 16 02:01 /lib64/libdl.so.2 -> libdl-2.5.so* 
root@server [~]# 
```

你以前见过这个问题吗？我尝试在其他发行版上运行相同的版本，它可以工作。

我想重新安装此服务器，但我不能，因为它是生产服务器。

有没有办法可以将共享库添加或链接到已经链接到其他 .so 库的二进制文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T10:17:51.770

看：http: [//blog.solidshellsecurity.com/2013/02/08/sshd-spam-rootkit-lib64libkeyutils-so-1-9/](http://blog.solidshellsecurity.com/2013/02/08/sshd-spam-rootkit-lib64libkeyutils-so-1-9/)

似乎没有像 libkeyutils.so.1.9 这样的合法文件，它是一个 rootkit，这个库的最新合法版本是 CentOS 6.3（最终版）上的 libkeyutils.so.1.3。

```
rm -f /lib64/libkeyutils.so.1.9
ldconfig
/etc/init.d/sshd restart 
```

在所有 CentOS 和 RedHat 内核中还存在一个疑似（截至目前）未修补的用户升级特权漏洞：[https](https://access.redhat.com/security/cve/CVE-2013-0871) ://access.redhat.com/security/cve/CVE-2013-0871和[http://blog.configserver.com /index.php?itemid=716](http://blog.configserver.com/index.php?itemid=716)

您可能还需要重新安装 SSH：

*   [https://serverfault.com/questions/476954/remove-shared-library-from-sshd](https://serverfault.com/questions/476954/remove-shared-library-from-sshd)
*   [https://forums.cpanel.net/f185/sshd-rootkit-323962.html](https://forums.cpanel.net/f185/sshd-rootkit-323962.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:39:53.550

```
LD_PRELOAD=/lib64/libdl-2.5.so keyctl show 
```

# actionscript-3 - Flash：可以从库中导出歌曲吗？还是在文件夹中找到？

> ID：14164555
> 
> 赞同：0
> 
> 时间：2013-01-04T20:35:40.857
> 
> 标签：actionscript-3, flash, audio

不知何故，在将我的 Flash 项目文件移动到我的外部硬盘驱动器时，我丢失了两个背景音乐曲目。他们仍然在 swf 中播放，但无处可寻（当我单击属性时，它位于显然不存在的某个位置）。

有没有办法将声音导出到新的 mp3？声音文件肯定存在，但我似乎无法找到或访问它。我想在 iPad 上制作一个新版本，因此我需要所有原始声音。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T10:56:59.663

如果您有一个 .FLA 文件，您可以在 WinRAR 中打开它并转到 LIBRARY 文件夹，其中包含您在项目库中拥有的所有内容。

如果您只有 .SWF 文件，我建议您使用[Sothink SWF Decompiler](http://www.sothink.com/)，您可以免费试用。从那里您可以导出您想要的所有资产。

# c++ - 在集合的非交集处打印数据 一套 乙

> ID：14164563
> 
> 赞同：0
> 
> 时间：2013-01-04T20:36:15.280
> 
> 标签：c++, set, set-intersection

如果我有两组数据

```
set<string> A;
set<string> B; 
```

使用 set_intersection 我可以获取两个集合的交集部分的数据。

如何分别打印出集合 A 和集合 B 的非交集部分的数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T20:37:54.153

使用[`std::set_difference`](http://en.cppreference.com/w/cpp/algorithm/set_difference)或[`std::set_symmetric_difference`](http://en.cppreference.com/w/cpp/algorithm/set_symmetric_difference)，具体取决于您的需要。

（我太累/懒得写一个例子，但希望一旦你阅读了上面的链接，它应该是显而易见的！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T13:28:23.537

`set_symmetric_difference`将结果放入某个可迭代对象中。

`ostream`因此，您可以通过用 包装将值复制到`ostream_iterator`：

```
set<string> a;
set<string> b;

set_symmetric_difference(a.begin(), a.end(),
                         b.begin(), b.end(),
                         ostream_iterator<string>(cout, "\n")); 
```

# sql - 给定PostgreSQL中的触发器如何确定它的关系

> ID：14164565
> 
> 赞同：1
> 
> 时间：2013-01-04T20:36:24.800
> 
> 标签：sql, postgresql, triggers, postgresql-9.1

我正在尝试从我的数据库中删除由 rails gem 安装的触发器。

我已经删除了像 rr_admin_reports 这样的表，但触发器仍然存在“rr_admin_reports”：

我正在尝试像这样删除触发器：

```
DROP TRIGGER rr_admin_reports ON admin_reports; 
```

但得到错误：

```
ERROR:  trigger "rr_admin_reports" for table "admin_reports" does not exist 
```

是否有一个 PostgreSQL 控制台命令我可以运行来了解触发器的位置，以便我知道在 ON 之后输入什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:47:11.773

此查询显示所有触发器名称及其关联表：

```
SELECT tgname,relname from pg_trigger JOIN pg_class c on tgrelid=c.oid; 
```

# javascript - jquery函数中的参考rails图像

> ID：14164567
> 
> 赞同：1
> 
> 时间：2013-01-04T20:36:42.613
> 
> 标签：javascript, jquery, css, ruby-on-rails, asset-pipeline

我有一个应该更改页面背景的 jquery 函数。我希望背景是 app/assets/images 目录中的图像。但是，我对使用资产管道引用图像的正确方法感到困惑。

这是我现在的行：

```
 $('body').css("background-image", "url('welcome.png')"); 
```

在 url 参数中访问图像的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-05T21:46:55.390

这在文档中有所介绍：

[http://guides.rubyonrails.org/asset_pipeline.html#coding-links-to-assets](http://guides.rubyonrails.org/asset_pipeline.html#coding-links-to-assets)

您应该使用“2.3.3 JavaScript/CoffeeScript 和 ERB”中描述的方法，这意味着将 .erb 扩展名添加到您的 JS 文件中，并使用asset_path。

另一种更优雅的方法是将图像移动到 css.scss 文件中的类定义中，然后在 jQuery 中添加该类：

```
.welcome {
  background-image: url(image-path('welcome.png'));
} 
```

在你的 jQuery 中：

```
$('body').addClass("welcome"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-04T22:06:06.853

试试这个：

```
$('body').css("background-image", "url('/assets/welcome.png')"); 
```

为了访问管道中的资产，您必须指定`assets`文件夹。

我一直在试图找到我在哪里读到这个，但 Rails 基本上将所有资产帮助器 url 转换为类似`/assets/asset.png`或类似的东西，`/assets/stylesheet.css`所以你应该能够通过`assets`在源 url 中指定文件夹来做同样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T20:49:08.217

`$('body').css("background-image", "url('/app/assets/images/welcome.png')");`?

假设应用程序位于文档根目录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-31T16:53:51.910

在我看来，您需要使用 .erb（嵌入式 ruby​​）扩展来允许在您的 .js 文件中使用 rails 路径助手。如果你的 js 文件（例如 balabala.js）在asset/javscripts/，把它的名字改成balabala.js.erb，然后使用：

```
$('body').css({"background-image":"<%= asset_path({'filenamehere.png') %>"}); 
```

在你的asset/javscripts/application.js 中需要这个文件

```
//= require balabala 
```

然后它应该工作

# python - 在 Python GAE 上收到 webapp2 请求后按确切日期过滤

> ID：14164569
> 
> 赞同：0
> 
> 时间：2013-01-04T20:36:44.320
> 
> 标签：python, google-app-engine, google-cloud-datastore

在收到日期后`q = self.request.get('q')`，我试图按完整日期过滤，但它给了我空白的结果。我的查询如下：

```
custQuery = db.Query(Customer)
birthdate = datetime.strptime(q,"%Y-%m-%d")
custQuery.filter('birthdate >= ',birthdate)
custQuery.filter('birthdate < ',birthdate) 
```

但是，尽管我知道 q（即某个日期）是存在的并且我有一个现有的`birthdate`属性，但我得到了空白结果。在 Google App Engine 上按确切日期过滤请求的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:04:19.007

傻我。它应该是等号。

```
custQuery = db.Query(Customer)
birthdate = datetime.strptime(q,"%Y-%m-%d").date()
custQuery.filter('birthdate = ',birthdate) 
```

# java - For循环计数不正确，以某种方式从错误的变量计数？

> ID：14164584
> 
> 赞同：3
> 
> 时间：2013-01-04T20:37:59.630
> 
> 标签：java, for-loop, increment

好的，我正在为我的编程课程制作一个程序，我正在尝试获取它，所以当我输入列和行时，它会得到一个显示乘法表的输出。下面是一个可视化的示例： printTable(4,6) 的示例运行输出：

![例子：](../Images/5da93a5ea8cd615c7c224ac2cf4e4fff.png)

现在，这是我的代码：

```
 import java.util.Scanner;

 public class Pictures {

public static int row;
public static int column;
public static Scanner input = new Scanner(System.in);

public static void main(String[] args){
int x = 1;
int y = 1;

System.out.println("Input Row: ");
row = input.nextInt();
System.out.println("Input Column: ");
column = input.nextInt();

for(x = 1; x < row; x++){
    System.out.print(x * y +  "    ");

    for(y = 1 ; y < column; y++){

        System.out.print(y * x + "    ");
    }
    System.out.println();   
}   
}
} 
```

现在，当我输入第 5 行和第 5 列时，我的输出如下所示：

```
1    1    2    3    4    
10    2    4    6    8    
15    3    6    9    12    
20    4    8    12    16 
```

我知道我没有看到一些相当简单的东西，但我就是不明白为什么会这样。如果有人可以提供建议，那将有很大帮助。

谢谢，萨利

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T20:44:51.403

出于学习目的，请使用调试器来理解您的代码。

要修复它，请删除这些行：

```
int x = 1;
int y = 1; 
```

并让你的循环像：

```
for(int x = 1; x < row; x++){
    // System.out.print(x * y +  "    "); // no print needed here
    for(int y = 1 ; y < column; y++){
        System.out.print(y * x + "\t");
    }
    System.out.println(); 
} 
```

这是Oracle Java 教程中解释循环的部分的[链接。](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)`for`感谢[迈克](https://stackoverflow.com/users/510294/mike)在评论中提到均匀间距。更新了代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:42:32.740

当你做

System.out.print(x * y + " ");

第二次，由于 for 循环，y = 5。因此 2 * 5 = 10。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T20:46:17.500

如果你想得到 4 行，你想显示行、1、2、3 和 4。如果你在 < 4（而不是 <= 4）处停止循环，你会错过最后一行和最后一列。这就是人们所说的[栅栏错误](http://en.wikipedia.org/wiki/Off-by-one_error#Fencepost_error)。

尝试这样的事情：

```
for(int x = 1; x <= row; x++) 
```

此外，您还没有很好的 y 值。您希望 x 和 y 都有效，因此只能在内循环内打印。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T20:46:29.310

```
for(x = 1; x < row; x++){
    System.out.print(x * y +  "    ");
    for(y = 1 ; y < column; y++){
        System.out.print(y * x + "    ");
    }
    System.out.println();   
} 
```

第一个 print() 是不需要的，您需要更改比较，使得`row`和`column`分别是 x 和 y 的有效值（即使用`<=`而不是`<`。此外，您将希望使用`"\t"`（制表符）隔开列，而不是`" "`, 这样不同位数的数字就不会导致列倾斜。这应该会产生预期的结果。

```
for(x = 1; x <= row; x++){
    for(y = 1 ; y <= column; y++){
        System.out.print(y * x + "\t");
    }
    System.out.println();   
} 
```

输出 4,6 与`" "`...

```
1    2    3    4    5    6    
2    4    6    8    10    12    
3    6    9    12    15    18    
4    8    12    16    20    24 
```

输出 4,6 与`"\t"`...

```
1   2   3   4   5   6   
2   4   6   8   10  12  
3   6   9   12  15  18  
4   8   12  16  20  24 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-04T20:42:47.187

第一个`print`是错误的，因为它使用了`y`前一个 for 循环中的值。

将其更改为：

```
for(x = 1; x <= row; x++){
  System.out.print(x +  "    ");
  for(y = 1 ; y <= column; y++){
    System.out.print(y * x + "    ");
  }
  System.out.println();
} 
```

更新：循环结束也是`<`，而它们应该是`<=`（因为它们是基于 1 的）。我在上面的片段中更新了它。

# wordpress - 注销 WordPress 中的所有用户

> ID：14164588
> 
> 赞同：4
> 
> 时间：2013-01-04T20:38:18.887
> 
> 标签：wordpress

我想在站点进行维护时注销 WordPress 中的所有用户（所有活动会话）。这是为了防止用户当时进行任何更改。

这可能吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-04T20:44:02.823

我认为如果您进入`wp-config.php`文件并更改身份验证密钥盐，它将迫使每个人重新登录。查找显示**身份验证唯一密钥和盐的部分。**

该站点将生成新的随机盐，您可以在完成后替换它们。 [https://api.wordpress.org/secret-key/1.1/salt/](https://api.wordpress.org/secret-key/1.1/salt/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-07T11:08:28.497

WP 有一个名为“Force ReAuthentication”的插件来实现该功能： [https ://wordpress.org/extend/plugins/force-reauthentication/](https://wordpress.org/extend/plugins/force-reauthentication/)

源代码在 GitHub 上可用： [https ://github.com/shrkey/forcereauthentication](https://github.com/shrkey/forcereauthentication)

# python - GAE MapReduce - 使用来自 html 表单输入的文件

> ID：14164590
> 
> 赞同：0
> 
> 时间：2013-01-04T20:38:23.640
> 
> 标签：python, google-app-engine, mapreduce

我想通过以下步骤执行 mapreduce 作业：

1) 从通过 html 表单输入的文件映射

2）减少并从减少中创建新文件

这是我目前的管道设置方式。主要问题是如何将文件传递给 RecordsReader。

RecordsReader 有一个参数 files，要传递“包含要读取的文件的字符串或包含要读取的多个文件字符串的列表”。-谷歌

```
class EPNPipeline(base_handler.PipelineBase):
    def run(self, filekey):
        logging.debug("filename is %s" % filekey)
        output = yield mapreduce_pipeline.MapreducePipeline(
            "EPN",
            "map_process_epn",
            "reduce_process_epn",
            "mapreduce.input_readers.RecordsReader",
            "mapreduce.output_writers.BlobstoreOutputWriter",
            mapper_params={
                 "files": filekey,                
            },
            reducer_params={
                 "mime_type": "text/plain",
            },
            shards=24)
        yield StoreOutput("EPN", filekey, output) 
```

我尝试将文件作为文件对象和字符串表示形式传递，但两者都不起作用，并且没有像我想要的那样使用不同的输入/输出读取器/写入器的文档。

任何帮助或指示将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:47:31.850

[文档](https://developers.google.com/appengine/docs/python/dataprocessing/helloworld)中描述的示例应用程序准确显示了如何执行此操作。您需要将文件上传到 blobstore，然后将 blob 密钥传递给 mapreduce。

# c# - GridView 进入 UpdatePanel 会触发 OnRowUpdating 事件：但我只能看到 ItemTemplate 中的控件而不是 EditItemTemplate？

> ID：14164591
> 
> 赞同：0
> 
> 时间：2013-01-04T20:38:29.073
> 
> 标签：c#, gridview, updatepanel, crud, templatefield

正如我在标题中所写，这个问题很有趣：

```
<asp:ScriptManager ID="ScriptManager1" runat="server" />
    <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional" ChildrenAsTriggers="true">
        <ContentTemplate>
        <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" DataKeyNames="id_Newsletter" HeaderStyle-BackColor="Black" 
                    HeaderStyle-ForeColor="White" RowStyle-BackColor="DarkGray" AlternatingRowStyle-BackColor="LightGray" PageSize="6" AllowPaging="true"
                    AllowSorting="true" ShowHeaderWhenEmpty="true" EmptyDataText="La tabella non contiene dati" EnableViewState="true" RowStyle-Wrap="true"
                    PagerStyle-HorizontalAlign="Left" PagerStyle-BorderWidth="0" BorderWidth="0" OnRowCommand="GridView_RowCommand"
                    OnRowCancelingEdit="GridView_RowCancelingEdit" OnRowUpdating="GridView_RowUpdating" OnRowDeleting="GridView_RowDeleting"
                    OnPageIndexChanging="GridView_PageIndexChanging" OnSorting="GridView_Sorting" OnRowEditing="GridView_RowEditing" CssClass="NewsletterManager_GridView" >
        <Columns>
        <asp:TemplateField ItemStyle-HorizontalAlign="Center" HeaderText="Indirizzo Email" HeaderStyle-Width="275" SortExpression="emailNewsletter">
        <ItemTemplate>
            <asp:Label ID="lbl_emailNewsletter" runat="server" Text='<%# Eval("emailNewsletter") %>'></asp:Label>
        </ItemTemplate>
        <EditItemTemplate>
            <asp:Label ID="lbl_emailNewsletter" runat="server" Text='<%# Eval("emailNewsletter") %>' Visible="false" ></asp:Label>
            <asp:TextBox ID="txt_emailNewsletter" runat="server" Text='<%# Bind("emailNewsletter") %>'></asp:TextBox>
        </EditItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField ItemStyle-HorizontalAlign="Center" HeaderText="Azioni" HeaderStyle-Width="100">
        <EditItemTemplate>
            <asp:ImageButton ID="Img_Aggiorna" runat="server" CommandName="Update" ImageUrl="~/images/GridIcon/update.png" ToolTip="Aggiorna" />&nbsp;&nbsp;
            <asp:ImageButton ID="Img_Annulla" runat="server" CommandName="Cancel" ImageUrl="~/images/GridIcon/undo.png" ToolTip="Annulla" />
        </EditItemTemplate>
        <ItemTemplate>
            <asp:ImageButton ID="Img_Modifica" runat="server" CommandName="Edit" ImageUrl="~/images/GridIcon/edit.png" ToolTip="Modifica" />&nbsp;&nbsp;
            <asp:ImageButton ID="Img_Cancella" runat="server" CommandName="Delete" ImageUrl="~/images/GridIcon/delete.png" OnClientClick="return confirm('Sei sicuro di voler cancellare l\'email?');" ToolTip="cancella" />
            </ItemTemplate>
        </asp:TemplateField> 
```

* * *

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
        LoadGridView(GridView1, -1, 0);
    lbl_result.Text = String.Empty;
}

protected void GridView_RowEditing(Object sender, GridViewEditEventArgs e)
{
    LoadGridView(((GridView)sender), e.NewEditIndex, ((GridView)sender).PageIndex);
}

protected void GridView_RowUpdating(Object sender, GridViewUpdateEventArgs e)
{
    NewsLetterBL newsBl = new NewsLetterBL();
    String oldmail = ((Label)((GridView)sender).Rows[e.RowIndex].FindControl("lbl_emailNewsletter")).Text;
    String newmail = ((TextBox)((GridView)sender).Rows[e.RowIndex].FindControl("txt_emailNewsletter")).Text;
    if (newsBl.ModifyWrongEmail(oldmail, newmail))
        lbl_result.Text = "Modify Done";
    else lbl_result.Text = newsBl.LastMessage;

    LoadGridView(((GridView)sender), -1, ((GridView)sender).PageIndex);
}

protected void LoadGridView(GridView GV, int EditIndex, int PageIndex)
{
    NewsLetterBL newsBl = new NewsLetterBL();
    DataView dw = new DataView(newsBl.getFullNewsletter());

    String SortExpression = GV.ID.ToString() + "_SortExpression";

    if (ViewState[SortExpression] != null) dw.Sort = (String)ViewState[SortExpression];

    GV.DataSource = dw;
    GV.PageIndex = PageIndex;
    GV.EditIndex = EditIndex;
    GV.DataBind();
} 
```

当我尝试从处理 的事件的`txt_emailNewsletter`编辑模式下将控件访问到行时 ，元素会抛出，但可以创建控件。`GridView_RowUpdating``OnRowUpdating``GridView1``NullReferenceException``lbl_emailNewsletter`

ItemTemplate 和 EditItemTemplate 中的标签具有相同的 ID ( `lbl_emailNewsletter`)：如果我将标签的 ID 更改为 ItemTemplate，则 String oldmail 和 newmail 都会引发 null Reference 异常；显然问题是，当我单击 ImageButton `Img_Aggiorna`with 时`CommandName="Update"`，ASP.NET 出于某种神秘原因从已编辑的行中仅查找 ItemTemplate 的控件而不是 EditItemTemplate。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:32:11.630

GridView 事件“OnRowUpdating”仅在您使用数据源时才有用：在这种情况下，可以访问 Dictionary e.OldValues[] 或 e.NewValues[] 并正确获取旧值和新值。

我已经使用带有个性化 CommandName 的事件“OnRowCommand”和带有旧值的 CommandArgument 解决了这个问题：在这种情况下，可以使用新值访问 GridView 中已编辑行内的所有控件。

```
<asp:ImageButton ID="Img_Update" runat="server" CommandName="Change" CommandArgument='<%# Eval("emailNewsletter") %>' ImageUrl="~/images/GridIcon/update.png" ToolTip="Update" /> 
```

* * *

```
protected void GridView_RowCommand(Object sender, GridViewCommandEventArgs e)
{
    switch (e.CommandName)
    {
        case "Change":

            ImageButton btnNew = e.CommandSource as ImageButton;
            GridViewRow row = btnNew.NamingContainer as GridViewRow;
            TextBox txt_emailNewsletter = row.FindControl("txt_emailNewsletter") as TextBox;

            if ( !CheckEmail(e.CommandArgument.ToString()) || !CheckEmail(txt_emailNewsletter.Text) )
                lbl_result.Text = "ERROR : Email not Valid";
            else {
                if (txt_emailNewsletter.Text.Trim().ToLower() == e.CommandArgument.ToString())
                    lbl_result.Text = "Email values are indentical";
                else
                {
                    //Business Layer Call
                    NewsLetterBL newsBl2 = new NewsLetterBL();
                    if (newsBl2.ModifyWrongEmail(e.CommandArgument.ToString(), txt_emailNewsletter.Text.Trim().ToLower()))
                        lbl_result.Text = "Email Changed";
                    else
                        lbl_result.Text = "ERROR : " + newsBl2.LastMessage;
                }
            }

            LoadDataForGridView(((GridView)sender));
            BindGridView(((GridView)sender), -1, ((GridView)sender).PageIndex);
            break;
    }
} 
```

# git - 如何做一个 git diff ... ?

> ID：14164593
> 
> 赞同：2
> 
> 时间：2013-01-04T20:38:50.300
> 
> 标签：git

做 a 很简单`git diff <commit>...<some other commit>`，但我怎样才能实现相当于将“工作树”指定为该命令中的最后一个参数？我已经尝试过`git diff <commit>...`,`git diff <commit>... .`等，但它们实际上并没有在工作树中获取我的更改。

如果`<commit>`可以是远程分支，则加分=）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T20:42:01.883

与`...`您一起隐式指定`HEAD`. 您希望 diff 的单个参数版本与工作树进行比较。

```
git diff <commit> 
```

`<commit>`可以是任何引用提交的内容，例如远程跟踪分支的名称。

# java - 如何知道应用程序使用的 jar 列表

> ID：14164599
> 
> 赞同：1
> 
> 时间：2013-01-04T20:39:01.237
> 
> 标签：java, tomcat, maven, jar

我将我的项目加载到eclipse中并部署在tomcat上。在eclipse中出现红色十字标记，表示存在错误。但是我的应用程序正在由 maven 执行并且运行良好。因此，为了消除红色标记，我需要在 eclipse 的构建路径中添加外部 jar。如果是，我怎么知道我的应用程序使用了哪些罐子？我在哪里可以得到它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:48:24.673

为什么不直接使用 Maven 插件（例如 m2eclipse）并让它解决依赖关系？

无论如何，有几种方法可以获取 Maven 项目使用的 jar 列表，例如：

```
mvn dependency:list 
```

# iphone - iphone css媒体查询网站

> ID：14164601
> 
> 赞同：0
> 
> 时间：2013-01-04T20:39:02.160
> 
> 标签：iphone, html, css, twitter-bootstrap, media-queries

我正在尝试使我的网站适合 iphone，因为我正在使用 twitter bootstrap 响应式 css 我为容器提供了不同宽度的不同边框颜色但是当我最小化浏览器窗口时，边框颜色不会反映浏览器窗口

[http://jsfiddle.net/CXkQp/1/](http://jsfiddle.net/CXkQp/1/)

[http://jsfiddle.net/CXkQp/1/embedded/result/](http://jsfiddle.net/CXkQp/1/embedded/result/)

```
@media (min-width: 1200px) {
  .row {
    margin-left: -30px;
    *zoom: 1;
  }
  .row:before,
  .row:after {
    display: table;
    line-height: 0;
    content: "";
  }
  .row:after {
    clear: both;
  }
  [class*="span"] {
    float: left;
    min-height: 1px;
    margin-left: 30px;
  }
  .container,
  .navbar-static-top .container,
  .navbar-fixed-top .container,
  .navbar-fixed-bottom .container {
    width: 1170px;
    border: 1px solid red;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:26:08.273

如果我正确理解了您的问题，那么您发布的页面示例应该是响应式的，尽管我不确定您的引导网格是否按照您需要的方式设置。

您在第 120 和 145 行为一件事嵌套了容器 div

检查如果我重命名您的 2 个容器 div 会发生什么：

[http://jsfiddle.net/panchroma/CXkQp/3/embedded/result/](http://jsfiddle.net/panchroma/CXkQp/3/embedded/result/)

[http://jsfiddle.net/panchroma/CXkQp/3/](http://jsfiddle.net/panchroma/CXkQp/3/)

120 号线

```
 <div class="containerA" style="background-color: white;"> 
```

第 145 行

```
 <div class="containerB"> 
```

还有一些[验证错误](http://bit.ly/Zq3s8J)可能是另一个难题。原因可能是您不能像之前那样简单地将 HTML 头部内容粘贴到 jsFiddle HTML 面板中。检查[http://doc.jsfiddle.net/use/hacks.html#css-panel-hack](http://doc.jsfiddle.net/use/hacks.html#css-panel-hack)了解您需要做什么的详细信息。

如果我误解了什么，我很抱歉

祝你好运！

# java - 导入 android.support.v4 包时遇到问题

> ID：14164602
> 
> 赞同：4
> 
> 时间：2013-01-04T20:39:03.567
> 
> 标签：java, android, import

我正在尝试将 android-support-v4.jar 包含到我的命令行 android 项目中。我的导入语句很简单：

```
import android.support.v4.NavUtils; 
```

我已将 jar 复制`$ANDROID_HOME/extras/android/support/v4/android-support-v4.jar`到我的项目`libs/`文件夹中，但在构建时仍然收到以下错误`ant`：

```
package android.support.v4 does not exist 
```

我的理解是，放置在`libs/`文件夹中的任何 jar 都会自动包含在项目类路径中。

根据要求，`ls -l`根项目文件夹的输出是

```
-rw-r--r--   1 Nick  staff  1192  4 Jan 15:08 AndroidManifest.xml
-rw-r--r--   1 Nick  staff   696  4 Jan 12:12 ant.properties
drwxr-xr-x  17 Nick  staff   578  4 Jan 15:10 bin
-rw-r--r--   1 Nick  staff  3922  3 Jan 14:08 build.xml
drwxr-xr-x   4 Nick  staff   136  3 Jan 15:11 gen
drwxr-xr-x   3 Nick  staff   102  4 Jan 15:18 libs
-rw-r--r--   1 Nick  staff   441  3 Jan 14:08 local.properties
-rw-r--r--   1 Nick  staff   781  3 Jan 14:08 proguard-project.txt
-rw-r--r--   1 Nick  staff   563  3 Jan 14:08 project.properties
drwxr-xr-x   8 Nick  staff   272  3 Jan 14:08 res
drwxr-xr-x   3 Nick  staff   102  3 Jan 14:08 src 
```

并且整个输出`ant debug`是

```
 Buildfile: /Users/Nick/DEVELOPMENT/PROJECTS/MyFirstApp/build.xml

-set-mode-check:

-set-debug-files:

-check-env:
 [checkenv] Android SDK Tools Revision 21.0.1
 [checkenv] Installed at /Users/Nick/Development/SDKS/android-sdk-macosx

-setup:
     [echo] Project Name: MyFirstApp
  [gettype] Project Type: Application

-set-debug-mode:

-debug-obfuscation-check:

-build-setup:
     [echo] Resolving Build Target for MyFirstApp...
[gettarget] Project Target:   Android 4.2
[gettarget] API level:        17
     [echo] ----------
     [echo] Creating output directories if needed...
     [echo] ----------
     [echo] Resolving Dependencies for MyFirstApp...
[dependency] Library dependencies:
[dependency] No Libraries
     [echo] ----------
     [echo] Building Libraries with 'debug'...
   [subant] No sub-builds to iterate on

-pre-build:

-code-gen:
[mergemanifest] No changes in the AndroidManifest files.
     [echo] Handling aidl files...
     [aidl] No AIDL files to compile.
     [echo] ----------
     [echo] Handling RenderScript files...
[renderscript] No RenderScript files to compile.
     [echo] ----------
     [echo] Handling Resources...
     [aapt] No changed resources. R.java and Manifest.java untouched.
     [echo] ----------
     [echo] Handling BuildConfig class...
[buildconfig] No need to generate new BuildConfig.

-pre-compile:

-compile:
    [javac] Compiling 1 source file to /Users/Nick/DEVELOPMENT/PROJECTS/MyFirstApp/bin/classes
    [javac] /Users/Nick/DEVELOPMENT/PROJECTS/MyFirstApp/src/com/example/myfirstapp/DisplayMessageActivity.java:9: package android.support.v4 does not exist
    [javac] import android.support.v4.NavUtils;
    [javac]                          ^
    [javac] /Users/Nick/DEVELOPMENT/PROJECTS/MyFirstApp/src/com/example/myfirstapp/DisplayMessageActivity.java:36: cannot find symbol
    [javac] symbol  : variable NavUtils
    [javac] location: class com.example.myfirstapp.DisplayMessageActivity
    [javac]                 NavUtils.navigateUpFromSameTask(this);
    [javac]                 ^
    [javac] 2 errors 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T20:41:04.407

您的导入语句不正确，应该是：

```
import  android.support.v4.app.NavUtils; 
```

# html-parsing - 从 Html Agility Pack 下载中，我使用 9 个“HtmlAgilityPack.dll”中的哪一个？

> ID：14164603
> 
> 赞同：5
> 
> 时间：2013-01-04T20:39:04.010
> 
> 标签：html-parsing, html-agility-pack

下载的 HTML Agility Pack 压缩文件中有九个文件夹：

*   网20
*   网40
*   Net40-客户端
*   网45
*   sl3-wp
*   SL4
*   sl4-windowsphone71
*   SL5
*   winrt45

我不知道这些文件夹名称是什么意思。请解释我需要哪一个才能使用 VS2010 从 html 文件中抓取数据。

请解释我应该把文件放在哪里。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T22:50:06.500

不同的版本针对不同的 .NET 框架版本进行编译。某些框架（例如 WinRT 或 Silverlight 框架）的功能更有限，或者需要稍微不同（通常更慢）的方法来实现您正在使用的组件的功能。

您将需要使用与您的应用程序最匹配的 HTML Agility Pack 版本。所以：

*   net20：.NET 2.0 和 3.5
*   net40-client：.NET 4.0 客户端配置文件
*   net40：.NET 4.0 完整配置文件（包括服务器二进制文件）
*   net45：.NET 4.5
*   sl3-wp：Windows 电话 7.0
*   sl4：银光 4.0
*   sl4-windowsphone71：Windows 电话 7.5
*   sl5：银光 5.0
*   winrt45：Windows 8 现代 UI 应用程序

当您想将组件与多个应用程序一起使用时，请选择最小的公分母。

# javascript - requireJS 可选依赖

> ID：14164610
> 
> 赞同：28
> 
> 时间：2013-01-04T20:39:31.483
> 
> 标签：javascript, requirejs, amd

我正在将 AMD 支持添加到我开发的 javascript 库中。

该库可能使用 jquery，但如果未加载 jquery，它仍然可以工作。

在定义模块依赖项时，有一种方法可以将依赖项设置为“可选”，这样如果缺少该库，模块仍然可以工作吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-12-11T12:00:17.613

我最近遇到了完全相同的问题，这就是我解决它的方法。我定义了一个名为 RequireJS 的插件`optional`，它通过将无法加载的模块显式定义为空对象来忽略它们（但我想您也可以将其定义为 null 或其他任何内容）。

这是代码（使用 RequireJS 2.1.15 测试）：

```
define("optional", [], {
    load : function (moduleName, parentRequire, onload, config){

        var onLoadSuccess = function(moduleInstance){
            // Module successfully loaded, call the onload callback so that
            // requirejs can work its internal magic.
            onload(moduleInstance);
        }

        var onLoadFailure = function(err){
            // optional module failed to load.
            var failedId = err.requireModules && err.requireModules[0];
            console.warn("Could not load optional module: " + failedId);

            // Undefine the module to cleanup internal stuff in requireJS
            requirejs.undef(failedId);

            // Now define the module instance as a simple empty object
            // (NOTE: you can return any other value you want here)
            define(failedId, [], function(){return {};});

            // Now require the module make sure that requireJS thinks 
            // that is it loaded. Since we've just defined it, requirejs 
            // will not attempt to download any more script files and
            // will just call the onLoadSuccess handler immediately
            parentRequire([failedId], onLoadSuccess);
        }

        parentRequire([moduleName], onLoadSuccess, onLoadFailure);
    }
}); 
```

然后，您可以选择简单地使用一个模块

```
require(['optional!jquery'], function(jquery){...}); 
```

知道如果无法加载 jquery 模块，传递给回调函数的参数将是一个空对象。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-04T20:46:09.640

您不能真正将其设置为可选，但您可以使用以下方法捕获错误并卸载模块`undef`：

```
require(['jquery'], function ($) {
    //Do something with $ here
}, function (err) {
    //The errback, error callback
    //The error has a list of modules that failed
    var failedId = err.requireModules && err.requireModules[0];
    if (failedId === 'jquery') {
        //undef is function only on the global requirejs object.
        //Use it to clear internal knowledge of jQuery. Any modules
        //that were dependent on jQuery and in the middle of loading
        //will not be loaded yet, they will wait until a valid jQuery
        //does load.
        requirejs.undef(failedId);
        ...
     }
}); 
```

完整的例子[在这里](http://requirejs.org/docs/api.html#errors)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-11T15:24:33.163

**为此不需要插件。**

这可以在没有 RequireJS 插件的情况下完成。此外，您也可以对 UMD 模块执行此操作。

## 仅在已经加载时使用 jQuery

其实很简单，使用`require.defined`，它可以让你测试一个模块是否已经被加载。如果是这样，您`require`使用 jQuery 并使用它，否则您只需跳过可选部分：

```
define(['require'], function(require){
  if (require.defined('jquery') {
    var $ = require('jquery');
    $.fn.something = function(){};
  }
}); 
```

请注意我们如何添加`'require'`为依赖项，因此我们得到了一个本地 require 函数，其中包含该`defined`方法。

*另请注意，如果在此模块之前*已加载此代码，则此代码只会找到 jQuery 。如果某个模块在该模块已经加载之后加载了 jQuery *，*那么之后它就不会再加载 jQuery。

这不会尝试加载 jQuery，因此不会导致日志中出现错误消息。

## 奖励：UMD 支持

如果您希望您的库支持 AMD 加载程序 (RequireJS)、CommonJS (Node) 和常规脚本标签，*并且*对 jQuery有*可选*依赖，您可以执行以下操作：

```
(function(u, m, d) {
    if ((typeof define == 'object') && (define.amd)) {
        // handle AMD loaders such as RequireJS
        define(m, ['require'], d);
    }
    else if (typeof exports === 'object') {
        // handle CommonJS here... Does not really make sense for jQuery but
        // generally, you can check whether a dependency is already loaded
        // just like in RequireJS:
        var $ = null;
        try {
            require.resolve('jquery'));
            // the dependency is already loaded, so we can safely require it
            $ = require('jquery');
        } catch(noJquery) {}
        module.exports = d(null, $);
    }
    else {
        // regular script tags. $ will be available globally if it's loaded
        var $ = typeof jQuery == 'function' ? jQuery : null;
        u[m] = d(null, $);
    }
})(this, 'mymodule', function(require, $) {

    // if `$` is set, we have jQuery... if not, but `require` is set, we may
    // still get it here for AMD loaders
    if (!$ && require && require.defined && require.defined('jquery')) {
        $ = require('jquery');
    }

    // At this point, `$` either points to jQuery, or is null.
}); 
```

## 进一步阅读

[Node.js - 检查是否安装了模块而不实际需要它](https://stackoverflow.com/questions/15302618/node-js-check-if-module-is-installed-without-actually-requiring-it) [https://github.com/jrburke/requirejs/issues/856](https://github.com/jrburke/requirejs/issues/856)

# forms - CodeIgniter 提交表单时 URL 不正确

> ID：14164618
> 
> 赞同：3
> 
> 时间：2013-01-04T20:39:50.660
> 
> 标签：forms, codeigniter, submit

我今天才开始使用 CodeIgniter，并且正在学习[CI 网站上](http://ellislab.com/codeigniter/user-guide/tutorial/index.html)的教程。
当我进入创建新新闻项目的最后一步时，我遇到了表单提交问题。当我按下表单的提交按钮时，我希望 URL 会`jonhopkins.net/news/create`出现，但它会出现`http://jonhopkins.net/news/jonhopkins.net/news/create`，这显然是非常错误的，我不知道为什么会这样。有谁知道如何解决这一问题？

我网站上的其他所有内容（本教程的页面部分）都运行良好。这是唯一破坏的东西。我的所有代码都与教程中出现的完全一样，除了对项目成功提交到数据库时发生的情况进行了更改，这目前从未发生过。

**新闻控制器**

```
public function create() {
    $this->load->helper('form');
    $this->load->library('form_validation');

    $data['title'] = 'Create a news item';

    $this->form_validation->set_rules('title', 'Title', 'required');
    $this->form_validation->set_rules('text', 'text', 'required');

    if ($this->form_validation->run() === FALSE) {
        $this->load->view('templates/header', $data);
        $this->load->view('news/create');
        $this->load->view('templates/footer');
    } else {
        //$success will contain the slug of the created item, or FALSE if database insertion failed
        $success = $this->news_model->set_news();
        if ($success) {
            $this->_doView($success);
        } else {
            echo "Something went wrong while trying to submit the news item.";
        }
    }
}

public function view($slug) {
    $this->_doView($slug);
}

private function _doView($slug) {
    $data['news_item'] = $this->news_model->get_news($slug);
    if (empty($data['news_item'])) {
        show_404();
    }

    $data['title'] = $data['news_item']['title'];

    $this->load->view('templates/header', $data);
    $this->load->view('news/view', $data);
    $this->load->view('templates/footer');
} 
```

**创建视图**

```
<h2>Create a news item</h2>

<?php echo validation_errors(); ?>
<?php echo form_open('news/create') ?>
    <label for="title">Title</label> 
    <input type="input" name="title" /><br />

    <label for="text">Text</label>
    <textarea name="text"></textarea><br />

    <input type="submit" name="submit" value="Create news item" /> 
</form> 
```

生成的 HTML...

```
<form action="jonhopkins.net/news/create" method="post" accept-charset="utf-8"> 
    <label for="title">Title</label> 
    <input type="input" name="title" /><br />

    <label for="text">Text</label>
    <textarea name="text"></textarea><br />

    <input type="submit" name="submit" value="Create news item" /> 
</form> 
```

**新闻模型**我认为它永远不会到达这里，但以防万一

```
public function set_news() {
    $this->load->helper('url');

    $slug = url_title($this->input->post('title'), 'dash', TRUE);

    $data = array(
        'title' => $this->input->post('title'),
        'slug' => $slug,
        'text' => $this->input->post('text'),
        'date' => date("Y-m-d H:i:s")
    );

    if ($this->db->insert('news', $data)) {
        return $slug;
    } else {
        return FALSE;
    }
} 
```

**路线**

```
$route['news/create'] = 'news/create';
$route['news/(:any)'] = 'news/view/$1';
$route['news'] = 'news';
$route['(:any)'] = 'pages/view/$1';
$route['default_controller'] = 'pages/view'; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T20:49:31.857

该`form_open('news/create')`方法使用该`$CI->Config->site_url()`方法，而该方法又使用`base_url`您的配置文件中的 。

确保您`$config['base_url']`在文件中设置为您的域（带有斜杠）`application/config/config.php`。

```
$config['base_url'] = 'http://jonhopkins.net/'; 
```

# php - 多列语言与一列中的序列化数组

> ID：14164627
> 
> 赞同：1
> 
> 时间：2013-01-04T20:40:21.393
> 
> 标签：php, mysql

我正在尝试以更准确和专业的方式创建表格。

我需要两个字段`TITLE`和`DESCRIPTION`两种语言，但我不太确定是否会在一段时间后添加第三种语言。

你更喜欢哪一个？

```
-----------------------------------------------------------
id | title_en | title_ge | description_en | description_ge
-----------------------------------------------------------
...|..........|..........|................|................
----------------------------------------------------------- 
```

或者

```
---------------------------
id | titles   | descriptions
---------------------------
...|serialized| serialized
--------------------------- 
```

序列化的地方是这样的

```
array(
 'en' => 'title for english',
 'ge' => 'title for georgian'
) 
```

或者有什么其他建议？感谢您未来的推荐。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:47:19.700

我会结合两张桌子来做。

您的第一个表格应仅包含英文标题和描述。类似于你现在拥有的。

您的辅助表将包括翻译。结构类似于：

```
-----------------------------------
doc_id | lang | title | description
----------------------------------- 
```

您将在标题和描述上放置一个包含 doc_id 和 lang 和全文索引的主键。

这样，如果您要查找的语言的翻译不存在，您可以构建一个回退到原始英文文本的查询，并将您的搜索限制为一种或另一种特定语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T20:50:05.713

我会创建一个包含四个字段（id、title、description、language）的表

```
--------------------------------------
id | titles   | descriptions | language
---------------------------------------
 1  |title in en| desc in en | en
----------------------------------------
 2   |title in ge| desc in ge | ge 
```

# ios - 快速方向改变IOS

> ID：14164629
> 
> 赞同：1
> 
> 时间：2013-01-04T20:40:25.400
> 
> 标签：ios, uiviewcontroller, orientation-changes

当方向变化发生得太快并且时间重叠时，控制方向变化的最佳方法是什么？在我的应用程序中，我显示一个 PDF 文档并根据当前的纵横比对其进行缩放。如果在前一个完成之后发生新的方向更改，则它可以正常工作。否则，我似乎会得到一个不一致的状态（例如横向模式下的纵向纵横比显示）。

谢谢，

山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:45:56.543

我不知道您在哪个事件中使用您的代码。如果您正在使用`-didRotateFromInterfaceOrientation`或者`-willRotateToInterfaceOrientation`它应该可以正常工作。但是，如果您为此使用设备方向通知，则可能会引起很多麻烦。

# jquery - jquery简单问题

> ID：14164630
> 
> 赞同：0
> 
> 时间：2013-01-04T20:40:32.147
> 
> 标签：jquery

我是 jquery 的新手 .. 我有这个 html 代码

```
<div id='input'>
<table>
    <tr>
    <td class="number">
    <input><input><input><input><br>
    </td>
    <td style="vertical-align:bottom"><button>+</button></td>
    </tr>
    <tr>
    <td class="number">
    <input><input><input><input><br>
    </td>
    <td style="vertical-align:bottom"><button>+</button></td>
    </tr>
</table>
</div> 
```

对于我的脚本部分

```
jQuery.fn.vcenter = function(parent) {
    if (parent) {
        parent = this.parent();
    } else {
        parent = window;
    }
    this.css({
        "position": "absolute",
        "left": ((($(parent).width() - this.outerWidth()) / 2) + $(parent).scrollLeft() + "px"),
    });
return this;
}
jQuery.fn.hcenter = function(parent) {
    if (parent) {
        parent = this.parent();
    } else {
        parent = window;
    }
    this.css({
        "position": "absolute",
        "top": ((($(parent).height() - this.outerHeight()) / 2) + $(parent).scrollTop() + "px"),
    });
return this;
}
jQuery.fn.center = function(parent) {
    if (parent) {
        parent = this.parent();
    } else {
        parent = window;
    }
    this.css({
        "position": "absolute",
        "top": ((($(parent).height() - this.outerHeight()) / 2) + $(parent).scrollTop() + "px"),
        "left": ((($(parent).width() - this.outerWidth()) / 2) + $(parent).scrollLeft() + "px"),
    });
return this;
}
$(document).ready(function(){
$("#input").vcenter(true);
});
$("#input:button").click(this.parent().prev().html()+="<input><input><input><input><br>"); 
```

我想要做的基本上是每次我单击元素内具有 id“输入”
的按钮时，脚本执行以下操作：脚本转到父元素（the），然后是前一个兄弟元素！然后在其 html 内部添加以下内容：`"<input><input><input><input><br>"`
我已经完成了我的作业！我需要帮助！这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:46:13.717

.click() 处理程序将函数作为其参数。

所以

```
$("#input button").click(this.parent().prev().html()+="<input><input><input><input><br>"); 
```

会成为

```
$("#input button").click(function(event) {
    var old_html = $(this).parent().prev().html();
    $(this).parent().prev().html(old_html+"<input><input><input><input><br>");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:46:28.047

您有一些语法错误。尝试 ：

```
$("#input:button").click(function(
    //$(this) or $(".number") depending on your need
    $(this).parent().prev().html(
        $(this).parent().prev().html()+="<input><input><input><input><br>")
    );
}); 
```

# delphi - 每当对象字段值更改时如何定义断点？

> ID：14164631
> 
> 赞同：16
> 
> 时间：2013-01-04T20:40:39.423
> 
> 标签：delphi, delphi-xe2

作为一个例子，给定下面的代码摘录，我想定义一个断点，只要对象字段值发生变化就会触发，并且可以选择在条件（`False`或`True`在这种情况下）中断。

```
type
  TForm1 = class(TForm)
    EnableButton: TButton;
    DisableButton: TButton;
    procedure EnableButtonClick(Sender: TObject);
    procedure DisableButtonClick(Sender: TObject);
  private
    FValue: Boolean; // <== Would like to define a breakpoint here whenever FValue changes.
  public
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.DisableButtonClick(Sender: TObject);
begin
  FValue := False;
end;

procedure TForm1.EnableButtonClick(Sender: TObject);
begin
  FValue := True;
end; 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-04T20:49:53.847

在调试器下运行应用程序，

从 IDE 菜单中选择“运行”，然后选择最底部的“添加断点”，然后选择“数据断点...”。

输入“Form1.FValue”作为“地址：”字段的输入。您还可以在同一个对话框中设置您的条件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T23:18:45.377

感谢 Sertac 的回答和 David 的评论，提供了一些额外的信息。

可以根据具有条件的数组项的更改来定义断点。

在这种情况下，数据断点定义如下：

```
Form1.FBooleans[0] = True 
```

代码摘录：

```
type
  TBooleanArray = array of Boolean;

  TForm1 = class(TForm)
    EnableButton: TButton;
    DisableButton: TButton;
    procedure EnableButtonClick(Sender: TObject);
    procedure DisableButtonClick(Sender: TObject);
  private
    FBooleans: TBooleanArray; // Breakpoint defined here with the condition
  public
    constructor Create(AOwner: TComponent); override;
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

constructor TForm1.Create(AOwner: TComponent);
var
  AIndex: Integer;
begin
  inherited;
  SetLength(FBooleans, 3);
  for AIndex := 0 to Length(FBooleans) - 1 do
  begin
    FBooleans[AIndex] := (AIndex mod 2) = 1;
  end;
end;

procedure TForm1.DisableButtonClick(Sender: TObject);
begin
  FBooleans[0] := False;
end;

procedure TForm1.EnableButtonClick(Sender: TObject);
begin
  FBooleans[0] := True; // Beakpoint stops here on condition.
end; 
```

# sql - 包含用户活动的表格 - 设计问题

> ID：14164633
> 
> 赞同：0
> 
> 时间：2013-01-04T20:40:51.027
> 
> 标签：sql, database, database-design

在我的网站上，用户可以制作一些物品，这些物品放在`Items`桌子上。
用户也可以互相关注，以及我存储在`Followings`表中的那些数据。
现在我需要一张跟踪用户活动的表，所以我创建了：

```
Users{UserId, Username, FirstName, LastName}
Items{ItemId, Title, CreatedByUserId}
Activity{ActivityId, ActivityTypeId, UserId, ItemId} 
```

这里`ItemId`可以是或`ItemId`来自`Items`表或`UserId`来自`Users`表。

这个设计好还是有更好的方法来做到这一点？

**编辑：**我添加了表结构。关键是每次用户创建项目或开始关注某个用户时，我都不会向该 Activity 表添加记录。所以我总是可以跟踪用户在网站上做了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T11:20:51.180

> 这里的 ItemId 可以是 Items 表中的 ItemId 或 Users 表中的 UserId。

这将阻止 DBMS 强制执行外键。如果您沿着这条路线走，最好将这些字段分开（这样您就可以将外键指向它们各自的表）并使用 CHECK 来确保其中一个是非 NULL 的：

![在此处输入图像描述](../Images/82418b85d562160dc5f73cac97b65d1c.png)

```
CHECK (
    (ITEM_ID IS NOT NULL AND FOLLOWED_USER_ID IS NULL)
    OR (ITEM_ID IS NULL AND FOLLOWED_USER_ID IS NOT NULL)
) 
```

PK经过`ACTIVITY`精心设计，可以轻松查询特定用户的“时间线”，并且对[集群](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)友好。

*（您可能需要也可能不需要`ACTIVITY.TYPE`，具体取决于您要跟踪的具体内容。）*

* * *

另一种方法是为每种活动设置一个单独的表：

![在此处输入图像描述](../Images/db93a68d7037abf01cfd8afd8ab9f6ad.png)

*（您可以添加一个`TYPE`字段`FOLLOW_ACTIVITY`来区分“关注”和“取消关注”。）*

* * *

另一种选择是从一个共同的父“类”[继承](https://stackoverflow.com/a/11462181/533120)用户和项目，然后链接到该类：

![在此处输入图像描述](../Images/1476fdae464150b24a692deeb4561106.png)

在这种情况下，这种设计可能有点矫枉过正，但如果您稍后添加许多其他类型的可以跟踪的对象，它可能会很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T21:07:11.637

```
Items{ItemID,descr,UserIDCreator,date-time}
User{UserID,descr}
Followings{UserIDFollowed,UserIDFollower,date-time} 
```

现在，如果您不希望所有由 eser 创建的项目在以下项目上使用相同的用户代码，我会为 chrono select 添加日期时间

您可以创建触发表或视图，这取决于数据的基数

如果同一对象可以在用户之间共享

```
Items{ItemID,descr,}
UserItems{UserID,descr,ItemId,date-time}
User{UserID,descr}
Followings{UserIDFollowed,UserIDFollower,date-time} 
```

我希望有用

# php - 如何从提要中获取所有节点值

> ID：14164641
> 
> 赞同：0
> 
> 时间：2013-01-04T20:41:19.820
> 
> 标签：php, xml, json, simplexml

我有以下提要：

```
$result = apiCall('somevalue', 'somevalue', array('somevalue' => $some_string)); 
```

这是json格式。我可以很容易地把它变成 xml

```
$xml = simplexml_load_string($result); 
```

xml 提要如下所示：

```
<?xml version="1.0" encoding="ISO-8859-15"?>
    <response>
        <status>success</status>
        <code>200</code>
        <message>
            <a>
                <g>val1</g>
                <b>val2</b>
                <c>val3</c>
            </a>
            <d>
                <e>val4</e>
                <f>val5</f>
            </d>
        </message>
    </response> 
```

有没有一种简单快捷的方法来获取所有节点值（即 val1、val2、val3、val4、val5 等）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:08:03.713

我写了一些我认为可行的东西：

```
<?php

$xml = <<<EOD
<?xml version="1.0" encoding="ISO-8859-15"?>
<response>
    <status>success</status>
    <code>200</code>
    <message>
        <a>
            <g>val1</g>
            <b>val2</b>
            <c>val3</c>
        </a>
        <d>
            <e>val4</e>
            <f>val5</f>
        </d>
    </message>
</response>
EOD;

$output = array();
$test = simplexml_load_string($xml);
$result = $test->xpath('message//*[not(*)]');
while(list(, $node) = each($result)) {
    array_push($output, (string) $node);
}

var_dump($output);

?> 
```

我还没有在很多东西（属性）上测试它，但是在提供的输入上它给出了预期的输出。它的作用就像您可以看到检索节点的任何子`message`节点的 xpath 表达式。

当然，由于其中也有包含更多子节点的节点（例如`a`和`d`），我们需要将它们过滤掉。所以最后一部分包含`not(*)`意味着它只会选择那些没有任何子孩子的孩子。

我不是 XPATH 专家，所以可能有更快的方法来实现这一点，但我认为这会做到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T21:33:45.433

我得出了与 Dimitri M 类似的结论，它基于之前的 Q&A[*如何使用 XPath 表达式选择所有叶节点？*](https://stackoverflow.com/questions/3926589/how-to-select-all-leaf-nodes-using-xpath-expression).

叶节点是最外层的节点，也就是您要查找的`text()`节点，这里是您的案例中的节点。

```
$nodeValues = array_map(
    'trim',
    simplexml_load_string($xml)->xpath('message//*[not(*)]/text()')
); 
```

鉴于这`$xml`是您的 XML 输入，`$nodeValues`那么它就是代表您正在寻找的节点值的所有字符串的数组。示例：

```
Array
(
    [0] => val1
    [1] => val2
    [2] => val3
    [3] => val4
    [4] => val5
) 
```

# linux - fwrite 剖析

> ID：14164642
> 
> 赞同：1
> 
> 时间：2013-01-04T20:41:25.783
> 
> 标签：linux, file, file-io, filesystems

我用C写了一个小程序

```
FILE *fp = fopen("/tmp/file", "w+");
char *buf = "hello";
fwrite(buf, 1, strlen(buf), fp);
for(;;); 
```

在我使用 cat 读取内容的 shell 上，文件为空，因为 fflush 没有被调用。我的问题是它会永远保持这种状态，还是会在某个时候将数据推送到磁盘？

换句话说，fwrite 调用是否跨越文件系统边界到 VM 子系统，如果是，则有时应调用页面守护程序，它将内容刷新到文件中。如果不是，那么数据将永远保留在那里，直到文件关闭或刷新。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T20:48:34.450

每个*stdio* `FILE`都有一个内部缓冲区（请参阅[setvbuf](http://pubs.opengroup.org/onlinepubs/009695299/functions/setvbuf.html)了解更多信息）。`fwrite`or `fprintf`or`fputs`调用正在填充该缓冲区。仅当已满或[调用](http://www.kernel.org/doc/man-pages/online/pages/man2/write.2.html)`fflush`.

^(您可能有行缓冲（例如用于标准输出），然后`write`当缓冲区中出现换行符时触发)

PS尝试`strace`你的程序来了解它在做什么。

PPS Linux 是**免费软件：您可以研究**[GNU libc](http://www.gnu.org/software/libc/)或[musl-libc](http://www.musl-libc.org/)的源代码——我发现它们的源代码更易于阅读。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T20:47:27.780

FILE* 缓冲是在 libc 中实现的，所以答案是否定的：内核看不到您的数据，而且永远不会。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-04T20:46:55.457

fwrite 在 write 系统调用之上添加缓冲。这种缓冲发生在客户端库 (libc) 中，因此在您的情况下，您可以永远等待，因为 libc 中没有运行自行执行刷新的异步线程。

# c# - 将 c# 逆向工程为可导入 LucidCharts 的格式

> ID：14164665
> 
> 赞同：1
> 
> 时间：2013-01-04T20:42:59.490
> 
> 标签：c#, .net, uml, visio, lucidchart

我正在尝试想出一种方法来将我们当前的大型应用程序导入到 LucidCharts 的 UML 图中。LucidCharts 支持来自 visio 的 vdx XML 格式。我只是主要想找到一种方法来轻松地做到这一点，而不是在 LucidCharts 中输入每个类名和方法。链接和调用链链接我并不关心我自己能做的事情。

有没有简单的解决方案，或者我可以做些什么来读取元数据并制作 vdx 投诉文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T20:49:23.037

实际上，有几个开源和商业工具可以从 C# 项目和 visa-verse 创建 UML 图。例如，我将尝试列出其中三个：

**选项 #1：**尝试使用[Modelmaker](http://www.modelmakertools.com/modelmaker/index.html)。它可以与 Delphi 和 C# 一起使用。我应该补充一点，它不仅仅是图表，它还可以用于逆向工程、重构等。它已经有一段时间了，并且有很多很棒的功能。

**选项 #2：**您也可以尝试面向 .NET 开发人员的 NDepend 工具。它带有依赖图和依赖矩阵，并集成在 VS 中。图形和矩阵可以从 .NET 程序集生成，并且它们是交互式的。您可以[下载并使用免费试用版](http://www.ndepend.com/NDependDownload.aspx)一段时间并发表自己的看法。

**选项#3：** Tigris.org 的家伙们也在这方面做了一些工作。这是该项目的[开源链接](http://argouml-csharp.tigris.org/)。这也令人印象深刻。

# ruby-on-rails-3 - 无法使用 RubyMine 进行调试

> ID：14164667
> 
> 赞同：0
> 
> 时间：2013-01-04T20:43:19.437
> 
> 标签：ruby-on-rails-3, rubymine

当我开始调试以进行开发时，我收到以下消息：

```
Connecting to database specified by database.yml 
```

然后，什么也没发生，我等了很久，什么也没发生，虽然数据库设置是正确的

如果我在没有调试的情况下使用开发启动服务器，它将正常启动

任何想法 ？在哪里检查这个问题？

```
EDIT 
```

数据库.yml：

```
# PostgreSQL. Versions 8.2 and up are supported.
#
# Install the pg driver:
#   gem install pg
# On Mac OS X with macports:
#   gem install pg -- --with-pg-config=/opt/local/lib/postgresql84/bin/pg_config
# On Windows:
#   gem install pg
#       Choose the win32 build.
#       Install PostgreSQL and put its /bin directory on your path.
#
# Configure Using Gemfile
# gem 'pg'
#
development:
  adapter: postgresql
  encoding: unicode
  database: dcaclab_development
  pool: 5
  username: samir
  password: 123456

#  adapter: postgresql
#    encoding: unicode
#    database: jerry
#    pool: 5
#    username: tom
#    password: myPassword

  # Connect on a TCP socket. Omitted by default since the client uses a
  # domain socket that doesn't need configuration. Windows does not have
  # domain sockets, so uncomment these lines.
  #host: localhost
  #port: 5432

  # Schema search path. The server defaults to $user,public
  #schema_search_path: myapp,sharedapp,public

  # Minimum log levels, in increasing order:
  #   debug5, debug4, debug3, debug2, debug1,
  #   log, notice, warning, error, fatal, and panic
  # The server defaults to notice.
  #min_messages: warning

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter: postgresql
  encoding: unicode
  database: dcaclab_development
  pool: 5
  username: samir
  password: 123456

production:
  adapter: postgresql
  encoding: unicode
  database: dcaclab_development
  pool: 5
  username: samir
  password: 123456 
```

**编辑 2**

```
/usr/local/rvm/rubies/ruby-1.9.3-p125/bin/ruby -e at_exit{sleep(1)};$stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) 

/usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/ruby-debug-ide-0.4.17.beta14/bin/rdebug-ide --dispatcher-port 33169 --port 46779 -- /root/RubymineProjects/dcaclab/script/rails server -b 0.0.0.0 -p 3000 -e development

Fast Debugger (ruby-debug-ide 0.4.17.beta14, ruby-debug-base 0.11.30.pre10) listens on 127.0.0.1:46779 
```

# c++ - 在默认构造函数中显式设置初始化列表有优点还是缺点？

> ID：14164669
> 
> 赞同：4
> 
> 时间：2013-01-04T20:43:23.703
> 
> 标签：c++, initialization-list

为您的 C++ 对象构造函数显式地拥有一个完整的初始化列表有什么优点或缺点吗？（即使我们只是使用默认构造函数，您也列出了所有成员？）

例如，如果我有对象：

```
class MyObject
{
    public: 
        MyObject();
    private:
        double _doub;
        Foo _foo;
        std::set<int> _intSet;
        int _int;
        Bar _bar;
} 
```

让我的构造函数成为：

```
MyObject::MyObject():
    _doub(1.4), _foo("me"), _intSet(),
    _int(5), _bar() {}; 
```

而不是只列出我特别需要设置数据的对象（或调用非默认构造函数）：

```
MyObject::MyObject():
    _doub(1.4), _foo("me"), _int(5) {}; 
```

如果该类只有使用默认构造函数的对象，我是否应该设置一个初始化列表？

例如：

```
class MyObject
{
    public: 
        MyObject();

    private:
        Foo _foo;
        std::set<int> _intSet;
        Bar _bar;
} 
```

有这样的构造函数有什么意义吗？

```
MyObject::MyObject():
    _foo(), _intSet(), _bar() {}; 
```

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T20:52:51.747

初始化程序为没有用户定义的构造函数的`()`对象调用“无构造函数”值初始化。`()`因此，对于此类对象，构造函数初始值设定项列表中显式初始值设定项的存在与否会有所不同。

可以为使用`()`初始化程序（“尽可能保持一切初始化”）和反对它（“避免无偿的虚拟初始化”）提出论据。

就个人而言，如果有或没有初始化程序的行为相同`()`，我会避免将成员包含在构造函数初始化程序列表中。此外，如果行为不同但我还没有针对特定成员的有意义的初始化程序，我更愿意让它保持未初始化（而不是调用值初始化）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:56:37.160

**坏处**

```
class A {
public:
     A(); //Where A does not initialize members
     void initMembers(); //A function that initalizes everything
     void tellClassBName(); //Writes a line in the console with the name of b1
private:
     B b1;
     int aNumber;
} 
```

想象一下创建一个类 A 的实例。这个对象将不保存 b1 的值。尽管如此，您仍然可以在调用 initMembers() 之前调用 tellClassBName()，这将导致错误。

在团队工作时，如果没有良好的文档，这似乎不是很好。

# ruby-on-rails - 如何将 ':include_blank => true' 添加到自定义的 select_tag？

> ID：14164671
> 
> 赞同：0
> 
> 时间：2013-01-04T20:43:36.240
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view

我想添加这个选项

> :include_blank => 真

如何将其添加到此 select_tag？

```
 <%= select_tag :genre, options_for_select(Genre.all.map{ |g| [g.name, g.id] }) %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:54:06.083

我在文档中找到了这个：

```
select_tag "people", options_from_collection_for_select(@people, "id", "name"), :prompt => "Select something" 
```

所以你使用 :prompt => "空白提示"

你的可能看起来像这样：

```
select_tag :genre, options_from_collection_for_select(Genre.all.map{ |g| [g.name, g.id] }, "id", "name"), :prompt => "Select something" 
```

此处的文档：[http](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html) ://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html 查看 select_tag

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T10:24:28.617

您可以将选项`include_blank`与`select_tag`.

从文档中：

```
select_tag "people", options_from_collection_for_select(@people, "id", "name"), :include_blank => true

# => <select id="people" name="people"><option value=""></option><option value="1">David</option></select> 
```

或者您可以使用`options_for_select`：

```
<%= select_tag column.name, options_for_select(Genre.all.map{ |g| [g.name, g.id] }), :include_blank => true %> 
```

# google-app-engine - 将 *datastore.Key 添加到切片

> ID：14164678
> 
> 赞同：2
> 
> 时间：2013-01-04T20:44:06.660
> 
> 标签：google-app-engine, key, google-cloud-datastore, go

我成功获取所有数据并使用模板显示在表格中。我在此代码中使用 Go 查询以 Membership 作为实体类型的数据存储。

在 html 页面中，所有数据都显示，但不显示键。

我试图将`Key *datastore.Key`属性添加到`Membership`结构中，但仍然没有运气。

这是我的代码：

```
package hello

import (
    "appengine"
    "appengine/datastore"
    "html/template"
    "net/http"
    "time"
)        

type Membership struct {
    Key *datastore.Key
    Author  string
    Content string
    FirstName string
    LastName string
    Address string
    Email string 
    Grade string
    Date    time.Time
}

func init() {
    http.HandleFunc("/", members)
}

func members(w http.ResponseWriter, r *http.Request) {
    c := appengine.NewContext(r)
    q := datastore.NewQuery("Membership").Order("-Date")
    memberships := make([]Membership, 0, 10)
    if _, err := q.GetAll(c, &memberships); err != nil {
        http.Error(w, err.Error(), http.StatusInternalServerError)
        return
    }
    if err := membersTemplate.Execute(w, memberships); err != nil {
        http.Error(w, err.Error(), http.StatusInternalServerError)
    }
}

var membersTemplate = template.Must(template.New("page").Parse(membersTemplateHTML))

const membersTemplateHTML = `
<html>
  <body>
    <table><tr><th>Key</th><th>Name</th><th>Email</th><th>Adress</th><th>Grade</th></tr>
      {{range .}}
        <tr>
          <td>{{.Key}}</td>
          <td>{{.FirstName}} {{.LastName}}</td>
          <td>{{.Email}}</td>
          <td>{{.Address}}</td>
          <td>{{.Grade}}</td>
        </tr>
      {{end}}
    </table>
  </body>
</html>` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T20:56:08.907

您需要将密钥分配给`Key`属性：

```
func members(w http.ResponseWriter, r *http.Request) {
  ....
    if keys, err := q.GetAll(c, &memberships); err != nil {
        http.Error(w, err.Error(), http.StatusInternalServerError)
        return
    }
    // Loop over the membership and add the keys
    for i := range memberships {
         memberships[i].Key = keys[i]
    }
  ....
} 
```

您可能还希望禁用将`Key`属性存储在数据存储中：

```
type Membership struct {
    Key *datastore.Key `datastore:"-"`
    ....
} 
```

顺便提一句。如果你想`*datastore.Key`在 HTML 中显示，你应该[`Encode()`](https://developers.google.com/appengine/docs/go/datastore/reference#Key.Encode)在之前。

# android - 警报管理器和通知 Android

> ID：14164681
> 
> 赞同：0
> 
> 时间：2013-01-04T20:44:20.513
> 
> 标签：android

我正在尝试设置警报管理器，以便我的应用程序每周日发送通知，但我似乎无法得到它。这是我的代码：

此代码位于名为“StatusOfChild.java”的类的 onCreate 方法中

```
Intent myIntent = new Intent(StatusOfChild.this , myService.class);     
    AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
    PendingIntent pendingIntent = PendingIntent.getService(StatusOfChild.this, 0, myIntent, 0);

    Calendar calendar = Calendar.getInstance();
    calendar.set(Calendar.DAY_OF_WEEK, 1);
    calendar.set(Calendar.HOUR_OF_DAY, 12);
    calendar.set(Calendar.MINUTE, 00);
    calendar.set(Calendar.SECOND, 00);

    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), 24*60*60*1000 , pendingIntent);  //set repeating every 24 hours 
```

此代码位于名为“myService.java”的类中

```
public class myService extends IntentService{

public myService(){
    super("myService");
}

@Override
protected void onHandleIntent(Intent intent) {
    // TODO Auto-generated method stub
    NotificationManager nm = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notify = new Notification(R.drawable.main1,"Its Time to Eat",1000);

    Context context = myService.this;
    CharSequence title = "Its Time to Eat";
    CharSequence details = "Click Here to Search for Restaurants";
    Intent myIntent = new Intent(context,StatusOfChild.class);
    PendingIntent pending = PendingIntent.getActivity(context, 0, myIntent, 0);
    notify.setLatestEventInfo(context, title, details, pending);
    nm.notify(0,notify);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:26:44.827

在 Calender(calendar) 中，您需要设置 MONTH 和 YEAR。请以适当的格式（数据和时间格式）打印日历的值；以便您知道您为alarmManager 设置的时间。

# c++ - 从进程句柄获取进程信息

> ID：14164685
> 
> 赞同：3
> 
> 时间：2013-01-04T20:44:37.407
> 
> 标签：c++, windows

我需要`PROCESS_INFORMATION`在我的应用程序中使用外部进程，我有进程句柄和进程 ID，但我不知道如何`PROCESS_INFORMATION`解决这个问题。

我正在使用在 Windows 上运行的 C++(11)、Visual Studio 2012。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T20:59:37.993

`PROCESS_INFORMATION`由 填充`CreateProcess()`。那艘船已经航行了；该过程已经开始。

让我们专注于你*真正*想做的事情。要查明进程是否已终止，首先使用`OpenProcess()`获取进程的句柄。您将需要已经拥有的 PID。然后`WaitForSingleObject()`会告诉你它是否被终止。传递`INFINITE`第二个参数以阻塞，直到进程终止。`0`如果您想投票，请通过。最后，`CloseHandle()`用来清理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T21:51:32.260

`PROCESS_INFORMMATION`提供4条信息：

```
HANDLE hProcess
HANDLE hThread
DWORD dwProcessID
DWORD dwThreadID 
```

您说您已经拥有其中两个值 - 进程句柄和进程 ID。这样就只剩下线程句柄和线程 ID。这些属于为该进程创建的第一个线程。您可以使用`CreateToolhelp32Snapshot()`、`Thread32First()`和`Thread32Next()`枚举正在运行的线程，查找属于给定进程 ID 的线程 ID，然后用于`OpenThread()`获取给定线程 ID 的线程句柄。棘手的部分是确定哪个线程 ID 是第一个线程。该信息在`CreateProcess()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T21:27:47.810

您需要的信息可以通过[CreateToolhelp32Snapshot 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682489%28v=vs.85%29.aspx)获得，因为它返回进程 ID 和父进程 ID。可以在[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686701%28v=vs.85%29.aspx)找到其使用示例。

# php - 与浮点短语匹配的字符串

> ID：14164687
> 
> 赞同：-3
> 
> 时间：2013-01-04T20:44:50.357
> 
> 标签：php, regex

有一个带有服务器动态正常运行时间输出的字符串，
例如：

```
20:17:49 up 3 days, 9:25, 1 user, load average: 1.19, 1.34, 1.36
22:00:12 up 1 min, load average: 1.39, 0.46, 0.16
06:40:39 up 445 days, 1:08,  3 users,  load average: 0.01, 0.01, 0.00 
```

其中*“, 1 user”*短语可能存在也可能不存在。我只需要获取此字符串的正常运行时间部分，即：“ *3 days, 9:25* ”

使用 php 或/和正则表达式执行此操作的最短变体是什么？

**编辑：**对不起，忘了提到该字符串由动态内容组成

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T20:53:39.940

尽管使用正则表达式可能很容易（如果您知道正则表达式），但我会说最好自己完成以下内容来了解​​ PHP：

1.  找到`' up '`（见[`strpos()`](http://php.net/strpos)）的第一个位置。
2.  从该位置查找 的下一个位置`', '`。
3.  从该位置找到`', '`（再次）的下一个位置。
4.  从 1\. 的位置和 1\. 中搜索字符串的长度到 3\. 中找到的位置，得到有[`substr()`](http://php.net/substr)问题的字符串。

那么你就有了结果。我将此作为练习来编写具体代码。如果您在编写它时遇到任何问题，请告诉我。

* * *

只是看到你的评论，你不确定是否真的有两个逗号。然后，您可能需要从后面查找逗号。

* * *

在某种程度上，一个正则表达式就派上用场了，因为它可以非常精确地制定匹配条件，并且可以使某些部分成为可选的：

```
$pattern = '/(?<= up )(?:\d+ days?, )?\d{1,2}:\d\d/';
$uptime  = preg_match($pattern, $subject, $m) ? $m[0] : FALSE; 
```

这就像在上面的纯 PHP 大纲中搜索第一个位置一样向后看`' up '`（这就是为什么最好先用 PHP 字符串函数编写东西，学习并了解如何构建正则表达式是很好的），然后它正在寻找可选的日期模式。这里正则表达式非常强大，因为它很容易表达寻找数字。然后终于寻找时间的数字。

也许这仍然需要一些修改，我不完全确定小时/分钟部分的正常运行时间模式。例如，如果是一天零一分钟呢？还是只有一天零分钟？那时会发生什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T20:49:50.270

```
<?php
$string = '20:17:49 up 3 days, 9:25, 1 user, load average: 1.19, 1.34, 1.36';
$result = substr($string, strpos($string, 'up')+3, strpos($string, ',') - strpos($string, 'up')+3); 
```

请参阅[http://codepad.viper-7.com/gDG4Lf](http://codepad.viper-7.com/gDG4Lf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T20:54:18.100

由于您*要求*使用正则表达式：

```
$regEx = '/.+? up (?:([1-9]+ days, ))?([1]?\d{1}:[0-5]\d{1}).*+/';

// With days included:
$str = '20:17:49 up 3 days, 9:25, 1 user, load average: 1.19, 1.34, 1.36';
echo preg_replace($regEx, "$1$2", $str);

    3 days, 9:25

// No days included:
$str = '20:17:49 up 9:25, 1 user, load average: 1.19, 1.34, 1.36';
echo preg_replace($regEx, "$1$2", $str);

    9:25 
```

RegEx 可以更紧凑，但如果不使其过于宽松，则不会太多。这有一个小问题（至少） - 它会允许以 开头的时间`0:`，但我已经在这方面花费了太多时间，呵呵。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-04T20:49:06.377

您可以在没有正则表达式的情况下执行此操作，只需使用以下`explode()`命令：

```
$str = "20:17:49 3 天，9:25，1 个用户，平均负载：1.19, 1.34, 1.36";
$array = explode(" ", $str);
回声 $array[2] 。“”。$数组[3] 。“”。$数组[4];

```

编辑：回声结果的更正。

# c# - 将数据从 Rails 3 应用程序传输到 C# 桌面应用程序

> ID：14164689
> 
> 赞同：0
> 
> 时间：2013-01-04T20:44:52.357
> 
> 标签：c#, ruby-on-rails

这是我认为我知道如何解决的问题之一，但如果我不查一下 - 我最终可能会重新发明轮子。

这是任务。

我有一个 C# 应用程序，它需要每分钟联系我的 Rails 3 应用程序，并从那里获取信息。

我会这样做：

*   从 C# 应用程序向 Rails 网站发出 POST 请求（包含某种密钥或用户名/密码）
*   网站确保密码正确
*   向数据库发出一些请求
*   获取一个对象（模型），并且
*   用一个字符串响应，可能是这样的：

    ```
    @response = ""

    if secretkey == '123'

    @item = Item.find(1)
    @response = @item.name + "|" + @item.price + ...

    end 
    ```

    然后在视图中返回 @response 或`render :text`返回 C# 应用程序。

这是一个聪明的方法吗？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:49:04.017

您所描述的是在 Rails 中创建服务（使用 API）并通过网络客户端访问它。

正确的方法是实施：

*   认证：最好是OAUTH2
*   API：定义您的资源。查看 RESTful API，您也可以决定使用 RABL gem 来描述您的 API
*   实现控制器，将您的数据序列化为可消耗的东西。我建议使用 JSON 或 XML，而不是 TEXT。

# mongoose - 字符串数组的猫鼬数组

> ID：14164693
> 
> 赞同：1
> 
> 时间：2013-01-04T20:45:06.580
> 
> 标签：mongoose

我希望有一个 Mongoose Schema 属性包含一个字符串数组，就像这样

```
[['one','two','three'],['four','five']] 
```

我应该如何在我的架构中对此进行建模？以下似乎不起作用，但它可能是另一个错误......

```
names : [[{type: String, trim: true}]] 
```

我是否必须根据[Mongoose 中的嵌套数组创建一个单独的模式](https://stackoverflow.com/questions/11342073/nested-arrays-in-mongoose)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:56:43.010

啊，事实证明嵌套数组确实必须放在单独的模式中

```
var InnerArray = new mongoose.Schema({
  set : [{type: String, trim: true}]
})

var Stuff = new mongoose.Schema({
foo : [InnerArray]
}) 
```

# html5-audio - 如何分析通过 HTML5 输入的音频？

> ID：14164694
> 
> 赞同：1
> 
> 时间：2013-01-04T20:45:17.457
> 
> 标签：html5-audio

我如何分析通过 HTML5 音频输入输入的音高（例如 Chrome 可以做到这一点）？我说的是一个用户对着他的麦克风唱歌，应用程序分析音高来告诉他他唱的是什么音符（或者他离击中那个音符有多近）。

[Pocket Full Of HTML5](http://www.nihilogic.dk/labs/pocket_full_of_html5/ "装满 HTML5 的口袋")似乎能够很好地分析音频，但它不使用实时输入。

你对我有什么建议吗？

# javascript - 如何在 ajax 调用后拦截数据，与 jquery.ajaxPreFilter 对话

> ID：14164696
> 
> 赞同：1
> 
> 时间：2013-01-04T20:45:24.570
> 
> 标签：javascript, jquery

我想在执行ajax成功回调之前拦截和修改来自服务器的数据

我有这个代码：

```
 jquery.ajaxPrefilter(function (options, originalOptions, jqXHR) {
        // Modify options, control originalOptions, store jqXHR, etc
    }); 
```

并想要等价物：

```
 jquery.ajaxPostfilter(function (dataComingFromServer) {

        dataComingFromServer.applyMyModifications();
    }); 
```

虽然 ajaxPostfilter 不存在 - 是否有另一种方法可以在服务器响应到达事件处理程序之前拦截它：

这个问题与这个问题有关 - 但没有回答： [如何在事件处理程序之前拦截 jQuery 中的 ajax 响应？](https://stackoverflow.com/questions/7256207/how-can-i-intercept-ajax-responses-in-jquery-before-the-event-handler)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:17:08.697

如果您想在特定回调之前使用标准化函数修改数据，可以使用如下模式：

```
// Boilerplate to modify your data
function preprocess(data){
    data.foo = "bar";
    return data;
}

// Your specific handlers
function logdata(data){
    console.log(data);
}
function writedata(data){
    document.write(data);
}

// AJAX requests
$('#foo').load('url1', function(data) {
    logdata(preprocess(data));
});
$('#bar').load('url2', function(data) {
    writedata(preprocess(data));
}); 
```

当然，这可以烘焙成一种将传统的 包裹起来的方法，`.ajax`使用起来更方便。

请注意，`dataFilter`KevinB 指出的选项具有类似的目的，但仅限于`.ajax`方法。如果你想为 AJAX 请求设置一个全局过滤器，你可以使用：

```
$.ajaxSetup({
    dataFilter: preprocess
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-11T13:40:38.830

如果要在事件处理程序之前处理从服务器返回的数据，请使用 datafilter：

```
jquery.ajaxSetup({
    dataFilter: function (data, type) {
        //modify the data

        return data;
    }
}); 
```

# ms-access - 快速查找一列中的值，更改另一列中的值

> ID：14164710
> 
> 赞同：1
> 
> 时间：2013-01-04T20:46:23.527
> 
> 标签：ms-access, lookup

因此，当我最初设置我的 Access 表并需要帮助修复它（尽可能容易）时，我犯了一个小错误。

我有一个表称为`Locations`（小表，10 行）和另一个`Encounter Data`表（大表，100,000 行）。`Encounter Data`有一个指向 的查找列`Locations`。

我犯的错误是将位置*名称*而不是其主键存储在`Encounter Data`列中。现在，显然，如果我在`Locations`表中更改特定项目的名称，则查找`Encounter Data`失败。我应该做的是存储主键（然后我可以`Locations`自由编辑所有信息）。

我要解决这个问题。

但我不确定如何在新列中插入正确的 ID 来代替名称。

我的想法是简单地添加一个新列，正确创建查找（存储主键），然后执行以下任一操作：[1]`Encounter Data`按位置对我进行排序并像在 excel 中一样进行快速拖动/自动填充以匹配使用存储的名称查找正确的 ID 或 [2] 进行查找/替换...仅`LocationWhoopsColumn`在`LocationCorrectColumn`.

但这些方法似乎都不可行。我的位置很少，但要修复很多行……我该如何快速做到这一点？手动逐行更改需要数小时甚至数天。

谢谢！~

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:10:17.237

在其中创建新列`LocationId`，`Encounter Data`然后运行

```
UPDATE [Encounter Data] a INNER JOIN Locations b ON a.LocationName = b.Name
SET a.LocationId = b.id 
```

检查结果，然后在满意时删除列 LocationName。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T21:10:40.470

“ *... 在 LocationWhoopsColumn 中找到一个值并在 LocationCorrectColumn 中输入正确的 ID* ”

用于根据位置名称字段与 的匹配`DLookup`来检索主键值。 `Locations``LocationWhoopsColumn`

```
UPDATE YourBigTable
SET LocationCorrectColumn =
    DLookup(
        "pkey",
        "Locations",
        "location_name ='" & LocationWhoopsColumn & "'"); 
```

我猜“pkey”和“location_name”是`Locations`字段名；替换为您的真实姓名。

该更新可能不会很快，但希望这不会破坏交易，因为您只需要这样做一次。

# c# - 在 C# 中生成的奇怪标签

> ID：14164711
> 
> 赞同：0
> 
> 时间：2013-01-04T20:46:26.503
> 
> 标签：c#, asp.net, html, abbr

我有以下`GetText()`函数，它与我的问题有关，在以下位置被调用：

```
myGridView.DataSource = stuff.Select(s => new
{
   //...some stuff here
   f.Text = GetText();
}
myGridView.DataBind(); 
```

GetText 如下所示：

```
private void string GetText()
{
    StringBuilder sb = new StringBuilder();
sb.Append("<abbr title=\"Testing\">");
    sp.Append("This is the Text that I want to display");
sb.Append("<\abbr>");
} 
```

所以基本上，我想做的就是能够在我的网页上拥有以下 HTML：

```
<abbr title="Testing">This is the text that I want to display</abbr> 
```

但是，出现了一个神秘的标签。在谷歌浏览器中，我查看了控制台，发现它看起来像这样：

```
<abbr title="Testing">This is the text that I want to display<bbr></abbr> 
```

当我在行中添加时会生成一个无关的标签`sb.Append("<\abbr>");` 当我删除该行时，这是固定的，但我想找到一个更好的解决方案，因为这会使代码看起来很尴尬。

我还尝试执行以下操作而不是多行，`sb.Appends()`但仍然显示额外的文本。

```
sb.Append(string.Format("<abbr title=\"testing\">{0}<\abbr>",Text)); 
```

注意：假设 Text 是一个字符串，它等于我要显示的文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:49:19.260

采用

```
sb.Append("</abbr>"); 
```

可能`\abbr`被解释为转义字符`\a`后跟`bbr>`文本

顺便说一句，查看[MSDN 上的转义序列，](http://msdn.microsoft.com/en-us/library/h21280bw.aspx)这似乎`\a`是 BELL 字符的转义序列。（不，我认为您不应该听到 PC 发出哔哔声）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T20:49:28.833

你的结束标签是错误的。应该`</abbr>`不是`<\abbr>`。

`<\abbr>`将`a`在`<bbr>`. Chrome 显然关闭了`<abbr>`标签。所以多余的标签其实`</abbr>`不是`<bbr>`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T20:49:31.373

只是一个猜测，但是否因为您的结束标记中有反斜杠而不是斜杠？

```
sb.Append("<\abbr>"); 
```

对比

```
sb.Append("</abbr>"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T20:53:03.167

正如其他人所说，这是问题所在：

```
sb.Append("<\abbr>"); 
```

...但值得看看*到底*发生了什么。

那是附加`<`，然后是 U+0007 （“警报”字符或铃声），然后是`bbr>`. 如果您使用*不是*有效转义字符（例如`"<\zfoo>"`）的字符执行此操作，那么您将收到编译时错误。在其他一些情况下，您可能已经能够在 HTML 中看到它。只是因为你选择了一个完全不可见的控制角色，所以更难看到。

顺便说一句，我认为我*从未见过*需要`\a`. 我希望它不是一个有效的转义字符 - 以及`\x`十六进制序列......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-04T20:54:17.923

这就是你的方法应该如何

```
 private string GetText()
    {
        StringBuilder sb = new StringBuilder();
        sb.Append("<abbr title=\"Testing\">");
        sb.Append("This is the Text that I want to display");
        sb.Append("</abbr>");

        return sb.ToString();
    } 
```

“\”是一个转义字符:)

# sql - 访问联合/枢轴以交换列和行

> ID：14164717
> 
> 赞同：1
> 
> 时间：2013-01-04T20:46:42.327
> 
> 标签：sql, ms-access, pivot, transform, union

在此处访问 2010。我有一个疑问（谢谢 Andomar！）：

```
SELECT Inspection.Date, count(*) AS [# Insp], sum(iif(Disposition = 'PASS',1,0)) AS [# Passed], sum(iif(Disposition = 'FAIL',1,0)) AS [# Failed], sum(iif(Disposition = 'PASS',1,0)) /  count(*) AS [% Acceptance]
FROM Inspection
WHERE Disposition in ('PASS', 'FAIL') AND ((Inspection.Date) Between Date() And Date()-30)
GROUP BY Date; 
```

这给出了一个这样的表：

```
Date       | # Insp | # Passed | # Failed | % Acceptance
11/26/2012 | 7      | 5        | 2        | 71 
11/27/2012 | 8      | 4        | 4        | 50 
... 
```

我希望使用此查询为图表下方的子表单制作“表格”，仅供参考。“表格”的格式很重要，因为它需要列（日期）和行标题。括号里有表格，强调表格是实时生成的；换句话说，不存储为 Access 对象。

最终结果将是这样的：

```
Date         | 11/26/2012 | 11/27/2012 ...
# Insp       | 7          | 8
# Passed     | 5          | 4
# Failed     | 2          | 4
% Acceptance | 71         | 50 
```

这似乎是一个最佳情况，因为轴刚刚翻转，但对于我的生活，我找不到不破坏数据的解决方案。交叉表查询仅让我针对单个值过滤一个或多个类别。这是一个工会的用途吗？还是一个支点？需要转型吗？看起来应该是这么简单的问题。这是可以在 SQL 中完成的事情，还是需要 VBA 来安排“表格”？谢谢您的帮助！

这些链接似乎确实适用：

[MS Access 中的列到行](https://stackoverflow.com/questions/9183764/columns-to-rows-in-ms-access)

[如何将行转为列](https://stackoverflow.com/questions/2905968/how-to-pivot-rows-to-columns)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:03:57.500

这必须是一个两步转换的过程。首先，您必须将当前查询中的数据旋转为行而不是列，然后您必须将日期转换为列而不是行。

查询将是这样的：

```
TRANSFORM max(val) as MaxValue
SELECT col
FROM
(
  SELECT [Date], '# Insp' as Col, [# Insp] as  val 
  FROM yourQuery
  UNION ALL
  SELECT [Date], '# Passed' as Col, [# Passed] as val
  FROM yourQuery
  UNION ALL
  SELECT [Date], '# Failed' as Col, [# Failed] as val
  FROM yourQuery
  UNION ALL
  SELECT [Date], '% Acceptance' as Col, [% Acceptance] as val
  FROM yourQuery
) 
GROUP BY col
PIVOT [Date] 
```

我猜您当前的查询已保存在您的数据库中，您将`yourQuery`在我的示例中将 替换为您的查询名称。

我刚刚在 MS Access 2003 中使用您上面示例中的值对此进行了测试，它产生了您想要的结果。

# scala - 在 Hadoop 上计算偶数/奇数对的总和？

> ID：14164723
> 
> 赞同：2
> 
> 时间：2013-01-04T20:46:59.793
> 
> 标签：scala, hadoop, functional-programming, cascading, scalding

我想为 Hadoop 创建一个并行 scanLeft（计算关联运算符的前缀和）函数（特别是烫伤；请参阅下文了解如何完成）。

给定 hdfs 文件中的一系列数字（每行一个），我想用连续偶数/奇数对的总和计算一个新序列。例如：

输入序列：

0,1,2,3,4,5,6,7,8,9,10

输出顺序：

0+1、2+3、4+5、6+7、8+9、10

IE

1,5,9,13,17,10

我认为为了做到这一点，我需要为 Hadoop 编写一个 InputFormat 和 InputSplits 类，但我不知道该怎么做。

[请参见此处](http://dl.dropbox.com/u/29304719/Papers/lecture05%20%281%29.pdf)的第 3.3 节。以下是 Scala 中的示例算法：

```
 // for simplicity assume input length is a power of 2

def scanadd(input : IndexedSeq[Int]) : IndexedSeq[Int] =   
if (input.length == 1)
  input 
else { 
//calculate a new collapsed sequence which is the sum of sequential even/odd pairs 
val collapsed = IndexedSeq.tabulate(input.length/2)(i => input(2 * i) + input(2*i+1))

//recursively scan collapsed values
val scancollapse = scanadd(collapse)

//now we can use the scan of the collapsed seq to calculate the full sequence

val output = IndexedSeq.tabulate(input.length)(
i => i.evenOdd match {             

//if an index is even then we can just look into the collapsed sequence and get the value
// otherwise we can look just before it and add the value at the current index

   case Even => scancollapse(i/2) 
   case Odd => scancollapse((i-1)/2) + input(i)  
}

output
} 
```

我知道这可能需要进行一些优化才能与 Hadoop 很好地配合使用。我认为直接翻译这个会导致非常低效的 Hadoop 代码。例如，显然在 Hadoop 中你不能使用 IndexedSeq。我会很感激你看到的任何具体问题。不过，我认为它可能会很好地工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T01:30:22.843

多余。你是说这段代码吗？

```
val vv = (0 to 1000000).grouped(2).toVector
vv.par.foldLeft((0L, 0L, false))((a, v) => 
    if (a._3) (a._1, a._2 + v.sum, !a._3) else (a._1 + v.sum, a._2, !a._3)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T21:14:54.183

[这](http://developer.yahoo.com/hadoop/tutorial/module5.html)是我找到的关于编写 InputFormat 和 RecordReader 的最佳教程。我最终将整个拆分读取为一个 ArrayWritable 记录。

# linux - 使用 dir 结构 bash 脚本备份文件

> ID：14164724
> 
> 赞同：1
> 
> 时间：2013-01-04T20:47:11.870
> 
> 标签：linux, bash, find, backup

我正在制作一个 bash 脚本，它应该将所有文件和目录结构备份到另一个目录。我做了以下代码来做到这一点：

```
find . -type f -exec cp {} $HOME/$bdir \; -o -type d -exec mkdir -p {} $HOME/$bdir \; ; 
```

问题是，这仅复制文件而不是 dir 结构。

注意：我可能不会使用`cp -r`,`cp -R`或类似的东西，因为此代码是作业的一部分。

我希望有人能把我引向正确的方向。;)

乔里

编辑：

我将其更改为：

```
find . -type d -exec mkdir -p $HOME/$bdir/{} \; ;
find . -type f -exec cp {} $HOME/$bdir/{} \; ; 
```

它有效！泰家伙;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:22:38.610

这听起来像是[rsync](http://man.cx/rsync)的工作。

你提到这是一项任务。你有什么限制？您是否仅限于使用`find`？它必须是一个命令吗？

一种方法是在两次`find`调用中进行。第一次调用只查找目录。找到`mkdir`目录时，目标层次结构中的相应目录。第二个`find`调用将查找文件，并使用`cp`您当前拥有的命令。

您还可以获取每个文件名，手动转换路径，并将其与`cp`命令一起使用。以下是如何生成目标文件名的示例：

```
> find . -type f | sed -e "s|^\./|/new/dir/|"
/new/dir/file1.txt
/new/dir/file2.txt
/new/dir/dir1/file1_1.txt
/new/dir/dir1/file1_2.txt 
```

出于您的目的，您可以编写一个简短的 bash 脚本，将源文件作为输入，用于`sed`生成目标文件名，然后将这两个路径传递给`cp`. 该`dirname`命令将返回文件名的目录部分，因此`mkdir -p $(dirname $destination_path)`在您调用`cp`. 有了这样的脚本，您可以简单地`find`为找到的每个文件执行脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T17:56:55.233

```
cd olddir; tar c . | (cd newdir; tar xp) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T20:51:44.843

您可以先`find`使用**“-type d”**并执行**“mkdir -p”**，然后再找到复制文件而不是将其全部包含在一个命令中的结果吗？它可能也应该是**mkdir -p $HOME/$bdir/{}**。

# google-apps-script - 使用编程编辑触发 onEdit()

> ID：14164736
> 
> 赞同：1
> 
> 时间：2013-01-04T20:47:48.203
> 
> 标签：google-apps-script, google-sheets

我有一个脚本，它在编辑时从一张表中获取数据，并将最近添加的数据放入 ScriptDb。

当`onEdit()`我实际打开工作表并进行编辑时，触发器会成功触发。

但是，此工作表是通过脚本以编程方式编辑的。是否`onEdit()`能够根据脚本所做的编辑触发？我无法做到这一点。

使用触发器触发的脚本`onEdit()`是：

```
function sheetWasEdited(event) {
  var sheet = SpreadsheetApp.getActiveSheet();
  var lastRow = sheet.getLastRow();
  var lastRowValues = sheet.getRange(lastRow, 2, 1, 2).getValues()[0];
  CgcEmailDatabase.addEmail(now=lastRowValues[0].toString(), email=lastRowValues[1].toString());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:10:47.303

onEdit 触发器旨在在实际用户编辑电子表格时工作，如果最新的是同一项目的一部分，您描述的用例应该很容易通过`sheetWasEdited()`从另一个函数调用您的函数来实现。

如果更改是从另一个项目（另一个电子表格或 Web 应用程序）进行的，那么实施起来将变得相当困难。（让我们知道这是否是您的用例）

* * *

根据您的评论进行编辑：

这个想法是监视工作表的长度，将值保存在某处（例如在脚本属性中）并在添加了一行时调用您的函数。

这个小代码应该可以解决问题，您应该设置一个时间触发器以不时调用`lookatsheet()`一次，具体取决于您需要多快做出反应......我会说每小时或 30' 不应该太多，你决定.

```
function lookatsheet(){
  var ss = SpreadsheetApp.openById('xxxxxxxxxxxxxxxxxxxxx');// the ID of the SS you want to look at
  var sh = ss.getSheets()[0];// first sheet
  var lastrow = sh.getLastRow();
  var formertest = ScriptProperties.getProperty('lastTest');// recover the value from the last test (will need to get called once to initiate a valid value)
  if (formertest < lastrow){
    sheetWasEdited(lastrow);// call your function with lastRow as parameter
    ScriptProperties.setProperties({'lastTest': lastrow}, true);   // store for next time
}
}

function sheetWasEdited(row) {  // modified to work with the other function
  var sheet = SpreadsheetApp.openById('xxxxxxxxxxxxxxxxxxxxx').getSheets()[0]
  var lastRowValues = sheet.getRange(row, 2, 1, 2).getValues()[0];
  CgcEmailDatabase.addEmail(now=lastRowValues[0].toString(), email=lastRowValues[1].toString());
} 
```

**注意：** *在第一次运行时评论邮件调用以避免发送邮件可能很有用（只是为了启动脚本属性）*

# c# - 当代码部署在 windows server 2003 框中的 IIS 6.0 上时，LoadLibraryEx 在 c# 中返回 0

> ID：14164737
> 
> 赞同：0
> 
> 时间：2013-01-04T20:47:51.157
> 
> 标签：c#, iis, iis-7, iis-6

`LoadLibraryEx`在我的 web 服务代码部署在 windows server 2003 框上的 IIS 6.0 上后，我得到的返回值为“0”。我在 windows xp(local) 中有原始代码，它工作正常并且没有为此返回 0 `LoadLibraryEx`。我完全感到困惑，不知道为什么当它部署在 IIS 6.0 上时它现在返回零。

IntPtr 句柄 = LoadLibraryEx(dllFullPath, IntPtr.Zero, 0x00000008);

当我使用 Marshal.GetLastWin32Error() 时得到返回值 14001

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:14:22.787

那个错误是[`ERROR_SXS_CANT_GEN_ACTCTX`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681384.aspx#ERROR_SXS_CANT_GEN_ACTCTX)。

> 应用程序无法启动，因为它的并排配置不正确。请查看应用程序事件日志或使用命令行 sxstrace.exe 工具了解更多详细信息。

在您的场景中使用 sxstrace.exe 可能有点棘手。当然值得检查事件日志以查看它们是否包含线索。

我的猜测是问题框缺少适当的 MSVC 运行时。确保部署您尝试加载的 DLL 使用的 MSVC 运行时。在尝试调试问题之前，这是显而易见的第一件事。

# javascript - jquery在其他表行之间插入表行

> ID：14164738
> 
> 赞同：-3
> 
> 时间：2013-01-04T20:47:56.050
> 
> 标签：javascript, jquery, jquery-selectors

我有两张桌子：

```
<table width="200" id="table1" border=1 style="float:left;">
<tr><th>Subject</th><th>Hour</th></tr>
<tr class="head"><td colspan=2>MONDAY</td></tr>
<tr><td>English</td><td>3pm</td></tr>
<tr><td>Spanish</td><td>4pm</td></tr>
<tr class="head"><td colspan=2>TUESDAY</td></tr>
<tr><td>Italian</td><td>1pm</td></tr>
<tr><td>French</td><td>2pm</td></tr>
<tr class="head"><td colspan=2>WEDNESDAY</td></tr>
<tr><td>Japanese</td><td>10pm</td></tr>
</table>
<table width="200" id="table2" border=1 style="float:left;">
<tr><th>Users</th></tr>
<tr class="second"><td>User1</td></tr>
<tr class="second"><td>User2</td></tr>
<tr class="second"><td>User3</td></tr>
<tr class="second"><td>User4</td></tr>
<tr class="second"><td>User5</td></tr>
</table>​​​​​​​​​​​​​ 
```

我想要实现的是，对于表 1 中的每个头类，我想插入空白表行，以便表 2 中的用户将匹配正确的主题（不是日期名称），因此它将`User1`与`English`, `User1`->处于同一行`Spanish`。 .. 等等。

注意：如果你问为什么这些表看起来像这样，那是因为它们是从另一个页面动态加载的，我只能使用 jquery/javascript 将一些 id 属性设置为 td、tr 或表等。准备粘贴到[JSFiddle中的示例](http://jsfiddle.net/FQ9TQ/)

编辑：我想在表二中插入空白行，这样它们看起来都一样。这是我想要实现的结果的链接[LINK](http://jsfiddle.net/4pdCq/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:58:20.540

**[演示](http://jsfiddle.net/rcSh9/4/)**

我明白了，你有两张并排的桌子，右手一张需要有空隙来清除“头”行

```
// edited to cope with hidden trs in table 1
var emptytr=$('<tr><td>&nbsp;</td></tr>');
$('#table1 tr:visible').each(function(i){
    if ($(this).hasClass('head')){ 
        emptytr.clone().insertAfter('#table2 tr:eq('+(i-1)+')');
    }
});​ 
```

这不是显示表格结果的好方法，因为它们很容易错位。正确的方法是将两者结合起来，最好是在它们存在于浏览器之前。但是，您已经说过您不能在浏览器上执行此操作，因为它们是动态加载的，但就个人而言，我仍然坚持能够识别每个数据项属于哪一行并将整个事情变成一个表格。

# python - 我可以使用 Python 与射频发射器/控制器进行交互吗？

> ID：14164753
> 
> 赞同：0
> 
> 时间：2013-01-04T20:49:08.403
> 
> 标签：python, hardware

我想为我的车库建造一个射频发射器/控制器。当我的车辆在 25 英尺以内时，我希望计算机触发物理继电器来打开我的车库门。你知道，就像蝙蝠侠一样。

我喜欢 Python，所以我希望我可以在这里使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T21:32:21.130

查看树莓派。这是一台 25 美元的嵌入式计算机，不支持 Python。您将需要指定可以与板载硬件接口的 RF 收发器，并使用文档来确定控制方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T20:54:40.237

您是否考虑过获得基本的arduino？听起来你应该在 Radio Shack 买一个便宜的，然后让射频设备远程触发你的车库门开启器。使用硬件，您可以通过 python 轻松地与它交谈（尽管使用 Arduino 语言就很容易了）。

# java - 我无法使用 XPath 在我的 XFDL 文档中找到节点

> ID：14164754
> 
> 赞同：1
> 
> 时间：2013-01-04T20:49:10.477
> 
> 标签：java

我知道已经回答了类似的问题，但它们并不能完全解决我的具体问题：

```
public String getValue(String xPath) {
    XPath xpath = XPathFactory.newInstance().newXPath();
    xpath.setNamespaceContext(new PersonalNamespaceContext());
    String value = null;
    NodeList nodes = null;
    try {
        XPathExpression expr = xpath.compile(xPath);
        nodes = (NodeList) expr.evaluate(document, XPathConstants.NODESET);
        System.out.println("nodes: " + nodes.getLength());
    } catch (XPathExpressionException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    for (int idx = 0; idx < nodes.getLength(); idx++) {
        value = nodes.item(idx).getTextContent();
        System.out.println(value);
        //break;
    }
    return value;
} 
```

我需要能够获得“可见”文本节点的值。

```
 <itemlocation>
                    <x>0</x>
                    <y>0</y>
                 </itemlocation>
                 <visible>off</visible>
              </pane> 
```

我似乎找不到正确的 xPath 值来执行此操作。有人有想法吗？

# mysql - MySQL创建一对一关系

> ID：14164759
> 
> 赞同：3
> 
> 时间：2013-01-04T20:49:16.810
> 
> 标签：mysql, sql, database, database-design, relational-database

我正在创建一个数据库，这是我第一次与他们合作。

我有一个关于一对一通信的问题。我正在创建一个代表某项运动团队的表格。

我希望每支球队都只有一个比赛场地，每支球队都有自己的场地。

竞技场将有许多属性（名称、座位、票价等），所以我会为他们创建一个表，即使我已经读过创建一对一关系的最佳实践是将所有属性放在一个表中.

因为竞技场和团队是两个如此不同的概念，所以我会将它们分成两个表格，如下所示：

```
Club
--------------------
ClubID (PK)
ClubName
.
.
.
ArenaID (FK)

Arena
--------------------
ArenaID (PK)
ClubID (FK)
ArenaName
Seats
TicketPrice 
```

此外，我认为 ArenaID 不是 AutoIncremental，而是与 ClubID 相等，因为我会在创建俱乐部时自动创建 Arena。合理吗？

我想很好地理解这种类型的关系，因为它也将用于其他情况（例如，每支球队总会有一名具有他技能的助理教练）。

谢谢大家！

编辑：

@Kevin Bowersox 我只是在说明游戏将如何进行，感谢您的回答。

@Peter Gluck您应该将竞技场视为俱乐部的一个属性，但它有其他自己的属性，我想将它与俱乐部表分开以更好地组织数据库。如果一个俱乐部想要“建造”另一个竞技场，它只需改变实际竞技场的名称，它就可以改变座位数和票价。但是保存在数据库中的“对象”将保持不变。只有一些列将被更改。

@Branko Dimitrijevic 感谢您的详细回答。我想问你一些问题，以便更好地理解你所说的（我现在开始使用数据库）。在第一个示例中，您没有为两个表使用两个键，或者一个主键，另一个是外键，但您使用唯一的键，即同时主键和外键，这是正确的吗？这两种选择有什么区别？然后，你说如果我没有太多的团队，我把所有都放在一个桌子上会更好，但我希望我会有几万（或几十万）队。在这种情况下，这是一个足够大的数字来拆分表吗？我这样说是因为我在这个表中不仅仅是这个一对一的关系，所以如果我把所有这些一对一的关系放在同一个表中，它会非常非常大。

感谢大家的建议，现在我将尝试使用带有两个表和两个不同 ID 键的方法。但我将在其他表格中使用 ypercube 建议的方法！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T20:52:55.460

我喜欢拆分这些表的想法。它将使您的对象模型工作得更好。

但是，关于：

> 此外，我认为 ArenaID 不是 AutoIncremental，而是与 ClubID 相等，因为我会在创建俱乐部时自动创建 Arena。合理吗？

我会将 ArenaID 保留为它自己的自动整数。如果俱乐部更换场地会发生什么？这只是可能导致这些密钥不同步的一种情况。我有一种感觉，随着时间的推移，您将使用这种方法手动调整其中一些键。保持你的关系数据库，就是这样，RELATIONAL，不要依赖环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T01:01:16.913

在支持可延迟约束的 DBMS 上，可以使用循环外键实现真正的“1 对 1”：

```
CREATE TABLE Club (
    ClubId INT PRIMARY KEY
    -- Other fields...
);

CREATE TABLE Arena (
    ClubId INT PRIMARY KEY REFERENCES Club (ClubId)
    -- Other fields...
);

ALTER TABLE Club ADD FOREIGN KEY (ClubId)
    REFERENCES Arena (ClubId)
    DEFERRABLE INITIALLY DEFERRED; 
```

直到事务结束才强制执行FK `Club -> Arena`，因此您可以插入`Club`然后`Arena`不会遇到先有鸡还是先有蛋的问题。

* * *

不幸的是，您将无法在 MySQL 中实现真正的“1 对 1”关系，因为它不支持延迟约束，因此在插入新数据时您将无法解决先有鸡还是先有蛋的问题真正的“1 对 1”所必需的圆形 FK 的存在。

您甚至无法真正依赖您提出的解决方案，因为 MySQL 不强制执行 CHECK 约束，因此您无法强制执行 and 之间的相等`ClubId`性`ArenaId`。可能您能做的最好的事情就是依靠您的应用程序逻辑来执行它，从而使您面临潜在的错误。

使用备用键（即 UNIQUE 约束）也无济于事，因为：

```
CREATE TABLE Club (
    ClubId INT PRIMARY KEY,
    ArenaId INT UNIQUE
    -- Other fields...
);

CREATE TABLE Arena (
    ArenaId INT PRIMARY KEY,
    ClubId INT NOT NULL UNIQUE REFERENCES Club (ClubId)
    -- Other fields...
);

ALTER TABLE Club ADD FOREIGN KEY (ArenaId)
    REFERENCES Arena (ArenaId);

INSERT INTO Club (ClubId) VALUES (1);
INSERT INTO Club (ClubId) VALUES (2);
INSERT INTO Club (ClubId) VALUES (3);

INSERT INTO Arena (ArenaId, ClubId) VALUES (1, 2);
INSERT INTO Arena (ArenaId, ClubId) VALUES (2, 3);
INSERT INTO Arena (ArenaId, ClubId) VALUES (3, 1);

UPDATE Club SET ArenaId = 2 WHERE ClubId = 1;
UPDATE Club SET ArenaId = 3 WHERE ClubId = 2;
UPDATE Club SET ArenaId = 1 WHERE ClubId = 3; 
```

现在您有一个`ClubId = 1`指向一个竞技场 ( `ArenaId = 2`) 的俱乐部 ( ) 指向另一个俱乐部 ( `ClubId = 3`)！ETC...

即使它有效，聚集表中的二级索引也可能很昂贵，并且[所有 InnoDB 表都是聚集的](http://www.ovaistariq.net/521/understanding-innodb-clustered-indexes/)。

* * *

您提出的“垂直分区”通常是为了更好地利用缓存，当查询的字段子集比另一个多得多并且行数很大时。即使您有这种特殊的查询模式，我怀疑您是否有足够的团队来解决缓存问题。你真的应该重新考虑，把所有东西都放在一张桌子上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T20:55:17.193

你似乎很好地理解了这些概念。您确实在寻找适当的考虑因素来推动您的决定。只需确保您所做的假设是正确的，并且将保持正确..（即，永远不会允许担任 B 队助理教练的个人成为另一支球队的助理教练吗？如果这些问题的答案是总是是的，对于所有关系，它们确实可以一对一地建模，（实际上，您可以将它们全部作为单个团队表的属性而不会丢失功能），但要小心，很少有假设就像这实际上是真实的，并且随着应用程序和数据模型的发展注定会随着时间的推移保持真实......

假设这确实是一对一的，那么我考虑将它们分成单独的表的唯一原因是为了提高性能。假设一组（较小的）属性每秒被访问数百次，而大部分属性相当稳定并且访问频率要低得多。然后，您可以将更频繁访问的属性放在一个更小更窄的表中，以获得更好的读写性能。纯粹为了逻辑或组织美学而分离属性不是我会做的事情......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T01:35:17.940

你说（在评论中）：*“一个团队不能改变竞技场，因为它可以改变它的竞技场的名称和维度，所以会有永远的一对一关系。”*

永远不要说**永远**或**永远**。需求变化。

我同意@Peter Gluck 的评论，即**“本质上不同的对象应该有自己的键，无论它们的关系如何”**

根据前两个观察，我会为所有三个对象/实体保留单独的表`Club`：`Arena`和`ClubPlaysInArena`。您（当前）对俱乐部和竞技场之间 1-1 关系的限制将受到两个`Unique`限制条件的保留，如果要求发生变化，可以取消这些限制条件。设计中无需进一步更改：

```
Club
--------------------
ClubID (PK)
ClubName
.
.

Arena
--------------------
ArenaID (PK)
ArenaName
Seats
.
.

ClubPlaysInArena
--------------------
ClubID  (PK, UQ1, FK1)
ArenaID (PK, UQ2, FK2)
.
. 
```

奖励点：您可以在数据库中存储没有关联俱乐部的新建竞技场（以及没有竞技场的俱乐部）。

# entity-framework - 生成的 DbContext 只有空的构造函数

> ID：14164762
> 
> 赞同：2
> 
> 时间：2013-01-04T20:49:27.203
> 
> 标签：entity-framework, visual-studio-2012, entity-framework-5

我刚刚开始使用 VS2012 和 EF5，并且正在编写一个需要能够连接到具有相同架构的各种数据库之一的应用程序。MSDN 显示了一个将连接字符串作为参数的 DbContext 构造函数，但由于某种原因，我生成的上下文仅包含空构造函数。

如果我手动将构造函数添加到生成的类中，那么它可以正常工作，但我不想在更新我的模型后每次都这样做。

以前有人遇到过这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T23:13:27.307

您可以为派生的 DbContext 类添加一个部分类，您可以在其中添加带有参数的 ctor。这样您就不必在每次重新生成代码时重新添加 ctor。

# widget - 最近的帖子 wordpress 小部件，文本有限和“阅读更多”链接

> ID：14164767
> 
> 赞同：3
> 
> 时间：2013-01-04T20:49:32.500
> 
> 标签：widget, wordpress

我正在为练习创建一个 Wordpress 最近的帖子小部件。但是，我遇到了一些我不知道该怎么做的事情。首先，小部件必须显示帖子的日期和时间、帖子标题、带有智能截断字符限制的文本和阅读更多链接。它还必须允许管理员指定标题、类别、要显示的帖子数、要在帖子上显示的字符数，最后更改“阅读更多”链接的措辞。

我已经创建了小部件并弄清楚了如何做所有事情，但将类别选择设置为下拉选择，其中已经存在类别（现在它只是管理员的一个文本块，您可以在其中键入要显示的类别） ，如何在`the_excerpt`制作时限制字符，以便在单词末尾巧妙地切断并允许管理员指定如何允许我的字符，以及如何创建阅读更多链接，同时允许管理员指定它所说的内容。

我将在下面发布到目前为止的代码以及指向包含侧栏中小部件的站点的链接。我是 Wordpress Widget 设计的新手，因此将不胜感激。

```
<?php
/*
Plugin Name: News Recent Posts Widget
Plugin URI: 
Description: A recent post widget with extra functions for client management
Author: Kevin Ullyott
Version: 1.0
Author URI: http://modmacro.com/
*/

class recentpost extends WP_Widget {

    public function __construct() {
    parent::WP_Widget(
    // or parent::__construct(
        false, 
        'Kevin - Recent Posts Widget',
        array(
            'description' => __('A recent post widget with extra functions for client management') 

        )
    );
    ;
}

    public function widget( $args, $instance ) {

        extract( $args );

        $headline = $instance['headline'];
        $category = $instance['category'];
        $numberposts = $instance['numberposts'];
        $readmore = $instance['readmore'];

        echo $before_widget;

        echo $before_title;

        echo "<p class=\"headline\">$headline</p>";

        echo $after_title;

        $args = array( 'numberposts' => $numberposts, 'category_name' => $category );
        $recent_posts = wp_get_recent_posts( $args );
        foreach( $recent_posts as $recent ){
        setup_postdata(get_post($recent['ID']));
        echo '<a href="' . get_permalink() . '" title=" '.esc_attr(get_the_title()).'" >' .   get_the_title().'</a> ';
        echo get_the_time('F j, Y', $recent['ID']);
        the_excerpt();
}
wp_reset_postdata();

        echo $after_widget;

    }

    public function update( $new_instance, $old_instance ) {
        $instance = array();
        $instance['headline'] = ( $new_instance['headline'] );
        $instance['category'] = ( $new_instance['category'] );
        $instance['numberposts'] = ( $new_instance['numberposts'] );
        $instance['readmore'] = ( $new_instance['readmore'] );
        return $instance;
    }

    public function form( $instance ) {

        $headline = $instance[ 'headline' ];
        $category = $instance[ 'category' ];
        $numberposts = $instance[ 'numberposts' ];
        $readmore = $instance[ 'readmore' ];

        ?>

<p>
  <label for="<?php echo $this->get_field_id( 'headline' ); ?>">
    <?php _e( 'Headline:' ); ?>
  </label>
  <input class="widefat" id="<?php echo $this->get_field_id( 'headline' ); ?>" name="<?php echo $this->get_field_name( 'headline' ); ?>" type="text" value="<?php echo esc_attr( $headline ); ?>" />
</p>
<label for="<?php echo $this->get_field_id( 'category' ); ?>">
  <?php _e( 'Category:' ); ?>
</label>
<input class="widefat" id="<?php echo $this->get_field_id( 'category' ); ?>" name="<?php echo $this->get_field_name( 'category' ); ?>" type="text" value="<?php echo esc_attr( $category ); ?>" />
</p>
<label for="<?php echo $this->get_field_id( 'numberposts' ); ?>">
  <?php _e( 'Number of posts:' ); ?>
</label>
<input class="widefat" id="<?php echo $this->get_field_id( 'numberposts' ); ?>" name="<?php echo $this->get_field_name( 'numberposts' ); ?>" type="text" value="<?php echo esc_attr( $numberposts ); ?>" />
</p>
<label for="<?php echo $this->get_field_id( 'readmore' ); ?>">
  <?php _e( 'Read More:' ); ?>
</label>
<input class="widefat" id="<?php echo $this->get_field_id( 'readmore' ); ?>" name="<?php echo $this->get_field_name( 'readmore' ); ?>" type="text" value="<?php echo esc_attr( $readmore ); ?>" />
</p>
<?php 
    }
}

add_action( 'widgets_init', create_function('', 'return register_widget("recentpost");') );

?> 
```

[http://www.modmacro.us/wpsandbox/](http://www.modmacro.us/wpsandbox/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:11:49.467

这个问题很多。我认为您将其作为练习来解决这个问题很棒。这正是我学到的。我可以帮助一些部分。

## 类别

在表单功能中，首先您需要使用 WordPress 的[`get_categories`](http://codex.wordpress.org/Function_Reference/get_categories)功能获取所有类别的列表。

```
$categories = get_categories(array('type'=>'post','orderby'=> 'name','order'=> 'ASC')); 
```

然后，要在表单中显示下拉菜单，您可以使用 for 循环遍历每个类别。

```
echo '<select name="' . $this->get_field_name('category') . '" id="' . $this->get_field_id('category') . '">';
  foreach($categories as $category):
    echo '  <option value="' . $category->slug .'" '. selected($category->slug, $instance['category'], false) . '>' . $category->name . '</option>';        
  endforeach;
echo '</select>'; 
```

## 显示帖子日期/时间等

我认为最好使用 WP_Query 类，它更灵活，并且似乎是这些天的首选路线。在您的小部件功能中，它看起来像这样

```
$args = array( 'numberposts' => $numberposts, 'category_name' => $category );

$myquery = new WP_Query($args);

while($myquery->have_posts()): $myquery->the_post();

  echo '<a href="' . get_permalink() . '" title=" '.esc_attr(get_the_title()).'" >' .   get_the_title().'</a> ';
  echo get_the_time('F j, Y', $myquery->ID);
  the_excerpt();

endwhile;
wp_reset_query();
wp_reset_postdata(); 
```

## 限制摘录

但是，这将适用于您主题中摘录的所有用途。

```
function new_excerpt_length($length) {
    return 20;
}
add_filter('excerpt_length', 'new_excerpt_length'); 
```

# android - 在 Android 浏览器中播放 wav 文件

> ID：14164768
> 
> 赞同：0
> 
> 时间：2013-01-04T20:49:43.140
> 
> 标签：android, android-browser

使用 html 5 音频标签似乎可以通过 android 浏览器播放 mp3。是否可以使用wav文件来做到这一点？如果不通过音频标签，还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:34:47.080

android 2.2 版的原生浏览器支持“.wav”文件。但android 4.0 的原生浏览器不支持“.wav”文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T21:05:36.270

The HTML5 `<audio>` tag supports WAV files. Depending on your version of Android, though, it might not work in the native browser. For example, [no format worked in Android 2.2.](http://www.brianhadaway.com/html5-audio-support-on-android-devices/) I tried it on my own phone, the Galaxy Nexus with Jelly Bean using the excellent test on [Are We Playing Yet?](http://www.areweplayingyet.org), and found that [it was not supported.](http://i.imgur.com/6ZA1z.png)

The other way to do it is to transcode your WAV file to a different format and use HTML5 audio. The Flash based [WavPlayer](https://github.com/francois2metz/WavPlayer) might work too, but please remember that Flash was discontinued for Android and is not guaranteed to be installed on all devices.

# .htaccess - 合并两个 .htaccess 重写文件

> ID：14164772
> 
> 赞同：1
> 
> 时间：2013-01-04T20:49:55.220
> 
> 标签：.htaccess, rewrite

我有两个不同的 .htaccess 文件，每个文件都做不同的事情，当我将它们组合在一起时，它们将无法一起工作。

第一个允许我输入 www.mydoman.com/test 并表示 www.mydomain.com/index.php?page=test

```
RewriteRule    ^([A-Za-z0-9-_]+)/?$  index.php?subclass=$1 [NC,L]
RewriteRule    ^.* index.php [NC,L] 
```

第二个文件切断了 .html 和 .php 文件的扩展名，因此可以使用 www.mydomain.com/about 插入 www.mydoman.com/about.php

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On

RewriteBase /cl_clone

## hide .php extension
# To externally redirect /dir/foo.php to /dir/foo
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1 [R,L,NC]

## To internally redirect /dir/foo to /dir/foo.php
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^ %{REQUEST_URI}.php [L]

# e.g. example.com/foo will display the contents of example.com/foo.html
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.+)$ $1.html [L,QSA] 
```

有没有办法让这两者在一个 .htaccess 文件中一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T23:02:18.240

您在顶部有一个重定向规则，然后有 2 组规则将 php 或 html 扩展名添加到请求的末尾（如果存在这样的文件）。然后您的其他规则为 index.php 进行路由。

有些事情你需要解决。在这两种情况下，您的重写基础`/cl_clone`似乎根本不起作用，因为您的 URL`cl_clone`在请求中没有（例如，它们只是`www.mydomain.com/about`，没有 cl_clone）。

所以你可能想删除它。

否则，您可以简单地将`index.php`路由规则添加到您拥有的其他规则的最底部。您可能需要添加额外的调整，也许：

```
RewriteRule    ^([A-Za-z0-9-_]+)/?$  index.php?subclass=$1 [NC,L]
RewriteCond %{REQUEST_URI} !index.php
RewriteRule    ^.* index.php [NC,L] 
```

或者改变你`RewriteBase /cl_clone`的`RewriteBase /`

# html - 使用 rgba 作为背景图像

> ID：14164777
> 
> 赞同：0
> 
> 时间：2013-01-04T20:50:07.403
> 
> 标签：html, css

> **可能重复：**
> [来自不透明图像的半透明背景](https://stackoverflow.com/questions/6364461/translucent-background-from-opaque-image)

我想使用 rgba 但我没有纯色背景，因为我使用的是图像。是否可以将图像不透明度设置为部分模糊，然后在内部包含一个 100% 不透明度的 div 而没有任何继承。

```
#container2 {

position: absolute;
margin-top: 0px;
    height: 600px;
margin-top: 50px;
margin-left: 0px;
margin-right: 50px;
    width: 1000px;
background-image:url(../images/container2_yellow_nailed.png);
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:52:23.303

目前 CSS 不支持控制背景图片的不透明度。

您可以通过使用具有相同尺寸、`opacity`指定并位于您的元素下方的额外元素来实现类似的效果。

# caching - 企业库缓存对象大小

> ID：14164778
> 
> 赞同：0
> 
> 时间：2013-01-04T20:50:09.583
> 
> 标签：caching, memcached, enterprise-library

我已经使用 Perfmon 设置了企业库缓存计数器。但是我只能看到缓存中的条目数。

如果有办法找出缓存对象的大小以便我可以为要缓存和删除的最大项目数等指定正确的值，有人可以帮助我吗？

此外，Missed Caches 的真正含义是什么，尽管我的 Web 应用程序按预期工作，但我看到大量的未命中。我需要担心这个计数器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T03:26:34.740

企业库缓存不提供缓存大小或缓存中对象的大小。

有多种方法可以找到可用于尝试调整缓存大小的对象大小。看：

*   [找出 .net 对象的大小](https://stackoverflow.com/questions/324053/find-out-the-size-of-a-net-object)
*   [如何获取内存中的对象大小？](https://stackoverflow.com/questions/605621/how-to-get-object-size-in-memory)

缓存未命中是指尝试从缓存中检索项目但在缓存中找不到键。通常，当这种情况发生时，您会将项目添加到缓存中。这通常不会令人担忧，因为对于没有后备存储的缓存，它一开始会是空的，因此最初您会看到缓存未命中，但随着缓存的加载，未命中应该会减少（当然，除非项目过期并从缓存中删除）。

# delphi - 使用 FPC 编写 Scheme 解释器：递归数据结构

> ID：14164783
> 
> 赞同：3
> 
> 时间：2013-01-04T20:50:29.687
> 
> 标签：delphi, scheme, pascal, freepascal, sicp

本质上，这是一个关于 Pascal (FPC) 中递归数据结构的问题。因为我想实现一个像 SICP 第 4 章中所示的 Scheme 解释器，所以这个问题也可能与 Schemers 有关。:)

S 表达式应表示为标记数据。到目前为止，我已经构建了一个变体记录，它表示数字和对。希望代码可读且不言自明：

```
program scheme;

type
   TTag = (ScmFixnum, ScmPair);
   PScmObject = ^TScmObject;
   TScmObject = record
      case ScmObjectTag: TTag of
         ScmFixnum: (ScmObjectFixnum: integer);
         ScmPair: (ScmObjectCar, ScmObjectCdr: PScmObject);
      end;

var
   Test1: TScmObject;
   Test2: TScmObject;
   Test3: TScmObject;

function MakeFixnum(x: integer): TScmObject;
var
   fixnum: TScmObject;
begin
   fixnum.ScmObjectTag := ScmFixnum;
   fixnum.ScmObjectFixnum := x;
   MakeFixnum := fixnum;
end;

function MakePair(car, cdr: PScmObject): TScmObject;
var
   pair: TScmObject;
begin
   pair.ScmObjectTag := ScmPair;
   pair.ScmObjectCar := car;
   pair.ScmObjectCdr := cdr;
   MakePair := pair;
end;

begin
   Test1 := MakeFixnum(7);
   writeln('Test1, Tag: ', Test1.ScmObjectTag,
           ', Content: ', Test1.ScmObjectFixnum);
   Test2 := MakeFixnum(9);
   writeln('Test2, Tag: ', Test2.ScmObjectTag,
           ', Content: ', Test2.ScmObjectFixnum);
   Test3 := MakePair(Test1, Test2);
end. 
```

但是，编译代码会产生如下错误：

```
$ fpc scheme.pas
(...)
Compiling scheme.pas
scheme.pas(43,34) Error: Incompatible type for arg no. 2: Got "TScmObject", expected "PScmObject"
scheme.pas(45) Fatal: There were 1 errors compiling module, stopping
Fatal: Compilation aborted 
```

很明显，函数中存在错误`MakePair`。但我还不明白我到底做错了什么。任何帮助表示赞赏。:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T21:03:18.050

`MakePair`函数定义如下：

```
function MakePair(car, cdr: PScmObject): TScmObject; 
```

请注意，它接收两个类型的指针`PScmObject`。然后你这样称呼它：

```
MakePair(Test1, Test2); 
```

但是`Test1`和`Test2`属于 类型`TScmObject`。所以传递的实际参数是不兼容的，就像编译器说的那样。

您需要将指针传递给这些记录：

```
MakePair(@Test1, @Test2); 
```

* * *

从长远来看，您需要注意这些记录的生命周期。您需要在堆上分配并且没有垃圾收集我怀疑您将进入一个痛苦的世界，试图跟踪谁拥有这些记录。也许您可以考虑使用接口引用计数来管理生命周期。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T21:04:06.043

该过程需要一个指向记录的指针，而不是记录本身。

您可以在调用点使用*@* (at) 运算符动态创建指向记录的指针*，*从而满足编译器类型检查：

```
begin
   Test1 := MakeFixnum(7);
   writeln('Test1, Tag: ', Test1.ScmObjectTag,
           ', Content: ', Test1.ScmObjectFixnum);
   Test2 := MakeFixnum(9);
   writeln('Test2, Tag: ', Test2.ScmObjectTag,
           ', Content: ', Test2.ScmObjectFixnum);
   Test3 := MakePair(@Test1, @Test2);
end. 
```

# mysql - MySQL：在列列表中使用 GROUP BY vs subselect

> ID：14164784
> 
> 赞同：4
> 
> 时间：2013-01-04T20:50:37.517
> 
> 标签：mysql, subquery

在我的应用程序中，我有两个 MySQL 表，'units' 和 'impressions' 是一对多的关系。我需要从单位表中获取所有广告单元的列表，还需要获取每个广告单元的展示次数。

我有两个 SELECT 查询来执行此任务（本示例已简化），首先使用子选择：

```
SELECT 
    (SELECT COUNT(*) FROM impressions WHERE impression_unit_id = unit_id) AS impressions_count,
    unit_id
FROM units; 
```

第二次使用 GROUP BY：

```
SELECT
    COUNT(impression_id) AS impressions_count,
    unit_id
FROM units
LEFT JOIN impressions ON impression_unit_id = unit_id
GROUP BY unit_id; 
```

为每条记录（广告单元）运行子选择查询，因此 GROUP BY 看起来更智能，但它多了一个 JOIN。性能更喜欢哪一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T20:56:34.907

查询将`GROUP BY`执行得更好。查询优化器可能会优化第一个查询以使用连接，但我不会指望它，因为它是为使用依赖子查询而编写的，这会慢得多。只要表被正确索引，`JOIN`s 不应该是性能的主要问题。

第一个查询，如果它没有得到优化以使用 a ，`JOIN`则必须为单元表中的每一行运行子查询，其中`JOIN`查询在一个操作中完成所有操作。

要了解查询是如何优化的，请运行`EXPLAIN`两个查询中的一个。如果第一个使用依赖子查询，它会更慢。

# apache - htaccess 友好的 url 尝试打开 index.php 而不是参数

> ID：14164786
> 
> 赞同：0
> 
> 时间：2013-01-04T20:50:42.330
> 
> 标签：apache, .htaccess, mod-rewrite

```
Options +FollowSymLinks
RewriteEngine On
RewriteRule ^portfolio/(.*)/?$ ./portfolio.php?project=$1 [QSA,L] 
```

因此，当我尝试打开例如：`mywebsite.com/portfolio/my-project`时，它必须转到`mywebsite.com/portfolio.php?project=my-project`。

但是相反，我的 url 更改为`mywebsite.com/portfolio/index.php`，它显然无法打开，因为该页面不存在。为什么要这样做？

有什么建议么？

编辑：`if (isset($_GET['project'])) { ... } else header('Location: index.php')`在我的`portfolio.php`页面顶部，**导致了这个**。所以似乎我的项目不会通过`$_GET['project']`请求传递到页面？

**固定**：显然，我`-MultiViews`需要`Options +FollowSymlinks -MultiViews`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:45:02.827

禁用多视图

```
Options -MultiViews 
```

# domain-driven-design - DDD - 失效的过期

> ID：14164790
> 
> 赞同：0
> 
> 时间：2013-01-04T20:51:38.500
> 
> 标签：domain-driven-design

目前正在研究 DDD，我已经阅读了 Eric Evans 的大部分蓝皮书。到目前为止很有趣:)

我一直在对一些聚合进行建模，它们包含一组过期的实体。我想出了一种通用的表达方法：

```
public class Expirable<T>
{
    public T Value { get; protected set; }
    public DateTime ValidTill { get; protected set; }

    public Expirable(T value, DateTime validTill)
    {
        Value = value;
        ValidTill = validTill;
    }
} 
```

我很好奇最好的方法是使 Expirable 无效（在一组工作时将其无效或省略）。到目前为止，我一直在考虑在 Repository 构造函数中执行此操作，因为这是您从中访问聚合并充当“集合”的地方。

我很好奇是否有人提出了解决此问题的解决方案，我很高兴听到它:) 其他方法也非常受欢迎。

**2013 年 10 月 1 日更新：**

这不是 Greg Young 的 CQRS/ES 方法的 DDD。但是 Evans 的方法，因为我刚开始接触这本书和第一个应用程序。就像 Greg Young 说的，如果你要制作好桌子，你必须先制作几张；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:15:09.347

可能有多种方法可以解决这个问题，但我个人会使用规范模式来解决这个问题。假设对象过期是属于域的业务规则，除了您编写的类之外，我还会有一个规范。这是一个例子：

```
public class NotExpiredSpecification
{
    public bool IsSatisfiedBy(Expirable<T> expirableValue)
    {
        //Return true if not expired; otherwise, false.
    }
} 
```

然后，当您的存储库返回聚合列表或对集合执行任何业务操作时，这可用于将集合限制为未过期的值，这将使您的代码具有表现力并将业务逻辑保持在域内。

要了解有关规范模式的更多信息，请参阅[本文](http://martinfowler.com/apsupp/spec.pdf)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T19:52:32.300

我在我的抽象存储库中添加了一个方法`InvalidateExpirable`。一个例子是`UserRepository`我在活动用户会话中删除的地方，如下所示：`InvalidateExpirable(x => x.Sessions, (user, expiredSession) => user.RemoveSession(expiredSession));`.

的签名 `InvalidateExpirable`看起来像这样：`protected void InvalidateExpirable<TExpirableValue>(Expression<Func<T, IEnumerable<Expirable<TExpirableValue>>>> selector, Action<T, Expirable<TExpirableValue>> remover)`. 该方法本身使用反射从选择器参数中提取选定的属性。该属性名称粘在通用 HQL 查询中，该查询将遍历调用 remove lambda 的集合。`user.RemoveSession`将从聚合中删除会话。通过这种方式，我让聚合对其自己的数据负责。同样在`RemoveSession`域中为将来的情况提出事件。

示例见：[https ://gist.github.com/4484261](https://gist.github.com/4484261)

到目前为止工作得很好，不过我必须看看它在应用程序中是如何工作的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T22:30:26.540

一直在阅读使用 CQRS/ES（Greg Young 方法）的 DDD，并在 MSDN 网站上找到了一个关于 CQRS/ES 的好例子：http: [//msdn.microsoft.com/en-us/library/jj554200.aspx](http://msdn.microsoft.com/en-us/library/jj554200.aspx)

在此示例中，他们使用命令消息队列在将来对 Expire 消息进行排队，这将在指定时间调用 Aggregate 从聚合中删除/停用可过期构造。

# php - 删除 URL 参数以重置 PHP 变量？

> ID：14164791
> 
> 赞同：0
> 
> 时间：2013-01-04T20:51:41.333
> 
> 标签：php, url, session

我有一个个人网站，我想在其中展示我所做的一些下载。每个下载都有一个描述和下载链接，但是我不想为每个项目创建一个单独的页面（如“item1.php”、“item2.php”等），因为格式几乎是“标准的。 " 因此，我将所有文本放在一个 XML 文件中，然后使用 PHP 对其进行解析。

这是我的 XML 的样子：

```
<txtdb>
  <txt name="index">
    <str key="title">Index</key>
    <str key="metadescription">Personal site</key>

    <str key="navigation">Navigation</key>

    <str key="description"><!CDATA[[<h2>Description</h2>]]></key>
    <str key="download"><!CDATA[[<h2>Download</h2>]]></key>
  </txt>
  <txt name="item1">
    <str key="title">Item 1</key>
    <str key="metadescription">Item 1 is awesome, get it now!</key>

    <str key="description"><!CDATA[[<p>Item 1 is an incredible item that you must get right away!</p>]]></key>
    <str key="download"><!CDATA[[<a href="http://dropbox.com">Here</a>]]></key>
  </txt>
  <!-- ... -->
</txtdb> 
```

这是我的 index.php：

```
<?php
$current = 'index';

class TextDatabase()
{
  private $_xdb;
  private $_name;

  public function __construct($xdt)
  {
    $this->_xdb = simplexml_load_file('./incl/txt.xml');
    $this->_name = $xdt;
  }

  public function getString($key, $name = null)
  {
    if (empty($name))
    {
      $name = $this->_name;
    }
    $str = $this->_xdb->xpath(sprintf("//txt[@name='%s']/str[@key='%s']", $name, $key));
    return empty($str[0]) ? null : (string) html_entity_decode($str[0]);
  }
}

session_start();
if (isSet($_GET['name']))
{
  $current = $_GET['name'];
  $_SESSION['name'] = $current;
}
else if (isSet($_SESSION['name']))
{
  $current = $_SESSION['name'];
}
else
{
  $current = 'index';
}

$TxtDb = new TextDatabase($current);

include_once('incl/header.php');
include_once('incl/sidebar.left.php');

if ($current == 'index'):?>
<h2><?php echo $TxtDb->getString('navigation'); ?></h2>
<ul>
  <li><a href="index.php?name=item1"><?php echo $TxtDb->getString('title','item1'); ?></a></li>
  <li><a href="index.php?name=item2"><?php echo $TxtDb->getString('title','item2'); ?></a></li>
  <!-- more items -->
</ul>
<?php else: ?>
<h2><?php echo $TxtDb->getString('description','index'); ?></h2>
<article><?php echo $TxtDb->getString('description'); ?></article>
<h2><?php echo $TxtDb->getString('download','index'); ?></h2>
<article><?php echo $TxtDb->getString('download'); ?></article>
<?php endif;

include_once('incl/sidebar.right.php');
include_once('incl/footer.php');
?> 
```

目前，它有效。如果我转到“index.php”，我会看到我的项目列表。然后，当我单击其中一个时，我将被发送到 'index.php?name=item *n* '。但是，我在标题中有一个指向“index.php”的链接，当我单击它时，页面会重新加载，但我没有回到索引。为了返回索引，我必须将链接更改为指向“index.php?name=index”，但我不喜欢这样。有没有办法让“index.php”（不带参数）返回索引而不是当前项目（我相信它存储在 PHP 会话中）？

这是我第一次使用 PHP（我更喜欢 C#），如果这是一个愚蠢的问题，很抱歉。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:09:26.297

我认为这个问题会导致关于您的架构的多个子问题。例如，您为什么要在会话中存储名称参数？这样做的意义通常是在多个请求之间传输数据，而不必每次都再次提交。

据我了解，如果不作为参数提交，您希望*名称*不存在。另一方面，您的代码通过实现从会话中获取缺少的参数的回退来准确地捕捉到这种情况。

因此，我建议像这样更改 index.php：

```
...
session_start();
if (isSet($_GET['name']))
{
  $current = $_GET['name'];
}
else
{
  $current = 'index';
}
... 
```

顺便提一句。`unset($_SESSION['name'])`从会话中删除项目可能会变得很方便，但如果根本不需要会话存储，我建议重新考虑 index.php 逻辑，而不是让它变得更复杂。;-)

# c# - 为什么我不能使用 BindingList 作为采用 BindingList 的方法的参数 ?

> ID：14164796
> 
> 赞同：2
> 
> 时间：2013-01-04T20:52:04.213
> 
> 标签：c#, .net, inheritance, ienumerable, bindinglist

基本上我有一个具有以下签名的方法：

```
public void Save(BindingList<T> items); 
```

我正在尝试使用它来调用它

```
classInstance.Save(items); //items = BindingList<ObjectInheritedFromT> 
```

但似乎 C# 没有意识到继承会引发编译时错误，其中所有编写的代码`T`也将完全正常运行`ObjectInheritedFromT`，不是吗？

有解决办法吗？我意识到如果它是有效的`IEnumerable`，但是（奇怪的是）它`BindingList<>`没有实现 IEnumerable，我需要执行诸如`Remove`和之类的操作`Add`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T20:55:35.450

因为`BindingList<T>`没有声明为`BindingList<out T>`- 它不支持协方差

读一读：

[协变和逆变常见问题解答](http://blogs.msdn.com/b/csharpfaq/archive/2010/02/16/covariance-and-contravariance-faq.aspx)

# c# - C# XNA 覆盖错误？

> ID：14164798
> 
> 赞同：0
> 
> 时间：2013-01-04T20:52:25.750
> 
> 标签：c#, xna

我收到一个错误，

> “错误 1 ​​'GameStateManagement.GameplayScreen.Draw(Microsoft.Xna.Framework.GameTime, GameStateManagement.InputState)'：找不到合适的方法来覆盖”

我不知道出了什么问题。我是编程新手，并从我的大学课程中获得了一些代码。其余的我自己做。我很茫然，我该如何解决这个问题？

### 代码

```
 /// Draws the gameplay screen.
        /// </summary>
        public override void Draw(GameTime gameTime, InputState input)
        {
            // This game has a blue background. Why? Because! Not anymore, haha!

            var colorMatch = new Dictionary<int, Color>();
            colorMatch.Add(1, Color.LightBlue);
            colorMatch.Add(2, Color.CornflowerBlue);
            colorMatch.Add(3, Color.Blue);
            colorMatch.Add(4, Color.White);
            colorMatch.Add(5, Color.LightGreen);
            colorMatch.Add(6, Color.Green);
            colorMatch.Add(7, Color.Purple);
            colorMatch.Add(8, Color.Chocolate);
            colorMatch.Add(9, Color.Crimson);
            colorMatch.Add(10, Color.IndianRed);

            ScreenManager.GraphicsDevice.Clear(ClearOptions.Target,
                                               colorMatch[munchieSpeed], 0, 0);

            spriteBatch.Begin();

            // Draw munchies

            int playerIndex = (int)ControllingPlayer.Value;

            KeyboardState keyboardState = input.CurrentKeyboardStates[playerIndex];
            GamePadState gamePadState = input.CurrentGamePadStates[playerIndex];

            for (int i = 0; i < noOfMunchies; i++)
            {
                if (munchieAnimationCount[i] == 0)
                {
                    // Draw frame 1
                    if ((gamePadState.DPad.Right == ButtonState.Pressed) ||
                   (keyboardState.IsKeyDown(Keys.Right)))
                    {
                        spriteBatch.Draw(right, munchiePos[i], Color.White);
                    }
                    if ((gamePadState.DPad.Left == ButtonState.Pressed ||
                        (keyboardState.IsKeyDown(Keys.Left))))
                    {
                        spriteBatch.Draw(left, munchiePos[i], Color.White);
                    }
                    else if ((gamePadState.DPad.Up == ButtonState.Pressed ||
                        (keyboardState.IsKeyDown(Keys.Up))))
                    {
                        spriteBatch.Draw(up, munchiePos[i], Color.White);
                    }

                    else if ((gamePadState.DPad.Down == ButtonState.Pressed ||
                        (keyboardState.IsKeyDown(Keys.Down))))
                    {
                        spriteBatch.Draw(down, munchiePos[i], Color.White);
                    }
                }
                else
                {
                    // Draw frame 2
                    spriteBatch.Draw(left_2, munchiePos[i], Color.White);
                }
            }

            // Draw Pacman

            spriteBatch.Draw(pacman, pacmanPos,
                             new Rectangle(currentFrame.X * frameSize.X,
                                           currentFrame.Y * frameSize.Y,
                                           frameSize.X,
                                           frameSize.Y),
                             Color.White, 0, Vector2.Zero, 1, SpriteEffects.None, 0);

            spriteBatch.End();

            // If the game is transitioning on or off, fade it out to black.
            if (TransitionPosition > 0 || pauseAlpha > 0)
            {
                float alpha = MathHelper.Lerp(1f - TransitionAlpha, 1f, pauseAlpha / 2);

                ScreenManager.FadeBackBufferToBlack(alpha);
            }

            //Draw Score
            DrawText(points.ToString());
        }

        //Draw Scores
        private void DrawText(string score)
        {
            var CourierNew = content.Load<SpriteFont>("Fonts/menufont");
            spriteBatch.Begin();
            spriteBatch.DrawString(CourierNew, "Score: " + score, new Vector2(25, 0), Color.Black);
            spriteBatch.DrawString(CourierNew, "Lives: " + lives, new Vector2(700, 0), Color.Black);
            spriteBatch.End();
        }

        #endregion
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T21:07:03.347

您只能覆盖[超类](http://en.wikipedia.org/wiki/Inheritance_%28object-oriented_programming%29#Subclasses_and_superclasses)中定义的方法。这意味着当您实现一个继承自的类时`Game`（就像您在编写 XNA 游戏时所做的那样），您可以从`Game`具有以下签名的类中覆盖 draw 方法：

```
protected virtual void Draw (
    GameTime gameTime
) 
```

在您的代码中，您试图覆盖一个方法，

```
protected virtual void Draw (
     GameTime gameTime,
     InputState input
) 
```

这在您的超类中不存在，`Game`.

（另见*[Game.Draw 方法](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.game.draw.aspx)*。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T20:59:55.397

尝试删除关键字`override`.

```
public void Draw(GameTime gameTime, InputState input) 
```

# font-size - 与字体大小或字体编码有关的字体定位错误

> ID：14164800
> 
> 赞同：3
> 
> 时间：2013-01-04T20:52:32.400
> 
> 标签：font-size, webfonts, css, google-webfonts

我遇到了一个问题，当我指定`line height:1`UNTIL 字体大小变得大于 255px 时，字形的位置与我预期的一样。将字体大小设置为 256 和 bam，字形显着改变位置并且在线上变得太高。

我正在使用 Google Web 字体引入 Josefin Sans - [http://www.google.com/webfonts/specimen/Josefin+Sans](http://www.google.com/webfonts/specimen/Josefin+Sans)

编辑：我在 Fedora 上使用 Chrome，而不是那些拥有市场份额和资金的酷机器之一

此处简化小提琴 - [http://jsfiddle.net/jBAnc/](http://jsfiddle.net/jBAnc/)

编辑：小提琴没有为我显示代码。如果您单击“培根”，它将在 255 和 256 之间切换，导致它来回反弹（至少对我而言）。

当字体是基本的网络安全字体（如 Arial）时，我不会遇到这个问题，所以我认为它与 google 网络字体有关。这是字体编码的问题，可能是创建字体的程序（255 似乎很重要）？

![这是我原来的问题的截图](../Images/5bf3a8b38cf68167c5255e080e33dddd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:07:00.863

我遇到了这种字体不一致的行高/间距问题。我开始怀疑这是 Josefin Sans 本身的构造问题。

编辑：经过多一点谷歌搜索后，问题似乎不在于字体本身，而在于 Google Webfont API。

[http://webdesignandsuch.com/fix-fonts-that-dont-work-with-google-font-api-in-internet-explorer-or-chrome-with-font-face/](http://webdesignandsuch.com/fix-fonts-that-dont-work-with-google-font-api-in-internet-explorer-or-chrome-with-font-face/)

简短的回答：自己下载并托管字体，你应该没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T17:27:04.343

一点问题都没有。您只是希望所有字体都具有相同的 x 高度、下降器/扩展器高度，而它们却没有（10 次中有 9 次）。

下面的小提琴说明了 4 种字体之间的区别（3 种是 Mac、PC 等上非常常见的字体）。Josefin Sans 也在房子里。

特别注意以下方面的差异：

*   大写字母 Q 与其父边框之间的顶部间距
*   Xx 的各种高度（尤其是小写字母与大写字母）
*   小写 G 的后裔（有些实际上来自他们的父级）

_http://jsfiddle.net/suK2U/

![在此处输入图像描述](../Images/7c74192e71e7f9e73c5cfeba7e17bc8e.png)

为了回答您关于 255/256px 的问题，我敢说您刚刚遇到了容器与其父容器之间的“最佳位置”。在 256 处，它开始碰撞（并且边距开始塌陷，等等）。

# java - 在网络适配器上禁用/启用 IPv6 后，Eclipse 中的协议_only_ 不支持地址系列

> ID：14164801
> 
> 赞同：0
> 
> 时间：2013-01-04T20:52:32.320
> 
> 标签：java, eclipse, sockets, ipv6

嗨，感谢您提前提供的任何帮助：

我看到了这个众所周知和讨论过的问题。但是，这*仅*在 Eclipse 中运行/调试时，Win 7 上的 Juno。VM 版本无关紧要。

因此，这是一个仅限 Eclipse 的问题。当我独立运行同一个应用程序时，这不会发生 - 仅在 Eclipse 中（我是否已经说过;-)）

这发生在（出于测试目的）我在我的网络适配器上禁用了 IPv6，然后在这些相同的适配器上启用了 IPv6。

该应用程序很简单：在 WS-Discovery 端口上创建一个多播服务器，以侦听并向该组报告任何 UDP 多播。该程序在所有情况和平台上都可以正常工作，除了在机器和 Eclipse 中我如上所述禁用/启用 IPv6 的地方。

另外： 1) 是，PreferIPv6Addresses = true 和 PreferIPv4Stack = false - 代码中设置的参数 2) 不，Win 7 主机文件没有搞砸 3) 不，这不是 Android 应用程序

这是代码后面的错误。

再次感谢，提前，

汤姆

```
Protocol family not supported
java.net.SocketException: Protocol family not supported
    at java.net.PlainDatagramSocketImpl.bind(Native Method)
    at java.net.DatagramSocket.bind(DatagramSocket.java:368)
    at java.net.MulticastSocket.<init>(MulticastSocket.java:147)

System.setProperty("java.net.preferIPv4Stack", "false");
System.setProperty("java.net.preferIPv6Addresses", "true");

// bind to all IPv6 ports (in contrast to "0.0.0.0" for IPv4 binding)
InetAddress ia6BindTo = InetAddress.getByName("::");
SocketAddress sa = new InetSocketAddress(ia6BindTo, 3702);

// bam
MulticastSocket ms = new MulticastSocket(sa);

// no longer gets this far since disable/enable IPv6 on net adapters
InetAddress m_GroupAddress = InetAddress.getByName("[FF02::C]");
ms.joinGroup(m_GroupAddress); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:42:28.063

这不是“为什么？”的答案。

这是解决方法的答案。

我从 Eclipse 中删除了 Installed JVM 并重新安装了它。行为清除。

我不能完全接受这有两个原因：

1) 当我再次禁用/启用 IPv6 时，问题再次出现。因此，必须重复解决方法。2) 我必须进一步配置项目并运行配置，以使所需的 JVM 再次成为默认值。

如果我发现为什么会在 Eclipse 中发生这种情况，我将发布我的发现。

# c++ - 生成从可执行文件调用的 c++ 方法列表

> ID：14164802
> 
> 赞同：0
> 
> 时间：2013-01-04T20:52:36.053
> 
> 标签：c++, import, dumpbin, readelf

有没有办法生成为可执行文件调用的 C++ 方法列表？我有一个动态库，想看看从可执行文件中调用了多少方法。我可以看到 C++ 方法正在通过 dumpbin 或 readelf 导出。但是，当我在调用动态库的可执行文件上运行这些工具时，只列出了 C 方法和一个 C++ 方法。C++ 导入有什么特别之处吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:58:30.573

您可以使用分析构建您的库和程序，然后您可以获得所有调用函数的列表（以及每个函数花费了多少时间）。

您还可以添加手动跟踪日志记录，这意味着您添加一个在每个函数的开始和结束时写入控制台的调用。

分析可能是最简单和最简单的方法。[在此处](http://gcc.gnu.org/onlinedocs/gcc/Debugging-Options.html#index-g_t_0040command_007bgprof_007d-567)查找构建时所需的选项，例如[此处](http://sourceware.org/binutils/docs-2.16/gprof/)`gprof`查找提取信息所需的程序手册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:56:36.863

`-pg`您可以使用分析技术，例如使用传递给`gcc`（和在链接时）的标志编译整个程序，然后使用`gprof`. （还有`oprofile`）。

您可以使用`ltrace`来了解已完成的库调用。

您可能会对[这篇关于逆向工程工具](http://www.thegeekstuff.com/2012/03/reverse-engineering-tools/)的文章感兴趣。

# arrays - Node js从数组中获取值

> ID：14164803
> 
> 赞同：0
> 
> 时间：2013-01-04T20:52:40.507
> 
> 标签：arrays, node.js

我在服务器端有这个代码发送到用户从系统断开连接的客户端：

```
data = [usuariosConectados,socket.nickname];
io.sockets.emit('usuarioDesconectado',data); 
```

在客户端我有这个：

```
websocket.on("usuarioDesconectado",procesarUsuarios);

function procesarUsuarios (mensaje)
{
console.log(mensaje);
    $('#users').html('');
for(u=0; u<mensaje.length; u++)
{
    for(var user in mensaje[u])
    {
        $('#users').append($('<p>').text(mensaje[u][user]));
    }
}
} 
```

这`console.log(mensaje)`表明：

```
[{hola:"hola", lol:"lol"}, "Oscar"] 
```

有了这个，我知道用户 Oscar 不在系统中，hola 和 lol 仍在。

问题出在这部分：

```
$('#users').append($('<p>').text(mensaje[u][user])); 
```

此代码显示连接的用户，但也显示断开连接的用户，例如

```
O
s
c
a
r 
```

如何让连接的用户与断开的用户分开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T23:30:24.480

我找到了我的解决方案：

```
$('#users').html('');
if (mensaje[1] != null)
{
$('#chatInsite').append($('<p>').html('<span>'+ '<strong>' + mensaje[1] + " desconectado</strong></span> "));   
for(i in mensaje[0])
    {
        $('#users').append($('<p>').text(mensaje[0][i]));
    }
$('#chat').animate({scrollTop: $('#chatInsite').height()},800);
}
else
{
    for(i in mensaje[0])
    {
        $('#users').append($('<p>').text(mensaje[0][i]));
    }
    console.log("Usuario Nulo");
} 
```

# java - Spring Security - 拦截 URL 模式映射

> ID：14164804
> 
> 赞同：1
> 
> 时间：2013-01-04T20:52:47.913
> 
> 标签：java, spring, security

我在使用 Spring Security 的应用程序中遇到了问题。我的安全配置文件中有这个 http 标签配置：

```
 <http auto-config="true" use-expressions="true" path-type="regex">
     <intercept-url pattern="\A/hero.jsp/$?chooseHero=\Z" access="hasRole('ROLE_HERO')" />
     <intercept-url pattern="/.*" access="permitAll" />
     <logout logout-success-url="/" />              
 </http> 
```

第一个intercept-url有问题——地址不匹配。这基本上意味着我任何人都可以访问我的应用程序的 /hero.jsp/$?chooseHero= 部分。我错过了什么吗？仅使用时：

```
 <intercept-url pattern="\A/hero.jsp\Z" access="hasRole('ROLE_HERO')" /> 
```

一切正常。

我实现了基于数据库的身份验证。

请问，有人能帮我解决这个问题吗？感谢您的任何提示或想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T14:33:56.597

第一个拦截 URL 必须是有效的正则表达式，它由[RegexRequestMatcher](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/web/util/RegexRequestMatcher.html)处理。这是一个奇怪的正则表达式：

```
pattern="\A/hero.jsp/$?chooseHero=\Z" 
```

为什么需要`$`? 它是否意味着按字面意思匹配（它在正则表达式中具有特殊含义）？我想是这样的......还有，`.`并且`?`有[特殊的含义](http://www.regular-expressions.info/)。

假设您希望所有字符都按字面匹配，它必须是这样的：

```
pattern="\A/hero\.jsp/\$\?chooseHero=\Z" 
```

但是，如果所有内容都按字面意思匹配，为什么还需要正则表达式呢？您可能想省去麻烦，只使用更简单的[Ant 样式匹配器](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/core-web-filters.html)。

# c# - ASP.NET 页面生命周期问题。在回发时控制 Page_InitComplete 中的 ViewState

> ID：14164806
> 
> 赞同：0
> 
> 时间：2013-01-04T20:52:54.147
> 
> 标签：c#, asp.net, viewstate, page-lifecycle

我们的用户将： 1.打开
一个选项卡执行一些任务
2.打开另一个选项卡更改 customerId 并执行一些其他任务
3.返回上一个选项卡并尝试继续使用旧的 customerId
会话状态将更改为包含新的 customerId . 我一直在研究一个控件，该控件将检查 customerId 是否已更改并提示用户他们希望继续使用哪个 Id。

代码背后

```
public partial class CustomerChanged : System.Web.UI.UserControl
{
    protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);
        this.Page.InitComplete += Page_InitComplete;
    }

    void Page_InitComplete(object sender, EventArgs e)
    {
        if (IsPostBack)
        {
            if (Convert.ToInt32(ViewState["CustID"]) != Globals.CurrentCust.CustId)
            {
                CustomValidator err = new CustomValidator();
                err.ValidationGroup = "CustomerChanged";
                err.IsValid = false;
                err.ErrorMessage = "The customer has changed.";
                Page.Validators.Add(err);
                btnOldCustId.Text = "Old CustID \n" + ViewState["CustID"].ToString();
                btnNewCustId.Text = "New CustID \n" + Globals.CurrentCust.CustId.ToString();
                btnOldCustId.OnClientClick = string.Format("return changeCustomer({0},'{1}');", ViewState["CustID"].ToString(), Globals.GeneralSiteUrl);
                ScriptManager.RegisterStartupScript(this, this.GetType(), "CustomerChangedModalDialog", "ShowCustomerChangedModalDialog();", true);
            }
        }
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            ViewState.Add("CustID", Globals.CurrentCust.CustId);
        }
    }
    protected void btnNewCustId_Click(object sender, EventArgs e)
    {
        Response.Redirect(Request.RawUrl);
    }
 }
} 
```

ascx

```
<script type="text/javascript">
    function ShowCustomerChangedModalDialog() {
       var dlg = $("#CustomerChangedModal").dialog({
         title: 'Select Customer ID',
         resizable: false,
         modal: true
       });
    dlg.parent().appendTo(jQuery("form:first"));
    };

    function changeCustomer(customerId, baseUrl) {
        $.ajax({ url: "/General/Accounts/change.account?id=" + customerId + "&admin=false", async: false });
        $("#CustomerChangedModal").dialog('close');
        return false;
    }
</script>  

<div id="CustomerChangedModal" style="width: 440px; height: 250px; overflow: auto; display: none;">
    The session information has changed.
    Which account ID do you wish to use?
    <br />
    <br />
    <asp:Button ID="btnNewCustId" runat="server" OnClick="btnNewCustId_Click" />
    <asp:Button ID="btnOldCustId" runat="server" />
</div> 
```

我目前正在尝试访问 Page_InitComplete 中控件的 ViewState 数据，但它似乎为空。根据[http://msdn.microsoft.com/en-us/library/ie/ms178472.aspx](http://msdn.microsoft.com/en-us/library/ie/ms178472.aspx)，在 InitComplete 时应该可以访问 ViewState。我需要防止在 Page_Load 之前发生一些其他操作。如何在 Page_Load 之前的回发中访问控件 ViewState？

额外积分：如果您想就如何完成整体任务提供建议，我会感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:55:53.343

我认为您没有正确阅读文档：

> 页面初始化时，页面上的控件可用，并设置每个控件的UniqueID属性......如果当前请求是回发，则回发数据尚未加载，**控件属性值尚未恢复到值从视图状态。**

尝试 Page_Load 事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T21:05:27.560

您应该使用 Page.PreLoad 事件。在将 ViewState 中的值加载到控件层次结构后引发它。

或者，引用 msdn：

在页面加载其自身和所有控件的视图状态之后以及在它处理包含在 Request 实例中的回发数据之后引发。

# java - Android 最低 SDK 和配色方案

> ID：14164813
> 
> 赞同：1
> 
> 时间：2013-01-04T20:53:14.617
> 
> 标签：java, android

所以我在 API 15 中构建了一个使用某种默认配色方案的应用程序。但是，我知道大多数设备仍在运行 API 10。为了吸引这些设备，我将设备上的最小 SDK 切换为 10 . 这样做之后，我注意到我的按钮的默认灰黑色现在在旧设备上变成了白色 - 我怀疑这是因为 API 10 中没有该特定颜色。因此我的问题如下：无论如何将此资源打包到我的 APK 文件中，以便让这些设备看到我想要的颜色，还是我需要重新设计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:11:23.867

如果您想在任何地方使用 API 级别 15 主题，我**强烈**建议您查看[HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)项目。

这允许您的应用使用相同类型的主题和按钮，而不管 API 级别如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T22:10:08.660

如果您需要使用旧版本中不可用的资源，您可以轻松地从`platforms`SDK 的文件夹中获取它们并将它们复制到本地应用程序中。或者，您可以通过将旧的设备兼容主题放入`res/values/styles.xml`并放入新的设备兼容版本的主题`res/values-v11/styles.xml`（将 v11 替换为您的资源变得可用——通常 v11 是主要变化）。

编辑：根据您的以下评论，只需在 . 下创建另一个`themes.xml`文件`res/values`，然后将该样式复制到其中，将父级更改`@android:style/Theme`为`Theme.Holo`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T22:12:07.803

不确定您指的是哪种默认配色方案，但[HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)对我在 android 2.1 及更高版本中使用各种 Holo 主题非常有用。

# c# - C# 如何将 AOP 用于静态方法？

> ID：14164814
> 
> 赞同：2
> 
> 时间：2013-01-04T20:53:37.673
> 
> 标签：c#, .net, aop

我已经构建了 ac# .net 4.0 库。

所有方法都是公共的和静态的。

我想使用执行以下操作的方面编程库添加方面：

```
try block
1\. call method (if method throws exception)

catch block
2\. log the exception and massage the exception

it is a dll (class library project) 
```

如果有一种方法可以在一个类中添加 try/catch 例程而不是一个一个地环绕所有方法，您能否请教？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T22:02:11.357

因为您提到过[ninject](/questions/tagged/ninject "show questions tagged 'ninject'")和[castle-windsor](/questions/tagged/castle-windsor "show questions tagged 'castle-windsor'")以及其他任何基于[castle-](/questions/tagged/castle-dynamicproxy "show questions tagged 'castle-dynamicproxy'")`static` dynamicproxy 的词都不会帮助您，因为它们能够围绕常规方法添加方面。所以你有两个选择：

# 手写追踪装饰器

添加单独的手写跟踪装饰器，该装饰器将添加所需的功能而无需更改现有代码

*   好处
    *   简单易写自己
*   缺点
    *   **几乎没有调用上下文**。如果您想知道实际调用了哪些方法以及传递了哪些参数等，这对于跟踪很重要。
    *   **围绕现有代码的新抽象层**。而不是调用你的静态方法，你*必须*调用装饰器，它会在里面调用你的静态方法

## 例子

```
// Decorated calls
TraceDecorator.Aspect(() => StaticLogic.SuccessfulCall());
TraceDecorator.Aspect(() => StaticLogic.ExceptionCall());
TraceDecorator.Aspect(() => StaticLogic.SuccessfulCallWithReturn(42));
TraceDecorator.Aspect(() => StaticLogic.ExceptionCallWithReturn(42));

// Decorator itself
public static class TraceDecorator
{
    public static T Aspect<T>(Func<T> func)
    {
        try
        {
            return func();
        }
        catch(Exception ex)
        {
            LogException(ex);

            return default(T);
        }    
    }

    public static void Aspect(Action func)
    {
        try
        {
            func();
        }
        catch(Exception ex)
        {
            LogException(ex);
        }    
    }

    private static void LogException(Exception ex)
    {
        Console.WriteLine("Traced by TraceDecorator: {0}", ex);
    }
} 
```

[此处](https://gist.github.com/4457261)提供完整示例

# PostSharp

看看使用[postsharp进行](/questions/tagged/postsharp "显示标记为“postsharp”的问题")[非侵入式跟踪和日志记录](http://www.sharpcrafters.com/solutions/logging)

*   好处
    *   广播您的方面，而无需更改现有代码或自行添加属性，无论您发现什么合适
    *   **关注点分离**：跟踪/日志记录与您的逻辑分离
    *   还有更多……
*   缺点
    *   没有什么是免费的。但是有一个功能有限的免费 PostSharp 版本
    *   有时由于后期编译而与其他工具集成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-13T05:52:21.520

请参阅开源项目[NConcern .NET AOP Framework 。](http://aspectize.codeplex.com)

**例子**

你的静态类

```
static public class Calculator
{
    static public int Add(int a, int b)
    {
        return a + b;
    }
} 
```

记录器

```
static public class Logger
{
    static public void Log(MethodInfo method, object[] arguments, Exception exception)
    {
        Console.WriteLine("{0}({1}) exception = {2}", method.Name, string.Join(", ", arguments), exception.Message);
    }
} 
```

看点：登录异常

```
public class Logging : IAspect
{
    public IEnumerable<IAdvice> Advise(MethodInfo method)
    {
        yield return Advice.Basic.After.Throwing((instance, arguments, exception) => 
        {
            Logger.Log(method, arguments, exception);
        });
    }
} 
```

Joinpoint : 计算器的方法

```
var calculatorMethods = new Func<MethodInfo, bool>(method => method.ReflectedType == typeof(Calculator)); 
```

激活连接点的日志记录方面

```
Aspect.Weave<Logging>(calculatorMethods); 
```

# asp.net-mvc - 使用 ravendb 和 lucene 的 asp.net 网站全文搜索

> ID：14164820
> 
> 赞同：0
> 
> 时间：2013-01-04T20:53:55.237
> 
> 标签：asp.net-mvc, c#-4.0, lucene, ravendb

我正在为我的 Intranet 网站使用 ravendb。我需要在整个网站上实现全文搜索吗？我可以使用 ravendb 的 linq 搜索查询在后台基于 lucene 的文档。

另一种方法是使用 Lucene.Net 库独立实现全文搜索。

无论我选择哪种方法，它都应该能够搜索以 blob 格式存储在 ravendb 中的附件。

请问有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T21:52:09.220

RavenDB 与 Lucene 完全集成。独立使用它没有什么意义。

但根据定义，附件是不可搜索的。您当然可以存储完全可搜索的非常大的文档，但它们不会是附件。附件的全部意义在于您*不想*搜索的内容。示例：视频、照片、音乐等。

审查：

*   [http://ravendb.net/docs/client-api/attachments](http://ravendb.net/docs/client-api/attachments)
*   [http://ravendb.net/docs/client-api/querying/linq-extensions/search](http://ravendb.net/docs/client-api/querying/linq-extensions/search)
*   [http://ravendb.net/docs/appendixes/lucene-indexes-usage](http://ravendb.net/docs/appendixes/lucene-indexes-usage)

**修订答案**

我编写了一个使用[IFilters](http://en.wikipedia.org/wiki/IFilter)的包，让 RavenDB 自动提取附件的内容并使用 Lucene 对它们进行索引。 [它可以在这里找到](https://github.com/mj1856/RavenDB-IndexedAttachments)。

享受！

# ruby-on-rails - Rails 验证未来的日期（client_side_validation 给我带来麻烦）

> ID：14164825
> 
> 赞同：0
> 
> 时间：2013-01-04T20:54:13.077
> 
> 标签：ruby-on-rails, client-side-validation

我有以下代码来验证我的日期是否在将来：

```
 validate :date_must_be_in_future

  def date_must_be_in_future
    if date_in_question < Date.today
      errors.add(:date_in_question, "This should probably be in the future.")
    end
  end 
```

它似乎正在工作，但它没有出现在 client_side_validation 中。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:08:36.983

我有同样的问题，这里又是同样的问题： [https ://github.com/bcardarella/client_side_validations/issues/312](https://github.com/bcardarella/client_side_validations/issues/312)

所以我猜你必须编写自己的自定义验证器类，如下所述：

[https://github.com/bcardarella/client_side_validations/wiki/Custom-Validators](https://github.com/bcardarella/client_side_validations/wiki/Custom-Validators)

# c# - 在 C# 中使用 Matrix.RotateAt

> ID：14164832
> 
> 赞同：0
> 
> 时间：2013-01-04T20:54:40.083
> 
> 标签：c#, graphics, drawing, serial-port

我正在尝试根据从串行端口获取的数据旋转仪表。串行通信运行良好，现在我在使仪表旋转时遇到问题。我现在正在尝试使用滑块使图像旋转，但我仍然没有运气。我目前实现了一个计时器，每 100 毫秒触发一次并运行此代码。但是，当我移动 sliderBar 时，屏幕上的图像没有任何反应。我使用计时器的原因是因为我将在最终实现中使用它。使用计时器而不是串行事件来触发 UI 更新使应用程序运行更加流畅。

一如既往，非常感谢任何帮助！

在构造函数中...

```
 public Form1()
    {
        InitializeComponent();
        System.ComponentModel.ComponentResourceManager resources = new System.ComponentModel.ComponentResourceManager(typeof(Form1));
        imgpic = (Image)pictureBoxBase.Image.Clone(); // This is storing an image in a picture box...
        foreach (int rate in baudRates)
        {
            brbox.Items.Add(rate);
        }
        timer.Tick += new EventHandler(timer_Tick);
        timer.Interval = 100;
        timer.Enabled = true;
        timer.Start();

        com.DataReceived += new SerialDataReceivedEventHandler(OnReceived);
    } 
```

然后在计时器事件中......

```
 void timer_Tick(object sender, EventArgs e) // Again it is initially drawing the picture, but it does not rotate with the statusBar
    {

        Point test = new Point(0, 0);
        Image img = new Bitmap(400, 400); 
        pictureBox1.Image = img;
        Graphics g = Graphics.FromImage(pictureBox1.Image);
        Matrix mm1 = new Matrix();
        mm1.RotateAt((trackBar1.Value),new Point( 0,0),MatrixOrder.Append);
        GraphicsPath gp = new GraphicsPath();
        gp.Transform(mm1);
        gp.AddPolygon(new Point[] { new Point(0, 0), new Point(imgpic.Width, 0), new Point(0, imgpic.Height) });
        PointF[] pts = gp.PathPoints;
        g.DrawImage(imgpic, test);
        pictureBox1.Refresh();

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:25:33.957

关键问题是：

*   实际上没有画出你产生的路径

*   不旋转您添加到路径的多边形（添加*后*必须应用变换）

这里有很多内存泄漏的可能性 - 需要释放具有非托管组件的对象（此处的 Graphics、GraphicsPath、Image 和 Matrix 对象），以便可以很好地删除底层 Windows 对象（.NET 无法为您执行此操作）。

修正代码：

```
void timer_Tick(object sender, EventArgs e)
{
    if (pictureBox1.Image != null)
        pictureBox1.Image.Dispose(); // dispose old image (you might consider reusing it rather than making a new one each frame)

    Point test = new Point(0, 0);
    Image img = new Bitmap(400, 400); 
    pictureBox1.Image = img;
    Graphics g = Graphics.FromImage(pictureBox1.Image);

    Matrix mm1 = new Matrix();
    mm1.RotateAt((trackBar1.Value), new Point( 0,0), MatrixOrder.Append); // note that the angle is in degrees, so make sure the trackbar value or input is suitably scaled

    GraphicsPath gp = new GraphicsPath();
    gp.AddPolygon(new Point[] { new Point(0, 0), new Point(imgpic.Width, 0), new Point(0, imgpic.Height) });
    //PointF[] pts = gp.PathPoints; // not needed for this task

    g.DrawPath(Pens.Black, gp); // draw the path with a simple black pen
    g.Transform = mm1; // transform the graphics object so the image is rotated
    g.DrawImage(imgpic, test); // if the image needs to be behind the path, draw it beforehand

    mm1.Dispose();
    gp.Dispose();
    g.Disose(); // prevent possible memory leaks
    pictureBox1.Refresh();
} 
```

我认为这应该可行，如果仍然有问题，请在此处发表评论，如果需要，我将对其进行修改。

（编辑：看起来有很多我没想到的东西要处理）

# unicode - 如何在 Windows 8 中处理 Unicode 用户名

> ID：14164837
> 
> 赞同：0
> 
> 时间：2013-01-04T20:54:52.770
> 
> 标签：unicode, fonts

最近我注意到一个用户名在我的 Web 服务上被阻止，因为它与我放置在那里的用于将字符限制为字母、数字和某些符号的正则表达式过滤器不匹配。字符串是 Ｄｏｎｇ，事实证明，在我的游戏中，用户必须将 Unicode 字符串粘贴到文本输入字段中，这是我之前没有考虑过的。

我做了一些研究并注意到 C# Regex 是 Unicode 感知的，我可以添加 \p{L}\p{M}\p{Z}\p{N} 以允许更多组合，但我仍然不会不确定我允许或不允许所有适当的组合。特别是我希望能够阻止使用某些可能会冒犯年轻玩家（或老玩家）的词。现在我有一个坏词过滤器，我在用户完成输入后应用它，它可以很好地阻止大多数尝试制作令人反感的用户名，但只有（我现在意识到）如果他们使用 ASCII 来编写它。

考虑到某些 Unicode 字符没有以游戏选择的特定字体表示，并且某些 Unicode 组合实际上会弄乱您的显示对齐，其他游戏如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-09T00:46:01.777

质量更高的游戏/应用程序对其主要字体不支持的字符使用后备字体 - 如果 Segoe UI 没有该字符，则使用 Arial Unicode 后备。这通常工作得很好，因为它只是非英文字符、表情符号等最终使用备用字体呈现。

如果您不这样做，则必须将用户输入限制为您选择的字体将支持的内容，如果不是一直回到 ASCII 的话。

不过，与限制“坏词”相比，支持字体的问题是完全不同的。有一个标记机制是个好主意，但使用一个常见的“淘气词”列表也很有帮助。即使您不会说每种语言，您也可以在网络上的某个地方找到这些语言的单词列表。

# javascript - 如何创建一个循环以在 2 个数字（年）之间进行迭代？

> ID：14164838
> 
> 赞同：-1
> 
> 时间：2013-01-04T20:54:53.390
> 
> 标签：javascript

我有一个问题，我需要迭代两个不同的数字或年份。举个例子。我的开始年份是 1993 年，结束年份是 2014 年。我如何打印从 1993 年开始到 2014 年结束的年份？此外，对于每年打印的年份，我都需要将其添加到数组中。

我的假设是使用 While 循环

```
var myYear = [];
var theYear;

while(startyear <= endYear){

myYear.push(startyear)
startyear++
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:01:22.833

您需要声明和初始化变量。

像这样：

```
var startYear = 1993;
var endYear = 2014;
var yearArray = [];

while (startYear <= endYear) {
    yearArray.push(startYear);
    startYear++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-07T16:52:00.347

为什么不使用`for`循环？

```
var year, 
    myYear = [];

for (year = startyear; year <= endYear; year ++){
   myYear.push(year)
} 
```

# javascript - 如何更改进度条的背景颜色

> ID：14164839
> 
> 赞同：0
> 
> 时间：2013-01-04T20:54:53.280
> 
> 标签：javascript, html, css, progress-bar

> **可能重复：**
> [如何更改进度条的颜色](https://stackoverflow.com/questions/14164174/how-to-change-the-color-of-a-progress-bar)

我做了一个简单的进度条，但我不知道如何更改进度条的背景颜色、百分比颜色和文本“上次更新”颜色。有没有应该介绍的代码？请帮我一些代码/演示示例。谢谢

HTML：

```
 <table>
    <tr>
        <td>Last updated 1/4/2013:</td>
        <td><div class="progress" data-value="0"><span>0%</span></div></td>
    </tr> 
```

CSS：

```
.progress.ui-progressbar {position:relative;height:2em;}
.progress span {position:static;margin-top:-2em;text-align:center;display:block;line-height:2em;padding-left:200px;padding-right:200px;}
.progress[aria-valuenow="0"] 
span {margin-top:0px;}​ 
```

JavaScript：

```
$(document).ready(function() {
    $(".progress").each(function() {
        var progressValue = $(this).data("value");
        $(this).progressbar({
            value: progressValue
        }).children("span").appendTo(this);
    });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:45:33.623

要更改百分比栏的背景颜色，请添加以下 CSS 规则：

```
.progress {
  color: red;
} 
```

对于文本颜色：

我建议首先`<h1>`在标题周围添加一个标签，使其看起来像这样：

```
<td><h1>Last updated 1/4/2013:</h1></td> 
```

然后添加这个 CSS 规则：

```
td h1 {
  color: red;
} 
```

要更改百分比颜色，请添加以下规则：

```
.progress span {
  color: blue;
} 
```

另外，关闭您的`<table>`标签。

# sql - 使用 T-SQL 从 SQL Server 2008 以不确定的表结构进行编程导出

> ID：14164840
> 
> 赞同：0
> 
> 时间：2013-01-04T20:55:00.570
> 
> 标签：sql, sql-server-2008, tsql, ssis, export

我一直在寻找答案，但似乎不存在。问题：网站正在查询数据库并且无法及时返回结果（作为导出到 Excel）。这主要是由于结果集的大小。我想设置一个后台进程来“ping”等待查询并一个接一个地执行它们，将数据转储到要下载的位置。“ping”任务可以通过多种方式处理。我最初的理想解决方案是将数据导出到文件系统的触发器（或者，SQL Server 代理任务）。但是我遇到了一个问题，我不知道如何使用简单的 T-SQL 语句设置到文件系统的无定形输出。

SSIS 显然是对此的标准解决方案。我对 SSIS 知之甚少，不知道它是否会处理我想要它做的事情，但有人告诉我，查询的数量太多/输出种类繁多，这不是一个可行的解决方案。

可以运行 xp_cmdshell 来执行 BCP 导出。这工作正常，但显然打开了一个安全漏洞。

以前的解决方案：我多年前使用的一种解决方案，DTS 将数据直接传递到操作系统，似乎在 SQL Server 2008/2012 中已禁用。我以前也可以使用 sp_makewebtask 将数据直接导出到文件系统，但不再也可以这样做。

当前的解决方案我正在编写一个绑定到一些 SQL 表和存储过程的 PowerShell 脚本来管理执行。这似乎是一个不理想的解决方案；我很好奇我是否错过了什么。有没有一种简单的方法来设置 SSIS 以在没有结构的情况下导出数据？一种即时创建 Excel 文件并用数据填充的方法？

答案似乎是否定的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:03:44.157

您可以导出为 CSV 而不是 Excel（因为 Excel 可以轻松打开 CSV 文件），但它们没有任何格式。您可以设置 SSIS（或计划任务中的 BCP）以在 CSV 文件中导出已包含逗号和文本分隔符的单个列，因此 Excel 将在单独的列中显示数据。

# javascript - for循环中的javascript关闭不起作用

> ID：14164841
> 
> 赞同：1
> 
> 时间：2013-01-04T20:55:02.043
> 
> 标签：javascript, cordova, callback, closures

> **可能重复：**
> [循环内的 Javascript 闭包 - 简单的实际示例](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)

我在 phonegap 应用程序中遇到了关闭问题。我有一个 JSON 对象，其中包含有关如何创建表单的说明。大致是这样的代码：

```
for (var i in this.form.elements) {
    var element = this.form.elements[i];
    switch (element.type) {
        // other cases
        case 5:
            var addThumb, photoInput;
            addThumb = function (domId) {
                return function (imgData) {
                    console.log('id: ' + domId);
                    $(domId).attr({src: 'data:image/jpeg;base64,' + imgData});
                }
            }('#thumb-'+element.id);
            photoInput = $('<input>')
                .attr({type: 'button', value: element.name, name: element.type, id: element.id, 'class': 'photobutton'})
                .click(function (filename, cb) {
                    return function() {
                        console.log('taking photo and saving to ' + filename)
                        takePhoto(filename,addThumb)
                    }
                }('photo-'+element.id, addThumb)
            );
            photoThumb = $('<img>').attr({id: 'thumb-'+element.id, 'class': 'thumbnail', src: 'img/target.png'});
            $('#content').append(photoInput, photoThumb);
            break;
    }
} 
```

单击照片按钮会打开相机以拍摄照片，并将照片保存到磁盘。保存后，使用 base64 照片数据调用 addThumb 以替换缩略图。我的测试表单的每个输出是：

```
taking photo and saving to file photo-686
id: '#thumb-690 
```

拍照的闭包有效，但是当 addThumb 作为回调调用时，会`domId`显示通过 for 循环的最后一个 element.id。给定两个缩略图，无论按下哪个按钮，都会替换第二个缩略图。它发生在 iPhone 和 Android 上，所以我编写它的方式一定有问题。我做错什么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:03:54.120

```
takePhoto(filename, addThumb) 
```

您需要`cb`从此处的闭包内部传递变量，而`addThumb`不是未“受保护”的变量。似乎您在“保护”它时忘记更改变量名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T20:56:54.320

问题是`addThumb`变量本身不受闭包的保护。它在创建时包含 d 的值，`element.i`但在下一次循环出现时被替换。所以你总是调用最后创建的`addThumb`函数。

您可以构建一个闭包来封闭，而不是尝试单独保护每个变量`element`：

```
for (var i in this.form.elements) {
    var element = this.form.elements[i];
    (function(element){
       switch (element.type) {
       ...
    })(element);
} 
```

# php - 无法让 .ajax 调用我的 php 脚本

> ID：14164847
> 
> 赞同：1
> 
> 时间：2013-01-04T20:55:30.020
> 
> 标签：php, jquery

在我的一生中，我无法使用 ajax 函数调用我的 PHP 文件。这是我的相关 HTML：

```
 $(document).ready( function(){
                    $("#generate").click(function(){
                            alert("Been clicked");
                            $.ajax({
                                    url: "filterScriptForMe.php",
                                    success: function(data){
                                    alert("response");
                                    }
                            });             
                    });
            }); 
```

这是我的 PHP 文件，我可以通过单独调用来运行它，并且在单独运行时会打印到错误日志/echo/create 必要的图像没有问题：

> ```
>  error_log("script has been called");
>             $hello = imagecreatefrompng("./images/stock.png");
>             $hello = imagecreatefrompng("./images/stock.png");
>             imagealphablending($hello,false);
>             imagesavealpha($hello,true);
>             $x=imagecolorallocatealpha($hello,0,0,0,127);
>             $color = imagecolorat($hello,350,500);
> 
>             for($y=0;$y<512;$y++)
>             for($z=0;$z<597;$z++)
>             {
>             if($color!=imagecolorat($hello,$y,$z))
>             {
>                  imagesetpixel($hello,$y,$z,$x);
>             }
>             }
>             imagepng($hello,"done.png");
>             echo "done"; 
> ```

我开始怀疑此时我的服务器是否有问题。运行时，它会打印第一个警告说“被点击”，但它似乎没有运行 php 脚本，因为当我点击 html 文件中的按钮时，我没有输出到我的日志文件，而不是直接访问 php浏览器。html 和 php 都在同一个目录中，我已经仔细检查了名称以确保它们是正确的。

我知道其他 jQuery 函数也在页面上工作，因为我已经成功地让一些 jQueryUI 元素显示和响应单独使用 jQuery 的操作。除此之外，第一个警报似乎正在触发，所以我相当确定库/代码在那里。我已经尝试过使用 firebug，但是当它开始深入图书馆时，它有点超出我的能力，我不知道正在做什么以及为什么。

您可以提供的任何帮助将不胜感激，至少从 html 页面获取 PHP 文件。谢谢！

# objective-c - 将数组加倍

> ID：14164850
> 
> 赞同：0
> 
> 时间：2013-01-04T20:55:54.213
> 
> 标签：objective-c, arrays, math, double

此代码返回错误“二进制表达式双精度和双精度操作数无效”

```
double staticDouble[3] = {1,2,3};
double dynamicDouble[3] = {a, b, c};
double resultTest = static * dynamic;
NSLog(@"%f",resultTest); 
```

我想做的是将1乘以a，2乘以b，3乘以c。abc 是从文本字段中获取的双精度值。我应该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T21:02:39.447

问题是`static`and`dynamic`是数组，并且没有`*`数组的运算符；仅适用于“算术”类型。（另外，命名数组`static`是一个问题，但为了回答您实际提出的问题，我将忽略它）。

两种选择：一次计算一个产品：

```
double resultTest[3];
for (int i=0; i<3; ++i) resultTest[i] = static[i] * dynamic[i]; 
```

或调用对向量进行操作的库函数；例如在 iOS 或 OS X 上，您可以这样做（您还需要链接到 Accelerate 框架）：

```
#include <Accelerate/Accelerate.h>

...

double resultTest[3];
vDSP_vmul(static, 1, dynamic, 1, resultTest, 1, 3); 
```

（这对于大小为 3 的数组来说有点矫枉过正；如果您要专门处理这样的小数组，您可能需要定义自己的函数或使用针对固定大小的小型向量操作的库，例如 GLKit）。

你会在打印结果时遇到同样的问题；没有格式字符串来打印数组的内容，因此您需要一次打印一个元素：

```
for (int i=0; i<3; ++i) NSLog(@"%f ", resultTest[i]); 
```

# c# - 从 Windows RT 应用程序中的文件读取

> ID：14164851
> 
> 赞同：0
> 
> 时间：2013-01-04T20:55:54.617
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime, windows-store-apps

> **可能重复：**
> [如何逐行读取文本文件 Windows RT？](https://stackoverflow.com/questions/13997464/how-to-read-a-text-file-line-by-line-windows-rt)

我正在尝试在 C# 中逐行读取文件。

这是我的代码

```
 String filename = "apoel.txt";

   System.IO.StreamReader file = new System.IO.StreamReader(filename); 
```

我遵循了[MSDN 页面上](http://msdn.microsoft.com/en-us/library/aa287535%28v=vs.71%29.aspx)的说明并完全按照它们进行操作。问题是我不断收到错误

> *System.IO.StreamReader.StreamReader (System.IO.Stream)' 的最佳重载方法匹配有一些无效参数
> 参数 1：无法从 'string' 转换为 'System.IO.Stream'*

我补充说`using System.IO`；在我的代码顶部

我究竟做错了什么？如果有任何帮助，这是一个 Windows Metro 应用程序

也有人可以向我解释为什么我发布的来自 MSDN 的文章是错误的并且不起作用？请不要给我其他选择。请告诉我为什么我的代码在 MSDN 中这样解释时不起作用

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-04T20:59:38.797

您正在阅读的文档没有考虑到许多成员`StreamReader`在 Windows 应用商店应用程序中不可用的事实。

查看整体[`StreamReader`文档](http://msdn.microsoft.com/en-gb/library/system.io.streamreader.aspx)。您*只能*使用旁边有绿色袋子的成员。

Windows 应用商店应用程序中的文件访问与完整的桌面 .NET 略有不同。我建议您阅读此[MSDN 指南](http://msdn.microsoft.com/en-gb/library/windows/apps/hh464917.aspx)。一旦你有了 a `Stream`，你就可以构建一个- 或者你可以使用诸如`StreamReader`的成员，这取决于你想要做什么。[`Windows.Storage.FileIO`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.fileio.aspx)[`ReadLinesAsync`](http://msdn.microsoft.com/en-us/library/windows/apps/hh701475.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-05T10:29:37.803

这是我用于在 Windows 8 中读取/写入文件的代码。它有效，我希望它也能帮助你。

```
private StorageFolder localFolder;
// Read from a file line by line
public async Task ReadFile()
{
    try
    {
        // get the file
        StorageFile myStorageFile = await localFolder.GetFileAsync("MyDocument.txt");
        var readThis = await FileIO.ReadLinesAsync(myStorageFile);
        foreach (var line in readThis)
        {
            String myStringLine = line;
        }
        Debug.WriteLine("File read successfully.");
    }
    catch(FileNotFoundException ex)
    {   
        Debug.WriteLine(ex);           
    }
}
// Write to a file line by line
public async void SaveFile()
{
    try
    {
        // set storage file
        StorageFile myStorageFile = await localFolder.CreateFileAsync("MyDocument.txt", CreationCollisionOption.ReplaceExisting);
        List<String> myDataLineList = new List<string>();
        await FileIO.WriteLinesAsync(myStorageFile, myDataLineList);
        Debug.WriteLine("File saved successfully.");
    }
    catch(FileNotFoundException ex)
    {  
        Debug.WriteLine(ex);            
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T21:11:16.303

在您在上面发布的示例中，文件名未初始化为任何内容。对于更高版本的编译器，它会抱怨未分配使用文件名。在任何情况下将文件名初始化为

```
string filename = @"c:\somefile.txt"; 
```

它应该可以正确编译。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-04T21:22:43.587

```
String[] lines = File.ReadAllLines(filePath); 
```

或者

```
List<string> lines = new List<string>(File.ReadAllLines(filePath)); 
```

# data-mining - 数据挖掘和频繁数据集

> ID：14164853
> 
> 赞同：4
> 
> 时间：2013-01-04T20:56:05.180
> 
> 标签：data-mining

这几天我一直在为我的考试做一些工作，我正在浏览一些过去的论文，但不幸的是没有相应的答案。我已经回答了这个问题，我想知道是否有人可以告诉我我是否正确。

我的问题是

> (c) 交易数据集 T 如下所示：
> 
> t1：牛奶、鸡肉、啤酒
> 
> t2：鸡肉、奶酪
> 
> t3：奶酪，靴子
> 
> t4：奶酪、鸡肉、啤酒、
> 
> t5：鸡肉、啤酒、衣服、奶酪、牛奶
> 
> t6：衣服、啤酒、牛奶
> 
> t7：啤酒、牛奶、衣服
> 
> 假设最小支持为 0.5 (minsup = 0.5)。
> 
> (i) 找出所有频繁项集。

这是我的解决方法：

> 项目：金额
> 
> 牛奶：4
> 
> 鸡：4
> 
> 啤酒：5
> 
> 奶酪：4
> 
> 靴子：1
> 
> 衣服：3

现在因为 minsup 是 0.5，所以你去掉了靴子和衣服，并把剩下的给组合起来：

> {项目}：金额
> 
> {牛奶，鸡肉}：2
> 
> {牛奶，啤酒}：4
> 
> {牛奶，奶酪}：1
> 
> {鸡肉，啤酒}：3
> 
> {鸡肉，奶酪}：3
> 
> {啤酒，奶酪}：2

哪一个让牛奶和啤酒成为唯一的频繁项目集，因为它是唯一高于 minsup 的项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:34:56.793

我同意你应该选择 Apriori 算法。

Apriori 算法基于这样一种思想，即对于频繁出现的一对 o 项目，每个单独的项目也应该是频繁的。如果汉堡包-番茄酱对很频繁，则汉堡包本身也必须经常出现在篮子中。番茄酱也是如此。

所以对于算法，它建立了一个“阈值X”来定义什么是频繁或不频繁。如果一个项目出现超过 X 次，则认为它是频繁出现的。

该算法的第一步是对每个篮子中的每个项目进行传递，并计算它们的频率（计算它出现的次数）。这可以通过大小为 N 的散列来完成，其中散列的位置 y 指的是 Y 的频率。

如果项目 y 的频率大于 X，则称它是频繁的。

在算法的第二步中，我们再次遍历项目，计算篮子中配对的频率。问题是我们只计算单独频繁的项目。因此，如果项目 y 和项目 z 本身是频繁的，那么我们计算这对的频率。这种情况大大减少了要计算的对和占用的内存量。

一旦计算出来，大于阈值的频率称为频繁项集。

( [http://girlincomputerscience.blogspot.com.br/2013/01/frequent-itemset-problem-for-mapreduce.html](http://girlincomputerscience.blogspot.com.br/2013/01/frequent-itemset-problem-for-mapreduce.html) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T09:52:56.607

有两种方法可以解决问题：

1.  使用 Apriori 算法
2.  使用 FP 计数

假设您使用的是 Apriori，那么您得到的答案是正确的。

算法很简单：
首先计算频繁的 1 项集并排除低于最小支持的项集。
然后通过组合先前迭代的频繁项来计算频繁的 2 项集，并排除低于支持阈值的项集。
该算法可以继续进行，直到没有项目集大于阈值。
在给您的问题中，您只会得到一组大于阈值的 2 个项目，因此您无法进一步移动。 [这里](http://en.wikipedia.org/wiki/Apriori_algorithm)
有一个关于 Wikipedia 进一步步骤的已解决示例。

有关更多示例，您可以参考 Han 和 Kamber 的“数据挖掘概念和技术”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T21:38:46.483

好的开始，您必须首先了解，数据挖掘（有时称为数据或知识发现）是从不同角度分析数据并将其总结为有用信息的过程 - 可用于增加收入、降低成本或两者兼而有之的信息。数据挖掘软件是用于分析数据的众多分析工具之一。它允许用户从许多不同的维度或角度分析数据，对其进行分类，并总结所识别的关系。从技术上讲，数据挖掘是在大型关系数据库中的数十个字段之间寻找相关性或模式的过程。

现在，存储在企业数据库中的原始数据量正在爆炸式增长。从数以万亿计的销售点交易和信用卡购买到逐个像素的星系图像，数据库现在以千兆字节和 TB 为单位进行衡量。（1 TB = 1 万亿字节。1 TB 相当于大约 200 万本书！）例如，沃尔玛每天将 2000 万笔销售点交易上传到 A&T 大规模并行系统，该系统有 483 个处理器，运行中央数据库. 然而，原始数据本身并不能提供太多信息。在当今竞争激烈的商业环境中，公司需要迅速将这些 TB 的原始数据转化为对其客户和市场的重要洞察，以指导他们的营销、投资和管理战略。

现在你必须明白，关联规则挖掘是数据挖掘中的一个重要模型。它的挖掘算法发现数据中满足用户指定的最小支持（minsup）和最小置信度（minconf）约束的所有项目关联（或规则）。Minsup 控制规则必须涵盖的最小数据案例数。Minconf 控制规则的预测强度。由于整个数据库只使用了一个 minsup，因此模型隐含地假设数据中的所有项目具有相同的性质和/或在数据中具有相似的频率。然而，在实际应用中很少出现这种情况。在许多应用程序中，一些项目在数据中出现的频率很高，而另一些则很少出现。如果 minsup 设置得太高，那些涉及稀有物品的规则将找不到。要查找涉及频繁项和稀有项的规则，必须将 minsup 设置得非常低。这可能会导致组合爆炸，因为这些频繁项将以所有可能的方式相互关联。这种困境被称为稀有物品问题。本文提出了一种新的技术来解决这个问题。该技术允许用户指定多个最小支持以反映项目的性质及其在数据库中的不同频率。在规则挖掘中，根据规则中的项目，不同的规则可能需要满足不同的最小支持度。本文提出了一种新的技术来解决这个问题。该技术允许用户指定多个最小支持以反映项目的性质及其在数据库中的不同频率。在规则挖掘中，根据规则中的项目，不同的规则可能需要满足不同的最小支持度。本文提出了一种新的技术来解决这个问题。该技术允许用户指定多个最小支持以反映项目的性质及其在数据库中的不同频率。在规则挖掘中，根据规则中的项目，不同的规则可能需要满足不同的最小支持度。

给定一组事务 T（数据库），挖掘关联规则的问题是发现所有支持度和置信度大于用户指定的最小支持度（称为 minsup）和最小置信度（称为 minconf）的关联规则。

我希望一旦你了解了数据挖掘的基础知识，这个问题的答案就会变得显而易见。

# jquery - jQuery 从购物篮调试中删除项目

> ID：14164863
> 
> 赞同：0
> 
> 时间：2013-01-04T20:56:59.873
> 
> 标签：jquery, shopping-cart

我的 jQuery 从购物篮中删除项目有问题。

如果我在将物品添加到购物篮后等待 10 秒左右，它会毫无问题地移除。如果我将一个项目添加到购物篮，意识到我犯了一个错误然后点击删除按钮（在几秒钟内），页面重新加载 - 不是预期的。

我猜这可能是因为 jQuery 事件尚未附加到从篮子 id 中删除的项目...

有什么方法可以加快这个过程，或者我的 jQuery 做错了什么，因为它很明显......

[http://goldealers.co.uk/calc-test](http://goldealers.co.uk/calc-test)

提前谢谢了。

我绑定到事件如下：

```
jQuery(document).ready(function () {
jQuery('.remove').click(function(data) {
    var pid = jQuery(this).attr('name');
      jQuery.post('https://goldealers.co.uk/wp-content/plugins/gd/tables.php', 
        { pid: pid, remove: 'true' }, 
            function(data) {
                jQuery("#quoteTable").load("https://goldealers.co.uk/wp-content/plugins/gd/tables.php?table=quoteTable");
                jQuery("#quoteTotal").load("https://goldealers.co.uk/wp-content/plugins/gd/tables.php?table=quoteTotalTable");          
            },
        "json");        
    return false;
}); 
```

});

它绑定的 Html 是：

```
<form method="post" action="">
<input type="hidden" name="remove" value="6" />
<input type="hidden" name="pid" value="6" />
<input type="image" src="https://goldealers.co.uk/media/delete.png" name="6" class="remove"/>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T04:04:23.237

您需要使事件侦听器生效。您可以通过将其更改为：

```
$(document).on('click', '.remove', function(){
    ...
}) 
```

# ajax - Laravel 中的引导模式、jquery ajax 表单验证和数据库插入

> ID：14164867
> 
> 赞同：1
> 
> 时间：2013-01-04T20:57:20.303
> 
> 标签：ajax, modal-dialog, laravel

我正在尝试使用引导模式，通过最终数据库插入进行实时电子邮件检查和验证。我看过几个教程，但不能把它们放在一起。我有 0 个 js 技能。我有一个模态表单，它提交并验证正常的 laravel 方式。唯一的问题是，如果它有错误，我们会在页面刷新时看到消息，而不是在模式中。:(

我添加了一些我在帖子中看到的 ajax 内容，这使我的表单能够将数据提交到数据库中而无需刷新。:) 但是我无法弄清楚如何在插入时正确返回错误和成功消息。到目前为止，唯一有效的错误是必填字段，颜色为红色，但没有显示任何消息。

我想要实现的是这个但是在一个模态[教程中](http://jqueryfordesigners.com/using-ajax-to-validate-forms/)

这是我到目前为止的代码：

形式

```
{{ Former::open('admin/staff/create_staff', 'POST')->rules(User::$rules)->id('add_staff'); }} 
{{ Former::token();}}
{{ Former::text('f_name','First Name')->required(); }}
{{ Former::text('l_name','Last Name')->required(); }}
{{ Former::text('username','Username'); }}
{{ Former::text('user_number','User number')->required(); }}
{{ Former::text('email','Email')->required(); }}
{{ Former::password('password','Password')->required(); }}
{{ Former::select('gender','gender')->options(array('man'=>'male','female'=>'female'))->placeholder('Select Gender')->required() }}
{{ Former::select('contractor','contractor')->fromQuery(Contractor::all(), 'contractor', 'contractor')->placeholder('Select Contractor')->required(); }}
{{ Former::select('campus','campus')->fromQuery(Campus::all(), 'campus', 'campus')->placeholder('Select Campus')->required(); }}
{{ Former::select('status','status')->options(array('1'=>'Active','0'=>'In-active'))->placeholder('Select Status')->required() }}
{{ Former::actions (Former::large_primary_submit('Submit')->id('sub'),Former::large_inverse_reset('Reset')->id('clear')) }} 
{{ Former::close() }} 
```

控制器：

```
if(Request::ajax()) {
            $rules = [
                'f_name'        => 'required',
                'l_name'        => 'required',
                'user_number'   => 'required',
                'email'         => 'required|email',
                'gender'        => 'required',
                'campus'        => 'required',
                'status'        => 'required',
                'contractor'    => 'required',
                'password'      => 'required',
            ];

            $validation = Validator::make(Input::all(),$rules);

$response = ["error" => ['error'=>'true','status'=>'Sorry there has been an error'],
"success" => ['success'=>true,'message'=>'The new staff member was successfully added to the system']
            ];

            if($validation->fails())
            {
                return Response::json($response["error"]);
            }
            else
            {

 $user = User::find_by_email(Input::get('email'));
 if($user) {
   // send a message back via ajax that the email already exists
   if($user) {
    return Redirect::back()->with_input()
        ->with('status','The email address is already in use');
    }
 }

      $staff = new User(array( 
      'f_name'                  => Input::get('f_name'), 
      'l_name'                  => Input::get('l_name'), 
      'user_number'             => Input::get('user_number'), 
      'username'            => Input::get('username'), 
      'email'               => Input::get('email'),
      'password'                => Hash::make(Input::get('password')),
      'status'              => Input::get('status'),
      'gender'              => Input::get('gender'),    
      ));$staff->save();

  // Automatically create a profile for the new staff member
   $staff_profile = new Profile(array(
   'user_id'            => $teacher->id, 
   'contractor'         => Input::get('contractor'),
   'campus'             => Input::get('campus'),
                ));
  $staff_profile->save();

   return Response::json($response["success"]);

  }
        } 
```

jQuery

```
 $('#add_staff').submit(function(){
    var datas = $(this).serialize();
    url = $(this).attr('action');

    $.ajax({
        type: 'POST',
         url: url,
         data: datas,
         dataType: 'JSON',
         success: function(msg,status){
            if(msg.error)
            {
                $(f_name).removeClass('required');
                $(f_name).addClass('required field error');
                $(l_name).removeClass('required');
                $(l_name).addClass('required field error');
                $(user_number).removeClass('required');
                $(user_number).addClass('required field error');
                $(email).removeClass('required');
                $(email).addClass('required field error');
                $(gender).removeClass('required');
                $(gender).addClass('required field error');
                $(campus).removeClass('required');
                $(campus).addClass('required field error');
                $(status).removeClass('required');
                $(status).addClass('required field error');
                $(contractor).removeClass('required');
                $(contractor).addClass('required field error');
                $(password).removeClass('required');
                $(password).addClass('required field error');

            }
            else if(msg.success)
            {
                $("#succesful_message").html(msg);
                clearInput();

            }
        }
    });
    return false;
});

function clearInput() {
$("#add_staff :input").each( function() {
    $(this).val('');
});
} 
```

任何指向我正确方向的信息将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:57:56.067

我注意到的第一件事是您需要添加以下内容：

```
$('#add_staff').submit(function(e){
    e.preventDefault();
    ...
} 
```

这样您的表单就不会刷新页面。

# asp.net - 添加新列表项时出现 Sharepoint Web 服务错误 0x81020030

> ID：14164868
> 
> 赞同：0
> 
> 时间：2013-01-04T20:57:26.350
> 
> 标签：asp.net, sharepoint, sharepoint-api

我正在尝试使用共享点列表服务添加一个新的列表项。但是我在 sharepoint 的结果 xml 中收到了这个错误

“0x81020030无效的文件名。无法使用您指定的文件名。它可能是现有文件或目录的名称，或者您可能没有访问该文件的权限。”

奇怪的是，如果我从本地机器调用但在 qa env 中失败，它工作正常。

这是连接到服务的代码

client.ClientCredentials.Windows.ClientCredential = new System.Net.NetworkCredential("use", "pwd", "domain");

SPCalendarService.ListsSoapClient 客户端 = new SVMEvents.SPCalendarService.ListsSoapClient("ListsSoap", "url");

```
 System.Xml.XmlNode ResultNode = client.UpdateListItems("EventList Name", inputXml); 
```

任何想法为什么会出现此错误...我正在尝试添加一个新的列表项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T09:43:38.670

如果数据库服务器上的磁盘空间不足，也会出现此消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T10:51:56.663

此错误通常意味着您尝试添加列表项的列表已损坏。你能用浏览器访问这个列表吗？或者添加新项目？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T11:24:22.100

这可能是由于 Microsoft 在报告错误时出现的错误：由于某种原因，如果其中一列损坏，则会返回此错误。尝试找出是否有任何列损坏并删除它们并再次添加它们。这[是某人写的一篇关于他如何使列损坏并出现错误的帖子](http://www.sharepoint-tips.com/2013/01/sharepoint-error-0x81020030-invalid.html)。

# operating-system - 不能分叉，即使有无限的ulimit

> ID：14164870
> 
> 赞同：3
> 
> 时间：2013-01-04T20:53:20.983
> 
> 标签：operating-system, shell

在 ksh 中执行 shell 脚本时，出现以下错误：

> myscript.sh[13]：无法分叉 - 再试一次

我以为我用完了进程，但`ulimit -a`返回了这个：

```
# ulimit -a
time(cpu-seconds)    unlimited
file(blocks)         unlimited
coredump(blocks)     unlimited
data(kbytes)         unlimited
stack(kbytes)        unlimited
lockedmem(kbytes)    unlimited
memory(kbytes)       unlimited
nofiles(descriptors) 1000
processes            unlimited
vmemory(kbytes)      unlimited 
```

这是我的脚本，它通过 /dev/ipc/ch2 向另一个设备发送 IPC 消息：

```
#!/bin/sh

TIMEOUT=40

echo "Petting watchdog for $TIMEOUT seconds..."

c=1
while [[ $c -le $TIMEOUT ]]; do
#   echo "Petting $c"
    sleep 1
    echo -n "\001\002\003\004" > /dev/ipc/ch2
    (( c++ ))
done

echo "Done petting dog..." 
```

可能是什么？，我不明白为什么分叉会突然受到限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:16:13.603

它还说你有无限的记忆。实际上，它受到安装的 RAM 和交换空间的物理限制。类似的事情也发生在进程中。操作系统只能为进程表保留一定的空间。“无限”并不意味着你可以拥有一万亿个进程，只是操作系统没有人为地将它限制在自然数量之下。

您可以写入以`/proc/sys/kernel/pid_max`增加 Linux 上的可用进程。请参阅[此处](http://www.cyberciti.biz/tips/howto-linux-increase-pid-limits.html)了解更多信息。

# python - Python中耗时的REST服务出错

> ID：14164871
> 
> 赞同：5
> 
> 时间：2013-01-04T20:57:42.817
> 
> 标签：python, rest

我正在编写代码来参加服务。我收到对特定服务的 POST 请求并开始处理。整个过程相当简单；我循环请求中的项目并将每个项目添加到数据库中。当我必须处理很多项目并且循环需要大约三分钟才能完成时，就会出现问题，然后当我尝试响应时：

```
status = '200 OK'
headers = [('Content-type', 'application/json'),('Access-Control-Allow-Origin','*')]
start_response(status, headers)

return json.dumps(response) 
```

我收到此错误：

```
Exception happened during processing of request from ('XXX.XXX.XXX.XXX', 49172)
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/SocketServer.py", line 284, in _handle_request_noblock
    self.process_request(request, client_address)
  File "/usr/local/lib/python2.7/SocketServer.py", line 310, in process_request
    self.finish_request(request, client_address)
  File "/usr/local/lib/python2.7/SocketServer.py", line 323, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "/usr/local/lib/python2.7/SocketServer.py", line 640, in __init__
    self.finish()
  File "/usr/local/lib/python2.7/SocketServer.py", line 693, in finish
    self.wfile.flush()
  File "/usr/local/lib/python2.7/socket.py", line 303, in flush
    self._sock.sendall(view[write_offset:write_offset+buffer_size])
error: [Errno 32] Broken pipe 
```

我不知道这是否有帮助，但 POST 请求是从浏览器到不同域的转发 POST（这就是为什么使用 Access-Control-Allow-Origin）并且对数据库的所有访问都是使用单个使用[SQLAlchemy](http://en.wikipedia.org/wiki/SQLAlchemy)与数据库交互的对象（类似于[Java EE](http://en.wikipedia.org/wiki/Java_Platform,_Enterprise_Edition) [DAO](http://en.wikipedia.org/wiki/Data_access_object)模式）。

如何避免此错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T22:51:17.913

您可能违反了 REST 背后的理念。

如果处理可能需要一些时间，则服务可能希望使用`202 Accepted`响应来回答它！有关 http 响应代码的完整概述，请点击以下链接：[http ://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

> 202 接受
> 
> 请求已被接受处理，但处理尚未完成。该请求最终可能会或可能不会被执行，因为在实际进行处理时它可能会被禁止。无法从诸如此类的异步操作中重新发送状态代码。
> 
> 202 响应是故意不置可否的。它的目的是允许服务器接受对某个其他进程的请求（可能是一个每天只运行一次的面向批处理的进程），而不需要用户代理与服务器的连接持续到该进程完成。与此响应一起返回的实体应该包括请求当前状态的指示以及指向状态监视器的指针或用户可以期望何时完成请求的一些估计。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T21:12:45.630

我可能是错的，但在我看来，套接字正在超时。您不应让客户端等待响应的时间超过三分钟。

相反，您应该验证数据并发送一条消息，说明它已收到。如有必要，您可以使用 AJAX 之类的东西来告诉客户端数据是在收到后输入的。

# android - 使用 rhomobile 和 jQuery mobile 的应用程序很慢

> ID：14164872
> 
> 赞同：0
> 
> 时间：2013-01-04T20:57:48.473
> 
> 标签：android, jquery-mobile, mobile, rhomobile

我用 rhomobile + jQuery Mobile 开发了一个移动应用程序。

当我将它部署在“for android”的手机上时，它非常慢。

你能帮我找出原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:08:35.153

无论使用什么包装器（Rhomobile/Phonegap），jQuery mobile 在 android 设备上都会有极差的性能（主要是 2.X，但 sam 与 4+ 版本有关）。

在有此问题的设备（主要是 Android）上，您无能为力。这是浏览器的限制。Android 移动浏览器因转换效果不佳而臭名昭著。

在 iOS 上，您必须注意几个问题。首先，Webviews 受到比 Mobile Safari 慢的 Javascript 的阻碍，因为它们缺乏即时编译功能。它不是罗德特定的。相同的 Javascript 在 Webview 中的运行速度将比在 Mobile Safari 本身中运行得慢，并且无法绕过它。

其次，iOS 不会自动使用硬件加速进行过渡。您可以通过使用空 3D 变换（如 translateZ(0)）“提示”浏览器使用硬件加速。搜索有关此的更多信息。选择正确的元素来做这件事有点艺术，因为将其应用于大量元素可能会很昂贵，而且通常没有必要将其应用于整个元素层次结构。

不过，我最好的建议是不要使用过渡，因为它们在各种移动设备上还没有得到很好的处理。IMO，无论如何，没有过渡是一种非常出色的用户体验。过渡主要用于分散用户对慢速软件的注意力，具有讽刺意味的是，会在流程中引入更多延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T09:53:24.957

您可以非常轻松地在 Rhodes 应用程序中停用过渡以试一试。在 Rhodes 应用程序的 app 文件夹内的 layout.erb 文件中，您可以找到：

```
// Uncomment these options in case of performance problem in pages transition
//$.mobile.defaultPageTransition = 'none';
//$.mobile.defaultDialogTransition = 'none';
//$.mobile.ajaxEnabled = false;
//$.mobile.pushStateEnabled = false;
//$.mobile.loadingMessageDelay = 50; // in ms 
```

只需取消注释并尝试一下。

# android - 垂直对齐重力没有响应

> ID：14164876
> 
> 赞同：6
> 
> 时间：2013-01-04T20:58:08.670
> 
> 标签：android, xml, layout

为什么这不会使视图中的内容居中？

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    android:layout_gravity="center_vertical"
    tools:context=".MainActivity">

    <EditText 
        android:id="@+id/messageTextField"
        android:layout_weight="1"
        android:inputType="number"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:hint="@string/messageTextFieldPlaceholder"
    />
    <Button
        android:id="@+id/sendButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/sendButtonTitle"
        android:onClick="sendMessage"
    />

</LinearLayout> 
```

我看到了一些关于垂直对齐的 SO 线程，我也看到[了这个](http://thinkandroid.wordpress.com/2010/01/14/how-to-position-views-properly-in-layouts/)，但我只有一个水平的 LinearLayout，所以设置重力会左右调整视图。

由于 LinearLayout 具有父级的尺寸，它不会填满整个屏幕吗？

不应该`android:layout_gravity="center_vertical"`在其尺寸的中心（垂直）对齐它的子视图吗？

在我完成的编码中，这对我来说是有意义的，那么为什么 android 没有意义呢？

我是否需要另一个垂直的 LinearLayout 来容纳其中的所有其他内容并与`android:layout_gravity="center_vertical"`?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-04T21:08:46.080

**`layout_gravity`：**
孩子可以提供给其父母的标准重力常数。

**`gravity`：**
指定如何在对象本身内放置对象的内容，包括 x 轴和 y 轴。

因此，如果您希望您的内容垂直居中，则`gravity`不需要`layout_gravity`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T21:08:55.200

而不是使用`android:layout_gravity="center_vertical"`，请使用`android:gravity="center_vertical"`，它会工作...... :)

# c# - CodeDOM 未编译

> ID：14164883
> 
> 赞同：3
> 
> 时间：2013-01-04T20:59:07.687
> 
> 标签：c#, codedom

我想为我的应用程序构建一个构建器，这是构建器的来源

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.CodeDom.Compiler;
using Microsoft.CSharp;

namespace MyAppBuilder
{

    public partial class Form1 : Form
    {
    public Form1()
    {
        InitializeComponent();
    }

    private void BuildBtn_Click(object sender, EventArgs e)
    {
        CompilerParameters Params = new CompilerParameters();
        Params.GenerateExecutable = true;

        Params.ReferencedAssemblies.Add("System.dll");
        Params.ReferencedAssemblies.Add("System.Drawing.dll");
        Params.ReferencedAssemblies.Add("System.Windows.Forms.dll");
        Params.ReferencedAssemblies.Add("System.Runtime.InteropServices.dll");
      //  Params.ReferencedAssemblies.Add("System.Diagnostics");
        Params.ReferencedAssemblies.Add("System.Threading.dll");
        Params.ReferencedAssemblies.Add("System.IO.dll");
       //Params.ReferencedAssemblies.Add("Microsoft.Win32.dll");
        Params.OutputAssembly = "output.exe";
        Params.CompilerOptions = " /target:winexe";
        string Source = Properties.Resources.LockerSource;
        CompilerResults results = new CSharpCodeProvider().CompileAssemblyFromSource(Params, Source);
        if (results.Errors.Count < 0)
        {
            MessageBox.Show("nice");
        }
        else
        {
            foreach (var error in results.Errors)
            {
                MessageBox.Show(error.ToString());
            }
        }
    }
}

} 
```

这是我要构建的应用程序的来源不要注意添加到 CsharpCodeProvider 的引用程序集

```
using System;
using System.Drawing;
using System.Windows.Forms;

namespace MyApp
{
        public partial class Form1 : Form
        {
            public Form1()
            {
                InitializeComponent();
                #region AddControls
                //Basic Form Seetings
                this.Text = "AppName";
                this.ControlBox = false;
                this.ShowInTaskbar = false;
                //Add Contidions TextBox
                RichTextBox conditions = new RichTextBox();
                this.Controls.Add(conditions);
                conditions.Width = this.Width;
                conditions.Height = this.Height / 2;
                conditions.BackColor = this.BackColor;
                conditions.BorderStyle = BorderStyle.None;
                conditions.Text =@"Sometext";
                conditions.Font = new Font(conditions.Font.FontFamily, 8, conditions.Font.Style | FontStyle.Bold);
                conditions.Location = new Point(0, 130);
                conditions.Enabled = false;
                this.Width += 15;
                //Add Contidions TextBox
                //Add CodeTextBox
                TextBox codeBox = new TextBox();
                this.Controls.Add(codeBox);
                codeBox.Width = this.Width - 60;
                codeBox.Location = new Point(20, 10);
                codeBox.TextAlign = HorizontalAlignment.Center;
                //Add CodeTextBox
                //Add DownloadButton
                Button DownloadBtn = new Button();
                this.Controls.Add(DownloadBtn);
                DownloadBtn.Location = new Point(19, 35);
                DownloadBtn.Width = 130;
                DownloadBtn.Height = 30;
                DownloadBtn.Text = "Download Code";
                Button SubmitBtn = new Button();
                this.Controls.Add(SubmitBtn);
                SubmitBtn.Location = new Point(this.Width - 169, 35);
                SubmitBtn.Width = 130;
                SubmitBtn.Height = 30;
                SubmitBtn.Text = "Submit";
                Button VerifyEmailBtn = new Button();
                this.Controls.Add(VerifyEmailBtn);
                VerifyEmailBtn.Location = new Point(19, 70);
                VerifyEmailBtn.Width = codeBox.Width + 1;
                VerifyEmailBtn.Height = 30;
                VerifyEmailBtn.Text = "Click here if you need to verify your email";
                //Add DownloadButton
                #endregion
            }

        }
    } 
```

但我收到以下错误

> 找不到类型或命名空间名称“Form”（您是否缺少 using 指令或程序集引用）

我理解错误只是无法理解我可能会丢失什么。

我希望我能得到一些回应，因为我真的被困住了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T21:17:17.073

您需要为应用添加合适的入口点。

查看 VS.NET 作为模型生成的 Program.cs 中的 Main() 函数。

您还需要删除 InitializeComponent() 调用。

在这些更改之后，它对我来说编译得很好。

这是我拥有的代码（出于我的目的，我将您的程序变成了一个字符串）：

```
using Microsoft.CSharp;
using System;
using System.CodeDom.Compiler;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace formcomp
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            CompilerParameters Params = new CompilerParameters();
            Params.GenerateExecutable = true;

            Params.ReferencedAssemblies.Add("System.dll");
            Params.ReferencedAssemblies.Add("System.Drawing.dll");
            Params.ReferencedAssemblies.Add("System.Windows.Forms.dll");
            Params.ReferencedAssemblies.Add("System.Runtime.InteropServices.dll");
            Params.ReferencedAssemblies.Add("System.Threading.dll");
            Params.ReferencedAssemblies.Add("System.IO.dll");
            Params.OutputAssembly = "output.exe";
            Params.CompilerOptions = " /target:winexe";
            string Source = GetSource();
            CompilerResults results = new CSharpCodeProvider().CompileAssemblyFromSource(Params, Source);
            if (results.Errors.Count < 0)
            {
                MessageBox.Show("nice");
            }
            else
            {
                foreach (var error in results.Errors)
                {
                    MessageBox.Show(error.ToString());
                }
            }
        }

        private string GetSource()
        {
            string code = "using System; " + Environment.NewLine;
            code += "using System.Drawing;" + Environment.NewLine;
            code += "using System.Windows.Forms;" + Environment.NewLine;
            code += "namespace MyApp" + Environment.NewLine;
            code += "{" + Environment.NewLine;
            code += "public class Program" + Environment.NewLine;
            code += "{" + Environment.NewLine;
            code += "[STAThread]" + Environment.NewLine;
            code += "static void Main()" + Environment.NewLine;
            code += "{" + Environment.NewLine;
            code += "Application.EnableVisualStyles();" + Environment.NewLine;
            code += "Application.SetCompatibleTextRenderingDefault(false);" + Environment.NewLine;
            code += "Application.Run(new Form1());" + Environment.NewLine;
            code += "}" + Environment.NewLine;
            code += "}" + Environment.NewLine;
            code += "        public partial class Form1 : Form" + Environment.NewLine;
            code += "        {" + Environment.NewLine;
            code += "            public Form1()" + Environment.NewLine;
            code += "            {" + Environment.NewLine;
            code += "                #region AddControls" + Environment.NewLine;
            code += "                //Basic Form Seetings" + Environment.NewLine;
            code += "                this.Text = \"AppName\";" + Environment.NewLine;
            code += "                this.ControlBox = false;" + Environment.NewLine;
            code += "                this.ShowInTaskbar = false;" + Environment.NewLine;
            code += "                //Add Contidions TextBox" + Environment.NewLine;
            code += "                RichTextBox conditions = new RichTextBox();" + Environment.NewLine;
            code += "                this.Controls.Add(conditions);" + Environment.NewLine;
            code += "                conditions.Width = this.Width;" + Environment.NewLine;
            code += "                conditions.Height = this.Height / 2;" + Environment.NewLine;
            code += "                conditions.BackColor = this.BackColor;" + Environment.NewLine;
            code += "                conditions.BorderStyle = BorderStyle.None;" + Environment.NewLine;
            code += "                conditions.Text =\"Sometext\";" + Environment.NewLine;
            code += "                conditions.Font = new Font(conditions.Font.FontFamily, 8, conditions.Font.Style | FontStyle.Bold);" + Environment.NewLine;
            code += "                conditions.Location = new Point(0, 130);" + Environment.NewLine;
            code += "                conditions.Enabled = false;" + Environment.NewLine;
            code += "                this.Width += 15;" + Environment.NewLine;
            code += "                //Add Contidions TextBox" + Environment.NewLine;
            code += "                //Add CodeTextBox" + Environment.NewLine;
            code += "                TextBox codeBox = new TextBox();" + Environment.NewLine;
            code += "                this.Controls.Add(codeBox);" + Environment.NewLine;
            code += "                codeBox.Width = this.Width - 60;" + Environment.NewLine;
            code += "                codeBox.Location = new Point(20, 10);" + Environment.NewLine;
            code += "                codeBox.TextAlign = HorizontalAlignment.Center;" + Environment.NewLine;
            code += "                //Add CodeTextBox" + Environment.NewLine;
            code += "                //Add DownloadButton" + Environment.NewLine;
            code += "                Button DownloadBtn = new Button();" + Environment.NewLine;
            code += "                this.Controls.Add(DownloadBtn);" + Environment.NewLine;
            code += "                DownloadBtn.Location = new Point(19, 35);" + Environment.NewLine;
            code += "                DownloadBtn.Width = 130;" + Environment.NewLine;
            code += "                DownloadBtn.Height = 30;" + Environment.NewLine;
            code += "                DownloadBtn.Text = \"Download Code\";" + Environment.NewLine;
            code += "                Button SubmitBtn = new Button();" + Environment.NewLine;
            code += "                this.Controls.Add(SubmitBtn);" + Environment.NewLine;
            code += "                SubmitBtn.Location = new Point(this.Width - 169, 35);" + Environment.NewLine;
            code += "                SubmitBtn.Width = 130;" + Environment.NewLine;
            code += "                SubmitBtn.Height = 30;" + Environment.NewLine;
            code += "                SubmitBtn.Text = \"Submit\";" + Environment.NewLine;
            code += "                Button VerifyEmailBtn = new Button();" + Environment.NewLine;
            code += "                this.Controls.Add(VerifyEmailBtn);" + Environment.NewLine;
            code += "                VerifyEmailBtn.Location = new Point(19, 70);" + Environment.NewLine;
            code += "                VerifyEmailBtn.Width = codeBox.Width + 1;" + Environment.NewLine;
            code += "                VerifyEmailBtn.Height = 30;" + Environment.NewLine;
            code += "                VerifyEmailBtn.Text = \"Click here if you need to verify your email\";" + Environment.NewLine;
            code += "                //Add DownloadButton" + Environment.NewLine;
            code += "                #endregion" + Environment.NewLine;
            code += "            }" + Environment.NewLine;
            code += "        }" + Environment.NewLine;
            code += "    }" + Environment.NewLine;
            return code;
        }
    }
} 
```

# r - 更改 igraph 标题的字体和颜色

> ID：14164887
> 
> 赞同：7
> 
> 时间：2013-01-04T20:59:27.893
> 
> 标签：r, igraph

我正在构建一个 igraph，并且希望能够更改图形标题的颜色和字体大小。

```
dput(df)
structure(list(Month = structure(c(15248, 15522), class = "Date"), 
    Value = c(1, 3)), .Names = c("Month", "Value"), row.names = 1:2, class = "data.frame")

g <- graph.data.frame(df)

 plot(g, layout =  layout.kamada.kawai,  vertex.label = V(g)$name,  vertex.label.color= "white",edge.arrow.size=0.5,  edge.curved=T, edge.label=E(g)$Freq, edge.label.color="pink", edge.label.font=5,vertex.shape="circle",edge.color="white", vertex.color="red", asp=0, main="This is my first igraph") 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-04T21:17:15.813

`main="..."`从函数中删除参数，`plot()`并在`plot(...)`使用设置大小和设置颜色的函数后。`title()``cex.main=``cex.col=`

```
plot(g, layout =  layout.kamada.kawai,  vertex.label = V(g)$name,  vertex.label.color= "white",edge.arrow.size=0.5,  edge.curved=T, edge.label=E(g)$Freq, edge.label.color="pink", edge.label.font=5,vertex.shape="circle",edge.color="white", vertex.color="red", asp=0)
title("This is my first igraph",cex.main=3,col.main="green") 
```

# iphone - 由于 removeFromSuperview，UITableView 滚动不流畅

> ID：14164891
> 
> 赞同：0
> 
> 时间：2013-01-04T20:59:48.560
> 
> 标签：iphone, ios, uitableview

是什么让 UITableView 上的滚动如此不稳定？在我看来，以下代码是罪魁祸首。我很难用其他东西代替这个逻辑。

```
for (UIView *view in cell.contentView.subviews) {
[view removeFromSuperview]; } 
```

这就是我正在做的事情。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

for (UIView *view in cell.contentView.subviews) {
    [view removeFromSuperview];
}

BGMArticleAbstract *articleAbstract = [self.section.articleAbstracts objectAtIndex:indexPath.row];
[cell.contentView addSubview:[self getHedlineFromArticleAbstract:articleAbstract]];
[cell.contentView addSubview:[self getThumbnailImageFromArticleAbstract:articleAbstract]];
[cell.contentView addSubview:[self getAbstractParaFromArticleAbstract:articleAbstract]];

cell.selectionStyle = UITableViewCellSelectionStyleNone;

return cell; } 
```

我在做，addSubview 到 contentview，因为我正在创建一个动态单元格高度。有什么办法可以使这个滚动视图工作顺利吗？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T21:13:11.167

您应该根据需要设计您的单元格。向单元格添加标签和您需要的任何内容，然后更改这些已经可用的子视图的内容。
如果您需要显示图像，请在单元格中添加一次`UIImageView`并仅更改其图像属性。文本字段等也是如此。

您这样做的方式使内置缓存无用，因为您一次又一次地重新生成所有子视图..

为了进一步提高性能，您可以自己绘制单元格。

苹果有一个非常好的示例项目：http: [//developer.apple.com/library/ios/#samplecode/AdvancedTableViewCells/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/AdvancedTableViewCells/Introduction/Intro.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T01:28:59.693

您是对的，问题是由您返回单元格的方式引起的。正确的模式如下...

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // see if cell contains our image views.  A reused cell will, but a new cell won't
    UIImageView *imageViewA = (UIImageView *)[cell viewWithTag:32];
    UIImageView *imageViewB = (UIImageView *)[cell viewWithTag:33];
    UIImageView *imageViewC = (UIImageView *)[cell viewWithTag:34];

    if (!imageViewA) {
        // the cell must be new, so create it's image views
        // you should be able to borrow most of this code from your getHeadline/thumbnail/etc methods.
        // the good news is that this relatively expensive code runs only for new
        // cells and there are only a few of those - only enough to fill the visible frame
        imageViewA = [[UIImageView alloc] initWithFrame:CGRectMake(/* frame it here */)];
        [cell.contentView addSubview:imageViewA];
        imageViewA.tag = 32;

        imageViewB = [[UIImageView alloc] initWithFrame:CGRectMake(/* frame it here */)];
        [cell.contentView addSubview:imageViewB];
        imageViewB.tag = 33;

        imageViewC = [[UIImageView alloc] initWithFrame:CGRectMake(/* frame it here */)];
        [cell.contentView addSubview:imageViewC;
        imageViewC.tag = 34;

        // this too, need only be done upon creation
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }

    // now, whether it's a new cell or a reused cell, we have image views 

    BGMArticleAbstract *articleAbstract = [self.section.articleAbstracts objectAtIndex:indexPath.row];

    // change your methods getHeadline... getThumbnail... etc to answer UIImages
    // not UIImageViews, which are setup only for new cells

    imageViewA.image = [self getHedlineFromArticleAbstract:articleAbstract]];
    imageViewB.image = [self getThumbnailImageFromArticleAbstract:articleAbstract]];
    imageViewC.image = [self getAbstractParaFromArticleAbstract:articleAbstract]];

    // as a side note, once you get these methods returning images (more like model objects)
    // rather than image views (view objects) they might be more appropriately placed
    // in the BGMArticleAbstract class rather than the view controller

    return cell;
} 
```

# reporting-services - SSRS 不弹出登录对话框

> ID：14164892
> 
> 赞同：0
> 
> 时间：2013-01-04T20:59:49.030
> 
> 标签：reporting-services, ssrs-2012

我正在 SQL Server 2012 Enterprise 上进行开发，但遇到了问题。当我访问**“报告服务配置管理器”**时，报告服务状态会显示`Started`，但是如果我有时在重新启动计算机时转到报告管理器 URL `http://<my computer name>/Reports`，我会看到一个登录对话框，然后 SSRS 工作正常，但有时我会得到这个：

![在此处输入图像描述](../Images/f44a38b23e76e03c6d6277b450a37a82.png)

我尝试了不同的浏览器，重新启动了 SSRS 服务，但似乎没有任何帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T21:28:16.583

我找到了解决方案，似乎 Skype 正在使用 SSRS 试图使用的 80 端口，这阻止了我进入报告服务。

您需要编辑 Skype 设置，转到工具->选项->高级->连接并取消选中“使用端口 80 和 443 作为传入连接的替代选项”

这解决了一切:)

# mesh - 在 Ogre 中加载地形并使用 Recast/Detour 创建导航网格

> ID：14164897
> 
> 赞同：0
> 
> 时间：2013-01-04T21:00:18.107
> 
> 标签：mesh, terrain, ogre, scene, navmesh

我是使用 Ogre 的新手，尤其是 Recast/Detour，我需要一些帮助。

我正在 Ogre 中加载地形，并使用 Recast/Detour 在其顶部创建导航网格。我想加载更复杂的地形，因为到目前为止，我只能加载据我所知不能包含其他对象（如建筑物等）的 .mesh 文件。我有两种方法可以做到这一点：

1) 使用 Blender 将 .obj 文件导出为 .scene 文件。然后使用第三方 .scene 加载器，例如 DotScene，将它们加载到 Ogre 中。然后我必须弄清楚如何让 Recast 在整个场景之上创建导航网格。

2) 或者使用 Ogre 的新地形加载系统，我还没有阅读太多内容。

因此，如果您从事过使用 Ogre 和 Recast/Detour 的项目，您是如何完成地形的加载和导航网格的创建的？

编辑：我找到了第三个选项，它可以让我保留当前的解决方案，但也可以加载复杂的地形。我想出了一种使用 Blender 将 Ogre 网格组合成一个巨大的网格文件的方法。我仍然可以将地形加载为 .scene，但导航网格创建过程不适用于以这种方式加载的实体，而加载的巨型网格可以使用我已经拥有的相同功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T23:34:23.087

我没有 Recast 或 Detour 的经验，因此无法真正评论您的问题，但我可以向您指出 OgreCrowd，这是一个与 Ogre::Terrain + Recast/Detour 一起使用并且是开源的项目。所以它可能会提供一些灵感/想法/指针：

[Ogre 论坛主题：OgreCrowd - 使用 Recast/Detour 的 Ogre 人群组件](http://www.ogre3d.org/forums/viewtopic.php?f=11&t=69781)

这个[相应的视频](http://www.youtube.com/watch?v=sJD4bRy0nKE)显示它可以处理地形以及它上面的其他对象，因此它与您的场景相匹配。

# asp.net-mvc - IIS 错误服务器可能未配置为访问请求的 URL

> ID：14164900
> 
> 赞同：5
> 
> 时间：2013-01-04T21:00:33.973
> 
> 标签：asp.net-mvc, asp.net-mvc-3, iis-7

我有以下设置：

1.  窗口服务器 2012
2.  视觉开发者 2012
3.  IIS 7\. 我已将 Web 配置文件中的身份验证类型从表单更改为 Windows，如下所示：-

但是当我尝试访问 ASP.NET MVC 站点时，出现以下错误：-

## “/”应用程序中的服务器错误。

访问被拒绝。说明：访问处理此请求所需的资源时出错。服务器可能未配置为访问请求的 URL。

错误消息 401.2.：未经授权：由于服务器配置，登录失败。根据您提供的凭据和 Web 服务器上启用的身份验证方法，验证您是否有权查看此目录或页面。请与 Web 服务器的管理员联系以获得更多帮助。

* * *

版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.17929

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-12-07T10:20:17.843

请更改 Web.config 文件

从

```
<system.web>
<authorization>
      <deny users="?" />
    </authorization>
</system.web> 
```

至

```
<system.web>
    <authorization>    
        <allow users="*" />
    </authorization>    
</system.web> 
```

还有 2 个用户的 Web.config

```
<system.web>
    <authorization>
      <allow users="DOMAIN_NAME\my_name,DOMAIN_NAME\USER_NAME" />
      <deny users="*" />
    </authorization>
 </system.web> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-15T04:58:42.297

我通过安装 server 2012 的 windows 身份验证功能解决了这个问题。跳转到控制面板/程序/添加 windows 功能。转到功能部分，展开 Web 服务器 (IIS)/Web 服务器/安全并安装“Windows 身份验证”回收您的应用程序池或 iisreset 使其生效

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-23T05:19:25.660

**如果您使用的是 Visual Studio 2012，您还可以在解决方案资源管理器**中左键单击该项目，然后在“属性”窗口中将**Windows 身份验证**属性更改为已**启用**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-30T10:37:00.160

我在 web config 中有以下配置。

```
<authorization>
  <deny users="?" />
  <allow users="*" />
</authorization> 
```

在登录失败时，我将重定向到一页。但是单击重定向页面中的任何按钮时，我收到了此错误。

我尝试了@jaydeep 的上述答案，它对我有用。 [https://stackoverflow.com/a/39092914/6665971](https://stackoverflow.com/a/39092914/6665971)

现在对于所有其他页面，它不会被授权，对于特定页面，我可以使用`server.transfer`函数重定向。

# java - Java - 如何使用一种实现覆盖自定义检查和未检查异常的 getMessage()？

> ID：14164901
> 
> 赞同：2
> 
> 时间：2013-01-04T21:00:33.270
> 
> 标签：java, exception, custom-exceptions

如何拥有`MyException`和`MyRuntimeException`使用相同的自定义`getMessage()`实现？

由于 Java 没有多重继承，我不知道该怎么做。目前我在两个类中都有重复的代码......

重要细节：`getMessage()`做this.class.getName()之类的东西。所以我确实需要`getMessage()`使用反射，因为我需要对象的类名进行本地化。

所以要么我需要一个解决我的第一个问题的解决方案，要么需要一个关于如何在静态方法中使用反射的解决方案，然后我可以使用一些两个异常都可以使用的实用程序类？

一种解决方案可能是某个辅助类中的静态方法，然后使用它：

return new Object() { }.getClass().getEnclosureClass().getEnclosureClass();

不是吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T21:08:45.833

尝试制作一个静态共享辅助函数来实现您的自定义 getMessage：

```
class MyException extends Exception {
    ....
    public String getMessage() {
        return ExceptionHelper.getMessage(this);
    }
}

class MyRuntimeException extends RuntimeException {
    ....
    public String getMessage() {
        return ExceptionHelper.getMessage(this);
    }
}

class ExceptionHelper {
    public static String getMessage(Exception e) {
        // your shared impl here
    }
} 
```

**编辑**- 如果您的 Exception 子类不仅仅是`getMessage`在它们之间复制粘贴的 impl，您可能也希望共享它。对上述内容稍作调整以将静态帮助程序转换为封装类将很好地处理此问题。

例如：创建一个名为 的类`ExceptionDetails`，该共享代码和变量（以及任何其他重复项）可以存在于其中，并且每个 Exception 子类都有自己的`ExceptionDetails`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T21:13:37.837

您必须将 getMessage() 的实际实现放入一个新的具体类中，并委托给该类的实例 in`MyException`和`MyRuntimeException`。

```
class MyExceptionMessage {
  public String getMessage() { ... }
}

class MyException extends Exception {
  private MyExceptionMessage messager;

  public String getMessage() { return messager.getMessage; }
}

class MyRuntimeException extends RuntimeException {
  private MyExceptionMessage messager;

  public String getMessage() { return messager.getMessage; }
} 
```

您可以在每个异常类的构造函数中创建 MyExceptionMessage 的实例，或者以其他方式。正如您所指出的，您被单继承所困，因此如果您想在两个类之间重用实现，就无法避免委托。

正如 Chris 所指出的，在他的回答中，静态辅助方法也很有意义。至少在您的消息策略足够复杂以保证您可以编写一些实例之前。

编辑：

要访问异常类的名称，请将某些内容传递给`MyExceptionMessage`构造函数 - 您可以传入异常对象或其类或类的名称。您还可以定义一个您的异常实现的接口，其中包含一个方法，该方法可以告诉消息传递者它需要知道的任何信息：

```
interface Messagable {
  public String getMessageFragment();
}

class MyExceptionMessage {
  public String getMessage(Messageable) { 
    return "something" + messagable.getMessageFragment() + "something else";
  }
}

class MyException extends Exception implements Messagable {
  private MyExceptionMessage messager;
  public String getMessage() { 
    return messager.getMessage(this);
  }
}

// class MyRuntimeException would have a similar getMessage() implementation 
```

# asp.net - ReadXmlSchema定义的DataSet：为什么填充后列数据类型会改变？

> ID：14164902
> 
> 赞同：1
> 
> 时间：2013-01-04T21:00:34.797
> 
> 标签：asp.net, vb.net, .net-4.0, xsd, .net-2.0

我有一个将数据库调用结果导出到 CSV 文件的过程。数据类型和文件格式必须与特定格式匹配，以便文件可以上传到外部系统。这个过程已经在 ASP.NET (.NET 2.0) 网络表单上运行了大约 7 或 8 年，突然（过去 6-18 个月的某个时间）它不像以前那样工作了。可能是在客户端服务器上安装了 .NET 4.0 之后，或者可能是在其他一些框架更新（？）或 Windows 更新（？）或提供程序更新（？）之后。我们的 DLL 几年来没有变化。我想用尽可能少的黑客攻击和削减来修复这个遗留过程。

导出三种数据类型：整数、字符串和小数。**问题是所有整数列现在都被导出为小数。**CSV 导出库查看列的数据类型以确定正确的输出格式，因此我使用 XSD 文件在填充之前定义我的 DataSet。这是 XSD 文件的简化示例：

```
<?xml version="1.0" standalone="yes"?>
<xs:schema id="FDSR" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
  <xs:element name="FDSR" msdata:IsDataSet="true" msdata:Locale="en-CA">
    <xs:complexType>
      <xs:choice maxOccurs="unbounded">
        <xs:element name="TBLEXPORT">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="INTCOLUMN1" type="xs:integer" minOccurs="0" />
              <xs:element name="STRCOLUMN2" type="xs:string" minOccurs="0" />
              <xs:element name="DBLCOLUMN3" type="xs:decimal" minOccurs="0" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:choice>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

为每列定义的数据类型在数据加载后会持续存在，但现在它们会被数据加载重置。例如：

```
Dim ds as New DataSet
ds.ReadXmlSchema("MyFile.xsd")

' Breakpoint here: 
' ds.Tables(0).Columns(0).DataType shows: {Name = "Int64" FullName = "System.Int64"}

Dim db as New DatabaseCall("my db call...")    
ds = db.ReturnData()

' Breakpoint here: 
' ds.Tables(0).Columns(0).DataType now shows: {Name = "Decimal" FullName = "System.Decimal"}

GenerateCSVOutput(ds) 
```

**如何在数据库调用后强制`integer`列保持不变？`integer`或者如何在填充数据集后更改数据类型？**

此代码已为发布进行了简化，但基本上 db.ReturnData() 正在调用 Oracle 存储过程来进行一些处理并返回`System.Data.OracleClient.OracleDataAdapter.Fill(dataset)`用于填充 DataSet 的数据。Oracle中没有`integer`列，因此源表的列定义为`NUMBER(1,0)`. 它肯定输出了正确的精度，我只是不明白为什么 DataSet 中的列类型在明确定义为整数时会突然发生变化。不幸的是，CSV 文件需要上传到外部政府系统，该系统不`1.0`接受`1`...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:55:53.870

**解决方法：** [克隆数据集，更改数据类型，复制数据](https://stackoverflow.com/questions/9028029/how-to-change-datatype-of-a-datacolumn-in-a-datatable)。

```
Dim dsExport as New DataSet
'dsExport.ReadXmlSchema("MyFile.xsd") ' Don't bother, this no longer works

Dim db as New DatabaseCall("my db call...")    
dsExport = db.ReturnData()

' Clone the structure of dsExport, while empty change the datatype(s) as required, then copy the data in
Dim dsClone As DataSet = dsExport.Clone
dsClone.Tables("tblExport").Columns("INTCOLUMN1").DataType = System.Type.GetType("System.Int32")
For Each row As DataRow In dsExport.Tables("tblExport").Rows
    dsClone.Tables("tblExport").ImportRow(row)
Next

GenerateCSVOutput(dsClone) 
```

# mysql - 添加 ORDER BY 时查询真的很慢

> ID：14164905
> 
> 赞同：0
> 
> 时间：2013-01-04T21:00:38.773
> 
> 标签：mysql

我有一个相当复杂的视图，它连接多个表和一个简单但必须处理数百万条记录的视图：

```
SELECT wo.id_primary       AS id_primary, 
       wo.id_station       AS id_station, 
       wo.id_stage         AS id_stage, 
       wo.id_type          AS id_type, 
       wo.id_options       AS id_options, 
       wo.id_warehouse     AS id_warehouse, 
       wo.id_customer      AS id_customer, 
       wo.id_manufacturer  AS id_manufacturer, 
       wo.date_advanced    AS date_advanced, 
       wo.date_received    AS date_received, 
       wo.date_approved    AS date_approved, 
       wo.date_promised    AS date_promised, 
       wo.date_inspected   AS date_inspected, 
       wo.date_scheduled   AS date_scheduled, 
       wo.date_completed   AS date_completed, 
       sh.date_shipped     AS date_shipped, 
       wo.rpi_revision     AS rpi_revision, 
       wo.rpi_number       AS rpi_number, 
       wo.purchase_order   AS purchase_order, 
       wo.serial_number    AS serial_number, 
       wo.model_number     AS model_number, 
       wo.part_number      AS part_number, 
       wo.part_name        AS part_name, 
       wo.quantity         AS quantity, 
       wo.status           AS status, 
       wo.quote            AS quote, 
       wo.notes            AS notes, 
       sm.name             AS manufacturer_name, 
       wh.name             AS warehouse_name, 
       sc.name             AS customer_name, 
       ss.name             AS station_name, 
       sc.certs            AS customer_certifications, 
       sc.address1         AS customer_address, 
       sc.city             AS customer_city, 
       sc.email            AS customer_email, 
       sc.phone1           AS customer_phone, 
       sc.postal           AS customer_postal, 
       sc.fax              AS customer_fax, 
       sh.shipped          AS shipped, 
       sh.waybill          AS waybill, 
       sh.invoice          AS invoice, 
       wq.type_currency    AS type_currency, 
       wq.date_quoted      AS date_quoted, 
       wq.grand_total      AS grand_total, 
       Round(( ( sh.date_shipped - IF(( wo.date_approved = 
0 ), sh.date_shipped, wo.date_approved) ) / 
86400 ), 2) AS TAT, 
ws.stations         AS stations 
FROM   aerospace_erp.erp_workorder wo 
       LEFT JOIN aerospace_erp.system_manufacturers sm 
              ON wo.id_manufacturer = sm.id_primary 
       LEFT JOIN aerospace_erp.system_stations ss 
              ON wo.id_station = ss.id_primary 
       LEFT JOIN aerospace_erp.crm_customer sc 
              ON wo.id_customer = sc.id_primary 
       LEFT JOIN aerospace_erp.list_workorder_warehouse wh 
              ON wo.id_warehouse = wh.id_primary 
       LEFT JOIN aerospace_erp.erp_shipping sh 
              ON wo.id_primary = sh.id_workorder 
       LEFT JOIN aerospace_crm.crm_quoting wq 
              ON wo.id_primary = wq.id_workorder 
       LEFT JOIN aerospace_erp.erp_workorder_scope ws 
              ON wo.id_primary = ws.id_primary 
```

这也在视图中。erp_workorder_scope 是嵌套的 VIEW，它很简单，但由于每次都必须处理大量数据，因此需要相当长的时间。

上面的整个 VIEW 在没有 erp_workorder_scope JOIN 的情况下在大约 15 秒或大约 1.5 秒内执行

我可以忍受 15 秒，但是当我将 ORDER BY xxx 添加到 VIEW 时，它实际上运行了 45 分钟。

这个值也会根据用户的排序而改变，所以我不能在 VIEW 本身中硬编码这个标准。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:33:05.130

试试这个技巧

```
select * from (
SELECT wo.id_primary       AS id_primary, 
       wo.id_station       AS id_station, 
       wo.id_stage         AS id_stage, 
       wo.id_type          AS id_type, 
       wo.id_options       AS id_options, 
       wo.id_warehouse     AS id_warehouse, 
       wo.id_customer      AS id_customer, 
       wo.id_manufacturer  AS id_manufacturer, 
       wo.date_advanced    AS date_advanced, 
       wo.date_received    AS date_received, 
       wo.date_approved    AS date_approved, 
       wo.date_promised    AS date_promised, 
       wo.date_inspected   AS date_inspected, 
       wo.date_scheduled   AS date_scheduled, 
       wo.date_completed   AS date_completed, 
       sh.date_shipped     AS date_shipped, 
       wo.rpi_revision     AS rpi_revision, 
       wo.rpi_number       AS rpi_number, 
       wo.purchase_order   AS purchase_order, 
       wo.serial_number    AS serial_number, 
       wo.model_number     AS model_number, 
       wo.part_number      AS part_number, 
       wo.part_name        AS part_name, 
       wo.quantity         AS quantity, 
       wo.status           AS status, 
       wo.quote            AS quote, 
       wo.notes            AS notes, 
       sm.name             AS manufacturer_name, 
       wh.name             AS warehouse_name, 
       sc.name             AS customer_name, 
       ss.name             AS station_name, 
       sc.certs            AS customer_certifications, 
       sc.address1         AS customer_address, 
       sc.city             AS customer_city, 
       sc.email            AS customer_email, 
       sc.phone1           AS customer_phone, 
       sc.postal           AS customer_postal, 
       sc.fax              AS customer_fax, 
       sh.shipped          AS shipped, 
       sh.waybill          AS waybill, 
       sh.invoice          AS invoice, 
       wq.type_currency    AS type_currency, 
       wq.date_quoted      AS date_quoted, 
       wq.grand_total      AS grand_total, 
       Round(( ( sh.date_shipped - IF(( wo.date_approved = 
0 ), sh.date_shipped, wo.date_approved) ) / 
86400 ), 2) AS TAT, 
ws.stations         AS stations 
FROM   aerospace_erp.erp_workorder wo 
       LEFT JOIN aerospace_erp.system_manufacturers sm 
              ON wo.id_manufacturer = sm.id_primary 
       LEFT JOIN aerospace_erp.system_stations ss 
              ON wo.id_station = ss.id_primary 
       LEFT JOIN aerospace_erp.crm_customer sc 
              ON wo.id_customer = sc.id_primary 
       LEFT JOIN aerospace_erp.list_workorder_warehouse wh 
              ON wo.id_warehouse = wh.id_primary 
       LEFT JOIN aerospace_erp.erp_shipping sh 
              ON wo.id_primary = sh.id_workorder 
       LEFT JOIN aerospace_crm.crm_quoting wq 
              ON wo.id_primary = wq.id_workorder 
       LEFT JOIN aerospace_erp.erp_workorder_scope ws 
              ON wo.id_primary = ws.id_primary 
)
order by xxx 
```

# php - PHP没有获取参数

> ID：14164911
> 
> 赞同：-1
> 
> 时间：2013-01-04T21:01:06.123
> 
> 标签：php, url, get

我访问我的页面，通过 URL 传递一些参数：

> www.mypage.com/page.php?aID=4091cdcd-773d-4ca5-bab2-41e1188870a9&sID=1_MX4yMjI1MTgxMn4xMjcuMC4wLjF-V2VkIERlYyAyNiAwOTo1MDoyNiBQU1QgMjAxMn4wLjg1MjA4MTF-&nam=Gab=Gab77777&tel=

然后在我的PHP代码中我有：

```
if(isset($_GET['sID'])) {
    $sID = $_GET['sID'];
}
if(isset($_GET['aID'])) {
    $aID = $_GET['aID'];
}
if(isset($_GET['nam'])) {
    $nam = $_GET['nam'];
}
if(isset($_GET['tel'])) {
    $tel = $_GET['tel'];
} 
```

`$nam`检索and没有问题，`$tel`但总是得到一个空字符串。我试过使用双引号，但没有任何区别。`$aID``$sID``(isset($_GET["aID"]))`

字符串中是否有非法字符或您可以通过 URL 传递的变量大小有限制？如何获取变量`$aID`和`$sID`？

```
$query = "INSERT INTO myTable (ArchiveID, SessionID, Name, Tel) VALUES ('$aiD', '$siD', '$nam', '$tel' )";

echo $query; 
```

Echo $query 的输出是：

> INSERT INTO myTable (ArchiveID, SessionID, Name, Tel) VALUES ('', '', 'Gab', '7777777777' )

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T21:09:15.273

测试您的网址，我得到以下结果：

```
大批
(
    [aID] => 4091cdcd-773d-4ca5-bab2-41e1188870a9
    [sID] => 1_MX4yMjI1MTgxMn4xMjcuMC4wLjF-V2VkIERlYyAyNiAwOTo1MDoyNiBQU1QgMjAxMn4wLjg1MjA4MTF-
    [nam] => 加布
    [电话] => 7777777777
)
```

因此，我不确定你得到一个空字符串是什么意思。您的代码中确实有错字，其中`$tel`引用`$_GET['aID']`. 我建议您验证您的代码。

我建议您也使用`$_SERVER['REQUEST_METHOD']`来验证您的脚本是否正在使用`GET`.

**更新**

根据您更新的查询，您的情况似乎不正确。**变量名区分大小写。**

```
$query = "INSERT INTO ... VALUES ('$aiD', '$siD', '$nam', '$tel' )";
                                     ^ ^
```

应该：

```
$query = "INSERT INTO ... VALUES ('$aID', '$sID', '$nam', '$tel' )";
```

1.  **开发 PHP 时，您必须启用最高级别的错误报告和日志记录**。
2.  **你必须检查你调用的方法的返回值，看看他们是否做了你认为他们做的事情。如果出现故障，您必须查找更多错误信息。**
3.  **您必须查看准备好的语句以防止 SQL 注入。**

是的，`mysql_*`功能已被弃用。不要将它用于新代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T21:13:15.203

您注意到在您的 sql 语句中您没有调用您定义的变量：

```
$query = "INSERT INTO myTable (ArchiveID, SessionID, Name, Tel) VALUES ('$aiD', '$siD', '$nam', '$tel' )"; 
```

应该：

```
$query = "INSERT INTO myTable (ArchiveID, SessionID, Name, Tel) VALUES ('$aID', '$sID', '$nam', '$tel' )"; 
```

并且看起来 njk 更新了他的答案以反映这一点，因此他的答案应该归功于他。

# css - Rails：从 CSS 加载图像

> ID：14164915
> 
> 赞同：2
> 
> 时间：2013-01-04T21:01:40.153
> 
> 标签：css, ruby-on-rails, less, asset-pipeline

在我看来，我可以使用这行代码加载图像：（`<div id="bglion"><%= image_tag("BG-LION6.png")%></div>`这行得通），但我想从 CSS 文件加载图像。

在阅读了arround之后，我尝试了这个：

```
#bglion {src: background:url('BG-LION6.png');}
#bglion {src: asset-url('BG-LION6.png');}
#bglion {src: asset-url('BG-LION6.png', image);} 
```

...但图片不会加载到页面上。我怎样才能让它工作？

（图片在 /assets/images 中）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T21:09:50.803

我认为你必须做几件事。您的 CSS 可能应该更符合以下内容：

```
#bglion { background: image-url('BG-LION6.PNG'); } 
```

`background`是您实际尝试设置的 CSS 属性。`src`不是 CSS 属性。`image-url`是一个指向您的图像资产文件夹的 Rails 路径助手。我相信如果你只是使用`asset-url`它指向你的整个资产文件夹，你仍然必须指定你的图像在图像文件夹中。

其次，如果您`div`不再包含其中的图像，它将折叠到 0 的宽度和高度，因为没有任何东西可以定义它的尺寸。您必须向包装器 div 添加更多 CSS 以定义图像的尺寸。所以是这样的：

```
#bglion { background: image-url('BG-LION6.PNG'); width: 100px; height: 100px; } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T21:05:11.803

尝试这样做：

```
#bglion { background: url("/BG-LION6.png"); } 
```

或者

```
#bglion { background: url("/assets/BG-LION6.png"); } 
```

取决于您使用的 Rails 版本以及您将资产设置在哪个文件夹。

访问资产时，您应该始终将路径设为绝对路径而不是相对路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T21:14:13.620

您可以将您的 css 文件更改为具有 css.erb 扩展名，然后执行类似这样的操作

```
#bglion {
background-image: url(<%=asset_path "BG-LION6.png"%>);
} 
```

# javascript - jquery 工具验证器不清除由 javascript 设置的输入的错误

> ID：14164917
> 
> 赞同：1
> 
> 时间：2013-01-04T21:01:53.157
> 
> 标签：javascript, jquery, jquery-tools

我有两种类型的字段可以很好地验证，但是这些值是由 javascript 设置的，并且这些输入的错误没有被清除。一种是来自 jquery 工具的日期输入。另一种是手写的，通过js根据radio选择设置输入。表格位于叠加层上，因此这可能会使事情变得有些复杂。

这应该是直截了当的。

```
<input class="date" id="startDate" name="meters[0].startDate" required="required"/> 
```

另一个是隐藏的输入，我希望在其中显示消息

风格：

```
 /* workaround for validation message of psuedo hidden input for meter number */
    .noShow {
        height: 0;
        padding: 0;
        border: none;
        margin: -20px 0 0 100px;
    } 
```

标签：

```
<input class="noShow" data-message="You must select a meter from above search results." id="meterNumber" name="meters[0].number" required="required"/> 
```

单选按钮更改脚本：

```
$('input[name="selectedMeter"]').change(function() {
     $('#meterNumber').val($('input[name="selectedMeter"]:checked').val());
 }); 
```

我尝试捕获 dateinput 的更改事件并触发各种事件。如果我转到输入并手动进行键输入，该消息将清除。我无法在代码中模拟这一点，不确定 dateinput 内部会发生什么。

谢谢

# android - 在 Eclipse 中预览特定于分辨率的布局

> ID：14164918
> 
> 赞同：0
> 
> 时间：2013-01-04T21:01:56.953
> 
> 标签：android, xml, eclipse, layout

我`layout-976x600`在我的 android 项目中添加了一个文件夹，用于特定分辨率的布局。一切正常，但我无法在 Eclipse（4.2.1 Mac OS X Mountain Lion）中预览布局。

在“图形布局”选项卡中，我只有一个空白调色板、查看区域，并且“正在加载编辑器”文本永远显示在信息框中。是否可以在这里进行预览，或者我是否被困在普通`layout`文件夹中工作并在完成后移动？

* * *

**编辑：** 最终通过重命名文件夹来解决这个问题。奇怪的是，如果我重命名文件夹、打开文件、重命名并*最后**再次*打开它，有时它会起作用。似乎是 Eclipse 的问题。无论如何，我应该使用合法标识符，所以我将其标记为正确的解决方案。

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:29:23.057

layout-976x600 是无效的名称。只有有限的限定符列表可以应用于资源文件夹。此[页面](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)将为您提供帮助。*

# java - 高速 Java 节拍器

> ID：14164921
> 
> 赞同：5
> 
> 时间：2013-01-04T21:02:16.410
> 
> 标签：java, audio, jmf

作为一项练习，我正在尝试使用 Thread.sleep 作为计时器和 JMF 来创建一个带有 Java 的节拍器。它工作得很好，但出于某种原因，JMF 似乎只以每分钟最多 207 拍的速度播放声音。

**来自我的节拍器课：**

```
public void play() {
    soundPlayer.play();
    waitPulse();        
    play();
} 
```

**从我的 SoundPlayer 类：**

```
public void play() {
    new Thread(new ThreadPlayer()).start();
}

private class ThreadPlayer implements Runnable {
    public void run() {
        System.out.println("Click");
        player.setMediaTime(new Time(0));
        player.start();
    }   
} 
```

我已经让 SoundPlayer.play() 作为一个线程来测试它是否会有所作为，但事实并非如此。**我可以轻松地将速度更改为大约 207bpm，但即使我将计时器设置为 1000bpm，声音的播放速度也不会比大约 207bpm 快**。

我已经将`System.out.println("Click");`ThreadPlayer.run() 放在里面，以检查我的循环是否正常工作——它是。

问题似乎与我对 JMF 的实现有关。我很确定有一个简单的解决方案，有人可以帮助我吗？

非常感谢你的帮助！:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T22:02:16.357

关于 Thread.sleep() 不可靠的答案是正确的：你不能指望它在你指定的时间内返回。事实上，我很惊讶您的节拍器完全可用，尤其是当您的系统处于负载状态时。阅读 Thread.sleep() 的文档以获取更多详细信息。Max Beikirch 关于 MIDI 的回答是一个很好的建议：MIDI 处理时序非常好。

但是你问如何用音频做到这一点。诀窍是打开一个音频流并在节拍器咔嗒声之间填充静音，然后将节拍器咔嗒声插入您想要的位置。当您这样做时，您的声卡会以恒定速率播放样本（无论它们是否包含咔嗒声或静音）。这里的关键是保持音频流打开并且永远不要关闭它。那么，时钟是音频硬件，而不是您的系统时钟——这是一个微妙但重要的区别。

因此，假设您正在生成 44100 Hz 的 16 位单声道样本。这是一个以请求的速率创建咔哒声的函数。请记住，这种咔哒声对扬声器（和您的耳朵）不利，因此如果您实际使用它，请以低音量播放。（此外，此代码未经测试——它只是为了演示这个概念）

```
int interval = 44100; // 1 beat per second, by default
int count = 0;
void setBPM( float bpm ) {
    interval = ( bpm / 60 ) * 44100 ;
}
void generateMetronomeSamples( short[] s ) {
    for( int i=0; i<s.length; ++i ) {
       s = 0;
       ++count;
       if( count == 0 ) {
          s = Short.MAX_VALUE;
       }
       if( count == interval ) {
          count = 0;
       }
    }
} 
```

使用 setBPM 设置速度后，您可以播放通过重复调用 generateMetronomeSamples() 函数生成的样本，并使用 JavaSound 将输出流式传输到扬声器。（请参阅 JSResources.org 以获得良好的教程）

一旦你有了这个工作，你可以用你从 WAV 或 AIFF 或短音或其他任何东西中获得的声音来代替刺耳的咔嗒声。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T21:27:37.383

就像 Jamie Duby 说的那样，仅仅因为你告诉线程休眠 1 毫秒，并不意味着它会在恰好 1 毫秒时被回调。唯一的保证是自从您调用 Thread.sleep(); 以来至少已经过了一毫秒。实际上，处理器无法以足够快的速度处理代码以每毫秒播放一次哔声，这就是您看到延迟的原因。如果你想要一个戏剧性的例子，制作一个自制的计时器类并尝试让它以一毫秒为一整分钟，你会看到计时器关闭了很多。

在这里真正值得回答的人是 Max Beikrich，Midi 是您能够产生所需输出的唯一方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T21:11:19.700

我的假设是，也许其他人可以跳到这里，线程运行时间取决于线程调度程序的突发奇想。您无法保证 JVM 需要多长时间才能返回该线程。此外，看到 JVM 作为机器上的一个进程运行，并且受操作系统的进程调度程序的影响，您至少看到了两个级别的不可预测性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T21:08:31.693

慢慢来，看看 MIDI！- [http://www.ibm.com/developerworks/library/it/it-0801art38/](http://www.ibm.com/developerworks/library/it/it-0801art38/)或[http://docs.oracle.com/javase/tutorial/sound/TOC.html](http://docs.oracle.com/javase/tutorial/sound/TOC.html)。这是与计算机发出声音相关的所有问题的最佳解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T17:00:04.177

我作为音乐家的经验比程序员多得多，但我刚刚完成了一个我不久前开始的节拍器应用程序，我把项目搁置了一段时间，因为我不明白为什么我遇到了和你一样的问题. 是的 Thread.sleep() 可能不可靠，但我设法使用该方法制作了一个好的节拍器。

我看到你提到尝试`ExecutorService`我不认为使用并发类会解决你的问题。我的猜测是它的系统资源问题，我很确定 MIDI 是节拍器的方式。我强迫我的学生用节拍器练习，我用过很多，我从来没有太在意节拍的音频质量，时间更重要，MIDI 将比任何其他音频文件快得多. 我使用`javax.sound.midi`了 Sound API 中的库。我怀疑这会解决你的问题。

当它正常工作时，您可能会注意到您的滴答声不均匀，这是由于 Thread.sleep() 方法不是很可靠。我如何解决这个问题是通过使用`System.nanoTime()`方法而不是方法在纳秒内完成所有计算`System.currentTimeMillis()`，只是不要忘记在将睡眠时间传递给 Thread.sleep() 方法之前转换回毫秒。

我不想在这里发布我的节拍器的代码，以防你想自己弄清楚，但如果你想看到它，只需给我发电子邮件 kevin.bigler3@gmail.com 和我很乐意将其发送给您。祝你好运。

# c# - 处理 UserControl 属性的正确方法？

> ID：14164922
> 
> 赞同：1
> 
> 时间：2013-01-04T21:02:27.657
> 
> 标签：c#, xaml, windows-8, windows-runtime

在我的 Windows 应用商店应用程序中，我有一个 CueAnswerButton 用户控件。它包含一个绑定到`{Binding NormalImage}`视图模型中的图像控件。但是，我在 CueAnswerButton 中有其他控件和属性，只要绑定的属性更改，就需要更新它们（我想在 CueAnswerButton 更改时执行代码）。

我该怎么做？

我发现[其他文章](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.updatesourcetrigger.aspx)解释了类似的事情，但不完全是。也许我不知道用来找到答案的正确术语。

谢谢你的帮助。

```
// View data model for a cue answer button.

public class CueAnswerViewData : DependencyObject
{
  public CueAnswerViewData()
  {
  }

  public const string NormalImagePropertyTag = "NormalImageProperty";
  public static readonly DependencyProperty NormalImageProperty =
     DependencyProperty.Register(
         NormalImagePropertyTag,
         typeof(ImageSource),
         typeof(CueAnswerViewData),
         new PropertyMetadata(null));
  public ImageSource NormalImage
  {
    get
    {
      return (ImageSource)GetValue(
        NormalImageProperty);
    }
    set
    {
      SetValue(NormalImageProperty, value);
    }
  } 
```

和 CueAnswerButton.xaml：

```
 <Grid>
    <Button x:Name="m_button" 
            HorizontalAlignment="Stretch" 
            VerticalAlignment="Stretch" 
            BorderThickness="0"
            />

    <Image x:Name="m_image" 
           HorizontalAlignment="Stretch" 
           VerticalAlignment="Stretch" 
           Stretch="Fill"
           Source="{Binding NormalImage}" 
           />

    ... 
```

基本上，每当 ViewData 上的 NormalImage 属性发生变化时，我都想调用 CueAnswerButton.updateSkinnableProperties() 。是的，这是 wp7 应用程序的一个端口 :)，它仍在进行中。

```
private void updateSkinnableProperties()
{
  bool skinned = isSkinned();

  m_image.IsHitTestVisible = skinned;
  m_button.IsHitTestVisible = !skinned;

  Background = m_correctHint ? m_correctAnswerGreenBrush : null;
  m_textbox.Background = m_correctHint ? m_correctAnswerGreenBrush : null;
  m_button.Background = m_correctHint ? m_correctAnswerGreenBrush : 
    m_phoneBackgroundBrush;

  m_button.BorderThickness = (skinned || m_correctHint) ?
    m_zeroThickness : m_phoneBorderThickness;

  m_textbox.Foreground = (skinned || m_correctHint) ?
    m_blackBrush : m_phoneForegroundBrush;

  m_button.Padding = skinned ?
    m_zeroThickness : m_phoneTouchTargetOverhang;

  if (!skinned)
  {
    m_button.Content = null;
  }

  updateSkinnableStateBasedProperties();
}

public bool isSkinned()
{
  bool skinned = false;

  if (m_normalImage != null && m_normalImage.ToString().Length > 0)
  {
    skinned = true;
  }

  return skinned;
}

private void updateSkinnableStateBasedProperties()
{
  if (!m_correctHint && isSkinned())
  {
    m_image.Visibility = Visibility.Visible;

    if (m_pressed && m_pressedImage != null)
    {
      m_image.Source = m_pressedImage;
    }
    else
    {
      m_image.Source = m_normalImage;
    }
  }
  else
  {
    m_image.Source = null;

    if(!m_correctHint)
    {
      m_textbox.Foreground = m_pressed ?
        m_phoneBackgroundBrush : m_phoneForegroundBrush;

      m_button.Background = m_pressed ?
        m_phoneForegroundBrush : m_phoneBackgroundBrush;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:07:34.377

您可以添加一个每次 DependecyProperty 更改值时都会调用的委托...

```
 public static readonly DependencyProperty NormalImageProperty =
     DependencyProperty.Register(
         NormalImagePropertyTag,
         typeof(ImageSource),
         typeof(CueAnswerViewData),
         new PropertyMetadata(null, (s, e) =>
                var ctrl = s as CueAnswerViewData;
                if (ctrl != null) {
                   ctrl.somePropertyToUpdate = 123;
                }
            })
            ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T00:09:22.753

给 Jeff Brand +1，因为他的回答帮助我找到了解决方案。然而，解决这个问题的最好方法是停止尝试与系统对抗，将 updateSkinnableProperties() 逻辑移动到 ViewModel 本身，并让它实现 INotifyPropertyChanged。它公开的一些属性更加以 UI 为中心，而不是以数据为中心（例如 Brush 和 Thickness 属性），但最终这是最干净和最好的解决方案。

谢谢！

# django - Django: use POST or links, which is better practice?

> ID：14164928
> 
> 赞同：1
> 
> 时间：2013-01-04T21:02:56.153
> 
> 标签：django

A noobish question to be sure.

```
<a href="{% url 'stuff.views.SomeView' %}/somethingnew">
    <button>See something new on this page</button>
</a>

<form action="" method="post">{% csrf_token %}
    <button name="somethingnew" type="submit" value=True>See something new on this page</button>
</form> 
```

With either choice, I update some boolean variable, perform the appropriate calculations, call the page view and render a page with `something new on this page`. Part of the reason I use either method is to save the state of a collection of boolean variables. What is the best way 1) change a boolean variable 2) save its state 3) perform the necessary updates when the button is clicked and finally 4) render page after the underlying data has been updated?

Right now, I am using forms rather than links so that I don't need to code a url for each boolean variable. Which method is better? Will one method improve the time it takes to reload the page (assuming many boolean variables)?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:35:01.083

1) 遵循 REST 思维方式，POST 请求是为了传输用户输入，因为您正在更改数据库对象。

2）如果永远不需要输入（会话持续时间），我会将其保存在 Session 对象中。否则，就像您现在所做的那样在数据库中。

3/4）我会在一个表格中收集所有必要的信息。当用户在 POST 请求中提交表单时，我会计算数据并使用包含计算结果的呈现页面进行响应。如果输入变量是通过间歇性计算逐步收集的，我只需相应地更新输入表单（在组合框中显示不同的选择或类似的东西）。当然，传输也可以通过 AJAXy 方式完成。

# c# - C# Program works in Visual Studio but not when started from Release Folder

> ID：14164930
> 
> 赞同：1
> 
> 时间：2013-01-04T21:03:04.397
> 
> 标签：c#

I wrote a program which simulates keystrokes in a game, it waits till i press 'v' and then simulates

```
- open console (p)
- ctrl + a
- copy to clipboard some stuff
- ctrl + v
- enter
- close console (p) 
```

The weird thing is that it works just as expected when I hit F5 in Visual Studio Release mode, but when I double click the .exe from the Release Folder, the program bugs, it still opens and renders the windows correctly, but it just seems to ignore everything except the enter keystroke (so im in chat mode in the game after pressing 'v'), for input injection I use a quick and dirty C++ library, here is the code

```
#include <stdlib.h>
#include <Windows.h>

extern "C"
{

__declspec(dllexport ) void InjectKey(int c, int flags)
{
    char ch = (char)c;
    INPUT key;
    memset(&key, 0, sizeof(INPUT));
    key.type = INPUT_KEYBOARD;
    key.ki.dwExtraInfo = GetMessageExtraInfo();
    key.ki.wScan = static_cast<WORD>(MapVirtualKeyEx(VkKeyScan(ch), MAPVK_VK_TO_VSC, GetKeyboardLayout(0)));
key.ki.dwFlags = KEYEVENTF_SCANCODE | flags;

SendInput(1, &key, sizeof(INPUT));
}

__declspec(dllexport ) void InjectKeyDirect(int code, int flags)
{
    INPUT input = { 0 };
    input.type = INPUT_KEYBOARD;
    input.ki.dwFlags = KEYEVENTF_SCANCODE | flags;
    input.ki.wScan = MapVirtualKeyEx(code, MAPVK_VK_TO_VSC, GetKeyboardLayout(0));
    SendInput(1, &input, sizeof(INPUT));
}

__declspec(dllexport ) void InjectKeyPress(int code, int flags)
{
    InjectKey(code, flags);
    InjectKey(code, KEYEVENTF_KEYUP | flags);
}

__declspec(dllexport ) void InjectKeyPressDirect(int code, int flags)
{
    InjectKeyDirect(code, flags);
    InjectKeyDirect(code, KEYEVENTF_KEYUP | flags);
} 
```

I use the functions from C# with PInvoke like this

```
 [DllImport("InputInjector.dll", ExactSpelling = false, CallingConvention = CallingConvention.Cdecl)]
    public static extern void InjectKey(int c, int flags = 0);[DllImport("InputInjector.dll", ExactSpelling = false, CallingConvention = CallingConvention.Cdecl)]
    public static extern void InjectKey(int c, int flags = 0); 
```

I would be glad about any help!

# java - How to configure TSA argument only on release in maven-jarsigner-plugin

> ID：14164935
> 
> 赞同：7
> 
> 时间：2013-01-04T21:03:31.037
> 
> 标签：java, maven, pom.xml, jarsigner

Adding a timestamp to our jar's causes our maven build to take ~4 times longer than usual. Timestamp is necessary for release builds, but we don't need it for snapshot builds. How would we configure the POM file to only add the TSA arguments when it is a Release version (i.e. SNAPSHOT does not appear in the project version).

Below is our POM entry for the jarsigner plugin. Note the arguments added at the bottom. We would like these to not be added if SNAPSHOT appears in the project version:

```
 <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-jarsigner-plugin</artifactId>
          <version>1.2</version>
          <executions>
            <execution>
              <id>sign webcontent jars</id>
              <phase>prepare-package</phase>
              <goals>
                <goal>sign</goal>
              </goals>
            </execution>
          </executions>
          <configuration>
            <archiveDirectory>${project.build.directory}/projectname-webcontent/applets</archiveDirectory>
            <includes>
              <include>*.jar</include>
            </includes>
            <keystore>Keystore</keystore>
            <alias>alias</alias>
            <storepass>pass</storepass>
            <arguments>
              <argument>-tsa</argument>
              <argument>https://timestamp.geotrust.com/tsa</argument>
            </arguments>
          </configuration>
        </plugin> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-14T17:05:24.247

假设您使用 maven 发布插件进行发布，您可以通过捎带它激活的发布配置文件来完成此操作。

如果您喜欢或不使用发布插件进行发布，您也可以使用自己的自定义配置文件来执行此操作。

在您的 pom 中，您将包括：

```
<profiles>
    <profile>
        <id>release-profile</id>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jarsigner-plugin</artifactId>
            ...
            <!-- Put your configuration with the TSA here -->
        </plugin>
    </profile>
</profiles> 
```

现在省略 jarsigner 的构建/插件配置的正常部分中的 TSA 参数内容。如果您出于某种原因碰巧想要带有快照的 TSA，您可以使用以下方法手动激活发布配置文件：

```
mvn -Prelease-profile install 
```

# facebook - Facebook PHP SDK access token randomly expiring, how to seamlessly refresh without load time costs

> ID：14164938
> 
> 赞同：1
> 
> 时间：2013-01-04T21:03:44.383
> 
> 标签：facebook, codeigniter, facebook-graph-api, facebook-php-sdk

I am using the PHP SDK on my website. I have developed a registration form and login form.

The facebook login link is generated, the user clicks and authorises the app. They are redirected to my site and have an access token.

I can use API call such as $this->facebook->api('/me/'); I put the call within a try statement and catch any exceptions.

It works perfectly.

The problem is that randomly my access token will expire, as such the api all cannot complete and the exception is caught. I don't know why this is, but what i want to do is seamlessly refresh the access token.. i.e get a new one and continue the users session on the site seamlessly.

What i thus do is save their location in a session, redirect the user to the facebook login page in the catch statement, and then on successfully re-logging in the user redirecting back to where they were.

This works, but there is a problem. Having this:

```
 try
        {
            $me = $CI->facebook->api('/me');
        }
            catch(FacebookApiException $e) 
        {               
    //redirect to fb login lin
        } 
```

on every page essentially doubles the page load time of every page on the site - the Facebook PHP SDK is inherently slow.

Instead of 1 second page loads, they are taking 2-3 seconds. I have benchmarked it, and it is because of this try/catch..

What can i do? HOw can i maintain/refresh an access key for an authorised user without huge load time costs to my users?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T17:17:27.073

**编辑**：我建议的解决方案使用直接*OAuth 2.0*调用使用 PHP 进行身份验证，然后使用 PHP SDK 进行其余的 Facebook API 调用。

1.  [按照Facebook 开发人员文档](https://developers.facebook.com/docs/howtos/login/server-side-login/)`access_token`中的步骤最初获取一个。
2.  在第 6 步，您将获得`access_token`90 天的更长有效期。
3.  现在，一旦您获得了扩展的，您可以通过调用[Facebook::setAccessToken](https://developers.facebook.com/docs/reference/php/facebook-setAccessToken/)`access_token`使 PHP SDK 使用相同的
4.  存储`Facebook`对象`$_SESSION`以便从其他页面进行 api 调用。

此外，您可以继续并`access_token`永久保存此扩展（在数据库中）。这将完全消除用于登录过程的 Facebook 通信。但是，请确保您已采取必要的安全预防措施来保护`access_token`（出于显而易见的原因）并且您的隐私政策声明相同。

# javascript - 如何在 Redactor 插件中触发自定义方法？

> ID：14164940
> 
> 赞同：1
> 
> 时间：2013-01-04T21:03:54.117
> 
> 标签：javascript, jquery, redactor

以下 jQuery 插件有一个 API，您可以在其中添加自己的方法。

这是[一个简单的例子](http://imperavi.com/redactor/docs/creatingplugins/)。

在该页面上的示例中，我将如何调用该函数`your_method`？

他们没有表现出这一点。我要做的就是在页面上放一个按钮，然后当单击该按钮时，触发我自己的自定义方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-07T15:42:33.587

这对我有用：

```
if (!RedactorPlugins) var RedactorPlugins = {};

RedactorPlugins.myPlugin = function() {
    return {
        init: function() {
        },
        myMethod: function() {
            alert ("method");
        }
    };
};

$("#redactor").redactor({
    plugins: ['myPlugin']
});

$("#redactor").redactor("myPlugin.myMethod"); 
```

或者您可以将其添加到其他内容的点击事件中

```
$(".selector").on("click", function(e) {
    $("#redactor").redactor("myPlugin.myMethod");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T21:21:01.103

您创建一个 init 方法，在该方法中您可以在工具栏上创建一个按钮并将您的自定义插件方法绑定到它：

```
RedactorPlugins.myPlugin = {

    init: function() {
        this.addBtn('myMethod', 'MyMethod', function(obj) {
            obj.myMethod();
        });
    },

    myMethod: function() {
        // do stuff
    }
} 
```

希望能帮助到你

# android - 检查从其他应用程序发送的短信的发送报告

> ID：14164942
> 
> 赞同：0
> 
> 时间：2013-01-04T21:04:03.113
> 
> 标签：android, sms

我们可以跟踪从其他应用程序发送的消息吗？我的意思是，当用户通过android默认短信应用程序（或其他短信管理应用程序）发送短信时，我们可以跟踪短信情况并在短信发送时在我们的应用程序中发出通知吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:54:07.707

不，这是不可能的，除非其他应用程序专门有一个 API 来支持这种监控。

# sql - 带有子报表的报表 ms access 2007

> ID：14164945
> 
> 赞同：0
> 
> 时间：2013-01-04T21:04:08.663
> 
> 标签：sql, ms-access

我的数据库中有三个表。客户，其中包含每个客户的详细信息，例如姓名，电话号码......产品，包含每个产品的详细信息。

每次客户请求产品时，都会在第三个表 Orders 中插入一个新行。表 Orders 包含客户 ID（外键）、产品 ID（外键）和所需数量。

我要做的是根据订单表创建一个报告，向我显示每个客户他所做的所有订单。

我正在研究 ms access 2007。

请帮我 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:42:42.357

基于连接到客户表的订单表创建查询。使用查询设计窗口构建查询。然后，您可以将您的报告基于查询，使用分组来获取组顶部的客户详细信息，并将 prder 详细信息作为组内的行。使用报告向导。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T22:18:15.097

好的，我有解决方案。

我用这个记录源创建了一个表单：

```
SELECT
  DISTINCT Costumers.Code, Costumers.Name, Costumers.phone
FROM
  Costumers INNER JOIN Orders
  ON Costumers.ID=Orders.IdCostumer; 
```

然后我用这个记录源创建了一个子报表：

```
 SELECT
   [Costumers].[Code],
   [Orders].[Code],
   [Products].[Description],
   [Orders].[Quantity]
 FROM
   Products INNER JOIN
   (Costumers INNER JOIN Orders ON Costumers.ID=Orders.IdCostumer)
   ON Products.ID=Orders.IdOrder; 
```

这就是我想要的方式。

感谢您的关注 ！！！:-)

# java - 检查约束 SQL Server 的元数据

> ID：14164949
> 
> 赞同：1
> 
> 时间：2013-01-04T21:04:25.097
> 
> 标签：java, sql-server, metadata, check-constraints, check-constraint

我有一个 SQL Server 数据库，它包含一个表，其中`varchar`列有一个检查约束，以确保只能输入几个不同的单词作为值（名称）。

像这样

```
CONSTRAINT chk_Names CHECK (name IN ('John', 'Eva', 'Carl', 'Fred')) 
```

我想做的是用这些名称填充java中的组合框，我不想手动输入它们，因为它们可能会在数据库中更改。我想从元数据中填充它。

但是我还没有找到一种方法从数据库中获取信息，`INFORMATION_SCHEMA`或者`sys.objects`（或者从Java中的DatabaseMetaData）

我对 SQL Server 很陌生，但有可能以某种方式获取这些信息吗？

问候/弗雷德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:12:55.053

听起来您应该将名称列表移动到表格中。您的 Java 表单可以从表中选择数据。

而且，由于数据可以更改，因此更新表比更改检查约束要好。您也可以将检查约束更改为外键约束。

您还可以在 中找到检查约束定义`INFORMATION_SCHEMA.CHECK_CONSTRAINTS`。表达式在`CHECK_CLAUSE`列中；而且，您必须从表达式中提取值。

# vba - 什么是运行时错误 91，为什么它会出现在我的 Excel VBA 脚本中？

> ID：14164950
> 
> 赞同：2
> 
> 时间：2013-01-04T21:04:33.123
> 
> 标签：vba, excel

好的，所以我正在尝试在 VBA for Excel 中编写一个简单的脚本，该脚本会根据用户在电子表格的单元格中选择的某些值来更改自动筛选。到目前为止，它一直运行良好，但现在我收到以下错误，我无法弄清楚是什么原因造成的：

> 运行时错误“91”：对象变量或未设置块变量

请记住，**这实际上是我第一次尝试用 VBA 编写任何东西，**所以我对这种语言不是很熟悉。不过，我对 Excel 非常熟悉，并且还了解其他几种编程语言（Java、JavaScript、Ruby、LUA）。

这是我写的代码；错误发生在第 9 行。

```
Private Sub Worksheet_Change(ByVal Target As Range)

    '' Review Level Changed ''
    If Target.Address = Worksheets("Sheet1").Range("review_level").Address Then

        ' MsgBox "You just changed " & Target.Address & " to " & Target.Value ' Debug
        Dim oldProtection As Protection
        If Worksheets("Sheet1").ProtectContents = True Then
            oldProtection = Worksheets("Sheet1").Protection ' It errors out here
            Worksheets("Sheet1").Unprotect
        End If

        If Target = "B" Then
            ActiveSheet.ListObjects("review_checklist").Range.AutoFilter Field:=2, _
                Criteria1:=Array("B", "C", "D"), Operator:=xlFilterValues
        ElseIf Target = "C" Then
            ActiveSheet.ListObjects("review_checklist").Range.AutoFilter Field:=2, _
                Criteria1:="=C", Operator:=xlOr, Criteria2:="=D"
        ElseIf Target = "D" Then
            ActiveSheet.ListObjects("review_checklist").Range.AutoFilter Field:=2, _
                Criteria1:="=D"
        End If

        If Not IsEmpty(oldProtection) Then ' Btw, this IS how you check that oldProtection isn't null, right?
            Call ProtectWithProtection(oldProtection)
        End If

    End If

End Sub

Private Sub ProtectWithProtection(ByRef Protect As Protection)
    Worksheets("Sheet1").Protect ' ToDo: Use attributes from Protect
End Sub 
```

此代码位于我的 Excel 项目中的“Sheet1”内。请注意，我正在运行 Excel 2007。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T21:23:42.193

每当您在 VBA 中有一个对象时，您都需要使用`Set`运算符为其分配一个值。例如：

```
Set oldProtection = Worksheets("Sheet1").Protection 
```

# c - Building patched 64 bit OpenSSL on OSX and Ubuntu

> ID：14164953
> 
> 赞同：2
> 
> 时间：2013-01-04T21:05:11.237
> 
> 标签：c, linux, macos, gcc, openssl

I'm trying to setup a [patched version](http://sctp.fh-muenster.de/dtls-patches.html) of OpenSSL to use DTLS and I'm having a lot of trouble. I'm assuming it is due to my lack of understanding of gcc and linking c libraries. In particular, I keep on seeing people say to link to the lib/ subfolder, but I cannot find one for OpenSSL. I also a [question on building 32 bit OpenSSL](https://stackoverflow.com/questions/4084210/how-do-i-build-openssl-as-32-bit-i386-on-mac-os-x), but I'm trying to do 64 bit.

**OSX**

Getting the source and patch:

```
wget ftp://ftp.openssl.org/source/openssl-1.0.1c.tar.gz # get latest stable OpenSSL
mv ~/Downloads/openssl-1.0.1c.tar.gz /usr/local/openssl-1.0.1c.tar.gz
cd /usr/local/openssl-1.0.1c.tar.gz
wget http://sctp.fh-muenster.de/dtls/dtls-bugs-1.0.1.patch # get the patch file 
```

Building (64 bit, OpenSSL defaults to 32 bit):

```
export CFLAGS="-arch x86_64"
export LDFLAGS="-arch x86_64"
./Configure darwin64-x86_64-cc # 64 bit config command   
make # .a files should be built, great 
```

Great, I have some libraries in the OpenSSL root directory:

```
/usr/local/openssl-1.0.1c$ ll lib*
-rw-r--r--  1 nflacco  staff  3286136 Jan  4 12:43 libcrypto.a
-rw-r--r--  1 nflacco  staff      260 Jan  4 12:43 libcrypto.pc
-rw-r--r--  1 nflacco  staff   570200 Jan  4 12:43 libssl.a
-rw-r--r--  1 nflacco  staff      275 Jan  4 12:43 libssl.pc 
```

Now I'll try to compile [a simple piece of code that uses the patched OpenSSL](https://gist.github.com/4455921):

```
~$ gcc -L /usr/local/openssl-1.0.1c -lssl -lcrypto -I /usr/local/opt/openssl/include -o server server.c
ld: warning: _OPENSSL_ia32cap_P has different visibility (hidden) in /usr/local/openssl-1.0.1c/libcrypto.a(x86_64cpuid.o) and (default) in /usr/local/openssl-1.0.1c/libcrypto.a(cryptlib.o)
Undefined symbols for architecture x86_64:
  "_BIO_dgram_get_peer", referenced from:
      _generate_cookie_callback in ccfldIrE.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
make: *** [server] Error 1 
```

**Ubuntu**

Building:

```
./config
make 
```

Checking for libraries (Disregard date, Ubuntu thinks it's Christmas):

```
/usr/local/openssl-1.0.1c$ ll lib*
-rw-r--r-- 1 root root 3170340 Dec 25 17:45 libcrypto.a
-rw-r--r-- 1 root root     264 Dec 25 17:46 libcrypto.pc
-rw-r--r-- 1 root root  534092 Dec 25 17:45 libssl.a
-rw-r--r-- 1 root root     279 Dec 25 17:46 libssl.pc 
```

And, trying to compile:

```
gcc -L /usr/local/openssl-1.0.1c -lssl -lcrypto -I /usr/local/opt/openssl/include -o server server.c
/tmp/cc0DgDl1.o: In function `generate_cookie_callback':
server.c:(.text+0x8b): undefined reference to `RAND_bytes'
server.c:(.text+0xba): undefined reference to `SSL_get_rbio'
server.c:(.text+0xdc): undefined reference to `BIO_ctrl'
server.c:(.text+0x112): undefined reference to `CRYPTO_malloc'
/tmp/cc0DgDl1.o: In function `main':
server.c:(.text+0x163): undefined reference to `SSL_library_init'
server.c:(.text+0x168): undefined reference to `SSL_load_error_strings'
server.c:(.text+0x16d): undefined reference to `SSL_library_init'
/tmp/cc0DgDl1.o: In function `configure_server_ssl':
server.c:(.text+0x2f5): undefined reference to `SSL_CTX_set_cipher_list'
server.c:(.text+0x318): undefined reference to `SSL_CTX_ctrl'
server.c:(.text+0x333): undefined reference to `SSL_CTX_use_certificate_file'
server.c:(.text+0x35e): undefined reference to `SSL_CTX_use_PrivateKey_file'
server.c:(.text+0x379): undefined reference to `SSL_CTX_check_private_key'
server.c:(.text+0x3a4): undefined reference to `SSL_CTX_set_verify'
server.c:(.text+0x3c7): undefined reference to `SSL_CTX_ctrl'
server.c:(.text+0x3da): undefined reference to `SSL_CTX_set_cookie_generate_cb'
server.c:(.text+0x3ed): undefined reference to `SSL_CTX_set_cookie_verify_cb'
/tmp/cc0DgDl1.o: In function `start_server':
server.c:(.text+0x40b): undefined reference to `DTLSv1_server_method'
server.c:(.text+0x413): undefined reference to `SSL_CTX_new'
collect2: ld returned 1 exit status 
```

* * *

UPDATE:

On Ubuntu I got it to compile by moving the libraries to the end of the compile command AND adding the flag `-ldl` to compile with no warnings:

```
gcc -L /usr/local/openssl-1.0.1c -I /usr/local/opt/openssl/include -o server server.c -lssl -lcrypto -ldl 
```

On OSX, this command gives me the same error as earlier with not finding `_BIO_dgram_get_peer`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:06:52.213

You have to place the libraries last on the command line:

```
gcc -L /usr/local/openssl-1.0.1c -I /usr/local/opt/openssl/include -o server server.c -lssl -lcrypto
#                                                                                     ^^^^^^^^^^^^^^ 
```

There are any number of duplicates of this problem here on this website explaining the whys and hows. The documentation for `ld` explains it well and is the ultimate reference.

# mysql - MySQL 查询优化 - 避免子查询

> ID：14164963
> 
> 赞同：0
> 
> 时间：2013-01-04T21:06:17.097
> 
> 标签：mysql, subquery

为了简单起见，我需要更新表中的一些行，称为“三”。

我选择要使用此查询更新的列：

```
SELECT one.id
FROM one 
    JOIN `two` ON ( one.id = two.page )
    JOIN `three` ON ( one.id = three.item )
WHERE two.level = 1
    AND  two.item = (SELECT item FROM two WHERE page = 5 AND level = 1 ) 
    AND three.position > (SELECT position FROM three WHERE item = 5 ) 
ORDER BY three.position 
```

现在我用我得到的 id 调用更新查询。

有没有机会消除子查询？

编辑（在梅兰妮的评论之后）：

表“一”：

```
|id|text| 
```

表“二”：

```
|id|item|page|level| 
```

表“三”：

```
|item|position| 
```

所以当我运行查询时

```
SELECT item FROM two WHERE page = 5 AND level = 1 
```

它将返回 f.ex 1 并且最终的 WHERE 子句将是：

```
two.item = 1 AND two.level = 1 
```

这与以下内容不同：

```
two.level = 1 and two.page = 5 
```

我有第一张桌子 - 一些带有 one.id 的文本。我需要更新表三中所有位置高于我的项目（例如 id = 5）的项目。但是这些项目也应该在表二中具有相同的 two.item，其中 two.page = one.id 和 level = 1

我很抱歉描述不佳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:17:14.850

您应该能够通过连接替换这些子查询：

```
SELECT one.id
FROM one 
    JOIN `two2` ON (two2.page = 5 AND two2.level = 1)
    JOIN `two` ON ( one.id = two.page AND two.item = two2.item )
    JOIN `three2` ON ( three.item = 5)
    JOIN `three` ON ( one.id = three.item AND three.position > three2.position)
WHERE two.level = 1
ORDER BY three.position 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T23:44:24.573

@TheVedge 是有趣的解决方案，但不会产生与您的查询相同的结果

我建议避免与视图重复同一张表，所以稍微更正一下

另一个更正是three2.item=5

我建议在子查询限制 0,1 中使用，所以永远不要返回一个以上的元素

```
SELECT one.id
FROM one 
   JOIN `two` AS TWO2 ON (two2.page = 5 AND two2.level = 1)
   JOIN `two` ON ( one.id = two.page AND two.item = two2.item )
   JOIN `three` AS THREE2 ON ( three2.item = 5)
   JOIN `three` ON ( one.id = three.item AND three.position > three2.position)
WHERE two.level = 1
ORDER BY three.position 
```

请记住，您没有对这个查询做同样的事情。

试试这个

```
 CREATE TABLE `one` (
    `id` INT(10) NULL DEFAULT NULL,
`text` VARCHAR(50) NULL DEFAULT NULL
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB; 
```

_

```
CREATE TABLE `three` (
`item` INT(10) NULL DEFAULT NULL,
`position` INT(10) NULL DEFAULT NULL
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB; 
```

_

```
CREATE TABLE `two` (
`id` INT(10) NULL DEFAULT NULL,
`item` INT(10) NULL DEFAULT NULL,
`page` INT(10) NULL DEFAULT NULL,
`level` INT(10) NULL DEFAULT NULL
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB; 
```

_

```
 INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (1, 1, 5, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (3, 3, 5, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (4, 4, 5, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (5, 5, 5, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (6, 6, 5, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (7, 7, 5, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (8, 8, 5, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (9, 9, 5, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (2, 2, 5, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (10, 2, 1, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (11, 1, 1, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (13, 3, 1, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (14, 4, 1, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (15, 5, 1, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (16, 6, 1, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (17, 7, 1, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (18, 8, 1, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (19, 9, 1, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (20, 2, 2, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (21, 1, 2, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (23, 3, 2, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (24, 4, 2, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (25, 5, 2, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (26, 6, 2, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (27, 7, 2, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (28, 8, 2, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (29, 9, 2, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (30, 2, 3, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (31, 1, 3, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (33, 3, 3, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (34, 4, 3, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (35, 5, 3, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (36, 6, 3, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (37, 7, 3, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (38, 8, 3, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (39, 9, 3, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (40, 2, 4, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (41, 1, 4, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (42, 3, 4, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (43, 4, 4, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (44, 5, 4, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (45, 6, 4, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (46, 7, 4, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (47, 8, 4, 1);
    INSERT INTO `two` (`id`, `item`, `page`, `level`) VALUES (48, 9, 4, 1); 
```

-

```
 INSERT INTO `three` (`item`, `position`) VALUES (1, 1);
    INSERT INTO `three` (`item`, `position`) VALUES (2, 1);
    INSERT INTO `three` (`item`, `position`) VALUES (3, 1);
    INSERT INTO `three` (`item`, `position`) VALUES (4, 1);
    INSERT INTO `three` (`item`, `position`) VALUES (5, 0);
    INSERT INTO `three` (`item`, `position`) VALUES (6, 1);
    INSERT INTO `three` (`item`, `position`) VALUES (7, 1);
    INSERT INTO `three` (`item`, `position`) VALUES (8, 1);
    INSERT INTO `three` (`item`, `position`) VALUES (9, 1);
    INSERT INTO `three` (`item`, `position`) VALUES (10, 1);
    INSERT INTO `three` (`item`, `position`) VALUES (11, 1);
    INSERT INTO `three` (`item`, `position`) VALUES (12, 1); 
```

_

```
 INSERT INTO `one` (`id`, `text`) VALUES (1, 'A');
    INSERT INTO `one` (`id`, `text`) VALUES (2, 'B');
    INSERT INTO `one` (`id`, `text`) VALUES (3, 'C');
    INSERT INTO `one` (`id`, `text`) VALUES (4, 'D');
    INSERT INTO `one` (`id`, `text`) VALUES (5, 'E');
    INSERT INTO `one` (`id`, `text`) VALUES (6, 'F');
    INSERT INTO `one` (`id`, `text`) VALUES (7, 'G'); 
```

_

```
 SELECT 
  one.id, one.text
 ,two.id,two.item,two.page,two.level
 ,three.item,three.position
FROM one 
    JOIN `two` ON ( one.id = two.page )
   JOIN `three` ON ( one.id = three.item )
WHERE two.level = 1
   AND  two.item = (SELECT item FROM two WHERE page = 5 AND level = 1 limit 0,1 ) 
  AND three.position > (SELECT position FROM three WHERE item = 5 limit 0,1  ) 
 ORDER BY three.position

     SELECT    
 one.id, one.text
 ,two.id,two.item,two.page,two.level
 ,three.item,three.position
FROM one 
    JOIN `two` AS TWO2 ON (two2.page = 5 AND two2.level = 1)
    JOIN `two` ON ( one.id = two.page AND two.item = two2.item )
    JOIN `three` AS THREE2 ON ( three2.item = 5)
    JOIN `three` ON ( one.id = three.item AND three.position > three2.position)
 WHERE two.level = 1
 ORDER BY three.position 
```

通过原始查询，您在 TheVedge 解决方案中选择了特定元素，您正在加入更多数据因此结果取决于您选择的内容

另一个有用的分析是[http://dev.mysql.com/doc/refman/5.0/en/show-profile.html](http://dev.mysql.com/doc/refman/5.0/en/show-profile.html)和解释

显示配置文件显示，在第一次运行您的原始查询时

```
 Status      Duration
starting    0.000039
checking query cache for query  0.000144
Opening tables  0.000032
System lock 0.000007
Table lock  0.000061
init    0.000054
optimizing  0.000314
statistics  0.000021
preparing   0.000051
Creating tmp table  0.000084
executing   0.000004
Copying to tmp table    0.000063
optimizing  0.000008
statistics  0.000019
preparing   0.000009
executing   0.000004
Sending data    0.000054
optimizing  0.000008
statistics  0.000007
preparing   0.000009
executing   0.000003
Sending data    0.000126
Sorting result  0.000030
Sending data    0.000025
end 0.000004
removing tmp table  0.000011
end 0.000005
query end   0.000004
freeing items   0.000101
storing result in query cache   0.000008
logging slow query  0.000003
cleaning up 0.000006 
```

建议的查询确实

```
Status  Duration
starting    0.000036
checking query cache for query  0.000122
Opening tables  0.000030
System lock 0.000008
Table lock  0.000064
init    0.000046
optimizing  0.000028
statistics  0.000026
preparing   0.000072
Creating tmp table  0.000086
executing   0.000005
Copying to tmp table    0.001081
Sorting result  0.000040
Sending data    0.000056
end 0.000005
removing tmp table  0.000010
end 0.000005
query end   0.000004
freeing items   0.000108
storing result in query cache   0.000007
logging slow query  0.000003
cleaning up 0.000005 
```

因此，当您拥有完整数据时，您可以尝试更好地评估两个查询的响应

# forms - Write to database only when a button is pressed

> ID：14164964
> 
> 赞同：0
> 
> 时间：2013-01-04T21:06:37.360
> 
> 标签：forms, datasource, axapta, unit-of-work, dynamics-ax-2012

I have a form with two datasources that are linked by using an outer join. It is written to the database by using Form Datasource Unit of Work framework.

As of now, the data gets written when moving from one datasource form control to another form datasource control. I want to only activate/write using Form Datasource Unit of Framework when a button is clicked.

Is there a way to prevent automated write function when moving from one Form Control to another?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T23:09:40.803

首先看一下[HowTo: Unit of work implementation for a Form](http://dynamicsaxposed.wordpress.com/2012/02/27/howto-unit-of-work-implementation-for-a-form/)以检查您是否与它保持一致。官方文档是[Change Group and Optional Record Modes](http://msdn.microsoft.com/en-us/library/jj129662.aspx)。

发出写入是因为您“离开”了一条记录，请参阅[从记录中删除焦点时的事件方法序列](http://msdn.microsoft.com/en-us/library/aa628445.aspx)。

这是`validateWrite`返回 true 时的顺序：

1.  离开记录返回真
2.  验证写入返回真
3.  写作
4.  书面
5.  离开记录返回真
6.  leaveRecord 返回真（再次）

这是`validateWrite`返回 false 时的顺序：

1.  离开记录返回真
2.  验证写入返回假
3.  离开记录返回假

`validateWrite`因此，当您不想保存时，您可以覆盖以静默返回 false。`super()`当您*确实*想保存时，请务必致电！

或者您可以调用`leaveRecord`自己强制写入：

```
if (record_ds.leaveRecord(true))
{} 
```

调用 record_ds.leaveRecord(true) 时请注意它可能不会保存记录，例如如果验证失败。在这种情况下，leaveRecord 将返回 false。

观察您正在“反对”标准工作，这将使您的表单与其他表单的工作方式不同。

# breeze - "Internal Error in key fixup - unable to locate entity" error but database updated as expected

> ID：14164965
> 
> 赞同：3
> 
> 时间：2013-01-04T21:06:41.227
> 
> 标签：breeze

I'm struggling to debug this error because, although it's consistently reported, the app's behavior is as intended. Would appreciate pointers as to what it means and how I could go about debugging its source.

Apologies for being vague but, since I'm getting the desired result, I'm unsure what other information to provide.

**UPDATE**

I've created a repro of this issue and attempted to focus the code on the problem. The error is thrown consistently even though the database is updated correctly. There's a single saveChanges in the code and it uses the save functionality from the dataservice.js in the Breeze Todo sample. SaveOptions.allowConcurrentSaves is false.

Entirely at a loss to explain it and have looked through my EF code to see whether I'm making an obvious mistake but can't see it. The bundle sent to the WebAPI SaveChanges method looks correct (correctly populated with IDs etc.) too.

[https://github.com/DazWilkin/BreezeJS.ScoreIssue](https://github.com/DazWilkin/BreezeJS.ScoreIssue)

**UPDATE 6th February**

The issue remains unresolved by Wade's helpful answer. Unfortunately, unless I can understand what it is I'm doing wrong or learn that this is a bug, I'm going to have to abandon the use of Breeze in this project and revert to crappy, plain old AJAX calls.

It would appear that the issue revolves around the server returning a zeroed GUID when saving changes. The method returns no errors. I would be thrilled to learn that this is a bug in my entity model but I'm doubtful.

Here's the failure:

breeze.debug.js: 11954

```
var ix = this._indexMap[tempValue];
if (ix === undefined) {
   throw new Error("Internal Error in key fixup - unable to locate entity");
} 
```

When the code reaches this point, the value of this._indexMap is correct and is:

```
{"bcb6e670-00fc-469d-8531-5767f40bf3c1":0} 
```

BUT the value of tempValue (as returned from the Web API call by the server) is wrong:

```
00000000-0000-0000-0000-000000000000 
```

The realValue is correct and is:

```
1093b975-7686-4621-8336-77c38ed36de0 
```

Backing up the stack. Here are the results from the AJAX call, breeze.debug.js: 12574\. See that the tempValue is zeroed on return from the server/WebAPI call. The realValue is correct. This is what the database contains. The row is added to the table without problem.

```
"KeyMappings": [
    {
        "$id": "4",
        "$type": "Breeze.WebApi.KeyMapping, Breeze.WebApi",
        "EntityTypeName": "...Score",
        "TempValue": "51877f5b-811f-4260-bd5b-cf9965159597",
        "RealValue": "92b73b8a-8b33-45cd-9822-ca7c0c5d5d9a"
    },
    {
        "$id": "5",
        "$type": "Breeze.WebApi.KeyMapping, Breeze.WebApi",
        "EntityTypeName": "...PropertyValue",
        "TempValue": "00000000-0000-0000-0000-000000000000",
        "RealValue": "1093b975-7686-4621-8336-77c38ed36de0"
    }

], 
```

Verified against what's received serverside in saveBundle. NB the IDs of both entities received at the server have valid GUID IDs.

```
"entities": [
    {
        "ID": "51877f5b-811f-4260-bd5b-cf9965159597",
        ...
        "entityAspect": {
            "entityTypeName": "Score:...",
            "entityState": "Added",
            "originalValuesMap": {},
            "autoGeneratedKey": {
                "propertyName": "ID",
                "autoGeneratedKeyType": "Identity"
            }
        }
    },
    {
        "ID": "bcb6e670-00fc-469d-8531-5767f40bf3c1",
        ...
        "entityAspect": {
            "entityTypeName": "PropertyValue:...",
            "entityState": "Added",
            "originalValuesMap": {},
            "autoGeneratedKey": {
                "propertyName": "ID",
                "autoGeneratedKeyType": "Identity"
            }
        }
    }
], 
```

Unsurprisingly, the values sent to the server by the AJAX call that are created in breeze.debug.js: 10494 saveBundleStringified are correct and the same as those received by the server (won't reproduce but I assure you they are).

And, from my code, when the saveChanges is called,

```
manager.getChanges().length == 2
manager.getChanges()[0].ID() == "51877f5b-811f-4260-bd5b-cf9965159597" (Score)
manager.getChanges()[1].ID() == "bcb6e670-00fc-469d-8531-5767f40bf3c1" (PropertyValue) 
```

and, as expected, these match the (temp) values of the entities' IDs during saveChanges, received by the server...

What am I doing wrong?? If I had hair, I'd be tearing it out!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T22:48:57.820

我已经解决了。

我不一致地应用（！）约定是使设置器在代码优先类型上是内部/私有的。我的说法前后不一致，因为在感觉我已经用尽所有可能性之后，我发现 PropertyValue 类型，即引发错误的类型，有一个内部集。

删除它并重建解决方案后，问题就解决了！

所以：

```
public Guid ID { get; internal set; } 
```

应该：

```
public Guid ID { get; set; } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T22:20:34.480

# 1月27日更新：

根据您对 Sergey 的回答的评论，您可能一直在尝试在保存操作完成之前对已更改的实体执行某些操作。

这些实体保持在更改状态...通常具有临时主键和外键...直到服务器报告成功保存。

在保存成功之前，您可能不应该触摸它们。正如 Sergey 所观察到的，您应该在保存成功回调中找到您的保存后处理。

```
返回 manager.saveChanges()
              .then（保存成功）
              .失败（保存失败）；

```

**您不应该将`saveChanges`调用包装在 jQuery`Deferred`**中。这是浪费时间和复杂性。该`EntityManager.saveChanges`方法返回一个调用者可以使用的承诺。视图模型可以添加自己的成功和失败回调

```
数据服务.saveChanges()
           .then（万岁）
           . 失败（悲伤长号）；

```

## 并发保存

我在您的代码中注意到您正在使用您在**Todo**示例中找到的[时间延迟方法](http://www.breezejs.com/documentation/concurrent-saves#timedelayedsaves)来防止非法并发保存。

 **这种方法实际上只适用于演示。如果您的视图模型在保存成功时需要执行某些任务，那么它对您根本不起作用。它不起作用，因为数据服务无法使用时间延迟方法向视图模型返回承诺。

如果您需要非阻塞保存，请查看“Cool Breezes”部分下的“ [Concurrent Saves ”主题中描述的“](http://www.breezejs.com/documentation/concurrent-saves) [**Save Queuing**](http://www.breezejs.com/documentation/concurrent-saves#savequeuing) ”插件。

## 简洁地创建实体

在查看您的代码时，我不禁注意到您在*scoreissue.1.0.ts*中的实体工厂方法有点冗长。你写的是：

```
导出函数 Business(manager, o: IBusiness) {
  var business = manager.metadataStore.getEntityType("Business").createEntity();
  业务.ID(breeze.core.getUuid());
  业务名称（o.name）；
  manager.addEntity(business);
  退货业务；
}

```

可以很简单：

```
导出函数 Business(manager, o: IBusiness) {
  返回 manager.createEntity("业务", {
    ID：微风.core.getUuid()，
    姓名：o.name,
  });
}

```

快捷方式是新的`EntityManager.createEntity`，因为您编写了这段代码，所以不要因为错过它而感到难过。

# 原答案：

[方向错误。保留以理解问题出在客户端的 DazWilkin 评论。]

这是在哪里生成的？在服务器上？如果是这样，您可以继承 EFContextProvider 并覆盖`SaveChangesCore`。调用`base.SaveChangesCore`并在它周围放置一个try/catch。检查`saveMap`论据。EFContextProvider 是开源的；我会开始在这里挖掘。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T22:15:01.203

此错误可能发生在多个同时挂起的同时保存请求都涉及密钥生成的情况下。此错误是否仅在保存期间发生？如果是这样，请尝试将 SaveOptions.allowConcurrentSaves 设置为 false。如果这导致发生不同的错误（并发保存错误），那么您的问题肯定与并发保存有关。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T21:19:23.833

我有同样的问题，我已经在 jQuery 延迟对象的帮助下解决了这个问题。我的数据服务保存方法现在如下所示：

```
saveChanges = function () {
    var def = $.Deferred();

    if (manager.hasChanges()) {
        manager.saveChanges()
            .then(function () { def.resolve() })
            .fail(function (error) {
                handleSaveError(error);
                def.reject();
            });
    } else {
        logger.info("Nothing to save");
        def.resolve();
    };

    return def.promise();
}; 
```

我也使用 jQuery 延迟对象从我的视图模型中调用它：

```
$.when(dataservice.saveChanges())
 .done(function () {
      ...some actions
 }) 
```**

# jquery - Mailto 与 Jquery 的链接

> ID：14164966
> 
> 赞同：1
> 
> 时间：2013-01-04T21:06:42.693
> 
> 标签：jquery, html, mailto

我的网站上有一个可以正常工作的 mailto 链接。但是，我想在用户单击该链接时对其执行 .click() 事件以进行记录。我有 .click 事件工作并执行 ajax 请求，但现在 mailto 链接没有打开电子邮件客户端。是否可以在客户端打开之前运行 jquery 函数，但仍使客户端打开？

这是我的代码（它只是在浏览器中打开一个空白窗口）

```
<script type='text/javascript'>
                    jQuery('span.email a').on('click',function (){
                        jQuery.ajax({
                            type: 'POST',
                            url: '', //url here
                            data: {comment: 'Email Sent', category : 'EE', store_id: '" . $this->store_id . "'},
                            success: function (data){jQuery('#alerts').html(data);}
                        });
                    window.location.href= $(this).prop('href');
                });
                </script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T21:48:56.157

为了使其正常工作，您需要将异步设置为 false。

见[http://jsfiddle.net/5nwu7/3/](http://jsfiddle.net/5nwu7/3/)

```
<script type='text/javascript'>
                jQuery('span.email a').on('click',function (){
                    jQuery.ajax({
                        type: 'POST',
                        url: '', //url here
                        data: {comment: 'Email Sent', category : 'EE', store_id: '" . $this->store_id . "'},
                        success: function (data){jQuery('#alerts').html(data);},
                        async: false
                    });
                //You don't need this ---window.location.href= $(this).prop('href');
            });
            </script> 
```

This is because some browsers will cancel your current ajax request when opening the mail client. You can test this by going to that jsfiddle I posted and removing the async line (tested in chrome 23.0.1271.97 m, windows 7, outlook 2007.)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T21:09:23.433

你不需要`window.location.href= $(this).prop('href');`. 如果你只是让点击继续正常，它应该做你想做的事。

# fortran - fortran中的sizeof

> ID：14164967
> 
> 赞同：4
> 
> 时间：2013-01-04T21:06:47.547
> 
> 标签：fortran, sizeof

在 C 代码中看到以下内容很常见：

```
malloc(sizeof(int)*100); 
```

这将返回一个指向足以容纳 100 个整数的内存块的指针。fortran中是否有任何等价物？

* * *

用例：

我有一个二进制文件，打开为：

```
open(unit=10,file='foo.dat',access='stream',form='unformatted',status='old') 
```

我知道该文件包含“记录”，其中包含一个包含 20 个整数、20 个实数和 80 个字符的标题，然后是另一个`N`实数。每个文件可以有数百条记录。基本上，我想读取或写入此文件中的特定记录（`N`为简单起见，假设是一个固定常量）。

如果我知道每种数据类型的大小，我可以很容易地计算出我想要写入的文件中的位置：

```
header_size = SIZEOF_INT*20 + SIZEOF_FLOAT*20 + SIZEOF_CHAR*80
data_size = N*SIZEOF_FLOAT
position = (record_num-1)*(header_size+data_size)+1 
```

目前我有

```
!Hardcoded :-(
SIZEOF_INT = 4
SIZEOF_FLOAT = 4
SIZEOF_DOUBLE = 8
SIZEOF_CHAR = 1 
```

有没有办法做得更好？

**约束：**

*   该代码旨在使用各种编译器在各种平台上运行。符合标准的解决方案绝对是首选。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T21:35:54.923

在您的用例中，我认为您可以使用

```
inquire(iolength=...) io-list 
```

这将为您提供 io-list 需要多少个“文件存储单元”。使用 Fortran 计算文件中的偏移量的一个警告是，“文件存储单元”不必以字节为单位，实际上我记得一个非常流行的编译器默认使用单词（4 个字节）作为文件存储单元。但是，通过使用 iolength 事物，您无需担心这个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-14T20:26:33.900

@janneb 的答案将解决 OP 的问题，但它没有回答 Fortran 的“sizeof”问题。

`inquire`和的组合`file_storage_size`将给出类型的大小。试试这个代码：

```
program sizeof
    use iso_fortran_env
    integer :: num_file_storage_units
    integer :: num_bytes
    inquire(iolength=num_file_storage_units) 1.0D0
    num_bytes = num_file_storage_units*FILE_STORAGE_SIZE/8
    write(*,*) "double has size: ", num_bytes
end program sizeof 
```

请参阅： http: [//gcc.gnu.org/onlinedocs/gfortran/ISO_005fFORTRAN_005fENV.html](http://gcc.gnu.org/onlinedocs/gfortran/ISO_005fFORTRAN_005fENV.html) [http://h21007.www2.hp.com/portal/download/files/unprot/fortran/docs/lrm/lrm0514.htm](http://h21007.www2.hp.com/portal/download/files/unprot/fortran/docs/lrm/lrm0514.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T23:12:58.257

如果所有记录都相同，这似乎是使用直接访问而不是流访问的情况。然后不要计算文件中的位置，你告诉编译器你想要的记录，它就会访问它。除非您希望这些文件可以跨平台移植或记录不完全相同……那么您必须有更多的控制权或计算记录的长度。虽然最初的 Fortran 90 概念是根据所需的精度声明变量，但现在有可移植的方法来按大小声明变量。使用已经提到的 iso_c_binding 模块或 iso_fortran_env 模块提供的类型。

# iphone - iOS - 在后台执行多个写入核心数据的 AFJSONRequestOperations

> ID：14164971
> 
> 赞同：1
> 
> 时间：2013-01-04T21:06:52.150
> 
> 标签：iphone, ios, core-data, afnetworking, nsoperationqueue

我无法确定管理我的应用程序 SQLite 数据库更新的最佳方式（使用 Core Data）

当我的应用程序启动时，它会访问服务器以确定哪些表需要更新。然后我为这些表中的每一个进行服务调用。一旦我为每个返回 JSON，它就会在我的 SQLite DB 中创建/更新相应的对象。

我正在做的工作，因为它执行每个请求并更新每个需要的表 - 但我认为我没有正确执行此操作。

这样做仍然会锁定我的 UI 线程，并且我需要能够每 10 分钟左右在后台异步运行此代码。

```
AFJSONRequestOperation* operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

        NSMutableArray *operations = [NSMutableArray new];

        //for each of the tables that need updating, create a AFJSONRequestOperation
        for(NSString *str in [JSON valueForKey:@"Views"])
        {

            NSString* path = [NSString stringWithFormat:@"cache/%@/?deviceUID=%@&token=%@", str, @"00000-00000-0000-00001", [_globals getToken]];
            NSURLRequest* request = [client requestWithMethod:@"GET" path:path parameters:nil];
            AFJSONRequestOperation* operation2 = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) 
            {
                   [self updateTable:str withJSON:JSON];
            } 
            failure:nil];

            [operations addObject:operation2];
        }

        //AFHTTPClient
        [client enqueueBatchOfHTTPRequestOperations:operations progressBlock:nil completionBlock:^(NSArray *operations) {
            //this gets called way before the objects are done updating to the DB
            NSLog(@"DONE ALL REQUESTS");
            [_HUD hide:YES]; // getting called after getting all of the JSON not after all tables are updated
        }];

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {

        [_HUD hide:YES];

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Failed" message:[error localizedDescription] delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles: nil];
        [alert show];
    }];

    [operation start]; 
```

这是我的 updateTable 函数，只有 1 个条件

```
- (void)updateTable:(NSString *)tblName withJSON:(id)JSON
{
    for(NSDictionary *record in [JSON valueForKey:@"Records"])
            {
                NSString *viewName = [[record valueForKey:@"ViewName"] lowercaseString];

                //Worker
                if([viewName isEqualToString:[[NSString stringWithFormat:@"Worker_vw_iSales"] lowercaseString]])
                {
                    if([Worker doesWorkerExist:[record valueForKey:@"JSONData"]])
                    {
                        NSLog(@"deleting old worker");
                        [ad.managedObjectContext deleteObject:[Worker doesWorkerExist:[record valueForKey:@"JSONData"]]];

                    }

                    NSEntityDescription *desc = [NSEntityDescription entityForName:NSStringFromClass([Worker class]) inManagedObjectContext:ad.managedObjectContext];
                    Worker *worker = [[Worker alloc] initWithEntity:desc insertIntoManagedObjectContext:ad.managedObjectContext];
                    [worker initWithJSONSting:[record valueForKey:@"JSONData"]];
                    NSLog(@"Creating Worker: %@", worker.firstName);

                }
    }
} 
```

我希望这不会太令人困惑——如果是这样，我可以尝试解释更多。

我可能完全错了，如果我只是让我知道。我尝试了其他一些事情，包括使用 NSOperationQueue 而不是 AFHHTTPs，`enqueueBatchOfHTTPRequestOperations:requests`但我无法获得我正在寻找的行为。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T23:49:51.697

您现在正在寻找的是`setSuccessCallbackQueue:`AFJSONRequestOperation。除非另有说明，否则 AFNetworking 将所有成功块设置为在主队列上运行。

我所做的是

```
@implementation myClass {
    dispatch_queue_t backgroundQueue;
}

- (id)init
{
    if (self = [super init]){
        backgroundQueue = dispatch_queue_create("com.proj.myClass", 0);
    }
    return self;
}

- (void)doSomeStuff
{
    NSMutableURLRequest *request = [[myAFAPIClient sharedClient] requestWithMethod:@"GET" path:path parameters:params];
    AFJSONRequestOperation *myOperation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    //Success Block
    }
    failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) { 
    }];
[myOperation setSuccessCallbackQueue:backgroundQueue];
[[myAFAPIClient sharedClient].operationQueue addOperation:myOperation];
} 
```

所以不同的是你正在排队操作，我只是将它们直接添加到客户端。

此外，在我有 //Success Block 的地方，我会做各种各样的事情，例如将其他方法分派到 backgroundQueue 上，这些方法会发出更多 JSON 请求，我没有任何问题。

# c - C-within-R 代码中的特征值计算

> ID：14164972
> 
> 赞同：5
> 
> 时间：2013-01-04T21:06:52.553
> 
> 标签：c, r, eigenvalue

我正在编写使用已编译 C 代码的 R 代码。

从“编写 R 扩展”文档中，我了解到可以从 C 代码调用许多 R 可执行文件/DLL。头文件“Rmath.h”列出了许多可用的函数，其源代码列在此网站上：[http ://svn.r-project.org/R/trunk/src/nmath/](http://svn.r-project.org/R/trunk/src/nmath/)

我需要计算许多矩阵的奇异值分解，但是我在上述网站上找不到执行此操作的子程序。（所以我假设 Rmath.h 不包含 SVD 子例程）有没有简单的方法在 C-within-R 代码中进行特征值计算？

非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T21:41:34.843

如果您愿意使用 Rcpp 及其相关软件包，现有示例`fastLm()`将向您展示如何使用

*   通过 RcppEigen 的特征
*   犰狳通过 RcppArmadillo
*   通过 RcppGSL 的 GSL

后两者将使用与 R 相同的 BLAS，并且 Eigen 有一些内部的东西，通常可以更快。所有的包都`lm()`使用语言提供的分解来实现（通常使用solve或related，但是一旦你有工具链为你工作，切换到SVD就很简单了）。

**编辑：** 这是一个明确的例子。使用以下 C++ 代码：

```
#include <RcppArmadillo.h>   

// [[Rcpp::depends(RcppArmadillo)]] 

// [[Rcpp::export]]   
arma::vec getEigen(arma::mat M) { 
    return arma::eig_sym(M);      
} 
```

保存在文件“eigenEx.cpp”中。然后只需要这个 R 代码：

```
library(Rcpp)               ## recent version for sourceCpp()
sourceCpp("eigenEx.cpp")    ## converts source file into getEigen() we can call 
```

这样我们就可以运行它：

```
set.seed(42)        
X <- matrix(rnorm(3*3), 3, 3)
Z <- X %*% t(X)              

getEigen(Z)                 ## calls function created above 
```

我得到了与 R 完全相同的特征向量。它真的没有变得容易得多。

它还让犰狳选择用于特征分解的方法，正如大卫暗示的那样，这比成熟的 SVD 更快（参见犰狳文档）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T21:35:41.743

您可以使用许多可用的线性代数 (lapack) 库之一。[这](http://icl.cs.utk.edu/lapack-for-windows/lapack/)是一个解释如何获取 Windows 的 lapack 库的链接。GOTOBLAS 和 ACML 是免费的。MKL 也可免费用于非商业用途。一旦你安装了这些库，你正在寻找的函数是 sgesvd（用于浮点数）或 dgesvd（用于双精度数）。

以下是英特尔关于如何使用 gesvd 的几个示例。

1.  [行专业](http://software.intel.com/sites/products/documentation/doclib/mkl_sa/11/mkl_lapack_examples/lapacke_sgesvd_row.c.htm)
2.  [少校](http://software.intel.com/sites/products/documentation/doclib/mkl_sa/11/mkl_lapack_examples/lapacke_sgesvd_col.c.htm)

如果您使用的是 Linux，请查看[GNU SL](http://www.gnu.org/software/gsl/manual/html_node/Singular-Value-Decomposition.html)和[Eigen](http://eigen.tuxfamily.org/dox/TopicLinearAlgebraDecompositions.html)。这些库通常可以从发行版的包管理器中安装。

# c# - 如何连接两个 IEnumerable 进入一个新的 IEnumerable ?

> ID：14164974
> 
> 赞同：248
> 
> 时间：2013-01-04T21:07:00.473
> 
> 标签：c#, .net, ienumerable, concatenation

我有两个实例`IEnumerable<T>`（具有相同的`T`）。我想要一个新实例，`IEnumerable<T>`它是两者的串联。

.NET 中是否有内置方法可以做到这一点，还是我必须自己编写？

* * *

## 回答 #1

> 赞同：406
> 
> 时间：2013-01-04T21:07:58.733

是的，LINQ to Objects 支持这一点[`Enumerable.Concat`](http://msdn.microsoft.com/en-us/library/bb302894.aspx)：

```
var together = first.Concat(second); 
```

注意：应该`first`或`second`为 null 您将收到一个`ArgumentNullException`. 为了避免这种情况 & 像对待空集一样对待空值，请使用空值合并运算符，如下所示：

```
var together = (first ?? Enumerable.Empty<string>()).Concat(second ?? Enumerable.Empty<string>()); //amending `<string>` to the appropriate type 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-01-31T17:29:03.577

该`Concat`方法将返回一个对象，该对象`IEnumerable<T>`通过返回一个对象（称为 Cat）来实现，该对象的枚举器将尝试按顺序使用两个传入的可枚举项（称为 A 和 B）。如果传入的可枚举表示的序列在 Cat 的生命周期内不会改变，并且可以从没有副作用的情况下读取，则可以直接使用 Cat。否则，调用并使用结果可能是个好主意`ToList()`（`Cat`这`List<T>`将代表 A 和 B 内容的快照）。

一些 enumerables 在枚举开始时拍摄快照，如果在枚举期间修改了集合，则会从该快照返回数据。如果 B 是这样一个可枚举的，那么在 Cat 到达 A 的末尾之前发生的对 B 的任何更改都将显示在 Cat 的枚举中，但之后发生的更改不会。这样的语义可能会令人困惑；拍摄 Cat 的快照可以避免此类问题。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-09-27T11:31:19.823

您可以将以下代码用于您的解决方案：-

```
public void Linq94() 
{ 
    int[] numbersA = { 0, 2, 4, 5, 6, 8, 9 }; 
    int[] numbersB = { 1, 3, 5, 7, 8 }; 

    var allNumbers = numbersA.Concat(numbersB); 

    Console.WriteLine("All numbers from both arrays:"); 
    foreach (var n in allNumbers) 
    { 
        Console.WriteLine(n); 
    } 
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-07-21T09:03:16.777

我知道这是一个相对较旧的帖子，但是如果您想连接多个 IEnumerable，我使用以下

```
var joinedSel = new[] { first, second, third }.Where(x => x != null).SelectMany(x => x); 
```

这消除了任何空 IEnumerable 并允许多个连接。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2014-01-31T10:58:23.213

```
// The answer that I was looking for when searching
public void Answer()
{
    IEnumerable<YourClass> first = this.GetFirstIEnumerableList();
    // Assign to empty list so we can use later
    IEnumerable<YourClass> second = new List<YourClass>();

    if (IwantToUseSecondList)
    {
        second = this.GetSecondIEnumerableList();  
    }
    IEnumerable<SchemapassgruppData> concatedList = first.Concat(second);
} 
```

# mysql - MySQL 结果集到数组以在 WHERE 子句中使用

> ID：14164977
> 
> 赞同：0
> 
> 时间：2013-01-04T21:07:09.297
> 
> 标签：mysql, sql

我一直在尝试了解它是如何工作的，到目前为止，我找到了一种解决方法，但它并不像我希望的那么好。

假设我从这样的查询中得到一些结果集：

```
SELECT id FROM photos WHERE some clause 
```

而且我想将结果集放在 where 子句中，如下所示：

```
SELECT * FROM tags WHERE photo_id IN ( array I just received ) 
```

我将如何使用嵌套查询来做到这一点？我尝试查找子查询无济于事。联接不是我的强项，但我担心在这种情况下我会需要它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:08:49.737

```
SELECT * FROM tags WHERE photo_id IN (SELECT id FROM photos WHERE some clause) 
```

但这也应该有效：

```
SELECT tags.* FROM tags INNER JOIN photos ON (tags.photo_id=photos.id AND some clause) 
```

# sql - Time.now.beginning_of_year 不在年初开始

> ID：14164978
> 
> 赞同：2
> 
> 时间：2013-01-04T21:07:10.433
> 
> 标签：sql, ruby-on-rails, date, activerecord

试图获取今年创建的记录时，我偶然发现了[这个好问题](https://stackoverflow.com/questions/2919720/how-to-get-record-created-today-by-rails-activerecord)。第二个答案说您可以通过以下方式从今天创建的模型中获取所有记录：

```
Model.where("created_at >= ?", Time.now.beginning_of_day) 
```

所以，自然地，我尝试了同样的事情`Time.now.beginning_of_year`，它工作得很好。

然而，让我感到有趣的是输出的查询（我在控制台中尝试过）是

```
SELECT COUNT(*) FROM `invoices` WHERE (created_at >= '2012-12-31 23:00:00') 
```

我不知道2013年已经开始于2012-12-31 23:00:00？怎么样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T01:27:55.567

如果您还没有设置它，您应该在`config/application.rb`文件中设置您的时区。查找以 开头的行`config.time_zone`。（如果您不确定要给出什么值，可以运行`rake time:zones:all`以获取所有可用时区的列表。）

设置时区后，您应该使用`Time.zone.now`，而不是`Time.now`. 这将正确地将您的时间“范围”到您的时区。

检查[API](http://api.rubyonrails.org/classes/ActiveSupport/TimeWithZone.html)以获取更多详细信息`TimeWithZone`。

# sql-server - How can I tell which file failed in a SQL Server SSIS MULTIFLATFILE connection when loading into a table from the files?

> ID：14164984
> 
> 赞同：0
> 
> 时间：2013-01-04T21:07:29.483
> 
> 标签：sql-server, ssis

I am loading 30 files at a time using a MULTIFLATFILE connection from SSIS into a raw table. These files are constantly coming in and a job loops through to exec the package and pick these up. Some of the files can have bad data every once in a while. I am having trouble when one of the 30 files is bad. I have no way to know which of the files actually failed so I can move it into a Suspect folder, roll the other 29 files back into my Input folder and try again. Can't find any info on the net on this, or in Microsoft's documentation. Any help appreciated. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T05:12:54.827

我将使用 FLATFILE 类型重建您的连接，然后在将变量设置为文件名的 Foreach 循环容器中使用它。在 Connection 定义中，您可以使用 Expression 将 ConnectionString 属性设置为您的 Variable 值。

然后，当您的“坏”情况发生时，您可以使用该变量值采取您需要的任何操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-19T07:46:03.067

配置平面文件源组件的 FileNameColumnName 属性。这将添加一个包含文件名的列。

# python - 如何设置标头（用户代理）、检索网页、捕获重定向和接受 cookie？

> ID：14164985
> 
> 赞同：3
> 
> 时间：2013-01-04T21:07:31.077
> 
> 标签：python, python-3.x, urllib

```
import urllib.request
url="http://espn.com"
f = urllib.request.urlopen(url)
contents = f.read().decode('latin-1')
q = f.geturl()
print(q) 
```

此代码将返回`http://espn.go.com/`，这就是我想要的——重定向网站 URL。在查看了 Python 文档、谷歌搜索等之后，我不知道如何：

1.  捕获重定向的网站 URL（已经工作）
2.  更改发出请求的用户代理
3.  接受网页可能想要发回的任何 cookie

我如何在 Python 3 中做到这一点？如果有比 更好的模块`urllib`，我可以接受。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T21:17:38.237

有一个更好的模块，它被*称为*[`requests`](https://requests.readthedocs.io/)：

```
import requests

session = requests.Session()
session.headers['User-Agent'] = 'My-requests-agent/0.1'

resp = session.get(url)
contents = resp.text  # If the server said it's latin 1, this'll be unicode (ready decoded)
print(resp.url)       # final URL, after redirects. 
```

`requests`遵循重定向（检查`resp.history`以查看它遵循的重定向）。通过使用会话（可选），cookie 被存储并传递给后续请求。您可以*为每个请求*或*每个会话*设置标头（因此，为该会话发送的每个请求都会发送相同的额外标头）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-05T09:35:02.970

使用 urllib (python3) 的简单演示：

```
#!/usr/bin/env python3
#-*- coding:utf-8 -*-

import os.path
import urllib.request
from urllib.parse import urlencode
from http.cookiejar import CookieJar,MozillaCookieJar

cj = MozillaCookieJar()
opener = urllib.request.build_opener(urllib.request.HTTPCookieProcessor(cj))
urllib.request.install_opener(opener)

cookie_file=os.path.abspath('./cookies.txt')

def load_cookies(cj,cookie_file):
    cj.load(cookie_file)
def save_cookies(cj,cookie_file):
    cj.save(cookie_file,ignore_discard=True,ignore_expires=True)

def dorequest(url,cj=None,data=None,timeout=10,encoding='UTF-8'):
    data = urlencode(data).encode(encoding) if data else None

    request = urllib.request.Request(url)
    request.add_header('User-Agent','Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)')
    f = urllib.request.urlopen(request,data,timeout=timeout)
    return f.read()

def dopost(url,cj=None,data=None,timeout=10,encoding='UTF-8'):
    body = dorequest(url,cj,data,timeout,encoding)
    return body.decode(encoding) 
```

如果发生重定向（30x），您应该检查标题。

# iphone - ZUUIRevealControllerrevealToggle 方法调用？

> ID：14164991
> 
> 赞同：0
> 
> 时间：2013-01-04T21:08:06.267
> 
> 标签：iphone

我正在使用 ZUUIRevealViewController。有人知道如何从我的frontviewcontroller 视图中包含的按钮而不是导航栏按钮调用revealToggle 方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T22:07:14.277

你可以打电话：

```
[self.navigationController.parentViewController revealToggle:nil]; 
```

**编辑：**

你需要投

```
[(ZUUIRevealController *)self.navigationController.parentViewController revealToggle:nil]; 
```

# android - 如何使布局中间的小部件伸展以填充Android中的父级

> ID：14164992
> 
> 赞同：2
> 
> 时间：2013-01-04T21:08:12.803
> 
> 标签：android, android-linearlayout, fill

我有一个 Android 布局问题。我有一个显示器，我在其中将一些文本放入视图的中间，顶部有一个标题，底部有三个按钮。我遇到的问题是让 TextView（位于 ScrollView 内）拉伸以填满可用的屏幕空间。如果我将 ScrollView 的 layout_height 设置为“fill_parent”，则三个按钮将被推离屏幕底部。如果我将其设置为“wrap_content”，则它仅与支持放入 TextView 中的文本一样大。

这是我正在使用的布局的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout android:orientation="horizontal"
    android:gravity="top"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >
    <ImageView android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher">
    </ImageView>
    <TextView android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center_vertical"
        style="@android:style/TextAppearance.Large"
        android:text="@string/meetingdetail" />
</LinearLayout>

<ScrollView
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent">
    <TextView android:id="@+id/meeting"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        style="@android:style/TextAppearance.Medium" />
</ScrollView>

<Button android:id="@+id/navigation"
    android:text="@string/naviation"
    android:onClick="meetingInfoOnClick"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

<Button android:id="@+id/mapsingle"
    android:text="@string/mapsingle"
    android:onClick="meetingInfoOnClick"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

<Button android:id="@+id/goback"
    android:text="@string/goback"
    android:onClick="meetingInfoOnClick"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

有人可以建议什么最能使带有 TextView 的 ScrollView 填满可用空间但仍然允许三个按钮出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:18:25.687

将 ScrollView 的高度设置为**0dp**并将其权重设置为**1**。

```
<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1" >

<TextView android:id="@+id/meeting"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    style="@android:style/TextAppearance.Medium" />
</ScrollView> 
```

但是，如果您不打算拥有多个可滚动视图，则应删除 ScrollView 并使用：

```
 android:scrollbars="vertical" 
```

TextView 上的属性，因为 TextView 本身是可滚动的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T21:19:57.373

只需将您的 ScrollView 标记代码替换为..

```
<ScrollView
android:layout_width="fill_parent" 
android:layout_height="wrap_content"
android:layout_weight="1">
<TextView android:id="@+id/meeting"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    style="@android:style/TextAppearance.Medium" />
</ScrollView> 
```

它会正常工作，如果您仍有任何问题，请告诉我。如果有效，则接受作为答案。

# javascript - SoundManager 2 360Ui 安装

> ID：14164993
> 
> 赞同：1
> 
> 时间：2013-01-04T21:08:20.040
> 
> 标签：javascript, jquery, html, soundmanager2

我正在尝试安装 SoundManager 的[360Ui](http://www.schillmania.com/projects/soundmanager2/demo/360-player/)播放器。

但我似乎无法确定它。

这是我标题中的 jQuery 代码：

```
<script type="text/javascript" src="wp-content/themes/medium/includes/js/soundmanager2-nodebug.js" charset="utf-8"></script>
<script type="text/javascript" src="wp-content/themes/medium/includes/js/excanvas.js" charset="utf-8"></script>
<script type="text/javascript" src="wp-content/themes/medium/includes/js/berniecode-animator.js" charset="utf-8"></script>
<script type="text/javascript" src="wp-content/themes/medium/includes/js/360player.js" charset="utf-8"></script>
...

<script type="text/javascript">

    //some soundmanager settings
    soundManager.url = 'wp-content/themes/medium/swf/';
    soundManager.flashVersion = 9;
    soundManager.useHTML5Audio = true;
    soundManager.debugMode = false;

    </script> 
```

和 HTML 调用：

```
<div class="ui360">
 <!-- dynamically-inserted block -->
 <div class="ui">
  <canvas class="sm2-canvas"></canvas>
  <span class="sm2-360btn"></span> 
  <div class="sm2-timing"></div>
  <div class="sm2-cover"></div>
 </div>
 <!-- /UI -->
 <a href="http://**.**.**.**:8000/live">
</div> 
```

由于某种原因，小播放按钮出现，一秒钟后消失。

*   我正在寻找放置[大型](http://www.schillmania.com/projects/soundmanager2/demo/360-player/canvas-visualization.html)播放器演示，但我似乎无法正确启动该播放器。
*   Demo 文件夹中的所有 js 文件和 css 文件都已注册。

[我的网站](http://www.tranceil.fm/new)

它应该出现在左侧面板上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:11:51.787

如果您检查 firebug 控制台，您将看到`http://tranceil.fm/new/readerPlayer.php`返回 301 重定向的 GET 请求，这可能是导致问题的原因

![在此处输入图像描述](../Images/bb6d278ee25d43ffc1f1c90cfa79ae4b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-05T21:52:31.033

我知道这是几年前问过的，但我被困在同一件事上，这就是我解决它的方法。

您需要包含第二个名为**360player-visualization.css的 CSS 文件。**

```
<link href="360-player/360player.css" rel="stylesheet">
<link href="360-player/360player-visualization.css" rel="stylesheet"> 
```

然后在 HTML 中，也包括`ui360-vis`类名。

```
<div class="ui360 ui360-vis">
    <a href="/link/to/audio.mp3"></a>
</div> 
```

就像你拥有它一样，你还应该有一个自定义 CSS 来增加播放器的大小：

```
.ui360,
.sm2-360ui {
    width:250px;
    height:250px;
} 
```

正如你所拥有的，三个必需的 JS 文件：

```
<script src="360-player/script/berniecode-animator.js"></script>
<script src="soundmanager2-nodebug-jsmin.js"></script>
<script src="360-player/script/360player.js"></script> 
```

# ruby - 顶级程序从 ruby 返回的值比 linux 上的 bash 少

> ID：14164994
> 
> 赞同：1
> 
> 时间：2013-01-04T21:08:19.640
> 
> 标签：ruby, linux, bash, shell

我正在尝试将 top 的结果合并到一个 ruby​​ 程序中。但是当在 ruby​​ 的子 shell 中调用时，top 的行为与直接在 shell 中运行时不同。具体来说，当从 ruby​​ 运行时，它会排除许多结果。

例如，`top -bn1 | wc -l`在 bash 中运行会返回“133”。使用反引号从 irb 运行相同的命令会返回“17”。

为什么从 shell 调用 top 和从子 shell 调用有区别？如何在 ruby​​ 脚本中获得 top 的完整输出？

# 笔记

我正在运行 Ubuntu 12.04.1 LTS（精确）。这个问题不会出现在 mac OS X 上，它提供了完全不同的 top 版本。

使用“-d”延迟标志似乎并没有改变行为。也不会增加迭代次数。

我知道 ps 返回许多与 top 相同的统计信息，但我对 top 对 CPU 使用率的估计特别感兴趣，它的计算方式不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T22:25:04.353

显然，`top`在 ruby​​ 中运行时尊重终端的大小。我敢打赌你的终端尺寸是 17 行高。尝试删除 ENV 哈希中的 LINES 条目：

```
$ irb
irb(main):001:0> %x{top -bn1 | wc -l}
=> "36\n"
irb(main):002:0> ENV.delete 'LINES'
=> "36"
irb(main):003:0> %x{top -bn1 | wc -l}
=> "169\n" 
```

如果你想知道有多少进程正在运行，你可以从 ruby​​ 编写：

```
num = Dir.glob('/proc/*').select {|d| File.directory? d and d.match(/\/\d+$/)}.length 
```

对于 CPU 使用率，也许：

```
idle = %x{vmstat 1 2}.split[-2].to_i
usage = 100 - idle 
```

# jquery - ajax/jQuery .load() 函数只返回文本而不是图像或背景文件

> ID：14164996
> 
> 赞同：0
> 
> 时间：2013-01-04T21:08:32.413
> 
> 标签：jquery

每当我使用 .load() 函数将页面加载到 div 时，它只返回文本而不是背景图像或页面中的任何图像。

**索引.html**

```
<html>
<title> web page </title>
<body>
<div id="Content" >
</div>
<script type="text/javascript" src="jquery.js" ></script>
<script type="text/javascript" src="jquery.min.js" ></script>
</body
</html> 
```

**page.html** *（将加载到 div id="Content" 的页面）*

```
<html>
<title> web page </title>
<body>
<div>
<h1> WELCOME TO THIS LOADED PAGE </h1>
<img src="image.jpg" />
</div>
<script type="text/javascript" src="jquery.js" ></script>
<script type="text/javascript" src="jquery.min.js" ></script>
</body
</html> 
```

**jQuery.js** `$(document).ready(function(){ $('#content').load('page.html'); });`

它最终只显示**WELCOME TO THIS LOADED PAGE**，但不显示**page.html**中包含的图像。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:15:44.997

如果它没有在页面上显示任何图像，则您可能没有指向存储图像的正确位置。图像是否位于另一个目录中？

`<img src="image.jpg" />`

可能需要是这样的：

`<img src="./images/image.jpg" />`