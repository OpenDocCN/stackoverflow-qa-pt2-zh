# StackOverflow 问答 13212000-13212999

# macos - 如何在 Mac 上生成核心文件？

> ID：13212000
> 
> 赞同：0
> 
> 时间：2012-11-03T18:06:34.270
> 
> 标签：macos, debugging, gdb, core

我有一个程序，我希望在 gdb 中调试分段错误，但我不确定如何从中生成核心文件。

我试过`$ ulimit -c unlimited`了，但是当运行程序然后导航到 /cores/ 时，当我输入`ls`.

我在这里错过了什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:16:08.757

启用核心文件生成的方式取决于您的 shell。您显示的语法适用于使用`sh`或`bash`作为他们的 shell 的人，它应该可以正常工作。例如

```
% sh
sh-3.2$ cat>/tmp/a.c
int main ()
{
  void (*f)() = 0;
  f();
}
sh-3.2$ clang -g /tmp/a.c -o /tmp/a.out
sh-3.2$ ulimit -c unlimited
sh-3.2$ /tmp/a.out
Segmentation fault: 11 (core dumped)
sh-3.2$ ls -l /cores/core.10893 
-r--------  1 jason  admin  367714304 Nov 16 13:13 /cores/core.10893

sh-3.2$ gdb -q /tmp/a.out /cores/core.10893 
Reading symbols for shared libraries .. done
Reading symbols for shared libraries . done
Reading symbols for shared libraries 
warning: Could not find object file "/var/folders/5h/nlzqfv116jnc68g495d_3j4m0000gn/T/a-pUbMeU.o" - no debug information available for "/tmp/a.c".

.......................... done
#0  0x0000000000000000 in ?? ()
(gdb) add-dsym /tmp/a.out.dSYM 
Added dsym "/tmp/a.out.dSYM" to "[memory object "/private/tmp/a.out" at 0x10f5d7000]".
(gdb) bt
#0  0x0000000000000000 in ?? ()
#1  0x000000010f5d7f3d in main () at /tmp/a.c:4
(gdb) 
```

# search - 字符串模糊查找

> ID：13212002
> 
> 赞同：0
> 
> 时间：2012-11-03T18:06:46.173
> 
> 标签：search, data-structures, language-agnostic

这是一道面试题。

给定一个由名称组成的文件，您将使用什么数据结构来验证名称是否在列表中。如果我们说一个名称与文件中的名称相差不超过一个字符，那么它是有效的怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:24:46.937

For the first question (exact search), you can use a hash table or a trie. Bloom filters may tell you "No" earlier with a space overhead, but can never tell you a definite "Yes."

For the second question (fuzzy search), much more advanced techniques are needed. Check the blog at [http://blog.srch2.com/2012/03/fuzzy-search.html](http://blog.srch2.com/2012/03/fuzzy-search.html) to discuss different solutions to this problem.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T19:23:50.607

我会说这取决于上下文：如果你有数百万个名字，一份要履行的合同和一个为你做的产品，那么我会说去吧，忘记自己写它。

但是，在面试问题的背景下，我的建议是包含所有可能错误的[DAWG 。](http://en.wikipedia.org/wiki/Directed_acyclic_word_graph)

很久以前，我听说拼写检查器包含一个可能有错误的单词列表（而不是尝试匹配一个有效单词列表），但我不知道这是多么真实。

我曾经做过一次在单词列表中查找单词的问题（有错误），但它不仅限于一个错误，而且没有很多可用的内存。所以这些词被简单地存储为一个列表（DAWG 需要节点和指针，这将需要太多开销）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T09:13:19.953

我建议将文件中的名称存储到 trie 或 DAWG 中（更好的空间效率）。名称到达后，开始遍历数据结构。您将有 4 个变体：

1.  找到名称 --> 名称有效
2.  数据结构中的死胡同 --> 检查名称中剩余的字符数，如果不超过 1 --> 名称有效；否则无效。
3.  名称已结束且尚未到达结构中的叶子 --> 检查当前位置是否至少有一个叶子（将占用 O（字母大小）） --> 如果是，则名称有效；否则无效。
4.  在单词中间遇到的差异 --> 从下一个字符继续遍历 --> 不允许更多错误（从此时起，第 2 和第 3 段不再有效）。

# erlang - Erlang 集群

> ID：13212007
> 
> 赞同：17
> 
> 时间：2012-11-03T18:07:07.403
> 
> 标签：erlang, cloud, cluster-computing, distributed-computing

我正在尝试使用 Erlang 作为将所有这些结合在一起的粘合剂来实现一个集群。我喜欢它创建一个完全连接的节点图的想法，但是在在线阅读不同的文章时，似乎这不能很好地扩展（最多有 50 - 100 个节点）。OTP 的开发人员是否故意施加此限制？我确实知道您可以将节点设置为仅具有显式连接以及具有隐藏节点等。但是，似乎默认的开箱即用设置不是很有可扩展性。

所以对于问题：

1.  如果您有 5 个节点（A、B、C、D、E），它们都有明确的连接，例如 ABCDE。Erlang/OTP 是否允许 A 直接与 E 对话，或者 A 是否必须将消息从 B 传递到 D 才能到达 E，因此这就是全连接图的原因？同样，这是有道理的，但从我所看到的情况来看，它并不能很好地扩展。

2.  如果要尝试使用可扩展且容错的系统，您有什么选择？似乎，如果由于节点太多而无法创建完全连接的图，那么下一个最好的方法就是创建某种树。但是，这似乎不是很容错，因为如果根或子节点的任何父节点死亡，您将失去集群的很大一部分。

3.  在研究主管和工作人员时，我看到的所有示例都将其应用于单个节点上的进程。它可以应用于节点集群以帮助实现容错吗？

4.  节点可以是多个集群的一部分吗？

感谢您的帮助，如果我错过了一个半近期的网站或博文（大约 1 年前），我很乐意查看这些。但是，我已经很好地搜索了互联网。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-03T22:11:16.513

1.  是的，您可以将消息发送到集群中任何远程节点上的进程，例如，通过使用其进程标识符 (pid)。这称为位置透明度。是的，它可以很好地扩展（参见 Riak、CouchDB、RabbitMQ 等）。

2.  请注意，一个节点可以运行数十万个进程。Erlang 已被证明是非常可扩展的，并且是为容错而构建的。还有其他构建更大的方法，例如 CloudI 的 SOA 方法（见评论）。如果您*真的*需要， 您也可以构建使用[隐藏节点的集群。](http://www.erlang.org/doc/reference_manual/distributed.html#id83017)

**   在节点级别，您将采用不同的方法，例如，构建相同的节点，如果它们发生故障则易于替换，并且工作由其余节点接管。查看 Riak 如何处理这个问题（查看`riak_core`并查看博客文章[介绍 Riak Core](http://basho.com/blog/technical/2010/07/30/introducing-riak-core/)）。

    *   节点可以离开和进入一个集群，但不能同时成为多个集群的一部分。连接的节点共享一个用于识别连接节点的集群 cookie。您可以在 VM 运行时设置 cookie（请参阅[Distributed Erlang](http://www.erlang.org/doc/reference_manual/distributed.html)）。* 

 *阅读[http://learnyousomeerlang.com/](http://learnyousomeerlang.com/)以获得更大的好处。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-03T21:06:06.850

分发协议是关于提供稳健性，而不是可扩展性。您要做的是将集群分组为更小的区域，然后使用连接，这些连接不是在 Erlang 中分布，而是在 TCP 会话中。您可以运行 5 组，每组 10 台机器。这意味着这 10 台机器具有无缝的 PID 分布：您可以在另一台机器上调用一个 pid。但是分发到另一个组意味着你不能像这样无缝地解决这个组。

您通常需要 BGP 中的某种“路由反射”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-04T12:12:25.550

1）我认为您需要节点之间的直接连接才能在进程之间进行通信。但是，这确实意味着如果两个节点永远不会通信（例如，如果它们只是工作人员，而不是协调员），则您不需要所有节点之间的持久连接。

2）您可以创建一个不完全连接的erlang节点图。该文档很难找到，并且存在问题 - 您禁用了`global`处理集群中全局名称的系统，因此您必须通过本地注册的名称或远程节点上的本地注册名称来完成所有操作。或者只是使用 Pids，因为它们也可以工作。要像这样启动一个 erlang 节点，请使用`erl ... -connect_all false ...`. 我希望你知道你在做什么，因为我不能相信自己能做到这一点。

事实证明，不完全连接的 erlang 节点图是当前的研究课题。[RELEASE 项目](http://www.release-project.eu/)目前正致力于此，并提出了 S-groups 的概念，S-groups 本质上是完全连接的组。但是，节点可以是多个 S-group 的成员，并且不同 s-group 中的节点不必完全连接，但可以根据需要建立连接以进行直接的节点到节点通信。值得寻找他们的演示文稿，因为这项研究非常有趣。

另一件值得指出的事情是，有几个人发现你可以在一个全连接的集群中获得多达 150-200 个节点。你真的有比这更多节点的用例吗？除非你有一个荒谬的项目要做，否则 150 到 200 台非常强大的计算机肯定会做你可以扔给他们的大部分事情。

3）虽然您不能使用 启动不同节点上的进程`gen_server:start_link/3,4`，但您当然可以非常轻松地调用外部节点上的服务器。似乎他们忽略了在外部节点上启动服务器的能力，但这可能是有充分理由的——比如错误案例数量多得离谱。

4) 尝试查看隐藏节点，并查看未完全连接的集群。它们应该允许您根据需要对节点进行分组。

TL;DR：扩展很难，我们去购物吧。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T08:29:51.093

已经有一些很好的答案，所以我尽量简单。

1) 不，如果`A`和`E`不直接连接，`A`则无法与 交谈`E`。分发协议在直接 TCP 连接上运行 - 不包括路由。

2）我认为树结构已经足够好了——权衡总是存在的。

3) 没有“节点主管”，而是`erlang:monitor_node`你的朋友。

4) 是的。一个节点可以与来自不同“集群”的节点通信。在本地节点中，用于`erlang:set_cookie(OtherNode, OtherCookie)`访问具有不同 cookie 的远程节点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-17T14:35:09.250

1）是的。他们互相交谈

2) 3) 和 4) 一般来说，当构建一个可扩展和容错的系统时，你会希望，或者更多，需要将工作负载划分到不同的“区域”或“集群”。Supervisor/Worker 模型具有这样的构想，因此拓扑结构。您需要的是一些进程协调集群之间的工作，并且单个集群中的所有工作人员将相互交谈以在组内平衡。

如您所见，使用这种拓扑结构，只要您以平衡的方式仔细划分任务，“限制”就不是真正的限制。就个人而言，我相信在大型系统中，主管流程的树状结构是不可避免的，这就是我正在遵循的做法。原因各不相同，但归结为可伸缩性、作为回退策略实施的容错性、维护需求和集群的可移植性。

所以总而言之，

2）为您的主管使用树状拓扑。让员工明确地相互联系，并在自己的领域内与主管交谈。

3）虽然这是本机设计的环境，但我认为，我很确定主管可以与另一台机器上的工作人员交谈。我不建议这样做，因为在远程工作者场景中容错可能是地狱。

4）你不应该让一个节点同时成为两个不同集群的一部分。您可以将其从一个集群切换到另一个集群。*

# r - 在 fill.contour 函数中设置 endscale

> ID：13212015
> 
> 赞同：0
> 
> 时间：2012-11-03T18:08:26.077
> 
> 标签：r

我必须在不同时刻在世界地图上绘制一个物理变量。所以我必须制作很多情节，就像我必须绘制多少时刻一样。问题是我的例程默认设置了刻度的结尾，这使得阅读情节变得困难。我想修复刻度的末端，以便为所有地块设置一个刻度。这是一段我会重用的旧代码

```
 require(reshape)
  require(mapdata)
  require(mapproj)
  df <- read.table('/media/Lacie2/dati/hy.dat',head=F)
  names(df) <- c("value", "x", "y")#, "t")
  dfc <- cast(df[ ,-4], x ~ y)
  mm<-as.matrix(dfc,ncol=480,nrow=241)
  filled.contour(x=seq(0,360,length.out=480),y=seq(-90,90,length.out=241),mm,
  color.palette = colorRampPalette(c("lightblue", "blue","violet", "black")),
  xlab = "Longitude (°)", ylab = "Latitude (°)",
  plot.axes = {axis(1); axis(2);            
  map('world2Hires',
  xlim = c(0, 360), 
  ylim = c(-90, 90), 
  add = T, col = "black")}
 ) 
```

我不明白如何修理梯子的末端刻度。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T18:54:44.450

如果您只想绘制最多颜色，那么只需“修剪”`value`您传递给绘图例程的颜色：

```
df$trimval <- pmin(df$value, 2)  
 # the range in the example below is roughly -4.5 to 4.5 
```

...并使用该值作为 z 参数绘制到`contour.plot`. 下面的缩进代码和随机“值”参数：

```
require(reshape)
  require(mapdata)
  require(mapproj)
  df <- data.frame(value=rnorm( 480*241), x=seq(0,360,length.out=480),y=seq(-90,90,length.out=241) )
df$trimval <- pmin(df$value, 2)

  dfc <- cast(df[-1], x ~ y)
  mm<-as.matrix(dfc,ncol=480,nrow=241)
  filled.contour(x=seq(0,360,length.out=480),y=seq(-90,90,length.out=241),mm,
         color.palette = colorRampPalette(c("lightblue", "blue","violet", "black")),
         xlab = "Longitude (°)", ylab = "Latitude (°)",
         plot.axes = {axis(1); axis(2);            
                      map('world2Hires',
                      xlim = c(0, 360), 
                      ylim = c(-90, 90), 
                      add = T, col = "black")}
                ) 
```

因此，颜色范围在 2 处最大化，并且所有高于 2 的值都使用给定为 2 的颜色绘制。（我可能会提到我尝试使用 zlim，但结果并不像我想象的那样。）

# python - 在其他函数中调用函数？

> ID：13212022
> 
> 赞同：-1
> 
> 时间：2012-11-03T18:09:31.740
> 
> 标签：python

我真的坚持这一点，我需要在另一个函数中调用一个函数，在内部更改参数，但它让我说“浮动”对象是不可调用的。

例如：

```
def functioncall(f,epsilon):
   guess = 1.0
   for i in range(100):
      if f(guess) - guess < epsilon:
        return guess
      else:
        guess = f(guess) 
```

给我

```
File "C:/Users/Apoo/Dropbox/6.00x/midTermQuiz1/problem8.py", line 16, in functioncall
    if f(guess) - guess < epsilon:
TypeError: 'float' object is not callable 
```

我知道这样做是在调用函数 f 的值，在我的情况下它是一个浮点数，但是我该如何更改呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T18:18:50.623

您实际上是在传递函数的返回值，`f`而不是函数对象本身。

使用 just ：`functioncall(f,0.001)`调用时`functioncall`

如果您执行类似的操作`functioncall(f(<int here>),0.001)`，则它将返回的值`f(<int here>)`作为第一个参数发送并调用`(guess)`它会引发错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T18:12:33.653

为了使您编写的代码正常工作，传递给的第一个参数`functioncall`必须是函数或其他可调用对象。您正在传递一个 int 或 float。

# batch-file - 批处理命令有什么区别？

> ID：13212025
> 
> 赞同：0
> 
> 时间：2012-11-03T18:10:00.710
> 
> 标签：batch-file, dos

```
@echo off
cd %~dp0
md .\newfolder
for /f "usebackq delims=" %%f in ("list.txt") do (
  call set /a add=%%add%%+1
  call set addx=0000%%add%%
  call set addx=%%addx:~-3%%
  call copy "%%f" ".\newfolder\%%addx%%_%%f"
)
pause 
```

我做了简单的改名代码。我通常使用不带“调用”的命令，但这里会显示错误消息。这是为什么？..当我使用 %variable% 而不是 %%variable%% 时，它不能很好地工作.. 请告诉我为什么会发生.. 最后一个问题.. 环境变量的值被存储到退出 cmd 。我想知道如何取消它..谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T23:07:55.413

带括号的块中的所有代码都一次性解析。使用百分比的正常变量扩展发生在解析时。因此，如果您在块中设置变量，则无法使用正常扩展访问该值，因为该值将是您进入块之前存在的值。

你有上述情况。有两种经典的方法可以解决这个问题。

1）您可以使用 CALL 并将百分比加倍。CALL 解决了这个问题，因为被调用行的正常扩展发生了两次——一次是整个块，一次是在执行该行之前，但在块中的前几行已经执行之后。第一个扩展将双百分比转换为单百分比，第二个扩展实际上扩展了变量。

我不喜欢这个解决方案，因为它很慢，还因为 CALL 会导致引用`^`字符出现问题 - 它们加倍。

您可以在同一命令上使用多个 CALL。每次通话都要求百分比翻倍。所以一个 CALL 需要 2%，两个 CALL 需要 4%，三个 CALL 需要 8%，等等。

2）我认为首选的解决方案是使用延迟扩展。它速度更快，而且当您使用延迟扩展时，您不必担心转义或引用特殊字符，如`&`, `|`,等。延迟扩展正如它所说的那样 - 直到执行该行之前变量才被扩展。延迟扩展必须先启用，然后才能使用。在批处理文件中，您可以使用.`>``<``setlocal enableDelayedExpansion`

延迟扩展可能发生的一个问题是，如果 FOR 变量包含`!`并且在扩展时启用了延迟扩展，则它们会损坏。这通常可以通过在循环中打开和关闭延迟扩展来解决。

* * *

如果您`HELP SET`从命令提示符键入，您将很好地描述在代码块中扩展变量的问题，以及延迟扩展如何提供帮助。描述从单词的一半开始*`Finally, support for delayed environment variable expansion...`*。

* * *

注意 - 在 SET /A 计算中使用时，您不需要扩展变量。SET /A 将在执行时自动扩展值。未定义的变量被视为零。

在您的代码中，您可以简单地使用`set /a add=add+1`

但是还有一种更简单的速记方式——你可以使用`+=`操作符：`set /a add+=1`。

* * *

这是无需使用 CALL 即可编写代码的另一种方式。代码未经测试，但我认为我做对了。

```
@echo off
setlocal disableDelayedExpansion
cd "%~dp0"
md newfolder
set add=0
for /f "usebackq eol=: delims=" %%F in ("list.txt") do (
  set /a add+=1
  set "file=%%F"
  setlocal enableDelayedExpansion
  set "addx=00!add!"
  copy "!file!" "newfolder\!addx:~-3!_!file!"
  endlocal
)
pause 
```

我显式初始化`add`为 0，因为它可能已经设置为一个值。如果您知道它未定义或已设置为 0，则不需要初始化。

您的 FOR 循环正在处理文件名，并且`!`在文件名中有效。这就是我在循环中打开和关闭延迟扩展的原因 - 我不希望`!`在扩展时损坏文件名`%%F`。文件名也可以以开头`;`（尽管不太可能）。如果是这样，则 FOR 将跳过该文件，因为默认 EOL 字符是`;`. 文件永远不能以 . 开头`:`，所以我喜欢将 EOL 设置为`:`。

我将 SETLOCAL 放在顶部附近，以便在批处理文件完成后环境变量定义不会持续存在。

# android - 在android中列出带有操作按钮的项目

> ID：13212028
> 
> 赞同：3
> 
> 时间：2012-11-03T18:10:23.437
> 
> 标签：android, android-layout, android-listview

我正在尝试在 Android 中创建一个列表，其中每个项目都有一个或多个操作按钮，如此处显示的数字 2：

![](../Images/5d2d1de76d3ba8fd43aef5bcc6b2bce6.png)

是否有任何预定义的方式或模板来执行此操作，或者我是否必须手动为列表中的项目创建视图以及它们的分隔符、操作按钮和所有内容？（如果是这样的话，我也会感谢一些帮助:)）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T18:22:32.977

您必须为行创建自己的布局。（您不需要做分隔符。）

我在我的一个应用程序中执行此操作。这是我用于我的项目的布局之一：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent" 
    android:layout_height="match_parent">

    <ImageView
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:contentDescription="@string/contentDescription_itemIcon"
        android:src="@drawable/album_placeholder" />

    <Button
        android:id="@+id/playButton"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:focusable="false"
        android:focusableInTouchMode="false" />

    <Button
        android:id="@+id/queueButton"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@id/playButton"
        android:focusable="false"
        android:focusableInTouchMode="false" />

    <TextView
        android:id="@+id/mainText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="4dp"
        android:layout_toLeftOf="@id/queueButton"
        android:layout_toRightOf="@id/icon"
        android:text="@string/placeholder_mainText" />

    <TextView
        android:id="@+id/rightAdditionalText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@id/leftAdditionalText"
        android:layout_marginRight="4dp"
        android:layout_toLeftOf="@id/queueButton"
        android:text="@string/placeholder_rightText" />

    <TextView
        android:id="@+id/leftAdditionalText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@id/mainText"
        android:layout_below="@id/mainText"
        android:layout_marginTop="0dp"
        android:layout_toLeftOf="@id/rightAdditionalText"
        android:text="@string/placeholder_leftText" />

</RelativeLayout> 
```

这是我使用的适配器：

```
private class ItemAdapter extends ArrayAdapter<T> {
    private int rowLayoutId;

    public ItemAdapter(Context context, int rowLayoutId, T[] items) {
        super(context, 0, items);
        this.rowLayoutId = rowLayoutId;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(rowLayoutId, null);
            v.findViewById(R.id.queueButton).setOnClickListener(onQueueButtonClicked);
            v.findViewById(R.id.playButton).setOnClickListener(onPlayButtonClicked);
        }

        T item = getItem(position);
        if (item != null) {
            setText(v, R.id.mainText, item.name);
            fillRowView(v, item);
        }
        v.setTag(item);
        return v;
    }
} 
```

我的使用所有项目的行布局 ID 进行参数化，但您可能希望以不同的方式执行此操作。setText() 和 fillRowView() 函数是在包含类中定义的帮助器。

请注意，我将 item 对象设置为行视图的标记，以便稍后在按钮单击处理程序中获取它：

```
View.OnClickListener onPlayButtonClicked = new View.OnClickListener() {
    @Override
    public void onClick(View button) {
        View listItem = (View)button.getParent();
        Object tag = listItem.getTag();
        try {
            @SuppressWarnings("unchecked")
            T item = (T)tag;
            // do someting with item
        }
        catch (ClassCastException e) {
        }
    }
}; 
```

[你可以在这里](https://play.google.com/store/apps/details?id=com.rarepebble.musicplayer)看到它的样子

# java - 休眠批量插入oracle 10g

> ID：13212030
> 
> 赞同：1
> 
> 时间：2012-11-03T18:10:30.100
> 
> 标签：java, hibernate

我想使用 HibernateTemplate 执行休眠批量插入，但我无法找到包含此类的正确 jar。我知道它应该出现在 spring.jar 中，但无法找到下载 spring.jar 的位置。为了得到这个 jar，我也尝试下载整个 spring 框架，但不幸的是在下载的包中没有找到类似 spring.jar 的东西。可能是名称已更改，请告诉我在哪个 jar 中可以找到这个 HibernateTemplate 类？

另外，我们应该使用 HibernateTemplate 类在休眠中批量插入还是在休眠中批量插入有其他更好的选择？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T13:03:38.630

不建议使用 Hibernate 进行批处理。除非你已经有一个用 Hibernate 构建的业务层，并且你想重用一些代码，否则你应该在普通的旧 JDBC 中进行批处理，也许由 Spring Batch 之类的框架管理。

如果你想使用 Hibernate，那么你应该使用`StatelessSession`.

不需要任何东西，`HibernateTemplate`因为 Session 已经为您提供了所需的一切。

* * *

**编辑：** 您可以处理交易：

```
Session session = sessionFactory.openStatelessSession();
Transaction tx = session.beginTransaction();
// DO SOMETHING
tx.commit();
session.close(); 
```

顺便说一句，如果您为 10 个项目创建事务，那么我想您想将处理拆分为 10 个插入的多个事务。交易真的需要吗？因为无论如何，一个事务可能会失败，而其他事务不会，这会给您留下一些插入的实体，而有些则没有。

如果您想要批处理的原子性（全部插入或未插入），您必须为所有元素运行事务，而不仅仅是其中的 10 个。但是请注意不要锁定您的数据库...我认为将大型长时间运行的事务用于批处理并不是一个好主意。相反，您可能应该自行补偿插入失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T18:58:03.227

HibernateTemplate 类是其中的一部分，`org.springframework.orm-3.1.3.RELEASE.jar`包含在[spring-framework-3.1.3.RELEASE.zip中](http://s3.amazonaws.com/dist.springframework.org/release/SPR/spring-framework-3.1.3.RELEASE.zip)

如果您已经在项目中使用了 spring 框架，那么没有理由不使用 HibernateTemplate 进行批量更新。HibernateTemplate 的优点是你不必关心 Hibernate Sessions

# windows - 在批处理文件中获取 Windows 版本

> ID：13212033
> 
> 赞同：29
> 
> 时间：2012-11-03T18:11:00.060
> 
> 标签：windows, batch-file, operating-system

我需要使用批处理文件获取操作系统版本。我在网上看过很多例子，很多都使用这样的代码：

```
@echo off

ver | find "XP" > nul
if %ERRORLEVEL% == 0 goto ver_xp

if not exist %SystemRoot%\system32\systeminfo.exe goto warnthenexit

systeminfo | find "OS Name" > %TEMP%\osname.txt
FOR /F "usebackq delims=: tokens=2" %%i IN (%TEMP%\osname.txt) DO set vers=%%i

echo %vers% | find "Windows 7" > nul
if %ERRORLEVEL% == 0 goto ver_7

echo %vers% | find "Windows Vista" > nul
if %ERRORLEVEL% == 0 goto ver_vista

goto warnthenexit

:ver_7
:Run Windows 7 specific commands here.
echo Windows 7
goto exit

:ver_vista
:Run Windows Vista specific commands here.
echo Windows Vista
goto exit

:ver_xp
:Run Windows XP specific commands here.
echo Windows XP
goto exit

:warnthenexit
echo Machine undetermined.

:exit 
```

问题是当我在 Vista 或 Windows 7 上执行此操作时，我收到消息

> 机器未定

有没有其他方法可以做我想做的事？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-11-03T18:19:53.227

通过仅解析以下输出来获取此信息要容易得多（也更快）`ver`：

```
@echo off
setlocal
for /f "tokens=4-5 delims=. " %%i in ('ver') do set VERSION=%%i.%%j
if "%version%" == "10.0" echo Windows 10
if "%version%" == "6.3" echo Windows 8.1
if "%version%" == "6.2" echo Windows 8.
if "%version%" == "6.1" echo Windows 7.
if "%version%" == "6.0" echo Windows Vista.
rem etc etc
endlocal 
```

[MSDN 上的此表](http://msdn.microsoft.com/en-us/library/ms724832%28VS.85%29.aspx)记录了哪个版本号对应于哪个 Windows 产品版本（这是您从中获取 6.1 表示 Windows 7 信息的地方）。

这种技术的唯一缺点是它无法区分 Windows 的等效服务器版本和消费者版本。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-09-22T16:29:23.090

[这些单行命令已经在 Windows XP、Server 2012、7 和 10 上进行了测试（感谢[Mad Tom Vane](https://stackoverflow.com/u/1480670)）。]

### `x.y`在`cmd`控制台中提取版本

```
for /f "tokens=4-7 delims=[.] " %i in ('ver') do @(if %i==Version (echo %j.%k) else (echo %i.%j)) 
```

### 提取完整版`x.y.z`

```
for /f "tokens=4-7 delims=[.] " %i in ('ver') do @(if %i==Version (echo %j.%k.%l) else (echo %i.%j.%k)) 
```

### 在批处理脚本中使用`%%`而不是单个`%`

```
@echo off
for /f "tokens=4-7 delims=[.] " %%i in ('ver') do (if %%i==Version (set v=%%j.%%k) else (set v=%%i.%%j))
echo %v% 
```

### 版本并不总是与品牌名称一致

请注意，提取的版本号并不总是对应于 Windows 名称版本。[请参阅下面的Microsoft Windows 版本完整列表](https://en.wikipedia.org/wiki/List_of_Microsoft_Windows_versions)的摘录。

> `10.0`   Windows 10
> `6.3`   Windows Server 2012
> `6.3`   Windows 8.1     Windows 8     Windows 7     Windows Vista   Windows XP x64   Windows XP   Windows 2000   Windows 98 **`/!\`**
> `6.2`**`/!\`**
> `6.1`**`/!\`**
> `6.0`
> `5.2`
> `5.1`
> `5.0`
> `4.10`

^(还请对[特工 Gibbs](https://stackoverflow.com/a/18128528/938111)和[peterbh](https://stackoverflow.com/a/22518351/938111)的回答进行投票，因为我的回答是从他们的想法中得到启发的。)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-11-03T18:17:00.770

您是否尝试过使用这些`wmic`命令？

尝试 `wmic os get version`

这将在命令行中为您提供版本号，然后您只需要集成到批处理文件中。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-04-03T23:54:14.397

我知道这是一个老问题，但我认为这些足够有用，可以供人们搜索。

第一个是获取正确版本的简单批处理方法。您可以在另一个进程中找出它是服务器还是工作站（如果这很重要）。我只是没有花时间添加它。

我们在代码中使用这种结构来确保符合要求。我敢肯定还有很多更优雅的方式，但这总是有效的。

```
:: -------------------------------------
:: Check Windows Version
:: 5.0 = W2K
:: 5.1 = XP
:: 5.2 = Server 2K3
:: 6.0 = Vista or Server 2K8
:: 6.1 = Win7 or Server 2K8R2
:: 6.2 = Win8 or Server 2K12
:: 6.3 = Win8.1 or Server 2K12R2
:: 0.0 = Unknown or Unable to determine
:: --------------------------------------
echo OS Detection:  Starting

ver | findstr /i "5\.0\."
if %ERRORLEVEL% EQU 0 (
echo  OS = Windows 2000
)
ver | findstr /i "5\.1\."
if %ERRORLEVEL% EQU 0 (
echo OS = Windows XP
)
ver | findstr /i "5\.2\."
if %ERRORLEVEL% EQU 0 (
echo OS = Server 2003
)
ver | findstr /i "6\.0\." > nul
if %ERRORLEVEL% EQU 0 (
echo OS = Vista / Server 2008
)
ver | findstr /i "6\.1\." > nul
if %ERRORLEVEL% EQU 0 (
echo OS = Windows 7 / Server 2008R2
)
ver | findstr /i "6\.2\." > nul
if %ERRORLEVEL% EQU 0 (
echo OS = Windows 8 / Server 2012
)
ver | findstr /i "6\.3\." > nul
if %ERRORLEVEL% EQU 0 (
echo OS = Windows 8.1 / Server 2012R2
) 
```

第二个不是所要求的，但它可能对寻找的人有用。

这是一个提供版本信息的 VBscript 函数，包括它是否是服务器（相对于工作站）。

```
private function GetOSVer()

    dim strOsName:    strOsName = ""
    dim strOsVer:     strOsVer = ""
    dim strOsType:    strOsType = ""

    Set objWMIService = GetObject("winmgmts:" & "{impersonationLevel=impersonate}!\\.\root\cimv2") 
    Set colOSes = objWMIService.ExecQuery("Select * from Win32_OperatingSystem") 
    For Each objOS in colOSes 
        strOsName = objOS.Caption
        strOsVer = left(objOS.Version, 3)
        Select Case strOsVer
            case "5.0"    'Windows 2000
                if instr(strOsName, "Server") then
                    strOsType = "W2K Server"
                else
                    strOsType = "W2K Workstation"
                end if
            case "5.1"    'Windows XP 32bit
                    strOsType = "XP 32bit"
            case "5.2"    'Windows 2003, 2003R2, XP 64bit
                if instr(strOsName, "XP") then
                    strOsType = "XP 64bit"
                elseif instr(strOsName, "R2") then
                    strOsType = "W2K3R2 Server"
                else
                    strOsType = "W2K3 Server"
                end if
            case "6.0"    'Vista, Server 2008
                if instr(strOsName, "Server") then
                    strOsType = "W2K8 Server"
                else
                    strOsType = "Vista"
                end if
            case "6.1"    'Server 2008R2, Win7
                if instr(strOsName, "Server") then
                    strOsType = "W2K8R2 Server"
                else
                    strOsType = "Win7"
                end if
            case "6.2"    'Server 2012, Win8
                if instr(strOsName, "Server") then
                    strOsType = "W2K12 Server"
                else
                    strOsType = "Win8"
                end if
            case "6.3"    'Server 2012R2, Win8.1
                if instr(strOsName, "Server") then
                    strOsType = "W2K12R2 Server"
                else
                    strOsType = "Win8.1"
                end if
            case else    'Unknown OS
                strOsType = "Unknown"
        end select
    Next 
    GetOSVer = strOsType
end Function     'GetOSVer 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-10-21T10:29:34.247

所以我在这里读到的答案大多很长。亚历克斯最短的答案效果很好，但不是那么干净。

最好的部分是，与其他人不同，它运行速度很快。

我想出了我自己的单线：

```
FOR /F "usebackq tokens=3,4,5" %i IN (`REG query "hklm\software\microsoft\windows NT\CurrentVersion" /v ProductName`) DO echo %i %j %k 
```

以上是命令提示符。要使其在批处理文件中工作，请将所有**%**替换为**%%**以使其看起来像：

```
FOR /F "usebackq tokens=3,4,5" %%i IN (`REG query "hklm\software\microsoft\windows NT\CurrentVersion" /v ProductName`) DO echo %%i %%j %%k 
```

在我的电脑中，它只是生成**Windows 10 Pro**

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-04-19T08:24:41.420

这是另一种变体：其他一些解决方案不适用于 XP，这个解决方案可以，并且受[RLH 解决方案](https://stackoverflow.com/a/22851107/3020379)的启发。

此脚本仅在检测到所需的 Windows 版本时才会继续，在此示例中，我希望我的脚本仅在 win 7 中运行，因此要支持其他窗口只需`GOTO :NOTTESTEDWIN`将`GOTO :TESTEDWIN`

```
ver | findstr /i "5\.0\."        && (echo Windows 2000 & GOTO :NOTTESTEDWIN)
ver | findstr /i "5\.1\."        && (echo Windows XP 32bit & GOTO :NOTTESTEDWIN) 
ver | findstr /i "5\.2\."        && (echo Windows XP x64 / Windows Server 2003 & GOTO :NOTTESTEDWIN)
ver | findstr /i "6\.0\." > nul  && (echo Windows Vista / Server 2008 & GOTO :NOTTESTEDWIN)
ver | findstr /i "6\.1\." > nul  && (echo Windows 7 / Server 2008R2 & GOTO :TESTEDWIN)
ver | findstr /i "6\.2\." > nul  && (echo Windows 8 / Server 2012 & GOTO :NOTTESTEDWIN)
ver | findstr /i "6\.3\." > nul  && (echo Windows 8.1 / Server 2012R2 & GOTO :NOTTESTEDWIN)
ver | findstr /i "10\.0\." > nul && (echo Windows 10 / Server 2016 & GOTO :NOTTESTEDWIN)

echo "Could not detect Windows version! exiting..."
color 4F & pause & exit /B 1

:NOTTESTEDWIN
echo "This is not a supported Windows version"
color 4F & pause & exit /B 1

:TESTEDWIN
REM put your code here 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-03-19T21:20:23.963

这将返回 5.1 对于 xp 或 6/1 对于 windows 7

```
for /f "tokens=4-7 delims=[.] " %%i in ('ver') do (
if %%i == Version set OSVersion=%%j.%%k
if %%i neq Version set OSVersion=%%i.%%j
) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-05-11T04:40:20.527

这是我确定 Windows 版本的唯一方法：

```
for /f "tokens=1-9" %%a in ('"systeminfo | find /i "OS Name""') do (set ver=%%e & echo %ver%) 
```

这将返回 Windows 版本，*即*XP、Vista、7，并将“ver”的值设置为相同...

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-08-08T14:21:50.900

实际上，由于 ver 在字符串中包含 xp，因此该衬里不适用于 windows xp。而不是你想要的 5.1，你会得到 [Version.5 因为添加了令牌。

我将命令修改为如下所示： `for /f "tokens=4-6 delims=[. " %%i in ('ver') do set VERSION=%%i.%%j`

这将为 xp 系统输出 Version.5，您可以使用它在批处理文件中识别所述系统。遗憾的是，这意味着该命令无法区分`32bit`和`64bit`构建，因为它不会从 5.2 中读取表示`64bit`XP 的 .2。

您可以让它分配`%%k`该令牌，但这样做会使该脚本无法正确检测 Windows Vista、7 或 8，因为它们的 ver 字符串中少了一个令牌。希望这可以帮助！

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-12-22T22:07:32.233

使用 reg 查询，您将获得一个实际名称： reg query "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion" /v ProductName

这将返回“Windows 7 Professional”、“Windows Server 2008 R2 Standard”等。然后您可以结合使用 ver 命令来获得准确的版本。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-01-28T20:47:51.840

```
@echo off
for /f "tokens=2 delims=:" %%a in ('systeminfo ^| find "OS Name"') do set OS_Name=%%a
for /f "tokens=* delims= " %%a in ("%OS_Name%") do set OS_Name=%%a
for /f "tokens=3 delims= " %%a in ("%OS_Name%") do set OS_Name=%%a
if "%os_name%"=="XP" set version=XP
if "%os_name%"=="7" set version=7 
```

这会将操作系统名称获取为“7”或“XP”

然后，您可以在变量中使用它来根据 windows 的版本执行某些命令。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-07-02T21:03:28.413

如果您只想在批处理文件中显示 Windows 版本，例如 Windows 10 等。

您可以简单地使用`ver`只需键入的命令`ver`，将显示 windows 版本

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-12-13T01:40:49.700

```
wmic os get Caption,CSDVersion /value 
```

这将完成这项工作。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-04-16T10:58:31.347

@olibre 提出的**Extract the full version xyz**看起来最适合我。唯一额外的事情是考虑除英语以外的其他语言，因为字符串“版本”在本地化的 Windows 中可能完全不同。因此，这是一个在 Windows XP、7、8.1 和 10 下使用美国和俄罗斯语言环境测试的批处理文件：

```
for /f "tokens=4-5 delims= " %%i in ('ver') do (
  if "%%j"=="" (set v=%%i) else (set v=%%j)
)
for /f "tokens=1-3 delims=.]" %%i in ("%v%") do (
  set OS_VER_MAJOR=%%i
  set OS_VER_MINOR=%%j
  set OS_BUILD_NUM=%%k
)
echo Detected OS version: %OS_VER_MAJOR%.%OS_VER_MINOR%.%OS_BUILD_NUM% 
```

可以检查 %OS_VER_MAJOR%、%OS_VER_MINOR% 和 %OS_BUILD_NUM% 的值以获得确切的版本号。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-02-08T20:50:46.763

如果新版本需要，第一行会强制安装 WMI 控制台。WMI 始终返回一致的字符串“Version=xxxxxx”，因此所有 Windows 版本的令牌解析始终相同。

从 VER 输出解析在版本信息之前有可变文本，使标记位置随机。分隔符只有 '=' 和 '.' 人物。

批量添加使我可以轻松地检查 Win10 的版本为 '510' (XP) 到 '10000'。我不使用 Build 值。

```
Setlocal EnableDelayedExpansion

wmic os get version /value 1>nul 2>nul

if %errorlevel% equ 0 (
   for /F "tokens=2,3,4 delims==." %%A In ('wmic os get version /value')  Do (
      (Set /A "_MAJ=%%A")
      (Set /A "_MIN=%%B")
      (Set /A "_BLD=%%C")
      )
    (Set /A "_OSVERSION=!_MAJ!*100")
    (Set /A "_OSVERSION+=!_MIN!*10")
    )

endlocal 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-01-28T13:30:32.077

在更新的版本（win 7 以上）上，您可以让[powershell 为您完成这项工作。](https://stackoverflow.com/a/7330368/2668213)

```
for /F %%i in ('powershell -command "& {$([System.Environment]::OSVersion.Version.Major),$([System.Environment]::OSVersion.Version.Minor) -join '.' }"') do set VER=%%i

goto %VER%

:6.1
REM specific code for windows 7

:10.0
REM specific code for windows 10 
```

有关版本号，请参见此[表](http://msdn.microsoft.com/en-us/library/ms724832%28VS.85%29.aspx)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-12-02T15:35:43.397

以前的答案都不适用于Win9x，并且很快就会因w10 22h1而失败。前 4 行与 win3.x 兼容（“set /P”；“for /F”在那里是非法的）。然后它将版本保存在 wver var 上，用于比较：搜索字符串上的前导空格对于捕获 ver 字符串中数字的开头至关重要（即：“4.”匹配 w10 21h2 字符串：“Microsoft Windows [Version 10.0 .19044.1348]"）。大多数以前的解决方案很快就会在 [future] windows 版本中失败。下一个 w10 22h1 字符串将是：“Microsoft Windows [Version 10.0.19045.1xxx]”，它将匹配“5.1”XP 搜索字符串。

```
@echo off
ver | find " 3." >nul
if not ERRORLEVEL 1 goto :wold
ver | find " 4." >nul
if not ERRORLEVEL 1 goto :wold
    rem put version on wver variable
    for /F "delims=" %%a in ('ver') do set wver=%%a
    echo Windows Version: %wver%
    rem Do all >= w2000/xp tasks here
  if not "%wver: 5.=%" == "%wver%" ( echo 5.0=2k 5.1=xp 5.2=xp64/2k3 & goto fin )
    rem Do all >= vista tasks here
  if not "%wver: 6.0=%" == "%wver%" ( echo vista/2k8 & goto fin )
    rem Do all >= w7 tasks here
  if not "%wver: 6.1=%" == "%wver%" ( echo w7/2k8r2 & goto fin )
    rem Do all >= w8 tasks here
  if not "%wver: 6.=%" == "%wver%" ( echo 6.2=w8/2012 6.3=w8.1/2012r2 & goto fin )
    rem Do all >= w10 tasks here
  if not "%wver: 10.=%" == "%wver%" ( echo w10.x & goto fin )
    rem Do all >= w11 tasks here
  if not "%wver: 11.=%" == "%wver%" ( echo w11.x & goto fin )
    rem Do all >= w12? tasks here
  goto fin
:wold
echo Unsupported windows 3.x 9x me nt3 nt4...
:fin 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2022-02-17T16:23:41.343

我用这个：

```
@echo off & @echo.
setlocal
@echo Getting Windows version... & @echo.
@echo. > Windows_version_and_Key.txt
@echo Windows Version: >> Windows_version_and_Key.txt
for /f "tokens=* delims=. " %%i in ('ver') do set VERSION=%%i
@echo %VERSION% >> Windows_version_and_Key.txt
@echo. >> Windows_version_and_Key.txt
@echo. >> Windows_version_and_Key.txt
wmic os get Caption >> Windows_version_and_Key.txt
@echo. >> Windows_version_and_Key.txt
@echo Getting Windows license KEY...
@echo License KEY: >> Windows_version_and_Key.txt
wmic path softwarelicensingservice get OA3xOriginalProductKey >> Windows_version_and_Key.txt
powershell -c "(Get-Content .\Windows_version_and_Key.txt) -replace '\x00+', '' | Set-Content .\Windows_version_and_Key.txt"
type Windows_version_and_Key.txt
@echo. & @echo. & @echo Done! Press any key to Exit!
endlocal
pause
exit 
```

如果您已经丢失并需要它，它会为您提供 Windows 密钥。

最后将全部写入文本文件。

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2020-04-08T09:18:23.393

## 只需从命令行启动新的 cmd 级别即可直接为您提供版本！

C：>命令

Microsoft Windows [版本 10.0.17130.1233]

(c) 2018 年微软公司。版权所有。

# postgis - 如何从 PostGIS 中的地理数据中获取经度/纬度

> ID：13212034
> 
> 赞同：4
> 
> 时间：2012-11-03T18:11:03.757
> 
> 标签：postgis

我需要 PostGIS 中地理数据中心的经度和纬度。格式称为 EPSG 2206，记录中的列是“length”、“shape_area”和“the_geom”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-23T05:19:18.853

我使用查询来获取经度和纬度。

`Longitude`

```
SELECT ST_X(the_geom) FROM myTable; 
```

`Latitude`

```
SELECT ST_Y(the_geom) FROM myTable; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T07:27:45.693

“地理”是一个什么样的对象？请注意，不规则多边形可能没有“中心”。但是，根据数据类型，您有 2 个选项：

1- 质心：

```
SELECT ST_AsText(ST_Centroid(the_geom)) from TABLE_NAME; 
```

[**记录在这里**](http://postgis.refractions.net/documentation/manual-1.4/ST_Centroid.html)

2- Point_On_Surface：

```
SELECT ST_AsText(ST_PointOnSurface(the_geom)) from TABLE_NAME; 
```

[**记录在这里**](http://postgis.refractions.net/documentation/manual-1.4/ST_PointOnSurface.html)

**编辑**：

另请注意，[**文档**](http://postgis.refractions.net/docs/using_postgis_dbmanagement.html#PostGIS_Geography)说：

> 一个限制是 [地理类型] 仅支持 WGS 84 long lat (SRID:4326)。它使用一种称为地理的新数据类型。没有 GEOS 函数支持这种新类型。作为一种解决方法，可以在几何和地理类型之间来回转换。

这意味着您不能使用 EPSG/SRID 2206 获得地理类型的数据。

# iphone - 在 iOS 中检测拖动碰撞

> ID：13212036
> 
> 赞同：1
> 
> 时间：2012-11-03T18:11:33.440
> 
> 标签：iphone, ios, uiview, draggable, collision-detection

给定可以拖动视图的视图层次结构，检测被拖动视图与其他视图之间的冲突的最有效方法是什么？

这将是蛮力方法（在伪代码中）：

```
- (void) onDrag 
{
    CGRect absoluteDraggedViewRect; // Calculate
    for (UIView *otherView in hierarchy)
    {
        CGRect absoluteOtherViewRect; // Calculate
        if (CGRectIntersectsRect(absoluteDraggedViewRect, absoluteOtherViewRect))
        {
            // Collision!
        }
    }
} 
```

您将如何改进上述代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T18:37:13.363

我认为此时唯一“可见”的改进是添加：

```
if (otherView == self)
    continue; 
```

在你的循环中。当然只有`self`在`hierarchy`.

最后，您必须检查每个视图是否与您拖动的视图相交。如果您后来意识到这是一个重要的性能问题，您可以尝试分散工作负载。您可以将“移动区域”划分为多个部分。拖动视图后，您可以计算它与哪些部分相交并保存字典或其他适当的数据结构以及每个部分中的所有视图。然后，您只需要循环浏览拖动视图部分的视图。但是，这是否有回报取决于您的具体用例。如果您当前的方法被证明是性能问题，我只会考虑它。

正如唐纳德·高德纳 (Donald Knuth) 曾经说过的：

> “我们应该忘记小的效率，比如大约 97% 的时间：过早的优化是万恶之源”

# c++ - 循环直到整数输入在所需范围内无法使用非数字字符输入

> ID：13212043
> 
> 赞同：5
> 
> 时间：2012-11-03T18:12:25.457
> 
> 标签：c++, error-handling, integer, infinite-loop

我对应该非常简单的代码有疑问。我想通过错误检查获取 1 到 3 之间的整数。它适用于检查太大或太小的数字，但是当输入字母/数字组合时，它会陷入无限循环。建议？

```
#include <iostream>
using namespace std;

int main(int argc, char *argv[]){
    int input;

    cout << "\nPlease enter a number from 1 to 3:" << endl;
    cout << "-> ";
    cin >> input;

    while(input< 1 || input> 3){
        cout << "\n---------------------------------------" << endl;
        cout << "\n[!] The number you entered was invalid." << endl;
        cout << "\nPlease re-enter a number from 1 to 3" << endl;
        cout << "-> ";
        cin >> input;
    }

    cout << "You chose " << input << endl;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T18:28:55.003

问题是：

```
cin >> input; 
```

当您尝试读取非数值时，将导致设置坏位。在那之后，任何使用 的尝试`operator>>`都会被忽略。

所以纠正这个问题的方法是测试流是否处于良好状态，如果不是，则重置状态标志并再次尝试读取。但请注意，错误的输入（导致问题的）仍在输入上，因此您需要确保也将其丢弃。

```
if (cin >> input)
{
    // It worked (input is now in a good state)
}
else
{
    // input is in a bad state.
    // So first clear the state.
    cin.clear();

    // Now you must get rid of the bad input.
    // Personally I would just ignore the rest of the line
    cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');

    // now that you have reset the stream you can go back and try and read again.
} 
```

为了防止它被卡住（这是由设置的坏位引起的）读入字符串，然后使用字符串流来解析用户输入。我也更喜欢这种方法（用于用户交互输入），因为它允许更轻松地组合不同的阅读风格（即组合`operator>>`并且`std::getline()`您可以在字符串流上使用它们）。

```
#include <iostream>
#include <sstream>
#include <string>
// using namespace std;
// Try to stop using this.
// For anything other than a toy program it becomes a problem.

int main(int argc, char *argv[])
{
    int          input;

    std::string  line;
    while(std::getline(std::cin, line))   // read a line at a time for parsing.
    {
        std::stringstream linestream(line);
        if (!(linestream >> input))
        {
             // input was not a number
             // Error message and try again
             continue;
        }
        if ((input < 1) || (input > 3))
        {
             // Error out of range
             // Message and try again
             continue;
        }
        char errorTest;
        if (linestream >> errorTest)
        {
             // There was extra stuff on the same line.
             // ie sobody typed 2x<enter>
             // Error Message;
             continue;
        }

        // it worked perfectly.
        // The value is now in input.
        // So break out of the loop. 
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T18:35:58.493

```
#include <iostream>
#include <string>

using namespace std;

int validatedInput(int min = 1, int max = 3)
{
    while(true)
    {
        cout << "Enter a number: ";
        string s;
        getline(cin,s);
        char *endp = 0;
        int ret = strtol(s.c_str(),&endp,10);
        if(endp!=s.c_str() && !*endp && ret >= min && ret <= max)
            return ret;
        cout << "Invalid input. Allowed range: " << min << "-" << max <<endl;
    }
}

int main(int argc, char *argv[])
{
    int val = validatedInput();
    cout << "You entered " << val <<endl;
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-15T01:53:35.793

这些答案中的大多数都包括不必要的复杂性。

# 输入验证是使用 do-while 的最佳时机

```
do{

   cout << "\nPlease enter a number from 1 to 3:" << endl;
   cout << "-> ";

   if(!cin){
      cout << "Invalid input"
      cin.clear()
      cin.ignore(numeric_limits<streamsize>::max(), '\n');
   }

}while(!(cin >> input)) 
```

*   用于`numeric_limits<streamsize>::max()`在失败后完全清除缓冲区`cin`。

*   用于`cin.clear()`重置失败标志，`cin`因此`!cin`不会总是评估为假。

*`cin.fail()`很好。然而，有些人会认为`!cin`更自然。*

*从我以前的帖子[https://stackoverflow.com/a/43421325/5890809](https://stackoverflow.com/a/43421325/5890809)*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T18:28:22.213

您将输入声明为 int，但是当您编写一个字母数字字符进行输入时，它会尝试将其隐式转换为整数。但是您的错误检查并没有考虑到这一点。

您的问题可以通过更改您的 while 循环轻松解决。而不是检查这个你如何检查

```
while(input!=1 || input!=2 || input!=3) 
```

# php - 如何将回调 URL 添加到 Twilio SMS 发送代码？

> ID：13212047
> 
> 赞同：3
> 
> 时间：2012-11-03T18:12:51.397
> 
> 标签：php, twilio

我正在使用官方的 PHP Twilio 库代码来发送和接收呼叫。我可以使用下面的示例代码发送短信：

```
<?php
require('twilio/Twilio.php');

$sid = "AC************";
$token = "2************";

$client = new Services_Twilio($sid, $token);
$message = $client->account->sms_messages->create(
  '+1905xxxxxxx', // From a valid Twilio number
  '+278xxxxxxxx', // Text this number
  "Hello, test SMS message number 001!"
);
?> 
```

现在我想将回调 URL 添加到上面的代码中。它可以做到，但我不知道如何为 $params 添加数组。

```
function create($from, $to, $body, array $params = array()) {
    return parent::_create(array(
        'From' => $from,
        'To' => $to,
        'Body' => $body
    ) + $params);
} 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T18:24:41.130

尝试如下

```
function create($from, $to, $body, array $params = array()) {
    return parent::_create(array(
        'From' => $from,
        'To' => $to,
        'Body' => $body
    ) + array('StatusCallback'=>'http://yourdomain.com/yoururl.php'));
} 
```

**或者**

```
$message = $client->account->sms_messages->create(
  '+1905xxxxxxx', // From a valid Twilio number
  '+278xxxxxxxx', // Text this number
  "Hello, test SMS message number 001!",
   array('StatusCallback'=>'http://yourdomain.com/yoururl.php')
); 
```

[您可以在此处](https://www.twilio.com/docs/api/rest/sending-messages#post-parameters-optional)了解有关`StatusCallback`发送短信时如何使用的更多信息。

# jquery - 页面加载后更新 a href

> ID：13212050
> 
> 赞同：0
> 
> 时间：2012-11-03T18:12:59.467
> 
> 标签：jquery, dom-manipulation

我正在使用[Stacktack 应用程序](https://stackapps.com/q/518/14135)将帖子摘要放在网站上。但是，当 stacktack 加载页面时，链接指向指向 stackoverflow 站点的直接 url，但我想将 href 链接修改为其他内容（在其上附加一个数字）。

**示例**如果我给出当前帖子的 id，则 stacktack 添加到问题的链接是完整的

```
http://stackoverflow.com/questions/13212050/update-the-a-href-after-page-load 
```

我希望它成为共享链接

```
http://stackoverflow.com/q/13212050/1135954 
```

我正在使用 jquery 来做到这一点

```
var ele = $('h3').find('a');
var l =ele.length;
for(var i=0;i<l;i++) {
    var toLink = ele[i].href+"/1135954" ;  /* Not exact change, but point is to update the link */
    console.log(toLink);
    $(ele[i]).attr("href",toLink);
} 
```

但这不会更新链接，因为堆栈的内容尚未加载。我试图对长度发出警报。

那么，只有在 stacktack 完成加载内容之后，我才能调用这段代码呢？

请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T18:23:56.147

在使用任何选择器之前，必须加载您的 dom。
使用[$.ready](http://api.jquery.com/ready/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T18:18:30.030

由于您使用的是 Jquery，因此您可以更简单地执行以下操作：

```
$('h3').find('a').each(function(index, element) {
    currentLink = element.attr('href');
    updatedLink = currentLink+'/1234567'
    $(this).attr('href', updatedLink);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T18:31:48.813

我认为它发生的可能原因是因为您在文档加载后加载内容。因此，请尝试在身体负载时调用此代码。

```
<body onload="fun()"></body> 
```

# c# - 每秒新建 DataContext

> ID：13212055
> 
> 赞同：0
> 
> 时间：2012-11-03T18:13:38.420
> 
> 标签：c#, sql, linq-to-sql, datacontext

我正在为游戏制作服务器，我需要保存每个人的第二个，所以我制作了：-

```
private static void SubmitChanges() {
    while(true) {
        try {
            using(GameDBDataContext db = new GameDBDataContext()){
                foreach(IHero hero in world.Entities.BattleEntities.OnlineHeros.Values) {
                    hero.Update(db);
                }
            }
        } catch(Exception ex) {
            Console.WriteLine(ex.ToString());
        }
        Thread.Sleep(1000);
    }
} 
```

可以吗？如果我有500个在线英雄会很好吗？

**编辑**：检查需要多长时间：-

```
private void UpdateDatabase() {
    try {
        using(GameDBDataContext db = new GameDBDataContext()) {
            foreach(IHero hero in world.Entities.BattleEntities.OnlineHeros.Values) {
                DateTime now = DateTime.Now;
                hero.Update(db);
                DateTime after = DateTime.Now;
                Console.WriteLine((now - after).Milliseconds);
            }
        }
    } catch(Exception ex) {
        Console.WriteLine(ex.ToString());
    }
} 
```

结果 ：-

```
-13
-10
-13
-26
-19
-24
-25
-19
-27
-22
-19
-26
-25
-21
-24
-22 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T04:24:54.173

您可以在一个 sql 请求中更新这一切。Linq-to-sql 具有 SubmitChanges 方法，可在上下文中提交所有更改。因此，您可以在循环中累积对 hero 的更改并在循环后提交它们。

```
private static void SubmitChanges() 
{
    while(true) {
        try {
            using(GameDBDataContext db = new GameDBDataContext()){
                foreach(IHero hero in world.Entities.BattleEntities.OnlineHeros.Values) {
                    hero.UpdateRecord(db);
                }
                db.SubmitChanges();
            }
        } catch(Exception ex) {
            Console.WriteLine(ex.ToString());
        }
        Thread.Sleep(1000);
    }
} 
```

UpdateRecord 是您的更新方法，但不包括 SubmitChanges。

# ruby-on-rails - rails 中 sass-rails gem 的用途

> ID：13212059
> 
> 赞同：0
> 
> 时间：2012-11-03T18:14:08.603
> 
> 标签：ruby-on-rails

`gem 'sass-rails'`默认情况下包含在`:assets`新 Rails 应用程序组中的目的是什么？

如果我注释掉该行，我仍然可以`.css.scss`毫无问题地使用文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T11:29:59.017

sass/scss 文件需要它。清除浏览器缓存，清除 Rails 缓存（`Rails.cache.clear`在控制台中），注释掉该行，卸载 gem（所有版本），然后重新启动服务器。您将收到以下错误：

```
no such file to load -- sass 
```

取消注释 sass-rails gem 的行，重新安装 gem 并重新启动服务器以使其再次工作。

# asp.net-mvc - 可以使用 VSIX 安装 MVC Scaffolding T4 模板吗？

> ID：13212060
> 
> 赞同：1
> 
> 时间：2012-11-03T18:14:18.577
> 
> 标签：asp.net-mvc, templates, t4, vsix

我有一个 MVC 模板，应该安装在

> Common7\IDE\ItemTemplates\CSharp（或 Visual Basic）\Web\MVC（或 2）3\CodeTemplates

如此[处](https://stackoverflow.com/questions/7249414/where-are-the-built-in-mvc-scaffolding-t4-templates)所述。

有没有办法将它包含在 VSIX 包中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:45:18.890

**手动**

1.  安装 Visual Studio 2012 SDK（也可用于 2010）。
2.  创建一个 VSIX 项目。
3.  双击 *.vsixmanifest 文件以打开清单设计器。
4.  添加一个新的项目模板资产并将其指向您的模板 *.zip 文件。

**模板向导扩展**

此外，如果您想一步导出模板和 VSIX，可以尝试使用模板模板向导扩展：http:

[//msdn.microsoft.com/en-us/library/vstudio/ff527343(v=vs. 100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/ff527343(v=vs.100).aspx)

# iphone - 如何使用 UISearchBar 仅搜索 UITableView 的部分标题？

> ID：13212063
> 
> 赞同：0
> 
> 时间：2012-11-03T18:14:37.067
> 
> 标签：iphone, cocoa-touch, uitableview, nsmutablearray, uisearchbar

我有一个`UITableView`部分和很多行。

我不需要详细搜索，遍历`tableview`.

所有章节标题都包含在一个`NSMutableArray`.

有没有一种简单的方法可以只搜索 a 的部分标题`UITableView`，而不考虑单元格内容？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T18:45:32.003

您必须在表格的头部插入 uisearchbar。接下来，您必须实现一种方法，在具有标题的数组上搜索并创建一个包含要显示的元素的新数组（标题和单元格，它们也可以是两个数组，您必须根据正常的应用程序工作流程进行选择）和重新加载表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T18:45:41.363

请参阅[此](http://developer.apple.com/library/ios/#samplecode/TableSearch/Listings/MainViewController_m.html#//apple_ref/doc/uid/DTS40007848-MainViewController_m-DontLinkElementID_6)Apple 示例实现 - 请注意名为：

```
- (void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope 
```

在这里，而不是：

```
for (Product *product in listContent) 
```

你可以放：

```
for (NSString *sectionHeader in YourSectionArray) 
```

还可以根据需要更改此功能的实现，您应该完成。（例如，您可以忽略范围的事情，因为您只想搜索只是一个简单字符串的节标题）此功能只是搜索例程，您可以根据需要进行更改。它实际上是由以下委托函数调用的 - 您不想更改：

```
- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString 
```

请注意，我建议的这个控件是一个内置的 tableview 控件，已经带有搜索栏。这是：

```
UITableViewController <UISearchDisplayDelegate, UISearchBarDelegate> 
```

如果您自己添加了搜索栏，则需要将这两个委托都添加到您的 UITableView .h 文件中，就像我在上面所做的那样。如果您更愿意复制 Apple 的示例实现，请不要担心。

# java - 如何将交互式程序的输出重定向到文件？

> ID：13212065
> 
> 赞同：1
> 
> 时间：2012-11-03T18:14:55.030
> 
> 标签：java

我有一个交互式 java 程序，它接受用户的输入……现在我需要将屏幕上打印的任何输出重定向到文件？是可能的。

从java docs我得到了方法“System.setOut(PrintStream ps);” 但我不知道如何使用这种方法？

例如，我有一个程序：

```
public class A{
  int i;
   void func()
   {
      System.out.println("Enter a value:");
      Scanner in1=new Scanner(System.in);
      i= in1.nextInt();
      System.out.println("i="+i);
   }
 } 
```

现在我想将下面给出的输出重定向到一个文件：

```
 Enter a value:
 1
 i=1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T18:17:07.533

您可以执行以下操作：

```
System.setOut(new PrintStream(new BufferedOutputStream(new FileOutputStream("output.txt")))); 
```

要通过多种方式将内容写入文件，您可以查看[阅读、写入和创建文件](http://docs.oracle.com/javase/tutorial/essential/io/file.html)教程。

在您的情况下，如果您也想在文件中准确打印屏幕上的内容，甚至是用户输入，您可以执行以下操作：

```
void func(){                                                                                             
  try {                                                                                                  
    PrintStream out=new PrintStream(new BufferedOutputStream(new FileOutputStream("output.txt")));       
    System.out.println("Enter a value:");                                                                
    out.println("Enter a value:");                                                                       
    Scanner in1=new Scanner(System.in);                                                                  
    int i= in1.nextInt();                                                                                
    out.println(i);                                                                                      
    System.out.println("i="+i);                                                                          
    out.println("i="+i);                                                                                 
    out.close();                                                                                         
  } catch (FileNotFoundException e) {                                                                    
    System.err.println("An error has occurred "+e.getMessage());                                         
    e.printStackTrace();                                                                                 
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T18:20:54.277

干得好：

```
 // all to the console    
        System.out.println("This goes to the console");
        PrintStream console = System.out; // save the console out for later.
  // now to the file    
        File file = new File("out.txt");
        FileOutputStream fos = new FileOutputStream(file);
        PrintStream ps = new PrintStream(fos);
        System.setOut(ps);
        System.out.println("This goes to the file out.txt");

  // and back to normal
        System.setOut(console);
        System.out.println("This goes back to the console"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T18:16:45.963

java.io 包中的类就是为此而设计的。我建议你看看[java.io 包](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/package-summary.html)。

**编辑后。**

```
 File file = new File("newFile.txt");
   PrintWriter pw = new PrintWriter(new FileWriter(file));
    pw.println("your input to the file");
    pw.flush();

     pw.close() 
```

# java - 如何修复 NullPointerException？

> ID：13212066
> 
> 赞同：-2
> 
> 时间：2012-11-03T18:14:54.977
> 
> 标签：java, nullpointerexception

我正在制作游戏，但是当我尝试启动它时，它说：`java.lang.NullPointerException`.

这是代码：

```
package com.shinxs.rain.graphics;

import java.awt.Graphics;
import java.awt.Image;
import java.util.Random;
import javax.swing.ImageIcon;

public class Screen {

    private int width, height;
    public int[] pixels;
    Graphics g;

    public int[] tiles = new int[64 * 64];

    private Random random = new Random();

    ImageIcon i = new ImageIcon("Resources/Inventory.png");
    Image image = i.getImage();

    public Screen(int width, int height) {
        this.width = width;
        this.height = height;
        pixels = new int[width * height];

        for (int i = 0; i < 64 * 64; i++) {
            tiles[i] = random.nextInt(0xFFFFFF);
        }
    }

    public void clear() {
        for (int i = 0; i < pixels.length; i++) {
            pixels[i] = 0;
        }       
    }

    public void render() {
        g.drawImage(image, 500, 200, 124, 280, null);
    }
} 
```

如果您知道如何解决它，请告诉我，我已经坚持了很长时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T18:16:10.237

```
 Graphics g; 
```

您`g`指向*空引用*，并且您正在调用`drawImage`导致 NPE ( `NullPointerException`) 的空值。

```
g.drawImage(image, 500, 200, 124, 280, null); 
```

请参阅本教程，[了解如何在 java 中使用 Graphics](http://docs.oracle.com/javase/tutorial/2d/images/drawonimage.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T18:30:29.110

您的 Graphics 对象为空，因为您从未分配给任何其他值。Null 意味着一个对象是“空的”并且不包含数据，这是要初始化的对象的逻辑值。为了使用 Graphics 对象，您需要访问预制对象，因为 Graphics 类没有公共构造函数（new Graphics() 不起作用）。我知道的唯一方法是扩展 javax.swing.JFrame 并覆盖paint(Graphics g)，其中预先实例化的 Graphics 对象作为参数传递。Graphics 对象是由 JFrame 的内部工作创建的。

```
 class Screen extends javax.swing.JFrame{

         public void paint(Graphics g){
                super.paint(g); //correctly draws background

                //now call methods on g, the graphics object
         }
   } 
```

我强烈建议您查看有关 Swing 的文档，以了解有关其工作原理的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T18:19:21.767

您从未初始化您的 Graphics g;object 并在其上调用方法，您必须初始化您的 Graphics 对象，否则它将为空，因为对象的默认值为*null*。

```
Graphics g= Griphics.create();

g.darwLine() 
```

# java - 在 Java 表单应用程序中拖放预先建立的元素

> ID：13212069
> 
> 赞同：0
> 
> 时间：2012-11-03T18:15:11.377
> 
> 标签：java, swing

我希望能够使用 netbeans(Java) 在运行时拖放元素。例如：我将拥有 Texboxt、Button、Labels、ComboBox、Panel、Listbox 等元素，并且我想拖动任意数量的元素，这些元素可能就像我的应用程序中的工具箱一样。

我的教授告诉我，我可以使用 Jgraph 来完成这个功能，他提到我的另一件事是我可以搜索拖放库或框架。例如在这个网站上，[1](http://img43.imageshack.us/img43/431/idek.png)：[http ://cacoo.com](http://cacoo.com)

[图片 http://img43.imageshack.us/img43/431/idek.png](http://img43.imageshack.us/img43/431/idek.png)

编辑：我添加了这个想法的图像。想象这是您自己的编辑器，它有自己的元素，如工具箱中所示。我想要的是将这些元素拖放到设计区域，就像一个 IDE；这是我现在的基本挑战。另外，我想知道我是否可以使用`JGraph`库或其他人知道的框架来执行此功能。

显然，当我单击运行按钮时，会弹出另一个窗口，其中包含元素。

# java - JPA 多线程 org.eclipse.persistence.exceptions.ConcurrencyException

> ID：13212072
> 
> 赞同：3
> 
> 时间：2012-11-03T18:15:34.730
> 
> 标签：java, multithreading, exception, jpa, concurrency

嗨，我尝试使用多线程处理`JSOUP`并`JPA`解析一些页面并将信息放入数据库中，但有时会出现此异常：

```
Exception in thread "Thread-7" Local Exception Stack: 
Exception [EclipseLink-2004] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.ConcurrencyException
Exception Description: A signal was attempted before wait() on ConcurrencyManager. This normally means that an attempt was made to 
commit or rollback a transaction before it was started, or to rollback a transaction twice.
    at org.eclipse.persistence.exceptions.ConcurrencyException.signalAttemptedBeforeWait(ConcurrencyException.java:84)
    at org.eclipse.persistence.internal.helper.ConcurrencyManager.releaseReadLock(ConcurrencyManager.java:489)
    at org.eclipse.persistence.internal.identitymaps.CacheKey.releaseReadLock(CacheKey.java:386)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.cloneAndRegisterObject(UnitOfWorkImpl.java:1015)
    at org.eclipse.persistence.internal.descriptors.ObjectBuilder.buildWorkingCopyCloneNormally(ObjectBuilder.java:731)
    at org.eclipse.persistence.internal.descriptors.ObjectBuilder.buildObjectInUnitOfWork(ObjectBuilder.java:668)
    at org.eclipse.persistence.internal.descriptors.ObjectBuilder.buildObject(ObjectBuilder.java:601)
    at org.eclipse.persistence.internal.descriptors.ObjectBuilder.buildObject(ObjectBuilder.java:560)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.buildObject(ObjectLevelReadQuery.java:717)
    at org.eclipse.persistence.queries.ReadAllQuery.registerResultInUnitOfWork(ReadAllQuery.java:769)
    at org.eclipse.persistence.queries.ReadAllQuery.executeObjectLevelReadQuery(ReadAllQuery.java:433)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeDatabaseQuery(ObjectLevelReadQuery.java:1081)
    at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:844)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.execute(ObjectLevelReadQuery.java:1040)
    at org.eclipse.persistence.queries.ReadAllQuery.execute(ReadAllQuery.java:392)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeInUnitOfWork(ObjectLevelReadQuery.java:1128)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2871)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1516)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1498)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1463)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.executeReadQuery(EJBQueryImpl.java:485)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.getSingleResult(EJBQueryImpl.java:773)
    at database.dao.LinkDAO.getLinkByLink(LinkDAO.java:23)
    at celsis.CelsisGijos.parsePreke(CelsisGijos.java:160)
    at celsis.CelsisGijos.runThruePrekes(CelsisGijos.java:139)
    at celsis.CelsisGijos.runThrueGrupes(CelsisGijos.java:67)
    at celsis.CelsisGijos.run(CelsisGijos.java:314) 
```

它出现在第 3 行的这个方法中：

```
1    public static synchronized XParserLinks getLinkByLink(String link) {
2        try {
3            XParserLinks obj = TarpineManager.getInstance().createNamedQuery("XParserLinks.findByLink", XParserLinks.class).setParameter("link", link).getSingleResult();
4            return obj;
5        } catch (NoResultException e) {
6            return null;
7        }
8        
9    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-04T06:01:20.977

JPA 和 EntityManager 不是线程安全的。

您需要为应用程序中的每个工作线程创建一个实体管理器。

请参阅 JPA 规范中的第 7.2 节：

> 7.2 获取EntityManager
> 
> 实体管理器不能在多个并发执行的线程之间共享，因为实体管理器和持久性上下文不需要是线程安全的。实体管理器只能以单线程方式访问。

# php - 如何在我的扑克游戏中检查满堂彩？

> ID：13212081
> 
> 赞同：1
> 
> 时间：2012-11-03T18:16:12.657
> 
> 标签：php, poker

问题：为我的网络编程课创建一个视频扑克游戏。

除了我在下面的逻辑中遗漏了一些东西外，我还有其他一切工作。当我只有 3 个同类时，满屋返回 true。

我知道我对 3 种此类作品的逻辑。但是，当比较未涉及 3 of a Kind 的两张牌时，就会出现问题。

这是代码：

```
//Calculate if Full House exist
function checkHouse()
{
    $kindFlag = false;
    $pairFlag = false;
    $tempCardValue = 0;
    $temp = array();
    $counter = 0;

    //check for 3 of a kind, save card positions so they aren't tested for a pair
    for($i=0; $i<3; $i++)
    {
        for($j=($i+1); $j<4; $j++)
        {
            for($k=($j+1); $k<5; $k++)
            {
                if($this->Hand[$i]->GetSortValue() == $this->Hand[$j]->GetSortValue() && $this->Hand[$i]->GetSortValue() == $this->Hand[$k]->GetSortValue())
                {
                    $kindFlag =  true;
                    $tempCardValue = $this->Hand[$i]->GetSortValue();
                    break 3;
                }
            }
        }
    }

    //Checks 2 remaining cards to see if they match
    for($i=0; $i<5; $i++)
    {
        if($this->Hand[$i]->GetSortValue() != $tempCardValue)
        {
            $temp[$counter] = $this->Hand[$i]->GetSortValue();
            $counter++;
        }
    }
    if($temp[0] == $temp[1])
    {
        $pairFlag = true;
    }

    //Computes Full House or not
    if($pairFlag && $kindFlag)
        return true;
    else
        return false;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T18:28:10.187

只是一个建议，但您对卡片的实施似乎过于复杂。检查对子和满屋应该很容易，什么不是。

从一个名为 Card 的类开始（这是来自内存，因此可能存在语法错误等等）：

```
class Card {
  var $index;
  var $suit; // 0 to 3 you can define which is what
  var $value; // 0 to 12, aces are 12 or 0 or you can actually put their value this is just quick and dirty
  function Card($index) {
      $this->index = index;
      $this->suit = index % 13;
      $this->value = index % 4;
  }
} 
```

然后你可以添加一个名为 Hand 的类，它会将结果制成表格

```
class Hand {

    $values = array(); // value of cards
    $suits = array();
    $cards = array();

    function Hand($cards) {
        $this->cards = $cards;
    }
    function checkResult() {
         foreach ($this->cards as $card) {
              $values[$card->value]++;
              $suits[$card->suit]++;
         }

    }
   function getPairs() {
       $pairs = array();
       foreach ($values as $key=>$value) {
           if ($value == 2) 
               $pairs[] = $value;

       }
      return $pairs;
   }

   function getThreeOfAKind() {
      $result = false;
      foreach ($values as $key=>$value) {
         if ($value == 3)
           return $key;
       }
      return false;
   }

} 
```

然后你可以打电话

```
$hand = new Hand($arrayOfCards);
$hand->checkResult();
echo "This hand has this many pairs: " + count($hand->getPairs());
echo "Full house? " + (count($hand->getPairs()) + $hand->getThreeOfAKind !== false); 
```

在 Hand 类中实现其余的卡片检查很容易：

```
function checkFlush() {
   foreach ($this->suits as $suit=>$num) {
    if ($num == 5) 
      return $suit;

   }
  return false;
} 
```

等等……我不是故意写这么多代码的，抱歉，哈哈

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T18:25:00.063

作为一个完整的替代方案：

有一个 13 个整数的数组。这代表到国王的 A 数。

只旋转一次手，增加该卡值的计数。

那么对于满堂彩，数组必须包含一个 3 和一个 2。这种技术还将简化其他手牌检测和手牌比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:20:25.877

如果您想在 java 中检查您的全屋付款，请使用以下代码：

```
public boolean fullhouse()
    {
        int l_iAce=0,l_iDeuce=0,l_iThree=0,l_iFour=0,l_iFive=0,l_iSix=0,l_iSeven=0,l_iEight=0,l_iNine=0,l_iTen=0,l_iJack=0,l_iQueen=0,l_iKing=0;
        int []l_iSuit=new int[5];
        int []l_iRank=new int[5];
        for(int i=0;i< 5;i++)
        {
            for(int j=0;j<56;j++)
            {
                if(number[i] == j )
                {
                    l_iSuit[i]=suit[j];
                    l_iRank[i]=rank[j];
                }
            }
        }

        for(int i=0;i< 5;i++)
        {

            switch(l_iRank[i])
            {
                case 1:
                    l_iAce++;
                break;

                case 2:
                    l_iDeuce++;
                break;

                case 3:
                    l_iThree++;
                break;

                case 4:
                    l_iFour++;
                break;

                case 5:
                    l_iFive++;
                break;

                case 6:
                    l_iSix++;
                break;

                case 7:
                    l_iSeven++;
                break;

                case 8:
                    l_iEight++;
                break;

                case 9:
                    l_iNine++;
                break;

                case 10:
                    l_iTen++;
                break;

                case 11:
                    l_iJack++;
                break;

                case 12:
                    l_iQueen++;
                break;

                case 13:
                    l_iKing++;
                break;
            }
        }

        if(l_iAce == 3)
        {
            if(l_iDeuce == 2 || l_iThree == 2 || l_iFour == 2 || l_iFive == 2|| l_iSix == 2|| l_iSeven == 2|| l_iEight == 2|| l_iNine == 2|| l_iTen == 2|| l_iJack == 2|| l_iQueen == 2|| l_iKing== 2)
            {
                return true;
            }
        }
        else if(l_iDeuce == 3)
        {
            if(l_iAce == 2 || l_iThree == 2 || l_iFour == 2 || l_iFive == 2|| l_iSix == 2|| l_iSeven == 2|| l_iEight == 2|| l_iNine == 2|| l_iTen == 2|| l_iJack == 2|| l_iQueen == 2|| l_iKing== 2)
            {
                return true;
            }
        }
        else if(l_iThree == 3)
        {
            if(l_iAce == 2 || l_iDeuce == 2 || l_iFour == 2 || l_iFive == 2|| l_iSix == 2|| l_iSeven == 2|| l_iEight == 2|| l_iNine == 2|| l_iTen == 2|| l_iJack == 2|| l_iQueen == 2|| l_iKing== 2)
            {
                return true;
            }
        }
        else if(l_iFour == 3)
        {
            if(l_iAce == 2 || l_iDeuce == 2 || l_iThree == 2 || l_iFive == 2|| l_iSix == 2|| l_iSeven == 2|| l_iEight == 2|| l_iNine == 2|| l_iTen == 2|| l_iJack == 2|| l_iQueen == 2|| l_iKing== 2)
            {
                return true;
            }
        }
        else if(l_iFive == 3)
        {
            if(l_iAce == 2 || l_iDeuce == 2 || l_iThree == 2 || l_iFour == 2|| l_iSix == 2|| l_iSeven == 2|| l_iEight == 2|| l_iNine == 2|| l_iTen == 2|| l_iJack == 2|| l_iQueen == 2|| l_iKing== 2)
            {
                return true;
            }
        }
        else if(l_iSix == 3)
        {
            if(l_iAce == 2 || l_iDeuce == 2 || l_iThree == 2 || l_iFour == 2|| l_iFive == 2|| l_iSeven == 2|| l_iEight == 2|| l_iNine == 2|| l_iTen == 2|| l_iJack == 2|| l_iQueen == 2|| l_iKing== 2)
            {
                return true;
            }
        }
        else if(l_iSeven == 3)
        {
            if(l_iAce == 2 || l_iDeuce == 2 || l_iThree == 2 || l_iFour == 2|| l_iFive == 2|| l_iSix == 2|| l_iEight == 2|| l_iNine == 2|| l_iTen == 2|| l_iJack == 2|| l_iQueen == 2|| l_iKing== 2)
            {
                return true;
            }
        }
        else if(l_iEight == 3)
        {
            if(l_iAce == 2 || l_iDeuce == 2 || l_iThree == 2 || l_iFour == 2|| l_iFive == 2|| l_iSix == 2|| l_iSeven == 2|| l_iNine == 2|| l_iTen == 2|| l_iJack == 2|| l_iQueen == 2|| l_iKing== 2)
            {
                return true;
            }
        }
        else if(l_iNine == 3)
        {
            if(l_iAce == 2 || l_iDeuce == 2 || l_iThree == 2 || l_iFour == 2|| l_iFive == 2|| l_iSix == 2|| l_iSeven == 2|| l_iEight == 2|| l_iTen == 2|| l_iJack == 2|| l_iQueen == 2|| l_iKing== 2)
            {
                return true;
            }
        }
        else if(l_iTen == 3)
        {
            if(l_iAce == 2 || l_iDeuce == 2 || l_iThree == 2 || l_iFour == 2|| l_iFive == 2|| l_iSix == 2|| l_iSeven == 2|| l_iEight == 2|| l_iNine == 2|| l_iJack == 2|| l_iQueen == 2|| l_iKing== 2)
            {
                return true;
            }
        }
        else if(l_iJack == 3)
        {
            if(l_iAce == 2 || l_iDeuce == 2 || l_iThree == 2 || l_iFour == 2|| l_iFive == 2|| l_iSix == 2|| l_iSeven == 2|| l_iEight == 2|| l_iNine == 2|| l_iTen == 2|| l_iQueen == 2|| l_iKing== 2)
            {
                return true;
            }
        }
        else if(l_iQueen == 3)
        {
            if(l_iAce == 2 || l_iDeuce == 2 || l_iThree == 2 || l_iFour == 2|| l_iFive == 2|| l_iSix == 2|| l_iSeven == 2|| l_iEight == 2|| l_iNine == 2|| l_iTen == 2|| l_iJack == 2|| l_iKing== 2)
            {
                return true;
            }
        }
        else if(l_iKing == 3)
        {
            if(l_iAce == 2 || l_iDeuce == 2 || l_iThree == 2 || l_iFour == 2|| l_iFive == 2|| l_iSix == 2|| l_iSeven == 2|| l_iEight == 2|| l_iNine == 2|| l_iTen == 2|| l_iJack == 2|| l_iQueen== 2)
            {
                return true;
            }
        }

        return false;   
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T18:18:46.000

循环应该从 i=3 到 i=5 吗？

```
// replace ...
// for($i=0; $i<5; $i++)
// with ...
for($i=3; $i<5; $i++) 
```

# web-applications - Yii 查询没有返回结果

> ID：13212084
> 
> 赞同：1
> 
> 时间：2012-11-03T18:16:41.080
> 
> 标签：web-applications, yii, findall

我正在努力在 Yii 中创建正确的查询，但我相信我正在取得进展。

我需要检查相关表，并且只想返回相关表中没有记录的记录。这在这里得到了回答-Yii[确定相关模型的存在](https://stackoverflow.com/questions/13210492/yii-determining-existence-of-related-models/13210522#comment17988445_13210522)

使这个复杂化并且我不确定如何克服它的是，多个用户可以在这个相关表中拥有记录。因此，完整的要求是返回不存在相关记录的记录，而只计算登录用户的记录。

两个相关的对象如下——SurveyQuestion AnsweredQuestion

调查问题 HAS_MANY 已回答问题

AnsweredQuestion 表具有以下列-

id -survey_question_id - user_id

survey_question_id 是 SurveyQuestion 表的外键。

到目前为止，我的方法是尝试将记录限制为与具有关系定义的登录用户相关的记录-

```
public function relations()
{
    // NOTE: you may need to adjust the relation name and the related
    // class name for the relations automatically generated below.
    return array(
        'survey_answer'=>array(self::HAS_MANY,'SurveyAnswer','survey_question_id'),
        'answered_questions' => array(self::HAS_MANY, 'AnsweredQuestion', 'question_id',
            'condition'=>'answered_questions.user_id = '.Yii::app()->user->id,
            'joinType'=>'LEFT JOIN',
            ),
    );
} 
```

为了将查询限制在父表中的记录，而子表中没有相关记录，我在 findAll 函数中使用了一个条件，如下所示 -

```
 $questions = SurveyQuestion::model()->with(array(
                                            'survey_answer',
                                            'answered_questions'=>array(

                                                    'select'=>false,

                                                    'joinType'=>'LEFT JOIN',
                                                    'condition'=>'`answered_questions` . `id` is NULL'
                                                    ),))->findAll(); 
```

即使子表被清除，这两段代码也不返回任何结果。

任何人都可以发现我在方法或执行中出错的地方吗？

非常感谢，

缺口

**更新**

根据要求，这是运行的 sql 语句。这是相关的第二个 Join，第一个 Join 收集多项选择答案。

```
SELECT `t`.`id` AS `t0_c0`, `t`.`area_id` AS `t0_c1`,
`t`.`question_text` AS `t0_c2`, `t`.`date_question` AS `t0_c3`,
`survey_answer`.`id` AS `t1_c0`, `survey_answer`.`survey_question_id` AS
`t1_c1`, `survey_answer`.`answer_text` AS `t1_c2`, `survey_answer`.`tag_id`
AS `t1_c3` FROM `tbl_survey_questions` `t`  LEFT OUTER JOIN
`tbl_survey_answers` `survey_answer` ON
(`survey_answer`.`survey_question_id`=`t`.`id`)  LEFT JOIN
`tbl_answered_questions` `answered_questions` ON
(`answered_questions`.`question_id`=`t`.`id`)  WHERE
((answered_questions.user_id = 2) AND (`answered_questions` . `id` is
NULL)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T10:32:34.003

在我发布关于以可视方式运行您的查询的评论后，虽然有一段时间。

我认为您需要将条件放在关系`user_id`的`on`子句中，而不是`condition`子句中。因为它只返回子级具有`NULL`id 和`user_id`2 的父行。这显然不会发生。但是你需要它在`JOIN`标准中。所以它应该是：

```
'answered_questions' => array(self::HAS_MANY, 'AnsweredQuestion', 'question_id',
    'on'=>'answered_questions.user_id = '.Yii::app()->user->id,
    'joinType'=>'LEFT JOIN',
), 
```

# gcc - gcc vs Borland C中的struct关键字

> ID：13212085
> 
> 赞同：0
> 
> 时间：2012-11-03T18:16:43.920
> 
> 标签：gcc, struct

我对下面的结构定义感到困惑。不应该都是正确的吗？使用 Borland C 都可以编译，但使用 gcc 只有第二个编译。错误是“未知类型名称`_Node`”。

```
typedef struct _Node {
    int item;
    _Node* next;
} Node;

typedef struct _Node {
    int item;
    struct _Node* next;
} Node; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T18:32:00.440

不，在 C 中只有第二个（明确包括说明`struct`符）是正确的。虽然 C++ 允许省略`struct`，但 c 不允许，所以这是一个不可移植的 Borland 扩展。如果你用 g++ 编译，我想它也应该接受第一种语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T18:27:53.260

这取决于编译器如何处理前向引用。gcc 编译器可能会这样做，这是默认情况下，因为它也是 C++ 编译器。

# c++ - x88 架构中的 CPUID

> ID：13212087
> 
> 赞同：3
> 
> 时间：2012-11-03T18:16:54.247
> 
> 标签：c++, assembly, cpuid

我正在尝试使用 C++ 中的 CPUID 访问信息。到目前为止，我已经制作了这段代码，不能再去了。我在这里和网上找到了一些有用的文章，但它们似乎对我没有帮助。

我应该只使用来自 x88 的指令和寄存器。这是代码。

```
int b[5] = {0} ;

for (int a = 0; a < 5 ; a++)
{
    __cpuid (b,a) ;
    std::cout << "The code " << a << " gives " << b[0] << std::endl;
} 
```

我无法更进一步，因为我无法理解如何按位从该数组中获取信息。我有这篇[wiki](http://en.wikipedia.org/wiki/CPUID)和[msdn](http://msdn.microsoft.com/en-us/library/hskdteyh%28v=vs.80%29.aspx)文章解释了这个方案。我的问题不是很好，但我将不胜感激这方面的任何帮助或指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T18:37:37.263

我想您的问题不在于通过索引访问数组数据，就像您已经完成的那样`b[0]`，`b[1]`依此类推。你需要一点点（！）操作。你必须屏蔽掉你不感兴趣的部分并解释剩下的部分；例如

```
 (b[0] & 0xF0) >> 4 
```

根据 MSDN，将为您提供 4 位 (4-7) 的模型。等等。考虑以下

```
 3            2            1
    1098 7654 3210 9876 5432 1098 7654 3210
    0000 0000 0000 0000 0000 0000 0000 0000 
    \R_/ \ext_Fam/ \eM/ RRpp \fm/ \md/ \sd/

    R = reserved
    ext_Fam = extended family
    eM = extended model
    pp = processor type
    fm = family
    md = model
    sd = stepping id 
```

（int 假定为 32 位 int — 或更宽）

如果你想要例如处理器类型，你需要：

```
 0000 0000 0000 0000 0011 0000 0000 0000 
    \R_/ \ext_Fam/ \eM/ RRpp \fm/ \md/ \sd/ 
```

然后向右移动（逻辑移动）3个“半字节”（12）。所以

```
 (b[0] >> 12) & 3 
```

会给你一个代表处理器类型的数字。（数字 3 是以 2 为底的 11，因此只选择最右边的两位是正确的掩码）。

# java - Android：以编程方式设置方向需要时间，直到布局实际改变

> ID：13212092
> 
> 赞同：1
> 
> 时间：2012-11-03T18:17:17.657
> 
> 标签：java, android, orientation

当我打电话给：

```
activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

在屏幕上实际更改布局之前需要 2-3 秒。

问题是，是否有一些事件或属性可以让我获得屏幕上布局已更改的信息？当我通过以下方式获得房产时：

```
context.getResources().getConfiguration().orientation 
```

它已经设置为新的方向。但是屏幕上的实际视图是旧的方向。它会在 2-3 秒后发生变化。（也试过屏幕宽高比，跟方向一样）。

那么，有没有一种方法可以检测到屏幕上的布局实际上是否发生了变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T18:23:58.630

您可以使用

```
 import android.content.res.Configuration;

      public void onConfigurationChanged(Configuration newConfig) 
  {

         super.onConfigurationChanged(newConfig);
         //

  } 
```

# c# - 从大文件中删除冗余数据

> ID：13212094
> 
> 赞同：2
> 
> 时间：2012-11-03T18:17:28.117
> 
> 标签：c#, sqlite

我有一个日志文件，每行都有一个字符串。我正在尝试从文件中删除重复数据并将文件另存为新文件。我首先想到将数据读入 HashSet，然后将 hashset 的内容保存出来，但是在尝试执行此操作时出现“OutOfMemory”异常（在将字符串添加到 hashset 的行上）。

文件中有大约 32,000,000 行。每次比较都重新读取整个文件是不切实际的。

有任何想法吗？我的另一个想法是将整个内容输出到 SQLite 数据库并选择 DISTINCT 值，但我不确定这是否适用于这么多值。

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T18:25:26.887

您是否尝试过使用数组来初始化`HashSet`. 我假设 的加倍算法`HashSet`是`OutOfMemoryException`.

```
var uniqueLines = new HashSet<string>(File.ReadAllLines(@"C:\Temp\BigFile.log")); 
```

**编辑**：

> 我正在测试 .Add() 方法的结果，看看它是否返回 false 以计算冗余项目的数量。如果可能的话，我想保留这个功能。

然后你应该尝试`HashSet`使用文件行的正确（最大）大小来初始化：

```
int lineCount = File.ReadLines(path).Count();
List<string> fooList = new List<String>(lineCount);
var uniqueLines = new HashSet<string>(fooList);
fooList.Clear();
foreach (var line in File.ReadLines(path))
    uniqueLines.Add(line); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T18:28:16.633

您需要考虑的第一件事 - 高内存消耗是一个问题吗？

如果您的应用程序将始终在具有大量可用 RAM 的服务器上运行，或者在任何其他情况下您知道您将有足够的内存，那么您可以做很多如果您的应用程序运行在低速运行时无法做到的事情 -记忆环境，或未知环境。如果内存不是问题，请确保您的应用程序作为 64 位应用程序运行（当然，在 64 位操作系统上），否则您将被限制为 2GB 内存（如果您使用 LARGEADDRESSAWARE，则为 4GB旗帜）。我想在这种情况下这是你的问题，你所要做的就是改变它——它会很好用（假设你有足够的内存）。

如果内存有问题，并且您不需要使用太多内存，您可以按照您的建议将所有数据添加到数据库中（我更熟悉 SQL Server 等数据库，但我想 SQLite 会这样做），请确保您在列上有正确的索引，然后选择不同的值。

另一种选择是将文件作为流逐行读取，为每一行计算哈希，并将该行保存到其他文件中，并将哈希保存在内存中。如果散列已经存在，则移动到下一行（如果您愿意，可以添加到删除行数的计数器）。在这种情况下，您将在内存中保存更少的数据（仅用于不重复项的哈希）。

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T19:52:14.443

我使用 HashSet 对 Tim 采取了类似的方法。我确实添加了手动行计数和比较。

我从我的 Windows 8 安装中读取了安装日志，该日志大小为 58MB，行数为 312248 行，并在 0.993 秒内在 LinqPad 中运行它。

```
var temp=new List<string>(10000);
var uniqueHash=new HashSet<int>();
int lineCount=0;
int uniqueLineCount=0;

using(var fs=new FileStream(@"C:\windows\panther\setupact.log",FileMode.Open,FileAccess.Read))
    using(var sr=new StreamReader(fs,true)){
        while(!sr.EndOfStream){
        lineCount++;
        var line=sr.ReadLine();
        var key=line.GetHashCode();
            if(!uniqueHash.Contains(key) ){
                uniqueHash.Add(key);
                temp.Add(line);
                uniqueLineCount++;
                    if(temp.Count()>10000){
                        File.AppendAllLines(@"c:\temp\output.txt",temp);
                        temp.Clear();
                    }
            }
        }
    }
Console.WriteLine("Total Lines:"+lineCount.ToString());
Console.WriteLine("Lines Removed:"+ (lineCount-uniqueLineCount).ToString()); 
```

![linqpad 中的性能](../Images/69456986e1dff35bcbfeb264f80da0fe.png)

# javascript - DOM 元素可见性和 requestAnimationFrame

> ID：13212095
> 
> 赞同：4
> 
> 时间：2012-11-03T18:17:29.417
> 
> 标签：javascript, requestanimationframe

我正在阅读一篇关于[HTML5Rocks](http://www.html5rocks.com/en/tutorials/speed/animations/)的文章，该文章给出了一个关于滚动网页并检查 DOM 元素数组 offsetTop 以查看它们是否应该可见的示例。

文章说这样做的最佳实践方法是在每次触发滚动事件时使用窗口当前偏移量顶部更新变量。当第一个滚动事件被触发时，它会触发 requestAnimationFrame 过程来检查 DOM 元素的 offsetTop。这将可见性逻辑与滚动事件分离。

虽然我理解肯定将这两个进程解耦的好处（因为滚动事件可以每秒调用数百次），但我看不到在第一个滚动事件后每 16 毫秒运行一次可见性逻辑的好处，无论是否用户是否继续移动..

有人可以解释一下我在这里缺少的过程的哪一部分吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T10:51:29.470

我认为这在文章中解释得很好。

> 我们还能做什么？一方面，我们一直在运行 requestAnimationFrame，如果我们不只是滚动，那是没有必要的，因为什么都不会改变。为了解决这个问题，我们让 onScroll 启动 requestAnimationFrame
> 
> 现在，每当我们滚动时，我们都会尝试调用 requestAnimationFrame，但如果已经请求了一个，我们就不会启动另一个。这是一个重要的优化，因为浏览器将堆叠所有重复的 rAF 请求，我们将回到更新调用超过我们需要的情况。
> 
> 由于这个设置，我们不再需要在更新顶部调用 requestAnimationFrame，因为我们知道它只会在一个或多个滚动事件发生时被请求。我们也不再需要底部的启动电话，所以让我们相应地更新：

```
var latestKnownScrollY = 0,
    ticking = false;

function onScroll() {
    latestKnownScrollY = window.scrollY;
    if (!ticking) {
        requestAnimationFrame(update);
    }
    ticking = true;
}
function update() {
    ticking = false; // reset the tick so we can capture the next onScroll

    var currentScrollY = latestKnownScrollY;

    // Do visibilty logic and animation here
} 
```

所以，“*不管用户是否继续移动*”并不是真的。`update`仅在滚动期间（或之后）调用，并且以浏览器选择的帧速率而不是每秒数百个事件的速率调用。

# c# - 我可以用这样的中断标签安全地替换新行吗？

> ID：13212097
> 
> 赞同：3
> 
> 时间：2012-11-03T18:17:51.090
> 
> 标签：c#, html, asp.net-mvc, security

我可以像使用以下扩展方法一样安全地`Environment.NewLine`替换吗？`<br />`

```
public static string HtmlBreaks(this string s)
{
    if (string.IsNullOrEmpty(s)) { return s; }
    return s.Replace(Environment.NewLine, "<br />");
} 
```

我这样使用它：

```
@Html.Raw(Model.Details.HtmlBreaks()) 
```

让我更清楚。***这安全吗？*** ***我是否通过用 HTML 替换文本然后发布该`Raw`方法来破坏任何互联网安全准则？***我打开这个网站是否会受到任何攻击？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T18:27:37.250

这是不安全的。以详细信息的示例文本为例，其中包含：

`<script>alert('a')</script>`

会将其`HTML.Raw`作为脚本标签输出，浏览器将执行该脚本。如果用户提供详细信息文本，这允许他们将脚本注入您的页面（基本的 XSS 攻击）。

如果您想`<br>`在您的视图中替换换行符，请执行此操作。例如，我的控制器可能如下所示：

```
MyModel model = new MyModel();
model.Description = "Hello \r\n how are you today \r\n <script>alert('a')</script> \r\n";
return View(model); 
```

在我看来，我可以这样做：

```
@{ var lines = Model.Description.Split('\r');
   foreach (var line in lines)
   {
       @line.Trim() <br />
   }
 } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T18:37:23.743

您只需要确保 HTML 的 SOURCE 不是问题。换句话说，如果您接受来自用户的 INPUT 并将其存储在您的数据库中，然后使用 Html.Raw 来显示它，那么您可能会为各种问题敞开心扉。

如果 HTML 的源被包含并且来自已知且受信任的来源，则可以大大降低风险。

从本质上讲，它归结为 HTML 的来源。使用此信息，您可以对是否要使用 @Html.Raw() 以及是否要/需要实施进一步的过滤做出最佳判断。选择取决于您，但现在您知道风险。

# java - ArrayList 未检测到第一个输入

> ID：13212106
> 
> 赞同：0
> 
> 时间：2012-11-03T18:18:31.787
> 
> 标签：java, android, arraylist, iteration

我有一个 ArrayList，其中引用了动态添加的 EditTexts 的输入。我迭代 ArrayList 以便我可以获取 EditTexts 的所有值并将它们加在一起。但是，我的 layout.xml 中确实有一个非动态添加的 EditText。

问题是，每当我单击我的计算按钮并且屏幕上唯一的 EditText 是已经布局的 EditText 并且它的输入为 1 或任何其他数字时，我的计算按钮将总输入显示为 0。每当我添加 1 或更多editTexts动态，总输入包括我点击计算按钮后已经布局的EditText。

即使唯一的输入是非动态的editText，我也需要获得正确的总输入。

```
int count = 1;
double gradeValue;
List<EditText> allEd = new ArrayList<EditText>();
List<Spinner> allSp = new ArrayList<Spinner>();
EditText editText1;
EditText editText2;
EditText tempText1;
EditText tempText2;
Spinner spinner1;
Spinner spinnerTemp;

@Override 
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button buttonAdd = (Button) findViewById(R.id.button1);
    Button buttonDel = (Button) findViewById(R.id.button2);
    Button buttonCalc = (Button) findViewById(R.id.button3);

    spinner1 = (Spinner) findViewById(R.id.spinner1);
    String[] options = new String[13]; 
    options[0] = "A+";
    options[1] = "A";
    options[2] = "A-";
    options[3] = "B+";
    options[4] = "B";
    options[5] = "B-";
    options[6] = "C+";
    options[7] = "C";
    options[8] = "C-";
    options[9] = "D+";
    options[10] = "D";
    options[11] = "D-";
    options[12] = "F";

    ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_dropdown_item, options);
    spinnerArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); // The drop down view
    spinner1.setAdapter(spinnerArrayAdapter);

    allEd.add(editText2);
    allSp.add(spinner1);

    buttonAdd.setOnClickListener(this);
    buttonDel.setOnClickListener(this);
    buttonCalc.setOnClickListener(this);

}

@SuppressWarnings("deprecation")
public void onClick(View v) {
    TableLayout tableLayout1 = (TableLayout) findViewById(R.id.tableLayout1);

    switch(v.getId()){
    case R.id.button1:
        if(count != 16){
            count++;

            // Create the row only when the add button is clicked
            TableRow tempRow = new TableRow(MainActivity.this);
            EditText tempText1 = new EditText(MainActivity.this);
            EditText tempText2 = new EditText(MainActivity.this);
            TextView tempTextView = new TextView(MainActivity.this);
            Spinner spinnerTemp = new Spinner(MainActivity.this);
            editText1 = (EditText) findViewById(R.id.editText1);
            editText2 = (EditText) findViewById(R.id.editText2);
            TextView textView3 = (TextView) findViewById(R.id.textView3);
            tempTextView.setText(count + ".");

            tempRow.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
            tempText1.setLayoutParams(editText1.getLayoutParams());
            tempText2.setLayoutParams(editText2.getLayoutParams());
            tempTextView.setLayoutParams(textView3.getLayoutParams());
            tempText1.setInputType(InputType.TYPE_CLASS_TEXT);
            tempText2.setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_DECIMAL);
            tempText2.setId(count);
            spinnerTemp.setLayoutParams(spinner1.getLayoutParams());
            spinnerTemp.setId(count);
            String options[] = { "A+", "A", "A-", "B+", "B", "B-", "C+", "C", "C-", "D+", "D", "D-", "F" };

            ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_dropdown_item, options);
            spinnerArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); // The drop down view
            spinnerTemp.setAdapter(spinnerArrayAdapter);

            allEd.add(tempText2);
            allSp.add(spinnerTemp);

            tempRow.addView(tempTextView);
            tempRow.addView(tempText1);
            tempRow.addView(tempText2);
            tempRow.addView(spinnerTemp);
            tableLayout1.addView(tempRow);
        } else {
            final AlertDialog alertDialog = new AlertDialog.Builder(MainActivity.this).create(); //Read Update
            alertDialog.setTitle("Error");
            alertDialog.setMessage("You can only have up to 16 rows!");

            alertDialog.setButton("Ok", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    alertDialog.dismiss();
                }
            });

            alertDialog.show();
        }
        break;

case R.id.button3:
        int calculation = 0;
        for(int i = 0; i < allEd.size(); i++) {
            EditText totalUnits = allEd.get(i);
            try {
            int units = Integer.parseInt(totalUnits.getText().toString());

            calculation += units;
            }catch (Exception e) {
                //ignore
            }

        }
        double grade = 0;
        for(int i = 0; i < allSp.size(); i++) {
                double gradeValue = calcGradeValue(allSp.get(i).getSelectedItemPosition()); 
                try {
                double calculation1 = (gradeValue) * (Integer.parseInt(allEd.get(i).getText().toString()));

                grade += calculation1;
                }catch (Exception e) {
                    //ignore
                }
            }

        final AlertDialog alertDialog = new AlertDialog.Builder(MainActivity.this).create(); //Read Update
        alertDialog.setTitle("Your calculated GPA");
        alertDialog.setMessage("Your calculated GPA is: " + (grade));
        alertDialog.setButton("Ok", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                alertDialog.dismiss();
            }
        });

        alertDialog.show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T19:00:25.230

我认为也许你没有初始化值editText2，并且你尝试将空对象添加到列表中，但如果没有任何源代码，我真的什么也说不出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T19:23:00.080

我认为您需要查看将 tempText2 editText 添加到列表的位置。检查它是否不是添加动态编辑文本的结果。

看看你在哪里添加以下内容

```
allEd.add(tempText2);
allEd.add(editText2); 
```

由于添加了动态字段，您可能只添加了 tempText2 。因此，当您不添加动态字段时，arraylist 将为空。结果为 0。当您添加动态字段时，这将导致计算工作。

很难说这就是它没有更多的代码。

# jquery - 滑块中的jquery打开/关闭功能-第一次工作，但第二次运行打开，然后关闭它

> ID：13212114
> 
> 赞同：0
> 
> 时间：2012-11-03T18:19:44.387
> 
> 标签：jquery

我遇到了仅运行动画的打开/关闭功能的问题。

在这里查看我的小提琴[http://jsfiddle.net/motocomdigital/X34XJ/7/](http://jsfiddle.net/motocomdigital/X34XJ/7/)

它正在播放，因为我在滑块动画中运行此功能。使用 bx 滑块。

* * *

直到第二个滑块旋转时才会出现此问题。这就是你必须在小提琴中做的事情才能让错误显示出来。

1.  打开小提琴，
2.  点击“打开面板”
3.  关闭面板，
4.  导航到下一张幻灯片
5.  重复上述相同步骤（但在其中一张幻灯片上，让面板保持打开状态并导航到下一侧）
6.  您会注意到，当您返回第一张幻灯片时，如果您尝试打开面板，它将打开，然后立即再次关闭。
7.  如果您再次重复这些步骤，您会注意到面板开始打开、关闭，然后再次打开……啊啊啊好奇怪！！！

* * *

这是我的代码（虽然查看它的小提琴会更好）

```
$('#slider1').bxSlider({

    auto: false,
    speed: 800,

    // runs after new slide has loaded
    onAfterSlide: function(currentSlideNumber, totalSlideQty, currentSlideHtmlObject) {

        var $fadeItems = $('a.openPanel, .panel, span'), // items that fade in
            $panel = $(currentSlideHtmlObject).find('.panel'); // current slide panel

        $fadeItems.removeAttr('style'); // this removes the inline style on all fadeItems, allowing css display: none; to take affect

        $(currentSlideHtmlObject).find($fadeItems).fadeIn(); // current slide fadeIn items fade in

        panelOpen = false; // panel state closed

        panelAction = function() { // panel slide function

            if (panelOpen === true) {

                panelOpen = false;

                $panel.animate({

                    left: '-300px'

                });

            } else {

                panelOpen = true;

                $panel.animate({

                    left: '0px'

                });

            }

        };

        // panel slide open/close button
        $(currentSlideHtmlObject).find('a.openPanel').on('click', function(e) {

            e.preventDefault();
            panelAction();

        });

    }

});
​ 
```

* * *

![在此处输入图像描述](../Images/e8d722f935cf5c0159535382218fba66.png)

* * *

如果有人可以帮助我了解我哪里出错了，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T18:26:16.177

只需在 bxslider onAfterSlide 回调中绑定单击事件时使用 off 取消绑定

```
$(currentSlideHtmlObject).find('a.openPanel').off('click').on('click', function(e) {

            e.preventDefault();
            panelAction();

        }); 
```

但是您的代码在 chrome 上对我来说充满了错误。

请注意，您不应在 bxslider onAfterSlide 回调函数中绑定事件。

见[http://jsfiddle.net/X34XJ/8/](http://jsfiddle.net/X34XJ/8/)

# python - from oauth2client.appengine import oauth2decorator_from_clientsecrets ImportError: No module named appengine

> ID：13212115
> 
> 赞同：4
> 
> 时间：2012-11-03T18:19:48.087
> 
> 标签：python, google-app-engine, oauth, google-bigquery, google-api-python-client

尝试运行我的应用程序时出现以下错误

```
from oauth2client.appengine import oauth2decorator_from_clientsecrets
ImportError: No module named appengine 
```

这是我的 main.py 代码

```
import httplib2
import os
from google.appengine.ext import webapp
from google.appengine.ext.webapp.util import run_wsgi_app
from oauth2client.appengine import oauth2decorator_from_clientsecrets

CLIENT_SECRETS = os.path.join(os.path.dirname(__file__), 'client_secrets.json')

decorator = oauth2decorator_from_clientsecrets(CLIENT_SECRETS,
'https://www.googleapis.com/auth/bigquery')

class MainHandler(webapp.RequestHandler):
    @decorator.oauth_required
    def get(self):
       self.response.out.write("Hello Dashboard!\n")

application = webapp.WSGIApplication([
     ('/', MainHandler),
     ], debug=True)

def main():
    run_wsgi_app(application)

if __name__ == '__main__':
   main() 
```

这是我的 app.yaml

```
application: hellomydashboard
version: 1
runtime: python27
api_version: 1
threadsafe: false

handlers:
- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: /oauth2callback
  script: oauth2client/appengine.py

- url: .*
  script: main.app 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T14:15:18.040

这里的第一个问题是您已将 /oauth2callback 处理程序添加到 app.yaml。请参阅此处有关装饰器的文档：

[https://developers.google.com/api-client-library/python/platforms/google_app_engine?hl=en#Decorators](https://developers.google.com/api-client-library/python/platforms/google_app_engine?hl=en#Decorators)

或者这里的示例代码：

[http://code.google.com/p/google-api-python-client/source/browse/samples/appengine/main.py](http://code.google.com/p/google-api-python-client/source/browse/samples/appengine/main.py)

至于导入错误，您是否将库的代码安装到您的 App Engine 项目中？最简单的方法是下载最新的 google-api-python-client-gae-NN.zip 并将其直接解压缩到您的项目中。

[http://code.google.com/p/google-api-python-client/downloads/detail?name=google-api-python-client-gae-1.0.zip&can=2](http://code.google.com/p/google-api-python-client/downloads/detail?name=google-api-python-client-gae-1.0.zip&can=2)

# unit-testing - PHPUnit + Symfony 什么都不做

> ID：13212118
> 
> 赞同：1
> 
> 时间：2012-11-03T18:20:08.683
> 
> 标签：unit-testing, symfony, phpunit

我刚刚在 OS X + MAMP 上安装了 PHPUnit。（我的 phpunit 安装在我的 MAMP 文件夹中，所以我将它复制到 /usr/bin 因为我无法在没有路径的终端中使用“phpunit”命令）

### 新建 Symfony 文件夹

当我转到一个新的 Symfony2 文件夹并尝试`phpunit -c App/`开始测试时，我得到一个绿色确认，表明所有测试都通过了。

```
PHPUnit 3.7.8 by Sebastian Bergmann.

Configuration read from     
/Users/username/Dropbox/www/symfonydev/Symfony/App/phpunit.xml.dist
.
Time: 0 seconds, Memory: 15.50Mb
OK (1 test, 1 assertion) 
```

### 自己的 symfony 网站

但是当我去我自己的小 Symfony2 项目并执行相同的命令时，**什么也没有发生！他甚至不加载 phpunit.xml.dist**。我的终端窗口根本没有输出。

**然而，测试文件确实存在并且是可读的，我可以通过在 phpunit 的命令行上显式指定它来启动它：**

`phpunit -c app/ src/MatchTracker/Bundle/Tests/Controller/AuthenticationControllerTest.php`这有效。

phpunit.xml.dist 似乎有问题。这是默认的 phpunit.xml.dist，我尝试将其重命名为 phpunit.xml。但什么也没有发生。可能是什么问题呢？我认为他找不到我的 xml 或使用它，或者他可以阅读 phpunit.xml 但没有找到我的测试。

这是**我的终端的一个例子**：你看到 phpunit 命令没有做任何事情，除非我指定了测试文件......

```
MacBook-Pro:www username$ ls
LICENSE     app     composer.json   composer.lock   composer.phar   src     vendor      web
MacBook-Pro:www username$ ls app/
AppCache.php        SymfonyRequirements.php cache           console         phpunit.xml.dist
AppKernel.php       autoload.php        check.php       logs
Resources       bootstrap.php.cache config          phpunit.xml
MacBook-Pro:www username$ phpunit -c app/
MacBook-Pro:www username$ phpunit -c app/ src/MatchTracker/Bundle/Tests/Controller/AuthenticationControllerTest.php
PHPUnit 3.7.8 by Sebastian Bergmann.

Configuration read from /Users/username/Dropbox/www/matchtracker.be/www/app/phpunit.xml

F

Time: 1 second, Memory: 21.75Mb

There was 1 failure:

1) MatchTracker\Bundle\Tests\Controller\DefaultControllerTest::testIndex
Failed asserting that 404 matches expected 200.

/Users/username/Dropbox/www/matchtracker.be/www/src/MatchTracker/Bundle/Tests/Controller/AuthenticationControllerTest.php:28

FAILURES!
Tests: 1, Assertions: 1, Failures: 1.
MacBook-Pro:www username$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T18:51:31.953

你的里面有什么`phpunit.xml`？`&lt;testsuites&gt;`该文件的部分告诉 phpunit 哪些目录扫描测试。

请记住，`phpunit.xml`覆盖`phpunit.xml.dist`.

查看原始[phpunit.xml.dist](https://github.com/symfony/symfony-standard/blob/master/app/phpunit.xml.dist)文件，然后删除`phpunit.xml`或首先复制`phpunit.xml.dist`到`phpunit.xml`.

# iphone - 如何查找未记录版本的 handleGesture 选择器（用于 UIWebView）需要什么样的参数？

> ID：13212119
> 
> 赞同：0
> 
> 时间：2012-11-03T18:20:11.017
> 
> 标签：iphone, ios, ipad, uiwebview, gestures

我向 UIWebView 实例添加了一个自定义弹出菜单：

```
- (void)viewDidLoad
{
    UILongPressGestureRecognizer* gesture = [[[UILongPressGestureRecognizer alloc] 
    initWithTarget:self action:@selector(handleGesture::)] autorelease];
}

- (void)handleGesture
{

}

- (void)handleGesture:(UIGestureRecognizer*)gestureRecognizer
{
    if (gestureRecognizer.state == UIGestureRecognizerStateEnded) {
        [gestureRecognizer.view becomeFirstResponder];
        UIMenuController* mc = [UIMenuController sharedMenuController];
        [mc setTargetRect: gestureRecognizer.view.frame inView: gestureRecognizer.view.superview];
        [mc setMenuVisible: YES animated: YES];
} 
```

它有效！直到我将 textarea（CodeMirror 编辑器）聚焦在网页上。在这种情况下，我有以下例外：

```
-[FirstViewController handleGesture::]: unrecognized selector sent to instance 0x20369c00
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[FirstViewController handleGesture::]: unrecognized selector sent to instance 0x20369c00'
*** First throw call stack:
(0x3608c2a3 0x3439c97f 0x3608fe07 0x3608e531 0x35fe5f68 0x3747ad31 0x374423dd 0x3762f479 0x37366837 0x3736529b 0x360616cd 0x3605f9c1 0x3605fd17 0x35fd2ebd 0x35fd2d49 0x3650f2eb 0x373b1301 0x140bb 0x14060)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

我认为需要使用外来参数实现未记录版本的 handleGesture 选择器。这样对吗？如何找到需要什么样的参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T18:36:14.300

正确的代码：

```
initWithTarget:self action:@selector(handleGesture:)] autorelease]; 
```

# c# - Windows Phone Live SDK API - 重启应用后获取新的会话对象

> ID：13212120
> 
> 赞同：5
> 
> 时间：2012-11-03T18:20:20.280
> 
> 标签：c#, windows-phone

所以我成功地将我的 Windows Phone 8 应用程序连接到 Live API，我也成功地从我的 hotmail 帐户中读取数据。

我可以访问所需的客户端 ID 和实时访问令牌。

但是当我退出并重新启动我的应用程序时，我失去了对会话和客户端对象的所有引用，我必须重新开始这个过程。

我不想用网络掩码惹恼用户，他必须再次同意他在每次启动应用程序时为我提供所需的权限。但是我也没有找到一种方法来获得对会话对象的引用，而无需这一步。

登录掩码仅在安装应用程序后第一次显示，之后仅显示上述屏幕。但是用户每次都接受这个还是挺烦人的。

我已经尝试序列化会话对象，这是不可能的，因为该类没有标准构造函数。

也许可以使用实时访问令牌创建一个新会话，但我还没有找到这样做的方法。

有任何想法吗？我做错了什么，我知道有一种方法可以在不提示用户的情况下再次登录。我感谢每一个想法。

我使用的一些代码：

```
 /// <summary>
    /// This method is responsible for authenticating an user asyncronesly to Windows Live.
    /// </summary>
    public void InitAuth()
    {
        this.authClient.LoginCompleted +=
            new EventHandler<LoginCompletedEventArgs>(this.AuthClientLoginCompleted);

        this.authClient.LoginAsync(someScopes);
    }

    /// <summary>
    /// This method is called when the Login process has been completed (successfully or with error).
    /// </summary>
    private void AuthClientLoginCompleted(object sender, LoginCompletedEventArgs e)
    {
        if (e.Status == LiveConnectSessionStatus.Connected)
        {
            LiveConnector.ConnectSession = e.Session; // where do I save this session for reuse?
            this.connectClient = new LiveConnectClient(LiveConnector.ConnectSession);

            // can I use this access token to create a new session later?
            LiveConnector.LiveAccessToken = LiveConnector.ConnectSession.AccessToken;

            Debug.WriteLine("Logged in.");
        }
        else if (e.Error != null)
        {
            Debug.WriteLine("Error signing in: " + e.Error.ToString());
        }
    } 
```

我尝试使用 LiveAuthClient.InitializeAsync - 重新启动应用程序后在后台登录的方法，但会话对象保持为空：

```
// this is called after application is restarted
private void ReLogin()
{
    LiveAuthClient client = new LiveAuthClient(LiveConnector.ClientID);
            client.InitializeCompleted += OnInitializeCompleted;
            client.InitializeAsync(someScopes);
}

private void OnInitializeCompleted(object sender, LoginCompletedEventArgs e)
    {
        Debug.WriteLine("***************** Inititalisation completed **********");
        Debug.WriteLine(e.Status); // is undefined
        Debug.WriteLine(e.Session); // is empty
    } 
```

有谁知道我如何在重新启动应用程序后访问新会话？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-04T17:39:21.460

经过整整两天的时间寻找我犯的错误，我终于发现了我做错了什么：我必须使用 wl.offline_access 范围来完成这项工作！

让我在这里引用另一个用户：

“如果您的应用程序使用 wl.offline_access 范围，那么 live:SignInButton 控件会为您保存并自动加载它。只需使用 SessionChanged 事件来捕获会话对象。这样用户只需登录一次。” （参见[WP7 如何在 TombStoning 期间存储 LiveConnectSession？](https://stackoverflow.com/questions/10946629/wp7-how-to-store-liveconnectsession-during-tombstoning)）

现在一切又变得有趣了。不敢相信这是问题所在。测试和工作。好的！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-11T19:21:03.867

我自己一直在努力让它在 Windows Live + Azure 移动服务应用程序上运行，所以我想我会在这里发布一个完整的工作代码示例，因为我已经让它工作了。

关键部分是 wl.offline_access 范围和对 InitializeAsync 的调用。

注意：此示例还连接到 Windows Azure 移动服务。如果您不使用它，只需删除与 MobileService 相关的内容。

```
 private static LiveConnectSession _session;
    private static readonly string[] scopes = new[] {"wl.signin", "wl.offline_access", "wl.basic"};

    private async System.Threading.Tasks.Task Authenticate()
    {
        try
        {
            var liveIdClient = new LiveAuthClient("YOUR_CLIENT_ID");
            var initResult = await liveIdClient.InitializeAsync(scopes);

            _session = initResult.Session;

            if (null != _session)
            {
                await MobileService.LoginWithMicrosoftAccountAsync(_session.AuthenticationToken);
            }

            if (null == _session)
            {
                LiveLoginResult result = await liveIdClient.LoginAsync(scopes);

                if (result.Status == LiveConnectSessionStatus.Connected)
                {
                    _session = result.Session;
                    await MobileService.LoginWithMicrosoftAccountAsync(result.Session.AuthenticationToken);

                }
                else
                {
                    _session = null;
                    MessageBox.Show("Unable to authenticate with Windows Live.", "Login failed :(", MessageBoxButton.OK);
                }
            }
        }
        finally
        {
        }
    } 
```

# css - 边框悬停在 div (CSS) 上

> ID：13212124
> 
> 赞同：0
> 
> 时间：2012-11-03T18:20:50.040
> 
> 标签：css, html, border

首先，我想给你一个小提琴，但是当我运行它时，它看起来是正确的，所以很明显问题出在我的代码中的其他地方，我不知道在哪里。

基本上，我希望页脚上方的 2 个 div 列周围有圆形边框，但是它们悬停在 div 上。此外，如您所见，圆形边框隐藏在底角的 div 背景后面。我该如何解决这些问题？

链接（对不起，看起来很狡猾的链接，但这是我能找到的第一个免费托管网站，在我真正得到一些适当的托管之前测试该网站）： http: [//pawel.net63.net/](http://pawel.net63.net/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T18:32:19.783

将背景图像放在`#featured-product`not上`#bottom-main`。

# android - 图片来自互联网，比android中应该的要小

> ID：13212127
> 
> 赞同：2
> 
> 时间：2012-11-03T18:21:06.133
> 
> 标签：android, url, inputstream

我想从 Internet 加载图标。我这样做：

```
Drawable drawable = null;
                try {
                    InputStream is = (InputStream) new URL(xml.getBIcon())
                            .getContent();
                    Drawable d = Drawable.createFromStream(is, "src name");

                    drawable = d;

                } catch (Exception e) {
                    System.out.println("Exc=" + e);
                } 
```

和

```
final AlertDialog alertDialog = new AlertDialog.Builder(
                        context).create();
                alertDialog.setTitle(title);
                alertDialog.setMessage(text);
                alertDialog.setButton("Install",
                        new DialogInterface.OnClickListener() {

                            public void onClick(DialogInterface dialog,
                                    int which) {
                                String url = link;
                                Intent i = new Intent(Intent.ACTION_VIEW);
                                i.setData(Uri.parse(url));
                                context.startActivity(i);
                            }
                        });

                alertDialog.setIcon(drawable);

                alertDialog.show();
            } 
```

不幸的是，该图标比应有的低两倍。当它在 res 文件夹中时，它的大小正确。这是什么原因？

# python - 提取contourArea opencv（Python）的问题

> ID：13212129
> 
> 赞同：2
> 
> 时间：2012-11-03T18:21:20.923
> 
> 标签：python, image, opencv

我正在尝试使用 OpenCV 和 Python 获取图像中最大的区域，代码如下：

```
#Loading image:
fuente=cv.LoadImage('train/fruit1.jpg')

#Converting to grayscale...
#Converting to binary...
#Apply canny method...
#Dilating borders...

#Trying obtain contours:
storage = cv.CreateMemStorage(0)
contours = cv.FindContours(bordes, storage, cv.CV_RETR_EXTERNAL, cv.CV_CHAIN_APPROX_SIMPLE,(0,0))

#Drawing Contours...
contornoimg=cv.CreateImage(cv.GetSize(fuente),fuente.depth,1)
cv.DrawContours(contornoimg,contours,cv.Scalar(255),cv.Scalar(0),2,1,8,(0,0));
cv.SaveImage("train/contornos.png",contornoimg); 
```

如果现在我打开图像“contornos.png”，我可以看到不同的轮廓，不仅仅是一个，就像我想要最大的轮廓，我必须计算面积最大的轮廓

```
max_area = -1
best_cnt = None

for cnt in contours:
    area = cv.ContourArea(cnt,slice=cv.CV_WHOLE_SEQ)
    if area > max_area:
        max_area = area
        best_cnt = cnt 
```

但是当我执行文件时，会得到这个错误信息：

```
cv.ContourArea(cnt,cv.CV_WHOLE_SEQ)->AttributeError: 'module' object has no attribute 'CV_WHOLE_SEQ' 
```

有什么帮助吗？感谢你所做的一切！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-29T20:05:27.603

我用这个：

导入简历2

面积 = cv2.contourArea(cnt)

我在这里找到它：http: [//opencvpython.blogspot.ru/2012/04/contour-features.html](http://opencvpython.blogspot.ru/2012/04/contour-features.html)

# c++ - C++ 中的链接器错误

> ID：13212131
> 
> 赞同：-1
> 
> 时间：2012-11-03T18:21:26.553
> 
> 标签：c++, visual-studio-2010

我在 Visual Studio C++ 2010 中数小时都无法弄清楚这个链接器错误：

```
Error   1   error LNK2019: unresolved external symbol "public: static double * * __cdecl   
Matrix::rotx(double)" (?rotx@Matrix@@SAPAPANN@Z) referenced in function _main   C:\Documents 
and Settings\User\My Documents\Visual Studio 
2010\Projects\Assignment_01\Assignment_01\Assignment_01.obj Assignment_01 
```

我不确定是什么问题，一旦我将 Matrix 类分离到单独的头文件和 cpp 文件中，这种情况就开始发生了。一定是关于我如何包含文件的事情。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T18:29:06.937

您在头文件/类声明中声明了一个未在 .cpp 文件中实现的函数。确保您`rotx(double`在矩阵文件中定义了方法）。

# symfony - 在 symfony2 中通过唯一键验证实体的最佳方法

> ID：13212132
> 
> 赞同：0
> 
> 时间：2012-11-03T18:22:10.147
> 
> 标签：symfony, symfony-forms

我正在尝试构建一个表单来收集有关游戏中新玩家的信息。

要开始游戏，需要提供昵称、电子邮件和代码。

代码存储在另一个与玩家表连接的表中，具有一对一的关系

在验证期间我需要做的是检查提供的令牌是否存在，如果存在，则将*Player* id 存储在*代码*记录中。

为此，我正在尝试构建一个表单：

```
class PlayerType extends AbstractType
{
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add('code','text')
        ->add('email', 'email') 
        ->add('nick', 'text')
    ;
}
...
} 
```

但在验证期间（或可能在创建代码实例期间）以这种方式

```
Argument 1 passed to Player::setCode() must be an instance of Code, string given 
```

这很明显，因为已经提供了字符串。

如何在表单验证期间执行查找并且不传递令牌字符串而是传递令牌实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T18:48:58.387

查看[数据转换器](http://symfony.com/doc/current/cookbook/form/data_transformers.html)。这将允许您创建一个带有标量类型字段的表单，当在表单提交上填充模型时，该字段将转换为实体。

关于验证，您需要创建一个[自定义验证约束](http://symfony.com/doc/current/cookbook/validation/custom_constraint.html)来检查给定代码是否存在于数据库中。

# javascript - 如何检测是否在 xhtml 中禁用了 javascript

> ID：13212136
> 
> 赞同：0
> 
> 时间：2012-11-03T18:22:31.530
> 
> 标签：javascript, redirect, noscript

我有一个带有合适的 xhtml 标头（'Content-type: application/xhtml+xml'）的 xhtml 网站，因此它被视为 xml 文档。该页面严重依赖 Javascript，如果禁用 Javascript 或发生错误，我想实现重定向。

这

```
<noscript>
    <meta http-equiv='refresh' content='0; url=http://www.google.com' />
</noscript> 
```

方法不起作用，因为刷新总是被触发，因为`<noscript>`“不能在 xml 文档中使用”，这就是规范所说的。但是我该如何管理重定向呢？

# google-app-engine - JPA 查询返回列表 而是列出

> ID：13212142
> 
> 赞同：0
> 
> 时间：2012-11-03T18:23:23.897
> 
> 标签：google-app-engine, jpa, datanucleus

我在 GAE 上使用 JPA，这个查询返回一个包含 1 个元素的列表。这个元素是一个 org.datanucleus.store.types.sco.backed.ArrayList （它最终包含我的结果），而我期待一个产品列表。我做错了什么？提前谢谢！

```
Query query = entityManager.createQuery
             ("select p.products from Place p where p.id = :Id" );
query.setParameter("Id",id);
    List<Product> resultList = query.getResultList();
    //for debugging purpose
    assert (resultList.get(0) instanceof Product);
    if (resultList.size() > 0)
    {
        //raise a cast exception here
        Product p = resultList.get(0);
    } 
```

* * *

```
@Entity
public class Place {

    private Collection<Product> products;
    @OneToMany(cascade = CascadeType.ALL)
    public Collection<Product> getProducts() {
        return products;
    }

    public void setProducts(Collection<Product> products) {
        this.products = products;
    }

    private String id;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Extension(vendorName="datanucleus", key="gae.encoded-pk", value="true")
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:13:13.033

当 JPQL 规范说选择项应该是时，从 JPQL 查询中选择多值字段是非法的

```
"single_valued_path_expression | scalar_expression | aggregate_expression | 
    identification_variable | OBJECT(identification_variable) | constructor_expression" 
```

所以说这个查询是正确的答案是错误的。如果您想要某个地方的“产品”，那么您检索该地方并且它有产品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T07:53:11.993

我对DataNucleus不太熟悉，所以没有执行。但是使用 JPA，查询应该可以正常工作。您可以尝试以下代码来构建查询，该查询根据指定的类返回结果。

```
entityManager.createQuery("SELECT p.products FROM Place p WHERE p.id = :Id", Product.class); 
```

**从文档：**

```
<T> TypedQuery<T> createQuery(java.lang.String qlString,
                                      java.lang.Class<T> resultClass) 
```

> 创建 TypedQuery 的实例以执行 Java Persistence 查询语言语句。查询的选择列表必须只包含一个项目，该项目必须可分配给由 resultClass 参数指定的类型。

```
Parameters:
         qlString - a Java Persistence query string
         resultClass - the type of the query result 
```

* * *

**编辑：** 您可以尝试以下代码。

```
Place place = entityManager.createQuery("SELECT p FROM Place p WHERE p.id = :Id", Place.class).getSingleResult();

List<Products> products = place.getProducts(); 
```

另外作为旁注，您正在使用 JPA，但`@Extension`似乎是 JDO 特定的注释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T18:27:05.740

该类 javadoc 告诉它实现`java.util.List`了 ，因此它是一个有效的返回类型。

请记住，规范说您将 a`List`作为返回类型，而不是 a `java.util.ArrayList`，因此任何实现`List`的类都与其他任何类一样有效。

更新：

尝试：

```
 SELECT pr FROM Place pl INNER JOIN pl.products pr WHERE pl.id = :Id 
```

# objective-c - 检查变量是否属于枚举值

> ID：13212147
> 
> 赞同：1
> 
> 时间：2012-11-03T18:23:59.040
> 
> 标签：objective-c, ios, enums

有没有办法将一组值分配给一个枚举并检查一个变量是否在objective-c的枚举中具有它的值。如果对象存在于数组中，则类似于获取数组中对象的索引。我想给出一个常见的行为，当在我的表视图中点击某些索引（可能不按顺序）时，想要避免 if-ing 所有索引，希望我可以使用枚举样式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T04:16:09.217

与大多数编程语言一样，Objective-C 不为原始类型提供“类型成员资格”测试——仅针对对象类型（例如`isKindOfClass:`）——因此使用 an`enum`不会解决您的问题。

但是，鉴于您`enum`首先考虑的是一个，听起来您有一小部分要检查的固定值。在这种情况下，您可以只使用静态数组，例如：

```
static NSUInteger indices[] = { 2, 42, 57 }; 
```

这样一个数组中的值的数量由下式给出`sizeof(indices) / sizeof(NSUInteger`，您可以编写一个简单的循环或二进制搜索来测试成员资格。

如果您希望使用对象 then`NSSet`是一个不错的选择，如果在执行过程中数字会发生变化，那么`NSMutableSet`. 例如

```
NSSet *indices = [NSSet setWithObjects:@2, @42, @57, nil]; 
```

并且您使用以下方法测试成员资格`member:`：

```
if ([indices member:@indexToTest] != nil) ... 
```

（注意：与for`NSArray`的规范不同，它**没有**说它使用，因此在这里使用。）`containsObject:``NSSet`**`isEqual:``member:`**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T19:13:05.593

你不能使用 an `enum`，因为你不能枚举它们或调用 sth。喜欢`contains`他们。如果我理解正确，我认为直接的方法就是使用 an`NSArray`来存储您关心的索引。假设您要识别索引 2,6 和 14：

```
NSArray *indices = [NSArray arrayWithObjects: @2, @6, @14, nil]; 
```

（这`@`是必要的，因为 NSArray 只能存储对象。`@`将整数转换为`NSNumber`实例。

然后检查当前选择的索引是否在其中，您可以使用：

```
int indexToCheck = ...;
BOOL indexIsInArray = [index containsObject:@(indexToCheck)]; 
```

如果您正在寻找一种更“花哨”（和更快）的方法，您可以使用位操作（再次以 2,6 和 14 为例）：

```
int indices = 1 << 2 | 1 << 6 | 1 << 14; 
```

然后检查：

```
int indexToCheck = ...;
BOOL isValid = (1 << indexToCheck) & indices; 
```

在你的其中一个中时，哪里`isValid`是真的。`indexToCheck``indices`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T19:13:09.593

不，内部枚举基于整数，并且映射发生在编译时。因此，您需要对每种枚举类型进行特定检查（如果它们是连续数字，则可以使用“>”和“<”检查）。**

# java - LoadingCache 停止自动刷新，只提供过时的数据

> ID：13212153
> 
> 赞同：0
> 
> 时间：2012-11-03T18:24:59.987
> 
> 标签：java, scala, caching, guava

我正在使用 LoadingCache：

```
val cacheloader = 
new CacheLoader[Key, Value]() {
  override def load(key: Key): Value = loadKeyFunc(key, None)
  override def reload(key: Key, prevValue: Value): ListenableFuture[Value] = {
    val task = ListenableFutureTask.create(new Callable[Value]() {
                                              def call(): Value = {
                                                loadKeyFunc(key, Some(prevValue))
                                              }
                                           })
    executor.execute(task)
    return task
  }
}

val cache: LoadingCache[FirstPageSearch, Array[String]] =
                   CacheBuilder.newBuilder()
                               .maximumSize(10)
                               .refreshAfterWrite(5, TimeUnit.MINUTES)
                               .build(cacheLoader) 
```

`loadKeyFunc`只是表单的匿名函数`val loadKeyFunc: (Key, Option[Value]) => Value`。cacheLoader 使用 executor ( `Executors.newFixedThreadPool(6)`) 使刷新异步。系统收到一个始终通过此缓存的 HTTP 请求（`get(key)`向缓存发出 a），始终从缓存中获取结果。当它太旧时，它会在后台重新计算并在下一个请求时提供它。

几天甚至几周内一切正常。但有时（通常在非常低的使用时间）缓存会停止刷新。新请求开始接收总是相同的旧数据。我里面有一个日志语句`loadKeyFunc`，我知道它没有被调用。

似乎由于某种原因`LoadingCache`没有看到数据超过 5 分钟。在我重新启动系统（HTTP 服务器）后，一切又恢复正常。

有任何想法吗？

PS：我们使用的 loadKeyFunc 只是一个简单的日志语句，然后调用一个无状态对象，该对象查询我们的搜索后端系统返回一个字符串数组（每个数组位置都是一个搜索页面）。

PS2：它是一个基于 Scalatra 的运行嵌入式 Jetty HTTP 服务器。`LoadingCache`是在对象内部创建的`ScalatraServlet`。

清理后的小日志（/first_page 是始终使用缓存的请求，“Executing...”是 (re)load 方法中的日志语句`CacheLoader`）：

```
[INFO] [qtp48202314-8659] 2012-11-03 04:55:58 - Request(/first_page)
[INFO] [pool-2-thread-10] 2012-11-03 04:55:58 - Executing FirstPageSearch to put in cache
[INFO] [qtp48202314-8659] 2012-11-03 05:19:17 - Request(/first_page)
[INFO] [qtp48202314-8659] 2012-11-03 05:20:32 - Request(/first_page)
[INFO] [qtp48202314-8661] 2012-11-03 05:25:22 - Request(/first_page)
[INFO] [qtp48202314-8659] 2012-11-03 05:26:09 - Request(/first_page)
[INFO] [qtp48202314-8659] 2012-11-03 05:26:18 - Request(/first_page)
[INFO] [qtp48202314-8661] 2012-11-03 05:38:37 - Request(/first_page)
[INFO] [qtp48202314-8659] 2012-11-03 06:54:36 - Request(/first_page)
[INFO] [qtp48202314-26]   2012-11-03 11:31:37 - Request(/first_page)
[INFO] [pool-2-thread-1]  2012-11-03 11:31:37 - Executing FirstPageSearch to put in cache
[INFO] [qtp48202314-25]   2012-11-03 11:41:53 - Request(/first_page)
[INFO] [qtp48202314-8674] 2012-11-03 14:48:58 - Request(/first_page)
[INFO] [qtp48202314-8674] 2012-11-03 14:54:45 - Request(/first_page)
[INFO] [qtp48202314-8674] 2012-11-03 15:31:32 - Request(/first_page)
[INFO] [qtp48202314-26]   2012-11-03 15:31:48 - Request(/first_page)
[INFO] [qtp48202314-8674] 2012-11-03 15:32:05 - Request(/first_page)
[INFO] [qtp48202314-8674] 2012-11-03 15:44:44 - Request(/first_page)
[INFO] [qtp48202314-8674] 2012-11-03 15:44:44 - Request(/first_page)
[INFO] [qtp48202314-26]   2012-11-03 15:47:39 - Request(/first_page)
[INFO] [qtp48202314-8674] 2012-11-03 15:51:20 - Request(/first_page)
[INFO] [qtp48202314-26]   2012-11-03 15:52:59 - Request(/first_page)
[INFO] [qtp48202314-8674] 2012-11-03 15:54:18 - Request(/first_page)
[INFO] [qtp48202314-26]   2012-11-03 15:55:37 - Request(/first_page) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T18:30:55.673

来自`CacheBuilder.refreshAfterWrite`Javadoc：

> 当前，当对条目的第一个陈旧请求发生时，会执行自动刷新。如果返回的future完成，触发刷新的请求将阻塞调用`CacheLoader.reload(K, V)`并立即返回新值，否则返回旧值。

因此，当一个值过时时，在您实际查询该键之前不会触发刷新，此时它将返回旧值并异步触发刷新。一旦值完成刷新，它将开始从缓存中返回。

你确定这不是你看到这种行为的原因吗？

想到的另一种可能性是，由于某种原因，您的 loadKeyFunc 没有终止。在固定大小的线程池中，如果您有六个查询因任何原因被锁定，这可能会阻止新查询进入线程池，这似乎会导致您观察到的问题。也许您应该使用`Executors.newCachedThreadPool`，这可以避免这个问题——尽管您仍然会遇到由锁定线程引起的内存泄漏。=/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:16:35.480

您可以避免使用`expireAfterWrite`. 这很难保证不提供陈旧的数据。我通常建议与 结合`expireAfterWrite`使用`refreshAFterWrite`，但显然在到期前有更大的延迟，以便有时间执行刷新。

# php - 将自定义菜单项添加到 WordPress 菜单

> ID：13212154
> 
> 赞同：5
> 
> 时间：2012-11-03T18:25:05.977
> 
> 标签：php, wordpress

我有一个 WordPress 菜单，其中包含一些我通过标准（拖放）WordPress 管理菜单功能添加的菜单项。最近我不得不在菜单中添加另一个生成动态href 链接的项目。我在我的 functions.php 文件中使用以下代码实现了这一点：

> //将我的个人资料菜单项动态添加到成员菜单（根据当前登录的用户生成用户名）
> 
> add_filter('wp_nav_menu_items','add_profilelink_in_menu', 10, 2);
> 
> 功能 add_profilelink_in_menu( $items, $args ) {
> 
> ```
> if( $args->theme_location == 'secondary')  {
> 
>  global $current_user;            
>        //converts user id to username           
>        $user_info = get_userdata($current_user->ID);
> 
> $items .='<li id="menu-item-2091" class="menu-item menu-item-2091">
>  <a href="https://www.mysite.com/members/' . $user_info->user_login .'">Profile</a>
>  </li>';
> 
>   }
>   return $items; 
> ```
> 
> }

我的问题是这个菜单项被添加到菜单的末尾，并且常规的 WordPress 菜单类（例如“current-menu-item”）不会应用于这个项目。有没有办法让我控制这个菜单项添加到的位置（例如：在前两个项目之后添加这个项目？）

以及如何让 WordPress 将此动态生成的菜单项视为常规菜单项并让它添加它添加其他菜单项的所有类（通过 WordPress 菜单功能创建）？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T03:59:17.370

这是您可以使用 jquery 建立的逻辑

```
 //suppose your menu is this
  <ul id="secondary_nav">
    <li id="li_unique_id_1"><a href="">menu 1</a></li>
    <li id="li_unique_id_2"><a href="">menu 2</a></li>
    <li id="li_unique_id_4"><a href="">menu 4</a></li>
</ul>

 //the jquery workaround
 //place this in your footer
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js'></script>
<script type='text/javascript'>
$(function(){
    <?php
     global $current_user;            
     //converts user id to username           
     $user_info = get_userdata($current_user->ID);
    ?>
    $("<li id='menu-item-2091' class='menu-item menu-item-209'><a href='https://www.mysite.com/members/<?php echo $user_info->user_login; ?>'>Profile</a></li>").insertAfter("#secondary_nav #li_unique_id_2");     
});   
</script> 
```

您还可以使用[insertBefore](http://api.jquery.com/insertBefore/)功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T04:59:37.590

您是否为此检查了主题->菜单中的 Wordpress 菜单选项？您可以从那里轻松添加菜单，也可以从那里设置自定义菜单。希望对您有所帮助。

# ruby-on-rails-3 - 填充简单表单列表框的时间数组

> ID：13212155
> 
> 赞同：0
> 
> 时间：2012-11-03T18:25:12.523
> 
> 标签：ruby-on-rails-3, activerecord

我有一个时间字段，希望只显示以下时间：

09:00 09:15 09:30 09:45 10:00 ... 14:00

我正在使用 Simple_Forms、bootstrap 和 activerecord。

我尝试的最后一件事是设置一个像这样的全局初始化程序：

```
ValidHours =
['09:00', '09:15', '09:30', '09:45', '10:00', '10:15', '10:30', '10:45', 
  '11:00', '11:15', '11:30', '11:45', '12:00',
  '12:15', '12:30', '12:45', '13:00', '13:15', '13:30', '13:45', '14:00'] 
```

然后在 Simple_Forms 我使用：

```
 <%= f.input :order_until_hour, :label => "Order until", :collection => ValidHours %> 
```

这会正确显示值，但它们似乎没有保存在数据库中。

如果可能的话，我还希望在它所属的模型中包含此信息。

我也试过：

```
def self.ValidHours
  ['09:00', '09:15', '09:30', '09:45', '10:00', '10:15', '10:30', '10:45', '11:00',
    '11:15', '11:30', '11:45', '12:00', '12:15', '12:30', '12:45', '13:00', 
    '13:15', '13:30', '13:45', '14:00']
end 
```

在视图中：

```
 <%= f.input :order_until_hour, :label => "Order until", :collection => ValidHours %> 
```

但这也没有用。

感谢您提供任何线索！

编辑：

感谢您的回复。我试过你的建议。

它们现在正确显示，我还检查了数据库，它们也被保存了。但是，如果我单击编辑（保存后），它仍然显示为空。

这是代码：

```
class Shop < ActiveRecord::Base

  def self.ValidHours
      [['09:00', '09:00'], ['09:15', '09:15'], ['09:30', '09:30'], ['09:45', '09:45'], ['10:00', '10:00'],
       ['10:15', '10:15'], ['10:30', '10:30'], ['10:45', '10:45'], ['11:00', '11:00'], ['11:15', '11:15'],
       ['11:30', '11:30'], ['11:45', '11:45'], ['12:00', '12:00'],
       ['12:15', '12:15'], ['12:30', '12:30'], ['12:45', '12:45'], ['13:00', '13:00'], ['13:15', '13:15'],
       ['13:30', '13:30'], ['13:45', '13:45'], ['14:00', '14:00']]
  end 
```

在视图中：

```
 <%= f.input :order_until_hour, :label => "Order until", :collection => Shop.ValidHours %> 
```

在数据库中，值显示为：

```
order_until_hour: "2000-01-01 09:00:00" 
```

所以我想我会像这样改变ValidHours：

```
 def self.ValidHours
      [['09:00', '2000-01-01 09:00'], ['09:15', '2000-01-01 09:15'] … 
```

但这没有任何区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T18:40:59.513

你有`key`which 是显示在下拉列表中的文本，但`value`不存在，所以你必须执行以下操作：

```
def self.ValidHours
  [['09:00','09:00'], ['09:15','09:15'], ['09:30','09:30'],['09:45','09:45'],['10:00','10:00'],['10:15','10:15'],['10:30','10:30'], ['10:45','10:45'],['11:00','11:00']]
end 
```

希望这可以帮助！

# java - MouseListener 需要与许多 Java 对象交互

> ID：13212159
> 
> 赞同：0
> 
> 时间：2012-11-03T18:25:27.797
> 
> 标签：java, graphics, mouselistener

我在屏幕上绘制了大量图像，我需要检测何时单击。我遇到的问题是不同的类绘制不同的图像。我需要某些鼠标点击才能与某些类进行交互。我怎样才能做到这一点？我应该创建自己的 MouseHandler 类吗？这将如何与某些班级交谈？

先感谢您

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-03T18:35:55.377

如果您在同一个面板上绘制每个图像，您将需要自己检测哪个图像被单击。另一方面，如果在单个面板上绘制单个图像，则可`MouseListener`以为每个单独的面板使用不同的图像。

# java - 使用骰子的二十一点游戏

> ID：13212161
> 
> 赞同：2
> 
> 时间：2012-11-03T18:25:42.870
> 
> 标签：java, dice, blackjack

我正在用 Java 做一个项目，在该项目中我使用骰子来模拟二十一点游戏，但是，我遇到了一个我编写了错误代码的区域。如果玩家得分高于他，我正试图让经销商模拟动作。此外，我的`checkWinner()`方法似乎在错误的时间变得活跃。我不是要求任何人修复它，而是告诉我代码哪里出错了。

```
public class BlackJack {

    static PairOfDice cards = new PairOfDice();
    static Scanner scan = new Scanner(System. in );
    static int playerScore, dealerScore, player, dealer, tempScore;
    static boolean newGame;
    static String play, hit;

    public static void main(String[] args) {
        newGame();
        dealerRoll();
        playerRoll();

        // checkWinner();
    }

    public static void newGame() {

        System.out.println("Would you like to play blackjack? y or n?");
        play = scan.nextLine();

        if (play == "y"); {
            newGame = true;
        }
        if (play != "y") newGame = false;
    }

    public static void dealerRoll() {
        while (newGame) {
            cards.rollDice();
        }

        dealerScore = (cards.rollDice());
        System.out.println("Dealer score is: " + dealerScore);

        if (dealerScore <= 15 && playerScore > dealerScore) tempScore = cards.rollDice();
        System.out.println("The dice roll was: " + tempScore);
        dealerScore += tempScore;
        System.out.println("Dealer score is: " + dealerScore);

    }

    public static void playerRoll() {
        while (newGame) {
            cards.rollDice();
        }

        playerScore = (cards.rollDice());

        System.out.println("You total is " + playerScore);

        while (playerScore < 21 || playerScore < dealerScore) {

            System.out.println("Would you like to take a hit? y or n?");
            hit = scan.nextLine();
            if (hit.equals("y")) {
                tempScore = cards.rollDice();
                System.out.println("The dice roll was: " + tempScore);
                playerScore += tempScore;
                System.out.println("Your score is now: " + playerScore);

            }
            else if (hit.equals("n")); {
                checkWinner();
            }
        }
    }

    public static void checkWinner() {
        if (playerScore == 21) System.out.println("You win!");
        else if (dealerScore == 21) System.out.println("Sorry, Dealer has won!");
        else if (dealerScore > playerScore) System.out.println("Sorry, Dealer has won!");
        else if (playerScore > dealer) System.out.println("You win!");
        else if (playerScore > 21) System.out.println("Sorry you busted, Dealer has won!");

        else if (dealerScore > 21) System.out.println("Dealer has busted, You win!");
    }
}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T19:35:52.960

当您完成玩家回合时，您无法检查获胜者。只有在庄家转身后才这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:18:57.913

我重新编写了代码并想出了这个。任何意见将不胜感激。

```
import java.util.*;

public class BlackJack
{
    static PairOfDice cards = new PairOfDice();
    static Scanner scan = new Scanner(System.in);
    static int playerScore, dealerScore, player, dealer, tempScore, takeHit, stand;
    private static boolean playGame;
    static String play= "y", yesPlay;
    static char hit;

    public static void main(String[] args)
    {
        newGame();

    }

    public static void newGame()
    {
        do
        {

            playerRoll();
            dealerRoll();
            stand();
            checkWinner();
            System.out.println("Would you like to play again? (Y/N)");
        } while (scan.next().toLowerCase().charAt(0) == 'y');

    }

    public static int takeHit()
    {
        return takeHit = cards.rollDice();
    }

    public static  int stand()
    {
        return playerScore;

    }

    public static void dealerRoll()
    {
        while(playGame)
        {
            cards.rollDice();
        }

        dealerScore = (cards.rollDice());

                do
                {
                    tempScore = takeHit();

                //System.out.println("The dice roll was: " + tempScore);
                dealerScore += tempScore;
                System.out.println("Dealer score is: " + dealerScore);
                }while(dealerScore <= 15 && playerScore > dealerScore);

    }

    public static void playerRoll()
    {
        while(playGame)
        {
            cards.rollDice();
        }

        playerScore = (cards.rollDice());

            System.out.println("Your total is " + playerScore);

            System.out.println("Would you like a hit?(Y/N)");
            hit = scan.next().toLowerCase().charAt(0);

            if(hit == 'y')
                do
                {
                    tempScore = takeHit();
                    //System.out.println("The dice roll was: " + tempScore);
                    System.out.println("The hit gave you : " + tempScore + " Your total is now: " + (playerScore += tempScore));
                    System.out.println("Would you like a hit?(Y/N)");
                }while(scan.next().toLowerCase().charAt(0) == 'y');

            if(hit == 'n')
                        stand();

    }

    public static void checkWinner()
    {
        if (playerScore > 21)
            System.out.println("Sorry you busted, Dealer has won!");
        else
        if (dealerScore > 21)
                System.out.println("Dealer has busted, You win!");
        else 
        if (playerScore == 21)
            System.out.println("You win!");
        else
        if (dealerScore == 21)
            System.out.println("Sorry, Dealer has won!");
        else if (dealerScore > playerScore && dealerScore <= 21)
            System.out.println("Sorry, Dealer has won!");
        else if (playerScore > dealer && playerScore <= 21)
            System.out.println("You win!");

    } 
```

# c - 应用程序不使用后备列表

> ID：13212163
> 
> 赞同：0
> 
> 时间：2012-11-03T18:26:07.360
> 
> 标签：c, memory, heap-memory

使用 Dev-C++ 4.9.2。我正在通过 HeapCreate 分配一个新堆，然后执行两个 HeapAlloc（分配两个堆段），然后通过 HeapFree 释放第二个堆段......这一切都在 Windows XP SP3 上。当我释放第二个堆段时，它没有像应该的那样进入 LookAside List (LAL)，而是将第二个段与堆中未分配的内存合并。所以我最终只得到一个堆段仍然分配，根本没有第二段。当我应该以分配的一个堆段和 LAL 上的第二个段结束时。

有任何想法吗？

[我正在使用来自http://www.net-ninja.net/article/2011/Sep/03/heap-overflows-for-](http://www.net-ninja.net/article/2011/Sep/03/heap-overflows-for-humans-102/)的一些基本堆溢出代码（试图了解堆溢出如何工作以使代码更安全）[human-102/](http://www.net-ninja.net/article/2011/Sep/03/heap-overflows-for-humans-102/)我已经使用 Dev-C++ 4.9.2 编译了它。

# objective-c - UIImagePickerController 在相机翻转时冻结

> ID：13212168
> 
> 赞同：0
> 
> 时间：2012-11-03T18:27:05.383
> 
> 标签：objective-c, ios, xcode, uiimagepickercontroller, freeze

当按下从前向后翻转相机的按钮时，我的 UIImagePickerController 冻结并且相机关闭。这就是我如何从方法中初始化项目中的图像选择器控制器对象（省略其余代码），因为它与 UIimagepickercontroller 对象无关。

```
//In my .h file 
UIImagePickerController * imgPicker;

//in my .m file
-(void)viewDidLoad {

imgPicker = [[UIImagePickerController alloc] init];
imgPicker.delegate = self;
imgPicker.allowsEditing = YES;

}

-(void) takePicture {

imgPicker.sourceType = UIImagePickerControllerSourceTypeCamera;
[self presentViewController:imgPicker animated:YES completion:NULL];

}

-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{

masterImage.image = [info objectForKey:UIImagePickerControllerEditedImage];

if(masterImage.image == nil) {

    masterImage.image = [info objectForKey:UIImagePickerControllerEditedImage];

}

[self dismissModalViewControllerAnimated:YES];

}

-(void) imagePickerControllerDidCancel:(UIImagePickerController *)picker{

[self dismissModalViewControllerAnimated:YES];

}

-(void) releaseOutlets {

[imgPicker release];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T20:07:28.997

只是为了规则，更改您的代码。代替：

```
UIImagePickerController * imgPicker; 
```

在您的 .h 文件中写入：

```
@property (nonatomic, strong) UIImagePickerController * imgPicker; 
```

而不是在你的 .m 文件中合成它：

```
imgPicker = _imgPicker; 
```

接下来每次调用这个属性调用 self.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-03T20:20:20.303

*   首先，您不应该在 viewdidload 方法中分配 init。在 -init 方法中进行所有分配。
*   按照 edzio27 的建议添加属性。
*   再次测试

如果问题仍然存在： - 检查您是否“收到内存警告”。如果出现内存警告，您的 viewdidload 方法会再次被调用。如果您将您的 alloc init 保留在该方法中，您将每次都创建新实例。

我们遇到了与 MPMoviePlayerController 类似的问题。不知道你是否有同样的问题。

# java - 一个聚合根可以引用另一个聚合根的非聚合根吗？

> ID：13212170
> 
> 赞同：0
> 
> 时间：2012-11-03T18:27:09.017
> 
> 标签：java, domain-driven-design

对于这个特定场景，我有三个实体：

*   问题（聚合根）
*   问题反馈（不是聚合根）
*   QuestionFeedbackCategory（聚合根）

由于 QuestionFeedback 在 Question 中，QuestionFeedbackCategory 是否也可以保存 QuestionFeedback 对象的列表？或者 QuestionFeedbackCategory 是否只需要处理 Question 对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:30:05.927

如果 Question 和 QuestionFeedback 都有类别并且假设每个只能有一个类别，我会这样建模

```
public class Question {
    ...
    CategoryId categoryId;
    Set<QuestionFeedback> feedback;
    ...
} 

public class QuestionFeedback {
    ...
    CategoryId categoryId;
    ...
} 

public class Category {
    CategoryId id;
    String name;
    String description;
} 
```

您不必将 AR 本身“放入”另一个 AR/VO。您可以仅引用其充当 id 的值对象。

编辑：阅读这里提到的三部分文章[http://dddcommunity.org/library/vernon_2011](http://dddcommunity.org/library/vernon_2011)。来自 ORM 的思维模式，我曾经对如何建模这些类型的关系感到困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-07T08:49:32.400

聚合根只能在以下场景中与外部通信：

*   通过聚合内的事件
*   通过构造函数注入

但在上述所有选项中，不允许**引用**，只能使用数组（水合对象）。

# html - 在 perl 中显示真实的实时进度

> ID：13212172
> 
> 赞同：2
> 
> 时间：2012-11-03T18:27:28.747
> 
> 标签：html, perl, cgi

我在cgi中有这个代码。

```
#!/usr/bin/perl
print "content-type: text/html \n\n";
print "<html><head><style>div.section{  font-size: 12px;    border: 1px solid #999999;  background-color: #EFEFEF;  margin: 10px 15px;}p{   font-family: \"Arial\", \"Helvetica\", \"sans-serif\";  font-size: 14px;    color: #444444; line-height: 30px;  margin: 0 10px 0 10px;  padding: 0 0 6px 0; text-align: center;}</style></head><body><div class=\"section\"><p>";
print "<b>YAMJ successfully updated your movie collection</b>";
print "</p><b>YAMJ output:</b><br>";
print "<pre>";
my $status = system("/usr/local/YAMJ/run.sh");
print "</pre>";
print "</div></body></html>"; 
```

该代码由 MissileHugger 为 Synology 中的 YAMJ 创建。问题是每次用户在 Synology 上打开应用程序时，它只会在脚本执行其操作时为您提供空白页面。

我想知道，有没有办法输出脚本当时正在做什么的实时数据进度？类似于我们安装 windows 软件时，有状态显示正在复制的文件等。

任何人都知道我是否可以做到这一点？

对不起我糟糕的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T00:20:23.237

这是不容易做到的。原因：HTTP 是无状态的，浏览器只有在页面完全加载后才能呈现页面。

```
 SERVER     COMMUNICATION  CLIENT
+------------+              +---------+
| Rendezvous | <----------- | Client  |
+------------+  get status  | Browser |
    ^              via      |         |
    | write     javascript  |         |
    | status                |         |
+------------+    invoke    |         |
|   Process  | <----------- |         |
+------------+              +---------+ 
```

这是您可以使用的算法：

1.  客户端浏览器请求 CGI 脚本。这开始了一个长期运行的过程。它向浏览器返回一个唯一的会话 ID

2.  长时间运行的进程不断地用它的状态重写一个集合文件。

3.  客户端浏览器轮询由 ID 指定的集合文件并使用 javascript 更新网页。HTML5 有一个你可以使用的[`<progress>`仪表元素。](https://developer.mozilla.org/en-US/docs/HTML/Element/progress)

4.  会话完成后，该文件将从服务器文件系统中删除。

在最简单的情况下，您将浏览器指向一个不断重写的页面，并指示浏览器每隔几秒钟重新加载该页面。在 AJAX 时代，这在很大程度上已经过时了。通过 javascript 加载内容会更流畅，并允许通过 JSON 传输复杂的状态，例如：

```
{ "status": 0.4,
  "comments": ["loaded a file",
               "doing really hard math",
               "almost finished - just a moment please"]} 
```

而不是纯文本

```
Status: 40% 
```

让服务器将这些事件推送到浏览器会非常优雅，但是，我不知道如何做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-06T04:17:31.077

很棒的代码。非常感谢您的解决方案。在过去的 3 天里，我一直在努力解决这个问题。

这就是我为更新您的脚本以适用于我的程序所做的工作。

```
#!/usr/bin/perl 

$|++; #This is needed to disable buffering

print "Content-type: text/html\r\n";
# This header is a quick hack which denies browser to gzip/deflate your output
print "Content-Encoding: plain\r\n\r\n";

&load_buffer; #This keeps the browser window printing progress as it's running 
```

# 从这一点开始，任何打印语句都将在程序运行时工作。

# 示例测试

```
for ($i = 1; $i < 11; ++$i)

{
print "$i<br>\n";

sleep(1);

} 
```

子程序

```
sub load_buffer {

my $cmd = qq{perl -e "\$|++; print ' ' and sleep(1) for 1..1"};
open my $PROC, '-|', $cmd or die $!;
while (sysread $PROC, $buffer, 1) { print "<!-- Browser shoudln't      cache this chunk ", ' ' x 1000, "-->\n";} 

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-03T19:17:38.087

您需要启用`STDOUT`文件句柄的自动刷新来实现这一点。基本上，将以下代码放在脚本顶部（在 shebang 之后）应该会有所帮助：

```
$|++; 
```

有关 autoflush的更多详细信息，请参阅之前[关于 autoflush 问题的答案。](https://stackoverflow.com/questions/8804220/perl-operator-dollar-sign-pipe-plus-plus)

以下oneliners可以向您展示差异：

```
perl -e "$|++; print '#' and sleep(1) for 1..10"
perl -e "print '#' and sleep(1) for 1..10" 
```

PS：我想如果你在终端运行 /usr/local/YAMJ/run.sh 你可以看到 ASCII 进度条。

升级版：

这应该可以工作，但是：

1.  如果启用压缩，Apache 可能会压缩您的输出并作为单个块发送
2.  浏览器（例如 Chrome）也缓冲输出。

因此，您必须执行一些额外的工作：

```
#!/usr/bin/perl

$|++;

print "Content-type: text/html\r\n";
# This header is a quick hack which denies browser to gzip/deflate your output
print "Content-Encoding: plain\r\n\r\n";

print "<html><body><h1>Start</h1>\n";

my $cmd = qq{perl -e "\$|++; print '#' and sleep(1) for 1..100"};

# Start your command, read it's output byte by byte
# and send it to the browser with a 1000+ bytes long comment
# which should prevent browser from caching just a single character
open my $PROC, '-|', $cmd or die $!;

my $buffer;
while (sysread $PROC, $buffer, 1) {
    print $buffer;
    print "<!-- Browser shoudln't cache this chunk ", ' ' x 1000, "-->\n";
}

print "<h1>Done</h1></body></html>"; 
```

# python - 奇怪的while语句行为？

> ID：13212173
> 
> 赞同：0
> 
> 时间：2012-11-03T18:27:32.703
> 
> 标签：python, python-3.x

我无法弄清楚为什么以下陈述不起作用。

```
randomKey = random.choice(list(topic.keys()))
randomValue = random.choice(topic[randomKey])

current = "-" * len(randomValue) 
while current != randomValue: 
   (statements)
else:
   (statements) 
```

但是，如果我将第一行更改为

```
while current == randomValue: 
```

'else' 之后的语句正确执行。否则，'else' 后面的语句不会执行。知道为什么会导致奇怪的行为吗？完整代码已被排除，因为它将贯穿整个页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T18:29:32.990

它是 Python 语法的一部分。从[文档中](http://docs.python.org/2/reference/compound_stmts.html#the-while-statement)：

> 这个 [a `while`statement] 重复测试表达式，如果为真，则执行第一个套件；如果表达式为假（可能是第一次测试）`else`，则执行子句套件（如果存在）并终止循环。

所以在第一种情况下，必须是 while 条件永远不会评估为假，而在第二种情况下它最终会。请注意，显式跳出循环*不会*执行 else 子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T18:30:31.287

`else`, 当与 一起使用时，如果 while 循环因表达式为假而结束，而不是被语句中断（或执行通过 a或-ing 异常离开函数）`while`，则在 while 表达式计算为假值之后运行。您在第二个示例中的 while 条件必须失败，因此没有机会发生 a、返回函数或抛出异常，因此语句将始终运行。`break``return``raise``break``else`

[一段时间的文档](http://docs.python.org/2/reference/compound_stmts.html#the-while-statement)

# android - 在android中创建全新的包时出错

> ID：13212176
> 
> 赞同：-5
> 
> 时间：2012-11-03T18:27:43.670
> 
> 标签：android

所以我对 Android 开发还很陌生，所以我开始关注[http://developer.android.com/training/basics/firstapp/creating-project.html](http://developer.android.com/training/basics/firstapp/creating-project.html)来站稳脚跟。问题是，当我创建一个项目时，我已经有一个错误，所以我什至无法运行 hello world。我曾尝试寻找任何有类似问题的人，但似乎没有出现任何问题。对此问题的任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T18:53:30.740

你在使用 Eclipse 吗？如果是这样，请尝试右键单击您的项目，转到“Android 工具”，然后单击“修复项目属性”。听起来它可能丢失了（或者只是一开始就没有生成），这应该重新创建它。

编辑：听起来你的 project.properties 文件不是问题。您可以尝试的另一件事是删除您的调试密钥库，它可能生成不正确。有关说明，请参阅[此答案](https://stackoverflow.com/questions/2194808/debug-certificate-expired-error-in-eclipse-android-plugins)。

# grails - 关于 grails 在我的办公室告诉我关于 CRUD 必须在服务中的代码为什么？

> ID：13212177
> 
> 赞同：-2
> 
> 时间：2012-11-03T18:27:52.080
> 
> 标签：grails, service, crud

今天我在 grails 中介绍了 CRUD 当我显示源代码时朋友告诉我它不正确，因为它不是服务中的代码，几乎是使用 gen 控制器编码（这个活动记录正确吗？？）

为什么我在服务中编码 CRUD ？我不明白请建议我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:01:14.533

在控制器中进行只读操作是可以的。写操作应该在服务中完成的原因是服务默认是事务性的。如果您在控制器中一次写入超过 1 个表，并且其中一个失败，则您的数据将损坏/不完整。

如果您在事务服务中执行相同操作，所有更改都会回滚，这正是您想要的。虽然可能存在“中心性不是一个明确的答案”，但这是甚至超出 Grails 的常见模式/实践。

# c# - 更改 ComboBox 突出显示的颜色

> ID：13212179
> 
> 赞同：13
> 
> 时间：2012-11-03T18:27:57.783
> 
> 标签：c#, winforms, combobox, highlighting

我正在尝试解决在C#应用程序的`ComboBox`下拉列表中更改突出显示的颜色。`Windows Forms`我已经在整个网络上搜索了答案，到目前为止我发现的最佳选择是在绘制所选项目时绘制所需颜色的矩形。

```
Class Search
{
    Public Search()
    {
    }

    private void addFilter()
    {
        ComboBox field = new ComboBox();

        field.Items.AddRange(new string[] { "Item1", "item2" });
        field.Text = "Item1";
        field.DropDownStyle = ComboBoxStyle.DropDownList;
        field.FlatStyle = FlatStyle.Flat;
        field.BackColor = Color.FromArgb(235, 235, 235);
        field.DrawMode = DrawMode.OwnerDrawFixed;
        field.DrawItem += field_DrawItem;
    }

    private void field_DrawItem(object sender, DrawItemEventArgs e)
    {
        if (e.Index >= 0)
        {
            ComboBox combo = sender as ComboBox;

            if (e.Index == combo.SelectedIndex)
                e.Graphics.FillRectangle(new SolidBrush(Color.Gray),
                                         e.Bounds
                                        );
            else
                e.Graphics.FillRectangle(new SolidBrush(combo.BackColor),
                                         e.Bounds
                                        );

            e.Graphics.DrawString(combo.Items[e.Index].ToString(), e.Font,
                                  new SolidBrush(combo.ForeColor),
                                  new Point(e.Bounds.X, e.Bounds.Y)
                                 );
        }
    }
} 
```

这段代码的问题是，一旦选择了下拉列表中的另一个项目，我绘制的另一个矩形仍然是我想要突出显示的颜色。然后我尝试保存最后绘制的项目并重新绘制它：

```
Class Search
{
    private DrawItemEventArgs lastDrawn;

    Public Search()
    {
        lastDrawn = null;
    }

    private void addFilter()
    {
        ComboBox field = new ComboBox();

        field.Items.AddRange(new string[] { "Item1", "item2" });
        field.Text = "Item1";
        field.DropDownStyle = ComboBoxStyle.DropDownList;
        field.FlatStyle = FlatStyle.Flat;
        field.BackColor = Color.FromArgb(235, 235, 235);
        field.DrawMode = DrawMode.OwnerDrawFixed;
        field.DrawItem += field_DrawItem;
    }

    private void field_DrawItem(object sender, DrawItemEventArgs e)
    {
        if (e.Index >= 0)
        {
            ComboBox combo = sender as ComboBox;
            if (e.Index == combo.SelectedIndex)
            {
                e.Graphics.FillRectangle(new SolidBrush(Color.Gray), e.Bounds);
                if(lastDrawn != null)
                    lastDrawn.Graphics.FillRectangle(new SolidBrush(combo.BackColor),
                                                 lastDrawn.Bounds
                                                );
                lastDrawn = e;
            }
            else
                e.Graphics.FillRectangle(new SolidBrush(combo.BackColor),
                                         e.Bounds
                                        );

            e.Graphics.DrawString(combo.Items[e.Index].ToString(), e.Font,
                                  new SolidBrush(combo.ForeColor),
                                  new Point(e.Bounds.X, e.Bounds.Y)
                                 );
        }
    }
} 
```

由于 lastDrawn.Bounds （不兼容的类型），此行返回错误

```
lastDrawn.Graphics.FillRectangle(new SolidBrush(combo.BackColor),
                                                 lastDrawn.Bounds
                                                ); 
```

我觉得改变下拉菜单的突出显示颜色是不可能的。提前致谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-03T19:16:21.387

如果您`ComboBox`在项目中的多个地方使用了 ，那么一遍又一遍地为`DrawItem`事件重复相同的代码是没有意义的。只需将此类添加到您的项目中，您将拥有一个新的 ComboBox 控件，该控件具有以下`HightlightColor`属性，可以更轻松地在整个项目中使用该控件：

```
class AdvancedComboBox : ComboBox
{
    new public System.Windows.Forms.DrawMode DrawMode { get; set; }
    public Color HighlightColor { get; set; }

    public AdvancedComboBox()
    {
        base.DrawMode = System.Windows.Forms.DrawMode.OwnerDrawFixed;
        this.HighlightColor = Color.Gray;
        this.DrawItem += new DrawItemEventHandler(AdvancedComboBox_DrawItem);
    }

    void AdvancedComboBox_DrawItem(object sender, DrawItemEventArgs e)
    {
        if (e.Index < 0)
            return;

        ComboBox combo = sender as ComboBox;
        if ((e.State & DrawItemState.Selected) == DrawItemState.Selected)
            e.Graphics.FillRectangle(new SolidBrush(HighlightColor),
                                     e.Bounds);
        else
            e.Graphics.FillRectangle(new SolidBrush(combo.BackColor),
                                     e.Bounds);

        e.Graphics.DrawString(combo.Items[e.Index].ToString(), e.Font,
                              new SolidBrush(combo.ForeColor),
                              new Point(e.Bounds.X, e.Bounds.Y));

        e.DrawFocusRectangle();
    }
} 
```

# java - 如何找到给定字符串的最长重复子字符串

> ID：13212180
> 
> 赞同：0
> 
> 时间：2012-11-03T18:27:58.127
> 
> 标签：java, string

我是新的java，我被分配找到字符串中最长的子字符串。我在网上研究，似乎解决这个问题的好方法是实现后缀树。请让我知道我该怎么做，或者您是否有任何其他解决方案。请记住，这应该是在 Java 知识水平较低的情况下完成的。

提前致谢。

PS 测试字符串令人放心。

```
 /**
This method will find the longest substring of a given string.
String given here is reassuring. 

 */
public String longestRepeatedSubstring()
{
    String longestRepeatedSubstring = "";
    for (int i = 0; i<text.length(); i++ )
    {
        String one = text.substring(0,i); 

        for(int o = 0; o<text.length();o++)
        {
            Sting two = text.substring(0,o);
            if(one.equals(two))
            {
                longestRepeatedSubstring = one;
            }

        }

    }
    return longestRepeatedSubstring; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T19:30:36.870

如果你调试你的代码，你会发现你的代码没有按照你的想法做。AFAIK 你至少需要三个循环，你不能假设你只会从第一个字符开始。这是一种可能的解决方案。

```
public static void main(String[] args) throws IOException {
    String longest = longestDuplicate("ababcaabcabcaab");
    System.out.println(longest);
}

public static String longestDuplicate(String text) {
    String longest = "";
    for (int i = 0; i < text.length() - 2 * longest.length() * 2; i++) {
        OUTER:
        for (int j = longest.length() + 1; j * 2 < text.length() - i; j++) {
            String find = text.substring(i, i + j);
            for (int k = i + j; k <= text.length() - j; k++) {
                if (text.substring(k, k + j).equals(find)) {
                    longest = find;
                    continue OUTER;
                }
            }
            break;
        }
    }
    return longest;
} 
```

印刷

```
abcaab 
```

为了“让人放心”，它打印出来的`r`不是`s`我的第一个猜测。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-02T12:41:40.577

```
public static void main(String[] args) {
        String str = "testingString";
        char[] strArr = str.toCharArray();
        StringBuilder bm = new StringBuilder();
        boolean isPresent = false;
        int len = strArr.length;
        int initial =0;
        int dinitial=0;

        HashMap<String, String> hm = new HashMap<String,String>();
        HashMap<String, String> hl = new HashMap<String,String>();
        while(initial<=len-1 && !(dinitial>=len-1)){
            if(!hm.isEmpty()){
                isPresent = hm.containsValue(strArr[initial]+"");
                if(!isPresent){
                    bm.append(strArr[initial]);
                    hm.put(strArr[initial]+"",strArr[initial]+"");
                    if(initial==len-1){
                        System.out.println("Longest substring is::" + bm);
                        break;
                    }
                }
                else if(isPresent){
                    System.out.println("Longest substring is::" + bm);
                    bm.delete(0, bm.length());
                    ++dinitial;
                    initial--;
                    hm.clear();
                }
                initial++;
            }
            else
            {
                    bm.append(strArr[initial]);
                    hm.put(strArr[initial]+"",strArr[initial]+"");
                    initial++;
            }
        }
        hm.clear();
    } 
```

# opencart - Opencart 分类太慢

> ID：13212181
> 
> 赞同：0
> 
> 时间：2012-11-03T18:28:05.943
> 
> 标签：opencart

在打开的购物车管理面板中，添加大约 1k 产品后，我无法进入类别部分。我花了很多时间来加载类别，一旦加载，当我尝试保存或删除类别时，它需要太长时间并显示 500 错误。有什么我可以做的来提高速度。管理面板中的其他部分加载正常。问题仅适用于类别部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T01:45:20.410

我想[这](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=5077)就是你要找的

# c - 查找数字不重复的2个整数之间的数字计数的算法

> ID：13212185
> 
> 赞同：-1
> 
> 时间：2012-11-03T18:28:24.757
> 
> 标签：c, algorithm, sorting

我正在寻找一种算法来查找两个整数之间的数字列表，以使每个数字中的数字不重复？

例如，给定输入 2 和 12，答案将是除 11 之外的所有数字。天真的解决方案是遍历数字并检查是否有任何数字重复。但是，对于大数字，这种方法将花费大量时间。

* * *

我需要在给定的两个大数字之间找到此类数字的计数；我认为的另一种方法是采用大小为 10 的数组（a[10]），其中每个索引将存储某个数字的每个数字的频率。b/w 限制，如果我们得到一个 freq 超过 1 的索引，那么 no 将被丢弃。我将对限制之间的所有编号重复此操作，每次将数组“a”索引初始化为 0。但是这种方法对于大输入也将花费大量计算时间（例如当限制为 1 到 10^9 时） . 我需要一个更好的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T18:51:32.767

我不会给你确切的解决方案，但会尝试给你一些关于如何处理类似问题的提示。

首先 - 每当您遇到类型问题时，请找到之间的数字计数，`a`并且`b`（几乎）总是更容易实现一个解决方案，该解决方案将为您提供`(0, x]`给定 x 区间的答案。例如，如果您想计算区间中的数字`[a,b]`并实现一个函数，该函数返回`(0,x]`所有非负 x 的区间答案（假设该函数是`f`），那么您可以计算`[a,b]`as的答案`f(b) - f(a - 1)`。相信我，这可以节省大量极端案例检查，并且通常实施起来更快。

话虽如此，请尝试思考如何计算区间中没有重复数字的数字`(0,a]`。我建议您分别计算具有固定位数的数字的答案。对于数字较少的数字，这非常简单 - 只需计算一个变化。对于位数等于我们的数字 a 的数字，这有点棘手。[我相信使用动态编程](http://en.wikipedia.org/wiki/Dynamic_programming)来计算它们是最容易的。

希望这会有所帮助，并希望它不会太详细，以便您仍然需要自己解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T19:04:21.853

您正在寻找一种算法来计算数字的排列。给定 m 位数的整数 A 和 n 位数的整数 B (m >= n)，您需要：

```
1\. for i = m; i < n; i++
    if i < 10, choose i digits out of 10
    Permutate through digits of length i (if i=m, discard permutations that are less than A)

2\. Permutate digits of length n, as long as result isn't larger than B. 
```

选择和排列是组合运算，您可以轻松找到它们的数学公式（也可以使用递归版本），例如这里是描述排列的链接：[http ://en.wikipedia.org/wiki/Permutation](http://en.wikipedia.org/wiki/Permutation)

复杂度将是 O((n+1)!)

# java - 使用 BouncyCastle PKCS7 加密和解密 - java 中的 CMS

> ID：13212186
> 
> 赞同：8
> 
> 时间：2012-11-03T18:28:38.210
> 
> 标签：java, cryptography, bouncycastle, pkcs#7

我想使用 BouncyCastle 以 pkcs7 格式加密和解密。我有一个硬件令牌。当我在硬盘驱动器的 jks 文件中使用密钥对时，它工作正常，但是当我在令牌中使用密钥对时，它不起作用。这是我的例外：

```
Exception in thread "main" org.bouncycastle.cms.CMSException: cannot create cipher: No such algorithm: 2.16.840.1.101.3.4.1.2
    at org.bouncycastle.cms.jcajce.EnvelopedDataHelper.createCipher(Unknown Source)
    at org.bouncycastle.cms.jcajce.EnvelopedDataHelper$1.doInJCE(Unknown Source)
    at org.bouncycastle.cms.jcajce.EnvelopedDataHelper.execute(Unknown Source)
    at org.bouncycastle.cms.jcajce.EnvelopedDataHelper.createContentCipher(Unknown Source)
    at org.bouncycastle.cms.jcajce.JceKeyTransEnvelopedRecipient.getRecipientOperator(Unknown Source)
    at org.bouncycastle.cms.KeyTransRecipientInformation.getRecipientOperator(Unknown Source)
    at org.bouncycastle.cms.RecipientInformation.getContentStream(Unknown Source)
    at org.bouncycastle.cms.RecipientInformation.getContent(Unknown Source)
    at pktb.PKTB.CmsDecrypt(PKTB.java:288)
    at pktb.PKTB.main(PKTB.java:419)
Caused by: java.security.NoSuchAlgorithmException: No such algorithm: 2.16.840.1.101.3.4.1.2
    at javax.crypto.Cipher.getInstance(DashoA13*..)
    at javax.crypto.Cipher.getInstance(DashoA13*..)
    at org.bouncycastle.jcajce.NamedJcaJceHelper.createCipher(Unknown Source)
    ... 10 more
Java Result: 1 
```

这是我的加密代码：

```
public byte[] CmsEncrypt(byte[] message, KeyContainer keyContainer) throws NoSuchAlgorithmException, NoSuchProviderException, CMSException, IOException
{
    Security.addProvider(new BouncyCastleProvider());
    X509Certificate cert = (X509Certificate) keyContainer.certificate;
    CMSEnvelopedDataGenerator gen = new CMSEnvelopedDataGenerator();
    gen.addKeyTransRecipient(cert);
    CMSProcessable data = new CMSProcessableByteArray(message);
    CMSEnvelopedData enveloped = gen.generate(data,
    CMSEnvelopedDataGenerator.AES128_CBC, "BC");

    return  enveloped.getEncoded();

} 
```

这是我的解密代码：

```
public byte[] CmsDecrypt(byte[] cipher, KeyContainer keyContainer) throws CMSException, IOException, NoSuchProviderException
    {
        Security.addProvider(new BouncyCastleProvider());
        byte[] contents=null;
        CMSEnvelopedDataParser envelopedDataParser = new CMSEnvelopedDataParser(new ByteArrayInputStream(cipher));
        PrivateKey key =  keyContainer.privateKey;
        X509Certificate cert = keyContainer.certificate;
        CMSEnvelopedData enveloped = new CMSEnvelopedData(cipher);
        Collection recip = enveloped.getRecipientInfos().getRecipients(); 
        KeyTransRecipientInformation rinfo = (KeyTransRecipientInformation) recip  
                    .iterator().next(); 
        if(keyContainer.provider.equals("Software"))
            contents = rinfo.getContent(
                new JceKeyTransEnvelopedRecipient(key).setProvider("BC"));
        else
            contents = rinfo.getContent(
                new JceKeyTransEnvelopedRecipient(key).setProvider("SunPKCS11-" + keyContainer.provider));
        System.out.println(new String(contents));
        return contents;

    } 
```

我必须说我将此令牌提供程序用于 cmsSign 和 cmsVerify 并且它工作正常，因此我认为问题不在于提供程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-20T07:51:39.280

您可以使用 PKCS#11 从硬件令牌中提取私钥和公钥，然后使用这些提取的公钥和私钥通过 BouncyCastle PKCS7 加密和解密数据。您使用的是哪个令牌？我也找不到从硬件令牌中提取密钥的代码。通过以下链接中的答案从硬件令牌中提取密钥。点击[这里](https://stackoverflow.com/questions/27312003/how-to-access-certificates-and-private-key-from-etoken-using-java/28087029#28087029)

# nmap - 是否可以使用 nmap 获取机器的 MAC 地址

> ID：13212187
> 
> 赞同：39
> 
> 时间：2012-11-03T18:28:48.700
> 
> 标签：nmap

我有一个文本文件中的远程机器列表。我可以使用 nmap 知道他们的 MAC 地址吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-01-04T21:44:07.593

如果您使用的是 nmap，则 MAC 地址***仅***在您与目标位于同一网段时可用。如果您以 root 身份运行，较新版本的 nmap 只会向您显示 MAC 地址。

IE：

> 须藤 nmap -sP -n 192.168.0.0/24

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-08-22T09:30:21.550

使用**snmp-interfaces.nse** nmap 脚本（用 lua 编写）获取远程机器的 MAC 地址，如下所示：

`nmap -sU -p 161 -T4 -d -v -n -Pn --script snmp-interfaces 80.234.33.182`

```
13:25 完成 NSE，经过 2.69 秒
80.234.33.182 的 Nmap 扫描报告
主机已启动，收到用户设置（0.078 秒延迟）。
扫描于 2014-08-22 13:25:29 Арабское время (зима) 3s
港口国服务原因
161/udp 打开 snmp udp 响应
| snmp接口：
| 伦理
|     MAC地址：00:50:60:03:81:c9（腾保电信AS）
| 类型：ethernetCsmacd 速度：10 Mbps
| 状态：上
| 流量统计：发送 1.27 Gb，接收 53.91 Mb
| 罗
| 类型：软件环回速度：0 Kbps
| 状态：上
|_ 流量统计：发送 4.10 Kb，接收 4.10 Kb

```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-11-29T14:53:30.673

在当前版本的 nmap 中，您可以使用：

```
sudo nmap -sn 192.168.0.* 
```

这将打印所有可用主机的 MAC 地址。当然提供您自己的网络、子网和主机 ID。

进一步的解释可以在[这里](https://askubuntu.com/a/406799)找到。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-01-09T18:45:01.257

一些脚本可以为您提供所需的内容。如果节点运行 Samba 或 Windows，nbstat.nse 将显示 MAC 地址和供应商。

```
sudo nmap -sU -script=nbstat.nse -p137 --open 172.192.10.0/23 -oX 172.192.10.0.xml | grep MAC * | awk -F";" {'print $4'} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-01-12T16:33:37.717

```
if $ ping -c 1 192.168.x.x 
```

返回

```
1 packets transmitted, 1 received, 0% packet loss, time ###ms 
```

那么您可能会使用 arping 返回 MAC 地址，但 ARP 仅适用于您的本地网络，而不适用于互联网。

```
$ arping -c 1 192.168.x.x

ARPING 192.168.x.x from 192.168.x.x wlan0
Unicast reply from 192.168.x.x [AA:BB:CC:##:##:##]  192.772ms
Sent 1 probes (1 broadcast(s))
Received 1 response(s) 
```

最后，例如，您可以使用去掉冒号的 AA:BB:CC 来从设备的供应商 ID 中识别设备。

```
$ grep -i '709E29' /usr/local/share/nmap/nmap-mac-prefixes 
709E29 Sony Interactive Entertainment 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-08-29T11:36:57.570

只有在以下情况下，nmap 才能发现远程目标的 MAC 地址

*   目标与运行 nmap 的机器位于同一链接上，或者
*   目标通过 SNMP、NetBIOS 等泄露这些信息。

如果目标使用 EUI-64 标识符，则 IPv6 出现另一种可能性，则可以从 IP 地址中推断出 MAC 地址。

除了上述可能性之外，*没有*可靠的方法可以通过网络扫描技术获取远程目标的 MAC 地址。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-08-14T15:29:54.003

不使用 nmap ......但这是另一种选择......

```
arp -n|grep -i B0:D3:93|awk '{print $1}' 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-01-09T19:17:58.017

我不够酷，无法对帖子发表评论。所以我想我需要发一个新帖子。然而，“sudo nmap -sn 192.168.0.0/24”的上述建议是获取本地网络/vlan/子网上IP的所有MAC的最佳最快方法OP没有提到的，是获得的唯一方法以这种方式获取 MAC 地址，您必须使用 sudo（或其他超级用户权限，即 Windows 管理员）命令 nmap -sn 192.168.0.0/24 将发现您网络上的主机，但不会返回 MAC，因为您未处于 SU 模式的操作。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-06-24T08:48:49.127

是的，请记住使用 root 帐户。

```
=======================================

qq@peliosis:~$ sudo nmap -sP -n xxx.xxx.xxx

Starting Nmap 6.00 ( http://nmap.org ) at 2016-06-24 16:45 CST

Nmap scan report for xxx.xxx.xxx

Host is up (0.0014s latency).

MAC Address: 00:13:D4:0F:F0:C1 (Asustek Computer)

Nmap done: 1 IP address (1 host up) scanned in 0.04 seconds 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-08-28T23:47:35.970

只是标准扫描将返回 MAC。

```
nmap -sS target 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-07-23T11:56:03.377

在最新版本的 nmap 6.40 中，它会自动显示 MAC 地址。例子：

```
nmap 192.168.0.1-255 
```

此命令将从 192.168.0.1 到 255 扫描您的网络，并在您的网络上显示主机及其 MAC 地址。

如果您想显示单个客户端的 mac 地址，请使用此命令确保您是 root 用户或使用“sudo”

```
sudo nmap -Pn 192.168.0.1 
```

此命令将显示主机 MAC 地址和打开的端口。

希望这会有所帮助。

# haskell - 无法将预期类型“IO b0”与实际类型“[a0]”匹配

> ID：13212188
> 
> 赞同：1
> 
> 时间：2012-11-03T18:28:49.557
> 
> 标签：haskell, greatest-common-divisor

我是haskell的新手。我正在尝试编写一个 gcd 可执行文件。

```
ghc --make gcd 
```

当我编译此代码时，我收到以下错误。

```
Couldn't match expected type `IO b0' with actual type `[a0]' 
In a stmt of a 'do' block:
  putStrLn "GCD is: " ++ gcd' num1 num2 ++ "TADA...."
In the expression:
  do { putStrLn "Hello,World. This is coming from Haskell";
       putStrLn "This is the GCD";
       putStrLn "Frist Number";
       input <- getLine;
       .... }
In an equation for `main':
    main
      = do { putStrLn "Hello,World. This is coming from Haskell";
             putStrLn "This is the GCD";
             putStrLn "Frist Number";
             .... } 
```

我不明白我的问题出在哪里......这是我的代码。

```
gcd' :: (Integral a) => a -> a -> a
gcd' x y = gcd' (abs x) (abs y)
      where gcd' a 0  =  a
        gcd' a b  =  gcd' b (a `rem` b)

main = do
    putStrLn "Hello,World. This is coming from Haskell"
    putStrLn "This is the GCD"
    putStrLn "Frist Number"
    input <- getLine
    let num1 = (read input)
    putStrLn "Second Number"
    input2 <- getLine
    let num2 = read input2
    putStrLn "GCD is: " ++ gcd' num1 num2 ++ "TADA...." 
```

我所知道的是，这`read`可以帮助我将字符串转换为 int。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-03T18:31:18.967

首先，你需要括号，

```
putStrLn ("GCD is: " ++ gcd' num1 num2 ++ "TADA....") 
```

或中缀函数应用`($)`：

```
putStrLn $ "GCD is: " ++ gcd' num1 num2 ++ "TADA...." 
```

没有它，该行被解析为

```
(putStrLn "GCD is: ") ++ gcd' num1 num2 ++ "TADA...." 
```

并且 IO-action`putStrLn "GCD is: "`与 a的串联`String`是导致 - 在一个人有足够的经验之前有点神秘 - 类型错误的原因。

从该行出现的上下文中 - 在`IO`-do-block 中 - 它必须具有`IO b`some的类型`b`。但是从应用中推断出的类型`(++)`是`[a]`针对某种类型的`a`。这些类型无法匹配，这就是编译器报告的内容。

请注意，修复后，您还需要将结果转换`gcd'`为 a `String`，

```
putStrLn $ "GCD is: " ++ show (gcd' num1 num2) ++ "TADA...." 
```

否则你会看到另一个类型错误。

* * *

从评论

> 为了让我的程序看起来更好。有没有办法让输入区域就在语句旁边而不是一行？

一般来说，是的。而不是使用`putStrLn`which 将换行符附加到输出字符串，使用`putStr`which 不。

```
putStr "Second Number: "
input2 <- getLine 
```

在交互模式（ghci）下，效果很好。`stdout`没有在那里缓冲。对于已编译的程序，`stdout`通常是行缓冲的，这意味着它不会输出任何内容，直到输出换行符或缓冲区已满。

所以对于一个编译好的程序，你需要显式地刷新输出缓冲区，

```
import System.IO -- for hFlush

putStr "Second Number: "
hFlush stdout
input2 <- getLine 
```

或完全关闭缓冲

```
import System.IO

main = do
    hSetBuffering stdout NoBuffering
    ... 
```

但至少后一种方法过去在 Windows 上不起作用（我不确定这是否已修复，我也不确定`hFlush`ing 在 Windows 上是否有效）。

# iphone - 通过多表栏关闭应用程序后重置应用程序

> ID：13212191
> 
> 赞同：1
> 
> 时间：2012-11-03T18:29:09.267
> 
> 标签：iphone, ios, multitasking

我的应用程序有问题。每次我通过多任务栏将其关闭时，我都想“重置”我的应用程序。我发现 UIApplicationExitsOnSuspend（或在最新的 Xcode 中：'应用程序不在后台运行'）必须添加到 info.plist。但是每次我进入后台模式时，这种方法都会重置我的应用程序。是否有任何方法（如上所述）可以使应用程序重置，但前提是我通过多任务栏“杀死”它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T19:34:09.080

我可能会误解你，但如果你通过在多任务栏中关闭一个应用程序来杀死它，它就会被杀死，完成，消失。因此，如果您之后再次启动它，它应该被重置。

# codeigniter - Codeigniter Flashdata 未显示

> ID：13212192
> 
> 赞同：0
> 
> 时间：2012-11-03T18:29:11.987
> 
> 标签：codeigniter, session, controller

我有 2 页，其中包含`delete`一些记录，请查看要删除的第一个控制器

```
function delete($idnya)
{
            $this->m_kategorimaterial->delete($idnya);
            $this->session->set_flashdata('sukses','Hapus kategori material berhasil');
            redirect('c_kategorimaterial');
} 
```

然后加载到视图中

```
<div id="vkategorimaterial">
            <p><h2>Menu Kategori Material</h2></p>
        <center><notif><?php echo $this ->session->flashdata('sukses'); ?></notif></center> 
```

它就像我需要的那样工作。但后来它不能在另一个控制器上工作

```
function delete($idnya)
{
    $this->m_material->delete($idnya);
    $this->session->set_flashdata('sukses','Hapus material berhasil');
    redirect('c_material');
} 
```

这里是意见`material`

```
<div id="vmaterial">
            <p><h2>Menu Material</h2></p>
    <center><notif><?php echo $this->session->flashdata('sukses'); ?></notif></center> 
```

为什么 flashdata 没有显示在`material`页面上？但它适用于`kategorimaterial`页面？仅供参考，首先，我制作

```
 $this->session->set_flashdata('sukses','Hapus kategori material berhasil'); 
```

在`kategorimaterial`页面上，一旦它工作，我复制

```
 $this->session->set_flashdata('sukses','Hapus kategori material berhasil'); 
```

进入`material`控制器然后更改值。它不工作。我该如何解决这个问题？

`<notif>`由于 css 样式而需要的标签*在每条 flashdata 消息上都显示为绿色*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T04:08:13.793

尝试更改“sukses”键名。当您使用 TOS 时，flashdata() 方法就像一个堆栈，然后它将从堆栈中丢弃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T01:11:15.040

我可能会建议您尝试通过在视图中添加来跟踪会话变量

```
var_dump($this->session); 
```

您似乎没有错，但您可以尝试在材料页面的控制器中添加它

```
function index()
{
    $sukses=$this->session->flashdata('sukses');
    if(isset($sukses)
       $data['sukses']=$sukses;
//load your view 
} 
```

当然在你看来

```
<div id="vmaterial">
            <p><h2>Menu Material</h2></p>
    <center><notif><?php echo $sukses; ?></notif></center> 
```

这肯定是个奇怪的问题，但您可以尝试一下并等待您的反馈

# android - 如何更改 TextView 布局其内容的方式？

> ID：13212193
> 
> 赞同：1
> 
> 时间：2012-11-03T18:29:15.410
> 
> 标签：android, textview

我想强制 a`TextView`使用我自己的逻辑来布置其内容，即将文本分成几行（文本可能包含跨度）。我可以这样做吗？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T19:04:11.720

如果只想添加换行符，可以使用“\n”。我不认为你可以让它使用不同的格式，但是如果你需要使用现有的格式，你可以在更新 TextView 之前创建一个函数来转换格式。

# jquery - 覆盖jquery mobile中的函数

> ID：13212194
> 
> 赞同：0
> 
> 时间：2012-11-03T18:29:18.480
> 
> 标签：jquery, jquery-mobile, overriding

我想覆盖 jQuery 移动库中的一个函数。这是我要覆盖的功能：

```
$navbar.delegate( "a", "vclick", function( event ) {
        if ( !$(event.target).hasClass( "ui-disabled" ) ) {
            $navbtns.removeClass( $.mobile.activeBtnClass );
            $( this ).addClass( $.mobile.activeBtnClass );
        }
    }); 
```

我可以更改源代码，但我更愿意在我的代码中添加一个函数覆盖，这样当我们升级 jQuery mobile 时，我们就不会忘记并丢失更改。

$navbar.delegate 包含在：

```
(function( $, undefined ) {

$.widget( "mobile.navbar", $.mobile.widget, {... 
```

而且我不确定要更改函数要使用哪个变量。

我尝试只是覆盖 $navbar.delegate 但这没有用。我认为 $navbar 是 $.widget 函数的 _create 函数中定义的变量。

可能过于隐藏在 $.widget 函数中而无法在不更改源的情况下进行覆盖。任何 jQuery 大师有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T11:51:34.373

您提到的特定事件处理程序包含在`_create`负责设置初始`navbar`小部件显示的 jQuery Mobile 方法中。

**方法一：**

您可以使用`mobileinit`事件绑定来覆盖 jQuery Mobile 的默认设置。由于 mobileinit 事件会立即触发，因此您需要在加载 jQuery Mobile 之前绑定您的事件处理程序。在事件处理程序中，您可以覆盖该`$.mobile.navbar.prototype._create`方法。该`navbar _create`方法的原始实现是与您提到的代码片段分开复制的。该代码已被注释掉。

示例：

```
<!DOCTYPE html> 
<html> 
    <head> 
        <title>jQuery Mobile Override Function Example</title> 
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
        <script>

            $(document).bind("mobileinit", function(){

              $.mobile.navbar.prototype._create = function() {

                    var $navbar = this.element,
                        $navbtns = $navbar.find( "a" ),
                        iconpos = $navbtns.filter( ":jqmData(icon)" ).length ?
                                                this.options.iconpos : undefined;

                    $navbar.addClass( "ui-navbar ui-mini" )
                        .attr( "role","navigation" )
                        .find( "ul" )
                        .jqmEnhanceable()
                        .grid({ grid: this.options.grid });

                    $navbtns.buttonMarkup({
                        corners:    false,
                        shadow:     false,
                        inline:     true,
                        iconpos:    iconpos
                    });

                    /*
                    $navbar.delegate( "a", "vclick", function( event ) {
                        if( !$(event.target).hasClass("ui-disabled") ) {
                            $navbtns.removeClass( $.mobile.activeBtnClass );
                            $( this ).addClass( $.mobile.activeBtnClass );
                        }
                    });
                    */

                    // Buttons in the navbar with ui-state-persist class should regain their active state before page show
                    $navbar.closest( ".ui-page" ).bind( "pagebeforeshow", function() {
                        $navbtns.filter( ".ui-state-persist" ).addClass( $.mobile.activeBtnClass );
                    });
                };

            });

        </script>
        <script type="text/javascript" src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
    </head>
    <body>
        <!-- /page -->
        <div data-role="page">
            <!-- /header -->
            <div data-role="header" data-theme="b">
                <h1>jQuery Mobile Override Example</h1>
            </div>
            <!-- /content -->
            <div data-role="content">
                <div data-role="navbar">
                    <ul>
                        <li><a href="#">One</a></li>
                        <li><a href="#">Two</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </body>
</html> 
```

**方法二：**

您可以使用以下代码来覆盖整个`_create`方法。使用这种方式，您可以自定义原始实现：

```
(function($){
    // reference to the original method
    var _old = $.mobile.navbar.prototype._create;

    $.mobile.navbar.prototype._create = function() {

        // put your custom code here
        // .....

        // in case you want to apply the default behaviour
        // return _old.apply(this);
    };
})(jQuery); 
```

您可以在下面找到一个工作示例。该`navbar _create`方法的原始实现是与您提到的代码片段分开复制的。该代码已被注释掉。

```
<!DOCTYPE html> 
<html> 
    <head> 
        <title>jQuery Mobile Override Function Example</title> 
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
        <script>
            (function($){

                // store original reference to the method
                var _old = $.mobile.navbar.prototype._create;

                $.mobile.navbar.prototype._create = function() {

                    var $navbar = this.element,
                        $navbtns = $navbar.find( "a" ),
                        iconpos = $navbtns.filter( ":jqmData(icon)" ).length ?
                                                this.options.iconpos : undefined;

                    $navbar.addClass( "ui-navbar ui-mini" )
                        .attr( "role","navigation" )
                        .find( "ul" )
                        .jqmEnhanceable()
                        .grid({ grid: this.options.grid });

                    $navbtns.buttonMarkup({
                        corners:    false,
                        shadow:     false,
                        inline:     true,
                        iconpos:    iconpos
                    });

                    /*
                    $navbar.delegate( "a", "vclick", function( event ) {
                        if( !$(event.target).hasClass("ui-disabled") ) {
                            $navbtns.removeClass( $.mobile.activeBtnClass );
                            $( this ).addClass( $.mobile.activeBtnClass );
                        }
                    });
                    */

                    // Buttons in the navbar with ui-state-persist class should regain their active state before page show
                    $navbar.closest( ".ui-page" ).bind( "pagebeforeshow", function() {
                        $navbtns.filter( ".ui-state-persist" ).addClass( $.mobile.activeBtnClass );
                    });
                };
            })(jQuery);

        </script>
    </head>
    <body>
        <!-- /page -->
        <div data-role="page">
            <!-- /header -->
            <div data-role="header" data-theme="b">
                <h1>jQuery Mobile Override Example</h1>
            </div>
            <!-- /content -->
            <div data-role="content">
                <div data-role="navbar">
                    <ul>
                        <li><a href="#">One</a></li>
                        <li><a href="#">Two</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </body>
</html> 
```

# javascript - Javascript Loop 函数在良好的启动后开始运行缓慢

> ID：13212196
> 
> 赞同：1
> 
> 时间：2012-11-03T18:29:33.473
> 
> 标签：javascript, jquery

我有一个 Js 脚本，可以非常快地在文档上绘制 800 个完美贴合的图块。我的目标是非常快速地一一绘制以创建一些加载效果。我喜欢它的启动速度，但是在 100 之后它开始变慢并且变得无聊......有没有一些解决方案或者它对 js 有很多工作？

[这是代码和现场演示](http://jsfiddle.net/rT5rL/)

```
var Gen_height=$(document).height()-21;
var Gen_width=$(document).width()-41;
var wid=Gen_width/40;
var hei=Gen_height/20;
var rot=40*20;

contrail();

var counter=0;

function contrail() {
    if (counter < rot) {
        $('body').append('<div id="box" style="width:' + wid + 'px; height:' + hei + 'px;"><div style="padding-top:15px;"><center>' + counter + '</center></div></div>');
        counter++
    }
    setTimeout(contrail, 0);
};
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T19:13:24.163

如评论中所述，由于用户计算机的性能，这不是最佳方法。您应该使用 JQueryUI 创建您的 div 并使用动画显示它们，例如：http: [//jsfiddle.net/rT5rL/13/](http://jsfiddle.net/rT5rL/13/)

```
var $container = $('#container');
$container.hide();
while(counter <= rot) 
{
   $container.append('<div id="box" style="width:' + wid + 'px; height:' + hei + 'px;"><div style="padding-top:15px;"><center>' + counter + '</center></div></div>');
   counter++;
}

 $container.slideDown(1000); 
```

更多效果在这里：http: [//jqueryui.com/effect/#easing](http://jqueryui.com/effect/#easing)

```
$container.animate( { height: "show" }, 2000, 'easeInOutBounce'); 
```

# c++ - 我不明白这个 C++ 语法

> ID：13212199
> 
> 赞同：0
> 
> 时间：2012-11-03T18:29:51.267
> 
> 标签：c++, arduino

我正在为 Arduino 使用[PTP](http://en.wikipedia.org/wiki/Picture_Transfer_Protocol)（[ISO 15740](http://www.iso.org/iso/home/store/catalogue_ics/catalogue_detail_ics.htm?csnumber=37445)）库（通过 USB 主机操作相机设置）。它使用这个常量，它似乎是某种哈希表数组。问题是我不知道它叫什么，所以我不知道如何在网上搜索它，而且由于我不是一个经验丰富的 C++ 程序员，我不知道如何使用它。这是如何运作的？

```
const ValueTitle<VT_SHSPEED, VT_SHSPEED_TEXT_LEN> ShutterSpeedTitles[] PROGMEM =
{
{0x0c,  {'B','u','l','b',0} },
{0x10,  {' ','3','0','"',0} },
{0x13,  {' ','2','5','"',0} },
{0x14,  {' ','2','0','"',0} },
{0x15,  {' ','2','0','"',0} },
{0x18,  {' ','1','5','"',0} },
{0x1B,  {' ','1','3','"',0} },
{0x1C,  {' ','1','0','"',0} },
{0x1D,  {' ','1','0','"',0} },
{0x20,  {' ',' ','8','"',0} },
{0x23,  {' ',' ','6','"',0} },
{0x24,  {' ',' ','6','"',0} },
{0x25,  {' ',' ','5','"',0} },
{0x28,  {' ',' ','4','"',0} },
{0x2B,  {' ','3','"','2',0} },
{0x2C,  {' ',' ','3','"',0} },
{0x2D,  {' ','2','"','5',0} },
{0x30,  {' ',' ','2','"',0} },
{0x33,  {' ','1','"','6',0} },
{0x34,  {' ','1','"','5',0} },
{0x35,  {' ','1','"','3',0} },
{0x38,  {' ',' ','1','"',0} },
{0x3B,  {' ','0','"','8',0} },
{0x3C,  {' ','0','"','7',0} },
{0x3D,  {' ','0','"','6',0} },
{0x40,  {' ','0','"','5',0} },
{0x43,  {' ','0','"','4',0} },
{0x44,  {' ','0','"','3',0} },
{0x45,  {' ','0','"','3',0} },
{0x48,  {' ',' ',' ','4',0} },
{0x4B,  {' ',' ',' ','5',0} },
{0x4C,  {' ',' ',' ','6',0} },
{0x4D,  {' ',' ',' ','6',0} },
{0x50,  {' ',' ',' ','8',0} },
{0x53,  {' ',' ','1','0',0} },
{0x54,  {' ',' ','1','0',0} },
{0x55,  {' ',' ','1','3',0} },
{0x58,  {' ',' ','1','5',0} },
{0x5B,  {' ',' ','2','0',0} },
{0x5C,  {' ',' ','2','0',0} },
{0x5D,  {' ',' ','2','5',0} },
{0x60,  {' ',' ','3','0',0} },
{0x63,  {' ',' ','4','0',0} },
{0x64,  {' ',' ','4','5',0} },
{0x65,  {' ',' ','5','0',0} },
{0x68,  {' ',' ','6','0',0} },
{0x6B,  {' ',' ','8','0',0} },
{0x6C,  {' ',' ','9','0',0} },
{0x6D,  {' ','1','0','0',0} },
{0x70,  {' ','1','2','5',0} },
{0x73,  {' ','1','6','0',0} },
{0x74,  {' ','1','8','0',0} },
{0x75,  {' ','2','0','0',0} },
{0x78,  {' ','2','5','0',0} },
{0x7B,  {' ','3','2','0',0} },
{0x7C,  {' ','3','5','0',0} },
{0x7D,  {' ','4','0','0',0} },
{0x80,  {' ','5','0','0',0} },
{0x83,  {' ','6','4','0',0} },
{0x84,  {' ','7','5','0',0} },
{0x85,  {' ','8','0','0',0} },
{0x88,  {'1','0','0','0',0} },
{0x8B,  {'1','2','5','0',0} },
{0x8C,  {'1','5','0','0',0} },
{0x8D,  {'1','6','0','0',0} },
{0x90,  {'2','0','0','0',0} },
{0x93,  {'2','5','0','0',0} },
{0x94,  {'3','0','0','0',0} },
{0x95,  {'3','2','0','0',0} },
{0x98,  {'4','0','0','0',0} },
{0x9B,  {'5','0','0','0',0} },
{0x9C,  {'6','0','0','0',0} },
{0x9D,  {'6','4','0','0',0} },
{0xA0,  {'8','0','0','0',0} }
}; 
```

基本上我最终要寻找的是这个。十六进制值表示相机上的快门速度。十六进制数字右侧的数据是快门速度的值，如果它在相机显示屏上以单个字符表示。（我想这可以称为矩阵？）。我想插入我的设备，并在相机上设置曝光。我们会说一秒曝光，用十六进制值“0x38”表示。这是一个起点参考。

我想拍五张照片。其中一个是“0x38”，而另外四个中的两个是这一次之前的两次曝光，另外两个是这一次之后的两次曝光。所以我想把所有五个十六进制值按顺序放在一个数组中，这样它就会找到“0x38”，然后在下面搜索两个，然后在下面找到一个，然后是引用，然后是上面的一个，然后是上面的两个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T18:52:25.907

它是一个数组初始化器：

例子：

```
int  val[] = {1, 2, 3, 4}; // initializes an array of ints. 
```

如果你有 struct 相同的语法工作。

```
struct X
{
    int x;
    int y;
};

X   valX[] = { {1,2}, {3,4}, {5,6}}; // initializes an array of X
                                     // first X is {1,2}
                                     // second X is {3,4}
                                     // etc 
```

在您的情况下，结构是：

```
ValueTitle<VT_SHSPEED, VT_SHSPEED_TEXT_LEN> 
```

但是概念是一样的；

# mysql - 将 mysql 查询移动到模型

> ID：13212200
> 
> 赞同：2
> 
> 时间：2012-11-03T18:29:57.987
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3

我有以下 mysql 查询运行良好。快速背景故事，这按总支出列出了我们的客户。

```
SELECT  SUM(price) AS money_spent, co.customer_id, cu.first_name, cu.last_name, cu.email_primary
FROM customer_order AS co 
JOIN customer AS cu ON (cu.customer_id = co.customer_id) 
GROUP BY co.customer_id
ORDER BY money_spent DESC 
```

我尝试将其作为范围和子类移至客户模型，但两种方式都失败了。我对 Rails（以前是客户端）有点陌生，但我想我已经很接近了。希望你们能指出我正确的方向。提前致谢！！！

```
def self.high_rollers  
  options = {
      :select   => "SUM(price) AS money_spent, co.customer_id, cu.first_name, cu.last_name, cu.email_primary",
      :from     => "customer_order AS co",
      :joins    => "customer AS cu ON (cu.customer_id = co.customer_id)",
      :group_by => "co.customer_id",
      :order    => "money_spent DESC"
            } 
```

将以下代码放入此控制器的索引操作中是可行的，但绝对不是正确的方法！

```
@high_bidders = Customer.find_by_sql(<<-SQL
       SELECT  SUM(price) AS money_spent, co.customer_id, cu.first_name, cu.last_name, cu.email_primary
       FROM customer_order AS co 
       JOIN customer AS cu ON (cu.customer_id = co.customer_id) 
       GROUP BY co.customer_id
       ORDER BY money_spent DESC 
```

SQL)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:49:19.303

我假设您的模型名称是 Customer 和 CustomerOrder。您的表名不是常规的，我认为您已经使用 self.table_name 在模型中明确设置了表名。

```
class CustomerOrder < ActiveRecord::Base
  # ...
  belongs_to :customer

  scope :high_rollers, select("*, SUM(price) AS money_spent").
                       joins(:customer).
                       group(:customer_id).
                       order("money_spent DESC")
end 
```

# java - Android解析xml文件时出错

> ID：13212201
> 
> 赞同：0
> 
> 时间：2012-11-03T18:29:59.667
> 
> 标签：java, android, xml, parsing

我通过 xml 解析向我的应用程序添加了版本检查。

但是当我尝试执行它时，它会在我粘贴在那里的异常中运行：

```
11-03 19:21:36.809: E/AndroidRuntime(16531): FATAL EXCEPTION: main
11-03 19:21:36.809: E/AndroidRuntime(16531): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.lookedpath.firstlesson/com.lookedpath.firstlesson.Update}: android.os.NetworkOnMainThreadException
11-03 19:21:36.809: E/AndroidRuntime(16531):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2099)
11-03 19:21:36.809: E/AndroidRuntime(16531):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2210)
11-03 19:21:36.809: E/AndroidRuntime(16531):    at android.app.ActivityThread.access$600(ActivityThread.java:142)
11-03 19:21:36.809: E/AndroidRuntime(16531):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1208)
11-03 19:21:36.809: E/AndroidRuntime(16531):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-03 19:21:36.809: E/AndroidRuntime(16531):    at android.os.Looper.loop(Looper.java:137)
11-03 19:21:36.809: E/AndroidRuntime(16531):    at android.app.ActivityThread.main(ActivityThread.java:4931)
11-03 19:21:36.809: E/AndroidRuntime(16531):    at java.lang.reflect.Method.invokeNative(Native Method)
11-03 19:21:36.809: E/AndroidRuntime(16531):    at java.lang.reflect.Method.invoke(Method.java:511)
11-03 19:21:36.809: E/AndroidRuntime(16531):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
11-03 19:21:36.809: E/AndroidRuntime(16531):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
11-03 19:21:36.809: E/AndroidRuntime(16531):    at dalvik.system.NativeStart.main(Native Method)
11-03 19:21:36.809: E/AndroidRuntime(16531): Caused by: android.os.NetworkOnMainThreadException
11-03 19:21:36.809: E/AndroidRuntime(16531):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
11-03 19:21:36.809: E/AndroidRuntime(16531):    at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
11-03 19:21:36.809: E/AndroidRuntime(16531):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
11-03 19:21:36.809: E/AndroidRuntime(16531):    at java.net.InetAddress.getAllByName(InetAddress.java:214)
11-03 19:21:36.809: E/AndroidRuntime(16531):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
11-03 19:21:36.809: E/AndroidRuntime(16531):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
11-03 19:21:36.809: E/AndroidRuntime(16531):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
11-03 19:21:36.809: E/AndroidRuntime(16531):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
11-03 19:21:36.809: E/AndroidRuntime(16531):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
11-03 19:21:36.809: E/AndroidRuntime(16531):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
11-03 19:21:36.809: E/AndroidRuntime(16531):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
11-03 19:21:36.809: E/AndroidRuntime(16531):    at com.lookedpath.firstlesson.XMLParser.getXmlFromUrl(XMLParser.java:35)
11-03 19:21:36.809: E/AndroidRuntime(16531):    at com.lookedpath.firstlesson.Update.<init>(Update.java:24)
11-03 19:21:36.809: E/AndroidRuntime(16531):    at java.lang.Class.newInstanceImpl(Native Method)
11-03 19:21:36.809: E/AndroidRuntime(16531):    at java.lang.Class.newInstance(Class.java:1319)
11-03 19:21:36.809: E/AndroidRuntime(16531):    at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
11-03 19:21:36.809: E/AndroidRuntime(16531):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2090)
11-03 19:21:36.809: E/AndroidRuntime(16531):    ... 11 more 
```

您可以使用 GitHub 获取 Eclipse 项目： [https ://github.com/LookedPath/lookedpath_android_applications/tree/FirstApp/PrimaLezione](https://github.com/LookedPath/lookedpath_android_applications/tree/FirstApp/PrimaLezione)

我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T18:11:27.913

最好的方法是使用 AsyncTask。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

异步任务允许您在完成下载时与 UI 交互，线程（或可运行）不允许您与 UI 交互。

如果您需要在 UI 中进行更改，您需要创建一个处理程序并在该处理程序中运行更改，但 AsyncTask 会为您实现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T18:46:05.737

你得到一个`NetworkOnMainThreadException`. 这意味着您正尝试在主 (UI) 线程中以某种方式访问​​网络（例如下载图像）。这是为了更好地响应 API 11 中的用户界面而禁用的。您需要为网络使用不同的线程，最简单的实现方法是使用[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html). 如果您需要保持连接一段时间（例如实时通信），您还可以创建一个新类来扩展`Thread`或`HandlerThread`管理该类与您自己的 UI 线程之间的通信（使用`Handler`）。不要忘记 UI 不是线程安全的。

# c - 行为不端的 TCP 客户端实现

> ID：13212202
> 
> 赞同：1
> 
> 时间：2012-11-03T18:30:16.363
> 
> 标签：c, unix, network-programming, system-calls

我用 C 语言编写了一个简单的应用程序，它派生一个孩子充当网络服务器，而许多孩子充当网络客户端。客户端连接到服务器，并请求数据。这是代码：

```
#include <stdio.h>
#include <sys/select.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <signal.h>
#include <errno.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <sys/queue.h>
#include <strings.h>
#include <sys/wait.h>

#define LISTENSOCKET 1519
#define MAXCLIENT 200
#define MAXLINE 80

void client_do_something(int c) 
{
    printf("Process %d, server gave %d\n", getpid(), c);
}

void client_body()
{
    struct sockaddr_in clientaddr;
    struct sockaddr_in localaddr;
    int sockfd;
    int nread;
    int s;
    char serveraddr[20] = "127.0.0.1";
    char laddr[20];
    char command[4] = "GET";
    int c;
    command[3] = '\0';
    socklen_t len;

    sockfd = socket(AF_INET, SOCK_STREAM, 0);
    clientaddr.sin_family = AF_INET;
    clientaddr.sin_port = htons(LISTENSOCKET);
    inet_pton(AF_INET, serveraddr, &clientaddr.sin_addr);
    printf("Client %d started\n", getpid());
    if ((s=connect(sockfd, (struct sockaddr *) &clientaddr, sizeof(clientaddr))) != 0) {
        perror("conn err:");
        printf("Connect error: pid %d %d\n", getpid(), errno);
        close(sockfd);
        sleep(1);
        exit(1);
    }
    getsockname(sockfd, (struct sockaddr *) &localaddr, &len);
    inet_ntop(AF_INET,  &localaddr.sin_addr, laddr, sizeof(laddr));
    printf("Client %d passed connect (%d), %s:%d \n", getpid(), s, laddr,     ntohs(localaddr.sin_port));
    while(1) {
        send(sockfd, command, 4, 0);
        if ( (nread = recv(sockfd, &c, 4, 0)) < 0 ) {
            if (errno == ENOTCONN) {
                sleep(1);
                continue;
            }
            perror("client recv err:");
            printf("Client %d received error %d ", getpid(), errno);
            exit(1);
        } else if (nread == 0) {
            printf("Pid %d received FIN\n", getpid());
            close(sockfd);
            exit(0);
        }
        client_do_something(c);
    }
}

int start_server() {
    int i, nread, maxi, val, listenfd, connfd, sockfd, maxfd, nready, client[MAXCLIENT];
    socklen_t len;
    char *c;
    struct sockaddr_in servaddr, clientaddr, localaddr;
    fd_set rset, allset;
    char addr[MAXLINE];
    char laddr[INET_ADDRSTRLEN];
    struct timeval timeout;
    printf("Started\n");
    printf("Server PID=%d", getpid());
    val = 0;

    bzero(&servaddr, sizeof(servaddr));
    servaddr.sin_family = AF_INET;
    servaddr.sin_port = htons(LISTENSOCKET);
    servaddr.sin_addr.s_addr = htonl(INADDR_ANY);

    if((listenfd = socket(AF_INET, SOCK_STREAM, 0)) < 0)
        perror("socket failed\n");

    if(bind(listenfd, (struct sockaddr *) &servaddr, (socklen_t) sizeof(servaddr)) == -1) 
        perror("listen failed\n");
    getsockname(listenfd, (struct sockaddr *) &localaddr, &len);
    inet_ntop(AF_INET,  &localaddr.sin_addr, laddr, INET_ADDRSTRLEN);
    printf("Server %d passed connect , %s:%d \n", getpid(),  laddr, ntohs(localaddr.sin_port));
    if(listen(listenfd, 10) == -1) 
        perror("listen failed\n");

    maxi = -1;
    for(i=0; i < MAXCLIENT; i++)
    client[i] = -1;
    maxfd = listenfd;
    FD_ZERO(&allset);
    FD_SET(listenfd, &allset);

    bzero(&timeout, sizeof(struct timeval));
    timeout.tv_sec = 15;
    printf("Server process, after listen, sleep 5s before accept\n");
/* Here I purpousely sleep because I want client to initiate connection before accept */
    sleep(5);
    printf("Server porcess, slept for 5s\n");
    while(1) {
    rset = allset;
    nready = select(maxfd + 1, &rset, NULL, NULL, NULL);
    if (FD_ISSET(listenfd, &rset)) {
        len = sizeof(clientaddr);
        bzero(&clientaddr, sizeof(clientaddr));
        if((connfd = accept(listenfd, (struct sockaddr *) &clientaddr, &len)) < 0) {
        perror("accept failed");
        exit(-1);
        }
        for(i=0; i < MAXCLIENT; i++) {
        if(client[i] < 0) {
            client[i] = connfd;
            break;
        }
        } 
        FD_SET(connfd, &allset);
        if(connfd >= maxfd)
        maxfd = connfd;
        if(i > maxi)
        maxi = i;
        if(--nready <= 0) 
        continue;
    }
    for(i=0; i <= maxi; i++) {
        if ( (sockfd = client[i]) < 0)
        continue;
        if(FD_ISSET(sockfd, &rset)) {
        if( (nread = read(sockfd, addr, MAXLINE)) < 0) {
            if(errno == EINTR) 
            nread = 0;
            else {
            printf("Izlazim");
            return -1;
            }
        } else if (nread == 0) {
            close(sockfd);
            FD_CLR(sockfd, &allset);
            client[i] = -1;
                    continue;
        }

        if (strncmp(addr, "GET", 3) == 0) {
                    if(val < 100) {
                        i = send(sockfd, (int *) &val, (size_t) sizeof(val), 0);
                        val++;
                        if (i == -1)
                            printf("nread=%d, errno=%d\n",nread, errno); 
                    } else {
                        FD_CLR(sockfd, &allset);
                        client[i] = -1;
                        close(sockfd);
                    }
            } else {
            c = addr;
                    printf("Poslao je addr=%s\n", addr);
            }
            if(--nready <= 0) 
            break;
        }
    }
    }
}

int main(int argc, char *argv[]) {
    printf("Pid=%d",getpid());
    int i, child_num, status;
    pid_t p, pp;
    child_num = 100;
    printf("%d childs, pid=%d \n", child_num, getpid());
    p = fork();
    if(p == 0) {
        start_server();
        exit(0);
    } else if (p < 0) {
        exit(1);
    }
    pp = p;
    for(i = 0; i < child_num; i++) {
        p = fork();
        if (p < 0) {
            exit(1);
        } else if (p == 0){
            client_body();
            exit(0);
        }
    }
    for(i = 0; i < child_num; i++) {
        wait(&status);
    }
    kill(pp, SIGTERM);
    return 0;
} 
```

问题出在 connect() 系统调用中（在 client_body 函数中）；根据手册页，如果连接成功，连接应该返回 0，错误时返回 -1。我注意到，在我的程序中，connect() 返回 0 尽管它没有与服务器建立连接（从服务器接收到 SYN ACK）。后来，在程序中，同一个子进程发出了recv系统调用，产生了errno值为104（ECONNRESET）的错误。我一直在观看wireshark 捕获，并没有注意到服务器发送的任何TCP 数据包中的RESET 标志。

有人知道出了什么问题吗？我已经在 linux，2.6.38-8-generic 内核上测试了这段代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:37:06.717

我以前见过这个。当连接到 localhost 时，connect() 看起来会成功，即使它实际上并没有成功，并且直到第一次 I/O 操作才发现。但是，因为您忽略了第一个 I/O 操作 send() 中的错误，所以您会在第二个操作 recv() 中得到它，您可以在其中进行检查。检查 send() 太。

上次我看到这是二十年前，我忘记了我是如何绕过它的。您可以尝试在 connect() 之后通过 getsockopt() 查看 SO_ERROR。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T20:25:56.450

您可能需要在 main() 中插入延迟，以确保在客户端尝试连接之前启动服务器。

睡眠（1）；// 应该在 2 个分叉之间进行

可以随时重置连接。

对于listen() 积压工作，您的fork() 速率可能太快了。从 10 增加到 SOMAXCONN。在每个尝试连接的客户端之间插入一个 nanosleep() 亚秒睡眠，也许 10 毫秒就可以了。当您超过此值时，客户端将看到 ECONNRESET。

不知道为什么在客户端的 exit() 之前有 sleep(1) 。在线查看 setsocketopt() 逗留设置，了解我认为您正在尝试实现的内容并立即退出。一些链接： [https](https://lists.mindrot.org/pipermail/openssh-unix-dev/2002-September/015275.html) ://lists.mindrot.org/pipermail/openssh-unix-dev/2002-September/015275.html （包含SO_LINGER使用的C代码） [用0值调用setSoLinger和不启用有什么区别soLinger 呢？](https://stackoverflow.com/questions/9658455/what-is-the-difference-between-calling-setsolinger-with-a-0-value-and-not-enabli) （面向Java但与相同机制相关）

无需在服务器上 sleep(5)。你可以马上听。这 5 秒的延迟会将 listen() 积压设置为 10，以便在 connect() 期间查看 ECONNRESET()，因为服务器端的传入连接超载。

作为一项改进，recv() 上的大多数错误都是终止连接的原因。除了 EWOULDBLOCK/EAGAIN 和 EINTR。即 ENOTCONN 是一个错误，应该终止套接字的使用（如果你是 UDP，则有可能继续保持 fd 处于打开状态，但不是 TCP，套接字永远不会恢复，你看到了吗）。这是仅有的2个案例

```
if(recv(fd, ...) < 0) {
  if(errno != EWOULDBLOCK && errno != EINTR) {
    // print out
    close(fd);
    exit(1);
  }
} 
```

FWIW 我知道我没有直接回答您的问题，但我不相信您根据代码提出的主张。也许如果您要重新组织所有日志输出，因此 getpid() 位于格式为 %05d 的行的开头，然后运行程序，然后将生成的日志文件粘贴到文件中，以证明事情发生的顺序。

# python - 将浮点数与 numpy 和 scipy 进行比较

> ID：13212210
> 
> 赞同：4
> 
> 时间：2012-11-03T18:30:42.113
> 
> 标签：python, numpy, scipy

numpy 或 scipy 模块中是否有任何 epsilon 常数（如在 Matlab 中）来比较浮点数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T18:40:24.247

您可以使用[np.finfo](http://docs.scipy.org/doc/numpy/reference/generated/numpy.finfo.html)

```
>>> import numpy as np
>>> np.finfo(np.double).eps
2.2204460492503131e-16
>>> np.finfo(np.single).eps
1.1920929e-07 
```

# arrays - 在 Rust 中创建二维数组

> ID：13212212
> 
> 赞同：55
> 
> 时间：2012-11-03T18:31:15.360
> 
> 标签：arrays, vector, multidimensional-array, rust

如何在 Rust 中创建一个空的可变二维数组？

这是我到目前为止所尝试的：

```
let mut state[[u8 * 4] * 4]; 
```

这会产生错误

```
error: expected one of `:`, `;`, `=`, or `@`, found `[`
 --> src/main.rs:2:18
  |
2 |     let mut state[[u8 * 4] * 4];
  |                  ^ expected one of `:`, `;`, `=`, or `@` here 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2015-01-16T13:02:17.843

在 Rust 1.0 中，以下工作：

```
let mut state = [[0u8; 4]; 6];
state[0][1] = 42; 
```

请注意，内部段的长度是类型的组成部分。例如，您可以`state`按如下方式引用（并通过）：

```
let a: &[[u8; 4]] = &state; 
```

但并非没有指定子数组的固定长度。如果您需要可变长度子数组，您可能需要执行以下操作：

```
let x: [Box<[u8]>; 3] = [
    Box::new([1, 2, 3]),
    Box::new([4]), 
    Box::new([5, 6])
];
let y: &[Box<[u8]>] = &x; 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-11-05T15:39:08.730

> 编者注：这个答案早于 Rust 1.0，并且一些概念和语法已经改变。其他答案适用于 Rust 1.0。

您希望数组的内容是可变的还是包含它的变量？如果你想要可变内容，这对你有用吗？

```
let mut state = [[0u8; 4]; 4]; 
```

如果您希望变量可变但内容不可变，请尝试以下操作：

```
let mut state = [[0u8; 4]; 4]; 
```

这有帮助吗？我实际上并没有编译它，所以语法可能略有偏差。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2016-04-02T17:30:06.440

您可以像这样创建一个动态大小的 2D 矢量：

```
fn example(width: usize, height: usize) {
    // Base 1d array
    let mut grid_raw = vec![0; width * height];

    // Vector of 'width' elements slices
    let mut grid_base: Vec<_> = grid_raw.as_mut_slice().chunks_mut(width).collect();

    // Final 2d array `&mut [&mut [_]]`
    let grid = grid_base.as_mut_slice();

    // Accessing data
    grid[0][0] = 4;
} 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2019-11-26T03:00:29.997

`Vec`如果您在编译时没有已知的大小，您也可以像这样（使用）创建一个二维数组：

```
let width = 4;
let height = 4;

let mut array = vec![vec![0; width]; height]; 
```

像这样使用它：

```
array[2][2] = 5;

println!("{:?}", array); 
```

输出：

> 0 0 0 0
> 0 0 0 0
> 0 0 5 0
> 0 0 0 0

自 rust 1.0.0 起可用[https://doc.rust-lang.org/std/vec/struct.Vec.html](https://doc.rust-lang.org/std/vec/struct.Vec.html)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2018-12-26T10:17:46.133

**初始化：**
2D Array 初始化有几种方法：

1.  对 M（行）和 N（列）使用常量

    ```
    const M: usize = 2;
    const N: usize = 4;

    let mut grid = [[0 as u8; N] ; M]; 
    ```

2.  带有类型注释的显式声明

    ```
    let mut grid: [[u8; 4]; 2] = [[0; 4]; 2]; 
    ```

**遍历：**
只读**遍历**很简单：

```
for (i, row) in grid.iter().enumerate() {
    for (j, col) in row.iter().enumerate() {
        print!("{}", col);
    }
    println!()
} 
```

或者

```
for el in grid.iter().flat_map(|r| r.iter()) {
    println!("{}", el);
} 
```

**更新元素：**

```
for (i, row) in grid.iter_mut().enumerate() {
    for (j, col) in row.iter_mut().enumerate() {
        col = 1;
    }
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-04-19T19:32:41.660

如果您愿意安装板条箱，它`ndarray`可以优雅地为您完成。

```
use ndarray::Array2;
let mut array = Array2::zeros((4, 3));
array[[1, 1]] = 7; 
```

对于一些已经存在的答案，不可能使用非常量维度创建数组。没有这样的问题`ndarray`。您还可以轻松创建多于两个维度的维度。

您可以[在此处](https://docs.rs/ndarray/0.13.0/ndarray/struct.ArrayBase.html)和[此处](https://crates.io/crates/ndarray)找到更多详细信息。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-06-29T10:59:19.523

好吧，如何创建向量的问题在上面得到了适当的解决。下面是创建一个二维向量然后用用户输入填充它的代码片段：

```
use std::io;

fn main(){
    let width = 4;
    let height = 4;

    let mut array = vec![vec![0; width]; height];

    for i in 0..4 {
        let mut xstr = String::from("");
        io::stdin().read_line(&mut xstr).ok().expect("read error");
        array[i] = xstr
            .split_whitespace()
            .map(|s| s.parse().expect("parse error"))
            .collect();
    }

    println!("{:?}", array)
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-02-08T00:50:42.730

显式初始化

```
let directions: [[i32; 2]; 4] = [[-1, 0], [0, 1], [0, 1], [1, 0]] 
```

具有相同的价值

```
let directions: [[i32; 2]; 4] = [[0; 2]; 4]; 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-02-15T17:23:38.933

惯用的 C 二维数组使用与访问数组时相同的数组大小顺序声明：

```
// Declaration
int array_2d[8][16]; // An 8 by 16 2D array
...
// Access
array_2d[0][1] = 5; 
```

在 Rust 中，声明大小是翻转的；要创建一个 8 x 16 二维数组，语法是：

```
// Declaration
let mut array_2d: [[i32; 16]; 8];
...
// Access (same as idiomatic C. types for added explicitness)
array_2d[0_usize][1_usize] = 5; 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-10-11T14:03:23.610

另一个二维字符串数组的例子：

```
fn main() {
    let width = 2;
    let height = 3;

    let mut a: Vec<Vec<String>> = vec![vec![String::from(""); width]; height];

    for i in 0..height {
        for j in 0..width {
            let s = format!("{}:{}", i + 1, j + 1);
            a[i][j] = s;
        }
    }
    println!("{:?}", a);
} 
```

输出：

```
[
  ["1:1", "1:2"],
  ["2:1", "2:2"],
  ["3:1", "3:2"]
] 
```

但我不确定为什么我们不能使用这种形式：`a = [[String::from(""), 2], 3]`. 我不明白 和 之间的`vec![]`区别`[]`。

# python - Numpy 中形状的 (4,) 和 (4,1) 有什么区别？

> ID：13212215
> 
> 赞同：4
> 
> 时间：2012-11-03T18:31:21.650
> 
> 标签：python, numpy, scipy

我有两个 ndarray`A`和`B`，一个有形状`(4,)`，另一个`(4,1)`.

当我想使用[this](http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.cosine.html#scipy.spatial.distance.cosine)计算余弦距离时，它会引发一些抱怨这两个对象的异常`are not aligned`

有人对此有想法吗？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-03T18:33:46.177

一个是一维数组，另一个是二维数组。

例子：

```
>>> import numpy as np
>>> a = np.arange(4).reshape(4,1)
>>> a
array([[0],
       [1],
       [2],
       [3]])
>>> a.ravel()
array([0, 1, 2, 3])
>>> a.squeeze()
array([0, 1, 2, 3])
>>> a[:,0]
array([0, 1, 2, 3])
>>>
>>> a[:,0].shape
(4,) 
```

# python - Python为对象创建处理程序？

> ID：13212222
> 
> 赞同：0
> 
> 时间：2012-11-03T18:32:00.810
> 
> 标签：python, handler

我正在尝试创建一个处理程序，该处理程序在任何对象的属性值发生变化时触发。我对python还是很陌生，并没有真正想出任何工作方法。这就是我所做的，我知道它不能像这样工作，这只是为了展示我想要实现的目标：

```
# ../handler.py
import copy

class Handler:
    def __init__(self, obj):
        # Let the object know it's handler
        obj.handler = self

        # Copy the object
        self.copy = copy.deepcopy(obj)

        # Let handler know it's object
        self.obj = obj

        # Handler not running atm.
        self.running = False

def start(self):
    # Running
    self.running = True

    # As long as running...
    while self.running:

        # Loop through all objects attributes
        for attr in self.obj.__dict__:

            # If attribute's value has changed
            if self.copy.__dict__[attr] != self.obj.__dict__[attr]:

                # Print out a message
                print("%s was changed to %s" %(attr, self.obj.__dict__[attr]))

                # Update the value to our copy
                self.copy.__dict__[attr] = self.obj.__dict__[attr]

def stop(self):
    # Not running
    self.running = False 
```

这是主文件

```
# ../main.py
from handler import Handler

class Value:
    def __init__(self, v=None):
        self.value = v

def createObject(v):
    obj = Value(v)
    Handler(obj)
    return obj

myObj = createObject(5)
myObj.handler.start() 
```

但是，这将导致此文本被打印出来：`handler was changed to <Handler.Handler object at 0x0000000002B1FC50>`但我没有在这里更改处理程序？此外，由于 Handler.start() 函数中的 while 循环，程序将冻结……我怎样才能以一种有效的方式实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T18:41:20.930

```
class Proxier(object):
    def __init__(self, obj):
        self.obj = obj
        obj.handler = self

    def __getattr__(self, key):
        return getattr(self.obj, key)

    def __setattr__(self, key, value):
        if key != 'obj':
            oldvalue = getattr(self.obj, key)
            if oldvalue != value:
                doSomething()

            setattr(self.obj, key, value)
        else:
            setattr(self, key, value)

class Value(object):
    def __init__(self, v=None):
        self.value = v

myObj = Proxier(Value(2)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T18:44:14.377

你实际上想要一个代理，这是一个开始......

```
class Proxy(object):
    def __init__(self, obj):
        object.__setattr__(self, '__obj', obj)
    def __getattribute__(self, name):
        return getattr(object.__getattribute__(self, '__obj'), name)

a = range(10)
p = Proxy(a)

p.append(10) # etc... 
```

您还需要寻找`__setattribute__`和`__delattribute__`其他魔术方法...

当属性更改时，您将如何满足可能会有点棘手 - 因为您必须知道是否存在方法调用，从而就地更改了对象......（例如`append`上面）

一个快速的谷歌提出：[http ://code.activestate.com/recipes/496741-object-proxying/](http://code.activestate.com/recipes/496741-object-proxying/)

# php - php jquery中Json的数据

> ID：13212223
> 
> 赞同：1
> 
> 时间：2012-11-03T18:32:05.020
> 
> 标签：php, jquery, mysql, ajax

我无法从数据库中获取我的值以进入 jquery 标签插件，任何帮助都会很棒：

PHP：

```
case 'get_tags':
        $id         = (isset($_GET['id'])) ? intval($_GET['id']) : 0;
        $query      = "SELECT description FROM `tags` WHERE page_id = '?';";
        $query_p    = $db->prep_query($query,array($id));
        $results    = $db->queryMakearray($query_p);

        $tags = array_values($results);
        $response   = json_encode($results);
break; 
```

JS

```
$(document).ready(function()
{
    var _id = parseInt($.url_param('id'), 10);
    var _tag_items = $.get('inc/ajax.php?type=get_tags&id='+_id);
    $('#tags')
        .textext({
        plugins : 'tags',
        tagsItems: _tag_items
    });
}); 
```

回复：

```
"[{\"description\":\"test\"},{\"description\":\"test2\"},{\"description\":\"test3\"}]" 
```

我需要它看起来像这样：

```
["test","test2","test3"] 
```

***编辑***

PHP：

```
$id         = (isset($_GET['id'])) ? intval($_GET['id']) : 0;
        $query      = "SELECT description FROM `tags` WHERE page_id = '?';";
        $query_p    = $db->prep_query($query,array($id));
        $results    = $db->query2array($query_p);

        $tags   = array_values($results);
        $response = sanitize_output($tags); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T18:38:06.707

您必须将 JSON (_tag_items) 转换为数组。你可以这样做：

```
var finalArray = [];
for(var i in _tag_items) {
    if(_tag_items.hasOwnProperty(i) && !isNaN(+i)) {
        finalArray[+i] = _tag_items[i];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T18:39:46.243

您可以通过删除密钥在php中解决它。

```
 foreach($results => $value);
    {
        $results[] = $value['description'];
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T18:50:13.167

```
$(document).ready(function()
{
    var _id = parseInt($.url_param('id'), 10);
    var _tag_items = $.get('inc/ajax.php?type=get_tags&id='+_id);
    var _newTag = [];
    for(var i=0; i<_tag_items.length; i++)
    {
        _newTag.push(_tag_items[i].description);
    }
    $('#tags')
        .textext({
        plugins : 'tags',
        tagsItems: _newTag
    });
}); 
```

[演示](http://jsfiddle.net/mRp4h/1/)

# matlab - 在matlab中不使用for循环计算矩阵的直方图

> ID：13212224
> 
> 赞同：1
> 
> 时间：2012-11-03T18:32:10.750
> 
> 标签：matlab, image-processing, matrix, histogram

我有一张我读过的图像，它的像素值存储在一个矩阵中。我正在尝试为我打算绘制直方图的矩阵获取频率表。我正在尝试仅使用矩阵表达式（即没有 for 循环/imhist 函数）来执行此操作。我查看了一个名为 histc() 的函数，它可以计算矩阵中的值，但我不知道如何使用它。如果有人能指出我正确的方向，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T22:00:26.127

尝试：

```
hist(image(:),min(image(:)):max(image(:))); 
```

这将绘制像素值的直方图，包括图像具有的整个值范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-26T19:02:05.887

虽然这是一篇旧文章，但我们也可以使用`accumarray`：

```
h = accumarray(double(im(:))+1, 1, [double(intmax(class(im)))+1 1]); 
```

`h`将包含每个强度级别遇到多少像素的直方图/频率计数。我们将所有值 in`im`和 offset by`1`作为 MATLAB 索引数组，`1`而不是从`0`. 图像的强度将从 开始`0`。我们还想指定直方图的大小，以从`0`我们拥有的此类支持的尽可能多的强度。我们可以通过做来找出图像支持的最大强度`intmax(class(im))`。因此，我们可以支持的可能强度的总数是`intmax(class(im)) + 1`。的第三个参数`accumarray`指定我们的直方图的输出大小。

请注意，您需要转换`intmax`调用以及图像`im`，`double`因为返回的是该类型的最大整数，**并且属于该类型**。因此，加 1 只会使值饱和而不是注册。因此，您需要进行强制转换，`double`以便添加可以正确注册。

# java - 在结束方法之前等到单击 JButton

> ID：13212226
> 
> 赞同：1
> 
> 时间：2012-11-03T18:32:32.873
> 
> 标签：java, swing, jbutton

我正在编写一个井字游戏，该游戏在玩家（用户点击按钮）和计算机玩家之间轮流。

我有一个调用的方法`playersTurn()`，它需要等到`JButton`在方法结束之前单击 a 并且计算机播放器轮到它。我已阅读有关使用线程和`wait - notify`方法的信息，但我是 Java 新手，不知道如何实现这一点。

我想知道是否有更简单的方法来克服这个问题，或者这是唯一的方法，如果是这样，有人可以指导我找到一个好的教程吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T18:56:36.350

正如@HFOE 所说（对他+1），您不想将`Thread`s 与*notify*一起使用并*等待*，这确实使事情变得过于复杂您的游戏逻辑在 IMO 上是有偏差的。

在开始游戏之前先制定一些框架：

*   9`JButton`秒（阵列将按住按钮）
*   `JPanel`用 a`GridLayout(3,3)`创建井字游戏网格

现在是重要的部分：

*   玩家开始游戏，然后计算机继续运行，依此类推

考虑到上述内容，请参阅我的示例，我所做的基础是在播放器离开后（单击按钮并设置*播放*`ActionListener`器符号）后用于每个按钮的内部，我们调用*cpu*播放的方法：

 *![在此处输入图像描述](../Images/0daa682b0fb4502fb55740a8bccd3a7e.png)

```
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.Random;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UIManager.LookAndFeelInfo;

public class Test {
    //declare variables for player and cpu symbol

    private String playerSymbol = "X";
    private String cpuSymbol = "O";
    //used for cpu to select random block
    private Random r = new Random();
    //create arraylist to hold buttons
    ArrayList<JButton> blocks = new ArrayList<>();
    //this is the action listner that will be added to each block and will allow player the first turn then cpu goes
    private ActionListener al = new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent ae) {

            //players turn
            playerTurn(ae);

            //check for win after player gone
            checkForWin();

            //cpu turn
            cpuTurn();

            //check for a win after cpu goes
            checkForWin();
        }

        private void cpuTurn() {
            System.out.println("CPU goes");
            while (true) {
                int blockNumber = r.nextInt(9);

                System.out.println(blockNumber + "");
                String tmp = blocks.get(blockNumber).getText();

                if (tmp.equals("")) {
                    blocks.get(blockNumber).setText(cpuSymbol);
                    break;
                }
            }
        }

        private void checkForWin() {
            System.out.println("Checking for a win...");
        }

        private void playerTurn(ActionEvent ae) {
            System.out.println("Player goes");
            JButton block = (JButton) ae.getSource();
            block.setText(playerSymbol);
        }
    };

    public Test() {
        initComponents();
    }

    private void initComponents() {
        JFrame frame = new JFrame("Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel board = new JPanel(new GridLayout(3, 3));//create gridlayput to hold buttons

        //create blocks/Jbuttons to hold X and Y
        createBlocks(blocks);
        //add buttons/blocks to the board
        fillBoard(blocks, board);
        //add board to JFrame content pane
        frame.add(board);

        frame.pack();
        frame.setVisible(true);
    }

    private void fillBoard(ArrayList<JButton> blocks, JPanel board) {
        for (JButton block : blocks) {
            board.add(block);
        }
    }

    private void createBlocks(ArrayList<JButton> blocks) {
        for (int i = 0; i < 9; i++) {

            //create new button with a size of 50,50
            JButton block = new JButton() {
                @Override
                public Dimension getPreferredSize() {
                    return new Dimension(50, 50);
                }
            };
            block.addActionListener(al);//add the actionlistner to the button
            blocks.add(block);
        }
    }

    public static void main(String[] args) {
        //set L&F and create UI on EDT
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {

                try {//set L&F
                    for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                        if ("Nimbus".equals(info.getName())) {
                            UIManager.setLookAndFeel(info.getClassName());
                            break;
                        }
                    }
                } catch (Exception e) {
                    // If Nimbus is not available, you can set the GUI to another look and feel.
                }

                //create UI
                new Test();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T18:49:52.980

你不应该等待并测试发生了什么，正确的方法是将监听器设置为按钮，例如在按钮单击后更改活动播放器。但是一切都取决于您的代码实施。*

# c - 如何打印大小未知的int数组

> ID：13212231
> 
> 赞同：1
> 
> 时间：2012-11-03T18:33:05.523
> 
> 标签：c, arrays, pointers

假设我们有一个返回数组的函数。

```
int *theFunction()
{
int a[]={1,2,3,4,5};
return a;
} 
```

我想将函数的结果存储在指针中。

```
int *a=theFunction(); 
```

我如何打印数组，甚至可能吗？数组的长度未知，有没有办法找到它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T18:36:09.603

不。

您需要使用您知道不会出现的值来描述数组，或者将指针传递给将使用大小填充它的函数。

但是您还返回了指向堆栈上数据的指针；那也行不通。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T18:40:29.137

首先，永远不要返回指向局部变量的指针。在堆上分配该数组。

至于返回数组的大小，您可以让函数返回一个包含指针和数组大小的结构。

另一种方法是让调用者传递对被调用者修改的大小变量的引用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T18:35:21.093

`a`是一个局部变量，你不能在`theFunction`函数之外访问它的值。

无论如何，要打印一个没有大小的数组，您必须添加一个分隔符（例如，一个特定的值）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-03T19:00:26.880

未知`array`时无法**打印**`size`

 *** * *

您可以通过以下方式解决此问题

1>提供一个**标记值**，即表示数组结尾的值。那么让我们考虑`-1`成为哨兵

```
int a[]={1,2,3,4,5,-1};
                    ^
                    |->-1 would denote the end of array 
```

但是，如果您的价值之一似乎是，则此解决方案将**失败**`-1`

**或者**

2>使用**struct**来表示大小和数组内容

```
struct list
{
int *values;//the array of values
int size;//size of the values array
} 
```

* * *

也不要返回指向具有本地范围的值的指针..即在您的情况下，本地值是`a`..一旦您退出方法，a就会被破坏..`a`在方法返回后进一步访问它是错误的

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-03T18:36:57.467

将数组的长度也作为输出参数返回有多难？如果数组中有任何标记结束的特殊数字，则可以使用它。**否则，您无法仅使用指针找到数组的长度。**而关于在函数外返回堆栈指针，可能会导致崩溃。**

# javascript - 带有引用表单值的 javascript 的图像映射区域

> ID：13212234
> 
> 赞同：1
> 
> 时间：2012-11-03T18:33:20.403
> 
> 标签：javascript, html, forms, imagemap

我正在尝试创建一个充当上/下增量器/减量器控件的图像映射。该图像是一个简单的 16x16 png 文件，其中包含两个三角形（一个向上，另一个向下），图像的上半部分为 UP（增量），下半部分为 DOWN（减量）。

下面的代码说明了我在引用表单值的图像映射区域的 href 时遇到的问题。我很困惑为什么对警报函数的调用有效，而使用表单值进行实际递增/递减的代码却失败了。我打算实现的实际代码会更复杂，但在深入之前我需要克服这个障碍或改变方法。

因此，我想知道这种方法是否确实可行，以及我的场景中是否可能缺少一些小东西，或者这可能是一种错误的尝试，试图以另一种方式更好地完成某些事情。我还要承认我在客户端编程方面的相对新手地位（好像这并不明显），并提前感谢大家的温柔和建设性的指导。

```
<html>
 <head>
  <title>ImageMap Test</title>
 </head>
 <body>
  <form>
   <fieldset>
    <legend>ImageMap area href for javascript works for alerts:</legend>
    <input type='text' name='foo1_filter' size='25' value='123' />
    <img src='../img/arrow_up-down.png' title='Up-Down' usemap='#foo1' />
    <map name='foo1'>
     <area shape='rect' coords='0,0,15,7' href='javascript:alert("UP");' />
     <area shape='rect' coords='8,0,15,15' href='javascript:alert("DOWN");' />
    </map>
   </fieldset>
  </form>
  <p />
  <form>
   <fieldset>
    <legend>ImageMap area href for javascript does not work when referencing form values:</legend>
    <input type='text' name='foo2_filter' size='25' value='123' />
    <img src='../img/arrow_up-down.png' title='Up-Down' usemap='#foo2' />
    <map name='foo2'>
     <area shape='rect' coords='0,0,15,7' href='javascript:this.form.foo2_filter.value++;' />
     <area shape='rect' coords='8,0,15,15' href='javascript:this.form.foo2_filter.value--;' />
    </map>
   </fieldset>
  </form>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T18:43:41.090

我认为错误在于在区域元素中使用 this.form 。.form 属性只能在单击/使用表单元素（如输入、字段等）时使用。尝试执行以下操作：

1.  为表单添加名称，例如：my_form
2.  将“this.form”更改为“document.my_form”

就像是

```
<form name="my_form">
  <fieldset>
    <legend>ImageMap area href for javascript does not work when referencing form values:</legend>
    <input type='text' name='foo2_filter' size='25' value='123' />
    <img src='../img/arrow_up-down.png' title='Up-Down' usemap='#foo2' />
    <map name='foo2'>
      <area shape='rect' coords='0,0,15,7' href='javascript:document.my_form.foo2_filter.value++;' />
      <area shape='rect' coords='8,0,15,15' href='javascript:document.my_form.foo2_filter.value--;' />
    </map>
  </fieldset>
</form> 
```

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T18:46:26.997

有几个问题：

*   通过 Javascript 不正确地访问 DOM 元素。
*   新值永远不会分配给 DOM 元素。
*   Javascript是内联的。注意*这更像是一个标准问题。

尝试按如下方式设置值：

```
<area shape='rect' coords='0,0,15,7' href='javascript:document.forms[0].elements["foo2_filter"].value = --document.forms[0].elements["foo2_filter"].value;' /> 
```

关于此代码的一些注意事项。

*   使用`--`前缀递减运算符，以便在赋值之前减少值。
*   `=`运算符用于为 DOM 元素的 value 属性分配递减的值。

看看这个关于表单中引用 DOM 元素的页面： [http ://www.javascript-coder.com/javascript-form/javascript-get-form.phtml](http://www.javascript-coder.com/javascript-form/javascript-get-form.phtml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T02:33:36.147

```
<form name="fooForm2">
  <fieldset>
    <legend>ImageMap area href for javascript referencing form values:</legend>
    <input type='text' name='foo2_filter' size='25' value='123' />
    <img src='../img/arrow_up-down.png' title='Up-Down' usemap='#foo2' />
    <map name='foo2'>
      <area shape='rect' coords='0,0,15,7' href='#' onclick='javascript:document.fooForm2.foo2_filter.value++; return false' />
      <area shape='rect' coords='0,8,15,15' href='#' onclick='javascript:document.fooForm2.foo2_filter.value--; return false' />
    </map>
  </fieldset>
</form> 
```

感谢 Andrea 和 kmb385 的建议。结果，现在一切都按预期工作。我为使其正常工作所做的更改是：

1.  明确引用了表单名称
2.  设置 href='#'
3.  将 javascript 操作放入 onclick
4.  使用了正确的 DOM 元素引用
5.  图像地图底部的固定区域坐标

# objective-c - 给定一个 webView，如何更改不同类文件中的 URL？

> ID：13212241
> 
> 赞同：0
> 
> 时间：2012-11-03T18:34:00.420
> 
> 标签：objective-c, macos, cocoa

我正在使用 Macgap：[https ://github.com/maccman/macgap/issues/34](https://github.com/maccman/macgap/issues/34)

在 Notice.m 类中将能够更改 webview 的 URL。我正在尝试以下但收到错误：

```
[self.contentView.webView setMainFrameURL:[self.url @"https://google.com"]]; 
```

建议指出我正确的方向？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T10:33:20.490

setMainFrameURL 需要一个字符串作为参数，[self.url @"https://google.com"] 没有意义，下面会更好：

```
[self.contentView.webView setMainFrameURL:@"https://google.com"]; 
```

另外，Notice 类不是合适的地方，也许是 WindowController，但我不知道你真正想要实现什么。

# css - 主页与网站上的任何其他页面不同

> ID：13212246
> 
> 赞同：-1
> 
> 时间：2012-11-03T18:34:49.480
> 
> 标签：css, html

> **可能重复：**
> [主页的加载方式与其他所有页面不同](https://stackoverflow.com/questions/13211562/homepage-loads-differently-than-every-other-page)

为什么我的主页宽度为 1024 像素。之后的每一页都有 1280 像素的宽度？即使是全屏，这也是它的加载方式。怎么为什么？

规格：浏览器：位于本地计算机上的 Chrome 页面。

```
root { 
    display: block;
}
#leftcol a{text-decoration: none;}
#leftcol{   
    left: 10%;
    width: 200px;
    height: 100%;
    margin-top: 0px;
    position: absolute;
    opacity:0.6;
    color: white;
    font-size: 2em;
}
#left-placeholder{
    height: 100%;
    width: 10%;
    float: left;
}
#left-pusher{
    height: 100%;
    width: 200px;
    float: left;
}
.left-column-item{
    background: url('images/bgnav.jpg');
    height: 33.334%;
    background-size: 100%;
    opacity:0.6;
    color: white;
}
.left-column-item:hover{
    background: url('images/bgnav.jpg');
    height: 33.334%;
    background-size: 100%;
    opacity: 1;
}
#content{
    text-align: center;
    color: white;
    font-size: 5em;
    height: 100%;
    width: 70%;
    float:left;
}

body{
    background: url('images/background.jpg');
    background-size: 100%;
    margin: 0;
    min-height: 100%;
    width: 100%}
html, body
{
    height: 100%;
}
//html for homepage:

<html>
    <head>
        <title></title>
        <LINK href="styles.css" rel="stylesheet" type="text/css">
        <script type ="text/javascript">

        </script>
    </head>
    <body>
            <div id ="leftcol">
                <a href="content/practice.html"><div class ="left-column-item">Practice!</div></a>
                <a href="content/AboutUs.html"><div class ="left-column-item">About Us!</div></a>
                <a href="content/contactUs.html"><div class ="left-column-item">Contact Us!</div></a>
            </div>
        <div id="left-placeholder"></div>
        <div id ="left-pusher"></div>
        <div id ="content">Math Practice Site<br>Welcome</div>
    </body>
</html>
// the practice page that is not loading correctly

    <!DOCTYPE html>
    <html>
        <head>
            <title></title>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <LINK href="../styles.css" rel="stylesheet" type="text/css">
            <script type ="text/javascript">

            </script>
        </head>
        <body>
                <div id ="leftcol">
                    <a href="practice.html"><div class ="left-column-item">Practice!</div></a>
                    <a href="aboutUs.html"><div class ="left-column-item">About Us!</div></a>
                    <a href="contactUs.html"><div class ="left-column-item">Contact Us!</div></a>
                </div>
            <div id="left-placeholder"></div>
            <div id ="left-pusher"></div>
            <div id ="content">Math Practice Site <br> hello</div>
        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T18:42:30.467

很难理解你的问题。无论如何，尝试添加强制性的“;” 在 CSS 文件的“body”定义中的“width: 100%”之后（就在“}”之前）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T18:44:56.410

快速浏览让我认为唯一真正的区别是对 css 页面的引用。页面的其余部分是否应用了适当的 CSS，或者整个 CSS 是否关闭？

如果是后者，尝试用`../`完整路径替换？

# c - Assembly 音频合成的数据结构

> ID：13212251
> 
> 赞同：4
> 
> 时间：2012-11-03T18:35:52.803
> 
> 标签：c, audio, assembly, synthesis

我正在编写一个简单的汇编合成器作为一个学习项目，我想实现现代合成器上的一些更高级的功能，即 ADSR 包络和使用正弦波的脉冲宽度调制。目前，我基本上是手动生成样本并将它们推送到音频输出，它有一个样本缓冲区，当缓冲区接近空时它会产生一个中断。

我坚持的是如何生成“连续”波形。目前，我为单个波实例（无论是锯齿波还是脉冲波）生成样本，然后简单地循环该波以生成连续输出。正如您可以想象的那样，这不能很好地扩展到 PWM 和 ADSR 包络。因此，我需要按需生成波形，并对其进行动态调整，例如调制脉冲宽度或音高（例如，用于连奏），但我不知道如何在内存中有效地表示它，以及如何在缓冲区已满时“暂停”波形生成，以及如何在中断出现时“恢复”。

我不是在寻求解决方案，而是在推动正确的思考方向:-)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T00:15:04.543

按需生成 wave 将适用于简单的 wave，但如果您以后想要添加额外的功能/dsps，您仍然需要某种缓冲区。

幅度的 ADSR 相当简单，因为您只是缩放波形，对于频率调制它有点复杂，这是一篇解释它的文章[链接](http://www.iquilezles.org/www/articles/fm/fm.htm)

你也可以查看[farbraush](https://github.com/farbrausch/fr_public) github，应该有一些不错的灵感给你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T19:17:50.783

看来您生成波形的方式是减法合成的合适方法。如果要调整波形的 PWM，则必须重新生成样本（或检索存储在内存中的预先计算的波形）。

在大多数情况下，如果音高发生变化，您还需要重建波表。您可以通过计算相对于波基波的读取指针增量来以更快的速度读取波，但这需要在波表中的值之间进行插值，并且可能会引入更复杂的波的混叠。

当然，在大多数情况下，生成的波不太可能恰好是 2^n 个样本。因此，在处理例程开始时，首先从前一个波形中复制样本，然后再将当前波形复制到输出缓冲区。

您不希望再生过程破坏您的 DSP 处理例程，因此我会在单独的内存位置构建更新的波形，并在准备好时将其复制过来。

ADSR 包络（减法）应在波生成后作为移动增益系数应用，而不是影响波本身。

希望有帮助:)

# android - 如何检查我的应用程序是否在 android 中运行（不是作为服务）？

> ID：13212257
> 
> 赞同：4
> 
> 时间：2012-11-03T18:36:33.097
> 
> 标签：android

**问题：** 我必须检查我的应用程序是否正在运行（当服务已经在后台运行时）。基于它我想要么开始特定的活动或应用程序。

**我尝试或想出但失败的事情我尝试** 检查当前正在运行的进程，并根据它尝试确定应用程序是否正在运行。失败原因：因为我已经在后台运行了服务，所以始终获取应用程序运行状态。

**可能的解决方案，但不确定在 android 中是否可行** 1\. 如果我们可以通过不同的名称（包名称）运行服务 2\. 在应用程序启动和关闭时分别将一些布尔值设置为 true 和 false。但这是一个好方法吗？

**编辑：：**

抱歉，如果我之前的描述不是很详细。我试图向你解释我到底想要达到什么目的。

每当用户点击通知。在检查我的应用程序是否启动后，我必须选择二选一（​​不包括服务，因为它们总是在后台运行）。1\. 如果我的应用程序已经启动，只需启动所需的活动。2.如果应用程序没有启动，那么我必须启动它，然后打开所需的活动。

例如，我收到一条消息到达通知。如果我的应用程序启动，我必须显示收件箱，否则我必须启动我的应用程序然后打开收件箱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-23T12:13:29.863

虽然这个问题很老，但我想发布我自己的答案，因为我花了太多时间寻找类似问题的解决方案。我的服务正在传输由视觉应用程序（相机、GPS 等）收集的数据。当用户关闭应用程序时，它必须保持打开状态，因为它需要在应用程序打开时传输尚未传输到服务器的数据。但它必须将其工作模式切换到更柔和一点（以节省电力）（当工作完成时它最终会自行关闭，但这是另一回事。首先，我尝试从主要活动向该服务发送一些命令当它即将关闭用户的意图时。但如果我只是在任务列表中轻弹我的应用程序（主页按钮长按，或其他手机上的其他按钮），这不起作用。我找到了另一个解决方案。我有`CommonData`应用程序的公共对象的类。我注意到如果我写类似的东西

```
CommonData.runObject = new Object(); 
```

在主要活动中，当应用程序关闭时`onCreate`，此`runObject`设置为 null。

因此，在我的服务中，我只需要告诉`CommonData.runObject != null`from`CommonData.runObject == null`以查看我的应用程序是否正在运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T19:51:56.333

我会试着猜测，因为你不清楚，正如哈桑所说，如果你正在运行一项服务，那就是你的应用程序正在运行，所以它可能是另一个与服务不同的应用程序，当你说应用程序时，你可能是谈论一个活动，可能在前台或后台。

在任何情况下，您都可以在服务中设置一个静态布尔值设置为 false，然后在您认为应用程序正在运行时根据应用程序的任何状态以及您自己对正在运行的应用程序的定义将其设置为 true 或 false . 您需要覆盖要启用它的状态并将布尔值设置为 true；以及要禁用它的位置，覆盖并设置为false。

在这里查看 Activity 生命周期，因为通常您希望通过 Activity 生命周期来衡量您的应用程序生命周期，因为它对用户来说是最可见的，但是，其他组件也有与此类似的其他生命周期，您也可以使用：

[http://developer.android.com/training/basics/activity-lifecycle/index.html](http://developer.android.com/training/basics/activity-lifecycle/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T19:23:03.437

当您的服务在后台工作时，您的应用程序真的在运行！如果您想检查您的应用程序的任何活动是前台还是后台，我认为您可以使用活动的生命周期方法并在[`Application`](http://developer.android.com/reference/android/app/Application.html)类中设置布尔值，或者您可以获得列表在您的服务中运行任务并检查您的任何活动是否正在运行：

```
ActivityManager activityManager = (ActivityManager)Monitor.this.getSystemService (Context.ACTIVITY_SERVICE); 
List<RunningTaskInfo> activitys = activityManager.getRunningTasks(Integer.MAX_VALUE); 
isActivityRunning = false; 
for (int i = 0; i < activitys.size(); i++) { 
    if (...) {
        isActivityRunning = true;
        break;
    }
} 
```

但是看到[这个](https://stackoverflow.com/a/5862048/1043882)。

其他：

[检查 Activity 是否从 Service 运行](https://stackoverflow.com/questions/12172092/check-if-activity-is-running-from-service)

[如何确定我的一项活动是否在前台](https://stackoverflow.com/a/5221315/1043882)

[发现 android 活动是否正在运行](https://stackoverflow.com/a/10772181/1043882)

# c# - 为什么是列表 .NET Core 中缺少 .ForEach？

> ID：13212259
> 
> 赞同：7
> 
> 时间：2012-11-03T18:36:44.493
> 
> 标签：c#, .net, windows-8, windows-store-apps

我正在移植一些代码以使用 Windows 应用商店应用程序，并注意到该`List<T>.ForEach`方法未包含在 .NET Core 框架（Windows 应用商店应用程序引用的框架）中。

MSDN 确认商店应用程序不支持它。

我可以轻松绕过丢失的方法，但此时我只是好奇它为什么会丢失。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-03T18:38:50.753

> 我可以轻松绕过丢失的方法，但此时我只是好奇它为什么会丢失。

[*我怀疑这被认为是*](http://blogs.msdn.com/b/ericlippert/archive/2009/05/18/foreach-vs-foreach.aspx)不必要的臃肿，可以说最好不在框架中开始，因为[using`foreach`通常更干净](http://blogs.msdn.com/b/ericlippert/archive/2009/05/18/foreach-vs-foreach.aspx)*。*

 *实际上，从该博客文章底部的链接中，MSFT 在[MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/758f7b98-e3ce-41e5-82a2-109f1df446c2)中提供了答案：

> `List<T>.ForEach`已在 Metro 风格应用程序中删除。虽然该方法看起来很简单，但当列表被传递给 ForEach 的方法改变时，它有许多潜在的问题。相反，建议您简单地使用 foreach 循环。*

# google-app-engine - 通过 XMPP 从 GAE 连接到 Google Talk 时，在 fromJid 中转义字符。

> ID：13212267
> 
> 赞同：2
> 
> 时间：2012-11-03T18:38:16.600
> 
> 标签：google-app-engine, xmpp

我有一个基于 GAE 的聊天应用程序。用户之间的内部聊天消息通过谷歌频道 API 传递。由于所有用户都已经拥有 google ID，我还想通过 XMPP 与用户在 google talk 上进行交流。

为此，我需要将在我端发起聊天的用户的用户 ID（电子邮件）传递给 google talk，以便当消息返回时，我可以通过他的频道将其路由回该用户。

因此，我需要发送邀请以及带有 fromUser JID 的后续消息

```
xmpp.sendInvitation(toUser, fromUser); 
```

和发送消息的 fromUser JID 相同。

通读（[https://developers.google.com/appengine/docs/java/xmpp/overview](https://developers.google.com/appengine/docs/java/xmpp/overview)），我看到 Google 支持 fromJID 的两种格式：

```
your_app_id@appspot.com 
```

或者，

```
anything@your_app_id.appspotchat.com 
```

第一个显然行不通，但第二个看起来很有希望。

问题是，我需要将完整的电子邮件地址作为“任何内容”部分传递，因为这是唯一标识符（我可以拥有 jack@jill.com 和 jack@hill.com 作为用户。）

所以，我需要传递一些类似于 jack@jill.com@myapp.appspotchat.com 的内容

根据（[http://xmpp.org/extensions/xep-0106.html](http://xmpp.org/extensions/xep-0106.html)），我应该能够做到这一点，并转义 @ 字符。

但是，谷歌似乎并不喜欢它。如果我是否转义 @ 符号，我会得到一个无效的 JID 异常。

我试过了

```
email.replace("@", "\40"); 
```

和

```
email.replace("@", "\\\40"); 
```

我还注意到，在我上面链接的谷歌文档中，它说，

> 应用程序还可以使用以下格式的自定义地址，其中任何内容都是包含字母、数字和连字符的任何字符串

这是否意味着他们不支持该扩展名的转义字符？还是我做错了什么？有没有其他方法可以逃脱我失踪的他们？

我可以采取其他几条路线，但我也无法让其中任何一条工作，所以如果有人有建议，我将不胜感激。

1.  将用户名作为节点的一部分传递，将域作为资源传递。但是，当我尝试这个时，我可以发送带有完整 JID 的邀请和后续消息，例如 jack@myapp.appspotchat.com/jill.com，但是当消息从谷歌返回时，JID 被剥离并返回作为一个裸JID。
2.  以某种方式维护有关对话的一些元数据，本质上是维护可以来回传递的聊天的会话信息，但我不确定这是否可能，如果是的话，我还没有找到任何关于如何做到这一点的线索工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:50:22.577

不幸的是，我们只支持文档建议的字母、数字和连字符。这甚至意味着我们不接受除字母、数字和连字符以外的*转义*字符，即使 XEP-0106 允许。这更多是 Google Talk 所基于的某些系统的内部限制，而不是其他任何东西。

也就是说，我将努力使我们的文档对此更加明确。

# module - 如何在opencart中添加模块

> ID：13212268
> 
> 赞同：5
> 
> 时间：2012-11-03T18:38:31.797
> 
> 标签：module, opencart

我已经搜索了几个小时来了解如何在 opencart 中添加模块。我不知道我应该在哪个目录上传模块。在 wordpress 中确实很清楚，但在 opeancart 中我无法理解。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:46:16.383

添加模块的一个非常简单的方法是：

1.  复制模块内的上传文件夹，然后简单地将其中的所有文件夹（例如管理员、系统）粘贴到您的 opencart 根目录，它会询问您是否要覆盖文件，选择是（因为这些将是新文件）。

2.  转到管理面板>模块，然后单击模块名称下的安装

享受你将安装模块！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-01T10:28:27.313

Opencart 是非常简单的 MVC 结构化开发代码。

如果您添加了新的扩展模块，那么首先点击此链接并搜索现成的扩展。按照此说明下载此扩展程序

只需复制并粘贴完全扩展源并粘贴与我们的文件夹结构匹配并放置它们。

[http://www.opencart.com/index.php?route=extension/extension](http://www.opencart.com/index.php?route=extension/extension)

在您可以通过管理器扩展功能使用管理面板进行编辑之后

管理 > 扩展 > 模块

如果付款相关模块则

管理 > 付款

另外，您还可以使用以下 opencart 代码结构创建新扩展。

按照这个链接

[http://code.tutsplus.com/tutorials/from-beginner-to-advanced-in-opencart-module-development--cms-21873](http://code.tutsplus.com/tutorials/from-beginner-to-advanced-in-opencart-module-development--cms-21873)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T18:49:03.907

没有一个目录。模块文件位于多个目录中。您需要做的是上传保持结构的模块文件。对于大多数 FTP 客户端，您只需将“上传”文件夹的内容上传到 Web 服务器的文档根目录（`public_html`或`httpdocs`通常`htdocs`）即可合并文件夹

# php - WSO2 支持 php 框架安装

> ID：13212271
> 
> 赞同：1
> 
> 时间：2012-11-03T18:39:08.387
> 
> 标签：php, installation, wso2

我无法安装 wso2 php 框架，我在搜索 dll 时遇到问题，即使它们位于 PATH 变量中，也无法访问 php5ts.dll 版本

# mysql - ON DUPLICATE KEY UPDATE 导致外键约束错误

> ID：13212272
> 
> 赞同：3
> 
> 时间：2012-11-03T18:39:10.677
> 
> 标签：mysql, foreign-keys, duplicates, constraints

我搜索了 StackOverflow，但找不到特定问题的答案。

最近，我非常喜欢使用“INSERT INTO...ON DUPLICATE KEY UPDATE”来使用列表更新记录。但是，我对以下查询有疑问：

```
INSERT INTO itens (prod_id, qtd) VALUES (410, 1),(442, -1)
ON DUPLICATE KEY UPDATE qtd = qtd + VALUES(qtd) 
```

这导致错误：“无法添加或更新子行：外键约束失败。”

这是有问题的表的结构。“carrinho_id”是一个外键。我对我没有尝试用外键做任何事情这一事实感到困惑。我只是想更新数量。

```
CREATE TABLE IF NOT EXISTS `itens` (
 `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
 `carrinho_id` int(10) unsigned NOT NULL DEFAULT '1',
 `prod_id` int(10) unsigned NOT NULL DEFAULT '1',
 `qtd` int(12) NOT NULL DEFAULT '0',
 PRIMARY KEY (`id`),
 KEY `carrinho_id` (`carrinho_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=229 ; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T18:39:10.677

我找到了自己问题的答案，并认为它可能会帮助处于类似情况的其他人。

问题是尝试使用插入进行更新时，您必须考虑插入的所有约束。任何未定义的值都必须具有默认值。我有一个“carrinho_id”的默认值，但它是一个已经被删除的记录，因此我得到了错误。

事实证明，这不是我唯一的问题。为了让 MySql 检测到重复，您必须指定一个只能是唯一的行。由于我省略了“id”，它只是添加了一个新行，从零减去数量的值。同样重要的是要注意，只有当列无符号时，才能以这种方式减去数量。

最后，我成功地指定了主键和外键：

```
INSERT INTO itens (id, carrinho_id, prod_id, qtd) VALUES (225, 75, 410, 1),(226, 75, 442, -1)
ON DUPLICATE KEY UPDATE qtd = qtd + VALUES(qtd) 
```

# android - 不同 SActivite 中 SharedPreferences 的实例共享数据的不一致视图

> ID：13212273
> 
> 赞同：0
> 
> 时间：2012-11-03T18:39:12.210
> 
> 标签：android, sharedpreferences, android-holo-everywhere

我正在使用 SharedPreferences 并且一切正常。

然后我开始调整 UI。我将 HoloEverywhere 添加为依赖项并扩展了 SActivity 而不是 Activity。现在所有 SharedPreferences 都不起作用。

```
mPrefs = mCtx.getSharedPreferences(ctx.getPackageName(),
Context.MODE_PRIVATE);
mEditor = mPrefs.edit(); 
```

这就是我最初使用 android 的 SP 初始化我的 SP 的方式。我注意到 HE 还扩展了 SP，因此我将代码更改为使用 HE 的 PreferenceManager 和 SharedPreferences。

```
mPrefs = PreferenceManager.getDefaultSharedPreferences(ctx);
mEditor = mPrefs.edit(); 
```

但是，我的任何操作都没有保存到 SP 中。我在这里做错什么了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T03:34:15.790

事实证明，我观察到的行为确实是意想不到的行为。[举报](https://github.com/ChristopheVersieux/HoloEverywhere/issues/183)后，作者已修复。向他致敬。

# java - 如何让函数返回“Double”或“Int”？

> ID：13212274
> 
> 赞同：0
> 
> 时间：2012-11-03T18:39:11.980
> 
> 标签：java, function, integer, double, return

我一直在为学校做一个项目。基本上你必须用几个扫描仪制作一个脚本。例如：

*   从整数中返回相应的 ASCII 码，因此从扫描仪中返回
*   通过给定一个双精度来返回球体的表面。

我现在想为这两个函数创建一个 Scanner 类。但是 1 必须是整数，第二个必须是双精度数。如何确保函数返回双精度数或整数。

我正在使用以下代码：

```
public static [Heres what goes wrong] vrager (String type, String tekst) {

Scanner vraag = new Scanner(System.in);

System.out.println(tekst);

type variable = vraag.next();

return variable; 
```

所以通过调用函数就像：`seconden = (vrager("int", "How many seconds?:));`

但是，如果我想让该函数也为双打工作，它会出错，因为该函数不希望返回双打。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-03T18:41:55.723

A`double`可以表示每个可能的`int`值，因此返回一个双精度值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T18:46:10.073

您不能有两个具有相同名称、相同参数但类型不同的函数。至少有两种方法可以实现它，你可以这样做：

```
public static Number vrager (String type, String tekst) {
    ...
    Double ret=....
    --- or ---
    Integer ret....
    return ret;
} 
```

查看类[Number的文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Number.html)

另一种方法是使用泛型： [如何使方法返回类型泛型？](https://stackoverflow.com/questions/450807/java-generics-how-do-i-make-the-method-return-type-generic)

# string - 如何在 XML/HTML 中查找重复元素的结构

> ID：13212286
> 
> 赞同：3
> 
> 时间：2012-11-03T18:41:18.677
> 
> 标签：string, algorithm, text

我目前正在尝试解决编程问题。我试图在任何 HTML 页面中查找重复的结构，并试图检索这些元素的值。

例如，我有一个带有重复元素的 HTML 页面，如下所示：

```
<html>
<body>
  <ul>
     <li>green</li>
     <li>orange</li>
     <li>red</li>
  </ul>
</body> 
```

在这段代码中，我想检测是否存在重复块（“li”项），并且我想提取它们的值。另一个 HTML 示例：

```
<table>
   <tr>
      <td>1</td>
      <td>John</td>
   </tr>
   <tr>
      <td>2</td>
      <td>Simon</td>
   </tr>
</table> 
```

在此示例中，我想检测结构是否重复，并从中获取值 [1,John] 和 [2,Simon]。

我的问题是：是否有一个简单的算法来做这样的事情，或者，如果没有，你将如何处理这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T19:52:25.887

下面显示了一个相当基本的 python 程序，它检测重复的 tr-td-td 标签序列和重复的 td 标签。将第二个 html 示例保存在 file`xml.html`中，程序会打印出：

```
tr.td.td 

td 1
td John
tr.td.td 

td 2
td Simon
Counter({'td': 4, 'tr.td.td': 2, 'table.tr.tr': 1}) 
```

```
#!/usr/bin/env python
from xml.etree import cElementTree as ET
from collections import Counter

def sot(r, depth):
    tags = r.tag
    for e in r.getchildren():
        tags += '.' + sot(e, depth+1)
    r.tail = tags
    cc[r.tail] += 1
    return r.tag

def tot(r, depth):
    if cc[r.tail] > 1:
        print r.tail, r.text
    for e in r.getchildren():
        tot(e, depth+1)

cc = Counter()
p=ET.parse ("xml.html")
sot(p.getroot(), 0)
tot(p.getroot(), 0)
print cc 
```

# xcode - 是否有在 Xcode 中进行块注释的快捷方式？

> ID：13212288
> 
> 赞同：175
> 
> 时间：2012-11-03T18:41:31.097
> 
> 标签：xcode, comments

我正在编写 ANSI 兼容的 C 代码，因此我不能使用 ( `//`) 行注​​释。我正在使用 Xcode。`/**/`在 Sublime Text 和 Eclipse 中，以及我认为大多数其他 IDE 中，行注释和块注释 ( )都有单独的键盘快捷键。但是，我在 Xcode 中看不到这一点——事实上，我什至看不到添加块注释的菜单选项。Xcode 根本不支持它吗？如果是这样，那肯定是一个蹩脚的决定。

* * *

## 回答 #1

> 赞同：259
> 
> 时间：2013-04-16T14:10:59.783

试试`command`+ `/`。

因此，您只需突出显示要注释掉的代码块并按下这两个键。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2016-08-15T13:40:40.373

**更新 Xcode 12 / macOS 大苏尔：**

目前，Xcode 的 Mac App Store 版本的[BlockComment](https://apps.apple.com/us/app/blockcomment-for-xcode/id1246672247?mt=12)没有显示在 Xcode > Preferences > Key Bindings 下。此问题已[解决](https://github.com/superk589/BlockComment/pull/2)，可以使用[GitHub 版本代替。](https://github.com/superk589/BlockComment#from-this-repository)

**2017 年 6 月更新：**

由于我很懒，并且没有完全实现我的解决方案，我四处搜索并找到[了 BlockComment for Xcode](https://apps.apple.com/us/app/blockcomment-for-xcode/id1246672247?mt=12)，这是一个最近发布的插件（**2017 年 6 月**）。不要打扰我的解决方案，这个插件工作得很好，我强烈推荐它。

**原始答案：**

以上都不适用于**Xcode 7**和**8**，所以我：

1.  **使用AppleScript**创建**Automator**服务

***   **确保选中**“输出替换所选文本”

    ***   输入以下代码：

    ```
    on run {input, parameters}
    return "/*\n" & (input as string) & "*/"
    end run 
    ```**** 

 ****[![在此处输入图像描述](../Images/684b382253b655273047d19b83a03893.png)](https://i.stack.imgur.com/N7K8u.gif)

现在，您可以通过 Xcode - Services 菜单访问该服务，或者右键单击要评论的选定代码块，或者在 System Preferences 下为其提供快捷方式。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2016-09-30T15:30:13.883

现在使用 xCode 8，您可以：

`⌥</kbd> + `⌘</kbd> + `/```

自动生成文档注释。

来源：[https ://twitter.com/felix_schwarz/status/774166330161233920](https://twitter.com/felix_schwarz/status/774166330161233920)

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2014-04-17T07:53:39.030

现在有一个 Xcode 插件允许这样做：[CComment](https://github.com/flexih/Xcode-CComment "C评论")。

安装它的最简单方法是使用令人惊叹的[Alcatraz 插件管理器 for Xcode](http://alcatraz.io/)。

**编辑**Apple 遗憾地（并且错误地，恕我直言）用 Xcode 8 淘汰了旧的插件模型。新的插件系统非常有限，但应该允许再次开发这样的插件。对于任何对此感兴趣的人，请观看[WWDC 2016 session 414](https://developer.apple.com/videos/play/wwdc2016/414/)。此外，请为您想编写或查看的插件提交 API[雷达文件。](https://bugreport.apple.com/)

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2016-07-14T08:07:20.750

**更新：Xcode 8 更新**

现在使用 xcode 8，您可以执行以下操作：

`⌥</kbd> + `⌘</kbd> + `/```

**注意：以下方法不适用于 xcode 版本 => 8**

将块注释功能添加到 mac OS X 的任何编辑器的非常简单的步骤

1.  打开**自动机**
2.  选择**服务**
3.  搜索**Run Shell Script**并双击它

> 在 textarea 中添加以下小程序

**`awk 'BEGIN{print "/*"}{print $0}END{print "*/"}'`**

[![用于块注释的苹果脚本](../Images/2be263e85ccd9ccc7348762fa748def2.png)](https://i.stack.imgur.com/oV17F.png)

4.  将脚本另存为**`Block Comment`**

> 添加键盘快捷键

打开**System Preference > Keyboard > Shortcuts**，通过单击**`+`**并右键添加新的快捷方式，即**`Block Comment`**与您在第 4 步中为 applescript 提供的名称相同。添加您的**键盘快捷键**，然后单击**添加**按钮。

[![新的键盘快捷键](../Images/6abdff6c64c82aeeba6cfb6360b5c551.png)](https://i.stack.imgur.com/1Yyz7.png)

现在您应该能够在 Xcode 或任何其他编辑器中使用块注释，选择一些文本，使用快捷键来阻止注释任何代码行或右键单击，上下文菜单和您给该脚本的名称应该显示在附近底部。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2021-10-27T07:04:59.850

看起来在 macOS Monterey 上，Xcode 块注释切换键组合已更改为 `command ⌘</kbd> + `'``

编辑：Xcode 13.2 已返回到之前的组合键。 `command ⌘</kbd> + `⇧</kbd> + `7```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2017-03-23T07:38:18.780

我稍微修改了[Nikola Milicevic的代码，所以如果代码已经被注释，它也会删除注释块：](https://stackoverflow.com/users/5088677/nikola-milicevic)

```
on run {input, parameters}
    repeat with anInput in input
        if "/*" is in anInput then
            set input to replaceText("/*", "", input as string)
            set input to replaceText("*/", "", input as string)

            return input
            exit repeat
        end if
    end repeat
    return "/*" & (input as string) & "*/"
end run

on replaceText(find, replace, textString)
    set prevTIDs to AppleScript's text item delimiters
    set AppleScript's text item delimiters to find
    set textString to text items of textString
    set AppleScript's text item delimiters to replace
    set textString to "" & textString
    set AppleScript's text item delimiters to prevTIDs
    return textString
end replaceText 
```

希望这会对某人有所帮助。[![在此处输入图像描述](../Images/250d3d663c2957201d9a1902b7c14c95.png)](https://i.stack.imgur.com/K4FIE.gif)

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2019-06-21T10:13:11.940

在 XCode 10（及更高版本）中使用`Option`+ `Command`+ `Slash`（即 ⌥ + ⌘ + /）

为您的函数或类写一个漂亮的评论，如下所示：

[![文档注释的 XCode 截图](../Images/67ebc509437e6a3763d25bd6c0a5f652.png)](https://i.stack.imgur.com/0PpWU.png)

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2014-12-10T17:28:18.203

你可以很容易地自己分配这个，这里是一步一步的解释。

1.) 在您的 xCode .m 文件中键入以下内容，只要它是一个空白区域，您在哪里键入都没有关系。

```
/*
*/ 
```

2.）突出显示两行代码，然后拖放到“代码片段库面板”区域（它位于实用程序面板的底部）。如果操作正确，将显示一个浅蓝色加号。

![在此处输入图像描述](../Images/4e38010057f88888707ce408ce800be3.png)

3.) 松开鼠标按钮后，会弹出一个新窗口，要求您添加名称、快捷方式等；如图所示。如您所见，我将快捷方式添加到 //。所以每次我想要一个块注释时，我都会输入//。希望这可以帮助

![在此处输入图像描述](../Images/cae5c008790e7d515229cfae64301fee.png)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-03-18T00:20:50.027

我设法通过一个自动化任务使它正常工作，并使用快捷方式将其绑定到组合键 ctrl+option+command+b。我所要做的就是突出显示我想要在 xcode 中注释块的代码，然后按上面的键，然后使用 /* ... */ 将选定的文本块注释掉。

我使用代码折叠相当多，所以我想要这个功能的原因是我可以轻松折叠一段注释代码......代码使用//不会折叠以通常的方式注释。

我不熟悉使用 mac automator，但我只是按照以下 wwdc 视频中的 instrux

在 WWDC 2012 视频 Session 402 - Working Efficiently with Xcode（大约 6 分钟后）中描述了如何使用 Mac OSX Automator 添加服务来操作选定的文本。视频中显示的示例是使用 shell 命令 sort 和 uniq 删除所选文本中的重复项。使用这种方法你做同样的事情，但你输入以下命令而不是他在视频中所做的

awk 'BEGIN{print"/ *"}{print $0}END{print"* /"}'

（请注意，上一行中有 2 个星号，由于某种原因没有显示......它们确实显示在下面的屏幕截图中，因此将其复制为正确的输入命令）

你最终应该像这样运行一个shell脚本

![截屏](../Images/010e477cf3cb5ee8aa8846b0510933fa.png)

对于任何给定的选定文本，这将在前后放置注释分隔符。

当你保存它时，你应该可以选择命名它（我称之为块注释）并分配一个键盘快捷键

然后你应该能够打开xcode，选择一些文本，右键单击，上下文菜单，你给这个脚本的名字应该显示在底部附近

只需单击名称，脚本将运行并阻止注释所选代码或使用您分配的键盘快捷键。

希望这可以帮助

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-02-06T00:22:19.790

如果您的键盘布局要求您同时按下 shift 键（即德语键盘上的 cmd + shift + 7），则快捷方式将不起作用并打开帮助菜单。

苹果公司的“Think Different”在最大程度上......

如果您转到 Xcode > Preferences > Key Bindings，您可以定义自己的快捷方式使其工作：

[![在 Xcode 中更改注释选择键映射](../Images/f0b5101e2aa152823bc4efbd015fd630.png)](https://i.stack.imgur.com/C17Vp.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-06-08T02:19:31.673

`Cmd`++`Shift`将`7`注释选定的行。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-06-25T19:58:17.950

xcode 上的帮助菜单前有一个符号，其中包含编辑用户脚本。在评论部分下的 Un/Comment Selection 上更改我的 $cCmt = "//"; 到我的 $cCmt = "#"; 或者任何你的 IDE 可以使用的东西。然后通过选择行和命令 + / （这是我的 xcode 默认值），您可以注释和取消注释选定的行。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-03-02T11:59:18.363

如果您正在寻找一种将自动生成的评论从`Add Documentation`操作转换的方法（可在`cmd`- `shift`-下`/`找到），您可能会发现它也很有用：

```
function run(input, parameters) {
  var lines = input[0].split('\n');
  var line1 = lines[0];
  var prefixRe = /^( *)\/\/\/?(.*)/gm;
  var prefix = prefixRe.test(line1) ? line1.replace(prefixRe, "$1") : ""

  var result = prefix + "/*\n";  
  lines.forEach(function(line) {
    result += prefix + line.replace(prefixRe, "$2") + '\n';
  });
  result += '\n' + prefix + ' */';
  return result;
} 
```

休息与@Charles Robertson 回答中的相同：

[![自动机](../Images/cfcfb60389cf143b5dd8b31ccba48c87.png)](https://i.stack.imgur.com/xqtnu.png)

[![服务](../Images/1839aa27202b6ae3348c4f38799f9710.png)](https://i.stack.imgur.com/J3gVA.png)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2022-01-22T18:11:49.503

根据 Baig 的回复，我创建了一个快捷方式来评论和取消评论某行的一部分。这适用于 Xcode 13.2.1 和 MacOS 12.0。

1.  打开自动机
2.  选择`Quick Action`
3.  搜索`Run AppleScript`
4.  `text`在`Workflow receives current`下拉列表中选择
5.  查看`Output replaces selected text`
6.  添加此脚本

```
on run {input, parameters}
    set s to (input as string)
    if s contains "/*" then
        return text 3 thru -3 of s
    else
        return "/*" & s & "*/"
    end if
end run 
```

7.  点击播放并另存为`Block Comment`
8.  在设置 -> 键盘 -> 快捷方式上，选择`App Shortcuts`并点击`+`
9.  使用脚本标题作为`Menu Title`（即“块评论”）
10.  选择所需的快捷方式（我做了 command+option+shift+/）
11.  在 Xcode 上选择要评论的文本并按下快捷键
12.  `/*`要取消注释，请从to中选择文本`*/`并按快捷键

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-12-17T14:28:25.473

@尼古拉·米利切维奇

这是缩进问题的屏幕截图。这是非常小的，但奇怪的是，在您的示例视觉中，它似乎工作得很好。

我还添加了我的 Automator 设置的屏幕截图...

谢谢

[![在此处输入图像描述](../Images/d17c4c212246e74731d16e3632affc32.png)](https://i.stack.imgur.com/MrDhl.png)

[![在此处输入图像描述](../Images/1a7534fc89435a785c1787c1451e9d80.png)](https://i.stack.imgur.com/hL20g.png)

**更新：**

如果我将脚本稍微更改为：

[![在此处输入图像描述](../Images/94428cf6a561f94a9d753c520f9b634e.png)](https://i.stack.imgur.com/ngBvS.png)

然后在 XCode 中选择整行，我得到了想要的结果：

[![在此处输入图像描述](../Images/c4de7ca53a8dcb93fca3325cf24d8886.png)](https://i.stack.imgur.com/vLDOc.png)

[![在此处输入图像描述](../Images/d2774b5d645a2b2bb5073890ef838c1a.png)](https://i.stack.imgur.com/AbyF4.png)

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2016-08-03T16:29:58.293

在 Macbooks 中，您可以使用`shift`++`cmd`来`7`评论以前突出显示的块

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2020-03-14T15:56:18.093

在 xcode 11.1 快速 5.0

选择要添加块注释的代码，然后按 `⌥</kbd> + `⌘</kbd> + `/```

[![在此处输入图像描述](../Images/2b70600e86a3e51772421bb0b1ac2e75.png)](https://i.stack.imgur.com/55jox.png)

* * *

## 回答 #19

> 赞同：-12
> 
> 时间：2017-04-06T09:00:52.933

好像已经有很多人回答这个问题了。

在 Swift 3.0 中，单行注释是在前面加上双斜杠：“//”；多行放置“/* .... */”。

希望这可以帮助。****

# c++ - 两个方向的 Thrift RPC

> ID：13212290
> 
> 赞同：3
> 
> 时间：2012-11-03T18:41:49.997
> 
> 标签：c++, thrift

我正在寻找一种方法来创建从服务器到客户端的 rpc 调用。这可以使用节俭吗？换句话说，我想在不创建另一个 TSocketServer 的情况下从两个方向调用 RPC。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:05:49.047

Thrift 中的双向通信没有很好的文档记录。这不是“正常”的节俭用法。

我最近回答了一个类似这样的问题，但针对的是 Go 语言。我希望您可以在那里使用我的答案作为 C++ 解决方案的灵感。[Go 中来自客户端和服务器的 RPC](https://stackoverflow.com/questions/13166004/rpc-from-both-client-and-server-in-go/13184355)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T18:50:16.760

我个人不是节俭专家，但当它仍处于孵化器阶段时，我确实看过它。
并且对于许多其他 RPC 机制，我没有找到一种用 thrift 来处理异步回调的方法。
所以每当我需要这个时，我仍然坚持使用 corba。[陶](http://www.cs.wustl.edu/~schmidt/TAO.html)是我的最爱之一。
但如果有人能证明我错了，我将不胜感激。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-03T18:53:13.373

TCP 连接是全双工的 -> 您在客户端和服务器端都有描述符。只需写信给他们，例如使用系统调用

我敢肯定，在您序列化 thrift 消息后，您可以像普通的 unsigned char* 一样发送它。

# c - 循环提前结束，为循环计数器产生负值（当 i=1；++i 时）

> ID：13212292
> 
> 赞同：0
> 
> 时间：2012-11-03T18:42:06.243
> 
> 标签：c, loops, for-loop, series, floating

这是我的第一个 C 作业，所以我的错误对你来说可能很明显，如果是这种情况，我提前道歉。然而，这对我来说似乎很不寻常（不仅仅是工作，而且有一些奇怪的输出），所以我想我应该四处问问。我正在尝试计算交替谐波系列的总和。这是应该做的函数（它返回一个双精度）。

```
 double series(void){

    double sum = 0.0;
    int i,x;

    for (i = 1; i > 0 ; i = i+1)
    {

            if (sum - (sum - 1.0/x) == 0 || sum - (sum + 1.0/x) == 0)
            {
                    printf("To infinity and beyond... almost!\n");
                    return sum;
            }
            else if (i % 2 != 0)
            {
                    sum = sum - 1.0/x;
            }
            else if (i % 2 == 0)
            {
                    sum = sum + 1.0/x;
            }
            else
            {
            printf("How did I end up here?\n");
            }

    }

    printf("I ESCAPED THE LOOP\n");
    return 1.0*i; 
```

}

当我运行程序时，它总是在最后几行结束（打印我 ESCAPED THE LOOP 的行，所以 for 循环结束，而它应该运行直到满足第一个 if 条件。最后一行并不意味着达到）。并且输出——函数的返回值——对于 i 是 -21473822648.000000。一个负数（实际上 main 中的输出是正数，但它在那里乘以负一，并且删除 -1.0 只不过将符号更改为不应该的符号），当唯一改变的事情我应该在 for 循环介绍中为 i=1 和 ++i 。这是怎么发生的？main 唯一要做的就是调用函数，将双精度值设置为函数返回值的负数并打印该值。

而且我刚刚意识到 if() 语句中的操作顺序可能是错误的，但是我在所有内容周围都加上了额外的括号来修复它。它没有效果。

哦，这实际上不是全部问题，我实际上应该找出哪些是最好和最差的求和顺序。我只是想看看我是否可以编写一个程序来做到这一点。任何指向浮点算术相关材料等的链接将不胜感激。

在此先感谢所有人以及任何人可能有的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:48:48.203

使用更正的功能（[根据评论](https://stackoverflow.com/questions/13212292/loop-ends-early-produces-negative-value-for-a-loop-counter-when-i-1-i#comment17991279_13212292)）

```
double series(void){

    double sum = 0.0, x;
    int i;

    for (i = 1; i > 0 ; i = i+1)
    {
        x = 1.0*i;
        if (sum - (sum - 1.0/x) == 0 || sum - (sum + 1.0/x) == 0)
        {
            printf("To infinity and beyond... almost!\n");
            return sum;
        }
        else if (i % 2 != 0)
        {
            sum = sum - 1.0/x;
        }
        else if (i % 2 == 0)
        {
            sum = sum + 1.0/x;
        }
        else
        {
            printf("How did I end up here?\n");
        }
    }
    printf("I ESCAPED THE LOOP\n");
    return 1.0*i;
} 
```

为了消除使用未初始化变量的未定义行为，让我们看看会发生什么。

的值`sum`始终介于`-1.0`和之间`0.0`，接近（模浮点舍入）`-log 2`（自然对数）。

`i`是一个`int`。根据你得到的结果，我们可以推断（不是严格逻辑，但排除合理怀疑）`int`你的平台上 s 有 32 位，因此`i < 2^31 = 2147483648`. 因此，要添加或减去的项`1.0/i`的量级大于`2^(-31)`。由于`double`s 通常具有 53 位精度，因此每个加法/减法的变化`sum`足以使

```
sum - (sum - 1.0/x) == 0 || sum - (sum + 1.0/x) == 0 
```

永远不会成为真的。因此循环不会以该条件结束，`i`而是递增直到达到`INT_MAX`，然后再增加一次。

最后一个增量溢出。有符号整数的溢出会调用未定义的行为，但在这种情况下，会发生回绕的常见行为，`i`然后包含 value `INT_MIN = -2147483648`。然后循环条件`i > 0`评估为假，循环结束而不`return`从函数中获取。

# ruby-on-rails-3 - 是否可以用哈希/符号替换字符串（：created_at）

> ID：13212296
> 
> 赞同：0
> 
> 时间：2012-11-03T18:42:13.897
> 
> 标签：ruby-on-rails-3, activerecord

是否可以以散列格式编写此行（：created_at）

```
User.where("created_at > ?", Time.now - 1.month) 
User.where("created_at >= ?", DateTime.parse('2012-10-31') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T18:54:53.273

基本的 ActiveRecord 不支持。然而，底层查询生成库（称为 AREL）确实如此。然而，简单的 AREL 写起来相当不方便，这正是[Squeel](https://github.com/ernie/squeel)发挥作用的地方。它扩展了 ActiveRecord 并提供了扩展的 Ruby DSL 来指定条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T18:53:07.927

看看[Squeel Gem](https://github.com/ernie/squeel)

您将能够编写如`Article.where{created_at >= 2.weeks.ago}`文档中所示的代码。

它不完全是哈希格式，但它确实比您的示例更优雅。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-01T10:07:57.457

I'm trying to get away from meta_where/squeel since it's not supported anymore. The only viable solution currently that I see, it's to dig into AREL:

```
User.where(User.arel_table[:created_at].gt(1.month.ago))
User.where(User.arel_table[:created_at].gteq(DateTime.parse('2012-10-31')) 
```

You can put all your queries/scopes in a separate class from the model and encapsulate a lot of verbosity, look here:

*   More info: [http://robots.thoughtbot.com/using-arel-to-compose-sql-queries](http://robots.thoughtbot.com/using-arel-to-compose-sql-queries)
*   Predicates: [https://github.com/rails/arel/blob/master/lib/arel/predications.rb](https://github.com/rails/arel/blob/master/lib/arel/predications.rb)

You get a lot of benefit with this. All your scopes merging will work beautifully because arel will handle the aliasing for you.

On a personal note, I'm now in the Rails 3.0.20 ghetto because I rely heavily on meta_where that is not compatible with Rails 3.1+. I'm slowly replacing all the meta_where to arel.

# c - C 中的 const 给出不可预测的输出

> ID：13212298
> 
> 赞同：4
> 
> 时间：2012-11-03T18:42:24.097
> 
> 标签：c, constants

> **可能重复：**
> [C 中的常量和指针](https://stackoverflow.com/questions/945640/constants-and-pointers-in-c)

我有这段小代码。我正在使用 gcc 编译器：

```
#include <stdio.h>

int main()
{
    const int a=10;
    int *d;
    d=&a;
    *d=30;
    printf("%d %d\n",a,*d);
    return 0;
} 
```

它在编译时发出警告：

> “赋值从指针目标类型中丢弃限定符”

但没有错误。输出为：30 30

那么它是否违背了维护 const 变量的目的，该变量的值在整个程序执行过程中都是固定的（如果我错了，请纠正我）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T18:46:03.053

`const`不是保证。这只是一个承诺。承诺可以被打破。发生这种情况时编译器会发出警告，但不需要阻止它，因为在某些情况下绕过 const 可能有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T20:05:08.313

The above behavior is undefined. As [this](http://codepad.org/YV2QA1PU) example shows, you can get different values as well. Explanation for this output is - compilers optimize the code and replace const variables with their values. So we can see a difference when we do `printf("%d %d %u %u\n",a,*d,&a,d);` which would actually have been modified to optimize as `printf("%d %d %u %u\n",10,*d,&a,d);`

Do not rely on any of these outputs. Actual behavior is not defined by the standard.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T18:52:21.203

你不应该这样做，编译器给你这个警告是有原因的。然而，C/C++ 会让你做任何你想做的事。编写干净的代码取决于您。

您可以使用以下方法反映该值的常量：

```
int const * d =  &a; 
```

然后，修改 d 指向的内容会产生警告和错误。

# python - 如何重新配置 tkinter 画布项目？

> ID：13212300
> 
> 赞同：5
> 
> 时间：2012-11-03T18:42:41.163
> 
> 标签：python, user-interface, tkinter

我不知道这个问题是否有重复，但我还没有找到。

使用 python 时，您可以快速创建 GUI，但有时您找不到执行所需操作的方法。例如我有以下问题：

假设有一个名为 K 的画布，其中有一个 ID=1(canvas item id , not memory id) 的矩形。

如果我想重绘项目，我可以删除它，然后用新设置重绘它。

```
K.delete(1)
K.create_rectangle(x1,y1,x2,y2,options...) 
```

这是问题所在：对象ID发生了变化；我如何重绘、移动或调整矩形的大小，或者在不使用方法更改其 id 的情况下简单地更改它？例如：

```
K.foo(1,options....) 
```

如果没有这样的方法，那么我应该创建一个带有画布对象 ids 的列表，但它不优雅也不快。例如：

```
ItemIds=[None,None,etc...]
ItemIds[0]=K.create_rectangle(old options...)
K.delete(ItemIds[0])
ItemIds[0]=K.create_rectangle(new options...) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-03T19:06:03.123

您可以使用[`Canvas.itemconfig`](https://web.archive.org/web/20201108093851id_/http://effbot.org/tkinterbook/canvas.htm#Tkinter.Canvas.itemconfig-method)：

```
item = K.create_rectangle(x1,y1,x2,y2,options...)
K.itemconfig(item,options) 
```

要移动项目，您可以使用[`Canvas.move`](https://web.archive.org/web/20201108093851id_/http://effbot.org/tkinterbook/canvas.htm#Tkinter.Canvas.move-method)

* * *

```
import Tkinter as tk

root = tk.Tk()
canvas = tk.Canvas(root)
canvas.pack()
item = canvas.create_rectangle(50, 25, 150, 75, fill="blue")

def callback():
    canvas.itemconfig(item,fill='red')

button = tk.Button(root,text='Push me!',command=callback)
button.pack()

root.mainloop() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-10T03:33:41.417

我四处搜索，找到了调整大小的完美 Tkinter 方法。canvas.coords() 可以解决问题。只需给它你的新坐标，它就“很好”。Python 3.4
PS。不要忘记第一个参数是 id。

# django - 如何扩展 django zinnia 博客条目

> ID：13212301
> 
> 赞同：2
> 
> 时间：2012-11-03T18:42:41.750
> 
> 标签：django, zinnia, zinnia-entry

我按照此处找到的说明进行操作

[http://django-blog-zinnia.readthedocs.org/en/latest/how-to/extending_entry_model.html](http://django-blog-zinnia.readthedocs.org/en/latest/how-to/extending_entry_model.html)

不幸的是，我无法扩展。第一个奇怪的事情是 - 我必须改变入口模块的导入方式：

从

```
from zinnia.models.entry import Entry
from zinnia.admin.entry import EntryAdmin 
```

到

```
from zinnia.models import Entry
from zinnia.admin import EntryAdmin 
```

更改后，我然后运行服务器并转到管理页面，但随后出现此错误。

```
'RatingAdmin.fieldsets[0][1]['fields']' refers to field 'rating' that is missing from the form. 
```

这是我的代码 admin.py

```
from django.contrib import admin
from django.utils.translation import ugettext_lazy as _

from zinnia.models import Entry
from zinnia.admin import EntryAdmin

class RatingAdmin(EntryAdmin):
# into the 'Content' fieldset
fieldsets = ((_('Content'), {'fields': (
'title', 'content', 'image', 'status', 'rating')}),) + \
EntryAdmin.fieldsets[1:]

# Unregister the default EntryAdmin
# then register the EntryGalleryAdmin class
admin.site.unregister(Entry)
admin.site.register(Entry, RatingAdmin) 
```

这是我的抽象类模型happy_models.py

```
from django.db import models
from zinnia.models.entry import EntryAbstractClass

class Happy(models.Model):
    rating = models.CharField(max_length=200)

    def __unicode__(self):
        return u'Rating %s' % self.title

    class Meta(EntryAbstractClass.Meta):
        abstract = True 
```

这是我在 settings.py 中的百日草入门基础模型路径

```
ZINNIA_ENTRY_BASE_MODEL = 'happy.happy_models.Happy' 
```

我刚刚在我的控制台上注意到了这一点

```
/zinnia/models.py:30‌​2: RuntimeWarning: happy.happy_models.Happy cannot be imported 
```

这是我的目录设置

```
happy/
    admin.py
    happy_models.py
    views.py 
```

扩展条目时我可能做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T02:04:11.057

我认为您跳过了两个部分：

1.  创建您自己的扩展模型：EntryAbstractClass from zinnia.models.entry
2.  使用 settings.py 文件中的 ZINNIA_ENTRY_BASE_MODEL 设置告诉 zinnia 使用您的新模型

还要注意你的应用扩展的结构，我通常使用这样的东西：

```
/zinna_extras
    __init__.py
    entry_plus.py  <---- This is where your model that extends EntryAbstractClass goes
    admin.py <--- You got this part right above
    views.py <--- blank
    migrations/ <--- all original zinnia migrations + what you need for your model (see below) 
```

请注意，没有 models.py 文件。这搞砸了 Zinnia 的进口风格。

如果您使用南迁移，您可能还需要在 settings.py 中设置以下内容：

```
SOUTH_MIGRATION_MODULES = {
    'zinnia': 'zinnia_extras.migrations.zinnia',
} 
```

将所有原始 zinnia 迁移复制到 zinnia_extra 应用程序中的迁移文件夹中，然后为模型创建所需的任何新迁移。这只是告诉 South 使用您的应用程序作为 Zinnia 迁移的来源，而不是通常的 zinnia 应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T04:21:26.597

我终于发现了——通过在交互模式下运行服务器，我能够进行调试。示例代码必须修改为：-

```
from zinnia.models import EntryAbstractClass 
```

代替

```
from zinnia.models.entry import EntryAbstractClass 
```

# asp.net-web-api - ASP .Net Web API 和 RavenDB 兼容性

> ID：13212303
> 
> 赞同：1
> 
> 时间：2012-11-03T18:43:33.300
> 
> 标签：asp.net-web-api, ravendb

我在单独的程序集中使用 RavenDB Build 1.0.960 和 ASP .Net Web API。我的应用程序无法在运行时序列化和反序列化 json。

有什么解决方案可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T18:55:35.057

我们听到的关于 RavenDB 1.0 的一个常见抱怨是它依赖于 Newtonsoft.Json 4.0.8，而许多库已经在使用 4.5.7。我们已经在 RavenDB 1.2 分支中一劳永逸地解决了这个问题，但距离上线还有几个月的时间。

为此，我们创建了一个新的 nuget 包：  [http ://nuget.org/packages/RavenDB.Client/1.0.971](http://nuget.org/packages/RavenDB.Client/1.0.971)

这个 nuget 包与 960 完全相同，只是我们针对 Newtonsoft.Json 4.5.7 编译它。请注意，这仅支持客户端模式，如果要运行 RavenDB Server 或 RavenDB Embedded，在 1.0 版本中仍然需要 Newtonsoft.Json 4.0.8。

主要思想是您可以在客户端使用 Newtonsoft.Json 4.5.7 运行 RavenDB 服务器，这是 RavenDB 最常见的场景。

# mysql - 获取值，在列中重复更多次

> ID：13212308
> 
> 赞同：1
> 
> 时间：2012-11-03T18:44:09.057
> 
> 标签：mysql

给定表`menu`，在他中是列 `continent`，例如在他中是这个数据

```
continent
----------
africa
africa
europe
europe
europe 
```

我想获得大陆名称，在列中出现更多次，即结果必须是`europe`.

我写查询，但我认为我的查询很困难，对于这种情况必须存在更简单的解决方案。有一些想法吗？

这是我的查询

```
 SELECT continent FROM (
        SELECT continent, COUNT(continent) AS cnt FROM menu GROUP BY continent
    ) AS t
    WHERE cnt = (
        SELECT MAX(cnt) FROM ( 
            SELECT  COUNT(continent) AS cnt FROM menu GROUP BY continent
        ) AS t2
    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T18:50:02.273

试试这个：

```
SELECT continent FROM (
    SELECT continent, COUNT(continent) AS cnt
    FROM menu
    GROUP BY continent
) AS t
ORDER BY cnt DESC
LIMIT 0, 1 
```

我认为您也可以在单个查询中执行此操作：

```
SELECT continent, COUNT(continent) AS cnt
FROM menu
GROUP BY continent
ORDER BY cnt DESC
LIMIT 0, 1 
```

问候

* * *

更新：

```
SELECT continent
FROM menu
GROUP BY continent
HAVING count(continent) = 
(
    SELECT COUNT(continent) AS cnt
    FROM menu
    GROUP BY continent
    ORDER BY cnt DESC
    LIMIT 0, 1
) 
```

内部查询返回最多的重复项；然后在应用于 HAVING 运算符的外部查询中使用该值，以仅返回精确重复该次数的项目。这适用于 mysql，我不确定其他 SQL 方言。

# objective-c - RestKit 与自映射的多对多关系

> ID：13212311
> 
> 赞同：0
> 
> 时间：2012-11-03T18:44:40.517
> 
> 标签：objective-c, json, rest, core-data, restkit

我在 RestKit 中映射 ManyToMany 自引用对象时遇到问题。我正在尝试为对象类别实现父子类型的关系。我确定这是一个简单的模式，但我无法让它工作：CoreData 创建用于存储多对多关系（“Z_PARENT”）的中间表没有填充类别 ID。

**来自远程 API 的 JSON：**

```
{
"active": true,
"created": "2012-10-20 18:15:16",
"id": "60",
"name": "A Second Level",
"parent": [
    {
        "id": "59"
    }
], } 
```

**我的 CoreData 对象：**

![在此处输入图像描述](../Images/70a5f91a9fa21ee9dd7175d1c36bf822.png)

**我的 RestKit 映射代码：**

```
 RKManagedObjectMapping* categoryMapping = [RKManagedObjectMapping mappingForEntityWithName:@"Category" inManagedObjectStore:self.objectManager.objectStore];
categoryMapping.primaryKeyAttribute = @"backendID";
[categoryMapping mapKeyPath:@"id" toAttribute:@"backendID"];
[categoryMapping mapAttributes:@"active",@"created", @"name", nil];

[categoryMapping mapKeyPath:@"parent" toRelationship:@"parent" withMapping: [ RKDynamicObjectMapping dynamicMapping ]]; 
```

# c# - 将同步或异步方法作为任务使用

> ID：13212312
> 
> 赞同：3
> 
> 时间：2012-11-03T18:44:53.320
> 
> 标签：c#, async-await

我正在查看 codeplex 上的下载管理器类型项目，并遇到了这个： http: [//nthdownload.codeplex.com/](http://nthdownload.codeplex.com/)

浏览我在`AddDownloads`下面列出的方法中运行的代码：

`AddDownloads`启动 _downloadQueue.AddDownloads 任务并继续执行该`viewMaintenanceTask`任务。如果您查看这 2 个任务和下游发生的方法和事情，似乎一切都是同步的。

还阅读这篇博文，[同步任务与任务](http://neverindoubtnet.blogspot.com/2012/03/synchronous-tasks-with-task.html)我试图了解将同步方法包装在`TaskCompletionSource`. 是因为它为 API 使用者提供了在单独的线程上启动任务的选项，还是仅仅因为您想将该方法用作`Task`. 同步方法是否`TaskCompletionSource`受益于并行处理？

```
private Task<QueueOperation> AddDownloads(IEnumerable<IDownload> downloads, out Task<QueueOperation> startTask)
{
    var addTask = _downloadQueue.AddDownloads(downloads, out startTask);

    // Maintain views
    var viewMaintenanceTask = addTask.ContinueWith(t =>
    {
        if (t.Exception == null)
        {
            var addedDownloads = t.Result.DownloadErrors.Where(k => k.Value == null).Select(k => k.Key).ToList();
            var activeDownloads = ActiveDownloads.ToList();
            AddToActiveDownloads(addedDownloads.Except(activeDownloads).ToList(), false);
        }
        else
        {
            // Rethrow exception, this ensures it'll bubble up to any further ContinueWith chained off this task
            throw t.Exception;
        }
        return t.Result;
    });

    return viewMaintenanceTask;
} 
```

博客文章中的示例方法，将同步操作包装在`TaskCompletionSource`：

```
var tcs = new TaskCompletionSource<object>();

try
{
    object result = model.Deserialize(stream, null, type);
    tcs.SetResult(result);
}
catch (Exception ex)
{
    tcs.SetException(ex);
}

return tcs.Task; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-03T19:19:47.193

> 包装在 TaskCompletionSource 中的同步方法是否受益于并行处理？

*不会*。创建 a`TaskCompletionSource`不会以任何方式、形状或形式创建新线程。

 *您在底部给出的代码毫无意义——当方法返回时，任务已经完成（或出错）。*如果您必须*使用任务，它只会有任何用处。我可能会将其更改为：

```
try
{
    return Task.FromResult(model.Deserialize(stream, null, type));
}
catch (Exception ex)
{
    // There's no Task.FromException, unfortunately.
    var tcs = new TaskCompletionSource<object>();
    tcs.SetException(ex);
    return tcs.Task;
} 
```

在 C# 中，这相当于编写`async`没有`await`表达式的方法：

```
public static async Task<object> Deserialize(Model model, Stream stream,
                                             Type type)
{
    return model.Deserialize(stream, null, type);
} 
```

如果您想要真正的并行性，您应该使用[`Task.Run`](http://msdn.microsoft.com/en-us/library/hh194921.aspx)(.NET 4.5) 或[`Task.Factory.StartNew`](http://msdn.microsoft.com/en-us/library/dd321455.aspx)(.NET 4)。*

# javascript - 在 fancybox 配置中使用变量

> ID：13212323
> 
> 赞同：0
> 
> 时间：2012-11-03T18:46:11.773
> 
> 标签：javascript, jquery, fancybox

我已经在我的 html 中设置了这个配置，但我一直收到一个错误（意外的标识符）。请帮忙！

```
$(document).ready(function(){
    $(".fancybox").fancybox({
        closeBtn  : false,

        helpers : {
            title : {
                type : 'inside'
            },
            buttons : {}
        },

        afterLoad : function() {
            this.title = (this.index + 1) + '. ' + longNames[this.index];
        }

        error    : '<p class="fancybox-error">'+fnbx_err+'</p>',
        closeBtn : '<a title="'+fnbx_clo+'" class="fancybox-item fancybox-close" href="javascript:;"></a>',
        next     : '<a title="'+fnbx_nex+'" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',
        prev     : '<a title="'+fnbx_pre+'" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T18:46:11.773

问题不在于变量。你忘了把最后一部分放进去`tpl`。

```
$(document).ready(function(){
    $(".fancybox").fancybox({
        closeBtn  : false,

        helpers : {
            title : {
                type : 'inside'
            },
            buttons : {}
        },

        afterLoad : function() {
            this.title = (this.index + 1) + '. ' + longNames[this.index];
        },

        tpl : {
            error    : '<p class="fancybox-error">'+fnbx_err+'</p>',
            closeBtn : '<a title="'+fnbx_clo+'" class="fancybox-item fancybox-close" href="javascript:;"></a>',
            next     : '<a title="'+fnbx_nex+'" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',
            prev     : '<a title="'+fnbx_pre+'" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'
        }
    });
}); 
```

# javascript - Facebook 注册插件 + 验证无法从函数返回值

> ID：13212328
> 
> 赞同：0
> 
> 时间：2012-11-03T18:46:36.487
> 
> 标签：javascript, facebook

我在我的 Facebook 注册插件中使用了一个自定义字段，并且需要验证一个返回布尔值的邮政编码字段，不知何故因为这个内部函数：

```
 geocoder.geocode({ address: address }, function (results, status) {
} 
```

我无法向我的 addExist 变量返回值，它总是返回“未定义”。任何人都可以帮忙吗？谢谢。

```
<fb:registration redirect_uri="http://localhost:40153/Account/RegisterDestination.aspx" 
     fields='[
       {"name":"name"},
       {"name":"gender"},
       {"name":"email"},
       {"name":"birthday"},
       {"name":"password"},
       {"name":"zip","description":"Postal Code","type":"text"}]'
       onvalidate="validate"></fb:registration>

       function validate(form) {
            errors = {};
            if (form.zip !== "") {

                var addExist = calculateCoordinates(form.zip.toString());
                // alert(addExist); 
                if (!addExist) {
                    errors.zip = "Cannot locate address";
                }
            }
            return errors;
        }

        function calculateCoordinates(zip) {

            var txtPostcode = zip;
            // var address = txtAddress1.value + ', ';
            // address += txtAddress2.value + ', ';
            // address += txtTown.value + ', ';
            var address = txtPostcode;
            // address += txtCountry.value;

            var geocoder;
            geocoder = new google.maps.Geocoder();
            geocoder.geocode({ address: address }, function (results, status) {
                if (status == google.maps.GeocoderStatus.OK) {
                    var location = results[0].geometry.location;
                    var litLatClientId = document.getElementById("<%=litLat %>");
                    var litLongClientId = document.getElementById("<%=litLong %>");

                    $("#" + litLatClientId).val(location.lat());
                    $("#" + litLongClientId).val(location.lng());

                    // Successfully reach here but the bool variable 'addExist' value gets an 'Undefined' value.

                    return true;
                }
                else
                return false;
            });
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T20:02:28.577

`calculateCoordinates`是 using `geocode`，这是一个异步函数。因此，它本身必须异步使用，以便从内部异步函数“返回”任何数据。这是通过使用回调模式完成的。

不幸的是，您正在同步使用它，并且注册插件也希望`validate`是同步的。因此基本上没有办法使这项工作。

# php - 这些 PHP if 语句有逻辑错误吗？

> ID：13212329
> 
> 赞同：0
> 
> 时间：2012-11-03T18:46:56.497
> 
> 标签：php, mysql, if-statement, logic

以下是在单击表单的更改密码按钮时运行的脚本。该表单包含 2 个密码字段，一个用于新密码，一个用于确认新密码。这是表单的操作脚本：

```
<?php
session_start();

include("func.php");

$NewPassword = mysql_real_escape_string(md5($_POST['newpassword']));
$Confirm = mysql_real_escape_string(md5($_POST['confirmnewpassword']));
$userid = $_SESSION['username'];

if (!isset($NewPassword) || !isset($Confirm)) {
    header("Location: ../error.php");
    die("Error");
}else if ($NewPassword <> $Confirm) {
    header("Location: ../error.php");
    die("Error");
}else{
    dbConnect();

    mysql_query("UPDATE users SET password='$Confirm' WHERE username='$userid'");

    mysql_close($connect);

    header("Location: ../profile.php");
    die("Success");
}
?> 
```

即使表单上的 2 个密码字段为空或不匹配，密码仍会在数据库中更新。这可能是什么原因？

我感谢提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T18:51:27.060

您不需要包含 md5 函数的 mysql_real_escape_string，因为 md5 返回一个十六进制数。

```
 if (!isset($NewPassword) || !isset($Confirm)) { 
```

永远不会评估为真，您应该检查 $_POST['newpassword'] 和 $_POST['confirmnewpassword'] 是否不为空 - 在这种情况下，如果密码都为空，则密码将被更新。

关于即使密码不同也会更新密码，您是否 100% 确定您使用 POST 而不是 GET 传递变量，并且参数的名称是“newpassword”和“confirmnewpassword”？

试着放一个“回声”来显示变量的值，以确保你正确地传递了参数，99% 的问题就在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T20:12:17.500

您的代码中没有任何内容可以防止空字符串被散列和上传。您正在检查哈希，而不是原始字符串。这可以解释为什么空值仍然得到更新。

但是，如果值不匹配，它们的哈希值应该不同。这将向我表明这可能是您的变量`$_POST['newpassword']`并且`$_POST['confirmnewpassword']`不准确。正如其他人所建议的那样，代码开头的[var_dump](http://php.net/manual/en/function.var-dump.php)甚至[print_r($_POST)语句将帮助您诊断这一点。](http://php.net/manual/en/function.print-r.php)

甚至不涉及诸如 PDO 与 mysql 之类的大问题或以不同的方式构建代码，这就是我要做的：

```
session_start();
include("func.php");

print_r ($_POST); // you'll want to delete this later 

$new_password = $_POST['newpassword']; // not technically necessary, my preferred style
$confirm_password = $_POST['confirmnewpassword']; // also not technically necessary
$userid = $_SESSION['username'];

/* Test the actual submitted password and confirmation to ensure they are set */
if (empty ($new_password) || empty ($confirm_password)) {
    /* header("Location: ../error.php"); */ // comment this out for now
    die ("Error: Password or Password Confirmation not set");
}

/* Test the actual submitted password and confirmation to ensure they match */
elseif ($new_password != $confirm_password) {
    /* header("Location: ../error.php"); */ // comment this out for now
    die("Error: Password and Password Confirmation do not match");
}

else {
    /* NOW that you have established the password and confirmation are both
     * set AND match, you get the hash value */
    $password_hash = mysql_real_escape_string(md5($new_password));
    dbConnect(); 
    mysql_query("UPDATE users SET password='$Confirm' WHERE username='$userid'");
    mysql_close($connect);
    /* header("Location: ../profile.php"); */ // comment this out for now
    die("Success: Updated");
} 
```

这应该允许您调试脚本并查看发生了什么问题。我的猜测是数据要么作为 GET 传递，要么变量名不正确。

下一步：

1.  工作后，删除 var_dump 并取消注释您的重定向。
2.  考虑重新编写 if 语句，以更明确地测试密码是否正确，如其他答案之一所述。
3.  说真的，看看[PDO](http://php.net/manual/en/book.pdo.php)或[mysqli](http://php.net/manual/en/book.mysqli.php)。程序 mysql_* 正在被贬低。
4.  如果您不想走完整的 OOP 路线，请考虑制作 update_password () 和 send_error () 之类的函数。这将使您的代码更具可读性和可重用性。

但是一步一步，让我们调试这些当前的东西！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T18:55:26.820

我找不到这不起作用的具体原因（尝试使用调试器或调试消息），但我肯定不会将我的密码更新放在“其他”分支中！仅当您 100% 确定新密码及其确认匹配并且它们已根据您的密码策略进行验证时才更新密码。至少确保它们不是空字符串。

# css - 将文本放置在具有固定高度的元素内

> ID：13212332
> 
> 赞同：0
> 
> 时间：2012-11-03T18:47:35.113
> 
> 标签：css

当我在 CSS 中制作徽章/按钮等时。我通常使用填充将文本定位在元素内。我现在遇到了这种情况不起作用。

p-tag 的高度为 50px。这意味着如果我添加填充，总高度将会很大。还有其他方法可以更改标签内的文本位置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T19:19:03.923

您需要垂直或水平移动文本吗？如果水平，您可以使用文本缩进。

如果要将文本放置在容器的垂直中心并且只有一行文本，则可以将 line-height 属性设置为与元素的高度相同。

提供确切的详细信息或代码示例，我会尽力提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T19:19:30.283

不需要使用高度，您可以使用以下内容来正确处理：

```
.classname {
    -moz-box-shadow:inset 0px 1px 0px 0px #ffffff;
    -webkit-box-shadow:inset 0px 1px 0px 0px #ffffff;
    box-shadow:inset 0px 1px 0px 0px #ffffff;
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #ededed), color-stop(1, #dfdfdf) );
    background:-moz-linear-gradient( center top, #ededed 5%, #dfdfdf 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ededed', endColorstr='#dfdfdf');
    background-color:#ededed;
    -moz-border-radius:10px;
    -webkit-border-radius:10px;
    border-radius:10px;
    border:1px solid #dcdcdc;
    display:inline-block;
    color:#777777;
    font-family:arial;
    font-size:15px;
    font-weight:bold;
    padding:16px 33px;
    text-decoration:none;
    text-shadow:1px 1px 0px #ffffff;
}.classname:hover {
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #dfdfdf), color-stop(1, #ededed) );
    background:-moz-linear-gradient( center top, #dfdfdf 5%, #ededed 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#dfdfdf', endColorstr='#ededed');
    background-color:#dfdfdf;
}.classname:active {
    position:relative;
    top:1px;
} 
```

[演示](http://jsfiddle.net/refhat/ASzEf/2/)

# javascript - iPhone webview 键盘上推布局并保持不变

> ID：13212333
> 
> 赞同：0
> 
> 时间：2012-11-03T18:47:39.477
> 
> 标签：javascript, iphone, html, ios, webview

编辑文本字段时，本机键盘会弹出 webview 并将其保留。就像你离开马桶座时一样。原生键盘缩回后如何恢复到原始滚动位置？我有一个可以被抓住的事件。我正在考虑一个丑陋的黑客，每次编辑后重新加载整个 webview。这似乎是唯一的出路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T21:04:12.657

假设存在一些支持 CSS 选择器的库：

```
var positionResetHandler = function () {
  var self = {},
      lastY = null;

  self.inputFieldFocusHandler = function () {
    lastY = window.scrollY;
  };

  self.inputFieldBlurHandler = function () {
    if (lastY) {
      window.scrollTo(0, lastY);
      lastY = null;
    }
  };

  return self;
};

var handler = positionResetHandler();

$("input").bind("focus", handler.inputFieldFocusHandler);
$("input").bind("blur", handler.inputFieldBlurHandler); 
```

在任何输入字段的焦点上，然后记录页面的 y 位置。在任何输入字段模糊时，然后将页面滚动回最后一个已知的 y 位置

# css - 带有 google web 字体的文本在 chrome/windows 和 chrome/mac 中具有不同的顶部间距

> ID：13212335
> 
> 赞同：6
> 
> 时间：2012-11-03T18:48:04.250
> 
> 标签：css, windows, macos, webfonts, spacing

我正在尝试使用谷歌网络字体（Josefin Sans），在 Windows 上它的顶部间距很大，而在 Mac 上它没有。这是一个示例页面：

[http://dl.dropbox.com/u/1421735/font.html](http://dl.dropbox.com/u/1421735/font.html)

以下是来自 chrome/windows 和 chrome/mac 的屏幕截图：

[https://dl.dropbox.com/u/1421735/chrome-win.png](https://dl.dropbox.com/u/1421735/chrome-win.png)

[https://dl.dropbox.com/u/1421735/chrome-mac.png](https://dl.dropbox.com/u/1421735/chrome-mac.png)

这是页面的来源：

```
<!DOCTYPE html>
<html>
  <head>
    <link href='http://fonts.googleapis.com/css?family=Josefin+Sans' rel='stylesheet' type='text/css'>
    <style>
      body {
          font-family: 'Josefin Sans', sans-serif;
          font-size: 50px;
      }
    </style>
  </head>
  <body>
      Josefin Sans
  </body>
</html> 
```

有什么建议可以让它们看起来一样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-09-30T12:34:48.687

对我来说，使用这个重新转换：[https](https://transfonter.org/) : //transfonter.org/ 启用“修复垂直指标”选项，解决了我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-22T23:35:31.393

似乎使用网络字体，mac safari（和mac上的其他浏览器？）将文本放在行框的顶部 - 如果切换回arial，文本将跳回它所属的位置。我还没有找到解决方案，但知道这个问题让我松了一口气（我切换回 arial 以获取我必须修复的标题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T01:06:50.560

使用 CSS 重置将有助于使字体在跨浏览器时看起来有些相似：

```
/* http://meyerweb.com/eric/tools/css/reset/ 
   v2.0 | 20110126
   License: none (public domain)
*/

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
    display: block;
}
body {
    line-height: 1;
}
ol, ul {
    list-style: none;
}
blockquote, q {
    quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
} 
```

这个字体问题是一个已知的错误，我什至在使用你的代码和这个 CSS 重置时遇到了一些不一致。基本上它会重置 CSS 以消除浏览器解释中的差异。祝你好运，如果您有任何问题，请告诉我！您可以在此处阅读更多详细信息：http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T01:11:21.860

我建议您使用比 Meyer 的重置更少侵入性的东西，因为它不必要地走得太远。Normalize.css 是一个不错的选择。[http://necolas.github.com/normalize.css/](http://necolas.github.com/normalize.css/)

```
 /*! normalize.css v2.0.1 | MIT License | git.io/normalize */

/* ==========================================================================
   HTML5 display definitions
   ========================================================================== */

/*
 * Corrects `block` display not defined in IE 8/9.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
nav,
section,
summary {
    display: block;
}

/*
 * Corrects `inline-block` display not defined in IE 8/9.
 */

audio,
canvas,
video {
    display: inline-block;
}

/*
 * Prevents modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
    display: none;
    height: 0;
}

/*
 * Addresses styling for `hidden` attribute not present in IE 8/9.
 */

[hidden] {
    display: none;
}

/* ==========================================================================
   Base
   ========================================================================== */

/*
 * 1\. Sets default font family to sans-serif.
 * 2\. Prevents iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
    font-family: sans-serif; /* 1 */
    -webkit-text-size-adjust: 100%; /* 2 */
    -ms-text-size-adjust: 100%; /* 2 */
}

/*
 * Removes default margin.
 */

body {
    margin: 0;
}

/* ==========================================================================
   Links
   ========================================================================== */

/*
 * Addresses `outline` inconsistency between Chrome and other browsers.
 */

a:focus {
    outline: thin dotted;
}

/*
 * Improves readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
    outline: 0;
}

/* ==========================================================================
   Typography
   ========================================================================== */

/*
 * Addresses `h1` font sizes within `section` and `article` in Firefox 4+,
 * Safari 5, and Chrome.
 */

h1 {
    font-size: 2em;
}

/*
 * Addresses styling not present in IE 8/9, Safari 5, and Chrome.
 */

abbr[title] {
    border-bottom: 1px dotted;
}

/*
 * Addresses style set to `bolder` in Firefox 4+, Safari 5, and Chrome.
 */

b,
strong {
    font-weight: bold;
}

/*
 * Addresses styling not present in Safari 5 and Chrome.
 */

dfn {
    font-style: italic;
}

/*
 * Addresses styling not present in IE 8/9.
 */

mark {
    background: #ff0;
    color: #000;
}

/*
 * Corrects font family set oddly in Safari 5 and Chrome.
 */

code,
kbd,
pre,
samp {
    font-family: monospace, serif;
    font-size: 1em;
}

/*
 * Improves readability of pre-formatted text in all browsers.
 */

pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/*
 * Sets consistent quote types.
 */

q {
    quotes: "\201C" "\201D" "\2018" "\2019";
}

/*
 * Addresses inconsistent and variable font size in all browsers.
 */

small {
    font-size: 80%;
}

/*
 * Prevents `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ==========================================================================
   Embedded content
   ========================================================================== */

/*
 * Removes border when inside `a` element in IE 8/9.
 */

img {
    border: 0;
}

/*
 * Corrects overflow displayed oddly in IE 9.
 */

svg:not(:root) {
    overflow: hidden;
}

/* ==========================================================================
   Figures
   ========================================================================== */

/*
 * Addresses margin not present in IE 8/9 and Safari 5.
 */

figure {
    margin: 0;
}

/* ==========================================================================
   Forms
   ========================================================================== */

/*
 * Define consistent border, margin, and padding.
 */

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/*
 * 1\. Corrects color not being inherited in IE 8/9.
 * 2\. Remove padding so people aren't caught out if they zero out fieldsets.
 */

legend {
    border: 0; /* 1 */
    padding: 0; /* 2 */
}

/*
 * 1\. Corrects font family not being inherited in all browsers.
 * 2\. Corrects font size not being inherited in all browsers.
 * 3\. Addresses margins set differently in Firefox 4+, Safari 5, and Chrome
 */

button,
input,
select,
textarea {
    font-family: inherit; /* 1 */
    font-size: 100%; /* 2 */
    margin: 0; /* 3 */
}

/*
 * Addresses Firefox 4+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

button,
input {
    line-height: normal;
}

/*
 * 1\. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2\. Corrects inability to style clickable `input` types in iOS.
 * 3\. Improves usability and consistency of cursor style between image-type
 *    `input` and others.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
}

/*
 * Re-set default cursor for disabled elements.
 */

button[disabled],
input[disabled] {
    cursor: default;
}

/*
 * 1\. Addresses box sizing set to `content-box` in IE 8/9.
 * 2\. Removes excess padding in IE 8/9.
 */

input[type="checkbox"],
input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
}

/*
 * 1\. Addresses `appearance` set to `searchfield` in Safari 5 and Chrome.
 * 2\. Addresses `box-sizing` set to `border-box` in Safari 5 and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/*
 * Removes inner padding and search cancel button in Safari 5 and Chrome
 * on OS X.
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/*
 * Removes inner padding and border in Firefox 4+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/*
 * 1\. Removes default vertical scrollbar in IE 8/9.
 * 2\. Improves readability and alignment in all browsers.
 */

textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ==========================================================================
   Tables
   ========================================================================== */

/*
 * Remove most spacing between table cells.
 */

table {
    border-collapse: collapse;
    border-spacing: 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-13T20:57:01.840

我在使用带有名为 Libel Suit 的字体的 @font-face 时遇到了这个问题。我没有在我的 h1 和 h2 上放置任何边距或填充，但是当我在 Chrome 和 Firefox for Windows 上进行测试时，它在标题上方显示了大量的额外空间。`line-height: normal;`我通过简单地添加css来修复它。

# c++ - 无法使用 Sublime Text 2 构建 Allegro 程序

> ID：13212336
> 
> 赞同：1
> 
> 时间：2012-11-03T18:48:08.290
> 
> 标签：c++, sublimetext2, allegro5

尝试使用 Sublime Text 2 和 SublimeClang 编译和运行一个简单的 Allegro 程序。如果我`g++ '/path/to/project/main.cpp' -o '/path/to/project/main' -I/usr/include/allegro5 -L/usr/lib -lallegro`在命令行上运行，它编译得很好。

## C++.sublime-build 的内容

```
{
    "cmd": ["g++", "${file}", "-o", "${file_path}/${file_base_name}"],
    "file_regex": "^(..[^:]*):([0-9]+):?([0-9]+)?:? (.*)$",
    "working_dir": "${file_path}",
    "selector": "source.c, source.c++",

    "variants":
    [
        {
            "name": "Run",
            "cmd": ["bash", "-c", "g++ '${file}' -o '${file_path}/${file_base_name}' $(pkg-config --libs allegro-5.0)"]
        }
    ]
} 
```

## 运行失败，Sublime Console 的输出为：

`Running bash -c g++ '/path/to/project/main.cpp' -o '/path/to/project/main' && '/path/to/project/main' -I/usr/include/allegro5 -L/usr/lib -lallegro`

似乎 Sublime 正在添加`&& '/path/to/project/main'`，即使构建设置没有指定这样做。是什么导致 Sublime 添加这个`&& '/path/to/project/main'`？以及如何删除它？

从更大的角度来看 - 这意味着 Allegro 将在所有 C++ 项目中链接，即使这些库没有被使用。有没有办法在我的系统上全局添加 Allegro 标志？抱歉，通常不是 C++ 开发人员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T19:19:41.003

我解决了我自己的问题。我使用反引号而不是`$()`符号：

```
"cmd": ["bash", "-c", "g++ '${file}' -o '${file_path}/${file_base_name}' `pkg-config --libs allegro-5.0` && ./${file_base_name}"] 
```

请注意，我还添加了`&& ./${file_base_name}`- 它也运行程序。

# objective-c - 在 Mac 应用程序中的保存对话框中包含 iCloud

> ID：13212337
> 
> 赞同：2
> 
> 时间：2012-11-03T18:48:48.103
> 
> 标签：objective-c, macos, cocoa, icloud, nsdocument

我已经`iCloud`在我的 Mac 基于文档的应用程序上实现了支持。 `NSDocument`子类可以处理本地存储上的打开 e 保存文件和`iCloud`. 但是，我只需将文件`iCloud`拖到打开新文件面板上即可上传文件。当应用程序提示用户保存文件的位置时，`iCloud`不在列表中。是不是像 TextEdit 一样默认支持？我必须用我自己的代码来实现吗？

图片在这里：

![截屏](../Images/9ea9807c0464cf5746fc464744d9e919.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T01:22:09.923

我有同样的问题。但是当我修复代码签名问题时它就解决了。这个问题由代码签名错误调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:00:30.390

我设法解决了这个问题

1.  重新创建证书和配置文件
2.  删除 Info.plist 中我的 CFBundleDocumentTypes 条目的 LSItemContentTypes 键。我还删除了 UTExportedTypeDeclarations 条目（可能包含也可能不包含错误）。

# c# - 使用复杂数据类型在 EF 中调用存储过程

> ID：13212338
> 
> 赞同：5
> 
> 时间：2012-11-03T18:48:51.707
> 
> 标签：c#, sql-server, asp.net-mvc, entity-framework, complex-data-types

我是`Entity Framework`在示例`ASP.NET/MVC 3.0 VS2010`项目中工作的新手。我已将两个存储过程作为函数导入导入，并在此过程中为每个存储过程创建了一个复杂的数据类型。

我正在尝试运行以下 c# 代码：

```
public ComplexDataType RunStoredProc()
{
    var context = new DbEntities();
    int param1 = 370;
    int param2 = -1;
    string param3 = "Current";

    ComplexDataType result = new ComplexDataType;
    result = context.StoredProc(param1, param2, param3);
    return result;
} 
```

我得到了错误：

```
Cannot implicitly convert data type 
    System.Data.Objects.ObjectResult(ComplexDataType) to 'ComplexDataType' 
```

我究竟做错了什么？如何以复杂的数据类型正确存储存储过程的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T19:20:56.650

您可以使用`DbSet.SqlQuery`方法从存储过程中获取结果。

```
int param1=12;
int param2=53;
var results=context.ComplexDataTypes.SqlQuery.
                       ("dbo.YourSPNameHere @p0 @p1", param1,param2).Single(); 
```

假设您有一个这样的集合定义了您的 DbContext 类。

```
public DbSet<ComplexDataType> ComplexDataTypes { set;get;} 
```

更多信息可[在此处](http://msdn.microsoft.com/en-US/data/jj592907)获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T19:16:58.220

尝试改变这个：

```
result = context.StoredProc(param1, param2, param3); 
```

对此：

```
result = (ComplexDataType) context.StoredProc(param1, param2, param3); 
```

# html - 为什么在两个浮动 div 中只包含内容？

> ID：13212340
> 
> 赞同：0
> 
> 时间：2012-11-03T18:49:00.760
> 
> 标签：html, css

我真的很想了解 float 在 CSS 中的工作原理，但我遇到了很多困难。我实验得越多，我就越困惑。看看这个例子：

```
<div class = "block1">hola</div>
<div class = "block2">hola</div>

.block1 {
    width:100px;
    border:1px solid;
    float: left;
    height:400px;
}

.block2 {
    width:300px;
    border:1px solid;
    background-color:red;
} 
```

[jsFiddle](http://jsfiddle.net/MrNYR/3/)

为什么第二个块的内容与第一个块并排，但容器本身就在第一个块的正下方并向右扩展？

如果第二个块的宽度更大，就会发生这种情况。如果没有，第二个块就在下面。为什么会这样？为什么不是所有的第二个街区都与第一个街区并排，而是在下面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T18:57:01.823

首先，当您将`float`任何元素从文档的“正常流程”中取出时。其次，总是在浮动元素上设置宽度被认为是好的。我真的不擅长解释。

[读这个](http://coding.smashingmagazine.com/2007/05/01/css-float-theory-things-you-should-know/)

[和这个](http://coding.smashingmagazine.com/2009/10/19/the-mystery-of-css-float-property/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T19:00:34.727

这些可能会帮助你...

[W3C - 视觉格式化模型 - 定位浮动：'float' 属性](http://www.w3.org/TR/CSS2/visuren.html#propdef-float)

[W3C - 通用容器 - div 和 span 元素](http://www.w3.org/wiki/Generic_containers_-_the_div_and_span_elements)

# c++ - Windows的gcc端口中thread_posixs和thread_win32有什么区别？

> ID：13212342
> 
> 赞同：11
> 
> 时间：2012-11-03T18:49:43.483
> 
> 标签：c++, windows, multithreading, gcc4.7

我想下载适用`gcc 4.7.2`于 Windows 的最新可用版本的编译器。当我到达本应该看到下载链接的[页面](http://sourceforge.net/projects/mingwbuilds/files/host-windows/releases/4.7.2/32-bit/)时，我遇到了两个类别：

1.  线程-posix
2.  线程-win32

这两者有什么区别？它们只是线程实现吗？我的意思是它们只是在实现方式上有所不同，因此最终结果（类，如何使用它们等）保持不变？还是他们强加了特定的编码风格？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-04T00:45:27.307

因此，您提供的链接导致构建独立的 gcc 4.7.2 for windows，即 mingw64。为了构建这个编译器，使用了一组脚本，它们有助于定义编译选项。这些脚本简称为 MinGW-builds，可以在不同的地方找到：

*   [谷歌代码](https://code.google.com/p/mingw-builds)
*   [github分叉](https://github.com/niXman/mingw-builds)

脚本有一个选项，用于指定将哪个线程模型用于 C++11 标准的 std::threads 部分（由于该版本的 GCC 上应用了[实验性补丁，MinGW 允许这样做）。](http://tehsausage.com/mingw-std-thread-gcc-4-7)在一种情况下，使用了 win32 线程 API，而在另一种情况下，使用了 posix API。

*请注意，Windows 不支持所有开箱即用的 POSIX API，因此需要使用一些外部仿真库（winpthreads）。*

GCC 源配置脚本有一个选项来指定 API (--enable-threads=)，这就是构建脚本中使用的。

简而言之，对于这个版本的 mingw，threads-posix 版本将使用 posix API 并**允许使用 std::thread**，而 threads-win32 将使用 win32 API，并**禁用 std::thread 部分标准**。

# php - 过去 7 天

> ID：13212345
> 
> 赞同：-6
> 
> 时间：2012-11-03T18:50:04.177
> 
> 标签：php

只是无法让它发挥作用。我想检查该用户在过去 7 天内是否购买了 45 美元或更多的出价包。

```
 $big_amount="45";
    //check if the user has purchased bids
    $strFind="SELECT * FROM `prepaypal` WHERE `memid`=\"$curmemid\" AND `success`='Y' 
    AND `pid`='0' AND `amount`>=\"$big_amount\" BETWEEN NOW() and DATE_SUB
    (`date`, INTERVAL 7 DAY) ORDER BY `date` DESC LIMIT 1";
    //echo $strFind;
    $result=mysql_query($strFind) or die(mysql_error());
    $row=mysql_fetch_array($result);
    $bought_bids=$row['id']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T19:29:55.920

那个 select 语句根本不对，你应该这样做：

```
SELECT * FROM `prepaypal` WHERE `memid`= $curmemid AND `success`='Y' AND `pid`='0' AND `amount`>=$big_amount where date >= SYSDATE() - INTERVAL 7 day order by date DESC; 
```

`SYSDATE()`返回函数执行的时间，interval 设置给定日期之间的时间段。优化查询并从数据库中获取特定值也比这样做更好，`"SELECT *"` 例如：`SELECT Field1, Field2, Field3 from table;`

MySQL_ PHP 函数也已弃用，因此您不应再使用它们。我会坚持使用 Mysqli 或 PDO 准备好的语句。

如果这不符合您的正确答案，请随时投反对票。

# powershell - 如何使用 PowerShell SQLPS 模块浏览 SQL Server 2012 LocalDB 对象的层次结构？

> ID：13212348
> 
> 赞同：1
> 
> 时间：2012-11-03T18:50:16.773
> 
> 标签：powershell, localdb

从程序开发人员的角度来看，将 PowerShell 与“Microsoft SQL Server 2012 LocalDB”结合起来与 SQL Server 数据库引擎进行交互是非常有吸引力的。从 PowerShell 连接到 LocalDB 实例、使用数据库对象和执行 Transact-SQL 语句都可以正常工作。在此组合中添加“Microsoft SQL Server 2012 共享管理对象”(SMO) 时也是如此。

我无法通过 PowerShell SQLPS 模块（“Microsoft Windows PowerShell Extensions for Microsoft SQL Server 2012 Feature Pack”）浏览 LocalDB 实例。后者尝试获取 SQL Server 服务信息，而 LocalDB 不创建任何数据库服务。

然而，是否有一种方法可以使 SQLPS 模块可以看到 LocalDB 实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T20:06:36.020

I don't think there's any way to extend SQLPS and/or SMO to include LocalDB instances on the list of SQL Server instances. Currently SQLPS and SMO don't understand LocalDB instance model, just like (I think) it didn't understand User Instances of SQL Server Express before. Also mixing regular and LocalDB instances could be confusing to end users. LocalDB instances are per-user and only visible by the user who owns them, so different users would get a different list on the same machine. Regular SQL Server instances are installed per-machine, and all users see the same list.

I bet you could write your own PowerShell plugin or module. All you need to do is to call [LocalDBGetInstances](http://msdn.microsoft.com/en-us/library/hh234622.aspx) and [LocalDBGetInstanceInfo](http://msdn.microsoft.com/en-us/library/hh245734.aspx) functions from LocaLDB API (available through C/C++) plus the existing SQLPS or SMO for the regular SQL Server instances. I'm not sure how you distribute such plugin though.

# mysql - 什么版本的 MySQL 与 Ruby On Rails 3.2.8？

> ID：13212349
> 
> 赞同：0
> 
> 时间：2012-11-03T18:50:36.500
> 
> 标签：mysql, ruby-on-rails

我正在阅读“Pragmatic Agile Web Dev w/Rails 4th edition for Version 3.2”，并正在准备我的生产环境以使用 Mysql。我在书中说到：

“SQLite 有很多替代品，包括免费的和商业的。我们将使用 MySQL。它可以通过 Linux 中的本机打包工具获得，并且 MySQL 网站上提供了 OS X 的安装程序。2 我们建议您下载MySQL 5.1，因为众所周知 MySQL 5.5 不能与 Rails 3.1 一起使用。”

**有人有使用 MySQL 5.5 和 Rails 3.2.8 的经验吗？**我想知道这本书指的是什么问题，以及它们是否在当前的稳定版本 3.2.8 中得到了解决。**关于使用什么版本的任何建议？**

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T18:56:42.067

不知道这本书指的是什么。我有几个使用 MySQL 5.5 和 Rails 3.2 的生产网站，没问题。只需使用 gem `mysql2`。

# c - 异常初始化问题

> ID：13212351
> 
> 赞同：0
> 
> 时间：2012-11-03T18:50:44.210
> 
> 标签：c, multidimensional-array, initialization

全部

我正在编写一个非常简单的动态二维数组声明的 C 代码，并用它初始化它，`memset`然后打印出该值。我的代码如下：

```
float **env;
int i,j,num;

printf("Enter a number : \n");
scanf("%d",&num);

env = (float **)malloc(num*sizeof(float *));

for(i=0;i<num;i++)
{env[i] = (float *)malloc(num*sizeof(float));}

memset(env, 0, sizeof(float)*num*num);

for(i=0;i<num;i++)
{  for (j=0;j<num;j++)
   {
      printf("%f\t",env[i][j]);
      if (j == num -1)
       { printf("\n\n");}
    }
}

for(i=0;i<num;i++)
{free(env[i]);
}

free(env); 
```

当我编译程序时，没有编译错误或警告，但是当我尝试打印出这些值时，我无法打印它们。然后我调试了程序，在`memset`语句之后 env 2D 变量显示类似于 `CXX0030: Error: expression cannot be evaluated`，当我打印值时，会出现一个窗口显示

`Unhandled exception at 0x008b1e27 in ***.exe: 0xC0000005: Access violation reading location 0x00000000.`

我尝试使用 2 个 for 循环将 2D 数组 env 显式初始化为 0，它工作得很好，我也能够打印值，但是当我使用`memset`. 如果有人可以帮助我，那将非常有帮助。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T19:07:24.167

Firstly, the usual advice: stop using type names under `sizeof` and stop casting the result of `malloc`. This is what it should've looked like

```
env = malloc(num * sizeof *env);

for (i = 0; i < num; i++)
  env[i] = malloc(num * sizeof *env[i]); 
```

In general, prefer to write you memory allocations by following this pattern

```
some_ptr = malloc(N * sizeof *some_ptr); 
```

Secondly, the "array" you create by using this technique is not a classic C-style contiguous 2D array. Instead, you get a "simulated" 2D array assembled from a bunch of completely unrelated 1D arrays. The latter can potentially be scattered randomly in memory. This immediately means that you won't be able to process your array as a continuous object. Meanwhile your `memset` call attempts to do just that. You can't do it this way. In your case you have to zero each 1D sub-array independently, using a cycle.

However, instead of allocating your 1D sub-arrays independently, you can allocate them all as a single memory block

```
assert(num > 0);
env = malloc(num * sizeof *env);
env[0] = malloc(num * num * sizeof *env[0]);

for (i = 1; i < num; ++i)
  env[i] = env[i - 1] + num; 
```

If allocated as shown above, you array's data will be stored in a single continuous memory block, although you still have to understand what you are doing when you are working with that array. For example, `memset`ing the array data would look as follows

```
memset(*env, 0, num * num * sizeof **env); 
```

or

```
memset(&env[0][0], 0, num * num * sizeof env[0][0]); 
```

(which is the same thing).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T18:55:42.417

Remove the `memset` and use `calloc` instead of `malloc`, it zero-initializes allocated memory. What you're doing now is zeroing pointers you have just allocated.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T19:01:06.753

In addition to Michael's answer, it is important to realize that `float **env` will **not** give you a continuous chunk of memory. It will give you a pointer to a continuous chunk of memory, and in each of those memory locations is a pointer to a continuous chunk of memory, but there is no guarantee that those chunks are aligned.

For example doing:

```
int *x = malloc(sizeof(int)); 
int *y = malloc(sizeof(int)); 
```

x and y are not guaranteed to be continuous in memory, yet this is what your code is assuming.

# android - getSupportFragmentManager() 未定义

> ID：13212353
> 
> 赞同：54
> 
> 时间：2012-11-03T18:50:54.240
> 
> 标签：android, android-fragments, actionbarsherlock, android-dialogfragment

我收到以下错误：***“方法 getSupportFragmentManager() 未定义类型 new View.OnClickListener(){}”***在我的片段文件中，如下所示。

我有通过 ABS 引用的兼容性库和适当的导入。我重新安装了带有兼容性库的 ABS 库，清理了项目，重新启动了 Eclipse，但没有任何效果。

本质上，我试图让片段通过对话框片段显示日期选择器。选择日期后，必须将其返回到片段，以便可以使用它来计算基于该日期的信息。

这是我的片段的代码：

```
package com.owentech.abstabsviewpager;

import android.app.Activity;
import android.app.Dialog;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.Toast;
import android.support.v4.app.DialogFragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentTransaction;
import com.actionbarsherlock.app.SherlockFragment;

public class ObstetricsFragment1 extends SherlockFragment{

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState)
{
    //Fragment Layout
    View view = inflater.inflate(R.layout.obstetricsfragment1, container, false);

    Button mPickLMPDate = (Button) view.findViewById(R.id.pickLMPDate);

    mPickLMPDate.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            LMPDatePickerDialogFragment d = LMPDatePickerDialogFragment.newInstance();
            d.show(getSupportFragmentManager(), "dialog");
        }

    });

    return view;
}

public Dialog onCreateDialog(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    return null;
}

} 
```

这是对话框片段的代码：

```
package com.owentech.abstabsviewpager;

import android.app.Dialog;
import android.os.Bundle;
import android.widget.DatePicker;
import android.app.DatePickerDialog;

public class LMPDatePickerDialogFragment extends ObstetricsFragment1 implements DatePickerDialog.OnDateSetListener {

static LMPDatePickerDialogFragment newInstance() {
    LMPDatePickerDialogFragment d = new LMPDatePickerDialogFragment();
    return d;
}

private int mLMPYear;
private int mLMPMonth;
private int mLMPDay;

public Dialog onCreateDialog(Bundle savedInstanceState) {
    return new DatePickerDialog(getActivity(), this, mLMPYear, mLMPMonth, mLMPDay);
}

public void onDateSet(DatePicker view, int year, int month, int day) {
    mLMPYear = year;
    mLMPMonth = month;
    mLMPDay = day;
}
} 
```

最后，这是我的活动的代码：

```
package com.owentech.abstabsviewpager;

import java.util.ArrayList;
import android.content.Context;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuInflater;
import android.widget.TextView;
import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.actionbarsherlock.app.ActionBar.Tab;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.app.FragmentTransaction;
import android.support.v4.app.Fragment;
import android.support.v4.view.ViewPager;

public class Obstetrics extends SherlockFragmentActivity
{
ViewPager mViewPager;
TabsAdapter mTabsAdapter;
TextView tabCenter;
TextView tabText;

// START Action Bar Menu Items  
@Override
public boolean onCreateOptionsMenu(Menu menu) {
   MenuInflater inflater = getSupportMenuInflater();
   inflater.inflate(R.menu.main_menu, menu);
   return super.onCreateOptionsMenu(menu);
}

@Override
public boolean onOptionsItemSelected(com.actionbarsherlock.view.MenuItem item) {
    switch (item.getItemId()){
    case R.id.menuLog:
        ChangeLog cl = new ChangeLog(this);
        cl.getFullLogDialog().show();
        return true;
    case R.id.menuEmail:
        Intent emailIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("mailto:support@medicaldoctorapps.com"));
        startActivity(emailIntent);
        return true;
    case R.id.menuRate:
        Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("https://play.google.com/store/apps/details?id=appinventor.ai_shawn_m_gee.MedicalDoctor"));
        startActivity(browserIntent);
        return true;
    case android.R.id.home:
        // App icon in action bar clicked; go home
        Intent intent = new Intent(this, Home.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
        return true;
    case R.id.menuExit:
        this.finish();
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
}      
//END Action Bar Menu Items

// START Tabs View Pager (Add tabs by adding mTabsAdapter.addTab)   
@Override
public void onCreate(Bundle savedInstanceState)
{

    // Information you want returned to your application, via onCreate(), if the activity is destroyed and restarted due to some implicit reason        
    super.onCreate(savedInstanceState);

    mViewPager = new ViewPager(this);
    mViewPager.setId(R.id.pager);

    setContentView(mViewPager);
    ActionBar bar = getSupportActionBar();
    bar.setDisplayHomeAsUpEnabled(true);
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    mTabsAdapter = new TabsAdapter(this, mViewPager);

    mTabsAdapter.addTab(
            bar.newTab().setText("Wheel"),
            ObstetricsFragment1.class, null);
    mTabsAdapter.addTab(
            bar.newTab().setText("Physical"),
            HistoryPhysicalFragment2.class, null);
    mTabsAdapter.addTab(
            bar.newTab().setText("ROS"),
            HistoryPhysicalFragment3.class, null);
    mTabsAdapter.addTab(
            bar.newTab().setText("CAGE"),
            HistoryPhysicalFragment4.class, null);
    mTabsAdapter.addTab(
            bar.newTab().setText("SIGECAPS"),
            HistoryPhysicalFragment5.class, null);
    mTabsAdapter.addTab(
            bar.newTab().setText("Glasgow"),
            HistoryPhysicalFragment6.class, null);
    mTabsAdapter.addTab(
            bar.newTab().setText("Neuro"),
            HistoryPhysicalFragment7.class, null);
    mTabsAdapter.addTab(
            bar.newTab().setText("Dermat"),
            HistoryPhysicalFragment8.class, null);
    mTabsAdapter.addTab(
            bar.newTab().setText("Minicog"),
            HistoryPhysicalFragment9.class, null);
}

public static class TabsAdapter extends FragmentPagerAdapter implements
        ActionBar.TabListener, ViewPager.OnPageChangeListener
{
    private final Context mContext;
    private final ActionBar mActionBar;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

    static final class TabInfo
    {
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(Class<?> _class, Bundle _args)
        {
            clss = _class;
            args = _args;
        }
    }

    public TabsAdapter(SherlockFragmentActivity activity, ViewPager pager)
    {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mActionBar = activity.getSupportActionBar();
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args)
    {
        TabInfo info = new TabInfo(clss, args);
        tab.setTag(info);
        tab.setTabListener(this);
        mTabs.add(info);
        mActionBar.addTab(tab);
        notifyDataSetChanged();
    }

    @Override
    public int getCount()
    {
        return mTabs.size();
    }

    @Override
    public Fragment getItem(int position)
    {
        TabInfo info = mTabs.get(position);
        return Fragment.instantiate(mContext, info.clss.getName(),
                info.args);
    }

    public void onPageScrolled(int position, float positionOffset,
            int positionOffsetPixels)
    {
    }

    public void onPageSelected(int position)
    {
        mActionBar.setSelectedNavigationItem(position);
    }

    public void onPageScrollStateChanged(int state)
    {
    }

    public void onTabSelected(Tab tab, FragmentTransaction ft)
    {
        Object tag = tab.getTag();
        for (int i = 0; i < mTabs.size(); i++)
        {
            if (mTabs.get(i) == tag)
            {
                mViewPager.setCurrentItem(i);
            }
        }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft)
    {
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft)
    {
    }
}
// END Tabs View Pager

} 
```

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-01-18T17:01:22.717

您将通过使调用对话框的活动扩展 FragmentActivity 来摆脱这个问题

```
public class ObstetricsFragment1 extends FragmentActivity{ 
```

这是支持库所固有的，如[DIALOG SPECS](http://developer.android.com/guide/topics/ui/dialogs.html)和[SUPPORT LIBRARY SPECS中所示](http://developer.android.com/tools/extras/support-library.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-06T06:47:15.380

尝试将您的代码更改为：

```
public class ObstetricsFragment1 extends SherlockFragment{

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState)
{
    //Fragment Layout
    View view = inflater.inflate(R.layout.obstetricsfragment1, container, false);

    Button mPickLMPDate = (Button) view.findViewById(R.id.pickLMPDate);

    mPickLMPDate.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            LMPDatePickerDialogFragment d = LMPDatePickerDialogFragment.newInstance();
            FragmentManager fm = ObstetricsFragment1.this.getSherlockActivity().getSupportFragmentManager();
            d.show(fm, "dialog");
        }

    });

    return view;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-04T06:26:01.803

我对 Marco 的回答做了一个比较，看看他实际上建议改变什么：只是

```
d.show(getSupportFragmentManager(), "dialog"); 
```

至

```
FragmentManager fm = 
    ObstetricsFragment1.this.getSherlockActivity().getSupportFragmentManager();
d.show(fm, "dialog"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-10T13:07:41.550

如果有人正在使用`SherlockActivity`而不是`SherlockFragment`仅仅将活动扩展到`SherlockFragmentActivity`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-11T18:19:11.620

我在加载课程项目（[https://developer.android.com/training/multiple-threads](https://developer.android.com/training/multiple-threads)）时遇到了类似的问题。

为了解决这个问题，我不得不添加一个外部 jar（sdk/extras/android/support/v4/android-support-v4.jar）。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-15T22:05:04.940

您需要从 SherlockDialogFragment 扩展 ObstetricsFragment1。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-03T08:13:54.807

进入`FragmentManager`片段调用`getChildFragmentManager()`。看到[这个。](https://developer.android.com/reference/android/app/Fragment.html#getChildFragmentManager())

改变这个

```
mPickLMPDate.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        LMPDatePickerDialogFragment d = LMPDatePickerDialogFragment.newInstance();
        d.show(getSupportFragmentManager(), "dialog");
    }

}); 
```

至

```
mPickLMPDate.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        LMPDatePickerDialogFragment d = LMPDatePickerDialogFragment.newInstance();
        d.show(getChildFragmentManager(), "dialog");
    }

}); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-03-07T10:44:01.557

您的项目中存在问题，因为您正在使用已弃用的 actionBarSherlock ...您应该查看[Android Support](https://developer.android.com/topic/libraries/support-library/features.html)并使用它，因为 supportFragmentManager 可用。它很容易使用，将它添加到你的 build.gradle

```
compile "com.android.support:support-core-utils:25.2.0" 
```

在使用来自支持的 FragmentActivity 或 Fragment 扩展您的活动和片段之后。也许你将不得不因为使用夏洛克酒吧而做出一些改变

关于您的问题的另一件事是您从片段中调用了 supportFragmentManager ...您应该调用

```
getChildFragmentManager() // because it will be a nested fragment 
```

希望它有帮助

# c - 如何使用带有未指定长度的 char* 的 strcat

> ID：13212354
> 
> 赞同：0
> 
> 时间：2012-11-03T18:50:56.283
> 
> 标签：c, strcat

```
#include <stdio.h>
#include <string.h>

char* changeString(char *inputString);

int main() {
   printf("Changed string is %s\n", changeString("42"));
}

char* changeString(char *inputString) {
    static const char* someStrings[3] = {"abc", "def", "ghi"};
    char* output;
    strcat(output, someStrings[1]);
    return output;
} 
```

我正在尝试将 a 附加`char*`到另一个上，`char*`但是由于没有大小，`strcat`因此不断导致分段错误，更改为修复分段错误，但是我返回了错误的类型，并且无法在.`char*``char* output;``char output[100];``printf`

任何建议将不胜感激。

编辑：我知道上面的例子似乎没有任何价值，我改变了它来展示我正在使用的逻辑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T18:52:54.607

您尚未为输出字符串分配内存。请使用 malloc() 分配内存，然后尝试 strcat。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T18:55:29.597

您可以动态分配内存，或保留可以传递给调用者的静态存储（但如果您愿意，您的程序将不是线程安全的）。

```
 static char output[100]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T18:57:09.750

该变量`output`不指向任何东西并且具有未定义的值。您收到的错误是因为您正在尝试写入该未知地址。

首先，您必须为输出字符串分配一些内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T18:55:07.133

您正在一块未分配的内存中写入信息。用于`malloc`分配一些内存，然后用于`strncat`确保它不会超出范围：

```
char* output;
output = (char *)malloc(100*sizeof(char));
output[0] = '\0';
strncat(output, someStrings[1], 100); 
```

然后，当您完成`output`结果后，调用`free()`以将内存还给系统。请注意，您在这里涉及复杂的问题。不要轻视动态内存分配。

有关更多信息，请参阅联机帮助页。或者这个：[http ://en.wikipedia.org/wiki/C_dynamic_memory_allocation](http://en.wikipedia.org/wiki/C_dynamic_memory_allocation)

# php - 第二次访问 php 页面时的 Cookie 更新

> ID：13212355
> 
> 赞同：1
> 
> 时间：2012-11-03T18:51:04.503
> 
> 标签：php, http, cookies, setcookie

我有一个案例，如果页面已经被访问，我想利用 cookie 重定向到另一个页面。但是我希望在“第二次”而不是在用户第一次访问该页面时完成。我的猜测是我需要以某种方式将 Cookie 与 Counter 合并，但我不知道该怎么做。这是我到目前为止所拥有的。

```
if (isset($_COOKIE['beenhereonce'])) {
   $redirect_url = "Location: home.php";
} else {
    setcookie("beenhereonce",time()+120);
    $redirect_url = "Location: form.php";
} 
```

我希望在用户第二次访问该页面时设置beehereonce。我该如何改进以实现我的目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T19:04:51.887

您可以使用 cookie 来保持访问量，然后控制您的代码。

```
// Checking if cookie exist
if( isset($_COOKIE['visits']) )
{
    // Checking if the user already visited the site
    if( $_COOKIE['visits'] >= 1 )
        $redirect_url = "Location: home.php";

    // Increasing cookie value
    setcookie("visits", $_COOKIE['visits'] + 1, time()+120);
}
else
{
    // First visit
    $redirect_url = "Location: form.php";
    setcookie("visits", 1, time()+120);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T19:15:07.327

您可以设置 cookie 的值。该值将计算页面被访问的次数。然后，您可以通过以下方式进行检查：

```
if( isset($_COOKIE['cookiename']) )
{    
    if( $_COOKIE['cookiename[count]'] == '2' ) {
        $redirect_url = "...";
    }
    else {
        $redirect_url = "...";
        setcookie("cookiename[count]", $_COOKIE['cookiename[count]'] + 1, time()+X);
    }
}
else {
    setcookie("cookiename[count]", 1, time()+X);
} 
```

X 是您的 cookie 过期的时间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T19:01:39.537

你可以在顶部试试这个：

```
if (isset($_COOKIE['beenhereonce'])) {
   $redirect_url = "Location: home.php";
} 
```

这在底部：

```
setcookie("beenhereonce",time()+120); 
```

这样，cookie 在第一个页面加载结束时设置，并在第二个页面加载时检查。

# html - CSS下拉导航导致html内容移动

> ID：13212361
> 
> 赞同：6
> 
> 时间：2012-11-03T18:51:34.130
> 
> 标签：html, css, navigation, hover, positioning

我关于 SO 的第一个问题，希望它符合要求，对于精通 CSS 艺术的人来说应该是一个简单的解决方案......

我遇到的问题是我的 css 驱动导航的下拉部分导致其下方的内容向右移动。我发现发布了类似的问题，但我已经尝试了所有提供的解决方案，但似乎没有任何效果......

我设法得到的最接近的方法是添加`position:absolute;`到`#nav li:hover ul`标签中，这确实会阻止内容四处移动，但会产生一个新问题，下拉子菜单仅在鼠标悬停在顶级菜单项上时才可见，并试图将鼠标向下移动子菜单会导致它消失...另一个我发现同样令人沮丧的问题要解决...

导航的 html 是标准的嵌套列表：

```
<div id="navigation_panel" class="orange_grad">
    <!-- navigation-->
      <ul id="nav">
            <li><a href="#">about us</a>
                    <ul>
                            <li class="orange_grad"><a href="1">staff</a></li>
                            <li class="orange_grad"><a href="2">venue</a></li>
                            <li class="orange_grad"><a href="2">history</a></li>
                            <li class="orange_grad"><a href="2">community theatre</a></li>
                            <li class="orange_grad"><a href="2">rep theatre</a></li>
                            <li class="orange_grad"><a href="2">theatre school</a></li>
                            <li class="orange_grad"><a href="2">official partners</a></li>
                    </ul>
            </li>
            <li><a href="#">join us</a>
                    <ul>
                            <li class="orange_grad"><a href="1">friends membership</a></li>
                            <li class="orange_grad"><a href="2">wine club</a></li>
                    </ul>
            </li>
            <li><a href="#">hire</a>
                    <ul>
                            <li class="orange_grad"><a href="1">business</a></li>
                            <li class="orange_grad"><a href="2">rehersal space</a></li>
                            <li class="orange_grad"><a href="2">community groups</a></li>
                            <li class="orange_grad"><a href="2">theatre productions</a></li>
                            <li class="orange_grad"><a href="2">memorable occasions</a></li>
                    </ul>
            </li>
            <li><a href="#">contact</a>
                    <ul>
                            <li class="orange_grad"><a href="1">list of contacts</a></li>
                            <li class="orange_grad"><a href="2">contact us now</a></li>
                    </ul>
            </li>
            <li class=" last"><a href="#">support</a>
                    <ul>
                            <li class="orange_grad last"><a href="1">donations + requests</a></li>
                            <li class="orange_grad last"><a href="2">past sponsors</a></li>
                            <li class="orange_grad last"><a href="2">thanks</a></li>
                            <li class="orange_grad last"><a href="2">volunteers</a></li>
                            <li class="orange_grad last"><a href="2">set up a community event</a></li>
                    </ul>
            </li>
    </ul> 
```

随附的css如下：

```
#navigation_panel {border-radius: 18px 18px 0 0/ 18px 18px 0 0; width: 900px; height:50px;}

#nav { margin:0; padding: 0; list-style:none;}
#nav a{ color:black; font-size: 20px; text-decoration:none; min-height:50px; width:95px;}
#nav li {text-align:center; float:left; padding:14px 8px ; cursor:pointer; width:95px;}
#nav li.last{width:99px;}

#nav li ul {margin-top:14px; margin-left:-8px; padding:0; display: none; list-style:none;}
#nav li ul li{ border:1px solid black; width:95px; padding:6px 8px;}
#nav li ul li a{/*font-family:arial;*/ font-size:14px;}

#nav li:hover{ text-decoration:underline; }
#nav li:hover ul{display: block;}
#nav li:hover ul li {clear: left;} 
```

我试图通过正常路线（在谷歌上搜索，SO 等）以及玩各种定位配置来寻找解决方案，但我似乎无法解决这个问题......提前感谢您的帮助，这个问题一直存在整天让我发疯！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-03T18:59:49.817

**更新**

终于有机会重新审视这个问题。您只需将以下内容添加到`#nav li ul`：

```
position: absolute;
z-index: 100; 
```

在 IE8/9、FF 和 Chrome 中工作，虽然子菜单的位置在 IE7 中是关闭的，无论我是否更改。为了解决这个问题，我推荐通过您喜欢的任何方法使用 IE7 特定的 CSS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T21:05:07.477

您可以尝试使用[z-index](http://www.w3schools.com/cssref/pr_pos_z-index.asp)做一些事情。Z-index 正在“制作”图层，因此也许您可以将子导航设置为 z-index: 2。

但是，在制作下拉菜单等情况下，我建议使用 jQuery。我曾经尝试用纯 CSS 和 HTML 制作下拉菜单，但很快发现 jQuery 更好。

使用 jQuery 的下拉菜单示例：[jsfiddle](http://jsfiddle.net/V8E3L/2/)

jQuery：

```
$(".subnav").hide();
$(".navigation li a, .subnav").hover(function(){
    $(this).parent().find(".subnav").stop().fadeIn(400);
}, function(){
    $(this).parent().find(".subnav").stop().fadeOut(400);
});​ 
```

HTML：

```
<div>
    <ul class="navigation">
        <li><a>Example 01</a></li>
        <li><a>Example 02</a>
            <ul class="subnav">
                <li><a>Lorem</a></li>
                <li><a>Impsum</a></li>
                <li><a>Dolor</a></li>
                <li><a>Sit</a></li>
                <li><a>Amet</a></li>
            </ul>    
        </li>
        <li><a>Example 03</a></li>
        <li><a>Example 04</a></li>
    </ul>                                        
</div>​ 
```

CSS：

```
.navigation li{
    display: inline;
    font-family: Arial, sans-serif;
    font-size: 12px;
    padding: 0 10px;
    position: relative;
}
.navigation li a:hover{
    color: #999;
}
.subnav li{
    display: list-item;
    padding: 5px 10px;
}
.subnav{
    border: 1px solid #000;
    width: 70px;
    position: absolute;
    z-index: 2;
    margin-left: 10px;
}
​ 
```

# java - 访问接口对象的 ArrayList

> ID：13212362
> 
> 赞同：0
> 
> 时间：2012-11-03T18:51:40.437
> 
> 标签：java, interface, arraylist

所以我有这个ArrayList，它使用一个名为drink 的接口将不同种类的对象（如咖啡、苏打水、茶）存储在一个名为drinkList 的ArrayList 中。我想声明一个饮料对象，它具有饮料列表中第 i 个元素的组件，不知道那是什么类型的对象。我该怎么做？

```
public boolean contains (String drinkName, ArrayList drinkList){
 boolean ifThere = false; 
 int sizeList = drinkList.size() -1; 
 for(int i=0; sizeList > i; i++){ 
 Drink booleanDrink = drinkList.get(i);
  String booleanName = booleanDrink.getName(); 
     if (booleanName.equals(drinkName)){ 
        ifThere = true; 
} 
} 
return ifThere; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T22:06:05.573

您需要将`get`调用结果转换`Drink`为：

```
Drink booleanDrink = (Drink) drinkList.get(i); 
```

或者使用 an`ArrayList<Drink>`而不是 plain `ArrayList`。

# jakarta-ee - mvn tomcat:run - 更改默认的 maven tomcat 端口

> ID：13212365
> 
> 赞同：10
> 
> 时间：2012-11-03T18:51:49.863
> 
> 标签：jakarta-ee, tomcat, maven, spring-roo

尝试遵循我执行的 Spring roo 教程步骤：

```
$ mkdir sample
$ cd sample
$ roo
roo> script --file filename.roo
roo> quit
$ mvn tomcat:run 
```

当我启动时， 我会因为这个端口很忙而`mvn tomcat:run`挂断控制台。`INFO: Starting Coyote HTTP/1.1 on http-8080`我在哪里可以将 8080 端口更改为另一个端口（我试图更改 tomcat 端口，在 maven 文件夹、.m2 文件夹和项目文件夹中没有找到任何内容）？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-03T19:04:53.127

您可以使用：

```
mvn tomcat:run -Dmaven.tomcat.port=8081 
```

在不同的端口（在本例中为 8081）启动它。

或者，在您的 pom 中定义一个 pluginMangement 部分，用于配置 tomcat 插件上的“端口”配置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T10:47:57.450

请参阅此处的文档[http://tomcat.apache.org/maven-plugin-2.0/tomcat7-maven-plugin/run-mojo.html#port](http://tomcat.apache.org/maven-plugin-2.0/tomcat7-maven-plugin/run-mojo.html#port)

并考虑使用现在位于 Apache 的新版本！codehaus 版本不再维护！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-16T11:08:40.843

您可以在 POM.xml 文件中更改指定要运行 tocat 的自己的端口号

```
 <plugin>
                <groupId>org.apache.tomcat.maven</groupId>
                <artifactId>tomcat7-maven-plugin</artifactId>
                <version>2.2</version>
                <configuration>
                    <path>/</path>
                    <contextReloadable>true</contextReloadable>
                    <port>5555</port>
                </configuration>
            </plugin> 
```

之后 smiply 去 Run As->Maven Build-> "tomcat7:run"

# java - 无法获取 Android 地图 API 的密钥库

> ID：13212366
> 
> 赞同：2
> 
> 时间：2012-11-03T18:52:18.817
> 
> 标签：java, android, keystore

我最近尝试访问由 Eclipse SDK 创建的调试密钥库，以便在我的应用程序中使用 Google 地图 API。现在我知道该文件存在并且有它的路径。但是，要访问它并接收 MD5 指纹，我必须使用 keytool 命令。

现在我被告知这个命令必须在计算机命令提示符下完成，因为没有 keytool GUI。这就是问题所在，因为我的命令提示符无法识别我给它的命令。这是命令：

```
keytool -list-alias androiddebugkey-keystore(path_to debug_keystore).keystore-storepass android -keypass android 
```

（括号应该是左右箭头）命令提示符回复：

> keytool 不是内部或外部命令、可运行程序或批处理文件。

现在我尝试手动输入我认为是 (C:\Users\Adam.Android\debug.keystore).keystore 的路径我还尝试了 C:\Adam.Android\debug.keystore).keystore Adam 的变体。 Android\debug.keystore).keystore .Android\debug.keystore).keystore debug.keystore).keystore

然后它回复：“系统找不到指定的路径”

因此，要么命令提示符无法识别命令“keytool”，要么我输入了错误的路径（这可能是因为我不经常使用命令提示符命令来知道如何成功编写路径）。

我还`C:\Program Files\Java\jre6\bin`通过我的命令提示符运行它并回复：

> C: program\ 没有被识别为内部或外部命令

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:15:56.543

您需要用双引号括起来包含空格（或特殊字符）的命令/目录**“**

因此，要运行您的命令，您将使用：

```
C:\> "C:\Program Files\Java\jre6\bin\keytool" (option parameters) 
```

因此，您的完整命令应如下所示：

```
C:\> "C:\Program Files (x86)\java\jre6\bin\keytool.exe" -list -alias androiddebugkey -keystore C:\Users\Shazar\.android\debug.keystore -storepass android -keypass android 
```

我已经在我的系统上验证了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T19:35:04.087

我接受@chrkad 的答案，但要生成 MD5 证书，您应该始终使用位于 jdk5 或 jdk6（开发工具包）文件夹中的 keytool.exe。jre6 将提供运行环境，当您使用 jre keytool 生成的 MD5 证书获取地图 api 密钥时会出现问题。我遇到了这样的问题并与您分享。

# .htaccess - htaccess 总是有问题

> ID：13212369
> 
> 赞同：0
> 
> 时间：2012-11-03T18:52:40.730
> 
> 标签：.htaccess

我试图用我的 htaccess 解决一个问题。

```
 RewriteBase /
   RewriteRule ^(.+)/$ /$1 [R=301,L]
   RewriteRule ^profile/(.*)$ details.php?profile=$1 [L,NC,QSA]
   RewriteRule ^industry/(.*)$ category.php?industry=$1 [L,NC,QSA]

   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteCond %{REQUEST_FILENAME} !-d 
   RewriteRule ^index.php$ /index.php [L,NC] 
```

只要有个人资料或行业匹配，它就可以正常工作..但现在我想要实现的是当以上没有规则匹配时，它应该将用户重定向到主页（www.example.com）。发生的事情是将我重定向到 index.php 但问题出在浏览器上它仍然显示（www.example.com/skfjsf/sfjsfk）我想将其更改为（www.example.com）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T18:56:45.287

尝试：

```
RewriteRule ^index.php$ /index.php [r=301,nc]      

//instead of 

RewriteRule ^index.php$ /index.php [L,NC] 
```

# perl - Perl 中使用的计算系统内存

> ID：13212374
> 
> 赞同：0
> 
> 时间：2012-11-03T18:53:24.543
> 
> 标签：perl, memory, windows-7, virtual-memory, strawberry-perl

我在这里遵循了最佳答案[，请参阅下面的代码](https://stackoverflow.com/questions/1115743/how-can-i-programmatically-determine-my-perl-programs-memory-usage-under-window)以获取在我的 perl 代码中的给定行使用的系统内存。我正在运行 Windows 7 Home Basic，64 位，4 GB 内存，4.06 GB 虚拟内存（在我的电脑下的**高级系统设置中指定）。**在 perl **Out of Memory**之前，我在一行中收到了 perl 的以下消息。

> 内存使用量：1916346368

假设这个数字以字节为单位（= 1.78 GB），为什么 perl 会出现内存不足？如何获取所有进程的系统总内存使用量？

计算内存的代码块如下。我正在使用草莓 Perl 5.12.3.0

```
use Win32::OLE qw/in/;

sub memory_usage() {
    my $objWMI = Win32::OLE->GetObject('winmgmts:\\\\.\\root\\cimv2');
    my $processes = $objWMI->ExecQuery("select * from Win32_Process where ProcessId=$$");

    foreach my $proc (in($processes)) {
        return $proc->{WorkingSetSize};
    }
}

print 'Memory usage: ', memory_usage(), "\n"; 
```

Perl -V 提供以下信息 [http://pastebin.com/mvF7YgKH](http://pastebin.com/mvF7YgKH)

**更新：**这个问题用 64 位 perl 解决了。但我也注意到该程序在 Ubuntu 上运行 32 位 perl 时没有任何障碍。因此，Windows 上的 Strawberry perl 可能比 Ubuntu 上的 perl 占用更多内存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T19:47:41.883

如果您试图分配或重新分配一个巨大的字符串、数组或散列，它可能会请求比系统可用的更大的内存块。虽然您有 4 gigs 的实际内存和 4 gigs 的虚拟内存，但其他进程可能已经消耗了其中的很大一部分。

或者，您的系统可能有一个每个进程的内存限制，可能是 2 gig。

最后，您的操作系统可能是 64 位的，但您的 Perl 可能是 32 位的。在这种情况下，它可以处理的最大内存量为 2 gig。如果您在某个地方发布我们可以查看的副本，`perl -V`我们也许可以解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T22:24:36.427

你有 32 位 Perl。Windows 不能为 32 位进程分配超过 2GB 或内存也就不足为奇了。如果您安装 64 位 Perl，这应该在物理 RAM 上达到最大值。

# javascript - 在类的构造函数中获取类的父类实例

> ID：13212375
> 
> 赞同：1
> 
> 时间：2012-11-03T18:53:27.027
> 
> 标签：javascript, oop, prototypejs

```
var Shape = Class.create(new Element("div", {
    "class": "shape"
}), {
    //constructor of Shape
    initialize: function () {

    }
}) 
```

Shape 类继承自 Element 的一个*实例*，我想知道的是，如果可以的话，如何在 Shape 的构造函数中引用这个*实例？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:03:30.470

[http://jsfiddle.net/r585d/](http://jsfiddle.net/r585d/)

使用 this 来引用构造函数中的`Element`实例`Shape`：

`this.constructor.prototype`

或者，您可以这样做（因为从元素继承形状没有意义）：

```
var Shape = (function() {
    var elem = new Element("div", {
        "class": "shape"
    });
    return Class.create({
        initialize: function() {
            //refer to elem here    
        }
    });
})(); 
```

# c# - 命令模式中的 2 种命令

> ID：13212376
> 
> 赞同：0
> 
> 时间：2012-11-03T18:53:29.007
> 
> 标签：c#, .net, asynchronous, command-pattern

我正在使用命令模式开发应用程序。我的程序中有两种操作：1.长时间操作（复制/删除文件），应该异步运行 2.简单操作（刷新面板）

我的问题是：我可以在这个模式中实现 2 种命令（AsyncCmd 和 SimpleCmd）吗？在命令管理器中执行之前检查命令类型：

```
public void Execute()
   {
     if(cmd is AsyncCmd)
        {
         RunAsyncOperation();
        }
     else if(cmd is SimpleCmd)
        {
         RunOperation();
        }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T20:15:24.213

您可以，但是使用 if else 来定义操作类型会违背命令模式的目的。异步和简单（我猜是同步的）应该是单独的命令，每个命令都继承自 ICommand （它有一个方法 Execute()) 。这些命令应该使用可以处理命令特定上下文的工厂创建，例如您必须为异步操作执行的任何特殊操作等。

# mysql - 导轨和 mysql。有什么方法可以查看表格吗？

> ID：13212377
> 
> 赞同：1
> 
> 时间：2012-11-03T18:53:29.477
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我刚刚开始使用 Rails，并且一直在使用 mysql2 gem。我意识到在 Rails 上，迁移用于更改数据库中的表。

所以我只是想知道我是否可以在 Mysql 中查看表？还有一些方法可以使插入、删除等更有效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T19:10:42.813

在您的 rails 目录中，您可以使用 shell 命令`rails dbconsole`使用您的 rails 项目的配置直接连接到数据库，并在 shell 中编写原始 SQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T18:59:31.187

您可以使用 mysql 客户端与 mysql 数据库进行交互。我将从阅读 mysql 的文档开始。

# python - 使用 IMAPClient 如何查看发件人地址？

> ID：13212379
> 
> 赞同：0
> 
> 时间：2012-11-03T18:53:34.003
> 
> 标签：python, imaplib, imapclient

使用[IMAPClient](http://imapclient.freshfoo.com/)如何查看邮件正文和发件人电子邮件地址？

```
server = IMAPClient(imap_server, use_uid=True, ssl=ssl)
server.login(imap_user, imap_password)

print 'login successful'

select_info = server.select_folder('INBOX')
print '%d messages in INBOX' % select_info['EXISTS']

messages = server.search(['NOT DELETED'])
print "%d messages that aren't deleted" % len(messages)

print
print "Messages:"
response = server.fetch(messages, ['FLAGS', 'RFC822.SIZE'])
for msgid, data in response.iteritems():
    print '   ID %d: %d bytes, flags=%s' % (msgid,
                                            data['RFC822.SIZE'],
                                            data['FLAGS']) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-03T19:27:41.407

虽然`IMAPClient`比使用容易得多`imaplib`，但了解[IMAP 协议仍然很有用](http://james.apache.org/server/rfclist/imap4/rfc2060.txt)

（注意，我选择了一个任意的单个电子邮件 ID 来使用）

您可以通过以下方式获取 FROM：

```
server.fetch([456], ['BODY[HEADER.FIELDS (FROM)]'])
# {456: {'BODY[HEADER.FIELDS (FROM)]': 'From: Facebook <register+mr4k25sa@facebookmail.com>\r\n\r\n', 'SEQ': 456}} 
```

和身体通过：

```
server.fetch([456], ['BODY[TEXT]'])
# {456: {'BODY[TEXT]': "Hey Jon,\r\n\r\nYou recently entered a new contact email [snip]", 'SEQ': 456}} 
```

但是，通常更容易做的是：

```
import email
m = server.fetch([456], ['RFC822'])
msg = email.message_from_string(m[456]['RFC822'])
print msg['from']
# Facebook <register+mr4k25sa@facebookmail.com>
from email.utils import parseaddr
print parseaddr(msg['from'])
# ('Facebook', 'register+mr4k25sa@facebookmail.com')
print msg.get_payload()
# content of email... 
```

请注意有效负载包含附件或多部分的位置...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T19:11:04.550

消息正文是这样找到的（我将使用循环来打印每个未删除的消息正文）：

```
 for i in server[0].split():
      body = server.fetch(i,"BODY[TEXT]")
      print(body) 
```

这应该为消息正文做......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-11T11:00:34.323

IMAPClient 是一个相当低级的库，因此您仍然必须了解 IMAP 协议。

您可以尝试使用更高级的 IMAP 库：[imap_tools](https://github.com/ikvk/imap_tools)

*   解析的电子邮件属性
*   用于搜索电子邮件的查询生成器
*   处理文件夹中的电子邮件（复制、删除、标记、移动、查看）
*   使用邮箱文件夹（列表、设置、获取、创建、存在、重命名、删除、状态）
*   无依赖

# c++ - 你如何检查鼠标是否在freeglut的三角形区域内单击？

> ID：13212380
> 
> 赞同：1
> 
> 时间：2012-11-03T18:53:35.403
> 
> 标签：c++, opengl, freeglut

我的小 Opengl/freeglut/c++ 2D 编辑器项目有问题。

编辑器允许您绘制四边形或三角形（对象）。您可以通过拖动对象的一角来调整对象的大小。如果对象处于活动状态，您还可以在屏幕上移动对象（单击对象使其处于活动状态）。

现在我遇到的问题是对您单击的区域进行操作以使对象处于活动状态。激活区域以前只是围绕对象的一个​​四边形（获取对象的宽度和高度等）（图片上的蓝点表示激活区域的边界）

[http://i48.tinypic.com/muyh41.png](http://i48.tinypic.com/muyh41.png)

但我希望激活区域是对象的区域，而不是它周围的四边形。所以问题是你将如何检查鼠标是否在文本上方或下方的图片内单击？

[http://i49.tinypic.com/abmli8.png](http://i49.tinypic.com/abmli8.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T18:58:36.857

OpenGL 只是一个绘图 API，（免费）GLUT 只是一个用于创建附加了 OpenGL 上下文的窗口的简约框架。他们都不会在那里帮助你。

您必须手动执行*射线三角形相交测试*

您可能对这些链接感兴趣

[http://www.lighthouse3d.com/tutorials/maths/ray-triangle-intersection/](http://www.lighthouse3d.com/tutorials/maths/ray-triangle-intersection/)

[http://www.gamedev.net/topic/447861-ray--triangle-intersection-code/](http://www.gamedev.net/topic/447861-ray--triangle-intersection-code/)

# javascript - WebRTC 性能 - 非常高的 CPU 负载

> ID：13212382
> 
> 赞同：5
> 
> 时间：2012-11-03T18:53:45.407
> 
> 标签：javascript, performance, html, html5-canvas, webrtc

[使用WebRTC](http://www.webrtc.org/) + 画布构建的运动检测器[js 库。](https://github.com/alonisser/WebcamSwiper)当我运行该应用程序时，我立即获得非常高的 CPU 使用率。我优化了循环等，但基本问题似乎是访问相机，例如 WebRTC。

**有没有办法让 WebRTC 表现得更好？**也许另一种配置？还是我缺少什么？这可能是我处理错误的一些 js 内存泄漏吗？我究竟做错了什么？

[您可以在此处](http://swiper.4p-tech.co.il)使用相同的库查看另一个演示

和一个使用 WebRTC 的不同的，[这里有同样的问题](http://enotionz.github.com/jscii/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T20:19:57.347

该演示看起来像是通过检查视频图像的像素来进行运动检测。它似乎将其呈现到画布上，然后检索画布图像数据。

这很慢，因为它只是一件很慢的事情 - 有很多像素，帧很快通过，而且这是一项高 CPU 工作。更糟糕的是，Javascript 在这种数据密集型处理中并不总是非常有效。所以我不认为缓慢是WebRTC固有的。这只是繁重的javascript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T06:27:55.397

您是否尝试过使用[Web Worker](http://www.html5rocks.com/en/tutorials/workers/basics/)进行计算？

有一个[使用网络工作者进行运动跟踪的演示](http://htmlfive.appspot.com/static/tracker1.html)（仅限 Firefox）。在这个演示中 CPU 使用率似乎很高，但工作人员报告的 fps 远远超过了视频的帧速率，因此尝试将工作人员限制为 30 fps 可能会有一些好处。

# android - 摩托罗拉 Defy 上的 ImageView 是黑色的

> ID：13212383
> 
> 赞同：1
> 
> 时间：2012-11-03T18:53:46.947
> 
> 标签：android, android-layout, android-imageview

我的摩托罗拉 Defy Plus 设备出现了一个奇怪的问题。

我得到了一个带有 TabHost 的简单布局，其中包含一个 ImageView 作为其中所有选项卡的背景图像。

出于某种奇怪的原因，特别是在 Motorola Defy 上，ImageView 显示为黑色！但在我测试过的所有其他设备上，它运行良好！（三星 Galaxy SII、Galaxy Mini、Nexus 7）

该图像是一个常规的 .jpg 文件，大小为 102KB，大小为 1330X1774。它位于 res\drawable 文件夹中。它的名字是——“blurtest_cropped2.jpg”

.xml 布局文件如下 -

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <ImageView
            android:id ="@+id/main_background_imageview" 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:src="@drawable/blurtest_cropped2"
            android:scaleType="centerCrop"
            />
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
        <!--  Required for TabWidget -->
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />
    </LinearLayout>
</TabHost> 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T13:53:17.140

摩托罗拉 Defy 的图像分辨率可能太高。如果您不想降低其他设备的分辨率，只需将较低分辨率的图像放在针对较小/低密度屏幕的可绘制文件夹中。

我最近在我的华为 Ideos X5 上遇到了类似的问题。我在同一个屏幕上有 2 个 ImageView，一个很好，另一个是黑色的。我注意到挑衅图像的分辨率明显高于其他图像。降低该图像的分辨率后，果然，挑衅的图像将不再挑战我。

*对不起，我太喜欢使用“Defy”这个词了。

# opencl - 如何为 ATI 和 NVIDIA 开发 OpenCL 代码？

> ID：13212385
> 
> 赞同：3
> 
> 时间：2012-11-03T18:53:56.373
> 
> 标签：opencl, nvidia, ati

我想写一个光线追踪器，GPGPU 似乎是加速它的好方法。问题是，虽然 OpenCL 是 Khronos 标准，但似乎 Intel、NVIDIA 和 ATI 都发布了自己的 SDK。

尽管周围的大多数人似乎都想知道他们的内核代码是否可以在所有平台上运行，但我想知道如何编译一个实际的 C 程序，该程序在所有平台上都使用 OpenCL API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:08:43.397

不幸的是，确保在所有平台上都没有错误的唯一方法是在所有平台（以及所有代 GPU 或 CPU ...）上测试您的内核，因为有时，当 AMD 编译器工作时，NVIDIA ptx 编译器会崩溃. 在你必须为每个 GPU 和 CPU 架构优化你的 OpenCL 代码之后......享受 OpenCL ;)

# ios - IOS 使用组不透明度控制

> ID：13212386
> 
> 赞同：0
> 
> 时间：2012-11-03T18:54:02.537
> 
> 标签：ios, opacity

我有一个滚动视图，其中包含一个视图，我在其中放置了成对的背景颜色图像视图和图像图像视图。我使用它为我的用户提供一个简单的滚动来选择要传输到主图像视图显示的图像。

我将滚动视图背景颜色设置为浅灰色，alpha 0,5，视图设置为 clearcolor，alpha 1，opaque=true，背景颜色图像设置为黑色或白色，alpha 1，opaque = true，图像是设置为 alpha 1，不透明=真。

我遇到的问题是，在 app-info.plist 中，我添加了“具有组不透明度的渲染”，但是无论设置如何（是或否），背景和图像都会继承滚动视图的不透明度。

![不透明度继承](../Images/1a2a631db946aa6a62860372fafedcef.png)

在此图像中，您可以在背景中看到主图像。浅灰色区域是滚动视图，不透明 = true，背景 = 浅灰色，alpha=0,9 顶部是 UIView，不透明 = true，背景 = 清晰，alpha =1 第一个拇指周围的黑暗区域是我的活动图像指示器，不透明 = true，背景 = 深灰色，alpha =1 其他拇指周围的白色区域（不可见）是我的非活动指示器，不透明 = true，背景 = 白色，alpha =1 包含拇指的图像视图不透明 =true , 背景白色, alpha =1

但是，您可以通过拇指查看背景图像。我希望拇指完全不透明，灰色为 alpha 0,5。使用当前设置 0,9 仅仅是因为这是我能做到的最好的设置。

此图像是在组不透明度设置为 no 的情况下拍摄的，但是该图像与组不透明度设置为 yes 相同。

我已经在其他应用程序的其他地方看到过这样做，但是除了关于这个参数的作用的简单说明之外，我找不到关于如何实现它的简单说明，因为我的做法肯定是错误的。

欢迎任何建议。

问候克里斯 H

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:49:33.807

这是一个相当普遍的问题，因为人们没有预料到在视图上设置 alpha 会影响子视图的渲染。在您的情况下，这将非常容易解决，因为您只希望背景颜色不透明。您可以轻松设置背景颜色的 alpha，它不会影响视图的子视图。

首先将所有视图的 alpha 设置为 1.0。

其次将灰色背景颜色的不透明度设置为 0.5。您可以在创建颜色的代码中执行此操作，例如：

```
[[UIColor darkGrayColor] colorWithAlphaComponent:0.5] 
```

或在 IB 中通过单击检查器中的背景颜色并调整颜色选择器中的不透明度滑块：

![在此处输入图像描述](../Images/31948be749cfb98ba29efc74449a5f95.png)

# android - 警告（junit.framework.TestSuite$1）：通过 Maven 执行 Android 测试时，构造函数中出现异常

> ID：13212396
> 
> 赞同：2
> 
> 时间：2012-11-03T18:54:59.217
> 
> 标签：android, maven, junit, android-testing

我通过 Maven 设置了一个 Android 测试项目，并按照[此处](http://code.google.com/p/maven-android-plugin/wiki/AutomateAndroidTestProject)的说明进行操作。基本上我能够设置测试项目，即使模拟器被识别，但在执行 mvn install （在 Eclipse 中）时我仍然无法通过 Maven 运行测试。如果我尝试执行它，我会收到以下错误：

[**失败的测试：警告（junit.framework.TestSuite$1）：构造函数中的异常：testPersistAndRead（java.lang.RuntimeException：存根！（..）警告（junit.framework.TestSuite$1）：构造函数中的异常：testFileNotExists（java.lang .RuntimeException：存根！（..）警告（junit.framework.TestSuite$1）：构造函数中的异常：testCreateFiles（java.lang.RuntimeException：存根！（..）警告（junit.framework.TestSuite$1）：构造函数中的异常：testFilesExist（java.lang.RuntimeException：存根！（..）警告（junit.framework.TestSuite $ 1）：构​​造函数中的异常：testAndroidTestCaseSetupProperly（java.lang.RuntimeException：存根！（..）**]

surfire 的输出告诉我它嵌套在 AndroidTestCase 中：

[**junit.framework.AssertionFailedError: 构造函数中的异常：testPersistAndRead (java.lang.RuntimeException: Stub! at android.test.AndroidTestCase.(AndroidTestCase.java:5) [...]**]

这是我尝试运行的测试。

```
public class PersistenceManagerTest extends AndroidTestCase {

    private final String FILENAME_PREFIX = "test.";

    protected void setUp() throws Exception {
        super.setUp();
        deleteInternalStorageFile();

        MockContentResolver resolver = new MockContentResolver();
        RenamingDelegatingContext renamingDelegatingContext = new RenamingDelegatingContext(new MockContext(), getContext(), FILENAME_PREFIX);
        Context context = new IsolatedContext(resolver, renamingDelegatingContext);

        setContext(context);
    }

    //AfterClass
    protected void tearDown() {
        deleteInternalStorageFile();
    }

    public void testPersistAndRead() throws IOException {
        String testData = "foobar";

        PersistenceManager.persist(testData, FileType.JSONDATA);

        String result = PersistenceManager.getFileData(FileType.JSONDATA);

        assertEquals(testData, result);
    }

    public void testFileNotExists()  {
        try {
            PersistenceManager.getFileData(FileType.JSONDATA);
            fail("PersistenceManager.getFileData should throw an exception!");
        } 
        catch (IOException e) {
            //expected
        }
    }

    public void testCreateFiles()  {
        try {
            PersistenceManager.createNewFiles();
        } 
        catch (IOException e) {
            fail("PersistenceManager.createNewFiles() threw an exception");
        }   
        try {
            PersistenceManager.getFileData(FileType.JSONDATA);
        } 
        catch (IOException e) {
            fail("PersistenceManager.getFileData should not throw an exception!");
        }
    }

    public void testFilesExist() throws IOException  {
        assertFalse(PersistenceManager.filesExist());

        PersistenceManager.createNewFiles();

        assertTrue(PersistenceManager.filesExist());
    }

    private void deleteInternalStorageFile() {
        getContext().deleteFile(PersistenceManager.JSONDATAFILE);
        getContext().deleteFile(PersistenceManager.TIMESTAMPFILE);
    }
} 
```

...这是来自测试项目的 pom.xml。

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns='http://maven.apache.org/POM/4.0.0' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
    xsi:schemaLocation='http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd'>
    <modelVersion>4.0.0</modelVersion>
    <groupId>net.mydomain.android</groupId>
    <artifactId>myproject-androidtests</artifactId>
    <packaging>apk</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>Testproject</name>

    <properties>
        <platform.version>2.1.2</platform.version>
        <android.sdk.path>/opt/android-sdk-linux</android.sdk.path>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
        <android.device>emulator</android.device>
    </properties>

    <dependencies>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>${platform.version}</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android-test</artifactId>
            <version>${platform.version}</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>net.mydomain.android</groupId>
            <artifactId>myartifact</artifactId>
            <type>apk</type>
            <version>1.0-SNAPSHOT</version>
        </dependency>

        <dependency>
            <groupId>net.mydomain.android</groupId>
            <artifactId>myartifact</artifactId>
            <scope>provided</scope>
            <type>jar</type>
            <version>1.0-SNAPSHOT</version>
        </dependency>

    </dependencies>
    <build>
        <outputDirectory>bin/classes</outputDirectory>
        <testOutputDirectory>bin/test-classes</testOutputDirectory>
        <sourceDirectory>src</sourceDirectory>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <version>3.1.1</version>
                <configuration>
                    <sdk>
                        <path>${android.sdk.path}</path>
                        <platform>7</platform>
                    </sdk>
                </configuration>
                <extensions>true</extensions>
            </plugin>
        </plugins>
    </build>
</project> 
```

任何想法为什么这不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T09:41:04.273

我在[这里](http://code.google.com/p/maven-android-plugin/issues/detail?id=43#c4)找到了解决方案。

dtmilano 的回答基本上没有错，但我不知道这对我的测试意味着什么。解决方案是告诉 Maven 仪表测试不能作为 JUnit 测试运行，因此仪表测试不能在 src/test/java 中，而在 src/main/java 中。相反，它们必须包含在 apk 中，因此它们被部署在设备上并被触发运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T22:43:15.517

您正在尝试在您的主机 JVM 中而不是在 android 设备或模拟器上运行您的测试。`android.jar`只包含存根，这就是你得到的原因

```
java.lang.RuntimeException: Stub!(..) 
```

# ios - 使用来自 iOS 的 HTTP POST 将照片上传到服务器

> ID：13212398
> 
> 赞同：1
> 
> 时间：2012-11-03T18:55:08.443
> 
> 标签：ios, http, post

我正在尝试使用 HTTP POST 请求上传照片。

这是我的代码：

```
// Value for arguments
NSDictionary * params = @{@"caption":@"%23me%20hello%20world"};
NSURL * url = [NSURL URLWithString:@"http://api.airshipdock.com/uploadPhoto?access_token=%@",access_token,nil];

NSMutableURLRequest * request = [[NSMutableURLRequest alloc] init];
[request setCachePolicy:NSURLRequestReloadIgnoringLocalCacheData];
[request setHTTPShouldHandleCookies:NO];
[request setTimeoutInterval:30];
[request setHTTPMethod:@"POST"];
[request setValue:[NSString stringWithFormat:@"multipart/form-data; boundary=%@",BoundaryConstant,nil] forHTTPHeaderField: @"Content-Type"];

// Create body
NSMutableData * body = [NSMutableData data];
for (NSString *param in params) {
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", BoundaryConstant] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"\r\n\r\n", param] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"%@\r\n", [params objectForKey:param]] dataUsingEncoding:NSUTF8StringEncoding]];
}
if (sendData) {
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", BoundaryConstant] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[@"Content-Disposition: form-data; name=\"file\"; filename=\"photo.jpg\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[@"Content-Type: image/jpeg\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[@"Content-Transfer-Encoding: binary\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:imageData];
    [body appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
}
[body appendData:[[NSString stringWithFormat:@"--%@--\r\n", BoundaryConstant] dataUsingEncoding:NSUTF8StringEncoding]];

[request setURL:url];
[request setHTTPBody:body];
[request setValue:[NSString stringWithFormat:@"%d", body.length] forHTTPHeaderField:@"Content-Length"];

NSURLResponse * response;
data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:error]; 
```

这是生成的请求：

```
POST /uploadPhoto?access_token=dd883d348d1a389dddaa91f8e1dd8f5f43dd8f4dd8f5d686e34c8a373f328c3 HTTP/1.1
Host: api.airshipdock.com
Accept-Encoding: gzip, deflate
Content-Type: multipart/form-data; boundary=V2ymHFg03ehbqgZCaKO6jy
Content-Length: 135597
Accept-Language: en-us
Accept: */*
Connection: keep-alive
User-Agent: Pictography/1.0 CFNetwork/609 Darwin/12.2.0

--V2ymHFg03ehbqgZCaKO6jy
Content-Disposition: form-data; name="caption"

%23me%20hello%20world
--V2ymHFg03ehbqgZCaKO6jy
Content-Disposition: form-data; name="file"; filename="photo.jpg"
Content-Type: image/jpeg
Content-Transfer-Encoding: binary

< here are image bytes >
--V2ymHFg03ehbqgZCaKO6jy-- 
```

服务器回答：

```
{
    "error": {
        "code":400,
        "type":"PHOTO_SAVE_FILE_INVALID",
        "description":"",
        "request_params": [
            {"key":"method","value":"uploadPhoto"}
            {"key":"access_token","value":"dd883d348d1a389dddaa91f8e1dd8f5f43dd8f4dd8f5d686e34c8a373f328c3"}
        ]
    }
} 
```

看着`request_params`我看到服务器看不到 POST 参数`caption`和`file`. 我的请求有什么问题？

这是服务器 API 文档：[LINK](http://vk.com/pages?oid=-43139085&p=API_%D0%B4%D0%BB%D1%8F_%D0%BA%D0%BE%D0%BD%D0%BA%D1%83%D1%80%D1%81%D0%B0)

# comments - Facebook 评论插件不显示在 Chrome 或 IE 9 上

> ID：13212399
> 
> 赞同：1
> 
> 时间：2012-11-03T18:55:12.077
> 
> 标签：comments, facebook-comments

我有个问题。我创建了一个 HTML 页面并插入了以下脚本（以获取 Facebook 评论插件），该`div`标签出现在我创建的随机剪贴页上，但又消失了。但是，我仍然无法弄清楚为什么它在我想要的页面上不起作用。有人可以在这里帮助我吗？

```
<div id="fb-root"></div>

<script>
(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); 
    js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=429158573799321";
    fjs.parentNode.insertBefore(js, fjs);
}
(document, 'script', 'facebook-jssdk'));
</script> 
```

# redhat - 如何为 Red Hat Enterprise Linux Client 下载启用图形界面？

> ID：13212401
> 
> 赞同：0
> 
> 时间：2012-11-03T18:55:17.647
> 
> 标签：redhat

我将 Red Hat Enterprise Linux Client 6.3 下载到了虚拟机上，但是当我使用 root 登录时，它只显示了一个命令行界面。安装没有附加图形界面。我该如何补救？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T19:40:45.550

弄清楚了。rhel 6 需要超过 512mb + 128mb 的内存才能安装图形界面。只是增加了虚拟框中分配的大小，它起作用了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T19:00:45.190

你应该做一些事情：

1.  添加新用户，请不要使用root作为普通用户。为新用户设置权限。
2.  安装 X 和你最喜欢的 GUI，比如 GNOME 或 KDE 什么的。您可以通过 yum group install 和 Internet 进行安装。
3.  设置 GDM 或 KDM（如果你不想要，没问题），配置你的桌面环境。

我认为 RedHat 有安装 GUI 的选项，因此您可以安装您的 CD/DVD，然后从它或使用互联网安装。

P/S：一本关于 RedHat 的书应该比在 SO 中询问更好。:D

# iphone - 屏幕范围有什么问题？

> ID：13212406
> 
> 赞同：1
> 
> 时间：2012-11-03T18:55:41.090
> 
> 标签：iphone, objective-c, ios, cocoa-touch

> **可能重复：**
> [TouchMoved 和错误的屏幕范围？还是 iOS 中的错误？](https://stackoverflow.com/questions/13222013/touchmoved-and-wrong-screen-range-or-bug-in-ios)

我在 iOS 中发现了有趣的错误，但试图相信我错了。你必须做两件事：1）为 iOS 创建单视图模板 2）在 ViewController.m 中编写小函数：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event 
{
    UITouch* touch = [touches anyObject];
    CGPoint point = [touch locationInView:[touch view]];
    NSLog(@"%@", NSStringFromCGPoint(point));
}// so u can detect points of your touch 
```

* * *

因此，如果您尝试将手指从屏幕的顶部移动到底部（纵向模式）-您会得到**[-5.5 .. 469]**范围内的点...我无法解释这一点，它只发生在设备上，在模拟器中工作正常。

# dynamics-crm - 在图表中编辑 fetch xml

> ID：13212409
> 
> 赞同：1
> 
> 时间：2012-11-03T18:55:56.730
> 
> 标签：dynamics-crm, dynamics-crm-2011

```
 <fetchcollection>
    <fetch mapping="logical" aggregate="true">
      <entity name="contact">
        <attribute groupby="true" alias="_CRMAutoGen_groupby_column_Num_0" name="hpcrm_currentsegmentid" />
        <order alias ="new_rank" descending="false"/>
        <attribute alias="_CRMAutoGen_aggregate_column_Num_0" name="hpcrm_revenue" aggregate="sum" />
        <attribute alias="_CRMAutoGen_aggregate_column_Num_13" name="hpcrm_aum" aggregate="sum" />
        <attribute alias="_CRMAutoGen_aggregate_column_Num_14" name="hpcrm_revenuelastyear" aggregate="sum" />
        <link-entity name="hpcrm_businesstier" from="hpcrm_businesstierid" to="hpcrm_currentsegmentid" alias="aa" > 
        </link-entity>
      </entity>
    </fetch>
  </fetchcollection>
  <categorycollection>
    <category alias="_CRMAutoGen_groupby_column_Num_0">
      <measurecollection>
        <measure alias="_CRMAutoGen_aggregate_column_Num_0" />
      </measurecollection>
      <measurecollection>
        <measure alias="_CRMAutoGen_aggregate_column_Num_13" />
      </measurecollection>
      <measurecollection>
        <measure alias="_CRMAutoGen_aggregate_column_Num_14" />
      </measurecollection>
      <measurecollection>
        <measure alias="new_rank" />
      </measurecollection>
    </category>
  </categorycollection> 
```

我正在生成图表，但想按属性应用顺序，该属性存在于与该实体有`n:1`关系的另一个实体中。这里`new_rank`属性存在于`businesstier`实体中。

```
<link-entity name="hpcrm_businesstier" from="hpcrm_businesstierid" 
  to="hpcrm_currentsegmentid" alias="aa" > 
```

在这里，我将业务层加入到联系人实体中。

但是当我尝试导入 XML 时出现无效的 XML 错误。

> 指定的 XML 文件“Revenue_AUM by Current Segment.xml”不是有效的 XML 或不符合图表架构

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T00:50:38.077

将您的订单声明移动到链接实体内。授予不是您的查询，而是类似于：

```
<fetch mapping="logical" count="50" version="1.0">
    <entity name="account">
        <attribute name="accountnumber" />
        <link-entity name="account" from="accountid" to="parentaccountid">
            <attribute name="accountnumber" />
            <order attribute="accountnumber" />
        </link-entity>
    </entity>
</fetch> 
```

# ruby-on-rails - RSpec with Ruby on Rails - 测试路由时参数数量错误（1 比 0）

> ID：13212410
> 
> 赞同：3
> 
> 时间：2012-11-03T18:55:58.597
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, tdd

我尝试测试路线，只是从 rspec-rails 文档中复制了示例。

```
describe "routing to profiles" do
  it "routes /profile/:username to profile#show for username" do
    expect(:get => "/profiles/jsmith").to route_to(
      :controller => "profiles",
      :action => "show",
      :username => "jsmith"
    )
  end
end 
```

运行 RSpec 时出现以下错误：

```
Failures:

  1) routing to profiles routes /profile/:username to profile#show for username
     Failure/Error: expect(:get => "/profiles/jsmith").to route_to(
     ArgumentError:
       wrong number of arguments (1 for 0)
     # ./spec/routing/test_spec.rb:11:in `block (2 levels) in <top (required)>'

Finished in 0.001 seconds
1 example, 1 failure 
```

这里出了什么问题？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T20:20:57.193

`expect`需要一个块。这意味着使用大括号：

```
expect{ :get => "/profiles/jsmith" }.to route_to( 
```

参考：[RSpec 期望 2.0](https://www.relishapp.com/rspec/rspec-expectations/v/2-0/docs/matchers/expect-change)

我认为无论如何你都不需要期望。[测试无法直接访问的 RSpec 控制器操作的](https://stackoverflow.com/questions/4227638/testing-an-rspec-controller-action-that-cant-be-accessed-directly)代码

```
describe "routing" do
  it "routes /auth/:provider/callback" do
    { :post => "/auth/twitter/callback" }.should route_to(
      :controller => "authentications",
      :action => "create",
      :provider => "twitter")
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T20:25:02.943

您的`it`阻止列表`/profile/:username`，而您的示例列表`/profiles/jsmith`（注意个人资料上的复数）。我猜应该`/profile/jsmith`是

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T01:44:58.820

get 命令的语法是`get your_action, params => your_params`. 我会尝试`get :show, username => "user"`按照 B Seven 的建议与花括号一起使用。您可能还需要将您的规范包装在一个描述块中，例如`describe MyController do`，或者可能将控制器的名称作为参数传递

# android - 如何在 abs 中调整操作栏项目中的图标边距

> ID：13212412
> 
> 赞同：0
> 
> 时间：2012-11-03T18:56:02.200
> 
> 标签：android, android-actionbar, actionbarsherlock

我有一个操作栏，它在左侧显示应用程序标题、搜索操作菜单项和列表/更多菜单项。

现在，我的问题是操作菜单项之间的边距不均等。所以我想将它调整为操作栏中彼此操作菜单项之间的相等空间。我如何通过样式或任何其他方式调整此操作菜单项空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:13:39.873

我不确定我理解你的意思，如果我错了，张贴一个解释问题的截图，但如果你指的是 ActionBar 中图标之间的空间，它们应该是相等的。检查您的图标图像，可能是图像在边框中有一些不同的空白空间，或者它们没有居中。如果这是问题所在，我建议您使用它来生成 ActionBar 图标：

[http://android-ui-utils.googlecode.com/hg/asset-studio/dist/icons-actionbar.html#source.space.trim=0&source.space.pad=0&name=example&theme=dark](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/icons-actionbar.html#source.space.trim=0&source.space.pad=0&name=example&theme=dark)

# c++ - 显示分段错误的代码

> ID：13212419
> 
> 赞同：-3
> 
> 时间：2012-11-03T18:56:57.833
> 
> 标签：c++

下面的代码显示了分段错误。我发现的错误在哪里是它在包含 printf() 语句的行中，但不知道为什么会这样以及如何纠正它。谁能在这里帮帮我..

```
#include<iostream>
#include<stdio.h>
#include<string>
#include<readline/history.h>
#include<readline/readline.h>

using namespace std;
int main()
{
    using_history();
    string command("history");
    add_history(command.c_str());
if (command == "history")
{
    cout<< "hello\n";
    for(int i = 0 ; i < history_length ; i++)
    {
        cout<<"in there\n";
        HIST_ENTRY *entry = history_get(i);
        cout<<"till here\n";
        printf("%5d %s", i , entry->line);
    }
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T19:20:42.017

从[文档](http://cnswww.cns.cwru.edu/php/chet/readline/history.html#SEC12)[中`readline`](http://cnswww.cns.cwru.edu/php/chet/readline/history.html#SEC12)：

> **功能：** `HIST_ENTRY * history_get (int offset)`
> 返回位置的历史条目`offset`，从`history_base`（见2.4 历史变量）开始。如果那里没有条目，或者如果`offset`大于历史长度，则返回一个 NULL 指针。

您的代码忽略`history_base`并从 0 偏移。

因此，`history_get`无法成功并返回您的代码未检查的 NULL 指针。尝试取消引用此指针会导致分段错误。

我会这样写循环：

```
for (int i = 0; i < history_length; i++) {
    HIST_ENTRY* entry = history_get(history_base + i);
    if (entry)
       printf("%5d %s", i, entry->line);
    else
       printf("%5d ERROR!", i);
} 
```

请注意我是如何将`history_base`偏移量添加到`history_get`调用中的，并添加了错误检查。

**阅读您使用的函数的文档、执行错误检查和使用调试器是*关键的*编程人才！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T19:09:50.930

`history_get(offset);`从 开始的偏移量参数`history_base`。也是`history_length`历史中的条目总数，因此您必须`history_base`在循环条件中添加。

这意味着您应该按以下方式重写循环：

```
for(int i = history_base ; i < history_base + history_length ; i++)

{
    ...
} 
```

# c++ - 请推荐XP、Win7、Win8的2D动画c++工具

> ID：13212420
> 
> 赞同：1
> 
> 时间：2012-11-03T18:56:58.067
> 
> 标签：c++, animation, directx, 2d, direct3d

我正在处理一个涉及高分辨率 png 图片的 2D 动画的 c++ 项目。我希望该程序与所有流行的 Windows 版本兼容：XP、Vista、7 和 8。

我尝试的第一件事是旧版 GDI/GDI+，动画无法流畅运行。此外，据说它们将来会被遗弃。

然后我检查了 DirectX。D2D 看起来很诱人，但 XP 不支持。它的前身 DirectDraw 是一个被抛弃的遗留物。据说DX9.0中的D3D可以处理2D。我按照网页上的说明使用 Direct3D Sprites 绘制图片。然而，这些照片是不成比例的。我整晚调试它只是发现纹理会自动缩放以使高度和宽度成为 2 的幂（DX 对我来说是全新的:(）。我不想要比例。

我不确定 D2D 使用 D3D 接口是否正确。如果是这样，我认为必须有一些更好的方法将 D3D 用于 2D 应用程序。但我找不到它。所以请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T19:15:02.437

我自己没用过，不过你可以结合[Animation Framework来看看 Qt 的](http://doc.qt.digia.com/qt/animation-overview.html)[Graphics View](http://qt-project.org/doc/qt-4.8/graphicsview.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T22:14:46.623

你也可以看一下 SDL：[http](http://www.libsdl.org/) ://www.libsdl.org/ 它通常用于游戏。您可能可以找到很多教程。它也将比 DirectX 高一点，因此可能更容易升级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T23:00:40.493

DirectX 9 可以处理两个纹理的非幂，请参见[此处](https://stackoverflow.com/questions/1187157/directx9-texture-of-arbitrary-size-non-2n)

所以使用 DirectX 9 应该没有问题。

否则你也可以看看OpenGL。

# c# - BackgroundWorker.RunWorkCompleted - 不能重新抛出异常

> ID：13212422
> 
> 赞同：4
> 
> 时间：2012-11-03T18:57:01.827
> 
> 标签：c#, exception, backgroundworker

我正在为 WCF 调用（使用 BackgroundWorker）编写某种包装器，以防止 GUI 在调用过程中冻结。它主要按应有的方式工作，但是当 WCF 调用引发异常时，我遇到了 BackgroundWorker 的问题。如果 DoWork 中发生异常，我可以在 RunWorkCompleted 中检测到它，但将其重新扔到 GUI 中不起作用。我读过很多帖子，有人提到这应该有效。

包装器的代码（注意 WCF 调用由抛出的异常表示）：

```
private void GetSomething(Action<IEnumerable<int>> completedAction)
{
    BackgroundWorker b = new BackgroundWorker();

    b.DoWork += (s, evt) => { throw new Exception(); evt.Result = new List<int> { 1, 2, 3 }; };

    b.RunWorkerCompleted += (s, evt) =>
    {
        if (evt.Error == null && completedAction != null)
        {
           completedAction((IEnumerable<int>)evt.Result);
        }
        else if(evt.Error != null)
        {
           throw evt.Error;
        }
    };

    b.RunWorkerAsync();
} 
```

在 Windows 窗体中调用代码：

```
private void button3_Click(object sender, EventArgs e)
{
    try
    {
        GetSomething(list =>
        {
           foreach (int i in list)
           {
              listView1.Items.Add(new ListViewItem(i.ToString()));
           }
        });
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
    }
} 
```

在调试这个时，我得到：

> 1.  DoWork 中的“引发了‘System.Exception’类型的异常”
> 2.  *在throw evt.Error*处引发“'System.Exception' 类型的异常”
> **   *Main*方法中的*Application.Run(new Form1())*中的“TargetInvocationException 未处理”*

 **我究竟做错了什么？我想在 Windows 表单中捕获异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T18:35:39.350

你应该改变这个：

`throw evt.Error;`

对此：

`MessageBox.Show(evt.Error.Message);`

您的异常当前未处理，因为`RunWorkerCompleted`处理程序稍后运行。它没有在您拥有的 try/catch 中运行`button3_Click`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T19:34:10.707

该事件`b.RunWorkerCompleted`是您应该进行错误处理的地方。你可以传入一个`Action<Exception>`来做错误处理，比如

```
private void GetSomething(Action<IEnumerable<int>> completedAction, Action<Exception> exceptionAction)
{
    BackgroundWorker b = new BackgroundWorker();

    b.DoWork += (s, evt) => { throw new Exception(); evt.Result = new List<int> { 1, 2, 3 }; };

    b.RunWorkerCompleted += (s, evt) =>
    {
        if (evt.Error == null && completedAction != null)
            completedAction((IEnumerable<int>)evt.Result);
        else if(evt.Error != null)
            exceptionAction(evt.Error);
    };

    b.RunWorkerAsync();
} 
```

然而，这往往会变得丑陋。如果您使用 .Net 4 或 4.5，您可以使用 Tasks。`Task<TResult>`正是为这种情况创建的：

```
Task<IEnumerable<int>> GetSomething()
{
    return Task.Factory.StartNew(() => { 
        Thread.Sleep(2000);
        throw new Exception(); 
        return (new List<int> { 1, 2, 3 }).AsEnumerable(); 
        });
} 
```

`Task`基本上是一个信号结构

*   `.Result`财产_
*   `.Exception`财产_
*   一种`.ContinueWith()`方法

您可以在其中`ContinueWith()`检查是否`Task`处于故障状态（抛出异常）。

你可以像这样使用它

```
 private void button3_Click(object sender, EventArgs e)
    {
        GetSomething()
            .ContinueWith(task =>
                {
                    if (task.IsCanceled)
                    {
                    }
                    else if (task.IsFaulted)
                    {
                        var ex = task.Exception.InnerException;
                        MessageBox.Show(ex.Message);
                    }
                    else if (task.IsCompleted)
                    {
                        var list = task.Result;
                        foreach (int i in list)
                        {
                            listView1.Items.Add(new ListViewItem(i.ToString()));
                        }
                    }
                });
    } 
```

如果您使用 .Net 4.5 和 C#5（您需要 VS2012 或 VS2010 以及 Async CTP），您甚至可以求助于`async`并`await`喜欢

```
 private async void button3_Click(object sender, EventArgs e)
    {
        try
        {
            var list = await GetSomething();
            foreach (int i in list)
            {
                listView1.Items.Add(new ListViewItem(i.ToString()));
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

...所有的魔法都是由编译器完成的。请注意，您可以照常`try` `catch`使用。**

# windows-7 - 如何将 sublime text 2 设置携带到 linux

> ID：13212424
> 
> 赞同：0
> 
> 时间：2012-11-03T18:57:15.337
> 
> 标签：windows-7, sublimetext2, ubuntu-12.04

我想在 Linux 中开发，但我所有的好设置都在 Windows 中。如何将所有设置和插件转移到我的 Linux 安装中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T03:26:30.670

只需将您的“数据目录”复制到目标计算机上的适当位置，所有设置和捆绑包都应遵循（重新启动后）。这是每个操作系统上数据目录的位置：

*   Windows：%APPDATA%\Sublime Text 2
*   OS X：~/Library/Application Support/Sublime Text 2
*   Linux：~/.Sublime Text 2

# xslt - xslt 按作者在 xml 结构中的不同位置排序

> ID：13212426
> 
> 赞同：0
> 
> 时间：2012-11-03T18:57:31.087
> 
> 标签：xslt, sorting

我正在尝试使用 XSLT 按作者姓名对参考书目进行排序。然而，作者的姓氏以 xml 结构出现在不同的位置，具体取决于它是什么类型的文本（书籍、期刊等）。

这是数据：

```
<biblStruct type="book" xml:id="Swanson2002">
<monogr>
  <title>Universities, academics and the Great Schism</title>
  <author>
    <forename>R. N</forename>
    <surname>Swanson</surname>
  </author>
  <imprint>
    <pubPlace>Cambridge</pubPlace>
    <biblScope type="vol">12</biblScope>
    <publisher>Cambridge Univ Pr</publisher>
    <date>2002</date>
    <note type="accessed">2012-07-06 18:34:53</note>
    <note type="url">http://books.google.com/books?hl=en&amp;lr=&amp;id=9AUE425_1xYC&amp;oi=fnd&amp;pg=PR8&amp;dq=Swanson,+Univiersities+Plaoul&amp;ots=EdkhHvSExW&amp;sig=tFOJKFi2myNWhkR_Rl4XE-cQcSc</note>
  </imprint>
</monogr>
<note type="tags">
  <note type="tag">Petrus Plaoul</note>
</note>
 <idno type="ISBN">0521522269</idno>
</biblStruct>
<biblStruct type="journalArticle" xml:id="Maier1958">
<analytic>
  <title>Zu einigen Sentenzenkommentaren des XIV Jahrunderts</title>
  <author>
    <forename>A.</forename>
    <surname>Maier</surname>
  </author>
</analytic>
<monogr>
  <title>Archivum franciscanum historicum</title>
  <imprint>
    <biblScope type="vol">51</biblScope>
    <biblScope type="pp">405-409</biblScope>
    <date>1958</date>
  </imprint>
</monogr>
<note type="tags">
  <note type="tag">Hard Copy Obtained</note>
</note>
</biblStruct>
<biblStruct type="bookSection" xml:id="Kaluza1995">
<analytic>
  <title>Les débuts de l'Albertisme tardif (Paris et Cologne)</title>
  <author>
    <forename>Zenon</forename>
    <surname>Kaluza</surname>
  </author>
</analytic>
<monogr>
  <title>Albertus Magnus und der Albertismus</title>
  <imprint>
    <pubPlace>Leiden</pubPlace>
    <biblScope type="pp">207-295</biblScope>
    <publisher>Brill</publisher>
    <date>1995</date>
  </imprint>
</monogr>
</biblStruct> 
```

这是我的 XSLT 模板

```
 <xsl:template match="tei:listBibl">
    <xsl:for-each select="./tei:biblStruct">
        <xsl:sort select="./tei:monogr/tei:author/tei:surname"/>
    </xsl:for-each/>
 </xsl:template/> 
```

目前这只对条目进行排序`@type=monogr`

我也试过这个，但它不起作用：

```
<xsl:sort select="./tei:monogr/tei:author/tei:surname or     ./tei:analytic/tei:author/tei:surname"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T20:09:13.150

It looks to me as if either

```
<xsl:sort select=".//author/surname"/> 
```

or

```
<xsl:sort select="./*/author/surname"/> 
```

would do the job

You don't want to use an "or" operator, which always returns a boolean result, but if necessary you could use the "union" operator (|):

```
<xsl:sort select="monogr/author/surname | analytic/author/surname"/> 
```

which in 2.0 can be shortened to

```
<xsl:sort select="(monogr|analytic)/author/surname"/> 
```

# class - 咖啡脚本访问实例变量

> ID：13212430
> 
> 赞同：0
> 
> 时间：2012-11-03T18:57:37.760
> 
> 标签：class, scope, coffeescript, instance

我对 js 或 coffeescript 有点陌生，我不知道我的脚本有什么问题。

```
class Token

  fetching_token = $.Deferred()
  assigning_token = $.Deferred()

  constructor: ->
    @token = null
    @got_token = $.Deferred()    

  fetch = ->
    fetching_token.resolve({"access_token": '12355'})

  assign_token = (data) =>
    console.log "TOKEN (instance var): " + @token #undefined? 
    @token = data.access_token
    assigning_token.resolve()

  get_token: ->
    fetch()
    $.when(fetching_token).done (data) =>
      assign_token(data)
    $.when(assigning_token).done =>
      @got_token.resolve()
    undefined

t = new Token
t.get_token()

$.when(t.got_token).done ->
  console.log "FETCHED TOKEN: " + t.token #gives null 
```

我试图在对象实例上公开以下接口：*token*，*got_token*，*get_token*。由于某种原因，*assign_token*中的*@token*是*undefined*。我尝试了一些与*胖箭头*的组合，但无法正常工作。先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T19:41:31.893

这是一个简单的（私有）函数，而不是方法：

```
f = (arg) -> ... 
```

这是一个绑定到类的私有函数：

```
f = (arg) => ... 
```

将`=>`函数绑定到定义函数时的任何内容`@`（AKA `this`）。当你这样说时：

```
class C
    f = (arg) => ... 
```

`@`是被解析的类`C`，所以是一种私有类方法。`f``f`

重要的是，当你这样说时：

```
assign_token = (data) =>
  #... 
```

`@`inside`assign_token`不会是 的实例`Token`，它实际上是`Token`它自己。Your是实例上的*实例*`@token`变量，因此当您没有in实例时，它当然不会被定义。*`Token``Token``@`*

 *你有几个选择：

1.  做`assign_token`一个实例方法。这使得`assign_token`公众可以访问。
2.  `@`使用[`call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)or强制解决问题[`apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)。这保持`assign_token`私密，但调用起来更麻烦。

第一个选项如下所示：

```
assign_token: (data) ->
    # Same stuff you already have 
```

第二个是（大部分）在你打电话时完成`assign_token`：

```
assign_token = (data) ->
    # Same stuff you already have

get_token: ->
  fetch()
  $.when(fetching_token).done (data) =>
    assign_token.call(@, data)
  #... 
```

请注意定义时的细箭头 ( `->`) `assign_token`，它为您提供了一个简单的函数，以便您可以在使用函数的方法`@`调用它时设置所需的值。`call`*

# java - Java中的JPanel与JFrame

> ID：13212431
> 
> 赞同：44
> 
> 时间：2012-11-03T18:57:50.780
> 
> 标签：java, swing, jframe, jpanel

我正在学习Java gui。我学习创建窗口的方法是继承或扩展`JFrame`类，使用它很好，因为它`JFrame`包含窗口的所有属性。现在如果我想在这个窗口中添加一些东西，我需要使用`add()`方法。但是今天我遇到了`JPanel`它也创建了一个窗口，我们可以通过`jpanelObjec.add()`.

这两种方法有什么区别？它们有某种关联吗？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-11-03T19:00:51.263

您不应`JFrame`不必要地扩展该类（仅当您向`JFrame`该类添加额外功能时）

**框架**：

`JFrame`扩展`Component`和`Container`.

它是一个顶级容器，用于表示窗口的最低要求。这包括`Border`s、可调整大小（是否可调整`JFrame`大小？）、标题栏、控件（允许最小化/最大化？）和各种`Event`s 的事件处理程序`windowClose`等`windowOpened`。

**面板**：

`JPanel`扩展`Component`，`Container`并且`JComponent`

它是一个通用类，用于将其他`Component`s 组合在一起。

*   在使用 s 时很有用，`LayoutManager`例如`GridLayout`fi 将组件添加到不同`JPanel`的 s 中，然后将其添加到 中`JFrame`以创建 gui。它将在可`Layout`重用性和可重用性方面更易于管理。

*   在 Swing 中绘画/绘图时，它也很有用，您可以覆盖`paintComponent(..)`并且当然可以享受双缓冲的全部乐趣。

Swing GUI 不能没有像 ( 、 或 ) 这样的顶级容器`JWindow`而存在`Window`，但它可能没有s 存在。`JFrame` `Frame``Applet``JPanel`

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-11-03T19:00:08.600

`JFrame`是窗户；它内部可以有一个或多个`JPanel`实例。 `JPanel`不是*窗户*。

你需要一个 Swing 教程：

[http://docs.oracle.com/javase/tutorial/uiswing/](http://docs.oracle.com/javase/tutorial/uiswing/)

# c# - Mono for Android Widget 教程

> ID：13212440
> 
> 赞同：2
> 
> 时间：2012-11-03T18:59:17.927
> 
> 标签：c#, android

是否有使用 Mono for Android (C#) 创建简单主屏幕小部件的教程？在官方网站上，只有小部件的代码，没有教程。我想做的就是向小部件写入一些文本并每隔 x 更新一次文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:38:21.107

当您设置 updatePeriodMillis 属性值时，不能保证您的 onUpdate 方法会在该期间准确调用，您必须处理 AlarmManager。

从[https://github.com/xamarin/monodroid-samples/tree/master/SimpleWidget](https://github.com/xamarin/monodroid-samples/tree/master/SimpleWidget)，像这样替换 onUpdate ：

```
private PendingIntent service = null;  

    public override void OnUpdate (Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds)
    {
        //// To prevent any ANR timeouts, we perform the update in a service
        //context.StartService (new Intent (context, typeof (UpdateService)));

        AlarmManager m = (AlarmManager) context.GetSystemService(Context.AlarmService);

       Intent i = new Intent (context, typeof (UpdateService));

       if (service == null)
       {
           service = PendingIntent.GetService(context, 0, i, PendingIntentFlags.CancelCurrent);
       }

       m.SetRepeating(AlarmType.Rtc, 0, 1000 * 3, service);
    } 
```

然后在服务中：

```
WordEntry entry = new WordEntry() { Title = "test", Description = DateTime.Now.ToLongTimeString() }; 
```

小部件将每 3 秒刷新一次。

希望这可以帮助。

# c++ - VS 2008 中的奇怪链接错误

> ID：13212441
> 
> 赞同：1
> 
> 时间：2012-11-03T18:59:17.977
> 
> 标签：c++, visual-c++, opencv

我正在编译下面的代码片段

 `````
cv::Mat frame ;
tld->processImage(frame); 
````  `并获得以下链接器错误

错误 LNK2019：函数 _main 中引用的未解析外部符号“public: void __thiscall tld::TLD::processImage(class cv::Mat)”(?processImage@TLD@tld@@QAEXVMat@cv@@@Z)

现在我把代码改成了这样

 `````
Mat frame ;
tld->processImage(0); 
````  `并低于链接器错误

错误 C2664: 'tld::TLD::processImage' : 无法将参数 1 从 'int' 转换为 'cv::Mat' 没有构造函数可以采用源类型，或者构造函数重载解析不明确

问题是当我调用方法 tld->processImage(frame) 我得到这个链接器错误“未解析的符号”但是当我用不正确的类型作为参数调用这个方法时，它给出了另一个“无法转换参数”错误，因此承认方法的事实有没有。

此问题仅发生在 processImage() 方法中。我可以毫无问题地调用“tld”的其他方法。

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T19:09:49.750

`C++`有两个阶段将您的代码转换为执行代码，第一个是编译，第二个是链接。在第一阶段编译器寻找代码语法，在这个阶段它知道你有一个名为的函数`processImage`，它接受一个类型的参数`cv::Mat`，但是在第二阶段链接器寻找它的实现并且找不到它，你实现了那个方法还是只是申报？？如果答案是肯定的，您是否`.cpp`在链接过程中包含了包含您的实现的 source() 文件？如果函数来自外部库，您是否将该库包含在传递给链接器的库列表中？通过回答这个问题，我相信你总能解决`unresolved external symbol`链接器的错误:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T19:13:14.663

我认为您很可能缺少`cv::Mat`. 如果 TLD 类在其他地方工作，那几乎可以肯定是因为您在进行此方法调用的地方没有包含 for `cv`。

如果你有多个包含，`cv`你应该添加到头文件的顶部；

```
#ifndef CV
#define CV 
```

并在文件底部添加；

```
#endif 
```

这将确保该文件只编译一次，并且在我经常编写 c++ 时为我解决了很多链接器问题。````

# java - 将 txt 文件读入 ObjectList

> ID：13212443
> 
> 赞同：2
> 
> 时间：2012-11-03T18:59:47.737
> 
> 标签：java, object, linked-list

我正在尝试将文本文件读入对象的线性链接列表。文本文件（payfile.txt）包含以下信息

```
DEBBIE     STARR           F 3 W 1000.00
JOAN       JACOBUS         F 9 W  925.00
DAVID      RENN            M 3 H    4.75
ALBERT     CAHANA          M 3 H   18.75
DOUGLAS    SHEER           M 5 W  250.00
SHARI      BUCHMAN         F 9 W  325.00
SARA       JONES           F 1 H    7.50
RICKY      MOFSEN          M 6 H   12.50
JEAN       BRENNAN         F 6 H    5.40
JAMIE      MICHAELS        F 8 W  150.00 
```

我想将名字插入到他们自己的列表中，将姓氏插入到列表中，等等。在剩下的问题中，我必须对 LLL 进行一些添加和删除修改，我只是不确定这是将文件读入列表的正确编码。

我得到一个空指针异常@firstname.addFirst(lineScanner.next());

到目前为止，我有这个：

```
 public class Payroll
 {
 private LineWriter lw;
 private ObjectList output, input;
 private ObjectList firstname, lastname, gender, tenure, rate, salary;

  public Payroll(LineWriter lw)
  {
      this.lw = lw;
  } 
public void readfile()
   {
       File file = new File("payfile.txt");
       try{
           Scanner scanner = new Scanner(file);
           while(scanner.hasNextLine())
           {
               String line = scanner.nextLine();
               Scanner lineScanner = new Scanner(line);
               lineScanner.useDelimiter(" ");
               while(lineScanner.hasNext())
               {
                   firstname.addFirst(lineScanner.next());
                   lastname.addFirst(lineScanner.next());
                   gender.addFirst(lineScanner.next());
                   tenure.addFirst(lineScanner.next());
                   rate.addFirst(lineScanner.next());
                   salary.addFirst(lineScanner.next());
                }
            }
        }catch(FileNotFoundException e)
        {e.printStackTrace();}
    }

// ObjectList.java
public class ObjectList {
    private ListNode list;

    /**
     * Constructs an empty list
     */
    public ObjectList() {
        list = null;
    }

    /**
     * Returns the first node in the list
     */
    public ListNode getFirstNode() {
        return list;
    }

    /**
     * Returns the first element in the list
     */
    public Object getFirst() {
        if (list == null)
            return null;
        return list.getInfo();
    }

    /**
     * Returns the last element in the list
     */
    public Object getLast() {
        if (list == null)
            return null;
        ListNode p = list;
        while (p.getNext() != null)
            p = p.getNext();
        return p.getInfo();
    }

    /**
     * Adds the given element to the beginning of the list
     * @param o - the element to be inserted at the beginning of the list
     */
    public void addFirst(Object o) {
        ListNode p = new ListNode(o, list);
        list = p;
    }

    /** Appends the given element to the end of the list
     * @param o - the element to be appended to the end of the list
     */
    public void addLast(Object o) {
        ListNode p = new ListNode(o);        
        if (list == null)
            list = p;
        else {
            ListNode q = list;
            while (q.getNext() != null)
                q = q.getNext();
            q.setNext(p);
        }
    }

    /**
     * Removes and returns the first element from the list
     */
    public Object removeFirst() {
        if (list == null) {
            System.out.println("removeFirst Runtime Error: Illegal Operation");
            System.exit(1);
        }
        ListNode p = list;
        list = p.getNext();
        return p.getInfo();
    }

    /**
     * Removes and returns the last element from the list
     */
    public Object removeLast() {
        if (list == null) {
            System.out.println("removeLast Runtime Error: Illegal Operation");
            System.exit(1);
        }
        ListNode p = list;
        ListNode q = null;
        while (p.getNext() != null) {
            q = p;
            p = p.getNext();
        }
        if (q == null)
            list = null;
        else
            q.setNext(null);
        return p.getInfo();
    }

    /**
     * Inserts a node after the node referenced by p
     * @param p - reference to node after which the new node will be added
     * @param o - reference to node that will be inserted into the list
     */
    public void insertAfter(ListNode p, Object o) {
        if (p == null) {
            System.out.println("insertAfter Runtime Error: Illegal Operation");
            System.exit(1);
        }
        ListNode q = new ListNode(o, p.getNext());
        p.setNext(q);
    }

    /**
     * Deletes the node after the node referenced by p
     * @param p - reference to node after which the node will be deleted
     */
     public Object deleteAfter(ListNode p) {
        if (p == null || p.getNext() == null) {
            System.out.println("deleteAfter Runtime Error: Illegal Operation");
            System.exit(1);
        }
        ListNode q = p.getNext();
        p.setNext(q.getNext());
        return q.getInfo();
    }

    /**
     * Inserts a node into its correct location within an ordered list
     * @param o - The element to be inserted into the list
     */
    public void insert(Object o) {
        ListNode p = list;
        ListNode q = null;
        while (p != null && ((Comparable)o).compareTo(p.getInfo()) > 0) {
            q = p;
            p = p.getNext();
        }
        if (q == null)
            addFirst(o);
        else
            insertAfter(q, o);
    }

    /**
     * Removes and returns the first occurrence of the specified 
     * element in the list
     * @param o - The object to be removed from the list
     */
    public Object remove(Object o) {
        ListNode p = list;
        ListNode q = null;
        while (p != null && ((Comparable)o).compareTo(p.getInfo()) != 0) {
            q = p;
            p = p.getNext();
        }
        if (p == null)
            return null;
        else return q == null ? removeFirst() : deleteAfter(q);
    }

    /**
     * Returns true if the list contains the specified element.
     * @param o - The object to search for in the list
     */
    public boolean contains(Object o) {
        ListNode p = list;
        while (p != null && ((Comparable)o).compareTo(p.getInfo()) != 0)
            p = p.getNext();
        return p != null;
    }

    /**
     * Returns true if this list contains no elements
     */
    public boolean isEmpty() {
        return list == null;
    }

    /**
     * Removes all elements from the list
     */
    public void clear() {
        list = null;
    }

    /**
     * Returns the number of elements in the list
     */
    public int size() {
        int count = 0;
        ListNode p = list;
        while (p != null) {
            ++count;
            p = p.getNext();
        }
        return count;
    }
}

public class Driver
{

    public static void main(String args[]) 
    {
        LineWriter lw = new LineWriter("csis.txt");
        Payroll payroll = new Payroll(lw);

        payroll.readfile();
       // payroll.printer(lw);
        lw.close();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T19:02:54.123

您需要`ObjectList`在对其调用方法之前初始化变量。默认情况下，Java 中的 Object 为 null

```
firstname = new ObjectList();
firstname.addFirst(lineScanner.next()); 
```

您还需要一个或多个空格的分隔符

```
lineScanner.useDelimiter("\\s+"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T19:03:24.303

初始化您的*ObjectList*。

```
ObjectList first = new ObjectList(); 
```

您试图在未初始化的对象上调用方法，因此 NPE 作为对象的默认值为*null*。

而且您还必须初始化所有 ObjectList。在 PayRoll 的构造函数中进行

```
public Payroll(LineWriter lw)
  {
      this.lw = lw;
      this.firstName = new ObjectList();
      // do the same thing for your lastname, gender .. etc
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T19:03:50.300

从 Java 7 开始：

```
List<String> lst = Files.readAllLines(Paths.get("payfile.txt")); 
```

# php - CodeIgniter 在核心类构造函数中访问 CI 超级对象

> ID：13212445
> 
> 赞同：0
> 
> 时间：2012-11-03T18:59:52.137
> 
> 标签：php, codeigniter

我在 application/core/MY_Lang.php 中有核心类，这个类扩展了 CI_Lang 类，并覆盖了基类的构造函数：

```
class MY_Lang extends CI_Lang {
    function __construct()
    {
        parent::__construct();
    }
} 
```

我如何从我的类的构造函数访问数据库对象。

我试图访问 CI 超级对象，但类 CI_Controller 暂时没有加载

```
 if (class_exists('CI_Controller'))
    {
        $this->CI =& get_instance();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T19:55:54.280

好的，看起来我对能够调用 get_instance() 是错误的。

但是我发现了一个类似的帖子，它建议使用**post_controller_constructor** “钩子”来调用你的函数

请参见此处：[CodeIgniter：My_Lang 中的 get_instance](https://stackoverflow.com/questions/7546241/codeigniter-get-instance-inside-my-lang)

Code Igniter 钩子的文档在这里：[http ://ellislab.com/codeigniter/user_guide/general/hooks.html](http://ellislab.com/codeigniter/user_guide/general/hooks.html)

所以我猜想在你的**application/config/hooks.php**文件中你想添加这样的东西：

```
$hook['post_controller_constructor'] = array(
                                'class'    => 'MY_Lang',
                                'function' => '__construct',
                                'filename' => 'MY_Lang.php',
                                'filepath' => 'core',
                                'params'   => array()
                                ); 
```

我还没有对此进行测试，但是如果您还不能完全正常工作，请告诉我，我可以进行适当的测试。

当然，然后在您在钩子中指定的函数中，您想要调用**get_instance()**然后加载数据库库并执行您想要的任何工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T06:52:24.183

你只需要使用`$this->CI =& get_instance();`，你不需要其他代码，因为你有`if (class_exists('CI_Controller')) { ... }`

这将允许您使用 CI 调用，例如`$this->CI->load->view`,`$this->CI-load->lang`等。

虽然我从未使用过 CI 钩子，但我认为这不是您的情况所必需或需要的，`$this->CI =& get_instance();`应该可以正常工作。

# java - 寻找最长的重复子串

> ID：13212446
> 
> 赞同：-2
> 
> 时间：2012-11-03T19:00:00.997
> 
> 标签：java, string

> **可能重复：**
> [如何找到给定字符串的最长重复子字符串](https://stackoverflow.com/questions/13212180/how-to-find-the-longest-repeated-substring-of-given-string)

我想找到一个字符串中最长的重复子串。

```
 /**
This method will find the longest substring of a given string.
String given here is reassuring. 

 */
public String longestRepeatedSubstring()
{
    String longestRepeatedSubstring = "";
    for (int i = 0; i<text.length(); i++ )
    {
        String one = text.substring(0,i); 

        for(int o = 0; o<text.length();o++)
        {
            Sting two = text.substring(0,o);
            if(one.equals(two))
            {
                longestRepeatedSubstring = one;
            }

        }

    }
    return longestRepeatedSubstring; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T19:07:35.177

你最好使用正则表达式。这里是：

```
/(?=((.+)(?:.*?\2)+))/s 
```

# javascript - 如何从 Firefox 的附加 SDK (Jetpack) 访问 places.bookmarks

> ID：13212450
> 
> 赞同：1
> 
> 时间：2012-11-03T19:00:14.997
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk

我正在为 Firefox 制作书签扩展，我发现使用 Jetpack 我可以制作 html UI，就像在 Google 的 Chrome 中一样。

我需要访问 Firefox 的书签，在寻找了一段时间后，我注意到没有*天真支持*的方法可以从 jetpack 的 API 访问书签，所以我找到了一个可以使用位置的模块。

[Jetpack 模块/places.js](https://github.com/autonome/Jetpack-Modules/blob/master/places.js)

现在，问题是我不知道如何使用这个模块，所以也许有人可以引导我走向正确的方向。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T22:23:07.180

我确实设法`places.sqlite`在我的 Firefox 配置文件目录中找到了一个名为的文件。也许 sqlite 是您应该访问它的方式，在 Jetpack 的 API 中没有天真支持的方式。

也许[这](https://developer.mozilla.org/en-US/docs/Places_Developer_Guide)是您正在寻找的文档。我尝试了[搜索书签](https://developer.mozilla.org/en-US/docs/Places_Developer_Guide#Searching)代码（`var {Cc, Ci, Cu} = require("chrome");`在代码块之前并`console.log(title+"\t"+uri);`添加到`for`循环末尾），它似乎工作。 `JSON.stringify`由于它们包含的循环逻辑，因此不适用于结构。

# java - 从模板处理和保存多对多数据 - Play Framework 2.0

> ID：13212452
> 
> 赞同：2
> 
> 时间：2012-11-03T19:00:25.790
> 
> 标签：java, scala, playframework, playframework-2.0

我有一个带有表格的模板。我正在使用 scala Helper 处理数据表单并将其保存为模型对象。正如您在我的示例中看到的，***helper.select***字段将与***ManytoOne***而不是***ManyToMany***一起使用。现在我希望我的表单允许选择多个类别并保存模型。我可以用表单助手做到这一点，还是我必须用传统方式做到这一点。

**风景：**

```
(..)
@helper.form(action = routes.Admin.newItem(), 'id -> "item_form", 'method -> "POST", 'enctype -> "multipart/form-data"){
        <fieldset>
            @helper.inputText(
            itemForm("title"),
            '_label -> "Titre"  )

            @helper.inputText(
            itemForm("price"),
            '_label -> "Prix"   )

            @helper.select(
            itemForm("category.id"), 
            helper.options(Category.list),
            'id -> "category",
            '_label -> "Categorie")

            @helper.textarea(
            itemForm("content"),
            '_label -> "Description")

            @helper.inputText(
            itemForm("url"),
            '_label -> "URL"    )

            @helper.inputText(
            itemForm("picture"),
            '_label -> "Picture URL"    )

             <input type="submit" value="Ajouter">

        </fieldset>
        } 
```

**管理员控制器**

```
 (..)
    static play.data.Form<Item> itemForm = form(Item.class);

public static Result newItem(){
    Item item = itemForm.bindFromRequest().get();
    item.save();
    return TODO;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:32:30.617

我认为使用默认选择助手是不可能的，因为您无法覆盖 name 属性，并且选择正确选项的代码不适用于多个值。请注意 name 属性的附加括号 [] 是必需的，因此 Play 的 bindFromRequest 方法会选择多个值。可以看到在Play源码中，勾选了bindFromRequest方法：[Playframework 2.1 Form class (Java)](http://bit.ly/WbvVix)

这是我用来处理多选字段的视图助手：

```
@(field: play.api.data.Field, options: Seq[(String,String)], args: (Symbol,Any)*)(implicit handler: FieldConstructor, lang: play.api.i18n.Lang)
@input(field, args:_*) { (id, name, value, htmlArgs) =>
  <select multiple="multiple" id="@id" name="@{name}[]" size="@{5 min options.length}">
    @for(i <- 0 until options.length) {
        <option id="@id" value="@options(i)._1"  
            @(if(field.indexes.exists(index => field("["+index+"]").value == Some(options(i)._1) ) ) "selected" else "")
        @toHtmlArgs(htmlArgs) >@options(i)._2</option>      
      }
  </select>
} 
```

你可以像这样使用它：

```
@multiselect(itemForm("category"), options(Category.list), '_label -> "Category") 
```

此解决方案适用于 play 2.1 (scala)，我尚未测试它是否适用于 play 2.0 (java)

# iphone - 让一个物体在iphone屏幕上移动？

> ID：13212456
> 
> 赞同：1
> 
> 时间：2012-11-03T19:00:36.333
> 
> 标签：iphone, xcode, animation, uiimageview

我想简单地有一个循环，以便一个对象在底部的屏幕上连续移动。这是我的代码，应该很容易理解。

```
@interface ViewController ()

@end

@implementation ViewController

    - (void)viewDidLoad
    {
        [super viewDidLoad];
        [self performSelector:@selector(spawnRocket) withObject:self afterDelay:2]; //delay before the object moves

    }

    -(void)spawnRocket{
        UIImageView *rocket=[[UIImageView alloc]initWithFrame:CGRectMake(-25, 528, 25, 40)]; //places imageview right off screen to the bottom left
        rocket.backgroundColor=[UIColor grayColor];

        [UIView animateWithDuration:5 animations:^(){rocket.frame=CGRectMake(345, 528, 25, 40);} completion:^(BOOL finished){if (finished)[self spawnRocket];}]; //this should hopefully make it so the object loops when it gets at the end of the screen

    }

    - (void)didReceiveMemoryWarning
    {
        [super didReceiveMemoryWarning];
        // Dispose of any resources that can be recreated.
    }

    @end 
```

完成所有这些后，我单击运行，我看到的只是我的 iphone 6.0 模拟器上的白屏

附言。我正在运行 xcode 4.5.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:10:34.547

一些东西：

1.  `UIImageView *rocket=[[UIImageView alloc]initWithFrame:...`

    您没有将图像分配给图像视图，最好的方法是使用：

    ```
    UIImage* image = [UIImage imageNamed:@"image.png"];
    UIImageView *rocket = [[UIImageView alloc] initWithImage:image];
    rocket.frame = CGRectMake(-25, 528, 25, 40); 
    ```

2.  （您的问题的根本原因）您没有将您的添加`UIImageView`到您的主视图中，因此它没有被显示。在`spawnRocket`中，您应该这样做：

    ```
    [self.view addSubview:rocket]; 
    ```

    **注意：**因为你希望这在一个循环中完成，你必须确保你的内存管理是有序的。

    我不知道您是否还希望火箭在完成移动后仍显示在屏幕上，但如果不是，请记住在完成时保留对`UIImageView`和的引用`removeFromSuperview`（以防止内存泄漏）。

3.  呼入可能不是最好的主意，当被调用`spawnRocket`时`viewDidLoad`它可能还没有到达屏幕`spawnRocket`。尝试调用它`viewWillAppear`或`viewDidAppear`（在你的情况下最好的）

4.  `[self performSelector:@selector(spawnRocket) withObject:self afterDelay:2];`

    您不需要提供`self`within `withObject:`，您不接受 inside 的任何参数`spawnRocket`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T19:07:09.157

您不添加`UIImageView`到任何父视图。它只会存在于内存中，但不会显示。创建后将其添加到视图控制器的视图中：

```
[self.view addSubview:rocket]; 
```

# mysql - 数据库结构 - 我怎么知道我需要多个表

> ID：13212457
> 
> 赞同：0
> 
> 时间：2012-11-03T19:00:38.313
> 
> 标签：mysql, database, database-design

你怎么知道数据应该在一个单独的表中还是每个产品都集中到一个表中？是否有一般规则或最佳实践？

例如。

产品有名称、品牌、分类、说明、警告、推荐用途、评论、注释、限制。

我可以看到他们如何都可以从单独的表格中受益，但是它是否可以在一个产品表格下使用逗号分隔的条目同样有效？

您如何知道关系数据库是矫枉过正还是必不可少？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T19:05:57.487

如果您正在考虑存储任何以逗号分隔的列表，那么这是一个明确的信号，您需要将其分解到另一个表中。永远不要每列存储一个以上的值。

有关数据库规范化的更多信息，请阅读此内容： [http ://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization)

更详细地说，设计一个好的数据库模式有点像一门艺术——随着时间和经验，你会变得更好。不要太担心犯错而害怕尝试。

但也要意识到关系数据库理论已经存在了 30 多年，通过学习标准的做事方式可以避免很多痛苦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T19:05:26.883

如果您使用逗号分隔值，那么这是将数据移动到另一个表中的好时机。

一旦您的数据被整齐地组织到包含特定类型数据的表格中，那么选择记录的事情就会变得更容易。

例如，标签。是的，您可以在您的产品表中将标签保存为 CSV，但是您如何获取所有标记为“实用程序”的产品？您必须选择所有记录，将标签拆分为逗号处的数组，然后遍历您的产品集合以获取相关的。这只是一个例子。我相信您可以看到这只会增加您存储的更多记录和更复杂的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T19:31:12.950

每当您的表中有冗余数据时，这表明您需要创建新表。在上面使用产品的示例中：

> 产品有名称、品牌、分类、说明、警告、推荐用途、评论、注释、限制。

分类将是您希望在另一个表中列出的明确项目。这使您的数据标准化。所以在上面的例子中，我至少有三个表，一个是品牌表，一个是分类表，一个是产品表。如果您需要多个笔记并跟踪添加笔记的不同时间，那么您可以为此创建一个表格。这使得查找数据变得容易，确保例如，如果您想要重新分类小部件组分类中的所有小部件，您只需更新分类表中的组名称，而不是产品表中的每条记录。

这是维基百科主题的链接[http://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T19:31:42.480

听起来您想知道是否需要为每种产品使用不同的表。这绝对不是数据库规范化的工作方式。

您想根据表的类型（在数据库世界中称为“实体”）来分隔表。

你的例子似乎相当微不足道。我不确定您计划在哪里使用 CSV。但是，我不确定其中一些字段是否具有非常结构化的值（什么构成“分类”或“警告”？）。

但无论如何，一个简单的例子：

```
CREATE TABLE brand (
    brand_id INT PRIMARY KEY,
    brand_name VARCHAR(100)
);

CREATE TABLE product (
    product_id INT PRIMARY KEY,
    brand_id INT,
    classifications VARCHAR(200),
    directions VARCHAR(200), 
    warnings VARCHAR(200), 
    recommended_use VARCHAR(200),
    comments VARCHAR(200),
    notes VARCHAR(200),
    restrictions VARCHAR(200)
); 
```

然后，如果您想查询所有**Sony**产品，您可以：

```
SELECT * 
FROM product
JOIN brand
USING (brand_id)
WHERE brand_name = 'Sony'; 
```

如果`product`表中的其他一些字段更加结构化，您可能希望像对`brand`.

因此，如果`warnings`、`classifications`等具有非常结构化的值（或每个产品有多个值），您应该将它们真正放入一个新表中。

我不确定你打算对其他领域做什么。因此，让我举一个常用的虚构字段的具体示例。

让我们假设您要跟踪`category`产品。有些人会为此使用表中的类别名称的 CSV `product`。

但是，您可能还有两个表：

```
CREATE TABLE category (
    category_id INT PRIMARY KEY,
    category_name VARCHAR(100)
);

CREATE TABLE product_category (
    product_id INT,
    category_id INT,
    PRIMARY KEY(product_id, category_id)
); 
```

因此，产品可以通过在表中具有多个条目来具有多个类别`product_category`。

因此，如果您想搜索`Sony` `Electronics`：

```
SELECT product.* 
FROM product
JOIN brand
USING (brand_id)
JOIN product_category
USING (product_id)
JOIN category
USING (category_id)
WHERE brand_name = 'Sony'
AND category_name = 'Electronics'; 
```

这将返回可能是电视、DVD 播放器、立体声系统等的产品。

# javascript - 如何让rails变量进入onclick函数调用

> ID：13212458
> 
> 赞同：4
> 
> 时间：2012-11-03T19:00:38.747
> 
> 标签：javascript, ruby-on-rails, haml

嗨，我有以下内容：

```
 = link_to @place.name, '#', onclick: 'get_maps(#{@location_string});' 
```

我目前正在尝试使用 rails 变量参数链接到 javascript 调用，但由于某种原因，rails 变量`@location_string`没有被传递给其中包含变量的 javascript 调用。目前它被呈现为一个字符串：

```
<a href="#" onclick="get_maps(#{@location_string});">3308 Kanaina Ave</a> 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T19:41:08.530

你需要把：

```
= link_to @place.name, '#', :onclick => "get_maps('#{@location_string}');" 
```

onclick 是link_to 的一个参数。
get_maps 里面的参数应该放在''里面。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T19:05:38.630

该`#{}`语法在单引号内不起作用。你要

```
"get_maps('#{@location_string}');" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T21:12:31.307

人们说使用内联 JS，例如 onclick=''、onmouseover 等不好。您可以通过链接的数据属性传递 ruby​​ 变量，并使用 jquery click() 函数附加事件

# ios - 当 JSON 调用时间过长时允许用户取消 MBProgressHUD

> ID：13212467
> 
> 赞同：6
> 
> 时间：2012-11-03T19:01:53.307
> 
> 标签：ios, xcode, json, uigesturerecognizer, mbprogresshud

我已经阅读并阅读了关于此的内容，但我似乎找不到任何与我的情况相匹配的内容。

当视图出现时，我已经加载了 MBProgressHUD，因为我的应用程序会立即获取一些 Web 服务数据。我的问题是我的导航控制器上的后退按钮在显示 HUD 时没有响应（因此在应用程序获取其数据时）。我希望用户能够点击关闭（或者在最坏的情况下能够点击后退按钮）以摆脱困境，如果这是一个无休止的等待。这是我的代码在视图出现后立即运行：

```
#ifdef __BLOCKS__
MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.navigationController.view animated:YES];
hud.labelText = @"Loading";
hud.dimBackground = NO;
hud.userInteractionEnabled = YES;

dispatch_async(dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
    // Do a task in the background
    NSString *strURL = @"http://WEBSERVICE_URL_HERE";

    //All the usual stuff to get the data from the service in here

    NSDictionary* responseDict = [json objectForKey:@"data"]; // Get the dictionary
    NSArray* resultsArray = [responseDict objectForKey:@"key"]; 

    // Hide the HUD in the main tread
    dispatch_async(dispatch_get_main_queue(), ^{

        for (NSDictionary* internalDict in resultsArray) 
        {
            for (NSString *key in [internalDict allKeys]) 
            {//Parse everything and display the results
            }

        }

        [MBProgressHUD hideHUDForView:self.navigationController.view animated:YES];
    });
}); 
#endif 
```

省略所有关于解析 JSON 的废话。这一切都很好，HUD 在数据出现并显示后消失。在世界上我怎样才能启用一种方法来停止所有这一切并返回（空白）界面？手势识别器？我会在 MBProgressHUD 类中设置它吗？好沮丧...

非常感谢您的帮助。我为这篇长文道歉。而对于我丑陋的代码......

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-02T08:07:11.487

无需扩展`MBProgressHUD`。只需添加一个`UITapGestureRecognizer`。

**ViewDidLoad** ：

```
MBProgressHUD *HUD = [MBProgressHUD showHUDAddedTo:self.view animated:NO];
HUD.mode = MBProgressHUDModeAnnularDeterminate;

UITapGestureRecognizer *HUDSingleTap = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(singleTap:)];
[HUD addGestureRecognizer:HUDSingleTap]; 
```

**进而：**

```
-(void)singleTap:(UITapGestureRecognizer*)sender
{
      //do what you need.
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-03T22:04:12.350

这`MBProgressHUD`只是一个带有自定义绘图以指示当前进度的视图，这意味着它不负责您应用程序的任何逻辑。如果你有一个长时间运行的操作需要在某个时候取消，你必须自己实现。

最优雅的解决方案是扩展`MBProgressHUD`. 您可以绘制一个充当按钮角色的自定义区域，以编程方式添加一个按钮，或者只是等待整个视图上的点击事件。然后，只要点击该按钮或视图，您就可以调用委托方法。

它看起来像这样：

```
 // MBProgressHUD.h
 @protocol MBProgressHUDDelegate <NSObject>
 - (void)hudViewWasTapped; // or any other name 
 @end

// MBProgressHUD.m
// Either this, or some selector you set up for a gesture recognizer
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    if ([self.delegate respondsToSelector:@selector(hudViewWasTapped)]) {
        [self.delegate performSelector:@selector(hudViewWasTapped)];
    }
} 
```

你必须将你的视图控制器设置为代表`MBProgressHUD`并采取相应的行动。

如果您需要对此进行更多说明，请告诉我:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-04T12:08:20.007

**要获得额外信息：**

1.  您可以在视图中创建 contentView
2.  只需在您的 contentView 中显示**hud（而不是在您的 self.view 或 self.navigationController.view 中）**

这样，您的导航栏视图将不对您的 hudView 负责。因此，您可以从 navigationController 的视图返回到上一页。

# actionscript-3 - 重复调用函数而不覆盖传递的对象

> ID：13212470
> 
> 赞同：0
> 
> 时间：2012-11-03T19:02:32.637
> 
> 标签：actionscript-3

我被一些我确信应该相当简单的事情所困扰。我从库中声明了两条垂直线，然后将每条线依次传递给一个函数，该函数在已传递的线上进行操作。代码执行没有错误，但显然在第二次调用函数时覆盖了第一行，大概是因为在函数头中使用了术语“myLine”。谁能告诉我如何将每一行传递给同一个函数，但该函数只在该行上运行？

代码是：

```
//declare new lines from library
var myLine1:letterLine = new letterLine();
var myLine2:letterLine = new letterLine();

//call function and pass each line in turn
VerticalLine(myLine1, lineX = stage.stageWidth/2 - lineOffset, lineY, lineLength, lineThickness, lineColour, lineTweenSpeed);
VerticalLine(myLine2, lineX = stage.stageWidth/2 - lineOffset, lineY, lineLength, lineThickness, lineColour, lineTweenSpeed);

//operate on the line passed to the function
function verticalLine(myLine, lineX:int, lineY:int, lineLength:Number, lineThickness:int, lineColour, lineTweenSpeed:Number):void {
    //draw line
    myLine.height = 0;
    myLine.x = lineX;
    myLine.y = lineY;
    myLine.width = lineThickness;

    var myColour:ColorTransform = myLine.transform.colorTransform;
    myColour.color = lineColour;
    myLine.transform.colorTransform = myColour;
    addChild(myLine);

    //set mask properties for line
    var maskW:uint = lineThickness;
    var maskH:uint = lineLength;

    //set gradient properties for mask
    var gradientFillType:String = GradientType.LINEAR;
    var gradientColours:Array = [0x123456, 0x654321, 0x123456, 0x654321];
    var gradientAlphas:Array = [0.4, 1, 1, 0.4];
    var gradientRatios:Array = [0, 100, 155, 255];
    var gradientMatrix:Matrix = new Matrix;

    var maskRotation:Number = Math.PI/2;
    var maskX:int = lineX;
    var maskY:int = myLine.y - lineLength/2;;
    gradientMatrix.createGradientBox(maskW, maskH, maskRotation, maskX, maskY);
    var spreadMethod:String = SpreadMethod.PAD;

    myLine.cacheAsBitmap = true;

    //draw mask shape
    var myMask = new Shape ;
    myMask.graphics.beginGradientFill(gradientFillType, gradientColours, gradientAlphas, gradientRatios, gradientMatrix, spreadMethod);
    myMask.graphics.drawRect(maskX, maskY, maskW, maskH);
    myMask.cacheAsBitmap = true;
    addChild(myMask);

    //mask line
    myLine.mask = myMask;

    TweenLite.to(myLine, lineTweenSpeed,{height:lineLength, ease:Linear.easeIn});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T04:41:03.823

诀窍是，您为两行发送相同的值，因此它们严格重叠，您将其视为覆盖。当您调用您的函数时，您需要为相应的行提供实际值。像这样：

```
verticalLine(myLine1, stage.stageWidth/2 - 100, 10, 125, 1, 0xff0000, 0.2);
verticalLine(myLine2, stage.stageWidth/2 - 2, 300, 40, 2, 0x0000ff, 0.3); 
```

还要检查在声明函数和调用它时是否有正确的大小写。

# javascript - 作为 Safari 扩展播放声音

> ID：13212472
> 
> 赞同：4
> 
> 时间：2012-11-03T19:02:45.593
> 
> 标签：javascript, audio, safari

是否可以将声音作为 Safari 扩展程序播放？简单的 javascript 不起作用：

```
var audio = new Audio("http://cl.ly/KdCk/download/review-time.mp3"); 
audio.play(); 
```

# android - 使用 Proximity 接听电话

> ID：13212475
> 
> 赞同：0
> 
> 时间：2012-11-03T19:03:04.333
> 
> 标签：android

使用接近传感器如何接听来电？服务如何？

这也许是我试图在我的服务中做的......

```
try{
    //new DoBackgroundTask().execute()

    Object powerManager = null;
    Method method = powerManager.getClass().getDeclaredMethod("getSupportedWakeLockFlags");
    int supportedFlags = (Integer) method.invoke(powerManager);
    Field f= PowerManager.class.getDeclaredField("PROXIMITY_CALL_RECIEVE_WAKE_LOCK");

}
catch(Exception E){

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T19:34:58.143

你可以使用[这里](http://code.google.com/p/auto-answer/source/browse/trunk/src/com/everysoft/autoanswer/AutoAnswerIntentService.java)的代码，方法`answerPhoneAidl`就是你需要的。当接近传感器提醒您时调用它。

# css - 使用 CSS 选择 ID 的所有元素

> ID：13212476
> 
> 赞同：0
> 
> 时间：2012-11-03T19:03:15.063
> 
> 标签：css, css-selectors

这是代码：

```
<div id="divFrame"> <div> <img /> </div> <div> </div> <p> </p> </div> 
```

我想选择所有这些元素。我试过以下没有运气

```
#divFrame *
#divFrame > * 
```

任何的想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T19:07:15.987

两者都不会选择所有元素。第一个将选择所有后代（子孙），而第二个只选择div的孩子，即两个div和p，而不是img。两者都不会选择#divFrame 本身。

要全部选择它们，您需要

```
#divFrame, #divFrame * 
```

这实际上是两个选择器的组合。第一个选择#divFrame，而第二个选择它的所有后代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T19:07:47.393

> 我想选择所有这些元素

```
#divFrame, #divFrame div, #divFrame img, #divFrame p
{
property: value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T19:13:59.957

您忘记关闭其中一个，`div`因此您的代码无法正常工作。

> 我想选择所有这些元素。

采用`div, img, p`

# monodevelop - MonoDevelop：发现来自不同项目的 [Register] 类

> ID：13212482
> 
> 赞同：0
> 
> 时间：2012-11-03T19:03:54.367
> 
> 标签：monodevelop, xib, xamarin, white-labelling

我们希望将一些 XIB/AXML 和所有图像从 MonoDevelop 中的相应项目中分离出来，以获得易于使用的白标功能。能够添加自定义构建配置并指定要在每个构建配置中构建的项目，我们最终得到以下结构：

1.  MonoToch 项目
    *   提单
    *   控制器类
2.  A型项目
    *   图片文件夹
    *   XIB 文件夹
3.  B类项目
    *   图片文件夹
    *   XIB 文件夹

设置好 A 和 B 配置后，生成的产品将使用解决方案中 A 或 B 项目中的图像和 xib（同样适用于 Android 项目）覆盖默认值，以防主项目包含相同的文件。

一切都很完美，但有一件事：来自 A 和 B 项目的 XIB 文件看不到控制器类（在主项目中声明），这使得在 IB 中设计它们有点痛苦。

**那么，问题来了**：如何告诉 MonoDevelop 从不同的项目（不仅仅是一个 XIB 所在的项目中）发现用于 stabs 的类？

提前谢谢了 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:18:24.653

抱歉，MonoDevelop 导出到虚拟 Xcode 项目以使 Xcode 设计人员了解用户定义类型的 Obj-C 存根当前不包含库中的类型。

您应该仍然可以*使用*库中的类型，但您必须手动将它们的注册名称输入到 Xcode 设计器中的“自定义类”字段中。不幸的是，连接插座和属性是不可能的，但设计师不会删除现有的连接。

解决此限制的一种方法可能是在项目 1 中*创建*xib，并在控件上设置任何自定义类型，并连接插座和操作。接下来，从该项目中删除 xib，并将其复制到项目 2 和 3 中。在这些项目中，您应该能够修改 xib 上控件的属性，而不会破坏出口/操作连接。

# extjs - 如何在 EXTjs MVC 架构中添加应用程序启动后运行的代码

> ID：13212491
> 
> 赞同：4
> 
> 时间：2012-11-03T19:04:56.283
> 
> 标签：extjs

我知道`init()`在调用应用程序启动函数之前执行。但是我有一些代码应该只在整个应用程序启动后才呈现。请指导我。我需要在我的 MVC 架构应用程序的控制器类中编写它。

```
Ext.define('MyApp.controller.Main', {

    extend: 'Ext.app.Controller',

     models: [
        'Leave'
    ],
    stores: [
        'MyJsonStore'
    ],

    views: [
        'Login',
        'MyViewport',
        'ManageColumn'
    ],

    init:function(){

        this.control({
            'managecolumn':{
                  afterrender:this.allowEdit
        }
    });
            },

         allowEdit:function(){
        console.log(Ext.get('edit'));

       }

}); 
```

我得到了空值，`Ext.get('edit')`但是当我在控制台中输入相同的命令时，我得到了肯定的响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:28:11.390

您还可以使用 Ext.application 中的启动功能。

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Application-method-launch](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Application-method-launch)

虽然 onLaunch 在控制器中为我工作......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T06:59:27.407

您是否尝试过添加[onLaunch](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Controller-method-onLaunch)方法？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T04:24:26.100

如果不确切知道“编辑”元素是什么以及它是如何设置的 - 很难给你一个准确的答案。但是，看看这个在应用程序类[http://jsfiddle.net/dbrin/wULET/上使用启动功能的 MVC 示例](http://jsfiddle.net/dbrin/wULET/)

视口是在 上创建的`launch`，您可能会做您正在寻找的事情。

# list - 嵌套列表平均值

> ID：13212494
> 
> 赞同：0
> 
> 时间：2012-11-03T19:05:25.410
> 
> 标签：list, lisp

大家好，我已经实施了一个解决方案来查找嵌套列表的平均值。所以我想知道你是否能想到一个更好的解决方案或任何可能的错误与我的欢呼。

```
; takes a nested list and return a flattened list
(defun flatten-list (list)
  (cond 
     ((null list) list)  
     ((atom list) (list list))  
     ((list (first list))
            (append (flatten-list (first list))
                    (flatten-list (rest  list)))) 

   (t      
            (append (list (first list))
                          (flatten-list (rest  list))))
   ))

;takes a flattened list and return the sum of the numbers
(defun sum-list (list)
  (cond ((null list)
         0)    
        (t
         (+ (first list) (sum-list(rest list))))
        ))

;uses the flatten-list and nested-average to find the average
(defun nested-average (list)  
  (sum-list  (flatten-list list))
  (defvar flat-lis)
  (setf flat-list (flatten-list list))
  (/ (sum-list  flat-list) (length flat-list)
  )) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:27:39.753

第一个函数包含无法访问的代码。该代码将永远不会被使用。文档字符串也是错误的，因为它并没有真正描述函数的作用。

第二个函数最好用`REDUCE`.

第三个函数需要重写。不使用第一种形式的值。使用`DEFVAR`and`SETF`是错误的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T09:36:24.357

我认为这是更好的解决方案...

```
(defun tree-average (tree)
  (labels ((%tree-average
            (branch sum visited)
            (cond
             ((consp branch)
              (multiple-value-call
               #'%tree-average (cdr branch)
               (%tree-average (car branch) sum visited)))
             ((numberp branch)
              (values (+ sum branch) (1+ visited)))
             (t (values sum visited)))))
    (multiple-value-call #'/ (%tree-average tree 0 0)))) 
```

好吧，如果你问。

# c# - 遍历一个对象并找到非空属性

> ID：13212498
> 
> 赞同：7
> 
> 时间：2012-11-03T19:05:42.603
> 
> 标签：c#, .net, reflection

我有 2 个相同对象的实例，o1 和 o2。如果我正在做类似的事情

```
 if (o1.property1 != null) o1.property1 = o2.property1 
```

对象中的所有属性。循环遍历 Object 中的所有属性并执行此操作的最有效方法是什么？我看到人们使用 PropertyInfo 来检查属性的 nulll，但似乎他们只能通过 PropertyInfo 集合而不是链接属性的操作。

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-03T19:36:31.757

您可以通过反射来做到这一点：

```
public void CopyNonNullProperties(object source, object target)
{
    // You could potentially relax this, e.g. making sure that the
    // target was a subtype of the source.
    if (source.GetType() != target.GetType())
    {
        throw new ArgumentException("Objects must be of the same type");
    }

    foreach (var prop in source.GetType()
                               .GetProperties(BindingFlags.Instance |
                                              BindingFlags.Public)
                               .Where(p => !p.GetIndexParameters().Any())
                               .Where(p => p.CanRead && p.CanWrite))
    {
        var value = prop.GetValue(source, null);
        if (value != null)
        {
            prop.SetValue(target, value, null);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T07:21:58.447

如果您要多次使用它，您可以使用编译表达式以获得更好的性能：

```
public static class Mapper<T>
{
    static Mapper()
    {
        var from = Expression.Parameter(typeof(T), "from");
        var to = Expression.Parameter(typeof(T), "to");

        var setExpressions = typeof(T)
            .GetProperties()
            .Where(property => property.CanRead && property.CanWrite && !property.GetIndexParameters().Any())
            .Select(property =>
            {
                var getExpression = Expression.Call(from, property.GetGetMethod());
                var setExpression = Expression.Call(to, property.GetSetMethod(), getExpression);
                var equalExpression = Expression.Equal(Expression.Convert(getExpression, typeof(object)), Expression.Constant(null));

                return Expression.IfThen(Expression.Not(equalExpression), setExpression);
            });

        Map = Expression.Lambda<Action<T, T>>(Expression.Block(setExpressions), from, to).Compile();
    }

    public static Action<T, T> Map { get; private set; }
} 
```

并像这样使用它：

```
Mapper<Entity>.Map(e1, e2); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T19:35:24.067

从你的例子来看，我认为你正在寻找这样的东西：

```
static void CopyTo<T>(T from, T to)
{
    foreach (PropertyInfo property in typeof(T).GetProperties())
    {
        if (!property.CanRead || !property.CanWrite || (property.GetIndexParameters().Length > 0))
            continue;

        object value = property.GetValue(to, null);
        if (value != null)
            property.SetValue(to, property.GetValue(from, null), null);
    }
} 
```

# javascript - 您可以使用 new Date().getMilliseconds() （或其他替代方法）作为计时器（如 setTimeout 或 setInterval），如果可以，如何？

> ID：13212499
> 
> 赞同：0
> 
> 时间：2012-11-03T19:05:53.320
> 
> 标签：javascript, timer, settimeout

我有两个 setTimeout 函数：一个在 y 轴上随机弹出一个 div，一个垂直移动它。这些需要完全同步，而 setTimeout 只是不会削减它：一旦 y 位置大于窗口高度，div 必须重置其 x 位置，然后重置为 0 以重新开始。类似的东西。我正在考虑以某种方式集成 getMilliseconds，但任何替代方案都可以。
这是当前的 Javascript：

```
var width = window.outerWidth;
var height = window.outerHeight;
var h2 = height * 5;
//left
function LR() {
    setTimeout(function() {
        var left = [];
        var one = 1;
        do {
            one++;
            left.push(one);
        }
        while (one <= width);
        var random = Math.floor(Math.random() * left.length);
        document.getElementById("test").style.left = random + "px";
        LR();
    }, h2);
}
LR();
//top
function TB() {
    setTimeout(function() {
        var one = document.getElementById("test").offsetTop;
        one++;
        document.getElementById("test").style.top = one + "px";
        if (one == height) {
            one == 0;
            document.getElementById("test").style.top = 0;
        }
        TB();
    }, 2);
}
TB(); 
```

如果您想查看我的完整代码和/或预览，我已经设置了一个 JSFiddle：http: [//jsfiddle.net/JqVb9/](http://jsfiddle.net/JqVb9/)。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T19:14:07.077

是的，对于动画，您始终应该检查当前时间 - `setTimeout`/。`Interval`绝对不可靠并且容易漂移。

要做到这一点，只需使用`Date.now()`并使您的动画成为一个数学函数以从时间获取位置（最简单：线性运动）。

正如@JanDvorak 在评论中已经指出的那样，您应该考虑从同一个计时器执行所有动作。这将使动画更流畅，因为您不会经常更改 DOM / 样式 - 每帧通常只渲染一次。此外，这将确保同步。

# mvvm-light - 对属性运行操作的 mvvm light 已更改

> ID：13212504
> 
> 赞同：1
> 
> 时间：2012-11-03T19:06:40.100
> 
> 标签：mvvm-light

我想对已更改的属性执行操作。

就像是`RunActionOnPropertyChanged(this.Property, x => SomeAction);`

MVVM Light 中有什么对此无能为力的吗？

我已经查看了消息，但这似乎有点过头了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:48:26.357

MVVM Light 没有任何原生功能可以做到这一点。

听起来您只想订阅 NotifyPropertyChanged 事件并在适当的属性引发更改时执行操作。

# python - 检查是否有任何使用 Tkinter 安排的方法 AFTER

> ID：13212507
> 
> 赞同：0
> 
> 时间：2012-11-03T19:06:49.357
> 
> 标签：python, tkinter

如何检查是否有任何使用 Tkinger AFTER 方法安排的方法？我有一种方法可以在画布上随机创建给定数量的方块（使用 AFTER 方法安排），另一种方法可以删除正在单击的方块（此方法基本上是每个方块的事件处理程序。）最后一个删除在特定时间（如 2 秒）后没有被点击的方块，它是使用 AFTER 方法的时间表。我喜欢做的是显示一个消息框，并且仅当所有给定数量的正方形都被绘制并从画布中删除时才显示一条消息。因为有时所有的方块都被删除了，但仍然有一些方块需要绘制，所以使用 find_all 方法根本不起作用。如果我在 draw 方法中使用变量并将其减少到 0，它' s 在显示正方形之前减小到零，因此消息框在错误的时间出现。所以我正在寻找一种方法来找出在 AFTER 方法列表中是否还有要执行的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T23:24:12.783

我不知道是否可以使用 Tkinter 方法，但是，您可以使用 Tk 找到此类信息，直接`widget.tk.call('after', 'info')`返回`after`待处理订阅列表。

这是一个完整的例子

```
import Tkinter

def foo():
    print "foo"

root = Tkinter.Tk()
root.after(1000, foo)
#>u'after#0'
root.after(1000, foo)
#>u'after#1'
root.tk.call('after', 'info')
#>'after#1 after#0' 
```

# java - java、驱动 APIv2、appengine 1.7.3、struts2.3.4.1、OAuth2。TokenResponseException: 400 OK invalid_grant

> ID：13212508
> 
> 赞同：1
> 
> 时间：2012-11-03T19:06:49.153
> 
> 标签：java, google-app-engine, oauth-2.0, google-drive-api

我得到了错误 invalid_grant 我已经在谷歌上看到了，但是在与这个问题斗争了几天之后。错误被抛出：

```
File file = insert.execute(); 
```

我只想将文件从我在 appengine 中的 webapp 上传到谷歌驱动器。我正在使用服务帐户在 API 访问 (https://code.google.com/apis/console/) 中生成的私钥对 (.p12)：

```
 Service account

Use service accounts to call Google APIs on behalf of your application instead of an end-user. Learn more
Client ID:  
xxx-xxxxxx.apps.googleusercontent.com
Email address:  
xxx-xxxxxxxxxxx@developer.gserviceaccount.com
Public key fingerprints:    
a108d8713103e09d0013655c9f80458f03e3a38a    –   Delete... 
```

在 Google APIs -> 驱动 SDK (https://code.google.com/apis/console/?api=drive#project:347347146680:drive_sdk) 我放了这个ClientID：

```
Drive Integration
OAuth Client ID (Required)

Enter the Client ID for your application. You can configure a client ID on the "API Access" panel. 
```

**任何帮助将不胜感激！谢谢！**

# **我的代码：**

struts.xml：

```
 <interceptor name="gaeFileUploadInterceptor" class="com.struts2.gae.interceptor.GaeFileUploadInterceptor" />
        <interceptor-stack name="fileUploadStack">
            <interceptor-ref name="gaeFileUploadInterceptor"></interceptor-ref>
            <interceptor-ref name="basicStack"></interceptor-ref>
        </interceptor-stack>

<action name="uploadInit">
    <result>jsp/common/upload.jsp</result>
</action>

<action name="upload" method="upload" class="com.lm.action.common.Upload">
    <result>jsp/common/upload.jsp</result>
    <interceptor-ref name="fileUploadStack"/>
        <result name="success" type="stream">
            <param name="contentType">image/jpeg,image/gif,image/png</param>
            <param name="inputName">photoStream</param>
            <param name="contentDisposition">filename="photo.jpg"</param>
            <param name="bufferSize">1024</param>
        </result>
</action> 
```

上传.java：

```
//File uploading (see struts.xml interceptors & struts2-gae-0.1.jar
private String photo;
private String photoContentType; //The content type of the file
private String photoFileName; //The uploaded file name
private InputStream photoStream;
[...]
public String upload() {
    try {
        if (photo!=null) {
            GoogleDrive.insertLocalFile("title","description",null,photoContentType,photo); 
        }
    } catch (Exception e ) {
        log.debug(new String(), e);
    }
    return SUCCESS2;
} 
```

GoogleDrive.java：

```
public static File insertLocalFile(String title, String description,
        String parentId, String mimeType, String data) {
    File body = new File();
    body.setTitle(title);
    body.setDescription(description);
    body.setMimeType(mimeType);

    Drive service = null;
    try {
        service = getDriveService();
        Files files = service.files();
        InputStreamContent isc = new InputStreamContent(mimeType);
        isc.setData(data);
        Insert insert = files.insert(body, isc);  //mediaContent);
        File file = insert.execute();
        return file;
    } catch (IOException e) {
        log.error(new String(), e);
        return null;
    }
}

public static Drive getDriveService() {
    HttpTransport httpTransport = new NetHttpTransport();
    JacksonFactory jsonFactory = new JacksonFactory();
    GoogleCredential credential;
    Drive service = null;
    try {
        credential = new GoogleCredential.Builder()
                .setTransport(httpTransport)
                .setJsonFactory(jsonFactory)
                //.setServiceAccountId(SERVICE_ACCOUNT_EMAIL)
                .setServiceAccountId(SERVICE_ACCOUNT_ID)
                .setServiceAccountScopes(DriveScopes.DRIVE_FILE)
                .setServiceAccountPrivateKeyFromP12File(new java.io.File(SERVICE_ACCOUNT_PKCS12_FILE_PATH))
                .setServiceAccountUser(SERVICE_ACCOUNT_EMAIL)
                .build();
        service = new Drive.Builder(httpTransport, jsonFactory, null)
                .setHttpRequestInitializer(credential).build();
    } catch (GeneralSecurityException e) {
        log.error(new String(), e);
    } catch (IOException e) {
        log.error(new String(), e);
    }
    return service;
} 
```

堆栈跟踪：

```
com.google.api.client.auth.oauth2.TokenResponseException: 400 OK
{
  "error" : "invalid_grant"
}
    at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
    at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:303)
    at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:323)
    at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:340)
    at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:505)
    at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:266)
    at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:857)
    at com.google.api.client.googleapis.media.MediaHttpUploader.executeUploadInitiation(MediaHttpUploader.java:337)
    at com.google.api.client.googleapis.media.MediaHttpUploader.upload(MediaHttpUploader.java:252)
    at com.google.api.services.drive.Drive$Files$Insert.executeUnparsed(Drive.java:309)
    at com.google.api.services.drive.Drive$Files$Insert.execute(Drive.java:331)
    at util.google.GoogleDrive.insertLocalFile(GoogleDrive.java:365)
    at com.lm.action.common.Upload.upload(Upload.java:108)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:453)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:292)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:255)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:236)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:236)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.struts2.gae.interceptor.GaeFileUploadInterceptor.intercept(GaeFileUploadInterceptor.java:275)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:511)
    at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:432)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:383)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:07:57.607

您误用了服务帐户 ID。你应该使用：

```
credential = new GoogleCredential.Builder()
            .setTransport(httpTransport)
            .setJsonFactory(jsonFactory)
            .setServiceAccountId(SERVICE_ACCOUNT_EMAIL)
            //.setServiceAccountId(SERVICE_ACCOUNT_ID)
            .setServiceAccountScopes(DriveScopes.DRIVE_FILE)
            .setServiceAccountPrivateKeyFromP12File(new java.io.File(SERVICE_ACCOUNT_PKCS12_FILE_PATH))
            //.setServiceAccountUser(SERVICE_ACCOUNT_EMAIL)
            .build(); 
```

`setServiceAccountUser()`仅当您想模拟真实用户时才应使用该方法。

# ruby - memcached 返回码 44120 是什么意思？

> ID：13212516
> 
> 赞同：0
> 
> 时间：2012-11-03T19:07:43.200
> 
> 标签：ruby, memcached, amazon-elasticache

我从值 44120 的 memcached 集群获得返回码，这破坏了我的 memcached-northscale ruby​​ 客户端，因为它不知道这个返回码值的含义。

谁能阐明这段代码的含义以及哪些 ruby​​ memcached 客户端能够处理它？

我正在使用返回此值的 AWS ElastiCache 集群。

谢谢！

* * *

**更新**：我只是试图用 memcached 替换 memcached-northscale，但得到了这个异常：

```
TypeError: can't convert Fixnum into String

Where:
[GEM_ROOT]/gems/memcached-1.4.6/lib/memcached/memcached.rb, line 306 
```

我不知道根是什么，但我怀疑它与早期的 memcached-northscale 问题有关。

我也有一个例外：

```
Memcached::Error: Unknown return code: 4832

Where:
[GEM_ROOT]/gems/memcached-1.4.6/lib/memcached/memcached.rb, line 631 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T22:28:16.987

我刚刚发现默认的 memcached 超时被一个非常短的超时覆盖。增加超时消除了这些错误。我不知道为什么它们是由短暂的超时引起的，但是，它似乎是某个地方的库中的一个错误。

# iphone - 使用 ASIHTTPRequest 发送的 HTTPS 请求返回 NULL 响应

> ID：13212519
> 
> 赞同：2
> 
> 时间：2012-11-03T19:08:12.337
> 
> 标签：iphone, ios, ipad, https, asihttprequest

我正在开发一个 iPad 应用程序并使用 ASIHTTPRequest 库 (https://github.com/pokeb/asi-http-request) 向我的 Web 服务器发出请求，该服务器运行 CentOS 6.2 并配备了 Apache 2.2 并启用了 mod_ssl。

当我向服务器发出 HTTPS 请求时，有时会收到空响应。绝对没有。好像服务器完全死了。有时它工作得很好，返回预期的响应。响应何时为空以及何时正常，没有押韵或理由。

*   服务器使用虚拟安全证书
*   我将 validatesSecurityCertificate 设置为 NO
*   我在 httpd.conf 中将 SSLVerifyClient 设置为 none

请注意，通过 Web 浏览器发送的 HTTPS 请求可以正常工作（在您告诉它在没有安全证书的情况下继续进行之后）。但是，通过 HTTP 客户端发送的所有 HTTPS 请求：（（从服务器返回的零长度响应。））

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:34:24.597

使用 ASIHTTPRequest 的诀窍是不要使用它。它的作者[allseeing-i.com/ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest)已弃用它。我建议使用 AFNetworking、RESTKit 甚至 NSURLConnection。

因为它是我们没有你的代码可以看到，但是当遇到一个多年来没有使用过的库的随机问题时，我会说从使用不同的库开始。

# javascript - TypeScript 静态类

> ID：13212521
> 
> 赞同：182
> 
> 时间：2012-11-03T19:08:38.467
> 
> 标签：javascript, class, static, typescript

我想从传统的 JS 迁移到 TypeScript，因为我喜欢类似 C# 的语法。我的问题是我不知道如何在 TypeScript 中声明静态类。

在 C# 中，我经常使用静态类来组织变量和方法，将它们放在一个命名类中，而无需实例化对象。在 vanilla JS 中，我曾经使用一个简单的 JS 对象来执行此操作：

```
var myStaticClass = {
    property: 10,
    method: function(){}
} 
```

在 TypeScript 中，我宁愿采用我的 C-sharpy 方法，但似乎 TS 中不存在静态类。这个问题的适当解决方案是什么？

* * *

## 回答 #1

> 赞同：244
> 
> 时间：2012-11-04T19:54:38.953

自 TypeScript 1.6 以来，抽象类一直是 TypeScript 的一等公民。您不能实例化抽象类。

这是一个例子：

```
export abstract class MyClass {         
    public static myProp = "Hello";

    public static doSomething(): string {
      return "World";
    }
}

const okay = MyClass.doSomething();

//const errors = new MyClass(); // Error 
```

* * *

## 回答 #2

> 赞同：188
> 
> 时间：2012-11-03T19:24:49.347

TypeScript 不是 C#，所以你不应该期望 TypeScript 中的 C# 的相同概念。问题是你为什么想要静态类？

在 C# 中，静态类只是一个不能被子类化并且必须只包含静态方法的类。C# 不允许在类之外定义函数。然而，在 TypeScript 中这是可能的。

如果您正在寻找将函数/方法放入命名空间（即非全局）的方法，您可以考虑使用 TypeScript 的模块，例如

```
module M {
    var s = "hello";
    export function f() {
        return s;
    }
} 
```

这样你就可以在外部访问Mf()，但不能访问s，并且不能扩展模块。

有关更多详细信息，请参阅 TypeScript[规范](https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md#821-instance-and-static-members)。

* * *

## 回答 #3

> 赞同：75
> 
> 时间：2012-11-03T19:31:26.613

[Typescript Language Specification](https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md#821-instance-and-static-members) 8.2.1 中描述了定义类的静态属性和方法：

```
class Point { 
  constructor(public x: number, public y: number) { 
    throw new Error('cannot instantiate using a static class');
  } 
  public distance(p: Point) { 
    var dx = this.x - p.x; 
    var dy = this.y - p.y; 
    return Math.sqrt(dx * dx + dy * dy); 
  } 
  static origin = new Point(0, 0); 
  static distance(p1: Point, p2: Point) { 
    return p1.distance(p2); 
  } 
} 
```

where`Point.distance()`是静态（或“类”）方法。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2018-04-25T11:57:38.310

这个问题已经过时了，但我想留下一个利用当前语言版本的答案。不幸的是，TypeScript 中仍然不存在静态类，但是您可以使用私有构造函数编写一个行为相似的类，只需少量开销即可防止从外部实例化类。

```
class MyStaticClass {
    public static readonly property: number = 42;
    public static myMethod(): void { /* ... */ }
    private constructor() { /* noop */ }
} 
```

此代码段将允许您使用类似于 C# 对应项的“静态”类，唯一的缺点是仍然可以从内部实例化它们。幸运的是，尽管您不能使用私有构造函数扩展类。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-07-18T16:57:21.747

这是一种方式：

```
class SomeClass {
    private static myStaticVariable = "whatever";
    private static __static_ctor = (() => { /* do static constructor stuff :) */ })();
} 
```

`__static_ctor`这是一个立即调用的函数表达式。Typescript 将输出代码以在生成的类结束时调用它。

更新：对于静态构造函数中不再允许被静态成员引用的泛型类型，您现在需要一个额外的步骤：

```
class SomeClass<T> {
    static myStaticVariable = "whatever";
    private ___static_ctor = (() => { var someClass:SomeClass<T> ; /* do static constructor stuff :) */ })();
    private static __static_ctor = SomeClass.prototype.___static_ctor();
} 
```

*当然，在任何情况下，您都可以在类之后*调用泛型类型静态构造函数，例如：

```
class SomeClass<T> {
    static myStaticVariable = "whatever";
    private __static_ctor = (() => { var example: SomeClass<T>; /* do static constructor stuff :) */ })();
}
SomeClass.prototype.__static_ctor(); 
```

只要记住永远不要`this`在`__static_ctor`上面使用（显然）。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2018-07-31T09:08:46.170

我今天（2018 年 7 月 31 日）得到了相同的用例，发现这是一种解决方法。它基于我的研究并且对我有用。 **期望**- 在 TypeScript 中实现以下目标：

```
var myStaticClass = {
    property: 10,
    method: function(){} 
} 
```

我这样做了：

```
//MyStaticMembers.ts
namespace MyStaticMembers {
        class MyStaticClass {
           static property: number = 10;
           static myMethod() {...}
        }
        export function Property(): number {
           return MyStaticClass.property;
        }
        export function Method(): void {
           return MyStaticClass.myMethod();
        }
     } 
```

因此，我们将按如下方式使用它：

```
//app.ts
/// <reference path="MyStaticMembers.ts" />
    console.log(MyStaticMembers.Property);
    MyStaticMembers.Method(); 
```

这对我有用。如果有人有其他更好的建议，请让我们都听到！！！谢谢...

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-03-31T05:21:39.210

C# 等语言中的静态类之所以存在，是因为没有其他顶级结构可以对数据和函数进行分组。然而，在 JavaScript 中，它们会这样做，因此像您所做的那样只声明一个对象要自然得多。为了更接近地模仿类语法，您可以像这样声明方法：

```
const myStaticClass = {
    property: 10,

    method() {

    }
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-01-22T05:59:50.750

使用 ES6 外部模块可以这样实现：

```
// privately scoped array
let arr = [];

export let ArrayModule = {
    add: x => arr.push(x),
    print: () => console.log(arr),
} 
```

[这可以防止使用被 TSLint [1]](https://palantir.github.io/tslint/rules/no-namespace/) [[2]](https://palantir.github.io/tslint/rules/no-internal-module/)认为是不好的做法的内部模块和命名空间，允许私有和公共范围，并防止初始化不需要的类对象。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-05-23T02:03:14.937

见[http://www.basarat.com/2013/04/typescript-static-constructors-for.html](http://www.basarat.com/2013/04/typescript-static-constructors-for.html)

这是一种“伪造”静态构造函数的方法。这并非没有危险 - 请参阅[引用的 codeplex 项目](https://typescript.codeplex.com/workitem/862)。

```
class Test {
    static foo = "orig";

    // Non void static function
    static stat() {
        console.log("Do any static construction here");
        foo = "static initialized";
        // Required to make function non void
        return null;
    }
    // Static variable assignment
    static statrun = Test.stat();
}

// Static construction will have been done:
console.log(Test.foo); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-11-28T17:00:30.493

实现此目的的一种可能方法是在另一个类中拥有一个类的静态实例。例如：

```
class SystemParams
{
  pageWidth:  number = 8270;
  pageHeight: number = 11690;  
}

class DocLevelParams
{
  totalPages: number = 0;
}

class Wrapper
{ 
  static System: SystemParams = new SystemParams();
  static DocLevel: DocLevelParams = new DocLevelParams();
} 
```

然后可以使用 Wrapper 访问参数，而无需声明它的实例。例如：

```
Wrapper.System.pageWidth = 1234;
Wrapper.DocLevel.totalPages = 10; 
```

因此，您可以获得 JavaScript 类型对象的好处（如原始问题中所述），但能够添加 TypeScript 类型的好处。此外，它避免了必须在类中的所有参数前面添加“静态”。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-07-05T14:09:47.117

您可以使用带有**公共静态只读成员的****抽象类**来实现与您正在寻找的非常相似的东西。我相信您正在寻找类似来自 C# 或 C/C++ 的东西来将小块数据组织在一起。**`struct`**

 **抽象类最酷的地方在于

*   它们不能被实例化，
*   它们只能来自和
*   它们可以为其中定义的部分或全部方法提供基本实现。

您甚至可以使用此技术在某种程度上模仿 an `enum`（例如，您无法打开它们），但具有的属性可以不仅仅是字符串或数字。

```
// you can omit the public keyword because it's the default in TS, I left it here for clarity

export abstract class RequestTypes {
  public static readonly All = 'All types';
  public static readonly Partners = 'Partners';
  public static readonly Articles = 'Articles';
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-05-09T17:34:24.820

我正在寻找类似的东西，遇到了一个叫做`Singleton Pattern`.

参考：[单例模式](http://www.codebelt.com/typescript/typescript-singleton-pattern/)

> 我正在开发一个 BulkLoader 类来加载不同类型的文件，并希望对其使用 Singleton 模式。通过这种方式，我可以从我的主应用程序类中加载文件，并轻松地从其他类中检索加载的文件。
> 
> 下面是一个简单的示例，如何使用 TypeScript 和 Singleton 模式为游戏制作分数管理器。
> 
> 类单例类 {
> 
> ```
> private static _instance:SingletonClass = new SingletonClass();
> 
> private _score:number = 0;
> 
> constructor() {
>     if(SingletonClass._instance){
>         throw new Error("Error: Instantiation failed: Use SingletonDemo.getInstance() instead of new.");
>     }
>     SingletonClass._instance = this;
> }
> 
> public static getInstance():SingletonClass
> {
>     return SingletonClass._instance;
> }
> 
> public setScore(value:number):void
> {
>     this._score = value;
> }
> 
> public getScore():number
> {
>     return this._score;
> }
> 
> public addPoints(value:number):void
> {
>     this._score += value;
> }
> 
> public removePoints(value:number):void
> {
>     this._score -= value;
> }   } 
> ```
> 
> 然后在您的其他课程中的任何地方，您都可以通过以下方式访问 Singleton：
> 
> ```
> var scoreManager = SingletonClass.getInstance();
> scoreManager.setScore(10); scoreManager.addPoints(1);
> scoreManager.removePoints(2); console.log( scoreManager.getScore() ); 
> ```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-12-23T06:52:24.713

您还可以使用关键字`namespace`来组织您的变量、类、方法等。见[文档](https://www.typescriptlang.org/docs/handbook/namespaces.html)

```
namespace Validation {
    export interface StringValidator {
        isAcceptable(s: string): boolean;
    }

    const lettersRegexp = /^[A-Za-z]+$/;
    const numberRegexp = /^[0-9]+$/;

    export class LettersOnlyValidator implements StringValidator {
        isAcceptable(s: string) {
            return lettersRegexp.test(s);
        }
    }

    export class ZipCodeValidator implements StringValidator {
        isAcceptable(s: string) {
            return s.length === 5 && numberRegexp.test(s);
        }
    }
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-12-11T18:50:54.707

您可以在 Typescript 中创建一个类，如下所示：

```
export class Coordinate {
        static x: number;
        static y: number;
        static gradient() {
            return y/x;
        }
    } 
```

并引用它的“没有”实例化的属性和方法：

```
Coordinate.x = 10;
Coordinate.y = 10;
console.log(`x of ${Coordinate.x} and y of ${Coordinate.y} has gradient of ${Coordinate.gradient()}`); 
```

Fyi 使用反引号 `` 和插值语法 ${} 可以轻松地将代码与文本混合:-)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-09-24T09:36:26.340

我首选的方法是只使用一个 const 对象（主要是代替枚举）：

```
const RequestTypes2 = {
    All: 'All types',
    Partners: 'Partners',
    Articles: 'Articles',
} as const; // need the "const" to force the property types to be string literal types (hover RequestTypes2 to see!)

// now you can do this (hover AllowedRequestTypes to see the inferred type)
type AllowedRequestTypes = typeof RequestTypes2[keyof typeof RequestTypes2];

function doRequest(requestType: AllowedRequestTypes) {

}

// these should work 
doRequest('Partners');
doRequest(RequestTypes2.All);
doRequest(RequestTypes.Articles);   // the property's type is "Articles" (string literal type)

// this fails
doRequest('Incorrect'); 
```

检查[这个 TS 游乐场](https://www.typescriptlang.org/play?#code/KYDwDg9gTgLgBAQwEYGcZQQY3pgNglFOAJWAEcBXYNAFQE8xq4BvAWACg44wKlcBLTHDQIYguFGAIAJhAB2uOnACCuXHAC8cAOSr1MBtW0BuDlx59xIsUMkz5iuAAUEsOcChEt2l248oTM25eASFrcTtZBSVlWEFcJm9YmwSA03YAXw4OUEhYOAAzCjlsfnk4AHcAC0EqgEkUOpgACklKahh6RgAuYXR%20OQBzAEoWIK4UCv4YTCq4VvIqWkNRtk4uDa5MAmASRY6u6gA6PW7xzYukOwBrdIuN7ZRd0nblxhQj3xh3TzP1%2082Vykt3Om0ez32b2OyXi1D%20AMuNzuGyymWy7Fy0HgRRKYnKwAAbsA5DQaigAOrQa4oZqMKCYYkwBCDYC9OQUAC2SA8q3Ok2ms3m6CovP%20F3B3A8DLkTJZcAAfHAABwABnhCIe8hQEASR1wEEGzW0yAgROVKoApNphsiNXAgQgQWKwTtJfTGczdoqAKxq0EAzBanXAPUGo0ms2%20q02-33B1OhESunS2VeuAAZj9zoDQd1%20sNxqQpt2mejto18fLm2kwAKCAouBg6rtgbk2rzYe0%20oqbpTnut5dRqI4AHoAFRwc5ICjwOpwATXXYwMmIMBgKAQLBzbkwGAec6E4n24C7jxwZcIORwYmclAAGmP2woTz6UAGg3n0w8CFwRAqVMqaY5mXfgiBgCAIEndgxxHdFWzQPZXk6QwUAAJk0MYxVOHQ9HPFDtDvc4vh%20FBeh8Vxvn8AjzhhPA4RwuI6ICQjMkQIh4JgYw4BHEc4HcYBpHPKpdgAIg4kTz0ggpoAZITdnXCA6QMPD3kk49X3fT89wwfQUPmKpiygRClmQ950PA4RgGAABCYZ0R4viIB7OgIAoOBtivWQhNA-TDJUNQnIEl4TMOMDIKeJdhLgAYCg8SRBIMRg7PYRLdj0QLpGCg49K0VKIAKYzsrMgBtRcXIKvKCqyqE0IAXXSDgcVKcpZGqlo2hCwxenSiogshUzqFFDhh3YBzl2oXYUAMhtBP-KBrig1r%20qNYiqJjdglqQ5o2tC1CTjUdbNpM7b%20tCk5GNSG0NjGqKFKUuhtDAwxoqIETaNSCTmjQN8hi079dKS%20zeJAog634X8OCOjojTqEpoEkbAByAA)。**

# jquery - 如何找到一个div相对于父div有多少像素（jquery）

> ID：13212524
> 
> 赞同：4
> 
> 时间：2012-11-03T19:08:56.423
> 
> 标签：jquery

举个例子，我如何找到从父级向下有多少像素是 child3？

```
<div class="parent" id="unique"> 
<div class="child1"></div>
<div class="child2"></div>
<div class="child3"></div>
<div class="child4"></div>
</div> 
```

假设类定义了宽度、高度、填充、边距等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T19:11:12.593

您可以使用`.offset()`：

```
var $child = $('.child3');
var offset = $child.parent().offset().top - $child.offset().top; 
```

我不太确定它是否考虑了边界和边距，但这些应该不难解释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T19:21:34.187

```
var child=$('.child3');
var parent=$('.parent');

return child.offset().top-parent.offset().top; 
```

[`Offset`](http://api.jquery.com/offset/)定义元素相对于文档的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T19:10:55.777

我相信您正在寻找的是`position()`功能。它返回一个包含`top`和`left`值的对象。

> **描述**：获取匹配元素集合中第一个元素相对于偏移父元素的当前坐标。

[文档`position()`](http://api.jquery.com/position/)

# maven - 如何获取参数中所有依赖项 JAR 的列表？

> ID：13212525
> 
> 赞同：0
> 
> 时间：2012-11-03T19:09:03.613
> 
> 标签：maven, talend, ant-contrib, maven-dependency-plugin

我正在为 Talend Open Studio 开发一个插件；该平台的组件架构需要在组件描述符 XML 文件中以如下形式声明所有外部 JAR：

```
<IMPORT MODULE="commons-collections-3.2.1.jar" NAME="commons-collections-3.2.1" 
    REQUIRED="true"/> 
```

我使用 Maven 依赖插件来管理所有这些外部 JAR

有没有办法在列表或其他东西中获取所有依赖项名称？这样我可以构建所需的字符串（也许使用 antcontrib 任务），填充 ${parameter} 并最终使用 maven-replacer-plugin 将其添加到 XML 文件中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T09:39:41.107

最简单的解决方案是通过[buld-classpath 目标使用](http://maven.apache.org/plugins/maven-dependency-plugin/build-classpath-mojo.html)[maven-dependency-plugin](http://maven.apache.org/plugins/maven-dependency-plugin/)。可以为这个目标提供补充参数，以将结果放入文件中，例如：

```
mvn dependency:build-classpath -Dmdep.outputFile=classpath.out 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T10:14:16.827

好的，我部分解决了这种应该有一些限制的方法：

```
<plugin>
        <artifactId>maven-antrun-plugin</artifactId>
        <version>1.6</version>
        <dependencies>
            <dependency>
            <groupId>ant-contrib</groupId>
            <artifactId>ant-contrib</artifactId>
            <version>1.0b3</version>
            <exclusions>
                <exclusion>
                    <groupId>ant</groupId>
                    <artifactId>ant</artifactId>
                </exclusion>
            </exclusions>
            </dependency>
            <dependency>
                <groupId>ant</groupId>
                <artifactId>ant-nodeps</artifactId>
                <version>1.6.5</version>
            </dependency>
        </dependencies>
        <executions>
          <execution>
            <phase>package</phase>
            <id>copy-resources</id>
            <configuration>
              <exportAntProperties>true</exportAntProperties>
              <tasks>
                <!-- add the ant tasks from ant-contrib -->
                <taskdef resource="net/sf/antcontrib/antlib.xml" classpathref="maven.plugin.classpath"/>
                <var name="import.set" value=""/> 
                <for param="file">
                    <path>
                        <fileset dir="${project.build.directory}" includes="*.jar"/>
                    </path>
                    <sequential> 
                        <var name="basename" unset="true"/> 
                        <basename file="@{file}" property="basename"/>
                        <var name="filenames" value="${basename}"/>
                        <var name="import.clause" value='&lt;IMPORT MODULE="${filenames}" NAME="${filenames}" REQUIRED="true"/&gt;'/>
                        <var name="import.set" value="${import.clause}${line.separator}${import.set}" />
                    </sequential> 
                </for>
                <property name="import.jar" value="${import.set}"/> 
                <echo>${import.jar}</echo>
              </tasks>
            </configuration>
            <goals>
              <goal>run</goal>
            </goals>
          </execution>
        </executions>
      </plugin> 
```

还有一些问题：即使 exportAntProperties 设置为 true，属性 ${import.jar} 在其他 maven 目标中的 ant taska 之外仍然不可用，而如果我切换到 maven-antrun-plugin 1.7 版本，则会出现“执行 ant 时出错任务：org.apache.tools.ant.launch.Locator.fromJarURI(Ljava/lang/String;)Ljava/lang/String;" 抛出异常。还是没有线索...

# java - 选项卡中有表格的 JPanel 中的错误

> ID：13212529
> 
> 赞同：1
> 
> 时间：2012-11-03T19:09:50.573
> 
> 标签：java, swing, exception

我什至不知道要问什么，只能发布代码并将错误消息放在这里。该程序应该创建一个带有两个选项卡的窗口，每个选项卡中都有一个分数表。

```
package components;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.JTextPane;

public class TopLevelDemo extends JPanel{
    public TopLevelDemo() {
        JTabbedPane tabbedPane = new JTabbedPane();
        String[] players = new String[4];
        Object[][] singlesScores = new Object[2][4];
        Object[][] doublesScores = new Object[2][4];
        createScores(singlesScores);
        createScores(doublesScores);

        JComponent panel1 = makeScoreTable(singlesScores, players, 0, 0);
        tabbedPane.addTab("Singles",panel1);
        tabbedPane.setMnemonicAt(0, KeyEvent.VK_1);

        JComponent panel2 = makeScoreTable(doublesScores, players, 0, 0);
        tabbedPane.addTab("Doubles", panel2);
        tabbedPane.setMnemonicAt(1, KeyEvent.VK_2);

        add(tabbedPane);
        tabbedPane.setTabLayoutPolicy(JTabbedPane.SCROLL_TAB_LAYOUT);
    }
    protected JComponent makeScoreTable(Object[][] scores, String[] players, int x, int y) {
        JPanel panel = new JPanel(true);
        JTable table = new JTable(scores, players);
        GridBagConstraints c = new GridBagConstraints();
        c.gridx=x;
        c.gridy=y;
        panel.add(table, c);
        return panel;
    }
    protected JComponent makeTextPanel(String text) {
        JPanel panel = new JPanel(true);
        JLabel filler = new JLabel(text);
        filler.setHorizontalAlignment(JLabel.CENTER);
        panel.setLayout(new GridLayout(10, 25));
        panel.add(filler);
        return panel;
    }
    private static void createAndShowGUI() {
        JFrame frame = new JFrame("TopLevelDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        frame.add(new TopLevelDemo(), BorderLayout.CENTER);
        frame.pack();
        frame.setVisible(true);
    }
     private Object[][] createScores(Object[][] scores) {
        scores[0][0]= new String("Home");
        scores[0][1]= new Integer(0);
        scores[0][2]= new Integer(0);
        scores[0][3]= new Integer(0);
        scores[1][0]= new String("Away");
        scores[0][1]= new Integer(0);
        scores[0][2]= new Integer(0);
        scores[0][3]= new Integer(0);
        return scores;
    }
    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                UIManager.put("swing.boldMetal", Boolean.FALSE);
                createAndShowGUI();
            }
        });
    }
} 
```

然后我得到错误

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at javax.swing.JTable$1.getColumnName(JTable.java:665)
    at javax.swing.JTable.addColumn(JTable.java:2770)
    at javax.swing.JTable.createDefaultColumnsFromModel(JTable.java:1264)
    at javax.swing.JTable.tableChanged(JTable.java:4374)
    at javax.swing.JTable.setModel(JTable.java:3676)
    at javax.swing.JTable.<init>(JTable.java:612)
    at javax.swing.JTable.<init>(JTable.java:553)
    at javax.swing.JTable.<init>(JTable.java:664)
    at components.TopLevelDemo.makeScoreTable(TopLevelDemo.java:30)
    at components.TopLevelDemo.<init>(TopLevelDemo.java:17)
    at components.TopLevelDemo.createAndShowGUI(TopLevelDemo.java:49)
    at components.TopLevelDemo.access$000(TopLevelDemo.java:8)
    at components.TopLevelDemo$1.run(TopLevelDemo.java:68)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:666)
    at java.awt.EventQueue.access$400(EventQueue.java:81)
    at java.awt.EventQueue$2.run(EventQueue.java:627)
    at java.awt.EventQueue$2.run(EventQueue.java:625)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:636)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

有人知道我做错了什么或做得不好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T19:11:39.907

当 JTable 尝试创建列时，您似乎获得了 NPE，这可以通过以下事实来解释：当您调用它时：

```
JComponent panel1 = makeScoreTable(singlesScores, players, 0, 0); 
```

玩家数组只包含空字符串。使它们非空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T19:13:07.627

您需要为表列名称分配值。

一个字符串数组

```
String[] players = new String[4]; 
```

创建一个 2 s 的数组，`String`每个数组都有默认值`null`。你可以使用：

```
String[] players = { "Player 1", "Player 2", "Player 3", "Player 4" }; 
```

**更新：**

直接在乐谱面板上添加一个`JTable`不允许显示所有客户区。要修复，您可以将其放在`JScrollPane`：

```
panel.add(new JScrollPane(table), c); 
```

# java - 在 Java 正则表达式中使用 .find() 遍历字符串

> ID：13212531
> 
> 赞同：5
> 
> 时间：2012-11-03T19:10:15.190
> 
> 标签：java, regex, string

我目前正在尝试使用正则表达式解决来自codingbat.com 的问题。

我对此并不陌生，因此将不胜感激。我可以使用 String 方法相对容易地解决这个问题，但我正在尝试使用正则表达式。

提示如下：给定一个字符串和一个非空单词字符串，返回一个由字符串中每个单词出现之前和之后的每个字符组成的字符串。忽略单词前后没有字符的情况，如果字符在两个单词之间，它可能会被包含两次。

```
wordEnds("abcXY123XYijk", "XY") → "c13i"
wordEnds("XY123XY", "XY") → "13"
wordEnds("XY1XY", "XY") → "11" 
```

ETC

到目前为止我的代码：

```
String regex = ".?" + word+ ".?";
Pattern p = Pattern.compile(regex);
Matcher m = p.matcher(str);

String newStr = "";
while(m.find())
    newStr += m.group().replace(word, "");

return newStr; 
```

问题是当连续有多个单词实例时，程序会错过单词前面的字符，因为 m.find() 超出了它。

例如：`wordEnds("abc1xyz1i1j", "1")`应该返回`"cxziij"`，但我的方法返回`"cxzij"`，不重复`"i"`

我将不胜感激一个简单的解决方案，并附上我可以应用于其他一般正则表达式问题的解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:38:57.423

这是一个单行解决方案：

```
String wordEnds = input.replaceAll(".*?(.)" + word + "(?:(?=(.)" + word + ")|(.).*?(?=$|." + word + "))", "$1$2$3"); 
```

这将您的边缘情况匹配为非捕获组中的前瞻，然后匹配通常的（消费）情况。

请注意，您的要求不需要迭代，只有您的问题标题假定它是必要的，但事实并非如此。

另请注意，为了绝对安全，您应该转义所有字符，`word`以防它们中的任何一个是特殊的“正则表达式”字符，所以如果您不能保证，您需要使用`Pattern.quote(word)`而不是`word`.

这是对通常情况和边缘情况的测试，表明它有效：

```
public static String wordEnds(String input, String word) {
    word = Pattern.quote(word); // add this line to be 100% safe
    return input.replaceAll(".*?(.)" + word + "(?:(?=(.)" + word + ")|(.).*?(?=$|." + word + "))", "$1$2$3");
}

public static void main(String[] args) {
    System.out.println(wordEnds("abcXY123XYijk", "XY"));
    System.out.println(wordEnds("abc1xyz1i1j", "1"));
} 
```

输出：

```
c13i
cxziij 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T19:19:40.847

使用零宽度断言的正向后视和正向前瞻

```
(?<=(.)|^)1(?=(.)|$)
    ^     ^     ^-looks for a character after 1 and captures it in group2
    |     |->matches 1..you can replace it with any word
    |
    |->looks for a character just before 1 and captures it in group 1..this is zero width assertion that doesn't move forward to match.it is just a test and thus allow us to capture the values 
```

`$1`并`$2`包含您的价值..继续寻找直到最后

所以这应该是

```
String s1 = "abcXY123XYiXYjk";
String s2 = java.util.regex.Pattern.quote("XY");
String s3 = "";
String r = "(?<=(.)|^)"+s2+"(?=(.)|$)";
Pattern p = Pattern.compile(r);
Matcher m = p.matcher(s1);
while(m.find()) s3 += m.group(1)+m.group(2);
//s3 now contains c13iij 
```

在[这里工作](http://ideone.com/w5nimi)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T19:32:40.857

使用正则表达式如下：

```
Matcher m = Pattern.compile("(.|)" + Pattern.quote(b) + "(?=(.?))").matcher(a);
for (int i = 1; m.find(); c += m.group(1) + m.group(2), i++); 
```

检查**[这个演示](http://ideone.com/C4F4CJ)**。

# ruby-on-rails-3.2 - 急切的加载工作直到特殊情况

> ID：13212545
> 
> 赞同：0
> 
> 时间：2012-11-03T19:12:29.713
> 
> 标签：ruby-on-rails-3.2, eager-loading

我有一个 Staff 模型，其中有很多 staff_orders

```
class Staff < Ressource
  has_many :staff_orders 
```

staff_orders 包含一个 from_date 和一个 to_date。在此期间，工作人员被占用。

我想创建一个工作人员的下拉列表，在每个工作人员后面显示日期，当他被占用时： *“拉尔夫艾伦（11 月 1 日至 11 月 2 日，11 月 4 日至 11 月 5 日）”*

在这种情况下，急切加载可以完美运行。我需要使用 LEFT JOIN，因为我想列出所有员工，无论他们是否被员工订单占用。

```
@staff_collection = Staff.joins("LEFT JOIN staff_orders ON
  staffs.id=staff_orders.staff_id").
  collect{ |x| [x.long_name, x.id] } 
```

但现在是棘手的部分。现在我只想在员工姓名后面添加某个时间跨度（例如本周）的占用信息。例如： *“拉尔夫艾伦（11 月 4 日 - 11 月 5 日）”*

```
@staff_collection = Staff.joins("LEFT JOIN staff_orders ON
  ressources.id=staff_orders.staff_id").
  collect{ |x| [x.long_name_occupied(@from_date,@to_date), x.id] } 
```

我通过使用过滤日期作为参数调用 name 方法来做到这一点。现在它不再执行急切加载。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T01:40:20.913

似乎您可以使用原始选择语句并在其上抛出一个 where 子句，该子句仅返回开始/停止日期为 <= @to_date 的时间。

* * *

# android - Android 使用 contentresolver.bulkInsert() 在“content://sms/”中插入多条短信：太慢了

> ID：13212547
> 
> 赞同：2
> 
> 时间：2012-11-03T19:12:50.413
> 
> 标签：android, sqlite

我想在“content://sms/”表中插入多条短信。假设是 500 条短信。

我的代码是：

```
ContentValues [500] valuesarray = new ContentValues[];

for(int i=0;i<values.size();i++){
     valuesarray[i] = values.get(i);
}

getContentResolver().bulkInsert(Uri.parse("content://sms/"), valuesarray); 
```

它可以工作，但速度极慢，并且与 insert() 方法没有区别。我在网上搜索，找到了类似的方法：

```
try {
    database.beginTransaction();

    for (ContentValues initialValues : allValues) {
        values = initialValues == null ? new ContentValues() : new ContentValues(initialValues);
        rowId = insertEvent(database, values);
        if (rowId > 0)
            rowsAdded++;
    }

    database.setTransactionSuccessful();
} catch (SQLException ex) {

} finally {
    database.endTransaction();
} 
```

但这是针对个人数据库的。如何在 Android 的“content://sms/”提供程序中使用这样的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T20:07:54.253

> 如何在 Android 的“content://sms/”提供程序中使用这样的方法？

你不能，对不起。

（此外，该提供程序不是 Android SDK 的一部分，并且可能并非在所有设备上都存在，因此您不应该使用它）

# prolog - 按结果列表的第二个值搜索序言结果列表

> ID：13212548
> 
> 赞同：0
> 
> 时间：2012-11-03T19:12:59.687
> 
> 标签：prolog

我使用 findall 谓词

```
findall(A,getzoo(B,A),MyList) 
```

返回此列表

```
A = [[[ant,bear,crab,tortoise,lion],230], [[lion,tiger,bear],560], [[platypus,tiger,snake],3500], [[hippo,giraffe,snail,emu,condor],30], [[bat,robin,hawk,ape,macaw],100]] 
```

我需要从列表中返回最小值，即`Min = [hippo,giraffe,snail,emu,condor],30]`

而且我的 min 谓词在直接列表上运行良好。

```
minList([H],H).  
minList([H|T],Min):-  minList(T,Next),  (H<Next, Min=H; H>=Next, Min=Next) 
```

.

我在尝试解析结构时遇到问题 [[[List],Number],[[List],Number],[[List],Number],...] 并且无法隔离数字。

这是我一直在寻找的答案。

```
findVal([[H,Val]|T],Val).
findVal([H|T],Out) :- findVal(T,Out). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T19:21:41.317

由于您的列表项是双元素列表，因此您必须编写一个与这些列表相结合并将变量绑定到第二个元素的模式。IE，

```
[_, Y] 
```

为单个元素检索其第二个元素并调用它`Y`。

那么，递归子句 for`minList`将变为

```
minList([[X, Y] | T], Min) :-
    minList(T, MinT),
    % now pick apart MinT and compare Y with its right half 
```

或者

```
minList([H | T], Min) :-
    H = [X, Y],
    % proceed as before 
```

# java - setEuler 和 rotX, rotY, rotZ 有什么区别？

> ID：13212556
> 
> 赞同：1
> 
> 时间：2012-11-03T19:13:53.113
> 
> 标签：java, java-3d

我看了一些关于[Transform 3d](http://download.java.net/media/java3d/javadoc/1.3.2/javax/media/j3d/Transform3D.html)的描述，但我不能说我真的理解[setEuler](http://download.java.net/media/java3d/javadoc/1.3.2/javax/media/j3d/Transform3D.html#setEuler%28javax.vecmath.Vector3d%29)和 rotX、rotY 和 rotZ 之间的区别。
我还搜索[了一些档案](http://markmail.org/message/wi6g6sl4ycstqlrh)，但没有一个真正给我一个可以理解的答案。

有谁知道有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T19:16:50.787

它们本质上只是简写：

`t.setEuler(new Vector3d(a, 0, 0))`⇔ `t.rotX(a)`
`t.setEuler(new Vector3d(0, a, 0))`⇔ `t.rotY(a)`
`t.setEuler(new Vector3d(0, 0, a))`⇔`t.rotZ(a)`

# inno-setup - Inno Setup - 透明闪屏

> ID：13212559
> 
> 赞同：2
> 
> 时间：2012-11-03T19:14:09.503
> 
> 标签：inno-setup, splash-screen

我有一个问题，我需要你的帮助..我想找到一种不同的方式来放置一个透明的启动屏幕或更正我的代码。这里的代码可以工作......但是有一个问题，有些人在安装结束时会出错。

这是安装结束时错误的样子 ![在此处输入图像描述](../Images/a297b420c80210ab3fef7c962f9f6d00.png)

![在此处输入图像描述](../Images/f0cb62f2189cc186e34a03332be9fb16.png)

我检查了代码中的另一行，发现问题出在启动屏幕的代码上，如果我将其删除，安装程序将完美运行，我看到我需要的是 a`procedure DeinitializeSetup();`但我不知道如何将其放入启动屏幕部分，如果我删除其他代码中的内容，例如皮肤，徽标等，我会收到这种错误`procedure DeinitializeSetup();`。进入 windows 临时文件夹的文件...然后我需要的是`procedure DeinitializeSetup();`启动屏幕代码中的解决这个问题... :( 这是任何人都可以测试[IsUtilsHb.dll的 dll 文件](http://www.mediafire.com/?0nawon231dtma5e)

那么...请如果有人知道放置透明启动屏幕的不同方法...不胜感激..或更好..修复此代码部分:)

```
[setup]
AppName=Slash PNG
AppVerName=1.0
DefaultDirName={pf}\program

[Languages]
Name: "spanish"; MessagesFile: "compiler:Languages\Spanish.isl"

[Files]
Source: IsUtilsHb.dll; DestDir: {app}; Flags: dontcopy
Source: SplashScreen.png; DestDir: {app}; Flags: dontcopy

[Code]
function SplashScreen(hWnd: Integer; pathPng: String; nSleep: Integer): Integer;
external 'SplashScreen@files:IsUtilsHb.dll stdcall';

procedure InitializeWizard();
var 
  SplashFileName: string;
begin
  SplashFileName := ExpandConstant('{tmp}\SplashScreen.png');
  ExtractTemporaryFile('SplashScreen.png');
  SplashScreen(StrToInt(ExpandConstant('{hwnd}')), SplashFileName, 5000);
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T21:30:40.157

在浏览了整个互联网之后，我得到了这个解决方案：

这是`DLL`我正在使用： [isgsg.dll](http://www.mediafire.com/?abiq39n9zumj12w)

```
[setup]
AppName=Slash PNG
AppVerName=1.0
DefaultDirName={pf}\program

[Languages]
Name: "spanish"; MessagesFile: "compiler:Languages\Spanish.isl"

Source: "Splash.png"; DestDir: {tmp}; Flags: ignoreversion dontcopy nocompression
Source: isgsg.dll; DestDir: {tmp}; Flags: ignoreversion dontcopy nocompression

[Code]
procedure ShowSplashScreen(p1:HWND;p2:string;p3,p4,p5,p6,p7:integer;p8:boolean;p9:Cardinal;p10:integer); external 'ShowSplashScreen@files:isgsg.dll stdcall delayload';

procedure InitializeWizard();
begin
  ExtractTemporaryFile('Splash.png');
  ShowSplashScreen(WizardForm.Handle,ExpandConstant('{tmp}\Splash.png'),1000,3000,1000,0,255,True,$FFFFFF,10);
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-26T04:56:14.037

刚刚添加：

```
ShowSplashScreen(WizardForm.Handle,ExpandConstant('{tmp}\Splash.png'),1000,3000,1000,0,255,True,$FFFFFF,10); 
```

解释：

```
ShowSplashScreen(WizardForm.Handle,ExpandConstant('{tmp}\Splash.png'),1000(appear time),3000(show time),1000(disappear time),0(like a intermittent reload time),255(transparency 0..255),True,$FFFFFF (transparency color if not png transp),10); 
```

像一个`intermittent reload time = use 9999999`，你看到像一个雷声图像

# math - 如何用数学方程画一幅画

> ID：13212567
> 
> 赞同：0
> 
> 时间：2012-11-03T19:16:04.767
> 
> 标签：math, mathematical-optimization, equation

最近我看到了一些可以用[蝙蝠侠标志](http://mathworld.wolfram.com/BatmanCurve.html)和[心脏](http://mathworld.wolfram.com/HeartCurve.html)等数学方程式绘制的图片。

有没有一种特定的方法可以找到绘制所需图片的方程？（例如，我想用一些数学方程式画出字母 S）。

谢谢。

ps 我猜这是一个优化问题。首先从所需图片的边界获取一些样本，然后找到与这些样本差异最小的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:22:31.077

你是对的。您从图片的布局中获得的样本越多，通过使用数值分析进行近似，您可以获得的函数就越接近（例如，您可以找到包含所有样本的多项式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T17:14:47.723

假设你的图片是黑白的，你可能想看看这个 [http://www.mathworks.co.uk/help/stats/nlinfit.html](http://www.mathworks.co.uk/help/stats/nlinfit.html)

您可以获得点并对它们执行回归。线性回归会给你一条线。非线性会让你得到更准确的东西。

如果图片更复杂，那么你将不得不提取一些特征，它会变得更复杂。

# java - 如何在 Junit 控制台中接受用户的输入

> ID：13212568
> 
> 赞同：5
> 
> 时间：2012-11-03T19:16:10.367
> 
> 标签：java, junit, junit4, junit3

我正在尝试为下面给出的函数编写 Junit 测试用例：

```
class A{
  int i;
  void set()
  {
    Scanner in=new Scanner(System.in);
    i=in.nextInt();
  }
} 
```

现在我的问题是，当我为它创建一个 Junit 测试用例时，它除了来自用户的输入之外没有：

```
 public void testSet() throws FileNotFoundException {
    System.out.println("set");
    A instance = new A();
    int i=1;
    instance.set(i);
    // TODO review the generated test code and remove the default call to fail.
    //fail("The test case is a prototype.");
} 
```

请建议我应该怎么做才能接受用户的输入。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T19:48:01.907

您可以使用[`System.setIn()`](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#setIn%28java.io.InputStream%29)模拟用户输入：

```
String inputData = "user input data";
System.setIn(new java.io.ByteArrayInputStream(inputData.getBytes())); 
```

现在，如果您调用您的`set()`方法，它将从您的字符串而不是标准输入中读取数据。

# bash - Bash 在脚本中的 Grep/Cut 命令中使用引号

> ID：13212569
> 
> 赞同：3
> 
> 时间：2012-11-03T19:16:16.913
> 
> 标签：bash, grep, cut

我有一条与此类似的线

```
grep -oP "data-context-item-title=.*.data-context-item-id" web.html | cut -d'"' -f2 
```

我知道这条线可以正常工作，因为我在终端上使用了它，它给了我想要的输出。但是，我想将此行放在 bash 脚本中。所以到目前为止我有这个

```
title="$(grep -oP 'data-context-item-title=.*.data-context-item-id' web.html | cut -d'"' -f2)" 
```

这是一个问题，因为它将第一个 "(quotation) 与 cut 的 "(quotation) 匹配。有没有办法避免呢？

没有 cut 功能的输出与此类似

```
data-context-item-title="Some long title" data-context-item-id
data-context-item-title="Another very long title" data-context-item-id 
```

请记住，我不能使用任何 sed 或 awk 命令来替换 cut。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T20:59:33.127

由于您使用的是 bash，因此可以安全地使用：

```
title=$(grep -oP 'data-context-item-title=.*.data-context-item-id' web.html | cut -d'"' -f2) 
```

这将保留变量中的内部间距（特别是换行符），因为您可以看到是否这样做：

```
echo "$title" 
```

我认为，如果您设法找到要使用的 UNIX™ 第 7版^(Bourne)`$(...)` Shell，那么省略符号（或更准确地说，符号）周围的双引号``...``是不安全的，但它似乎确实在现代 shell 上安全工作（比如那些最近一次更新是在当前千年，而不是在前一个）。困难在于找到一个旧的 Bourne Shell 来验证我现在摇摇欲坠（因为遥远）的记忆。

然而，令我困惑的是，`bash`在 Mac OS X 10.7.5 上运行 3.2（系统）和 4.2（自制）时，无论有没有`$(...)`. `bash`您使用的是哪个版本，在哪个平台上使用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T19:20:53.723

cut 中分隔符的参数是双引号而不是单引号。使用反冲来逃避实际报价

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T21:31:35.423

疯狂的建议：您的命令中的一个引号是否可能不是纯 ASCII 引号，而是某种 Unicode 花式引号（shell 无法识别）？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T13:03:33.913

首先，要解决错误，请转义双引号`cut`：

```
title="$(... | cut -d \" ...)" 
```

但是，您使用的是 grep 的 PCRE，因此您可以使用环视和完全删除：

```
title=$(grep -oP '(?<=data-context-item-title=").*?(?=" data-context-item-id)' web.html) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-03T19:31:46.060

不确定这是否是拼写错误，但您似乎忘记了右括号`$(...)`

# java - Java计算器类层次结构问题

> ID：13212572
> 
> 赞同：0
> 
> 时间：2012-11-03T19:16:32.223
> 
> 标签：java

我基本上试图使用类层次结构创建一个计算器 - 基本功能将是：

将String表示转换为Tokens列表将Tokens列表转换为Polish Notation根据Polish Notation计算结果我还需要表示对象-

数字运算符和括号。

在此之后，我需要转换为波兰符号 - 使用调车场算法，然后计算答案。

我可以理解调车场，但不确定类层次结构部分。

优先级是 - 加法和减法的优先级为 2，乘法和除法的优先级为 3。

我假设我需要一个文件阅读器类以及处理不同对象的类。

我还需要帮助来创建自己的堆栈和队列。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T19:20:31.227

不需要“基本上”这个词。这是一个高科技的“嗯”。

我在这里看不到类层次结构。我建议您在没有 UI 的情况下实现所需的功能。只是一个堆栈、操作数和运算符。让它工作，然后担心 UI。几乎不需要面向对象。

只需将模型从视图中分离出来：从文本 UI 开始以获得正确的功能，然后添加 GUI。

# matlab - Matlab“索引超出矩阵维度。”

> ID：13212577
> 
> 赞同：0
> 
> 时间：2012-11-03T19:17:02.503
> 
> 标签：matlab, trading

我不断收到此错误：

> ？？？索引超出矩阵维度。
> 
> ==> example3_6 在 48 个结果中出错=regress(cl1(trainset), cl2(trainset)); % 使用回归函数

GDX 文件包含 7 列和 386 行，GLD 文件包含 7 列和 765 行，但如果我从两者中抽取 250 个样本，这应该不是问题。

有人可以建议这里有什么问题吗？

谢谢

```
clear; % make sure previously defined variables are erased.

[num, txt]=xlsread('GLD'); % read a spreadsheet named "GLD.xls" into MATLAB. 

tday1=txt(2:end, 1); % the first column (starting from the second row) is the trading days in format mm/dd/yyyy.

tday1=datestr(datenum(tday1,'mm/dd/yyyy'), 'yyyymmdd');

tday1=str2double(cellstr(tday1)); % convert the date strings first into cell arrays and then into numeric format.

adjcls1=num(:, end); % the last column contains the adjusted close prices.

[num, txt]=xlsread('GDX'); % read a spreadsheet named "GDX.xls" into MATLAB. 

tday2=txt(2:end, 1); % the first column (starting from the second row) is the trading days in format mm/dd/yyyy.

tday2=datestr(datenum(tday2,'mm/dd/yyyy'), 'yyyymmdd');

tday2=str2double(cellstr(tday2)); % convert the date strings first into cell arrays and then into numeric format.

adjcls2=num(:, end); % the last column contains the adjusted close prices.

[tday, idx1, idx2]=intersect(tday1, tday2); % find the intersection of the two data sets, and sort them in ascending order

cl1=adjcls1(idx1); 

cl2=adjcls2(idx2);  

trainset=1:252; % define indices for training set

testset=trainset(end)+1:length(tday); % define indices for test set

% determines the hedge ratio on the trainset
results=ols(cl1(trainset), cl2(trainset)); % use regression function 
hedgeRatio=results.beta; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T20:26:22.840

您对回归函数的调用似乎存在问题。

根据文档回归：

regress(y,X) 返回一个 p×1 向量 b 的系数估计值，用于对 y 中的响应对 X 中的预测变量进行多线性回归。X 是 n 次观察中每个观测值的 p 个预测变量的 n×p 矩阵. y 是观察到的响应的 n×1 向量。

但由于我们不知道您如何在 ols 函数中使用回归函数，因此很难为您提供帮助。只需对您发送给 regress() 的两个参数运行 size(...) 检查，我相信您会发现 MATLAB 抱怨的原因。

# entity-framework - Defining foreign key constraints with Entity Framework code-first

> ID：13212578
> 
> 赞同：0
> 
> 时间：2012-11-03T19:17:05.730
> 
> 标签：entity-framework

I have following entity class called `Code`. It stores categories of different kinds - the data for which I would have otherwise needed to create many small tables e.g. User Categories, Expense Categories, Address types, User Types, file formats etc.

```
public class Code
{
    public int Id { get; set; }
    public string CodeType { get; set; }
    public string CodeDescription { get; set; }

    public virtual ICollection<Expense> Expenses { get; set; }
    public virtual ICollection<Address> Addresses { get; set; }
                   :
                   : // many more

} 
```

The class `Expense` looks like this:

```
public class Expense
{
    public int Id { get; set; }

    public int CategoryId { get; set; }
    public virtual Code Category { get; set; }

    public int SourceId { get; set; }

    public double Amount { get; set; }
    public DateTime ExpenseDate { get; set; }
} 
```

With the above class definitions, I have established 1:many relation between `Code` and `Expense` using the `CategoryId` mapping.

My problem is, I want to map the `SourceId` field in `Expense` to the `Code` object. Which means, `Expense` object would contain

```
public Code Source { get; set; } 
```

If I use this, at runtime I get an error about cyclic dependencies.

Can someone please help?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T19:37:18.547

You will need to disable cascading delete on at least one of the two relationships (or both). EF enables cascading delete by convention for both relationships because both are *required* since the foreign key properties are not nullable. But SQL Server doesn't accept multiple cascading delete paths onto the same table that are introduced by the two relationships. That's the reason for your exception.

You must override the convention with Fluent API:

```
public class Code
{
    public int Id { get; set; }
    //...
    public virtual ICollection<Expense> Expenses { get; set; }
    //...
}

public class Expense
{
    public int Id { get; set; }

    public int CategoryId { get; set; }
    public virtual Code Category { get; set; }

    public int SourceId { get; set; }
    public virtual Code Source { get; set; }
    //...
} 
```

Mapping with Fluent API;

```
modelBuilder.Entity<Expense>()
    .HasRequired(e => e.Category)
    .WithMany(c => c.Expenses)
    .HasForeignKey(e => e.CategoryId)
    .WillCascadeOnDelete(false);

modelBuilder.Entity<Expense>()
    .HasRequired(e => e.Source)
    .WithMany()
    .HasForeignKey(e => e.SourceId)
    .WillCascadeOnDelete(false); 
```

# forms - Chrome：多次填写相同的表格进行测试

> ID：13212579
> 
> 赞同：27
> 
> 时间：2012-11-03T19:17:11.220
> 
> 标签：forms, google-chrome, testing, browser

是否有某种工具（理想情况下适用于 Chrome），我可以在其中填写我多次设计/测试的长表格？

我应该能够：

1.  填写一次并保存
2.  一键填写保存的表格
3.  以不同的方式填写表格并将其另存为不同的“个人资料”

我在开发过程中手动测试了一些东西，所以我不想要一个完全自动化的解决方案（我使用的是 Symfony2.1，所以我也可以编写功能测试）。我只需要一种快速填写表格的方法，这样我就可以节省一些时间，但我还没有找到一个好的 Chrome 扩展程序或任何可以做的事情。我记得 Firefox 中的 Firebug 有类似的东西（虽然我从未使用过），所以我想存在一些东西。

内置保存的表单似乎对这项任务没有那么有用，但也许我遗漏了一些东西。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-03T19:24:17.363

您可以查看适用于 Chrome 的 iMacros：

[https://chrome.google.com/webstore/detail/imacros-for-chrome/cplklnmnlbnpmjogncfgfijoopmnlemp](https://chrome.google.com/webstore/detail/imacros-for-chrome/cplklnmnlbnpmjogncfgfijoopmnlemp)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-03T19:25:48.620

称其为基本答案，但我相信 Chrome 中的按钮快捷方式接受 Javascript。我已经用 FireFox 做到了这一点，方法如下：

```
javascript:document.formname.fieldname.value='value';document.formname.fieldname2.value='value';document.formname.fieldname3.value='value';return false; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T12:58:59.253

有一些插件。我使用了下面的一个，它可以满足您的要求。此扩展允许您使用虚拟数据填充所有表单输入。

[https://chrome.google.com/webstore/detail/form-filler/bnjjngeaknajbdcgpfkgnonkmififhfo](https://chrome.google.com/webstore/detail/form-filler/bnjjngeaknajbdcgpfkgnonkmififhfo)

这里是用于存储表单数据并在以后重用它。当您想再次填充时，插件会填充稍后保存的数据。

[https://chrome.google.com/webstore/detail/simple-form-filler/hbgbedpagfcecmjmlfpndghfclhnmmll/details](https://chrome.google.com/webstore/detail/simple-form-filler/hbgbedpagfcecmjmlfpndghfclhnmmll/details)

希望这可以帮助

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-16T23:03:40.327

这不是扩展，但我一直发现测试表单的最简单方法是使用一点 jQuery。

我在提交按钮下放了一个链接：

```
<a href="#" id="fill_form">fillform</a> 
```

然后我用 jQuery 填写表格。

```
$('#fill_form').click(function(event) {
    $("#name").val("Phoney Phoneyman");
    $("#phone").val("555 867-5309");
    $("#email").val("phoney@baloney.com");
    $("#password").val("123456");
    $("#password_conf").val("123456");
}); 
```

执行此操作所需的时间与最初填写表格的时间一样长，并且可以节省大量时间。再做一点工作，您就可以生成随机值 - 或列表中的值。

完成后请记住将其全部删除。

谷歌的表单填充器总是不正确，足以创造工作而不是节省时间。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-19T20:05:14.573

我制作了一个完全符合您需求的 chrome 扩展，可能值得一试 - [SimpleFill](https://plugins.compzets.com/simplefill/)。

它非常简单，适用于 Chrome、Opera 和 Firefox。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-27T05:33:03.357

有史以来最好的表单填写扩展是[JunkFill](https://chrome.google.com/webstore/detail/junkfill/cajejbcjfkhgmfbapmhopccephhjedeb?hl=en)。

我喜欢它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-15T15:22:37.347

另一个有用的 chrome 扩展[Formbot](https://chrome.google.com/webstore/detail/formbot/ilnjaomgpkbmapjachcppgabkidbmnjc)。当设置为随机填充输入时，它将用有效数据填充它们。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-04T16:51:14.230

现在有一个用于 Chrome 的 Selenium 扩展。Selenium 是最受欢迎的网络驱动程序之一，我也使用过它，尽管其中有一些古怪的东西，但它通常运行良好：

[https://chrome.google.com/webstore/detail/selenium-ide/mooikfkahbdckldjjndioackbalphokd?hl=en](https://chrome.google.com/webstore/detail/selenium-ide/mooikfkahbdckldjjndioackbalphokd?hl=en)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-05-05T12:07:31.723

您可以查看[Bug Magnet Chrome 扩展程序](https://chrome.google.com/webstore/detail/bug-magnet/efhedldbjahpgjcneebmbolkalbhckfi?hl=en)。

# jquery - Jquery - 正方形褪色并回来

> ID：13212580
> 
> 赞同：1
> 
> 时间：2012-11-03T19:17:13.777
> 
> 标签：jquery

我的一些方块有点问题。它们应该在用户鼠标悬停时消失，然后在鼠标移出时恢复正常的不透明度。问题是当我鼠标移出时它们不会恢复到正常的不透明度。我该如何解决？

```
<div class="test"></div>

$('.test').each(function(){
    $(this).animate({'opacity': '1.0'}, 500);
    $(this).hover(function(){    
        $(this).stop(1).animate({'opacity': '1.0'}, 500);    
    }, function(){    
        $(this).stop(1).animate({'opacity': '0.6'}, 500)     // at the end of animation
    });
}); 
```

我做了一个[JS Bin](http://jsbin.com/ebawad/2)

任何帮助/教程将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T19:20:37.550

你只是混淆了淡入淡出的顺序。

```
$(this).hover(function(){    
    $(this).stop(1).animate({'opacity': '0.6'}, 500)     // hover over        
}, function(){    
    $(this).stop(1).animate({'opacity': '1.0'}, 500);    // hover out
}); 
```

[从文档](http://api.jquery.com/hover/)中查看函数签名

```
hover( handlerIn(eventObject) , handlerOut(eventObject)  ) 
```

第一个函数用于鼠标进入元素，第二个函数用于鼠标离开元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T19:25:52.030

更简单的解决方案

```
$('.test').hover(function() {
    $(this).stop().fadeTo(500, 1);
}, function() {
    $(this).stop().fadeTo(500, 0.6);
});​ 
```

小提琴[http://jsfiddle.net/5R8Y9/](http://jsfiddle.net/5R8Y9/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T19:38:22.937

你在找这样的东西吗？[http://jsfiddle.net/wKApE/](http://jsfiddle.net/wKApE/)

```
$('.test').mouseenter(function(event){
  $(event.target).addClass('active');  
  $('.test').each(function(){
    if(!$(this).hasClass('active'))
    {
      $(this).stop(1).animate({'opacity': '0.6'}, 500); 
    }
  });
});
$('.test').mouseleave(function(event){
  $(event.target).removeClass('active');
  $('.test').each(function(){
  $(this).stop(1).animate({'opacity': '1'}, 500);
  });
});​ 
```

# .net - 使用 Facebook Developer Toolkit 的桌面应用程序中的登录错误

> ID：13212583
> 
> 赞同：1
> 
> 时间：2012-11-03T19:17:31.707
> 
> 标签：.net, desktop-application, facebook-login

[我正在使用来自http://facebooktoolkit.codeplex.com/releases/view/39727](http://facebooktoolkit.codeplex.com/releases/view/39727)的 Facebook Developer Toolkit 开发 .NET 桌面应用程序。一切正常，直到上个月底。登录 Facebook 停止工作。输入凭据并点击登录按钮后，System.Collections.Generic.KeyNotFoundException 在我正在使用的 API 中引发：

```
at System.Collections.Generic.Dictionary`2.get_Item(TKey key)
at Facebook.Session.DesktopSession.CompleteLogin(Dictionary`2 sessionProperties)
at Facebook.Session.DesktopSession.Login()
at Facebook.Winforms.Components.FacebookService.ConnectToFacebook(List`1 permissions) 
```

对我来说，Facebook API 中似乎发生了一些变化，可能在某些 URL 中，其部分被用作字典的键。我很绝望，因为我投入了大量时间来开发那个桌面应用程序。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-11T06:38:02.117

该库现已弃用，不再开发，因此需要找到更好的库。

# javascript - Event when begins playing

> ID：13212592
> 
> 赞同：1
> 
> 时间：2012-11-03T19:19:20.127
> 
> 标签：javascript, html, audio, onload

I want a gif loader image to disappear as soon as an autoplayed audio tag starts playing ie. after it loads. Is there any way to do this with javascript? The audio is a live stream if that matters.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:24:12.660

I think you're looking for the [canplaythrough](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/canplaythrough) event.

```
audio.addEventListener('canplaythrough', function() { 
    audio.play();
    // code that removes your gif loader
}, false); 
```

# php - 如何从PHP中的给定数据生成具有固定长度的唯一数值？

> ID：13212596
> 
> 赞同：0
> 
> 时间：2012-11-03T19:19:43.927
> 
> 标签：php, algorithm

如何从PHP中的给定数据生成具有固定长度的唯一数值？例如，我可以有一个包含数字和字符的字符串，我需要生成长度为 6 的唯一数值。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T19:29:28.097

您将无法使用任何算法从输入中生成唯一的数值。这就是将输入转换为伪随机输出的问题。如果你有一个 20 个字符的输入字符串和一个只有 6 个字符的输出，**就会有重复的结果**，因为：

输入 20 个字符（假设有 58 个字母数字可能性）：

```
58^20 = 1.8559226468222606056912232424512e+35 possibilities 
```

输出 6 个字符（假设有 10 个数字可能性）：

```
10^6 = 1000000 possibilities 
```

因此，总而言之，您**将无法从 string 中生成唯一数字**。您最好的机会是使用像[md5](http://php.net/manual/es/function.md5.php)或[sha1](http://php.net/manual/en/function.sha1.php)这样的散列函数。它们是字母数字的，但您始终可以将它们转换为数字。但是，一旦将它们裁剪为 6 位数，它们被重复的机会就会大大增加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T19:28:58.937

不幸的是，给定一个字符数有限的任意值，不可能生成一个完全唯一的值。有无数个可能的值，而长度为 6 的数值只有 999999 个可能的值。

然而，在 PHP 中，您可以执行以下操作：

```
$list_of_numeric_values = array();

foreach ($list_of_given_values as $value)
{
     if (!in_array($value, $list_of_numeric_values))
         $list_of_numeric_values[] = $value;
} 
```

完成后，数组将为您可以使用的每个可能值提供一个唯一键。

如果您不需要同时计算所有这些，您可以遵循类似的算法，而不是仅使用 PHP“搜索”数组，也许它是 MySQL 表上的一个 SELECT 以查看条目当前是否存在，并使用自动增量的主键来获得你的价值。

# javascript - setTimeout() 不会产生过渡效果

> ID：13212599
> 
> 赞同：0
> 
> 时间：2012-11-03T19:20:10.483
> 
> 标签：javascript

我试图制作一个红色条（使用 div 和红色背景颜色创建），其宽度可以从 0 像素扩展到 200 像素。`window.alert(x.width)`当我在函数中插入 a 时，我的代码可以工作`myF()`，但是当我不放入时，代码不会给我一个过渡。这只是 的问题`setTimeout()`吗？

```
<!DOCTYPE html>
<html>
   <head>
      <script>
         function myF(){
          var x = document.getElementById("bar1").style;
            if(parseInt(x.width)<200){
             x.width = (parseInt(x.width)+1)+"px";
             setTimeout(myF(),1);
            }
         }
      </script>
   </head>
   <body onload="myF()">
      <div id="bar1" style="width:0px; text-align:center; height:10px;background-color:red; font-size:10px; padding:0px; margin:0px;"></div>
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T19:21:37.513

你应该做 ：

```
setTimeout(myF,1); 
```

代替 ：

```
setTimeout(myF(),1); 
```

# c - 在追加/更新模式下是否仍需要调用文件定位功能？

> ID：13212603
> 
> 赞同：3
> 
> 时间：2012-11-03T19:20:36.093
> 
> 标签：c, append, stdio

*以追加更新*模式打开文件后，每次写入文件之前是否需要执行文件定位语句？

```
FILE *h;
int ch;
if ((h = fopen("data", "a+")) == NULL) exit(1);
if (fseek(h, 0 SEEK_SET)) exit(2);
ch = fgetc(h); /* read very first character */
if (ch == EOF) exit(3);

/* redundant? mandatory? */
fseek(h, 0, SEEK_END); /* call file positioning before output */

/* add 1st character to the end of file on a single line*/
fprintf(h, "%c\n", ch); 
```

[C11 标准](http://www.open-std.org/JTC1/sc22/wg14/www/docs/n1570.pdf)说：

> 7.21.5.3/6 ... 对文件的所有后续写入都将被强制到当前的文件结尾 ...

和

> 7.21.5.3/7 ...在没有对文件定位函数的干预调用的情况下，输入不应直接跟随输出...

我认为 7.21.5.3/7 中的**shall**比 7.21.5.3/6 中的描述强。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T20:13:46.073

在可移植 C 中可能不是多余的。虽然底层文件描述符将始终附加（至少在 Unix 上），但`fseek`/`fflush`要求的重点是在写入输出之前摆脱输入缓冲区，以便可以使用相同的缓冲区用于阅读和写作。AFAIK，您甚至不需要寻找文件结尾，只要您寻找，您就可以在*任何地方寻找。*

第二个描述比第一个强，但这是意料之中的。第一个仅声明*所有*写入都转到 EOF，即无法在其他任何地方写入。第二个建立了从读取到写入的切换必须伴随刷新或查找的规则，以确保缓冲区的读取和写入方面不会混淆。

# c# - 通过 SOCKET 发送文件

> ID：13212609
> 
> 赞同：2
> 
> 时间：2012-11-03T19:21:07.073
> 
> 标签：c#, c++, actionscript-3, apache-flex, winapi

我正在创建简单的 Socket 服务器。Flex 应用程序将成为此服务器的客户端。根据特殊要求，我需要通过套接字将图像文件（jpeg）从服务器传输到客户端。

为了测试目的，我已经在 C# 上编写了服务器 - 它适用于我的 flex 应用程序。

发送图像的 C# 代码：

```
private void sendImage(Socket client)
        {
            Bitmap data = new Bitmap("assets/sphere.jpg");
            Image img = data;
            MemoryStream ms = new MemoryStream();
            img.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);
            byte[] buffer = ms.ToArray();
            sendInt(client, buffer.Length);
            client.Send(buffer);
            Console.WriteLine("Image sent");
        } 
```

发送相同图像的 C++ 代码：

```
void SocketServer::sendFile(SOCKET &client, std::string filename)
{
    std::ifstream file (filename, std::ios::ate);
    if (file.is_open())
    {
        std::ifstream::pos_type size = file.tellg();
        char * memblock = new char [size];
        file.seekg (0, std::ios::beg);
        file.read (memblock, size);
        file.close();
        sendInt(client, size);
        send(client, memblock, size, 0);
        delete[] memblock;
    }
} 
```

`send`方法返回正确的图像大小作为发送值。

由于某种原因，我无法在 Windows 8 上的 Adob​​e Flash Builder 4.6 中进行调试，因此我创建了输出小部件，我可以在其中将传输结果作为字符串查看

C# 传输结果： ![在此处输入图像描述](../Images/785331beb3b9396da685013406a84563.png)

C++ 传输结果： ![在此处输入图像描述](../Images/f6db12b092c0f76a383b2428e4f679aa.png)

如您所见，500 个左右的第一个字符是相同的。C++ 的其余部分是那些“i”符号。奇怪的是，如果我使用以下代码将文件读入字符串，例如：

```
std::ifstream ifs("sphere.jpg");
std::string str((std::istreambuf_iterator<char>(ifs)), std::istreambuf_iterator<char>()); 
```

我的字符串将是 ~500 个字符而不是 124Kbytes（~124k 字符，图像文件大小）。

这是 C++ 图像结果： ![在此处输入图像描述](../Images/8065b753fc844961e6c6a28d59d1bb00.png)

所以我真的不知道为什么socket传输只有很小的一部分`jpeg`正确而其余的都是错误的？正如我所提到的 - 如果我将字节数组从 C# 传输到 Flex 没有问题，所以我假设 Flex 端一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T20:19:44.320

这可能是因为您没有明确地以二进制模式打开文件。尝试使用：

```
std::ifstream file (filename, std::ios::ate | std::ios::binary); 
```

# android - 如何在 Monodroid 中的活动之间制作从左到右的滑动动画过渡？

> ID：13212610
> 
> 赞同：2
> 
> 时间：2012-11-03T19:21:19.770
> 
> 标签：android, xamarin.android, android-animation

我正在使用 Monodroid 进行开发，并希望能够在我这样做时向左或向右滑动并加载新的活动。我还想要一个动画，显示下一个活动滑入屏幕，而另一个滑出。

我尝试过使用 XML 资源文件以及实现动画的 OverridePendingTransition。然而，这些都不适合我。有没有人在这方面取得成功？你能把你的代码放在这里而不是某个博客或网站的链接吗？

在我所有的活动中将它放在 OnCreate 中不起作用：

```
this.OverridePendingTransition(Resource.Animation.slide_in_right, Resource.Animation.slide_out_left); 
```

XML 代码：

向右滑动：

```
<set xmlns:android="http://schemas.android.com/apk/res/android" android:shareInterpolator="false" >
<translate
    android:duration="200"
    android:fromXDelta="100%"
    android:fromYDelta="0%"
    android:toXDelta="0%"
    android:toYDelta="0%" />
</set> 
```

向左滑出：

```
<set xmlns:android="http://schemas.android.com/apk/res/android" android:shareInterpolator="false" >
<translate
    android:duration="200"
    android:fromXDelta="100%"
    android:fromYDelta="0%"
    android:toXDelta="0%"
    android:toYDelta="0%" />
</set> 
```

我还没有找到任何简单的代码来检测向左或向右滑动的手势。理想情况下，我希望能够拥有两个功能：

```
OnSwipeLeft()

OnSwipeRight() 
```

然后我希望代码是一个简单的动画（当然我知道我需要更多地使用这些函数：

```
AnimateSlideLeft();

AnimateSlideRight(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T23:36:04.770

我的手机似乎没有启用动画，我必须转到我的 Android 手机上的设置并启用动画。一旦我这样做了，动画就起作用了。为此，请单击 Android 设置按钮（在我的手机左下方）。点击“设置”框。然后点击“显示”。然后点击“动画”。然后点击“所有动画”。一旦我这样做了，一切都奏效了。

# c++ - 将 lambda 分配给 std::function

> ID：13212617
> 
> 赞同：8
> 
> 时间：2012-11-03T19:21:40.323
> 
> 标签：c++, lambda, c++11, implicit-conversion, std-function

当推断的返回类型为 std::nullptr_t 时，为什么允许第二次赋值？对于函数指针，这是禁止的。

为什么第二个 lambda 不运行？

```
#include <cstdio>
#include <functional>

int main()
{
    std::function<void* ()> f;

    f = []() -> void* {
        printf ("runs\n");
        return nullptr;
    };
    f();

    f = []() {
        printf ("doesn't run\n");
        return nullptr; // -> std::nullptr_t
    };
    f();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-03T19:26:51.007

`std::function`允许您存储任何内容，只要您提供的签名符合以下条件：

*   所有参数类型都可以隐式转换为存储的可调用实体的参数类型，并且
*   存储的可调用实体的返回类型可隐式转换为签名的返回类型

`std::nullptr_t`可隐式转换为任何指针类型并产生该指针类型的空指针值。

请注意，您的代码实际上不是有效的 C++11，因为您不仅`return expr;`在第二个 lambda 中有 a，因此不会发生返回类型推导。GCC（和 Clang，IIRC）将此作为扩展实现，因为它会在某个时候成为标准的一部分。

# r - 使用 xts 对象回归，使用 R 确定斜率系数的 t 统计量

> ID：13212619
> 
> 赞同：0
> 
> 时间：2012-11-03T19:21:41.107
> 
> 标签：r, time-series, regression, xts, zoo

我昨天发布了这个问题，但收到了一些有价值的反馈，我的帖子还有一些不足之处:)。这是一个更新的尝试，希望更清晰：

我有一个 xts 动物园对象，想使用 R 确定过去 20 个周期内斜率系数的 t 统计量，然后测试该 t 值是否 > 2。

```
class(prices)

[1] "xts" "zoo"

tail(prices)
             IWM    SPY    TLT
2012-10-24 81.20 141.02 121.48
2012-10-25 81.53 141.43 120.86
2012-10-26 81.14 141.35 122.64
2012-10-31 81.63 141.35 123.36
2012-11-01 82.49 142.83 122.35
2012-11-02 81.19 141.56 122.26 
```

我无法弄清楚如何对每列与时间进行回归，因此我使用索引创建了一个新列（天数）并执行了与索引的回归：

```
lastprices = last(prices,20)
prices.data.frame = as.data.frame(lastprices)
daynumber = index(prices.data.frame)
pdfd = data.frame(prices.data.frame, daynumber)
pdfd.lm = lm(pdfd$daynumber ~ ., data=pdfd)
tstat = coef(summary(pdfd.lm))
tstat[,"t value"]
(Intercept)         IWM         SPY         TLT 
  4.5426630  -0.1788975  -1.3521969  -2.2362345 
tstattest = ifelse(tstat[,"t value"]>2,1,0)
tstattest
(Intercept)         IWM         SPY         TLT 
          1           0           0           0 
```

我不禁认为这不是完成这项任务的最有效方式。有没有人知道如何在不创建 daynumber 列的情况下对每列与时间进行回归？

谢谢 - 放轻松，我刚开始学习！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:46:19.033

我认为你原来的问题已经取得了有益的进展。我认为来自未命名包的输出格式实际上是 lm 的输出，其中公式的 hte LHS 上有多个列。我对你的第二个版本所做的是：

```
require(zoo)
require(xts)
prices <- read.zoo(text="dt           IWM    SPY    TLT
 2012-10-24 81.20 141.02 121.48
 2012-10-25 81.53 141.43 120.86
 2012-10-26 81.14 141.35 122.64
 2012-10-31 81.63 141.35 123.36
 2012-11-01 82.49 142.83 122.35
 2012-11-02 81.19 141.56 122.26", index=1, header=TRUE, FUN=as.Date, format="%Y-%m-%d")
 prices <- as.xts(prices)
dprice <- as.data.frame(prices)
dprice$dat <- 1:6

lm( cbind(IWM,SPY , TLT) ~dat , data=dprice)
#-------------
Call:
lm(formula = cbind(IWM, SPY, TLT) ~ dat, data = dprice)

Coefficients:
             IWM        SPY        TLT      
(Intercept)   81.19800  140.90000  121.24933
dat            0.09486    0.19714    0.25971 
```

请注意，该输出中没有 t 值。summary.lm 函数将创建这些：

```
tstat = coef(summary(fit))
tstat
#--------------
Response IWM :
               Estimate Std. Error     t value     Pr(>|t|)
(Intercept) 81.19800000  0.4993259 162.6152292 8.578215e-09
dat          0.09485714  0.1282151   0.7398284 5.004726e-01

Response SPY :
               Estimate Std. Error    t value     Pr(>|t|)
(Intercept) 140.9000000  0.5356109 263.064096 1.252746e-09
dat           0.1971429  0.1375322   1.433431 2.250283e-01

Response TLT :
               Estimate Std. Error   t value     Pr(>|t|)
(Intercept) 121.2493333  0.7632198 158.86556 9.417108e-09
dat           0.2597143  0.1959767   1.32523 2.557232e-01 
```

要从三个矩阵的列表中提取 t 值，您可以使用 lapply：

```
lapply( coef(summary(fit)), "[" , ,"t value")
#----------
$`Response IWM`
(Intercept)         dat 
162.6152292   0.7398284 

$`Response SPY`
(Intercept)         dat 
 263.064096    1.433431 

$`Response TLT`
(Intercept)         dat 
  158.86556     1.3252 
```

要获得拦截，您可以使用以下命令：

```
 lapply( coef(summary(fit)), "[" , "(Intercept)","t value")
#-----
$`Response IWM`
[1] 162.6152

$`Response SPY`
[1] 263.0641

$`Response TLT`
[1] 158.8656 
```

请注意，Intercept 值在这种情况下几乎没有意义。如果你使用数字 1:6，你会得到一个截距，如果你使用 Dates-classes 值，你会得到一个完全不同的值。t 检验是关于截距是否为零，并且由于比例相当随意，除非您非常确定编码以及零值意味着什么，否则它没有解释。

# multithreading - QThread 在调用 isRunning 时挂断

> ID：13212623
> 
> 赞同：0
> 
> 时间：2012-11-03T19:22:03.373
> 
> 标签：multithreading, qt, qt4, qthread

我有一个`QThread`从网络上获取数据的。有时用户要求其他东西，并且数据也需要被获取更改。

在我当前的配置中，我调用`terminate()`线程，更改输入数据，然后`start()`再次调用线程。`isRunning()`现在，这很好用，但有时我在调用或`isFinished()`终止线程时会卡住主事件循环。它永远卡住了，直到我终止进程才恢复。

1.  为什么会`isRunning()`或`isFinished()`挂在首位？他们不应该阻止。
2.  这个工作流程可以接受吗？如果没有，当我不再需要它时如何停止线程的进程（或者我如何放弃它）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:51:47.837

不要使用`terminate()`，阅读[文档](http://qt-project.org/doc/qt-4.8/qthread.html#terminate)中的警告。

虽然可以重新启动 a `QThread`，但重新启动线程通常不是一个好主意，但应该有更好的解决方案来做你想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:52:09.640

似乎在某些情况下，线程在终止后变得不可用，`isRunning()`并且`isFinished()`可能会挂起调用线程，即使仅在`TERMINATED`信号之后调用也是如此。

我的解决方法是终止一个线程，忘记它并启动一个新线程。

# header - 如何为网站创建粘性标题栏

> ID：13212624
> 
> 赞同：8
> 
> 时间：2012-11-03T19:22:22.840
> 
> 标签：header, sticky

我想为网站创建一个粘性标题栏，就像本网站 (http://www.fizzysoftware.com/) 上的粘性标题一样，如果有任何可以帮助我编写代码或帮助我创建的任何资源相同的。你的回复对我很有帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-03T19:32:16.693

在您的 CSS 中，添加

```
position: fixed; 
```

到您的标题元素。就是这么简单，真的。下次，尝试右键单击您在网站上看到的内容，然后选择“检查元素”。我认为现在每个现代浏览器都有它。很实用的功能。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-01-10T20:26:31.553

如果你想让它在向下滚动到某个点时变得粘稠，那么你可以使用这个功能：

```
$window = $(window);
$window.scroll(function() {
  $scroll_position = $window.scrollTop();
    if ($scroll_position > 300) { // if body is scrolled down by 300 pixels
        $('.your-header').addClass('sticky');

        // to get rid of jerk
        header_height = $('.your-header').innerHeight();
        $('body').css('padding-top' , header_height);
    } else {
        $('body').css('padding-top' , '0');
        $('.your-header').removeClass('sticky');
    }
 }); 
```

和粘性类：

```
.sticky {
  position: fixed;
  z-index: 9999;
  width: 100%;
} 
```

你可以使用这个插件，它有一些有用的选项

[jQuery 粘性标题](http://plugins.imdanishiqbal.com/sticky-header)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-03T22:41:08.750

CSS 已经给你答案了。试试这个

```
.sticky {
  position: -webkit-sticky;
  position: sticky;
  top: 0;
} 
```

现在将粘性类添加到任何菜单侧边栏或任何你想粘在顶部的东西，它会自动计算边距并粘在顶部。干杯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-17T15:07:53.380

如果您希望在 HTML 和 CSS 选项中简单地创建一个 Stiky NavBar，您可以使用以下内容：只需创建一个像这样的导航栏：

```
<nav class="zone blue sticky">
      <ul class="main-nav">
          <li><a href="">About</a></li>
          <li><a href="">Products</a></li>
          <li><a href="">Our Team</a></li>
          <li class="push"><a href="">Contact</a></li>
  </ul>
  </nav> 
```

请记住在这种情况下添加类，我创建了一个区域（将我的 HTML 分隔在我希望应用我的 CSS 的特定区域）蓝色（只是导航的一种颜色）和粘性，它将携带我们的粘性功能。您可以处理要添加的其他属性，这取决于您。在 CSS 上添加以下内容以创建粘性；首先，我将从区域标签开始

```
.zone {
    /*padding:30px 50px;*/
    cursor:pointer;
    color:#FFF;
    font-size:2em;
    border-radius:4px;
    border:1px solid #bbb;
    transition: all 0.3s linear;
} 
```

现在带有粘性标签

```
.sticky {
  position: fixed;
  top: 0;
  width: 100%;
} 
```

位置固定意味着它将始终处于同一位置；并且使用 top 0 我将始终位于顶部和 100% 的宽度，因此它覆盖了整个屏幕。现在让我们的导航栏变成蓝色

```
.blue {
    background: #7abcff; 
```

您可以使用此示例创建您自己的粘性导航栏，并使用 CSS 属性来根据自己的喜好对其进行自定义。

# typescript - TypeScript 函数重载

> ID：13212625
> 
> 赞同：334
> 
> 时间：2012-11-03T19:22:23.937
> 
> 标签：typescript, overloading

TypeScript 语言规范的第 6.3 节讨论了函数重载，并给出了如何实现这一点的具体示例。但是，如果我尝试这样的事情：

```
export class LayerFactory { 

    constructor (public styleFactory: Symbology.StyleFactory) { }

    createFeatureLayer (userContext : Model.UserContext, mapWrapperObj : MapWrapperBase) : any {           
         throw "not implemented";
    }                 

    createFeatureLayer(layerName : string, style : any) : any {
        throw "not implemented";
     }        

} 
```

即使函数参数的类型不同，我也会收到指示重复标识符的编译器错误。即使我向第二个 createFeatureLayer 函数添加了一个附加参数，我仍然会收到编译器错误。想法，请。

* * *

## 回答 #1

> 赞同：282
> 
> 时间：2012-11-03T19:50:31.303

当你在 TypeScript 中重载时，你只有一个具有多个签名的实现。

```
class Foo {
    myMethod(a: string);
    myMethod(a: number);
    myMethod(a: number, b: string);
    myMethod(a: any, b?: string) {
        alert(a.toString());
    }
} 
```

TypeScript 仅将这三个重载识别为方法调用的可能签名，而不是实际的实现。

在您的情况下，我个人会使用两种名称不同的方法，因为参数中没有足够的通用性，这使得方法主体可能需要有很多“ifs”来决定要做什么。

# 打字稿 1.4

从 TypeScript 1.4 开始，您通常可以使用联合类型消除对重载的需求。上面的例子可以更好地表达为：

```
myMethod(a: string | number, b?: string) {
    alert(a.toString());
} 
```

的类型`a`是“要么`string`或`number`”。

* * *

## 回答 #2

> 赞同：238
> 
> 时间：2012-11-03T19:49:29.897

这可能是因为当两个函数都编译为 JavaScript 时，它们的签名完全相同。由于 JavaScript 没有类型，我们最终创建了两个接受相同数量参数的函数。因此，TypeScript 限制我们创建此类函数。

TypeScript 支持基于参数数量的重载，但是如果我们与 OO 语言相比，要遵循的步骤会有些不同。在回答另一个 SO 问题时，有人用一个很好的例子来解释它：[方法重载？](https://stackoverflow.com/questions/12688275/method-overloading/12689054#12689054).

基本上，我们所做的是，我们只创建一个函数和许多声明，以便 TypeScript 不会产生编译错误。当这段代码被编译成 JavaScript 时，单独的具体函数将是可见的。由于可以通过传递多个参数来调用 JavaScript 函数，因此它可以正常工作。

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2014-06-14T16:49:11.577

您可以通过将函数声明为具有多个调用签名的类型来*声明重载函数：*

```
interface IFoo
{
    bar: {
        (s: string): number;
        (n: number): string;
    }
} 
```

然后是以下内容：

```
var foo1: IFoo = ...;

var n: number = foo1.bar('baz');     // OK
var s: string = foo1.bar(123);       // OK
var a: number[] = foo1.bar([1,2,3]); // ERROR 
```

函数的实际*定义*必须是单数的，并且在内部对其参数执行适当的调度。

例如，使用一个类（可以实现`IFoo`，但不是必须）：

```
class Foo
{
    public bar(s: string): number;
    public bar(n: number): string;
    public bar(arg: any): any 
    {
        if (typeof(arg) === 'number')
            return arg.toString();
        if (typeof(arg) === 'string')
            return arg.length;
    }
} 
```

这里有趣的是`any`表单被更具体的类型覆盖*隐藏了。*

```
var foo2: new Foo();

var n: number = foo2.bar('baz');     // OK
var s: string = foo2.bar(123);       // OK
var a: number[] = foo2.bar([1,2,3]); // ERROR 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2020-03-07T18:34:42.827

## 打字稿中的函数重载：

根据维基百科（和许多编程书籍），方法/函数重载的定义如下：

> **在某些编程语言中，函数重载或方法重载是创建具有不同实现**的多个同名函数的能力。对重载函数的调用将运行适合于调用上下文的该函数的特定实现，允许一个函数调用根据上下文执行不同的任务。

在打字稿中，我们不能根据参数的数量和类型来调用同一函数的不同实现。这是因为 TS 编译为 JS 时，JS 中的函数具有以下特点：

*   JavaScript 函数定义不为其参数指定数据类型
*   JavaScript 函数在调用时不检查参数的数量

因此，严格意义上来说，TS 函数重载是不存在的。但是，您可以在 TS 代码中做一些可以完美模仿函数重载的事情。

这是一个例子：

```
function add(a: number, b: number, c: number): number;
function add(a: number, b: number): any;
function add(a: string, b: string): any;

function add(a: any, b: any, c?: any): any {
  if (c) {
    return a + c;
  }
  if (typeof a === 'string') {
    return `a is ${a}, b is ${b}`;
  } else {
    return a + b;
  }
} 
```

TS 文档将此方法称为重载，我们基本上所做的是向 TS 编译器提供多个方法签名（可能的参数和类型的描述）。现在 TS 可以判断我们在编译期间是否正确调用了函数，如果调用不正确，则会给我们一个错误。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2020-05-10T11:34:32.177

### 通常什么是函数重载？

> 函数重载或方法重载是创建具有**不同实现的多个****同名****函数**的能力（[维基百科](https://en.wikipedia.org/wiki/Function_overloading)）

 ***** * *

### 什么是 JS 中的函数重载？

此功能在 JS 中是不可能的 - 最后定义的函数在多个声明的情况下被采用：

```
function foo(a1, a2) { return `${a1}, ${a2}` }
function foo(a1) { return `${a1}` } // replaces above `foo` declaration
foo(42, "foo") // "42" 
```

### ......在TS中？

[重载](https://www.typescriptlang.org/docs/handbook/functions.html#overloads)是一种*编译时*构造，对 JS 运行时没有影响：

```
function foo(s: string): string // overload #1 of foo
function foo(s: string, n: number): number // overload #2 of foo
function foo(s: string, n?: number): string | number {/* ... */} // foo implementation 
```

如果您使用上述代码（比 JS 更安全），则会触发重复的实现错误。TS 以自上而下的顺序选择第一个拟合重载，因此重载从最具体到最广泛排序。

* * *

### TS 中的方法重载：一个更复杂的例子

重载的类方法类型可以以与函数重载类似的方式使用：

```
class LayerFactory {
    createFeatureLayer(a1: string, a2: number): string
    createFeatureLayer(a1: number, a2: boolean, a3: string): number
    createFeatureLayer(a1: string | number, a2: number | boolean, a3?: string)
        : number | string { /*... your implementation*/ }
}

const fact = new LayerFactory()
fact.createFeatureLayer("foo", 42) // string
fact.createFeatureLayer(3, true, "bar") // number 
```

由于函数实现与所有重载签名兼容 - 由编译器强制执行，因此可能存在截然不同的重载。

更多信息：

*   [游乐场样本](https://www.typescriptlang.org/play?#code/MYGwhgzhAEAyYE8CmAnAYmYAXA9ih0A3gFDRnTApJhZJrVYCuV8yKAFGAIwBc0EWFAEsAdgHMANNDAAmPiMYBbAEaoAlHwHDxpcpQZ0GzJK1Sde0BStRTZfZThwhqI2wGZNg0WI2WlqlF0yfRpDGmNTDm5PbTFoAB8-axRbOSSAhOgHJxd3AH4Y7zUg8jJ5f1RMrW8iEtKqJhQRIgBfaRgwEQIAem7oADpB6AQcZmghRQAHZ0UkESwaIRwREpbiNeJgZYFoADNMLGgAXkskAHc4RFQMbDwEdmL97H6Q2npwliuOACJdx2+pAAWGRqaC9fheHRPLAvKihd6NExfdhuKSCRhIKTfZRgFDfUHgqwBIA)
*   [重载的注意事项](https://www.typescriptlang.org/docs/handbook/declaration-files/do-s-and-don-ts.html#overloads-and-callbacks)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-03T14:57:18.653

作为对其他人的提醒，我观察到至少正如 WebPack 为 Angular 2 编译的 TypeScript 所表明的那样，你悄悄地得到 overWRITTEN 而不是 overLOADED 方法。

```
myComponent {
  method(): { console.info("no args"); },
  method(arg): { console.info("with arg"); }
} 
```

来电：

```
myComponent.method() 
```

似乎使用参数执行该方法，默默地忽略无参数版本，输出：

```
with arg 
```****

# javascript - 基于瓷砖的游戏的碰撞检测。- 当有多个瓷砖时发生碰撞

> ID：13212627
> 
> 赞同：1
> 
> 时间：2012-11-03T19:22:38.833
> 
> 标签：javascript, html, canvas, html5-canvas, collision-detection

我一直在寻找这个很多很多次的答案，但我没有找到任何东西。

我正在尝试在基于图块的游戏中进行碰撞检测。该图块的宽度和高度为 32px，这就是我创建地图的方式：

```
function map(){
    var tileset = new Image();
    tileset.src = "images/tileset.png";
    var mapIndexOffset = -1;
    var rows = 16;
    var col = 24;
    var tileMap = [

     [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ,[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ,[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ,[1,1,1,1,1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ,[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ,[1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ,[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ,[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ,[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ,[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ,[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ,[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ,[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ,[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ,[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ,[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]

    ];

    for(mapRows = 0; mapRows < rows; mapRows++){
        for(mapCol = 0; mapCol < col; mapCol++){
            var tileId = tileMap[mapRows][mapCol]+mapIndexOffset;
            var sourceX = tileId * 32;
            var sourceY = 0;
            var tileW = 32;
            var tileH = 32;
            var tileX = mapCol * 32;
            var tileY = mapRows * 32;

            ctx.drawImage(tileset, sourceX, sourceY, tileW, tileH, tileX, tileY, tileW, tileH);

        }
    }
} 
```

然后我做了类似的事情（在这个for循环内）：

```
if(tileId == 1){//1 is actually 2
    //collision detection here...
} 
```

因此，当**tileId**为 1（**tileMap**数组中的 2）时，就会发生碰撞。它有效，但只有当地图上有一个瓦片时，当有更多时，碰撞仅适用于最后一个瓦片。

玩家每 3 个像素移动一次，而不是像许多基于图块的游戏那样移动 32 个像素。

这是我的碰撞检测代码：

```
var leftCollision   = o1x + o1w == o2x && o1y + o1h >= o2y && o1y <= o2y + o2h;
var topCollision    = o1y + o1h == o2y && o1x + o1w >= o2x && o1x <= o2x + o2w;
var rightCollision  = o1x == o2x + o2w && o1y + o1h >= o2y && o1y <= o2y + o2h;
var bottomCollision = o1y == o2y + o2h && o1x + o1w >= o2x && o1x <= o2x + o2w;

if(leftCollision){
    //left collision is true
}else if(rightCollision){
    //right collision is true
}else if(topCollision){
    //top collision is true
}else if(bottomCollision){
    //bottom collision is true
} 
```

*   **o1**是玩家。

*   **o2**是瓷砖。

播放器的宽度为 32 像素，高度为 48 像素。

# java - 等效于 NOLINT 的 java checkstyle

> ID：13212629
> 
> 赞同：1
> 
> 时间：2012-11-03T19:22:46.670
> 
> 标签：java, c++, coding-style, checkstyle

在带有 cpplint.py 的 C++ 中，您可以通过以下`// NOLINT`短语将样式检查器静音：

```
// Some C++ code that conflicts the styleguidelines:
void funtionWithNonConstReferenceArgument(int& A);  // NOLINT 
```

然后样式检查器将忽略这一行。Java的checkstyle是否有等价物？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:56:31.570

是的。好吧，它并不完全等价，因为它是围绕代码的两条注释。

```
//CHECKSTYLE:OFF
/* your unstylish code */
//CHECKSTYLE:ON 
```

# jquery - $.getJSON 从不触发成功函数

> ID：13212630
> 
> 赞同：4
> 
> 时间：2012-11-03T19:22:52.513
> 
> 标签：jquery, json

我正在使用 $.getJSON 调用 url 并在[http://jsfiddle.net/9Desk/获取 JSON 数据](http://jsfiddle.net/9Desk/)

虽然检索到 JSON [http://i.imgur.com/Smpgu.png](http://i.imgur.com/Smpgu.png)，但我无法执行成功功能。

```
$(function () {
    $.getJSON(url)
    .success(function (data) {
        alert(data);
        var listItems = ""; 
    });
});​ 
```

谁能告诉我哪里出错了，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T19:28:59.373

您需要将请求视为`jsonp`而不是 plain `json`。为此，只需将回调定义为`callback=?`而不是`callback=listPlaces`. 从[文档](http://api.jquery.com/jQuery.getJSON/)中：

> 如果 URL 包含字符串“ **callback=?** ”（或类似的，由服务器端 API 定义），则请求被视为 JSONP。有关详细信息，请参阅 $.ajax() 中对 jsonp 数据类型的讨论。

**[演示](http://jsfiddle.net/9Desk/1/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T19:26:15.713

从[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)，这是 getJSON 的正确格式：

```
jQuery.getJSON( url [, data] [, success(data, textStatus, jqXHR)] ) 
```

url：包含请求发送到的 URL 的字符串。

数据：与请求一起发送到服务器的映射或字符串。

success(data, textStatus, jqXHR)：请求成功时执行的回调函数。

# android - Android onKeyLongPress

> ID：13212631
> 
> 赞同：1
> 
> 时间：2012-11-03T19:22:59.083
> 
> 标签：android, volume

我正在开发一个 android 音乐播放器，并想使用长按音量键跳过曲目。我找到了一些实现，但它们都没有像我想要的那样工作。我想在长按时跳过歌曲并在短按时更改音量（正常行为）。在所有教程/答案中，他们处理长按，`onKeyDown`但`onKeyLongPress`短按/正常按仅登录`onKeyUp`。

```
@Override
public boolean onKeyLongPress(int keyCode, KeyEvent event) {
    Log.d(TAG, "long pressed");
    switch(keyCode){
    case KeyEvent.KEYCODE_VOLUME_UP:
        songNumber++;
        playSong(songs.get(songNumber));
        return true;
    case KeyEvent.KEYCODE_VOLUME_DOWN:
        songNumber--;
        playSong(songs.get(songNumber));
        return true;
    }
    return super.onKeyLongPress(keyCode, event);
}
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    switch(keyCode){
    case KeyEvent.KEYCODE_VOLUME_UP:
        event.startTracking();
        return true;
    case KeyEvent.KEYCODE_VOLUME_DOWN:
        event.startTracking();
        return true;
    }
    return super.onKeyDown(keyCode, event);
}
@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
    switch(keyCode){
    case KeyEvent.KEYCODE_VOLUME_UP:
        return true;
    case KeyEvent.KEYCODE_VOLUME_DOWN:
        return true;
    }
    return super.onKeyUp(keyCode, event);
} 
```

这是我的代码，但我只能跳过歌曲，短按无效。所以我只有一个音量级别:(

我不知道现在该尝试什么。帮助表示赞赏。谢谢！

-v1r0x

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:17:32.903

好的，我找到了解决方案。不是最好的，但它有效。 仍然是一样的，但`OnKeyDown`现在是这样的：`OnKeyLongPress``OnKeyUp`

```
@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
    if(!event.isCanceled()){
        switch(keyCode){
        case KeyEvent.KEYCODE_VOLUME_UP:
            audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_RAISE, AudioManager.FLAG_SHOW_UI);
            break;
        case KeyEvent.KEYCODE_VOLUME_DOWN:
            audioManager.adjustStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.ADJUST_LOWER, AudioManager.FLAG_SHOW_UI);
            break;
        }
    }
    return super.onKeyUp(keyCode, event);
} 
```

# regex - 如何将字符串与可以转义的正则表达式匹配？

> ID：13212635
> 
> 赞同：1
> 
> 时间：2012-11-03T19:23:06.413
> 
> 标签：regex

> **可能重复：**
> [如何将带引号的字符串与其中的转义引号匹配？](https://stackoverflow.com/questions/1352693/how-to-match-a-quoted-string-with-escaped-quotes-in-it)

我正在构建一个解析器，我需要一个匹配字符串的方法：字符串以`"`. 直到 second 的所有`"`内容，即未被转义的，都应该匹配。转义意味着在它之前有奇数的反斜杠（例如`\"`or `\\\"`）。

一些例子，前面的部分`=>`是输入，另一部分是方法应该提取的内容：

```
"Hello World" => "Hello World"
"Hello" World => "Hello"
"Hello \"World" => "Hello \" World"
"Hello \\" World => "Hello \\" 
```

*我猜在大多数编程语言中，反斜杠需要被转义才能在字符串中有一个实际的反斜杠。这意味着需要两个反斜杠才能在字符串中获得一个真正的反斜杠。上面的例子忽略了这一点。*

我想出了这个正则表达式（我正在使用 Ruby）：

```
/
  "
  (?:
    (?:\\{2})* # an even amount of backslashes
    \\ # followed by a single backslash: odd amount of backslashes
    "
    |
    [^"]
  )*
  "
/x 
```

但是，它不能与第三个示例字符串或任何具有反斜杠转义的字符串一起正常工作`"`。我注意到，当我删除`*`倒数第三行中的然后转义`"`作品时，它在示例 4 中无法正常工作。

我花了很长时间试图修复这个正则表达式，但我不知道怎么做。我知道这个问题可能有点让人不知所措，所以如果您需要更多信息，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:27:05.957

试试这个：

```
"(\\[\\"]|[^\\"])*" 
```

Rubular 演示：[http ://rubular.com/r/Ql9RQ4pex6](http://rubular.com/r/Ql9RQ4pex6)

快速分解：

```
"            # a quote
(            # start group 1
  \\[\\"]    #   an escaped quote or backslash
  |          #   OR
  [^\\"]     #   any char except a quote or backslash
)*           # end group 1 and repeat it zero or more times
"            # a quote 
```

# javascript - 为什么在函数中使用这个声明一个全局变量？

> ID：13212636
> 
> 赞同：1
> 
> 时间：2012-11-03T19:23:28.997
> 
> 标签：javascript, oop

我有这个代码：

```
function boo() {
    this.is_global = "Yes!";
} 
```

当我运行时`boo();`，我有`is_global`对象`window`，我的意思是`is_global`进入全局上下文。
我预计`is_global`只有`boo`功能。

这是正常行为吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T19:24:37.950

是的，这是正常行为。如果您的函数是全局定义的，那么`this`is just`window`并且添加的任何内容`window`都是全局的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T19:25:08.983

`this`指窗户。如果要引用该函数，请使用：

```
arguments.callee.is_global = "Yes!"; 
```

现在：

```
window.is_global; //undefined
boo.is_global; //"Yes!" 
```

另一种方法是在向 boo 添加属性时简单地通过其自己的名称引用 boo。

```
function boo() {
    boo.is_global = "Yes!";
} 
```

请注意，这会修改原始`boo`函数对象。如果您希望修改所有将其用作构造函数的结果*实例，请在此处查看其他答案。*`boo`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T19:26:28.517

要`this`成为“被调用的函数”，您必须将该函数作为对象构造函数调用（使用`new`）。

```
var foo = new boo(); 
```

这将创建一个具有属性的*实例*。这不会在构造函数本身上创建属性。[查看演示](http://jsbin.com/usevik/1/edit)。`boo``is_global`

如果您不使用`new`（或诸如 之类的方法`apply`），`this`则为“调用函数的对象”。由于在这种情况下没有对象，因此使用默认对象。在 Web 浏览器的上下文中，默认对象是`window`. 所以：

```
var foo = boo(); 
```

是相同的

```
var foo = window.boo(); 
```

并且`this`在`window`里面`boo`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T19:27:14.230

查看[MDN 对`this`关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)的介绍。

我猜你想声明一个局部变量，所以使用一个[`var`语句](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var)。

# java - 如何通过带有dll的javaw.exe启动jar

> ID：13212637
> 
> 赞同：0
> 
> 时间：2012-11-03T19:23:39.873
> 
> 标签：java, dll, launch4j, javaw

感谢阅读。

首先，对不起我的英语。你会伤心的......

我尝试执行 jar。

java.exe 是包装系统 dll 文件。所以它可以使用本机库。

但 javaw.exe 不是包装系统 dll 或路径..

'java -jar somejar.jar' 工作正常。

但是，“javaw -jar somejar.jar”不适用于 dll 库。

我必须使用 javaw.exe。

因为 java.exe 在控制台窗口上执行。

我不想弹出控制台窗口。我只想执行我的 jar。

如何使用javaw.exe？还是java.exe？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T20:19:20.110

我看到有一个[选项](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/java.html)可以使用 javaw 命令设置系统属性。这样您就可以设置库路径。

> -Dproperty=value 设置系统属性值。如果 value 是包含空格的字符串，则必须将字符串括在双引号中： java -Dfoo="some string" SomeClass

[你也可以在这里](http://www.chilkatsoft.com/java-loadLibrary-Windows.asp)看到一些细节（Point-#4）。

# java - 在将我的 Java 应用程序部署到 Heroku Cedar 堆栈时，我可以指定使用哪个版本的 Maven？

> ID：13212645
> 
> 赞同：2
> 
> 时间：2012-11-03T19:24:36.773
> 
> 标签：java, maven, heroku

我正在将需要 Maven 3.0.4 的应用程序部署到 Heroku Cedar 堆栈，但构建失败并出现以下警告：

```
Rule 1: org.apache.maven.plugins.enforcer.RequireMavenVersion failed with message:
Build with Maven 3.0.4 or later. Maven 3.0 through 3.0.3 inclusive do not pass 
correct settings.xml to Maven Release Plugin. 
```

我相信这个失败是由这个 Maven 错误引起的：

*   [回归：Mojo 中的注入设置缺少来自 settings.xml 的配置文件](http://jira.codehaus.org/browse/MNG-5224)。

有什么方法可以配置 Heroku Cedar 以使用不同版本的 Maven？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T19:39:43.133

Fork [Heroku Java Buildpack](https://github.com/heroku/heroku-buildpack-java/) git 存储库，然后克隆它。

在编辑器中打开**bin/compile**。查找以下行：

```
# install maven with base repository
MAVEN_URL="http://s3.amazonaws.com/heroku-jvm-langpack-java/maven.tar.gz"

if [ ! -d .maven ]; then
  echo -n "-----> Installing Maven 3.0.3..."
  curl --silent --max-time 60 --location $MAVEN_URL | tar xz
  chmod +x .maven/bin/mvn
  echo " done"
fi 
```

更改 MAVEN_URL 以从 Apache 下载 Maven 3.0.4：

```
MAVEN_URL="http://www.us.apache.org/dist/maven/maven-3/3.0.4/binaries/apache-maven-3.0.4-bin.tar.gz" 
```

提交您的更改，然后配置您的 Heroku Cedar 实例以使用您的自定义 buildpack：

```
heroku config:add BUILDPACK_URL=[YOUR GITHUB REPO] --app [YOUR HEROKU CEDAR APP] 
```

有关详细信息，请参阅 Heroku 的[使用自定义 Buildpack](https://devcenter.heroku.com/articles/buildpacks#using-a-custom-buildpack)的说明。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T19:00:23.673

只要您创建自己的构建包，就可以做到这一点。看看我在[https://github.com/jtzikas/heroku-buildpack-java](https://github.com/jtzikas/heroku-buildpack-java)上使用 maven 3.0.4 做了什么。

简而言之，我必须做的是更改 maven 位置的 uri，但也要更改目录结构，因为 heroku 包含 .m2 和 .maven 目录。需要这些目录才能运行脚本的其余部分。

```
# install maven without base repository
MAVEN_URL="http://www.us.apache.org/dist/maven/maven-3/3.0.4/binaries/apache-maven-3.0.4-bin.tar.gz"

if [ ! -d .maven ]; then
  echo -n "-----> Installing Maven 3.0.4..."
  curl --silent --max-time 60 --location $MAVEN_URL | tar xz
  mv apache-maven-3.0.4 .maven
  mkdir .m2
  chmod +x .maven/bin/mvn
  echo " done"
fi 
```

.m2 目录是存储库位置，.maven 目录是 maven 安装位置。您需要将 maven 3.0.4 解压到 .maven 目录中，而不是 apache-maven-3.0.4，它是 maven 3.0.4 目录的根目录。不要忘记您需要创建一个空的 .m2 目录来托管 maven 存储库

查看 heroku 文档以获取有关如何使用自定义构建包的说明。

# c# - 无法获取页面 aspx 网页的源代码

> ID：13212651
> 
> 赞同：0
> 
> 时间：2012-11-03T19:25:23.053
> 
> 标签：c#, web-crawler

我试图获取页面的源代码，但有些页面无法通过 C# 代码获取源代码，我正在使用

这是我的代码

```
 private void button1_Click(object sender, EventArgs e)
    {
        using (var client = new WebClient())
        {
            string html = client.DownloadString("http://www.acusports.com/roster.aspx?roster=154&path=baseball");
            html = textBox1.Text;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:30:53.517

切换以下语句时会发生什么：

```
html = textBox1.Text; 
```

对此：

```
textBox1.Text = html; 
```

在您的代码中，您将`html`字符串设置为您检索到的任何内容，然后您立即用`textBox1.Text`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T19:29:15.947

你不想写：

```
textBox1.Text = html; 
```

# java - 在 GUI 中显示从文件中读取的任何内容

> ID：13212654
> 
> 赞同：-1
> 
> 时间：2012-11-03T19:25:55.580
> 
> 标签：java, swing, user-interface

因此，我的数据存储在一个名为 log.txt 的文件中，我想在 GUI 中查看它的内容。所以我有这两个我正在使用的类，一个是 Engine，我在其中读取 log.txt 文件，另一个是 GUI，用于应用 Engine 中使用的方法。

所以，在我的引擎中，我有这些代码：

```
public void loadLog()
    {
        try
        {
            java.io.File cpFile = new java.io.File( "log.txt" );

            if ( cpFile.exists() == true )
            {
                File file = cpFile;

                FileInputStream fis = null;
                BufferedInputStream bis = null;
                DataInputStream dis = null;

                String strLine="";
                String logPrint="";

                fis = new FileInputStream ( file );

                // Here is BufferedInputStream added for fast reading
                bis = new BufferedInputStream ( fis );
                dis = new DataInputStream ( bis );

                // New Buffer Reader
                BufferedReader br = new BufferedReader( new InputStreamReader( fis ) );

                while ( ( strLine = br.readLine() ) != null )
                {
                    StringTokenizer st = new StringTokenizer ( strLine, ";" );

                    while ( st.hasMoreTokens() )
                    {
                        logPrint       = st.nextToken();
                        System.out.println(logPrint);

                    }

                    log = new Log();
                    //regis.addLog( log );

                }
            }

        }
        catch ( Exception e ){
        }
    } 
```

然后，在我的 GUI 中，我会尝试应用在我的引擎中使用的代码：

```
 // create exit menu
        Logout = new JMenu("Exit");

        // create JMenuItem for about menu
        reportItem   = new JMenuItem ( "Report" );

        // add about menu to menuBar
        menuBar.add ( Logout );
        menuBar.setBorder ( new BevelBorder(BevelBorder.RAISED) );

        Logout.add ( reportItem );

    /* --------------------------------- ACTION LISTENER FOR ABOUT MENU ------------------------------------------ */

        reportItem.addActionListener ( new ActionListener()
        {
            public void actionPerformed ( ActionEvent e )
            {

                    engine.loadLog();
                    mainPanel.setVisible (false);
                    mainPanel = home();
                    toolBar.setVisible(false);
                    vasToolBar.setVisible(false);
                    cpToolBar.setVisible(false);
                    add ( mainPanel, BorderLayout.CENTER );
                    add ( toolBar, BorderLayout.NORTH );
                    toolBar.setVisible(false);
                    mainPanel.setVisible ( true );
                    pack();
                    setSize(500, 500);
            }
        }); 
```

现在，

我的问题是，如何在 GUI 部分中打印出引擎方法中读取的任何内容？我希望它们位于 JLabel 或 JTextArea 内。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T19:30:30.803

也许您希望您的 loadLog 方法*返回*一个包含从文件中读取的文本的字符串，然后在 GUI 中调用该方法并根据需要显示返回的字符串。此外，在执行 I&O 时，永远不要有一个空的 catch 块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T19:38:04.250

文件 IO 操作被认为是阻塞/耗时的。

您应该避免在事件调度线程中运行它们，因为这将阻止 UI 开始更新，使您的应用程序看起来像挂起/崩溃

您可以使用 a[`SwingWorker`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)来执行文件加载部分，将每一行传递给该`publish`方法并通过该方法将这些行添加到文本区域`process`...

```
public class FileReaderWorker extends SwingWorker<List<String>, String> {

    private final File inFile;
    private final JTextArea output;

    public FileReaderWorker(File file, JTextArea output) {
        inFile = file;
        this.output = output;
    }

    public File getInFile() {
        return inFile;
    }

    public JTextArea getOutput() {
        return output;
    }

    @Override
    protected void process(List<String> chunks) {
        for (String line : chunks) {
            output.append(line);
        }
    }

    @Override
    protected List<String> doInBackground() throws Exception {
        List<String> lines = new ArrayList<String>(25);
        java.io.File cpFile = getInFile();
        if (cpFile != null && cpFile.exists() == true) {
            File file = cpFile;

            BufferedReader br = null;

            String strLine = "";
            String logPrint = "";
            try {
                // New Buffer Reader
                br = new BufferedReader(new InputStreamReader(new FileInputStream(file)));
                while ((strLine = br.readLine()) != null) {
                    StringTokenizer st = new StringTokenizer(strLine, ";");
                    while (st.hasMoreTokens()) {
                        logPrint = st.nextToken();
                        publish(logPrint);
                    }
                }
            } catch (Exception e) {
                publish("Failed read in file: " + e);
                e.printStackTrace();
            } finally {
                try {
                    if (br != null) {
                        br.close();
                    }
                } catch (Exception e) {
                }
            }
        } else {
            publish("Input file does not exist/hasn't not begin specified");
        }            
        return lines;
    }
} 
```

查看[课程：Swing 中的并发以](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)获取更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T19:36:11.620

如果我误解了你的问题，请原谅我，但这里什么都没有：

您将要逐行读取文本文件，并将每一行添加到 JTextArea。

```
 BufferedReader reader = new BufferedReader(new FileReader("pathToFile"));  //This code creates a new buffered reader with the specified file input.  Replace pathToFile with the path to your text file.
        String text = reader.readLine();
        while(text != null) {
        myTextArea.append("\n" + text);  //Replace myTextArea with your JTextArea
        text = reader.readLine();
        } 
```

# ninject - 如何使用 Ninject 的 MockingKernel (moq) 设置模拟

> ID：13212655
> 
> 赞同：11
> 
> 时间：2012-11-03T19:25:57.443
> 
> 标签：ninject, moq, ninject-mockingkernel

我很难弄清楚如何`.SetupXXX()`调用. 任何人都可以阐明它应该如何工作？`Mock<T>``MockingKernel`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-03T21:10:14.300

您需要调用其`GetMock<T>`上的方法，该方法`MoqMockingKernel`将返回生成`Mock<T>`的您可以调用您的方法的`.SetupXXX()/VerifyXXX()`方法。

这是一个演示`GetMock<T>`用法的示例单元测试：

```
[Test]
public void Test()
{
    var mockingKernel = new MoqMockingKernel();
    var serviceMock = mockingKernel.GetMock<IService>();
    serviceMock.Setup(m => m.GetGreetings()).Returns("World");
    var sut = mockingKernel.Get<MyClass>();
    Assert.AreEqual("Hello World", sut.SayHello());    
} 
```

其中涉及的类型如下：

```
public interface IService { string GetGreetings(); }

public class MyClass
{
    private readonly IService service;

    public MyClass(IService service) { this.service = service; }

    public string SayHello()
    {
        return string.Format("Hello {0}", service.GetGreetings());
    }
} 
```

请注意，您可以使用`Moq.MockRepository`该属性访问生成的（如果您更喜欢 SetupXXX 方法）`MoqMockingKernel.MockRepository`。

# javascript - 如何在单页应用程序上使用 AMD 来仅加载某些依赖项

> ID：13212657
> 
> 赞同：0
> 
> 时间：2012-11-03T19:26:16.020
> 
> 标签：javascript, backbone.js, requirejs, amd, singlepage

据我了解，使用 AMD 管理加载的依赖项的一个好处是，但是在使用 require.js 的单页应用程序中，所有依赖项都将被加载。

例如使用主干或类似的东西，假设我有以下文件

> main.js 需要 router.js
> router.js 需要 view_a.js 和 view_b.js

router.js 呈现视图

```
routes: {  
   "view_b":"b",   
   "view_a":"a"  
},  
a:function{  
  showView(new ViewA());  
},   
b:function{  
  showView(new ViewB());  
} 
```

现在让我们说我去`example.com/#view_b`哪个只需要代码`view_b.js`但不使用`view_a.js`. 无论如何只`view_b.js`使用 require.js 或类似的东西加载或优先加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T22:52:48.603

你不能因为 require.js 需要在执行之前加载文件的所有依赖项。

我看到您的问题的两种解决方案：

*   创建两个不同的 Backbone.Router，就像你只“需要”每个路由器所需的模块（恕我直言，这不是最好的解决方案）

*   使用[require.js 优化器](http://requirejs.org/docs/optimization.html)，这会将你所有的 Javascript 文件合并为一个。当然，您只将它用于生产，而不是用于开发。

# casting - winrt 中的 C++/CX：过滤 Vector 中的特定类型

> ID：13212659
> 
> 赞同：0
> 
> 时间：2012-11-03T19:26:32.420
> 
> 标签：casting, windows-8, windows-runtime, c++-cx

我有`Vector<ItemRenderer^>`。`ItemRenderer`是一种抽象类型。我想过滤所有内容`ConcreteRenderer`并对它们执行一些操作。

我试过的：

```
for each (auto renderer in m_parts)
    if (renderer->GetType() == ConcreteRenderer::typeid)
    {
        auto item = dynamic_cast<ConcreteRenderer^>(renderer);
        item->SetState(1);
    } 
```

但是`renderer`有类型`VectorProxy<ItemRenderer^>`并且没有任何作用。如何解决？

**更新：**

所以我使用了以下代码：

```
for each (auto renderer in m_parts)
{
    auto item = dynamic_cast<ConcreteRenderer^>((ItemRenderer^)renderer);
    if (item != nullptr)
        item->SetState(1);
} 
```

现在一切正常。这是一个常见的解决方案，还是有别的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:12:14.120

似乎您已经找到了正确的解决方案（对于每个元素，将 dynamic_cast 转换为目标类型，如果动态转换返回非 null，则该元素属于预期类型）。

您尝试的 ( `p->GetType() == Thing::typeid`) 不会起作用，因为这些表达式都返回 a `Platform::Type^`。由于这是句柄/指针类型，因此您正在执行指针比较（而不是标识比较）。在您的场景中，这基本上总是会返回 false。

如果你想通过使用类型标识而不是强制转换来做到这一点，你可以，但你应该`FullName`对类型对象的属性执行字符串比较。例如：`if (p->GetType()->FullName == Thing::typeid->FullName)`。

但是，我相信 dynamic_cast 解决方案总体上会具有更好的性能特征。（特别是因为如果您确实发现类型相同，则无论如何您都必须执行该 dynamic_cast ！）

# php - 重命名数组 - PHP

> ID：13212660
> 
> 赞同：-2
> 
> 时间：2012-11-03T19:26:47.463
> 
> 标签：php, arrays, rename

我第一次尝试 PHP，我有一个购物车。

我希望每个项目都有一个链接回到它自己的产品页面。所以我用这个

```
$output[] = '<a href="'.$brand.'/index.php#'.$id.'" target="_blank">'; 
```

不幸的是，$brand 没有相同的文件夹名称。例如，我需要帮助编写一些将“这是第一个品牌”替换为“品牌一”的代码。另外我只有几个品牌，所以我可以为每个操作使用一条线，无需考虑将''替换为'-'之类的东西！

[我认为这可能是什么](https://stackoverflow.com/questions/11606396/php-replace-text-inside-an-array-resulting-from-query)，但我不希望脚本重命名所有内容的值，因为它们仍然需要像“这是第一个品牌”一样输出，处理后的值仅在链接上输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:38:23.500

根据您所说的要求（您可以逐行替换），您可以在链接中使用相同的功能，即str_replace。

```
$array1 = {'this is the first brand','this is the second brand'};
$array2 = {'brand-one','brand-two'};
$brand2 = str_replace($array1,$array2,$brand); 
```

这适用于少量元素，但对于大量元素，如果您有 jasper 要求的替换模式会更容易。

# android - 如何使Android App的平板兼容？

> ID：13212662
> 
> 赞同：5
> 
> 时间：2012-11-03T19:26:57.603
> 
> 标签：android

我开发了在 Google play 上发布的移动应用程序。现在客户端要求应用程序与平板设备兼容。我知道所有不同的可绘制文件夹都用于不同密度的设备。

我从 Tablet Designs 开始，并通过使用另一个名为 layout-large 的布局文件夹来完成所有这些。

现在我的问题是我是否需要分别为 7"、9" 和 10" 屏幕设计平板电脑屏幕？或者对于任何平板电脑设备，保存在 layout-large 文件夹中的屏幕设计将用于平板电脑。

我不确定上面的事情，我什至用 layout-sw720dp 命名了另一个文件夹，并为 9" 平板电脑做了指定。这里我使用了一些不同的图像，因为我们有更多空间。因为我只有 7" 平板电脑要测试它并在测试时看到所有从布局大文件夹中使用的屏幕都很好。当我将我的 apk 文件发送给客户端时，已知客户端也只能看到布局大文件夹屏幕。

我对此进行了很多搜索，我发现只有单独的布局，但我没有发现任何关于设计适用于所有平板电脑或单独的屏幕的信息。阅读 android 教程，我发现我们应该使用说明符 sw600dp、sw720dp。这意味着两者都应该在那里，或者任何一个都不够理解。

我对我的英语感到非常抱歉，这是我第一次做移动应用程序的平板电脑兼容性。请在这方面提供帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T20:06:15.193

> Should I need to design the Tablet Screen separately for 7",9" and 10" screens?

Hopefully not, but that is impossible to answer in the abstract.

> or for any tablet device the screen designs saved in layout-large folder will be used for tablets.

Yes. If you do not provide a `res/layout-xlarge/` directory, `-xlarge` devices (e.g., 10" tablets) will use `res/layout-large/`.

> Reading android tutorial, i found we should use specifiers sw600dp, sw720dp. this mean both should be there or any one enough is not understood

You are welcome to use those if you wish. Note that they only work on Android 3.2 and higher.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:24:56.393

该解决方案也适用于所有 android 手机设备和平板电脑。这是相同的解决方案

```
public String getScreenResolution()
    {
    int screenSize = getResources().getConfiguration().screenLayout &
    Configuration.SCREENLAYOUT_SIZE_MASK;
     switch(screenSize) {
    case Configuration.SCREENLAYOUT_SIZE_XLARGE:
    deviceResolutionString="tablet";
    // This will returns tablet , you can start your tablet activity from here 
     break;
    case Configuration.SCREENLAYOUT_SIZE_LARGE:
    deviceResolutionString="tablet";
    // This will returns tablet , you can start your tablet activity from here 
    break;
    case Configuration.SCREENLAYOUT_SIZE_NORMAL:
    deviceResolutionString="device";
    // This will returns Phone , you can start your phone activity from here 
    break;
    case Configuration.SCREENLAYOUT_SIZE_SMALL:
    deviceResolutionString="device";

    // This will returns Phone , you can start your phone activity from here 
    break;
    default:
    }
    returndeviceResolutionString;
    } 
```

# ajax - 评估文件上传器 IE 和 @Responsebody。IE 启动下载对话框。

> ID：13212666
> 
> 赞同：0
> 
> 时间：2012-11-03T19:27:15.603
> 
> 标签：ajax, spring, spring-mvc, spring-3, fine-uploader

我正在使用 valums 文件上传器来上传文件。如果我的 Spring 控制器返回 void，这将非常有用。如果我将 @Responsebody 对象添加到我的控制器 IE 中，我将下载而不是上传文件并启动一个对话框。

我想要一个 @Responsebody 对象而不是 void 的原因是为了错误处理。在这种情况下，我该如何欺骗 IE？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T15:01:10.017

我假设 Spring 会自动为您将内容类型设置为 application/json，这在 IE 中不起作用。确保您的响应的内容类型是文本/纯文本。有人会说 text/html 是正确的，这在大多数情况下都是正确的。但是，如果您的 JSON 响应包含 HTML，则 text/html 会导致您出现问题，因为 IE 会弄乱响应。因此，您最安全的选择是确保您的回复的内容类型是文本/纯文本。

虽然我们讨论的是 IE 怪癖，但如果您打算在响应中也包含 JSON，请确保只返回 200 响应。默认情况下，IE 会将“小”非 200 响应的内容替换为“友好”消息。我相信，“小”被定义为小于 512（或可能 256）字节的响应。

有关使用 IE 时应注意的所有事项的列表，请查看 Fine Uploader 自述文件中的[“IE 限制”](http://docs.fineuploader.com/integrating/limitations-ie.html)部分。

# python - 从物理驱动器中提取字符串

> ID：13212673
> 
> 赞同：1
> 
> 时间：2012-11-03T19:28:21.327
> 
> 标签：python, computer-forensics

我希望在 Python 2.x 中编写一个脚本，该脚本将扫描物理驱动器（物理驱动器而不是逻辑驱动器）以查找大小范围内的特定文本字符串（聊天工件）。我有字符串的页眉和页脚，所以我只是想知道如何最好地扫描驱动器？我担心的是，如果我将其拆分为 250MB 的块并在解析页眉和页脚之前将此数据读入 RAM，则可能是页眉在那里，但页脚位于下一个 250MB 的块中。

所以本质上，我想扫描 PhysicalDevice0 以查找以“ABC”开头并以“XYZ”结尾的字符串，并从其中复制所有内容。我不确定是否也将数据扫描为 ascii 或 Hex。

随着驱动器变得越来越大，我希望以最快的方式做到这一点。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T23:44:51.587

您的问题可以表述为“如何在没有行结构的非常长的文件中进行搜索”。如果您一次读取一行一行的面向行的文本，这与您所做的没有什么不同：假设您正在逐块读取文本文件，但有一个面向行的正则表达式可供搜索；您将搜索到您已阅读的块中的最后一个*完整*行，然后抓住最后一个不完整的行并阅读另一个块以扩展它。因此，您不会在读取每个新块时重新开始。把它想象成一个滑动窗口；您只需将其推进以丢弃您能够完全搜索的部分。

在这里做同样的事情：编写你的代码，这样你匹配的字符串就不会碰到缓冲区的边缘。例如，如果您要搜索的标题是 100 字节长：读取一个文本块；检查是否*完整*的模式出现在块中；在当前块结束前将阅读窗口提前 100 个字节，并在其后添加一个新块的文本。现在您可以搜索标题而不会丢失它。找到它后，您将提取文本，直到看到停止模式（页脚）。它是在同一个块中还是在五个块之后都没有关系：您的代码应该知道它处于提取模式，直到看到停止模式。

# c# - 可重用的 LINQ 查询，除了 where 子句

> ID：13212680
> 
> 赞同：1
> 
> 时间：2012-11-03T19:29:33.293
> 
> 标签：c#, linq

我收集了一组具有各种属性（标题、发行年份、评级等）的电影，我需要使用 LINQ 查询来搜索这些属性，如下所示：

```
public BindingList<Movie> SearchByTitle(string title)
{
    var matches = from movies in movieCollection
                  where movies.Title == title
                  select movies;
    // do some other stuff with the matches
} 
```

但是我不希望使用单独的方法来搜索每个属性，因为在搜索之间唯一改变的是该`where`部分。例如`where movies.Rating == rating`或`where movies.ReleaseYear == releaseYear`。如何通过传递某种`Expression`或`Func`作为`where`部分来使搜索方法可重复用于所有不同类型的搜索？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T19:31:52.443

> 如何通过传入某种表达式或 Func 作为 where 部分，使搜索方法可重用于所有不同类型的搜索？

您的查询实际上只是*where*子句。但是您可以轻松地使 where 部分可配置......只是不使用查询表达式。

```
public BindingList<Movie> SearchByTitle(Expression<Func<Movie, bool>> predicate)
{
    var matches = movies.Where(predicate);

    // Do common stuff with the matches.
} 
```

编辑：我假设这`movies`是一个`IQueryable<T>`，因为你在谈论`Expression`。如果它只是一个`IEnumerable<T>`，你想要：

```
public BindingList<Movie> SearchByTitle(Func<Movie, bool> predicate)
{
    var matches = movies.Where(predicate);

    // Do common stuff with the matches.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T19:38:21.387

您可以使用扩展方法（在静态类中定义它）

```
 public static IQueryable<T> AddSearchParameter<T>(this IQueryable<T> query, bool condition, System.Linq.Expressions.Expression<Func<T, bool>> predicate)
    {
        if (condition)
        {
            query = query.Where(predicate);
        }

        return query;
    } 
```

例如：

```
public BindingList<Movie> Search(string title, int? year, int? rating)
{
    var matches = movieCollection.AddSearchParameter(!string.IsNullorEmpty(title), m=>m.Title == title);
    matches = matches.AddSearchParameter(year.HasValue, m=>m.Year == year.Value);
    matches = matches.AddSearchParameter(rating.HasValue, m=>m.rating >= rating.Value);

    // do some other stuff with the matches
} 
```

如果您对数据库使用它，则在您枚举之前它不会实际执行查询，因此这不会对您的数据库进行多次调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T19:32:32.110

您可以使用[CompiledQuery](http://msdn.microsoft.com/en-us/library/system.data.linq.compiledquery.aspx)。

检查[这个](https://stackoverflow.com/questions/4952602/how-to-reuse-where-clauses-in-linq-to-sql-queries)非常有趣的答案。

希望能帮助到你。

# macos - 无法在 Mac OS X 上安装 scipy

> ID：13212681
> 
> 赞同：6
> 
> 时间：2012-11-03T19:29:38.233
> 
> 标签：macos, python-2.7, scipy, pip

我已经安装了 numpy 和 matplot 并在 python 2.7 上正常工作，但是当我使用 pip 安装 scipy 时，我得到了这个错误。

```
numpy.distutils.npy_pkg_config.PkgNotFound: Could not find file(s)        ['/usr/local/lib/python2.7/site-packages/numpy/core/lib/npy-pkg-config/npymath.ini']

 ----------------------------------------
Command python setup.py egg_info failed with error code 1 in    /var/folders/61/dpn0d5p51z19g5vypnmh3vfh0000gn/T/pip-build/scipy 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T04:26:16.977

当您尝试在 Mac OS X 上安装 numpy、scipy 和 matplotlib 时，您可能会遇到无穷无尽的悲伤。如果您想保持在最前沿，我建议您下载 git 存储库并构建每个存储库。

如果您不需要处于最前沿，我建议您按照 SciPy 网站上的说明进行操作：

[http://www.scipy.org/Installing_SciPy/Mac_OS_X](http://www.scipy.org/Installing_SciPy/Mac_OS_X)

最后，还有 Chris Fonnesbeck 的出色工作：在[https://github.com/fonnesbeck/ScipySuperpack](https://github.com/fonnesbeck/ScipySuperpack)

Fonnesbeck 方法对我来说从未失败过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T23:34:53.157

我也无法使用 pip 安装 scipy。但是，对我有用的一个选项是使用[scipy.org 提供](http://scipy.org/install.html)的 .dmg 包。

重要提示：您必须在 Mac OS 中更新到最新版本的 python。也就是说，您仍然可以使用 Python 2.7，但是需要更新到可以在 python.org 下载的最新版本。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-09T13:47:33.433

我可以建议你为 Mas OS X 使用一些包管理器（例如 macports）。使用一种这样的系统可以避免诸如手动解决依赖关系之类的事情。

# ruby-on-rails - 解析 word 文档 heroku/s3

> ID：13212684
> 
> 赞同：0
> 
> 时间：2012-11-03T19:30:05.747
> 
> 标签：ruby-on-rails, heroku, ms-word

我想实现一个需要解析 word 文档的功能，该功能将由用户上传并存储在 amazon S3 上。该应用程序将在 heroku 上。我试过 catdoc 但它不解析网址。任何人都可以建议可以在heroku上使用来解析word文档的工具吗？

更新我想扫描一个上传的 ms-word(.doc) 有特定的单词并相应地标记它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T23:16:28.333

如果您只是想上传 word 文档，您可以查看类似[回形针 gem](https://github.com/thoughtbot/paperclip)之类的东西。

这将允许您将文件保存在 amazon S3 上并简单地下载它，但您也可以扩展回形针并对文件运行后处理。这稍微复杂一些。

就像 willglynn 说的那样，确切地知道你需要做什么解析会很好吗？

# php - 如何使用 foreach 存储多个数组值？

> ID：13212686
> 
> 赞同：-1
> 
> 时间：2012-11-03T19:30:10.093
> 
> 标签：php, jquery, html

我只想在下面的代码中使用 foreach 一次。我需要将两个数组值即 store_data 和 store_control_text 复制到我的数据库各自的字段中。需要建议不要对多个数组值使用 foreach 循环。

```
$data = $_REQUEST['columns_one'];
$controlText = $_REQUEST['controlText'];

$store_control_text = explode(",",$controlText);
$store_data = explode(",",$data);

$query = "INSERT INTO formdetailstemp(FormId,ControlType,ControlText,ControlPara1,Mandatory) VALUES ";
$values = array(); //store all the new rows
foreach($store_data as $key =>$value){
  $values[] = "('','".$value."','".$controlText."','".$controlPara."','".$mandatoryValue."')";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:33:14.320

我相信您正在寻找一个[`MultipleIterator`](http://php.net/multipleiterator)，它将通过一个循环轻松地遍历两个数组`foreach`：

```
$iter = new MultipleIterator;
$iter->attachIterator( new ArrayIterator( $store_control_text));
$iter->attachIterator( new ArrayIterator( $store_data));

foreach( $iter as $data) {
    list( $a, $b) = $data;
    var_dump( $a, $b);
    // Do your SQL insert with $a and $b
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T19:37:36.913

您可以使用`array_map`

```
foreach ( array_map(null, $store_control_text, $store_data) as $join ) {
    list($text, $data) = $join;
     //Do your stuff 

} 
```

[查看简单示例](http://codepad.org/B3sTgsl9)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-06T06:49:29.667

```
you can use .implode();

foreach ($_POST['description'] as $row=>$name){
$description = $name;
$supplier = $_POST['supplier']; //Normal textbox value
$quantity = $_POST['quantity'][$row]; //Array text box 1
$partnumber = $_POST['partnumber'][$row]; // Array text box 2
$unitcost = $_POST['unitcost'][$row]; // Array text box 3

$sql_array[] = '("NULL","' . $partnumber . '","' . $supplier . '","'.$description.'", "'.$quantity.'","'.$unitcost.'")'; 
}

    $query_single = 'INSERT INTO `inwards` (`id`, `partnumber`, `suppliers`, `description`, `quantity`,`unitcost`) VALUES '. implode(', ', $sql_array); 
```

# interface - 静态上下文错误中使用的非静态方法

> ID：13212687
> 
> 赞同：0
> 
> 时间：2012-11-03T19:30:18.623
> 
> 标签：interface, arraylist, compiler-errors, static-methods

关于静态上下文中使用的非静态方法的这段代码，我不断收到两个错误。此代码使用鸟、猫和狗的不同对象的 ArrayList，并使用名为 Pet 的接口将它们放入名为 petList 的 ArrayList 中。
我在第 4 行和第 6 行遇到相同的错误。

```
 public static void Feed(ArrayList petList){
        Scanner input = new Scanner(System.in);
        String petName = input.next();
        contains(petName, petList);

        if(ifThere == true){
            String feed = Pet.feed();
            System.out.println(petName + feed);
        }
        else{
            System.out.println("Unknown pet");
        }
    }

  public boolean contains (String petName, ArrayList petList){

    boolean ifThere = false;
    int sizeList = petList.size() -1;
    for(int i=0; sizeList > i; i++){
      Pet booleanPet = petList.get(i);
      String booleanName = booleanPet.getName();
      if (booleanName.equals(petName)){
        ifThere = true;
      }
}
return ifThere; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T23:07:57.500

简而言之：**您不能从静态方法调用非静态方法。**

**解决方案：** 1）将您的“包含”方法设为静态，它将解决问题。

或 2）（假设类的名称是 Pet 然后创建 Pet 类的实例并调用 contains 方法：您的第 4 行可以替换为以下代码（C# 样式代码）：

```
Pet somePet = new Pet ();
somePet.contains(petName, petList); 
```

-- 额外细节：静态方法是一种从不特定于任何对象的方法。例如添加 2 个数字。您不需要实例化任何类来调用 Math.Add() 方法，因为 Add 是静态方法。

您也可以说静态方法不是虚拟方法，这意味着您肯定知道正在调用哪个方法。

# powershell - 如何在没有管理员权限的情况下运行 powershell 脚本？

> ID：13212688
> 
> 赞同：12
> 
> 时间：2012-11-03T19:30:23.650
> 
> 标签：powershell

如果我尝试更改执行策略，我会收到一条消息，指出我无法修改注册表，因为我不是管理员。

看起来这应该是可能的，因为我可以运行批处理文件和其他 .exe 和 .com 程序。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-05T06:10:32.617

如果您的域管理员没有禁止它，您可以这样做：

```
Set-ExecutionPolicy -ExecutionPolicy Bypass -Scope CurrentUser 
```

这会更改在当前用户下运行的 PowerShell 会话的默认执行策略，而不是为计算机上的所有用户设置它。

如果您只想更改当前 PowerShell 会话的执行策略，可以使用以下命令：

```
Set-ExecutionPolicy -ExecutionPolicy Bypass -Scope Process 
```

但是，如果您的域管理员使用“[打开脚本执行](http://www.techrepublic.com/blog/datacenter/set-the-powershell-execution-policy-via-group-policy/3305)”组策略，您将根本无法更改您的执行策略。组策略设置使[Set-ExecutionPolicy](http://technet.microsoft.com/en-us/library/hh849812.aspx) cmdlet 无效。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-03T20:01:49.290

您可以尝试设置流程本身的策略。

> powershell.exe -ExecutionPolicy 绕过

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-19T17:39:35.103

如果您想有一种简单的方法`myscript.ps1`从 Windows shell 运行脚本，那么您只需要一个`Runmyscript.bat`包含以下内容的 bat：

```
type myscript.ps1 | powershell - 
```

如此简单，这让我想知道为什么你不能一开始就运行 ps1，但我们开始了。

提示用户输入以键入脚本名称的通用版本将是：

```
set /p filename="Type name of script here: "
type %filename% | powershell - 
```

我想如果你愿意，你也可以编写一个通用的 vbscript 脚本，使用这个[http://todayguesswhat.blogspot.co.uk/2012/08/windows-7-replacement-for .html](http://todayguesswhat.blogspot.co.uk/2012/08/windows-7-replacement-for.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-04T16:32:52.913

how about

```
$script = Get-Content .\test.ps1
Invoke-Expression $script 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T14:42:05.310

我在互联网上其他地方找到的第三种技术是使用

powershell.exe -EncodedCommand XXXXXXX

其中 XXXXXXX 是

```
$code = {
     #powershell script goes here.
    }
}

[convert]::ToBase64String([Text.Encoding]::Unicode.GetBytes($code)) 
```

参考： [http ://dmitrysotnikov.wordpress.com/2008/06/27/powershell-script-in-a-bat-file/](http://dmitrysotnikov.wordpress.com/2008/06/27/powershell-script-in-a-bat-file/)

# c++ - 访问和 push_back 来自不同类的向量的值？

> ID：13212692
> 
> 赞同：0
> 
> 时间：2012-11-03T19:30:41.760
> 
> 标签：c++

我对如何访问向量以及如何从不同的类向其添加值感到困惑。

我想将来自不同类的值添加到向量中（向量是私有的）。我还想访问 main() 中的向量并能够将其打印出来。

谁能给我一个例子来说明这是如何做到的？

```
Class A
{
//vector is here - it's a private vector
}
Class B
{
//add values to the vector here
}
main()
{
//access the vector here, and print out the values
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T19:38:29.153

如果向量是 的私有成员`A`，则提供访问权限的常用方法是通过`A`该包装访问向量的公共成员函数。通常，您应该只公开必要的访问权限。阅读有关封装的信息。如果您打算为其提供完整的公共接口，则将向量设为私有没有多大意义。如果您只想让`B`班级（以及 的其他成员）不受限制地访问它`A`，您可以创建`B`一个.的[朋友班级](http://www.cplusplus.com/doc/tutorial/inheritance/)。`A`

# python - 奇怪的行为

> ID：13212695
> 
> 赞同：0
> 
> 时间：2012-11-03T19:30:59.593
> 
> 标签：python, python-3.x

> **可能重复：**
> [奇怪的while语句行为？](https://stackoverflow.com/questions/13212173/strange-while-statement-behaviour)

鉴于以下情况，我如何正确实现列表理解，退出循环并在“else”之后运行语句？我曾尝试扫描“-”字符，但它不起作用。

试过：

```
while(current != randomValue) 
```

现在尝试：

```
randomKey = random.choice(list(topic.keys()))

randomValue = random.choice(topic[randomKey])

current = "-" * len(randomValue)  

while (i for i in range (0, len(current)) if i != "-"):
    (statements)
else:
    (statements) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T19:33:07.913

您的测试没有意义——生成器上的 Bool 始终是`True`：

```
>>> a = (i for i in range(10))
>>> bool(a)
True 
```

也`i`永远不会 == '`-'`因为你正在循环`range`。我不太确定您在这里尝试什么，但我们真的无法帮助您解决这个问题，除非我们看到您可以设法将您的实际代码简化为最重要的部分。（谁知道，通过这样做，您可能会自己发现问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T19:39:52.233

而不是列表理解，努力使while语句为假等等......我这样做了，它在某种程度上起作用：

```
while ("-" in current ): 
```

# emacs - 终端的 Emacs 输入解码映射

> ID：13212696
> 
> 赞同：3
> 
> 时间：2012-11-03T19:31:04.240
> 
> 标签：emacs, terminal-emulator

我问了一个关于终端 Emacs 中的 Ctrl-箭头键绑定的问题：

[Emacs Ctrl 修饰符在控制台中不起作用](https://stackoverflow.com/questions/13131367/emacs-ctrl-modifiers-dont-work-in-console)

并且被告知，Linux 终端仿真器不处理这种组合。我设法为`loadkeys`命令创建了一个文件，该文件处理这些键：

```
control keycode 105 = F100
string F100 = "\033[[left"
control keycode 106 = F101
string F101 = "\033[[right" 
```

然后从根加载它：

```
#loadkeys ./funcskeys 
```

之后，每次我在控制台中单击 Ctrl-right 或 Ctrl-left 时，都会打印出“right”或“left”。现在我需要在 Emacs 中处理它。据我从这个问题了解到：

[在 Emacs 23.1.1 中绑定 M-<up> / M-<down>](https://stackoverflow.com/questions/4351044/binding-m-up-m-down-in-emacs-23-1-1)

必须使用`input-decode-map`函数来完成。但我无法让它工作。请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T13:35:34.283

稍微更改您的“funcskeys”文件以生成以下转义序列：

```
control keycode 105 = F100
string F100 = "\033[1;5D"
control keycode 106 = F101
string F101 = "\033[1;5C" 
```

然后将以下行添加到您的`.emacs`文件中：

```
(define-key input-decode-map "\e[1;5C" [(control right)])
(define-key input-decode-map "\e[1;5D" [(control left)]) 
```

运行`loadkeys`并重新启动 Emacs 后，`CTRL+left`应该`CTRL+right`可以工作。您可以通过键入以下内容来验证这一点：

`C-h k C-right`

和

`C-h k C-left`

要将这些击键实际绑定到命令，例如`forward-word`，您可能还必须将以下行添加到`.emacs`文件中：

```
(global-set-key [(control right)] 'forward-word)
(global-set-key [(control left)] 'backward-word) 
```

`CTRL+left`请注意，整个方法仅专门使组合键`CTRL+right`起作用。例如，它*不会*使`ALT+left`/`ALT+right`工作，或任何其他涉及`CTRL`角色的组合键。

# jsf - 如何在 JSF 页面中创建面包屑

> ID：13212699
> 
> 赞同：1
> 
> 时间：2012-11-03T19:31:17.863
> 
> 标签：jsf, jsf-2

我想在 JSF 页面中创建面包屑。问题是我需要记住几条路径。我需要实现某种内存，我可以在其中记住打开的页面和页面路径。我该如何解决这个问题？

# javascript - 必须在同一个脚本中多次使用 $(document).ready()

> ID：13212710
> 
> 赞同：2
> 
> 时间：2012-11-03T19:32:05.147
> 
> 标签：javascript, jquery, scope, document, ready

我有一个具有以下结构的脚本：

```
Test = {

    CONSTANTS : {},
    VARIABLES : {},
    MARKUP : {},
    FUNCTIONS : {
        init : function () {

            // Access variable from different namespace
            var all_constants = DifferentNamespace.CONSTANTS; // WORKS
            var tester = DifferentNamespace.CONSTANTS.chunk_of_markup; // SAYS UNDEFINED
        }
    },
    init : function () {

        // Call real init() function

        $(document).ready(function () {

            Test.FUNCTIONS.init();
        });
    }

};

$(document).ready(function () {

    Test.init();
}); 
```

如果我删除任何一个`$(document).ready(..)`函数调用，当我尝试从不同的命名空间访问一个常量时，它是未定义的；两者都很好用。

如您所见，我使用了两个`init()`函数，一个只是为了整理对 init 的调用，因为我将函数包装在一个附加对象中。

如果我删除与 CONSTANTS、VARIABLES 等处于同一级别的函数并尝试`init()`在 Test.FUNCTIONS 中调用它仍然不起作用。

编辑：

如果`console.log(all_constants)`我得到完整的对象（使用 .chunk_of_markup），但如果我`console.log(tester)`得到`undefined`. 如果我包装测试仪，我会得到`[]`

我还应该注意，另一个命名空间从单独的文件中获取标记。

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T20:04:36.460

准备好两个文件在这里并没有什么不同。您可以拥有一个 document.ready 和/或直接调用 Test.FUNCTIONS.init 并且所有这些都应该工作，并且它们位于不同名称空间中的事实也无关紧要。

至于你为什么没有定义，我认为这可能是因为你的**chunk_of_markup**变量实际上是*未定义*的。我的猜测是您通过 AJAX 获取它的值，因此调用是异步完成的，这意味着 DOM 将在它实际返回值之前准备好。当您使用调试器时，该值会在您运行命令的时间点进行评估，因此到那时，异步调用已经成功返回（这是一个竞争条件，如果您足够快并且您的 AJAX 很慢，那么您可以仍然未定义，这也是为什么 2 个准备好的函数恰好使它足够慢以使 AJAX 调用返回但它仍然不可靠）。

在所有情况下，如果我的理论是正确的，那么您需要挂钩 AJAX 请求的回调而不是 DOM 就绪事件，这是您可以保证定义变量的唯一地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T19:43:49.777

为什么不在`function init()`文档处理程序本身中调用..我认为这不会导致同样的问题..您可以`Test.init()`完全删除它，因为它似乎在这里没有做任何事情

```
Test = {
    CONSTANTS : {},
    VARIABLES : {},
    MARKUP : {},
    FUNCTIONS : {
        init : function () {

            // Access variable from different namespace
            var all_constants = DifferentNamespace.CONSTANTS; // WORKS
            var tester = DifferentNamespace.CONSTANTS.chunk_of_markup; // SAYS UNDEFINED
        }
    }
};

$(document).ready(function () {

    Test.FUNCTIONS.init();
}); 
```

# python - Lambda、可调用的类实例和范围；为什么它在 Python 2.7 中不起作用？

> ID：13212713
> 
> 赞同：4
> 
> 时间：2012-11-03T19:32:13.693
> 
> 标签：python, lambda, python-2.7, scope

有人可以向我解释为什么以下代码会产生异常吗？

```
>>> class CallableKlass(object):
    def __init__(self, callible):
        self.callible = callible
    def __call__(self, arg):
        return self.callible(arg)

>>> class Klass(object):
    d = {'foo': 'bar'}
    m = CallableKlass(lambda x: d[x])

>>> Klass.m('foo')

Traceback (most recent call last):
  File "<pyshell#10>", line 1, in <module>
    Klass.m('foo')
  File "<pyshell#5>", line 5, in __call__
    return self.callible(arg)
  File "<pyshell#9>", line 3, in <lambda>
    m = CallableKlass(lambda x: d[x])
NameError: global name 'd' is not defined 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T19:38:12.893

类命名空间（直接在类主体中定义的东西）不能从该命名空间中定义的函数中访问。lambda 只是一个函数，因此这也适用于 lambda。你`CallableKlass`是一个红鲱鱼。在这个更简单的情况下，行为是相同的：

```
>>> class Foo(object):
...     d = {'foo': 'bar'}
...     (lambda stuff: d[stuff])('foo')
Traceback (most recent call last):
  File "<pyshell#3>", line 1, in <module>
    class Foo(object):
  File "<pyshell#3>", line 3, in Foo
    (lambda stuff: d[stuff])('foo')
  File "<pyshell#3>", line 3, in <lambda>
    (lambda stuff: d[stuff])('foo')
NameError: global name 'd' is not defined
>>> class Foo(object):
...     d = {'foo': 'bar'}
...     def f(stuff):
...         d[stuff]
...     f('foo')
Traceback (most recent call last):
  File "<pyshell#4>", line 1, in <module>
    class Foo(object):
  File "<pyshell#4>", line 5, in Foo
    f('foo')
  File "<pyshell#4>", line 4, in f
    d[stuff]
NameError: global name 'd' is not defined 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T19:35:04.923

您应该`Klass.d`在 lambda 中使用，因为在类中声明的变量将成为该类的属性。这就是您的程序引发该错误的原因，因为它无法`d`在全局变量中找到类似的东西。：

```
class Klass(object):
    d = {'foo': 'bar'}
    m = CallableKlass(lambda x: Klass.d[x]) 
```

# android - 用于恢复现有活动的 Android 通知

> ID：13212718
> 
> 赞同：1
> 
> 时间：2012-11-03T19:32:32.640
> 
> 标签：android

我的应用程序中有一个通知，我希望它在用户单击它时恢复现有活动。通知是在我想带回来的活动中生成的，所以我认为它仍然存在。

这是我的通知代码：

```
NotificationManager nm = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
    Notification noti = new Notification(R.drawable.icon, "s", 0);
    CharSequence title = "S";
    CharSequence details = "W";
    Intent intent = new Intent(getBaseContext(), Start.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT | Intent.FLAG_ACTIVITY_PREVIOUS_IS_TOP);
    PendingIntent pending = PendingIntent.getActivity(getBaseContext(), 0, intent, 0);
    noti.setLatestEventInfo(Start.this, title, details, pending);
    nm.notify(0,noti); 
```

但由于某种原因，它不断创建一个新的活动。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T20:50:09.703

“通知是在我想带回来的活动中生成的，所以我认为它仍然存在。” 好吧，它可能会，但通常对你来说指望它不是一个好主意。如果用户仅在使用后退按钮退出您的应用程序后，或者在操作系统杀死您的活动而用户一直在做其他事情的一段时间后点击通知怎么办？您需要“旧”活动是否有特殊原因？如果它具有您需要保存或重新创建的状态，您可以这样做：查看[http://developer.android.com/training/basics/activity-lifecycle/recreating.html](http://developer.android.com/training/basics/activity-lifecycle/recreating.html)和[http://developer。 android.com/guide/components/activities.html#SavingActivityState](http://developer.android.com/guide/components/activities.html#SavingActivityState)。

# android - 如何以某种方式排列单选按钮

> ID：13212726
> 
> 赞同：0
> 
> 时间：2012-11-03T19:33:07.853
> 
> 标签：android, android-layout

如果我有一个带有 7 个单选按钮的单选组，并且我希望它们像这样对齐：

```
 button2    button5
button1    button3    button6
           button4    button7 
```

有没有一种方法可以用一个 RadioGroup 完成上述操作（我可以将 button1 放在第一行，但这是我正在寻找的一般布局）

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T19:24:14.017

您可以基于此[http://developer.android.com/reference/android/widget/RadioGroup.OnCheckedChangeListener.html](http://developer.android.com/reference/android/widget/RadioGroup.OnCheckedChangeListener.html)实现自己的按钮处理逻辑：

```
public class RadioButtonHandler implements RadioButton.OnCheckedChangeListener {

    private CompoundButton currentlyCheckedButton = null;

    public void onCheckedChanged(CompoundButton button, boolean isChecked) {
            if (isChecked) {
               currentlyCheckedButton .setChecked(false);
               currentlyCheckedButton = button;
            }
    }

    public void addButton(RadioButton button) {
           // if this is the first button, set it as the current button
           if (currentlyCheckedButton == null) {
               currentlyCheckedButton = button;
           }
           button.setOnCheckedChangeListener(this);
    }

    public CompoundButton getCheckedRadioButton() {
        return currentlyCheckedButton ;
    } 
} 
```

实例化此类并为该类应控制的每个按钮调用 addButton。然后你可以在你需要的任何视图组中布局你的按钮。向 onCheckChanged 回调添加额外的逻辑或调用 getCheckedRadioButton ，这将返回对当前选中按钮的引用。

[编辑] 修正错字 = getCheckedButton -> getCheckedRadioButton

# opencv - 计算机视觉应用的 CUDA 性能比较

> ID：13212729
> 
> 赞同：-4
> 
> 时间：2012-11-03T19:33:35.860
> 
> 标签：opencv, cuda, computer-vision, gpu

我目前正在研究各种计算机视觉应用程序的性能比较。该研究基于评估这些不同算法在 CUDA 和 OpenMP 上的性能。

您是否有 CUDA 中的任何源代码以及用于此类应用程序的 C 中的串行实现？我在哪里可以找到它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:59:55.587

[CUDA SDK](https://developer.nvidia.com/cuda-downloads)充满了示例，在 GPU 和 CPU 上编译。

来源包括在内。

[这是您通过安装获得的示例列表。](http://docs.nvidia.com/cuda/cuda-samples/index.html)

你可以从这里开始:)

# javafx-2 - 如何在现有的 WindowBuilder 项目中实现 JavaFX？

> ID：13212730
> 
> 赞同：2
> 
> 时间：2012-11-03T19:33:47.310
> 
> 标签：javafx-2, javafx, windowbuilder

我试图了解 JavaFX 的东西......我的程序是一个基于 WindowBuilder 的 Gui，我想要一个 JavaFX 图形，以及一个 JavaFX 实时视频源显示在我的应用程序中。

如何在我的代码中实现它？我试过[这个](http://docs.oracle.com/javafx/2/swing/swing-fx-interoperability.htm#CHDIEEJE)，但我无法让它运行。数据馈送不是问题。我只需要在我的 JFrame 中以小方块的形式查看它...

*现在很困惑:(*

这是我的代码：（对不起，它有点长，但我责怪JavaFX的示例代码：p

```
import javax.swing.JFrame;
import javax.swing.JTextField;
import javax.swing.UIManager;
import java.awt.Canvas;
import java.awt.SystemColor;
import java.io.BufferedReader;
import java.io.BufferedWriter;
import javax.swing.UIManager.*;

/**
 * @author 
 * 
 */

public class MyClientApp extends JFrame {

/**
*
*/
private static final long serialVersionUID = 1L;
protected static final String BufferedWriter = null;
JFrame frame;
private JTextField textFieldUsername;

/**
 * Create the application.
 */
public MyClientApp(BufferedWriter serverDataOut, BufferedReader serverDataIn) {

    initialize();
}

/**
 * Initialize the contents of the frame.
 * 
 * @param serverDataOut
 * 
 */

private void initialize() {

    try {
        for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (Exception e) {
        // Nimbus Theme not avaliable
}

    frame = new JFrame();
        frame.setResizable(false);
    frame.setTitle("*********** My Program ***********");
    frame.setBounds(320, 130, 730, 570); 
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().setLayout(null);

    Canvas canvasTemp = new Canvas();
    canvasTemp.setBackground(SystemColor.window);
    canvasTemp.setBounds(6, 277, 380, 255);
    frame.getContentPane().add(canvasTemp);

    Canvas canvasLevel = new Canvas();
    canvasLevel.setBackground(SystemColor.window);
    canvasLevel.setBounds(6, 10, 380, 255);
    frame.getContentPane().add(canvasLevel);

}

public JFrame frame() {
    return frame;
}

} 
```

这是让它为你们运行的主文件......：

```
Client.java

import java.io.IOException;

public class Client {

public static void main(String[] args) throws IOException, InterruptedException {

    MyClientApp window = new MyClientApp(null, null);

    window.frame.setVisible(true);

}

} 
```

我要实现的代码是：AdvancedLineChartSample.java（来自JavaFX）

```
/**
* Copyright (c) 2008, 2012 Oracle and/or its affiliates.
* All rights reserved. Use is subject to license terms.
*/

import javafx.application.Application;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.stage.Stage;
import java.util.ArrayList;
import java.util.List;
import javafx.animation.KeyFrame;
import javafx.animation.Timeline;
import javafx.collections.FXCollections; 
import javafx.collections.ObservableList;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.geometry.Side;
import javafx.scene.Node;
import javafx.scene.chart.LineChart;
import javafx.scene.chart.NumberAxis;
import javafx.scene.chart.XYChart;
import javafx.scene.chart.XYChart.Series;
import javafx.util.Duration;

/**
 * An advanced line chart with a variety of actions and settable properties.
 *
 * @see javafx.scene.chart.LineChart
 * @see javafx.scene.chart.Chart
 * @see javafx.scene.chart.NumberAxis
 * @see javafx.scene.chart.XYChart
 */
public class AdvancedLineChartSample extends Application {

private void init(Stage primaryStage) {
    Group root = new Group();
    primaryStage.setScene(new Scene(root));
    root.getChildren().add(createChart());
}

protected LineChart<Number, Number> createChart() {
    final NumberAxis xAxis = new NumberAxis();
    final NumberAxis yAxis = new NumberAxis();
    final LineChart<Number,Number> lc = new LineChart<Number,Number>(xAxis,yAxis);
    // setup chart
    lc.setTitle("Temp Chart");
    xAxis.setLabel("tid");
    yAxis.setLabel("temp");
    // add starting data
    XYChart.Series<Number,Number> series = new XYChart.Series<Number,Number>();
    series.setName("Dataset 1");
    series.getData().add(new XYChart.Data<Number,Number>(20d, 50d));
    series.getData().add(new XYChart.Data<Number,Number>(40d, 80d));
    series.getData().add(new XYChart.Data<Number,Number>(50d, 90d));
    series.getData().add(new XYChart.Data<Number,Number>(70d, 30d));
    series.getData().add(new XYChart.Data<Number,Number>(170d, 122d));
    lc.getData().add(series);
    return lc;
}

@Override public void start(Stage primaryStage) throws Exception {
    init(primaryStage);
    primaryStage.show();
}
public static void main(String[] args) { launch(args); 

}

} 
```

和 StreamingMediaPlayer.java（来自 JavaFX）：

```
/**

* Copyright (c) 2008, 2012 Oracle and/or its affiliates.
* All rights reserved. Use is subject to license terms.
*/
import javafx.application.Application;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.stage.Stage;
import javafx.application.Platform;
import javafx.beans.InvalidationListener;
import javafx.beans.Observable;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.scene.control.Label;
import javafx.scene.control.Slider;
import javafx.scene.layout.BorderPane;
import javafx.scene.layout.HBox;
import javafx.scene.layout.Pane;
import javafx.scene.layout.Priority;
import javafx.scene.layout.Region;
import javafx.scene.media.Media;
import javafx.scene.media.MediaPlayer;
import javafx.scene.media.MediaPlayer.Status;
import javafx.scene.media.MediaView;
import javafx.util.Duration;
import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;
import javafx.animation.ParallelTransition;
import javafx.scene.control.*;
import javafx.scene.layout.*;
import javafx.scene.paint.Color;

/**
* A media player with controls for play, pause, stop, seek, and volume. This media player is playing media via HTTP Live Streaming, also known as HLS. 
*
* @see javafx.scene.media.MediaPlayer
* @see javafx.scene.media.Media
*/
public class StreamingMediaPlayer extends Application {
private static final String MEDIA_URL = "http://download.oracle.com/otndocs/products/javafx/JavaRap/prog_index.m3u8";

private MediaPlayer mediaPlayer;

private void init(Stage primaryStage) {
    Group root = new Group();
    primaryStage.setScene(new Scene(root));
    mediaPlayer = new MediaPlayer(new Media(MEDIA_URL));
    mediaPlayer.setAutoPlay(true);
    PlayerPane playerPane = new PlayerPane(mediaPlayer);
    playerPane.setMinSize(480, 360);  
    playerPane.setPrefSize(480, 360);
    playerPane.setMaxSize(480, 360);
   // getStylesheets().add("ensemble/samples/media/OverlayMediaPlayer.css");
    root.getChildren().add(playerPane);
}

public void play() {
    Status status = mediaPlayer.getStatus();
    if (status == Status.UNKNOWN || status == Status.HALTED) {
        return;
    }
    if (status == Status.PAUSED || status == Status.STOPPED || status == Status.READY)     {
        mediaPlayer.play();
    }
}

@Override public void stop() {
    mediaPlayer.stop();
}

static class PlayerPane extends BorderPane {
    private MediaPlayer mp;
    private MediaView mediaView;
    private final boolean repeat = false;
    private boolean stopRequested = false;
    private boolean atEndOfMedia = false;
    private Duration duration;
    private Slider timeSlider;
    private Label playTime;
    private Slider volumeSlider;
    private HBox mediaTopBar;
    private HBox mediaBottomBar;
    private ParallelTransition transition = null;

    @Override protected void layoutChildren() {
        if (mediaView != null && getBottom() != null) {
            mediaView.setFitWidth(getWidth());
            mediaView.setFitHeight(getHeight() - getBottom().prefHeight(-1));
        }
        super.layoutChildren();
        if (mediaView != null) {
            mediaView.setTranslateX((((Pane)getCenter()).getWidth() - mediaView.prefWidth(-1)) / 2);
            mediaView.setTranslateY((((Pane)getCenter()).getHeight() - mediaView.prefHeight(-1)) / 2);
        }
    }

    @Override protected double computeMinWidth(double height) {
        return mediaBottomBar.prefWidth(-1);
    }

    @Override protected double computeMinHeight(double width) {
        return 200;
    }

    @Override protected double computePrefWidth(double height) {
        return Math.max(mp.getMedia().getWidth(), mediaBottomBar.prefWidth(height));
    }

    @Override protected double computePrefHeight(double width) {
        return mp.getMedia().getHeight() + mediaBottomBar.prefHeight(width);
    }

    @Override protected double computeMaxWidth(double height) { return Double.MAX_VALUE; }

    @Override protected double computeMaxHeight(double width) { return Double.MAX_VALUE; }

    public PlayerPane(final MediaPlayer mp) {
        this.mp = mp;
        setId("player-pane");

        mediaView = new MediaView(mp);
        Pane mvPane = new Pane() { };
        mvPane.setId("media-pane");
        mvPane.getChildren().add(mediaView);
        setCenter(mvPane);

        mediaTopBar = HBoxBuilder.create()
                .padding(new Insets(5, 10, 5, 10))
                .alignment(Pos.CENTER)
                .opacity(1)
                .build();
        BorderPane.setAlignment(mediaTopBar, Pos.CENTER);

        mediaBottomBar = HBoxBuilder.create()
                .padding(new Insets(5, 10, 5, 10))
                .alignment(Pos.CENTER)
                .opacity(1)
                .build();
        BorderPane.setAlignment(mediaBottomBar, Pos.CENTER);

        mp.currentTimeProperty().addListener(new ChangeListener<Duration>() {
            @Override
            public void changed(ObservableValue<? extends Duration> observable, Duration oldValue, Duration newValue) {
                updateValues();
            }
        });
        mp.setOnPlaying(new Runnable() {
            public void run() {
                if (stopRequested) {
                    mp.pause();
                    stopRequested = false;
                } 
            }
        });
        mp.setOnReady(new Runnable() {
            public void run() {
                duration = mp.getMedia().getDuration();
                updateValues();
            }
        });
        mp.setOnEndOfMedia(new Runnable() {
            public void run() {
                if (!repeat) {
                    stopRequested = true;
                    atEndOfMedia = true;
                }
            }
        });
        mp.setCycleCount(repeat ? MediaPlayer.INDEFINITE : 1);

        // Time label
        Label timeLabel = LabelBuilder.create()
                .text("Time")
                .minWidth(Control.USE_PREF_SIZE)
                .textFill(Color.WHITE)
                .build();
        mediaTopBar.getChildren().add(timeLabel);

        // Time slider
        timeSlider = SliderBuilder.create()
                .id("media-slider")
                .minWidth(240)
                .maxWidth(Double.MAX_VALUE)
                .build();
        timeSlider.valueProperty().addListener(new InvalidationListener() {
            public void invalidated(Observable ov) {
                if (timeSlider.isValueChanging()) {
                    // multiply duration by percentage calculated by slider position
                    if (duration != null) {
                        mp.seek(duration.multiply(timeSlider.getValue() / 100.0));
                    }
                    updateValues();

                }
            }
        });
        HBox.setHgrow(timeSlider, Priority.ALWAYS);
        mediaTopBar.getChildren().add(timeSlider);

        // Play label
        playTime = LabelBuilder.create()
                .prefWidth(130)
                .minWidth(50)
                .textFill(Color.WHITE)
                .build();
        mediaTopBar.getChildren().add(playTime);

        // Volume label
        Label volumeLabel = LabelBuilder.create()
                .text("Vol")
                .textFill(Color.WHITE)
                .minWidth(Control.USE_PREF_SIZE)
                .build();
        mediaTopBar.getChildren().add(volumeLabel);

        // Volume slider
        volumeSlider = SliderBuilder.create()
                .id("media-slider")
                .prefWidth(120)
                .maxWidth(Region.USE_PREF_SIZE)
                .minWidth(30)
                .build();
        volumeSlider.valueProperty().addListener(new InvalidationListener() {
            public void invalidated(Observable ov) {
            }
        });
        volumeSlider.valueProperty().addListener(new ChangeListener<Number>() {
            @Override
            public void changed(ObservableValue<? extends Number> observable, Number oldValue, Number newValue) {
                if (volumeSlider.isValueChanging()) {
                    mp.setVolume(volumeSlider.getValue() / 100.0);
                }
            }
        });
        mediaTopBar.getChildren().add(volumeSlider);

        setTop(mediaTopBar);

        final EventHandler<ActionEvent> backAction = new EventHandler<ActionEvent>() {
            public void handle(ActionEvent e) {
                mp.seek(Duration.ZERO);
            }
        };
        final EventHandler<ActionEvent> stopAction = new EventHandler<ActionEvent>() {
            public void handle(ActionEvent e) {
                mp.stop();
            }
        };
        final EventHandler<ActionEvent> playAction = new EventHandler<ActionEvent>() {
            public void handle(ActionEvent e) {
                mp.play();
            }
        };
        final EventHandler<ActionEvent> pauseAction = new EventHandler<ActionEvent>() {
            public void handle(ActionEvent e) {
                mp.pause();
            }
        };
        final EventHandler<ActionEvent> forwardAction = new EventHandler<ActionEvent>() {
            public void handle(ActionEvent e) {
                Duration currentTime = mp.getCurrentTime();
                mp.seek(Duration.seconds(currentTime.toSeconds() + 5.0));
            }
        };

        mediaBottomBar = HBoxBuilder.create()
                .id("bottom")
                .spacing(0)
                .alignment(Pos.CENTER)
                .children(
                    ButtonBuilder.create()
                        .id("back-button")
                        .text("Back")
                        .onAction(backAction)
                        .build(),
                    ButtonBuilder.create()
                        .id("stop-button")
                        .text("Stop")
                        .onAction(stopAction)
                        .build(),
                    ButtonBuilder.create()
                        .id("play-button")
                        .text("Play")
                        .onAction(playAction)
                        .build(),
                    ButtonBuilder.create()
                        .id("pause-button")
                        .text("Pause")
                        .onAction(pauseAction)
                        .build(),
                    ButtonBuilder.create()
                        .id("forward-button")
                        .text("Forward")
                        .onAction(forwardAction)
                        .build()
                 )
                .build();

        setBottom(mediaBottomBar);
    }

    protected void updateValues() {
        if (playTime != null && timeSlider != null && volumeSlider != null && duration != null) {
            Platform.runLater(new Runnable() {
                public void run() {
                    Duration currentTime = mp.getCurrentTime();
                    playTime.setText(formatTime(currentTime, duration));
                    timeSlider.setDisable(duration.isUnknown());
                    if (!timeSlider.isDisabled() && duration.    greaterThan(Duration.ZERO) && !timeSlider.isValueChanging()) {
                        timeSlider.setValue(currentTime.divide(duration).toMillis() * 100.0);
                    }
                    if (!volumeSlider.isValueChanging()) {
                        volumeSlider.setValue((int) Math.round(mp.getVolume() * 100));
                    }
                }
            });
        }
    }

    private static String formatTime(Duration elapsed, Duration duration) {
        int intElapsed = (int)Math.floor(elapsed.toSeconds());
        int elapsedHours = intElapsed / (60 * 60);
        if (elapsedHours > 0) {
            intElapsed -= elapsedHours * 60 * 60;
        }
        int elapsedMinutes = intElapsed / 60;
        int elapsedSeconds = intElapsed - elapsedHours * 60 * 60 - elapsedMinutes * 60;

        if (duration.greaterThan(Duration.ZERO)) {
            int intDuration = (int)Math.floor(duration.toSeconds());
            int durationHours = intDuration / (60 * 60);
            if (durationHours > 0) {
                intDuration -= durationHours * 60 * 60;
            }
            int durationMinutes = intDuration / 60;
            int durationSeconds = intDuration - durationHours * 60 * 60 - durationMinutes * 60;

            if (durationHours > 0) {
                return String.format("%d:%02d:%02d",
                                     elapsedHours, elapsedMinutes, elapsedSeconds);
            } else {
                return String.format("%02d:%02d",
                                     elapsedMinutes, elapsedSeconds);
            }
        } else {
            if (elapsedHours > 0) {
                return String.format("%d:%02d:%02d",
                                     elapsedHours, elapsedMinutes, elapsedSeconds);
            } else {
                return String.format("%02d:%02d",
                                     elapsedMinutes, elapsedSeconds);
            }
        }
    }
}

@Override public void start(Stage primaryStage) throws Exception {
    init(primaryStage);
    primaryStage.show();
    play();
}
public static void main(String[] args) { launch(args); 
}
} 
```

我对长代码感到抱歉。它只是来自 JavaFX 的示例代码。[你在这里](http://docs.oracle.com/javafx/2/charts/line-chart.htm#CIHGBCFI)和[这里](http://docs.oracle.com/javafx/2/swing/MediaPlayer.java.htm)找到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T21:34:40.323

这应该很容易解决。让我用您展示的图表示例来解释它。

1.  将 的实例添加`JFXPanel`到您的`JFrame`. 在您的示例中，所有组件都添加到 a`Stage`中，这是表示窗口的 JavaFX 类。所以你在这里不需要它。相反，您将要使用的组件添加到 JFXPanel。另请参阅[此处](http://docs.oracle.com/javafx/2/swing/swing-fx-interoperability.htm#CHDIEEJE)（功能`initAndShowGUI`）如何做到这一点。

2.  在`init`示例的函数中，`Scene`创建了 a 以及图表本身。要让图表显示出来，您要做的仅此而已 - 创建一个`Scene`，用内容填充它并将其传递给`JFXPanel`您已经创建的。

3.  只需最少的努力，您就可以运行图表示例：确保它`AdvancedLineChartSample.java`位于您的构建路径中，并且该函数`createChart`可以从您的 JFrame 以某种方式访问​​。然后使用类似于以下代码段的内容将图表添加到您的代码中。

```
    组根=新组（）；
    场景场景=新场景（根）；
    myJFXPanel.setScene(场景);
    root.getChildren().add(createChart());

```

这只是一个非常快速且肮脏的解决方案，无需任何漂亮的代码即可运行您的示例，而且我也没有对其进行测试。但希望它能让你对正在发生的事情有一个基本的了解，以鼓励进一步的实验。根据我自己的经验，我可以告诉您，从这一步开始，JavaFX 2 会带来很多乐趣。

# image - 在 node.js 中绘制图像

> ID：13212731
> 
> 赞同：9
> 
> 时间：2012-11-03T19:33:59.920
> 
> 标签：image, node.js, drawing

我想使用 node.js 创建一个应用程序来创建一个图像。在图像中，我想以编程方式绘制圆、线或任何函数 f(x)（我可以通过在某些坐标处添加点来绘制该函数）。我想知道我应该使用哪些 node.js 模块，或者是否为此创建了一些东西。

换句话说，我需要绘制给定的数学函数并将其导出到图像文件。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-03T22:28:43.597

查看[node-canvas](https://github.com/LearnBoost/node-canvas)，它是 Node.js 的画布实现

源代码示例：

```
var Canvas = require('canvas')
  , canvas = new Canvas(200,200)
  , ctx = canvas.getContext('2d');

ctx.font = '30px Impact';
ctx.rotate(.1);
ctx.fillText("Awesome!", 50, 100);

var te = ctx.measureText('Awesome!');
ctx.strokeStyle = 'rgba(0,0,0,0.5)';
ctx.beginPath();
ctx.lineTo(50, 102);
ctx.lineTo(50 + te.width, 102);
ctx.stroke();

console.log('<img src="' + canvas.toDataURL() + '" />'); 
```

# python - 将随机数量的随机数写入文件并返回它们的平方

> ID：13212736
> 
> 赞同：1
> 
> 时间：2012-11-03T19:34:34.650
> 
> 标签：python, math, file-io, python-3.x

因此，我正在尝试编写随机数量的随机整数（在 to 范围内`0`）`1000`，对这些数字求平方，然后将这些平方作为列表返回。最初，我开始写入我已经创建的特定 txt 文件，但它不能正常工作。我寻找了一些我可以使用的方法，这些方法可能会使事情变得更容易一些，并且我发现了`tempfile.NamedTemporaryFile`我认为可能有用的方法。这是我当前的代码，并提供了注释：

```
# This program calculates the squares of numbers read from a file, using several functions
# reads file- or writes a random number of whole numbers to a file -looping through numbers
# and returns a calculation from (x * x) or (x**2);
# the results are stored in a list and returned.
# Update 1: after errors and logic problems, found Python method tempfile.NamedTemporaryFile: 
# This function operates exactly as TemporaryFile() does, except that the file is guaranteed to   have a visible name in the file system, and creates a temprary file that can be written on and accessed 
# (say, for generating a file with a list of integers that is random every time).

import random, tempfile 

# Writes to a temporary file for a length of random (file_len is >= 1 but <= 100), with random  numbers in the range of 0 - 1000.
def modfile(file_len):
       with tempfile.NamedTemporaryFile(delete = False) as newFile:
            for x in range(file_len):
                 newFile.write(str(random.randint(0, 1000)))
            print(newFile)
return newFile

# Squares random numbers in the file and returns them as a list.
    def squared_num(newFile):
        output_box = list()
        for l in newFile:
            exp = newFile(l) ** 2
            output_box[l] = exp
        print(output_box)
        return output_box

    print("This program reads a file with numbers in it - i.e. prints numbers into a blank file - and returns their conservative squares.")
    file_len = random.randint(1, 100)
    newFile = modfile(file_len)
    output = squared_num(file_name)
    print("The squared numbers are:")
    print(output) 
```

不幸的是，现在我在`modfile`函数的第 15 行遇到了这个错误：`TypeError: 'str' does not support the buffer interface`. 作为一个对 Python 比较陌生的人，有人能解释一下我为什么会这样，以及如何修复它以达到预期的结果吗？谢谢！

编辑：现在修复了代码（非常感谢 unutbu 和 Pedro）！现在：我怎样才能在它们的正方形旁边打印原始文件编号？此外，有什么最小的方法可以从输出的浮点数中删除小数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T19:53:58.133

默认情况下[`tempfile.NamedTemporaryFile`](http://docs.python.org/3.2/library/tempfile.html#tempfile.TemporaryFile)会创建一个二进制文件 ( `mode='w+b'`)。要以文本模式打开文件并能够写入文本字符串（而不是字节字符串），您需要将临时文件创建调用更改为不使用`b`参数`mode`( `mode='w+'`)：

```
tempfile.NamedTemporaryFile(mode='w+', delete=False) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T20:07:36.307

You need to put newlines after each int, lest they all run together creating a huge integer:

```
newFile.write(str(random.randint(0, 1000))+'\n') 
```

(Also set the mode, as explained in PedroRomano's answer):

```
 with tempfile.NamedTemporaryFile(mode = 'w+', delete = False) as newFile: 
```

* * *

modfile returns a *closed* filehandle. You can still get a filename out of it, but you can't read from it. So in `modfile`, just return the filename:

```
 return newFile.name 
```

And in the main part of your program, pass the filename on to the `squared_num` function:

```
filename = modfile(file_len)
output = squared_num(filename) 
```

* * *

Now inside `squared_num` you need to open the file for reading.

```
with open(filename, 'r') as f:
    for l in f:
        exp = float(l)**2       # `l` is a string. Convert to float before squaring
        output_box.append(exp)  # build output_box with append 
```

* * *

Putting it all together:

```
import random, tempfile 

def modfile(file_len):
       with tempfile.NamedTemporaryFile(mode = 'w+', delete = False) as newFile:
            for x in range(file_len):
                 newFile.write(str(random.randint(0, 1000))+'\n')
            print(newFile)
       return newFile.name

# Squares random numbers in the file and returns them as a list.
def squared_num(filename):
    output_box = list()
    with open(filename, 'r') as f:
        for l in f:
            exp = float(l)**2
            output_box.append(exp)
    print(output_box)
    return output_box

print("This program reads a file with numbers in it - i.e. prints numbers into a blank file - and returns their conservative squares.")
file_len = random.randint(1, 100)
filename = modfile(file_len)
output = squared_num(filename)
print("The squared numbers are:")
print(output) 
```

* * *

PS. Don't write lots of code without running it. Write little functions, and test that each works as expected. For example, testing `modfile` would have revealed that all your random numbers were being concatenated. And printing the argument sent to `squared_num` would have shown it was a closed filehandle.

Testing the pieces gives you firm ground to stand on and lets you develop in an organized way.

# html - 对齐复选框和标签

> ID：13212737
> 
> 赞同：5
> 
> 时间：2012-11-03T19:34:38.477
> 
> 标签：html, css, checkbox

我有一个代码如下所示的表单：

```
<div id="right_sidebar">

<form id="your_name" name="your_name" action="#" method="post" style="display: block; "> 
    <fieldset>
        <label for="name">Name</label>
        <input type="text" name="name" id="name" value="">
        <label for="lastname">Last Name</label>
        <input type="text" name="lastname" id="lastname">
                <label for="msg"><a href="#" rel="nofollow" id="msg_toggle">Comment <span class="sp"></span></a></label>
        <textarea name="msg" id="msg" rows="7"></textarea>
        <input type="checkbox" name="agree">
        <label for="agree">Accept the terms</label>
                <button class="blue_button" type="submit">Send</button>
    </fieldset>
    </form>

</div>​ 
```

并且使用以下 CSS 进行样式设置：

```
body {
color: #333;
font: 12px Arial,Helvetica Neue,Helvetica,sans-serif;
}

#right_sidebar {
padding-top: 12px;
width: 190px;
position:relative;
}

form {
background: #EEF4F7;
border: solid red;
border-width: 1px 0;
display: block;
margin-top: 10px;
padding: 10px;
}

form label {
color: #435E66;
    display:block;
font-size: 12px;
    }

form textarea {
border: 1px solid #ABBBBE;
margin-bottom: 10px;
padding: 4px 3px;
width: 160px;
-moz-border-radius: 3px;
border-radius: 3px;
}
form label a {
display: block;
padding-left: 10px;
position: relative;
text-decoration: underline;
}

form label a .sp {
background: #EEF4F7;
height: 0;
left: 0;
position: absolute;
top: 2px;
width: 0;
border-top: 4px solid transparent;
border-bottom: 4px solid transparent;
border-left: 4px solid #333;
}

form button.blue_button {
margin-top: 10px;
vertical-align: top;
}

button.blue_button{
color: white;
font-size: 12px;
height: 22px;
-webkit-border-radius: 3px;
-moz-border-radius: 3px;
border-radius: 3px;
}
button.blue_button {
background-color: #76C8C6;
border: 1px solid #7798B7;
text-shadow: 1px 1px 0px #567C9E;
} 
```

如您所见，复选框位于标签顶部。我希望两者都“在同一条线上”。因此，它看起来像“[] 接受条款”。以及如何使文本与复选框垂直对齐。

我怎么能两者兼得？

你可以在这里看到它：[表单，复选框失败](http://jsfiddle.net/Nwmkk/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-03T19:57:27.987

一种选择是修改`label`复选框后面的元素的样式：

```
​input[type=checkbox] + label {
    display: inline-block;
    margin-left: 0.5em;
    margin-right: 2em;
    line-height: 1em;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Nwmkk/9/)。

然而，这有点脆弱，因为`margin`s 有点随意（并且`margin-right`纯粹是为了将以下内容强制`button`到下一行）。此外，attribute-equals 选择器可能会在旧浏览器中引起问题。

正如在评论中暗示的那样，外星人先生实际上更容易使用这个选择器符号来定位复选框本身：

```
input[type=checkbox] {
    float: left;
    margin-right: 0.4em;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Nwmkk/10/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T19:38:16.113

这是因为标签`display: block`上有。这意味着（没有浮动或黑客）它将声称它是自己的行。
将其更改为`display: inline-block`或离开显示规则，您就完成了。

看到你故意为前两个标签这样做，你应该给`accept the terms`标签一个 id 和 use `form #accepttermslabel {display: inline-block}`。这将覆盖其他规则等，因为它更具体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T19:38:50.940

将您的复选框和文本包装在`<label>`标签内。与您当前的 CSS 一起工作，如本[jsFiddle Demo](http://jsfiddle.net/9Scnn/)中所示。

```
<label for="checkbox">
    ​&lt;input id="checkbox" type="checkbox"> My Label
</label>​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T19:40:37.423

用一点点改变[你](http://jsfiddle.net/Astraldiva/sBRcn/1/)的小提琴。我将复选框嵌套在标签内。

```
 <label for="agree"><input type="checkbox" name="agree">Accept the terms</label> 
```

希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T19:43:58.570

您需要做的就是添加`display: inline`到`label`. 像这样：

```
label[for="agree"] {
  display: inline;
} 
```

您可能还必须添加以下内容以使`Send`按钮保持在自己的行中：

```
button[type="submit"] {
  display: block;
} 
```

这足以让它工作，但你也可以嵌套在`input`里面`label`，像这样：

```
<label for="agree">
  <input type="checkbox" name="agree" />
  Accept the terms
</label> 
```

然而，大多数人避免这样做，因为它在语义上是有限的。我会用第一种方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-02T18:02:31.620

在复选框列表上设置一个类，如下所示：

```
<asp:CheckBoxList ID="chkProject" runat="server" RepeatLayout="Table" RepeatColumns="3" CssClass="FilterCheck"></asp:CheckBoxList> 
```

然后添加以下 CSS：

```
.FilterCheck td {
    white-space:nowrap !important;
} 
```

这可确保标签与复选框保持在同一行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-03T12:00:44.957

我在 bootstrap 3 水平表单中遇到了同样的问题，最后找到了一个尝试错误的解决方案，并且也可以使用普通的 html-css。检查我的[Js Fiddle 演示](http://jsfiddle.net/alvk4r/bpjw0h5f/ "Js 小提琴演示")

```
.remember {
    display: inline-block;
}
.remember input {
    position: relative;
    top: 2px;
}
```

```
<div>
    <label class="remember" for="remember_check">
        <input type="checkbox" id="remember_check" /> Remember me
    </label>
</div>
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-18T09:05:07.103

尝试过[flex 属性](http://www.w3schools.com/cssref/css3_pr_flex.asp)？这是添加[了 flex 的示例](https://jsfiddle.net/Nwmkk/371/)：

1.  HTML

    ```
    <div id="right_sidebar">
    <form id="send_friend" name="send_friend" action="#" method="post" style="display: block; ">
    <fieldset>
        <label for="from">From</label>
        <input type="text" name="from" id="from" value="">
        <label for="to">To</label>
        <input type="text" name="to" id="to">
        <label for="msg"><a href="#" rel="nofollow" id="msg_toggle">Comment <span class="sp"></span></a>
        </label>
        <textarea name="msg" id="msg" rows="7"></textarea>
        <div class="row">
            <div class="cell" float="left">
                <input type="checkbox" name="agree">
            </div>
            <div class="cell" float="right" text-align="left">
                <label for="agree">Accept the terms</label>
            </div>
        </div>
        <button class="blue_button" type="submit">Send</button>
    </fieldset>
    </form>
    </div> 
    ```

2.  CSS

    ```
    body {
        color: #333;
        font: 12px Arial, Helvetica Neue, Helvetica, sans-serif;
    }
    [class="row"] {
        display: flex;
        flex-flow: row wrap;
        margin: 2 auto;
    }
    [class="cell"] {
        padding: 0 2px;
    }
    #right_sidebar {
        padding-top: 12px;
        width: 190px;
        position:relative;
    }
    form {
        background: #EEF4F7;
        border: solid red;
        border-width: 1px 0;
        display: block;
        margin-top: 10px;
        padding: 10px;
    }
    form label {
        color: #435E66;
        display:block;
        font-size: 12px;
    }
    form textarea {
        border: 1px solid #ABBBBE;
        margin-bottom: 10px;
        padding: 4px 3px;
        width: 160px;
        -moz-border-radius: 3px;
        border-radius: 3px;
    }
    form label a {
        display: block;
        padding-left: 10px;
        position: relative;
        text-decoration: underline;
    }
    form label a .sp {
        background: #EEF4F7;
        height: 0;
        left: 0;
        position: absolute;
        top: 2px;
        width: 0;
        border-top: 4px solid transparent;
        border-bottom: 4px solid transparent;
        border-left: 4px solid #333;
    }
    form button.blue_button {
        margin-top: 10px;
        vertical-align: top;
    }
    button.blue_button {
        color: white;
        font-size: 12px;
        height: 22px;
        -webkit-border-radius: 3px;
        -moz-border-radius: 3px;
        border-radius: 3px;
    }
    button.blue_button {
        background-color: #76C8C6;
        border: 1px solid #7798B7;
        text-shadow: 1px 1px 0px #567C9E;
    } 
    ```

例如，Flex 允许使用 div 进行表格样式控制。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-29T10:16:08.403

我发现使复选框和标签对齐的最简单方法是：

```
 .aligned {
        vertical-align: middle;
    }
```

```
 <div>
        <label for="check">
            <input class="aligned" type="checkbox" id="check" /> align me 
        </label>
    </div>
    <div>
        <input class="aligned" type="checkbox" />
        <label>align me too</label>
    </div>
    <div>
        <input type="checkbox" />
        <label>dont align me</label>
    </div>
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-10-26T16:05:56.327

我知道这篇文章很旧，但我想帮助那些将来会看到这个的人。答案很简单。

```
<input type="checkbox" name="accept_terms_and_conditions" value="true" />
<label id="margin-bottom:8px;vertical-align:middle;">I Agree</label>
```

# android - Android相机设置图片

> ID：13212738
> 
> 赞同：0
> 
> 时间：2012-11-03T19:34:40.440
> 
> 标签：android, camera

我知道有人问过这个问题，但我一直在互联网上寻找解决我问题的正确方法。我使用相机意图，然后尝试从相机获取图像并将其设置为图像视图。一切都很好，直到是时候回去设置图像了。我可以拍照，但是当我单击确定时，它会重新启动应用程序而没有图像。关于如何让它实际捕获图像而不仅仅是重新启动的任何想法？

```
public class Submit extends Activity {
    private static final int CAMERA_REQUEST = 1888;
    private ImageView imageView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.submit);
        this.imageView = (ImageView) this.findViewById(R.id.imageView);
        Button photoButton = (Button) this.findViewById(R.id.photoButton);
        photoButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                startActivityForResult(cameraIntent, CAMERA_REQUEST);
            }
        });
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK) {
            Bitmap photo = (Bitmap) data.getExtras().get("data");
            imageView.setImageBitmap(photo);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T10:15:45.830

将您的 CAMERA_REQUEST 更改为 1337。它对我有用。

编辑：现在我检查了一下，它也适用于 1888 代码。

你的代码对我来说很好。

# teamcity - 如何在 TeamCity 构建过程中集成 MSTest

> ID：13212748
> 
> 赞同：9
> 
> 时间：2012-11-03T19:35:26.430
> 
> 标签：teamcity, mstest

如何在 TeamCity 中运行 MSTest 作为构建过程的一部分？有哪些陷阱？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-03T19:35:26.430

此答案专门针对 Windows 上的 TeamCity 7.1，但可能适用于其他环境。

1.  在您的 TeamCity 构建配置中，在“*常规设置”*页面上
    1.  **工件路径**：`Artifacts\MSTest => MSTest`
2.  创建一个新的命令行构建步骤
    1.  **自定义脚本**：`if not exist Artifacts\MSTest mkdir Artifacts\MSTest`
3.  创建一个新的 MSTestbuild 步骤
    1.  **列出程序集文件**：`**\bin\**\*.Tests.dll`
    2.  **结果文件**：`Artifacts\MSTest\testResults.trx`

## 陷阱

### 在指定要运行的测试程序集时使用通配符

在指定要在 MSTest 构建步骤中运行的测试程序集时，可以使用通配符，但不清楚它们的具体工作方式。已提交错误[报告。](http://youtrack.jetbrains.com/issue/TW-24220)

### 测试失败时构建过程不会停止

请注意，如果您的某些测试失败并且构建被标记为失败，则 MSTest 构建步骤本身不会失败。如果您在 MSTest 构建步骤之后有构建步骤，并且如果您有测试失败而不想运行，这会导致问题（例如，生成安装程序或您知道有错误的构建文档可能没有意义）。该问题有望在更高版本的 TeamCity 中得到[解决。](http://youtrack.jetbrains.com/issue/TW-17002)

如果您希望在测试失败时停止构建过程，您可以创建一个新的构建步骤，该步骤使用[TeamCity REST API](http://confluence.jetbrains.net/display/TW/REST+API+Plugin)来检测当前构建是否已被标记为失败（请记住，当测试失败时，构建步骤不会标记为失败，但构建是），然后显式地使当前构建步骤失败。例子：

1.  创建一个新的*Powershell*构建步骤
    1.  **脚本**：*源代码*
    2.  **源代码**：见下面的脚本
2.  确保您的新创建的构建步骤在您的 MSTest 构建步骤之后立即出现
3.  确保在此之后的每个构建步骤都将**执行步骤**设置为*仅在所有先前步骤都成功的情况下*

脚本：

```
$xml = [xml](curl --request GET http://USERNAME:PASSWORD@HOSTNAME/httpAuth/app/rest/builds/%teamcity.build.id%)
Microsoft.PowerShell.Utility\Select-Xml $xml -XPath "/build" | % { $status = $_.Node.status }
if ($status -eq "FAILURE") {
    throw "Failing build step on purpose"
} 
```

# razor - webgrid 列格式

> ID：13212759
> 
> 赞同：2
> 
> 时间：2012-11-03T19:37:12.587
> 
> 标签：razor, webgrid

我从一个示例应用程序中看到了这行代码：

```
grid.Column(format: @<a href="~/EditMovie?id=@item.ID">Edit</a>) 
```

完整的片段如下所示：

```
@grid.GetHtml(
   tableStyle: "grid",
   headerStyle: "head",
   alternatingRowStyle: "alt",
   columns: grid.Columns(
      grid.Column(format: @<a href="~/EditMovie?id=@item.ID">Edit</a>),
      grid.Column("Title"),
      grid.Column("Genre"),
      grid.Column("Year")
  )
) 
```

它应该呈现带有编辑超链接的列。

我是 Razor 和 webgrid 的新手。有人可以解释一下那行代码是如何工作的。代码在 C# 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:25:08.717

```
grid.Column(format: @<text><a href="@Url.Action("EditMovie","ControllerName",new { id=@item.ID })">Edit</a></text>) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-07T08:55:04.017

```
grid.Column(header: "Edit", format: @<text><a href="@Url.Action("Edit", "Controllername", new {ID = item.CompanyID })" ><img src="../../../../Content/images/edit.png" alt="" style="border:none;" /></a></text>, style: "colOperation"), 
```

# python - ImageOps.fit 模糊了我的图像

> ID：13212762
> 
> 赞同：3
> 
> 时间：2012-11-03T19:37:30.600
> 
> 标签：python, image, python-imaging-library

我正在使用 ImageOps 来调整大小并居中裁剪上传的头像图像。问题是，当我尝试上传已经是所需大小的图像时，上传的图像会变得模糊。

相关代码：

```
avatar_size = (59,59)
#resized_im = im.resize(avatar_size, Image.ANTIALIAS)   #This works! But doesn't crop.
formatted_im = ImageOps.fit(im, avatar_size, Image.ANTIALIAS, centering=(0.5,0.5))     
formatted_im.save('foo.jpg', 'JPEG', quality=95) 
```

所以，当我上传一张 59x59px 的图片时，服务器上的上传结果是模糊的。尝试了谷歌搜索、阅读文档和实验，但无法弄清楚这一点。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T19:50:17.220

可能是抗锯齿导致模糊。试试如何：

```
avatar_size = (59,59)
method = Image.NEAREST if im.size == avatar_size else Image.ANTIALIAS
formatted_im = ImageOps.fit(im, avatar_size, method = method, centering = (0.5,0.5)) 
formatted_im.save('foo.jpg', 'JPEG', quality=95) 
```

# android - 为什么 Android WebView 在 Horizo ntalScrollView 上闪烁？

> ID：13212764
> 
> 赞同：2
> 
> 时间：2012-11-03T19:37:36.337
> 
> 标签：android, webview, android-listview, android-webview, horizontalscrollview

我必须编写具有可垂直滚动的磁贴行的应用程序，并且所有这些行都是可水平滚动的。每个图块都是 html+javascript 内容。所以我在Horizo​​ntalScrollView 和ListView 的BaseAdapter Iam 绑定WebView 的getView 方法中添加了多个ListView。这是简单的方案：

```
HorizintalScrollView
  LinearLayout
      ListView1 -   WebView1 WebView2.....WebView6    //getView {    WebView.LoadUrl(html)  }  //using with ViewHolder and convertView asking for null
       ...
      ListViewN - WebView....WebView
   /LinearLayout
/HorizontalScrollview 
```

每个 WebView 都在 linearLayout 之内。所以这一切看起来都很好并且工作正常，但是当 ListView 每个包含超过 5 个 WebView（300 x 300 dip）并且在 Horizo​​ntalScrollView 有一个以上 ListView 时，所有 WebView 在我尝试滚动时开始闪烁（如重新加载但没有 getView）水平。

但是当我使用一个 ListView 时一切正常。从某些时候应用程序崩溃。那么是什么原因呢？？（在每个 WebViw 中，我都展示了简单的交互式高亮 html+javascripts 图表）。我正在尝试使用 ICS 4.0 的 ASUS 平板电脑 我们尝试在 iOS 上通过 ScrollView 上的 30 个 WebView 执行此操作，没有任何问题，一切正常！请解释为什么闪烁和崩溃的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:34:32.677

我也有同样的问题。我试过这在更大程度上解决了我的问题

```
public View getView(final int position, View convertView,
            ViewGroup parent) {

        final ViewHolder holder;
        View vi = convertView;
        if (convertView == null) {
            vi = inflater.inflate(R.layout.book_reader_list_style, parent,
                    false);
            holder = new ViewHolder();

            holder.webView = (WebView) vi.findViewById(R.id.webView1);

            holder.webView.setInitialScale(scaleWebView);
            WebSettings webSettings = holder.webView.getSettings();
            holder.webView.setVerticalScrollBarEnabled(false);
            holder.webView.setHorizontalScrollBarEnabled(false);
            holder.webView.setVisibility(View.VISIBLE);
            webSettings.setLoadWithOverviewMode(true);
            webSettings.setUseWideViewPort(false);

            vi.setTag(holder);
        } else {

            holder = (ViewHolder) vi.getTag();
        }
        holder.webView.loadUrl((URLs.get(position)));

        return vi;

    } 
```

# android - how to check sqlite database tables on the device?

> ID：13212770
> 
> 赞同：4
> 
> 时间：2012-11-03T19:38:17.480
> 
> 标签：android, android-sqlite

I have developed App which creates multiple tables , but I want to check those tables. I know there is a way using adb shell sqlite3 command but that doesn't work for devices... It works fine with emulator. I am using device because its faster than emulator for testing. So my question is, is there any way to check the database table that is created in device using any eclipse plugin or any sqlite database manager?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:56:26.247

if you're rooted, you can pull your database file out of data/data/com.*yourapp.title*/databases and then view it in an sqlite database manager such as: [SQLite Database Browser](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCEQFjAA&url=http://sqlitebrowser.sourceforge.net/&ei=kHaVUMW7BaS80AHW5YGwCw&usg=AFQjCNEpSGpm_w-xH2KKANmcTQQhWfoYJw&sig2=miTLkobggDnfrG-huUM8oQ)

if you're not rooted, you can't view the innards of the database but perhaps you can have a cursor adapter linked to a listview that will show the contents of a database table or something of the sort.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T09:37:57.210

1.  build your application in debug mode.
2.  in the shell, write `run-as your.package.name`. by this your are switchin to the UID of your app (gaining access to your application data folder).
3.  `cat /data/data/your.package.name/databases/database_name > /sdcard/database_name`. this copies your database file to the sdcard.

you can now browse your database freely on your sdcard.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T09:42:32.327

There are sqlite applications over difference platform (Windows, Mac OS X, etc).

I think it a good idea to `adb pull` the db file to your computer and use your favorite sqlite application to check the db file.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-08T15:21:42.713

many devices don't have external memory support instead they have big internal memory, but it will not cause any problem writing data using external memory code as these devices have different privacy policy related to access to internal data or mobile data. You might have to use file explorer app to view the files in such devices with no external memory support. With the help of file explorer app, you will be able to see the application directory or file whichever you have created for your app.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-29T16:28:35.117

I figured out a simple way to debug my database without rooting or copying the database. I just installed a simple and free SQlite manager in my device and I added to static final strings into my SQLLiteOpenHelper class:

```
private static final String DATABASE_NAME = "myDatabaseName.db";
private static final String DATABASE_NAME_DEBUG_PATH = "/mnt/sdcard/"; 
```

Then, I set the private constructor like this:

```
//Defaut constructor.
    private DatabaseHelper(Context context) {
        //Allow database access without rooting the device.
        super(context, (BuildConfig.BUILD_TYPE == "debug") ? DATABASE_NAME_DEBUG_PATH + DATABASE_NAME : DATABASE_NAME, null, DB_VERSION);
    } 
```

This way your SQlite manager will find your database while you debug because it will be located in your sd and you will be able to see it with no problems and no rooting.

# javascript - 匹配字符串中的数字但不匹配百分比的正则表达式

> ID：13212771
> 
> 赞同：7
> 
> 时间：2012-11-03T19:38:18.483
> 
> 标签：javascript, regex

我需要知道是否存在用于测试字符串中是否存在数字的正则表达式：

*   火柴`Lorem 20 Ipsum`
*   火柴`Lorem 2,5 Ipsum`
*   火柴`Lorem 20.5 Ipsum`
*   不匹配**_**`Lorem 2% Ipsum`
*   不匹配**_**`Lorem 20.5% Ipsum`
*   不匹配**_**`Lorem 20,5% Ipsum`
*   不匹配**_**`Lorem 2 percent Ipsum`
*   不匹配**_**`Lorem 20.5 percent Ipsum`
*   不匹配**_**`Lorem 20,5 percent Ipsum`
*   火柴`Lorem 20 Ipsum 2% dolor`
*   火柴`Lorem 2,5 Ipsum 20.5% dolor`
*   火柴`Lorem 20.5 Ipsum 20,5% dolor`

也就是说，一个正则表达式可以告诉我字符串中是否有一个或多个数字，但不是百分比值。

我已经尝试过`/[0-9\.,]+[^%]/`，但这似乎不起作用，我认为因为*数字然后不是百分号*也匹配`20`字符串中的`20%`。此外，除了字符之外，我不知道如何分辨*整个`percent`字符串*`%`。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-03T19:45:57.480

这将满足您的需要：

```
\b                     -- word boundary
\d+                    -- one or more digits
(?:\.\d+)?             -- optionally followed by a period and one or more digits
\b                     -- word boundary
\s+                    -- one or more spaces
(?!%|percent)          -- NOT followed by a % or the word 'percent' 
```

- 编辑 -

这里的重点是在最后一行使用“负前瞻”，如果在数字和一个或多个空格之后出现任何百分号或文字“百分比”，则会导致匹配失败。JavaScript RegExps 中负前瞻的其他用途可以在[负前瞻正则表达式中找到](https://stackoverflow.com/questions/6851921/negative-lookahead-regular-expression)

--2ND EDIT-- 祝贺 Enrico 解决了最一般的情况，但尽管他的以下解决方案是正确的，但它包含几个无关的运算符。这是最简洁的解决方案。

```
(                         -- start capture
  \d+                     -- one or more digits
  (?:[\.,]\d+)?           -- optional period or comma followed by one or more digits
  \b                      -- word boundary
  (?!                     -- start negative lookahead
    (?:[\.,]\d+)          -- must not be followed by period or comma plus digits
  |                       --    or
    (?:                   -- start option group
      \s?%                -- optional space plus percent sign
    |                     --   or
      \spercent           -- required space and literal 'percent'
    )                     -- end option group
  )                       -- end negative lookahead
)                         -- end capture group 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-03T20:42:46.447

这是执行此操作的可靠方法，它还可以提取数字。

```
(\b\d+(?:[\.,]\d+)?\b(?!(?:[\.,]\d+)|(?:\s*(?:%|percent)))) 
```

它类似于 Rob 的正则表达式，但它应该适用于所有情况。

```
(                          -- capturing block
  \b                       -- word boundary
  \d+                      -- one or more digits
  (?:[\.,]\d+)?            -- optionally followed by a period or a comma
                              and one or more digits
  \b                       -- word boundary
  (?!                      -- not followed by
    (?:[\.,]\d+)           -- a period or a comma and one or more digits
                              [that is the trick]
    |                      -- or
    (?:\s*(?:%|percent))   -- zero or more spaces and the % sign or 'percent'
  )
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T20:05:46.440

使用[否定前瞻](http://www.regular-expressions.info/lookaround.html)而不是否定字符类：

```
/\d+(?:[,.]\d+)?(?!\s*(?:percent|%))/ 
```

# vhdl - 应该在哪里声明一个常量？

> ID：13212774
> 
> 赞同：2
> 
> 时间：2012-11-03T19:38:22.270
> 
> 标签：vhdl

我想创建一个具有两个常量的实体。我希望声明在实体声明中而不是在架构中，但我需要在架构中使用常量。

*   如果我在实体声明中定义它们，它们会在架构中被知道吗？
*   当我将实体用作组件时，我是否需要再次重新定义常量，或者我可以只写端口吗？
*   我应该注意的任何其他差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T23:52:03.617

要回答您的问题：

1.  实体中的常量在体系结构中可用。
2.  组件没有（或不需要）常量。
3.  实体中的常量适用于所有架构，而不仅仅是其中一个。

但正如查尔斯在他的回答中所说，如果它们实际上是您有时想要*更改*的“常量”，您可能需要考虑使用泛型而不是常量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T22:05:34.897

你知道泛型吗？看起来他们可能是你想要的。

# php - ajax调用时不执行Require_once

> ID：13212777
> 
> 赞同：1
> 
> 时间：2012-11-03T19:38:26.540
> 
> 标签：php, ajax, require-once

这是我的“index.php”文件（其中的一部分）：

```
<?php

// Require every .php file inside "phpClasses" folder
foreach (glob("phpScripts/*.php") as $filename) {
require_once $filename;
}

// Create the $db object
$db = Database::obtain(DB_SERVER, DB_USER, DB_PASS, DB_DATABASE); 

// Connect to the database
$db->connect();

// Instantiate the "language" and "databaseQuery" classes
$lang = new language();     
$dbQuery = new databaseQuery();     

// Detect if the laguage has changed from the user and apply the new "current language"
if(isset($_GET["change_lang"])) {
    $change_lang = $_GET["change_lang"];
    $cur_lang = $change_lang;
} else {
    $cur_lang = $lang->getCurLang();
}
?>
<head>
...
</head>
<body>        
    <div id="cur_content" class="temp_content" data-tempPos="0">
    <?php 
        include 'pages/home.php'; 
    ?>
    </div>  <!-- #cur_content -->
</body> 
```

在#cur_content 我通过ajax 调用注入'blog.php'：

'博客.php'：

```
<div id="blog_main_content" class="temp_content">
    <?php
        include "blog_list.php";
    ?>
</div> 
```

..在里面，我包括'blog_list.php'：

```
foreach (glob("phpScripts/*.php") as $filename) {
    require_once $filename;
}

// Create the $db object
$db = Database::obtain(DB_SERVER, DB_USER, DB_PASS, DB_DATABASE); 

// Connect to the database
$db->connect();

$dbQuery = new databaseQuery();     

// Get the language from loader.php
$cur_lang = "'".$_SESSION['language']."'";

$dbQuery->getArticleList($cur_lang);

 ?> 
```

在#blog_main_content div 中，我通过ajax 调用注入'articleLoader.php' 并且工作正常。'blog_list.php' 第一次显示得很好。当用户通过 ajax 调用返回到“blog_list.php”时，我收到以下错误：

致命错误：第 8 行的 C:\wamp\www\kapantzakis_2.14\pages\blog_list.php 中找不到类“数据库”

我认为当 ajax 调用这个文件时，php 不会在 'blg_list.php' 中执行 require_once。

不知道我解释的好不好。

谢谢你的帮助！

编辑#1

阿贾克斯调用：

```
// Perform the ajax call
        function getAjaxPage(method, content, currentOffset) {

            var temp_content = $('.temp_content');                      
                var temp_content_last = temp_content.filter(':last');

            var blog_main_content = $('#blog_main_content');                    
                var blog_main_content_first = blog_main_content.filter(':first');

                // Insert the html data in to the first or last div depending on the movement of the page
                if (method == 'next') {
                    var insert_div = temp_content_last;
                } else if (method == 'prev') {
                    var insert_div = blog_main_content_first;
                }

                // Get article or the article list
                if (content == 'article') {
                    var page = 'articleLoader.php';
                } else if (content == 'article_list') {
                    var page = 'pages/blog_list.php';                       
                }
                /*
                var lang = getCurLang();
                var data = 'lang=' + lang + '&art_id=' + art_id;*/

                var tags_wrapper = $('#tags_wrapper');

            $.ajax({
                url: page,  
                type: "GET",    
                /*data: data,*/
                cache: false,
                success: function (html) {                          
                    insert_div.html(html)
                        .queue(function() {
                            var return_to_list = $('#return_to_list');                              
                            return_to_list.attr('data-offsetTop', currentOffset);   
                            returnTopOffset();
                            if (content == 'article') {
                                tags_wrapper.fadeIn(800);
                            } else if (content == 'article_list') {
                                tags_wrapper.hide();
                            }                               
                            $(this).dequeue();
                        });
                }       
            });
            return $(this);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T20:03:12.870

我假设您的文件夹结构如下所示：

```
kapantzakis_2.14/
  articleLoader.php
  blog.php
  blog_list.php
  index.php
  pages/
    home.php
  phpScripts/
    Database.php 
```

您的 AJAX-Call`pages/blog_list.php`直接请求，但在您的问题文本中，它似乎`blog_list.php`位于您的根目录 ( `kapantzakis_2.14`) 中。

您得到的错误 ([...] `'Database' not found in C:\wamp\www\kapantzakis_2.14\pages\blog_list.php`[...]) 显示`blog_list.php`位于`pages`-folder 中。您的 -call`glob`找不到`phpScripts`在`pages`-Folder 中调用的目录，因此`required_once`调用永远不会被执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T20:02:00.240

```
// add this line on the top of your script
ob_start();

// add this line on the bottom of your script
$errors = ob_get_contents();
ob_end_clean();
$fopen = fopen('errors.txt', 'w+');
fwrite($fopen, $errors);
fclose($fopen); 
```

你可以得到所有的错误

# c - 棘手的递归函数 007

> ID：13212780
> 
> 赞同：4
> 
> 时间：2012-11-03T19:38:47.213
> 
> 标签：c, recursion

Elo，我从旧考试中得到了这个代码片段。这很棘手，我需要一些帮助来弄清楚它是如何打印“007”的。

```
#include <stdio.h>
/* Desmond Llewelyns */
int M(int Q);
int main(void)
 {

   M(9);
   return 0;
 }
int M(int Q)
 {
   if(Q>1) 
     if(M(Q-1)==0)
       printf("%03d\n", Q);

   return Q-6;
 } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T19:41:59.853

这很简单。

`M(Q-1)`仅当返回时才会打印数字`0`，并且当值为`Q`is时会发生这种情况`7`。

关于零，这是因为您要求 printf 在开头打印零的 3 个位置打印数字。[在这里](http://www.codingunit.com/printf-format-specifiers-format-conversions-and-formatted-output)`printf("%03d\n", Q);`阅读更多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T19:43:21.223

当 Q 等于 7 时，M(Q-1) 返回 0

printf("%03d\n", Q) 将打印 7 到 3 个位置，结果为 007

# ios - iOS App Store 中 Facebook Like 按钮的链接是什么？

> ID：13212782
> 
> 赞同：3
> 
> 时间：2012-11-03T19:38:53.180
> 
> 标签：ios, facebook, app-store, facebook-like, itunes

如果您在 iOS 设备上访问 Apple App Store，则每个应用程序的 Review 选项卡下都有一个 Facebook Like 按钮。

有没有办法生成或知道这个链接是什么？那个按钮是链接到 Facebook 应用程序的吗？如果您尚未创建与您的 iTunes 应用程序关联的 Facebook 应用程序怎么办？

我在 Facebook 上查看过，最近的活动记录了以下内容：

```
 "Joe likes <My iOS App> on <iOS>"  
Where <My iOS App> is a link to the app on iTunes, 
and <iOS> is a link to the iOS 6 page on apple.com. 
```

无论如何，有没有喜欢或不喜欢或不喜欢 iTunes 应用程序以编程方式或来自 Facebook，而无需实际从 iTunes 进行操作？

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-20T20:31:59.613

它是您应用程序的官方 iTunes 链接，已编入索引，例如：

> [https://itunes.apple.com/en/app/#app-name#/id#app-id#](https://itunes.apple.com/en/app/#app-name#/id#app-id#)

# html - 如何在浮动元素上以百分比设置水平填充？

> ID：13212784
> 
> 赞同：0
> 
> 时间：2012-11-03T19:38:58.287
> 
> 标签：html, css, css-float

我有这个菜单，里面有很多项目：

```
<ul>
  <li>Item 1</li>
  <li>Item 2</li>
  <li>Item 3</li>
</ul> 
```

这些项目应该彼此相邻出现，这可以在 CSS 中轻松实现，如下所示：

```
li {
  float: left;
} 
```

现在的问题是我希望在浏览器窗口发生变化时调整项目的水平填充（“响应式设计”）。所以我尝试了这个：

```
li {
  float: left;
  padding: 0 5%; /* does NOT work */
  padding: 0 10px; /* does work */
} 
```

但是，这不起作用。当我使用百分比时，根本不会对列表项应用任何填充！

我怎样才能让它工作？

父元素也正确设置：

```
ul {
  width: 960px;
} 
```

有任何想法吗？

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T20:00:33.347

使用 jquery 来操作`<li>`元素的填充。还给他们一个班级，您将通过它来选择他们。

也许试试这个：http: [//jsfiddle.net/infoman/tUKPf/](http://jsfiddle.net/infoman/tUKPf/)

**jQuery代码**

```
/* just a show case */
$('.dyn').live('click', function() {
   var w = $(window).width(),
   paddingRight = w / 100 * 5; 
   $('.dyn').css('padding-right', paddingRight);
});

/* use this to fire the css changes on window reload */
/*
$(window).resize(function() {
   var w = $(window).width(),
   paddingRight = w / 100 * 5; //
   $('.dyn').css('padding-right', paddingRight);
});
*/ 
```

**html代码**

```
<ul>
  <li class="dyn">Item 1</li>
  <li class="dyn">Item 2</li>
  <li class="dyn">Item 3</li>
</ul>​ 
```

**CSS 代码**

```
ul {
  width: 960px;
}

li {
  float: left;
}

​ 
```

​</p>

# coordinates - 在 OpenStreetMap 中获取有关街道的所有信息

> ID：13212787
> 
> 赞同：1
> 
> 时间：2012-11-03T19:39:29.260
> 
> 标签：coordinates, openstreetmap, street-address

我一直在玩 API、XAPI 和 OSM 的 Overpass。但是我无法获得一些需要的信息：获取一条街道的所有信息节点。

这里是一个例子： [http ://www.openstreetmap.org/browse/way/5671291](http://www.openstreetmap.org/browse/way/5671291)

这提供了一种名为“Watts Street”（在纽约市）的方式的信息，但它不是全部街道，只是其中的一部分。

另一部分： [http ://www.openstreetmap.org/browse/way/46116390](http://www.openstreetmap.org/browse/way/46116390)

这发生在一些街道上，这些街道以不同的 OSM“方式”分裂

有没有办法让同一条街道的所有节点有多个“一种方式”来获得该街道的所有坐标？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T22:05:07.303

您可以尝试查询街道名称并获取具有相同名称的所有方式。然后你可以获取所有单独的节点，你应该有你想要的。我知道 Nominatim 做了那个映射，但我不熟悉你提到的 api。

另一种（可能更麻烦）的方法是查看你的方式的节点，看看它们以什么方式参与。如果你举个例子，节点 42426060 是你正在寻找的两种方式的一部分。如果您可以查询该节点的方式并匹配它们（根据名称），您可以自己合并它们。

# java - GWT：用多个模块组织 WAR

> ID：13212792
> 
> 赞同：0
> 
> 时间：2012-11-03T19:39:55.213
> 
> 标签：java, gwt, servlets, war

我正在尝试创建一个具有两个模块的 GWT 应用程序：

*   `WebModule`- 包含所有看似“公共网站”的代码；和
*   `AppModule`-出于安全和性能原因，仅在用户登录后（通过`LoginScreen`内部的）加载`WebModule`

我不确定如何打包 WAR。对于一个模块（包含一个入口点），正常的结构似乎是这样的：

```
src/
    com.myapp
        MyApp.gwt.xml
    com.myapp.client
        MyApp.java
war/
    WEB-INF/
        lib/
        web.xml
    MyApp.css
    MyApp.html 
```

但是对于 2+ 个模块，我很困惑我可以/应该在哪里放置各种文件。我想做这样的事情：

```
src/
    com.myapp
        WebModule.gwt.xml
        AppModule.gwt.xml
    com.myapp.client.modules
        WebModule.java (implements EntryPoint)
        AppModule.java (implements EntryPoint)
war/
    WEB-INF/
        lib/
        web.xml
    css/
        web-module.css
        app-module.css
    html/
        web-module.html
        app-module.html 
```

但我不确定这是否是“合法”（GWT 和 Java EE 标准）结构，而且我也不确定如何将“MyApp”与“WebModule”链接起来，以便这`WebModule`是下载时下载的第一个模块用户去`http://www.myapp.com`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T20:31:53.030

这是正确的结构。不过，您不必为 HTML 和 CSS 创建单独的文件夹，因为每个文件夹中只有两个文件。

您可以在 web.xml 文件中指定当用户访问您的域时首先加载哪个文件：

```
<welcome-file-list>
    <welcome-file>web-module.html</welcome-file>
</welcome-file-list> 
```

# assembly - sin() 的总和结果为 asm(x87)

> ID：13212795
> 
> 赞同：1
> 
> 时间：2012-11-03T19:40:13.027
> 
> 标签：assembly, x87

我需要计算`y(i) = sin(5*i)`度数的总和，`i`每次迭代都会增加。我需要在总和大于 3 之前计算总和，并找出`i`总和何时更大。

使用下面的代码，我得到一个无限循环：

```
int main() {

float Sum=0;
long i=0;
long A=5;
long B=180;
int C=3;

 _asm{
   finit
 m1:
   inc i
   fldpi    ; load PI
   fmul i   ; PI * i 
   fmul A   ; PI * i * 5
   fdiv B   ; PI * i * 5 / 180 (value in degree)
   fsin ; sin(PI * i * 5 / 180)
   fadd Sum ; counter all lopps result
   ficom C  ; check if lower than 3 go to m1 
   jg m1
 }  
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T02:13:55.033

那里有几个问题。

1.  `FMUL`需要浮点参数，但您通过`long`.
2.  `FICOM`仅设置 FPU 标志，您必须将它们移动到 CPU 或使用`FCOMI`.
3.  `JG`正在检查错误的标志，您需要检查进位标志。
4.  您的代码使浮点堆栈失衡。

奖励：由于 5*PI/180 是常数，您可以预先计算。

你可以使用一些这样的代码（调整你的编译器的语法，这是为 gnu 汇编程序）：

```
.intel_syntax noprefix
.globl main
main:
    sub esp, 16               # allocate space for i, sum and fmt
    mov dword ptr [esp+4], -1 # i
    fild dword ptr [limit]    # limit
    fldz                      # sum
1:
    inc dword ptr [esp+4]     # i += 1
    fild dword ptr [esp+4]    # i
    fmul qword ptr [factor]   # i * factor
    fsin
    faddp                     # add to sum
    fcomi st, st(1)           # check if below limit
    jb 1b
    fstp qword ptr [esp+8]    # store on stack for printf
    fstp st(0)                # remove limit from fpu stack
    mov dword ptr [esp], offset fmt
    call printf
    add esp, 16               # clean up stack
    xor eax, eax              # return value
    ret

.data
factor: .double .08726646259971647884 # 5 * PI / 180
limit: .int 3
fmt: .string "i=%d sum=%g\n" 
```

[见操作。](http://ideone.com/dctMdn)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T06:08:44.937

Maybe it's offtopic, but using simple trigonometric identities, you can calculate answer without any loops for arbitrary sum value with a simple formula:

```
i=ceil(acos(cos(t/2)-2*result_sum*sin(t/2))/t-0.5) 
```

where t is your step angle (5 degrees), result_sum - needed acumulated sum of consecutive sines (=3 in your case)

# php - 让用户更改自己的密码？

> ID：13212797
> 
> 赞同：2
> 
> 时间：2012-11-03T19:40:23.740
> 
> 标签：php, sql, passwords

我刚开始学习 php 和 sql，所以请放轻松，我知道我在某些地方会出错。我正在尝试允许用户登录并能够更改他们的密码。我尝试了一个我认为应该可以工作的脚本，但我想我做错了什么，因为它只会链接到 php 函数页面，根本不会更改密码。这是我的脚本：

HTML 表单：

```
<form method="POST" action="includes/changepassword.php">
<p><input type="password" name="oldpasswd" id="oldpasswd" maxlength="30" placeholder="Old Password"></p>
<p><input type="password" name="newpsswd1" id="newpsswd1" maxlength="30" placeholder="New Password"></p>
<p><input type="password" name="newpsswd2" id="newpsswd2"maxlength="30" placeholder="Confirm Password"></p>
<input type="submit" name="submit" id="submit" value="change password"> 
```

更改密码.php 文件：

```
 <?php
require_once("session.php"); 
require_once("functions.php");
require('_config/connection.php');
function changepassword ($oldpasswd, $newpasswd1, $newpasswd2) {
    /*
     * RETURNS
     * 0 - if password changed
     * 1 - if new passwords are not equal
     * 2 - if user authentification problems
     */

        $oldpasswd = ($_POST['oldpasswd']);
        $newpasswd1 = ($_POST['newpasswd1']);
        $newpasswd1 = ($_POST['newpasswd2']);

    if ($newpasswd1 != $newpasswd2) {
        return 1;
    }

    //check user logged in changes OWN passwd
    $sql = "SELECT password FROM ptb_users WHERE id = ".$_SESSION['user_id'];
    $result = mysql_query($sql)or die('User not found: ' . mysql_error());

    if (md5($oldpasswd)==$result) { 

        //Encrypt $emailpassword in MD5 format for the database
        $md5_np=md5($newpasswd1);

        // Make a safe query
        $query = sprintf("UPDATE `ptb_users` SET `password` = '%s' 
                    WHERE `id` = ".$_SESSION['user_id'],
                    mysql_real_escape_string($md5_np));

        mysql_query($query)or die('Could not update password: ' . mysql_error());
        return 0;
    } else {
        return 2;
    }

}   
?> 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T19:47:09.820

> 它只会链接到 php 功能页面，根本不会更改密码

您告诉 HTML 表单正是这样做的：`<form method="POST" action="includes/changepassword.php">`. 但另一方面，你永远不会调用你的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T19:43:46.043

您需要调用该函数才能处理更改密码。将此添加到文件底部，就在`?>`

```
echo changepassword($_POST['oldpasswd'], $_POST['newpasswd1'], $_POST['newpasswd2']); 
```

您还可以删除函数中的 $_POST 分配，因为您将它们作为参数传递。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T05:06:08.770

如前所述`poke`，您需要调用该函数才能更新密码。
我想我在以下代码中发现了另一个问题：

```
//check user logged in changes OWN passwd
$sql = "SELECT password FROM ptb_users WHERE id = ".$_SESSION['user_id'];
$result = mysql_query($sql)or die('User not found: ' . mysql_error());

if (md5($oldpasswd)==$result) { 
```

您直接使用[mysql_query()](http://in3.php.net/manual/en/function.mysql-query.php)函数的结果，该函数实际上作为资源而不是值返回。

您需要将代码更新为：

```
//check user logged in changes OWN passwd
$sql = "SELECT password FROM ptb_users WHERE id = ".$_SESSION['user_id'];
$result = mysql_query($sql)or die('User not found: ' . mysql_error());
$row=mysql_fetch_assoc($result);
if (md5($oldpasswd)==$row['password']) { 
```

看到这个函数[- mysql_fetch_assoc()](http://in3.php.net/manual/en/function.mysql-fetch-assoc.php)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T02:30:23.460

您的表单字段的名称与 changepassword.php 中列出的名称不匹配。你在应该是“newpasswd1”和“newpasswd2”的地方缺少一个“a”——`name=newpsswd1`应该是`newpasswd1`等等。

您还列出了两次“newpasswd1”

```
 $oldpasswd = ($_POST['oldpasswd']);
 $newpasswd**1** = ($_POST['newpasswd1']);
 $newpasswd**1** = ($_POST['newpasswd2']); 
```

......我想你可能是这个意思......

```
 $oldpasswd = ($_POST['oldpasswd']);
 $newpasswd**1** = ($_POST['newpasswd1']);
 $newpasswd**2** = ($_POST['newpasswd2']); 
```

我还结合了 Pastor Bones 和 Abhishek Bhatia 建议的更改，现在效果很好。（我也是 HTML 的关闭表单标签）

这是整个事情的样子（针对我的网站进行了修改）：

HTML 表格

```
<form method="POST" action="changepassword.php">
<p><input type="password" name="oldpasswd" id="oldpasswd" maxlength="30" placeholder="Old Password"></p>
<p><input type="password" name="newpasswd1" id="newpasswd1" maxlength="30" placeholder="New Password"></p>
<p><input type="password" name="newpasswd2" id="newpasswd2"maxlength="30" placeholder="Confirm Password"></p>
<input type="submit" name="submit" id="submit" value="change password">
</form> 
```

更改密码.php

```
function changepassword ($oldpasswd, $newpasswd1, $newpasswd2)
{
        $oldpasswd = ($_POST['oldpasswd']);
        $newpasswd1 = ($_POST['newpasswd1']);
        $newpasswd2 = ($_POST['newpasswd2']);

    if ($newpasswd1 != $newpasswd2)
    {
        return 1;
    }

    $sql = "SELECT Password FROM users WHERE UserID = ".$_SESSION['UserId'];
    $result = mysql_query($sql)or die('User not found: ' . mysql_error());
    $row=mysql_fetch_assoc($result);

    if (md5($oldpasswd)==$row['Password'])
    {
        $md5_np=md5($newpasswd1);
        $query = sprintf("UPDATE `users` SET `Password` = '%s' WHERE `UserID` ".$_SESSION['UserId'],mysql_real_escape_string($md5_np));

        mysql_query($query)or die('Could not update password: ' . mysql_error());
        return 0;
    }
    else
    {
        return 2;
    }
}   

echo changepassword($_POST['oldpasswd'], $_POST['newpasswd1'], $_POST['newpasswd2']); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T20:52:50.330

找一个关于表单处理的教程，经过一番搜索，如果偶然发现这个[表单教程](http://www.html-form-guide.com/php-form/php-form-tutorial.html)，它看起来很容易理解。你会看到，大多数形式都自称。

formchangepassword.html

```
<form action="formchangepassword.html" method="post"> 
```

在表单的开头通常有一些代码，它决定表单是否被调用`post`（在按下按钮后），或者它是否被调用`get`。在这段代码中，您可以调用您在 CHANGEPASSWORD.PHP 文件中编写的函数。这个文件只是一个库，它包含函数，你可以调用这个函数但它们不会自己运行，它们必须被调用。

```
<?php
  require_once("CHANGEPASSWORD.PHP");

  if(count($_POST) > 0)
  {
    // button was clicked, do what is necessary
    changepassword(...);
    ...
  }
?>
<form action="formchangepassword.html" method="post">
...
</form> 
```

# ip-address - Google NaCl 获取IP和系统信息

> ID：13212798
> 
> 赞同：1
> 
> 时间：2012-11-03T19:40:26.227
> 
> 标签：ip-address, glibc, function-calls, google-nativeclient

初学者问题

问题函数调用*gethostbyname、getifaddrs、uname，系统*总是失败。

我猜 Native Client 运行时系统会阻止执行，将其视为不安全的活动？

如果这是真的，还有什么替代方案？

在 getifaddrs 和 uname 上出现错误：未实现 ENOSYS 功能

在 gethostbyname 上出现错误：未知服务器错误

我正在使用 glibc

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T22:50:35.500

如果您可以在 JavaScript 端可靠地获取它，则可以将其作为消息发送。

# c++ - C ++ char数组损坏？

> ID：13212804
> 
> 赞同：0
> 
> 时间：2012-11-03T19:41:05.247
> 
> 标签：c++, arrays, char, corruption

我正在尝试构建一个压缩 sprintf 函数的函数，但不知何故我遇到了以下问题：

调用类后的第一行（它曾经是一个函数，但这也不起作用）我得到了正确的结果： http: [//puu.sh/1m1Bw](http://puu.sh/1m1Bw)

但是在我得到完全不同的东西之后的那一行，而我什至没有触及类或变量： http: [//puu.sh/1m1BR](http://puu.sh/1m1BR)

有人可以向我解释这里发生了什么吗？

编辑：忘记了实际的课程：

```
StringCreator::StringCreator(char* _parten, ...) {
        char buff[255];

        va_list args;
        va_start (args, _parten);
        vsprintf (buff,_parten, args);
        va_end(args);

        this->str = buff;
    } 
```

在 .h 文件中：

```
class StringCreator {
public:
    StringCreator(char* _parten, ...);
    char* str;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T19:52:11.357

`StringCreator()`构造函数完成后，成员变量是`this->str`一个悬空指针，因为它指向`buff`的是构造函数的局部变量。在构造函数之后访问`this->str`是未定义的行为。`str`从 a更改`char*`为 a`std::string`是一种解决方案，如果您需要访问 a`const char*`您可以使用`str.c_str()`. 使用 a`std::string`也意味着默认的复制构造函数和赋值运算符是正确的。

如果如对此答案的评论中所述，您`new char[255]`不使用 a `std::string`，那么您需要使`StringCreator`不可复制或实现复制构造函数和赋值运算符来复制`str`. 请参阅[什么是三法则？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)或者，您可以拥有`char str[255];`并避免动态分配，并且默认复制`StringCreator`是正确的。

为了避免调用`vsprintf()`使用时潜在的缓冲区溢出[`vsnprintf()`](http://en.cppreference.com/w/c/io/vfprintf)（如果您的编译器支持 C99），它接受正在填充的缓冲区的大小作为参数，并且写入的内容不超过指定的大小。

# delphi - 过滤客户端数据集中记录为假的记录

> ID：13212806
> 
> 赞同：2
> 
> 时间：2012-11-03T19:41:07.930
> 
> 标签：delphi, filter, tclientdataset

sI 有一个名为“受控”的客户端数据集布尔*字段*。

我想过滤不受控制的记录。

在 Delphi XE (VCL) 中，我使用了这些代码并且它正在工作：

```
ClientDataSet1.Filter := 'Controled = 0';  
ClientDataSet1.Filtered := True; 
```

在 Delphi XE2 (FMX) 中，此代码不起作用，但我可以过滤受控记录 ( `Controled =1`)，它可以工作，但我想要不受控制的记录。

任何想法或它只是在新版本中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:01:26.370

只要是布尔字段，那“不受控制”呢？如果过滤器字符串解释器没有正确评估布尔字段，如果`Controlled = true`有效，您应该可以使用`not (Controled = true)`or `Controled <> true`。以你的例子为例，这意味着而不是`Controled = 1`简单地 write `Controled <> 1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T21:28:45.427

XE3 中的快速测试表明，如果您实际使用`True`and `False`（这是您一直以来应该做的），过滤器可以正常工作。

```
ClientDataSet1.Filter := 'Controled = False';
ClientDataSet1.Filtered := True; 
```

我创建的测试表包含一个`integer`名为的字段`ID`和一个`Boolean`名为`Controlled`（与您的相同，但拼写为 2 Ls）的字段。

测试按钮点击代码：

```
procedure TForm3.Button1Click(Sender: TObject);
begin
  ClientDataSet1.Filtered := False;
  if Edit1.Text <> '' then
  begin
    ClientDataSet1.Filter := Edit1.Text;
    ClientDataSet1.Filtered := True;
  end
  else
    ClientDataSet1.Filter := '';
end; 
```

没有过滤器集（`Filtered = False`和`Filter = ''`）：

![未设置过滤器](../Images/56df443f8f2c4a47313ede62f955cb86.png)

过滤器 =`Controlled = False`

![过滤器 = 假](../Images/5b8f13fd21e2b06528cd3fa242fdcf2f.png)

过滤器 =`Controlled = True`

![过滤器 = 真](../Images/aae166799682ed8b281ec4e3328f9c49.png)

# entity-framework - 导航属性上的实体框架 IN 子句

> ID：13212811
> 
> 赞同：4
> 
> 时间：2012-11-03T19:41:53.617
> 
> 标签：entity-framework

我有一个对象 IQueryable，我正在尝试动态添加 Where 子句，这对于列表对象上的列非常有用，但是现在有条件地我想将一个 IN 子句添加到具有列 ListingID、AmenityID 的导航属性 (ListingAmenities)

我有可能包含我喜欢过滤结果的设施的 critiera.AmenityIDs。

如果我的数组中有任何 amenityID，我正在尝试实现以下目标

```
select * from Listings l inner join ListingAmenities a on l.ListingID = a.ListingID where a.AmenityID IN(1,2,3) 
```

这是我的代码（我使用的是 EF5）

```
if (criteria.AmenityIDs.Count > 0)
        {
            listings = listings.Where(x => x.ListingAmenities.Any(y => y.AmenityID == criteria.AmenityIDs));
        } 
```

这当然行不通。重要说明是我正在动态添加这些 WHERE 子句，这就是我构建 IQueryable 对象的原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:51:17.283

`Enumerable.Contains`转换为`IN`SQL，因此您可以使用：

```
if (criteria.AmenityIDs.Count > 0)
{
    listings = listings.Where(x => x.ListingAmenities
        .Any(y => criteria.AmenityIDs.Contains(y.AmenityID)));
} 
```

`AmenityIDs`如果集合很长，请小心，因为[大型集合](https://stackoverflow.com/a/8108643/270591)`Contains`存在性能问题。但是100个左右的元素应该不是问题。

# python - 通过该局部空间中的函数更改局部空间内的值

> ID：13212814
> 
> 赞同：0
> 
> 时间：2012-11-03T19:42:10.070
> 
> 标签：python, variables, namespaces

这是一个示例代码：

```
def foo():
    def bar():
        foobar = 'foobaz'

    foobar = 'foobar'
    print foobar
    bar()
    print foobar

foo() 
```

我想通过函数更改变量`foobar`内部。上面的代码将不起作用，因为inside与 in位于单独的命名空间中。一个简单的解决方法是制作一个全局的，并且两者都具有并且可以访问它，但我希望会有更简单的解决方法。`foo``bar``foobar``bar``foobar``foo``foobar``foo``bar`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T19:51:37.753

在 python 3.x 上，您可以使用`nonlocal`，对于 python 2.x，请尝试使用函数属性：

```
def foo():
    def bar():
        foo.foobar = 'foobaz'  #change the function attribute

    foo.foobar = 'foobar'     #declare as function attribute
    print foo.foobar
    bar()
    print foo.foobar
foo() 
```

**输出：**

```
foobar
foobaz 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T19:43:24.520

您正在寻找`nonlocal`3.x 中存在的关键字。

```
def f():
    x = None
    def g():
        nonlocal x
        x = 1 
```

如果您被困在 2.x 中，您可以通过拥有一个列表或类似的可变数据容器并访问它作为解决方法来做到这一点。

```
def f():
    x = [None]
    def g():
        x[0] = 1 
```

这适用于变量确实属于范围，但不会超出范围。使用可变对象，我们可以在范围内更改它们，并且这些更改会传播出去。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T19:43:39.410

在 python 2.7 中不可能。在python 3中：

```
def foo():
    def bar():
        nonlocal foobar
        foobar = 'foobaz'

    foobar = 'foobar'
    print foobar
    bar()
    print foobar

foo() 
```

在 2.x 中，您可以执行以下操作：

```
def foo():
    foobar = []
    def bar():
        foobar[0] = 'foobaz'

    foobar[0] = 'foobar'
    print foobar[0]
    bar()
    print foobar[0]

foo() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T20:53:32.660

即使函数已经是 Python 中的一等对象，您也可以创建自己的“仿函数”或*函数对象*，如下所示：

```
class Foo(object):
    def bar(self):
        self.foobar = 'foobaz'

    def __call__(self):
        self.foobar = 'foobar'
        print self.foobar
        self.bar()
        print self.foobar

foo = Foo()
foo() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T19:45:52.760

```
def foo():
    def bar():
        foobar = 'foobaz'
        return foobar

    foobar = 'foobar'
    print foobar
    foobar = bar()
    print foobar

foo() 
```

# c# - 使用 winform 将安装路径从 winform 传递到自定义操作

> ID：13212815
> 
> 赞同：1
> 
> 时间：2012-11-03T19:42:20.790
> 
> 标签：c#, winforms, windows-installer

我正在尝试使用 Windows 窗体创建自定义 Windows 安装程序。如何创建可以接受来自 Windows 窗体的安装路径进行安装的自定义操作。我正在尝试将值从 Windows 窗体分配给，`this.Context.Parameters["targetdir"]`但应用程序安装在默认路径，即`C:\Program Files (x86)\Microsoft\Setup1`。

```
public override void Install(IDictionary savedState)
        {
            base.Install(savedState);
            const string key_path = "SOFTWARE\\VendorName\\MyAppName";
            const string key_value_name = "InstallationDirectory";

            RegistryKey key = Registry.LocalMachine.OpenSubKey(key_path, RegistryKeyPermissionCheck.ReadWriteSubTree);

            if (key == null)
            {
                key = Registry.LocalMachine.CreateSubKey(key_path);
            }
            this.Context.Parameters["targetdir"] = default_installation_path;
            string tgt_dir = this.Context.Parameters["targetdir"];
            key.SetValue(key_value_name, tgt_dir);
        } 
```

请帮助我，我是安装程序类的新手。

# asp.net-mvc-3 - 使用 ninject 向模型类或非控制器类注入依赖项

> ID：13212817
> 
> 赞同：3
> 
> 时间：2012-11-03T19:42:49.213
> 
> 标签：asp.net-mvc-3, entity-framework, ninject, repository-pattern

我在 mvc 3（steven sanderson Scaffolder）的存储库模式中使用 Ninject 3。
在ninject中，我有“NinjectWebCommon”类，在“RegisterServices”方法中我解决了依赖关系，我认为我准备好了。

```
 private static void RegisterServices(IKernel kernel)
  {
     kernel.Bind<ICityRepository>().To<CityRepository>();
     kernel.Bind<IVillageRepository >().To<VillageRepository>();
  } 
```

我使用构造函数注入在控制器中使用我的存储库，一切都很好。

```
public class CityController : Controller
{
   private readonly ICityRepository cityRepository;

   // If you are using Dependency Injection, you can delete the following constructor
   //public CityController() : this(new CityRepository())
   //{
   //}

   public CityController(ICityRepository cityRepository)
   {
      this.cityRepository = cityRepository;
   }

  // .........
} 
```

但是当我在其他类（如使用属性注入或字段注入的模型（实体）类）中使用此存储库时，依赖项没有解决，并且我的属性或字段上出现空引用异常。

```
[MetadataType(typeof(CityMetadata))]
public partial class City : IValidatableObject
{
   [Inject]
   public IVillageRepository VillageRepo { get; set; }

   public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
   {
      var village = VillageRepo.Find(5); // will throw null reference exception on "VillageRepo"
   }
}

public partial class CityMetadata
{
   [ScaffoldColumn(false)]
   public int ID { get; set; }

   [Required(ErrorMessage = MetadataErrorMessages.Required)]
   [StringLength(50, ErrorMessage = MetadataErrorMessages.ExceedMaxLength)]
   public string Name { get; set; }
} 
```

我不知道为什么会这样。那么问题出在哪里，我如何在非控制器类中使用存储库？
提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:41:49.687

你的问题是，你期待魔法。您为存储库注入一个实现，然后您希望该存储库创建的数据对象被注入创建存储库的引用。

首先，那是行不通的。存储库的实现将在您的实体上调用 new()（或 Activator.CreateInstance），而不是从 Ninject 内核或工厂请求实例。您*可以*重写存储库（如果您在那里使用 EF，它会变得更加棘手......）但这可能不值得麻烦。

最重要的是，您根本不需要它。[实体不应该依赖于 repositories](https://stackoverflow.com/a/827693/571536)，恕我直言，甚至不依赖于它们的接口。

编辑：现在我明白为什么你想在你的模型中看到一个 repo。我推荐的是一个静态工厂。

```
public class Factories
{
public static readonly Instance = new Factories();
[Inject]
public Func<IVillageRepository> VillageRepo  {get; set;}
} 
```

然后`Kernel.Inject(Factories.Instance);`从您的 Ninject 初始化代码（绑定 IVillageRepository 的位置）调用。然后将您的可验证实现修改为`Factories.Instance.VillageRepo().Find(...);`

# batch-file - 用于比较文本文件并将该文本文件名称写入 mismatch.txt 的批处理文件

> ID：13212818
> 
> 赞同：0
> 
> 时间：2012-11-03T19:42:49.313
> 
> 标签：batch-file

我有 400 个文本文件，所有文本文件都只有数值。

文件夹 1\car1.txt、car2.txt 和高达 car400.txt

文件夹2\car1.txt,car2.txt ....car400.txt

我想将所有这些文件（如 folder1\car1.txt 与 folder2\car1.txt 和 folder1\400.txt 与 folder2\400.txt 进行比较，如果它们不匹配，我希望批处理将这些文件名写入 mismatch.txt

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T20:03:35.830

```
@echo off
>mismatch.txt (
  for %%F in (folder1\*.txt) do >nul 2>&1 fc "%%F" "folder2\%%~nxF"||echo %%~nxF
) 
```

# netbeans - 如何防止 NetBeans 记住打开的文件？

> ID：13212820
> 
> 赞同：7
> 
> 时间：2012-11-03T19:42:53.447
> 
> 标签：netbeans

当我启动 NetBeans 时，我不希望它自动打开我上次关闭它时打开的文件。

我发现这样做的唯一方法是删除以下文件：

```
del /q "%APPDATA%\Netbeans\7.2.1\config\Windows2Local\Components\MultiView-java*" 
```

有没有更好的方法，例如阻止 NetBeans 在退出时保存打开文件状态的选项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-07-26T09:01:29.380

我知道这个问题很老了，但问题仍然存在:) 解决方案如下：

设置/打开所需的启动文件、项目，然后转到菜单**`Window > Reset Windows`**。

它会记住你拥有的一切。因此，如果您关闭所有文档并调用窗口重置，您将没有默认打开的文件，这对我们中的某些人来说可能很棒。

# jquery - jScrollPane - 如何为滚动条获取单独的箭头

> ID：13212821
> 
> 赞同：0
> 
> 时间：2012-11-03T19:43:10.660
> 
> 标签：jquery, image, scroll, jscrollpane

我正在为 jQuery 使用 jScrollPane 以使滚动条看起来像 Windows 8 滚动条（我正在制作一种 Metro/Modern UI 模型只是为了好玩）。我有滚动条的外观，但我有一个问题。没有办法（至少在当前版本中）获得左箭头图像和右箭头图像（因为我正在使用水平滚动，就像在 Metro UI 中一样）。我在这里看到了一些问题，它们显示了一个 jQuery 轻主题，它为您提供了单独的箭头（菱形主题），但这是一个痛苦的屁股，而不是我想要的。有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T20:00:47.443

为什么不能修改 .jspArrow 类的 CSS 以将箭头图像显示为背景图像？

[看这里](http://jscrollpane.kelvinluck.com/arrow_positions.html)的一个演示，我看到了这个 css：

```
.jspArrow
{
    background: #50506d;
    text-indent: -20000px;
    display: block;
    cursor: pointer;
} 
```

将其更改为：

```
.jspArrow
{
    background: url('your_arrow_img')
    text-indent: -20000px;
    display: block;
    cursor: pointer;
} 
```

jspArrowRight 和 jspArrowLeft 有单独的类，可以进一步帮助您。

如果这不起作用，我确信您可以为滚动条创建“填充”，他们在文档中称其为排水沟。我将创建排水沟，然后在滚动条轨道上的元素之前和之后使用 CSS 伪来呈现箭头。

# html - CSS将内联元素放在一个div中的a中

> ID：13212822
> 
> 赞同：1
> 
> 时间：2012-11-03T19:43:17.567
> 
> 标签：html, css

我正在为我学校的一个俱乐部开发前端，我在将两个内联元素放在一起时遇到了问题。我已经被困在这几个晚上了，这真的让我很沮丧。我已经尝试了从边距、定位、内联块的所有内容，所有这些似乎都给了我一个或另一个问题。现在我已经束手无策了，所以我转向这里。元素应该在元素之上。这两个元素都在播放器中，假设在图像旁边。我将包含下载我的代码的链接，一旦你在浏览器中看到我的页面，我就会很明显地遇到问题。感谢你给与我的帮助。

[https://dl.dropbox.com/u/21141217/HvZ.zip](https://dl.dropbox.com/u/21141217/HvZ.zip)

编辑：我在这里遇到问题

```
<div id="recentTags">
                <h4>RECENT TAGS</h4>
                <div class="tag">
                    <div class="player">
                        <a href="">Chris Stephenson</a>
                        <h6>Legends</h6>
                    </div>
                    <img src="tag.png" alt />
                    <div class="player">
                        <a href="">Eric Tadt</a>
                        <h6>butt pirates</h6>
                    </div>
                </div>
                <div class="tag">
                    <div class="player">
                        <a href="">Zack Baer</a>
                        <h6>Little Bears</h6>
                    </div>
                    <img src="tag.png" alt />
                    <div class="player">
                        <a href="">Humble Trumble</a>
                        <h6>Glorious pres</h6>
                    </div>
                </div>
            </div> 
```

相关CSS：

```
#recentTags{
width: 292px;
padding: 4px;
height: 236px;
/*My attempt at trying to recreate the color gradient. Gabe fix it*/
/*I used http://www.colorzilla.com/gradient-editor/ or you can just google css gradient generator*/
background: #5e5e5e; /* Old browsers */
background: -moz-linear-gradient(top, #5e5e5e 0%, #000000 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#5e5e5e), color-stop(100%,#000000)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #5e5e5e 0%,#000000 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #5e5e5e 0%,#000000 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #5e5e5e 0%,#000000 100%); /* IE10+ */
background: linear-gradient(to bottom, #5e5e5e 0%,#000000 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#5e5e5e', endColorstr='#000000',GradientType=0 ); /* IE6-9 */
}
#recentTags h4{
color: #D23000;
background-color: grey;
padding-left: 8px;
/*Color gradient*/
background: #2d2d2d;
background: -moz-linear-gradient(left,  #2d2d2d 0%, #4c4c4c 100%);
background: -webkit-gradient(linear, left top, right top, color-stop(0%,#2d2d2d), color-stop(100%,#4c4c4c));
background: -webkit-linear-gradient(left,  #2d2d2d 0%,#4c4c4c 100%);
background: -o-linear-gradient(left,  #2d2d2d 0%,#4c4c4c 100%);
background: -ms-linear-gradient(left,  #2d2d2d 0%,#4c4c4c 100%);
background: linear-gradient(to right,  #2d2d2d 0%,#4c4c4c 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#2d2d2d', endColorstr='#4c4c4c',GradientType=1 );
}
.tag{
width: 280px;
height: 31px;
margin-top: 5px;
padding:3px;
border: 0px solid #829485;
border-radius: 10px; 
-moz-border-radius: 10px; 
-webkit-border-radius: 10px;
/*Gradient*/
background: rgb(30,87,153);
background: -moz-linear-gradient(top,  rgba(30,87,153,1) 0%, rgba(255,255,255,1) 0%, rgba(53,53,53,1) 2%, rgba(73,73,73,1) 100%);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(30,87,153,1)), color-stop(0%,rgba(255,255,255,1)), color-stop(2%,rgba(53,53,53,1)), color-stop(100%,rgba(73,73,73,1)));
background: -webkit-linear-gradient(top,  rgba(30,87,153,1) 0%,rgba(255,255,255,1) 0%,rgba(53,53,53,1) 2%,rgba(73,73,73,1) 100%);
background: -o-linear-gradient(top,  rgba(30,87,153,1) 0%,rgba(255,255,255,1) 0%,rgba(53,53,53,1) 2%,rgba(73,73,73,1) 100%);
background: -ms-linear-gradient(top,  rgba(30,87,153,1) 0%,rgba(255,255,255,1) 0%,rgba(53,53,53,1) 2%,rgba(73,73,73,1) 100%);
background: linear-gradient(to bottom,  rgba(30,87,153,1) 0%,rgba(255,255,255,1) 0%,rgba(53,53,53,1) 2%,rgba(73,73,73,1) 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1e5799', endColorstr='#494949',GradientType=0 );
}
.tag a{
color: #D23000;
display: inline-block;
text-decoration: none;
font-size: 13px;
font-weight: bold;
position: relative;
bottom: 14px;
}
.player{
width:110px;
display: inline;
}
.tag img{position: relative;}
.tag h6{
display: inline;
} 
```

dabblet 链接：[http ://result.dabblet.com/gist/4007549/381ecd27edf3c72fbde28575ca9cd2e50e2c2a52](http://result.dabblet.com/gist/4007549/381ecd27edf3c72fbde28575ca9cd2e50e2c2a52)

编辑：我想我选择了错误的单词选择，我想将元素放在元素之上。所以最终结果将如下所示：

克里斯斯蒂芬森传奇

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T05:12:28.060

如果我正确理解您的问题，您希望玩家名称位于玩家团队名称上方，并且两者都位于左侧，图像位于右侧。以下答案假定这是正确的。如果不正确，请具体说明您的意思。

要让一个元素后跟换行符，您需要设置该元素的样式`display: block;`。 `display: inline;`将使元素并排放置。所以我认为这是你出错的第一个地方。你要制作玩家链接和玩家队伍名称`display: block;`。

然后将播放器向左浮动，图像向右浮动。

然后清除浮动。

然后你会得到这样的结果：http:
[//jsfiddle.net/NsfB4/](http://jsfiddle.net/NsfB4/)

这是执行此操作的 css：

```
.clear {
    clear: both;
}
.tag .player {
    float: left;
}
.tag .image { 
    float: right; 
} 
```

和html：

```
<div id="recentTags">
    <h4>RECENT TAGS</h4>
    <div class="tag">
        <div class="player">
            <a href="">Chris Stephenson</a>
            <h6>Legends</h6>
        </div>
        <div class="image">
            <img src="tag.png" alt="" />
        </div>
        <div class="clear"><!-- --> </div>

        <div class="player">
            <a href="">Eric Tadt</a>
            <h6>butt pirates</h6>
        </div>
        <div class="clear"><!-- --> </div>
    </div>
    <div class="tag">
        <div class="player">
            <a href="">Zack Baer</a>
            <h6>Little Bears</h6>
        </div>
        <div class="image">
            <img src="tag.png" alt="" />
        </div>
        <div class="clear"><!-- --> </div>

        <div class="player">
            <a href="">Humble Trumble</a>
            <h6>Glorious pres</h6>
        </div>
        <div class="clear"><!-- --> </div>
    </div>
</div>​ 
```

这是你所追求的（除了你的渐变样式）。

# php-gd - php-gd：必须加载 PHP 扩展 gd 并且无法找到包

> ID：13212824
> 
> 赞同：-4
> 
> 时间：2012-11-03T19:43:22.367
> 
> 标签：php-gd

php-gd 有问题

我插入了这个命令：

```
sudo apt-get install php5-curl php5-mcrypt php5-gd php5-common 
```

在整个设置 Magento 的过程中，但是当我通过验证时，这就是我得到的：

> “必须加载 PHP 扩展 gd”

当警告出现时。我尝试使用以下方法再次安装它：

```
sudo apt-get install php5-gd 
```

这是我收到的信息：

> “正在阅读包裹列表...完成 E：无法找到包裹”

我想了解如何解决此错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:10:35.653

安装 php5-gd 后重新启动网络服务器会加载包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-23T18:34:48.163

使用突触包管理器更容易安装。

安装后还是不行，看看apache模块，我的是/etc/php5/apache2/conf.d/20-gd.ini

```
; configuration for php GD module
; priority=20
; extension=gd.so 
```

即使模块存在并安装在系统上，它也会在模块配置中被注释掉。取消注释，然后重新启动 Apache，就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T16:02:22.427

查看。重新加载网络服务器。php-pfm (php5-fpm)、fcgi、fastcgi 等服务加载一次并保留在后台。添加模块不会影响正在运行的副本。必须重新启动才能将模块加载到活动状态。

# ruby - 如何使 ruby gem 的二进制文件充当机架？

> ID：13212827
> 
> 赞同：1
> 
> 时间：2012-11-03T19:43:38.323
> 
> 标签：ruby, gem, rack

我有一颗宝石。它可以选择作为命令行应用程序运行`myapp_cli`，或者作为具有本地 web ui 的应用程序运行`myapp_web`。

在我的应用程序上工作时，我可以`bundle exec myapp_cli`为命令行 UI
运行，也可以`bundle exec rackup`为 Web UI 运行。

现在我想`bin/myapp_web`基本上成为rackup的同义词。因此，当有人安装我的 gem 时，他们可以运行`myapp_cli`或`myapp_web`.

有没有很好的方法呢？

我可以让我`myapp_web`看起来像

```
Rack::Handler::WEBrick.run(
      App.new,
      :Port => 9000
  ) 
```

但这并没有给我 rackup 给我的所有好处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:51:11.640

我所要做的就是浏览源代码。

```
require 'rack'
Rack::Server.start 
```

# h.264 - GStreamer 1.xx 中的 h264 mpegtsmux 输出中没有 SPS/PPS？

> ID：13212832
> 
> 赞同：0
> 
> 时间：2012-11-03T19:44:05.013
> 
> 标签：h.264, gstreamer

以下管道（将 .mp4 转换为 .ts）在 GStreamer 0.10 中运行良好：

```
gst-launch-0.10 filesrc location=/tmp/temp.mp4 ! qtdemux  ! h264parse !  mpegtsmux name=mux ! filesink location=/tmp/output.ts 
```

但是与 GStreamer 1.0.2 相同的管道会产生一个无法播放的 output.ts。据我在 TS 输出中看到的，似乎没有任何 SPS/PPS 起始码（它们存在于 0.10 的输出中）。

h264parse 元素的输出在两个版本之间似乎是相同的。

我查看了最新 mpegtsmux 的源代码，并且在任何地方都不再提及 SPS/PPS。事实上，整个文件 mpegtsmux_h264.c 似乎已经消失了。

new mpegtsmux 在这方面是如何工作的？我需要在管道上游添加额外的东西吗？或者向 mpegtsmux 添加属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:21:47.390

原来是 h264parse 中的一个错误，已在最新的 GStreamer 代码中修复。

# c# - 使用 CSC 分别编译单个目录中的多个文件

> ID：13212833
> 
> 赞同：1
> 
> 时间：2012-11-03T19:44:47.410
> 
> 标签：c#, batch-file, cmd, csc

我在一个目录中有多个 C# 源文件（大约 50 个）。我想要做的是分别编译它们，即它们每个都应该生成自己的可执行文件。（有些文件只有一到两个目录。）

目前我正在做的是

```
csc *.cs /recurse:*.cs 
```

这里的问题是 CSC 尝试将所有文​​件一起编译并找到该方法的多个实例`Main`。我知道这是正确的行为，但这不是我想要的。

编写批处理脚本是我唯一的选择，还是我可以使用某种单命令通配符魔术来分别编译所有文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T19:50:41.000

使用简单的 bat [for](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/for.mspx?mfr=true)循环

```
for /R %f in (*.cs) do csc %f 
```

应该做

# android - 在暂停时更改屏幕亮度（Android 应用）

> ID：13212835
> 
> 赞同：1
> 
> 时间：2012-11-03T19:45:09.410
> 
> 标签：android, android-activity, onpause

我的应用程序通过以下方式保存用户原始亮度：

`originalBrightness = Settings.System.SCREEN_BRIGHTNESS;`

然后在程序运行时更改它。

originalBrightness 是私有的全局字符串。现在我要做的是当用户点击“主页”或当应用程序暂停时需要再次设置原始屏幕，我试图这样做但应用程序崩溃了：

```
public void onPause() {
    super.onPause();
    int brightness = Integer.getInteger(originalBrightness);
    setBrightness(brightness);
}
private void setBrightness(int brightness) {
    WindowManager.LayoutParams layoutParams = getWindow().getAttributes();
    layoutParams.screenBrightness = brightness / 100.0f;
    getWindow().setAttributes(layoutParams);
} 
```

对男性有用吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:53:12.673

尝试使用`Settings.System.SCREEN_BRIGHTNESS`将系统默认亮度设置为：

```
android.provider.Settings.System.putInt(getContentResolver(),  
android.provider.Settings.System.SCREEN_BRIGHTNESS,brightness /100.0f); // 0-255 
```

并在清单中添加这些权限：

```
<uses-permission android:name="android.permission.CHANGE_CONFIGURATION" />
<uses-permission android:name="android.permission.WRITE_SETTINGS" /> 
```

# haskell - 酸态示例错误

> ID：13212836
> 
> 赞同：0
> 
> 时间：2012-11-03T19:45:26.443
> 
> 标签：haskell, compiler-errors, acid-state

我正在尝试开始使用`acid-state`一个项目，但我在运行演示时遇到了麻烦。

[`HelloWorld.hs`](http://mirror.seize.it/acid-state/examples/HelloWorld.hs)在我的 64 位机器上运行[这个示例集合会给我错误](http://mirror.seize.it/acid-state/examples/)

```
acid-state.hs:26:7:
    No instance for (MonadState
                       HelloWorldState (Update HelloWorldState))
      arising from a use of `put'
    Possible fix:
      add an instance declaration for
      (MonadState HelloWorldState (Update HelloWorldState))
    In the expression: put (HelloWorldState newValue)
    In an equation for `writeState':
        writeState newValue = put (HelloWorldState newValue)

acid-state.hs:29:43:
    No instance for (MonadReader
                       HelloWorldState (Query HelloWorldState))
      arising from a use of `ask'
    Possible fix:
      add an instance declaration for
      (MonadReader HelloWorldState (Query HelloWorldState))
    In a stmt of a 'do' block: HelloWorldState string <- ask
    In the expression:
      do { HelloWorldState string <- ask;
           return string }
    In an equation for `queryState':
        queryState
          = do { HelloWorldState string <- ask;
                 return string } 
```

同样的事情[`HelloWorldNoTH.hs`](http://mirror.seize.it/acid-state/examples/HelloWorldNoTH.hs)也会发生。在 32 位系统上不会出现任何错误。有什么想法吗？我是否未能安装（或安装不当）某些必需的组件？

我正在使用 Cabal`The Glorious Glasgow Haskell Compilation System, version 7.4.1`在 64 位 Debian Wheezy（通过软件包安装）上运行“” 。机器本身是 64 位 Core i3。32 位机器（成功运行了演示）没有明显的不同。`haskell-platform``0.14.0`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:50:02.520

这与您正在运行的架构完全无关（很抱歉得出结论）。

原来我有一些配置错误，或者可能`cabal`安装了一些冲突的库。清除我的`.ghc`，然后重新安装适当的库就可以了。如果您使用的是 Debian 或类似设备：

```
rm -r ~/.ghc/*
cabal install acid-state 
```

# mysql - Mysql数据库为多个值设计多个值

> ID：13212837
> 
> 赞同：0
> 
> 时间：2012-11-03T19:45:38.730
> 
> 标签：mysql, database

对不起，我对 mysql 和数据库一无所知，但我正在学习它。

所以，假设以下情况：

我有一张表，其中包含不同颜色的球的定义（ball_definitions）：

```
id color
1 red
2 blue
3 green
...
N 
```

其中 id 是主要值。

我有第二张表（人），其中包含人的定义：

```
id name
1 John
2 Peter
3 Michel
...
M 
```

（其中 id 是主键）

现在，我想与每个人相关联，这些人拥有的球的数量，从概念上讲，是这样的：

```
john: 1 red ball, 3 green ball, 0 blue ball
peter: 3 red ball, 2 green ball, 1 blue ball.
... 
```

以这样一种方式，M 和 N 都可以变化（出于便携性原因）。

我的第一个困难是让人员的表有 N 列，其中每列指的是每种颜色，但这不是可移植的（需要触发 ball_definitions 更改的每个更改，而且似乎很难查询）。

另一方面，创建一个具有“ManyToMany”关系的新表：

```
persons_id ball_definitions_id amount
1 1 1
1 2 3
1 3 0
2 1 3
2 2 2
2 3 1 
```

当人数或球数发生变化时，我觉得有点费力。

有没有更好的解决方案？

干杯，豪尔赫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T19:53:19.607

不，没有更好的解决方案。

当您有两个具有 N 到 N（多对多）关系的表时，您应该使用中间表。

另一种方法是在persons 表中为每种类型的球创建一个列，或者在balls 表中为每个人创建一个列，这比您描述的解决方案更费力。如果你需要添加更多的球或人，事情会变得非常复杂和混乱。你描述了最好的解决方案。

# jquery - 无法使用从数据库中检索到的 SVG（UTF-8 错误）

> ID：13212838
> 
> 赞同：1
> 
> 时间：2012-11-03T19:45:42.567
> 
> 标签：jquery, ajax, coldfusion, svg, batik

当我尝试在 Batik 转码中使用从 SQL 表中检索到的 SVG 代码时，出现错误“3 字节 UTF-8 序列的无效字节 2”。

由 jQuery 从 DOM 中提取的 svg 绘图，并通过 jQuery Ajax 发送到 cfc，在那里它被更新为 SQL 表。在另一个单独的页面上，从表中查询了 SVG 代码，我尝试使用 Batik 将其转码为 PNG 文件。那时我收到了 Invalid UTF-8 Sequence 错误。

保存数据的代码：

```
var lclSVG = $('#holderDiv')[0].innerHTML;
$.ajax({ 
type: "POST",
url: "dbNIS.cfc?method=saveSketch", 
data: ({orderID: ordID, sketch_svg: lclSVG}),
dataType: "json",
success: function(saveData) {alert(saveData.CODE);}
}); 
```

来自 CFC 的代码，其中 SVG 代码保存到表中：

```
<cffunction name="saveSketch" access="remote" output="no" returntype="struct" returnFormat="JSON">
<cfargument name="orderID" type="string" default="" required="Yes" hint="Order ID">
<cfargument name="sketch_svg"  type="string" default="" required="Yes" hint="Sketch SVG Data">
<CFQUERY NAME="updateSketch">
  UPDATE sketch
  SET sketch_svg = '#arguments.sketch_svg#'
  WHERE  ordID = #arguments.orderID#
</CFQUERY>
</cffunction> 
```

从表中检索 SVG 并用于转码为 PNG 的代码：

```
<CFQUERY NAME="getSketch">
  SELECT sketch_svg AS svg
  FROM sketch
  WHERE  ordID = 1
</CFQUERY>
<cfscript>
  transcoder = createObject("java", "org.apache.batik.transcoder.image.PNGTranscoder").init();
  inputStream = createObject("java", "java.io.StringBufferInputStream").init(getSketch.svg);
  input = createObject("java", "org.apache.batik.transcoder.TranscoderInput").init(inputStream);
  OutFile = expandPath("myTest.png");
  outputStream=CreateObject("java", "java.io.FileOutputStream").init(OutFile);
  output=CreateObject("java", "org.apache.batik.transcoder.TranscoderOutput").init(outputStream);
  transcoder.transcode(input, output);
  outputStream.close();
</cfscript> 
```

注意：相反，我尝试将 svg 发送到操作页面，在该操作页面中将其更新到表中，立即从该表中检索它，然后对其进行转码，这样可以正常工作。所以在我看来，在通过 ajax 发送或从表中更新/检索时，我必须对字符集做错了什么。如果可以的话请帮忙...

我已经把它缩小了一些。当我将 svg 直接输入到表中时，第三部分工作正常......所以它一定是在 ajax 调用中发送数据的方式有问题，其中 svg 被发送到 cfc 以存储在表中.

# playframework - @Select 在 Scala 模板中使用 Int 值

> ID：13212843
> 
> 赞同：0
> 
> 时间：2012-11-03T19:46:16.300
> 
> 标签：playframework, playframework-2.0

我正在使用 play-2.0.3。
我有一个地图，想用 Int->String 填充下拉列表（使用类似 @select 的东西）。
我知道 @select 只接受 Seq[(String, String).
我怎样才能重载这个助手来接受 Seq[(Int, String)] ？

### 我试图做以下事情：

1.  将 select.scala.html 的源代码复制到 views/mySelect.scala.html
2.  出于我的目的对其进行了编辑。

```
@**
* Generate an HTML select.
*
* Example:
* {{{
* @select(field = myForm("isDone"), options = options("Yes","No"))
* }}}
*
* @param field The form field.
* @param args Set of extra attributes.
* @param handler The field constructor.
*@
@import helper._

@(field: Field, options: Seq[(Int,String)], args: (Symbol,Any)*)(implicit handler: FieldConstructor, lang: play.api.i18n.Lang)

@input(field, args:_*) { (id, name, value, htmlArgs) =>
    <select id="@id" name="@name" @toHtmlArgs(htmlArgs)>
    @args.toMap.get('_default).map { defaultValue =>
        <option class="blank" value="">@defaultValue</option>
    }
    @options.map { v =>
        <option value="@v._1" @(if(value == Some(v._1)) "selected" else "")>@v._2</option>
    }
    </select>
} 
```

但这似乎不起作用。

玩 说

```
')' expected but identifier found. 
```

在行中

```
@(field: Field, options: Seq[(Int,String)], args: (Symbol,Any)*)(implicit handler: FieldConstructor, lang: play.api.i18n.Lang) 
```

顺便说一下**(Symbol,Any)**之后的 * 是什么？
玩不喜欢。即使我删除了这个*****，play 也会说：

```
 not found: value field 
```

引用同一行。

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T06:20:34.680

删除 "@import helper._" 。每个 scala 模板文件都是后台的一个函数。“@(field: Field, options: Seq[(Int,String)], args: (Symbol,Any)*)(implicit handler: FieldConstructor, lang: play.api.i18n.Lang)" 行必须是第一行线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:06:30.550

我找到了解决方案。

```
@**
* file views/mySelect.scala.html 
*
* Generate an HTML select.
*
* Example:
* {{{
* @select(field = myForm("isDone"), options = options("Yes","No"))
* }}}
*
* @param field The form field.
* @param args Set of extra attributes.
* @param handler The field constructor.
*@

@(field: Field, listOptions: Map[Integer,String], args: (Symbol,Any)*)(implicit handler: views.html.helper.FieldConstructor, lang: play.api.i18n.Lang)
@import helper._
@input(field, args:_*) { (id, name, value, htmlArgs) =>
    <select id="@id" name="@name" @toHtmlArgs(htmlArgs)>
    @args.toMap.get('_default).map { defaultValue =>
        <option class="blank" value="">@defaultValue</option>
    }
    @listOptions.map { v =>
        <option value="@v._1" @(if(value == Some(v._1)) "selected" else "")>@v._2</option>
    }
    </select>
} 
```

*   **(Symbol,Any)***表示“视为可变参数”。当你有一个可变参数函数时使用它，比如

    ```
    def varargfunc( argument : T* ) ... 
    ```

*   现在我们可以

    ```
    @import mySelect 
    ```

    并像使用它一样

    ```
    @mySelect(
        userForm("room"), 
        rooms, @* Map<Integer, String>* rooms*@ 
        '_default -> Messages.get("chooseRoom"),
        '_showConstraints -> false
        ) 
    ```

*   是的，我们应该只在函数声明之后（在函数体中）使用**@import 。**

*   不要使用变量名

    ```
    options: Map[Integer,String] 
    ```

    随着

    ```
    @import helper._ 
    ```

    因为它会导致**选项**的模糊感，因为它也是来自**views.html.helper的函数**

# php - 表单提交和 jquery 的服务器问题

> ID：13212848
> 
> 赞同：0
> 
> 时间：2012-11-03T19:46:30.133
> 
> 标签：php, jquery

我有两个问题，我对它们有疑问，我真的不知道从哪里开始寻找以及如何处理它们：

第一个是jquery问题...

当我在我的计算机（本地）上加载页面时，一切都显示正确：

```
if($('.error',$formId).length) {
            return false;
        }
    else{ 
        $('#btn-submit').fadeOut(200, function() {
              $('#btn-submit').attr("src","images/Site_Images/checkMark.jpg");
              $('#btn-submit').fadeIn(200);
              $('#btn-submit').removeAttr('onmouseover').removeAttr('onmouseout');
        });

         // $formId.trigger('submit');
        } 
```

复选标记出现... ![在此处输入图像描述](../Images/50715b2d1a209b25a605bc160e7ad100.png)

当我在 wamp 服务器中加载我的网站并删除评论时 // $formId.trigger('submit');

所以表单将提交并出现**2个问题**：（如果我将提交行注释掉，那么图片将可见）

它必须与表单提交有关。

首先是复选标记：

![在此处输入图像描述](../Images/d00715bc0450dfe312f77044065c38ce.png)

没出现。

**第二个**是提交后。所有的形式都消失了。

我该如何解决这些问题？

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T19:56:44.783

问题很可能是“images/Site_Images/checkMark.jpg”文件不存在，因此您应该仔细检查文件是否使用与本地运行相同的目录结构上传。

# javascript - 通过 JavaScript 验证单选按钮

> ID：13212849
> 
> 赞同：4
> 
> 时间：2012-11-03T19:46:34.353
> 
> 标签：javascript, radio-button, validation

我有以下表格：

```
<form name="survey1" action="add5up.php" method="post" onsubmit="return validateForm()">
<div id="question">Q1) My programme meets my expectations</div><br />
Always<INPUT  TYPE = 'Radio' Name ='q1'  value= 'a'> 
Usually<INPUT  TYPE = 'Radio' Name ='q1' value= 'b'> 
Rarely<INPUT  TYPE = 'Radio' Name ='q1' value= 'c'> 
Never<INPUT  TYPE = 'Radio' Name ='q1' value= 'd'> 
<input type="submit" value="addData" />
</form> 
```

我正在尝试验证是否`Radio`已选择按钮。

我正在使用的代码：

```
<script type="text/javascript">
function validateForm()
{
if( document.forms["survey1"]["q1"].checked)
{
    return true;
}

else
{
    alert('Please answer all questions');
    return false;
}
}
</script> 
```

这是行不通的。有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-03T19:52:34.537

使用单选按钮时，您必须检查它们是否被选中，因为 javascript 将它们作为数组威胁：

```
<script type="text/javascript">
function validateRadio (radios)
{
    for (i = 0; i < radios.length; ++ i)
    {
        if (radios [i].checked) return true;
    }
    return false;
}

function validateForm()
{
    if(validateRadio (document.forms["survey1"]["q1"]))
    {
        return true;
    }
    else
    {
        alert('Please answer all questions');
        return false;
    }
}
</script> 
```

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-25T20:49:53.217

我验证复杂表单的解决方案包括收音机。

用法很简单，函数验证后返回TRUE/FALSE。var rs_target 是表单的 ID

scTo 是我自定义的函数来滚动到 ID，你可以使用自己的函数来显示/滚动错误

```
scTo("#"+err_target); 
```

错误框会像

```
<div class="rq_message_box rq_message_box_firstname display-none">err message</div> 
```

验证

```
 var validation = validateForm(rs_target);
    if(validation == false){
        return false;
    } 
```

功能

```
 function validateForm(rs_target) {
    var radio_arr = [];
    var my_form = $("#"+rs_target);
    my_form = my_form[0];
    $(".rq_message_box").hide(); //clear all errors
    //console.log(my_form);
    var err = false;
    var err_target = "";

    for (key in my_form) {
        //console.log("do");
        if(!my_form[key]||my_form[key]==null||err){
            break;
        }
            //console.log(my_form[key].name);
                var x = my_form[key].value;
                    //console.log(x);
                    if(my_form[key].type == "radio"){
                        //console.log("radio");
                            if(radio_arr[my_form[key].name] != true){
                                radio_arr[my_form[key].name] = null;
                            }
                            if(my_form[key].checked){
                                radio_arr[my_form[key].name] = true;
                            }
                    }else{
                    if (x == null || x == "") {
                        //console.log(form[key].name.toString() + " must be filled out");
                                err = true;
                                err_target = my_form[key].name;
                        //return false;
                    }
                    }

    }
    //console.log(radio_arr);
    var rad_err = false;
    for (key in radio_arr) {
        if(rad_err){
            break;
        }
        var x = radio_arr[key];
    if (x == null || x == "") {
        //console.log("RADIO> "+key + " must be filled out");
                rad_err = true;
                err_target = key;
    }
    }
    if(err || rad_err){
        // some error stuff, for me show prepared error/help box with class [".rq_message_box_"+err_target] / err_target is name of input like [.rq_message_box_firsname]
        $(".rq_message_box_"+err_target).show(); //show  error message for input
        scTo("#"+err_target); //scroll to - custom func
        return false;
    }else{
        return true;
    }
} 
```

# java - Java 代理服务器 - 一些请 求中止，奇怪的错误

> ID：13212851
> 
> 赞同：1
> 
> 时间：2012-11-03T19:47:10.103
> 
> 标签：java, http, sockets, proxy

我对 Java 语言有点陌生，但在其他技术方面有很好的经验。

现在我正在创建一个代理服务器，并且我提出了似乎对单个请求工作正常的代码，但是当我试图打开一些`html`加载大量等的页面时`styles`，`images`部分请求刚刚中止（这是萤火虫告诉我的）

因此，将尝试简化代码并尽可能具体地显示确切的问题

这是主要课程：

```
public class ProxyThread {
    public static void main(String[] args) {
        ProxyThread Proxy = new ProxyThread();            
        Proxy.start();
    }

    public void start() {
        ServerSocket server = new ServerSocket(this.portNumber, 1);
        while(true) {
            Socket serverClient = server.accept();
            this._threads[threadCount] = new Thread( new RequestProcess( serverClient, threadCount++ ));
        }
    }
} 
```

这是处理每个请求的 RequestProcess 的代码

```
public class RequestProcess  implements Runnable {

    public void start()  throws InterruptedException {
        this.serverIn = new BufferedReader( new InputStreamReader( this.serverClient.getInputStream() ) );
        this.serverOut = this.serverClient.getOutputStream()   ;

        String currentBuffer;
        String request = "";
        String host = "";
        int port = 0;

        while ((currentBuffer = this.serverIn.readLine()) != null) {
                if (currentBuffer.length() == 0) {
                    break;
                }
                request += currentBuffer + "\r\n";

                if (currentBuffer.startsWith("CONNECT ") || currentBuffer.startsWith("GET ")) {
                    host = this.parseHost( currentBuffer );
                    port = this.parsePort( currentBuffer );    
                }     
        }    
        request += "\r\n";    
        if (host.isEmpty() || request.isEmpty()) {

            throw new InterruptedException("request or host empty, so exiting ");
        }    

        clientRequestProcess clientProcess = new clientRequestProcess( host, port, request, this.threadNum );

        byte[] response = clientProcess.processRequest();

        this.serverOut.write(response);
        this.serverOut.close();    
    }
} 
```

这是处理请求并将其发送到实际服务器的类

```
public class clientRequestProcess {    

    public byte[] processRequest()
    {
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        byte buf[] = new byte[256*1024];

        Socket clientSocket = new Socket( host, port );   
        clientSocket.getOutputStream().write( request.getBytes() );
        InputStream is = clientSocket.getInputStream();

        int r = 1;
        while (r > 0) {
            r = is.read(buf);
            if (r > 0) {
                bos.write(buf, 0, r);      
            }
        }   
        return bos.toByteArray();
    }   
} 
```

所有代码都是草稿，并经过简化以显示其工作原理的大图。所有的 try-catch 块、调试信息等都在这里丢失。

步骤 - 设置浏览器以使用 JAVA 代理 - 打开一些站点 - 部分 http 请求已成功处理并返回正确的响应 -**部分请求在 firebug 中显示为中止。问题是那部分是绝对随机的，所以一次加载某个文件，另一次加载**

代码故障排除显示第一行请求（来自浏览器）是空的，所以我的情况

```
 if (currentBuffer.length() == 0) {
      break;
 } 
```

中断读取套接字，因此它对浏览器没有任何反应，连接被中止

我阅读了关于 http 协议的 rfc 并发现 https 请求一旦遇到 \r\n 就被认为结束了，所以这就是我使用该条件的原因如果我只是在单独的选项卡中打开该文件 - 它加载成功，没关系我试图重新加载它多少次。但是，当一次加载一堆文件时 - 其中一些随机文件被中止。因此，只有在加载大量文件时才会发生这种情况，当一个甚至 3-5 个文件加载正常时

有任何想法吗？谢谢

# java - JCombox 可以共享模型但不能共享项目状态吗？

> ID：13212853
> 
> 赞同：0
> 
> 时间：2012-11-03T19:47:15.157
> 
> 标签：java, swing, jcombobox

在我的应用程序中，我有 3 个组合框，每个组合框都包含相同的项目列表，但是每个组合框都可以选择不同的项目。还有一个按钮，允许添加一个新项目，当它被添加时，它应该被添加到所有三个组合框，这个新添加的项目也应该成为组合框 3 的选定项目，但组合框 1 和 2 的选定项目不应该改变。

我正在尝试确定所有三个组合框是否应该共享相同的`DefaultComboBoxModel`. 这将使新添加的项目很容易出现在每个组合中，但与 JList 不同的是，没有单独的列表选择模型似乎会破坏它。

但是 JComboBoxModel 的 Javadocs 说：

> *所选项目不一定由基础 ListModel 管理。这种不相交的行为允许临时存储和检索模型中的选定项目。*

那么这是否意味着我可以对所选项目使用不同的机制，我不清楚上述句子的含义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:55:40.700

介绍的唯一方法`JComoboBoxModel`是`getSelectedItem()`and `setSelectedItem(Object anItem)`，所以我会说不。

基本上，您可以将每个模型的数据放入一个共享列表中。`DefaultComboBoxModel`然后，您可以创建使用此数据列表的组合框模型的三个新实例（使用您自己的实现或播种 a ）。然后这些将分别应用于每个组合框，以便每个组合框都有自己的模型。

```
List sharedData = //... Create a list of data...
JComboBox box1 = new JComboBox(new MyComboBoxModel(list));
JComboBox box2 = new JComboBox(new MyComboBoxModel(list));
JComboBox box3 = new JComboBox(new MyComboBoxModel(list)); 
```

**我的组合框模型**

```
public class MyComboBoxModel extends AbstractListModel implements ComboBoxModel {

    private List data;
    private Object selectedItem;
    public MyComboBoxModel(List dat) {
        this.data = data;
    }

    @Override
    public int getSize() {
        return data.size();
    }

    @Override
    public Object getElementAt(int index) {
        return data.get(index);
    }

    @Override
    public void setSelectedItem(Object anItem) {
        selectedItem = anItem;
    }

    @Override
    public Object getSelectedItem() {
        return selectedItem;
    }

} 
```

如果这就是你所拥有的，你可以很容易地使用一个数组

# javascript - 使用 jquery mobile 显示 XML - 性能？

> ID：13212858
> 
> 赞同：1
> 
> 时间：2012-11-03T19:48:18.900
> 
> 标签：javascript, xml, xslt, jquery-mobile, xpath

我正在为移动设备开发一个应用程序。我正在使用 jquery mobile 和 phonegap（访问设备的内部功能）。我有一个包含 10 到 1000 多个节点的大 xml 文件。基本上我需要在自己的页面上显示每个节点。在 jquery mobile 中，通常的做法是构建一个包含所有页面的 html 文件。

我正在考虑构建这样的东西：

```
<div data-role="page" id="1">JS template filled with content of node1 from xml and linking to page 2.</div>
<div data-role="page" id="2">JS template filled with content of node2 from xml and linking to page 3.</div> 
```

如果我通过使用 javascript 解析 XML 文件来创建如此大的页面，我担心应用程序会非常慢。以我的经验，浏览器不能很好地处理页面，如果它们很长的话。xml 文件可以包含文本以及指向图像、视频和音频文件的链接。我尝试在客户端通过 xslt 呈现 xml 文件，但遇到了问题，大多数 android 浏览器不支持 xsl（至少我的不支持）。我需要在客户端找到一个解决方案，因为该应用程序也应该在没有互联网连接的情况下工作。

你能指出我正确的方向吗？也许我错了，如果主 html 文件包含几百页，这没什么大不了的？我也有想法从 xml 中一一获取页面，因为我一次不会显示超过一页。但我不确定如何跟踪我已经向用户显示的节点。xml 文件不包含自动递增标识符。所以很难通过 xpath 按顺序访问特定节点，还是我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T09:31:18.053

以大多数人的标准来看，具有 1000 个节点的 XML 文件非常小（而具有 10 个节点的 XML 文件是微不足道的），因此很难看出您的真正问题是什么。

尽管某些移动浏览器没有原生 XSLT 支持，但您可以尝试 Saxon-CE，它提供了可在任何支持 Javascript 的浏览器上运行的 XSLT 2.0 实现。

# math - Clojure 中的简单计算器（加法函数输入）

> ID：13212861
> 
> 赞同：1
> 
> 时间：2012-11-03T19:48:48.667
> 
> 标签：math, clojure, functional-programming, addition

我正在尝试编写一个带有加法、减法等功能的简单计算器。

我的问题是获取用户输入。如何将数值字符串转换为向量？还有什么是编写程序的更好方法？

```
(ns scalc.core)

(defn add
  [numbers]
  (println (apply + numbers)))

(defn numchoose
  []
  (println "What numbers?: ")
  (let [numbers (read-line)] numbers))

(defn opchoose
  []
  (println "What operation would you like to do?: ")
  (let [operation (read-line)]

    (if (= operation "add")
      (do
        (println "You chose to add.")
        (let [numvect (numchoose)]
              (add [numvect]))))))

(defn -main
  [& args]

  (opchoose)
  (numchoose)) 
```

这是错误：

```
 ~/clj/scalc 1/7 % lein trampoline run -m scalc.core
What operation would you like to do?: 
add
You chose to add.
What numbers?: 
5 7
Exception in thread "main" java.lang.ClassCastException: Cannot cast java.lang.String to java.lang.Number
        at java.lang.Class.cast(Class.java:3005)
        at clojure.core$cast.invoke(core.clj:318)
        at clojure.core$_PLUS_.invoke(core.clj:927)
        at clojure.lang.AFn.applyToHelper(AFn.java:161)
        at clojure.lang.RestFn.applyTo(RestFn.java:132)
        at clojure.core$apply.invoke(core.clj:601)
        at scalc.core$add.invoke(core.clj:5)
        at scalc.core$opchoose.invoke(core.clj:21)
        at scalc.core$_main.doInvoke(core.clj:27)
        at clojure.lang.RestFn.invoke(RestFn.java:397)
        at clojure.lang.Var.invoke(Var.java:411)
        at user$eval15.invoke(NO_SOURCE_FILE:1)
        at clojure.lang.Compiler.eval(Compiler.java:6511)
        at clojure.lang.Compiler.eval(Compiler.java:6501)
        at clojure.lang.Compiler.eval(Compiler.java:6477)
        at clojure.core$eval.invoke(core.clj:2797)
        at clojure.main$eval_opt.invoke(main.clj:297)
        at clojure.main$initialize.invoke(main.clj:316)
        at clojure.main$null_opt.invoke(main.clj:349)
        at clojure.main$main.doInvoke(main.clj:427)
        at clojure.lang.RestFn.invoke(RestFn.java:421)
        at clojure.lang.Var.invoke(Var.java:419)
        at clojure.lang.AFn.applyToHelper(AFn.java:163)
        at clojure.lang.Var.applyTo(Var.java:532)
        at clojure.main.main(main.java:37) 
```

编辑：解决的程序现在看起来像这样：

```
(ns scalc.core)

(defn add [numbers]
  (reduce + numbers))

(defn numchoose []
  (let [nums (re-seq #"\d+" (read-line))]
    (map #(Integer/parseInt %) nums)))

(defn delegate []
  (println "What operation would you like to do?: ")
  (let [operation (read-line)]

    (when (= operation "add")
      (println "You chose to add.")
      (println "What numbers? ")
      (add (numchoose)))))

(defn -main
  [& args]

  (delegate)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T20:19:22.433

要获取数字，您可以使用[re-seq](http://clojuredocs.org/search?x=0&y=0&q=re-seq&lib=clojure_core)：

```
(re-seq #"\d+" "123 456 789") => ("123" "456" 789") 
```

不过，您仍然只有字符串而不是数字。您可以使用 read-string 来获取数字（read-string 很方便，但并非在所有情况下都安全。这里我们确保这些字符串中确实只有数字，所以没关系）。

```
(read-string "5") => 5 
```

而不是`(apply + numbers)`你可以使用[reduce](http://clojuredocs.org/clojure_core/clojure.core/reduce) : `(reduce + numbers)`，你的 add 函数也不应该打印任何东西（你应该尽可能地将*函数*函数与副作用函数分开）。

这`(let [numbers (read-line)] numbers)`等于`(read-line)`。不要把事情复杂化！

代替

```
(if (= operation "add")
      (do ... )) 
```

你可以写

```
(when (= operation "add")
     ...) 
```

[when](http://clojuredocs.org/clojure_core/clojure.core/when)只是一个宏，当您不需要 ifs 中的 else 情况时很有用（它在 do 中包装条件之后的所有内容，并在条件评估为 false 时评估为 nil）。

# xpages - how can i add styleclass to form tag in xpages

> ID：13212865
> 
> 赞同：3
> 
> 时间：2012-11-03T19:49:42.683
> 
> 标签：xpages

I need to add `StyleClass` to a form tag generated in `xPages`.

I don't know if can change this control in new theme but I only need for one `xPage` in my app, this is the code generated:

```
<form id="view:_id1" method="post" action="/blabla.nsf/index.xsp" 
class="xspForm" enctype="multipart/form-data"> 
```

And I need this modify class e.g:

```
<form id="view:_id1" method="post" action="/blabla.nsf/index.xsp" 
class="newclass otherclass" enctype="multipart/form-data"> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T20:19:20.530

You can add the following to your theme to change the class of the form tag:

```
<control mode="override">
    <name>Form</name>
    <property>
        <name>styleClass</name>
        <value>newclass otherclass</value> 
    </property>
</control> 
```

**Update:** use the following to only use this on an XPage called index.xsp:

```
<control mode="override">
    <name>Form</name>
    <property>
        <name>styleClass</name>
        <value>#{javascript:(view.getPageName() == '/index.xsp')?'newClass otherClass':'xspForm'}</value>
    </property>
</control> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-03T20:21:41.040

You can add your own xp:form on the XPage:

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core" createForm="false">
    <xp:form styleClass="newclass otherclass">
         ... add your components here ...
    </xp:form>
</xp:view> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-01T01:38:53.480

If you disable form creation in Xpage >All Properties > createForm > False, you can create your own form with your own styleClasses; and that will replace the default form.

[![enter image description here](../Images/04204a7fc761ef04e48a0300310de362.png)](https://i.stack.imgur.com/J6MUW.png)

# java - Java Play Framework 2.0 getHeader() 返回 null

> ID：13212866
> 
> 赞同：0
> 
> 时间：2012-11-03T19:49:55.890
> 
> 标签：java, rest, playframework, playframework-2.0

我正在尝试使用以下代码来检索自定义 HTTP 标头，但每次都为空。有谁知道为什么它可能不起作用？我搜索了高低，但无法弄清楚为什么它不起作用。

```
public static Result test() 
    {

        String v = request().getHeader("version");

        System.out.println("test" + v);

return ok("success");
} 
```

我也使用我们的 iPhone 应用程序和 restclient.jar 测试了代码，所以问题似乎不是客户端没有发送标头。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T21:09:49.507

您的代码适用于[curl](http://curl.haxx.se/download.html)，请在控制台中输入：

```
curl --header "version: 1.2" localhost:9000/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T00:50:51.210

我也用头撞了几个小时。事实证明，Play 2.0 使用大写 HTTP 标头做了一些奇怪的事情。尽管我以“Message-Sender-Uid”的形式发送了一个标头，但它在 Play 中显示为“MESSAGE-SENDER-UID”。出于某种原因，Play 将整个标题大写。解决方案是在标题映射中简单地查找标题的全大写版本。

如果这失败了，那么您总是可以将所有标题打印到 Logger 以查看您的标题是否存在。

就像是

```
Http.Request req = Http.Context.current().request();
Map<String, String> headerMap = req.headers();
for (String headerKey : headerMap.keySet()) {
    Logger.info("Key: " + headerKey + " - Value: " + headerMap.get(headerKey));
} 
```

在您的控制器方法中应该可以很好地解决这个问题。

记得

```
import play.mvc.*; 
```

# android - 模板移动应用程序（Android & iOS）设计

> ID：13212868
> 
> 赞同：-1
> 
> 时间：2012-11-03T19:49:58.967
> 
> 标签：android, ios, design-patterns, mobile, application-design

我需要创建许多类似的简单应用程序（Android 和 iOS），它们包含四个选项卡，每个选项卡都包含列表视图，但它必须离线。

应用程序之间的区别仅在于列表和选项卡名称的内容。设计这个应用程序的最佳方式是什么？

第一个想法是放置配置文件，应用程序将从那里加载信息。

当然，我不是第一个处理这个问题的人，也许已经有针对此类问题的解决方案或设计？

也许有在编译时而不是在运行时加载内容的解决方案（如我的解决方案）？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:04:36.677

`You can create a class containing all the information you want and you can use the data from`该类而不是配置文件，您可以为您创建的每个单独的应用程序替换该类文件。这将在编译时而不是运行时完成。

**对于运行时间**，最好使用 iOS 的 plist 文件和 android 的 xml/properties 文件

**在编译时**创建一个包含所有数据的类并为每个应用程序版本替换它

# json - ajax 发布多个参数未正确传递给 asp.net mvc 操作

> ID：13212872
> 
> 赞同：1
> 
> 时间：2012-11-03T19:50:35.380
> 
> 标签：json, asp.net-mvc-3, jquery

我无法将 2 个参数作为 json 传递给操作方法。我有以下 ASP.net MVC3 操作。

```
 [HttpPost]
    public JsonResult Create( PatientContactEpisodes patientcontactepisode, IList<PatientContactEpisodeProcedures> patientcontactepisodeprocedures) 
```

我的 ajax 帖子看起来像这样。

```
 $("#SaveButton")
        .button()
        .click(function () {
            var episode = getpatientcontactepisode();
            $.ajax({
            type: 'POST',
            traditional: true,
            url: "/User/PatientContactEpisodes/Create",
            contentType: 'application/json, charset=utf-8',
            data: {patientcontactepisode: JSON.stringify(episode), patientcontactepisodeprocedures: JSON.stringify(createArray)},
            //data: JSON.stringify(episode),
            dataType: "json",
            success: function (results) {                                                           
                alert("success");
            }
        });
     }); 
```

**问题**

问题是当我将两个参数都发送到操作时，该值似乎没有被传递。两者都是空/空。而当我发送一个参数时

```
 //data: JSON.stringify(episode), or //data: JSON.stringify(createarray), 
```

以上工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:00:02.337

尝试：

**数据：{JSON.stringify({patientcontactepisode: episode, patientcontactepisodeprocedures:createArray})},**

这应该为你做的事情。

# php - 如何在成功的 AJAX/jQuery POST 上返回 PHP 变量

> ID：13212882
> 
> 赞同：8
> 
> 时间：2012-11-03T19:51:45.117
> 
> 标签：php, jquery, ajax, codeigniter

如何使用 AJAX 在 PHP 中返回变量？我目前在我的控制器中使用 echo 来显示被调用价格`dropdown .change`中的`div`价格。

但是我有一个隐藏字段，我需要在更改时将行 ID 返回。如何在 jQuery 中分配返回变量，以便可以在隐藏字段中回显它？

# jQuery

```
$(document).ready(function() {
    $('#pricingEngine').change(function() {
         var query = $("#pricingEngine").serialize();
         $('#price').fadeOut(500).addClass('ajax-loading');
         $.ajax({
             type: "POST",
             url: "store/PricingEngine",
             data: query,
             success: function(data)
             {
                  $('#price').removeClass('ajax-loading').html('$' + data).fadeIn(500);
             }
         });
    return false;
   });

}); 
```

# 控制器

```
function PricingEngine()
{
    //print_r($_POST);
    $this->load->model('M_Pricing');
    $post_options = array(
      'X_SIZE' => $this->input->post('X_SIZE'),
      'X_PAPER' => $this->input->post('X_PAPER'),
      'X_COLOR' => $this->input->post('X_COLOR'),
      'X_QTY' => $this->input->post('X_QTY'),
      'O_RC' => $this->input->post('O_RC')
                          );

    $data = $this->M_Pricing->ajax_price_engine($post_options);

    foreach($data as $pData) {
        echo number_format($pData->F_PRICE / 1000,2);
        return $ProductById = $pData->businesscards_id;
    }
} 
```

# 看法

这是我想在每次更改表单时将 VAR 传递给的隐藏字段。" />

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-03T19:54:39.360

嗯.. 一种选择是返回一个 JSON 对象。要在 PHP 中创建 JSON 对象，您需要从一组值开始，然后执行`json_encode($arr)`. 这将返回一个 JSON 字符串。

```
$arr = array(
  'stack'=>'overflow',
  'key'=>'value'
);
echo json_encode($arr);

{"stack":"overflow","key":"value"} 
```

现在在你的 jQuery 中，你必须告诉你的`$.ajax`调用你期待一些 JSON 返回值，所以你指定另一个参数 - `dataType : 'json'`。现在您在`success`函数中的返回值将是一个普通的 JavaScript 对象。

```
$.ajax({
  type: "POST",
  url: "...",
  data: query,
  dataType: 'json',
  success: function(data){
    console.log(data.stack); // overflow
    console.log(data.key);   // value
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T19:55:20.053

```
echo json_encode($RESPONDE);
exit(); 
```

退出是不显示除了答案之外的其他东西。RESPONDE 最好是数组或对象。您可以访问它

```
success: function(data)
             { data } 
```

data 是响应数组或您回显的任何内容。例如...

```
echo json_encode(array('some_key'=>'yesss')); exit(); 
```

在 jquery

```
success: function(data){ alert(data.some_key); } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T19:40:43.980

如果你只从 php 响应到 ajax 返回单个值，那么你可以使用 val 方法将其设置为隐藏字段

```
$("#hidden_fld").val(return_val); 
```

# sql - 我怎样才能透视这些数据？

> ID：13212883
> 
> 赞同：1
> 
> 时间：2012-11-03T19:51:45.910
> 
> 标签：sql, sql-server, tsql, pivot

首先，对不起这个中等标题。在这方面没有取得很大的成功。

所以 - 我有一个数据表，其中一个人计划的每个志愿者轮班都有一行。许多人，因为他们的时间很慷慨，已经报名参加了多次轮班。我想要的是 PIVOT 这个数据，我最终得到每人一行*，*每个班次都有一组列。到目前为止，我已经花了大约 90 分钟，但无法弄清楚如何在没有应用聚合函数的情况下进行 PIVOT。

我的意思是每个人都安排至少一个班次，所以每个人的行都会有他们唯一的 ID、他们的姓名、他们的电话号码和他们的地区。然后会有一组 Shift1 的列 - 角色/状态/开始时间/结束时间/等。- 因为每个人都已经报名了至少一个班次，所以每个人都会填写。然后，将为已注册 2+ 班次的人填充 Shift2 列集，为已注册 3+ 班次的人填充 Shift3 等。

我当前的表架构：

```
CREATE TABLE [dbo].[confirmexport](
    [PersonID] [int] NULL,
    [EventType] [varchar](14) NULL,
    [Shift] [varchar](10) NULL,
    [StartDate] [datetime] NULL,
    [StartTime] [datetime] NULL,
    [EndDate] [datetime] NULL,
    [EndTime] [datetime] NULL,
    [Location] [varchar](39) NULL,
    [Role] [varchar](16) NULL,
    [Status] [varchar](9) NULL,
    [FirstName] [varchar](20) NULL,
    [LastName] [varchar](22) NULL,
    [Phone] [bigint] NULL,
    [Region] [varchar](9) NULL
) ON [PRIMARY] 
```

`PersonID`除、`FirstName`、`LastName`、`Phone`和之外的所有列`Region`都是班次特定的。

在一个理想的世界中，我最终会得到一张看起来像这样的表格：

```
CREATE TABLE [dbo].[confirmexportpivoted](
    [PersonID] [int] NULL,
    [Phone] [bigint] NULL,
    [FirstName] [varchar](20) NULL,
    [LastName] [varchar](22) NULL,
    [Region] [varchar](9) NULL,
    [EventType1] [varchar](14) NULL,
    [Shift1] [varchar](10) NULL,
    [StartDate1] [datetime] NULL,
    [StartTime1] [datetime] NULL,
    [EndDate1] [datetime] NULL,
    [EndTime1] [datetime] NULL,
    [Location1] [varchar](39) NULL,
    [Role1] [varchar](16) NULL,
    [Status1] [varchar](9) NULL,
    [EventType2] [varchar](14) NULL,
    [Shift2] [varchar](10) NULL,
    [StartDate2] [datetime] NULL,
    [StartTime2] [datetime] NULL,
    [EndDate2] [datetime] NULL,
    [EndTime2] [datetime] NULL,
    [Location2] [varchar](39) NULL,
    [Role2] [varchar](16) NULL,
    [Status2] [varchar](9) NULL
) ON [PRIMARY] 
```

除了我的数据所需的尽可能多的列集。或者 - 如果这是一个交易破坏者，我绝对可以使用 3。有什么建议吗？

在此先感谢-我非常困惑，希望能提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T20:28:55.053

嗯，我很难重现整个表格，所以我只使用了开始和结束日期和时间，但解决方案应该适用于任意数量的列。您可以在 SQL FIDDLE 中对其进行测试

[**SQL 提琴示例**](http://sqlfiddle.com/#!3/cb80f/36)

```
declare @columns nvarchar(max), @stmt nvarchar(max)
declare @Temp_Columns table (RowNum int, COLUMN_NAME nvarchar(128))

insert into @Temp_Columns
select R.RowNum, c.COLUMN_NAME
from
(
    select row_number() over (partition by c.PersonID, c.FirstName, c.LastName, c.Phone, c.Region order by c.StartDate asc, c.EndDate asc) as RowNum
    from confirmexport as c
) as R
    inner join INFORMATION_SCHEMA.[COLUMNS] as c on c.TABLE_NAME = 'confirmexport' and c.COLUMN_NAME not in ('PersonID', 'FirstName', 'LastName')
order by 1, 2

select @columns = isnull(@columns + ', ', '') + 
    'min(case when A.RowNum = ' + cast(T.RowNum as nvarchar(128)) + 
    ' then A.[' + T.COLUMN_NAME + '] else null end) as [' + 
    T.COLUMN_NAME + cast(T.RowNum as nvarchar(128)) + ']'
from @Temp_Columns as T

select @stmt = '
select
    A.PersonId, A.FirstName, A.LastName, A.Phone, A.Region,' + @columns + '
from
(
    select
        c.*,
        row_number() over (partition by c.PersonID, c.FirstName, c.LastName, c.Phone, c.Region order by c.StartDate asc, c.EndDate asc) as RowNum
    from confirmexport as c
) as A
group by
    A.PersonId, A.FirstName, A.LastName, A.Phone, A.Region'

exec sp_executesql
    @stmt = @stmt 
```

# testing - 将多个测试框架和套件混合在一起

> ID：13212889
> 
> 赞同：1
> 
> 时间：2012-11-03T19:52:14.823
> 
> 标签：testing, tdd, bdd

有谁知道将多个测试框架混合和合并在一起的好方法，以便它们都可以批量运行并返回一个可靠的总体总数，哪些测试失败了哪些框架和套件/规范。

因此，假设我对特定项目的测试设置如下所示：

*   我正在使用`Rails`（Ruby）并使用`RSpec`来测试它。
*   我也在使用`Cucumber`我的`Rails`应用程序。
*   我正在使用`MochaJS`用于`Testacular runner`测试`JavaScript`。
*   我`Jasmine`用来测试`NodeJS`我也在使用的一些应用程序。

现在要测试这些测试组中的每一个，我必须启动它们各自的框架/实例，启动并运行每个测试组的“运行测试”操作，然后汇总结果并找出哪些测试失败，哪些没有吨。

有谁知道设计用于执行此操作的工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T20:00:13.513

您可能需要一个构建自动化软件来一起执行所有这些任务。每当您的一个测试过程失败时，您都会得到详细的反馈。

当您正在开发一个 ruby​​ 应用程序时，也许 Buildr 是最佳选择，但您也可以使用 Ant 或 Rant...您可以在这里找到完整的工具列表： [http ://en.wikipedia.org/wiki/ List_of_build_automation_software](http://en.wikipedia.org/wiki/List_of_build_automation_software)

# objective-c - 从头到尾设置证书、配置文件和代码签名

> ID：13212895
> 
> 赞同：2
> 
> 时间：2012-11-03T19:52:50.760
> 
> 标签：objective-c, xcode, app-store, code-signing, xcode4.5

我觉得我以前被介绍过“App Signing Hell”。对于我的生活，我无法将我的 iPhone 应用程序从 Xcode (4.5.1) 导出到 App Store。

假设我已删除所有证书、配置文件、密钥等。

到目前为止，我发现的每个指南、youtube 视频或博客都是过时的分步指南或释义指南。

我需要采取哪些步骤才能将我的应用程序导出到 .ipa？我需要在项目的“代码签名”选项下的调试/发布选项下选择哪些选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T13:55:31.863

虽然这不是一个编程问题，应该在其他论坛上提问，但我明白被困在这个地狱里是多么令人沮丧。我们都去过那里。下面是如何存档和上传到应用商店的 7 个简单步骤。

这是归档的概要：

1-在左侧窗格中选择项目的名称，然后选择中间的项目而不是目标。2-在配置突出显示释放并按下其下方的加号按钮进行复制。3-在弹出窗口中选择重复发布，并在突出显示时将其更改为分发。4-在其下方用于命令行选择分发 5-现在在顶部选择产品-> 编辑方案，然后选择存档。在右侧将构建配置更改为分发。确保在管理器中显示存档也被选中。6-回到项目级别（参见1）选择构建设置，然后进入代码签名并选择分发，然后从下拉菜单中选择您的分发配置文件。在本节中，我总是选择自动配置文件。7-在您选择模拟器的项目上，选择ios设备。那应该为您解决问题。请记住，这是 ios 6 归档。

# list - 我可以为我的情况类型重复无序列表标签吗？

> ID：13212898
> 
> 赞同：2
> 
> 时间：2012-11-03T19:53:16.220
> 
> 标签：list, validation, unordered

我只是想问一下这种编码方法是否仍然有效。

```
<div class="one-third column">
  <ul class="nav-link">
    <li class="button">Going to put code here.</li>
  </ul>
</div>
<div class="one-third column">
  <ul class="nav-link">
    <li class="button">Going to put code here.</li>
  </ul>
</div>
<div class="one-third column">
  <ul class="nav-link">
    <li class="button">Going to put code here.</li>
  </ul>
</div> 
```

如您所见，我在 div 类中重复了无序列表。这对我来说是必要的，因为我使用的是 Skeleton 样板，并且我需要它们位于 3 列中，并带有无序列表。我尝试将列表项放入 div 中，但验证器指出您不能将 div 标签放入无序列表中。所以我问这个方法我是否仍然可以使用，因为这个网站将被用作公共模板。如果有另一种方法可以编码，请告诉我。谢谢你。

# mysql - MySQL 异常：执行 SQL 事务

> ID：13212900
> 
> 赞同：0
> 
> 时间：2012-11-03T19:53:27.027
> 
> 标签：mysql, playframework-2.0, anorm

我正在尝试向 MySQL 提交一个 sql 事务，但我让自己通过了`MySQLSyntaxErrorException`.

我正在使用的代码是：

```
implicit connection => 
        SQL("""
            start transaction;
            insert into projects(id_user, name, description) values({idUser}, {name}, {description});
            set @last_id = last_insert_id();
            insert into assigned(id_user, id_project) values({idUser}, @last_id);
            commit;
        """)
    .on('idUser -> idUser,
        'name -> project.name,
        'description -> project.description
    ).execute() 
```

我得到的例外：

```
[MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'insert into projects(id_user, name, description) values(1, 'First inserted proje' at line 1] 
```

我开始认为我根本无法使用 Anorm 执行此类语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T15:06:34.350

您不能以这种方式使用事务。您必须了解 anorm 只是现有 jdbc 库的包装器。默认情况下，使用**withConnection**和**SQL**时：

```
DB.withConnection { conn => 
    SQL("...
} 
```

您的查询使用[PreparedStatement](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)进行转换。意味着`;`字符导致错误。

因此，如果你想使用事务，你必须使用[anorm 的机制](http://www.playframework.org/documentation/2.0.4/ScalaDatabase)。

```
DB.withTransaction { conn =>
    SQL("...
} 
```

# c++ - 在 C++ 中，是“返回”；与“返回NULL；”相同吗？

> ID：13212901
> 
> 赞同：7
> 
> 时间：2012-11-03T19:53:36.043
> 
> 标签：c++, null, return

我的问题和C++`return;`一样吗？`return NULL;`

我知道在 C++ 中，与指针上下文中`return NULL;`的相同`return 0;`。显然，对于整数，情况并非如此，因为 NULL 不能加、减等。有些人鼓励使用 0 而不是 NULL 作为指针，因为它更便于可移植性。我很好奇这是否是另一个发生等价的例子。

我怀疑它们是等价的，因为`return;`说返回“无”而 NULL 是“无”。但是，如果有人可以确认或否认这一点（当然有解释），我将不胜感激！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-03T19:59:38.053

> 和C++中`return;`的一样吗？`return NULL;`

不。

`return`用于从没有返回值的函数中“中断”出来，即返回类型为`void`.

`return NULL`返回 value `NULL`，并且它所在函数的返回类型必须与`NULL`.

* * *

> 我知道在 C++ 中，与指针上下文中`return NULL;`的相同`return 0;`。

有点。`NULL`可能不等同于`0`，但它至少会转换为。

* * *

> 显然，对于整数，情况并非如此，因为 NULL 不能加、减等。

您可以很好地对指针执行加法和减法。但是，`NULL`无论如何都必须具有整数类型（C++03 中的 4.10/1 和 18.1/4），所以它没有实际意义。`NULL`很可能是一个扩展为`0`or的宏`0UL`。

`NULL`但是，如果它实际上是您编写的，一些现代编译器至少会警告您。

* * *

> 有些人鼓励使用 0 而不是 NULL 作为指针，因为它更便于移植。我很好奇这是否是另一个发生等价的例子。

不，我不同意这个建议。虽然我可以看到它的来源，因为`NULL`' 的确切定义因实现而异，所以当您切换到 C++11 时，如果没有其他东西是自记录的，那么using`NULL`将使替换它变得更加容易*。*`nullptr`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-03T19:55:54.070

`return``void`仅当您的函数在构造函数或析构函数中声明时，没有表达式才有效。`int`如果您尝试从返回 a 、 a等的函数中不返回任何内容`double`，您的程序将无法编译：

> 错误：没有值的返回语句，在返回“int”的函数中</p>

根据 C++11 的 §6.6.3/2：

> 既没有表达式也没有花括号初始化列表的 return 语句只能用于不返回值的函数，即返回类型为 void、构造函数 (12.1) 或析构函数 (12.4) 的函数.

（感谢 sftrabbit 的出色评论）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T19:56:25.870

`return`，`return 0`并且`return NULL`不*一样*。

`return`仅对返回的函数有效`void`，例如：

```
void func(...); 
```

`return 0`用于返回某种`int`类型的函数，例如：

```
unsigned long func(...); 
```

虽然它也适用于浮点类型：

```
double func(...) { ... return 0; } 
```

`return NULL`用于返回某种`pointer`类型的函数，例如：

```
Something *func(...); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T19:55:33.937

它像一个 void 函数一样工作，其中 return 将简单地退出函数并且根本不返回任何内容。以前有人[问过](https://stackoverflow.com/questions/9583721/c-return-without-value)这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T19:58:19.520

生成的机器代码有所不同：

`return`只会将指令指针放回调用者的来源。

`return 0`或者`return NULL`将放入`0`堆栈，**然后**将指令指针放回调用者的来源。（在 C 中，`NULL`通常映射到`0`，尽管在不同的实现中可能（可能？）有所不同。在 C++ 中，`NULL`不应该使用）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-21T18:23:44.737

```
const testNullParity = () => {
 return null 
}

const testNullParity2 = () => {
 return 
}

console.log(testNullParity()) //null
console.log(testNullParity2())  //undefined 
```

在 javascript 中，return 是 return undefined 的缩写，因为 null 和 undefined 是两种不同的类型，但它们大致相等，即。testNullParity() == testNullParity2() 为真但不是 testNullParity() === testNullParity2()

# iphone - 登录屏幕 ios5 冻结

> ID：13212904
> 
> 赞同：0
> 
> 时间：2012-11-03T19:54:03.230
> 
> 标签：iphone, ios, login

我从应用程序委托设置了一个登录屏幕，如下所示：

```
 NSUserDefaults *def = [NSUserDefaults standardUserDefaults];
BOOL needsPassCheck = [def boolForKey:kHasPassword];
if (needsPassCheck) {
    UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle: nil];

    VerifyPasswordViewController *passC = (VerifyPasswordViewController *)[mainStoryboard instantiateViewControllerWithIdentifier:@"passCheck"];
    passC.loginCheck = YES;
    self.window.rootViewController = passC;
} 
```

在视图控制器中，启动方法是：

```
 - (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    if (self.loginCheck) {
        [self.topBar setHidden:YES];
        self.enterPLabel.text = NSLocalizedString(@"Enter Password", @"Enter Password");
    }else {
        [self.topBar setHidden:NO];
        self.enterPLabel.text = NSLocalizedString(@"Enter Old Password", @"Enter Old Password");
    }

    [self.continueButton setTitle:NSLocalizedString(@"Continue", @"Continue") forState:UIControlStateNormal];
 }

-(void)viewDidAppear:(BOOL)animated
{

    [self.passwordTextField becomeFirstResponder];

    [self viewDidAppear:animated];

} 
```

问题是它似乎陷入了无限循环：http: [//i.imgur.com/KmarG.png](http://i.imgur.com/KmarG.png)

问题是什么？我如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:58:14.997

是的，很明显，您的代码中有递归。在每个 viewDidAppear 中，您调用另一个 viewDidAppear。代替：

```
[self viewDidAppear:animated]; 
```

称呼：

```
[super viewDidAppear:animated]; 
```

# hyperlink - 模态中的模态链接

> ID：13212905
> 
> 赞同：1
> 
> 时间：2012-11-03T19:54:05.710
> 
> 标签：hyperlink, popup, modal-dialog, virtuemart

我正在使用 VirtueMart 2.0.10 和 Joomla 2.5，产品页面设置为在模式弹出窗口中打开。这样，对购物车的任何添加都会触发包含链接的第二个模态（模态中的模态，如果您愿意）。目前链接在打开的第一个模式中打开，但我希望页面在我们开始的原始窗口中打开。

如何修改 href 链接以在原始窗口中而不是在模式弹出窗口中打开？还是我需要为此编写一些脚本？

谢谢你的帮助！！！

# ios - 从 Xcode 获取与索引路径无关的错误

> ID：13212906
> 
> 赞同：1
> 
> 时间：2012-11-03T19:54:13.470
> 
> 标签：ios, xcode, uitableview

我已经搜索了互联网，并没有得到任何结果。我的 ios 应用程序只是一个带有 indexpath 的简单导航控制器，它应该将自定义动态单元格 () 选择的行的标题发送到 uilabel。问题是数据源来自mysql，它是在nsarray（称为coolarray）中解析的xml。该错误发生在移动到下一个视图之前，并且在日志中为：**由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“[__NSDictionaryI isEqualToString:]：无法识别的选择器已发送到实例 0x8887670”。**但是，它确实给出了 indexPathrow:0 或 1 或任何选择的 nslog 结果。一定是数组传递到uilabel有问题，但我想不通！我已经省略了自定义单元格的代码，因为这不太可能是错误的原因并且工作正常（加号很简单）。这是我之前在[UITableView 拒绝进入 detailViewController](https://stackoverflow.com/questions/13206030/uitableview-refusing-to-go-to-detailviewcontroller/13209379#13209379)的问题的后续，但该代码不再相关，因为如下所示，我的代码发生了很大变化。

视图控制器.h

```
#import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>
#import "Player.h"

@interface ViewController : UIViewController<UITableViewDelegate, UITableViewDataSource,
 CLLocationManagerDelegate,NSXMLParserDelegate, UISearchBarDelegate> {
    IBOutlet UISearchBar *searchBar;

    CLLocationManager *locationManager;

    NSMutableArray *coolarray;

    float latitude;
    float longitude;
}
@property(nonatomic,strong) IBOutlet UITableView * tableView; 
@property (nonatomic, retain) CLLocationManager *locationManager;

@end 
```

视图控制器.m

```
#import "ViewController.h"
#import "LoadingViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
- (void)dealloc
{
    [super dealloc];
    [self.locationManager release];
    if ( coolarray )
        [coolarray release];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    coolarray = NULL;

    self.locationManager = [[[CLLocationManager alloc] init] autorelease];
    self.locationManager.delegate = self;
    [self.locationManager startUpdatingLocation];
    [[self navigationController] setNavigationBarHidden:YES];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

// Table data delegate
- (NSInteger)tableView:(UITableView *)table numberOfRowsInSection:(NSInteger)section {
    if ( coolarray != NULL ) {
        return [coolarray count];
    }
    return 0;
}

- (UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)indexPath {
        Player *cell = [_tableView dequeueReusableCellWithIdentifier:@"Player"];

    if (cell == nil)
    {
        cell = [[[Player alloc] initWithFrame:CGRectZero reuseIdentifier:@"Player"] autorelease];
    }
     NSDictionary *itemAtIndex =(NSDictionary *)[coolarray objectAtIndex:indexPath.row];
    cell.nameLabel.text = [itemAtIndex objectForKey:@"name"];
    return cell;
}

// XML request and parsing
- (void)updateLocation:(CLLocation *)newLocation {
    if ( coolarray ) {
        [coolarray release];
    }
    coolarray = [[NSMutableArray alloc] init];

    if ( newLocation ) {
        latitude = newLocation.coordinate.latitude;
        longitude = newLocation.coordinate.longitude;
    }

    NSString *urlString = [NSString stringWithFormat:@"(censored)"];

    NSXMLParser *locationParser = [[[NSXMLParser alloc] initWithContentsOfURL:[NSURL URLWithString:urlString]] autorelease];
    [locationParser setDelegate:self];
    [locationParser parse];

    [_tableView reloadData];
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {

    if ( [elementName isEqualToString:@"location"]) {
        [coolarray addObject:[[NSDictionary alloc] initWithDictionary:attributeDict]];
    }
}

// GPS handling
- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation
{
    [self updateLocation:newLocation];
}

- (void)locationManager:(CLLocationManager *)manager
       didFailWithError:(NSError *)error
{
}

// Search bar handling
- (void)searchBarSearchButtonClicked:(UISearchBar *)sb {
    [self updateLocation:NULL];
    [searchBar resignFirstResponder];
}

- (void)searchBarCancelButtonClicked:(UISearchBar *)sb
{
    [searchBar resignFirstResponder];
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
 {

}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if([segue.identifier  isEqualToString:@"showDetail"])
{
    NSIndexPath * indexPath=[self->_tableView indexPathForSelectedRow];
    LoadingViewController* destViewController= segue.destinationViewController;
    destViewController.myProgLang=[coolarray objectAtIndex:indexPath.row];
    NSLog(@"indexPathrow:%d",indexPath.row);
}
}

@end 
```

LoadingViewController.h（我的详细视图）

```
#import <UIKit/UIKit.h>

@interface LoadingViewController : UIViewController
 {

}

@property (nonatomic, retain) IBOutlet UILabel *myLabel;
@property (nonatomic, retain) NSString *myProgLang;

@end 
```

LoadingViewController.m（我的详细视图）

```
#import "LoadingViewController.h"

@interface LoadingViewController ()

@end

@implementation LoadingViewController
@synthesize myLabel, myProgLang;
- (void)viewDidLoad {
    [super viewDidLoad];
    myLabel.text = myProgLang;
    [[self navigationController] setNavigationBarHidden:YES];
}

- (void)dealloc {
    [myLabel release];
    [myProgLang release];
    [super dealloc];
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T20:04:29.043

问题是您的数组似乎是字典对象的集合。当您要进行 segue 时，您正在从对象中取出字典并尝试将其存储为 NSString 属性。

尝试更改您的 prepareForSegue: 方法，如下所示：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if([segue.identifier  isEqualToString:@"showDetail"])
    {
        NSIndexPath * indexPath=[self->_tableView indexPathForSelectedRow];
        LoadingViewController* destViewController= segue.destinationViewController;
        destViewController.myProgLang=[[coolarray objectAtIndex:indexPath.row] objectForKey:@"name"];
        NSLog(@"indexPathrow:%d",indexPath.row);
    }

} 
```

# filter - 使用过滤器公式显示数据不起作用

> ID：13212907
> 
> 赞同：0
> 
> 时间：2012-11-03T19:54:15.200
> 
> 标签：filter, google-sheets, google-sheets-formula

我有[这个](https://docs.google.com/spreadsheet/ccc?key=0ArRTKzjFb6WsdGdiU3hCRFRhOGxzUkhLYUJIcEMwSlE%60)谷歌表格。

在名为`Archive`我的工作表中，我导入了一些推文。在 Sheet1 我有以下公式：

```
=FILTER('Archive'!A2:A;MMULT(SEARCH(TRANSPOSE(" "&A2:A&" ");" "&'Archive'!A2:A&" ");SIGN(ROW('Archive'!A2:A)))) 
```

我想做的是显示工作表存档中的特定推文，其中包含 Sheet1 上列出的特定关键字。这个公式应该可以工作，但在我导入数据的情况下却不行。我得到的只是一个`#N/A`.

难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T20:58:44.187

如工作表聊天窗口中所述，使用：

`=FILTER('Archive'!A2:A;MMULT(SEARCH(TRANSPOSE(" "&A2:A&" ");" "&TRIM('Archive'!A2:A)&" ");SIGN(ROW(A2:A))))`

简而言之，MMULT 的第二个参数需要有与第一个参数中的列一样多的行。这是一个试图描述以这种方式使用的 MMULT的[电子表格。](https://docs.google.com/spreadsheet/ccc?key=0AiZdNQHjqWKqdHowMlZQcUpsSEFFZVh3Wm8xdHhkV3c&authkey=CKC8i9AP&authkey=CKC8i9AP#gid=2)

TRIM 部分是为了减轻可能在原始数据中的虚假空格字符。

# css - 不跟随元素的 CSS 选择元素

> ID：13212909
> 
> 赞同：4
> 
> 时间：2012-11-03T19:54:52.347
> 
> 标签：css, css-selectors

我想选择所有不遵循 H3 或 P 的 P 所以：

```
<img>

<p> this is selected</p>

<p> this is not</p>

<p> this is not</p>

<span>

<p> this is selected</p>

<h3>

<p> this is not</p> 
```

我试过

```
p + :not(h3, p) and :not(h3, p) + p 
```

但他们不工作

解决办法是什么？请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T20:03:33.827

您可以通过这种方式将其表达为 css 选择器：

`*:not(h3):not(p) + p`

查看工作[**演示**](https://tinker.io/72b1c/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T20:08:03.707

```
:not(h3):not(p) + p {
    ...
} 
```

​</p>

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-03T19:59:28.740

使用这样的类...

```
<img>
<p class="sel"> this is selected</p>
<p> this is not</p>
<p> this is not</p>
<span>
<p class="sel"> this is selected</p>
<h3>
<p> this is not</p> 
```

然后在你的CSS中你可以修改它们......

```
.sel {
   /* Styling here */
} 
```

# asp.net-mvc-4 - 如何在编辑时保留 varbinary 类型的图像数据？

> ID：13212915
> 
> 赞同：1
> 
> 时间：2012-11-03T19:55:44.943
> 
> 标签：asp.net-mvc-4, visual-studio-2012, binary-data, entity-framework-5, razor-2

我有一个小型演示应用程序来处理存储在数据库中的二进制数据。相关代码见下：

**实体类：**

```
 [HiddenInput(DisplayValue = false)]
    public int Id { get; set; }

    [Display(Name = "Full Name:")]
    public string Name { get; set; } 

    [DataType(DataType.Upload)]
    [Display(Name = "Photo:")]
    public byte[] ImageData { get; set; }

    [HiddenInput(DisplayValue = false)]
    public string ImageMimeType { get; set; } 
```

**编辑动作：**

```
 [HttpGet]
   public ActionResult Edit(int id)
    {
         var mensPlayer = _dataSource.MensPlayers.FirstOrDefault(p => p.Id == id);

        return View(mensPlayer);
    }

    [HttpPost]
    public ActionResult Edit(MensPlayer mensPlayer, HttpPostedFileBase image)
    {
        if (ModelState.IsValid)
        {
           //Added line below
            _dataSource.ImageTemp(mensPlayerInDb, mensPlayer);
            if (image != null)
            {
                mensPlayer.ImageMimeType = image.ContentType;
                mensPlayer.ImageData = new byte[image.ContentLength];
                image.InputStream.Read(mensPlayer.ImageData, 0, image.ContentLength);
            }
              //Added line below
             mensPlayer.ImageData = mensPlayerInDb.ImageData;

            //Save Player
            _dataSource.Update(mensPlayer);
           _dataSource.Save();
          TempData["message"] = string.Format("{0} has been saved", mensPlayer.Name);
            return RedirectToAction("Detail", "MensPlayer", new {id = mensPlayer.Id});
        }
        return View(mensPlayer);
    } 
```

**获取图像方法：**

```
public FileContentResult GetImage(int id)
    {
        var image = _dataSource.MensPlayers.FirstOrDefault(p => p.Id == id);
        if (image != null)
        {
            return File(image.ImageData, image.ImageMimeType);
        }
        return null;
    } 
```

显示图像：

```
@if (Model.ImageData != null) {
    <div >
         <img width="300" height="400" src="@Url.Action("GetImage", "MensPlayer",
                                        new { Model.Id })" alt="Player Image"/>
     </div>
 } 
```

**数据源类**

```
public interface IDataSource
{
    IQueryable<MensTeam> MensTeams { get; }
    IQueryable<MensPlayer> MensPlayers { get; }
    IQueryable<MensHome> MensHomes { get; }
    void Save();
    void Update(MensPlayer mensPlayer);
    void Delete();
    void ImageTemp(MensPlayer mensPlayerInDb, MensPlayer mensPlayer);//I added this
} 
```

**在 Db 类中**

```
void IDataSource.Save()
    {
        SaveChanges();
    }

    void IDataSource.Update(MensPlayer mensPlayer)
    {
        Entry(mensPlayer).State = EntityState.Modified;
    }
     //Added code below
    void IDataSource.ImageTemp(MensPlayer mensPlayerInDb, MensPlayer mensPlayer)
    {
        Entry(mensPlayerInDb).CurrentValues.SetValues(mensPlayer);
    } 
```

我的问题是，每次我尝试编辑播放器时，都会从数据库中很好地检索每个数据，但是当我在编辑后点击保存时，ImageData 会丢失，更像是用空值替换原始数据。就像，应用程序希望我在每次尝试编辑时重新上传图像。

我能做些什么来清理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T20:23:43.103

好吧，如果`image`是，`null`那么在您的实体`mensPlayer.ImageData`中是`null`。稍后当您调用时，`_dataSource.Update(mensPlayer)`您将实体的状态设置为`Modified`（至少我猜`Update`只是将状态设置为`Modified`），因此您告诉 EF 您也修改了图像（即设置为`null`），EF 将保存该更改。

为了解决这个问题，您可以先从数据库中加载包含图像的实体......

```
var mensPlayerInDb = context.MensPlayers.Find(mensPlayer.Id);
mensPlayer.ImageData = mensPlayerInDb.ImageData; // save the ImageData
// copy changed values to loaded entity and save it, ImageData is unchanged
context.Entry(mensPlayerInDb).CurrentValues.SetValues(mensPlayer);
context.SaveChanges(); 
```

...或者您可以尝试：

```
context.Entry(mensPlayer).State = EntityState.Modified;
context.Entry(mensPlayer).Property(m => m.ImageData).IsModified = false; 
```

后一种方法不适用于 EF < 5.0（因为一旦实体被标记为，就禁止将`Modified`属性的状态设置为），但它应该适用于 EF 5。`false``Modified`

您需要将其中一种解决方案集成到您的`_dataSource`服务类中，可能通过引入新方法，因为它不适用于您的一般`Update`方法。

# image - 在matlab中选择不规则形状的掩码

> ID：13212919
> 
> 赞同：1
> 
> 时间：2012-11-03T19:56:13.660
> 
> 标签：image, matlab, image-processing, masking

如何在 Matlab 中不使用 imfreehand 但自动选择图像中不规则形状的蒙版？图像的背景是黑色的，我想选择整个图像作为没有黑色背景的蒙版（没有黑色背景的所有内容）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T22:03:50.730

试试这个：

```
threshold=0; % or a different value if needed
mask=image>threshold; 
```

假设背景是真正的黑色，即像素值为 0，则将阈值设置为零。否则，选择一个捕获背景的值（有自动执行此操作的方法）

# java - 在 Glassfish 3.0.1 中找不到 JPA CacheIndex 注释

> ID：13212927
> 
> 赞同：0
> 
> 时间：2012-11-03T19:57:03.363
> 
> 标签：java, jpa, eclipselink, glassfish-3

我安装的 Glassfish v3.0.1 有什么问题。我找不到 JPA 的 CacheIndex 注释。EclipseLink 2.0 是否不包含此注释？或者是在 Glassfish v3 的 Eclipse Helios 插件中缺少 st。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T08:26:08.360

`@CacheIndex`注释是 EclipseLink 特定的注释。因此，您不会在开箱即用的 JPA API 中找到它。因此，我认为您必须将 EclipseLink 添加到项目的编译时依赖项中。

# jquery - 加载堆栈中的第一个图像时隐藏“加载器”div？

> ID：13212928
> 
> 赞同：0
> 
> 时间：2012-11-03T19:57:06.827
> 
> 标签：jquery

我正在使用一个覆盖页面内容的 div，直到加载幻灯片中的第一个图像。我用来隐藏这个 div 的代码如下，但它不起作用：

```
$(function() {
  $('.slide').first(function() {
    $(this).load(function() {
      $('#loader').fadeOut('slow');
    });
  });
}); 
```

知道为什么吗？即使在整个页面加载后，“加载器” div 也不会隐藏。我已经成功运行 $('#loader').fadeOut('slow'); 在（窗口）.load（）上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T20:06:46.683

您的图像是通过 ajax 加载的，并且在 DOM 首次加载时不存在。尝试在将第一个图像添加到 DOM 后隐藏加载图像。

```
$.each(images, function(index) {
  $('#slideshow').append('<div class="slide" style="background-image:url(' + this + ');"></div>');
  if(index === 0){
    $('#loader').fadeOut('slow');
  }
}); 
```

# java - 我的 GUI 组件单元测试是否应该比被测代码包含更多的行？

> ID：13212935
> 
> 赞同：6
> 
> 时间：2012-11-03T19:58:08.157
> 
> 标签：java, unit-testing, user-interface, mocking

这是一个健全性检查，因为我发现这在我们的代码中是正确的。与我们的功能代码不同，由于状态设置、组合案例分析和模拟/伪造邻居/协作者/侦听器/等，有状态 GUI 的测试具有令人遗憾的权重。我错过了什么吗？感谢您的反馈意见。

笔记：

*   测试在 JVM 中运行，一切都是 POJO。
*   到目前为止，我们通过增加单元大小得到了一些简化：测试更多粘合在一起的部分。

新笔记：

*   我们正在使用 jUnit 和 Mockito。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T20:22:39.280

1.  避免代码重复。应提取通用设置代码和操作
2.  寻找层次结构。不要编写一个庞大的测试场景。将公共线组合在一起并将它们提取到有意义的命名方法中。继续构建多层测试场景
3.  考虑更好的工具。 [cucumber](http://cukes.info/)，[FEST assertions](https://github.com/alexruiz/fest-assert-2.x/wiki)， Scala 或 Groovy 作为测试 DSL（即使您不在生产代码中使用它们），[mockito](http://code.google.com/p/mockito/) ...

除此之外，代码的生产行数和测试行数之间的关系是无关紧要的。我可以很容易地找到一个极短的代码示例，它具有如此多的边缘情况，需要进行数十次测试。

还有一个[SQLite 的真实示例](http://www.sqlite.org/testing.html)（重点是我的）：

> [...] 库包含大约 81.3 KSLOC 的 C 代码。[...] 相比之下，该项目**的测试代码和测试脚本**数量是 91421.1 KSLOC 的 1124 倍。

没错，每行生产代码大约有 1100 行测试代码。

# ios - Facebook 请求示例项目

> ID：13212936
> 
> 赞同：0
> 
> 时间：2012-11-03T19:58:09.477
> 
> 标签：ios, xcode, facebook

有没有人找到本教程关于 facebook 请求的示例项目：http: [//developers.facebook.com/docs/howtos/send-requests-using-ios-sdk/](http://developers.facebook.com/docs/howtos/send-requests-using-ios-sdk/)

由于我已经集成了用户拥有的 Facebook 好友列表，我可以向每个用户发送消息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:51:15.190

你可以在 GitHub 上找到实际的项目，[https://github.com/fbsamples/ios-3.1-howtos/tree/master/SendRequestsHowTo](https://github.com/fbsamples/ios-3.1-howtos/tree/master/SendRequestsHowTo)

如果您已经有 Facebook 好友列表，您可以向他们发送消息。只需获取这些朋友的逗号分隔的字符串表示，并将信息传递给“建议”参数：

```
NSString *friendList = @"12345, 4567";
NSMutableDictionary* params = 
    [NSMutableDictionary dictionaryWithObjectsAndKeys:
    @"Check this out.",  @"message",
    friendList, @"suggestions",
    nil];

[self.facebook dialog:@"apprequests"
            andParams:params
          andDelegate:self]; 
```

# asp.net-mvc - 在 ASP.NET MVC WebMatrix 中忘记密码 + 电子邮件确认

> ID：13212938
> 
> 赞同：3
> 
> 时间：2012-11-03T19:58:15.777
> 
> 标签：asp.net-mvc

看来这两个功能在 WebMatrix 代码中有一组帮助函数和模式才能开始。但是，没有控制器方法或视图来完成它，因此您必须自己实现。

是否有任何示例可以让我将此代码复制到我的应用程序中？我正在寻找一些东西：

*   生成忘记密码电子邮件
*   生成确认电子邮件
*   忘记密码视图+控制器方法
*   重新发送确认电子邮件视图 + 控制器方法

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-06-07T13:52:32.867

忘记密码功能

前几天，我试图在 asp.net MVC 4 中创建一个“忘记密码功能”。我在 Google 上搜索进出，但找不到最佳解决方案。我终于找到了出路。15个简单的步骤

第 1 部分通过电子邮件发送密码重置信息

第1 步• 创建Mvc 4 c# Internet 应用程序模板:) （将自动生成帐户和家庭控制器）• 构建并运行您的项目。注册并登录。（将生成简单的成员表）

```
 Everything working fine? 
```

第 2 步 • 哎呀！他们在注册时不会询问我们的电子邮件 ID！为了向用户发送密码令牌，我们需要他们的电子邮件 ID！因此，让我们在数据库中进行一些更改，转到服务器资源管理器！（如果你找不到它，你可以按 Ctrl + alt + S） • 展开“数据连接”，你会看到几个表格。打开用户配置文件表。添加以下列：

1.  EmailId nvarchar(max) 2.Details nvarchar(max)

第 3 步 • 现在转到解决方案资源管理器...模型...帐户模型...注册模型 • 为电子邮件 ID 和详细信息添加这两个属性

```
//new properties
    [Required]
    [Display(Name="Email ID")]
    public string EmailId { get; set; }

    [Required]
    [Display(Name = "About Yourself")]
    public string Details { get; set; } 
```

第 4 步 • 现在转到解决方案资源管理器...视图 ... 帐户视图 ... Register.cshtml 视图 • 添加这两个属性以允许用户输入电子邮件 ID 和其他详细信息。

*   @Html.LabelFor(m => m.EmailId) @Html.TextBoxFor(m => m.EmailId)*   @Html.LabelFor(m => m.Details) @Html.TextBoxFor(m => m.Details)

第 5 步 • 现在转到解决方案资源管理器...控制器 ... 帐户控制器 ... 注册控制器操作方法的发布版本 • 添加这些属性以允许用户输入电子邮件 ID 和其他详细信息。突出显示更改。

```
[HttpPost]
[AllowAnonymous]
[ValidateAntiForgeryToken]
public ActionResult Register(RegisterModel model)
{
    if (ModelState.IsValid)
    {
        // Attempt to register the user
        try
        {
            WebSecurity.CreateUserAndAccount(model.UserName, model.Password, new { EmailId = model.EmailId, Details = model.Details});

            WebSecurity.Login(model.UserName, model.Password);
            return RedirectToAction("Index", "Home");
        }
        catch (MembershipCreateUserException e)
        {
            ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
        }
    }

    // If we got this far, something failed, redisplay form
    return View(model);
} 
```

为什么我们不再次构建并运行我们的项目？注册并填写详细信息。现在您将被要求指定电子邮件地址。添加这些属性以允许用户输入电子邮件 ID 和其他详细信息。

转到服务器资源管理器并右键单击用户配置文件表并选择“显示表数据”U可以查看您输入的详细信息以进行验证。

第 6 步 • 现在让我们实现密码重置功能  转到帐户控制器并创建以下控制器操作方法 (GET)

```
[AllowAnonymous]
public ActionResult ForgotPassword()
{
    return View();
}

•    (POST)

[HttpPost]
[AllowAnonymous]
[ValidateAntiForgeryToken]
public ActionResult ForgotPassword(string UserName)
{
    //check user existance
    var user = Membership.GetUser(UserName);
    if (user == null)
    {
        TempData["Message"] = "User Not exist.";
    }
    else
    {
        //generate password token
        var token = WebSecurity.GeneratePasswordResetToken(UserName);
        //create url with above token
        var resetLink = "<a href='" + Url.Action("ResetPassword", "Account", new { un = UserName, rt = token }, "http") + "'>Reset Password</a>";
        //get user emailid
        UsersContext db = new UsersContext();
        var emailid = (from i in db.UserProfiles
                        where i.UserName == UserName
                        select i.EmailId).FirstOrDefault();
        //send mail
        string subject = "Password Reset Token";
        string body = "<b>Please find the Password Reset Token</b><br/>" + resetLink; //edit it
        try
        {
            SendEMail(emailid, subject, body);
            TempData["Message"] = "Mail Sent.";
        }
        catch (Exception ex)
        {
            TempData["Message"] = "Error occured while sending email." + ex.Message;
        }
        //only for testing
        TempData["Message"] = resetLink;
    }

    return View();
} 
```

• GET 控制器动作只返回视图。• POST 控制器操作：接收用户名 验证其存在 生成密码重置令牌 构建要通过电子邮件发送的 URL。

步骤 7 • 右键单击​​忘记密码操作方法并添加视图  视图页面的代码如下

```
@{
    ViewBag.Title = "Forgot Password";
}

<h2>Forgot Password</h2>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    <fieldset>
        <legend>Forgot Password Form</legend>
        <ol>
            <li>
                @Html.Label("User Name", new { @for = "UserName" })
                @Html.TextBox("UserName")
                <span style="color:red;">@TempData["Message"]</span>
            </li>
        </ol>
        <input type="submit" value="Recover" />
    </fieldset>
} 
```

• 查看页面将显示一个文本框，用户可以在其中输入用户名。

步骤 8 • 现在转到解决方案资源管理器...模型...帐户模型...用户配置文件视图模型。更改已突出显示

```
[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    //new properties
    public string EmailId { get; set; }
    public string Details { get; set; }
} 
```

第 9 步 • 现在转到解决方案资源管理器...视图...帐户...登录视图。现在我们可以看到一个选项来恢复他的密码，以防他忘记密码。

```
<ul>    
            <li>
                    @Html.ActionLink("Register", "Register") if you don't have an account.
            </li>
            <li>
                    @Html.ActionLink("Forgot Password", "ForgotPassword") if you want to recover your password.
            </li>
        </ul> 
```

第 2 部分从 URL 接收密码重置信息

步骤 1 • 转到解决方案资源管理器...控制器...帐户控制器...创建新的重置密码操作方法 • 此方法接受来自 URL 的“un”（用户名）和“rt”（密码重置令牌） .

```
[AllowAnonymous]
public ActionResult ResetPassword(string un, string rt)
{
    UsersContext db = new UsersContext();
    //TODO: Check the un and rt matching and then perform following
    //get userid of received username
    var userid = (from i in db.UserProfiles
                    where i.UserName == un
                    select i.UserId).FirstOrDefault();
    //check userid and token matches
    bool any = (from j in db.webpages_Memberships
                where (j.UserId == userid)
                && (j.PasswordVerificationToken == rt)
                //&& (j.PasswordVerificationTokenExpirationDate < DateTime.Now)
                select j).Any();

    if (any == true)
    {
        //generate random password
        string newpassword = GenerateRandomPassword(6);
        //reset password
        bool response = WebSecurity.ResetPassword(rt, newpassword);
        if (response == true)
        {
            //get user emailid to send password
            var emailid = (from i in db.UserProfiles
                            where i.UserName == un
                            select i.EmailId).FirstOrDefault();
            //send email
            string subject = "New Password";
            string body = "<b>Please find the New Password</b><br/>" + newpassword; //edit it
            try
            {
                SendEMail(emailid, subject, body);
                TempData["Message"] = "Mail Sent.";
            }
            catch (Exception ex)
            {
                TempData["Message"] = "Error occured while sending email." + ex.Message;
            }

            //display message
            TempData["Message"] = "Success! Check email we sent. Your New Password Is " + newpassword;
        }
        else
        {
            TempData["Message"] = "Hey, avoid random request on this page.";
        }
    }
    else
    {
        TempData["Message"] = "Username and token not maching.";
    }           

    return View();
} 
```

步骤 2 • 右键点击重置密码操作方法并添加视图  视图页面的代码如下

```
@{
    ViewBag.Title = "ResetPassword";
}

<h2>Password Mailed :) </h2> 
```

步骤 3 • 转到解决方案资源管理器...模型...帐户模型...进行以下更改。• 我们创建一个UserProfile DB 模型的实例并将db.webpages_Memberships 实现为DbSet。使用'webpages_Memberships' 作为模型。

```
public class UsersContext : DbContext
    {
        public UsersContext()
            : base("DefaultConnection")
        {
        }

        public DbSet<UserProfile> UserProfiles { get; set; }
        public DbSet<webpages_Membership> webpages_Memberships { get; set; }
    }

    [Table("webpages_Membership")]
    public class webpages_Membership
    {
        [Key]
        public int UserId { get; set; }
        public DateTime CreateDate { get; set; }
        public string ConfirmationToken { get; set; }
        public bool IsConfirmed { get; set; }
        public DateTime LastPasswordFailureDate { get; set; }
        public int PasswordFailuresSinceLastSuccess { get; set; }
        public string Password { get; set; }
        public DateTime PasswordChangeDate { get; set; }
        public string PasswordSalt { get; set; }
        public string PasswordVerificationToken { get; set; }
        public DateTime PasswordVerificationTokenExpirationDate { get; set; }
    } 
```

第 4 步 • 将随机密码生成功能添加到帐户控制器 • 调用此方法时，将为用户生成随机密码

```
 private string GenerateRandomPassword(int length)
    {
        string allowedChars = "abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNOPQRSTUVWXYZ0123456789!@$?_-*&#+";
        char[] chars = new char[length];
        Random rd = new Random();
        for (int i = 0; i < length; i++)
        {
            chars[i] = allowedChars[rd.Next(0, allowedChars.Length)];
        }
        return new string(chars);
    } 
```

步骤 5 • 在帐户控制器中添加发送电子邮件功能。• 当用户单击忘记密码表单上的恢复按钮时，此功能将向用户发送第一封邮件。第一封邮件包含重置密码链接。当用户点击链接时。用户将被重定向到重置密码页面。新密码将再次邮寄给用户。• 您需要输入您的电子邮件地址代替 XXXXX@gmail.com 并输入您的密码。

```
private void SendEMail(string emailid, string subject, string body)
        {
            System.Net.Mail.SmtpClient client = new System.Net.Mail.SmtpClient();
            client.DeliveryMethod = System.Net.Mail.SmtpDeliveryMethod.Network;
            client.EnableSsl = true;
            client.Host = "smtp.gmail.com";
            client.Port = 587;  

            System.Net.NetworkCredential credentials = new System.Net.NetworkCredential("xxxxx@gmail.com", "password");
            client.UseDefaultCredentials = false;
            client.Credentials = credentials;

            System.Net.Mail.MailMessage msg = new System.Net.Mail.MailMessage();
            msg.From = new MailAddress("xxxxx@gmail.com");
            msg.To.Add(new MailAddress(emailid));

            msg.Subject = subject;
            msg.IsBodyHtml = true;
            msg.Body = body;

            client.Send(msg);
        } 
```

# javascript - 高阶函数 - Javascript

> ID：13212940
> 
> 赞同：2
> 
> 时间：2012-11-03T19:58:20.010
> 
> 标签：javascript, higher-order-functions

我正在使用 Eloquent Javascript。函数*count*以一个数组和一个测试函数 ( *equals(x)* ) 作为参数，并返回数组中测试函数返回 true 的元素数量。

我理解这些函数工作的广泛方式，并且从逻辑上讲，传递给 reduce 的匿名函数的*总参数的值为零。*

有人可以帮我看看总价值的具体来源吗？我想在脑海中有一个更清晰的画面。

```
function count(test, array) {
  return reduce(function(total, element) { // Where is the value for total coming from?
    return total + (test(element) ? 1 : 0);
  }, 0, array);
}

function equals(x) {
  return function(element) {return x === element;};
}

function countZeroes(array) {
  return count(equals(0), array);
} 
```

减少之前的函数：

```
function reduce(combine, base, array) {
  forEach(array, function (element) {
    base = combine(base, element);
  });
  return base;
} 
```

之前的 forEach 函数：

```
function forEach(array, action) {
  for (var i = 0; i < array.length; i++)
    action(array[i]);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T20:45:27.350

> 我看到 reduce 被传递了一个匿名函数而不是 combine 函数

这不是真的。匿名函数*就是*`combine`函数。

## `combine(base, element)`对比`function(total, element)`

> 这两个函数调用本质上是相等的：combine(base,element) 和 function(total,element)？

不，它们是完全不同的东西。

前者是函数调用，对 . 引用的函数进行调用`combine`。
然而，第二个计算为一个新的函数值。如果是：

```
reduce(function(total, element) {...}, ...); 
```

`reduce()`正在传递一个函数值，这意味着**创建了一个***新函数*，该函数接受两个参数（用and表示）。然后将此函数传递给.**`total``element``reduce`**

 *** * *

让我从昨天开始回收我的可视化。重要的是要意识到，这不仅适用于*您的案例*，而且适用于*reduce(left)*概念的*每个*实施例。

 *```
 return value of reduce()
                   /
                 etc ...
                /
            combine    
           /       \
       combine      xs[2]
      /       \
  combine      xs[1]
 /       \
0         xs[0] 
```

当然，这仅显示发生*了什么*，而不是*如何*，我认为在您的情况下您要询问*how*。只要记住这个可视化，看看结果会发生什么。

## 替换函数

为了更清楚地说明发生了什么，我将逐步替换正在传递的函数。

**程序开始：**

```
function countZeroes(array) {
  return count(equals(0), array);
} 
```

`equals(0)`（你可以称之为柯里化的一种形式）计算一个函数，该函数被传递给`count()`.

这基本上导致以下`count()`功能：

```
function count(array) {
  return reduce(function(total, element) { // Where is the value for total coming from?
    return total + (0 == element ? 1 : 0);
  }, 0, array);
} 
```

从这里，我们可以提取`combine`参数：

```
function combine(total, element) { // Where is the value for total coming from?
    return total + (0 == element ? 1 : 0);
} 
```

那就是在reduce函数中使用的函数：

```
function reduce(base = 0, array) {
  forEach(array, function (element) {
    base = combine(base, element);
  });
  return base;
} 
```

`reduce(0, array)`从`count()`函数中调用。`forEach`考虑到我们的帐户实现，现在可以像这样重写传递给的函数`combine`：

```
function reduce(base = 0, array) {
  forEach(array, function (element) {
    base = base + (0 == element ? 1 : 0);
  });
  return base;
} 
```

请记住，这`base`代表我们的`total`.

作为我们的最后一步，我们会考虑做什么`forEach()`。

```
function reduce(base = 0, array) {
  for (var i = 0; i < array.length; i++)
    base = base + (0 == array[i] ? 1 : 0);
  }
  return base;
} 
```

所以这就是`count()`本质上的样子，所有调用都未包装：

```
function count(array) {
  var base = 0;
  for (var i = 0; i < array.length; i++)
    base = base + (0 == array[i] ? 1 : 0);
  }
  return base;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T20:07:33.817

您传递给 reduce 的 3 个参数是：

```
{
    combine:function(total, element){...},
    base:0,
    array:array
} 
```

然后该函数将其作为参数`base`传递给函数：`combine``total`

```
base = combine(base, element); 
```

基本上，这里发生的是，对于您刚刚传递的数组中的每个元素（作为第三个参数`array`），该函数接受参数`base`并使用您提供的匿名函数递增它（首先检查元素是否通过`test`）。最后，在遍历完所有元素后，它返回 的最终值`base`。

也许这将有助于解释：

```
function count(test, testarray) {
  var anon = function(total, element) { // Where is the value for total coming from?
    return total + (test(element) ? 1 : 0);
  };
  //now anon is a function.
  return reduce(anon, 0, testarray);
} 
```

让我们仔细看看函数调用和定义：

```
return   reduce(anon   , 0   , testarray);
                  |      |     |
                  v      v     v
function reduce(combine, base, array) {
    combine;    //the function that is passed in as the first argument
    base;       //the number that is passed in as the second argument
    array;      //the array that is passed in as the third argument 
```

、和中的每一个的*值*都被传递到函数中。在函数内，它们的值可以通过函数定义中的参数名称访问。`anon``0``testarray`***

# php - 用户是否已登录 facebook？PHP

> ID：13212941
> 
> 赞同：2
> 
> 时间：2012-11-03T19:58:37.093
> 
> 标签：php, facebook, facebook-login

我想让图层的高度取决于用户是否登录 Facebook 的事实。我试图查看用户是否使用他们的 cookie 登录到 Facebook，但这没有用。

```
<style>
#layer{
height: <?php if($_COOKIE["c_user"]){echo "100px;";} else{ echo "50px;";} ?>
}
</style> 
```

我发现的大多数解决方案都是关于 Facebook 内的应用程序，但这不是我要寻找的。我的网站只需要一个取决于用户是否登录 Facebook 的高度...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T20:03:44.000

Facebook's API has a function for this: [https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)

It would return JSON containing a "status" paramater. If status is equal to "connected" it means they are logged in. If the status is "unknown" it means they aren't logged in.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T20:45:51.937

通过 JS SDK 的方法，你实际上可以知道用户是否登录了 Facebook [`FB.getLoginStatus()`](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)（但它当然需要一个应用程序）。

`not_authorized`即使不要求用户允许任何应用程序，Facebook 也会通过返回对上述方法的响应来 显示用户是否实际登录 Facebook 。

例子：

```
<!doctype html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
<title>JS SDK Test</title>
</head>
<body>
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'YOUR_APP_ID', // App ID from the App Dashboard
      channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File for x-domain communication
      status     : true, // check the login status upon init?
      cookie     : true, // set sessions cookies to allow your server to access the session?
      xfbml      : true  // parse XFBML tags on this page?
    });

    FB.getLoginStatus(function(response) {
        if( response.status == 'connected' || response.status == 'not_authorized' ) {
            // user is logged-in to Facebook
        }
    });
  };

  // Load the SDK Asynchronously
(function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
}(document, /*debug*/ false));
</script>
</body>
</html> 
```

# css - 打印友好页面选项卡

> ID：13212942
> 
> 赞同：0
> 
> 时间：2012-11-03T19:58:39.887
> 
> 标签：css, printing, facebook-apps, facebook-page, facebook-iframe

我有一个 FB 应用程序，它为我们页面的粉丝显示一张扇门优惠券。当你去打印优惠券时，Facebook 的右侧边栏会自动出现在页面中间。

我尝试仅通过 javascript 打印 iFrame，但 Facebook 不喜欢这样。我假设他们也不允许弹出窗口，但无论如何我们都不想弹出窗口。

有没有其他方法可以欺骗页面使其更易于打印？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T20:54:39.510

我已经遇到过类似的问题，

我的解决方案是创建一个链接，使用打印友好的代码优惠券将用户带出 Facebook。您可以使用`<a target="_blank">`或只是将其更改`window.top.location`为您的可打印页面。

希望这有帮助！

# localization - WinRT Xaml - 本地化 DataTemplate 中使用的按钮样式

> ID：13212945
> 
> 赞同：2
> 
> 时间：2012-11-03T19:59:09.050
> 
> 标签：localization, styles, datatemplate, winrt-xaml

我正在尝试本地化按钮的文本。我有以下风格：

```
<Style x:Key="MapPinAppBarButtonStyle" TargetType="Button" BasedOn="{StaticResource AppBarButtonStyle}">
    <Setter Property="AutomationProperties.AutomationId" Value="MapPinAppBarButton"/>
    <!--<Setter Property="AutomationProperties.Name" Value="Drag to Map"/>-->
    <Setter Property="Content" Value="&#xE139;"/>
</Style> 
```

此按钮样式用于在 DataTemplate 中声明的按钮。Uid 设置为：

```
x:Uid="DragToMapButton" 
```

Resources.resw 文件包含以下条目：

```
DragToMapButton.[using:Windows.UI.Xaml.Automation]AutomationProperties.Name 
```

这不起作用，抛出了一个异常 - 但是我无法捕获它 - 似乎是一个内部 Win32 异常。

任何人都知道如何正确本地化这个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-09T19:55:01.053

您应该将 Uid 分配给 setter

```
<Setter Property="AutomationProperties.Name" Value="Drag to Map" x:Uid="MapPinAppBarButtonName"/> 
```

并添加到资源“MapPinAppBarButtonName.Value”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T20:39:37.377

TargetType 不是 Button，而是 ButtonBase。

# java - java程序中的连接访问数据库

> ID：13212946
> 
> 赞同：2
> 
> 时间：2012-11-03T19:59:10.003
> 
> 标签：java, ms-access, jdbc

我正在尝试将我的 java 程序与 MS ACCESS 数据库连接起来。我在互联网上看了很多，但我没有发现我的问题。我写了代码：

```
private String dburl="jdbc:odbc:DRIVER={Microsoft Access Driver(*.mdb)};DBQ=Database1.mdb";
...
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
c=DriverManager.getConnection(dburl); 
```

我得到以下错误：

```
Errorjava.sql.SQLException: [Microsoft][ODBC Driver Manager] Data source name no t found and no default driver specified 
```

我从我的数据库中创建了一个 DNS。我尝试了很多，但我一直有错误。我还尝试使用数据库的确切位置，我尝试将创建的 DNS 放在我的 java 程序的文件夹中，...

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T07:19:56.937

错误消息*“未找到数据源名称且未指定默认驱动程序”*就是您所需要的。它找不到数据库`Database1.mdb`。您可能想尝试指定驱动程序的绝对路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T20:09:13.597

If somehow possible, don't use a JdbcOdbc driver, but a pure JDBC-Driver for your database

OR

Try this:-

```
DriverManager.registerDriver((Driver) 
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver").newInstance());
c= DriverManager.getConnection(dburl,"",""); 
```

This will ensure that the "sun.jdbc.odbc.JdbcOdbcDriver" class is loaded and connected to the DriverManager.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T01:38:41.530

> 如何使用纯 JDBC 驱动程序？

HXTT Access（商业纯 Java 4 类驱动程序）位于[http://www.hxtt.com/access.html](http://www.hxtt.com/access.html)。

# c++ - 枚举信号参数

> ID：13212947
> 
> 赞同：4
> 
> 时间：2012-11-03T19:59:18.990
> 
> 标签：c++, qt, signals-slots

我正在尝试将 Qt 的信号和槽机制与自定义枚举类型一起使用。

我已阅读以下所有内容，但没有任何帮助：

*   [http://doc.qt.digia.com/4.7-snapshot/qtbinding.html#using-enumerations-of-a-custom-type](http://doc.qt.digia.com/4.7-snapshot/qtbinding.html#using-enumerations-of-a-custom-type)
*   [Qt - 没有这样的信号错误](https://stackoverflow.com/questions/2610151/qt-no-such-signal-error)
*   [以枚举为参数的 Qt 信号](https://stackoverflow.com/questions/7030601/qt-signal-with-an-enum-as-a-parameter)

DetectorEngineThread.h：

```
class DetectorEngineThread : public QThread
{
    Q_OBJECT
    Q_ENUMS(ErrorCode)
    Q_ENUMS(Status)

public:
    enum ErrorCode
    {
        ...
    };

    enum Status
    {
        ...
    };
...

signals:
    void statusChanged(Status newStatus);
    void processingError(ErrorCode code);
};

Q_DECLARE_METATYPE(DetectorEngineThread::ErrorCode)
Q_DECLARE_METATYPE(DetectorEngineThread::Status) 
```

主窗口.h：

```
...
#include "DetectorEngineThread.h"
...

class MainWindow : public QMainWindow
{
    Q_OBJECT
    ...

private:
    DetectorEngineThread* m_detEng;
    ...

private slots:
    void on_detEng_statusChanged(DetectorEngineThread::Status newStatus);
    void on_detEng_processingError(DetectorEngineThread::ErrorCode errorCode);
    ...
}; 
```

主窗口.cpp：

```
...
#include "MainWindow.h"
...

MainWindow::MainWindow(...) : ...
{
    ...
    qRegisterMetaType<DetectorEngineThread::Status>("DetectorEngineThread::Status");
    qRegisterMetaType<DetectorEngineThread::ErrorCode>("DetectorEngineThread::ErrorCode");
    ...

    m_detEng = new DetectorEngineThread(...);

    connect(m_detEng, SIGNAL(statusChanged(DetectorEngineThread::Status)),
            this, SLOT(on_detEng_statusChanged(DetectorEngineThread::Status)), Qt::QueuedConnection);

    connect(m_detEng, SIGNAL(processingError(DetectorEngineThread::ErrorCode)),
            this, SLOT(on_detEng_processingError(DetectorEngineThread::ErrorCode)), Qt::QueuedConnection);
    ...
}
...

void MainWindow::on_detEng_statusChanged(DetectorEngineThread::Status newStatus)
{
    ...
}

void MainWindow::on_detEng_processingError(DetectorEngineThread::ErrorCode errorCode)
{
    ...
}
... 
```

在运行时，我收到以下消息（在 Qt Creator 的应用程序输出面板中）：

> Object::connect: 没有这样的信号
> DetectorEngineThread::statusChanged(DetectorEngineThread::Status) in ...
> Object::connect: 没有这样的信号
> DetectorEngineThread::processingError(DetectorEngineThread::ErrorCode) in ...

很明显，插槽的代码永远不会运行，尽管发出了匹配的信号。

我试过：

*   将枚举移动到全球范围内，但问题仍然存在。
*   通过 QMetaObject::connectSlotsByName 自动连接信号和插槽，但这遇到了同样的问题。
*   在 qRegisterMetaType 和 Q_DECLARE_METATYPE 中使用本地名称（例如 Status 而不是 DetectorEngineThread::Status），并且还尝试在 SIGNAL 和 SLOT 宏中使用这些名称。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-03T20:03:51.770

在信号和槽中声明的枚举应该是完全限定的，所以：

```
void statusChanged(Status newStatus);
void processingError(ErrorCode code); 
```

应该：

```
void statusChanged(DetectorEngineThread::Status newStatus);
void processingError(DetectorEngineThread::ErrorCode code); 
```

# html - IE9反向css中的边框半径

> ID：13212948
> 
> 赞同：0
> 
> 时间：2012-11-03T19:59:20.550
> 
> 标签：html, internet-explorer-9, css

解释我的问题的最好方法是使用图像..

在 Chrome、Firefox 和 Safari 中是这样显示的：

[http://i.stack.imgur.com/Zm2QY.png](http://i.stack.imgur.com/Zm2QY.png)

在 IE9 中是这样的：

[http://i.stack.imgur.com/V9bVG.png](http://i.stack.imgur.com/V9bVG.png)

这是我的 CSS：

```
border: 0px solid #777777;
background: url("../image/shop.png") no-repeat scroll 0 0 transparent;
cursor: pointer;
font: bold 0px 'Trebuchet MS';
padding: 23px 0px;

-moz-border-radius: 0px 0px 0px 13px;
-webkit-border-radius: 0px 0px 0px 13px;
-khtml-border-radius: 0px 0px 0px 13px;
border-radius: 0px 0px 0px 13px;
float: left;
width: 57px; 
```

知道发生了什么吗？请帮帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T20:11:35.980

The code you posted works for me in IE9\. Therefore, it could be a specificity error. A quick way to test is to add `!important` to the end of each of your style declarations. The better way to check is to press F12, find the element you're interested in on the left, then click Trace Styles on the right. Make sure the browser is applying the styles you entered. If it is not, click the plus buttons beside the CSS properties to determine where the style assignments are coming from.

Or you can try:

```
-webkit-border-bottom-left-radius: 13px;
-moz-border-radius-bottomleft: 13px;
border-bottom-left-radius: 13px; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-08T13:12:36.450

这是 IE9 中的一个错误，当元素具有`direction: rtl;`（直接在具有该元素的父元素`border-radius`或从该元素的父元素继承的元素上）时发生。

解决方案是应用于`direction: ltr;`元素。

# ms-access - 在 Access 表单中计算相关表中的行数

> ID：13212952
> 
> 赞同：1
> 
> 时间：2012-11-03T19:59:52.927
> 
> 标签：ms-access

示例：我有三个表（地址、客户和付款）。我想计算折扣。但因此我需要知道每个地址有多少客户。我需要在我的付款表单中计算每个地址的客户，当我选择客户时，我想知道有多少客户住在这个地址上。如果我知道，那么我可以计算折扣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T20:13:35.630

您可以在文本框的控制源中使用 DCount，例如：

```
 =DCount("ID","Customers","AddressID=" & AddressID) 
```

以上将计算客户表中名为 ID 的字段，其中 AddressID 与表单当前记录上的 AddressID 相同。

这只是一个大纲，您必须使其适合您的设置。

或者，您可以创建一个查询客户地址并在查询上使用 DLookUp。

# python - 在 msg python 中搜索字符串

> ID：13212953
> 
> 赞同：0
> 
> 时间：2012-11-03T20:00:10.960
> 
> 标签：python, imaplib

我可以打印每封电子邮件。我想要做的是在每封电子邮件中搜索一个字符串，如果它有字符串，则返回 true 或 false。我怎样`msg`才能做到这一点？

```
conn.select(readonly=1) # Select inbox or default namespace
(retcode, messages) = conn.search(None, '(UNSEEN)')
if retcode == 'OK':
    for num in messages[0].split(' '):
        print 'Processing :', messages
        typ, data = conn.fetch(num,'(RFC822)')
        msg = email.message_from_string(data[0][1])
        typ, data = conn.store(num,'-FLAGS','\\Seen')
        if retcode == 'OK':
            print data,'\n',30*'-'
            for line in msg:
                if "Subject: Thanks for your Walmart.com Order" in line:
                    print line

conn.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T20:10:23.990

当你有一个 email 对象`msg`时，你可以这样做：

```
message_lines = msg.get_payload().splitlines() 
```

然后循环遍历每一行：

```
for line in message_lines:
    if 'Walmart' in line:
        pass # do whatever 
```

但同样，请注意有效载荷是什么......

另一种选择是让 IMAP 服务器完成工作：

```
(retcode, messages) = conn.search(None, '(UNSEEN) (TEXT walmart)') 
```

这将对需要获取的消息数量进行子集化，*然后*您可以根据需要应用更复杂的匹配...

也可以按主题搜索（如果这最终是您想要做的）：

```
(retcode, messages) = conn.search(None, '(UNSEEN) (SUBJECT Thanks for your Walmart.com Order)') 
```

# objective-c - 从字节数组创建 NSImage 的令人费解的索引错误

> ID：13212955
> 
> 赞同：3
> 
> 时间：2012-11-03T20:00:13.707
> 
> 标签：objective-c, c, image, indexing, nsimage

我正在`NSImage`我的代码中从头开始创建一个。首先，我分配一个字节数组：

```
pixels = malloc( (int)( size.width * size.height) * 4 * 8 * sizeof(unsigned char)); 
```

然后我尝试创建一个测试图像，它应该包含从左侧的纯黑色到右侧的纯红色的渐变：

```
-(void)generateTestImage{
    int idx =0;
    for( int i=0; i<(int)(size.height); i++){// Rows
        for (int j=0; j<(int) size.width; j++){// Columns            
            pixels[ idx + 0 ] = 255 * ((float) j / size.width); // r
            pixels[ idx + 1 ] = 0; //  g
            pixels[ idx + 2 ] = 0; //  b
            pixels[ idx + 3 ] = 255;// a

            idx += 4;
        }
    }
} 
```

最后，我将字节数组转换为`NSImage`使用：

```
-(void) convertPixelsToImage{

    if (renderImage == NULL)
        renderImage = [[NSImage alloc] initWithSize:size];
    else{

        NSArray *prevReps = [renderImage representations];
        for (id r in prevReps)
            [renderImage removeRepresentation:r];
    }

    NSLog(@"Creating bitmapImageReprsentation with size:%@", NSStringFromSize(size));
    NSBitmapImageRep *imgRep =
    [[NSBitmapImageRep alloc] initWithBitmapDataPlanes:&pixels
                                            pixelsWide:size.width
                                            pixelsHigh:size.height
                                         bitsPerSample:8
                                       samplesPerPixel:sampPerPix
                                              hasAlpha:true
                                              isPlanar:false
                                        colorSpaceName:NSDeviceRGBColorSpace
                                          bitmapFormat:0
                                           bytesPerRow:0
                                          bitsPerPixel:0];

    [renderImage addRepresentation:imgRep];
} 
```

但是，生成的图像不是我所期望的。

![在此处输入图像描述](../Images/8f4a3591fdcf7e8ea50b4371e02f2773.png)

这是索引偏移的放大视图 ![在此处输入图像描述](../Images/6ced3a6be8d3a1836a5019d0d237f99a.png)

看起来好像我的索引已关闭，因为渐变图案每行向左移动 9 个像素。

此外，我对图像底部的白色条纹感到困惑......

在过去的几个小时里，我一直在尝试各种索引方案，但这些方案都不能解决问题。我已经验证了我在`size`整个代码中都使用了相同的方法。此外，我已经验证生成的图像具有正确的尺寸，但它的内容是关闭的。

这段代码有明显的问题吗？有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T01:21:07.320

请记住，行被四舍五入到某个边界——我在想 16 像素。

# json - node.js 和 json 运行时错误

> ID：13212956
> 
> 赞同：12
> 
> 时间：2012-11-03T20:00:29.897
> 
> 标签：json, node.js

我正在使用 node.js 并尝试解析请求的 JSON 正文。我收到以下错误：

```
undefined:0

^
SyntaxError: Unexpected end of input
    at Object.parse (native)
    at IncomingMessage.<anonymous> (C:\node\xxxx.js:36:14)
    at IncomingMessage.emit (events.js:64:17)
    at HTTPParser.parserOnMessageComplete [as onMessageComplete] (http.js:130:23)
    at Socket.ondata (http.js:1506:22)
    at TCP.onread (net.js:374:27) 
```

我在做：

```
 request.on('data', function(chunk)
    {
    data+=chunk;
    });
     // and in the end I am doing
     obj = JSON.parse(data);  // it's complaining at this point. 
```

输入是：

```
{
    "result": "success",
    "source": "chat"
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-03T20:02:47.940

您正在尝试在数据完全接收之前对其进行解析...将您的 JSON.parse 放入请求的 .end 方法中

```
var data = '';
request.on('data', function(chunk){
  data += chunk;
});
request.on('end', function(){
  var obj = JSON.parse(data);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T20:23:52.540

通过您的编辑：您在代码中的哪个位置执行 JSON.parse？请记住 request.on 是异步的；`JSON.parse`在数据完成之前您不能调用（ `request.on('end')`）...如果您只是在接下来调用它，那么您可能会在数据到达之前调用它。

例如

```
request.on('data', function(chunk)
    {
    data+=chunk;
    });

request.on('end', function() {
     obj = JSON.parse(data);
}); 
```

会工作，但是

```
request.on('data', function(chunk)
    {
    data+=chunk;
    });

obj = JSON.parse(data); 
```

不会，因为 JSON.parse 可能会在任何`'data'`回调触发之前被调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T20:16:39.147

“输入意外结束”是您尝试解析空字符串或不完整的 JSON 字符串时收到的错误消息：

```
// examples
JSON.parse('')
JSON.parse('{') 
```

所以听起来你的数据源不可靠。处理此问题的正确方法是在 JSON.parse() 步骤失败时向客户端返回[400 范围的响应。](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#4xx_Client_Error)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-16T18:37:36.900

```
function connectionHandler(request, response) {
    var data = '';

    request.on('data', function(buffer) {
        data += buffer;
    });

    request.on('end', function() {
        response.writeHead(200, {
            'Content-Type': 'application/json'
        });

        try {
            data = JSON.parse(data.toString());
        } catch (e) {
            response.end();
            return;
        }

        if (!data) {
            return;
        }

        // process "data" here
    })
} 
```

# c++ - C ++通过指向对象的指针数组访问对象方法

> ID：13212957
> 
> 赞同：0
> 
> 时间：2012-11-03T20:00:30.007
> 
> 标签：c++

我无法弄清楚如何通过指向对象的指针数组访问 bject 方法。

我有一个Environment 类的**env对象：**

```
Environment env; 
```

我的环境有一些对象指针以及一个动态的指针数组：

```
 static Robot *robot;
    static Obstacle *obstacle;
    static Object **objects; 
```

所以在**物体**内部我可以有机器人和障碍物：

但是现在当我想访问**对象**数组中对象的方法时，我该怎么做呢？我试过了

```
 Environment env;
    Robot *robot;

    robot = env.objects[0];
    robot->setSpeed(175); 
```

但它没有用。我收到一个错误：

```
error: invalid conversion from ‘Object*’ to ‘Robot*’ 
```

我究竟做错了什么？

**PS：Robot 继承自 Object。**

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T20:08:05.960

Since `Robot` inherits from `Object` you have to use either [`static_cast`](http://en.cppreference.com/w/cpp/language/static_cast) or [`dynamic_cast`](http://en.cppreference.com/w/cpp/language/dynamic_cast) to cast the pointer:

```
robot = static_cast<Robot*>(Environment::objects[0]); 
```

As a side note, I also recommend you to use [`std::vector`](http://en.cppreference.com/w/cpp/container/vector) instead of the array, and a smart pointer like [`std::shared_ptr`](http://en.cppreference.com/w/cpp/memory/shared_ptr) instead of the raw pointers.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T20:06:06.973

You need to cast the Object* to a Robot*. Assuming Robot inherits from Object. I advise you to use dynamic_cast:

```
Robot* robot = dynamic_cast<Robot*>(env.objects[0]);
if (robot != NULL) {
    robot->setSpeed(14);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T20:04:47.170

You should cast your object from Object* to Robot*. However, you have to make sure it is a Robot object otherwise your application will crash.

Here is an example:

```
#include <iostream>
class Object
{
};

class Robot : public Object
{
  public:
  int speed;
  void setSpeed(int newSpeed){ speed = newSpeed; }
};

int main()
{
  Object* obj = new Robot();
  ((Robot*)obj)->setSpeed(4);
  std::cout << "Speed is: " << ((Robot*)obj)->speed << std::endl;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T20:08:28.813

You can't implicitly assign pointer of base class to pointer of derived class. If you need to do this, use `dynamic_cast`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-03T20:09:09.750

*objects* is declared with type Object**, which means that objects[0] is of type Object*. You cannot assign an Object* to a Robot*. Assuming Robot is a class derived from Object and has at least one virtual member function, you can do

```
robot = dynamic_cast<Robot*>(object[0]); 
```

This will perform the cast, or set *robot* to the null pointer value if object[0] happens to not be a Robot. If you know for certain that it is a Robot, you can use static_cast() instead.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-03T20:05:49.390

your object does not seem to be a Robot* or a pointer to a subclass of it.

# python - 如何处理 Django URL 中的 & 符号？

> ID：13212960
> 
> 赞同：3
> 
> 时间：2012-11-03T20:01:06.330
> 
> 标签：python, django, url, django-urls

我有一个 Django 站点，它使用项目名称来创建对查看器友好的 URL。例如：

```
/item/DeluxeWidget/ 
```

我有一个名称中带有＆符号的项目：

```
/item/Red & Blue Widget/ 
```

& 号把东西扔掉了。如果我使用 {{ widget.name|fix_ampersands }}，与号将被转义为`&amp;`但它仍然没有在 URL 模式中被拾取：

```
url(r"^widget/(?P<name>[0-9a-zA-Z&,. -]+)/$", 'site.views.widget' ), 
```

在视图中我使用捕获的名称来做

```
Widget.objects.get(name=name) 
```

什么是转义、模式或过滤器的正确组合来处理 URL 中的 & 符号？我也希望遇到带有撇号的名字。我也应该做些什么来处理这些吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T20:44:28.113

考虑使用[SlugField](https://docs.djangoproject.com/en/dev/ref/models/fields/#slugfield)，它可以自动填充另一个适合在 URL 中使用的字段的清理版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T20:40:14.180

通常，您最好不要这样做，并遵循 SO 类型的模式 - 让我们使用此页面作为示例（`http://stackoverflow.com/questions/13212960/how-do-i-handle-ampersands-in-django-urls`）

然后你可以这样做：

```
url(r"^widget/(?P<widget_id>[0-9]+)/(?P<widget_name>(.*?)/$", 'site.views.widget' ), 
```

然后：

*   `{{ widget.name|fix_ampersands }}`变成`{{ widget.name|slugify }}`
*   `Widget.objects.get(name=name)`变成`Widget.objects.get(pk=widget_id)`

# android - 如何使用整数显示状态

> ID：13212968
> 
> 赞同：0
> 
> 时间：2012-11-03T20:02:24.043
> 
> 标签：android

我在 android 操作系统中发现了一些有趣的东西，我想在自己的应用程序中使用它们，但是如何使用呢？

就像在 ConnectivityManager [http://developer.android.com/reference/android/net/ConnectivityManager.html](http://developer.android.com/reference/android/net/ConnectivityManager.html)中一样，您会看到如下状态代码

```
public static int TYPE_WIFI = 1; 
```

当您使用此代码调用连接管理器时：

```
ConnectivityManager mConnectivityManager = (ConnectivityManager) getSystemService(Connectivity_Service);
NetworkInfo iswifi = mConnectivityManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
if (iswifi.isConnected()){ msg = "You got WIFI!"} 
```

但是如果我有一门课需要说明我是否有互联网连接，我怎么能让它返回这样的状态码？

已经感谢您的回答！:)

伍特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T20:12:32.023

创建一个网络检查器类：

```
public class NetWorkCheck{
    ConnectivityManager connectivityManager;
    NetworkInfo iswifi,mobileInfo;

    public String checkNow(Context con){

        try{
            connectivityManager = (ConnectivityManager) 
                             con.getSystemService(Context.CONNECTIVITY_SERVICE);
            iswifi  = connectivityManager.getNetworkInfo(
                                          ConnectivityManager.TYPE_WIFI);
            mobileInfo = connectivityManager.getNetworkInfo(
                                        ConnectivityManager.TYPE_MOBILE);
        if(wifiInfo.isConnected())
            return "You got WIFI!";
        else {
               if( mobileInfo.isConnected()){
                return "You got TYPE_MOBILE!";
               }
               {
                 return "WIFI or TYPE_MOBILE Connectivity Problem!";
               }
            }
        }
        catch(Exception e){
            return "CheckConnectivity Exception";
        }
    }
} 
```

在活动中，您可以使用此类检查 wifi：

```
NetWorkCheck ntw = new NetWorkCheck();
String meg_wifi = ntw.checkNow(getApplicationContext()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T20:15:06.740

这里是简单的版本：

```
/*@return boolean return true if the application can access the internet*/
public static boolean haveInternet(Context context){
    NetworkInfo info = ((ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo();
    if (info==null || !info.isConnected()) {
        return false;
    }
    if (info.isRoaming()) {
        // here is the roaming option you can change it if you want to disable internet while roaming, just return false
        return true;
    }
    return true;
} 
```

* * *

在这里，您可以使用 wifi 的首选项，您可以指定是否希望某些操作受到设置为仅使用 wifi 的首选项的限制。例如，您可以使用 withRoamingPref = false; 检查小型下载。对任何互联网连接返回 true。然后使用 withRoamingPref = true 检查大型下载，在这种情况下，它将检查用户是否启用了“仅 wifi”来下载它们，如果使用 wifi，则返回 true；如果用户允许移动连接下载，则返回 true，返回 false如果没有互联网连接，或者您使用移动连接并且用户已禁用它以下载大量文件。

```
public static boolean haveInternet(Context context, boolean withRoamingPref){
    NetworkInfo info = ((ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo();
    if (info==null || !info.isConnected()) {
        return false;
    }
    if (info.isRoaming()) {
        // here is the roaming option you can change it if you want to disable internet while roaming, just return false
        if(withRoamingPref) {
            SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(context);
            boolean onlyWifi = settings.getBoolean("onlyWifi", false);

            if (onlyWifi) {
                return false;

            }else{
                return true;
            }

        }else{
            return true;
        }
    }
    return true;
} 
```

* * *

修改案例以返回所有三种状态并决定如何对应用程序的另一部分进行操作：

```
/*@return int return 0 if the application can't access the internet
    return 1 if on mobile data or 2 if using wifi connection*/
public static int haveInternet(Context context){
    NetworkInfo info = ((ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo();
    if (info==null || !info.isConnected()) {
        return 0;
    }
    if (info.isRoaming()) {
        return 1;
    }else{
        return 2;
    }
} 
```

PS：而不是数字，您应该为每个状态分配一个静态 int，然后返回它而不是原始 int。例如，在类的开头声明：

公共静态 int INTERNET_DISABLED = 0;

然后代替“返回0；” 您将使用“返回 INTERNET_DISABLED;”

这样您就不必记住每个数字的含义，您将根据名称检查应用程序的其他部分，如下所示：

```
if(myClass.haveInternet == myClass.INTERNET_DISABLED){
     //TODO show no internet message
} 
```

# jquery - 状态和响应之间的延迟

> ID：13212971
> 
> 赞同：0
> 
> 时间：2012-11-03T20:02:40.927
> 
> 标签：jquery, ajax

我正在使用 jQuery 执行 ajax 请求，但行为不稳定。

大多数情况下，这种情况会发生（使用 Chrome）；
发送 Ajax POST 请求
*~400ms 等待时间*
请求出现在 Chrome 的网络记录器中，状态为 200 OK
请求的响应出现在 Chrome 的响应选项卡中
我的回调函数被调用。一切都很好。

然而，这完全是随机发生的；
发送 Ajax POST 请求
*~400ms 等待时间*
请求出现在 Chrome 的网络记录器中，状态为 200 OK
*~2000 - 10000ms 等待时间*
请求的响应出现在 Chrome 的响应选项卡中
我的回调函数被调用。
到目前为止，用户可能已经离开了页面，因为他认为它挂断了。

为什么是这样？在第二次等待期间会发生什么？

提前致谢。

编辑：
这一切都发生在同一台服务器上
如果我手动访问请求的页面，加载时间不超过 400 毫秒，没有任何例外。

# url - Automatically Modify URL in Firefox

> ID：13212976
> 
> 赞同：4
> 
> 时间：2012-11-03T20:03:06.210
> 
> 标签：url, firefox, firefox-addon

I can access various scientific journals for free through my university's internal site. However, I often find an interesting article through a Google search, and have to manually modify the url to access the free version.

For example:

*www.nature.com/SomethingSpecifyingTheArticle*

needs to be

*www.nature.com.**ExtraPart**/SomethingSpecifyingTheArticle*

The **ExtraPart** gives me free access to the article via my university credentials. I can manually add it to the URL, but I am looking for a way to do it automatically.

It always goes at the end of the root URL like this:

*www.science.com.**ExtraPart**/SomethingSpecifyingTheArticle* *prl.aps.org.**ExtraPart**/SomethingSpecifyingTheArticle*

Is it possible to automate this? Maybe using some script and Greasemonkey?

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T21:36:50.237

更好更通用的解决方案：

使用以下地址添加书签（在任何浏览器中）：

javascript:(function(){%20var%20curloc%20=%20window.location.toString();%20var%20newloc%20=%20curloc.substring(0,%20curloc.indexOf("/",%208)) %20+%20".ExtraPart"%20+%20curloc.substring(curloc.indexOf("/",%208));%20location.href=newloc;%20})()

当您在页面上时，您希望在根 URL 的末尾添加 ExtraPart，请单击此书签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T11:17:31.643

URL Swap Run (https://addons.mozilla.org/en-us/firefox/addon/url-swap/) essentially does what I want - the only bad thing about it is that I have to manually add the individual journals as rules in the preferences, but that's not a big issue.

# c - C : Pointers and functions 2DArray

> ID：13212982
> 
> 赞同：3
> 
> 时间：2012-11-03T20:03:35.223
> 
> 标签：c, pointers

I'm really a beginner in C programming language, and i've started learning pointers... I have some problems manipulating them. What i want to do is to read and write a matrix, with 2 functions, without using global variables (just pointers)... So I did not succed making this. I've searched a lot about pointers and I try to understand how i can use them , but i'm not able to read and write that matrix What i do wrong ...Please, please, please help me (Even with some Useful links about 2DArray & pointers)...Thank you!

```
#include <stdio.h>
#include <stdlib.h>

void readM(int (*x)[100][100], int *row, int *column)
{
int i,j;
printf("Row no: ");
scanf("%d",row);
printf("Column no: ");
scanf("%d",column);
printf("Matrix elemnts: \n");    
for(i=0;i<(*row);i++)
{
    for(j=0;j<(*column);j++)
    {
        printf("[%d][%d]=",i,j);
        scanf("%d",x[i][j]);
    }
}
}

void writeM(int (*x)[][100], int *row, int *column)
{
int i,j;
printf("\nMatrix is: \n");
for(i=0;i<(*row);i++){
    for (j=0;j<(*column);j++){
    printf("%d",(*x)[i][j]);
    }
    printf("\n");
    }
}

int main()
{

char choice;
int a[100][100],m,n;
do
{
   printf("\nChose an option\n\n"
      "1) read matrix \n"
      "2) write matrix\n"
      "3) display matrix in spiral\n"
      "4) return max and min\n"
      ///...etc
   scanf("%c", &choice);
   while (choice<'0'|| choice>'4')
         {
            printf("\nInvalid option! Chose again! \n\n");
            scanf("%c",&choice);
         }
   switch (choice)
   {
        case '0': exit(0);
        case '1': readM(&a,&m,&n); break;
        case '2': writeM(&a,&m,&n);break; /// ... etc
} while (choice !=5);
getch();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T20:08:07.520

There probably would be more than one mistakes

Using scanf with %s for a single char variable. If you wanna input a char, use %c (better yet, use getc or getchar) since scanf has it's own issues. Or pass a char array to %s. But then you can't compare a string with a char like you did in

```
choice<'0' 
```

Also remove the '\n' before scanf. In printf \n flushes the buffer and moves to next line. In case of scanf, adding it after the %c or %s still makes some sense (as you are indicating a terminator), but certainly not before it.

There is no function pointer here. They are used to pass functions as parameters. You are merely passing an array **which is passed by reference by default**. So simply use

```
int x[100][100] or int x[][100] 
```

in parameters of function definitions and treat x as an array like

```
x[a][b] rather than *x[a][b] 
```

Also when passing array from main simply pass 'a' which is the name of array that is passed by reference itself. Passing address of an array is meaningless.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T20:19:10.560

另一个问题是，当您读取数组时，您首先跟随指针 (*x)，然后添加数组偏移量 [i][j]：这可能会将您带到一些您甚至没有的内存位置进入。由于您传递的是*指针*数组，因此您将首先查看数字位置 (x[i][j])，然后跟随指针。

编辑：之前的用户更新了他的答案以反映我在这里给出的第二个建议，所以我删除了它。

# eclipse - Installing RED5 plugin to Flash Builder

> ID：13212984
> 
> 赞同：1
> 
> 时间：2012-11-03T20:03:40.407
> 
> 标签：eclipse, eclipse-plugin, red5

I have Eclipse Builder 4.6 and would like to put in the Red5 Plugin.

I had difficulties so I read the information here in SO at the following link:

[Flash Builder 4 + Red5 IDE Plugin](https://stackoverflow.com/questions/7275616/flash-builder-4-red5-ide-plugin)

Unfortunately, the solution presented there doesn't work for a variety of reasons:

1.  The update site provided in the solution is for Galileo. Flash Builder 4.6 is based on Indigo

2.  Even if the site was correct, the repo there has business tools, AJAX tools, and Web Service tools. It does not have WTP. Furthermore, you can't install anything from there because there are unspecified dependencies preventing installation.

3.  Even when I found WTP for Indigo ([http://download.eclipse.org/webtools/repository/indigo](http://download.eclipse.org/webtools/repository/indigo)), Builder cannot install it because of several unspecified dependencies that are apparently among the many components that are not shipped with Builder(!).

So: has anyone out there managed to install Red5 plugin into Flash Builder??? If so, what did you have to do in order to do it?

Thanks in advance for any help on this somewhat critical matter.

# tumblr - Tumblr 自定义页面

> ID：13212985
> 
> 赞同：1
> 
> 时间：2012-11-03T20:03:42.913
> 
> 标签：tumblr

是否可以在 Tumblr 中“添加页面”使用“自定义布局”并插入此代码

```
{block:Posts}
{block:Text}
    <li><img src="http://static.tumblr.com/taio0pf/aX1l4qwei/article-icon.png" />{Permalink}</li>
{/block:Text}
{block:Photo}
    <li><img src="http://static.tumblr.com/taio0pf/WuHl4qwg3/photo-icon.png" />{Permalink}</li>
{/block:Photo}
{block:Link}
    <li><img src="http://static.tumblr.com/taio0pf/TpTl4qwge/link-icon.png" />{Permalink}</li>
{/block:Link}
{/block:Posts} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T12:58:48.277

这种特殊的 Tumblr 标记不能在自定义页面上使用，因为没有关联的博客文章。它仅适用于[主题 ( )``Customize appearance` → `Edit HTML``](http://www.tumblr.com/docs/en/custom_themes#get_started)。

您必须为您的页面使用[自定义布局](http://www.tumblr.com/docs/en/pages#layouts)并直接使用 HTML。

我假设您想列出按类型（文本、照片、链接）排序的所有博客文章。您必须手动链接每个帖子。或者，您可以按类型标记您的帖子并链接此自定义页面上的标签。

# python - 即使似乎已安装，也无法导入 scikits-learn

> ID：13212987
> 
> 赞同：29
> 
> 时间：2012-11-03T20:03:47.303
> 
> 标签：python, scikit-learn, scikits

根据 scikit-learn 用户指南，我使用`pip install -U scikit-learn`.

所以使用`pip search scikit-learn`，我得到这个搜索结果：

```
scikit-learn - A set of python modules for machine learning and data mining
INSTALLED: 0.12.1 (latest) 
```

但是当我进入 Python 并尝试`import sklearn`使用`ImportError: No module named sklearn`. 这真的应该刚刚奏效。

我在带有 NumPy 1.6.1 和 SciPy 0.10.1 的 Mac OS 10.6.8 上使用 Enthought 的 Python (2.7.3) 免费分发。是的，我知道 EPD Free 附带 scikit-learn，但 pip 应该升级我的版本，以便我可以实际使用 scikit-learn。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2015-01-21T08:46:31.600

遇到同样的问题，@Alan 给出了正确的解决方案，但方法很艰难。这是解决问题的简单步骤，因为我在 mac osx 上，提供相同的步骤。

```
Ameys-Mac-mini:~ amey$ python --version
Python 2.7.2
Ameys-Mac-mini:~ amey$ cd /Library/Python/2.7/site-packages/
Ameys-Mac-mini:site-packages amey$ brew install gcc
Ameys-Mac-mini:site-packages amey$ sudo pip install -t . numpy scipy scikit-learn 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-03T22:34:06.753

谢谢大家（请参阅问题下的评论主题）！事实证明，我的 Mac 的 /Library/Frameworks/Python.framework 目录树下有两个版本的 Python：2.7（随 OSX 提供）和 7.3（由 EPD Free 安装）。

事实证明，`pip`当我真正想要它低于 7.3 时，将 scikit-learn 置于 2.7 之下。

将目录更改为所需 Python 版本下的站点包，并调用`pip install -t . {package-name}`足以在所需 Python 版本下安装包名。

POSTLUDE（2021 年 2 月）：回顾近 9 年前的这个问题，我想我遇到了这个 XKCD 漫画的一个版本。

[![python中的依赖管理地狱](../Images/72d4c7989a57ee5f048083cbd75ef3aa.png)](https://i.stack.imgur.com/A87DA.png)

如今，对于像 scikit 这样的 Python 数据工程库的依赖管理，我很高兴只使用[conda](https://conda.io/en/latest/)和[pyenv](https://github.com/pyenv/pyenv)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-04-28T03:44:54.250

就我而言，我的 python 扩展已全部安装在

```
/Library/Python/2.7/site-packages/ 
```

使用官网给出的命令后

```
pip install -U numpy scipy scikit-learn 
```

scikit-learn 软件包实际上安装在我的

```
/usr/local/lib/python2.7/site-packages 
```

所以我把第二个中的所有包都复制到了第一个目录下，然后就可以导入sklearn包了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-14T01:15:17.597

备查：

easy_install -U statsmodels

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-25T19:21:10.003

我有同样的问题，我可以弄清楚 python 版本是不同的。我跟着这个[答案](https://community.cloudera.com/t5/Support-Questions/PySpark-in-Zeppelin-Does-not-have-all-libraries/td-p/98286)。

在 Zeppelin 页面上，转到设置、解释器设置并将您的 python 更改为 python3。

# jquery - jQuery未定义对象

> ID：13212990
> 
> 赞同：-1
> 
> 时间：2012-11-03T20:03:54.393
> 
> 标签：jquery

我写这个，因为它让我发疯，我不知道它怎么可能：

我的代码

```
var categories = new Array(length);
    for (i = 0; i < length; ++i)
    {categories[i] = new Array (2);}
    $(".lang-box").each(function(i) {
      if( i < categories.length) {categories[i][0] = $(this).attr('name');categories[i][1] = $(this).val();}
    }); 
```

如果我这样做怎么可能：

```
console.log(categories.lenght); 
```

我得到“未定义”，但如果我这样做

```
console.log(categories); 
```

我得到：

```
[ ["pl","fwer"],["en",""]] 
```

这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T20:06:57.393

简单的修复。如果你改变

```
console.log(categories.lenght); 
```

... 到 ...

```
console.log(categories.length); 
```

它应该可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T20:14:13.360

你打错长度了。

用这个：
`console.log(categories.length);`

# python - 如何在没有最终用户交互的情况下从 Python 以编程方式查询 BigQuery？

> ID：13212991
> 
> 赞同：11
> 
> 时间：2012-11-03T20:04:16.287
> 
> 标签：python, google-bigquery

这个问题看起来应该很容易回答，但是经过几天的研究和几个死胡同，如果`BigQuery`不坚持基于用户的 OAuth，我似乎无法获得查询结果。有没有人有这方面的运气？我没有`Google AppEngine`用于我的应用程序，它托管在`EC2`. 这是确切的情况：

```
User wants reporting data -->
Web server makes queries to BigQuery -->
Data is transformed for use in WebApp and returned to User. 
```

每当我按照 Google 示例进行操作时，最终都会弹出一个 Web 浏览器，要求我选择一个 Google 帐户用于身份验证。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-03T23:37:01.967

抱歉，查找信息是如此具有挑战性。您正在寻找我们的使用 OAuth 2.0指南[授权访问 BigQuery API](https://developers.google.com/bigquery/docs/authorization)中记录的所谓[服务帐户。](https://developers.google.com/bigquery/docs/authorization#service-accounts-server)

[这是一个使用 Python客户端库](https://developers.google.com/bigquery/docs/libraries)的示例，但您需要查看参考文档以获取有关获取适当凭据的信息：

```
import httplib2

from apiclient.discovery import build
from oauth2client.client import SignedJwtAssertionCredentials

# REPLACE WITH YOUR Project ID
PROJECT_NUMBER = 'XXXXXXXXXXX'
# REPLACE WITH THE SERVICE ACCOUNT EMAIL FROM GOOGLE DEV CONSOLE
SERVICE_ACCOUNT_EMAIL = 'XXXXX@developer.gserviceaccount.com'

# OBTAIN THE KEY FROM THE GOOGLE APIs CONSOLE
# More instructions here: http://goo.gl/w0YA0
f = file('key.p12', 'rb')
key = f.read()
f.close()

credentials = SignedJwtAssertionCredentials(
    SERVICE_ACCOUNT_EMAIL,
    key,
    scope='https://www.googleapis.com/auth/bigquery')

http = httplib2.Http()
http = credentials.authorize(http)

service = build('bigquery', 'v2')
datasets = service.datasets()
response = datasets.list(projectId=PROJECT_NUMBER).execute(http)

print 'Dataset list:'
for dataset in response['datasets']:
  print '%s' % dataset['datasetReference']['datasetId'] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-13T07:51:01.103

如果您使用[gcloud](https://cloud.google.com/sdk/gcloud/)在本地登录：

```
gcloud auth application-default login 
```

然后一个凭证文件将存储在 ~/.config/gcloud/ 中，可以加载：

```
from oauth2client.client import GoogleCredentials
from apiclient.discovery import build

credentials = GoogleCredentials.get_application_default()
service = build('bigquery', 'v2') 
```

或者您可以直接使用以下命令加载 BQ 安全密钥文件：

```
from google.cloud import bigquery
client = bigquery.Client.from_service_account_json(path_to_key.json) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-29T22:09:59.640

我遇到过同样的问题。这可能是因为您在项目中没有您正在使用的服务帐户密钥的必要权限。

# actionscript-3 - 无法在 adobe air ELS 中获取保存的数据

> ID：13212992
> 
> 赞同：0
> 
> 时间：2012-11-03T20:04:18.123
> 
> 标签：actionscript-3, apache-flex, air, adobe

我正在尝试使用以下代码从 adobe air 应用程序中保存和获取数据。但它只是不断提醒未定义。有人能找到错误吗？

```
 function saveData(n, v){
                var bytes = new air.ByteArray(); 
                bytes.writeUTFBytes(v); 
                return air.EncryptedLocalStore.setItem(n, bytes);   
            }

            function getData(n){
                var storedValue = air.EncryptedLocalStore.getItem(n); 
                return air.trace(storedValue.readUTFBytes(storedValue.length));
            }

            saveData('item1', 'value1');
            alert(getData('item1')); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T23:09:14.553

尝试删除该`air.trace`功能

```
function saveData(n:String, v:String):void
{
    var bytes = new air.ByteArray(); 
    bytes.writeUTFBytes(v);

    air.EncryptedLocalStore.setItem(n, bytes);   
}

function getData(n):String
{
    var storedValue = air.EncryptedLocalStore.getItem(n); 

    return storedValue.readUTFBytes(storedValue.length);
}

saveData("item1", "value1");
alert(getData("item1")); 
```

# c# - 表达式树：使用 ExpressionVisitor 修改操作数

> ID：13212999
> 
> 赞同：0
> 
> 时间：2012-11-03T20:04:51.613
> 
> 标签：c#, expression-trees

我正在使用 C# 中的表达式树并想修改表达式。

我使用了这个[示例](http://msdn.microsoft.com/en-us/library/bb546136.aspx)，但是在示例中他们重用了左右节点。我将如何修改任何一个节点？

我得到以下代码：

```
 [TestMethod]
    public void ExpressionDemo_ModifiesExpression()
    {
        var demo = new ExpressionDemo();

        var expression = demo.ModifyAddition((Expression<Func<int, int>>)(x => x + 1));
    } 
```

我使用简单的 + 1 加法函数调用 ModifyAddition。我想将右操作数 (1) 修改为不同的整数。

```
public class ExpressionDemo : ExpressionVisitor
{
    public Expression<Func<int, int>> ModifyAddition(Expression func)
    {
        return (Expression<Func<int, int>>) Visit(func);
    }

    protected override Expression VisitBinary(BinaryExpression node)
    {
        if (node.NodeType == ExpressionType.Add)
        {
            Expression left = node.Left;

            Expression right = ???

            return Expression.MakeBinary(ExpressionType.Add, left, right);
        }

        return base.VisitBinary(node);
    }
} 
```

我对如何构造正确的右操作数感到困惑，这样我就可以返回一个新的 BinaryExpression。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T20:07:14.253

你*只想*把 any`x + y`变成`x + 1`吗？如果是这样，我怀疑你只是想要：

```
Expression right = Expression.Constant(1); 
```

（当然，您应该验证加法类型是否适用于整数。）

如果这*不是*您想要做的，请更具体。