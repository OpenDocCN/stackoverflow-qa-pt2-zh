# StackOverflow 问答 13106000-13106999

# javascript - AJAX请求，获取具有相同类的多个链接的href属性

> ID：13106002
> 
> 赞同：0
> 
> 时间：2012-10-28T02:52:42.793
> 
> 标签：javascript, jquery, ajax

我正在编写一段 jQuery，如果单击 .ajaxLink，则将其作为 URL 并将其应用于 ajax 调用，如下所示：

```
$(".ajaxLink").click(function (e) {
    e.preventDefault();
    removePreviousData(); // removes any div that might be loaded in #content
    jQuery.ajax({
        type: 'GET',
        url: $(this).attr('href'),
        success: function (data, textStatus) {
            $(data).appendTo('#content');
        },
        error: function (XMLHttpRequest, textStatus, errorThrown) {},
        complete: function (XMLHttpRequest, textStatus) {
            loadedData() // applies some relative animations for loaded content
        }
    });
    return false;
}); 
```

这适用于我单击的第一个链接，但由于我在同一页面上有多个使用此类的链接，因此当我单击第二个链接时，它只会加载相同的数据。我如何让它适用于每个 .ajaxLink （假设 .each()，但不能让它运行）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T02:58:06.757

如果您只想 `#content`显示单击链接的 href 内容，则必须替换`#content`'s 内容而不是附加到它。

```
 success: function (data, textStatus) {
        $('#content').html(data);
    }, 
```

# java - 如何在扫描线算法中检测正确的端点

> ID：13106003
> 
> 赞同：1
> 
> 时间：2012-10-28T02:52:44.053
> 
> 标签：java, algorithm, geometry, computational-geometry

我想知道在[扫描线算法](http://en.wikipedia.org/wiki/Bentley%E2%80%93Ottmann_algorithm)中，当我们使用从左到右的扫描垂直线扫描时，我们如何检测形状（圆形或矩形）的右端点？所以该算法基本上是每当我们击中左端点然后插入到该形状的 y 间隔的间隔树中，当我们击中任何形状的右端点时，我们将其从间隔树中删除。例如

```
 ArrayList<Circle> circles = new ArrayList<Circle>();
    BinarySearchTree<Interval> intervalTree = new BinarySearchTree<Interval>();

    //sort by x coordinate
    Collections.sort(circles, new Comparator<Circle>(){
          @Override
          public int compareTo(Circle c1, Circle c2){
                return c1.x - c2.x;
          }
    });        

    //here's where the sweep line begins
    for(int i = 0; i < circle.size(); i++)
    {
          //we hit the ith circle's left endpoint 
          Circle current = circle.get(i);

          //insert into the interval tree
          intervalTree.addInterval(new Interval(current.y, current.y+current.height));

    } 
```

但是我们什么时候知道我们是否到达了 Circle 的正确端点？我们需要另一个哈希图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:49:38.347

```
public enum EventType {
    START,
    END;
}

public class EventPoint implements Comparable<EventPoint> {
    public EventType type;
    public double x;
    public Circle circle;
    public Interval interval;

    public EventPoint(EventType type, double x,
            Circle circle, Interval interval) {
        this.type = type;
        this.x = x;
        this.circle = circle;
        this.interval = interval;
    }

    /**
     * Compare this EventPoint with another. This is used by the priority
     * queue to determine the "minimum" event.
     */
    public int compareTo(EventPoint other) {
        return Double.compare(x, other.x);
    }

    /** Creates a start event, with a circle. */
    public static EventPoint start(double x, Circle circle) {
        return new EventPoint(START, x, circle, null);
    }

    /** Creates an end event, with an interval. */
    public static EventPoint end(double x, Interval interval) {
        return new EventPoint(END, x, null, interval);
    }
} 
```

```
PriorityQueue<EventPoint> events = new PriorityQueue<EventPoint>();
BinarySearchTree<Interval> intervalTree = new BinarySearchTree<Interval>();

// Initialize all the start events, and include the corresponding circle.    
for (Circle c : circles) {
    events.add(EventPoint.start(c.x, c));
}

while (!events.isEmpty()) {

    // Remove the minimum (leftmost) event from the queue
    EventPoint ep = events.poll();

    switch (ep.type) {

        case START:
            Circle current = ep.circle;
            // (Look for intersections in the interval tree...)

            // Create an interval and add it to the interval tree
            Interval interval = new Interval(current.y, current.y +
                    current.height);
            intervalTree.add(interval);

            // Add an end-event to the queue, and include the interval for
            // later removal.
            events.add(EventPoint.end(current.x + current.width, interval));

            break;

        case END:
            // Remove the interval from the interval tree.
            intervalTree.remove(ep.interval);
            break;
    }
} 
```

# javascript - jQuery - 让我的类递归

> ID：13106005
> 
> 赞同：0
> 
> 时间：2012-10-28T02:52:59.210
> 
> 标签：javascript, jquery, class, recursion, this

我想做的是制作一个多级菜单。菜单可以有用户想要的尽可能多的子菜单。我只想显示最顶层的菜单，但是在用户单击一个项目后，我希望菜单向下滑动并显示该项目的子菜单。然后用户可以单击这些项目之一以展开下一个子菜单，依此类推。

所以在我进入第三个子菜单后，处理子关卡的动画变得有点棘手。我决定重新开始，为我的菜单创建一个类来处理逻辑。我是 JavaScript 类的新手，但这是我目前所拥有的：

```
function Menu(ul, parent){
  $ul = $(ul);
  this.lis = [];
  this.parent = parent || false;

  $ul.children('li').each(function(i, li){
    this.lis.push(new Li(li, this));
  });
}

function Li(li, menu){
  $li = $(li);

  if($li.children('div').length)
    this.submenu = new Menu($($li.children('div')[0]).children('ul')[0], menu);
  else
    this.submenu = false;
}

var m = new ​Menu($('#menu'));​​​ 
```

我用于此子菜单的动画也不是典型`slideDown`的。我让菜单向下滑动，然后子菜单淡入。所以在我的 HTML 中，我只是将子菜单包装在 div、`slideDown`div 和`fadeIn`ul 中。所以这就是我的 HTML 的样子（请记住，任何级别上都可以有任意数量的项目，也可以有任意数量的级别）：

```
<ul>
  <li>
    Menu Item 1
    <div>
      <ul>
        <li>
          Submenu Item 1
        </li>
        <li>
          Submenu Item 2
          <div>
            <ul>
              <li>Sub-Submenu Item 1</li>
              <li>Sub-Submenu Item 2</li>
            </ul>
          </div>
        </li>
        <li>
          Submenu Item 3
        </li>
      </ul>
    </div>
  </li>
  <li>Menu Item 2</li>
</ul> 
```

我想写一个类，这样一个`<li>`项目就可以知道它在菜单中的位置。因此，当我不得不使用动画关闭菜单并打开另一部分时，我可以只使用简单的类调用，而不是自己跟踪代码。显然我刚刚开始编写这段代码，但我无法通过这部分，因为我不知道如何。

发生的事情是`Menu Item 1`被添加到`this.lis`, 然后`Submenu Item 1`，但第 2 项不会被添加并且我得到错误`Uncaught TypeError: Cannot call method 'push' of undefined`所以似乎因为我正在创建新的 Menu 对象，所以它`this`会丢失。所以我不知道我能做些什么来完成这项工作。有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T03:12:21.810

我花了一点时间来理解这个问题，但我相信我已经弄清楚了。

因此，您对“this”上下文丢失的看法是正确的。就使事情保持一致而言，您几乎就在那里。您想要做的是在变量内部传递“this”上下文，允许下一次传递在其上下文中正确使用“this”关键字（我希望这是有道理的）......

在这里，也许更容易向您展示：

```
function Menu(ul, parent){
    var myMenu = this;
    $ul = $(ul);
    myMenu.lis = [];
    myMenu.parent = parent || false;

    $ul.children('li').each(function(i, li){
        // the "this" keyword in this function context is not the same as the one above
        // which is why you want to use a variable to carry it down from above

        // $(this) will actually reference your "li" element
        myMenu.lis.push(new Li(this, myMenu));
    });
}

function Li(li, menu){
    $li = $(li);

    if($li.children('div').length){
        this.submenu = new Menu($($li.children('div')[0]).children('ul')[0], menu);
    } else {
        this.submenu = false;
    }
}

var m = new ​Menu($('#menu'));​​​ 
```

我还没有测试过这段代码，但我很有信心它应该适合你。希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T03:24:43.190

```
function Menu(ul, parent){
$ul = $(ul);
this.lis = [];
this.parent = parent || false;

$ul.children('li').each(function(i, li){
  this.lis.push(new Li(li, this));
});
} 
```

for-each 循环中的“this”有错误的上下文，你想要类似的东西

```
function Menu(ul, parent){
$ul = $(ul);
this.lis = [];
this.parent = parent || false;
var that = this/
$ul.children('li').each(function(i, li){
  that.lis.push(new Li(li, that));
});
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T03:39:10.483

为什么不使用 jquery 切换或 slideToggle？你可以在这里看到文档：[jquery .toggle()](http://api.jquery.com/toggle/) & [jquery .slideToggle()](http://api.jquery.com/slideToggle/)

# opencv - cv::Canny 抛出不匹配/不支持的格式异常

> ID：13106007
> 
> 赞同：0
> 
> 时间：2012-10-28T02:53:23.633
> 
> 标签：opencv, edge-detection

我正在做一些非常基本的边缘检测工作。我的部分实现涉及从自定义 Image 类复制到 cv::Mat，然后复制回 Image。我正在使用[本文](http://docs.opencv.org/doc/tutorials/imgproc/shapedescriptors/find_contours/find_contours.html)作为完成边缘检测和轮廓工作（当前列表中未显示）的指南。在这个例子中，PerturbedBorderFilter 是 Image 的子类。这是我所拥有的：

```
void PerturbedBorderFilter::performFilter(const Image& src)
{
  int h = src.Height(), w = src.Width();
  cv::Mat
    orig(h, w, CV_32FC3),
    cannyOutput(h,w,CV_32FC1),
    origGray(h,w,CV_32FC1);

  src.copyTo(orig);

  cv::cvtColor(orig, origGray, CV_RGB2GRAY);
  cv::blur(origGray, origGray, cv::Size(3,3));
  cv::Canny( origGray, cannyOutput, 0.1, 0.2, 3);

  copyFrom(cannyOutput);
} 
```

我最终遇到了这个运行时错误：

```
OpenCV Error: Unsupported format or combination of formats () in cvCanny, file /build/buildd/opencv-2.3.1/modules/imgproc/src/canny.cpp, line 67
terminate called after throwing an instance of 'cv::Exception'
  what():  /build/buildd/opencv-2.3.1/modules/imgproc/src/canny.cpp:67: error: (-210)  in function cvCanny 
```

据我所知，“origGray”和“cannyOutput”共享相同的类型、深度和通道数。我不确定我还应该检查什么。

如果 copyTo() 和 copyFrom() 的实现以某种方式很重要，我也可以提供这些。

一些附加信息：

1.  类 Image 的原生色彩空间是 RGB，32 位浮点深度，值在 [0,1] 中。
2.  目前，copyTo() 将图像上下颠倒复制，但在其他情况下保持不变。我想这一定是无关的，但谁知道呢，也许它是有用的......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T09:52:20.380

`cv::Canny`仅支持`CV_8U`图像深度。

# ruby - 单例方法有什么用？

> ID：13106010
> 
> 赞同：3
> 
> 时间：2012-10-28T02:53:52.103
> 
> 标签：ruby, singleton

我对 Ruby 很陌生，并且已经学习了它的语法以及单例方法。我了解如何创建和使用它们。但为什么要使用它们？

有人可以给我一些使用单例方法有帮助的真实案例吗？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T05:06:09.957

*   [http://www.rubyist.net/~slagell/ruby/singletonmethods.html](http://www.rubyist.net/~slagell/ruby/singletonmethods.html)
*   [http://www.ruby-forum.com/topic/86169](http://www.ruby-forum.com/topic/86169)；
*   [http://ola-bini.blogspot.com/2006/09/ruby-singleton-class.html](http://ola-bini.blogspot.com/2006/09/ruby-singleton-class.html)

单例方法：能够为单个对象定义特殊行为通常很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T05:16:21.610

也许你想做一些调试？假设您有一组对象，并且您知道其中一个对象在与它的兄弟姐妹一起迭代时起作用...因此您修改了一个有问题的方法以将其包装在一些日志记录/跟踪代码中，从而使您不必阅读日志记录页面其他 100 项的陈述。

这至少是我能想到的一个人为的例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T05:11:36.380

至少，您需要一个构造函数，它必须是类上的单例方法。如果没有构造函数，你甚至不会有实例（除了总是从字面量创建实例）。并且您希望构建实例的方式不应仅限于一种方式。例如，`Time`具有构造函数`now`、`at`、`utc`、`gm`等。

# quicklisp - quicklisp-client:quickload 未定义

> ID：13106014
> 
> 赞同：1
> 
> 时间：2012-10-28T02:54:22.930
> 
> 标签：quicklisp, slimv

我在 slimv 中安装了 quicklisp 并且 quickload 似乎没有工作。

```
CL-USER> (ql:quickload "hunchentoot")
The function QUICKLISP-CLIENT:QUICKLOAD is undefined. 
```

apropos 有效，所以我不确定出了什么问题。

```
CL-USER> (ql:system-apropos "hunchentoot")         
#<SYSTEM clack-handler-hunchentoot / clack-20121013-git / quicklisp 2012-10-13> 
#<SYSTEM hunchentoot / hunchentoot-1.2.6 / quicklisp 2012-10-13>                
#<SYSTEM hunchentoot-auth / hunchentoot-auth-20101107-git / quicklisp 2012-10-13>
#<SYSTEM hunchentoot-cgi / hunchentoot-cgi-20111105-git / quicklisp 2012-10-13>
#<SYSTEM hunchentoot-test / hunchentoot-1.2.6 / quicklisp 2012-10-13>         
#<SYSTEM hunchentoot-vhost / hunchentoot-vhost-20110418-git / quicklisp 2012-10-13> 
```

# r - 通过 knitr、gWidgetsWWW 使用时出现 data.table 错误

> ID：13106018
> 
> 赞同：11
> 
> 时间：2012-10-28T02:55:38.023
> 
> 标签：r, data.table, knitr, gwidgets

我正在试验 gWidgetsWWW 并遇到了一个奇怪的错误。我创建了一个带有处理程序的按钮来 knit2html 使用 data.table 赋值运算符“：=”的报告。报告返回此错误：

> 错误：:= 被定义为仅在 j 中使用，并且（当前）仅使用一次；即 DT[i,col:=1L] 和 DT[,newcol:=sum(colB),by=colA] 都可以，但 DT[i,col]:=1L 不行，DT[i]$col 不行： =1L 而不是 DT[,{newcol1:=1L;newcol2:=2L}]。请参阅帮助（“：=”）。检查 is.data.table(DT) 是否为 TRUE。

该报告直接使用 knit2html 以及通过 RStudio 的“Knit HTML”按钮按预期生成，所以我不确定为什么处理程序调用 knit2html 时它会失败。

这是一个 gWidgetsWWW 窗口“test_gui.R”：

```
library(gWidgetsWWW)
library(knitr)

w<-gwindow("Test Window")
g<-ggroup(horizontal=F,cont=w)
b<-gbutton("Report Button",cont=g,handler=function(h,...){
    knit2html("test_report.Rmd")
    localServerOpen("test_report.html")
})

visible(w)<-T 
```

这是一个产生错误的示例 R Markdown Doc：

```
Test Report
===========

```{r test_chunk}
library(data.table)

df<-data.frame(State=rownames(USArrests),USArrests)

data.table(df)[,State:=tolower(State)]

``` 
```

不知道为什么，但是当我调用 localServerOpen("test_gui.R") 并单击按钮时，出现错误...

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T00:22:21.913

感谢 Zach 和 Yihui，这个问题现在在 R-Forge 上的 data.table v1.8.3 中得到修复。

```
o  gWidgetsWWW wasn't known as data.table aware, even though it mimics
   executing code in .GlobalEnv, #2340\. data.table is now gWidgetsWWW aware.  
   Further packages can be added if required by changing a new variable
      data.table:::cedta.override
   by using assignInNamespace(). Thanks to Zach Waite and Yihui Xie for
   investigating and providing reproducible examples. 
```

完整的 assignInNamespace 命令是：

```
assignInNamespace("cedta.override",
                  c(data.table:::cedta.override,"<nsname>"),
                  "data.table") 
```

如果您不确定确切的命名空间名称，`options(datatable.verbose=TRUE)`请再次设置、运行有问题的行，并且输出消息应该告诉您哪个命名空间名称被决定不支持 data.table。

截至本次编辑时，data.table 的白名单（v1.9.3）上的包是：

```
> data.table:::cedta.override
[1] "gWidgetsWWW" "statET"      "FastRWeb"    "slidify"     "rmarkdown" 
```

它们往往是将用户代码作为输入并在自己的环境中运行的包。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-28T21:25:49.667

这似乎是一个环境问题。这可能是 和 之间的`data.table`问题`gWidgetsWWW`。在`knitr`' 方面，至少有一个解决方案，即指定环境为`knitr`全局环境，例如

```
knit2html("test_report.Rmd", envir = globalenv()) 
```

**编辑：**

为了说明这个问题与 无关`knitr`，试试这个：

```
library(gWidgetsWWW)

w<-gwindow("Test Window")
g<-ggroup(horizontal=F,cont=w)
b<-gbutton("Report Button",cont=g,handler=function(h,...){
  library(data.table)
  df<-data.frame(State=rownames(USArrests),USArrests)
  print(data.table(df)[,State:=tolower(State)])
})

visible(w)<-TRUE 
```

将其另存为`test_gui.R`, 和

```
library(gWidgetsWWW)
localServerOpen('test_gui.R') 
```

单击按钮，您还将看到错误。

# javascript - jQuery：在 for 循环中单击函数绑定并修复闭包

> ID：13106024
> 
> 赞同：2
> 
> 时间：2012-10-28T02:57:34.077
> 
> 标签：javascript, jquery, arrays, object, closures

我被困在这里，任何提示都会很好。
我有一个 Objects objects[] 数组和一个 divnames[] 数组。我的对象具有 play() 和 stop() 之类的功能。对象及其功能在多种情况下进行了测试，它们正在工作。现在我正在尝试遍历 divnames[] 并将相应对象 [] 的操作分配给 mouseover、mouseout 和 click。
有一个关闭问题，我用我在 StackOverflow 上的另一个线程中找到的解决方案解决了这个问题。这样可行。但是剩下的问题是鼠标悬停等动作没有分配给稍后加载的div。他们正在处理从一开始就在页面上的对象。
这是我所拥有的：

```
$(function(){
    for (var i=0, len=divnames.length; i<len; i++) {
        if(divnames[i]){
            (function( ) { // anonymous function to fix closures
                var index = i; // also needed to fix closures
                $('#'+divnames[index]).on("click", function() {
                    objects[index].play();
                    loadContent(divnames[index]+".php");
                });
            })( ); // direct function execution to fix closures
        }
    }
}); 
```

如上所述，闭包问题由两个注释行修复，离开它们只会应用 for 循环的最后一次执行。就像现在一样，这行得通。
但不起作用的是，点击功能也应该应用于与选择器匹配的 div，但尚未加载。
但是，如果具有相同功能的代码没有在没有闭包修复的情况下在 for 循环中迭代，那确实有效，因为如果我理解正确，那是预期的 .on() 行为。

那么我如何让两个所需的功能都起作用呢？

提前感谢您的时间。

- - 编辑 - -

按要求提供的附加信息：

```
var divnames = [];
divnames[0] = "home";
divnames[1] = "about";
divnames[2] = "projects";

function SpriteAnim (options) {
var timerId = 0; 
    var i = 0;
    this.status = 0;
this.init = function () {
    var element = document.getElementById(options.elementId);
    element.style.width = options.width + "px";
    element.style.height = options.height + "px";
    element.style.backgroundRepeat = "no-repeat";
    element.style.backgroundImage = "url(" + options.sprite + ")";
};
this.showFrame = function (which) {
    if (which < options.frames) {
                    i = which;
        element = document.getElementById(options.elementId);
        element.style.backgroundPosition = "0px -" + which * options.height + "px";
    }
};
this.play = function () {
            this.status = 2;
    timerId = setInterval(function () {
        if (i < (options.frames - 1)) {
                            i++;
            element = document.getElementById(options.elementId);
            element.style.backgroundPosition = "0px -" + i * options.height + "px";
                    } else {
                        clearInterval(timerId);
                        this.status = 1;
                    }
    }, 100);
};
} 
```

您可能已经猜到了，objects[] 数组在 objects[0]、objects[1]、objects[2] 中包含 3 个 SpriteAnim 对象。

```
objects[0] = new SpriteAnim({
    width: 7,
    height: 7,
    frames: 8,
    sprite: "myanim1.png",
    elementId: "anim0"
});
objects[1] = new SpriteAnim({
    width: 7,
    height: 7,
    frames: 8,
    sprite: "myanim1.png",
    elementId: "anim1"
});
objects[2] = new SpriteAnim({
    width: 7,
    height: 7,
    frames: 8,
    sprite: "myanim2.png",
    elementId: "anim2"
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T03:01:01.220

您需要使用事件委托，并在父元素而不是元素本身上侦听这些事件。这样，如果您稍后添加新元素，则无需重新绑定到它们。

```
$("#buttons").on("click", ".button", function(){
    console.log("You clicked on a .button element.");
}); 
```

在这种情况下，我们绑定到 on 上的 click 事件`#buttons`，但仅当调用元素与选择器匹配时`.button`。您的标记将类似于以下内容：

```
<div id="buttons">
    <a class="button">Foo</a>
    <a class="button">Bar</a>
</div> 
```

当任何元素上发生单击`.button`并冒泡到`#buttons`父元素时，它将被拦截并触发处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T04:26:55.200

这是因为 index 在您的绑定语句之外声明。当点击进入该调用时，它不知道 objects[index] 是什么。

如果要保持相同的结构，请像这样重新编写函数：

```
$(function(){
    for (var i=0, len=divnames.length; i<len; i++) {
        if(divnames[i]){
            (function( ) { // anonymous function to fix closures
                var index = i; // also needed to fix closures
                $('#'+divnames[index]).on("click", function(e) {
                    switch ($(e.id).attr('name')){
                        case 'home':
                            objects[0].play();
                            loadContent('home.php');
                            break;
                        case 'about':
                        // do same
                        case 'projects':
                        // do same
                        default:
                            break;
                    }
                });
            })( ); // direct function execution to fix closures
        }
    }
}); 
```

实际上，您应该这样做：

```
$(document).on('click','div[name=home],div[name=projects],div[name=about]', function(){
    var name = $(this).attr('name');
    switch (name){
        case 'home':
            objects[0].play();
            break;
            // and so on
    }
    loadContent(name + '.php');
}); 
```

## 编辑：

当你点击你的 div 时，这就是它所知道的全部内容：

```
objects[index].play();
loadContent(divnames[index]+".php"); 
```

# android - 如何在操作栏中添加更多项目（greendroid）

> ID：13106029
> 
> 赞同：0
> 
> 时间：2012-10-28T02:58:59.280
> 
> 标签：android, greendroid

如何在操作栏（greendroid）中添加“更多”项目？如何在操作栏中添加三个操作菜单项。任何人都知道如何添加更多和自定义它。

![在此处输入图像描述](../Images/7f188f28421e74ace41eda743541655d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:10:36.103

你必须修改你的 style.xml

```
<style name="CusttomTheme.ActionBar" parent="Theme.GreenDroid.NoTitleBar">
.......
<item name="gdActionBarMaxItems">5</item>
.......
</style> 
```

在这种情况下，您在 actionBar 中插入 5 个项目

# haskell - 链接到 Yesod 中没有 Haskell 标识符的静态文件

> ID：13106036
> 
> 赞同：7
> 
> 时间：2012-10-28T03:00:18.750
> 
> 标签：haskell, yesod

给定一个默认的 Yesod 脚手架，通过将上传的文件移动到`static`目录中来实现文件上传，我如何链接到静态目录中的文件？对于普通的静态文件，`staticFiles`拼接会生成一个我可以引用的标识符，但对于用户上传的文件，显然我不能对这些标识符进行硬编码。我可以通过手动使用`#{}`拼接来做到这一点，但我希望可能会有一些更安全的东西，即使唯一可检查的组件是我`static/`正确使用了前缀。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-28T04:41:42.030

`staticFiles`生成一堆类型为`Route Static`. 不幸的是，Haddock 不显示相关类型族的信息，因此您在文档中看不到构造函数，但唯一可用的构造函数是`StaticRoute`：

```
https://github.com/yesodweb/yesod/blob/master/yesod-static/Yesod/Static.hs#L142 
```

这两个字段是路径信息和查询字符串参数。因此，要创建指向 的链接`/static/foo/bar?baz=bin`，您可以使用：

```
StaticRoute ["foo", "bar"] [("baz", "bin")] 
```

通常不需要创建查询字符串参数，但`staticFiles`会使用它来插入哈希值以实现缓存清除目的。

# asp.net - 直接使用 HttpContext 是一件坏事吗？

> ID：13106037
> 
> 赞同：3
> 
> 时间：2012-10-28T03:00:25.403
> 
> 标签：asp.net, .net, unit-testing, mocking, httpcontext

我在 ASP.Net 上构建了一个小的替代 MVC 框架（尽管没有严格绑定到它）。我经常搞砸的事情之一是`HttpContext`实例和`HttpContext.Current`. 最近，我尝试为我的框架进行一些单元测试，发现 HttpContext 是出了名的难以测试。因为我的应用程序不一定与 ASP.Net 相关联，所以我尝试重新实现 HttpContext、HttpRequest 和朋友的更基本版本，但对于必须包含在这些类中的大量信息而言，这是一项艰巨的任务。

我究竟应该怎么做？寻找一种解决方法来测试 HttpContext 或重组我的代码以不显式依赖它？或者，还有更好的方法？直接使用 HttpContext 是不是很多坏事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T03:26:14.550

我完全理解你的痛苦。我在这个 ASP MVC 2 上花了很多时间。

在我自己的挣扎中，我发现了关于单元测试与集成测试的各种讨论。我可以理解其中的区别，但我会尽可能在尽可能接近生产的环境中进行集成测试。我很有可能会因为这样说而被钉在墙上；我不害怕。

我尝试了几种不同的方法来模拟单元测试时所需的各种类，包括开源以及 TypeMock 和 Isolator 的试用。最后我找到了一篇专门关于集成测试的文章，它解决了我试图克服的大部分问题。看这里：

[http://blog.stevensanderson.com/2009/06/11/integration-testing-your-aspnet-mvc-application/](http://blog.stevensanderson.com/2009/06/11/integration-testing-your-aspnet-mvc-application/)

我真的不能说你应该如何构建你的代码。从我在 ASP MVC 源代码中看到的内容来看，我不明白为什么不应该使用 HttpContext，即使测试起来确实很痛苦。

这有帮助吗？如果您有兴趣，我很乐意分享我尝试过的各种解决方案的一些示例。

# html - 完成后如何保持CSS3动画静止，然后在鼠标消失后恢复

> ID：13106038
> 
> 赞同：2
> 
> 时间：2012-10-28T03:00:33.967
> 
> 标签：html, google-chrome, css, animation, keyframe

我有一个关于 CSS3 动画/变换的问题。通常，我总能找到解决 CSS3 的方法——因为它非常简单，但这一直给我带来麻烦。

我所拥有的是一张加号的图片。当用户将鼠标悬停在加号上时，它会旋转 360 度，图片变为减号。一切都运行良好，除了动画结束时它会迅速恢复为加号；我希望它保持在减号上，直到鼠标悬停，然后它可以回到加号。

这是我的代码：

```
#lock-screen #time-section .unlock {
    cursor: pointer;
    display: block;
    height: 22px;
    width: 23px;
    background-image: url('../images/metro_icon_pack/plus.png');
    background-repeat: no-repeat;
    margin-left: -15px;
    margin-top: 5px;
}

#lock-screen #time-section .unlock:hover {
    animation: rotate 1s;
    -o-animation: rotate 1s;
    -ms-animation: rotate 1s;
    -moz-animation: rotate 1s;
    -webkit-animation: rotate 1s;
}

@-webkit-keyframes rotate {
    0% {
        -webkit-transform: rotate(0deg);
    }

    100% {
        -webkit-transform: rotate(360deg);
        background-image: url('../images/metro_icon_pack/minus.png');
    }
} 
```

现在，我意识到我只是为基于 WebKit 的浏览器（Chrome 和 Safari）提供代码。那是因为我正在 Chrome 中对其进行测试，稍后我会在获得它后添加对其他浏览器的进一步支持。

感谢您的帮助，伙计们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T03:16:43.517

我会将*减号*背景图像放在下面`#lock-screen #time-section .unlock:hover`，然后添加一秒钟的背景图像过渡。

此外，除了使用 0%、100% 之外，您还可以使用 from、to...

像：

```
#lock-screen #time-section .unlock:hover {
background-image: url('../images/metro_icon_pack/minus.png');
-webkit-transition: background-image 1s;
/* Other -vendor-transitions go here */
} 
```

[演示](http://jsfiddle.net/Cxrjx/)。

我也会使用变换方法而不是动画，只使用过渡（您还可以将元素旋转回加号）...
[Demo](http://jsfiddle.net/kJR5p/)。

如果您不想将元​​素旋转回加号，只需将 添加`-webkit-transition`到悬停状态即可。

[演示](http://jsfiddle.net/kJR5p/1/)。

# javascript - node-soap 中的数组

> ID：13106039
> 
> 赞同：0
> 
> 时间：2012-10-28T03:00:50.090
> 
> 标签：javascript, node.js, soap

我正在尝试利用[node-soap](https://github.com/milewise/node-soap)来发出包含数组的 SOAP 请求。没有数组的请求似乎工作正常，但是在尝试传递数组时，我从服务器收到错误“不是数组引用”。

任何想法？我的脚本如下：

```
var soap = require('soap');

var url = 'http://example.com/example.wsdl';

var args = {
    email: 'example',
    password: 'xxxxx',
    series: {
        element: ['a', 'b', 'c', 'd']
    }
};

soap.createClient(url, function(err, client) {
    if(err) throw err;

    client.ExampleMethod(args, function(err, result) {
        if(err) throw err;
        console.log(result);
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T03:10:00.930

不知道你调用的代码应该做什么，但只是从名称“系列”猜测，你确定一个名为“系列”的东西应该包含一个名为“元素”的数组，而不是数组?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-21T14:29:22.867

尝试这个：

```
series: {
    element: ['a', 'b', 'c', 'd']
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-30T15:40:43.350

目前正在[GitHub 存储库 (issue #143) 讨论这个问题](https://github.com/vpulim/node-soap/issues/143)。

tldr; 合作者正在尝试确定他们应该如何将 JSON 转换为 XML。这与[问题 #368](https://github.com/vpulim/node-soap/issues/368)有关。

# android - EditText，将字符串保存为双重Android编程？

> ID：13106040
> 
> 赞同：1
> 
> 时间：2012-10-28T03:00:54.107
> 
> 标签：android, double

我最近学会了将用户输入的信息保存为整数，并想知道如何将其保存为 double ，以防基本方程的答案有小数。这是相关代码

```
 String data = feet.getText().toString();
 final int dataint = Integer.parseInt(data);

 displayText.setText((dataint / formula) + " Yards"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T03:05:54.427

```
final double datadouble = Double.valueOf(data); 
```

这是一个基本的 Java 问题。请在发布问题之前尝试[Google和/或研究。](http://www.google.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T03:09:56.940

`Integer.parseInt`对于 int 和[`Double.parseDouble`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Double.html#parseDouble%28java.lang.String%29)对于 double

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T03:05:57.547

试试这个，它可以帮助你

```
 double dataDouble = Double.valueOf(dataint); 
```

它将“dataint”整数值转换为双精度类型。

# z3 - 在 unix 上构建 z3 时出错：找不到 -lrt

> ID：13106042
> 
> 赞同：0
> 
> 时间：2012-10-28T03:01:20.640
> 
> 标签：z3

在制作期间，我收到一个错误：

> g++ -o bin/external/z3 obj/external/act_cache.o :: obj/external/smtlib_frontend.o obj/external/z3_log_frontend.o -lrt -lpthread -fopenmp -static

消息是`/usr/lib/ ..... /i586-suse-linux/bin/ld: cannot find -lrt`

随后是关于 . 的类似消息`-lpthread -lm -lc`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T03:17:54.850

问题可能是`-static`选项。请参阅以下线程： [http ://www.linuxforums.org/forum/programming-scripting/35135-cant-find-some-libraries.html](http://www.linuxforums.org/forum/programming-scripting/35135-cant-find-some-libraries.html)

Z3 的新构建系统不使用静态库。如果您喜欢冒险，可以尝试使用新构建系统的“不稳定”分支。以下是使用它构建 Z3 的说明：

```
git clone https://git01.codeplex.com/z3
cd z3
git checkout -b unstable
git pull origin unstable
autoconf
./configure
python scripts/mk_make.py
cd build
make

The git related commands can be replace with the .zip file downloaded from:
http://z3.codeplex.com/SourceControl/changeset/view/946a06cddbe4 
```

# php - 如何在 ORM Kohana 上计算一列加一

> ID：13106045
> 
> 赞同：0
> 
> 时间：2012-10-28T03:02:19.783
> 
> 标签：php, kohana

我对 Kohana 和 ORM 有一些问题。

我想更新一个

```
column = column + 1 
```

那它！就如此容易。

我尝试了很多方法并且总是重复计数，例如：

```
initial column value = 0
column = column + 1
result = 3 (how is this possible???) 
```

这些是方法，没有任何工作......

这是很多尝试，但没有任何效果:(

```
public function update_views()
{
    $this->set('column', DB::expr('column + 1'))->save();
}
public function update_views()
{
    $this->set('column', $this->column + 1)->update();
}

public function update_views()
{
    DB::update('table')->set(array('column' => DB::expr('column + 1')))->where('id', '=', $this->id)->execute(); // this was my last hope and nothing.... 
} 
```

这三个工作完美，没有错误，没有任何东西......就在我检查数据库上的表格时不是我想要的......有什么建议吗？请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:34:55.467

我认为这可能是因为您试图在之后调用更新而不是保存。我不确定为什么这会导致它实际上没有更新，但下面的代码应该可以工作。

```
public function update_views()
{
    $this->column = $this->column + 1;
    $this->save();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T19:54:21.047

DB::update('tablname')->set(array('column_name' => DB::expr('column_name + 1'))->where('id', '=', 'primary_key')->execute();

worked for me.

# c++ - GCC 4.8 中 C++11 线程局部变量的性能损失是什么？

> ID：13106049
> 
> 赞同：71
> 
> 时间：2012-10-28T03:03:35.927
> 
> 标签：c++, linux, multithreading, gcc, c++11

来自[GCC 4.8 草案变更日志](http://gcc.gnu.org/gcc-4.8/changes.html#cxx)：

> G++ 现在实现了[C++11](http://gcc.gnu.org/gcc-4.8/cxx0x_status.html) `thread_local`关键字；这与 GNU`__thread`关键字的不同之处主要在于它允许动态初始化和销毁​​语义。不幸的是，这种支持需要对非函数局部 `thread_local`变量的引用进行运行时惩罚，即使它们不需要动态初始化，所以用户可能希望继续使用`__thread`具有静态初始化语义的 TLS 变量。

这种运行时惩罚的性质和来源究竟是什么？

显然，为了支持非函数局部`thread_local`变量，在进入每个线程主线程之前需要一个线程初始化阶段（就像全局变量有一个静态初始化阶段一样），但它们是否指的是一些运行时损失?

粗略的说gcc新实现thread_local的架构是怎样的？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-10-29T14:44:03.083

（免责声明：我对 GCC 的内部了解不多，所以这也是一个有根据的猜测。）

`thread_local`在提交[462819c](http://gcc.gnu.org/git/?p=gcc.git;a=commit;h=462819c8e20aab1124e95392974dd55cd70350f3)中添加了动态初始化。变化之一是：

> `* semantics.c (finish_id_expression): Replace use of thread_local`
> `variable with a call to its wrapper.`

所以运行时的惩罚是，`thread_local`变量的每个引用都将成为一个函数调用。让我们用一个简单的测试用例来检查：

```
// 3.cpp
extern thread_local int tls;    
int main() {
    tls += 37;   // line 6
    tls &= 11;   // line 7
    tls ^= 3;    // line 8
    return 0;
}

// 4.cpp

thread_local int tls = 42; 
```

编译后*，我们看到引用的*每次*使用都`tls`变成了对 的函数调用`_ZTW3tls`，它懒惰地初始化变量一次：

```
00000000004005b0 <main>:
main():
  4005b0:   55                          push   rbp
  4005b1:   48 89 e5                    mov    rbp,rsp
  4005b4:   e8 26 00 00 00              call   4005df <_ZTW3tls>    // line 6
  4005b9:   8b 10                       mov    edx,DWORD PTR [rax]
  4005bb:   83 c2 25                    add    edx,0x25
  4005be:   89 10                       mov    DWORD PTR [rax],edx
  4005c0:   e8 1a 00 00 00              call   4005df <_ZTW3tls>    // line 7
  4005c5:   8b 10                       mov    edx,DWORD PTR [rax]
  4005c7:   83 e2 0b                    and    edx,0xb
  4005ca:   89 10                       mov    DWORD PTR [rax],edx
  4005cc:   e8 0e 00 00 00              call   4005df <_ZTW3tls>    // line 8
  4005d1:   8b 10                       mov    edx,DWORD PTR [rax]
  4005d3:   83 f2 03                    xor    edx,0x3
  4005d6:   89 10                       mov    DWORD PTR [rax],edx
  4005d8:   b8 00 00 00 00              mov    eax,0x0              // line 9
  4005dd:   5d                          pop    rbp
  4005de:   c3                          ret

00000000004005df <_ZTW3tls>:
_ZTW3tls():
  4005df:   55                          push   rbp
  4005e0:   48 89 e5                    mov    rbp,rsp
  4005e3:   b8 00 00 00 00              mov    eax,0x0
  4005e8:   48 85 c0                    test   rax,rax
  4005eb:   74 05                       je     4005f2 <_ZTW3tls+0x13>
  4005ed:   e8 0e fa bf ff              call   0 <tls> // initialize the TLS
  4005f2:   64 48 8b 14 25 00 00 00 00  mov    rdx,QWORD PTR fs:0x0
  4005fb:   48 c7 c0 fc ff ff ff        mov    rax,0xfffffffffffffffc
  400602:   48 01 d0                    add    rax,rdx
  400605:   5d                          pop    rbp
  400606:   c3                          ret 
```

将它与`__thread`没有这个额外包装器的版本进行比较：

```
00000000004005b0 <main>:
main():
  4005b0:   55                          push   rbp
  4005b1:   48 89 e5                    mov    rbp,rsp
  4005b4:   48 c7 c0 fc ff ff ff        mov    rax,0xfffffffffffffffc // line 6
  4005bb:   64 8b 00                    mov    eax,DWORD PTR fs:[rax]
  4005be:   8d 50 25                    lea    edx,[rax+0x25]
  4005c1:   48 c7 c0 fc ff ff ff        mov    rax,0xfffffffffffffffc
  4005c8:   64 89 10                    mov    DWORD PTR fs:[rax],edx
  4005cb:   48 c7 c0 fc ff ff ff        mov    rax,0xfffffffffffffffc // line 7
  4005d2:   64 8b 00                    mov    eax,DWORD PTR fs:[rax]
  4005d5:   89 c2                       mov    edx,eax
  4005d7:   83 e2 0b                    and    edx,0xb
  4005da:   48 c7 c0 fc ff ff ff        mov    rax,0xfffffffffffffffc
  4005e1:   64 89 10                    mov    DWORD PTR fs:[rax],edx
  4005e4:   48 c7 c0 fc ff ff ff        mov    rax,0xfffffffffffffffc // line 8
  4005eb:   64 8b 00                    mov    eax,DWORD PTR fs:[rax]
  4005ee:   89 c2                       mov    edx,eax
  4005f0:   83 f2 03                    xor    edx,0x3
  4005f3:   48 c7 c0 fc ff ff ff        mov    rax,0xfffffffffffffffc
  4005fa:   64 89 10                    mov    DWORD PTR fs:[rax],edx
  4005fd:   b8 00 00 00 00              mov    eax,0x0                // line 9
  400602:   5d                          pop    rbp
  400603:   c3                          ret 
```

`thread_local`尽管在每个用例中都不需要这个包装器。这可以从[`decl2.c`](http://gcc.gnu.org/git/?p=gcc.git;a=blobdiff;f=gcc/cp/decl2.c;h=688a72332cec582910e9f76708f63afd92b2b4db;hp=f7db1d81b5d905b1fd256a434407a87c0db8a8a6;hb=462819c8e20aab1124e95392974dd55cd70350f3;hpb=db019d30742cffe8f8d86560ea33e61b35269321). 包装器仅在以下情况下生成：

*   它*不是*函数局部的，并且，

    1.  它是`extern`（上面显示的示例），或
    2.  该类型有一个重要的析构函数（变量不允许使用`__thread`），或者
    3.  类型变量由非常量表达式初始化（​​也不允许用于`__thread`变量）。

在所有其他用例中，它的行为与`__thread`. 这意味着，除非您有一些变量，否则您可以在不损失任何性能的情况下`extern __thread`替换所有变量。`__thread``thread_local`

* * *

*：我使用 -O0 编译，因为内联会使函数边界不那么明显。即使我们打开 -O3 ，这些初始化检查仍然存在。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-11-16T15:14:33.207

C++11 thread_local 与 __thread 说明符具有相同的运行时效果（`__thread`不是 C 标准`thread_local`的一部分；是 C++ 标准的一部分）

这取决于声明 TLS 变量（用`__thread`说明符声明）的位置。

*   如果在可执行文件中声明了 TLS 变量，则访问速度很快
*   如果在共享库代码中声明了 TLS 变量（使用`-fPIC`编译器选项编译）并且`-ftls-model=initial-exec`指定了编译器选项，则访问速度很快；但是存在以下限制：无法通过 dlopen/dlsym（动态加载）加载共享库，使用该库的唯一方法是在编译期间与其链接（链接器选项`-l<libraryname>`）
*   如果在共享库（`-fPIC`编译器选项集）中声明 TLS 变量，则访问速度非常慢，因为假定了一般动态 TLS 模型 - 这里每次访问 TLS 变量都会导致调用`_tls_get_addr()`；这是默认情况，因为您不受使用共享库的方式限制。

来源：Ulrich Drepper 的线程本地存储的 ELF 处理 [https://www.akkadia.org/drepper/tls.pdf](https://www.akkadia.org/drepper/tls.pdf) 此文本还列出了为支持的目标平台生成的代码。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-16T14:43:51.133

如果变量是在当前 TU 中定义的，则内联器将处理开销。我希望这对于 thread_local 的大多数用途都是正确的。

对于外部变量，如果程序员可以确定在非定义TU中没有使用该变量需要触发动态初始化（要么是因为变量是静态初始化的，要么是在定义TU中使用该变量之前会执行）在另一个 TU 中的任何用途），他们可以使用 -fno-extern-tls-init 选项避免这种开销。

# c++ - 如何在长变量中保留小时、分钟、秒？

> ID：13106050
> 
> 赞同：0
> 
> 时间：2012-10-28T03:04:17.350
> 
> 标签：c++, time

我无法清楚地描述我的问题，如果我的问题的标题看起来很奇怪，请原谅。

我正在做一个时间课。

我正在使用这些变量：私有的，带有 _ticks ：

```
 // 1 _ticks = 1/100 of a second
  // 0 _ticks = 00:00:00.00 i.e. 12:00am
  // a time is stored as a number of ticks since midnight
  // for example 1234567 ticks would be 3:25:45.67am
  long _ticks;

  // the following static fields might come in handy
  // 8,643,999 _ticks = 23:59:59.99 i.e. 11:59:59.99pm
  static const long _lastTickOfTheDay = 8639999;
  // 4,320,000 _ticks = 12:00:00.00 i.e 12pm i.e. noon
  static const long _noon = 4320000;
  // _ticks per second;
  static const long _ticksPerSecond  = 100;
  // _ticks per minute;
  static const long _ticksPerMinute = 6000;
  // _ticks per hour;
  static const long _ticksPerHour = 360000;
  // _ticks per day
  static const long _ticksPerDay = 8640000; 
```

考虑到这一点，我正在制作用小时、分钟、秒和毫秒来设置时间的函数。使用所有这些变量设置时间非常简单：

```
void MyTime::SetTime(int newHrs, int newMins, int newSecs, int newMilisecs)
{
    this->_ticks = (newHrs * _ticksPerHour) + (newMins * _ticksPerMinute) 
            + (newSecs * _ticksPerSecond) + (newMilisecs);
} 
```

接下来，我需要将时间设置为小时、分钟、秒，同时保持毫秒。如何做到这一点的数学让我难以捉摸，这已经是我所能做到的了。如您所见，不多：

```
// Hours, Minutes, Seconds
void MyTime::SetTime(int newHours, int newMinutes, int newSeconds)
{
    // Take the ticks apart and put them back together
    int oldTime = _ticks;
    int newTime = (newHours * _ticksPerHour) + (newMinutes * _ticksPerMinute) 
            + (newSeconds * _ticksPerSecond);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T03:28:27.867

可能值得编写方法来提取每个部分：

```
int MyTime::hours() {
  return _ticks / _ticksPerHour;
}
int MyTime::minutes() {
  return (_ticks % _ticksPerHour) / _ticksPerMinute;
}
int MyTime::seconds() {
  return (_ticks % _ticksPerMinute) / _ticksPerSecond;
}
int MyTime::millis() {
  return _ticks % _ticksPerSecond;
} 
```

这些使用整数算术，其中`/`和`%`分别给出商和余数。

要对其中一个执行隔离更新，您可以计算相对于当前值的差异，然后将其添加进去。例如：

```
void MyTime::setMinutes(int newMinutes) {
  _ticks += (newMinutes - minutes())*_ticksPerMinute;
} 
```

类似的代码适用于其他部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T03:08:44.827

如果您的测量单位是 1/100 秒，那么只需存储并恢复`n % 100`，即小数秒部分。

（如果您实际上存储的是毫秒，那么它`n % 1000`当然是 。）

# c# - LINQ：通过多个属性将对象列表分组到列表列表中的更好方法？

> ID：13106052
> 
> 赞同：2
> 
> 时间：2012-10-28T03:04:30.263
> 
> 标签：c#, linq, list

我有一个这样的对象列表：

```
var cmps = new List<Campaign>()
{
    new Campaign(){ PersonId = 1, Id = 1, Name = "Name"},
    new Campaign(){ PersonId = 2, Id = 1, Name = "Name"},
    new Campaign(){ PersonId = 3, Id = 1, Name = "Name1"},                
    new Campaign(){ PersonId = 4, Id = 2, Name = "Name1"},                
    new Campaign(){ PersonId = 5, Id = 2, Name = "Name1"},
    new Campaign(){ PersonId = 6, Id = 3, Name = "Name"},
}; 
```

我想通过多个属性将它们分组到列表列表中，在本示例中为`Id`和`Name`。

这会将原始列表拆分为以下列表（其中数字表示`PersonId`）：

{[1, 2], [3], [4, 5], [6]}

我通过编写以下代码解决了这个问题：

```
List<List<Campaign>> groups = cmps.GroupBy(c => new { c.Id, c.Name })
                                  .Select(c => c.Key)
                                  .ToList()
                                  .Select(v => cmps.Where(c => c.Id == v.Id && c.Name == v.Name).ToList())
                                  .ToList(); 
```

这个解决方案似乎工作正常，但出于好奇，有没有更好/更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-28T03:07:37.303

做就是了：

```
List<List<Campaign>> groups = cmps.GroupBy(c => new { c.Id, c.Name })
    .Select(group => group.ToList())
    .ToList(); 
```

IEnumerable 上的 GroupBy 返回`IEnumerable<IGrouping<TKey, T>>`。`IGrouping<TKey, T>`implements `IEnumerable<T>`，因此您可以直接将组用作序列。

# eclipse - 忽略eclipse中的目录

> ID：13106054
> 
> 赞同：0
> 
> 时间：2012-10-28T03:05:10.000
> 
> 标签：eclipse

如何阻止 Eclipse 编译和检测目录中一堆 .java 文件中的错误？我正在为一个类编写一个类型检查器，这些文件是测试用例，我不希望它们被编译或错误显示在问题选项卡中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T03:22:09.597

Eclipse 只编译源文件夹中的那些类。右键单击包含这些文件的文件夹，然后单击`Build Path -> Exclude`以将该文件夹排除在源文件夹之外，编译器将忽略这些文件。

# verilog - Verilog如何快速制作多条线？

> ID：13106072
> 
> 赞同：0
> 
> 时间：2012-10-28T03:10:12.757
> 
> 标签：verilog

我正在尝试非常快速地制作总共 24 根电线，但我不断收到错误消息：

错误 (10170)：在 your_ALU_mux.v(81) 的文本“=”附近出现 Verilog HDL 语法错误；期待“。”，或标识符

这是我的代码：

```
module your_ALU_mux(your_out, operandA, operandB, opcode, switches, address);
input [7:0] operandA, operandB, address;
input [3:0] opcode, switches;
output [7:0] your_out;

wire [0:7] Bnot, newb, newa;
wire Cin, Cout;

    not
       (Bnot[0], operandB[0]),
       (Bnot[1], operandB[1]),
       (Bnot[2], operandB[2]),
       (Bnot[3], operandB[3]),
       (Bnot[4], operandB[4]),
       (Bnot[5], operandB[5]),
       (Bnot[6], operandB[6]),
       (Bnot[7], operandB[7]);

// Getting A' and B'
    if (address == 16'h00 || address == 16'h01)
    // Add A + B
    if (address == 16'h00)

        // newa = A
        newa[0] = operandA[0];
        newa[1] = operandA[1];
        newa[2] = operandA[2];
        newa[3] = operandA[3];
        newa[4] = operandA[4];
        newa[5] = operandA[5];
        newa[6] = operandA[6];
        newa[7] = operandA[7];

        // newb = B'
        newb[0] = Bnot[0];
        newb[1] = Bnot[1];
        newb[2] = Bnot[2];
        newb[3] = Bnot[3];
        newb[4] = Bnot[4];
        newb[5] = Bnot[5];
        newb[6] = Bnot[6];
        newb[7] = Bnot[7];

        // Carry in = 1
        Cin = 1;

        // A-B
    else if (address == 16'h01)
        // newb = B
        newb[0] = operandB[0];
        newb[1] = operandB[1];
        newb[2] = operandB[2];
        newb[3] = operandB[3];
        newb[4] = operandB[4];
        newb[5] = operandB[5];
        newb[6] = operandB[6];
        newb[7] = operandB[7];

        // newa = A
        newa[0] = operandA[0];
        newa[1] = operandA[1];
        newa[2] = operandA[2];
        newa[3] = operandA[3];
        newa[4] = operandA[4];
        newa[5] = operandA[5];
        newa[6] = operandA[6];
        newa[7] = operandA[7];

        // Carry in = 0
        Cin = 0;

end
        RippleCarryAdd A+B(.S0(your_out[0]), .S1(your_out[1],.S2(your_out[2],.S3(your_out[3],.S4(your_out[4],.S5(your_out[5]
                                    S6.(your_out[6]), S7.(your_out[7],
                                    .Cout(Cout),.Cin(Cin),
                                    .A0(newa[0]),.A1(newa[1]),.A2(newa[2]),.A3(newa[3]),.A4(newa[4]),.A5(newa[5]),
                                    .A6(newa[6]),.A7(newa[7]),
                                    .B0(newb[0]),.B1(newb[1]),.B2(newb[2]),.B3(newb[3]),.B4(newb[4]),
                                    .B5(newb[5]),.B6(newb[6]),.B7(newb[7]));

endmodule 
```

我也出错说：

错误 (10170)：在 your_ALU_mux.v(66) 文本“if”附近出现 Verilog HDL 语法错误；期待“结束模块”

它让我想到了我的第一个 if 语句。

这是创建电线并使用它们的错误方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T08:31:52.760

为了使您的代码更紧凑，您知道：

```
always @* begin 
  newa[0] = operandA[0];
  newa[1] = operandA[1];
  newa[2] = operandA[2];
  newa[3] = operandA[3];
  newa[4] = operandA[4];
  newa[5] = operandA[5];
  newa[6] = operandA[6];
  newa[7] = operandA[7];
end 
```

是相同的：

```
reg newa[7:0]
always @* begin
  newa[7:0] = operandA[7:0];
end 
```

作为电线：

```
wire newa[7:0]
assign newa[7:0] = operandA[7:0]; 
```

`[7:0]`如果使用全宽，则位选择是可选的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T04:57:29.190

*   `if`语句需要在`always`块内，它们不能只是模块的一部分
*   在编写多行 if 案例时，您需要将语句包装在`begin`and语句中（认为它们与其他编程语言`end`类似）`{``}`
*   您似乎在 RippleCarryAdd 之前有一个`end`没有 a 的随机语句`begin`

# visual-studio-2010 - Visual Studio 2010 添加项目引用然后编译器说找不到命名空间

> ID：13106073
> 
> 赞同：0
> 
> 时间：2012-10-28T03:10:20.590
> 
> 标签：visual-studio-2010, c#-4.0, namespaces

我已经将两个 c# 类库项目添加到 Windows 应用程序项目中，它们按预期出现，我可以编写一些引用命名空间的代码，这些命名空间都在类的顶部声明（使用）以及智能感知和语法突出显示工作正如预期的那样，但是一旦我构建代码，它就会告诉我找不到命名空间并询问我是否缺少参考......语法突出显示也消失了。如果我删除引用并再次添加它们，突出显示会回来，直到我再次构建它，然后循环就会重复。任何线索将不胜感激。

我已经尝试清理整个解决方案并重新启动 VS。

根据评论/答案：

我在类项目中引用了 System.Web，目标为“.Net Framework 4”，Win Forms 应用程序设置为“.Net Framework 4 Client Profile”，不允许我添加 System.Web，更改它只是“.Net Framework 4”解决了这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T03:17:31.030

检查两个项目目标框架，是否相同。

问题可能是您将较高的 Target Framework 项目引用到较低的 Target Framework 项目中。

就像如果您有一个带有 Target Framework 的项目，`.Net Framework 4`并且您将其引用到带有 `.Net Framework 4 Client Profile`or 的项目中`.Net Framework 3.5`，您将遇到问题。

# multithreading - 为什么线程如此昂贵，事件驱动的非阻塞 IO 在基准测试中更好

> ID：13106075
> 
> 赞同：8
> 
> 时间：2012-10-28T03:10:48.997
> 
> 标签：multithreading, event-driven, event-driven-design

我最近开始学习 node.js，这是一个基于 V8 的 JavaScript 库，以其非阻塞 IO 和令人难以置信的速度而闻名。

据我了解，节点不会等待 IO 响应，而是运行一个事件循环（类似于游戏循环），不断检查未完成的操作并在 IO 响应后立即继续/完成它们。节点性能与 Apache HTTPD 相比，节点速度明显更快，同时使用更少的内存。

现在，如果您阅读有关 Apache 的信息，您会了解到它每个用户使用 1 个线程，这可能会显着减慢它的速度，这就是我的问题出现的地方：

如果将线程与节点在其事件循环中内部执行的操作进行比较，您会开始看到相似之处：两者都是等待资源响应的未完成进程的抽象，都检查操作是否定期进行，然后不占用CPU 一段时间（至少我认为一个好的阻塞 API 在重新检查之前会休眠几毫秒）。

现在，使线程变得如此糟糕的显着关键差异在哪里？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-28T03:44:19.840

这里的区别是上下文切换。操作系统交换线程需要：

*   保存指令指针（由 CPU 完成）
*   保存 CPU 寄存器（如果线程进行了阻塞调用，则可能不需要，但如果它被抢占，则需要）
*   交换调用堆栈。即使堆栈驻留在相同的虚拟内存空间中，这也*至少*是一次写入和一些读取，甚至适用于微线程（光纤）。
*   在交换到不同进程的情况下，交换到内核模式，更新虚拟内存表并返回用户模式。

在事件队列的情况下：

*   状态已更新。这在任何情况下都需要发生。
*   事件处理程序返回。不是交换调用堆栈，而是弹出当前调用堆栈。
*   检查事件队列是否有待处理的请求。只有当没有挂起的请求时，应用才会等待。这可以通过重复睡眠（如 OP 所建议）或（更好）通过对事件队列进行阻塞调用来完成。如果事件队列（例如一组 TCP 套接字）由操作系统管理，那么操作系统负责通知应用程序有新事件（一个套接字可以接受更多数据）。

如果服务器负载很高，事件队列的唯一开销是处理程序返回、读取队列和处理程序调用。在线程化方法中，交换线程会产生额外的开销。

此外，正如[PST](https://stackoverflow.com/users/166390/pst)所提到的，线程方法引入了对锁定的需求。锁定本身很便宜，但等待其他线程释放资源需要额外的上下文切换，因为等待线程无法继续。甚至有可能一个线程被换入以获取锁，但在几个时钟周期后才被换出，因为它还需要锁定*另一个*资源。比较操作系统完成了多少工作（至少读取线程队列和交换调用堆栈）与线程完成了多少工作（从一个调用返回并进行另一个调用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T03:32:43.280

从一个方面来看，它确实取决于特定于该语言的线程的实现。然而，一般来说，成本高的是线程的创建，而不是线程的运行。因此，某些语言（如 .Net）保留了一个线程池，因此您可以获取一个基本上已经创建的线程池，从而降低成本。

一位教授告诉我，线程的问题还在于，每种语言都有相当于 Thread.Yield() 函数，但实际上没有人使用它；因此，您将遇到的每个线程在调度方面都非常激进，这会在互斥锁和信号量之间引发各种战争；由于所使用的攻击性级别，某些线程从未真正运行过，这本身就是一个问题。

线程的好处是它们以增加功能为代价从其他循环（如 GUI 循环）中卸载功能。据我所知，事件仍然在单个线程中运行（除非特别告知要这样做）。

# ruby-on-rails - 如何国际化我的 Rails 应用程序（不翻译）？

> ID：13106082
> 
> 赞同：0
> 
> 时间：2012-10-28T03:12:36.357
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internationalization, gem

首先，是的，我已经阅读了[有关 I18n 的所有 Rails 文档，](http://guides.rubyonrails.org/i18n.html)但这对我想做的事情没有帮助。

我正在开发的应用程序将是国际化的（多种语言），具有用户生成的内容。我不想将用户生成的内容翻译成不同的语言，但我需要为每条内容分配一个“语言环境”。

不过，静态页面（关于我们、如何运作、联系我们等）将被翻译。

我看过[globalize3](https://github.com/galetahub/globalize3#readme)但据我了解它只能解决我的静态页面问题。

我想我可以简单地在所有用户生成的内容模型中添加一列“locale”，但随后我需要将“where locale = current_locale”链接到每个查询。这最终会变得沉重。

有没有人有其他想法？也许可以为某些模型查询设计一个过滤器，但我仍然是一个新的 Rails 开发人员，不知道这是否可能。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T17:02:01.390

我不确定它是否回答了这个问题，特别是因为我只有几个月的 Rails 经验。但是，据我了解，可以使用 Globalize3。[Globalize3 RailCast](http://railscasts.com/episodes/338-globalize3)可能有助于理解这一点。

Globalize3 处理数据库中数据的翻译。要翻译不在数据库中的数据，您应该使用[此 RailCast中解释的 I18n](http://railscasts.com/episodes/138-i18n-revised)

这个问题很老，但我希望它对其他人有帮助:)

# java - 在 Eclipse 中出现 println 错误

> ID：13106083
> 
> 赞同：2
> 
> 时间：2012-10-28T03:12:47.940
> 
> 标签：java, eclipse, compiler-errors, println

我开始使用 Java 编程，似乎 Eclipse 从第一天开始就给我错误。这是我的你好，世界计划：

```
public class HelloWorld {
    public static void main(String args[]) {
        System.out.println(“Hello, World!”);
    }
} 
```

但是，每当我尝试运行代码时，`println`都会出现红色下划线，并且该行标有红色“x”符号。Eclipse 告诉我“`println`无法解决”。

这种语法与网络上的各种 Hello World 程序以及我正在学习 Java 的书中的那个程序完全一致。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T03:18:54.487

在您的代码中，“Hello World”似乎被花引号而不是直引号包围。

您看到编译错误的原因是 Java 根据方法名称和参数类型确定要使用的方法。例如，println 采用字符串（或 bool、int 或此处记录的其他类型：http: [//docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#println()](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#println())） .

您的代码似乎传递了未知类型，因此 println(curly string) 无法解析。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-28T03:16:13.050

你好，世界！不是正确的类型。

# tinymce - TinyMCE 替换双引号、cleanup_callback？

> ID：13106085
> 
> 赞同：1
> 
> 时间：2012-10-28T03:12:58.473
> 
> 标签：tinymce

有没有办法用其他东西替换html源代码中的双引号，（/“或''）

cleanup_callback 可能是解决方案，但我不明白该怎么做，有人可以帮忙吗？

谢谢

# sql - 使用一条语句对多个属性和表进行 Oracle SQL 特权授权

> ID：13106087
> 
> 赞同：3
> 
> 时间：2012-10-28T03:13:09.123
> 
> 标签：sql, oracle, sqlplus

是否可以在一个语句中对不同的表或属性授予不同的权限？

例如我想结合：

```
GRANT SELECT ON tbl TO user; 
```

和

```
GRANT UPDATE OF attr ON tbl TO user; 
```

此外，我是否可以结合授予不同关系的特权：

```
GRANT INSERT ON tbl2; 
```

全部在一个声明中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T04:19:35.050

您可以将多个对象权限合并为一个`GRANT`，但仅限于同一个对象。例如：

```
GRANT SELECT, UPDATE(column1, column2), INSERT on TBL to user; 
```

但是，正如您在[手册](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_9013.htm)的语法图中看到的那样，每个`GRANT`一次只能对一个对象进行操作。

![在此处输入图像描述](../Images/e6cbce90e6a87e801dee6c9718036666.png)

但是，`GRANT`如果使用`CREATE SCHEMA`语法，则可以将多个 s 作为单个语句运行。

```
CREATE SCHEMA AUTHORIZATION owner_user
GRANT SELECT ON TBL TO user
GRANT SELECT ON TBL2 TO user; 
```

如果您希望简化代码，这将无济于事。但是，如果您对使用单个语句有一些技术要求，它可能会起作用。例如，我经常发现组合 DDL 语句可以显着减少运行安装脚本所需的时间，尤其是在网络速度较慢的情况下。

# node.js - node.js everyauth twitter mongodb 错误：您正在尝试访问您未配置的`findUserById` 配置的属性/方法？

> ID：13106088
> 
> 赞同：1
> 
> 时间：2012-10-28T03:13:25.437
> 
> 标签：node.js, everyauth

在`findOrCreateUser`函数中，我返回一个`promise`，然后我使用来自 mongoDB 的用户文档来完成它。

然后它给出了这个错误`You are trying to access the attribute/method configured by findUserById, which you did not configure`

我使用了这个人的教程[http://nodetuts.com/tutorials/26-starting-with-everyauth.html#video](http://nodetuts.com/tutorials/26-starting-with-everyauth.html#video)他没有这样做。为什么它甚至需要一个`findUserById`函数？我将返回整个文档，而不仅仅是一个 ID。

所以，是的，我该如何纠正这个问题？我想在你归还你的之后`promise`，一切都很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T01:37:42.343

不确定你是否已经解决了这个问题，但我发现在你开始告诉它之前添加以下内容，api id 和秘密为我排序：

```
everyauth.everymodule
  .findUserById( function (id, callback) {
    callback(null, usersById[id]);
  }); 
```

# php - 打印关联数组 - 奇怪的输出

> ID：13106090
> 
> 赞同：0
> 
> 时间：2012-10-28T03:13:37.603
> 
> 标签：php, foreach, associative-array

我有一个来自 xml 文档的 assoc 数组...我正在以我需要的结构输出我需要的数据..

问题：测试时有字符被回显/打印，我真的不确定为什么以及是什么导致它..

```
Array
(
[AR] => Array
    (
        [Pt Lincoln] => Array
            (
                [Track Desc] => Good
                [Mtg Id] => 675546624
                [Track Rating] => 2
                [Weather] => Fine
                [Abandoned] => N
                [1] => Array
                    (
                        [Race Name] => 3YO 0 - 64 HANDICAP
                        [Distance] => 1000
                        [1] => Array
                            (
                                [Number] => 1
                                [Runner Name] => HEAVENS SHOUT
                                [Barrier] => 5
                            )
... 
```

php代码：

```
foreach($data_array as $id => $mtgid)
{
foreach($mtgid as $vname2 => $meet)
{
    echo $mtgid[$vname2]['Track Desc'];
    echo $mtgid[$vname2]['Mtg Id'];
    echo $mtgid[$vname2]['Track Rating'];
    echo $mtgid[$vname2]['Weather'];
    echo $mtgid[$vname2]['Abandoned'];

    foreach($meet as $race => $detail)
    {
        echo $meet[$race]['Race Name'];
        echo $meet[$race]['Distance'];

        foreach($detail as $horse => $selection)
        {
            echo $detail[$horse]['Number'];
            echo $detail[$horse]['Runner Name'];
            echo $detail[$horse]['Barrier'];
            echo "<br/>";

        }
        echo "<br/>";
    }   
}
}

?> 
```

输出：

```
Good6755466242FineNGG
66
22
FF
NN
3YO 0 - 64 HANDICAP1000333
111
1HEAVENS SHOUT5
2HANK'S NEPHEW2
3RIFF RAFF1
4TIGARA'S GEM4
5THE HEADLINER8
6WHERE HEARTS LIE7
7SHEZA STAR3
8REDLEAF ROSE6 
```

随机字符是 GG6622FFNN

任何指导将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T09:33:47.113

```
foreach($data_array as $id => $mtgid)
{
foreach($mtgid as $vname2 => $meet)
{

    echo $mtgid[$vname2]['Track Desc'];
    echo $mtgid[$vname2]['Track Rating'];
    echo $mtgid[$vname2]['Weather'];
    echo $mtgid[$vname2]['Abandoned'];

    for($i=0; $i<count($meet); $i++)
    {
        echo $meet[$i]['Race Name'];
        echo $meet[$i]['Distance'];

        for($j=0; $j<count($meet[$i]); $j++)
        {
            echo $meet[$i][$j]['Number'];
            echo $meet[$i][$j]['Runner Name'];
            echo $meet[$i][$j]['Barrier'];
            echo "<br/>";

        }
        echo "<br/>";
    }   
}
} 
```

# ios - Storyboard segues 导致内存泄漏

> ID：13106095
> 
> 赞同：8
> 
> 时间：2012-10-28T03:14:53.460
> 
> 标签：ios, cocoa-touch, uiviewcontroller, uistoryboard, uistoryboardsegue

我有两个 UIViewControllers 按钮触发 segue（模态）到彼此。我想知道这是否会在来回跳转时导致任何内存泄漏，我看到 Living Object && 分配的内存正在上升，最终会导致应用程序崩溃。我没有任何一行代码——使用纯 UIViewControllers。 ![故事板](../Images/4fa0dfed3c7e8b4242470206e055d007.png)

![剖析器 1](../Images/6c79026c09ab11756c51951dff069de6.png)

![分析器 2](../Images/f41b1f4851a259f446f286770d344bc6.png) ![项目的设置](../Images/1ca541d80cea40bdaa54a0e5fee3ec25.png)

我可能做错了什么？
我可以在项目设置中设置错误吗？
我在阅读分析器的静态数据吗？
使用 segues 时是否需要执行任何特殊的释放命令？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-28T03:48:05.020

您没有正确使用模态序列。您实现它的方式是，当您选择而不是返回到您来自的实例时，您正在为每个视图控制器创建一个新实例。这就是为什么您的内存使用量持续增加的原因。

在 iOS 6 之前，处理这个问题的正确方法是：

`viewController2Done`1)在视图控制器 1 中定义一个方法
2) 在视图控制器 2 中，创建一个名为`delegate`type的属性`id`。
3）在`prepareToSegue`视图控制器1中，`delegate`在视图控制器2中设置为`self`
4）在视图控制器2中，当该返回视图控制器1时，调用`[delegate viewController2Done]`
5）在`viewController2Done`调用中`[self dismissModalViewControllerAnimated:YES]`

此方法在 iOS 6 中仍然有效，但也有一种新`unwind segue`方法可以代替。要使用它，您将在视图控制器 1 中定义一个方法，如下所示：

**目标-C：**

```
- (IBAction)unwindFromViewController2:(UIStoryboardSegue *)segue
{
    NSLog(@"and we are back");
} 
```

**迅速：**

```
@IBAction func unwindFromViewController2(_ segue: UIStoryboardSegue) {
    print("and we are back")
} 
```

然后，您可以控制从视图控制器 2 中的按钮拖动到情节提要中视图控制器上方栏中的橙色退出图标。在弹出窗口中，您将选择`unwindFromViewController2`并瞧，您就完成了。

![在此处输入图像描述](../Images/17b4dbdd6a566e2d8332409bca8ef613.png)

# node.js - 将 node/express 中的文件流式传输到客户端

> ID：13106096
> 
> 赞同：52
> 
> 时间：2012-10-28T03:15:36.023
> 
> 标签：node.js, express

我想将内容流式传输到可能存储在数据库中的客户端，它们将保存为文件。

显然 res.download 可以很好地完成这项工作，但没有一个 response.* 函数接受流，只有文件路径。

我查看了 res.download impl，它只设置了 Content-Disposition 标头，然后设置了 sendfile。

所以我可以使用这篇文章作为指导来实现这一点。 [Node.js：通过 HTTPS 冻结响应的管道流](https://stackoverflow.com/questions/8257544/node-js-pipe-stream-to-response-freezes-over-https)

但似乎我会错过 res.send 执行的所有包装方面。

我是否在这里遗漏了一些东西，或者我应该只是做管道而不用担心它 - 这里的最佳做法是什么？

目前正在创建临时文件，所以我现在可以使用 res.download。

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2013-07-23T18:44:32.693

您可以直接流式传输到响应对象（它是一个流）。

基本文件流看起来像这样。

```
function(req, res, next) {
  if(req.url==="somethingorAnother") {
    res.setHeader("content-type", "some/type");
    fs.createReadStream("./toSomeFile").pipe(res);
  } else {
    next(); // not our concern, pass along to next middleware function
  }
} 
```

这将负责绑定`data`和`end`事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-31T01:38:24.067

确保来自客户端的 AJAX 请求具有适当的“responseType”集。例如喜欢

```
$http({
  method :'GET',
  url : http://url,
  params:{},
  responseType: 'arraybuffer'
}).success() 
```

# mysql - 在不使用 $this->db->query() 的情况下在 codeigniter 活动记录中选择函数

> ID：13106099
> 
> 赞同：0
> 
> 时间：2012-10-28T03:16:19.207
> 
> 标签：mysql, codeigniter

嗨，我开始在 codeigniter 中查询我的数据库，并且在基本的 select 语句上一切正常，但是在我添加了我的 sql 函数之后，一切都变了。好吧，基本上我有一个在 mysql 中正确处理文本的函数，它应该像这样工作：

```
SELECT proper(foo_bar) as foo from foo; 
```

这个应该返回如下内容：

```
|Foo    |
|Foo Bar| 
```

现在应用我希望它是这样的活动记录：

```
$this->db->select('proper(foo_bar)');
$query = $this->db->get('foo'); 
```

好吧，我仍然不知道别名的一部分，但我现在需要解决这个问题，但是是的，在这个查询之后没有返回。我认为 CI 将其读作

```
Select 'proper(foo_bar)' from foo 
```

这显然是完全错误的。顺便说一句，我尽可能不想像这样手动输入我的查询：

```
 $query = $this->db->query("SELECT proper(foo_bar) as foo from foo"); 
```

在我看来，这是不切实际的。有什么办法可以解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T03:32:52.470

如文档所述，您应该传递第二个参数以避免使用反引号进行字段保护。

```
$this->db->select('proper(foo_bar) AS propfoo',FALSE); 
```

[https://www.codeigniter.com/userguide2/database/active_record.html#select](https://www.codeigniter.com/userguide2/database/active_record.html#select)

# php - 通过 CURL 从 url 获取图像在某些 URL 上崩溃

> ID：13106101
> 
> 赞同：0
> 
> 时间：2012-10-28T03:17:03.213
> 
> 标签：php, image, curl

我试图使用这里给出的脚本[php 从 url 获取所有图像，宽度和高度 >=200 更快](https://stackoverflow.com/questions/10035954/php-get-all-the-images-from-url-which-width-and-height-200-more-quicker)

我下载并使用了这里给出的 simple_html_dom.php [http://sourceforge.net/projects/simplehtmldom/](http://sourceforge.net/projects/simplehtmldom/)

它适用于大多数网址，但是当我使用类似[http://www1.macys.com/shop/mens-clothing/mens-athletic-wear?id=59165&edge=hybrid&cm_sp=us_men%27s-men%27s-apparel- activewear-_-t-shirts#!fn=APPAREL_TYPE%3DT-Shirts%26sortBy%3DORIGINAL%26productsPerPage%3D40&!qvp=iqvp](http://www1.macys.com/shop/mens-clothing/mens-athletic-wear?id=59165&edge=hybrid&cm_sp=us_men%27s-men%27s-apparel-activewear-_-t-shirts#!fn=APPAREL_TYPE%3DT-Shirts%26sortBy%3DORIGINAL%26productsPerPage%3D40&!qvp=iqvp)

脚本只是崩溃了。有人可以帮忙吗？

编辑：我提出错误报告，它给出了这个。

致命错误：在第 16 行的 /var/www/smartbiz/smartbiz/test2.php 中的非对象上调用成员函数 find()

第 16 行：`if ($html->find ( 'img' )) {`

EDIT2：不确定这是否相关[PHP simple html dom: apache crashs](https://stackoverflow.com/questions/11413392/php-simple-html-dom-apache-crashes?lq=1)，[PHP simple html dom: apache crashs](https://stackoverflow.com/questions/11413392/php-simple-html-dom-apache-crashes?lq=1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T04:25:25.127

您可以将代码包装在 try-catch 语句中。

```
<?
try{

   // Your image checking code..

}catch( Exception $e ){
   echo "Image not found: $e";
}
?> 
```

听起来错误是没有加载 HTML。我们需要更多你的代码，否则我只能给你基本的调试建议。

1.  将“失败”的链接复制并粘贴到浏览器中，并检查它是否正常工作。
2.  尝试以另一种方式将 HTML 加载到 Simple HTML DOM 中。
3.  如果这些不起作用，请转储 $html 变量以查看发生了什么。
4.  如果循环适用于某些人而不适用于其他人，那么有什么不同？URL 结构，字符编码是否存在/缺失？

尝试以另一种方式放置 HTML。

```
$html = str_get_html( file_get_contents( $YOUR_URL ) ); 
```

我希望这有帮助。

# algorithm - 网格图理论

> ID：13106102
> 
> 赞同：0
> 
> 时间：2012-10-28T03:17:09.873
> 
> 标签：algorithm

我正在尝试几个小时的以下问题，但无法获得正确的逻辑。

您在一个规划团队中，该团队负责布置辅助电网。这个辅助电网的目的是在停电的情况下为小镇路口的灯柱供电。你的团队有 k 个生成器。您可以将这些发电机放置在电网中的任何位置，并且每个发电机都可以打开通过电网与其连接的所有灯（存在路径）。对于镇上的每条道路，您需要支付在电网中铺设电缆以连接该道路端点处的两个交叉点的成本。鉴于城镇的布局，您的任务是制定最低成本的电网并在其上安装发电机，以便您可以打开城镇交界处的所有灯柱。

输入：第一行包含案例 t 的数量。然后， t 个案例随之而来。每个案例的第一行包含三个整数 n、m 和 k。连接点编号为 1 到 n。然后，m 行跟随。每行包含三个整数 i、j、c。整数 i 和 j 介于 1 和 n 之间，表示道路两个端点的两个交叉点。第三个整数 c 是在这条道路的电网中铺设电缆的成本。

输出：您应该输出 t 行，每种情况一个。对于每种情况，输出最小成本网格。如果这个任务是不可能的（即没有办法用 k 个发电机打开所有的灯），输出“不可能！” （为清楚起见引用）

```
Constraints:
1 <= t <= 25
1 <= n <= 2000
0 <= m <= n(n-1)/2
0 <= c <= 1000000

Sample Input:
2
3 1 1
1 2 10
6 7 2
1 2 20
1 3 5
1 4 10
2 3 8
2 4 15
3 4 2
5 6 9

Sample Output:
Impossible!
24 
```

解释：在第一种情况下，连接点 1 和连接点 2 与连接点 3 断开连接，您无法仅使用一台发电机打开所有灯柱。您至少需要两台发电机。在第二种情况下，您可以在道路 (1 3)、(2 3)、(3 4) 和 (5 6) 上铺设电缆，然后在 1 号交叉路口安装一台发电机，然后在 1 号路口安装一台发电机。发电机在 5 号交界处。

如何有效地解决这个问题？现在除了BruteForce我一无所知。修改后的 Kruskal 会在这里工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T04:42:34.200

您想要的解决方案是一组断开连接的生成树。如果你把所有不在解决方案中的行都给了同样的非常大的成本，那么你可以找到一个最小生成树并丢弃成本非常高的行来找到解决方案。

这显然是不可能的，但是 Kruskal 算法的工作原理是从成本最低的边缘开始，然后按照成本稳步增加的顺序进行。因此，如果您在有 k 个断开连接的组件时停止它，您将得到与执行此操作相同的答案。

# javascript - 选择 JSON 数组的一部分并在 javascript 或 jquery 中应用变量

> ID：13106103
> 
> 赞同：0
> 
> 时间：2012-10-28T03:17:09.517
> 
> 标签：javascript, jquery, json

我正在检索一个 JSON 文件，该文件返回如下所示的结果。JSON 包含 365 天的数据。我想使用 javascript 创建这个 JSON 的“视图”，它会拉出最后 10 天，然后是 1 个月、6 个月等。

在 getJSON 函数之后，我这样做是为了将字符串作为 JSON，然后将其转换为对象，然后将其绘制成图形。所以我希望每个“视图”都是指定时间范围内的对象（使用一个 JSON）。然后将绘制 obj_10days、obj_1month 等变量。

```
var $ graph = data ;
var obj = $ . parseJSON ( $ graph ) ; 
```

JSON：

```
[

    {
        "Low": 8.63,
        "Volume": 14211900,
        "Date": "2012-10-26",
        "High": 8.79,
        "Close": 8.65,
        "Adj Close": 8.65,
        "Open": 8.7
    },
    {
        "Low": 8.65,
        "Volume": 12167500,
        "Date": "2012-10-25",
        "High": 8.81,
        "Close": 8.73,
        "Adj Close": 8.73,
        "Open": 8.76
    },
    {
        "Low": 8.68,
        "Volume": 20239700,
        "Date": "2012-10-24",
        "High": 8.92,
        "Close": 8.7,
        "Adj Close": 8.7,
        "Open": 8.85
    }, 
```

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T04:57:51.173

使用 for 循环 / .each ...您有一个 json 对象数组，您应该像数组一样调用它...

喜欢：obj[0].Low

# c - 文本文件中的 strcmp() 和换行符

> ID：13106108
> 
> 赞同：2
> 
> 时间：2012-10-28T03:17:40.607
> 
> 标签：c, newline, strcmp

我试图用来`strcmp()`测试文本文件中的特定行是否等于换行符（`\n`）。我从一个文本文件中收集每一行，并将它们写入另一个文本文件。如果源文件中的整行只是一个换行符，我不想在目标文件中写入该行。

我认为下面的代码可以用于此目的，但事实并非如此。但是，如果我将条件中的数值从 0 更改为 3，它就像我希望它工作一样工作。知道为什么吗？

我的目标是更改我的条件，使其使用数值 0，这意味着`strcmp()`找到完全匹配，但我不知道如何更改我的条件的其他部分来做到这一点。

```
#include <stdio.h>

void process_file(const char *inp_file, FILE *otp_fp) {

  char line[256];
  FILE *inp_fp = fopen(inp_file, "r");

  if (inp_fp != NULL) {
    while(fgets(line, 256, inp_fp) != NULL) {

      if (strcmp (line, "\n") != 0) { //changing to 3 gets desired result
        fprintf(otp_fp, line);
      }

    }
  }

  fclose(inp_fp);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T11:33:15.850

```
#include <stdio.h>
#include <string.h>

void process_file(const char *inp_file, FILE *otp_fp) {

  char line[256];
  FILE *inp_fp ;
  size_t len;

  inp_fp = fopen(inp_file, "r");

  if (!inp_fp ) return;

  while(fgets(line, 256, inp_fp) != NULL) {
    len = strlen(line);
        /* skip trailing space */
    while (len && (line[len-1] == '\n' || line[len-1] == '\r')) {line[--len] = 0;}

    if (!len ) continue;
        /* dont use random strings as format argument for printf() et.al.
        ** (there could be '%' signs in it) 
        ** Note: the \r\n (if any) were removed, and now are re-added.
        ** This will impose the line-ending convention that the current platform uses.
        */
    fprintf(otp_fp, "%s\n", line);

  }

  fclose(inp_fp);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T09:01:45.867

您描述的行为的唯一解释是这些行并不是真的空的。它们必须有一些空格（如空格或制表符）。如果你想省略这些行，那么你必须检查它们是否真的只包含空格。

（我还修复了代码中的一个问题，如果失败，您将尝试`fclose()`使用 NULL 指针`fopen()`。这也演示了如何通过仅在处理错误条件后运行代码来降低函数的缩进级别。）

```
int str_is_whitespace(const char* line) {
    int onlyws = 1;
    int i = 0;
    while (onlyws && line[i] != '\0') {
        if (!isspace(line[i])) {
            onlyws = 0;
        }
        ++i;
    }
    return onlyws;
}

void process_file(const char *inp_file, FILE *otp_fp) {
    char line[256];
    FILE *inp_fp = fopen(inp_file, "r");
    if (inp_fp == NULL) {
        return;
    }
    while(fgets(line, 256, inp_fp) != NULL) {
        // Only output the text if it doesn't consist only of whitespace.
        if (!str_is_whitespace(line)) {
            fprintf(otp_fp, "%s", line);
        }
    }
    fclose(inp_fp);
} 
```

您需要包含`<ctype.h>`for `isspace()`。

请注意，您会遇到长度超过 255 个字符的行的问题，并且`fgets()`碰巧读取了其中只有空格的行的剩余部分。如果你想处理这个问题，你需要额外的逻辑来确定当前文本是否实际上是更大行的一部分。

# makefile - make: *** 没有目标。停止

> ID：13106110
> 
> 赞同：-1
> 
> 时间：2012-10-28T03:18:07.317
> 
> 标签：makefile, gnu-make

这就是我创建 *.o 文件所拥有的，我不想创建普通文件。这个 GNUmake 位于 /obj 中。不用说，它不起作用。你碰巧知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T05:15:15.573

试试这个：

```
all: $(OBJS)

%.o: $(SRC_DIR)/%.c
    $(CC) -I$(INC_DIR) -c $< -o $@ 
```

# python - 使用 box-api 的 JSON 无效

> ID：13106113
> 
> 赞同：0
> 
> 时间：2012-10-28T03:19:06.580
> 
> 标签：python, json, box-api, python-requests

```
 def get_item_url(itemid, itemtype):
if itemtype=="folder" or itemtype=="FOLDER":
    url = "https://api.box.com/2.0/folders/"+itemid
    headers = {'Authorization' : 'BoxAuth api_key='+apikey+'&auth_token='+auth_token,}
    payload = {'shared_link': {'access': 'Open'}}
    r = requests.request("PUT", url, None, json.dumps(payload), headers)
    print r.content
    return r.content
elif itemtype=="file" or itemtype=="FILE":
    url = "https://api.box.com/2.0/files/"+itemid
    headers = {'Authorization' : 'BoxAuth api_key='+apikey+'&auth_token='+auth_token,}
    payload = {'shared_link': {'access': 'Open'}}
    r = requests.request("PUT", url, None, json.dumps(payload), headers)
    print r.content
    return r.content 
```

这是我必须获取项目 url 的代码，文件或文件夹取决于传递给方法的字符串。但这不起作用，Box API 总是返回“无效 JSON”错误。谁能帮帮我，我什么都试过了！我尝试使用双引号、单引号，只放置“有效负载”而不是通过 json.dumps 运行它。我已经尝试将它添加为另一个标题，一切，但我无法让它工作！

我也尝试过对 httpbin.org/put 做同样的请求，这就是我得到的回报：

```
{
"origin": "10.217.61.17",
"files": {},
"form": {},
"url": "http://httpbin.org/put",
"args": {},
"headers": {
"Content-Length": "",
"Accept-Encoding": "identity, deflate, compress, gzip",
"Accept": "*/*",
"Host": "httpbin.org",
"Content-Type": "",
"Authorization": "BoxAuth api_key=<API_KEY>&auth_token=<AUTH_TOKEN>"
},
"json": null,
"data": ""
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:36:37.803

好吧，对于 httpbin 响应，这绝对是请求本身的问题，而不是 Box API。

尝试像这里的示例那样格式化请求：http: [//docs.python-requests.org/en/latest/user/quickstart/#custom-headers](http://docs.python-requests.org/en/latest/user/quickstart/#custom-headers)

```
>>> import json
>>> url = 'https://api.github.com/some/endpoint'
>>> payload = {'some': 'data'}
>>> headers = {'content-type': 'application/json'}

>>> r = requests.post(url, data=json.dumps(payload), headers=headers) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T03:45:36.483

既然你只是硬编码你的 JSON，你为什么不这样做：

```
payload = '{"shared_link": {"access": "Open"}}'
r = requests.request("PUT", url, None, payload, headers) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T18:19:46.907

一些东西

您应该为每个 Requests HTTP 方法显式设置参数，并使用内置函数发出 HTTP 请求，而不是直接使用`request`对象，即

```
r = requests.request("PUT", url…) 
```

你应该改为

```
r = requests.put(url…) 
```

如果您这样做（并明确设置参数），您的新逻辑应如下所示：

```
url = "https://api.box.com/2.0/files/"+itemid
headers = {'Authorization' : 'BoxAuth api_key='+apikey+'&auth_token='+auth_token,}
payload = {'shared_link': {'access': 'Open'}}
r = requests.put(url, headers=headers, data=json.dumps(payload))
print r.content
return r.content 
```

此外，响应对象将允许您访问发送过来的实际请求对象。因此，在您之前尝试发出的请求中，您实际上可以通过以下方式看到正在发送的 JSON

```
r = requests.put(url, headers=headers, data=json.dumps(payload))
print r.request.data 
```

# objective-c - IOS - 绘制矩形图像

> ID：13106115
> 
> 赞同：0
> 
> 时间：2012-10-28T03:19:43.880
> 
> 标签：objective-c, ios, uilabel, drawrect

我有一个`UIImage`我想画的`UILabel`，从 json 加载的图像。

我想在绘制之前保存图像。

我已经加载了图像，但我没有绘制它，我想我保存了图像问题。

这是我的代码：

```
- (void)createDirectory {

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    itemsFilename = [[NSString alloc] initWithString:[documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"listEPG"]]];
    thumbsFilename = [[NSString alloc] initWithString:[documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"listImage"]]];
    _itemsNames = [[NSMutableArray alloc] initWithContentsOfFile:itemsFilename];
    images = [[NSMutableDictionary alloc] initWithContentsOfFile:thumbsFilename];
    imagesOperations = [[NSOperationQueue alloc] init];
    [imagesOperations setMaxConcurrentOperationCount:1];

    if (images == nil) {
        images = [[NSMutableDictionary alloc] init];
    }
}

- (void)drawRect:(CGRect)rect {

    for(int i = 0;i<10;i++) {
        NSString* imageUrl= [NSString stringWithFormat:@"%@",[[[data objectAtIndex:i] objectForKey:@"Channel"] objectForKey:@"Image"]];

        UIImage *imgLogo = [self setImage:imageUrl];
        NSLog(@"%@",imgLogo);
        [imgLogo drawInRect:CGRectMake(0,y_lblLogo,70.f,30.f)];
    }
}

- (UIImage *) setImage:(NSString *)theUrl {
    //NSLog(@"%@",theUrl);
    id userImage = [images objectForKey:theUrl];

    if(userImage == nil) {
        [images setObject:[NSNull null] forKey:theUrl];
        GetImage *op = [[GetImage alloc] initWithTheURL:theUrl target:self action:@selector(getImage:)];
        NSLog(@"%@",op);        //[imagesOperations addOperation:op];
    } else if ([userImage isKindOfClass:[NSData class]]) {
        return [UIImage imageWithData:userImage];
    }
    return [UIImage imageNamed:@""];
}

- (void) getImage:(NSDictionary *)info {

    NSString* url = [info objectForKey:@"url"];
    id image = [info objectForKey:@"image"];
    [images setObject:UIImageJPEGRepresentation(image, 0.5) forKey:url];
    [images writeToFile:thumbsFilename atomically:YES];
    NSMutableSet *filepathsSet = [[NSUserDefaults standardUserDefaults] objectForKey:@"filePathLogoChannel"];
    [filepathsSet setByAddingObject:thumbsFilename];
    [[NSUserDefaults standardUserDefaults] setObject:filepathsSet forKey:@"filePathLogoChannel"];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T09:04:08.467

改变

```
id image = [info objectForKey:@"image"];
[images setObject:UIImageJPEGRepresentation(image, 0.5) forKey:url];
[images writeToFile:thumbsFilename atomically:YES]; 
```

至

```
UIImage *image = (UIImage *)[info objectForKey:@"image"];
NSData *imageData = UIImageJPEGRepresentation(image, 0.5);
[imageData writeToFile:thumbsFilename atomically:YES]; 
```

# c - 访问 2 位长无符号字符 (C) 的数字

> ID：13106116
> 
> 赞同：2
> 
> 时间：2012-10-28T03:19:52.647
> 
> 标签：c

在 C 中，我很好奇如何获取一个无符号字符（即两位长）并能够将第一个数字存储到不同的无符号字符中，并将第二个数字存储到不同的无符号字符中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T03:31:41.013

这取决于您所说的*数字*。

如果您在谈论十进制数字，您需要做的是反复除以 10（十进制数字的基数）并获得余数以提取每个数字。如果只有 2 个数字，则可以通过仅除以 10 来提取第一个数字，通过除以 10 的余数来提取第二个数字。

如果您在谈论十六进制数字，您可以执行与上述相同的操作，但使用以 16 为基数。或者，您可以利用一个字节由两个 4 位 nybbles 组成的事实，每个 nybbles 都可以由一个十六进制数字表示。因此，高 4 位构成第一位，低 4 位构成第二位。

这是一个显示这两种方法的示例：

```
#include <stdio.h>

void hex_digits(void)
{
   unsigned char uc = 0xAB;
   unsigned char nyb_hi = uc >> 4;
   unsigned char nyb_lo = uc & 0xF;

   printf("High nybble: 0x%X, low: 0x%X\n", nyb_hi, nyb_lo);
}

void decimal_digits(void)
{
   unsigned char uc = 12;
   unsigned char d1 = uc / 10;
   unsigned char d2 = uc % 10;

   printf("First digit: %u, second: %u\n", d1, d2);
}

int main(void)
{
   hex_digits();
   decimal_digits();

   return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T03:22:46.223

假设你说的是十进制数字，你可以这样做：

```
unsigned char v = 42;
unsigned char tens = v / 10;
unsigned char ones = v % 10; 
```

整数除以十舍弃；获得除以 10 的余数会去掉余数。

# python - python doctest中的对象重用

> ID：13106118
> 
> 赞同：7
> 
> 时间：2012-10-28T03:21:08.033
> 
> 标签：python, unit-testing, doctest

我有一个像这样的示例文档测试。

```
"""
This is the "iniFileGenerator" module.
>>> hintFile = "./tests/unit_test_files/hint.txt"
>>> f = iniFileGenerator(hintFile)
>>> print f.hintFilePath
./tests/unit_test_files/hint.txt
"""
class iniFileGenerator:
    def __init__(self, hintFilePath):
        self.hintFilePath = hintFilePath
    def hello(self):
        """
        >>> f.hello()
        hello
        """
        print "hello"
if __name__ == "__main__":
    import doctest
    doctest.testmod() 
```

当我执行这段代码时，我得到了这个错误。

```
Failed example:
    f.hello()
Exception raised:
    Traceback (most recent call last):
      File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/doctest.py", line 1254, in __run
        compileflags, 1) in test.globs
      File "<doctest __main__.iniFileGenerator.hello[0]>", line 1, in <module>
        f.hello()
    NameError: name 'f' is not defined 
```

此错误是由访问测试`hello()`方法时无法访问的“f”引起的。

有什么方法可以共享之前创建的对象吗？没有它，就需要在必要时始终创建对象。

```
def hello(self):
    """
    hintFile = "./tests/unit_test_files/hint.txt"
    >>> f = iniFileGenerator(hintFile)
    >>> f.hello()
    hello
    """
    print "hello" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T06:08:54.150

您可以使用`testmod(extraglobs={'f': initFileGenerator('')})`全局定义可重用对象。

正如[doctest 文档](http://docs.python.org/library/doctest.html#doctest.testmod)所说，

> *extraglobs*给出了一个 dict 合并到用于执行示例的全局变量中。这就像 dict.update()

但是我曾经在所有方法`__doc__`之前测试类中的所有方法。

```
class MyClass(object):
    """MyClass
    >>> m = MyClass()
    >>> m.hello()
    hello
    >>> m.world()
    world
    """

    def hello(self):
        """method hello"""
        print 'hello'

    def world(self):
        """method world"""
        print 'world' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-06T14:59:37.040

要获得具有所有使用共享执行上下文的测试的识字模块（即可以共享和重用结果的单个测试），必须查看有关[执行上下文的文档](https://docs.python.org/3/library/doctest.html#what-s-the-execution-context)的相关部分，其中说：

> ...每次`doctest`找到要测试的文档字符串时，它都会使用 's 全局变量的*浅表* **副本**，`M`因此运行测试不会更改模块的真实全局变量，因此一个测试`M`不会留下意外允许另一个测试的碎屑测试工作。
> 
> ...
> 
> 您可以通过传递给或代替来**强制使用*自己的*dict**作为执行上下文。`globs=your_dict``testmod()``testfile()`

鉴于此，[我设法](https://gist.github.com/kernc/0dccae6542465d59a331)从`doctest`模块进行逆向工程，除了使用副本（即`dict`'`copy()`方法）外，它还`clear()`在每次测试后清除全局字典（使用 ）。

因此，可以使用以下内容修补自己的全局字典：

```
class Context(dict):
    def clear(self):
        pass
    def copy(self):
        return self 
```

然后将其用作：

```
import doctest
from importlib import import_module

module = import_module('some.module')
doctest.testmod(module,
                # Make a copy of globals so tests in this
                # module don't affect the tests in another
                glob=Context(module.__dict__.copy())) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-10T11:09:03.780

对于像我这样发现这个问题的人，这里有一个简单的技巧可以解决这个问题。

在您的模块文档中，将“全局”值作为`builtins`模块的属性附加，例如

```
"""
My module documentation

>>> import builtins
>>> builtins.sample_value = "Here is a long value"
>>> builtins.sample_func = lambda x: x.lower()
""" 
```

该`builtins`模块会自动导入每个范围，因此它的属性将在您的函数中可用，包括 doctest 函数

```
def first_char_func(s: str) -> str:
   """
   Returns the first char of a function

   >>> first_char_func(sample_func(sample_value))
   h
   """  
   return s[0] if len(s) > 0 else None 
```

然而，可以说，一旦你到了这个阶段，你最好只写一个单元测试。

# html - appjs - 编译成单个可执行文件？

> ID：13106120
> 
> 赞同：7
> 
> 时间：2012-10-28T03:21:25.377
> 
> 标签：html, titanium, tidesdk, appjs

我整晚都在尝试通过 html5 构建跨平台桌面应用程序的不同工具，到目前为止 appjs 似乎很完美。我一直在玩基于 Windows 可执行文件的演示项目，但我想知道是否有任何指南或教程关于如何将项目转换为跨平台可执行文件（单个文件）而不是 appjs 加载程序可执行文件与所有子文件夹中的源。

我也尝试过 adobe air，但是 css 动画非常糟糕、缓慢/不稳定（不确定可能做错了什么）。大约一年前，我正在修补钛，但是他们已经放弃了为桌面编译。

我基本上所做的只是加载一个外部 URL（最终将添加身份验证）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T05:07:05.433

Titanium Desktop（现在称为[TideSDK](http://www.tidesdk.org)）并没有死。它已被社区接管，并正在全力准备今年推出的新版本。有大量的开发人员正在研究它，还有来自社区的许多人贡献示例代码、文档和教程。

如果您正在寻找严肃的跨平台，这是一个很好的方法，对于您的可执行文件，它会将应用程序（使用一些特殊的构建脚本）转换为 Window 的本机安装程序、Mac 的 .DMG 文件以及您需要的任何格式*尼克斯平台。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T16:43:56.917

差不多一年前，我也对同样的技术感兴趣。今天我也想起了这个问题，并开始寻找答案。我会提到我不尝试创建应用程序，只是阅读网络。这是我发现的。

到目前为止的好框架：

*   TideSDK - 我也认为它被放弃了。如果有人知道涉及这项技术的严肃应用程序或公司，请告诉我
*   PhoneGap - 我听说它很好，但有一些缺陷。没试过。可能很有趣。
*   AppJS - 我得出了同样的结论。一切都很棒，除了 NodeJS 作为服务器。我不喜欢 NodeJS，或者我不喜欢用 Javascript 语言编写业务逻辑/服务器端代码的想法。Javascript 本身很难维护。如果有人告诉我它很快。好的，是的，但是[PyPy 与 NodeJS](http://blog.kgriffs.com/2012/10/23/python-vs-node-vs-pypy.html)。所以事实并非如此。V8 作为 UI 引擎很棒。用 HTML5、JS、CSS 编写 UI 并在任何本地 Python/.NET/Java/Ruby 服务器上做服务器工作对我来说是最好的主意。
*   还有jQery Mobile之类的，暂时没试过

我还发现：[移动框架比较矩阵](http://www.markus-falk.com/mobile-frameworks-comparison-chart/)。

还没有找到一号。如果你发现一些有趣的东西，请告诉我:)

**编辑：**

CEF - [Chromium Embedded Framework](http://code.google.com/p/chromiumembedded/)也可能是一个有趣的选择。有人说 AppJS 是建立在此之上的。

**编辑**

[很好的分类和几个例子](https://stackoverflow.com/a/13113812/342843)

看起来也很有希望[的 Google 的 JavaScript 应用程序](http://developer.chrome.com/apps/app_architecture.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T20:15:26.640

实际上 node-webkit 支持可执行文件，即使它包含一个带有应用程序本身的 node.js 运行时。所以它增加了额外的内存。但总体来说效果很好！

# html - 简单的 3 列流体布局，但中心列为空且固定宽度？

> ID：13106121
> 
> 赞同：1
> 
> 时间：2012-10-28T03:21:26.333
> 
> 标签：html, css, multiple-columns

很难找到最跨浏览器兼容的解决方案（包括 IE6）。

三列，侧边两列响应式，随屏调整。

中间列应该是**空**的，但**宽度固定**：

![在此处输入图像描述](../Images/d9bb355fa162186eafd1bb01c37c6941.png)

让它们全部响应很容易：http: [//jsfiddle.net/Baumr/sZehH/2/](http://jsfiddle.net/Baumr/sZehH/2/)（在这种情况下，中间的甚至不是一列，而只是一个边距——这很好）。

```
<section> 
    <div>
        <p>Column 1, lorem ipsum dolor bla bla dogs and cats</p>
    </div>
    <!-- Best if Column 2 is a margin or something -->
    <div>
        <p>Column 3, lorem blops dolor bla laa cats and dogs</p>                        
    </div>
<section> 
```

我考虑过使用`position:`，但它可能会变得混乱......

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T03:46:48.867

使用内部元素进行间距怎么样？可能是每列内的另一个 DIV 标记：

[http://jsfiddle.net/sZehH/3/](http://jsfiddle.net/sZehH/3/)

HTML：

```
<section> 
    <div class="left">
        <p>Column 1, lorem ipsum dolor bla bla dogs and cats</p>
    </div>

    <div class="right">
        <p>Column 3, lorem blops dolor bla laa cats and dogs</p>                        
    </div>
<section> 
```

​CSS：

```
section div {
    float: left;
    width: 50%;

}

section div p {
    background: pink;
    padding: 2.5%;    
}

.left p {
    margin-right: 20px;
}

.right p {
    margin-left: 20px;
} 
```

我已经使用了已经存在的段落，但是您可能会有多个元素，因此您必须添加一个包装元素来解决这个问题。​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T03:57:09.980

我认为最好的解决方案是盒子大小。虽然旧版浏览器在技术上不支持它，但它确实有[polyfills](http://html5please.com/#box-sizing)。

查看[小提琴](http://jsfiddle.net/afhjw/)到以下内容：

CSS（不包括供应商前缀）：

```
html, body {
    background: #000;
    height: 100%;
    width: 100%;
    color: #000;
}    

#columnOne, #columnTwo {
    width:50%;
    height: 100%;
    background: #fff;
    box-sizing: border-box;
}

#columnOne {
    float:left;
    border-right: 20px solid blue;
}

#columnTwo {
    float: right;
    border-left: 20px solid blue;
}​ 
```

HTML：

```
<html>
    <body>        

        <div id="columnOne">HI!</div>
        <div id="columnTwo">HI!</div>

    </body>
</html>  ​ 
```

更多信息[here](http://paulirish.com/2012/box-sizing-border-box-ftw/)和关于polyfills的信息[here](http://html5please.com/#box-sizing)。

玩得开心！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T07:39:00.780

鉴于您严格的浏览器支持要求，您可能需要使用 non-semantic `tables`。尽管您可能已经知道此`table`解决方案，但可以在[此 JSFiddle](http://jsfiddle.net/Sk29A/2/)或下方查看。哦，我还没有测试过，但据我所知，所有这些都应该与 IE6 兼容：

HTML：

```
<table> 
  <tr>
    <td class="column">
        <p>Column 1, lorem ipsum dolor bla bla dogs and cats</p>
    </td>
    <td class="center-column"><div id='ie6-fix'></div></td>
    <td class="column">
        <p>Column 3, lorem blops dolor bla laa cats and dogs</p>                        
    </td>
  </tr>
<table> 
```

​ CSS：

```
.column {
    background: pink;
}
.center-column {
    background-color: #eee;
    width: 100px;
    min-width: 100px;
}
#ie6-fix {
    width: 100px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T03:42:36.080

我建议你使用像 YAML 这样健壮的 css 框架。

它允许您开发具有 2 或 3 列的列式响应式布局。因此，您可以专注于艺术和开发，而不是尝试解决跨平台问题。

看看这个： [http ://www.yaml.de/demos/flexible-columns.html](http://www.yaml.de/demos/flexible-columns.html)

# ruby-on-rails - Nested_form gem：使用 link_to_add 传递参数

> ID：13106123
> 
> 赞同：2
> 
> 时间：2012-10-28T03:22:09.190
> 
> 标签：ruby-on-rails, nested-forms, nested-form-for

我遇到了nested_form gem 的问题。
我有 5 个模型：类别、组、参数、报价和价值。所以Offers属于Category，Values属于Offers和Parameters，Parameters属于Groups，Groups属于Category。
典型的例子就像

```
类别：汽车
  组：发动机参数
    参数：音量
    参数：功率
  组: 制片人
    参数：生产者名称
    参数：年份
    参数：国家

类别：自行车
  组: 技术参数
    参数：轮径
    参数：重量
  组: 制片人
    参数：生产者名称
    参数：年份
    参数：国家

```

这个参数的值属于offer。也许看起来很复杂，但在我看来，我已经很清楚地说明了它。我想构建表单，允许在用户注册期间创建许多优惠。类别、参数和组是固定的。现在我的模板是：

```
= simple_nested_form_for @user
  Category.all.each do |category|
    span= category.name
    = f.simple_fields_for :offers do |f_offer|
    = f_offer.input :category_id, :as => :hidden
    - category.groups.each do |group|
      span= group.name
      - if f_offer.object.values.where("parameter_id IN (?)", group.parameters).empty?
        - group.parameters.each do |parameter|
          - variant.values.build(:parameter_id => parameter.id)
      / In this partial inputs for offer values in format parameter_name: input_field
      = render :partial => 'values', :locals => { :f_offer => f_offer,
          :f_group => group }
    = f_variant.link_to_remove t("views.remove_variant")
  = f.link_to_add "Add offer", :offers 
```

它几乎可以正常工作，但问题是当我单击“添加报价”链接时 - 添加了最后一个类别的参数的表单。因此，对于上面给出的示例，当我为汽车类别单击“添加报价”时 - 我看到一堆参数不是汽车，而是自行车！看起来我应该将类别传递给 simple_fields_for 或类似的东西，但我不知道该怎么做。
谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T06:42:39.100

我找到了解决此问题的方法：我添加了一个新操作，例如“generate_form”，在其中创建新用户并向其添加新报价，并在视图中为该新用户生成表单，并为其提供嵌套字段。

当用户单击“添加报价”链接时，我对此 generate_form 操作执行 ajax 请求，传递类别 id，但作为响应，我得到了，所以我剪切了嵌套表单，使用 jQuery 很容易，而且我需要将零报价 id 替换为随机生成，这两个都是由ajax“完成”回调执行的。

也许相当丑陋的方式，但最终它的工作原理。如果有人可以提供另一种解决方案 - 我会很高兴看到它。

# php - CodeIgniter 从数据库中表单数据并按顺序设置输入值

> ID：13106126
> 
> 赞同：2
> 
> 时间：2012-10-28T03:22:25.880
> 
> 标签：php, codeigniter

我有来自数据库的产品数据并尝试在编辑表单中设置输入值但不知道如何管理 for 和 foreach 循环:(这是我正在尝试的代码

```
<table id="dyTable">
      <thead>
      <th style="width:20px; padding-right:10px;">No.</th>
      <th style="width:70px; padding-right:10px;">Quantity</th>
      <th style="width:290px; padding-right:10px;">Product</th>
      <th style="width:100px; padding-right:10px;">Unit Price</th>
      </thead>
      <tbody>

      <?php 

        for($r=1; $r<=$pr_value; $r++){
            foreach($inv_products as $prod):

            $quantity.$r = array('name' => $quantity.$r,
                'id' => $quantity.$r,
                'type' => 'text',
                'value' => $this->form_validation->set_value($prod->quantity),
                'class'       => 'text',
                'style' => 'width: 70px; text-align: center;'
            );
            $product.$r = array('name' => $product.$r,
                'id' => $product.$r,
                'type' => 'select',
                'value' => $this->form_validation->set_select($prod->product_id),
                'class' => 'chzn-select',
                'style' => 'width:300px;'
            );
            $unit_price.$r = array('name' => $unit_price.$r,
                'id' => $unit_price.$r,
                'type' => 'text',
                'value' => $this->form_validation->set_value($prod->unit_price),
                'class'       => 'text',
                'style' => 'width: 100px; text-align: right;'
            );
            ?>

              <tr id="line<?php echo $r; ?>">
              <td style="width: 20px; text-align: center; padding-right: 10px; padding-right: 10px;"><?php echo $r; ?></td>
              <td><?php echo form_input($quantity.$r);?></td>
              <td><?php echo form_dropdown($product.$r);  ?></td>
              <td><?php echo form_input($unit_price.$r);?></td>
              </tr>
            <?php

            endforeach;
        } 
        ?>

      </tbody> 
```

现在 $r 变成了一个数组。任何想法如何实现这一点。在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T10:30:03.157

$r 循环是不必要的，并且您正在以您的方式多次运行数据。

```
$r=0
foreach($inv_products as $prod)
{
    $r++
    //create your table rows here
} 
```

虽然老实说，我认为将数据发送回模型会有点让人头疼，但我个人列出产品然后给每个产品自己的编辑页面，而不是试图在一个页面上做多个。

# c - 应用信号量后，代码仍然无法按预期工作

> ID：13106127
> 
> 赞同：0
> 
> 时间：2012-10-28T03:22:40.547
> 
> 标签：c, semaphore

下面的代码应该输出 NITER * 2，但似乎仍然没有互斥锁工作，知道吗？

以及为什么clang给我以下警告：

```
semaphore-example-add-semaphore.c:24:1: warning: control reaches end of non-void
      function [-Wreturn-type]
}
^
1 warning generated. 
```

代码：

```
#include <stdio.h>
#include <pthread.h>
#include <stdlib.h>
#include <semaphore.h>

#define NITER 1000000

int count = 0;

sem_t mutex;

void * ThreadAdd(void * a)
{
    int i, tmp;
    for(i = 0; i < NITER; i++)
    {
        sem_wait(&mutex);
        tmp = count;
        tmp = tmp + 1;
        count = tmp;
        sem_post(&mutex);
    }
}

int main(int argc, char * argv[])
{
    pthread_t tid1, tid2;
    sem_init(&mutex, 0, 1);
    if(pthread_create(&tid1, NULL, ThreadAdd, NULL))
    {
        printf("\n ERROR create thread 1");
        exit(1);
    }
    if(pthread_create(&tid2, NULL, ThreadAdd, NULL))
    {
        printf("\n ERROR create thread 2");
        exit(1);
    }
    if(pthread_join(tid1, NULL))
    {
        printf("\n error joining thread");
        exit(1);
    }
    if(pthread_join(tid2, NULL))
    {
        printf("\n ERROR joining thread");
        exit(1);
    }
    if(count < 2 * NITER)
        printf("\n BOOM! count is [%d], should be %d\n", count, 2 * NITER);
    else
        printf("\n OK! count is [%d]\n", count);
    pthread_exit(NULL);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T04:11:24.177

clang 错误是因为 ThreadAdd 被声明为 void * 并且不返回任何内容。只需返回 0。

一个问题是 sem_wait 和 sem_post 可能会失败。在这种情况下，它们返回 -1，您需要检查 errno 的原因。您的代码对我来说看起来不错，所以我在两台机器上进行了尝试： - SE Linux，工作正常 - Mac，sem_wait 失败。
所以直接的问题是你没有检查返回值。

我发现另一篇文章指出 OS X（是的 Apple）不支持 sem_init，但支持 sem_open。我使用 sem_open 尝试了您的代码并且它有效。我能看到的文档中没有任何暗示是这种情况。我会链接到另一篇文章，但我在机器更改中丢失了地址......

我看到杰克也发布了这个......

# javascript - 正则表达式以嵌套可排序形式更新表单输入多个索引

> ID：13106129
> 
> 赞同：1
> 
> 时间：2012-10-28T03:22:52.257
> 
> 标签：javascript, jquery, regex, forms

我有一个简单的表单输入列表，它们是可排序的，用户可以向表单添加更多行。

名称属性相当简单：

```
field_id_3[0][options][html_data]
field_id_3[1][options][html_data]
field_id_3[2][options][html_data] 
```

我有一个相当简单的 updateindexes 方法，如下所示：

```
$container.find('.' + opts.rowClass).each(function(rowCount) {

  regex = /^(.*)\[(?:[0-9]+)\](.*)$/;

  $(this).find('input, select, textarea').each(function(fieldCount) {
    $field = $(this);
    if ($field.attr('name')) {
      var fieldName = $field.attr('name').replace(regex, '$1[' + rowCount + ']$2');
      $field.attr('name', fieldName);
    }
  });
}); 
```

这一切似乎都运行良好，但现在我需要引入新元素，这些元素也是可排序和嵌套的。我现在正在编写第二个 updateindexes 方法，它只处理嵌套索引。

名称属性沿线

```
field_id_3[0][options][html_data]
field_id_3[1][options][html_data]
field_id_3[2][options][list_items][0][item]
field_id_3[3][options][list_items][1][item]
field_id_3[4][options][html_data] 
```

我坚持的是修改正则表达式模式，以便第一个数组索引的替换和任何第二个数组索引在两个更新索引方法中相互独立。

如何使用正则表达式独立定位第一个 [key] 属性和第二个 [key] 属性？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T06:44:29.540

这是与您要求的方法略有不同的方法，其中工作函数根据传递给它的参数重新编号所有索引。

这是工人功能：

```
var indexFinder = /\[(?:[0-9]+)\]/g; //defined once to give reIndex() a little less work to do.

function reIndex(str) {
    str = str.replace(indexFinder, '[]');
    for(var i=1; i<arguments.length; i++){
        str = str.replace('[]', '['+arguments[i]+']');
    }
    return str;
} 
```

**[演示](http://jsfiddle.net/QyELs/)**

接下来的挑战是设计一个循环结构，从中调用 reIndex()。

假设 list_items 被分组在合适的容器中，可能是这样的：

```
var itemGroupSelector = '.itemGroup'; //or similar
var fieldSelector = 'input, select, textarea';

$container.find('.' + opts.rowClass).each(function(rowCount, row) {
    var $row = $(row);
    $row.find(fieldSelector).each(function(i, field) {
        $field = $(field);
        if ($field.attr('name')) {
            var fieldName = reIndex($field.attr('name'), rowCount);
            $field.attr('name', fieldName);
        }
    });

    $row.find(itemGroupSelector).each(function(itemCount, itemGroup) {
        $(itemGroup).find(fieldSelector).each(function(i, field) {
            $field = $(field);
            if ($field.attr('name')) {
                var fieldName = reIndex($field.attr('name'), rowCount, itemCount);
                $field.attr('name', fieldName);
            }
        });
    });
}); 
```

还有一些工作要做，但我相信这可以发挥作用。

# c - NtFsControlFile 函数错误

> ID：13106131
> 
> 赞同：0
> 
> 时间：2012-10-28T03:23:41.350
> 
> 标签：c, winapi, visual-c++

我有这个代码：

```
// page1.h

NTSTATUS (__stdcall *NtFsControlFile)( 
                    HANDLE FileHandle,
                    HANDLE Event,                   
                    PIO_APC_ROUTINE ApcRoutine,     
                    PVOID ApcContext,               
                    PIO_STATUS_BLOCK IoStatusBlock, 
                    ULONG FsControlCode,
                    PVOID InputBuffer,              
                    ULONG InputBufferLength,
                    PVOID OutputBuffer,     
                    ULONG OutputBufferLength
            );

ULONG (__stdcall *RtlNtStatusToDosError) (
        IN NTSTATUS Status
        ); 
```

然后在*page2.cpp*：

```
page2.cpp
VOID LocateNativeEntryPoints()
{
    //
    // If we're on Win9x, just return
    //
    if( GetVersion() >= 0x80000000) return;

    //
    // Load the NTDLL entry point we need
    //
    if( !(NtFsControlFile = (void *) GetProcAddress( GetModuleHandle(TEXT("ntdll.dll")),
            "NtFsControlFile" )) ) {

        _tprintf(TEXT("\nCould not find NtFsControlFile entry point in NTDLL.DLL\n"));
        exit(1);
    }
    if( !(RtlNtStatusToDosError = (void *) GetProcAddress( GetModuleHandle(TEXT("ntdll.dll")),
                            "RtlNtStatusToDosError" )) ) {

        _tprintf(TEXT("\nCould not find RtlNtStatusToDosError entry point in NTDLL.DLL\n"));
        exit(1);
    }
} 
```

我有这些错误`if(!NtFsControlFile = and if( !(RtlNtStatusToDosError =`，

```
error C2440: '=' : cannot convert from 'void *' to 'NTSTATUS (__stdcall *)(HANDLE,HANDLE,PIO_APC_ROUTINE,PVOID,PIO_STATUS_BLOCK,ULONG,PVOID,ULONG,PVOID,ULONG)'
         Conversion from 'void*' to pointer to non-'void' requires an explicit cast

error C2440: '=' : cannot convert from 'void *' to 'ULONG (__stdcall *)(NTSTATUS)'
         Conversion from 'void*' to pointer to non-'void' requires an explicit cast 
```

原来的*page2*是C语言文件。我需要转换它以及如何做或如何解决问题。

非常感谢。

似乎可行的解决方案（没有像 C 语言那样自动转换）：

```
 // a typedef to make casting easier

    typedef NTSTATUS (__stdcall *NtFsControlFilePtr)(
        HANDLE FileHandle,
        HANDLE Event,
        PIO_APC_ROUTINE ApcRoutine,
        PVOID ApcContext,
        PIO_STATUS_BLOCK IoStatusBlock,
        ULONG FsControlCode,
        PVOID InputBuffer,
        ULONG InputBufferLength,
        PVOID OutputBuffer,
        ULONG OutputBufferLength);

// the actual pointer to function

NtFsControlFilePtr NtFsControlFile;

// and the GetProcAddress call

    if( !(NtFsControlFile = reinterpret_cast<NtFsControlFilePtr>( GetProcAddress( GetModuleHandle(TEXT("ntdll.dll")),
            "NtFsControlFile" ))) ) {

        _tprintf(TEXT("\nCould not find NtFsControlFile entry point in NTDLL.DLL\n"));
        exit(1);
    } 
```

此解决方案有效，但您得到：

C4191：'reinterpret_cast'：不安全的转换

与 /WALL

避免警告：

```
if( !(NtFsControlFile = reinterpret_cast<NtFsControlFilePtr>( reinterpret_cast< void* >( GetProcAddress( GetModuleHandle(TEXT("ntdll.dll")), 
        "NtFsControlFile" )))))  {

        _tprintf(TEXT("\nCould not find NtFsControlFile entry point in NTDLL.DLL\n"));
        exit(1);
    }

   if( !(RtlNtStatusToDosError = reinterpret_cast<RtlNtStatusToDosErrorPtr>( reinterpret_cast< void* >( GetProcAddress( GetModuleHandle(TEXT("ntdll.dll")), 
        "NtFsControlFile" )))))  {

        _tprintf(TEXT("\nCould not find NtFsControlFile entry point in NTDLL.DLL\n"));
        exit(1);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-01T12:54:18.387

如果您有纯 c 代码，则可以稍微更改类型转换，我的意思是：

1.  声明变量：

    ```
    typedef NTSTATUS (__stdcall *NT_FS_CONTROL_FILE)(IN HANDLE FileHandle,
                          IN  HANDLE Event, IN PIO_APC_ROUTINE  ApcRoutine,
                          IN PVOID ApcContext, OUT PIO_STATUS_BLOCKIoStatusBlock,
                          IN ULONG FsControlCode, IN PVOID InputBuffer,
                          IN ULONG InputBufferLength, OUT  PVOID OutputBuffer,
                          IN ULONG OutputBufferLength);
    NT_FS_CONTROL_FILE nt_fs_control_file; 
    ```

    那你需要

    ```
    nt_fs_control_file = GetProcAddress( 
    ```

    或者

    ```
    nt_fs_control_file = (NT_FS_CONTROL_FILE)GetProcAddress 
    ```

2.  调用你的函数：

    ```
    NTSTATUS status = nt_fs_control_file(....); 
    ```

# ios - iOS MapKit 抛出错误：“dyld：惰性符号绑定失败：找不到符号：\314CGRectIsEmpty”

> ID：13106133
> 
> 赞同：0
> 
> 时间：2012-10-28T03:23:55.443
> 
> 标签：ios, mapkit

我开始在目标 C 中开发自己的导航地图，但最近使用 MapKit 陷入了死胡同。

我有 XCode 4.5，iOS 目标设置为 6.0。和 MapKit 框架通过 Link Binary With Libraries 加载。

错误如下所示：

```
dyld: lazy symbol binding failed: Symbol not found: \314CGRectIsEmpty
  Referenced from: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/MapKit.framework/MapKit
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/CoreGraphics.framework/CoreGraphics

dyld: Symbol not found: \314CGRectIsEmpty
  Referenced from: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/MapKit.framework/MapKit
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/CoreGraphics.framework/CoreGraphics 
```

当我开始时，它工作得很好，但后来我添加了工具栏项和 currentLocation 按钮等功能，这个疯狂的错误开始出现。首先，我认为我的代码有问题。但是后来我有一个可以工作的程序，并添加了功能，它开始抛出这个错误，当我把它放回去时，错误仍然存​​在。这是 MapViewController 的代码。

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{

}

- (void)viewWillAppear:(BOOL)animated {

    // 1
    CLLocationCoordinate2D zoomLocation;
    zoomLocation.latitude = 50.07499;
    zoomLocation.longitude= 14.43976;
    // 2
    MKCoordinateRegion viewRegion = MKCoordinateRegionMakeWithDistance(zoomLocation, 10000, 10000);
    // 3
    MKCoordinateRegion adjustedRegion = [self.mapView regionThatFits:viewRegion];
    // 4
    [self.mapView setRegion:adjustedRegion animated:YES];
    if (self.mapView.userLocationVisible){
        self.currentLocationButton.enabled = YES;
    }else{
        self.currentLocationButton.enabled = NO;
        timer = [NSTimer scheduledTimerWithTimeInterval:5.00 target:self selector:@selector(checkGeolocationAvailible) userInfo:nil repeats:YES];
        [timer fire];
    }

}

- (IBAction)checkGeolocationAvailible {
    if (self.mapView.userLocationVisible){
        self.currentLocationButton.enabled = YES;
        [timer invalidate];
    }
}

- (IBAction)showCurrentLocation {
    if (self.mapView.userLocationVisible){
        [self.mapView setCenterCoordinate:self.mapView.userLocation.coordinate];
    }
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
} 
```

# wordpress - Wordpress 上的 Facebook Like 按钮内容储物柜

> ID：13106138
> 
> 赞同：0
> 
> 时间：2012-10-28T03:25:54.627
> 
> 标签：wordpress, facebook-like

我一直在拔头发试图弄清楚这一点。希望有人可以帮忙。

我正在尝试内容锁定此站点：blog.funnyhunt.com

这个想法是，当有人单击“喜欢”按钮（效果很好）然后显示内容时，人们应该喜欢我的 Facebook 页面……但最后一点不起作用。

现在这是奇怪的部分......对于某些人来说它可以正常工作，而对于其他人来说它不会显示内容它只是让他们喜欢页面并且内容保持锁定状态。

我已经用一系列不同的储物柜对此进行了测试，并且我一直获得相同的体验，有时它有效，有时则无效。

那么发生了什么？？我已经尝试使用不同的 Facebook 帐户、代理和清除 cookie 来测试它......但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:00:20.670

我用 JavaScript 开发了一个内容储物柜，具有以下功能：

*   SEO（搜索引擎优化）：因为我们希望搜索引擎能够读取内容并对其进行索引，所以我们将它们隐藏起来。
*   标准社交小部件：我们会将这些内容锁定功能添加到 Facebook、Twitter、Google+ 和 LinkedIn 原生源代码中。
*   软行为：由于我们不想打扰我们的忠实读者，一旦内容被解锁，解​​锁将影响网站上所有被屏蔽的内容。
*   源代码是 JavaScript，因此可以将它集成到每个网页上（我们将只使用 jQuery 来实现视觉效果）。

该实现类似于上面引用的工具之一，即使用 cookie。

这是代码，如果您想查看它的实际效果或它与更多社交小部件的集成，请访问 [如何显着增加社交媒体对您网站的 LIKE](http://www.idea-r.it/Blog.aspx/increase-social-media-likes)

```
<head>
     <script src="contentslocker.js" type="text/javascript"></script>
 </head>
 <body>
     ...
     <div class="irBodyLocker">
         <p>The rest of the article is locked</p>
         <p>To continue reading, become our friend pressing one of the buttons</p>

         ...put here the social widgets

     </div>
     <div class="irLockedBody" style="display:none;">

         ...put here the locked contents

     </div>
 </body>

The IdeaR.ContentsLocker.lockContents function is invoked by the script.

IdeaR.ContentsLocker.lockContents = function ()
 {
     $(function ()
     {
         if (IdeaR.ContentsLocker.socialActivity() == true)
         {
             $('div.irBodyLocker').hide();
             $('div.irLockedBody').show();
         }
         // Add social handlers only if contents are locked
         else
             $(function ()
             {
                 // Facebook
                 var exsistingFbAsyncInit = window.fbAsyncInit;
                 if (exsistingFbAsyncInit == null)
                     window.fbAsyncInit = 
                         IdeaR.ContentsLocker._subscribeFacebookLike();
                 else
                     window.fbAsyncInit = function ()
                     {
                         exsistingFbAsyncInit();
                         IdeaR.ContentsLocker._subscribeFacebookLike();
                     };

                 // Twitter
                 twttr.ready(function (twttr)
                 {
                     twttr.events.bind('tweet', 
                         IdeaR.ContentsLocker.ontwitteraction);
                     twttr.events.bind('follow', 
                         IdeaR.ContentsLocker.ontwitteraction);
                 });
             });
     });
 };

 IdeaR.ContentsLocker.socialActivity = function ()
 {
     return IdeaR.ContentsLocker._getCookie(
         IdeaR.ContentsLocker._socialAction, 'false') == 'true' ? true : false;
 };

 IdeaR.ContentsLocker._getCookie = function (name, defaultValue)
 {
     var docCookies = document.cookie.split(";");
     for (var i = 0; i < docCookies.length; i++)
     {
         var equalPos = docCookies[i].indexOf('=');
         var currentName = unescape(docCookies[i].substr(0, equalPos));
         currentName = currentName.replace(/^\s+|\s+$/g, '');
         if (currentName == name)
         {
             var value = docCookies[i].substr(equalPos + 1);
             return unescape(value);
         }
     }
     return defaultValue;
 };

 IdeaR.ContentsLocker._socialAction = 'SocialAction';

 IdeaR.ContentsLocker._subscribeFacebookLike = function ()
 {
     FB.Event.subscribe('edge.create', function (targetUrl)
     {
         IdeaR.ContentsLocker.unlockContents();
     });
 };

 IdeaR.ContentsLocker.ontwitteraction = function (intent_event)
 {
     if (intent_event)
         IdeaR.ContentsLocker.unlockContents();
 };

IdeaR.ContentsLocker.unlockContents = function ()
 {
     $('div.irBodyLocker').slideUp(400, function ()
     {
         $('div.irLockedBody').fadeIn();
     });
     IdeaR.ContentsLocker.saveSocialAction();
 };

 IdeaR.ContentsLocker.saveSocialAction = function ()
 {
     IdeaR.ContentsLocker._setCookie(
         IdeaR.ContentsLocker._socialAction, true, 10000);
 };

 IdeaR.ContentsLocker._setCookie = function (name, value, expirationDays)
 {
     var cookieString = escape(name) + '=' + escape(value);
     if (expirationDays != null)
     {
         var expirationDate = new Date();
         expirationDate.setDate(expirationDate.getDate() + expirationDays);
         cookieString += '; expires=' + expirationDate.toUTCString();
     }
     document.cookie = cookieString;
 }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T09:54:13.190

我推荐以下插件：[http ://codecanyon.net/item/like-2-unlock-for-wordpress/2858703?ref=onepress](http://codecanyon.net/item/like-2-unlock-for-wordpress/2858703?ref=onepress)

# asp.net - 从 VB executeScalar 转移到动态选择

> ID：13106142
> 
> 赞同：0
> 
> 时间：2012-10-28T03:27:32.490
> 
> 标签：asp.net, sql-server, vb.net

我有一个菜单，其中包含使用 VB 选择的图像按钮，该方法使用一种方法，如果单击该菜单项，则选择显示的项目列表的第一个图像。我想要做的是显示一个随机图像。目前VB中有这种方法控制显示的图像。

```
 Dim conn As New SqlConnection()
        Dim cmd As New SqlCommand()

        conn.ConnectionString = FlashDB.ConnectionString
        cmd.Connection = conn
        cmd.CommandType = CommandType.StoredProcedure
        cmd.CommandText = "get_first_flash"

        Dim idParam As New SqlParameter("@collectionID", CollectionID)
        cmd.Parameters.Add(idParam)

        Dim result As Object
        Dim previousConnectionState As ConnectionState = conn.State
        Try
            If conn.State = ConnectionState.Closed Then
                conn.Open()
            End If
            result = cmd.ExecuteScalar()

        Finally
            If previousConnectionState = ConnectionState.Closed Then
                conn.Close()
            End If
        End Try

        Return "images/thumbnails/" & result

   //In the html
   <a href='viewproject.aspx?swfID=<%# Eval("swfID") %>' >
         <img src="images/thumbnails/<%# Eval("thumbnail") %>"
              height="150" width="180" /></a> 
```

有没有一种不同的方法可以用来跳过使用 executeScalar 给我与第一行中的图像相对的动态响应。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T12:15:53.850

我认为您可以创建一个随机数生成器，其种子是记录总数

# ios - RestKit：测试对象映射，“从...映射时失败”

> ID：13106144
> 
> 赞同：1
> 
> 时间：2012-10-28T03:28:24.897
> 
> 标签：ios, unit-testing, restkit

正如这个问题的标题所示，我正在使用 RestKit，我想使用内置测试类来测试我的对象映射。我编写了一个小型应用程序，它从（本地）Web api 获取用户对象作为 json。这部分有效，但是，我的测试用例告诉我它没有 - 嗯！

我正在[使用 RestKit 指南进行 Blake Watters 单元测试](https://github.com/RestKit/RestKit/wiki/Unit-Testing-with-RestKit)，但我无法成功。让我再次澄清一下，实际的应用程序工作正常（我能够毫无问题地将 json 从 API 映射到 User 对象），但是测试用例失败并出现如下所示的错误。因此，不知何故，我怀疑我的测试是错误的。

这是一些代码：

### 错误信息

```
<RKMappingTest: 0xa242130>: failure when mapping from {
user =     {
    "first_name" = Kasper;
    id = 21;
    "last_name" = Fueled;
};
} to <User: 0xa23d730> with mapping <RKObjectMapping:0xa23d250 objectClass=User keyPath mappings => (
"RKObjectKeyPathMapping: id => userID",
"RKObjectKeyPathMapping: first_name => first_name",
"RKObjectKeyPathMapping: last_name => last_name",
)>. 
```

我注意到没有引用 id 键，而 first_name 和 last_name 是，但我不确定它是否有任何区别。

### user.json（更新：删除逗号）

```
{ "user": {
       "id":21,
       "first_name":"Kasper",
       "last_name":"Fueled"
       }
} 
```

### user.json（旧）

```
{ "user": {
       "id":21,
       "first_name":"Kasper",
       "last_name":"Fueled",
       }
} 
```

### 用户.h

```
@property (strong, nonatomic) NSNumber *userID;
@property (strong, nonatomic) NSString *first_name;
@property (strong, nonatomic) NSString *last_name; 
```

### 用户映射

```
+ (RKObjectMapping *)objectMapping {
    return [RKObjectMapping mappingForClass:[User class] usingBlock:^(RKObjectMapping *mapping) {
        [mapping mapKeyPath:@"id" toAttribute:@"userID"];
        [mapping mapKeyPath:@"first_name" toAttribute:@"first_name"];
        [mapping mapKeyPath:@"last_name" toAttribute:@"last_name"];
    }];
} 
```

### 测试用例

```
- (void)testMapping {
    id parsedJSON = [RKTestFixture parsedObjectWithContentsOfFixture:@"user.json"];
    RKMappingTest *test = [RKMappingTest testForMapping:[User objectMapping] object:parsedJSON];

    [test expectMappingFromKeyPath:@"user.first_name" toKeyPath:@"first_name"];

    STAssertNoThrow([test verify], nil);
} 
```

夹具是按照布莱克指南中的描述创建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:55:32.543

好吧，虽然很尴尬，但我不会发布我的问题的解决方案。我的假设是正确的，即我的测试设置有问题，而不是我正在测试的代码。事实证明，**我的 json 固定装置中最后一个键值对的末尾有一个逗号**。我手工编写了 json 夹具，而不是直接从我的 API 的输出中复制它。因此，吸取的教训必须是：

## 将您尝试为其测试对象映射的 json 输出复制/粘贴到您的夹具文件中。不要只是手动输入 - 可能会出现拼写错误等。

希望我是社区中唯一一个这样做（或做过！）这样做的人。

# c# - 一步一步的 oAuth rest C# winform 示例

> ID：13106146
> 
> 赞同：9
> 
> 时间：2012-10-28T03:28:38.270
> 
> 标签：c#, winforms, magento, oauth

我已经尝试了一段时间，需要从头开始逐步找到为 magento 创建消费者应用程序的方法。

我看过以下内容：

*   [Twitter 的 Spring.NET 社交扩展](http://springframework.net/social-twitter/)

*   [开发定义的 OAuth](http://code.google.com/p/devdefined-tools/wiki/OAuth)

*   [使用 .NET 的 Twitter OAuth 身份验证](http://www.codeproject.com/Articles/247336/Twitter-OAuth-authentication-using-Net)

还有许多其他人，但目前尚不清楚真正要做什么。我需要做的是在 C# 中创建一个 winform，它需要将其余 api 用于 magento 和 oAuth。真的在这里我有点失落。

作为消费者，我真正得到的信息是

```
String callbackUrl = "liconnect://success";
String temporaryCredentialsRequestUrl = "http://domain.xxx/oauth/initiate?oauth_callback=" + HttpUtility.UrlEncode(callbackUrl);
String adminAuthorizationUrl = "http://domain.xxx/admin/oauth_authorize";
String accessTokenRequestUrl = "http://domain.xxx/oauth/token";
String apiUrl = "http://domain.xxx/api/rest";
String consumerKey = "KKKKKKKKKKKKKKK";
String consumerSecret = "SSSSSSSSSSSSSSSSSSS"; 
```

"liconnect://success"; 是去某个地方通过，但我还没有走那么远，哈哈……

oauth_token 和 oauth_token_secret 需要保存，所以我不知道是否可以从 in 中存储？但问题是，如果您不知道 magento 路径，您也必须登录。页 magento 认为有问题。我猜想对标题做..所以这条路线没有奏效。

我也尝试过只做一个帖子并使用 System.Security.Cryptography 但这也没有奏效。

**问题：** **任何疯狂的程序员都会有一个坚实的“如何”或者想要接受挑战为人们在这里放置一个？** 有很多人在这里问同样的问题。

* * *

## **更新**

好吧，对于那些似乎无法弄清楚这一点的人来说，有办法解决。所以我编写了一个 php 脚本来进行身份验证并将其存储在一个隐藏的文件中。然后，我创建了一个登录名，这就是您使用 C# winform 获得的登录名。所以.. 一个简单的例子，但请注意这只是一个例子，因为您应该检查代理并将发布数据加盐以增加安全性。第一次您需要直接进入 php 文件，以便获得保持会话的文件。

这个例子：

```
<?php
/**
 * Example of retrieving the products list using Admin account 
 * via Magento REST API. OAuth authorization is used
 * Preconditions:
 * 1\. Install php oauth extension
 * 2\. If you were authorized as a Customer before this step, clear browser cookies for 'yourhost'
 * 3\. Create at least one product in Magento
 * 4\. Configure resource permissions for Admin REST user for retrieving all product data for Admin
 * 5\. Create a Consumer
 **/
// $callbackUrl is a path to your file with OAuth authentication example for the Admin user
session_start();    

//The user name and pass are md5 on the C# side of things and send over like this so it's more then just pass your username and pass
$u="461d544a174bcb5asf2a9fd14576251e169";
$p="c3762e47e025a2e0b6f77afca8da626a81";
if(isset($_POST['username']) && $p == $_POST['pass'] && $u == $_POST['username']){
    $callbackUrl = "http://domain.xxx/quick_look.php";
    $temporaryCredentialsRequestUrl = "http://domain.xxx/oauth/initiate?oauth_callback=" . urlencode($callbackUrl);
    $adminAuthorizationUrl = 'http://domain.xxx/admin/oauth_authorize';
    $accessTokenRequestUrl = 'http://domain.xxx/oauth/token';
    $apiUrl = 'http://domain.xxx/api/rest';
    $consumerKey = 'nar78rw5nlkssddksdflklvkezgdria';
    $consumerSecret = 'mo0lnht5;sdf;lsdgjcfdpgad5';
    //sodoSess is a folder that is hidden and protected via .htaccess
    // note.. secure it or else!!
    function write_session($name,$value){
        $myFile = "sodoSess/".$name.".txt";
        $fh = fopen($myFile, 'w') or die("can't open file sodoSess/".$name.".txt");
        fwrite($fh, $value);
        fclose($fh);
    }

    function read_session($name){
        $myFile = "sodoSess/".$name.".txt";
        $fh = fopen($myFile, 'r') or die("can't open file sodoSess/".$name.".txt");
        $data = fgets($fh);
        fclose($fh);
        return $data;
    }

    if (!isset($_GET['oauth_token']) && read_session('state') == 1) {
        write_session('state',0);
    }
    try {
        $authType = (read_session('state') == 2) ? OAUTH_AUTH_TYPE_AUTHORIZATION : OAUTH_AUTH_TYPE_URI;
        $oauthClient = new OAuth($consumerKey, $consumerSecret, OAUTH_SIG_METHOD_HMACSHA1, $authType);
        $oauthClient->enableDebug();

        if (!isset($_GET['oauth_token']) && read_session('state')=="") {
            $requestToken = $oauthClient->getRequestToken($temporaryCredentialsRequestUrl);
            write_session('secret',$requestToken['oauth_token_secret']);
            write_session('state',1);
            header('Location: ' . $adminAuthorizationUrl . '?oauth_token=' . $requestToken['oauth_token']);
            exit;
        } else if (read_session('state') == 1) {
            $oauthClient->setToken($_GET['oauth_token'], read_session('secret'));
            $accessToken = $oauthClient->getAccessToken($accessTokenRequestUrl);
            write_session('state',2);
            write_session('token',$accessToken['oauth_token']);
            write_session('secret',$accessToken['oauth_token_secret']);
            header('Location: ' . $callbackUrl);
            exit;
        } else {
            $oauthClient->setToken(read_session('token'), read_session('secret'));
            //print_r($_POST);
            if(isset($_POST["addCustomer"])){

                require_once ( "/var/www/html/app/Mage.php" );
                umask(0);
                Mage::app('default');
                $customer = Mage::getModel('customer/customer');
                //$customer  = new Mage_Customer_Model_Customer();
                $password = "321456321456";
                $email = $_POST["email"];
                $firstname = $_POST["firstname"];
                $lastname = $_POST["lastname"];
                $street1 = $_POST["street1"];
                $street2 = $_POST["street2"];
                $city = $_POST["city"];
                $postcode = $_POST["postcode"];
                $telephone = $_POST["telephone"];

                $customer->setWebsiteId(Mage::app()->getWebsite()->getId());
                $customer->loadByEmail($email);
                //Zend_Debug::dump($customer->debug()); exit;
                if(!$customer->getId()) {
                    $customer->setEmail($email);
                    $customer->setFirstname($firstname);
                    $customer->setLastname($lastname);
                    $customer->setPassword($password);
                }
                try {
                    $customer->save();
                    $customer->setConfirmation(null);
                    $customer->save();
                    //Make a "login" of new customer
                    //Mage::getSingleton('customer/session')->loginById($customer->getId());
                    echo "added user";
                }
                catch (Exception $ex) {
                    //Zend_Debug::dump($ex->getMessage());
                }

                //Build billing and shipping address for customer, for checkout
                $_custom_address = array (
                    'firstname' => $firstname,
                    'lastname' => $lastname,
                    'street' => array (
                        '0' => $street1,
                        '1' => $street2,
                    ),
                    'city' => $city,
                    'region_id' => '',
                    'region' => '',
                    'postcode' => $postcode,
                    'country_id' => 'US',
                    'telephone' => $telephone,
                );
                $customAddress = Mage::getModel('customer/address');
                //$customAddress = new Mage_Customer_Model_Address();
                $customAddress->setData($_custom_address)
                            ->setCustomerId($customer->getId())
                            ->setIsDefaultBilling('1')
                            ->setIsDefaultShipping('1')
                            ->setSaveInAddressBook('1');
                try {
                    $customAddress->save();
                }
                catch (Exception $ex) {
                    //Zend_Debug::dump($ex->getMessage());
                }
                Mage::getSingleton('checkout/session')
                    ->getQuote()
                    ->setBillingAddress(Mage::getSingleton('sales/quote_address')->importCustomerAddress($customAddress));

                //echo $_POST["firstname"]." ".$_POST["lastname"]." <br/>-- ".$_POST["email"]." <br/>MADE IT!";

            }else{
                /* call class to handle everything */
                //for now what is the stock level here?
                $resourceUrl = "$apiUrl/products?filter[1][attribute]=sku&filter[1][in]=".$_POST['sku'];
                if(isset($_GET['p_id']))$resourceUrl .="/".$_GET['p_id'];
                $oauthClient->fetch($resourceUrl, array(), 'GET', array('Content-Type' => 'application/json'));

                $productsList = json_decode($oauthClient->getLastResponse());
                //print_r($productsList);
                foreach($productsList as $item){
                    $resourceUrl = "$apiUrl/stockitems/".$item->entity_id;
                    $oauthClient->fetch($resourceUrl, array(), 'GET', array('Content-Type' => 'application/json'));
                }

                $item = json_decode($oauthClient->getLastResponse());
                echo "<h1>currently there is</h1>".round($item->qty);
            }   
        }
    } catch (OAuthException $e) {
        print_r($e->getMessage());
        echo "<br/>";
        print_r($e->lastResponse);
    }
}else{
    echo "fail";
}
?> 
```

现在在另一边.. Form1.cs 中的 C# *（您的事件方法所在的位置）*

```
 private void button5_Click(object sender, EventArgs e)
    {
            var myValue = Microsoft.VisualBasic.Interaction.InputBox("What is the sku of the itme you wish to find", "Look product", "");
            if (myValue != "") {
                sendPost("&sku=" + myValue);
            }
    }
  public void sendPost(String postData) {
        //step 1 talk with site
        WebRequest req = WebRequest.Create("http://domain.xxx/quick_look.php");
        string MainPostData = "username=YOURUSERNAME_MD5&pass=YOURPASSWORD_MD5";

        byte[] send = Encoding.Default.GetBytes(MainPostData + (!String.IsNullOrWhiteSpace(postData) ? "&" + postData.TrimStart('&') : ""));
        req.Method = "POST";
        req.ContentType = "application/x-www-form-urlencoded";
        req.ContentLength = send.Length;
        //this is where you salt the data by adjusting the header 
        //then testing for that adjustment

        Stream sout = req.GetRequestStream();
        sout.Write(send, 0, send.Length);
        sout.Flush();
        sout.Close();

        WebResponse res = req.GetResponse();
        StreamReader sr = new StreamReader(res.GetResponseStream());
        string returnvalue = sr.ReadToEnd();
        HtmlAgilityPack.HtmlDocument hDoc = new HtmlAgilityPack.HtmlDocument();

        webBrowser1.Navigate("about:blank");
        webBrowser1.Document.OpenNew(true);
        webBrowser1.Document.Write("<html><body>" + returnvalue + "</body></html>");
        webBrowser1.Stop();
    } 
```

你去吧。您现在可以从 C# winfrom 以一种安全的方式连接到 magento api，这将永远（如果您添加盐和代理调整）来破解。我仍然想要一种直接做的方法，但是..这行得通。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T07:01:14.747

您可以选择混合这两种资源以获得解决方案。

此[示例](http://blog.markarteaga.com/OAuthWithSilverlightForWindowsPhone7.aspx)适用于 Windows phone 7，可用于 win 表单应用程序，只需稍作更改（尽管我不敢尝试）和您必须了解的[Megneto API 。](http://www.magentocommerce.com/wiki/doc/webservices-api/introduction_to_rest_api)

Windows Phone 7 示例带有 twitter，应该能够通过更改 Magneto 的 oauth 流 url 来自定义

# c - C：奇怪的打印错误？

> ID：13106150
> 
> 赞同：0
> 
> 时间：2012-10-28T03:30:50.677
> 
> 标签：c

我不明白这是如何工作的。说我有以下内容：

```
void print(char* str, int len)
{
    int i = 0;
    for (i=0; i<len; i++)
    {
        if (str[i]=='\0')
            printf(" ");
        else
            printf("%c", str[i]);
    }
    printf("\n\n");
}

char* sym4 = "=";
char str2[strlen(var)+strlen(sym4)];

unsigned long temp1 = 0x00000008;
unsigned char* nTableSize = (unsigned char*)&temp1;

memcpy(str2, var, strlen(var));
memcpy(str2+strlen(var), sym4, 1);
memcpy(str2+strlen(var)+1, nTableSize, 4);

print(str2, 5);
print(str2, 6); 
```

并运行它会给出输出：

```
var=
var 
```

所以很明显出了点问题（而且它把我的程序的其余部分弄乱了）。为什么 nTableSize 不能以打印 5 个字符导致与 6 个不同的输出的方式正确复制到 str2？...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T03:58:42.537

假设您使用的是 x86 或 x86-64 之类的小端架构，则 4 字节值 0x0000008 在内存中表示为 bytes `08 00 00 00`。您将字节打印为字符，字符 8 是退格字符的 ASCII `'\b'`。

当您将 a 打印`\b`到终端时，终端驱动程序将光标向后移动一个字符，但它实际上并没有写出任何内容——直到您写入下一个字符才会导致它覆盖先前存在的字符。

因此，当您打印出 5 个字节`"var=\b"`时，它会打印出`"var="`并将光标留在`=`符号下方。但是，当您打印出 6 个字节`"var=\b "`时，它会写入`"var="`，将光标移回一位，并`=`用空格覆盖 ，留下`"var "`.

如果您将输出重定向到文件而不是打印到终端，您会看到`08`正在打印的原始字节。

# php - 解析错误：语法错误，意外的 T_VARIABLE php

> ID：13106151
> 
> 赞同：0
> 
> 时间：2012-10-28T03:30:50.950
> 
> 标签：php

> 解析错误：语法错误，第 4 行 /home/content/00/7882800/html/Connections/dueslogin.php 中的意外 T_VARIABLE

试图连接到 godaddy 数据库并且由于 php 错误而无法连接。

```
<?php
        //Variables for connecting to your database.
        //These variable values come from your hosting account.
        $hostname = "Squarepants.db.7882800.hostedresource.com";
        $username = "Squarepants";
        $dbname = "Squarepants";

        //These variable values need to be changed by you before deploying
        $password = "***********";
        $usertable = "Spongebob";
        $username = "username";
        $password = "password";

        //Connecting to your database
        mysql_connect($hostname, $username, $password) OR DIE ("Unable to 
        connect to database! Please try again later.");
        mysql_select_db($Squarepants);

        //Fetching from your database table.
        $query = "SELECT * FROM $usertable";
        $result = mysql_query($query);

        if ($result) {
            while($row = mysql_fetch_array($result)) {
                $name = $row["$yourfield"];
                echo "Name: $name<br>";
            }
        }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T03:46:58.480

我能够在我的计算机上编译这个脚本而没有任何语法错误。

```
$ php yourcodecopiedandpasted.php 
$ php -l yourcodecopiedandpasted.php 
No syntax errors detected in foo.php
$ php --version
PHP 5.3.15 with Suhosin-Patch (cli) (built: Jul 31 2012 14:49:18) 
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2012 Zend Technologies 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T07:17:59.820

第 4 行应该来自包含的文件`Connections/dueslogin.php`

您可能需要发布它，以便我们检查有什么问题。当前文件很好，似乎没有任何错误。

# c++ - 创建 OpenGL 4.3 上下文崩溃 GLX

> ID：13106155
> 
> 赞同：5
> 
> 时间：2012-10-28T03:32:23.060
> 
> 标签：c++, opengl, sdl, sdl-2, glx

我正在使用 SDL2 和 C++11 构建游戏引擎（只是作为个人项目，为了娱乐和练习），我想做的一件事是尝试让图形驱动程序使用最新的支持版本OpenGL，并根据版本改变引擎的图形部分的渲染方式。这样，我可以在相关且有用的地方使用 OpenGL 的最新功能，同时也支持旧硬件。我能想到的方法有两种：

1.  检测最新支持的 OpenGL 版本并使用它，但我想不出任何方法来做到这一点。是的，我试过谷歌。

2.  使用反复试验，我从最新版本开始（4.3，但我的 GTX 460 仅支持最高 4.2，即使我更新了驱动程序），如果失败（我通过检查 SDL 来检测返回 NULL 上下文)，我降低版本号并重试。

我使用的方法（#2）在创建 4.3 上下文后立即失败。我知道我的图形驱动程序现在只支持 4.2，但我曾认为 GLX 旨在引发错误，提供 NULL 上下文，并让您的程序继续运行，但它无法通过上下文创建失败. 我对 GLX 行为方式的假设是否错误？有没有办法在不创建上下文的情况下检测最新的支持版本？

因为我知道有些人更喜欢看到演示错误的完整和最小的源，所以它是：

```
#include <SDL2/SDL.h>
#include <SDL2/SDL_opengl.h>
int main() {
    if( SDL_Init( SDL_INIT_EVERYTHING ) < 0 ) {
        return -1;
    }
    SDL_Window* window = SDL_CreateWindow( "SDL Window", 0, 0, 800, 600, SDL_WINDOW_OPENGL | SDL_WINDOW_SHOWN );
    if( window == nullptr ) {
        return -1;
    }
    unsigned int major = 4;
    unsigned int minor = 3;
    SDL_GLContext context = nullptr;
    while( context == nullptr ) {
        SDL_GL_SetAttribute( SDL_GL_CONTEXT_MAJOR_VERSION, major );
        SDL_GL_SetAttribute( SDL_GL_CONTEXT_MINOR_VERSION, minor );
        context = SDL_GL_CreateContext( window );
        if( context == nullptr ) {
            if( minor == 0 && major > 1 ) {
                --major;
                minor = 9;
            }
            else if( minor > 0 ) {
                --minor;
            }
            else {
                SDL_DestroyWindow( window );
                return -1;
            }
        }
    }
    SDL_Delay( 5000 );
    SDL_GL_DeleteContext( context );
    SDL_DestroyWindow( window );
    return 0;
} 
```

此外，如果我将该代码更改为以 4.2 上下文而不是 4.3 开头，它就可以正常工作。所以错误在于专门创建 4.3 上下文。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-02T15:42:37.770

这有点晚了，但我最近遇到了这个问题（尝试创建 SDL2 不支持的 opengl 上下文时仍然崩溃）

我只是创建了一个虚拟上下文，然后使用该上下文来获取 GL 版本。然后破坏该上下文（除非它正是我想要的）并制作另一个。

```
//Create Dummy Context
context = SDL_GL_CreateContext(window);

//Get OpenGL Version
const GLubyte* sGLVersion =  glGetString(GL_VERSION);

version = (sGLVersion[0]-'0')*10;
version += (sGLVersion[2]-'0');

//Now Check that it can support the version that you want to make and stop if you can't
//or in your case set it to that version

//If you need to make another context destroy the old one
SDL_GL_DeleteContext(context);

//and make a new one
SDL_GL_SetAttribute( SDL_GL_CONTEXT_MAJOR_VERSION, majorVersion );
SDL_GL_SetAttribute( SDL_GL_CONTEXT_MINOR_VERSION, minorVersion );

context = SDL_GL_CreateContext(window); 
```

这也比暴力破解版本号要快，直到你碰巧找到一个可以工作的版本。（您无法通过谷歌搜索找到您的解决方案 1 :)）

'the swine' 误认为默认版本是最大支持的版本（至少在我有它默认为 2.1 的版本中，我有 4.3 可用）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T11:58:52.313

这可能表明 SDL 的 X11_GL_CreateContext() 中存在错误（在网上它说 SDL2 仍处于试验阶段）。您找出支持的 OpenGL 版本的策略是有效的，但是为了让 SDL 为您提供前向兼容的上下文，它首先需要创建一个临时上下文，调用 glXGetProcAddress() 来获取 glCreateContextAttribsARB （如果没有一个活动的 OpenGL 上下文），然后它会尝试初始化您请求的 OpenGL 版本。现在，如果它失败了，它会处理临时上下文并返回 NULL。

我的猜测是它第二次无法创建临时上下文，我建议使用调试信息构建 SDL，并尝试找出 X11_GL_CreateContext() 中失败的确切位置（或至少插入几个 printf）。

另一方面，如果您将 SDL_GL_CONTEXT_MAJOR_VERSION 和 SDL_GL_CONTEXT_MINOR_VERSION 保留为默认值，则您已经获得了最大的 OpenGL 版本。你只是没有得到一个向前兼容的上下文，这意味着它会让一些在未来版本中被认为是“错误”的行为溜走。

此外，一般来说，创建具有最大版本的前向兼容上下文并不是一个好主意。例如，在 OpenGL 3.2 中，向前兼容的配置文件强制使用顶点数组对象，这使得不使用 VAO 的旧代码被破坏。因此，如果为 OpenGL 3.1（或任何其他版本）编写的应用程序试图获得最新的向前兼容配置文件，它实际上可能在将来停止工作。这不是一个好主意。

一种选择是决定使用一个向前兼容的配置文件，这非常有用，因为它会报告有关已弃用功能的错误。如果您真的想使用更多版本，则需要更多代码路径（= 更多版本的游戏引擎）才能这样做。要检测 OpenGL 版本，我建议创建一个虚拟 SDL 窗口，初始化一个简单的 OpenGL 配置文件，获取版本并关闭所有内容，然后使用您决定的版本再次初始化。那应该行得通。

另一种选择是仅将向前兼容的配置文件用于开发，并将简单的旧配置文件用于分发。它是最兼容的并且涉及最少的工作（无论如何您都想忽略发布版本中的大多数 OpenGL 错误 - 错误报告甚至可能被驱动程序禁用）。

# arrays - Numpy 中二维索引方法的效率

> ID：13106162
> 
> 赞同：1
> 
> 时间：2012-10-28T03:34:47.450
> 
> 标签：arrays, numpy

我在 Numpy 中看到了以两种不同方式索引的二维数组。假设我有一个数组`A`，我可以输入`A[0:3, 2:5]`或`A[0:3][:,2:5]`。无论哪种方式，我都会得到相同的 A 片。

我很好奇为什么一个人会选择一个而不是另一个。有速度差异吗？还是一个比另一个更Pythonic？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T03:40:45.360

第一种形式更 Pythonic 和可取，因为它执行一个切片操作。第二种形式实际上切片两次。

在第一种形式中，`A[0:3]`返回一个小于 A 的切片，然后第二个切片操作将第一个切片的结果切片。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T10:41:36.197

*   当你这样做时`A[0:3,2:5]`，你实际上是在做

    ```
    A.__getitem__((slice(0,3),slice(2,5))) 
    ```

    换句话说，您`__getitem__`只调用该方法一次

*   当你这样做时`A[0:3][:,2:5]`，你实际上是在做

    ```
    A.__getitem__(slice(0,3)).__getitem__((slice(0,None), slice(2,5))) 
    ```

    换句话说，您正在 (i) 创建一个临时数组`A[0:3]`并 (ii) 在此临时数组上获取切片。这通常比第一种方法（直接切片）效率低，因此不推荐。【你指的链接好久没更新了，应该是bug……】

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-04T11:29:05.213

我认为使用`A[i,j]`样式而不是`A[i][j]`样式的一个很好的理由是，它可以在切片时轻松寻址整行或整列。

例如，`A[:,0]`将返回第 0 列中的所有值，而`A[:][0]`会给您一个索引超出范围错误。

# python - 更新 matplotlib 图

> ID：13106164
> 
> 赞同：6
> 
> 时间：2012-10-28T03:35:00.213
> 
> 标签：python, matplotlib

我正在尝试按如下方式更新 matplotlib 图：

```
import matplotlib.pyplot as plt
import matplotlib.dates as mdate
import numpy as np

plt.ion()

fig = plt.figure()
ax = fig.add_subplot(111)

for i,(_,_,idx) in enumerate(local_minima):
    dat = dst_data[idx-24:idx+25]
    dates,values = zip(*dat)
    if i == 0:
        assert(len(dates) == len(values))
        lines2d, = ax.plot_date(mdate.date2num(dates), np.array(values), linestyle='-')
    else:
        assert(len(dates) == len(values))
        lines2d.set_ydata(np.array(values))
        lines2d.set_xdata(mdate.date2num(dates))  #This line causes problems.

        fig.canvas.draw()
    raw_input() 
```

第一次通过循环，情节显示得很好。第二次通过循环，我的情节上的所有数据都消失了——如果我不包括这`lines2d.set_xdata`条线，一切都很好（当然除了 x 数据点是错误的）。我看过以下帖子：

[如何更新 matplotlib 中的绘图？](https://stackoverflow.com/questions/4098131/matplotlib-update-a-plot)

和

[更新 matplotlib 中的行](https://stackoverflow.com/questions/11371255/update-lines-in-matplotlib)

但是，在这两种情况下，用户都只更新了`ydata`，我也想更新`xdata`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T03:45:24.860

就像典型的案例一样，写下一个问题的行为激发了我去研究一种我以前没有想到的可能性。x 数据*正在*更新，但绘图范围未更新。当我将新数据放在图上时，一切都超出了范围。解决方案是添加：

```
ax.relim()
ax.autoscale_view(True,True,True) 
```

[（部分参考）](https://stackoverflow.com/a/3215060/748858)

* * *

这是原始问题上下文中的代码，希望有一天对其他人有所帮助：

```
import matplotlib.pyplot as plt
import matplotlib.dates as mdate
import numpy as np

plt.ion()

fig = plt.figure()
ax = fig.add_subplot(111)

for i,(_,_,idx) in enumerate(local_minima):
    dat = dst_data[idx-24:idx+25]
    dates,values = zip(*dat)
    if i == 0:
        assert(len(dates) == len(values))
        lines2d, = ax.plot_date(mdate.date2num(dates), np.array(values), linestyle='-')
    else:
        assert(len(dates) == len(values))
        lines2d.set_ydata(np.array(values))
        lines2d.set_xdata(mdate.date2num(dates))  #This line causes problems.
        ax.relim()
        ax.autoscale_view(True,True,True)
        fig.canvas.draw()
    raw_input() 
```

# php - PHP Pdo 帮助...无法让 pdo fetchall 为我工作

> ID：13106166
> 
> 赞同：-1
> 
> 时间：2012-10-28T03:35:35.253
> 
> 标签：php, mysql, pdo

试图迁移到 php pdo... 有人可以告诉我为什么这段代码不起作用吗？

```
$stmt = $db->prepare("SELECT SUM(aw_score) AS awscoreaw, SUM(hm_score) AS awscoreaw_def FROM nfl_new WHERE away=:away AND date<:date AND Season=:season");

$stmt->bindValue(':away', $row['away'], PDO::PARAM_STR);
$stmt->bindValue(':date', $row['date'], PDO::PARAM_STR);
$stmt->bindValue(':season', $row['Season'], PDO::PARAM_STR);                            
$stmt->execute();
$affected_rows = $stmt->rowCount();
echo $affected_rows.' ';
$rows = $stmt->fetchAll(PDO::FETCH_ASSOC);
echo $rows['awscoreaw_def'].' '.$row['away'].'<br />'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T03:45:19.850

`away`不在您的选择列表中，并且您使用`fetchAll`，您需要迭代结果。

```
$rows = $stmt->fectchAll(PDO::FETCH_ASSOC);

foreach ($rows as $row) {
  echo $row awscoreaw['awscoreaw_def'].' '.$row['awscoreaw'].'<br />';
} 
```

# html - HTML 输入清理：用右单引号替换 DB 中名称字段的单引号是否合理？

> ID：13106168
> 
> 赞同：0
> 
> 时间：2012-10-28T03:36:58.733
> 
> 标签：html, replace, storage, quote, sanitize

例如，达西变成达西。

Bing 和 Google 的处理方式似乎都与 ' 相同。如果是这样，是否有任何功能性理由不通过在将其保存到数据库之前将其替换为单引号来清理与单引号相关的名称字段？从而节省每次在 HTML 页面上显示时都必须对其进行编码？

# wordpress - 使用没有 php 的免费 wordpress 主题 HTML/CSS

> ID：13106169
> 
> 赞同：1
> 
> 时间：2012-10-28T03:37:11.183
> 
> 标签：wordpress, jsp

我有一个具有 JSP 页面的 Java Web 应用程序。我想给它添加 wordpress 主题 HTML/CSS/JS。

我下载了一个免费的 wordpress 响应主题，但没有一个 HTML 文件。所有文件都是 php 文件，我不知道如何将它添加到我的 JSP 页面。我不能按原样使用主题，因为它有 PHP 文件，而我的 tomcat 服务器不理解 PHP。

有没有其他方法可以在没有所有 php.ini 的情况下获取 HTML、CSS 和 JS 文件。我知道我们可以查看主题页面的源代码并直接复制它。我只是想知道是否有任何其他方式可以将主题添加到我的 JSP 页面。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T03:40:37.157

您必须使用此模板从 .php 文件中删除 HTML 部分。还要检查您下载的模板文件中的 .css 中的代码，您可能需要使用这些 .css 文件调整一些图像路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T12:03:36.033

从该模板下载中，您要复制的只是：

媒体文件、所有图像、css 文件和任何 js 文件。

然后复制构成模板的 3 个主要 wordpress 文件，

*   头文件.php
*   边栏.php
*   页脚.php

将这 3 个文件中的所有代码复制到一个空白文档中。删除所有 wordpress 方法调用，并用您的文件结构链接替换它们

完成后，您应该能够在浏览器中查看您的页面并检查丢失的文件等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T03:40:49.177

您可以查看 twitter bootstrap 项目甚至 HTML5 Boilerplates

1.  [引导程序](http://twitter.github.com/bootstrap/)
2.  [Html5 样板](http://html5boilerplate.com/)

# mysql - 在mysql中查找相似的行

> ID：13106173
> 
> 赞同：1
> 
> 时间：2012-10-28T03:38:35.707
> 
> 标签：mysql, sql

我的数据库中有一张带有歌曲标题的表格。有几个重复，但略有不同。例如，我的表可能如下所示：

```
id  title
1   Photobooth
2   Photobooth [*]
3   Photobooth [dvd]
4   Photobooth [acoustic]
5   Song for Kelly Huckaby
6   Song for Kelly Huckaby [*] 
```

我试图打破这一点，所以我的结果看起来像：

```
1   Photobooth
5   Song for Kelly Huckaby 
```

我应该如何处理这个查询？去掉 [] 中的所有内容，然后找到重复项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T03:46:07.550

```
SELECT DISTINCT CASE WHEN LOCATE('[', title)-1 = -1
                      THEN TRIM(title)
                      ELSE TRIM(LEFT(title, LOCATE('[', title)-1))
                END title
FROM table1 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/96a99/6)

# iphone - 按键拍照，无相机显示

> ID：13106174
> 
> 赞同：1
> 
> 时间：2012-10-28T03:38:37.460
> 
> 标签：iphone, ios, xcode, ipad, cocoa

我是否可以选择在没有相机显示的情况下拍照，我只想要一个名为“拍照”的按钮和一个标签，当按下按钮并将图像保存在用户相册中时，该标签将变为“已拍摄”。

我发现的一切都假设用户想要相机显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T03:53:23.957

是的，你确实有这个选项，但你必须用 AV Foundation Media Capture 方法而不是更简单的 UIImagePickerController 来做这件事。这有点复杂，但 Apple 有一些资源可以提供帮助：

[AV Foundation Programming Guide - Media Capture](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html#//apple_ref/doc/uid/TP40010188-CH5)提供了一些关于如何进行此操作的信息以及示例代码片段（只是不要实现预览部分）。

[AVCam](http://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html)示例项目展示了如何实现执行此操作所需的所有方法。您需要通过删除预览窗口来修改它，如果您想在 iPad 上运行它，还需要对其进行调整（他们在这个项目中没有正确实现 iPad 的旋转）。

这两个资源对您来说应该是一个很好的起点。

另外，我还没有测试过代码，但是[这个 SO 答案](https://stackoverflow.com/a/11703868/937822)提供了一个使用 AV Foundation 捕获照片的示例，并且它不提供预览窗口。

# python - 如何在 Python 中找出 unicode 字符的编号/名称？

> ID：13106175
> 
> 赞同：46
> 
> 时间：2012-10-28T03:38:42.297
> 
> 标签：python, unicode, python-3.x

在 Python 中：

```
>>> "\N{BLACK SPADE SUIT}"
'♠'
>>> "\u2660"
'♠' 
```

现在，假设我有一个我不知道名称或编号的角色。是否有一个 Python 函数可以提供这样的信息？

```
>>> wanted_function('♠')
["BLACK SPADE SUIT", "u2660"] 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-10-28T03:48:52.373

您可能会发现[unicodedata](http://docs.python.org/library/unicodedata.html)模块很方便：

```
>>> s = "\N{BLACK SPADE SUIT}"
>>> s
'♠'
>>> import unicodedata
>>> unicodedata.name(s)
'BLACK SPADE SUIT'
>>> ord(s)
9824
>>> hex(ord(s))
'0x2660' 
```

# php - CodeIgniter 使用 ActiveRecord 转义查询..不希望它

> ID：13106178
> 
> 赞同：2
> 
> 时间：2012-10-28T03:39:30.307
> 
> 标签：php, mysql, codeigniter, escaping

我有这个代码：

```
$f->like("items", "<id>###</id>", "both"); 
```

当我`print_r`使用数据库/查询对象时，它只会显示`%###%`并完全删除`IDs`. 有没有什么办法解决这一问题？

我试过用and 转义`<`and但无济于事。`>``\`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T05:17:21.047

一开始其实并没有什么问题。我在浏览器窗口中查看 print_r 输出，只看到'%###%'，但是，在查看源代码时，它仍然存在。它只是没有显示，因为它们被解释为 HTML 标签。愚蠢的。

# git - 致命：无法快进、中止

> ID：13106179
> 
> 赞同：248
> 
> 时间：2012-10-28T03:40:18.643
> 
> 标签：git

为什么 Git 不再允许我快进合并？如果我尝试使用 强制它`--ff-only`，我会收到消息“致命：无法快进，正在中止”。我意识到这样做有很大的优势`merge --no-ff`，但我很困惑为什么我`--ff-only`现在不能？

* * *

## 回答 #1

> 赞同：385
> 
> 时间：2017-04-17T22:47:57.667

`git pull --rebase`. 与其他解决方案不同，您不需要知道目标分支的名称。

如果您的上游分支未设置，请尝试`git pull origin <branch> --rebase`（在评论中感谢@Rick）

* * *

## 回答 #2

> 赞同：157
> 
> 时间：2012-10-28T03:57:50.600

您的分支不再直接基于您尝试将其合并到的分支 - 例如，另一个提交被添加到不在您的分支中的目标分支。因此，您不能快进（因为快进要求您的分支完全包含目标分支）。

您可以在目标分支 ( ) 之上重新设置您的分支`git rebase <destination branch>`以重新处理提交，以便它们能够快进到该分支中，或者您可以进行常规合并。

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2021-03-02T13:57:40.180

*   如果

```
git pull 
```

不能解决问题，如果您想合并当前更改和来自从原点拉取分支的更改，请执行以下操作：-

```
git merge origin/BRANCH_NAME 
```

*   之后，解决合并冲突（如果有）并在当天完成。

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2021-06-17T13:52:45.290

`git pull --no-ff`-> 通过 --no-ff 关闭快进

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2021-07-07T18:49:49.477

如果`git pull origin master`在本地分支上执行此操作时遇到此问题，请`.gitconfig`在记事本中打开（通常隐藏在 C:\Users\Myname 中）并添加这两行

```
[pull]
    ff = no 
```

保存配置并重`git pull origin master`试

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2020-12-13T20:48:27.850

这是因为您启用了仅快进选项。这里的事情是您从分支中拉出将在您的本地 git 中创建合并提交，并且仅快进选项不允许在拉取时创建合并提交。

在一个大团队的情况下，你最终会在很多时间和每次来自拉取的提交中重新定位和解决冲突。

我建议您从 git 本地配置文件中删除 ff = only 行。

> $ cd to-my-project-root-dir

> $ 纳米 .git/config

```
[pull]
        ff = only // remove this line
        rebase = false 
```

# algorithm - 最小堆的数组表示

> ID：13106188
> 
> 赞同：0
> 
> 时间：2012-10-28T03:41:52.660
> 
> 标签：algorithm

如果数组的大小为 20 (0-19)，并且映射是从 (i-1)/2 到父级。(i-1)/2 的映射对于表示大小为 13 的最小堆意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T21:53:26.623

正如 Dan 所说，无论数组的大小如何，映射都是相同的。如果有帮助，这里是您提供的示例的二叉堆树，第二个 70（在第 3 级）更改为 71。![二叉堆树](../Images/e8580596e8d27919ba18fffad3f4b408.png)

您可以通过自上而下、从左到右遍历树来获得二叉堆数组。下面是具有如下所示索引的结果数组，因此您可以轻松地将映射应用于索引并查看那里出现的值并与树再现进行交叉检查。

```
array  :  10 | 20 | 25 | 60 |  30 | 58 | 71 | 99 | 70 |  82 | 50 | 90 | 85
indices:   0 |  1 |  2 |  3 |   4 |  5 |  6 |  7 |  8 |   9 | 10 | 11 | 12 
```

我希望这能消除你的疑虑。

# javascript - 自动将所有外部链接转换为附属链接

> ID：13106191
> 
> 赞同：0
> 
> 时间：2012-10-28T03:43:29.323
> 
> 标签：javascript, wordpress, affiliate, mybb, external-links

我希望能够在我的 Wordpress 和 Mybb 安装上自动将链接更改为附属链接。这将有助于减少管理链接的时间，以防将来需要更改代码，因为您知道广告商会不断地相互更改附属网站。

这是我设置的 bestylish.com 会员计划。如果网址是假设： [http](http://www.bestylish.com/men-shoes)
://www.bestylish.com/men-shoes 我需要这样做：- [http://affiliates.tyroodr.com/ez/arttnpokwow/&lnkurl=http://www.bestylish .com/men-shoes%3Futm_source%3Dtyroo%26utm_medium%3Daffiliate%26utm_campaign%3D12june12_20percenteossoffer](http://affiliates.tyroodr.com/ez/arttnpokwow/&lnkurl=http://www.bestylish.com/men-shoes%3Futm_source%3Dtyroo%26utm_medium%3Daffiliate%26utm_campaign%3D12june12_20percenteossoffer)

我还需要在启动 www.bestylish.com 之前总是有一个 http://，如果它在那里，没关系，如果它不在那里，那么我需要添加它，否则它不会被正确重定向。

同样的事情在这里：[将所有网站链接自动更改为附属链接](https://stackoverflow.com/questions/11798336/change-all-website-links-to-affiliate-links-automatically)

但这仅涉及在末尾附加代码，而我也必须在开头附加代码。这也不是每次都在开头添加 http:// 。谁能帮我这个？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T04:00:27.040

我想你正在寻找这种类型的工作。

请访问 => [http://nullrefer.com/?http://freekaamaal.com/discuss/index.php](http://nullrefer.com/?http://freekaamaal.com/discuss/index.php)

加入这个论坛并尝试在线程中发布任何链接，它将转换为附属链接。我也在寻找这种类型的脚本，但无法弄清楚它是如何圆顶的。

此致

bbpowercis

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T20:40:55.913

您可以使用一个非常相似的 jQuery 函数来更新您的链接，您可以在当前链接之前和之后添加新的 URL 信息，如下所示：

```
// attach a click even to all <a> elements
$("a").click(function() {
    addAffiliate(this);
});

// your affiliate URL and querystrig variable for redirect
var affiliateURL = "http://affiliates.tyroodr.com/ez/arttnpokwow/?lnkurl=";
// additional querystring values to append
var addQueryString = "&utm_source=tyroo&utm_medium=affiliate&utm_campaign=12june12_20percenteossoffer";

// function called when link is clicked
function addAffiliate(link) {
    // make sure this link does is not to the current site and does not contain the affiliateURL
    if ((link.href).indexOf(location.host) < 0 && (link.href).indexOf(affiliateURL) < 0){
        // update the link with the affiliateURL, the url encoded link, and the additional query string
        link.href = affiliateURL + escape(link.href) + addQueryString;
    }
    alert(link.href);
    // return true to follow the link
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T14:36:43.977

首先，如果广告商改变他们正在使用的平台或附属网络，可能所有链接（真实链接和附属链接）都会改变，所以你需要为你推广的每个商家做你定制的事情。

我可以建议您尝试使用一些附属链接隐藏/管理插件或服务。您可以尝试 bit.ly 来管理和隐藏链接，并且有许多免费的 wordpress 插件可以让您做到这一点：[http ://wordpress.org/plugins/search.php?q=link+cloak&sort=](http://wordpress.org/plugins/search.php?q=link+cloak&sort=)

如果你想要更高级的东西，你可以看看：[http ://autoaffiliatelinks.com/](http://autoaffiliatelinks.com/)

# ajax - 如何通过ajax对输入元素的模糊调用动作方法

> ID：13106193
> 
> 赞同：2
> 
> 时间：2012-10-28T03:43:31.930
> 
> 标签：ajax, grails

我刚刚开始接触 Grails，并且开始研究将 Ajax 与 Grails 一起使用。我看过几个不同的例子，但我还是有点不清楚。由于我来自 JSF 背景，我想在 JSF 中提出一个简单的示例，并获得使用 Grails 实现相同目标的等效方法。

当从输入组件触发 blur 事件时，以下 JSF 代码将调用 bean 的 someAction 方法。

```
<h:inputText value="#{bean.someProperty}">
<f:ajax event="blur" action="#{bean.someAction}" />
</h:inputText> 
```

那么用 Grails 实现相同行为的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T04:02:30.817

Grails **[remoteField](http://www.grails.org/doc/latest/ref/Tags/remoteField.html)**应该可以满足您的需求。或者，您也可以使用**[remoteFunction](http://www.grails.org/doc/latest/ref/Tags/remoteFunction.html)**完成同样的事情。无论哪种情况，标签都允许您通过 ajax 调用控制器/动作，并提供事件挂钩以在成功/失败后进行处理。

# php - 如何从字符串 wordsolver 应用程序中的简单 mysql/php 单词中的字符串中找到单词匹配？

> ID：13106195
> 
> 赞同：0
> 
> 时间：2012-10-28T03:43:38.713
> 
> 标签：php, mysql, string, performance

我的数据库中有 27 个表。1个单词表（拼字游戏单词表），26个关联表。

```
Table  Fields
================
word   [id,word]
a      [word_id]
b      [word_id]
...
z      [word_id] 
```

我试图找出给定字符串的匹配单词。

例如，如果给定的字符串是`pant`，我想知道：`pant, apt, pat, tap, ant, tan, nap, pan, at, ta, pa, an, na`。

我目前的策略是分解字符串中的每个字母并找到与所有字母匹配的相关单词。

例如：

```
SELECT word.word
FROM word, p, a, n, t
WHERE
    word.id = p.word_id OR
    word.id = a.word_id OR
    word.id = n.word_id OR
    word.id = t.word_id 
```

但这最终会打印出所有包含 ap、a、n 或 t 的单词。

如果我将所有运算符切换到`AND`，我只会遇到一场比赛：`pant`.

你能帮我解开这个谜吗？

我还关心如何处理字符串中的重复字母。例如，`PPANT`应该找到匹配的`app`，而普通的`PANT`不应该。

我在关联表的正确轨道上还是有更好的方法？

我试图在 php/mysql 中相当有效地处理这个问题。我知道之前有其他人在 C、perl、java 等语言中解决了这个谜题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T03:50:37.217

我不熟悉 MySQL 的高级功能，所以我不能说是否有办法在程序上执行此限制，这可能会为您节省大量存储空间。尽管如此，我会提供这种可能性。

假设这是你的单词表：

```
+==========+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+
|   word   | a | b | c | d | e | f | g | h | i | j | k | l | m | n | o | p | q | r | s | t | u | v | w | x | y | z |
+==========+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+
| pant     | 1 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 1 | 0 | 1 | 0 | 0 | 0 | 1 | 0 | 0 | 0 | 0 | 0 | 0 |
+==========+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+
| ppant    | 1 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 1 | 0 | 2 | 0 | 0 | 0 | 1 | 0 | 0 | 0 | 0 | 0 | 0 |
+==========+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+
| app      | 1 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 2 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |
+==========+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+
| kick     | 0 | 0 | 1 | 0 | 0 | 0 | 0 | 0 | 1 | 0 | 2 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |
+==========+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+ 
```

那么您的查询可能如下所示：

```
SELECT word.word FROM word
JOIN
(
  SELECT * FROM word WHERE word.word = "pant"
) AS root
ON
    word.a <= root.a
AND word.b <= root.b
AND word.c <= root.c
AND word.d <= root.d
AND word.e <= root.e
AND word.f <= root.f
AND word.g <= root.g
AND word.h <= root.h
AND word.i <= root.i
AND word.j <= root.j
AND word.k <= root.k
AND word.l <= root.l
AND word.m <= root.m
AND word.n <= root.n
AND word.o <= root.o
AND word.p <= root.p
AND word.q <= root.q
AND word.r <= root.r
AND word.s <= root.s
AND word.t <= root.t
AND word.u <= root.u
AND word.v <= root.v
AND word.w <= root.w
AND word.x <= root.x
AND word.y <= root.y
AND word.z <= root.z 
```

现在，当然有一些方法可以规范化表和多种方法来创建查询。您应该尝试对您的情况最有意义的方法。

# javascript - 一些小的 HTML、CSS 和 JS 问题

> ID：13106196
> 
> 赞同：0
> 
> 时间：2012-10-28T03:43:51.010
> 
> 标签：javascript, html, css

我的尝试可以在[http://bit.ly/S4je19上查看](http://bit.ly/S4je19)

**问题 1：**上传按钮应向下移动约 5px 以与“选择图像”文件输入内联。我似乎无法让它向下移动，为什么？

**问题 2：**姓名、邮政编码和电子邮件在 jsfiddle 上基本上是内联的（在同一区域结束），但是当上传到服务器时它们没有？

**问题 3：**在 jsfiddle 上，右下角的绝对提交按钮做了它应该做的事情，并且复选框和“tick”文本是内联的。在关闭 jsfiddle 的服务器上，提交按钮与复选框和勾选文本内联，并且复选框高于“勾选”文本而不是内联？为什么？

**问题 4：**下载和打印链接。下载链接应该自动下载（跨浏览器）但不会适用于所有浏览器？打印链接应该自动打开带有打印对话框的文件（跨浏览器），但又不是所有浏览器都可以？我的代码在我的 jsfiddle 的 JS 区域中。这应该适用于任何浏览器 - 也许有人可以提供更好的解决方案？

谢谢！

戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T03:54:35.737

### 1\. 问题一：

```
#BrowserVisible {
    background: url('http://www.joelandamywedding.com/images/upload.JPG') 100% 5px no-repeat;
    height: 32px;
} 
```

### 2\. 问题 2 & 3：

使用 CSS 重置。标准化或[Eric Meyer](http://meyerweb.com/eric/tools/css/reset/index.html)[的](http://fiddle.jshell.net/css/normalize.css). 或者如果你不确定，你可以使用它，但它并不能解决所有问题：

```
* {margin: 0; padding: 0; list-style: none;} 
```

### 3.问题4：

在您的服务器端，请给出标题：`Content-disposition: attachment;`以强制浏览器下载而不是查看内联。

### 从浏览器打印 PDF：

您可以使用浏览器中的 JavaScript 与显示文件的阅读器进行通信。我在一个可能值得尝试[的问题](https://stackoverflow.com/questions/5501182/print-pdf-at-clientside-browser-without-opening-pdf)中发现了另一种方法：

```
<html>
<script language="javascript">
timerID = setTimeout("exPDF.print();", 1000);
</script>
<body>
<object id="exPDF" type="application/pdf" data="111.pdf" width="100%" height="500"/>
</body>
</html> 
```

这个想法是在浏览器中使用 javascript 来指示 PDF 阅读器打印文件。这种方法适用于嵌入在 HTML 页面中的 PDF 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T03:54:31.977

1.  您的`form [type=text]`规则设置`margin-top`了`5px`. 在`#FileField`中，覆盖它并将其设置为`0`。

2.  默认情况下，JSFiddle 使用[最小的 CSS 重置](http://fiddle.jshell.net/css/normalize.css)。您可能希望包括一个类似的。

3.  大概和2一样。

4.  我不知道。下载的东西应该可以在大多数浏览器上运行；打印的东西可能更难控制，因为插件通常会处理显示 PDF。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T03:59:04.687

对于问题 2，您可能不需要完整的 CSS 重置，只需使用

```
*{
    margin:0;
    padding:0;
} 
```

# java - 在 grails 应用程序中包含 jar 清单的类路径

> ID：13106197
> 
> 赞同：3
> 
> 时间：2012-10-28T03:44:11.523
> 
> 标签：java, maven, grails, build-process

我正在编写一个 grails 应用程序 (A)，它使用来自另一个项目的 jar (B)。jar B 具有运行时需要的内部依赖项。这是它的清单：

```
Manifest-Version: 1.0
Archiver-Version: Plexus Archiver
Created-By: Apache Maven
Built-By: robertburke
Build-Jdk: 1.6.0_37
Class-Path: lucene-core-3.3.0.jar postgresql-8.4-702.jdbc4.jar solr-lu
 cene-snowball-1.3.0.jar solr-lucene-core-1.3.0.jar 
```

grails 应用程序无法解析 B jar 中的类。它给出了一个：

```
java.lang.ClassNotFoundException: org.tartarus.snowball.ext.EnglishStemmer 
```

有没有办法让 grails 在其类路径中包含依赖项的类路径？有没有办法在不将 jar B 的依赖项显式添加到 grails 应用程序的情况下做到这一点？

编辑：在 jar B 中有一个类路径，它像蜗牛一样携带其依赖项，使 grails 应用程序包含 WAR 路径中的所有依赖项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T08:19:28.813

假设您使用的是 Maven (Plexus Archiver)，模块 (B) 的 POM 应该包括 4 个 3rd 方依赖项，它们可以被 Grails 解析为模块 (B) 的传递依赖项。如果在应用程序 (A) BuildConfig.groovy 中将对模块 (B) 的依赖项定义为[依赖](http://grails.org/doc/latest/guide/conf.html#configurationsAndDependencies)项，并且它是从[Maven/Ivy 存储库](http://grails.org/doc/latest/guide/conf.html#dependencyRepositories)（本地/远程）中检索的，那么传递依赖项也应该被解析。

# cakephp - cakephp中的上传功能，如何获取url

> ID：13106200
> 
> 赞同：0
> 
> 时间：2012-10-28T03:45:01.630
> 
> 标签：cakephp, upload

我有这个功能来上传文件到 webroot/attach/ ：

```
 public function upload(){

    if ($this->request->is('post')) {
        if($_FILES["file"]["name"]){
    $allowedExts = array("torrent");
    $extension = end(explode(".", $_FILES["file"]["name"]));
    if (($_FILES["file"]["size"] < 20000)&& in_array($extension, $allowedExts))
    {
    if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
    }
    else
    {
    $this->Session->setFlash(__("Upload: " . $_FILES["file"]["name"] . "<br />" . 
     "Type: " . $_FILES["file"]["type"] . "<br />" . 
     "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />"
    ));
    if (file_exists("../webroot/attach/torrents/" ."3alany_com_". $_FILES["file"]["name"]))
      {
    $this->redirect(array('action' => 'index'));
    $this->Session->setFlash(__($_FILES["file"]["name"] . " موجود قبل كده يا بوب "));   
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "../webroot/attach/torrents/"."3alany_com_". $_FILES["file"]["name"]);

        $filename = "3alany_com_". $_FILES["file"]["name"];
        $filesize = $_FILES["file"]["size"];
        $user_id = $this->Session->read('Auth.User.id');
        mysql_set_charset('utf8');

    $this->Attachment->query("INSERT INTO attachments (
                filename ,  type , size , user_id
                ) VALUES (
                '{$filename}' , 'torrent', '{$filesize}' , '$user_id' 
                );");

    $this->redirect(array('action' => 'index'));
    $this->Session->setFlash(__(" موجود قبل كده يا بوب ")); 
      }
    }
    }else
      {
    $this->redirect(array('action' => 'index'));
    $this->Session->setFlash(__("أمتداد الفايل مش مقبول")); 
      }
    }

#############IMAGE

if ($_FILES["image"]["name"])
{
if (file_exists("../webroot/attach/images/" ."3alany_com_". $_FILES["image"]["name"]))
{
    $this->Session->setFlash(__($_FILES["image"]["name"] . " موجود قبل كده يا بوب "));  
}
else
{

$uploadedfile = $_FILES['image']['tmp_name'];
$file_name = stripslashes($_FILES['image']['name']);
$boss = explode(".", strtolower($file_name));
$extension = strtolower(end($boss)); 
$array = array('jpg', 'jpeg', 'png', 'gif'); 
if (!in_array($extension, $array))
{
    $this->redirect(array('action' => 'index'));
    $this->Session->setFlash(__("أمتداد الفايل مش مقبول")); 
}
$size = filesize($_FILES['image']['tmp_name']);
if ($size > 10000000)
{
echo "الصوره المضاعه كبيره";
exit;
}
if ($extension == "jpg" || $extension == "jpeg")
{
$src = imagecreatefromjpeg($uploadedfile);
} else
if ($extension == "png")
{
$src = imagecreatefrompng($uploadedfile);
} else
{
$src = imagecreatefromgif($uploadedfile);
}
list($width, $height) = getimagesize($uploadedfile); 
if ($width < 685)
{
$newwidth = $width;
} else
{
$newwidth = 500;
};
$newheight = ($height / $width) * $newwidth;
$tmp = imagecreatetruecolor($newwidth, $newheight);
imagecopyresampled($tmp, $src, 0, 0, 0, 0, $newwidth, $newheight, $width, $height);

$filename = "../webroot/attach/images/". "3alany_com_" . $file_name;
imagejpeg($tmp, $filename, 100);
imagedestroy($src);
imagedestroy($tmp);

        mysql_set_charset('utf8');
    $filename = "3alany_com_". $_FILES["image"]["name"];
    $filesize = $_FILES["image"]["size"];
    $user_id = $this->Session->read('Auth.User.id');
    $this->Attachment->query("INSERT INTO attachments (
                filename ,  type , size , user_id
                ) VALUES (
                '{$filename}' , 'image', '{$filesize}' , '$user_id' 
                );");

$this->redirect(array('action' => 'index'));
$this->Session->setFlash(__(" موجود قبل كده يا بوب ")); 

      }

}

}
} 
```

但我的问题是如何获得这些文件，我尝试了很多方法，比如：

> html->url('/attach/torrents/' . $p['Attachment']['filename'], true); ?>

但它没有用，它给了我“错误：无法找到 AttachController。”

那我该如何处理这件事，谢谢:)！

ps：我有蛋糕2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T09:27:31.923

查看 cakephp 的全局常量：

[http://book.cakephp.org/2.0/en/core-libraries/global-constants-and-functions.html](http://book.cakephp.org/2.0/en/core-libraries/global-constants-and-functions.html)

# java - 跟踪在 Java 中打开窗口的时间

> ID：13106207
> 
> 赞同：0
> 
> 时间：2012-10-28T03:45:50.997
> 
> 标签：java, swing, timer

我正在尝试跟踪我的 JPanel 打开的时间（以毫秒为单位），我不知道是否有更简单的方法可以做到这一点，但我想我会在 windowOpened() 上记录 MS 中的当前时间，然后减去它从面板关闭时开始？不幸的是，我不知道如何传递这个变量。

这是我的代码：

```
public void windowOpened(WindowEvent arg0) {
  Calendar OlCDateTime = Calendar.getInstance();
  long openedTime = OlCDateTime.getTimeInMillis();
  System.out.println(openedTime);
} 
```

我想我正在使用在方法之外无法访问的局部变量，但我不知道如何解决这个问题。任何关于如何做到这一点或更好的方式来做我想做的事情的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T04:08:59.480

您应该能够在您的类中使用实例变量来完成此操作。只需跟踪窗口何时打开和何时关闭；然后提供一种方法来访问您需要的信息。它可能看起来像这样（简化版）：

```
public class MyPanel extends JPanel {
    // ...

    private long _openTime = 0;
    private long _closeTime = 0;

    public long getOpenTime() {
        long closed = _closeTime;

        // if the window is still open, use current time...
        if (closed == 0) {
            closed = System.currentTimeMillis();
        }

        return (closed - _openTime);
    }

    public void onWindowOpened(WindowEvent evt) {
        _openTime = System.currentTimeMillis();
    }

    public void onWindowClosed(WindowEvent evt) {
        _closeTime = System.currentTimeMillis();
        System.out.println(getOpenedTime());  // DEBUG
    }
} 
```

只要对象保持有效，就可以访问“打开时间”。这将包括已订阅此对象上的事件的任何调用者。

# jquery - Jquery 菜单 - 改变滑动功能

> ID：13106208
> 
> 赞同：0
> 
> 时间：2012-10-28T03:45:51.977
> 
> 标签：jquery, html, css

当我将鼠标悬停在他们保持向上滑动的子类别时，我遇到了这个菜单的问题。

我希望子类别在我悬停时保留，当我将鼠标移到外面时它会向上滑动，同样转到主要类别。请帮忙。我已经为此工作了 1 小时，但没有解决方案。

```
$(document).ready(function(){
 $('ul#level1').slideUp();
       $('a#tab').hover(function(){
                 var content_show = $(this).attr('title');
                $('.'+ content_show).stop().slideDown();

            },function(){

                var content_show = $(this).attr('title');
                $('.'+ content_show).stop().slideUp();

            });
 });

                <li><a href="#" id="tab" class="active" title="one">Sport</a>

                    <ul id="level1" class="one">
                    <li><a href="#">View All</a></li>
                    <li><a href="#" >Shoes</a></li>
                    <li><a href="#" >T-Shirt</a></li>
                    <li><a href="#" >Tools</a></li>
                    <li><a href="#" >Hats</a></li>
                    <li><a href="#">Pants</a></li>
                    </ul>

                </li>

                <li><a href="#" id="tab" class="tab" title="two">Foods</a>

                    <ul id="level1" class="two">
                    <li><a href="#">Link Here</a></li>
                    <li><a href="#">Link Here</a></li>
                    <li><a href="#">Link Here</a></li>
                    <li><a href="#">Link Here</a></li>
                    <li><a href="#">Link Here</a></li>
                    </ul>

                </li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T04:54:36.770

尝试滑动你的`<li>`不是你的`<a>` **演示**：http: [//jsfiddle.net/yosafatade/VNkbp/](http://jsfiddle.net/yosafatade/VNkbp/)

其实我同意@PraveenKumar 但如果你仍然想使用 jquery 我建议你使用`slideToggle()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T03:51:05.393

你的结构似乎没问题。使用纯 CSS 查看此代码，因为这将帮助您将其移植到 JavaScript。你不需要使用`title`：

### HTML

```
<ul class="nav">
    <li>
        <a href="#">Menu 1</a>
        <ul>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
        </ul>
    </li>
    <li>
        <a href="#">Menu 2</a>
        <ul>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
        </ul>
    </li>
    <li>
        <a href="#">Menu 3</a>
        <ul>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
        </ul>
    </li>
</ul> 
```

### CSS

```
* {font-family: "Segoe UI", Tahoma;}
ul.nav {border-bottom: 1px solid #999;}
ul.nav li a {display: block; text-decoration: none; color: #333; padding: 5px; border: 1px solid #fff;}
ul.nav > li:hover {border: 1px solid #666; border-bottom: 1px solid #fff;}
ul.nav li a:hover {background: #ccc; border: 1px solid #999;}
ul.nav > li {display: inline-block; position: relative; border: 1px solid #fff;}
ul.nav > li ul {display: none; position: absolute; left: -1px; width: 150px; border: 1px solid #666; border-top-color: #fff; margin-top: 1px;}
ul.nav > li:hover ul {display: block;}
ul.nav > li ul li {display: block;} /* Vertical Menu */
ul.nav > li ul li {display: inline-block;} /* Horizontal Menu */ 
```

### 小提琴： http:
[//jsfiddle.net/vMuxA/](http://jsfiddle.net/vMuxA/)（垂直菜单）
[http://jsfiddle.net/vMuxA/1/](http://jsfiddle.net/vMuxA/1/)（水平菜单）

# javascript - iframe 加载会阻止 JavaScript 执行吗？

> ID：13106211
> 
> 赞同：5
> 
> 时间：2012-10-28T03:46:13.863
> 
> 标签：javascript, html, iframe, asynchronous

假设您将一个 iframe 动态插入到从跨域获取一些资源的页面中。它会阻止任何当前正在执行的 javascript，还是 javascript 在加载和呈现其内容时继续运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T04:09:04.910

不，它不会阻塞——框架的内容将异步加载，就像几乎任何其他类型的内容一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T10:33:35.997

只是为了给黄昏的回答增加一点：虽然 iframe 确实不会阻止主页中内容的加载，但它会做的是将主页的 onload 事件的调度推迟到它自己的 onload 事件被调度之后.

如果您有一些由 onload 触发的重要脚本，这可能是一个问题，如果他们注意到浏览器仍然指示它正在加载页面，它可能会给用户一种加载缓慢的印象。

如果您想规避这些问题并且可以忽略可能禁用了 JavaScript 的用户，则可以使用 JS 将 iframe 元素动态写入 DOM。

# java - 在 SQL 存储过程中循环插入多列游标内容

> ID：13106213
> 
> 赞同：1
> 
> 时间：2012-10-28T03:46:57.487
> 
> 标签：java, sql, oracle, stored-procedures, jdbc

我正在 ORacle 中编写一个复杂的存储过程，它可以做几件事，作为带有 JDBC 的 Java 程序的一部分。

首先，它需要执行一个非常复杂的 SELECT 以将信息读入游标，游标的每一行都表示发票的一个行项。输出游标中大约有 10 列。对于游标的每一行，需要将部分但不是所有字段插入到另一个表（称为 LineItem）中，除此之外，我需要获取游标中所有这些行的总和并在其中创建父行发票表。

将光标读回 Java 应用程序，然后根据需要迭代其内容执行 INSERTS 会更容易，还是可以在同一个存储过程中完成所有这些操作？我认为应该使用多个存储过程来避免复杂性，但不确定这是否可以完成并且是否将其全部保留为一个事务的一部分。

我试图避免创建一个超级复杂的存储过程，但也不想要一个可怕的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T04:21:12.880

我们也有类似的情况（处理发票及其行项目），我们执行以下操作：

1.  分批检索 1000 个行项目（以免同时用太多项目压倒 java 程序）。
2.  将记录插入到 LineItem 表中，其中包含来自行项目记录的所需列。
3.  在遍历这些表示行项目的记录时推导出标题记录的详细信息。
4.  在批量处理所有行项目结束时，将表头记录插入数据库。

我们为此使用 JPA (With hibernate) 和 Spring，并且上述所有步骤都在单个事务中执行。

# python - 如何使用 python-daemon 设置守护进程？

> ID：13106221
> 
> 赞同：40
> 
> 时间：2012-10-28T03:49:38.050
> 
> 标签：python, daemon, python-daemon

我是守护进程的新手，如果这是一个新手问题，我深表歉意。

在其他几个答案（例如，[这个问题](https://stackoverflow.com/questions/473620/how-do-you-create-a-daemon-in-python)）中，人们建议使用[python-daemon](http://pypi.python.org/pypi/python-daemon/)包，因为它完全实现了[PEP 3143](https://www.python.org/dev/peps/pep-3143/)标准。

不幸的是，python-daemon[对文档有点轻描淡写](http://www.python.org/dev/peps/pep-3143/)（或者更可能我对知识/经验有点轻描淡写...... ;)），我想我可能错过了一些非常基本的东西。这就是我正在做的事情：

我有以下内容：

```
import daemon

logfile = open('daemon.log', 'w')

context = daemon.DaemonContext(stdout = logfile, stderr = logfile)

context.open()

with context:
    do_something_1()
    do_something_2() 
```

**问题：如何使用 python-daemon 设置守护程序，如何启动和停止它？**

* * *

旁注：

我基本上对`.open()`这里应该如何/是否使用该方法进行了疯狂的猜测——文档在这一点上并不清楚。无论我是否包含它，似乎都会发生同样的事情。

那么，现在我该怎么办？当我尝试运行此文件时，例如：

```
python startConsumerDaemons.py 
```

它似乎运行`do_something_1()`，但不是第二个。而且，它似乎使程序*附加*到终端窗口。IE，stdout 没有被重定向，当我关闭终端窗口时，进程被终止。所以，我很确定我在这里做错了什么......我应该做些什么不同的事情？

最后，一旦我让守护程序运行，我如何停止/重新启动它（例如，如果我对底层代码进行更改）？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-11-10T20:04:33.010

这是我所拥有的，对我有用。它还有一个 sysv 初始化脚本。[Repo 在 GitHub 上](https://github.com/prehensilecode/python-daemon-example)，我还有[一篇简短的博客文章](https://linuxfollies.blogspot.com/2016/11/linux-daemon-using-python-daemon-with.html)，其中包含我找到的其他可能的解决方案的链接。

只能有一个守护进程在运行：与大多数其他 Linux 守护进程一样，由 PID 锁定文件管理。要阻止它，请执行

```
kill `cat /var/run/eg_daemon.pid` 
```

要查看它是否正在运行：

```
ps -elf | grep `cat /var/run/eg_daemon.pid` 
```

使用 pidfile 子模块，PID 文件是自动管理的。当守护进程停止时，pidfile 被清除。请参阅链接的 GitHub 存储库以获取初始化脚本。

这是 Python 守护程序代码：

```
#!/usr/bin/env python3.5
import sys
import os
import time
import argparse
import logging
import daemon
from daemon import pidfile

debug_p = False

def do_something(logf):
    ### This does the "work" of the daemon

    logger = logging.getLogger('eg_daemon')
    logger.setLevel(logging.INFO)

    fh = logging.FileHandler(logf)
    fh.setLevel(logging.INFO)

    formatstr = '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
    formatter = logging.Formatter(formatstr)

    fh.setFormatter(formatter)

    logger.addHandler(fh)

    while True:
        logger.debug("this is a DEBUG message")
        logger.info("this is an INFO message")
        logger.error("this is an ERROR message")
        time.sleep(5)

def start_daemon(pidf, logf):
    ### This launches the daemon in its context

    ### XXX pidfile is a context
    with daemon.DaemonContext(
        working_directory='/var/lib/eg_daemon',
        umask=0o002,
        pidfile=pidfile.TimeoutPIDLockFile(pidf),
        ) as context:
        do_something(logf)

if __name__ == "__main__":
    parser = argparse.ArgumentParser(description="Example daemon in Python")
    parser.add_argument('-p', '--pid-file', default='/var/run/eg_daemon.pid')
    parser.add_argument('-l', '--log-file', default='/var/log/eg_daemon.log')

    args = parser.parse_args()

    start_daemon(pidf=args.pid_file, logf=args.log_file) 
```

为了完整起见，这里是初始化脚本。请注意，“kill”实际上只是一种发送 POSIX 信号的方法——有关概述，请参见 signal(7) 的手册页。python-daemon 上下文将捕获信号，终止进程干净地关闭文件描述符，并自动删除 PID 文件。所以，这确实是一个干净的终止。

您可以编写代码来捕获 SIGUSR1 或类似的东西，以便重新加载守护程序配置。编写 Python 停止守护程序没有任何好处。

```
#!/bin/bash
#
# eg_daemon      Startup script for eg_daemon
#
# chkconfig: - 87 12
# description: eg_daemon is a dummy Python-based daemon
# config: /etc/eg_daemon/eg_daemon.conf
# config: /etc/sysconfig/eg_daemon
# pidfile: /var/run/eg_daemon.pid
#
### BEGIN INIT INFO
# Provides: eg_daemon
# Required-Start: $local_fs
# Required-Stop: $local_fs
# Short-Description: start and stop eg_daemon server
# Description: eg_daemon is a dummy Python-based daemon
### END INIT INFO

# Source function library.
. /etc/rc.d/init.d/functions

if [ -f /etc/sysconfig/eg_daemon ]; then
        . /etc/sysconfig/eg_daemon
fi

eg_daemon=/var/lib/eg_daemon/eg_daemon.py
prog=eg_daemon
pidfile=${PIDFILE-/var/run/eg_daemon.pid}
logfile=${LOGFILE-/var/log/eg_daemon.log}
RETVAL=0

OPTIONS=""

start() {
        echo -n $"Starting $prog: "

        if [[ -f ${pidfile} ]] ; then
            pid=$( cat $pidfile  )
            isrunning=$( ps -elf | grep  $pid | grep $prog | grep -v grep )

            if [[ -n ${isrunning} ]] ; then
                echo $"$prog already running"
                return 0
            fi
        fi
        $eg_daemon -p $pidfile -l $logfile $OPTIONS
        RETVAL=$?
        [ $RETVAL = 0 ] && success || failure
        echo
        return $RETVAL
}

stop() {
    if [[ -f ${pidfile} ]] ; then
        pid=$( cat $pidfile )
        isrunning=$( ps -elf | grep $pid | grep $prog | grep -v grep | awk '{print $4}' )

        if [[ ${isrunning} -eq ${pid} ]] ; then
            echo -n $"Stopping $prog: "
            kill $pid
        else
            echo -n $"Stopping $prog: "
            success
        fi
        RETVAL=$?
    fi
    echo
    return $RETVAL
}

reload() {
    echo -n $"Reloading $prog: "
    echo
}

# See how we were called.
case "$1" in
  start)
    start
    ;;
  stop)
    stop
    ;;
  status)
    status -p $pidfile $eg_daemon
    RETVAL=$?
    ;;
  restart)
    stop
    start
    ;;
  force-reload|reload)
    reload
    ;;
  *)
    echo $"Usage: $prog {start|stop|restart|force-reload|reload|status}"
    RETVAL=2
esac

exit $RETVAL 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-25T18:21:18.353

[此处提供了](http://www.gavinj.net/2012/06/building-python-daemon-process.html)完整示例。

您应该能够更好地理解 python-daemon 的内部工作原理。

此外，提供的代码还提供了一个简单的启动/停止守护进程的初始化脚本示例。但是，您可以通过使用参数 stop 再次调用原始函数来启动/停止它：

```
python original_func.py stop 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-03T02:28:18.677

正如您在[“with”语句文档](http://docs.python.org/2/reference/compound_stmts.html#the-with-statement)中看到的那样，it 语句确实执行了一些“魔术”，这与我们的目的有关。具体来说：

> 带有一个“项目”的 with 语句的执行过程如下：
> 
> 1.  评估上下文表达式（在 with_item 中给出的表达式）以获得上下文管理器。
>     
>     
> 2.  `__exit__()`加载上下文管理器以供以后使用。
>     
>     
> 3.  上下文管理器的`__enter__()`方法被调用。
>     
>     
> 4.  如果目标包含在 with 语句中，则将返回值 from`__enter__()`分配给它。
>     
>     
> 5.  该套件已执行。
>     
>     
> 6.  上下文管理器的`__exit__()`方法被调用。如果异常导致套件退出，则其类型、值和回溯将作为参数传递给`__exit__()`. 否则，将提供三个 None 参数。

这是什么意思？如果您仔细查看[有问题的 PEP](http://www.python.org/dev/peps/pep-3143/)，它也用作 python-daemon 文档（并且确实可以大大改进），您会看到它实现了`__enter__()`并且`__exit__()`：

> 该类还通过`__enter__` 和`__exit__`方法实现上下文管理器协议。
> 
> **`__enter__()`**
> 
> 调用实例的 open() 方法，然后返回实例。
> 
> **`__exit__(exc_type, exc_value, exc_traceback)`**
> 
> 调用实例的 close() 方法，如果异常被处理则返回 True，否则返回 False。

换句话说，不需要 open()，PEP 中给出的示例（尽管没有正确解释）按原样工作。虽然 with 语句确实意味着什么，但它不保留任何循环，一旦到达其范围的末尾，它就会调用**exit** ()，这在 python-daemon 中意味着 close()。因此，您需要放一个 while True 或您考虑的无限循环。

关于你的第二个脚本不工作的行为，我真的不能告诉你，我很惊讶第一个脚本已经工作了。如果您的守护程序正在停止，那么您的脚本肯定有问题，您可以检查您的 consumerDaemonLogFile。（作为旁注，你有一个错字'sderr'->'stderr'）

此外，您可以在 PEP 中看到，如果未指定，则工作目录属性默认为“/”。如果您在脚本中使用相对路径，这可能是问题的根源。

最后，关于最后一个问题，你可以很容易地杀死你的守护进程，找到它的 PID：

```
ps ax | grep startConsumerDaemons.py 
```

并向其发送 SIGTERM：

```
kill <pid> 
```

gromain 提供的答案确实提供了一种更方便的方法来启动和停止它，使用“daemon.runner()”，但设置起来要复杂得多。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-08-06T01:07:54.093

这是带有 argparse 和信号处理的 2020 python-daemon 样板。有关带有日志记录的版本，请访问[此处](https://github.com/ggmartins/dataengbb/blob/master/python/daemon/daemon1)。

```
import os, sys
import datetime
import time
import daemon
import daemon.pidfile
import argparse
import signal
import logging

PROGNAME = 'monitor'
PATHCTRL = '/tmp/' #path to control files pid and lock
pidpath = os.path.join(PATHCTRL,  PROGNAME + ".pid")
parser = argparse.ArgumentParser(prog = PROGNAME)

sp = parser.add_subparsers()
sp_start = sp.add_parser('start', help='Starts %(prog)s daemon')
sp_stop = sp.add_parser('stop', help='Stops %(prog)s daemon')
sp_status = sp.add_parser('status', help='Show the status of %(prog)s daemon')
sp_restart = sp.add_parser('restart', help='Restarts %(prog)s daemon')
sp_debug = sp.add_parser('debug', help='Starts %(prog)s daemon in debug mode')
sp_start.add_argument('-v', '--verbose', action='store_true', help='log extra informations')
sp_debug.add_argument('-v', '--verbose', action='store_true', help='log extra informations')

class MainCtrl:
  thread_continue = True
  thread_token = "token"

mainctrl = MainCtrl()

def main_thread_stop(signum=None, frame=None):
    mainctrl.thread_continue = False
    mainctrl.thread_token = "test"

def main_thread(args, mainctrl):
    verbose = False
    if hasattr(args, 'mainctrl'):
      verbose = args.verbose
    if verbose:
      print("MAIN:{0}".format(args))
    try:
      while mainctrl.thread_continue:
         if verbose:
            print("TOKEN:{0}".format(mainctrl.thread_token))
         time.sleep(1)
    except KeyboardInterrupt as ke:
      if verbose:
        print("INFO: Existing...") 
    except Exception as e:
      if verbose:
        print("ERROR: Exception:{0}".format(str(e)))    

def daemon_start(args=None):
    print("INFO: Daemon Start")
    if os.path.exists(pidpath):
      print("INFO: Daemon already running (according to {0}).".format(pidpath))
      sys.exit(1)
    else:
      with daemon.DaemonContext(
        stdout=sys.stdout,
        stderr=sys.stderr,
        signal_map={
            signal.SIGTERM: main_thread_stop,
            signal.SIGTSTP: main_thread_stop,
            signal.SIGINT: main_thread_stop,
            #signal.SIGKILL: daemon_stop, #SIGKILL is an Invalid argument
            signal.SIGUSR1: daemon_status,
            signal.SIGUSR2: daemon_status,
          },
          pidfile = daemon.pidfile.PIDLockFile(pidpath)
          ):
        print("INFO: Running daemon...")
        main_thread(args, mainctrl)

def daemon_restart(args):
    print("INFO: Daemon Restart")
    daemon_stop()
    time.sleep(1)
    daemon_start(args)

def daemon_stop(args=None):
    print("INFO: Daemon Stop {0}".format(args))
    if os.path.exists(pidpath):
      with open(pidpath) as pid:
        try:
          os.kill(int(pid.readline()), signal.SIGINT)
        except ProcessLookupError as ple:
          os.remove(pidpath)
          print("ERROR: {0}".format(ple))
    else:
      print("INFO: process isn't running (according to the absence of {0}).".format(pidpath))

def daemon_debug(args):
    print("INFO: Daemon debug")
    main_thread(args, mainctrl)

def daemon_status(args):
    print("INFO: Daemon Status")
    if os.path.exists(pidpath):
      print("INFO: Daemon is running")
    else:
      print("INFO: Daemon is not running.")

sp_stop.set_defaults(callback=daemon_stop)
sp_status.set_defaults(callback=daemon_status)
sp_start.set_defaults(callback=daemon_start)
sp_restart.set_defaults(callback=daemon_restart)
sp_debug.set_defaults(callback=daemon_debug)

args = parser.parse_args()

if hasattr(args, 'callback'):
  args.callback(args)
else:
  parser.print_help() 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-12T10:44:59.450

模块“python-daemon”仍然缺少有用的文档。我个人放弃了使用它，现在我成功使用[了此答案中引用的](https://stackoverflow.com/a/473702/1422096)Sander Marechal 的守护程序代码。

我稍微修改了一下，以便在您调用时能够执行操作`python testdaemon.py stop`。编辑 2020/05/07：修改并使用 Python 3。

[这是代码](https://gist.github.com/josephernest/77fdb0012b72ebdf4c9d19d6256a1119)。

* * *

示例用法：

```
import sys, daemon, time

class testdaemon(daemon.Daemon):
    def run(self):
        self.i = 0
        with open('test1.txt', 'w') as f:
            f.write(str(self.i))
        while True:
            self.i += 1
            time.sleep(1)

    def quit(self):
        with open('test2.txt', 'w') as f:
            f.write(str(self.i))

daemon = testdaemon()

if 'start' == sys.argv[1]: 
    daemon.start()
elif 'stop' == sys.argv[1]: 
    daemon.stop()
elif 'restart' == sys.argv[1]: 
    daemon.restart() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-30T02:14:06.420

构造`daemon.DaemonContext`函数接受一个`lockfile`选项。使用将记录进程 PID 的 lockfile 库。

该库最初推荐`lockfile.PIDLockFile`该类，但该库现在已被弃用，没有很好的替代品。但是您可以实现另一个具有相同语义的对象。

然后，只需读取命名的 PID 文件的内容即可找到进程的 PID。使用该 PID 将信号发送到正在运行的守护程序。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-19T00:05:58.720

在 linux 上，您可以通过运行以下命令来停止守护进程：

```
$ ps -x 
```

并找到与您的守护进程相对应的 PID，然后终止该进程。

# iphone - 将私钥导入钥匙串在 iphone 中无法正常工作

> ID：13106229
> 
> 赞同：26
> 
> 时间：2012-10-28T03:52:05.503
> 
> 标签：iphone, ios, cryptography, rsa, keychain

在将请求发送到后端服务器之前，我需要对其进行签名。但是私钥给了我。所以我需要导入它，然后用它来签名。我能够导入和登录，但该数据与我使用 openssl 签名获得的数据不同。我知道它做错了，因为当我导入公钥时，我也无法验证它。如果有一种方法可以避免导入钥匙串，那也很棒。 **这几天一直在努力工作，这对我们来说是一项高优先级的工作。有人可以帮忙吗？**

```
- (SecKeyRef) getPrivateKey {
//RSA KEY BELOW IS DUMMY. 

key = @"-----BEGIN RSA PRIVATE KEY-----\nORtMei3ImKI2ZKI636I4+uNCwFfZv9pyJzXyfr1ZNo7iaiW7A0NjLxikNxrWpr/M\n6HD8B2j/CSjRPW3bhsgDXAx/AI1aSfJFxazjiTxx2Lk2Ke3jbhE=\n-----END RSA PRIVATE KEY-----\n";

NSString * tag = @"adpPrivateKey";

    NSString *s_key = [NSString string];
    NSArray  *a_key = [key componentsSeparatedByString:@"\n"];
    BOOL     f_key  = FALSE;

    for (NSString *a_line in a_key) {
        if ([a_line isEqualToString:@"-----BEGIN RSA PRIVATE KEY-----"]) {
            f_key = TRUE;
        }
        else if ([a_line isEqualToString:@"-----END RSA PRIVATE KEY-----"]) {
            f_key = FALSE;
        }
        else if (f_key) {
            s_key = [s_key stringByAppendingString:a_line];
        }
    }
    if (s_key.length == 0) return(nil);

    // This will be base64 encoded, decode it.
    NSData *d_key = [NSData dataFromBase64String:s_key];

if(d_key == nil) return nil;

    NSData *d_tag = [NSData dataWithBytes:[tag UTF8String] length:[tag length]];

    // Delete any old lingering key with the same tag
    NSMutableDictionary *privateKey = [[NSMutableDictionary alloc] init];
    [privateKey setObject:(id) kSecClassKey forKey:(id)kSecClass];
    [privateKey setObject:(id) kSecAttrKeyTypeRSA forKey:(id)kSecAttrKeyType];
    [privateKey setObject:d_tag forKey:(id)kSecAttrApplicationTag];
    SecItemDelete((CFDictionaryRef)privateKey);

    CFTypeRef persistKey = nil;

    // Add persistent version of the key to system keychain
    [privateKey setObject:d_key forKey:(id)kSecValueData];
    [privateKey setObject:(id) kSecAttrKeyClassPrivate forKey:(id)
     kSecAttrKeyClass];
    [privateKey setObject:[NSNumber numberWithBool:YES] forKey:(id)
     kSecReturnPersistentRef];

    OSStatus secStatus = SecItemAdd((CFDictionaryRef)privateKey, &persistKey);
    if (persistKey != nil) CFRelease(persistKey);

    if ((secStatus != noErr) && (secStatus != errSecDuplicateItem)) {
        [privateKey release];
        return(nil);
    }

    // Now fetch the SecKeyRef version of the key
    SecKeyRef keyRef = nil;

    [privateKey removeObjectForKey:(id)kSecValueData];
    [privateKey removeObjectForKey:(id)kSecReturnPersistentRef];
    [privateKey setObject:[NSNumber numberWithBool:YES] forKey:(id)kSecReturnRef
     ];
    [privateKey setObject:(id) kSecAttrKeyTypeRSA forKey:(id)kSecAttrKeyType];
    secStatus = SecItemCopyMatching((CFDictionaryRef)privateKey,
                                    (CFTypeRef *)&keyRef);

    if(secStatus != noErr)
        return nil;

    [privateKey release];

    return keyRef;
} 
```

下面的代码用于签名。部分代码来自 Apple 示例（[http://developer.apple.com/library/ios/#samplecode/CryptoExercise/Listings/Classes_SecKeyWrapper_m.html#//apple_ref/doc/uid/DTS40008019-Classes_SecKeyWrapper_m-DontLinkElementID_17](http://developer.apple.com/library/ios/#samplecode/CryptoExercise/Listings/Classes_SecKeyWrapper_m.html#//apple_ref/doc/uid/DTS40008019-Classes_SecKeyWrapper_m-DontLinkElementID_17)）

```
- (NSData *)getSignatureBytes:(NSString *)plainText {

OSStatus sanityCheck = noErr;
NSData * signedHash = nil;
uint8_t * signedHashBytes = NULL;
size_t signedHashBytesSize = 0;
SecKeyRef privateKey = NULL;

privateKey = [self getPrivateKey];

signedHashBytesSize = SecKeyGetBlockSize(privateKey);

//Create a SHA Encoded 
NSString * shaEncoded = [self sha256:plainText];
NSLog(@"%@", shaEncoded);

// Malloc a buffer to hold signature.

signedHashBytes = malloc( signedHashBytesSize * sizeof(uint8_t) );
memset((void *)signedHashBytes, 0x0, signedHashBytesSize);

NSData *inputData = [self getHashBytes:[plainText dataUsingEncoding:NSUTF8StringEncoding]];
int bytesLengthUINT8 = [inputData length]; 

sanityCheck =  SecKeyRawSign ( privateKey, kSecPaddingPKCS1, (const uint8_t *)inputData, CC_SHA256_DIGEST_LENGTH,(uint8_t *)signedHashBytes, &signedHashBytesSize);

if(sanityCheck != noErr)
    return nil;

signedHash = [NSData dataWithBytes:(const void *)signedHashBytes length:(NSUInteger)signedHashBytesSize];    
NSString *string = [signedHash base64EncodedString];

NSLog(@"%@", string);

if (signedHashBytes) free(signedHashBytes);
return signedHash;

} 
```

我使用[http://blog.flirble.org/2011/01/05/rsa-public-key-openssl-ios/](http://blog.flirble.org/2011/01/05/rsa-public-key-openssl-ios/)中的代码示例来导入公钥并验证其失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-20T05:23:15.403

Take a look at the last method in the accepted answer for: [Converting NSData to SecKeyRef](https://stackoverflow.com/questions/21308415/converting-nsdata-to-seckeyref)

The problem is that iOS handles public and private keys slightly differently where the identification header that usually exist and is expected by other security APIs (in Java, for instance) is not expected in iOS. So you have to strip them out.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-19T22:19:34.953

也许不是将所有密钥存储在钥匙串中，您可以只在钥匙串中存储一个简单的字符串（作为 secret_hash）。此外，使用广泛采用的通用 AFNetworking 库对后端 Web 服务进行安全调用。

因此，如果您需要使用私钥对后端服务的请求进行签名，我建议您通过 (a) 使用强大的包装库进行服务调用 (AFNetworking) 和 (b) 将私钥存储为 .pfx 文件来执行此操作在应用程序可访问的位置（我会将 .pfx 文件保留在项目根目录中。）

因此，创建您自己的 AFHTTPClient 子类，并使用该子类创建 AFHTTPRequestOperations，并将质询块设置为使用从 .pfx 中提取的凭据。

这样，而不是直接创建 AFHTTPRequestOperation - 使用 AFHTTPClient 子类的 MySignedAFHTTPRequestOperation 方法创建它们。这个方法应该创建 AFHTTPRequestOperation 然后像这样设置挑战块......

```
 [myOperationObject setAuthenticationChallengeBlock:^(NSURLConnection *connection, NSURLAuthenticationChallenge *challenge)
    {
             NSString * pfxPath = [[NSBundle mainBundle]
                           pathForResource:@“pvtKeyFile” ofType:@"pfx"];

            NSData *PKCS12Data = [[NSData alloc] initWithContentsOfFile: pfxPath];
            CFDataRef inPKCS12Data = (__bridge CFDataRef)PKCS12Data;    
            SecIdentityRef identity;
            SecTrustRef trust;
            myIdentityAndTrustExtractionHelper(inPKCS12Data, &identity, &trust);

            SecCertificateRef certificate = NULL;
            SecIdentityCopyCertificate (identity, &certificate); 

            const void *certs[] = {certificate};
            CFArrayRef certArray = CFArrayCreate(kCFAllocatorDefault, certs, 1, NULL);

            NSURLCredential *credential = [NSURLCredential
                                           credentialWithIdentity:identity
                                           certificates:(__bridge NSArray*)certArray
                                           persistence:NSURLCredentialPersistencePermanent];

            [[challenge sender] useCredential:credential
                forAuthenticationChallenge:challenge];
            CFRelease(certArray);
    } 
```

下面是关于上面使用的身份提取辅助函数的更多细节......

```
OSStatus myIdentityAndTrustExtractionHelper(CFDataRef inPKCS12Data,        
                                 SecIdentityRef *mySecIdentityRef,
                                 SecTrustRef *myTrustRef)
{
    //modify to get secret-hash from keychain 
    CFStringRef mySecretHash = CFSTR(secret_hash);
    const void *keys[] =   { kSecImportExportPassphrase };
    const void *values[] = { mySecretHash };

    CFArrayRef pkscItems = CFArrayCreate(NULL, 0, 0, NULL);
    OSStatus mySecurityError = SecPKCS12Import(inPKCS12Data,
                                CFDictionaryCreate(NULL,keys, values, 1,
                                NULL, NULL),
                                &pkscItems);
    if (mySecurityError == 0) 
    {                                 
        CFDictionaryRef myIdentityAndTrust = CFArrayGetValueAtIndex (pkscItems, 0);
        const void *tempIdentity = NULL;
        tempIdentity = CFDictionaryGetValue (myIdentityAndTrust,
                                             kSecImportItemIdentity);
        *mySecIdentityRef = (SecIdentityRef)tempIdentity;
        const void *tempTrust = NULL;
        tempTrust = CFDictionaryGetValue (myIdentityAndTrust, kSecImportItemTrust);
        *myTrustRef = (SecTrustRef)tempTrust;
    }

    return mySecurityError;
} 
```

以这种方式创建 AFHTTPRequest 后（即通过 AFHTTPClient 子类的 MySignedAFHTTPRequestOperation 方法），将其添加到 NSOperationsQueue 以执行（当然，您需要在创建操作时适当地设置成功和失败处理程序块）

总之：

*   使用强大的 AFNetworking 框架进行 Web 服务调用
*   将证书私钥作为 .pfx 文件存储在应用程序中，并使用它来创建凭据和密钥
*   通过在您创建的每个操作对象中设置凭据，允许 AFNetworking 为您进行加密。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-13T02:53:45.890

如果您只想将标准 PHP 兼容的 base64 字符串类型格式的 AES-256 RSA PEM 存储到系统钥匙串中，这对我有用。

我在这里发布这个是因为很多地方，我读到你根本不能将 PEM 文件直接粘贴到 iOS 中；否则您必须从中删除一些标题；等等。但是，至少在 iOS 9.3 上，这现在可以工作了，如果我在某个地方看到过这个，那么它会为我节省很多时间。（注意：以下是来自[https://github.com/ideawu/Objective-C-RSA的](https://github.com/ideawu/Objective-C-RSA)**Objective-C-RSA**部分的大量修改版本，请参阅适用的许可证，我暗示没有背书。他们也有 Swift 版本这里：[https](https://github.com/btnguyen2k/swift-rsautils) ://github.com/btnguyen2k/swift-rsautils看起来功能更完整，可以解决很多人的问题。）

```
#define BR (__bridge id)
#define BRD (__bridge CFDictionaryRef)

+ (SecKeyRef)storePrivateKey:(NSString *)key inSystemKeychainWithTag:(NSString *)tag {
    NSRange spos;
    NSRange epos;
    spos = [key rangeOfString:@"-----BEGIN RSA PRIVATE KEY-----"];
    if(spos.length > 0) {
        epos = [key rangeOfString:@"-----END RSA PRIVATE KEY-----"];
    }
    else {
        spos = [key rangeOfString:@"-----BEGIN PRIVATE KEY-----"];
        epos = [key rangeOfString:@"-----END PRIVATE KEY-----"];
    }
    if(spos.location != NSNotFound && epos.location != NSNotFound){
        NSUInteger s = spos.location + spos.length;
        NSUInteger e = epos.location;
        NSRange range = NSMakeRange(s, e-s);
        key = [key substringWithRange:range];
    }
    key = [key stringByReplacingOccurrencesOfString:@"\r" withString:@""];
    key = [key stringByReplacingOccurrencesOfString:@"\n" withString:@""];
    key = [key stringByReplacingOccurrencesOfString:@"\t" withString:@""];
    key = [key stringByReplacingOccurrencesOfString:@" "  withString:@""];

    // This will be base64 encoded, decode it.
    NSData *data = [[NSData alloc] initWithBase64EncodedString:key options:0];

    if(data == nil){
        return nil;
    }

    //a tag to read/write keychain storage
    NSData *d_tag = [NSData dataWithBytes:[tag UTF8String] length:[tag length]];

    // Delete any old lingering key with the same tag
    NSMutableDictionary *options = [
    @{
      BR kSecClass: BR kSecClassKey,
      BR kSecAttrKeyType: BR kSecAttrKeyTypeRSA,
      BR kSecAttrApplicationTag: d_tag,
    }
    mutableCopy];

    SecItemDelete(BRD options);

    // Add persistent version of the key to system keychain
    [options addEntriesFromDictionary:
    @{
      BR kSecValueData:data,
      BR kSecAttrKeyClass: BR kSecAttrKeyClassPrivate,
      BR kSecReturnPersistentRef: @YES,
    }];

    CFTypeRef persistKey = nil;
    OSStatus status = SecItemAdd(BRD options, &persistKey);
    if (persistKey != nil){
        CFRelease(persistKey);
    }
    if ((status != noErr) && (status != errSecDuplicateItem)) {
        return nil;
    }

    [options removeObjectForKey:BR kSecValueData];
    [options removeObjectForKey:BR kSecReturnPersistentRef];

    [options addEntriesFromDictionary:
    @{
      BR kSecReturnRef:@YES,
      BR kSecAttrKeyType:BR kSecAttrKeyTypeRSA,
    }];

    // Now fetch the SecKeyRef version of the key
    SecKeyRef keyRef = nil;
    status = SecItemCopyMatching(BRD options, (CFTypeRef *)&keyRef);
    if(status != noErr){
        return nil;
    }
    return keyRef;
} 
```

# c++ - 非递归二叉树插入（）方法不起作用

> ID：13106230
> 
> 赞同：1
> 
> 时间：2012-10-28T03:52:35.363
> 
> 标签：c++, c, data-structures, binary-tree, binary-search-tree

我编写了一个二叉树代码，用于以非递归方法将元素插入其中。该代码未按预期工作。无论我调试代码多少次，似乎都没有错，但我得到了错误的结果。我希望你们能提供帮助。提前致谢。

```
void insert(int element){
    if(root == NULL){
        struct elemq *node;
        node = (struct elemq *)malloc(sizeof(struct elemq));
        node->ele = element;
        node->left = NULL;
        node->right = NULL;
        root = node;
        cout << root->ele << "\n";
    }
    else{
        struct elemq *ref;
        ref = root;
        while(ref != NULL){
            if(element <= ref->ele){
                if(ref->left == NULL){
                    struct elemq *node;
                    node = (struct elemq *)malloc(sizeof(struct elemq ));
                    node->ele = element;
                    node->left = NULL;
                    node->right = NULL;
                    ref->left = node;
                    break;
                }
                else{
                    ref = ref->left;
                }
            }
            else if(element > ref->ele){
                if(ref->right == NULL){
                    struct elemq *node;
                    node = (struct elemq *)malloc(sizeof(struct elemq ));
                    node->ele = element;
                    node->left = NULL;
                    node->right = NULL;
                    ref->right = node;
                    break;
                }
                else{
                    ref = ref->right;
                }
            }
        }
    }
} 
```

每次我尝试插入一个元素时，每个元素都被视为`root`，而不仅仅是第一次。所以，每次，条件`if(root == NULL)`都是`true`。我声明`root`为全局变量并将其初始化为`NULL`in `main()`。`cout <<`我通过输入第一个`if()`条件来了解这一点。我将之前的帖子修改为这个新问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T04:00:03.453

```
node = ref->left; 
```

你要

```
ref->left = node; 
```

和类似的 ref->right

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T04:00:19.963

我认为您错误地设置了要添加到引用的节点，而不是设置对要添加的节点的左右引用。更改`node = ref->left`为`ref->left = node`，同样更改为右侧。

# c# - 将动态表格或 div 内容作为电子邮件正文内容发送

> ID：13106231
> 
> 赞同：5
> 
> 时间：2012-10-28T03:52:43.333
> 
> 标签：c#, asp.net, .net-4.0, sendmail

我有一个页面 ( `somePage.aspx`)，我需要已生成为电子邮件正文的内容

```
<div id="DV_TimeReportWraper" runat="server" style="display:block">
    <table id="TBL_UsersinTblTime">
       <tr id="TR_UsersinTblTime">
         <td id="TD_H_Name" class="Dg">
             name                
         </td>
         <td id="TD_H_UserID" class="Dg">
             ID
         </td>
         <td id="TD_H_Status" class="Dg">
             initial Stage
         </td>
         <td id="TD_H_SignOutAutoExeState" class="Dg">
             current Stage
         </td>
       </tr>
       <%
           if(edata != null)
               for (int idx=0;idx<edata.Count;idx++) {
                   var row = edata[idx];
                   bool bgcl = (idx % 2) == 0;
                   string BgCol = "";
                   if (bgcl)
                       BgCol = "#70878F";
                   else
                       BgCol = "#E6E6B8";
       %>
       <tr style=" background-color:<%=BgCol%>">
           <td id="TD_Name">
               <% = row["name"] %>
            </td>
            <td id="TD_UserID">
                <%= row["UserId"]%>
            </td>
            <td id="TD_Status">
                <%
                    int uidForSrc = Convert.ToInt32(row["UserId"]);
                    string src = "images/SignedOutNoFrame.png";
                    if (UserDidnotSignOutTimeOut(uidForSrc))
                        src = "images/didnotSignOut.png";
                 %>
                 <input type="image" src="<% =src %>" style="width:25px" />
             </td>
             <td id="TD_SignOutAutoExeState" >
                 <% 
                     string EexcSrc = "";
                     string inputType ="hidden";
                     //this updates if needed then returns true= needed update false = isn't need
                     if (UpdatedTimeOutOKForUSER(uidForSrc))
                     {
                         inputType = "image";
                         excSrc = "/images/SignedOutNoFrame.png";
                     }
                 %>
                 <input type="<%=inputType %>" src="<%=EexcSrc %>" style="width:25px" />
             </td>
        </tr>
        <%
            if (idx == edata.Count - 1)
                sendLog();
            }
        %>
    </table>
</div> 
```

代码`sendLog()`

```
public void sendLog()
{
    mail.aReciver="username@gmail.com";
    mail.bSubject="ttest";
    mail.cBody = DV_UsersInTblTime.InnerHtml;
    mail.HentalSend();
} 
```

我无法获得要分配的内容的价值`mail.cBody`。
这是在说价值不是文字等。

这就是我在外部类中使用的方法，直到最后一次尝试将页面内容的功能添加为主体之前，它都可以正常工作，如何在这里实现所需的结果？

```
public static class mail
{
    public static string aReciver, bSubject, cBody;
    public static void HentalSend()
    {
        string SmtpServer = "smtp.gmail.com";
        int port = 587;
        string sender = "Sender@domain.com";
        string ReCiver = aReciver;
        string Subject = bSubject;
        string Body = cBody;
        string account = "mail@domain.com";
        string Pass = "123456";
        Send(SmtpServer, port, account, Pass, sender, Receiver, Subject, Body);
        ... //send() is another relevant method to this question, it does rest of mail settings
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-04T03:49:08.720

此代码会将生成的动态控件的 HTML 放入字符串变量中。

```
StringBuilder stringBuilder = new StringBuilder();
StringWriter writer = new StringWriter(stringBuilder);
HtmlTextWriter htmlWriter = new HtmlTextWriter(writer);
try {
    DV_TimeReportWraper.RenderControl(htmlWriter);
} catch (HttpException generatedExceptionName) {
}

string DV_TimeReportWraper_innerHTML = stringBuilder.ToString(); 
```

然后只需`DV_TimeReportWraper_innerHTML`用作电子邮件的正文

如果此控件有子控件，您可能必须创建一个循环。更多信息在这里：http: [//msdn.microsoft.com/en-us/library/htwek607.aspx#Y472](http://msdn.microsoft.com/en-us/library/htwek607.aspx#Y472)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T20:59:17.700

我在这里假设您正在加载该页面，然后在页面加载后或在页面加载期间或在页面生命周期的某些部分期间尝试运行 sendLog 方法。试图获取尚未呈现的内容的 innerhtml 将无法正常工作。

本质上，您需要先渲染页面，然后获取内容。

[编辑] 我正在更新我的答案以包括我将如何做到这一点。而不是编写 .NET 代码来强制渲染，正如我在上面的评论中所说的那样。让 ASP.NET 为您完成肮脏的工作。

```
 using(WebClient c=new WebClient()){
    var result=c.DownloadString(@"http://yourdomain.com/somePage.aspx/");
} 
```

现在，您可以将该调用的结果用作电子邮件的正文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T04:48:52.343

试试这个 ，

**添加命名空间**

```
using System;
using System.Net.Mail;
using System.IO;
using System.Configuration; 
```

**邮件功能**

```
public void SendHTMLMail()
{
StreamReader reader = new StreamReader(Server.MapPath("~/somePage.aspx"));
string readFile = reader.ReadToEnd();
string myString = "";
myString = readFile;
myString = myString.Replace("$$Admin$$", "Sajan SJ");
myString = myString.Replace("$$CompanyName$$", "RFT");
myString = myString.Replace("$$Email$$", "sajan@roomfortekki.com");
myString = myString.Replace("$$Website$$", "http://www.roomfortekki.com");
MailMessage Msg = new MailMessage();
MailAddress fromMail = new MailAddress("sajan@roomfortekki.com");
// Sender e-mail address.
Msg.From = fromMail;
// Recipient e-mail address.
Msg.To.Add(new MailAddress("sajan@roomfortekki.com"));
// Subject of e-mail
Msg.Subject = "Send Mail with HTML File";
Msg.Body = myString.ToString();
Msg.IsBodyHtml = true;
string sSmtpServer = "";
sSmtpServer = "10.2.69.121";
SmtpClient a = new SmtpClient();
a.Host = sSmtpServer;
a.Send(Msg);
reader.Dispose();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T15:48:07.547

哈德拉达在这里指出了正确的方向

在 .ASPX 文件下的服务器上，添加所需的本地化文件

```
\App_LocalResources
    somePage.aspx.en.resx
    somePage.aspx.es.resx
    somePage.aspx.fr.resx
somePage.aspx 
```

*   添加您的翻译
*   将它们插入到您的 aspx 文件中

按照建议调用您的文件，但使用查询字符串除外

/somePage.aspx?culture=fr

在 somepage.aspx 中，在 OnLoad() 或 OnInit() 集中：

```
var culture = System.Globalization.CultureInfo.CreateSpecificCulture(Request["culture"])

if (culture != null)
   System.Threading.Thread.CurrentThread.CurrentUICulture = culture; 
```

瞧！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-10T10:24:58.287

发送电子邮件按钮点击代码：

```
 protected void BtnSendIngMail_Click(object sender, EventArgs e)
    {

       StringBuilder stringBuilder = new StringBuilder();
        StringWriter writer = new StringWriter(stringBuilder);
        HtmlTextWriter htmlWriter = new HtmlTextWriter(writer);
        try
        {

            DivSendMail.RenderControl(htmlWriter);
        }
        catch (HttpException generatedExceptionName)
        {
            e.ToString();
        }

        try
        {

            string DefProductTemp_Html = stringBuilder.ToString();

            //send mail
            string smtpServer = Convert.ToString(DotNetNuke.Common.Globals.HostSettings["SMTPServer"]);
            string uid = Convert.ToString(DotNetNuke.Common.Globals.HostSettings["SMTPUsername"]);
            string upwd = Convert.ToString(DotNetNuke.Common.Globals.HostSettings["SMTPPassword"]);

          //  DotNetNuke.Services.Mail.Mail.SendMail(uid, txtMail.Text, uid, "Proforma Invoice", DefProductTemp_Html, "", DotNetNuke.Services.Mail.MailFormat.Html.ToString(), "", "", "", "");

            System.Net.Mail.MailMessage mail = new System.Net.Mail.MailMessage();
            System.Net.Mail.SmtpClient client = new SmtpClient();
            mail.To.Add(txtMail.Text);
            mail.From = new System.Net.Mail.MailAddress(uid);
            mail.Subject = ddlSubList.SelectedItem.Text;
            mail.SubjectEncoding = System.Text.Encoding.UTF8;
            mail.IsBodyHtml = true;

            mail.Body = DefProductTemp_Html;

            //mail.BodyEncoding = System.Text.Encoding.UTF8;

            //mail.Priority = System.Net.Mail.MailPriority.High;
            client.Credentials = new System.Net.NetworkCredential(uid, upwd);

            //client.Host = "localhost";
            client.Host = "smtp.gmail.com";
            client.Port = 587;
            client.EnableSsl = true;
            client.Send(mail);
        }
        catch (Exception ex)
        {
           // catch
        } 
```

# spring - 如何使用 Spring MVC 和注释删除记录

> ID：13106232
> 
> 赞同：2
> 
> 时间：2012-10-28T03:52:47.107
> 
> 标签：spring, spring-mvc

我对 Spring 比较陌生，我正在尝试完成以下任务：

假设我在数据库表中有一个水果列表，其中包含 2 列“id”和“name”。我想要一个显示列表的页面，并在每个水果旁边有一个“删除”按钮。我认为这很容易实现，但我无法弄清楚，也找不到任何解释这一点的教程。

这就是我现在所拥有的：

看法：

```
<c:forEach items="${fruits}" var="fruit">
    <tr>
        <td><c:out value="${fruit.name}" /></td>
        <sec:authorize access="hasRole('admin')">
            <td>
                <a href="<c:url var="deleteUrl" value="/fruit/remove.html"/>">DELETE</a>
                <form id="${fruitFormId}" method="POST">
                    <input id="fruit" name="fruit" type="hidden" value="${fruit.id}"/>
                </form>
            </td>
        </sec:authorize>
    </tr>
</c:forEach> 
```

然后控制器：

```
@Controller
public class FruitController{

    @Autowired
    private FruitManager fruitManager;

    @RequestMapping(value = "/list", method = RequestMethod.GET)
    public String getFruits(ModelMap model) {
        model.addAttribute("fruits", this.fruitManager.getFruits());
        return "list";
    }

    @RequestMapping(value = "/fruit/remove", method = RequestMethod.POST)
    public String removeAd(Fruit fruit) {
        fruitManager.removeFruit(fruit);
        return "/list";
    } 
```

我什至不确定我现在是否正在使用“良好而干净”的方式，并且希望按照约定来完成这种“正确的方式”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-28T08:39:05.367

你的代码是正确的，除了两个小问题： - 你不会收到`fruit`但是`fruitId`. - 你需要一个带有发送按钮而不是链接的 HTML 表单

所以你需要稍微纠正你的控制器。

```
@RequestMapping(value = "/fruit/remove", method = RequestMethod.POST)
public String removeAd(@RequestParam("fruit") long fruitId) {
    Fruit fruit = fruitManager.loadById(fruitId);
    fruitManager.removeFruit(fruit);
    //or
    fruitManager.removeFruitById(fruitId);
    return "redirct:/list";
} 
```

*然后我建议在 POST 之后重定向（而不是直接返回列表页面），因此如果用户在删除水果后按下浏览器刷新按钮，您将不会遇到问题。*

对于 HTML 内容，您不需要任何 JQuery 或 JavaScript，除非您需要一些删除确认消息。

```
<c:url var="deleteUrl" value="/fruit/remove.html"/>    
<form id="${fruitFormId}" action="${deleteUrl}" method="POST">
      <input id="fruit" name="fruit" type="hidden" value="${fruit.id}"/>
      <input type="submit" value="delete" onClick="return confirm('sure?')"/>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T04:51:57.090

这很容易，伙计。您只需使用 Jquery 或其他方式将 ajax 函数绑定到删除按钮，但首先我想确认您的项目可以在 tomcat 中运行良好。我在您的代码中发现的一个问题是 removeAd(Fruit fruit) 方法。你可以通过http传递一个对象Fruit，你可以得到fruit的Id。将方法更改为 removeAd(String id)。在方法中，您可以使用 reqest.getParameter() 来获取值。这是我推荐的教程：http: [//www.ibm.com/developerworks/web/library/wa-spring3/index.html](http://www.ibm.com/developerworks/web/library/wa-spring3/index.html)。

# c - VB6 - 使用指针声明和调用 C DLL

> ID：13106234
> 
> 赞同：3
> 
> 时间：2012-10-28T03:53:26.360
> 
> 标签：c, dll, vb6

我有一个旧的 C DLL 用于从 Ruby 调用，但现在我需要从 VB6 调用它，但我不知道这样做的正确方法。

这是我需要的函数的标题：

`int Decrunch(const BYTE *src, BYTE *dest, DWORD src_length)`

*src 是一个字节序列，将被函数解密

*dest 是一个缓冲区，它将接收解密的数据。我可以使用 dest=NULL 调用该函数，它将返回解密数据的大小，因此我可以使用它来创建具有正确大小的缓冲区。

我尝试将 src 和 dest 都声明为字符串（就像我在 Ruby 中所做的那样），但它不起作用。我还尝试将它们声明为 Byte 并传递字节数组的第一个元素，正如一些教程所指出的那样，但我认为我没有正确地做到这一点。

有人可以帮我弄这个吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:10:18.350

您可以像这样使用 CDECL 调用 thunk

```
Option Explicit

'--- for VirtualProtect'
Private Const PAGE_EXECUTE_READWRITE    As Long = &H40

Private Declare Function VirtualProtect Lib "kernel32" (lpAddress As Any, ByVal dwSize As Long, ByVal flNewProtect As Long, lpflOldProtect As Long) As Long
Private Declare Function LoadLibrary Lib "kernel32" Alias "LoadLibraryA" (ByVal lpLibFileName As String) As Long
Private Declare Function GetProcAddress Lib "kernel32" (ByVal hModule As Long, ByVal lpProcName As String) As Long
Private Declare Function CallWindowProc Lib "user32" Alias "CallWindowProcA" (ByVal lpPrevWndFunc As Long, ByVal hWnd As Long, ByVal Msg As Long, ByVal wParam As Long, ByVal lParam As Long) As Long

Private Const STR_MYDLL         As String = "my.dll"

Private Type UcsParamThunk
    pfn                     As Long
    Call_(0 To 7)           As Long
End Type

Private m_hModule           As Long
Private m_uCallThunk        As UcsParamThunk

Private Sub Form_Load()
    Dim baSrc()         As Byte
    Dim baDst()         As Byte

    On Error GoTo EH
    ReDim baSrc(0 To 10000) As Byte
    ReDim baDst(0 To 20000) As Byte
    pvCallFunc "Decrunch", VarPtr(baSrc(0)), VarPtr(baDst(0)), UBound(baSrc) + 1
    Exit Sub
EH:
    MsgBox Error$, vbCritical
End Sub

Private Function pvCallFunc(sFunc As String, ParamArray A()) As Long
    Dim pfn             As Long
    Dim lIdx            As Long
    Dim aParams()       As Long

    If m_hModule = 0 Then
        m_hModule = LoadLibrary(STR_MYDLL)
        If m_hModule = 0 Then
            Err.Raise vbObjectError, , STR_MYDLL & " not found"
        End If
        pvInitCallCdeclThunk m_uCallThunk
    End If
    pfn = GetProcAddress(m_hModule, sFunc)
    If pfn = 0 Then
        Err.Raise vbObjectError, , "Export not found: " & sFunc
    End If
    ReDim aParams(0 To UBound(A) + 1) As Long
    For lIdx = 0 To UBound(A)
        aParams(lIdx) = CLng(A(lIdx))
    Next
    pvCallFunc = CallWindowProc(m_uCallThunk.pfn, pfn, UBound(aParams), VarPtr(aParams(0)), 0)
End Function

Private Sub pvInitCallCdeclThunk(Thunk As UcsParamThunk)
'void _stdcall thunk(int pfn, int count, int args, int dummy)
'        push    ebp
'        mov     ebp, esp
'        mov     ecx, count
'        jecxz   _skip_params
'        mov     edx, args
'_params_loop:
'        push    dword ptr [edx + ecx * 4 - 4]
'        loop    _params_loop
'_skip_params:
'        call pfn
'        mov     esp,ebp
'        pop     ebp
'        ret     10h
'        nop
'        nop
    With Thunk
        .Call_(0) = &H8BEC8B55
        .Call_(1) = &H9E30C4D
        .Call_(2) = &HFF10558B
        .Call_(3) = &HE2FC8A74
        .Call_(4) = &H855FFFA
        .Call_(5) = &HC25DE58B
        .Call_(6) = &H90900010
        .pfn = VarPtr(.Call_(0))
        Call VirtualProtect(Thunk, Len(Thunk), PAGE_EXECUTE_READWRITE, 0)
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T07:26:03.383

航空代码

```
Private Declare DecrunchGetLength Alias "Decrunch" Lib "somedll.DLL" (ByRef src As Byte, ByVal nullptr As Long, ByVal SrcLength As Long) As Long 

Private Declare Decrunch Alias "Decrunch" Lib "somedll.DLL" (ByRef src As Byte, ByRef dest As Byte, ByVal SrcLength As Long) As Long 

Dim destLen As Long
 Dim src(0 To 9) As Byte 
Dim dest() As Byte 

' get bytes into src somehow 

' get dest length 
destLen = DecrunchGetLen( src(0), 0, 10) 

ReDim dest(0 To destLen - 1) 
destLen = Decrunch( src(0), dest(0), 10) 
```

有用的链接

*   [声明声明](http://msdn.microsoft.com/en-us/library/aa243324%28v=vs.60%29.aspx)
*   *[从 VB5/VB6](http://vb.mvps.org/tips/vb5dll.asp)*高级调用 C DLL**

# android - 检查哈希表中的空位置

> ID：13106235
> 
> 赞同：1
> 
> 时间：2012-10-28T03:53:29.543
> 
> 标签：android, hashtable

我要做的基本上是删除哈希表中的一个位置，然后将该哈希表保存到用户手机上的文件中。哈希表只有字符串，所以不涉及序列化。哈希表的布局如下：

键->整数

值->ArrayList()

在arrayList 中只是字符串值。

我遇到的问题是，当我删除 arrayList 中的一个位置时，如果它是该 arrayList 中的最后一个值，这意味着，哈希表中的该位置已变为空。出于某种原因，我无法检查这种情况......我尝试了各种功能，但似乎都没有。这是我从哈希表中删除值的代码

```
 // delete the assignment from the public list
                for (int i = 0; i < allAssignments.size(); i++) {

        //Here is where I get a null pointer-vvv    
    for (int p = 0; p < allAssignments.get(i).size(); p++) {
                        if (allAssignments.get(i).get(p).getTitle().equals(title)
                                && allAssignments.get(i).get(p)
                                        .getDate_due().equals(Date)) {
                            allAssignments.get(i).remove(p);
                        }
                    }
            } 
```

如果我按 4-3-2-1 的顺序删除位置，删除工作非常好，但是如果我尝试删除第一个位置，然后尝试删除第二个位置，它会给我一个空指针，因为它正在尝试访问第一名。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T04:13:16.133

```
ArrayList temp = allAssignments.get(i);
if(temp !null){
...
} 
```

这会检查 null。

[类似的问题](https://stackoverflow.com/questions/11612467/checking-for-null-in-hashtable-get-operation)

# c - 尝试将一个 c 文件链接到另一个时出错

> ID：13106236
> 
> 赞同：1
> 
> 时间：2012-10-28T03:53:30.993
> 
> 标签：c, linux, gcc, compilation, linker

我正在尝试分别编译每个`c`文件，然后将它们链接在一起作为单个可执行文件。以下是2个`c`文件：

*文件1.c*

```
#include <stdio.h>

void display();
int count;

int main() {
 printf("Inside the function main\n");
 count = 10;
 display();
} 
```

*文件2.c*

```
#include <stdio.h>

extern int count;
void display() {
  printf("Sunday mornings are beautiful !\n");
  printf("%d\n",count);
} 
```

但是当我尝试编译它们时，我得到了一些错误：

## 当我编译 file1.c

```
gcc file1.c -o file1
/tmp/ccV5kaGA.o: In function `main':
file1.c:(.text+0x20): undefined reference to `display'
collect2: ld returned 1 exit status 
```

## 当我编译 file2.c

```
gcc file2.c -o file2
/usr/lib/gcc/i686-redhat-linux/4.6.3/../../../crt1.o: In function `_start':
(.text+0x18): undefined reference to `main'
/tmp/cczHziYd.o: In function `display':
file2.c:(.text+0x14): undefined reference to `count'
collect2: ld returned 1 exit status 
```

我犯了什么错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T03:55:40.663

您正在分别编译每个，但问题是您还试图分别链接它们。

```
gcc file1.c file2.c  -o theprogram   # compile and link both files 
```

或者：

```
gcc -c file1.c        # only compiles to file1.o
gcc -c file2.c        # only compiles to file2.o

gcc file1.o file2.o -o the program   # links them together 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T03:57:19.603

您必须将它们链接到单个可执行文件中。

```
gcc -c file1.c -o file1.o
gcc -c file2.c -o file2.o
gcc file1.o file2.o -o theprogram 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-28T04:02:45.187

您在这里有两个选择：

1) 在一个编译单元中编译两个 c 文件。这意味着每个文件都被编译，然后它们被立即链接。

```
gcc file1.c file2.c -o program 
```

这种技术的缺点是对任一文件的更改都需要从头开始完全重新编译。在一个更大的项目中，这可能是浪费时间。

2) 使用 .h 文件声明函数并将此 .h 文件包含在两个 .c 文件中。确保在调用或实现其功能的每个 .c 文件中#include .h 文件。

文件1.h：

```
void display(); 
```

然后，**使用 -c 标志编译每个 .c 文件**。这可以防止 gcc 过早地链接代码。最后，用 gcc 链接这两个编译好的文件。

总之：

```
gcc -c file1.c -o file1.o
gcc -c file2.c -o file2.o
gcc file1.o file2.o -o myprogram 
```

我建议您查看 Makefiles，它可以帮助您自动化此过程。

# java - 为什么我的动作粗糙（不流畅）？

> ID：13106242
> 
> 赞同：0
> 
> 时间：2012-10-28T03:55:52.207
> 
> 标签：java

问题是，如果我按住其中一个箭头键，则在不断移动之间会有延迟。我的意思是，如果我按住左键，它会移动 7 个像素，然后稍等一下，它会不断移动。有人可以告诉我如何解决这个问题，让它“顺利”移动

代码 - - - - - - - - - -

打包游戏；

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;

public class GamePlay implements KeyListener{
 int shipX = 400;
 int shipY = 300;
public int shipSpeed = 7;
public void incShipX(int i) {this.shipX += i;}
public void incShipY(int i) {this.shipY += i;}

Image ship;

File shipFile = new File("C:/Users/Pictures/ship.png");

public GamePlay() {
    try {        
        ship = ImageIO.read(shipFile);

    } catch (IOException ex) {
        Logger.getLogger(GamePlay.class.getName()).log(Level.SEVERE, null, ex);
    }

}

public void drawShip(Graphics g) {  

    g.drawImage(ship, shipX, shipY, null);    

}

@Override
public void keyTyped(KeyEvent ke) {

}

@Override
public void keyPressed(KeyEvent ke) {
    if(ke.getKeyCode() == KeyEvent.VK_LEFT) {
        incShipX(-shipSpeed);
    }

    if(ke.getKeyCode() == KeyEvent.VK_RIGHT) {
        incShipX(shipSpeed);
    }

    if(ke.getKeyCode() == KeyEvent.VK_UP) {
        incShipY(-shipSpeed);
    }

    if(ke.getKeyCode() == KeyEvent.VK_DOWN) {
        incShipY(shipSpeed);
    }
}

@Override
public void keyReleased(KeyEvent ke) {

} 
```

}

我将 keyListener 添加到我的 Canvas --- add(gamePlay);

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T04:05:43.160

当您按下箭头键时，您的操作系统只会向您的 Java 应用程序发送一个按键事件。这意味着按下该键只会使您的船移动一次。

如果您按住按键，在延迟之后，您的操作系统将开始发送重复的按键事件。如果我在这里按住我的's'键...... ssssssssssssssssssss 我的第一个's'立即出现，然后有一个短暂的延迟，然后其余的's'字符很快进入。这与您的程序中发生的事情相同。

要更正此问题，您需要定期更新您的船舶（或者如果您在更新船舶时考虑了时间增量，则以可变的时间间隔更新您的船舶）。请注意一个重要的区别：被按下的键发生在某个时刻，而键的状态是随时间变化的函数（值为 UP 或 DOWN）。

不确定我是否为你混淆了这个问题。如果您需要，我可以尝试以不同的方式解释。

# node.js - 我应该如何保留用户信息的索引？

> ID：13106243
> 
> 赞同：0
> 
> 时间：2012-10-28T03:56:20.350
> 
> 标签：node.js, mongodb, node-mongodb-native

假设我`name`经常需要每个用户。与其查询每个文档然后提取这个属性，什么是保持索引的最佳方法，我可以快速调用？

我是否应该添加另一个只是这些属性数组的文档，然后在每次添加或删除用户时手动编辑它？有没有更好的方法使用 mongo 索引或其他东西？

感谢您的任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T04:17:33.023

您可能想要设置某种缓存。我会为此使用[redis](http://redis.io/)机器。这样你就可以避免经常去MongoDB。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-28T09:17:14.797

你不需要：

*   改变查询方式
*   更改您的架构

MongoDB 和几乎所有其他数据库都有称为索引的东西。这些允许对数据值进行 O(log n) 操作，从而导致更快的查询，不仅如此，它们还被设计为一种数据缓存，并且可以驻留在内存中。

您可以通过以下方式简单地暗示名称索引：

`db.uses.ensureIndex({name:1})`

我建议您更多地研究数据库的这一面：

*   [http://www.mongodb.org/display/DOCS/Indexes](http://www.mongodb.org/display/DOCS/Indexes)
*   [数据库索引如何工作？](https://stackoverflow.com/questions/1108/how-does-database-indexing-work)

这些链接应该可以帮助您入门。索引的理论和实现在所有数据库中基本相同。MongoDB 确实在内存方面做了一些有趣的事情，但除此之外它是相同的。

### 编辑

我意识到我读的问题有点错误。您想存储所有用户名的列表，因为您一次需要它们。

对于庞大的用户群，我认为 Redis 不能充分地做到这一点（实际上我 90% 肯定它不能），而且 MongoDB 中的任何聚合文档结构以及对于基于内存的大用户而言的容纳它都会很麻烦至少可以说，一个用于容纳结构的内存要求。

我建议您真正考虑一下为什么需要它。您应该真正计划好您的查询场景并考虑需求，您在这里走的是一条奇怪的道路。

# android - 具有自我隐藏控件的全屏视频播放器

> ID：13106244
> 
> 赞同：0
> 
> 时间：2012-10-28T03:56:41.200
> 
> 标签：android

我想在我的应用程序中添加一个视频播放器功能来播放来自我的服务器的 MP4 文件，也许还可以播放 Youtube 上托管的视频。

视频只能在全屏模式下播放，带有叠加控件（如 Youtube 应用程序）和手势。

我参考了 Android 文档中的一个示例，并找到了我需要的视频播放器示例（视图/系统 UI 可见性/视频播放器）。不幸的是，它使用 ActionBar 和新的 SYSTEM_UI 标志来隐藏+全屏并显示控件和管理操作栏透明度。

我希望我的应用程序与 Gingerbread 系统兼容，所以我不能从这个示例开始。

你知道我如何模拟示例的视频播放器 UI 样式（或相同的 ICS Youtube 应用程序）吗？

它是否像在 videoView 上堆叠视图一样“简单”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T10:05:54.740

就是这么简单。

我确实将我的 VideoView 用作最低层（xml 中的第一个条目）并将其他几个层放在它上面。但是，视频不会在上层引起 onDraw 调用，因此您需要自己执行此操作以确保它们被绘制。

# objective-c - 调整大小时淡入 UIView 阴影

> ID：13106245
> 
> 赞同：0
> 
> 时间：2012-10-28T03:56:55.373
> 
> 标签：objective-c, ios, cocoa-touch, quartz-graphics

我试图`UIView`在我淡入阴影的同时缩放我的，使用以下：

```
 myController.view.layer.shadowOffset = CGSizeMake(0, 3);
    myController.view.layer.shadowColor = [UIColor blackColor].CGColor;
    myController.view.layer.shadowOpacity = 0.0;
    myController.view.layer.shadowPath = [UIBezierPath bezierPathWithRect:myController.view.bounds].CGPath;

    [UIView animateWithDuration:0.3
                     animations:^{
                         //shrink the view
                         myController.view.transform = CGAffineTransformMakeScale(0.8, 0.8);

                         //fade in the shadow
                         myController.view.layer.shadowOpacity = 0.8;
                     }
                     completion:^(BOOL finished){
                          ...etc 
```

视图正确调整大小，但阴影立即出现而不是淡入。

难道我做错了什么？我以为`shadowOpacity`是动画的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T06:15:47.097

您必须使用 Core Animations 为视图层属性设置动画：

```
#import <QuartzCore/CAAnimation.h>

CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"shadowOpacity"];
animation.fromValue = [NSNumber numberWithFloat:1.0];
animation.toValue = [NSNumber numberWithFloat:0.8];
animation.duration = 1.0;
[myView.layer addAnimation:animation forKey:@"shadowOpacity"];
myView.layer.shadowOpacity = 0.0; 
```

# java - 没有 null 作为“空节点”的多态二叉搜索树

> ID：13106247
> 
> 赞同：1
> 
> 时间：2012-10-28T03:57:12.290
> 
> 标签：java, project, binary-search-tree

我正在做一个学校项目，我们必须实现一个多态二叉搜索树，而不是使用对树的“空”部分的空引用，而是使用两个类（NonEmptyTree 和 EmptyTree），你应该使用多态来解决什么时候应该采取某些行动。

例如，如果我想在非多态二叉搜索树中插入特定的键值，通常您可以在遍历树时递归地与 null 进行比较，每当获得 compareTo 值为 0 时就保留您的值。但是在这种情况下，由于这个 EmptyTree 类的设计（它只有一个实例），您基本上被禁止主动与“释放”EmptyTree 的单个实例的“EmptyTree.getInstance()”进行比较。（getInstance() 是一个静态方法）。

我正在使用到目前为止编写的代码附加到这两个类的链接。我认为 Pastebin 的语法高亮比在这里插入我所有的代码更容易阅读，所以希望这没问题。

我不是在寻找解决方案或任何重大赠品，但我非常沮丧，因为以这种方式实现树似乎不合逻辑。（我已经用空引用实现了一个相当完整的 BST，但似乎这个练习毫无意义，因为我不知道如何前进）。此外，这要到下周日才到期，所以我的愤怒根本不是拖延的结果，而是对我个人能力不足的理智上的挫败感。

任何见解都值得赞赏。

NonEmptyTree 类： [http://pastebin.com/](http://pastebin.com/)

EmptyTree 类： [http ://pastebin.com/](http://pastebin.com/)

如您所见，我广泛使用 EmptyTree.getInstance() 方法，因为它似乎是一种或多或少有效的方法来检查我是否应该实例化一个新的 NonEmptyList 以固定在该位置。但是，教授在项目规范中的话特别指出：“您应该使用多态性（以及适当的异常处理）来处理空树和非空树之间的差异。如果不这样做，将对您的项目等级。”

然而，我觉得这些说明与他上学期的讲座相矛盾，其中的信息是“永远不要对“控制流”使用异常处理，即滥用捕获异常作为控制代码行为的一种方式。” 即使是我编写的使用 try-catch 块返回 Tree 的单一方法也感觉像是亵渎神明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T04:10:32.393

您可能会认为这是一个“解决方案”或“主要赠品”，但是......

我同意这似乎有点愚蠢，至少在 Java 中是这样。

但是，这个想法可能是让您的`EmptyTree`和`NonEmptyTree`类从某种`PossiblyEmptyTree`基类继承，然后在每个基类中以不同的方式覆盖方法以实现正确的行为，而调用者不知道（或检查）是否`PossiblyEmptyTree`为空（*即*多态性） .

您的解决方案中可能出现的一些代码：

```
public class EmptyTree ... {
    ...

    public V search(K key) {
        /* definitely not here! */
        return null;
    }
} 
```

# javascript - 使用 Greasemonkey 防止下载脚本

> ID：13106250
> 
> 赞同：4
> 
> 时间：2012-10-28T03:57:41.847
> 
> 标签：javascript, firefox, greasemonkey

使用 Greasemonkey，我希望阻止下载图像和脚本。

从[现有的帖子](https://stackoverflow.com/questions/3972038/stop-execution-of-javascript-function-client-side-or-tweak-it)中，我了解到可以使用 document-start 指令在脚本执行之前跳转。

我是否可以在允许我找到和标签并在下载之前删除这些标签或阻止下载`window.addEventListener`的特定事件上使用？`src = xxx.js``xxx.jpg``src=`

注意：这里是[Mozilla 支持的事件列表](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference?redirectlocale=en-US&redirectslug=DOM/DOM_event_reference)。

修正：我想用我自己的脚本或图像替换被阻止的下载。

# ruby-on-rails - 在亚马逊云上存储heroku应用程序资产的rails方式

> ID：13106253
> 
> 赞同：4
> 
> 时间：2012-10-28T03:58:28.213
> 
> 标签：ruby-on-rails, heroku, amazon-web-services

希望在 Heroku 上使用我的 Rails 应用程序，一切都可以（资产、数据库、上传）使用亚马逊。

资产最困扰我... Heroku 帮助文件说要创建一个存储桶来将文件转储到并引用为：[http](http://s3.amazonaws.com/bucketname/filename) ://s3.amazonaws.com/bucketname/filename 。这给了我两种开发选择（我能想到的）：

1.  我可以让 .gitignore 不查看要在本地开发的资产，并确保在清理所有参考资料或编写一些帮助程序后将这些文件上传到我的 AWS 存储桶？
2.  始终将所有内容存储在我的存储桶中，并在本地开发期间被迫调用我的存储桶。

我想知道我是否可以配置它，以便我可以在本地将应用程序资产存储在 app/assets 文件夹中，并在推送/部署到 heroku 时自动将资产推送到亚马逊？

这是我在亚马逊上的第一个 heroku rails 应用程序，所以请随意侮辱我对如何配置这些东西以及正确的工作流程的智慧。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T15:17:42.663

试试[`asset_sync`宝石](https://github.com/rumblelabs/asset_sync)。这可以让您完全按照自己的意愿行事：在本地使用资产管道，然后在推送到 Heroku 后从 S3（可选地通过 Cloudfront）提供资产。

请注意，Heroku 的编译步骤通常不提供对配置变量的访问，您需要这些配置变量`asset_sync`才能推送到 S3。对此的解决方案（实际上是整个asset_sync HOWTO）发布在[Using a CDN Asset Host with Rails 3.1](https://devcenter.heroku.com/articles/cdn-asset-host-rails31)指南中。

这种方法的缺点是它违反了[应用程序的 12 要素](http://www.12factor.net/)原则中的一些——特别是与“构建、发布、运行”有关。这会产生一些负面影响：例如，`heroku releases:rollback`将回滚您的应用程序，但*不会*重新编译和重新上传您的资产。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T09:40:03.460

在 Rails 3 中，您可以使用[Rails 资产管道](http://guides.rubyonrails.org/asset_pipeline.html)对资产进行不同的配置。基本上在您的`config/environments/production.rb`文件中，您可以执行以下操作：

```
 ActionController::Base.asset_host = "/path/to/s3/bucket" 
```

在本地，您将继续直接从 Rails 服务器提供资产。关于部署，您可以使用 gem 编写 rake 任务，`aws-s3`或者我认为您应该能够使用`capistrano`. 另一种选择是使用 CDN 并将其配置为在生产服务器上搜索资产，这样您就不需要单独部署它们。

# php - 我的表格只提交一次

> ID：13106256
> 
> 赞同：2
> 
> 时间：2012-10-28T03:58:59.620
> 
> 标签：php, javascript, forms

[http://www.gamereview.tv/email/](http://www.gamereview.tv/email/)

提交按钮只能使用一次。如果第一次尝试出现错误，则无法再次单击该按钮。测试时，输入无效的电子邮件。它显示提示，然后在您修复它之后，该按钮不再起作用。这是为什么？

JavaScript：

```
$('#submit').click(function() {
    $("#message").slideUp(200,function() {
        $('#message').hide();

        // Kick in Validation
        $('#name, #subject, #phone, #comments, #website, #verify, #email').triggerHandler("focusout");

        if ($('#contact mark.error').size()>0) {
            if(shake == "Yes") {
                $('#contact').effect('shake', { times:2 }, 75, function(){
                    $('#contact input.error:first, #contact textarea.error:first').focus();
                });
            } else $('#contact input.error:first, #contact textarea.error:first').focus();

            return false;
        }

    });
});

$('#contactform').submit(function(){

    if ($('#contact mark.error').size()>0) {
        if(shake == "Yes") {
        $('#contact').effect('shake', { times:2 }, 75);
        }
        return false;
    }

    var action = $(this).attr('action');

    $('#submit')
        .after('<img src="assets/ajax-loader.gif" class="loader" />')
        .attr('disabled','disabled');

    $.post(action, {
        name: $('#name').val(),
        email: $('#email').val(),
        phone: $('#phone').val(),
        website: $('#website').val(),
        subject: $('#subject').val(),
        comments: $('#comments').val(),
        verify: $('#verify').val()
    },
        function(data){
            $('#message').html( data );
            $('#message').slideDown();
            $('#contactform img.loader').fadeOut('slow',function(){$(this).remove()});
            $('#contactform #submit').attr('disabled','');
            if(data.match('success') != null) $('#contactform').slideUp('slow');

        }
    );

    return false;

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T04:05:57.140

您的代码禁用了提交按钮，只有在发布成功时才重新启用它。

# mysql - 如果该列可能存在或不存在，我如何从表 B 中获取列？

> ID：13106257
> 
> 赞同：2
> 
> 时间：2012-10-28T03:59:02.363
> 
> 标签：mysql, sql

我有两张桌子：

表 A：

```
| id | type   | name
| 1  | Person | Fred
| 2  | Animal | Rover
| 3  | Animal | Snowball
| 4  | Person | Mary 
```

表 B：

```
| id | city
| 1  | NYC
| 4  | Charlotte 
```

我想要的是：

```
| id | type   | name     | city
| 1  | Person | Fred     | NYC
| 2  | Animal | Rover    | NULL
| 3  | Animal | Snowball | NULL
| 4  | Person | Mary     | Charlotte 
```

换句话说，表 A 是人和动物的表。表 B 是人们居住的城市的表。我想（在单个查询中，如果可能）从表 A 中获取每个结果，如果是一个人，则在表 B 中获取该人的城市。这可能在一个查询？如果没有，最快的方法是什么？

我试图做一个简单的连接（例如“SELECT * FROM tableA,tableB WHERE tableA.id==tableB.id”），但这样做只会得到人的结果，而不是动物的结果。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T04:00:13.313

用`LEFT JOIN`在这个

```
SELECT  a.*, b.city
FROM    tableA a
        LEFT JOIN tableB  b
            ON a.ID = b.ID 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/b21ff/1)

*并假设**只有**人有记录`tableB`*

# iphone - UITableView 没有响应选择

> ID：13106264
> 
> 赞同：4
> 
> 时间：2012-10-28T04:00:18.947
> 
> 标签：iphone, objective-c, ios, uitableview

我有一个`UITableView`添加到`UIView`主视图内部的。该表加载自定义单元格并加载数据并正确响应滚动，但`didSelectRowAtIndexPath`未被调用。如果我将表移到其容器之外，则调用`UIView`该方法。`delegate`

因此，它仅在容器视图内不起作用，但该视图具有`userInteractionEnable = YES`并且表格响应滚动。该表也设置为单选。

知道为什么它不会响应选择吗？提前感谢您的帮助

这是一些代码：

```
self.table.delegate = self;
self.table.dataSource = self;

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

// Customize the number of rows in the table view.
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.classNames count];
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath     *)indexPath
{
    static NSString *MyIdentifier = @"MyIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];

    if(cell == nil)
    {
        [[NSBundle mainBundle] loadNibNamed:@"ClassCell" owner:self options:nil];
        cell = self.tvCell;
        self.tvCell = nil;
    }

    //Set up custom cell

    return cell;
}

//When cell is tapped
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *className = [NSString stringWithFormat:@"%@", [self.classNames objectAtIndex:indexPath.row]];

    if([[AppManager sharedManager] isPad])
    {
        ClassWork *controller = [[ClassWork alloc] initWithNibName:@"ClassWork_iPad" bundle:nil];
        controller.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        controller.delegate = self;
        [controller setClassIndex:indexPath.row];
        [controller setClassTitle:[NSString stringWithString:className]];
        [self presentModalViewController:controller animated:YES];
    }

    else
    {
        if([[AppManager sharedManager] is4inchScreen])
        {
            ClassWork *controller = [[ClassWork alloc] initWithNibName:@"ClassWork_iPhone4in" bundle:nil];
            controller.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
            controller.delegate = self;
            [controller setClassIndex:indexPath.row];
            [controller setClassTitle:[NSString stringWithString:className]];
            [self presentModalViewController:controller animated:YES];
        }

        else
        {
            ClassWork *controller = [[ClassWork alloc] initWithNibName:@"ClassWork_iPhone" bundle:nil];
            controller.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
            controller.delegate = self;
            [controller setClassIndex:indexPath.row];
            [controller setClassTitle:[NSString stringWithString:className]];
            [self presentModalViewController:controller animated:YES];
        }
    }
}

//Delete Cell
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    // If row is deleted, remove it from the list.
    if(editingStyle == UITableViewCellEditingStyleDelete)
    {
        [self.classNames removeObjectAtIndex:indexPath.row];
        [self.classDays removeObjectAtIndex:indexPath.row];
        [self.classTimes removeObjectAtIndex:indexPath.row];

        //Get Corresponding File Path
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory,NSUserDomainMask,YES);
        NSString *documentsDirectory = [paths objectAtIndex:(0)];
        NSString *classNum = [NSString stringWithFormat:@"Class%d", indexPath.row];
        NSString *classFolder = [documentsDirectory stringByAppendingPathComponent:classNum];

        //Remove Folder
        [[NSFileManager defaultManager] removeItemAtPath: classFolder error: nil];

        //Change numClasses
        NSString *fileName = [documentsDirectory stringByAppendingPathComponent:kNumClasses];

        //Get current number
        NSString *str = [[AppManager sharedManager] loadFileData:fileName];
        int numClasses = [str intValue] - 1;

        //Decrease by 1
        str = [NSString stringWithFormat:@"%d", numClasses];

        //Re-write
        NSData *outFileData = [str dataUsingEncoding:[NSString defaultCStringEncoding]];
        [[AppManager sharedManager] writeFileData:fileName :outFileData];

        //Rename class folders
        NSFileManager *fileMgr = [NSFileManager defaultManager];
        NSString *newFilePath;
        NSString *newClassNum;
        int newIndex = 0;

        for(int i = 0; i < (numClasses + 1); i++)
        {
            classNum = [NSString stringWithFormat:@"Class%d", i];
            classFolder = [documentsDirectory stringByAppendingPathComponent:classNum];

            if([[NSFileManager defaultManager] fileExistsAtPath:classFolder])
            {
                newClassNum = [NSString stringWithFormat:@"Class%d", newIndex];
                newFilePath = [documentsDirectory stringByAppendingPathComponent:newClassNum];
                newIndex++;

                if(classFolder != newFilePath)
                {
                    // Rename the file by moving the file
                    [fileMgr moveItemAtPath:classFolder toPath:newFilePath error:nil];
                }
            }
        }

        //Reload Table
        [self.table reloadData];

        [self setNumberOfAssignmentsToCome];

        if(numClasses == 0)
        {
            self.noClassesLabel1.hidden = NO;
            self.noClassesLabel2.hidden = NO;
            self.table.userInteractionEnabled = NO;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-09T01:52:05.913

原来有一个手势识别器吸收了所有的触摸。我将其更改为在某些时间出现并在其他时间消失，现在表格视图可以正常工作

# objective-c - 如何在 iOS 中加载 XIB

> ID：13106267
> 
> 赞同：0
> 
> 时间：2012-10-28T04:00:36.810
> 
> 标签：objective-c, ios

> **可能重复：**
> [在 iOS 应用程序中显示不同的 XIB/NIB](https://stackoverflow.com/questions/6526416/showing-a-different-xib-nib-in-an-ios-app)

目前我有一个带有一个视图和一个 xib 的 iOS 应用程序。按下按钮后，我想用不同的 xib 显示不同的视图。问题是我只是不知道该怎么做。目前，我正在实例化控制器：

（我要加载的视图是 HomeViewController。我目前在 TipAppViewController 中）

```
HomeViewController *homeViewController = [[HomeViewController alloc]   initWithNibName:@"HomeViewController" bundle:nil]; 
```

我不确定我现在应该去哪里。我目前没有使用导航控制器，也不想使用，因为我不想在屏幕顶部出现蓝条。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T04:24:43.517

你应该这样做

```
HomeViewController *homeViewController = [[HomeViewController alloc] initWithNibName:@"HomeViewController" bundle:nil];
[self presentViewController:homeViewController animated:YES completion:nil]; 
```

# android - 如何从 getExtras 检索标题和 url

> ID：13106268
> 
> 赞同：1
> 
> 时间：2012-10-28T04:00:40.883
> 
> 标签：android, android-intent, intentfilter

我正在使用以下代码，以便当用户在浏览器中选择共享选项时显示我的应用程序：

```
 <intent-filter android:label="@string/share_to_myapp">
            <action android:name="android.intent.action.SEND" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="text/plain"/>
      </intent-filter> 
```

当用户选择要共享的应用程序时，我无法弄清楚如何从意图中检索标题和 url。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T04:13:59.963

你可以使用这个：

```
Intent i = myActivity.getIntent();
String url = i.getClipData();
String title = i.getStringExtra(Intent.EXTRA_TITLE); //Title of content
String text = i.getStringExtra(Intent.EXTRA_TEXT); //Content
String subject = i.getStringExtra(Intent.EXTRA_SUBJECT); //Subject in case "mail" 
```

# bash - 如何下载 GitHub 项目的最新版本以在 bash 脚本中使用？

> ID：13106269
> 
> 赞同：0
> 
> 时间：2012-10-28T04:00:45.160
> 
> 标签：bash, github

我正在编写一个设置 CMS ( [Statamic](http://statamic.com) ) 的脚本，以便开发人员可以直接开始编写代码，而不必手动移动内容、从 GitHub 收集常用代码等等。

我需要一种从 GitHub 获取项目最新版本的方法，将其解压缩，并且能够在不知道最新 sha 的情况下移动内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T04:00:45.160

# 代码

```
# Download most recent version from GitHub
curl -L -o DOWNLOADED_FILE_NAME.zip https://api.github.com/repos/USER/REPO/zipball/BRANCH
unzip DOWNLOADED_FILE_NAME.zip
# Find out the name of the unzipped dir and assign it to a variable.
UNZIPPED_DIR=$(compgen -A builtin -f USER-REPO)
rm DOWNLOADED_FILE_NAME.zip 
```

## 解释

*   `-L`告诉 curl 遵循重定向。
*   `-o`指定下载文件的名称。
*   阅读本文以获取有关从命令行下载 GitHub 文件的[信息。](https://help.github.com/articles/downloading-files-from-the-command-line)
*   有关 compgen 的信息，请查看另一个问题的[答案。](https://stackoverflow.com/questions/511683/bash-get-list-of-commands-starting-with-a-given-string/511787#511787)

# c# - 为什么我不能更改保证金？

> ID：13106272
> 
> 赞同：3
> 
> 时间：2012-10-28T04:01:31.473
> 
> 标签：c#, wpf, margin

![在此处输入图像描述](../Images/33812eb1fbfd8396b182cf98a149fe81.png) 在顶部它说，“获取或**设置**......”，那么为什么不让我改变它呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T05:41:19.770

您不能这样做，因为尽管`Margin.Left`获取或设置，但它并没有像变量一样使用。就像`Padding`.

您可能会注意到，`Margin`(as for `Padding`) 是一个属性并且`Thickness`是它的值。所以，当你说

```
label1.Margin.Left = MainGrid.ActualHeight / 2 - label1.ActualHeight / 2; 
```

您只是在编辑一个副本*( `Margin`)*，因为`Margin`返回一个 struct( `Thickness`)。这就是您收到错误消息的原因。更改未保存，因为它是副本！

基本上，虽然您可以将 的值更改`Object.Margin.Left`为特定值，但它不会保存/更改对象`Margin`属性，这就是您收到错误的原因。

* * *

## 例如

我们不能说

```
label1.Margin.Left = MainGrid.ActualHeight / 2 - label1.ActualHeight /2; 
```

但我们可以说

```
Thickness NewThickness = new Thickness(); //Initialize a new Thicnkess
NewThickness.Left = MainGrid.ActualHeight / 2 - label1.ActualHeight /2; //Set the left property of NewThickness
label1.Margin = NewThickness; //Apply the changes to label1 
```

这意味着，因为`Margin`它是一个属性，所以您不能`Thickness`直接更改它。

* * *

或者，您可以使用以下我认为更容易设置`Margin`对象的

```
label1.Margin = new Thickness(double left, double top, double right, double bottom); 
```

谢谢，
我希望你觉得这有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T05:30:19.207

似乎所有参数对于 WPF Margin 属性都是强制性的，尽管您可能希望一次只更改一个或两个属性值......

通过 Google 搜索，我在 Java 和 ASP.net 中看到使用设置了所有 4 个值的 margin 属性。

然而，这个例子允许用户检索 Label.Margin.Left 值虽然...... [http://forums.asp.net/t/1834713.aspx/1](http://forums.asp.net/t/1834713.aspx/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T10:36:03.783

这里的要点是，在临时值内分配给属性是没有意义的`struct`，因为它没有持久的影响。

[System.Windows.Thickness](http://msdn.microsoft.com/en-us/library/system.windows.thickness.aspx)是`struct`, 并且`label1.Margin`是的边距值的*副本*。这是一个副本，因为s 是按值传递的。分配给没有意义，因为您只会更改.`Thickness``label1``struct``label1.Margin.Left``Left``label1.Margin`

您可以执行以下操作：

```
Thickness t = label1.Margin;
t.Left = ......; // assign your value here
label1.Margin = t; 
```

[有关CS1612 错误，](http://msdn.microsoft.com/en-us/library/wydkhw2c(v=vs.71).aspx)另请参阅MSDN 页面。

工具提示说“获取或设置...”，因为您可以获取或设置 的`Margin`属性，但在您的特定情况下，分配给 的属性是`label1`没有意义的。`Left``label1.Margin`

# string - 如何在自动热键中将字符串转换为数字？

> ID：13106275
> 
> 赞同：3
> 
> 时间：2012-10-28T04:02:35.923
> 
> 标签：string, format, converter, numeric, autohotkey

`FormatTime, CurrentMinute , , m`将当前分钟分配给 variable `%CurrentMinute%`，其值是字符串，而不是数字。我想对 的值进行一些计算`%CurrentMinute%`，那么如何将其转换为数字？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T05:59:58.720

AutoHotkey 会根据需要自动转换数字和字符串。

```
FormatTime, CurrentMinute,, m
NextMinute := CurrentMinute + 1 
```

# symfony-1.4 - Symfony 写入 sfGuard 表

> ID：13106276
> 
> 赞同：0
> 
> 时间：2012-10-28T04:02:40.813
> 
> 标签：symfony-1.4, sfguard

我知道这并不理想，但我在 sfGuard User 表上有一些额外的字段，我想从另一个模块写入它。有一个特定的字段是一个简单的整数，但我希望每次他们执行特定任务时它都为 -1。这是我尝试过的。我没有收到错误消息，但它也没有将数字写入表中。

```
 public function executePublish(sfWebRequest $request)
  {
    $this->user = $this->getUser()->getGuardUser();
    $times = ($this->user->getTimes() - 1);
    $this->getUser()->getGuardUser()->setTimes($times);
  } 
```

这是不同模块的“发布”操作。我做错了吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T17:26:03.517

在设置对象的所有值后，`setTimes($times)` 您必须调用方法，您没有对数据库进行 INSERT 。`save()`

它应该如下所示：

```
 public function executePublish(sfWebRequest $request)
  {
    $this->user = $this->getUser()->getGuardUser();
    $times = ($this->user->getTimes() - 1);
    $this->user->setTimes($times);
    $this->user->save();
  } 
```

# objective-c - NSDateFormatter 获取 stringFromDate 错误

> ID：13106284
> 
> 赞同：2
> 
> 时间：2012-10-28T04:05:51.273
> 
> 标签：objective-c, ios, nsdate, nsdateformatter

我有一个字符串如下：

> 2012-11-01

我想从中得到一个代表这一天的字符串。所以这就是我的处理方式：

```
 NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];

[dateFormatter setDateFormat: @"yyyy-mm-dd"];

NSDate *date = [dateFormatter dateFromString: @"2012-11-01"];

[dateFormatter setDateFormat: @"EEE"];

NSString *string = [dateFormatter stringFromDate: date];

NSLog(@"%@", string); 
```

输出是：

> 太阳

当它真的应该是：

> 周四

（如果我的计算是正确的！）

那么这里的问题是什么？这是内部错误吗？我的代码有问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T04:21:43.023

将您的第一个日期格式字符串更改为：

```
[dateFormatter setDateFormat: @"yyyy-MM-dd"]; // Capital MM for month 
```

它应该工作。

# c# - 在 C# 中的控制台上移动

> ID：13106286
> 
> 赞同：0
> 
> 时间：2012-10-28T04:06:21.523
> 
> 标签：c#, console

我现在正在玩蛇游戏，并且很难确保尾巴跟随我的头部。我目前正试图让它工作，我已经尝试了大约十几种不同的想法，所有这些想法要么让它完全停止（例如蛇似乎被冻结在一个地方），要么完全发生垂直运动尾巴的点一次，而不是一个动作跟随另一个动作。我在使用似乎不可避免的 Console.Clear() 方法时也遇到了一些麻烦。要么我这样做太多次，它会删除除了我的蛇的第一个点之外的所有内容，或者我不这样做并且旧位置不会被删除。这是代码（这是一个测试代码，从实际游戏中分离出来，因为我需要确保代码有效）：

```
class Program
{
    const int size = 10;
    struct Sprite
    {
        public char[] ch;
        public int[,] posXY;
        public int directionX;
        public int directionY;
    }
    static void Main(string[] args)
    {
        int startX = 10;
        int startY;
        Sprite player = new Sprite();
        player.ch = new char[7];
        player.posXY = new int[7,2];
        for (int i = 0; i < player.ch.Length; i++)
        {
            player.ch[i] = '*';
        }
        for (int i = 0; i < 7; i++)
        {
            startY = 10;
            player.posXY[i, 0] = startX;
            player.posXY[i, 1] = startY;
            startX--;
        }
        ConsoleKeyInfo cki = new ConsoleKeyInfo();
        while (true)
        {
            update(cki, ref player);
            draw(player);
            Thread.Sleep(200);
        }//end while
    }//end main
    static void update(ConsoleKeyInfo cki, ref Sprite player)
    {
        if (Console.KeyAvailable)
        {
            cki = Console.ReadKey(true);
            if (cki.Key == ConsoleKey.LeftArrow || cki.Key == ConsoleKey.A)
            {
                player.directionX = -1;
                player.directionY = 0;
            }
            if (cki.Key == ConsoleKey.RightArrow || cki.Key == ConsoleKey.D)
            {
                player.directionX = 1;
                player.directionY = 0;
            }
            if (cki.Key == ConsoleKey.UpArrow || cki.Key == ConsoleKey.W)
            {
                player.directionX = 0;
                player.directionY = -1;
            }
            if (cki.Key == ConsoleKey.DownArrow || cki.Key == ConsoleKey.S)
            {
                player.directionX = 0;
                player.directionY = 1;
            }
        }//endif
        for (int i = 0; i < 7; i++)
        {
            player.posXY[i, 0] = player.posXY[i, 0] + player.directionX;
            player.posXY[i, 1] = player.posXY[i, 1] + player.directionY;
        }
    }//end update
    static void draw(Sprite player)
    {
        Console.Clear();
        for (int i = 0; i < 7; i++)
        {
            Console.SetCursorPosition(player.posXY[i, 0], player.posXY[i, 1]);
            Console.Write(player.ch[i]);
        }
    }//end draw 
```

}

PS我需要为我的蛇使用结构，使用类不是一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:08:07.940

恕我直言，描述“蛇”游戏的最佳数据结构是队列。这样您就可以从尾部出列（“取消绘制”）1个“项目”并以新坐标作为头部入队（“绘制”）一个新的。如果它恰好在“苹果”上，您只需跳过一次出队操作或两次入队。

如果您不熟悉 Queue 数据结构，请看一下这个拳头：[http://en.wikipedia.org/wiki/Queue_(abstract_data_type)](http://en.wikipedia.org/wiki/Queue_(abstract_data_type))

在此处查看 .net 框架的默认队列：http: [//msdn.microsoft.com/en-us/library/7977ey2c.aspx](http://msdn.microsoft.com/en-us/library/7977ey2c.aspx)

# eclipse - 如何移动 Egit 存储库和工作目录

> ID：13106288
> 
> 赞同：7
> 
> 时间：2012-10-28T04:06:43.360
> 
> 标签：eclipse, git, egit

我是 Egit 的新手，并为我正在处理的 GWT 项目创建了一个新的存储库。不幸的是，我让它在我的 Dropbox 文件夹下创建存储库，现在我很后悔，因为我正在互联网上同步数兆字节的临时文件（例如 *.class）。“创建存储库”向导还将项目文件从 Eclipse 工作区移动到 Dropbox 下的工作目录（连同 .git 文件夹）。

我有什么简单的方法可以将此 Egit 存储库和工作目录移动到 Dropbox 文件夹以外的其他地方？

（顺便说一句，由于我使用的是 Egit，因此该解决方案需要运行以使 Eclipse 满意并且我可以继续构建/使用我的项目）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-28T20:41:19.657

我自己设法做到了，方法如下：

*   在 Eclipse 中，右键单击 MyApp 项目，`Refactor->Move`. 将 Eclipse 项目移动到磁盘上的新位置。请注意，我保留了`.../GitRepositories/MyApp/MyApp`dir 结构，只是我将 GitRepositories 的位置移动到了一个新位置。另请注意，这使旧目录中除了 .git 文件夹之外什么都没有（即 Eclipse 移动了工作文件/目录，但没有移动存储库）。
*   关闭日食
*   将 .git 目录从旧目录移动到新目录。请务必将其保存在正确的相对位置！我不小心将 .git 从 移动`.../GitRepositories/MyApp`到`.../GitRepositories/MyApp/MyApp`. 这把事情搞砸了，我不得不回溯......
*   启动 Eclipse

此时它可能已经工作了，但是因为我在第一次这样做时将 .git 移动到了错误的位置，所以我必须执行以下步骤：

*   右键单击 MyApp 项目，`Team->Disconnect`
*   右键单击 MyApp 项目，`Team->Share Project...`
*   向导会自动找到与项目目录相关的 Git 报告：`../.git`

快乐的黑客...

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-12-30T20:48:19.633

使用本地存储库时，您只需执行以下操作：

1.  关闭日食
2.  在磁盘上移动 git 存储库
3.  重新打开 Eclipse
4.  选择文件->导入...-> Git -> Git 项目
5.  选择本地存储库并添加新的存储库位置
6.  选择要添加的项目
7.  （可选）从您的工作区中删除旧的项目引用。

这可能看起来有很多步骤，但它实际上非常简单，并且比单独移动 repo 和工作副本的侵入性更小。

# c - 为什么子进程不回复父进程发送的信号？

> ID：13106293
> 
> 赞同：0
> 
> 时间：2012-10-28T04:07:33.723
> 
> 标签：c, signals

我正在学习进程间通信的信号，我在下面做了非常简单的测试代码：

```
#include <stdio.h>
#include <signal.h>
#include <stdlib.h>
#include <unistd.h>

void sighup();
void sigint();
void sigquit();

int main(int argc, const char *argv[])
{
    int child_pid;
    if((child_pid = fork()) < 0) exit (1);
    if(child_pid == 0) {
        sleep(2);
        signal(SIGHUP, sighup);
        signal(SIGINT, sigint);
        signal(SIGQUIT, sigquit);
        puts("this is the end of the child process");
    } else {
        printf("\n Parent: sending SIGHUP signal to child\n\n");
        kill(child_pid, SIGHUP);
        printf("\n Parent: sending SIGINT signal to child\n\n");
        kill(child_pid, SIGINT);
        printf("\n Parent: sending SIGQUIT signal to child\n\n");
        kill(child_pid, SIGQUIT);
    }
}

void sighup() {
    signal(SIGHUP, sighup);
    printf("CHILD: I have received a SIGHUP\n");
}
void sigint() {
    signal(SIGINT, sigint);
    printf("CHILD: I have received a SIGINT\n");
}

void sigquit() {
    sleep(2);
    printf("CHILD: My parent process has killed me!!");
    printf("CHILD: cleaning up...\n");
    exit(0);
} 
```

似乎子进程没有做任何事情，甚至没有打印进程字符串的结尾。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T04:20:28.740

由于竞争条件，您的信号处理程序没有在孩子中被调用。父线程在子调用之前向子线程发送一个信号，`signal()`该信号会覆盖信号处理行为。

在这种情况下，孩子收到 a`SIGINT`并执行其默认行为，即终止。因此，孩子在执行之后的语句之前终止`sleep(2)`。

# arm - ARM Cortex-A8 流水线是 13 级还是 14 级？

> ID：13106297
> 
> 赞同：2
> 
> 时间：2012-10-28T04:08:06.623
> 
> 标签：arm, cortex-a8

[如果您在 ARM演示文稿](http://esd.et.ntust.edu.tw/downloads/2012_embeddedApplication/ARM%20Archi%20RichardGrisenthwaite.pdf)中看到这个流行的 ARM Cortex-A8 流水线图。很明显，取指令阶段需要 3 个周期，但第一个周期*有点折扣*。但为什么？有什么想法吗？

谢谢...

![在此处输入图像描述](../Images/8e899709497f542867bf01f972911d77.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T06:41:29.740

[来自关于Cortex A8](http://www.arm.com/files/pdf/A8_Paper.pdf)的一些隐藏的论文：

> > 提取流水线从生成新虚拟地址的 F0 阶段开始。该地址可以是前一条指令的分支预测提供的分支目标地址，或者如果本周期没有进行预测，则将从前一周期中使用的取指地址开始顺序计算下一个地址。请注意，F0 Fetch 阶段不计入 13 阶段主整数管道中的官方阶段。**这是因为 ARM 处理器流水线始终将以指令缓存访问开始的阶段计为第一阶段。**

# python - Python简单输入错误

> ID：13106298
> 
> 赞同：2
> 
> 时间：2012-10-28T04:08:06.650
> 
> 标签：python, string, function, input, toast

我是python的初学者。我正在尝试制作一个简单的程序，允许您输入您的姓名，然后它只会打印您的姓名。

这是我的代码。

```
name = input("Enter your name: ")
print name 
```

很简单，应该可以。适用于 python.org 上的任何 try me 部分，但由于某种原因，在我的台式机和笔记本电脑上，我得到了同样的错误。

```
>>> 
Enter your name: Toast

Traceback (most recent call last):
  File "C:/Users/Shepard/Desktop/practice.py", line 1, in <module>
    name = str(input("Enter your name: "))
  File "<string>", line 1, in <module>
NameError: name 'Toast' is not defined 
```

我看到了，我尝试了：

```
name = str(input("Enter your name: "))
print name 
```

同样的错误仍然存​​在。它唯一有效的时候是当用户被要求输入他们的名字时，用户输入，例如，括号中的“Toast”。

这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T04:10:49.793

您应该使用`raw_input`, 而不是`input`因为您使用的是 Python2.X 而不是 Python3.X

这是用于比较 Python2 的[raw_input](http://docs.python.org/library/functions.html#raw_input)和 Python3 的[输入](http://docs.python.org/release/3.1.5/library/functions.html#input)的文档，以及负责两个版本之间更改的[PEP 3111](http://www.python.org/dev/peps/pep-3111/)（Python Enhancement Proposal），以便更好地理解进行更改的原因。

# php - 使用基于referrer的htaccess重定向

> ID：13106299
> 
> 赞同：7
> 
> 时间：2012-10-28T04:08:17.730
> 
> 标签：php, javascript, .htaccess, redirect

我们只希望来自特定网站的用户使用我们的服务。有没有办法通过 htaccess 将并非来自特定引荐来源的所有流量重定向到我们选择的网站？

此外，这仅适用于第一页。因此，如果他们访问我们的网站，他们将浏览一个新页面，而他们对新页面的引用显然是他们已经在的网站。

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-28T04:12:11.303

尝试将其添加到文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{HTTP_REFERER} !^http://the-ok-domain.com [NC]
RewriteRule ^/?first-page.html$ http://the-website-of-your-choosing.com/ [L,R] 
```

您也可以这样做，以便将您自己的域添加到引用者检查中：

```
RewriteEngine On
RewriteCond %{HTTP_REFERER} !^http://the-ok-domain.com [NC]
RewriteCond %{HTTP_REFERER} !^http://your-domain.com [NC]
RewriteRule ^ http://the-website-of-your-choosing.com/ [L,R] 
```

然后，您可以将所有页面包含在检查中。

请注意，引用很容易伪造，并且在您的任何子目录中使用 mod_rewrite 的任何 htaccess 文件都将取代这些规则（除非这些 htaccess 文件具有`RewriteOptions inheret`选项集）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-22T13:59:22.283

对我不起作用，我做了这个小改动来重定向来自谷歌的流量：

```
RewriteEngine On
RewriteCond %{HTTP_REFERER} ^(.*)\.google\.(.*) [NC]
RewriteRule ^(.*)$ https://www.my-site.it/$1 [L,R] 
```

# node.js - Node.js Express：在 app.get() 和 app.post() 之前对每个 HTTP 请求执行挂钩？

> ID：13106300
> 
> 赞同：26
> 
> 时间：2012-10-28T04:08:46.670
> 
> 标签：node.js, express

我不想将身份验证功能放在 every 的顶部`app.get()`，之前如何在每个请求上执行代码`app.get()`？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-28T04:22:19.553

在路由之前设置中间件：

```
function myMiddleware (req, res, next) {
   if (req.method === 'GET') { 
     // Do some code
   }

   // keep executing the router middleware
   next()
}

app.use(myMiddleware)

// ... Then you load the routes 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-28T04:41:30.690

你也可以这样做：

```
app.all('*', auth.requireUser); 
```

# php - MATLAB 输出到 PHP 代码

> ID：13106317
> 
> 赞同：0
> 
> 时间：2012-10-28T04:13:43.697
> 
> 标签：php, matlab, passthru

我想将 MATLAB 输出传递给我的 php 代码。

我的 MATLAB 代码，我有：

```
function x = returnX()
    x = 100;
end 
```

还有我的 PHP 代码：

```
<?php
     $command = "matlab -nojvm -nodesktop -nodisplay -r \"x = returnX();\"";
     passthru($command, $output);
     echo($output)
?> 
```

但是，这打印的是 0，而不是 100。
当我在我的 cmd 中键入命令时，它显示 100。但是当我通过 PHP 代码尝试它时，它不起作用。谁能帮助我如何将 MATLAB 的输出值设置为 php 变量？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T04:32:59.697

您应该使用`exec`返回标准输出的 ，而不是像`passthru`.

在 matlab 代码中显示输出：

```
function x = returnX()
    x = 100;
    display(x);
end 
```

`exec`在php代码中使用：

```
<?php
     $command = "matlab -nojvm -nodesktop -nodisplay -r \"x = returnX();\"";
     $output=exec($command);
     echo($output)
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T04:32:38.167

根据[文档](http://php.net/manual/en/function.passthru.php)：

> 如果 return_var 参数存在，Unix 命令的返回状态将被放置在这里。

您正在`echo`从 Matlab 命令返回值，而不是标准输出。由于命令执行正确，因此返回 0。 `passthru()`会将内容从标准输出“不受任何干扰”发送到客户端。

此外，请确保您的托管服务提供商允许您从 PHP 脚本中进行系统调用。许多主机出于安全原因禁用执行服务器端命令。查看对安全模式的支持以及`disabled_functions`在您的`php.ini`.

# jquery - 滚动时在主要内容区域顶部滚动 100% 高度的 div？

> ID：13106321
> 
> 赞同：0
> 
> 时间：2012-10-28T04:14:30.030
> 
> 标签：jquery, css, scroll

我想要做的有点难以解释。我想要一个“面板”，它将是窗口高度的 100%，并覆盖在网站的主要内容之上。我想要发生的是将主要网站内容锁定在浏览器窗口的顶部，并将这个“面板”放在它上面。这部分很容易使用 z-index。我遇到的问题是让网站的主要内容固定在浏览器窗口的顶部，当用户向下滚动时，**只有**“面板”向上滑动以显示其下方网站的主要部分。一旦面板清除了浏览器窗口的顶部，我希望网站的主要部分像往常一样滚动。我希望这由 jQuery 驱动。

这是我拥有的 HTML：

这是一个覆盖层，当用户向下滚动时，它需要滑过主要内容的顶部。这是网站的主要内容。

还有一些 CSS：

```
html, body {height:100%;}

.panel {height:100%; background-color: rgba(186,85,85,0.38); position: relative; z-index:1;}

.main {position: absolute; top:0px; min-height: 1500px;} 
```

编辑：把这种效果想象成舞台上的幕布。幕布升起时，舞台保持原位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T07:18:58.933

达斯汀，

根据您提到的滚动窗帘，我在主要内容区域上方设置了一个 100% 高度的 div，以便滚动页面可以看到内容。我不确定您要查找的固定区域，所以我只是在页面顶部放置了一个固定 div。如果您希望该 div 在“窗帘”一直向上滚动时开始滚动，您可能需要根据滚动位置查看 addclass - 不幸的是，您必须向精通 Jquery 的人询问帮助。

**CSS**：

```
html, body
{
height: 100%;
background-color: yellow;
}

#curtain {
height: 100%;
width: 500px;
background-color: red;
display: block;
}

#content {
width: 500px;
background-color: blue;
}

#both {
height: 100%;
width: 500px;
margin-left: auto;
margin-right: auto;
}

#sticky_content {
position: fixed;
top: 0px;
left: 50%;
width: 200px;
background-color: green;
} 
```

**​HTML** :

```
<div id="both">
<div id="sticky_content">This Sticks</div>
<div id="curtain">Text?</div>
<div id="content">This is where the main page body content would go...</div>
</div> 
```

这是我放在一起的[JsFiddle 。](http://jsfiddle.net/Koubenec/YHFrU/51/)窗帘为红色，内容区域为蓝色，粘性区域为绿色，以保持区分清晰。

-Marcectura

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T13:55:22.373

感谢大家为帮助我所做的努力。我想我找到了一个很好的解决方案。我发现了一个名为 Curtain.js 的东西。[https://github.com/Victa/curtain.js](https://github.com/Victa/curtain.js)这个插件创建了我一直在寻找的完全相同的效果:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T04:22:00.777

从过于简单的角度来看这个问题，使用`position: fixed`可以修复主要内容网站，而其他人滚动。

# c# - GZip 标头中的幻数不正确。确保您传入的是 GZip 流。（.exe 文件）

> ID：13106324
> 
> 赞同：7
> 
> 时间：2012-10-28T04:14:50.937
> 
> 标签：c#, winforms, unzip, compression, self-extracting

我想提取一个exe文件。exe 文件包含一些文件和文件夹。当我尝试使用 winrar 提取文件时，它会被提取，但是当我尝试使用一些示例提取 exe 文件时，我收到此错误：

> GZip 标头中的幻数不正确。确保您传入的是 GZip 流。

我使用了一些示例并在 Google 上搜索了很多我的问题，但没有得到我的答案，而且我也使用了一些库。

我使用了这段代码，但同样的错误：

```
 public static void Decompress(FileInfo fi)
    {
        // Get the stream of the source file.
        using (FileStream inFile = fi.OpenRead())
        {
            // Get original file extension, for example
            // "doc" from report.doc.gz.
            string curFile = fi.FullName;
            string origName = curFile.Remove(curFile.Length -
                    fi.Extension.Length);

            //Create the decompressed file.
            using (FileStream outFile = File.Create(origName))
            {
                using (GZipStream Decompress = new GZipStream(inFile,
                        CompressionMode.Decompress))
                {
                    // Copy the decompression stream 
                    // into the output file.
                    Decompress.CopyTo(outFile);

                    Console.WriteLine("Decompressed: {0}", fi.Name);

                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T10:49:03.513

那是因为该`.exe`文件是一个自解压档案......

你应该试试[DotNetZip](http://dotnetzip.codeplex.com/)。从项目的常见问题解答：

> **这个库是否读取自解压 zip 文件？**
> 
> 是的。DotNetZip 可以读取 WinZip 生成的自解压文件 (SFX)，WinZip 可以读取 DotNetZip 生成的 SFX 文件。

您可以轻松地[从 Nuget 安装它](http://nuget.org/packages/DotNetZip)。

# grails - 在 Grails 中嵌套 GSP 标签

> ID：13106326
> 
> 赞同：0
> 
> 时间：2012-10-28T04:15:25.747
> 
> 标签：grails, gsp

这没有用，当我对 HTML 输出（Grails 1.2.1）进行查看源时，Grails 删除了 onClick 处理程序我错过了什么？

我正在尝试将 javascript 中显示的确认消息国际化

```
 <g:actionSubmit id="deleteButton" value="Delete" action="deleteActivities" onclick="return confirm(' ${g.message(code="common.confirm.delete", args="['Activity']") } ');"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T09:59:23.357

尝试按如下方式使用它：

```
<g:actionSubmit id="deleteButton" value="Delete" action="deleteActivities" onclick="return confirm(' ${message(code: "common.confirm.delete", args: ['Activity'])} ');"/> 
```

# powershell - Powershell Import-CSV 的问题

> ID：13106327
> 
> 赞同：2
> 
> 时间：2012-10-28T04:15:26.100
> 
> 标签：powershell

主要脚本

```
$Computers = Get-Content .\computers.txt

If ( test-path .\log.txt ) {
    $Log_Successful = Import-CSV .\log.txt | Where-Object {$_.Result -eq "Succesful"}
} ELSE {
    Add-Content "Computer Name,Is On,Attempts,Result,Time,Date"
}
$Log_Successful | format-table -autosize 
```

问题：

Log_Successful."Computer Name" 工作正常，但如果我将 4 更改为如下所示

```
$Log_Successful = Import-CSV .\log.txt | Where-Object {$_.Result -eq "Failed"} 
```

Log_Successful.“计算机名”不再起作用...任何想法为什么？

数据集

```
Computer Name,Is On,Attempts,Result,Time,Date
52qkkgw-94210jv,False,1,Failed,9:48 AM,10/28/2012
HELLBOMBS-PC,False,1,Successful,9:48 AM,10/28/2012
52qkkgw-94210dv,False,1,Failed,9:48 AM,10/28/2012 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T07:18:06.543

如果“成功”，则返回单个对象。它包含属性“计算机名称”。在“失败”的情况下，将返回一个包含两个对象的数组。它（数组本身）不包含属性“计算机名”。在某些情况下，在 PowerShell v3 中可以使用符号`$array.SomePropertyOfContainedObject`，但在 PowerShell v2 中，它始终是一个错误。这就是你可能看到的。

您应该遍历结果对象数组，例如`foreach($log in $Log_Successful) {...}`并访问对象的属性`$log`。

最后一个提示。为了确保`Import-Csv`调用的结果始终是一个数组（不是 null 或单个对象），请使用`@()`运算符。

修复后的代码是：

```
$logs = @(Import-Csv ... | where ...)
# $logs is an array, e.g. you can use $logs.Count

# process logs
foreach($log in $logs) {
    # use $log."Computer Name"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T06:39:28.227

我不确定这是否是问题所在，但您有错字，在 Where-Object 中您与“成功”进行比较，文件中的值为“成功”（缺少“s”）。

无论如何，什么不工作？

# graphviz - 不同颜色的graphviz节点

> ID：13106328
> 
> 赞同：9
> 
> 时间：2012-10-28T04:15:42.207
> 
> 标签：graphviz

我正在尝试使用不同填充颜色的节点创建一个有向图。我创建了一个像这样的 gv 文件：

```
digraph mentions {
  "A" -> "B"
  "A" -> "C"
  "B" -> "C"
  "B" -> "A"
  "A" [shape=circle, style=filled, fillcolor=red]
  "B" [shape=circle, style=filled, fillcolor=green]
  "C" [shape=circle, style=filled, fillcolor=purple]
} 
```

我的命令行参数是：

```
ccomps -zX#0-1000 testGraphCalls.gv | \
grep "-" | cat <(echo "digraph mentions {") - <(echo "}") | \
sfdp -Gbgcolor=white -Ecolor=blue \
-Nwidth=1 -Nheight=1 -Nfixedsize=true \
-Nlabel='' -Earrowsize=0.4 -Gsize=75 -Gratio=fill \
-Tpng > test.png 
```

然而，我的白色圆圈的节点用黑色勾勒出来。关于如何让节点正确填充的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T04:32:32.860

您的命令中的所有内容是什么？当您在 .dv 文件中 grep 查找“-”时，grep 不会打印三个属性行。

你有`dot`可以用来快速测试你的图形文件的程序吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-19T04:47:24.220

代替 .gv 文件，将依赖项代码写入 .dot 文件。

使用 python 分析器，如 graphviz、qcachegrind 等，它会自动将 .dot 文件转换为调用树。

# android - Android 保护 mp3 文件格式被共享，但仍可播放

> ID：13106338
> 
> 赞同：3
> 
> 时间：2012-10-28T04:19:40.397
> 
> 标签：android, mp3, copy-protection

如何保护从我的服务器（合法内容所有者）下载的 mp3 文件不被通过电子邮件、蓝牙等转发。

我希望文件可以在设备媒体播放器上播放，所以我会将它发送到 ContentResolver。

我在我们地区的一些官方应用程序上看到了这一点，但我不知道如何将我的文件标记/标记为不可共享。

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T08:02:35.917

> 如何保护从我的服务器（合法内容所有者）下载的 mp3 文件不被通过电子邮件、蓝牙等转发。

从技术上讲，您不能，除非您实现自己的 MP3 播放器应用程序并将其存储在其中。如果您依赖其他应用程序来播放音乐，那么根据定义，其他应用程序可以访问音乐并且可以使用它来做一些事情，例如通过电子邮件、蓝牙等共享它。

但是，在实践中，如果您是启动媒体播放器来播放音乐的人，并且您不提供通过电子邮件、蓝牙等方式共享的选项，那么用户自己不太可能有任何方便的方式来这样做，除非在有根设备上。

# css - 如何让字体在所有浏览器中正确显示？

> ID：13106339
> 
> 赞同：5
> 
> 时间：2012-10-28T01:43:55.710
> 
> 标签：css, fonts

我的网站的 CSS 文件中有以下内容：

```
body {
font-family: Georgia, "Times New Roman", serif;
font-size: 1.125em;
line-height: 1.5em;
} 
```

在我 Mac 上的 Safari 中，该网站的字体看起来像我想要的那样：

![http://i.imgur.com/mywDZ.png](../Images/fef32f0ac771b406fcb4d9bc37494f8b.png)

但是，在 IE 和 Chrome 中的 Windows 计算机上，字体与上述​​不同，请参阅：

![http://i.imgur.com/aL0vi.jpg](../Images/c3f1ed9e0531539bcf6ad4269983af99.png)

我的问题是，如何让字体在所有操作系统上的所有浏览器中看起来都一样，就像上面的截图 #1 一样？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T01:53:04.797

这是一个字体平滑的问题，这与浏览器不同，它们不会以相同的方式“读取”字体。

这是一篇解释该过程的文章，[字体平滑解释](http://szafranek.net/works/articles/font-smoothing-explained/)。

这是一个 CSS hack，您可以尝试以在任何地方获得相同的结果：

```
html, html a {
    -webkit-font-smoothing: antialiased;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.004);
} 
```

进一步阅读：[4.2 字体平滑：W3C 的 CSS 3 字体模块规范中的“font-smooth”属性](http://www.w3.org/TR/WD-font/#font-smooth-prop)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T06:47:33.260

尽管您可以测试您使用的字体的变化并可能重新考虑您的字体选择，但您对此无能为力。某些字体比其他字体更受这些差异的影响。

在不同的平台上，在某种程度上，在不同的浏览器中，字体的呈现方式是不同的。参见例如[A Closer Look At Font Rendering](http://www.smashingmagazine.com/2012/04/24/a-closer-look-at-font-rendering/)。

渲染也可能取决于系统和/或浏览器设置。我在 Windows 上看到的在普通文本上测试您的样式表时，与您的屏幕截图非常不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T04:43:16.023

Windows以其糟糕的字体平滑而闻名；一个可靠的跨浏览器替代方案是用 .png 图像替换您的整个内容（因为 .jpg 在文本中往往很糟糕）。自然，这不是一个可行的替代方案，因此在所有浏览器都支持该`font-smoothing`属性之前（如上所示），您将陷入当前情况。

# javascript - 删除括号内的单词

> ID：13106344
> 
> 赞同：1
> 
> 时间：2012-10-28T04:21:03.457
> 
> 标签：javascript

嗨，我是 javascript 的新手，所以我想知道如何删除括号内的单词并删除括号？我还想删除冒号之前的单词，然后用逗号替换括号，最后一个单词除外。例如，如果字符串包含：

```
language:chinese (29)parody:hyouka (73)character:fuyumi irisu (12)houtarou oreki (12)group:shuudan bouryoku (41)artist:murasaki syu (49)misc:schoolgirl (11)nakadashi (11)acting like a pet (6) 
```

那么输出将变为

```
chinese,hyouka,fuyumi irisu,houtarou oreki,shuudan bouryoku,murasaki syu,schoolgirl,nakadashi,acting like a pet 
```

我怎么能用javascript做到这一点？这是代码，它不起作用

```
var str = "language:chinese (29)parody:hyouka (73)character:fuyumi irisu (12)houtarou oreki (12)group:shuudan bouryoku (41)artist:murasaki syu (49)misc:schoolgirl (11)nakadashi (11)acting like a pet (6)";

var tags = str.replace(/\s*\(.*?\)\s*/g, ','));
final = tags.replace(/.*(?=:)/i, "");
alert(final); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T05:41:45.023

使用 [^)]+ 表示此处打开后没有右括号：

```
var str = "language:chinese (29)parody:hyouka (73)character:fuyumi irisu (12)houtarou oreki (12)group:shuudan bouryoku (41)artist:murasaki syu (49)misc:schoolgirl (11)nakadashi (11)acting like a pet (6)";  

var tags = str.replace(/\s?\([^\)]+\)/g, ',')
              .replace(/[^:]+:([^,]+),/g,'$1,')
              .replace(/,$/,'');
alert(tags);​ 
```

甚至很简单：

```
var tags = str.replace(/([^:]+:)?([^(]+)\s\([^\)]+\)/g,'$2,')
              .replace(/,$/,''); 
```

# javascript - 如何将函数放入对象中并直接输出结果

> ID：13106347
> 
> 赞同：0
> 
> 时间：2012-10-28T04:21:22.510
> 
> 标签：javascript, oop

看，我有以下代码要执行，结果是预期的：

```
a = { a: function(){ return 'red'} }

```

所以每当我打电话

```
aa #=> 我想收到 'red' 而不是 'function(){ return 'red'}
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T04:24:34.253

只需这样做

```
a = { 
   a: 'red' 
}; 
```

但是如果结果返回函数那么重要，我们必须确保函数被调用并返回。

```
a = {
    a: function() {
        return 'red-by-function';
    }() //This will ensure the function is called rather that returning the whole function
}; 
```

两种情况的[演示](http://jsfiddle.net/wtkLm/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T04:23:47.587

您需要将其作为闭包来完成：

```
a = { a: function(){ return 'red';}()}; 
```

请注意`();`末尾的 ，这使它成为一个完整的闭包。

# c# - 与在 SQL Server 中搜索数据相关的问题

> ID：13106351
> 
> 赞同：3
> 
> 时间：2012-10-28T04:22:02.067
> 
> 标签：c#, sql-server, sql-server-2005

我有 SQL 数据表 StudetnMaster`FirstName nvarchar(100)`并包含数据输入古吉拉特语（Unicode 字符）

**样本：**

```
 StudentId   FirstName
     1           ઘનશ્યામ
     2           જીગર 
```

现在我有以下搜索查询：

```
Select * 
from StudetnMaster 
where FirstName like N'" + textBox1.Text.Trim() + "%' 
```

它工作正常，但在存储过程中我必须传递参数`FirstName`如下：

```
ALTER PROCEDURE dbo.StoredProcedure1
        @FirstName nvarchar(100)
AS
    select * 
    from StudentNew 
    where FirstName like N@FirstName+'%' 
```

但它抛出一个错误说：

> 无效的列名 N@FirstName

我如何`'N'` 在 SP 中使用参数，因为不使用`N'`Unicode 文本是不可搜索的？

对于上面提到的内联查询我得到了结果，但是对于存储过程我得到了错误，那么我们如何`'N'`在 SP 中使用呢？

在 SP 中搜索 unicode 字符还有其他解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:16:04.220

就像在评论中写的一样-您不必将 N 添加到参数中。

当您将参数定义为 nvarchar 时，这意味着每个符号 2 个字节（当您编写 N'string' 时，N 代表什么）。

如果有必要，您可以在此处添加排序规则：

```
select * from StudentNew
where FirstName like @FirstName+'%' Collate YourCollationName 
```

# asp.net-mvc - 如何为 ajax post 序列化 IEnumerable 中的每个项目

> ID：13106354
> 
> 赞同：1
> 
> 时间：2012-10-28T04:22:38.293
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我有一个显示`IEnumerable<Movie>`.

**_MoviePartial.cshtml**

```
@foreach(var movie in Model) {
    <div class="content">
        <span class="image"><img src="@movie.Posters.Profile" alt="@movie.Title"/></span>
        <span class="title">@movie.Title</span>
        <div class="score`">
            <span class="critics-score">@movie.Ratings.CriticsScore</span>
            <span class="audience-score">@movie.Ratings.AudienceScore</span>
        </div>
        @Html.ActionLink("Add Movie", "Add", "MyMovies")
    </div>
} 
```

当用户单击“添加电影”ActionLink 时，我将发布一个 ajax 帖子以将所选电影添加到用户集合中。我的问题是我想将整个选定的`Movie`类发送到“添加”操作，但不确定如何序列化每部电影，因为整个`Movie`类没有在 PartialView 中呈现，只有几个属性。我知道我可以序列化这样的东西......

```
<script type="text/javascript">
    var obj = @Html.Raw(Json.Encode(movie));
</script> 
```

但我不确定这将如何在呈现 html 的 foreach 循环中工作，尤其是在`PartialView`.

因此，为了清楚起见，当用户单击“添加电影”时，`ActionLink`我想`Movie`通过 ajax 将相应电影的序列化类发送到我的控制器。

我的问题是...

有没有更好的方法来序列化每部电影并将其附加到各自的锚点？我知道有`data-`html5 属性，但我认为它们只允许字符串值，而不是 json 对象。我也知道我可以使用 jQuery 的`.data()`函数，但我正在努力思考如何让它从 PartialView 运行，特别是因为渲染的 html`_MoviePartial.cshtml`可能通过 ajax 从控制器返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T04:56:56.553

我的偏好是返回一个 JSON 对象作为具有两个属性的响应；HtmlString 和数据。HtmlString 可能包含渲染的局部视图，Data 可能包含请求的序列化对象。

我发现使用 JSON 非常容易，然后尝试返回带有嵌入 JSON 对象的 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T06:04:38.383

像[knockout.js](http://knockoutjs.com/)这样的框架真的会让你的生活更轻松。

基本上，你会：

1.  使用以下命令将所有电影数据加载为 JSON 数组：`Json.Encode(Model);`
2.  使用敲除创建一个[foreach 模板](http://knockoutjs.com/examples/gridEditor.html)来呈现您的数据。然后，Knockout 将处理将显示的电影保持为完整电影模型的麻烦。

# javascript - 为什么服务器端的 HTML 渲染比客户端更快？

> ID：13106355
> 
> 赞同：13
> 
> 时间：2012-10-28T04:23:16.057
> 
> 标签：javascript, twitter, backbone.js, html-parsing, handlebars.js

我在一个大型网站上工作，我们正在将很多功能转移到客户端（Require.js、Backbone 和 Handlebars 堆栈）。甚至还有关于可能将所有渲染转移到客户端的讨论。

但是阅读一些文章，尤其是关于 Twitter 远离客户端渲染的文章，其中提到服务器端更快/更可靠，我开始有疑问。我不明白在 JS 中从 JSON 和模板渲染相当简单的 HTML 小部件是如何在具有 4-8 GB RAM 的双核 CPU 上的现代浏览器比在服务器端应用程序中包含数十个组件要慢。有没有关于这方面的实际生活基准数据？

此外，似乎通过服务器端模板引擎解析 HTML 模板不能比从 Handlebars 模板渲染相同的 HTML 代码更快，尤其是如果这是一个 precomp JS 函数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-28T04:30:49.330

原因有很多：

1.  JavaScript 是解释性语言，比服务器端慢（通常用编译语言完成）
2.  DOM 操作很慢，如果你在 JS 中操作它会导致性能不佳。有一些方法可以克服这个问题，比如在文本中准备渲染然后对其进行评估，这实际上可能会让你尽可能接近服务器端渲染。
3.  有些浏览器太慢了，尤其是旧的 IE

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-28T04:53:42.167

*   编译语言与解释 javascript 的性能
*   缓存，即提供另一个用户已经请求的完全相同的页面，这消除了每个客户端呈现它的需要。非常适合具有巨大流量的网站 - 即新闻网站。微缓存甚至可以提供近乎实时的更新，同时提供来自缓存的大量流量。无需等待客户端渲染
*   减少对使用旧电脑或浏览器速度慢/残废的用户的依赖
*   只需要担心渲染，更少依赖不同浏览器如何管理DOM（可靠性）

但是对于复杂的 UI，交互的客户端渲染将提供更快速的用户体验。

这实际上取决于您要优化的性能以及有多少用户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-06T12:28:32.463

要在客户端运行代码，首先必须加载它。服务器端代码仅在服务器启动时加载，而客户端代码必须在每次页面时加载。在任何情况下，加载页面时都必须解释代码，即使文件已经被缓存。您可能还会在浏览器中缓存 JS 解析树，但我认为这些不会持久化，因此它们不会存在很长时间。

这意味着无论 JavaScript 有多快（而且非常快），都必须在用户等待时执行工作。许多研究表明，页面加载时间极大地影响了用户对网站质量和相关性的看法。

底线是您最多有 500 毫秒的时间从典型开发人员环境中的干净缓存中呈现您的页面。较慢的设备和网络将使大多数用户几乎无法接受这种延迟。

因此，在页面加载期间，您可能有 50-100 毫秒的时间在 JavaScript 中执行操作，所有这些，总计，这意味着渲染一个复杂的页面，嗯，不容易。

# php - 转移的主机和设置 cookie 现在不起作用

> ID：13106359
> 
> 赞同：3
> 
> 时间：2012-10-28T04:24:39.417
> 
> 标签：php, cookies

我正在做一个项目，一切都在临时测试站点上工作。今天，我将所有内容迁移到了新主机（justhost.com），由于某种原因，`setcookie`在 PHP 中调用该函数时，没有设置任何 cookie。我检查了多个浏览器，但没有任何效果。

这是我正在使用的 setcookie 函数的示例：

```
setcookie("blah", $login_email, $time, $path); 
```

`$path`只是`"/"` 如果那是相关的。除了数据库详细信息之外，代码与我传输它时完全没有变化。但是，我不明白为什么没有设置 cookie。

我可能需要更改主机中的任何设置吗？我来不及了。

**更新：**我可以通过回显一些 jQuery 来设置 cookie。但我仍然想知道为什么 PHP 方法不起作用。

**更新：**我解决了这个问题。我的身体标签中有代码，因为其中一部分还输出了一些信息。我对其进行了更改，以便可以将`setcookie`函数移到 html 标记上方。问题是一些主机首先发送标头，然后在其他数据（如正文）开始加载时不发送标头。后来我也遇到了类似的问题，这次是由空格引起的。我在之前的 php 脚本顶部有一条评论，`<?php`删除它可以解决另一个问题。包含函数文件中的最后一个问题需要使用`ob_start()`和来处理`ob_flush()`。

# android - 我的 viewpager 中的 MediaPlayer 按钮

> ID：13106363
> 
> 赞同：0
> 
> 时间：2012-10-28T04:26:00.457
> 
> 标签：android, media-player, android-viewpager

我正在构建一个带有 viewpager 水平滑动的应用程序。所有寻呼机组件都可以正常工作，但是我无法播放按钮。代码没有错误，它只是不起作用。谢谢你的帮助。

```
 package com.test.viewpager;
import android.app.Activity; 
import android.content.Context; 
import android.media.MediaPlayer;
import android.os.Bundle; 
import android.os.Parcelable; 
import android.support.v4.view.PagerAdapter; 
import android.support.v4.view.ViewPager; 
import android.view.LayoutInflater; 
import android.view.View; 
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;  

public class viewpager extends Activity {   
public MediaPlayer mp = null;
/** Called when the activity is first created. */  

@Override         
public void onCreate(Bundle savedInstanceState) {                 
    super.onCreate(savedInstanceState);                 
    setContentView(R.layout.main);   

    Button btn = (Button) findViewById(R.id.button1);
    OnClickListener listener = new OnClickListener(){
        public void onClick(View v) {
        if (mp == null) {
            mp = MediaPlayer.create(viewpager.this, R.raw.song1);
            mp.start();
            }else {
                mp.stop();
                mp = null;
            }
    }};

    if (btn != null)
        btn.setOnClickListener(listener);

                MyPagerAdapter adapter = new MyPagerAdapter();                 
    ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager);                
    myPager.setAdapter(adapter);                 
    myPager.setCurrentItem(2);         }                  

public void farLeftButtonClick(View v)         {                 
    Toast.makeText(this, "Far Left Button Clicked", Toast.LENGTH_SHORT).show();          
    }         

public void farRightButtonClick(View v)         {                
    Toast.makeText(this, "Far Right Elephant Button Clicked", Toast.LENGTH_SHORT).show();          
    }          
private class MyPagerAdapter extends PagerAdapter {                 
        public int getCount() {                         
            return 5;                 }                  
        public Object instantiateItem(View collection, int position) {                          
            LayoutInflater inflater = (LayoutInflater) collection.getContext()                                         
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);                          
            int resId = 0;                        
            switch (position) {                         
            case 0:                                
                resId = R.layout.page1;                                
                break;                        
                case 1:                                
                    resId = R.layout.page2;                                
                    break;                        
                    case 2:                                
                        resId = R.layout.page3;                               
                        break;                         
                        case 3:                                
                            resId = R.layout.page4;                                
                            break;                         
                            case 4:                                
                                resId = R.layout.page5;                                 
                                break;                         }                          
            View view = inflater.inflate(resId, null);                        
            ((ViewPager) collection).addView(view, 0);                         
            return view;                 }                  
        @Override                
        public void destroyItem(View arg0, int arg1, Object arg2) {                        
            ((ViewPager) arg0).removeView((View) arg2);                  }                 
        @Override                
        public void finishUpdate(View arg0) {                        
            // TODO Auto-generated method stub                 
            }                 
            @Override                
            public boolean isViewFromObject(View arg0, Object arg1) {                        
                return arg0 == ((View) arg1);                  }                 
            @Override                 
            public void restoreState(Parcelable arg0, ClassLoader arg1) {                         
                // TODO Auto-generated method stub                  
                }                  
            @Override                 
            public Parcelable saveState() {                        
                // TODO Auto-generated method stub                         
                return null;                 }                 
            @Override                
            public void startUpdate(View arg0) {                       
                // TODO Auto-generated method stub                 
            }}
    } 
```

这是main.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
<android.support.v4.view.ViewPager    
    android:layout_width="match_parent"   
     android:layout_height="match_parent"   
      android:id="@+id/myfivepanelpager"/>

 </LinearLayout> 
```

这是其中一个窗格 page3.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

 <Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/newbutton"
    android:layout_gravity= "center"

   /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T05:11:39.140

> 我无法让我的按钮播放。代码没有错误，只是不起作用

那是因为您试图将按钮作为 Activity 布局 (main.xml) 的一部分进行膨胀。但是，正如您已经从发布的布局中看出的那样：情况并非如此。该按钮是 ViewPager 中显示的“页面”的一部分；因此，将按钮逻辑从 Activity 移动`onCreate(...)`到 PagerAdapter 中`instantiateItem(...)`。

这将产生如下内容：

```
public Object instantiateItem(View collection, int position) {                          
    LayoutInflater inflater = (LayoutInflater) collection.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    // switch/case omitted for simplicity

    View view = inflater.inflate(resId, null);
    Button btn = (Button) findViewById(R.id.button1);
    if (btn != null) btn.setOnClickListener(new View.new OnClickListener(){
        @Override public void onClick(View v) {
            if (mp == null) {
                mp = MediaPlayer.create(viewpager.this, R.raw.song1);
                mp.start();
            } else {
                mp.stop();
                mp = null;
            }
        }
    });

    // add and return view etc.
} 
```

# python - python：使用正则表达式匹配字符串

> ID：13106368
> 
> 赞同：1
> 
> 时间：2012-10-28T04:27:27.120
> 
> 标签：python, regex

我正在学习正则表达式。不明白如何匹配以下模式：

```
" myArray = ["Var1","Var2"];  " 
```

理想情况下，我想获取数组中的数据并转换为 python 数组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T05:07:46.897

数组项是否保证用双引号括起来？

这是一种快速而肮脏的方法：

```
re.findall('"([^,]+)"', source) 
```

source 是你的字符串。我没有转义正则表达式中的双引号，因为您也可以在 Python 中使用单引号。这将返回用双引号括起来的每个项目的列表，因此在您的示例中：`['Var1', 'Var2']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T05:12:29.873

正则表达式的复杂性因输入的变化而有很大差异。匹配给定字符串的最简单的表达式是：

```
>>> from re import search, findall
>>> s = ' myArray = ["Var1","Var2"];  '
>>> name, body = search(r'\s*(\w*)\s*=\s*\[(.*)\]', s).groups(0)
>>> contents = findall(r'"(\w*)"', body)
>>> name, contents
('myArray', ['Var1', 'Var2']) 
```

“转换”为 python 数组可以这样完成：

```
>>> globals().update({name: contents})
>>> myArray
['Var1', 'Var2'] 
```

虽然这实际上是一个坏主意，因为它会在全局变量中写入垃圾。相反，请尝试使用单独的字典或其他东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T08:02:40.067

如果您只对获取数组中的数据感兴趣，则可以跳过使用 regex 并改用 eval。考虑一下：

```
myArray = eval('["Var1","Var2"]') 
```

如果必须使用示例中给出的行，也可以使用 exec。但是，此命令有些危险，使用时需要特别小心。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T08:31:21.230

在不使用 re 的情况下，您可以使用内置字符串方法，`literal_eval`并且根据您的示例返回一个可用`list`对象：

```
from ast import literal_eval
text = ' myArray = ["Var1","Var2"];  '
name, arr_text = (el.strip('; ') for el in text.split('='))
arr  = literal_eval(arr_text)
print name, arr 
```

然后做你想做的，`name`然后`arr`......

# android - 第一个 Android 应用程序中的空指针异常

> ID：13106370
> 
> 赞同：1
> 
> 时间：2012-10-28T04:27:37.733
> 
> 标签：android, nullpointerexception

我正在尝试编写我的第一个 Android 应用程序，但遇到了麻烦。我编写了一个简单的 Java 程序来查找用户提供的数字的因数，我想将它移植到 Java。我有一个用于接口的 XML 文件，在我添加第一个 Java 类之前，它似乎运行良好。现在它不会运行，并且 log.cat 说有一个空指针异常。到目前为止，我只有存根，但它似乎应该按照我到目前为止所做的工作正常运行。我包括了 log.cat 文本，但我对它太新了，无法理解它。

问题可能不止一个。添加 Java 文件后，我立即开始出现运行时错误，但我不认为它们是空指针异常。我认为这开始于我进行更改以修复已经导致问题的问题。

任何帮助表示赞赏。

这是Java文件：

```
import android.app.Activity;  <br>
import android.os.Bundle;  <br>
import android.widget.Button;   <br>
import android.widget.EditText;  <br>
import android.widget.TextView;  <br>

public class AndroidFactoringActivity extends Activity {

    // Instance Variables
    EditText userNumber;
    Button factorButton;
    TextView resultsField;
    int factorResults;

    /** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    factorButton = (Button) findViewById(R.id.factorButton);
    userNumber = (EditText) findViewById(R.id.userNumber);
    factorResults = 1;
    resultsField.setText(String.valueOf(factorResults));
}   
} 
```

这是 main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/askField"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/ask"
        android:textSize="24dp" />

    <EditText
        android:id="@+id/userNumber"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="number" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/factorButton"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/click" />

    <TextView
        android:id="@+id/resultsField"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/tell"
        android:textSize="24dp" />
</LinearLayout> 
```

以下是 log.cat 结果：

```
 03-31 23:58:53.579: D/AndroidRuntime(2804): Shutting down VM

    03-31 23:58:53.589: W/dalvikvm(2804): threadid=3: thread exiting with uncaught exception (group=0x4001b188)

    03-31 23:58:53.589: E/AndroidRuntime(2804): Uncaught handler: thread main exiting due to uncaught exception

    03-31 23:58:53.650: E/AndroidRuntime(2804): java.lang.RuntimeException: Unable to start activity ComponentInfo{net.dave_b.factoring/net.dave_b.factoring.AndroidFactoringActivity}: java.lang.NullPointerException

    03-31 23:58:53.650: E/AndroidRuntime(2804):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)

    03-31 23:58:53.650: E/AndroidRuntime(2804):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)

    03-31 23:58:53.650: E/AndroidRuntime(2804):     at android.app.ActivityThread.access$2200(ActivityThread.java:119)

    03-31 23:58:53.650: E/AndroidRuntime(2804):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)

    03-31 23:58:53.650: E/AndroidRuntime(2804):     at android.os.Handler.dispatchMessage(Handler.java:99)

    03-31 23:58:53.650: E/AndroidRuntime(2804):     at android.os.Looper.loop(Looper.java:123)

    03-31 23:58:53.650: E/AndroidRuntime(2804):     at android.app.ActivityThread.main(ActivityThread.java:4363)

    03-31 23:58:53.650: E/AndroidRuntime(2804):     at java.lang.reflect.Method.invokeNative(Native Method)

    03-31 23:58:53.650: E/AndroidRuntime(2804):     at java.lang.reflect.Method.invoke(Method.java:521)

    03-31 23:58:53.650: E/AndroidRuntime(2804):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)

    03-31 23:58:53.650: E/AndroidRuntime(2804):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)

    03-31 23:58:53.650: E/AndroidRuntime(2804):     at dalvik.system.NativeStart.main(Native Method)

    03-31 23:58:53.650: E/AndroidRuntime(2804): Caused by: java.lang.NullPointerException

    03-31 23:58:53.650: E/AndroidRuntime(2804):     at net.dave_b.factoring.AndroidFactoringActivity.onCreate(AndroidFactoringActivity.java:26)

    03-31 23:58:53.650: E/AndroidRuntime(2804):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)

    03-31 23:58:53.650: E/AndroidRuntime(2804):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)

    03-31 23:58:53.650: E/AndroidRuntime(2804):     ... 11 more

    03-31 23:58:53.679: I/dalvikvm(2804): threadid=7: reacting to signal 3

    03-31 23:58:53.679: E/dalvikvm(2804): Unable to open stack trace file '/data/anr/traces.txt': Permission denied

    03-31 23:59:57.629: I/Process(2804): Sending signal. PID: 2804 SIG: 9

    04-01 00:07:36.129: D/AndroidRuntime(3040): Shutting down VM

    04-01 00:07:36.129: W/dalvikvm(3040): threadid=3: thread exiting with uncaught exception (group=0x4001b188)

    04-01 00:07:36.139: E/AndroidRuntime(3040): Uncaught handler: thread main exiting due to uncaught exception

    04-01 00:07:36.159: E/AndroidRuntime(3040): java.lang.RuntimeException: Unable to start activity ComponentInfo{net.dave_b.factoring/net.dave_b.factoring.AndroidFactoringActivity}: java.lang.NullPointerException

    04-01 00:07:36.159: E/AndroidRuntime(3040):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)

    04-01 00:07:36.159: E/AndroidRuntime(3040):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)

    04-01 00:07:36.159: E/AndroidRuntime(3040):     at android.app.ActivityThread.access$2200(ActivityThread.java:119)

    04-01 00:07:36.159: E/AndroidRuntime(3040):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)

    04-01 00:07:36.159: E/AndroidRuntime(3040):     at android.os.Handler.dispatchMessage(Handler.java:99)

    04-01 00:07:36.159: E/AndroidRuntime(3040):     at android.os.Looper.loop(Looper.java:123)

    04-01 00:07:36.159: E/AndroidRuntime(3040):     at android.app.ActivityThread.main(ActivityThread.java:4363)

    04-01 00:07:36.159: E/AndroidRuntime(3040):     at java.lang.reflect.Method.invokeNative(Native Method)

    04-01 00:07:36.159: E/AndroidRuntime(3040):     at java.lang.reflect.Method.invoke(Method.java:521)

    04-01 00:07:36.159: E/AndroidRuntime(3040):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)

    04-01 00:07:36.159: E/AndroidRuntime(3040):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)

    04-01 00:07:36.159: E/AndroidRuntime(3040):     at dalvik.system.NativeStart.main(Native Method)

    04-01 00:07:36.159: E/AndroidRuntime(3040): Caused by: java.lang.NullPointerException

    04-01 00:07:36.159: E/AndroidRuntime(3040):     at net.dave_b.factoring.AndroidFactoringActivity.onCreate(AndroidFactoringActivity.java:26)

    04-01 00:07:36.159: E/AndroidRuntime(3040):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)

    04-01 00:07:36.159: E/AndroidRuntime(3040):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)

    04-01 00:07:36.159: E/AndroidRuntime(3040):     ... 11 more

    04-01 00:07:36.199: I/dalvikvm(3040): threadid=7: reacting to signal 3

    04-01 00:07:36.199: E/dalvikvm(3040): Unable to open stack trace file '/data/anr/traces.txt': Permission denied

    04-01 00:07:40.329: I/Process(3040): Sending signal. PID: 3040 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T04:29:32.363

```
resultsField.setText(String.valueOf(factorResults)); 
```

`resultsField`是`null`并且您正在尝试将值设置为 null。

```
resultsField= (TextView ) findViewById(R.id.userNumber); 
```

在设置值之前获取textview实例，否则`resultsField`将`null`和所有对`null`引用的操作结果在`NullPointerException`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T04:33:49.430

你得到了一个空指针，因为你没有初始化变量 resultsField （你刚刚声明了它）。

如你所用

`userNumber = (EditText) findViewById(R.id.userNumber);`

您甚至必须初始化参考结果字段。这可以使用

`resultsField= (TextView ) findViewById(R.id.resultsField);`

在`onCreate()`声明之后`setContentView()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-11T06:10:36.377

You need to initialize the userNumer and resultsFiled as follows

userNumber = (EditText) findViewById(R.id.userNumber); resultsField= (TextView ) findViewById(R.id.resultsField);

# javascript - JavaScript 常量

> ID：13106371
> 
> 赞同：0
> 
> 时间：2012-10-28T04:27:43.083
> 
> 标签：javascript, jquery, variables, object

我们知道我们可以保护变量的值，所以用户不能改变现有变量的值！！实现这对对象没有任何问题..？？

例如..

```
const x = 5;

x = 10;

alert(x)
// will be returned 5 
```

使用对象..

```
 const obj = {
        init: function() {
         obj.show()
      },
      show: function() {
       //..
      },
      hide: function() {
      //..
      }
  }
  obj.init(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T06:03:02.770

如果你可以摆脱使用 JS5，你有这个选择：

```
var CONST = {
  NAME: "The Cool Gizmo",
  VERSION: 2
};
Object.freeze(CONST);

alert(CONST.NAME); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T06:06:51.557

```
 var myObj = (function () {
    var privVar1 = 111,
        privVar2 = 222;

    var getConstants = function () {

        return { priv1: privVar1, priv2: privVar2 }
    };
    return { getConstants: getConstants };
})();

myObj.getConstants().priv1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T04:35:54.217

目前并非所有浏览器都支持 const 关键字，也不是当今使用的官方 Javascript 规范的一部分。（https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/const）

要完成一个常量，请考虑将您需要的行为封装在一个函数中：

```
var getConstant = function(key) {
    var constants = { x: 5 };        
    return constants[key];
};

alert(getConstant("x")); 
```

* * *

或者，只需使用具有适当范围的变量来保护第 3 方不设置其值：

```
function myModule() {
    var x = 5;
    doSomethingWith(x);
} 
```

# vb.net - 访问 Backgroundworker 中的数据表和变量

> ID：13106373
> 
> 赞同：0
> 
> 时间：2012-10-28T04:29:20.347
> 
> 标签：vb.net, multithreading, backgroundworker

在我的程序中，我使用了一个在加载表单时填充的数据表。我使用 backgroundworker 来做一些网络操作。在后台工作人员的 doWork() 内部，我需要来自数据表的数据以及我在加载表单时创建的类的对象。数据表和类对象中的数据在 Dowork() 中更新，并且数据表和类对象中的这些值也在后台工作程序 ProgressChanged 的​​列表中更新。数据表和类对象都被声明为 Form1 的全局对象。但我读到这不是线程安全的。那么如何正确使用以线程安全的方式使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T17:23:30.330

您可以将一个参数从 RunWorkerAsync 传递给 DoWork，这可以是一个数组来完成它：

```
dim bgw as new BackgroundWorker
dim dt as DataTable
dim anything as ...
...
bgw.RunWorkerAsync(New Object() {dt, anything, ...})

... 
```

在doWork里面：

```
Private Sub BGW_DoWork(sender As Object, e As System.ComponentModel.DoWorkEventArgs)
    Dim dt as DataTable

    dt = TryCast(e.Argument(0), DataTable)
    ' and so on 
```

一旦您开始修改表单上与 UI 相关的任何内容，您就可以开始阅读有关 BeginInvoke 和 InvokeRequired 的内容。那里可能有很多，但也许我遇到的这个问题可能是一个很好的例子：
[Multithreading for a progressbar and code locations (vb.net)?](https://stackoverflow.com/questions/12533412/multithreading-for-a-progressbar-and-code-locations-vb-net/13104341)

# iphone - NSArray 中的对象排序

> ID：13106374
> 
> 赞同：0
> 
> 时间：2012-10-28T04:29:24.267
> 
> 标签：iphone, ios, ipad, nsarray

我有一个 NSArray，里面有 3 个对象。每个对象由 5 个值组成。如何在对象中按日期排序？

```
result: (
    gg,
    "2012-10-28 01:34:00 +0000",
    "Church Bells",
    "pin_red",
    1
)(
    iu,
    "2008-09-22 17:32:00 +0000",
    "Birthday Song",
    "pin_red",
    1
)(
    "my birthday woo hoo",
    "2012-09-04 19:27:00 +0000",
    "Birthday Song",
    "pin_blue",
    1
) 
```

我正在寻找的结果 - 排序数组应该是这样的。

```
(
    iu,
    "2008-09-22 17:32:00 +0000",
    "Birthday Song",
    "pin_red",
    1
)
(
    "my birthday woo hoo",
    "2012-09-04 19:27:00 +0000",
    "Birthday Song",
    "pin_blue",
    1
)
(
    gg,
    "2012-10-28 01:34:00 +0000",
    "Church Bells",
    "pin_red",
    1
) 
```

我从我的 nsdictionary 对象中获取这个数组。

```
dictionary = [[NSMutableDictionary alloc] initWithContentsOfFile:stringsPlistPath];
stringsMutableArray = [[NSMutableArray alloc] initWithObjects:nil];

        for (id key in dictionary) 
        {
            [stringsMutableArray addObject:[dictionary objectForKey:key]];
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T04:56:26.813

试试这个：

```
NSArray *sortedArray = [result sortedArrayUsingComparator: ^(id obj1, id obj2) {
    NSArray *arr1 = (NSArray *)obj1;
    NSArray *arr2 = (NSArray *)obj2;
    NSDate *date1 = arr1[1];
    NSDate *date2 = arr2[1];

    return [date1 compare:date2];
}]; 
```

此代码假定您实际上有一个数组数组，并且日期是 NSDate 对象，始终位于内部数组的索引 1 处。如果按您想要的相反顺序排序，请交换两个日期以进行日期比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T04:34:18.563

这是解决您的问题的类似问题：[Sort NSArray of date strings or objects](https://stackoverflow.com/questions/1132806/sort-nsarray-of-date-strings-or-objects)

我将从下面的上述链接中粘贴答案：

> 将日期作为 NSDate 对象存储在 NS(Mutable)Array 中，然后使用 [ `-[NSArray sortedArrayUsingSelector:`][1] 或 [ ][1] 并作为参数`-[NSMutableArray sortUsingSelector:]`传递。**`@selector(compare:)`**[ `-[NSDate compare:]`][2] 方法将为您按升序排列日期。这比创建 NSSortDescriptor 简单，也比编写自己的比较函数简单得多。（NSDate 对象知道如何相互比较，至少与我们希望使用自定义代码完成的效率一样高。）
> 
> [1]： http: [//developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html#//apple_ref/occ/instm/NSMutableArray/sortUsingSelector](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html#//apple_ref/occ/instm/NSMutableArray/sortUsingSelector)：[2]： [http： //developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDate/compare](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDate/compare)：

# php - 生成一个html 动态使用php标记

> ID：13106378
> 
> 赞同：0
> 
> 时间：2012-10-28T04:30:05.770
> 
> 标签：php, html

我正在从数据库中提取格式为 2012-12-28 的日期值，现在我需要使用日期值创建一个 html li 元素。

li 元素采用以下形式，具有 id 并调用两个 javascript 函数。

```
<li id="date2012-12-28" onClick="showUser('2012-12-28'); getID(this.id);">2012-12-28</li> 
```

在此示例中，日期“2012-12-28”是数据库中的变量值。

如何构建一个 php 查询来动态生成这些链接？

例如

```
echo '<li id="' . $value . + "onClick="showUser('" . $value . "');" .... 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T04:44:21.867

使用结果集，您将使用 foreach 对其进行迭代，例如：

```
<?php foreach($result as $row){?>
<li id="date<?=$row['date'];?>" onClick="showUser('<?=$row['date'];?>'); getID(this.id);"><?=$row['date'];?></li>
<?php } ?> 
```

或者

```
<?php 
foreach($result as $row){
    echo '<li id="date'.$row['date'].'" onClick="showUser(\''.$row['date'].'\'); getID(this.id);">'.$row['date'].'</li>';
}
?> 
```

# c - 函数声明为 void* foo()

> ID：13106379
> 
> 赞同：0
> 
> 时间：2012-10-28T04:30:23.663
> 
> 标签：c, void, void-pointers

我在我的操作系统书中遇到了这段代码：

```
void *foo()
{
     // does something

     pthread_exit(NULL);
} 
```

是什么意思`void *foo`？这是否意味着函数返回指向某种类型的指针`void`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T04:32:58.793

不，这意味着该函数返回一个*无类型*类型的指针 - `void*`。

这是一种“通用”指针类型。任何指向数据的指针都可以转换为`void*`，并返回给调用者。但是，为了*取消引用*指针，您必须将其强制转换为非空指针类型（`int*`、`long*`、`char*`等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T04:32:57.477

`void *`意味着它返回一个指向某种类型的指针，它没有指定哪个。为了使用，指针被强制转换为适当的类型，然后使用。事实上，这`void *foo`只是一个间距问题。

看看这个[解释](http://theory.uwinnipeg.ca/programming/node87.html)

# javascript - $$('a.deleteButton').invoke('observe', 'click', function(e) 在 Internet Explorer 中不起作用

> ID：13106389
> 
> 赞同：0
> 
> 时间：2012-10-28T04:33:16.467
> 
> 标签：javascript, internet-explorer, prototypejs

我的代码实际上在 chrome 中运行良好，但在 IE 中测试失败：/ e.element().hide() 和 e.element().insert() 不起作用。Ajax.Request() 在两种浏览器中都可以正常工作。知道如何解决吗？

```
$$('a.deleteButton').invoke('observe', 'click', function(e) {
            var commentID = parseInt(this.readAttribute('data-commentid'));
            e.stop();
            new Ajax.Request('index.php?action=CNewsComment',
                    {
                        method: 'POST',
                        parameters: {entryID: commentID, cNewsAction: 'delete'},
                        onSuccess: function(transport){
                            new Effect.toggle('commentID' + commentID, 'Appear', {duration:0.5});
                            var count = parseInt($('commentsCount').innerHTML.stripTags());
                            $('commentsCount').innerHTML = count-1;
                        },
                        onLoading: function(transport){
                            e.element().hide(); //not working in IE but in Chrome

                            if ($('deleteLoading' + commentID)) {
                                $('deleteLoading' + commentID).show();
                            }
                            else {
                                e.element().up().insert ({ 
                                    'before'  : '<img id="deleteLoading' + commentID + '" src="' + RELATIVE_WCF_DIR + 'images/cNewsSpinnerS.gif" alt="" />'
                                });
                            }
                        },
                        onFailure: function(transport){ 
                            e.element().show();                         
                            $('deleteLoading' + commentID).hide();                          
                            alert("An error occurred: " + transport.status + ' - ' + transport.statusText);
                        }
            });
    }); 
```

**更新：如果我将在 IE 中不起作用的代码放在 AJAx-Request 之外，它正在工作：**

```
$$('a.deleteButton').invoke('observe', 'click', function(event) {
            event.stop();
            // IE PART START
            event.element().hide();
            if ($('deleteLoading' + commentID)) {
                $('deleteLoading' + commentID).show();
            }
            else {
                event.element().up().insert ({ 
                'before'  : '<img id="deleteLoading' + commentID + '" src="' + RELATIVE_WCF_DIR + 'images/cNewsSpinnerS.gif" alt="" />'
                });
            }
            // IE PART END
            new Ajax.Request('index.php?action=CNewsComment',
                    {
                        method: 'POST',
                        parameters: {entryID: commentID, cNewsAction: 'delete'},
                        onLoading: function(transport){
                        } 
```

但是在 onLoading-function 里面却不是，为什么？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T04:24:15.140

```
$$('a.deleteButton').invoke('observe', 'click', function(e) {
        var commentID = parseInt(this.readAttribute('data-commentid'));
        e.stop();
        new Ajax.Request('index.php?action=CNewsComment',
                {
                    method: 'POST',
                    parameters: {entryID: commentID, cNewsAction: 'delete'},
                    onSuccess: function(transport){
                        new Effect.toggle('commentID' + commentID, 'Appear', {duration:0.5});
                        var count = parseInt($('commentsCount').innerHTML.stripTags());
                        $('commentsCount').innerHTML = count-1;
                    },
                    onLoading: (function(transport, e){
                        e.element().hide(); //not working in IE but in Chrome

                        if ($('deleteLoading' + commentID)) {
                            $('deleteLoading' + commentID).show();
                        }
                        else {
                            e.element().up().insert ({ 
                                'before'  : '<img id="deleteLoading' + commentID + '" src="' + RELATIVE_WCF_DIR + 'images/cNewsSpinnerS.gif" alt="" />'
                            });
                        }
                    }).bindAsEventListener(this),
                    onFailure: function(transport){ 
                        e.element().show();                         
                        $('deleteLoading' + commentID).hide();                          
                        alert("An error occurred: " + transport.status + ' - ' + transport.statusText);
                    }
        });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:05:41.447

尝试这个：

```
 $$('a.deleteButton').invoke('observe', 'click', function(e) {
        var element = e.element();
        var commentID = parseInt(this.readAttribute('data-commentid'));
        e.stop();
        new Ajax.Request('index.php?action=CNewsComment', {
            method: 'POST',
            parameters: {entryID: commentID, cNewsAction: 'delete'},
            onSuccess: function(transport) {
                new Effect.toggle('commentID' + commentID, 'Appear', {duration:0.5});
                var count = parseInt($('commentsCount').innerHTML.stripTags());
                $('commentsCount').innerHTML = count-1;
            },
            onLoading: function(transport) {
                element.hide(); // not working in IE but in Chrome

                var delId = 'deleteLoading' + commentID;
                if ($(delId)) {
                    $(delId).show();
                } else {
                    element.up().insert({ 
                        'before': '<img id="' + delId + '" src="' + RELATIVE_WCF_DIR + 'images/cNewsSpinnerS.gif" alt="" />'
                    });
                }
            },
            onFailure: function(transport) { 
                element.show();                         
                $('deleteLoading' + commentID).hide();                          
                alert("An error occurred: " + transport.status + ' - ' + transport.statusText);
            }
        });
    }); 
```

如果此代码不起作用，请尝试`onLoading`用此变体替换：

```
 onLoading: function(element, transport) {
                element.hide(); // not working in IE but in Chrome

                var delId = 'deleteLoading' + commentID;
                if ($(delId)) {
                    $(delId).show();
                } else {
                    element.up().insert({ 
                        'before': '<img id="' + delId + '" src="' + RELATIVE_WCF_DIR + 'images/cNewsSpinnerS.gif" alt="" />'
                    });
                }
            }.curry(element), 
```

PS你使用哪个IE版本？较旧的 IE 具有单个全局事件对象`window.event`，并且在异步回调时，您的`e`even in 关闭可能不会指向您的原始点击事件，而是指向在`onLoading`调用之前触发的另一个事件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-28T04:43:36.867

我只是对原型了解一点。但是您如何调试以检查“e”是否是您要使用的元素。有时我会遇到这种问题。

# c - 如果将 --static 标志与 gcc 一起使用，则编译错误

> ID：13106390
> 
> 赞同：1
> 
> 时间：2012-10-28T04:33:24.797
> 
> 标签：c, gcc

当我尝试编译静态时，我收到以下错误：

```
gcc  defrag.c -o abc.exe --static
/usr/bin/ld: cannot find -lc
collect2: error: ld returned 1 exit status 
```

但是，同样的东西在没有静态的情况下编译得很好：

```
gcc  defrag.c -o abc.exe 
```

问题：为什么指定static时编译失败？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T05:07:44.323

发生错误是因为“--static”表示链接命令中的所有后续库都*必须*是静态的......但您的系统上只有一个*动态*库。

推荐解决方案：

gcc defrag.c -o abc -lc --static -lmystaticlib

如果您只是为了拥有静态 exe 而尝试创建静态 exe - 我建议“不要”。共享库很好。由于许多不同的原因。

这是一个很好的链接：

*   [Linux静态链接死了？](https://stackoverflow.com/questions/3430400/linux-static-linking-is-dead)

# php - 如何使用递归插入数据？

> ID：13106391
> 
> 赞同：0
> 
> 时间：2012-10-28T04:33:44.873
> 
> 标签：php

我正在使用一种通过递归为我的网站构建导航的方法，但我在添加样式时遇到了麻烦。我的方法的构建方式我似乎无法找到一种方法让父类成为父类，子类成为子类，所以在 CSS 中我可以设置两者的样式。如果它会让事情更容易理解，这里是我的数据库的一个例子：

![在此处输入图像描述](../Images/4287bf2ebc1e4501baa00bbaf620d17a.png)

这是我试图实现的输出示例：

```
<ul>
    <li class="parent">Parent
    <ul>
        <li class="child">Child 1</li>
        <li class="child">Child 2</li>
        <li class="child">Child 3</li>
        <li class="child">Child 4</li>
    </ul>
    </li>
</ul> 
```

当前代码将 child 放在`<li>`. 我尝试了很多不同的事情，这让我很生气。这是代码：

```
/* i'm using pdo to pull all the categories out of MySQL, NULL means it will be a parent category */
$array = $categoryVIEW->fetchAll(PDO::FETCH_ASSOC);
$this->buildSide($array,NULL)

private function buildSide($items,$parent)
{
    $hasChildren = false;
    $outputHtml = '<ul>%s</ul>';
    $childrenHtml = ''; 
    foreach($items as $item)
    {
        if ($item['parent'] == $parent)
        {
            $hasChildren = true;
            $childrenHtml .= '<li><a href="?c='.$item['category_id'].'">'.$item['category_name'];         
            $childrenHtml .= $this->buildSide($items,$item['category_id']);         
            $childrenHtml .= '</a></li>';           
        }
    }
    if (!$hasChildren)
    {
        $outputHtml = '';
    }
    return sprintf($outputHtml,$childrenHtml);      
} 
```

我确定这很容易，但我被卡住了:(

感谢您的关注！

**更新**

我一直在玩弄我的代码并添加了一个条件来检查`$parent`存在`NULL`，如果是这样`$class`，则成为父母，否则成为`$class`孩子。我遇到的问题是我`<ul></ul>`在每个孩子之后都会得到一个不需要的东西？奇怪的是，当我改变`$child = false;`它时，它消除了我的错误`<ul></ul>`，但让一切都成为父母。

```
private function buildSide($array,$parent)
{       
    $child = ($parent === NULL)?false:true;
    $html  = '';
    $tag   = '<ul>%s</ul>'; 
    $class = ($child)?'child':'parent'; 

    foreach($array as $item)
    {
        if($item['parent'] === $parent)
        {
            $child = true;
            $html .= '<li class="'.$class.'">'.$item['category_name'];
            $html .= $this->buildSide($array,$item['category_id']);
            $html .= "</li>\n";
        }
    }
    if(!$child)
    {
        $tag = '';
    }
    return sprintf($tag,$html);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T04:44:06.870

***更新***基于您的编辑

如果我了解您要实现的目标，则可能需要分两次执行此操作...由于`parent`数据库中的字段从平面树创建了隐式层次结构，因此您可能需要首先构造层次结构才能获得所需的输出。由于您在处理数据元素时渲染 HTML，因此您将无法保证在渲染列表时保留层次结构。

相反，您需要生成与存储在数据库中的父/子关系相匹配的层次结构。这里有几个主题可以解决这个过程（[例如](https://stackoverflow.com/questions/192220/what-is-the-most-efficient-elegant-way-to-parse-a-flat-table-into-a-tree)）。一旦有了与隐式 DB 结构相匹配的树结构，生成要匹配的 HTML 应该是相当简单的。

# php - PHP：从 PHP 运行 shell 命令？

> ID：13106395
> 
> 赞同：-1
> 
> 时间：2012-10-28T04:34:45.263
> 
> 标签：php, linux

```
echo shell_exec("ll"); 
```

为什么运行此代码时 php 不显示文件和目录列表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T04:37:33.640

您正在使用别名命令。这就是为什么。跑步时会发生什么`ls`？

来源：[shell_exec](http://php.net/manual/fr/function.shell-exec.php)和体验的 PHP 页面

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-28T04:37:54.967

`ll`不是命令。我相信这`echo shell_exec("ls");`会输出一个目录列表。

如果您在安全模式下运行 PHP，您也可能会遇到一些问题。在这里你有更多信息： http: [//php.net/manual/en/function.shell-exec.php](http://php.net/manual/en/function.shell-exec.php)

> `shell_exec`：当 PHP 在安全模式下运行时，此功能被禁用。

最终，您有更*安全*的替代方法来执行 bash 中的命令，例如`readdir`： http: [//php.net/manual/en/function.readdir.php](http://php.net/manual/en/function.readdir.php)。这是一个读取特定目录中文件的函数。

`readdir($dir_handle)`例子：

```
<?php

if ($handle = opendir('/path/to/files')) {
    echo "Directory handle: $handle\n";
    echo "Entries:\n";

    while (false !== ($entry = readdir($handle))) {
        echo "$entry\n";
    }

    closedir($handle);
}
?> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-28T04:39:12.920

ll 通常作为默认别名添加到 bash（在您的 .bashrc 文件中）。

要仔细检查是否不是这种情况，请在终端中键入以下内容：

```
type -a ll 
```

您的 shell 会告诉您 ll 是别名还是实际程序。

PHP 在没有安装默认别名的不同环境中运行。

您可能想要的命令表达式是：

```
shell_exec("ls -l"); 
```

# wordpress - 在 wordpress 中使用永久链接时的目录问题

> ID：13106396
> 
> 赞同：0
> 
> 时间：2012-10-28T04:34:46.197
> 
> 标签：wordpress, wordpress-theming, permalinks

我在编写主题时遇到了问题。我的 wordpress 文件夹位于 public_html/ 永久设置设置为“帖子名称”，所以它类似于[http://websiteurl.com/post-name/](http://websiteurl.com/post-name/)

在我的主题中，我想加载一个位于 public_html/media/ 中的图像，但是当我使用

```
<img src="media/img.jpg"> 
```

浏览器尝试在文件夹 public_html/post-name/media/img.jpg 中查找图像。我应该如何编码我的主题，以免发生这种情况？我不想将我的永久链接选项更改为 ?page=ID。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:13:39.410

最好使用完整的绝对路径，例如

```
<img src="http://websiteurl.com/media/img.jpg"> 
```

. [因此，当您的路径为http://websiteurl.com/category/post-name/](http://websiteurl.com/category/post-name/)时，它不会产生问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T06:56:28.223

尝试

```
<img src="/media/img.jpg"> 
```

反而。第一个`/`将使浏览器开始查看 under`public_html`而不是 under `post-name`。

# java - 客户端-服务器套接字程序中的线程 - 代理服务器

> ID：13106398
> 
> 赞同：2
> 
> 时间：2012-10-28T04:34:59.680
> 
> 标签：java, http, sockets, client-server

我正在尝试编写一个充当代理服务器的程序。代理服务器基本上侦听给定端口（7575）并将请求发送到服务器。到目前为止，我还没有实现缓存响应。

代码看起来像

```
ServerSocket socket = new ServerSocket(7575);   
Socket clientSocket = socket.accept(); 
clientRequestHandler(clientSocket); 
```

我将上面的代码更改如下： //从另一个方法内部调用相同的 clientRequestHandler 方法。

```
Socket clientSocket = socket.accept();
Thread serverThread = new Thread(new ConnectionHandler(client));
serverThread.start();

class ConnectionHandler implements Runnable {
    Socket clientSocket = null;
    ConnectionHandler(Socket client){
        this.clientSocket = client;
    }
    @Override
    public void run () {
        try {
            PrxyServer.clientRequestHandler(clientSocket);
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    } 
```

}

使用该代码，我可以打开像谷歌这样的网页。但是，如果我打开另一个网页，即使我完全收到第一个响应，我也会因对等预期而重置连接。

**1.我该如何处理这个问题** 我可以使用线程来处理不同的请求吗？有人可以提供参考，我在哪里寻找实现线程的示例代码。

# python - 在一般情况下和在 python 中执行字符串搜索的最快方法

> ID：13106401
> 
> 赞同：2
> 
> 时间：2012-10-28T04:36:32.593
> 
> 标签：python, algorithm, search, complexity-theory

我的任务是在非常短（比如 200 个字符长）的文档列表中搜索字符串或模式。但是，假设有 100 万份这样的时间文件。执行此搜索的最有效方法是什么？我正在考虑标记每个文档并将单词放入哈希表中，单词作为键，文档编号作为值，在那里创建一个单词包。然后执行单词搜索并检索包含该单词的文档列表。据我所知，这个操作需要 O(n) 次操作。还有其他方法吗？可能不使用哈希表？

另外，是否有可以执行高效搜索的 python 库或第三方包？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T05:57:01.227

既然你正在寻找一个库，你有没有看过 PyLucene？

[http://lucene.apache.org/pylucene/features.html](http://lucene.apache.org/pylucene/features.html)

虽然 Lucene 通常实现排名检索（基于相对分数的匹配） - 与完全匹配相反 - 它可用于精确短语搜索。这是一个关于如何使用 Lucene 搜索确切短语的链接。它是用 Java 编写的，但给出了这样的想法：

[使用 Lucene 的精确短语搜索？](https://stackoverflow.com/questions/5527868/exact-phrase-search-using-lucene)

您的问题专门询问了效率。效率在什么方面？我假设您的意思是用户的最快查找时间。*如果您确实纯粹根据用户的查找时间来*谈论速度，那么没有比实际索引文档中的所有单词更快的方法了，*前提是您愿意忍受初始时间来索引语料库中的所有文档*. 这通常是合乎逻辑的选择，因为索引是一次性事件，并且用户搜索经常发生。但是，显然，这会带来相当大的内存使用量。因此，如果您谈论的是内存使用方面的效率，那么您可能希望遍历所有文档并对每个文档执行正则表达式搜索。如果您想避免索引的初始查找时间，您也可以使用此方法，但是，考虑到语料库的大小，这不太可能是逻辑限制因素，并且考虑到关注点通常会满足将多个查询。

我要指出的唯一另一件事是，由于您提到您正在搜索模式而不仅仅是单词，如果您尝试支持查询模式，那么仅索引*单词*将无济于事（除非该模式是其中的单词之一文件！）

如果您不打算使用 Lucene，而是想自己实现它，请查看使用倒排索引的索引。如果您要进行短语查询，这里是关于如何创建倒排索引的一个很好的解释：

[http://www.searchenginepeople.com/blog/how-search-really-works-the-index-2.html](http://www.searchenginepeople.com/blog/how-search-really-works-the-index-2.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T09:53:07.713

大多数搜索引擎都是按照倒排索引的原理工作的。基本上，对于每个标记（单词、三元组等），您都会存储包含此标记的文档的排序列表。匹配查询时，您合并连接所有必需标记的列表以生成候选文档列表。如果索引匹配不能保证查询匹配，则必须在匹配的文档上重新测试查询表达式。

存储倒排索引的解决方案有很多，其中一些（Lucene、Sphinx、PostgreSQL FTS）已经支持在倒排索引上计算表达式。

搜索引擎的魔力主要发生在对文档进行预处理和标记化以及根据用户请求生成搜索查询方面。预处理技巧包括通过词干词干和每个词存储多个不同表示的词规范化。对于查询构造，您可能需要执行同义词替换之类的操作。正则表达式有点棘手，但是关于[在 PostgreSQL 中实现对正则表达式搜索的索引支持](http://www.youtube.com/watch?v=R_hooLbByX4)有一个很好的讨论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T04:51:05.337

虽然您使用哈希表制作词袋的想法听起来很有趣，但我认为当您打开每个文件，将其读入内存，对其进行标记，制作哈希表，将每个标记放入哈希表，对搜索词进行哈希处理，然后索引到您的哈希表来查找包含该单词的每个文档的文档 ID，与仅使用正则表达式并在每个文件中进行搜索相比，您花费的时间要多得多：

```
import re
import os
import sys

searchterm = sys.argv[1]
searchexp = re.compile("(%s)" % searchterm, re.M)

for filename in os.listdir(sys.argv[2]):
    f = open(os.path.join(sys.argv[2], filename), 'r')
    contents = f.read()
    f.close()
    if searchexp.search(contents):
        print(filename) 
```

是不是太慢了？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-28T04:54:40.673

我认为没有比Russ Cox[在这里](http://swtch.com/~rsc/regexp/regexp4.html)描述的解决方案更好的解决方案了，他为不幸退役的谷歌代码搜索引擎开发了这个解决方案。

# c++ - 更改变量文本

> ID：13106402
> 
> 赞同：1
> 
> 时间：2012-10-28T04:36:37.947
> 
> 标签：c++, sdl

> **可能重复：**
> [在 C++ 中，如何清除字符串流变量？](https://stackoverflow.com/questions/20731/in-c-how-do-you-clear-a-stringstream-variable)

我想在循环中显示的字符串有问题。

我在循环中这样设置它：

```
//while {
 std::stringstream s;
 s << "Hello";

  font_surface = TTF_RenderText_Solid(font,s.str().c_str(),font_color);
  apply_surface(x,y,font_surface,screen);   

  s << "GoodBye";
  if(font_surface = TTF_RenderText_Solid(font,s.str().c_str(),font_color);
  apply_surface(bx,by,font_surface,screen);

//end loop } 
```

我遇到的问题是输出首先显示`Hello`在它的另一个位置`HelloGoodBye`，我需要在添加之前清除内容，`Goodbye`所以我只能在屏幕上的第二个位置看到它。

那么在将其更改为`Hello`之前，我将如何清除它的信息`Goodbye`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T04:40:58.537

如果您必须使用字符串流，请调用

```
s.str(""); 
```

清除它

# javascript - 在 Javascript 中创建可重用对象的最佳方法

> ID：13106406
> 
> 赞同：1
> 
> 时间：2012-10-28T04:37:33.487
> 
> 标签：javascript, oop

我使用了原型和 jQuery 库。但是我想更广泛地学习 OOP JS。我想做的事情是创建一个 JS 对象的多个实例以同时运行。在我在这里使用的示例中，我想创建 7 个不同的盒子来反弹。我阅读了使用原型多次创建对象的最佳方法。这是我创建的一个工作脚本示例。

我遇到的问题是如果取消注释“this.int = setInterval(this.move,20);”，我会收到一条错误消息，指出在移动函数中找不到“this.box.style.left” . 似乎移动功能从反弹对象中被破坏了。我已经尝试了我能想到的一切来完成这项工作。我有点需要将 int 作为对象的变量，这样我就可以创建一个停止函数来杀死它。

像“bounce.prototype.stop = function() { clearInterval(this.int); });”

HTML

```
<body onload="dothis()">
<div id="case">
  <div class="boxclass" id="box1">BOX</div>
</div>
</body> 
```

CSS

```
<style type="text/css">
    body {
        background-color: #3F9;
        text-align: center;
        margin: 0px;
        padding: 0px;
    }

    #case {
        background-color: #FFF;
        height: 240px;
        width: 480px;
        margin-right: auto;
        margin-bottom: 72px;
        position: relative;
        margin-top: 72px;
        margin-left: auto;
    }
    .boxclass {
        background-color: #F96;
        height: 36px;
        width: 36px;
        position: absolute;
    }
    </style> 
```

JAVASCRIPT

```
<script type="text/javascript">
function bounce(frame,box,speed,x,y) {
     this.speed = speed;
     this.frame = frame;
     this.box = box;
     this.fw = frame.offsetWidth;
     this.fh = frame.offsetHeight;
     this.bx = x;
     this.by = y
     this.int = '';
     return this;

}
bounce.prototype.position = function () {   

    if (this.box.offsetLeft <= 0 && this.bx < 0) {
        console.log('LEFT');
        this.bx = -1 * this.bx;
    }
    if ((this.box.offsetLeft + this.box.offsetWidth) >= this.frame.offsetWidth) {
        console.log('RIGHT');
        this.bx = -1 * this.bx;
    }
    if (this.box.offsetTop <= 0 && this.by < 0) {
        console.log('TOP');
        this.y = -1 * this.y;
    }
    if ((this.box.offsetTop + this.box.offsetHeight) >= this.frame.offsetHeight) {
        console.log('BOTTOM');
        this.y = -1 * this.y;
    }
    return this;
}

bounce.prototype.move = function() {    
    this.box.style.left = this.box.offsetLeft + this.bx+"px";
    this.box.style.top = this.box.offsetTop + this.by+"px";
    //this.int = setInterval(this.move,20);
}

function dothis() {
    bn1 = new bounce( document.getElementById('case'), document.getElementById('box1'), 10,20,30).position();
    bn1.move();
}

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T04:45:22.120

当您调用 this.move 时，您会丢失上下文。基本上，在 JS 中，您需要传递调用方法的上下文，否则 this.move 将在另一个上下文中运行。

您可以将此指针缓存在 SetInterval 之外，并使用它来调用它，如下所示：

```
setInterval(function(context) {
    return function() {context.move(); } 
} )(this), 20); 
```

或这个：

```
var that = this;
setInterval(function(){
    that.move();
}, 20); 
```

# java - 并发编程：我应该先写一个顺序程序，然后添加线程安全吗？

> ID：13106412
> 
> 赞同：0
> 
> 时间：2012-10-28T04:39:37.803
> 
> 标签：java, concurrent-programming

我正在做一个项目，我们必须创建多个线程（实际数量将由测试人员（TA）输入）。我不仅在编程方面遇到问题，而且在设计方面也遇到了麻烦，我无法理解所有将被调用的线程以及可能导致错误的地方。该项目即将到期，所以如果它真的让我退缩，我不想浪费时间，但我想知道我是否应该编写程序，就像只有一个线程将运行并且一切都应该是顺序的，然后再稍后返回并尝试添加代码的线程安全部分？这会花费原始时间的两倍吗？

项目描述：注意：我将尽可能含糊其辞，以免违反任何荣誉准则，对不起:(

你的程序应该接受 n 个 objectA 线程、m 个 objectB 线程和 r 个 objectC

objectB 线程与 objectA 中的代码交互。objectA 线程与 objectB 和 objectC 中的代码交互 objectB 和 objectC 不直接交互，而是通过 objectA -ex 间接交互：objectB 需要来自 objectA 的东西。objectA 通过调用 objectC 获得该结果的结果

我的困惑主要源于所有这些交互都将由 m+n 个线程完成，并且在整个描述中存在各种限制，例如 objectB 可以从 objectA 请求某些内容，而 objectA 必须等待 objectC 在返回之前完成该内容它对对象B。此外，每个 objectA 线程一次只能处理来自 objectB 的一条指令，依此类推。

我只是想知道我是否编写代码使得只有1个objectA，1个objectB和1个object C，我可以回去轻松修改它，以便可以将那些1更改为m，n和r吗？

再次抱歉，如果我的描述有点混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T08:08:24.190

> 我想知道我是否应该像只运行一个线程那样编写程序并且一切都应该是顺序的，然后再回去尝试添加代码的线程安全部分？

我会让程序首先使用最少的线程。然后我会重新编写它以使用多个线程。你不应该低估这可能需要做多少工作，当你这样做时，你必须重新审视你的所有假设。

> 这会花费原始时间的两倍吗？

至少两倍长，但它更有可能起作用。如果您尝试一次完成所有操作，那么您最终可能会变得一团糟，而不是根本无法工作。如果您因努力而获得分数，并且有时遇到线程安全错误也没关系，那么一次性方法可能会给您最好的分数。如果您是专业开发人员，使用一个线程工作的东西比使用多个线程的罕见且不可重现的错误要好得多。

# javascript - 是否有可以在我自己的服务器上托管的 BaaS 解决方案？

> ID：13106415
> 
> 赞同：3
> 
> 时间：2012-10-28T04:41:19.020
> 
> 标签：javascript, database, nosql, backend, custom-backend

我最近才发现一堆不同的 BaaS 产品，如 CloudMine、Parse 和 Apigee，它们似乎是一种轻松构建快速 Web 应用程序的好方法，而无需担心设置一些 php 后端等。但是，对于一个数据可用性是关键的项目，我需要这个，所以即使我处于离线状态，我也必须有可用的数据（应用程序将在本地托管）。那么有没有一种解决方案可以为我提供一个非常简单的 JavaScript API 来在服务器上轻松存储数据而无需滚动我自己的后端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:06:49.787

[部署](http://www.deployd.com/)可能是一种选择。它仍然低于 1.0，但您可以在自己的服务器上安装它，它是免费和开源的。

从他们的网站：

> Deployd 是一个使构建复杂后端变得简单的平台。在几分钟而不是几天内为 Web 和移动应用程序构建 API。与使用传统后端不同，没有样板文件或配置。Deployd 开箱即用。最好的部分是**您可以随心所欲地运行它**- 它是免费和开源的。

# javascript - jQuery Mobile：使点击行为像点击一样

> ID：13106419
> 
> 赞同：1
> 
> 时间：2012-10-28T04:42:52.297
> 
> 标签：javascript, android, jquery-mobile

我正在开发一个对点击事件、长按没有用的应用程序，我想完全删除它们。

实际的问题是 jQuery Mobile UI 引入了延迟以允许它区分点击和点击事件，这导致点击明显延迟，使应用程序感觉滞后。许多应用程序不需要长按，因此延迟通常是无用的。

*请注意，将 ontouch 事件视为点击只会使其无法滚动。*

如有必要，我很乐意为库打补丁，因此欢迎您回答这些问题。

你如何消除延迟？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-23T10:44:20.787

如果您只需要移除，那么它可以轻松实现。一种方法是一起删除此功能，但可以通过 jQuery Mobile 全局配置来完成。

此外，我可以看到这是一个老问题，jQuery Mobile 已移至 1.3.1 版，因此我的答案是在上一个版本中创建的，但据我所知，它也适用于旧版本。

您所要做的就是更改 glabal 参数：

```
$.event.special.tap.tapholdThreshold 
```

它用于告诉（以 ms 为单位）将 tap 计算为 taphold 需要多长时间。

如果此参数设置为某个巨大的数字，我们可以摆脱 taphold。

我给你做了一个工作示例：http: [//jsfiddle.net/Gajotres/U4prb/](http://jsfiddle.net/Gajotres/U4prb/)

```
$(document).bind("mobileinit", function(){
    $.event.special.tap.tapholdThreshold = 10000000000;
}); 
```

还要注意 mobileinit 必须在 jQuery Mobile 初始化之前进行初始化。只要看看我的例子，一切都会很清楚。

# c# - 创建文件夹并将文件集复制到本地磁盘

> ID：13106420
> 
> 赞同：2
> 
> 时间：2012-10-28T04:42:58.800
> 
> 标签：c#, wpf, file, file-io, directory

我正在尝试使用 c# wpf 应用程序创建一个文件夹并将一些图像复制到其中。

```
 curName = txt_PoemName.Text;
            // Specify a "currently active folder" 
            string activeDir = @"C:\Program Files\Default Company Name\Setup2\Poems";

            //Create a new subfolder under the current active folder 
            string newPath = System.IO.Path.Combine(activeDir, curName);

            // Create the subfolder
            System.IO.Directory.CreateDirectory(newPath);

                foreach(DictionaryEntry entry in curPoem){
                    string newFilePath = System.IO.Path.Combine(newPath, entry.Key.ToString() + Path.GetExtension(entry.Value.ToString()));
                    System.IO.File.Copy(entry.Value.ToString(), newFilePath, true);
                } 
```

我已成功创建文件夹和图像。我也可以通过应用程序访问它们。但我在本地磁盘上的位置看不到它们。当我重新启动机器时，应用程序也看不到它们。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T04:51:21.597

听起来你遇到过 UAC 数据重定向 [http://blogs.windows.com/windows/b/developers/archive/2009/08/04/user-account-control-data-redirection.aspx](http://blogs.windows.com/windows/b/developers/archive/2009/08/04/user-account-control-data-redirection.aspx)

您需要强制应用程序以管理员身份运行。 [如何强制我的 .NET 应用程序以管理员身份运行？](https://stackoverflow.com/questions/2818179/how-to-force-my-net-app-to-run-as-administrator-on-windows-7)

或者不要将您的数据保存在敏感区域。我建议保存在

```
Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData); 
```

# python - 追加到列表时更改实例中的变量不起作用 - Python

> ID：13106423
> 
> 赞同：1
> 
> 时间：2012-10-28T04:43:45.463
> 
> 标签：python, class

为什么这不能按预期工作（至少对我而言）？我想不通为什么。

```
class Fred:
    def __init__(self):
          self.a=0

fred=Fred()
lista=[]

for i in range(5):
    fred.a=i
    lista.append(fred)

for i in lista:
    print(str(i.a)) 
```

我得到的只是数字 4 的 5 倍，而不是从 0 到 4。有什么意见吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T04:46:14.700

发生的情况是每次循环在`for i in range(5)`. 如果您移动该`fred=Fred()`循环内部并每次都创建一个新对象，那么您应该会看到预期的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T04:46:53.203

您有一个`Fred`实例，并继续将该实例添加到列表中，`a`并在执行此操作时更改其属性。添加到列表不会复制`Fred`对象；它只是添加了对同一对象的另一个引用。您可以通过`Fred`在循环的每次迭代中创建一个新的来获得预期的行为。

# objective-c - 我应该为异步方法使用什么签名？

> ID：13106426
> 
> 赞同：1
> 
> 时间：2012-10-28T04:45:02.690
> 
> 标签：objective-c, cocoa, grand-central-dispatch

有时 Cocoa 允许用户将 NSOperationQueue 或 dispath_queue_t 传递给 async 方法：

```
+[NSURLConnection sendAsynchronousRequest:queue:completionHandler:]
-[AVPlayer addBoundaryTimeObserverForTimes:queue:usingBlock:]
-[NSNotificationCenter addObserverForName:object:queue:usingBlock:] 
```

有时不会：

```
-[NSDocument continueActivityUsingBlock:]
-[NSSavePanel beginWithCompletionHandler:]
-[GKAchievementDescription loadImageWithCompletionHandler:] 
```

对我来说，将队列传递给方法看起来很模糊，因为在创建块时总是可以捕获所需的队列。例如：

```
NSOperationQueue *q = …;
[aDocument continueActivityUsingBlock:^{
    [q addOperationWithBlock:^{
        // Do actual work here.
    }];
}]; 
```

也许我错过了一些东西并且通过队列是有意义的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T04:59:56.270

要看。

完成时需要回调吗？

如果是这样，您*可能*需要指定一个队列。类型——NSOperationQueue 与 GCD 队列——取决于你。

但是，如果您将回调定义为*始终*在主队列上调用（这适用于始终广泛更新 UI 的回调*）*或*始终*异步调用（即回调被分派到异步队列，通常），没有理由传递目标队列。

如果您的回调是一个期望它可能与必须序列化操作的数据交互的回调，那么定义一个提供序列化原语（队列）的 API 可能是一个强大的快捷方式。

# java - Java中的正则表达式字符串

> ID：13106431
> 
> 赞同：0
> 
> 时间：2012-10-28T04:46:22.633
> 
> 标签：java, sql, regex

我想使用一个正则表达式来提取 Java 中具有以下属性的子字符串：

1.  子字符串的开头以 'WWW' 开头
2.  子字符串的结尾是一个冒号 ':'

我有一些使用 Like 子句的 SQL 经验，例如：

```
Select field1 from A where field2 like '%[A-Z]' 
```

因此，如果我使用 SQL，我会编写代码：

```
like '%WWW%:' 
```

如何在 Java 中启动它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T04:55:00.137

```
 Pattern p = Pattern.compile("WWW.*:");
   Matcher m = p.matcher("zxdfefefefWWW837eghdehgfh:djf");
   while (m.find()){
       System.out.println(m.group());
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T04:53:04.213

如果您只想匹配单词字符 and `.`，那么您可能希望使用正则表达式作为`"WWW[\\w.]+:"`

```
 Pattern p = Pattern.compile("WWW[\\w.]+:");
    Matcher m = p.matcher("WWW.google.com:hello");
    System.out.println(m.find()); //prints true
    System.out.println(m.group()); // prints WWW.google.com: 
```

如果要匹配任何字符，则可能需要将正则表达式用作`"WWW[\\w\\W]+:"`

```
 Pattern p = Pattern.compile("WWW[\\w\\W]+:");
    Matcher m = p.matcher("WWW.googgle_$#.com:hello");
    System.out.println(m.find());
    System.out.println(m.group()); 
```

解释：`WWW`and`:`是文字。`\\w`- 任何单词字符，即 az AZ 0-9。`\\W`- 任何非单词字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T04:57:04.263

这是一个使用子字符串的不同示例。

```
public static void main(String[] args) {
    String example = "http://www.google.com:80";
    String substring = example.substring(example.indexOf("www"), example.lastIndexOf(":"));
    System.out.println(substring);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T05:31:16.430

如果我理解正确

```
String input = "aWWW:bbbWWWa:WWW:aWWWaaa:WWWa:WWWabc:WWW:";
Pattern p = Pattern.compile("WWW[^(WWW)|^:]*:");
Matcher m = p.matcher(input);
while(m.find()) {
    System.out.println(m.group());
} 
```

输出：

```
万维网：
万维网：
万维网：
万维网：
万维网：
万维网：
万维网：

```

# javascript - 在 Django 中为评分实现 Jquery

> ID：13106439
> 
> 赞同：0
> 
> 时间：2012-10-28T04:48:30.603
> 
> 标签：javascript, jquery, django

我正在尝试使用 jQuery Star Rating 插件（http://www.fyneworks.com/jquery/star-rating/#tab-Overview）在我的网站上实现 5 星评级系统。我以前从未使用过 jQuery 或 Javascript，但我看到我可以使用以下代码`<input name="star1" type="radio" class="star"/>`来获取星号按钮。但相反，我只看到一个常规单选按钮，这让我觉得我没有正确安装插件。

为了让这个插件正常工作，我需要做些什么特别的事情（例如：指向我放置代码的路径？）对不起，对于这个菜鸟问题......

顺便说一句，后端工作得很好......这只是我完全困惑的 jquery 东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T07:40:36.263

如果收音机看起来不像星星，那么您可能错过了 CSS。

`class="star"`除非样式表为`.star`. 确保 css 在您的页面上，如下所示：

```
<link rel="stylesheet" type="text/css" href="/path/to/jQuery.Rating.css" /> 
```

# javascript - SoundManager、Scrub bar 无法正常工作

> ID：13106441
> 
> 赞同：0
> 
> 时间：2012-10-28T04:48:56.490
> 
> 标签：javascript, soundmanager2

首先，我在我的网站上使用 SoundManager，

但是我在添加到我的网站时遇到了问题，所以为了更好地理解问题，请先查看网站：http: [//tinyurl.com/8bugpc7](http://tinyurl.com/8bugpc7)

我试图通过网站阻止声音管理器。该网站有点像垂直滑块。所以有一个菜单，但所有项目都链接到页面的特定类。音乐链接是第三个选项（第 3 页）。但是当我添加 360 音乐播放器时，滑动条无法正常工作，这意味着无论我在何处单击该条，它都只会转到特定位置。实际上它不会在我点击的地方播放。

但是当我将播放器移动到第一类（第一页）时，擦洗栏正常工作。所以我猜那些以前的类（页面）有问题。

我花了几个小时但真的无法理解问题，谁能帮我检查一下并告诉我出了什么问题？

如果你需要下载文件，这里是链接： [http ://tinyurl.com/8q83gzu](http://tinyurl.com/8q83gzu)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:46:16.820

在 360player.js 中调用了一个函数：我的第 701 行。寻找：

```
this.mmh = function(e) { 
```

这里 deltaX 变量的计算不正确，很可能是由于轮播创建的偏移量。我通过从 deltaX 变量中减去相同的偏移量来解决我页面上的问题。这是带有伪代码的新函数来修改它：

```
this.mmh = function(e) {
  /**
   * Here you need to find the offset from the left of the page
   * and assign it to a variable. In your case, it is simply the window's
   * width multiplied by 2.
  */
  offSet = 2 * $(window).width();
  if (typeof e === 'undefined') {
    e = window.event;
  }
  var oSound = self.lastTouchedSound,
      coords = self.getMouseXY(e),
      x = coords[0],
      y = coords[1],
      /* here you subtract your offset and scrubbing should work again */
      deltaX = x-(oSound._360data.canvasMidXY[0]-offSet),
      deltaY = y-oSound._360data.canvasMidXY[1],
      angle = Math.floor(fullCircle-(self.rad2deg(Math.atan2(deltaX,deltaY))+180));
  oSound.setPosition(oSound.durationEstimate*(angle/fullCircle));
  self.stopEvent(e);
  return false;
}; 
```

# ember.js - 在 Ember.js 中处理事件的最佳方式是什么？

> ID：13106442
> 
> 赞同：11
> 
> 时间：2012-10-28T04:49:38.290
> 
> 标签：ember.js

我开始学习 Ember，目前还不清楚处理事件的最佳、最可接受甚至预期的方法是什么。检查点击函数事件参数中的目标是否可以接受，我应该为每个需要 {{action}} 以外的事件的项目创建一个新视图，还是完全不同的东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-28T09:26:42.780

IMO，您应该尽可能使用[`{{action}}`](http://emberjs.com/api/classes/Ember.Handlebars.helpers.html#method_action)帮助程序。如果要在模板中的标签上附加事件，请使用`{{action}}`; 无需创建新视图：

```
<a {{action showPosts href=true}}>All Posts</a>

<form {{action validate target="controller"}}>
  // ...
</form> 
```

上述情况的一个例外是当您想要处理特定元素上的多个事件时：

```
// Template
<ul>
  {{#each post in controller}}
    {{#view App.PostView}}
      {{title}}
      {{#if view.showDetails}}
        <span>{{summary}}</span>
      {{/if}}
    {{/view}}
  {{/each}}
</ul>

// View
App.PostView = Ember.View.extend({
   tagName: li,
   classNames: ['post-item'],
   mouseEnter: function(event) {
     this.set('showDetails', true);
   },

   mouseLeave: function(event) {
     this.set('showDetails', false);
   }
}); 
```

由于我们需要同时捕获`mouseEnter`和`mouseLeave`（分别显示和隐藏帖子的详细信息），因此最好在视图中进行，避免模板中的逻辑过多。上面的替代方法是使用与我们想要处理的事件数量一样多的嵌套标签（在我们的例子中，2）：

```
// Template
<ul>
  {{#each post in controller}}
    <li class="post-item" {{action showTheDetails post on="mouseEnter" target="controller"}}>
    <span class="dummy" {{action hideTheDetails post on="mouseLeave" target="controller"}}
      {{title}}
      {{#if post.showDetails}}
        <span>{{summary}}</span>
      {{/if}}
    </span<
    </li>
  {{/each}}
</ul> 
```

然后在控制器中：

```
// Controller
App.PostsController = Ember.ArrayController.extend({
   showTheDetails: function(event) {
     var post = event.context;
     post.set('showDetails', true);
   },

   hideTheDetails: function(event) {
     var post = event.context;
     post.set('showDetails', false);
   }
}); 
```

但我想你会同意这更丑陋。见[这里](https://github.com/emberjs/ember.js/issues/569)。

* * *

如果您想使用 Ember 控件视图（[Ember.TextField](http://emberjs.com/api/classes/Ember.TextField.html)、[Ember.TextArea](http://emberjs.com/api/classes/Ember.TextArea.html)等），您别无选择，只能在视图中捕获事件。所以你扩展控制视图并在视图中定义事件处理程序：

```
// Template
<legend>Add a comment</legend>
{{view App.CommentInputField valueBinding="comment"}}

// View
App.CommentInputField = Ember.TextField.extend({ 
  focusOut: function(event) {
    this.get('controller').validateComment();
  },

  keyDown: function(event) {
    if (event.keyCode === 13) { // Enter key
      this.get('controller').createComment();
      return false;
    }
  }
}); 
```

# c++ - 英尺到米的单位换算

> ID：13106443
> 
> 赞同：0
> 
> 时间：2012-10-28T04:49:53.913
> 
> 标签：c++

我必须编写一个程序，读取以英尺和英寸为单位的长度并输出以米和厘米为单位的等效长度。我必须创建三个函数：一个用于输入，一个或多个用于计算，一个用于输出；并包含一个循环，让用户对新的输入值重复此计算，直到用户说他或她想要结束程序。我似乎无法从一个函数中获取要在转换函数中使用的输入，然后由下一个函数输出。我怎么做？谢谢你。

```
#include <iostream>
#include <conio.h>

using namespace std;

double leng;

void  length(double leng);
double  conv(double leng);
void  output(double leng);

int main()
{
    length(leng);
    conv(leng);
    output(leng);

    _getche();
    return 0;
}

void length(double leng)
{
    cout<<"Enter a length in feet, then enter a length in inches if needed: ";
    cin>>leng;
    return;
}

double conv(double leng)
{
    return leng = leng * .3048;
}

void output(double leng)
{
    cout<<"Your input is converted to "<<leng;
    return;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T04:55:08.677

您有一个全局变量`double leng`并且您的函数采用相同名称的参数这一事实意味着您甚至不必将参数传递给任何这些函数。

```
void  length();
double  conv();
void  output(); 
```

但正如克里斯所提到的，我认为你试图做的是通过引用传递。请注意如何命名函数参数和变量，它们的名称相同会​​令人困惑。尝试`g`在全局变量之前添加 a 来表示这一点。`gLeng`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T08:52:21.657

你错过了重点。一英寸不是十分之一英尺。这是一个 1/12。

12英寸等于一英尺。因此，使用使用撇号的表达式（即我的身高是 6'1）。

一英寸 = 2.54 厘米 一英尺是 12 英寸。

因此，将英制高度存储在合适的数据结构中。

然后转换如下

```
metric = (length.feet * 12 + length.inches) * 2.54) 
```

这将以厘米为单位给出您的测量值。

# asp.net-mvc-3 - Orchard 中新闻提要垂直列菜单的最佳/最简单推荐方法

> ID：13106444
> 
> 赞同：0
> 
> 时间：2012-10-28T04:49:56.077
> 
> 标签：asp.net-mvc-3, orchardcms

我是果园的新手，但对它印象深刻。我一直在尝试找到一种在 Orchard 中创建基于垂直列的菜单的简单方法。因为有很多功能和选项，我不愿意采取错误的方法。我想通过询问专家来朝着正确的方向前进

我只想要一个图像（左侧）和右侧的短段落。就像许多流行的报纸网站一样向下重复

与页面右侧的[http://www.dailymail.co.uk/home/index.html](http://www.dailymail.co.uk/home/index.html)完全一样...

非常感谢您的建议，亲切的问候，J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:48:31.923

我倾向于通过将这些字段添加到博客文章来解决这个问题：

*   媒体选择器字段（我倾向于将此字段称为“预告图片”）用于选择将在新闻提要中显示的图片
*   具有 Html 风格的文本字段（我倾向于将此字段称为“前导”），用于添加将在提要中显示的短文本段落或前导

之后，您可以

*   将最近的博客文章小部件添加到您希望显示新闻提要的区域或
*   创建一个查询，该查询将返回您希望在提要中显示的帖子，然后将投影小部件添加到您要显示提要的区域

您可以看到我为[克罗地亚 NATO 门户网站](http://www.nato.hr)创建的类似设计，其中包含一些额外的字段。它使用克罗地亚语，但它的目的是展示您可以使用 Orchard 为您的新闻门户网站风格做些什么。

# emacs - 如何在 org 模式下组织信息，以便将表格作为输出？

> ID：13106447
> 
> 赞同：5
> 
> 时间：2012-10-28T04:51:09.270
> 
> 标签：emacs, org-mode

我以这种方式在 org-mode 中捕获我的项目的结果。

```
* Dataset

** Algorithm1
*** Metric1=value
*** Metric2=value

** Algorithm2
*** Metric1=value
..... 
```

我想以表格的形式获得这些数据，其中第一行对应于指标，第一列对应于算法和其他具有指标值的单元格。这可以在 emacs/org-mode 中完成吗？如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T07:56:12.800

我不确定这是否正是您想要的，但您可以使用[properties 和 columns](http://orgmode.org/manual/Properties-and-Columns.html#Properties-and-Columns)。

如果您像这样格式化数据，

```
#+COLUMNS: %25ITEM %7Metric1 %7Metric2

* Dataset

** Algorithm 1
   :PROPERTIES:
   :Metric1:  value 1
   :Metric2:  value 2
   :END:

** Algorithm 2
   :PROPERTIES:
   :Metric1:  value 1
   :Metric2:  value 2
   :END: 
```

您可以按`C-c``C-c`第一行刷新列设置，然后`C-c``C-x``C-c`在列视图中显示您的数据（用于`e`编辑字段并`q`退出并返回标准视图）：

```
ITEM           | Metric1 | Metric2 |
#+COLUMNS: %25ITEM %7Metric1 %7Metric2

* Dataset      |         |         | ...
** Algorithm 1 | value 1 | value 2 | ...
** Algorithm 2 | value 1 | value 2 | ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:18:42.990

我亲自调查了这个，发现这个......

> 由于列视图只是缓冲区的覆盖，因此不能直接导出或打印。如果要捕获列视图，请使用列视图动态块（请参阅动态块）。[http://orgmode.org/manual/Capturing-column-view.html](http://orgmode.org/manual/Capturing-column-view.html)

# c# - 与 RDLC 报告中的动态分组相关的问题

> ID：13106449
> 
> 赞同：3
> 
> 时间：2012-10-28T04:51:22.123
> 
> 标签：c#, asp.net, reporting, rdlc

我有 ASP.Net 应用程序有几个`RDLC Reports`，我已经使用参数表单生成了带有动态列的报告。现在我想生成`RDLC Report`使用动态组的报告。意味着参数表单将在`Dropdown`框中列出一些列，并且当用户选择任何列时.. RDLC 报告将根据下拉框中所选列的分组生成。

我怎么能用代码做到这一点？请给我一些基本的想法或 C# 语法

谢谢..

# css - Wordpress 侧边栏不在 Opera 中浮动

> ID：13106450
> 
> 赞同：0
> 
> 时间：2012-10-28T04:51:52.060
> 
> 标签：css, wordpress, opera

[此站点](http://brinkley.doig.com.au/)在 Chrome、Firefox 和 IE8 中显示正常，但**在 Opera 中，侧边栏被推到内容下方**，并且不适合。

你能明白为什么 Opera 的行为与其他人不同吗？

该站点使用 TwentyTwelve 的子主题，侧边栏 div 的 id 为“secondary”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T08:56:29.917

您的 CSS`em`在[http://brinkley.doig.com.au/wp-content/themes/brinkley/style.css?ver=3.4.2](http://brinkley.doig.com.au/wp-content/themes/brinkley/style.css?ver=3.4.2)第 1342 行（在媒体查询内）设置宽度：

```
.site {
 max-width: 68.571428571rem;;
} 
```

...只需将 em 更改为像素：`max-width: 960px;`因为 Opera 将其计算为 959 像素。内容响应不够灵敏，宽度更小还有其他问题。

# macos - 在 OSX 上使用 OpenGL 渲染到 3D 纹理（多层帧缓冲附件）

> ID：13106453
> 
> 赞同：1
> 
> 时间：2012-10-28T04:52:40.070
> 
> 标签：macos, opengl, driver, geometry-shader

我在 OSX 10.7.5 上设置了 OpenGL 3.2 CORE 上下文，并尝试使用分层渲染方法渲染到 3D 纹理。*支持几何着色器*功能“gl_layer” ，但我无法将 GL_TEXTURE_3D 绑定到我的帧缓冲区附件。它返回 GL_FRAMEBUFFER_UNSUPPORTED。

这是我的 MBP 中的卡和驱动程序版本：

> AMD Radeon HD 6770M 1024 MB - OpenGL 3.2 核心 (ATI-7.32.12)

此功能与特定扩展 AFAIK 没有直接关系。有谁知道如何确定驱动程序或硬件是否不支持此功能？非常感谢。

下面要重构的代码。我使用 glfw 来设置上下文：

```
// Initialize GLFW
if (!glfwInit())
    throw "Failed to initialize GLFW";

glfwOpenWindowHint(GLFW_OPENGL_VERSION_MAJOR, 3);
glfwOpenWindowHint(GLFW_OPENGL_VERSION_MINOR, 2);
glfwOpenWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);
glfwOpenWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GL_TRUE);

// Open a window and create its OpenGL context
if (!glfwOpenWindow(720, 480, 8, 8, 8, 8, 24, 8, GLFW_WINDOW))
    throw "Failed to open GLFW window";

//
// ...
//

GLuint framebuffer, texture;
GLenum status;
glGenFramebuffers(1, &framebuffer);
// Set up the FBO with one texture attachment
glBindFramebuffer(GL_DRAW_FRAMEBUFFER, framebuffer);
glGenTextures(1, &texture);
glBindTexture(GL_TEXTURE_3D, texture);
glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexImage3D(GL_TEXTURE_3D, 0, GL_RGBA8, 256, 256, 256, 0, GL_RGBA, GL_UNSIGNED_BYTE, NULL);
glFramebufferTexture(GL_DRAW_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, texture, 0);
status = glCheckFramebufferStatus(GL_DRAW_FRAMEBUFFER);
if (status != GL_FRAMEBUFFER_COMPLETE)
    throw status;
//
// status is GL_FRAMEBUFFER_UNSUPPORTED here !!!
//

glBindFramebuffer(GL_DRAW_FRAMEBUFFER, 0);
glDeleteTextures(1, &texture);
glDeleteFramebuffers(1, &framebuffer);
exit(1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T06:05:03.067

> 有谁知道如何确定驱动程序或硬件是否不支持此功能？

它*只是告诉你*。这就是`GL_FRAMEBUFFER_UNSUPPORTED`意思：它是驱动程序对它出于任何原因不喜欢的任何帧缓冲区附件行使否决权。

发生这种情况时，您无能为力，只能尝试其他事情。也许渲染到二维数组纹理。

# java - 用于 OpenGTS 的设备通信服务器

> ID：13106456
> 
> 赞同：-1
> 
> 时间：2012-10-28T04:52:48.883
> 
> 标签：java, mysql

我想编写 2 个用于 OpenGTS（企业）的设备通信服务器。设备是 Teltonika FM4200 和 WirlessLinks Piccolo STX。你能给我一些教程或有用的东西吗？我对此还没有想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-04T00:38:16.667

除了 DCS，您可以使用已经支持 FM4200 的[Traccar](http://www.traccar.org/)服务器，第二个设备可能也已经支持，我只需要一些消息示例来验证这一点。可以在[此处](http://www.traccar.org/docs/opengts.jsp)找到集成两个系统的配置文件。

# r - R总和无限级数循环？

> ID：13106457
> 
> 赞同：0
> 
> 时间：2012-10-28T04:52:49.583
> 
> 标签：r, loops, sum

我有这个：

```
time=1:200
m=1:1000

sum[i]= sum(1/(1+2*m)^2)*exp( (-kappa*(1+2*m)^2 * pi^2 * time[i])/(z1^2)) 
```

我需要找到 m=1:1000 和 time=1:200 的上述表达式的总和

我尝试了多种循环并且无法使其粘住。我什至无法在这里表达这个......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T07:11:43.957

此命令将返回一个矩阵：

```
time <- 1:200
m <- 1:1000

sapply(time,
       function(time) sum(1/(1+2*m)^2)*exp((-kappa*(1+2*m)^2*pi^2*time)/(z1^2))) 
```

在矩阵中，您将找到所有组合的结果。行表示 的值`m`，列表示 的值`time`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T05:16:42.110

也许这会起作用：

```
sum<-0    
time<-0

for(i in 1:200){
  time<-time+1
  m<-0

  for(j in 1:1000){
    m<-m+1
    sum<-sum+(1/(1+2*m)^2)*exp((-kappa*(1+2*m)^2*pi^2*time)/(z1^2))
    }
} 
```

循环应重复方程式 200,000 次，每次`m`和的组合一次`time`。最后，`sum`应该是所有这些方程的总和。但是，我不知道是什么`kappa`，`z1`所以我的脚本可能需要一些调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T03:11:56.510

另一种方法：

```
output <- expand.grid(time = 1:200, m =1:1000)
output[,"sum"] <- with(output, sum(1/(1+2*m)^2)*exp( (-kappa*(1+2*m)^2 * pi^2 * time)/(z1^2))) 
```

# iphone - 如何从另一个应用程序在我的 ios 应用程序中打开图像？

> ID：13106461
> 
> 赞同：7
> 
> 时间：2012-10-28T04:53:41.503
> 
> 标签：iphone, image, ipad, instagram

由于 Instagram 和其他一些应用程序可以选择从任何其他应用程序在该应用程序中打开图像。我也想为我的 iOS 图像处理应用程序做类似的事情。所以用户可以从我的 iPhone/iPad 应用程序中的任何应用程序中打开图像。但我不知道这怎么可能。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-07-17T08:57:13.303

导航到您的项目。

选择您的应用目标并打开“信息”选项卡。

现在在“文档类型”中添加具有以下设置的文档类型：

```
Name: "whatever" or "image"

Types: public.image 
```

保存并编译应用程序。现在您的应用程序应该显示在其他应用程序的打开方式...列表中。

现在关注苹果[打开支持的文件类型](https://developer.apple.com/library/ios/documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/OpeningSupportedFileTypes.html)并继续您的开发

有关类型的完整列表，请遵循以下内容：[统一类型标识符参考](https://developer.apple.com/library/ios/documentation/Miscellaneous/Reference/UTIRef/Articles/System-DeclaredUniformTypeIdentifiers.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-28T06:00:32.133

是的，您可以使用“打开方式”选项在 iOS 设备中其他支持的应用程序中打开任何文件类型。

请按照这个苹果文档了解**[iOS 文档交互编程主题](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010409-SW1)**将对您有所帮助。

1) 您也可以参考本**[教程](http://mobiforge.com/developing/story/importing-exporting-documents-ios)** ，其中以 pdf 文件为例进行说明。

2) 对于自定义检查[**这个**](https://developer.apple.com/library/ios/documentation/FileManagement/Conceptual/understanding_utis/understand_utis_intro/understand_utis_intro.html#//apple_ref/doc/uid/TP40001319-CH201-SW1)和其他可能的类型在**[这里找到。](http://developer.apple.com/library/ios/#documentation/Miscellaneous/Reference/UTIRef/Articles/System-DeclaredUniformTypeIdentifiers.html#//apple_ref/doc/uid/TP40009259-SW1)** 您可以通过添加 UTI 来管理不同类型的文档。

# visual-studio-2010 - 环境变量..这是为什么？

> ID：13106462
> 
> 赞同：0
> 
> 时间：2012-10-28T04:53:54.040
> 
> 标签：visual-studio-2010, environment-variables

我正在使用 Visual Studio 2010，我想使用 DLL 文件进行编码。

我调整了系统环境路径，喜欢`C:~~`，但是执行文件找不到DLL文件。所以我将 DLL 文件移动到`c:windows\system32`. 然后我可以使用它。

为什么找不到DLL文件？我想知道计算机是如何通过系统环境路径加载DLL文件的。

我的路径设置是：

```
%OPENCV_DIR%\bin 
```

（bin文件夹中有DLL文件）

```
(OPENCV_DIR = C:\opencv\build\x86\vc10) 
```

我正在测试 Opencv

# php - AFNetworking PostPath php 参数为空

> ID：13106466
> 
> 赞同：3
> 
> 时间：2012-10-28T04:54:51.457
> 
> 标签：php, post, afnetworking

我正在尝试使用 AFNetworking 框架将用户名和密码从 iOS 应用程序发送到 php 脚本。iOS 应用程序继续收到状态代码 401，我将其定义为“参数不足”。我尝试将 php 脚本中的“用户名”返回到 iOS 应用程序并接收 .

根据我迄今为止的调查，似乎是：

1) php 脚本未正确解码 POST 参数

2) iOS 应用未正确发送 POST 参数

以下是iOS功能

```
- (IBAction)startLoginProcess:(id)sender
{

NSString *usernameField = usernameTextField.text;
NSString *passwordField = passwordTextField.text;

NSDictionary *parameters = [NSDictionary dictionaryWithObjectsAndKeys:usernameField,        @"username", passwordField, @"password", nil];

NSURL *url = [NSURL URLWithString:@"http://localhost/~alejandroe1790/edella_admin/"];

AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
[httpClient defaultValueForHeader:@"Accept"];

[httpClient setParameterEncoding:AFJSONParameterEncoding];

[httpClient postPath:@"login.php" parameters:parameters
             success:^(AFHTTPRequestOperation *operation, id response) {
                 NSLog(@"operation hasAcceptableStatusCode: %d", [operation.response statusCode]);
             }
             failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                 NSLog(@"Error with request");
                 NSLog(@"%@",[error localizedDescription]);
             }];

} 
```

以下是php脚本

```
function checkLogin()
{

    // Check for required parameters
    if (isset($_POST["username"]) && isset($_POST["password"]))
    {
        //Put parameters into local variables
        $username = $_POST["username"];
        $password = $_POST["password"];

        $stmt = $this->db->prepare("SELECT Password FROM Admin WHERE Username=?");
        $stmt->bind_param('s', $username);
        $stmt->execute();
        $stmt->bind_result($resultpassword);
        while ($stmt->fetch()) {
            break;
        }
        $stmt->close();

        // Username or password invalid
        if ($password == $resultpassword) {
            sendResponse(100, 'Login successful');
            return true;
        }
        else 
        {
            sendResponse(400, 'Invalid Username or Password');
            return false;
        }
    }
    sendResponse(401, 'Not enough parameters');
    return false;
} 
```

我觉得我可能错过了什么。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T05:41:52.963

问题是您将参数编码设置为 JSON，并且它们被`AFHTTPClient`类设置为 HTTP 正文。您可以`$_POST`通过不将编码设置为 JSON 来解决此问题并使用它。

```
- (IBAction)startLoginProcess:(id)sender
{

NSString *usernameField = usernameTextField.text;
NSString *passwordField = passwordTextField.text;

NSDictionary *parameters = [NSDictionary dictionaryWithObjectsAndKeys:usernameField,        @"username", passwordField, @"password", nil];

NSURL *url = [NSURL URLWithString:@"http://localhost/~alejandroe1790/edella_admin/"];

AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
[httpClient defaultValueForHeader:@"Accept"];

[httpClient postPath:@"login.php" parameters:parameters
             success:^(AFHTTPRequestOperation *operation, id response) {
                 NSLog(@"operation hasAcceptableStatusCode: %d", [operation.response statusCode]);
             }
             failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                 NSLog(@"Error with request");
                 NSLog(@"%@",[error localizedDescription]);
             }];

} 
```

但是，如果您愿意，您可以将参数作为 JSON 字符串发送，但您将无法使用`$_POST`并且需要`json_decode` `$HTTP_RAW_POST_DATA`

```
function checkLogin()
{
    global $HTTP_RAW_POST_DATA;
    // remove the second argument or pass false if you want to use an object
    $user_info = json_decode($HTTP_RAW_POST_DATA, true);
    // Check for required parameters
    if (isset($user_info["username"]) && isset($user_info["password"]))
    {
        //Put parameters into local variables
        $username = $user_info["username"];
        $password = $user_info["password"];

        $stmt = $this->db->prepare("SELECT Password FROM Admin WHERE Username=?");
        $stmt->bind_param('s', $username);
        $stmt->execute();
        $stmt->bind_result($resultpassword);
        while ($stmt->fetch()) {
            break;
        }
        $stmt->close();

        // Username or password invalid
        if ($password == $resultpassword) {
            sendResponse(100, 'Login successful');
            return true;
        }
        else 
        {
            sendResponse(400, 'Invalid Username or Password');
            return false;
        }
    }
    sendResponse(401, 'Not enough parameters');
    return false;
} 
```

# javascript - 使用 jquery 无限滚动来自动加载设置数量的 tumblr 页面

> ID：13106467
> 
> 赞同：5
> 
> 时间：2012-10-28T04:54:59.240
> 
> 标签：javascript, jquery, tumblr, infinite-scroll

许多 tumblr 主题都带有 jquery 无限滚动插件。但是，每页最多只能有 15 张照片，这对我来说太小了。如何修改 jquery 以一次自动加载 2 或 3 页？

网站：[http ://asnip.tumblr.com](http://asnip.tumblr.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:14:00.173

为什么不为接下来的 3 个页面执行 3 个 ajax 请求？（对不起，会发表评论，但代表不够高....）当 ajax 返回结果时，将它们附加到您的页面/列表/对象，无论您使用什么来存储结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-19T21:56:37.520

尝试在管理员中更改帖子数，据我所知，默认值为 15。 [示例](http://academyoftumblr.tumblr.com/post/5578788270/changing-number-of-posts-to-show-on-your-blog)

# linux - 如何让 Forever 每天写入不同的日志文件？

> ID：13106471
> 
> 赞同：1
> 
> 时间：2012-10-28T04:56:04.013
> 
> 标签：linux, node.js, logging, forever

我有一个通过 Forever 运行 Node.JS 应用程序的生产服务器集群。据我所知，我的日志文件选项如下：

1.  让 Forever 自己做，在这种情况下它会记录到 ~/.forever/XXXX.log
2.  为进程的整个生命周期指定一个特定的日志文件

但是，我想做的是让它每天记录到不同的文件中。例如。20121027.log、20121028.log等

这可能吗？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T05:05:15.840

您可以使用一些 linux 程序`logrotate`来帮助您进行日志轮换。

人们使用 logrotate 来旋转 apache 等的日志。

配置文件通常在 /etc/logrotate.d 下

`man logratate`可以为您提供更多信息，这里有一个很棒的教程：[http ://www.thegeekstuff.com/2010/07/logrotate-examples/](http://www.thegeekstuff.com/2010/07/logrotate-examples/)

# c++ - 使用 std::freopen 重定向标准错误 c++

> ID：13106474
> 
> 赞同：0
> 
> 时间：2012-10-28T04:56:29.433
> 
> 标签：c++, io

我想将所有内容重定向`stderr`到一个文件，该文件在应用程序（游戏）运行的整个过程中也被我的记录器使用。

以下将其从控制台重定向，但它从未出现在我的文件中，并且`fclose`在游戏循环结束后使用实际上并没有做任何事情，它通常应该这样做。

```
freopen(Logger::logFile.c_str(),"a",stderr); 
```

任何关于如何`stderr`在游戏循环中输出到文本文件的帮助都会非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-02T11:28:25.423

我们可能在这里玩未定义的行为...... ***因为你不能使用`freopen`将各种东西重定向到同一个文件。***

在下面的示例中，根据您关闭的文件，您将编写不同的内容：

```
#include <stdio.h>

int main ()
{
  freopen ("myfile.txt","w",stdout);
  printf ("                              This sentence is redirected to a file.");
//  fclose (stdout);
  freopen ("myfile.txt","w",stderr);
  fprintf (stderr, "This ERRORis redirected to a file.");
  //fclose (stderr);
  fclose (stdout);
  return 0;
} 
```

*在这里，您在句子*之前写下*错误*：

 *```
This ERRORis redirected to a file.sentence is redirected to a file. 
```

不是很好。我建议你让操作系统为你做这个*重定向到同一个文件*的工作，例如在 Unix/Linux 中：

```
./myprog.sh 2>&1 
```*

# c# - WP7 Pivot 控件如何动态加载数据透视项？

> ID：13106475
> 
> 赞同：0
> 
> 时间：2012-10-28T04:56:51.743
> 
> 标签：c#, silverlight, windows-phone-7

IIRC，Pivot 控件仅在当前显示的子项时才加载子项 PivotItem。然后我会猜测先前看到的孩子也以某种方式被卸载，大概仍存储在内存中，但从 UI 中隐藏。

我想知道的是，Pivot 控件如何动态加载/卸载子控件，并且可以在自定义 UserControl 中模仿这种行为吗？至于卸载，是像折叠前一个孩子的可见性一样简单，还是发生了一些更棘手的事情？

也就是说，假设我使用自己的 UserControl，例如：

```
 <my:CustomUserControl>
   <TextBlock x:Name="_textBlock" Text="wait for it ..." />
 </my:CustomUserControl> 
```

通常，子 TextBlock 在实例化周围的 PhoneApplicationPage 时被实例化，通过`InitializeComponent`等等。有没有办法推迟这种行为并以编程方式加载孩子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:24:05.533

实现目标的简单方法是将 ContentControl 与模板一起使用。只有在设置 Contenp 属性后才会创建所有控件。或者您可以简单地从 Panel 继承您的控件并在代码中添加子控件。

# r - geom_ribbon 中可能存在的错误

> ID：13106478
> 
> 赞同：5
> 
> 时间：2012-10-28T04:57:18.950
> 
> 标签：r, ggplot2

我希望绘制两个时间序列，并根据当时哪个序列更大来遮蔽序列之间的空间。

这是两个系列——第一个是在一个数据框中，其中有一个当时较大的系列的指标

```
d1 <- read.csv("https://dl.dropbox.com/s/0txm3f70msd3nm6/ribbon%20data.csv?dl=1") 
```

这就是融化的系列。

```
d2 <- read.csv("https://dl.dropbox.com/s/6ohwmtkhpsutpig/melted%20ribbon%20data.csv?dl=1") 
```

我绘制的...

```
ggplot() + geom_line(data = d2,
                 aes(x = time, y = value, group = variable, color = variable)) +
         geom_hline(yintercept = 0, linetype = 2) +
         geom_ribbon(data = d1[d1$big == "B",],
                     aes(x = time, ymin = csa, 
                         ymax =  csb),
                         alpha  = .25,
                         fill = "#9999CC") +
         geom_ribbon(data = d1[d1$big == "A",],
                     aes(x = time, ymin = csb, 
                         ymax =  csa),
                     alpha  = .25,
                     fill = "#CC6666") +
         scale_color_manual(values = c("#CC6666" , "#9999CC")) 
```

这导致...

![结果图](../Images/310bc24b1dc7c81397275fcdd63b8786.png)

为什么情节中间有一条多余的蓝带？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-28T11:41:21.143

这是一个解决方案。我`data = d1[d1$big == "B",]`在第一个`geom_ribbon`函数中替换为：

```
data = rbind(d1[d1$big == "B",],
             d1[c((which(diff(as.numeric(d1$big)) == -1) + 1),
                  (which(diff(as.numeric(d1$big)) == 1))), ]) 
```

这是必要的，因为`d1$big == "B"`序列的第一行和最后一行通常包含不同的`csa`和`csb`值。结果，有一个可见的功能区连接数据。上述命令使用这些序列之前的最后一行和之后的第一行以及第一个功能区的数据。`d1$big == "A"`（第二个色带的底座）不存在此问题。

完整代码：

```
ggplot() +
 geom_line(data = d2,
           aes(x = time, y = value, group = variable, color = variable)) +
 geom_hline(yintercept = 0, linetype = 2) +
 geom_ribbon(data = rbind(d1[d1$big == "B",],
                          d1[c((which(diff(as.numeric(d1$big)) == -1) + 1),
                               (which(diff(as.numeric(d1$big)) == 1))), ]),
             aes(x = time, ymin = csa, ymax =  csb),
             alpha  = .25, fill = "#9999CC") +
 geom_ribbon(data = d1[d1$big == "A",],
             aes(x = time, ymin = csb, ymax =  csa),
             alpha  = .25, fill = "#CC6666") +
 scale_color_manual(values = c("#CC6666" , "#9999CC")) 
```

![在此处输入图像描述](../Images/15e48808380011fbd4f18af20e47dd7f.png)

# java - 如何将 .odt 文件的内容解析为 Java 中的字符串？

> ID：13106480
> 
> 赞同：1
> 
> 时间：2012-10-28T04:57:41.570
> 
> 标签：java, string, parsing, odf, odt

最好使用 ODFDOM API。如果可能的话，我想将整个文件的内容放在一个字符串中。如果不是，您将如何在文件中搜索特定的子字符串？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T07:21:42.873

您将需要加载 odt 文档，然后获取内容根目录。从那里，获取将返回一个字符串的文本内容。那么这应该让您了解如何使用字符串进行搜索？例如：

```
TextDocument document = TextDocument.loadDocument("test.odt");
String texts = document.getContentRoot().getTextContent()); 
```

# ruby-on-rails - 扩展 Backbone 以支持 Rails 样式错误

> ID：13106484
> 
> 赞同：3
> 
> 时间：2012-10-28T04:59:06.827
> 
> 标签：ruby-on-rails, backbone.js

我正在寻找一种减少代码重复的方法。目前，每当我保存 Backbone 模型时，我总是提供以下代码来将 Rails 库存`422`响应反序列化为错误属性：

```
model.save({ name: "..." }, error: function(model, response) {
  result = $.parseJSON(response.responseText)
  model.errors = result.errors
  ...
}); 
```

是否可以配置 Backbone，以便在调用我的回调之前反序列化错误？我尝试覆盖该`sync`方法，但此时回调被包装在一个匿名函数中（并且不再可访问）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T09:06:57.457

您可以使用`ErrorHandler`由其他需要错误解析的模型扩展的模型。模型应该监听“`ErrorHandler`错误”事件（在请求后发生错误时由同步函数触发）。

```
var ErrorHandler = Backbone.Model.extend({

    initialize: function() {
        this.on("error", this.defaultErrorHandler, this);
    },

    defaultErrorHandler: function(model, error) {
        result = $.parseJSON(response.responseText)
        model.errors = result.errors
        ...
    }

});

var OtherModel = ErrorHandler.extend({
    ...
});

var model = new OtherModel();

model.save({ name: "..." }); 
```

# iphone - 如何将使用 AVFoundation 拍摄的照片保存到相册？

> ID：13106486
> 
> 赞同：12
> 
> 时间：2012-10-28T04:59:41.633
> 
> 标签：iphone, objective-c, ios, cocoa, avfoundation

AVFoundation 非常适合那些想弄脏手的人，但是还有很多基本的东西不容易弄清楚，比如如何将设备拍摄的照片保存到相册

有任何想法吗？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-11-03T06:43:33.820

Here is a step by step tutorial on how to capture an image using `AVFoundation` and save it to photo album.

Add a `UIView` object to the NIB (or as a subview), and create a `@property` in your controller:

```
@property(nonatomic, retain) IBOutlet UIView *vImagePreview; 
```

Connect the `UIView` to the outlet above in IB, or assign it directly if you’re using code instead of a NIB.

Then edit your `UIViewController`, and give it the following `viewDidAppear` method:

```
-(void)viewDidAppear:(BOOL)animated
{
    AVCaptureSession *session = [[AVCaptureSession alloc] init];
    session.sessionPreset = AVCaptureSessionPresetMedium;

    CALayer *viewLayer = self.vImagePreview.layer;
    NSLog(@"viewLayer = %@", viewLayer);

    AVCaptureVideoPreviewLayer *captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];

    captureVideoPreviewLayer.frame = self.vImagePreview.bounds;
    [self.vImagePreview.layer addSublayer:captureVideoPreviewLayer];

    AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];

    NSError *error = nil;
    AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];
    if (!input) {
        // Handle the error appropriately.
        NSLog(@"ERROR: trying to open camera: %@", error);
    }
    [session addInput:input];

    stillImageOutput = [[AVCaptureStillImageOutput alloc] init];
    NSDictionary *outputSettings = [[NSDictionary alloc] initWithObjectsAndKeys: AVVideoCodecJPEG, AVVideoCodecKey, nil];
    [stillImageOutput setOutputSettings:outputSettings];
    [session addOutput:stillImageOutput];

    [session startRunning];
} 
```

Create a new `@property` to hold a reference to output object:

```
@property(nonatomic, retain) AVCaptureStillImageOutput *stillImageOutput; 
```

Then make a `UIImageView` where we’ll display the captured photo. Add this to your NIB, or programmatically.

Hook it up to another `@property`, or assign it manually, e.g.;

```
@property(nonatomic, retain) IBOutlet UIImageView *vImage; 
```

Finally, create a `UIButton`, so that you can take the photo.

Again, add it to your NIB (or programmatically to your screen), and hook it up to the following method:

```
-(IBAction)captureNow {
    AVCaptureConnection *videoConnection = nil;
    for (AVCaptureConnection *connection in stillImageOutput.connections)
    {
        for (AVCaptureInputPort *port in [connection inputPorts])
        {
            if ([[port mediaType] isEqual:AVMediaTypeVideo] )
            {
                videoConnection = connection;
                break;
            }
        }
        if (videoConnection) 
            { 
                break; 
            }
    }

    NSLog(@"about to request a capture from: %@", stillImageOutput);
    [stillImageOutput captureStillImageAsynchronouslyFromConnection:videoConnection completionHandler: ^(CMSampleBufferRef imageSampleBuffer, NSError *error)
    {
         CFDictionaryRef exifAttachments = CMGetAttachment( imageSampleBuffer, kCGImagePropertyExifDictionary, NULL);
         if (exifAttachments)
         {
            // Do something with the attachments.
            NSLog(@"attachements: %@", exifAttachments);
         } else {
            NSLog(@"no attachments");
             }

        NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];
        UIImage *image = [[UIImage alloc] initWithData:imageData];

        self.vImage.image = image;

        UIImageWriteToSavedPhotosAlbum(image, nil, nil, nil);
     }];
} 
```

You might have to import `#import <ImageIO/CGImageProperties.h>` also.

[Source](http://red-glasses.com/index.php/tutorials/ios4-take-photos-with-live-video-preview-using-avfoundation/). Also check [this](http://www.musicalgeometry.com/?p=1297).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T14:40:18.997

根据您的问题，看起来您已经将相机中的图片转换为 NSData 或 UIImage。如果是这样，您可以通过不同的方式将此图片添加到相册中。AVFoundation 本身没有承载图像的类。因此，例如，您可以使用[ALAssetsLibrary](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html)框架将图像保存到相册。或者你可以只使用 UIKit 框架和它的[UIImageWriteToSavedPhotosAlbum](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html)方法。两者都很好用。

如果您还没有捕获静止图像，您可以查看 AVFoundation 框架的[captureStillImageAsynchronouslyFromConnection](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVCaptureStillImageOutput_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009552)方法。无论如何，这里有一些想法。您可以在 Internet 上轻松找到示例。祝你好运 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T05:24:26.200

以这种方式设置相机有很多你没有做或没有展示的地方。

最好看的地方是：[`AVCamCaptureManager.m`](http://developer.apple.com/library/ios/#samplecode/AVCam/Listings/Classes_AVCamCaptureManager_m.html#//apple_ref/doc/uid/DTS40010112-Classes_AVCamCaptureManager_m-DontLinkElementID_4)在 AVCam 示例项目中；特别是`setupSession`和`captureStillImage`（将照片写入图书馆）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T14:55:01.673

这个方法对我有用

```
-(void) saveImageDataToLibrary:(UIImage *) image
{
NSData *imageData = UIImageJPEGRepresentation(image, 1.0);
[appDelegate.library writeImageDataToSavedPhotosAlbum:imageData metadata:nil completionBlock:^(NSURL *assetURL, NSError *error)
{
    if (error) {
        NSLog(@"%@",error.description);
    }
    else {
        NSLog(@"Photo saved successful");
    }
}];
} 
```

其中 appDelegate.library 是`ALAssetLibrary`实例。

# asp.net-mvc - ASP.Net MVC Entity Framework 应用程序中的数据级授权过滤器

> ID：13106487
> 
> 赞同：2
> 
> 时间：2012-10-28T04:59:48.960
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4, authorize

我在我的 ASP.Net MVC 4 应用程序中寻找数据级授权过滤器。
我们正在使用实体框架进行数据访问。

应用程序需要显示所有数据，但应根据用户角色限制对表中某些字段的访问。

例如：TASK table { int Id, string TaskName, DateTime StartDate, DateTime EndDate }

整个数据将显示给所有用户，用户也可以选择编辑字段。但应限制编辑选项，如下所示
角色管理员可以编辑所有字段
角色管理员可以编辑任务名称但不能编辑开始日期和结束日期
角色用户不能编辑任何字段

所有这些编辑都将调用 TaskController 中的 Edit 操作。

如何在我的应用程序中实现该功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T01:11:09.913

你可以试试 Postsharp。PostSharp 允许您设计自定义属性以在编译时注入样板代码。应该可以将它用于您的示例等场景。我已经将它用于异常处理、日志记录、缓存和安全性。它可以应用于任何层或框架。

请参阅以下示例中的“保护字段和属性”：

[http://www.sharpcrafters.com/solutions/authorization](http://www.sharpcrafters.com/solutions/authorization)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-04T09:10:56.943

这不是 EF，另一个 ORM，但可能有助于了解它是如何完成的——完整的源代码在[这里](https://vita.codeplex.com/)。

自动化子系统在[这里](https://vita.codeplex.com/wikipage?title=guide_authorization)解释。

它可以满足您的需求 - 行级、逐列粒度、基于角色的授权。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-15T17:08:28.750

听起来您所追求的是一个真正的“业务”对象，它是智能的，并且包含属性级别的授权，而不仅仅是方法级别的授权。我建议使用 CSLA.NET 并使用智能对象创建您的业务对象模型。这为您提供了该功能以及其他一些功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-21T12:52:29.520

> 整个数据将显示给所有用户，用户也可以选择编辑字段。但应该限制编辑选项

而不是任务控制器中的单个编辑操作

1.  为每个允许编辑的唯一字段集创建特定操作

    *   `Edit(TaskName, StartDate, EndDate)`对于管理员
    *   `Edit(TaskName)`对于经理
    *   用户无`Edit`操作，因为不允许更改任何字段
2.  [每个操作](https://stackoverflow.com/q/16709853/2444725)使用授权

# python - tkinter 和 ttk python2.7

> ID：13106488
> 
> 赞同：2
> 
> 时间：2012-10-28T04:59:53.797
> 
> 标签：python, tkinter, tk, ttk

我在网上找到了这段代码，我想尝试一下，因为我试图弄清楚如何在我在消息框中输入内容时更改我的标签。我尝试了getmethod，但我一直在努力使用它。所以我找到了这段代码，当我尝试它时，我得到了 ttk 未定义但显然是的错误。

```
from Tkinter import *
from ttk import *

def calculate(*args):
    try:
        value = float(feet.get())
        meters.set((0.3048 * value * 10000.0 + 0.5)/10000.0)
    except ValueError:
        pass

root = Tk()
root.title("Feet to Meters")

mainframe = ttk.Frame(root, padding="3 3 12 12")
mainframe.grid(column=0, row=0, sticky=(N, W, E, S))
mainframe.columnconfigure(0, weight=1)
mainframe.rowconfigure(0, weight=1)

feet = StringVar()
meters = StringVar()

feet_entry = ttkEntry(mainframe, width=7, textvariable=feet)
feet_entry.grid(column=2, row=1, sticky=(W, E))

ttk.Label(mainframe, textvariable=meters).grid(column=2, row=2, sticky=(W, E))
ttk.Button(mainframe, text="Calculate", command=calculate).grid(column=3, row=3, sticky=W)

ttk.Label(mainframe, text="feet").grid(column=3, row=1, sticky=W)
ttk.Label(mainframe, text="is equivalent to").grid(column=1, row=2, sticky=E)
ttk.Label(mainframe, text="meters").grid(column=3, row=2, sticky=W)

for child in mainframe.winfo_children(): child.grid_configure(padx=5, pady=5)

feet_entry.focus()
root.bind('<Return>', calculate)

root.mainloop() 
```

回溯（最后一次调用）：文件“tk8.py”，第 15 行，在大型机 = ttk.Frame(root, padding="3 3 12 12") NameError: name 'ttk' is not defined

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T05:11:57.123

> 所以我找到了这段代码，当我尝试它时，我得到了 ttk 未定义但显然是的错误。

但是，您正在*从*模块中进行星型导入，使用`from ttk import *`，因此名称`ttk`不涉及任何内容。例如，`from math import *`会将`sin`,`cos`等全部带入您的命名空间，但名称`math`仍是未定义的。如果我将导入切换到

```
from Tkinter import *
import ttk 
```

并在此行中添加缺少`.`的内容：`ttk.Entry`

```
feet_entry = ttk.Entry(mainframe, width=7, textvariable=feet) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T21:00:09.243

您正在寻找`trace_variable`方法。这是一个固定版本：

```
from Tkinter import Tk, StringVar
import ttk

def calculate(*args):
    try:
        value = float(feet.get())
        meters.set('%g' % (0.3048 * value))
    except ValueError:
        if not feet.get():
            meters.set('')

root = Tk()
root.title("Feet to Meters")

feet = StringVar()
feet.trace_variable('w', calculate)
meters = StringVar()

main = ttk.Frame(root)
main.grid(sticky='nsew')

ttk.Label(main, text="Feet:").grid(row=0, sticky='e')
feet_entry = ttk.Entry(main, width=7, textvariable=feet)
feet_entry.grid(row=0, column=1, sticky='ew')
feet_entry.focus()

ttk.Label(main, text="Meters:").grid(row=1, sticky='e')
ttk.Label(main, textvariable=meters).grid(row=1, column=1, sticky='ew')

root.mainloop() 
```

# c# - 如何只允许在我的 C# 控制台应用程序中输入数字？

> ID：13106493
> 
> 赞同：12
> 
> 时间：2012-10-28T05:00:28.877
> 
> 标签：c#, console-application

```
Console.WriteLine("Enter the cost of the item");                           
string input = Console.ReadLine();
double price = Convert.ToDouble(input); 
```

您好，我希望禁用键盘按钮、AZ、括号、问号等。我想要它，所以如果你输入它，它不会出现在控制台中。我只希望数字 1-9 出现。这是在 C# 控制台应用程序中。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-28T05:08:28.193

试试这个代码片段

```
string _val = "";
Console.Write("Enter your value: ");
ConsoleKeyInfo key;

do
{
    key = Console.ReadKey(true);
    if (key.Key != ConsoleKey.Backspace)
    {
        double val = 0;
        bool _x = double.TryParse(key.KeyChar.ToString(), out val);
        if (_x)
        {
            _val += key.KeyChar;
            Console.Write(key.KeyChar);
        }
    }
    else
    {
        if (key.Key == ConsoleKey.Backspace && _val.Length > 0)
        {
            _val = _val.Substring(0, (_val.Length - 1));
            Console.Write("\b \b");
        }
    }
}
// Stops Receving Keys Once Enter is Pressed
while (key.Key != ConsoleKey.Enter);

Console.WriteLine();
Console.WriteLine("The Value You entered is : " + _val);
Console.ReadKey(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T05:07:11.643

[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/system.console.keyavailable.aspx)解释了如何在控制台窗口中一次读取一个字符。[使用Char.IsNumber()](http://msdn.microsoft.com/en-us/library/yk2b3t2y.aspx)方法在输入每个字符时对其进行测试，并拒绝那些未通过测试的字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T13:33:36.727

这是一种方法。如果您刚开始使用 C#，这可能有点矫枉过正，因为它使用了该语言的一些更高级的方面。无论如何，我希望你觉得这很有趣。

它有一些不错的功能：

*   该`ReadKeys`方法采用任意函数来测试到目前为止的字符串是否有效。这使得在您想要从键盘过滤输入（例如字母或数字但没有标点符号）时可以轻松地重用。

*   它应该处理你扔给它的任何可以被解释为双精度的东西，例如“-123.4E77”。

但是，与 John Woo 的答案不同，它不处理退格键。

这是代码：

```
using System;

public static class ConsoleExtensions
{
    public static void Main()
    {
        string entry = ConsoleExtensions.ReadKeys(
            s => { StringToDouble(s) /* might throw */; return true; });

        double result = StringToDouble(entry);

        Console.WriteLine();
        Console.WriteLine("Result was {0}", result);
    }

    public static double StringToDouble(string s)
    {
        try
        {
            return double.Parse(s);
        }
        catch (FormatException)
        {
            // handle trailing E and +/- signs
            return double.Parse(s + '0');
        }
        // anything else will be thrown as an exception
    }

    public static string ReadKeys(Predicate<string> check)
    {
        string valid = string.Empty;

        while (true)
        {
            ConsoleKeyInfo key = Console.ReadKey(true);
            if (key.Key == ConsoleKey.Enter)
            {
                return valid;
            }

            bool isValid = false;
            char keyChar = key.KeyChar;
            string candidate = valid + keyChar;
            try
            {
                isValid = check(candidate);
            }
            catch (Exception)
            {
                // if this raises any sort of exception then the key wasn't valid
                // one of the rare cases when catching Exception is reasonable
                // (since we really don't care what type it was)
            }

            if (isValid)
            {
                Console.Write(keyChar);
                valid = candidate;
            }        
        }    
    }
} 
```

您还可以实现一个`IsStringOrDouble`返回`false`而不是抛出异常的函数，但我将其留作练习。

可以扩展的另一种方法是`ReadKeys`使用两个`Predicate<string>`参数：一个是确定子字符串是否代表有效条目的开始，另一个是判断它是否完整。这样，我们可以允许按键做出贡献，但在`Enter`输入完成之前不允许按键。这对于您想要确保一定强度的密码输入或“是”/“否”输入等事情很有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-08T23:30:42.343

过了一会儿，我得到了一个非常简短的解决方案：

```
double number;
Console.Write("Enter the cost of the item: ");
while (!double.TryParse(Console.ReadLine(), out number))
{
   Console.Write("This is not valid input. Please enter an integer value: ");
}

Console.Write("The item cost is: {0}", number); 
```

再见！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-28T19:42:08.420

此代码将允许您：

*   只写一个点（因为数字只能有一个小数分隔符）；
*   一开始减一；
*   一开始是一个零。

这意味着你不能写出类似的东西：“00000.5”或“0000...-5”。

```
class Program
{
    static string backValue = "";
    static double value;
    static ConsoleKeyInfo inputKey;

    static void Main(string[] args)
    {
        Console.Title = "";
        Console.Write("Enter your value: ");

        do
        {
            inputKey = Console.ReadKey(true);

            if (char.IsDigit(inputKey.KeyChar))
            {
                if (inputKey.KeyChar == '0')
                {
                    if (!backValue.StartsWith("0") || backValue.Contains('.'))
                        Write();
                }

                else
                    Write();
            }

            if (inputKey.KeyChar == '-' && backValue.Length == 0 ||
                inputKey.KeyChar == '.' && !backValue.Contains(inputKey.KeyChar) &&
                backValue.Length > 0)
                Write();

            if (inputKey.Key == ConsoleKey.Backspace && backValue.Length > 0)
            {
                backValue = backValue.Substring(0, backValue.Length - 1);
                Console.Write("\b \b");
            }
        } while (inputKey.Key != ConsoleKey.Enter); //Loop until Enter key not pressed

        if (double.TryParse(backValue, out value))
            Console.Write("\n{0}^2 = {1}", value, Math.Pow(value, 2));

        Console.ReadKey();
    }

    static void Write()
    {
        backValue += inputKey.KeyChar;
        Console.Write(inputKey.KeyChar);
    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-08-11T06:42:47.930

```
 string input;
        double price;
        bool result = false;

        while ( result == false )
            {
            Console.Write ("\n Enter the cost of the item : ");
            input = Console.ReadLine ();
            result = double.TryParse (input, out price);
            if ( result == false )
                {
                Console.Write ("\n Please Enter Numbers Only.");
                }
            else
                {
                Console.Write ("\n cost of the item : {0} \n ", price);
                break;
                }
            } 
```

# php - 数据库查询返回奇怪的值以在 codeigniter 中显示

> ID：13106499
> 
> 赞同：1
> 
> 时间：2012-10-28T05:01:53.787
> 
> 标签：php, codeigniter

我在查询 codeigniter 时又遇到了困难。首先，我阅读了有关本教程的内容，以作为我当前正在做的工作的基础：http: [//ellislab.com/codeigniter/user_guide/tutorial/news_section.html](http://ellislab.com/codeigniter/user_guide/tutorial/news_section.html)

现在我为我的数据库的模型函数做的是这样的：

```
public function get_events()
    {
            $id = $this->session->userdata('id');
            $this->db->flush_cache();
            $this->db->select('event_id');
            $this->db->select('event_name');
            $this->db->select('event_date');
            $this->db->select('event_time');
            $this->db->select('event_count');
            $this->db->select('event_max');
            $this->db->select('status');
            $query = $this->db->get_where('event_details',array('bar_id' => $id));
            return $query->row_array();
    } 
```

现在要在我的控制器中传递值，我使用这行代码：

```
$data['events'] = $this->events_model->get_events(); 
```

对于我使用的视图：

```
<table class="events_list">
<?php foreach ($events as $events_info): ?>
    <tr>
        <td>
            <input type="hidden" value="<?php echo $events_info['id'] ?>">
            <?php echo $events_info['event_name'] ?>
        </td>
        <td>
            <?php echo $events_info['event_date'] ?>
        </td>
        <td>
            <?php echo $events_info['event_time'] ?>
        </td>
        <td>
            <?php echo $events_info['event_count'].'/'.$events_info['event_max'] ?>
        </td>
        <td>
            <?php echo $events_info['status'] ?>
        </td>
    </tr>
<?php endforeach ?>
</table> 
```

我应该得到以下回报：

```
(hidden)1 | Silverstein Concert | 2012-07-11 | 18:00:00 | 0/500 | 1 
```

但相反，我得到了回报

```
1 | 1 | 1 | 1/1 | 1 
```

好吧，我没有显示整个返回，但这应该有 7 行，它们都有一个奇怪的 1 个字符返回（下一行包含完整的 S）。我不知道问题出在哪里，因为当我使用

```
$data['test']=$data['events']['event_name']; 
```

在我的控制器中并在我的视图中显示事件名称，但只有第一行数据重复 7 次。好吧，我只需要解决这个问题，我就可以继续前进。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T05:58:51.040

如果您可以使用 获取事件名称`$data['events']['event_name']`，则表示`$data[events]`包含单行。从您的视图中删除`foreach`并尝试使用`$events['event_name']`等`$events['event_date']`。

[`row_array`](http://codeigniter.com/user_guide/database/results.html)从结果集中只返回一行。

# ruby-on-rails - 载波配置中的 assets_host

> ID：13106500
> 
> 赞同：1
> 
> 时间：2012-10-28T05:01:58.740
> 
> 标签：ruby-on-rails, carrierwave

由于我目前使用 nginx 仅在子域资产中提供公共/上传服务，并且我正在使用客户端模板（eco）来渲染图像（所以我不能使用 rails 提供的 image_tag 或 image_url 辅助方法），我需要设置model.image_url（由carrierwave提供）以返回具有相同域的url。

这是我尝试过的：（在 config/initializer/carrierwave.rb 中）

```
 CarrierWave.configuration do |config|
            config.assets_host = "http://assets.lvh.me:3000"
    end 
```

但是当我尝试这个设置时，rails 会弹出一条错误消息：

```
 undefined method `assets_host=' for CarrierWave::Uploader::Base:Class (NoMethodError) 
```

由于carrierwave的自述文件有这个设置描述，但只在雾部分，所以我想知道这个功能是否只在使用雾时起作用？还是我错过了什么？

感谢帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T13:38:47.827

应该使用`asset_host`（版本> 0.7.0）

请参阅 github 上的 chnage 提交
[https://github.com/jnicklas/carrierwave/commit/7046c93d6b23cffef9f171a5f7f0dd14267a7057#lib/carrierwave/uploader/configuration.rb](https://github.com/jnicklas/carrierwave/commit/7046c93d6b23cffef9f171a5f7f0dd14267a7057#lib/carrierwave/uploader/configuration.rb)

```
CarrierWave.configuration do |config|
  config.asset_host = "http://assets.lvh.me:3000"
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-29T12:49:40.840

在以后的版本中，这更改为

```
CarrierWave.configure do |config|
  ...
end 
```

# php - ZenCart 1.5 的简单快速的 ajax 结帐

> ID：13106502
> 
> 赞同：0
> 
> 时间：2012-10-28T05:02:27.420
> 
> 标签：php, ajax, checkout, zen-cart

我刚刚在 Zen Cart 上使用了 Fast and Easy Checkout `http://www.zen-cart.com/downloads.php?do=file&id=594`。它说它与 zencart 1.5 兼容，但事实并非如此。它也不是类似于 zencart 1.5 结构的结构。我通常在安装 zencart 模块时使用 Winmerge 来修改文件，但为此我无法使用它，因为完整的文件不同。

无论如何，我已经非常仔细地修改了文件，但是我现在在结帐页面中出现错误，这通常不会出现在 zencart 1.5 中。在 Zencart 1.5 中，当我点击“结帐”时，当时重定向到，`mainpage='checkout_shipping'`但现在它重定向到`main_page='checkout'`，并且它在标题后显示空白页，我在缓存文件夹中检查日志错误，它说

> “[27-Oct-2012 09:01:13] PHP 警告：require(includes/templates/template_default/templates/tpl_checkout_default.php) [function.require]：无法打开流：K:\ 中没有这样的文件或目录kishan\XAMPP-New\xampp\htdocs\test\talisman\includes\templates\jewellery\common\tpl_main_page.php 在第 87 行
> 
> [2012 年 10 月 27 日 09:01:13] PHP 致命错误：require() [function.require]：无法打开所需的 'includes/templates/template_default/templates/tpl_checkout_default.php' (include_path='.;K:\ kishan\XAMPP-New\xampp\php\PEAR') 在 K:\kishan\XAMPP-New\xampp\htdocs\test\talisman\includes\templates\jewellery\common\tpl_main_page.php 第 87 行"。

请让我知道是否有人使用过这个插件并知道如何解决这个问题，或者给我任何其他免费或高级插件来使用 AJAX 进行一页结帐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T03:08:09.180

错误消息告诉您，template_default 和您的自定义模板文件夹都不包含所需的 tpl_checkout_default.php 文件...该文件将包含在您尝试使用的插件中。

因此，解决方案的第一步是将该文件上传到您的自定义“珠宝”模板文件夹。

此外，如果您真正需要的是完全由 ajax 驱动的 FEC 版本，您需要从 Numinix 网站购买，因为他们在那里销售和支持它。

# javascript - jQuery 对话框/javascript 布尔值不起作用

> ID：13106503
> 
> 赞同：1
> 
> 时间：2012-10-28T05:02:34.607
> 
> 标签：javascript, jquery, dialog, jquery-dialog

我不知道我是否做得对，但我正在努力做到这一点，所以当单击删除按钮时，我的 jQuery UI 中的对话框出现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T08:01:04.047

尝试添加：

```
$( this ).dialog( "close" ); 
```

在关闭

# playframework - GZIP PlayFramework 2.0 中的响应正文

> ID：13106504
> 
> 赞同：5
> 
> 时间：2012-10-28T05:03:14.560
> 
> 标签：playframework, playframework-2.0, gzip

我正在开发 Playframework 2.x 应用程序。我的应用程序中的控制器将 JSON 响应返回给浏览器/端点。我想知道是否有一种简单的方法可以启用响应主体的 GZIP 压缩。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T08:50:51.057

目前在播放 2.0.4 中，非资产没有简单的方法。

对于 Java API，您可以使用：

```
public static Result actionWithGzippedJsonResult() throws IOException {
    Map<String, String> map = new HashMap<String, String>();
    map.put("hello", "world");
    final String json = Json.toJson(map).toString();
    return gzippedOk(json).as("application/json");
}

/** Creates a response with a gzipped string. Does NOT change the content-type. */
public static Results.Status gzippedOk(final String body) throws IOException {
    final ByteArrayOutputStream gzip = gzip(body);
    response().setHeader("Content-Encoding", "gzip");
    response().setHeader("Content-Length", gzip.size() + "");
    return ok(gzip.toByteArray());
}

//solution from James Ward for Play 1 and every request: https://gist.github.com/1317626
public static ByteArrayOutputStream gzip(final String input)
        throws IOException {
    final InputStream inputStream = new ByteArrayInputStream(input.getBytes());
    final ByteArrayOutputStream stringOutputStream = new ByteArrayOutputStream((int) (input.length() * 0.75));
    final OutputStream gzipOutputStream = new GZIPOutputStream(stringOutputStream);

    final byte[] buf = new byte[5000];
    int len;
    while ((len = inputStream.read(buf)) > 0) {
        gzipOutputStream.write(buf, 0, len);
    }

    inputStream.close();
    gzipOutputStream.close();

    return stringOutputStream;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T18:43:18.487

gzip'ing 是一个非常完整的带有 Apache 前端的蛋糕。

在 Apache 2.4 上，`Location`使用一组基本内容类型通过块处理 gzip 可能如下所示：

```
<Location />
  ...
  AddOutputFilterByType DEFLATE text/css application/x-javascript text/x-component text/html text/richtext image/svg+xml text/plain text/xsd text/xsl text/xml image/x-icon
  SetOutputFilter DEFLATE
</Location> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-23T09:48:48.107

`Play framework 2.2+`可以[使用](https://www.playframework.com/documentation/2.3.0/GzipEncoding)GzipFilter 。可通过 sbt 获得：

```
libraryDependencies ++= filters 
```

如果您是 scala 人，那么值得一看[Gzip 类](https://www.playframework.com/documentation/2.3.x/api/scala/index.html#play.filters.gzip.Gzip$)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-22T23:56:19.780

使用 Play 2.5，如此[处](https://www.playframework.com/documentation/2.5.x/GzipEncoding)所述：

这是包含 gZip 过滤器的示例代码（以及示例 CORS 过滤器以展示添加多个过滤器）：

```
import javax.inject.Inject;

import play.api.mvc.EssentialFilter;
import play.filters.cors.CORSFilter;
import play.filters.gzip.GzipFilter;
import play.http.HttpFilters;

public class Filters implements HttpFilters {

    @Inject
    CORSFilter corsFilter;

    @Inject
    GzipFilter gzipFilter;

    @Override
    public EssentialFilter[] filters() {
        return new EssentialFilter[] { corsFilter, gzipFilter };
    }

} 
```

# java - 在java中绘制三角形

> ID：13106505
> 
> 赞同：1
> 
> 时间：2012-10-28T05:03:33.980
> 
> 标签：java, geometry, awt, java-2d

所以我的一部分任务是制作一个三角形类以链接到各种按钮......但我不确定如何在 Eclipse 中制作一个。具体说明是这样说的：

> 创建一个三角形类
> 
> 1.  数据字段：Point[] 坐标；
> 2.  构造函数
> 3.  实现超类中定义的所有抽象方法
> 4.  每个数据字段的 getter 和 setter
> 5.  覆盖 public void paint(Graphics arg0) 方法

我已经在其他类中设置了所有内容……除了三角形类。我对如何使用点数组创建三角形感到困惑......我是否需要使用点 x，y 或以某种方式在该数组变量坐标中存储 3 个（x，y）坐标对？我想创建它你会使用 drawPolygon ......但我不确定。有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T05:20:41.967

这是三角形的示例类

```
public class Triangle {

  private Point[] coords;

  // Null object constructor
  public Triangle() {
    this.coords = null;
  }

  // Constructor with point array
  public Triangle(Point[] coords) {
    this.coords = coords;
  }

  // Constructor with multiple points
  public Triangle(Point a, Point b, Point c) {
    this.coords = new Point[3];
    coords[0] = a;
    coords[1] = b;
    coords[2] = c;
  }

  // The actual paint method
  public void paint(Graphics arg0) {
    // Setup local variables to hold the coordinates
    int[] x = new int[3];
    int[] y = new int[3];
    // Loop through our points
    for (int i = 0; i < coords.length; i++) {
        Point point = coords[i];
        // Parse out the coordinates as integers and store to our local variables
        x[i] = Double.valueOf(point.getX()).intValue();
        y[i] = Double.valueOf(point.getY()).intValue();
    }
    // Actually commit to our polygon
    arg0.drawPolygon(x, y, 3);
  }
} 
```

不确定这个类到底应该扩展什么，所以没有任何东西被标记为覆盖或任何东西，并且它缺少设置器和访问器，但你应该能够使它工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T05:20:46.303

做了类似的事情，我画了一个三边形的多边形。可能有帮助..

```
for (int i = 0; i < 3; i++){
  polygon1.addPoint(
    (int) (40 + 50 * Math.cos(i * 2 * Math.PI / 3)),
    (int) (150 + 50 * Math.sin(i * 2 * Math.PI / 3))
  );
}
g.drawPolygon(polygon1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T05:05:58.787

使用将s`g.drawPolygon`数组`Point`作为参数的 。

# php - PHP 测试空和/或 null 和/或未设置的数组

> ID：13106508
> 
> 赞同：0
> 
> 时间：2012-10-28T05:03:44.733
> 
> 标签：php, codeigniter, logic

我想保持简短。我不知道我的术语是否正确，但我从*Codeigniter 手册 Vol.1*中得到了这个例子。

```
if (count($args) > 1 || is_array($args[0])) 
```

我已经多次遇到这个问题。根据数据类型，不同的测试更合适。有些测试会以意想不到的方式失败。

如何确定最合适，也可能是最简洁的测试？

为了清楚起见，我正在寻找最有效的方法来测试对象/变量是否可以使用，无论数据类型如何，如果可能的话。

此外，我不希望该解决方案仅适用于示例中的列表。它应该是广泛适用的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T05:09:53.747

只用[空](http://php.net/manual/en/function.empty.php)

```
if(!empty($args)){
  echo 'Array is set, not empty and not null';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T05:08:29.300

使用空（）`bool empty ( mixed $var )`

[http://www.php.net/manual/en/function.empty.php](http://www.php.net/manual/en/function.empty.php)

确定一个变量是否被认为是空的。如果变量不存在或其值等于 FALSE，则认为该变量为空。如果变量不存在，empty() 不会生成警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T05:30:20.257

我一直在使用以下功能。

您可以为所有可能的变量类型添加自己的测试。

```
function is_valid_var($var)
{
  if ( isset( $var ) ) {

    // string
    if ( is_string( $var ) && strlen( $var ) == 0 ) return false;

    // array
    elseif ( is_array( $var ) && count( $var ) == 0 ) return false;

    // unknown
    else return true;
  }

  return false;
} 
```

# regex - **手工简化正则表达式的技术**

> ID：13106510
> 
> 赞同：1
> 
> 时间：2012-10-28T05:04:34.983
> 
> 标签：regex, regular-language

我试图证明 RE

`s(bs)*[(abb*a*)*ab]*aa(a∪b)`在哪里`s=b*a*ab`

可以简化为

`(a∪b)*abaa(a∪b)`,

但是我知道的所有一般转换，例如`(ab)*a=a(ba)*`或`(a*b)*a*=(a∪b)*`似乎没有效果。

所以问题是：

1.  一步一步的转变过程在这里可行吗？如果是这样，你能告诉我它是如何完成的吗？
2.  如果证明需要其他类型的技术，它们是什么？
3.  是否有一个清晰而全面的参考解释用于简化正式 RE 的技术？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T05:20:04.360

有很多方法可以做到这一点。

一种简单的方法是将正则表达式转换为 NFA。查看两个 NFA 是否识别相同的语言：

1.  考虑两个 NFA 的起始状态。

2.  对每个 NFA 考虑的状态进行 epsilon 闭包。

3.  如果一个 NFA 的状态集至少包含一个接受状态，但另一个 NFA 的状态集不包含接受状态，则 NFA 不相等，您就完成了。

4.  否则，对于每个符号，按照该符号为每个 NFA 获取一组新状态，然后返回步骤 1。

这将采取有限数量的步骤，因为要考虑的状态集数量有限。

您还可以将两个正则表达式都转换为最小 DFA 并显示它们是同构的，但这种技术实际上与上述技术完全相同，只是步骤的顺序不同。

## 插图

考虑 RE`aa*`和`a*a`。很*明显*，它们识别相同的语言，但我们将使用它们来说明算法。

![NFA](../Images/e5efb450b3e28e9ad1f813993eed1b77.png)

1.  首先，我们考虑每个 NFA 的起始状态。这些`{1}`用于左 RE 和`{1}`右 RE，我们将其写为`{1},{1}`.

2.  然后我们采用 epsilon 闭包，即`{1},{1,2}`.

3.  这两个集合都不包含结束状态，所以我们继续。

4.  传出的符号是 only `a`，所以我们采取所有`a`的转换来获得`{2},{1,3}`。

5.  epsilon 闭包是`{2,3},{1,2,3}`.

6.  两者都包含结束状态，所以我们继续。

7.  同样，传出符号是`a`，因此我们采用所有`a`转换来获得`{2},{1,3}`。

8.  epsilon 闭包是`{2,3},{1,2,3}`. 这与第 5 步相同，因此我们不再重复。

由于没有其他要检查的内容，我们就完成了，并且两者已被证明是相同的。

# css - 下拉选择大纲 - 无法删除:(

> ID：13106512
> 
> 赞同：2
> 
> 时间：2012-10-28T05:04:52.623
> 
> 标签：css

我正在使用 Firefox，似乎无法摆脱选定选项周围的轮廓。

**我的代码**

*HTML*

```
 <div class="drop-select">
             <select name="date" id="date">
               <option value="01">01</option>
               <option value="02">02</option>
            </select>
        </div> 
```

很简单。

*CSS*

```
.drop-select {
    display: block;
    border: 1px solid #000;
    -webkit-border-radius: 2px;
    -moz-border-radius: 2px;
    border-radius: 2px;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    font: 12px/14px arial, helvetica, verdana, sans-serif;
    width: 80px;
    height:25px;
    -webkit-appearance: none;
    overflow: hidden;
    background: url('http://www.adcentre.com.au/media/1326/bg-down-arrow.gif')no-repeat right #fff;
   float: left;
   margin-right: 5px;
   margin-top: 6px;
   margin-bottom: 6px;
}

.drop-select select {
   background: transparent;
   width: 125px;
   height: 25px;
   border: none;
   padding: 5px 0 0 5px;
   color: #000;
   outline:0;
} 
```

即使我将轮廓设置为 0 并将边框设置为无，它仍然显示它吗？

JSFiddle 中的示例：

[http://bit.ly/SpQGC4](http://bit.ly/SpQGC4)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T05:24:15.920

这里的问题是下拉列表的父级`div.drop-select`，有一个黑色的`border`。删除它，黑色边框将消失。

不要`outline`与`border`;混淆 在许多浏览器中，`outline`定义了发光，例如，文本输入字段获得焦点（当我在 Safari 中写这个答案时，文本框有一个蓝色的轮廓，有轻微的模糊）。边框是指类似于轮廓的东西，但通常用于表单元素以外的东西*，*并且通常存在于所有元素状态中，而不仅仅是`focus`.

还值得一提的是，在 Windows 和 Mac OS 上的某些浏览器中（不确定 Linux 发行版），表单元素的轮廓*可以*设置样式。

# javascript - 窗口上的骨干无限滚动

> ID：13106515
> 
> 赞同：0
> 
> 时间：2012-10-28T05:05:22.577
> 
> 标签：javascript, jquery, backbone.js, underscore.js, infinite-scroll

我试图改变本教程的内容并遇到问题：

[http://backbonetutorials.com/infinite-scrolling/](http://backbonetutorials.com/infinite-scrolling/)

基本上，本教程是关于在`div`. 我已经有一个`div`，但我在`window`. 我不想设置`window`with`overflow:scroll`因为它会添加丑陋的水平滚动条。

我创建了一个新视图`el: $('body')`并在下面添加`initialize`：

```
 _.bindAll(this, 'checkScroll');
  $(window).scroll(this.checkScroll); 
```

但是，我认为以下变量不正确：

```
this.el.scrollTop + this.el.clientHeight + triggerPoint > this.el.scrollHeight 
```

知道如何为`window`or`body`对象解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T22:36:52.620

这是：

```
$(document).scrollTop() >= $(document).height() - $(window).height() - triggerPoint 
```

# .htaccess - 按主机名禁止IP？

> ID：13106516
> 
> 赞同：0
> 
> 时间：2012-10-28T05:05:54.413
> 
> 标签：.htaccess, http, ip, hostname

有什么方法可以拒绝通过 IP 解析的主机名访问我们的网站？

例如： 109.163.233.200 解析为 wau.torservers.net ，我们不希望任何人使用解析为该主机名的主机名访问我们的站点。

任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T23:55:09.947

除非您必须这样做`.htaccess`（我不知道它是否支持您想要的），如标签所示，并且如果您在（非 Windows）服务器框中具有 root 访问权限，则可以将主机名添加到`/etc/hosts.deny`. 让我在 Debian 上引用它，因为它是自记录的：

```
$ cat /etc/hosts.deny 
# /etc/hosts.deny: list of hosts that are _not_ allowed to access the system.
#                  See the manual pages hosts_access(5) and hosts_options(5).
#
# Example:    ALL: some.host.name, .some.domain
#             ALL EXCEPT in.fingerd: other.host.name, .other.domain
#
# If you're going to protect the portmapper use the name "portmap" for the
# daemon name. Remember that you can only use the keyword "ALL" and IP
# addresses (NOT host or domain names) for the portmapper, as well as for
# rpc.mountd (the NFS mount daemon). See portmap(8) and rpc.mountd(8)
# for further information.
#
# The PARANOID wildcard matches any host whose name does not match its
# address.
#
# You may wish to enable this to ensure any programs that don't
# validate looked up hostnames still leave understandable logs. In past
# versions of Debian this has been the default.
# ALL: PARANOID 
```

有关更多信息，请参阅[hosts.deny 手册页](http://linux.die.net/man/5/hosts.deny)

# mysql - MySQL 错误 1064 -“定义函数”语法

> ID：13106518
> 
> 赞同：0
> 
> 时间：2012-10-28T05:06:07.130
> 
> 标签：mysql

我几乎没有学习 MySQL（从 SQLite 迁移）。我正在尝试在 MySQL 命令行客户端中创建一个自定义函数，但遇到了我无法纠正的错误 - 并且无法在线找到答案。我的第一个功能是这样开始的：

```
 CREATE FUNCTION myDatabase.LCASE_ASCII_VALUE_AT(
        unparsedLine VARCHAR(1024),
        linePos int
    ) RETURNS int DETERMINISTIC
    return ASCII( LCASE( RIGHT( CHAR_LENGTH(unparsedLine) - linePos + 1) ) ); 
```

我收到了这个错误：

`ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') )' at line 10`

关于我的语法哪里出错的任何指示？我怀疑这些，但他们没有解决问题：

1.  也许 MySQL 不喜欢像`return ASCII( LCASE( ...`. 但即使在手动解开语句之后，我仍然得到同样的错误（但在新解开的语句中的一行 - 我省略了解开的语句以节省空间）。
2.  也许`DELIMITER $$ [function definition] END $$ DELIMITER ;`业务是强制性的——但这并没有解决错误，MySQL 文档给出了一个不需要 DELIMITER 的单行函数示例。（[https://dev.mysql.com/doc/refman/5.0/en/create-procedure.html](https://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)上的 'hello' 函数）

编辑：补充说我正在 MySQL 命令行客户端中创建这个函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T05:25:02.220

`right`需要*两个*参数，字符串本身和字符数。你只给出了字符数。

试试这个：

```
return ASCII( LCASE( RIGHT( unparsedLine, CHAR_LENGTH(unparsedLine) - linePos + 1) ) ); 
```

此外，您可能会发现这是一个更好的选择，因为在这种情况下`substr`不需要计算参数，例如：`right`

```
return ASCII( LCASE( SUBSTR( unparsedLine, linePos, 1 ) ) ); 
```

# json - gwtprojsonserializer 1.0.4 jar - 序列化数组列表时出错

> ID：13106520
> 
> 赞同：2
> 
> 时间：2012-10-28T05:06:19.423
> 
> 标签：json, gwt, serialization

我正在使用 gwtprojsonserializer 将对象转换为 JSON。我添加了从网站[http://code.google.com/p/gwtprojsonserializer/](http://code.google.com/p/gwtprojsonserializer/)下载的 1.0.4 版 jar，但尽管网站上的源代码包含序列化数组列表的功能，但它不包含在 jar 中因此我收到以下错误：

com.kfuntak.gwt.json.serialization.client.SerializationException：找不到 java.util.ArrayList 的对象序列化程序

有谁知道我如何更新 jar 或使用他们最新的源代码？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T11:08:13.773

它的开源项目。整个源代码可以从[http://code.google.com/p/gwtprojsonserializer/source/browse/#svn%2Ftrunk轻松下载](http://code.google.com/p/gwtprojsonserializer/source/browse/#svn%2Ftrunk)

我假设序列化数组列表所需的代码在主干中。您可以在本地副本上添加/删除/修改。构建 jar ( 它只需要**mvn clean install**命令)

如果您有本地存储库，请使用**mvn deploy**。确保您的版本 ID 不同以避免混淆。

# android - Android双击，ontouchevent不起作用

> ID：13106521
> 
> 赞同：1
> 
> 时间：2012-10-28T05:06:53.663
> 
> 标签：android, android-mapview, android-maps

双击时我需要缩放。为什么这不起作用？我研究了很长时间，没有任何结果。没有识别到​​触摸事件

```
public class MyMapActivity extends MapActivity implements OnGestureListener{
private MapView mapView;

@Override
public void onCreate(Bundle savedInstanceState) {

requestWindowFeature(Window.FEATURE_NO_TITLE);
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
mapView = (MapView)findViewById(R.id.mapView);
mGestureDetector = new GestureDetector(this,this);
detector.setOnDoubleTapListener(new OnDoubleTapListener(){
    @Override
public boolean onDoubleTap(MotionEvent e) {
 int x = (int)e.getX(), y = (int)e.getY();;  
 Projection p = map.getProjection();  
 map.getController().animateTo(p.fromPixels(x, y));
 map.getController().zoomInFixing(x, y);  
 return false;
}

@Override
public boolean onDoubleTapEvent(MotionEvent e) {
    return false;
}

    });
}
@Override
public boolean onTouchEvent(MotionEvent me) {
this.mGestureDetector.onTouchEvent(me);
return super.onTouchEvent(me); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T05:31:12.130

请参阅[本](http://publicstaticdroidmain.com/2012/03/double-tap-zoom-android-mapactivity-mapview/)教程，它有完整的如何或在[此处](https://stackoverflow.com/questions/2691235/double-tap-zoom-on-android-mapview)和[此处](https://stackoverflow.com/questions/937313/android-basic-gesture-detection)查看有关 stackoverflow 的类似问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T06:43:20.947

尝试查看`MapView Ballons`支持双击缩放等功能的库！它非常好，易于使用并与项目集成。[MapView 气球](https://github.com/jgilfelt/android-mapviewballoons)

# r - 更改polar.plot中的轴长度？

> ID：13106527
> 
> 赞同：0
> 
> 时间：2012-10-28T05:08:00.683
> 
> 标签：r, plot, polar-coordinates

我想在 R 中绘制一个极坐标图。

我找到了具有 polar.plot 的 plotrix，但我对任何其他解决方案持开放态度。

即使我有几千个点，它也可以很好地绘制一个多边形，太棒了！

我的问题：如何更改径向轴的起始值？即，怎么`ylim`办`polar.plot`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T06:50:41.000

尝试使用 ggplot2 - 它有一个 coord_polar() 命令来制作极坐标图

这是官方文档： [http ://docs.ggplot2.org/current/coord_polar.html](http://docs.ggplot2.org/current/coord_polar.html)

还有一个简单的教程： http: [//learnr.wordpress.com/2010/08/16/consultants-chart-in-ggplot2/](http://learnr.wordpress.com/2010/08/16/consultants-chart-in-ggplot2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T07:06:06.190

我找到了 polar.plot: option 的解决方案`radial.lim`。

# django - 对 Django 用户匹配查询不存在消息感到沮丧

> ID：13106528
> 
> 赞同：3
> 
> 时间：2012-10-28T05:08:16.477
> 
> 标签：django, django-forms, user-registration

我正在尝试在 Django 中实现用户注册页面。似乎是一项简单的任务，但我遇到了一个我不明白的错误。这是我的看法：

```
def registration_page(request):
  if request.method == 'POST':
    form = RegistrationForm(request.POST)
    if form.is_valid():
      user = User.objects.create_user(
        username = form.cleaned_data['username'],
        password = form.cleaned_data['password1'],
        email = form.cleaned_data['email1']
      )
      return HttpResponseRedirect('/register/success/')
  else:
    form = RegistrationForm()

  variables = RequestContext(request, {
    'form': form
  })
  return render_to_response('registration/registration_page.html', variables) 
```

这是我的注册表：

```
class RegistrationForm(forms.Form):
  username = forms.CharField(label = u'Username', max_length = 30, error_messages={'required': 'A username is required.'})
  email1 = forms.EmailField(label = u'Email Address', error_messages={'required': 'An email address is required.'})
  email2 = forms.EmailField(label = u'Email Address confirmation', error_messages={'required': 'A confirmed email address is required.'})
  password1 = forms.CharField(label = u'Password', widget = forms.PasswordInput(), error_messages={'required': 'A password is required.'})
  password2 = forms.CharField(label = u'Password confirmation', widget = forms.PasswordInput(), error_messages={'required': 'A confirmed password is required.'})

  def clean_password2(self):
    if 'password1' in self.cleaned_data:
      password1 = self.cleaned_data['password1']
      password2 = self.cleaned_data['password2']
      if password1 == password2:
        return password2
    raise forms.ValidationError('Passwords must be identical. Remember, passwords are case-sensitive.')

  def clean_email2(self):
    if 'email1' in self.cleaned_data:
      email1 = self.cleaned_data['email1']
      email2 = self.cleaned_data['email2']
      if email1 == email2:
        if User.objects.get(email = email1):
          raise forms.ValidationError("The email address '%s' is already associated with an account. This typically means you created an account in the past. Please use it." % email1)
        else:
          return email2
    raise forms.ValidationError('Email addresses must be identical.')

  def clean_username(self):
    if 'username' in self.cleaned_data:
      username = self.cleaned_data['username']
      if not re.search(r'^\w+$', username):
        raise forms.ValidationError('Username can only contain letters, numbers, and the underscore characters.')
      try:
        User.objects.get(username = username)
      except User.DoesNotExist:
        return username
    raise forms.ValidationError("Username '%s' is already taken." % username) 
```

问题在 form.is_valid() 和 clean_username() 中弹出。如果我添加一个存在或不存在的用户（无论用户是否存在，行为都是一样的）并用我知道有效的数据填充表单，代码应该简单地从 clean_username() 返回用户名并且 form.is_valid() 应该是 True。相反，我得到一个如下所示的错误页面：

```
DoesNotExist at /register/
User matching query does not exist.
Request Method: POST
Request URL:    http://127.0.0.1:8000/register/
Django Version: 1.4.1
Exception Type: DoesNotExist
Exception Value:    
User matching query does not exist.
Exception Location: /opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/db/models/query.py in get, line 366
Python Executable:  /opt/local/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python
Python Version: 2.7.2
Python Path:    
['/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/distribute-0.6.28-py2.7.egg',
 '/Library/Python/2.7/site-packages/bpython-0.10.1-py2.7.egg',
 '/Library/Python/2.7/site-packages/Pygments-1.5-py2.7.egg',
 '/Library/Python/2.7/site-packages/django_registration-0.8-py2.7.egg',
 '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7',
 '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages',
 '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip',
 '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin',
 '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac',
 '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages',
 '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk',
 '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old',
 '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload',
 '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PIL',
 '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg-info',
 '/Library/Python/2.7/site-packages']
Server time:    Sun, 28 Oct 2012 00:51:58 -0400 
```

它一定是我想念的小东西，但我看不到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T05:46:17.457

在您的代码中

```
def clean_email2(self):
    ...
        # here
        if User.objects.get(email = email1):
          raise forms.ValidationError("The email address '%s' is already associated with an account. This typically means you created an account in the past. Please use it." % email1)
    ... 
```

`get()`可能导致但`DoesNotExist`未被捕获。是这个问题吗？

另外，请提供产生问题的行的*完整*追溯。

此外，根据[文档](https://docs.djangoproject.com/en/dev/ref/forms/validation/#cleaning-and-validating-fields-that-depend-on-each-other)，最好将验证密码和电子邮件的逻辑放入`clean()`方法中。

# c++ - 为什么不填充数组？

> ID：13106532
> 
> 赞同：1
> 
> 时间：2012-10-28T05:08:40.583
> 
> 标签：c++, arrays

我正在尝试用 fstream 填充两个数组。一个是字符串，一个是整数。字符串数组（名称）可以很好地填充，但 char 数组只填充第一个值。

```
void fillInventory(ifstream &fin, int costArray[],string itemArray[])
{
    string name = "junk";
    string cost;
    int i = 0;
    int max = 0;
    stringstream convert;

    while(name != "none")
    {
        getline(fin, name);
        getline(fin, cost);
        if(name != "none")
        {
            itemArray[i] = name;
            convert<<cost;
            convert >> costArray[i];
        }
        i++;
    }
} 
```

我是在使用 stringstream 错误还是我的逻辑不正确，或者完全是其他什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T05:18:57.570

当你这样做时：

```
convert >> costArray[i]; 
```

您已到达字符串流上的 EOF，它设置了`eofbit`标志，导致未来的操作失败。重置标志以继续：

```
convert >> costArray[i];
convert.clear(); 
```

# asp.net - 如何在 bing 地图的信息框中显示数据，从 asp.net 中的数据库中提取数据？

> ID：13106533
> 
> 赞同：1
> 
> 时间：2012-10-28T05:08:59.933
> 
> 标签：asp.net, asp.net-mvc, bing-maps

我正在尝试从包含图像的数据库中提取数据并将其显示在必应地图的信息框中。我需要做一个自定义信息框吗？感谢大家的帮助。我将在这个项目中使用 asp.net MVC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-18T12:12:45.100

是的，您的信息框需要自定义 HTML。有几种选择。一种选择是使用内置的 Infobox 控件并将其设置为 HTML 内容。这消除了信息框的整个样式，因此需要做更多的工作。我在这里有一篇关于如何处理这个问题的博客文章：[http ://rbrundritt.wordpress.com/2011/11/08/simple-custom-infoboxes-in-bing-maps-v7/](http://rbrundritt.wordpress.com/2011/11/08/simple-custom-infoboxes-in-bing-maps-v7/)

另一种选择是使用我不久前为 Bing 地图创建的自定义信息框模块。在自定义信息框时，它为您提供了更多选择：http://bingmapsv7modules.codeplex.com/wikipage?title=Custom%20Infobox% [20Control](http://bingmapsv7modules.codeplex.com/wikipage?title=Custom%20Infobox%20Control)

# matlab - 如何在 matlab GUIDE 中设置一个将用户引导到命令窗口的按钮？

> ID：13106534
> 
> 赞同：1
> 
> 时间：2012-10-28T05:09:25.200
> 
> 标签：matlab, user-interface, matlab-guide

我打算在我的 GUI 中添加一个按钮，在单击它后将用户引导到命令窗口。我可以知道执行此功能的代码或命令是什么吗？

提前感谢您并感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T07:39:56.523

您可以`commandwindow`使用按钮调用。它会做你需要的。[Matlab中的命令窗口](http://www.mathworks.es/es/help/matlab/ref/commandwindow.html)

# c# - MVC3：HTTPPOST 控制器 db.SaveChanges() 因“列名无效..”而失败

> ID：13106537
> 
> 赞同：1
> 
> 时间：2012-10-28T05:09:51.873
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

我有一个在 HTTPPOST 上的 db.SaveChanges() 上失败的发票的创建视图。异常消息是 {"Invalid column name 'UserDetail_UserId'."}。在 POST 控制器中，我尝试添加到 InvoiceItems 表中的 invoiceitem 对象似乎正确填充了下拉列表中选定的用户名，该用户名由我的 UserDetails 表中的用户名填充。“UserId”是 UserDetails 表中的关键列，但它没有在下拉列表中使用，所以我不清楚为什么任何数据都试图保存到“UserDetail_UserId”列中。我的代码如下：

**楷模：**

```
public class InvoiceItem
{
    //Identity Column
    public int ServiceID { get; set; }

    [Key]
    public string ProfileUserName { get; set; }

    public DateTime InvoiceDate { get; set; }
    public string Address { get; set; }
    public string Note { get; set; }
    public decimal Price { get; set; }
    public decimal SubTotal { get; set; }
    public bool InvoicePaid { get; set; }
}

public class UserDetail
{
    [Key]
    public Guid UserId { get; set; }
    public string ProfileUserName { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string FullName { get; set; }
    public string Address { get; set; }
    public string City { get; set; }
    public string State { get; set; }
    public string Zip { get; set; }
    public string Phone { get; set; }
    public DateTime DateUpdated { get; set; }
    public virtual ICollection<InvoiceItem> InvoiceItems { get; set; }
}

public class ProShotDB : DbContext
{
    public DbSet<UserDetail> UserDetails { get; set; }
    public DbSet<UserLinkToken> UserLinkTokens { get; set; }
    public DbSet<InvoiceItem> InvoiceItems { get; set; }
} 
```

**控制器：**

```
public ActionResult Create()
    {
        ViewBag.ProfileUserNames = db.UserDetails.Select(
        c => new
        {
            ProfileUserName = c.ProfileUserName,
            NameAddress = c.FullName + " - " + c.Address
        });
        return View();
    }

    [HttpPost]
    public ActionResult Create(InvoiceItem invoiceitem)
    {
        decimal Tax = 1.066m;
        if (ModelState.IsValid)
        {
            invoiceitem.InvoiceDate = DateTime.Now;
            invoiceitem.SubTotal = invoiceitem.Price*Tax;
            invoiceitem.InvoicePaid = false;

            db.InvoiceItems.Add(invoiceitem);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        ViewBag.ProfileUserNames = db.UserDetails.Select(
        c => new
        {
            ProfileUserName = c.ProfileUserName,
            NameAddress = c.FullName + " - " + c.Address
        });
        return View(invoiceitem);
    } 
```

**看法：**

```
@model Pro_Shot_Portal.Models.InvoiceItem

@{
    ViewBag.Title = "Input Invoice";
}

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend>Input Invoice:</legend>

    <div class="alert alert-error" style="width:250px;">
        <button type="button" class="close" data-dismiss="alert">×</button>
        <strong>Warning!</strong> Assigning invoice to wrong user could cause major problems, please triple check before proceeding.
    </div>
    <div class="editor-label">
        @Html.LabelFor(model => model.ProfileUserName, "Attach invoice to user")
    </div>
    <div class="editor-field">
        @Html.DropDownListFor(model => model.ProfileUserName, new SelectList(ViewBag.ProfileUserNames, "ProfileUserName", "NameAddress"), "-- Pick Client For Invoice --")
        @Html.ValidationMessageFor(model => model.ProfileUserName)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Address)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Address)
        @Html.ValidationMessageFor(model => model.Address)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Note)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Note)
        @Html.ValidationMessageFor(model => model.Note)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Price)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Price)
        @Html.ValidationMessageFor(model => model.Price)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
}

<div>
    @Html.ActionLink("Cancel Invoice Creation", "Index")
</div> 
```

据我所知，invoiceitem 模型对象属性填充了正确的数据，并且我使用 db.SaveChanges() 调用的唯一数据库更改是“db.InvoiceItems.Add(invoiceitem);”。谁能告诉我它试图访问、写入或更新名为“UserDetails_UserId”的列的位置和原因。也许我在 DropdownListFor 上搞砸了，因为这是与 UserDetails 表交互的唯一部分？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T05:44:44.307

You have a one-to-many relationship setup, the column name you are seeing with the underscores in the exception is the relationship default generated. See [here](https://stackoverflow.com/questions/7002389/entity-framework-failing-to-retrieve-data-due-to-exceptions) for more details.

# iphone - 如何将数据的属性传递给另一个视图控制器？（故事板）

> ID：13106539
> 
> 赞同：-1
> 
> 时间：2012-10-28T05:09:52.813
> 
> 标签：iphone, objective-c, ios, uitableview, ios5

我想在选择 tableviewcell 后传递数据的属性。请指导我。我已经设置了 detailviewcontroller。DataArray 是我在 detailviewcontroller 中的可变数组。peripheralManager 是我的 NSbject。Peripheral 是我的设备。

```
- (void)viewDidLoad
{
  [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
  peripheralManager=[[PeripheralManager alloc]init];
  self.MeBle.enabled=NO;
  device=[[NSMutableArray alloc]init];

}
- (void)peripheralManagerDidConnectPeripheral:(PeripheralManager *)peripheral
{
  NSLog(@"%@",peripheral.deviceName);
  [device addObject:[NSString stringWithFormat:@" %@ ",peripheral.deviceName]];    
   //   [device addObject:peripheral];
  [self.deviceTable reloadData];
}
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  static NSString *simpleTableIdentifier=@"Cell";

  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
  if(cell==nil)
{
    cell =[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
}
   cell.textLabel.text=[device objectAtIndex:indexPath.row];
   return cell;
}
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   //DetailViewController *detail=[self.storyboard instantiateViewControllerWithIdentifier:@"DetailViewController"];
   // [self.navigationController pushViewController:detail animated:YES];

   //[self performSegueWithIdentifier:@"TableDetails" sender:[device objectAtIndex:indexPath.row]];

}

-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

    if ([segue.identifier isEqualToString:@"TableDetails"]) {

    DetailViewController *detail=segue.destinationViewController;
    detail.dataArray=device;

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T08:56:09.313

在 prepareForSegue 你应该得到当前的选择索引：

```
NSIndexPath *indexPath = [self.deviceTable indexPathForCell:sender]; 
```

现在，您可以仅将此索引传递给目标控制器，也可以将当前数组中的特定对象传递给您，这取决于您。

```
detail.idx = [indexPath row]; 
```

**编辑：**你不需要实施

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

就在

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
```

改为：

```
detailViewObject.objCurrentDevice=[device objectAtIndex:[[self.deviceTable indexPathForCell:sender] row]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T17:13:45.233

在界面生成器中，查看 seague 运行时属性部分，您可以创建多个相同样式但标识符不同的单元格，然后 cellForRowAtIndexPath 按行返回单元格

# c++ - 在 C++ 中打开二进制文件，更改打开文件的模式

> ID：13106543
> 
> 赞同：2
> 
> 时间：2012-10-28T05:10:47.273
> 
> 标签：c++, io

我有一个处理 Ascii 和二进制 PGM 图像的程序。我使用以下方法打开文件打开模式：

```
ifstream istr(argv[i]); 
```

读入 PGM 文件的标头后，确定我处理的是二进制数据还是 ASCII。那么有没有办法将istr更改为二进制模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T05:30:06.950

没有[成员函数`std::ifstream`](http://www.cplusplus.com/reference/iostream/ifstream/)可以更改模式。因此，您必须以二进制模式`close()`重新`open()`生成文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T05:46:35.680

**1>** You would have first clear the stream by calling `Clear` method to reset the mode of the stream(required if your stream has hit an `end-of-file` or has encountered an `error`)

**2>** You would have to close the stream by calling `close` method

**3>** Finally you have to call the `open` method to open the new file with the desired filemode

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T05:29:56.693

不，至少不是便携的。您将不得不以二进制模式打开并手动处理行尾。

# dns - 为什么在爬虫架构中需要 DNS 解析器？

> ID：13106550
> 
> 赞同：5
> 
> 时间：2012-10-28T05:12:13.493
> 
> 标签：dns, network-programming, web-crawler

在我读过的每篇关于爬虫提案的论文中，我看到一个重要的组件是**DNS Resolver**。

我的问题是：

**为什么有必要？**我们不能只向[http://www.some-domain.com/](http://www.some-domain.com/)发出请求吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T05:20:03.870

> DNS 解析是网络爬虫中众所周知的瓶颈。由于域名服务的分布式特性，DNS 解析可能需要跨 Internet 的多个请求和往返，需要几秒钟甚至更长的时间。马上，这会危及我们每秒获取数百个文档的目标。
> 
> DNS解析还有一个重要的难点；标准库中的查找实现（可能被任何开发爬虫的人使用）通常是同步的。这意味着一旦向域名服务发出请求，该节点上的其他爬虫线程将被阻塞，直到第一个请求完成。为了避免这种情况，大多数网络爬虫都将自己的 DNS 解析器作为爬虫的一个组件来实现。

[http://nlp.stanford.edu/IR-book/html/htmledition/dns-resolution-1.html](http://nlp.stanford.edu/IR-book/html/htmledition/dns-resolution-1.html)

# r - 如何将数据框中的因素总和制成表格，保留标签

> ID：13106555
> 
> 赞同：2
> 
> 时间：2012-10-28T05:12:35.757
> 
> 标签：r

我有 11 个变量 x 60 行的数据框；条目是二值因子（“男性”/“女性”）并包含 NA。（每行是一个家庭，最多有 11 名成员。因此列名为“A4M1”...“A4M11”）。

将“男性”、“女性”的总数制成表格以便可以绘制条形图的最简单范例是什么？理想情况下，我的输出将是一个长度为 2 的命名数字向量，即**直接将因子作为因子进行运算，因此我们保留标签**。

我一直在尝试重塑，融化，铸造，堆栈，制表，表格，colwise，总和，聚合，总结，by，plyr ...

我目前的工作代码是：

```
> tabulate(stack(colwise(as.numeric)(myData), na.rm=TRUE)$values)
[1] 162 151 
```

这很糟糕，因为我不想强制使用数字并丢失标签。

请看下面我的回答

```
table(as.matrix(myData)) 
```

也不理想，因为它丢失了因子级别的顺序，并返回给我们标签的字母顺序。

`tabulate()`似乎是最合适的fn。要将数据框转换为我使用的列表`stack(..., na.rm=TRUE)$values`，这很笨重但可以完成工作。但是`stack()`并不理想，因为它不适用于因子，因此我必须将其转换为`colwise(as.numeric)(myData)`，这会丢弃标签。我可以重新应用`factor(..., labels=c('Male','Female'))`到 的输出`tabulate()`，但这很笨拙。那么，你能做得更好吗？（使用标准范例，而不是编写特定于案例的代码）

```
> head(myData)
    A4M1 A4M2   A4M3   A4M4   A4M5 A4M6 A4M7 A4M8 A4M9 A4M10 A4M11
1 Female Male   Male   <NA>   Male Male Male <NA> <NA>  <NA>  <NA>
2 Female Male   Male   <NA>   <NA> <NA> <NA> <NA> <NA>  <NA>  <NA>
3 Female Male   Male   <NA>   <NA> <NA> <NA> <NA> <NA>  <NA>  <NA>
4 Female Male Female   <NA>   <NA> <NA> <NA> <NA> <NA>  <NA>  <NA>
5 Female Male   Male Female Female Male <NA> <NA> <NA>  <NA>  <NA>
6 Female Male   Male   <NA>   <NA> <NA> <NA> <NA> <NA>  <NA>  <NA>
7 ...

> str(myData)
'data.frame':   60 obs. of  11 variables:
 $ A4M1 : Factor w/ 2 levels "Male","Female": 2 2 2 2 2 2 1 2 2 2 ...
 $ A4M2 : Factor w/ 2 levels "Male","Female": 1 1 1 1 1 1 1 1 1 1 ...
 $ A4M3 : Factor w/ 2 levels "Male","Female": 1 1 1 2 1 1 2 1 1 2 ...
 $ A4M4 : Factor w/ 2 levels "Male","Female": NA NA NA NA 2 NA NA 1 NA 2 ...
 $ A4M5 : Factor w/ 2 levels "Male","Female": 1 NA NA NA 2 NA NA 1 NA 2 ...
 $ A4M6 : Factor w/ 2 levels "Male","Female": 1 NA NA NA 1 NA NA NA NA NA ...
 $ A4M7 : Factor w/ 2 levels "Male","Female": 1 NA NA NA NA NA NA NA NA NA ...
 $ A4M8 : Factor w/ 2 levels "Male","Female": NA NA NA NA NA NA NA NA NA NA ...
 $ A4M9 : Factor w/ 2 levels "Male","Female": NA NA NA NA NA NA NA NA NA NA ...
 $ A4M10: Factor w/ 2 levels "Male","Female": NA NA NA NA NA NA NA NA NA NA ...
 $ A4M11: Factor w/ 2 levels "Male","Female": NA NA NA NA NA NA NA NA NA NA ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T06:22:16.517

如果您只是先取消列出您的数据怎么办？简单的例子：

```
test <- data.frame( 
            A4M1=factor(c(1,2,3,1),levels=(1:3),labels=c("one","two","three")),
            A4M2=factor(c(1,2,2,1),levels=(1:3),labels=c("one","two","three"))
             ) 
```

这使因素保持不变...

```
str(unlist(test))
 Factor w/ 3 levels "one","two","three": 1 2 3 1 1 2 2 1
 - attr(*, "names")= chr [1:8] "A4M11" "A4M12" "A4M13" "A4M14" ... 
```

...并为您提供您所追求的表格顺序（即 - 非字母顺序）：

```
> table(unlist(test))

  one   two three 
    4     3     1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T05:19:14.680

如果您放弃将其视为因子数据框的想法，您可以执行以下操作。

```
> table(as.matrix(myData))

Female   Male 
   151    162 
```

然而，这是不可取的，因为订单现在是不确定的；`table()`按标签的字母顺序排序，而不是级别的数字顺序。一般来说，那会很糟糕；在这里我们可以解决`rev()`：

```
> rev(table(as.matrix(myData)))

Male Female 
 248    253 
```

# jpa-2.0 - 为 JPA 实体编写哈希码

> ID：13106559
> 
> 赞同：0
> 
> 时间：2012-10-28T05:14:18.833
> 
> 标签：jpa-2.0, hashcode

在为我的 JPA2 实体制作哈希码时，我对规则有点困惑。

我有一个包含审计列（lastModifiedDate、createdDate）等的嵌入式实体。这个对象应该是我实体哈希码的一部分吗？

```
@Entity(name = "CaseStatusEnum")
public class CaseStatus implements java.io.Serializable {

    private static final long serialVersionUID = -5936623582710348810L;

    @Id
    @Column(unique=true,nullable=false,length=30)
    private String caseStatus;

    @Column(nullable=false,length=100)
    private String caseStatusDesc;

    @Embedded
    private AuditTrail auditTrail; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T05:15:28.850

我建议您使用此链接来概述有关 equals 和 hashcode 函数的概念，特别是它在 Hash 和 Collections 的不同实现中的使用。 [覆盖 equals 和 hashcode](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java) 然后您可能需要根据您使用的 JPA2 实现来调整 equals 和 hashcode 函数的实现。不管是什么，我建议你看看这篇关于[Hibernate - equals and hashcode](https://community.jboss.org/wiki/EqualsAndHashCode)的文章，以更好地了解你的应用程序会如何影响覆盖这些函数。

问候

# javascript - 在 Javascript 中使用变量

> ID：13106560
> 
> 赞同：0
> 
> 时间：2012-10-28T05:14:46.960
> 
> 标签：javascript, variables

```
<head>
    <script type="text/javascript">
        var p=0;
    </script>
</head>
<body>
<form name="quiz" method="post" action="evaluate.jsp">
   <script type="text/javascript">
                   <input type="radio" name="q"+p value="hi">charles
                   <input type="submit">
     </script>

  </form>  
  </body> 
```

任何人都可以帮助我如何连接单选按钮的名称，如 q​​0。我需要使用 for 循环来增加单选按钮 q0、q1、q2 等的名称。帮帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T05:20:30.460

按以下方式格式化您的 JavaScript 代码。

```
<script type="text/javascript">

var p=0;
document.write('<input type="radio" name="q'+p+'" value="hi">charles');
document.write('<input type="submit">');

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T05:29:57.863

一种替代方法`document.write()` （在某些情况下可能会阻止浏览器对某些页面加载进行优化）是在加载后修改 DOM 并使用脚本将所需的`name`属性添加到输入标签。

```
<head>
 <script type="text/javascript">
  var p=0;
 </script>
</head>
<body>

<form name="quiz" method="post" action="evaluate.jsp">
    <input id="radio1" type="radio" value="hi">charles
    <input type="submit">
</form>  
<script type="text/javascript">
    document.getElementById("radio1").name = "q" + p;
</script>
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T05:33:28.173

这应该进入您的脚本标签以创建您的输入：

```
function createInputs(totalInputsNeeded) {
    var rdo, parent;

    parent = document.getElementById('parentId');

    for (var i = 0; i < totalInputsNeeded; i++) {        
        rdo = document.createElement('input');

        rdo.setAttribute('type','radio');
        rdo.setAttribute('name','q' + i.toString());
        rdo.setAttribute('value', 'yourValue');

        parent.appendChild(rdo);
    }
} 
```

如果只是添加到现有收音机的名称中，您可以这样做：

```
function appendToNames() {
    var elems = document.getElementsByName('q');

    for (var i = 0; i < elems.length; i++) {
        elems[i].setAttribute('name', elems[i].getAttribute('name') + i.toString());
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T06:05:11.410

我认为说明 OP 与他所说的要求可能存在的问题已经足够重要了，所以我编写了这个 jsFiddle 来展示为每个单选按钮分配相同名称和将每个单选按钮的名称更改为不同之间的区别.

第一行中的单选按钮都可以选中...但是您将无法取消选中它们，因为它们没有任何东西可以关闭它们（没有其他同名的单选按钮可以关闭它们）。

第二行中的单选按钮将按照您期望单选按钮组的工作方式工作......一次只能检查一个单选按钮。

[http://jsfiddle.net/2ENZP/1/](http://jsfiddle.net/2ENZP/1/)

HTML：

```
<form name="quiz" method="post" action="evaluate.jsp">
    <h3>Buttons with Differing Names</h3>
    <fieldset id="buttonsDiffNames">
    </fieldset>

    <h3>Buttons with Same Names</h3>
    <fieldset id="buttonsSameNames">
    </fieldset>
    <input type="submit">
</form> 
```

Javascript：

```
var radioBtns = [
    {id:0,name:"charles"},
    {id:1,name:"diana"},
    {id:2,name:"peter"},
    {id:3,name:"sofia"},
    {id:4,name:"reggie"},
    {id:5,name:"jim"}
];

// set up templates for use by the examples, below.
var tmpl  = '<input type="radio" name="{ID}" value="{ID}">{NAME}';
var tmpl2 = '<input type="radio" name="{ID}" value="{NAME}">{NAME}';

// This one will populate the first list, with buttons
// that all have different names
function populateWithDifferingNames(){
    // get a ref to the fieldset we're going to add these to
    var fieldSet = document.getElementById("buttonsDiffNames");
    // create an array to act as a StringBuilder
    var sb = [];

    // loop through your dataset... 
    for(var i = 0; i < radioBtns.length; i++){
        // add a string to the sb array, replacing the templated
        // areas with the incremented radio button id and the name
        // from the dataset
        sb.push(tmpl.replace(/\{ID\}/gi,"q" + radioBtns[i].id).replace("{NAME}", radioBtns[i].name));
    }
    // set the fieldset's innerHTML to the joined string representation
    // of the sb array
    fieldSet.innerHTML = sb.join("\n");
}

// Same idea, but with matching names
function populateWithSameNames(){
    var fieldSet = document.getElementById("buttonsSameNames");
    var sb = [];

    for(var i = 0; i < radioBtns.length; i++){
        sb.push(tmpl2.replace(/\{ID\}/gi,"q").replace(/\{NAME\}/gi, radioBtns[i].name));
    }
    fieldSet.innerHTML = sb.join("\n");
}

window.onload = function() {
    populateWithDifferingNames();
    populateWithSameNames();
}(); 
```

​</p>

# java - 为什么 toArray 隐藏 收藏的 ?

> ID：13106567
> 
> 赞同：5
> 
> 时间：2012-10-28T05:17:00.343
> 
> 标签：java, generics, collections

`toArray`方法隐藏`<E>`传递给`Collection<E>`接口。下面是方法签名。

```
<T> T[] toArray(T[] a); 
```

因为下面是可能的。结果成`ArrayStoreException`

```
ArrayList<String> string = new ArrayList<String>();
string.add("1");
string.add("2");
Integer intArray[] = new Integer[2];
intArray = string.toArray(intArray); 
```

我想知道为什么会做出这样的决定？为什么在设计 API 时允许这种情况？无论如何，这段代码会导致`RuntimeException`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T05:29:32.763

该`toArray`方法早于泛型的引入。的原始签名`toArray`取了一个任意的`Object[]`.

对于泛型，这是接受泛型之前允许的相同输入的唯一方法。但是，采用任意值的优点`T[]`是它可以返回与它传递的相同的数组类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T05:22:09.823

当您调用时`intArray = string.toArray(intArray);`，您期望它构造 Array`Integer`并返回值，因此返回类型是`T[]`ie`Integer[]`在您的情况下。

调用这样的方法并不意味着您可以自动将 String list 转换为`Integer []`. 上述方法调用将导致`java.lang.ArrayStoreException`.

**这样做是为了允许使用可转换类（基类/子类）**，例如：

```
 List<Integer> list = new ArrayList<Integer>();
  list.add(1);

  Integer[] intArray = new Integer[1];
  intArray = list.toArray(intArray); //Success

  Number [] numArray = new Number[1];
  numArray = list.toArray(numArray);//Success

  Double [] dubArray = new Double[1];
  dubArray = list.toArray(dubArray); //Failure(ArrayStoreException) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T00:59:50.350

当您问自己 in 数组的类型应该是什么时`toArray()`，第一个也是最明显的方法是将其限制`T`为的超类型`E`（包括 if`T`与 相同`E`）：这是有道理的——能够复制元素到比我们的集合更通用的元素类型的数组。然而，尽管乍一看这似乎是类型安全的（即在编译时检查，以便在运行时不会发生异常），但它并不是完全类型安全的——一个类型的变量`T[]`可以保存任何类型的数组，`U[]`其中`U`的子类型是`T`. 因此，`ArrayStoreException`即使我们限制`T`为的超类型`E`（并且，*即使*我们限制`T`为与`E`）。另外，很难以`T`只能是 的超类型的方式声明此方法`E`，因为 Java 不允许`super`类型参数的界限。

问题中的示例涉及 a`T`不是 的超类型`E`。为什么要允许这样做？这不是类型安全的，并且仅当集合的元素实际上是数组实际类型的子类型时才有效。但是，可以说这仍然*不比*`T`我们限制为 的超类型的情况更糟`E`，或者即使我们`T`与 相同`E`，因为如上所述，这些限制都不能使其成为类型安全的. `ArrayStoreException`无论你如何声明这个方法，都有可能得到。那么，如果没有更糟，为什么不让它尽可能通用呢？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-28T05:31:31.233

`string.toArray(intArray)`返回一个类型的数组`String`；但是，您希望它是一个 type 数组`Integer`。`ArrayStoreException`由于类型不匹配，这将返回您提到的异常。

# ruby-on-rails - 部分、布局、模板渲染问题

> ID：13106580
> 
> 赞同：3
> 
> 时间：2012-10-28T05:20:27.210
> 
> 标签：ruby-on-rails, templates, layout, yield, partials

## 情况

因此，当我访问一个页面时，我希望能够将布局应用于部分（我想要三个具有相同布局的部分）。现在，我正在尝试使用以下命令执行此操作：

```
<%= render :partial => "shared/services/essay", :layout => "layouts/services/tab_pane", :locals => { :service => "essay" } %> 
```

`shared/services/essay`像这样的地方：

```
<% content_for :intro do %>
<p>
    blah.
</p>
<% end %>

<% content_for :workflow do %>
<div>
    blah.
</div>
<% end %>

<% content_for :value_prop do %>
<p>
    blah.
</p>
<% end %> 
```

和 `layouts/services/tab_pane' 就像：

```
<div class="tab-pane fade in" id=<%= service %> >
    <%= yield :intro %>

    <div class="span7 workflow">
        <h3>Workflow</h3>
        <%= yield :workflow %>
    </div>

    <div class="span5 value-proposition">
        <h3>Our Value Proposition for You</h3>
        <%= yield :value_prop %>
        <div class="call-to-action">
            <%= link_to "Action!", contact_path, class: "btn btn-large btn-warning" %>
        </div>
    </div>
</div> 
```

## 问题

当我加载它时，我只得到布局 HTML。没有任何内容通过。所以本质上，收益率并没有吸引内容或其他东西。

有人可以帮忙吗？谢谢！

## 我尝试过的事情

如果我尝试 Ruby Guides 中提到的嵌套布局（添加...

```
<%= render :template => "layouts/services/tab_pane", :locals  => { :service => "essay" } %> 
```

到我的部分并进行所有正确的名称更改），我的第二个部分包含第一个部分的内容，而我的第三个部分包含第一个和第二个的内容。所以我的第二部分将包含每个部分的 2 blah，而我的第三部分将包含每个部分的 3 blah。谢谢！

# 更新：

问题现已解决（感谢迈克尔），但现在我想我想知道在处理此类问题时最佳实践是什么。我是否应该在未来避免这样的事情，只担心为整个页面提供模板/布局而不是页面内的部分？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T20:54:04.467

我想知道您是否对部分视图的处理感到震惊。您是否多次调用此部分？问题是 rails 将 content_for 数据存储在哈希中，并且是非破坏性的。

您可以尝试添加：

`def yield_content!(content_key) view_flow.content.delete(content_key) end`

在您的 ApplicationHelper 中并在布局文件中调用 yield_content 而不是 yield 。

# java - Java-重用具有相同运行但不同参数的线程

> ID：13106585
> 
> 赞同：7
> 
> 时间：2012-10-28T05:20:56.117
> 
> 标签：java, multithreading, compression

我仍然很难将头绕在线程上，我正在尝试以最简单的方式做到这一点。我知道线程都必须有一个从 Runnable 类继承的 run 方法，但它们也可以有其他方法，对吗？

原因是，我有一个带有一些私有变量和一个运行方法的线程。它调用它的运行函数，一旦完成，我想用完全相同的运行方法重用线程。它做的事情完全相同，只是变量不同。所以我可以添加类似 setArray 方法的东西（线程包含一个私有字节数组），这样我就可以简单地用这个新数组再次调用 run，或者这是不允许的。我想简单地说，它就像

```
Thread thread = new MyThread();
thread.start();

// Check if the thread has finished in a non-blocking way
if (thread.isAlive() == false) {
    thread.setArray(newArray)
    thread.start();
} 
```

基本上我只有固定数量的线程，当第一个线程完成运行时，我想稍微更改一下参数并让它再次运行。我不希望他们死，这似乎是 join 所做的。

对于具体问题，我说 4 个线程，每个线程都给出一个更大字节数组的集合大小块。每个线程使用 Deflater 压缩该数组并将其结果传递给处理同步的管理器对象。一旦第一个线程（如获得数组第一部分的线程，而不是第一个完成的线程）完成，它就会移动到下一个未分配给线程的块。

我知道线程池是一种选择，但它似乎有点矫枉过正，而且我真的不明白它们（我仍然遇到普通线程的问题）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-28T05:42:57.737

首先，最好使用标准`Thread`类（不要继承它！）并将您的应用程序代码放入实现`Runnable`. 这使得将应用程序逻辑与管理线程的问题分开变得更加容易。

其次，您必须了解 Thread 对象仅调用该`run`方法一次。在`run`方法返回（或因异常终止）后，Thread 对象就死了，无法恢复生机。

因此，如果你想“重用”`Thread`实例，你必须安排该`run`方法是一个循环，（不知何故）等待下一件事情完成。在不知不觉中，您正在*实现*一个线程池。

线程池还有另一种（更“现代”）替代方案。创建一个[`ExecutorService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)实例，并使用该`submit()`方法提交`Runnable`实例以供执行。接口 javadoc 有一个很好的使用示例，使用带有私有线程池的执行器服务实例。如果您愿意，您*可以*重用这些`Runnable`实例，但通常每次创建新实例更简单（也更安全）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T05:26:01.160

为实现 Runnable 的代码创建一个单独的类。您每次都需要创建新的 Thread 对象，但使用单个 Runnable 对象构建这些对象。run 方法将被每个线程重用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T05:38:30.640

一个线程总是只启动一次，只运行一次，然后只运行一次。所以你不能按照你建议的方式多次调用线程上的 start() 。

因此，无论哪种方式，您都必须：

*   有一个线程，在它的 run() 方法中以一种或另一种方式，使用不同的参数集执行每个方法调用。
*   为每个“运行”启动一个新线程（对您实际想要做的事情的方法调用）。

哪种实现更合适取决于您的确切应用程序。但总的来说，将线程视为与其他子任务*并行*运行的子任务是有帮助的。所以总的来说：

*   如果您有一系列独立的“运行”，而您没有理由彼此并行运行，请安排这些运行在单个 Thread.run() 方法中一个接一个地执行；
*   如果您有一系列任务也可以彼此并行运行，请将每个任务放在一个单独的线程中。

线程池通常用于在任何给定时刻您可以执行一些任意任务并且这些任务可以并行运行的情况。例如，在典型的服务器上。想象一个 Web 服务器在任意时间点接收来自不同客户端的页面请求：每个请求都可以在某个任意时间点出现，并且来自一个客户端的页面请求完全独立于来自另一个客户端的请求。原则上，您不关心哪些请求与哪些请求并行运行，除了您的机器具有资源限制（例如 CPU 数量）之外。对于这种类型的情况，您实际上想要“在任意线程中运行任意任务，最多并行运行 X 个任务”，您通常会使用线程池。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-10-28T05:42:17.427

线程基本上只是具有状态和运行方法的对象。这是一个示例线程：

```
public class ThreadWithState implements Runnable {

  private Object state;

  public ThreadWithState(Object state) {
    this.state = state;
  }

  public void run() {
    // Do something with state
  }
} 
```

线程一般是并行执行的，否则就失去了多线程的全部意义。因此，我们尝试使用线程池来执行，如下面的 Driver 类所示：

```
public class Driver {

  public static void main(String[] args) {
    ThreadWithState thread = new ThreadWithState(null);
    ThreadWithState thread2 = new ThreadWithState(new Object());
    ThreadWithState thread3 = new ThreadWithState(new Object());
    ThreadWithState thread4 = new ThreadWithState(new Object());

    ExecutorService service = Executors.newFixedThreadPool(4);
    service.submit(thread);
    service.submit(thread2);
    service.submit(thread3);
    service.submit(thread4);
    service.shutdown();
  }
} 
```

# algorithm - 二项式系数模 142857

> ID：13106587
> 
> 赞同：11
> 
> 时间：2012-10-28T05:21:56.030
> 
> 标签：algorithm, math, combinatorics, binomial-coefficients

如何计算大`n`和的二项式系数模 142857 `r`。142857有什么特别之处吗？如果问题是质数的模数`p`，`p`那么我们可以使用卢卡斯定理，但对于 142857 应该怎么做。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-06-30T23:25:44.973

您实际上可以`C(n,k) % m`及时计算`O(n)`任意`m`.

诀窍是计算`n!`，`k!`并`(n-k)!`作为素数幂向量，从第一个中减去后面的两个，然后乘以余数模`m`。因为`C(10, 4)`我们这样做：

```
10! = 2^8 * 3^4 * 5^2 * 7^1
 4! = 2^3 * 3^1
 6! = 2^4 * 3^2 * 5^1 
```

因此

```
C(10,4) = 2^1 * 3^1 * 5^1 * 7^1 
```

我们可以很容易地计算出来`mod m`，因为没有除法。诀窍是在线性时间内计算`n!`和朋友的分解。如果我们预先计算质数到`n`，我们可以如下有效地做到这一点：很明显，对于乘积中的每个偶数，`1*2*...*9*10`我们得到 的因数`2`。对于每第四个数字，我们得到第二个，依此类推。因此，`2`因素的数量`n!`是（地板在`n/2 + n/4 + n/8 + ...`哪里）。`/`我们对剩余的素数做同样的事情，因为有`O(n/logn)`小于 的素数`n`，并且我们`O(logn)`对每个素数都进行了运算，所以分解是线性的。

在实践中，我会更隐含地编码如下：

```
func Binom(n, k, mod int) int {
    coef := 1
    sieve := make([]bool, n+1)
    for p := 2; p <= n; p++ {
        // If p is not sieved yet, it is a prime number
        if !sieve[p] {
            // Sieve of Eratosthenes
            for i := p*p; i <= n; i += p {
                sieve[i] = true
            }
            // Calculate influence of p on coef
            for pow := p; pow <= n; pow *= p {
                cnt := n/pow - k/pow - (n-k)/pow
                for j := 0; j < cnt; j++ {
                    coef *= p
                    coef %= mod
                }
            }
        }
    }
    return coef
} 
```

这包括一个埃拉托色尼筛，因此运行时间`nloglogn`不是`n`预先计算素数或用更快的筛子筛分的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-28T07:06:19.587

算法是：

*   将基础分解为主要幂；142857 = 3^3×11×13×37
*   以每个素数为模计算结果
*   使用中国剩余定理组合结果。

* * *

计算`(n above k) mod p^q`：

资料来源：[http](http://www.dms.umontreal.ca/~andrew/PDF/BinCoeff.pdf) ://www.dms.umontreal.ca/~andrew/PDF/BinCoeff.pdf ，定理 1

定义为不可被除`(n!)_p`的数字的乘积`1..n``p`

定义`n_j`为`n`擦除`j`基数中的最低有效数字后`p`

定义`r`为`n`-`k`

定义`e_j`为添加时的进位数，`k+r`不计算从`j`最低位开始的进位，以基数计算`p`

定义`s`为`1`if`p=2 & q>=3`和`-1`else

然后`(n above k) mod p^q := p^e_0 * s^e_(q-1) * concatenate(j=d..0)( (n_j!)_p / ((k_j!)_p*(r_j!)_p) )`用连接的每一项计算结果的一个基数 p 位，最低`j`计算最低有效的非零数字。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T22:55:24.623

142857 的特别之处在于 7 * 142857 = 999999 = 10^6 - 1。这是由费马小定理产生的一个因子，a=10 和 p=7，产生模等价 10^7 == 10（mod 7 ）。这意味着您可以在大多数情况下以 999999 为模数，并通过在最后除以 7 来减少最终模数。这样做的好处是，对于 k=1,2,3,6，模除法在 10^k 形式的表示基础中非常有效。在这种情况下，您所做的就是将数字组加在一起；这是[淘汰九](http://en.wikipedia.org/wiki/Casting_out_nines)的概括。

只有当您有硬件以 10 为底的乘法时，这种优化才真正有意义。这真的是说，如果你必须用纸和铅笔来做这件事，它会很好用。由于这个问题最近出现在一个在线比赛中，我想这正是问题的由来。

# python - 从 python 使用 Win32 api

> ID：13106589
> 
> 赞同：0
> 
> 时间：2012-10-28T05:22:29.100
> 
> 标签：python, winapi

以下代码已在 activestate python 帮助文件中给出。此代码用于递归删除文件夹中的文件，然后删除文件夹本身。请指出其中的错误，因为我想使用 python 使用 win32 api

```
import win32con
import win32api
import os

def del_dir(path):
    for file_or_dir in os.listdir(path):
        if os.path.isdir(file_or_dir) and not os.path.islink(file_or_dir):
            del_dir(file_or_dir) #recursive call to function again
        else:
            try:
                os.remove(file_or_dir) #it's a file,delete is
            except:
                #probably failed because it is not a normal file
                win32api.SetFileAttributes(file_or_dir,win32con.FILE_ATTRIBUTE_NORMAL)
                os.remove(file_or_dir) #it's a file delete it

        os.rmdir(path)#delete the directory here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T08:35:23.693

您的程序的问题与 win32api 无关。它失败是因为每当您调用任何操作系统函数（os.remove、win32api.SetFileAttributes）时，您只传递部分名称（即“路径”之后的部分。将函数的第一行更改为：

```
def del_dir(path):
    for file_or_dir in os.listdir(path): 
```

改成：

```
def del_dir(path):
    for x in os.listdir(path):
        file_or_dir = os.path.join(path,x) 
```

其余的都是一样的。顺便说一句，这对于删除整个目录或递归遍历文件夹层次结构确实是一个糟糕的示例。使用 os.walk 获取简单的代码。

一般来说，win32api 和 win32con 工作得很好。打开一个 python shell 并尝试这个更简单的代码：

```
>>> import win32api
>>> import win32con
>>> win32api.MessageBox(0, "hello win32api", "win32api", win32con.MB_OK) 
```

# java - JTextFields 自动调整大小

> ID：13106591
> 
> 赞同：1
> 
> 时间：2012-10-28T05:23:18.057
> 
> 标签：java, swing, layout, layout-manager, gridbaglayout

我正在制作一个程序，该程序应该允许您输入文本，并且它将以计算机上的每种字体输入文本。这是加载字体时发生的屏幕截图： ![截图](../Images/b97227245bcc4e65a499976d1a075b85.png) 现在，我意识到除了 JTextField 的自动调整大小之外还有十亿个其他问题，但我想一次只专注于一件事。无论如何，当我在 JScrollPane 中向下滚动时，会发生以下情况： ![截图](../Images/cf248f33da1aad9e2a728aafec733848.png) 有人可以告诉我我必须用 GridBagConstraints 或 JTextFields 做什么来解决这个问题吗？这是一些代码，希望对您有所帮助-

```
 gbc.insets = new Insets(2, 5, 2, 5);
 gbc.gridx = 0;
 gbc.gridwidth = gbc.gridheight = 1;
 gbc.weightx = gbc.weighty = 1;
 gbc.anchor = GridBagConstraints.LINE_START; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T05:42:21.020

尝试添加`gbc.fill = GridBagConstraints.HORIZONTAL`以鼓励组件使用可用的水平空间。

更好的解决方案是使用`JList`.

我会将每个添加`Font`到 a`ListModel`并使用主文本，允许 a`ListCellRenderer`呈现它。

但这就是我

# ios - Flex 4.6 移动应用列表项目高度问题

> ID：13106592
> 
> 赞同：0
> 
> 时间：2012-10-28T05:23:27.553
> 
> 标签：ios, apache-flex, mobile, dpi, flex4.6

有没有办法动态更改移动空中应用程序（iOS）的 itemRenderer 列表中每一行之间的填充？

目前我正在使用条件 CSS 来检测设备的分辨率并相应地更改列表中的字体大小。但是，我似乎无法更改每个项目顶部或下方的填充。

您可以通过单击此处了解我的意思：

![应用程序模拟器](../Images/3d531fdf2d98e9c64043a87d1d6d79ee.png)

感谢您的所有帮助，如果这是一个愚蠢的问题，我们深表歉意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:58:30.383

您可以尝试设置（例如通过 CSS 或扩展它并为列表制作自定义项目渲染器）`paddingTop`和[LabelItemRenderer](http://opensource.adobe.com/svn/opensource/flex/sdk/trunk/frameworks/projects/mobilecomponents/src/spark/components/LabelItemRenderer.as)`paddingBottom`

# ruby-on-rails - 在 Rails 中使用 MongoID 保存二进制数据

> ID：13106598
> 
> 赞同：3
> 
> 时间：2012-10-28T05:25:52.887
> 
> 标签：ruby-on-rails, mongodb, mongoid

这似乎应该是简单和有效的。MongoDB / BSON 具有原生二进制类型，并且 Moped 驱动程序支持它。但是当我尝试在我的 rails 项目中创建脚手架时

```
rails g scaffold image png:binary source:string 
```

我得到这个模型：

```
class Image
  include Mongoid::Document
  field :png, type: Binary
  field :source, type: String
end 
```

这会产生此错误：

```
uninitialized constant Image::Binary 
```

使用 Rails 3.2.8 和 Mongoid 3.0.9。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-28T05:39:12.743

您将需要使用以下`Moped::BSON::Binary`类型：

```
class Image
  ...
   # mongoid version <= v3 
  field :png, type: Moped::BSON::Binary
   # mongoid version >= v4 
  field :png, type: BSON::Binary
end

i = Image.new
# mongoid version <= v3 
i.png = Moped::BSON::Binary.new(:generic, <image data> ) 

# mongoid version >= v4 
i.png = BSON::Binary.new(:generic, <image data> ) 
```

# ios - 我如何错误地构建这种日期格式？

> ID：13106600
> 
> 赞同：0
> 
> 时间：2012-10-28T05:26:04.890
> 
> 标签：ios

我几乎已经完成了这项工作，显然我已经完成了部分工作，因为时间几乎是正确的（比它应该的时间短了一个小时）

```
InputDate: Sat Oct 27 22:08:36 PDT 2012
Resulting Date:  2012-01-01 05:08:36 +0000
(Or:  Saturday, December 31, 2011 9:21 PM) 
```

这是我用来将字符串数据封装到 NSDate 中的代码：

```
NSDateFormatter *dateFormatter=[[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"EEE MMM dd HH:mm:ss zzz YYYY"];
NSDate *buildDate = [dateFormatter dateFromString:buildDateString]; 
```

换个说法：输入日期是被放入日期格式化程序的日期。结果日期只是日期格式化程序生成的 NSDate 的 NSLog。

我正在尝试获取外部生成的日期（由构建阶段生成，因为我希望构建时间戳在应用程序中可用）并将该字符串转换为 NSDate，然后我可以使用现有的 iOS 控件轻松输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T06:16:20.230

尝试设置`+0000`为`zzz`.

```
z~zzz:  (Specific GMT Timezone Abbreviation) 
zzzz:   (Specific GMT Timezone Name) 
Z:  +0000 (RFC 822 Timezone) 
```

请参阅[此链接](http://tahabebek.wordpress.com/2011/03/23/format-string-for-the-iphone-nsdateformatter/)以获取 dateformatter 中字符串的详细格式。希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T03:05:40.380

rmaddy 将正确答案添加为评论，但从未将其作为实际答案，以便我可以接受。关键是使用'yyyy'而不是'YYYY'

# php - 使用 PHP 生成 PDF

> ID：13106604
> 
> 赞同：1
> 
> 时间：2012-10-28T05:26:42.283
> 
> 标签：php, pdf, fpdf, zend-pdf, mpdf

> **可能重复：**
> [PHP 中最快的 PDF 生成？](https://stackoverflow.com/questions/4188366/fastest-pdf-generation-in-php)

我已经生成了一个动态实时表并将其存储在一个变量中。

虽然我做了功课，但我有点困惑，因为有不同的技术可以实现这一点，比如 MPDF、FPDF、Zend_PDF，我正在寻找有价值的建议来选择这些以满足我的要求：

我想要一个优化且省时的 PDF 库，它将采用包含 HTML 表代码的变量（生成这个表我的程序需要很多时间，因为有很多数据库事务和计算）。

这方面的教程将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T08:13:32.750

为什么不在 PHP 中使用 PDFLib？ [http://www.php.net/manual/en/ref.pdf.php](http://www.php.net/manual/en/ref.pdf.php) 单击每个函数以获取示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T08:10:25.117

您可以使用 dompdf 库使用 php 生成 pdf 文件。

有关 dompdf 库的更多文档，请参阅以下网址 [http://code.google.com/p/dompdf/](http://code.google.com/p/dompdf/)

它有一个库函数，它接受 HTML 字符串作为参数并将 HTML 内容呈现为 pdf 文件。

# jquery - 如何使用 jquery 从强元素中获取文本？

> ID：13106605
> 
> 赞同：0
> 
> 时间：2012-10-28T05:27:34.183
> 
> 标签：jquery

我有以下元素，需要获取选中输入复选框的强元素的文本值

```
<input class="inputCheckbox" tpye="checkbox"><strong>Testing</strong> 
```

我厌倦了这个但没有工作..

```
$(".inputCheckbox input:checked strong").text(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T05:31:47.837

您拼错了单词类型。

```
<input class="inputCheckbox" type="checkbox"><strong>Testing</strong> 
```

你可以试试，

```
$(".inputCheckbox input:checked").parent().find("strong").text(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T05:33:11.607

问题是`strong`元素不在元素内部`input`，而是在它旁边。您在这里有几个选择。最简单的方法是给`strong`元素一个类名或 id。另一种选择是使用 undefined 所建议的兄弟姐妹。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-10-02T11:19:31.547

找到`strong`这样的元素

```
<p>Hello How are you <strong>Chandan </strong></p> 
```

试试这个：

```
$(this).find("strong").text(); 
```

输出：

> 钱丹

# bash - 使用 bash 进行 SSH 登录并期待

> ID：13106607
> 
> 赞同：-1
> 
> 时间：2012-10-28T05:28:05.517
> 
> 标签：bash, expect

我每天都必须一遍又一遍地连接到许多设备......我可以用 bash 自动化它并期望这个脚本：

```
#!/usr/bin/expect
spawn  ssh hostname -l username
expect "password:"
send "secret\n"
interact 
```

大多数设备都需要“root”作为登录名，所以上面的脚本可以很好地解决这个问题。我想修改上面的脚本尝试登录一次，如果失败，切换到另一个用户名并提示我输入密码。那可能吗？

我知道密钥，以及脚本中密码的不良做法，这对我来说并不重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T05:47:10.360

The [man page](http://www.tcl.tk/man/expect5.31/expect.1.html) has tons of great examples.

```
expect {
  "string that indicates success" {
  }
  "string that indicates failure" {
    close
    stty -echo
    send_user "Enter password: "
    expect_user -re "(.*)\n"
    send_user "\n"
    send "$expect_out(1,string)\r"
    stty echo
  }
}
interact 
```

# apache - 如何安装 Apache 模块

> ID：13106610
> 
> 赞同：0
> 
> 时间：2012-10-28T05:29:03.870
> 
> 标签：apache, whm

我正在使用 Apache 2.2.23，我正在尝试安装位于此处的 mod_authz_host 模块： [http ://httpd.apache.org/docs/2.2/mod/mod_authz_host.html](http://httpd.apache.org/docs/2.2/mod/mod_authz_host.html)

当我在 WHM 中运行 Easy Apache 时，此模块不在详尽的选项列表中。有没有办法安装这个？

任何帮助是极大的赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:45:18.100

EasyApache 编译 Apache 的方式，mod_rewrite 功能直接编译到 Apache 中，不会出现在 Apache 上加载的模块列表中。如果您正在运行 cPanel/WHM，则您在 Apache 中有 mod_rewrite 功能

# jquery - 更改 jquery 拖放列表中前 10 个列表项的颜色

> ID：13106613
> 
> 赞同：1
> 
> 时间：2012-10-28T05:29:24.530
> 
> 标签：jquery, jquery-ui

我有一个 20 项的清单。我正在使用 jquery 拖放来允许用户对项目列表进行排序。我希望列表中的前 10 个项目保持相同的颜色，比如说黄色，因为这些项目已重新排列。例如，如果将#19 的项目拖到前十名内，则#10 的项目将被推到#11，而应该为黄色的项目将是#的 1,2,3,4,5,19 ,6,7,8,9。

无论哪个顺序，前十名都应该保持黄色。其余的只是黑色

我不知道该怎么做。有人可以指出我正确的方向吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T05:58:42.600

您可以在删除元素时添加回调函数并将前十项的背景设置为黄色。有关放置事件的详细信息，请参阅下面的链接 [http://api.jqueryui.com/draggable/#event-stop](http://api.jqueryui.com/draggable/#event-stop) 回调事件看起来像

```
// pseudo code
function() {
  all_items.each(e, i) {
    if(i<10) set_bg(yelow, e);
    else set_bg(black, e);
  }
} 
```

看到这个，我试了一下，它只会放一个警告框，试着在这里做上面的逻辑

```
<script>
$( "#draggable" ).draggable({
    stop: function() {
        // your code goes here   
        alert('stop event')
    }
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T06:11:07.987

您没有告诉我们您的 html，所以我不得不猜测您使用的是 html 列表。排序停止时，您必须获取元素的位置并决定分配哪种颜色

[http://api.jqueryui.com/sortable/#event-stop](http://api.jqueryui.com/sortable/#event-stop)

和使用[`index`](http://docs.jquery.com/Core/index)方法

工作示例：http: [//jsfiddle.net/txm9y/](http://jsfiddle.net/txm9y/)

```
$( "#sortable" )
    .sortable({
        stop: function(event, ui){
            $(this).trigger("markTopTen");
        }
    })
    .disableSelection()
    .bind("markTopTen", function() {
        $(this).find("li")
            .removeClass("topTen")
            .each(function(index){
            if(index < 10)
                $(this).addClass("topTen");
        });
    })
    .trigger("markTopTen"); 
```

开始排序。前十名将保持黄色，而其他人则为黑色。

# vb.net - Windows Store App Visual Basic 将前景设置为 RGB/aRGB 值

> ID：13106619
> 
> 赞同：0
> 
> 时间：2012-10-28T05:29:58.583
> 
> 标签：vb.net, xaml, windows-8, windows-store-apps

我正在尝试在我的 Windows 应用商店应用程序中使用 Visual Basic 在运行时更改文本块的前景色。但是，我不知道正确的方法。请协助。

我写的是：

```
TextBlock1.Foreground = Windows.UI.Colors.Red 
```

它说“'Windows.UI.Color' 类型的值不能转换为'Windows.UI.Xaml.Media.Brush'。”

我已经尝试了所有这些：

```
TextBlock1.Foreground = "Red"
TextBlock1.Foreground = "#FFC8C8C8"
TextBlock1.Foreground = &HFF0000FF&
TextBlock1.Foreground = &H0000FF& 
```

我想我显然错过了正确的方法。任何帮助表示赞赏。（：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T09:17:11.680

你需要给它分配一个`SolidColorBrush`不`Color`

```
Dim redBrush As New SolidColorBrush
redBrush.Color = Windows.UI.Colors.Red
TextBlock1.Foreground = redBrush 
```

# c++ - 在 C++ 中使用 fstream 读取和附加文件

> ID：13106621
> 
> 赞同：0
> 
> 时间：2012-10-28T05:30:16.403
> 
> 标签：c++, file, append, fstream

我正在尝试使用 fstream 读取文件。然后当我到达最后我附加文件并写一些人员文件

```
abc 
```

我写了示例代码

```
#include<iostream>
#include<fstream>
#include<queue>

using namespace std;
int main(int argc, char **argv){
    fstream *binf;
    binf=new fstream("t.txt", ios::out|ios::in|ios::app);
    cout<<"EOF"<<EOF<<endl;
    while(true){
        cout<<"before peek"<<endl;
        cout<<"binf->tellg:"<<binf->tellg()<<endl;
        cout<<"binf->tellp:"<<binf->tellp()<<endl;
        cout<<"binf->peek()::int=("<<(int)binf->peek()<<")::char=("<<(char)binf->peek()<<")"<<endl;
        cout<<"after peek"<<endl;
        cout<<"binf->tellg:"<<binf->tellg()<<endl;
        cout<<"binf->tellp:"<<binf->tellp()<<endl;
        char c;
        if(binf->peek()==EOF){
            cout<<"file is not good"<<endl;
            break;
        }
        binf->get(c);
    }
    cout<<"binf->tellg:"<<binf->tellg()<<endl;
    cout<<"binf->tellp:"<<binf->tellp()<<endl;
    binf->seekg(3);
    binf->seekp(3);
    cout<<"binf->tellg:"<<binf->tellg()<<endl;
    cout<<"binf->tellp:"<<binf->tellp()<<endl;
    binf->put('H');
    cout<<"binf->tellg:"<<binf->tellg()<<endl;
    cout<<"binf->tellp:"<<binf->tellp()<<endl;
    binf->seekg(4);
    char c;
    binf->get(c);
    cout<<"c:"<<c<<endl;
    binf->clear();
    binf->close();
    delete binf;
    return 0;
} 
```

这是我运行此代码得到的输出

```
EOF-1
before peek
binf->tellg:0
binf->tellp:0
binf->peek()::int=(97)::char=(a)
after peek
binf->tellg:0
binf->tellp:0
before peek
binf->tellg:1
binf->tellp:1
binf->peek()::int=(98)::char=(b)
after peek
binf->tellg:1
binf->tellp:1
before peek
binf->tellg:2
binf->tellp:2
binf->peek()::int=(99)::char=(c)
after peek
binf->tellg:2
binf->tellp:2
before peek
binf->tellg:3
binf->tellp:3
binf->peek()::int=(10)::char=(
)
after peek
binf->tellg:3
binf->tellp:3
before peek
binf->tellg:4
binf->tellp:4
binf->peek()::int=(-1)::char=(ÿ)
after peek
binf->tellg:-1
binf->tellp:-1
file is not good
binf->tellg:-1
binf->tellp:-1
binf->tellg:-1
binf->tellp:-1
binf->tellg:-1
binf->tellp:-1
c: 
```

我要做的就是修复文件并在最后写入，但是，每当我在文件末尾看到 EOF 时，即使使用 peek() 文件也不再适合使用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T05:33:52.633

当您到达文件末尾时，您会`fstream`进入*错误状态*。当它处于错误状态时，除非您清除错误状态，否则将无法正常工作。所以你需要这个

```
 if(binf->peek()==EOF){
        cout<<"file is not good"<<endl;
        binf->clear(); // clear the error state
        break;
   } 
```

您不需要`fstream`在关闭它之前清除它，这没有任何作用。

顺便说一句，很好的调试技术，但是如果你学会使用合适的调试器，你会发现这更容易。

# javascript - jQuery下拉仅样式化一次，刷新其正常下拉

> ID：13106624
> 
> 赞同：2
> 
> 时间：2012-10-28T05:31:09.020
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile

尝试在单击“添加里程并打开它”后在此处的表单上实现“下拉​​”效果

它似乎只发生在第一次加载时，如果您随时刷新或返回页面，该死的东西会变成一个丑陋的正常非 jquery 下拉菜单。我假设它是因为我使用 javascript 来填充我的选择（下拉）。任何帮助将不胜感激......`

.js

```
// Create select element with options.
function makeRunRecord() {
    var formTag = document.getElementsByTagName('form'),
    selectList = ge('select'),
    makeSelect = document.createElement('select');
    makeSelect.setAttribute("id", "styles");
    makeSelect.setAttribute("name", "styles");
    makeSelect.setAttribute("class", "required select");
    makeSelect.setAttribute("data-native-menu", "false");
    var makePlace = document.createElement('option');
    makePlace.setAttribute("data-placeholder", "true");
    makePlace.setAttribute("value", "");
    makeSelect.appendChild(makePlace);
    for (var i=0, j=runningStyles.length; i<j; i++) {
        var makeOption = document.createElement('option');
        var optText = runningStyles[i];
        makeOption.setAttribute("value", optText);
        makeOption.innerHTML = optText;
        makeSelect.appendChild(makeOption);
    }
    selectList.appendChild(makeSelect);
};   
// Call Functions
makeRunRecord();    
}); 
```

.html

```
<li><div id="select"><label for="rStyle">Choose Run Style*</label></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:59:51.697

看起来您正在尝试`makeRunRecord()`在 jQuery Mobile 完成页面增强之前执行。要在 jqm 完成增强后立即执行代码，请使用[`pageinit`event](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)。

它看起来像这样：

```
$( '#additem' ).live( 'pageinit',function(event){
  makeRunRecord();
}); 
```

# python - sendEmail 的密码保护

> ID：13106630
> 
> 赞同：2
> 
> 时间：2012-10-28T05:31:59.157
> 
> 标签：python, email, passwords, email-client

我正在从外部 SMTP 客户端编写 sendEmail 脚本。我正在使用我的 gmail 帐户发送电子邮件。

在这个脚本中，我需要提供我的 gmail 密码和用户名。我的问题是如何为此类程序加密/保护我的密码。

我认为在代码中提供直接密码是不好的做法。但是，如果我将使用任何类型的加密，它将如何适用于第三方客户端。

任何指针都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T06:24:15.957

python标准库中有一个名为[getpass的模块。](http://docs.python.org/library/getpass.html)

如果您不厌倦每次运行脚本时都输入密码，我建议您使用它来处理密码。

您还可以通过第三个库访问系统的密钥环服务，例如[keyring](http://pypi.python.org/pypi/keyring)。

# ruby-on-rails-3 - 在 Rails 中设置 Resque

> ID：13106631
> 
> 赞同：1
> 
> 时间：2012-10-28T05:32:13.997
> 
> 标签：ruby-on-rails-3, resque

第一次在 Rails 中设置 Resque 时，我遇到了一个错误。在最终部署到 Heroku 之前，我正在使用 Foreman 和 Procfile 在本地启动我的应用程序。当我尝试启动我的应用程序时，Redis 和我的 PostgreSQL 数据库已经在运行。错误是：

```
$ foreman start
...
23:24:32 resque.1 | rake aborted!
23:24:32 resque.1 | No such file to load -- bootstrap_flash_helper
23:24:32 resque.1 | Tasks: TOP => resque:work => resque:preload
23:24:32 resque.1 | (See full trace by running task with --trace)
23:24:32 resque.1 | exited with code 1
... 
```

我的应用确实使用了 Bootstrap，但我没有在任何使用 Rescue 的类中明确要求它。我的 Rakefile 和 Procfile 是：

**档案**

```
web: bundle exec rails server -p $PORT
resque: env TERM_CHILD=1 RESQUE_TERM_TIMEOUT=10 bundle exec rake resque:work 
```

**耙文件**

```
require File.expand_path('../config/application', __FILE__)
require 'resque/tasks'

task "resque:setup" do
  ENV['QUEUE'] = '*'
end

task "jobs:work" => "resque:work"

MyCoolApp::Application.load_tasks 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T03:23:08.583

只需使用

`bundle exec rake environment resque:work`

这与`task "resque:preload" => :environment`.

运行任务时需要当前环境：p

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T05:32:13.997

我不完全理解这一点，但想记录它以防它帮助某人。我需要这条线：

```
task "resque:preload" => :environment 
```

在 require 语句之后的我的 Rakefile 中。如果有人知道这是如何工作的，请澄清！

# biztalk - 工件已存在部署错误 - 如何删除未命名的应用程序工件？

> ID：13106633
> 
> 赞同：2
> 
> 时间：2012-10-28T05:32:49.647
> 
> 标签：biztalk, biztalk-2010, biztalk-deployment

我正在为 BizTalk 2010 开发一个快速演示应用程序，并在项目属性中未提供应用程序名称的情况下部署了该应用程序。我花了一分钟才弄清楚为什么应用程序没有出现在 BizTalk 管理控制台中，但是一旦我这样做了，我就为应用程序添加了一个名称并尝试重新部署。现在，我收到一条错误消息，告诉我其中一个工件（架构）已部署。我看到管理控制台的集合中存在模式`< AllArtifacts >`，但我不知道如何删除它们。我无法直接在控制台中删除它们，并且由于我最初部署它时应用程序没有名称，因此它没有在控制台中列出，所以我不知道如何删除它。

我可以在服务器上的 BizTalk 目录中看到一些工件，但我不愿意开始手动删除东西。

建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T10:08:08.783

如果您的项目在部署到本地 BizTalk 时没有名称，则所有工件都将部署到*默认*BizTalk 项目中，该项目[通常是 BizTalk Application 1](http://msdn.microsoft.com/en-us/library/aa559168.aspx#BKMK_Step_by_step)。

您还可以通过查看管理控制台`Application`中的架构列来检查您的工件被部署到了哪个应用程序。`<All Artifacts>`

然后，您可以进入拥有您的模式（例如`BizTalk Application 1`）的项目，在模式文件夹下，右键单击其中一个模式并选择“删除”。这将取消部署包含模式的整个程序集。您可以对任何其他程序集执行相同的操作，例如包含管道、编排等，然后在 Visual Studio 的“部署属性”选项卡下设置项目名称后重新部署您的项目。

您可能需要重新启动主机实例才能使更改生效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:41:11.447

过去我不得不使用 BTSTask，当时事情真的搞砸了。

[http://msdn.microsoft.com/en-us/library/aa561331.aspx](http://msdn.microsoft.com/en-us/library/aa561331.aspx)

# google-maps - 使用谷歌地图反向地理编码

> ID：13106642
> 
> 赞同：-1
> 
> 时间：2012-10-28T05:35:29.850
> 
> 标签：google-maps, google-maps-api-3

有人可以告诉我为什么我在运行此功能时收到“未定义地理编码器”错误。我不明白它为什么不能从 box1 和 box2 传递值。我正在查看文本框，它们定义了值！

```
function codeLatLng() {

var lat = document.getElementById('box1').value;
var lng = document.getElementById('box2').value;

var latlng = new google.maps.LatLng(lat, lng);
geocoder.geocode({'latLng': latlng}, function(results, status) {
  if (status == google.maps.GeocoderStatus.OK) {
    if (results[1]) {
    document.getElementById('box3').value = results[1].formatted_address;  
    } 
    else {
      alert("No results found");
    }
  } else {
    alert("Geocoder failed due to: " + status);
  }
 });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T07:05:43.990

如果您收到一条错误消息，显示“未定义地理编码器”，这往往意味着未定义变量/对象“地理编码器”。您没有提供任何初始化它的代码，但您没有提供所有代码。

您的代码中的“var geocoder = new google.maps.Geocoder()”在哪里？

# html - 我有一个 html 页面，它的代码布局很糟糕，无法阅读有关如何清理它的任何建议？

> ID：13106643
> 
> 赞同：-4
> 
> 时间：2012-10-28T05:35:32.313
> 
> 标签：html, styles

我想通过自动化来清理它，而不是手动排列每个 div 标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T05:48:09.203

[This might be what you're after.](http://infohound.net/tidy/)

That is of course if your editor doesn't have an HTML cleanup function already. And it probably does.

Also, it took me pretty much no time at all to enter "html clean up" into Google and find that program. Asking this question must have taken far longer. Just think about that.

# r - 在 data.table 中使用 `:=` 对 R 中两列的值求和，忽略 NA

> ID：13106645
> 
> 赞同：21
> 
> 时间：2012-10-28T05:35:47.767
> 
> 标签：r, sum, data.table

我有一个我认为与使用 data.table 和`:=`函数有关的非常简单的问题。我认为我不太了解他们的行为，`:=`并且经常遇到类似的问题。

这是一些示例数据

```
 mat <- structure(list(
              col1 = c(NA, 0, -0.015038, 0.003817, -0.011407), 
              col2 = c(0.003745, 0.007463, -0.007407, -0.003731, -0.007491)), 
              .Names = c("col1", "col2"), 
              row.names = c(NA, 10L), 
              class = c("data.table", "data.frame")) 
```

这使

```
> mat
         col1      col2
 1:        NA  0.003745
 2:  0.000000  0.007463
 3: -0.015038 -0.007407
 4:  0.003817 -0.003731
 5: -0.011407 -0.007491 
```

我想创建一个名为 col3 的列，它给出 col1 和 col2 的总和。如果我使用

```
mat[,col3 := col1 + col2]

#        col1      col2      col3
#1:        NA  0.003745        NA
#2:  0.000000  0.007463  0.007463
#3: -0.015038 -0.007407 -0.022445
#4:  0.003817 -0.003731  0.000086
#5: -0.011407 -0.007491 -0.018898 
```

然后我得到第一行的 NA，但我希望 NA 被忽略。所以我尝试了

```
mat[,col3 := sum(col1,col2,na.rm=TRUE)]

#        col1      col2      col3
#1:        NA  0.003745 -0.030049
#2:  0.000000  0.007463 -0.030049
#3: -0.015038 -0.007407 -0.030049
#4:  0.003817 -0.003731 -0.030049
#5: -0.011407 -0.007491 -0.030049 
```

这不是我所追求的，因为它给了我 col1 和 col2 的所有元素的总和。我想我不太明白`:=`......我怎样才能得到 col1 和 col2 元素的总和而忽略 NA 值？

不确定这是否相关，但这是我的 sessionInfo

```
> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_AU.UTF-8/en_AU.UTF-8/en_AU.UTF-8/C/en_AU.UTF-8/en_AU.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] data.table_1.8.3 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-28T06:02:59.430

这是标准`R`行为，与 `data.table`

添加任何东西`NA`都会返回`NA`

```
NA + 1
## NA 
```

`sum`将返回一个数字

如果你想`1 + NA`退货`1`

那么你将不得不运行类似的东西

```
mat[,col3 := col1 + col2]
mat[is.na(col1), col3 := col2]
mat[is.na(col2), col3 := col1] 
```

处理when `col1`or `col2`are`NA`

* * *

## 编辑 - 一个更简单的解决方案

你也可以使用 rowSums，它有一个`na.rm`参数

```
mat[ , col3 :=rowSums(.SD, na.rm = TRUE), .SDcols = c("col1", "col2")] 
```

`rowSums`是你想要的（根据定义，`rowSums`包含`col1`和的矩阵的`col2`，删除`NA`值

（@JoshuaUlrich 建议将此作为评论）

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-28T06:03:30.260

这不是缺乏对 data.table 的理解，而是缺乏对 R 中矢量化函数的理解。您可以定义一个二元运算符，其在缺失值方面的行为与“+”运算符不同：

```
 `%+na%` <- function(x,y) {ifelse( is.na(x), y, ifelse( is.na(y), x, x+y) )}

 mat[ , col3:= col1 %+na% col2]
#-------------------------------
        col1      col2      col3
1:        NA  0.003745  0.003745
2:  0.000000  0.007463  0.007463
3: -0.015038 -0.007407 -0.022445
4:  0.003817 -0.003731  0.000086
5: -0.011407 -0.007491 -0.018898 
```

You can use mrdwad's comment to do it with `sum(... , na.rm=TRUE`):

```
mat[ , col4 := sum(col1, col2, na.rm=TRUE), by=1:NROW(mat)] 
```

# tsql - TSQL DDL 约束错误：“第 12 行：'(' 附近的语法不正确。”

> ID：13106647
> 
> 赞同：0
> 
> 时间：2012-10-28T05:35:59.957
> 
> 标签：tsql, sql-server-2005, ddl

我正在尝试创建一个表。这是创建 DDL。在 SQL Server 2005 MSDE 上运行此程序时遇到错误。我不知道为什么 - 它在 2008/2012 年运行良好。

```
CREATE TABLE [dbo].[CuCompanyHolidays](
    [HolidayID] [int] IDENTITY(1,1) NOT NULL,
    [HolidayName] [varchar](255) NULL,
    [HolidayDate] [datetime] NULL,
    [PartOff] [float] NULL,
    [CreateDate] [datetime] NULL,
    [LastUpdate] [datetime] NULL,
 CONSTRAINT [PK_cuCompanyHolidays] PRIMARY KEY CLUSTERED 
(
    [HolidayID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO 
```

> 消息 170，级别 15，状态 1，第 12 行第 12 行：'(' 附近的语法不正确。

这是错误突出显示的行：

> ）与（PAD_INDEX = OFF，STATISTICS_NORECOMPUTE = OFF，IGNORE_DUP_KEY = OFF，ALLOW_ROW_LOCKS = ON，ALLOW_PAGE_LOCKS = ON）在主要

我该如何解决这个问题？

# ios - 自定义 MKPinAnnotation查看图片

> ID：13106649
> 
> 赞同：1
> 
> 时间：2012-10-28T05:36:35.743
> 
> 标签：ios, mapkit

我遇到了一个奇怪的问题，即最初的一组图钉没有显示自定义图像。

在我的

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation 
```

方法我设置图片如下：

```
pushPin.image = [UIImage imageNamed:@"shopping_map_pin"]; 
```

但是，对于第一组引脚，未设置此图像。如果我以相同的方法设置图钉颜色，则会应用但不会应用图像。

这是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:17:02.393

问题是，是的，我使用的是 MKPinAnnotationView 而不是 MKAnnotationView。MKAnnotationView 更通用，允许加载自定义图像。话虽如此，似乎当一个视图被回收时，一个 MKPinAnnotationView 将使用它最初分配的图像。

# matlab - 如何从 avi 文件中画线和获取角度？

> ID：13106651
> 
> 赞同：2
> 
> 时间：2012-10-28T05:37:03.293
> 
> 标签：matlab, angle

我有一个人走路的 avi 文件。我把他变成了骷髅。我想最终测量从他的胸部到手臂和臀部到脚的角度。有没有一种功能或一种好方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T06:03:13.850

使用[霍夫变换](http://www.mathworks.com/help/images/analyzing-images.html#f11-27827)来检测骨架的线条，那么很容易得到角度......这个[讨论](https://groups.google.com/forum/?fromgroups=#!topic/openni-dev/fOaxKHQ8dqk)也很有用......

# android - 解析本地xml android

> ID：13106654
> 
> 赞同：1
> 
> 时间：2012-10-28T05:37:42.680
> 
> 标签：android, xml, parsing

我只想解析我的 java 文件旁边或 res/xml 文件夹中的 XML。我读了很多博文，但它变得更加混乱！每个人都只需使用 URL 调用解析函数！就像这样

```
Document doc = db.parse(new InputSource(url.openStream())); 
```

我有这部分代码，但我不知道如何使它工作。

```
Document doc = db.parse("What Should I pass here"); 
```

我试过 R.xml.books 它是一个整数，这个函数需要一个 Inputstream 我应该如何使用这个 R.xml.books ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T05:59:52.163

尝试[openRawResource](http://developer.android.com/reference/android/content/res/Resources.html#openRawResource%28int%29)。

```
InputStream is = getResources().openRawResource(R.xml.books);
Document doc = db.parse(is); 
```

你的问题很难理解。良好的英语和大量描述性信息对获得答案大有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T05:45:52.043

我不确定您要问的两个问题中的哪一个：

1) 问：如何在 Android 上解析 XML？

我推荐使用 Android SDK 内置的 XmlPullParser：

*   [http://developer.android.com/training/basics/network-ops/xml.html](http://developer.android.com/training/basics/network-ops/xml.html)

*   [http://www.vogella.com/articles/AndroidXML/article.html](http://www.vogella.com/articles/AndroidXML/article.html)

2) 问：我在哪里可以找到包含在我的 .apk 中的文件？

最好的地方是把它放在你的“资产”目录中：

*   [http://www.itwizard.ro/android-phone-installing-assets-how-to-60.html](http://www.itwizard.ro/android-phone-installing-assets-how-to-60.html)

# c++ - MinGW 未找到 C++ std::vector.data

> ID：13106657
> 
> 赞同：1
> 
> 时间：2012-10-28T05:38:58.407
> 
> 标签：c++, mingw

我已经能够使用以下 C++ 代码使用 OpenGL 的 glVertexPointer 函数：

```
glVertexPointer(3, GL_DOUBLE, 0, myMeasuredPoints.data()); 
```

myMeasuredPoints 是一个包含 double 类型元素的 C++ 向量。用 Visual C++ 编译这段代码时，完全没有问题。但是，在使用 MinGW 进行编译时，出现以下错误：

```
error: 'class std::vector<double, std::allocator<double>' has no member named 'data' 
```

奇怪的是，我在代码中调用诸如 myMeasuredPoints.push_back() 之类的函数将值推送到向量上的任何其他地方都没有收到此错误。这些其他实例都是在使用 .data() 函数之前出现的，因此它不仅仅是代码在到达其他实例之前崩溃的情况。

有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T05:40:49.830

该`data`函数是在 C++11 中添加的。确保您使用`-std=c++0x`or编译`-std=c++11`并拥有包含该功能的 MinGW 版本。

如果这不可能，您可以使用通常的 C++03 变体：

```
&myMeasuredPoints[0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T05:41:42.887

如果您的编译器不支持 C++11，那么您可以使用

```
&myMeasuredPoints[0] 
```

# c++ - 自定义 Lexer 的解析器问题

> ID：13106660
> 
> 赞同：0
> 
> 时间：2012-10-28T05:39:16.913
> 
> 标签：c++, rdbms, lexer, parser-generator

我正在寻求有关自定义构建的 Lexer 类的帮助，并使用它来解析输入。我们的教授为我们的项目提供了一些骨架代码，我们必须使用它。我的问题是，我们需要能够一次调用多个函数来对表进行排序并合并/排序单独表的列。例如，我们的输入将类似于：

> 显示 <'file_name> 按 <'column2> 排序

其中 'display' 和 'sortedby' 是关键字排序，column2 将按数字或字母顺序排序 - 取决于内容。

我们得到了用于排序的算法，而我当前的问题不在于它的实现，而是能够让我们的 Lexer/Parser 读取多个输入。目前，我只能让“显示”位工作。更多的只是吐回一条错误消息。

我查看了代码，尝试更改一些逻辑 - 将语句从 true 切换为 false，交换 && 和 ||，甚至尝试了一些 if-else 语句，但没有运气。

我真的可以使用一些建议！我们给出的一些代码是原始格式：

词法分析器.h：

```
#ifndef _LEXER_H
#define _LEXER_H
#include <string>

enum token_types_t { 
IDENT,  // a sequence of alphanumeric characters and _, starting with alpha
TAG, // sequence of characters between < >, no escape
ENDTOK, // end of string/file, no more token
ERRTOK  // unrecognized token
};

struct Token {
token_types_t type;
std::string value;
// constructor for Token
Token(token_types_t tt=ENDTOK, std::string val="") : type(tt), value(val) {}
};

class Lexer {
public:
// constructor
Lexer(std::string str="") : input_str(str), cur_pos(0), in_err(false), 
    separators(" \t\n\r") { }

//modifiers 
void set_input(std::string); // set a new input, 
void restart();              // move cursor to the beginning, restart

Token next_token();    // returns the next token
bool has_more_token(); // are there more token(s)?

private:
std::string input_str;  // the input string to be scanned
size_t      cur_pos;    // current position in the input string
bool        in_err;     // are we in the error state?
std::string separators; // set of separators; *not* the best option!
};
#endif 
```

词法分析器.cpp：

```
#include "Lexer.h"
#include <iostream>
using namespace std;

Token Lexer::next_token() {
Token ret;
size_t last;

if (in_err) {
    ret.type = ERRTOK;
    ret.value = "";
    return ret;
}

// if not in error state, the default token is the ENDTOK
ret.type = ENDTOK;
ret.value = "";

if (has_more_token()) {
    last = cur_pos; // input_str[last] is a non-space char
    if (input_str[cur_pos] == '<') {
        cur_pos++;
        while (cur_pos < input_str.length() && input_str[cur_pos] != '>')
            cur_pos++;
        if (cur_pos < input_str.length()) {
            ret.type = TAG;
            ret.value = input_str.substr(last+1, cur_pos-last-1);
            cur_pos++; // move past the closing "
        } else {
            in_err = true;
            ret.type = ERRTOK;
            ret.value = "";
        }
    } else {
        while (cur_pos < input_str.length() &&
               separators.find(input_str[cur_pos]) == string::npos &&
               input_str[cur_pos] != '<') {
            cur_pos++;
        }
        ret.type  = IDENT;
        ret.value = input_str.substr(last, cur_pos-last);
    }
}
return ret;
}

void Lexer::set_input(string str) {
input_str = str;
restart();
}

bool Lexer::has_more_token() {
while (cur_pos < input_str.length() && 
       separators.find(input_str[cur_pos]) != string::npos) {
    cur_pos++;
}
return (cur_pos < input_str.length());
}

void Lexer::restart() {
cur_pos = 0;
in_err = false;
} 
```

我们的解析器（更大的 .cpp 文件的一部分）：

```
bool parse_input(Lexer lexer, string& file_name) {    
Token file_name_tok;

if (!lexer.has_more_token() || 
    (file_name_tok = lexer.next_token()).type != TAG)
    return false;

if  (lexer.has_more_token())
    return false;

file_name = file_name_tok.value;
return true;
} 
```

显示功能（与解析器相同的 .cpp 文件的一部分）：

```
void display(Lexer cmd_lexer) {
string file_name, line;

if (!parse_input(cmd_lexer, file_name)) {
    error_return("Syntax error: display <filename>");
    return;
}

ifstream ifs(file_name.c_str());
string error_msg;
if (ifs) {
       if (!is_well_formed(ifs, error_msg)) {
        error_return(error_msg);
    } else {
            ifs.clear();           
        ifs.seekg(0, ios::beg); 
        print_well_formed_file(ifs);
    }
    while (ifs.good()) {
  getline (ifs, line);
  cout << line << endl;
}

} else {
    error_return("Can't open " + file_name + " for reading");
}
ifs.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T06:11:43.103

根据对我的评论的回答，这些是我解决问题的方法：

*   如果`display`命令应该读取源文件并解析它，您可以通过堆栈来实现它。每当`display`找到并解析指令时，您就将一个新的词法分析器实例压入堆栈。将堆栈顶部用于“当前”词法分析器。

*   如果该`display`命令应该读取并在与实际解析无关的文件上执行某些操作，则考虑将指令存储为固定格式的中间格式，并在完成解析后“执行”此中间格式。这是几乎*所有*现代脚本语言的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T05:47:16.203

Seems easy enough. To read more than one input you need more than one Lexer/Parser. Just create one for each input you have to read.

# c# - 以特定格式序列化列表

> ID：13106665
> 
> 赞同：0
> 
> 时间：2012-10-28T05:40:55.693
> 
> 标签：c#, xml, xml-serialization

> **可能重复：**
> [如何重命名序列化对象列表后生成的 <ArrayOf> XML 属性](https://stackoverflow.com/questions/3129001/how-to-rename-arrayof-xml-attribute-that-generated-after-serializing-list-of-o)

这应该很简单，但我在这里遗漏了一些东西。序列化我的课程时，我需要以下格式的输出 xml。

```
<items>
 <item id="1" name="John">
 <item id="2" name="Peter">
 <item id="3" name="Shane">
<items> 
```

这是课程：

```
public class Item
    {
        [XmlAttribute]
        public string Id;
        [XmlAttribute]
        public string Name;
    } 
```

这是我的测试代码：

```
var items = new List<Item>();
            for (int i = 0; i < 4; i++)
            {
                var item = new Item();
                item.Id = i.ToString();
                item.Name = "Jeff" + " - " + i.ToString();
                items.Add(item);
            }
            Ser(items);

static void Ser(object o)
        {
            XmlSerializer x = new XmlSerializer(o.GetType());

            var xns = new XmlSerializerNamespaces();
            xns.Add(string.Empty, string.Empty);

            XmlWriterSettings settings = new XmlWriterSettings();
            settings.Indent = true;
            settings.OmitXmlDeclaration = true;
            XmlWriter writer = XmlWriter.Create(Console.Out, settings);

            x.Serialize(writer, o, xns);
            Console.WriteLine();
        } 
```

我得到的输出是：

```
<ArrayOfItem>
  <Item Id="0" Name="Jeff - 0" />
  <Item Id="1" Name="Jeff - 1" />
  <Item Id="2" Name="Jeff - 2" />
  <Item Id="3" Name="Jeff - 3" />
</ArrayOfItem> 
```

我想用“Items”替换“ArrayOfItem”。另外，为什么我看到附加了“ArrayOf”？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T05:54:24.307

当你得到`ArrayOfItem`type of `List<Item>`which is `Array`of type时，你得到了`Item`。当您对 xml 反序列化程序进行反序列化时，这是标准的，它将生成 type 的数组`Item`。您可以`Item`为这样的格式序列化个人，但仍然不一样。

如果您序列化单个项目，您将获得

```
 <Item Id="0" Name="Jeff - 0" />
  <Item Id="1" Name="Jeff - 1" />
  <Item Id="2" Name="Jeff - 2" />
  <Item Id="3" Name="Jeff - 3" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T06:06:48.890

为什么不使用**linq2Xml** ..它既简单又酷

```
XElement doc=new XElement("Items");

foreach(var item in items)
{
    doc.Add(
        new XElement("Item",
        new XAttribute("Id",item.Id),new XAttribute("Name",item.Name)
           )
    );
}

doc.ToString();//your xml 
```

**输出**：

```
<items>
 <item id="1" name="John">
 <item id="2" name="Peter">
 <item id="3" name="Shane">
<items> 
```

# c++ - 未找到 Xcode 4.5 和 C++11 标头

> ID：13106669
> 
> 赞同：1
> 
> 时间：2012-10-28T05:41:42.213
> 
> 标签：c++, xcode, c++11

例如，如果我包含 'chrono' 或 'type_traits' 它无法找到标题并给我一个错误，但如果我使用 lamdas 或 auto/decltype 它编译得很好。我正在使用带有标志的 Xcode 4.5.1，C++ Language Dialect=C++11[-std=c++11] 和 C++ Standard Library = libc++[LLVM C++ standard library with C++11 support]

关于为什么找不到较新的头文件的任何帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T03:39:36.733

需要更新 xcode。Xcode 还没有完全更新。

# java - 为什么我的数组没有被对象填充/显示？

> ID：13106678
> 
> 赞同：0
> 
> 时间：2012-10-28T05:43:28.923
> 
> 标签：java, arrays, methods, 2d

所以基本上我想用对象填充一个数组然后显示它。（稍后这些对象将能够被“预订”为“已预订”，这将使它们在数组中显示为 X。）

但是，每当我执行将创建和显示数组的方法时，我都会收到错误消息。

这是我的代码：

主要的：

```
public static void main(String[] args) {

        Seat cinemaactual = new Seat("Cinema");
        Seat[][] cinema = new Seat[10][22];

        Ticket ticket = new Ticket();
        Scanner scan = new Scanner(System.in);
        String answer, contiune;

        int number, check = 0, category, id;

        do {

            System.out.print("Welcome to the Theatre Booking System. (QUIT to exit)"
                    + "\nWould you like to purchase tickets or list available seats?"
                    + "(/Purchase/List/Help)");
            answer = scan.nextLine();

            if (answer.equalsIgnoreCase("purchase")) {
                do {

                    System.out.println("Please choose the cateogry of ticket "
                            + "you would like, followed by who the ticket is for"
                            + "and the amount required. (separated by a space)\n"
                            + "1\. Gold\n2\. Silver\n3\. Bronze\n\n1\. Adult\n2."
                            + " Child\n3\. Concession");
                    category = scan.nextInt();
                    number = scan.nextInt();
                    id = scan.nextInt();
                    if (category == 1 || category == 2 || category == 3 && id == 1 || id == 2 || id == 3) {

                        ticket.SetType(category);
                        if (category == 1) {
                            ticket.SetName("Gold");
                        } else if (category == 2) {
                            ticket.SetName("Siler");
                        } else {
                            ticket.SetName("Bronze");
                        }
                        ticket.SetNumber(number);
                        ticket.SetID(id);
                        if (id == 1) {
                            ticket.SetCategory("Adult");
                        } else if (id == 2) {
                            ticket.SetCategory("Child");
                        } else {
                            ticket.SetCategory("Bronze");
                        }
                        System.out.print("You have selected"
                                + ticket.GetNumber() + " " + ticket.GetName()
                                + " ticket(s) at the" + ticket.GetCategory() + " price .");

                        ticket.BuyTicket(category, id, number);

                    } else {

                        System.out.print("Sorry, incorrect input, please enter an apropriate value.");
                        check = scan.nextInt();
                    }
                } while (check == 0 || check > 3);

                do {
                    System.out.print("Would you like to perchase more tickets? (Yes/No)");
                    contiune = scan.nextLine();

                } while (contiune.equalsIgnoreCase("Yes"));

            } else if (answer.equalsIgnoreCase("list")) {
                cinemaactual.CreateTheatre(cinema);
                cinemaactual.DisplayTheatre(cinema);

            } else if (answer.equalsIgnoreCase("help")) {
                // Code for help
            } else if (answer.equalsIgnoreCase("quit")) {
                System.exit(-1);
            }

            System.out.print("Sorry, incorrect input please enter"
                    + " a valid input (Purchase/List/Help or QUIT to exit");
            answer = scan.nextLine();

        } while (!answer.equalsIgnoreCase("purchase")
                || !answer.equalsIgnoreCase("List")
                || !answer.equalsIgnoreCase("help")
                || !answer.equalsIgnoreCase("quit"));

    } 
```

将创建/填充数组的座位类方法：

```
 public void SetType(String x) {

        type = x;
    }

    public boolean SetStatus() {
        return status;
    }

    public void GetStatus(boolean x) {
        status = x;
    }

    public String toString() {
        String Seat = type;

        return type;
    }

    public String BookSeat() {
        type = "x";
        return type;
    }

    public Seat[][] CreateTheatre(Seat[][] x) {

        for (int row = 0; row < 4; row++) {
            for (int col = 0; col < 8; col++) {
                x[row][col] = new Seat("B");
            }
            for (int col = 8; col < 12; col++) {
                x[row][col] = new Seat("S");
            }
        }
        for (int row = 19; row < 23; row++) {
            for (int col = 0; col < 8; col++) {
                x[row][col] = new Seat("B");
            }
            for (int col = 8; col < 12; col++) {
                x[row][col] = new Seat("S");
            }
        }
        for (int row = 4; row < 9; row++) {
            for (int col = 3; col < 5; col++) {
                x[row][col] = new Seat("B");
            }
            for (int col = 5; col < 9; col++) {
                x[row][col] = new Seat("S");
            }
        }
        for (int row = 4; row < 7; row++) {
            for (int col = 9; col < 12; col++) {
                x[row][col] = new Seat("S");
            }
        }
        for (int row = 14; row < 20; row++) {
            for (int col = 3; col < 5; col++) {
                x[row][col] = new Seat("B");
            }
            for (int col = 5; col < 9; col++) {
                x[row][col] = new Seat("S");
            }
        }
        for (int row = 16; row < 20; row++) {
            for (int col = 9; col < 12; col++) {
                x[row][col] = new Seat("S");
            }
        }
        for (int row = 9; row < 14; row++) {
            for (int col = 6; col < 9; col++) {
                x[row][col] = new Seat("G");
            }
        }
        for (int row = 7; row < 16; row++) {
            for (int col = 9; col < 12; col++) {
                x[row][col] = new Seat("G");
            }
        }
        return x;
    }

    public void DisplayTheatre(Seat[][] x) {
        for (int row = 0; row < x.length; row++) {
            for (int col = 0; col < x[row].length; col++) {
                System.out.print(x[row][col]);
            }
            System.out.println();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T05:58:34.510

`CreateTheatre(...)`首先，您必须确保数组实际上与您在循环中处理的一样大，`for`如果它们更小，则尝试访问它们会引发`ArrayIndexOutOfBoundsException`.

# java - Spring + hibernate 中的事务

> ID：13106679
> 
> 赞同：0
> 
> 时间：2012-10-28T05:44:18.583
> 
> 标签：java, spring, hibernate, spring-transactions

我们通过声明式方法使用事务管理，我们指定所有以**update***开头的方法都必须遵循事务。

假设我们在此方法中有一个事务方法**updatePayroll()**，我们正在调用另外四个方法，但我们的要求是仅在前两个方法失败的情况下回滚，否则不需要回滚。我不知道如何实现这一点，因为我的**updatePayroll()**是事务处理方法，所以如何告诉 spring 我们只需要两个**updatePayroll()**方法进行事务处理。

代码：

```
public void updatePayroll()
{
// below two methods of updateParyroll is required transaction where updatePayroll is transacted method through declarative approach.
updateLWPEmployees();

processSalary();

// below methods does not require transaction.
printSalarySlip();

sendEmail();
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:08:03.030

为什么不写一个包含前两个方法的事务方法呢？然后让`updatePayroll()`没有事务的方法包含这个方法？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T05:58:19.983

如果您想避免更改事务管理配置，那么

1.  您可以创建一个扩展的虚拟类`RuntimeException`，让我们调用它`NoRollBackException`，现在您需要将事务管理器配置为`NoRollBackException`在`NoRollBackException`.

或者

1.  （一种更简单的方法）您可以`printSalarySlip() and sendEmail()`在调用 updatePayroll 之后在单独的函数中调用这两个方法 ( )。

或者

1.  您可以捕获这两种方法引发的异常，并且不允许传播异常。

以上所有方法都完全符合您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T10:40:14.640

在说任何技术性的东西之前，我先概述一下交易不是纯粹的技术概念，我希望这种需求不是因为你只想避免你面临的一些技术难题。我们需要在触发异常后尽可能保持事务回滚行为的语义不变：即当遇到技术问题（RuntimeException）时，您最好让事务回滚（这是默认行为），因为您没有预料到在这种情况下，如果您发现它在技术上不一致，那么这个处理可能在逻辑上不是事务的一部分。否则，如果抛出的是您的异常（业务异常，在设计期间计划），那么您可以完全控制是否回滚，如第一个答案中所述。

@woodpecker：从技术上讲，您提出的解决方案在隔离方面并不相同，尤其是当我们试图避免肮脏和可重复的阅读时

# haskell - Dynamic dispatch in Haskell

> ID：13106683
> 
> 赞同：54
> 
> 时间：2012-10-28T05:44:50.690
> 
> 标签：haskell, functional-programming, dynamic-dispatch

Programs written in, for example, Java rely a lot on dynamic dispatch.

How are such programs expressed in functional languages such as Haskell?

In other words, what is the Haskell way of expressing the idea underneath "dynamic dispatch"?

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-10-28T16:14:27.213

答案看似简单：高阶函数。在 OO 语言中具有虚方法的对象只不过是功能与一些本地状态的美化记录。在 Haskell 中，您可以直接使用函数记录，并将本地状态存储在它们的闭包中。

更具体地说，一个 OO 对象包括：

*   指向 vtable（虚拟方法表）的指针 (vptr)，其中包含对象类的虚拟方法的实现。换句话说，一堆函数指针；功能记录。值得注意的是，每个函数都有一个隐藏参数，即对象本身，它是隐式传递的。
*   对象的数据成员（本地状态）

很多时候，对象和虚函数的整个大厦感觉就像是一个精心设计的解决方法，因为它缺乏对闭包的支持。

例如考虑 Java 的`Comparator`接口：

```
public interface Comparator<T> {
    int compare(T o1, T o2); // virtual (per default)
} 
```

并假设您想使用它根据字符串的第 N 个字符对字符串列表进行排序（假设它们足够长）。您将定义一个类：

```
public class MyComparator implements Comparator<String> {
    private final int _n;

    MyComparator(int n) {
        _n = n;
    }

    int compare(String s1, String s2) {
        return s1.charAt(_n) - s2.charAt(_n);
    }
} 
```

然后你使用它：

```
Collections.sort(myList, new MyComparator(5)); 
```

在 Haskell 中，你会这样做：

```
sortBy :: (a -> a -> Ordering) -> [a] -> [a]

myComparator :: Int -> (String -> String -> Ordering)
myComparator n = \s1 s2 -> (s1 !! n) `compare` (s2 !! n)
-- n is implicitly stored in the closure of the function we return

foo = sortBy (myComparator 5) myList 
```

如果你不熟悉 Haskell，下面是它在一种伪 Java 中的大致样子：（我只打算这样做一次）

```
public void <T> sortBy(List<T> list, Ordering FUNCTION(T, T) comparator) { ... }

public (Ordering FUNCTION(String, String)) myComparator(int n) {
    return FUNCTION(String s1, String s2) {
        return s1[n].compare(s2[n]);
    }
}

public void foo() {
    sortBy(myList, myComparator(5));
} 
```

请注意，我们没有定义任何类型。我们使用的只是函数。在这两种情况下，我们传递给排序函数的“有效负载”都是一个接受两个元素并给出它们相对顺序的函数。在一种情况下，这是通过定义实现接口的类型、以适当的方式实现其虚函数并传递该类型的对象来实现的；在另一种情况下，我们只是直接传递了一个函数。在这两种情况下，我们都在传递给排序函数的事物中存储了一个内部整数。在一种情况下，这是通过向我们的类型添加一个私有数据成员来完成的，在另一种情况下，通过在我们的函数中简单地引用它，使其保留在函数的闭包中。

考虑更详细的带有事件处理程序的小部件示例：

```
public class Widget {
    public void onMouseClick(int x, int y) { }
    public void onKeyPress(Key key) { }
    public void paint() { }
    ...
}

public class MyWidget extends Widget {
    private Foo _foo;
    private Bar _bar;
    MyWidget(...) {
        _foo = something;
        _bar = something; 
    }
    public void onMouseClick(int x, int y) {
        ...do stuff with _foo and _bar...
    }
} 
```

在 Haskell 中，你可以这样做：

```
data Widget = Widget {
    onMouseClick :: Int -> Int -> IO (),
    onKeyPress   :: Key -> IO (),
    paint        :: IO (),
    ...
}

constructMyWidget :: ... -> IO Widget
constructMyWidget = do
    foo <- newIORef someFoo
    bar <- newIORef someBar
    return $ Widget {
        onMouseClick = \x y -> do
            ... do stuff with foo and bar ...,
        onKeyPress = \key -> do ...,
        paint = do ...
    } 
```

再次注意，在初始 之后`Widget`，我们没有定义任何类型。我们只写了一个函数来构造函数的记录并将事物存储在它们的闭包中。在大多数情况下，这也是在 OO 语言中定义子类的唯一原因。与我们之前示例的唯一区别是，不是一个函数，而是多个函数，在 Java 案例中，通过简单地将多个函数放入接口（及其实现）中进行编码，而在 Haskell 中，通过传递函数记录而不是单一功能。（在前面的示例中，我们可以传递包含单个函数的记录，但我们不喜欢这样。）

（值得注意的是，很多时候您*不需要*动态调度。如果您只想根据类型的默认排序对列表进行排序，那么您只需使用`sort :: Ord a => [a] -> [a]`，它使用`Ord`为给定定义的实例`a`类型，静态选择。）

## 基于类型的动态调度

Java 方法和上面的 Haskell 方法之间的一个区别是，在 Java 方法中，对象的行为（除了它的本地状态）是由它的类型决定的（或者更不仁慈的是，每个实现都需要一个新类型）。在 Haskell 中，我们以我们喜欢的方式记录函数。大多数情况下，这是一个纯粹的胜利（获得了灵活性，没有损失任何东西），但假设出于某种原因我们希望它采用 Java 方式。在这种情况下，正如其他答案所提到的那样，要走的路是类型类和存在主义。

继续我们的`Widget`示例，假设我们希望 a 的实现`Widget`遵循其类型（每个实现都需要一个新类型）。我们定义一个类型类来将类型映射到它的实现：

```
-- the same record as before, we just gave it a different name
data WidgetImpl = WidgetImpl {
    onMouseClick :: Int -> Int -> IO (),
    onKeyPress   :: Key -> IO (),
    paint        :: IO (),
    ...
}

class IsWidget a where
    widgetImpl :: a -> WidgetImpl

data Widget = forall a. IsWidget a => Widget a

sendClick :: Int -> Int -> Widget -> IO ()
sendClick x y (Widget a) = onMouseClick (widgetImpl a) x y

data MyWidget = MyWidget {
    foo :: IORef Foo,
    bar :: IORef Bar
}

constructMyWidget :: ... -> IO MyWidget
constructMyWidget = do
    foo_ <- newIORef someFoo
    bar_ <- newIORef someBar
    return $ MyWidget {
        foo = foo_,
        bar = bar_
    }

instance IsWidget MyWidget where
    widgetImpl myWidget = WidgetImpl {
            onMouseClick = \x y -> do
                ... do stuff with (foo myWidget) and (bar myWidget) ...,
            onKeyPress = \key -> do ...,
            paint = do ...
        } 
```

有点尴尬的是，我们有一个类只是为了获取函数的记录，然后我们必须将函数分别取出。我这样做只是为了说明类型类的不同方面：它们也只是函数的美化记录（我们在下面使用）以及一些魔法，编译器根据推断的类型插入适当的记录（我们在上面使用，并在下面继续使用）。让我们简化一下：

```
class IsWidget a where
    onMouseClick :: Int -> Int -> a -> IO ()
    onKeyPress   :: Key -> a -> IO ()
    paint        :: a -> IO ()
    ...

instance IsWidget MyWidget where
    onMouseClick x y myWidget = ... do stuff with (foo myWidget) and (bar myWidget) ...
    onKeyPress key myWidget = ...
    paint myWidget = ...

sendClick :: Int -> Int -> Widget -> IO ()
sendClick x y (Widget a) = onMouseClick x y a

-- the rest is unchanged from above 
```

这种风格经常被来自 OO 语言的人采用，因为它更熟悉，更接近于 OO 语言的一对一映射。但对于大多数目的来说，它只是比第一节中描述的方法更复杂，更不灵活。原因是，如果关于各种 Widget 的唯一重要的事情是它们实现小部件功能的方式，那么为这些类型创建类型、接口实例，然后通过将它们放入一个存在的包装器：直接传递函数更简单。

*我能*想到的一个优点是，虽然 Haskell 没有子类型，但它确实有“子类化”（可能更好地称为子接口或子约束）。例如你可以这样做：

```
class IsWidget a => IsWidgetExtra a where
    ...additional methods to implement... 
```

然后对于您拥有的任何类型，您也可以无缝地`IsWidgetExtra`使用 的方法。`IsWidget`基于记录的方法的唯一替代方案是记录内记录，这涉及到内部记录的一些手动包装和展开。但这只有在您想显式地模拟 OO 语言的深层类层次结构时才有优势，而这反过来又只有在您想让自己的生活变得困难时才会这样做。（另请注意，Haskell 没有任何内置方法可以从 to 动态向下`IsWidget`转换`IsWidgetExtra`。但是有[ifcxt](https://github.com/mikeizbicki/ifcxt)）

（基于记录的方法的优点是什么？除了不必每次你想做新事物时都定义一个新类型，记录是简单的值级别的东西，值比类型更容易操作。你可以，例如，编写一个以 a`Widget`作为参数并`Widget`基于它创建一个新函数的函数，其中一些不同而另一些保持相同。这有点像 C++ 中模板参数的子类化，只是不那么令人困惑。）

## 词汇表

*   高阶函数：将其他函数作为参数（或将它们作为结果返回）的函数

*   记录：结构（具有公共数据成员的类，仅此而已）。也称为字典。

*   闭包：函数式语言（和许多其他语言）允许您定义本地函数（函数内的函数，lambdas），这些函数引用定义站点范围内的事物（例如，外部函数的参数），您通常不希望这样做被保留，但在函数的“闭包”中。或者，如果你有一个这样的函数`plus`，它接受两个 int 并返回一个 int，你可以将它应用到一个参数上，比如`5`，结果将是一个接受一个 int 并返回一个 int 的函数，方法是向它添加 5 -在这种情况下，`5`也存储在结果函数的闭包中。（在其他情况下，“闭包”有时也用于表示“带有闭包的函数”。）

*   类型类：*与*OO 语言中的类不同。有点像一个界面，但也非常不同。[见这里](https://stackoverflow.com/questions/8122109)。

编辑 29-11-14：虽然我认为这个答案的核心仍然是基本正确的（Haskell 中的 HOF 对应于 OOP 中的虚拟方法），但自从我编写它以来，我的价值判断已经变得有些细微差别。特别是，我现在认为 Haskell 和 OOP 的方法都不是严格意义上的“更基础”。请参阅[此 reddit 评论](http://www.reddit.com/r/haskell/comments/2nqubp/record_equivalent_to_subclassed_member_variables/cmg3szc?context=3)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-28T09:22:20.037

令人惊讶的是，您实际上并不需要*动态*调度，只需要多态性。

例如，如果您要编写一个对列表中的所有数据进行排序的函数，您希望它是多态的。（也就是说，你不想*手动*为每一种类型重新实现这个函数。那样会很糟糕。）但你实际上并不需要任何*动态*的东西；您在编译时就知道要排序的列表或列表中的实际内容。因此，在这种情况下，您实际上根本不需要*运行时*类型查找。

在 Haskell 中，如果你只是想移动东西而不需要知道或关心它是什么类型，你可以使用所谓的“参数多态”，它大致类似于 Java 泛型或 C++ 模板。如果您需要能够将函数应用于数据（例如，对需要比较顺序的数据进行排序），您可以将函数作为参数传递给它。或者，Haskell 有一个有点像 Java 接口的东西，你可以说“这个排序函数接受实现这个接口的任何类型的数据”。

到目前为止，根本没有*动态*调度，只有静态调度。另请注意，由于您可以将函数作为参数传递，因此您可以手动手动执行“调度”。

如果你真的*需要*实际的*动态*调度，你可以使用“存在类型”，或者你可以使用`Data.Dynamic`库和类似的技巧。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-28T07:57:21.953

[临时多态性](http://www.haskell.org/haskellwiki/Polymorphic#Ad-hoc_polymorphism)是通过[typeclasses](http://book.realworldhaskell.org/read/using-typeclasses.html)完成的。更多类似 OOP 的 DD 是用[存在类型](http://www.haskell.org/haskellwiki/Existential_type#Dynamic_dispatch_mechanism_of_OOP)来模拟的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-28T07:22:41.827

也许您需要 ADT 和模式匹配？

```
data Animal = Dog {dogName :: String}
            | Cat {catName :: String}
            | Unicorn

say :: Animal -> String
say (Dog {dogName = name}) = "Woof Woof, my name is " ++ name
say (Cat {catName = name}) = "Meow meow, my name is " ++ name
say Unicorn = "Unicorns do not talk" 
```

# ios - Simulated low memory warning not working

> ID：13106687
> 
> 赞同：0
> 
> 时间：2012-10-28T05:45:28.500
> 
> 标签：ios, ios-simulator

I have a `UIWebView` in a `UIViewController`. I am trying to push this view controller to an existing `UINavigationController`, that has another view controller which also has a `UIWebView` in it. After pushing the first view controller I try to simulate a memory warning, and then I hit "back" to go to the previous view controller, but now this webview is empty/blank. Any idea on how to go around this?

This is only happening on the iPad 1, running iOS 5.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T07:10:34.047

在 iOS 5.x 或更早版本内存不足的情况下，视图控制器的视图可能会被卸载。然后当它需要再次加载时，视图控制器`viewDidLoad`将在视图放回原位后被调用。确保您在处理这种情况下`viewDidLoad`做正确的事情。`viewDidUnload`

# c++ - Auto newlining ostream

> ID：13106692
> 
> 赞同：4
> 
> 时间：2012-10-28T05:46:22.990
> 
> 标签：c++, std, ostream

Sorry in advance for the bad title, not sure what to call what I'm trying to do.

Some background, if you don't care to read, skip to the next paragraph. I have a unit test class where I call assert with some condition and if it fails I output some string that was passed in. I have found that it is quite annoying to build a string to send to this if for instance I want to say `"Failed on index: " + i`. My idea is to return a `std::ostream` instead of taking a `std::string`. If the assert fails I return `std::cerr`, if the assert passes then I return a `std::stringstream`. I imagine I could do all of this just fine. I'd have to store a `std::stringstream` in my unit test class so I can return a reference.

What I would like to do is instead of returning a standard `std::ostream` return an extended `std::ostream` that outputs `std::endl` when it's done so I don't have to remember it for each assert. In particular the idea is the following:

```
UnitTest("My test");
ut.assert(false) << "Hello world";
ut.assert(1 == 0) << "On the next line"; 
```

The idea being that on destruction this new class would output the endline and that it would be destructed as soon as it was no longer used (i.e. no more << operators). So far this is what I have (I've removed some of the code in assert, and it's actually inside a class, but this is sufficient to show what's going on):

```
class newline_ostream : public std::ostream
{   
    public:
    newline_ostream(std::ostream& other) : std::ostream(other.rdbuf()){}
    ~newline_ostream() { (*this) << std::endl; }
};

newline_ostream& assert(bool condition, std::string error)
{
    if(!condition)
    {
        return newline_ostream(std::cerr);
    }

    return newline_ostream(std::stringstream());
} 
```

When I try this method I get some stuff basically telling me that returning an object I just created is wrong because it's not an lvalue. When I try changing it to not return a reference it complains that there's no copy constructor (presumably this is because I'm extending `std::ostream` and it doesn't have a copy constructor).

What I'm looking for is some method that causes the compiler to create a temporary newline_ostream that `assert()` will write it's result into that will die as soon as it's no longer used (i.e. no more << operators). Is this possible and if so how?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T05:56:24.740

复制`std::cerr`是不可能的（复制构造函数`std::basic_ostream`被删除）。因此，创建一个实现复制构造函数的派生类并不是一个真正的选择。

我建议您创建`newline_ostream`一个*包含对*（而不是派生自）的引用的类`std::ostream`：

```
#include <iostream>

class newline_ostream
{
  std::ostream &_strm;
public:

  explicit newline_ostream(std::ostream &strm)
    :_strm(strm)
  {}

  /* In the destructor, we submit a final 'endl'
     before we die, as desired. */
  virtual ~newline_ostream() {
    _strm << std::endl;
  }

  template <typename T>
  newline_ostream &operator<<(const T& t) {
    _strm << t;
    return *this;
  }
};

int main()
{
  newline_ostream s(std::cerr);
  s << "This is a number " << 3 << '\n';

  /* Here we make a copy (using the default copy
     constructor of the new class), just to show
     that it works. */
  newline_ostream s2(s);
  s2 << "This is another number: " << 12;

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T08:19:27.127

可能是异端，但是为了派生一个流以产生另一种流类型，更通用的方法可以是定义一个操纵器：

```
// compile with g++ -std=c++11 -Wall -pedantic

#include <iostream>

class sassert
{
public:
    sassert(bool b) :ps(), good(b) 
    {}

    friend std::ostream& operator<<(std::ostream& s, sassert&& a)
    { a.ps = &s; if(a.good) s.setstate(s.failbit); return s; }

    ~sassert()
    { 
        if(good && ps)  ps->clear(); 
        if(!good && ps) *ps << std::endl; 
    }

    //move semantics allow sassert to be a result of a calculation
    sassert(sassert&& s) :ps(s.ps), good(s.good) { s.ps=nullptr; }
    sassert& operator=(sassert s){ ps=s.ps; good=s.good; s.ps=0; return *this; }
private:
    std::ostream* ps;
    bool good;
};

int main()
{
    std::cout << sassert(false) << "this is a failed assertion";
    std::cout << sassert(true) << "this is a good assertion";
    std::cout << sassert(false) << "this is another failed assertion";
    std::cout << sassert(true) << "this is another good assertion";
    return 0;
} 
```

将运行生产

```
this is a failed assertion
this is another failed assertion 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T11:37:21.453

这实际上取决于您想要实现的具体目标。

例如，如果您从未听说过[*Type Tunneling*](http://en.wikipedia.org/wiki/Type_Tunnel_pattern)，那么现在可能是阅读它的好时机。有一种方法可以使用垫片做一些疯狂的事情......

否则，这是一个简单的版本：

```
class AssertMessage {
public:
    AssertMessage(): _out(nullptr) {}
    AssertMessage(std::ostream& out): _out(&out) {}

    AssertMessage(AssertMessage&& other): _out(other._out) { other._out = nullptr; }

    AssertMessage& operator=(AssertMessage&& other) {
        if (_out) { _out << "\n"; }
        _out = other._out;
        other._out = nullptr;
        return *this;
    }

    ~AssertMessage() { if (_out) { _out << "\n"; } }

    template <typename T>
    AssertMessage& operator<<(T const& t) {
        if (_out) { *_out << t; }
    }

private:
    std::ostream* _out;
}; // class AssertMessage 
```

请注意如何通过嵌入指针我们不需要全局“空”对象？这是指针和引用之间的主要区别。还要注意使用移动构造函数/移动赋值运算符来避免输出**2 个**或更多换行符。

然后您可以编写`assert`方法：

```
AssertMessage UnitTest::assert(bool i) {
    return i ? AssertMessage() : AssertMessage(std::cerr);
} 
```

但是....如果我是您，我会认真考虑使用宏，因为您可以获得额外的好处：

```
#define UT_ASSERT(Cond_) \
    assert(Cond_, #Cond_, __func__, __FILE__, __LINE__)

AssertMessage assert(bool test,
                     char const* condition,
                     char const* func,
                     char const* file,
                     int line)
{
    if (test) { return AssertMessage(); }

    return AssertMessage(std::cerr <<
        "Failed assert at " << file << "#" << line <<
        " in " << func << ": '" << condition << "', ");
} 
```

然后你会得到类似的东西：

```
Failed assert at project/test.cpp#45 in foo: 'x != 85', <your message> 
```

在大型测试套件中，拥有文件名和行号（至少）是非常宝贵的。

最后，一个宏可以让您获得更多：如果您在消息中调用一个函数，例如`ut.assert(x) << x.foo();`，那么`x.foo()`即使消息不会被打印，也需要完全评估；这是相当浪费的。但是使用宏：

```
#define UT_ASSERT(Cond_, Message_) \
    while (!(Cond_)) { std::cerr << .... << Message_ << '\n'; break; } 
```

然后如果条件评估为根本不执行`true`的主体。`while`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T05:59:53.993

您还可以为此使用预处理器：

```
#define U_ASSERT(ut, cond, stream) \
    do { ut.assert(cond) << stream << std::endl; } while (0)

U_ASSERT(ut, 1 == 0, "The result is " << (1 == 0)); 
```

但是，这个和您已经使用的方法（经过 jogojapan 修改）基本上是唯一的选择。这是因为即使您开始使用缓冲区，您也无法判断一个输出操作何时完成以及下一个操作何时开始，因此您不知道何时放入换行符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-28T06:03:30.537

我找到了一种对我有用的方法（特别是我返回一个副本而不是参考）：

```
class newline_ostream : public std::ostream
{   
    public:
    newline_ostream(const std::ostream& other) : std::ostream(other.rdbuf()){}
    newline_ostream(const newline_ostream& other) : std::ostream(other.rdbuf()){}
    ~newline_ostream() { (*this) << std::endl; }
};

newline_ostream assert(bool condition, std::string error)
{
    if(!condition)
    {
        return newline_ostream(std::cerr);
    }

    return newline_ostream(nullStream); // nullStream defined elsewhere (in the class)
} 
```

用法：

```
ut.assert(ps.getFaces()[i] == expected[i], ss.str()) << "Test " << i; 
```

输出：

```
Test 0
Test 1
Test 2
Test 3
Test 5
Test 7
Test 9
Test 10 
```

# asp.net-mvc - list of checkbox “true,false” value MVC 3

> ID：13106702
> 
> 赞同：1
> 
> 时间：2012-10-28T05:48:28.283
> 
> 标签：asp.net-mvc, asp.net-mvc-3

I have in the view

```
@model IEnumerable<RolesMVC3.Models.Estudent>
.
.
.
    @for (var i = 0; i < Model.Count(); i++)
    { 
              <tr>
                <td> @Html.CheckBox("CheckValue")</td>
                <td> @Html.DisplayFor(m => m[i].CodeEstudent)  @Html.HiddenFor(m => m[i].IdEstudent)</td>
                <td>@Html.DisplayFor(m => m[i].NameEstudent)  @Html.DisplayFor(m => m[i].LastNameEstudent)</td>
            </tr>     
     }
.
.
. 
```

In the controller:

```
[HttpPost]
    public ActionResult MyController(List<ESTUDENT> estudents, List<bool> CheckValue)
    {

        ///Actions
    } 
```

But, I reciveb two CheckBox for each student.

e.g. I am sending 29 and receive 58 in the controller

How do I associate a CheckBox with a student on this list and get in the controller?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T07:19:02.780

首先，您需要了解 ASP.NET MVC 如何呈现复选框：

```
<input id="RememberMe" type="checkbox" value="true" name="RememberMe" />
<input type="hidden" value="false" name="RememberMe" /> 
```

这个怎么运作？表单总是提交`hidden`字段并且`type="checkbox"`仅在它被选中时才提交，然后 binder 会查看类型 ( `bool`)，如果它设置了两个值，则为`true`else `false`。

在您的示例中，您需要设置`index`for `CheckBox`，因此您将发送 29 对数据，而不是 58 个独立值。

更多细节：

*   [绑定到 CheckboxFor 的集合](https://stackoverflow.com/questions/11470391/binding-to-a-collection-of-checkboxfor)
*   [有没有办法将复选框列表绑定到 asp.net mvc 中的模型](https://stackoverflow.com/questions/4888615/is-there-any-way-to-bind-a-checkbox-list-to-a-model-in-asp-net-mvc)
*   [如何绑定 CheckBoxFor](https://stackoverflow.com/questions/7557897/how-to-bind-checkboxfor)

# html - 为什么顶部和底部边距不适用？为什么要应用左边距？

> ID：13106703
> 
> 赞同：1
> 
> 时间：2012-10-28T05:48:50.327
> 
> 标签：html, css

请在以下 html 和 css 片段中说明：-

**html:**

```
<p>Paragraph Text</p>
    <p>
        <a class="cta" href="#">Visit Blog</a>
    </p>
<p>Paragraph Text</p> 
```

**CSS：**

```
a.cta  {
   font-size:18px;
   margin-top: 50px;
   margin-bottom: 50px;
   margin-left: 40px;
}​ 
```

​1）为什么**顶部和底部边距不适用于**主播**的“cta”**类？
和
2）为什么左边距应用没有任何问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T05:52:15.630

您需要添加`display: inline-block;`到您的 CSS

[演示](http://jsfiddle.net/v413hav/Rvwep/)

CSS

```
a.cta  {    
    font-size:18px;    
    margin-top: 50px;    
    margin-bottom: 50px;    
    margin-left: 40px;
    display: inline-block;
} 
```

说明：因为`<a>`是一个`inline`元素，内联元素不占用上、下边距，你需要使它成为块级元素，通过声明`inline-block`或`block`

内联和块级元素[列表](http://www.htmlhelp.com/reference/html40/inline.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T05:57:40.717

默认情况下，该`a`元素是“内联”元素。这意味着它与周围的文本显示在同一行。根据定义，内联元素没有上边距或下边距，只有左右边距。要添加顶部或底部边距，只需通过修改 CSS 将元素声明为“块”类型元素，如下所示：

```
a.cta  {
   display: block;
   font-size:18px;
   margin-top: 50px;
   margin-bottom: 50px;
   margin-left: 40px;
}​ 
```

但是，您需要注意，将其从内联元素更改为块元素确实会产生一些后果。例如，`a`标签中的文本将显示在它自己的部分中，位于它之前的文本下方。之后的任何文本都将显示在其下方的单独部分中，就好像它们都是单独段落的一部分一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T05:52:15.300

您必须为 a.cta 的父元素指定宽度和高度才能使边距生效。如果没有可使用的参考点，边距对您的浏览器没有多大意义。

p{宽度：100px；高度：100px；}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T06:02:43.790

另一种选择是将类应用于`<p>`元素而不是`<a>`. 我不知道这是否适用于您正在尝试做的事情，但它确实为您提供了您正在寻找的边距，而无需指定宽度。

**HTML**：

```
<p>Paragraph Text</p>
<p class="cta">
    <a href="#">Visit Blog</a>
</p>
<p>Paragraph Text</p>​ 
```

**CSS**：

```
p.cta  {
font-size:18px;
margin-top: 50px;
margin-bottom: 50px;
margin-left: 40px;
}​ 
```

和[JsFiddle](http://jsfiddle.net/Koubenec/d3EcA/5/)。

-Marcectura

# c++ - Which scenario is more efficient?

> ID：13106706
> 
> 赞同：0
> 
> 时间：2012-10-28T05:50:47.830
> 
> 标签：c++, database

ALL, I have a DB with some data. I also have a C++ application that communicates with the DB.

Which scenario is more efficient?

Scenario 1:

1.  User hit "Edit Data" button.
2.  Program reads data from DB and presents it for editing
3.  User edit the data and hit "Save" button
4.  Program creates new object with the newly saved data then makes the comparison with the old object.
5.  Program issues some UPDATE statements.

Scenario 2:

1.  Steps 1-3 are the same.
2.  Program overwrites an old object data with the new data.
3.  Program issue DELETE/INSERT statements in one transaction.

I'm inclined to say scenario 2.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T05:55:37.130

Its a question of which is efficient and transactionally sound. Deleting an existing object to perform an update is not transactionally sound. Updates exist to update existing entities in the database. If you are using synthetic keys you cant use this approach at all.

In most system, a refetch (to at least check if the object your about to commit has been modified since you requested it from the database) is mandatory.

Step 4 should read, refetch the object from the database to ensure it hasnt changed, then commit update or rollback.

# autohotkey - 如何在我真正想要的地方暂停脚本？

> ID：13106708
> 
> 赞同：0
> 
> 时间：2012-10-28T05:51:12.807
> 
> 标签：autohotkey

我有一个脚本说**script1**从其他脚本导入了许多函数。例如**func1()**、**func2()**和**func3()**。我想在整个功能完成后暂停脚本。

这意味着通常如果我在执行**func1()**时正常暂停**script1 ，则脚本将在****func1()**的某些行完成时暂停。现在我想保证在**func1()**完成执行后发生暂停。

 ******有没有可能的方法来实现这一目标？特别是，有什么方法可以检测到**script1**的哪一行现在正在执行并在其后添加一行代码，如“Pause On”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:01:15.190

我一直在考虑嵌套函数，但这也不起作用。你不能在调用函数的原始代码之后添加一个暂停调用吗？所以不是在函数内部，而是在你调用函数的地方之后。

在 AutoHotKey（右键单击，[OPEN]）中，您可以转到 [View]，[Lines most recent executed]。运行脚本直到它暂停，然后按 F5 以查看在暂停之前执行了哪些行。******

# javascript - Adapting @bazmegakapa's Ellipsis Script for Inline Use

> ID：13106709
> 
> 赞同：0
> 
> 时间：2012-10-28T05:51:42.450
> 
> 标签：javascript, jquery, inline, ellipsis, css

SO,

I'm working on adapting @bazmegakapa's script (explained [here](https://stackoverflow.com/a/3880955/1592764)) to work using inline tags:

```
<script type="javascript">
var p=$('#fos p');
var divh=$('#fos').height();
while ($(p).outerHeight()>divh) {
$(p).text(function (index, text) {
    return text.replace(/\W*\s(\S)*$/, '...');
});
}
</script> 
```

The code (which I've commented out in this [JsFiddle](http://jsfiddle.net/Koubenec/EqPc6/7/)) works great until it's placed inside the tags. Any ideas on what could be causing the breakdown? I think @bazmegakapa's script is brilliant, mainly because it's so much shorter and more manageable than other ellipsis plugins out there, and I'd love to figure out how to get over this hurdle and actually implement it in my project. I'm still very much a javascript novice so help from the guys at SO would be great.

-Marcatectura

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T05:54:37.733

Unless I'm missing something, I'm almost positive it's because of how you're expecting things done in a fiddle. You currently have the fiddle's Javascript to be run `onLoad`, which means the DOM will be ready by that point. In your case of **inline** Javascript, you have it printed in the HTML **above** the elements that are targeted. HTML is parsed from top to bottom, so the script is run before the elements are even known. When you try to manipulate things that don't "exist" yet, it won't work. So you either need to put your **inline** script **below** your main HTML, or use something like:

```
$(document).ready(function () {
    // Your code here
}); 
```

anywhere on the page.

It might've helped to check your browser's console, but things might not have failed in your situation because jQuery doesn't bomb if elements aren't found - it'll just return correct things, like undefined possibly, so that your other logic would probably fail...just not bomb. Javascript would bomb if you tried `document.getElementById("asdf").value` if there was no element with an `id` of "asdf". But it wouldn't bomb if you used `$("#asdf").val()` - it would just returned undefined or something.

Quick note: you don't need to wrap `p` like `$(p)` - it's already a jQuery object, so you can call jQuery methods on plain `p`.

UPDATE:

It seemed like the problem was the fact that the `<script>` tag needed to have the type "text/javascript", not just "javascript". Here's the fiddle that has your working code:

[http://jsfiddle.net/Z47CX/3/](http://jsfiddle.net/Z47CX/3/)

# css - transform: scale clipping

> ID：13106714
> 
> 赞同：3
> 
> 时间：2012-10-28T05:52:41.540
> 
> 标签：css, transform, scale

I am trying to use transform: scale for a grid of images here [http://movies.themodern-nerd.com/genre](http://movies.themodern-nerd.com/genre). It works fine when scrolling from left to right, the image that is hover will stay on top of the others, but if you hover from right to left the hovered image is under the image on the right.

```
.searchresults img {
-webkit-transition-duration: 2s;
-moz-transition-duration: 2s;
-o-transition-duration: 2s;
transition-duration: 2s;

-webkit-transition-property: -webkit-transform;
-moz-transition-property: -moz-transform;
-o-transition-property: -o-transform;
transition-property: transform;

overflow:hidden;

}

.searchresults img:hover {
-webkit-box-shadow: 0px 0px 3px 5px #d50000;
-moz-box-shadow: 0px 0px 3px 5px #d50000;
box-shadow: 0px 0px 3px 5px #d50000;
 -webkit-transform: scale(1.1,1.1);
-moz-transform: scale(1.1,1.1); 
-o-transform: scale(1.1,1.1);
} 
```

Any help would be greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T06:06:55.180

尝试：

```
.searchresults:hover {
   position: relative;
   z-index: 2;
} 
```

但这未经测试，您应该创建一个 jsfiddle，以便我们更好地帮助您。

# asp.net - dynamic LinkButton OnClick event not working on ASP.Net

> ID：13106715
> 
> 赞同：2
> 
> 时间：2012-10-28T05:53:27.770
> 
> 标签：asp.net, asplinkbutton

I want to create dynamic LinkButton for image, `<img>` tag is not working dynamically so I am using LinkButton with image.
I don't want to provide ID to LinkButton because I want to generate more LinkButton dynamically. I am using following code in Default.aspx

```
 <%@ Page Language="C#"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
        <script runat="server">   
            protected void Page_Load(object sender, EventArgs e)
            {
                Response.Write(@"<asp:LinkButton runat=""server"" OnClick=""btn_click""><img src=""close-icon (1).png"" /></asp:LinkButton>");
            }

            public void btn_click(object sender, EventArgs e)
            {
                Response.Write("HELLO");
            }   
        </script>
    </head>
<body>
    <form id="form1" runat="server">
    <div>

    </div>
    </form>
</body>
</html> 
```

I also tried to write tag code in Default.aspx.cs file but not work.
It's showing me following error.

> Error 1 'ASP.default_aspx' does not contain a definition for 'img_Click' and no extension method 'img_Click' accepting a first argument of type 'ASP.default_aspx' could be found (are you missing a using directive or an assembly reference?)

Please help me to solve this problem.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T04:59:13.963

我找到了答案，答案如下

Default.aspx.cs 页面

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class dynamicimage : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        string str = @"<asp:ImageButton ID=""dynoimage"" ImageUrl=""~/images/about01.jpg"" runat=""server"" oncommand=""clickme"" commandname=""btn"" />";
        Control c = ParseControl(str);
        form1.Controls.Add(c);
        ((ImageButton)Page.FindControl("dynoimage")).Command += new CommandEventHandler(clickme);
    }

    protected void clickme(object sender,CommandEventArgs e)
    {
        Response.Write("Image clicked");
        Label1.Text = "Image clicked";
    }
} 
```

这是 Default.aspx 页面

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="dynamicimage.aspx.cs" Inherits="dynamicimage" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>

    </div>
    <p>
        <asp:Label ID="Label1" runat="server" Text="before click"></asp:Label>
    </p>
    </form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T07:35:50.770

您的方法错误，您的第一个 Response.Write("...") 不是 Response.Write("

阅读这篇文章以动态使用 ASP.NET 中的控件。

[http://msdn.microsoft.com/en-us/library/kyt0fzt1%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/kyt0fzt1%28v=vs.100%29.aspx)

# php - I need a regex to parse a FTP URL

> ID：13106718
> 
> 赞同：-2
> 
> 时间：2012-10-28T05:55:32.383
> 
> 标签：php, regex

can someone help me construct an preg_match pattern to match this data?

I have data like this

```
ftp://username:password@server <br>
ftp://username:password@server <br>
ftp://username:password@server <br> 
```

ect

i would like an preg_match to match each line as an variable, and use that in an foreach loop

thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T05:58:16.873

你不需要 preg_match。您可以使用爆炸。确保在explode 后使用array_pop 来消除最后一个空键。

```
<?php
$linkArray = explode(" <br>",$links);
array_pop($linkArray);
?> 
```

现在数组的每个值都将包含链接，但不包含“br”标签。我认为应该这样做。

您的数据是以下方式吗？

```
$str=    "ftp://username:password@server <br>
          ftp://username:password@server <br>
          ftp://username:password@server <br>"; 
```

如果是，我的解决方案将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T06:05:37.847

在简单的情况下是......但您应该检查 rfcs 以查看此类 URL 中允许或不允许的字符。

```
<?php

$lines=explode("\n","ftp://username:password@server <br>
ftp://username:password@server <br>
tp://username:password@server <br>
ftp://username:password@server <br>");

foreach ($lines as $line) {
if (preg_match('/^ftp:\/\/[\da-z]+:[^\@]+\@[^\s]+ <br>\s*$/',$line)) {echo "$line is ok\n";}
} 
```

# css - 在 LESS CSS 中，是否可以在调用另一个 mixin 时使用命名空间变量？

> ID：13106722
> 
> 赞同：7
> 
> 时间：2012-10-28T05:55:58.460
> 
> 标签：css, namespaces, less, mixins

在 LESS CSS 中，是否可以在调用另一个 mixin 时使用命名空间变量或作为另一个 mixin 中的默认值？使用正常语法，它似乎没有，但是有没有转义序列或其他语法可以用来实现我正在寻找的效果？

我正在考虑这样的代码：

```
#namespace {
    @nsColor: #333;
}

.testMixin1(@mixinColor) {
    background-color: @mixinColor;
}

.selector { .testMixin1(#namespace > @nsColor); } 
```

或者...

```
.testMixin2(@anotherMixinColor: #myNamespace > @myColor) {
    background-color: @anotherMixinColor;
} 
```

如果不是，这将严重限制命名空间的实用性。这就像能够将变量放在对象范围内，但只能将全局范围内的变量作为参数传递给函数。基本上，这似乎消除了命名空间 90% 的效用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T19:27:20.800

## 新答案：使用 Guard Expression Check 扩展你的 Mixin

所以据我了解，您希望命名空间能够用作默认值，*但根本不进入全局范围*。我认为你需要像这样扩展你的 mixin 定义：

```
#namespace {
    @nsColor: #333;
}

.testMixin1(@mixinColor: 'null') {
    .mixin (@a) when (iscolor(@a)) {
       background-color: @a;
    }
    .mixin (@a) when not (iscolor(@a)) {
       #namespace;
       background-color: @nsColor;
    }
    .mixin (@mixinColor);
} 
```

然后调用不带或带值：

```
.testMixin1();
.testMixin1(red); 
```

输出（基于您是否设置值）：

```
background-color: #333333;
background-color: #ff0000; 
```

***或者***

正如我最初指出的那样，您仍然可以在命名空间中使用“getter”mixin，如下所示：

```
#namespace {
    .getNsColor(){@nsColor: #333;} <-- changed here
}  

.testMixin1(@mixinColor: 'null') {
    .mixin (@a) when (iscolor(@a)) {
       background-color: @a;
    }
    .mixin (@a) when not (iscolor(@a)) {
       #namespace > .getNsColor();  <-- changed here
       background-color: @nsColor;
    }
    .mixin (@mixinColor);
} 
```

## 原始答案：将变量捆绑到 Mixin 本身

如果将变量捆绑到 mixin 本身，则可以访问它。所以...

```
#namespace {
    .getNsColor() {@nsColor: #333;}
}

.testMixin1(@mixinColor) {
    background-color: @mixinColor;
} 
```

**然后要么包括它...**

一：***全球***

```
#namespace > .getNsColor;
.selector { 
  .testMixin1(@nsColor); 
} 
```

或两个：***本地***

```
.selector { 
  #namespace > .getNsColor;
  .testMixin1(@nsColor); 
} 
```

**两者都会输出...**

```
.selector {
  background-color: #333333;
} 
```

# sql - 为什么 Oracle 在取消引用对象时需要视图中的列的别名？

> ID：13106724
> 
> 赞同：3
> 
> 时间：2012-10-28T05:56:19.817
> 
> 标签：sql, oracle

为什么 Oracle 在取消引用对象时需要视图中的列的别名？

例如：

```
CREATE VIEW view AS SELECT t.eno, t.workdept.dname, t.salary FROM table t
                                  *
ERROR at line 1:
ORA-00998: must name this expression with a column alias 
```

（workdept 是一个对象引用）

这可以通过更改`t.workdept.dname`为来解决`t.workdept.dname AS alias`。

我的问题是，为什么要强制执行？为什么不像在无别名`workdept.dname`选择中那样使用属性名称，例如：

`SELECT t.eno, t.workdept.dname, t.salary FROM table t`

（这工作正常）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T06:04:45.117

首先总是使用别名。

其次，这里是关于视图的甲骨文原因：

[http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_8004.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_8004.htm)

> 如果省略别名，则数据库从查询中的列或列别名派生它们。因此，如果查询包含表达式而不仅仅是列名，则必须使用别名。此外，如果视图定义包含约束，则必须指定别名。

Oracle 将对象引用视为表达式而不是表列。

# android - 如何更改android中警报对话框的WindowTitle？

> ID：13106730
> 
> 赞同：3
> 
> 时间：2012-10-28T05:57:38.500
> 
> 标签：android, android-alertdialog

当您单击首选项活动中的列表项时，任何人都知道如何更改弹出的警报对话框的窗口标题文本颜色和其他样式？

我改变了背景，但文字没有改变。我将在此处粘贴我的样式代码。

```
<style name="alertDialogThemeLight" parent="@android:style/Theme.Dialog">
       <item name="android:background">#ffaaaaaa</item>
       <item name="android:windowTitleStyle">@style/dialogTitleLight</item>
</style>

<style name="dialogTitleLight">
        <item name="android:textSize">12sp</item>
        <item name="android:textColor">#ff0000</item>
       <!-- <item name="android:textAppearance">@style/dialogTitleTextLight</item> -->
</style>

<style name="dialogTitleTextLight">
        <item name="android:textColor">#334455</item>
        <item name="android:textSize">30dp</item>
</style> 
```

我找不到更改文本颜色的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T06:03:35.753

您可以更改`<item name="android:textColor">#ff0000</item>`，**#ff0000** - 这是颜色代码，您需要更改它

```
<item name="android:background">#ffaaaaaa</item>, this is doesn't correct, after "#" only be  6 charakters 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T06:04:29.367

试试这个，它将替换您的警报对话框的标题

创建一个单独的布局并在其中放置 textView，在 xml 文件中为其应用样式。然后在下面的方法中添加该视图：

```
alertDialogObj.setCustomTitle(View); 
```

供您参考：点击此[链接](http://developer.android.com/reference/android/app/AlertDialog.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-23T14:37:05.083

您可以获得对象AlertDialog.Builder。

```
 AlertDialog.Builder builder = new AlertDialog.Builder(this);
        //set message, title, and icon
        builder.SetTitle("Title");
        builder.SetMessage("Some Question?");

        //set twooption buttons
        builder.SetPositiveButton("Yes", new EventHandler<DialogClickEventArgs>(OnExitDialogClicked));
        builder.SetNegativeButton("No", new EventHandler<DialogClickEventArgs>(OnExitDialogClicked));
        AlertDialog dialog = builder.Create();

        TextView tv = new TextView(dialog.Context);
        tv.Text = "Text";

        dialog.SetCustomTitle(tv);

        dialog.Show(); 
```

# java - 如何在 Java 中的集群之间安全地共享信息？

> ID：13106733
> 
> 赞同：2
> 
> 时间：2012-10-28T05:58:12.340
> 
> 标签：java, jakarta-ee, cluster-computing

我正在寻找一种在集群中不同节点之间“安全”共享信息的通用方法。此信息将只是一个字符串，但是此传输必须通过 SSL 进行。

性能不是问题，但信息必须始终是最新的。

我查看了各种选项 -

1.  在集群模式下使用 ehcache。但目前它不允许节点之间使用 SSL 进行通信。

2.  将信息存储在数据库中并访问它。但是我不想走这条路，因为具有数据库访问权限的人可以更改值，我想避免这种情况（无法解释原因）。

是否有解决方案（最好是免费的）可以让我实现上述目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T07:21:13.537

我研究了这个问题，最后决定使用 Hazelcast 集群来共享信息。

来自[Hazelcast](http://www.hazelcast.com/)网站 -

> Hazelcast 将在您需要时为您提供帮助：
> 
> *   在许多服务器之间共享数据/状态（例如网络会话共享）
> *   缓存您的数据（分布式缓存）
> *   集群您的应用程序 在服务器之间提供安全通信 对您的内存数据进行分区 将工作负载分配到许多服务器上 利用并行处理
> *   提供故障安全数据管理

我按照这些步骤来设置一切 - [http://serversidestuff.blogspot.sg/2012/11/sharing-information-across-cluster.html](http://serversidestuff.blogspot.sg/2012/11/sharing-information-across-cluster.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T06:12:31.590

您可以考虑使用 JMS 之类的东西（参见[示例](http://activemq.apache.org/how-do-i-use-ssl.html)）。基本思想是向主题发送消息，然后消费者将在该主题中观察消息并适当地更新节点的状态。

# python - PyObject_HasAttrString 属性不存在时出现段错误，存在时不出现

> ID：13106737
> 
> 赞同：0
> 
> 时间：2012-10-28T05:58:23.897
> 
> 标签：python, segmentation-fault, cpython

我在使用 Python C API 时遇到了一个非常奇怪的问题。我有一个全局范围的结构 'dcon'，其中包含一个 PyObject 'device' 成员。

```
static status_t get_mac_addr(uint8_t const ** addr, 
                             size_t * const size){
    static uint8_t device_mac_addr[6] = {0};
    *addr = device_mac_addr;
    *size = sizeof device_mac_addr;

    if(PyObject_HasAttrString(dcon.device, "mac_address") == 1){
       ...        
    }
    return 0;
} 
```

似乎只要存在“mac_address”属性，代码就可以正常执行。奇怪的是，当 'mac_address' 不是一个定义的属性时，我会遇到一个 segault ( `Segmentation fault (core dumped)`)。这是遇到段错误时的回溯：

```
(gdb) bt
#0  0x00000000004ca607 in PyErr_Restore ()
#1  0x00000000004aa29f in PyErr_Format ()
#2  0x000000000049e6ee in _PyObject_GenericGetAttrWithDict ()
#3  0x0000000000486387 in PyObject_GetAttrString ()
#4  0x00000000004ea7d7 in PyObject_HasAttrString ()
#5  0x00007ffff4f2056d in get_mac_addr (size=0x7ffff4f1cd28, addr=<optimized out>) at config.c:165 
```

我对 Python C API 有点陌生。我最初的想法是我在引用计数方面做错了，但我似乎无法理解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T08:42:22.240

在多线程应用程序中，任何调用 Python C API 函数的线程必须首先确保该线程持有全局解释器锁。对于从 Python 代码调用的函数，这不是问题，因为锁已经被持有。

对于从解释器外部调用的代码（回调等），情况并非如此。

在这种情况下，必须先获取 GIL，然后才能安全地调用 Python API 函数。

```
PyGILState_STATE gstate;
gstate = PyGILState_Ensure();

...

PyGILState_Release(gstate); 
```

这不仅确保了 GIL 被保留，而且还为在 Python 之外创建的线程创建了 Python 线程状态（使用直接 OS 调用，而不是`thread.start_new_thread()`）。

调用 Python API 时可能发生的任何 Python 异常都必须在释放 GIL 之前进行处理。

请注意，如果另一个线程当前持有锁（例如因为它正在执行 Python 代码），则 Ensure 调用将阻塞，直到另一个线程释放锁为止。

如果对 Ensure() 的每个调用都有对 Release() 的匹配调用，即使已经获得了锁，也可以使用这些调用。

# wpf - 如何在 WPF C# 的 WebBrowser 类中公开 LoadCompleted 方法？

> ID：13106738
> 
> 赞同：0
> 
> 时间：2012-10-28T05:58:29.813
> 
> 标签：wpf, c#-4.0, browser

如何在 WPF C# 的 WebBrowser 类中公开 LoadCompleted 方法？

我正在尝试在 wpf 中编写一个检索网页内容的 C# 程序。

我尝试的第一件事是尝试 WebRequest 和 WebResponse 类。这没有提供实际显示的内容。WebResponse 揭示了发送到浏览器的 HTML 代码。但我发现，在浏览器加载页面的同时，javascript 可以改变最终在浏览器中显示的内容。

所以我决定使用 WebBrowser 类。

我立即发现有两个 WebBrowser 类。你是为 WinForms 记录的那个，还有另一个为 WPF 记录的。我需要了解为 WPF 记录的内容。我想我需要知道该怎么做是在“LoadCompleted”方法发生后检索代码。但我不知道如何做到这一点，也找不到任何示例来说明如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T08:15:52.327

以下将检索所请求页面的 HTML：

```
dynamic doc = webBrowser.Document;
var htmlText = doc.documentElement.InnerHtml; 
```

有关更多信息，我建议阅读更多关于[WebBrowser](http://msdn.microsoft.com/en-us/library/system.windows.controls.webbrowser.aspx)控件的信息

# mysql - 为什么这个 MySQL 查询会失败？

> ID：13106744
> 
> 赞同：-2
> 
> 时间：2012-10-28T05:58:59.283
> 
> 标签：mysql, sql

当我执行此查询时：

```
SELECT * FROM (SELECT `db` FROM site WHERE `url`='$site') . smspq 
```

我收到此错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以了解在 '. 第 1 行的 smspq'

但是，此查询有效：

```
SELECT * FROM `database` . `table` 
```

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T06:01:22.457

也许您想在子查询上添加别名，如果是这样，替换`.`为`AS`或仅删除`.`as`AS`是*可选的*

```
SELECT * 
FROM (SELECT `db` 
      FROM site 
      WHERE `url`='$site')  smspq 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T06:12:14.083

这不是 SQL 的工作方式。您必须清楚地说明您喜欢在哪个数据库中工作的表。

您可以通过以下方式设置最喜欢的数据库

```
USE mydatabase; 
```

并且对表的每个请求都将传递到该数据库。

```
SELECT * FROM mytable;
SELECT * FROM mydatabase.mytable; -- same as above because of USE mytable; 
```

唯一的方法是使用 Prepare 和 Execute（查看文档），但是使用普通命令（SELECT、UPDATE、...）您无法以这种方式达到您想要的目标

更新

您必须拆分查询：

第一次查询

```
USE mycommondb;
SELECT `db` FROM site WHERE `url`='$site'; 
```

第二：

```
USE $db_from_site;
SELECT * FROM table; 
```

（因为 $ 我认为它将从 php 调用；o））

# javascript - 不同域的 iframe 跟踪不一致

> ID：13106753
> 
> 赞同：2
> 
> 时间：2012-10-28T06:00:06.203
> 
> 标签：javascript, google-analytics, cross-domain, web-analytics

我们有我们的酒店网站，其中实际的预订引擎位于 iframe 中。现在，我们正在验证我们的转换，发现预订数量与确认页面的综合浏览量不一致。

这是预订表格所在主页内的分析代码。

```
 <script type="text/javascript">
<!--

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1301114-2']);
  _gaq.push(['_setDomainName', '.florahospitality.com']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_setAllowHash', false]); 
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
//-->

</script> 
```

在检查可用性按钮的 onclick 事件中，我放置了这段代码。 `*return validate(); _gaq.push(['_linkByPost',this]);*`

当我单击检查可用性按钮时，它将重定向到 reservation.aspx。

在 reservation.aspx 我有以下分析脚本

```
 <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1301114-2']);
  _gaq.push(['_setDomainName', '.florahospitality.com']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_setAllowHash', false]); 
  _gaq.push(['_trackPageview']);
  _gaq.push(function() {   
  var pageTracker = _gat._getTrackerByName();   
  var iframe = document.getElementById('reservationFrame');   
  iframe.src = pageTracker._getLinkerUrl('https://reservations.synxis.com/xbe/rez.aspx?Hotel=24309&template=flex&shell=flex&Chain=5375&locale=ru&arrive=10/31/2012&depart=11/01/2012&adult=2&child=0&rooms=1&start=availresults&iata=&promo=&group='); });

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

在其中的 reservation.aspx 也是一个 iframe，其中包含托管在不同域中的预订引擎的实际 url。

在这个 iframe 中，我们有一个不同的脚本，用于跨域跟踪。请注意，此脚本位于 body 标记内。

```
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1301114-2']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview', 'CheckAvailability']);

  _gaq.push(['secondTracker._setAccount','UA-26368520-41']); 
  _gaq.push(['secondTracker._setDomainName', 'none']);
  _gaq.push(['secondTracker._setAllowLinker', true]);
  _gaq.push(['secondTracker._trackPageview', 'CheckAvailability']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

如您所见，我们使用 trackPageview 变量来确定我们的转化。为了测试我们所做的是创建 3 个确认的预订并在 google 分析中检查 trackPageview 'Confirmation' 是否将具有 3 个页面浏览量。但不幸的是，它只记录了 1 次综合浏览量。

我错过了什么设置？我希望至少它会跟踪所有这些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:51:23.863

我们刚刚删除了 iframe，因为我们在使用 iframe 时还面临着安全问题。

# javascript - 在 JavaScript 中链接复合赋值运算符

> ID：13106754
> 
> 赞同：4
> 
> 时间：2012-10-28T06:00:10.293
> 
> 标签：javascript, ecmascript-5, side-effects, compound-assignment

在 C# 中，

```
string s = "abc";
s += (s += s);
Console.WriteLine(s); 
```

写道`abcabcabc`（http://ideone.com/pFNFX2）。这很好，因为 C# 规范在第 7.16.2 节中明确指出

> 该操作被评估为 x = x op y，除了 x 只被评估一次。

但是，在阅读 ECMAScript 5.1 语言规范第 11.3.2 节中对复合赋值运算符的描述时，我在该运算符的语义中没有看到这样的“仅一次”限定符。相反，我看到的是：

> 1.  令 lref 为评估 LeftHandSideExpression 的结果。
> 2.  令 lval 为 GetValue(lref)。
> 3.  令 rref 为评估 AssignmentExpression 的结果。
> 4.  设 rval 为 GetValue(rref)。
> 5.  令 r 为将运算符 @ 应用于 lval 和 rval 的结果。
> 6.  如果以下条件都为真，则抛出 SyntaxError 异常：（截断）
> 7.  调用 PutValue(lref, r)。
> 8.  返回 r。

因此，看起来（对我来说，无论如何）以下 JavaScript 代码

```
var s = "abc";
s += (s += s);
alert(s); 
```

会提醒`abcabcabcabc`（因为括号表达式中第 7 行的 PutValue），但是无论如何在 Chrome 22 中，它都会提醒`abcabcabc`.

所以我的问题是：我是误读了规范，还是 Chrome（也许是 V8？）做​​自己的事情不符合规范，可以这么说？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T06:20:56.843

所以我认为如果你打开操作，你有：

```
s += (s += s);

s = s + (s += s);
s = s + (s = s + s);    // Can't actually have the "s = " part, it's really just "s + s"
s = s + (s + s);
s = s + s + s; 
```

这意味着结果应该是“abcabcabc”。

# html5-audio - 使用 Web Audio API 将两个声音分配给两个 Div，并通过带有 javascript 的 click 事件独立播放

> ID：13106769
> 
> 赞同：0
> 
> 时间：2012-10-28T06:03:13.103
> 
> 标签：html5-audio, web-audio-api

我一直在挑选下面链接中的代码，但我无法到达任何地方。我只设法将事件处理程序重新分配给一个小 div 而不是整个页面。我不知道如何调整它以加载多个声音。

[http://www.f1lt3r.com/w3caudio/web-audio-api/basic-examples/low-latency-playback-user-input.html](http://www.f1lt3r.com/w3caudio/web-audio-api/basic-examples/low-latency-playback-user-input.html)

使用下面的代码示例，我根本无法通过单击 div 来触发声音。然而，这段代码看起来更好看，所以我真的很想修改它以用于学习目的。

```
 var context = new webkitAudioContext(),
        buffer;

    var playAudioFile = function (buffer) {
        var source = context.createBufferSource();
        source.buffer = buffer;
        source.connect(context.destination);
        source.noteOn(0); // Play sound immediately
    };

    var loadAudioFile = (function (url) {
        var request = new XMLHttpRequest();

        request.open('get', 'A.mp3', true);
        request.responseType = 'arraybuffer';

        request.onload = function () {
                context.decodeAudioData(request.response,
                     function(incomingBuffer) {
                         playAudioFile(incomingBuffer);
                     }
                );
        };

        request.send();
    }());

// I added this & it doesn't work

var divElement = document.getElementById("divElement");

divElement.addEventListener("click", playAudioFile , false);

// END of code I added 
```

我了解如何创建振荡器并连接滤波器/增益和其他节点。到目前为止，这是我使用 API 时的参考点。XMLHttpRequest 处理与缓冲区创建相结合是令人困惑的。我了解缓冲区是什么，我了解 XMLHttprequest 是什么，但由于某种原因，加载音频文件以进行播放的过程对我来说似乎并不清晰，更不用说加载多个我最终想要做的事情了。我也尝试阅读 HTML-5 Rocks 教程，但如果没有可以调整的 C&P 代码，我永远无法判断我是否走在正确的轨道上。顺便说一句，我不想​​使用抽象库。我想从头开始学习 API。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T10:47:06.600

首先，当您单击 div 时，您正在执行 playAudioFile。playAudioFile 需要一个缓冲区作为参数，否则它将无法做它应该做的事情。但是，当您单击 div 时没有传递缓冲区，playAudioFile 函数在没有缓冲区的情况下执行（并且被赋予事件对象作为参数，但这并不重要），因此没有声音。

您可能想要做的是在单击 div 时分配 loadAudioFile 。目前 loadAudioFile 被写入在页面加载时执行（当您将函数包装在括号中时会发生这种情况）。所以我将 loadAudioFile 函数更新为如下所示：

```
var loadAudioFile = function () {
    var request = new XMLHttpRequest();

    request.open('get', 'A.mp3', true);
    request.responseType = 'arraybuffer';

    request.onload = function () {
            context.decodeAudioData(request.response,
                 function(incomingBuffer) {
                     //HERE is where the playAudioFile function is called, with a buffer to play
                     playAudioFile(incomingBuffer);
                 }
            );
    };

    request.send();
}; 
```

进而

```
divElement.addEventListener("click", loadAudioFile , false); 
```

现在，这会使应用程序在您每次单击 div 时加载 mp3。只需加载一次并保存缓冲区供以后使用，就可以对其进行很多优化。

```
var context = new webkitAudioContext(),
    savedBuffer;

var playAudioFile = function () {
    var source = context.createBufferSource();
    source.buffer = savedBuffer;
    source.connect(context.destination);
    source.noteOn(0); // Play sound immediately
};

var request = new XMLHttpRequest();

request.open('get', 'A.mp3', true);
request.responseType = 'arraybuffer';

request.onload = function () {
        context.decodeAudioData(request.response,
             function(incomingBuffer) {
                 //save the buffer, we'll reuse it
                 savedBuffer = incomingBuffer;
                 //once the file has been loaded, we can start listening for click on the div, and use playAudioFile since it no longer requires a buffer to be passed to it
                 var divElement = document.getElementById("divElement");
                 divElement.addEventListener("click", playAudioFile , false);
             }
        );
};

request.send(); 
```

# jquery - 使用 Jquery 随时随地的下拉菜单

> ID：13106778
> 
> 赞同：0
> 
> 时间：2012-10-28T06:05:17.843
> 
> 标签：jquery, css

我在整个网站上都有一些链接（它们不必是菜单）。我需要在其中一些下方有一个下拉块。像动态驱动器上显示的[Anylink](http://www.dynamicdrive.com/dynamicindex1/dropmenuindex.htm) Dropdown 之类的东西。我需要能够轻松地将下拉菜单直接放在我想要的任何链接下。我怎样才能用jquery实现这一点？

```
$(document).ready( function(){

    $('#trigger').click( function(event){

    event.stopPropagation();

    $('#drop').slideToggle('fast');

  });

});​ 
```

我[这里有一个小提琴](http://jsfiddle.net/wolverene/72wPP/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T06:14:38.203

您可以使用 Jquery UI 菜单

[http://jqueryui.com/menu/](http://jqueryui.com/menu/)

谢谢

姜

# opengl - Jogl：如何在 com.jogamp.opengl.swt.GLCanvas 上制作透明背景？

> ID：13106780
> 
> 赞同：0
> 
> 时间：2012-10-28T06:05:36.660
> 
> 标签：opengl, swt, transparent, jogl, blend

我搜索并阅读了多个关于 openGL 透明度的论坛，我发现了这段代码

```
gl.glEnable(GL2.GL_BLEND);
gl.glBlendFunc(GL2.GL_SRC_ALPHA, GL2.GL_ONE_MINUS_SRC_ALPHA);
gl.glEnable(GL2.GL_ALPHA_TEST);
gl.glAlphaFunc(GL2.GL_GREATER, 0.1f);
gl.glClearColor(0, 0, 0, 0); 
```

有些人在方法中编写了这段代码`init`并得到了结果。我真的不知道混合了，但是我添加了这段代码，但什么也没发生！

这里有什么错误或误解吗！？我怎样才能做到这一点？

顺便说一句，我正在使用`jogl 2.0`。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-10-18T12:21:20.560

以下是如何`GLJPanel`通过改进它来制作透明的`GLCapabilities`：

```
/** Creates an instance of a transparent GLJPanel. **/
public static final GLJPanel createTransparentPanel() {
    /* Instantiate a new set of GLCapabilities based upon the System's default parameters. */
    final GLCapabilities lGLCapabilities = new GLCapabilities(GLProfile.getDefault());
    /* Define that we don't wish for the background to be opaque. */
    lGLCapabilities.setBackgroundOpaque(false);
    /* Create a new GLJPanel based on these capabilities. */
    final GLJPanel lGLJPanel = new GLJPanel(lGLCapabilities);
    /* Disable opacity for the panel. */
    lGLJPanel.setOpaque(false);
    /* Return the panel. */
    return lGLJPanel;
} 
```

然后可以将其添加到透明的`JFrame`. 您可以通过调用为您的 JFrame 启用透明度：

```
.setBackground(new Color(0,0,0,0)); 
```

# c# - 同一类的方法中的事件处理程序

> ID：13106781
> 
> 赞同：0
> 
> 时间：2012-10-28T06:05:39.790
> 
> 标签：c#

我正在使用 C#、.Net 2.0 和 VS2008 处理我的项目。简而言之，我的应用程序通过 USB 与设备通信。而且我在处理来自设备的传入消息时遇到问题。

这是事件“我们从设备得到一些东西”的处理程序：

```
private void usb_OnDataRecieved(object sender, DataRecievedEventArgs args) 
```

它从不调用同一类的方法（我使用部分类）：

```
private void btn_indication_start_Click(object sender, EventArgs e)
{
            currentTest = "indication";
            this.ControlBox = false;

            bool isTestPassed = false;

            int timeout = 1000;

            sendMessageToDevice("A9 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00"); //device should respond to this message

            System.Diagnostics.Stopwatch stopwatch = System.Diagnostics.Stopwatch.StartNew();
            while (true)
            {
                if (stopwatch.ElapsedMilliseconds >= timeout)
                    break;
                Thread.Sleep(1);
            }

            if (!newMessageArrived)  //this bool variable always false :(
            {
                MessageBox.Show("Timeout!"); //usb_OnDataRecieved called only in this block! And newMessageArrived become true
                                             //and when we remove MessageBox, it don't called ever!
                this.ControlBox = true;
                currentTest = "";
                return;
            }

            //do something else with device...

            this.ControlBox = true;
            currentTest = "";
        } 
```

如何使用事件处理程序解决此问题？

PS 当我通过表单的按钮和文本框发送/接收消息时它工作正常：

```
private void btn_send_Click(object sender, EventArgs e)
        {
            try
            {
                string text = this.tb_send.Text + " ";
                text.Trim();
                string[] arrText = text.Split(' ');
                byte[] data = new byte[arrText.Length];

                for (int i = 0; i < arrText.Length; i++)
                {
                    if (arrText[i] != "")
                    {
                        int value = Int32.Parse(arrText[i], System.Globalization.NumberStyles.HexNumber);
                        data[i] = (byte)Convert.ToByte(value);
                    }
                }

                if (this.usb.SpecifiedDevice != null)
                {
                    this.usb.SpecifiedDevice.SendData(data);
                }
                else
                {
                    MessageBox.Show("Device not found, plug it");
                }

            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.ToString());
            }
        }

private void usb_OnDataRecieved(object sender, DataRecievedEventArgs args)
        {
            if (InvokeRequired)
            {
                try
                {
                    Invoke(new DataRecievedEventHandler(usb_OnDataRecieved), new object[] { sender, args });
                }
                catch (Exception ex)
                {
                    Console.WriteLine(ex.ToString());
                }
            }
            else
            {

                string rec_data = "Data: ";
                foreach (byte myData in args.data)
                {
                    if (myData.ToString("X").Length == 1)
                    {
                        rec_data += "0";
                    }

                    rec_data += myData.ToString("X") + " ";
                }

                this.lb_read.Items.Insert(0, rec_data);
                lastMessageFromUsb = rec_data;
                newMessageArrived = true;
            }
        } 
```

# windows - 奇怪的网络服务器问题

> ID：13106785
> 
> 赞同：0
> 
> 时间：2012-10-28T06:06:19.040
> 
> 标签：windows, apache, webserver, wamp, easyphp

最近我卸载了 IIS 并切换到[Easy PHP](http://www.easyphp.org/)（基于 WAMP）。安装后，当我尝试打开管理时出现此屏幕。

![在此处输入图像描述](../Images/fd73af710ca4daae8006bfc6b9363ea7.png)

我正在使用卡巴斯基安全软件，所以我想，也许它会阻止某些端口或文件活动。我将整个 Easyphp 文件夹、Apache、Easy Php 执行文件添加到受信任的应用程序列表中

![在此处输入图像描述](../Images/1633429f07d90ddb81961fe6a6e62458.png) ![在此处输入图像描述](../Images/e24ccf521a1eb32e8ebfc2f2160ad1eb.png)

没有成功！同样的画面再次出现。

然后我试图关闭卡巴斯基。这是结果：

![在此处输入图像描述](../Images/7756d78841abbfcceb84a63737e97183.png)

EasyPHP 没有显示任何问题；表示一切顺利

![在此处输入图像描述](../Images/70239734561288d740d04a2dea36d6ec.png)

这是Apache日志：

```
[Sun Oct 28 04:05:41.216924 2012] [mpm_winnt:notice] [pid 5736:tid 596] AH00455: Apache/2.4.2 (Win32) PHP/5.4.6 configured -- resuming normal operations
[Sun Oct 28 04:05:41.217924 2012] [mpm_winnt:notice] [pid 5736:tid 596] AH00456: Server built: Apr 20 2012 19:24:55
[Sun Oct 28 04:05:41.217924 2012] [core:notice] [pid 5736:tid 596] AH00094: Command line: 'C:\\PROGRA~2\\EASYPH~1.1\\Apache\\bin\\apache.exe -d C:/Program Files (x86)/EasyPHP-12.1/apache'
[Sun Oct 28 04:05:41.308985 2012] [mpm_winnt:notice] [pid 5736:tid 596] AH00418: Parent: Created child process 9188
[Sun Oct 28 04:05:46.196728 2012] [mpm_winnt:notice] [pid 9188:tid 664] AH00354: Child: Starting 64 worker threads. 
```

还检查是否有应用程序使用`netstat -a`命令侦听端口 8080。没有应用程序监听端口 8080。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:14:50.740

据我所知，该问题的故障排除将包括几个常见步骤：

*   `127.0.0.1:8080`到目前为止，您只尝试过。你试过`localhost:8080`吗？值得一试，因为它*可以*工作，并且这种行为将表明网络设置问题。

*   除了您提到的事件之外，您是否记录了任何事件？如果没有记录访问/操作或错误事件，这可能表明请求甚至没有到达服务器，您应该再次检查网络配置。

# delphi - 如何从文件读取和写入 Delphi 2010 RibbonApplicationMenuBar 最近的项目第 2 部分

> ID：13106786
> 
> 赞同：0
> 
> 时间：2012-10-28T06:06:24.170
> 
> 标签：delphi, ribbon, mru

大约 3 年前曾有人问过这个问题，但只回答了一半。

原始问题在这里： [How To Read and Write Delphi 2010 RibbonApplicationMenuBar Recent Items To A File](https://stackoverflow.com/questions/1402373/how-to-read-and-write-delphi-2010-ribbonapplicationmenubar-recent-items-to-a-fil) 并且接受的答案提供了足够的信息，以便您可以弄清楚如何保存 mru 列表，但没有关于如何成功重新加载它的信息。

这就是我目前所拥有的。

SaveDocHistory() 由表单上的关闭事件调用并执行它应该执行的操作。

```
procedure TfrmMain.SaveDocHistory;
var
  ini : TIniFile;
  i : Integer;
begin
  Ini := TIniFile.Create(ChangeFileExt(Application.ExeName,'.ini'));
  try
    ini.EraseSection('DocHistory');
    ini.WriteString('DocHistory', 'FileCount', IntToStr(RibbonApplicationMenuBar1.RecentItems.Count));

    for i := 0 to Pred(RibbonApplicationMenuBar1.RecentItems.Count) do
      ini.WriteString('DocHistory', 'File' + IntToStr(i),
                      RibbonApplicationMenuBar1.RecentItems.Items[i].Caption );
  finally
    ini.Free;
  end;
end; 
```

生成的 ini 文件条目如下所示：

```
[DocHistory]
FileCount=3
File0=F:\Projects\StevenTest\Test02.rtf
File1=F:\Projects\StevenTest\Test1.rtf
File2=F:\Projects\StevenTest\Test01.rtf 
```

问题是重新加载 RibbonApplicationMenuBar 的 RecentItems 列表。我的代码“似乎”在应用程序的最近使用部分中列出的项目中起作用 - 但与“真正的”mru 项目不同，它们不响应点击事件。添加到 mru 列表中的任何新项目都有效，但我的“植入物”无效。所以看来我正在重新加载字幕而不是文件信息。这是我的代码，一个由保存 RibbonApplicationMenuBar 的表单的 FormCreate 事件调用的函数。

```
procedure TfrmMain.LoadDocHistory;
var
  ini : TIniFile;
  nCount, i : Integer;
  sTmp : string;
begin
  Ini := TIniFile.Create(ChangeFileExt(Application.ExeName,'.ini'));
  try
    nCount := ini.ReadInteger('DocHistory', 'FileCount', 0 );

    for i := 0 to Pred(nCount) do
    begin
      sTmp := ini.ReadString('DocHistory', 'File' + IntToStr(i), '');
      RibbonApplicationMenuBar1.RecentItems.Add.Caption := sTmp;
    end;

  finally
    ini.Free;
  end;
end; 
```

我尝试破译 Delphi 的帮助，但他们提到的 AddRecentItem() 函数方法要么不适用于 RibbonApplicationMenuBar，要么我尝试使用它的方式不正确。我在网上搜索过，但我发现的只是对前面提到的线程的多次引用。如果有人成功解决了这个问题的后半部分，我将不胜感激。

顺便说一句，我正在为这个项目使用 Delphi2010 的帖子标题。

谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T06:21:37.737

当我检查我的帖子是否有错别字时，我想到了一些原来是解决方案的东西。这是答案...

我需要将数据加载到ribbon1 子组件。看起来它现在工作正常。

```
procedure TfrmMain.LoadDocHistory;
var
  ini : TIniFile;
  nCount, i : Integer;
  sTmp : string;
begin
  Ini := TIniFile.Create(ChangeFileExt(Application.ExeName,'.ini'));
  try
    nCount := ini.ReadInteger('DocHistory', 'FileCount', 0 );

    for i := 0 to Pred(nCount) do
    begin
      sTmp := ini.ReadString('DocHistory', 'File' + IntToStr(i), '');
      Ribbon1.AddRecentItem(sTmp);  //<<<<<<<<<<
    end;
  finally
    ini.Free;
  end;
end; 
```

现在允许有一个 FileExists() 检查和其他错误处理，但我现在需要的是让它工作。

# c# - 需要一个支持 LINQ 的 C# 轻量级 SQL 数据库

> ID：13106792
> 
> 赞同：0
> 
> 时间：2012-10-28T06:08:22.060
> 
> 标签：c#, sql, database

我正在做一个简单的项目，它需要有一个 SQL 数据库，我认为使用完整的 SQL Server 2012 会有点矫枉过正。

我想要支持 SQL 和 LINQ 查询的简单而精简的数据库。我对使用 C# 做数据库相当陌生（我之前所做的只有 DB 相关的工作是使用 PHP 的 MySQL）并且应用程序非常小，最多只有 2 个表，所以它最好非常简单且易于安装和运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T06:16:15.200

您可以使用 SqlServerCompact 4.0，这是一个相对较小的自包含程序集，可以随您的应用程序一起提供。它是一个非常精简的 SQL Server 版本，但它支持大多数 SQL 命令，并且支持 LINQ to SQL 和实体框架。

[http://erikej.blogspot.com/2010/07/getting-started-with-sql-server-compact.html](http://erikej.blogspot.com/2010/07/getting-started-with-sql-server-compact.html)

还有其他选择。SqlLite 还具有实体框架和 LINQ to SQL 提供程序。

[http://www.codeproject.com/Articles/236918/Using-SQLite-embedded-database-with-entity-framewo](http://www.codeproject.com/Articles/236918/Using-SQLite-embedded-database-with-entity-framewo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T06:23:42.057

使用[SQL Server Compact 4.0](http://msdn.microsoft.com/en-us/library/ms172417.aspx)。它是一个嵌入式 SQL Server（以中等信任度运行，非常适合托管的 Web 应用程序！）在功能、数据类型和数据库大小方面有一些限制 - 它限制为 4 GB。你可以在这里下载：http: [//www.microsoft.com/en-us/download/details.aspx?id=17876](http://www.microsoft.com/en-us/download/details.aspx?id=17876)

如果您需要更多，[SQL Server 2012 Express](http://www.microsoft.com/sqlserver/en/us/editions/2012-editions/express.aspx)可以。这就是我在我的爱好项目中使用的。每个数据库限制为 10 GB，但在其他方面与完整版非常相似，除非您需要高级的东西。您可以在此处下载：http: [//www.microsoft.com/en-us/download/details.aspx?id=29062](http://www.microsoft.com/en-us/download/details.aspx?id=29062)，并在此处比较版本功能：http: [//msdn.microsoft.com/en-us /图书馆/cc645993.aspx](http://msdn.microsoft.com/en-us/library/cc645993.aspx)。

# ruby-on-rails - git clone 我的rails项目后出错

> ID：13106797
> 
> 赞同：3
> 
> 时间：2012-10-28T06:09:17.457
> 
> 标签：ruby-on-rails, ruby, postgresql

重新安装 Linux Mint 后，我​​已经克隆了我的 rails 项目的 git 存储库。当我运行捆绑安装时，我收到以下错误。

导轨版本：3.2.8

红宝石版本：1.9.3p0

```
An error occurred while installing pg (0.12.2), and Bundler cannot continue.
Make sure that `gem install pg -v '0.12.2'` succeeds before bundling. 
```

这是我的宝石文件：

```
source 'https://rubygems.org'
gem 'rails', '3.2.3'
group :development, :test do
gem 'sqlite3', '1.3.5'
gem 'rspec-rails', '2.9.0'
end
group :assets do
gem 'sass-rails','3.2.4'
gem 'coffee-rails', '3.2.2'
gem 'uglifier', '1.2.3'
end
gem 'jquery-rails'
group :test do
gem 'capybara', '1.1.2'
end
group :production do
gem 'pg', '0.12.2'
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T06:14:17.647

您可以运行`bundle install --without production`它将安装所有相关的宝石，*但*用于生产的宝石。由于您在那里配置了 sqlite，它不会安装 postgres gem。

但是，如果您确实想安装所有 gem，您可能必须先安装 postgresql：`sudo apt-get install postgresql`

如果这不起作用，请尝试运行`gem install pg -v '0.12.2'`并发布错误日志。

# c++ - std::basic_ifstream 上的 C++ 编译错误

> ID：13106798
> 
> 赞同：1
> 
> 时间：2012-10-28T06:09:33.607
> 
> 标签：c++, ifstream, file-handling

我应该编写一个程序，将两个文件中的数字合并并将所有数字写入第三个文件。该程序从两个不同的文件中获取输入，并将其输出写入第三个文件。每个输入文件都包含一个 int 类型的数字列表，按从小到大的顺序排列。程序运行后，输出文件将包含两个输入文件中的所有数字，按从小到大的顺序排列在一个较长的列表中。我不是 100% 确定我的逻辑是正确的。谢谢您的帮助。

> 输入文件1：
> 
> 1 2 3 4 5 6 7 8 9 10
> 
> 输入文件2：
> 
> 11 12 13 14 15 16 17 18 19 20

```
#include <iostream>
#include <conio.h>
#include <fstream>

using namespace std;

int main()
{
int num1, num2;

ifstream inputFile;
ifstream inputFile2;
inputFile.open ("input1.txt");
inputFile2.open("input2.txt");
ofstream outputFile;
outputFile.open("output.txt");

inputFile >> num1;
inputFile2 >> num2;
while(inputFile.eof() && inputFile2.eof())
{
    if (num1 < num2)
    {
        outputFile << num1;
        inputFile >> num1;
    }
    else
    {       
        outputFile << num2;
        inputFile2 >> num2;
    }

}

inputFile.close();
inputFile2.close();
outputFile.close();

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T07:28:09.340

如果使用标准库没问题，那么您可以使用`merge`：

```
int main()
{
    ifstream inputFile("input1.txt");
    ifstream inputFile2("input2.txt");
    ofstream outputFile("output.txt");

    typedef istream_iterator<int> IT;
    typedef ostream_iterator<int> OT;
    std::merge(IT(inputFile), IT(), IT(inputFile2), IT(), OT(outputFile, " "));

    outputFile.flush();
} 
```

另请注意，i/ofstream 构造函数能够在初始化期间打开文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T06:12:31.603

```
inputFile2.open(); 
```

应该

```
inputFile2.close(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T06:15:10.087

`inputFile2.open();`显然是一个错误的类型`inputFile2.close();`

但恐怕你的逻辑是完全错误的。你还没有理解练习的意义。您应该同时打开输入文件和输出文件*，*并且不应该使用数组来存储和排序数字。如果你做对了，你就不需要数组，也不需要做任何排序。这就是练习的重点。

并在这个论坛上重复至少一百万次已经说过的话。不使用

```
while (!inputFile.eof()) 
```

这是不正确的。使用

```
while (inputFile >> num) 
```

这是如何进行合并的非常基本的草图。有很多细节要填写。

```
inFile1 >> num1;
inFile2 >> num2;
while (something or other)
{
  if (num1 < num2)
  {
    outFile << num1;
    inFile1 >> num1;
  }
  else
  {
    outFile << num2;
    inFile2 >> num2;
  }
} 
```

这里有一个讽刺意味，“某事或其他”可能确实涉及使用`eof()`. 这是`inFile.eof()`正确使用的一种情况。

顺便说一句，您输入数据的方式不是很好。每个文件都应单独排序，但文件 1 中的所有数字不应小于文件 2 中的所有数字。这不是必需的。

# cuda - 为什么使用少于最大线程数会使我的内核运行得更快？

> ID：13106801
> 
> 赞同：3
> 
> 时间：2012-10-28T06:10:10.467
> 
> 标签：cuda

我编写了一个简单的 CUDA 内核来对两个大小为 2^18 的列向量执行 SAXPY。

我发现我的 GPU 是 Tesla C2070，每个块最多可以运行 1024 个线程。因此，我使我的块大小 X = 1024，Y = 1，Z = 1。我还使我的网格大小 X = 2^18 / 1024，Y = 1，Z = 1。我这样做是因为我想确保每个块的每个线程都在使用。

但是，我发现以 X = 512 和 X = 128 的块大小运行内核始终比以 X = 1024 的块大小运行内核更快。

这是为什么？如果我的块大小小于 1024，我不是在浪费线程吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T06:41:02.707

1 级 BLAS 函数（如 SAXPY）受内存带宽限制。操作

```
y <- alpha * x + y 
```

仅执行一次 FMAD，但需要两次加载和一次来自全局内存的存储。您的 C2070 具有大约 37.5Gfloat/s 的全局内存带宽和 500 GFMAD/s 的单精度算术吞吐量。所以性能是由内存控制器而不是 ALU 决定的。通常减少内存带宽受限内核中每个块的线程数会提高性能，因为它减少了内存控制器和缓存资源的争用，并增加了带宽利用率。

这可能是您的 SAXPY 内核正在发生的事情。您应该能够通过基准测试找到最佳块大小，但我的经验是，在像 C2070 这样的 Fermi 设备上，每个块的线程数为 128-384 个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T13:32:59.210

对于使用共享内存来缓存读取/写入/数据共享的代码，较小的块大小可能会导致每个线程使用更大的共享内存块，这反过来会增加良好的内存访问模式（更多合并）的机会。

我同意 talonmies 的观点，根据我的经验，每个块 128-192 个线程几乎总是会为我的代码带来最佳性能，即使可以启动更多线程也是如此。

# asp.net - RDLC Report + Export Report 中的 gdi+ 发生一般错误

> ID：13106822
> 
> 赞同：3
> 
> 时间：2012-10-28T06:15:42.207
> 
> 标签：asp.net, rdlc

我有具有 RDLC 报告的 ASP.Net 应用程序..

每当我尝试以 PDF 格式导出报告时，我都会收到以下错误：

```
a generic error occurred in gdi+ in RDLC Report + 
```

问题是什么？我该如何解决这个问题？

# php - 加载请求中调用的表单无法通过 jquery 工作

> ID：13106828
> 
> 赞同：1
> 
> 时间：2012-10-28T06:16:38.683
> 
> 标签：php, jquery, html, forms

我已经建立了一个登录系统，例如，如果您单击导航栏中的标签，登录屏幕会从**php 登录页面**`#log-in a`加载到同一页面中，该系统现在正在处理纯 php 发布请求，我希望它能够通过jquery，所以我也可以检查任何用户错误。

 **我正在尝试像往常一样在其上实现 jquery，但 jquery 没有任何工作，即表单仍然通过 php 提交。

**每个页面都有html**

```
 <ul id="nav"><li id="log-in"><a href="../../login/">Log In</a></li></ul> 
```

**php登录页面**

```
<div id="login">

<form name="login" action="../../login/index.php" method="post">
  <label>Username<input name="username" type="text" value="" /></label>
  <label>Password<input name="password" type="password" value="" /></label>
  <input type="submit" value="LogIn" id="login-join-submit"/>
</form>

</div><!--end of login-> 
```

**jQuery**

```
$('#log-in a').click(function() {

    $('#nav').append("<div id='background'></div><div id='wrapper'><div id='close'><p>Close[X]</p></div><div id='container'></div></div>");

    $('#container').load('../../login/index.php #login');

    $('#close p, #background').click(function() {
        $('#wrapper, #container, #close, #background').remove();
    });
    return false;
});

$('#login form[name=login]').submit(function(){
       alert('login');
       return false;
}); 
```

如您所见，表单`login`已加载，`#container`然后将 jquery 提交应用于它，但它不是通过 jquery 工作，而是通过 php 工作。

请查看并建议任何可能的方法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T06:21:26.173

对于动态生成的元素，应该从元素的静态父对象或文档对象之一委托事件，您可以使用`on`方法。

```
$(document).on('submit', '#login form[name=login]', function(){
     alert('login');
     return false;
}); 
```

请注意，`#background`元素的事件也应该被委托：

```
$('#nav').on('click', '#background', function() {
    $('#wrapper').remove();
}); 
```**

# f# - F# WebRequest 抛出 WebException（“协议错误”）而不是 404 状态码

> ID：13106831
> 
> 赞同：3
> 
> 时间：2012-10-28T06:16:54.643
> 
> 标签：f#, httpwebrequest, riak

我正在实现一个 F#-ish Web 请求函数，如下所示：

```
let request 
        (httpMethod:string) 
        (url:string) 
        (headers:Header list) 
        (content:Content option)=

    let groupHeaders (headers:WebHeaderCollection) =
        let d = new Dictionary<string, string list> ()
        let addToDict h =
            let oldValue = if d.ContainsKey(h) then d.Item(h) else []
            d.Item(h) <- oldValue @ [headers.Get h]

        headers.AllKeys |> Array.iter addToDict

        d |> Seq.map (|KeyValue|) |> Map.ofSeq

    async {
        let rq = WebRequest.Create(url) :?> HttpWebRequest
        rq.Method <- httpMethod

        headers 
        |> List.iter (fun (key, value) -> rq.Headers.Add(key, value) |> ignore ) 

        match content with
        | Some (contentType, bytes) ->
            rq.ContentType <- contentType
            do! rq.GetRequestStream().AsyncWrite(bytes) 
        | None -> ()

        try
            use! response = rq.AsyncGetResponse()
            let webResponse = response :?> HttpWebResponse

            let responseCode = webResponse.StatusCode

            let stream = webResponse.GetResponseStream()
            let length = webResponse.ContentLength |> int32 //TODO what if the data is bigger then 4GB?

            let! bytes = stream.AsyncRead(length)

            let respHeaders = groupHeaders webResponse.Headers
            return
                match webResponse.StatusCode with 
                | HttpStatusCode.OK -> OK (respHeaders, bytes)
                | HttpStatusCode.NotFound -> NotFound
                | otherCode -> Error <| otherCode.ToString()
        with 
            | :? WebException as ex -> 
                return Error <| ex.Status.ToString()
    } 
```

问题是，如果我尝试获取一个页面（尝试获取一个`riak`值），它返回`404`的结果是`WebException`带有消息`The remote server returned an error: (404) Not Found.`而不是响应`HttpStatusCode.NotFound`

对相同的 URL执行`curl GET`操作会给我以下结果：

```
$ curl -v http://localhost:18098/riak/user/asfasfd?returnbody=true
* About to connect() to localhost port 18098 (#0)
*   Trying ::1...
* connected
* Connected to localhost (::1) port 18098 (#0)
> GET /riak/user/asfasfd?returnbody=true HTTP/1.1
> User-Agent: curl/7.27.0
> Host: localhost:18098
> Accept: */*
>
* additional stuff not fine /usr/src/ports/curl/curl-7.27.0-1/src/curl-7.27.0/lib/transfer.c:1037: 0 0
* HTTP 1.1 or later with persistent connection, pipelining supported
< HTTP/1.1 404 Object Not Found
< Server: MochiWeb/1.1 WebMachine/1.9.0 (someone had painted it blue)
< Date: Sun, 28 Oct 2012 05:30:12 GMT
< Content-Type: text/plain
< Content-Length: 10
<
not found
* Connection #0 to host localhost left intact
* Closing connection #0 
```

任何想法为什么`WebException`抛出异常？如果我想识别 404-page not found 的情况，除了解析异常消息，我有什么选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T17:03:16.273

@desco 是正确的，但要详细说明他的答案——这是使用模式匹配解决问题的方法：

```
try
    // Do stuff here
    //
with
| :? WebException as webEx when (webEx.Response :? HttpWebResponse) ->
    /// The exception's Response, as an HttpWebResponse.
    /// From this we can get the HTTP status code of the response.
    let httpWebResponse = webEx.Response :?> HttpWebResponse

    // Return an error message based on the HTTP status code.
    match httpWebResponse.StatusCode with
    | HttpStatusCode.NotFound ->
        return NotFound

    | otherCode ->
        return Error <| otherCode.ToString()

| :? WebException as webEx ->
        return Error <| webEx.Status.ToString() 
```

此外，您获得 WebException 的原因是因为这就是`HttpWebResponse`处理 4xx 和 5xx 响应代码的方式。`match`您检查的代码中的语句`webResponse.StatusCode`永远不会到达这种`HttpStatusCode.NotFound`情况，因为将引发异常。你应该保留在`match`那里，以处理任何不是的非错误代码`HttpStatusCode.OK`（例如，301 重定向）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T08:22:15.133

WebException 有 2 个属性可以帮助您：

1.  [WebExceptionStatus](http://msdn.microsoft.com/en-us/library/system.net.webexception.status.aspx)类型的[状态](http://msdn.microsoft.com/en-us/library/system.net.webexceptionstatus.aspx)。404 应由 ProtocolError 指示
2.  [Response](http://msdn.microsoft.com/en-us/library/system.net.webexception.response.aspx)暴露远程主机返回的响应。对 HttpWebResponse 的向下转换响应及其使用[Status](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.statuscode.aspx)属性

# geometry - 如何将一条线离散为与任意网格对齐的线段

> ID：13106834
> 
> 赞同：1
> 
> 时间：2012-10-28T06:17:53.117
> 
> 标签：geometry, line, trace, discretization

考虑：
![在此处输入图像描述](../Images/b830c6b7db7485e4bdce572f7842dfc3.png)
目的是将任意线段（红线）离散化为一组在任意网格（蓝线段）上对齐的连接线段。这里只显示了两种简单形式的网格，即正方形和旋转的正方形网格。红线可以是任何角度和大小。包括类型和单元格大小的网格配置由用户选择。Bresenham 的离散化可能适用于简单的情况，但即使这样也有两个障碍：

1.  它仅限于垂直和水平对齐的网格。
2.  它给出了需要线段的像素（即方形块）。

**重要更新：** 重要更新：我们对适用于任何网格复杂性的通用解决方案感兴趣。 ![在此处输入图像描述](../Images/5149a159c6c9b61d241862128ad1b856.png)

一种更通用的方法是令人感兴趣的。非常感谢提供伪代码或代码。这个问题也可以在[这里](https://gis.stackexchange.com/questions/70862/how-to-discretise-a-line-into-grid-lines)找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T06:34:50.523

在旋转矩形网格的情况下：

*   对线段端点应用逆旋转变换
*   使用 Bresenham 没有传统的半像素偏移（使像素块居中）
    *   该算法给出水平和垂直[或短轴，长轴]增量
*   对线段应用正向旋转变换

在“随机”网格的情况下，我建议使用基于单元格的方法，如果需要，每个单元格首先被分成凸面（Voronoi 区域）。例如。六边形网格已经由 voronoi 区域组成。保留每个单元格的邻居列表。

*   第一个任务是仅通过每个单元的邻居从起始单元到结束单元。幸运的是，在凸曲面细分的情况下，可以选择中心更接近/最接近目标的单元格。（搜索结束，当没有进展时）。

*   下一个任务是在每个单元格中找到从入口点到出口点的路径，CW 或 CCW。一个更短。

数字：

```
a----------b--------------d  
*          |              |  
     A     c       B      |     C
                          e
                          |           x
                          f-----------g 
```

这里端点“*”和“x”位于单元格的边界内。一种形成模式'*abcbdefgx'并将其简化为'*abdfgx'甚至'*adfgx'，因为'ba' dot 'db'（标准化）为零或至少非常接近。

# php - Hostgator 共享服务器在提交 Pear 邮件脚本后挂起

> ID：13106838
> 
> 赞同：0
> 
> 时间：2012-10-28T06:19:29.737
> 
> 标签：php, html, pear

显然，我的 hostgator 共享托管服务器在下面的脚本运行后挂起。

虽然脚本返回了成功发送的消息，但它并没有被发送。当我在整个网站中使用 SMTP 设置时，它已经过验证。我在此文档中找不到更多错误，而且我的主机似乎不知道它为什么挂起或为什么不发送。

我忽略了什么吗？有任何想法吗？

```
<?php
require_once "Mail.php";
include('../../Redirect_modules.php');

function sendmail($type,$subject,$body)
{
  if($type==1) $WET = DBGet(DBQuery("SELECT * FROM staff"));
  else $WET = DBGet(DBQuery("SELECT * FROM staff where profile='$type'"));  

  $from = "";

  $host = "";
  $username = "";
  $password = "";

  $headers = array ('From' => $from,
    'To' => $to,
    'Subject' => $subject);

  $smtp = Mail::factory('smtp',
    array ('host' => $host,
      'auth' => true,
      'username' => $username,
      'password' => $password));

  $mail = $smtp->send($to, $headers, $msg);

  foreach($WET as $e)
  {
    $to = $e['EMAIL'];
    $mail = $smtp->send($to, $headers, $body);

    if (PEAR::isError($mail)) {
      echo("<p>" . $mail->getMessage() . "</p>");
    } else {
      //echo("<p>Message successfully sent!!</p>");
    }
  }
}

function sendsinglemail($to,$subject,$body)
{
  $from = "Your Name";

  $host = "";
  $username = "";
  $password = "";

  $headers = array ('From' => $from,
    'To' => $to,
    'Subject' => $subject);

  $smtp = Mail::factory('smtp',
    array ('host' => $host,
      'auth' => true,
      'username' => $username,
      'password' => $password));

  $mail = $smtp->send($to, $headers, $body);

  if (PEAR::isError($mail)) {
    echo("<p>" . $mail->getMessage() . "</p>");
  } 
  else {
    echo("<p>Message successfully sent!!</p>");
  }

}

if($_REQUEST['modfunc']=='send')
{
  if($_POST['roption2']=='0')
  {
    sendmail($_POST['roption1'],$_POST['subject'],$_POST['message']);       
  }
  else
  {
    sendsinglemail($_POST['roption2'],$_POST['subject'],$_POST['message']); 
  }
}

$RET = DBGet(DBQuery("SELECT * FROM staff")); 
?>

<h2> Communicate with Teachers or Parents individually or by group via Email </h2>
<form action="<?php echo "Modules.php?modname=$_REQUEST[modname]&modfunc=send" ?>"     method=POST>
 <table width="500">
 <tr><td> To:</td> <td><select name="roption1" id="groupselect">
 <option value="1">All Administrators, Teachers and Parents</option> 
 <option value="admin">All Administrators</option>
 <option value="teacher">All Teachers </option>
 <option value="parent">All Parents</option>
 </select> 
  or 
 <select  name="roption2" id="individual">
    <option value="0" SELECTED>Select User</option> 
    <?php foreach($RET as $userdata){ ?>
      <option value="<?php echo $userdata['EMAIL']; ?>"><?php echo    $userdata['FIRST_NAME']." ".$userdata['LAST_NAME']; ?></option>
    <?php } ?>
 </select> 
 </td>
 </tr>
 <tr><td> Subject:</td> <td> <input type="text" name="subject" /> </td></tr>
 <tr> <td> </td> <td>Message: <br/> <textarea cols="60" rows="10" name="message">    </textarea> </td></tr>
  <tr> <td><input type="submit" value="send" name="submit" />
 </table>
</form>
<?php
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T22:18:05.687

我犯了一个明显的错误，FROM 字段没有正确填写，因此在反弹后导致挂起！

# sql - 自动标准化为 1NF（删除重复列）

> ID：13106839
> 
> 赞同：1
> 
> 时间：2012-10-28T06:19:45.023
> 
> 标签：sql, database, ms-access, normalization, etl

我有一个看起来像这样的表：

```
Person  Project1 Project2 Project3 WorkedWith1  WorkedWith2  WorkedWith3
John    A        B        Null     Ann          Mary         Null
Ann     A        B        C        Jeff         Null         Null
.... 
```

我正在寻找一种工具，可以帮助我将其转换为 1NF，而无需我编写任何代码。

具体来说，在这个例子中，我会告诉工具我想将数据重新排列到表`Persons`中`Projects`，`Assigned`（以多对多关系链接到）和`Persons`（以多对多关系链接到） . 我想要该工具做的就是根据这些说明移动数据。`Projects``WorkedWith``Persons``Persons`

我真的不在乎这个工具是否是某些 DBMS 的一部分，或者只是与纯文本 (CSV) 文件一起使用——而不涉及任何特定的数据库。我在 MS Access 2010 中尝试过表分析器，但除非我错过了什么，否则它无法解决这个特定任务。（不过，它在更简单的情况下也能完美运行。）

注意：我熟悉规范化；我不想学习任何东西——只是想节省自己的时间。我也理解为什么不存在用于数据库规范化的通用工具。我希望我的案例如此简单和普遍，以至于可能有一个工具可以处理它。我也不介意学习一个相对复杂的工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T06:54:24.720

我相信你想要的是一个[ETL](http://en.wikipedia.org/wiki/Extract,_transform,_load)软件。
据我所知，您需要预先创建目标表，但 ETL 可以将数据从一个数据库（或文件）拆分、重组和加载到另一个。

不过，对于您的目的来说，这可能有点过头了，使用 ETL 软件的学习曲线可能比编写一些 VBA 和一些查询来帮助将数据从一种形式传输到另一种形式要多得多，但如果这是您必须经常做的事情，可能还是值得的。

但是，在您的情况下，我很可能只是创建目标表并在输入表上进行多次传递以一次提取数据，用原始列中的不同数据填充`Persons`和`Projects`表，然后重新创建关系在单独的表中。

在 VBA 中进行此类工作时，我发现[字典](https://stackoverflow.com/questions/915317/does-vba-have-dictionary-structure)对于跟踪关系非常宝贵。

# java - Stax 解析 - 根据选定的父节点解析子节点

> ID：13106840
> 
> 赞同：5
> 
> 时间：2012-10-28T06:19:46.013
> 
> 标签：java, xml, xml-parsing, stax

我需要在服务器上解析一个巨大的 xml 文件并将其发送给客户端。
我想按需进行解析 - 意思是，首先只解析和显示父节点，当客户端单击父节点时 - 向服务器发送一个请求，告诉服务器选择了哪个父节点，然后到解析并发送它的孩子（同样，不是整个子树，而只是父母）。
我考虑过使用 STAX 解析器，但在涉及父子关系时我不明白如何使用它。我如何告诉解析器不要继续到下一个 START-ELEMENT 子元素，而是跳到其级别的下一个父元素？还有 - 有没有办法回到 ITERATOR 实现？选择一个父母并看到它的孩子后，我可以回去看前一个父母吗？
我真的很感激任何建议！
谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T11:35:53.983

1.  不，您不能在不先解析 XML 文档的情况下跳过它的子树。对于每个解析器都是如此，而不仅仅是 StAX。（**知道**要跳到哪一点意味着您已经解析了两者之间的元素。）

2.  但是，通过维护一个随每个开始元素事件递增并随每个结束元素事件递减的嵌套级别计数器，很容易忽略来自低于目标级别的级别的所有事件。

3.  解析是一种方式，不是随机访问，不能来回跳转。（同样，这将假定解析器存储到目前为止已解析的所有内容的表示，这正是创建 StAX 来避免的。）当然，您可以尝试记录文件中每个父标记的字节位置，然后稍后如果您已打开文件以进行随机访问，请寻求它。但是，这种方法有很多陷阱。

总而言之，您的用例看起来不太适合 StAX。您尝试过[VTD-XML](http://vtd-xml.sourceforge.net/)吗？根据您的文件有多大，它可能正是您想要的。

# php - 致命错误：使用 AWS EC2 API 时未捕获的异常“cURL_Exception”

> ID：13106841
> 
> 赞同：1
> 
> 时间：2012-10-28T06:19:50.257
> 
> 标签：php, amazon-web-services, wamp

我正在尝试在 WAMP 上使用 Amazon Web Service API 解决问题。我 2 小时前才开始在 AWS 上工作，并且经常遇到这些错误：

> 致命错误：第 843 行的未捕获异常“cURL_Exception”和消息“.../sdk-1.5.15/lib/requestcore/requestcore.class.php”

和

> cURL_Exception：cURL 资源：资源 ID #13；cURL 错误：SSL 证书问题，验证 CA 证书是否正常。详细信息：错误：14090086：SSL 例程：SSL3_GET_SERVER_CERTIFICATE：证书验证失败（cURL 错误代码 60）。有关错误代码的说明，请参见[http://curl.haxx.se/libcurl/c/libcurl-errors.html](http://curl.haxx.se/libcurl/c/libcurl-errors.html)。

我想这意味着我的cURL证书已经过期。所以我去cURL官网下载了最新的SSL证书PEM格式文件。然后我将它转换并放在C：/Windows中。

然后事实证明它不起作用。我必须关闭cURL验证，这绝对不是一个好主意。

我写的整个php脚本如下：

```
 <?php
 include 'aws-sdk-for-php/sdk-1.5.15/sdk.class.php';
 $ec2 = new AmazonEC2();
 $response = $ec2->describe_availability_zones(); 
 ?> 
```

有什么想法吗...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:49:46.633

新发布[的适用于 PHP 2 的 AWS 开发工具包](http://github.com/aws/aws-sdk-php)在处理瞬态 SSL 错误方面做得更好。

# java - 在java中安排一个事件每秒发生10次

> ID：13106842
> 
> 赞同：0
> 
> 时间：2012-10-28T06:20:03.727
> 
> 标签：java

我正在制作一个在 java 中每秒执行 10 次的游戏。我想做一些为我安排的东西 什么是一个很好的资源来看看？编辑：必须是原始java源......没有外部软件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T06:23:36.330

创建一个`TimerTask`并安排它在特定时间间隔后运行应该可以解决问题..

```
TimerTask timerTask = new TimerTask() {

            @Override
            public void run() {
                // TODO Auto-generated method stub
                //your task
            }
        }; 
```

安排它使用

```
new Timer().scheduleAtFixedRate(timerTask, 0, 60*100); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T06:22:46.040

看看java石英。它可以帮助你做任何你想做的事

[http://www.mkyong.com/java/quartz-scheduler-example/](http://www.mkyong.com/java/quartz-scheduler-example/)

# r - 平滑周期性时间序列的适当方法？

> ID：13106846
> 
> 赞同：0
> 
> 时间：2012-10-28T06:21:37.150
> 
> 标签：r, time-series, regression, linear-regression, polar-coordinates

我有一个周期性的时间序列，几年内的气温，我希望能够预测它的未来值。

我已经计算了一年中每个小时的可用年份的平均值，这很好，但它显然很嘈杂，因为我只有 4 年的数据。

*   一种前进的方法可能是进行高斯平滑，但更好的选择可能是拟合样条曲线。
*   我搜索并发现`lm.circular`，这看起来像是一个可行的解决方案候选者。

    *   它没有任何指定公式的方法，因此无法要求它适合样条曲线。
    *   我尝试`lm.circular`使用一阶多项式，但出现了一个实际问题：内存不足。请注意，标准`lm`几乎是即时的，并且在相同的数据上不使用明显的内存
    *   我还尝试要求它适合 Von Mises (type='cl')，它要求我提供一个 'init' 参数，我无法从描述中真正理解我应该在 'init' 中输入什么？
*   使用法线`lm`并不是一个真正的选择，因为它在周期的任何一端都会产生可怕的结果。
*   我想另一种可能性是使用 ets/HoltWinters，时间序列频率等于一年中的小时数？

我不太确定哪种方式是最好的前进方式，但我怀疑这是一个非常普遍的问题，并且可能有非常标准的方法来处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T07:08:28.417

好的，最后我找到了一个超级简单的方法。您不需要任何花哨的软件包，只需使用标准`lm`并将余弦和正弦应用于时间线：

```
model <- lm( y ~ I(sin(x/periodlength*2*pi) * I(cos(x/periodlength*2*pi)), trainingdata ) 
```

... .然后您可以根据自己的喜好调整此公式。

（编辑：哦，是的，它超级快而且不占用太多内存）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:55:41.567

我使用 ARIMA 来预测未来值

是这样的

```
fit <- auto.arima(values)//for getting order of ARIMA
//here values-> time series data

future.values<-predict(fit,n.ahead=24)//used for predicting future values
//n.ahead-> u can give the maximum number of values you want to predict 
```

以下链接将帮助您了解更多详情

[http://www.jstatsoft.org/v27/i03/paper](http://www.jstatsoft.org/v27/i03/paper)

注意：“值”必须是时间序列数据。如果不是，我们可以转换为时间序列数据，如 values.ts<-ts(values,frequency=)

# javascript - CRM 2011 javascript 错误 - 对象未定义，明确定义时

> ID：13106849
> 
> 赞同：2
> 
> 时间：2012-10-28T06:22:07.690
> 
> 标签：javascript, dynamics-crm-2011

在我们的云托管 CRM 2011 中，我在机会表上有 3 个字段

*   合同期限（查找）
*   服务开始日期（日期和时间）
*   服务结束日期（日期和时间）

![新表单的默认值](../Images/16aab4518c00dab0c776e14461991dc4.png)

合同条款是对称为合同条款的自定义实体的查找。项目如下：

![所有合同条款记录](../Images/c402fc2ea4f42462a11d63771fe5d791.png)

我想根据另外两个中的条目计算和填充服务关闭日期字段。我的合同期限和服务开始日期的 OnChange 事件的 javascript 代码如下：

```
function UpdateAgreementCloseDate() {
    //debugger;
    if (Xrm.Page.getAttribute("po_contractterm").getValue() != null && Xrm.Page.getAttribute("po_agreementstartdate").getValue() != null) 
        {
            //Get Months from agreement term
            var ContractTermMonths = 0;
            ContractTermMonths = Xrm.Page.getAttribute("po_contractterm").getValue()[0].keyValues.po_months.value;

            //Get Start Date
            var currentAgreementStartDate;
            currentAgreementStartDate = Xrm.Page.getAttribute("po_agreementstartdate").getValue();

            //Add contract term monthsto start date
            var AgreementCloseDate = getExpirationDate(currentAgreementStartDate, parseFloat(ContractTermMonths));

Xrm.Page.data.entity.attributes.get("po_agreementclosedate").setValue(AgreementCloseDate);
Xrm.Page.data.entity.attributes.get("po_agreementclosedate").setSubmitMode("always"); // Save the Disabled Field
        }
}

function getExpirationDate(tempdate, numberofmonths) {
    var next_month = tempdate.getMonth() + numberofmonths;
    var next_year = tempdate.getFullYear();
    if (next_month > 11) {

        if (numberofmonths > 11) {
            var extrayears = parseInt(next_month / 12);
            var remainingmonths = next_month % 12;
            next_month = remainingmonths;
            next_year = next_year + extrayears;
        }
        else {
            next_month = 0;
            next_year++;
        }
    }

    tempdate.setMonth(next_month);
    tempdate.setYear(next_year);
    return tempdate;
} 
```

当用户填充计算所需的两个值时，代码会按预期运行。但是，如果其中一个字段（在本例中为合同期限）在创建新记录时在 javascript 中分配了默认值，则当用户为服务开始日期提供值时，不会发生计算：

![计算没有发生](../Images/0064dfb7784d5d393d75dea27211f5c2.png)

在我的函数中抛出调试器允许我调试 javascript 并且我看到了问题所在。但是，我不明白为什么这是一个问题。

![例外](../Images/def76013a25d8f73507aede8ac347d35.png)

为什么当用户手动填充这两个字段时，这个确切的代码会起作用，但当其中一个字段被自动填充时却不行？该错误告诉我该对象为空，但显然它在任何一种情况下都不为空。为什么当用户手动输入一个值时这会起作用，但当该值通过 javascript 代码预先填充到表单 OnLoad 方法中时却不起作用？

**更新**

上面抛出异常的部分是访问 po_months 属性 - 调试器告诉我该属性为空：

```
ContractTermMonths = Xrm.Page.getAttribute("po_contractterm").getValue()[0].keyValues.po_months 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T05:02:12.047

我认为错误很简单：要么 `Xrm.Page.getAttribute("po_contractterm").getValue()[0].keyValues`没有财产`po_months`，要么`Xrm.Page.getAttribute("po_contractterm").getValue()[0].keyValues.po_months === null`

您的代码在一行中浏览了许多属性。如果你不能保证这些属性中的每一个都存在某些东西，那么你就是在自找麻烦。

由于我认为您仍然有些困惑，因此请在错误行之前设置一个断点，然后查看以下所有可能的表达式中失败的地方。

```
Xrm.Page.getAttribute("po_contractterm").getValue()  //this shouldn't be null
Xrm.Page.getAttribute("po_contractterm").getValue()[0]
Xrm.Page.getAttribute("po_contractterm").getValue()[0].keyValues
Xrm.Page.getAttribute("po_contractterm").getValue()[0].keyValues.po_months  //this probably doesn't exist or is null.
Xrm.Page.getAttribute("po_contractterm").getValue()[0].keyValues.po_months.value 
```

我们可以消除检查表达式的一部分，`Xrm.Page.getAttribute("po_contractterm").getValue()`因为该部分在`if`. 但是，为了保持理智而检查它并没有什么坏处，并且使用 Visual Studio 调试器，我认为您应该能够单击导航浏览其中的每一个，除非对象太大。了解调试器是否对您撒谎也很有用，因为您的一些评论似乎表明您相信。调试器*偶尔会*撒谎，或者（更频繁地）提供相当迟钝的信息。

这是你不能偷懒的事情。好吧，也许如果你使用[JSONPath 之](http://goessner.net/articles/JsonPath/)类的东西，你可能会*有点*懒惰，但否则，如果你不打算使用这样的工具，请确保在需要时路径存在，或者进行适当的测试以防万一它可能不存在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T10:42:57.723

我想我现在明白这个问题了。

简而言之：您假设查找字段将使您能够访问查找记录的字段。这是不正确的。

为了对此进行扩展，让我们从 Crm 在查找字段中实际为您提供的内容开始。

如果您在[此处](http://msdn.microsoft.com/en-us/library/6881e99b-45e4-4552-8355-2eef296f2cd8#BKMK_getValue)查看 MSDN 。我们可以看到，当对查找属性执行 getValue() 时，我们会返回一个包含三个字符串属性的数组。

> entityType String：查找中显示的实体的名称
> 
> id String：查找中显示的记录的 GUID 值的字符串表示形式。
> 
> name 字符串：表示要在查找中显示的记录的文本。

注意事项：

没有`keyValues`财产（我不确定你从哪里得到这个 - 如果我在这里遗漏了什么，请告诉我）。

除了名称字段，我们没有任何其他记录数据。例如：如果这是对联系人的查找，我们可以告诉它的全名（来自 name 属性），但不能告诉它的地址或电话号码。

因此，总结一下当 Crm 设置查找时它失败的原因是因为它只提供来自上面的信息，它不会填充`keyValues`或来自查找记录的任何字段，例如`po_months`。

我猜测设置查找时它起作用的原因是因为您`keyValues`在代码中的其他位置创建属性。

如果您想要通过查找相关的记录中的信息，则必须执行 Web 服务调用以获取该信息 - 使用查找中的 id。

# javascript - 点击后背景消失我所有的模式 - 引导 Twitter

> ID：13106850
> 
> 赞同：0
> 
> 时间：2012-10-28T06:22:09.873
> 
> 标签：javascript, twitter-bootstrap

问候，

阅读 twitter 引导程序的模态选项。有一个选项可以防止我在模态外部或 div.modal-backdrop 中单击时关闭模态。

背景选项是：false。但是，我意识到这个 div 包含黑色背景，如果我更改为 FALSE 会删除背景。我的问题是，如果我放这个选项，我可以让背景消失吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T05:31:35.803

I'm not sure if I understood but, if I did, I think it's related to this: "Alternatively, specify static for a backdrop which doesn't close the modal on click." [http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)

Sorry if I got it wrong...

# android - Android：保持背景视图改变前景视图

> ID：13106854
> 
> 赞同：0
> 
> 时间：2012-10-28T06:22:48.843
> 
> 标签：android, user-interface, android-activity

我正在制作一个使用视频源的应用程序。屏幕上将显示几个 UI 元素。根据用户单击的按钮，UI 将演变并显示不同的按钮/选项。

就活动而言，实现不断变化的 UI 的最佳方式是什么。我应该使用 1 个活动（这样我只需要加载一次视频缓冲区），然后更新该活动中的 UI 设置吗？或者，我是否应该为每个 UI 组合设置不同的活动，每次都在后台重新加载视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T06:35:10.813

片段在这里会是一个不错的选择吗？

# string - 将 System::object 转换为字符串数组

> ID：13106860
> 
> 赞同：1
> 
> 时间：2012-10-28T06:25:09.330
> 
> 标签：string, c++-cli

在通过串口接收数据的后台工作人员工作期间，我需要返回字符串的四维数组。

在后台工作人员中：

```
 array<String^>^ Received = gcnew array<String^>(4);
    backgroundWorker1->ReportProgress(10,Received); 
```

报告进度：

```
private: System::Void backgroundWorker1_ProgressChanged(System::Object^ sender,   System::ComponentModel::ProgressChangedEventArgs^  e)
{
    array<String^>^ Received2 = gcnew array<String^>(4);
    Received2 =(e->UserState);
} 
```

我正进入（状态：

> 错误 C2440：“=”：无法从“System::Object ^”转换为“cli::array”

这并不奇怪，但是如何转换和分配`UserState`到`string array`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T19:47:40.497

您需要将对象句柄转换为数组句柄，然后检查 nullptr 以查看转换是否成功，例如：

```
array<String^>^ Received2 = dynamic_cast<array<String^>^>(e->UserState);
if (Received2 != nullptr)
{
    // Cast was successful, safe to use Received2.
}
else
{
    // Cast failed, do not use Received2.
} 
```

# java - Java/Android：有奇怪的日期解析问题

> ID：13106861
> 
> 赞同：0
> 
> 时间：2012-10-28T06:25:17.000
> 
> 标签：java, android, date

我正在使用 Eclipse 和 android 版本作为 API-15 (ICS) 开发一个 android 应用程序。

我在将字符串解析为日期对象时遇到了一个奇怪的问题。这是我的代码：

```
DateFormat df = new SimpleDateFormat("M/d/yyyy h:mm:ss a");
df.setTimeZone(TimeZone.getTimeZone("gmt"));
String st = "1/1/1990 12:00:00 AM";

try {
    Date dt = df.parse( st );
        return dt;
    } catch (ParseException e) {
        return null;
    } 
```

它不断给出 ParseException 错误。我尝试了各种日期字符串的组合，但仍然无法将它们转换为日期对象。

此外，我的字符串应该包含 UTC 中的日期+时间，因此要创建的新日期对象将使用 UTC。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T06:32:26.690

您遇到异常，因为您解析的字符串与您格式化的格式不匹配，请将日期格式更改为如下所述。始终建议使用两位数的日期或时间格式。

DateFormat df = new SimpleDateFormat("MM/dd/yyyy hh:mm:ss a");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T06:36:44.137

尝试将月份中的某天表示为两位数“MM/dd/yyyy hh:mm:ss a”。我有这段代码，它对我来说很好用：

```
SimpleDateFormat dfm = new SimpleDateFormat("yyyy-MM-dd");

                     try {

                        date=dfm.parse(datestring);;
                    } catch (ParseException e) {

                        e.printStackTrace();
                    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T06:49:46.803

我想我已经追踪了这个问题。这是因为进口混乱。我删除了所有导入并使用了 Eclipse 的组织导入功能。现在它不再给出错误。

我想知道之前导入了什么代码被 lint 接受了。我认为 Java 和 Android 有两个不同的库用于处理日期。现在我只得到了日期的 Java 库。工作正常。

麻烦各位了。

# c# - 在 C# 运行时加载 dll

> ID：13106864
> 
> 赞同：2
> 
> 时间：2012-10-28T06:25:49.260
> 
> 标签：c#, dll, interop

我正在尝试为在运行时处理加载 dll 的 C# 应用程序编写通用服务。它读入配置文件中指定的目录列表，并检查这些目录是否存在缺失的程序集。为此，我计划在 C# 中使用 assemblyResolve 事件处理程序，如下所述：http: [//support.microsoft.com/kb/837908](http://support.microsoft.com/kb/837908)

您能否就我应该如何设计以及这种方法的潜在问题提供一些建议？这是否适用于 CLR 在运行时找不到的所有 C# dll 和 C++ 互操作 dll？

如果有用于此目的的现有应用程序或实用程序，请指出它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T06:51:10.320

[从特定目录路径加载程序集，](http://www.chilkatsoft.com/p/p_502.asp)这是一个很好的示例。[在这里]您还可以找到有关如何加载程序集的讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T06:56:22.010

或者，使用 MEF（Microsoft 可扩展性框架）也可能是合适的。最后，一切都从 Google 和“动态加载程序集”或类似的琐碎查询开始。

# asp.net - .aspx 类的静态成员的作用域

> ID：13106867
> 
> 赞同：0
> 
> 时间：2012-10-28T06:26:10.060
> 
> 标签：asp.net

当我`static`在 aspx 类的代码隐藏文件中声明一个成员时。例如

```
public partial class MyAspNetPage : System.Web.UI.Page
{
    public static int IntVal;
} 
```

据我所知，`static`一个类的成员由该类的所有实例共享。静态成员如何在 Asp.Net 请求中工作？该`IntVal`值未在`MyAspNetPage`右侧的所有请求中共享？有人可以解释和澄清吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T06:34:08.950

ASP.NET 中的任何静态变量都在应用程序的所有请求和用户之间共享。

# custom-action - 使用上传图片创建自定义订单时，Magento 显示内部 500 错误

> ID：13106871
> 
> 赞同：1
> 
> 时间：2012-10-28T06:27:20.527
> 
> 标签：custom-action, magento-1.7, internal-server-error

我在 magento 中创建自定义订单并在购物车中添加自定义产品。

但是当我尝试使用..创建自定义订单时，`static image upload`这一切都成功运行了..在某些日子之前，我在下面遇到错误..

```
Error 500: Internal Server Error

The server encountered an unexpected condition which prevented it from fulfilling the request.

The problem is on the server side, not with your browser or the address. Most probably, a certain service (e.g., Tomcat engine) is down. Please contact your webmaster. 
```

我需要做什么..请尽快给我发送解决方案。

# php - 在 Twig 模板中使用 php 类方法

> ID：13106873
> 
> 赞同：0
> 
> 时间：2012-10-28T06:28:29.793
> 
> 标签：php, twig, slim

在我的用户类中，我有一个多维数组，其中包含允许该用户的权限。根据这些权限，某些内容应该可以在 Twig 模板中查看，例如访问站点管理部分的链接。为了检查用户是否具有必要的权限，我有一个类方法`$user->hasRights( $right )`，如果该权限包含在 $user->_rights 数组中，则该方法应返回 true。

我的问题是如何使用 Twig 模板调用该类方法？这给了我一个异常错误。

```
{% if user.hasRights('admin') %}
   <!-- admin link here -->
{% endif %) 
```

$user->_rights 示例：

```
$user->_rights = array(
    array( 'id' => 1, 'name' => 'admin' ),
    array( 'id' => 2, 'name' => 'moderator' )
); 
```

还有许多其他权利……根据权利的存在来设置类属性并不完全可行。

# arrays - 如何在perl中合并两个数组，每个数组的交替值

> ID：13106875
> 
> 赞同：16
> 
> 时间：2012-10-28T06:29:20.213
> 
> 标签：arrays, perl

假设我有 2 个数组，如下所述

```
@a1 = ("Vinay", Raj, harry);
@b1 = ("dude","rock"); 
```

合并后我想要这样的结果

```
[
    Vinay
    dude
    Vinay
    rock
    Raj
    dude
    Raj
    rock
    harry
    dude
    harry
    rock
] 
```

基本上我想将array1的每个索引值合并到array2的所有索引值。

除了上述问题，我还有另一个问题。

对于上述相同的问题，如何在特定数组索引处合并 2 个数组。例如，我有 2 个每个 160 个元素的数组，现在我想在集合中的每个第 5 个元素处合并数组，这可能吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-10-28T06:33:01.663

只需创建一个新数组：

```
my @merged = (@a1, @b1); 
```

这是一个完整的例子：

```
my @a1 = ("foo", "bar");
my @a2 = ("baz", "spam");

my @merged = (@a1, @a2);

print $merged[3]; #=> "spam" 
```

**编辑**：我错过了订购要求。您只需要将`zip`它们放在一起，您可以这样做`List::MoreUtils`：

```
use List::MoreUtils qw(zip);
use Data::Dumper qw(Dumper);

my @a1 = ("Vinay", "Raj", "harry");
my @a2 = ("dude", "rock");

my @merged = zip(@a1, @a2);

print Dumper(\@merged); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-28T06:34:38.000

这是一种方法。不过，可能不是最好的 perl 语法。双 for 循环意味着您将把两个数组的每个组合推入合并数组。我已尝试对其进行设置，以使结果符合您在问题中指定的顺序。

```
my @merged;

for my $a ( @a1 ) {
  for my $b ( @b1 ) {
    push( @merged, ($a, $b) );
  }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-28T06:53:35.730

这是另一种选择：

```
use strict;
use warnings;
use Data::Dumper;

my $a = join ',', qw/Vinay Raj harry/;
my $b = join ',', qw/dude rock/;

my @merged = map { split '-' } glob "{$a}-{$b}";

print Dumper \@merged; 
```

输出：

```
$VAR1 = [
          'Vinay',
          'dude',
          'Vinay',
          'rock',
          'Raj',
          'dude',
          'Raj',
          'rock',
          'harry',
          'dude',
          'harry',
          'rock'
        ] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-28T13:10:06.873

首先，不要使用裸词，并且如 jmdeldin 的评论中所述，始终放在`use strict; use warnings;`脚本的开头。

那么如何制作这些列表`@a1`和`@b1`？要么使用引号：

```
my @a1 = ('Vinay', 'Raj', 'harry');
my @a2 = ('dude', 'rock'); 
```

或使用`qw`：

```
my @a1 = qw(Vinay Raj harry);
my @a2 = qw(dude rock); 
```

如何按规定“合并”这些？一种方法是使用一对嵌套循环。更简洁地说，使用 a`map`的 a `map`：

```
my @merged = map {my $outer = $_; map {($outer, $_)} @b1} @a1; 
```

您不需要 perl 5.12 的任何特殊功能。只需利用列表崩溃的事实。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-28T09:08:00.323

它可以在一行中完成：

```
@merged = grep {not ref} map {[our $t = $_], map {$t,$_} @b1} @a1; 
```

并且在内部推动时不那么残酷

```
map {our $t = $_, map {push(@merged, $t, $_)} @b1} @a1; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-28T10:32:29.897

`Set::CrossProduct`从 CPAN使用。

`zip`from List::MoreUtils 在其参数列表的相应（而不是 cross）索引处*压缩*元素*。*

# ruby-on-rails-3 - 如何在创建根时构建/创建 mongoid 多级嵌入式文档，同时尊重所有自然回调？

> ID：13106879
> 
> 赞同：0
> 
> 时间：2012-10-28T06:30:39.993
> 
> 标签：ruby-on-rails-3, callback, mongoid

假设我有这样的模型结构：

```
class User
  include Mongoid::Document
  include Mongoid::Timestamps

  embeds_one :personal_data
  embeds_one :professional_data

  ...
end

class PersonalData
  include Mongoid::Document
  include Mongoid::Timestamps

  embeds_one :family_data

  field :stuff, :type => String

  ...
end

class ProfessionalData
  include Mongoid::Document
  include Mongoid::Timestamps

  field :stuff, :type => String

  ...
end 
```

因此，简单地说，用户将拥有一棵如下所示的数据树：

```
User -> PersonalData -> FamilyData
     -> ProfessionalData 
```

您可能已经注意到，我的每个模型都使用 Mongoid:Timestamps，因为我想知道用户的每个子部分何时被修改。

现在变得棘手的是，我希望在创建一个新用户时，它会自动获取使用它创建的所有嵌入式模型，同时使用适当的回调来设置时间戳。

理想情况下，我想避免对数据库进行多次写入，但到目前为止我还没有找到一种优雅的方式来做到这一点。

目前我的用户模型中有这个：

```
after_create :create_personal_data
after_create :create_professional_data 
```

在 PersonalData 模型中：

```
after_create :create_family_data 
```

但是结果不是我所期望的，它适用于 ProfessionalData 模型，它被创建并且 TimeStamps 回调工作， :created_at 和 :updated_at 设置正确。但是对于 PersonalData 模型，它不能正常工作： - 嵌入式模型被创建 - 但回调没有被正确调用，并且 TimeStamps 没有设置 - 嵌入式 FamilyData 没有被创建 un PersonalData

我正在使用带有 Rails 3.2 的 Mongoid 2.4.12

谢谢。

亚历克斯

# shell - Shell 脚本没有给出正确的输出

> ID：13106884
> 
> 赞同：2
> 
> 时间：2012-10-28T06:31:52.350
> 
> 标签：shell, unix

```
for i in `ls -lrt|grep ^d|cut -d ' ' -f 13-`
do
          cd $i
          ls
          cd ../
 done 
```

在上面的示例中，我希望脚本进入每个目录，填充该目录的所有文件，从中出来，然后进入其他目录并打印其内容。请建议这里有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T07:14:44.903

请检查字段 13 是否是 ls 命令输出的最后一个字段所需的字段。在我的系统中，它是第 9 个字段。因此，我已将您的代码更改为，

```
for i in `ls -lrt|grep ^d|cut -d ' ' -f9`
do
      echo  "Directory -$i"
      cd $i
      ls
      cd ../

done 
```

此更改后它工作正常。

你也可以使用其他命令来完成它，比如 sed、awk。我使用 awk 完成了它，但没有**对任何字段值进行硬编码（使用内部变量 NF - 字段数来获取最后一个字段，它应该是目录的名称）。**

```
#for i in `ls -lrt|grep ^d|cut -d ' ' -f9`
for i in `ls -lrt|grep ^d|awk '{print $NF}'`

do
      echo  "Directory -$i"
      cd $i
      ls
      cd ../

done 
```

这也很好用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T07:03:03.863

cut 命令无法正常工作，因为 ls -ltr 输出中的每个字段之间存在可变数量的空格，这是由于 ls 格式和可变长度文本字段的变幻莫测。从 ls 目录列表中解析文件名的更可靠方法是将 cut 命令替换为 awk '{print $9}'，因此 for 循环应如下所示：

```
for i in `ls -lrt|grep ^d| awk '{print $9}'` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T13:20:14.717

要仅遍历当前目录中的目录，请使用模式`*/`，所以

```
for dir in */; do
    cd "$dir"
    do stuff
    cd ..
done 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-28T06:43:58.967

执行以下操作之一是否符合您的要求？

```
ls *
ls * -r 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-28T07:31:10.957

永远不要对“for file in `ls`”进行任何变体，因为对于名称中带有空格的文件，它将失败。所有你需要的是：

```
find . -print 
```

如果你想对当前目录中的每个文件做一些事情，那么它只是

```
for file in *
do
    printf "Working on %s\n" "$file"
    <do stuff with "$file">
done 
```

或对于所有子目录，然后使用 xargs 或：

```
find . -print |
while IFS= read -r file
do
    printf "Working on %s\n" "$file"
    <do stuff with "$file">
done 
```

尽管后者与任何基于管道的解决方案一样，对于名称中带有换行符的文件将失败。

# c# - 单元格焦点上的 CellValidating 错误

> ID：13106891
> 
> 赞同：2
> 
> 时间：2012-10-28T06:34:11.647
> 
> 标签：c#, winforms, datagridview, event-handling

我的表单中有 2 个 Datagridview，我在我的 datagridview 中使用单元格验证和单元格验证事件处理程序。如果我将光标留在单元格本身并尝试通过菜单单击打开一个新文件..我收到一条错误消息：“用户代码未处理异常参数，索引超出范围。”

我知道，当光标位于单元格中时，它会获得焦点并且它正在单元格验证过程中，这就是我收到此错误的原因。

此行引发错误消息：“用户代码未处理异常参数，索引超出范围。” `datagridview.Rows[e.RowIndex].ErrorText = "";`

我怎样才能避免这个错误？或者如何在菜单单击打开新文件时移除焦点？谢谢你。

```
private void datagridview_CellValidating(object sender, CellValidatingEventArgs e)
            {
                if (e.ColumnInfo.Name == "Item1" || e.ColumnInfo.Name == "Item2")
                {
                    datagridview.Rows[e.RowIndex].ErrorText = "";
                    int newInteger;
                    if (datagridview.Rows[e.RowIndex].IsModified)
                        return;
                    if (!int.TryParse(e.Value.ToString(),
                         out newInteger) || newInteger < -50000 || newInteger > 50000)
                    {
                        e.Cancel = true;
                        datagridview.Rows[e.RowIndex].ErrorText = "The value must be a non-negative integer";
                    }
                }

            }

 private void datagridview_CellValidated(object sender, CellValidatedEventArgs e)
            {

                if (e.ColumnIndex != 3)
                    return;
                int nextRowIndex = e.RowIndex + 1;
                int lastRowIndex = datagridview.Rows.Count - 1;
                if (nextRowIndex <= lastRowIndex)
                {
                    var value = datagridview.Rows[e.RowIndex].Cells[3].Value.ToString();
                    datagridview.Rows[nextRowIndex].Cells[2].Value = value;
                }
            } 
```

MenuItem 点击打开新文件到 Datagridview：

```
private void m_test1_Click_1(object sender, EventArgs e)
    {
        myconfig = Myconfig.DeserializeFromXmlFile(@"test2.xml");
        Display(rseConfig);
        m_ConfigPages.Visible = true;

    }

private void m_test2_Click(object sender, EventArgs e)
  {
        myconfig = Myconfig.DeserializeFromXmlFile(@"test2.xml");
        Display(myconfig );
        m_ConfigPages.Visible = true;

    } 
```

我正在使用 DataError Event Hnadler，但它不起作用：

```
private void datagridview_DataError(object sender, DataGridViewDataErrorEventArgs e)
        {
            // Don't throw an exception when we're done.
            e.ThrowException = false;

            // Display an error message.
            string txt = "Error with " +
                datagridview.Columns[e.ColumnIndex].HeaderText +
                "\n\n" + e.Exception.Message;
            MessageBox.Show(txt, "Error",
                MessageBoxButtons.OK, MessageBoxIcon.Error);

            // If this is true, then the user is trapped in this cell.
            e.Cancel = true;
        } 
```

甚至，我有 row 和 col 索引：`datagridview.Rows[e.RowIndex].Cells[e.ColumnIndex].Value`仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T09:38:01.287

尝试添加此事件

```
dgv.DataError += new DataGridViewDataErrorEventHandler(dgv_DataError);

void dgv_DataError(object sender, DataGridViewDataErrorEventArgs e)
{
      //Show any message or not.. its upto you now 
} 
```

**编辑 ：**

将您的 cellvalidating 事件修改为

```
private void datagridview_CellValidating(object sender, CellValidatingEventArgs e)
{
  try
  {
     int temp = Convert.ToInt32(e.Value.ToString())
     if(temp < -5000 || temp > 5000)     
          datagridview.Rows[e.RowIndex].ErrorText = "The value must be bteewn 5000 and 5000";
  }
  catch
  {
     datagridview.Rows[e.RowIndex].ErrorText = "The value must be integer and bteewn 5000 and 5000";
  }
} 
```

# jdbc - 插入多个表并填充 GUI 表

> ID：13106894
> 
> 赞同：0
> 
> 时间：2012-10-28T06:35:05.203
> 
> 标签：jdbc

我正在开发一个 GUI，其中包含一个包含 8 列的表（A、B、C、D、E、F、G）

在数据库中，我有两个表。表 1 包含 (A,B,C,D,E+)，表 2 包含 (E,F,G)。这里 E+ 是表 1 的 FK。

现在我想使用准备好的语句插入，然后填充 GUI 表。我正在编写插入查询，如下所示。表 1 中的 E+ FK 用于填充表 2 的值。

```
insert into table1 (a,b,c,d,e,f,g) values (?,?,?,?,(select t2.E from t2 where t2.E=2)

ps.setString(1,a)
ps.setString(2,b)
ps.setString(3,b)
... 
```

通过使用上述查询，我​​无法插入 DB 以及 GUI 表。请让我知道正确的查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T07:43:43.723

你的问题很混乱：

> 我正在开发一个 GUI，其中包含一个包含 8 列的表（A、B、C、D、E、F、G）

那是 7 列，而不是 8 列。

> 在数据库中，我有两个表。表 1 包含 (A,B,C,D,E+)，表 2 包含 (E,F,G)。这里 E+ 是表 1 的 FK。

为什么 Table1 会包含自身的外键？

> 插入 table1 (a,b,c,d,e,f,g)

你怎么能想象这会起作用，因为表 1 没有任何名为 e、f 和 g 的列？

* * *

首先，将数据库内容与 GUI 内容分离为不同的类。这两个方面不应混为一谈。

然后学习SQL。如果要插入 2 个表，则需要 2 个插入语句：一个插入 table1，另一个插入 table2。如果 FK 在 table2 中，那么第一个插入必须是 table1 中的插入，因为 table2 中的 FK 必须引用 table1 中存在的行。

# android - 将 admob 添加到应用程序。如何将目标 SDK 更改为 3.2？

> ID：13106896
> 
> 赞同：0
> 
> 时间：2012-10-28T06:35:43.553
> 
> 标签：android, intellij-idea, android-manifest, admob

我在清单中添加了以下内容：

```
 <activity android:name="com.google.ads.AdActivity"                
   android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|
   uiMode|screenSize|smallestScreenSize"/> 
```

我在 SDK-Manager 中下载了 API-13 (android 3.2)。

我在清单中添加了“android:targetSdkVersion="13"”：

```
<uses-sdk android:targetSdkVersion="13"  android:minSdkVersion="4"/> 
```

但我看到以下错误，标有红色：“uiMode|screenSize|smallestScreenSize”

我使用 IntelliJ IDEA 11。

我在 file-project_structure-SDKs 中将 Android SDK 更改为 3.2，但我仍然在“uiMode|screenSize|smallestScreenSize”的清单中看到红色错误。“Theme.Dialog”也变成了以下错误标记为红色：

```
<activity android:name=".DeviceListActivity"
              android:label="@string/select_device"
              android:theme="@android:style/Theme.Dialog"
              android:configChanges="orientation|keyboardHidden" /> 
```

那么该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T07:55:00.983

或者您可以直接将 project.properties 文件更改为具有例如`target=android-13`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T06:48:01.360

您必须像这样更改构建 SDK：右键单击项目 -> 属性 -> Android -> 在那里您可以选择您的构建目标。

或者您可以在 project.properties 文件中更改它。只需更改之后的 API 级别`target=android-[API Level here]`

如果您想使用 AdMob，您必须将其设置为 >= API 级别 13

# r - 使用锁定变量复制 R5 引用类

> ID：13106897
> 
> 赞同：5
> 
> 时间：2012-10-28T06:36:04.673
> 
> 标签：r, reference-class

当我没有锁定其中一个字段时，我可以复制 R5 引用类，但如果其中一个字段被锁定，它不会复制。示例代码如下（注释掉了锁定调用）。我的问题：为什么我不能使用 copy() 方法制作带有锁定字段的实例副本？

```
example <- setRefClass('example',
    fields = list(
        count = 'numeric',
        data = 'data.frame', 
        d.accessor = function(x) {
            if ( !missing(x) ) 
                data <<- x
            else
                .self$data 
        }
    ),
    methods = list(
        initialize = function( data ) {
            if (!missing( data ))
                d.accessor <<- data
            count <<- 0
        },
        finalize = function()
            print('Bye Bye'),
        accumulate = function(x)
            count <<- count + x
    )
)

#example$lock('data') # write-1, read-many
instance <- example$new() # instantiation
df <- data.frame(x=1, y=2)# example df
instance$d.accessor <- df # 1st set - okay!
copyInst <- instance$copy() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T17:04:49.953

这是因为当你复制实例时，字段数据会被分配**两次，这是被****锁**禁止的。它将首先通过将`instance$data`值复制到中来分配`copyInst$data`，然后在复制`instance$d.accessor`到时进行分配`copyInst$d.accessor`，因为`d.accessor`它是一个 getter/setter，并且按照您定义它的方式，分配给它会导致分配给`$data`。

*插图*：

```
example$lock('data') # write-1, read-many
instance <- example$new() # instantiation
df <- data.frame(x=1, y=2)# example df
instance$data <- df # 1st assignement: OK
instance$d.accessor <- df #snd assignemnt: ERROR
Error: invalid replacement: reference class field ‘data’ is read-only 
```

# objective-c - 构建失败，缺少 i386 架构

> ID：13106902
> 
> 赞同：0
> 
> 时间：2012-10-28T06:36:33.313
> 
> 标签：objective-c, ios, xcode

我有一个名为 haxe 的物理文件夹以及里面的 .h 和 .m 文件。我将这个文件夹按原样导入到 Xcode，我不会从中创建一个组。在我的代码中，我像这样导入它并且项目构建良好：

```
#import "haxe/Log.h" 
```

但是，如果我想使用它包含的静态方法

```
[Log clear]; 
```

我收到 2 个构建错误

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_Log", referenced from:
      objc-class-ref in AppDelegate.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这是一个ios6应用程序，我不知道i386在那里做什么。在我的 Build Phases/Compile Sources 中，Log.m 确实没有出现，而是出现在 Copy Bundle Resources 中的整个文件夹

谢谢！

# mule - 带有文件端点的 Mule ForEach 示例

> ID：13106904
> 
> 赞同：0
> 
> 时间：2012-10-28T06:36:55.457
> 
> 标签：mule

我正在尝试编写一个简单的 Mule Flow 来监视文件目录，然后 SFTP 将它们发送到最终目的地。如果有大量文件，则 SFTP 应以 10 个为一组进行批量处理。

这是我的 XML

```
<flow name="FileTransferUtilFlow1" doc:name="FileTransferUtilFlow1">
    <file:inbound-endpoint path="${source.dropbox.dir}"
        moveToDirectory="${completed.dir}" responseTimeout="10000" doc:name="File">
        <file:filename-wildcard-filter pattern="*.txt"
            caseSensitive="true" />
    </file:inbound-endpoint>
    <async processingStrategy="Queued_Asynchronous_Processing_Strategy"
        doc:name="Async">
        <foreach doc:name="Foreach" batchSize="10">
            <sftp:outbound-endpoint exchange-pattern="one-way"
                host="192.168.1.14" port="22" path="${landing.dir}" user="myID"
                password="xxyyzz" responseTimeout="10000" doc:name="SFTP"
                outputPattern="#[header:originalFilename]" />
        </foreach>
    </async>
</flow> 
```

这是错误：

```
java.lang.IllegalArgumentException: Object "org.mule.transport.file.ReceiverFileInputStream" not of correct type. It must be of type "interface java.lang.Iterable,interface java.util.Iterator,interface org.mule.routing.MessageSequence,interface java.util.Collection"
at org.mule.routing.CollectionSplitter.splitMessageIntoSequence(CollectionSplitter.java:60)
at org.mule.routing.Foreach$CollectionMapSplitter.splitMessageIntoSequence(Foreach.java:250)
at org.mule.routing.outbound.AbstractMessageSequenceSplitter.process(AbstractMessageSequenceSplitter.java:60)
+ 3 more (set debug level logging or '-Dmule.verbose.exceptions=true' for everything)} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:33:11.110

[如文档](http://www.mulesoft.org/documentation/display/MULE3STUDIO/Foreach)所述， ForEach 范围旨在拆分/聚合集合。相反，文件端点轮询目录中的每个文件并从中创建消息。

为了实现您的目标，您需要引入一些明确的聚合策略。最好的方法是使用[自定义聚合器](http://www.mulesoft.org/documentation/display/MULE3USER/Routing+Message+Processors#RoutingMessageProcessors-CustomAggregator)

# java - 如何在java中创建直方图

> ID：13106906
> 
> 赞同：3
> 
> 时间：2012-10-28T06:38:01.010
> 
> 标签：java, arrays, histogram

> **可能重复：**
> [如何在java中将数字转换为符号？例如，而不是 2 到 **，或 3 到 *** 等。](https://stackoverflow.com/questions/13105765/how-to-convert-numbers-into-symbols-in-java-for-example-instead-of-2-to-or)

如何将数字转换为直方图？直方图应根据滚动该值的次数显示 2-12 的条形图。目前我的输出就像第二张图片，但假设看起来像第一张。谢谢。 ![像这样：](../Images/555bbbc161dd46ab20761493045f5a1a.png) ![在此处输入图像描述](../Images/00ecae68beb105e77f5433e1d1b9a0e1.png)

```
 public static void main(String[] args) {
    // TODO code application logic here
    System.out.print("Please enter how many times you want to roll two dice?");
    Scanner sc = new Scanner(System.in);
    int n = sc.nextInt();
    int [] rolls = new int[n];

    Random r1 = new Random();
    Random r2 = new Random();

    int dice1;
    int dice2;

    int two = 0;
    int three = 0;
    int four = 0;
    int five = 0;
     int six = 0;
    int seven = 0;
    int eight = 0;
    int nine = 0;
     int ten = 0;
    int eleven = 0;
    int twelve = 0;

    for (int roll=0; roll < rolls.length; roll++)
    {
         dice2 = r2.nextInt(6)+1;
         dice1 = r1.nextInt(6)+1;
         System.out.println(roll + " The first dice rolled a " + dice1 + " the second dice rolled a " + dice2);

         int sum;
         sum = dice1 + dice2;

         if (sum == 2)
             two++;
         if (sum == 3)
             three++;
         if (sum == 4)
             four++;
         if (sum == 5)
             five++;
         if (sum == 6)
             six++;
         if (sum == 7)
             seven++;
         if (sum == 8)
             eight++;
         if (sum == 9)
             nine++;
         if (sum == 10)
             ten++;
         if (sum == 11)
             eleven++;
         if (sum == 12)
             twelve++;

    }
    System.out.println("Histogram of rolls:" );  
    System.out.println("2 occurred " + two + " times");
    System.out.println("3 occurred " + three + " times");
    System.out.println("4 occurred " + four + " times");
    System.out.println("5 occurred " + five + " times");
    System.out.println("6 occurred " + six + " times");
    System.out.println("7 occurred " + seven + " times");
    System.out.println("8 occurred " + eight + " times");
    System.out.println("9 occurred " + nine + " times");
    System.out.println("10 occurred " + ten + " times");
    System.out.println("11 occurred " + eleven + " times");
    System.out.println("12 occurred " + twelve + " times");

} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T07:59:39.740

这里有一些您可以用来完成此任务的代码。

创建数组

```
int[] histogram = new int[13]; 
```

增加数组中的位置

```
histogram[id]++; 
```

打印直方图

```
System.out.println("Histogram of rolls:" );
printHistogram(histogram); 
```

这里还有一些辅助函数。

```
private void printHistogram(int[] array) {
     for (int range = 0; range < array.length; range++) {
        String label = range + " : ";
        System.out.println(label + convertToStars(array[range]));
    }
}

private String convertToStars(int num) {
    StringBuilder builder = new StringBuilder();
    for (int j = 0; j < num; j++) {
        builder.append('*');
    }
    return builder.toString();
} 
```

应根据需要修改代码。

# git - 如何从命令行 Git 迁移到 EGit？

> ID：13106907
> 
> 赞同：-1
> 
> 时间：2012-10-28T06:38:15.873
> 
> 标签：git, egit

我有一个包含 4 个包的项目。我在源代码文件夹级别的每个包中都有一个 Git 存储库。如何将这 4 个存储库从命令行 Git 迁移到 EGit？

编辑：我看了几个 EGit 教程，它们似乎是关于 Git 的，作为 EGit 使用的预备背景，或者关于 EGit 和新存储库，但没有关于现有存储库的迁移。

编辑：这是一个更好的问题表述： [Migrating to EGit with an existing Eclipse project and nested Git repos](https://stackoverflow.com/questions/13107801/can-egit-be-used-with-existing-eclipse-projects-and-existing-git-repos)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T06:51:39.717

## 没做什么

一个git repo，就是一个git repo。使用什么 GUI 来查看/与之交互并不重要 - git 存储库本身不会改变，没有迁移步骤。

## 了解 EGit

了解使用或不使用 EGit 对您的存储库没有直接影响 - 只需[遵循文档](http://wiki.eclipse.org/EGit/User_Guide#Starting_from_existing_Git_Repositories)。如果您有特定问题，请编辑问题以说明问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T07:29:43.740

请注意，egit 依赖于 jgit。

jgit 可能无法实现 git 中的所有功能或修复所有错误。

# javascript - 动态表格不起作用

> ID：13106910
> 
> 赞同：0
> 
> 时间：2012-10-28T06:39:17.327
> 
> 标签：javascript, jquery, html

我今天早些时候在这里问了一个问题，并被引导使用jQuery来解决一个问题。我是 jQuery 新手，但遵循参考并创建了以下代码。它适用于 jsFiddle，但不适用于我的 Firefox 浏览器。jQuery 指向正确的路径，具有正确的文件名。这是在我的本地服务器上，尽管我认为这并不重要。我想根据从下拉列表中选择的值隐藏取消隐藏输入表单有人能告诉我为什么这不起作用吗？

```
 <html>
    <style>
    .hidden {
        display: none;
    }
    </style><!--end css-->

    <script type="text/javascript" src="jquery.js"> </script>

    <script type="text/javascript">
    $('#payment_type').on('change', function() {
        var val = $(this).val();
        $('#nvendor').hide();
    });
    </script>

    </head>
    <body>

    <h3>Select</h3>
    <select id="payment_type" name="payment_type">
       <option>Select a payment type...</option>
       <option value="nvendor">Add</option>
       <option value="PayPal">Update</option>
    </select>

    <form id="nvendor" class="hidden">
    Company: <input type="text" />
    Address Available: <input type="text" />
    Minimum Delivery Amount: <input type="text"/>
    Logo: <input type="text" />
    <input type="submit" name="submit" value="Next" />
    </form>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T06:42:22.517

尝试

```
<script type="text/javascript">
    $(document).ready(function(){
      $('#payment_type').on('change', function() {
        var val = $(this).val();
         if(val == "nvendor")
           $('#nvendor').hide();
        else
           $('#nvendor').show();
     });
    })
</script> 
```

`.hidden`并从表单中删除类

# android - Android - 防止对话框在键盘打开时调整大小

> ID：13106917
> 
> 赞同：2
> 
> 时间：2012-10-28T06:41:29.760
> 
> 标签：android, android-layout

我有一个 Android 活动，当键盘打开时我不需要调整它的大小。
在我的活动中，我有一个 EditText、ExpandableListView 和一个水平方向的 LinearLayout，其中包含 2 个按钮，这些按钮都在一个垂直方向的 LinearLayout 内，方式如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
     >
        <EditText android:id="@+id/txtUserNameFilter"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="@+string/searchUsersHint"
        android:inputType="text"
        android:maxLines="1" />
    <ExpandableListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_marginBottom="5pt"
        android:layout_weight="1"
        android:groupIndicator="@null" 
        android:clickable="True"
        android:textFilterEnabled="true"
        android:fastScrollEnabled="True"/>
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:orientation="horizontal" >
        <Button
            android:id="@+id/btn_ok"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/ok" />
        <Button
            android:id="@+id/btn_cancel"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/cancel" />
    </LinearLayout>
</LinearLayout> 
```

我将我的活动设置为通过以下方式打开为对话框：

```
 <activity android:name=".SelectUsersDialog"
              android:label="@string/select_users" android:excludeFromRecents="True" android:theme="@android:style/Theme.Dialog"/> 
```

当键盘打开时，我无法阻止我的对话框调整大小。我尝试通过以下方式将 windowSoftInputMode 值添加到清单中的我的活动中：

```
android:windowSoftInputMode="adjustPan" 
```

但这没有帮助。
我也尝试了 windowSoftInputMode 的其他组合，但没有一个有效。

实现这一目标的正确方法是什么？

谢谢

# php - 分页建议

> ID：13106918
> 
> 赞同：0
> 
> 时间：2012-10-28T06:41:51.067
> 
> 标签：php, mysql, pagination

我的分页有问题。分页查询的php代码为：

```
$ <? if (isset($_GET["page"])) { 

    $Page = preg_replace("/[^0-9]/","", $_GET["page"]);
} else {
    $Page = 0;
}
$limit       = 10;
$StartFrom  = $limit * $Page;
$TotalFiles = mysql_num_rows(mysql_query("SELECT * FROM linkuri WHERE `categorie` = 'Afaceri' AND status = 1"));
$TotalPages = floor($TotalFiles / $limit); ?> 
```

以及显示它的代码：

```
$i = 0; while ($TotalPages >= $i) { echo '<a class="active imgf" style="opacity: 1;margin-bottom:3px; margin-top:3px;" href="afaceri.php?page='.$i.'">'.($i+1).'</a>';$i++;} 
```

问题是我试图使显示为：`PAGES: "BACK" 1 2 3 4 5 "NEXT"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T06:48:03.713

首先，我想建议对您的查询进行改进。要计算总行数，请使用：

```
SELECT count(*) as `totalpost` FROM linkuri WHERE `categorie` = 'Afaceri' AND status = 1 
```

然后，您可以通过执行以下操作来创建该分页：

```
$totalPost = 50; //Dummy total post
$limit = 10;

$pages = $totalPost / $limit; //Giving 5

//Now we know there are five pages
for($i=1; $i<=$pages; $i++) {
  echo $i; // Better echo something like <a href="link">$i</a>
} 
```

[PS：这是一个非常基本的例子]

掌握如何创建分页效果后，请查看本教程

> [如何使用 PHP 进行分页？](http://net.tutsplus.com/tutorials/php/how-to-paginate-data-with-php/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T07:04:09.843

如果您不想执行两个具有相同条件的长查询，请考虑对此进行测试：

```
SELECT SQL_CALC_FOUND_ROWS, * FROM foo WHERE bar ORDER BY ouch 
```

然后在那之后

```
SELECT FOUND_ROWS() AS found 
```

第一个查询为您提供条件和限制的结果，第二个查询无限制地提供所有记录数

# python - Mac 10.8.2 上的 Numpy 安装

> ID：13106919
> 
> 赞同：9
> 
> 时间：2012-10-28T06:42:19.520
> 
> 标签：python, numpy, osx-mountain-lion

我在 MacOS 10.8.2 上运行 python 2.6，并尝试安装 Numpy 以使用 NLTK。我已经查看了下面突出显示的几种方法，但还没有安装包的任何运气。

1.  我已经按照[这个](https://stackoverflow.com/questions/7338051/install-numpy-on-mac-os-x-lion-10-7)建议安装了 xcode，但这并没有解决任何问题。

2.  我尝试[直接构建](http://www.iram.fr/IRAMFR/GILDAS/doc/html/gildas-python-html/node38.html)，使用

    ```
    python setup.py build --fcompiler=gnu95 
    ```

    返回以下消息

    ```
    RuntimeError: Broken toolchain: cannot link a simple C program 
    ```

3.  [直接安装，我从这里](http://sourceforge.net/projects/numpy/files/)下载了dmg文件。直接提取文件时，`numpy`抱怨它需要安装 Python 2.6 或更高版本，所以这也失败了。

    我在某处读到 MacOS 附带 Apple 版本的 Python，我想避免使用它；我已经安装了 Eclipse 和 PyDev，并且相信我没有使用 Apple 版本，但是有没有办法确认这是真的并且`numpy`安装在“正确”版本的 Python 上？

4.  当我尝试跑步时

    sudo easy_install numpy

    我得到以下输出。最初我认为它与找不到 C/Fortran 编译器有关，但是我`gfortran`在直接构建它时安装了它，所以问题可能是其他问题......我无法通过查看其余部分来诊断问题消息虽然。

有没有人能指出一些明确的东西来帮助我`numpy`在这一切之后安装？到目前为止我所尝试的有什么问题 - 如果有的话？

谦虚地谢谢你，提前！

```
Searching for numpy
Reading http://pypi.python.org/simple/numpy/
Reading http://numpy.scipy.org
Reading http://sourceforge.net/project/showfiles.php?group_id=1369&package_id=175103
Reading http://numeric.scipy.org
Best match: numpy 1.6.2
Downloading http://pypi.python.org/packages/source/n/numpy/numpy-1.6.2.zip#md5=7e13c931985f90efcfa0408f845d6fee
Processing numpy-1.6.2.zip
Running numpy-1.6.2/setup.py -q bdist_egg --dist-dir /tmp/easy_install-6DObmd/numpy-1.6.2/egg-dist-tmp-KMbGBl
Running from numpy source directory.non-existing path in '/private/tmp/easy_install-6DObmd/numpy-1.6.2/numpy/distutils': 'site.cfg'
/bin/sh: svnversion: command not found
/bin/sh: svnversion: command not found
Could not locate executable f95
Could not locate executable f90
Could not locate executable f77
Could not locate executable xlf90
Could not locate executable xlf
Could not locate executable ifort
Could not locate executable ifc
Could not locate executable g77
Found executable /usr/local/bin/gfortran
sh: /usr/bin/gcc-4.2: No such file or directory
sh: /usr/bin/gcc-4.2: No such file or directory
Traceback (most recent call last):
  File "/opt/local/bin/easy_install", line 8, in <module>
    load_entry_point('setuptools==0.6c11', 'console_scripts', 'easy_install')()
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg/setuptools/command/easy_install.py", line 1712, in main
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg/setuptools/command/easy_install.py", line 1700, in with_ei_usage
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg/setuptools/command/easy_install.py", line 1716, in <lambda>
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/distutils/core.py", line 152, in setup
    dist.run_commands()
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/distutils/dist.py", line 987, in run_commands
    self.run_command(cmd)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/distutils/dist.py", line 1007, in run_command
    cmd_obj.run()
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg/setuptools/command/easy_install.py", line 211, in run
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg/setuptools/command/easy_install.py", line 446, in easy_install
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg/setuptools/command/easy_install.py", line 476, in install_item
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg/setuptools/command/easy_install.py", line 655, in install_eggs
 File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg/setuptools/command/easy_install.py", line 930, in build_and_install
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg/setuptools/command/easy_install.py", line 919, in run_setup
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg/setuptools/sandbox.py", line 62, in run_setup
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg/setuptools/sandbox.py", line 105, in run
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg/setuptools/sandbox.py", line 64, in <lambda>
  File "setup.py", line 214, in <module>
  File "setup.py", line 207, in setup_package
  File "/tmp/easy_install-GH52RV/numpy-1.6.2/numpy/distutils/core.py", line 186, in setup
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/distutils/core.py", line 152, in setup
    dist.run_commands()
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/distutils/dist.py", line 987, in run_commands
    self.run_command(cmd)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/distutils/dist.py", line 1007, in run_command
    cmd_obj.run()
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg/setuptools/command/bdist_egg.py", line 167, in run
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/distutils/cmd.py", line 333, in run_command
    self.distribution.run_command(command)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/distutils/dist.py", line 1007, in run_command
    cmd_obj.run()
  File "/tmp/easy_install-GH52RV/numpy-1.6.2/numpy/distutils/command/egg_info.py", line 8, in run
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/distutils/cmd.py", line 333, in run_command
    self.distribution.run_command(command)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/distutils/dist.py", line 1007, in run_command
    cmd_obj.run()
  File "/tmp/easy_install-GH52RV/numpy-1.6.2/numpy/distutils/command/build_src.py", line 152, in run
  File "/tmp/easy_install-GH52RV/numpy-1.6.2/numpy/distutils/command/build_src.py", line 163, in build_sources
  File "/tmp/easy_install-GH52RV/numpy-1.6.2/numpy/distutils/command/build_src.py", line 298, in build_library_sources
  File "/tmp/easy_install-GH52RV/numpy-1.6.2/numpy/distutils/command/build_src.py", line 385, in generate_sources
  File "/private/tmp/easy_install-GH52RV/numpy-1.6.2/numpy/core/setup.py", line 696, in get_mathlib_info
RuntimeError: Broken toolchain: cannot link a simple C program
/tmp/easy_install-GH52RV/numpy-1.6.2/numpy/distutils/misc_util.py:252: RuntimeWarning: Parent module 'numpy.distutils' not found while handling absolute import
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/atexit.py", line 24, in _run_exitfuncs
    func(*targs, **kargs)
  File "/tmp/easy_install-GH52RV/numpy-1.6.2/numpy/distutils/misc_util.py", line 252, in clean_up_temporary_directory
ImportError: No module named numpy.distutils
Error in sys.exitfunc:
Traceback (most recent call last):
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/atexit.py", line 24, in _run_exitfuncs
    func(*targs, **kargs)
  File "/tmp/easy_install-GH52RV/numpy-1.6.2/numpy/distutils/misc_util.py", line 252, in clean_up_temporary_directory
ImportError: No module named numpy.distutils 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-03T00:10:18.373

这就是我解决此问题的方法：

```
export CC=gcc
export CXX=g++
export FFLAGS=ff2c 
```

根据我在此处的 10.7 安装说明中找到的信息： [http ://www.scipy.org/Installing_SciPy/Mac_OS_X](http://www.scipy.org/Installing_SciPy/Mac_OS_X)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T10:59:16.333

[这里](https://stackoverflow.com/questions/13092643/cant-install-numpy-on-mountain-lion)有一条评论说 Apple 版本的 python 2.7 带有 numpy，所以你根本不需要安装它。

尝试运行

```
>>> /usr/bin/python2.7
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import numpy 
```

应该可以正常工作。现在您只需将系统 Python 2.7 配置为默认系统，并为此安装 NLTK。

我还找到了一个解决方案，`gcc`即使在安装 xcode 后也会失败。您需要单独安装命令行工具。看看[这个帖子](https://apple.stackexchange.com/questions/45505/i-installed-xcode-but-i-still-dont-have-gcc-in-my-terminal/45506#45506)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T03:22:15.420

Spicy Superpack 为 Mac 10.8.2 和其他 Intel Mac 版本安装最新的 64 位科学软件包：

Numpy (1.8) 和 Scipy (0.12) Matplotlib (1.3) iPython (0.14) Pandas (0.10) Statsmodels (0.5.0) Scikit-Learn 0.14 PyMC (2.2)

[Mac 的 Spicy Superpack](http://fonnesbeck.github.com/ScipySuperpack/)

# java - 如何在 Java 中转义 URL（文档不清楚）？

> ID：13106921
> 
> 赞同：7
> 
> 时间：2012-10-28T06:42:55.970
> 
> 标签：java, url, escaping

我发现了各种使用 Java 进行转义的帖子`java.net.URLEncoder.encode`。但是我在[文档中`URL`](http://docs.oracle.com/javase/7/docs/api/java/net/URL.html)找到了：

> 和类也可以使用，但仅用于 HTML 表单编码，`URLEncoder`与`URLDecoder`RFC2396 中定义的编码方案不同。

有人可以解释一下这种情况吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T07:14:00.517

您可以使用 URI。例如：

```
URI uri = new URI("http","google.com","/ a z.html","asd= z%#@@#");
System.out.println(uri.toString());
//returns http://google.com/%20a%20z.html#asd=%20z%25%23@@%23 
```

请注意，单参数构造函数不会转义字符，因此如果您执行以下操作，它将引发异常：

```
URI uri = new URI("http://google.com/ a z.html?asd= z%#@@#"); 
```

从 URI 中，您可以通过以下方式获取 URL：

```
URL uri.toURL(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-28T06:55:41.307

该文档正确地建议使用 URI 类。仍然提到 URLEncoder 的原因是我猜历史原因 URLEncoder 自 1.0 以来一直存在，而 URI 是在 1.4 中添加的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-28T07:03:21.913

URLEncoder，尽管它的名字，是用于编码 URL*参数*或 POST 参数。

在查询字符串之前正确编码 URL 的正确方法是通过 new URI(null, String, null).toURL()。

# c - char ch[]="一些字符串";

> ID：13106922
> 
> 赞同：3
> 
> 时间：2012-10-28T06:42:57.793
> 
> 标签：c, string

我有一个概念上的疑问。

```
char ch[20]="some string"; 
```

我想知道 ch 是如何存储的，即是分配了 20 个字节还是只是分配给它的字符串的长度？我们可以在这里访问类似 ch[18] 的内容吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T06:44:39.353

> **我想知道`ch`是如何存储的，即`20`是分配字节还是分配给它的字符串的长度？**

`ch`它按名称创建一个长度为字符的数组，`20`并用“一些字符串”对其进行初始化。
是的，数组大小为 20 个字节。

> **我们可以在这里访问类似 ch[18] 的内容吗？**

我们可以。甚至修改内容。

**好读：**

[char a[] = “string”; 和有什么区别？和 char *p = “字符串”；](https://stackoverflow.com/questions/9460260/what-is-the-difference-between-char-a-string-and-char-p-string/9631091#9631091)

* * *

要在评论中回答 Q：

```
 +---+---+---+---+---+---+----+----+----+----+----+----+----+      +----+----+
  ch:| s | o | m | e |   | s |  t |  r |  i |  n |  g | \0 |    |      | b  | \0 |
     +---+---+---+---+---+---+----+----+----+----+----+----+----+      +----+----+
       0   1   2   3   4   5   6    7    8     9   10   11   12  ......  18   19 
```

当你这样做时，

```
 ch[18]='b'; 
```

修改已经发生，只是你看不到它。
`printf`通过检测确定字符串的结尾`\0`。当`\0`你初始化它时，它被放置在字符串的末尾。C/C++ 中的规则在声明一个数组时，只要给定初始化器，任何未初始化的元素都会自动设置为 0。正如你在上面的图表描述中看到的，修改后的字符是放在`printf`认为是字符串结尾的内容之后，因此您无法在`printf`.

如果您通过 for 循环通过迭代每个字符输出字符串，您可以看到您的修改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T06:47:02.163

> 是否分配了 20 个字节

是的，因为您告诉它分配了 20 个字节。只是数组的前 12 个字节将使用您的字符串及其尾随 NUL进行**初始化，其他字节用零填充。**但是，您仍然可以访问（读取和写入）数组的所有 20 个字节，即 from`ch[0]`到`ch[19]`。

如果你写过

```
char ch[] = "some string"; 
```

then`ch`将被创建为 12 元素数组：

```
{ 's', 'o', m', 'e', ' ', 's', 't', 'r', 'i', 'n', 'g', 0 } 
```

只有这样，尝试读取或写入超出数组 i 的边界才会是错误的。e. `ch[12]`并且更高的索引会调用未定义的行为。

如果你写

```
char *ch = "some string"; 
```

这真的很糟糕，如果你需要一个字符串文字作为 char 指针，你真的应该写

```
const char *ch = "some string"; 
```

在这种情况下，`ch`指针指向一个 12 字节长的字符串，其中的字符是常量，因此它们是只读的 - 尝试**修改**它们（除了读取边界之外）再次是未定义的行为.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-28T07:39:10.563

`ch`由于您声明它使用 20 个字节，因此分配了20 个字节。是的，您可以访问 ch[18]。

问题与

```
char ch[20] = "some string";
ch[18] = 'b';
printf("%s",ch); 
```

是存储了包含其`NULL`终止符的文字“某些字符串”，因此当您打印它时，该字符串只会打印到第一个空终止符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-28T06:46:23.020

是的，您可以访问 ch[18]，您过度分配了数组，并且常量字符串之后的字节仍然存在，其中充满了未初始化的数据。查看内存位置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-28T06:56:04.517

```
`how ch is being stored`   and   `whether 20 bytes are allocated` 
```

实际分配了20个字节，分配的内存地址是不变的。这里的“ch”是指向所分配内存的第一个字节（或字符）的指针。而“ch+1”指向分配的内存的第二个字节。

```
Can we access something like ch[18] here? 
```

如果字符串的长度小于你请求的内存大小（本例为20），你仍然得到请求的大小，其他字节的值不确定（可能为0或不为0，但在vc6中，通常是初始化为 0)。ch[18] 可以访问，但值可能未知。因此，如果您想访问它们，您可能必须自己努力将它们初始化为 0。

# c++ - 托管和非托管 C++ 和 Boost

> ID：13106925
> 
> 赞同：0
> 
> 时间：2012-10-28T06:43:38.510
> 
> 标签：c++, c++-cli

我真的无法在网上找到很多关于托管和非托管 C++ 代码之间差异的资源。然而，从我发现的资源来看，托管 C++ 处理和清除自己分配的内存，这与非托管 C++ 所做的相反。我目前有一个 exe 应用程序，它使用了大量的 boost 和另一个 dll 库。现在我需要将此 exe 转换为非托管 dll 文件。谁能告诉我托管和非托管之间的区别以及我如何确定我当前的 C++ .exe 应用程序是否易于移植？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T07:13:26.577

*非托管 C++*与 C++ 相同。

*托管 C++*是 Microsoft 创建的专有语言，在 .NET 平台上运行，用于将 C++ 代码和 .NET 代码粘合在一起。

# java - Java如何捕获所有运行时错误

> ID：13106930
> 
> 赞同：0
> 
> 时间：2012-10-28T06:45:03.840
> 
> 标签：java

我已经构建了一个套接字服务器，它将所有它的进程记录在一个文本文件中。

目前，服务器在后台运行并且没有 UI。

有没有办法让我捕获所有运行时错误（不仅仅是那些抛出异常的错误）包括空指针等，并将其记录到文件中进行监控？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T07:15:43.157

是的，捕捉任何可以用 Java 抛出的东西都很简单。您只需要捕获所有可抛出的基类：

```
try {
  ... my code ...
catch (Throwable t) {
  ... process it ...
} 
```

关于术语的注释：Java 中可以抛出的所有东西都称为“异常”，而不仅仅是从`Exception`类扩展的异常。这是一个不幸的类名选择，可能是由于 Java 设计较晚才决定将超类引入`Exception`.

# linux - 在 Linux Mandriva 中安装 Subversion-1.6.17 - 未创建 bin 文件夹

> ID：13106934
> 
> 赞同：1
> 
> 时间：2012-10-28T06:45:44.560
> 
> 标签：linux, svn

我正在尝试在**Linux中安装****SVN**。

 **执行命令——

```
./configure --prefix=/subversion --without-apxs --with-apr=/apr/bin/apr-1-config --with-apr-util=/apu/bin/apu-1-config --disable-neon-version-check --with-neon=/neon
...
make
...
make install
... 
```

但在文件夹中`/subversion`只创建了目录`/lib`，并`/include`没有创建`/bin`。

**make**命令以 - 结尾

```
/usr/bin/ld: cannot find -lexpat
collect2: ld returned 1 exit status
make: *** [subversion/svn/svn] Error 1 
```

**make install**命令以 - 结尾

```
/usr/bin/ld: cannot find -lexpat
collect2: ld returned 1 exit status
make: *** [subversion/svn/svn] Error 1 
```

安装成功——

*   四月
*   四月实用程序
*   氖

文件**sqlite3.c**被添加到文件夹*/sqlite-amalgamation/*

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T07:51:49.783

您的错误消息告诉您缺少必需的依赖项，即`expat` [XML 解析库](http://expat.sourceforge.net/)。不会创建二进制文件，因为您的编译无法完成链接步骤。**

# oracle - ConnectionPool 需要很长时间才能使用 OCCI 在 Oracle 上创建连接

> ID：13106942
> 
> 赞同：1
> 
> 时间：2012-10-28T06:47:31.953
> 
> 标签：oracle

我在 RedHat 5 上有 Oracle 11g2，默认安装了 Oracle。

当我运行以下测试程序时，最多需要 30 秒才能从连接池中获取连接。连接池本身会立即创建。来自同一程序内同一池的后续 createConnection 调用也需要类似的长时间才能完成。

相反，如果我尝试直接获得连接，即不使用连接池，我会立即获得连接。

谢谢

```
#include <iostream>  
#include <occi.h>  
#include <map>

using namespace std;

int main(){

  oracle::occi::Environment* environment;  
  oracle::occi::Connection *con;  
  oracle::occi::Statement* stmt;  
  oracle::occi::ResultSet* res;  
  oracle::occi::ConnectionPool* connPool;  

  try{  

    environment = oracle::occi::Environment::createEnvironment(oracle::occi::Environment::DEFAULT);  
    connPool = environment->createConnectionPool("hr", "abcabc", "", 3, 5, 2);  
    con = connPool->createConnection("hr", "abcabc");  

    connPool->terminateConnection(con);  
    environment->terminateConnectionPool(connPool);  
  }  

  catch(oracle::occi::SQLException &e){  
    std::cout << e.what();  
  }  

  return 0;  

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T07:33:09.320

我在 RH 6.3 上运行基于 Oracle rpm 的客户端的客户端机器遇到了类似的问题。我使用以下值更改了 $ORACLE_HOME/network/admin 中的 sqlnet.ora 文件

> NAMES.DIRECTORY_PATH= (TNSNAMES, EZCONNECT)
> 
> SQLNET.AUTHENTICATION_SERVICES=（无）

我重新启动了我的程序，连接问题就解决了。

参考： [很长的SQL连接打开时间](https://stackoverflow.com/questions/2364588/very-long-sql-connection-opening-time)

# google-maps - 按钮和谷歌信息窗口

> ID：13106947
> 
> 赞同：-1
> 
> 时间：2012-10-28T06:48:15.227
> 
> 标签：google-maps, google-maps-api-3

> **可能重复：**
> [运行一次后如何“禁用”javascript函数](https://stackoverflow.com/questions/13096807/how-to-disable-javascript-function-after-being-ran-once)

我有两个按钮，单击它们时，运行以下两个功能之一：

```
 function addlaunchMark() { 
        google.maps.event.addListener(map, "click", function(event) {
          marker = new google.maps.Marker({
          position: event.latLng,
             map: map     
        });
        infowindow.open(map, marker);
        google.maps.event.addListener(infowindow, "closeclick", function() {
        marker.setMap(null);
            });
        });
    };

  function addfishingMark() {       
     google.maps.event.addListener(map, "click", function(event) {
         marker = new google.maps.Marker({
            position: event.latLng,
            map: map
           });
    fishinfowindow.open(map, marker);
    google.maps.event.addListener(fishinfowindow, "closeclick", function() {
    marker.setMap(null);
        });
    });
}; 
```

因此，当有人单击其中一个按钮时，会发生这种情况，它会打开该功能下的动作侦听器。如果您单击另一个按钮，则您已经单击的按钮仍然存在的问题。因此，当您再次单击时，您将获得两个标记和两个 infoWindows。单击另一个按钮后禁用功能或活动侦听器的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T23:29:29.003

I think in that case:

```
 addListenerOnce(instance:Object, eventName:string, handler:Function) 
```

would work

More on: [https://developers.google.com/maps/documentation/javascript/reference#event](https://developers.google.com/maps/documentation/javascript/reference#event)

# javascript - 使用 TypeScript 设置 window.location

> ID：13106950
> 
> 赞同：109
> 
> 时间：2012-10-28T06:49:22.367
> 
> 标签：javascript, jquery, typescript

我收到以下 TypeScript 代码错误：

```
 ///<reference path='../../../Shared/typescript/jquery.d.ts' />
 ///<reference path='../../../Shared/typescript/jqueryStatic.d.ts' />

 function accessControls(action: Action) {
    $('#logoutLink')
        .click(function () {
            var $link = $(this);
            window.location = $link.attr('data-href');
        });

 } 
```

我收到以下带下划线的红色错误：

```
$link.attr('data-href'); 
```

消息说：

```
Cannot convert 'string' to 'Location': Type 'String' is missing property 'reload' from type 'Location' 
```

有谁知道这意味着什么？

* * *

## 回答 #1

> 赞同：207
> 
> 时间：2012-10-28T06:50:48.373

`window.location`is 类型`Location`while`.attr('data-href')`返回一个字符串，所以你必须将它分配给它`window.location.href`也是字符串类型。为此替换您的以下行：

```
window.location = $link.attr('data-href'); 
```

对于这个：

```
window.location.href = $link.attr('data-href'); 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-10-28T06:53:17.050

你错过了`href`：

标准，在技术上使用`window.location.href`as是一个包含以下内容的对象：`window.location`

```
Properties
hash 
host 
hostname
href    <--- you need this
pathname (relative to the host)
port 
protocol 
search 
```

尝试

```
 window.location.href = $link.attr('data-href'); 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2021-09-20T07:25:19.347

只需添加href

像这样：

```
window.location.href = $link.attr('data-href'); 
```

# python - Python ROUND_05UP

> ID：13106953
> 
> 赞同：2
> 
> 时间：2012-10-28T06:50:18.497
> 
> 标签：python, django, decimal, rounding

我有一个处理帐户和 COD 交易的系统。当客户通过 COD 付款时，我需要向上或向下舍入美分。

```
Eg.
Total = 64.42 - rounds to: 64.40
Total = 64.57 - rounds to 64.60 
```

我试图找出在 python 中执行此操作的最佳方法，并将差异存储在数据库中的十进制字段中。

我正在使用 DJANGO。我试图使用十进制的 ROUND_05UP 部分，但我不知道该怎么做。我写了一个自定义过滤器来显示它，但这甚至不起作用：

```
@register.filter
def currency(value, arg='en_US', symbol=True):

    saved = '.'.join([x for x in locale.getlocale() if x]) or (None, None)
    given = arg and ('.' in arg and str(arg) or str(arg) + '.UTF-8')

    # Workaround for Python bug 1699853 and other possibly related bugs.
    if '.' in saved and saved.split('.')[1].lower() in ('utf', 'utf8'):
        saved = saved.split('.')[0] + '.UTF-8'

    if saved == (None, None) and given == '':
        given = 'en_US.UTF-8'

    try:
        locale.setlocale(locale.LC_ALL, given)

        return locale.currency(value or 0, symbol, True)

    except (TypeError, locale.Error):
        return ''

    finally:
        locale.setlocale(locale.LC_ALL, saved)

@register.filter
def currency_cash(value):
    value = decimal.Decimal(value)
    return currency(value.quantize(Decimal(10) ** -2, rounding=decimal.ROUND_05UP)) 
```

有没有人写过这样的功能？

**更新：**在澳大利亚我们没有少于 5 美分的硬币的原因。所以 45.55 将保持为 45.55。

干杯，本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T10:51:33.187

如果我理解正确，传入的金额已经是一个精确的整数美分，你只想四舍五入到最接近的 10 美分的倍数，但保留已经结束的值`5`。那是对的吗？[这是一个使用剩余](http://docs.python.org/2/library/decimal.html#decimal.Decimal.remainder_near)近点方法的简单解决方案。

```
from decimal import Decimal

def round_to_10_cents(x):
    """
    Round a Decimal value to the nearest multiple of 0.10,
    unless already an exact multiple of 0.05.

    """
    remainder = x.remainder_near(Decimal('0.10'))
    if abs(remainder) == Decimal('0.05'):
        return x
    else:
        return x - remainder

# Test code.
for x in range(80, 120):
    y = Decimal(x) / Decimal('1E2')
    print "{0} rounds to {1}".format(y, round_to_10_cents(y)) 
```

样本输出：

```
0.80 rounds to 0.80
0.81 rounds to 0.80
0.82 rounds to 0.80
0.83 rounds to 0.80
0.84 rounds to 0.80
0.85 rounds to 0.85
0.86 rounds to 0.90
0.87 rounds to 0.90
0.88 rounds to 0.90
0.89 rounds to 0.90
0.90 rounds to 0.90
0.91 rounds to 0.90
0.92 rounds to 0.90
0.93 rounds to 0.90
0.94 rounds to 0.90
0.95 rounds to 0.95
0.96 rounds to 1.00
0.97 rounds to 1.00
0.98 rounds to 1.00
0.99 rounds to 1.00
1.00 rounds to 1.00
1.01 rounds to 1.00
1.02 rounds to 1.00
1.03 rounds to 1.00
1.04 rounds to 1.00
1.05 rounds to 1.05
1.06 rounds to 1.10
1.07 rounds to 1.10
1.08 rounds to 1.10
1.09 rounds to 1.10
1.10 rounds to 1.10
1.11 rounds to 1.10
1.12 rounds to 1.10
1.13 rounds to 1.10
1.14 rounds to 1.10
1.15 rounds to 1.15
1.16 rounds to 1.20
1.17 rounds to 1.20
1.18 rounds to 1.20
1.19 rounds to 1.20 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-12T06:11:58.793

您所说的这种四舍五入称为[瑞典四舍五入](http://en.wikipedia.org/wiki/Swedish_rounding)：

*   1 美分向下舍入为 0
*   2 美分向下舍入为 0
*   3 美分向上取整至 5 美分
*   4 美分向上取整至 5 美分

等等。

```
from decimal import Decimal as D, ROUND_HALF_EVEN  # or ROUND_HALF_UP

def round_to_5_cents(d):
    """
    Round a Decimal value to the nearest multiple of 0.05,
    """
    return (d*2).quantize(D('0.1'), ROUND_HALF_EVEN)/D(2)

for x in range(80, 120):
    d = D(x) * D('0.01')
    print "{0} rounds to {1}".format(d, round_to_5_cents(d)) 
```

样本输出：

```
0.80 rounds to 0.8
0.81 rounds to 0.8
0.82 rounds to 0.8
0.83 rounds to 0.85
0.84 rounds to 0.85
0.85 rounds to 0.85
0.86 rounds to 0.85
0.87 rounds to 0.85
0.88 rounds to 0.9
0.89 rounds to 0.9
0.90 rounds to 0.9
0.91 rounds to 0.9
0.92 rounds to 0.9
0.93 rounds to 0.95
0.94 rounds to 0.95
0.95 rounds to 0.95
0.96 rounds to 0.95
0.97 rounds to 0.95
0.98 rounds to 1.0
0.99 rounds to 1.0
1.00 rounds to 1.0
1.01 rounds to 1.0
1.02 rounds to 1.0
1.03 rounds to 1.05
1.04 rounds to 1.05
1.05 rounds to 1.05
1.06 rounds to 1.05
1.07 rounds to 1.05
1.08 rounds to 1.1
1.09 rounds to 1.1
1.10 rounds to 1.1
1.11 rounds to 1.1
1.12 rounds to 1.1
1.13 rounds to 1.15
1.14 rounds to 1.15
1.15 rounds to 1.15
1.16 rounds to 1.15
1.17 rounds to 1.15
1.18 rounds to 1.2
1.19 rounds to 1.2 
```

@Mark Dickingson 的回答做了不同的事情。它导致较大的累积舍入误差。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-12T10:56:43.730

至于**ROUND_05UP**它似乎只是为了符合一些旧[标准](http://speleotrove.com/decimal/damodel.html#footnote.10)而添加的，并且没有或几乎没有实际应用（特别是，它是维基百科关于[舍入](http://en.wikipedia.org/wiki/Rounding)的文章中唯一缺少的 python 舍入方法）。

# nginx - FreeBSD 8.1 更新后出现 502 错误

> ID：13106958
> 
> 赞同：0
> 
> 时间：2012-10-28T06:51:17.153
> 
> 标签：nginx, fastcgi, freebsd

我`NGINX+PHPFPM`在一个系统上使用，直到今天我做了一个（更新）`FreeBSD 8.1`，一切都很好。`portmanager -u`重新启动系统后，我在尝试将某些内容发布到我的网站时开始收到 502，只有通过 POST 才会发生这种情况。我检查了我的`NGINX`配置，我的`PHPFPM`配置，一切都和以前一样，套接字正在运行，一切看起来都一模一样。我不明白这个问题。我真的需要快速解决这个问题，所以如果有人有任何建议或想法，请推荐。我不是高级`FreeBSD`用户，所以请耐心等待。

NGINX 错误日志显示：

```
2012/10/28 03:57:20 [error] 958#0: *160 upstream prematurely closed connection while reading response header from upstream, client: **.**.**.**, server: ..., request: "POST /post.php HTTP/1.1", upstream: "fastcgi://unix:/tmp/php.sock:", host: "...", referrer: "..." 
```

# javascript - 使用javascript获取一个月中的星期日数

> ID：13106961
> 
> 赞同：3
> 
> 时间：2012-10-28T06:52:08.073
> 
> 标签：javascript

> **可能重复：**
> [如何确定在 java 脚本中的两个日期之间的星期六和星期日的数量](https://stackoverflow.com/questions/6210906/how-to-determine-number-saturdays-and-sundays-comes-between-two-dates-in-java-sc)

我想使用javascript查找一个月中的星期日数

我将月份和年份传递给函数

我可以使用计算总天数

```
 <script type="text/javascript">
        function daysInMonth(month, year) {
            return new Date(year, month, 0).getDate();
        }
    </script> 
```

但需要找到没有星期天

请建议

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T08:55:21.263

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

```
function sundays(year, month) {

    var day, counter, date;

    day = 1;
    counter = 0;
    date = new Date(year, month, day);
    while (date.getMonth() === month) {
        if (date.getDay() === 0) { // Sun=0, Mon=1, Tue=2, etc.
            counter += 1;
        }
        day += 1;
        date = new Date(year, month, day);
    }
    return counter;
}

console.log(sundays(2012, 5));
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T07:09:49.447

```
function sundaysInMonth( m, y ) {
  var days = new Date( y,m,0 ).getDate();
  var sundays = [ (8 - (new Date( m +'/01/'+ y ).getDay())) % 7 ];
  for ( var i = sundays[0] + 7; i < days; i += 7 ) {
    sundays.push( i );
  }
  return sundays;
}

alert( sundaysInMonth( 10,2012 ) ); //=> [ 7,14,21,28 ]
alert( sundaysInMonth( 10,2012 ).length ); //=> 4 
```

# cocoa - NSButton 的键绑定问题

> ID：13106963
> 
> 赞同：2
> 
> 时间：2012-10-28T06:52:27.217
> 
> 标签：cocoa, nstextfield, nsbutton

我有一个包含几个 NSButton 对象的布局，以及一个文本只能选择的 NSTextField。其他 NSButton 对象具有关联的键绑定，并且在我在文本字段中选择一些文本之前，这非常有效。从那里开始，布局中其他按钮的键绑定不再起作用。

我查看了不同的解决方案，例如尝试设置 SetSelectable:NO 和 YES，但似乎文本字段保持其焦点并接收所有击键，即使它不可编辑。

我希望文本字段中的文本是可选的，但是如果单击其他按钮之一，则文本字段应该停止接收键事件。

有任何想法吗？

* * *

我找到了解决方案。

在 Macrumors： [http ://forums.macrumors.com/showthread.php?t=852807](http://forums.macrumors.com/showthread.php?t=852807)

我找到了一种方法，用于检查文本字段是否具有焦点：

```
- (BOOL)isTextFieldInFocus:(NSTextField *)textField {
BOOL inFocus = NO;

inFocus = ([[[textField window] firstResponder] isKindOfClass:[NSTextView class]]
           && [[textField window] fieldEditor:NO forObject:nil]!=nil
           && [textField isEqualTo:(id)[(NSTextView *)[[textField window] firstResponder]delegate]]);

return inFocus;
} 
```

然后在所有 NSButtons 上执行的 Update 方法中，我写道：

```
if ([self isTextFieldInFocus:display]) {
    [display setHidden:YES];
    [display setHidden:NO];
} 
```

其中 display 是 NSTextField 出口的名称。

现在，当我选择一些文本，然后按下其中一个按钮时，NSButtons 上的键绑定又恢复了工作。这允许用户选择和复制文本，但是他必须按一个按钮才能输入击键，我认为这是可以的。

# c# - 如何在c#中动态创建表

> ID：13106967
> 
> 赞同：5
> 
> 时间：2012-10-28T06:52:59.787
> 
> 标签：c#, asp.net

```
<table id="tableContent" border="1" runat="server">
    <tr>
        <td colspan="3">
        Record 1
        </td>
    </tr>
    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
    </tr>
    <tr>
        <td>a</td>
        <td>b</td>
        <td>c</td>
    </tr>
    <tr>
        <td>m</td>
        <td>n</td>
        <td>o</td>
    </tr>
    <tr>
        <td colspan="3">
            <input id="Button1" type="button" value="button" />
        </td>
    </tr>
</table> 
```

我必须在 C# 中动态创建上表我正在尝试但没有得到

```
protected void Page_Load(object sender, EventArgs e)
{

    HtmlTableRow row = null;
    HtmlTableCell cell = null;

    for(int i = 0; i < 5; i++)
    {
        row = new HtmlTableRow();
        cell = new HtmlTableCell();
        tableContent.Controls.AddAt(i, row);
        row.Controls.AddAt(i, cell);
        cell.InnerText="1";
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-28T07:41:57.860

您可以尝试此代码来创建表。

首先将此标记放在您的 aspx 页面中，例如

```
<table id="tableContent" border="1" runat="server"></table> 
```

然后在 Page_Load 中尝试此代码，例如

```
protected void Page_Load(object sender, EventArgs e)
{
    HtmlTableRow row = new HtmlTableRow();
    HtmlTableCell cell = new HtmlTableCell();

    cell.ColSpan =3;
    cell.InnerText = "Record 1";
    row.Cells.Add(cell);
    tableContent.Rows.Add(row);

    row = new HtmlTableRow();
    cell = new HtmlTableCell();

    cell.InnerText = "1";
    row.Cells.Add(cell);

    cell = new HtmlTableCell();
    cell.InnerText = "2";
    row.Cells.Add(cell);

    cell = new HtmlTableCell();
    cell.InnerText = "3";
    row.Cells.Add(cell);

    tableContent.Rows.Add(row);

    row = new HtmlTableRow();
    cell = new HtmlTableCell();

    cell.InnerText = "a";
    row.Cells.Add(cell);

    cell = new HtmlTableCell();
    cell.InnerText = "b";
    row.Cells.Add(cell);

    cell = new HtmlTableCell();
    cell.InnerText = "c";
    row.Cells.Add(cell);

    tableContent.Rows.Add(row);

    row = new HtmlTableRow();
    cell = new HtmlTableCell();
    cell.InnerText = "m";
    row.Cells.Add(cell);

    cell = new HtmlTableCell();
    cell.InnerText = "n";
    row.Cells.Add(cell);

    cell = new HtmlTableCell();
    cell.InnerText = "o";
    row.Cells.Add(cell);

    tableContent.Rows.Add(row);

    row = new HtmlTableRow();
    cell = new HtmlTableCell();

    HtmlInputButton input = new HtmlInputButton();
    input.ID = "Button1";
    input.Value = "button";

    cell.ColSpan = 3;
    cell.Controls.Add(input);
    row.Cells.Add(cell);
    tableContent.Rows.Add(row);
} 
```

或者你可以试试这个，通过将单元格值存储在二维数组中，比如

```
protected void Page_Load(object sender, EventArgs e)
{
    String[,] cellValues = { { "1", "2", "3" }, { "a", "b", "c" }, { "m", "n", "o" } };

    HtmlTableRow row = new HtmlTableRow();
    HtmlTableCell cell = new HtmlTableCell();

    cell.ColSpan = 3;
    cell.InnerText = "Record 1";
    row.Cells.Add(cell);
    tableContent.Rows.Add(row);

    for (int i = 0; i < cellValues.GetLength(0); i++)
    {
        row = new HtmlTableRow();
        for (int j = 0; j < cellValues.GetLength(1); j++)
        {
            cell = new HtmlTableCell();
            cell.InnerText = cellValues[i, j];
            row.Cells.Add(cell);
        }
        tableContent.Rows.Add(row);
    }

    row = new HtmlTableRow();
    cell = new HtmlTableCell();

    HtmlInputButton input = new HtmlInputButton();
    input.ID = "Button1";
    input.Value = "button";

    cell.ColSpan = 3;
    cell.Controls.Add(input);
    row.Cells.Add(cell);
    tableContent.Rows.Add(row);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-04T01:58:27.130

我使用此代码在 C# 中动态生成表。

```
string connectString = ConfigurationManager.ConnectionStrings["Sample4ConnectionString"].ToString();
        StudentsModelDataContext db = new StudentsModelDataContext(connectString);
        var studentList = db.Students;

        Table tb = new Table();
        tb.BorderWidth = 3;
        tb.BorderStyle = BorderStyle.Solid;
        tb.ID = "myTable";

        foreach (Student student in studentList)
        {
            TableRow tr = new TableRow();

            TableCell tc1 = new TableCell();
            TableCell tc2 = new TableCell();
            TableCell tc3 = new TableCell();
            TableCell tc4 = new TableCell();
            TableCell tc5 = new TableCell();

            tc1.Text = student.Name;
            tc1.BorderWidth = 2;
            tr.Cells.Add(tc1);

            tc2.Text = student.Email;
            tc2.BorderWidth = 2;
            tr.Cells.Add(tc2);

            tc3.Text = student.Gender;
            tc3.BorderWidth = 2;
            tr.Cells.Add(tc3);

            tc4.Text = student.BirthDate.ToString();
            tc4.BorderWidth = 2;
            tr.Cells.Add(tc4);

            tc5.Text = student.TotalMarks.ToString();
            tc5.BorderWidth = 2;
            tr.Cells.Add(tc5);

            tb.Rows.Add(tr);
        }
        form1.Controls.Add(tb); 
```

这生成了以下图像。 [![在此处输入图像描述](../Images/876e28f0b72fbd5f38e3f09c1db0a1cc.png)](https://i.stack.imgur.com/NZklG.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-10-24T12:05:52.493

```
Protected Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        Dim rows As Integer = TextBox1.Text
        Dim columns As Integer = TextBox2.Text

        Dim r As Integer
        Dim c As Integer

        Literal1.Text = "<table border=" & "1" & ">"
        For r = 1 To rows
            Literal1.Text &= "<tr>"
            For c = 1 To columns
                Literal1.Text &= "<td>"
                Literal1.Text &= "&nbsp"
                Literal1.Text &= "</td>"
            Next c
            Literal1.Text &= "</tr>"
        Next r
        Literal1.Text &= "</table>"
    End Sub 
```

# monodevelop - 用于快速修复和显示修复的 MonoDevelop 键绑定不起作用

> ID：13106971
> 
> 赞同：0
> 
> 时间：2012-10-28T06:54:48.260
> 
> 标签：monodevelop

我安装了 OSX 10.8.2 和 MonoDevelop 3.0.4.7，但我无法让那些该死的快速修复键绑定工作。`Quick fix...`分配给`[Alt]+[Return]`并且`Show fixes`是`[Cmd]+[Ctrl]+[.]`。但是当我按下这些时，什么也没有发生。对我来说最简单的用例是创建存根并添加一些导入。

我来自 Visual Studio 世界，所以这种行为可能存在一些差异？任何线索如何让这些快捷方式工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:25:45.773

您需要打开源分析才能使这些东西起作用，但是键绑定存在一些问题，但 Alt+Return 应该可以快速修复开箱即用。

但请记住在首选项下打开源分析。

# java - 读取具有未知数量值的文本文件行 (Java 7)

> ID：13106979
> 
> 赞同：3
> 
> 时间：2012-10-28T06:57:29.690
> 
> 标签：java

我刚刚开始学习使用 Java，如果这个问题太简单，请原谅我。我第一次尝试从文本文件中学习阅读，而我正在做的练习是创建一个基于文本的计算器。基本上，在一个文本文件中，我编写了我想要执行的操作和我想要计算的值，然后在一个 java 文件中执行整个事情。

然而，我一直在使用的方法只有在有一定数量的变量时才有效。例如，如果文本显示为“sum 5 10”，那么

```
if (command.equals("sum"))
{
    String a=calcScanner.next();
    String b=calcScanner.next();
    float A=Float.parseFloat(a);
    float B=Float.parseFloat(b);
    System.out.println(command+" "+A+" "+B+" = "+(A+B));
} 
```

会给我“15”，但如果有更多数字则不会。重组它的最佳方法是什么，无论需要处理多少数字，它都能正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T07:02:03.287

像这样的东西

```
while(someScanner.hasNextFloat()) {
    float f = someScanner.nextFloat();
} 
```

如果要添加文件中的所有浮点数，可以将它们添加到数组中，然后在数组中获取所有浮点数的总和。

最简单的数组实现可能只是一个`ArrayList<Float>`

或者正如下面的评论所建议的那样，您可以在每个循环之后添加总数。所以

```
float total = 0; 
```

你可以用这个替换你的循环，

```
while(someScanner.hasNextFloat()) {
        total += someScanner.nextFloat();
    } 
```

# javascript - 使用 JavaScript SDK 发布新闻阅读活动

> ID：13106982
> 
> 赞同：0
> 
> 时间：2012-10-28T06:58:14.613
> 
> 标签：javascript, facebook, facebook-graph-api

我正在使用 JavaScript SDK 向 Facebook 发布活动，但我收到的响应为“未定义”

```
<script>

setTimeout(function(){ 
    FB.api(
    '/me/news.reads' , 
    { article : document.location.href }, 
    function(response) {
        alert(response.name);
    });  
},10000);  

</script> 
```

我应该怎么做才能纠正这个问题？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-06-11T09:27:56.367

运行以下命令并检查响应

```
<script>

setTimeout(function(){ 
    FB.api(
    '/me/news.reads' , 
    { article : document.location.href }, 
    function(response) {
        console.log(response);
    });  
},10000);  

</script> 
```

# vba - VBA 混淆为什么在存储过程执行时返回这个值？

> ID：13106983
> 
> 赞同：0
> 
> 时间：2012-10-28T06:58:41.260
> 
> 标签：vba, stored-procedures

```
Private Sub CmdValid_Click()
On Error GoTo ErrValid:
Dim LngExec As Long
Dim varCie

Dim ret As VbMsgBoxResult
Dim StrSql
Dim DblBalance
    If Me.SF.Form.Dirty Then
        Me.SF.Form.Refresh
    End If
    DblBalance = aaRound(aaRound(Me.SF.Form.TxtCreditTotal.Value, 2) - aaRound(Me.SF.Form.TxtDebitTotal.Value, 2), 2)

    If DblBalance <> 0 Then

        MsgBox "Credit must be equal to credit. Press Delete if you want to delete this journal entry, or enter the appropriate values", vbCritical, "Validation refused"
    Else
    '---- We have to create the two record into the General ledger detail

        StrSql = "EXEC SpValidGenLedDet " & str(Me.GLHCode)
        LngExec = aaExecuteSP(StrSql)
        If LngExec = 0 Then
            DoCmd.SetWarnings (False)
            StrSql = "EXEC SpDelGenLedDetTmp " & str(Me.GLHCode)
            LngExec = aaExecuteSP(StrSql)
            DoCmd.SetWarnings (True)
            ret = MsgBox("This entry is successfully validated. Do you want to create another entry ?" & Chr(13) & Chr(10) & "click YES to add a new one , NO to close this form", vbInformation + vbYesNo, "validation accepted")
            If ret = vbYes Then
                varCie = Me.CboGlHInternalCie
                DoCmd.GoToRecord , , acNewRec
                If Not IsNull(varCie) Then
                    Me.GlHInternalCie = CLng(varCie)
                End If
            Else
                DoCmd.Close acForm, Me.Name
            End If
        Else
            MsgBox "There was an error while Writing the accounting lines into the General ledger, retry to validate or press delete to cancel the transaction"
        End If
    End If
finValid:
    Exit Sub
ErrValid:
    MsgBox "Error during validation", vbCritical, "Error"
    Resume finValid

End Sub 
```

我有一个 VBA 代码，我需要将其转换为上面给出的 c# 但是我无法理解为什么某些事情正在完成或发生

例如，上面的代码在`Private Sub CmdValid_Click()`此按钮的属性下，单击**前景色设置为 -2147483630 的值**。当我执行代码并检查断点时，我**在 LngExec 中得到值 -2147483630**。

然而，SpDelGenLedDetTmp 过程只是一个带有 where 子句的简单删除过程

```
 **

    /****** Object:  StoredProcedure [dbo].[SpDelGenLedTmp]    Script Date: 10/28/2012 12:27:47 ******/
    SET ANSI_NULLS ON
    GO
    SET QUOTED_IDENTIFIER OFF
    GO
    ALTER  PROCEDURE [dbo].[SpDelGenLedTmp]
        (@GHDHeader_1   [int])
    AS DELETE [ABOUSQL].[dbo].[TblGenLedDetTmp] 
    WHERE 
        ( [GHDHeader]    = @GHDHeader_1)

** 
```

* * *

```
Function aaExecuteSP(StrSql) As Long
On Error GoTo ErrGetData
Dim cnn As ADODB.Connection
Dim isok
Set cnn = aaDbConnect()

cnn.Execute (StrSql)

aaExecuteSP = 0
FinGetData:
    Exit Function
ErrGetData:
   If Err.Number <> 0 Then
    aaExecuteSP = Err.Number
End If
    Resume FinGetData

End Function 
```

任何帮助将不胜感激我对 VBA 很陌生

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T07:45:59.463

正如 joe 所指出的，所看到的返回值是一个错误号，因此更新答案以反映这一点，而不仅仅是一个随机负整数。

如果该值不直接用于更改任何内容，那么将其转换为 c# 你认为最合适的方式可能是安全的。很久没有使用 VBA，但它充满了有趣的东西

**更新** 删除的存储过程名称不同。代码中的那个与您提供的存储过程片段不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T09:21:38.950

看起来`cnn.Execute`函数中的行`aaExecuteSP`正在引发错误-2147483630。中的错误处理程序`aaExecuteSP`将此错误代码返回给调用者，但会丢弃许多其他有用的信息，这些信息将帮助您调试：

```
Err.Message 
cnn.Errors collection 
```

我建议您逐步使用调试器，在 "ErrGetData:" in 之后的行处中断`aaExecuteSP`，并检查这些属性。

顺便说一句，我认为错误代码恰好与按钮的 ForeColor 属性相同（即[vbButtonText = &H80000012 = -2147483630](http://msdn.microsoft.com/en-us/library/aa265064(v=vs.60).aspx)）只是一个巧合

# java - 整个应用程序的字符串哈希码是否相同？

> ID：13106984
> 
> 赞同：5
> 
> 时间：2012-10-28T06:59:44.750
> 
> 标签：java

我正在开发一个基于散列的程序。我的问题是 String 的 HashCode 是否会在整个应用程序中保持不变。

我之所以问这个问题，是因为 Mecached Servers 中的 KetamaMemcachedSessionLocator 以这种方式工作 如果有两台服务器运行 Memcache，我想从特定服务器中定位一个密钥。

```
String key = "MyString";
int keyid = key.hashCode();
int v = keyid % 1;  //( I assume that this will contact the First Server to retrieve that value )
int v = keyid % 2;  //( I assume that this will contact the Second Server to retrieve that value )
String value = MemcachedClient.get(key, v); 
```

后续以本网站为基础实施上述

[http://dev.mysql.com/doc/refman/5.0/en/ha-memcached-using-hashtypes.html](http://dev.mysql.com/doc/refman/5.0/en/ha-memcached-using-hashtypes.html)

请分享您的观点，如果您发现任何问题，如果上述方式有效。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-28T07:02:01.553

根据哈希码合约，如果`string1.eqauls(string2)`

[`The java.lang.String hash function`](http://en.wikipedia.org/wiki/Java_hashCode%28%29)

为了提供快速实现，Java String 类的早期版本提供了一个 hashCode() 实现，它考虑从字符串中选择最多 16 个字符。对于一些常见的数据，这工作得非常糟糕，提供了令人无法接受的集群结果，从而降低了哈希表的性能。

从 Java 1.2 开始，java.lang.String 类在整个字符串文本上使用乘积和算法实现其 hashCode()。例如，给定一个 java.lang.String 类的实例 s，其哈希码 h(s) 定义为

![h(s)=\sum_{i=0}^{n-1}s[i] \cdot 31^{n-1-i}](../Images/76ea64a346d8cf281388de473bde6add.png)

其中术语使用 Java 32 位 int 加法求和，s[i] 表示字符串的第 i 个字符，n 是 s 的长度。

与任何一般的散列函数一样，冲突是可能的。例如，字符串“FB”和“Ea”具有相同的哈希值。String 的 hashCode() 实现使用素数 31，'a' 和 'B' 的差值只有 31，所以计算为 70 × 31 + 66 = 69 × 31 + 97。

检查[`Collections Framework Enhancements in Java SE 7`](http://docs.oracle.com/javase/7/docs/technotes/guides/collections/changes7.html)您是否看到其中有变化，谁知道会发生变化。

*替代散列函数仅适用于字符串类型的键。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T07:17:57.803

是和不是。

[`hashCode()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)合约规定两个相等的字符串在同一个 JVM 中具有相同的哈希码。这意味着只要字符串不改变，代码就*不会改变。*

另一方面，实际`hashCode()`实现*已从*一个 JVM 版本更改为另一个版本和/或从一个 JVM 供应商更改为另一个。例如，[Oracle Java 7u6 为](http://www.oracle.com/technetwork/java/javase/7u6-relnotes-1729681.html)超过一定大小的字符串提供了更快的替代散列函数。目前它只在 Collections 框架中使用，但它很可能成为 Java 8 的系统范围的默认设置。

基本上，您可以依赖`hashCode()`于在同一个应用程序中保持一致，但不能在不同的应用程序实例之间保持一致。如果您打算存储或共享哈希码，您可能应该实现自己的函数。

另一个潜在的兴趣点是，`hashCode()`Java 中定义的长度为`int`32 位。这绝不是一个唯一的标识符——冲突非常频繁，程序员应该处理它们。如果您的存储系统依赖于唯一键，您可能希望使用更强的散列函数，例如[SHA-2](http://en.wikipedia.org/wiki/SHA-2)，无论如何。

# c# - 如何制作登录系统C#

> ID：13106985
> 
> 赞同：1
> 
> 时间：2012-10-28T06:59:47.587
> 
> 标签：c#, database, login-system

关于登录系统，我的代码有问题。当我在我的数据库中添加 1 个用户名和密码时，它可以正常工作。但是当我在数据库中添加另外 1 个用户名和密码时，我的 else 语句会弹出两次。当 3 个用户名和密码时，我的 else 语句将弹出三次。等等等等..这是我的代码..如果你有比我更好的代码，请出示。

```
SqlConnection con = new SqlConnection("Data Source=.\\SQLEXPRESS;AttachDbFilename=C:\\Users\\JEDMARC\\Desktop\\VS v1.0.0\\Voting System v1.0.0\\Voting System v1.0.0.mdf;Integrated Security=True;User Instance=True");
    SoundPlayer t = new SoundPlayer(@"C:\Users\JEDMARC\Documents\welcome.wav");

    private void btnEnter_Click(object sender, EventArgs e)
    {
 if (cmbToE.Text == "HomeRoom Election" && comboBox1.Text == "English")
        {
            con.Open();

            SqlCommand da = new SqlCommand("SELECT * FROM RegistrationTable", con);

            SqlDataReader reader = null;
            reader = da.ExecuteReader();
            while (reader.Read())
            {
                if (tbUsername.Text == (reader["Username"].ToString()) && tbPassword.Text == (reader["Password"].ToString()))
                {
                    MessageBox.Show("*Choose your best candidate. Use a Combobox.\n\n*After choosing, click Submit button to pass your vote!\n\n                           VOTE WISELY!", "How to vote?", MessageBoxButtons.OK, MessageBoxIcon.Asterisk);
                    UserHRForm x = new UserHRForm();
                    x.Show();
                    t.Play();
                    this.Close();
                }
                else
                {
                    SystemSounds.Hand.Play();
                    MessageBox.Show("Access Denied! Account doesn't exist!", "Error", MessageBoxButtons.OK, MessageBoxIcon.Hand);                        
                }
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T07:10:26.693

您的 while 循环会检查数据库中的每个用户，因此它会击中正确的用户一次，然后击中错误的用户两次。要按照您现在编写代码的方式执行此操作，您必须在`while`循环中使用一个标志来跟踪您是否找到了正确的用户/密码组合。就像是：

```
 bool foundUser = false;

        while (reader.Read())
        {
            if (tbUsername.Text == (reader["Username"].ToString()) && tbPassword.Text == (reader["Password"].ToString()))
            {
                foundUser = true;
                break;
            }
        }

        if (foundUser) {
                MessageBox.Show("*Choose your best candidate. Use a Combobox.\n\n*After choosing, click Submit button to pass your vote!\n\n                           VOTE WISELY!", "How to vote?", MessageBoxButtons.OK, MessageBoxIcon.Asterisk);
                UserHRForm x = new UserHRForm();
                x.Show();
                t.Play();
                this.Close();
            }
            else
            {
                SystemSounds.Hand.Play();
                MessageBox.Show("Access Denied! Account doesn't exist!", "Error", MessageBoxButtons.OK, MessageBoxIcon.Hand);                        
            } 
```

但这是对代码的非常低效的使用。相反，[让 SQL 为您处理过滤器](https://softwareengineering.stackexchange.com/a/171042)。这就是它的设计目的。

```
 con.Open();

        SqlCommand da = new SqlCommand("SELECT * FROM RegistrationTable WHERE Username=@Username AND Password=@Password", con);
        da.Parameters.Add("@Username ", SqlDbType.Varchar);
        da.Parameters["@Username "].Value = tbUsername.Text;
        da.Parameters.Add("@Password", SqlDbType.Varchar);
        da.Parameters["@Password"].Value = tbPassword.Text;

        SqlDataReader reader = null;
        reader = da.ExecuteReader();

            if (da.HasRows)
            {
                MessageBox.Show("*Choose your best candidate. Use a Combobox.\n\n*After choosing, click Submit button to pass your vote!\n\n                           VOTE WISELY!", "How to vote?", MessageBoxButtons.OK, MessageBoxIcon.Asterisk);
                UserHRForm x = new UserHRForm();
                x.Show();
                t.Play();
                this.Close();
            }
            else
            {
                SystemSounds.Hand.Play();
                MessageBox.Show("Access Denied! Account doesn't exist!", "Error", MessageBoxButtons.OK, MessageBoxIcon.Hand);                        
            }
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T07:04:26.063

要解决直接问题，您要使用`break`关键字退出`while`循环。

从长远来看，您应该考虑过滤掉 SQL 调用中的用户：

```
SqlCommand da = new SqlCommand(
    "SELECT * FROM RegistrationTable" + 
    "Where Username = @Username and Password = @Password", con);

da.Parameters.Add("@Username ", SqlDbType.Varchar);
da.Parameters["@Username "].Value = tbUsername.Text;
da.Parameters.Add("@Password", SqlDbType.Varchar);
da.Parameters["@Password"].Value = tbPassword.Text; 
```

这将确保数据读取器返回一个或零个元素（除非有人可以复制他们的登录）。您正在做的是返回整个表，并遍历每个结果，SQL 可以比您的 C# 代码更有效地执行这项工作。阅读[“永远不要在代码中做可以让 SQL 服务器为您做好的事情”——这是一个糟糕设计的秘诀吗？](https://softwareengineering.stackexchange.com/questions/171024/never-do-in-code-what-you-can-get-the-sql-server-to-do-well-for-you-is-this).

# html - 如何仅在字段集中更改链接的颜色？

> ID：13106991
> 
> 赞同：1
> 
> 时间：2012-10-28T07:01:53.053
> 
> 标签：html, css, colors, fieldset

问题是默认颜色不适合我的背景...有人可以告诉我如何将页面底部的链接颜色更改为橙​​色 [http://cisweb.bristolcc.edu/~jcharron17/ week8-javascript.html](http://cisweb.bristolcc.edu/~jcharron17/week8-javascript.html)

还要在字段集中保留常规颜色吗？ [http://cisweb.bristolcc.edu/~jcharron17/](http://cisweb.bristolcc.edu/~jcharron17/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T07:08:45.230

换行

```
<a href="index.html">Return to the Index</a> 
```

以以下方式在 div 内

```
<div id="footer">
<a href="index.html">Return to the Index</a>
</div> 
```

然后在你的 head 标签里面，写下下面的 css

```
<style type="text/css">
    #footer a {
        color: #F16F01;
    }
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T07:18:36.570

现在，您没有任何 A 标记规范，并且您无法表明页面页脚下方的标记需要与默认设置不同的处理方式。

正如 Abhishek 的示例所指出的，您需要将这些链接包装在能够为其提供上下文的内容中。他选择了`<div id="footer">`，这很好，并且 HTML4+ 有效。

我自己可能会选择 HTML5 规范：

```
<footer>
    <a href="index.html">Return to the Index</a>
</footer> 
```

此外，您需要注意所有链接默认具有的 :link、:visited、:hover 和 :active 状态。这就是为什么通常，为了确保您想要的颜色在所有状态下都保持该颜色，您可以像这样指定链接 CSS：

```
a, a:link, a:visited, a:hover, a:active {
    /* your specs here */
} 
```

在上述情况下，您将执行以下操作：

```
<style type="text/css">
    #footer a, #footer a:link, #footer a:visited, #footer a:hover, #footer a:active {
        color: #F16F01;
    }
</style> 
```

只是为了覆盖你所有的基地。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T13:03:27.947

将此代码放在您的网站源代码的末尾.. 在 # 的位置提供您的链接，您将获得该文本的橙色

```
<a href="#"><font color="#F16F01">Return to the Index</font></a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T09:15:21.557

像这样添加`class`到标签`a`：

```
<a href="index.html" class="orange">Return to the Index</a> 
```

和 CSS 规则：

```
.orange { color: #F16F01; }
.orange:hover { color: #FF9900; } 
```

或者您可以为所有链接使用新颜色，只需编写下一个 CSS 规则：

```
a { color: #F16F01; }
a:hover { color: #FF9900; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T14:03:09.800

```
fieldset a{
   color: pink;
} 
```

希望能帮到你

# android - 在myeclipse中安装android ADT

> ID：13106992
> 
> 赞同：0
> 
> 时间：2012-10-28T07:01:57.907
> 
> 标签：android

我正在使用 Myeclipse 6.0.1。我正在尝试将其配置为 android 应用程序开发。在尝试安装 android ADT 时，我收到以下错误消息：

```
Requested operation cannot be performed because it would invalidate the current configuration. See details for more information.
  Android Development Tools (20.0.3.v201208082019-427395) requires plug-in "org.eclipse.core.runtime (3.6.0)", or later version.
  Android DDMS (20.0.3.v201208082019-427395) requires plug-in 
"org.eclipse.ui (3.6.2)", or later version.
  Android Hierarchy Viewer (20.0.3.v201208082019-427395) requires plug-in 
"org.eclipse.ui (3.6.2)", or later version.
  Android Traceview (20.0.3.v201208082019-427395) requires plug-in 
"org.eclipse.ui (3.6.2)", or later version.
  Android Native Development Tools (20.0.3.v201208082019-427395) requires feature "org.eclipse.cdt". 
```

我已经下载了 zip 文件中的 org.eclipse.core.runtime (3.6.0) 并将其放在 eclipse 插件目录中。再次尝试做同样的事情......但错误信息是一样的。

请帮我在eclipse中安装android ADT

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T08:25:53.937

尝试为 EE 开发人员在 java eclipse 上安装 Adt 并使用最新版本的 eclipse 和 adt 和 sdk ，这是我的建议

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T07:34:34.187

确保您正在安装的 ADT 的版本比您安装的 SDK 更早（更低）或相同。安装高于 SDK 版本的 ADT 会报错。

# batch-file - 如何在批处理文件中获取整数的可用磁盘空间？

> ID：13106997
> 
> 赞同：6
> 
> 时间：2012-10-28T07:02:25.170
> 
> 标签：batch-file, cmd

我正在尝试在批处理文件中获取整数的可用磁盘空间。这是我的（非常）简单的代码。

```
@echo off
wmic logicaldisk get freespace >> freespace.log
exit 
```

但在 freespace.log 文件中输出。

```
FreeSpace    
9772687360   
57401442304  
7346626560   
0            
0 
```

我只需要选择整数和求和。像这样求和输出后。

```
74520756224 
```

我在谷歌上搜索是我最好的，但我找不到解决方案。请帮我：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T13:42:06.497

这是使用混合批处理和 powershell 的精确解决方案。它确实应该使用纯 powershell、vbscript 或 jscript 来完成。

令牌和 IF 语句的非直观使用是为了补偿 FOR /F 和 WMIC 的 unicode 输出之间的奇怪交互。

```
@echo off
setlocal enableDelayedExpansion
set /a freeSpace=0
for /f "skip=1 tokens=1,2" %%A in ('wmic logicaldisk get freespace') do (
  if "%%B" neq "" for /f %%N in ('powershell !freeSpace!+%%A') do (
    set freeSpace=%%N
  )
)
echo freeSpace=%freeSpace% 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T07:37:39.850

使用下面的代码。尝试将`caption`文本替换为`deviceid`显示`?`或空白。

```
@echo off
setlocal
set drive=C
set free=?
rem Note: WMIC will output unicode text
wmic logicaldisk where (caption = "%drive%:") get freespace>"%temp%\free.tmp"
for /f %%A in ('type "%temp%\free.tmp"') do (set free=%%A)
echo Free space: %free% bytes
rem if exist "%temp%\free.tmp" del "%temp%\free.tmp" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T13:05:17.530

我赞同@dbenham 的建议，即切换到 PowerShell（或至少 VBScript 或 JScript）。但是，如果您想坚持批处理并且不需要确切的数字，您可以执行以下操作：

```
@echo off

setlocal EnableDelayedExpansion

for /f %%v in ('wmic logicaldisk get freespace ^| findstr /r "[0-9]"') do (
  set val=%%v
  set val=!val:~-6!
  set /a sum+=val
)

echo !sum!

endlocal 
```

该行`set val=!val:~-6!`从每个值中删除最后 6 位数字。这样，您可以使用兆字节而不是字节进行计算，但（显然）会丢失一些精度，因为该值被截断（并且未正确舍入）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-27T00:26:47.753

这是一个纯批处理解决方案，可以处理大于 ~ 2G 的数字：

```
@echo off
setlocal EnableDelayedExpansion
set /A "SUMMEG=0" & set /A "SUMONE=0"
set /A "NUM=6" & set "ZER=000000"
for /F "tokens=2 delims==" %%F in ('
    wmic LOGICALDISK GET FreeSpace /VALUE
') do (
    for %%G in (%%F) do (
        set "ONE=%ZER%%%G"
        for /F "tokens=* delims=0" %%H in ("!ONE:~,-%NUM%!") do set "MEG=%%H"
        for /F "tokens=* delims=0" %%H in ("!ONE:~-%NUM%!") do set "ONE=%%H"
        set /A "SUMMEG+=MEG" & set /A "SUMONE+=ONE"
    )
)
if not "!SUMONE:~,-%NUM%!"=="" (set /A "SUMMEG+=!SUMONE:~,-%NUM%!")
set "SUMONE=%ZER%!SUMONE!" & set "SUMONE=!SUMONE:~-%NUM%!"
for /F "tokens=* delims=0" %%H in ("%SUMMEG%%SUMONE%") do set "FRE=%%H"
endlocal & if "%FRE%"=="" (set "FRE=0") else (set "FRE=%FRE%")
echo %FRE% 
```